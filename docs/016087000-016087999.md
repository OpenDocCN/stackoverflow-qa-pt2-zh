# StackOverflow 问答 16087000-16087999

# javascript - iScroll 4 - 取消 preventDefault()

> ID：16087002
> 
> 赞同：2
> 
> 时间：2013-04-18T15:25:20.980
> 
> 标签：javascript, events, touch, iscroll4

在下面的代码中，我添加了三个注释来解释问题所在。简而言之：我想知道`e.preventDefault();`当它已经设置时如何禁用？

```
 var startY;
   myScroll = new iScroll(DOMElement, {
        snap: 'li',
        bounce: false,
        bounceLock: false,
        momentum: false,
        hScrollbar: false,
        vScrollbar: false,
        hScroll: true,
        vScroll: false,
        wheelAction: 'scroll',
        onBeforeScrollStart: function(e){
            startY = e.pageY;
            // By default it's advisable to disable browser's scroll
            e.preventDefault();
        },
        onScrollStart: function(){  },
        onScrollMove: function(e){
            // But here I want to enable browser's functionality if user
            // explicitly demands this (i.e. tries to scroll vertically)
            if(startY >= e.pageY+70 || startY <= e.pageY-70){
                console.log('test');
                //alert('test');
                console.log(e);
                // However, I don't know how to restore this functionality
                // Touch device detects 'test' alert correctly and this is
                // where I'm stuck.
            }
        },
        onScrollEnd: function(){ },
        onRefresh: function(){ },
        onDestroy: function(){ },
    }); 
```

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T16:19:46.533

您可以控制滚动`onBeforeScrollStart`。防止在特定区域之间滚动。如果超过，滚动开始。我认为这有帮助：

```
var startY;
var isStarted = false;
myScroll = new iScroll(DOMElement, {
    snap: 'li',
    bounce: false,
    bounceLock: false,
    momentum: false,
    hScrollbar: false,
    vScrollbar: false,
    hScroll: true,
    vScroll: false,
    wheelAction: 'scroll',
    onBeforeScrollStart: function(e){
        var y=e.pageY;
        if (!isStarted) {
            startY = y + 0;
            isStarted = true;
        }

        if(startY < y+70 || startY > y-70){
            e.preventDefault();
        }
    },
    onScrollStart: function(){  },
    onScrollMove: function(e){ },
    onScrollEnd: function(){
        isStarted = false;
    },
    onRefresh: function(){ },
    onDestroy: function(){ },
}); 
```

# mysql - 在 MySQL 存储过程中重命名文件

> ID：16087008
> 
> 赞同：0
> 
> 时间：2013-04-18T15:25:35.453
> 
> 标签：mysql, stored-procedures, file-rename

我正在尝试备份存储在大表中的一些数据

```
SELECT ... INTO OUTFILE 
```

陈述。输出文件位于网络硬盘驱动器上，因此如果网络连接在转储期间中断（或多或少需要一分钟），我会在网络硬盘驱动器上找到部分文件，我想将此类文件标记为“错误的”。我可以在我的 MySQL 存储过程中给出一个 SQL 命令来重命名这样的文件吗？

非常感谢

最好的

盖尔西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T20:24:33.583

你不能在mysql中重命名文件，但你可以使用两个文件进行转储，只有在操作成功时才​​轮换它。

例子：

您将转储到“a.csv”，如果操作成功，将使用“b.csv”进行下一次转储，否则再次使用“a.csv”。等等...

# c# - wp7中的Base 64编码？

> ID：16087010
> 
> 赞同：0
> 
> 时间：2013-04-18T15:25:38.973
> 
> 标签：c#, windows-phone-7, base64

我有一个字符串，我想用 base64 编码。我还希望将最终编码保存在字符串中。

在 iOS 中是：

```
- (NSString *)encodeCredentials
{
    //string to be encoded
    NSString *deviceUUID = "34543647yrgsav635Chbvcew4f56v"
    NSData *plainTextData = [deviceUUID  dataUsingEncoding:NSUTF8StringEncoding];
    NSString *base64String = [plainTextData base64EncodedString];
    //i return the encoded string
    return base64String;
} 
```

在 wp7 中会怎样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T16:09:41.057

对于编码：

```
public string Encode(string str)
{
   return Convert.ToBase64String(System.Text.Encoding.UTF8.GetBytes(str));
} 
```

对于解码：

```
public string Decode(string str)
{
   return System.Text.Encoding.UTF8.GetString(Convert.FromBase64String(str));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T15:56:21.973

我在网上找到了这个方法，希望对你有帮助：

```
static public string EncodeTo64(string toEncode)
{
  byte[] toEncodeAsBytes
        = System.Text.ASCIIEncoding.ASCII.GetBytes(toEncode);
  string returnValue
        = System.Convert.ToBase64String(toEncodeAsBytes);
  return returnValue;
} 
```

在 wp7 中，您可能会被迫将 ASCIIEncoding 替换为 UTF8Encoding 或 Encoding 我不太记得但 Intellisense 确实如此，无论如何它都在 System.Text 中。

这是 System.Convert.ToBase64String 的文档：http: [//msdn.microsoft.com/en-us/library/dhx0d524.aspx](http://msdn.microsoft.com/en-us/library/dhx0d524.aspx)

# java - 播放框架：InvocationTargetException

> ID：16087011
> 
> 赞同：2
> 
> 时间：2013-04-18T15:25:41.487
> 
> 标签：java, playframework-2.0

我正在尝试基于 Zentask 示例创建一个简单的登录，但是在第 43 行的 smgts2\app\controllers\Application.java 中出现运行时异常。

```
public static Result authenticate() {
  Form<Login> loginForm = form(Login.class).bindFromRequest(); //Line 43
  if(loginForm.hasErrors()) {
    return badRequest(login.render(loginForm));
  } else {
    session("user_name", loginForm.get().user_name);
    return redirect( 
```

我已经在 github 中上传了文件：[https ://github.com/gscruz/smgts2-start](https://github.com/gscruz/smgts2-start)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T16:41:54.890

查看您在 GitHub 上的项目，我认为主要问题是`Accounts`模型类上的 JPA 注释对`user_account`数据库表进行建模。当您将表单数据绑定到 Login 对象时，模型类上的映射会得到执行，因为`Login.validate`queries `user_account`.

由于您的类的名称与表的名称不匹配，因此您需要一个 JPA`@Table`注释来显式声明映射：

```
@Entity
@Table(name = "user_account")
public class Accounts extends Model 
```

您还需要`@Column`对名称与其对应列不匹配的字段进行注释。试一试，看看它是否能让你走得更远。

# graph - Matlab SimBiology - 允许自连接节点

> ID：16087012
> 
> 赞同：1
> 
> 时间：2013-04-18T15:25:42.723
> 
> 标签：graph, matlab

我正在使用 Matlab 的[SimBiology](http://www.mathworks.com/help/simbio/)工具箱来生成[传记](http://www.mathworks.com/help/bioinfo/ref/biograph.html)（只是图表）。

当我试图包含一个连接到自身的节点时，例如：

```
g = [
       0 1 0;
       1 0 1;
       0 0 1; % This one connects to itself.   
    ] 
```

我收到以下警告消息：

```
Warning: Self connecting nodes are not allowed, ignoring the diagonal of CM. 
```

由于我的数据集包括一些自连接节点，我想知道这是否是一个可配置的功能。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T13:03:51.597

不幸的是，传记不能有自连接的边缘。如果您的目的只是为了可视化，您可以添加一些带有空标签的节点。这是一个小图和两个自连接节点的示例：

```
cm = [0 1 1 0 0;1 0 0 1 1;1 0 1 0 0;0 0 0 0 1;1 0 1 0 1];
ids = {'M30931','L07625','K03454','M27323','M15390'};

sc = find(diag(cm));
cm = cm-diag(diag(cm)); 
n = size(cm,1);
m = numel(sc);
cm(n+m,n+m)=0;
cm(sub2ind([n+m,n+m],[sc;(1:m)'+n],[(1:m)'+n;sc]))=1;
ids((1:m)+n) = {' '};

bg = biograph(cm);
for i = 1:numel(bg.Nodes)
    bg.Nodes(i).Label = ids{i};
    if i>n
        bg.Nodes(i).Shape = 'circle';
    end
end
view(bg) 
```

HTH 卢西奥

# php - 带背景颜色的文本输入

> ID：16087014
> 
> 赞同：1
> 
> 时间：2013-04-18T15:25:56.800
> 
> 标签：php

我有以下代码来加载基于值的输入字段的颜色`gap`

```
echo "<td class='gap'>";
echo "<input name = gap-".$compi['Competence_ID']." type='text' readonly style='width:20px;' value='";
if(isset($compi['gap']) && $compi['gap']!=0){
    echo $compi['gap'];
}
$color='';
if($compi['gap']>=0){
    $color='#3CB371';$text="gap bigger than 0";
}
if($compi['gap']<0){
    $color='#FFFFFF';$text="gap is not";
}
echo "' style='background-color:".$color.";'>";
echo $text."</td>"; 
```

代码打印正确，`$text`但输入的颜色没有改变..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T15:34:40.473

尝试：

```
echo '<td class="gap">';
echo '<input name = "gap-'.$compi['Competence_ID'].'" type="text" readonly value="';
if(isset($compi['gap']) && $compi['gap']!=0){
    echo $compi['gap'];
}
$color='';
if($compi['gap']>=0){
    $color='#3CB371';$text="gap bigger than 0";
}
if($compi['gap']<0){
    $color='#FFFFFF';$text="gap is not";
}
echo '" style="width:20px;background-color:'.$color.';">';
echo $text."</td>"; 
```

请记住，HTML 属性应该在双引号之间，并且这些引号不应该是错误的。属性上有一个错误引用`name`。并且不能有重复的属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T15:32:13.830

这是因为您的标签有两个`style`属性`<input>`- 在一个属性中添加两个 CSS 规则，您应该没问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T15:29:26.507

The CSS proberty "color" is for the text color, "background-color" is what you're searching for :)

[http://www.w3schools.com/cssref/pr_background-color.asp](http://www.w3schools.com/cssref/pr_background-color.asp)

# javascript - jquery弹出必须按两次“确定”两次才能使其消失

> ID：16087017
> 
> 赞同：0
> 
> 时间：2013-04-18T15:26:03.877
> 
> 标签：javascript, jquery, jquery-ui, kendo-ui, kendo-grid

我有一个问题，我试图找出为什么我必须按两次弹出按钮的“确定”按钮才能使其消失。我可以从我的代码中看到我只有一个警报语句，但它仍然表现得好像我可能不小心调用了两个警报语句

```
function intialiseKendoGrid(date) {
     gridResult = $('#grid').kendoGrid({
         scrollable: {
             virtual: true
         },
         navigatable: true,
         groupable: true,
         sortable: true,
         selectable: "row",
         pageable: true,

         pageable: {
             input: true,
             numeric: false
         },

         resizable: true,
         reorderable: true,
         filterable: {
             extra: false
         },
         columns: [{
             field: "DealNumber",
             width: 150,
             title: "DealNumber",

             filterable: {
                 operators: {
                     string: {
                         startswith: "Starts With",
                         contains: "Contains"
                     }
                 }

             },
         },
         {
             field: "DealIssuer",
             width: 150,
             title: "Issuer",
             filterable: {
                 operators: {
                     string: {
                         startswith: "Starts With",
                         contains: "Contains"
                     }
                 }
             },
             //template: "<a href='http://manager.dealogic.com/ManagerV3/CPCortex/Default/${DealNumber}'>${DealNumber}</a>"  
             template: "<a>${DealIssuer}</a>"

         }, {
             field: "Ticker",
             width: 150,
             title: "Ticker",
             filterable: {
                 operators: {
                     string: {
                         startswith: "Starts With",
                         contains: "Contains"
                     }
                 }
             }    
         }, {
             field: "DealExchange",
             width: 150,
             title: "Exchange",
             filterable: {
                 operators: {

                     string: {
                         startswith: "Starts With",
                         contains: "Contains"
                     }
                 }
             }
         }, {
             field: "DealType",
             width: 150,
             title: "Type",
             filterable: {
                 operators: {
                     string: {
                         startswith: "Starts With",
                         contains: "Contains"
                     }
                 }
             }

         }, {
             field: "DealValue",
             width: 150,
             title: "Value ($m)",
             filterable: {
                 operators: {
                     string: {
                         startswith: "Starts With",
                         contains: "Contains"
                     }
                 }
             },
             /*   template: '#= kendo.culture("en-US");kendo.toString(${DealValue/1000000},"p")#' */

             template: '#= kendo.toString(DealValue,"c2") #'

         }, {
             field: "DealStatus",
             width: 150,
             title: "Status",
             filterable: {
                 operators: {
                     string: {
                         startswith: "Starts With",
                         contains: "Contains"
                     }
                 }
             }

         }, {
             field: "DealPricingCompletionDate",
             width: 230,
             title: "DealPricingCompletionDate",
             format: "{0:dd/MM/yyyy}",
             filterable: {
                 ui: "datetimepicker",
                 operators: {
                     date: {
                         gt: "After",
                         lt: "Before",
                         eq: "Equals"
                     },
                     messages: {
                         filter: "Apply",
                         clear: "Clear"
                     }
                 }

             }
         },   
         ],

         change: function () {
             var text = "";
             var grid = this;
             grid.select().each(function () {
                 var dataItem = grid.dataItem($(this));
                 text += "DealNumber: " + dataItem.DealNumber + "\n" + "Issuer: " + dataItem.DealIssuer + "\n" + "Ticker: " + dataItem.Ticker + "\n" + "Type: " + dataItem.DealType + "\n" + "Value: " + dataItem.DealValue + "\n" +
                     "Status " + dataItem.DealStatus + "\n" + "DealPricingCompletionDate: " + kendo.toString(dataItem.DealPricingCompletionDate, "dd/MM/yyyy");
             });
             alert(text);
         },
         height: 700
     }).data("kendoGrid"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T15:31:01.570

change 事件被触发了两次，由于`alert()`被绑定到了 change 事件，它也会弹出两次。

查看[更改事件文档](http://docs.kendoui.com/api/web/grid#events-change)。它是“当用户在网格中选择表格行或单元格时触发”。

也许它被触发了两次，一次用于行，一次用于单元格？虽然我看到你有`selectable: "row"`所以它应该只为该行触发。

将您的更改事件更新为`change: function (e) { console.log(e); }`并查看它在调试控制台中输出的内容。这将提示您触发它的元素。

然后，您可以尝试添加`e.preventDefault();`更改事件以阻止触发任何其他事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T08:11:39.513

经过长时间的延迟，它现在被破解了。我所要做的就是通过超时使用 SetTimeOut 方法为 0，这意味着不指定任何时间参数。所以固定代码是

```
 function onRowSelected(e) {
        e.preventDefault();
        console.log(e.sender);
        var text = "";
        var grid = this;
        grid.select().each(function () {
            var dataItem = grid.dataItem($(this));
            text += "DealNumber: " + dataItem.DealNumber + "\n" + "Issuer: " +
                dataItem.DealIssuer + "\n" + "Ticker: " + dataItem.Ticker + "\n" + "Type: " + dataItem.DealType + "\n" + "Value: " + dataItem.DealValue + "\n" +
                "Status " + dataItem.DealStatus + "\n" + "DealPricingCompletionDate: " + kendo.toString(dataItem.DealPricingCompletionDate, "dd/MM/yyyy");
        });
        setTimeout(function () { alert(text) },0);

    } 
```

# javascript - 获取提交表单的操作

> ID：16087018
> 
> 赞同：16
> 
> 时间：2013-04-18T15:26:04.893
> 
> 标签：javascript, jquery

我有以下代码，每次用户在我的网站上提交表单时都会触发。

我想稍微修改它，以便它检查提交的操作，并根据特定关键字的存在运行一些代码。

我的代码如下：

```
$("form").submit(function() {
    //do some generic stuff
    var formAction = ""; //get the action of the submitted form

    if (formAction.indexOf('keyword') !== -1) {
        //do some specific stuff for these forms
    }
}); 
```

如何获得触发此呼叫`action`的那个？`form`

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-18T15:26:54.460

```
$("form").submit(function() {
    //some stuff...

    //get form action:
    var formAction = $(this).attr("action");

    //some other stuff...
}); 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2017-04-20T15:00:27.960

if you need Javascript without jQuery:

```
var action=document.getElementById('formId').action 
```

with jQuery:

```
var action=$('#formId').attr('action'); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2019-11-14T04:34:39.327

在 JavaScript 中，您可以使用 getAttribute 方法：

```
var form = document.getElementById('register_form');
var action = form.getAttribute("action") 
```

***注意：*** *form.getAttribute("action") 比使用 form.action 更安全。因为如果您在表单中有一个名为“action”的输入字段，那么浏览器可以返回该特定节点，而不是返回表单的操作 URL。*

[![在此处输入图像描述](https://i.stack.imgur.com/PShgu.png)](https://i.stack.imgur.com/PShgu.png)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-04-18T15:27:55.207

你可以通过这种方式获得动作属性 -

```
var formAction = $(this).attr("action"); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-07-31T10:56:34.493

在*“vanilla”* JS 中，你有`Element.getAttribute()`
Or（如果需要）你可以使用`this.action`. 看下面的细微差别

```
document.querySelector("form").addEventListener("submit", function(e) {

  e.preventDefault(); // Prevents form from submitting

  console.log( this.getAttribute("action") );  // "test.php"
  console.log( this.action );                  // <address>/test.php

  // this.submit();  // Submit afterwards or use AJAX to construct your request

});
```

```
<form action="test.php">
  <input type="submit">
</form>
```

# ios - 从 yahoo rss feed xcode 4.5 ios 解析媒体内容

> ID：16087035
> 
> 赞同：0
> 
> 时间：2013-04-18T15:27:06.340
> 
> 标签：ios, xml, xcode, xcode4.5

我正在尝试获取包含在 media:content 标签中的雅虎 RSS 提要的 url。didStartElement()、foundCharacters() 和 didEndElement() 的代码如下：

```
- (void)parser:(NSXMLParser *)parser
didStartElement:(NSString *)elementName
  namespaceURI:(NSString *)namespaceURI
 qualifiedName:(NSString *)qName
    attributes:(NSDictionary *)attributeDict {

    if ([elementName isEqualToString:kChannelElementName]) {
        Channel = [[channel alloc] init];
        dict=[[NSMutableDictionary alloc] init];
        [Channel setItemCollectionArray:[[NSMutableArray alloc] init]];

        return ;
}

    if ([elementName isEqualToString:kItemElementName]) {
       itemCollection=[[ItemDataCollection alloc] init];

        return ;
     }
    if ([elementName isEqualToString:kTitleElementName]) {

        return ;

    }
  if([elementName isEqualToString:kItemDescription]){
        return ;
    }
    if ([elementName isEqualToString:kItemImage]) {
        NSString *urlString = attributeDict[@"url"];
        if(urlString){
            [dict setObject:urlString forKey:@"img"];
        }

        return ;
    }

}

- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string {

    if (currentElementData == nil) {
        self.currentElementData = [[NSMutableString alloc] init];
    }

    [currentElementData appendString:string];     
}
- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName
  namespaceURI:(NSString *)namespaceURI
 qualifiedName:(NSString *)qName {

    if ([elementName isEqualToString:kChannelElementName]) {
        [channelCollection addObject:Channel];

        NSLog(@"channel are***********%@",channelCollection);
        for(ItemDataCollection *mydata in Channel.itemCollectionArray){
            NSLog(@"___%@ <><><><><> desc \n  %@ <><><><><><> img \n %@",mydata.title,mydata.itemDescription,mydata.titleImage);

        }

        Channel =nil;

    }

   else  if ([elementName isEqualToString:kItemElementName]) {
       [[Channel itemCollectionArray] addObject:itemCollection];
       itemCollection=nil;

        }
   else  if ([elementName isEqualToString:kTitleElementName]) {
       if(itemCollection==nil){

       Channel.title=currentElementData;
       }
       else{

           itemCollection.title=currentElementData;

       }

   }
   else  if ([elementName isEqualToString:kPubDate]) {
       Channel.pubDate=currentElementData;

   }
  else  if ([elementName isEqualToString: kItemDescription]) {
      if(itemCollection!=nil){
       itemCollection.itemDescription=currentElementData;

   } 
  }
     else if([elementName isEqualToString:@"media:content"]){
          if(itemCollection!=nil){
              itemCollection.titleImage = currentElementData;
          }
      } 
   // [currentElementData release];

    self.currentElementData = nil;
} 
```

我将解析的数据打印为日志。图像显示为空。其他所有内容，例如；标题和描述正在正确获取。我该如何解决？可能需要在 didEndElement 方法中做一些事情。但我不知道是什么。从昨天开始，我就一直在为此绞尽脑汁。请帮忙！！

我在 didStartElement() 中做了一些更改：

```
 if ([elementName isEqualToString:kItemImage]) {
            NSString *urlString = attributeDict[@"url"];
            if(urlString){
                [dict setObject:urlString forKey:@"img"];
                NSLog(@"%@",urlString);
                mString = [NSString stringWithFormat:urlString]; 
```

didEndElement() 中的一些变化：

```
else if([currentElementData rangeOfString:@"media:content"].location){
          if(itemCollection!=nil){
            //  [currentElementData appendString:dict];
              itemCollection.titleImage = mString;
          }
      } 
```

mString 已被声明为可变字符串。现在正在解析图像。他们的网址显示在日志中。问题是现在，最后一张图片重复了两次。可能是因为最后一个提要没有图像，所以它使用的是上一张。如何解决？我的意思是，可以有多个没有图像的提要。在这种情况下，它实际上应该显示 null 而不是上一张图片的 url。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T18:46:41.123

我不太了解雅虎 rss 提要，但我希望它会对你有所帮助......

试试这个....

```
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict {          

  currentElement = [elementName copy];
  if ([elementName isEqualToString:@"item"]) {
    item = [[NSMutableDictionary alloc] init];
    currentTitle = [[NSMutableString alloc] init];
    currentDate = [[NSMutableString alloc] init];
    currentSummary = [[NSMutableString alloc] init];
    currentLink = [[NSMutableString alloc] init];
    currentImage = [[NSMutableString alloc] init];
 }
 else if([elementName isEqualToString:@"media:content"]) {
         currentImage = [attributeDict objectForKey:@"img src"];
         NSLog(@"Url:%@", currentImage); 
    }
 }
} 
```

# java - 使用 Java 会话进行登录/注销

> ID：16087037
> 
> 赞同：2
> 
> 时间：2013-04-18T15:27:10.227
> 
> 标签：java, session, struts

无法让会话在我的 Java 应用程序中工作。

我的 login.jsp 页面调用了这个`LoginAction`页面。

```
package struts.action;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;
import org.apache.struts.action.ActionForm;
import org.apache.struts.action.ActionForward;
import org.apache.struts.action.ActionMapping;

import struts.form.LoginForm;

public class LoginAction extends org.apache.struts.action.Action {
private final static String SUCCESS = "success";
private final static String FAILURE = "failure";

    public ActionForward execute(ActionMapping mapping, ActionForm form, HttpServletRequest request, HttpServletResponse response) throws Exception {
        LoginForm lf = (LoginForm) form;
        HttpSession session = request.getSession(true);
        if (lf.getUsername().equals(lf.getPassword())) {

            session.setAttribute("Username", lf.getUsername());
            System.out.println(session.getAttribute("Username"));
            return mapping.findForward(SUCCESS);

        } else {
            return mapping.findForward(FAILURE);
        }
    }
} 
```

对应的LoginForm页面

```
package struts.form;
import org.apache.struts.action.*;

public class LoginForm extends ActionForm{

    private String username;
    private String password;

    public LoginForm() {
        super();
    }
    private static final long serialVersionUID = 104092268304152302L;

    public String getUsername() {
    return username;
    }

    public void setUsername(String username) {
    this.username = username;   
}

    public String getPassword() {
        return password;
        }

        public void setPassword(String password) {
        this.password = password;   
    }
} 
```

success.jsp，登录时显示的页面

```
<%@ taglib uri="http://struts.apache.org/tags-bean" prefix="bean" %>
<%@ taglib uri="http://struts.apache.org/tags-html" prefix="html" %>
<%@ taglib uri="http://struts.apache.org/tags-logic" prefix="logic" %>
<%@ taglib uri="http://struts.apache.org/tags-tiles" prefix="tiles" %>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"><%@page
    language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<html>
<head>
<title>success</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
</head>
<body>
<H1>Hello: <% session.getAttribute("Username"); %></H1>

 <html:form action="/LogoutAction" >
        <html:submit value="Logout" />
 </html:form>

</body>
</html> 
```

注销Action页面包struts.action；

```
import javax.servlet.http.HttpSession;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import org.apache.struts.action.ActionForm;
import org.apache.struts.action.ActionForward;
import org.apache.struts.action.ActionMapping;

public class LogoutAction extends org.apache.struts.action.Action {

    private final static String SUCCESS = "success";
    private final static String FAILURE = "failure";

    @Override
    public ActionForward execute(ActionMapping mapping, ActionForm form, HttpServletRequest request, HttpServletResponse response)
    throws Exception {
        HttpSession session = request.getSession(true);
        System.out.println(session.getAttribute("Username"));

        try{
            session.removeAttribute("Username");
            session.invalidate();
            return mapping.findForward(SUCCESS);
        }catch(Exception ex){
            System.out.println("Error");
        }
    return mapping.findForward(FAILURE);
    }
} 
```

对应LogoutForm包struts.form；导入 org.apache.struts.action.*；

```
public class LogoutForm extends ActionForm{

    private static final long serialVersionUID = 1L;

} 
```

所以会话是在我的登录操作中创建的，它可以工作，就像我使用 getAttribute() 并将其打印到控制台一样，用户名出现了。但是，用户名不会显示在我的 success.jsp 页面上。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T15:29:09.140

你忘了放`=`

```
<H1>Hello: <%= session.getAttribute("Username"); %></H1> 
```

# url-rewriting - history.js 从 url 中删除查询参数

> ID：16087039
> 
> 赞同：1
> 
> 时间：2013-04-18T15:27:13.220
> 
> 标签：url-rewriting, history.js, html5-history

我正在为我的 ajax 网站使用[history.js 。](https://github.com/balupton/History.js/)我无法意识到的一件事是如何将 url 从`http://mysite/default.aspx?myparam=paramvalue`使用`http://mysite/`History.pushState 更改？

如何摆脱 default.aspx?myparam=paramvalue？

我试过 `History.pushState('','','/'); 这没用

谢谢队友

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T17:29:09.687

您是否尝试过使用 History.pushState('','','/'); 但`http://mysite/`作为您的第三个函数输入（路径参数）。

`History.pushState('ajax','title','http://mysite/');`例如。

# android - 如何在gridview Android中找出项目的坐标

> ID：16087047
> 
> 赞同：2
> 
> 时间：2013-04-18T15:27:38.667
> 
> 标签：android, gridview, coordinates

我想了解如何根据返回的位置找到用户单击的网格视图的坐标（x，y）？

```
 0 1 2 
    3 4 5
    6 7 8 
```

如果我使用 4 作为所选项目，我可以确定它在第 1 行

```
 4 / columnLength(3) = 1.3 etc 
```

但是计算列的最佳方法是什么？还是有一些我可以利用的内置方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T16:20:59.943

first we need to define a few things

```
int numberOfColumns;//should be able to get this from the view
int numberOfRows = Math.ceil(items.Count / numberOfColumns); 
```

then we can figure out the position

```
int row = Math.ceil((position + 1) / numberOfColumns);
int column = (row * numberOfColumns) - position; 
```

that should do it

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T15:43:24.990

你可以尝试这样的事情，虽然我以前从未做过。

```
GridView gv = new GridView(this);
gv.setOnTouchListener(new View.OnTouchListener() {

    @Override
    public boolean onTouch(View v, MotionEvent event) {
        // TODO Auto-generated method stub
        event.getX();
        event.getY();
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T16:07:54.927

y = 位置 - (x*columnLength);

# c++ - 努力获得提升共享内存段来构建

> ID：16087048
> 
> 赞同：5
> 
> 时间：2013-04-18T15:27:39.023
> 
> 标签：c++, boost, boost-thread

我有一些代码正在尝试创建共享内存段。为此，这个段是在一个类中管理的。共享段将以“公告板”方式使用。也就是说，这一个进程将写入它，而许多其他进程将从它读取。无需再费周折：

```
#include <string>
#include <sys/types.h>
#include <boost/interprocess/managed_shared_memory.hpp>

static const std::string SHM_NAME("SharedMemory");
static const std::string SHM_STATUS("StatusArray");
static const std::string SHM_INFO1("MfgData");

class Manager {
    u_int8_t* _status;
    char* _info;

    boost::interprocess::managed_shared_memory _shm;

    Manager()
        : _shm(boost::interprocess::create_only, SHM_NAME.c_str(), 1024)
    {
        // the process goes out to lunch on this first call, it's like a deadlock
        status = _shm.construct<u_int8_t>(SHM_STATUS.c_str()) [128] (0); // array 128 bytes, init to 0
        info = _shm.construct<char>(SHM_INFO1.c_str()) [256] (0);
    }

public:
    ~Manager() {
        _shm.destroy<u_int8_t>(SHM_STATUS.c_str());
        _shm.destroy<char>(SHM_INFO1.c_str());
        boost::interprocess::managed_shared_memory_object::remove(SHM_NAME.c_str());
    }

    Manager* Builder() {
        // just in case a previous instance was abnormally terminated
        boost::interprocess::managed_shared_memory_object::remove(SHM_NAME.c_str());
        return new Manager(); // sort of a factory pattern
    }
}; 
```

我从 boost 网站上阅读的有关如何执行此操作的信息表明可能存在死锁。事实上，这就是为什么我将 ctor 放入私有部分并制作 builder 函数的原因：这样，在构造过程中，可以删除以前的实例。然而，这并没有缓解问题。

我尝试更改共享内存段的名称，以便它不会被使用，但是当它到达这些代码行时，进程仍然挂起。

我正在为我的模型使用此[链接](http://www.boost.org/doc/libs/1_47_0/doc/html/interprocess/quick_guide.html#interprocess.quick_guide.qg_memory_pool)（以及来自同一文档站点的其他链接）。在这一点上，我需要第二双眼睛，最好是那些有经验的提升进程间和共享内存的眼睛。

顺便说一句，我从我提供的链接中使用的程序模型是“命名共享内存”程序。令人恼火的是，我已经将该程序复制到我的 Linux 系统上，构建并运行它没有任何问题。我错过了什么？

谢谢你的帮助，安迪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T20:54:22.540

这个问题似乎与此时与 boost 无关的事情有关**。**我问了这个问题，并因此标记了它，因为当我第一次遇到问题时，这正是发生挂断的地方。我相信挂断是由于深埋在boost库中用于进程间通信的互斥锁的阻塞请求。我相信我拥有的代码结构，将 ctor 私有并调用工厂函数，已经缓解了这个问题。

多亏了布赖恩的好建议，我才能够在问题所在的时刻看到。这种情况下的问题是，当我打开我之前创建的 fifo 时，非阻塞选项没有被或'ed 到标志中，并且进程正在阻塞等待另一方打开相同的管道进行写入。

# c++ - CPP 字符串构造函数查找并附加空字符

> ID：16087059
> 
> 赞同：0
> 
> 时间：2013-04-18T15:28:12.437
> 
> 标签：c++, string, stdstring

在 C++`strings`中，在输入字符序列时复制直到`NULL` 接收到一个字符。但是如果你提供要读取的字符数，它会复制过去的`NULL`字符吗？我有一种情况，我可能会收到一条中间有一个 NULL 字符的消息，并且在它之后仍然有用信息。同样的问题也适用于追加。

同样`find()`，如果它碰到一个`NULL` 字符，它会停止搜索吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T15:34:04.197

您应该能够构造一个包含该`'\0'`字符的字符串：

```
const char a[] = "Hello\0world";
std::string s(a, sizeof(a));

std::cout << "a = \"" << a << "\"\n";
std::cout << "s = \"" << s << "\"\n";
std::cout << "sizeof(a)  = " << sizeof(a) << '\n';
std::cout << "strlen(a)  = " << std::strlen(a) << '\n';
std::cout << "s.length() = " << s.length() << '\n'; 
```

上面的代码片段将打印

```
a = "你好"
s = "你好世界"
大小(a) = 12
strlen(a) = 5
s.length() = 12

```

# ruby-on-rails-3 - Syntastic SASS 检查器中的未定义变量错误

> ID：16087063
> 
> 赞同：5
> 
> 时间：2013-04-18T15:28:21.727
> 
> 标签：ruby-on-rails-3, sass, syntastic

我使用 Syntastic 帮助及早发现我的语法错误。它还设置为检查任何 scss 但错误的任何 scss 文件，这些文件引用了我的“_variables.css.scss 部分中定义的变量。

我假设上下文不需要变量文件，但由于 Rails 资产管道，它在应用程序中工作正常。

我不确定何时/何地/如何解决 Syntastic 错误。如果我从 scss 文件中导入“_varibles.css.scss”，错误就会得到解决。但是有没有比对所有带有类似错误的文件执行此操作更好的方法？有什么指导吗？谢谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-07-31T08:35:07.143

部分不需要 .css 扩展名，您只需将其重命名为 _varibles.scss

部分应始终从您的主 scss 文件中导入。

# c# - 成员定义不止一次

> ID：16087064
> 
> 赞同：0
> 
> 时间：2013-04-18T15:28:29.440
> 
> 标签：c#

我对整个获取和设置都是新手，但这似乎很简单，我不是设置了一些东西，只是打电话`this.Var = value`吗？

```
public LoginView LoginView1 { get; set; }

void Page_Load(Object sender, EventArgs e)
{
    this.LoginView1 = (LoginView)FindControls.FindControlRecursive(Page, "LoginView1"); 
    RadGrid RadGrid3 = (RadGrid)LoginView1.FindControl("RadGrid3");
    RadGrid RadGrid4 = (RadGrid)LoginView1.FindControl("RadGrid4");
    UpdatePanel UpdatePanel1 = (UpdatePanel)LoginView1.FindControl("UpdatePanel1");
    LoadData();
} 
```

我的错误是`LoginView1`多次定义。我要做的就是在页面加载上设置全局变量。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T15:31:25.670

您将在页面本身上拥有它，这意味着它也在`designer.cs`文件中，这意味着确实`LoginView1`已经为您尝试获取的登录视图定义了一个。

叫它别的东西。

# php - 使用php解析sql文件

> ID：16087065
> 
> 赞同：4
> 
> 时间：2013-04-18T15:28:30.450
> 
> 标签：php, mysql, sql, parsing, dump

我有一个超过 3gb 的 sql 转储文件，其中包含多个查询。我想使用 php 将文件解析为查询。

根据网站用户的推荐，我使用[https://code.google.com/p/php-sql-parser/](https://code.google.com/p/php-sql-parser/)进行解析。问题是只能使用此方法检索第一个查询。

有没有人有什么建议？

转储文件是来自服务器的数据的唯一遗物。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-12T20:38:52.060

我真的找到了你想要的：

[SQL Parser：解析 SQL 文件并提取查询语句](http://www.phpclasses.org/package/7192-PHP-Parse-SQL-files-and-extract-query-statements.html)（（通过 phpclasses.org））

示例 sql 文件

```
#这是一条评论 :)

select * from table1 where a=1;

--select 评论 2
选择 * 从
    表2
    其中a=2；

#插入值
将忽略插入`versions`（`release`，`revision`，`name`，`lastupdate`）值（'1'，'0'，'sqlparser'，now（））；

#创建表
创建表`测试`（
  `id` int(11) unsigned not null auto_increment,
  `name` varchar(80) not null default '',
  主键（`id`）
) 引擎=innodb 默认字符集=utf8；

#海关操作
插入`tests`(`id`,`name`) 值('1','test ; value');
update `test` set `name`='test value update' where `id`='1';

```

输出：

```
大批 （
  0 => 'SELECT * FROM table1 WHERE a=1',
  1 => 'SELECT * FROM table2 where a=2',
  2 => 'INSERT IGNORE INTO `VERSIONS`(`release`,`revision`,`name`,`lastUpdate`) 值 (\'1\',\'0\',\'SqlParser\',NOW() )',
  3 => 'CREATE TABLE `TESTS` (`Id` int(11) unsigned NOT NULL AUTO_INCREMENT, `Name` varchar(80) NOT NULL DEFAULT \'\', PRIMARY KEY (`Id`)) ENGINE=InnoDB 默认字符集=utf8',
  4 => 'INSERT INTO `TESTS`(`Id`,`Name`) VALUES (\'1\',\'test ; value\')',
  5 => 'UPDATE `TEST` SET `Name`=\'测试值更新\' WHERE `Id`=\'1\'',
)

```

这门课的真正美妙之处在于它可以计算很多东西，比如评论、多行和查询，其中他的值包括“;” 特点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T16:25:58.247

[http://pastebin.com/GxBahnyM](http://pastebin.com/GxBahnyM) - 我从 Typo3 CMS 得到它。Typo3 安装扩展时使用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-24T10:30:26.590

这是“Principe Orazio”类的改进版本（@AgelessEssence 已经提到过）。

```
class sql_parser
{
    public static function parse($content) {
        $sql_list = [];
        $query = "";
        $lines = explode("\n", $content);
        foreach ($lines as $sql_line){
            $sql_line = trim($sql_line);
            if(($sql_line === "") || (strpos($sql_line, "--") === 0) || (strpos($sql_line, "#") === 0)){
                continue;
            }

            $query .= $sql_line;
            // Checking whether the line is a valid statement
            if (preg_match("/(.*);$/", $sql_line)) {
                $query = trim($query);
                $query = substr($query, 0, strlen($query) - 1);

                $sql_list[] = sql_parser::remove_query_comments($query);
                //reset the variable
                $query = "";
            }
        }

        return $sql_list;
    }

    public static function remove_query_comments($query)
    {
         $sql_comments = '@
              (([\'"]).*?[^\\\]\2) # $1 : Skip single & double quoted expressions
              |(                   # $3 : Match comments
                  (?:\#|--).*?$    # - Single line comments
                  |                # - Multi line (nested) comments
                   /\*             #   . comment open marker
                      (?: [^/*]    #   . non comment-marker characters
                          |/(?!\*) #   . ! not a comment open
                          |\*(?!/) #   . ! not a comment close
                          |(?R)    #   . recursive case
                      )*           #   . repeat eventually
                  \*\/             #   . comment close marker
              )\s*                 # Trim after comments
              |(?<=;)\s+           # Trim after semi-colon
              @msx';

        $query = trim( preg_replace( $sql_comments, '$1', $query ) );

        // Remove the last ;
        if(strrpos($query, ";") === strlen($query) - 1) {
            $query = substr($query, 0, strlen($query) - 1);
        }

        return $query;
    }
} 
```

要使用它：

```
$sql_lists = sql_parser::parse(file_get_contents("test.sql"));
print_r($sql_lists); 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-04-18T15:36:58.653

是否可以使用 "explode(";", $dumpfile) 拆分转储文件，然后执行循环调用该函数进行解析？您也可以使用其他分隔符进行爆炸。是否可能存在不平衡的引号？

问候

副歌

# c# - 错误消息：无法从 'System.Collections.Generic.IEnumerable' 转换为 'string[]'

> ID：16087071
> 
> 赞同：0
> 
> 时间：2013-04-18T15:28:46.133
> 
> 标签：c#, linq, generics, type-conversion

我有以下 C# 源代码：（asp.net 版本：3.5）

```
 //map is from 'string' type
 map = string.Join("", TrackMap.Split('|').Select(x => string.Format("<a href=\"{0}\" class=\"lightview\"><img src=\"{0}\" style=\"margin-right:30px;\" width=\"120\" height=\"80\"/>gh</a>", x))); 
```

问题是我收到此错误消息：

> 参数“2”：无法从“System.Collections.Generic.IEnumerable”转换为“string[]”

和错误信息：

> 'string.Join(string, string[])' 的最佳重载方法匹配有一些无效参数

我的问题是我该如何解决？（也许在 web.config 文件中添加一些代码？添加“使用”-someting？）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T15:29:50.017

Since you are in .NET 3.5 which has not yet supported `Join<T>(String, IEnumerable<T>)`, but supports `Join(String, Object[])`, so, you just need to call `ToArray` method in order to convert `IEnumerable` to `Array`:

```
map = string.Join("", TrackMap.Split('|').Select(x => string.Format("...", x))
                                         .ToArray()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T15:30:47.093

[`string.Join`](http://msdn.microsoft.com/en-us/library/dd992421%28v=vs.100%29.aspx) with the overload that takes an `IEnumerable<String>` was new in .NET 4, so you cannot use it in 3.5.

So this should work:

```
map = string.Join("", TrackMap.Split('|')
            .Select(x => string.Format("<a href=\"{0}\" class=\"lightview\"><img src=\"{0}\" style=\"margin-right:30px;\" width=\"120\" height=\"80\"/>gh</a>", x)
            .ToArray())); 
```

# c# - 具有高级功能的表

> ID：16087075
> 
> 赞同：3
> 
> 时间：2013-04-18T15:28:54.410
> 
> 标签：c#, javascript, jquery, asp.net, .net

我非常需要帮助，我希望这里的人能有同情心并有时间回答我；）。

两周前我正在接受培训，我正在尝试向数据表添加功能。我正在考虑使用 jQuery 来实现。

这是我目前拥有的示例：

![画面](https://sdz-upload.s3.amazonaws.com/prod/upload/tableau2.png)

我在文件后面的代码中从 C# 构建了这个表。有人告诉我使用 gridview 或 datagrid，但此表中的单元格具有可能与 gridview 或 datagrid 不兼容的功能。事实上，我通过在必要时指定属性“class”和“rowspan / colspan”来添加每个单元格。而且我不知道是否可以使用gridview 或datagrid 来做到这一点。我需要这些多个“类”用于处理过的单元格 jQuery（注意：能够拖放）。

这是我的一些代码，显示了我如何创建此表：

aspx 代码：

```
<asp:Table ID="tabG" runat="server" GridLines="Both">

<asp:TableHeaderRow ID="TableHeaderRow1" runat="server" TableSection="TableHeader">
                            <asp:TableCell ID="idTitreTabG_CheckB" RowSpan="3"></asp:TableCell>
                            <asp:TableCell ID="idTitreTabG_NumOF" RowSpan="2">
                                <asp:Label ID="lbTabG_TitreNumOF" Text="N° OF" runat="server"></asp:Label> <br />
                            </asp:TableCell>
                            <asp:TableCell RowSpan="2">
                                <asp:Label ID="lbTabG_TitreSeqOF" Text="Seq OF" runat="server"></asp:Label> <br />
                            </asp:TableCell>
                            <asp:TableCell RowSpan="2">
                                <asp:Label ID="lbTabG_TitreArt" Text="Article" runat="server"></asp:Label> <br />
                            </asp:TableCell>
                            <asp:TableCell RowSpan="2">
                                <asp:Label ID="lbTabG_TitreQtePrevue" Text="Qté OF prévue" runat="server"></asp:Label> <br />
                            </asp:TableCell>
                            <asp:TableCell RowSpan="2">
                                <asp:Label ID="lbTabG_TitreQteRevue" Text="Qté OF revue" runat="server"></asp:Label> <br />
                            </asp:TableCell>
                            <asp:TableCell RowSpan="2">
                                <asp:Label ID="lbTabG_TitreComp" Text="Composant" runat="server"></asp:Label> <br />
                            </asp:TableCell>
                            <asp:TableCell RowSpan="2">
                                <asp:Label ID="lbTabG_TitreRestant" Text="Restant à assigner" runat="server"></asp:Label> <br />
                            </asp:TableCell>
                            <asp:TableCell ColumnSpan="3">
                                <asp:Label ID="lbTabG_TitreAssignHU" Text="Assignation HU" runat="server"></asp:Label>
                            </asp:TableCell>
                        </asp:TableHeaderRow>

                        <asp:TableHeaderRow ID="TableHeaderRow2" runat="server" TableSection="TableHeader">
                            <asp:TableCell>
                                <asp:Label ID="lbTabG_TitreQteTotale" Text="Qté totale" runat="server"></asp:Label> <br />
                            </asp:TableCell>
                            <asp:TableCell>
                                <asp:Label ID="lbTabG_TitreNumHU" Text="N° HU" runat="server"></asp:Label> <br />
                            </asp:TableCell>
                            <asp:TableCell>
                                <asp:Label ID="lbTabG_TitreQte" Text="Quantité" runat="server"></asp:Label> <br />
                            </asp:TableCell>
                        </asp:TableHeaderRow>

                        <asp:TableHeaderRow ID="TableHeaderRow5" runat="server" TableSection="TableHeader">
                            <asp:TableCell>
                                <asp:ImageButton ID="ibTabG_TitreNumOF_Fleche" runat="server" PostBackUrl="~/Test.aspx?nomColG=cod_wo&order=desc" ImageUrl="~/Images/bas.jpg" />
                            </asp:TableCell>
                            <asp:TableCell>
                                <asp:ImageButton ID="ibTabG_TitreSeqOF_Fleche" runat="server" PostBackUrl="~/Test.aspx?nomColG=dat_sequence&order=desc" ImageUrl="~/Images/bas.jpg" />
                            </asp:TableCell>
                            <asp:TableCell>
                                <asp:ImageButton ID="ibTabG_TitreArt_Fleche" runat="server" PostBackUrl="~/Test.aspx?nomColG=article&order=desc" ImageUrl="~/Images/bas.jpg" />
                            </asp:TableCell>
                            <asp:TableCell>
                                <asp:ImageButton ID="ibTabG_TitreQtePrevue_Fleche" runat="server" PostBackUrl="~/Test.aspx?nomColG=wo_qty&order=desc" ImageUrl="~/Images/bas.jpg" />
                            </asp:TableCell>
                            <asp:TableCell>
                                <asp:ImageButton ID="ibTabG_TitreQteRevue_Fleche" runat="server" PostBackUrl="~/Test.aspx?nomColG=qty_revue&order=desc" ImageUrl="~/Images/bas.jpg" />
                            </asp:TableCell>
                            <asp:TableCell>
                                <asp:ImageButton ID="ibTabG_TitreComposant_Fleche" runat="server" PostBackUrl="~/Test.aspx?nomColG=composant&order=desc" ImageUrl="~/Images/bas.jpg" />
                            </asp:TableCell>
                            <asp:TableCell>
                                <asp:ImageButton ID="ibTabG_TitreRestant_Fleche" runat="server" PostBackUrl="~/Test.aspx?nomColG=restant_a_assigner&order=desc" ImageUrl="~/Images/bas.jpg" />
                            </asp:TableCell>
                            <asp:TableCell>
                            </asp:TableCell>
                            <asp:TableCell>
                            </asp:TableCell>
                            <asp:TableCell>
                            </asp:TableCell>

                        </asp:TableHeaderRow>

</asp:Table> 
```

本节创建列的标题

在完成表格的 C# 代码后面：

```
protected void setTabAssignationOF(OracleConnection oConnexion, string reqOF)
        {

            OracleCommand cmd = new OracleCommand(reqOF);
            cmd.Connection = oConnexion;

            OracleDataReader reader = cmd.ExecuteReader();

            int cpt = 0;
            int nbLignesCurrentOF = 0;
            int numLigne = 0;
            string idCurrentOF = "";

            List<TableRow> lignes = new List<TableRow>();

            while (reader.Read())
            {

                TableRow nouvelleLigne = new TableRow();

                CheckBox controlCB = new CheckBox();
                TableCell checkB = new TableCell();
                TableCell numOF = new TableCell();
                TableCell seqOF = new TableCell();
                TableCell art = new TableCell();
                TableCell qtePrevue = new TableCell();
                TableCell qteRevue = new TableCell();
                TableCell composant = new TableCell();
                TableCell restant = new TableCell();
                TableCell qteTotale = new TableCell();
                TableCell numHU = new TableCell();
                TableCell qteHU = new TableCell();

                if(reader.GetValue(0).ToString() == idCurrentOF){
                    TableRow ligneModifie = new TableRow();

                    nbLignesCurrentOF = nbLignesCurrentOF + 1;

                    lignes[numLigne].Cells[0].RowSpan = nbLignesCurrentOF;
                    lignes[numLigne].Cells[1].RowSpan = nbLignesCurrentOF;
                    lignes[numLigne].Cells[2].RowSpan = nbLignesCurrentOF;
                    lignes[numLigne].Cells[3].RowSpan = nbLignesCurrentOF;
                    lignes[numLigne].Cells[4].RowSpan = nbLignesCurrentOF;
                    lignes[numLigne].Cells[5].RowSpan = nbLignesCurrentOF;
                    lignes[numLigne].Cells[6].RowSpan = nbLignesCurrentOF;
                    lignes[numLigne].Cells[7].RowSpan = nbLignesCurrentOF;

                    // nouvelles lignes
                    string identifiant = lignes[numLigne].Cells[1].ID;

                    qteTotale.Text = reader.GetValue(9).ToString();
                    qteTotale.Attributes.Add("class", "tabG_qteTotale donneesOF " + lignes[numLigne].Cells[1].Text);
                    qteTotale.Attributes.Add("value", qteTotale.Text);
                    qteTotale.ID = "qteT" + identifiant + "_" + nbLignesCurrentOF;

                    numHU.Text = reader.GetValue(10).ToString();
                    numHU.Attributes.Add("class", "tabG_numHU donneesOF " + lignes[numLigne].Cells[1].Text + " " + numHU.Text.Replace(" ", "_"));
                    numHU.Attributes.Add("value", numHU.Text);
                    numHU.ID = "numHU" + identifiant + "_" + nbLignesCurrentOF;
                    numHU.Attributes.Add("onClick", "onClick_cellule(\"" + numHU.Text + "\",\"" + numHU.Text.Replace(" ", "_") + "\");");

                    qteHU.Text = reader.GetValue(11).ToString();
                    qteHU.Attributes.Add("class", "tabG_qteHU donneesOF " + lignes[numLigne].Cells[1].Text);
                    qteHU.Attributes.Add("value", qteHU.Text);
                    qteHU.ID = "qteH" + identifiant + "_" + nbLignesCurrentOF;

                    nouvelleLigne.Cells.Add(qteTotale);
                    nouvelleLigne.Cells.Add(numHU);
                    nouvelleLigne.Cells.Add(qteHU);

                    lignes.Add(nouvelleLigne);
                }
                else{
                    numLigne = numLigne + nbLignesCurrentOF;
                    nbLignesCurrentOF = 1;

                    idCurrentOF = reader.GetValue(0).ToString();

                    // la premiere colonne contient une checkbox avec le numéro de l'OF
                    checkB.ID = "cb" + reader.GetValue(0).ToString() + cpt;
                    checkB.Controls.Add(controlCB);
                    checkB.Attributes.Add("class", "tabG_checkB donneesOF " + reader.GetValue(0).ToString());
                    checkB.Attributes.Add("value", "n");

                    // les colonnes suivantes
                    numOF.Text = reader.GetValue(0).ToString();
                    numOF.Attributes.Add("class", "tabG_numOF donneesOF " + numOF.Text + " " + numOF.Text.Replace(" ","_"));
                    numOF.Attributes.Add("value", numOF.Text);
                    numOF.ID = numOF.Text;
                    numOF.Attributes.Add("onClick", "onClick_cellule(\"" + numOF.Text + "\",\"" + numOF.Text.Replace(" ","_") + "\");");

                    seqOF.Text = reader.GetValue(3).ToString();
                    seqOF.Attributes.Add("class", "tabG_seqOF donneesOF " + numOF.Text);
                    seqOF.Attributes.Add("value", seqOF.Text);
                    seqOF.ID = "seqOF" + numOF.ID;

                    art.Text = reader.GetValue(4).ToString();
                    art.Attributes.Add("class", "tabG_art donneesOF " + numOF.Text);
                    art.Attributes.Add("value", art.Text);
                    art.ID = "art" + numOF.ID;

                    qtePrevue.Text = reader.GetValue(5).ToString();
                    qtePrevue.Attributes.Add("class", "tabG_qtePrevue donneesOF " + numOF.Text);
                    qtePrevue.Attributes.Add("value", qtePrevue.Text);
                    qtePrevue.ID = "qteP" + numOF.ID;

                    qteRevue.Text = reader.GetValue(6).ToString();
                    qteRevue.Attributes.Add("class", "tabG_qteRevue donneesOF " + numOF.Text);
                    qteRevue.Attributes.Add("value", qteRevue.Text);
                    qteRevue.ID = "qteR" + numOF.ID;

                    composant.Text = reader.GetValue(7).ToString();
                    composant.Attributes.Add("class", "tabG_composant donneesOF " + numOF.Text + " " + composant.Text.Replace(" ","_"));
                    composant.Attributes.Add("value", composant.Text);
                    composant.ID = "comp" + numOF.ID;
                    composant.Attributes.Add("onClick", "onClick_cellule(\"" + composant.Text + "\",\"" + composant.Text.Replace(" ","_") + "\");");

                    restant.Text = reader.GetValue(8).ToString();
                    restant.Attributes.Add("class", "tabG_restant donneesOF " + numOF.Text);
                    restant.Attributes.Add("value", restant.Text);
                    restant.ID = "restant" + numOF.ID;

                    qteTotale.Text = reader.GetValue(9).ToString();
                    qteTotale.Attributes.Add("class", "tabG_qteTotale donneesOF " + numOF.Text);
                    qteTotale.Attributes.Add("value", qteTotale.Text);
                    qteTotale.ID = "qteT" + numOF.ID + "_1";

                    numHU.Text = reader.GetValue(10).ToString();
                    numHU.Attributes.Add("class", "tabG_numHU donneesOF " + numOF.Text + " " + numHU.Text.Replace(" ", "_"));
                    numHU.Attributes.Add("value", numHU.Text);
                    numHU.ID = "numHU" + numOF.ID + "_1";
                    numHU.Attributes.Add("onClick", "onClick_cellule(\"" + numHU.Text + "\",\"" + numHU.Text.Replace(" ","_") + "\");");

                    qteHU.Text = reader.GetValue(11).ToString();
                    qteHU.Attributes.Add("class", "tabG_qteHU donneesOF " + numOF.Text);
                    qteHU.Attributes.Add("value", qteHU.Text);
                    qteHU.ID = "qteH" + numOF.ID + "_1";

                    nouvelleLigne.Cells.Add(checkB);
                    nouvelleLigne.Cells.Add(numOF);
                    nouvelleLigne.Cells.Add(seqOF);
                    nouvelleLigne.Cells.Add(art);
                    nouvelleLigne.Cells.Add(qtePrevue);
                    nouvelleLigne.Cells.Add(qteRevue);
                    nouvelleLigne.Cells.Add(composant);
                    nouvelleLigne.Cells.Add(restant);
                    nouvelleLigne.Cells.Add(qteTotale);
                    nouvelleLigne.Cells.Add(numHU);
                    nouvelleLigne.Cells.Add(qteHU);

                    lignes.Add(nouvelleLigne);
                }

                cpt++;
            }

            for (int i = 0; i < lignes.Count; i++)
            {
                tabG.Rows.Add(lignes[i]);
            }
        } 
```

如您所见，每个单元格都有许多属性“类”或有时“行跨度”。在这个系统中，复选框与行无关，这意味着例如，如果我选中第 3 行中的复选框并在第 2 列上进行了排序。它将始终是第 3 行上的复选框将被选中但不再对应同一行。

我想就以下问题提出建议：您认为会有一个解决方案，我应该使用另一种方法吗？你知道一个可以做这件事的jquery插件吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T04:31:22.793

它不是免费的，但是看看[DevExpress 的 Gridview](http://demos.devexpress.com/ASPxGridViewDemos/)。它会让你的生活变得简单很多。您还可以使用其他控件库，例如[telerik](http://demos.kendoui.com/)、[jeasyui](http://www.jeasyui.com/)等。我只是碰巧使用过它们并以图形方式处理大量数据，这些库为您节省了大量时间。

DevExpress 的 Grid 可以自己处理 dnd 功能，具有很好的传统选择。但是，我认为需要一些工作才能实现您现在的选择行为。

（我认为这会自动发表评论，但是嘿！猜不出来。）

# javascript - 关于 HTML5 FileSystemAPI 的一些问题

> ID：16087077
> 
> 赞同：2
> 
> 时间：2013-04-18T15:28:56.303
> 
> 标签：javascript, google-chrome, client-side, html5-filesystem

我是第一次使用，只是在最初阶段弄清楚这是否对我有用，所以请原谅任何幼稚的问题。我正在使用谷歌浏览器。

**这是我的用例 -**
用户需要将一些信息存储到我的应用程序（基于 Web），其中可能包括他系统上某些文件的路径。当用户通过我的应用程序返回访问此信息时，他应该能够单击指向其本地磁盘上这些文件的链接并打开这些文件。

现在，我们知道出于安全考虑，浏览器不会允许这样做。

**我有以下问题**

HTML5 FileSystemAPI 的描述说这将允许我们从用户磁盘的“沙盒”部分访问文件。这是否意味着我的用户想要读取的文件只能来自其磁盘上的特定文件夹？

我们可以决定那个位置是什么吗？[文件浏览器访问 Chrome 的沙盒文件系统](https://stackoverflow.com/questions/6810265/file-browser-access-to-chromes-sandboxed-filesystems)- 我从这个问题中得到了 chrome 决定的想法。

如果有人能对此有所了解，我将不胜感激。多谢你们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T17:51:53.043

AFAIK，文件系统 API 不提供对沙箱外文件的访问，沙箱的位置是由浏览器强加的。您可以使用 HTML5 的 File API 让用户上传数据，然后使用 FileSystem API 存储这些数据。但是，我认为这不是您想要的。

只有通过 Java 小程序或其他插件才能无限制地访问用户的文件系统。

# php - strtotime() 总是返回一个月的同一天，但日期的其他部分是正确的

> ID：16087078
> 
> 赞同：1
> 
> 时间：2013-04-18T15:28:57.717
> 
> 标签：php, date, strtotime

我有一个简单的 Web 应用程序的一部分，它从 JavaScript 日历选择器获取输入，将其发送到服务器，然后服务器将其转换为人类可读的时间并将其回显。

我的 HTML 表单最终具有格式为 MM/DD/YYYY 的值。

当它被 POST 到服务器时，此 PHP 将其转换为不同的格式（请注意，我使用的是 CodeIgniter，因此`$this->input->post()`与 相同`$_POST[]`）：

`php $date = date('l, F n, Y', strtotime($this->input->post('date')));`

**示例输入和输出**

HTML 文本输入将获得值“04/21/2013”​​。

PHP 的 strtotime() 将回显“2013 年 4 月 4 日，星期日”。

无论我在那里输入什么日期， strtotime() 总是给我正确的日期，**除了月份**中的哪一天*总是*与月份的数字相同（例如，五月的任何日期都变成“ 2013 年 5 月 5 日”等）。

# 更新：已解决

我一发布这个我就意识到是 'l, F n, Y' 中的 'n' 导致了这个问题。把它变成'j'固定的东西。很抱歉浪费大家的时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T15:30:02.590

Use `j` for day of the month, not `n` which is the numeric month:

```
php $date = date('l, F j, Y', strtotime($this->input->post('date'))); 
```

[See it in action](http://codepad.viper-7.com/1eF1Nk)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T15:34:44.467

请参阅此处的 date() 文档：http: [//php.net/manual/en/function.date.php](http://php.net/manual/en/function.date.php)

将日期函数的第一个参数中的 n 更改为 j，您将获得月份中的日期数。

# iphone - JSON解析问题

> ID：16087082
> 
> 赞同：0
> 
> 时间：2013-04-18T15:29:07.990
> 
> 标签：iphone, xcode

我得到一个 JSON，但我似乎无法解析它。这是我的代码：

```
[httpClient postPath:@"" parameters:parameters success:^(AFHTTPRequestOperation *operation, id responseObject) {
    NSDictionary *jsonDict = [NSJSONSerialization JSONObjectWithData:responseObject options:kNilOptions error:nil];
    NSLog(@"%@",jsonDict);

    NSArray *jsonArray = [jsonDict objectForKey:@"sJSON"];
    NSLog(@"%@",[jsonArray class]);
    NSLog(@"%@",jsonArray); 
```

打印类的 NSLog 给了我 _NSCFString 类。

难道它不是真正的JSON？虽然它看起来真的很像 JSON。看起来像这样：

[{"ImageTagID":78,"Xpixel":408,"Ypixel":69,"Xpercent":17}]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T15:34:23.370

看起来您在 JSON 中嵌入了 JSON：

```
{ "sJSON": "[{\"ImageTagID\":78,\"Xpixel\":408,\"Ypixel\":69,\"Xpercent\":17}]" } 
```

然后，您必须使用 NSJSONSerialization 再次解码“jsonArray”（这是一个字符串）。

# c# - 最小化时重绘 WPF UI

> ID：16087085
> 
> 赞同：0
> 
> 时间：2013-04-18T15:29:11.997
> 
> 标签：c#, wpf

我有一个 C# WPF 应用程序，它是使用 Open Broadcaster Software 捕获的软件。当应用程序位于前台甚至被另一个应用程序隐藏时，它工作得很好。但是，如果它实际上是最小化的，它会进行更新。这是有道理的，因为通常情况下，如果没有人可以看到它，为什么需要重新绘制它，但在这种情况下并非如此。是否有可能以某种方式强制 UI 重绘？每次需要更新 UI 时都可以调用某个方法，因为我需要 UI 更新/重绘的代码看起来像这样（简化）：

```
private void displaySomething(int something)
{
    someRectangle.Fill = new SolidColorBrush(...);
    // Redraw UI here
} 
```

编辑：“更新”在这里可能是一个误导性的术语。“重绘”可能会更好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T17:02:20.360

因此，如果即使表单在另一个表单之后也能正常工作，那么不要让用户进入`Minimize`表单。放`yourWindow.ResizeMode = ResizeMode.NoResize;`

# javascript - 默认情况下，jQuery 移动对话框没有关闭

> ID：16087087
> 
> 赞同：0
> 
> 时间：2013-04-18T15:29:13.447
> 
> 标签：javascript, jquery-mobile

具有以下对话框定义：

```
<div data-role="dialog" id="operator-delete" data-theme="b" data-title="Delete record">

    <div data-role="header" data-theme="b">
        <h2>Confirm deletion</h2>
    </div>

    <div data-role="content">
        <p><div id="delete-confirm">Do you really want to delete record?</div></p> 
        <table border="0" cellspacing="30" width=100%>
            <tr>
                <td valign="center" halign="left"><a href="#" id="delete-cancel" data-role="button" data-inline="true" data-theme="b" data-rel="back" data-icon="arrow-l">No</a></td>
                <td valign="center" halign="right"><a href="#" id="delete-confirm" data-role="button" data-inline="true" data-theme="b" data-icon="delete">Yes</a></td>
            </tr>
        </table>
    </div> <!-- /content -->
</div> <!-- /dialog --> 
```

此对话框由 jQuery 按钮调用：

```
<a href="#operator-delete" data-rel="dialog" data-transition="pop" 
id="delete-user" data-role="button" data-inline="true" data-theme="b" data-icon="delete" class="ui-btn-right">Delete</a> 
```

对话框按要求出现，但对对话框标题中的“否”按钮和关闭按钮没有反应。同时jQuery doc说：“当在对话框中单击任何链接时，框架将自动关闭（！！！）对话框......”。我看到了 jQuery 示例源——他们没有付出额外的努力来关闭示例对话框。怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T15:36:15.677

我实现了您的代码，但是关闭对话框没有任何问题。请检查小提琴。我觉得你的 HTML 结构有问题。

```
<div data-role="page">
    <div data-role="content">
            <a href="#operator-delete" data-rel="dialog" data-transition="pop" 
id="delete-user" data-role="button" data-inline="true" data-theme="b" data-icon="delete" class="ui-btn-right">Delete</a>
    </div>
</div>

<div data-role="dialog" id="operator-delete" data-theme="b" data-title="Delete record">
    <div data-role="header" data-theme="b">
         <h2>Confirm deletion</h2>

    </div>
    <div data-role="content">
        <p>
            <div id="delete-confirm">Do you really want to delete record?</div>
        </p>
        <table border="0" cellspacing="30" width=100%>
            <tr>
                <td valign="center" halign="left"><a href="#" id="delete-cancel" data-role="button" data-inline="true" data-theme="b" data-rel="back" data-icon="arrow-l">No</a>
                </td>
                <td valign="center" halign="right"><a href="#" id="delete-confirm" data-role="button" data-inline="true" data-theme="b" data-icon="delete">Yes</a>
                </td>
            </tr>
        </table>
    </div>
    <!-- /content -->
</div>
<!-- /dialog --> 
```

[http://jsfiddle.net/maheshsapkal/aeWAE/](http://jsfiddle.net/maheshsapkal/aeWAE/)

# python - 如何从许多 JSON 文件中创建快速、可查询的索引（最好是在 Python 中）

> ID：16087095
> 
> 赞同：2
> 
> 时间：2013-04-18T15:29:28.893
> 
> 标签：python, database, json, nosql

我有 78,000 个单独的 JSON 文件，这些文件是使用 Python 脚本创建的，该脚本会抓取社区论坛并从每个帖子中提取信息。它们由简单的键值对组成，如下所示：

```
{
    "name": "Chris Wilson",
    "item": "Darth Vader speaker phone",
    "price": "$100",
    "notes": "Great condition!"
} 
```

有些键对所有文件都是通用的——例如 ——而许多其他键只出现在一些`name`文件中。`price`（我正在爬取的站点允许用户定义字段。）我希望能够按我想要的任何字段进行搜索、排序和分组。

通常，我会将每个文件加载到 SQLite 数据库中并从那里查询。考虑到众多领域，这将是非常乏味的。

根据我对 NoSQL 框架的了解，这似乎是一个非常适合基于文档的系统而不是传统关系数据库的项目。我尝试学习 CloudDB，但我能找到的大多数文档都假设您从空数据库开始，而不是从预制文档本身开始。

是否有一个好的、相当简单（或至少有据可查）的解决方案来索引和查询大量字典对象？我更喜欢 Python，但也乐于尝试使用 Node 或其他任何东西。

谢谢！

PS 如果您对 Darth Vader 手机感兴趣，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T15:59:56.367

这听起来像是 MongoDB 的完美用例。设置 MongoDB 并将您的 JSON 文件直接导入到集合中`mongoimport --file <filename>`

他们也有很好的 python 支持。

一些文档链接：

[http://docs.mongodb.org/manual/reference/mongoimport/#cmdoption-mongoimport--file](http://docs.mongodb.org/manual/reference/mongoimport/#cmdoption-mongoimport--file)

[http://docs.mongodb.org/ecosystem/drivers/python/](http://docs.mongodb.org/ecosystem/drivers/python/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T15:51:14.373

您可能想查看[Julian Hyde 的](http://julianhyde.blogspot.com.br/)博客，他最近使用 Apache Drill 发布了一些关于 SQL over JSON 的文章。

# php - 如何将查询返回的两个字段加载到关联数组中？

> ID：16087100
> 
> 赞同：0
> 
> 时间：2013-04-18T15:29:40.193
> 
> 标签：php, mysql, sql, mysqli

我有一个具有这种结构的复杂查询：

```
SELECT DRIVER, TRAVEL 
FROM TRAVELS
WHERE ... 
```

返回如下内容：

```
DAVID PARIS
DAVID OSLO
JHON  AMSTERDAM
DAVID MADRID
MARCO BARCELONA
JHON  ROME 
```

好吧，我想做的是分两部分返回信息。我的意思是，首先是一组驱动程序，其中包含：

```
DAVID
JHON
MARCO 
```

并且根据用户的选择，我想得到那个司机的行程。假设您选择*DAVID*，将返回一个数组：

```
PARIS
OSLO
MADRID 
```

我知道我可以很容易地将它分成两个查询，但是，正如我所说，这是对具有许多记录的数据库的复杂查询，所以这样我可以节省时间。

我正在使用**php** ......你会怎么做？，使用关联数组？请给我一个例子好吗？

我希望我的解释很清楚。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T15:34:44.947

对于两者，都先将它们保存在数组中：

```
while ($row = $result->fetch_object()) { // for mysqli. for mysql use mysql_fetch_object($result)
   $travel[$row->DRIVER][] = $row->TRAVEL;
} 
```

为了第一：

```
$drivers = array_keys($travel); 
```

对于第二个：

```
$locations = $travel[$driver]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T15:33:18.550

我自己从未使用过它，但看起来带有一些[魔法的](http://php.net/manual/en/pdostatement.fetchall.php#example-1022)[PDO可以解决问题](https://stackoverflow.com/tags/pdo/info)[`fetchAll`](http://php.net/manual/en/pdostatement.fetchall.php#example-1022)

或者您可以手动循环返回的结果，填充您想要的任何数组

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T15:33:35.173

只需使用数组遍历结果。如果名称尚未在数组中，只需将名称添加为键和一个空数组即可。然后取 (name-)array 并添加城镇并将其放回所有名称的数组中。比你有你的关联数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T15:36:44.850

保持查询原样并遍历结果集并创建数据结构，其中数组键是驱动程序的名称，值是包含所有位置的数组。

```
array("DAVID" => array("PARIS", "OSLO", "MADRID"), ...); 
```

现在您可以使用 array_keys 函数获取驱动程序列表，您可以使用获取位置列表`$arr["DAVID"]`

# java - 在struts2中上传文件时出现NullPointerException异常

> ID：16087101
> 
> 赞同：1
> 
> 时间：2013-04-18T15:29:42.423
> 
> 标签：java, mysql, jdbc, struts2

我正在研究 struts2 应用程序，我必须上传文件并将其保存到数据库中。但每次显示**NullPointerException**我的代码都在这里

**堆栈跟踪是-**

```
java.lang.NullPointerException
    dao.Clientdao.registration(Clientdao.java:31)
    action.client.Clientaction.execute(Clientaction.java:18)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    java.lang.reflect.Method.invoke(Unknown Source)
    com.opensymphony.xwork2.DefaultActionInvocation.invokeAction(DefaultActionInvocation.java:452)
    com.opensymphony.xwork2.DefaultActionInvocation.invokeActionOnly(DefaultActionInvocation.java:291)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:254)
    com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:176)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:263)
    org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:68)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:207)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:314)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    com.opensymphony.xwork2.interceptor.I18nInterceptor.intercept(I18nInterceptor.java:176)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:187)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:52)
    org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:485)
    org.apache.struts2.dispatcher.ng.ExecuteOperations.executeAction(ExecuteOperations.java:77)
    org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.doFilter(StrutsPrepareAndExecuteFilter.java:91) 
```

**模型类是**

```
import java.io.File;
public class Clientmodel {
private String Aggrement;
private String  date;
private String rate;
private String maturitydate;
private String detail;
private String taxno;
private File imagefile;
public File getImagefile() {
    return imagefile;
}

public void setImagefile(File imagefile) {
    this.imagefile = imagefile;
}

public String getRate() {
    return rate;
}

public void setRate(String rate) {
    this.rate = rate;
}

public String getDetail() {
    return detail;
}

public void setDetail(String detail) {
    this.detail = detail;
}

public String getTaxno() {
    return taxno;
}

public void setTaxno(String taxno) {
    this.taxno = taxno;
}

public String getAggrement() {
    return Aggrement;
}

public void setAggrement(String aggrement) {
    Aggrement = aggrement;
}

public String getMaturitydate() {
    return maturitydate;
}

public void setMaturitydate(String maturitydate) {
    this.maturitydate = maturitydate;
}

public String getDate() {
    return date;
}

public void setDate(String date) {
    this.date = date;
}

} 
```

**struts.xml**

```
 <?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE struts PUBLIC
    "-//Apache Software Foundation//DTD Struts Configuration 2.3//EN"
    "http://struts.apache.org/dtds/struts-2.3.dtd">
<struts>
       <constant name="struts.enable.DynamicMethodInvocation" value="true"/>
             <constant name="struts.devmode" value="true"/>
             <package name="loginmodel" extends ="struts-default">

        <action name="clientlogin"  class="action.client.Clientaction" >
           <interceptor-ref name="exception"/>
            <interceptor-ref name="i18n"/>
            <interceptor-ref name="fileUpload">
            <param name="allowedTypes">text/plain</param>
            <param name="maximumSize">10240</param>
        </interceptor-ref> 
            <interceptor-ref name="params">
                <param name="excludeParams">dojo\..*,^struts\..*</param>
            </interceptor-ref>
            <interceptor-ref name="validation">
                <param name="excludeMethods">input,back,cancel,browse</param>
            </interceptor-ref>
            <interceptor-ref name="workflow">
                <param name="excludeMethods">input,back,cancel,browse</param>
            </interceptor-ref>

            <result name="input">/Registration/clientregistration.jsp </result>
           <result name ="success">/Registration/success.jsp  </result>

          </action>

         </package>
</struts> 
```

**客户端注册.jsp**

```
<%@ page language ="java" contentType ="text/html; charset=ISO-8859-1" pageEncoding ="ISO-8859-1"%>
<%@ taglib uri ="/struts-tags" prefix="s"%>
<%@ taglib uri ="/struts-dojo-tags" prefix="sx" %>
<%@ taglib prefix="sj" uri="/struts-jquery-tags"%>
<html>
<head>
<sj:head jqueryui="true" jquerytheme="redmond" />
<style>
   div.ui-datepicker {
      font-size: 82.5%;
       }
</style>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>CLIENT</title>
<link rel="stylesheet" type="text/css" href="css/emp.css">
</head>
<body >

<div id ="did" align="center"> <h1 style="color: red">  CLIENT REGISTRATION FORM</h1>
  <s:form action ="clientlogin" method="post" enctype="multipart/form-data">

<s:select  name="Aggrement" label ="Type of Aggrement" list ="{'ORAL', 'written'}  "/>
<sj:datepicker  name="date" label="Aggrement DATE" changeMonth="true" changeYear="true"/>

 <s:select name ="rate" list="{'1','2','3'}" label ="Aggrement rate"/>
<s:textarea  name ="detail" label ="Aggrement Detail"></s:textarea>
 <s:textfield name ="taxno" label="Tax No "></s:textfield>
 <s:file name ="imagefile" label ="Upload Document"  />
<tr><td>&nbsp;</td></tr>
        <tr>
    <td>&nbsp;</td>

 <s:submit align="center"></s:submit>
</s:form>
   </div>
  </body>
</html> 
```

**客户 dao 是**

```
package dao;

import java.sql.Blob;
import java.sql.SQLException;
import model.Clientmodel;
import com.mysql.jdbc.PreparedStatement;
import com.mysql.jdbc.ResultSet;

public class Clientdao {

java.sql.Connection connection =null;   
PreparedStatement pst = null;   
ResultSet rs =null;

private java.sql.Connection getConnection() throws SQLException{
    java.sql.Connection conn;
conn = Connectionfactory.getInstance().getConntection();    
return conn;

}

public int registration(Clientmodel model){

    int i= 0;
   try{
      String str  = "insert into " + "clientdata(Aggrement,aggrementDate,rate,maturitydate,detail,taxno,image)"+
                     "values(?,?,?,?,?,?)";

       connection =getConnection();   

   pst =(PreparedStatement) connection.prepareStatement(str);
     pst.setString(1, model.getAggrement());
     pst.setString(2, model.getDate());
     pst.setString(3, model.getRate());
     pst.setString(4, model.getMaturitydate());
     pst.setString(5, model.getDetail());
     pst.setString(6, model.getTaxno());
     pst.setBlob(7,(Blob) model.getImagefile());    

     i = pst.executeUpdate();
     System.out.println("Result " +i);
   }
  catch (SQLException se){
    se.printStackTrace();  
   }
   return i;

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T06:55:43.907

实现**ModelDriven**接口并将覆盖方法的对象返回给您的 Action 类中的模型类。

# c# - Pivot-type scenario with objects in C#

> ID：16087108
> 
> 赞同：0
> 
> 时间：2013-04-18T15:29:59.140
> 
> 标签：c#, database, search, object, pivot

Consider this scenario

I have a class called User which contains the a List of Car types (e.g Toyota, BMW)

So that is a User can have many cars.

Let's say I have a List of type User. In this current format, I can easily find all the Cars that a User owns.

What I cannot easily do, is find the all Users who own a particular Car type (e.g all Users who own a Toyota).

In the classical database sense I want to be able to pivot the data, but how does one achieve such an operation when working with objects like this in C#?

Thanks Thomas

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T15:36:14.717

你有一个一对多的关系，所以你可以双向。有车有车，有车有车。请参阅以下 C# 代码：

```
class Users
{
    public string Name { get; set; }

    public List<Car> Cars { get; set; }
}

class Car
{
    public string Name { get; set; }
}

var users = new List<Users>
                    {
                        new Users
                            {
                                Name = "Bob",
                                Cars = new List<Car> { new Car { Name = "Toyota" } }
                            }
                    };

// Any Cars with Name "Toyota" in a User's list of cars.    
var usersWithCar = users.Where(user => user.Cars.Any(car => car.Name == "Toyota"));

string userName = usersWithCar.Single().Name; // Bob 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T15:46:26.997

您可以使用 LINQ 来实现这一点。

```
 class Car {}
    class Toyota : Car {}
    class BMW : Car {}

    class User
    {
        private readonly IList<Car> cars = new List<Car>();
        public IList<Car> Cars { get { return cars; } }
        public void AddCar(Car car)
        {
            Cars.Add(car);
        }
    }

    User user1 = new User();
    user1.AddCar(new BMW());
    user1.AddCar(new Toyota());

    User user2 = new User();
    user2.AddCar(new BMW());

    var users = new List<User>
                        {
                            user1,
                            user2
                        };
    IEnumberable<User> usersWithBMW = users.Where(u => u.Cars.Any(c => c is BMW)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T15:44:11.927

您应该尝试使用 Linq，首先您需要添加对 System.Linq 的引用（如果尚未完成）

接下来，您可以执行以下操作：

```
List<User> Example = new List<User>();
var Users_Having_A_Renault_ZE = Example.Where(
Me => Me.MyCars.Any(
    Car => Car.MyName == "Renault ZE")) 
```

这意味着“接受所有拥有一辆或多辆名为 Renault ZE 的汽车的用户”+ 它假设 MyCars 是一个列表、一个数组或类似的东西。

# javascript - Function对象与Javascript对象的关系

> ID：16087112
> 
> 赞同：2
> 
> 时间：2013-04-18T15:30:03.427
> 
> 标签：javascript

最近我读了一个[教程](http://kevinoncode.blogspot.com/2011/04/understanding-javascript-inheritance.html)，上面说如果定义如下函数。

```
function Animal() { } 
```

> 从表面上看，这段代码似乎创建了一个名为 Animal 的函数。但是对于 JavaScript，完整的事实稍微复杂一些。执行此代码时实际发生的是创建了两个对象。第一个对象，称为 Animal，是构造函数本身。第二个对象，叫做 Animal.prototype，有一个叫做 Animal.prototype.constructor 的属性，它指向 Animal。Animal 有一个属性指向它的原型，Animal.prototype。

但我对此没有什么困惑。`Function`对象呢？对象有什么用`Animal`？

如果我编写如下代码。

```
var test= new Function(); 
```

我在 Chrome 的开发者工具中检查了变量`test`。我发现`test`是无关的`Function`。有人能告诉我为什么吗？谢谢。

![在此处输入图像描述](https://i.stack.imgur.com/cPVbN.png)

**更新**

下图是代码执行时的对象关系，请查看。如果我的理解有误。请纠正我。谢谢。

![如果我的理解有误。 请纠正我。 谢谢。](https://i.stack.imgur.com/kKmqP.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T16:53:26.587

那篇博文包含很多有趣的细节，但大多数时候对大多数人来说是不必要的混乱。

首先说一下函数；暂时忘记原型。创建函数时：

```
function Whatever() {
  // ...
} 
```

你已经创建了一个对象。也就是说，所有函数都是对象，它们是通过`Function`内置构造函数构造的。此示例中的符号“Whatever”将具有对该对象的引用作为其值。

给定对函数的引用，可以调用它：

```
Whatever(); // call the function 
```

可以获取该值（对函数对象的引用）并将其分配给另一个变量，或者将其作为参数传递给另一个函数，或者像 JavaScript 中的任何其他值一样使用它。

```
var another = Whatever;
another(); // also calls the "Whatever" function 
```

通过`Function`构造函数显式构造函数是很少做的事情，但它为您提供了一个在其他方面不起眼的函数。（在 OP 中，构造函数不做任何事情，因为没有代码传递给`Function`构造函数。）

现在，当函数作为`new`表达式的一部分被调用时，事情变得有趣了。

```
var test = new Whatever(); 
```

通过使用`new`，一个新对象被实例化并与“Whatever”函数相关联。“Whatever”函数是该新对象的构造函数。

每个函数对象，无论它是否曾经用作构造函数，都有一个关联的“原型”对象。当函数*用作*构造函数时，它所构造的对象（即在`new`调用函数的表达式中生成的对象）隐式与该原型对象相关联。

当评估对象属性引用表达式时，原型对象变得有趣。对象属性引用如下所示：

```
obj.name
obj[ nameExpression ] 
```

在这样的表达式中，属性名称（表达式中使用的标识符`.`或内部表达式的值`[ ]`）直接与对象上的属性集进行检查。如果名称与对象的属性之一不同，则运行时会查询与用于制作对象的构造函数关联的原型对象。

对于大多数人编写的大多数代码，这种关系及其一些直接影响是唯一需要担心的事情。除非您将某种库或框架放在一起，否则您不必玩弄对象的（非标准，此时）“ **proto ”属性。**

最后，查看[`Object.create()`函数](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/create)，特别是该文档中显示的“polyfill”可能会很有启发性。

# lotus-domino - What is the Internet Explorer Plug-in name of the IBM Notes Browser Plugin?

> ID：16087114
> 
> 赞同：1
> 
> 时间：2013-04-18T15:30:06.143
> 
> 标签：lotus-domino, browser-plugin

I am trying to detect if the plug-in is installed using the msieDetect function from this page at [webdevwonders.com/detecting-browser-plugins](http://webdevwonders.com/detecting-browser-plugins/)

I can detect the iNotes plug-in using "dwa9.dwa9" but I have not been able to find the right name to use for the "IBM Notes Browser Plug-in"

Thanks in advance.

/Newbs

# python - 将两个字典（价格、股票）中的值相乘然后相加

> ID：16087118
> 
> 赞同：7
> 
> 时间：2013-04-18T15:30:20.610
> 
> 标签：python, dictionary, shopping

我需要将每个键的值相乘，然后将所有值相加以打印一个数字。我知道这可能超级简单，但我被困住了

在我看来，我会通过以下方式解决这个问题：

```
for v in prices:
total = sum(v * (v in stock))
print total 
```

但是这样的事情是行不通的:)

```
prices = {
"banana": 4,
"apple": 2,
"orange": 1.5,
"pear": 3 }

stock = {
"banana": 6,
"apple": 0,
"orange": 32,
"pear": 15 } 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-18T15:32:57.970

如果您想要个人，可以使用 dict 理解：

```
>>> {k: prices[k]*stock[k] for k in prices}
{'orange': 48.0, 'pear': 45, 'banana': 24, 'apple': 0} 
```

或直接计算总数：

```
>>> sum(prices[k]*stock[k] for k in prices)
117.0 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T15:32:38.583

如果您知道如何遍历字典、使用键索引字典并理解字典，那将是一个简单的过程

```
>>> total = {key: price * stock[key] for key, price in prices.items()}
>>> total
{'orange': 48.0, 'pear': 45, 'banana': 24, 'apple': 0} 
```

即使您的 Python 实现不提供字典理解（< Py 2.7），您也可以将其作为列表理解传递给`dict`内置

```
>>> dict((key, price * stock[key]) for key, price in prices.items())
{'orange': 48.0, 'pear': 45, 'banana': 24, 'apple': 0} 
```

如果您不想在 2.X 和 3.X 之间兼容，您也可以使用 iteritems 代替 items

```
{key: price * stock[key] for key, price in prices.iteritems()} 
```

如果您想要一个总的结果，您可以将单个产品传递给`sum`

```
>>> sum(price * stock[key] for key, price in prices.items())
117.0 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-04T16:19:02.407

根据任务描述对codeacademy的正确答案：

```
 prices = {
       "banana" : 4,
       "apple"  : 2,
       "orange" : 1.5,
       "pear"   : 3,
   }
   stock = {
        "banana" : 6,
        "apple"  : 0,
        "orange" : 32,
        "pear"   : 15,
    }

    for key in prices:
        print key
        print "price: %s" % prices[key]
        print "stock: %s" % stock[key]

     total = 0
     for key in prices:
        value = prices[key] * stock[key]
        print value
        total = total + value
    print total 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-05T23:24:01.033

我猜你在codeacademy？如果是这样，请这样做：

```
total = 0
for key in prices:  
    prices = 53
    stock = 10.5
    total = prices + stock
print total 
```

与说明中所说的不同，您必须先将所有值相加，然后再将它们相乘并将它们加到总数中。希望这可以帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-23T13:41:47.473

快速和一般的答案。

如果您正在寻找一种有效且快速的方法将两个字典的元素（值）**相乘**，请使用**dict comprehension**。确保两个字典具有相同的键。你可以使用这个单线：

```
new_dict = { key : value * dict2[key] for key,value in dict1.items() } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-07-06T11:44:23.847

我编写了以下代码并且它有效。输入价格：

```
print key
   print "price: %s" % + prices[key]
   print "stock: %s" % + stock[key] 
```

输入价格： value = prices[key]*stock[key] print value total = total + value print total

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2015-09-18T19:16:29.417

```
total = 0   
for key in prices:
    print prices[key] * stock[key]
    total += prices[key] * stock[key]
print total 
```

# ruby - 我应该签入“.ruby-gemset”和/或“.ruby-version”吗？

> ID：16087120
> 
> 赞同：41
> 
> 时间：2013-04-18T15:30:31.070
> 
> 标签：ruby, rvm

我刚刚更新了 RVM，`.rvmrc`它自动创建`.ruby-gemset`了`.ruby-version`.

我一直都有`.rvmrc`内容像`rvm use --create default@project_name`. 但是，`.ruby-version`包含我正在运行的特定 Ruby 版本，而不是`default`. 我很犹豫要不要检查这个。

另外，我在播客上听到有人说不应该签到，`.ruby-gemset`因为其他人可能对如何命名宝石有自己的偏好。

**我什么时候应该或不应该办理登机手续`.ruby-gemset`和/或`.ruby-version`？**

具体来说：

*   有哪些权衡？
*   项目类型如何影响决策（例如，应用程序与 gems）？
*   如果应该签入，项目类型如何影响这些文件中的内容？

来自 rvm、rbenv 等工具的创建者的引用将在回答中受到赞赏。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-05-24T15:01:12.017

# For standard projects

Check in `.ruby-version` if your project depends on a ruby like `ruby-2.0.0`. Check in `.ruby-gemset` only if your team agreed on it. Add `.rvmrc` to `.gitignore` so anyone can override `.ruby-*` files settings with `.rvmrc`.

# For gems

Check in `.ruby-version` with `ruby-1.8.7` only if your project still targets ruby `1.8.7`, otherwise check it in only if your gem requires it. Do not check in `.ruby-gemset`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-05-24T12:22:43.873

签到`.rvmrc`，`.ruby-version`还是`.ruby-gemset`？

### 为了：

*   您的项目有不同的分支（比如支持 Ruby 和版本的 RubyGems`1.8`项目）`1.9`。`2.0`最好签入此文件，这样您的开发人员在切换分支时就不必继续编辑这些文件。但是，这不适用于应用程序，您将主要只在一个 Ruby 版本上工作。

*   与上面的情况相同，但假设您正在运行一个 CI 服务器（例如 TeamCity/Jenkins/...），它只会在`rake spec`每次签入时自动运行。您不想为每个分支创建单独的构建管道，只是为了`rvm use ...`每个分支都有一个单独的。您只希望根据分支自动选择 Ruby 版本

*   您可以严格控制环境和所有开发人员。您要么不需要或要求他们使用相同的 ruby​​ 和 gemset

*   您正在使用 Phusion Passenger 或 Capistrano，它们会自动读取`.rvmrc`文件并选择正确的 ruby​​ 进行部署/托管

另请参阅[RVM 最佳实践](https://rvm.io/rvm/best-practices/)

### 反对：

*   您可以在 RVM 中编译您自己的 Ruby，使用一些实验性补丁，并给它一个自定义名称。

    例如`rvm install 1.9.3 --patch railsexpress,falcon --name ruby-1.9.3-perf`

    在上面的例子中，我安装了 Ruby 1.9.3 和一些很棒的加速补丁（[顺便说一句，它们很棒](https://gist.github.com/burke/1688857)），但我没有叫它`1.9.3`，而是叫它我自己的名字。`rvm use ruby-1.9.3-perf`每当我需要这个时，我都会说。在这种情况下，如果项目有自己的`.ruby-version`，那么它会弄乱我的环境。在我的项目中，这些补丁是标准的，我们积极推荐这些补丁。但是开发人员如何命名生成的编译 Ruby 取决于他们

*   同样，人们使用不同的宝石。有些根本不使用宝石。有些与不同（但相似）的 ruby​​ 项目共享相同的 gemset。鉴于此，单曲`.ruby-gemset`也不适合所有人

*   你的项目有一个不起眼的 ruby​​ 版本，它只是说`1.9.3`. 您的开发人员首先安装了最新的 Ruby 1.9.3-p329。但他们后来只是更新了 RVM/Rbenv（因为他们正在处理其他项目）。他们的`.rvmrc`or`.ruby-version`只是中断，因为在 RVM/Rbenv 中注册的最新版本的 Ruby 刚刚从 更改`ruby-1.9.3-p329`为`.ruby-1.9.3-p362`，并且它会说`ruby-1.9.3-p362`未安装。这种情况往往经常发生。

只要为 Ruby 版本（包括补丁级别）指定正确的全名，就可以了。假设您的项目`.ruby-version`说`ruby-1.9.3-p329`. 用所有这些补丁编译你自己的 Ruby 很容易，并且仍然只是自定义名称，`ruby-1.9.3-329`这样配置文件就会选择这个 ruby​​ 而不是标准的 ruby​​。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T15:36:39.600

我会包括`.ruby-version`- 你和其他在该项目上工作的人，以及你的服务器，应该使用相同版本的 Ruby。

`.ruby-gemset`.... 取决于你，我想。

# c# - 使用 Web 服务更新内容类型时删除列表列

> ID：16087124
> 
> 赞同：0
> 
> 时间：2013-04-18T15:30:40.360
> 
> 标签：c#, web-services, sharepoint-2010

我有大量网站都使用相同内容类型的副本。我正在使用 Web 服务并从 webs.asmx 或 lists.asmx 调用 updateContentType 方法。下面的代码：

```
contentProps = "<ContentType />";
newField, modField = "<Fields />";
delField = "<Fields>" +
             "<Method ID=\"1\">" +
               "<Field ID=\"fieldID\" />" +
             "</Method>" + 
           "</Fields>";
//...Snip XmlDocument.LoadXml() to create the proper XmlNodes
listSvc.UpdateContentType(listName,contentID,contentProps,newField,modField,delField,"true"); or
webSvc.UpdateConentType(contentID,contentProps,newField,modField,delField); 
```

该字段从内容类型以及列表中的列中删除。我只想从内容类型中删除它，但保留列表中的列。我读过的所有文档都只指定了从 ContentType 中删除的字段，而不是列表本身。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T23:50:20.383

当内容类型发生更改时，SharePoint 会使用内容类型自动更新所有列表，唯一不适用的情况是，当内容类型是应用于列表的网站内容类型并且使用 SharePoint 功能部署网站内容类型时。
要阅读有关此内容的更多信息，请查看以下链接：

1.  [MSDN](http://msdn.microsoft.com/en-us/library/ms463016%28v=office.14%29.aspx)
2.  [所以](https://stackoverflow.com/questions/446451/sharepoint-what-happens-to-lists-based-on-content-type-when-content-type-is-upd)

# linux - 搜索文本

> ID：16087131
> 
> 赞同：0
> 
> 时间：2013-04-18T15:31:12.567
> 
> 标签：linux, shell, unix, awk, grep

我正在尝试编写一个 shell 脚本来搜索文件中的文本并将文本和相关信息打印到单独的文件中。

从这个包含基因 ID 列表的文件中：

```
DDIT3   ENSG00000175197
DNMT1   ENSG00000129757
DYRK1B  ENSG00000105204 
```

我想在 gtf 文件中搜索这些基因 ID (ENSG*)、它们的 RPKM1 和 RPKM2 值：

```
chr16   gencodeV7       gene    88772891        88781784        0.126744        +       .       gene_id "ENSG00000174177.7"; transcript_ids "ENST00000453996.1,ENST00000312060.4,ENST00000378384.3,"; RPKM1 "1.40735"; RPKM2 "1.61345"; iIDR "0.003";
chr11   gencodeV7       gene    55850277        55851215        0.000000        +       .       gene_id "ENSG00000225538.1"; transcript_ids "ENST00000425977.1,"; RPKM1 "0"; RPKM2 "0"; iIDR "NA"; 
```

并将其打印/写入单独的输出文件

```
Gene_ID         RPKM1   RPKM2
ENSG00000108270 7.81399 8.149
ENSG00000101126 12.0082 8.55263 
```

我已经在命令行上使用每个 ID 完成了它：

```
grep -w "ENSGno" rnaseq.gtf| awk '{print $10,$13,$14,$15,$16}' > output.file 
```

但是在编写 shell 脚本时，我尝试了 for、while、read、do 和更改变量的各种组合，但没有成功。任何想法都会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T15:43:52.847

您可以执行以下操作：

```
while read line
do
  var=$(echo $line | awk '{print $2}')
  grep -w "$var" rnaseq.gtf| awk '{print $10,$13,$14,$15,$16}' >> output.file
done < geneIDs.file 
```

# vb.net - AxAcroPDF1 控件的类未注册（HRESULT 异常：0x80040154 (REGDB_E_CLASSNOTREG)）

> ID：16087138
> 
> 赞同：0
> 
> 时间：2013-04-18T15:31:36.960
> 
> 标签：vb.net

我想使用 AxAcroPDF1 控件在我的 VB.net 应用程序中查看 PDF 文件。我将库 AcroPDFLib 和 AxAcroPDFLib 添加到我的项目中，并将控件拖到表单上。

```
 AxAcroPDF1.src="Myfile.pdf". 
```

项目设置为在 X86 环境上构建，并且选中了 Register for COM interop 选项。我有一台 64 位的机器。我已经用谷歌搜索了这个问题，但没有找到任何适合我的解决方案。谢谢，对此的任何指示表示赞赏。

```
Class not registered (Exception from HRESULT: 0x80040154 (REGDB_E_CLASSNOTREG))

   at System.Windows.Forms.UnsafeNativeMethods.CoCreateInstance(Guid& clsid, Object punkOuter, Int32 context, Guid& iid)
   at System.Windows.Forms.AxHost.CreateWithoutLicense(Guid clsid)
   at System.Windows.Forms.AxHost.CreateWithLicense(String license, Guid clsid)
   at System.Windows.Forms.AxHost.CreateInstanceCore(Guid clsid)
   at System.Windows.Forms.AxHost.CreateInstance()
   at System.Windows.Forms.AxHost.GetOcxCreate()
   at System.Windows.Forms.AxHost.TransitionUpTo(Int32 state)
   at System.Windows.Forms.AxHost.CreateHandle()
   at System.Windows.Forms.Control.CreateControl(Boolean fIgnoreVisible)
   at System.Windows.Forms.Control.CreateControl(Boolean fIgnoreVisible)
   at System.Windows.Forms.AxHost.EndInit()
   at Panel.InitializeComponent() in Panel.Designer.vb:line 115
   at Panel............................... 
```

# maven - 如何忽略 Maven 插件

> ID：16087140
> 
> 赞同：2
> 
> 时间：2013-04-18T15:31:42.960
> 
> 标签：maven, maven-3, maven-plugin

我们有一个用于 Maven 插件的 groupId：

```
com.company.maven.plugins 
```

不幸的是，当我在这个 groupId 中创建第一个插件时，我最初使用了错误的命名约定。

```
maven-myplugin-plugin 
```

该插件的 1.x 版本使用该名称。当我意识到这是错误的时，我更改了名称以符合[正确的约定](http://maven.apache.org/guides/introduction/introduction-to-plugin-prefix-mapping.html)。

```
myplugin-maven-plugin 
```

然后我将版本更新为 2.x。

在我的本地 settings.xml 文件中，我使用`pluginGroups`从命令行访问我的插件。这个特定的插件不必在 pom 文件中指定。

不幸的是，当我尝试从命令行访问我的插件而不限定名称时，我总是得到不正确命名约定的最新版本。所以，我得到了一个 1.x 版本。

`maven-myplugin-plugin`从命令行（即`mvn myplugin:mygoal`）访问时，我可以告诉 Maven 忽略工件吗？

有些项目仍然使用旧的 1.x 插件，所以我不想从我们的存储库中删除它们。此外，我们至少使用 Maven 3.0.3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T09:03:44.200

似乎 Maven3 按以下顺序解析插件的前缀

```
1\. maven-myplugin-plugin
2\. myplugin-maven-plugin
3\. ... hard-wired groups ... 
```

按照官方命名约定，它*应该*与恕我直言相反。不过，我认为您没有机会解决此问题。我尝试了一系列事情，基本上是在 maven-plugin-plugin 配置中使用了[goalPrefix 。](http://maven.apache.org/guides/introduction/introduction-to-plugin-prefix-mapping.html)*使用goalPrefix*安装新版本的已弃用命名插件不起作用。我想您可以做的一件事是为正确命名的插件定义另一个前缀，例如：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-plugin-plugin</artifactId>
    <version>3.2</version>
    <configuration>
        <skipErrorNoDescriptorsFound>true</skipErrorNoDescriptorsFound>
        <goalPrefix>myplugin2</goalPrefix>
    </configuration>
</plugin> 
```

另一种方法可能是调整*旧*插件的 pom.xml，将其重命名为不同的名称。但这意味着您的同事将需要不同的执行不同的 mvn 命令。或者您可以重命名您当前的插件 - 类似的结果。

如果有更好的解决方案，我也会感兴趣！

# angularjs - 在更改 AngularJS 模型后让 MathJax 更新

> ID：16087146
> 
> 赞同：26
> 
> 时间：2013-04-18T15:31:52.353
> 
> 标签：angularjs, mathjax

我正在尝试使用包含 Latex 样式方程式的 AngularJS 双向绑定文本。我想调用 MathJax 来格式化方程，但我不确定确保在 AngularJS 完成更改模型后调用 MathJax 的最佳方法。我想我需要一个回调。这是我的 JavaScript：

```
var myApp = angular.module('myApp',[]);
function MyCtrl($scope) {
   $scope.Update = function() {
       $scope.Expression = 'Evaluate: \\( \\frac{9}{4} \\div \\frac{1}{6} \\)';
       MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
   }
   $scope.Expression = 'Evaluate: \\( \\frac{5}{4} \\div \\frac{1}{6} \\)'; 
```

}

这是我的 HTML：

```
<div ng-controller="MyCtrl">
    <button ng-click="Update()">Update</button>
  {{Expression}}
</div> 
```

小提琴在这里：http: [//jsfiddle.net/LukasHalim/UVjTD/1/](http://jsfiddle.net/LukasHalim/UVjTD/1/)。您会注意到，在小提琴上，即使您两次单击更新按钮，原始表达式也不会被删除 - 似乎是一个错误或冲突。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-05-20T09:42:24.950

在与 MathJax 战斗浪费了很多天（甚至可能是几周）之后，我非常熟悉它在动态更新数学表达式方面的各种怪癖。我是 Angular 的新手，但这给了我一个很好的潜入的机会，我最终找到了一个解决我的问题的解决方案——希望它也能解决你的问题。

**现场演示：[jsfiddle](http://jsfiddle.net/spicyj/YpqVp/)**

* * *

我没有使用 Angular 提供的普通插值，而是创建了一个基于[`ng-bind`](http://docs.angularjs.org/api/ng.directive:ngBind)called的新指令`mathjax-bind`。

如果`expression`是一个包含数学代码的变量，那么`\( {{expression}} \)`您可以编写：

```
<span mathjax-bind="expression"></span> 
```

一切都会在适当的时候排版和更新。

该指令的支持代码如下：

```
myApp.directive("mathjaxBind", function() {
    return {
        restrict: "A",
        controller: ["$scope", "$element", "$attrs",
                function($scope, $element, $attrs) {
            $scope.$watch($attrs.mathjaxBind, function(texExpression) {
                var texScript = angular.element("<script type='math/tex'>")
                    .html(texExpression ? texExpression :  "");
                $element.html("");
                $element.append(texScript);
                MathJax.Hub.Queue(["Reprocess", MathJax.Hub, $element[0]]);
            });
        }]
    };
}); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2016-11-14T13:41:40.370

**最简单、最快、最稳定的解决方案：**

```
$rootScope.$watch(function(){
  MathJax.Hub.Queue(["Typeset",MathJax.Hub]);
  return true;
}); 
```

**好处：**

*   易于设置，只需复制此代码即可。
*   您页面上的所有内容都已排版。
*   **它的渲染速度比其他解决方案快得多**。这是因为它可以一次性渲染页面。这里的其他答案等待一项完成，直到他们排版下一项。如果有多个`mathjax-bind`指令（如另一个答案所示），这会使渲染变得非常缓慢。这就是我寻找不同答案的原因。
*   您仍然可以使用 mathjax 设置中的“ignoreClass”选项轻松排除元素。

基准测试：100`mathjax-bind`条指令耗时**63 秒**，而使用此方法渲染页面需要**1.5 秒。**我知道这个函数会被执行很多次，因为它在每个摘要循环中都会被调用，但是，它并没有明显减慢页面的速度。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-10-11T12:29:57.500

我创建了一个简单的小提琴，扩展了 Ben Alpert 的答案。这是[fiddle](http://jsfiddle.net/aheujhfq/)和[plunk](http://plnkr.co/edit/gErY2BOmOcBvmgcZxsHu?p=preview)。

具体来说，如果文本只有一部分要由 Mathjax 转换，则可以使用它。对于内联 mathjax，您必须用 $ 包围文本，而对于块显示，您必须用 $$ 包围块。（如果您创建相应的正则表达式，您可以使用任何您喜欢的格式）

**应用程序.js**

```
MathJax.Hub.Config({
    skipStartupTypeset: true,
    messageStyle: "none",
    "HTML-CSS": {
        showMathMenu: false
    }
});
MathJax.Hub.Configured();
var myApp = angular.module("myApp", []);
myApp.directive("mathjaxBind", function() {
    return {
        restrict: "A",
        scope:{
            text: "@mathjaxBind"
        },
        controller: ["$scope", "$element", "$attrs", function($scope, $element, $attrs) {
            $scope.$watch('text', function(value) {
                var $script = angular.element("<script type='math/tex'>")
                    .html(value == undefined ? "" : value);
                $element.html("");
                $element.append($script);
                MathJax.Hub.Queue(["Reprocess", MathJax.Hub, $element[0]]);
            });
        }]
    };
});
myApp.directive('dynamic', function ($compile) {
  return {
    restrict: 'A',
    replace: true,
    link: function (scope, ele, attrs) {
      scope.$watch(attrs.dynamic, function(html) {
          html = html.replace(/\$\$([^$]+)\$\$/g, "<span class=\"blue\" mathjax-bind=\"$1\"></span>");
          html = html.replace(/\$([^$]+)\$/g, "<span class=\"red\" mathjax-bind=\"$1\"></span>");
        ele.html(html);
        $compile(ele.contents())(scope);
      });
    }
  };
});
function MyCtrl($scope, $element) {    
    $scope.html = "A coin of is $ \\frac{5}{4} $ thrown $$\\frac{1}{6}$$ dfv";
} 
```

**索引.html**

```
<!DOCTYPE html>
<html ng-app="myApp">    
  <head>
    <meta charset="utf-8" />
    <title>AngularJS Plunker</title>
    <script>document.write('<base href="' + document.location + '" />');</script>
    <script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML&delayStartupUntil=configured&dummy=.js"></script>
    <link rel="stylesheet" href="style.css" />
    <script data-require="angular.js@1.2.x" src="http://code.angularjs.org/1.2.7/angular.js" data-semver="1.2.7"></script>
    <script src="app.js"></script>
  </head>
  <body>
  <div ng-controller="MyCtrl">
     <input type="text" ng-model="html"/><br/>
     <div dynamic="html"></div>
  </div>
</body> 
```

**样式.css**

```
input[type="text"] {
    width: 800px;
}
.red{
    color:red;
    display:inline-block;
}
.blue{
    color:blue;
    display:block;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-04-28T01:29:32.273

这是一个指令，可让您在表达式中使用双卷曲标记（并且不需要在范围内设置表达式变量）。它基于[这篇博](http://lucasbardella.com/blog/2014/11/katex-angularjs)文，除了我只支持 MathJax，我保存了编译后的 DOM，以便它更新范围变量的更改。

正如 Alex Osborn 所说，最好将非数学与数学分开。

用法：

```
<p>This is inline math: <latex>x^{ {{power}} }</latex>, 
and this is display math: <div latex> y^{ {{power}} } .</div></p> 
```

在一个片段中：

```
angular.module('app', [])
  .controller('ctrl', function($scope) {
    $scope.power = "\\sin(x^2)";
  })
  .directive('latex', function() {
    return {
      restrict: 'AE',
      link: function(scope, element) {
        var newDom = element.clone();
        element.replaceWith(newDom);
        var pre = "\\(",
          post = "\\)";
        if (element[0].tagName === 'DIV') {
          pre = "\\[";
          post = "\\]";
        }
        scope.$watch(function() {
          return element.html();
        }, function() {
          console.log(element);
          newDom.html(pre + element.html() + post);
          MathJax.Hub.Typeset(newDom[0]);
        });
      }
    }
  });
```

```
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.23/angular.min.js"></script>
<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

<div ng-app="app" ng-controller="ctrl">
  <p>Power:
    <input ng-model="power" />
  </p>
  <p>This is the inline latex,
    <latex>x^{ {{power}} }</latex>, followed by some display mode latex
    <div latex>y^{ {{power}} } = {{power}}.</div>And that's it!
  </p>
</div>
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-05-01T13:41:40.447

一个简单的解决方案是使用 $timeout 将其放入`MathJax.Hub.Queue(["Typeset", MathJax.Hub])`浏览器事件队列（请参阅[在 DOM 完成渲染后运行指令](http://blog.brunoscopelliti.com/run-a-directive-after-the-dom-has-finished-rendering/)）。

像这样的东西：

```
 var app = angular.module('myApp', []);
            app.controller('myController', function ($scope, $timeout) {
                controller = this;

                $scope.Update = function () {
                    $scope.value = " \\( \\frac{5}{4} \\div \\frac{1}{6} \\)";
                    $timeout(controller.updateMathJax, 0);
                }

                this.updateMathJax = function () {
                    MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
                }
            }); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-18T21:23:00.020

看看[http://jsfiddle.net/pz5Jc/](http://jsfiddle.net/pz5Jc/)

**在您的模板中：**

```
 {{Label}} <span id="mathElement">{{Expression}}</span> 
```

**在您的控制器中：**

```
$scope.Update = function() {
    $scope.Expression = '\\frac{9}{4} \\div \\frac{1}{6}';
    $scope.Label = 'Updated Expression:'
    var math = MathJax.Hub.getAllJax("mathElement")[0];
    math.Text('\\frac{4}{4} \\div \\frac{2}{6}');
} 
```

**几点：**

我对mathjax不太熟悉，但是：

*   从表达式中分离出标签允许您直接使用表达式。
*   您需要手动选择一个 DOM 元素来强制刷新表达式。不幸的是，这不是一种非常“有角度”的做事方式 - 但是当 mathjax 解析表达式（并插入它自己的 DOM 元素）时，它会将这些元素推到角度绑定之外。
*   此处的修复是专门选择正确的 mathjax 元素并调用文本更改函数来更新表达式。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-04-18T21:54:04.447

您可以尝试使用我的修改[http://jsfiddle.net/bmma8/4/](http://jsfiddle.net/bmma8/4/) 修改输入或单击按钮将更新您的表达式。

js：

```
MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
    tex2jax: {inlineMath: [["$","$"],["\\(","\\)"]]}
});

var myApp = angular.module('myApp',[]);

function MyCtrl($scope, $log) {

    var QUEUE = MathJax.Hub.queue;  // shorthand for the queue

    $scope.Update = function() {
        QUEUE.Push(["Text",MathJax.Hub.getAllJax("MathOutput")[0],"\\displaystyle{"+ $scope.Expression+"}"]);
        //$scope.Expression = 'Updated Expression: \\( \\frac{9}{4} \\div \\frac{1}{6} \\)';
        //MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
    }
    $scope.Expression = 'Original Expression: \\( \\frac{5}{4} \\div \\fra 
```

和html：

```
 <div ng-controller="MyCtrl">
         <button ng-click="Update()">Update</button>

         <input ng-model="Expression" ng-change="Update()">
         <div id="MathOutput">
         You typed: ${}$
         </div>
 </div> 
```

亚历山大

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-05-27T17:20:55.533

我实际上想到了另一种解决方案。当你渲染一些角度和数学时，你会这样做：

角度控制器

```
$scope x = 5; 
```

HTML

```
<h3> {{ '$ Multiplication = '+ x + ' * 2 =' + (x*2) + '$'}} </h3> 
```

格式化数学 Jax 结果

**乘法 = 5 * 2 = 10**

关键是将括号内的美元符号作为文本包含在内。当 Angular 渲染它们时，美元符号将显示为纯文本，但当 Math Jax 格式开始起作用时，它会识别美元符号并发挥作用。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-07-03T05:38:47.780

我为此建立了一个指令....

小提琴：http : [//jsfiddle.net/8YkUS/1/](http://jsfiddle.net/8YkUS/1/)

HTML

> p data-math-exp data-value="math">

JAVASCRIPT

```
 appFlipped.directive("mathExp", function () {
    return {
        scope: {
            value: "="
        },
        link: function (scope, el) {

            var domEl = el[0];
            scope.$watch("value", function (newValue) {

                //nothing to do here
                if (newValue == null || window.MathJax == null)return;

                //update the dom with the new value and pass the hub for styling the equation
                domEl.innerHTML = '`' + newValue + '`';
                MathJax.Hub.Queue(["Typeset", MathJax.Hub, domEl]);
            });
        }
    }
}); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-02-12T21:13:56.443

我对罗尼的解决方案做了更多的修改。显示数学应以显示模式显示；和

```
<script type="math/tex; mode=display"> 
```

我在生成的 span 中添加了一个属性来表明这一点。

小提琴在这里[http://jsfiddle.net/repa/aheujhfq/8/](http://jsfiddle.net/repa/aheujhfq/8/)

# ios - 移动导航控制器并添加标签

> ID：16087147
> 
> 赞同：0
> 
> 时间：2013-04-18T15:31:58.960
> 
> 标签：ios, uinavigationcontroller, uinavigationbar

我想移动导航控制器并在默认 iphone 栏和导航控制器栏之间添加一个小标题。像这样的东西：

[https://www.dropbox.com/s/6an4ywp5h1dnxy2/iphone.png](https://www.dropbox.com/s/6an4ywp5h1dnxy2/iphone.png)

我不知道该怎么做。我正在尝试使用此代码移动导航控制器

```
self.navigationController.view.frame = CGRectMake(0.0, 54.0, 220.0, 556.0); 
```

self.navigationController.navigationBar.frame = CGRectMake(0.0, 0.0, 210.0, 64.0);

但后来我无法添加标签。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T15:42:01.997

当然，navigationcontroller 不能完成你的工作，你可以使用 uiviewcontroller 和 uitoolbar,uinavigationbar 来完成，希望对你有所帮助。

这是教程

[导航栏教程](http://my.oschina.net/plumsoft/blog/55927)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T15:42:30.027

我的理解是你不能移动你的navigationController的默认导航栏。也就是说，您可以隐藏您的导航控制器的导航栏，然后将自定义导航栏（通过 xib 或代码）添加到您的视图中（并将其设置为您想要的顶部下方的许多像素）并在其上方添加一个标签。然后让按钮按下的动作调用导航控制器的按钮调用（或自己做）。

话虽如此，整个 UI 会是一个异常的外观，并且可能会感觉很奇怪......不确定我是否会推荐它。

要隐藏 navigationController 的栏：

```
[[self navigationController] setNavigationBarHidden:YES animated:NO]; 
```

# java - 如何在Java游戏中实现音频？

> ID：16087152
> 
> 赞同：0
> 
> 时间：2013-04-18T15:32:12.110
> 
> 标签：java, audio, javasound

我想在我的 java 游戏中添加音频，但我不知道如何将它付诸实践。根据我的阅读，Java 只播放 wav 文件，但这些文件太大了。我已经阅读了一些关于 JLayer 的内容，但实际上我需要类似 android 中的 soundpool 之类的东西来处理游戏中的所有效果。你知道怎么做吗？我必须建立一个可以做到的类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T16:15:22.737

这是我在不久前使用[JLayer](http://www.javazoom.net/javalayer/javalayer.html "层")在游戏中使用的一些代码：

```
public class MP3 {
  public void play(final InputStream in) {
     new Thread() {
        @Override
        public void run() {
           try {
              new Player(in).play();
           } catch (Exception e) {
              System.err.println(e.getMessage());
           }
        }
     }.start();
   }
 } 

private HashMap<String, URL> soundMap = new HashMap<String, URL>();

public void loadSounds() {
      String[] filenames = {
         "5_seconds_remaining.mp3",
         "10_seconds_remaining.mp3",
         "button_press_loud.mp3"
      };
      for (String s : filenames) {
         soundMap.put(s.substring(0, s.indexOf('.')), getClass().getResource("sounds/" + s));
      }
   }

public void playSound(String name) {
     try {
         new MP3().play(new BufferedInputStream(soundMap.get(name).openStream()));
     } catch (IOException ex) {}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T17:53:09.450

我推荐 TinySound。它支持 ogg/vorbis 文件（一种可与 mp3 相媲美的免费压缩格式，但不像 mp3 那样需要许可）。

[http://www.java-gaming.org/topics/need-a-really-simple-library-for-playing-sounds-and-music-try-tinysound/25974/view.html](http://www.java-gaming.org/topics/need-a-really-simple-library-for-playing-sounds-and-music-try-tinysound/25974/view.html)

那里提供了该库的 github 源的链接。

也可以将 Java 用作合成器（我一直在涉足这个），但我仍在努力制作一些“实用”的东西以在游戏中使用。

# java - 当我们设置 Xmx 和 Xms 大小相等时会发生什么

> ID：16087153
> 
> 赞同：9
> 
> 时间：2013-04-18T15:32:12.523
> 
> 标签：java, garbage-collection, jvm, heap-memory, jrockit

当我们将 Xms 和 Xmx 的值设置为相等时，对 FullGC 或 HotSpot 中年轻/终身代的分配有什么影响。

它对 JRockit 有什么影响吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-08-20T11:30:14.243

将这两个参数设置为相同的值是最佳实践。它将阻止 JVM 调整堆的大小。主要影响是堆的所有其他部分，尤其是世代，不会因堆大小调整而改变。这允许更好地理解和配置堆。它还消除了由调整堆大小引起的暂停。唯一不会这样做的情况是客户端 java 应用程序，它与许多其他应用程序竞争可用内存。在当今的用例中，您通常可以为 java 分配固定的内存块（例如在所有服务器应用程序中）

# jquery - 鼠标悬停时导航子菜单消失

> ID：16087155
> 
> 赞同：0
> 
> 时间：2013-04-18T15:32:13.353
> 
> 标签：jquery, html, css

我正在编辑由另一位开发人员创建的客户网站，该网站使用简单幻灯片放映插件。[http://wordpress.org/extend/plugins/simple-slide-show/](http://wordpress.org/extend/plugins/simple-slide-show/)我尝试联系开发人员，但相信他们可能不再支持此插件。

我正在解决主页导航菜单的问题。其中一个子菜单很长，如果我将鼠标悬停在菜单中与插件重叠的某个点上，它就会消失。[编辑：应客户要求删除了站点 url] 该错误发生在 Chrome、FF 和 Safari 中，也可能发生在其他浏览器中。

这很可能与插件无关，但我正在探索所有选项，这似乎是一件好事。我认为这可能是插件问题的原因是这个错误只发生在主页上。

感谢您的关注！

编辑：想通了-谢谢！#naviwrapper z-index 设置为 100 而不是 1。

# android - 平铺背景形状的圆角

> ID：16087161
> 
> 赞同：1
> 
> 时间：2013-04-18T15:32:21.323
> 
> 标签：android

我需要创建一个使用平铺图像背景的圆角视图。我已经尝试过`layer-list`了，但这对我不起作用，因为`bitmap`它只是放在`shape`圆角的顶部。请指教。

```
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
    <item>
        <shape android:shape="rectangle" android:padding="10dp">
            <corners android:bottomRightRadius="12dp"
                android:bottomLeftRadius="12dp"
                android:topLeftRadius="12dp"
                android:topRightRadius="12dp" />
        </shape>
    </item>
    <item>
        <bitmap android:src="@drawable/profile_data_background_im"
            android:tileMode="repeat" />
    </item>
</layer-list> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T15:54:03.623

看看github 上的[RoundedImageView](https://github.com/makeramen/RoundedImageView)库，可能正是您正在寻找的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T16:10:53.363

您可以`ImageView`改用 - 它能够绘制两个不同的可绘制对象（一个 as `background`，一个 as `src`）。

将平铺位图设置为`background`. 将您的圆角正方形设置为`src`

# twitter-bootstrap - twitter bootstrap 中的 Pinterest 启动页面

> ID：16087163
> 
> 赞同：0
> 
> 时间：2013-04-18T15:32:36.907
> 
> 标签：twitter-bootstrap, pinterest

结帐[Pinterest 的启动页面](http://www.pinterest.com)- **（确保您已注销您的帐户，否则您不会看到启动页面。）底部的 Macbook 图像，它是响应式的，并且根据浏览器窗口的大小缩小和扩展。

愚蠢的问题......他们是怎么做到的？以及如何使用 Twitter Bootstrap 来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T18:51:23.793

如果您查看`<script>`页面上的块，您可以看到它是如何完成的。它基本上只是一个调整大小的侦听器。这是一个简化版本：

```
var htAboveImage = $content.height(),
    naturalImageHt = 450,
    padding = 150,
    minImageHt = 100;

var changeFunc = function() {
    var windowHt = $window.height();
    var imageHt = Math.min(
                      Math.max(windowHt - htAboveImage - padding, minImageHt)
                      naturalImageHt,
                  );
    $image.height(imageHt);
};
changeFunc();
$(window).on("resize", changeFunc); 
```

也不需要更新宽度，因为`<img>`当你在 CSS 中只调整一个维度时，s 会自动按比例调整大小。但是 Pinterest 上的完整代码还会更新图像上方内容的填充，以使其保持垂直居中。

顺便说一句：当遇到此类问题时，*Chrome 的开发者工具是您的朋友！*仔细使用这些工具，只需要一分钟就可以看到发生了什么：

1.  右键单击图像 > 检查元素
2.  调整窗口大小并注意在标签上设置了明确的 px 高度，并不断更新。必须由JS完成。但是谁在设置它？
3.  右键单击标签 > 中断... > 属性修改
4.  再次调整窗口大小并点击断点
5.  调用堆栈的顶部隐藏在缩小的 jQuery 代码中——可能只是用于设置 CSS 属性的通用代码。堆栈上最高的非 jQuery 代码是什么？
6.  有代码！

# php - 使用 PHP 自动重新选择下拉选项

> ID：16087169
> 
> 赞同：0
> 
> 时间：2013-04-18T15:32:47.253
> 
> 标签：php, mysql

我希望有人可以提供帮助。

我的代码在下面，我希望当用户提交表单时，他们选择的选项值保留在下拉列表的顶部。

任何帮助，将不胜感激。

```
<?php require_once('Connections/reps.php'); ?>
<?php function GetPercent ($amount, $total) 
{
    $count1 = $amount / $total;
    $count2 = $count1 * 100;
    $count = number_format($count2, 0);
    return $count;
}
$countdate = time();
?>
<?php

if (!function_exists("GetSQLValueString")) {
function GetSQLValueString($theValue, $theType, $theDefinedValue = "", $theNotDefinedValue = "") 
{
  if (PHP_VERSION < 6) {
    $theValue = get_magic_quotes_gpc() ? stripslashes($theValue) : $theValue;
  }

  $theValue = function_exists("mysql_real_escape_string") ? mysql_real_escape_string($theValue) : mysql_escape_string($theValue);

  switch ($theType) {
    case "text":
      $theValue = ($theValue != "") ? "'" . $theValue . "'" : "NULL";
      break;    
    case "long":
    case "int":
      $theValue = ($theValue != "") ? intval($theValue) : "NULL";
      break;
    case "double":
      $theValue = ($theValue != "") ? doubleval($theValue) : "NULL";
      break;
    case "date":
      $theValue = ($theValue != "") ? "'" . $theValue . "'" : "NULL";
      break;
    case "defined":
      $theValue = ($theValue != "") ? $theDefinedValue : $theNotDefinedValue;
      break;
  }
  return $theValue;
}
}

$currentPage = $_SERVER["PHP_SELF"];

$maxRows_orders = 10;
$pageNum_orders = 0;
if (isset($_GET['pageNum_orders'])) {
  $pageNum_orders = $_GET['pageNum_orders'];
}
$startRow_orders = $pageNum_orders * $maxRows_orders;

mysql_select_db($database_reps, $reps);
$query_orders = "SELECT
orders.ID AS ID,
customers.`Name` AS customerName,
products.ProductName AS product,
orders.Quantity AS Quantity,
orders.SalesPrice AS SalesPrice,
orders.Price AS Price,
orders.paid AS paid,
orders.AgeOfPayment AS AgeOfPayment,
orders.orderDate AS orderDate,
products.Price AS productPrice,
staff.StaffName AS staffMember,
orders.bonus AS bonus
FROM
orders
INNER JOIN staff AS staff ON orders.staffMember = staff.ID
INNER JOIN products AS products ON orders.product = products.ID
INNER JOIN customers AS customers ON orders.customerName = customers.ID 
WHERE
1 = 1 ";

//The above where makes the where true

// The below takes the customer name from the select input and filters based on selection. Filters the order by

if (isset($_GET['customerName2']) && $_GET['customerName2'] != 'FALSE' ) 
{
$query_orders .= "AND customerName = '" .$_GET['customerName2']."' ";
}

// This makes sure the product is not false and filters

if (isset($_GET['product']) && $_GET['product'] != 'FALSE') 
{
$query_orders .= "AND product = '" .$_GET['product']."' ";
}

// The below filters hte Customer Name

if (isset($_GET['customerName'])&& $_GET['customerName'] != 'FALSE') {
$query_orders .= "ORDER BY '".$_GET['customerName']."' ";
}

echo "$query_orders <br /> <br />";

$query_limit_orders = sprintf("%s LIMIT %d, %d", $query_orders, $startRow_orders, $maxRows_orders);
$orders = mysql_query($query_limit_orders, $reps) or die(mysql_error());
$row_orders = mysql_fetch_assoc($orders);

if (isset($_GET['totalRows_orders'])) {
  $totalRows_orders = $_GET['totalRows_orders'];
} else {
  $all_orders = mysql_query($query_orders);
  $totalRows_orders = mysql_num_rows($all_orders);
}
$totalPages_orders = ceil($totalRows_orders/$maxRows_orders)-1;

$queryString_orders = "";
if (!empty($_SERVER['QUERY_STRING'])) {
  $params = explode("&", $_SERVER['QUERY_STRING']);
  $newParams = array();
  foreach ($params as $param) {
    if (stristr($param, "pageNum_orders") == false && 
        stristr($param, "totalRows_orders") == false) {
      array_push($newParams, $param);
    }
  }
  if (count($newParams) != 0) {
    $queryString_orders = "&" . htmlentities(implode("&", $newParams));
  }
}
$queryString_orders = sprintf("&totalRows_orders=%d%s", $totalRows_orders, $queryString_orders);

$paid = $row_orders['paid'];

mysql_select_db($database_reps, $reps);
$query_customers = "SELECT Name, ID FROM customers WHERE Status = 'Active'";
$customers = mysql_query($query_customers, $reps) or die(mysql_error());
$row_customers = mysql_fetch_assoc($customers);
$totalRows_customers = mysql_num_rows($customers);

mysql_select_db($database_reps, $reps);
$query_products = "SELECT * FROM products";
$products = mysql_query($query_products, $reps) or die(mysql_error());
$row_products = mysql_fetch_assoc($products);
$totalRows_products = mysql_num_rows($products);

?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<?php

require_once("models/config.php");
if (!securePage($_SERVER['PHP_SELF'])){die();}
require_once("models/header.php");

?>
</head>

<body>
<div id='wrapper'>
<div id='top'>
  <div id='logo'></div>
</div>
<div id='content'>
  <div id='left-nav'>
    <?php include("left-nav.php"); ?>
  </div>
  <div id='main'> <?php echo " Hi, $loggedInUser->displayname. Here is where you will be able to view orders from a managers perspective. " ?>
  <div id = "filtertable">
<FORM METHOD="GET" ACTION="<?php   ?>">
  <table border="10" cellpadding="5" cellspacing="5">
  <tr>
      <td align="center">Order By</td>
      <td> <select name="customerName">
<option value="FALSE">Select how to Order By</option>
<option value="ID">Order ID</option>
<option value="customerName">Customer Name</option>
<option value="product">Product</option>
<option value="orderDate">Order Date</option>
<option value="paid">Paid?</option>
</select></td>
    </tr>
    <tr>
      <td align="center">Customer Name</td>
            <td><select name="customerName2">
               <option value="FALSE" >Select the Customer Name</option>
                 <?php 
do {  
?>
              <option value="<?php echo $row_customers['ID']?>" ><?php echo $row_customers['Name'];?></option>
              <?php
} while ($row_customers = mysql_fetch_assoc($customers));
?>
            </select></td>
    </tr>
    <td align="center">Product</td>
    <td><select name="product">
  <option value="FALSE" >Select a Product</option>
        <?php 
do {  
?>
      <option value="<?php echo $row_products['ID']?>" >
      <?php echo $row_products['ProductName']?>
      </option>
      <?php
} while ($row_products = mysql_fetch_assoc($products));
?>
    </select></td>
  </tr>
    <td align="center">Order Date</td>
    <td><input type="text" name="email" value="" size="25" /></td>
  </tr>
    <td align="center">Paid?</td>
    <td><input type="text" name="email" value="" size="25" />
 </td>
  </tr>

    <td colspan="2" align="center">
<INPUT TYPE="SUBMIT" VALUE="Submit Filter" NAME="B1" />    </td>
    </tr>
  </table>
  <P>&nbsp;</P>
</FORM>

  </div>

    <div id ="orderstable">
      <table border="10" cellpadding="5" cellspacing="5">
        <tr>
          <th>Order ID</th>
          <th>Customer Name</th>
          <th>Product</th>
          <th>Quantity</th>
          <th>Sales Price (€)</th>
          <th>Total Sale (€)</th>
          <th>List Price (€)</th>
          <th>Price Difference (€)</th>
          <th>% Difference</th>
          <th>Sold By</th>
          <th>Order Date</th>
          <th>Age of Payment</th>
          <th>Paid?</th>
          <th>Bonus %</th>
          <th>Bonus Amount (€)</th>
        </tr>
        <?php do { ?>
          <tr>
            <td align="center" valign="middle"><?php echo $row_orders['ID']; ?></td>
            <td align="center" valign="middle"><?php echo $row_orders['customerName']; ?></td>
            <td align="center" valign="middle"><?php echo $row_orders['product']; ?></td>
            <td align="center" valign="middle"><?php echo $row_orders['Quantity']; ?></td>
            <td align="center" valign="middle"><?php echo "€"; echo number_format($row_orders['SalesPrice'], 2); ?></td>
            <td align="center" valign="middle"><?php $first_multiply = $row_orders['Quantity'];
                                               $second_multiply = $row_orders['SalesPrice'];
                                               $multiply_total = $first_multiply *  $second_multiply;
                                               echo "€"; echo number_format(($multiply_total) , 2); ?></td>
            <td align="center" valign="middle"><?php echo "€"; echo number_format($row_orders['Price'] ,2); ?></td>
            <td align="center" valign="middle"><?php echo "€"; $first_number = $row_orders['Price']; 
                                                $second_number = $row_orders['SalesPrice'];
                                                $sum_total = $second_number - $first_number;
                                                echo number_format(($sum_total) ,2); ?></td>
            <td align="center" valign="middle"><?php $percent = GetPercent($sum_total, $row_orders['Price']);
            echo $percent."%"; ?></td>
            <td align="center" valign="middle"><?php echo $row_orders['staffMember']; ?></td>
            <td align="center" valign="middle"><?php echo date('d/m/Y', $row_orders['orderDate']); ?></td>
            <td align="center" valign="middle"><?php 
      $currentorderdate = $countdate - $row_orders['orderDate'];
      $age = ($currentorderdate / 86400);
      $ageoforder = round($age, 0);
      echo $ageoforder;
      ?> day(s)</td>
            <td align="center" valign="middle"><?php 
            if ($row_orders['paid'] == Yes) {
                echo $row_orders['paid'];
            } else {
                echo "No";
            }
            ?></td>
            <td align="center" valign="middle"><?php 
            echo $row_orders['bonus']; ?>%</td>
            <td align="center" valign="middle"><?php
            $bonustotal = (($multiply_total/100) * ($row_orders['bonus']));
        if ($percent > 0 && $ageoforder-1 < 90 ) {
         echo "€"; echo number_format($bonustotal ,2);
        } else {
          echo "€"; echo 0;
        }
      ?></td>
          </tr>
          <?php } while ($row_orders = mysql_fetch_assoc($orders));?>
      </table>
<table border="0">
  <tr>
    <td><?php if ($pageNum_orders > 0) { // Show if not first page ?>
        <a href="<?php printf("%s?pageNum_orders=%d%s", $currentPage, 0, $queryString_orders); ?>">First</a>
        <?php } // Show if not first page ?></td>
    <td><?php if ($pageNum_orders > 0) { // Show if not first page ?>
        <a href="<?php printf("%s?pageNum_orders=%d%s", $currentPage, max(0, $pageNum_orders - 1), $queryString_orders); ?>">Previous</a>
        <?php } // Show if not first page ?></td>
    <td><?php if ($pageNum_orders < $totalPages_orders) { // Show if not last page ?>
        <a href="<?php printf("%s?pageNum_orders=%d%s", $currentPage, min($totalPages_orders, $pageNum_orders + 1), $queryString_orders); ?>">Next</a>
        <?php } // Show if not last page ?></td>
    <td><?php if ($pageNum_orders < $totalPages_orders) { // Show if not last page ?>
        <a href="<?php printf("%s?pageNum_orders=%d%s", $currentPage, $totalPages_orders, $queryString_orders); ?>">Last</a>
        <?php } // Show if not last page ?></td>
  </tr>
</table>
    </div>
  </div>
 <div id ="bottompart">
  <div id='bottom'></div>
</div>
</div>
</div>
</body>
</html><?php
mysql_free_result($orders);

mysql_free_result($staff);

mysql_free_result($products);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T15:36:23.250

我认为您想在选择列表中显示用户的选定值，而不是使用`if`条件来回显`selected`

```
<?php
   $dynamic_val = /* Save the value if you call from db, or by using $_POST */;
?>
<select>
   <option value="1" <?php echo sel_opt(1, $dynamic_val); ?>></option>
   <option value="2" <?php echo sel_opt(2, $dynamic_val); ?>></option>
   <option value="3" <?php echo sel_opt(3, $dynamic_val); ?>></option>
</select>

<?php
   function sel_opt($opt, $val) {
     if($opt == $val) {
       return 'selected';
     }
   }
?> 
```

> 这不会将选项从字面上移到列表的顶部，而是会选择用户选择的选项

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T15:39:33.537

你可以在里面添加这个

```
<option value="FALSE" <?php echo isSelected("FALSE"); ?>>Select how to Order By</option>
<option value="ID" <?php echo isSelected("ID"); ?>>Order ID</option>
//so on....

function isSelected($term) {
   if(isset($_GET['customerName']) && $term == $_GET['customerName']) {
       return 'selected="selected"';
   }
} 
```

# ios - 使用 iOS6 在 Storyboard 中旋转 UIView

> ID：16087180
> 
> 赞同：4
> 
> 时间：2013-04-18T15:33:14.553
> 
> 标签：ios, ios6, uistoryboard

我有一个`UILabel`我想旋转 180 度，所以文本出现倒置。我做了一些搜索，发现[这个问题](https://stackoverflow.com/questions/6326720/objective-c-how-can-you-rotate-text-for-uibutton-and-uilabel)涉及旋转`CGAffineTransformMakeRotation`。

有没有办法在我的 上旋转它`UIStoryboard`？标签总是会以相同的固定旋转出现，所以让它在我的故事板中以与运行时相同的方式显示会很好。我发现[这篇文章说这是不可能的](http://iphonedevsdk.com/forum/iphone-sdk-development/82117-how-do-you-rotate-a-uilabel-in-xib.html)，但那是一篇很老的文章（我认为是故事板前）。当然，如果它没有故事板，我可以`CGAffineTransformMakeRotation`像在我的`viewDidLoad`.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-18T15:36:53.080

不，没有办法做到这一点；您必须在代码中应用转换（正如您所说，`viewDidLoad`这是一个好地方）。

故事板/笔尖编辑器非常好，但是您仍然可以对视图执行*很多只能在代码中执行的操作，并且也适用于特定的 UIView 子类。*当然，您也根本无法在情节提要/笔尖编辑器中访问视图的*底层*；例如，您不能在情节提要/笔尖中给视图圆角。

# ssrs-2008 - SSRS 2008 tablix 结果缺失值

> ID：16087188
> 
> 赞同：0
> 
> 时间：2013-04-18T15:33:28.317
> 
> 标签：ssrs-2008

我有一个报告，它以订单号作为参数，并在一行中显示一个 tablix，其中每个部件号以及部件描述、订购数量、发货数量、剩余发货数量和延期交货数量。

SSMS 显示查询返回的行数与 tablix 显示的行数相同。但是，tablix 在几个地方有空白。我没有过滤器，没有可见性设置，也没有特殊条件。我将零设置为显示为“-”。

空白出现在两列中相同值的下方：已发货数量和剩余数量。也就是说，如果一个值与上面的值相同，则不显示（仅在这两列中），如下所示：

```
Item Desc #Ordered #Shipped #Remaining #Backorder
1H   abc         4        4          -          -
2R   def         1        -          1          0
5L   ghi         6                   6          3
7P   jkl         6        6          -          -
9Q   mno         6                              - 
```

#Shipped 下的 5L 应该有一个 -（表示零）。9Q 在#Shipped 下应该有一个 6，在 #Remaining 下应该有一个 -，如下所示：

```
Item Desc #Ordered #Shipped #Remaining #Backorder
1H   abc         4        4          -          -
2R   def         1        -          1          0
5L   ghi         6        -          6          3
7P   jkl         6        6          -          -
9Q   mno         6        6          -          - 
```

到底是怎么回事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T20:32:40.657

在查询中，尝试使用 isnull(#Shipped,'-') 来捕获其余的空白。如果这不起作用，请使用 TextBox 表达式：

```
=switch(len(#Shipped)>0,#Shipped,True,"-") 
```

这将用破折号替换空白值以匹配其他值。

# file - MSBuild 将文件添加到主输出

> ID：16087191
> 
> 赞同：4
> 
> 时间：2013-04-18T15:33:41.390
> 
> 标签：file, msbuild, tfsbuild

如何将 MSBuild 创建的一些自定义文件添加到项目输出中？即我有空白的 .csproj，我将 Exec 任务添加到生成一些 file.txt 的目标，现在我想将此文件包含到“主要输出”或“内容文件”中。

谢谢，马雷克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-05T18:36:21.793

通常，您只需要包含您拥有的输出文件，然后将它们复制到输出目录即可。

```
<CreateItem Include="$(SourcePath)\file.txt">
  <Output ItemName="FilesToCopy" TaskParameter="Include" />
</CreateItem>

<Copy SourceFiles="@(FilesToCopy)" DestinationFolder="$(OutDir)" /> 
```

还有一个用于直接项目的变量 $(OutputDirectory)。您可能还会发现许多其他有用的属性：

[https://msdn.microsoft.com/en-us/library/ms164309.aspx](https://msdn.microsoft.com/en-us/library/ms164309.aspx) [https://msdn.microsoft.com/en-us/library/ms164313.aspx](https://msdn.microsoft.com/en-us/library/ms164313.aspx)

# css - 是否可以在 iframe 或 DIV 中实时修改网站的 CSS？

> ID：16087194
> 
> 赞同：0
> 
> 时间：2013-04-18T15:33:43.240
> 
> 标签：css, html, iframe

我想构建具有标题栏的页面，其下方的 iframe 或 DIV 中包含来自其他站点的页面。我想用我自己的 CSS 替换它下面的网站的 CSS（以某种方式覆盖它；例如，我可能引用它下面的博客页面，但想通过 CSS 更改外观）。请注意，这些页面仅是根据网站许可允许我执行此操作的页面。

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T15:35:15.200

不，不是。当然不是跨域。iframe 的全部意义在于它们的内容与父页面隔离。请参阅[如何将 CSS 应用于 iframe？](https://stackoverflow.com/questions/217776/how-to-apply-css-to-iframe)对这个问题进行彻底的讨论。

# javascript - Raphael 设置元素的属性

> ID：16087196
> 
> 赞同：0
> 
> 时间：2013-04-18T15:33:46.980
> 
> 标签：javascript, jquery, html, raphael

我正在使用 raphaeljs 添加需要在元素上设置属性，但是属性名称和值保存在变量中

```
var attr_name='fill'; 
var attr_value='#343434'; 
```

但以下不起作用

```
exampleelement.attr({attr_name: attr_value}); 
```

但是，如果我在 attr 字段中输入实际名称，它会起作用

```
exampleelement.attr({'fill': attr_value}); 
```

我试过用引号和双引号括起来，但这没有效果。

请问有人可以提出任何建议吗？手动输入它们并不是一个真正的选项，因为此代码在循环中运行，并且每次它可能是它设置的不同属性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T15:34:35.307

试试这个 -

```
exampleelement.attr(attr_name, attr_value); 
```

jQuery 文档 - [**.attr()**](http://api.jquery.com/attr/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T15:36:12.947

正确的语法是

```
exampleelement.attr(key, val); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-13T12:12:23.020

我发现的是：

```
exampleelement.attr({fill:'#343434'}); 
```

或者

```
exampleelement.attr('fill': '#343434'); 
```

两者都是一样的。

注意：有 --> {} <-- 在第一个。

# php - 在 Extjs 中提交表单后，无法从服务器获取 JSON 响应到存储中

> ID：16087199
> 
> 赞同：0
> 
> 时间：2013-04-18T15:33:53.990
> 
> 标签：php, json, extjs

我有一个登录表单，它在单击提交按钮时将用户名、密码值提交给服务器。

```
var form = this.up('form').getForm();
    if (form.isValid()) {
        form.submit({
            url: '', //this is the url where the form gets submitted
            success: function(form, action) {
               Ext.Msg.alert('Success', action.result.msg);
            },
            failure: function(form, action) {
                Ext.Msg.alert('Failed', action.result.msg);
            }
        });
    } 
```

但是在提交按钮后，单击网页（Web 应用程序）被重定向到我为表单提交提供的 URL，显示来自服务器的响应。

我需要将来自服务器的 JSON 响应存储到存储中，而不会被重定向并保持在同一页面上。

请帮我解决这个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T15:45:34.553

将 form 的 standardSubmit 属性设置为 false：

```
Ext.create('Ext.form.Panel', {
    standardSubmit: false,
    ... 
```

# c# - 在 MonoDroid 中隐藏警报对话框

> ID：16087200
> 
> 赞同：0
> 
> 时间：2013-04-18T15:33:55.460
> 
> 标签：c#, xamarin.android

我正在开发一个 MonoDroid 应用程序。我遇到了一些语法问题。我正在尝试创建一个实用程序方法，该方法允许我显示“警报”对话框。我可以成功显示对话框。但是，我不知道如何连接按钮事件处理程序，以便我可以“关闭”或关闭对话框。目前，我有以下内容：

```
public static void ShowAlert(Activity activity, string title, string message)
{
  var dialogBuilder = new AlertDialog.Builder(activity);
  dialogBuilder.SetTitle(title);
  dialogBuilder.SetMessage(message);

  // Add the dialog buttons
  dialogBuilder.SetPositiveButton(Android.Resource.String.OK, delegate { });
  dialogBuilder.SetCancelable(true);

  // Display the dialog
  var alertDialog = dialogBuilder.Create();
  alertDialog.Show();
} 
```

当用户单击“确定”时，如何使警报对话框消失？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T16:45:13.570

你需要做两件事。1.您需要为您的肯定按钮设置一个处理程序。我喜欢一个事件处理程序，但你的委托很好。2\. 在您的事件处理程序或委托中，您将在对话框中调用 .Hide。

如果您正在使用事件处理程序，请记住，您将无法在创建它的函数之外访问您的对话框。因此，我总是创建一个活动级别变量来保存我的对话框。然后我可以像你一样将它设置为新的，然后在事件处理程序中将其关闭。

# python - Python：具有可变长度参数列表的函数

> ID：16087203
> 
> 赞同：0
> 
> 时间：2013-04-18T15:34:18.070
> 
> 标签：python, matplotlib

我正在尝试（在同一个图中）从 Excel 工作表中绘制一些数据，并且我想要一个可变长度的字符串列表作为输入，对应于不同的材料。我收到以下错误： TypeError: 'NoneType' object is not iterable 我真的不明白为什么。这是代码：

```
import xlrd
import matplotlib.pyplot  as plt
from numpy import *
def transmittance(*glass):
    wb=xlrd.open_workbook('schott_optical_glass_catalogue_excel_december_2012.xls')
    sheet1=wb.sheet_by_index(0)
    transm_index=[]  #lista vuota
    plt.figure(1)
    plt.xlabel('wavelength $\lambda$[nm]')
    plt.ylabel('transmittance')
    for item in glass:
        for i in range(sheet1.nrows):
            if sheet1.cell_value(i,0)==glass:
                reversed_transmission=sheet1.row_values(i,37,67)
                transm_index=reversed_transmission[::-1]
                new_transm_index=[float(ni)  for ni in transm_index ]
    wavel_range=sheet1.row_values(3,37,67)
    temp_wavel= [k.split('/')[1] for k in wavel_range]
    wRange=map(int,temp_wavel[::-1])
    plt.plot(wRange,new_transm_index, 'r-')
    plt.grid(True, which="both")
    plt.show()
    return new_transm_index, wRange

if __name__=='__main__':
    new_transm_index=transmittance('N-BASF64','N-BK7')
    print 'get tuple length and glass name: ' ,new_transm_index 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T15:10:24.203

我无法重现您在问题中描述的 TypeError（如果我`transmittance()`在没有任何参数的情况下调用，我可能会得到）。但是，当使用我通过 Google 找到的同名 XLS 文件调用您的函数时，我得到了两个不同的错误。

*   您迭代 中的项目`glass`，然后将其与整个列表进行比较，而不是与当前列表进行比较`item`
*   创建`new_transm_index`列表时，不能只转换为`float`，因为表中有一些空字符串；在这种情况下，我会假设该值为零。

最后，如果您希望`new_transm_index`为每个项目保存一个列表`glass`（如您的评论中所述），您应该使用字典，将项目（键）映射到相应的列表（值）。

```
...
new_transm_index = {} # create dictionary
for item in glass:
    for i in range(sheet1.nrows):
        if sheet1.cell_value(i, 0) == item: # compare to item, not to list
            ...
            # do not cast ' ' to float, but use 0 if not of type float
            new_transm_index[item] = [ni if type(ni) == float else 0 for ni in transm_index]
...
for item in glass: # add plots for all items to common diagram
    plt.plot(wRange,new_transm_index[item])
plt.grid(True, which="both")
plt.show()
... 
```

# c# - 具有数字成员的 Json 对象未绑定到 MVC 控制器中的 Object.IntegerProperty

> ID：16087204
> 
> 赞同：2
> 
> 时间：2013-04-18T15:34:18.237
> 
> 标签：c#, ajax, asp.net-mvc, json, asp.net-web-api

使用 JQuery 1.9，我正在调用以下 ajax 语句：

```
var data =
{ 
    PropertyId: 1912,
    Position: 0,
    Description: "State sales tax",
    Rate: 5,
    RateIsPercent: true
};

$.ajax(
{
    type : "PUT",
    url: "/api/taxes/5",
    data: JSON.stringify(data),
    contentType: "application/json; charset=utf-8"
}); 
```

在 Chrome 或 Firefox 中，我看到请求正文（字符串化数据）是有效的 JSON。它看起来像这样：

![在此处输入图像描述](https://i.stack.imgur.com/KIhYx.png)

我已经使用其他解析器进行了验证，所有这些都确认这是有效的 JSON。

**问题是这个 JSON 对象中的 PropertyId 成员没有绑定到 MVC 控制器方法中的对象属性，即使所有其他成员都绑定了。我收到以下错误：**

```
{
  "Message": "The request is invalid.",
  "ModelState": {
    "newTax.PropertyId": [
      "The field PropertyId must be between 1 and 2147483647."
    ]
  }
} 
```

如上图所示，PropertyId 值为 1912。这显然是一个可接受的 int32 值。

**那么为什么会抛出这个验证错误呢？**

这是我希望它绑定到的对象：

```
public class Tax : CloneableObject
{
    public Tax() { }

    public int ID { get; set; }

    [Required]
    [Range(1, int.MaxValue)]
    [IgnoreDataMember]
    [Display(Name = "Property ID")]
    public int PropertyId { get; set; }

    [Required]
    [Min(0)]
    public int Position { get; set; }

    [Required]
    [StringLength(256)]
    public string Description { get; set; }

    [Required]
    [DataType(DataType.Currency)]
    public decimal Rate { get; set; }

    [Required]
    [Display(Name = "Rate Is Percent")]
    public bool RateIsPercent { get; set; }
} 
```

这是控制器中的操作方法：

```
// PUT: api/taxes/5
public Tax Put(int id, [FromBody]Tax newTax)
{
    return TaxBusiness.Update(id, newTax).ExecuteOrThrow();
} 
```

以下是配置的路由：

```
config.Routes.MapHttpRoute(name: "ApiPutPatchDelete", routeTemplate: "api/{controller}/{id}", defaults: null, constraints: new { httpMethod = new HttpMethodConstraint("PUT", "PATCH", "DELETE") });
config.Routes.MapHttpRoute(name: "ApiPost", routeTemplate: "api/{controller}", defaults: null, constraints: new { httpMethod = new HttpMethodConstraint("POST") });
config.Routes.MapHttpRoute(name: "ApiGet", routeTemplate: "api/{controller}/{id}", defaults: new { id = RouteParameter.Optional }, constraints: new { httpMethod = new HttpMethodConstraint("GET") }); 
```

我不相信它击中正确的路线有问题，因为如果我传递名称/值发布数据而不是 json，它就可以工作。例如，如果我改为调用它：

```
 curl -X PUT http://app/api/taxes/5 -d "propertyId=1912&rate=50&etc..." 
```

它工作得很好。

PropertyId 是唯一未正确绑定的成员。除了这个之外，没有其他验证错误。

**我试过的...**

如果我删除该`[Range(1, int.MaxValue)]`属性，我不会收到任何验证错误，但 tax.PropertyId 最终的值为`0`.

如果我从 PropertyId 中删除*所有*`1912`属性，则该值完全可以通过.

同样，如果我使用名称/值发布字符串来发送如下值，这一切都不会发生：

```
 "propertyId=1912&rate=23&etc...." 
```

如果我这样做，所有验证都会按预期工作。这仅在我发布 json 字符串时发生。

**更新：**

它似乎与`[IgnoreDataMember]`属性有关。如果我删除它，一切正常。如果我离开它，就会出现问题。

反序列化时是否`[IgnoreDataMember]`跳过 json 对象成员？我以为`[IgnoreDataMember]`只在序列化时使用，而不是反序列化。

如果是这样，是否有不同的方式告诉序列化忽略 PropertyId 字段，同时确保它在反序列化过程中被包含在内？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T11:30:31.827

根据我的阅读，没有办法使用属性来停止序列化而不是反序列化。 `IgnoreDataMember`两者`JsonIgnore`都做同样的事情。

我让它工作的`ShouldSerialize`方法是完全删除属性并切换到条件序列化方法。

[ShouldSerialize 上的 Json.NET 文档](http://james.newtonking.com/projects/json/help/index.html?topic=html/ConditionalProperties.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T04:06:44.517

在属性 PropertyId

```
[Required]
[Range(1, int.MaxValue)]
[IgnoreDataMember]
[Display(Name = "Property ID")]
public int PropertyId { get; set; } 
```

我认为问题是属性 [IgnoreDataMember]。您尝试使用 attr [JsonIgnore] 而不是 [IgnoreDataMember]。请参见下面的代码：

```
[Required]
[Range(1, int.MaxValue)]
[JsonIgnore]
[Display(Name = "Property ID")]
public int PropertyId { get; set; } 
```

不要忘记添加参考 Newtonsoft.Json 和

```
using Newtonsoft.Json; 
```

在你的代码中。

希望有用！

# r - 使用 R 从安全 ftp 服务器下载文件

> ID：16087209
> 
> 赞同：3
> 
> 时间：2013-04-18T15:34:28.537
> 
> 标签：r

我需要从 sftp 服务器下载文件并解析它们并将内容插入到数据库中。

我目前正在使用 rCurl，如下所示：

```
library(RCurl) 
url<-c("sftp://data.ftp.net/incomining.data.txt")
x<-getURL(url, userpwd="<id>:<passwd>")
writeLines(x, incoming.data.txt")) 
```

我还查看了 download.file，但在 download.file 中没有看到 sftp sufpport。有没有其他人做过类似的工作？由于我将获得多个文件，因此我注意到 rcurl 有时会超时。我喜欢先从 sftp 服务器 sftp 下载所有文件，然后再进行处理。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T18:03:48.237

听起来问题是“如何避免 rcurl 超时？”

增加 CURLOPT_CONNECTTIMEOUT 的值。这实际上与[在 PHP 中设置 Curl 的超时](https://stackoverflow.com/questions/2582057/setting-curls-timeout-in-php)相同的问题。

编辑，来自以下评论：

```
x<-getURL(url, userpwd="<id>:<passwd>", connecttimeout=60) // 60 seconds, e.g. 
```

# listener - ActiveMQ，prefetch=0 的消费者，增加控制台中的“入队”计数（因为轮询？）

> ID：16087213
> 
> 赞同：1
> 
> 时间：2013-04-18T15:34:40.503
> 
> 标签：listener, activemq, prefetch, consumer

使用 Spring 配置的 ActiveMQ，监听器配置了 prefetch=0 connectionFactory 和 5-5 并发，我们看到监听器显然轮询新消息而不是代理推送消息，正如预期的那样。

但是，在我们队列的“Active Listeners”的 ActiveMQ Web 控制台中，我看到“Enqueues”列计数持续快速上升（大约每秒 1 个）。这是正常行为吗？既然我们有 prefetch=0，这是否只是反映了侦听器对新消息的每次轮询？当没有实际消息正在工作时，队列显示出越来越多的 Enqueue 计数似乎有点奇怪。还想知道是否有办法限制轮询频率，或者在每个消费者轮询代理以获取新消息之前有一些延迟。

控制台的图片，显示了 prefetch=0 时每个消费者不断增加的 Enqueue 计数，即使没有消息可以工作：

[http://activemq.2283324.n4.nabble.com/file/n4666021/enqueues.png](http://activemq.2283324.n4.nabble.com/file/n4666021/enqueues.png)

# python - 如何创建一个列表，如果列表 a 的行的 a[0] 或 a[1] 不存在于列表 b 的任何行中，则列表 a 中的行将附加到列表 c？

> ID：16087214
> 
> 赞同：-1
> 
> 时间：2013-04-18T15:34:43.400
> 
> 标签：python

我有一个列表列表，`a`例如：

```
a = [[1, 3, 7], [3, 5, 7], [-23, -34, -45]] 
```

和另一个列表，`b`例如：

```
b = [1, 2, 3, 4] 
```

我想创建一个列表`c`，当单行列表的前两列中的项目`a`不存在于列表`b`中时，a 的行将附加到列表 c。在示例列表中 c 看起来像：

```
c = [[7], [7], [-45]] 
```

因为第一行`a`包含 1 和 3，它们都存在于中`b`，而第二行包含 3，它们存在于 中`b`。

我尝试了以下方法但没有成功：

```
for row in a:
    if row[0] or row[1] not in b:
        c.append(a) 
```

和

```
for row in a:
    if row[1] not in b:
        if row[0] not in b:
            c.append(a) 
```

因为两者似乎都复制`a`到`b`

有谁知道为什么我的代码不起作用/代码会改为？

编辑：抱歉，我第一次得到了我的预期结果错误

编辑 2：我搞砸了——我设计的全错了，我的输入列表来自另一个来源，我把它们复制错了。所以我真正想做的是如下

```
c = [ ]

a = [[1, 3, -23], [3, 5, -34], [7, 7, -45]]
b = [1, 2, 3, 4]

for row in a:
    if row[0] not in b and row[1] not in b:
        c.append(row) 
```

感谢所有帮助过的人。对不起，我真是个白痴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T15:40:19.423

只需使用`sets`和`list comprehensions`：

```
[row[2] for row in a if set(b)-set(row[:2]) != set(b)] # prints [7, 7] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T15:43:44.710

也许是错误的条件？

```
for row in a:
    if row[0] not in b or row[1] not in b:
        c.append(a) 
```

`row[0]`如果不为零，则为真，那么为什么总是将 a 复制到 b。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T15:51:46.577

对@muzulget 的回答稍作修改：

```
for row in a:
    if row[0] not in b or row[1] not in b:
        c.append(a[2]) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-18T15:51:52.630

我会去：

```
c = [row[2:] for row in a if row[0] in b or row[1] in b] 
```

或者，使用集合：

```
b_set = set(b)
c = [row[2:] for row in a if not set(row[:2]).isdisjoint(b_set)] 
```

测试：

```
>>> a = [[1, 3, 7], [3, 5, 7], [-23, -34, -45]]
>>> b = [1, 2, 3, 4]
>>> c = [row[2:] for row in a if row[0] in b or row[1] in b]
>>> print c
[7, 7] 
```

似乎符合您在评论中的最后一个定义。不确定这是不是正确的`;)`

# marionette - 无法将子视图插入到布局中

> ID：16087218
> 
> 赞同：1
> 
> 时间：2013-04-18T15:34:47.247
> 
> 标签：marionette

我正在使用 Marionette.Backbone 创建一个 web 应用程序，并且我得到了一个创建布局并向其中添加三个子视图的模块。

布局渲染良好，但区域未填充每个子视图。我错过了什么。我在控制台中没有错误。

**这是我的控制器：**

```
@Appic.module "ProjectsApp.Add", (Add, App, Backbone, Marionette, $, _) ->

    Add.Controller =

        addProject: ->
            @layout = @getLayoutView()

            @layout.on "show", =>
                @showLeft
                @showContent
                @showRight

            App.mainRegion.show @layout

        showLeft: ->
            leftView = @getLeftView
            @layout.leftRegion.show leftView

        showContent: ->
            contentView = @getContentView
            @layout.contentRegion.show contentView

        showRight: ->
            rightView = @getRightView
            @layout.rightRegion.show rightView

        getLeftView: ->
            new Add.Left

        getContentView: ->
            new Add.Form

        getRightView: ->
            new Add.Right

        getLayoutView: ->
            new Add.Layout 
```

**这是我的模块视图部分**

```
@Appic.module "ProjectsApp.Add", (Add, App, Backbone, Marionette, $, _) ->

    class Add.Layout extends App.Views.Layout
        template: "projects/add/templates/add_layout"

        regions:
            leftRegion: "#left-region"
            contentRegion: "#content-region"
            rightRegion: "#right-region"

    class Add.Left extends App.Views.ItemView
        template: "projects/add/templates/_left"

    class Add.Right extends App.Views.ItemView
        template: "projects/add/templates/_right"

    class Add.Form extends App.Views.ItemView
        template: "projects/add/templates/_form" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T11:07:10.413

您正在分配一个指向函数的指针，而不是函数导致您的 show 方法。尝试：

```
 showLeft: ->
        leftView = @getLeftView()
        @layout.leftRegion.show leftView

    showContent: ->
        contentView = @getContentView()
        @layout.contentRegion.show contentView

    showRight: ->
        rightView = @getRightView()
        @layout.rightRegion.show rightView 
```

# php - 左连接在 Web 服务器上不起作用

> ID：16087222
> 
> 赞同：-4
> 
> 时间：2013-04-18T15:34:56.757
> 
> 标签：php, mysql, join

下面的 sql 查询在 localhost 中工作，当我在 Web 服务器中尝试它时它不起作用。

```
SELECT  t1.student_id,t1.id AS id1,t2.id AS id2,t3.id AS id3,t1.costperhour AS cs1,t2.costperhour AS cs2,t3.costperhour AS cs3,t1.sub_hours AS th1,t2.sub_hours AS th2,t3.sub_hours AS th3,MIN(t1.subjectass_id) AS sub1,MIN(t2.subjectass_id) AS sub2,MIN(t3.subjectass_id) AS sub3    FROM    tb_adhocdetails t1
        LEFT JOIN tb_adhocdetails T2 
            ON t1.student_id = t2.student_id 
            AND t2.subjectass_id > t1.subjectass_id
        LEFT JOIN tb_adhocdetails T3 
            ON t2.student_id = t3.student_id
            AND t3.subjectass_id > t2.subjectass_id
        LEFT JOIN tb_adhocdetails T4 
            ON t3.student_id= t4.student_id
            AND t4.subjectass_id > t3.subjectass_id
WHERE t1.student_id=360 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T15:43:01.350

在某些 Linux MySQL 服务器上，表/列名称区分大小写。当您使用大写“T”声明表并将它们与小写“t”一起使用时，您可能会遇到无法识别的表的错误

# matlab - 0-d Numpy 数组中的多个元素

> ID：16087226
> 
> 赞同：1
> 
> 时间：2013-04-18T15:35:02.770
> 
> 标签：matlab, numpy, scipy

我正在`*.mat`使用 Python 2.6 读取文件（不确定使用的 Matlab 版本），`scipy.io.loadmat`由于数组尺寸，我无法使用读取的数组。似乎无论我尝试访问这些元素，我最终都会得到一个仍然有多个元素的 0-d 数组。我已经看过[this](https://stackoverflow.com/questions/773030/why-are-0d-arrays-in-numpy-not-considered-scalar)和[this](http://projects.scipy.org/numpy/wiki/ZeroRankArray)，但仍然不知道如何使用这些元素。

假设我读了一个数组，

```
data = scipy.io.loadmat(filename,squeeze_me=False)
....
b = data[0][0]['somevar'] 
```

在此之后，我有

```
b=  [[ array([[ 1.0884988 ,  1.08116209,  1.07364911,  1.06662874,  1.06008637,
                1.0530468 ,  1.04619028,  1.03984295,  1.03342865,  1.02715746,
                1.02114066,  1.01496634,  1.00904967,  1.00316573,  0.99803184,
                0.99262961 ]])]] 
```

现在，如果我尝试`b.squeeze()`or `b = b[0][0]`，我有

```
b=  [[ 1.0884988   1.08116209  1.07364911  1.06662874  1.06008637  
       1.0530468   1.04619028  1.03984295  1.03342865  1.02715746  
       1.02114066  1.01496634  1.00904967  1.00316573  0.99803184  
       0.99262961]] 
```

这是一个 0-d 数组，自然会出现错误

```
IndexError: 0-d arrays can't be indexed 
```

或类似的东西，并且不能访问`b`.

如何在`loadmat`不生成 0-d 数组的情况下访问最初读取的数组元素，并且最好比使用多个`[0]`索引更优雅？感谢您的任何帮助或建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T20:14:08.523

如果我像你展示的那样在 Python 提示符下键入 b ，我会得到一个结构，我可以通过它访问“真实”数组`b[0][0].squeeze()`- 无论内部数组是`array`来自 Python 库还是 a `numpy.array`。换句话说，对我有用。

# python - 为什么使用 cx_Freeze 创建的 .exe 无法运行？它告诉我：找不到 python33.dll

> ID：16087227
> 
> 赞同：0
> 
> 时间：2013-04-18T15:35:04.867
> 
> 标签：python, python-3.x, exe, cx-freeze

我已经使用 cx_Freeze 成功地将我的 Python 3.3 应用程序冻结到一个 .exe 中，并且它运行良好，直到我将包含图像文件等的封闭文件夹移动到另一个文件夹或尝试在另一台（Windows）计算机上运行它。Windows 错误然后说：

```
The application has failed to start because the extension python33.dll was not found. 
```

有什么办法可以解决这个问题吗？

# java - 如何理解我系统上显示的 ip？

> ID：16087228
> 
> 赞同：-1
> 
> 时间：2013-04-18T15:35:11.330
> 
> 标签：java, networking

嗨，实际上我没有配置任何静态 ip，也没有连接到任何网络。但是总是显示这个“169.254.74.143”ip。当我在命令提示符下使用“ipconfig”时，这也不会在我的系统上显示任何 ip。

实际上，我正在从我的系统发送一个 udp 数据包（java），并且我正在同一系统上从该数据包中获取 ip，但它显示了上面的 ip。我不确定这是怎么发生的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T15:39:51.223

您的 IP 地址已由您的操作系统自动配置（我想您正在运行 Windows？）

[http://en.wikipedia.org/wiki/Zero_configuration_networking](http://en.wikipedia.org/wiki/Zero_configuration_networking)

编辑：实际上，它更具体地称为[链接本地寻址](http://en.wikipedia.org/wiki/Link-local_address)

# python - python/django：如何检测和避免导入名称冲突？

> ID：16087232
> 
> 赞同：2
> 
> 时间：2013-04-18T15:35:16.240
> 
> 标签：python, django, import, conflict

我有一个我需要一些帮助。在我的 django 应用程序中，我有以下代码：

```
from django.template import Context

render_dict = {'scan': oval_scan, 'user': user, 'vulns': oval_vulns, 'asset_vulns': asset_vulns}
report_html = get_template('oval_report.html').render(Context(render_dict)) 
```

但是，django 给了我以下错误：

```
Traceback (most recent call last):
  File "/usr/local/lib/python2.7/dist-packages/django/core/handlers/base.py", line 111, in get_response
    response = callback(request, *callback_args, **callback_kwargs)
  File "/home/nopsec/nopsecvrm/apps/pegasus/views.py", line 2359, in ovalReport
    report_html = get_template('pegasus/oval_report.html').render(Context(render_dict))
  File "/usr/local/lib/python2.7/dist-packages/django/template/base.py", line 121, in render
    context.render_context.push()
AttributeError: 'Context' object has no attribute 'render_context' 
```

我记得我曾经遇到过这个错误，因为`Context`另一个导入包中的其他地方还有另一个错误使用，所以我像这样更改我的代码（非常丑但有效）：

```
import django

render_dict = {'scan': oval_scan, 'user': user, 'vulns': oval_vulns, 'asset_vulns': asset_vulns}
report_html = get_template('report.html').render(django.template.Context(render_dict)) 
```

我的问题是：如何`Context`通过查看回溯错误来确定 django 错误地使用了哪个？我该如何解决这种情况？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T15:38:52.000

`Context`一种解决方案是通过为您导入的别名来避免冲突：

```
from django.template import Context as template_context 
```

然后，当您需要您尝试使用的版本时，只需参考 template_context 即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T15:40:29.227

使用模块中的`__import__`函数`__builtins__`：

```
#Detecting name conflicts:
module_name_as_string = 'mymodule'

if module_name_as_string in globals(): #we have name collision
   try:
      custom_module = __import__(module_name_as_string)
   except ImportError:
      pass 
```

# css - 带有类 foo 的任何元素标签的 CSS 选择器

> ID：16087233
> 
> 赞同：1
> 
> 时间：2013-04-18T15:35:16.837
> 
> 标签：css

代码会像

```
<label for="bar">Baz: <input type="text" name="bar" id="bar" class="foo"/></label> 
```

我想为标签设置样式如何使用 CSS 进行选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T15:53:58.387

目前无法单独使用 css 选择父元素。这将在即将到来的[css 4](http://coding.smashingmagazine.com/2013/01/21/sneak-peek-future-selectors-level-4/)中成为可能（感谢 andyB）

所以你真的有另外两个选择：

1.  修改 html 以便您在父级上有一个句柄，以便您可以设置它的样式。

2.  使用 javascript 根据子项的 css/id/name 属性选择父项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T15:41:51.577

像这样：

```
label[for="bar"] { color: red; } 
```

这将针对“bar”的标签。它是一个 CSS2.1 选择器，它适用于除 IE6 之外的所有设备。

请参阅 jsFiddle 上的示例：http: [//jsfiddle.net/TheNix/kTwDN/](http://jsfiddle.net/TheNix/kTwDN/)

# android - 如何将文件夹与应用程序一起推送到用户的手机中？

> ID：16087238
> 
> 赞同：0
> 
> 时间：2013-04-18T15:35:35.767
> 
> 标签：android, directory

当用户安装我的应用程序时，我还想将一个文件夹推送到他们的手机中。这可能吗？例如，我有一个包含音乐样本的文件夹，我希望这个文件夹也被下载并保存在用户的手机中。请帮助我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T15:38:38.607

1.  在您的应用程序第一次运行时下载它
2.  将其与应用程序本身捆绑在`/assets`or`/res/raw`文件夹中
3.  使用[apk 扩展文件](http://developer.android.com/google/play/expansion-files.html)将其与应用程序的其余部分一起下载到用户的设备上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T15:39:40.647

您可以将其放入资产中，然后将其安装在应用程序的数据文件夹中。如果您希望它在 sdcard 中，您可以在应用程序第一次运行时运行下载。

# php - 使用 PHP 和表单值的多重定向表单。我搞不清楚了

> ID：16087240
> 
> 赞同：0
> 
> 时间：2013-04-18T15:35:43.513
> 
> 标签：php, forms

我想要工作的是，当用户填写表格时，如果他们在下拉菜单中选择一项服务以及主页单选按钮并输入正确的圣地亚哥邮政编码，则将他们带到该页面中落下。如果他们没有输入正确的圣地亚哥邮政编码，它会自动将他们重定向到全国页面。我遇到的问题是单选按钮。我需要做的是，当用户从列表中选择一个下拉菜单并选择 office 单选按钮时，它将他们重定向到 office 版本，无论该下拉菜单是什么。他们还必须在此处输入正确的 SD zip，否则将被发送到全国页面。我真的需要帮助才能正确重定向，我以为我用当前的代码就可以了，但我只是被重定向到主页下拉选择，即使选择了办公室单选按钮。有人可以请帮我解决这个问题，我现在非常迷茫，想不出为什么它不起作用。谢谢

形式：

```
<div class="home-form">
    <form method='get' id='gform_1'  action='http://50.22.79.62/~pftech/form-handler/'>
        <div class="serviceinput"
            <label for="services">Services: </label>
            <select id="selection" name="selection">
                <option value='-1'>Select a Service</option>
                <option value="0">Water Delivery</option>
                <option value="1">Coffee Services</option>
                <option value="2">Water Filtration</option>
            </select>
        </div>
        &nbsp;
        <div class="zipcode">
            <label for="zip">Zip Code: </label>
            <input name="zip" type="text" maxlength="5" id="zip" />
        </div>
        <div class="frontradio">
            <input name="home" type="radio" id="homeradio" />
            <div class="homelabel"> 
                <label for="homeradio">Home</label>
            </div>
            <input name="home" type="radio" id="officeradio" />
            <label for="officeradio">Office</label>
        </div>
        <div class="homebutton">
            <input type='submit' id="submithome" name="did_submit" value="Get Started!">
        </div>
    </form>
</div> 
```

表单处理程序：

```
<?php
/**
 * Template Name: Form Handler
 */
?>  
 <?php
    if(isset($_GET['zip'])){
        $sandiego = array('91911', '91914', '91915', '91932', '91942', '91945', '91950', '92014', '92025', '92027', '92029', '92037', '92064', '92065', '92067', '92071', '92075', '92101', '92102', '92103', '92104', '92105', '92106', '92107', '92108', '92109', '92110', '92111', '92113', '92114', '92115', '92116', '92117', '92118', '92119', '92120', '92121', '92122', '92123', '92124', '92126', '92127', '92128', '92129', '92130', '92131', '92132', '92134', '92135', '92139', '92140', '92145', '92147', '92154', '92173', '92562', '92563', '92590', '92591', '92592', '92596');
      if (in_array($_GET['zip'], $sandiego)){
          $urls = array();
            if($_GET["home"] == 1) { 
                $urls[] = "http://50.22.79.62/~pftech/office-delivery/";
                $urls[] = "http://50.22.79.62/~pftech/office-delivery/";
                $urls[] = "http://50.22.79.62/~pftech/office-delivery/";
            } else {
                $urls[] = "http://50.22.79.62/~pftech/water-delivery-service/";
                $urls[] = "http://50.22.79.62/~pftech/coffee-delivery/";
                $urls[] = "http://50.22.79.62/~pftech/water-filtration-systems/";
            }
            if($_GET['selection'] < 3 && $_GET['selection'] >= 0) {
                $URL = $urls[$_GET['selection']];
                header("Location: $URL?zip=$_GET[zip]");
            } else header("Location: http://50.22.79.62/~pftech/nationwide/"); 
        } else {
            header("Location: http://50.22.79.62/~pftech/nationwide/");
        }
    }
    exit;
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T15:48:25.333

从您的 HTML 表单中：

```
<input name="home" type="radio" id="homeradio" />
...
<input name="home" type="radio" id="officeradio" /> 
```

您的单选按钮没有 value 属性。尝试类似：

```
<input name="home" type="radio" value="homeradio" />
...
<input name="home" type="radio" value="officeradio" /> 
```

然后在你的 PHP 中：

```
if($_GET["home"] == "homeradio") { 
    // home URLs here
    $urls[] = "http://50.22.79.62/~pftech/office-delivery/";
    $urls[] = "http://50.22.79.62/~pftech/office-delivery/";
    $urls[] = "http://50.22.79.62/~pftech/office-delivery/";
} elseif($_GET["home"] == "officeradio") { 
    // office URLs here
    $urls[] = "http://50.22.79.62/~pftech/water-delivery-service/";
    $urls[] = "http://50.22.79.62/~pftech/coffee-delivery/";
    $urls[] = "http://50.22.79.62/~pftech/water-filtration-systems/";
} else {
    // any other options can go here
} 
```

# php - jQuery中的分隔符

> ID：16087242
> 
> 赞同：2
> 
> 时间：2013-04-18T15:35:45.263
> 
> 标签：php, javascript, jquery, html

在 PHP 中，我可以：

```
$number = 1234.56;
$nombre_format_francais = number_format($number, 2, '.', ' '); 
```

这告诉我：

```
1 234.56 
```

我怎样才能在 jQuery 中实现它？我想添加分隔符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T17:06:34.577

jQuery 库没有数字本地化功能，但有[Globalize.js](https://github.com/jquery/globalize)，它最初是作为 jQuery 的本地化插件开发的，但后来改为独立库。它包括许多语言的预定义数字格式以及修改或添加它们的简单方法。

使用 Globalize.js，您可以例如首先调用`Globalize.culture('fr')`，然后在此之后`Globalize.format(number)`生成按照法语惯例格式化的数字。它将产生*正确*的格式，例如“1 234,56”（法语使用小数点逗号，而不是小数点）。

还有其他类似用途的库。它们之间的选择取决于项目中本地化的范围——是数字格式本地化，还是更广泛的本地化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T15:39:58.537

我做了一些搜索，但这确实是我能想到的，因为没有内置方法：

创建号码

```
var num = 1234.56; 
```

格式化小数位 - 仅需要较长的小数...

```
var result = num.toFixed(2); 
```

添加空格

```
result = numberWithSpace(result);

function numberWithSpace(x) {
    return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, " ");
} 
```

# [工作小提琴](http://jsfiddle.net/xms6S/)

有关原始功能，请参[见此答案](https://stackoverflow.com/a/2901298/973578)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T15:40:02.167

```
function addSpaces(nStr)
{
    nStr += '';
    x = nStr.split('.');
    x1 = x[0];
    x2 = x.length > 1 ? '.' + x[1] : '';
    var rgx = /(\d+)(\d{3})/;
    while (rgx.test(x1)) {
        x1 = x1.replace(rgx, '$1' + ' ' + '$2');
    }
    return x1 + x2;
} 
```

只是从[这里拿来](http://www.mredkj.com/javascript/numberFormat.html)并改编它。

# java - 阻止从输入 TCP 套接字读取

> ID：16087248
> 
> 赞同：1
> 
> 时间：2013-04-18T15:35:59.780
> 
> 标签：java, sockets, tcp, network-programming

我目前正在为分布式系统课程做一个项目，我们必须在 Java 中实现一个小型传感器网络。传感器每隔 x 秒将温度发送到一个管理节点（也是一个传感器），该节点记录它们。根据请求，用户节点连接到管理节点并接收检测到的温度的平均值。问题之一是管理节点可能“失败”。在失败之前，它实际上会向用户节点发送一条消息，该用户节点需要将一个特殊的数据包发送到将成为新管理员的其他常规节点之一。用户节点通过 TCP 连接与管理员通信，通过 TCP 连接发送“请求”数据包并接收包含温度的数据包。我目前正在使用 java.net.socket 来实现这一点。

当管理员失败时，问题就来了。在正常情况下，可以创建一个新线程来等待来自服务器的“失败”消息，然后使用新选择的管理节点创建一个新套接字。但是，如果管理员在发送消息以响应用户请求之前失败，则用户节点将无限期地等待，因为它正在从输入流中读取。

特别是，我使用以下几行来创建套接字和输入流：

```
 this.socket = new Socket(this.serverAddress,this.serverPort);
   this.in = new DataInputStream(socket.getInputStream()); 
```

并在 while 循环中使用以下行来读取响应温度。

```
 String data = in.readUTF(); 
```

您建议如何处理这种情况？

此外，我正在考虑使用相同的 TCP 连接从管理节点接收“失败”消息。我该如何支持这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T22:21:44.350

只需通过 Socket.SetSoTimeout() 设置读取超时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T16:02:26.437

您是否考虑过研究 Apache MINA？它是 Java NIO 的库。

Java NIO 是一个非阻塞套接字包，包含与 TCP 或 UDP 通信的类

# asp.net-mvc-3 - 使用 asp_regiis.exe 保护连接字符串

> ID：16087260
> 
> 赞同：0
> 
> 时间：2013-04-18T15:36:17.257
> 
> 标签：asp.net-mvc-3, iis-7, connection-string, security

使用 asp4 mvc 3 构建 web 应用程序。

我正在公司防火墙外部署一个 Web 应用程序，因此我想以某种方式保护与数据库的连接字符串。连接字符串在 Web 配置中。

1.  我什至需要做任何事情吗？意思是已经有内置的东西，它将位于 Windows Server 2008 上，使用 IIS7。

2.  我一直在研究的一个选项是使用 asp_regiis.exe 工具，但由于教程中的信息冲突，我有疑问：

    一个。如果代码在我的盒子上并且我运行该工具，我需要在它部署到服务器后重新运行它吗？

    湾。有些教程说解密是内置在框架中的，所以一旦我使用该工具进行一次加密，我就不用担心了，但是一两次谈论如何解密，所以我不确定是否自动化。是吗？

    C。我是否必须在服务器上进行任何设置，例如使用加密的 Web 配置文件告诉应用程序池？

3.  有没有办法只加密密码？也许在创建 model.edmx 文件时？如果有的话，我很乐意删除它并重新创建它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-12T22:33:31.393

最好的选择是使用 aspnet_regiis 工具来加密配置，按照[演练：创建和导出 RSA 密钥容器](http://msdn.microsoft.com/en-us/library/2w117ede%28v=vs.100%29.aspx)。

要运行您的列表：

1.  是的
2.  不错的选择！
    *   一个。您需要在服务器上导入密钥容器，以便它可以解密配置。请记住授予 apppool 用户对容器的访问权限。
    *   湾。是的，当您的应用程序启动时，解密是自动的。
    *   C。除了部署加密配置和导入密钥容器之外，没有。
3.  这会很麻烦，因为您必须自己管理加密密钥。改为使用加密的配置部分。

# ios - 如何在 UIImage 上的给定颜色区域周围获取 UIBezierPath

> ID：16087262
> 
> 赞同：2
> 
> 时间：2013-04-18T15:36:21.520
> 
> 标签：ios, uibezierpath

我有一个 UIImage，大部分是白色的。当用户点击屏幕时，我想获得点击区域的轮廓。例如，如果他点击图像上的一个白色区域，我需要一个围绕该区域的 UIBezierPath。关于我应该如何做到这一点的任何建议？提前致谢！

# asp.net-mvc - 使用一个模型来获取多种数据变化

> ID：16087263
> 
> 赞同：0
> 
> 时间：2013-04-18T15:36:22.530
> 
> 标签：asp.net-mvc, linq, razor

我有一个模型 IPACS_Master_List，它是数据库中名为 IPACS_Master_List 的表的完整映射。

这是我的控制器：

```
public ActionResult Index()
        {
            var docs = db.IPACS_Master_List;

            return View(docs);
        } 
```

在我看来，我正在显示整个表格。在我看来，我正在尝试添加一个`DropDownList`将填充每个部门的内容。

我需要传递整个表格，因为这是页面的默认视图，能够查看表格中的所有内容。我在尝试获取不同的部门列表并将其放入`DropDownList`. 我尝试了很多不同的方法，并且不断地撞到一堵砖墙。在这一点上，我将采用几乎任何有效的方法。

还了解我对 MVC、LINQ 和 Razor 非常陌生，因此非常感谢您提供额外的解释。

默认视图完美运行，它正确显示所有信息。但我什至似乎无法填充下拉列表。

----- 编辑 #1 ----

这是我获取不同部门列表的一种方式。不确定这是否是正确的方法，但希望它有所帮助。

```
 var departments = db.IPACS_Master_List.Where(x => (x.department != null))
               .Select(s => new SelectListItem
                {
                    Value = s.department,
                    Text = s.department
                })
                .Distinct(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T15:58:43.000

在你的模型中，我假设你有这样的东西：

```
public class YourModel{
 public IEnumerable<SelectListItem> Departments{get;set;}
 public string SelectedDepartment{get;set;}

} 
```

在你看来应该有这样的东西来呈现

```
@Html.DropDownListFor(model => model.SelectedDepartment, new SelectList(@Model.Departments, "key", "value", Model.SelectedDepartment)) 
```

在您的控制器中，您将拥有类似的东西

```
YourModel model=new YourModel();
model.Departments = db.IPACS_Master_List.Where(x => (x.department != null))
               .Select(s => new SelectListItem
                {
                    Value = s.department,
                    Text = s.department
                })
                .Distinct();
return View(model); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T16:03:16.563

我能够让它工作，通过一个教程网站偶然发现了答案。

我的控制器是：

```
public ActionResult Index()
        {
            var docs = db.IPACS_Master_List;

            ViewBag.Departments = db.IPACS_Master_List.Where(x => (x.department != null)).Select(s => new SelectListItem
            {
                Value = s.department,
                Text = s.department
            })
            .Distinct();

            return View(docs);
        } 
```

我将此添加到视图中。

```
@Html.DropDownList("Departments", string.Empty) 
```

# utf-8 - 字符编码 - 从网络复制/粘贴

> ID：16087272
> 
> 赞同：1
> 
> 时间：2013-04-18T15:36:44.163
> 
> 标签：utf-8, python-3.x, ansi

这更像是一个关于字符编码的教育问题（这里是爱好者编码器） - 但我遇到了这个具体问题：

1）我在python 3中编写了一个愚蠢的程序，在编辑器中我总是使用UTF-8（这里是德语键盘）。

2）与感兴趣的家庭成员分享我的“创作”......我将代码粘贴到私人Pastebin.com（说明：将（原始）文件复制/粘贴到文本文件中并将文件扩展名更改为.py）

麻烦从这里开始：

3）按照这些说明将不允许运行程序。

4）我不确定为什么它不起作用，但由于字符编码现在是 ANSI，我知道这是问题所在。在代码编辑器中将编码改回 UTF-8 可以解决问题。

问题是：

a) 为什么要改为ANSI？

b）为什么它在 ANSI 中无论如何都不起作用（因为仅凭肉眼，整个代码看起来都一样）

c) 如何保存 UTF-8 编码？我的意思是：我的家人不知道如何更改编码......（我知道......只是将可执行文件发送给他们。但正如我所说......教育）

编辑：澄清 python-3.x 版本

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T16:02:55.660

当他们将文本复制粘贴到编辑器并按保存时，这就是麻烦开始的地方。保存时，您必须指定编码，或者受制于“ANSI”之类的默认值。如果不使用某种编码，则无法保存文本文件。

它可能不起作用，因为您已在文件中声明`# -*- coding: utf-8 -*-`，将文件保存在“ANSI”中的文本编辑器对此一无所知，当然保持原样。因此解析器将尝试以 UTF-8 格式读取文件并失败，因为它不是 UTF-8。

您可以只`\uxxxx`对源中的非 ASCII 字符使用转义。

所以而不是：

```
str = u"€" 
```

做

```
str = u"\u20AC" 
```

# c# - 防止使用 MVC 的 HiddenFor 函数

> ID：16087274
> 
> 赞同：0
> 
> 时间：2013-04-18T15:36:52.503
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4, html-helper, html.hiddenfor

我在[此处](https://stackoverflow.com/questions/11190989/hiddenfor-helper-is-pulling-id-from-action-parameter-not-the-viewmodel)和[此处](https://stackoverflow.com/questions/8748940/hiddenforx-x-id-is-being-populated-by-the-urlparameter-instead-of-the-viewm)和[此处](https://stackoverflow.com/questions/4710447/asp-net-mvc-html-hiddenfor-with-wrong-value?rq=1)记录了问题，[尤其是在](https://stackoverflow.com/questions/594600/possible-bug-in-asp-net-mvc-with-form-values-being-replaced/619762#619762)此处，在 ASP.NET MVC4 视图中，html 帮助器函数`@Html.HiddenFor(m => m.ID)`将使用“错误”数据并导致数据损坏。

这是一个巨大的问题，公认的“解决方案”是简单地意识到这一点并围绕它进行设计。我认为这是一个糟糕的解决方案。（顺便说一句，我们使用这样的东西来代替`<input type="hidden" value="@Model.ID" />`：）

每隔几个月，我或一位同事就会忘记并使用那个 html 帮助程序，在我们追查问题之前，一切都崩溃了……再一次。

我怎样才能避免使用这个功能，以避免将来出错？
- 这不是我们的代码，所以我们不能标记它`[Obsolete]`
- 我们可以覆盖`HtmlHelper`，但是为了消除一个功能需要做很多工作
-**我可以编写一个单元测试来从视图中挑选出这段代码吗？**（如果检测到该呼叫，则测试失败）
- 其他想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T15:47:17.377

这不是一个“问题”，而是它*应该*工作的方式。而且不只是 HiddenFor 会这样做，每个助手都会这样做。这就是 MVC 设计的工作方式。您似乎不了解 MVC 的工作原理是真正的问题。

这是 ModelState 子系统的一部分，您最好知道它是如何工作的。是的，这并不总是直观的，但你实际上知道事情是如何运作的比假装它们不存在要好得多，因为你最终会以其他方式被其他帮助者咬伤。

但是，如果您选择其他方式，我建议您配置 StyleCop 来处理这个问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T15:45:50.887

如果你想要一些静态分析工具，你可以通过 [Visual Studio Gallery查看](http://visualstudiogallery.msdn.microsoft.com/1ec7db13-3363-46c9-851f-1ce455f66970)[CodeContracts](http://research.microsoft.com/en-us/projects/contracts/) + 还有其他工具（据我所知，付费）。

主要思想是：您通过代码中的属性条件定义，并且在二进制生成之前或在运行时通过调用关联方法来验证条件。但考虑到您不允许或不能更改使用该功能的代码这一事实，可能是

[罗斯林](http://msdn.microsoft.com/en-us/vstudio/roslyn.aspx)会更适合你。所以你可以调查你的`AST`，看看是否有一些关于那个不受欢迎的功能的调用。

注意：取决于架构，它可能会成为相当复杂的问题，但是，顺便说一下，这些是您可以考虑 imo 的选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-01T14:26:10.057

我不确定这是否会有所帮助，但我在代码中删除 HiddenFors 所做的是实现一种 ViewState。模型被序列化到客户端，我的模型绑定器被设置为反序列化。我将代码放在[https://github.com/willseitz/ModelViewState](https://github.com/willseitz/ModelViewState)。这可能会帮助您想出一个通用的解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-04T11:51:25.963

Erik 是对的，它应该在进行 HTTP POST 时像那样工作。这是一个很好的解释：[博客链接](http://blogs.msdn.com/b/simonince/archive/2010/05/05/asp-net-mvc-s-html-helpers-render-the-wrong-value.aspx)。该博客提出了几种解决方案，包括您的 Bobby B :-)

引自博客：“ASP.NET MVC 假设如果您正在呈现一个视图以响应 HTTP POST，并且您正在使用 Html 帮助程序，那么您很可能会重新显示一个验证失败的表单。因此，Html Helpers 在查看 Model 之前实际上会在 ModelState 中检查要在字段中显示的值。这使他们能够重新显示用户输入的错误数据，并在需要时显示匹配的错误消息。... Html助手（即 Html.Hidden 和 Html.TextBox）首先检查 ModelState ......因此显示操作接收到的值，而不是我们修改的值。”

感谢 nemesv 和 Rhys Stephens（[stackoverflow 链接](https://stackoverflow.com/questions/8748940/hiddenforx-x-id-is-being-populated-by-the-urlparameter-instead-of-the-viewm)）

# internet-explorer-8 - IE9切换到IE8预览会导致崩溃

> ID：16087285
> 
> 赞同：0
> 
> 时间：2013-04-18T15:37:13.900
> 
> 标签：internet-explorer-8, crash, internet-explorer-9, web-developer-toolbar

测试链接： http: [//leongaban.com/_projects/defakto/CDS/](http://leongaban.com/_projects/defakto/CDS/)

我遇到了一个奇怪的问题，以前我可以在 IE9、8 和 7 中预览我的网站，这让我可以为每个浏览器版本编写特定的样式表。

然而，今天早上，当我使用 IE 的 webdeveloper 工具 (F12) 切换到 IE8 或 7 时，浏览器会挂起，并显示一般错误消息“mysite is not respond”。IE9一切正常。

不知道发生了什么，我禁用了我的 IE8 样式表，甚至注释掉了我的 javascript 文件，仍然是同样的问题。

IE9版本：9.0.8112.16421

我也在使用 Bootstrap 2.3.1

以前有人经历过吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T14:11:27.347

我发现了问题所在，我使用 css3-mediaqueries.js 来支持 IE8 及以下版本的媒体查询，我切换到 respond.min.js 并删除了旧的 js，现在一切正常！

**Respond.js** [https://github.com/scottjehl/Respond](https://github.com/scottjehl/Respond)

# wcf - svcutil.exe 错误：从 'serializer:DataContractSerializer' 读取的输入与其他选项不一致

> ID：16087286
> 
> 赞同：0
> 
> 时间：2013-04-18T15:37:18.157
> 
> 标签：wcf, xml-serialization

我正在尝试使用 WCF 进行合同优先开发。我有 XSD 架构。现在我正在尝试生成数据合同。以下命令是出自本书 Microsoft Windows Communication Foundation 4.0 Cookbook for Developing SOA Applications 但它会生成标题中指定的错误。我究竟做错了什么？

```
 C:\dev\GlobalwareQualityControlService\Schema>svcutil.exe /target:code /dataCont
ractOnly serializer:DataContractSerializer /importXmlTypes CarBookingRQ.xsd 
```

Microsoft (R) 服务模型元数据工具 [Microsoft (R) Windows (R) Communication Foundation，版本 4.0.30319.1] 版权所有 (c) Microsoft Corporation。版权所有。

Microsoft (R) 服务模型元数据工具 [Microsoft (R) Windows (R) Communication Foundation，版本 4.0.30319.1] 版权所有 (c) Microsoft Corporation。版权所有。

错误：从 'serializer:DataContractSerializer' 读取的输入与其他选项不一致。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T19:37:08.780

答案是序列化程序前面需要一个斜杠。

# emacs - emacs：调用 chmod 导致“文件不再可读”警告

> ID：16087288
> 
> 赞同：1
> 
> 时间：2013-04-18T15:37:26.477
> 
> 标签：emacs

我正在编写一个函数，旨在使当前缓冲区中的任何文件都可写，而不会提示其名称或模式（我总是希望为 644）。我还希望缓冲区自动刷新以反映其内容现在可写的事实。

我的 .emacs 文件中有以下代码：

```
;; from http://www.stokebloke.com/wordpress/2008/04/17/emacs-refresh-f5-key/
(defun refresh-file ()
  "Refresh the buffer from the disk (prompt if modified)."
  (interactive)
  (revert-buffer t (not (buffer-modified-p)) t))

(defun my-make-writable ()
   "make file writable to owner"
   (interactive)
   (chmod buffer-file-name 644)
   (refresh-file)) 
```

但是，当我执行该函数时，emacs 在 minibuffer 中显示以下错误消息：

**文件文件*名*不再可读**

这是相当令人不安的。但是，我仍然可以执行“chmod”命令来使文件可读可写。

我该怎么做才能使我的功能正常工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T15:53:05.337

unix 权限位以八进制表示，您输入的是十进制数。

您正在将文件模式设置为 1204（即“sticky-bit，用户可以写入，组没有权限，其他人都可以读取）。如果您使用`(chmod buffer-file-name #o644)`，`(chmod buffer-file-name 420)`您可能会得到您期望的结果。

# fft - Ron Mayer FFT 卷积算法

> ID：16087290
> 
> 赞同：2
> 
> 时间：2013-04-18T15:37:27.307
> 
> 标签：fft, convolution

有人知道 Mayer FFT 的实现吗（我不必花很多时间来研究代码）？

我正在尝试执行卷积，并且 ifft 似乎产生了我所说的“镜像”输出。换句话说，我的内核+信号长度被限制为 N/2，并且占据 n=0...N/2 的任何内容都反映在 n=N...N/2 左右。就负频率而言，它有点像我对 FFT 的期望……除了它就像是负时间的镜子。

这是我的卷积代码：

```
 void convolve(struct cxType* data,  struct cxType* kernel, int size) 
    {
    int i,j;
    int wrksz = size;
    float gain = 1.0f/((float) wrksz);

    mayer_fft(wrksz, data->re, data->im);
    mayer_fft(wrksz, kernel->re, kernel->im);

    for(i=0;i<wrksz;i++)
    {
    data->re[i]*=kernel->re[i]*gain;
    data->im[i]*=kernel->im[i]*gain;
    }

    mayer_ifft(wrksz, data->re, data->im);
} 
```

使用 gnu Octave（不熟悉的您的 MATLAB 语法等效）执行基本相同的操作会产生预期的结果，包括允许我在信号输出中占用 M+N-1：

```
fs=48000;
Ts = 1/fs;
NN =  1024
sincsz = floor(NN/4);
sigstart = floor(NN/16);
sigend = floor(NN/2);
dpi=2*pi;

%window func
tau=(1:sincsz)/sncsz;
window=0.5*(1.0 - cos(dpi*tau));
%plot(tau,window)

%sinc filter kernel
fc=5050;
wc=dpi*fc;
Ts=1/fs;
segTime=Ts*sincsz;
t0=-segTime/2;
t=Ts*((1:sincsz) - 1) + t0 ;

s=zeros(1,sincsz);
s=window.*sin(wc*t)./(wc*t);
s(sincsz/2+1) = 1;

%plot(t,s)
fund = 1650;
tt = (1:NN)*Ts;
signal = sin(dpi*tt*fund) + sin(dpi*tt*2*fund) + sin(dpi*tt*3*fund) + sin(dpi*tt*4*fund) + sin(dpi*tt*5*fund);
signal(1:sigstart) = signal(1:sigstart)*0;
signal(sigend:NN) = signal(sigend:NN)*0;
%plot(tt,signal)

h=zeros(1,NN);
h(1:sincsz) = s(1:sincsz);

H=fft(h);
X=fft(signal);

Y=H.*X;

y=ifft(Y);

plot(real(y)) 
```

等效信号和 FIR 内核合成在 C 中实现（未显示）。我正在使用 gnuplot 来显示 C 实现的结果，所以我知道过滤器内核和信号的实现与我使用 Octave 所做的相同。

据我所知，正在做的唯一区别是 FFT 实现。有人知道这些结果是否是我对 FFT 算法的总体理解的一个基本问题，还是来自 Ron Mayer 编写的这个古老代码的基于 FHT 的实现？你可以去他的存档网站获取我正在使用的代码： [http ://reocities.com/researchtriangle/8869/fft_summary.html](http://reocities.com/researchtriangle/8869/fft_summary.html)

现在，如果我对数据块执行 FFT，然后执行 ifft，我会按预期取回原始数据。如果我以任何方式对数据进行光谱修改，我会得到意想不到的结果。

我曾经尝试使用这个 Mayer FFT 算法来替换 S. Bernsee 的音高变换算法中使用的算法，但这根本不起作用。我使用了 fftw3，并且该代码按预期工作。我很想用 fftw3 尝试同样的基本算法，看看会发生什么。

我不知道是我是否误解了一些导致我错误应用 rmayer 实现的基本原理，或者这只是我必须解决的一个简单的工件（也就是说，使用我期望的两倍大小的 FFT） .

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T03:40:35.697

嗬！这就是忘记在行尾加分号之类的事情之一。卷积是频域中的复数乘法——我正在做一个简单的逐点乘法。这是更正后的代码，它显示了复数乘法。当然，有 C 和 C++ 结构和宏/例程可以做到这一点，但这里是用于教学目的的蛮力方法：假设 struct cxType 定义为：

```
struct cxType {
float* re;
float* im;
};  //and such a struct should have mem allocated before sending it into convolve()

    void convolve(struct cxType* data,  struct cxType* kernel, int size) 
        {
        int i,j;
        int wrksz = size;
        float gain = 1.0f/((float) wrksz);
        float a,b,c,d;

        mayer_fft(wrksz, data->re, data->im);
        mayer_fft(wrksz, kernel->re, kernel->im);

        for(i=0;i<wrksz;i++)
        {
        a=data->re[i];
        b=data->im[i];
        c=kernel->re[i];
        d=kernel->im[i];
        data->re[i]=(a*c - b*d)*gain;
        data->im[i]=(a*d + b*c)*gain;
        }

        mayer_ifft(wrksz, data->re, data->im);
    } 
```

现在上面的代码片段在被调用时可以工作，并且不会产生我所说的这些奇怪的镜像效果。至于我的 Matlab 代码，它之所以有效，是因为 Octave/Matlab 将复数乘法的细节隐藏在其方便的语法 H.*X 后面。

通过将实部和虚部分别相乘和组合以模仿我在 C 中的错误，我能够在 Octave 中重现我的问题，然后通过执行与上述类似的操作来修复它。也就是说，rmayer 的 FFT 实现没有什么独特之处……只有我的卷积实现有问题。

# c++ - 这个短程序是合法的 C++ 吗？

> ID：16087294
> 
> 赞同：4
> 
> 时间：2013-04-18T15:37:38.150
> 
> 标签：c++, strict-aliasing

在解决[http://cppquiz.org](http://cppquiz.org)上的测试时，我发现了这段有趣的代码：

```
#include <iostream>

int f(int& a, int& b) {
    a = 3;
    b = 4;
    return a + b;
}

int main () {
    int a = 1;
    int b = 2;
    int c = f(a, a);// note a,a
    std::cout << a << b << c;
} 
```

我的问题是这个程序是合法的 C++ 还是不是？我担心严格的混叠。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-18T15:43:59.767

你提到了严格的别名——但[严格的别名与不同类型的别名有关](https://stackoverflow.com/q/98650/1968)。它不适用于这里。

没有禁止此代码的规则。这是以下代码的道德等价物：

```
int x = 42;
int& y = x;
int& z = x; 
```

或者，更相关的是，它相当于让多个子节点引用树数据结构中的同一个父节点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T15:42:21.543

是的，这是合法的。

我只能通过引用大部分 C++ 标准文本来正式*证明这一点。*

您正在传递两个引用，这两个引用恰好引用同一个对象，这很好。然后，您依次为该单个对象分配新值。也很好。

# javascript - 用数组行数据填充 div 内容，通过按钮单击选择 - 仅返回最后一行

> ID：16087296
> 
> 赞同：3
> 
> 时间：2013-04-18T15:37:43.333
> 
> 标签：javascript, jquery, arrays, onclick

我已经去掉了我的页面上所有的花里胡哨，试图让它工作——我有 5 个按钮和一个 DIV。该页面从谷歌电子表格中读取数据行并填充数组 data[]。

```
<html>
<head>

<script type="text/javascript" src="http://www.google.com/jsapi"></script>
<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript">

  google.load('visualization', '1', {'packages': ['table']});
  var i, j, x, k;
  var data = new Array();
  var headers = new Array();
  var numRows, numCols;

  function onldQuery() {

    var url = 'http://spreadsheets.google.com/tq?key=xxxxxx&pub=0', query = new google.visualization.Query(url); 
    query.setQuery('SELECT * WHERE B != "" AND V> 0 ORDER BY V DESC LIMIT 20');
    query.send(handleOnldResponse);
  }

  function handleOnldResponse(response) {
    if (response.isError()) {
      alert('Error in query: ' + response.getMessage() + ' ' + response.getDetailedMessage());

      return;
    }

    numRows = response.getDataTable().getNumberOfRows();
    numCols = response.getDataTable().getNumberOfColumns();

    console.log(numRows);
    for (i = 0; i < numRows; i++) {
      for (j = 0; j < numCols; j++) {
        headers[j] = response.getDataTable().getColumnLabel(j);
        data[i,j] = response.getDataTable().getValue(i, j);
        console.log(data[i,j]);
      }
    }

    loadData(0);
  }

  function loadData(x) {
    console.log(x);
    console.log(data[x,1]);
    console.log(numCols);

    $('#test_card').html("");

    for (k = 0; k < numCols;k++) {
      $('#test_card').html($('#test_card').html() + data[x,k] + "<br>");
    }
  }

</script>
</head>

<body onload="onldQuery()">
<button id="btn1" onclick="loadData(1);">1</button>
<button id="btn2" onclick="loadData(2);">2</button>
<button id="btn3" onclick="loadData(3);">3</button>
<button id="btn4" onclick="loadData(4);">4</button>
<button id="btn5" onclick="loadData(5);">5</button>

<div id="test_card">

</div>

</body>
</html> 
```

它根据控制台转储将数据正确加载到`data[]`数组中，但我无法弄清楚为什么它只会在 a：加载页面和 b：尝试将不同的行加载到DIV 通过单击其中一个按钮。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T15:39:20.280

尝试使用 .append()

```
$('#test_card').append(data[x,k] + "<br>"); 
```

# javascript - 我如何确定不会错过 WebSockets 上的“打开”事件？

> ID：16087297
> 
> 赞同：1
> 
> 时间：2013-04-18T15:37:45.433
> 
> 标签：javascript, websocket

这实际上是一个更抽象的问题。我如何确保不会错过 WebSocket 的 open 事件？据我了解，只要我调用构造函数，浏览器就会开始建立连接，所以如果事情不顺利，可能会在连接这些事件的处理程序之前触发一个打开（或错误）事件。

```
var socket = new WebSocket("ws://www.example.com");
/*Because I'm an unlucky guy, the open-event fires before the next line*/
socket.addEventListener("open", function(event){...}); 
```

在这种情况下，我的 open-Handler 永远不会被调用。这很可能从来都不是真正的问题，因为建立连接比执行下一行 JavaScript 花费的时间更长。但是，对于 XMLHttpRequest 也可以这样说，推荐的顺序是：

```
var ajax = new XMLHttpRequest();
ajax.addEventListener("load", function(event){...});
ajax.open();
ajax.send(); 
```

这样可以确保事件不会丢失。为什么 WebSocket 在这方面有所不同？我是否忽略了某些事情并且错过了该事件并不是真正的问题？

感谢您对此进行澄清。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T16:15:59.910

您使用 Ajax 的第二个示例有一个错误的假设。使用 Ajax，将事件处理程序放在调用之后没有实际问题`send`，只要两者都包含在同一个同步操作集中。[这是一个发送 Ajax 请求的小提琴](http://jsfiddle.net/jxJ9a/4/)，会花费几秒钟（完成获取所需的大量时间），*然后*附加侦听器。如您所见，事件触发得很好。

所以，这没关系：

```
var ajax = new XMLHttpRequest();
ajax.open();
ajax.send();
ajax.addEventListener("load", function(event){...}); 
```

由于浏览器 JavaScript 的单线程特性，`load`在当前代码完成运行之前，该事件实际上不会触发。（注意：也许这种行为在旧浏览器中有所不同，但它肯定是在任何支持 WebSockets 的浏览器中的工作方式。）

*然而*，这**并不**好：

```
var ajax = new XMLHttpRequest();
ajax.open();
ajax.send();
setTimeout(function() {
    ajax.addEventListener("load", function(event){...});
}, 1000); 
```

这是因为您在两个异步操作之间创建了竞争条件：`setTimeout`解决和`load`事件触发。只要您在触发 Ajax 请求和设置侦听器之间的延迟是在同一个同步执行中，就没有“丢失”Ajax 事件的风险。

它与 WebSockets 的工作方式相同——`open`只要您`WebSocket`在同一组同步指令中构造并附加您的侦听器，您就不会错过该事件。这是另一个类似同步等待 WebSocket[的小提琴。](http://jsfiddle.net/veJ4h/)如您所见，即使在等待几秒钟后附加事件侦听器，它仍然会触发。

我不确定“在行动之前先接听听众”的做法从何而来。也许它在旧浏览器中很重要，或者对于 Ajax 以外的某些 API 很重要。无论出现这种做法的原因是什么，您实际上都不需要在现代浏览器中为 Ajax 或 WebSockets 坚持它。

# java - JPA 查询比较列表

> ID：16087298
> 
> 赞同：3
> 
> 时间：2013-04-18T15:37:46.737
> 
> 标签：java, jpa, criteria-api

假设我有一个这样的实体：

```
public class Class1 {

private long id;
    ...
private List<OneRandomObject> list;
} 
```

是否可以在 JPA 中使用标准查询或命名查询按列表比较实体？

类似于命名查询：

```
select c from Class1 c where c.list=:list 
```

使用条件 api 的查询也可以正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T13:21:07.897

我不确定这是否符合您的情况，但这不是您想要的吗？

```
 public List<Class1> matchList(List<OneRandomObject> other) {
        // ...
        String jpql = "select c from Class1 c where c.list in (:other)"
        // ...
    } 
```

我明白你现在在问什么。在 Hibernate Criteria API 中这样的东西怎么样？

```
 Criteria crit = session.createQuery(Class1.class);

    Conjunction junction = Restrictions.conjunction();

    for(OneRandomObject o: matches) {
        junction.add(Restrictions.propertyEq("list", o);
    }

    crit.add(junction); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T16:05:08.817

据我所知，不可能将整个集合过滤为属性。

也许您可以尝试`the list`根据您的条件获取所有 Class1，并过滤结果如下：

```
for(Class1 c1 : class1List)
{
    List<OneRandomObject> list = c1.getList();
    // compare the list with you param
    // remove if not match
} 
```

# sqlite - 找不到 Mono.Data.Sqlite 库

> ID：16087306
> 
> 赞同：2
> 
> 时间：2013-04-18T15:38:07.137
> 
> 标签：sqlite, monodevelop, xamarin-studio

我一直在开发一个 Web 应用程序，它在我的 Linux 机器上的 Monodevelop (3.0.8) 和我的 Windows 机器上的 Monodevelop (现在的 Xamarin Studio 4.0.3) 之间运行。

我正在为我的数据库使用 Sqlite，它运行良好，直到我将 Windows 端升级到 Xamarin 4.0.3，此时 Xamarin 无法找到 Mono.Data.Sqlite 引用。据我所知，底层的 Mono 安装没有任何变化，尽管我最近在 Windows 端升级到 Mono 3.0.9，但仍然找不到。我只看到 Mono.Cairo，而 Mono.Posix 是我的程序集列表，该项目在我的 Linux 机器上的 Monodevelop 下仍然可以正常工作。

我确实有适用于 Windows 的 Sqlite dll 的本地副本，但我的目标是跨两个平台进行开发，而不必一直切换引用。

在我在 Windows 端升级之前，这很有效。我是否错过了 Windows 配置中的某些内容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-29T19:30:56.533

这是为我安装 Mono 框架的问题（[http://www.go-mono.com/mono-downloads/download.html](http://www.go-mono.com/mono-downloads/download.html)，我使用了最新的稳定版 2.10.9）

安装后（可能需要重新启动 Xamarin Studio），您可以在 Xamarin Studio（工具 -> 选项、项目 -> .NET 运行时）中将其设置为默认设置，它现在显示在 Microsoft .NET 框架旁边。

# vhdl - VHDL 综合 - FF/锁存常数值

> ID：16087307
> 
> 赞同：0
> 
> 时间：2013-04-18T15:38:13.113
> 
> 标签：vhdl, xilinx, synthesis

我正在尝试合成我编写的 vhdl 模块。

代码如下：

```
library IEEE;
use IEEE.STD_LOGIC_1164.ALL;

-- Uncomment the following library declaration if using
-- arithmetic functions with Signed or Unsigned values
use IEEE.NUMERIC_STD.ALL;

entity ClockCounter is
    port(
        clk         : in std_logic;
        input       : in std_logic;
        enable      : in std_logic;
        output      : out std_logic := '0';
        bitReady    : out std_logic := '0';
        countError  : out std_logic := '0'
    );
end ClockCounter;

architecture Behavioral of ClockCounter is

signal totalBitWidth     : integer := 4;
signal majorityValue     : integer := 3;

begin

totalBitWidth <= 4;
majorityValue <= 3;

-- Process for recognizing a single input value from a  clock cycle
-- wide input signal
majority_proc: process(clk, input, enable)

    variable clkCount : integer := 0;
    variable Sum      : integer := 0;

    begin

    if rising_edge(clk) And enable = '1' then
        -- Reset bitReady after one clock cycle
        bitReady <= '0';

        -- Check the input value and add it to the Sum variable
        if input = '1' then
            Sum := Sum + 1;
        else
            Sum := Sum + 0;
        end if;

        -- Increment the clock counter variable
        clkCount := clkCount + 1;

        -- Check if the clock count has reached the specified number of cycles
        if clkCount >= totalBitWidth then
            -- Determine if the Sum variable has met the threshold for
            -- value of 1, set the output accordingly
            if Sum >= majorityValue then
                output <= '1';
            else
                output <= '0';
            end if;

            -- This checks if the value for all clock cycles was the same and
            -- sets an error flag if not
            if Sum = totalBitWidth Or Sum = 0 then
                countError <= '0';
            else
                countError <= '1';
            end if;

            -- Reset the clock counter and sum value
            clkCount := 0;
            Sum := 0;
            -- Set the bit counter high to alert other midules that a new bit
            -- has been received
            bitReady <= '1';
        end if;
        elsif enable = '0' then
        clkCount := 0;
        Sum := 0;
    end if;

    end process;

    end Behavioral; 
```

我在尝试合成时遇到的问题是：

> WARNING:Xst:1293 - FF/Latch 在 block 中有一个常数值 0。此 FF/Latch 将在优化过程中被修整。WARNING:Xst:1896 - 由于其他 FF/Latch 微调，FF/Latch 在 block 中有一个常数值 0。此 FF/Latch 将在优化过程中被修整。WARNING:Xst:1896 - 由于其他 FF/Latch 微调，FF/Latch 在 block 中有一个常数值 0。此 FF/Latch 将在优化过程中被修整。

修剪一直到 .

我不明白的是 clkCount 变量是一个整数，最多递增到 6，然后重置为 0。

这些警告是我可以忽略的吗？

这个模块是我正在开发的一个更大系统的一部分，当我合成更大的系统时，我得到了很多

> 找到信号的 1 位锁存器

所以我想做的是在修复上层模块之前尽可能多地消除下层模块中的警告。

任何帮助都会很棒。谢谢

PS - 我正在使用 Xilinx spartan 6 sp605 评估套件板和 Project Navigator。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T16:12:17.927

从外观上看，是在做你想做的事情，但有优化。clkCount 被声明为一个整数或 32 位，但是一旦它达到多数值或 3，您就将其重置为 0，这相当于“11”或 2 位。因此，clkCount(31 downto 2) 将得到优化，因为它始终为 0。

我会假设 Sum 应该得到优化，但是综合工具可能不会注意到它也可以得到优化的耦合。

我不是硬编码值的忠实拥护者，如果您实例化多个时钟计数器，您可能可以使用泛型对其进行扩展以使其更具可定制性。

```
library IEEE;
use IEEE.STD_LOGIC_1164.all;

-- Uncomment the following library declaration if using -- arithmetic functions with     Signed or Unsigned values use IEEE.NUMERIC_STD.ALL;
entity ClockCounter is
  generic (
    totalBitWidth : integer := 4;
    majorityValue : integer := 3);
  port(
    clk        : in  std_logic;
    input      : in  std_logic;
    enable     : in  std_logic;
    output     : out std_logic := '0';
    bitReady   : out std_logic := '0';
    countError : out std_logic := '0');
end ClockCounter;

architecture Behavioral of ClockCounter is

begin

-- Process for recognizing a single input value from a clock cycle -- wide input     signal 
  majority_proc : process(clk, input, enable)

    variable clkCount : integer := 0;
    variable Sum      : integer := 0;

  begin

    if rising_edge(clk) and enable = '1' then
                                        -- Reset bitReady after one clock cycle
      bitReady <= '0';
                                        -- Check the input value and add it to the Sum     variable
      if input = '1' then
        Sum := Sum + 1;
      else
        Sum := Sum + 0;
      end if;

                                        -- Increment the clock counter variable
      clkCount := clkCount + 1;

                                        -- Check if the clock count has reached the     specified number of cycles
       if clkCount >= totalBitWidth then
                                        -- Determine if the Sum variable has met the threshold for
                                        -- value of 1, set the output accordingly
        if Sum >= majorityValue then
          output <= '1';
        else
          output <= '0';
        end if;

                                        -- This checks if the value for all clock cycles was the same and
                                        -- sets an error flag if not
        if Sum = totalBitWidth or Sum = 0 then
          countError <= '0';
        else
          countError <= '1';
        end if;

                                        -- Reset the clock counter and sum value
        clkCount := 0;
        Sum      := 0;
                                        -- Set the bit counter high to alert other midules that a new bit
                                        -- has been received
        bitReady <= '1';
      end if;
    elsif enable = '0' then
      clkCount := 0;
      Sum      := 0;
    end if;

  end process;

end Behavioral; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T17:17:02.740

最好设置整数的预期范围；这样，合成将首先生成正确的大小，而不是 32 位，然后发出数百个“修剪”警告。

任何一个

```
variable clkCount : integer range 0 to totalBitWidth := 0; 
```

它可以是负面的吗？不？那么更好...

```
variable clkCount : natural range 0 to totalBitWidth := 0;
variable Sum      : natural range 0 to majorityValue := 0; 
```

或使用类型系统。

例如，如果和之间有关系`totalBitWidth`，`majorityValue`那么直接表达而不是让它们独立：更少跟踪和改变totalBitWidth时出错。（我猜测下面的预期关系）

```
type counttype is new integer range 0 to totalBitWidth;
subtype sumtype is counttype range 0 to totalBitWidth / 2 + 1;

    variable clkCount : counttype := 0;
    variable Sum      : sumtype   := 0; 
```

# sql-server - 如何在 sqlserver 中组合这两个查询

> ID：16087312
> 
> 赞同：0
> 
> 时间：2013-04-18T15:38:38.987
> 
> 标签：sql-server

如何组合以下 2 个 sqlserver 查询

```
select COUNT(dept) as totalDept
from 
employee
where DATEPART(MM,joindate) = DATEPART(MM, DATEADD(MM, -1, getdate()))
AND DATEPART(YYYY, joindate) = DATEPART(YYYY, DATEADD(MM, -1, getdate()))
group by (DATENAME(MONTH,joindate)+' , '+DATENAME(YEAR,joindate))

select COUNT(*) from employee
group by dept 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T15:46:50.190

试试这个——

```
SELECT 
      totalDept = count(dept) 
    , gr.grouped_by_dept
FROM employee
CROSS JOIN (
    SELECT grouped_by_dept = count(1)
    FROM employee
    GROUP BY dept
) gr
WHERE datepart (MM, joindate) = datepart (MM, dateadd(MM, -1, getdate()))
    AND datepart (YYYY, joindate) = datepart (YYYY, dateadd(MM, -1, getdate()))
GROUP BY datename (MONTH, joindate) + ' , ' + datename (YEAR, joindate) 
```

**更新：**

```
DECLARE @FirstDayOfMonth DATETIME
SELECT @FirstDayOfMonth = DATEADD(DAY, -(DAY(GETDATE()) - 1), GETDATE())

SELECT 
      t2.MONTHYEAR
    , t2.[system]
    , t3.[countBySystem]
    , NewAddr = COUNT(t2.[address])
FROM (
    SELECT 
          MONTHYEAR = DATENAME(MONTH, DateInserted) + ' , ' + DATENAME(YEAR, DateInserted)
        , t.[system]
        , t.[address]
    FROM dbo.testtable t
    WHERE DATEADD(DAY, -(DAY(t.DateInserted) - 1), t.DateInserted) = @FirstDayOfMonth
) t2
JOIN (
    SELECT 
          t2.[system]
        , [countBySystem] = COUNT(1)
    FROM dbo.testTable t2 
    GROUP BY t2.[system]
) t3 ON t2.[system] = t3.[system]
GROUP BY 
      t2.MONTHYEAR
    , t2.[system]
ORDER BY NewAddr 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T16:03:33.270

我喜欢 with 子句：

```
WITH 
total_employees AS
    (select dept,count(*) as emp_count from employee group by dept),
recent_employees AS 
    (select dept,count(*) as new_emp_count from employee 
WHERE
    DATEPART(MM,joindate) = DATEPART(MM, DATEADD(MM, -1, getdate()))
AND 
    DATEPART(YYYY, joindate) = DATEPART(YYYY, DATEADD(MM, -1, getdate()))
SELECT 
    total_employees.dept,emp_count "Total",new_emp_count,"New" 
FROM 
    total_employees,recent_employees
WHERE
    total_employees.dept = recent_employees.dept 
```

由于我没有测试过，可能会有一些小的语法错误，但我有非常相似的报告。

您是否有理由不使用 datediff 来获取上个月的日期？

# image - 如何在 Step Carousel 的面板中垂直居中图像？

> ID：16087313
> 
> 赞同：0
> 
> 时间：2013-04-18T15:38:39.537
> 
> 标签：image, panel, center, carousel

如何在 Step Carousel 的面板中垂直居中图像？

我可以在以下内容中输入命令吗？

```
<div class="panel">

<a href="url" target="_blank">
<img src="/image" border="0" position= "center" alt="copy goes here" />
</a>
</div> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-25T11:13:25.360

```
#Content-innerCt {
  display: -webkit-box;
  -webkit-box-orient: horizontal;
  -webkit-box-pack: center;
  -webkit-box-align: center;
  vertical-align: middle !important;
} 
```

试试这个。它对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T15:58:39.613

这是简单的方法：http: [//jsfiddle.net/David_Knowles/XVMzf/1/](http://jsfiddle.net/David_Knowles/XVMzf/1/)

```
.panel { 
    vertical-align:middle; /* this is the key */
    display:table-cell; /* this is the key */
    height:400px; 
    width:600px; 
    text-align:center; 
    background-color:yellow; 

}

<div class="panel">
    <a href="url" target="_blank">
        <img src="http://dummyimage.com/300x200/000/fff&text=dummy-image" alt="copy goes here" />
    </a>
</div> 
```

所有现代浏览器（IE8 及更高版本）都支持此功能。

* * *

这将适用于旧版浏览器，但您必须知道 .panel [http://jsfiddle.net/David_Knowles/XVMzf/2/的高度](http://jsfiddle.net/David_Knowles/XVMzf/2/)

# verilog - Verilog 时间延迟计算

> ID：16087315
> 
> 赞同：-2
> 
> 时间：2013-04-18T15:38:45.107
> 
> 标签：verilog, timedelay

我正在为我的项目编写一个非常简单的代码，它所要做的就是计算时间。我有两个开关，A 和 B。我要做的就是在按下 A 时开始计时，然后在按下 B 时停止计时。也许我可以将这个时间存储到一个变量中，然后将 Var 输出到一个 7 段！（我只需要计时部分，7 Seg就可以了）

我没有verilog的背景，无法在网上获得很多帮助，有人可以给我一个提示。

注意：显然，它必须是 Verilog，并且必须是 *.v 格式

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T16:21:41.953

我将首先建议您找到一个很好的 Verilog 指南并查看它，您还需要找到一个模拟器来测试您的代码。

现在假设您只测量按钮按下之间的时钟周期，您需要在 a 上启动一个计数器并在 b 上停止它。可能使用和 b 来控制 FSM，后者又控制计数器。

需要注意的是 a 和 b 是外部的和异步的，它们需要通过元稳定性触发器。根据机械开关的不同，您可能还需要对它们添加更多谴责。

我打算添加一些代码，但由于您不知道 verilog，因此应该将其分解为比为您提供完整解决方案要小得多的步骤，我觉得这会剥夺您的学习经验。

如果您只想查看 Verilog Stop 的一些代码，请观看[simplefpga.blogspot.co.uk](http://simplefpga.blogspot.co.uk/2012/07/to-code-stopwatch-in-verilog.html)似乎是合理的。

当您学习 verilog 硬件描述语言时，首先要考虑问题以及您要实现的目标。计数器，状态机。然后继续实施您需要的基本版本，然后根据需要添加功能。

可能是一个自由运行的计数器溢出。一个自由运行的计数器，在最大值处停止。按下按钮时开始的计数器，按下按钮时开始的计数器，按下另一个按钮时停止的计数器。

然后，您可以提出更适合网站问答形式的问题。例如，我正在尝试将计数器实现为 verilog 秒表的一部分，但我不确定如何暗示功能 x。

尽量不要被语言吓倒，如果可能的话，享受学习新技能的过程。

# java - 如何将 JMS 队列视为临时存储？

> ID：16087322
> 
> 赞同：1
> 
> 时间：2013-04-18T15:39:07.593
> 
> 标签：java, jms, temporary-objects

我希望能够从队列中提取和插入消息。是否可以为此利用 JMS 功能，或者我是否需要为此创建自定义数据结构？

请让我知道是否有任何其他特定的临时存储设计模式。

**更新**：由于许多人要求更多细节，所以在这里。我的要求是将消息存储在一个队列中，多个客户端可以从中推送数据，并在需要时从其中拉回数据。该队列应该可供多个客户端使用。一条消息只应处理一次，如果客户端无法处理数据，则消息应返回队列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T15:44:52.383

您似乎在一个问题中问了多个问题，因此澄清一下您需要回答的各个点可能会对您有所帮助。

是的，可以将 JMS 用作“临时”存储，但这取决于您的意思以及您需要什么。大多数 JMS 提供程序（例如 ActiveMQ）允许您对队列执行以下操作：

*   将队列设置为持久（即存储在磁盘上，如果队列重新启动，所有消息都在那里）或非持久（即不存储在磁盘上，如果队列重新启动，将没有消息）。
*   您可以为消息设置过期时间，以便如果未按时提取它们，它们将被丢弃。

这取决于您所说的“临时存储”。JMS 队列不是数据库，它是一个消息传递系统。

关于数据结构，您可以序列化普通的 Java 对象，`ObjectMessage`也可以使用`TextMessage`. 因此，您可以通过 XML、JSON、CSV 或任何您想要的方式。您还可以包含可用于路由或与消息关联的其他元信息的特殊标头。再次取决于“自定义数据结构”的含义。您还可以一个接一个地发送一个 raw`BytesMessage`或一个`MapMessage`（键值对）或一个`StreamMessage`在其中具有不同数据类型的 a。

如果您需要字面意义上的临时存储，也许您应该查看嵌入式数据库，例如 Derby 或 HSQLDB。我认为他们也有配置来说明数据是否应该留在内存中或在数据变得太大后进入磁盘。

# javascript - 如何删除 Javascript 数组中的方括号？

> ID：16087331
> 
> 赞同：7
> 
> 时间：2013-04-18T15:39:20.733
> 
> 标签：javascript, jquery, google-maps, google-maps-api-3

我有一个名为的数组`value`，当`console.log(value)`我得到大约 30 行代码时，代码如下`[6.443663, 3.419248]`

数字随着纬度和经度而变化。但我需要以某种方式摆脱每个方括号。

我尝试过`var replaced = value.toString().replace(/\[.*\]/g,'');`，但这将上面的示例更改为`6.443407,3.419035000000008`并且使我的代码失败。

换句话说，我需要帮助摆脱数组中的方括号，以便在我的地图上绘制点。

我的数组由以下代码组成，因为每个纬度和经度值都保存在链接内的`onClick`函数中。`a`所以这里的一个成员好心地提供了下面的代码来将我的值放入一个数组中，但现在我正在努力在没有任何括号破坏它的情况下取出这些值。

```
var obj = {};
$('.choice-location-inner a').each(function(){
    var $this = $(this);
    var text = $this.attr('onClick').replace('findLocation(\'', '').replace('\');return false;', '');
    var array = text.split(',')
    obj[this.id]= [parseFloat(array[0]), parseFloat(array[1])];
}); 
```

该数组正在尝试使用以下代码在我的 Google 地图上绘制标记

```
$.each(obj , function(index, value){
    geocoder = new google.maps.Geocoder();

    geocoder.geocode( { 'address': value}, function(results, status) {
        if (status == google.maps.GeocoderStatus.OK) {
            map.setCenter(results[0].geometry.location);
            marker = new google.maps.Marker({
                map: map,
                icon: image,
                position: results[0].geometry.location
            });
        } else if (status == google.maps.GeocoderStatus.OVER_QUERY_LIMIT) {
            wait = true;
            setTimeout("wait = false", 1000);
        } else {
            alert("Geocode was not successful for the following reason: " + status);
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-18T15:55:10.003

将行转换为数组到文本。

```
var value = [[1234213, 1234231], [1234213, 1234231]];
var dato = value[0];
console.log(dato.toString()); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-18T15:45:57.180

除非我读错了并且该项目是一个对象而不是包含括号的字符串，否则您可以通过其子数组位置访问它

```
lat = obj[this.id][0]
lng = obj[this.id][1] 
```

也许？

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-18T15:43:35.330

看起来您想要数组的逗号分隔字符串表示。如果是这种情况，您可以这样做：

```
var commasep = value.join(","); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-06T08:35:37.627

```
`${arr.map(({ id }) => id)}` 
```

除了使用内置函数之外，这种方式可能更简单！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-02-21T02:36:58.717

如果你需要一个干净的输入，你可以写这个。

```
var justTheDataWithoutSeparation = data.split(''); 
```

当然，如果你想用逗号或其他东西分隔，你需要添加

```
vat dataSeparatedWithSomething = data.split('-'); 
```

> 您需要小心，因为执行此方法可能会导致您的数据设置为字符串值，并可能影响您的输出，您需要先转换它。

# java - 多个 dex 文件 - 转换为 Dalvik 格式失败 - 无法执行 dex

> ID：16087341
> 
> 赞同：18
> 
> 时间：2013-04-18T15:39:54.010
> 
> 标签：java, android, dalvik, dex

我有 2 个应用程序版本 - 专业版和精简版。它们都已在 v1.01 上市。我正在尝试为两者发布 v1.1。此更新包括 SwawrmConnect 集成，以便使用其全球排行榜。

我应该首先说我知道我没有正确维护我的代码。我有 2 个完全独立的应用程序，它们共享大约 90% 的代码。我分别维护它们，因为在一周或 2 或 3 周未能弄清楚如何创建库和共享代码之后，我放弃了，就这样走了。

SwarmConnect 是我使用的第一个 jar，必须为两个应用程序创建一个库（参见下面的文件结构截图）。

现在我的精简版正在运行并准备好发布。我现在正试图将我的专业版放到需要发布的位置。我相当肯定所有 java/xml 文件都是最新的并且准备好了。当我在模拟器中运行专业版时，出现以下错误：

```
[2013-04-18 11:24:41 - Dex Loader] Unable to execute dex: Multiple dex files define Lcom/swarmconnect/loopj/android/http/AsyncHttpResponseHandler;
[2013-04-18 11:24:41 - BibleTriviaPro] Conversion to Dalvik format failed: Unable to execute dex: Multiple dex files define Lcom/swarmconnect/loopj/android/http/AsyncHttpResponseHandler; 
```

我尝试过的事情：

*   清理/重建
*   更新 Eclipse
*   删除 bin 和 gen 文件夹
*   重启 Eclipse
*   加上一些其他的东西

我的文件结构：

![在此处输入图像描述](https://i.stack.imgur.com/4zHBk.png)

问题可能是我正在尝试将 SwarmConnect 用作​​ 2 个项目（精简版和专业版）的库吗？

编辑：

以下是运行良好的精简版的文件结构。在模拟器上编译和运行。

![在此处输入图像描述](https://i.stack.imgur.com/7fD14.png)

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-04-18T16:20:41.810

巧合的是，前天我遇到了同样的问题。这是我建议你做的。

首先，确保您备份了当前位于“Android Dependencies”/“libs”文件夹中的所有 jar。

现在，让我们先按照以下步骤修复精简版。

1.  删除除Eclipse 项目资源管理器下的“Android Dependencies”文件夹`jar`之外的所有文件。`android-support-v4.jar`

2.  同样删除所有 Jar 文件，除了Eclipse 中 Project Explorer 下`android-support-v4.jar`的 文件夹。`libs`

3.  现在右键单击您的项目-> 选择属性-> 选择 Java 构建路径-> 选择添加外部 JAR。添加所有必要的`jar`文件（只需确保`jar`只添加一次特定文件）。

最后清理项目并构建它。现在将相同的步骤序列应用于专业版。那应该这样做。

更新：- 如果您在完成所有这些操作后看到 Eclipse 嘲笑一些编译时错误，您可能需要做的就是通过按`Ctrl`++`Shift`进行必要的导入来修复这些编译时错误`O`。

[我假设项目的 pro 和 lite 版本在源依赖等方面没有联系。我的意思是说它们基本上是完全独立的。]

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T16:29:36.710

我强烈怀疑这是你的问题

1.  右键单击您的项目
2.  在“Android”选项下查看
3.  在下部窗格中查看是否存在“Swarm Connect”
4.  如果没有，请添加它（尽管我真的怀疑它已经存在）
5.  从你的 libs 目录中删除 Swarm.jar

原因是：当您在 Eclipse 中将库项目添加到 Android 项目时，它不会显示在您的 libs 目录中。我实际上试图将 .jar 文件添加到项目中，并被告知这是错误的方法（我认为至少在 API 14 之前）。

我的猜测是，在您的“非专业”版本中，您没有在项目选项中链接它，因此它仍然可以正确编译。不过，您应该按照我刚才描述的方式链接它，以避免在库尝试访问自己的资源时出现问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-12-08T14:25:17.660

上面的解决方案对我不起作用，我所要做的就是在外部添加 libs 文件夹中的 jar，并在 order 和 export 选项卡下取消选中 Android private libraries。

```
 right click--
             java build path--
                               order and export tab ->Uncheck Android private libraries 
                                   and add jars in the libs folder externally. 
```

执行上述步骤。不知道为什么会这样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-11T19:04:20.840

我在上面尝试了@Sriram 的答案。它没有用。

然后我必须从 Project->Properties->Java Build Path->Libraries 位置删除库，并将实际的 jar（我需要 android-support-v4.jar 和 android-support-v13.jar）添加到 libs 文件夹中我的项目。然后它起作用了：

![最终结构](https://i.stack.imgur.com/70Vyh.png)

（请注意，没有“Referenced Libraries”文件夹）

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-05-22T21:52:33.693

我收到此错误是因为我使用了整个 Android Development Kit 安装程序（Eclipse plus SDK，日期为 2013 年 2 月 6 日）。我能够摆脱它的唯一方法是卸载所有这些，并从 eclipse.org 单独安装 Eclipse For Java Developers，并仅从 Android 站点安装 Android SDK。工具包附带的 Eclipse 有一些有趣的想法，关于从哪里包含库，更不用说对 c++ 和 gdb 支持的残留部分了。

# ios - UIToolbar - 允许工具栏下方的交互

> ID：16087346
> 
> 赞同：0
> 
> 时间：2013-04-18T15:40:03.243
> 
> 标签：ios, objective-c, ipad, uibarbuttonitem, uitoolbar

我有一个自定义`UIToolbar`，`UINavigationController`带有自定义背景图像。右边的图像是半透明的。我遇到的问题是某些视图在右下角有按钮，并且无法点击这些按钮的底部，因为工具栏会阻止它。

我无法`userInteractionEnabled = NO`在 上设置`UIToolBar`，因为该栏包含`UIBarButtonItem`需要保持交互的 s。

有没有办法让栏忽略点击输入（但不是`UIBarButtonItem`s）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T02:16:24.107

您可以`userInteractionEnabled = YES`在工具栏上进行设置，但按照[How to get touches when parent view has userInteractionEnabled set to NO in iOS](https://stackoverflow.com/questions/4661589/how-to-get-touches-when-parent-view-has-userinteractionenabled-set-to-no-in-ios)`hitTest:point`中的描述进行覆盖。这使它忽略对自身的任何接触，但接受对任何子视图的任何接触（在您的情况下为 s ）：`UIBarButtonItem`

```
- (id)hitTest:(CGPoint)point withEvent:(UIEvent *)event {
    id hitView = [super hitTest:point withEvent:event];

    if (hitView == self) {
        return nil;

    } else {
        return hitView;
    }
} 
```

请注意，这将要求您对`UIToolbar`.

# jquery - 用于空白的 jQuery 验证正则表达式得到“未捕获的类型错误：无法调用未定义错误的方法‘调用’”

> ID：16087351
> 
> 赞同：-1
> 
> 时间：2013-04-18T15:40:08.687
> 
> 标签：jquery, twitter-bootstrap, jquery-validate

这是我的 jquery 代码，根据之前的[stackoverflow 问题](https://stackoverflow.com/a/15103447/2061688)

```
$('#productId').validate({
     rules: {
         product: {
             required: true,
             term: {regex: /^$|\s/}
         }
     },
     messages: {
         product: {
             required: "A text is much",
             term: "Please avoid spaces"
         },
     },  

     showErrors: function (errorMap, errorList) {

         $.each(this.successList, function (index, value) {
             $('#'+value.id+'').popover('destroy');
         });

         $.each(errorList, function (index, value) {

             $('#'+value.element.id+'').attr('data-content',value.message, 'title', 'Oops!').popover({
                 placement: 'top',
                 trigger: 'manual',
                 delay: { show: 500, hide: 5000 }
             }).popover('show');

         });

     }

 }); 
```

如果输入的术语中有空格，我想做的是显示一个弹出窗口。但每次它给我的错误

```
Uncaught TypeError: Cannot call method 'call' of undefined 
```

我知道正则表达式部分有问题。因为我用 minLength 尝试了相同的代码并且效果很好。我究竟做错了什么？

PS我正在使用twitter bootstrap进行popover。

更新：有关错误的更多信息

```
Uncaught TypeError: Cannot call method 'call' of undefined ----------jquery.validate.js:504

    $.extend.check ---------- jquery.validate.js:504

    $.extend.element ---------- jquery.validate.js:357
    $.extend.defaults.onfocusout ---------- jquery.validate.js:231

    delegate ---------- jquery.validate.js:317

    (anonymous function) ---------- jquery.validate.js:1184

    jQuery.event.dispatch ---------- jquery.js:3075

    elemData.handle ---------- jquery.js:2751

    jQuery.event.trigger ---------- jquery.js:2987
    jQuery.event.simulate ---------- jquery.js:3302

    handler 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T15:44:47.063

我的猜测是你应该使用`this.errorList`而不是仅仅`errorList`在第二个`$.each`. `value.id`和中的两个循环之间的差异也可能`value.element.id`很重要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T15:32:37.530

声明的结构`rules`如下...

```
rules: {                       // <- rules:
    field_name: {              // <- name attribute of field                   
        rule_name: parameter,  // <- rule: parameter
        required: true,   // example 1
        min: 30           // example 2
    }
}, 
```

现在你的代码：

```
rules: {
    product: {
        required: true,
        term: {regex: /^\s*$/}
    }
}, 
```

究竟`term`应该是什么？为什么在`regex`里面`term`？

*   如果`term`是规则，则不能将规则 ( `regex`) 嵌套在规则 ( `term`) 中。
*   `term``rule` [根据文档](http://docs.jquery.com/Plugins/Validation#List_of_built-in_Validation_methods)，它不是“内置” 。
*   `term`根据您的代码，也不是“自定义”规则。
*   如果`term`是字段`name`，则不能将字段 () 嵌套在字段 ( `term`) 内`product`。

这解释了你的错误，

> “未捕获的类型错误：无法调用未定义的方法‘调用’”

换句话说，插件将`term`其视为未定义的方法。

假设你的正则表达式是正确的，它应该是这样的......

```
rules: {
    product: {
        required: true,
        regex: /^\s*$/
    }
}, 
```

另外，请记住，如果您的自定义方法返回`true`，则该字段验证，如果返回`false`，该字段将验证失败并显示错误。

# mysql - 如果未找到连接结果，请选择 COUNT(*) 零

> ID：16087354
> 
> 赞同：0
> 
> 时间：2013-04-18T15:40:13.893
> 
> 标签：mysql

我正在尝试为给定的城市 ID 选择所有区域。此外，我正在计算 COUNT(*) 以查看每个区域存在多少项目。由于项目通过多对多关系与区域相关，因此此 JOIN 必须通过名为 Item_Area 的适当 JOIN 表。

不幸的是，我只得到实际上有最近项目的区域 - 但我想要所有区域。最近的项目应该简单地为零，如果没有的话。我认为问题与发布日期的 WHERE 条件有关 - 但我无法弄清楚如何使其正常工作。

**如何修改以下查询，为给定的 Area.cityId 选择所有区域 - 并简单地计算“recentItems”= 0，对于没有最近项目的区域（即不匹配对项目的限制。在过去 10 天内发布的字段。**

```
SELECT
  `Area`.`id`, `Area`.`name`, COUNT(*) AS `recentItems`
  FROM `Area`
  LEFT JOIN `Item_Area` ON `Area`.`id` = `Item_Area`.`areaId`
  LEFT JOIN `Item` ON `Item`.`id` = `Item_Area`.`itemId`
WHERE
  `Area`.`cityId` = "1" AND
  Item.published > DATE_SUB(NOW(), INTERVAL 10 DAY) GROUP BY `Area`.`id`
ORDER BY `Area`.`name` ASC 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T15:46:28.043

将条件 about`Item`从`WHERE`子句移动到`ON`子句。并将其更改`COUNT(*)`为`COUNT(Item.id)`：

```
SELECT
  Area.id, Area.name, COUNT(Item.id) AS recentItems
FROM Area
  LEFT JOIN Item_Area ON Area.id = Item_Area.areaId
  LEFT JOIN Item ON  Item.id = Item_Area.itemId
                 AND Item.published > DATE_SUB(NOW(), INTERVAL 10 DAY) 
WHERE
  Area.cityId = '1' 
GROUP BY 
  Area.id
ORDER BY 
  Area.name ASC ; 
```

请注意，上述内容不会在某些（严格）设置下运行，因为您`Area.name`在`SELECT`and`ORDER BY`列表中，而它不在`GROUP BY`列表中。这取决于是否`sql_mode`已设置为**[`ONLY_FULL_GROUP_BY`](http://dev.mysql.com/doc/refman/5.5/en/server-sql-mode.html#sqlmode_only_full_group_by)**。因此，将分组部分更改为：

```
GROUP BY 
  Area.id, Area.name 
```

* * *

您还可以使用别名，使代码更具可读性（至少对很多人来说）：

```
SELECT
  a.id, a.name, COUNT(i.id) AS recentItems
FROM 
    Area AS a
  LEFT JOIN 
    Item_Area AS ia ON a.id = ia.areaId
  LEFT JOIN 
    Item AS i ON  i.id = ia.itemId
              AND i.published > DATE_SUB(NOW(), INTERVAL 10 DAY) 
WHERE
  a.cityId = '1' 
GROUP BY 
  a.id
ORDER BY 
  a.name ASC ; 
```

* * *

至少有两种更常见的写法。首先在派生表中分组，然后加入：

```
SELECT
  a.id, a.name, COALESCE(g.recentItems, 0) AS recentItems
FROM 
    Area AS a
  LEFT JOIN 
    ( SELECT 
        ia.areaId, COUNT(*) AS recentItems
      FROM 
          Item_Area AS ia 
        JOIN 
          Item AS i ON  i.id = ia.itemId
      WHERE 
        i.published > DATE_SUB(NOW(), INTERVAL 10 DAY)
      GROUP BY
        ia.areaId
    ) AS g ON a.id = g.areaId
WHERE
  a.cityId = '1' 
ORDER BY 
  a.name ASC ; 
```

或使用内联子查询：

```
SELECT
  a.id, a.name, 
  COALESCE( 
      ( SELECT 
          COUNT(*)
        FROM 
            Item_Area AS ia 
          JOIN 
            Item AS i ON  i.id = ia.itemId
        WHERE 
          i.published > DATE_SUB(NOW(), INTERVAL 10 DAY)
          AND
          a.id = ia.areaId
      ), 0
          ) AS recentItems
FROM 
    Area AS a
WHERE
  a.cityId = '1' 
ORDER BY 
  a.name ASC ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T16:04:21.023

Item.published 上的过滤条件限制数据可用于具有项目条目的区域。由于您还需要不存在项目的区域，因此您需要将条件 Item.published > DATE_SUB(NOW(), INTERVAL 10 DAY) 插入到联接中。

```
SELECT
  `Area`.`id`, `Area`.`name`, COUNT(1) AS `recentItems`
FROM `Area`
LEFT JOIN `Item_Area` ON `Area`.`id` = `Item_Area`.`areaId`
LEFT JOIN `Item` ON `Item`.`id` = `Item_Area`.`itemId` and 
WHERE
 `Area`.`cityId` = "1" 
 GROUP BY `Area`.`id`
 ORDER BY `Area`.`name` ASC 
```

# wpf - WPF MVVM-Light 如何在 ViewModel 中使用传递的 DragEventArgs

> ID：16087355
> 
> 赞同：4
> 
> 时间：2013-04-18T15:40:16.363
> 
> 标签：wpf, event-handling, mvvm-light

我在这里阅读了许多关于 WPF MVVM Light 的问题和答案，但答案大多只显示一侧（XAML 代码见下文），根本没有 ViewModel 代码。

```
<i:Interaction.Triggers>
<i:EventTrigger EventName="Drop">
    <cmd:EventToCommand Command="{Binding Mode=OneWay, Path=DropCommand}"
                        PassEventArgsToCommand="True" />
</i:EventTrigger> 
```

我在 XAML Grid-Control 中使用，我想将拖放文件从 Windows 资源管理器应用到我的 (wpf) 应用程序。我严格使用 MVVM 模式（完全避免后面的代码）。JFYI，在代码隐藏中，Drop-Event 的事件处理程序通常有 2 个参数：object 类型的 sender 和 DragEventArgs 类型的 e。我只需要 EventArgs。我的问题不再是关于如何将 DragEventArgs 从 XAML 直接传递给 ViewModel，而是如何在 ViewModel 中获取和使用 DragEventArgs（c# 代码）。在 ViewModel 我这样写命令：

```
public RelayCommand<DragEventArgs> DropCommand
{
    get
    {
        return _dropCommand ?? (_dropCommand = new RelayCommand<DragEventArgs>(Drop);
    }
}
private void Drop()
{
   // do something here
} 
```

我想我在 DropCommand 中遗漏了一些东西，所以我可以使用 e（DragEventArgs 的类型）。先感谢您。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T16:04:36.213

你需要类似的东西：

您缺少的是在函数定义中指定您期望的参数类型:)

```
private RelayCommand<DragEventArgs> _dropCommand;
public RelayCommand<DragEventArgs> DropCommand {
  get {
    return _dropCommand ?? (_dropCommand = new RelayCommand<DragEventArgs>(Drop));
  }
}
private static void Drop(DragEventArgs e) {
  // do something here
} 
```

或者以 lamda'ish 的方式（我确实喜欢我的 lamda）：

```
public RelayCommand<DragEventArgs> DragCommand { get; private set; }

public MainViewModel() {
  DragCommand = new RelayCommand<DragEventArgs>((e) =>  /* Handler Code */ , (e) => true);
} 
```

# html - div 的 .height/width 返回不同的值到画布中

> ID：16087357
> 
> 赞同：0
> 
> 时间：2013-04-18T15:40:25.400
> 
> 标签：html, height, width, html5-canvas

以上是我正在尝试新的 HTMl5 画布标签的测试网站。我已经把它剥离了一点，只是为了让相关代码更容易找到。

我遇到的问题是在设置画布的宽度和高度时，我使用 .height 和 .width 方法返回的值大于我试图让它们避免导致画布溢出的 div封装div。

JSbin 链接：

[http://jsbin.com/ejivux/13/edit](http://jsbin.com/ejivux/13/edit)

代码只是以防人们想要它在这里：

HTML：

```
<!DOCTYPE html>
<html>
  <head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
    <meta charset=utf-8 />
    <title>JS Bin</title>
  </head>
  <body>
    <div id="container">

     <div id="leftColumn">

        text

      </div>

      <div id="rightColumn">

      </div>

    </div>
  </body>
</html> 
```

CSS：

```
canvas{
  border-width:5px;
  border-style:solid;
}

html{
  height:99%;
  background-color:red;
}

body{
  height:99%;
  background-color:blue;
}

#container{
  background-color:yellow;
  min-width:976px;
  min-height:99%;
  height:100%;
}

#leftColumn{
  background-color:pink;
  width:50%;
  min-height:100%;
  height:100;
  float:left;
}

#rightColumn{
  background-color:green;
  width:50%;
  min-height:100%;
  height:100%;
  float:left;
} 
```

JS：

```
var canvasDiv = document.getElementById('rightColumn');
canvas = document.createElement('canvas');
canvas.setAttribute('width', $('#rightColumn').width());
canvas.setAttribute('height', $('#rightColumn').height());
canvas.setAttribute('id', 'canvas');
canvasDiv.appendChild(canvas); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T17:21:04.327

你`canvas`有一个 5px 的边框：

```
canvas{
  border-width:5px;
  border-style:solid;
} 
```

因此，如果您将`width`画布的 设置为包含的，`div`我预计 的总宽度`canvas`将比 10px 多，`div`因为两边都有边框。试试[这个](http://jsbin.com/ecevek/1/edit)：

```
canvas.setAttribute('width', $('#canvasDiv').width()-10);
canvas.setAttribute('height', $('#canvasDiv').height()-10); 
```

# .net - 在 aspx 标记中执行 Response.Redirect

> ID：16087362
> 
> 赞同：0
> 
> 时间：2013-04-18T15:40:38.003
> 
> 标签：.net, response.redirect

我有一个应该执行 Response.Redirect 的 .net 按钮。我可以在标记中做到这一点吗？

```
<asp:Button runat="server" OnClick='<%# Response.Redirect("~/Administration.aspx"); %>' Text="Cancel"></asp:Button> 
```

它不起作用，因为“无法将 void 隐式转换为对象”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T15:43:06.967

您不能像那样直接分配代码。您需要将其分配给处理事件的方法，例如：

```
OnClick="btn1_Click"

protected void btn1_Click(object sender, EventArgs e)
{
    Response.Redirect("~/Administration.aspx");
} 
```

**编辑**

您可以做的是完全跳过 ASP.NET 并使用常规 HTML 和 javascript 来完成，以避免您的帖子：

```
<input type="button" onclick="window.location.href = '<%= ResolveUrl("~/Administration.aspx") %>'"> 
```

# java - 使用 Java 总结 Excel 列值

> ID：16087364
> 
> 赞同：0
> 
> 时间：2013-04-18T15:40:51.687
> 
> 标签：java, excel

我需要根据找到的行数据总结 Excel Column(1) 值。

我的excel文件如下：

```
 column(0)                         column(1)
Row[0]    ECIN - INPUT VALUE (ADD)       NetTradeAllowanceAmount = -600.00
Row[1]    ECIN - INPUT VALUE (ADD)       CashDownPayment = 300.00
Row[2]    ECIN - INPUT VALUE (ADD)       OtherDownPaymentAmount = PATH DOES NOT EXIST
Row[3]    ECIN - INPUT VALUE (ADD)       CashDownPayment = 400.00
Row[4]    ECIN - INPUT VALUE (SUB)       OtherDownPaymentAmount = PATH DOES NOT EXIST
Row[5]    ECIN - INPUT VALUE (SUB)       ManufacturerRebateAmount = 500.00
Row[6]    ECIN - INPUT VALUE (SUB)       DeferredDownPaymentAmount = -700.00
Row[7]    ECIN - INPUT VALUE (SUB)       DeferredDownPaymentAmount = 900.00 
```

首先，我需要查看 Column(0)，所有行：

```
1.add the column(1) values having rows (ADD) data. (eg: SUM= 300.00 + 400.00 - 600.00  = 700.00 - 600.00 = 100.00)
2.add the column(1) values having rows (SUB) data. (eg: SUM=500.00 - 700.00 + 900.00 = 1400.00 - 700.00 = 700.00)
3.then subtract above two SUMs.                    (eg: 100.00 - 700.00 = 600.00) 
```

我应该将此结果保存在某个变量中，并将该值记录在其他单元格中。

注意：程序不应考虑 value = PATH DOES NOT EXIST，即使行包含数据（SUB / ADD）。

在某种程度上，我已经编写了代码。如下：

```
import java.io.*;
import java.util.*;
import org.apache.poi.hssf.usermodel.*;
import org.apache.poi.ss.usermodel.*;
public class Hai
{
public static void main(String[] args)
{
    try 
    {
        FileInputStream file = new FileInputStream(new File("C:/Users/Excel.xls"));
        HSSFWorkbook workbook = new HSSFWorkbook(file);
        HSSFSheet sheet = workbook.getSheetAt(5);
        Iterator<Row> rowIterator = sheet.iterator();
        while(rowIterator.hasNext()) 
        {
            Row row = rowIterator.next();
            Iterator<Cell> cellIterator = row.cellIterator();
            while(cellIterator.hasNext())
            {
                    Cell cell = cellIterator.next();
                    String Tag=cell.getStringCellValue().toString();
                    cell = row.getCell(0+1);
                    if(cell !=null)
                    if(Tag.contains("ADD"))
                        {
                           String Tag1=cell.getStringCellValue().toString();
                           String[] s= Tag1.split("=");
                           //System.out.println(s[1]);
                           if(!s[1].contains("PATH DOES NOT EXIST"))
                           {
                             System.out.println(s[1].trim());
                           }
                        }
                    else if(Tag.contains("SUB"))
                        {
                           String Tag1=cell.getStringCellValue().toString();
                           String[] s= Tag1.split("=");
                           if(!s[1].contains("PATH DOES NOT EXIST"))
                           {
                             System.out.println(s[1].trim());
                           }
                        }
            }
        }
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }   
}
} 
```

我得到的输出如下：

-600.00
300.00
400.00
500.00
-700.00
900.00

上面的值都是字符串格式的，我想总结一下这些值。请帮我！

我已将上述值转换​​为 Flaot，如下所示：

```
Float foo = Float.parseFloat(s[1].trim()); 
```

我得到的输出是：

-600.0
300.0
400.0

我想得到两位小数并总结这些值。我无法总结这些值。

是不是这样

```
import java.io.*;
import java.util.*;
import org.apache.poi.hssf.usermodel.*;
import org.apache.poi.ss.usermodel.*;
 public class Hai
{
public static double getSubstraction(double summ, String your)
{
    if (your.contains("-"))
    {
        return main + Double.parseDouble(your.replace("-", ""));
    } 
    else if (your.contains("+"))
    {
        return main - Double.parseDouble(your.replace("+", ""));
    } 
    else 
    {
        return main - Double.parseDouble(your);
    }

}
 public static double getSumm(double sub, String your) 
    {
        if (your.contains("-")) 
        {
            return main - Double.parseDouble(your.replace("-", ""));
        } 
        else if (your.contains("+")) 
        {
            return main + Double.parseDouble(your.replace("+", ""));
        } 
        else 
        {
            return main + Double.parseDouble(your);
        }
    }
public static void main(String[] args)
{
    try 
    {
        double summ, sub;
        FileInputStream file = new FileInputStream(new File("C:/Users/Pradeep.HALCYONTEKDC/Desktop/19-04-2013.xls"));
        HSSFWorkbook workbook = new HSSFWorkbook(file);
        HSSFSheet sheet = workbook.getSheetAt(5);
        Iterator<Row> rowIterator = sheet.iterator();
        while(rowIterator.hasNext()) 
        {
            Row row = rowIterator.next();
            Iterator<Cell> cellIterator = row.cellIterator();
            while(cellIterator.hasNext())
            {
                    Cell cell = cellIterator.next();
                    String Tag=cell.getStringCellValue().toString();
                    cell = row.getCell(0+1);
                    if(cell !=null)
                    if(Tag.contains("ADD"))
                        {
                           String Tag1=cell.getStringCellValue().toString();
                           String[] s= Tag1.split("=");
                           //System.out.println(s[1]);
                           if(!s[1].contains("PATH DOES NOT EXIST"))
                           {
                               getSumm() ;
                             Float foo = Float.parseFloat(s[1].trim());
                             System.out.println("1----  "+foo);
                             for(int i=0; i<5;i++)
                             {
                                 foo+=foo;
                                 //System.out.println(foo);
                             }
                           }
                        }
                    else if(Tag.contains("SUB"))
                        {
                           String Tag1=cell.getStringCellValue().toString();
                           String[] s= Tag1.split("=");
                           if(!s[1].contains("PATH DOES NOT EXIST"))
                           {
                               getSubstraction();
                             System.out.println(s[1].trim());
                           }
                        }

            }
        }
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }   
}
} 
```

帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T15:45:35.827

如果你想使用 java 来处理 excel 数据，对我来说最好的选择是 apache POI 官方网站上有很多教程，如果你在代码中需要一些帮助，你可以询问，我们会尽力帮助你。

将这两种方法添加到您的代码中

```
private static double getSubstraction(double summ, String your) {
    if (your.contains("-")) {
        return summ + Double.parseDouble(your.replace("-", ""));
    } else if (your.contains("+")) {
        return summ - Double.parseDouble(your.replace("+", ""));
    } else {
        return summ  - Double.parseDouble(your);
    }

}

private static double getSumm(double sub, String your) {
    if (your.contains("-")) {
        return sub - Double.parseDouble(your.replace("-", ""));
    } else if (your.contains("+")) {
        return sub  + Double.parseDouble(your.replace("+", ""));
    } else {
        return sub + Double.parseDouble(your);
    }
} 
```

定义两个全局变量`double summ`，`double sub`例如

```
public class MainCreator {

    public static void main(String[] args) throws IOException {
        FileInputStream file = new FileInputStream(new File("workbook.xls"));
        Workbook wb = new HSSFWorkbook(file);
        Sheet sh = wb.getSheetAt(0);
        int lastRownum = sh.getLastRowNum();
        double summ = 0;
        double sub = 0;

        for (int i = 0; i < lastRownum + 1; i++) {
            Row row = sh.getRow(i);

            Cell cell1 = row.getCell(1);
            Cell cell2 = row.getCell(2);

            if (cell1 != null && cell2 != null) {
                String cellValue1 = cell1.getStringCellValue();
                String cellValue2 = cell2.getStringCellValue();

                String stringNumber = cellValue2.split("=")[1].trim();
                if (cellValue1.contains("ADD")) {
                    if (cellValue2.split("=")[1].trim().contains("PATH DOES NOT EXIST")) {
                        System.out.println("Path Does Not Exist");
                    } else {
                        System.out.println(cellValue1 + "/" + stringNumber);
                        summ = getSumm(summ, stringNumber);
                    }

                } else if (cellValue1.contains("SUB")) {
                    if (cellValue2.split("=")[1].trim().contains("PATH DOES NOT EXIST")) {
                        System.out.println("Path Does Not Exist");
                    } else {
                        System.out.println(cellValue1 + "/" + stringNumber);
                        sub = getSubstraction(sub, stringNumber);
                    }
                } else {
                    System.out.println("Smt wrong");
                }
            }
        }
        System.out.println("Summ = " + summ);
        System.out.println("Sub = " + sub);
    }

    private static double getSubstraction(double main, String your) {
        if (your.contains("-")) {
            return main + Double.parseDouble(your.replace("-", ""));
        } else if (your.contains("+")) {
            return main - Double.parseDouble(your.replace("+", ""));
        } else {
            return main - Double.parseDouble(your);
        }
    }

    private static double getSumm(double main, String your) {
        if (your.contains("-")) {
            return main - Double.parseDouble(your.replace("-", ""));
        } else if (your.contains("+")) {
            return main + Double.parseDouble(your.replace("+", ""));
        } else {
            return main + Double.parseDouble(your);
        }
    }
} 
```

# c++ - 类成员函数在声明为 const 后更改类成员变量

> ID：16087368
> 
> 赞同：0
> 
> 时间：2013-04-18T15:40:58.913
> 
> 标签：c++, memory, opencv, constants

考虑以下代码（不完全是我正在使用的代码，只是为了突出问题）

```
class Pointarr //creates an array of points which can be recalled by object
{
    public:
    Pointarr(int, int, bool);
    ~Pointarr(){};

    mutable Point array[];

    private:
    void fillarray(int) const;

    int const minpix;
    int const mirrors;
    bool const canvasfeed;
};

void Pointarr::fillarray(int mirrors) const
{
    Point zero(0,0);
    for(int i = 0; i < mirrors; i++)
    {
        array[i] = zero;
    }
}

Pointarr::Pointarr(Mat dt, int mpx, int mir, bool cf) : dot(dt), minpix(mpx), mirrors(mir), canvasfeed(cf)
{
    fillarray(mirrors);
} 
```

我会先解决一些问题，我在 linux 上本地使用 gcc c++ 编译器。我正在使用 OpenCV 库，其中 Point 是一个变量类型，它以 (x,y) 格式保存坐标。我相信它只是在内存中使用足够的空间来保存每个数字，因此对于两个整数，x 为 4 字节，y 为 4 字节。

我遇到的问题是构造函数声明（Pointarr（））中的变量正确初始化，我确认了这一点，但是当我调用fillarray（int）函数时，该函数用零值填充数组，（0， 0)，它会导致变量 mirrors 和 minpix 都变为 0，而 canvasfeed 保持不变，但这仅在 mirrors 等于 1 时。

现在，让我们指定一些东西，你会注意到当 mirrors 为 1 时，填充数组中的循环只运行一次，这意味着数组只有一个值（一个点）。如果我将 mirrors 设置为 2，那么 canvasfeed 也变为 0。我认为 fillarray 函数将用于保存我的私有变量的相同内存分配给数组，因此更改了我的私有变量。这是一个问题，因为我以后需要它们。

问题是，我被引导相信将私有变量设为 const 意味着如果变量在任何时候发生更改，编译器都会抱怨，但在这种情况下它编译得很好，如果我说实话，虽然我不完全理解如何应该使用 const （几乎不使用）。

所以最后的问题是，如何避免让阵列使用我需要的其他内存，但仍将其初始化为具有与镜像相同数量的元素插槽。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T15:45:21.493

> 我被引导相信将私有变量设为 const 意味着如果在任何时候变量被更改，编译器都会抱怨。

要么你误解了，要么你被错误地相信了。有多种方法可以修改固有`const`成员，编译器甚至可能无法检测到它。最终，尽管这会导致未定义的行为。

您是确保直接或间接永远不会修改固有`const`数据成员的人。

* * *

```
 mutable Point array[]; 
```

被称为 类型的不完整数组`Point`，它保证只存储单个元素。当您使用它来存储更​​多元素时，您最终会写入超出数组范围的内容，从而导致**Undefined Behavior**。

你需要使用一个向量：

```
mutable std::vector<Point> array; 
```

# java - 有没有人有使用 FtpClient.listFiles 在 ListView 中显示文件的示例？

> ID：16087369
> 
> 赞同：0
> 
> 时间：2013-04-18T15:41:19.803
> 
> 标签：java, android, apache, listview, ftp

我正在使用 Apache Commons ftp 库并使用 System.out.println() 获得文件列表，但是如何将返回的文件名加载到 ListView？我已经搜索过，但找不到任何显示这一点的示例。有没有人有在 ListView 中显示 FTP 文件的示例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T21:04:28.613

```
liveToggle
                .setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {
                    public void onCheckedChanged(CompoundButton buttonView,
                            boolean isChecked) {
                        if (isChecked) {
                            directoryEntries.clear();

                            FTPClient client = new FTPClient();

                            try {
                                client.connect(address);
                                client.login(username, password);

                                //
                                // Obtain a list of filenames in the current
                                // working
                                // directory. When no file found an empty array
                                // will
                                // be returned.
                                //
                                String[] names = client.listNames();
                                Drawable currentIcon = null;
                                for (String name : names) {
                                    File tmpFile = new File(name);
                                    String fileName = tmpFile.getName();
                                    if (checkEndsWithInStringArray(
                                            fileName,
                                            getResources().getStringArray(
                                                    R.array.fileEndingJs))) {
                                        currentIcon = getResources()
                                                .getDrawable(R.drawable.mimejs);
                                    } else if (checkEndsWithInStringArray(
                                            fileName,
                                            getResources().getStringArray(
                                                    R.array.fileEndingHTML))) {
                                        currentIcon = getResources()
                                                .getDrawable(
                                                        R.drawable.mimehtml);
                                    } else if (checkEndsWithInStringArray(
                                            fileName,
                                            getResources().getStringArray(
                                                    R.array.fileEndingCSS))) {
                                        currentIcon = getResources()
                                                .getDrawable(R.drawable.mimecss);
                                    } else if (checkEndsWithInStringArray(
                                            fileName,
                                            getResources().getStringArray(
                                                    R.array.fileEndingXML))) {
                                        currentIcon = getResources()
                                                .getDrawable(R.drawable.mimexml);
                                    } else if (checkEndsWithInStringArray(
                                            fileName,
                                            getResources().getStringArray(
                                                    R.array.fileEndingPhp))) {
                                        currentIcon = getResources()
                                                .getDrawable(R.drawable.mimephp);
                                    } else {
                                        currentIcon = getResources()
                                                .getDrawable(R.drawable.mimetxt);
                                    }
                                    directoryEntries.add(new IconifiedText(
                                            tmpFile.getPath(), currentIcon));
                                    System.out.println("Name = " + name);
                                }
                                FTPFile[] ftpFiles = client.listFiles();
                                for (FTPFile ftpFile : ftpFiles) {
                                    //
                                    // Check if FTPFile is a regular file
                                    //
                                    if (ftpFile.getType() == FTPFile.FILE_TYPE) {
                                        System.out.println("FTPFile: "
                                                + ftpFile.getName()
                                                + "; "
                                                + FileUtils
                                                        .byteCountToDisplaySize(ftpFile
                                                                .getSize()));
                                    }
                                }
                                client.logout();
                            } catch (IOException e) {
                                e.printStackTrace();
                            } finally {
                                try {
                                    client.disconnect();
                                } catch (IOException e) {
                                    e.printStackTrace();
                                }
                            }
                        }
                    }

                }); 
```

# iphone - 在 cocos2d 中使用 NSTimer 制作随机对象

> ID：16087376
> 
> 赞同：1
> 
> 时间：2013-04-18T15:41:43.993
> 
> 标签：iphone, ios, cocoa-touch, random, cocos2d-iphone

嗨，我正在用 cocos2d 制作游戏。我想用`NSTimer`. 对象存储在一个`NSArray`。我使用以下方式，但每次计时器初始化时都会发生同样的事情。就像随机不起作用一样。我感觉不妥。如果你能告诉我哪里出了问题，我会很高兴。或者简单地告诉我如何访问数组的随机对象。

```
 -(id)init{
        if (self = [super init]) {
                         ....
                     timer = [NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(randomObjects) userInfo:nil repeats:NO];
                         ....
    }
    return self;
}
-(void)randomObjects{

    if (!isPaused) {
        srand(time(NULL));
        int randomObjectIndex = rand()%self.ObjectCount_forThisLevel;
        NSLog(@"randomObjectIndex = %d",randomObjectIndex);
        int randomObjectID = [[self.arrayForObjects objectAtIndex:randomObjectIndex] intValue];
        NSLog(@"randomObjectID = %d",randomObjectID);
        switch (randomObjectID) {
            case kBoxObject:{
                srand(time(NULL));
                int x1 = rand()%200+100;
                [self createBoxAtLocation:CGPointMake(x1, 500)];
                break;
            }
            case kBrickObject:{
                srand(time(NULL));
                int x2 = rand()%200+100;
                [self createBrickAtLocation:CGPointMake(x2, 500)];
                break;
            }
            case kOrangeObject:{
                srand(time(NULL));
                int x3 = rand()%200+100;
                [self createOrangeAtLocation:CGPointMake(x3, 500)];
                break;
            }
            case kBoardObject:{
                srand(time(NULL));
                int x4 = rand()%200+100;
                [self createBoardAtLocation:CGPointMake(x4, 500)];
                break;
            }
            default:
                break;
        }
    }
    timer = [NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(randomObjects) userInfo:nil repeats:NO];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T21:12:44.537

对于 cocos2d，不推荐使用 NSTimer，主要是因为它不受内置的暂停/恢复功能的影响。相反，按如下方式安排方法：

```
[self schedule:@selector(randomObjects:) interval:1.0f]; 
```

您还必须将 randomObjects 定义更改为：

```
-(void)randomObjects:(ccTime)dt 
```

其中 dt 是实际经过的时间。

最后，不要使用 rand()，而是使用：

```
arc4random() 
```

该功能自动播种，因此您无需每次都担心播种。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T16:42:39.230

首先确保您的计时器是从 init 方法调用的。使用断点查看程序是否停在那里。

其次，将“repeats”参数设为“YES”以不断获取随机对象：

```
timer = [NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(randomObjects) userInfo:nil repeats:YES]; 
```

如果它没有被调用，您可能希望将其移动到视图控制器的生命周期方法，例如：

```
- (void)viewDidLoad {
[super viewDidLoad];
[self setTimer:[NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(randomObjects) userInfo:nil repeats:YES]];
} 
```

第三，从“randomObjects”方法中删除定时器调用——你可能不想每次都重新创建定时器。

要访问随机索引，请尝试使用 arc4random()

```
arc4random() % 4 
```

将生成 0、1、2 或 3

同样，如果你有一个数组，并且想从中访问随机对象，你可以这样做：

```
NSInteger index = arc4random() % [[self arrayForObjects] count]
YourObject* object = [self arrayForObjects][index]; 
```

如果您希望计时器停止重复，只需调用：

```
[timer invalidate]; 
```

试试看。

# php - PHP shell_exec 不适用于 ssh

> ID：16087377
> 
> 赞同：1
> 
> 时间：2013-04-18T15:41:50.010
> 
> 标签：php, ssh, shell-exec

Shell_exec 在 PHP 中可以正常工作，但是在使用 ssh 时它不会返回任何输出。

```
<?php
    echo shell_exec("/usr/bin/ssh -i /tmp/key server 'ls'");
?> 
```

上面的命令在 bash shell 中运行良好，以下显示 PHP 中的正确输出

```
<?php
    echo shell_exec("ls");
?> 
```

我希望这可以在不使用第三方 php 库的情况下完成......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T19:30:43.620

使用[phpseclib，一个纯 PHP SSH2 实现](http://phpseclib.sourceforge.net/index.html)：

```
<?php
include('Net/SSH2.php');

$ssh = new Net_SSH2('www.domain.tld');
$key = new Crypt_RSA();
$key->loadKey(file_get_contents('/tmp/key'));
if (!$ssh->login('username', $key)) {
    exit('Login Failed');
}

echo $ssh->exec('ls');
?> 
```

# objective-c - 在 theos 错误中挂钩 IVAR

> ID：16087378
> 
> 赞同：2
> 
> 时间：2013-04-18T15:41:51.117
> 
> 标签：objective-c, ivar, theos

我已经解密了一些头文件，这是我想从中挂钩一些 ivars 的头文件。

```
/**
 * This header is generated by class-dump-z 0.2a.
 * class-dump-z is Copyright (C) 2009 by KennyTM~, licensed under GPLv3.
 *
 * Source: (null)
 */

#import <XXUnknownSuperclass.h> // Unknown library
#import "InAppNotificationMessageViewDelegate.h"
#import "FBMSessionClassProvidable.h"

@class InAppNotificationContainerView, ProjectGatingChecker, FBMViewProvider, InAppNotificationBadgeCounter, FBMBeeperListFetcher;
@protocol FBMNavigator, FBProvider, FBMAppProperties;

@interface InAppNotificationManager : XXUnknownSuperclass <InAppNotificationMessageViewDelegate, FBMSessionClassProvidable> {
    id<FBMNavigator> _navigator;
    FBMBeeperListFetcher* _beeperListFetcher;
    InAppNotificationBadgeCounter* _badgeCounter;
    FBMViewProvider* _notificationMessageViewProvider;
    InAppNotificationContainerView* _notificationContainerView;
    FBMViewProvider* _notificationContainerViewProvider;
    id<FBMAppProperties> _appProperties;
    ProjectGatingChecker* _gatingChecker;
    id<FBProvider> _rootNavControllerProvider;
    id<FBProvider> _threadViewControllerProvider;
}
@property(retain, nonatomic) id<FBMAppProperties> appProperties;
@property(retain, nonatomic) id<FBProvider> threadViewControllerProvider;
@property(retain, nonatomic) id<FBMNavigator> navigator;
@property(retain, nonatomic) ProjectGatingChecker* gatingChecker; 
```

所以我想挂钩 gatingChecker ivar，我使用了 logify 并创建了这些行：

```
%hook InAppNotificationManager

- (void)setGatingChecker:(ProjectGatingChecker* )gatingChecker { %log; %orig; }
- (ProjectGatingChecker* )gatingChecker { %log; ProjectGatingChecker*  r = %orig; NSLog(@" = %@", r); return r; }

%end 
```

当我尝试编译它时，我得到：

```
Tweak.xm:9: error: ‘ProjectGatingChecker’ has not been declared
Tweak.xm:9: error: ‘ProjectGatingChecker’ has not been declared
Tweak.xm:9: error: expected initializer before ‘*’ token
Tweak.xm:9: error: expected initializer before ‘*’ token
Tweak.xm:353: error: ‘ProjectGatingChecker’ has not been declared
Tweak.xm:354: error: expected initializer before ‘*’ token
Tweak.xm: In function ‘void _logosLocalInit()’:
Tweak.xm:361: error: ‘_logos_method$_ungrouped$InAppNotificationManager$gatingChecker’ was not declared in this scope
Tweak.xm:361: error: ‘_logos_orig$_ungrouped$InAppNotificationManager$gatingChecker’ was not declared in this scope
make[2]: *** [obj/Tweak.xm.673b4229.o] Error 1
make[1]: *** [internal-library-all_] Error 2 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-27T06:51:00.700

您使用 MSHookIvar 挂钩实例变量

```
ProjectGatingChecker *myGatingChecker = MSHookIvar<ProjectGatingChecker *>(self, "_gatingChecker"); 
```

您现在可以使用 myGatingChecker，它是一个指向挂钩变量的指针。

# python - 如何为 python 创建一个打赏程序？

> ID：16087386
> 
> 赞同：0
> 
> 时间：2013-04-18T15:42:07.797
> 
> 标签：python

我对编程非常陌生，我目前正在从我购买的一本书中学习 python。在每一章的最后，你都面临着根据你在前一章学到的东西编写程序的挑战。它要求创建一个程序，让用户输入餐馆账单的金额，并告诉他们两个金额一个 15 % 和 20% 小费，但书中没有讨论如何在 python 中计算百分比。我曾尝试在网上查找，但没有任何相关信息。我确信这很简单，但在理解这一点之前，我不会继续阅读这本书。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T15:56:31.120

```
bill = raw_input("Please enter restaurant total\n")
print "15 %%: %.2f" %round((float(bill)*.15),2)
print "20 %%: %.2f" %round((float(bill)*.20),2) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T15:56:40.980

这个怎么样：

```
# input will prompt user for a bill amount at the command line
amount = float(input('Enter the amount of the bill: '))

tip_15 = amount * .15
tip_20 = amount * 0.2

print('A 15%% tip is: %.2f. A 15%% tip is: %.2f.' % (tip_15, tip_20))

print('Total price with 15%% tip is: %.2f' % (amount + tip_15))
print('Total price with 20%% tip is: %.2f' % (amount + tip_20)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T16:00:29.750

```
def calc_tips(total, tip_percentages):
    return [(x, x*total) for x in tip_percentages]

>>> print calc_tips(100, (.15, .2))
[(0.15, 15.0), (0.2, 20.0)] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T16:00:41.553

您可以乘以 1.0 以获得浮点值

```
金额= 125
提示1 = 15
提示2 = 20

打印 "tip1=" , (金额 * (1.0 * tip1/100))
打印 "tip2=" , (金额 * (1.0 * tip2/100))

```

# c# - Selenium Grid 2 Internet Explorer 真的很慢

> ID：16087387
> 
> 赞同：3
> 
> 时间：2013-04-18T15:42:09.057
> 
> 标签：c#, internet-explorer, selenium

我一直在尝试 Selenium Grid 2，我注意到 Grid 2 的 Internet Explorer 非常慢（Chrome 或 Firefox 没有问题）。我知道通常 Internet Explorer 使用 Selenium 很慢，但使用 Grid 2，每个键发送到文本框之间会有很大的延迟，比如 4.5 秒的延迟。不知道是不是配置的原因。以下是我如何使用 1 个 IE 实例启动节点：

```
java -jar selenium-server-standalone-2.32.0.jar -role node -hub http://localhost:4444/grid/register -port 5553 -nodeTimeout 120 -maxSessions 1 -browser browserName=iexplore,maxInstances=1 -Dwebdriver.ie.driver=C:\grid2\drivers\IEDriverServer.exe 
```

我目前正在使用 IWebDriver 和 C# 测试 grid2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-06T23:28:18.033

通过网格，我个人没有注意到 IE9 的缓慢性。不过，我分别运行 Grid 和 Hub。

如果按字符输入字段太慢，那么您可以在文本字段上“设置值”，这样您就无需等待每个键输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-17T13:15:03.827

我们遇到了同样的问题，并通过将 IEDriverServer 更新到 2.41 版解决了这个问题。

旁注：为我们修复它的实际版本是[IEDriverServer_Win32_2.41.0.zip](http://selenium-release.storage.googleapis.com/2.41/IEDriverServer_Win32_2.41.0.zip)，即使这个 Grid 节点是 64 位的。维护此设置的开发人员表示，64 位驱动程序版本 2.41.0 仍然表现出相同的行为。

背景：它必须是 Selenium Grid 节点上的东西，与客户端无关。在 Selenium Grid 节点上添加了在输入文件中输入文本的延迟。客户端仅在设置 DOM 元素值的 POST 请求中发送 JSON 对象，其中值指定为数组。

```
 client$ sudo ngrep '' port 4444
    ...
    T client:40484 -> hub:4444 [AP]
      POST /wd/hub/session/0002d13c-c33e-4352-89be-eb6c0bfe16b7/element/6/value HTTP/1.1..Host: hub:4444..Accept-Encoding: identity..Conte
      nt-Length: 195..Connection: keep-alive..Content-type: application/json;charset="UTF-8"..POST: /wd/hub/session/0002d13c-c33e-4352-89be-eb6c0b
      fe16b7/element/6/value..Accept: application/json..User-Agent: Python http auth....
    T client:40484 -> hub:4444 [AP]
      {"sessionId": "0002d13c-c33e-4352-89be-eb6c0bfe16b7", "id": "6", "value": ["S", "a", "n", " ", "D", "o", "n", "a", "t", "o", " ", "M", "i", 
      "l", "a", "n", "e", "s", "e", " ", "(", "M", "I", ")"]} 
```

# caml - Caml Query：如何添加附加参数？

> ID：16087388
> 
> 赞同：0
> 
> 时间：2013-04-18T15:42:09.493
> 
> 标签：caml

我有一个工作查询，我想在查询中添加其他参数，例如：

```
<Or>
<Eq><FieldRef Name="Service_x0020_Line" /><Value Type="Choice">RPCS</Value></Eq>
<Eq><FieldRef Name="Service_x0020_Line" /><Value Type="Choice">PLM</Value></Eq>
</Or> 
```

我怎么能在这里添加它？：

```
<And>
<Or>
<Or>
    <Eq><FieldRef Name='BM_x0020_Status' /><Value Type='Choice'>Completed</Value></Eq>
    <Eq><FieldRef Name='BM_x0020_Status' /><Value Type='Choice'>Not yet submitted</Value></Eq>
</Or>
    <Eq><FieldRef Name='BM_x0020_Status' /><Value Type='Choice'>For Approval</Value</Eq>
    </Or>
    <Eq><FieldRef Name='Approval_x0020_Month' /><Value Type='Text'>"+approvalmonth+"</Value></Eq>
    </And> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T16:32:09.910

```
<And>
  <And>
    <Or>
      <Or>
        <Eq><FieldRef Name='BM_x0020_Status' /><Value Type='Choice'>Completed</Value></Eq>
        <Eq><FieldRef Name='BM_x0020_Status' /><Value Type='Choice'>Not yet submitted</Value></Eq>
      </Or>
      <Eq><FieldRef Name='BM_x0020_Status' /><Value Type='Choice'>For Approval</Value</Eq>
    </Or>
    <Or>
      <Eq><FieldRef Name="Service_x0020_Line" /><Value Type="Choice">RPCS</Value></Eq>
      <Eq><FieldRef Name="Service_x0020_Line" /><Value Type="Choice">PLM</Value></Eq>
    </Or>
  </And>
  <Eq><FieldRef Name='Approval_x0020_Month' /><Value Type='Text'>"+approvalmonth+"</Value></Eq>
</And> 
```

# httpclient - Dart HttpClient 不发布

> ID：16087389
> 
> 赞同：0
> 
> 时间：2013-04-18T15:42:13.253
> 
> 标签：httpclient, dart, zabbix

我正在尝试使用 Zabbix 服务中的一些数据。它适用于 NodeJS，但使用 Dart 我什么也没收到。也许我遗漏了一些东西，但我在我的应用程序的这一部分上花了很多时间。我正在使用 M4 Dart 编辑器（顺便说一句很棒）。这是我的飞镖代码：

```
const String path = "http://someIp/zabbix/api_jsonrpc.php";

Map zabbix = {
      "jsonrpc": "2.0",
      "method": "user.authenticate",
      "params": {
        "user": "user",
        "password": "password"
      },
      "id": 1,
      "auth": null
    };

HttpClient cliente = new HttpClient();

    cliente.postUrl( new Uri.fromString( path ))
        .then(( HttpClientRequest req ) {
          req.headers.contentType = new ContentType( "application", "json-rpc", charset: "utf-8" );
          req.headers.add( HttpHeaders.CONNECTION, "keep-alive");
          req.write( json.stringify( zabbix ));
          return req.close();
      }).then(( HttpClientResponse res ) {
        StreamSubscription st = res.listen( null );

        st.onData(( chunk ) => print( chunk));
      }); 
```

这是我的 Nodejs 代码：

```
var opt = {
        host: 'someIp',
        path: '/zabbix/api_jsonrpc.php',
        method: 'POST',
        headers: {
            'content-type': 'application/json-rpc'
        }
    };

var zabbix = {
            "jsonrpc": "2.0",
            "method": "user.authenticate",
            "params": {
                "user": "user",
                "password": "password"
            },
            "id": 1,
            "auth": null
        },
        req = http.request(opt, function( res ) {
          res.setEncoding('utf8');

          res.on('data', function(chunk) {
            console.log(chunk);
          });
        });

    req.write(JSON.stringify(zabbix), 'utf8');
    req.end(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-26T05:59:42.983

```
import 'dart:convert'; 
```

和

```
cliente.postUrl( Uri.parse( path ))
  .then(( HttpClientRequest req ) {
    req.headers.contentType = new ContentType( "application", "json-rpc", charset: "utf-8" );
    req.headers.add( HttpHeaders.CONNECTION, "keep-alive");
    req.write( JSON.encode( zabbix ));
    return req.close();
  }).then(( HttpClientResponse res ) {
    StreamSubscription st = res.listen( null );

    st.onData(( chunk ) => print( chunk));
}); 
```

# asp.net - Asp.net Insert Into 查询本地数据库（访问）

> ID：16087391
> 
> 赞同：0
> 
> 时间：2013-04-18T15:42:17.877
> 
> 标签：asp.net, database, ms-access, insert-into

我不太擅长对本地数据库（Microsoft Access）运行 sql 查询。我正在尝试编写一个代码，当用户注册他们的详细信息时，它将其插入数据库。我已经编写了以下代码，但它不起作用。我想我错过了一些东西。任何帮助将不胜感激。

```
 public void InsertUserDetails(string fname, string sname, string uid, string password, string email)
{
    //Connection string for the datbase
    string database = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=|DataDirectory|/Forum.accdb;Persist Security Info=True";
    OleDbConnection myConn = new OleDbConnection(database);

    //Execute the query
    string queryStr = "Insert into Users(Username, Password, Firstname, Surname, Email) values ('" + fname + "','" + sname + "','" + uid + "','" + password + "','" + email + "')";

     // Create a command object 
    OleDbCommand myCommand = new OleDbCommand(queryStr, myConn);
    // Open the connection 
    myCommand.Connection.Open();
    myCommand.ExecuteNonQuery();
    myCommand.Connection.Close();

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T15:46:16.953

`Password`是一个[保留字](http://allenbrowne.com/AppIssueBadWord.html#P)。将该字段名称括在方括号中以避免混淆数据库引擎。

```
string queryStr = "Insert into Users (Username, [Password], Firstname, Surname, Email) values ('" + fname + "','" + sname + "','" + uid + "','" + password + "','" + email + "')"; 
```

# c# - c#:将excel工作簿复制到另一个

> ID：16087393
> 
> 赞同：-1
> 
> 时间：2013-04-18T15:42:21.793
> 
> 标签：c#, excel, excel-2010

我已经编写了代码来将工作表的副本复制到一个新的 excel 文件中。下面是我的 C# 代码，问题是缺少一些命名单元格，我在 Excel-2010 中检查了这一点。

C#代码：

```
string strPath=@"C:\NewFolder\somexcelfile.xls";
Excel.Workbook souWorkbook = xCel.Workbooks.Open(strPath);
Excel.Workbook destWorkbook = xCel.Workbooks.Add();

foreach (Excel.Worksheet wkSheet in souWorkbook.Worksheets)
{
   wkSheet.Copy(destWorkbook.Worksheets[1]);
}
destWorkbook.SaveCopyAs("C:\NewFolder\copy.xls"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T15:55:43.587

如果您需要复制命名单元格，您可以使用以下代码示例

```
Sub Copy_All_Defined_Names()
   ' Loop through all of the defined names in the active
   ' workbook.
     For Each x In ActiveWorkbook.Names
      ' Add each defined name from the active workbook to
      ' the target workbook ("Book2.xls" or "Book2.xlsm").
      ' "x.value" refers to the cell references the
      ' defined name points to.
      Workbooks("Book2.xls").Names.Add Name:=x.Name, _
         RefersTo:=x.Value
   Next x
End Sub 
```

# html - 我的边界不对齐？

> ID：16087395
> 
> 赞同：5
> 
> 时间：2013-04-18T15:42:27.640
> 
> 标签：html, navigationbar

我在 HTML5 中有以下导航栏：

```
<div id = 'nav'>
    <ul>
        <li>
            <a href = ''>HOME</a>
        </li>
        <li class = 'final_nav'>
            <a href = ''>FAQ</a>
        </li>
    </ul>
</div> 
```

使用此 CSS 进行样式设置：

```
#nav {
    border: 1px solid #000;
    padding: 0.1px;
    background-color: #E5E5E5;
}
#nav li {
    border-left: 1px solid #000;
    padding: 20px;
    display: inline;
}
.final_nav {
    border-right: 1px solid #000;
}
#nav a {
    display: block-inline;
} 
```

但是左右边框不与顶部和底部对齐： ![导航栏](https://i.stack.imgur.com/lkYW1.png) 这是为什么呢？
谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T15:46:05.110

```
#nav li {
    border-left: 1px solid #000;
    padding: 17px;
    display: inline;
} 
```

这应该解决它。

# java - 使用 OpenCMIS 上传文件没有内容

> ID：16087397
> 
> 赞同：2
> 
> 时间：2013-04-18T15:42:32.317
> 
> 标签：java, file-upload, alfresco, opencmis

我正在尝试使用 Apache Chemistry OpenCMIS 将文件上传到我的 Alfresco 存储库中。文件已创建且属性正确但没有内容，文件为 0 字节。我已经仔细检查过，源文件没有任何问题。这是我的Java代码：

```
File content = new File(somepath);
try{
                    String mimeType = new  MimetypesFileTypeMap().getContentType(content);
                    logger.debug("mimetype: " + mimeType);
                    logger.debug("file: " + content.getAbsolutePath());
                    Map<String, Object> properties = new HashMap<String, Object>();
                    properties.put(PropertyIds.OBJECT_TYPE_ID, BaseTypeId.CMIS_DOCUMENT.value());
                    properties.put(PropertyIds.NAME, content.getName());

                    FileInputStream fis = new FileInputStream(content);
                    DataInputStream dis = new DataInputStream(fis);
                    byte[] bytes = new byte[(int) content.length()];
                    dis.readFully(bytes);

                    ContentStream cs = new ContentStreamImpl(content.getName(), BigInteger.valueOf(bytes.length), mimeType, dis);
                    Folder folder = (Folder) session.getObjectByPath("/myfolder");
                    Document doc = folder.createDocument(properties, cs, VersioningState.MAJOR);
                    return doc.getId();
                }catch(CmisBaseException e){
                    logger.error("error uploading file: "+ e.getMessage(), e);
                } 
```

没有捕获到异常。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T05:43:10.387

我认为您传递的内容流存在问题。

尝试用这个替换你的代码

```
String docText = "This is a sample document";
byte[] content = docText.getBytes();
InputStream stream = new ByteArrayInputStream(content);
ContentStream contentStream = getSession().getObjectFactory().createContentStream(filename, Long.valueOf(content.length), "text/plain", stream); 
```

您可以在下一步中使用新文件中的内容逐渐更改此简单文本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-28T23:30:46.703

我正在寻找一个关于这个的例子，并找到了你的问题，如果我没记错的话，原来的问题是你正在预先读取缓冲区，所以当你将它传递给内容流时指针位于它的末尾，我正在制作一个小类，只是为了测试我以后想在程序中实现的一些功能，这个块适用于您的初始方法。

```
File content = new File("C:\\\\asdf.asdf");
    try{
        String mimeType = new  MimetypesFileTypeMap().getContentType(content);
        System.out.println("mimetype: " + mimeType);
        System.out.println("file: " + content.getAbsolutePath());
        Map<String, Object> properties = new HashMap<String, Object>();
        properties.put(PropertyIds.OBJECT_TYPE_ID,BaseTypeId.CMIS_DOCUMENT.value()+",P:cm:titled");
        properties.put("cm:description", "upload desde código");
        properties.put(PropertyIds.NAME, content.getName());
        FileInputStream fis = new FileInputStream(content); 
        DataInputStream dis = new DataInputStream(fis);                    
        ContentStream cs = new ContentStreamImpl(content.getName(),BigInteger.valueOf(content.length()), mimeType, dis);
        Document doc = newFolder.createDocument(properties, cs, VersioningState.MAJOR);
    }catch(CmisBaseException ex){
        Logger.getLogger(CMISTest.class.getName()).log(Level.SEVERE, null, ex);
    } catch (FileNotFoundException ex) {
        Logger.getLogger(CMISTest.class.getName()).log(Level.SEVERE, null, ex);
    } catch (IOException ex) {
        Logger.getLogger(CMISTest.class.getName()).log(Level.SEVERE, null, ex);
    } 
```

# javascript - javascript中的字符串替换

> ID：16087402
> 
> 赞同：0
> 
> 时间：2013-04-18T15:42:43.137
> 
> 标签：javascript

所以我有这个字符串`var total_res = R4-4R4-5;`，我想用 替换`R4-5`子字符串`""`，但到目前为止我已经尝试过这段代码，但它不起作用：

Javascript：

```
<script>
   $(document).ready(function(){
        ss = "R4-5";
        lool = total_res.replace(ss,"");
        alert(lool);//it alerts the same original string
   });    
</script> 
```

怎么了？谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T15:45:10.943

我不确定您是否有意，但`total_res`应该将其声明为字符串...例如：

```
var total_res = "R4-4R4-5"; 
```

使用您的代码，它的工作原理如下：

[http://jsfiddle.net/rV8Cb/](http://jsfiddle.net/rV8Cb/)

如果您检查浏览器的（错误）控制台，您会看到：`Unexpected token ILLEGAL`.

请注意，`.replace()`仅替换第一次出现的字符串。如果要替换字符串中每次出现的“R4-5”，则必须使用正则表达式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T15:45:51.380

您需要在引号中定义 total_res。然后它对我来说很好。

`var total_res = "R4-4R4-5";`

[http://jsfiddle.net/PxJrn/](http://jsfiddle.net/PxJrn/)

# android - 自定义android属性可以有条件语句吗？

> ID：16087404
> 
> 赞同：4
> 
> 时间：2013-04-18T15:42:45.510
> 
> 标签：android, xml, attr

大多数人都知道在 Android 中可以为自定义视图提供自定义属性。例如，[在 Stackoverflow 上的这个线程](https://stackoverflow.com/q/3441396/2135787)中对此进行了非常出色的解释。然而，我的问题是：

**是否有可能仅在满足另一个条件时才呈现这些属性？**

我的意思是这样的（伪代码）：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <declare-styleable name="MyCustomView">
        <attr name="isClock" format="boolean" />
    </declare-styleable>

    <if name="isClock" value="true">
        <attr name="timezone" format="string">
    </if>
    <else>
        <attr name="somethingElse" format="string>
    </else>
</resources> 
```

现在，不必使用“错误”属性的一种可能性是在 Java 代码中执行此操作，显然：

```
public class MyCustomView {
    public MyCustomView(Context context) {

        TypedArray styleables = context.obtainStyledAttributes(attrs, R.styleable.MyCustomView);
        boolean choice = styleables.getBoolean(R.styleable.MyCustomView_isClock, false);

        if(choice) {
            // It's a clock, react to the other attrs
        } else {
            // Don't react
        }

        styleables.recycle();
    }
} 
```

另一种方法是按照 ilomambo 在他的回答中提出的建议：创建具有不同名称的各种自定义视图，并让它们只具有属于它们的属性。

但是我非常问自己是否有可能不首先混淆 .xml 文件的程序员，而只向他提供他真正需要的东西组合在一个地方。毕竟这**已经**由 Android 完成了（嗯...... IDE/Lint/解析器......）当提示例如在使用时应该设置视图的宽度或高度`0dp`时`layout_weight`。

但如果我不得不猜测我会说这可能只有在我重写 Android XML-Parser 时才有可能......有人可以证明我错了吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-28T14:05:37.853

如果我理解正确，您有一个自定义视图，可以根据第三个属性获得不同的属性。

为了让 XML 程序员了解非法属性，我建议使用以下两种方法之一：

1.  （简单的方法）为每个“名称”和每个自己的`declare-styleable`组创建一个自定义视图。

    ```
    <resources>
        <declare-styleable name="ClockCustomView">
            <attr . . . />
        </declare-styleable>
        <declare-styleable name="OtherCustomView">
            <attr . . . />
        </declare-styleable>
        <!-- Common attributes are declared outside declare-styleable -->
        <attr . . . />
    </resources> 
    ```

2.  （更完整但更复杂）为您的 XML 创建一个 XSD 模式，这样程序员就可以根据您的规则验证 XML。XSD 本身就是 XML，因此您只需学习元素。有关 XSD 的更多信息，请参阅[此链接](http://www.w3schools.com/schema/default.asp#gsc.tab=0)，如果您也使用 google 搜索，网络上有很多信息。

# hadoop - 如何将关系数据库转换为一个 Bigtable

> ID：16087405
> 
> 赞同：0
> 
> 时间：2013-04-18T15:42:47.467
> 
> 标签：hadoop, nosql, hbase, bigtable, sqoop

我想创建一个包含数据库中所有表的所有数据的大表，然后将该表导出到 csv 文件中，然后将该文件导入到 Hbase 中？我的问题是第一步，即如何从所有数据库表中创建大表？我会感谢任何帮助。提前致谢 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T01:00:33.820

如果您希望将所有数据转储到 HBase 或 HDFS，您可以使用 sqoop 将所有表和数据传输到 HBase。将所有数据转换为一张大表可能效率不高或不可行。请注意，不能将 CLOB/BLOB 数据导出到 CVS 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T08:59:52.620

看看[sqoop](http://sqoop.apache.org/)，可能会有所帮助。

我们使用它将数据从 RDBMS 存储到 Hive 表中。至于 hive，它可以自动创建具有适当列名和类型的表。它还需要`split_by`用于自定义查询的选项，该选项指定如何将数据拆分为块。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T20:50:34.643

为什么要这么做？编写 MapReduce 作业并将输出注入 HBase 表。

# c# - 比较 NaN 和 null 返回不合逻辑的值

> ID：16087407
> 
> 赞同：7
> 
> 时间：2013-04-18T15:42:53.197
> 
> 标签：c#

为什么下面的代码片段返回 1：

```
double i = double.NaN;
double? i2 = null;
i.CompareTo(i2); 
```

从我的角度来看，这没有任何意义。例外会更合适。

你认为这个决定背后的原因是什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T15:49:37.597

从[CompareTo](http://msdn.microsoft.com/en-us/library/fyxd1d26.aspx)的文档中：

> value 参数必须为 null 或 Double 的实例；否则，抛出异常。Double 的任何实例，无论其值如何，都被视为大于 null。

您的示例中的 value 参数是`null`. `NaN`因此被认为大于 null 这就是为什么`CompareTo`正确返回`1`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T15:49:20.900

从 MSDN 文档中`IComparable.CompareTo()`：

> > 根据定义，任何对象比较大于（或跟随）null，并且两个 null 引用比较彼此相等。

这在文档中也很明显`Double.CompareTo(object)`：

> > 如果此实例大于值，则返回一个正整数。- 或 - 此实例是一个数字，而值不是一个数字 (NaN)。- 或 - value 是一个空引用（在 Visual Basic 中为 Nothing）。

正如 Adam Houldsworth 指出的那样，如果`something.CompareTo(somethingElse)`在 somethingElse 为空时抛出异常，那么排序和类似的事情将需要大量额外的异常处理。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-18T15:51:42.643

反编译`CompareTo`的时候`double`可以看到：

```
public int CompareTo(object value)
{
  if (value == null)
    return 1; 
```

只是将空元素放在任何排序序列的底部。

# c - 架构 x86_64 的未定义符号：getRNGstate() 和 putRNGstate()

> ID：16087409
> 
> 赞同：0
> 
> 时间：2013-04-18T15:43:02.850
> 
> 标签：c, r

我正在用 C 编写一个 gibbs 函数，并想使用随机数函数，例如 rnorm()。

我的代码是这样的：

```
#include <stdio.h>
#include <string.h>
#include <R.h>
#include <Rmath.h>
void foo(int *nin, double *x)
{
    int n = nin[0];

    int i;
    GetRNGstate();

    for (i=0; i<n; i++)
    {
        x[i] = rchisq(2);
        Rprintf("%f\n",x[i]);
    }
    // exit R random-gen routine
    PutRNGstate();
} 
```

但是，当我尝试在 Xcode 中构建时，错误消息是：

```
> Undefined symbols for architecture x86_64:   "_GetRNGstate",
> referenced from:
>       _gibbs in main.o   "_PutRNGstate", referenced from:
>       _gibbs in main.o   "_Rf_rchisq", referenced from:
>       _gibbs in main.o   "_Rf_rnorm", referenced from:
>       _gibbs in main.o   "_Rf_runif", referenced from:
>       _gibbs in main.o ld: symbol(s) not found for architecture x86_64 clang: error: linker command failed with exit code 1 (use -v to see
> invocation) 
```

我正在使用 Xcode，我知道我同时拥有 R 和 R64bit。在终端 $R 上运行 R64bit，而我的 Aquamacs 也运行 R64bit。我不知道这是否是不同版本的冲突，如果是，我怎样才能说服 Xcode 正确引用 R？

顺便说一句，我发现 Rh 和 rmath.h 文件至少在 3 个地方！我不知道我应该在 Xcode 中重新定位哪条路径！**目前我正在添加与第三个相同的标题路径。所有#include 工作正常。**

```
R.Frameworks/Headers
R.Frameworks/Versions/2.15/Resources/include
R.Frameworks/Versions/Current/Resources/include 
```

ETC

但无论哪种方式，一个没有任何 rnorm() 类函数的 C 函数都可以工作，R 可以通过 dyn.load() 使用它。

所以请帮忙！

非常感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T17:44:04.363

由于缺少实际代码，您的问题不完整且不可重现。有几个问题我可以建议：

1.  R中有带前导下划线的符号。您无法链接的所有符号通常用作`PutRNGstate()`, `Rf_rchisq()`, ... 也许您只需要修复您不小心设置的开关？

2.  从您的帖子中不清楚您是否希望将某些内容作为动态扩展加载到 R 中，或者您是否想使用这些 R 函数编写独立程序。你可以两者都做。

3.  调用自己编写的函数可能很简单。通过依赖 Rcpp，我们甚至可以 重复`cppFunction('double foo(int df) { return Rf_rchisq(df); }')`调用`foo(3)` （因为 Rcpp 通过它的`RNGScope`类为我们处理 RNG 状态）。

4.  如果您想要独立的东西，请查看编写 R 扩展手册和 Rmathlib 库。我之前发布过一些小例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T16:13:25.993

仅分析编译器输出，它无法找到实现这些功能的代码。通常它们是在库中实现的，也许您没有将代码必须链接到的库集传递给它。

我想说的是，您必须编译或验证您的脚本是否正在使用类似的东西编译您的代码（假设您使用的是 gcc 编译器）：

gcc -o 程序 main.o -llibrary1 -llibrary2 ...

这些库来自您的框架（请记住，如果您的库称为 libxxx.so 您必须传递给 gcc -lxxx ）

# javascript - knockoutjs 使用嵌套数组映射自定义对象

> ID：16087415
> 
> 赞同：2
> 
> 时间：2013-04-18T15:43:23.460
> 
> 标签：javascript, knockout.js, knockout-mapping-plugin, knockout-2.0

我想将此 json 映射到自定义对象。问题是项目不是类型项目对象而是普通对象。我在这里缺少什么？

你可以在这里测试：http: [//jsfiddle.net/5jhpE/](http://jsfiddle.net/5jhpE/)

```
var json = [
    {
        id: 1,
        items: [
            {id: 1, name: 'item1'},
            {id: 2, name: 'item2'},
            {id: 3, name: 'item3'}
        ]
    },
    {
        id: 2,
        items: [
            {id: 4, name: 'item4'},
            {id: 5, name: 'item5'},
            {id: 6, name: 'item6'}
        ]
    },
]

function Data(data) {
    ko.mapping.fromJS(data, {}, this);
}

function Item(data) {
    ko.mapping.fromJS(data, {}, this);
}
var map = {
    create: function(options) {
        return new Data(options.data);
    },
    items: function(options) {
        return new Item(options.data);
    },
}

var res = ko.mapping.fromJS(json, map); 
```

输出：

```
console.log(res());
[Data, Data]
--
console.log(res()[0].items());
[Object, Object, Object] <-- Here I want to have [Item, Item, Item] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T16:55:52.910

我以这种方式更改了您的映射器选项

```
var map = {
    'items': {
        create: function(options) {
            return new Item(options.data);
        }
    }
} 
```

看起来不错；你能试试吗？

如果你需要：[jsfiddle](http://jsfiddle.net/fpezzato/KHHYD/) 控制台输出是你想要的*[Item, Item, Item]*；

* * *

我允许添加一个小建议：如果您需要以这种方式测试 typeof：

```
typeof res()[0].items()[0] 
```

注意，这可能很棘手！

为了避免任何问题，我通常以这种方式声明 Item viewModel：

```
function Item(data) {
    var self = this;
    self.myType = 'item';
    ko.mapping.fromJS(data, {}, this);
} 
```

所以你可以简单地测试，例如：

```
if('item' === res()[0].items()[0].myType) {
  //do something...
} 
```

*前段时间在stackoverflow中建议了这个“myType”技巧：我会尽快在此处发布链接我会找到该帖子*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T17:12:46.647

看看这个问题：[Map JSON data to Knockout observableArray with specific view model type](https://stackoverflow.com/questions/9951521/map-json-data-to-knockout-observablearray-with-specific-view-model-type)

它映射自定义嵌套对象，还包含一个这样做的小提琴。

# backbone.js - 无法让主干视图响应 this.on() 添加的事件

> ID：16087420
> 
> 赞同：0
> 
> 时间：2013-04-18T15:43:34.673
> 
> 标签：backbone.js, backbone-views, backbone-events

我想在我的视图中收听事件，但只有在经过一些处理之后（具体来说，我只是在成功的 ajax 调用后对这些事件做出响应 - 这一切正常，只是这个事件的东西我不能数字）。

因此，使用 events 属性不会达到我想要的效果。

我是骨干新手，不知道下面的 this.on('click'...) 代码有什么问题（backboneClicked() 不会触发）。

我已经包含了下面的 events 属性，因为我将它放入测试并触发 ourClick()。jqueryClicked() 也会触发。

我错过了一些非常明显的东西吗？

我知道还有很多其他关于视图不触发事件的问题，但我看不到任何与这个问题相匹配的东西。

任何帮助表示赞赏。

```
var InputListView = Backbone.View.extend({
    el: '#input-list',

    events: {
        'click input'       : 'ourClick'
    },

    initialize: function(options) {         
        this.$el.click(this.jqueryClicked);

        this.on('click', this.backboneClicked);
    },

    ourClick: function(e) {
        alert('ourClick');
    },

    backboneClicked: function(e) {
        alert('backboneClicked');
    },

    jqueryClicked: function(e) {
        alert('jqueryClicked');
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T15:49:23.873

`this.on('click', this.backboneClicked);`

你期望这有什么行为？你不能点击一个视图，它是一个对象，而不是一个 DOM 元素......虽然如果你真的想测试它是否有效，试着`this.trigger('click')`在你的行之后添加一个。

尽管如此，我还是不明白这里的意义何在。如果您使用`on`Backbone 的方法，您通常会尝试侦听 Backbone 事件（或自定义事件），而不是 UI 事件。

# encryption - 考虑 RSA 128 位密钥长度需要多长时间？

> ID：16087423
> 
> 赞同：3
> 
> 时间：2013-04-18T15:43:41.863
> 
> 标签：encryption, cryptography, rsa, public-key-encryption, encryption-asymmetric

我在网上做了一些研究，似乎建议 RSA 加密的推荐密钥长度为 1024 位。但是我有一个问题，即用今天使用的普通计算机计算 128 位 RSA 密钥长度需要多长时间？有可能吗？需要多长时间？

非常感谢您在这个问题上给我的任何帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T16:35:40.053

像[椭圆曲线方法](http://www.mersennewiki.org/index.php/Elliptic_Curve_Method)（如[GMP-CGM](http://www.mersennewiki.org/index.php/GMP-ECM)）这样的整数分解算法的实现将花费几秒钟的时间来计算商品硬件上 128 位 RSA 密钥的因子。

# c# - 是否会收集 MakeGenericType / 泛型类型垃圾？

> ID：16087425
> 
> 赞同：12
> 
> 时间：2013-04-18T15:43:43.187
> 
> 标签：c#, .net, generics, types, garbage-collection

在 .NET 中众所周知，类型不会被垃圾收集，这意味着如果您正在玩 f.ex。Reflection.Emit，你必须小心卸载 AppDomains 等等……至少我以前是这样理解事情是如何工作的。

这让我想知道泛型类型*是否被*垃圾收集，更准确地说：泛型是用创建的`MakeGenericType`，比方说......例如基于用户输入。:-)

所以我构建了以下测试用例：

```
public interface IRecursiveClass
{
    int Calculate();
}

public class RecursiveClass1<T> : IRecursiveClass 
                                  where T : IRecursiveClass,new()
{
    public int Calculate()
    {
        return new T().Calculate() + 1;
    }
}
public class RecursiveClass2<T> : IRecursiveClass
                                  where T : IRecursiveClass,new()
{
    public int Calculate()
    {
        return new T().Calculate() + 2;
    }
}

public class TailClass : IRecursiveClass
{
    public int Calculate()
    {
        return 0;
    }
}

class RecursiveGenericsTest
{
    public static int CalculateFromUserInput(string str)
    {
        Type tail = typeof(TailClass);
        foreach (char c in str)
        {
            if (c == 0)
            {
                tail = typeof(RecursiveClass1<>).MakeGenericType(tail);
            }
            else
            {
                tail = typeof(RecursiveClass2<>).MakeGenericType(tail);
            }
        }
        IRecursiveClass cl = (IRecursiveClass)Activator.CreateInstance(tail);
        return cl.Calculate();
    }

    static long MemoryUsage
    {
        get
        {
            GC.Collect(GC.MaxGeneration);
            GC.WaitForFullGCComplete();
            return GC.GetTotalMemory(true);
        }
    }

    static void Main(string[] args)
    {
        long start = MemoryUsage;

        int total = 0;
        for (int i = 0; i < 1000000; ++i)
        {
            StringBuilder sb = new StringBuilder();
            int j = i;
            for (int k = 0; k < 20; ++k) // fix the recursion depth
            {
                if ((j & 1) == 1)
                {
                    sb.Append('1');
                }
                else
                {
                    sb.Append('0');
                }
                j >>= 1;
            }

            total += CalculateFromUserInput(sb.ToString());

            if ((i % 10000) == 0)
            {
                Console.WriteLine("Current memory usage @ {0}: {1}", 
                                  i, MemoryUsage - start);
            }
        }

        Console.WriteLine("Done and the total is {0}", total);
        Console.WriteLine("Current memory usage: {0}", MemoryUsage - start);

        Console.ReadLine();
    }
} 
```

如您所见，泛型类型被定义为“可能递归”，并带有一个标记递归结束的“尾”类。为了确保`GC.TotalMemoryUsage`不作弊，我还打开了任务管理器。

到目前为止，一切都很好。接下来我做的就是启动这个野兽，而我正在等待“内存不足”......我注意到它 - 与我的预期相反 -随着时间的推移**并没有消耗更多的内存。**事实上，它显示了内存消耗在时间上的轻微下降。

有人可以解释一下吗？泛型类型实际上是由 GC 收集的吗？如果是这样......是否也有垃圾收集的 Reflection.Emit 案例？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-18T16:18:07.723

要回答您的第一个问题：

不收集类型的通用结构。

但是，如果您构造`C<string>`and `C<object>`，CLR 实际上只*为这些方法*生成一次代码；由于对字符串的引用和对对象的引用保证大小相同，因此可以安全地这样做。这很聪明。但是，如果您构造`C<int>`，`C<double>`则方法的代码会生成两次，每次构造一次。（假设方法的代码当然是生成的；方法是按需抖动的；这就是它被称为抖动的原因。）

为了证明不收集泛型类型，而是创建一个泛型类型

```
class C<T> { public static readonly T Big = new T[10000]; } 
```

`C<object>`并`C<string>`共享为方法生成的任何代码，但每个都有自己的静态字段，这些字段将永远存在。你构造的类型越多，那些大数组就会填满更多的内存。

现在您知道为什么无法收集这些类型了；我们无法知道将来是否有人会尝试访问其中一个数组的成员。由于我们不知道最后一次访问数组的时间，它们必须永远存在，因此包含它的类型也必须永远存在。

* * *

回答您的第二个问题：有没有办法制作收集的动态发出的程序集？

是的。文档在这里：

[http://msdn.microsoft.com/en-us/library/dd554932.aspx](http://msdn.microsoft.com/en-us/library/dd554932.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-04T19:52:51.720

与代码共享或代码不共享无关，每次 MakeGenericType 尝试都会为元数据创建新的内部 CLR 类，这将消耗内存。类型对象直接在 CLR 代码中创建（而不是在托管代码中），每个类型对象只存在一个实例，因此您可以比较它们的引用相等性。CLR 本身持有对它的引用，因此它们不能被 GC'ed 但在我的测试中我确认 GC 可以移动它们。

**编辑：** CLR 持有的引用可能是弱引用，所以在挖掘 RuntimeTypeHandle.cs 源代码后我看到了

```
internal bool IsCollectible()
{
    return RuntimeTypeHandle.IsCollectible(GetTypeHandleInternal());
} 
```

考虑到 Eric Lippert，这很可能是错误的

# asp.net-web-api - 未应用 ODataQueryOptions

> ID：16087427
> 
> 赞同：1
> 
> 时间：2013-04-18T15:43:48.533
> 
> 标签：asp.net-web-api, odata

我可能遗漏了一些简单的东西，但根据这篇博文：[http](http://www.asp.net/web-api/overview/odata-support-in-aspnet-web-api/supporting-odata-query-options) ://www.asp.net/web-api/overview/odata-support-in-aspnet-web-api/supporting-odata-query-options这应该正在工作。我有以下控制器方法：

```
public virtual IQueryable<DtoAgent> Get(ODataQueryOptions<Agent> options, bool includeInactive = false, bool includeDeleted = false)
    {
        IQueryable<Agent> agents = null;
        if (includeDeleted && includeInactive)
        {
            agents = agentRepository.FindAll();
        }
        else if (includeDeleted)
        {
            agents = agentRepository.FindBy(a => a.ussiStatus == "A");
        }
        else if (includeInactive)
        {
            agents = agentRepository.FindBy(a => !a.IsDeleted);
        }
        if (agents == null)
        {
            agents = agentRepository.FindByExp(a => a.ussiStatus == "A" && !a.IsDeleted);
        }
        options.ApplyTo(agents);
        return agents.ToDtos<DtoAgent>();
    } 
```

当我像 ../api/Agent?$top=10 一样调用它时，它会返回所有结果，而不仅仅是 10。我可以在 options 变量中看到 TopQueryOption，但它似乎没有被应用。如果我使用 [Queryable] 属性，它会起作用，但顶部是在我试图避免的 DB 调用之后应用的。我在全局级别调用 EnableQuerySupport 并安装了 Nuget 包和 2012.2 更新。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T16:17:59.807

你错过了一些简单的东西。当您调用 ApplyTo 时，它不会改变 IQueryable，它会返回应用的查询。所以这样的事情应该可以代替：

```
var queryResults = options.ApplyTo(agents) as IQueryable<Agent>;
return queryResults.ToDtos<DtoAgent>(); 
```

# php - 您可以通过 PHP 上传哪些文件类型？

> ID：16087438
> 
> 赞同：-2
> 
> 时间：2013-04-18T15:44:10.263
> 
> 标签：php, file-upload, file-type

我正在尝试查找显示“**类型**”的不同名称的参考，`$_FILES["file"]["type"] == "image/gif"`但我正在寻找 csv、ms excel、mac 数字、ms 字等。

我在 php.net 或谷歌上找不到任何东西。无论如何，我很可能将其称为错误的事情。

我应该寻找什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T16:02:08.530

这实际上在 PHP 手册中有解释。

来自[http://php.net/manual/en/features.file-upload.post-method.php](http://php.net/manual/en/features.file-upload.post-method.php)（强调我的）

> `$_FILES['userfile']['type']`：**文件的 mime 类型**，如果浏览器提供了此信息。一个例子是“image/gif”。然而，这种 mime 类型在 PHP 端没有被检查，因此不要认为它的价值是理所当然的。

因此，您要查找的术语是**MIME TYPE**。把它放到谷歌可能会让你最终进入维基百科的[https://en.wikipedia.org/wiki/Internet_media_type](https://en.wikipedia.org/wiki/Internet_media_type)

> Internet 媒体类型[1] 是 Internet 上文件格式的两部分标识符。标识符最初是在 RFC 2046 中定义的，用于通过 SMTP 发送的电子邮件，但它们的使用已扩展到其他协议，例如 HTTP、RTP 和 SIP。这些类型被称为 MIME 类型，有时也称为 Content-types，在几个协议中的标头名称之后，其值为此类类型。

文章还指出

> IANA 管理媒体类型的官方注册表

点击链接将引导您到

*   [https://www.iana.org/assignments/media-types](https://www.iana.org/assignments/media-types)

其中包含您要查找的列表。请注意，除非您想了解特定文件格式的官方 mimetype 是什么，否则查看该列表几乎没有意义。

附带说明：如果您想验证/检测文件的 mime 类型，请检查我提供的代码

*   [PHP如何检查文件是mp3还是图像文件？](https://stackoverflow.com/questions/2006632/php-how-can-i-check-if-a-file-is-mp3-or-image-file/2006664#2006664)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-18T15:45:50.773

您正在寻找 MIME 类型。但是请注意，您不应该信任`$_FILES['...']['type']`. 相反，您应该自己分析文件内容以确保它们是正确的格式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T15:46:46.153

在论坛上找到以下列表，似乎足够完整，可以在这里发布

```
'hqx'   =>  'application/mac-binhex40'
'cpt'   =>  'application/mac-compactpro'
'csv'   =>  'text/x-comma-separated-values', 'application/vnd.ms-excel'
'bin'   =>  'application/macbinary'
'dms'   =>  'application/octet-stream'
'lha'   =>  'application/octet-stream'
'lzh'   =>  'application/octet-stream'
'exe'   =>  'application/octet-stream'
'class' =>  'application/octet-stream'
'psd'   =>  'application/x-photoshop'
'so'    =>  'application/octet-stream'
'sea'   =>  'application/octet-stream'
'dll'   =>  'application/octet-stream'
'oda'   =>  'application/oda'
'pdf'   =>  'application/pdf', 'application/x-download'
'ai'    =>  'application/postscript'
'eps'   =>  'application/postscript'
'ps'    =>  'application/postscript'
'smi'   =>  'application/smil'
'smil'  =>  'application/smil'
'mif'   =>  'application/vnd.mif'
'xls'   =>  'application/excel', 'application/vnd.ms-excel'
'ppt'   =>  'application/powerpoint'
'wbxml' =>  'application/wbxml'
'wmlc'  =>  'application/wmlc'
'dcr'   =>  'application/x-director'
'dir'   =>  'application/x-director'
'dxr'   =>  'application/x-director'
'dvi'   =>  'application/x-dvi'
'gtar'  =>  'application/x-gtar'
'gz'    =>  'application/x-gzip'
'php'   =>  'application/x-httpd-php'
'php4'  =>  'application/x-httpd-php'
'php3'  =>  'application/x-httpd-php'
'phtml' =>  'application/x-httpd-php'
'phps'  =>  'application/x-httpd-php-source'
'js'    =>  'application/x-javascript'
'swf'   =>  'application/x-shockwave-flash'
'sit'   =>  'application/x-stuffit'
'tar'   =>  'application/x-tar'
'tgz'   =>  'application/x-tar'
'xhtml' =>  'application/xhtml+xml'
'xht'   =>  'application/xhtml+xml'
'zip'   => 'application/x-zip', 'application/zip', 'application/x-zip-compressed'
'mid'   =>  'audio/midi'
'midi'  =>  'audio/midi'
'mpga'  =>  'audio/mpeg'
'mp2'   =>  'audio/mpeg'
'mp3'   =>  'audio/mpeg'
'aif'   =>  'audio/x-aiff'
'aiff'  =>  'audio/x-aiff'
'aifc'  =>  'audio/x-aiff'
'ram'   =>  'audio/x-pn-realaudio'
'rm'    =>  'audio/x-pn-realaudio'
'rpm'   =>  'audio/x-pn-realaudio-plugin'
'ra'    =>  'audio/x-realaudio'
'rv'    =>  'video/vnd.rn-realvideo'
'wav'   =>  'audio/x-wav'
'bmp'   =>  'image/bmp'
'gif'   =>  'image/gif'
'jpeg'  =>  'image/jpeg', 'image/pjpeg'
'jpg'   =>  'image/jpeg', 'image/pjpeg'
'jpe'   =>  'image/jpeg', 'image/pjpeg'
'png'   =>  'image/png',  'image/x-png'
'tiff'  =>  'image/tiff'
'tif'   =>  'image/tiff'
'css'   =>  'text/css'
'html'  =>  'text/html'
'htm'   =>  'text/html'
'shtml' =>  'text/html'
'txt'   =>  'text/plain'
'text'  =>  'text/plain'
'log'   =>  'text/plain', 'text/x-log'
'rtx'   =>  'text/richtext'
'rtf'   =>  'text/rtf'
'xml'   =>  'text/xml'
'xsl'   =>  'text/xml'
'mpeg'  =>  'video/mpeg'
'mpg'   =>  'video/mpeg'
'mpe'   =>  'video/mpeg'
'qt'    =>  'video/quicktime'
'mov'   =>  'video/quicktime'
'avi'   =>  'video/x-msvideo'
'movie' =>  'video/x-sgi-movie'
'doc'   =>  'application/msword'
'word'  =>  'application/msword', 'application/octet-stream'
'xl'    =>  'application/excel'
'eml'   =>  'message/rfc822' 
```

# typescript - 打字稿不能保留对所有者类的引用

> ID：16087440
> 
> 赞同：2
> 
> 时间：2013-04-18T15:44:13.750
> 
> 标签：typescript

在这种情况下，我不知道如何保留对聊天类的引用。解决方法是什么？

```
class chat {
    private self: chat;
    public currentUsers: any = ko.observableArray();

    constructor(public chatService: any) {
        this.self = this;
        chatService.client.receiveUsers = this.receiveUsers;
    } 

    private receiveUsers(users: any): void {
        //'this' has been changed to refer to the external caller context (chatService.client)
        this.currentUsers(users);//fail
        //property currentUsers does not exist on value of type 'Window'
        self.currentUsers(users);//fail
        //currentUsers does not exist in the current scope
        currentUsers(users);//fail
        //There's apparently no way to access anthing in this chat class from inside here?
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T15:50:29.077

试图`this`在类实例上保留对的引用就像在遥控器上贴一张便条，上面写着“遥控器在哪里！” 因为你一直在失去它。

使用胖箭头 lambda 表达式在回调站点捕获词汇“this”：

```
class chat {
    public currentUsers: any = ko.observableArray();

    constructor(public chatService: any) {
        chatService.client.receiveUsers = (users) => this.receiveUsers(users);
    } 

    private receiveUsers(users: any): void {
        // use 'this' here now
    }
} 
```

# ios - iPad：内容视图未调整大小以适合弹出框

> ID：16087441
> 
> 赞同：2
> 
> 时间：2013-04-18T15:44:18.017
> 
> 标签：ios, uiviewcontroller, resize, storyboard, uipopovercontroller

我在弹出窗口中显示内容视图时遇到了一些问题。我正在使用以下代码来设置弹出框，其中包含我从情节提要中实例化的视图控制器。我在其中展示弹出框的视图控制器位于导航控制器中：

```
 MyViewController *viewController =  [self.storyboard instantiateViewControllerWithIdentifier:@"MyViewController"];
    viewController.contentSizeForViewInPopover = CGSizeMake(382, 502);
    UIPopoverController *popover =  [[UIPopoverController alloc]initWithContentViewController:viewController];

    self.popoverController = popover; //self.popoverController is a private property of type UIPopoverController
    [self.popoverController presentPopoverFromBarButtonItem:self.navigationItem.leftBarButtonItem permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES]; 
```

问题来了：当我点击左侧栏按钮时，弹出框以正确的大小显示正确的内容，但内容视图的大小未调整为弹出框的大小。只有“被弹出框覆盖”的内容视图片段是可见的。

我对表格视图有相同的过程，它工作得很好 - 表格适合弹出框。我还尝试设置弹出框控制器本身的大小，就像[这里](https://stackoverflow.com/questions/12864709/where-to-set-the-size-of-a-view-controller-presented-in-a-popover)建议的那样。我用受影响的视图控制器的弹簧和支柱尝试了一些设置。但结果总是一样的。

现在我真的没有什么可以尝试的想法了，或者我可能做错了什么/错过了什么......帮助:(

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T16:03:35.860

TableView 会根据其放入的容器视图控制器的大小进行自我调整。这是 UITableViewController 的一个特性。当您通过 UIPopoverController 呈现 TableView 时，弹出框决定了表格的大小。

此机制不适用于所有视图，因此您还需要设置视图本身的大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-06T18:16:47.340

iOS 6 和 iOS 7 之间发生了一些变化，这意味着视图并不总是按预期调整大小。可以使用许多不同的方法和技术来提供所需的行为。其中包括通过自动调整大小掩码提供指导：

```
// Resizing behaviour
self.view.autoresizingMask=UIViewAutoresizingFlexibleWidth+UIViewAutoresizingFlexibleHeight; 
```

有时还需要告诉父视图调整子视图的大小。

```
self.view.autoresizesSubviews=YES; 
```

此外，Matt Neuberg（iOS 7 编程）告诉我们如何防止内容隐藏在导航栏（和工具栏）下方，使用以下内容：

```
// Stops the view going underneath the navigation bars 
self.edgesForExtendedLayout=UIRectEdgeNone; 
```

然后是：

```
[self.view setNeedsLayout]; 
```

用于重绘的方法。第一步是了解所有这些奇怪而奇妙的方法存在，第二步是找出最经济的实施方式，让它们都为你工作。

# python - 从 pyside 的对话框中删除 what'sThis

> ID：16087442
> 
> 赞同：1
> 
> 时间：2013-04-18T15:44:21.143
> 
> 标签：python, pyside, qdialog

我发现很多关于在 C++ 中执行此操作的问题，但没有关于在 Python/PySide 中执行此操作的问题。我想删除“？” 我的 QDialog 顶部的按钮
![在此处输入图像描述](https://i.stack.imgur.com/CSLnm.png)
。我知道我会使用`setWindowFlags()`，但是我不知道我应该传递什么作为参数。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-06-07T01:24:11.967

以下内容在不修改其他标志的情况下正常工作：

```
self.setWindowFlags(self.windowFlags()
                    ^ QtCore.Qt.WindowContextHelpButtonHint) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T17:37:06.363

基于[如何隐藏/删除“？” Qt对话框的“标题栏”上的帮助按钮？](https://stackoverflow.com/questions/81627/how-can-i-hide-delete-the-help-button-on-the-title-bar-of-a-qt-dialog)你可以这样做：

```
from PySide import QtGui, QtCore
app = QtGui.QApplication([])
d = QtGui.QDialog(None, QtCore.Qt.WindowSystemMenuHint | QtCore.Qt.WindowTitleHint)
d.exec_() 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-04-02T02:21:14.237

**我创建了一个继承自 QDialog 的 Dialog，并在init**函数中编写了以下代码。

```
self.setWindowFlags(self.windowFlags() ^ Qt.WindowStaysOnTopHint) 
```

标题栏上的问题按钮不见了

附言。我的程序基于 PySide 1.2.1 和 Python 3.3

# ruby-on-rails-3 - AngularJs Scope，变量值被改变

> ID：16087443
> 
> 赞同：0
> 
> 时间：2013-04-18T15:44:24.550
> 
> 标签：ruby-on-rails-3, twitter-bootstrap, angularjs, angularjs-directive, angularjs-scope

我对 AngularJs 完全陌生，我上过教程，我在过去 5 个小时里一直被以下问题困住，

我正在使用 twitterbootstrap 和模态我的意思是[引导模态](http://twitter.github.io/bootstrap/javascript.html#modals)

当我单击插槽并保存时，它向我显示一次模态，第一次但第二次工作，它调用 addBooking 方法初始化 currentBooking 对象，但不显示模态。

这是我在 haml 中的观点，简单地显示引导模式及其工作正常。

```
#scheduler{ :'ng-controller' => 'SchedulerCtrl', :scheduler => true, :data =>{:interval =>  @interval, :restaurant_id => @restaurant_id}  }

  #booking-editor.modal.hide.fade{ :'aria-hidden' => true, :'aria-labelledby' => "bookingEditorLabel", :role => "dialog", :tabindex => "-1", :'booking-editor' => 'currentBooking', :'ng-controller' => 'BookingEditorCtrl' }
    .modal-body
      %input{ :type => "text", :'ng-model' => "currentBooking.name" }
    .modal-footer
      %button.btn{ :'aria-hidden' => true, :'data-dismiss' => "modal" } Close
      %button.btn.btn-primary{ :'ng-click' => 'saveBooking(currentBooking)' } Save Booking 
```

**调度器控制器**；

```
 $scope.addBooking = (slot) ->
    $scope.currentBooking = { name: "John Doe", new: true } 
```

**BookingEditorCntl**

```
@BookingEditorCtrl = ['$scope', '$resource', ($scope, $resource) ->
  $scope.saveBooking = (booking) ->
    $scope.currentBooking = null
] 
```

**DOM 操作的指令部分**

```
 .directive 'bookingEditor', ->
    restrict: 'A'
    link: (scope, element, attrs, ctrl) ->
      scope.$watch attrs.bookingEditor, ->
        if scope[attrs.bookingEditor]
          $(element).modal(keyboard: true)
          $(element).modal('show')
        else
          $(element).modal('hide') 
```

请有任何建议或想法。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T23:14:55.820

你还没有指定你正在使用什么模态插件，所以有点难以帮助。但是，从您的示例来看，您似乎正在`$(element).modal(keyboard: true)`多次调用。这可以解释为什么您会收到错误消息。如果是这种情况，以下内容可能会有所帮助：

**在`BookingEditorCtrl`：**

```
$scope.modalInitialized = false; 
```

**在`bookingEditor`指令中：**

```
if(scope.modalInitialized === false)
    $(element).modal(keyboard: true)
$(element).modal('show') 
```

# iphone - 从图像中检索 RGBA 值

> ID：16087444
> 
> 赞同：1
> 
> 时间：2013-04-18T15:44:27.813
> 
> 标签：iphone, ios, objective-c, core-graphics, bitmapdata

我正在使用**CGDataProviderCopyData**从图像中检索数据，但是与图像文件大小相比，此函数返回的字节非常大。这是我的代码。

```
UIImage *image = self.imageView.image;
CGImageRef cgimage = image.CGImage;
CGDataProviderRef provider = CGImageGetDataProvider(cgimage);
NSData* data = (__bridge_transfer NSData*)CGDataProviderCopyData(provider); 
```

是否有任何其他方法可以读取像素数据并从图像中获取 rgba 值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T08:54:41.627

嗨，这是查找值的方法...

```
 CGImageRef imgSource=self.duplicateImage.image.CGImage;
    CFDataRef m_DataRef1 = CGDataProviderCopyData(CGImageGetDataProvider(imgSource)); 
    UInt8 *dataOriginal=(UInt8 *)CFDataGetBytePtr(m_DataRef1);
    double lengthSource=CFDataGetLength(m_DataRef1);
    NSLog(@"length::%f",lengthSource); 
```

下面的一个是修改值的例子......

```
 -(UIImage*)customBlackFilterOriginal
{
    CGImageRef imgSource=self.duplicateImage.image.CGImage;
    CFDataRef m_DataRef1 = CGDataProviderCopyData(CGImageGetDataProvider(imgSource)); 
    UInt8 *dataOriginal=(UInt8 *)CFDataGetBytePtr(m_DataRef1);
    double lengthSource=CFDataGetLength(m_DataRef1);
    NSLog(@"length::%f",lengthSource);
    int redPixel;
    int greenPixel;
    int bluePixel;

    for(int index=0;index<lengthSource;index+=4)
    {

        dataOriginal[index]=dataOriginal[index];
        dataOriginal[index+1]= 101;
        dataOriginal[index+2]= 63;
        dataOriginal[index+3]=43;      

    } 

    NSUInteger width =CGImageGetWidth(imgSource);
    size_t height=CGImageGetHeight(imgSource);
    size_t bitsPerComponent=CGImageGetBitsPerComponent(imgSource);
    size_t bitsPerPixel=CGImageGetBitsPerPixel(imgSource);
    size_t bytesPerRow=CGImageGetBytesPerRow(imgSource);

    NSLog(@"the w:%u H:%lu",width,height);

    CGColorSpaceRef colorspace=CGImageGetColorSpace(imgSource);
    CGBitmapInfo bitmapInfo=CGImageGetBitmapInfo(imgSource);
    CFDataRef newData=CFDataCreate(NULL,dataOriginal,lengthSource);
    CGDataProviderRef provider=CGDataProviderCreateWithCFData(newData);
    CGImageRef newImg=CGImageCreate(width,height,bitsPerComponent,bitsPerPixel,bytesPerRow,colorspace,bitmapInfo,provider,NULL,true,kCGRenderingIntentDefault);

    return [UIImage imageWithCGImage:newImg];

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T16:08:27.540

你在做什么是正确的。磁盘上的图像文件是压缩格式。当您将数据加载到 a`UIImage`时，图像未压缩并占用“宽 x 高 x 4”字节。“4”假定为 RGBA。实际上数据可能会更大一些，因为每行的字节数通常是 16 字节的倍数。

关于从图像加载字节的一件事。不要以为它是RGBA。根据图像，它可能是其他格式。使用适当的函数来确定颜色模型、每像素字节数和每行字节数。

# sql - 从选择中批量插入

> ID：16087446
> 
> 赞同：0
> 
> 时间：2013-04-18T15:44:34.160
> 
> 标签：sql, database, sql-server-2012, bulkinsert

我有一个包含大约 3 亿行的文本文件。我正在执行批量插入以将文件放入 sql 中的临时表中。然后我打破了一些列来规范它，它工作得很好而且很快。我做的最后一步是将行从临时表移动到它们的最终表。目前我正在做一个 INSERT INTO SELECT 语句，但它需要永远。有没有办法从选择中进行批量插入？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T15:48:33.230

您可以使用 SQL Server Management Studio 提供的导入/导出向导。

[http://www.mssqltips.com/sqlservertutorial/203/simple-way-to-import-data-into-sql-server/](http://www.mssqltips.com/sqlservertutorial/203/simple-way-to-import-data-into-sql-server/)

它将为您生成和运行 SSIS 包，这比 INSERT INTO SELECT 语句更快更好。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-18T15:53:56.440

您可以向 INSERT 添加并行提示。

查看更多选项。就像确保禁用目标表 [http://www.dba-oracle.com/t_insert_tuning.htm上的任何索引一样](http://www.dba-oracle.com/t_insert_tuning.htm)

最重要的是，您实际上可以使该表成为 EXTERNAL 表。这将特别适合您的规格。

示例语法：

```
create table xtern_empl_rpt
    ( empl_id varchar2(3),
      last_name varchar2(50),
      first_name varchar2(50),
      ssn varchar2(9),
     email_addr varchar2(100),
      years_of_service number(2,0)
    )
    organization external 
```

这种方式再加上并行提示应该可以加快您的 DML。

```
insert /*+ parallel */ into tb_b t 
select * from xtern_empl_rpt where <<whatever predicate required>> 
```

来源：[http ://www.orafaq.com/node/848](http://www.orafaq.com/node/848)

# c# - 读取巨大的 xml 元素值后清理内存

> ID：16087447
> 
> 赞同：1
> 
> 时间：2013-04-18T15:44:35.717
> 
> 标签：c#, .net, garbage-collection, xmltextreader

我很少来这里寻求帮助，但这让我发疯：我正在读取一个包含任意数量项目的 xml 文件，每个项目都有一个 b64 编码文件（以及一些随附的元数据）。`XmlDocument`最初我只是把整个文件读入一个`XmlDocument`. 所以我重写了代码来代替使用`XmlTextReader`，如果问题是程序被发送了一个带有大量大小合理的附件的 xml 文件，这很好用......但仍然存在一个大问题，这就是我转向你的地方：

如果我的 xml 阅读器位于 File 元素上，该元素包含一个巨大的值（例如，500MB），我调用`reader.ReadElementContentAsString()`，我现在有一个占用 500MB 的字符串（或者可能是 OutOfMemoryException）。在这两种情况下，我想做的只是写入日志，“那个文件附件太大了，我们将忽略它并继续前进”，然后转到下一个文件。但似乎我刚刚尝试读取的字符串并没有被垃圾收集，所以实际发生的是字符串占用了所有 RAM，并且之后它尝试读取的每个其他文件也会引发 OutOfMemoryException，即使大多数的文件将非常小。

回想一下：此时，我正在将元素的值读入本地字符串，所以我*预计*它会*立即*有资格进行垃圾收集（因此最迟在程序尝试阅读下一项并发现它没有可用的内存）。但是我已经尝试了一切，以防万一：将字符串设置为null，调用显式`GC.Collect()`......没有骰子，任务管理器指示GC只收集了大约40k，它刚刚请求存储字符串的~500MB，我仍然会出现内存不足异常尝试读取其他内容。

似乎没有任何方法可以在`XmlTextReader`不读取该元素的情况下知道 xml 元素中包含的值的长度，所以我想我一直在阅读字符串......我错过了什么，或者真的没有如何从 xml 文件中读取一个巨大的值而不完全破坏你的程序之后做任何事情的能力？我要疯了。

我读过一些关于 C# 的 GC 和 LOH 的内容，但我读到的任何内容都不会向我表明这会发生......

如果您需要任何进一步的信息，请告诉我，谢谢！

编辑：我确实意识到该进程是作为 32 位进程运行的，这意味着它比应有的更多地缺乏内存。解决了这个问题，这不再是一个*问题*，但它仍然是我想修复的行为。（需要更多和/或更大的文件才能达到抛出 OutOfMemoryException 的点，但是一旦抛出，我似乎仍然无法及时回收该内存。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T16:39:37.473

我有一个与用于将大文件传输为 base64 字符串的肥皂服务类似的问题。

那时我使用 XDocument 而不是 XmlDocument，这对我有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-09T09:25:35.497

您可以使用[XmlReader.ReadValueChunk](http://msdn.microsoft.com/en-us/library/system.xml.xmlreader.readvaluechunk%28v=vs.110%29.aspx)方法一次读取一个“块”元素的内容，而不是尝试一次读取整个内容。这样，您可能会在某些时候决定数据太大，然后忽略它并记录事件。`StringBuilder`可能是将收集的 char 数组块组合在一个字符串中的最佳方法。

如果你想用 释放内存`GC.Collect()`，你可以用 强制立即终结和内存释放[`GC.WaitForPendingFinalizers()`](http://msdn.microsoft.com/en-us/library/system.gc.waitforpendingfinalizers%28v=vs.110%29.aspx)。这可能会影响性能（甚至挂起，请参阅链接后面的描述），但是您应该摆脱大对象，假设您不再有对它们的任何实时引用（即局部变量已经超出范围或其值设置为 null) 并正常继续操作。当内存消耗是一个问题并且您真的想强制摆脱多余的内存分配时，您当然应该将此作为最后的手段。

我已经成功地`GC.Collect();GC.WaitForPendingFinalizers();`在内存敏感的环境中使用组合来将应用程序的内存占用保持在 100MB 以下，即使它读取一些非常大的 XML 文件 (>100MB) 也是如此。为了提高性能，我还使用`Process.PrivateMemorySize64`跟踪内存消耗和仅在达到特定限制后强制完成。在我改进之前，内存消耗确实有时会超过 1GB！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T16:35:18.990

我不肯定这是这种情况，但我认为你需要处理`XmlTextReader`. 将过大节点之后的节点的xmlpath保存为字符串，将你的大量字符串设置为null，然后`XmlTextReader`在大节点之后的节点处处理并重新打开它。据我了解，如果您将字符串设置为`null`，或者超出范围，GC 应该尽快释放该内存。在我看来，您正在释放字符串，但您继续使用`XmlTextReader`现在持有大量内存的字符串进行操作。

想到的另一个想法是尝试在一个`unsafe`块内执行此操作，然后显式释放内存，但是，这看起来不太可能（其他人可能知道，但在环顾四周后，似乎不安全的块仍然是 GC 'd，它只是给你指点）。还有一种选择，虽然 imo 很糟糕，但它是制作一个用于在 C 或 C++ 中解析的 dll 并从您的 C# 项目中调用它。

在做最后一个疯狂的事情之前尝试第一个建议:)

# jquery - 在jQuery中单击元素外部时触发的功能

> ID：16087448
> 
> 赞同：3
> 
> 时间：2013-04-18T15:44:38.447
> 
> 标签：jquery, stoppropagation

当我单击 body 时，我想在循环中显示不同的元素，除了 element `#search-container form`。它有效，但前提是我首先单击元素`#search-container form`，并且它只有效一次。

```
$('html').click(function(event) {
    $('#search-container form').click(function(event){
        event.stopPropagation();
    });
    $('html').on('click',function() {
        $('#small-search a').toggleClass('notvisible');
        $('#session').toggleClass('notvisible');
        $('#search-container').css('position','absolute');
        $('#search-container form').toggleClass('visible');
    });
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T15:45:33.383

```
$('html').not("#search-container form").on('click',function(){
    $('#small-search a').toggleClass('notvisible');
    $('#session').toggleClass('notvisible');
    $('#search-container').css('position','absolute');
    $('#search-container form').toggleClass('visible');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T15:52:00.363

用于[`.not()`](http://api.jquery.com/not/)从将单击事件绑定到的 jQuery 对象中删除元素：

```
$('html').not("#search-container form").on('click',function(){
    $('#small-search a').toggleClass('notvisible');
    $('#session').toggleClass('notvisible');
    $('#search-container').css('position','absolute');
    $('#search-container form').toggleClass('visible');
}); 
```

**来源**

[jQuery API - .not()](http://api.jquery.com/not/)

# php - 通过php函数传递变量值不起作用

> ID：16087449
> 
> 赞同：0
> 
> 时间：2013-04-18T15:44:38.790
> 
> 标签：php

我试图通过`$page="somepage";`函数传递值假设

```
function example($page)

        {
                    echo $page;
   ?>
   <input type="radio" name="smoke" value="Y"> Yes
   <input type="radio" class="ml_10" name="smoke" value="N"> No
   <input type="radio" class="ml_10" name="smoke" value="O"> Occasionally
   <?php
        }

example ($page); 
```

当我尝试回显该页面时，它应该会出现，`somepage`但它会出现`1`。但是如果我在调用函数时手动编写页面，它会正确打印例如`example ("somepage")`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T15:47:32.687

您的`$page`变量在调用`example()`函数之前包含数字 1
因此，您必须使其包含“somepage”值。

或者

您的`example()`函数包含一些将“somepage”转换为 1 的代码。

很可能是这样的

```
$page = include $page; 
```

您出于某种未知原因从问题中省略的行

无论哪种方式，问题都过于本地化，因此不适合 Stack Overflow

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T15:47:44.390

只要您`$page`在调用函数之前声明，您尝试做的事情就会奏效。

```
$page = "somepage";

example($page);

function example($page)

{
    echo $page;
    ?>
    <input type="radio" name="smoke" value="Y"> Yes
    <input type="radio" class="ml_10" name="smoke" value="N"> No
    <input type="radio" class="ml_10" name="smoke" value="O"> Occasionally
    <?php
} 
```

# python - Python正则表达式与文件扩展名匹配

> ID：16087450
> 
> 赞同：2
> 
> 时间：2013-04-18T15:44:39.333
> 
> 标签：python, regex

我想使用 Python 正则表达式实用程序来查找具有这种模式的文件：

```
000014_L_20111026T194932_1.txt
000014_L_20111026T194937_2.txt
...
000014_L_20111026T194928_12.txt 
```

所以我想要的文件有一个下划线'_'后跟一个数字（1位或更多位），然后是'.txt'作为扩展名。我使用了以下正则表达式，但它与上述名称不匹配：

```
match = re.match('_(\d+)\.txt$', file) 
```

匹配文件名的正确正则表达式应该是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-18T15:46:17.230

您需要改为使用`.search()`；`.match()`锚定到字符串的开头。你的模式在其他方面很好：

```
>>> re.search('_(\d+)\.txt$', '000014_L_20111026T194928_12.txt')
<_sre.SRE_Match object at 0x10e8b40a8>
>>> re.search('_(\d+)\.txt$', '000014_L_20111026T194928_12.txt').group(1)
'12' 
```

# c++ - 放置#ifdef __cplusplus extern "C" { #endif 的最佳位置在哪里

> ID：16087451
> 
> 赞同：14
> 
> 时间：2013-04-18T15:44:43.080
> 
> 标签：c++, c, include

我想知道放哪里比较好

```
#ifdef __cplusplus
extern "C" {
#endif 
```

在 C 头文件中。

在开始或之后所有其他包括。为什么 ？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-18T15:58:58.913

对此没有严格的规定，但请注意以下事项。

1.  一般原则是每个头文件都会自行处理（并且是自给自足的）。因此，根据这个原则，不需要将头文件包装在 extern "C" 中，因为头文件中会包含一个 extern "C"（如果需要的话）。因此，在当前文件中，您可以将其放在其他包含之后。
2.  但是，如果你确实有一大堆标题，你不想添加一个外部“C”，并且想通过单个包含提供，无论如何，继续将它们包装在一个文件中宽外部“C”。

只知道 extern "C" 背后的想法是它使编译器生成 C 友好的链接。否则，使用 C++ 编译器编译的代码会在使用 C 编译器编译的存档中查找要链接的损坏名称，但找不到它们。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-04-18T15:47:18.263

此构造用于使*您的*名称可用于 C 链接器（简短说明）

所以很明显你只想在你的东西周围使用它。

像这样 ：

```
#ifndef MY_INCLUDE_H_ // include guard
#define MY_INCLUDE_H_

#include <...> // dependencies
#include "..."

#ifdef __cplusplus
extern “C” {
#endif

// ... your types, methods, variables

#ifdef __cplusplus
}
#endif

#endif // MY_INCLUDE_H_ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-04T09:33:29.100

*   extern "C" 影响链接。编译 C++ 函数时，它们的名称会有所不同，这就是 C++ 中可以重载的原因。因此，函数名称会根据参数的类型和数量进行修改，因此具有相同名称的两个函数将具有两个不同的符号名称。

*   extern "C" 中的代码仍然是 C++ 代码。在外部“C”块中可以做的事情是有限制的，但它们都是关于链接的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-18T15:52:26.083

`extern "C"`影响代码的编译方式。**设计**为同时编译为 C 和 C++ 的头文件将`extern "C"`自行管理。您**永远不**`#include`应该将指令包装在`extern "C"`块中：如果所涉及的标头设计为双向编译，则您的指令是多余的，并且如果它不是设计为双向使用，那就是错误。

# matlab - 如何在一维条码区域扫描线？

> ID：16087455
> 
> 赞同：1
> 
> 时间：2013-04-18T15:44:55.540
> 
> 标签：matlab, image-processing, matlab-cvst, scanline

我需要为我的图像扫描感兴趣的区域以检查它是否包含一维条形码。谁能帮我实现这个？任何相关的功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T15:48:55.357

是的，计算机视觉系统工具箱似乎正是您要找的。

你可以在这里找到更多关于它的信息：

[http://www.mathworks.nl/help/vision/examples/barcode-recognition.html](http://www.mathworks.nl/help/vision/examples/barcode-recognition.html)

# c++ - 进程 ID 函数出现错误“ERROR_NO_MORE_FILES”

> ID：16087459
> 
> 赞同：1
> 
> 时间：2013-04-18T15:45:17.960
> 
> 标签：c++, winapi

我试图使用下面的函数从进程中获取 ID，但是 GetLastError 不断返回 ERROR_NO_MORE_FILES 所以它永远没有机会遍历所有进程。我不确定是什么原因造成的。有任何想法吗？同样作为测试，我将参数作为“notepad.exe”传递

```
int GetProcID(string ProcName){
    PROCESSENTRY32 PE32;
    HANDLE ProcSnapshot = CreateToolhelp32Snapshot(TH32CS_SNAPPROCESS,0);

    PE32.dwSize = sizeof(PROCESSENTRY32);

    if(!Process32First(ProcSnapshot,&PE32))
        return 0;
    else
        if(PE32.szExeFile == ProcName)
            return PE32.th32ProcessID;
        else
        {
            while(GetLastError() != ERROR_NO_MORE_FILES){
                Process32Next(ProcSnapshot,&PE32);
                    if(PE32.szExeFile == ProcName)
                        return PE32.th32ProcessID;
            }
            return 0;
        }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T16:04:41.007

你的`while`循环是错误的。`Process32Next`即使在调用函数之前，您也不应该检查错误值。`Process32Next`如果先前对 Windows API 函数（可能是另一个函数）的调用返回`ERROR_NO_MORE_FILES`，并且快照中第一个进程的名称恰好不是您要搜索的名称，则您的函数将不做任何事情而返回。

请记住，并非所有 API 函数都将错误代码设置为`ERROR_SUCCESS`即使它们已成功（也不要忘记在完成后关闭快照句柄）。

# c++ - 在 boost::thread 中将参数传递给函数

> ID：16087463
> 
> 赞同：2
> 
> 时间：2013-04-18T15:45:30.503
> 
> 标签：c++, multithreading, boost

这是我第一次使用 boost 线程功能，在此之前我对使用多个线程知之甚少。我试图在初始调用的同时运行一个函数的第二个实例，这样我就可以将两个不同的变量传递给同一个函数，我希望这可以加快我的程序。使用我知道的代码，我不断收到 C2784 错误，上面写着

```
'T *boost::get_pointer(const boost::scoped_ptr<T> &)' : could not deduce template argument for 'const boost::scoped_ptr<T> &' from 'const std::string' 
```

这是处理线程创建的代码片段

```
string firstPart = recText.substr(1,(subPart1-1));
string secondPart = recText.substr(subPart1,subPart1);

boost::thread firstThread;
boost::thread secondThread;

firstThread = boost::thread(&Conversion::conversion,firstPart);
secondThread = boost::thread(&Conversion::conversion,secondPart);
firstThread.join();
secondThread.join(); 
```

编辑

```
void Conversion::conversion(string _Part)
{
int value_Part = 1;
int valueShort = 0;
int value = checkValue;
if(value == value_Part)
{
      // do stuff
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T15:59:04.197

成员函数采用类型 (cv 限定) 的隐式第一个参数`T*`，其中`T`是具有成员函数的类。您需要传递一个指向`Conversion`实例的指针，例如，

```
Conversion c;
firstThread = boost::thread(&Conversion::conversion, &c, firstPart); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T15:54:41.267

使用`boost::bind`.

```
Conversion *conversion_obj_ptr = ...
boost::thread firstThread;
firstThread = boost::thread(boost::bind(&Conversion::conversion, conversion_obj_ptr, firstPart); 
```

这是假设 Conversion::conversion 是一个成员函数。如果 Conversion::conversion 不是成员函数，则省略 conversion_obj_ptr 参数。

*编辑*

正如其他人评论的那样，您不需要使用`bind`，`boost::thread`构造函数将为您执行此操作。

[http://www.boost.org/doc/libs/1_53_0/doc/html/thread/thread_management.html#thread.thread_management.thread.multiple_argument_constructor](http://www.boost.org/doc/libs/1_53_0/doc/html/thread/thread_management.html#thread.thread_management.thread.multiple_argument_constructor)

# ruby - 如何选择具有给定属性但值未知的标签？

> ID：16087464
> 
> 赞同：0
> 
> 时间：2013-04-18T15:45:32.817
> 
> 标签：ruby, nokogiri

我猜这对于有一点 Nokogiri 经验的人来说是一个微不足道的问题，但我无法在网上找到的文档或教程中找到答案。

我有一个像这样的 Nokogiri 文件：

```
page = Nokogiri::HTML(open("http://www.example.com")) 
```

该页面包含以下标签：

```
<a title="could be anything" href="http://www.example.com/foo"></a> 
```

`href`如果值`title`未知，我如何获得值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T17:54:29.240

如果您想要具有`href`属性的`a`元素的`title`属性值，您可以使用 Nokogiri `xpath`，如下所示：

```
require 'nokogiri'

doc = Nokogiri::HTML(File.open('sample.html'))

a_with_title = doc.xpath('//a[@title]').map { |e| puts e['href'] } 
```

如果您想从在线 URL 中进行选择，您可以使用

```
require 'nokogiri'
require 'open-uri'

doc = Nokogiri::HTML(open('http://stackoverflow.com/'))

a_with_title = doc.xpath('//a[@title]').map { |e| puts e['href'] } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T17:51:12.423

我终于弄明白了。我相信，以下方法可以`href`从具有标题属性的第一个链接元素中选择`page.css('a[title]')[0]['href']`：

我以为`page.css('a[title]')`是选择`title`属性的值，但实际上它选择了整个元素。然后，您可以引用此元素以从中获取值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T18:47:51.090

```
require 'nokogiri'

doc = Nokogiri::HTML::DocumentFragment.parse <<-SCRIPT
<a title="xx" href="http://www.example1.com/foo1"></a>
<a title="aa" href="http://www.example2.com/foo2"></a>
<a id=5 href="http://www.foo.com/foo3"></a>
<a title="zz" href="http://www.example3.com/foo4"></a>
<a id=5 href="http://www.test.com/foo5"></a>
 SCRIPT

p doc.search("a").map { |nd|  nd['href'] if nd.key?('title')}.compact

#=> ["http://www.example1.com/foo1", "http://www.example2.com/foo2", "http://www.example3.com/foo4"] 
```

# vbscript - 从 VBS 运行命令行和命令

> ID：16087470
> 
> 赞同：25
> 
> 时间：2013-04-18T15:45:45.917
> 
> 标签：vbscript, command-prompt

我需要运行命令以使用 vbs 文件通过命令提示符将文件从一个位置复制到另一个位置。这就是我所拥有的，但是它不断向我抛出错误。

```
'Dim oShell
Set oShell = WScript.CreateObject ("WScript.Shell")
oShell.run "cmd.exe /C copy "S:Claims\Sound.wav" "C:\WINDOWS\Media\Sound.wav"
Set oShell = Nothing' 
```

我得到的错误是：

```
'Script: C:\******\command.vbs
Char: 30
Error: Expected end of statement
Code: 80040401 
```

来源：Microsoft VBScript 编译错误'

请帮忙 ：）

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-04-18T15:47:55.577

问题出在这一行：

```
oShell.run "cmd.exe /C copy "S:Claims\Sound.wav" "C:\WINDOWS\Media\Sound.wav" 
```

“S:Claims”旁边的第一个引号结束了字符串；您需要使用第二个引号来转义文件周围的引号，如下所示：

```
oShell.run "cmd.exe /C copy ""S:\Claims\Sound.wav"" ""C:\WINDOWS\Media\Sound.wav"" " 
```

你也有错字`S:Claims\Sound.wav`，应该是`S:\Claims\Sound.wav`。

我还假设之前`Dim oShell`和之后的撇号`Set oShell = Nothing`也是错别字。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-11-30T18:49:26.567

```
Set oShell = CreateObject ("WScript.Shell") 
oShell.run "cmd.exe /C copy ""S:Claims\Sound.wav"" ""C:\WINDOWS\Media\Sound.wav"" " 
```

# scala - 如何在方法之前和之后访问 Specs2 中的测试/示例/片段名称？

> ID：16087471
> 
> 赞同：3
> 
> 时间：2013-04-18T15:45:46.240
> 
> 标签：scala, specs2

我想做类似的事情：

```
class MySpec extends Specification with BeforeAfterExample {
  var testName
  var clientDir

  def before {
    testName = fragmentName.replaceAll(" ", "-")
    clientDir = new File(workspaceRoot, testName)
    clientDir.mkdirs()
  }

  def after {
    FileUtils.deleteDirectory(clientDir)
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T00:49:16.200

您可以使用 specs2 做您想做的事`ExampleFactory`

```
import org.specs2._
import specification._

class TestSpec extends Specification { def is =
  "test" ! {
    ok
  }
  case class BeforeAfterExample(e: Example) extends BeforeAfter {
    def before = println("before "+e.desc)
    def after  = println("after "+e.desc)
  }
  override def exampleFactory = new ExampleFactory {
    def newExample(e: Example) = {
      val context = BeforeAfterExample(e)
      e.copy(body = () => context(e.body()))
    }
  }
} 
```

API 的这一部分最近才开放，因此目前仅在 1.15-SNAPSHOT 中可用（您可以通过直接在以`org.specs2`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-18T15:39:09.187

有点hacky，但这对我有用：

```
/**
 * Returns the name of the currently executing example
 */
def getCurrentExampleName(spec: Specification): String = {

  val stack = new Exception().getStackTrace
  val specLinesUpStack = for (
    line <- stack
      if line.getClassName.startsWith(spec.getClass.getName))
        yield line.getLineNumber

  spec.is.examples
    .find(e => specLinesUpStack.contains(e.location.lineNumber))
    .get
    .desc.toString()
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T15:57:03.687

这可能会起作用：

```
class MySpec extends Specification with BeforeAfterExample {
  var currentExample = 0
  var testName = ""
  var clientDir:File = null

  def before {
    testName = is.examples(currentExample).desc.toString.replaceAll(" ", "-")
    clientDir = new File(workspaceRoot, testName)
    clientDir.mkdirs()
  }

  def after {
    FileUtils.deleteDirectory(clientDir)
    currentExample += 1    
  }
} 
```

我不认为你可以在之前和之后的方法中获得很多上下文而不做一些像这样的hacky。

# c# - 将位置设置为视频结尾时 WPF MediaElement 冻结

> ID：16087489
> 
> 赞同：1
> 
> 时间：2013-04-18T15:46:26.253
> 
> 标签：c#, wpf, slider, mediaelement, video-player

我实现了一个简单的视频播放器。其中，除其他外，还有一个 MediaElement 和一个 Slider。无论如何，当我将滑块一直向右滑动并将 MediaElement.Position 设置为视频的最后一帧时，视频会在视频的最后一帧冻结，并且不会恢复或响应暂停/播放命令，直到我将不同的视频加载到 MediaElement 中。

我做了一个小技巧，只将位置值更改为距离视频结束至少 20 毫秒的数字，问题就消失了：

```
if ( _mediaElement.HasVideo &&
     _mediaElement.NaturalDuration.HasTimeSpan &&
     (_mediaElement.NaturalDuration.TimeSpan.TotalMilliseconds - e.NewValue) > 20)
{
     _mediaElement.Position = new TimeSpan(0, 0, 0, 0, (int) e.NewValue);
} 
```

我不明白的是为什么视频会在最后一帧冻结？这是 MediaElement 控件中的错误，还是有其他方法可以解决此问题？

我发现 3 年前的一篇文章描述了同样的问题，他们的解决方案是更新了 nVidia 驱动程序。我有最新的 nVidia 驱动程序，但仍然有这个问题。我想上面的破解方法有效，但视频会像那样锁定似乎有点奇怪。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-30T15:01:19.680

请检查您是否将[Unloaded Behavior](http://msdn.microsoft.com/en-us/library/system.windows.controls.mediaelement.unloadedbehavior%28v=vs.100%29.aspx)属性设置为`Close`。尝试设置`Manual`。我认为`Close` [这意味着](http://msdn.microsoft.com/en-us/library/system.windows.controls.mediastate.aspx)卸载视频，因此您的进一步操作无效。

```
<MediaElement Source="media\numbers.wmv" Name="myMediaElement" 
 Width="450" Height="250" LoadedBehavior="Manual" UnloadedBehavior="Manual" /> 
```

# optimization - 在 Sublime Text 2 中格式化空格/制表符描述的表格

> ID：16087494
> 
> 赞同：0
> 
> 时间：2013-04-18T15:46:38.823
> 
> 标签：optimization, formatting, sublimetext2

我的 routes.rb 文件中有一些代码，例如：

```
match 'subscribe' => 'home#subscribe', :as => :subscribe, :method=>:post
match 'identify'=>"home#identify", :as=> :identify
match 'about' => 'home#about_us', :as => :about
match 'how-it-works' => 'home#how_it_works', :as => :how
match 'faq' => 'home#faq', :as => :faq
match 'privacy' => 'home#privacy', :as => :privacy 
```

有没有办法在 Sublime Text 中快速/轻松地格式化它，所以它更像是：

```
match 'faq'             => 'home#faq',            :as => :faq
match 'privacy'         => 'home#privacy',        :as => :privacy 
```

..ETC

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T16:44:54.920

AlignTab插件[更](https://github.com/randy3k/AlignTab)适合您的目的。是基于名为 tabular 的 VIM 插件。

在命令面板中输入对齐表格，然后输入正则表达式**。**对于您的代码，一个简单的正则表达式将是：

> =>|:如

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T16:28:19.417

这就是[对齐](http://wbond.net/sublime_packages/alignment)插件的作用。但是，我不知道它是否每行处理多个“对齐”项目。您可能需要编写自己的宏/插件来执行此操作，或者进行更多搜索。您可能还想在 Sublime Text 论坛上提问，因为他们可能知道有一个插件可以满足您的需求（尽管我不能保证 :)）

# air - 是否可以在空中更改应用程序描述符文件？

> ID：16087499
> 
> 赞同：0
> 
> 时间：2013-04-18T15:47:00.623
> 
> 标签：air

我想在应用程序中有一个选项：gpu [on/off]，但它不能在运行时设置（[http://help.adobe.com/en_US/as3/mobile/WS901d38e593cd1bac-3d719af412b2b394529-8000。 html](http://help.adobe.com/en_US/as3/mobile/WS901d38e593cd1bac-3d719af412b2b394529-8000.html) ). 因此，如果能够更改或替换 application.xml，我会更改它并重新启动应用程序。

我找到了这个主题[如何删除应用程序目录中的文件？](https://stackoverflow.com/questions/1760893/how-can-you-delete-a-file-in-the-application-directory)，但建议的解决方案不起作用。

提前谢谢。

# jquery - jQuery下拉填充第二个下拉和文本字段

> ID：16087503
> 
> 赞同：0
> 
> 时间：2013-04-18T15:47:19.403
> 
> 标签：jquery

我想使用 jQuery 来填充第二个选择框和一个文本字段。当在第一个中进行选择时，我有第二个选择框被正确填充。不过，我无法让它填充文本字段。

数据是从 MySQL 数据库中检索的。下面是我为第一个选择框工作以在第二个中进行选择的代码。

我的 jQuery 代码：

```
<script>
$(document).ready(function(){
  $("#shipment").change(function() {
    $("#vender").load("selection.php", $("#shipment"));
  }).trigger("change");
});
</script> 
```

与此相关的表单字段：

```
<html>
<label for="shipments">Shipment: </label><select id="shipment" name="shipment_id">
<?php if(isset($shipment_selection)) { echo $shipment_selection; } ?> //echos options from db.
</select>
<label for="vender">Vender: </label><select id="vender" name="vender_id"></select>
<label for="cost">Cost: </label>><input type="text" id="cost" name="cost" value="" />
</html> 
```

获取数据的 PHP 脚本：

```
<?php
include('../scripts/db_config.php');

if(isset($_POST['shipment_id'])) {
    if($_POST['shipment_id'] == 1) {
    $sql = 'SELECT id AS vender_id, name AS vender_name FROM venders'; //shows all venders, when shipment is none.
    }
else {
$sql = 'SELECT venders.id AS vender_id, venders.name AS vender_name, shipment.qty AS qty, shipment.cost AS cost FROM shipments INNER JOIN venders ON venders.id=shipments.vender_id WHERE shipments.id='.$_POST['shipment_id']; //Select vender associated with specific shipment.
}
$stmt = $db->query($sql);
$data = array();
    while ($row = $stmt->fetch(PDO::FETCH_ASSOC)) {
    $data[] = $row;
    //echo '<option value="'.$row['vender_id'].'">'.$row['vender_name'].'</option>'; //populates second select box.
    }
echo json_encode($data);
} 
```

完成这项工作后，我将更好地保护 PHP 代码。

关于如何在第一个选择框中进行选择以填充第二个选择框的任何建议，并且文本字段会很棒。

如果格式关闭，请道歉；我是盲人，所以我不确定它在屏幕上的实际外观。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T15:49:55.563

访问的文件`.load()`应该返回要转储到给定元素中的 HTML。由于某些未知原因，您让它返回 JSON。删除它，并取消注释行输出选项。

或者，不使用 ，而是`.load()`使用完整的 AJAX 调用并遍历返回的 JSON 以以这种方式插入选项。

# javascript - AJAX-ed 网页。我如何带来初始数据？

> ID：16087513
> 
> 赞同：3
> 
> 时间：2013-04-18T15:48:02.030
> 
> 标签：javascript, asp.net, ajax, knockout.js

我有一个带有表格数据的网页。现在它使用 Knockout.js 绑定。

当页面加载时，我会调用 AJAX 来获取数据并进行绑定。基本上，页面首先显示，然后用户收到“正在加载...” ajax 消息和数据。这很好，因为页面加载速度很快，但浏览器必须对服务器进行 2 次调用（一个用于页面，另一个用于数据）。

如果用户想刷新数据 - 它也可以很好地工作。

我想知道如何将 ViewModel 数据与页面一起加载？有什么办法可以避免双重访问服务器？我想以某种方式在初始页面加载中包含 JSON，然后使用它并使用 AJAX 刷新它。

编辑：

我让它工作了，不确定我这样做是否有任何问题：

HTML：

```
<div id="initialData" style="display: none;"><asp:Literal ID="initialDataLiteral" runat="server" EnableViewState="False"/></div> 
```

服务器代码：

```
// Prepare initial data for page
            var memoryStream = new MemoryStream();
            var serializer = new DataContractJsonSerializer(typeof(DataEnvelope));
            serializer.WriteObject(memoryStream, GetShipments(DateTime.Now.Date.AddMonths(-2).ToShortDateString(), DateTime.Now.Date.ToShortDateString()));
            memoryStream.Position = 0;
            var streamreader = new StreamReader(memoryStream);
            this.initialDataLiteral.Text = streamreader.ReadToEnd(); 
```

在淘汰赛方面很容易，我只需取出字符串，转换为 JSON 并使用它..

```
// Page comes with preloaded data. Let's set VM properties
        var initialData = $.parseJSON($("#initialData").text());
        vm.tripData(ko.utils.arrayMap(initialData.Shipments, function (i) { return new shipment(i); })); 
```

稍后当用户点击刷新时，他们通过 AJAX 调用获得相同的数据。像这样拥有它有什么缺点吗？显然，查看源代码提供了一堆 JSON“东西”。与完全 ajaxed 加载相比，我仍然认为页面更紧凑，首次加载速度更快。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T18:18:53.417

您没有指定您使用的服务器端技术，但您至少使用`asp.net`. 这是我在 ASP.NET MVC 中使用的模式，因此如果您使用的是 Web 窗体，您可能需要对其进行调整。

```
var modelData = @Html.Raw(Json.Encode(Model));

var MyViewModel = function (data) {
    var model = ko.mapping.fromJS(data);

    // any additional observables, computeds, methods, etc., i.e.
    // model.SomethingNotOnModel = ko.computed();

    return model;
};

var viewModel = MyViewModel(modelData);
ko.applyBindings(viewModel); 
```

Knockout 的映射插件将自动为提供给它的数据对象上存在的任何属性创建可观察对象，因此您无需手动指定这些属性，除非您需要更改它们。

**更新**

根据@Rich 的评论，我觉得我应该更清楚地展示你应该如何实际使用它：

**在页面中**

```
<script>
    $(document).ready(function () {    
        var modelData = @Html.Raw(Json.Encode(Model));
        MyApp.MyView.Init(modelData);
    });
</script> 
```

**外部 JS**

```
MyApp = MyApp || {};

MyApp.MyView = function () {
    var _init = function (data) {
        var viewModel = MyApp.MyView.MyViewModel(data);
        ko.applyBindings(viewModel);
        // anything else that should happen on page load
    };

    return {
        Init: _init
    };
}();

MyApp.MyView.MyViewModel = function (data) {
    var model = ko.mapping.fromJS(data);

    // any additional observables, computeds, methods, etc., i.e.
    // model.SomethingNotOnModel = ko.computed();

    return model;
}; 
```

# ruby - 如何检查数字是否有小数？

> ID：16087514
> 
> 赞同：12
> 
> 时间：2013-04-18T15:48:03.207
> 
> 标签：ruby

我想专门检查给定数字是否包含“.5”

我只处理整数和半数（0.5、1、1.5 等）。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-04-18T15:49:51.143

### `%`应该管用

```
variable % 1 != 0 
```

检查这个[RubyFiddle](http://rubyfiddle.com/riddles/52f7b/)。

*这也是一个[JavaScript fiddle](http://jsfiddle.net/VmSfB/1)。*

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-18T19:28:24.460

始终用于[`BigDecimal`](http://www.ruby-doc.org/stdlib/libdoc/bigdecimal/rdoc/BigDecimal.html)检查数字的小数部分以避免[浮点错误](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)：

```
require 'bigdecimal'

BigDecimal.new(number).frac == BigDecimal("0.5") 
```

例如：

```
BigDecimal.new("0.5").frac == BigDecimal("0.5")
# => true

BigDecimal.new("1.0").frac == BigDecimal("0.5")
# => false 
```

还有一个更通用的解决方案来查看一个数字是否为整数：

```
BigDecimal.new("1.000000000000000000000000000000000000000001").frac.zero?
# => false 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-04-18T15:54:19.260

`myValue == myValue.floor`

或者如果您真的想专门检查 0.5、1.5 等

`myValue - myValue.floor == 0.5`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-18T15:58:23.550

```
(2.50).to_s.include?('.5') #=> true
(2).to_s.include?('.5') #=> false 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-09-23T10:48:11.553

```
with_decimal = 1.5
without_decimal = 2 
```

您可以在将其更改为整数时检查数字是否相同。

```
Integer(with_decimal) != with_decimal
# => true

Integer(without_decimal) != without_decimal
# => false 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-04-18T16:52:49.227

尝试

```
n = 1.5
# => 1.5

n - Integer(n) == 0.5
# => true 
```

# qt - MDI 子窗口内的 MDI 子窗口 Qt

> ID：16087517
> 
> 赞同：0
> 
> 时间：2013-04-18T15:48:11.160
> 
> 标签：qt, mdi, qwidget

我只想知道是否可以在 QT 中做我正在成像的事情：我想在几个 MID 子窗口中打开几个不同的窗口（比如说小部件）。因此 MDIsubwindows 功能允许在 MDIarea 内同时打开不同的文件。现在，我想在每个 MDIsubwindow 中放入不同的 Qwidgets（或另一层或 MDIsubwindow），并有可能在每个 MIDsubwindows 内单独更改这些 Qwindows（并平铺它们）的大小。即，每个 MDI 子窗口的单独行为。

如果这是可能的，您能否提供一些指南、链接或文档。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T17:40:06.003

当然这是可能的，QMDIsubwindow 只不过是专门的 QWidget，所以你可以自由地将任何内容放入其中。假设 QScrollArea 然后你可以放置任何“子子”窗口。

# maven-3 - 使用 Junit4 的 RestAssured 会抛出 ClassNotFoundException：org.apache.http.client.methods.HttpPatch

> ID：16087518
> 
> 赞同：1
> 
> 时间：2013-04-18T15:48:14.917
> 
> 标签：maven-3, rest-assured

我正在尝试使用 Junit 4.8 和具有依赖关系的 maven3 设置一个简单的放心测试用例

```
 <dependency>
        <groupId>com.jayway.restassured</groupId>
        <artifactId>rest-assured</artifactId>
        <version>1.8.0</version>
        <scope>test</scope>
    </dependency>

    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.8</version>
        <scope>test</scope>
    </dependency> 
```

但这让我

```
Caused by: java.lang.ClassNotFoundException: org.apache.http.client.methods.HttpPatch
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    ... 34 more 
```

[我使用了来自https://code.google.com/p/rest-assured/wiki/GettingStarted](https://code.google.com/p/rest-assured/wiki/GettingStarted)的文档 并检查了[https://code.google.com/p/rest-assured/wiki/FAQ](https://code.google.com/p/rest-assured/wiki/FAQ)

非常欢迎任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T07:22:45.957

在删除它工作的依赖项后，我对导致 ClassNotFound 异常的父 pom 有依赖项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-30T16:25:41.493

我知道这个问题已经很老了，但我遇到了类似的问题，我通过添加正确版本的 httpclient 解决了这个问题。我使用的 rest-assured 版本是**2.3.4**所以正确的 httpclient 版本是**4.3.5**。关于这个问题，由于您使用的是放心版本**1.8.0**，因此要使用的 httpclient 正确版本是**4.2.1**

# facebook - Facebook API 返回帖子 ID，但帖子未显示在 Facebook 上

> ID：16087519
> 
> 赞同：0
> 
> 时间：2013-04-18T15:48:21.613
> 
> 标签：facebook, api, post

我通过 API 发布。该应用程序返回帖子 ID，但是当我这样做时[https://www.facebook.com/post-id-here](https://www.facebook.com/post-id-here) facebook 返回一个找不到页面的页面。“抱歉，此页面不可用”

这是为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T16:29:13.080

我相信您要查找的 URL 是[https://graph.facebook.com/pos-id-here](https://graph.facebook.com/pos-id-here)？让我知道是否可以解决，或者如果您有任何问题:)

# drupal-7 - 将 javascript 附加到现有的 drupal 块预处理

> ID：16087524
> 
> 赞同：1
> 
> 时间：2013-04-18T15:48:26.767
> 
> 标签：drupal-7

我正在为我们的展示广告代码使用[DFP Drupal 模块](http://drupal.org/project/dfp)。我想通过预处理将另一个模块提供的附加 JavaScript 附加到每个 DFP 块。那可能吗？我想避免通过主题这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T04:19:47.500

要在您的预处理函数中添加 js，请使用`drupal_add_js`，有关更多详细信息，请参阅此[链接](http://api.drupal.org/api/drupal/includes!common.inc/function/drupal_add_js/7)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-06T19:41:41.810

您可以使用以下代码来实现：

```
function MYTHEME_preprocess_block(&$vars) {

    $block_id = $vars['block']->module . '-' . $vars['block']->delta;
    // Use the following to inspect the ids of the active blocks in a given page
    drupal_set_message($block_id);

    switch ($block_id) {
    case 'block-12': // block id of the target
        drupal_add_css(drupal_get_path('module', 'my_module') . '/css/my-block.css');
        break;
    }
} 
```

# java - 如何确保 JMS 队列将消息保存在持久存储而不是堆中？

> ID：16087526
> 
> 赞同：1
> 
> 时间：2013-04-18T15:48:33.233
> 
> 标签：java, jms, persistence

我的消息大小可能达到 2MB，并且我预计至少有 1000 条消息可用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T17:31:20.103

为什么在收到队列消息时不保留它？

```
public void onMessage(Message message) {
        if (message instanceof TextMessage) {
            try {
                messageDao.save(message); // <----- See you can persist then and there
            }
             catch (JMSException ex) {
                throw new RuntimeException(ex);
            }
        }
        else {
            throw new IllegalArgumentException("Message must be of type TextMessage");
        }       

   } 
```

# python - 将字符中的浮点数转换为浮点数（PYTHON）

> ID：16087527
> 
> 赞同：2
> 
> 时间：2013-04-18T15:48:46.297
> 
> 标签：python, floating-point, byte, valueconverter

我在 python 中有一个程序，我想在其中接收带有一些值的帧。该值由 xbee 发送。

Xbee 发送一个由联合结构分成 4 个字节的浮点数，如下所示：

```
typedef union _data{
    float f;
    char s[4];
} myFloat; 
```

例如，17.23 给我 10、-41、-119、65。所以，我必须在 python 中恢复所有这些值，在我得到 4 之后，将它们转换为浮点数。自从我阅读了每一个 (serial.read()) 以获得浮点结果后，我该怎么办？

这些值将由 python 脚本接收，我想再次将它们加入浮点数。我在 python 中阅读了 struct ，但我对 python 的技能不好，我不明白它是如何工作的。

我使用serial.read逐个读取字节。

任何想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T19:42:48.803

如果我理解正确，您将获得四个整数`[10, -41, -119, 65]`，并且您想将它们重新组合成原始浮点数。如果是这样，答案已经包含在@DSM 的评论中。将这些位拼凑在一起：

```
>>> import struct
>>> x = [10, -41, -119, 65]
>>> struct.unpack('<f', struct.pack('4b', *x))[0]
17.229999542236328 
```

请注意，我们并没有*准确地* `17.23`到达这里，因为该数字不能完全表示为单精度 IEEE 754 二进制浮点数。

不过，这听起来有点颠倒：获取原始字节应该比获取 4 个整数更容易。你究竟是如何获得整数值的？如果您使用的是 pyserial，难道您不能`read(4)`一次获取 4 个字节，然后`struct.unpack`直接使用结果吗？例如，我希望这样的东西可以工作（模拟口译会话）：

```
>>> import struct
>>> x_bytes = ser.read(4)  # (where ser is your Serial instance)
>>> x = struct.unpack('<f', x_bytes)[0]
>>> x
17.229999542236328 
```

# css - CSS3 过渡/转换（卡片翻转效果）在 chrome 26 中失败

> ID：16087528
> 
> 赞同：0
> 
> 时间：2013-04-18T15:48:48.533
> 
> 标签：css, css-transitions, css-transforms

我一直在尝试用 css3 实现卡片翻转效果，以 Flesky 网站为参考：[http](http://fleksy.com/)

://fleksy.com/查看“Flesky 已出现在新闻界”部分，翻转效果在我的办公室 Chrome 中就像一个魅力（版本 26.0.1410.64 m，Win7 ），但是当使用家庭 Chrome（完全相同的版本，Vista）查看它时，它完全搞砸了 -> [http://snag.gy/t5dkH.jpg](http://snag.gy/t5dkH.jpg)。

知道发生了什么吗？我需要实现类似的翻转效果，但谷歌搜索仍然没有答案。

或者有人知道我可以尝试任何替代解决方案吗？

# javascript - 将画布颜色限制为特定数组

> ID：16087529
> 
> 赞同：3
> 
> 时间：2013-04-18T15:48:52.767
> 
> 标签：javascript, canvas, colors, rgb

如何将画布图像的 RGB 颜色空间限制为特定的颜色数组？前：

```
var colors = ['#aaffee','#cc44cc','#00cc55','#0000aa'];
var rgb = [230,111,90];

// match rgb with the colors and return the closest match 
```

当我遍历画布图像数据中的像素时，我需要从这个数组中获得最接近的匹配。有没有一个聪明的功能可以做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-19T01:19:17.023

**如何将颜色限制为特定的调色板**

您必须将每个原始像素映射到最近的调色板颜色。

为此，您实际上计算了色轮上原始颜色和调色板颜色之间的距离。

这是一个插图。原始像素（橙色）在我们指定的调色板中具有指向每种颜色的箭头（假设我们的调色板有 3 种指定颜色：红色、绿色、蓝色）。

具有最短箭头长度的调色板颜色将替换原始像素。

由于橙红色箭头最短，调色板红色将代替原来的橙色。

![在此处输入图像描述](https://i.stack.imgur.com/M4Hwu.png)

这是将原始颜色映射到调色板颜色的重要函数：

```
 // use Euclidian distance to find closest color
    // send in the rgb of the pixel to be substituted
    function mapColorToPalette(red,green,blue){
        var color,diffR,diffG,diffB,diffDistance,mappedColor;
        var distance=25000;
        for(var i=0;i<palette.length;i++){
            color=palette[i];
            diffR=( color.r - red );
            diffG=( color.g - green );
            diffB=( color.b - blue );
            diffDistance = diffR*diffR + diffG*diffG + diffB*diffB;
            if( diffDistance < distance  ){ 
                distance=diffDistance; 
                mappedColor=palette[i]; 
            };
        }
        return(mappedColor);
    } 
```

这是代码和小提琴：http: [//jsfiddle.net/m1erickson/GWQQH/](http://jsfiddle.net/m1erickson/GWQQH/)

注意：您可以使用哈希表、树搜索等来改进此代码。

```
<!doctype html>
<html>
<head>
<link rel="stylesheet" type="text/css" media="all" href="css/reset.css" /> <!-- reset css -->
<script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>

<style>
    body{ background-color: ivory; padding:15px; }
    canvas{border:1px solid red;}
</style>

<script>
$(function(){

    var canvasOriginal=document.getElementById("OriginalCanvas");
    var ctx=canvasOriginal.getContext("2d");
    var canvasMapped=document.getElementById("MappedCanvas");
    var ctxMapped=canvasMapped.getContext("2d");

    // draw some off-colored rectangles
    ctx.beginPath();
    ctx.fillStyle="rgb(140,70,60)"; //red-ish
    ctx.rect(10,10,20,20);
    ctx.fill();
    ctx.beginPath();
    ctx.fillStyle="rgb(70,140,60)";  //green-ish
    ctx.rect(10,40,20,20);
    ctx.fill();
    ctx.beginPath();
    ctx.fillStyle="rgb(70,60,140)";  //blue-ish
    ctx.rect(10,70,20,20);
    ctx.fill();

    // create an array of palette colors
    var palette=[{r:255,g:0,b:0},{r:0,g:255,b:0},{r:0,g:0,b:255}];

    // load all pixels into an array
    var imageData=ctx.getImageData(0,0,canvasOriginal.width,canvasOriginal.height);
    var data=imageData.data;

    // rewrite all pixels using only the mapped colors
    var mappedColor;
    for(var i=0; i<data.length; i+=4) {
      mappedColor = mapColorToPalette(data[i], data[i+1], data[i+2]);
      if(data[i+3]>10){
          data[i]   = mappedColor.r;
          data[i+1] = mappedColor.g;
          data[i+2] = mappedColor.b;
      }
    }    
    ctxMapped.putImageData(imageData,0,0);

    // use Euclidian distance to find closest color
    function mapColorToPalette(red,green,blue){
        var color,diffR,diffG,diffB,diffDistance,mappedColor;
        var distance=25000;
        for(var i=0;i<palette.length;i++){
            color=palette[i];
            diffR=( color.r - red );
            diffG=( color.g - green );
            diffB=( color.b - blue );
            diffDistance = diffR*diffR + diffG*diffG + diffB*diffB;
            if( diffDistance < distance  ){ 
                distance=diffDistance; 
                mappedColor=palette[i]; 
            };
        }
        return(mappedColor);
    }

}); // end $(function(){});
</script>

</head>

<body>
    <canvas id="OriginalCanvas" width=60 height=100></canvas>
    <canvas id="MappedCanvas" width=60 height=100></canvas>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T18:31:44.107

最好的方法可能是选择与所有颜色最匹配的颜色

```
var colors = ['#aaffee','#cc44cc','#00cc55','#0000aa'];
var rgb = [230,111,90];
var best = 768;
var canvasColor = colors[0];
for (i=0; i< colors.length; i++){
    t = 0;
    for (j=0; j<3; j++){
        t += Math.abs(rgb[j] - parseInt(colors[i].substring(j*2+1,j*2+3), 16));
    }
    if (t < best){
        best = t;
        canvasColor = colors[i];
    }   
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T12:51:16.223

只是另一种解决方案。为了将 rgb 转换为 hsl，我使用[了 TinyColor](https://github.com/bgrins/TinyColor)

```
function fixColors(c) {
    var ctx = c.getContext("2d"),
        colors = [
            { rgb: { r: 255, g: 0,   b: 0   } },
            { rgb: { r: 255, g: 255, b: 0   } },
            { rgb: { r: 0,   g: 255, b: 0   } },
            { rgb: { r: 0,   g: 255, b: 255 } },
            { rgb: { r: 0,   g: 0,   b: 255 } },
            { rgb: { r: 255, g: 0,   b: 255 } },
            { rgb: { r: 255, g: 0,   b: 0   } }
        ],
        pixelData = ctx.getImageData(0, 0, c.width, c.height),
        data = pixelData.data,
        cache = { },
        m = Math,
        i;

    colors.forEach(function(c) {
        c.hsl = rgb2hsl(c.rgb);
    });

    for (i = 0; i < data.length; i += 4) {
        var key = "c_" + data[i + 0] + "_" + data[i + 1] + "_" + data[i + 2],
            originalColor,
            newColor;

        if (!cache.hasOwnProperty(key)) {
            cache[key] = tinycolor({r: data[i + 0], g: data[i + 1], b: data[i + 2]}).toHsl();
        }
        originalColor = cache[key]

        newColor = colors.reduce(function(r, l) {
            return m.abs(r.hsl.h - originalColor.h) < m.abs(l.hsl.h - originalColor.h) ? r : l;
        });

        data[i + 0] = newColor.rgb.r;
        data[i + 1] = newColor.rgb.g;
        data[i + 2] = newColor.rgb.b;
    }

    ctx.putImageData(pixelData, 0, 0);
}

function rgb2hsl(c) {
    return tinycolor(c).toHsl();
} 
```

# paypal - 多件商品和基本价格的 Paypal 运输问题

> ID：16087535
> 
> 赞同：0
> 
> 时间：2013-04-18T15:49:16.627
> 
> 标签：paypal, shipping

我有 2 件商品待售。我的运费基本价格为 7.50 美元和每件附加商品 2.00 美元

我已经设置了高级代码

运费=$7.50 运费2=$2.00

一切正常，除了将不同的商品添加到购物车时，购物车会再次或两次收取基本价格（7.50 美元）

我知道这是一个常见问题，我想我想说的是，我试图让整个购物车而不是每件商品收取基本价格（7.50 美元）和每件额外商品 2.00 美元。

所有产品的尺寸和重量都相同

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T15:58:08.670

您想要做的是设置以下变量。

运输=0.00
shipping2=2.00
handling_cart=7.50

这会给你你想要的效果。如果买家仅将 1 件商品添加到购物车，则总运费将显示为 7.50，2 件商品将显示为 9.50，3 件商品将显示为 11.50，依此类推。

您需要在所有按钮中包含这 3 个变量。

# php - 如何用php更新mysql中的多行

> ID：16087536
> 
> 赞同：-4
> 
> 时间：2013-04-18T15:49:20.270
> 
> 标签：php, mysql, auto-update, multiple-columns

我有一张这样的桌子

```
id | website | ping |  online |
-------------------------------
1  |xxxx.com | 30   | 1
-------------------------------
4  |xxxx.com | 46   | 1
-------------------------------
5  |xxxx.com | 10   | 0
-------------------------------
8  |xxxx.com | 90   | 1
-------------------------------
11 |xxxx.com | 200  | 0 
```

我想知道如何在不更改 id 和网站的情况下更新所有表中的 ping 和在线行 我已经有了 ping 和在线功能

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T16:03:25.377

您将不得不读取整个表，然后遍历该记录集，获取 ID 并使用该 ID 使用该 ID 的新值更新表。

类似的东西（伪代码）

```
records = db.executeSQL("SELECT * FROM TABLE");
foreach record in records
    $id = record.id
    $whateverping = the new ping for ID=$id
    $whateveronline = the new online for ID=$id
    result = db.executeSQL("UPDATE TABLE SET ping=$whateverping, online=$whateveronline WHERE ID=$id); 
```

# android - 使用 WordPress 后端的 Android 应用程序

> ID：16087538
> 
> 赞同：0
> 
> 时间：2013-04-18T15:49:22.933
> 
> 标签：android, wordpress

嗨，我有一个由 WordPress 提供支持的企业目录，我需要一个能够使用我的 WordPress 数据库使用 android 智能手机搜索企业地址和电话的 Android 应用程序。最好的方法是什么？

对不起，如果我的问题不清楚，但我希望你能理解。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T15:55:17.970

最常见的解决方案之一是构建与数据库交互的 Web 服务，因为数据库不是本地数据库。在此之后，您可以向 Web 服务发出请求，以从数据库中获取信息到 Android 手机。

已经有很多关于这方面的教程，这里有一些：

[http://www.helloandroid.com/tutorials/connecting-mysql-database](http://www.helloandroid.com/tutorials/connecting-mysql-database)

[http://www.androidhive.info/2012/05/how-to-connect-android-with-php-mysql/](http://www.androidhive.info/2012/05/how-to-connect-android-with-php-mysql/)

# android - 切换片段 - 谷歌地图 V2 视图不隐藏

> ID：16087541
> 
> 赞同：1
> 
> 时间：2013-04-18T15:49:28.103
> 
> 标签：android, google-maps, android-fragments

我正在制作一个包含多个片段的 android 应用程序。我的第一个片段由一些元素和这样的视频视图组成：![在此处输入图像描述](https://i.stack.imgur.com/SWPmJ.jpg)

当我用谷歌地图视图打开片段时，交易工作正常，但是当我回到第一个片段时，地图视图并没有像这样完全隐藏：

![在此处输入图像描述](https://i.stack.imgur.com/QqKNV.jpg)

这两个片段分配在主片段活动中，并在必要时隐藏/显示，如下所示：

```
private void setFragment(Fragment fragment)
{
    FragmentTransaction trans = getSupportFragmentManager().beginTransaction();
    // If Active fragment is instance of AccueilFragment I hide this one  
    if(activeFragment instanceof AccueilFragment)
    {
        System.out.println("accueil fragment hide");
        trans.hide(mAccueilFragment);
    }
    // If Active fragment is instance of CataloguesFragment I hide this one 
    if(activeFragment instanceof CataloguesFragment)
    {
        System.out.println("ctalogue fragment hide");
        trans.hide(mCataloguesFragment);
    }
    // If Active fragment is instance of MagasinsFragment I hide this one 
    if(activeFragment instanceof MagasinsFragment)
    {
        System.out.println("magasins fragment hide");
        trans.hide(mMagasinsFragment);
    }
    // If Active fragment is instance of NewsFragment I hide this one 
    if(activeFragment instanceof NewsFragment)
    {
        System.out.println("news fragment hide");
        trans.hide(mNewsFragment);
    }
    mListFragments.add(fragment);
    // I set the new active fragment
    activeFragment = fragment;
    // I show it
    trans.show(fragment);
    // And I commit transaction  
    trans.commit();
} 
```

谷歌地图视图似乎没有隐藏并在前台传递，有人可以帮助我吗？

# java - iText setRowspan 不适用于标题中的表格？

> ID：16087542
> 
> 赞同：1
> 
> 时间：2013-04-18T15:49:30.527
> 
> 标签：java, itext

完全相同的代码用于为文档的主体和文档的页眉创建[PdfPTable 。](http://api.itextpdf.com/itext/com/itextpdf/text/pdf/PdfPTable.html)该表在主体中正确呈现，但似乎没有考虑标题中的**setRowspan**值。

下面我粘贴了生成的 pdf 的屏幕截图，然后是用于生成 pdf 的最小独立程序。

# PDF输出

![在此处输入图像描述](https://i.stack.imgur.com/Ps01J.png)

# 代码

```
import java.io.*;
import com.itextpdf.text.*;
import com.itextpdf.text.pdf.*;

class HeaderAndFooter extends PdfPageEventHelper{

    private PdfPTable header;

    public HeaderAndFooter() throws Exception {
        header = FooMain.createTable();
        header.setTotalWidth(530);
    }

    @Override
    public void onEndPage(PdfWriter writer, Document document) {
        PdfContentByte cb = writer.getDirectContent();
        float x   = document.leftMargin();
        float hei = header.getTotalHeight();
        float y   = document.top()+hei;
        header.writeSelectedRows(0, -1, x , y, cb);
    }
}

public class FooMain {

    public static void main(String[] args) throws Exception {
        Document doc = new Document(PageSize.A4, 30, 30, 150, 40);
        PdfWriter writer = PdfWriter.getInstance(doc, new FileOutputStream("./brokenTableInHeader.pdf"));
        writer.setPageEvent(new HeaderAndFooter());
        doc.open();
        doc.add(createTable());
        doc.close();
    }

    public static PdfPTable createTable() throws Exception {
        PdfPTable table = new PdfPTable(2);
        PdfPCell cell = new PdfPCell(new Phrase("cell spanning two rows")); 
        cell.setRowspan(2);
        table.addCell(cell);
        table.addCell( new Phrase ("a"));
        table.addCell( new Phrase ("b"));
        return table;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T06:57:02.747

[在这个 SO question](https://stackoverflow.com/questions/13679178/itext-pdfptable-rowspan-using-mytable-writeselectedrows)中找到了答案（使用**ColumnText** :: **go**而不是**PdfPTable** :: **writeSelectedRows**）

这是我的工作代码的摘录：

```
ColumnText column = new ColumnText(writer.getDirectContent());
column.addElement(footer);
column.setSimpleColumn (0, 0, 630, 80);
column.go(); 
```

# arrays - 在数组中查找多数元素的候选人

> ID：16087547
> 
> 赞同：0
> 
> 时间：2013-04-18T15:49:47.397
> 
> 标签：arrays, algorithm

**我不是在问如何在数组中找到多数元素**，这已在此处详细讨论过[查找数组中的多数元素](https://stackoverflow.com/questions/4325200/find-majority-element-in-array)

我的问题如下：

有一个数组`arr[1...2n]`，这个数组的多数元素是`maj`，现在我将使用以下规则删除其中的元素`arr`，

如果`arr[i] == arr[i + 1]`, 删除`arr[i]`, i = 1, 3, 5,..., 2n - 1; else if `arr[i] != arr[i + 1]`, 删除`arr[i]`and `arr[i + 1]`, i = 1, 3, 5, ..., 2n - 1。

那么我们可以得到一个新的数组`new_arr`，多数元素的候选`new_arr`是`new_maj`，有什么证据可以证明`new_maj == maj`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T18:21:45.857

是的，有证据。

我们只对元素对感兴趣`a[i],a[i+1]`，`i`奇怪。如果`a[i]=a[i+1]`，我们称这样的一对“好”。其他对是“坏的”。等于多数候选的元素是“groovy”。一对好的 groovy 元素是一对 groovy。

关于好对子的一个简单事实是，至少有一半的好对子是时髦的。假设不是这样；那么在好的对中，只有不到一半的元素是 groovy 的，而在坏的对中，不超过一半的元素是 groovy 的。总的来说，只有不到一半的元素是 groovy 的。这是一个矛盾。

所以我们已经确定，至少有一半的好对子是 groovy 的。

现在消除所有坏对。仍然至少有一半的元素是 groovy 的（因为只剩下好的对，其中至少有一半是 groovy 的）。

现在从好对中消除所有其他元素。仍然至少有一半的元素是常规的（因为每个元素的数量只是减半）。

证明到此结束。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T19:07:18.130

这是我的证明变体：

考虑对 arr[i] 和 arr[i+1] 的 4 种情况（反之亦然，对的顺序并不重要）， i 是奇数。设**maj**是主要元素，**min**是任何次要元素：

1.  **maj** **maj** - 让这些对的数量*为*
2.  **maj** **min** - 设此类对的数量为*b*
3.  **min1** **min2** - 让这些对的数量为*c* , min1 != min2
4.  **min1** **min1** - 让此类对的数量为*d*

a、b、c、d 都 >= 0。

案例 1 对主要元素的原始总和贡献 2 |maj| 并减少主要元素的最终总和 |maj|' （算法执行后）乘以 1

案例 2 对 |maj| 贡献 1 和 1 到 |min|，所有次要元素的原始总和，并减少 |maj|' 由 1 和 |min|' 1

案例 3 对 |min| 贡献 2 并减少 |min|' 2

案例 4 对 |min| 贡献 2 并减少 |min|' 1

因此，原始数组 arr[] 中主要元素的总数为：

```
|maj| = 2a + b 
```

而所有次要元素的数量为：

```
|min| = b + 2c + 2d 
```

自从 |maj| > |分钟| ,

```
2a + b > b + 2c + 2d
    2a > 2c + 2d
     a > c + d 
```

运行算法后，新的主要元素数由下式给出：

```
|maj|' = |maj| - a - b 
```

新的次要元素数量为：

```
|min|' = |min| - b - 2c - d 
```

代入我们得到：

```
|maj|' = 2a + b - a - b           = a
|min|' = b + 2c + 2d - b - 2c - d = d 
```

由于我们从上面知道c + d < a，并且a，c，d都> = 0，所以我们有

```
a > c + d =>
a > d =>
|maj|' > |min|' 
```

因此**maj**仍然是新数组中的主要元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T16:09:35.107

定义`N = 2 n`. 数组包含`N`元素。

定义为出现在数组中`M`的次数。`maj`“多数元素”的定义是`M > N/2`。

现在将数组分成对`p[1] ... p[n]`。定义`q0`为包含 的零个实例的对数`maj`。定义`q1`为恰好包含 的一个实例的对数`maj`。定义`q2`为恰好包含 的两个实例的对数`maj`。

然后`N = 2 q0 + 2 q1 + 2 q2`和`M = q1 + 2 q2`。

代入定义多数元素的不等式，并简化：

```
 M > N / 2
q1 + 2 q2 > (2 q0 + 2 q1 + 2 q2) / 2
q1 + 2 q2 > q0 + q1 + q2
     2 q2 > q0 + q2
       q2 > q0 
```

因此，包含 的两个实例的对`maj`的数量超过了包含 的零实例的对的数量`maj`。

现在定义为运行算法后出现在新数组中`M'`的次数。`maj`该算法为每一对删除一个，为`maj`每一`q1`对删除一个。所以。`maj``q2``M' = M - q1 - q2`

定义`N'`为算法生成的新数组的大小。该算法为每对删除两个元素，为每`q1`对删除一个元素`q2`。

但是我们不知道算法为每一`q0`对删除了多少元素。一些`q0`对包含两个不同的元素，算法会删除这两个元素。但其他`q0`对包含相同的（非`maj`）元素，算法只删除一个。

一个极端是所有`q0`对都被完全删除。在这种情况下，算法会删除`2 q0`元素，所以

```
N - 2 q1 - q2 - 2 q0 ≤ N' 
```

另一个极端是每`q0`对只删除一个元素。在这种情况下，算法会删除`q0`元素，所以

```
N - 2 q1 - q2 - q0 ≥ N' 
```

让我们回到“多数元素”的定义，做一些代数：

```
 M > N / 2
M - q1 - q2 > N / 2 - q1 - q2
M - q1 - q2 > (N - 2 q1 - 2 q2) / 2
M - q1 - q2 > (N - 2 q1 - q2 - q2) / 2 
```

左边是`M'`。

```
M' > (N - 2 q1 - q2 - q2) / 2 
```

我们可以把右手边变成`N' / 2`吗？首先，两边都乘以 2：

```
2 M' > N - 2 q1 - q2 - q2 
```

回想一下，我们证明了`q2 > q0`. 所以

```
2 M' > N - 2 q1 - q2 - q2 > N - 2 q1 - q2 - q0 
```

并且，由于我们推断`N - 2 q1 - q2 - q0 ≥ N'`，

```
2 M' > N - 2 q1 - q2 - q0 ≥ N' 
```

所以

```
2 M' > N'
  M' > N' / 2 
```

因此`maj`在新数组中出现了足够的时间成为新数组的多数元素。QED。

# c++ - QTime 缓冲区溢出？

> ID：16087548
> 
> 赞同：1
> 
> 时间：2013-04-18T15:49:48.387
> 
> 标签：c++, qt, qt5

我正在编写一个程序，要求用户等待很多秒并等待那么多秒。问题是只要 waitSecs 大于 9999 秒，launchTime 似乎就变成了一个随机数。我使用 qDebug 输出了 waitSecs，它是正确的数字（即使数字大于 9999）。有什么帮助吗？

```
QTime launchTime = QTime::currentTime().addSecs(waitSecs); 
```

这是代码+输出：

![在此处输入图像描述](https://i.stack.imgur.com/pnNMS.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T15:57:20.163

从 Qt 文档[http://qt-project.org/doc/qt-4.8/qtime.html#addSecs](http://qt-project.org/doc/qt-4.8/qtime.html#addSecs)：

```
QTime QTime::addSecs ( int s ) const 
```

返回一个 QTime 对象，该对象包含比该对象的时间晚 s 秒的时间（如果 s 为负数，则更早）。

**请注意，如果过了午夜，时间将会结束。**

考虑改用 QDateTime ...

# php - 创建电子邮件验证码时限制长度是否不好？

> ID：16087559
> 
> 赞同：2
> 
> 时间：2013-04-18T15:50:19.173
> 
> 标签：php, jquery, email-validation, maxlength

我正在学习 jQuery 和 PHP 来创建自己的表单验证。我已经阅读了几个教程，但我没有看到关于限制最大长度的任何考虑或符号？我确实看到了最小长度要求建议，但我想知道这是否是限制最大允许字符的最佳做法。

这听起来不错？

*   电子邮件地址 = 25 个字符
*   名称 = 20 个字符
*   消息 = 200 个字符，并带有一个表示最大值的符号。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T16:05:04.977

RFC 3696 规定电子邮件地址的最大总长度为 320 个字符（“本地部分”：64 + “@”符号：1 + “域部分”：255 = 320）。你很少会遇到这么长的地址，但你还是应该支持他们。

来源：[https](https://www.rfc-editor.org/rfc/rfc3696) ://www.rfc-editor.org/rfc/rfc3696 （第 3 节：对电子邮件地址的限制，最后一段）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T15:55:52.533

我已经看到更长的电子邮件地址...人们拥有带有全名的电子邮件地址（已经可以等于±25个字符），然后是@domain。

我将电子邮件地址的限制设置为**至少**40-50 个字符。

然后将名称改为〜30个字符。（如果您只需要名字和姓氏，当您需要全名时，请将其设置为至少 50 个字符。）

消息长度真的不多，仅我写给你的文字是为了解释为什么你的限制太低。如果不是绝对需要这样的下限，则例如制作 1000 个字符（或数据库中的完整 TEXT 列为 65535），但指出限制 - 最好也是实际计数。

# php - Codeigniter - 从下拉列表中获取值传递给控制器

> ID：16087560
> 
> 赞同：3
> 
> 时间：2013-04-18T15:50:23.497
> 
> 标签：php, codeigniter

我正在尝试从具有 3 个选项的表单中传递一个值，因此当用户单击任何选项时，它应该将该值传递给控制器​​。

我在想也许我可以有类似 `onChange="selectedValue" 的东西。我试图从视图中抓取帖子，但没有成功。

任何帮助，将不胜感激

看法

```
 <label>Reports</label>
            <form>
            <select NAME="hours">
              <option value="24">24</option>
              <option value="12">12</option>
              <option value="1">1</option>

            </select>
            </form> 
```

控制器

```
public function about()
{
    $search = $this->input->post('hours');

    echo $search;

    $this->load->view("about");
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T16:10:35.057

您通常会通过将视图中的表单与控制器中的函数相加来将值从视图传递到控制器。您可以将 JavaScript 添加到表单以在选择选项时自动提交 - `onchange="this.form.submit()"`。（例如，而不是使用按钮。）

**看法**

```
<form method="post" accept-charset="utf-8" action="<?php echo site_url("yourcontroller/about"); ?>">
    <select name="hours" onchange="this.form.submit()">
        <option value="24">24</option>
        <option value="12">12</option>
        <option value="1">1</option>
    </select>
</form> 
```

**控制器**

```
public function about()
{
    //Get the value from the form.
    $search = $this->input->post('hours');

    //Put the value in an array to pass to the view. 
    $view_data['search'] = $search;

    //Pass to the value to the view. Access it as '$search' in the view.
    $this->load->view("about", $view_data);
} 
```

# c - `while(1)` 如何优化不占用所有资源？

> ID：16087564
> 
> 赞同：1
> 
> 时间：2013-04-18T15:50:39.700
> 
> 标签：c, linux, loops, scheduling

假设我有一些代码可以做到这一点：

```
while(1) {
      scanf("%c", &key);
      // if E or e, exit
      if (key == 'E' ||  key == 'e')
          break;
} 
```

这显然不会占用哪怕一个核心的所有资源。它只是......“坐”在那里，直到有人真正按下 E。我的问题是：运行时如何发现它不应该占用一个核心的所有资源，只是等待一个 scanf？scanf 是一种特殊情况，因为它是 I/O，因此操作系统会调度它直到有效按下一个键？我可以`while`通过说`a++`在循环内添加一个来强制它一直运行吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T15:54:18.267

> scanf 是一种特殊情况，因为它是 I/O，因此操作系统会调度它直到有效按下某个键

这正是正在发生的事情。在这种情况下`scanf`是**阻塞**操作。也就是说，如果不能立即执行（输入缓冲区中没有任何内容），操作系统只会让您的进程进入睡眠状态，并记住在出现问题时将其唤醒。

> 我可以通过说在循环中添加 a++ 来强制它一直处于等待状态吗

`a++`不会改变任何事情。只要您有长时间等待的阻塞调用，您就无法锁定 CPU。

* * *

> 直到一个键被有效按下

在 Linux 中，输入通常是“熟的”。也就是说，按一个键通常是不够的（您还需要在进程有机会查看数据之前按回车键）。

* * *

正如 Basile 在评论中正确提到的那样，`scanf`它本身可能并不总是阻塞。如果 stdio 缓冲区中有足够的输入，`scanf`则只会返回它。如果不是，它将调用`read(2)`which *can* block。

# html - 使用 SVG 为 DIV 元素添加阴影效果

> ID：16087565
> 
> 赞同：1
> 
> 时间：2013-04-18T15:50:40.063
> 
> 标签：html, svg

是否可以有一个带有黑色边框的普通 div，但是对于较新的浏览器使用 SVG 添加各种阴影效果？

即，对于旧浏览器，边框会显示，但对于较新的浏览器，您可能会有一个阴影，使 div 看起来像是一张被抬起的纸。

**编辑：图像样本** ![在此处输入图像描述](https://i.stack.imgur.com/3ZR77.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T11:34:16.140

实际上，我在以下链接中使用 Craig Buckler 的方法设法解决了这个问题： [http ://www.sitepoint.com/pure-css3-paper-curls/](http://www.sitepoint.com/pure-css3-paper-curls/)

这种方法基本上使用 :before 和 :after 位于 div 后面的伪类。他们确实使用了盒子阴影效果和变换。

这是我的 HTML：

```
<div class="note">
    <div class="note-shadow-top">
        <div class="note-shadow-bottom">
            <div class="note-content">
                <asp:Literal ID="ContentLiteral" Text="Content" runat="server" />
            </div>
        </div>
    </div>
</div> 
```

这是CSS：

```
.note
{
}

.note-content
{
    padding: 20px;
}

.note p:last-child
{
    margin-bottom: 0;
}

.note-shadow-top
{
    position: relative;
    margin: 20px auto;
    background-color: #fff;

    border: 1px solid rgba(0, 0, 0, 0.07);
}

    .note-shadow-top:before, .note-shadow-top:after
    {
        position: absolute;
        width: 40%;
        height: 40%;
        content: ' ';
        left: 4px;
        top: 11px;
        background: transparent;
        -webkit-transform: skew(5deg) rotate(1deg);
        -moz-transform: skew(5deg) rotate(1deg);
        -ms-transform: skew(5deg) rotate(1deg);
        -o-transform: skew(5deg) rotate(1deg);
        transform: skew(5deg) rotate(1deg);
        -webkit-box-shadow: -4px 0 9px rgba(0, 0, 0, 0.3);
        -moz-box-shadow: -4px 0 9px rgba(0, 0, 0, 0.3);
        box-shadow: -4px 0 9px rgba(0, 0, 0, 0.3);
        z-index: -1;
    }

    .note-shadow-top:after
    {
        left: auto;
        right: 4px;
        -webkit-transform: skew(-5deg) rotate(1deg);
        -moz-transform: skew(-5deg) rotate(1deg);
        -ms-transform: skew(-5deg) rotate(1deg);
        -o-transform: skew(-5deg) rotate(1deg);
        transform: skew(-5deg) rotate(1deg);
        -webkit-box-shadow: 4px 0 9px rgba(0, 0, 0, 0.3);
        -moz-box-shadow: 4px 0 9px rgba(0, 0, 0, 0.3);
        box-shadow: 4px 0 9px rgba(0, 0, 0, 0.3);
    }

.note-shadow-bottom
{
    position: relative;
    margin: 0 auto;
}

    .note-shadow-bottom:before, .note-shadow-bottom:after
    {
        position: absolute;
        width: 40%;
        height: 10px;
        content: ' ';
        left: 0;
        bottom: 8px;
        background: transparent;
        -webkit-transform: skew(-5deg) rotate(-7deg);
        -moz-transform: skew(-5deg) rotate(-7deg);
        -ms-transform: skew(-5deg) rotate(-7deg);
        -o-transform: skew(-5deg) rotate(-7deg);
        transform: skew(-5deg) rotate(-7deg);
        -webkit-box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);
        -moz-box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);
        z-index: -1;
    }

    .note-shadow-bottom:after
    {
        left: auto;
        right: 1px;
        -webkit-transform: skew(5deg) rotate(5deg);
        -moz-transform: skew(5deg) rotate(5deg);
        -ms-transform: skew(5deg) rotate(5deg);
        -o-transform: skew(5deg) rotate(5deg);
        transform: skew(5deg) rotate(5deg);
    }
.ie8 .note-shadow-top, .ie7 .note-shadow-top
{
    border: 1px solid #EBEBEB;
} 
```

希望这可以帮助别人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T00:26:25.300

阴影效果可以通过css3`box-shadow`属性来实现。可以在[此处](http://www.css3.info/preview/box-shadow/)找到一些示例，并且[该站点](http://css3generator.com/)允许交互式生成 CSS 子句并立即预览（也包括其他 css 效果）。

示例文件：

```
<!DOCTYPE html>
<html>
    <head>
        <title>css3 box shadow demo</title>
    </head>
    <body>
        <div style="width:500px; height:100px; -moz-box-shadow: 10px 10px 5px #888; -webkit-box-shadow: 10px 10px 5px #888; box-shadow: 10px 10px 5px #888;">no content</div>
    </body>
</html> 
```

# python - UDP Socketserver - 通过同一个套接字发送数据（不可能？）

> ID：16087567
> 
> 赞同：1
> 
> 时间：2013-04-18T15:50:41.780
> 
> 标签：python, sockets, udp, request

我有一台可能位于多个防火墙后面的计算机，只有一个私有 IP……几乎无法从外部世界访问。

该计算机定期将 UDP 数据发送到远程服务器（可从任何地方访问）。该远程服务器可能与 UDP 发送方/客户端位于不同的网络中（或与该问题不同的国家/地区）。

在某个时刻，我必须发送一个包，确认我收到了一些数据，返回给“无法访问”的计算机，这意味着：客户端开始了通信并且我确实有一个套接字。

我害怕答案，因为我读到的 UDP 协议主要是*send-->disconnect-->forget about the package*，但问题来了。有什么方法可以使用现有的 UDP 套接字发送数据？

作为服务器，我使用了一个非常简单的 SocketServer 类：

```
class MyUDPHandler(SocketServer.BaseRequestHandler):

    def handle(self):
        message_type = message_utils.extract_type(self.request[0])
        message_cls = message_factory.get_class_by_message_type(message_type)
        message = message_cls(
                              data=self.request[0],
                              came_from=self.client_address)
        print "Got %s" % message
        message.process()
        self.request[1].send("test") 

if __name__ == "__main__":
    SERVER_HOST = settings.SERVER_HOST\
                        if hasattr(settings, "SERVER_HOST") else ""
    SERVER_PORT = int(settings.SERVER_PORT)
    server = SocketServer.UDPServer(
                                    (SERVER_HOST, SERVER_PORT),
                                    MyUDPHandler)
    server.serve_forever() 
```

该行`self.request[1].send("test")`因错误而失败：`[Errno 89] Destination address required`我阅读的越多，我就越认为我无法将数据发送回客户端，至少不能使用这个简单的“ `send`”解决方案。

我无法更改客户端。有没有办法重用套接字发送 UDP 数据？也许那里有一个我不知道的“救世主”课程？任何提示将不胜感激。

先感谢您。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T16:30:01.400

您必须像这样使用`.sendto()`，而不是`.send()`：

```
self.request[1].sendto(
  "test",
  self.client_address) 
```

参考：[http ://docs.python.org/2/library/socketserver.html#socketserver-udpserver-example](http://docs.python.org/2/library/socketserver.html#socketserver-udpserver-example)

* * *

### 附加功能：

我可以创建的最小的响应式 UDP 套接字服务器：

```
import SocketServer
class MyUDPHandler(SocketServer.BaseRequestHandler):
    def handle(self):
        self.request[1].sendto( "test\n", self.client_address)
SocketServer.UDPServer( ("", 5432), MyUDPHandler).serve_forever() 
```

因此，它可以从 Linux 命令行进行测试：

```
$ nc -u 127.1 5432 
```

* * *

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T16:30:25.230

虽然从客户端和服务器的角度来看，UDP 是无连接的，但从 NAT/路由器的角度来看，存在一个为双向通信而维护的连接。服务器只需要回复它收到消息的 IP/端口即可到达客户端。

python 文档有一个很好的例子：[http ://docs.python.org/2/library/socketserver.html#socketserver-udpserver-example](http://docs.python.org/2/library/socketserver.html#socketserver-udpserver-example)

基本上它只需要请求地址并使用 sendto 功能

```
socket.sendto("test", self.client_address) 
```

# php - 如何在多维数组中插入新的键和值？

> ID：16087572
> 
> 赞同：11
> 
> 时间：2013-04-18T15:51:01.620
> 
> 标签：php, arrays, multidimensional-array, associative-array

以下是我的多维数组的输出`$csmap_data`

```
Array
(
    [0] => Array
        (
            [cs_map_id] => 84
            [cs_subject_id] => 1
        )

    [1] => Array
        (
            [cs_map_id] => 85
            [cs_subject_id] => 5
        )

    [flag] => 1
) 
```

最初数组中没有`[flag] => 1`键值，我将它添加到数组`$csmap_data`中。但是我想`[flag] => 1`在上面的两个数组元素中添加，而不是作为单独的数组元素。简而言之，我想要以下输出：

```
Array
    (
        [0] => Array
            (
                [cs_map_id] => 84
                [cs_subject_id] => 1
                [flag] => 1
            )

        [1] => Array
            (
                [cs_map_id] => 85
                [cs_subject_id] => 5
                [flag] => 1
            )
       ) 
```

我试图实现这一点的代码如下，但无法获得所需的输出：

```
if (!empty($csmap_data)) {  
                    foreach($csmap_data as $csm) {
                        $chapter_csmap_details = $objClassSubjects->IsClassSubjectHasChapters($csm['cs_map_id']);

                            $csmap_data ['flag'] = 1;

                    }
            } 
```

任何人都可以帮助我获得我所描绘的所需输出吗？提前致谢。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-04-18T15:53:53.843

```
<?
 foreach($csmap_data as $key => $csm)
 {
  $csmap_data[$key]['flag'] = 1;
 } 
```

这应该够了吧。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2017-02-23T13:51:44.287

您也可以使用 php 数组函数

```
$csmap_data = array_map(function($arr){
    return $arr + ['flag' => 1];
}, $csmap_data); 
```

更新：要在函数的回调函数中使用多个变量，`array_map`我们可以通过`use`

```
$flagValue = 1;
$csmap_data = array_map(function($arr) use ($flagValue){
    return $arr + ['flag' => $flagValue];
}, $csmap_data); 
```

# python - 使用循环创建变量python 3

> ID：16087573
> 
> 赞同：0
> 
> 时间：2013-04-18T15:51:03.097
> 
> 标签：python, class, loops, attributes, iteration

简介：我正在使用 tkinter 模块创建两个窗口，每个窗口都作为单独的类。我想获取在第一个窗口中输入的整数，并使用它在第二个窗口中创建该数量的标签和条目。

IE

```
import tkinter

class FirstWindow:
    def __init__(self):
        self.firstMaster = tkinter.Tk()
        self.topFrame = tkinter.Frame(self.numberMaster)
        ...
        self.numEntry = tkinter.Entry(self.topFrame, width=10)
        ...
        self.averageButton = tkinter.Button(self.bottomFrame, text='next', command=self.nextstep)
        ...
        ...
        tkinter.mainloop()

    def nextStep(self):
        self.numberItems = int(self.numEntry.get())
        self.average = AveragerGUI(self.numberTests)

class AveragerGUI:
    def __init__(self, numTests):
        self.secondMaster = tkinter.Tk()
        self.topFrame = tkinter.Frame(self.secondMaster)

        for number in range(1, numTests):
            self.frame'number' = tkinter.Frame(self.secondMaster) 
```

我知道这行不通；我包含它只是为了说明我想要做什么：根据 numTests 参数创建许多帧。

我想过使用列表，但这是一个问题，因为我不知道如何将字符串转换为变量的名称：

```
varList = []
for number in range(1, numberTests):
    label = str(number)
    var = 'Frame' + label
    varList.append(var) 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T15:53:35.480

如果使用列表，则无需生成名称：

```
self.frames = []
for number in range(numTests):
    self.frames.append(tkinter.Frame(self.secondMaster)) 
```

您可以通过使用列表推导来简化它：

```
self.frames = [tkinter.Frame(self.secondMaster) for _ in in range(numTests)] 
```

现在您可以按索引访问每一帧：

```
self.frames[0]
self.frames[1] 
```

或遍历它们：

```
for frame in self.frames:
    # do something with frame 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T16:03:37.787

虽然我同意@Martijn Pieters，但如果你真的想在循环中命名变量，我发现最简单的方法是使用内置`exec`函数。

例如，如果我想让 x0、x1、x2、x3 等于列表的前 4 项，我会执行以下操作：

```
>>>the_list = [1, 3.4, 'g', sum]

>>> for i in range(len(the_list)):
...    exec('x%i = the_list[%i]' % (i, i))

>>> print(x0)
1 
>>> print(x1)
3.4
>>> print(x2)
g
>>> print(x3)
<built-in function sum> 
```

# angularjs - AngularJS 定义中的命名冲突

> ID：16087576
> 
> 赞同：6
> 
> 时间：2013-04-18T15:51:09.907
> 
> 标签：angularjs, angularjs-directive

我目前正在尝试以一种能够适当扩展到企业级别的方式来组织我的 Angular 应用程序。但是我发现似乎过度依赖框架内的命名约定，并且试图避免命名冲突是一个真正的问题。

例如，在定义任何`constants`/ `controllers`/ `directives`/ `factories`/ `filters`/ `providers`/`services`时，会提供一个名称以在依赖注入期间隐式使用。

只需几个定义就可以很好地工作。然而，当可能有数百个（可能数千个）这些定义时，尝试管理和防止重复似乎有点维护噩梦！

另一个问题是指令的命名。由于似乎没有办法将任何上下文应用于指令，因此不可能有如下内容（即重用名称“按钮”）：

```
<toolbar>
  <button></button>
</toolbar>

<customform>
  <button></button>
</customform> 
```

因此，我们再次依赖于冗长的命名约定。如果您包含推荐的供应商前缀，您最终会得到如下内容：

```
<company:toolbar>
  <company:toolbar-button></company:toolbar-button>
</company:toolbar>

<company:customform>
  <company:customform-button></company:customform-button>
</company:customform> 
```

我承认这并不可怕，但它强调了对命名约定的依赖如何很容易导致冲突。

**Angular 路线图上有什么可以解决命名空间问题的吗？当前（1.0.6）推荐的解决方案是什么？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T22:19:10.087

我认为现在没有解决方案。当您的应用程序变得更大时，或者当您必须包含在开发时可能不知道的任意模块时，这绝对是一个问题。[我建议使用angular project](https://github.com/angular/angular.js)为此提交问题。

# html - 圆形/甜甜圈形状，切块

> ID：16087578
> 
> 赞同：0
> 
> 时间：2013-04-18T15:51:13.850
> 
> 标签：html, css, pseudo-element, css-shapes

如何使用纯 CSS 或画布制作如下图所示的图像？我需要它有一个透明的背景；你能帮我吗？

![图片](https://i.stack.imgur.com/MllmM.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-01-06T14:18:04.053

像这样的东西会为你做（在可能一些修补之后）：

```
html,body{background:black;}

.nut{
  height:200px;
  width:200px;
  border-radius:50%;
  position:relative;
  background-color:lightblue;
  }

.nut:before{
  position:absolute;
  content:"";
  height:40%;
  width:40%;
  background-color:black;
  left:30%;
  top:30%;
  border-radius:50%;
  }
.nut:after{
 position:absolute;
  content:"";
  height:40%;
  width:40%;
  background-color:lightblue;
  right:-5%;
  bottom:-5%;
  border-radius: 0 0 100% 0;
  border-left:5px solid black;
  border-top:5px solid black;
}
```

```
<div class="nut"></div>
```

* * *

在允许透明背景方面，您可以使用以下内容来说明这一点：

```
div {
  border-radius: 50%;
  height: 50px;
  width: 50px;
  border: 50px solid blue;
  position: relative;
  border-bottom-color: transparent;
  transform: rotate(-45deg);
  margin: 20px auto;
}
div:after {
  content: "";
  position: absolute;
  top: -50px;
  left: -50px;
  height: 100%;
  width: 100%;
  border-radius: 50%;
  border: 50px solid transparent;
  border-bottom-color: blue;
  transition: all 0.6s;
}
div:before {
  content: "";
  position: absolute;
  top: -10px;
  left: -10px;
  height: 100%;
  width: 100%;
  border: 10px solid blue;
  border-radius: 50%;
}
div:hover:after {
  top: -30px;
  left: -50px;
  border-bottom-color: tomato;
}
/*DEMO ONLY*/

html {
  text-align: center;
  height: 100%;
  background: radial-gradient(ellipse at center, rgba(79, 79, 79, 1) 0%, rgba(34, 34, 34, 1) 100%);
}
```

```
HOVER ME
<div></div>
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-06T09:19:59.400

## SVG

这是一个 svg 解决方案。
在圆形元素上使用剪辑路径（以排除图像的一角）
然后使用弧形路径元素制作披萨切片。

```
<svg width="100px" height="100px" viewbox="0 0 110 110">
  <defs>
    <clipPath id="myClip">
      <path clip-rule="evenodd" 
            d="M0 0 100 0  100 100 0 100Z 
               M67 67 100 67 100 100 67 100Z"/>
    </clipPath>
  </defs>
  <circle fill="none" stroke="LightBlue" stroke-width="25" cx="50" cy="50" r="35"  clip-path="url(#myClip)"/>
  <path fill="LightBlue" d="M70 70 70 100 A 25 25 0 0 0 100 70Z"/>
</svg>
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-11T01:15:06.003

基本上，最多只有 3 个 div 和一点 CSS，而且可能有点烦躁，它可能只需要一个 div 和一些 CSS。

蓝色甜甜圈只是一个带有粗蓝色边框的 div，并且设置了border-radius CSS 属性以使圆角形成一个圆形。

披萨片实际上只是一个简单的方形 div，带有蓝色背景和厚实的白色边框。

这两个元素将位于第三个 div 中，该 div 也使用边界半径使其成为圆形，但要么将边框颜色设置为透明，要么实际上根本没有边框，但无论哪种方式都是圆形的。这个外部的第三个 div 也将溢出属性设置为隐藏，从而给出披萨切片的圆形部分，因为该正方形将被外圆剪裁

披萨切片可以是甜甜圈的子元素，并且它的位置属性设置为相对，或者它也可能是外部剪切 div 的子元素，作为绝对位置，在后一种情况下，外部剪切 div 将具有位置属性设置为相对。

现在这将是您使用三个 div 的方式，但正如我之前提到的，如果使用 CSS 伪 ::before 和 ::after 类来伪造，它可能会有点烦躁地归结为一个 div其中两个 div ，可能是甜甜圈和比萨饼片，它们会留下但剪裁 div 作为页面中唯一真正的元素。

那将是最巧妙的，因为最终您会标记类似...

```
 <div class="logo"/> 
```

...仅此而已

好吧，见鬼，把它称为五月的圣诞节

```
<style  type="text/css">
.logo       ,.logo::before  {border-radius  :50%;display:inline-block;padding:0;}
.logo::before   ,.logo::after   {position   :absolute;content:"";}
.logo       {   text-align:center;position:relative;border:none;
        width:11em;height:11em;overflow:hidden;}
.logo::before   {   left:.75em;top:.75em;width:3.5em;height:3.5em;
        margin:0;border:3em solid #00A6E1;}
.logo::after    {   border:.4em solid #fff;top:6.8em;
        left:6.8em;width:5em;height:5em;
        background-color:#0ae;display:block;}
</style> 
```

```
.logo,
    .logo::before {
      border-radius: 50%;
      display: inline-block;
      padding: 0;
    }
    .logo::before,
    .logo::after {
      position: absolute;
      content: "";
    }
    .logo {
      text-align: center;
      position: relative;
      border: none;
      width: 11em;
      height: 11em;
      overflow: hidden;
    }
    .logo::before {
      left: .75em;
      top: .75em;
      width: 3.5em;
      height: 3.5em;
      margin: 0;
      border: 3em solid #00A6E1;
    }
    .logo::after {
      border: .4em solid #fff;
      top: 6.8em;
      left: 6.8em;
      width: 5em;
      height: 5em;
      background-color: #0ae;
      display: block;
    }
```

```
<div class="logo" />
```

这使你的标志成为你的后盾，当然只使用一个 div，普通的旧 CSS，没有图像或其他拍手陷阱。我实际上是一名程序员，但对我来说 CSS 只是另一种编程语言，每个人都想拿出画布 SVG 之类的东西，我认为值得展示一下 9 行文本如何将它们发送到木棚. :)

似乎在 Chrome/webkit 和 Mozilla 上都可以正常工作，当我启动到 Linux 桌面并且近十年没有 M$ 机器时，我无法真正说出 Microsoft 爆炸器将如何处理它。

*注意*我的习惯已经在与伪元素相关的新规范中采用了一些细节，因为传统上的语法是 .logo:before 和 .logo:after，但新规则说我应该使用双“::”代替旧的“：”，所以如果 M$ 爆炸器抱怨，人们可能会尝试将“：：”换成 IE 可能更喜欢的旧的“：”。较新的浏览器真的不在乎。

# wcf - 如何停止 d4p1 在我的 WCF 服务 SOAP 请求 XML 中成为必需的命名空间前缀

> ID：16087586
> 
> 赞同：5
> 
> 时间：2013-04-18T15:51:26.397
> 
> 标签：wcf, soap, xml-namespaces, datacontractserializer, xmlserializer

我已经构建了我的第一个 WCF 服务，旨在接收 HTTP Post 请求，这些请求具有严格格式的消息正文，我无法影响。这是一个例子：

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
  <s:Body>
    <AcquirePackagingData xmlns="mydomain.com">
      <Account xmlns="http://schemas.microsoft.com/v1.0">
        <AssetIdentifier>ergegdgsdyeryegd</AssetIdentifier>
      </Account>
    </AcquirePackagingData>
  </s:Body>
</s:Envelope> 
```

每次请求都会改变的唯一位是 AssetIdentifier 的值。

我的wcf服务合同如下：

为了最大限度地控制 XML，我选择使用 XmlSerializer 而不是 DataContractSerializer，方法是使用 [XmlSerializerFormat] 。

Account 类非常简单： [XmlRoot(Namespace = " [http://schemas.microsoft.com/v1.0](http://schemas.microsoft.com/v1.0) ")] [Serializable] public class Account {

```
 private string m_AssetIdentifier;

    [XmlElement]
    public string AssetIdentifier
    {
        get { return m_AssetIdentifier; }
        set { m_AssetIdentifier = value; }
    } 

} 
```

当我向此服务发出请求时，就会出现问题。当我使用 WCF 测试客户端时，我可以看到它发出了以下请求：

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
  <s:Header>
    <Action s:mustUnderstand="1" xmlns="http://schemas.microsoft.com/ws/2005/05/addressing/none">http://schemas.microsoft.com/DRM/2007/03/protocols/ILGIContentProtection/AcquirePackagingData</Action>
  </s:Header>
  <s:Body>
    <AcquirePackagingData xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://schemas.microsoft.com/DRM/2007/03/protocols">
      <challenge xmlns:d4p1="http://schemas.microsoft.com/DRM/2007/03/protocols/AcquirePackagingData/v1.0">
        <d4p1:AssetIdentifier>ergegdgsdyeryegd</d4p1:AssetIdentifier>
      </challenge>
    </AcquirePackagingData>
  </s:Body>
</s:Envelope> 
```

请注意已引入的 d4p1 命名空间别名的存在。如果我使用不包含这些别名的请求 XML 请求服务，则请求将失败，AcquirePackagingData 方法接收到的 Account 对象上出现空指针。

我最初尝试使用 DataContractSerializer 但遇到了同样的问题。我希望使用 XMLSerializer 得到不同的结果。我在这个论坛的其他地方读到，也许我可以使用以下方法，但没有任何区别：

```
[System.SerializableAttribute()]
[System.Xml.Serialization.XmlTypeAttribute(AnonymousType = true, Namespace = "http://schemas.microsoft.com/v1.0")]
[System.Xml.Serialization.XmlRootAttribute(Namespace = "http://schemas.microsoft.com/v1.0", IsNullable = false)] 
public class Account
{
....
} 
```

请任何人都可以让我知道如何修改我的服务，以便请求 XML 包含名称空间但不包含那些讨厌的 d4p1 别名？

谢谢

# ios - 如何让 UITableViewCell 在应用程序测试中正确初始化？

> ID：16087587
> 
> 赞同：1
> 
> 时间：2013-04-18T15:51:28.380
> 
> 标签：ios, objective-c, unit-testing, testing, integration-testing

我有一个和`UIViewController`一个。该数组将成为 UITableView 的数据源。我正在尝试为此视图控制器创建测试并且遇到了困难。设置断点并单步执行，属性为. 我确实打电话，在。这是我的代码和要遵循的解释：`UITableView``NSMutableArray``UITableView``null``viewDidLoad``viewWillAppear``setUp`

```
@implementation IouViewControllerTests

- (void)setUp {
    self.iouViewController = [[IouViewController alloc] init];

    Person *person = [[Person alloc] initWithName:@"Oky" oweItems:[NSMutableArray array]];
    Iou *iouOne = [[Iou alloc] initWithType:@"lend" amount:[NSDecimalNumber one] note:@"1st iou"];
    Iou *iouTwo = [[Iou alloc] initWithType:@"lend" amount:[NSDecimalNumber one] note:@"2nd iou"];
    [person.iouList addObject:iouOne];
    [person.iouList addObject:iouTwo];

    NSMutableArray *persons = [NSMutableArray array];
    [persons addObject:person];
    self.iouViewController.iouTableArray = persons;

    [self.iouViewController viewDidLoad];
    [self.iouViewController viewWillAppear:YES];
    [self.iouViewController.iouTableView setDelegate:self];
}

- (void)tearDown {
    self.iouViewController = nil;
}

-(void)testViewDidLoad {
    STAssertNotNil(self.iouViewController.view, @"iouViewController view should not be nil");
}

- (void)testCustomCell {
    NSIndexPath *indexPath = [NSIndexPath indexPathForRow:0 inSection:0];
    CustomCell *cell = (CustomCell *)[self.iouViewController.iouTableView cellForRowAtIndexPath:indexPath];
    STAssertEqualObjects(cell.personName, @"Oky", @"cell name should be right");
} 
```

1.  分配并初始化视图控制器。它使用 NIB 文件，但该实现隐藏在`-init`.
2.  创建人员对象并将 2 IOU 对象添加到该人员。
3.  我将该人添加到`iouTableArray`作为`UITableView`. 获取一`UITableView`组人员并将它们显示在视图中。
4.  Calls`viewDidLoad`等并设置`delegate`（正确？）
5.  通话`testViewDidLoad`通行证
6.  打电话`testCustomCell`。创建一个`NSIndex`将从`UITableView`. `CustomCell`子类 the并且`UITableViewCell`具有属性`personName`as a `UILabel`。

回顾代码，我应该调用`cell.personName.text`来获取名称字符串。但是，我得到的错误`cell.personName`是`null`. 逐步浏览，我看到`iouTableView = (UITableView *) 0x00000000`我认为意味着 null 的内容。

我能做些什么来测试我的细胞`UITableView`并让它发挥作用？

PS：我做了一些阅读，有很多关于模拟对象的材料。它们看起来很复杂，但如果必须，我会学习它。是否有 Apple 推荐的方式来做我想做的事？

谢谢。

# php - Mysql加入没有重复（理论）？

> ID：16087589
> 
> 赞同：-1
> 
> 时间：2013-04-18T15:51:29.213
> 
> 标签：php, mysql, azure, pdo

好的，在我开始之前，很高兴提到我已经在 stackoverflow 和互联网上阅读（并尝试过）无数主题，但对于这个简单的问题似乎没有直接的答案。

所以情况如下：

**table1** (id, name)
1,name1
2,name2
3,name3

**table2** (id, id_table1, field_name)
1,1,field1
2,1,field2

我想要做的只是在第二个表中有任何与 id_table1 匹配的记录时显示第一个表 id 和它的字段“名称”。我尝试了加入、组、内部加入、左加入，但似乎没有什么能解决我的问题....

预期输出：
id：1 - name：name1

最后尝试的代码：
SELECT * FROM table1 LEFT JOIN table2 ON table1.id = table2.id_table1 GROUP BY table1.id

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T15:56:18.633

怎么样 select t.* from table1 t where t.id in (select id_table1 from table2)

?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T16:08:43.090

这应该可以解决您的问题。

```
select table1.id, table1.name from table1 
inner join table2 on table1.id = table2.id_table1
group by table1.id 
```

# c++ - 如何确保至少有一个类的实例？

> ID：16087594
> 
> 赞同：2
> 
> 时间：2013-04-18T15:51:46.337
> 
> 标签：c++, static, singleton

我需要确保在程序执行期间始终存在某个类的至少一个实例。单身人士不会这样做，因为（除其他原因外）我将来可能*需要*更多实例。一个静态类也可以，但这感觉就像走向全球......我还想要一些私有成员，包括函数和变量。

我想过将 shared_ptr 保存在安全的地方，但这似乎是一个粗略的黑客攻击。

有没有标准的方法来做到这一点？

**编辑**

澄清一下：这不是能够检查实例是否仍然存在的问题。实例*必须*始终存在。原因是类中有静态成员变量，应该保持它们的状态。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T15:54:40.827

我总是使用内部静态计数器来实现这一点，该计数器在构造函数中递增并在析构函数中递减。

是的，绝对你检查“至少一个实例”的方法应该是静态的。

更新：好的，我在这里看到答案中的错误，所以我发布了我的答案：

```
class Test
{
private:
  static int m_count;
public:
  Test() { ++m_count; }
  Test(const Test&) { ++m_count; }

  ~Test()
  {
    --m_count;
  }

  static bool hasInstance()
  {
    return (m_count > 0);
  }
};

int Test::m_count = 0;

int main()
{
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T15:55:32.720

使用静态成员并将其设置在构造函数/析构函数中：

```
class Test
{
  static int i;
public:
  Test()
  {
    i++;
  }

  Test(const Test &t) // It's suspicious 
  {
    i++;
  }

  ~Test()
  {
      i--;
  }

  static bool hasInstance()
  {
    return i>0;
  }
};

static int Test::i = 0; 
```

然后，您知道是否`Test`有任何实例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T16:01:00.867

一种包含所有实例集合的工厂类怎么样？

就像是：

```
template<typename T>
class least_one_factory
{
    static std::vector<T> instances_;

public:
    least_one_factory()
    {
        // Make sure there is an instance of `T` in our collection
        instance_.push_back(T());
    }

    T& get()
    {
        return instances_.front();
    }

    T& get(int n)
    {
        return instances_.at(n);
    }

    T& create()
    {
        instances_.push_back(T());
        return instances_.back();
    }

    int count() const
    {
        return instances_.size();
    }

    operator T&()
    {
        return get();
    }
};

template<typename T>
std::vector<T> least_one_factory<T>::instances_; 
```

现在你可以这样做：

```
struct some_class {};

least_one_factory<some_class> some_class_factory; 
```

该变量`some_class_factory`将包含*至少*一个`some_class`. 你可以得到它`some_class_factory.get()`。如果`some_class_factory`是全局变量，则在调用`some_class`之前加载程序时将创建的实例`main`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-18T16:34:37.087

> 我需要确保在程序执行期间始终存在某个类的至少一个实例。

所以我想解决方案从决定谁负责存储它开始。

您可以：将其存储在类内部（静态）或将其返回给调用者/客户端上下文（并依赖客户端上下文来保留它）。由于您说“单身人士不会做”，因此解决方案应如下所示：

```
class TheClass
{
public:
    // this doesn't have to be a std::shared_ptr<WithContext>
    // and probably shouldn't be (see below)
    typedef <implementation-defined> GlobalContext;

    GlobalContext InitContext(); // return instance
};

void main( /* ... */ )
{
    // do this before any code that uses TheClass instances
    auto global_execution_context = TheClass::InitContext();

    // rest of your application code goes here
} 
```

> 我想过将 shared_ptr 保存在安全的地方，但这似乎是一个粗略的黑客攻击。

你认为它的缺点是什么？如果是因为它是一个模糊的依赖项，您可以为其添加测试，或者在上下文被删除/影响/不存在时抛出异常。您还可以在 TheClass 的构造函数中请求对您的上下文的引用。

您不应该让 GlobalContext 成为 std::shared_ptr 但它是自己的类型的原因是，这就是您的要求实际相当于：

您需要一种（新）类型的对象来保持实例之间的 TheClass 的共同状态。

# jquery - Datatables Tabletools Ajax按钮，如何发送所有行

> ID：16087596
> 
> 赞同：0
> 
> 时间：2013-04-18T15:51:47.063
> 
> 标签：jquery, datatables, tabletools

我需要从特定数据表创建自定义 PDF 打印输出。

我认为使用[Ajax 按钮](http://datatables.net/extras/tabletools/buttons)我可以做到这一点，但它只从第一页发送表格中的信息，在本例中为 20 行。

我知道我可以让表格在屏幕上显示“所有记录”，然后单击按钮，但我不太喜欢这样，因为所有数据都将在屏幕上可用（数千行）。

有没有其他方法可以发送所有数据？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-19T14:34:10.400

我没有找到任何使用 Ajax 按钮的方法，但找到了另一种方法。我用过：

```
 "oTableTools": {
                "sSwfPath": "<?=LOC_JQUERY?>swf/copy_csv_xls_pdf.swf?<?=rand()?>",
                "aButtons": [
                    {
                        "sExtends": "download",
                        "sButtonText": "Listagens PDF",
                        "sUrl": "<?=CAMINHO?>_exporta.php",
                        "sAction": "text",
                        "sTag": "default",
                        "sFieldBoundary": "",
                        "sFieldSeperator": "\t",
                        "sNewLine": "<br>",
                        "sToolTip": "Listagens",
                        "sButtonClass": "DTTT_button_text",
                        "sButtonClassHover": "DTTT_button_text_hover",
                        "mColumns": "all",
                        "bHeader": true,
                        "bFooter": true,
                        "sDiv": "",
                        "fnMouseover": null,
                        "fnMouseout": null,
                        "fnClick": function( nButton, oConfig ) {
                            var oParams = this.s.dt.oApi._fnAjaxParameters( this.s.dt );
                            var aoPost = [

                                { "name": "cobranca", "value": $("select#cobranca option:selected").val() },
                                { "name": "activo", "value": $("select#activo option:selected").val() },
                                { "name": "id_empresa", "value": $("select#id_empresa option:selected").val() },

                                { "name": "socio_numero", "value": $("#socio_numero").val() },
                                { "name": "socio_nome", "value": $("#socio_nome").val() },
                                { "name": "data1", "value": $("#data1").val() },
                                { "name": "data2", "value": $("#data2").val() },
                                { "name": "idade1", "value": $("#idade1").val() },
                                { "name": "idade2", "value": $("#idade2").val() },
                                { "name": "empresa_profissao", "value": $("#empresa_profissao").val() },

                            ];
                            var aoGet = [];

                            /* Create an IFrame to do the request */
                            nIFrame = document.createElement('iframe');
                            nIFrame.setAttribute( 'id', 'RemotingIFrame' );
                            nIFrame.style.border='0px';
                            nIFrame.style.width='0px';
                            nIFrame.style.height='0px';

                            document.body.appendChild( nIFrame );
                            var nContentWindow = nIFrame.contentWindow;
                            nContentWindow.document.open();
                            nContentWindow.document.close();

                            var nForm = nContentWindow.document.createElement( 'form' );
                            nForm.setAttribute( 'method', 'post' );

                            /* Add POST data */
                            for ( var i=0 ; i<aoPost.length ; i++ )
                            {
                                nInput = nContentWindow.document.createElement( 'input' );
                                nInput.setAttribute( 'name', aoPost[i].name );
                                nInput.setAttribute( 'type', 'text' );
                                nInput.value = aoPost[i].value;

                                nForm.appendChild( nInput );
                            }

                            /* Add GET data to the URL */
                            var sUrlAddition = '';
                            for ( var i=0 ; i<aoGet.length ; i++ )
                            {
                                sUrlAddition += aoGet[i].name+'='+aoGet[i].value+'&';
                            }

                            nForm.setAttribute( 'action', oConfig.sUrl );

                            /* Add the form and the iframe */
                            nContentWindow.document.body.appendChild( nForm );

                            /* Send the request */
                            nForm.submit();
                        },
                        "fnSelect": null,
                        "fnComplete": null,
                        "fnInit": null

                    },                  
                ]
            } 
```

希望这也对有需要的人有所帮助。

# php - 我需要帮助在 mysql php 中使用 LIKE，总是返回 false

> ID：16087599
> 
> 赞同：1
> 
> 时间：2013-04-18T15:51:53.957
> 
> 标签：php, mysql

我有一个 php 页面，它应该在 mysql 表的列中搜索发送给它的字符串。代码是：

```
$search=$_POST['search'];
$search_result= mysql_query('SELECT * FROM my table WHERE title LIKE '.$search.'%'); 
```

连接正常，但它一直返回 false ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T15:55:33.307

您的查询很糟糕，它看起来像这样：

```
SELECT * FROM my table WHERE title LIKE foo% 
```

什么时候应该看起来像：

```
SELECT * FROM my table WHERE title LIKE 'foo%' 
```

因此，将行更改为：

```
$search_result= mysql_query("SELECT * FROM my table WHERE title LIKE '". $search ."%'"); 
```

或者简单地说：

```
$search_result= mysql_query("SELECT * FROM my table WHERE title LIKE '$search%'"); 
```

而且，与往常一样，您的脚本容易受到 SQL 注入的影响，`mysql_*`函数已被弃用，请改用 PDO 或 MySQLi，等等，等等，这是 PHP 标记的奴才通常的歌舞。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T15:54:21.777

尝试使用双 '%'：

```
$search_result= mysql_query("SELECT * FROM my table WHERE title LIKE '%" . $search. "%'"); 
```

也必须是`LIKE '%criteria%'`您的实际查询是`LIKE %criteria%`（无引号）

# php - Crontab 不会使用 PHP 从 FTP 服务器下载文件

> ID：16087600
> 
> 赞同：1
> 
> 时间：2013-04-18T15:51:55.310
> 
> 标签：php, ftp, crontab

我编写了一个 PHP 脚本来登录 FTP 服务器，下载一个包含抑制数据的 csv 文件，并将其与我们当前的抑制列表文件合并。

当我从命令行运行它时，它工作得很好。当我将它设置为每天在 crontab 中运行一次时，它总是说它无法从 FTP 服务器下载文件，然后退出。我已经为脚本正在写入文件的目录提供了 777，所以我无法想象这将是一个权限问题。

其他人遇到过这个问题吗？我缺少一些简单的东西吗？下面是我的 crontab 行和我的脚本代码，如果这有助于给出答案。谢谢！

crontab 条目：

`0 8 * * * php /var/www/scripts/ftp-unsubs.php >> /var/www/scripts/logs/ftp-unsubs.log`

PHP 脚本：

```
<?
// get latest suppression file and append to our global suppression file (loader.txt)

$yesterday = date("Y-m-d", strtotime("yesterday"));
$ftp_server = '--hidden--';
$ftp_user_name = '--hidden--';
$ftp_user_pass = '--hidden--';
$local_file = 'unsub_dls/unsubs.' . $yesterday . '.csv';
$remote_file = 'FJM378_unsubs.' . $yesterday . '.csv';

// set up basic connection
$conn_id = ftp_connect($ftp_server);

// login with username and password
$login_result = ftp_login($conn_id, $ftp_user_name, $ftp_user_pass);

ftp_pasv($conn_id, TRUE);

print "\n[" . date("r") . "]\n";

if ((!$conn_id) || (!$login_result)) {
    echo "FTP connection has failed!\n";
    echo "Attempted to connect to $ftp_server for user $ftp_user_name\n";
    exit;
} else {
    echo "Connected to $ftp_server, for user $ftp_user_name\n";
}

// try to download $remote_file and save to $local_file

if (ftp_get($conn_id, $local_file, $remote_file, FTP_BINARY)) {
  echo "Successfully written to $local_file\n";
} else {
  echo "Couldn't get file $remote_file\n";
}

// close the FTP stream
if (ftp_close($conn_id)) {
  print "Closed the connection to $ftp_server\n";
}

// grab new unsubs and add timestamp
print "\nProcessing file $local_file\n";

if (file_exists($local_file)) {

  $fh = fopen($local_file, 'r');

  $i = 0;
  $unsub = "";
  while (!feof($fh)) {
    $line = fgets($fh);
    $line = preg_replace('/(?:(?:\r\n|\r|\n)\s*){2}/s', "", $line);
    if ($line != "" && $line != "email") {
      $unsub .= $line . "," . date("Y-m-d H:i:s") . "\n";
      $i++;
    }
  }

  fclose($fh);

  // add unsubs to global unsub file
  $fsupp = fopen('loader.txt','a');
  fwrite($fsupp, $unsub);
  fclose($fsupp);

  print "Added $i unsubs to loader.txt\n\n";

} else {
  print "Error: file '$local_file' doesn't exist! Bailing.\n\n";
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T16:08:48.810

尝试将运行此任务的用户名添加到您的 crontab 条目中，如下所示：

0 8 * * ***根**php /var/www/scripts/ftp-unsubs.php >> /var/www/scripts/logs/ftp-unsubs.log

# php - 用 PHP 实现一个简单的查找表

> ID：16087601
> 
> 赞同：4
> 
> 时间：2013-04-18T15:51:56.060
> 
> 标签：php

我经常发现自己需要一个简单的 PHP 查找表，而我不想费心使用数据库。

例如，我可能有：

```
1 stands for "Good"
2 stands for "Bad"
3 stands for "Ugly" 
```

它可以实现的两种方式如下所示。一个比另一个更有效吗？还有其他更直观的方法来实现这一点吗？

```
switch($code)
{
    case 1:$result="Good";break;
    case 2:$result="Bad";break;
    case 3:$result="Ugly";break;
    default:$result=NULL;
}

$array=array(1=>"Good",2=>"Bad",3=>"Ugly");
$result=$array[$code]; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T15:57:13.993

这取决于您将如何处理您的查找。

*   如果只是查找键-> 值对-数组是一种方法
*   如果您想根据键执行不同的操作 - 这实际上是[策略模式](http://en.wikipedia.org/wiki/Strategy_pattern)的一个很好的用例- 根本没有`case`或`array`那样。

因此，`case`在大多数情况下，选项较差，因为它的可扩展性较差并且无法在运行时更改。

要模拟这种`default`情况，请使用类似

```
$result = in_array($key, $lookup) ? $lookup[$key] : $default; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T16:01:49.157

第二个例子。主要原因是在新条目中编写的代码更少，但它的代码也更灵活，并且*可能*会*稍微*快一些。但是要从 break 语句中实现这种`default`情况，“查找”行/函数应该如下所示：

```
$result = (isset($array[$code]) ? $array[$code] : NULL; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-10-19T17:38:08.947

显然你可以用更简单的语法来做到这一点：

```
$result=[1=>"Good",2=>"Bad",3=>"Ugly"][$code]; 
```

使用第一对 [] 初始化数组，使用第二对访问特定值

我不知道这是哪个版本的php我最近在一个随机教程中遇到了这个结构，如果我遇到更多细节会更新答案

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T15:58:28.983

绝对是后者，特别是如果您有大量数据...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-07-23T12:25:13.960

我建议在 switch 块上使用查找数组，很少有例外。坦率地说，我对 switch 块有偏见，因为如果它们是用适当的编码标准编写的，它们会使脚本变得非常臃肿。或者，你可以对抗所有这些`case`和`break`表达式产生的膨胀，但你会得到一个可怕的密集脚本。

不，我强烈建议使用查找数组。它将数据资产与处理完美地分开。这会产生干净、可读、可维护的代码。此外，随着应用程序的发展/成熟，如果需要，您可以轻松地将数据集合移植到数据库表中。

关于效率，使用`isset()`或`array_key_exists()`（取决于要求）的查找技术非常快，因为 php 可以引用键。

`in_array()`每次使用基于键的查找都会表现出色。

这是上下文的片段...

代码：（[演示](https://3v4l.org/9NL6n)）

```
$lookup = [
    null,
    "Good",
    "Bad",
    "Ugly"
];

foreach (range(0, 5) as $test) {
    echo $test , ' : ' , ($lookup[$test] ?? $lookup[0]) , "\n";
} 
```

输出：

```
0 :         // null
1 : Good
2 : Bad
3 : Ugly
4 :         // null 
5 :         // null 
```

当然，您可以写出查找数组中的键以提高人类可读性。

假设您的 php 版本允许，为了简洁起见，我建议使用[空合并运算符](https://www.tutorialspoint.com/php7/php7_coalescing_operator)。

# ruby-on-rails - 如何使用独角兽和 Nginx 处理 Rails 中的子域

> ID：16087607
> 
> 赞同：1
> 
> 时间：2013-04-18T15:52:12.597
> 
> 标签：ruby-on-rails, ruby-on-rails-3, unicode, nginx, ruby-on-rails-3.2

[我在多租户](http://railscasts.com/episodes/388-multitenancy-with-scopes)上关注了一个简单的 railscasts 插曲， 现在我的应用程序中的所有租户都进入了他们的子域，该子域在我的开发系统上本地工作，但是当我在我的 vps 系统上尝试相同的过程时，浏览器说找不到服务器。

我已将域连接到我的 ip 并修改了我的 nginx 文件，但仍然没有希望

一旦用户进入他的子域，请求就不会到达我的 rails 应用程序。

对此有任何想法，否则我可能做错了。谢谢

我的 nginx_unicorn_file

```
upstream unicorn {
  server unix:/tmp/unicorn.<%= application %>.sock fail_timeout=0;
}

server {
  listen 80 default deferred;
  server_name shopnany.com *.shopnany.com;
  root <%= current_path %>/public;

  location ^~ /assets/ {
    gzip_static on;
    expires max;
    add_header Cache-Control public;
  }

  try_files $uri/index.html $uri @unicorn;
  location @unicorn {
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header Host $http_host;
    proxy_redirect off;
    proxy_pass http://unicorn;
  }

  error_page 500 502 503 504 /500.html;
  client_max_body_size 4G;
  keepalive_timeout 10;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-08T16:09:48.967

I had no problem doing this. First you need to create an A record in any DNS provider that you are using. for example create a DNS record:

it.shopnany.com

Then you'll have to update your nginx config template for this particular deployment. It can be as follows:

```
upstream unicorn_<%= application %> {
  server unix:/tmp/unicorn.<%= application %>.sock fail_timeout=0;
}

server {
  listen 80;
  server_name it.shopnany.com;
  root <%= current_path %>/public;

  location ~ ^/assets/ {
    gzip_static on;
    expires max;
    add_header Cache-Control public;
  }

  try_files $uri/index.html $uri @unicorn;
  location @unicorn {
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header Host $http_host;
    proxy_redirect off;
    proxy_pass http://unicorn_<%= application %>;
  }

  error_page 500 502 503 504 /500.html;
  client_max_body_size 4G;
  keepalive_timeout 10;
} 
```

This worked for me. Now I have two different applications running on my www and it subdomains.

# sql - NOT IN 和 equals 与 IN 和 not equals 的区别

> ID：16087608
> 
> 赞同：2
> 
> 时间：2013-04-18T15:52:19.117
> 
> 标签：sql, sql-server

我的查询需要返回管道速率不是“无使用”的所有使用记录。

[NOT EXISTS vs. NOT IN vs. LEFT JOIN WHERE IS NULL 之间有什么区别？](https://stackoverflow.com/questions/2246772/whats-the-difference-between-not-exists-vs-not-in-vs-left-join-where-is-null)

我已经看到了上述问题，并决定使用 IN 而不是 EXISTS，因为表中的值可以为空。以下哪一种更好，更有效，或者有没有其他方法比以下两种更有效？

```
SELECT *
FROM   usagerecords UR
WHERE  UR.usagerateid NOT IN (SELECT id
                              FROM   pipelinerate PR
                              WHERE  PR.name = 'No Usage')

SELECT *
FROM   usagerecords UR
WHERE  UR.usagerateid IN (SELECT id
                          FROM   pipelinerate PR
                          WHERE  PR.name <> 'No Usage') 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T15:55:55.877

`NOT IN`如果`id`可以为空（我希望它不是，否则它的名字很糟糕）会给你错误的结果。

当一次又一次地证明`IN`效率更高（或至少效率不低）时，你为什么要选择它，因为它可以短路？必须实现整个集合。`EXISTS``EXISTS``IN`

```
SELECT * -- stop doing this
  FROM dbo.usagerecords AS UR
  WHERE EXISTS
  (
    SELECT 1 FROM dbo.pipelinerate AS pr
      WHERE pr.id = ur.usagerateid
      AND pr.name <> 'No Usage'
  ); 
```

您还可以像这样表达您的其他查询：

```
SELECT * -- again, stop doing this
  FROM dbo.usagerecords AS UR
  WHERE NOT EXISTS 
  (
    SELECT 1 FROM dbo.pipelinerate AS pr
      WHERE pr.id = ur.usagerateid
      AND pr.name = 'No Usage'
  ); 
```

但我不知道哪个（如果有的话）会得到正确的结果。这就是为什么我们通常要求提供样本数据和期望的结果。

与使用或相比，您使用`SELECT *`可能会对性能产生更大的负面影响。FWIW。`IN``EXISTS`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T16:04:01.753

“NOT EXISTS vs. NOT IN vs. LEFT JOIN WHERE IS NULL 之间有什么区别？”

Not exists 会在看到一个匹配项后立即退出。

不在不。人们会担心包含大量结果的列表是否包含在内，但 Jeff Moden 的一些测试表明，它们可以正常工作到百万个项目范围，这通常就足够了。

Left join where is null 是基于设置的，所以它是“经典”解决方案。“在”基本上变成了一个巨人或列表。当您只是在测试遗漏的东西时，左连接 where is null 没有任何特定优势，我喜欢在寻找每个用户的最新事件时使用左自连接/为 null 模式。

Not in 超级简单，任何新手开发者都会明白它的作用。

不存在几乎一样清楚，但可能高于新手。

Left join/is null 经常被中级开发人员误解。所以我个人发现不是最可维护的。

# opengl - 用 glut 拍摄屏幕并打开 gl 并输出到 tga（SB5 问题）

> ID：16087616
> 
> 赞同：1
> 
> 时间：2013-04-18T15:53:01.323
> 
> 标签：opengl

我目前正在阅读 Opengl 的优秀作品。我遇到了书中显示的一些源代码的问题。特别是该代码是用于截取当前场景的屏幕截图的代码。这是提供的代码：

```
GLint gltWriteTGA(const char *szFileName)  
{  
FILE *pFile;                // File pointer  
TGAHEADER tgaHeader;        // TGA file header  
unsigned long lImageSize;   // Size in bytes of image  
GLbyte  *pBits = NULL;      // Pointer to bits  
GLint iViewport[4];         // Viewport in pixels  
GLenum lastBuffer;          // Storage for the current read buffer setting  

// Get the viewport dimensions  
glGetIntegerv(GL_VIEWPORT, iViewport);  

// How big is the image going to be (targas are tightly packed)  
lImageSize = iViewport[2] * 3 * iViewport[3];     
// Allocate block. If this doesn't work, go home  
pBits = new GLbyte[lImageSize];
if(pBits == NULL)  
    return 0;  
// Read bits from color buffer  
glPixelStorei(GL_PACK_ALIGNMENT, 1);  
glPixelStorei(GL_PACK_ROW_LENGTH, 0);  
glPixelStorei(GL_PACK_SKIP_ROWS, 0);  
glPixelStorei(GL_PACK_SKIP_PIXELS, 0);

// Get the current read buffer setting and save it. Switch to  
// the front buffer and do the read operation. Finally, restore  
// the read buffer state   
glGetIntegerv(GL_READ_BUFFER, &lastBuffer);  
glReadBuffer(GL_FRONT);  
glReadPixels(0, 0, iViewport[2], iViewport[3], GL_BGR_EXT, GL_UNSIGNED_BYTE, pBits);  
glReadBuffer(lastBuffer);    

// Initialize the Targa header  
tgaHeader.identsize = 0;  
tgaHeader.colorMapType = 0;  
tgaHeader.imageType = 2;  
tgaHeader.colorMapStart = 0;  
tgaHeader.colorMapLength = 0;  
tgaHeader.colorMapBits = 0;  
tgaHeader.xstart = 0;  
tgaHeader.ystart = 0;  
tgaHeader.width = iViewport[2];  
tgaHeader.height = iViewport[3];  
tgaHeader.bits = 24;  
tgaHeader.descriptor = 0;  

// Attempt to open the file  
pFile = fopen(szFileName, "wb");  
if(pFile == NULL)  
    {  
    free(pBits);    // Free buffer and return error  
    return 0;  
    }  

// Write the header  
fwrite(&tgaHeader, sizeof(TGAHEADER), 1, pFile);  

// Write the image data  
fwrite(pBits, lImageSize, 1, pFile);  

// Free temporary buffer and close the file  
free(pBits);      
fclose(pFile);  

// Success!  
return 1;  
} 
```

代码的问题在于它会输出一个大小正确的文件，但包含某种垃圾数据。它不会生成可打开的 .tga 文件。另一个问题是“glGetIntegerv”函数需要一个 GLint，但上面的源代码为它提供了一个 GLenum。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T09:40:36.820

当我用在互联网上找到的 TGA_Header 尝试它时，它首先失败了，因为 colorMapStart 和 colorMapLength 在它们应该是短裤时是字节。这是应该工作的修改代码：

```
struct TGA_Header
{
    GLbyte  identsize;
    GLbyte  colorMapType;
    GLbyte  imageType;
    // Color map specifications
    GLshort colorMapStart;
    GLshort colorMapLength;
    GLbyte colorMapBits;

    //image specification
    GLshort xstart;
    GLshort ystart;
    GLshort width;
    GLshort height;
    GLbyte  bits;
    GLbyte descriptor;
}__attribute__((packed));

GLint gltWriteTGA(const char *szFileName)
{
    FILE *pFile;                // File pointer
    struct TGA_Header tgaHeader;        // TGA file header
    unsigned long lImageSize;   // Size in bytes of image
    GLint iViewport[4];         // Viewport in pixels
    GLint lastBuffer;          // Storage for the current read buffer setting

    // Get the viewport dimensions
    glGetIntegerv(GL_VIEWPORT, iViewport);

    // How big is the image going to be (targas are tightly packed)
    lImageSize = iViewport[2] * 3 * iViewport[3];
    // Allocate block. If this doesn't work, go home
    GLbyte  pBits[lImageSize];
    if(pBits == NULL)
        return 0;
    // Read bits from color buffer
    glPixelStorei(GL_PACK_ALIGNMENT, 1);
    glPixelStorei(GL_PACK_ROW_LENGTH, 0);
    glPixelStorei(GL_PACK_SKIP_ROWS, 0);
    glPixelStorei(GL_PACK_SKIP_PIXELS, 0);

    // Get the current read buffer setting and save it. Switch to
    // the front buffer and do the read operation. Finally, restore
    // the read buffer state
    glGetIntegerv(GL_READ_BUFFER, &lastBuffer);
    glReadBuffer(GL_FRONT);
    glReadPixels(0, 0, iViewport[2], iViewport[3], GL_BGR_EXT, GL_UNSIGNED_BYTE, pBits);
    glReadBuffer(lastBuffer);

    // Initialize the Targa header
    tgaHeader.identsize = 0;
    tgaHeader.colorMapType = 0;
    tgaHeader.imageType = 2;
    tgaHeader.colorMapStart = 0;
    tgaHeader.colorMapLength = 0;
    tgaHeader.colorMapBits = 0;
    tgaHeader.xstart = 0;
    tgaHeader.ystart = 0;
    tgaHeader.width = iViewport[2];
    tgaHeader.height = iViewport[3];
    tgaHeader.bits = 24;
    tgaHeader.descriptor = 0;

    // Attempt to open the file
    pFile = fopen(szFileName, "wb");
    if(pFile == NULL)
        {
        return 0;
        }

    // Write the header  
    fwrite(&tgaHeader, sizeof(tgaHeader), 1, pFile);

    // Write the image data
    fwrite(pBits, lImageSize, 1, pFile);

    fclose(pFile);

    // Success!
    return 1;
} 
```

# sql - 多个表按 GROUP BY 或不同 SQL 排序

> ID：16087618
> 
> 赞同：2
> 
> 时间：2013-04-18T15:53:05.613
> 
> 标签：sql, postgresql, join, group-by, distinct

我一直在努力解决这个问题，但没有运气，所以如果有人可以帮助我，那就太好了。

我有2张桌子。项目和项目标志。

**物品**

```
id        name       levelid        containertypeid        roomid        userid      timestamp
--        ----       -------        ---------------        ------        ------      -----
1         Item 1     0              0                      3             5           1365072108
2         Item 2     0              0                      3             5           1365342108
3         Item 3     0              0                      3             5           1389072108
4         Item 4     0              0                      3             5           1365085108
5         Item 5     2              3                      3             5           1365962108
6         Item 6     1              3                      3             5           1365322108 
```

**Item_Flags**

```
id        itemid     flagid        userid        timestamp
--        ----       -------       -------       ---------
1         1          1              5            1365072108
2         1          5              5            1365342108
3         1          2              5            1389072108
4         1          3              5            1365085108
5         2          4              5            1365762108
6         2          1              5            1365921087
7         2          3              5            1365252108
8         3          6              5            1365982108
9         3          7              5            1365312108
10        3          8              5            1365342108 
```

**目标**

我要做的是获取所有项目的列表，按降序时间戳排序。因此，实际上，我想要一个基于我们更新实际项目或为项目添加标志的最新时间戳的项目列表。每次针对特定项目添加标志或更新项目名称或级别时，应用程序都会更新时间戳。问题是如果我想取回名称、levelid 等字段，我无法运行 GROUP BY，因为我在聚合函数中使用了它们，所以实际值不会回来。如果我不将它们分组，我显然会为每个项目获得多个结果，具体取决于它有多少个标志。这是我的查询：

```
SELECT 
                items.id,
                items.name,   
                items.levelid,
                items.containertypeid,
                items.roomid,
                items.userid
        FROM 
                items
        LEFT OUTER JOIN item_flags ON
                items.id = flags.itemid
        WHERE
                items.levelid = 0 AND 
                items.containertypeid = 0 AND 
                items.room = 3 AND
                items.userid = 5
        GROUP BY 
               items.id
        ORDER BY 
               items.timemodified DESC
               item_flags.timemodified DESC 
```

如果我将除 items.id 之外的所有选择字段包装在聚合函数中并完全删除 ORDER ，我可以让它工作，但是当我取回它们时我需要使用这些字段并且我需要它们！在这一点上，我什至不确定查询中的逻辑是否有意义，因为虽然我说 flags.itemid 等于 items.id，但那里存在一对多的关系。

我看过[SQL Query - Grouping with multiple tables](https://stackoverflow.com/questions/8170443/sql-query-grouping-with-multiple-tables)，但那里没有 ORDER BY ，我不知道如何使它工作！

使用 PG SQL。

谢谢！

====================================

事实证明，最后，查询也必须与 MySQL 一起使用，而 With 显然不起作用。所以我们提出了一个不同的解决方案，我正在运行测试，我会尽快发布，以防它可能对其他人有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T16:03:09.350

您可以使用以下 GROUP BY

```
GROUP BY
            items.id,
            items.name,   
            items.levelid,
            items.containertypeid,
            items.roomid,
            items.userid 
```

由于 items.id 是唯一的，这会将记录分组为“GROUP BY items.id”。

对于数据库来说，这似乎需要做更多的工作，但由数据库决定它可以只检查分组的 id。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T16:17:42.373

一种方法：

```
with cte as
(SELECT id,
        timestamp,
        name,   
        levelid,
        containertypeid,
        roomid,
        userid
 FROM items
 UNION ALL
 SELECT itemid id,
        timestamp,
        NULL as name,
        NULL as levelid,
        NULL as containertypeid,
        NULL as roomid,
        NULL as userid
 from item_flags)
select id,
       max(timestamp) as timestamp,
       max(name) as name,   
       max(levelid) as levelid,
       max(containertypeid) as containertypeid,
       max(roomid) as roomid,
       max(userid) as userid
from cte
group by id
order by 2 desc 
```

SQLFiddle[在这里](http://sqlfiddle.com/#!1/bff8f/1)。

或者：

```
select id,
       max(timestamp) as timestamp,
       max(name) as name,   
       max(levelid) as levelid,
       max(containertypeid) as containertypeid,
       max(roomid) as roomid,
       max(userid) as userid
from 
(SELECT id,
        timestamp,
        name,   
        levelid,
        containertypeid,
        roomid,
        userid
 FROM items
 UNION ALL
 SELECT itemid id,
        timestamp,
        NULL as name,
        NULL as levelid,
        NULL as containertypeid,
        NULL as roomid,
        NULL as userid
 from item_flags) sq
group by id
order by 2 desc 
```

SQLFiddle[在这里](http://sqlfiddle.com/#!2/425fe/1)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-22T13:29:29.843

所以最后，我们已经解决了这个问题：

```
SELECT 
items.id, 
max(items.name) as name,
max(item_flags.flagid) as flagid,
max(COALESCE(item_flags.timestamp, items.timestamp)) AS tm
FROM   
items
LEFT JOIN 
item_flags 
ON 
item_flags.itemid = items.id 
GROUP BY items.id 
ORDER BY tm DESC 
```

# javascript - 使用cryptojs用key / iv解密base64编码的密文

> ID：16087621
> 
> 赞同：1
> 
> 时间：2013-04-18T15:53:22.713
> 
> 标签：javascript, aes, cryptojs

我的密文在 AES-128-CBC 模式下使用 PKCS1 填充进行加密。它是 base64 编码的，就像我的密钥和 IV 一样。我正在尝试使用 CryptoJS 解密此密文，但遇到了一些困难。这是我的（非工作）代码：

```
<script src="http://crypto-js.googlecode.com/svn/tags/3.1.2/build/rollups/aes.js"></script>
<script>
var plaintext = CryptoJS.AES.decrypt(
    CryptoJS.enc.Base64.parse("..."),
    CryptoJS.enc.Base64.parse("..."),
    { iv: CryptoJS.enc.Base64.parse("...") }
);
alert(plaintext.toString(CryptoJS.enc.Latin).length);
</script> 
```

所有 . 都是 base64 编码的字符串。从文档中我收集到 CryptoJS 默认使用 CBC 模式和 PKCS7 填充。

任何想法为什么它不起作用？

编辑：我的 jsfiddle：http: [//jsfiddle.net/NSmxY/1/](http://jsfiddle.net/NSmxY/1/)

# c++ - 一个数字只出现一次？

> ID：16087626
> 
> 赞同：0
> 
> 时间：2013-04-18T15:53:40.957
> 
> 标签：c++, project, multidimensional-array, sudoku

所以我一直在尝试编写一个函数，它会为数独游戏生成数字。这就是它的样子。

我有点迷失在最后一行......我如何检查一个数字是否只出现在一行和一列中？

```
void generator (int row, int col){

    for (int i=0; i<9; i++){
        int randNum= (1+rand()%9);
        for (int j=0; j<i; j++){
            A[i][j]=randNum;
            //check if one number only appears once. 
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T16:00:49.357

你做的完全错了。

您只需按照规则填写数独，从`1`.

拥有有效数独后，使用随机排列随机切换数字。

请注意，这是一个非常复杂的问题（如果您包括实际的数独生成，而不仅仅是填充板），您很可能低估了它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T15:55:56.770

我会将每个随机数添加到向量中。然后在生成每个数字后遍历所有向量成员以检查已经存在的值。

# python - 无法安装鼻子测试框架

> ID：16087631
> 
> 赞同：0
> 
> 时间：2013-04-18T15:53:49.703
> 
> 标签：python, testing, nose

我尝试使用 pip 安装**鼻子**，但安装因以下错误消息而终止：

```
 Downloading/unpacking nose
  Downloading nose-1.3.0.tar.gz (404Kb): 286Kb downloaded
Exception:
Traceback (most recent call last):
  File "/usr/lib/python2.7/dist-packages/pip/basecommand.py", line 104, in main
    status = self.run(options, args)
  File "/usr/lib/python2.7/dist-packages/pip/commands/install.py", line 245, in run
    requirement_set.prepare_files(finder, force_root_egg_info=self.bundle, bundle=self.bundle)
  File "/usr/lib/python2.7/dist-packages/pip/req.py", line 985, in prepare_files
    self.unpack_url(url, location, self.is_download)
  File "/usr/lib/python2.7/dist-packages/pip/req.py", line 1109, in unpack_url
    retval = unpack_http_url(link, location, self.download_cache, self.download_dir)
  File "/usr/lib/python2.7/dist-packages/pip/download.py", line 451, in unpack_http_url
    download_hash = _download_url(resp, link, temp_location)
  File "/usr/lib/python2.7/dist-packages/pip/download.py", line 368, in _download_url
    chunk = resp.read(4096)
  File "/usr/lib/python2.7/socket.py", line 380, in read
    data = self._sock.recv(left)
  File "/usr/lib/python2.7/httplib.py", line 561, in read
    s = self.fp.read(amt)
  File "/usr/lib/python2.7/socket.py", line 380, in read
    data = self._sock.recv(left)
timeout: timed out 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T16:15:48.633

Pypl 今天有点慢。也许尝试[--use-mirrors](http://jacobian.org/writing/when-pypi-goes-down/)看看它是否有助于缓解这种情况。

> 点子
> 
> 如果您使用的是最近的 pip（0.8.1 或更高版本），请使用 --use-mirrors 标志：
> 
> pip install --use-mirrors $PACKAGE
> 
> 您还可以设置 PIP_USE_MIRRORS 环境变量。
> 
> 这将自动查询镜像列表并继续尝试，直到有一个响应。PyPI 在等待 PyPI 超时时停止运行可能需要一些时间，但它会起作用。
> 
> 对于旧版本的 pip，或者如果您想强制使用特定镜像，请使用：
> 
> pip install -i [http://d.pypi.python.org/simple](http://d.pypi.python.org/simple) $PACKAGE
> 
> 如果您想指示 pip 始终使用镜像 - 如果您要进行大量安装，或者如果您将 pip 作为更大自动化工具的一部分使用，那就太好了 - 然后输入：
> 
> [全局] index-url = [http://d.pypi.python.org/simple](http://d.pypi.python.org/simple)
> 
> 进入 ~/.pip/pip.conf。

（您可以在下载中看到您超时 - 顶行和底行）

> 下载nose-1.3.0.tar.gz (404Kb)：下载286Kb
> 
> 超时：超时

# actionscript-3 - AS3 中的条件 IF 语句

> ID：16087632
> 
> 赞同：0
> 
> 时间：2013-04-18T15:53:52.390
> 
> 标签：actionscript-3, flash-cs6

我编写了这个函数来响应一个单独的函数中的事件监听器：

编辑：用工作代码更新。

```
 function greyOutItems(event:Event):void {

        if (DisableCheckBox.selected) {
            myComboBox.alpha = 0.5;

            myComboBox.enabled = false;
            trace("hide combobox success");
        }
        if (DisableCheckBox.selected == false) {
            myComboBox.visible = true;
            myComboBox.enabled = true;
            trace("visible");
        }
    } 
```

第一条`if`语句运行良好，当用户单击 CheckBox 时隐藏 ComboBox，但我希望用户能够取消选中同一个 CheckBox 并使 ComboBox 再次可见。

理想情况下，与其将 alpha 属性设置为 0，我更喜欢 ComboBox 是否“变灰”，尽管我还没有找到这样做的属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T15:59:39.787

你的 if 语句是错误的。`=`是赋值。您应该使用`==`或`selected`直接在 if 语句中使用。

```
if (DisableCheckBox.selected) {
    myComboBox.alpha = 0;
    trace("success");
}
if (!DisableCheckBox.selected) {
    myComboBox.alpha = 1;
    trace("revisible");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T16:02:48.343

如果`myComboBox`是一个影片剪辑，您可以将按钮“变灰”而不是使用该`alpha`属性的一种方法是在其后面添加第二帧，该帧位于灰色、半 alpha 框或您可以在 Flash 编辑器中更好地控制的类似效果的后面。

然后，在您的代码中，您可以`myComboBox.gotoAndStop(2)`将框变灰或`myComboBox.gotoAndStop(1)`使其恢复正常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T16:08:36.657

您的条件将**始终**为真，因为您将它们设置为条件中的该值。*“=”仅*用于“分配”属性。“==”是“等价于”。所以`if (DisableCheckBox.selected = true)`实际上将`selected`属性设置为 true 和条件的工作方式，因为它成功设置了值，所以它被标记为 true 语句。

```
function greyOutItems(event:Event):void {
    if (DisableCheckBox.selected == true) {
        myComboBox.alpha = 0;
        trace("success");
    }
    if (DisableCheckBox.selected == false) {
        myComboBox.alpha = 1;
        trace("revisible");
    }
} 
```

但是，在这种情况下，您也应该使用`else`而不是第二个条件。else 语句在运行时会运行得稍微快一些（因为它不必检查第二个条件，所以如果所有条件都为假，它只会运行 else）。不够引人注目，但如果你多次这样做，它就会增加

# django - 如何查看您的翻译网站？

> ID：16087634
> 
> 赞同：0
> 
> 时间：2013-04-18T15:53:53.907
> 
> 标签：django, python-2.7, django-i18n

我正在尝试用日语查看我的网站。我已经创建了翻译并用 compilemessages 编译了它们。

在我的 urls.py 我有

```
urlpatterns = i18n_patterns('',
    #...
) 
```

设置.py

```
LANGUAGE_CODE = 'en-us'

#Used for translations
gettext = lambda s: s
LANGUAGES = (
    ('en', gettext('English')),
    ('jp', gettext('Japanese')),    
) 
```

但是，当我尝试在开始时使用 /jp/ 访问 url 时，我发现只有 /en/

使用 PLP.urls 中定义的 URLconf，Django 按以下顺序尝试了这些 URL 模式：

```
^en/ 
```

当前 URL jp/accounts/login 与其中任何一个都不匹配。

我正在使用 dbgettext，所以我还在我的消息中翻译了我的数据库内容。

但是我怎样才能显示它

```
 {% trans "Question:" %}{% trans {{question.question}} %}<br> 
```

无法解析剩余部分：来自“{{question.question}}”的“{{question.question}}”

# 编辑

谢谢Ngenator！

我的另一个问题是日语是“ja”而不是“jp”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T16:00:05.273

那么[{% trans %}](https://docs.djangoproject.com/en/dev/topics/i18n/translation/#trans-template-tag)标签直接接受一个变量，所以你不需要那些额外的大括号，只需

```
{% trans "Question:" %}{% trans question.question %}<br> 
```

or using the [{% blocktrans %}](https://docs.djangoproject.com/en/dev/topics/i18n/translation/#blocktrans-template-tag) tag

```
{% blocktrans %}Question: {{ question.question }}{% endblocktrans %} 
```

should work. I'm not sure about the url issues though.

# requirejs - RequireJS：为什么相对路径适用于define()，而不适用于require()？

> ID：16087635
> 
> 赞同：5
> 
> 时间：2013-04-18T15:53:55.453
> 
> 标签：requirejs

假设您有以下目录结构和以下文件：

```
root
|-- require-jquery.js
+-- folder
     |-- index.html
     |-- main.js
     +-- AnotherModule.js 
```

在 RequireJS 中，当您引用以“.”开头的模块时，RequireJS 会在您当前模块所在的文件夹中查找，即使那是一个子目录。但是，如果您在调用 define() 之前更改 baseUrl，RequireJS 会将依赖项映射到新的 baseUrl。

您可以通过在 index.html 中设置 baseUrl 并将 data-main 更改为相对于 baseUrl 的路径来解决此问题：

文件夹/index.html：

```
<script>
    var require = {
        baseUrl : "../"
    };
</script>
<script data-main="folder/main" src="../require-jquery.js"></script> 
```

文件夹/main.js：

```
define(
        [ "jquery", './AnotherModule' ],
        function($, AnotherModule) {}); 
```

这仅适用于 define()，不过：

文件夹/main.js：

```
require(
        [ "jquery", './AnotherModule' ],
        function($, AnotherModule) {}); 
```

如果我尝试使用 require()，RequireJS 将在根目录中查找 AnotherModule.js，而不是文件夹。为什么会这样，特别是为什么 define() 和 require() 之间的设计差异？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-24T15:44:37.797

这是因为 define 指定了一个模块名称，而 require 没有。

可以这样调用定义：

```
define('folder/main',
        [ "jquery", './AnotherModule' ],
        function($, AnotherModule) {}); 
```

第一个参数是模块名称 - 模块的显式路径。Define() 总是隐式指定路径，一般[不推荐](http://requirejs.org/docs/api.html#modulename)使用显式路径。Require 不带名称参数。

当您在 define() 中包含相对依赖项时（例如 './AnotherModule'），它是相对于模块名称的。在这种情况下，./AnotherModule 将解析为文件夹/AnotherModule。

在对 require() 的调用中，*没有模块名称*。相对依赖被解析到根。

# java - 如何在 solr schema.xml 中创建新的 FieldType

> ID：16087637
> 
> 赞同：2
> 
> 时间：2013-04-18T15:53:57.163
> 
> 标签：java, web-applications, spring-mvc, solr

我是 Solr 的新手，我正在为我的论文开发一个应用程序，一种搜索语义引擎，我使用 springsource，（类似于 siri 或 s-voice）。我使用 springsource 和 Solr 来索引我的文档，但我对 fieldType 有一些问题。我的架构需要一个自定义模型（不仅仅是一个带有字符串参数的类）：

```
public class IndexedObject{

private String id;

private ArrayList<String> features;

private ArrayList<Semantic> semantic;

private String score;

private String time;

private int status;

@XmlElement(name="time")
public String getTime() {
    return time;
}

@Field
public void setTime(String time) {
    this.time = time;
}

@XmlElement(name="status")
public int getStatus() {
    return status;
}

public void setStatus(int status) {
    this.status = status;
}

@XmlElement(name="score")
public String getScore() {
    return score;
}

public void setScore(String score) {
    this.score = score;
}

@XmlElement(name="id", required=true)
public String getId() {
    return id;
}

@Field
public void setId(String id) {
    this.id = id;
}

@XmlElementWrapper(name = "features")
@XmlElement(name = "feature")
public ArrayList<String> getFeatures() {
    return features;
}

@Field
public void setFeatures(ArrayList<String> features) {
    this.features = features;
}

@XmlElementWrapper(name = "semantics")
@XmlElement(name = "semantic")
public ArrayList<Semantic> getSemantic() {
    return semantic;
}

@Field
public void setSemantic(ArrayList<Semantic> semantic) {
    this.semantic = semantic;
} 
```

我对使用我编写的自定义类的 ArrayList 语义有疑问。问题是：如何创建自定义 FieldType 以添加到 solr schema.xml。如果我启动我的代码，我会收到此错误：solr error unknown field semantic。它不起作用。有谁能够帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T16:49:24.803

有关修改 Solr Schema 的指导，请参阅以下链接。

*   [文档、字段和架构设计](http://docs.lucidworks.com/display/solr/Documents,+Fields,+and+Schema+Design)
*   [架构 XML](http://wiki.apache.org/solr/SchemaXml)

# vb.net - Countif 下一个单元格不为空

> ID：16087638
> 
> 赞同：0
> 
> 时间：2013-04-18T15:53:58.123
> 
> 标签：vb.net, excel, excel-2007

我需要计算一个字符串在一个范围内出现的次数，但前提是下一个单元格不为空。

```
A  1
B  5
D  4
A
G  1
B  4
B  8
D 
```

所以我想要 A->1, B->3, D->1, G->1

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T16:40:02.547

如果您正在寻找单元格公式，这应该可以满足您的需求：

```
=COUNTIFS(A1:A8,"A",B1:B8,"<>") 
```

`A1:A8`你的字母栏在哪里，`B1:B8`你的号码栏在哪里。

*注意这是`COUNTIFS()`（带**S**），而不是`COUNTIF()`（不带**S**）。

* * *

为了完整起见，这也可以，但可能比您想要的更复杂：

```
=SUMPRODUCT((A1:A8="A")*(LEN(B1:B8)>0)) 
```

* * *

如果您正在寻找 VB(A) 解决方案，这应该有效：

```
For i = 1 To 8
    'Replace mySheet and CellCount with the proper variables for your use
    If mySheet.Range("A" & i).Value2 = "A" And Len(mySheet.Range("B" & i)) > 0 Then
        CellCount = CellCount + 1
    End If
Next i 
```

# python - FigureCanvasWxAgg 在 linux 的面板（或笔记本）中没有正确调整大小

> ID：16087641
> 
> 赞同：4
> 
> 时间：2013-04-18T15:54:04.233
> 
> 标签：python, linux, windows, wxpython

我在 wxpython 中编写了一个程序，它在 windows 中运行良好，但是在 lunix 中测试时，我遇到了一些在 linux 中都发生的显示问题。

这是一个测试应用程序，它演示了在面板中调整 FigureCanvasWxAgg 大小的问题，正如面板本身遵循 resizingevent 但 FigureCanvasWxAgg 不遵循，但这在 Windows 中不是问题。

```
import wx
import matplotlib.figure as plt
from matplotlib.backends.backend_wxagg import FigureCanvasWxAgg as FigureCanvas
import wx.lib.inspection

class Test(wx.Frame):

    def __init__(self):
        super(Test, self).__init__(parent=None, id=-1)
        self.figure = plt.Figure()
        self.panel = wx.Panel(self, 1)
        self.figurepanel = FigureCanvas(self.panel, -1, self.figure)
        self.axes1 = self.figure.add_subplot(111)
        frame_box = wx.BoxSizer(wx.VERTICAL)
        frame_box.AddStretchSpacer(prop=1)
        frame_box.Add(self.panel, flag=wx.EXPAND, proportion=2)
        frame_box.AddStretchSpacer(prop=1)
        main_box = wx.BoxSizer(wx.HORIZONTAL)
        main_box.AddStretchSpacer(prop=1)
        main_box.Add(frame_box, flag=wx.EXPAND, proportion=1)
        main_box.AddStretchSpacer(prop=1)
        self.SetSizer(main_box)
        self.Show()
        self.Layout()

def main():
    app = wx.App()
    Test()
    wx.lib.inspection.InspectionTool().Show()
    app.MainLoop()

if __name__ == '__main__':
    main() 
```

我将非常感谢回答的是：

*   如何解决在 linux 中调整 FigureCanvasWxAgg 大小的问题
*   在 Windows 和 Linux 上使用 wxPython 进行 GUI 编程的一般方式有什么不同吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-16T17:27:16.027

您发布的代码有几个问题：

1.  您有可以根据需要扩展的水平和垂直间隔，这会导致中心区域保持相同的形状
2.  `self.figurepanel`不是任何 sizer 的一部分，这意味着即使它的容器调整大小，它也*不会*`self.panel`调整大小。

下面的代码生成一个由绘图填充的窗口，该窗口随窗口调整大小：

```
import wx
import matplotlib.figure as plt
from matplotlib.backends.backend_wxagg import FigureCanvasWxAgg as FigureCanvas
import wx.lib.inspection

class Test(wx.Frame):

    def __init__(self):
        super(Test, self).__init__(parent=None, id=-1)
        self.panel = wx.Panel(self, 1)
        self.panel.SetBackgroundColour('RED')

        self.figure = plt.Figure()
        self.axes1 = self.figure.add_subplot(111)
        self.figurepanel = FigureCanvas(self.panel, -1, self.figure)

        main_box = wx.BoxSizer(wx.HORIZONTAL)
        main_box.Add(self.figurepanel, flag=wx.EXPAND, proportion=1)
        self.panel.SetSizer(main_box)

        frame_box = wx.BoxSizer(wx.VERTICAL)
        frame_box.Add(self.panel, flag=wx.EXPAND, proportion=1)

        self.SetSizer(frame_box)
        self.Show()
        self.Layout()

def main():
    app = wx.App()
    Test()
    wx.lib.inspection.InspectionTool().Show()
    app.MainLoop()

if __name__ == '__main__':
    main() 
```

无需自己手动调整大小，我认为调整大小事件传播没有问题。如果有的话，破损会比您看到的要多得多。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-26T09:33:47.247

我想我解决了这个问题。问题是由 wx.EVT_SIZE 女巫引起的，它在 Windows 中似乎是自动的，但在 Linux 中却不是。因此，要解决 Linux 中的问题，您所要做的就是将 wx.Panel 绑定到 wx.EVT_SIZE，然后定义一个适当的事件处理程序来处理调整大小。对我来说诀窍是：

```
#code beneath is a part if the __init__ metod
self.panel = wx.Panel(self, -1)
self.figurepanel = FigureCanvas(self.panel, -1, self.figure)
self.panel.Bind(wx.EVT_SIZE, self.on_size)
....
#the eventhandler for the panel. The method resizes the the figurepanel and the figure.
def on_size(self, event):
    pix = self.panel.GetClientSize()
    self.figure.set_size_inches(pix[0]/self.figure.get_dpi(),
                                pix[1]/self.figure.get_dpi())
    x,y = self.panel.GetSize()  
    self.figurepanel.SetSize((x-1, y-1))
    self.figurepanel.SetSize((x, y))
    self.figurepanel.draw()
    event.Skip() 
```

# android - 日历的 Android 光标问题

> ID：16087643
> 
> 赞同：0
> 
> 时间：2013-04-18T15:54:07.327
> 
> 标签：android, calendar, cursor

我正在尝试制作一个应用程序，告诉我日历中的下一次会议是什么。我所做的是将光标放在最后一个事件上并开始获取他们的开始时间，直到我到达比现在更小的那个，然后，只需使用上一个项目。按顺序创建事件时它可以正常工作，但如果我在两者之间创建事件则不行。这是一个例子：

让我们将时间设置为 13:00 小时 我在 15:00（事件 1）、16:00（事件 2）、17:00（事件 3）之前添加了事件 光标转到读取事件的开始时间3\. 由于开始时间比现在大，所以转到前一个，事件2 因为开始时间也较大，所以转到前一个，事件1。由于开始时间也较大，所以转到前一个，一些昨天的活动。由于 start 较小，它从事件 1 中获取 id、title 以及开始和结束时间。

一切正常，问题是，当我在最初添加其他事件 1、2 和 3 之后在 14:00（事件 0）添加一些内容时，它不会到达事件 0，它会保留事件 1 的信息.

我该如何制作才能正确制作？

这是我的代码

非常感谢提前

问候

```
public class CalendarInfo extends Activity {
int idNumber = 0;
private Cursor mCursor = null;
private static final String[] COLS = new String[]
{ CalendarContract.Events.TITLE, CalendarContract.Events.DTSTART,      CalendarContract.Events.DTEND, CalendarContract.Events._ID};
protected void onCreate(Bundle savedInstanceState) {
 super.onCreate(savedInstanceState);
    setContentView(R.layout.calendar_info);
Button buttonchange999 = (Button) findViewById(R.id.button999);
        buttonchange999.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {

            mCursor = getContentResolver().query(
            CalendarContract.Events.CONTENT_URI, COLS, null, null, null);
            mCursor.moveToLast();
            Calendar cal = Calendar.getInstance();
            long currentTimeStart = cal.getTimeInMillis();
            long ammountOfDayPassed = currentTimeStart/86400000;
            String title = "N/A";
            Long start = 9223372036854775806L;
            Long end = 0L;
            int id = 0;
            String title2 = "N/A";
            Long start2 = 9223372036854775806L;
            Long end2 = 0L;
            int id2 = 0;
            while(start>currentTimeStart){
            try {
            title = mCursor.getString(0);
            start = mCursor.getLong(1);
            end = mCursor.getLong(2);
            id = mCursor.getInt(3);
            } catch (Exception e) {
            //ignore
            }
            if(start>currentTimeStart){
                title2 = title;
                start2 = start;
                end2 = end;
                id2 = id;
            }
            mCursor.moveToPrevious();
            }

            DateFormat formatter01 = new SimpleDateFormat("dd/MM/yyyy hh:mm:ss");
            Calendar calendar01 = Calendar.getInstance();
            calendar01.setTimeInMillis(start2);
            String startText = formatter01.format(calendar01.getTime());
            DateFormat formatter02 = new SimpleDateFormat("dd/MM/yyyy hh:mm:ss");
            Calendar calendar02 = Calendar.getInstance();
            calendar02.setTimeInMillis(end2);
            String endText = formatter02.format(calendar02.getTime());

            if(start2>currentTimeStart && end2>currentTimeStart){
            settingsTextView.setText("Meeting: "+title2+"\n"+"At: "+startText+"\n"+"Until: "+endText+"\n"+"ID: "+id2);
            idNumber=id2;
            }
            else{
                settingsTextView.setText("No Next Meeting" + "\n" + "Meeting: "+title2+"\n"+"At: "+startText+"\n"+"Until: "+endText+"\n"+"ID: "+id2);
                idNumber=id2;
        }
        }
    }); 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T16:34:13.880

解决了在这一行中添加一个 if：

```
if(start>currentTimeStart){
if(start<start2){
            title2 = title;
            start2 = start;
            end2 = end;
            id2 = id;
        }
} 
```

# jquery - jQuery Mobile Collapsible Sets 留下空白空间

> ID：16087645
> 
> 赞同：0
> 
> 时间：2013-04-18T15:54:10.433
> 
> 标签：jquery, jquery-mobile

我目前正在使用 jQuery Mobile 1.3.0。在这个我使用可折叠集，每次我展开一个然后展开不同的集或折叠原始集时，它会在页面底部留下一个空白空间。有人知道或对此有解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T20:59:06.877

我对可折叠集有类似的问题，在折叠时有时会在页面底部留下空白区域。我通过向 WebView 添加属性 android:overScrollMode="never" 解决了这个问题。请试试这个 - 它可能会有所帮助。

# android - R.layout.main 的问题

> ID：16087649
> 
> 赞同：2
> 
> 时间：2013-04-18T15:54:21.580
> 
> 标签：android

我很难解决这个问题。我刚刚开始了一个新项目，并且没有做任何事情，该项目在`mainactivity.java`src 上显示了这个错误，就在这一行......

```
setContentView(R.layout.activity_main); 
```

给我“R 无法解析为变量”，好的，“快速修复”给了我导入 R 的选项，我继续做，然后我得到一个新错误“activity_main 无法解析或不是字段”，然后快速修复只给了我一个选项，“更改为 activity_list_item”，所以我的问题是：为什么会发生这一切？

然后在这个方法上

```
public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true; 
```

我得到同样的错误`R.menu.main`，但现在我没有任何选择？？？

我很难处理这个`R.java`。我尝试了在这个论坛上找到的所有可能的修复程序，但没有一个有效。请帮忙。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T16:37:11.637

有时，Eclipse 会默认使用 android.R 而不是 com.your.package.R。转到您的导入部分并检查您是否正在导入包的 R 文件。

然后执行目录刷新和清理。这应该可以解决您的问题或暴露另一个问题。

也可能是您已经清理了项目，并且某些 xml 文件中有错误，这将阻止生成 R.java。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T16:32:21.580

例如，您是在导入 com.your.project.package.name 而不是 com.actionbarsherlock 吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-11T09:27:56.347

`import android.R;`在您的活动 java 文件中删除

# jquery - 自动滚动（jquery）上的可拖动插件错误

> ID：16087660
> 
> 赞同：1
> 
> 时间：2013-04-18T15:54:43.937
> 
> 标签：jquery, css, draggable, jquery-ui-draggable, jquery-draggable

我在一个项目中工作，该项目使用 jquery 可拖动插件将小部件（div）移动到页面中的另一个位置，但我遇到了一个无法解决的问题。

我的问题与 jquery 可拖动插件演示站点中发生的完全相同：http: [//jqueryui.com/draggable/#scroll](http://jqueryui.com/draggable/#scroll)

如果您开始拖动第一个 div，然后将其移动到底部，您会注意到窗口滚动（如预期的那样）。但是可以看到，鼠标在 div 和鼠标之间的偏移量并不是原来的。我的意思是，当您向下（或向上）滚动时，div 应该靠近鼠标不远处。

我尝试了一些选项作为使用

```
{ refreshPositions: true } 
```

对于可拖动元素甚至

```
{ cursorAt: { left: 0, top: 0 } } 
```

但两种解决方案都不能解决问题。

谢谢你的时间。

# python - pprint()：如何使用双引号来显示字符串？

> ID：16087662
> 
> 赞同：18
> 
> 时间：2013-04-18T15:54:48.610
> 
> 标签：python, pretty-print, pprint

如果我使用 打印字典[`pprint`](http://docs.python.org/2/library/pprint.html)，它总是将字符串包裹在单引号 ( `'`) 周围：

```
>>> from pprint import pprint
>>> pprint({'AAA': 1, 'BBB': 2, 'CCC': 3})
{'AAA': 1, 'BBB': 2, 'CCC': 3} 
```

有没有办法告诉`pprint`使用双引号 ( `"`) 代替？我想有以下行为：

```
>>> from pprint import pprint
>>> pprint({'AAA': 1, 'BBB': 2, 'CCC': 3})
{"AAA": 1, "BBB": 2, "CCC": 3} 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-04-18T16:01:59.577

看起来您正在尝试生成 JSON；如果是这样，请使用[`json`模块](http://docs.python.org/2/library/json.html)：

```
>>> import json
>>> print json.dumps({'AAA': 1, 'BBB': 2, 'CCC': 3})
{"AAA": 1, "BBB": 2, "CCC": 3} 
```

该`pprint()`函数生成*Python 表示*，而不是 JSON，并且引用样式不可配置。不要混淆这两种语法。JSON 乍一看可能很像 Python，但除了引用样式之外，还有更多不同之处：

*   JSON 仅限于一些特定类型（`{...}`具有键值对、`[...]`数组、`"..."`字符串、数字、布尔值和空值的对象）。Python 数据结构要丰富得多。
*   Python 字典键可以是任何可散列的对象，JSON 对象键只能是字符串。
*   JSON 布尔值用小写字母编写，`true`并且`false`. Python 使用标题大小写`True`和`False`.
*   JSON 用于`null`表示没有值，Python 使用`None`.
*   JSON 字符串使用 UTF-16 代码点，任何非 BMP 代码点都[使用代理对进行编码](https://en.wikipedia.org/wiki/UTF-16#U+010000_to_U+10FFFF)。除了少数单字母反斜杠转义（如任意代码点转义）外`\n`，还使用​​16 位十六进制表示法。Python 3 字符串涵盖了所有 Unicode，并且语法支持, , 以及8、16 和 32 位转义序列。`\"``\uXXXX``\xXX``\uXXXX``\UXXXXXXXX`

如果你想生成缩进的 JSON 输出（有点像`pprint()`输出列表和字典的缩进 Python 语法），然后 在调用中添加`indent=4`和：`sort_keys=True``json.dumps()`

```
>>> print json.dumps({'AAA': 1, 'CCC': 2, 'BBB': 3}, indent=4, sort_keys=True)
{
    "AAA": 1,
    "BBB": 2,
    "CCC": 3
} 
```

请参阅[http://stackoverflow.com/questions/12943819/how-to-python-prettyprint-a-json-file](http://stackoverflow.com/questions/12943819/how-to-python-prettyprint-a-json-file)

# mysql - 根用户不在本地 MYSQL 服务器上工作

> ID：16087665
> 
> 赞同：1
> 
> 时间：2013-04-18T15:55:03.623
> 
> 标签：mysql, macos

关于这个主题有几个类似的主题，但似乎没有一个能解决我的问题。我在 Mac OS 10.8 上全新安装了 MYSQL 5.6.11。在安装过程中没有提示我创建 root 密码。那应该意味着没有密码，或者密码是root。但是，我无法以 root 身份使用任何这些组合、我的系统密码或其他任何东西进行连接。

结果，对于我运行的每个命令，我都会收到此错误的某些版本，包括当我尝试重置 root 密码时：

```
ERROR 1045 (28000): Access denied for user 'root'@'localhost' (using password: NO) 
```

我卸载了MYSQL并重新安装了它。同样的问题。我下载的 Sequel pro 可以在不设置任何用户或密码的情况下连接，但无权执行任何操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T16:15:33.937

这里提出的方法怎么样：[https](https://stackoverflow.com/a/15564012/2244833) ://stackoverflow.com/a/15564012/2244833 ？

# ruby-on-rails - Rspec 和测试实例方法

> ID：16087671
> 
> 赞同：0
> 
> 时间：2013-04-18T15:55:25.630
> 
> 标签：ruby-on-rails, rspec, tdd

这是我的`rspec`文件：

```
require 'spec_helper'

describe Classroom, focus: true do

  describe "associations" do
    it { should belong_to(:user) }
  end

  describe "validations" do
    it { should validate_presence_of(:user) }
  end

  describe "instance methods" do

    describe "archive!" do
      before(:each) do
        @classroom = build_stubbed(:classroom)
      end

      context "when a classroom is active" do
        it "should mark classroom as inactive" do
          @classroom.archive!
          @classroom.active.should_be == false
        end
      end

    end

  end

end 
```

这是我的`Classroom Factory`：

```
FactoryGirl.define do

  factory :classroom do
    name "Hello World"
    active true

    trait :archive do
      active false
    end
  end

end 
```

当上面的实例方法测试运行时，我收到以下错误：`stubbed models are not allowed to access the database`

我理解为什么会发生这种情况（但我缺乏测试知识/是测试新手），但不知道如何存根模型以使其不会影响数据库

**工作 Rspec 测试：**

```
require 'spec_helper'

describe Classroom, focus: true do

  let(:classroom) { build(:classroom) }

  describe "associations" do
    it { should belong_to(:user) }
  end

  describe "validations" do
    it { should validate_presence_of(:user) }
  end

  describe "instance methods" do

    describe "archive!" do

      context "when a classroom is active" do
        it "should mark classroom as inactive" do
          classroom.archive!
          classroom.active == false
        end
      end

    end

  end

end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T16:07:16.613

您的`archive!`方法是尝试将模型保存到数据库中。而且由于您将其创建为存根模型，因此它不知道如何执行此操作。您有两种可能的解决方案：

*   将您的方法更改为`archive`，不要将其保存到数据库中，而是在您的规范中调用该方法。
*   不要在测试中使用存根模型。

Thoughtbot[在这里](http://robots.thoughtbot.com/post/22670085288/use-factory-girls-build-stubbed-for-a-faster-test)提供了一个很好的存根依赖关系示例。被测对象 ( `OrderProcessor`) 是一个真正的对象，而通过它的项目被存根以提高效率。

# nsis - 如何让我的 NSIS 静默安装程序阻塞直到完成？

> ID：16087674
> 
> 赞同：2
> 
> 时间：2013-04-18T15:55:37.240
> 
> 标签：nsis, silent-installer

当我运行静默 NSIS 安装程序（从控制台，如 中`installer.exe /S /D=C:\Foo`）时，它会立即移动到后台。我想等到它完成安装后再做任何其他事情。我可以通过一个标志来告诉安装程序被阻止吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T19:31:17.517

你没有说你如何在你的问题中开始这个过程！NSIS 安装程序总是“阻塞”，对于静默安装程序，这意味着您只需等待子进程结束。

如果父进程也是您可以执行的 NSIS 安装程序，`ExecWait '"c:\path\to\installer.exe" /S /D=C:\Foo'`或者如果它是您必须使用的批处理文件`start "" /WAIT "c:\path\to\installer.exe" /S /D=C:\Foo`

# linux - 在 linux 中，路由在环回与分配给 NIC 的 IP 上是否采用不同的路径

> ID：16087685
> 
> 赞同：-1
> 
> 时间：2013-04-18T15:56:18.417
> 
> 标签：linux, networking

我正在使用 RHEL 6.3（2.6.x 内核）。我有基于 tcp 的客户端服务器应用程序。我注意到，当我在同一台主机上运行它们时，吞吐量大致相同，无论服务器绑定到环回还是分配给 NIC 的本地 IP。

背后的原因是什么？我的理解是环回是基于软件的路由，当涉及分配给 NIC 的本地 IP 时，硬件涉及数据路径。真的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T18:22:41.560

硬件不参与。

一旦路由功能知道目标地址是本地的，数据包就被切换到入口路径。这就是为什么嗅探器无法捕获此类数据包的原因，因为该钩子恰好在此决定之后。

# php - PHP RAW INI 解析器无法正确解析值

> ID：16087690
> 
> 赞同：0
> 
> 时间：2013-04-18T15:56:23.613
> 
> 标签：php, parsing, ini

INI 数据如下所示：

```
[datasources]
live.dsn   = "mysql:host=localhost;dbname=main"
live.user  = "root"
live.pass  = 
```

我正在使用[`parse_ini_file()`](http://php.net/manual/en/function.parse-ini-file.php).

*   with`INI_SCANNER_RAW` `live.dsn`解析不正确 ( `"mysql:host`)
*   的`INI_SCANNER_NORMAL`值`live.dsn`是正确的

但我不能使用`INI_SCANNER_NORMAL`，因为那样它也会替换常量，“on”`1`等等（不想要那个）......有什么解决方法还是我必须创建自己的解析器？

我正在使用 PHP 5.3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T16:14:18.203

```
var_dump(parse_ini_string('[datasources]
live.dsn   = "mysql:host=localhost;dbname=main"
live.user  = "root"', false, INI_SCANNER_RAW)); 
```

=>

```
array(2) {
  ["live.dsn"]=>
  string(32) "mysql:host=localhost;dbname=main"
  ["live.user"]=>
  string(4) "root"
} 
```

我无法重现它。（它也不适用于`parse_ini_file`.）它适用于 PHP 5.3 和 PHP 主干...

* * *

我看到这是旧 PHP 版本中的一个错误，请参阅[https://bugs.php.net/bug.php?id=51094](https://bugs.php.net/bug.php?id=51094)。只需升级，然后它应该可以工作。如果你无法升级，你真的必须编写自己的 ini 解析器。

# windows-7 - 登录时在 Windows 7 中自动运行 bat 脚本

> ID：16087694
> 
> 赞同：13
> 
> 时间：2013-04-18T15:56:37.433
> 
> 标签：windows-7, batch-file, virtual-machine, autorun

我最近从已故祖母那里购买了一台 Windows 7 笔记本电脑。我一直在用它来工作和其他事情。我决定使用 VirtualBox 创建一个 VM 现在我想在（Windows 7 主机）机器上创建一个用户，这样当我登录该用户时，它会自动运行一个 .bat 脚本来启动 VM。为了清楚起见，我只想在用户“VM”而不是我的普通用户登录时运行它，如果它能够全屏自动启动，那就太棒了。我的桌面上有一个执行命令的快捷方式：

```
"C:\Program Files\Oracle\VirtualBox\VirtualBox.exe" --comment "VM" --startvm "12dada4d-    9cfd-4aa7-8353-20b4e455b3fa" 
```

但是当我登录到用户“VM”时如何制作一个autorun.bat？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-04-18T17:09:12.043

`VM`在用户登录时运行批处理文件：

将快捷方式（当前位于桌面上的快捷方式）（或批处理文件本身）拖到开始 - 所有程序 - 启动。现在，当您以该用户身份登录时，它将启动批处理文件。

做同样事情的另一种方法是将快捷方式或批处理文件保存在`%AppData%\Microsoft\Windows\Start Menu\Programs\Startup\`.

至于让它全屏运行，这取决于你的意思。您可以通过像这样编辑批处理文件来使其启动最大化：

```
start "" /max "C:\Program Files\Oracle\VirtualBox\VirtualBox.exe" --comment "VM" --startvm "12dada4d-9cfd-4aa7-8353-20b4e455b3fa" 
```

但是，如果 VirtualBox 具有真正的全屏模式（甚至隐藏任务栏），您将不得不在 VirtualBox.exe 上查找命令行参数。我对那个产品不熟悉。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-12-12T06:14:39.340

我遇到了这个问题，寻找如何在用户登录期间在独立的 Windows 服务器（工作组不在域中）上运行批处理脚本。我在使用组策略中找到了答案。

1.  gpedit.msc
2.  用户配置->管理模板->系统->登录->在用户登录时运行这些程序
3.  添加批处理脚本。
4.  `cmd /k mybatchfile.cmd`如果您希望命令窗口在批处理脚本完成后保留（在桌面上），您可以添加它们。
5.  gpupdate - 更新组策略。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-18T16:09:29.683

只需使用[这些说明](http://support.microsoft.com/kb/124551)在注册表中启用对 autoexec.bat 的解析。

```
:: works only on windows vista and earlier 
Run REGEDT32.EXE.
Modify the following value within HKEY_CURRENT_USER: 

Software\Microsoft\Windows NT\CurrentVersion\Winlogon\ParseAutoexec 

1 = autoexec.bat is parsed
0 = autoexec.bat is not parsed 
```

# c# - C# - 页面重定向无法正常工作

> ID：16087696
> 
> 赞同：1
> 
> 时间：2013-04-18T15:56:41.310
> 
> 标签：c#, asp.net, redirect, tabs, window

我在 C# 中有以下代码：

```
if (function.Equals("Larger50"))
{
      Request req = new Request();
      string result = req.doRequest("function=" + function + "&num=" + number, "http://localhost:4000/Handler.ashx");

      if (result.Equals("True") || result.Equals("true"))
      {
            Page.ClientScript.RegisterStartupScript(Page.GetType(), null, "window.open('http://localhost:4000/Larger.aspx?num=" + number + "', '_newtab')", true);
       }

       if(result.Equals("False") || result.Equals("false"))
       {
             Page.ClientScript.RegisterStartupScript(Page.GetType(), null, "window.open('http://localhost:4000/Smaller.aspx', '_newtab')", true);
       }

       if(result.Equals("Error") || result.Equals("error"))
       {
             Page.ClientScript.RegisterStartupScript(Page.GetType(), null, "window.open('http://localhost:4000/ErrorPage.htm', '_newtab')", true);
       }

       Session["result"] = result;
       Page.ClientScript.RegisterStartupScript(Page.GetType(), null, "window.location.href = 'Results.aspx'", true);
} 
```

结果变量可以具有以下三个值中的任何一个（如果服务器响应）：

i) 对 ii) 错 iii) 错误

此代码的主要问题是三个 if 语句中的每一个中的新选项卡脚本都可以正常工作。但是，由于某种原因，打开 Results.aspx 页面的最后一个脚本没有执行。如果注释掉所有其他代码，该脚本编写得很好，因为它可以完美执行。我应该如何解决问题？

我尝试用 Response.Redirect("Results.aspx") 替换它，但是然后它会执行并且所有其他三个脚本都不会执行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T16:24:47.430

您应该一次注册所有这些，而不是在两个单独的语句中：

```
if (function.Equals("Larger50"))
{
      Request req = new Request();
      string result = req.doRequest("function=" + function + "&num=" + number, "http://localhost:4000/Handler.ashx");

      string scriptVal = "";

      if (result.Equals("True") || result.Equals("true"))
      {
            scriptVal = "window.open('http://localhost:4000/Larger.aspx?num=" + number + "', '_newtab');";
       }

       if(result.Equals("False") || result.Equals("false"))
       {
            scriptVal = "window.open('http://localhost:4000/Smaller.aspx', '_newtab');";
       }

       if(result.Equals("Error") || result.Equals("error"))
       {
            scriptVal = "window.open('http://localhost:4000/ErrorPage.htm', '_newtab');";
       }

       Session["result"] = result;

       scriptVal += "window.location.href = 'Results.aspx';";

       Page.ClientScript.RegisterStartupScript(Page.GetType(), null, scriptVal, true);
} 
```

请参阅 上的文档[`ClientScriptManager.RegisterStartupScript`](http://msdn.microsoft.com/en-us/library/z9h4dk8y.aspx)，特别是：

> 启动脚本由其键和类型唯一标识。具有相同键和类型的脚本被认为是重复的。页面中只能注册一个具有给定类型和密钥对的脚本。尝试注册已注册的脚本不会创建该脚本的副本。

在您的情况下，您注册的两个脚本中的类型和键都是相同的。

您可以使用密钥唯一标识它们，然后单独注册它们。但是你必须记住，执行顺序是不能保证的：

> 不保证脚本块按照注册的顺序输出。

# jquery - 手动将 jquery 和 jquery-ui 添加到 grails 项目

> ID：16087697
> 
> 赞同：6
> 
> 时间：2013-04-18T15:56:43.853
> 
> 标签：jquery, jquery-ui, grails

我已经在 grails 中编码了几个月了。它们通过 main.gsp 文件添加到页面中，其中包含以下内容：

```
<g:javascript library="jquery"/>
<r:require module="jquery-ui"/> 
```

jquery 和 jquery-ui 插件在对话框、排序等方面运行良好，但我现在想将选项卡小部件添加到我的页面中，并且插件框架附带的 jquery 和 jquery-ui 版本似乎没有与他们一起工作。当我将源直接添加到页面时：

```
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script> 
```

一切正常。所以现在我正在考虑完全转储插件并手动添加库。

这样做的最佳方法是什么？我可以将它们放在 /js 目录中并修改 ApplicationResources.groovy 以引用它们，但一位同事提到他更喜欢将它们添加到 Config.groovy 的 grails.resources.modules 部分。我想知道实现这一目标的最佳方法是什么。

我在 Config.groovy 中也有以下内容：

```
grails.resources.modules = {

overrides {
    'jquery-theme' {
        resource id: 'theme', url: '/css/smoothness/jquery-ui-1.10.0.custom.css'
    }
} 
```

如果我删除插件并自己管理库，是否需要将其移动到其他地方或更改它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-22T23:48:04.690

这两个选项都有效。您可以使用`Config.groovy`或`ApplicationResources.groovy`。

在删除插件之前，我建议您检查您需要的版本是否存在。grails.org 的插件门户只会显示最新版本。我在这里尝试过并且`:jquery:1.9.1`存在但`:jquery-ui:1.10`不存在。

## 手动声明资源

因此，如果您需要，您可以为 JQuery 和 JQuery UI 声明您的资源。只需删除插件和覆盖，然后添加您的配置。这些文件必须放在 js 和/或 css 文件夹中。

如果需要，您还可以检查环境并更改为缩小版本。例子：

```
//use the minified version in production
def minified = GrailsUtil.isDevelopmentEnv() ? "" : ".min"

modules = {
  jquery {
    resource url: "/js/jquery-1.9.1${minified}.js"
  }
  'jquery-ui' {
    resource url: "/js/ui/1.10.2/jquery-ui${minified}.js"
    resource url: "/css/smoothness/jquery-ui-1.10.0.custom${minified}.css"
  }
} 
```

# jquery - 如何在jquery的类中访问带有句点的div

> ID：16087704
> 
> 赞同：1
> 
> 时间：2013-04-18T15:57:06.480
> 
> 标签：jquery

我正在尝试访问在其类中有句点的 div `clazz.id`，但返回的长度为 0

我做了以下 jsFiddle 来说明我的问题

[jsFiddle](http://jsfiddle.net/kamranali377/WrdXB/)

这是我的**html**

```
<div id="activity-operation" style="" class="edit-form">
    <form class="form1">
        <div class="server-error" style="display: none;"></div>
        <fieldset>
            <div>
                <input id="c49_id" name="id" type="hidden" class="myClassCustom" value="1">
            </div>
            <div>
                <input id="c49_subject_id" name="subject_id" type="hidden" class="myClassCustom" value="37">
            </div>
            <div>
                <input id="c49_activityValidationType" name="activityValidationType" type="hidden" value="">
            </div>
            <div class="input swField-name">
                <div class="inputtext">
                    <label for="c49_name" style="float:right;">Activity Name</label>
                </div>
                <div class="inputcontent">
                    <input id="c49_name" name="name" readonly="readonly" disabled="disabled" type="text">
                </div>
                <div class="input-error" style="display:none;"></div>
            </div>
            <div class="input swField-subject.name">
                <div class="inputtext">
                    <label for="c49_subject_name" style="float:right;">Subject</label>
                </div>
                <div class="inputcontent">
                    <input id="c49_subject_name" name="subject_name" readonly="readonly" disabled="disabled" type="text">
                </div>
                <div class="input-error" style="display:none;"></div>
            </div>
            <div class="input swField-activityType.id">
                <div class="inputtext">
                    <label for="c49_activityType_id" style="float:right;">Select Type</label>
                </div>
                <div class="inputcontent">
                    <select id="c49_activityType_id" name="activityType_id">
                        <option value="ASIG">Assignment</option>
                        <option value="CLAS">Class</option>
                        <option value="QUIZ">Quiz</option>
                    </select>
                </div>
                <div class="input-error" style="display:none;"></div>
            </div>
            <div class="input swField-term.id">
                <div class="inputtext">
                    <label for="c49_term_id" style="float:right;">Select Term</label>
                </div>
                <div class="inputcontent">
                    <select id="c49_term_id" name="term_id">
                        <option value="FA12">Fall 2012</option>
                        <option value="FA13">Fall 2013</option>
                        <option value="SP12">Spring 2012</option>
                        <option value="SP13">Spring 2013</option>
                    </select>
                </div>
                <div class="input-error" style="display:none;"></div>
            </div>
            <div class="input swField-grading">
                <div class="inputtext">
                    <label for="c49_grading" style="float:right;">Grading</label>
                </div>
                <div class="inputcontent">
                    <input id="c49_grading" name="grading" type="text">
                </div>
                <div class="input-error" style="display:none;"></div>
            </div>
            <div class="input swField-class.id error">
                <div class="inputtext">
                    <label for="c49_clazz_id" style="float:right;">Select Class</label>
                </div>
                <div class="inputcontent">
                    <select id="c49_clazz_id" name="clazz_id">
                        <option value="">Select</option>
                        <option value="22">10</option>
                        <option value="10">9b</option>
                        <option value="11">9c</option>
                        <option value="40">A</option>
                        <option value="41">B</option>
                        <option value="24">c1</option>
                        <option value="25">c2</option>
                        <option value="26">c3</option>
                        <option value="27">c4</option>
                        <option value="87">Obj 1</option>
                        <option value="86">Rawalpindi Board</option>
                    </select>
                </div>
                <div class="input-error" style="display:none;">Class is required</div>
            </div>
            <div class="input swField-section.id">
                <div class="inputtext">
                    <label for="c49_section_id" style="float:right;">Select Section</label>
                </div>
                <div class="inputcontent">
                    <select id="c49_section_id" name="section_id" readonly="readonly" disabled="disabled">
                        <option value="select"></option>
                    </select>
                </div>
                <div class="input-error" style="display:none;"></div>
            </div>
            <div class="input swField-description">
                <div class="inputtext">
                    <label for="c49_description" style="float:right;">Description</label>
                </div>
                <div class="inputcontent">
                    <textarea id="c49_description" name="description" type="text"></textarea>
                </div>
                <div class="input-error" style="display:none;"></div>
            </div>
        </fieldset>
        <div class="buttons">
            <input class="orangebutton swFormSubmitButton" type="submit" value="Submit">
            <input class="greybutton swFormCancelButton" type="submit" value="Cancel">
        </div>
    </form>
</div> 
```

这些是我正在尝试的选择器

```
alert($("form.form1").find(".swField-clazz\\\\.id div.inputcontent").length);

alert($("form.form1").find(".swField-clazz\\.id div.inputcontent").length); 
```

我试图`\\` 逃避课堂上的那段时间，但它似乎不起作用

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T16:03:19.203

逃避`\\`实际上有效。

`swField-clazz.id`在您的 HTML中根本没有这样的类。

不过，请尝试去掉班级名称中的句点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T16:12:28.167

这工作正常： `alert($("form.form1").find(".swField-activityType\\.id div.inputcontent").length);`

请参阅更新的小提琴：http: [//jsfiddle.net/WrdXB/1/](http://jsfiddle.net/WrdXB/1/)

# html - 文本在 CSS 上方随机显示一行

> ID：16087705
> 
> 赞同：-4
> 
> 时间：2013-04-18T15:57:11.197
> 
> 标签：html, css

按钮类中的文本一直在上面显示一行。我怎样才能删除它？一个示例可能是主页[http://barajon.com/store/product.php?productid=17533&cat=274&page=1](http://barajon.com/store/product.php?productid=17533&cat=274&page=1)上的添加到购物车按钮或愿望清单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T16:11:59.290

如果您仔细观察，您会发现它实际上是一个定义您的按钮类的框。你需要`border : none`在你的按钮上使用。同样，按钮内部和外部的颜色也不是完全匹配的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T16:15:09.490

您正在通过这组规则将该按钮背景图像应用于`span`包含按钮内文本（以及按钮本身）的 s ：

```
button, button span {
    font-family: Glove;
    font-size: 16px;
    background: url(../../skin/busy-kitchen/css/../images/add2cart.png) no-repeat;
    width: 248px;
    height: 31px;
    border-radius: 8px;
    color: white;
} 
```

`background`从此选择器中删除规则以从 s 中删除背景图像，`span`它应该看起来正常。这将如何影响您网站的其他部分，我不确定。

# google-maps - 当 URL 变得太大时，Google 静态地图的替代品

> ID：16087711
> 
> 赞同：1
> 
> 时间：2013-04-18T15:57:28.470
> 
> 标签：google-maps, google-static-maps

我的最终目标是查看和打印包含特定业务信息的文档（例如 PDF）以及地图。地图必须有

1.  航拍影像背景
2.  KML 文件中的要素。

谷歌静态地图可以完美地解决这个问题，直到 KML 变得过于复杂而无法放入 URL。我已经通过降低长/纬度精度和编码折线来缩小 URL。

想法：

1.  我可以从 Google 静态地图获取航拍图像，然后以编程方式将我的 KML 功能绘制到上面，但我不确定 Google 地图使用条款是否允许这样做。
2.  还有其他方法可以强制静态地图给我想要的吗？
3.  Google 是否有不同的地图服务可以最终将 KML 转换为具有航空图像背景的图像？
4.  任何可能有帮助的非 Google 服务？

# android - 将视图与屏幕尺寸匹配-android

> ID：16087712
> 
> 赞同：0
> 
> 时间：2013-04-18T15:57:34.153
> 
> 标签：android, screen

当我在小屏幕上运行我的应用程序时，编辑文本不在屏幕上。我的意思是在写东西时，它写了一些字符，我看不到它，只有在 9-10 个字符之后我才能看到我输入的内容。

我该如何修复它以使其匹配所有尺寸的屏幕？

谢谢。

```
<?xml version="1.0" encoding="UTF-8"?>

<ScrollView xmlns:tools="http://schemas.android.com/tools"
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

<TableLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/tableLayout1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_gravity="right"
    android:background="@drawable/back"
    android:paddingLeft="20dp" >

    <TableRow
        android:id="@+id/tableRow1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginRight="14.5sp"
        android:layout_marginTop="8sp"
        android:gravity="center"
        android:padding="5dip" >

        <TextView
            android:fontFamily="monospace"
            android:freezesText="true"
            android:paddingRight="15sp"
            android:text="צריכת חשמל"
            android:textSize="40sp"
            android:textStyle="bold" />
    </TableRow>

    <View android:layout_height="12dip" />

    <TableRow
        android:id="@+id/tableRow2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginRight="14.5sp"
        android:gravity="right"
        android:padding="5dip" >

        <Spinner
            android:id="@+id/songs_spinner"
            android:layout_marginRight="10.5sp"
            android:gravity="fill"
            android:prompt="@string/products"
            android:textAppearance="?android:attr/textAppearanceLarge" />

        <TextView
            android:freezesText="true"
            android:paddingRight="15sp"
            android:text="מוצר"
            android:textSize="22sp"
            android:textStyle="bold" />
    </TableRow>

    <TableRow
        android:id="@+id/tableRow3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginRight="14.5sp"
        android:gravity="right"
        android:padding="5dip" >

        <EditText
            android:id="@+id/edit_message_module"
            android:layout_marginRight="10.5sp" />

        <TextView
            android:freezesText="true"
            android:paddingRight="15sp"
            android:text="דגם"
            android:textSize="22sp"
            android:textStyle="bold" />
    </TableRow>

    <TableRow
        android:id="@+id/tableRow332"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginRight="14.5sp"
        android:gravity="right"
        android:padding="5dip"
        android:visibility="gone" >

        <Spinner
            android:id="@+id/edit_message_horse"
            android:layout_width="1sp"
            android:textAppearance="?android:attr/textAppearanceLarge" />

        <TextView
            android:freezesText="true"
            android:paddingRight="15sp"
            android:text="כוח סוס"
            android:textSize="22sp"
            android:textStyle="bold" />
    </TableRow>

    <TableRow
        android:id="@+id/radio_hot_or_cold"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginRight="14.5sp"
        android:gravity="right"
        android:orientation="horizontal"
        android:padding="5dip"
        android:visibility="gone" >

        <RadioGroup
            android:id="@+id/radioGroup_consume"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_below="@+id/radio_consume"
            android:orientation="horizontal" >

            <EditText
                android:id="@+id/edit_message_hot"
                android:layout_marginRight="10.5sp"
                android:inputType="numberDecimal"
                android:minEms="2"
                android:minWidth="15sp" >
            </EditText>

            <TextView android:text="צריכה בחום" />

            <RadioButton
                android:id="@+id/radio0"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:checked="true"
                android:paddingBottom="5dp"
                android:text="" />

            <EditText
                android:id="@+id/edit_message_cold"
                android:layout_marginRight="10.5sp"
                android:inputType="numberDecimal"
                android:minEms="2"
                android:minWidth="15sp"
                android:paddingTop="10dp" >
            </EditText>

            <TextView android:text="צריכה בקור" />

            <RadioButton
                android:id="@+id/radio1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:paddingTop="10dp"
                android:text="" />
        </RadioGroup>
    </TableRow>

    <TableRow
        android:id="@+id/tableRow44"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginRight="14.5sp"
        android:gravity="right"
        android:padding="5dip" >

        <EditText
            android:id="@+id/edit_message_watt"
            android:layout_marginRight="10.5sp"
            android:inputType="numberDecimal" />

        <TextView
            android:freezesText="true"
            android:paddingRight="15sp"
            android:text="וואט"
            android:textSize="22sp"
            android:textStyle="bold" />
    </TableRow>

    <TableRow
        android:id="@+id/tableRow441"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginRight="14.5sp"
        android:gravity="right"
        android:padding="5dip" >

        <EditText
            android:id="@+id/edit_message_kotsh"
            android:layout_marginRight="10.5sp"
            android:inputType="numberDecimal" />

        <TextView
            android:freezesText="true"
            android:paddingRight="15sp"
            android:text="קושט"
            android:textSize="22sp"
            android:textStyle="bold" />
    </TableRow>

    <TableRow
        android:id="@+id/tableRow5"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginRight="14.5sp"
        android:gravity="right"
        android:padding="5dip" >

        <Spinner
            android:id="@+id/duration_spinner"
            android:layout_width="1sp"
            android:textAppearance="?android:attr/textAppearanceLarge" />

        <EditText
            android:id="@+id/edit_message_mineutes"
            android:layout_marginRight="10.5sp"
            android:inputType="numberDecimal"
            android:minEms="2"
            android:minWidth="15sp" >
        </EditText>

        <TextView
            android:freezesText="true"
            android:paddingRight="15sp"
            android:text="משך הפעלה"
            android:textSize="15sp"
            android:textStyle="bold" />
    </TableRow>

    <View android:layout_height="12dip" />

    <TableRow
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginRight="14.5sp"
        android:gravity="center" >

        <ImageButton
            android:id="@+id/alutbutton"
            android:background="@android:color/transparent"
            android:gravity="center"
            android:onClick="compute_hashmal"
            android:scaleType="fitCenter"
            android:src="@drawable/alut_zria" />
    </TableRow>

    <View android:layout_height="25dip" />

    <TableRow
        android:layout_width="5sp"
        android:layout_height="wrap_content"
        android:layout_marginRight="14.5sp"
        android:gravity="center"
        android:paddingTop="10sp" >

        <Button
            android:id="@+id/savebutton"
            android:alpha="0.95"
            android:onClick="save_hashmal"
            android:scaleType="fitCenter"
            android:text="שמור מוצר" />

        <Button
            android:id="@+id/savedItems"
            android:alpha="0.95"
            android:onClick="goToSavedItems"
            android:scaleType="fitCenter"
            android:text="פריטים שמורים" />
    </TableRow>

    <TableRow
        android:id="@+id/tableRow6"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginRight="14.5sp"
        android:gravity="center"
        android:padding="5dip" >

        <TextView
            android:id="@+id/output_box"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" />
    </TableRow>

</TableLayout>
</ScrollView> 
```

# android - 当你更新一个安卓应用程序时会发生什么？

> ID：16087714
> 
> 赞同：2
> 
> 时间：2013-04-18T15:57:35.627
> 
> 标签：android

当开发人员更新应用程序时会发生什么？更新上述应用程序的用户是否下载了一个全新的应用程序，或者应用程序商店是否足够聪明，可以只下载更改？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T16:03:38.613

[Google Play 具有智能更新](http://www.pcworld.com/article/261004/google_play_smart_updates_save_data_costs_and_time.html)，仅下载 apk 的更改部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T16:17:44.530

Yes, Google play is smart enough to update just changes called delta update.look at the example video and docs over [here](http://www.androidpolice.com/2012/08/16/google-flips-the-switch-on-smart-app-updates-in-the-play-store-video/) which updates patch file instead of whole application.

# jquery - jQuery选择器点击不会从动态生成的按钮触发？

> ID：16087715
> 
> 赞同：0
> 
> 时间：2013-04-18T15:57:37.533
> 
> 标签：jquery, ajax, twitter-bootstrap, jquery-events

以下按钮是从 ajax 成功调用生成的（其中有很多）：

```
<a class="btn appDetails" href="#myModal" data-toggle="modal" role="button">' + data.Application_Name + '</a> 
```

我已经尝试了以下所有方法，但似乎都没有触发：

```
$('.appDetails').click(function () {
    alert("test");
});

$('.appDetails').live("click", function () {
    alert("test");
});

$('.appDetails').on("click", function () {
    alert("test");
});

$('document').on("click",".appDetails", function () {
    alert("test");
}); 
```

可能遗漏了一些愚蠢的东西......请注意，单击链接*确实会*正确打开引导模式。不知道这是否冲突，我不这么认为......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T16:02:27.730

你需要这样做

```
$(document).on("click",".appDetails", function () {
    alert("test");
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T16:00:55.237

您可能需要使用 $(document).ready

```
$(document).ready(function() {
    $('.appDetails').live("click", function () {
        alert("test");
    });
});

// 1.7+
$(document).ready(function() {
    $(document).on("click", ".appDetails", function() { 
        alert("test"); 
    });
}); 
```

# node.js - 在 grunt 任务中使用时，节点中的 RequireJs 模块总是返回未定义

> ID：16087725
> 
> 赞同：0
> 
> 时间：2013-04-18T15:58:09.027
> 
> 标签：node.js, requirejs, amd, gruntjs

我在前端和 grunt 任务中需要一个小配置文件。

**js/config.js：**

```
define(function() {
  return [
    {
      id: 'demo',
      displayName: 'Demo'
    }
  ];
}); 
```

我可以毫无问题地在前端加载文件，它也可以在节点中工作。var requirejs = require('requirejs');

```
requirejs.config({
  nodeRequire: require,
  baseUrl: './js'
});   
var config = requirejs('config') 
```

但是，当我尝试在 grunt 任务中加载相同的文件时，它返回未定义：

```
requirejs.config({
  nodeRequire: require,
  baseUrl: './js'
});   
grunt.registerTask('lala', function  () {
  var config = requirejs('config')
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T08:33:46.133

问题是我需要函数之外的requireJs `module.exports`。所以这毕竟有效：

```
module.exports = function(grunt) {

  var requirejs = require('requirejs');

  requirejs.config({
    nodeRequire: require,
    baseUrl: './js/cfe/app/platforms/as'
  });

  grunt.registerTask('lala', function  () {
    var config = requirejs('config')
  });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T18:28:23.197

这段代码对我有用。首先我安装了requirejs：

```
cd /path/to/code/directory
npm install requirejs 
```

然后在我的 app.js 中：

```
var requirejs = require('requirejs');

requirejs.config({
  nodeRequire: require,
  baseUrl: './js'
});   

var config = requirejs('config');
console.log(config); 
```

在 js/config.js 中：

```
define(function() {
  return [
    {
      id: 'demo',
      displayName: 'Demo'
    }
  ];
}); 
```

当我运行它时，我得到了正确的结果：

```
$ node app.js
[ { id: 'demo', displayName: 'Demo' } ] 
```

我正在使用节点 v0.10.1。

# php - 基于双引号或单引号的不同行为

> ID：16087729
> 
> 赞同：-1
> 
> 时间：2013-04-18T15:58:16.530
> 
> 标签：php, mysql

关于双引号和单引号的使用，我有一个小问题。

当我使用以下带有双引号的代码时`echo ""`：

```
$result_entries = mysqli_query($con,"SELECT * FROM bhost_entries where author_u_id='$user_info[u_id]'");
while($entries = $result_entries->fetch_object())
  {
  echo "
  <tr>
   <td>
   {$entries->title}
   </td>
  </tr>
  ";
  } 
```

..输出将是

```
Entry1
Entry2
Entry3
etc.. 
```

但是当我使用带有单引号的相同代码时，`echo ''`我会得到：

```
{$entries->title}
{$entries->title}
{$entries->title}
etc.. 
```

作为输出。

为什么他们的行为不同？

欣赏任何想法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T15:59:13.003

这是因为它是单引号和双引号之间的主要区别。单 qoutes 不解析变量，而双 qoutes 解析变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T17:10:43.360

如果你想使用单引号，你需要这样做：

```
 echo '
  <tr>
   <td>
   '.$entries->title.'
   </td>
  </tr>
  '; 
```

如果你想使用双引号，你可以坚持原来的语法！如前所述，双引号允许使用正确的语法解析 php 变量，而单引号字符串则不允许。当您可能必须在 php 字符串中转义单引号或双引号时，请记住这一点。

```
echo 'Arnold once said: "I\'ll be back"'; 
```

来自[PHP 手册](http://php.net/manual/en/language.types.string.php)

# jquery - 是否可以重新设置高图表图例？

> ID：16087732
> 
> 赞同：2
> 
> 时间：2013-04-18T15:58:23.663
> 
> 标签：jquery, highcharts

我正在使用高图表库，并希望将图例条目从图表中移到侧栏中的另一个容器中。

有谁知道这是否可能？

我试过这个，但风格无处不在：

```
 chart = new Highcharts.Chart({
 chart: { .... 
     events: {
        load: function (event) {
            $(".highcharts-legend").appendTo("#legendContainer");
        }
  } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T18:21:19.443

图例是使用 SVG 绘制的。`div`而不是对一个`svg`元素重新父级。

```
<svg id="legendContainer" class="highcharts-container"></svg> 
```

[在这里](http://jsfiddle.net/s5AdJ/)拉小提琴。

**编辑**

最新版本的 Highcharts 使用 SVG 定位图例`transform`，您可能必须删除它才能使 reparent 正常工作。更新[了小提琴](http://jsfiddle.net/s5AdJ/21/)。

# django - 来自 Django 1.5 存储库的构建和 django 注册

> ID：16087735
> 
> 赞同：0
> 
> 时间：2013-04-18T15:58:34.480
> 
> 标签：django, django-registration, buildout, django-1.5

我想使用 Buildout 来获得 Django 1.5 的 django 注册，并且我有一个使用 MyUser(AbstractUser) 的自定义用户。我曾经从食谱 v0.8 中得到它，它很棒。因为，我切换到 1.5，删除我的 UserProfile 并使用这个自定义的 MyUser。

django-registration 不再起作用。我被告知我应该从存储库中获取它，这就是我想要做的。我过去曾使用 mr.developer 来获得更新版本的 django-tastypie，并且我尝试使用 django-registration 重现相同的版本。我在调用 bin/buildout 时出错。让我们首先检查构建配置：

```
[buildout]
extensions = mr.developer
parts = myquivers
eggs =
    django-registration
include-site-packages = false
versions = versions
sources = sources
auto-checkout =
    django-registration

[sources]
django-registration = hg https://bitbucket.org/ubernostrum/django-registration

[versions]
django = 1.5

[myquivers]
recipe = djangorecipe
settings = development
eggs = ${buildout:eggs}
project = myquivers 
```

很简单的配置。它曾经像我说的那样与tastepie一起使用，我正在尝试执行相同的步骤：-python2.7 bootstrap.py-bin/buildout-bin/develop 激活 django-registration-bin/develop checkout django-registration-bin /myquivers syncdb - bin/myquivers runservser

但它在 bin/buildout 步骤失败：

```
$ bin/buildout 
Getting distribution for 'mr.developer'.
Got mr.developer 1.25.
mr.developer: Creating missing sources dir /home/damien/Documents/projects/myquivers/src.
mr.developer: Queued 'django-registration' for checkout.
mr.developer: Cloned 'django-registration' with mercurial.
Develop: '/home/damien/Documents/projects/myquivers/src/django-registration'
Traceback (most recent call last):
  File "/tmp/tmpzLDggG", line 13, in <module>
    exec(compile(open('/home/damien/Documents/projects/myquivers/src/django-registration/setup.py').read(), '/home/damien/Documents/projects/myquivers/src/django-registration/setup.py', 'exec'))
  File "/home/damien/Documents/projects/myquivers/src/django-registration/setup.py", line 30, in <module>
    version=get_version().replace(' ', '-'),
  File "/home/damien/Documents/projects/myquivers/src/django-registration/registration/__init__.py", line 5, in get_version
    from django.utils.version import get_version as django_get_version
ImportError: No module named django.utils.version
While:
  Installing.
  Processing develop directory '/home/damien/Documents/projects/myquivers/src/django-registration'.

An internal error occured due to a bug in either zc.buildout or in a
recipe being used:
Traceback (most recent call last):
  File "/home/damien/Documents/projects/myquivers/eggs/zc.buildout-2.1.0-py2.7.egg/zc/buildout/buildout.py", line 1923, in main
    getattr(buildout, command)(args)
  File "/home/damien/Documents/projects/myquivers/eggs/zc.buildout-2.1.0-py2.7.egg/zc/buildout/buildout.py", line 466, in install
    installed_develop_eggs = self._develop()
  File "/home/damien/Documents/projects/myquivers/eggs/zc.buildout-2.1.0-py2.7.egg/zc/buildout/buildout.py", line 707, in _develop
    zc.buildout.easy_install.develop(setup, dest)
  File "/home/damien/Documents/projects/myquivers/eggs/zc.buildout-2.1.0-py2.7.egg/zc/buildout/easy_install.py", line 871, in develop
    call_subprocess(args)
  File "/home/damien/Documents/projects/myquivers/eggs/zc.buildout-2.1.0-py2.7.egg/zc/buildout/easy_install.py", line 129, in call_subprocess
    % repr(args)[1:-1])
Exception: Failed to run command:
'/usr/bin/python2.7', '/tmp/tmpzLDggG', '-q', 'develop', '-mxN', '-d', '/home/damien/Documents/projects/myquivers/develop-eggs/tmpYM_dR9build' 
```

检查错误，首先django似乎不在系统中，没错，当进入python2.7并尝试>>> import django时，它失败了。但这很正常，这就是为什么我使用构建，而不是安装系统范围的 Django，只是在本地为我的项目安装。

知道如何解决这个问题吗？有没有比使用这个 repo 版本更好的选择？请再次告诉我自定义用户/django 1.5/django-registration。

谢谢！

# c# - 接口中的 C# 参数

> ID：16087740
> 
> 赞同：-5
> 
> 时间：2013-04-18T15:58:43.657
> 
> 标签：c#, interface

```
class Test {
    public Test(string name, string age) {
    }
}

interface ITest
        ????????

class Example: ITest {
    public Example(/* ... */) {
    }
} 
```

那么我应该在我的界面中使用什么来在我的示例中使用与测试中相同的参数？

我想做的事：

*   我有 3 个课程`a`：`b`和`c`。

*   我希望我`c`的继承自`a`和`b`。

但是 C# 不允许你这样做......所以我想使用一个接口。

**编辑** 我的课程是：

*   学生（姓名、年龄、学业）
*   教师（姓名、年龄、班级）
*   在职学生/教师（姓名、年龄、学习/课程、付款）

所以我想在我的工作班中使用其他班级的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T16:03:37.643

接口用作继承它的类的契约。这意味着您希望接口公开的任何公共方法/属性也必须在继承的类中公开。

在上述情况下，您没有在接口中公开任何公共方法/属性。让我给你看一个例子。

```
Interface ITest
{
   void AddPerson(string name, string age);
}

Interface IPerson
{
    string ReturnPersonsAge(string name);
}

/// This must expose the AddPerson method
/// This must also expose the ReturnPersonByAge method
class Example : ITest, IPerson
{
   Dictionary<string, string> people = new Dictionary<string, string>();

   void AddPerson(string name, string age)
   {
      people.Add(name, age);
   }

   string ReturnPersonsAge(string name)
   {
      return people[name];
   }
} 
```

我希望这会有所帮助，但请随时提出更多问题，以便我帮助缩小您的问题范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T16:14:38.480

```
Interface IAClass
{
  void Add(string s);
}
Interface IBClass
{
  void Delete(string m);
}

Class A: IAClass
{
  void Add(string name)
{
  // Your Logic
}
}

Class B: IBClass
{
  void Delete(string name)
{
  // Your Logic
}
}

Class C:IAClass,IBClass
{
     void Add(string name)
{
  // Your Logic
}

 void Delete(string name)
{
  // Your Logic
}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T16:02:50.343

接口不能定义构造函数。当然还有其他方法可以做到这一点，这取决于您想要实现的目标。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-18T16:00:37.927

您可以将它们公开为界面中的属性

```
Interface ITest
{
string Name{get;set;}
string Age{get;set;}
} 
```

# java - exec 不适用于 java 1.7.21，但在 netbeans 中工作正常

> ID：16087745
> 
> 赞同：1
> 
> 时间：2013-04-18T15:59:04.593
> 
> 标签：java, netbeans, jar, runtime, exec

我做了一个小程序，它运行良好，但现在。首先，它mux mkv文件中的xml章节文件，所以我们得到一个muxed mkv文件。前几天我将 java 更新到 1.7.21，我认为这就是为什么它现在不起作用的问题。这有点奇怪，但是当我在 netbeans 中运行时一切都很好，但是当我构建并运行 .jar 文件时，它就不起作用了。它会创建 xml 文件，但不会在 mkv 文件中创建 mux（并且因为没有 muxed 不会删除 xml 文件）。这是代码：（文件名=xml文件路径；mkv=mkv文件路径）

```
 public void muxing() {
    try {
        Runtime rt = Runtime.getRuntime();
        Process p = rt.exec("c:\\Program Files\\MKVtoolnix\\mkvpropedit.exe --chapters \""+filename+"\" \""+mkv+"\"");
        if (p.waitFor()==0) {
            File xmlfile=new File(filename);
            xmlfile.delete();
        }
    }
    catch(Exception e) {
        System.out.println(e.getMessage());
    }
} 
```

该程序适用于 java 1.6，我认为也适用于 1.7.17。Win7 32位。对不起，我的英语不好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T21:06:17.820

Oracle在 Java 7 更新 21（和 6 更新 45）中进行了[重大更改。](http://www.oracle.com/technetwork/java/javase/7u21-relnotes-1932873.html#jruntime)`Runtime.exec()`

如果程序名称中包含空格，则需要在数组中指定命令和参数：

```
Process p = Runtime.getRuntime().exec(new String[] {
    "C:\\Program Files\\MKVtoolnix\\mkvpropedit.exe",
    "--chapters", "\""+filename+"\"", "\""+mkv+"\""}); 
```

另一种选择是使用`java.lang.ProcessBuilder`：

```
Process p = new ProcessBuilder("C:\\Program Files\\MKVtoolnix\\mkvpropedit.exe",
    "--chapters", "\""+filename+"\"", "\""+mkv+"\"").start(); 
```

正如甲骨文所说：

> 需要启动程序名称中带有空格的程序的应用程序应考虑使用`Runtime.exec`允许在数组中指定命令和参数的变体。
> 
> 或者，自 JDK 5.0 以来创建操作系统进程的首选方法是使用`java.lang.ProcessBuilder`. ProcessBuilder 类具有更完整的 API 用于设置环境、工作目录和重定向流程的流。

# php - 不同的包装器背景图像 wordpress 自定义模板

> ID：16087751
> 
> 赞同：0
> 
> 时间：2013-04-18T15:59:17.190
> 
> 标签：php, css, wordpress, templates, wrapper

我需要为自定义模板的包装器加载不同的背景图像，我需要 index.php、archive.php 和 single.php 中的一个。

我尝试制作一个不同的 div，但它不起作用，因为索引、存档和单继承了 header.php，这是包装器 div 所在的位置......

我怎样才能做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T16:02:22.903

不担心 WordPress，但如果您有继承问题，您可以在样式表中提供更强大的规则

```
.classname element {
   /* Styles goes here */
} 
```

另一方面，您也可以使用`!important`声明（除非需要，否则我不喜欢使用）

# c - 无法运行已编译的文件 - bash: ./a.out: Permission denied。（我试过 chmod）

> ID：16087752
> 
> 赞同：6
> 
> 时间：2013-04-18T15:59:18.207
> 
> 标签：c, linux, gcc, ubuntu, permissions

我已经使用 编译了我的 C 源代码`cc test.c`，它确实生成了`a.out`文件。

但是，当我运行它时，出现此错误-

```
bash: ./a.out: Permission denied 
```

我的源不在主目录中，它位于不同的 FAT-32 分区上，所以我使用以下命令安装了代码所在的驱动器 -

```
$ udisks --mount /dev/sda7 --mount-options umask=022
Mounted /org/freedesktop/UDisks/devices/sda7 at /media/48E9-FD53
$ cd /media/48E9-FD53/C 
```

然后我使用编译我的代码`cc`

我也试过了`gcc`。但我仍然得到同样的错误。

然后我做了 - `chmod +x a.out`，仍然是同样的问题。也有（`chmod 755 a.out`）和`chmod u+x a.out`。

我还尝试使用`sudo`.

我也试过 - `sudo chown sannidhya:sannidhya a.out`。

我已经尝试了谷歌搜索后发现的所有东西，但仍然无法正常工作。

如何运行`.out`文件（不将其移动到主目录）？

**注意**- 我使用的是 Ubuntu 12.04 LTS。

但这里有一个**奇怪的事情**是，即使在运行之后`chmod +x a.out`，在运行 -`ls -l a.out`时，我得到 -

```
-rw-r--r-- 1 
```

同样，当我检查 的属性时`a.out`，在**权限**选项卡下，当我检查时`Allow executing file as program`，勾号出现并迅速消失。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-18T16:01:38.323

似乎您已经安装了带有 no-exec 标志的分区。您必须重新安装分区：

```
sudo mount -o remount -o exec /dev/sda7 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-18T16:03:09.720

我猜您是在可能与 Windows 共享的**NTFS/FAT 分区上执行所有这些操作。**chmod 权限对它们**不起作用**。

您应该将其移动到`ext4`（或等效的 linux）分区，然后执行权限更改。

* * *

否则，对于 NTFS/FAT 分区，您在挂载时[**为整个分区设置权限。**](https://askubuntu.com/questions/11840/how-to-chmod-on-an-ntfs-or-fat32-partition)例如，

```
sudo umount /mnt/my_partition
sudo mount -t vfat -o rw,auto,user,fmask=0000,dmask=0000 /dev/sda7 /mnt/my_partition 
```

这将为您`777`提供所有目录和文件（eeeek！），但一旦设置，您无法修改它们，直到您重新安装。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-27T00:13:47.510

这是另一种使用方法`fstab`

```
cat /etc/fstab
LABEL=cloudimg-rootfs   /        ext4   defaults        0 1
D:      /mnt/d  drvfs   defaults,user,metadata,exec     0       0 
```

# excel - Excel VBA - 检查过滤表是否返回任何结果

> ID：16087753
> 
> 赞同：6
> 
> 时间：2013-04-18T15:59:26.127
> 
> 标签：excel, vba

我有一个宏过滤表（在代码中作为 ListObject），然后将 DataBodyRange 中的可见单元格复制到单独的表中。除非过滤操作删除所有数据（即表只有标题行，没有其他内容），否则代码工作正常。

有没有一种简洁的方法来检查是否有任何行可见？如果可能的话，我想避免`on error resume`条款，但我正在努力想其他方法吗？

我在下面包含了一些伪代码来说明我的意思，任何帮助将不胜感激！

亚当

```
If TargetTable.DataBodyRange.VisibleRows.Count > 0 Then
    TargetTable.DataBodyRange.SpecialCells(xlCellTypeVisible).Copy Destination:=OutputPasteRange
End If 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T16:24:59.843

使用 Table 的`Range`对象，而不是`DataBodyRange`. 然后，检查以确保`.SpecialCells(xlCellTypeVisible).Rows.Count > 1`.

```
Sub TestEmptyTable()
Dim tbl As ListObject
Dim outputPasteRange As Range
Dim tblIsVisible As Boolean

Set tbl = ActiveSheet.ListObjects(1)
Set outputPasteRange = Range("B15")

If tbl.Range.SpecialCells(xlCellTypeVisible).Areas.Count > 1 Then
    tblIsVisible = True
Else:
    tblIsVisible = tbl.Range.SpecialCells(xlCellTypeVisible).Rows.Count > 1
End If

If tblIsVisible Then
    tbl.DataBodyRange.SpecialCells(xlCellTypeVisible).Copy _
        Destination:=outputPasteRange

Else:
    MsgBox tbl.Name & " has been filtered to no visible records", vbInformation

End If

End Sub 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-01-19T14:05:23.097

只需检查是否`Range.Height`不是0：

```
If [Table1].Height Then 
```

此外，当大于 0`.SpecialCells(xlCellTypeVisible)`时不需要：`.Height`

```
If TargetTable.DataBodyRange.Height Then TargetTable.DataBodyRange.Copy OutputPasteRange 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-07-26T00:54:00.737

另一种方法是`.SpecialCells(xlCellTypeVisible).Address`与标题行地址进行比较，`tbl.HeaderRowRange.Address`.

这是大卫代码的变体：

```
Sub TestEmptyTable()
    Dim tbl As ListObject
    Dim outputPasteRange As Range
    Dim tblIsVisible As Boolean

    Set tbl = ActiveSheet.ListObjects(1)
    Set outputPasteRange = Range("B15")

    tblIsVisible = tbl.Range.SpecialCells(xlCellTypeVisible).Address <> _ 
        tbl.HeaderRowRange.Address

    If tblIsVisible Then
        tbl.DataBodyRange.SpecialCells(xlCellTypeVisible).Copy _
            Destination:=outputPasteRange
    Else
        MsgBox tbl.Name & " has been filtered to no visible records", vbInformation
    End If
End Sub 
```

# django - django for循环将变量添加在一起

> ID：16087758
> 
> 赞同：1
> 
> 时间：2013-04-18T15:59:39.803
> 
> 标签：django, templates, for-loop, addition

我在模板中用简单的 for 循环编写时遇到问题。这就是我试图用伪代码编写的。

```
total = 0;
for each dividend
  total += dividend.amount;
  echo total;
endfor 
```

但我不知道如何在 django 模板文件中编写 += 行。我知道可能我应该在views.py 中执行此操作，但不知何故我在模板中执行此操作。这是我的详细代码.html：

```
{% with totalDividend=0.0 %}
{% for dividend in stock.dividend_set.all %}    
    [ {{ dividend.date|date:"U000" }} , {{ totalDividend|add:dividend.amount }} ],
{% endfor %}
{% endwith %} 
```

但 totalDividend|add:dividend.amount 不起作用，有零。如何在模板文件中添加这个简单的循环？无论如何，我正在为股息.date 循环。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T16:56:50.597

您可以编写模板标签来设置上下文值：

```
from django.template.base import Library
register = Library()

@register.simple_tag(takes_context=True)
def set_by(context, k, v):
    context[k] = v
    return v

{# template #}    
{% with totalDividend=0.0 %}
{% for dividend in stock.dividend_set.all %}    
    [ {{ dividend.date|date:"U000" }} ,
      {% set_by 'totalDividend' totalDividend|add:dividend.amount %} ],
{% endfor %}
{% endwith %}

# OR
@register.assignment_tag(takes_context=True)
def setBy(context, k, v):
    context[k] = v
    return v

{% with totalDividend=0.0 %}
{% for dividend in stock.dividend_set.all %}    
    [ {{ dividend.date|date:"U000" }} ,
      {% set_by 'totalDividend' totalDividend|add:dividend.amount as totalDividend %}{{ totalDividend }} ],
{% endfor %}
{% endwith %} 
```

# c# - 使用 XML 将数据保存到 MSSQL Db

> ID：16087760
> 
> 赞同：1
> 
> 时间：2013-04-18T15:59:41.097
> 
> 标签：c#, sql-server, xml, asp.net-mvc

我创建了一个 ASP.NET C# MVC 应用程序。我需要在数据库中插入一些记录，下面的代码可以正常工作。我现在要做的是使用 XML 将记录保存在数据库中。

[我在教程](http://www.mssqltips.com/sqlservertip/2118/scripts-to-use-xml-to-insert-and-update-rows-in-a-sql-server-table/)中找到了一个示例，但我无法修改我的代码通过 XML 将数据发送到 MSSQL。

```
 using (SqlCommand c = new SqlCommand("INSERT INTO PPL  (Name, Age) VALUES (@Name,@age)", c)){
                c.Open();
                c.ExecuteNonQuery();} 
```

有人可以在这里帮助我吗？

** 教程[http://www.mssqltips.com/sqlservertip/2118/scripts-to-use-xml-to-insert-and-update-rows-in-a-sql-server-table/](http://www.mssqltips.com/sqlservertip/2118/scripts-to-use-xml-to-insert-and-update-rows-in-a-sql-server-table/)

更新

我创建了一个 SP

```
CREATE PROCEDURE INSERT_PPL

@NAME nchar(200),
@AGE nchar(3),

AS

INSERT INTO PPL(NAME,AGE)

VALUES (@NAME,@AGE) 
```

现在我想使用`EXEC sp_xml_preparedocument @hdoc OUTPUT, @xmlData`添加这一行（根据教程），但不知道如何编辑它以便它在我的程序中工作。

这就是我所做的一切。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T19:17:18.397

我认为一个好的方法是将您的类序列化为 XML 并将它们传递给 SQL。对于服务器部分，开始的路径是：

```
 create table Books (BookID int identity, Title varchar(50), Rating int);

    create table Chapters (BookID int, Title varchar(50), Sequence int);

    go

    create procedure AddBook
        @book xml
    as
    begin

        insert Books (Title, Rating)
        select
            n.value('@Title', 'varchar(50)'),
            n.value('@Rating', 'int')
        from
            @book.nodes('/Book') x(n);

        declare @bookID int;
        set @bookID = scope_identity();

        insert Chapters (BookID, Title, Sequence)
        select
            @bookID,
            n.value('@Title', 'varchar(50)'),
            n.value('@Sequence', 'int')
        from
            @book.nodes('/Book/Chapters/Chapter') x(n);

    end;

    go

    declare @data xml;
    set @data = '
    <Book Title="New Book" Rating="9">
        <Chapters>
            <Chapter Title="Chapter 1" Sequence="1" />
            <Chapter Title="Chapter 2" Sequence="2" />
            <Chapter Title="Chapter 3" Sequence="3" />
        </Chapters>
    </Book>'

    exec AddBook @data;

    select * from Books;
    select * from Chapters; 
```

结果：

```
 BookID      Title                                              Rating
    ----------- -------------------------------------------------- -----------
    1           New Book                                           9

    (1 row(s) affected)

    BookID      Title                                              Sequence
    ----------- -------------------------------------------------- -----------
    1           Chapter 1                                          1
    1           Chapter 2                                          2
    1           Chapter 3                                          3

    (3 row(s) affected) 
```

并且不要忘记将过程语句打包在事务中。

# python - 如何检查 twisted.internet.protocol 实例是否已断开连接

> ID：16087768
> 
> 赞同：5
> 
> 时间：2013-04-18T16:00:00.580
> 
> 标签：python, twisted

我像这样创建与服务器的连接：

```
connection = TCP4ClientEndPoint(reactor, server_host, server_port)
factory = Factory()
factory.protocol = Protocol
protocol = yield connection.connect(factory)
protocol.doSomething()     # returns a deferred 
```

现在，在其他一些方法中，我有这个协议对象的句柄，我想测试协议是否仍然连接，例如：

```
if protocol.isConnected():
    doSomethingElse() 
```

有没有办法做到这一点。我查看了扭曲的文档，找不到相关的方法。在 connectionLost() 回调中设置一个标志是一个选项，但我想知道是否可以避免这样做。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T16:08:16.447

当涉及到存储状态时，Twisted 尝试尽可能轻。就像光秃秃的工厂完全不跟踪他们的孩子一样，`Protocols`对自己知之甚少。它们大多是回调包。

在方法中设置一个标志`connectionLost()`就是这样做的方法。备查：

```
from twisted.internet.protocol import Protocol

class StatefulProtocol(Protocol):
    def __init__(self, factory):
        self.connected = False

    def connectionMade(self):
        self.connected = True

    def connectionLost(self, reason):
        self.connected = False 
```

**编辑**：请注意，这感觉不舒服是有原因的。如果你有一个方法需要问这个问题，你可能在回调链之外工作。如果您只在 暴露的生命周期方法中运行代码`Protocol`，您可能不需要这个。

# python - 如何制作while循环号的命令行参数？

> ID：16087774
> 
> 赞同：0
> 
> 时间：2013-04-18T16:00:25.527
> 
> 标签：python, python-2.7

```
import os

commands = ['uname -v', 'whoami']

a = 0  
numberIterations = 2    # How to make a command line argument of a while loop number?  
while a < numberIterations:  
    print "#--- Iteration: %s ---#" % a  
    i = 0  
    while i < len(commands):  
        print "$", commands[i]  
        os.system(commands[i])  
        i = i + 1  
    print ""  
    a = a + 1 
```

我想以这种格式运行脚本：
`./script.py "numberIterations"`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T16:06:03.793

抓取`str`from`sys.argv`并将其转换为`int`.

```
import sys
try:
  numberIterations = int(sys.argv[1])
except IndexError:
  print "Usage: %s numberIterattions" % sys.argv[0]
  raise SystemExit(1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T16:03:14.920

```
import sys 
```

`sys.argv`包含来自命令行的参数

[http://www.tutorialspoint.com/python/python_command_line_arguments.htm](http://www.tutorialspoint.com/python/python_command_line_arguments.htm)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T16:04:00.160

```
import sys
numberIterations = sys.argv[1] if (len(sys.argv > 0) else _default_value_ 
```

对于更复杂的命令行交互（例如，为命名参数提供支持`./script.py --numIterations=2`），请查看[optparse](http://docs.python.org/2/library/optparse.html)模块或[本教程](http://www.tutorialspoint.com/python/python_command_line_arguments.htm)

如果使用 python >= 2.7 使用[argparse](http://docs.python.org/2/library/argparse.html#module-argparse)模块而不是 optparse 因为 optparse 自 python 2.7 以来已被弃用

# javascript - IE8 只跳回到上一页的顶部，而不是我以前的位置（但只有在 JS 开启的情况下）

> ID：16087775
> 
> 赞同：7
> 
> 时间：2013-04-18T16:00:25.977
> 
> 标签：javascript, internet-explorer, internet-explorer-8, cross-browser

我有一个可怕的、分散的页面，里面有很多 JavaScript：

它有一个列表视图，如果您愿意，可以详细查看列表中的一项。

现在的问题是，如果我想通过使用浏览器后退按钮从详细信息视图返回到列表视图，我会得到不同的结果。

在 Chrome 和 Firefox 中，即使在 IE7 中，我也会在我点击的地方结束，但在 IE8 中并非如此。

更令人困惑的是，如果我关闭 JavaScript，它也适用于 IE8。

现在的问题是我现在不知道在哪里搜索。有人知道这个问题，或者至少知道可能影响这个问题的 JavaScript 方法或函数吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-08T14:30:08.400

没有代码很难提供明确的答案。基于过去使用 IE 的经验的初步答案：

IE 有不同的行为，尤其是 IE8，它是旧版本和除标准版本之外的所有版本 [IE6-，IE7] 的交叉点，而新的 IE9 则更好地遵守标准。特别是在 Javascript 中，与非 IE 浏览器相比，IE 可能会比较挑剔。

如果在您离开页面（由于单击链接）或返回（更容易发现）时触发 JS 错误，则可能会发生这种*返回行为*

*   检查在页面底部离开（或返回）时是否发生错误
*   *点击*操作可能会延迟，这要归功于`setTimeout`哪个功能将设置`window.location.href`为让您有足够的时间在离开页面之前发现错误
*   如果重定向是“手动的”（比如`window.location.href=`相对于简单的`<a>`标签）尝试在`try {} catch`点击元素后运行的代码周围添加一个（比如[这个*onbeforeunload*错误](https://stackoverflow.com/questions/8264566/onbeforeunload-dialog-cancellation-with-window-location-href-ie8-bug)）。

# iphone - 检测 iOS 应用的 AppStore 安装

> ID：16087779
> 
> 赞同：6
> 
> 时间：2013-04-18T16:00:42.960
> 
> 标签：iphone, ios, objective-c, app-store, detection

我需要在我的应用程序中实现自定义日志记录。

为此，我需要检测当前版本的应用程序是否已从应用商店安装，或者正在从 xcode 运行，或者是 TestFlight 版本。

根据安装源，应用程序中有什么不同吗？

我不想在开发环境中有不同的东西。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-18T17:07:44.760

您可以通过从应用程序包中读取 Embedded.mobileprovision 文件来获得其中的一部分：

```
NSString *provisionPath = [[NSBundle mainBundle] pathForResource:@"embedded" ofType:@"mobileprovision"]; 
```

如果那不存在，那么您正在应用商店构建中。

如果确实存在，您需要找出调试配置文件和临时配置文件之间的一些区别，并查找它以确定您所在的版本。

因为 XCode 会在 Debug 配置中自动设置带有“DEBUG”标志的应用程序，这在 Release 中没有设置（默认情况下用于 AdHoc 构建），您最好禁用应用商店构建中的日志记录并确定级别基于 DEBUG 宏标志的日志记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T16:45:18.697

您可以使用定义宏的构建配置来让您知道您已为 testflight 构建。

例如，我们在调试版本中设置了一个宏 USE_TESTFLIGHT，在我们的代码中我们这样做：

```
#ifdef USE_TESTFLIGHT
//do something test-flight specific
[TestFlight takeOff:kTestFlightAppToken];
#endif 
```

您可以创建新的构建配置，根据您编译/分发应用程序的方式设置不同的宏，并使用 ifdef 基于这些配置执行不同的任务。

# jquery - 使用 jQuery 的 Google URL Shortener 错误请求

> ID：16087786
> 
> 赞同：2
> 
> 时间：2013-04-18T16:01:12.857
> 
> 标签：jquery, google-url-shortener

我目前在使用 Google URL 缩短器缩短 URL 时遇到一些问题。

我正在使用 CoffeeScript，但生成的代码看起来不错。这是我所做的：

```
shortenUrl = (longUrl) ->
  $.ajax(
    type: 'POST'
    url: "https://www.googleapis.com/urlshortener/v1/url?key=myAPIkey" 
    data:
        longUrl: longUrl
    dataType: 'json'
    success: (response) -> 
      console.log response.data
    contentType: 'application/json'
 ); 
```

生成的代码是：

```
shortenUrl = function(longUrl) {
  return $.ajax(console.log({
    longUrl: longUrl
  }), {
  type: 'POST',
  url: "https://www.googleapis.com/urlshortener/v1/url?key=myAPIkey",
  data: {
    longUrl: longUrl
  },
  dataType: 'json',
  success: function(response) {
    return console.log(response.data);
  },
  contentType: 'application/json'
}); 
```

};

这是我在 JS Chrome 控制台中遇到的错误：

```
POST https://www.googleapis.com/urlshortener/v1/url?key=myAPIkey 400 (Bad Request) 
```

（确切地说，显然存在 Parse 错误）

请注意，当我执行这样的 curl 请求时：

```
curl https://www.googleapis.com/urlshortener/v1/url?key=myAPIkey \
    -H 'Content-Type: application/json' \
    -d '{longUrl: "http://www.google.com/"}' 
```

它就像一个魅力。我得到：

```
{
    "kind": "urlshortener#url",
    "id": "http://goo.gl/fbsS",
    "longUrl": "http://www.google.com/"
} 
```

那么，这个 jQuery 有什么问题呢？（我使用的是 1.9.x 版本）

编辑：这是使用 jQuery 的正确方法：

```
shortenUrl = function(longUrl) {
    return $.ajax(console.log({
      longUrl: longUrl
    }), {
    type: 'POST',
    url: "https://www.googleapis.com/urlshortener/v1/url?key=myAPIkey",
    data: '{ longUrl: longUrl }', // <-- string here
    dataType: 'json',
    success: function(response) {
      return console.log(response.data);
    },
    contentType: 'application/json'
  });
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T16:06:16.860

好的..我刚刚发现我的错误在哪里。抱歉，我无法想象 jQuery 是如此 $%@£...

我传递的数据变量实际上是一个 Js 对象（我假设它在服务器上被解释为 JSON ......它不是）

数据参数必须是一个字符串，包含“普通”json。

现在它可以工作了:)

# for-loop - 在 for 循环中使用 mv 和 sed 批量重命名文件会导致退出代码 64 - 如何更正脚本？

> ID：16087787
> 
> 赞同：0
> 
> 时间：2013-04-18T16:01:14.690
> 
> 标签：for-loop, sed, terminal, echo, mv

我正在尝试重命名数百个文件夹以删除以文件夹名称为前缀的数字。我似乎已经完成了大部分工作，但是我的脚本还不能正常工作。当我`echo`使用脚本创建的命令而不是运行这些命令时，一切看起来都很好。剧本：

```
for file in *
do
    echo mv "'"$file"'" $(echo "'"$file"'" | sed 's/[0-9]\{1,3\} //')
done 
```

返回多行：

```
mv '123 filename' 'filename'
mv '99 another name' 'another name'
. . . etc. 
```

如果我采用这些行之一并在命令行上使用，则该文件夹将被适当地重命名。但是，如果我删除`echo`以实际运行这些`mv`命令，它们将不起作用。相反，`mv`当您以某种方式错误地输入命令时，会打印出使用提醒。

为什么输出命令单独工作，而不是在 for 循环中？如何更正此脚本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T16:48:07.213

你的引用看起来很奇怪。变量应该用双引号括起来，不多也不少。

此外，您应该避免脆性`$(echo ... | sed ...)`；这可以在纯 shell 中完成：

```
for f in *; do
    g=${f#[0-9]}; g=${g#[0-9]}; g=${g#[0-9]}
    echo mv "$f" "${g# }"
done 
```

`sh -x`如果您想验证`echo`引用是否正确，请运行。然后删除`echo`实际移动。

复制/粘贴时输出有效的原因是，从`echo`. 一个（有风险的、复杂的）解决方法是`echo`用`eval`.

# jfreechart - JFreeChart LogAxis 频率/电阻乘数

> ID：16087791
> 
> 赞同：1
> 
> 时间：2013-04-18T16:01:30.763
> 
> 标签：jfreechart, number-formatting, linechart, units-of-measurement

我试图弄清楚如何根据乘数动态格式化折线图轴上的值。

我将 LogAxis 用于 X 轴和 Y 轴，如下所示：

```
 final LogAxis rangeAxis = new LogAxis(valueAxisLabel);
  rangeAxis.setStandardTickUnits(LogAxis.createLogTickUnits(Locale.ENGLISH));
  rangeAxis.setRange(0.01, 10.0);  //10 mOhms to 10 Ohms
  plot.setRangeAxis(rangeAxis);

  final LogAxis domainAxis = new LogAxis(frequencyAxisLabel);
  domainAxis.setStandardTickUnits(LogAxis.createLogTickUnits(Locale.ENGLISH));
  domainAxis.setRange(100, 10000000); //100Hz to 10MHz
  plot.setDomainAxis(domainAxis); 
```

我目前在 Y 轴上有以下值：
0.01、0.1、1、10
但希望它显示为
10mOhm、100mOhm、1Ohm、10Ohm

在 X 轴上，我有
100、1,000、10,000、100,000、1,000,000、10,000,000
但希望看到
100Hz、1kHz、10kHz、100kHz、1MHz、10MHz

我知道您可以覆盖`NumberFormat`轴上的 used，但我还没有找到一种方法来`NumberFormat`根据这样的值动态覆盖 。这可能吗？我需要扩展`NumberFormat`才能做到这一点吗？

编辑：根据接受的答案，我扩展`NumberFormat`如下（请注意，实施并不完整，而是为了我老板的快速演示目的而被黑客入侵）

```
public class UnitNumberFormat extends NumberFormat
{
   /**
    * 
    */
   private static final long serialVersionUID = -8544764432101798895L;

   private UnitValue unitValue;

   public UnitNumberFormat(UnitValue unitValue)
   {
      super();
      this.unitValue = unitValue;
   }

   /*
    * (non-Javadoc)
    * @see java.text.NumberFormat#format(double, java.lang.StringBuffer,
    * java.text.FieldPosition)
    */
   @Override
   public StringBuffer format(double number, StringBuffer toAppendTo, FieldPosition pos)
   {
      StringBuffer formattedValue = new StringBuffer();
      BigDecimal bd = new BigDecimal(number);
      BigDecimal multiplier = new BigDecimal(1);
      String multiplierString = "";
      if(number < 1 && number > 0)
      {
         multiplier = new BigDecimal(1000);
         multiplierString = "m";
      }
      else if(number < 1000 && number >= 1)
      {
         multiplier = new BigDecimal(1);
         multiplierString = "";
      }
      else if(number < 1000000 && number >= 1000)
      {
         multiplier = new BigDecimal(1\. / 1000);
         multiplierString = "k";
      }
      else if(number < 1000000000 && number >= 1000000)
      {
         multiplier = new BigDecimal(1\. / 1000000);
         multiplierString = "M";
      }
      else
      {
         throw new NumberFormatException("This formatter doesn't yet support values beyond Mega");
      }

      bd = bd.multiply(multiplier).round(new MathContext(1, RoundingMode.HALF_UP));

      formattedValue.append(bd.toPlainString());
      formattedValue.append(" ");
      formattedValue.append(multiplierString);
      formattedValue.append(this.unitValue.getUnit());

      return formattedValue;
   }

   /*
    * (non-Javadoc)
    * @see java.text.NumberFormat#format(long, java.lang.StringBuffer,
    * java.text.FieldPosition)
    */
   @Override
   public StringBuffer format(long number, StringBuffer toAppendTo, FieldPosition pos)
   {
      return null;
   }

   /*
    * (non-Javadoc)
    * @see java.text.NumberFormat#parse(java.lang.String,
    * java.text.ParsePosition)
    */
   @Override
   public Number parse(String source, ParsePosition parsePosition)
   {
      return null;
   }

} 
```

如下`UnitValue`：

```
public enum UnitValue {
   HERTZ("Hz"),

   OHMS("Ω"),

   ;

   private final String unit;

   private UnitValue(String unit)
   {
      this.unit = unit;
   }

   /**
    * @return the unit
    */
   public String getUnit()
   {
      return unit;
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T16:17:40.347

Yes you do need to subclass `NumberFormat` there is an example [here](https://stackoverflow.com/a/11564855/68969)

# css - 对齐div的文本中心

> ID：16087792
> 
> 赞同：1
> 
> 时间：2013-04-18T16:01:35.470
> 
> 标签：css

您好这里有一个小问题，我正在努力解决。尝试垂直对齐时没有任何乐趣并且已经没有想法了。

[您可以在此处](http://onlinebanter.com/)查看为什么首页会被屏蔽

当标题仅占一行时，图片下方的标题位于该区域的顶部。我希望让它出现在图片和下面的组标题之间的那个区域的中间。有人可以提出任何建议吗？

谢谢

```
 ul.views-fluid-grid-items-center li.views-fluid-grid-item {
        background: none repeat scroll 0 0 black;
        position: relative;
    }

    li.views-fluid-grid-item .views-field-title {
        padding: 0 4px;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T16:06:03.653

正如我所标记的，您网站中所有黑色部分的高度都是固定的，只需与您`display: table-cell`一起使用就可以了`vertical-align: middle`

```
li.views-fluid-grid-item .views-field-title a {
    color: #AAAAAA;
    display: table-cell;
    height: 40px; /* Fix appropriate height here */
    vertical-align: middle;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T16:06:16.733

你可以添加`line-height: 37px;`到`li.views-fluid-grid-item .views-field-title a`

但是你将不得不切断文本进入两行..

编辑：我将把它留在这里以供参考，但我更喜欢 Alien 先生的回答

# ios - CAEmitterLayer 未显示

> ID：16087793
> 
> 赞同：3
> 
> 时间：2013-04-18T16:01:36.930
> 
> 标签：ios, objective-c, drawrect, caemitterlayer, caemittercell

我只是添加一个`UIView`到 my`storyboard view controller`然后创建一个`UIView`类来显示粒子效果。我将`UIView's`类名更改为我创建的自定义类的名称。我在课堂上使用的代码`UIView`没有显示我期望的粒子效果。代码如下：

```
- (void)drawRect:(CGRect)rect
{
    // Drawing code

        CGRect viewBounds = rect;

    fireworksEmitter.emitterPosition = CGPointMake(viewBounds.size.width/2.0, viewBounds.size.height);
    fireworksEmitter.emitterSize    = CGSizeMake(viewBounds.size.width/2.0, 0.0);
    fireworksEmitter.emitterMode    = kCAEmitterLayerOutline;
    fireworksEmitter.emitterShape   = kCAEmitterLayerLine;
    fireworksEmitter.renderMode     = kCAEmitterLayerAdditive;
    fireworksEmitter.seed = (arc4random()%100)+1;

    // Create the rocket
    CAEmitterCell* rocket = [CAEmitterCell emitterCell];

    rocket.birthRate        = 1.0;
    rocket.emissionRange    = 0.25 * M_PI;  // some variation in angle
    rocket.velocity         = 380;
    rocket.velocityRange    = 100;
    rocket.yAcceleration    = 75;
    rocket.lifetime         = 1.02; // we cannot set the birthrate < 1.0 for the burst

    rocket.contents         = (id) [[UIImage imageNamed:@"DazRing"] CGImage];
    rocket.scale            = 0.2;
    rocket.color            = [[UIColor redColor] CGColor];
    rocket.greenRange       = 1.0;      // different colors
    rocket.redRange         = 1.0;
    rocket.blueRange        = 1.0;
    rocket.spinRange        = M_PI;     // slow spin

    // the burst object cannot be seen, but will spawn the sparks
    // we change the color here, since the sparks inherit its value
    CAEmitterCell* burst = [CAEmitterCell emitterCell];

    burst.birthRate         = 1.0;      // at the end of travel
    burst.velocity          = 0;
    burst.scale             = 2.5;
    burst.redSpeed          =-1.5;      // shifting
    burst.blueSpeed         =+1.5;      // shifting
    burst.greenSpeed        =+1.0;      // shifting
    burst.lifetime          = 0.35;

    // and finally, the sparks

    CAEmitterCell* spark = [CAEmitterCell emitterCell];

    spark.birthRate         = 400;
    spark.velocity          = 125;
    spark.emissionRange     = 2* M_PI;  // 360 deg
    spark.yAcceleration     = 75;       // gravity
    spark.lifetime          = 3;

    spark.contents          = (id) [[UIImage imageNamed:@"DazStarOutline"] CGImage];
    spark.scaleSpeed        =-0.2;
    spark.greenSpeed        =-0.1;
    spark.redSpeed          = 0.4;
    spark.blueSpeed         =-0.1;
    spark.alphaSpeed        =-0.25;
    spark.spin              = 2* M_PI;
    spark.spinRange         = 2* M_PI;

    // putting it together
    fireworksEmitter.emitterCells   = [NSArray arrayWithObject:rocket];
    rocket.emitterCells             = [NSArray arrayWithObject:burst];
    burst.emitterCells              = [NSArray arrayWithObject:spark];
    [self.layer addSublayer:fireworksEmitter];

    [self setNeedsDisplay];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T16:55:17.463

您的代码看起来不错，所以这里有一些建议

*   你没有显示你在哪里创建`fireworksEmitter`。如果你不这样做`alloc`并且`init`它在某个地方，你将得到一个没有错误或警告的空白屏幕。

*   如果您没有名为“DazRing”和“DazStarOutline”（检查拼写）的（alpha 通道）资产，您将看到没有错误或警告的空白屏幕

虽然这段代码将从内部运行`drawRect`，但这不是一个合适的地方。您没有（直接）进行任何绘图 - 而是在设置和添加图层。你当然不应该`setNeedsDisplay`从内部打电话`drawRect`。如果您将它（例如）放入`awakeFromNib`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T16:56:15.037

1）从drawRect中删除所有这些代码，并将其放入UIView子类的init方法中，或者，因为您使用的是故事板，所以将其放入awakeFromNib中：

```
- (void)awakeFromNib {
    [super awakeFromNib];

    CGRect viewBounds = rect;

    fireworksEmitter = (CAEmitterLayer*)self.layer;
    fireworksEmitter.emitterPosition = CGPointMake(viewBounds.size.width/2.0, viewBounds.size.height);
    fireworksEmitter.emitterSize    = CGSizeMake(viewBounds.size.width/2.0, 0.0);
    fireworksEmitter.emitterMode    = kCAEmitterLayerOutline;
    fireworksEmitter.emitterShape   = kCAEmitterLayerLine;
    fireworksEmitter.renderMode     = kCAEmitterLayerAdditive;
    fireworksEmitter.seed = (arc4random()%100)+1;

    // Create the rocket
    CAEmitterCell* rocket = [CAEmitterCell emitterCell];

    rocket.birthRate        = 1.0;
    rocket.emissionRange    = 0.25 * M_PI;  // some variation in angle
    rocket.velocity         = 380;
    rocket.velocityRange    = 100;
    rocket.yAcceleration    = 75;
    rocket.lifetime         = 1.02; // we cannot set the birthrate < 1.0 for the burst

    rocket.contents         = (id) [[UIImage imageNamed:@"DazRing"] CGImage];
    rocket.scale            = 0.2;
    rocket.color            = [[UIColor redColor] CGColor];
    rocket.greenRange       = 1.0;      // different colors
    rocket.redRange         = 1.0;
    rocket.blueRange        = 1.0;
    rocket.spinRange        = M_PI;     // slow spin

    CAEmitterCell* burst = [CAEmitterCell emitterCell];
    burst.birthRate         = 1.0;      // at the end of travel
    burst.velocity          = 0;
    burst.scale             = 2.5;
    burst.redSpeed          =-1.5;      // shifting
    burst.blueSpeed         =+1.5;      // shifting
    burst.greenSpeed        =+1.0;      // shifting
    burst.lifetime          = 0.35;

    CAEmitterCell* spark = [CAEmitterCell emitterCell];
    spark.birthRate         = 400;
    spark.velocity          = 125;
    spark.emissionRange     = 2* M_PI;  // 360 deg
    spark.yAcceleration     = 75;       // gravity
    spark.lifetime          = 3;

    spark.contents          = (id) [[UIImage imageNamed:@"DazStarOutline"] CGImage];
    spark.scaleSpeed        =-0.2;
    spark.greenSpeed        =-0.1;
    spark.redSpeed          = 0.4;
    spark.blueSpeed         =-0.1;
    spark.alphaSpeed        =-0.25;
    spark.spin              = 2* M_PI;
    spark.spinRange         = 2* M_PI;

    fireworksEmitter.emitterCells   = [NSArray arrayWithObject:rocket];
    rocket.emitterCells             = [NSArray arrayWithObject:burst];
    burst.emitterCells              = [NSArray arrayWithObject:spark];
} 
```

# ruby-on-rails - Mysql2::Error: 不正确的日期值：'--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess

> ID：16087802
> 
> 赞同：1
> 
> 时间：2013-04-18T16:02:08.420
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

我从 sqllite 迁移到 mysql（从一开始就使用 mysql 重新创建了相同的工作区。没有进行任何迁移）。

该代码在 sqllite 上运行良好，但在 mysql 上出错。这就是我的 database.yml 的样子：

```
development:
  adapter: mysql2
  database: dev
  username: root
  password: 
  host: localhost
  pool: 5 
```

我的代码通过视图中的日期选择获取日期：

```
<%= date_select(:dob, NIL, :use_short_month => true, :start_year => Time.now.year - 100,
                       :end_year => Time.now.year, :order => [:day, :month, :year]) %> 
```

该模型如下所示：

```
t.string   "firstName"
t.string   "lastName"
t.string   "Email"
t.string   "password"
t.date     "dob" 
```

但是通过控制器中的以下代码插入失败：

```
@user.dob = params[:dob] 
```

这是我得到的错误：

```
Mysql2::Error: Incorrect date value: '--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess
(1i): '2013'
(2i): '4'
(3i): '18'
' for column 'dob' at row 1: INSERT INTO `users` (`Email`, `created_at`, `dob`, `firstName`, `lastName`, `password`, `personalEmail`, `updated_at`) VALUES ('abc@xyz.com', '2013-04-18 15:46:26', '--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess\n(1i): \'2013\'\n(2i): \'4\'\n(3i): \'18\'\n', 'ABC', 'XYZ', 22, NULL, 'ab4d8d2a5f480a137067da17100271cd176607a1', '2013-04-18 15:46:26') 
```

我用谷歌搜索了相当大的范围，但找不到任何对此的参考。感谢任何线索或帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T16:09:58.077

问题是多参数的事情。rails date_select helper 生成 3 个下拉菜单，将 3 个不同的参数传递给您的控制器。如果您在控制器中使用质量分配，rails 会神奇地将这 3 个值转换为 1 个日期值。这篇（相当旧的）博客文章展示了一种无需批量分配的方法：[http](http://www.springenwerk.com/2008/05/set-date-attribute-from-dateselect.html) ://www.springenwerk.com/2008/05/set-date-attribute-from-dateselect.html 但是，这篇文章相当陈旧，现在可能（！）有更好的方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T16:07:15.613

对我来说很清楚的是 dat 对象的 mysql 数据库格式不正确。尝试类似的东西

```
@user.dob = params[:dob].to_date 
```

尝试以不同的方式格式化日期对象，看看什么是有效的。它也可能有助于打开`rails console`并尝试手动解决问题。让我知道情况如何。

-布赖恩

# windows-services - Windows Installer (MSI 5.0) 在“MsiConfigureServices”操作期间失败并出现错误 1939

> ID：16087805
> 
> 赞同：2
> 
> 时间：2013-04-18T16:02:13.263
> 
> 标签：windows-services, windows-installer

尝试使用 Windows 服务配置的新 MSI 5.0 功能（使用表：MsiServiceConfig / MsiServiceConfigFailureActions）安装安装程序包时，服务配置失败并导致回滚。

该服务本身与“LocalSystem”帐户下的相同软件包一起安装。关于 MSDN，这些功能确实有一些限制，但我不确定它们是否适用于这里：

> “Windows Installer 的服务配置功能无法配置网络服务帐户、安装共享服务主机 (svchost) 进程或重新启动在安装过程中停止的服务”（请参阅[​​ http://msdn.microsoft.com/en-us/库/windows/desktop/dd408113(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd408113(v=vs.85).aspx) )

我已经尝试了对失败操作计数和类型的几种变体。使用 SC_ACTION_NONE 或 SC_ACTION_RUN_COMMAND 操作确实有效并导致安装成功。

你能告诉我，为什么 SC_ACTION_RESTART 或 SC_ACTION_REBOOT 不能正常工作吗？

**MSI 日志文件摘录：**

```
Action 08:21:51: InstallServices. Installing new services
MSI (s) (78:74) [08:21:51:828]: Executing op: ProgressTotal(Total=5,Type=1,ByteEquivalent=1300000)
MSI (s) (78:74) [08:21:51:859]: Executing op: ServiceInstall(Name=PCSProxy,DisplayName=Protection Communication System Proxy,ImagePath="C:\Program Files (x86)\Protection Communication System\Pcs.Proxy.Service.exe",ServiceType=16,StartType=2,ErrorControl=32769,,Dependencies=[~],,,Password=**********,Description=Provides limited write access to the PPS,,)
InstallServices: Service: 
MSI (s) (78:74) [08:21:52:218]: Executing op: ActionStart(Name=MsiConfigureServices,,)
Action 08:21:52: MsiConfigureServices. 
MSI (s) (78:74) [08:21:52:280]: Executing op: ProgressTotal(Total=1,Type=1,ByteEquivalent=1300000)
MSI (s) (78:74) [08:21:52:280]: Executing op: ServiceConfigure(,Name=PCSProxy,Event=1,ConfigType=4,Argument=1)
MSI (s) (78:74) [08:21:52:280]: Changing configuration of service PCSProxy.
MSI (s) (78:74) [08:21:52:280]: Changed configuration of service PCSProxy with ConfigType SERVICE_CONFIG_FAILURE_ACTIONS_FLAG
MSI (s) (78:74) [08:21:52:358]: Done changing configuration of service PCSProxy
MSI (s) (78:74) [08:21:52:358]: Executing op: ProgressTotal(Total=1,Type=1,ByteEquivalent=1300000)
MSI (s) (78:74) [08:21:52:358]: Executing op: ServiceConfigureFailureAction(,Name=PCSProxy,Event=1,ResetPeriod=259200,RebootMessage=Rebooting the system,Command=cmd.exe,Actions=1[~]2[~]3,DelayActions=60000[~]60000[~]60000)
MSI (s) (78:74) [08:21:52:374]: Changing configuration of failure action for service PCSProxy.
MSI (s) (78:74) [08:21:52:374]: Error: 5\. Failed to change current configuration of failure action for service PCSProxy
MSI (s) (78:74) [08:21:52:374]: Failed to change configuration of failure action for service PCSProxy
Error 1939\. Service 'Protection Communication System Proxy' (PCSProxy) could not be configured.  This could be a problem with the package or your permissions. Verify that you have sufficient privileges to configure system services.
MSI (s) (78:74) [08:22:04:791]: Product: Protection Communication System -- Error 1939\. Service 'Protection Communication System Proxy' (PCSProxy) could not be configured.  This could be a problem with the package or your permissions. Verify that you have sufficient privileges to configure system services.

Action ended 08:22:04: InstallFinalize. Return value 3.

[...]

Property(C): VersionNT = 602
Property(C): VersionDatabase = 500
Property(C): VersionMsi = 5.00
Property(C): VersionNT64 = 602
Property(C): WindowsBuild = 9200
Property(C): ServicePackLevel = 0
Property(C): ServicePackLevelMinor = 0
Property(C): MsiNTProductType = 3
Property(C): UserLanguageID = 1031
Property(C): ComputerName = WIN-D4AOTTU5CRV
Property(C): SystemLanguageID = 1031
Property(C): Time = 07:33:17
Property(C): Date = 18.04.2013
Property(C): MsiNetAssemblySupport = 4.0.30319.17929
Property(C): MsiWin32AssemblySupport = 6.2.9200.16384 
```

# c++ - Boost MPL 嵌套 lambda

> ID：16087806
> 
> 赞同：7
> 
> 时间：2013-04-18T16:02:13.417
> 
> 标签：c++, boost-mpl

我一直在尝试掌握[Boost MPL](http://www.boost.org/libs/mpl/)。

作为简单的练习，我尝试了：

```
typedef vector_c<int, 1, 2, 3, 4, 5>::type example_list;

typedef transform<example_list, times<_, int_<2> > >::type doubled_example_list;

typedef transform<example_list, negate<_> >::type negated_example_list;

BOOST_STATIC_ASSERT((at_c<negated_example_list, 2>::type::value==-3));
BOOST_STATIC_ASSERT((at_c<doubled_example_list, 4>::type::value==10)); 
```

这些都工作正常。但是，以下尝试无法编译：

```
typedef transform<_, negate<_> > negate_a_list;

typedef apply<negate_a_list, example_list>::type negated_example_list_2;

BOOST_STATIC_ASSERT((at_c<negated_example_list_2, 2>::type::value==-3)); 
```

我认为这与占位符的范围有关`negate_a_list`，但是我不知道如何解决它。有任何想法吗？我还怀疑我对 MPL 的语法和语义的一些假设是有缺陷的。我将不胜感激有关探索 MPL 的任何提示。

PS这是上述代码的序言：

```
#include <boost/mpl/vector_c.hpp>
#include <boost/mpl/transform.hpp>
#include <boost/static_assert.hpp>
#include <boost/mpl/placeholders.hpp>
#include <boost/mpl/times.hpp>
#include <boost/mpl/size_t.hpp>
#include <boost/mpl/apply.hpp>
#include <boost/mpl/lambda.hpp>
#include <boost/mpl/negate.hpp>
#include <boost/mpl/at.hpp>

using namespace boost::mpl;
using namespace boost::mpl::placeholders; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T16:31:38.767

感谢 Luc Touraille 对我的问题的评论，Boost 邮件列表提供[了答案](http://lists.boost.org/Archives/boost/2012/01/189614.php)。此代码有效：

```
typedef transform<_, lambda<negate<_> >::type > negate_a_list;

typedef apply<negate_a_list, example_list>::type negated_example_list_2;

BOOST_STATIC_ASSERT((at_c<negated_example_list_2, 2>::type::value==-3)); 
```

请注意添加了`lambda<...>::type`对 lambda 表达式的环绕。这足以限制占位符的范围。

# c - 为什么我的代码多次而不是 1 次打印整个字符串？

> ID：16087807
> 
> 赞同：0
> 
> 时间：2013-04-18T16:02:15.447
> 
> 标签：c, pointers, command-line, input, command-line-arguments

我是 C 新手。在阅读输入和指针时，我在理解一些基本材料时遇到了一些麻烦。我想使用 nextChar() 函数来读取和打印我在命令行中输入的字符串的每个字符。我尝试输入“hello”..它显示“hello”6 次。有人能告诉我为什么会这样吗？我该如何解决？感谢您的时间！

```
#include <stdio.h>
#include <assert.h>
char nextChar(char* ptr)
{
    static int i = -1;
    char c;
    ++i;
    c = *(s+i);
    if ( c == '\0' )
        return '\0';
    else
        return c;
}

void display(char* ptr)
{
    assert(ptr != 0);

    do
    {
        printf("%s", ptr);

    } while (nextChar(ptr));
}

int main(int argc, const char * argv[])
{
    char* ptr=argv[1];

    display(ptr);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T16:04:15.817

`%s`格式说明符指示打印`printf`一个字符数组，直到找到一个空终止符。如果`%c`要打印单个`char`. 如果这样做，您还需要使用`nextChar`.

或者，更简单地说，您可以更改`display`为直接迭代字符串中的字符

```
void display(char* ptr)
{
    assert(ptr != 0);

    do
    {
        printf("%c", *ptr); // print a single char
        ptr++; // advance ptr by a single char

    } while (*ptr != '\0');
} 
```

或者，等效但不太明显的指针算术

```
void display(char* ptr)
{
    int index = 0;
    assert(ptr != 0);

    do
    {
        printf("%c", ptr[index]);
        index++;

    } while (ptr[index] != '\0');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T16:12:18.210

nextchar 函数可以减少：

```
char nextChar(char* ptr)
{
    static int i = 0;
    i++;
    return (*(ptr+i));
} 
```

并显示到

```
void display(char* ptr)
{
    assert(ptr != 0);
    char c = *ptr;

    do
    {
        printf("%c", c);

    } while (c = nextChar(ptr));
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T22:57:43.137

```
#include <stdio.h>
#include <assert.h>

char nextChar(const char* ptr){
    static int i = 0;
    char c;

    c = ptr[i++];
    if ( c == '\0' ){
        i = 0;
    }
    return c;
}

void display(const char* ptr){
    char c;
    assert(ptr != 0);

    while(c=nextChar(ptr)){
        printf("%c", c);
    }
}

int main(int argc, const char * argv[]){
    const char* ptr=argv[1];

    display(ptr);
    return 0;
} 
```

# vba - excel vba使用变量字符串按名称激活选项卡

> ID：16087810
> 
> 赞同：0
> 
> 时间：2013-04-18T16:02:22.857
> 
> 标签：vba, variables, excel

有人可以帮忙吗？我有一种感觉，这种类型的问题很简单，并且已经回答了很多次，但我似乎找不到有效的解决方案。遇到错误 9：下标超出范围。

令人沮丧的很大一部分是由于代码的简单性。我有一个带有名为“Dist.12345-Store.67890”的选项卡的电子表格。如果我使用以下命令，我有 VBA 代码将成功打开该选项卡：

```
Sub test()
Worksheets("Dist.12345-Store.67890").visible = true
End sub 
```

但是，我不想在 31 个不同的子代码中硬编码这个字符串 31 次，而是想把一个字符串放在一起作为变量 storeselect2，并将这个字符串作为要出现的工作表。但我得到那个错误9 ...

```
Sub test()

Dim storeselect2 As String

storeselect2 = "Dist." & ActiveCell.Offset(0, -1).Value & "-Store." & ActiveCell.Value
` the storeselect2 is now = "Dist.12345-Store.67890" `

Sheets(storeselect2).Visible = True  `this is where error 9 occurs`

End Sub 
```

使用字符串引用代码中的选项卡名称时，如何获取现有选项卡？是因为字符串来自一个选项卡并试图打开另一个选项卡吗？

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T18:17:19.023

这是你需要写的

```
 Dim storeselect2 As String
 Dim pig, dog, cat, bird As String
 pig = "Dist."
 dog = ActiveCell.Offset(0, -1).Value
 cat = "-Store."
 bird = ActiveCell.Value
 storeselect2 = pig & dog & cat & bird
 Sheets(storeselect2).Visible = False 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-05T21:30:08.117

对于那些遇到这个问题的人（来自谷歌？）寻求如何使用变量字符串按名称激活选项卡的直接答案：

```
Sheets(23).Activate 
```

或者

```
Worksheets(1).Select 
```

或者

```
Sheets("mytabname").Activate 
```

无需激活工作表即可以编程方式对其进行操作，您也可以选择它：

```
Sheets("mytabname").Select 
```

[这个答案](https://stackoverflow.com/questions/7180008/excel-select-vs-activate/7185748#7185748)解释了在操作它之前没有必要选择或激活工作表。做任何一个都会减慢代码的速度。但是，我（和其他人）遇到过这样的情况，首先选择或激活我们想要操作的工作表似乎是避免错误所必需的。

参考：

[https://www.automateexcel.com/vba/activate-select-sheet/](https://www.automateexcel.com/vba/activate-select-sheet/)

[Excel 选择与激活](https://stackoverflow.com/questions/7180008/excel-select-vs-activate/7185748#7185748)

# oracle - 带有 ADO NOT .net 和 VC++ 的 Oracle 存储过程

> ID：16087813
> 
> 赞同：0
> 
> 时间：2013-04-18T16:02:37.517
> 
> 标签：oracle, visual-c++, stored-procedures, ado

我正在将 VC++/SQL 服务器应用程序迁移到使用 Oracle。数据库访问是使用 ADO 类实现的，我找不到通过 Oracle 返回的游标的方法。

存储过程类似于：

```
create or replace PROCEDURE GetSettings
(
  cv_1 OUT SYS_REFCURSOR
)
AS
BEGIN
   OPEN  cv_1 FOR
      SELECT KEY ,
             VALUE 
        FROM Settings;
END; 
```

代码类似于：

```
 _CommandPtr pCommand;
      _ParameterPtr pParam1;

      HRESULT hr = pCommand.CreateInstance (__uuidof (Command));

      if (FAILED (hr))
           return;

      pCommand->ActiveConnection = m_pConn;
      pCommand->CommandText = "GetSettings";
      pCommand->CommandType = adCmdStoredProc;
      _RecordsetPtr pRecordset;
      hr = pRecordset.CreateInstance (__uuidof (Recordset));
      if (FAILED (hr))
           return;

      pRecordset = pCommand->Execute(NULL,NULL,adCmdStoredProc); 
```

（实际上它正在使用来自[http://www.codeproject.com/Articles/1075/A-set-of-ADO-classes-version-2-20#TheSample02](http://www.codeproject.com/Articles/1075/A-set-of-ADO-classes-version-2-20#TheSample02)的 ADO 类）

返回的 pRecordset 处于关闭状态，您无法对其进行任何操作。我想我应该为游标传递一些参数，但是如何使用这些 ADO 函数创建/使用/访问返回的游标？我看不到游标参数类型

我完全被卡住了，非常感谢一些帮助

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T12:32:21.740

终于知道怎么做了，你需要在连接字符串中指定特殊参数来告诉它返回结果集：

Provider=ORAOLEDB.ORACLE；用户ID=xxx；密码=xxx；数据源=tns_name；OLEDB.Net=True；PLSQLRSet=True；

# c++ - 使用 Visual Studio 2010 从 32 位 C++ 到 64 位 C++

> ID：16087820
> 
> 赞同：0
> 
> 时间：2013-04-18T16:03:05.753
> 
> 标签：c++, 64-bit

我最近想将一个 32 位 C++ 项目转换为 64 位，但我坚持第一次尝试。在 VS 中将 32 位 C++ 转换为 64 位（例如将 32 位 Delphi 转换为 64 位）时，您能否指出任何建议/清单/要点。

```
int GetVendorID_0(char *pVendorID,int iLen)
{
#ifdef WIN64  // why WIN64 is not defined switching to Active (x64) ?
    // what to put here?
#else
    DWORD   dwA,dwB,dwC,dwD;
    __asm
    {
        PUSHAD
        MOV     EAX,0
        CPUID   //CPUID(EAX=0),
        MOV     dwA,EAX
        MOV     dwC,ECX
        MOV     dwD,EDX
        MOV     dwB,EBX
        POPAD
    }
    memset( pVendorID,      0,iLen);
    memcpy( pVendorID,      &dwB,4);
    memcpy(&pVendorID[4],   &dwD,4);
    memcpy(&pVendorID[8],   &dwC,4);
    return dwA;
#endif
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T16:33:33.213

微软的编译器（其中一些，无论如何）有一个标志来指出至少一些常见问题，其中代码可能需要修改才能作为 64 位代码工作。

就您的`GetVendorID_0`功能而言，我会使用 Microsoft 的[`_cpuid`](http://msdn.microsoft.com/en-us/library/hskdteyh%28v=vs.100%29.aspx)功能，如下所示：

```
int GetVendorID_0(char *pVendorID, int iLen) { 
    DWORD data[4];

    _cpuid(0, data);
    memcpy(pVendorID, data+1, 12);
    return data[0];
} 
```

这显然不会取代内联汇编语言的所有实例。您的选择相当简单（尽管不一定容易）。一个是找到一个这样的内在来完成这项工作。另一种是将汇编代码移动到单独的文件中，并将其与 C++ 中的代码链接（并学习 x64 调用约定）。第三是简单地放弃你现在正在做的事情，并用更可移植的代码编写最接近的等价物。

# api - 如果我使用 JAX-RS（在 netbeans 上）创建 Web 服务，它本质上是 Web 服务的 API？

> ID：16087828
> 
> 赞同：0
> 
> 时间：2013-04-18T16:03:21.863
> 
> 标签：api, rest, soap, jax-rs

如果我使用 JAX-RS（在 netbeans 上）创建 Web 服务，它本质上是 Web 服务的 API？

Web 服务将基于 REST 或 SOAP。我意识到 API 提供了 Web 服务功能的接口，但是 JAX-RS 是否公开了接口？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T21:35:07.050

实际上，包含 JAX-RS 的库依赖于 Application Server。如果您在 netbeans 中使用 Java EE6 认证的应用程序服务器，则不需要任何额外的库。

但是，如果您使用 netbeans 和 Tomcat oa Java EE 5 服务器，netbeans 会自动添加 JAX-RS 库，在这种情况下是参考实现。

用户也可以选择手动操作。

![在此处输入图像描述](https://i.stack.imgur.com/2sIb5.png)

阅读更多：

*   [开始使用 RESTful Web 服务](https://netbeans.org/kb/docs/websvc/rest.html)
*   [使用 JAX-RS、Netbeans、Glassfish 开发 RESTful Web 服务](http://weblogs.java.net/blog/caroljmcdonald/archive/2009/04/developing_rest.html)

# java - 要求偶数和奇数

> ID：16087830
> 
> 赞同：-1
> 
> 时间：2013-04-18T16:03:30.943
> 
> 标签：java

编写一个名为 hasAnOddDigit 的方法，该方法返回一个正整数的任何数字是否为奇数。如果数字至少有一个奇数位，则您的方法应该返回 true，如果没有一个数字是奇数，则返回 false。0、2、4、6、8是偶数，1、3、5、7、9是奇数。

例如，以下是对您的方法的一些调用及其预期结果：

返回的调用值 hasAnOddDigit(4822116) true hasAnOddDigit(2448) false hasAnOddDigit(-7004) true 您不应该使用字符串来解决此问题。

这是我对这个问题的尝试：

```
public boolean hasAnOddDigit(int num){
int number=0;

while (number > 0) {
    number= number % 10;
    number = number / 10;
}
    if(number%2==0 && num%2==0){
        return false;
    }else{
         return true;
    }

} 
```

要求 hasAnOddDigit(4822116) 它给了我一个假而不是真。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T16:05:41.623

您的方法应该在每个数字通过循环时检查它，而不是在做出决定之前等待循环完成。目前，`while`循环运行`number`到零，然后才尝试检查该值。自然，当循环结束时，两个值都为零，所以返回是`false`.

```
public boolean hasAnOddDigit(int num){
    // You do not need to make a copy of num, because
    // of pass-by-value semantic: since num is a copy,
    // you can change it inside the method as you see fit.
    while (num > 0) {
        int digit = num % 10;
        if (digit % 2 == 1) return true;
        num /= 10;
    }
    // If we made it through the loop without hitting an odd digit,
    // all digits must be even
    return false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T16:28:14.477

对某些人来说可能更直观的递归版本。

```
private boolean hasAnOddDigit(int num) {
        if (num<10) {
            return num%2==0 ?  false :  true;
        } else {
            return check(num%10) || check (num/10);
        }
    } 
```

# variables - 来自函数内部的 Doxygen 分组变量

> ID：16087832
> 
> 赞同：2
> 
> 时间：2013-04-18T16:03:33.087
> 
> 标签：variables, doxygen

我一直在非常仔细地阅读有关 grouing 和 ingroup 命令的内容。它指出“组的成员可以是文件、命名空间、类、函数、变量、枚举、类型定义和定义，也可以是其他组。”

因此，我一直试图从函数内部对几个变量进行分组。该文档似乎没有说明它是哪种变量的任何规范或限制。

这是一个简单的例子：

```
/// \file hyperLinks.h
class hyperLinks
{
    public:

        void getEnvVars();

        // WORKS!
        /**
         *  @ingroup group2
         */
        int public_var;

    protected:
        // WORKS!
        /**
         *  @ingroup group2
         */
        int protected_var;

    private:
        int private_var;
};

// WORKS!
/**
 *  @ingroup group2
 */
int globalVarH; 
```

以及对应的cpp文件：

```
/// \file hyperLinks.cpp
#include "hyperLinks.h"

/**
*  @defgroup group2 The Second Group
*  This is the second group
*/

hyperLinks::getEnvVars()
{
    // do something here

    // put this into a group2
    // ---DOES NOT WORK---
    /**
    *  @ingroup group2
    *  @brief variable inside getEnvVars()
    */
    int inFunctionVariable;

}

// works!
/**
 *  @ingroup group2
 *  @brief OUTSIDE globalVar from .cpp file in group 2
 *  @brief outside class defenition
 */
int globalVarCPP; 
```

从上面的代码中，以下 DO 被放置在 Module->The Second Group 中：

-public_var

-protected_var

-globalVarH

-globalVarCPP

然而，函数内部的变量不会出现在组中：

-inFunctionVariable

第 5 个变量没有出现。

任何想法为什么这不起作用？如何修复它或解决方法？

此外，我已经阅读了在运行 doxygen 文档期间生成的所有消息/警告。此文件存在错误或警告。

任何帮助将不胜感激。

谢谢！

附言。Doxygen 版本 1.8.3.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-02T05:50:39.127

Doxygen 不支持在函数体中注释元素。从在 doxygen 手册中[记录代码：](http://www.doxygen.nl/manual/docblocks.html)

> 对于代码中的每个实体，都有两种（或在某些情况下为三种）类型的描述，它们共同构成该实体的文档；简要说明和详细说明，两者都是可选的。对于方法和函数，还有第三种类型的描述，即所谓的主体描述，它由在方法或函数主体中找到的所有注释块的串联组成。

在您的代码示例中，文档`inFunctionVariable`是`hyperLinks::getEnvVars()`函数的体内文档，并作为该项目文档的一部分出现。

# selenium - TestNG 孤立的特定测试

> ID：16087838
> 
> 赞同：0
> 
> 时间：2013-04-18T16:03:38.283
> 
> 标签：selenium, testng

我有一个包含大约 6 个类的测试套件，它们之间总共有 120 个测试。

我面临的问题是，当其他一些测试正在运行时，一些测试无法运行。例如，对于测试 a、b、c、d、e、f：

*   a 不能与 b 或 c 一起运行
*   b 不能与 a 或 c 一起运行
*   c 不能与 a 或 b 一起运行
*   d 不能与 f 一起运行
*   e 可以运行任何东西
*   f 不能与 d 一起运行

这是一个小例子，但希望它能说明这一点。我仍然想尽可能多地利用并行性，例如 ad 和 e 可以同时运行。我仍在使用 testNG 学习，但我尝试了以下方法：

**将不能一起运行的测试分组到一个组中**- 我找不到在“parallel =“groups”模式下运行 testNG 的方法，例如在一个组中运行所有测试的“parallel =“classes””在同一个线程中。将每个不能一起运行的测试放在一个类中将允许 'parallel="classes"' 工作，但这意味着测试不会像目前那样由测试功能安排。

**将依赖关系放在测试周围**- 我考虑让每个测试相互依赖（可能与组？），形成一个链，例如 a->b->c。这样做的问题是这些将始终按该顺序运行，这可能会隐藏问题。这里的另一个问题是测试维护成为一个问题，因为您必须确保链是单一的并且不会中断！

**创建一个按组对列表进行排序的方法拦截器**- 我对此并不完全确定，但我认为它不会阻止测试已经运行，而另一个不兼容的测试被选为“下一个运行”。

我见过[TestNG & Selenium: 将测试分成“组”，在每个组内按顺序运行](https://stackoverflow.com/questions/7956521/testng-selenium-separate-tests-into-groups-run-ordered-inside-each-group)，似乎在尝试相同的目标，但出于不同的原因，因此达到的解决方案不合适，因为它不是依赖问题，但是一个隔离问题。

有什么可以帮助我的吗？

非常感谢，

菲尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-28T03:06:12.450

您可以重构测试，以便您当前的类列表不再标记为测试。相反，引入新的测试代理类，其方法只是调用原始类中的测试过程。这样，维护功能区域中的代码就很简单了。或者，由于代理类基于它们使用的资源类型，您可以将它们放入套件中的单独测试中并使用`parallel="tests"`.

实际上，您不必介绍那些代理类。您可以将您的测试指定为

```
<test name="boiler">
   <classes>
      <class name="org.example.A">
         <methods>
            <include name="a1"/>
            <include name="a2"/>
         </methods
      </class>
      ... <!-- list of methods that use the boiler -->
   </classes>
</test>
<test name="waterheater">
    <classes>
      <class name="org.example.B">
         <methods>
            <include name="b"/>
         </methods>
      </class>
       ... <!-- list of methods that use the waterheater -->
   </classes>
</test> 
```

使用代理类的优点是列出测试可以在类级别而不是方法级别完成。你的旅费可能会改变。

```
<test name="boiler">
   <classes>
      <class name="org.example.BoilerProxy"/>
   </classes>
</test>
<test name="waterheater">
   <classes>
       <class name="org.example.WaterHeaterProxy"/>
   </classes>
</test>
... 
```

> 这样做的问题是这些将始终按该顺序运行，这可能会隐藏问题。

TestNG 几乎总是每次都以完全相同的顺序运行一系列测试。我认为，如果您希望使用 TestNG 的工具在事情以不同的顺序运行时发现错误，那么这是您设计中的一个缺陷。没有捷径可以绘制出可能出现的序列组合并对其进行显式测试，或者至少是其中的一个可管理的子集。鉴于此，如第一段所述设置代理测试可能是您最好的选择，因为您可以根据需要重复和重新排序它们。

测试并行性、异步性和竞争条件很**困难**。除了好的设计，没有捷径可走。

我根据这个答案创建了一篇博客文章：http: [//ancient-marinator.blogspot.com/2013/05/on-testing-scheduling-your-tests.html](http://ancient-marinator.blogspot.com/2013/05/on-testing-scheduling-your-tests.html)

# excel - 如何在excel中创建逐个单元格总和的列

> ID：16087841
> 
> 赞同：0
> 
> 时间：2013-04-18T16:03:49.097
> 
> 标签：excel, csv

我有一个非常长的电子表格，我想创建一个新列（实际上是 8 个），其中新列中的每个单元格都是其他列中两个单元格的总和。一个明显的答案是创建列，在第一个单元格中创建公式的实例，然后向下拖动公式。但是，由于电子表格很长，我想这样做 8 次，这个过程对我来说没有意义。有没有一种自动化的方法来做到这一点？我从未使用过 VBA，但有足够的编程经验，我想我可以弄清楚。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T16:15:21.340

我做什么，例如列中的长数据`A`&`B`

1.  将公式放入`C1`&`D1`
2.  单击`B1`, `Ctrl`+`down-arrow`转到最后一个单元格，转到`C`& `D`& 输入任何值
3.  点击`C1`, `Shift`+ `ctrl`+`down-arrow`选择空单元格，与`left-arrow`水平选择相同
4.  `ctrl`+`D`填写公式

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T17:49:00.150

突出显示单元格。双击角落的黑框，公式被填充到旁边数据的末尾。

在图片中：
悬停在这里：当您将鼠标悬停在点上时，
![黑点](https://i.stack.imgur.com/SYpo6.jpg)
您的光标应变为黑色**+**。
双击后，公式将被填充，
![在此处输入图像描述](https://i.stack.imgur.com/7TUfi.jpg)
这种方式将复制该单元格的格式，但如果您不想这样做，您可以单击弹出菜单（填充区域的左下方）
![菜单弹出](https://i.stack.imgur.com/si7if.jpg)
并选择不格式化填充

# c# - Awesomium.NET 和 WCF

> ID：16087845
> 
> 赞同：2
> 
> 时间：2013-04-18T16:03:56.380
> 
> 标签：c#, wcf, awesomium

我想创建一个拍摄网页快照的网络服务。我为这个任务选择了 Awesomium。但是有一个问题，Awesomium.NET DLL只能在32位项目上运行，而WCF必须在任何CPU上运行，所以很明显它不会运行……还有另一种创建Web服务的方法（谁可以运行Awesomium.NET）？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T16:19:23.443

您的 Web 服务与其运行的机器无关。托管过程确实如此。如果您在 IIS 下托管服务，您可以使用应用程序池的相应设置明确指定工作进程是 32 位还是 64 位。

# java - 为一个或多个查询优化 PreparedStatements - Java & MySQL

> ID：16087848
> 
> 赞同：-1
> 
> 时间：2013-04-18T16:03:58.317
> 
> 标签：java, mysql, prepared-statement

如果我没记错的话，一旦连接关闭，preparedStatement 就会从缓存中销毁。目前我的应用程序已设置，因此我有一个函数可以根据传入的单个 POJO 对象从数据库中获取 POJO 对象。然后我有另一个函数来获取该表中所有对象的 ID，以用于需要列表的情况，然后在该函数的 while 循环中，我一次获取整个对象。

但是这样做并没有利用缓存的查询，对吗？那么，如果它是一个项目列表或单个项目，那么拥有一个可以利用缓存的preparedstatements 的通用getter SQL 函数的最佳方法是什么？在 PHP 中，我可以通过检查传入的参数是否为数组来轻松完成此操作，但 Java 要求您定义参数对象。

例如，假设用户，这是我目前拥有的：

```
//Get user object
public User getUser(User user) throws SQLException {
    Connection connection = connectionWrapper.getConnection();
    String query = "SELECT firstName, lastName FROM users WHERE userId = ?";
    PreparedStatement statement = connection.prepareStatement(query);
    statement.setInt(1, user.getUserId());
    ResultSet rs = statement.executeQuery();
    if (rs.next()) {
        //Get database details and set into object
    }
    rs.close();
    statement.close();
    connection.close();
}

//Get all users
public List<User> getAllUsers() throws SQLException {
    List<User> userArr = new ArrayList<User>();

    Connection connection = connectionWrapper.getConnection();
    String query = "SELECT userId FROM users";
    PreparedStatement statement = connection.prepareStatement(query);
    ResultSet rs = statement.executeQuery();
    while (rs.next()) {
        int id = rs.getInt("userId");
        User user = new User(id);
        getUser(user);
        userArr.add(user);
    }
    rs.close();
    statement.close();
    connection.close();
    return userArr;
} 
```

如果能够让 getUser 函数处理像上面这样的单个对象情况和传入用户对象数组（带有 userId 的集合）并在关闭之前循环遍历数组以获取所有对象的数组情况，那就太好了连接。有没有一种简单的方法可以做到这一点，或者我应该在所有情况下都将一个 User 数组传递给 getUser 函数，即使它只是一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T17:31:37.903

如果您追求的是性能，那么在给定 5 个 ID 的数组的情况下执行 5 个查询以查找 5 个用户并不是真正的最佳解决方案。您最好执行一个查询，一次加载所有用户，使用

```
select firstName, lastName FROM users WHERE userId in (?, ?, ?, ?, ?) 
```

同样，您的`getAllUsers()`方法效率极低。它应该执行单个查询，而不是执行查询以获取所有 ID，然后对找到的每个 ID 进行查询。

# regex - 将 SSN 与 RegEx 匹配

> ID：16087852
> 
> 赞同：0
> 
> 时间：2013-04-18T16:04:02.927
> 
> 标签：regex

我正在为一个项目过滤掉 SSN#。产品的 SSN 的默认表达式是

```
(^|\b)(?!9|8|77[3-9]|666|000)(\d{3})( - | |-)(?!00)(\d{2})\3(?!0000)(\d{4})(\b|$) 
```

过去他们使用正则表达式对自定义脚本进行了修改：

```
(^|\b)(?!9|8|77[3-9]|666|000)(\d{3})( - | |-)(?!00)(\d{2})\3(?!0000)(\d{4})($|[^\d-]) 
```

两种表达方式的区别是

```
(\b|$)
\b: backspace
$:end of string 
```

和

```
($|[^\d-])
$:end of string
[^]: Not in position
\d-: not match 0-9 
```

我想这对我来说没有意义。为什么做出改变？这两种表达方式的结尾似乎都是多余的。非常感激任何的帮助。谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T16:24:30.867

这里的区别：

```
(\b|$) 
```

对比

```
($|[^\d-]) 
```

`\b`仅表示字符类中的退格字符，例如`[\babc]`匹配“a”、“b”、“c”或退格字符。在字符类之外，也就是在这里看到的，它是一个分词符，例如字母和空格之间的 a。

以前，正则表达式可以接受 SSN，匹配到该点的模式，以字符串结尾 ( `$`) 或任何分词符 ( ) 结尾`\b`。因此它将匹配“111-22-3333”或“111-22-3333 垃圾数据”中的 SSN

更改后，通常会更宽容 SSN 之后的内容。它可以以字符串结尾 ( `$`) 结尾，也可以以数字或连字符 ( ) 以外的任何字符结尾`[^\d-]`。因此，除了上面匹配的内容外，它还会匹配“111-22-3333garbage”或“111-22-3333#6789”中的 SSN，但不会匹配“111-22-33333”或“111-22”中的 SSN -3333-123"

坦率地说，您列出的旧版本对我来说在大多数情况下似乎更正确，但这当然取决于您的应用程序的需求。

# excel - 如何查看具有实际列值的数据透视表，例如在 excel 中的访问

> ID：16087854
> 
> 赞同：1
> 
> 时间：2013-04-18T16:04:03.880
> 
> 标签：excel, ms-access, pivot-table

我试过搜索这个，但由于问题的措辞而找不到答案。如果之前有人问过，请指出我正确的方向。

我在 Excel 和 Access 中有完全相同的数据，但是，透视表的查看方式不同，如下所示：

**Excel 视图和数据** ![Excel 示例](https://i.stack.imgur.com/y0Qjn.png)

**访问视图，相同的数据** ![访问示例](https://i.stack.imgur.com/DhZLd.png)

如您所见，访问中的数据透视表具有实际值（Y，N），而在 excel 中它汇总了这些值。我希望excel显示像Access这样的实际值而不是总和。

我将很快切换到 Office 2013，并且需要知道如何在 Excel 2013 中执行此操作，因为在 Access 2013 中从 Access 2010 中删除了数据透视表。

我也尝试将数据添加到列部分，但这样做会带来更难理解和不同的视图，如下所示：

![不同的看法](https://i.stack.imgur.com/iOhqX.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T16:48:01.343

我想这就是你想要做的......

看起来您需要在表格中添加一个额外的列，将是/否的布尔值显示为房屋和汽车的 1/0

然后，将这两个新列用作数据透视表中的值总和。右键单击数据透视表，转到选项，并确保将“空单元格”设置为空白。然后，对于每个值，您需要这种自定义格式 [>=1]“Yes”;[=0]“No”; 不要复制并粘贴它 - 它不起作用（无论如何都不适合我）。手动输入。

我从这里得到了信息（这可能解释得更好）[http://chandoo.org/wp/2012/05/07/displaying-text-values-in-pivot-tables-without-vba/](http://chandoo.org/wp/2012/05/07/displaying-text-values-in-pivot-tables-without-vba/)

# jakarta-ee - 模块化企业应用程序的设计模式

> ID：16087855
> 
> 赞同：1
> 
> 时间：2013-04-18T16:04:06.070
> 
> 标签：jakarta-ee, design-patterns, database-design, content-management-system, jackrabbit

我们正在开发一个基于 Java 的系统，并且我们正在寻找将随着应用程序发展的最佳设计模式，即使随着时间的推移会添加更多模块，
目标是：

*   有核心模块的模块化，其他模块将从那里继承基本功能。

*   那么其他模块是单独的组件，但在其他模块之间共享数据

*   在管理员方面，模块可以分配给某个用户

例如，学生会被分配，支付，论坛，课程，如果是一般客户支付，购物等。如果学生要购物，你升级他的账户并添加购物模块给他，在他的账户中，更新课程以表明他买了一本书，例如“Java 中的并发”。

*   可以打开和关闭模块，而不影响应用程序的稳定性。
*   由于内容的管理，我还考虑使用jackrabbit。我错了吗？正面和负面的参考？

哪种**设计模式最适合我们**？你有什么**建议或者我可以看的材料**吗？

我们如何才能将数据库设计实现得近乎完美？ **你可能有参考资料？**

任何更多的建议都将被接受并受到欢迎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T05:29:48.133

我过去取得成功的一种模块化模式是消息总线。本质上，学生（或教授或管理员等）不直接与支付或论坛或课程等模块交谈，而是通过消息总线完成所有通信（例如，学生向总线发送消息，总线发送消息到论坛）。此消息总线可以是[ConcurrentLinkedQueue](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ConcurrentLinkedQueue.html)或[LinkedBlockingQueue](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/LinkedBlockingDeque.html)，也可以是第三方软件，例如[RabbitMQ](http://www.rabbitmq.com/)或[ActiveMQ](http://activemq.apache.org/)或[Amazon SQS](http://aws.amazon.com/sqs/); 每一个都有它的优点和缺点，你需要权衡，但你并没有完全锁定在你的决定中——我在一个项目中工作，我们从 Amazon SQS 切换到 RabbitMQ，我重写消息格式的工作是没那么复杂。

关于消息传递的好处：

1.  稳健性。如果您使用持久队列（意味着将消息保存到数据库中），那么您可以以最小的数据丢失承受程序崩溃。此外，客户端模块（学生/教授/管理员）、服务模块（支付、论坛、课程）和消息总线通常在单独的内存空间中运行（它们每个都有自己的线程池，并且在它们之间复制数据而不是直接在它们之间共享），因此如果一个模块崩溃，它不会使其他模块随之崩溃（除非它是消息总线崩溃，在这种情况下，其他模块仍然完好无损，但它们必须旋转/睡眠直到总线重新上线）。

2.  可扩展性。并发和分布式系统通常建立在消息传递模型之上；例如，消息传递是 Erlang 和 Akka 等并发语言和库的内在组成部分。但是，如果您不小心，消息总线将成为瓶颈，但是如果您不相信自己能够很好地实现它，那么有几个不错的第三方库可供选择。

3.  模块化。如果你想添加一个新模块，那么你只需要编写它来与你的消息总线互操作——你不需要编写单独的接口来让它与所有其他模块通信。删除一个模块同样简单——只需让消息总线将其消息路由到死信存储。像访问控制这样的事情很容易通过消息总线实现——如果学生没有访问管理模块的权限，那么消息总线只会将错误消息路由到死信存储或异常队列。

消息传递的主要缺点是它的效率——模块通过复制数据而不是通过授予直接访问来进行通信。但是，从长远来看，您会发现这将使使用多线程实现模块变得更加容易，这可能会带来净效率增益。

# ruby-on-rails - 如何在新的 has_many 关联上使 ActiveRecord 凹凸更新

> ID：16087862
> 
> 赞同：24
> 
> 时间：2013-04-18T16:04:25.087
> 
> 标签：ruby-on-rails, activerecord

将记录添加到`has_many`关联并保存父级时，该父`updated_at`级不会碰撞：

```
order = Order.new
order.save
pp order
  => #<Order id: 3, created_at: "2013-04-18 15:25:09", updated_at: "2013-04-18 15:25:09"> 
order.line_items << LineItem.new()
pp order.line_items
  => [#<LineItem id: 4, order_id: 3, created_at: "2013-04-18 15:26:16", updated_at: "2013-04-18 15:26:29", product_id: 123>] 
order.save
pp order.reload
  => #<Order id: 3, created_at: "2013-04-18 15:25:09", updated_at: "2013-04-18 15:25:09"> 
```

这是有道理的，因为`Order`它没有被触及；外键位于`LineItem`.

但是，在这种情况下，我想查询`Order`并仅查找在过去 30 分钟内`Order`收到新`LineItem`s 的 s（即：在过去 30 分钟内“更新”）。

我不确定在这里最好做什么，以及如何轻松实现这一目标。我可以设置一些标志或方法来让 AR`updated_at`像描述的那样更新父母吗？还是我应该通过一些钩子来做到这一点？如果是这样，什么钩子？或者我应该将此时间戳存储在不同的列中吗？

请注意，我可以查询`line_items.updated_at`槽 a `join(:line_items)`，但这可能会使我的代码更混乱且性能更低：或者这是 Rails 中此类问题的首选方式？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-04-18T16:16:44.073

您需要`touch: true`与`belongs_to :order`关联一起包括在内。

```
class Order < ActiveRecord::Base
  has_many :line_items
end

class LineItem < ActiveRecord::Base
  belongs_to :order, touch: true
end 
```

这将更新`updated_at`关联订单的列。更多文档[在这里](http://api.rubyonrails.org/classes/ActiveRecord/Persistence.html#method-i-touch)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T16:18:55.170

您可以使用触摸选项，如下所示。

```
class LineItems < ActiveRecord::Base
  belongs_to :order, :touch => true
  ...
end 
```

每当保存或销毁 lineitem 时，这将更新父 Order 的“update_at”。

引用[http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html)，

> ：触碰
> 
> ```
> If true, the associated object will be touched (the updated_at/on attributes set to now) when this record is either saved or destroyed. 
> ```
> 
> 如果您指定了一个符号，那么除了 updated_at/on 属性之外，该属性还将使用当前时间进行更新。

# java - TCP传输中的奇怪行为

> ID：16087874
> 
> 赞同：0
> 
> 时间：2013-04-18T16:04:46.377
> 
> 标签：java, c, sockets

我的服务器-客户端应用程序包含以下模块：

客户端（用Java编写）连接到服务器并发送文件；

服务器（用 C 编写）接收文件并发送 char 数组消息。

问题是服务器收到文件后无法发送消息或客户端无法接收。

这是我的服务器应用程序代码：

```
int main(int argc , char *argv[])
{
    WSADATA wsa;
    SOCKET s , new_socket;
    struct sockaddr_in server , client;
    int c, bytecount, nr_transf, rest_byte, i, bytesRead;
    int recv_size, file_size;
    char message[1000];     
    char buffer[1000];
    int buffer_len = 1000;
    FILE *f = fopen("out.jpg", "wb");

    printf("\nInitialising Winsock...");
    if (WSAStartup(MAKEWORD(2, 2), &wsa) != 0)
    {
        printf("Failed. Error Code : %d", WSAGetLastError());
        return 1;
    }

    printf("Initialised.\n");

    //Create a socket
    if((s = socket(AF_INET, SOCK_STREAM, 0 )) == INVALID_SOCKET)
    {
        printf("Could not create socket : %d" , WSAGetLastError());
        getch();
        return 0;
    }

    printf("Socket created.\n");

    //Prepare the sockaddr_in structure
    server.sin_family = AF_INET;
    server.sin_addr.s_addr = INADDR_ANY;
    server.sin_port = htons(8888);

    //Bind
    if(bind(s, (struct sockaddr*)&server, sizeof(server)) == SOCKET_ERROR)
    {
        printf("Bind failed with error code : %d" , WSAGetLastError());
        getch();
        return 0;
    }

    puts("Bind done");

    //Listen to incoming connections
    listen(s, 3);

    //Accept and incoming connection
    printf("Waiting for incoming connections...");

    c = sizeof(struct sockaddr_in);
    new_socket = accept(s, (struct sockaddr*)&client, &c);
    if (new_socket == INVALID_SOCKET)
  {
        printf("accept failed with error code : %d", WSAGetLastError());
        getch();
        return 0;
    }

    printf("Connection accepted");

    //Receive image
    while((bytesRead = recv(new_socket, buffer, buffer_len, 0)) > 0)
    {
        fwrite(buffer, 1, bytesRead, f);
    }

    fclose(f);
    printf("\nReceive finished!");

    //Send messsage
    char my_message[100];
    strcpy(my_message, "Hello World!");

    send(new_socket, my_message, strlen(my_message), 0);

    closesocket(s);
    WSACleanup();

    getch();
    return 0;
} 
```

以及客户端应用程序的代码：

```
public class MyClass
{
    public static void main(String[] args) 
    {
        String fileName = "1.jpg", receiveMessage;
        File a_file = new File(fileName);  
        int j;
        OutputStream output = null;
        InputStream input = null;
        ObjectInputStream in = null;
        Socket socket = null;

        try  
        {           
            // Create a socket
            socket = new Socket("192.168.0.122", 8888);

            FileInputStream fileInputStream = new FileInputStream(fileName);
            byte[] buffer = new byte[1000];
            int bytesRead = 0;
            output = socket.getOutputStream();     
            input = socket.getInputStream();     

            while((bytesRead = fileInputStream.read(buffer))>0)
            {
                output.write(buffer,0,bytesRead);
            }

            fileInputStream.close();        
            System.out.println("Send finished!");

            input.read(buffer);
            System.out.println("Receive finished!");
        }  
        catch(Exception e)  
        {  
            e.printStackTrace();  
        } 
        finally
        {
            try
            {
                in.close();
                output.close();
                socket.close();
            }
            catch(Exception e)
            {

            }
        }
    }
} 
```

有什么想法可以解决这个问题吗？提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T16:15:31.263

这是因为你有*阻塞套接字*。创建套接字时（通过连接或接受），它处于阻塞模式。这意味着如果没有数据可以接收，它将不会返回，从而有效地阻塞了调用者。

因此，在您收到服务器循环中的最后一个字节后，`recv`调用将无限期阻塞。

在带有 winsockets 的 Windows 上，您可以使用该[`ioctlsocket`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms738573%28v=vs.85%29.aspx)函数来使套接字阻塞或非阻塞。链接的参考有一个例子，它显示了使套接字阻塞或非阻塞的热点。

# c# - 如何判断缓存项在哪个服务器上？

> ID：16087875
> 
> 赞同：0
> 
> 时间：2013-04-18T16:04:54.973
> 
> 标签：c#, caching, load-balancing

我在两台负载平衡服务器上有一个站点，并且正在使用`HttpRuntime.Cache`. 是否可以在我的 C# 代码中区分缓存项在哪个服务器上？在添加或获取项目时？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T16:08:15.647

HttpRuntime.Cache 不会在我们的服务器之间共享，因此放入缓存中的每个项目都将被缓存两次：每台服务器一次。

如果要共享缓存，请使用[http://www.hanselman.com/blog/InstallingConfiguringAndUsingWindowsServerAppFabricAndTheVelocityMemoryCacheIn10Minutes.aspx](http://www.hanselman.com/blog/InstallingConfiguringAndUsingWindowsServerAppFabricAndTheVelocityMemoryCacheIn10Minutes.aspx)

# python - python：没有空格的模板var

> ID：16087877
> 
> 赞同：6
> 
> 时间：2013-04-18T16:04:58.150
> 
> 标签：python, templates

在 python 中，我尝试使用模板

```
 from string import Template
 s = Template("hello $world")
 print s.substitute(world="Stackoverflow") 
```

好的，但是，在模板中我需要连接一个没有空格的字符串，例如

```
 s = Template("a small number : $number e6")
 print s.substitute(number=5) 
```

我需要`a small number : 5e6`作为输出，在 5 和 e6 之间没有空格。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-18T16:06:20.090

在模式周围使用花括号：

```
Template("a small number : ${number}e6") 
```

结果：

```
>>> Template("a small number : ${number}e6").substitute(number=5)
'a small number : 5e6' 
```

# php - jQuery 调用 PHP 文件从 mysql 数据库中获取数据？

> ID：16087878
> 
> 赞同：5
> 
> 时间：2013-04-18T16:04:59.227
> 
> 标签：php, javascript, jquery, mysql, database

好的，所以我在网上找到了许多教程，并一步一步地遵循了它们。我的问题是我对 javascript/jQuery 的了解比我对 PHP 的了解要好得多，而且我什至无法弄清楚如何调试该部分中出了什么问题。基本上我有一堆按钮和一个按钮，当按下按钮时，它决定了表单中的默认值。

jQuery 端

```
$(document).ready(function(){
// CSPC and ADDUPDATE TOGGLE ARE DEFINED GLOBALLY
    $('ul#parts').on('click', 'button', function(){
        ADDUPDATETOGGLE = "ADD";
        CSPC = $(this).attr("data-cspc");
        var   form = $('div.sidebar form'),
              sr = 0;
        form.find("#cspc").val(CSPC);
        $.ajax({
            type: "GET",
            url: "getRate.php",
            data: "pid=A5843",
            dataType: "json",
            success: function(data){
                sr = data;
            }
        });
        form.find("#strokeRate").val(sr);
        showForm();
    });
}); 
```

PHP端

```
<?php

$host = "localhost";
$user = "username";
$pass = "password";
$databaseName = "movedb";
$tableName = "part parameters";

$con = mysql_connect($host, $user, $pass);
$dbs = mysql_select_db($databaseName, $con);
//get the parameter from URL
$pid=$_GET["pid"];
if (empty($pid)){
    echo "1"; //default rate
}
else{
    $db=mysql_pconnect("localhost");//connect to local database
    mysql_select_db("movedb", $db);//select the database you want to use
    if (!$db){
        echo ("error connecting to database");              
    }
    else{
        //connection successful
        $sql = "SELECT 'Processing Rate (ppm)' FROM 'part parameters' WHERE 'Part Number' LIKE '" . $pid . "'";//sql string command
          $result=mysql_query($sql);//execute SQL string command
          //result contains rows
          $rows = mysql_fetch_row($result)
          echo json_encode($rows["Processing Rate (ppm)"]); 
    }

}

?> 
```

任何想法为什么 sr 没有得到设置？

我离基地很远吗？

我还会无耻地指出，我不知道 $user 和 $pass 应该设置为什么。我在任何地方都找不到解释

提前致谢！

编辑：我遵循了下面的大部分指示，现在当我跑步时

```
http://localhost/getRate.php?pid=A5843 
```

它说“未选择数据库”。另外，我现在无法访问我们原来的 MS Access 文件（我的一个团队成员拥有它），但是一旦我得到它，我会将所有标题变成一个单词标题。这是我们在网络编程/数据库管理方面的第一份工作，所以我们一直在学习。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T16:16:59.260

您的数据库查询代码不正确：

```
 $sql = "SELECT 'Processing Rate (ppm)' FROM 'part parameters' WHERE 'Part Number' LIKE '" . $pid . "'";//sql string command 
```

使用`'`在查询中引用事物会将它们变成字符串，而不是字段/表名。所以你的查询在语法和逻辑上都是错误的。您的代码只是假设成功，并且永远不会捕获 mysql 将吐出的错误。

查询应该是：

```
SELECT `Processing Rate (ppm)`
FROM `part parameters`
WHERE `Part Number` = '$pid' 
```

请注意在字段/表名称上使用反引号 (`)，`'`在 $pid 值上使用单引号 ()。

然后使用以下命令执行查询：

```
$result = mysql_query($sql) or die(mysql_error()); 
```

如果失败，您将收到 mysql 返回的错误消息。

总体而言，您的代码很容易受到[SQL 注入攻击](http://bobby-tables.com)。在进一步使用此代码之前，最好阅读并了解如何防止这种情况发生。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-18T16:10:46.753

`$user`并`$pass`应设置为您的 MySql 用户的用户名和密码。

我会使用这样的东西：

JS

```
success: function(data){
             if(data.status === 1){
                 sr = data.rows;
             }else{
                 // db query failed, use data.message to get error message
             }
        } 
```

PHP：

```
<?php

    $host = "localhost";
    $user = "username";
    $pass = "password";
    $databaseName = "movedb";
    $tableName = "part parameters";

    $con = mysql_pconnect($host, $user, $pass);
    $dbs = mysql_select_db($databaseName, $con);
    //get the parameter from URL
    $pid = $_GET["pid"];
    if(empty($pid)){
        echo json_encode(array('status' => 0, 'message' => 'PID invalid.'));
    } else{
        if (!$dbs){
            echo json_encode(array('status' => 0, 'message' => 'Couldn\'t connect to the db'));       
        }
        else{
            //connection successful
            $sql = "SELECT `Processing Rate (ppm)` FROM `part parameters` WHERE `Part Number` LIKE `" . mysqli_real_escape_string($pid) . "`"; //sql string command
            $result = mysql_query($sql) or die(mysql_error());//execute SQL string command
            if(mysql_num_rows($result) > 0){
                $rows = mysql_fetch_row($result);
                echo json_encode(array('status' => 1, 'rows' => $rows["Processing Rate (ppm)"]);
            }else{
                echo json_encode(array('status' => 0, 'message' => 'Couldn\'t find processing rate for the give PID.'));   
            }
        }

    }

?> 
```

正如另一位用户所说，您应该尝试将数据库字段重命名为不带空格的`part parameters`=> `part_parameters`、`Part Number`=> `part_number`。

如果您仍然遇到问题（只要它不是生产服务器），请将其放在您的 php 文件的顶部：

```
error_reporting(E_ALL);
ini_set('display_errors', '1'); 
```

这将输出任何错误，并且应该可以帮助您找出问题所在。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-18T16:13:36.263

sr 它在成功回调函数之外。开始将其放入成功函数中，看看会发生什么

```
$.ajax({
        type: "GET",
        url: "getRate.php",
        data: "pid=A5843",
        dataType: "json",
        success: function(data){
            sr = data;
            form.find("#strokeRate").val(sr);
        }
    }); 
```

请记住，如果 data 预期为 json，它将成为 js 对象，因此您将无法直接使用 data

# javascript - 从输入控件中检索特定模式类型的子节点

> ID：16087881
> 
> 赞同：1
> 
> 时间：2013-04-18T16:05:10.730
> 
> 标签：javascript, html, xml

我有一个遗留文档，其中包含一些基于模式的附加标签：

```
<td class="inputControl">
    <input id="OffsetAccountsRequired_R0" type="radio" name="OffsetAccountsRequired_N" value="Y" >Yes
        <tla:instruction type="unhide" value="OffSetAccountsApp1"></tla:instruction>
        <tla:instruction type="jscript" value="//Irrelevant JavaScript here"></tla:instruction>
    </input>
    <input id="OffsetAccountsRequired_R1" type="radio" name="OffsetAccountsRequired_N" value="N">No
        <tla:instruction type="hide" value="OffSetAccountsApp1~OffSetAccountsAppls1and2"></tla:instruction>
    </input>
    <input id="OffsetAccountsRequired_R2" type="radio" name="OffsetAccountsRequired_N" value="" checked="true" class="hiddenRadio" onclick="validate_js(this)">
        <tla:instruction type="hide" value="OffSetAccountsApp1~OffSetAccountsAppls1and2"></tla:instruction>
    </input>
</td> 
```

以及在这些标签上工作的 validate_js(this) 事件调用的一些可怕的 JavaScript：

```
// Calling line - in this case 'obj' is the input control 'OffsetAccountsRequired_R2'
tlaInstructions = getInstructionTags(obj, 'tla:instruction');

function getInstructionTags(inputID,tagType){
    var coltla;
    var coltlaArray = new Array();
    tagType = tagType.toUpperCase();

        var tlaFinished = false;
        coltla = inputID.parentNode.childNodes;
        for(var i=0;i<coltla.length;i++){
            if(coltla[i].nodeName.toUpperCase() == 'INPUT' && coltla[i].id == inputID.id){
                for(var j=i;j<coltla.length;j++){
                    if(coltla[j].nodeName.toUpperCase() == tagType){
                        coltlaArray[coltlaArray.length] = coltla[j];
                    }

                    if(coltla[j].nodeName.toUpperCase() == '/INPUT'){
                        tlaFinished = true;
                        break;
                    }
                }
            }

            if(tlaFinished){
                break;
            }
        }

        return coltlaArray;
    }
} 
```

我的任务是使这个 JavaScript 达到规范，以便它可以在 IE9 中工作（它以前只在 vb6 网络浏览器控件中使用过）。

就我有限的 JavaScript 技能而言，代码的用途是从输入元素中检索所有 tla:instruction 节点。它使用这条线`coltla = inputID.parentNode.childNodes`

这看起来很奇怪，因为它上升一个水平，然后下降一个水平。我假设它这样做是因为如果您简单地使用检索 tla:instruction 元素不会检索节点`coltla = inputID.getElementsByTagName('tla:instruction')`.

有没有更简单的方法可以从输入控件中检索特定类型的元素数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T08:40:41.767

根据 HTML 规范[`input`](http://www.w3.org/TR/html401/interact/forms.html#h-17.4)标签不能有任何内容。

> 开始标签：必填，结束标签：禁止

因此，它们附加到输入元素的父元素，因此`inputID.parentNode.childNodes`

这是使用的简化版本`nextSibling`

```
function getInstructionTags(inputID,tagType){
  var coltla;
  var coltlaArray = [];
  tagType = tagType.toUpperCase();

  var tlaFinished = false;
  var next = inputID;
  while ( !tlaFinished ) {
    var next = next.nextSibling;
    tlaFinished = next == null;
    if ( !tlaFinished ) {
      var nodeName = next.nodeName.toUpperCase();
      if ( nodeName == tagType ) {
        coltlaArray.push(next);        
      } else {
        tlaFinished = (nodeName != '#TEXT');
      }
    }
  }
  return coltlaArray;
} 
```

# c++ - 在我已经知道所有值的地方初始化一个字符串向量，用 C++ 填充它

> ID：16087886
> 
> 赞同：5
> 
> 时间：2013-04-18T16:05:35.977
> 
> 标签：c++, vector

在我向你们寻求帮助之前，我已经花了一个多小时研究这个问题。我正在使用 Visual Studio 2012，我刚刚安装了更新 2。

我有这个构造函数

```
Lexer::Lexer(istream &source1, ostream& listing1)
:source(source1), listing(listing1)
{
vector<string> tempVec = { 
    "and", "begin", "boolean", "break", "call", "end", "else", "false", "halt",
        "if", "input", "integer", "is", "loop", "not", "null", "newline", "or", "output", "procedure"
        "return", "then", "true", "var"
};

tokenToStringVector = tempVec;

for (int k= 0; k < tokenToStringVector.size(); k++)
{
    string key = tokenToStringVector[k];
    lexemeToTokenMap[key] = Token(k); // Function-style type cast
}
} 
```

我的教授写了标题，我写了代码。我收到了这个我无法弄清楚的错误：

```
1>c:\users\sam\dropbox\compiler project\lexical analyzer\lexer.cpp(8): error C2552: 'tempVec' : non-aggregates cannot be initialized with initializer list
1>          'std::vector<_Ty>' : Types with a base are not aggregate
1>          with
1>          [
1>              _Ty=std::string
1>          ] 
```

我不明白为什么它不会让我这样初始化它。我可以创建一个数组，然后创建一个循环来添加到向量中，但我已经只是使用向量来填充地图，因此必须有一种更合乎逻辑的方法来执行此操作。

谢谢！你们总是那么乐于助人！

请注意：如果答案不是简单的格式错误，请不要更正代码，只需指出正确的方向即可。这是一个分级作业，我是一个诚实的学生，我想自己学习。

* * *

好的，从回复和重新阅读某人发布的 SO 帖子。

1.  Visual Studio 不支持这一点，即使它在 C++ 2011 中有效

谢谢大家，我想我只需要制作一个数组。

我的教授告诉我这样做与此类似，他使用了一些支持此功能的 Linux gcc 编译器。

编辑：好的，所以微软有一个支持这个的 alpha 版本。我想我会做一个数组并转移它。

谢谢您的帮助！！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T16:09:56.453

vc++ 不支持初始化列表。
不知道update 2是否支持，但标准库肯定不支持，即使有这个特性。

编辑：更新 2 也不支持初始化列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T16:17:15.537

Your code is valid C++11, but apparently [your toolchain](https://stackoverflow.com/questions/12654394/initializer-list-not-working-with-vector-in-visual-studio-2012) is not happy with this (mine is, by the way, Apple LLVM 4.2 Clang). Consider this as an alternative:

```
Lexer::Lexer(istream &source1, ostream& listing1)
    :source(source1), listing(listing1)
{
    static const char *reserved[] =
    {
        "and", "begin", "boolean", "break", "call",
        "end", "else", "false", "halt", "if", "input",
        "integer", "is", "loop", "not", "null", "newline",
        "or", "output", "procedure", "return", "then",
        "true", "var"
    };

    std::copy(std::begin(reserved), std::end(reserved),
              back_inserter(tokenToStringVector));

    // rest of your code.
} 
```

Note: I took the liberty of fixing the merged "procedure" and "return" strings, which I'm fairly sure you neglected to separate with a **`,`** by accident.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T16:14:00.637

对于旧 C++，唯一的选择是：

```
const char *constants[] = { "and", "begin", "boolean", "break", "call", "end", "else", "false", "halt",
    "if", "input", "integer", "is", "loop", "not", "null", "newline", "or", "output", "procedure"
    "return", "then", "true", "var" };

vector<string> values(constants,&constants[sizeof(constants)/sizeof(constants[0])]); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T16:08:20.303

错误消息说明了问题。您正在尝试使用初始化列表初始化字符串向量，就好像它是一个数组一样。您可以使用初始化列表初始化数组，但不能使用向量。可能你想要的是从你的初始化列表创建一个数组，然后从你的数组初始化向量。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-18T16:09:27.230

语法`var = { x, y, z }`只能用于[聚合](https://stackoverflow.com/questions/4178175/what-are-aggregates-and-pods-and-how-why-are-they-special)，并且您的编译器抗议（对他而言）`vector<string>`不是聚合。

# grid - Kendo UI 网格创建操作从 WCF 服务传递空引用

> ID：16087890
> 
> 赞同：1
> 
> 时间：2013-04-18T16:05:42.613
> 
> 标签：grid, kendo-ui, wcf-data-services

我正在努力通过来自 kendo ui 网格的 WCF 服务调用创建操作。当 odataservice 调用业务逻辑控制器写入记录时，它传递了一个空引用....客户对象被填充，直到调用业务逻辑 CreateEntity 方法。我最初认为这是因为内容类型，但我现在有疑问。使用 fiddler 直接访问 WCF 服务成功创建记录...

剑道网格：

这是剑道网格调用的应用程序级别 Customer_Create 操作

```
@(Html.Kendo().Grid<Application.ServiceProxy.CustomerDTO>()
.Name("grid")
.Columns(columns =>
{

    columns.Bound(c => c.salesOrganizationID).Width(15).Title("sales org");
    columns.Bound(c => c.customerID).Width(20).Groupable(false);
    columns.Bound(c => c.name1).Width(25).Title("name");
    columns.Bound(c => c.city).Width(15).Title("city");
    columns.Bound(c => c.stateCode).Width(10).Title("state");
    columns.Bound(c => c.countryCode).Width(15).Title("country");
    columns.Bound(c => c.matchcode).Width(25).Title("matchcode");
    columns.Command(command => { command.Edit(); command.Destroy(); }).Width(35);
    //Add program type here CMI, VMI etc..        
    //columns.Width(25).Title("program");  

})
.ToolBar(toolbar => toolbar.Create())
.Editable(ed => ed.Mode(GridEditMode.PopUp).Window(w => w.Title("Edit Customer Details").Name("editWindow").HtmlAttributes(new { @style = "width:700px;" })))
.Pageable()
.Sortable()
.Groupable()
.Scrollable()
.Filterable()
.HtmlAttributes(new { style = "height:420px;" })
.DataSource(dataSource => dataSource
    .Ajax()
    .PageSize(20)
    .ServerOperation(true)
    .Events(events => events.Error("error_handler"))
    .Model(model => model.Id(c => c.customerID))
    .Create(update => update.Action("Customer_Create", "Customer"))
    .Read(read => read.Action("Customer_Read", "Customer"))
    .Update(update => update.Action("Customer_Update", "Customer"))
    .Destroy(update => update.Action("Customer_Delete", "Customer"))

) 
```

)

这是剑道网格调用的应用程序级别 Customer_Create 操作

```
 [System.Web.Http.HttpPost]
            public ActionResult Customer_Create([DataSourceRequest] DataSourceRequest request, Application.ServiceProxy.CustomerDTO customer)
    {

        if (customer != null && ModelState.IsValid)
        {
            var odataService = new Container(new Uri("http://localhost:8089/odata/"));
            //odataService.r
             odataService.AddToCustomer(customer);
            odataService.SaveChanges();

            return Json(ModelState.ToDataSourceResult());

        }
        return View("Index");
    } 
```

这是通过生成的 WCF 数据服务调用的 CreateEntity 方法。

```
 protected override CustomerDTO CreateEntity(CustomerDTO customerDTO)
    {

        var customer = new customer()
        {
            matchcode = customerDTO.matchcode,
            salesOrganizationID = customerDTO.salesOrganizationID,
            statusID = customerDTO.statusID,
            serviceLevelStatusID = customerDTO.serviceLevelStatusID,
            mediaIDLogo = customerDTO.mediaIDLogo,
            systemID = customerDTO.systemID,
            customerExternalSystemID = customerDTO.customerExternalSystemID,
            internationalGroup = customerDTO.internationalGroup,
            division = customerDTO.division,
            corporateID = customerDTO.corporateID,
            inventoryManagerID = customerDTO.inventoryManagerID,
            dunsNumber = customerDTO.dunsNumber
        };

        entity.customer.Add(customer);
        entity.SaveChanges();

        return GetEntityByKey(customer.customerID);
    } 
```

# angularjs - AngularJS指令测试

> ID：16087892
> 
> 赞同：2
> 
> 时间：2013-04-18T16:05:47.373
> 
> 标签：angularjs, angularjs-directive

我正在尝试测试以下指令。

```
angular.module('myModule.directives', [])
  .directive('test', function() {
    return {
      restrictions: 'E',
      scope: {},
      transclude: true,
      replace: true,
      template: '<div><ui><li>a</li></ul></div>'
    }
}); 
```

在我的测试中：

```
describe('directives', function () {
    var compile,
    scope,
    test;

    beforeEach(module('myModule.directives'));
    beforeEach(inject(function ($compile, $rootScope) {

    compile = $compile;
    scope = $rootScope;
    test = angular.element('<test></test>');
    compile(test)(scope);
    scope.$digest();

    it('should render the test directive', function () {
        var lis = test.find('li');
        console.log(lis.length); // should output 1
    });

})); 
```

测试失败并输出 0。我很好奇 compile 是否真的在做任何事情。如果我将测试替换为

```
 test = angular.element("<test><li></li></test>");. 
```

然后“查找”确实在测试元素中找到了 li，这表明编译没有渲染到

```
 '<div><ui><li>a</li></ul></div>' 
```

正如它应该。有任何想法吗？我查看了以下视频以获取指导（[http://www.youtube.com/watch?v=rB5b67Cg6bc](http://www.youtube.com/watch?v=rB5b67Cg6bc)）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T16:10:41.107

您需要将“限制”更改为“限制”

# ruby-on-rails - 使用 Devise 的 RAILS 宁静输入安全性

> ID：16087894
> 
> 赞同：0
> 
> 时间：2013-04-18T16:05:49.413
> 
> 标签：ruby-on-rails, devise

使用 RAILS 应用程序时，我有安宁的输入。

以下工作正常：

```
http://my.url/types?type[typecode]=test&type[typedesc]=test%20description 
```

但是，如果我添加 gem Devise 并将其放入 Types 控制器，它将不起作用：

```
before_filter :authenticate_user! 
```

如何将用户、密码添加到其余输入？

谢谢您的帮助！

# android - 如何在android中的列表视图之前添加解释性文本？

> ID：16087895
> 
> 赞同：0
> 
> 时间：2013-04-18T16:05:52.007
> 
> 标签：android, xml, listview, text

我有一个列表视图，但一开始我想放置一段文本，帮助用户理解该列表的目的。之后我想显示列表并且我想是可滚动的。卷轴我知道怎么做，但文本部分没有。我尝试制作两种布局，一种用于文本，另一种用于列表，但我的 xml 立即变得充满错误。

那是我的xml

```
<?xml version="1.0" encoding="utf-8"?>

<RelativeLayout  xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/legislatie1"
    android:orientation="vertical" >

    <ListView
        android:id="@+id/listView1"
        android:layout_width="wrap_content"
        android:layout_height="600dp"
        android:layout_alignParentRight="true"
        android:drawSelectorOnTop="true"
        android:textSize="10pt" >

    </ListView>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T16:11:55.753

如果您选择，您可以在 ListView 上方使用静态 TextView，但它不会随 ListView 一起滚动。另一种方法是向您的 ListView 添加一个 Header，它将随着列表滚动。 [页眉教程](http://www.vogella.com/articles/AndroidListView/article.html#miscellaneous_headerfooter)

# google-maps - Sencha Touch 2.1.1 和 Google Maps 仅在打包的网络应用程序上出现错误

> ID：16087899
> 
> 赞同：1
> 
> 时间：2013-04-18T16:06:08.653
> 
> 标签：google-maps, sencha-touch-2.1

当我运行未打包的网络应用程序版本时，我没有任何问题。地图居中并正确显示。但是，每当我打包应用程序时，都会遇到两个问题。首先，当它启动时，我收到以下警告：

```
Warning: you have included the Google Maps API multiple times on this page. This may cause unexpected errors. 
```

我加载 API 的唯一位置是 app.json 文件。

然后，当我使用地图转到应用程序的部分时，出现以下错误：

```
Uncaught Error: Invalid value for property <center>: (39.810166, -86.15670799999998) 
```

为什么预包装可以正常工作，但不能后包装？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T14:53:36.480

当我将它推送到错误论坛时，我最终在 Sencha 论坛上得到了回复。显然，如果您在 index.html 而不是 app.json 文件中加载 google maps api，效果会更好。一旦我这样做了，它就工作得很好。你可以在这里看到线程：[http ://www.sencha.com/forum/showthread.php?261932-2.1.1-Packaged-web-app-won-t-load-google-map-with-initial-中心点](http://www.sencha.com/forum/showthread.php?261932-2.1.1-Packaged-web-app-won-t-load-google-map-with-initial-center-point)

# c# - 为什么字符串打印为 unicode 字符而不是 C# 中的可读文本？

> ID：16087900
> 
> 赞同：1
> 
> 时间：2013-04-18T16:06:11.890
> 
> 标签：c#, string, unicode, char

我有一个作为 get 创建的字符串；放;：

`public static string userDirInput { get; set; }`

我`Console.Read();`用来给它一个值：

`userDirInput = Convert.ToString(Console.Read());`

在我去比较之前，我把它打印出来：

`Console.Write("read as " + (string)userDirInput);`

它打印出 unicode 值和不可读的文本......

我该怎么做才能打印出可读的文本？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T16:08:22.960

您可能想要使用[`Console.ReadLine`](http://msdn.microsoft.com/en-us/library/system.console.readline.aspx)，它返回一个`string`. [`Console.Read`](http://msdn.microsoft.com/en-us/library/system.console.read.aspx)仅读取单个字符，并将其作为`Int32`. 如果您将其转换为`char`，您会看到您正在阅读用户输入的第一个字母，而不是整个字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T16:07:48.740

这是因为[`Console.Read`](http://msdn.microsoft.com/en-us/library/system.console.read.aspx)返回一个`int`，所以更适合获取`char`：

```
int i = Console.Read();
char ch = Convert.ToChar(i); 
```

用于`ReadLine`以字符串形式获取输入：

```
string input = Console.ReadLine(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-18T16:10:42.623

你可以试试 Convert.ToChar(Console.Read()).ToString();

# mysql - Hibernate 是否支持 Amazon RDS 和 S3？

> ID：16087908
> 
> 赞同：1
> 
> 时间：2013-04-18T16:06:31.313
> 
> 标签：mysql, hibernate, amazon-web-services

在检查[Hibernate](http://en.wikipedia.org/wiki/Hibernate_%28Java%29)并发现 Hibernate 支持关系数据库（如 MySQL）后，我想知道它是否支持 Amazon RDS。我假设它确实是因为 ORM 的事情，但由于我是新手，所以我决定来这里问问知道的人。

假设 Hibernate 可以从我的 MySQL 数据库中读取数据，我还想知道它是否有办法真正支持键值数据库，比如 Amazon S3。我搜索了，但我根本找不到其他任何东西。

最后，谁能告诉我 Hibernate 对 MySQL join 的支持程度？我想知道它是否支持它们以及支持多少。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T20:44:49.470

> 如果有办法让它真正支持键值数据库，比如 Amazon S3

为此有一个单独的项目，称为[Hibernate OGM](http://www.hibernate.org/subprojects/ogm.html)。它旨在支持 NoSQL 数据库的 JPA。一探究竟。

> 有人可以让我知道 Hibernate 对 MySQL 连接的支持程度吗？我想知道它是否支持它们以及支持多少

通过 Criteria API 和 HQL 绝对支持连接。您需要更具体地了解您真正想要实现的目标，以获得更完整的答案。

# unix - 在 Unix 中如何列出在指定日期之前创建的所有目录？

> ID：16087909
> 
> 赞同：-1
> 
> 时间：2013-04-18T16:06:40.950
> 
> 标签：unix

在 Unix 中，如何列出在特定日期（2013 年 3 月 6 日）之前创建的所有目录？

我不需要递归地执行此操作。

目前的工作目录有 70000 个文件夹，我只需要将创建日期在 2013 年 3 月 16 日之前的目录名称整理到文本文件中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T17:00:39.083

查找 -type d -mtime +43 -maxdepth 1

# android - 使用 TranslateAnimation 后无法使视图完全消失

> ID：16087913
> 
> 赞同：1
> 
> 时间：2013-04-18T16:06:46.347
> 
> 标签：android

我用过`TranslateAnimation`并上下滑动了一个视图。

但是，我意识到，即使在我向下滑动视图并使用`View.GONE`在其可见性中使用后，视图仍然能够接收触摸事件。

您可以通过单击按钮使橙色视图从屏幕底部消失来产生相同的问题。然后，当您点击屏幕底部时，您会意识到自定义视图的触摸事件仍在触发中。

```
public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        int color = getResources().getColor(android.R.color.holo_orange_light);
        // construct the RelativeLayout
        final RelativeLayout customView = new RelativeLayout(this) {
            @Override
            public boolean onTouchEvent(MotionEvent event) {
                this.setPressed(true);
                Log.i("CHEOK", "OH NO! TOUCH!!!!");
                return super.onTouchEvent(event);
            }
        };
        customView.setBackgroundColor(color);

        final FrameLayout frameLayout = (FrameLayout)this.findViewById(R.id.frameLayout); 
        frameLayout.addView(customView, new FrameLayout.LayoutParams(FrameLayout.LayoutParams.MATCH_PARENT, 100, Gravity.BOTTOM));
        customView.setVisibility(View.GONE);

        Button button = (Button)this.findViewById(R.id.button1);
        button.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                if (customView.getVisibility() != View.VISIBLE) {
                    // Slide up!
                    TranslateAnimation anim=new TranslateAnimation(0,0,100,0);
                    anim.setFillAfter(true);
                    anim.setDuration(200);

                    Log.i("CHEOK", "VISIBLE!!!");
                    customView.setVisibility(View.VISIBLE);         
                    customView.setAnimation(anim);   
                    customView.setEnabled(true);
                } else {
                    // Slide down!
                    TranslateAnimation anim=new TranslateAnimation(0,0,0,100);
                    anim.setFillAfter(true);
                    anim.setDuration(200);            

                    // HELPME : Not sure why, after I hide the view by sliding it down,
                    // making it View.GONE and setEnabled(false), it still able to 
                    // receive touch event.
                    Log.i("CHEOK", "GONE!!!");
                    customView.setVisibility(View.GONE);
                    customView.setAnimation(anim);
                    customView.setEnabled(false);
                }

            }

        });
    }

} 
```

可以在此处找到演示此问题的完整源代码：

[https://www.dropbox.com/s/1101dm885fn5hzq/animator_bug.zip](https://www.dropbox.com/s/1101dm885fn5hzq/animator_bug.zip)

**向下滑动后，如何使自定义视图不接收触摸事件？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T16:24:42.710

我不清楚您为什么要使用`setAnimation()`而不是，`startAnimation()`因为您似乎没有为动画设置开始时间。

另一方面，我发现将具有关联动画的视图设置为 GONE 并不能使其真正“消失”。相反，您必须首先使用`clearAnimation()`.

所以，像这样的东西：

```
public void onClick(View v) {
    if (customView.getVisibility() != View.VISIBLE) {
        // Slide up!
        TranslateAnimation anim=new TranslateAnimation(0,0,100,0);
        anim.setFillAfter(true);
        anim.setDuration(200);

        customView.setVisibility(View.VISIBLE);         
        customView.setEnabled(true);
        customView.startAnimation(anim);   
    } else {
        // Slide down!
        TranslateAnimation anim=new TranslateAnimation(0,0,0,100);
        anim.setFillAfter(true);
        anim.setDuration(200);
        anim.setAnimationListener(new AnimationListener() {
            @Override
            public void onAnimationEnd(Animation animation) {
                customView.clearAnimation();
                customView.setVisibility(View.GONE);
                customView.setEnabled(false);
            }

            @Override
            public void onAnimationRepeat(Animation animation) {
                // nothing to do
            }

            @Override
            public void onAnimationStart(Animation animation) {
                // nothing to do
            }
        }
    }
} 
```

我不记得了，但您可能需要`post()`使用内容`onAnimationEnd()`而不是立即运行代码才能使其正常生效。

# flexmojos - 使用 Flexmojos 编译多个 SWF 文件并将它们安装到本地存储库中

> ID：16087916
> 
> 赞同：0
> 
> 时间：2013-04-18T16:07:04.863
> 
> 标签：flexmojos

我正在尝试将主应用程序 (.mxml) 编译为 SWF 文件，并将许多 CSS 文件编译为 SWF 文件，以创建可以在运行时加载的皮肤。

我用这个：

```
...
<execution>
    <id>default-compile-swf</id>
    <configuration>
        <sourceFile>./com/sim/tide/views/impls/application/Sim.mxml</sourceFile>
        <debug>true</debug>
        <services>${web.services.location}/services-config.xml</services>
    </configuration>
</execution>
<execution>
    <id>compile-css-black_is_mine</id>
    <phase>compile</phase>
    <goals>
        <goal>compile-swf</goal>
    </goals>
    <configuration>
        <finalName>black_is_mine</finalName>
        <sourceFile>../resources/styles/black_is_mine.css</sourceFile>                      
    </configuration>
</execution>
... 
```

这段代码似乎可以工作，因为`${project.build.directory}`我有 2 个 SWF 文件，一个用于我的应用程序，一个用于我的皮肤。

我的问题发生在灵态中`install`。现在，它是我的 SWF 皮肤文件，它安装在我的本地存储库中，它不再是基于我的应用程序的 SWF，但工件的名称仍然是我的应用程序皮肤的名称......总而言之，如果`m.swf`我生成的 SWF 文件是基于我的application 文件，`c.swf`是我基于我的 css 文件生成的 SWF 文件，目标`install`将安装`c.swf`在我的本地存储库中，名称为`m.swf`.

我试图像这样更改执行的配置：

```
<execution>
     <id>default-install</id>
        <phase>install</phase>
        <goals>
          <goal>install</goal>
        </goals>            
        <configuration>                    
        <file>${project.build.directory}/${project.artifactId}-${sim-flex.version}.swf</file>
        </configuration>
      </execution> 
```

选择要安装的正确 SWF 但没有效果...

那么，我如何使用它`Flexmojos`来编译尽可能多的 SWF 文件并将它们正确安装到本地存储库中呢？似乎只能安装一个 SWF 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T19:12:22.447

我发现了一个“hack”，只需将我想要的 SWF 安装`org.apache.maven.plugins:maven-install-plugin:install-file`到我的本地存储库中并取消默认安装目标：

```
<execution>
    <id>default-install</id>
    <phase>non_existing_phase</phase>
</execution> 
```

现在，这个目标将永远不会被触发，因为它的有界阶段不存在。

# perl - 在 perl 脚本中使用 Chromium Cookie

> ID：16087925
> 
> 赞同：0
> 
> 时间：2013-04-18T16:07:27.577
> 
> 标签：perl, cookies, sqlite, chromium

我正在尝试编写一个 perl 脚本来连接到一个网站，并且在存储我从 Chromium SQLite 数据库中获取的 cookie 时遇到了问题。这是相关的代码片段：

```
use HTTP::Cookies;
use Data::Dumper;
use feature 'say';
use DBI;

my $cookie_jar = HTTP::Cookies->new();
my $dbh = DBI->connect("dbi:SQLite:dbname=/home/{user}/.config/chromium/Default/Cookies",
   "", "");
my $sth = $dbh->prepare("select * from cookies where host_key='{domain}'");
$sth->execute();
my $rows;
while ($rows = $sth->fetch()) {
    say Dumper($rows);
    $cookie_jar->set_cookie(@$rows[0],
                            @$rows[1],
                            @$rows[2],
                            @$rows[3],
                            @$rows[4],
                            @$rows[5],
                            @$rows[6],
                            @$rows[7],
                            @$rows[8],
                            @$rows[9]);
    say Dumper($cookie_jar);

}

$sth->finish();
$dbh->disconnect();

say Dumper($cookie_jar); 
```

我清理了我的用户名和域，但“say Dumper($rows)”语句返回的正是我期望的 cookie 信息。因此，我知道我的 SQLite 数据库访问正常。while 循环内外的“say Dumper($cookie_jar)”返回一个空的 cookie_jar。我刚开始玩 perl，所以在设置数据方面我缺少什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T16:49:36.193

我发现没有标准的 cookie 值或存储它们的标准顺序。Chromium cookie 中的字段 0-9 不会映射到 HTTP::Cookies 中的字段 0-9。似乎 set_cookie 方法由于奇怪的值而失败，但并没有详细说明它的错误。我意识到处理它的更好方法是对行使用 hashrefs，这样我就有了更具可读性的代码：

```
# set_cookie($version, $key, $val, $path, $domain,
#             $port, $path_spec, $secure, $maxage, $discard, \%rest )

while ($rows = $sth->fetchrow_hashref()) {
    $cookie_jar->set_cookie(0,
                            $rows->{name},
                            $rows->{value},
                            $rows->{path},
                            $rows->{host_key},
                            443,
                            0,
                            $rows->{secure},
                            1000000,
                            0);
    say Dumper($cookie_jar);

} 
```

我在注释中添加了 set_cookie 值，以使该方法对其他人更明显地适应他们自己的目的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-18T16:17:12.303

When accessing elements in an array reference such as $rows use the arrow operator. In your case change: `@$rows[0]` to: `$rows->[0]` for each element.

# java - Java 延迟加载异常

> ID：16087926
> 
> 赞同：3
> 
> 时间：2013-04-18T16:07:36.833
> 
> 标签：java, exception, lazy-loading

我知道在 Java 中，类是使用惰性方式加载的，因此在使用它们之前不会加载它们。是否出于某种原因对异常进行了不同的处理？我刚刚遇到了`ClassNotFound`一个异常类的异常，即使没有抛出异常。

例子：

```
public class A {    

  public static void main(String[] args) {

      if( args.length == 1 ){
          new C();
      }

      if( args.length > 2 ){

//          try {
//              B.throwAnException();
//          } catch (com.google.protobuf.InvalidProtocolBufferException e) {
//              e.printStackTrace();
//          }
     }
  }

} 
```

B类：

```
import com.google.protobuf.InvalidProtocolBufferException;

public class B {

  static{
    System.out.println( "Load Class B" );
  }

  static void throwAnException() throws InvalidProtocolBufferException{
    throw new com.google.protobuf.InvalidProtocolBufferException("jkl");
  }

} 
```

C类：

```
public class C {

  static{
    System.out.println( "Load class C" );
  }

} 
```

当我用一个参数运行这样的程序时，我得到：

```
$java A arg1
Load class C 
```

但是，如果我取消注释 A 类中的 try/catch，我会得到：

```
$ java A arg1
Exception in thread "main" java.lang.NoClassDefFoundError: com/google/protobuf/InvalidProtocolBufferException 
```

当没有抛出异常/没有加载类时，为什么 Java 会尝试加载异常类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T16:22:43.037

VM 可能需要准备异常跳转表，这需要 catch 子句中提到的所有异常类型。这必须在第一次调用该方法之前设置。

如果你的程序是

```
 if( args.length > 2 )
        throw new InvalidProtocolBufferException(); 
```

或者

```
 if( args.length > 2 )
        try {
            B.throwAnException();
        } catch (Exception e) {
            e.printStackTrace();
        } 
```

没关系，因为异常类型没有出现在 catch 子句中。

* * *

JLS 实际上并没有强制类加载应该有多懒惰——它可以尽可能地懒惰，另一方面，如果 VM 选择预先加载所有类，如果不能这样做则保释，JLS 也允许. 见[http://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html#jls-12.1.2](http://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html#jls-12.1.2)

> 在初始链接时，解析步骤是可选的。实现可以从很早就被链接的类或接口解析符号引用，甚至可以递归地解析来自被进一步引用的类和接口的所有符号引用。...... 一个实现可能会选择仅在积极使用符号引用时才解析它...... 可能会发生加载和链接错误在程序执行之前，如果它们涉及到类 Test 中提到的类或接口或任何进一步的递归引用的类和接口

但是，JLS 对何时可以进行类初始化非常严格。因此，在您的示例中，异常类将提前加载，但在`new InvalidProtocolBufferException()`到达之前不得进行初始化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T16:17:14.200

> Loading class in JVM is recursive. When load a class, all referenced class will be loaded before.

`InvalidProtocolBufferException` was referenced by `A`. When loading `A`, all classes referenced by a will loaded.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T16:16:36.367

您正在调用一个引用缺失类的方法。当你运行一个方法时（如果不是更早的话），方法中引用的所有类都必须被解析——换句话说，延迟加载并不像你想象的那么懒惰。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T16:09:46.357

JVM 将尝试加载刚刚加载的类直接引用的类。即它会尝试解决所有可见的问题。

在您上面的示例中，我怀疑您已经针对 Google 库进行了编译，但您没有将它包含在您的 runtime`CLASSPATH`中。

# mysql - MySQL LIKE 仅匹配整数

> ID：16087929
> 
> 赞同：0
> 
> 时间：2013-04-18T16:07:46.240
> 
> 标签：mysql, sql-like

我正在尝试从我的数据库中获取在垂直管道分隔值中有一个数字的记录。

我有这样的查询：

```
SELECT * FROM level_3 

WHERE 
    date_end = -6 

AND 
    ccode = 'GB'

AND ( 
    responsible LIKE '%5%' OR 
    accountable LIKE '%5%' OR 
    consulted LIKE '%5%' OR 
    informed LIKE '%5%'
    ) 
```

结果如下：

```
date_end    ccode    responsible    accountable    consulted    informed
-6          GB       |6|            |6|            |8|9|15|     |8|
-6          GB       |6|5|          |6|            |8|          |16| 
```

但是它与**LIKE %5%**匹配 15但我只希望它匹配确切的数字。我该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T16:10:40.267

试试这个查询：

```
SELECT * FROM level_3 

WHERE 
    date_end = -6 

AND 
    ccode = 'GB'

AND ( 
    responsible LIKE '%|5|%' OR 
    accountable LIKE '%|5|%' OR 
    consulted LIKE '%|5|%' OR 
    informed LIKE '%|5|%'
    ) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T16:16:02.190

LIKE 有一个正则表达式挂件。

```
SELECT * FROM level_3 
WHERE date_end = -6 
AND ccode = 'GB'
AND ( 
    responsible REGEXP '\|[0-9]+\|' OR 
    ...
) 
```

（备注其他用途：用于从头到尾`'^ ... $'`的总匹配。）`^``$`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T16:21:55.453

你想要什么就像

```
Where concat('|',responsible,'|') like '%|5|%' 
```

# php - 使用 file_get_contents 连接到另一台服务器的 url

> ID：16087931
> 
> 赞同：0
> 
> 时间：2013-04-18T16:07:50.443
> 
> 标签：php, proxy, file-get-contents

抱歉英语不好。我的网站服务器 ip 无法连接到我的支付银行网站，这个脚本是：

```
$client = new nusoap_client('https://pgws.bpm.bankmellat.ir/pgwchannel/services/pgw?wsdl'); 
```

我需要连接到另一台服务器，而不是连接到银行网站。

对于另一台服务器，我使用这个脚本，如代理：

```
<?php header('Content-type: text/xml'); $file = file_get_contents('https://pgws.bpm.bankmellat.ir/pgwchannel/services/pgw?wsdl');echo $file;?> 
```

在第二个服务器中并在我的原始脚本中使用我的第二个 directadmin 主机域作为原始 url：

```
$client = new nusoap_client('http://seccond-host-domain.com'); 
```

但这会产生很多错误，因为这个脚本传输文件，我认为我的想法不能做到这一点。

错误是：

```
HTTP Error: server failed to send headers 
```

有人说应该使用 curl，有人说使用代理服务器。但我已经尝试过了，我无法解决这个问题。我没主意了。请查看详细清晰的说明

我的完整脚本是：

```
<?php if ($_POST['PayRequestButton'] == 'settel') { SETTEL_PROCCES();} function SETTEL_PROCCES(){

require_once("./lib/nusoap.php");

    $client = new nusoap_client('https://pgws.bpm.bankmellat.ir/pgwchannel/services/pgw?wsdl');

    $namespace='http://interfaces.core.sw.bps.com/';

    $terminalId = $_POST['termID'];

    $userName = $_POST['username'];

    $userPassword = $_POST['password'];

    $orderId = $_POST['orderID'];

    $settleSaleOrderId = $_POST['orderID'];

    $settleSaleReferenceId = $_POST['ReferenceId'];

                        // Check for an error

                        $err = $client->getError();

                        if ($err) {

                            echo '<h2>Constructor error</h2><pre>' . $err . '</pre>';

                            die();

                        }

                        $parameters = array(

                            'terminalId' => $terminalId,

                            'userName' => $userName,

                            'userPassword' => $userPassword,

                            'orderId' => $orderId,

                            'saleOrderId' => $settleSaleOrderId,

                            'saleReferenceId' => $settleSaleReferenceId);

                        // Call the SOAP method

                        $result = $client->call('bpSettleRequest', $parameters, $namespace);

                        // Check for a fault

                        if ($client->fault) {

                            echo '<h2>Fault05</h2><pre>';

                            print_r($result);

                            echo '</pre>';

                            die();

                        } 

                        else {

                            $resultStr = $result;

                            $err = $client->getError();

                            if ($err) {

                                // Display the error

                                echo '<h2>Error</h2><pre>' . $err . '</pre>';

                                die();

                            } 

                            else {

                                // Update Table, Save Settle Status 

                                // Note: Successful Settle means that sale is settled.

                                //echo "<script>alert('Settle Response is : " . $resultStr . "');</script>";

                            //  echo "Settle Response is : " . $resultStr;

                            }// end Display the result

                        }// end Check for errors    

    echo "

<br><br><br><br><br><br><br>

<center>

<table dir=rtl width=400 height=40 cellpadding=2 cellspacing=1 bgcolor='#7c931a'><tr><td bgcolor='#f6fff0' style='font-family:tahoma; font-size:12px; color:#738b3b; ' align=center >

<br>

<span style='font-size:14px;' >".check_mellat_state_error($resultStr)." 

<br><br>

<a href='default.php'>صفحه اصلي</a>

<br><br>

</td></tr></table>

</center>

";} function check_mellat_state_error($ResCode){

switch($ResCode){

    case '0' :

        $prompt="تراکنش با موفقيت انجام شد.";

        break;

    case '11' :

        $prompt="شماره کارت نامعتبر است.";

        break;

    case '12' :

        $prompt="موجودي کافي نيست.";

        break;

    case '13' :

        $prompt="رمز نادرست است.";

        break;

    case '14' :

        $prompt="تعداد دفعات وارد کردن رمز پيش از حد مجاز است.";

        break;

    case '15' :

        $prompt="کارت نامعتبراست.";

        break;

    case '17' :

        $prompt="کاربر از انجام تراکنش منصرف شده است.";

        break;

    case '18' :

        $prompt="تاريخ انقضاي کارت گذشته است.";

        break;

    case '111' :

        $prompt="صادرکننده کارت نامعتبر است.";

        break;

    case '112' :

        $prompt="خطاي سوييچ صادرکننده کارت";

        break;

    case '113' :

        $prompt="پاسخ از صادرکننده کارت دريافت نشد.";

        break;

    case '114' :

        $prompt="دارنده کارت مجاز به انجام اين تراکنش نيست.";

        break;

    case '21' :

        $prompt="پذيرنده نامعتبر است";

        break;

    case '22' :

        $prompt="ترمينال مجوز ارائه سرويس درخواستي را ندارد.";

        break;

    case '23' :

        $prompt="خطاي امنيتي رخ داده است.";

        break;

    case '24' :

        $prompt="اطلاعات کاربري پذيرنده نامعتبر است..";

        break;

    case '25' :

        $prompt="مبلغ نامعتبر است.";

        break;

    case '31' :

        $prompt="پاسخ نامعتبر است.";

        break;

    case '32' :

        $prompt="فرمت اطلاعات وارد شده صحيح نيست.";

        break;

    case '33' :

        $prompt="حساب نامعتبر است.";

        break;

    case '34' :

        $prompt="خطاي سيستمي";

        break;

    case '35' :

        $prompt="تاريخ نامعتبر است.";

        break;

    case '41' :

        $prompt="شماره درخواست تکراري است.";

        break;

    case '42' :

        $prompt="تراکنش sale يافت نشد.";

        break;

    case '43' :

        $prompt="قبلا درخواست verify داده شده است.";

        break;

    case '44' :

        $prompt="درخواست verify  يافت نشد.";

        break;

    case '45' :

        $prompt="تراکنش settle شده است.";

        break;

    case '46' :

        $prompt="تراکنش settle نشده است.";

        break;

    case '47' :

        $prompt="تراکنش settle يافت نشد.";

        break;

    case '48' :

        $prompt="تراکنش reverse شده است.";

        break;

    case '49' :

        $prompt="تراکنش refund يافت نشد.";

        break;

    case '412' :

        $prompt="شناسه قبض نادرست است.";

        break;

    case '413' :

        $prompt="شناسه پرداخت نادرست است.";

        break;

    case '414' :

        $prompt="سازمان صادرکننده قبض نامعتبر است.";

        break;

    case '415' :

        $prompt="زمان جلسه کاري به پايان رسيده است.";

        break;

    case '416' :

        $prompt="خطا در ثبت اطلاعات";

        break;

    case '417' :

        $prompt="شناسه پرداخت کننده نامعتبراست.";

        break;

    case '418' :

        $prompt="اشکال در تعريف اطلاعات مشتري";

        break;

    case '419' :

        $prompt="تعداد دفعات ورود اطلاعات از حد مجاز گذشته است.";

        break;

    case '421' :

        $prompt="IP نامعتبر است";

        break;

    case '51' :

        $prompt="تراکنش تکراري است.";

        break;

    case '52' :

        $prompt="سرويس درخواستي موجود نمي باشد.";

        break;

    case '54' :

        $prompt="تراکنش مرجع موجود نيست.";

        break;          

    case '55' :

        $prompt="تراکنش نامعتبر است.";

        break;

    case '61' :

        $prompt="خطا در واريز";

        break;                          

    DEFAULT :

        $prompt="خطاي نامشخص";

        break;

}

return  'کد ' . $ResCode .' : '. $prompt;

}?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T16:26:41.967

也许[允许 url-fopen](http://www.php.net/manual/en/filesystem.configuration.php#ini.allow-url-fopen)被禁用？

使用 file_get_contents() 时，可能无法通过 SSL 获取 httpS？据我所知，该方法是一个非常简单/愚蠢的 url fetcher

您可以尝试使用适当的标题为您的 file_get_contents 调用设置上下文。请参阅[http://php.net/manual/en/function.file-get-contents.php#example-2320](http://php.net/manual/en/function.file-get-contents.php#example-2320)作为开始。

如果您需要更正确的 URL 获取控制（如果您需要获取 HTTPS 页面，可能会这样做），请参阅有关 curl 函数的 PHP 手册页。@Marc B 有一个很好的链接作为上面的评论，但您可能不需要代理部分（您可能需要，这可能取决于您的网络主机的设置）

如果我们有更多关于正在发生的事情的详细信息，或者关于错误的更多详细信息，我们可以提出更多建议。

# c# - 单例中的 INotifyPropertyChanged 并绑定到 WPF 元素

> ID：16087932
> 
> 赞同：1
> 
> 时间：2013-04-18T16:07:54.490
> 
> 标签：c#, wpf, mvvm, binding

我再次尝试使用 MVVM，目前我的代码遇到了两个问题。
首先让我解释一下代码结构：

我有这样的课程（当然是简化的）：

```
public abstract class NavigationServiceBase : NotifyPropertyChangedBase, INavigationService
{
   private IView _currentView;
   public IView CurrentView
   {
       get { return _currentView; }
       protected set
       {
           _currentView = value;
           OnPropertyChanged("CurrentView");
       }
   }

   public virtual void DoSomethingFancy()
   { 
       CurrentView = ...; // here I expect it to fire OnPropertyChanged and notify my View
   }
} 
```

从这个基类继承的单例：

```
public class NavigationService : NavigationServiceBase
{
    private static readonly INavigationService _instance = new NavigationService();
    public static INavigationService Instance { get { return _instance; } }

    ...
} 
```

视图模型：

```
private INavigationService _navigationService;

public IView CurrentView { get { return _navigationService.CurrentView; } }
public ICommand NavigateCommand { get; private set; }

public MainWindowViewModel()
{
    _navigationService = NavigationService.Instance;
    NavigateCommand = new RelayCommand(param => Navigate(param));
}

private void Navigate(object requestedPage)
{
    _navigationService.Navigate((string)requestedPage);
    //OnPropertyChanged("CurrentView"); // this works , but...
} 
```

现在的问题：
1.) 我在 Visual Studio 2012 Express 中编辑 XAML。它似乎有效，但我收到一条带有此消息的警告：`Unable to load one or more of the requested types. Retrieve the LoaderExceptions for more information.`它显示在我声明绑定 ViewModel 的资源时的部分。这是什么意思？如果我摆脱单例，消息就会消失。无论哪种方式，项目都可以正常编译和运行。

2.) 似乎我的 OnPropertyChanged("CurrentView") 没有触发或其他什么，因为我必须从 ViewModel 本身手动调用此方法。如果我从基类或继承单例中尝试它，它不起作用。（绑定只是忽略新值）。如果我在传递命令时手动执行此操作，它会起作用。是的，这只是额外的一行代码，但我想知道，有没有办法让它在没有这样“作弊”的情况下工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T16:13:56.030

问题是您绑定到 ViewModel 中的属性：

```
public IView CurrentView { get { return _navigationService.CurrentView; } } 
```

这`NatigationService`是 raise `PropertyChanged`，但这发生在 中`_navigationService`，而不是在 ViewModel 本身中，因此 View 永远不会看到该事件。

有两种常见的选择 -

您可以在导航服务上监听`PropertyChanged`事件，并在需要时在本地处理它：

```
_navigationService = NavigationService.Instance;
_navigationService.PropertyChanged += (o,e) => 
{
   // When navigation raises prop changed for this property, raise it too
   if (e.PropertyName == "CurrentView")
     OnPropertyChanged("CurrentView");
}; 
NavigateCommand = new RelayCommand(param => Navigate(param)); 
```

另一种选择是公开服务，并直接绑定到它：

```
public INavigationService Navigation { get { return _navigationService; } } 
```

然后，在您的视图中，绑定到服务内部的内容而不是本地属性：

```
<ContentPresenter Content="{Binding Navigation.CurrentView}" /> 
```

# jquery - jQuery不会改变类属性

> ID：16087934
> 
> 赞同：2
> 
> 时间：2013-04-18T16:08:01.963
> 
> 标签：jquery

我正在尝试创建一个简单的分页控件，这是代码：-

```
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<title>Untitled Document</title>
<script type="text/javascript">

  $(document).ready(function() {
    $(".pageTab").click(function(e) {
      $("#pagination > a > div").attr("class", "pageTab");
      $(this).attr("class", "pageSelect");
    });
  });

</script>

<style>
  #pagination{width:100%; height:20px; float:left; margin-left:235px;}
  .pageTab{width:14px; height:16px; padding:2px 0px 2px 6px; margin-right:2px; background-color:#fff; border:1px solid #999; color:#0066FF; font-size:11px; cursor:pointer; float:left;}
  .pageTab:hover{width:14px; height:16px; padding:2px 0px 2px 6px; margin-right:2px; background-color:#CCC; border:1px solid #999; color:#0066FF; font-size:11px; cursor:pointer;float:left;}
  .pageSelect{width:14px; height:16px; padding:2px 0px 2px 6px; margin-right:2px; background-color:#CCC; border:1px solid #999; color:#0066FF; font-size:11px; cursor:pointer;float:left;}
</style>
</head>

<body>

    <div id="pagination">

        <a href="#gPage1" class="blue">
        <div id="g1" class="pageSelect">1
        </div>
        </a>

        <a href="#gPage2" class="blue">
        <div id="g2" class="pageTab">2
        </div>
        </a>

        <a href="#gPage3" class="blue">
        <div id="g3" class="pageTab">3
        </div>
        </a>

        <a href="#gPage4" class="blue">
        <div id="g4" class="pageTab">4
        </div>
        </a>

        <a href="#gPage5" class="blue">
        <div id="g5" class="pageTab">5
        </div>
        </a>

        <a href="#gPage6" class="blue">
        <div id="g6" class="pageTab">6
        </div>
        </a>

    </div>  
</body> 
```

如果单击数字 2-6，则会更改类别并应用正确的配色方案。但是，当您单击数字 1 时，该类保持不变。

这似乎与哪个 DIV 开始与`pageSelect`班级生活有关。如果`pageSelect`将代码中的数字 2 更改为并加载页面，则数字 1 和 3-6 都可以，但数字 2 的类不会改变。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T16:14:02.687

尝试改变：

```
$(this).attr("class", "pageSelect"); 
```

至：

```
$(this).addClass('pageSelect').removeClass('pageTab'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T16:10:19.170

将您的点击选择器更改为：

```
 $(".pageTab, .pageSelect").click(function(e) { ... } 
```

# c# - VB 到 C# 转换 DateAndTime 等效

> ID：16087935
> 
> 赞同：4
> 
> 时间：2013-04-18T16:08:02.700
> 
> 标签：c#, .net, vb.net

我正在尝试将此 VB 块转换为 C#。

```
 Public Function AddWorkingDays(ByVal DateIn As DateTime, _
   ByVal ShiftDate As Integer) As DateTime
    Dim b As Integer

    Dim datDate As DateTime = DateIn ' Adds the [ShiftDate] number of working days to DateIn'
    For b = 1 To ShiftDate
        datDate = datDate.AddDays(1)
        ' Loop around until we get the need non-weekend day'
        If Weekday(datDate) = 7 Then
            datDate = datDate.AddDays(2)
        End If
    Next
    Return datDate
End Function 
```

到目前为止我有

```
public DateTime AddWorkingDays(DateTime DateIn, int ShiftDate)
{
    int b = 0;

    DateTime datDate = DateIn;
    // Adds the [ShiftDate] number of working days to DateIn
    for (b = 1; b <= ShiftDate; b++)
    {
        datDate = datDate.AddDays(1);
        // Loop around until we get the need non-weekend day
        if (DateAndTime.Weekday(datDate) == 7)
        {
            datDate = datDate.AddDays(2);
        }
    }
    return datDate;
} 
```

我知道 C# DateAndTime 中不存在我只是将它放在 if 语句中以完成代码块。我真正的问题是让 IF 语句起作用。我不确定 DateTime.Now.Weekday 是否与之前的 VB 代码中的语句相同。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-18T16:10:12.953

只需使用[DayOfWeek](http://msdn.microsoft.com/en-us/library/system.dayofweek.aspx)枚举，例如

```
datDate.DayOfWeek == DayOfWeek.Saturday 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-18T16:11:00.437

[`Weekday`](http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.dateandtime.weekday.aspx)返回`7`for `Saturday`，因此您可以使用`DateTime.DayOfWeek`属性并将其与 进行比较`DayOfWeek.Saturday`：

```
 if (datDate.DayOfWeek == DayOfWeek.Saturday)
    {
        datDate = datDate.AddDays(2);
    } 
```

# javascript - 在浏览弹出窗口中旋转图像？

> ID：16087936
> 
> 赞同：1
> 
> 时间：2013-04-18T16:08:04.597
> 
> 标签：javascript, jquery, html

我有一个带有图像缩略图的页面，我将其包含在锚标记中，这样当单击时，更大的图像将显示在单独的浏览器弹出窗口中。

JSP：

```
<a href="#"><img id="<c:out value='${theImg.imgID}'/>" src="<c:out     value="${pageContext.request.contextPath}"/>/ImageServlet?imgID=<c:out value='${theImg.imgID}'/>" width="50" height="50" onClick='showImage("<c:out value='${pageContext.request.contextPath}'/>/ImageServlet?imgID=<c:out value='${theImg.imgID}'/>","<c:out value='${theImg.imgID}'/>");' border="0" alt=""/></a> 
```

Javascript：

```
win = window.open(url, "", "width=500, height=350, toolbar=yes, menubar=yes, scrollbars=yes, resizable=no, location=no, top=285, left=575"); 
```

现在我想在弹出窗口中为图像添加旋转功能（默认情况下，浏览器只提供缩放功能）。我知道我可以使用 JQueryRotate 之类的东西将此功能添加到 IMG 元素。但问题是我不知道如何获取弹出窗口中显示的 IMG 元素的句柄或 ID。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T16:12:29.570

您需要将脚本直接添加到弹出窗口中。或者，您可以使用 jquery 制作一个看起来和感觉更好的伪弹出窗口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T17:24:40.067

您无法获取 IMG 元素的句柄，因为您打开的窗口仅显示您作为 URL 传递给它的图像，它不包含 HTML 标记。

更好的选择可能是打开一个 HTML 页面，然后操作它的 DOM。这是一个类似的链接：[js open popup window and accesses it's element in another page](https://stackoverflow.com/questions/10468136/js-open-popup-window-and-acces-its-element-in-another-page)

# bash - Tomcat 7 BASH CP 复制文件名但不复制文件内容？

> ID：16087937
> 
> 赞同：1
> 
> 时间：2013-04-18T16:08:06.500
> 
> 标签：bash, tomcat, cp

我有一个特殊的问题：

以下 BASH 脚本在 Tomcat 5 下运行良好。当 Tomcat 5 升级到 Tomcat 7 时，脚本失败。（可能是巧合，我不知道） 该脚本由 servlet 中的 response.sendRedirect() 语句启动。

BASH 脚本执行 CP 命令两次（count = 0, 1）。第一次 (count = 0) CP 命令按预期执行。第二次它只复制文件名而不复制文件的内容。

```
count=0;
while [[ $count -lt ${#param[*]} ]]; do
  echo "cp $dirfrom${param[$count]} $dirto${param[$count]}<br>"
  case ${param[$count]} in
    *.jpg) cp $dirfrom${param[$count]} $dirto${param[$count]} ;;
    *.gif) cp $dirfrom${param[$count]} $dirto${param[$count]} ;;
  esac
  let count++
done 
```

如您所见，我在第 3 行有一个测试输出行。如果我在第 3 行手动执行回显的 CP，则 CP 会按预期执行。

有什么线索吗？

# ios - 将事件从 (UITableViewCell->UIScrollView) 传递给拥有 UITableView

> ID：16087939
> 
> 赞同：3
> 
> 时间：2013-04-18T16:08:11.473
> 
> 标签：ios, objective-c, uitableview, uiscrollview

我有一个标准`UITableView`，其中填充了自定义单元格，这些单元格使用`UIImageView`. 我可以点击会触发该`UITableView's`方法的图像：

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
```

但是我想在这些图像上启用捏缩放，这需要嵌套`UIImageView`在 a 中`UIScrollView`，所以这就是我所做的。它看起来像这样：

```
@interface SMLargeGalleryCell : UITableViewCell
@property (strong, nonatomic) UIImageView *assetImageView;
@property (strong, nonatomic) UIScrollView *scrollView;
@end 
```

但是，现在当我点击图像时，`UITableView`不再收到对 `didSelectRowAtIndexPath`. 如果我点击单元格之间，该事件将触发。问题似乎`UIScrollView`是没有转发事件。

我怎样才能做到这一点？
我正在考虑这样的事情（尽管我知道这很荒谬）：

```
-(IBAction)myScrollViewAction:(id)sender{
   self.scrollView.parentTableView didSelectRowAtIndexPath.....;
} 
```

我在这里想念什么？
这与响应者链有关吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T21:47:44.610

请参阅我对似乎在结构上与您的问题相似的问题的回答：[Horizo​​ntal UIScrollView have vertical UIScrollViews inside - how to prevent scrolling of internal scroll views when scrolling outer Horizo​​ntal view?](https://stackoverflow.com/questions/13272860/horizontal-uiscrollview-having-vertical-uiscrollviews-inside-how-to-prevent-sc)

不久，我的解决方案是破解两者：

1) **UIGestureRecognizerDelegate 协议**的**shouldRecognizeSimultaneouslyWithGestureRecognizer**。

 **使用它，您可以同时在表格视图和单元格上捕捉手势。

2) 原生 UIScrollView 的**panGestureRecognizer**。

由于 UITableView 是 UIScrollView 的子类，因此它也应该具有**panGestureRecognizer**（可能还有其他一些）。

看看我使用的模式 - 我相信你可以将它转换为在你的情况下使用。**

# javascript - 骨干全局成功处理

> ID：16087943
> 
> 赞同：0
> 
> 时间：2013-04-18T16:08:16.663
> 
> 标签：javascript, jquery, rest, backbone.js

在我们的项目中，我们使用主干来访问 REST 服务。
此服务提供一个 HTTP 标头，其中包含一种会话令牌以对当前用户进行身份验证。
这个令牌在每个请求上都会改变。

我们将此令牌与我们的登录模型一起使用来确定当前路由是否需要登录。

第一个想法是使用 jQuery.ajaxSuccess。

```
$(document).ajaxSuccess(function(event, xhr, settings) {
    updateToken(xhr);
}); 
```

几乎可以工作，但是在主干中的成功处理程序之后触发了全局成功。
因此，如果任何主干成功处理程序向服务器发起新请求，此时它有一个旧令牌，该请求将被拒绝。

在每个成功处理程序中调用 updateToken 或使用 setTimeout 继续处理是非常费力且容易出错的。它可能会被遗忘。

现在我们创建了这个解决方案

```
var BBsync = Backbone.sync;
Backbone.sync = function(method, model, options) {
    var success = options.success;
    options.success = function(model, response, options) {
        updateToken(options);
        success(model, response, options);
    };
    return BBsync.call(this, method, model, options);
}; 
```

所有成功方法都被包装了。
这个解决方案有风险吗？
我们是否忽略了什么？
有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T07:56:06.537

我可以确认您的方法有效，因为我们出于同样的原因做同样的事情。

# wordpress - 添加自定义模板 Wordpress 3.5.1

> ID：16087947
> 
> 赞同：0
> 
> 时间：2013-04-18T16:08:28.820
> 
> 标签：wordpress, wordpress-theming

我认为这是一个相对简单的过程，但（作为一个完全的菜鸟）我似乎无法弄清楚。管理仪表板中是否有添加和编辑模板的地方，还是我必须使用 FTP 客户端直接上传/编辑模板？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T19:20:05.043

您可以使用 WordPress 编辑器编辑您的主题，该编辑器位于：

```
Dashboard > Appearance > Editor 
```

在看到保存按钮之前，您必须确保文件是可写的，您可以通过 FTP 使文件可写。

# forms - Symfony2：动态添加元素到双嵌入关系表单

> ID：16087953
> 
> 赞同：1
> 
> 时间：2013-04-18T16:08:49.293
> 
> 标签：forms, validation, symfony, dynamic, double

像这样的一个模型：

```
class X
{
    /**
     * @ORM\OneToMany(targetEntity="Block", mappedBy="x",cascade={"all"}, orphanRemoval=true)
     */
    private $block;
...

class Block
{
    /**
     * @ORM\OneToOne(targetEntity="BlockA", mappedBy="block")
     */
    private $blockA;

    /**
     * @ORM\OneToOne(targetEntity="BlockB", mappedBy="block")
     */
    private $blockB;
...
class BlockA
{
... 
```

我可以通过 Ajax 以 XType 形式将 Blocks 动态添加到 X（集合）。它正在正确保存。

但我不能保存嵌套在块中的动态创建的 BlockA。这总是给我一个表单验证错误：“这个表单不应该包含额外的字段。”。

表单验证器允许“X”动态添加与“BlockA”或“BlockB”具有新关系的“Block”。但只是在“块”的集合中，它们都与“BlockA”类的对象有关系，或者它们都与“BlockB”类的元素有关系。用一些具有“BlockA”关系的“Block”和其他具有“BlockB”关系的“Block”来验证一个集合是不可能的（显示了验证错误额外字段）。

有任何想法吗？

# asp.net - 如何在 MVC 中使用 ASP.NET Web 窗体？

> ID：16087956
> 
> 赞同：3
> 
> 时间：2013-04-18T16:08:57.137
> 
> 标签：asp.net, asp.net-mvc, webforms

目前我正在重写一个应用程序以使用**ASP.NET MVC4**。
我正在使用带有**剃刀视图**的 C# 。
我有一些遗留的 Web 表单页面，我想在我的应用程序中不加修改地包含这些页面。
我希望它们与我的`_Layout`.
有没有一种方法可以在 MVC 布局中呈现 Web 表单页面，该页面仍然允许回发之类的工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T16:39:38.307

看看这里的一些信息：

[使用 ASP.NET MVC 3 混合 Razor 视图和 WebForms 母版页](http://bit.ly/eR4Eue)

[将 ASP.NET MVC 3 集成到现有升级的 ASP.NET 4 Web 窗体应用程序中](http://bit.ly/fPQcb8)

# ios - NSString \u0026 到 &

> ID：16087957
> 
> 赞同：-1
> 
> 时间：2013-04-18T16:09:01.170
> 
> 标签：ios, objective-c

我用我的应用程序下载了 html 文件，并注意到了很多：

```
\u0026 
```

我在网上搜索并注意到等于：`&`

所以我尝试将其替换为 & ：

```
newStr = [newStr stringByReplacingOccurrencesOfString:@"/u0026" withString:@"&"]; 
```

但所有这些`\u0026`都在字符串中并且不会替换。知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T16:38:28.493

您真正需要在这里使用的是 CFStringTransform() 核心基础函数将真正用于任何试图转换为转义形式和从转义形式转换的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T16:10:44.110

如果要替换子字符串，`\u0026`则需要：

```
newStr = [newStr stringByReplacingOccurrencesOfString:@"\\u0026" withString:@"&"]; 
```

注意需要有两个反斜杠。

# css - Google webfonts - 有没有办法@import 而不是 嵌入？

> ID：16087960
> 
> 赞同：0
> 
> 时间：2013-04-18T16:09:14.040
> 
> 标签：css, google-font-api

为客户在网站上工作 - 长篇大论，但我不允许编辑标记，只需包含一个覆盖样式表并在那里进行调整。

我需要导入谷歌字体，但由于要求我不能使用正常的嵌入方法。有没有办法在样式表中@import 谷歌字体？

**编辑：**为了澄清，我已经添加了以下代码，成功率为零（返回 404）：

`@import url(http://fonts.googleapis.com/css?family=Open+Sans+Condensed:300,700,300italic);`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-27T17:03:31.730

**接受的答案是错误的。**

切勿将 Google 生成的代码添加到您自己的 CSS 中，因为 Google 会根据您的用户代理提供不同的 CSS。并非所有浏览器都支持 WOFF 格式，因此切勿执行已接受答案中建议的操作。请参阅[Google 字体服务](https://developers.google.com/fonts/docs/technical_considerations#Serving)。

[要回答最初的问题，如果您无法访问外部域并且想自己托管字体并自己托管 CSS 代码，您应该从FontSquirrel](http://www.fontsquirrel.com/fonts/source-sans-pro)获取字体文件以及组合的 CSS 代码。下面是一个`@font-face`适用于所有 Web 浏览器的 CSS 规则示例：

```
@font-face {
    font-family: 'MyFontFamily';
    src: url('myfont-webfont.eot?#iefix') format('embedded-opentype'), 
         url('myfont-webfont.woff') format('woff'), 
         url('myfont-webfont.ttf')  format('truetype'),
         url('myfont-webfont.svg#svgFontName') format('svg');
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-18T16:16:58.707

当然。如果您可以访问样式表，只需直接添加由 google url 生成的代码。

这是 google 为字体“Dancing Script”生成的 URL：[http://fonts.googleapis.com/css?family=Dancing+Script](http://fonts.googleapis.com/css?family=Dancing+Script) 将其粘贴到浏览器地址栏中，您将看到需要放置的代码CSS 文件。

见小提琴：http: [//jsfiddle.net/David_Knowles/XVMzf/3/](http://jsfiddle.net/David_Knowles/XVMzf/3/)

```
@font-face {
    font-family: 'Dancing Script';
    font-style: normal;
    font-weight: 400;
    src: local('Dancing Script'), local('DancingScript'), url(http://themes.googleusercontent.com/static/fonts/dancingscript/v3/DK0eTGXiZjN6yA8zAEyM2bDH3ri20rYH10B2w3wbVeU.woff) format('woff');
} 

a {font-family: 'Dancing Script',serif,cursive;} 
```

# c# - 硒元素无法滚动到视图中：(34)。使用 NUnit，C#

> ID：16087961
> 
> 赞同：1
> 
> 时间：2013-04-18T16:09:24.293
> 
> 标签：c#, html, css, selenium, nunit

尝试单击`<a>`回归测试脚本中的标签时从标题中获取错误。我在这里研究了这个问题：[Selenium::WebDriver::Error::MoveTargetOutOfBoundsError: Element cannot be scrolled into view:[object HTMLSpanElement]](https://stackoverflow.com/questions/9270259/seleniumwebdrivererrormovetargetoutofboundserror-element-cannot-be-scroll)和这里：[https ://groups.google.com/forum/#!msg /webdriver/R2jwSWrIK44/RaCLRPlKIWEJ](https://groups.google.com/forum/#!msg/webdriver/R2jwSWrIK44/RaCLRPlKIWEJ)但我不明白问题的根本原因。

我试过使用 By.jQuery、By.Id、By.Css、By.Xpath 以及按索引选择，但总是得到相同的错误。以下是相关代码：

**HTML：**

```
<div id="divTabs">
    <a id="tabECheck" target="#divECheck">eCheck</a>
    <a id="tabAceComments" target="#divAceComments">Ace Comments</a>
    <a id="tabReviewComments" target="#divReviewComments">Review Comments</a>
    <a id="tabReviewHistory" target="#divReviewHistory">Review History</a>
</div> 
```

**CSS：**

```
#divTabs{
    writing-mode: tb-rl; 
    -webkit-transform: rotate(90deg);   
    -moz-transform: rotate(90deg);
    -ms-transform: rotate(90deg);
    -o-transform: rotate(90deg);
    transform: rotate(90deg);
    position: absolute;
    width: 27px; 
    padding: 0px; 
    height: auto;
    display: table-row;
    margin-bottom: 10px;
}

#divTabs a
{
    border: 1px solid #CCC;
    padding: 3px;
    white-space: nowrap;
    cursor: pointer;
    color: #3966BF;
    display: table-cell;
    background-color: #FFF;
} 
```

**C＃：**

```
element = driver.FindElement(By.Id("tabReviewComments"));
element.Click(); 
```

如您所见，我正在尝试单击`<a>`ID 为“tabReviewComments”的第三个标签。但是，如果我让脚本单击`<a>`ID 为“tabECheck”的第一个标签，则它的工作原理是我没有收到“无法将元素滚动到视图中”错误，单击该元素，并且脚本移过该行。可悲的是，我需要点击第三个`<a>`标签。`<a id="tabReviewComments" target="#divReviewComments">Review Comments</a>`除了移到顶部还有什么想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-27T04:12:09.433

就浏览器而言，该元素实际上可能是不可点击的，这可能是因为

*   它的位置在屏幕外（负空间）
*   它在另一个元素后面（如模态叠加或其他东西）
*   它的大小为 0（有时 css 可能很有趣，浏览器可能会计算出与您所看到的大小不同的大小）
*   系统中的 UI 错误，导致元素因其他原因不可见

# html - HTML5中的画布并创建多个圆圈

> ID：16087966
> 
> 赞同：1
> 
> 时间：2013-04-18T16:09:35.997
> 
> 标签：html, canvas

按照 w3c 学校对画布的解释，我了解创建形状...

```
<script>
  var canvas = document.getElementById('myCanvas');
  var context = canvas.getContext('2d');
  var centerX = canvas.width / 2;
  var centerY = canvas.height / 2;
  var radius = 20;

  context.beginPath();
  context.arc(centerX, centerY, radius, 0, 2 * Math.PI, false);
  context.fillStyle = 'green';
  context.fill();
  context.lineWidth = 5;
  context.strokeStyle = '#003300';
  context.stroke();
</script> 
```

这将在我的画布所在的位置形成一个绿色圆圈。

```
<canvas id="myCanvas"></canvas> 
```

但是 - 我想将该“圆圈”应用于页面上的多个位置，而通过 ID 执行此操作将是荒谬的。

如何将上下文（如上定义）应用于多个画布？我假设使用类，这似乎是合乎逻辑的方式。

```
<canvas class="redDot"></canvas>
<canvas class="redDot"></canvas>
<canvas class="redDot"></canvas>

<canvas class="greenDot"></canvas>
<canvas class="greenDot"></canvas>

<canvas class="blueDot"></canvas>
<canvas class="blueDot"></canvas>
<canvas class="blueDot"></canvas> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T16:25:11.527

You would have to iterate through each Element to apply the changes. I.E:

```
var dots = document.getElementsByClassName('dots');
for (var i=0;i<dots.length;i++){
    var canvas = dots[i];
    var context = canvas.getContext('2d');
    // Draw circles here 
} 
```

Ideally, you would only have one canvas element which you can draw multiple circles

```
var canvas = document.getElementById('myOneAndOnlyCanvas');
// Using CSS and layering can make background
var context = canvas.getContext('2d');

dot('red',50,50);
dot('blue',100,50);
//etc..

function dot(color,x,y){
  context.beginPath();
  context.arc(y, y, radius, 0, 2 * Math.PI, false);
  context.fillStyle = color;
  context.fill();
  context.lineWidth = 5;
  context.strokeStyle = '#003300';
  context.stroke();
} 
```

But if that doesn't fit your use case what about using an SVG object?

Since you mentioned w3 schools: [http://www.w3schools.com/svg/](http://www.w3schools.com/svg/) But ideally check out: [http://www.w3.org/Graphics/SVG/](http://www.w3.org/Graphics/SVG/)

Mind, Dom Heavy pages can seriously hurt load times. Depending on what you want to do it might be wiser just to use an image (eg. a large cluster of dots).

# javascript - 无法更新视图，数据绑定不起作用 - Angularjs 和 PhoneGap

> ID：16087970
> 
> 赞同：8
> 
> 时间：2013-04-18T16:09:42.407
> 
> 标签：javascript, android, cordova, angularjs

我正在尝试使用 PhoneGap（适用于 Android 设备）制作一个简单的待办事项应用程序。我还使用 AngularJS 进行数据绑定。
我想显示保存在数据库中的任务列表。当我使用 chrome 调试器进行调试时，我可以看到 SQL 请求有效，但是当我在模拟器或设备上启动应用程序时没有显示任何内容。

**DbCtrl.js**

```
var myApp = angular.module('myApp', []);

function DbCtrl($scope) {
$scope.init = function() {
    document.addEventListener("deviceready", onDeviceReady, false);     
}

function onDeviceReady() {
     var db = window.openDatabase("Database", "1.0", "Cordova Demo", 200000);
     db.transaction(populateDB, errorDB, successDB);
 }

 function populateDB(tx) {
    tx.executeSql('DROP TABLE IF EXISTS DEMO');
    tx.executeSql('CREATE TABLE IF NOT EXISTS DEMO (id unique, todo)');
    tx.executeSql('INSERT INTO DEMO (id, todo) VALUES (1, "first todo")');
    tx.executeSql('INSERT INTO DEMO (id, todo) VALUES (2, "Second todo")');
 }

 function errorDB(err){
    alert("Error processing SQL: "+err)
 }

 function successDB(){
    var db = window.openDatabase("Database", "1.0", "Cordova Demo", 200000);
    db.transaction(queryDB, errorDB);
 }

 // Query the database
function queryDB(tx) {
    tx.executeSql('SELECT * FROM DEMO', [], querySuccess, errorDB);
}

// Query the success callback
function querySuccess(tx, results) {
    console.log("Returned rows = " + results.rows.length);
       $scope.todos = results.rows;
}

$scope.init();
} 
```

**数据库索引.html**

```
<body ng-app="myApp" >

    <div ng-controller="DbCtrl">    

        <div>
            <h1>SimpleTodos</h1>
        </div>

        <div id="mainContent">
            <ul ng-repeat="todo in todos">
               <li>{{todo.id}}</li>
            </ul>
        </div>      
        <div class="ui-bar">
            <a href="edit.html">Add Note</a>
        </div>

    </div>

    <script src="../libs/cordova-2.5.0.js"></script>
    <script src="../libs/angular-1.0.5.js" type="text/javascript" ></script>
    <script src="dbCtrl.js" type="text/javascript" ></script>
</body> 
```

有人知道为什么视图没有更新吗？我们有什么办法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-18T16:26:35.977

这是因为查询是异步的。更新模型后，您必须触发摘要，以便 Angular 可以更新视图。

```
// Query the success callback
function querySuccess(tx, results) {
    console.log("Returned rows = " + results.rows.length);
    $scope.todos = results.rows;
    $scope.$apply(); //trigger digest
} 
```

# ajax - 通过 ajax 加载的 Html 不适用于 jQuery 事件

> ID：16087977
> 
> 赞同：3
> 
> 时间：2013-04-18T16:09:56.870
> 
> 标签：ajax, html, jquery

我在一个名为 checkout.tpl 的文件中有这段代码，还有一个 Javascript 代码，我将在下面评论：

```
$.ajax({
    url: 'index.php?route=checkout/payment_address',
    dataType: 'html',
    success: function(html) {
        $("#checkout").hide();
        $('#payment-address .checkout-content').html(html);
    },
    error: function(xhr, ajaxOptions, thrownError) {
        alert(thrownError + "\r\n" + xhr.statusText + "\r\n" + xhr.responseText);
    }
}); 
```

正如您在此处看到的，我使用 AJAX 加载了一些 HTML 内容。这是我正在加载的[HTML 内容。](http://pastie.org/7645865)注意**id=button-payment-address**的输入。所以在 checkout.tpl 我有这个 jQuery 代码：

```
$('#button-payment-address').on('click',function() {
    alert("Click");
    // here goes some code   
}); 
```

当我单击带有**id=button-payment-address**的输入时，是否应该出现带有“单击”的警报？那么没有显示并且代码永远不会执行，没有错误被触发所以我不知道出了什么问题。我用这个其他代码测试并得到相同的结果：

```
$('#button-payment-address').click(function() {
    alert("Click");
    // here goes some code   
});

// This seems to be not working with latest jQuery and generates a error
$('#button-payment-address').live('click', function() {
    alert("Click");
    // here goes some code   
}); 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T16:12:06.540

尝试这个

```
$('#payment-address').on('click','#button-payment-address',function() {
    alert("Click");
    // here goes some code   
}); 
```

# asp.net-mvc - IgnoreDataMember 属性在 **DE** 序列化期间跳过 json 对象属性

> ID：16087979
> 
> 赞同：1
> 
> 时间：2013-04-18T16:09:58.280
> 
> 标签：asp.net-mvc, json, validation, attributes, asp.net-web-api

[根据 docs](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.ignoredatamemberattribute.aspx)， IgnoreDataMember 属性只应在序列化期间考虑。

然而，据我所见，MVC 模型绑定也在 * *de* * json 序列化期间使用它。

考虑以下类：

```
public class Tax
{
    public Tax() { }

    public int ID { get; set; }

    [Required]
    [Range(1, int.MaxValue)]
    [IgnoreDataMember]
    public int PropertyId { get; set; }
} 
```

如果将以下 json 字符串 POST/PUT 到操作方法：

```
{"Position":0,"Description":"State sales tax","Rate":5,"RateIsPercent":true,"PropertyId":1912} 
```

我收到以下验证错误：

```
{
  "Message": "The request is invalid.",
  "ModelState": {
    "newTax.PropertyId": [
      "The field PropertyId must be between 1 and 2147483647."
    ]
  }
} 
```

`[Range(1, int.MaxValue)]`和`[Required]`属性均无效。

如果我删除该`[IgnoreDataMember]`属性，一切正常。

是否可以使用不同的属性来告诉 MVC 绑定在反序列化期间不要忽略该属性？

这仅在发布 json 字符串时发生。如果我发布名称/值字符串，一切正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T18:07:51.133

The answer has to do with the behavior of Json.net. That's what the model binding is using and it's checking `IgnoreDataMember` for both serialization and deserialization making it useless for me (since I want to only use it for serialization).

The `JsonIgnore` attribute works exactly the same way.

Given that, I pulled all the ignore attributes off my properties and switched to using json.net's conditional serialization methods.

So basically add this for the above PropertyId field:

```
public bool ShouldSerializePropertyId() { return false; } 
```

That allows deserialization to come in but blocks serialization from going out.

# java - 确定给定的单词字符串是否包含大于 5 个字母的单词

> ID：16087980
> 
> 赞同：4
> 
> 时间：2013-04-18T16:09:59.733
> 
> 标签：java, string

所以，我的家庭作业需要帮助。这是问题：

> 编写一个静态方法 ，`getBigWords`它获取一个`String` 参数并返回一个数组，其元素是参数中包含超过 5 个字母的单词。（单词被定义为连续的字母序列。）因此，给定`String`类似“加拿大有 87,000,000 人”，`getBigWords`将返回一个由两个元素组成的数组，“人”和“加拿大”。

到目前为止我所拥有的：

```
public static getBigWords(String sentence)
{
  String[] a = new String;
  String[] split = sentence.split("\\s");
  for(int i = 0; i < split.length; i++)
  {
    if(split[i].length => 5)
    {
      a.add(split[i]);
    }
  }
  return a;
} 
```

我不想要答案，只是一种引导我走向正确方向的方法。我是编程新手，所以我很难弄清楚我到底做错了什么。

**编辑：**

我现在将我的方法修改为：

```
public static String[] getBigWords(String sentence)
{
    ArrayList<String> result = new ArrayList<String>();
    String[] split = sentence.split("\\s+");
    for(int i = 0; i < split.length; i++)
    {
        if(split[i].length() > 5)
        {
            if(split[i].matches("[a-zA-Z]+"))
            {
                result.add(split[i]);
            }
        }
    }
    return result.toArray(new String[0]);
} 
```

它打印出我想要的结果，但是我用来提交作业的在线软件仍然说我做错了什么。更具体地说，它指出：

```
Edith de Stance states:
⇒     You might want to use: +=
⇒     You might want to use: ==
⇒     You might want to use: + 
```

不太清楚那是什么意思....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T16:19:09.973

主要问题是您不能拥有一个在添加元素时使其自身变大的数组。

您有 2 个选项：

*   [ArrayList](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html)（基本上是一个变长数组）。

*   使数组保证更大。

另外，一些注意事项：

数组的定义需要如下所示：

```
int size = ...;      //  V- note the square brackets here
String[] a = new String[size]; 
```

数组没有`add`方法，需要自己跟踪索引。

您目前仅在空间上进行拆分，因此`87,000,000`也将匹配。您可以手动验证字符串以确保它仅包含字母。

是`>=`，不是`=>`。

我相信该函数需要返回一个数组：

```
public static String[] getBigWords(String sentence) 
```

它实际上需要返回一些东西：

```
return result.toArray(new String[0]); 
```

而不是

```
return null; 
```

`"You might want to use"`建议指出您可能必须逐字符处理数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T16:19:49.623

First, try and print out all the elements in your `split` array. Remember, you do only want you look at words. So, examine if this is the case by printing out each element of the `split` array inside your for loop. (I'm suspecting you will get a false positive at the moment)

Also, you need to revisit your books on arrays in Java. You can not dynamically add elements to an array. So, you will need a different data structure to be able to use an add() method. An ArrayList of Strings would help you here.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T16:34:50.237

根据空格分割你的字符串，它将返回一个数组。您可以通过迭代该数组来检查每个单词的长度。
您可以通过这种方式拆分字符串`myString.split("\\s+");`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-20T00:49:33.097

尝试这个...

```
public static String[] getBigWords(String sentence)
    {
        java.util.ArrayList<String> result = new java.util.ArrayList<String>();
        String[] split = sentence.split("\\s+");
        for(int i = 0; i < split.length; i++)
        {
            if(split[i].length() > 5)
            {
                if(split[i].matches("[a-zA-Z]+"))
                {
                    result.add(split[i]);
                }
                if (split[i].matches("[a-zA-Z]+,"))
                {
                    String temp = "";
                    for(int j = 0; j < split[i].length(); j++)
                    {
                        if((split[i].charAt(j))!=((char)','))
                        {
                            temp += split[i].charAt(j);
                            //System.out.print(split[i].charAt(j) + "|");
                        }
                    }
                    result.add(temp);
                }
            }
        }
        return result.toArray(new String[0]);
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-18T16:30:37.427

你所做的是正确的，但你不能在数组中添加方法。您应该设置为 a[position]= spilt[i]; 如果您想忽略数字，请通过 Float.isNumber() 方法进行检查。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-18T16:22:51.700

您的逻辑是有效的，但您有一些语法问题。如果您没有使用 Eclipse 之类的 IDE 来显示语法错误，请尝试注释掉行以查明哪些行在语法上不正确。我还想告诉你，一旦创建了一个数组，它的长度就不能改变。希望这能让你朝着正确的方向前进。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-18T17:24:56.927

我会使用字符串标记器（java中的字符串标记器类）

遍历每个条目，如果字符串长度大于 4（或任何您需要的）添加到您返回的数组中。

你说没有代码，所以......（这就像 5 行代码）

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-18T16:45:25.587

除了 String 数组声明中的语法错误之外，应该像 new String[n] 和 add 方法在 Array 中不会出现，因此您应该像 a[i] = split[i]; 这样使用

您需要添加另一个条件以及长度条件来检查给定单词是否包含所有字母，这可以通过 2 种方式完成

第一种方法是使用 Character.isLetter() 方法，第二种方法是创建正则表达式来检查字符串是否只有字母。用谷歌搜索正则表达式并使用匹配器进行匹配，如下面 Pattern pattern=Pattern.compile(); 匹配器 matcher=pattern.matcher();

最后一点是使用另一个计数器（假设 j=0）来存储输出值，并在将字符串存储在数组中时递增该计数器。a[j++] = 分裂[i];

# java - 二进制搜索字符串数组

> ID：16087987
> 
> 赞同：1
> 
> 时间：2013-04-18T16:10:24.937
> 
> 标签：java, arrays, binary-search

如何对字符串数组进行排序以进行二进制搜索。下面我总是收到一个负数作为我的索引而不是正确的索引。请帮忙？如果单词不在数组中，则应返回 -1。

```
 public static int binary (String [] theword, String a) {
    int index = -1;
        Arrays.sort(theword);
        Arrays.toString(theword);
        index = Arrays.binarySearch(theword, a);
    return index;

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T16:15:59.807

有效，见下文

```
public static void main(String... args) {

    String words[] = { "abc3", "abc2", "abc1", "abc4" };

    Arrays.sort(words);
    System.out.println(Arrays.toString(words));
    {
        String word = "abc3";
        int index = Arrays.binarySearch(words, word);
        index = index >= 0 ? index : -1;
        System.out.println(word + " = " + index);
    }
    {
        String word = "abc11";
        int index = Arrays.binarySearch(words, word);
        index = index >= 0 ? index : -1;
        System.out.println(word + " = " + index);
    }
} 
```

输出

```
[abc1, abc2, abc3, abc4]
abc3 = 2
abc11 = -1 
```

当您需要原始数组中的索引时，您从排序后的数组中返回索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T16:22:30.667

文档指出[Arrays.binarySearch()](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#binarySearch%28char%5B%5D,%20char%29)的返回值如下：

> **返回：**
> 搜索键的索引，如果它包含在数组中；否则，（-（插入点）- 1）。插入点定义为将键插入数组的点：第一个元素的索引大于键，或者如果数组中的所有元素都小于指定的键，则为 a.length。请注意，这保证了当且仅当找到键时，返回值将 >= 0。

很明显，二进制搜索没有找到您的单词“to”。此外，如果它存在，它就会在这个数组的第 10 个索引中。作为`-(10) -1 == -11`

您很有可能正在搜索该单词`to`，但数组中的数据包含该单词`to`，其周围有一些空格，从而为您提供了不希望的但正确的二分搜索结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T16:26:32.860

我看到的一个常见错误是在相关单词中添加了一个空格。在添加到数组之前，对每个单词应用 trim() 函数。

# css - CSS：链接浮动过去的标题栏？

> ID：16087989
> 
> 赞同：0
> 
> 时间：2013-04-18T16:10:32.890
> 
> 标签：css, header, hyperlink, floating

演示： http: [//www.mindtale.com/test.html](http://www.mindtale.com/test.html)

我对 CSS 很陌生，所以我可能在这里使用了错误的代码。我正在尝试拥有一个可以调整到任何屏幕尺寸的网站，但同时，我希望永久放置我拥有的链接、投资组合和联系人，以便它将保留在标题栏上而不是浮动到左侧或就在它之外。我该如何解决这个问题？

谢谢您的帮助！:D

测试.html

```
<html>
<head>
<link rel="stylesheet" type="text/css" href="style.css"> 
<title>Mindtale Test Home</title>
</head>

<body>

<!-- Header -->

<div id="headerlogo">
<a href="index.html"><img src="images/logo.png"></a></div>

<div id="headerfill"></div>
<div id="header"></div>

<div id="headerlink1">

<a href="portfolio.html">Portfolio</a>
</div>

<div id="headerlink2">
<a href="contact.html">Contact</a>
</div>

<!-- Content -->
<div id="content">
<h2>A random heading</h2>
<p>Content Placeholder ... </p>
<p>Content Placeholder ... </p>
<p>Content Placeholder ... </p>
<p>Content Placeholder ... </p>
<p>Content Placeholder ... </p>
<p>Content Placeholder ... </p>
<p>Content Placeholder ... </p>
<p>Content Placeholder ... </p>
<p>Content Placeholder ... </p>
<p>Content Placeholder ... </p>
<p>Content Placeholder ... </p>
<p>Content Placeholder ... </p>
<p>Content Placeholder ... </p>
<p>Content Placeholder ... </p>
<p>Content Placeholder ... </p>
<p>Content Placeholder ... </p>
<p>Content Placeholder ... </p>
<p>Content Placeholder ... </p>
<p>Content Placeholder ... </p>
<p>Content Placeholder ... </p>
<p>Content Placeholder ... </p>
<p>Content Placeholder ... </p>
<p>Content Placeholder ... </p>
<p>Content Placeholder ... </p>
<p>Content Placeholder ... </p>
<p>Content Placeholder ... </p>
<p>Content Placeholder ... </p>
<p>Content Placeholder ... </p>
<p>Content Placeholder ... </p>
<p>Content Placeholder ... </p>
<p>Content Placeholder ... </p>
<p>Content Placeholder ... </p>
<p>Content Placeholder ... </p>

<h2>A random heading</h2>
<p>Content Placeholder ... </p>
<p>Content Placeholder ... </p>
<p>Content Placeholder ... </p>
<p>Content Placeholder ... </p>
<p>Content Placeholder ... </p>
<p>Content Placeholder ... </p>
<p>Content Placeholder ... </p>
<p>Content Placeholder ... </p>
<p>Content Placeholder ... </p>
<p>Content Placeholder ... </p>
<p>Content Placeholder ... </p>
<p>Content Placeholder ... </p>
<p>Content Placeholder ... </p>
<p>Content Placeholder ... </p>
<p>Content Placeholder ... </p>
<p>Content Placeholder ... </p>
<p>Content Placeholder ... </p>
<p>Content Placeholder ... </p>
<p>Content Placeholder ... </p>
<p>Content Placeholder ... </p>
<p>Content Placeholder ... </p>
<p>Content Placeholder ... </p>
<p>Content Placeholder ... </p>
<p>Content Placeholder ... </p>
<p>Content Placeholder ... </p>
<p>Content Placeholder ... </p>
<p>Content Placeholder ... </p>
<p>Content Placeholder ... </p>
<p>Content Placeholder ... </p>
<p>Content Placeholder ... </p>
<p>Content Placeholder ... </p>
<p>Content Placeholder ... </p>
<p>Content Placeholder ... </p>
</div>

<!-- Footer -->

<div id="footer">
Mindtale &copy; 2013
</div>

</body>
</html> 
```

样式.css

```
html { 
height:100%; /* fix height to 100% for IE */
max-height:100%; /* fix height for other browsers */
background: url(images/bg.jpg) no-repeat center center fixed; /* add background image */
-webkit-background-size: cover; /* fix height for other browsers */
-moz-background-size: cover; /* fix height for other browsers */
-o-background-size: cover; /* fix height for other browsers */
background-size: cover; /* fix height for other browsers */
}

/* Header */
/* -------------------------------------------------- */

div#header {
z-index:3;
position:fixed;
background: url(images/header.png) no-repeat center;
height: 102px;
top:0px;
left:0px;
width:100%;
padding: 0px;
}

div#headerfill {
z-index:4;
position:fixed;
background: url(images/headerfill.png) repeat-x;
height: 98px;
top:0px;
left:0px;
width:100%;
padding: 0px;
}

div#headerlink1 {
font-family: "Lucida Sans Unicode", "Lucida Grande", sans-serif;
font-size:90%;
z-index:4;
position:fixed;
top:55px;
left:18%;
color:#999;
padding: 0px;
}

div#headerlink2 {
font-family: "Lucida Sans Unicode", "Lucida Grande", sans-serif;
font-size:90%;
z-index:4;
position:fixed;
top:55px;
left:78%;
color:#999;
padding: 0px;
}

div#headerlogo {
z-index:5;
position:fixed;
top:30px;
left:42%;
color:#999;
padding: 0px;
}

/* Content */
/* -------------------------------------------------- */

div#content {
position:fixed;
width:100%;
color:#222;
top: 70px; 
bottom: 0; 
left: 0; 
right: 0;
padding: 25px;
overflow: auto;

font-family: "Lucida Sans Unicode", "Lucida Grande", sans-serif;

}

/* Footer */
/* -------------------------------------------------- */

div#footer {
position:fixed;
bottom:0px;
left:0px;
width:100%;
color:#999;
background:#333;
padding: 8px;
}
    enter code here 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T17:26:36.213

I made a fiddle for you where I have rebuilt your HTML and CSS and you can see it working (couldn't resist). [http://jsfiddle.net/David_Knowles/2y7U5/1/](http://jsfiddle.net/David_Knowles/2y7U5/1/)

You'll see there is a lot less code.

The Main pointer I will give is that you would be wise to make more use of the Cascade in your styles. Hence CSS = Cascading style sheets. It's the key to efficient front-end coding. Nest your HTML more too :-) (less styles need then).

```
div id="headerlogo">
    <div id="headerfill">
        <div id="header">
            <a href="portfolio.html" id="headerlink1" >Portfolio</a>
            <a href="index.html"> <img src="http://www.mindtale.com/images/logo.png" alt="Mindtale"> </a>
            <a href="contact.html" id="headerlink2" >Contact</a>
        </div>
    </div>
</div>

<!-- Content -->
<div id="content">
   <h2>A random heading</h2>
   <p>Content Placeholder ... </p>
    ...
</div> 
```

# grails - BootStrap.groovy 内容不会更新内容

> ID：16087991
> 
> 赞同：1
> 
> 时间：2013-04-18T16:10:40.017
> 
> 标签：grails, bootstrapping

我是 Grails 的新手，通过 InfoQ 的“Grails 入门”一书学习它。运行它时，我遇到了 BootStrap.groovy 文件的问题：

1.  我已经按照书上说的进行了编辑。
2.  运行应用程序 - 我输入到 BootStrap.groovy 的数据已显示。
3.  我已经更新了引导值，但它们没有改变。控制台中未显示任何错误。

我试过的：

*   交换def的位置；
*   将 Runner 的类值设置为可空值；
*   将 .save(failOnError:true) 更改为 .save(flush:true)。

即使在我更改了 Race 类的引导值之后，它看起来也没有改变。

看起来该值是从 BootStrap.groovy 以外的其他地方获取的？

我将 Grails 2.2.1 与 PostgreSQL 数据库一起使用。类的代码如下：

```
package racetrack

class Runner {
    static constraints = {
        firstName(blank:false)
        lastName(blank:false)
        dateOfBirth(nullable:true)
        gender(inList:["M","F"])
        address(nullable:true)
        city(nullable:true)
        state(nullable:true)
        zipcode(nullable:true)
        email(email:true)
    }

    static hasMany = [registrations:Registration]

    /*static mapping = {
        sort "email"
    }*/

    String firstName
    String lastName
    Date dateOfBirth
    String gender
    String address
    String city
    String state
    String zipcode
    String email

    String toString(){
        "${firstName} ${lastName} (${email})"
    }
} 
```

和

```
package racetrack

class BootStrap {
    def init = { servletContext ->
        def begun = new Runner(firstName:"Marathon",
            lastName:"Runner",
            dateOfBirth:"",
            gender:"M",
            address:"",
        city:"",
            state:"",
            zipcode:"",
            email:"me@me.ru"
            )
        begun.save(flush:true)

        def zabeg = new Race(name:"Run SPB",
            startDate:new Date() + 360*30,
            city:"Moscow",
            state:"Moscow",
            cost:10.0,
            distance:42.0,
            maxRunners:10)
        zabeg.save(flush:true)
    }

    def destroy = {
    }
} 
```

编辑：这可能是由于`generate-*`运行了任何脚本而发生的吗？

Race.groovy：

```
package racetrack

class Race {
    static hasMany = [registrations:Registration]

    String name
    Date startDate
    String city
    String state
    BigDecimal distance
    BigDecimal cost
    Integer maxRunners

    static constraints = {
        name(blank:false, maxSize:50)
        startDate(validator: {
                return (it >= new Date())
            }
        )
        city()
        state(inList:["Moscow", "Volgograd", "SPb", "NN"])
        distance(min:0.0)
        cost(min:0.0, max:100.0)
        maxRunners(min:0, max:100000)
    }

    static mapping = {
        sort "startDate"
    }

    BigDecimal inMiles(){
        return distance*0.6214
    }

    String toString(){
        return "${name}, ${startDate.format('MM/dd/yyyy')}"
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T16:20:03.363

`BootStrap` should be in `grails-app/conf` instead. Refer [this](http://grails.org/Bootstrap+Classes).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T12:09:29.037

尝试通过添加来打印您保存的新实例的错误

```
print begun.errors 
```

看看有没有什么事情发生。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-18T07:18:44.777

你需要删除

```
def index() { } 
```

从控制器。

我遇到过同样的问题。现在它是固定的。

# python - SQLAlchemy 审计日志；如何处理删除？

> ID：16087996
> 
> 赞同：7
> 
> 时间：2013-04-18T16:10:44.537
> 
> 标签：python, sqlalchemy, audit-logging

我正在使用 SQLAlchemy 附带的版本控制代码示例的修改版本来记录用户 ID 和更改日期。但是，我也想修改它，以便通过标记`is_deleted`类型标志而不是运行实际 SQL来完成删除`DELETE`。我的问题是我不确定如何捕获删除并将其替换为更新。

这是我到目前为止所拥有的：

```
''' http://docs.sqlalchemy.org/en/rel_0_8/orm/examples.html?highlight=versioning#versioned-objects '''
from sqlalchemy.ext.declarative import declared_attr
from sqlalchemy.orm import mapper, class_mapper, attributes, object_mapper, scoping
from sqlalchemy.orm.session import Session
from sqlalchemy.orm.exc import UnmappedClassError, UnmappedColumnError
from sqlalchemy import Table, Column, ForeignKeyConstraint, DateTime, String, Boolean
from sqlalchemy import event
from sqlalchemy.orm.properties import RelationshipProperty
from datetime import datetime
from sqlalchemy.schema import ForeignKey
from sqlalchemy.sql.expression import false

def col_references_table(col, table):
    for fk in col.foreign_keys:
        if fk.references(table):
            return True
    return False

def _history_mapper(local_mapper):
    cls = local_mapper.class_

    # set the "active_history" flag
    # on on column-mapped attributes so that the old version
    # of the info is always loaded (currently sets it on all attributes)
    for prop in local_mapper.iterate_properties:
        getattr(local_mapper.class_, prop.key).impl.active_history = True

    super_mapper = local_mapper.inherits
    super_history_mapper = getattr(cls, '__history_mapper__', None)

    polymorphic_on = None
    super_fks = []
    if not super_mapper or local_mapper.local_table is not super_mapper.local_table:
        cols = []
        for column in local_mapper.local_table.c:
            if column.name.startswith('version_'):
                continue

            col = column.copy()
            col.unique = False

            if super_mapper and col_references_table(column, super_mapper.local_table):
                super_fks.append((col.key, list(super_history_mapper.local_table.primary_key)[0]))

            cols.append(col)

            if column is local_mapper.polymorphic_on:
                polymorphic_on = col

        if super_mapper:
            super_fks.append(('version_datetime', super_history_mapper.base_mapper.local_table.c.version_datetime))
            super_fks.append(('version_userid', super_history_mapper.base_mapper.local_table.c.version_userid))
            super_fks.append(('version_deleted', super_history_mapper.base_mapper.local_table.c.version_deleted))
            cols.append(Column('version_datetime', DateTime, default=datetime.now, nullable=False, primary_key=True, info={'colanderalchemy': {'exclude': True}}))
            cols.append(Column('version_userid', String(60), ForeignKey("user.login"), nullable=True, info={'colanderalchemy': {'exclude': True}}))
            cols.append(Column('version_deleted', Boolean, server_default=false(), nullable=False, info={'colanderalchemy': {'exclude': True}}))
        else:
            cols.append(Column('version_datetime', DateTime, default=datetime.now, nullable=False, primary_key=True, info={'colanderalchemy': {'exclude': True}}))
            cols.append(Column('version_userid', String(60), ForeignKey("user.login"), nullable=True, info={'colanderalchemy': {'exclude': True}}))
            cols.append(Column('version_deleted', Boolean, server_default=false(), nullable=False, info={'colanderalchemy': {'exclude': True}}))

        if super_fks:
            cols.append(ForeignKeyConstraint(*zip(*super_fks)))

        table = Table(local_mapper.local_table.name + '_history', local_mapper.local_table.metadata,
           *cols
        )
    else:
        # single table inheritance.  take any additional columns that may have
        # been added and add them to the history table.
        for column in local_mapper.local_table.c:
            if column.key not in super_history_mapper.local_table.c:
                col = column.copy()
                col.unique = False
                super_history_mapper.local_table.append_column(col)
        table = None

    if super_history_mapper:
        bases = (super_history_mapper.class_,)
    else:
        bases = local_mapper.base_mapper.class_.__bases__
    versioned_cls = type.__new__(type, "%sHistory" % cls.__name__, bases, {})

    m = mapper(
            versioned_cls,
            table,
            inherits=super_history_mapper,
            polymorphic_on=polymorphic_on,
            polymorphic_identity=local_mapper.polymorphic_identity
            )
    cls.__history_mapper__ = m

    if not super_history_mapper:
        local_mapper.local_table.append_column(
            Column('version_datetime', DateTime, default=datetime.now, nullable=False, primary_key=False, info={'colanderalchemy': {'exclude': True}})
        )
        local_mapper.add_property("version_datetime", local_mapper.local_table.c.version_datetime)
        local_mapper.local_table.append_column(
            Column('version_userid', String(60), ForeignKey("user.login"), nullable=True, info={'colanderalchemy': {'exclude': True}})
        )
        local_mapper.add_property("version_userid", local_mapper.local_table.c.version_userid)
        local_mapper.local_table.append_column(
            Column('version_deleted', Boolean, server_default=false(), nullable=False, info={'colanderalchemy': {'exclude': True}})
        )
        local_mapper.add_property("version_deleted", local_mapper.local_table.c.version_deleted)

class Versioned(object):
    @declared_attr
    def __mapper_cls__(cls):
        def map(cls, *arg, **kw):
            mp = mapper(cls, *arg, **kw)
            _history_mapper(mp)
            return mp
        return map

def versioned_objects(iter):
    for obj in iter:
        if hasattr(obj, '__history_mapper__'):
            yield obj

def create_version(obj, session, deleted = False):
    obj_mapper = object_mapper(obj)
    history_mapper = obj.__history_mapper__
    history_cls = history_mapper.class_

    obj_state = attributes.instance_state(obj)

    attr = {}

    obj_changed = False

    for om, hm in zip(obj_mapper.iterate_to_root(), history_mapper.iterate_to_root()):
        if hm.single:
            continue

        for hist_col in hm.local_table.c:
            if hist_col.key.startswith('version_'):
                continue

            obj_col = om.local_table.c[hist_col.key]

            # get the value of the
            # attribute based on the MapperProperty related to the
            # mapped column.  this will allow usage of MapperProperties
            # that have a different keyname than that of the mapped column.
            try:
                prop = obj_mapper.get_property_by_column(obj_col)
            except UnmappedColumnError:
                # in the case of single table inheritance, there may be
                # columns on the mapped table intended for the subclass only.
                # the "unmapped" status of the subclass column on the
                # base class is a feature of the declarative module as of sqla 0.5.2.
                continue

            # expired object attributes and also deferred cols might not be in the
            # dict.  force it to load no matter what by using getattr().
            if prop.key not in obj_state.dict:
                getattr(obj, prop.key)

            a, u, d = attributes.get_history(obj, prop.key)

            if d:
                attr[hist_col.key] = d[0]
                obj_changed = True
            elif u:
                attr[hist_col.key] = u[0]
            else:
                # if the attribute had no value.
                attr[hist_col.key] = a[0]
                obj_changed = True

    if not obj_changed:
        # not changed, but we have relationships.  OK
        # check those too
        for prop in obj_mapper.iterate_properties:
            if isinstance(prop, RelationshipProperty) and \
                attributes.get_history(obj, prop.key).has_changes():
                obj_changed = True
                break

    if not obj_changed and not deleted:
        return

    attr['version_datetime'] = obj.version_datetime
    attr['version_userid'] = obj.version_userid
    attr['version_deleted'] = obj.version_deleted
    hist = history_cls()
    for key, value in attr.items():
        setattr(hist, key, value)
    session.add(hist)
    obj.version_datetime = datetime.now()
    obj.version_userid = getattr(session, 'userid', None)
    obj.version_deleted = deleted

def versioned_session(session):
    @event.listens_for(session, 'before_flush')
    def before_flush(session, flush_context, instances):
        for obj in versioned_objects(session.deleted):
            create_version(obj, session, deleted = True)
        for obj in versioned_objects(session.dirty):
            create_version(obj, session)

def add_userid_to_session(userid, session):
    if isinstance(session, scoping.scoped_session):
        thread_local_session = session.registry()
        thread_local_session.userid = userid
    elif isinstance(session, Session):
        session.userid = userid
    else:
        raise TypeError("Not sure how to add the userid into session of type {}".format(type(session))) 
```

以下是我的使用方法（所有非必要部分均已删除）：

```
Base = declarative_base()

class User(Versioned, Base):
    __tablename__ = 'user'
    login = Column(String(60), primary_key=True, nullable=False)

    groups = association_proxy('user_to_groups', 'group', creator=lambda group: UserToGroup(group_name=group.name))

    def __init__(self, login, groups=None):
        self.login = login
        if groups:
            for group in groups:
                self.groups.append(group)

class Group(Versioned, Base):
    __tablename__ = 'group'
    name = Column(String(100), primary_key=True, nullable=False)
    description = Column(String(100), nullable=True)

    users = association_proxy('group_to_user', 'user', creator=lambda user: UserToGroup(user_login=user.login))

    def __eq__(self, other):
        return self.name == other.name

class UserToGroup(Versioned, Base):
    __tablename__ = 'user_to_group'
    user_login = Column(String(60), ForeignKey(User.login), primary_key=true)
    group_name = Column(String(100), ForeignKey(Group.name), primary_key=true)

    user = relationship(User, backref=backref('user_to_groups', cascade='all, delete-orphan'))
    group = relationship(Group, backref=backref('group_to_user', cascade='all, delete-orphan'))

session.configure(bind=engine)
add_userid_to_session("test", session.registry())
versioned_session(session)
user = session.query(User).filter(User.login=='test').one()
user.groups.remove(Group(name ="g:admin")) 
```

在运行该代码之前，数据库当前有一个名为“test”的用户和两个用户所属的组，名为“g:admin”和“g:superadmin”。

它目前所做的是：复制 'test' => 'g:admin' 映射的现有 user_to_group 条目并将其复制到历史表中。然后从 user_to_group 中删除该条目。

我想做的是将值复制到历史表中，然后将 user_to_group 中的条目更新为已`version_deleted`设置为`true`.

我正在考虑这样做的方法是从 session.deleted 中获取条目（这就是我更改原始代码顺序的原因）并将其修改为 session.dirty。我只是不确定这样做的“最安全”方式是什么。

另一个问题（可能需要另一个问题）是如何检测另一个表中包含的关系，因为当前系统将“用户”行复制到历史表中，然后更新版本信息，尽管没有进行实际更改到行。

**编辑：**我决定做一些不同的事情，但仍然有一个问题......我实际上删除了内容并记录另一个历史项目，而不是在活动表中使用“已删除”标志，并记录另一个历史项目，指示删除发生的时间。如果我直接删除一个对象，那么这可以正常工作。如果我从关系中删除一个对象，我将无法正确执行此操作。向关系表发出`DELETE`获取以删除链接，但我似乎无法弄清楚如何在“create_version”方法中检测到该删除。

例如，如果我这样做：

```
group = session.query(Group).filter(Group.name=='g:admin').one()
group.users.remove(group.users[0]) 
```

session.deleted 中没有放置任何对象。我可以通过 检测到某种删除`attributes.get_history(obj, prop.key)`，但它似乎表示删除了一个`UserToGroup`对象`Group`（我想检测并记录一个历史项目），但也表示`Group`从`UserToGroup`对象中删除了一个（我没有不想做任何事情，因为实际`Group`没有被删除）。

# html - 使用 colspan 的 IE8 中固定表格布局的正确 CSS

> ID：16087999
> 
> 赞同：0
> 
> 时间：2013-04-18T16:10:52.377
> 
> 标签：html, html-table, internet-explorer-8

这是一个动态构建的表的摘录。`<td>`使第二个 rwo (id='backdate') 中的第一个具有固定宽度的正确 CSS 是什么？*（目前在增加或减少 70 值时它不会改变宽度）*

![在此处输入图像描述](https://i.stack.imgur.com/C8UxZ.jpg)

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"><html>
<head>
<meta charset=utf-8 />
<title>JS Bin</title>
</head>
<body>
 <table class='fifo' width='850' style='width:850px;table-layout:fixed;'>
  <thead><tr>
   <th colspan='3' style='width:820px;'>Details</th>
   <th style='cursor:pointer;width:15px;' title='Click to save.'><span class='ui-icon ui-icon-check'/></th>
   <th style='width:15px;' title='Click to close.'><span class='ui-icon ui-icon-closethick'/></th>
  </tr></thead>
  <tbody>
   <tr><td id='BACKDATE' colspan='1' class='button' style='cursor:pointer;width:70px;' width='70' title='Back Date Start Date/time.'>Back Date</td>
   <td colspan='4' style='width:780px;' width='780'><b>Start Date: </b></td></tr>
  </tbody>
 </table>
</body>
</html> 
```

[摆弄解决方案...](http://jsbin.com/okekal/13/edit)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T01:05:24.570

添加一个具有浏览器“显示”但看不到的宽度的虚拟行可以解决问题。为了摆脱额外的边框，我不得不添加`border-top-width:0px;`到表格的`style`.

***HTML***

```
<tr>
  <th class='test' style='width:80px;'/>
  <th class='test' style='width:560px;'/>
  <th class='test' style='width:150px;'/>
  <th class='test' style='width:15px;'/>
  <th class='test' style='width:15px;'/> 
```

***CSS***

```
.test {
  padding:0px!important;
  border-width:0px!important;
  height:0px!important;
} 
```