# StackOverflow 问答 15105000-15105999

# javascript - JSON 中的变量

> ID：15105001
> 
> 赞同：3
> 
> 时间：2013-02-27T05:41:17.147
> 
> 标签：javascript, json, variables

我对 JSON 没有太多经验，我想知道这样的事情是否可行。

```
{
    "variable": "A really long value that will take up a lot of space if repeated",

    "array": [variable, variable, variable]
} 
```

显然这是无效的，但我想知道是否有办法做到这一点。我尝试使用“变量”，但当然只是将数组项设置为字符串“变量”。我想这样做的原因是我需要在多维数组中重复长值，这会占用大量空间。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T05:46:31.087

如果您愿意在解析后对 JSON 进行一些后处理，那么您可以在数组中使用令牌值，并将解析后的令牌替换为变量。例子：

```
{
    "variable": "A really long value",
    "array": ["variable", "variable", "variable"]
} 
```

然后，在您解析的代码中：

```
var obj = JSON.parse(str);
for (var i=0; i<obj.array.length; i++)
{
    obj.array[i] = obj[obj.array[i]];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T06:04:10.470

您是否担心输出中的空间或从 JSON 创建的对象中的空间？在后一种情况下，字符串值可能会在解析发生时被合并。

如果您担心 JSON 的大小，那么您可能想要更改为另一种格式，或者对 JSON 中的字符串进行重复数据删除。

您可以在 JSON 数据中添加一个对象，将 ID 号映射到字符串，然后使用 ID 来表示字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T05:43:47.460

在纯 JSON 中没有办法做到这一点（完整的[规范在这里](http://json.org/)）。

如果您想做类似的事情，您可能需要研究模板工具，例如[Handlebars](http://handlebarsjs.com/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T05:45:03.947

`you will get your answer here [jason tutorial for beginners](http://iviewsource.com/codingtutorials/getting-started-with-javascript-object-notation-json-for-absolute-beginners/)`

```
example:
  var data={
    "firstName":"Ray",
    "lastName":"Villalobos",
    "joined":2012
  }; 
```

# node.js - 如何使用node.js中的摇篮通过给定的限制（start_limit，end_limit）检索couchDB数据？

> ID：15105002
> 
> 赞同：0
> 
> 时间：2013-02-27T05:41:21.433
> 
> 标签：node.js, couchdb, cradle

在我的应用程序中，我将 node.js 与 coucdhDB 数据库一起使用。现在我想通过给定的限制获取数据，如果用户提到开始限制为 10，结束限制为 20 意味着我想要获取 10 到 20 之间的数据。如何我这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T21:22:37.710

这是一个应该在面向公众的 CouchDB for NPM 数据上按原样运行的示例。请原谅糟糕的代码以及糟糕的参数检查和错误处理，但你会明白的。由于此示例 CouchDb 视图使用文本包名称，我没有做您的数字示例，而是获取名称在“ya”和“yaa”之间的包，我将使用以下内容访问这个面向公众的数据库：

[http://isaacs.iriscouch.com/downloads/_design/app/_view/pkg?group_level=2&start_key=%5B%22ya%22%5D&end_key=%5B%22yaa%22,%7B%7D%5D](http://isaacs.iriscouch.com/downloads/_design/app/_view/pkg?group_level=2&start_key=%5B%22ya%22%5D&end_key=%5B%22yaa%22,%7B%7D%5D)

然后使用下面的代码对我的节点服务器等效的是：

[http://yourapi.goeshere.xxx:3000/rangetest/ya-yaa](http://yourapi.goeshere.xxx:3000/rangetest/ya-yaa)

使用以下代码：

```
var express = require('express')
  , cradle = require('cradle')
  , routes = require('./routes')
  , http = require('http')
  , path = require('path');

var app = express();

app.configure(function(){
  app.set('port', process.env.PORT || 3000);
  app.use(express.bodyParser());
  app.use(express.methodOverride());
  app.use(app.router);
});

app.get('/rangetest/:from-:to', function(req, res) {
    console.log('entering range test');
    var theFrom = req.params.from;
    var theTo = req.params.to;
    console.log('range sent was ' + theFrom + " to : " + theTo);

    var testConn = new(cradle.Connection)('http://isaacs.iriscouch.com', {
        cache: true,
        raw: false
    });

    var testDb = testConn.database('downloads');
    var testParams = "_design/app/_view/pkg?group_level=2&start_key=%5B%22" + theFrom + 
        "%22%5D&end_key=%5B%22" + theTo + "%22,%7B%7D%5D";
    testDb.get(testParams, function (err, testResult) {
        if (err)
        {
            console.log(err);
            res.json(500, err);
        } else {
            res.json(testResult);
        }
    });

 }); 
```

# android - 过滤后Android ListView数组索引超出范围

> ID：15105004
> 
> 赞同：14
> 
> 时间：2013-02-27T05:41:29.310
> 
> 标签：android, listview, filter, android-arrayadapter

我认为这是专家的问题。

我从*ListView*数据列表中`getView()`接到位置*超出* **范围的电话。** 当我使用适配器过滤器时会发生这种情况。filter方法使用比原始列表小的过滤列表填充数据。 当新的过滤列表**比以前**的 过滤列表短时，似乎会发生错误。我更改了代码以在越界时返回一个虚拟的*convertView*，只是为了查看发出了多少这样的调用。 *`publishResults()`
**`getView()`***

 ****这些是相关代码和`log`我记录的消息：

```
 @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        // No logs here to keep ListView performance good
        Log.d(TAG, "+ getView( position=" + position + ")");
        ViewHolder holder;

        if( position >= mData.size() ) {
            // This code allows to see how many bad calls I get
            Log.w(TAG, "position out of bounds!");
            convertView = mInflater.inflate(mLayout, parent, false);
            return convertView;
        }

        . . . // Normal getView code

        return convertView;
    } 
```

在过滤器中（从`ArrayAdapter`源代码中复制的代码）

```
 @Override
        protected void publishResults(CharSequence constraint, FilterResults results) {
            Log.pe(TAG, "+ publishResults(constraint:" + constraint + ", results.count:" + results.count + ")");
            //noinspection unchecked
            mData = (ArrayList<String>) results.values;
            if (results.count > 0) {
                notifyDataSetChanged();
            } else {
                notifyDataSetInvalidated();
            }
            Log.px(TAG, "- publishResults()");
        } 
```

日志文件显示，经过 7 个结果的过滤器后，出现了一个具有 3 个结果的过滤器，但`getView`不断收到 7 个项目的调用（我标记`***`了越界调用）：

```
02-26 05:31:55.986: D/ViewerActivity(22857): + onQueryTextChange(newText:log)
02-26 05:31:55.986: D/ViewerActivity(22857): - onQueryTextChange()
02-26 05:31:56.029: D/LogScreenAdapter(22857): + performFiltering(prefix:log)
02-26 05:31:56.113: D/dalvikvm(22857): GC_CONCURRENT freed 378K, 5% free 13577K/14215K, paused 0ms+1ms
02-26 05:31:56.153: D/LogScreenAdapter(22857): - performFiltering()
02-26 05:31:56.153: D/LogScreenAdapter(22857): + publishResults(constraint:log, results.count:7)
02-26 05:31:56.167: D/LogScreenAdapter(22857): - publishResults()
02-26 05:31:56.167: D/LogScreenAdapter(22857): + getView( position=0)
02-26 05:31:56.167: D/LogScreenAdapter(22857): + getView( position=0)
02-26 05:31:56.167: D/LogScreenAdapter(22857): + getView( position=0)
02-26 05:31:56.167: D/LogScreenAdapter(22857): + getView( position=1)
02-26 05:31:56.167: D/LogScreenAdapter(22857): + getView( position=2)
02-26 05:31:56.167: D/LogScreenAdapter(22857): + getView( position=3)
02-26 05:31:56.167: D/LogScreenAdapter(22857): + getView( position=4)
02-26 05:31:56.167: D/LogScreenAdapter(22857): + getView( position=5)
02-26 05:31:56.167: D/LogScreenAdapter(22857): + getView( position=6)
02-26 05:31:56.167: D/LogScreenAdapter(22857): + getView( position=0)
02-26 05:31:56.167: D/LogScreenAdapter(22857): + getView( position=1)
02-26 05:31:56.167: D/LogScreenAdapter(22857): + getView( position=2)
02-26 05:31:56.167: D/LogScreenAdapter(22857): + getView( position=3)
02-26 05:31:56.167: D/LogScreenAdapter(22857): + getView( position=4)
02-26 05:31:56.493: D/LogScreenAdapter(22857): + getView( position=5)
02-26 05:31:56.503: D/LogScreenAdapter(22857): + getView( position=6)
02-26 05:32:23.793: D/ViewerActivity(22857): + onQueryTextChange(newText:logs)
02-26 05:32:23.793: D/ViewerActivity(22857): - onQueryTextChange()
02-26 05:32:23.813: D/LogScreenAdapter(22857): + performFiltering(prefix:logs)
02-26 05:32:23.854: D/dalvikvm(22857): GC_CONCURRENT freed 383K, 5% free 13577K/14215K, paused 0ms+0ms
02-26 05:32:23.924: D/dalvikvm(22857): GC_CONCURRENT freed 388K, 5% free 13573K/14215K, paused 0ms+1ms
02-26 05:32:23.974: D/LogScreenAdapter(22857): - performFiltering()
02-26 05:32:23.983: D/LogScreenAdapter(22857): + publishResults(constraint:logs, results.count:3)
02-26 05:32:23.983: D/LogScreenAdapter(22857): - publishResults()
02-26 05:32:23.983: D/LogScreenAdapter(22857): + getView( position=0)
02-26 05:32:24.074: D/LogScreenAdapter(22857): + getView( position=0)
02-26 05:32:24.093: D/LogScreenAdapter(22857): + getView( position=0)
02-26 05:32:24.113: D/LogScreenAdapter(22857): + getView( position=1)
02-26 05:32:24.155: D/LogScreenAdapter(22857): + getView( position=2)
02-26 05:32:24.164: D/LogScreenAdapter(22857): + getView( position=3)
*** 02-26 05:32:24.193: W/LogScreenAdapter(22857): position out of bounds!
02-26 05:32:24.233: D/LogScreenAdapter(22857): + getView( position=4)
*** 02-26 05:32:24.263: W/LogScreenAdapter(22857): position out of bounds!
02-26 05:32:24.284: D/LogScreenAdapter(22857): + getView( position=5)
*** 02-26 05:32:24.313: W/LogScreenAdapter(22857): position out of bounds!
02-26 05:32:24.333: D/LogScreenAdapter(22857): + getView( position=6)
*** 02-26 05:32:24.343: W/LogScreenAdapter(22857): position out of bounds!
02-26 05:32:24.353: D/LogScreenAdapter(22857): + getView( position=0)
02-26 05:32:24.373: D/LogScreenAdapter(22857): + getView( position=1)
02-26 05:32:24.383: D/LogScreenAdapter(22857): + getView( position=2)
02-26 05:32:24.403: D/LogScreenAdapter(22857): + getView( position=3)
*** 02-26 05:32:24.413: W/LogScreenAdapter(22857): position out of bounds!
02-26 05:32:24.433: D/LogScreenAdapter(22857): + getView( position=4)
*** 02-26 05:32:24.443: W/LogScreenAdapter(22857): position out of bounds!
02-26 05:32:24.463: D/LogScreenAdapter(22857): + getView( position=5)
*** 02-26 05:32:24.475: W/LogScreenAdapter(22857): position out of bounds!
02-26 05:32:24.483: D/LogScreenAdapter(22857): + getView( position=6)
*** 02-26 05:32:24.503: W/LogScreenAdapter(22857): position out of bounds!
02-26 05:38:26.769: D/dalvikvm(22857): GC_CONCURRENT freed 316K, 5% free 13640K/14215K, paused 0ms+1ms 
```

您在这里看到的是，该`publishResults()`方法确实将 mData 从 7 项列表更改为更短的 3 项列表，请参见上面的代码，但`Adapter`不断收到`getView()`对 7 项列表的调用，即使它不再存在。
注意`notifyDataSetChanged()`已经调用了新的数据赋值，所以`ListView`应该知道新的列表。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-27T06:00:36.550

你在`public int getCount()`自定义列表视图适配器的方法中返回什么？

你应该像这样返回`mData != null? mData.size() : 0`，

超出债券的位置可能是由于您返回的列表大小超过了要在列表中显示的数据

`getCount()`自定义列表适配器的方法指定列表视图的大小，因此它应该是您在列表中传递的数据的大小

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-02-27T06:00:05.320

似乎覆盖“getCount（）”方法将解决您的问题：

```
@Override
public int getCount() {
    return mData.size();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-17T06:36:00.373

我这样做了，它解决了我的问题

```
@Override
public int getCount() {

    if (isFiltered == true) {
        return myFilteredArray.size();
    }

    return myUnfilteredArray.size();
} 
```****

# oracle - 删除 Oracle 队列

> ID：15105013
> 
> 赞同：0
> 
> 时间：2013-02-27T05:42:14.733
> 
> 标签：oracle, plsql

我正在尝试使用以下命令删除队列：

```
 EXECUTE DBMS_AQADM.DROP_QUEUE (queue_name => 'ORDVAL_QUEUE'); 
```

它工作正常，但我想检查队列是否不存在并且我执行上面的命令，它不应该抛出错误或异常。我正在使用它，但没有得到我的目标：

```
 BEGIN
    EXECUTE IMMEDIATE 'DBMS_AQADM.DROP_QUEUE (queue_name => "ORDVAL_QUEUE")';
  EXCEPTION
 WHEN OTHERS THEN
  null;
  END; 
```

它执行得很好，但不会丢弃队列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T06:02:39.327

我以前没有使用过队列，但这应该会有所帮助：

1.  `BEGIN`将and添加`END`到执行立即数，以使用动态 PL/SQL 代替动态 SQL。
2.  使用两个单引号而不是双引号。
3.  尽可能捕获特定异常，避免`OTHERS`. 这是捕获并忽略意外异常。
4.  下面没有显示，但也许最好检查队列是否存在`ALL_QUEUES`？

```
    宣布
        QUEUE_DOES_NOT_EXIST 异常；
        PRAGMA EXCEPTION_INIT(QUEUE_DOES_NOT_EXIST, -24010);
    开始
        立即执行
            'BEGIN DBMS_AQADM.DROP_QUEUE (queue_name => ''ORDVAL_QUEUE''); 结尾;';
        EXCEPTION WHEN queue_does_not_exist then
            dbms_output.put_line('测试是否抛出异常');
    结尾;
    /

```

# asp.net - 在桌子上显示文件。ASP.NET

> ID：15105016
> 
> 赞同：2
> 
> 时间：2013-02-27T05:42:28.290
> 
> 标签：asp.net, database, file

我正在寻找在桌子上显示文件的解决方案。像 Windows 桌面图标。文件的位置存储在数据库中。因此，我需要从数据库中获取文件位置并将该文件显示在表格、div 或任何类似 Windows 桌面图标的地方。它还必须可以下载这些文件。（我认为这不会是一个问题）。任何解决方案？我正在使用 ASP.NET 4.5 进行开发

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T05:49:55.970

你可以这样做

在其中创建模板字段`GridView`并绑定值

```
 <asp:TemplateField>
            <ItemTemplate>
                <asp:LinkButton ID="lnkDownload" Text = "Download" CommandArgument = '<%# Eval("Value") %>' runat="server" OnClick = "DownloadFile"></asp:LinkButton>
            </ItemTemplate>
        </asp:TemplateField> 
```

在下载文件后面的代码中单击

```
protected void DownloadFile(object sender, EventArgs e)
{
    string filePath = (sender as LinkButton).CommandArgument;
    Response.ContentType = ContentType;
    Response.AppendHeader("Content-Disposition", "attachment; filename=" + Path.GetFileName(filePath));
    Response.WriteFile(filePath);
    Response.End();
} 
```

检查完整代码：[使用 C# 和 VB.Net 在 ASP.Net 中使用 LinkBut​​ton Click 事件从 GridView 下载文件](http://aspsnippets.com/Articles/Download-Files-from-GridView-using-LinkButton-Click-Event-in-ASPNet-using-C-and-VBNet.aspx)

# hdfs - 在 PIG 中执行命令期间的警告

> ID：15105017
> 
> 赞同：1
> 
> 时间：2013-02-27T05:42:29.413
> 
> 标签：hdfs, apache-pig

我对 PIG 的概念很陌生。现在我在 HDFS 上挂载了文件。当我使用加载文件时

> A = LOAD 'user/vishal/output/part-00000' USING PigStorage(' ') as (name,occourence)

它正在发生，但是当我使用 FILTER 命令时

> FLT = 按出现次数 > '20' 和出现次数 < '35' 过滤 A；

它给出了以下错误

> 2013-02-27 11:06:16,264 [main] WARN org.apache.pig.PigServer - 遇到警告 IMPLICIT_CAST_TO_CHARARRAY 6 次

可能是什么问题

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T06:57:02.850

pig 中列的默认数据类型是 bytearray。

出现应该是 int 数据类型，如下所示。

```
A = LOAD 'user/vishal/output/part-00000' USING PigStorage(' ') as (name:chararray,occourence:int); 
```

现在您可以像下面这样过滤（不带引号）。

```
FLT = FILTER A by occourence > 20 and occourence < 35; 
```

# twitter-bootstrap - 在 navbar-fixed-top 之前添加标题图像

> ID：15105018
> 
> 赞同：7
> 
> 时间：2013-02-27T05:42:38.800
> 
> 标签：twitter-bootstrap

如何添加标题图像以使其显示在导航栏固定顶部的顶部。当用户向下滚动时，导航栏会粘在顶部吗？

我尝试将它添加到容器中，但它没有按预期工作。

到目前为止，这是我的代码。

```
<body>
 <header>
  <img src="header/1024x100.png">
 </header>
 <div class="container-fluid">
  <div class="navbar navbar-inverse navbar-fixed-top">
   <div class="navbar-inner">
    <div class="container-fluid">
      <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </a>
      <a class="brand" href="#"></a>
      <div class="nav-collapse collapse">
        <p class="navbar-text pull-right">
          Logged in as <a href="#" class="navbar-link">Username</a>
        </p>
        <ul class="nav">
          <li class="active"><a href="#">Home</a></li>
          <li><a href="#about">About</a></li>
          <li><a href="#contact">Contact</a></li>
        </ul>
      </div><!--/.nav-collapse -->
    </div>
  </div>
</div> 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T07:34:50.120

[带有滚动导航检查链接](http://jsfiddle.net/shail/YKaBK/show)的 JsFiddle

注意：如果您的图像小于屏幕尺寸，请将此片段插入您的 css

```
.masthead img{
width:100%;
 } 
```

html 应如下所示：

```
<div class="masthead">
<img src="http://placehold.it/940x150"/>
</div>
<!-- /container -->
<div class="navbar affix-top" data-spy="affix" data-offset-top="150">
<div class="navbar-inner">
    <div class="container">
               <ul class="nav">
        <li class="active"><a href="#">Home</a>

        </li>
        <li><a href="#">Link</a>

        </li>
        <li><a href="#">Link</a>

        </li>
    </ul>
    </div>
   </div>
 </div>
 <!-- navbar -->
<div class="container">
  <div class="row-fluid">
    <div class="span4">
    content goes here 
    </div>
   </div>
 </div> 
```

# android - 抱歉，已达到对 Google 位置的查询限制。谷歌查询中的错误

> ID：15105023
> 
> 赞同：1
> 
> 时间：2013-02-27T05:43:01.700
> 
> 标签：android

我试图找到靠近所有地方的醋栗位置。有时会出现**“对不起，Google 地点的查询限制已达到”**错误。如何解决这个问题... ?? 或者这个问题的替代解决方案是什么......我使用这个查询来查找`current location`..附近的地方

```
private static final String PLACES_SEARCH_URL = "https://maps.googleapis.com/maps/api/place/search/json?";
private static final String PLACES_TEXT_SEARCH_URL = "https://maps.googleapis.com/maps/api/place/search/json?"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T05:46:54.067

谷歌允许您使用给定的密钥调用其地图 API 每小时有多少次（我认为它的小时，可能更多）是有限制的。你要过去了。除了减少调用它或让谷歌允许您的密钥更高的限制（他们可能会出售额外的访问权限）之外，真的没有其他解决方案。

确保您没有使用相同密钥的多个应用程序，这将导致它们都获得相同的共享限制。

# linux - 从终端在linux中搜索/查找名称为整数的文件夹

> ID：15105029
> 
> 赞同：1
> 
> 时间：2013-02-27T05:43:32.390
> 
> 标签：linux, search, command, find, locate

我在我的机器上使用 Fedora 15。实际上，我正在尝试`apache-tomcat-7.0.37`通过在整个文件系统中搜索来找到具有名称的文件夹

实际上我在路径中有一些像下面这样的文件夹`/opt/tomcat/`

```
apache-tomcat-7.0.37
apache-tomcat-6.0.34
apache-tomcat-7.0.67
......... 
```

还有一些文件夹在`/usr/share/tomcat/`

```
apache-tomcat-4.0.7
apache-tomcat-6.0.4
apache-tomcat-8.0.6
......... 
```

所以我想要的是使用命令从 linux 终端定位/查找/搜索所有这些文件夹路径。

我用谷歌搜索了很多，得到了一些命令`locate`，`find`如下所示

```
find / -name apache-tomcat*
locate apache-tomcat 
```

上面的命令列出了所有文件夹，包括额外不需要的文件夹信息，所以实际上我想要的是，只需要搜索名称为`apache-tomcat-x.x.x,apache-tomcat-xx.xx.xx`

在文件夹名称中，起始词`apache-tomcat`相同，只有整数部分 ( `version number`) 发生变化。所以我想找到所有具有不同版本号的文件夹，比如使用正则表达式代替整数来查找文件夹

所以任何人都可以让我知道如何使用带有正则表达式的命令或类似的命令来搜索上述场景的文件夹，这些命令可以找到所有具有名称的文件夹`apache-tomcat-xx.x.xxx`.....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T05:56:45.060

这应该找到所有具有模式 apache-tomcat-XYZ 的文件、目录、链接等，其中 X、Y 和 Z 是整数。

```
find . -regextype sed -regex ".*/apache-tomcat-[0-9]\+\.[0-9]\+\.[0-9]\+" 
```

如果您只查找目录，请使用此变体：

```
find . -type d -regextype sed -regex ".*/apache-tomcat-[0-9]\+\.[0-9]\+\.[0-9]\+" 
```

如果要从 / 开始搜索整个系统，请使用以下变体：

```
find / -type d -regextype sed -regex ".*/apache-tomcat-[0-9]\+\.[0-9]\+\.[0-9]\+" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T06:01:54.057

您可以提供合适的正则表达式来`locate`快速搜索整个系统：

```
locate -b --regex "apache-tomcat-[0-9]+.[0-9]+.[0-9]+$" 
```

与 的任何使用一样`locate`，它使用的文件数据库需要是最新的。如果你有足够的权限，你可以`sudo updatedb`强制更新。

# symfony - 在不使用 javascript 的情况下在 Symfony 中显示空表单集合项

> ID：15105033
> 
> 赞同：4
> 
> 时间：2013-02-27T05:44:10.283
> 
> 标签：symfony, symfony-2.1, symfony-forms

我正在尝试显示带有集合的表单。该集合应显示一个空的子表单。由于项目性质，我不能依赖 JavaScript 来做到这一点。

谷歌搜索没有帮助，我似乎没有通过向集合字段添加一个空实体来工作。

到目前为止我所拥有的：

```
public function indexAction($id)
{
    $em = $this->getDoctrine()->getManager();
    $event = $em->getRepository('EventBundle:EventDynamicForm')->find($id);

    $entity = new Booking();
    $entity->addParticipant( new Participant() );
    $form   = $this->createForm(new BookingType(), $entity);

    return array(
        'event' => $event,
        'edit_form' => $form->createView()
    );
} 
```

在 BookingType.php buildForm()

```
$builder
    ->add('Participants', 'collection') 
```

在 Twig 模板中

```
{{ form_row(edit_form.Participants.0.companyName) }} 
```

如果我把这行 $entity->addParticipant( new Participant() ); 在 indexAction() 中，我收到一条错误消息：

> 表单的视图数据应为标量、数组或 \ArrayAccess 的实例类型，但它是类 Yanic\EventBundle\Entity\Participant 的实例。您可以通过将“data_class”选项设置为“Yanic\EventBundle\Entity\Participant”或添加一个视图转换器来避免此错误，将类 Yanic\EventBundle\Entity\Participant 的实例转换为标量、数组或 \ 的实例数组访问。

如果我删除 Twig 抱怨的上述行：

> /Applications/MAMP/htdocs/symfony-standard-2.1/src/Yanic/EventBundle/Resources/views/Booking/index.html.twig 中不存在对象“Symfony\Component\Form\FormView”的方法“0”第 27 行

编辑： addParticipant 是由教义生成的默认方法：generate:entities 命令

```
/**
 * Add Participants
 *
 * @param \Yanic\EventBundle\Entity\Participant $participants
 * @return Booking
 */
 public function addParticipant(\Yanic\EventBundle\Entity\Participant $participants)
 {
     $this->Participants[] = $participants;

     return $this;
 } 
```

我确定我做错了什么，但找不到线索:-(

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-28T06:29:14.240

我猜你对 Symfony2 表单集合有点迷失了，尽管我认为你已经阅读了[http://symfony.com/doc/current/cookbook/form/form_collections.html](http://symfony.com/doc/current/cookbook/form/form_collections.html)。
在这里，我将只强调文档，帮助其他 SO 读者，并在回答问题时锻炼一下自己.. :)

首先，您必须至少有两个实体。在你的情况下，`Booking`和`Participant`。在 Booking 实体中，添加以下内容。因为你使用 Doctrine，所以`Participant`必须用`ArrayCollection`.

```
use Doctrine\Common\Collections\ArrayCollection;

class Booking() {

    // ...

    protected $participants;

    public function __construct()
    {
        $this->participants = new ArrayCollection();
    }

    public function getParticipants()
    {
        return $this->participants;
    }

    public function setParticipants(ArrayCollection $participants)
    {
        $this->participants = $participants;
    }
} 
```

其次，您的 Participant 实体可以是任何东西。举个例子：

```
class Participant
{
    private $name;

    public function setName($name) {
        $this->name = $name;

        return $this;
    }

    public function getName() {
        return $this->name;
    }
} 
```

第三，您的 BookingType 应包含 ParticipantType 的集合，如下所示：

```
// ...
$builder->add('participants', 'collection', array('type' => new ParticipantType())); 
```

第四，ParticipantType 很简单。根据我之前的例子：

```
// ...
$builder->add('name', 'text', array('required' => true)); 
```

最后，在 BookingController 中，添加必要数量的 Participant 以创建集合。

```
// ...
$entity = new Booking();

$participant1 = new Participant();
$participant1->name = 'participant1';
$entity->getParticipants()->add($participant1); // add entry to ArrayCollection

$participant2 = new Participant();
$participant2->name = 'participant2';
$entity->getParticipants()->add($participant2); // add entry to ArrayCollection 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T07:23:02.683

think you have to add here the type:

```
 ->add('Participants', 'collection', array('type' => 'YourParticipantType')); 
```

Could you also paste in here the declaration of your addParticipant function from the model? Seems that there's something fishy too.

# php - 删除子标签名称不是值

> ID：15105040
> 
> 赞同：2
> 
> 时间：2013-02-27T05:44:40.823
> 
> 标签：php, javascript, xml, xslt

我有这种类型的 xml 文件：-

```
<product>
   <node>
       <region_id>
                <node>1</node>
       </region_id>
       <region_time>
                <node>27</node>
                <node>02</node>
                <node>2013</node>
       </region_time>
   </node>
</ptroduct> 
```

我想把它们改成这种类型的东西：-

```
<product>
      <region_id>1</region_id>
      <region_time>27,02,2013</region_time>
</product> 
```

我想删除`<Node>`只是想有上面的值

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T06:00:12.713

**这种转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match="node">
  <xsl:apply-templates/>
 </xsl:template>

 <xsl:template match="node[position()>1]/text()">
   <xsl:text>,</xsl:text>
   <xsl:value-of select="."/>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<product>
    <node>
        <region_id>
            <node>1</node>
        </region_id>
        <region_time>
            <node>27</node>
            <node>02</node>
            <node>2013</node>
        </region_time></node>
</product> 
```

**产生想要的正确结果：**

```
<product>
   <region_id>1</region_id>
   <region_time>27,02,2013</region_time>
</product> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T05:59:53.193

以下示例将完成这项工作。

假设您有以下文件：

*测试.xml*

```
<?xml version="1.0"?>
<product>
   <node>
       <region_id>
                <node>1</node>
       </region_id>
       <region_time>
                <node>27</node>
                <node>02</node>
                <node>2013</node>
       </region_time>
   </node>
</product> 
```

*test.xsl* **更新**

```
<?xml version="1.0"?>
<xsl:stylesheet version="1.0" 
     xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:strip-space elements="*"/>

 <xsl:template match="*">
  <xsl:copy>
   <xsl:apply-templates select="*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match="node">
  <xsl:apply-templates/>
 </xsl:template>

 <xsl:template match="/">
    <xsl:apply-templates />
 </xsl:template>

 <!-- from dimitre\'s xsl.thanks -->
 <xsl:template match="node[position()>1]/text()">
   <xsl:text>,</xsl:text>
   <xsl:value-of select="."/>
 </xsl:template>
</xsl:stylesheet> 
```

*xslt.php*

```
$sourcedoc = new DOMDocument();
$sourcedoc->load('test.xml');

$stylesheet = new DOMDocument();
$stylesheet->load('test.xsl');

// create a new XSLT processor and load the stylesheet
$xsltprocessor = new XSLTProcessor();
$xsltprocessor->importStylesheet($stylesheet);

// save the new xml file
file_put_contents('test-translated.xml', $xsltprocessor->transformToXML($sourcedoc)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T05:51:43.363

您可以编写执行以下操作的脚本

1.  删除所有空格和换行符（所以，所有内容都在一行中）。
2.  使用字符串替换，`'</node><node>'`用 ','替换
3.  使用字符串替换，`'</node>'`用 '' 和`'<node>'`''替换

完毕！！

您可以通过使用适当的语法在 PHP 或 Javascript 中使用它。

# apache - .htaccess 中断添加共享主机上的域

> ID：15105042
> 
> 赞同：1
> 
> 时间：2013-02-27T05:44:49.960
> 
> 标签：apache, .htaccess, mod-rewrite

这是我的 .htaccess 文件中的代码，该文件位于我的共享主机的根目录中。

```
 RewriteEngine On 
 RewriteCond %{HTTP_HOST} !^www\. 
 RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L] 
 RewriteCond %{REQUEST_FILENAME}!-f  
 RewriteCond %{REQUEST_FILENAME} !-d  
 RewriteRule ^([a-zA-Z0-9\-]+)?$ interest.php?interest=$1 [QSA,L] 
 RewriteRule ^([a-zA-Z0-9\_\-]+)?/$ interest.php?interest=$1 [QSA,L] 
```

问题是，在同一个目录中是我添加域的文件夹。当我尝试访问它们时，第二行正在创建问题并将其重定向到我的主域。我希望 .htaccess 仅影响根文件夹而不影响其子文件夹。我尝试在这里阅读其他类似的问题，并尝试相应地更改我的 htaccess，但问题仍未解决。

例如。它的重定向

```
mysubdomain.mydomain.com 
```

到

```
www.mydomain.com/mysubdomainfolder 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T16:01:32.757

有这样的第一条规则：

```
RewriteCond %{HTTP_HOST} ^mydomain\.com$ [NC]
RewriteRule ^ http://www.%{HTTP_HOST}%{REQUEST_URI} [R=301,L] 
```

然后清除浏览器缓存并重新启动浏览器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T05:58:04.433

好吧，.htaccess 文件旨在递归应用。

如果您不希望重定向，您可以尝试在与您的添加域对应的每个子文件夹中放置一个 .htaccess，如果您不希望重定向，或者如果您需要它们，则使用备用重写规则。

此外，您可能希望为规则添加另一个重写条件，例如您添加的域是 blah.com，您可以添加

RewriteCond %{HTTP_HOST} !^(.*.)?blah.com

编辑：我应该添加新的重写条件应该低于 RewriteCond %{HTTP_HOST} ！^www。

Edit2：好的，那么子域。在这种情况下，您基本上需要添加一个重写条件，指定如果它是一个已知的子域，则不应用重写规则。例如：

```
RewriteEngine On 
RewriteCond %{HTTP_HOST} !^www\. 
RewriteCond %{HTTP_HOST} !^(subdomain1|subdomain2|subdomain3)\.domain\.com
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L] 
```

现在 subdomain1.domain.com 不会重定向（或 subdomain2/3），www.domain.com 不会重定向，但其他任何东西都会。

# mysql - mysql用户行级访问

> ID：15105052
> 
> 赞同：6
> 
> 时间：2013-02-27T05:45:21.267
> 
> 标签：mysql

有一个包含以下内容的数据库

```
id | userid | name
1  |    1   | John
2  |    1   | John
3  |    2   | Joe
4  |    2   | Joe
5  |    2   | Joe
6  |    3   | Sue
7  |    3   | Sue 
```

我需要一种方法来创建数据库，然后创建用户。我在 mysql 中创建的每个用户都限制他们访问其用户 ID 的数据。数据库中的每个数据库表都有 userid 值。

所以无论他们是在阅读、更新、插入还是删除。如果它通过我附加到该数据库的特定 mysql 用户，我希望该用户只读取、更新、插入或删除他们的用户 ID 所在的位置。

我已经阅读了一些关于 mysql 触发器的东西，但没有找到任何对我有用的东西。

我们有一个后端，其中包含数据并受用户 ID 限制。

该网站从基于 userid so 的表中提取数据`select * from articles where userid=1`。现在，该代码可由用户修改。我想要一种从文章中选择 * 的方法，并且 mysql 只结果`userid=1`该 mysql 用户的行。目标是让每个用户都有自己的 mysql 用户登录到 mysql 数据库，这将限制为他们的用户 ID 的特定值。

有什么想法吗？非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T05:47:33.283

`GoogleResult[0]`有这个：

[http://www.sqlmaestro.com/resources/all/row_level_security_mysql/](http://www.sqlmaestro.com/resources/all/row_level_security_mysql/)

**抽象的**

本文包含使用诸如视图和触发器等 MySQL 功能在 MySQL 5.0 及更高版本中实现行级安全性的分步指南。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T06:25:57.257

出色地！我会建议为此做一张桌子。对于整个应用程序

```
user_rights

id  |   user_id |   insert  |   update | delete | read
1   |   2       |   0       |   0      |    0   |   1 
```

注意：1 表示允许，0 表示不允许。

现在，在您执行任何操作之前，请先检查权限，然后执行其他操作。

详细方法包括部分应用：

```
screens

id  |   title
1   |   articles
2   |   blog

user_rights

id  |   user_id |   insert  |   update | delete | read  |   screen_id
1   |   2       |   1       |   0      |    0   |   1   |       1
2   |   2       |   0       |   0      |    0   |   1   |       2 
```

在这种方法中，您可以允许屏幕级别的访问。用户 id 2 可以添加和查看文章，但他也可以查看博客。我可能在这里使用了不恰当的术语，但我希望你能明白。

# sql-server-2008 - 是否可以“关闭”查询以更新实体框架中的标识列

> ID：15105054
> 
> 赞同：1
> 
> 时间：2013-02-27T05:45:47.570
> 
> 标签：sql-server-2008, entity-framework

我使用 Entity Framework 5 创建了一个数据迁移工具。在分析 sql 事务时，我注意到 EF 进行了插入，然后立即执行选择以检索记录的更新版本（包括主键）。但是......我对密钥并不真正感兴趣，因为这更像是一场火灾并且忘记了批量插入操作。在我看来，如果我不做几十万条我不需要的冗余 Select 语句，插入几十万条记录会更快。

有人知道关闭这种行为的方法吗？

为了性能，我已经关闭了 AutoDetectChangesEnabled 和 ValidateOnSaveEnabled。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T06:18:36.237

您可以将其关闭，但这样做会阻止相关实体设置其 FK 值。

[DatabaseGenerated(DatabaseGeneratedOption.None)](http://cloudonedesign.com/Blog/Post/ef-code-first-disabling-identity-for-int-primary-k-17)

# c - C：亮黄色和亮绿色（ncurses）？

> ID：15105055
> 
> 赞同：2
> 
> 时间：2013-02-27T05:45:49.387
> 
> 标签：c, ncurses

我一直在寻找漂亮的颜色，例如 mc 的黄色和绿色。

在 ncurses 中，您可以指定这些 RGB：

> 10.2\. 更改颜色定义
> 
> 函数 init_color() 可用于更改最初由 curses 定义的颜色的 rgb 值。假设您想将红色的强度稍微减轻一点。然后您可以将此功能用作
> 
> ```
> init_color(COLOR_RED, 700, 0, 0);
> /* param 1     : color name
>  * param 2, 3, 4 : rgb content min = 0, max = 1000 */ 
> ```

我找不到亮黄色或亮绿色。它们不是默认包含在 ncurses 中吗？

问候，乌尔里希

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-04T19:54:08.300

你可以有“完整”的颜色，但你需要重新编译你的 ncurses 来支持它（并且有一些可以显示它的东西）

> “要编译支持 256 色的 NCurses，请使用此选项：”

```
--enable-ext-colors 
```

参考：[http](http://www.c-for-dummies.com/ncurses/256color.php) : //www.c-for-dummies.com/ncurses/256color.php 根据 NCurses 的维护者和 Dan Gookin 的 Thomas Dickey

```
Color   Function                        Constant Name
0       init_color(0,0,0,0);            COLOR_BLACK
1       init_color(0,1000,0,0);         COLOR_RED
2       init_color(0,0,1000,0);         COLOR_GREEN
3       init_color(0,1000,1000,0);      COLOR_YELLOW
4       init_color(0,0,0,1000);         COLOR_BLUE
5       init_color(0,1000,0,1000);      COLOR_MAGENTA
6       init_color(0,0,1000,1000);      COLOR_CYAN
7       init_color(0,1000,1000,1000);   COLOR_WHITE 
```

*   可以从 NCurses 中获得超过标准的 8 种（或 16 种）颜色...

您的 TERM 环境变量也可能会`xterm`尝试将其更改为`xterm-256color`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T21:02:56.153

```
 main()
   {
    initscr();
    if (start_color() == OK)
    {
        init_pair (1, COLOR_RED, COLOR_GREEN);
        attron (COLOR_PAIR (1));
        if (init_color (COLOR_RED, 0, 0, 1000) == OK)
            addstr ("BLUE ON GREEN");
        else
            addstr ("RED ON GREEN");
        getch ();
    }
    endwin();
   } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T10:33:45.627

你可以做的就是创造一种新的颜色，它的名字

COLOR_BRIGHT_YELLOW 到颜色编号 8

COLOR_BRIGHT_GREEN 到颜色编号 9

但我从来没有做过，而且没有太多记录。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T10:11:26.797

终端支持的颜色和颜色对（bg + fg）的数量由函数返回：

```
COLOR()
COLOR_PAIRS() 
```

正如[solusipse](https://stackoverflow.com/users/2031025/solusipse)正确指出的那样，默认情况下应该有8 种颜色（在 中只定义了8 种`curses.h`）。

终端可能支持该`init_color()`呼叫，但很可能不会。您可以检查它发出调用：

```
can_change_color(). 
```

[Pubby](https://stackoverflow.com/users/964135/pubby)正确地指出，粗体（带`A_BOLD`）可以使文本更亮，总共允许 16 种颜色，但仅限于前景色。

在我的系统上`xterm`，`gnome-terminal`和`konsole`行为完全相同；他们报告 8 种颜色，64 种颜色对，`can_change_color()`是错误的，并且该`A_BOLD`属性确实使 fg 颜色变亮。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-01T22:40:51.490

如果你想要明亮的颜色，那么你必须使用：

```
attrxxx(COLOR_PAIR(COLOR_xxxxx) | A_BOLD) 
```

因此，要获得亮黄色，可以使用：

```
attr_t color_bright_yellow = COLOR_PAIR(COLOR_YELLOW) | A_BOLD; 
```

等
（请注意，如果您想要更多颜色，请编译 [更具体，`./configure`] ncurses`--with-ext-colors`启用。）

# asp.net - 将字典设置为数据源

> ID：15105057
> 
> 赞同：0
> 
> 时间：2013-02-27T05:46:01.187
> 
> 标签：asp.net, vb.net

我有以下字典，并喜欢在我的 asp.net 页面中将其设置为我的 Gridview 的数据源

```
Dim myList As New Dictionary(Of Person, string) 
```

字典键是`Person`具有 Id、FirstName 和 LastName 的对象。
我喜欢将上面的字典绑定到一个显示**名字**、**姓氏**和**地址的gridview**

```
<asp:TemplateField HeaderText="First Name" SortExpression="FirstName">
    <EditItemTemplate>
    <asp:TextBox ID="txtFName" runat="server" Text='<%# Bind("FirstName")%>'></asp:TextBox>
    </EditItemTemplate>
</asp:TemplateField> 
```

下一列将是姓氏，第三列是地址 - 这是字典的值属性

是否可以将上述字典绑定到gridview？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T06:50:31.343

您`Dictionary`由 KeyValuePair 元素组成，它公开了两个属性：`Key`和`Value`.

由于您要绑定可通过`Key`每个`Dictionary`条目的属性访问的项目，因此您应该在数据绑定中将这些属性引用为`Key.FirstName`、`Key.LastName`、`Key.Address`等。

因此，鉴于上面的示例，绑定 TextBox 应如下所示：

```
<asp:TextBox ID="txtFName" runat="server" Text='<%# Bind("Key.FirstName")%>'></asp:TextBox> 
```

# http - 如何在 Play 2 中获取 URL？

> ID：15105058
> 
> 赞同：1
> 
> 时间：2013-02-27T05:46:01.417
> 
> 标签：http, scala, playframework, playframework-2.1

同步？异步？

有人可以提供代码示例和/或相关文档的链接吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T06:01:24.117

[Play WS API](http://www.playframework.com/documentation/2.1.0/ScalaWS)可能就是你要找的东西

# php - 哇！此页面没有请求令牌

> ID：15105065
> 
> 赞同：4
> 
> 时间：2013-02-27T05:46:53.290
> 
> 标签：php, twitter

当我尝试使用 php 对 twitter 进行身份验证时，出现错误“哇！

此页面没有请求令牌。这是我们要求使用您的 Twitter 帐户的应用程序所需的特殊密钥。请返回将您发送到此处的站点或应用程序，然后重试；这可能只是一个错误。'。

我尝试了各种代码，但仍然出现错误。如何解决？

以下是我的 Twitter 身份验证链接。

```
 protected $requestTokenUrl = 'https://api.twitter.com/oauth/request_token';
  protected $accessTokenUrl = 'https://api.twitter.com/oauth/access_token';
  protected $authorizeUrl = 'https://api.twitter.com/oauth/authorize';
  protected $apiUrl = 'https://api.twitter.com/1/'; 
```

请帮忙..提前谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-21T09:48:49.067

您可能使用的是 OAuth2，而 Twitter 使用的是 OAuth

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-07-15T19:45:02.200

当我使用的网址出现问题时，我得到了这个。如果您的网址也错误，您将收到此错误。在撰写本文时，网址格式为

`https://twitter.com/oauth/authorize?oauth_token=authTokenHere`

只是提到这一点，因为这也是原因之一。您的问题也可能是由其他原因引起的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-14T11:09:29.913

这只是在我在应用程序设置中勾选“启用回调锁定”后发生在我身上。

取消勾选它会使消息消失:)

[![在此处输入图像描述](../Images/d8aa8b7ff7d63594cd419acdf9df7a22.png)](https://i.stack.imgur.com/HZOuH.png)

# iphone - 如何在 iPhone SDK 中将光栅图像（.bmp、.png、.jpg）转换为矢量图像（.svg）

> ID：15105069
> 
> 赞同：0
> 
> 时间：2013-02-27T05:47:00.477
> 
> 标签：iphone, ios, image, vector-graphics

我想在 iOS SDK 中将光栅图像（.bmp、.jpg、.png）转换为矢量图像（.svg）。是否有任何 API 或 SDK 可以将光栅图像转换为矢量。我怎样才能做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T06:58:26.380

标准 sdk 中没有 API。如果你能找到一种算法来检测位图图像中的几何形状，你可以尝试类似 svgkit 的东西……看起来工作量很大。你在乎它只是一个大像素盒子吗？ [https://github.com/SVGKit/SVGKit](https://github.com/SVGKit/SVGKit)

但是请记住，矢量图是由几何对象组成的，而位图只是像素......所以你真的想在缩放方面走向另一个方向。

# php - 在 Codeigniter 中的 iframe 访问 PHP 文件

> ID：15105070
> 
> 赞同：0
> 
> 时间：2013-02-27T05:47:01.883
> 
> 标签：php, codeigniter, iframe

我想在 codeigniter 中制作 iframe，它可以访问我本地文件夹中的 php 文件。像这样

```
<iframe src="assets/kcfinder/browse.php?type=files&dir=/assets/admin/images" frameborder="0" ></iframe> 
```

但显示总是将其重定向到 404 页面。我该如何解决？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T05:54:41.483

如果您使用的是 CI，那么不建议您直接调用 php 文件。而是创建一个控制器并调用它。就像是：

```
 <?php

    require_once dirname(__FILE__) . "/base.php";

        class fck extends BaseController {

        function __construct() {
            parent::__construct();
            $this->load->model('myModel');
        }

        function browse($type,$dir)  { 
            $data['directory'] = $this->myModel->loadDirContent($type,$dir);
            $this->load->view("fck/browse", $data); 
        }
    }
    ?> 
```

你的 iframe 然后看起来像这样：

```
<iframe src="/fck/browse/files/assets/admin/images" frameborder="0" ></iframe> 
```

请注意，在上面的 URI 中“浏览”之后，您实际上是在提交数据。首先是浏览功能读出的“$type”，即“文件”，然后是路径本身，即包含破折号的数据。可以这么说，这不再是 URL 的一部分。

# excel-formula - excel分开文字和数字

> ID：15105073
> 
> 赞同：1
> 
> 时间：2013-02-27T05:47:09.963
> 
> 标签：excel-formula, excel-2010

这是一个excel问题。我需要将字符串中的文本和数字分开。字符串可以以数字开头，也可以以字符开头。文本或数字之间可能有空格。因此，该公式需要足够通用，以将其分成 2 列，其中一列仅包含文本，另一列仅包含数字。请帮忙。

非常感谢

文本字符串示例

*   07 7878 8788 ABC JKSDKJK
*   ABCVG HDH 656688
*   AGSGD89789798798
*   798 99AJSUDFK

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-31T09:42:16.367

***只有文字***

函数 Alphas(ByVal strInString As String) As String Dim lngLen As Long, strOut As String Dim i As Long, strTmp As String

```
lngLen = Len(strInString)
strOut = ""
For i = 1 To lngLen
    strTmp = Left$(strInString, 1)
    strInString = Right$(strInString, lngLen - i)
    'The next statement will extract BOTH Lower and Upper case chars
    If (Asc(strTmp) >= 65 And Asc(strTmp) <= 90 Or Asc(strTmp) >= 97 And Asc(strTmp) <= 122) Then
        'to extract just lower case, use the limit 97 - 122
        'to extract just upper case, use the limit 65 - 90
        strOut = strOut & strTmp
    End If
Next i
Alphas = strOut 
```

结束功能

只有数字

函数 Numerics(ByVal strInString As String) As String Dim lngLen As Long, strOut As String Dim i As Long, strTmp As String

```
lngLen = Len(strInString)
strOut = ""
For i = 1 To lngLen
    strTmp = Left$(strInString, 1)
    strInString = Right$(strInString, lngLen - i)
    If (Asc(strTmp) >= 48 And Asc(strTmp) <= 57) Then
        strOut = strOut & strTmp
    End If
Next i
Numerics = strOut 
```

结束功能

***只有数字和文字***

Function Alphanumerics(ByVal strInString As String) As String Dim lngLen As Long, strOut As String Dim i As Long, strTmp As String

```
lngLen = Len(strInString)
strOut = ""
For i = 1 To lngLen
    strTmp = Left$(strInString, 1)
    strInString = Right$(strInString, lngLen - i)
    'The next statement will extract BOTH Lower and Upper case chars
    If (Asc(strTmp) >= 65 And Asc(strTmp) <= 90 Or Asc(strTmp) >= 97 And Asc(strTmp) <= 122 or Asc(strTmp) >= 48 And Asc(strTmp) <= 57) Then
        'to extract just lower case, use the limit 97 - 122
        'to extract just upper case, use the limit 65 - 90
        strOut = strOut & strTmp
    End If
Next i
Alphanumerics = strOut 
```

结束功能

这也可以在 excel 中使用，但这由我修改以供 Access 使用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T16:08:26.167

只要 A 列中的所有单元格的格式为 {numbers + spaces}{non-numeric text} 或相反，您就可以从查找第一个数字字符和第一个非数字非空格的位置开始每个单元格中的字符。然后，您可以使用这些加上一些额外的逻辑来使用`MID`.

我在这里发布了数组公式来执行此操作： [Excel 公式来查找单元格中的第一个非字母字符？](https://stackoverflow.com/questions/1506467/excel-formula-to-find-the-first-non-alpha-character-in-a-cell)

您需要对第二个公式稍作修改，因此它返回不是数字或空格的第一个字符的位置：

```
=MIN(
        IF(
                  1*ISNUMBER(
                  1*MID(
                      A1,
                      ROW(INDIRECT("A1:A"&LEN(A1))),
                      1
                  )
                ) +
                1*(MID(
                      A1,
                      ROW(INDIRECT("A1:A"&LEN(A1))),
                      1
                  )=" "),
            LEN(A1)+1,
            ROW(INDIRECT("A1:A"&LEN(A1)))

        )
    ) 
```

# css - 怪癖和标准模式下的 Chrome 垂直对齐

> ID：15105074
> 
> 赞同：0
> 
> 时间：2013-02-27T05:47:22.680
> 
> 标签：css, vertical-alignment, quirks-mode

下图是使用同一浏览器（Chrome 25）对同一页面的渲染。唯一的区别是一个页面有一个 DOCTYPE（因此在标准模式中）而一个没有（因此在 Quirks 中）

怪癖：
![](../Images/5bcf7f15ff26b2725e0a765efb48c628.png)
标准：
![](../Images/60fc75d99ea68bae1c21f561ea559bd0.png)

两个细胞都有`vertical-align: middle`，两个图像都是`display: inline-block`。
Vertical-align 在 Quirks 中有效，但在 Standard 中无效，为什么？

* * *

HTML

```
<table class="oppres" id="oppscore4">
    <tbody>
        <tr id="oppscore4-main">
            <td><img src="images/gold.png"></td>
            <td></td>
            <td>0</td>
        </tr>
        <tr></tr>
        <tr id="oppscore4-total">
            <td></td>
            <td>=</td>
            <td>0</td>
        </tr>
    </tbody>
</table> 
```

CSS

```
table.oppres{
    height: 120px;
}

table[id^=oppscore]{
    width: 80px;
    font-size: 17px;
    line-height: 1;
}
table[id^=oppscore] tr{height: 1em;}
table[id^=oppscore] img{height: 0.9em;}
table[id^=oppscore] tr:nth-last-child(2){height: auto;}
table[id^=oppscore] td:first-child{text-align: right;} 
```

足以重现该问题的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T10:56:50.863

问题不是关于`vertical-align`，`<td>`而是关于`<img />`

怪癖模式触发[此处](http://www.cs.tut.fi/~jkorpela/quirks-mode.html)解释的行为：

> 图像的垂直对齐在某些条件下与封闭框的底部对齐，而不是与文本的基线对齐。当图像是元素（通常是表格单元格）中的唯一内容时，就会发生这种情况。这意味着例如表格单元格中的图像在 Quirks 模式下默认位于单元格的底部（这通常是作者想要的），而在标准模式下，图像下方有几个像素间距（除非设置例如垂直对齐：img 元素的底部）。

您在图像下方的标准模式下看到的空间实际上是`<td>`' 框基线和底部之间的空间（参见[http://www.w3.org/TR/CSS2/visudet.html#leading](http://www.w3.org/TR/CSS2/visudet.html#leading)）。

When `vertical-align`is `bottom`on `<img />`its box' bottom 与`<td>`'box bottom 对齐，因此不再有空间。

# syntax - 方案语法：* 在列表中？

> ID：15105077
> 
> 赞同：0
> 
> 时间：2013-02-27T05:47:30.220
> 
> 标签：syntax, scheme

我是Scheme的新手。有人可以解释`*`以下代码中的内容吗？

```
(define pat2 '(or
           (list a g t a t a t g g a t a)
           (list g t a g g c c g t)
           (list c c c g a t a a a a a a g t g t c g t)
           (list c g a t c c c (junk 1) c g a t c t a)))
(define pat3 (list 'list pat2 '(junk 2)))
(define pat4 (list '* pat3))  ; I'm confused about the * here. 
```

我知道的内容`pat4`将类似于

```
(*
  (list
  (or (list a g t a t a t g g a t a)
  (list g t a g g c c g t)
  (list c c c g a t a a a a a a g t g t c g t)
  (list c g a t c c c (junk 1) c g a t c t a))
  (junk 2))) 
```

但是我仍然对什么`*`是......它通常表示乘法感到困惑，但它不可能在这里可以吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T06:06:41.790

它只是符号 * （这就是它被引用的原因；引用防止符号被评估）。

如果你执行你的代码，你会看到 pat4 只是 pat3 前面带有 * 符号：

```
> pat2
'(or (list a g t a t a t g g a t a) (list g t a g g c c g t) (list c c c g a t a a a a a a g t g t c g t) (list c g a t c c c (junk 1) c g a t c t a))
> pat3
'(list (or (list a g t a t a t g g a t a) (list g t a g g c c g t) (list c c c g a t a a a a a a g t g t c g t) (list c g a t c c c (junk 1) c g a t c t a)) (junk 2))
> pat4
'(* (list (or (list a g t a t a t g g a t a) (list g t a g g c c g t) (list c c c g a t a a a a a a g t g t c g t) (list c g a t c c c (junk 1) c g a t c t a)) (junk 2))) 
```

# java - jFilechooser 显示文件夹

> ID：15105082
> 
> 赞同：1
> 
> 时间：2013-02-27T05:47:53.993
> 
> 标签：java, swing, jfilechooser

我想在 jfilechooser 中显示当前目录的父文件夹。
我想显示`..`引用父文件夹的文件夹

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T05:53:42.000

使用像这样以文件路径作为参数的构造函数。

`JFileChooser jfc = new JFileChooser(".\\..");`

退房[`JFileChooser(File currentDirectory)`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JFileChooser.html#JFileChooser%28java.io.File%29)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T10:34:45.137

这是实现您请求的功能的“尝试”，我遇到的问题是不可能完全复制系统正在执行的操作。

基本上，目录组合框需要某种本机`File`对象（在 Windows 的情况下是 a `sun.awt.shell.Win32ShellFolder2`）。但似乎没有任何方法可以让我们从提供的 API 中创建它们（而且您不想手动创建它们，因为它会破坏外观和跨平台功能）。

![在此处输入图像描述](../Images/efcd326bf71234fef0c2bafe20601173.png)

```
import core.util.MethodInvoker;
import java.awt.EventQueue;
import java.io.File;
import java.io.IOException;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;
import javax.swing.JFileChooser;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;
import javax.swing.filechooser.FileSystemView;
import javax.swing.plaf.ComponentUI;

public class TestFileChooser {

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    System.out.println(UIManager.getSystemLookAndFeelClassName());
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFileChooser fc = new JFileChooser(new MyFileSystemView());
                fc.showOpenDialog(null);

            }
        });
    }

    public static class MyFileSystemView extends FileSystemView {

        @Override
        public File[] getFiles(File dir, boolean useFileHiding) {
            File[] files = super.getFiles(dir, useFileHiding);

            List<File> fileList = new ArrayList<>(Arrays.asList(files));
            if (!isFileSystemRoot(dir)) {
                File newPath = FileSystemView.getFileSystemView().createFileObject(dir, "/..");
                fileList.add(0, newPath);
            }
            files = fileList.toArray(files);

            return files;
        }

        @Override
        public File createNewFolder(File containingDir) throws IOException {
            File newFolder = new File(containingDir + File.separator + "New Folder");
            if (!newFolder.mkdir()) {
                newFolder = null;
            }
            return newFolder;
        }
    }
} 
```

# jquery - 如何在我的滑下效果中应用“等待”？

> ID：15105083
> 
> 赞同：1
> 
> 时间：2013-02-27T05:47:56.883
> 
> 标签：jquery

如何对我的滑下效果应用等待功能。我的代码在下面提到但给我答案我如何等待滑下效果

```
 var j = jQuery.noConflict();
    j(function()
      {
    j(document).ready(function(){
    j("#wrapper #headerSlots  #header-8  ul#globalNav  li.navigationGrop  a.mainNode").mouseenter(function(){
    j(this).next('ul.linkList.navigationLinks').slideDown(1000,'swing');

    /*j(this).next('ul.linkList.navigationLinks').animate({
    left: '+=0',
    height: 'toggle'
    }, 500, function() {
    // Animation complete. j(this).parent().next('.linkList navigationLinks')
    });*/

    });
    j("#wrapper #headerSlots  #header-8  ul#globalNav  li.navigationGrop").mouseleave(function(){
    j(this).children('ul.linkList.navigationLinks').slideUp('fast', 'swing', '');
       // j(this).next('ul.linkList.navigationLinks').slideUp('slow');
    });
    });
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T05:55:20.827

您可以使用`.delay()`jQuery 方法添加保持效果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T06:08:06.530

`.delay(time in milliseconds)`在调用方法之前使用`slideUp()`。

```
j(this).next('ul.linkList.navigationLinks').delay(1000).slideDown(1000,'swing'); 
```

# iphone - 单击按钮时如何显示删除取消弹出窗口

> ID：15105084
> 
> 赞同：0
> 
> 时间：2013-02-27T05:48:00.537
> 
> 标签：iphone, ios, xcode4.5

任何人都可以帮助我在单击按钮时带来此视图![在此处输入图像描述](../Images/a5751555bc43a75b2eb8e20529d8d787.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T05:53:17.020

```
NSString *actionSheetTitle = @"Title You want to give";        //Action Sheet Title
NSString *destructiveTitle = nil;                       //Action Sheet Button Titles
NSString *firstButtonTitle = @"Delete Drafts";               //Action Sheet 1st Button Title
NSString *secondButtonTitle = @"Save Drafts";     //Action Sheet 2nd Button Title
NSString *cancelTitle = @"Cancel";               //Action Sheet Cancel Button Title

UIActionSheet *myActionSheet = [[UIActionSheet alloc]
                                     initWithTitle:actionSheetTitle
                                     delegate:self
                                     cancelButtonTitle:cancelTitle
                                     destructiveButtonTitle:destructiveTitle
                                     otherButtonTitles:firstButtonTitle,secondButtonTitle, nil];

[myActionSheet showInView:self.view.parentViewController.view]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T05:56:35.383

```
 UIActionSheet *act = [[UIActionSheet alloc]initWithTitle:nil delegate:self cancelButtonTitle:@"Cancel" destructiveButtonTitle:@"Delete Draft" otherButtonTitles:@"Save Draft", nil];

[act showInView:self.view]; 
```

从类参考：

**cancelButtonTitle**：取消按钮的标题。此按钮会自动添加到操作表并分配适当的索引，该索引可从 cancelButtonIndex 属性获得。此按钮显示为黑色，表示它代表取消操作。如果您不想要取消按钮或在 iPad 上显示操作表，请指定 nil。

**破坏性**按钮标题：破坏性按钮的标题。此按钮会自动添加到操作表并分配适当的索引，该索引可从 破坏性ButtonIndex 属性获得。此按钮显示为红色，表示它代表破坏性行为。如果您不想要破坏性按钮，请指定 nil。

我会使用破坏性按钮进行删除，因为它将是红色的。然后是黑色的取消按钮。

使用此方法为每个按钮操作提供您需要的任何操作：

```
- (void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex. 
```

# c++ - 在 Eclipse 中运行 C++

> ID：15105086
> 
> 赞同：0
> 
> 时间：2013-02-27T05:48:11.647
> 
> 标签：c++, eclipse, eclipse-cdt

所以我在 Eclipse Juno 中用 C++ 编写了简单的 hello world 程序，每次尝试运行它时，它都会显示“Lunach 失败。找不到二进制文件”我安装了 Mingw 作为我的编译器和其他东西，所以我很好，但我没有为什么它不会运行。有什么想法吗？

# jquery - 如何验证隐藏字段

> ID：15105091
> 
> 赞同：-3
> 
> 时间：2013-02-27T05:48:56.227
> 
> 标签：jquery, jquery-validate, validation

我有一个表单 name="myform" 但存在隐藏字段所以我也想验证这些字段，如何使用 jquery 表单验证来验证隐藏字段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T05:53:16.530

您可以使用`jQuery.validate`允许验证隐藏字段的插件。

只需设置`ignore : false;`或`$.validator.setDefaults({ ignore: '' });`，这将允许您验证隐藏字段。

**官方网站**：[http ://bassistance.de/jquery-plugins/jquery-plugin-validation/](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T05:54:34.877

覆盖忽略变量并将其设置为空：

```
$("#form").validate({
    ignore: "",
    rules: {
        something: {
            number:true,
        }
    }
}); 
```

# java - Java 对象数组 java.lang.NullPointerException

> ID：15105097
> 
> 赞同：-5
> 
> 时间：2013-02-27T05:49:36.717
> 
> 标签：java, arrays, object

我在创建对象数组时遇到问题，但是`java.lang.NullPointerException`当我尝试解决某些问题时遇到了问题。

这是有问题的班级。

```
public class Blocks {
public static Block[] b = new Block[8];

public Blocks() throws IOException {
    new Air  (b[0]);
    new Stone(b[1]);
    new Grass(b[2]);
    new Dirt (b[3]);
} 
```

这是类块。

```
public class Block {
private Texture Texture = null;
private int S = World.BLOCK_SIZE;
private boolean hasTexture = true;
private String texturePath = null;

public void setTexture(String path) throws IOException {
    this.texturePath = path;
    Texture = TextureLoader.getTexture("PNG", new FileInputStream(new File(path)));
}

public void draw(int Xa, int Ya) {

    GL11.glTranslatef(Xa, Ya, 0);
    //GL11.glRotatef(0, 0, 1, 0);
    //GL11.glRotatef(0, 1, 0, 0);

    if(hasTexture) {
    Texture.bind();

    GL11.glBegin(GL11.GL_QUADS);
        GL11.glColor3f(0.5f, 0.5f, 1);
        //GL11.glNormal3f(0, 0, 1);
        GL11.glTexCoord2f(0, 0);
        GL11.glVertex2f(0, 0);
        GL11.glTexCoord2f(0, 1);
        GL11.glVertex2f(0, S);
        GL11.glTexCoord2f(1, 1);
        GL11.glVertex2f(S, S);
        GL11.glTexCoord2f(1, 0);
        GL11.glVertex2f(S, 0);

        GL11.glEnd();
    }
}

void hasTexture(boolean b) {
    this.hasTexture = b;
}

} 
```

如果我需要提供更多信息/代码，请告诉我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T05:58:48.600

这样做

```
public class Blocks {
public static Block[] b = new Block[8];

static {
   // Instantiating the objects present in the array
   for(int i=0; i<b.length; i++)
       b[i] = new Block();
}

public Blocks() throws IOException {
   // Now you can access them
    new Air  (b[0]);
    new Stone(b[1]);
    new Grass(b[2]);
    new Dirt (b[3]);
} 
```

您忘记实例化数组中存在的对象。所以提示空指针异常

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T05:55:38.407

看起来您正在创建一个名为 b 的空数组，其中包含 8 个插槽（类型为块），然后`new Air (b[0]);`使用对（空）数组的引用来实例化对象（例如 ）。

如果 Air 的构造函数无法处理可能是空指针异常来源的空参数

试着`b`先放一些东西

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-27T05:54:07.690

对于初学者，您可以查看以下内容：-

```
public static Block[] b = new Block[8];

public Blocks() throws IOException {
    new Air  (b[0]);
    new Stone(b[1]);
    new Grass(b[2]);
    new Dirt (b[3]);
} 
```

您尚未实例化数组元素。`b[0], b[1], etc..`仍然是`null`参考。

# python - Python 列表合并

> ID：15105098
> 
> 赞同：0
> 
> 时间：2013-02-27T05:49:38.857
> 
> 标签：python

假设我有一个这样的列表：（假设你不知道这个列表中有多少个列表）

```
list=[['food','fish'],['food','meat'],['food','veg'],['sports','football']..] 
```

如何合并列表中的项目，如下所示：

```
list=[['food','fish','meat','veg'],['sports','football','basketball']....] 
```

即，如果它们包含相同的项目之一，则将所有嵌套列表合并到同一个列表中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T05:54:02.630

用于`defaultdict`制作将类型映射到值的字典，然后获取项目：

```
>>> from collections import defaultdict
>>> d = defaultdict(list)
>>> items = [['food','fish'],['food','meat'],['food','veg'],['sports','football']]
>>> for key, value in items:
...     d[key].append(value)
...     
>>> [[key] + values for key, values in d.items()]
    [['food', 'fish', 'meat', 'veg'], ['sports', 'football']] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T06:02:58.003

“强制”替代方案`defaultdict`可以更好地处理已经按密钥顺序排列的数据，并且如果您不想在其上构建数据结构（即，仅在组上工作）......

```
data = [['food','fish'],['food','meat'],['food','veg'],['sports','football']]

from itertools import groupby
print [[k] + [i[1] for i in v] for k, v in groupby(data, lambda L: L[0])] 
```

但是`defaultdict`更灵活，更容易理解 - 所以选择@Blender的答案。

# javascript - 如何使 javascript 代码易于维护

> ID：15105102
> 
> 赞同：7
> 
> 时间：2013-02-27T05:50:01.610
> 
> 标签：javascript

总而言之，我正在开发一个需要大量 jquery 或 js 代码的高度交互的 Web 应用程序，而且我发现我的代码变得有点难以维护并且不是那么可读。有时连作者都找不到指定的代码。

到目前为止，我为清晰代码所做的工作如下。

1.  一个 js 文件中的一个 js 组件。（例如。`CustomTab.js`是我的应用程序中的一个选项卡组件。）
2.  使用模板生成基于 JSON 的组件 HTML。
3.  使用 Jquery 用户界面。
4.  不显眼的 JavaScript。

还有其他需要注意的地方吗？无论如何，任何使 js 库/框架易于维护的建议或推荐技术都非常受欢迎，谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T05:57:46.583

我可以建议您将模块模式与[RequireJS](http://requirejs.org/)一起使用来组织您的 JavaScript 代码。对于生产，您将能够使用 RequireJS 优化器将您的模块构建到一个 JavaScript 文件中。

此外，如果您预计您的客户端应用程序会很大，请考虑将一些 JavaScript MVC 框架（如 Backbone.js）与服务器端 RESTful 服务一起使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T06:03:29.923

我将这种命名空间模式用于我的库：

MyLibrary.ListView.js：

```
var MyLibrary = MyLibrary || {};

MyLibrary.ListView = {

    doSomethingOnListView: function() {
        ...
        return this;
    },

    doSpecialThing: function() {
        ...
        return this;
    },

    init: function() {

        // Additional methods to run for all pages
        this.doSomethingOnListView();

        return this;
    }
}; 
```

无论哪个页面需要这个：

```
<script type="text/javascript" src="/js/MyLibrary.ListView.js"></script>
<script type="text/javascript">
$(function() {
    MyLibrary.ListView
        .init()
        .doSpecialThing();
});
</script> 
```

如果某个页面需要附加功能，您甚至可以链接方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T06:35:56.520

This is exactly the same question which I ask myself each time. I think there are few ways to get easy maintaining code.

*   Contribute in javascript opensource projects and understand how they solved that problem. I think you can gather some unique solution from each project and common part of projects structure will answer to your question about maintenance.

*   Use prepared solutions like [backbone](http://backbonejs.org/), [knockout](http://knockoutjs.com/), [ember](http://emberjs.com/) or [angularjs](http://angularjs.org/) if I am not mistaken angular doesn't give you structure but provide you powerful tool for creating pages with less code. Also check [todomvc](http://todomvc.com/) for ready-made solutions.

*   Read books and try to create some structure for your needs. It will be difficult and long but result (maybe few years later :)) will be awesome.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-27T06:09:09.253

目前我还在为我的公司开发一个 JS 框架。我正在做的是我为 JS 使用 OOP 元素。换句话说，我正在实现与 C# 库类似的代码（不是那么相似，模拟将是正确的词）。作为 C# 中的示例，您使用 Microsoft.Window.Forms，因此我可以使用 JSOOP 并使用方法扩展和覆盖来创建相同的场景。但是，如果您在项目中走得太远，将 JS 代码转换为 JSOOP 将非常耗时。

使用 JSLint，这将验证您的代码并生成可读的、脚本引擎友好的代码。虽然 JSLint 非常严格，所以你也可以使用 JSHint。

为每个组件使用单独的文件是一个好主意，我也在这样做。

如果你喜欢，你可以下载 jQuery 开发者版本，你可以大致了解他们是如何创建框架的。我从 jQuery 框架中学到了很多东西！

# asp.net - 电子邮件存在于 asp.net 中并显示此错误

> ID：15105104
> 
> 赞同：1
> 
> 时间：2013-02-27T05:50:23.500
> 
> 标签：asp.net

```
System.FormatException: The specified string is not in the form required 
                        for an e-mail address.
at System.Net.Mime.MailBnfHelper.ReadMailAddress(String data, Int32& offset, 
                                                String& displayName) at 
 System.Net.Mime.MailBnfHelper.ReadMailAddress(String data, Int32& offset) at 
 System.Net.Mail.MailAddressCollection.ParseValue(String addresses) at 
 System.Net.Mail.MailAddressCollection.Add(String addresses) 
 at MasterPage.btnJoin_Click(Object sender, EventArgs e) in 
 d:\Visual Studio 2010\SocielNetwork\MasterPage.master.cs:line 25 
```

# wix - 我们可以在运行时使用语言选择 UI 本地化 WIX msi 和捆绑吗？

> ID：15105105
> 
> 赞同：3
> 
> 时间：2013-02-27T05:50:28.000
> 
> 标签：wix, windows-installer, wix3.6

我们在 Wix 中创建了一个 MSI 和 Bundle。我需要以这样一种方式本地化这两者，以便弹出语言选择 GUI，并且用户可以在运行时选择语言。如果有人可以帮助我，将不胜感激。

对于 MSI，我正在创建另一个引导程序，用于启动语言选择组合框，并使用所需的转换（使用命令 shell）调用转换后的 MSI。我仍然不确定这种方法的可行性。我在引导程序的自定义 UI 中创建组合框并调用批处理命令以所需语言运行此 msi 时遇到问题。

对于 Bundle - 我仍在努力寻找一种方法。如果有人对此有任何想法/样本。

如果有人可以帮助我解决此问题或为我提供另一种满足上述要求的替代方法，那将很有帮助。

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T06:22:53.280

推荐的方法（就此而言，大多数 MS 产品使用的方法），如您所描述的。

1.  为每种语言创建一个本地化的 MSI
2.  选择一个基地并生成 MST
3.  打包 MST、MSI 和引导程序，这将
4.  显示语言选择对话框并调用，作为参数`MSIEXEC`传递`TRANSFORM=language.mst`

该`MSIEXEC`过程开始后，可以说所有本地化都已完成。任何选择都必须在 MSI 系统之外进行。

[有关示例，请参阅此 codeproject 文章。](http://www.codeproject.com/Articles/103749/Creating-a-Localized-Windows-Installer-Bootstrappe)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-02T12:39:56.953

**MSI 的 UI 选择**

1.  为每种语言创建一个本地化的 MSI
2.  选择一个基地并生成 MST
3.  将 MST、MSI 打包到引导程序中。
4.  自定义**HyperlinkTheme.xml**以包含用于选择每种语言的**单选按钮。**
5.  使用**变量**标签将单选按钮从 UI 链接到 .wxs 文件
6.  在 msi 标记中包含**msi 属性**并硬编码**MST**和**InstallCondition**属性的路径以区分每个选择
7.  使用最新版本的 wix 来支持此功能。

Bundle 仅支持**自动基础检测**，不支持 UI 选择

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-04T10:39:14.990

我想这可能会对您有所帮助： [使用 WiX 创建语言选择对话框](https://stackoverflow.com/questions/16423808/creating-language-selection-dialog-using-wix)。

使用基于 C# 的自定义引导程序创建用于语言选择的自定义 UI 存在限制。这可能导致主机上需要 .Net 框架。

# ipython - 是否有 IPython 笔记本服务器状态查询？

> ID：15105108
> 
> 赞同：1
> 
> 时间：2013-02-27T05:51:03.997
> 
> 标签：ipython

我将笔记本服务器嵌入到独立的 OS X 应用程序中，其中服务器在子进程中启动（通过 NSTask），应用程序使用 HTTP 连接到该进程并在 WebView 中呈现 Web 前端。

我希望 OS X 应用程序部分能够查询服务器子进程以获取各种状态信息，最重要的是是否有任何笔记本打开且未保存更改。我想知道是否有某种方法可以在特殊的 URL 上查询这个，例如

```
http://127.0.0.1:8888/status.json 
```

我想做的另一件事是控制笔记本服务器，例如告诉它在关闭之前保存任何未保存的更改。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T06:29:14.720

没有一般的“状态”查询，但您可以通过 GET 请求查看现有笔记本的 JSON 摘要

```
http://127.0.0.1:8888/notebooks 
```

这将为您提供以下形式的字典列表：

```
[
 {
  "kernel_id": null, 
  "name": "Animations Using clear_output", 
  "notebook_id": "49222a70-b746-4fb2-9b96-fe1a61e82979"
 }, 
 {
  "kernel_id": "2e8de018-c816-4222-82d2-4a35cfa95f1c", 
  "name": "Cell Magics", 
  "notebook_id": "38ce96ab-b456-4af1-b68d-44a1a3ce86ee"
 }
] 
```

Where`kernel_id=null`意味着笔记本没有运行，并且`kernel_id=U-U-I-D`意味着它正在运行。

> 最重要的是是否有任何笔记本打开且未保存更改

无法知道未保存的更改，因为此信息仅存在于浏览器中 - 服务器甚至不知道文档已被编辑，因此无需查询。

> 我想做的另一件事是控制笔记本服务器，例如告诉它在关闭之前保存任何未保存的更改。

这是不可能的，因为实时文档实际上并不存在于服务器中。编辑后的文档仅存在于编辑笔记本的浏览器窗口中的浏览*器端*。

如果要检查未保存的更改和/或触发保存，则必须通过与 WebView 中的 javascript 交互来执行此操作 - js 中的笔记本对象有一个“脏”标志，表示存在未保存的更改。所以“保存任何未保存的更改”将是：

```
if (IPython.notebook.dirty) { IPython.notebook.save_notebook(); } 
```

*用 IPython 1.0.dev 测试*

# sql-server - 当从函数调用主存储过程时，在 DataTable 中给出子过程结果

> ID：15105111
> 
> 赞同：1
> 
> 时间：2013-02-27T05:51:09.273
> 
> 标签：sql-server, stored-procedures

我有一个 sql 存储过程，它调用另一个 sql 存储过程。在 sql server 中执行时我工作正常。但是当我从类中的函数调用时，它返回子过程返回的 DataTable。我想返回主过程返回的数据。

我的主要程序：

```
ALTER PROCEDURE [dbo].[StoredProcedure2]

@QuaterList varchar(50) = NULL
AS
BEGIN
    DECLARE @sql nvarchar(4000)

    SELECT @sql='SELECT Id, Suggester, Requester, Date_Created from CRM.dbo.CRM_Doctor_Request WHERE 1=1 '
    If (@QuaterList) IS NOT NULL
    BEGIN
        DECLARE @MonthsList varchar(1000)
        EXEC dbo.SPGetMonthsListforMultipleQuaters  @QuaterList, @MonthsList OUTPUT
        SELECT @MonthsList
        SELECT @sql=@sql + ' AND MONTH(Date_Created) in ('
        + SUBSTRING(@MonthsList, 1, LEN(@MonthsList)-1) +')'
    END

    EXEC sp_executesql @sql, N' @QuaterList varchar(50) ', 
                    @QuaterList
END 
```

子程序`SPGetMonthsListforMultipleQuaters`：

```
ALTER PROCEDURE dbo.SPGetMonthsListforMultipleQuaters
    @InputList varchar(10),
    @MonthsList varchar(1000) OUTPUT
AS
BEGIN
    SELECT @MonthsList= ''
    /* Create temp table */
    CREATE TABLE #TempListTable
    (
        TableField int
    )
    /* add data into temp table */
    DECLARE @TableField varchar(10), @Pos int

    SET @InputList = LTRIM(RTRIM(@InputList))+ ','
    SET @Pos = CHARINDEX(',', @InputList, 1)

    IF REPLACE(@InputList, ',', '') <> ''
    BEGIN
        WHILE @Pos > 0
        BEGIN
            SET @TableField = LTRIM(RTRIM(LEFT(@InputList, @Pos - 1)))
            IF @TableField <> ''
            BEGIN
                INSERT INTO #TempListTable (TableField) VALUES (CAST(@TableField AS int)) --Use Appropriate conversion
            END
            SET @InputList = RIGHT(@InputList, LEN(@InputList) - @Pos)
            SET @Pos = CHARINDEX(',', @InputList, 1)
        END
    END 
    /* fetch data from temptable using cursor */
    DECLARE @ArrayItem nvarchar(100)
    DECLARE @Array_Cursor CURSOR

    SET @Array_Cursor = CURSOR FAST_FORWARD FOR select TableField 
    from #TempListTable

    OPEN @Array_Cursor
    FETCH NEXT FROM @Array_Cursor  INTO @ArrayItem

    WHILE @@FETCH_STATUS = 0  
    BEGIN
        /* creating list of months */

        IF (@ArrayItem = 1)
            SELECT @MonthsList=@MonthsList + '4,5,6,'
        IF (@ArrayItem = 2)
            SELECT @MonthsList=@MonthsList + '7,8,9,'
        IF (@ArrayItem = 3)
            SELECT @MonthsList=@MonthsList + '10,11,12,'
        IF (@ArrayItem = 4)
            SELECT @MonthsList=@MonthsList + '1,2,3,'

        FETCH NEXT FROM @Array_Cursor INTO @ArrayItem
    END
    /*print @MonthsList*/

    Close  @Array_Cursor
    deallocate  @Array_Cursor
END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T07:11:31.123

问题解决了。这是因为我写了`SELECT @MonthsList`所以它也返回了不需要的东西，并且也产生了问题。所以我删除了它并解决了问题。

新程序代码是：

```
ALTER PROCEDURE [dbo].[StoredProcedure2]

@QuaterList varchar(50) = NULL
AS
BEGIN
    DECLARE @sql nvarchar(4000)

    SELECT @sql='SELECT Id, Suggester, Requester, Date_Created from CRM.dbo.CRM_Doctor_Request WHERE 1=1 '
    If (@QuaterList) IS NOT NULL
    BEGIN
        DECLARE @MonthsList varchar(1000)
        EXEC dbo.SPGetMonthsListforMultipleQuaters  @QuaterList, @MonthsList OUTPUT

        SELECT @sql=@sql + ' AND MONTH(Date_Created) in ('
        + SUBSTRING(@MonthsList, 1, LEN(@MonthsList)-1) +')'
    END

    EXEC sp_executesql @sql, N' @QuaterList varchar(50) ', 
                    @QuaterList
END 
```

# python - 仅比较日期时间中的时间部分 - Python

> ID：15105112
> 
> 赞同：30
> 
> 时间：2013-02-27T05:51:13.373
> 
> 标签：python, datetime, python-2.x

我只想比较日期时间中的时间部分。我有不同的日期，只有时间字段可以比较。由于日期不同，我只想考虑时间部分所以我认为创建两个日期时间对象无济于事。我的字符串为

```
start="22:00:00"
End="03:00:00"
Tocompare="23:30:00" 
```

以上是我将它们转换为日期时间时的字符串

```
dt=datetime.strptime(start,"%H:%M:%S") 
```

它给

```
1900-01-01 22:00:00 
```

这是python中的默认日期。所以我需要避免这一切，只想要时间部分。我只需要检查我是否`Tocompare`介于`start`和`End`

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-02-27T06:11:06.750

只需调用对象的`.time()` *方法*来`datetime`获取它们的小时、分钟、秒和微秒。

```
dt = datetime.strptime(start,"%H:%M:%S").time() 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-27T05:54:52.263

[使用datetime.time()](http://docs.python.org/3.3/library/datetime.html#datetime.datetime.time)比较他们的时间。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-27T06:03:25.763

```
import datetime

start = datetime.datetime.strptime(start, '%H:%M:%S')
start = datetime.time(start.hour, start.minute,start.second)

tocompare = datetime.datetime.strptime(tocompare, '%H:%M:%S')
tocompare = datetime.time(tocompare.hour, tocompare.minute, tocompare.second)

start > tocompare # False 
```

# php - 关闭 php 中的弹出窗口后如何重定向到另一个页面，这对 chrome 和 FF 用户来说效果很好

> ID：15105115
> 
> 赞同：-2
> 
> 时间：2013-02-27T05:51:40.723
> 
> 标签：php, javascript, google-chrome

我创建了一个用户使用 google 登录的站点，其中打开一个弹出窗口进行登录，当用户单击提交按钮时，弹出窗口关闭 & 用户重定向到另一个页面。

我已经完成了代码，但它在 FF bt 中工作正常，在 chrome 中不工作

这是我的代码，任何人都可以建议我需要做哪些更改，以便它也可以在 chrome 中使用。

```
 <?php
   @session_start();
   require 'openid.php';
   try {

$openid = new LightOpenID;
if(!$openid->mode) {

    if(isset($_GET['login'])) {

        $openid->identity = 'https://www.google.com/accounts/o8/id';
        $openid->required = array('namePerson/first', 'namePerson/last', 'contact/email');
       // @header('Location: ' . $openid->authUrl());
    echo "<script>location.href='".$openid->authUrl()."'</script>";
    }

} elseif($openid->mode == 'cancel') {
    echo 'User has canceled authentication!';
} else {
    if($openid->validate())
    {           
         'User <b>' . $openid->identity . '</b> has logged in.<br>';

         "<h3>User information</h3>";
        $_SESSION['identity'] = $openid->identity;
        $identity = $openid->identity;
        $attributes = $openid->getAttributes();
        $_SESSION['email'] = $attributes['contact/email'];
        $_SESSION['first_name'] = $attributes['namePerson/first'];
        $_SESSION['last_name'] = $attributes['namePerson/last'];

        /* "mode: " . $openid->mode . "<br>";
         "identity: " . $identity . "<br>";
         "email: " . $email . "<br>";
        "first_name: " . $first_name . "<br>";
         "last_name: " . $last_name . "<br>";*/

    }
    else
    {
        echo 'User ' . $openid->identity . 'has not logged in.';
    }

    echo "<script>window.close();</script>";
    echo '<script>window.opener.location.href="index2.php"</script>';

 }
    } catch(ErrorException $e) {
     echo $e->getMessage();
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T06:01:54.320

我相信 window.close() 不适用于您的 chrome。一旦我遇到问题，我使用

替换 window.close(); 使用下面的代码

```
window.open('', '_self', ''); //simple bug fix
window.close(); 
```

也尝试把这个

```
echo '<script>window.opener.location.href="index2.php"</script>';
echo "<script>window.open('', '_self', '');window.close();</script>"; 
```

希望它也适合你。

如果不是，请更具体地说明这个问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T07:37:08.060

请尝试以下任一选项

echo('opener.window.location.reload(true); window.close();'); 或 echo('window.opener.location.reload(false); window.close();');

如果仍然存在问题，请告诉我

# symfony - symfony2 中的自定义实体生成错误

> ID：15105117
> 
> 赞同：0
> 
> 时间：2013-02-27T05:51:43.110
> 
> 标签：symfony, symfony-2.1, symfony-2.2

您好我正在创建一个自定义实体类而不使用命令提示符。

这样我就创建了一个表名“profile”

具有以下字段。

```
id:       type = integer,Pk,
name:     type = string
lastname: type = string,
email:    type = string
gender:   type = enum('male','female'),
country:  type = string
state:     type = string,
city:     type='string', 
```

现在我要做的是创建一个名为“Profile.php”的实体类

```
 <?php

  namespace Blogger\BlogBundle\Entity;

  use Doctrine\ORM\Mapping as ORM;

 class Profile
{

protected $id;

protected $name;

protected $lastname;

protected $email;

protected $image;

protected $gender;

protected $city;

protected $state;

protected $country;

public function getName()
{
    return $this->name;
}

public function setName($name)
{
    $this->name = $name;
}

public function getLastName()
{
    return $this->lastname;
}
public function setLastName($lastname)
{
    $this->lastname = $lastname;
}

public function getEmail()
{
    return $this->email;
}
public function setEmail($email)
{
    $this->email = $email;
}

public function getImage()
{
    return $this->image;
}
public function setImage($image)
{
    $this->image = $image;
}

public function getGender()
{
    return $this->gender;
}
public function setGender($gender)
{
    $this->gender = $gender;
}

public function getCountry()
{
    return $this->country;
}
public function setCountry($country)
{
    $this->country = $country;
}

public function getState()
{
    return $this->state;
}
public function setState($state)
{
    $this->state = $state;
}

public function getCity()
{
    return $this->city;
}
public function setCity($city)
{
    $this->city = $city;
}
//public function   
}
?> 
```

之后，我创建了一个学说映射文件“Profile.orm.yml”。

```
Blogger\BlogBundle\Entity\Profile:
type: profile
table: null
repositoryClass: Blogger\BlogBundle\Entity\ProfileRepository
fields:
    id:
        type: integer
        id: true
        generator:
            strategy: AUTO
    name:
        type: string
        length: '255'
    lastname:
        type: string
        length: '255'
    email:
        type: string
        length: '255'
    gender:
        type: string
        columnDefinition: enum('male','female')
    image:
        type: string
        length: '255'
    country:
        type: string
        length: '255'
    state:
        type: string
        length: '255'
    city:
        type: string
        length: '255'

lifecycleCallbacks: {  } 
```

现在的问题是当我调用个人资料页面时显示以下错误？

```
 Class "Blogger\BlogBundle\Entity\Profile" is not a valid entity or mapped super class. 
```

所以请让我知道还有其他地方我必须忘记编码。或当前文件中的错误部分。因为，当我使用命令提示符生成实体时，会创建相同的 2 文件并且工作正常。

但我想自定义创建文件，所以请帮助我。谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T07:33:40.737

```
type: entity
table: profile 
```

应该做我认为的伎俩。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T07:35:35.603

首先它是 YML，所以缩进很重要（并提高可读性）；）第二个应该是类型“实体”而不是“配置文件”

```
Blogger\BlogBundle\Entity\Profile:
    type: entity
    repositoryClass: Blogger\BlogBundle\Entity\ProfileRepository
    fields:
        id:
            type: integer
            id: true
            generator:
                strategy: AUTO
        name:
            type: string
            length: '255'
        lastname:
            type: string
            length: '255'
        email:
            type: string
            length: '255'
        gender:
            type: string
            columnDefinition: enum('male','female')
        image:
            type: string
            length: '255'
        country:
            type: string
            length: '255'
        state:
            type: string
            length: '255'
        city:
            type: string
            length: '255'
    lifecycleCallbacks: {  } 
```

请使用`php app/console doctrine:schema:validate`任务检查您是否有有效的架构和映射信息。

# c++ - Poco 是否有自己的额外异常类或模式？

> ID：15105119
> 
> 赞同：1
> 
> 时间：2013-02-27T05:51:55.390
> 
> 标签：c++, design-patterns, poco-libraries

Poco 被设计为一个基础框架。它是否有任何额外的异常类或模式，这是预期的整体框架？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T20:24:43.957

Poco 有自己的异常层次结构，继承自 std::exception，顶部是[Poco::Exception 。](http://pocoproject.org/docs/Poco.Exception.html)有关详细信息，请参阅[错误处理和调试](http://pocoproject.org/slides/020-ErrorHandlingAndDebugging.pdf)。

# iphone - 将字符串转换为日期（0512 应转换为 2012 年 5 月）

> ID：15105123
> 
> 赞同：-1
> 
> 时间：2013-02-27T05:52:15.493
> 
> 标签：iphone, ios, datepicker

如何将字符串转换为日期？我知道我们可以使用 dateFormatter 来做到这一点，但我被困在两者之间。我有格式 0512，应该转换为 2012 年 5 月。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T05:58:25.230

尝试这个，

```
 NSString *finalDate = @"0512";
    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setDateFormat:@"MMyy"];

    NSDate *date = [dateFormatter dateFromString:finalDate];
    [dateFormatter setDateFormat:@"MMM yyyy"];

    NSLog(@"%@",[dateFormatter stringFromDate:date]); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T06:02:32.510

尝试这个

```
 NSDateFormatter *dateFormatter=[[NSDateFormatter alloc]init];
    [dateFormatter setDateFormat:@"MMyy"];
    NSDate *dateObj= [dateFormatter dateFromString:@"0512"];
    NSLog(@"%@",dateObj);
    [dateFormatter setDateFormat:@"EEEE MMMM d, YYYY"];
    NSLog(@"%@",[dateFormatter stringFromDate:dateObj]); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T06:00:26.017

试试这个代码可能对你有帮助..

```
 NSString *dateStr = @"0512";

    // Convert string to date object
    NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
    [dateFormat setDateFormat:@"MMyy"];
    NSDate *date = [dateFormat dateFromString:dateStr];

    // Convert date object to desired output format
    [dateFormat setDateFormat:@"MMMM YYYY"];
    dateStr = [dateFormat stringFromDate:date];
    [dateFormat release];

    NSLog(@"%@",dateStr); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T05:58:17.860

这有什么难的？1\. 取出字符串的前 2 个字符 2\. 将 if else/convert string 转换为 int 并使用 switch 组成月份 3\. 取出接下来的 2 个字符，将它们添加到 2000 得到年份

现在用户iOS功能来实现这一点:)

# c++ - 使用 cl.exe 创建 .lib 或 .dll

> ID：15105127
> 
> 赞同：0
> 
> 时间：2013-02-27T05:52:36.810
> 
> 标签：c++

我有一个 .c 文件和几个 .h 文件以及一个我想链接到的库。从我的 .c 文件创建 dll 或 lib 的语法是什么？我尝试了 cl myc.c 但它试图从中制作一个 exe 并正在寻找一个入口点..?? 谢谢，某人

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T05:57:30.267

尝试以下操作，链接 /DLL /OUT:dllname.dll objectfile1.obj ...。这将创建一个动态库

注意编译时使用 cl /c something.c 这将创建 .obj 文件，它编译文件而不链接，然后您可以使用上述命令链接它们。

希望您在 .c 文件中有一些导出的函数..

# c# - SignalR 在远程计算机上部署时不起作用

> ID：15105129
> 
> 赞同：3
> 
> 时间：2013-02-27T05:52:47.597
> 
> 标签：c#, asp.net-mvc, signalr, signalr-hub

我开发了一个网络聊天应用程序，但遇到了一个奇怪的问题。该应用程序在我的本地机器上运行良好，但只是卡在远程机器上。

我完全迷路了，如何提供有关我的问题的线索（如果有追踪问题的技巧，请提出建议），我得到的唯一错误`$.connection.hub.error`是

```
Protocol error: Unknown transport.

Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.InvalidOperationException: Protocol error: Unknown transport.

Source Error: 

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.

Stack Trace: 

[InvalidOperationException: Protocol error: Unknown transport.]
   Microsoft.AspNet.SignalR.PersistentConnection.ProcessRequest(HostContext context) +866
   Microsoft.AspNet.SignalR.Hubs.HubDispatcher.ProcessRequest(HostContext context) +174
   Microsoft.AspNet.SignalR.Owin.CallHandler.Invoke(IDictionary`2 environment) +628
   Microsoft.AspNet.SignalR.Owin.Handlers.HubDispatcherHandler.Invoke(IDictionary`2 environment) +222
   Microsoft.Owin.Host.SystemWeb.OwinCallContext.Execute() +55
   Microsoft.Owin.Host.SystemWeb.OwinHttpHandler.BeginProcessRequest(HttpContextBase httpContext, AsyncCallback callback, Object extraData) +259

[TargetInvocationException: Exception has been thrown by the target of an invocation.]
   Microsoft.Owin.Host.SystemWeb.CallContextAsyncResult.End(IAsyncResult result) +110
   Microsoft.Owin.Host.SystemWeb.OwinHttpHandler.EndProcessRequest(IAsyncResult result) +7
   System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +8836913
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +184 
```

这是控制台日志提供的内容。

```
SignalR: Negotiating with '<root_url>/signalr/negotiate'. jquery.signalR-1.0.0-rc2.js:54
SignalR: Attempting to connect to SSE endpoint '<root_url>/signalr/connect?transport=serverSentEv…2fc32a4&connectionData=%5B%7B%22name%22%3A%22xmppservicehub%22%7D%5D&tid=7' jquery.signalR-1.0.0-rc2.js:54
SignalR: EventSource timed out trying to connect jquery.signalR-1.0.0-rc2.js:54
SignalR: EventSource readyState: 0 jquery.signalR-1.0.0-rc2.js:54
SignalR: EventSource calling close() jquery.signalR-1.0.0-rc2.js:54
SignalR: This browser supports SSE, skipping Forever Frame. jquery.signalR-1.0.0-rc2.js:54
SignalR: SignalR: Initializing long polling connection with server. jquery.signalR-1.0.0-rc2.js:54
SignalR: Attempting to connect to '<root_url>/signalr/connect?transport=longPolling&…fc32a4&connectionData=%5B%7B%22name%22%3A%22xmppservicehub%22%7D%5D&tid=10' using longPolling. jquery.signalR-1.0.0-rc2.js:54
SignalR: Longpolling connected jquery.signalR-1.0.0-rc2.js:54
SignalR: Attempting to connect to '<root_url>/signalr?transport=longPolling&connecti…%7CS%2C1%7CT%2C0%7CQ%2C0&groups=%5B%22XmppServiceHub.howtodemo%22%5D&tid=2' using longPolling. jquery.signalR-1.0.0-rc2.js:54
SignalR: Attempting to connect to '<root_url>/signalr?transport=longPolling&connecti…%7CR%2C0%7CS%2C1%7CT%2C0&groups=%5B%22XmppServiceHub.howtodemo%22%5D&tid=8' using longPolling. jquery.signalR-1.0.0-rc2.js:54
SignalR: Attempting to connect to '<root_url>/signalr?transport=longPolling&connecti…%7CR%2C0%7CS%2C1%7CT%2C0&groups=%5B%22XmppServiceHub.howtodemo%22%5D&tid=5' using longPolling. jquery.signalR-1.0.0-rc2.js:54
SignalR: An error occurred using longPolling. Status = error. <html>
    <head>
        <title>Protocol error: Unknown transport.</title> 
```

供参考：

*   [服务器端是具有此处](https://gist.github.com/davidfowl/4692934)描述的只读会话的​​ SignalR 集线器
*   ASP.NET MVC 4
*   IIS 6 网络服务器

我不知道如何提供任何线索，如果这些信息不够，请告诉我应该提供更多信息。

**编辑**

使用来自 nuget（版本 1.0.0）的最新库进行更新后，我得到了以下错误（仍然是相同的控制台日志，在本地机器上仍然可以正常工作，但在远程机器上）

```
[ObjectDisposedException]: The CancellationTokenSource has been disposed.

Server stack trace: 
   at System.Threading.CancellationTokenSource.ThrowIfDisposed()
   at System.Threading.CancellationTokenRegistration.Dispose()
   at Microsoft.AspNet.SignalR.Infrastructure.CancellationTokenExtensions.<>c__DisplayClass6`1.<SafeRegister>b__1()
   at Microsoft.AspNet.SignalR.Infrastructure.DisposableAction.Dispose(Boolean disposing)
   at Microsoft.AspNet.SignalR.Infrastructure.DisposableAction.Dispose()
   at Microsoft.AspNet.SignalR.Transports.TransportHeartbeat.EndConnection(ConnectionMetadata metadata)
   at Microsoft.AspNet.SignalR.Transports.TransportHeartbeat.AddConnection(ITrackingConnection connection)
   at Microsoft.AspNet.SignalR.Transports.LongPollingTransport.ProcessRequest(ITransportConnection connection)
   at Microsoft.AspNet.SignalR.PersistentConnection.ProcessRequest(HostContext context)
   at Microsoft.AspNet.SignalR.Hubs.HubDispatcher.ProcessRequest(HostContext context)
   at Microsoft.AspNet.SignalR.Owin.CallHandler.Invoke(IDictionary`2 environment)
   at Microsoft.AspNet.SignalR.Owin.Handlers.HubDispatcherHandler.Invoke(IDictionary`2 environment)
   at Microsoft.Owin.Host.SystemWeb.OwinCallContext.Execute()
   at Microsoft.Owin.Host.SystemWeb.OwinHttpHandler.BeginProcessRequest(HttpContextBase httpContext, AsyncCallback callback, Object extraData)

Exception rethrown at [0]: 
   at Microsoft.Owin.Host.SystemWeb.Utils.<>c__DisplayClass1.<GetRethrowWithNoStackLossDelegate>b__0(Exception ex)
   at Microsoft.Owin.Host.SystemWeb.Utils.RethrowWithOriginalStack(Exception ex)
   at Microsoft.Owin.Host.SystemWeb.CallContextAsyncResult.End(IAsyncResult result)
   at Microsoft.Owin.Host.SystemWeb.OwinHttpHandler.EndProcessRequest(IAsyncResult result)
   at System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
   at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T07:25:23.507

SignalR 不支持 < IIS 7。

**编辑：** 我们不支持 IIS < 7，但可以设置一些配置以支持它。

看起来您的应用程序正在运行，但您在[https://github.com/SignalR/SignalR/issues/1549](https://github.com/SignalR/SignalR/issues/1549)遇到了这个问题，它已在下一个版本中得到修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T12:13:13.577

当您提供错误的集线器 URL 时，也会出现传输问题。即使您在 URL 末尾添加一个额外的正斜杠，也会出现此问题。

# javascript - 使用 UIAutomation javascript 进行地图视图测试

> ID：15105131
> 
> 赞同：1
> 
> 时间：2013-02-27T05:52:49.483
> 
> 标签：javascript, iphone, ios, xcode, ui-automation

我想通过更改纬度和经度来检查我的地图视图是否正常工作。我正在使用自动化 javascript。是否有任何代码可以更改自动化脚本中的纬度和经度。提前致谢。`enter code here`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-13T15:36:46.113

看这个[文档](http://developer.apple.com/library/ios/documentation/ToolsLanguages/Reference/UIATargetClassReference/UIATargetClass/UIATargetClass.html#//apple_ref/javascript/instm/UIATarget/setLocation)

```
UIATarget.localTarget().setLocation( { latitude:48.137222, longitude:11.575556 } ); 
```

应该更改设备的位置。

# linux - Bash 将 awk 的输出捕获到数组中

> ID：15105135
> 
> 赞同：51
> 
> 时间：2013-02-27T05:53:05.420
> 
> 标签：linux, arrays, bash

我被困在一个小问题上。我有一个命令将输出通过管道传输到 awk 但我想将输出一个一个地捕获到一个数组中。

我的例子：

```
myarr=$(ps -u kdride | awk '{ print $1 }') 
```

但这会将我的所有输出捕获到一个用逗号分隔的巨大字符串中：

```
output: PID 3856 5339 6483 10448 15313 15314 15315 15316 22348 29589 29593 32657 1 
```

我还尝试了以下方法：

```
IFS=","
myarr=$(ps -u kdride | awk '{ print $1"," }')

But the output is: PID, 3856, 5339, 6483, 10448, 15293, 15294, 15295, 15296, 22348, 29589, 29593, 32657,
1 
```

我希望能够将每个单独的 pid 捕获到它自己的数组元素中。设置`IFS = '\n'`不做任何事情并保留我的原始输出。我需要做哪些改变才能完成这项工作？

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2013-02-27T06:00:39.190

添加额外的括号，如下所示：

```
myarr=($(ps -u kdride | awk '{ print $1 }'))

# Now access elements of an array (change "1" to whatever you want)
echo ${myarr[1]}

# Or loop through every element in the array
for i in "${myarr[@]}"
do
   :
  echo $i
done 
```

另请参阅[`bash`— 数组](http://www.gnu.org/software/bash/manual/bash.html#Arrays)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-08-14T17:55:12.750

使用 Bash 的内置[映射](https://www.gnu.org/software/bash/manual/html_node/Bash-Builtins.html#index-mapfile)文件（或其同义词`readarray`）

```
mapfile -t -s 1 myarr < <(ps -u myusername | awk '{print $1}') 
```

至少在 GNU/Linux 中你可以格式化输出`ps`，所以不需要`awk`and`-s 1`

```
mapfile -t myarr < <(ps -u myusername -o pid=) 
```

# ruby - 如何在 osx 上安装 gemfile？

> ID：15105138
> 
> 赞同：0
> 
> 时间：2013-02-27T05:53:13.863
> 
> 标签：ruby

我正在尝试按照说明从命令行安装以下 gem： [https ://github.com/maxdemarzi/neography](https://github.com/maxdemarzi/neography)

执行：gem 'neography'

结果为“未知命令neography”。

我通过执行“gem install bundle”安装了“bundle”gem。

我错过了什么步骤？是否必须为每个单独的项目执行此操作？或者这应该安装到环境中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T05:56:44.913

您要查找的命令是`gem install neography`.

要为您的应用程序创建 Gemfile，您需要查看[bundler](http://gembundler.com/) gem 的 Gemfile。基本上，只需创建一个`Gemfile`在项目根目录中命名的文件，其中包含源代码和 gem 列表，然后运行命令`bundle install`。

在这种情况下适合您的 Gemfile 是：

```
# Gemfile
source 'https://rubygems.org'
gem 'neography' 
```

# android - 不构建apk文件

> ID：15105141
> 
> 赞同：1
> 
> 时间：2013-02-27T05:53:22.200
> 
> 标签：android, cordova, sdk, dreamweaver

我是移动应用程序的新手。我正在使用 Dreamweaver CS5.5。现在我尝试按照 youtube 中的一些视频教程构建移动应用程序，我还安装了 android SDK。但是当我尝试构建文件时，它总是给我一条错误消息 ![在此处输入图像描述](../Images/5098b499bf312bf1c1d029fec656d022.png)

但是当我尝试构建和模拟时，只显示模拟器。buildlog.log 的内容如下

```
WARNING: no icon was specified in app settings. using default.
WARNING: no splash screen was specified in app settings. using default.
Cloning seed app for Android
<DW>
____________________
set ANT_HOME=C:\PROGRA~1\Adobe\ADOBED~2.5\CONFIG~1\NATIVE~1\APACHE~1
set ANDROID_HOME=C:\Andriod\android-sdk
set JAVA_HOME=C:\PROGRA~1\Adobe\ADOBED~2.5\JDK
set PATH=%JAVA_HOME%\bin;%PATH%
cd C:\DOCUME~1\PT\Desktop\COMTRA~1.MOB
C:\WINDOWS\system32\cmd.exe /u /c C:\PROGRA~1\Adobe\ADOBED~2.5\CONFIG~1\NATIVE~1\DWPHON~1\android\scripts\droidGap.bat "C:\Program Files\Adobe\Adobe Dreamweaver CS5.5\Configuration\NativeAppFramework\DWPhoneGap\android\PhoneGapApp" "mobileSample" com.travelco.mob3 1.0 "C:\Andriod\android-sdk" 2
____________________
</DW>

C Created project directory: C:\Documents and Settings\PT\Desktop\com.travelco.mob3_Android\com.travelco.mob3

Created directory C:\Documents and Settings\PT\Desktop\com.travelco.mob3_Android\com.travelco.mob3\src\com\travelco\mob3

Added file C:\Documents and Settings\PT\Desktop\com.travelco.mob3_Android\com.travelco.mob3\src\com\travelco\mob3\DefaultActivity.java

Created directory C:\Documents and Settings\PT\Desktop\com.travelco.mob3_Android\com.travelco.mob3\res

Created directory C:\Documents and Settings\PT\Desktop\com.travelco.mob3_Android\com.travelco.mob3\bin

Created directory C:\Documents and Settings\PT\Desktop\com.travelco.mob3_Android\com.travelco.mob3\libs

Created directory C:\Documents and Settings\PT\Desktop\com.travelco.mob3_Android\com.travelco.mob3\res\values

Added file C:\Documents and Settings\PT\Desktop\com.travelco.mob3_Android\com.travelco.mob3\res\values\strings.xml

Created directory C:\Documents and Settings\PT\Desktop\com.travelco.mob3_Android\com.travelco.mob3\res\layout

Added file C:\Documents and Settings\PT\Desktop\com.travelco.mob3_Android\com.travelco.mob3\res\layout\main.xml

Added file C:\Documents and Settings\PT\Desktop\com.travelco.mob3_Android\com.travelco.mob3\AndroidManifest.xml

Added file C:\Documents and Settings\PT\Desktop\com.travelco.mob3_Android\com.travelco.mob3\build.xml

Added file C:\Documents and Settings\PT\Desktop\com.travelco.mob3_Android\com.travelco.mob3\proguard-project.txt

CLONE SUCCESSFUL

<DW>
____________________
set ANT_HOME=C:\PROGRA~1\Adobe\ADOBED~2.5\CONFIG~1\NATIVE~1\APACHE~1
set ANDROID_HOME=C:\Andriod\android-sdk
set JAVA_HOME=C:\PROGRA~1\Adobe\ADOBED~2.5\JDK
set PATH=%JAVA_HOME%\bin;%PATH%
cd C:\DOCUME~1\PT\Desktop\COMTRA~1.MOB
C:\WINDOWS\system32\cmd.exe /u /c C:\PROGRA~1\Adobe\ADOBED~2.5\CONFIG~1\NATIVE~1\APACHE~1\bin\ant.bat debug
____________________
</DW>
Buildfile: C:\DOCUME~1\PT\Desktop\COMTRA~1.MOB\build.xml

-set-mode-check:

-set-debug-files:

-check-env:

 [checkenv] Android SDK Tools Revision 21.1.0

 [checkenv] Installed at C:\Andriod\android-sdk

-setup:

     [echo] Project Name: mob3

  [gettype] Project Type: Application

-set-debug-mode:

-debug-obfuscation-check:

-pre-build:

-build-setup:

     [echo] Resolving Build Target for mob3...

[gettarget] Project Target:   Google APIs

[gettarget] Vendor:           Google Inc.

[gettarget] Platform Version: 2.2

[gettarget] API level:        8

     [echo] ----------

     [echo] Creating output directories if needed...

    [mkdir] Created dir: C:\DOCUME~1\PT\Desktop\COMTRA~1.MOB\bin\res

    [mkdir] Created dir: C:\DOCUME~1\PT\Desktop\COMTRA~1.MOB\gen

    [mkdir] Created dir: C:\DOCUME~1\PT\Desktop\COMTRA~1.MOB\bin\classes

    [mkdir] Created dir: C:\DOCUME~1\PT\Desktop\COMTRA~1.MOB\bin\dexedLibs

     [echo] ----------

     [echo] Resolving Dependencies for mob3...

[dependency] Library dependencies:

[dependency] No Libraries

[dependency] 

[dependency] ------------------

[dependency] API<=15: Adding annotations.jar to the classpath.

     [echo] ----------

     [echo] Building Libraries with 'debug'...

   [subant] No sub-builds to iterate on

-code-gen:

[mergemanifest] Merging AndroidManifest files into one.

[mergemanifest] Manifest merger disabled. Using project manifest only.

     [echo] Handling aidl files...

     [aidl] No AIDL files to compile.

     [echo] ----------

     [echo] Handling RenderScript files...

[renderscript] No RenderScript files to compile.

     [echo] ----------

     [echo] Handling Resources...

     [aapt] Generating resource IDs...

     [aapt] C:\DOCUME~1\PT\Desktop\COMTRA~1.MOB\bin\AndroidManifest.xml:4: error: No resource identifier found for attribute 'xlargeScreens' in package 'android'

BUILD FAILED

C:\Andriod\android-sdk\tools\ant\build.xml:647: The following error occurred while executing this line:

C:\Andriod\android-sdk\tools\ant\build.xml:688: null returned: 1

Total time: 1 second

<DW>
____________________
set ANT_HOME=C:\PROGRA~1\Adobe\ADOBED~2.5\CONFIG~1\NATIVE~1\APACHE~1
set ANDROID_HOME=C:\Andriod\android-sdk
set JAVA_HOME=C:\PROGRA~1\Adobe\ADOBED~2.5\JDK
set PATH=%JAVA_HOME%\bin;%PATH%
cd C:\Andriod\ANDROI~1\PLATFO~2
C:\Andriod\android-sdk\platform-tools\adb.exe devices
____________________
</DW>
* daemon not running. starting it now on port 5037 *

* daemon started successfully *

List of devices attached 

Launching the Android emulator
<DW>
____________________
set ANT_HOME=C:\PROGRA~1\Adobe\ADOBED~2.5\CONFIG~1\NATIVE~1\APACHE~1
set ANDROID_HOME=C:\Andriod\android-sdk
set JAVA_HOME=C:\PROGRA~1\Adobe\ADOBED~2.5\JDK
set PATH=%JAVA_HOME%\bin;%PATH%
cd C:\Andriod\ANDROI~1\tools
C:\WINDOWS\system32\cmd.exe /u /c "C:\Andriod\android-sdk\tools\emulator.exe -partition-size 1024 -cpu-delay 0 -no-boot-anim -avd DW_AVD"
____________________
</DW>
WARNING: no icon was specified in app settings. using default.
WARNING: no splash screen was specified in app settings. using default.

<DW>
____________________
set ANT_HOME=C:\PROGRA~1\Adobe\ADOBED~2.5\CONFIG~1\NATIVE~1\APACHE~1
set ANDROID_HOME=C:\Andriod\android-sdk
set JAVA_HOME=C:\PROGRA~1\Adobe\ADOBED~2.5\JDK
set PATH=%JAVA_HOME%\bin;%PATH%
cd C:\DOCUME~1\PT\Desktop\COMTRA~1.MOB
C:\WINDOWS\system32\cmd.exe /u /c C:\PROGRA~1\Adobe\ADOBED~2.5\CONFIG~1\NATIVE~1\APACHE~1\bin\ant.bat debug
____________________
</DW>
Buildfile: C:\DOCUME~1\PT\Desktop\COMTRA~1.MOB\build.xml

-set-mode-check:

-set-debug-files:

-check-env:

 [checkenv] Android SDK Tools Revision 21.1.0

 [checkenv] Installed at C:\Andriod\android-sdk

-setup:

     [echo] Project Name: mob3

  [gettype] Project Type: Application

-set-debug-mode:

-debug-obfuscation-check:

-pre-build:

-build-setup:

     [echo] Resolving Build Target for mob3...

[gettarget] Project Target:   Google APIs

[gettarget] Vendor:           Google Inc.

[gettarget] Platform Version: 2.2

[gettarget] API level:        8

     [echo] ----------

     [echo] Creating output directories if needed...

     [echo] ----------

     [echo] Resolving Dependencies for mob3...

[dependency] Library dependencies:

[dependency] No Libraries

[dependency] 

[dependency] ------------------

[dependency] API<=15: Adding annotations.jar to the classpath.

     [echo] ----------

     [echo] Building Libraries with 'debug'...

   [subant] No sub-builds to iterate on

-code-gen:

[mergemanifest] Found Deleted Target File

[mergemanifest] Merging AndroidManifest files into one.

[mergemanifest] Manifest merger disabled. Using project manifest only.

     [echo] Handling aidl files...

     [aidl] No AIDL files to compile.

     [echo] ----------

     [echo] Handling RenderScript files...

[renderscript] No RenderScript files to compile.

     [echo] ----------

     [echo] Handling Resources...

     [aapt] Generating resource IDs...

     [aapt] C:\DOCUME~1\PT\Desktop\COMTRA~1.MOB\bin\AndroidManifest.xml:4: error: No resource identifier found for attribute 'xlargeScreens' in package 'android'

BUILD FAILED

C:\Andriod\android-sdk\tools\ant\build.xml:647: The following error occurred while executing this line:

C:\Andriod\android-sdk\tools\ant\build.xml:688: null returned: 1

Total time: 1 second

OPERATION CANCELED
<DW>
____________________
set ANT_HOME=C:\PROGRA~1\Adobe\ADOBED~2.5\CONFIG~1\NATIVE~1\APACHE~1
set ANDROID_HOME=C:\Andriod\android-sdk
set JAVA_HOME=C:\PROGRA~1\Adobe\ADOBED~2.5\JDK
set PATH=%JAVA_HOME%\bin;%PATH%
cd C:\Andriod\ANDROI~1\PLATFO~2
C:\Andriod\android-sdk\platform-tools\adb.exe kill-server
____________________
</DW>
* server not running *

<DW>
____________________
ERROR: console error
    context: Dreamweaver.exe::GetExitCodeProcess
    code: 1
    message: Incorrect function.

____________________
</DW>

<DW>
____________________
set ANT_HOME=C:\PROGRA~1\Adobe\ADOBED~2.5\CONFIG~1\NATIVE~1\APACHE~1
set ANDROID_HOME=C:\Andriod\android-sdk
set JAVA_HOME=C:\PROGRA~1\Adobe\ADOBED~2.5\JDK
set PATH=%JAVA_HOME%\bin;%PATH%
cd C:\DOCUME~1\PT\Desktop\COMTRA~1.MOB
C:\WINDOWS\system32\cmd.exe /u /c C:\PROGRA~1\Adobe\ADOBED~2.5\CONFIG~1\NATIVE~1\APACHE~1\bin\ant.bat debug
____________________
</DW>
Buildfile: C:\DOCUME~1\PT\Desktop\COMTRA~1.MOB\build.xml

-set-mode-check:

-set-debug-files:

-check-env:

 [checkenv] Android SDK Tools Revision 21.1.0

 [checkenv] Installed at C:\Andriod\android-sdk

-setup:

     [echo] Project Name: mob3

  [gettype] Project Type: Application

-set-debug-mode:

-debug-obfuscation-check:

-pre-build:

-build-setup:

     [echo] Resolving Build Target for mob3...

[gettarget] Project Target:   Google APIs

[gettarget] Vendor:           Google Inc.

[gettarget] Platform Version: 2.2

[gettarget] API level:        8

     [echo] ----------

     [echo] Creating output directories if needed...

     [echo] ----------

     [echo] Resolving Dependencies for mob3...

[dependency] Library dependencies:

[dependency] No Libraries

[dependency] 

[dependency] ------------------

[dependency] API<=15: Adding annotations.jar to the classpath.

     [echo] ----------

     [echo] Building Libraries with 'debug'...

   [subant] No sub-builds to iterate on

-code-gen:

[mergemanifest] Found Deleted Target File

[mergemanifest] Merging AndroidManifest files into one.

[mergemanifest] Manifest merger disabled. Using project manifest only.

     [echo] Handling aidl files...

     [aidl] No AIDL files to compile.

     [echo] ----------

     [echo] Handling RenderScript files...

[renderscript] No RenderScript files to compile.

     [echo] ----------

     [echo] Handling Resources...

     [aapt] Generating resource IDs...

     [aapt] C:\DOCUME~1\PT\Desktop\COMTRA~1.MOB\bin\AndroidManifest.xml:4: error: No resource identifier found for attribute 'xlargeScreens' in package 'android'

BUILD FAILED

C:\Andriod\android-sdk\tools\ant\build.xml:647: The following error occurred while executing this line:

C:\Andriod\android-sdk\tools\ant\build.xml:688: null returned: 1

Total time: 1 second

<DW>
____________________
set ANT_HOME=C:\PROGRA~1\Adobe\ADOBED~2.5\CONFIG~1\NATIVE~1\APACHE~1
set ANDROID_HOME=C:\Andriod\android-sdk
set JAVA_HOME=C:\PROGRA~1\Adobe\ADOBED~2.5\JDK
set PATH=%JAVA_HOME%\bin;%PATH%
cd C:\Andriod\ANDROI~1\PLATFO~2
C:\Andriod\android-sdk\platform-tools\adb.exe devices
____________________
</DW>
* daemon not running. starting it now on port 5037 *

* daemon started successfully *

List of devices attached 

Launching the Android emulator
<DW>
____________________
set ANT_HOME=C:\PROGRA~1\Adobe\ADOBED~2.5\CONFIG~1\NATIVE~1\APACHE~1
set ANDROID_HOME=C:\Andriod\android-sdk
set JAVA_HOME=C:\PROGRA~1\Adobe\ADOBED~2.5\JDK
set PATH=%JAVA_HOME%\bin;%PATH%
cd C:\Andriod\ANDROI~1\tools
C:\WINDOWS\system32\cmd.exe /u /c "C:\Andriod\android-sdk\tools\emulator.exe -partition-size 1024 -cpu-delay 0 -no-boot-anim -avd DW_AVD"
____________________
</DW>

<DW>
____________________
set ANT_HOME=C:\PROGRA~1\Adobe\ADOBED~2.5\CONFIG~1\NATIVE~1\APACHE~1
set ANDROID_HOME=C:\Andriod\android-sdk
set JAVA_HOME=C:\PROGRA~1\Adobe\ADOBED~2.5\JDK
set PATH=%JAVA_HOME%\bin;%PATH%
cd C:\DOCUME~1\PT\Desktop\COMTRA~1.MOB
C:\WINDOWS\system32\cmd.exe /u /c C:\PROGRA~1\Adobe\ADOBED~2.5\CONFIG~1\NATIVE~1\APACHE~1\bin\ant.bat debug
____________________
</DW>
Buildfile: C:\DOCUME~1\PT\Desktop\COMTRA~1.MOB\build.xml

-set-mode-check:

-set-debug-files:

-check-env:

 [checkenv] Android SDK Tools Revision 21.1.0

 [checkenv] Installed at C:\Andriod\android-sdk

-setup:

     [echo] Project Name: mob3

  [gettype] Project Type: Application

-set-debug-mode:

-debug-obfuscation-check:

-pre-build:

-build-setup:

     [echo] Resolving Build Target for mob3...

[gettarget] Project Target:   Google APIs

[gettarget] Vendor:           Google Inc.

[gettarget] Platform Version: 2.2

[gettarget] API level:        8

     [echo] ----------

     [echo] Creating output directories if needed...

     [echo] ----------

     [echo] Resolving Dependencies for mob3...

[dependency] Library dependencies:

[dependency] No Libraries

[dependency] 

[dependency] ------------------

[dependency] API<=15: Adding annotations.jar to the classpath.

     [echo] ----------

     [echo] Building Libraries with 'debug'...

   [subant] No sub-builds to iterate on

-code-gen:

[mergemanifest] Found Deleted Target File

[mergemanifest] Merging AndroidManifest files into one.

[mergemanifest] Manifest merger disabled. Using project manifest only.

     [echo] Handling aidl files...

     [aidl] No AIDL files to compile.

     [echo] ----------

     [echo] Handling RenderScript files...

[renderscript] No RenderScript files to compile.

     [echo] ----------

     [echo] Handling Resources...

     [aapt] Generating resource IDs...

     [aapt] C:\DOCUME~1\PT\Desktop\COMTRA~1.MOB\bin\AndroidManifest.xml:4: error: No resource identifier found for attribute 'xlargeScreens' in package 'android'

BUILD FAILED

C:\Andriod\android-sdk\tools\ant\build.xml:647: The following error occurred while executing this line:

C:\Andriod\android-sdk\tools\ant\build.xml:688: null returned: 1

Total time: 1 second

OPERATION CANCELED
<DW>
____________________
set ANT_HOME=C:\PROGRA~1\Adobe\ADOBED~2.5\CONFIG~1\NATIVE~1\APACHE~1
set ANDROID_HOME=C:\Andriod\android-sdk
set JAVA_HOME=C:\PROGRA~1\Adobe\ADOBED~2.5\JDK
set PATH=%JAVA_HOME%\bin;%PATH%
cd C:\Andriod\ANDROI~1\PLATFO~2
C:\Andriod\android-sdk\platform-tools\adb.exe kill-server
____________________
</DW>

<DW>
____________________
set ANT_HOME=C:\PROGRA~1\Adobe\ADOBED~2.5\CONFIG~1\NATIVE~1\APACHE~1
set ANDROID_HOME=C:\Andriod\android-sdk
set JAVA_HOME=C:\PROGRA~1\Adobe\ADOBED~2.5\JDK
set PATH=%JAVA_HOME%\bin;%PATH%
cd C:\DOCUME~1\PT\Desktop\COMTRA~1.MOB
C:\WINDOWS\system32\cmd.exe /u /c C:\PROGRA~1\Adobe\ADOBED~2.5\CONFIG~1\NATIVE~1\APACHE~1\bin\ant.bat debug
____________________
</DW>
Buildfile: C:\DOCUME~1\PT\Desktop\COMTRA~1.MOB\build.xml

-set-mode-check:

-set-debug-files:

-check-env:

 [checkenv] Android SDK Tools Revision 21.1.0

 [checkenv] Installed at C:\Andriod\android-sdk

-setup:

     [echo] Project Name: mob3

  [gettype] Project Type: Application

-set-debug-mode:

-debug-obfuscation-check:

-pre-build:

-build-setup:

     [echo] Resolving Build Target for mob3...

[gettarget] Project Target:   Google APIs

[gettarget] Vendor:           Google Inc.

[gettarget] Platform Version: 2.2

[gettarget] API level:        8

     [echo] ----------

     [echo] Creating output directories if needed...

     [echo] ----------

     [echo] Resolving Dependencies for mob3...

[dependency] Library dependencies:

[dependency] No Libraries

[dependency] 

[dependency] ------------------

[dependency] API<=15: Adding annotations.jar to the classpath.

     [echo] ----------

     [echo] Building Libraries with 'debug'...

   [subant] No sub-builds to iterate on

-code-gen:

[mergemanifest] Found Deleted Target File

[mergemanifest] Merging AndroidManifest files into one.

[mergemanifest] Manifest merger disabled. Using project manifest only.

     [echo] Handling aidl files...

     [aidl] No AIDL files to compile.

     [echo] ----------

     [echo] Handling RenderScript files...

[renderscript] No RenderScript files to compile.

     [echo] ----------

     [echo] Handling Resources...

     [aapt] Generating resource IDs...

     [aapt] C:\DOCUME~1\PT\Desktop\COMTRA~1.MOB\bin\AndroidManifest.xml:4: error: No resource identifier found for attribute 'xlargeScreens' in package 'android'

BUILD FAILED

C:\Andriod\android-sdk\tools\ant\build.xml:647: The following error occurred while executing this line:

C:\Andriod\android-sdk\tools\ant\build.xml:688: null returned: 1

Total time: 1 second 
```

你能帮我解决这个问题吗？我找不到关于这个问题的任何解决方案我需要设置什么才能创建移动应用程序吗？

提前致谢。

**编辑：**

AndroidManifest.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android" android:windowSoftInputMode="adjustPan"
 package="com.travelco.mob3" android:versionName="1.0" android:versionCode="1">   
  <supports-screens
        android:largeScreens="true"
        android:normalScreens="true"
        android:smallScreens="true"
        android:xlargeScreens="true"
        android:resizeable="true"
        android:anyDensity="true"
        />

    <uses-permission android:name="android.permission.CAMERA" />
    <uses-permission android:name="android.permission.VIBRATE" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_LOCATION_EXTRA_COMMANDS" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.RECEIVE_SMS" />
    <uses-permission android:name="android.permission.RECORD_AUDIO" />
    <uses-permission android:name="android.permission.RECORD_VIDEO"/>
    <uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS" />
    <uses-permission android:name="android.permission.READ_CONTACTS" />
    <uses-permission android:name="android.permission.WRITE_CONTACTS" />   
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />   
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.GET_ACCOUNTS" />
    <uses-permission android:name="android.permission.BROADCAST_STICKY" />

    <application android:icon="@drawable/icon" android:label="@string/app_name"
        android:debuggable="true">
        <activity android:name=".DefaultActivity" android:label="@string/app_name" 
                  android:configChanges="orientation|keyboardHidden">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

    <uses-sdk android:minSdkVersion="5" />
</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T06:00:33.530

该错误似乎在 AndroidManifest.xml 文件的第 4 行：

```
error: No resource identifier found for attribute 'xlargeScreens' in package 'android'` 
```

此属性是在 API 级别 9 中引入的。检查此链接[http://developer.android.com/guide/topics/manifest/supports-screens-element.html#xlarge](http://developer.android.com/guide/topics/manifest/supports-screens-element.html#xlarge)

所以你需要确保你的目标设置为高于 9。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T07:08:08.610

我认为问题在于您的清单文件`android:minSdkVersion="5"`没有`android:targetSdkVersion`

因此，在您的`<supports-screens/>`标签内编译时，某些属性将不支持。`SdkVersion="5"`您会发现错误

```
error: No resource identifier found for attribute 'xlargeScreens' in package 'android'` 
```

解决方案使用

`android:minSdkVersion="9"`或大于 9 或

通过设置`android:targetSdkVersion="9"` 或更高

所以将您的清单修改为：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android" android:windowSoftInputMode="adjustPan"
 package="com.travelco.mob3" android:versionName="1.0" android:versionCode="1">

<uses-sdk android:minSdkVersion="5" 
          android:targetSdkVersion="16"/>

<supports-screens
    android:largeScreens="true"
    android:normalScreens="true"
    android:smallScreens="true"
    android:xlargeScreens="true"
    android:resizeable="true"
    android:anyDensity="true"
    />

<uses-permission android:name="android.permission.CAMERA" />
<uses-permission android:name="android.permission.VIBRATE" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_LOCATION_EXTRA_COMMANDS" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.RECEIVE_SMS" />
<uses-permission android:name="android.permission.RECORD_AUDIO" />
<uses-permission android:name="android.permission.RECORD_VIDEO"/>
<uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS" />
<uses-permission android:name="android.permission.READ_CONTACTS" />
<uses-permission android:name="android.permission.WRITE_CONTACTS" />   
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />   
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.GET_ACCOUNTS" />
<uses-permission android:name="android.permission.BROADCAST_STICKY" />

<application android:icon="@drawable/icon" android:label="@string/app_name"
    android:debuggable="true">
    <activity android:name=".DefaultActivity" android:label="@string/app_name" 
              android:configChanges="orientation|keyboardHidden">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

或者您可以删除`<supports-screens/>`导致错误的参数（但这不是一个好方法。我不会推荐它）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-29T07:18:07.683

有趣的。我遇到了同样的问题。问题原来是我已将我的项目目录备份到 CD 上。当我这样做时，这些“TRANS.TBL”文件被添加到每个目录中。从 CD 恢复项目后，我必须删除所有`TRANS.TBL`文件。`ant`我用不是`eclipse`BTW构建的。

# android - 在播放 gif 动画时有时会出现空指针异常

> ID：15105142
> 
> 赞同：0
> 
> 时间：2013-02-27T05:53:30.743
> 
> 标签：android, nullpointerexception, android-animation, animated-gif

我正在玩`gif animation`我的应用程序。它工作得很好，但如果我玩了这么多次`animation`，它就会扔进`nullpointer exception`电影对象。

关于这个问题的任何建议。下面是我的代码

**SampleView.class：**

```
 class SampleView extends View {
           java.io.InputStream is;

            private Movie mMovie;
            private long mMovieStart;

            private  byte[] streamToBytes(InputStream is) {
                ByteArrayOutputStream os = new ByteArrayOutputStream(1024);
                byte[] buffer = new byte[1024];
                int len;
                try {
                    while ((len = is.read(buffer)) >= 0) {
                        os.write(buffer, 0, len);
                    }
                } catch (java.io.IOException e) {
                }
                return os.toByteArray();
            }

            public SampleView(Context context) {
                super(context);

                    if(is==null)
                    {

                try {
                    is =context.getAssets().open("a.gif");
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                    }

                    mMovie = Movie.decodeStream(is);

            }

            public SampleView(Context context, AttributeSet attrs){
                super(context,attrs);

                    if(is==null)
                    {

                try {
                    is =context.getAssets().open("a.gif");
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                    }

                mMovie = Movie.decodeStream(is);
            }
            public SampleView(Context context, AttributeSet attrs, int defStyle){
                super(context,attrs,defStyle);

                    if(is==null)
                    {

                try {
                    is =context.getAssets().open("a.gif");
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                    }

                    mMovie = Movie.decodeStream(is);
            }

            @Override protected void onDraw(Canvas canvas) {

                long now = android.os.SystemClock.uptimeMillis();
                if (mMovieStart == 0) {   // first time
                    mMovieStart = now;
                }
                if (mMovie != null) {
                    int dur = mMovie.duration();
                    if (dur == 0) {
                        dur = 1000;
                    }
                    int relTime = (int)((now - mMovieStart) % dur);
                    mMovie.setTime(relTime);
                    mMovie.draw(canvas, getWidth() - mMovie.width(),
                                getHeight() - mMovie.height());
                    invalidate();
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T06:06:22.560

尝试这个，

```
public class GIFDemo extends GraphicsActivity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(new GIFView(this));
}

private static class GIFView extends View {

    Movie movie;
    InputStream is = null;
    long moviestart;
    long moviestart1;

    public GIFView(Context context) {
        super(context);
        is = context.getResources()
                .openRawResource(R.drawable.animated_gif);

        movie = Movie.decodeStream(is);

    }

    @Override
    protected void onDraw(Canvas canvas) {
        canvas.drawColor(0xFFCCCCCC);
        super.onDraw(canvas);
        long now = android.os.SystemClock.uptimeMillis();
        System.out.println("now=" + now);
        if (moviestart == 0) { // first time
            moviestart = now;

        }

        System.out.println("\tmoviestart=" + moviestart);
        int relTime = (int) ((now - moviestart) % movie.duration());
        // int relTime1 = (int) ((now - moviestart1) % movie1.duration());
        System.out.println("time=" + relTime + "\treltime="
                + movie.duration());
        movie.setTime(relTime);
        // movie1.setTime(relTime1);
        movie.draw(canvas, 10, 10);
        // movie1.draw(canvas, 10, 100);
        this.invalidate();
    }
}
} 
```

添加此 GraphicsActivity 类。

```
 class GraphicsActivity extends Activity {
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
}

@Override
public void setContentView(View view) {

    super.setContentView(view);
}
} 
```

# maya - Maya中如何使用MEL查询曲线控制点的世界空间坐标

> ID：15105155
> 
> 赞同：1
> 
> 时间：2013-02-27T05:54:43.140
> 
> 标签：maya, mel

我使用 EP 曲线工具创建了一条曲线。然后我尝试使用以下 MEL 命令查询这条曲线的控制点的世界空间坐标：

```
createNode curveInfo;
connectAttr curveShape1.worldSpace curveInfo1.inputCurve;
getAttr "curveInfo1.cp[*]"; 
```

但它只是打印出对象空间中的 cv 坐标，结果如下：

```
// Result: 0 0 0 1 0 0 2 0 0 3 0 0 // 
```

根据 Maya 文档，“curve”命令可用于查询世界空间位置，以下是文档中的片段：

> 创建节点曲线信息；
> 
> connectAttr curveShape1.worldSpace curveInfo1.inputCurve;
> 
> getAttr “curveInfo1.knots[*]”;
> 
> // 这个序列创建一个曲线信息节点，将信息节点连接到曲线并使用曲线信息节点查询曲线的节点向量。您可以使用曲线信息节点查询其他属性，例如世界空间 CV 值和弧长。

如何使用“曲线”命令查询世界空间位置？

我也尝试使用“xform”命令，但它似乎不适用于我的曲线。结果是这样的：

```
xform -q -t -ws curve1;
// Result: 0 0 0 // 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T11:36:49.910

Easiest way is to use the [pointPosition](http://download.autodesk.com/us/maya/2010help/Commands/pointPosition.html) command eg.:

```
pointPosition -w object.ep[1] 
```

Point position works with any of the point attributes ep, cv, uv, pt etc. But can only query one point at a time so you need to loop.

Nodes dont have any concept of world or local space coordinates (tough you could transform the space), just raw data coordinates. Knots is not what your looking for tough knots define how the curve is parametrized. In general Maya documentation is a bit hard to read for beginning users because Maya operates on a object accessor model. So command and operations don't necessarily do what you would think they do. Rather many commands are accessors to something, and they only operate on the object they are accessors of. Curve command has no conquerable attributes so it can not be queried.

# telephony - How to use Third Party tsp (Panasonic) with Tapi in Windows 7

> ID：15105162
> 
> 赞同：3
> 
> 时间：2013-02-27T05:54:55.617
> 
> 标签：telephony, tapi, pbx

I have installed a third party TSP, specifically Panasonic TSP version 4.0, and it's connected to the Panasonic PBX KX-TDE200.

I'm trying to connect my PBX with a TAPI application which will control the PBX's functionality, like call control and mainly class of service modification from the TAPI application itself.

This is where I got stuck. As I am a newbie, I don't have much idea about telephony applications, so any help will be appreciated.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-18T04:22:38.853

For simplicity, you can use third party TAPI library such as

*   [Teletools](http://www.exceletel.com/products/teletools.htm)
*   [ATAPI](https://atapi.codeplex.com/)

# c# - 拆分字符串时索引超出范围异常

> ID：15105163
> 
> 赞同：2
> 
> 时间：2013-02-27T05:54:55.743
> 
> 标签：c#, asp.net, string

我写了这段代码来分割字符串

```
 protected void DropDownList2_SelectedIndexChanged(object sender, EventArgs e)
{
    string oldstr = DropDownList2.SelectedItem.Value;

    string[] exp = System.Text.RegularExpressions.Regex.Split(oldstr, "-");
    int int1 = Convert.ToInt32(exp[0]);
    int int2 = Convert.ToInt32(exp[1]);
} 
```

它给了我例外

> “指数数组的边界之外。”

在线`int int2 = Convert.ToInt32(exp[1]);`

```
 <asp:DropDownList ID="DropDownList2" runat="server" AutoPostBack="True" 
                onselectedindexchanged="DropDownList2_SelectedIndexChanged">
                <asp:ListItem></asp:ListItem>
                <asp:ListItem Value="1-2">1-2 years</asp:ListItem>
                <asp:ListItem Value="3-4 ">3-4 years</asp:ListItem>
                <asp:ListItem Value="5-7">5-7 years</asp:ListItem>
            </asp:DropDownList> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T05:58:32.513

更新你这样标记

```
<asp:DropDownList ID="DropDownList2" runat="server" AutoPostBack="True" 
                onselectedindexchanged="DropDownList2_SelectedIndexChanged">
         <asp:ListItem Value="0-0"></asp:ListItem> // add 0 and 0
        <asp:ListItem Value="1-2">1-2 years</asp:ListItem>
        <asp:ListItem Value="3-4">3-4 years</asp:ListItem>//remove space after 4 
        <asp:ListItem Value="5-7">5-7 years</asp:ListItem>
</asp:DropDownList> 
```

而不是像下面那样转换使用 TryParse 并检查拆分数组的长度

```
//string[] exp = System.Text.RegularExpressions.Regex.Split(oldstr, "-");
//use string split rathre than using regular expression because character split is 
// faster than regular expression split
string[] exp = oldstr.Split('-');
if(exp.Length>0)
{
  int int1;
  if(int.TryParse(exp[0], out num1))
 { // further code }
  int int2;
 if(int.TryParse(exp[1], out num1))
 { // further code }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T05:58:46.847

的`Value`第一个元素`DropDownList`是空字符串，当您绑定时，`SelectedIndexChanged`会为第一个元素触发事件，拆分它将为您提供零元素数组。在按索引访问数组之前对索引应用条件。

```
int int1 = 0;
if(exp.Length > 0)
     int1 = Convert.ToInt32(exp[0]);

int int2 = 0;
if(exp.Length > 1)
     int2 = Convert.ToInt32(exp[1]); 
```

或者为第一个元素添加值，例如 0-1 年

```
<asp:ListItem Value="0-1">Upto one one year</asp:ListItem> 
```

# .htaccess - 我在一个目录中有一个 index.php 文件，我希望它成为默认目录

> ID：15105174
> 
> 赞同：1
> 
> 时间：2013-02-27T05:55:48.173
> 
> 标签：.htaccess

*   包括 // 包含所有连接文件等

*   public // 包含 index.php 文件和 css、js n 的东西

通常当有人键入我的域名时，例如：www.abc.com 它会显示目录列表。我不希望这种情况发生，我希望 htaccess 在公共文件夹中查找 index.php，例如 www.abc.com/public/index.php，或者可能隐藏公共目录，它应该像这样 www.abc 显示。 com/index.php

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T15:10:47.130

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s/+public/index\.php [NC]
RewriteRule ^ / [R=302,L]

RewriteRule ^$ /public/index.php [L] 
```

# java - MotionEvents 未触发

> ID：15105175
> 
> 赞同：0
> 
> 时间：2013-02-27T05:55:51.350
> 
> 标签：java, android, motionevent

我试图在 a 上画一个正方形，`canvas`但只`MotionEvent.ACTION_DOWN`运行，然后`listener`停止。

这个想法是当用户触摸屏幕时，它会获得 x1 和 y1 位置，并且每次`onTouch`触发时，它必须将 rect frim x1 y1 绘制到当前位置，最后在用户放开时将最后一个位置保存在 x2 y2 中屏幕。

我的代码如下所示：

```
surfaceView.setOnTouchListener(new View.OnTouchListener()
{
    @Override
    public boolean onTouch(View v, MotionEvent event)
    {
        holder = surfaceView.getHolder();
        canvas = holder.lockCanvas();
        if(event.getAction() == MotionEvent.ACTION_DOWN)
        {
            x1=event.getX();
            y1=event.getY();
        }
        else if(event.getAction() == MotionEvent.ACTION_UP)
        {
            x2=event.getX();
            y2=event.getY();
        }
        canvas.drawRect(x1, y1, event.getX(), event.getY(), paint);
        holder.unlockCanvasAndPost(canvas);
        return true;
    }
}); 
```

谁能给我一个例子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T08:26:50.363

ACTION_UP 从上面的代码触发。试试下面的代码，你会看到日志。

我认为您的问题可能与您获得的积分有关。我不知道您如何定义 x1, y1, x2, y2 但是当声明超出范围时，它们必须是最终的。试试这个。

```
final SurfaceView s = (SurfaceView) findViewById(R.id.surface);

final RectF rect = new RectF();

s.setOnTouchListener(new OnTouchListener() {

    @Override
    public boolean onTouch(View v, MotionEvent event) {
        SurfaceHolder holder = s.getHolder();
        Canvas canvas = holder.lockCanvas();

        if(event.getAction() == MotionEvent.ACTION_DOWN) {
            Log.d("action", "down");
            rect.left = event.getX();
            rect.top = event.getY();
        }
        if(event.getAction() == MotionEvent.ACTION_UP){
            Log.d("action", "up");
            rect.right = event.getX();
            rect.bottom = event.getY();

            Paint paint = new Paint();
            paint.setColor(Color.RED);
            canvas.drawRect(rect, paint);
        }

        holder.unlockCanvasAndPost(canvas);
        return true;
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T06:18:52.973

尝试使用这个。

```
surfaceView.setOnTouchListener(new View.OnTouchListener()
{
    @Override
    public boolean onTouch(View v, MotionEvent event)
    {

        if(event.getAction() == MotionEvent.ACTION_DOWN)
        {
            x1=event.getX();
            y1=event.getY();
        }
        else if(event.getAction() == MotionEvent.ACTION_UP)
        {
            x2=event.getX();
            y2=event.getY();

            holder = surfaceView.getHolder();
            canvas = holder.lockCanvas();
            canvas.drawRect(x1, y1, x2, y2, paint);
            holder.unlockCanvasAndPost(canvas);
        }

        return true;
    }
}); 
```

如果你移动你的手指，它会在你做的每一个动作中调用监听器。所以这段代码

```
holder = surfaceView.getHolder();
canvas = holder.lockCanvas(); 
```

和这段代码

```
canvas.drawRect(x1, y1, event.getX(), event.getY(), paint);
holder.unlockCanvasAndPost(canvas); 
```

将被执行，也许这就是它停止的原因。

所以我把条件放在`drawRect`里面`MotionEvent.ACTION_UP`，所以`drawRect`会执行一次。

# rspec - 如何使用 rspec 和 capybara 测试 best_in_place

> ID：15105179
> 
> 赞同：2
> 
> 时间：2013-02-27T05:56:09.627
> 
> 标签：rspec, best-in-place

best_in_place gem 用于就地编辑。它适用于开发应用程序，但是当使用 rspec 和 capybara 进行测试时，测试有时会通过，有时会失败。我正在使用带有“保存”和“取消”按钮的 best_in_place text_area。编写的规范如下。

```
 bip_area product, :description, "A new description" 
    click_button "Save"
    page.should have_content "A new description" 
```

有时，rspec 中也无法识别“保存”按钮。请帮忙。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-24T04:52:01.560

`click_button "Save"`即使您的字段有保存和取消按钮，我认为也没有必要。所以发生的事情是`bip_area`改变输入字段并在你说之前*告诉服务器*`click_button "Save"`。因此，您有一个竞争条件，有时 Javascript 运行`bip_area`首先完成，删除保存按钮，有时`click_button`首先完成，执行（noop）单击。

# android - Android桌面图片逐渐变得模糊

> ID：15105181
> 
> 赞同：1
> 
> 时间：2013-02-27T05:56:20.873
> 
> 标签：android, desktop

我制作了一个桌面并获取了应用程序图标。但它比原来的桌面变得模糊。我不知道为什么。图标的大小是相同的。布局：

```
<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:orientation="vertical"
  android:gravity="center"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:paddingTop="15dip">

  <ImageView
    android:id="@+id/appIcon"
    android:layout_gravity="center"
    android:layout_width="40dip"
    android:layout_height="40dip"/>

  <TextView
    android:id="@+id/appName"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:ellipsize="marquee"
    android:textColor="#FFFF"
    android:maxLines="1"
    android:fadingEdge="horizontal"
    android:gravity="center"
    android:paddingTop="10dip"
    android:paddingBottom="10dip"/>

</LinearLayout> 
```

获取应用代码：

```
final PackageManager packageManager = getPackageManager();
        final Intent mainIntent = new Intent(Intent.ACTION_MAIN, null);
        mainIntent.addCategory(Intent.CATEGORY_LAUNCHER);

        //get all apps
        final List<ResolveInfo> apps = packageManager.queryIntentActivities(mainIntent, 0);

        GridView appPage = (GridView) findViewById(R.id.all_app_grid);
        appPage.setAdapter(new AppAdapter(this, apps)); 
```

我从监视器获取应用程序图标代码：

```
Bitmap bmp = Utilities.createIconBitmap(appInfo.loadIcon(pm), mContext);        
appItem.mAppIcon.setImageDrawable(appInfo.loadIcon(pm));
static Bitmap createIconBitmap(Drawable icon, Context context) {
synchronized (sCanvas) { // we share the statics :-(
if (sIconWidth == -1) {
initStatics(context);
}

        int width = sIconWidth;
        int height = sIconHeight;

        if (icon instanceof PaintDrawable) {
            PaintDrawable painter = (PaintDrawable) icon;
            painter.setIntrinsicWidth(width);
            painter.setIntrinsicHeight(height);
        } else if (icon instanceof BitmapDrawable) {
            // Ensure the bitmap has a density.
            BitmapDrawable bitmapDrawable = (BitmapDrawable) icon;
            Bitmap bitmap = bitmapDrawable.getBitmap();
            if (bitmap.getDensity() == Bitmap.DENSITY_NONE) {
                bitmapDrawable.setTargetDensity(context.getResources().getDisplayMetrics());
            }
        }
        int sourceWidth = icon.getIntrinsicWidth();
        int sourceHeight = icon.getIntrinsicHeight();

        if (sourceWidth > 0 && sourceHeight > 0) {
            // There are intrinsic sizes.
            if (width < sourceWidth || height < sourceHeight) {
                // It's too big, scale it down.
                final float ratio = (float) sourceWidth / sourceHeight;
                if (sourceWidth > sourceHeight) {
                    height = (int) (width / ratio);
                } else if (sourceHeight > sourceWidth) {
                    width = (int) (height * ratio);
                }
            } else if (sourceWidth < width && sourceHeight < height) {
                // Don't scale up the icon
                width = sourceWidth;
                height = sourceHeight;
            }
        }

        // no intrinsic size --> use default size
        int textureWidth = sIconTextureWidth;
        int textureHeight = sIconTextureHeight;

        final Bitmap bitmap = Bitmap.createBitmap(textureWidth, textureHeight,
                Bitmap.Config.ARGB_8888);
        final Canvas canvas = sCanvas;
        canvas.setBitmap(bitmap);

        final int left = (textureWidth-width) / 2;
        final int top = (textureHeight-height) / 2;

        if (false) {
            // draw a big box for the icon for debugging
            canvas.drawColor(sColors[sColorIndex]);
            if (++sColorIndex >= sColors.length) sColorIndex = 0;
            Paint debugPaint = new Paint();
            debugPaint.setColor(0xffcccc00);
            canvas.drawRect(left, top, left+width, top+height, debugPaint);
        }

        sOldBounds.set(icon.getBounds());
        icon.setBounds(left, top, left+width, top+height);
        icon.draw(canvas);
        icon.setBounds(sOldBounds);
        canvas.setBitmap(null);

        return bitmap;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-25T03:05:44.290

使用它来检查屏幕密度是否正确： context.getResources().getDisplayMetrics().density;

如果没有，请设置您的桌面应用程序清单，使您的 android:targetSdkVersion 大于 4。然后屏幕密度将是正确的。

# qt - QDockWidget 关闭按钮和浮动按钮的工具提示？

> ID：15105182
> 
> 赞同：4
> 
> 时间：2013-02-27T05:56:27.387
> 
> 标签：qt, qt4, qdockwidget

有没有办法为 QDockWidget 中的关闭按钮和浮动按钮设置工具提示文本？

![在此处输入图像描述](../Images/4451d040cdd22aac5a6e07267625d5f7.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T08:17:31.960

正如 ixSci 提到的，使用`setTitleBarWidget()`是解决这个问题的一种潜在方法。话虽如此，我正在寻找一个更简单的解决方案，最好使用`QSS`（Qt Style Sheets）。因此，在深入研究了源代码后，`QDockWidget`我找到了一种更适合我要求的替代方法。

我想找到这些`float`和`close`按钮的创建位置。那是里面`QDockWidgetPrivate::init()`的方法`QDockWidget.cpp`。

例如，`float`按钮是这样创建的：

```
QAbstractButton *button = new QDockWidgetTitleButton(q);
button->setObjectName(QLatin1String("qt_dockwidget_floatbutton"));
QObject::connect(button, SIGNAL(clicked()), q, SLOT(_q_toggleTopLevel()));
layout->setWidgetForRole(QDockWidgetLayout::FloatButton, button); 
```

现在我只需要使用 Qt 样式表的灵活性，因为我只需要对象名称，在这种情况下它是“ `qt_dockwidget_floatbutton`”

`Close`因此，为 a 设置工具提示和`Float`按钮所需要做的`QDockWidget`就是在应用程序样式表中添加以下两行样式

```
QAbstractButton#qt_dockwidget_closebutton{qproperty-toolTip: "Close";}
QAbstractButton#qt_dockwidget_floatbutton{qproperty-toolTip: "Restore";} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T06:28:49.207

您可以实现任何您想要的标题小部件并将其设置为`setTitleBarWidget()`. 在该小部件中，您可以添加任何带有您需要的工具提示的按钮。

# python - python paramiko模块socket.error，errno 10060

> ID：15105183
> 
> 赞同：0
> 
> 时间：2013-02-27T05:56:30.407
> 
> 标签：python, sockets, ssh, paramiko

通过 paramiko (v1.10.0) 的套接字连接似乎不稳定。

我有两台电脑。python代码在PC上。连接有时成功，有时不成功（相同的代码）。当 PC paramiko 代码失败（socket.error，10060）时，我使用我的 Mac 通过终端 ssh 登录服务器，一切都很好。

我在代码中使用 set_missing_host_key_policy。但我猜Mac有钥匙。我第一次登录时输入了yes。

如果是热键导致连接不稳定，如何获取主机密钥？从服务器或我的本地文件夹中的某个地方（win7）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T06:29:59.210

尝试关闭 Windows 防火墙。这是网络错误，不应该是因为 SSH 密钥问题。

*错误代码10060：连接超时背景：网关无法从您尝试访问的网站收到及时响应。这可能表明网络拥塞，或者网站遇到技术问题。*

# php - 从一个表中获取两个查询的重叠

> ID：15105192
> 
> 赞同：0
> 
> 时间：2013-02-27T05:56:50.170
> 
> 标签：php, mysql

试图找出这两个查询是否有重叠

下面的 PHP/MYSQL 代码可以工作，但是它很笨重；两次查询，数据转换成数组，数组进行比较！

（注意这是一个函数，因为它返回是否有重叠）

```
$manager_sql = "SELECT league_id FROM league_members WHERE manager = 1 AND member_active = 1 AND player_id = $mi";
$player_sql = "SELECT league_id FROM league_members WHERE member_active = 1 AND player_id = $pi";

$manager_result = mysql_query($manager_sql) or die(mysql_error());
$manager_leagues = array();
while($sqlrow = mysql_fetch_array($manager_result)) {
    extract( $sqlrow );
    $manager_leagues[] = $league_id;
}

$player_result = mysql_query($player_sql) or die(mysql_error());
$player_leagues = array();
while($sqlrow = mysql_fetch_array($player_result)) {
    extract( $sqlrow );
    $player_leagues[] = $league_id;
}

$result = array_intersect($manager_leagues, $player_leagues);

return count($result) > 0; 
```

以下是一次性进行查询的一些尝试：

```
(SELECT league_id FROM league_members WHERE manager = 1 AND member_active = 2 AND player_id = '$mi')
    UNION ALL
(SELECT league_id FROM league_members WHERE member_active = 1 AND player_id = '$pi') 
```

似乎工作，但返回太多行：

```
SELECT league_id FROM league_members WHERE league_id IN (
    SELECT league_id FROM league_members WHERE manager = 1 AND member_active = 1 AND player_id = '$mi'
) AND league_id IN (
    SELECT league_id FROM league_members WHERE member_active = 1 AND player_id = '$pi'
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T06:07:36.693

试试这个查询：

```
$sql = "SELECT ls1.league_id FROM league_members AS ls1
        INNER JOIN league_members AS ls2 ON ls1.league_id = ls2.league_id
        WHERE ls1.manager = 1 AND ls1.member_active = 1 AND ls1.player_id = '".$mi."' 
        AND ls2.member_active = 1 AND ls2.player_id = '".$pi."'" 
```

笔记 ：

1.  mysql_* 函数已弃用，请使用 mysqli_* 函数或 PDO
2.  您的查询容易受到 sql 注入的影响，请确保其安全。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T06:08:16.973

您正在寻找任何既`$mi`作为经理又`$pi`作为球员之一的 League_id？

```
SELECT DISTINCT l.league_id FROM league_members l JOIN league_members l2 ON l.league_id = l2.league_id AND l.member_active = 1 AND l2.member_active = 1 AND l.manager = 1 AND l2.manager = 0 WHERE l.player_id = $mi AND l2.player_id = $pi; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T06:08:47.957

尝试

```
"SELECT league_id FROM league_members WHERE manager = 1 AND member_active = 1 AND (player_id = '".$mi."' OR player_id = '".$pi."')"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T06:09:20.250

请在下面尝试它会起作用。如果没有，请让我知道您遇到了哪种问题。

SELECT League_id FROM League_members WHERE League_id IN（从 League_members 中选择 League_id WHERE (member_active = 1 AND (player_id = '$mi' or player_id = '$pi') AND manager = 1)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-27T06:11:23.803

我显然没有尝试过，但我建议最后一个查询，`distinct`添加关键字：

```
SELECT distinct league_id FROM league_members WHERE league_id IN (
    SELECT league_id FROM league_members WHERE manager = 1 AND member_active = 1 AND player_id = '$mi'
) AND league_id IN (
    SELECT league_id FROM league_members WHERE member_active = 1 AND player_id = '$pi'
) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-27T06:18:36.440

这个怎么样？

```
SELECT league_id 
FROM   league_members 
WHERE  (manager = 1 AND member_active = 1 AND player_id = $mi) OR
       (member_active = 1 AND player_id = $pi)
GROUP  BY league_id
HAVING COUNT(*) = 2 
```

# python - 最有效的 Django 查询返回跨多个表的结果

> ID：15105202
> 
> 赞同：4
> 
> 时间：2013-02-27T05:57:55.023
> 
> 标签：python, django

我正在尝试以最有效的方式在 Django 中进行非常复杂的查询，但我不知道如何开始。我有这些模型（这是简化版）

```
class Status(models.Model):
    status = models.CharField(max_length=200)

class User(models.Model):
    name = models.CharField(max_length=200)

class Event(models.Model):
    user = models.ForeignKey(User)

class EventItem(models.Model):
    event = models.ForeignKey(Event)
    rev1 = models.ForeignKey(Status, related_name='rev1', blank=True, null=True)
    rev2 = models.ForeignKey(Status, related_name='rev2', blank=True, null=True)
    active = models.BooleanField() 
```

我想创建一个查询，该查询将生成具有最多事件的用户列表，其中所有依赖的 EventItems 都具有`rev1`并且`rev2`不是空白或 nulland `active = True`。

我知道我可以通过遍历用户列表然后检查他们的所有事件是否匹配`rev1`,`rev2`和`active`条件然后返回这些事件来做到这一点，但这对数据库来说很重。有什么建议么？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T06:29:30.947

您的模型已损坏，但这应该以更简洁的方式总结您所做的事情。

```
class Status(models.Model):
    status = models.CharField(max_length=200)

class User(models.Model):
    name = models.CharField(max_length=200)
    events = models.ManyToManyField('Event')

class Event(models.Model):
    rev1 = models.ForeignKey(Status, related_name='rev1', blank=True, null=True)
    rev2 = models.ForeignKey(Status, related_name='rev2', blank=True, null=True)
    active = models.BooleanField() 
```

和查询

`User.objects.filter(events__active=True).exclude(Q(events__rev1=None)|Q(events__rev2=None)).annotate(num_events=Count('events')).order_by('-num_events')`

这将返回一个用户列表，按其集合中的事件数排序。

有关更多信息，请查看[多对多](https://docs.djangoproject.com/en/dev/topics/db/examples/many_to_many/)字段。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T01:48:08.177

> 我想创建一个查询，该查询将生成具有最多事件的用户列表，其中所有相关的 EventItems 都具有 rev1 和 rev2 不是空白或 null 并且活动 = True。

首先，您需要`Event`始终具有这种类型的对象`EventItem`。

```
events = Event.objects.filter(active=True)
events = events.exclude(eventitem__rev1__isnull=True)
events = events.exclude(eventitem__rev1='')
events = events.exclude(eventitem__rev2__isnull=True)
events = events.exclude(eventitem__rev2='') 
```

此外，您没有指定是否要处理`Event`没有`EventItem`. 您可以使用以下方法过滤掉它们：

```
events = events.exclude(eventitem__isnull=True) 
```

请注意，`events`可能包含大量重复项。如果你愿意，你可以抛出一个`events.distinct()`，但只有在你需要它可读时才应该这样做。

一旦你有了这些，你现在可以提取`User`你想要的对象：

```
users = User.objects.filter(event__in=events) 
```

请注意，在某些数据库后端 *ahem* MySQL *ahem* 上，您可能会发现该`.filter(field__in=QuerySet)`模式[非常缓慢](https://docs.djangoproject.com/en/dev/ref/models/querysets/#in)。对于这种情况，代码应该是：

```
users = User.objects.filter(event__in=list(events.values_list('pk', flat=True))) 
```

`Event`然后，您可以按附加对象的数量对事物进行排序：

```
from django.db.models import Count
active_users = users.annotate(num_events=Count('event')).order_by('-num_events') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T06:41:42.147

您可以尝试以下方法：

```
EventItem.objects.exclude(rev1=None).exclude(rev2=None).filter(active=True).values_list('event__user', flat=True) 
```

这将为您提供用户 id 的平面列表，其中每个 id 的频率是用户拥有多少 EventItem 对象。

您可能可以做得更好，并使用 将其集成到查询中`.annotate()`，但我现在不知道该怎么做。

# php - 在 PHP 中使用带有条件测试的查询

> ID：15105213
> 
> 赞同：0
> 
> 时间：2013-02-27T05:59:03.557
> 
> 标签：php, mysql, sql, sql-update

我正在尝试制作一个使用 php 更新 mySQL 中的表的脚本。

到目前为止我有这个

```
$q3 = mysql_query("Select 1 from USER_REP where CID = '$cid' AND uid = '$uid'") OR die;    
$num_q3 = mysql_num_rows($q3);
if($num_q3 == 0){
    mysql_query("UPDATE IDEA set ErrorCount = ErrorCount + 1 WHERE RID = '$rid' AND CID = '$cid'") OR die ("error"); 
} 
```

我知道变量已正确关联，因为我可以在脚本的其他部分执行查询。但是，如果 $q3 不返回一个元组，我想更新 IDEA 中的一个元组。所以我认为我在这个条件测试中遇到了一些问题。有人可以帮我弄这个吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T06:03:52.407

您可以在更新期间加入两个表，

```
UPDATE  IDEA a
        LEFT JOIN USER_REP  b
            ON  a.cid = b.cid AND
                b.uid = 'uidHERE' AND
                b.cid = 'cidHERE'
SET     ErrorCount = ErrorCount + 1
WHERE   b.cid IS NULL AND
        a.rid = 'ridVALUE' 
```

# xaml - 除非存在虚拟 DataTemplate，否则在 WinRT 上使用自定义控件加载 Loose Xaml 会失败

> ID：15105214
> 
> 赞同：0
> 
> 时间：2013-02-27T05:59:06.003
> 
> 标签：xaml, windows-runtime

在 ReactiveUI 中，我在某个时间点运行此代码：

```
const string template = "<DataTemplate xmlns='http://schemas.microsoft.com/winfx/2006/xaml/presentation' xmlns:routing='using:ReactiveUI.Routing'>" +
    "<routing:ViewModelViewHost ViewModel=\"{Binding}\" VerticalContentAlignment=\"Stretch\" HorizontalContentAlignment=\"Stretch\" IsTabStop=\"False\" />" +
"</DataTemplate>";

var theTemplate = XamlReader.Load(template); 
```

在其他平台上，这很好用（`xmlns`声明当然不同），但在 {WinRT / Metro / Windows Store} 上，这会引发未指定错误：

```
WinRT information: The type 'ViewModelViewHost' was not found. [Line: 1 Position: 253] 
```

## 扭曲

但是，如果您在页面上包含虚拟资源：

```
<Page.Resources>
    <DataTemplate x:Name="Foo">
        <routing:ViewModelViewHost ViewModel="{Binding}" />
    </DataTemplate>
</Page.Resources> 
```

......然后它的工作原理！是什么赋予了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T15:30:49.097

“扭曲”让我认为这一定是因为应用程序没有正确的 XAML 元数据用于被实例化的类型 - 而不是使用反射来解析 WPF/Silverlight 等 XAML 文件中的类型，WinRT 使用代码生成来通过`IXamlMetadataProvider`接口解析（[这里](http://www.jaylee.org/post/2012/03/07/Xaml-integration-with-WinRT-and-the-IXamlMetadataProvider-interface.aspx)有一个不错的描述；[这](http://www.fancy-development.net/dynamic-loading-of-xaml-in-winrt-with-custom-types#.US94r03cl1F)听起来像你在做什么，另见[后续](http://fancy-development.net/a-winrt-plug-in-system-approach-based-on-custom-ixamlmetadataprovider-implementation#.US926k3cl1E)）。添加引用会强制正确生成此元数据代码。如果是这种情况，您应该能够通过简单地将类型本身添加到某个未使用键下的资源中来实现相同的效果，而无需数据模板。

查看应用程序的“obj”目录，Visual Studio 会生成一个`XamlTypeInfo.g.cs`文件来实现`IXamlMetadataProvider`. 这应该包含失败类型的条目 - 如果您添加了虚拟引用，则应该有实例化类型所需的完整详细信息。如果没有这个，我发现有可能对类型类型有一些引用，但信息不足 - 但这可以防止失败行为（在可能具有自定义元数据提供程序的依赖 DLL 中查找类型）。

除了在最终应用程序本身中添加对库类型的虚拟引用之外，我找到的唯一解决方案是将[`Bindable`](http://msdn.microsoft.com/en-gb/library/windows/apps/windows.ui.xaml.data.bindableattribute)属性应用于类型。虽然这应该与 C++ 有关，但我发现这可以在 C# 中用于强制类型始终出现在为 XAML 类型元数据生成的代码中。

# ios - 使用背景位置设置精灵

> ID：15105217
> 
> 赞同：0
> 
> 时间：2013-02-27T05:59:24.863
> 
> 标签：ios, random, background, cocos2d-iphone, ccsprite

我是 cocos2d 的新手，所以请帮助我

我的背景从右到左移动，背景包含带有 3 行窗口的小窗口

```
_spaceDust1 = [CCSprite spriteWithFile:@"bg_front_spacedust.png"];
_spaceDust2 = [CCSprite spriteWithFile:@"bg_front_spacedust.png"];

    CGPoint dustSpeed = ccp(0.1 , 0.1);
    CGPoint bgSpeed = ccp(0.05 , 0.05);

    [_backgroundNode addChild:_spaceDust1 z:0 parallaxRatio:dustSpeed positionOffset:ccp(0,winSize.height / 2)];
    [_backgroundNode addChild:_spaceDust2 z:0 parallaxRatio:dustSpeed positionOffset:ccp(_spaceDust1.contentSize.width , winSize.height / 2)]; 
```

现在添加敌人，它们也以相同的速度从右向左移动

```
 _robbers = [[CCArray alloc] initWithCapacity:kNumAstroids];
    for (int i = 0; i < kNumAstroids; ++i) {
        CCSprite *asteroid = [CCSprite spriteWithSpriteFrameName:@"robber.png"];
        asteroid.visible = NO;
        [_batchNode addChild:asteroid];
        [_robbers addObject:asteroid];
    } 
```

*在更新方法中*：

```
 double curTime = CACurrentMediaTime();
   if (curTime > _nextRunemanSpawn) {
    float randSecs = [self randomValueBetween:0.20 andValue:1.0];
    _nextRunemanSpawn = randSecs + curTime;

    float randY = 80.0;
    float randY1 = 185.0;
    float randY2 = 293.0;
    float randDuration = [self randomValueBetween:5.2 andValue:5.2];
    float randDuration1 = [self randomValueBetween:1.0 andValue:1.0];

    CCSprite *asteroid = [_robbers objectAtIndex:_nextRobber];
    _nextRobber++;

    if (_nextRobber >= _robbers.count) {
        _nextRobber = 0;
    }
    //[asteroid stopAllActions];
    int winChoice = arc4random() % 3;
    if (winChoice == 0) {
        asteroid.position = ccp(winSize.width +asteroid.contentSize.width / 2 , randY);
        asteroid.visible = YES;

    }
    else if(winChoice == 1){

        asteroid.position = ccp(winSize.width +asteroid.contentSize.width / 2 , randY1);
        asteroid.visible = YES;

    }else {
        asteroid.position = ccp(winSize.width +asteroid.contentSize.width / 2 , randY2);
        asteroid.visible = YES;

    }

    [asteroid runAction:[CCSequence actions:[CCMoveBy actionWithDuration:randDuration position:ccp(-winSize.width-asteroid.contentSize.width, 0)],
                         [CCCallFuncN actionWithTarget:self selector:@selector(setInvisible:)],nil]]; 
```

一切顺利，但我想将这个敌人设置在窗口和随机位置
，那么我如何设置敌人的 x 参数以便可以将其固定到背景窗口中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T05:59:15.887

出于某种原因，我无法发表评论，因此将其写为答案。你到底想做什么？我有点困惑。听起来您希望将 X 位置设置为位于 3 个随机位置之一，对吗？

# c# - 需要在 SharePoint 2010 中检索我的站点地图的列表

> ID：15105219
> 
> 赞同：0
> 
> 时间：2013-02-27T05:59:33.503
> 
> 标签：c#, sharepoint

我正在尝试使用 Visual Studio 在 SharePoint 2010 中创建一个简单的站点地图。下面是我需要做的一个简单的模型。

```
 • Site collection
     o Site
        List
        List
     o Site
     o Site
   • Site collection 
```

我能够提取站点集合和站点，但无法检索我尝试使用 SPLists 但不知道如何使用 SPWeb 函数下的 foreach 循环的列表 我不断收到此错误

无法将“Microsoft.SharePoint.SPWeb”类型的对象转换为“Microsoft.SharePoint.SPList”类型。

我是一名 SharePoint 开发人员，所以我对此很陌生。如果有人可以让我开始，我可以从那里开始。下面是我的代码

```
 using System;
            using System.ComponentModel;
            using System.Web;
            using System.Web.UI;
            using System.Web.UI.WebControls;
            using System.Web.UI.WebControls.WebParts;
            using Microsoft.SharePoint;
            using Microsoft.SharePoint.WebControls;
            using System.Collections.Generic;
            using Microsoft.SharePoint.Administration;
            using SP = Microsoft.SharePoint.Client;
            namespace SiteMapWebPart.SPSiteMap
            {
            [ToolboxItemAttribute(false)]
            public class SPSiteMap : WebPart
            {
            DropDownList webAppList = new DropDownList();
            Button submit = new Button();
            List<string> siteList = new List<string>();

            protected override void OnInit(EventArgs e)
            {

            SPFarm farm = SPFarm.Local;
            SPWebService service = farm.Services.GetValue<SPWebService>("");

            foreach (SPWebApplication webApp in service.WebApplications)
            {
            webAppList.Items.Add(webApp.AlternateUrls[0].Uri.ToString());
            }

            }

            protected override void CreateChildControls()
            {
            submit.Text = "Submit";
            submit.Click += new EventHandler(submit_Click);
            this.Controls.Add(webAppList);
            this.Controls.Add(submit);
            }

            void submit_Click(object sender, EventArgs e)
            {
            SPWebApplication webApp = SPWebApplication.Lookup(new Uri(webAppList.SelectedItem.ToString()));

            foreach (SPSite site in webApp.Sites)
            {
            siteList.Add(site.Url.ToString());
            site.Dispose();
            }
            }

            protected override void Render(HtmlTextWriter writer)
            {

            RenderChildren(writer);
            writer.Write("<br/><br/><Table border='1'>");
            foreach (string url in siteList)
            {

            using (SPSite site = new SPSite(url))
            {
            foreach (SPWeb web in site.AllWebs)
            {

            writer.Write("<tr><td><a href='" + url + "'>" + url + "</a></td>");
            writer.Write("<td>" + web.Title + "</td>");
            writer.Write("</tr>");

            web.Dispose();
            }
            writer.Write("</Table>");            

            }
            }

            }
            }

            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T06:11:33.643

SPWeb 对象具有属性 - 列表。这是此 Web 中 SPList 对象的集合。

```
static void Main(string[] args)
    {
        try
        {
            SPSite site = new SPSite("http://xxx");
            foreach (SPWeb web in site.AllWebs)
            {
                Console.WriteLine(web.Title);
                foreach (SPList list in web.Lists)
                    Console.WriteLine("List: " + list.Title);
            }
        }
        catch (Exception ex)
        {
            Console.WriteLine(ex);
        }
        Console.WriteLine("End");
        Console.Read();            
    } 
```

# vb6 - 连接微控制器时在 vb6 中打开和关闭 mscomm 端口的问题

> ID：15105223
> 
> 赞同：0
> 
> 时间：2013-02-27T05:59:57.330
> 
> 标签：vb6, port, microcontroller, serial-communication, mscomm32

代码是使用串口从微控制器或任何设备从串行设备获取数据，所以我在端口打开和获取数据时遇到问题，最近 20 天都遇到这个问题，请尽早帮助我 :)

```
Private Sub Command1_Click()
    MsgBox ("The port is open " & MSComm1.PortOpen)

    If (MSComm1.PortOpen = False) Then
    MSComm1.PortOpen = True
    End If
    Command1.Enabled = False
    Command2.Enabled = True
End Sub

Private Sub Command2_Click()
    If (MSComm1.PortOpen = True) Then
    MSComm1.PortOpen = False
    End If
    Command1.Enabled = True
    Command2.Enabled = False
End Sub

Private Sub Form_Load()
    With MSComm1
    .CommPort = 1
    .RThreshold = 1
    .RTSEnable = True
    .Settings = "9600,N,8,1"
    .InputLen = 127
    .SThreshold = 1
    End With
End Sub

Private Sub Form_Unload(Cancel As Integer)
    If (MSComm1.PortOpen = True) Then
    MSComm1.PortOpen = False
    End If
End Sub

Private Sub MSComm1_OnComm()
    Dim Buffer As String

    Select Case MSComm1.CommEvent
    Case comEvReceive
    'Text1.Text = " "
    Buffer = MSComm1.Input
    Text1.Text = Text1.Text & Buffer
    End Select
End Sub! 
```

下面是包含 MScomm 控件、一个文本框、两个用于连接和断开连接的命令按钮的界面图像：

![在此处输入图像描述](../Images/d99e59f4d68d8f894a628fef5d48b03f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-03T10:44:55.007

```
 '****** paste this in form'*********    
    Option Explicit

        Dim Portnumber As Integer

        Private Sub cmdClose_Click()

            On Error GoTo handler

            MSComm1.PortOpen = False
            Shape1.FillColor = vbRed
            cmdOpen.Enabled = True
            txtRecieve.Text = ""
            Exit Sub

        handler:                                MsgBox Err.Description
        End Sub

        Private Sub cmdOpen_Click()

            On Error GoTo handler

         '   Debug.Print cboComm.ItemData(cboComm.ListIndex)

            portnumber = Mid(cboComm.Text, 4, (Len(cboComm.Text) - 3))

            a = Mid(cboComm.Text, 4, (Len(cboComm.Text) - 3))
        '    If MSComm1.PortOpen = False Then
                MSComm1.CommPort = portnumber
                MSComm1.PortOpen = True
                Shape1.FillColor = vbGreen
                cmdOpen.Enabled = False
        '    End If

            Exit Sub

        handler:                   MsgBox Err.Description
        End Sub

        Private Sub Form_Load()
            cboComm.Clear   '*** cbo is for combobox
            MSComm1.Settings = "9600,n,8,1"
            ListComPorts
        End Sub

        Private Sub ListComPorts()

            Dim i As Integer

            cboComm.Clear

            Static iData As Integer
            iData = -1

            For i = 1 To 16
                If ComAvailable(i) Then
                    cboComm.AddItem (("COM") & i)
                    iData = iData + 1
                    cboComm.ItemData(iData) = i
                End If

            Next

            cboComm.ListIndex = 0
            '    cmdGet.Enabled = False
        End Sub

        Private Sub MSComm1_OnComm()

            Select Case MSComm1.CommEvent

                Case comEvReceive
                    txtRecieve.Text = MSComm1.Input

                Case Else
                    Debug.Print "Event: " & MSComm1.CommEvent
            End Select

        End Sub
        '**************** End of form code **************

       '*********** Now API code******************

        '********** Paste in Module**************

        Option Explicit

        '*** API Declarations
        Public Declare Function CreateFile Lib "kernel32" Alias "CreateFileA" (ByVal lpFileName As String, ByVal dwDesiredAccess As Long, ByVal dwShareMode As Long, lpSecurityAttributes As SECURITY_ATTRIBUTES, ByVal dwCreationDisposition As Long, ByVal dwFlagsAndAttributes As Long, ByVal hTemplateFile As Long) As Long

        Public Declare Function CloseHandle Lib "kernel32" (ByVal hObject As Long) As Long

        '*** API Structures
        Public Type SECURITY_ATTRIBUTES

            nLength As Long
            lpSecurityDescriptor As Long
            bInheritHandle As Long

        End Type

        '***API Constants
        Public Const FILE_SHARE_READ = &H1

        Public Const FILE_SHARE_WRITE = &H2

        Public Const OPEN_EXISTING = 3

        Public Const FILE_ATTRIBUTE_NORMAL = &H80

        '*** Create a Fuction to check whether COM exists or not. If exists return "true" otherwise "false"
        Public Function ComAvailable(comnum As Integer) As Boolean

            Dim hcom As Long

            Dim ret  As Long

            Dim sec  As SECURITY_ATTRIBUTES

            hcom = CreateFile("\.\COM" & comnum & "", 0, FILE_SHARE_READ + FILE_SHARE_WRITE, sec, OPEN_EXISTING, FILE_ATTRIBUTE_NORMAL, 0)

            If hcom = -1 Then
                ComAvailable = False
            Else
                ComAvailable = True

                '*** close the CO MPort
                ret = CloseHandle(hcom)
            End If

        End Function

        ''''''''*******End of module code********

I think  this will help you..... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T11:39:59.290

如果您收到错误 8002，则该端口可能不存在。

您使用的是 rs232 连接，还是通过 USB 端口连接？

看看我在[这里](https://stackoverflow.com/questions/9661612/how-might-i-retrieve-the-port-number-of-a-usb-device-that-is-connected-to-a-usb/13972265#13972265)发布的代码......当你运行它时，它会给出你系统上可用端口的列表。

# ios - 适用于 iOS 的 CvVideoWriter WriteFrame 无法正常工作

> ID：15105224
> 
> 赞同：2
> 
> 时间：2013-02-27T06:00:04.013
> 
> 标签：ios, opencv, video-capture, ogre3d

我正在使用从这里获得的 OpenCV 的预编译版本：http: [//aptogo.co.uk/2011/09/opencv-framework-for-ios/](http://aptogo.co.uk/2011/09/opencv-framework-for-ios/)

我正在开发一个 Ogre3D 应用程序，我正在尝试从应用程序中抓取屏幕以拼接在一起制作视频。我已经使用 OpenCV 的 CvVideoWriter 成功地让它在 Windows 上工作。

不幸的是，我在 iOS 版本上遇到了一些问题。我的代码如下：

```
IplImage *mCvCaptureImage, *mCvConvertImage;
mCvCaptureImage = cvCreateImage(cvSize(width, height), IPL_DEPTH_8U, 3);
mCvConvertImage = cvCreateImage(cvSize(width, height), IPL_DEPTH_8U, 3);
PixelFormat pf = win->suggestPixelFormat();
PixelBox pb(width, height, 1, pf, mCvCaptureImage->imageData);
                    win->copyContentsToMemory(pb);
cvConvertImage(mCvCaptureImage, mCvConvertImage, CV_CVTIMG_SWAP_RB);
cvWriteFrame(writer, mCvConvertImage );
cvReleaseImage(&mCvConvertImage);
cvReleaseImage(&mCvCaptureImage); 
```

由于写入器状态检查，cvWriteFrame 调用引发错误。我检查了源代码，这似乎是问题所在：

```
// writer status check
if (![mMovieWriterInput isReadyForMoreMediaData] || mMovieWriter.status !=  AVAssetWriterStatusWriting ) {
         NSLog(@"[mMovieWriterInput isReadyForMoreMediaData] Not ready for media data or ...");
         NSLog(@"mMovieWriter.status: %d. Error: %@", mMovieWriter.status,[mMovieWriter.error localizedDescription]);
         [localpool drain];
         return false;
} 
```

任何人都知道为什么会发生这种情况以及如何解决？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T13:26:16.590

在调用 cvCreateVideoWriter() 之前将文件扩展名更改为 m4v 并删除现有文件

（opencv 选择文件类型查看文件扩展名）

# perl - Try::Tiny 不能在 perl 中使用 exit 语句

> ID：15105242
> 
> 赞同：3
> 
> 时间：2013-02-27T06:01:10.357
> 
> 标签：perl, cpan

我试图使用来自 cpan 的[Try::Tiny](http://search.cpan.org/~doy/Try-Tiny-0.12/lib/Try/Tiny.pm)包，并编写了如下简单的代码

```
use strict;
use Try::Tiny;
print "before try block";
try {
        print "try block";
        my $test = 10/0;
} catch {
        print "got error :- $_ \n";
}
exit; 
```

当我执行此操作时，它没有显示任何错误，并像“在尝试块之前”一样给出 o/p，并且在不打印“尝试块”语句的情况下结束。

但是当我评论

```
#exit; 
```

我工作正常并在 catch 块中显示打印语句，我做错了吗？只是想找出问题所在。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T06:06:52.340

我认为你需要一个`;`（分号）在 try-catch 的末尾

```
} catch {
        print "got error :- $_ \n";
}; 
```

从他们关于[cpan的例子](http://search.cpan.org/~doy/Try-Tiny-0.12/lib/Try/Tiny.pm)

另外，你需要`exit`吗？？

（礼貌 ysth）
**解释：** catch 有两个参数：一个代码块和一个可选参数，用于作为 finally 子句......但这里它被传递了 exit 的返回值作为第二个参数，它会抱怨除了那个出口永远不会回来。

# php - 使用 STOMP 从 ActiveMQ 队列读取时的非阻塞事务

> ID：15105243
> 
> 赞同：0
> 
> 时间：2013-02-27T06:01:10.747
> 
> 标签：php, transactions, activemq, nonblocking, stomp

我正在通过 STOMP 与 ActiveMQ 交互。我有一个发布消息的进程和一个订阅和处理消息的多个进程（大约 10 个并行实例）。

阅读消息后，我想确定如果由于某种原因我的应用程序失败/崩溃，消息不会丢失。所以很自然地，我转向交易。不幸的是，我发现一旦消费者在事务中读取一条消息，在事务结束之前，所有后续消息都不会发送给其他消费者。

测试用例：`abc`队列有 100 条消息。如果我在两个不同的浏览器选项卡中激活以下代码，第一个将在 10 秒内返回，第二个将在 20 秒内返回。

```
<?php
// Reader.php
$con = new Stomp("tcp://localhost:61613");
$con->connect();

$con->subscribe(
    "/queue/abc",
    array()
);

$tx = "tx3".microtime();
echo "TX:$tx<BR>";
$con->begin($tx);
$messages = array();
for ($i = 0; $i < 10; $i++) {
    $t = microtime(true);
    $msg = $con->readFrame();
    if (!$msg) {
        die("FAILED!");
    }
    $t = microtime(true)-$t; echo "readFrame() took $t MS to complete<BR>";
    array_push($messages, $msg);
    $con->ack($msg, $tx);
    sleep(1);
}
$con->abort($tx); 
```

有什么我在代码方面缺少的东西吗？有没有办法配置 ActiveMQ（或发送标头），使事务从队列中删除项目，允许其他进程使用其他消息，如果事务失败或超时，会将项目放回?

PS：我考虑过为每个阅读过程创建另一个队列 - DetentionQueue，但如果我有选择的话，我真的不想这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T11:48:55.700

您可能需要调整订阅的预取大小，以便 ActiveMQ 在客户端 2 有机会获得任何消息之前不会将队列上的消息发送到客户端 1。默认情况下，它设置为 1000，因此最好根据您的用例对其进行调整。

您可以通过订阅框架上的“activemq.prefetchSize=1”标头设置预取大小。有关所有框架选项，请参阅[ActiveMQ Stomp](http://activemq.apache.org/stomp.html)页面。

# c# - 如何发送网络请求以检查链接是否损坏

> ID：15105246
> 
> 赞同：0
> 
> 时间：2013-02-27T06:01:34.827
> 
> 标签：c#, httpwebrequest

我有文本框（多行），我想将网络请求发送到所有链接以检查链接是否有效，如果不工作则错误消息

```
string strLink = TextBox1.Text;
WebResponse objResponse;
WebRequest objRequest = System.Net.HttpWebRequest.Create(strLink);

objResponse = objRequest.GetResponse();
using (StreamReader sr = new StreamReader(objResponse.GetResponseStream()))
{
    strLink = sr.ReadToEnd();
    sr.Close();
}
strLink = strLink.Replace("<form id='form1' method='post' action=''>", "");
strLink = strLink.Replace("</form>", "");
//strResult = strResult.Replace("<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd" /><html xmlns="http://www.w3.org/1999/xhtml">");
div.InnerHtml = TextBox1.Text; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T06:08:17.127

除非我误解了你，否则你可以这样做：

```
var links = textBox1.Text.Split(new string[] { "\n", "\r" }, StringSplitOptions.RemoveEmptyEntries);
foreach (var link in links) {
    if (!IsLinkWorking(link)) {
        //Here you can show the error. You don't specify how you want to show it.
        textBox2.Text += string.Format("Link {0} not working\n", link);
    }
}

bool IsLinkWorking(string url) {
    HttpWebRequest request = (HttpWebRequest) HttpWebRequest.Create(url);

    //You can set some parameters in the "request" object...
    request.AllowAutoRedirect = true;

    try {
        HttpWebResponse response = (HttpWebResponse) request.GetResponse();
        return true;
    } catch { //TODO: Check for the right exception here
        return false;
    }
} 
```

假设你有这样的`textBox1`事情：

> [http://www.stackoverflow.com/](http://www.stackoverflow.com/)
> [http://www.invalid-page.com/](http://www.invalid-page.com/)
> [http://www.invalid.again.com/120938213](http://www.invalid.again.com/120938213)

您将在以下文本中结束`textBox2`：

> 链接[http://www.invalid-page.com/](http://www.invalid-page.com/)不起作用
> 链接[http://www.invalid.again.com/120938213](http://www.invalid.again.com/120938213)不起作用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T06:09:33.690

您可以使用 HttpWebResponse 状态如下：

```
HttpWebResponse objResponse = (HttpWebResponse)objRequest.GetResponse();
if (objResponse.StatusCode == HttpStatusCode.OK)
{
   // put your code when link is valid.
} 
```

您还可以将代码放入其中`try catch`以捕获一些异常，例如连接失败等。

# ffmpeg - 对于 WMV 文件，avformat_find_stream_info() 显示“额外数据：剩余 8 位，值：0”消息

> ID：15105256
> 
> 赞同：0
> 
> 时间：2013-02-27T06:02:11.620
> 
> 标签：ffmpeg, libavformat

当我为 wmv 文件调用 avformat_find_stream_info() 时，总是会看到以下消息：
*[wmv3 00FAEAE0] Extra data: 8 bits left, value: 0*

之后程序按预期工作，但无论如何我想知道该消息是什么意思？谢谢！

文件信息（通过 ffmpeg -i）：

```
Duration: 00:00:06.92, start: 0.000000, bitrate: 1514 kb/s
Stream #0:0(rus): Audio: wmav2 (a[1][0][0] / 0x0161), 44100 Hz, stereo, fltp, 128 kb/s
Stream #0:1(rus): Video: wmv3 (Main) (WMV3 / 0x33564D57), yuv420p, 720x576, 1368 kb/s, SAR 16:15 DAR 4:3, 25 tbr, 1k tbn, 1k tbc 
```

代码：

```
AVFormatContext*    pFormatCtx = avformat_alloc_context();
if (avformat_open_input(&pFormatCtx, "file.wmv", NULL, NULL) < 0)
    return 0;
if (avformat_find_stream_info(pFormatCtx, NULL) < 0) // HERE WE HAVE GOT THAT MESSAGE
    return 0; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T16:09:15.047

该消息由 libavcodec/vc1dec.c 在函数 vc1_decode_init() 中打印。该函数初始化 VC1/WMV3 解码器。此时，它解析了 WMV3 标头，并认为该文件具有存储在 extradata 中的序列标头；另外，高级序列头可以在第一帧之前；最后，extradata 的最后一个字节是版本号。

这种解释可能是不准确的，因为它是基于没有标点符号和大写的评论，就像 ee cummings 诗歌一样。

但是，纯粹从源代码来看，“该消息的含义”只是一个标头比预期的长一个字节，并且该字节的值为零。（正如一位智者所说，调试代码，而不是注释。）

# linux - 链表队列的出队函数中使用的函数指针问题

> ID：15105262
> 
> 赞同：0
> 
> 时间：2013-02-27T06:02:33.397
> 
> 标签：linux

系统：Linux 编译器：gcc 版本 4.4.6

程序适用于大学级别的课程，其中讲师指定了要在所提供的课程中使用的功能。我只能在此处更改这两个文件，而不能更改讲师提供的任何文件。除了我实现的出队功能外，该程序似乎运行正常。我需要访问前面、后面、项目和计数。编译器说它们超出了范围。我能够从 cpp 文件中的其他函数访问它们，但是由于这个使用的不同方法，我很难过。从我发现这是一个函数指针。我以前从未使用过这些，我能找到的唯一文档是如何使用它们，但没有关于如何从函数外部访问未发送的成员。对此的任何帮助将不胜感激。我'

```
////////////////////////////////////////////////////////////////////////////////////////////

//My.h
#ifndef __LINKEDQUEUE_H__
#define __LINKEDQUEUE_H__ 

#include <ostream>
#include <stdint.h>
#include "task.h"
#include "queueExceptions.h"

#include <string>
#include <new>
#include "queue.h"

/*class QueueEmpty
{};

class QueueFull
{};
*/

typedef Task* ItemType;

struct NodeType {
   ItemType info;
   NodeType* next;
};

class LinkedQueue: public Queue
{
public:
  int count;
  NodeType* front;
  NodeType* rear;

  LinkedQueue();

  ~LinkedQueue();

  /**
   * Enqueue a task onto the queue
   * @param tsk The task to enqueue
   * @throws QueueFull if there is not room on the queue to place the item.
   */
  void enqueue(Task *tsk) throw (QueueFull);

  /**
   * Dequeue an element from the queue.
   * @return the front of the queue.
   * @throws QueueEmpty if there are no elements in the queue.
   */
  Task *dequeue() throw (QueueEmpty);

  /**
   * Retrieve the current number of items on the queue.
   * @return the current number of items on the queue.
   */
  size_t depth() const;

};
#endif // __LINKEDQUEUE_H__ 
```

///////////////////////////////////////// //////////////////////////////////

```
//my.cpp

#include <iostream>
#include <string>
#include "linkedQueue.h"

using namespace std;

LinkedQueue::LinkedQueue()
{
  front = NULL;
  rear = NULL;
  count = 0;
}

  /**
   * Enqueue a task onto the queue
   * @param tsk The task to enqueue
   * @throws QueueFull if there is not room on the queue to place the item.
   */
  void LinkedQueue::enqueue(Task *tsk) throw (QueueFull)
{
   NodeType* newNode;
   newNode = new NodeType;
   if (newNode == NULL)
   {
     throw QueueFull();
   }
   else
   {
     newNode->info = tsk;
     newNode->next = NULL;
     if (rear == NULL)
     front = newNode;
     else
     rear->next = newNode;
     rear = newNode;
     count++;
   }
}
  /**
   * Dequeue an element from the queue.
   * @return the front of the queue.
   * @throws QueueEmpty if there are no elements in the queue.
   */
  Task LinkedQueue::*dequeue() throw (QueueEmpty)
{
  if (front == NULL) {throw QueueEmpty();}
  else
  {
    NodeType* tempPtr;
    tempPtr = front;
    item = front->info;
    front = front->next;
    if (front == NULL)
      rear = NULL;
    delete tempPtr;
    LinkedQueue::count--;
    return item;

  }
}

  /**
   * Retrieve the current number of items on the queue.
   * @return the current number of items on the queue.
   */
  size_t LinkedQueue::depth() const
{
  return count;
}

  LinkedQueue::~LinkedQueue()
{
NodeType* tempPtr;
while (front != NULL)
  {
  tempPtr = front;
  front = front->next;
  delete tempPtr;
  }
rear = NULL;
}

////////////////////////////////////////////////////////////////////////////////////////////

compile errors:
g++ -g -o linkedQueue.o -Wall -Werror -c linkedQueue.cpp
linkedQueue.cpp: In function ‘Task LinkedQueue::* dequeue()’:
linkedQueue.cpp:46: error: ‘front’ was not declared in this scope
linkedQueue.cpp:51: error: ‘item’ was not declared in this scope
linkedQueue.cpp:54: error: ‘rear’ was not declared in this scope
linkedQueue.h:31: error: invalid use of non-static data member ‘LinkedQueue::count’
linkedQueue.cpp:56: error: from this location
make: *** [linkedQueue.o] Error 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T06:07:11.437

你有一个错字。这个...

```
Task LinkedQueue::*dequeue() 
```

应该

```
Task* LinkedQueue::dequeue() 
```

这使编译器感到困惑，因为实现与您在标头中的内容不匹配，并且它不知道它是您类的一部分。

编辑：此外`item`没有在任何地方声明，但我认为它应该是类型的局部变量`Task*`

# struts2 - Struts 2 json 插件错误 java.lang.ClassNotFoundException:

> ID：15105263
> 
> 赞同：1
> 
> 时间：2013-02-27T06:02:35.687
> 
> 标签：struts2, struts2-json-plugin

我正在使用 struts 2 json 插件和 jquery ui 自动完成我收到错误，就像我检查萤火虫时一样

500内部服务器错误

```
SEVERE: Servlet.service() for servlet default threw exception
java.lang.ClassNotFoundException: com.opensymphony.xwork2.util.logging.LoggerFactory
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1680)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1526)
    at org.apache.struts2.json.JSONResult.<clinit>(JSONResult.java:69)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    at java.lang.Class.newInstance0(Class.java:355)
    at java.lang.Class.newInstance(Class.java:308)
    at com.opensymphony.xwork2.ObjectFactory.buildBean(ObjectFactory.java:123)
    at com.opensymphony.xwork2.ObjectFactory.buildBean(ObjectFactory.java:154)
    at com.opensymphony.xwork2.ObjectFactory.buildBean(ObjectFactory.java:143)
    at org.apache.struts2.impl.StrutsObjectFactory.buildResult(StrutsObjectFactory.java:94)
    at com.opensymphony.xwork2.DefaultActionInvocation.createResult(DefaultActionInvocation.java:195)
    at com.opensymphony.xwork2.DefaultActionInvocation.executeResult(DefaultActionInvocation.java:342)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:253)
    at com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:221)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:86)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    at org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:44)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:86)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    at com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept(ConversionErrorInterceptor.java:123)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    at com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:167)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:86)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    at com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java:105)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    at org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:83)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    at org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:207)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    at com.opensymphony.xwork2.interceptor.ModelDrivenInterceptor.intercept(ModelDrivenInterceptor.java:74)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    at com.opensymphony.xwork2.interceptor.ScopedModelDrivenInterceptor.intercept(ScopedModelDrivenInterceptor.java:127)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    at org.apache.struts2.interceptor.ProfilingActivationInterceptor.intercept(ProfilingActivationInterceptor.java:107)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    at org.apache.struts2.interceptor.debugging.DebuggingInterceptor.intercept(DebuggingInterceptor.java:206)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    at com.opensymphony.xwork2.interceptor.ChainingInterceptor.intercept(ChainingInterceptor.java:115)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    at com.opensymphony.xwork2.interceptor.I18nInterceptor.intercept(I18nInterceptor.java:143)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    at com.opensymphony.xwork2.interceptor.PrepareInterceptor.doIntercept(PrepareInterceptor.java:121)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:86)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    at org.apache.struts2.interceptor.ServletConfigInterceptor.intercept(ServletConfigInterceptor.java:170)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    at com.opensymphony.xwork2.interceptor.AliasInterceptor.intercept(AliasInterceptor.java:123)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    at com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:176)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    at org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:50)
    at org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:504)
    at org.apache.struts2.dispatcher.FilterDispatcher.doFilter(FilterDispatcher.java:422)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Thread.java:662) 
```

# jquery - 在 fancybox 上从图像过渡到视频

> ID：15105264
> 
> 赞同：0
> 
> 时间：2013-02-27T06:02:35.787
> 
> 标签：jquery, fancybox, fancybox-2

我有一个带有图像和视频的fancybox 画廊。当我单击图像并使用鼠标滚轮时，我可以浏览各种图像，但它总是会跳过视频。如果我点击视频，它播放得很好，一切都......

浏览图库图片时，我希望能够转到我的视频...

这是我在[www.charbelnicolas.com](http://charbelnicolas.com)上做的网站（请点击第二页的 II 以查看我正在谈论的画廊）

现在......图像和视频具有相同`rel`的内容`"gallery2"`，这是我用于画廊的代码：

```
 <script type="text/javascript">

        $(document).ready(function() {
        $(".fancybox").fancybox({ helpers: { title: false } });});

    </script>

    <script type="text/javascript">

    $(document).ready(function() {
    $('.fancybox-media').fancybox({ 'minWidth': 720, 'minHeight': 480, helpers : { media : {}}});});

    </script> 
```

我应该怎么做才能看到视频上的导航箭头，并且当我在浏览图库时使用键盘或鼠标滚轮时，我可以看到视频和图像？（所以它不再跳过视频）

我搜索了谷歌群组的讨论，我看到了来自 JFK 的各种答案，但我似乎无法让它发挥作用......也许如果你们检查我的网站，你可能会告诉我出了什么问题。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T07:50:00.227

您只需要一个用于图像和视频的脚本。

如果您想为您的视频传递`minWidth`和之类的选项，请在您的链接 中使用 (HTML5)属性（例如和），例如：`minHeight``data-*``data-min-width="720"``data-min-height="480"`

```
<a rel="gallery2" class="fancybox" href="http://vimeo.com/59469665" data-min-width="720" data-min-height="480"><img class="left" src="http://charbelnicolas.com/thumbs/anunciotedelimonthumb.png" alt="" /></a> 
```

然后在`beforeShow`回调中获取这些值，例如：

```
$(".fancybox").fancybox({
    beforeShow: function () {
        this.minWidth  = $(this.element).data("min-width");
        this.minHeight = $(this.element).data("min-height");
    },
    helpers: {
        media: {}
    }
}); 
```

见**[JSFIDDLE](http://jsfiddle.net/9Ftg8/)**

PS不要忘记加载`jquery.fancybox-media.js`文件。

# java - 在应用程序启动时停止已启动的服务

> ID：15105267
> 
> 赞同：0
> 
> 时间：2013-02-27T06:02:48.537
> 
> 标签：java, android, service, crash

我有一个网络应用程序，它使用服务连接到其他对等点。当您使用*“最近的应用程序”*关闭应用程序时，它只会关闭进程，而不是关闭进程，`service`这实际上对我来说还不错。但是下次用户打开应用程序时会有点麻烦。它崩溃了，所以用户必须再次使用*“最近的应用程序”*关闭它，然后再次尝试使用该应用程序。问题肯定是正在运行的服务，因为如果我在下次运行它之前停止该服务。它工作得很好！

实际上这对我来说很奇怪，因为我没有`service`在启动时开始另一个。我在用户点击按钮时启动它。无论如何，如果可能最好的方法是能够使用 running `service`，否则，我只想在我的应用程序启动时停止服务。

我是android新手，我被困在这一点上:(

感谢帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T06:09:13.233

服务骨架：

```
public class MyService extends Service {
public static final String TAG = "MyServiceTag";
...
} 
```

这是开始活动的一部分：

processStartService(MyService.TAG);

```
 private void processStartService(final String tag) {
Intent intent = new Intent(getApplicationContext(), MyService.class);
intent.addCategory(tag);
startService(intent);
} 
```

这是停止活动的一部分：

```
processStopService(MyService.TAG);

private void processStopService(final String tag) {
Intent intent = new Intent(getApplicationContext(), MyService.class);
intent.addCategory(tag);
stopService(intent);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T06:12:18.637

使用一个`static`对象来指示服务是否正在运行。

否则第二个选项我发现[如何检查服务是否在 Android 上运行？](https://stackoverflow.com/questions/600207/android-check-if-a-service-is-running/3780768#3780768),

```
if(startService(someIntent) != null) { 
    Toast.makeText(getBaseContext(), 'Service is already running',Toast.LENGTH_SHORT).show();
}else {
    Toast.makeText(getBaseContext(), 'There is no service running, starting service..', Toast.LENGTH_SHORT).show();
} 
```

# popup - 如何在 OOTB Tridion 2011 SP1 中配置“插入字符”弹出窗口的高度？

> ID：15105268
> 
> 赞同：2
> 
> 时间：2013-02-27T06:02:55.693
> 
> 标签：popup, tridion, tridion-2011

RTF 字段 --> 插入特殊字符。我们在列表中添加了一些特殊字符。我们有要求增加弹窗的高度，在哪里可以配置呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T14:43:18.447

这不是您可以通过配置文件执行的操作。

但是，您可以找到 *\Tridion\web\WebUI\Editors\CME\Scripts\Cme.js 并找到`SPECIALCHAR_POPUP`定义，

然后您可以根据需要更改弹出窗口。`FEATURES: "width=350px,**height**=300px,resizable=1"`

# extjs - 在控制器中写什么以在 extjs 中删除

> ID：15105270
> 
> 赞同：0
> 
> 时间：2013-02-27T06:03:13.157
> 
> 标签：extjs, controller, extjs4, extjs-mvc, delete-row

..................我的观点.............................. .....................

```
Ext.define('AM.view.emp.EDUGRID', {
    extend: 'Ext.grid.Panel',
    alias: 'widget.education',
    title: 'All Users',
    store: 'AddEdu',
    //id:'111',
    dockedItems: [{
        xtype: 'toolbar',
        items: [{
            iconCls: 'icon-add',
            text: 'Add',
            action: 'save'

        }, {
            iconCls: 'icon-delete',
            text: 'Delete',
            disabled: true,
            itemId: 'delete',
            scope: this,
            action: 'Del'
        }]
    }],
    initComponent: function () {

        this.columns = [{
            header: 'Level',
            dataIndex: 'Level',
            flex: 1
        }, {
            header: 'institute',
            dataIndex: 'institute',
            flex: 1
        }, {
            header: 'specialization',
            dataIndex: 'specialization',
            flex: 1
        }, {
            header: 'YoP',
            dataIndex: 'YoP',
            flex: 1
        }]

        this.callParent(arguments);
        this.getSelectionModel().on('selectionchange', this.onSelectChange, this);
    },
    onSelectChange: function (selModel, selections) {
        this.down('#delete').setDisabled(selections.length === 0);
    }
}); 
```

单击 del 按钮后，它转到控制器，我必须在其中指定删除操作。但不确定在删除函数中要给出什么。这是我的控制器.................................................. .....................

```
Ext.define('AM.controller.Users', {
    extend: 'Ext.app.Controller',
    stores: ['Users', 'Nationality', 'Maritalstatus', 'Empcat', 'Designation', 'Department', 'AddEdu'],
    models: ['User',
        'nationality',
        'maritalstatus',
        'empcat', 'designation', 'department', 'AddEdu'],
    views: [
        'user.List',
        'user.Edit',
        'emp.PD',
        'emp.JD', 'emp.WE',
        'emp.EDUGRID',
        'emp.eduform'],

    init: function () {
        this.control({

            'education button[action=save]': {

                click: this.EduQ
            },
            'edu button[action=save]': {
                click: this.UpdateEdu
            },
            'education button[action=Del] ': {
                click: function (grid, cell, row, col, e) {
                    var rec = this.grid.getStore().getAt(row);
                }
            }
        });
    }, 
```

我应该在 EduD 里面放什么

```
 EduD: function (view, cell, row, col, e) {
           var record = this.getGrid().store.getAt(row)
           this.deleteRecord([record])
       },

       EduQ: function (grid, record) {
           var view = Ext.widget('edu');
       },

       UpdateEdu: function (button) {
           var win = button.up('window');
           var form = win.down('form').getForm();
           if (form.isValid()) {
               var record = form.getRecord();
               var values = form.getValues();
               if (!record) {
                   var newRecord = new AM.model.AddEdu(values);
                   this.getAddEduStore().add(newRecord);
               } else {
                   record.set(values);
               }
               win.close();
           }
       }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T08:56:48.253

您可以从商店中删除记录，然后如果您想将其同步到您的数据库调用`store.sync();`

例子：

```
//Your listener can change to this:
'education button[action=Del] ': {
                this.EduD
}

//The callback function:
EduD: function (view, cell, row, col, e) {
       var store = view.getStore(); //You can access the store from the view
       var record = store.getAt(row); //Get the clicked record
       store.remove(record); //Remove the record from the store
       store.sync(); //Sync the store
}, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T09:20:25.390

> 网格应该是这样的

```
{header: 'Cancel Leave',flex:1,
                xtype: 'actioncolumn',
                width:30,
                action:'cancel',
                sortable: false,
                items: [{
                handler: function(view, cell, rowIndex, colIndex, e, record, row) {
                                        this.addEvents('itemclick');

                                  this.fireEvent('itemclick',view, cell, rowIndex, colIndex, e, record, row);

                               },
                    icon: 'ext-4.1.1a-gpl/ext-4.1.1a/docs/extjs/resources/themes/images/default/grid/page-first-disabled.gif',
                    tooltip: 'Cancel Leave'
                       }]
            }] 
```

> 控制器应该是...

```
 'leaveleavehistorygrid actioncolumn': {
            itemclick: this.cancelLeave
            } 
```

取消休假看起来像这样..

```
cancelLeave: function (view, cell, rowIndex, colIndex, e, record, row) {

            Ext.Msg.confirm('Remove Qualification', 'Are you sure?', function (button) {
        if (button == 'yes') {
            var store = Ext.getStore('LeaveRequest');
           var newRecord = new AM.model.leaverequest(row);
           console.log(record);
           console.log(store);
           store.remove(record);
           store.sync();
        }
    }, this); 
```

# c# - 使用 C# 读取 XML 文件

> ID：15105271
> 
> 赞同：-2
> 
> 时间：2013-02-27T06:03:18.160
> 
> 标签：c#, xml

```
<Day>
<Monday>true</Monday>
<Tuesday>false</Tuesday>
<Wednesday>true</Wednesday>
<Thursday>false</Thursday>
<Friday>true</Friday>
<Saturday>false</Saturday>
<Sunday>true</Sunday>
</Day>
<Time>
<dateTime>12:21</dateTime>
</Time> 
```

我需要阅读上面的 xml 文件来获取日期和时间，将获取的数据分配给一个变量。如何使用 c# 实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T06:30:01.633

我正在提供一个控制台程序来从字符串加载您的 XML。您也可以从提供文件路径的文件加载..（我也提到过该声明）..

这是您的 XML：

```
string xml = @"<testxml><Day>
<Monday>true</Monday>
<Tuesday>false</Tuesday>
<Wednesday>true</Wednesday>
<Thursday>false</Thursday>
<Friday>true</Friday>
<Saturday>false</Saturday>
<Sunday>true</Sunday>
</Day>
<Time>
<dateTime>12:21</dateTime>
</Time>
</testxml>"; 
```

现在声明一个`XmlDocument()`并将xml加载到其中..

```
 XmlDocument xDoc = new XmlDocument();
        xDoc.LoadXml(xml);
        //xDoc.Load(xmlpath); 
```

现在您的 xml 文档已准备就绪 ..`xDoc.Load(xmlpath);`可以从文件路径加载。

现在为您要访问的节点提供 xpath .. 使用 nodeList(SelectNodes) 或仅一个节点 .. 使用 selectSingleNode：

我使用 selectNodes 几天.. 和 selectSingleNode 日期时间。

```
 string xpath = "/testxml/Day/*";
            XmlNodeList xNode = xDoc.SelectNodes(xpath);

            foreach (XmlNode node in xNode)
            {
                string day = node.LocalName;
                Console.WriteLine(day + ", value=\"" + node.InnerText + "\"");
            } 
```

上面的代码打印节点名称（即，日期及其值 true/false）

现在让我们打印日期时间值：

```
 xpath = "/testxml/Time/dateTime";
            XmlNode node1 = xDoc.SelectSingleNode(xpath);
            Console.WriteLine(node1.LocalName + ", value=\"" + node1.InnerText + "\""); 
```

那是玩 XML DOM 的简单示例 :)

现在是一个完整的代码：

```
 static void Main(string[] args)
        {
            string xml = @"<testxml><Day>
<Monday>true</Monday>
<Tuesday>false</Tuesday>
<Wednesday>true</Wednesday>
<Thursday>false</Thursday>
<Friday>true</Friday>
<Saturday>false</Saturday>
<Sunday>true</Sunday>
</Day>
<Time>
<dateTime>12:21</dateTime>
</Time>
</testxml>";

            XmlDocument xDoc = new XmlDocument();
            xDoc.LoadXml(xml);
            //xDoc.Load(xmlpath);

            string xpath = "/testxml/Day/*";
            XmlNodeList xNode = xDoc.SelectNodes(xpath);

            foreach (XmlNode node in xNode)
            {
                string day = node.LocalName;
                Console.WriteLine(day + ", value=\"" + node.InnerText + "\"");
            }

            xpath = "/testxml/Time/dateTime";
            XmlNode node1 = xDoc.SelectSingleNode(xpath);
            Console.WriteLine(node1.LocalName + ", value=\"" + node1.InnerText + "\"");
            Console.ReadLine();
        } 
```

希望对您有所帮助..如果您有任何问题，请告诉我..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T06:09:57.287

你试过什么？

看一下 XDocument 类。在那里你可以做类似的事情

```
XDocument document = XDocument.Load(XMLPATH);
IEnumerable<XElement> day = document.Elements("Day"); 
```

# jakarta-ee - 通过远程 EJB 返回实体会导致 - com.sun.corba.ee.impl.orbutil.ClassInfoCache$ClassInfo 处的 java.lang.NullPointerException。

> ID：15105274
> 
> 赞同：9
> 
> 时间：2013-02-27T06:03:26.643
> 
> 标签：jakarta-ee, glassfish, ejb, corba

我正在尝试在以下环境中创建企业 Web 应用程序。

*   NetBeans 7.2.1
*   Glassfish Server 3.1.2（包含 Servlet 3.0 API）
*   EJB 3.1
*   JPA 2.0
*   JSF 2.1
*   JDK 1.7
*   甲骨文 10g

我创建了一个类库（新项目 -> Java -> Java 类库）来放置`javax.ejb.Remote`将由无状态会话 bean 实现的远程（）接口。类库已添加到两个模块（EJB 和 WAR）的类路径中。

我已经把**远程接口**和所有的实体类都放在了类库中（不知道是这样的）。

这适用于带有注释的接口`@Local`。`@Remote`当我尝试返回实体的对象列表时，它甚至可以在 JPA 涉及时使用但失败并出现以下异常。

> java.rmi.MarshalException: CORBA MARSHAL 1330446347 也许；嵌套异常是：org.omg.CORBA.MARSHAL：警告：IOP00810011：CDRInputStream vmcid 中 ValueHandler 上的 readValue 异常：OMG 次要代码：11 已完成：可能

完整的堆栈跟踪。

```
javax.ejb.EJBException: java.rmi.MarshalException: CORBA MARSHAL 1330446347 Maybe; nested exception is: 
    org.omg.CORBA.MARSHAL: WARNING: IOP00810011: Exception from readValue on ValueHandler in CDRInputStream  vmcid: OMG  minor code: 11 completed: Maybe
    at remote.admin.sessionbeans._AdminRemoteSessionBeanRemote_Wrapper.getZones(remote/admin/sessionbeans/_AdminRemoteSessionBeanRemote_Wrapper.java)
    at managedbeans.ZoneBean.getZones(ZoneBean.java:27)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at javax.el.BeanELResolver.getValue(BeanELResolver.java:363)
    at com.sun.faces.el.DemuxCompositeELResolver._getValue(DemuxCompositeELResolver.java:176)
    at com.sun.faces.el.DemuxCompositeELResolver.getValue(DemuxCompositeELResolver.java:203)
    at com.sun.el.parser.AstValue.getValue(AstValue.java:138)
    at com.sun.el.parser.AstValue.getValue(AstValue.java:183)
    at com.sun.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:224)
    at com.sun.faces.facelets.el.TagValueExpression.getValue(TagValueExpression.java:109)
    at javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:194)
    at javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:182)
    at javax.faces.component.UIData.getValue(UIData.java:731)
    at javax.faces.component.UIData.getDataModel(UIData.java:1798)
    at javax.faces.component.UIData.setRowIndexWithoutRowStatePreserved(UIData.java:484)
    at javax.faces.component.UIData.setRowIndex(UIData.java:473)
    at com.sun.faces.renderkit.html_basic.TableRenderer.encodeBegin(TableRenderer.java:81)
    at javax.faces.component.UIComponentBase.encodeBegin(UIComponentBase.java:820)
    at javax.faces.component.UIData.encodeBegin(UIData.java:1118)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1755)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1760)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1760)
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:402)
    at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:131)
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.rmi.MarshalException: CORBA MARSHAL 1330446347 Maybe; nested exception is: 
    org.omg.CORBA.MARSHAL: WARNING: IOP00810011: Exception from readValue on ValueHandler in CDRInputStream  vmcid: OMG  minor code: 11 completed: Maybe
    at com.sun.corba.ee.impl.javax.rmi.CORBA.Util.mapSystemException(Util.java:267)
    at com.sun.corba.ee.impl.javax.rmi.CORBA.Util.wrapException(Util.java:696)
    at com.sun.corba.ee.impl.presentation.rmi.StubInvocationHandlerImpl.privateInvoke(StubInvocationHandlerImpl.java:259)
    at com.sun.corba.ee.impl.presentation.rmi.StubInvocationHandlerImpl.invoke(StubInvocationHandlerImpl.java:152)
    at com.sun.corba.ee.impl.presentation.rmi.codegen.CodegenStubBase.invoke(CodegenStubBase.java:227)
    at remote.admin.sessionbeans.__AdminRemoteSessionBeanRemote_Remote_DynamicStub.getZones(remote/admin/sessionbeans/__AdminRemoteSessionBeanRemote_Remote_DynamicStub.java)
    ... 55 more
Caused by: org.omg.CORBA.MARSHAL: WARNING: IOP00810011: Exception from readValue on ValueHandler in CDRInputStream  vmcid: OMG  minor code: 11 completed: Maybe
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
    at com.sun.corba.ee.spi.orbutil.logex.corba.CorbaExtension.makeException(CorbaExtension.java:248)
    at com.sun.corba.ee.spi.orbutil.logex.corba.CorbaExtension.makeException(CorbaExtension.java:95)
    at com.sun.corba.ee.spi.orbutil.logex.WrapperGenerator.handleFullLogging(WrapperGenerator.java:387)
    at com.sun.corba.ee.spi.orbutil.logex.WrapperGenerator.access$400(WrapperGenerator.java:107)
    at com.sun.corba.ee.spi.orbutil.logex.WrapperGenerator$2.invoke(WrapperGenerator.java:511)
    at com.sun.corba.ee.spi.orbutil.proxy.CompositeInvocationHandlerImpl.invoke(CompositeInvocationHandlerImpl.java:99)
    at $Proxy193.valuehandlerReadException(Unknown Source)
    at com.sun.corba.ee.impl.encoding.CDRInputStream_1_0.readRMIIIOPValueType(CDRInputStream_1_0.java:1022)
    at com.sun.corba.ee.impl.encoding.CDRInputStream_1_0.read_value(CDRInputStream_1_0.java:1123)
    at com.sun.corba.ee.impl.encoding.CDRInputObject.read_value(CDRInputObject.java:531)
    at com.sun.corba.ee.impl.io.IIOPInputStream.inputObjectField(IIOPInputStream.java:2162)
    at com.sun.corba.ee.impl.io.IIOPInputStream.inputClassFields(IIOPInputStream.java:2404)
    at com.sun.corba.ee.impl.io.IIOPInputStream.inputObject(IIOPInputStream.java:1224)
    at com.sun.corba.ee.impl.io.IIOPInputStream.simpleReadObject(IIOPInputStream.java:425)
    at com.sun.corba.ee.impl.io.ValueHandlerImpl.readValueInternal(ValueHandlerImpl.java:308)
    at com.sun.corba.ee.impl.io.ValueHandlerImpl.readValue(ValueHandlerImpl.java:274)
    at com.sun.corba.ee.impl.encoding.CDRInputStream_1_0.readRMIIIOPValueType(CDRInputStream_1_0.java:1015)
    at com.sun.corba.ee.impl.encoding.CDRInputStream_1_0.read_value(CDRInputStream_1_0.java:1123)
    at com.sun.corba.ee.impl.encoding.CDRInputStream_1_0.read_value(CDRInputStream_1_0.java:935)
    at com.sun.corba.ee.impl.encoding.CDRInputObject.read_value(CDRInputObject.java:525)
    at com.sun.corba.ee.impl.copyobject.ORBStreamObjectCopierImpl.copy(ORBStreamObjectCopierImpl.java:78)
    at com.sun.corba.ee.impl.copyobject.ORBStreamObjectCopierImpl.copy(ORBStreamObjectCopierImpl.java:65)
    at com.sun.corba.ee.impl.orbutil.copyobject.FallbackObjectCopierImpl.copy(FallbackObjectCopierImpl.java:69)
    at com.sun.corba.ee.impl.orbutil.copyobject.FallbackObjectCopierImpl.copy(FallbackObjectCopierImpl.java:59)
    at com.sun.corba.ee.impl.javax.rmi.CORBA.Util.copyObject(Util.java:771)
    at com.sun.corba.ee.impl.presentation.rmi.DynamicMethodMarshallerImpl.copyResult(DynamicMethodMarshallerImpl.java:473)
    at com.sun.corba.ee.impl.presentation.rmi.StubInvocationHandlerImpl.privateInvoke(StubInvocationHandlerImpl.java:243)
    ... 58 more
Caused by: java.lang.NullPointerException
    at com.sun.corba.ee.impl.orbutil.ClassInfoCache$ClassInfo.<init>(ClassInfoCache.java:156)
    at com.sun.corba.ee.impl.orbutil.ClassInfoCache.get(ClassInfoCache.java:281)
    at com.sun.corba.ee.impl.encoding.CDRInputStream_1_0.read_value(CDRInputStream_1_0.java:1097)
    at com.sun.corba.ee.impl.encoding.CDRInputStream_1_0.read_value(CDRInputStream_1_0.java:935)
    at com.sun.corba.ee.impl.encoding.CDRInputObject.read_value(CDRInputObject.java:525)
    at com.sun.corba.ee.impl.corba.TCUtility.unmarshalIn(TCUtility.java:289)
    at com.sun.corba.ee.impl.corba.AnyImpl.read_value(AnyImpl.java:605)
    at com.sun.corba.ee.impl.encoding.CDRInputStream_1_0.read_any(CDRInputStream_1_0.java:775)
    at com.sun.corba.ee.impl.encoding.CDRInputObject.read_any(CDRInputObject.java:482)
    at com.sun.corba.ee.impl.javax.rmi.CORBA.Util.readAny(Util.java:452)
    at com.sun.corba.ee.impl.io.ValueHandlerImpl.read_Array(ValueHandlerImpl.java:639)
    at com.sun.corba.ee.impl.io.ValueHandlerImpl.readValueInternal(ValueHandlerImpl.java:305)
    at com.sun.corba.ee.impl.io.ValueHandlerImpl.readValue(ValueHandlerImpl.java:274)
    at com.sun.corba.ee.impl.encoding.CDRInputStream_1_0.readRMIIIOPValueType(CDRInputStream_1_0.java:1015)
    ... 77 more 
```

* * *

远程接口：

```
@Remote
public interface AdminRemoteSessionBeanRemote {
    public List<Zone>getZones();
    public int sum(int a, int b);
} 
```

实现上述接口的无状态会话bean：

```
@Stateless
public class AdminRemoteSessionBean implements AdminRemoteSessionBeanRemote {
    @PersistenceContext(unitName="unit-name")
    private EntityManager entityManager;

    @Override
    public List<Zone> getZones() {
        return entityManager.createNamedQuery("Zone.findAll").getResultList();
    }

    @Override
    public int sum(int a, int b) {
        return a + b;
    }
} 
```

JSF 托管 bean：

```
@ManagedBean
@RequestScoped
public class ZoneBean {
    @EJB//(mappedName="remote.admin.sessionbeans.AdminRemoteSessionBeanRemote")
    private AdminRemoteSessionBeanRemote adminRemoteSessionBeanRemote;
    private List<Zone>zones;
    private int sum;

    public ZoneBean(){}

    public List<Zone> getZones() {
        zones=adminRemoteSessionBeanRemote.getZones();
        return zones;
    }

    public void setZones(List<Zone> zones) {
        this.zones = zones;
    }

    public int getSum() {
        sum=adminRemoteSessionBeanRemote.sum(10, 15);
        return sum;
    }

    public void setSum(int sum) {
        this.sum = sum;
    }
} 
```

`sum()`仅返回 an的方法`int`仅用于演示。它按原样工作。

当涉及到一个实体时，就会出现问题，这可以`public List<Zone> getZones()`在 EJB 中导致上述异常的方法中看到。

[![在此处输入图像描述](../Images/bd948b2d0f46c8425d9d85a97f7917d6.png)](https://i.stack.imgur.com/cMNK3.png)

`AdminClassLibrary`[（快照](https://i.stack.imgur.com/qbgpi.png)中突出显示的节点）是包含远程接口和实体类的类库。

如何`java.util.List<entities.Zone>`通过`getZones()`EJB 会话 bean 中的方法返回？

我已单击 Google 显示的有关此异常的所有链接，但无法找到解决方案。

* * *

`Zone`实体。

```
@Entity
@Table(name = "ZONE", catalog = "", schema = "PROJECTDB")
@XmlRootElement
@NamedQueries({
    @NamedQuery(name = "Zone.findAll", query = "SELECT z FROM Zone z ORDER BY z.zoneId DESC"),
    @NamedQuery(name = "Zone.findByZoneId", query = "SELECT z FROM Zone z WHERE z.zoneId = :zoneId"),
    @NamedQuery(name = "Zone.findByZone", query = "SELECT z FROM Zone z WHERE z.zone = :zone")})
public class Zone implements Serializable {
    private static final long serialVersionUID = 1L;
    // @Max(value=?)  @Min(value=?)//if you know range of your decimal fields consider using these annotations to enforce field validation
    @Id
    @Basic(optional = false)
    @NotNull
    @Column(name = "ZONE_ID")
    private BigDecimal zoneId;
    @Size(max = 50)
    @Column(name = "ZONE")
    private String zone;
    @OneToMany(mappedBy = "zoneId", fetch = FetchType.LAZY)
    private List<Country> countryList;
    @OneToMany(cascade = CascadeType.ALL, mappedBy = "zone", fetch = FetchType.LAZY)
    private List<ZoneCharge> zoneChargeList;
    @JoinColumn(name = "TRANSPORTER_ID", referencedColumnName = "TRANSPORTER_ID")
    @ManyToOne(fetch = FetchType.LAZY)
    private Transporter transporterId;

    //Getters and setters + constructor(s) + equals() + hashcode()
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-07T10:10:52.507

问题在于`Zone`类实例的反序列化。它应该`Serializable`并且应该存在于客户端和服务器（本地和远程）上。这也将强加一个依赖关系以将持久性库添加到远程服务器。因此最好不要发送持久性实体。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T03:42:00.180

我刚刚遇到了这个问题的一个例子。我调用的远程方法引发了异常（实际上是 PSQLException）。我认为 PSQLException 被包装并最终序列化并发送给我的客户。我的客户在其类路径中没有 PSQLException，这在 CORBA 的内部似乎没有得到很好的处理。

我通过将调试器连接到客户端应用程序并在 NullPointerException 的构造函数上放置断点来诊断这一点。然后，我能够看到在抛出异常时正在反序列化哪个类。

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-28T10:03:56.717

在尝试从远程 ejb 调用中获取实体集合后，我也得到了错误堆栈跟踪。将jdk升级到1.8_60及以上完全解决了问题。它现在运行得很好，没有错误堆栈。此错误已得到处理

# asp.net - 创建动态水晶报表

> ID：15105277
> 
> 赞同：0
> 
> 时间：2013-02-27T06:03:30.620
> 
> 标签：asp.net, c#-4.0

我有一个包含 3-4 段的报告的 word 文档模板。该报告的内容可以更改。因此，我正在考虑一个选项，由用户上传这个 word 文档模板，或者用户可以在需要打印报告时通过文本框输入。我还需要使用数据库中的数据填充此报告。

是否可以通过水晶报表使用数据库中的数据填充模板 word 文档，或者是否可以通过文本框键入报表内容并使用水晶报表（在 web 应用程序中）使用数据库（sql server 2008）中的数据填充报表.

我正在使用 Visual Studion 2010 和 SAP Crystal Report VS 13。

请指导我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T09:45:02.230

两者都是可能的。要从数据库中获取数据，您可以创建数据集和表。它易于实施。[点击这里创建水晶报表](http://www.c-sharpcorner.com/UploadFile/rsubhajit/CrystalReportwithDataSet03012006060655AM/CrystalReportwithDataSet.aspx)

# windows-7 - 水晶报表和windows 7

> ID：15105280
> 
> 赞同：1
> 
> 时间：2013-02-27T06:04:00.103
> 
> 标签：windows-7, crystal-reports, crystal-reports-2008

我的报告似乎有问题，问题是我试图通过项目窗口文件夹打开水晶报告，通过单击图标 OS 给出“打开方式”选项我选择了 Visual Studios 2008 所以每个扩展名为 .rpt 的文件将作为 Visual Studio 文件打开，图标从水晶报表变成了 Visual Studio 图标，通过报表与数据库的连接出现了一些问题。怎么才能让一切恢复正常......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T05:18:51.340

您右键单击任何 .rpt 文件并选择“打开方式...”

然后，您寻找 Crystal Reports 作为您要启动的默认程序。应该有一个总是复选框来使更改持久化。如果您在列表中没有看到 Crystal Reports，您可能需要选择浏览并转到 c:\program files\business objects 或 c:\program files\crystal reports

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-06T14:47:58.993

我还有一个问题，即使我安装了 Windows 没有将 .rpt 与 Crystal Reports 关联起来。使用 CR 2013 和 Windows 7，我必须“打开方式...”到此路径：C:\Program Files (x86)\SAP BusinessObjects\SAP BusinessObjects Enterprise XI 4.0\win32_x86 并选择 crw32.exe

# android - Android XmlPullParser 错误

> ID：15105283
> 
> 赞同：0
> 
> 时间：2013-02-27T06:04:09.810
> 
> 标签：android, xml-parsing

我找到了如何在 android.com 中解析 XML 的好例子。这是一部分

[http://developer.android.com/training/basics/network-ops/xml.html](http://developer.android.com/training/basics/network-ops/xml.html)

```
private String readLink(XmlPullParser parser) throws IOException, XmlPullParserException     {
    String link = "";
    parser.require(XmlPullParser.START_TAG, ns, "link");
    String tag = parser.getName();
    String relType = parser.getAttributeValue(null, "rel");
    if (tag.equals("link")) {
        if (relType.equals("alternate")) {
            link = parser.getAttributeValue(null, "href");
            parser.nextTag();
        }
    }
    parser.require(XmlPullParser.END_TAG, ns, "link");
    return link;
} 
```

当单个标签中只有一个 LINK 标签时，它可以正确解析。但是当单个标签中有这么多LINK时会输出错误。

请让我知道如何修复此编码以在一个标签中解析多个 LINK 标签。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T06:09:58.127

我不确定您为什么会收到错误，除非您告诉我们错误是什么，但就检查标签而言，您需要使用 while 循环来修复它：

```
parser.require(XmlPullParser.START_TAG, ns, "NameOfParentTag"); //Tag name which "link" tags are embedded in
String link = "";
while (parser.next() != XmlPullParser.END_TAG) {
    if (parser.getEventType() != XmlPullParser.START_TAG) {
        continue;
    }
    String tag = parser.getName();
    String relType = parser.getAttributeValue(null, "rel");
    if (tag.equals("link")) {
        if (relType.equals("alternate")) {
            link = parser.getAttributeValue(null, "href");
            //Break here if you are done looking for what you need
        }
    }
}  
return link; 
```

如果您还提供了要解析的示例 XML，那将会很有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-20T15:58:45.703

您需要将 parser.nextTag() 片段移动到外部 if 语句，如下所示：

```
if (tag.equals("link")) {
    if (relType.equals("alternate")) {
        link = parser.getAttributeValue(null, "href");
    }

    parser.nextTag();
}
parser.require(XmlPullParser.END_TAG, ns, "link");
return link; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-27T06:17:17.300

使用 documentparser 而不是 xmlpullparser.u 在语句 parser.nexttag() 处出错。使用 parser.next() 将检查下一个链接值。

# c# - 从服务器清除“临时 Internet 文件”

> ID：15105288
> 
> 赞同：1
> 
> 时间：2013-02-27T06:05:04.137
> 
> 标签：c#, internet-explorer, winapi, browser-cache, winhttp

基本上我使用[http://support.microsoft.com/kb/326201](http://support.microsoft.com/kb/326201)来清除缓存。

但是在一篇文章[http://msdn.microsoft.com/en-us/library/windows/desktop/aa383990(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383990(v=vs.85).aspx)中提到不能从服务器使用上述 KB。

他们要求使用 WinHTTP，任何人都可以建议我一种方法来实现它。

我在网上搜索，但找不到任何适合此实现的文章。我也是初学者，所以很难实现。

请任何人帮助我...在此先感谢

# cruisecontrol - Cruisecontrol-如何在缺陷移至固定或关闭状态后立即触发构建

> ID：15105289
> 
> 赞同：0
> 
> 时间：2013-02-27T06:05:05.100
> 
> 标签：cruisecontrol

我想知道一旦缺陷转移到固定或关闭状态，是否有任何方法可以触发构建。我使用 ANT 作为构建工具，使用 AccuRev 作为版本控制工具

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-09T15:12:17.133

它可能取决于您的缺陷跟踪器，而不是您的修订控制。反过来考虑这一点可能会有所帮助-例如，您可以配置缺陷跟踪器-（bugzilla/jira/clearddts 等）以触发构建，也许可以使用其余的api。

# android - 如何在无法访问其源代码的情况下管理 android 应用程序？

> ID：15105293
> 
> 赞同：1
> 
> 时间：2013-02-27T06:05:25.723
> 
> 标签：android, ios, mobile

我想在 Android / iOS 应用程序在设备上运行时对其施加某些限制。例如，我想限制复制/粘贴，在此应用程序实例化之前应用身份验证。我不想接触应用程序的源代码。我该怎么做呢？Android/iOS 是否支持此功能？我搜索了很多，但大多数答案都指向 App Wrapping 服务提供商。但我想自己开发解决方案。

请给我一些帮助。

# java - 具有两个列表的类的组合转发方法

> ID：15105295
> 
> 赞同：1
> 
> 时间：2013-02-27T06:05:35.097
> 
> 标签：java, oop, inheritance, arraylist, composition

我已经阅读**了 Effective Java 中的第 16 条，**并且 更[喜欢组合而不是继承？](https://stackoverflow.com/questions/49002/prefer-composition-over-inheritance)现在尝试将它应用到 1 年前编写的代码中，那时我已经开始了解 Java。

我正在尝试模拟一种动物，它可以具有特征，即游泳、食肉等，并获得不同类型的食物。

```
public class Animal {
    private final List<Trait> traits = new ArrayList<Trait>();
    private final List<Food> eatenFood = new ArrayList<Food>();

} 
```

在第 16 条中，建议使用组合转发可重用方法：

```
public class ForwardingSet<E> implements Set<E> {
    private final Set<E> s;
    public ForwardingSet(Set<E> s) {this.s = s;}

    //implement all interface methods
    public void clear() {s.clear();}

    //and so on
}

public class InstrumentedSet<E> extends ForwardingSet<E> {
   //counter for how many elements have been added since set was created
} 
```

我可以实现`ForwardingList<E>`，但我不确定如何在`Animal`课堂上应用两次。现在，`Animal`我有很多方法，例如下面的 for`traits`和 for `eatenFood`。这对我来说似乎很尴尬。

```
public boolean addTrait (Trait trait) {
    return traits.add(trait);
}

public boolean removeTrait (Trait trait) {
    return traits.remove(trait);
} 
```

1.  你将如何重新设计`Animal`课程？

2.  我应该保持原样还是尝试申请`ForwardingList`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T06:11:27.280

您没有理由要专门针对此问题使用列表。您已经在这里使用了 Composition，这几乎是我对课堂的期望。

组合基本上是创建一个具有一个（或通常更多）成员的类。转发实际上是让你的方法简单地调用它持有的对象之一来处理它。这正是您已经在做的事情。

无论如何，您提到的方法正是我所期望的具有 Trait 的类的方法。我希望食物有类似的 addFood / removeFood 方法。如果他们错了，他们就是几乎每个人都会犯的那种错误。

IIRC（我的 Effective Java 副本正在工作）：ForwardingSet 的存在仅仅是因为您无法安全地扩展未明确设计为扩展的类。如果没有记录自我使用模式等，则无法合理地将调用委托给超级方法，因为您不知道 addAll 可能会或可能不会重复调用 add 以实现默认实现。但是，您可以安全地委托调用，因为您委托的对象永远不会调用包装器对象。这绝对不适用于这里；您已经将调用委托给列表。

# java - 如何使用 JOptionPane 和 showMessage Dialog 显示自动垂直滚动条？

> ID：15105299
> 
> 赞同：0
> 
> 时间：2013-02-27T06:05:58.280
> 
> 标签：java, swing, jscrollpane, joptionpane, jscrollbar

我有一个 QuizApplication，它将在用户完成测试后显示结果。我有以下代码，它将测验结果作为字符串返回：

```
public String getResult() {
 int score = 0;
    String[] choices;
    String scoreB = "";
    for (int i = 0; i < test.length; i++) {
        if (test[i].getCorrect() == test[i].getAns()) {
            score++;
        } else {
          choices = test[i].getChoice();
            scoreB += "Question " + (i + 1) + " : " + test[i].getQn() + "\n<html></br>choices[test[i].getCorrect() - 1] + "\n\n";
        }
    } // end of for loop
      return result;
} 
```

然后我想以MessageDialog的形式显示结果，所以我使用了：

```
JOptionPane.showMessageDialog(null, newQuiz.getResult() 
```

但是，我想在`JOptionPane.showMessageDialog`. 我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T06:21:48.057

to 的参数之一[`showMessageDialog`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JOptionPane.html#showMessageDialog%28java.awt.Component,%20java.lang.Object%29)是`Object`. 如果这`Object`是 a `Component`，它将被添加到对话框的视图中。

我不确定您为什么要添加`JScrollBar`到对话框中，但是您需要构造一个`Component`包含您要显示的所有元素并通过 message 参数将其传递给对话框的内容。

查看[如何使用对话框](http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html#features)了解详细信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T10:35:43.083

作为@MadProgrammer[建议](https://stackoverflow.com/a/15105492/230513)的具体示例，此[示例](https://stackoverflow.com/a/14011536/230513)将 a 包装`JTextArea`在 a 中`JScrollPane`并将后者传递给`JOptionPane.showMessageDialog()`. 还可以考虑使用 HTML/CSS 的[替代方案。](https://stackoverflow.com/a/14011645/230513)

![图片](../Images/a87d5874ea864e8c13693583666e913a.png)

# javascript - Node.js 记录日期大于当前客户端日期

> ID：15105301
> 
> 赞同：0
> 
> 时间：2013-02-27T06:06:04.137
> 
> 标签：javascript, node.js, mongodb, date

当我在 mongodb 中为记录日期写入数据时，我在 node.js 中使用 new Date() 并使用 ajax 响应返回该日期。为了计算从 mongodb 中的数据开始经过的时间，我在客户端创建了一个新日期。然后我计算当前日期与来自服务器的日期之间的差异。

这是我的代码：

```
var now = new Date();
var post_date = new Date(date_from_server);
var elapsed = now - post_date/1000;
document.write(elapsed + " seconds elapsed"); 
```

但是，我不知道，记录日期大于当前日期，并且它们之间的第一次差值为-40秒！

请帮助我理解这一点。我想那是我做错了。但是怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T06:08:50.800

似乎服务器和客户端之间的时间设置不同。您可以尝试向服务器发出 getFinalTime 事件，服务器记录第二次并返回给客户端进行计算。

# html - 如何使用 Linux 命令行以编程方式从网页中提取信息？

> ID：15105308
> 
> 赞同：2
> 
> 时间：2013-02-27T06:06:29.993
> 
> 标签：html, linux, extract, html-content-extraction

对于一长串历史日期，我需要提取美元对另一种货币（例如欧元）的汇率。

该`www.xe.com`网站提供了历史查询工具，使用详细的 URL，可以获取特定日期的费率表，无需填充`Date:`和`From:`框。例如，URL [http://www.xe.com/currencytables/?from=USD&date=2012-10-15](http://www.xe.com/currencytables/?from=USD&date=2012-10-15)给出了 2012 年 10 月 15 日当天从美元到其他货币的兑换率表。

现在，假设我有一个日期列表，我可以遍历该列表并更改该 URL 的日期部分以获取所需的页面。如果我可以提取汇率列表，那么 simple`grep EUR`会给我相关的汇率（我可以使用 awk 来专门提取汇率）。

问题是，如何使用 Linux 命令行命令获取页面？我试过`wget`了，但它没有完成这项工作。

如果不是 CLI，是否有一种简单直接的方式来以编程方式执行此操作（即，比将日期复制粘贴到浏览器地址栏所需的时间更少）？

* * *

**更新 1：**

运行时：

```
$ wget 'http://www.xe.com/currencytables/?from=USD&date=2012-10-15' 
```

我得到一个文件，其中包含：

```
<HTML>
<HEAD><TITLE>Autoextraction Prohibited</TITLE></HEAD>
<BODY>
Automated extraction of our content is prohibited.  See <A HREF="http://www.xe.com/errors/noautoextract.htm">http://www.xe.com/errors/noautoextract.htm</A>.
</BODY>
</HTML> 
```

所以看起来服务器可以识别查询的类型并阻止`wget`. 有什么办法吗？

* * *

**更新 2：**

在阅读了`wget`命令的响应和评论/答案后，我检查了网站的 ToS 并找到了这个条款：

```
You agree that you shall not:
...
f. use any automatic or manual process to collect, harvest, gather, or extract
   information about other visitors to or users of the Services, or otherwise
   systematically extract data or data fields, including without limitation any
   financial and/or currency data or e-mail addresses; 
```

我想，这结束了这方面的努力。

* * *

现在，为了我的好奇，如果`wget`生成一个 HTTP 请求，服务器如何知道它是一个命令而不是浏览器请求？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T06:13:13.627

你需要使用`-O`来写STDOUT

`wget -O- http://www.xe.com/currencytables/?from=USD&date=2012-10-15`

但看起来 xe.com 不希望您进行自动下载。我建议不要在 xe.com 上进行自动下载

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-10T04:06:50.110

那是因为 wget 正在发送某些类型的标头，以便于检测。

```
# wget --debug cnet.com | less
[...]
---request begin---
GET / HTTP/1.1
User-Agent: Wget/1.13.4 (linux-gnu)
Accept: */*
Host: www.cnet.com
Connection: Keep-Alive
[...] 
```

注意

```
User-Agent: Wget/1.13.4 
```

我认为如果你改变它

```
Mozilla/5.0 (Macintosh; Intel Mac OS X 10_9_2) AppleWebKit/537.75.14 (KHTML, like Gecko) Version/7.0.3 Safari/537.75.14 
```

它会起作用的。

```
# wget --header='User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_9_2) AppleWebKit/537.75.14 (KHTML, like Gecko) Version/7.0.3 Safari/537.75.14' 'http://www.xe.com/currencytables/?from=USD&date=2012-10-15' 
```

从这里开始，这似乎工作正常。:D

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T06:27:40.723

您是否访问了回复中的链接？

**从[http://www.xe.com/errors/noautoextract.htm](http://www.xe.com/errors/noautoextract.htm)：**

> 我们确实提供了许多许可选项，允许您将 XE.com 货币功能整合到您的软件、网站和服务中。如需更多信息，请通过以下方式联系我们：
> 
> ```
> XE.com Licensing
> +1 416 214-5606
> licensing@xe.com 
> ```
> 
> 您会意识到我们在创建和维护我们的网站上所花费的时间、精力和费用是相当可观的。我们的服务和数据是专有的，是多年努力的结果。未经授权使用我们的服务，即使是由于一个简单的错误或未能阅读使用条款，也是不可接受的。

这听起来像是您可以使用的 API，但您必须为此付费。不用说，您应该尊重这些条款，而不是试图绕过它们。

# javascript - JQuery SVG：笔划线连接：圆形

> ID：15105309
> 
> 赞同：0
> 
> 时间：2013-02-27T06:06:33.170
> 
> 标签：javascript, svg, jquery-svg

我正在尝试使笔划线具有圆形连接。为什么下面的代码不起作用？

请参阅[此 JSFiddle](http://jsfiddle.net/y6U6Q/1/)。

```
$('body').svg({onLoad: function(svg){
    var path = svg.createPath();
    svg.path(
        path.move( 50, 50 )
        .line( 300, 0, true )
        .line( 0, 300, true )
        .line( -300, 0, true )
        .close(),
        {
            fill: 'none', 
            stroke: '#888', 
            strokeWidth: 30,
            strokeLinejoin: 'round'
        }
    );  
}}); 
```

根据[这个 OReilly 文档](http://oreilly.com/catalog/svgess/chapter/ch03.html)，我需要的样式属性和值是`stroke-linejoin`and `round`。并根据 JQuery-SVG 文档：

> 在 SVG 中包含破折号 (-) 的附加设置应以驼峰式书写，不带破折号

所以我不明白为什么它不起作用。

谢谢

更新：我在[这里分叉了 JSFiddle](http://jsfiddle.net/fpnq6/)，似乎在输出 SVG XML 时，它没有将驼峰式属性转换为带有破折号的属性。现在只是想弄清楚如何纠正它。它输出的 SVG XML 是：

```
<svg version="1.1" width="400" height="400">
    <path d="M50,50l300,0l0,300l-300,0z" fill="none" stroke="#888" stroke-width="30"
         strokeLinejoin="round"></path>
</svg> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T06:29:59.217

我不得不改变：

```
strokeLinejoin: 'round' 
```

至：

```
strokeLineJoin: 'round' 
```

# linux - Linux内核系统调用命名约定

> ID：15105313
> 
> 赞同：2
> 
> 时间：2013-02-27T06:06:51.927
> 
> 标签：linux, linux-kernel

Linux 内核使用 SYSCALL_DEFINEn 作为系统调用入口点的名称。我知道它是一个宏，最后被 sys_sycallname() 取代，'n' 是它们采用的参数数量。该约定是否仅用于可读性或任何其他特定目的？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T10:15:47.787

没有。

过去，系统调用不是以这种方式定义的。定义系统调用的新方法，即使用 SYSCALL_DEFINEx() 宏，用于修复安全问题。

例如，以下提交是修复之一：

```
commit 1a94bc34768e463a93cb3751819709ab0ea80a01
Author: Heiko Carstens <heiko.carstens@de.ibm.com>
Date:   Wed Jan 14 14:13:59 2009 +0100

    [CVE-2009-0029] System call wrapper infrastructure

    From: Martin Schwidefsky <schwidefsky@de.ibm.com>

    By selecting HAVE_SYSCALL_WRAPPERS architectures can activate
    system call wrappers in order to sign extend system call arguments.

    All architectures where the ABI defines that the caller of a function
    has to perform sign extension probably need this. 
```

您可以在[CVS 页面](http://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2009-0029)中找到有关此问题的更多描述：

> s390、powerpc、sparc64 和 mips 64 位平台上的 Linux 内核 2.6.28 和更早版本中的 ABI 要求从用户模式应用程序发送时，64 位寄存器中的 32 位参数经过正确符号扩展，但无法验证这一点，这允许本地用户导致拒绝服务（崩溃）或可能通过精心设计的系统调用获得特权。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T09:37:57.493

我觉得你的想法是有道理的。

但我也认为进一步阅读 SYSCALL_DEFINEn 代码有助于了解参数在用户空间和内核空间之间传递的方式，以及如何捕获到内核空间。因为这些代码是依赖于 CPU 架构的，尽管基本思想是通用的。

# c# - 在我保存之前如何检查工作项是否被修改

> ID：15105318
> 
> 赞同：1
> 
> 时间：2013-02-27T06:07:00.413
> 
> 标签：c#, .net, tfs, workitem

我在保存工作项时遇到问题。场景是我有一个 Web 应用程序，从那里我向 TFS 发送值。我可以在这两个地方更改值（也可以通过 TFS 的 Web 应用程序）。我现在面临的问题是

当我尝试在 TFS 中保存工作项时，它会检查自您打开它以来是否进行了任何更改。如果是这样，则不允许您保存。当我从 Web 应用程序保存时没有这样的检查，我使用了 workitem.isvalid 方法，在我从 Web 应用程序保存之前它仍然没有检查修改的工作项。

这是我的代码

```
wi.Open();

foreach (var str in piWorkItemTfs.Values.Keys)
    wi[str] = piWorkItemTfs.Values[str];

if (!wi.IsValid())
{
    var listFelaktigaVärde = (from Field field in wi.Validate() select field.Name + "=" + field.Value).ToList();

    errorMessage = "Felaktiga värde: Id " + wi.Id + " " + String.Join(", ", listFelaktigaVärde);
}
else
{
    wi.Save();
    errorMessage = wi.Id.ToString();
} 
```

请任何人帮助我避免并发问题。我只需要保存工作项，之前没有进行任何更改，否则我已向最终用户显示错误消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T18:14:57.527

工作项上的`IsValid()`方法只验证工作项上的字段是否正确，它不检查工作项是否在其他地方发生了变化。调用的工作项对象上有一个标志，`IsDirty`用于检查工作项自上次保存后是否已更改。

附带说明一下，您显示为错误消息的字段只是不符合工作项类型定义规则的字段（即超出其定义的字段的值`AllowedValues`）。这应该被检查，但检查自上次保存后它是否已更改应该显示不同的错误。

`WorkItem`这是该课程的 MSDN 链接：http: [//msdn.microsoft.com/en-us/library/microsoft.teamfoundation.workitemtracking.client.workitem (v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/microsoft.teamfoundation.workitemtracking.client.workitem%28v=vs.110%29.aspx)

**编辑**

该`IsDirty`标志将确定工作项是否已在本地修改。相反，检查服务器端保存的方法是在保存工作项的同时尝试合并。

```
workItem.Save(SaveFlags.MergeAll); 
```

该`IsValid`标志用于本地更改，而不是服务器更改。使用该选项保存工作项`SaveFlags.MergAll`将进行检查，如果工作项已保存在服务器端，则抛出异常。

# neo4j - 在 HA 模式下运行 neo4j 企业的问题

> ID：15105321
> 
> 赞同：0
> 
> 时间：2013-02-27T06:07:14.283
> 
> 标签：neo4j, node-neo4j

我正在尝试设置 3slave 和 1master。请看下面的这个错误，为什么它会超时？

```
$ neo4j start
WARNING! You are using an unsupported Java runtime. Please use JDK 6.
Starting Neo4j Server...12:39:19,754 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Could NOT find resource [logback.groovy]
12:39:19,754 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Could NOT find resource [logback-test.xml]
12:39:19,754 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Found resource [logback.xml] at [jar:file:/home/training/neo4j-enterprise-1.8.1/system/lib/neo4j-server-1.8.1.jar!/logback.xml]
12:39:19,809 |-INFO in ch.qos.logback.core.joran.spi.ConfigurationWatchList@46165b7e - URL [jar:file:/home/training/neo4j-enterprise-1.8.1/system/lib/neo4j-server-1.8.1.jar!/logback.xml] is not of type file
12:39:20,126 |-INFO in ch.qos.logback.classic.joran.action.ConfigurationAction - debug attribute not set
12:39:20,128 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - About to instantiate appender of type [ch.qos.logback.core.ConsoleAppender]
12:39:20,134 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - Naming appender as [STDOUT]
12:39:20,196 |-INFO in ch.qos.logback.core.joran.action.NestedComplexPropertyIA - Assuming default type [ch.qos.logback.classic.encoder.PatternLayoutEncoder] for [encoder] property
12:39:20,341 |-INFO in ch.qos.logback.classic.joran.action.RootLoggerAction - Setting level of ROOT logger to INFO
12:39:20,341 |-INFO in ch.qos.logback.core.joran.action.AppenderRefAction - Attaching appender named [STDOUT] to Logger[ROOT]
12:39:20,343 |-ERROR in ch.qos.logback.core.joran.action.IncludeAction - Could not find resource corresponding to [custom-logback.xml]
12:39:20,347 |-INFO in ch.qos.logback.classic.joran.JoranConfigurator@65d0d124 - Registering current configuration as safe fallback point

WARNING: not changing user
process [4490]... waiting for server to be ready................................................................................................................................................................................................................. Failed to start within 120 seconds.
Neo4j Server failed to start, please check the logs for details.
If startup is blocked on a long recovery, use '/home/training/neo4j-enterprise-1.8.1/bin/neo4j start-no-wait' to give the startup more time.
training@node01:~$ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T12:25:24.080

在第一个错误行中：`You are using an unsupported Java runtime. Please use JDK 6.` 我也遇到了同样的问题，必须安装最新的 Java 开发工具包。比它起作用了。但它只是一个服务器实例，也许在你的多服务器情况下它不会有帮助。

# java - 使用多部分发送附加数据

> ID：15105322
> 
> 赞同：11
> 
> 时间：2013-02-27T06:07:14.790
> 
> 标签：java, jsp, servlets, file-upload, apache-commons-fileupload

我正在使用从.（使用和）`apache-commons-fileupload`获取文件。`client``server``JSP``Servlet`

**JSP/HTML**

```
<form method="POST" action="GetFile" enctype="multipart/form-data">
<input type="file" name="datafile">
<input type="text" name="text1">
<input type="submit" value="Next">
</form> 
```

**小服务程序：GetFile**

```
System.out.println(request.getParameter("text1")); 
```

我能够将文件上传到服务器，但我无法获取 中的值`text1`（`servlet`我正在获取中的`null`值），我需要在表单中提交一些附加信息，同时将其上传到.`text1``servlet``textfield``server`

*   表单选项是否`enctype="multipart/form-data"`不允许提交其他表单数据？如果它不允许，那么我必须将其他选项发送`textfield`到`server`.
*   或者我的代码中还有其他问题吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-27T06:17:24.393

> 表单选项是否`enctype="multipart/form-data"`不允许提交其他表单数据？如果它不允许，那么我必须将此附加文本字段发送到服务器的其他选项是什么。

不，使用没有问题`enctype="multipart/form-data"`。您可以获取其他字段，然后以这种形式提交。

> 或者我的代码中还有其他问题吗？

是的，就目前而言。使用`enctype="multipart/form-data"`时不能通过使用直接获取参数`request.getParameter(name);`。在使用它时，表单字段不能作为请求的参数，它们包含在流中，因此您无法以正常方式获取它。[您可以在使用 commons-fileupload# *Processing the upload items*](http://commons.apache.org/proper/commons-fileupload/using.html#Processing_the_uploaded_items)的文档中找到一种方法。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-02-27T06:36:05.057

那么参数并没有丢失，只是它们是请求流的一部分。

您必须从请求中获取所有项目并根据项目类型进行相应的迭代和处理

```
List  items = upload.parseRequest(request); 
```

这是你如何得到它

```
// Process the uploaded items
Iterator iter = items.iterator();
while (iter.hasNext()) {
    FileItem item = (FileItem) iter.next();

    if (item.isFormField()) {

      String name = item.getFieldName();//text1
      String value = item.getString();

    } else {
        processUploadedFile(item);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-20T09:57:09.047

```
MultipartRequest req = new MultipartRequest(request, UPLOAD_PATH, 1024 * 1024 * 1024);
    out.print(req.getParameter("contractNo"));
    out.println("<BR>");
    Enumeration files = req.getFileNames();
    while (files.hasMoreElements()) {
        String name = (String) files.nextElement();
        String filename = req.getFilesystemName(name);
        String type = req.getContentType(name);
        File uploadedFile = req.getFile("xlFile");
        FileInputStream fis = new FileInputStream(uploadedFile);
        BufferedReader in = new BufferedReader(new InputStreamReader(fis));

        FileWriter fstream = new FileWriter(UPLOAD_PATH + name, true);
        BufferedWriter out11 = new BufferedWriter(fstream);

        String aLine = null;
        while ((aLine = in.readLine()) != null) {
            //Process each line and add output to Dest.txt file
            out11.write(aLine);
            out11.newLine();
        }

        // do not forget to close the buffer reader
        in.close();

        // close buffer writer
        out11.close();
    } 
```

上面的代码将读取文件以及其他表单数据只是看看对象的`req.getParameter();`方法`MultipartRequest req`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-27T14:04:24.557

1.  下载 jar 文件 com.oreilly.servlet.MultipartRequest
2.  导入`com.oreilly.servlet.MultipartRequest`你的 servlet/.java 文件中包含的`Web-Inf/classes`
3.  在您的 servlet`doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {`方法中添加

    MultipartRequest m=new MultipartRequest(request, "C:\SavingDirectory");

然后从下面的表格中调用您的变量；

```
String pdate = m.getParameter("plandate"); 
```

并从 servlet 打印它们，例如`out.println(pdate);`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-05T08:48:08.427

在 Servlet 中检索 HTML 表单字段的最佳做法是使用 apache commons-fileupload 1.3 jar。

使用迭代器遍历多部分 HTTPServletRequest 并使用 for 循环检查是否为 isFormField()，然后

```
 String item1=null,item2=null,item3=null;

    if(item.isFormField())
    {

        if(item.getFieldName().equals("field1"))
        {   
          item1=item.getString();
        }

        if(item.getFieldName().equals("field2"))
        {   
             item2=item.getString();
        }

        if(item.getFieldName().equals("field3"))
        {   
             item3=item.getString();
        }

    } 
```

你的 HTML 文件应该是这样的

```
<html>
<body>
<form action="servletname" method="post" enctype="multipart/form-data">

<input type="text" name="field1">
<input type="text" name="field2">
<input type="text" name="field3">
<input type="file" name="filetoupload">
<input type="submit" value="Upload">  

</form>
</body>
</html> 
```

# wpf - 焦点在网页中时 WPF 选项卡项触发器不起作用

> ID：15105327
> 
> 赞同：2
> 
> 时间：2013-02-27T06:07:51.543
> 
> 标签：wpf, selected, tabitem

在 WPF 中，“选项卡控件”有两个“选项卡项”。第二个选项卡项有一个 WebBrowser 控件来显示网页。在第二个选项卡项中，单击网页内部/向下滚动网页并移动到第一个选项卡项并单击它。它不起作用（可能焦点仍在网页中）。如何让它工作？

# php - php auto 转到下一页并抓取

> ID：15105328
> 
> 赞同：0
> 
> 时间：2013-02-27T06:07:55.100
> 
> 标签：php

我是 Php 的新手，我正在尝试编写一个抓取亚马逊产品标题的工具现在，我可以抓取第一页，但我需要该工具才能转到下一页，直到没有页面剩下并执行相同的任务正在抓取的第一页。这是代码：

```
 <?php
$file_string = file_get_contents('http://www.amazon.com/s/ref=lp_3737671_pg_1?rh=n%3A1055398%2Cn%3A%211063498%2Cn%3A3206324011%2Cn%3A3737671&page=1&ie=UTF8&qid=1361609819');
preg_match_all('/<span class="lrg bold">(.*)<\/span>/i', $file_string, $links);
for($i = 0; $i < count($links[1]); $i++) {
echo $links[1][$i] . '<br>';
}

?> 
```

任何帮助表示感谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T06:24:03.187

要将所有页面 HTML 作为一个变量，这可以解决问题

```
 <?php

    $html = '';

    $file_string = file_get_contents('http://www.amazon.com/s/ref=lp_3737671_pg_1?rh=n%3A1055398%2Cn%3A%211063498%2Cn%3A3206324011%2Cn%3A3737671&page=1&ie=UTF8&qid=1361609819');
    preg_match_all('/<span class="lrg bold">(.*)<\/span>/i', $file_string, $links);
    for($i = 0; $i < count($links[1]); $i++) {
        $html .= file_get_contents($links[1][$i]);
    }

    echo "all pages combined:\n".$html;

    ?> 
```

但是，您的服务器很可能会超时、内存不足或出现其他问题。要抓取 HTML 内容，最好先创建一个 URL 列表，然后一次抓取一个。您可以通过一个通过 AJAX 调用刮板的 HTML 页面来执行此操作。

# naudio - NAudio 的问题

> ID：15105330
> 
> 赞同：1
> 
> 时间：2013-02-27T06:08:04.600
> 
> 标签：naudio

我目前正在使用 NAudio 进行音频输出。一切都很好，除了背景中有烦人的回声。我怎样才能消除这种噪音？

谢谢，亚当

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T10:22:28.320

如果您没有将耳机用于网络聊天程序，则接收到的音频可能会再次被麦克风记录下来，从而产生烦人的回声。Skype 等程序使用一些相当复杂的回声抑制算法来检测和消除这些回声。不幸的是，NAudio 不包含这样的算法，因此您需要找到第三方，或者自己编写。

# javascript - 如何从 json 文件中获取子菜单

> ID：15105336
> 
> 赞同：1
> 
> 时间：2013-02-27T06:08:20.683
> 
> 标签：javascript, jquery, css, json, menu

我的任务是从 json 文件中执行水平菜单。通过这样做，我没有得到子子项。我的 json 文件是

```
var data = [{
    "menu":[
        {
            "MenuId":1,
            "MenuName":"Home",
            "MenuLink":null,
            "Action":null,
            "Controller":null,
            "ParentID":null,
            "SortOrder":1,
            "ModuleId":null,
            "Menus":{
            }
        },
        {
            "MenuId":2,
            "MenuName":"New Transaction",
            "MenuLink":null,
            "Action":null,
            "Controller":null,
            "ParentID":null,
            "SortOrder":2,
            "ModuleId":null,
            "Menus":{
            }
        },
        {
            "MenuId":3,
            "MenuName":"Portfolio",
            "MenuLink":null,
            "Action":null,
            "Controller":null,
            "ParentID":null,
            "SortOrder":3,
            "ModuleId":null,
            "Menus":{
            }
        },
        {
            "MenuId":4,
            "MenuName":"Analytics",
            "MenuLink":null,
            "Action":null,
            "Controller":null,
            "ParentID":null,
            "SortOrder":4,
            "ModuleId":null,
            "Menus":{
            }
        },
        {
            "MenuId":5,
            "MenuName":"Instructions",
            "MenuLink":null,
            "Action":null,
            "Controller":null,
            "ParentID":null,
            "SortOrder":5,
            "ModuleId":null,
            "Menus":{
            }
        },
        {
            "MenuId":6,
            "MenuName":"Data Upload",
            "MenuLink":null,
            "Action":null,
            "Controller":null,
            "ParentID":null,
            "SortOrder":6,
            "ModuleId":null,
            "Menus":{
            }
        },
        {
            "MenuId":7,
            "MenuName":"Administration",
            "MenuLink":null,
            "Action":null,
            "Controller":null,
            "ParentID":null,
            "SortOrder":7,
            "ModuleId":null,
            "Menus":[
                {
                    "MenuId":8,
                    "MenuName":"Masters",
                    "MenuLink":null,
                    "Action":null,
                    "Controller":null,
                    "ParentID":7,
                    "SortOrder":1,
                    "ModuleId":null,
                    "Menus":[
                        {
                            "MenuId":10,
                            "MenuName":"Currency",
                            "MenuLink":"/Currencies/Index",
                            "Action":"Index",
                            "Controller":"Currencies",
                            "ParentID":8,
                            "SortOrder":1,
                            "ModuleId":null,
                            "Menus":{
                            }
                        },
                        {
                            "MenuId":11,
                            "MenuName":"Country",
                            "MenuLink":"/Countries/Index",
                            "Action":"Index",
                            "Controller":"Countries",
                            "ParentID":8,
                            "SortOrder":2,
                            "ModuleId":null,
                            "Menus":{
                            }
                        }
                    ]
                },
                {
                    "MenuId":9,
                    "MenuName":"User Management",
                    "MenuLink":null,
                    "Action":null,
                    "Controller":null,
                    "ParentID":7,
                    "SortOrder":2,
                    "ModuleId":null,
                    "Menus":{
                    }
                }
            ]
        }
    ]
}
];
$(function() {
for(var i = 0, j = data[0].menu.length; i<j; i++) {
    var root_menu = data[0].menu[i];
    if(root_menu.hasOwnProperty("MenuId")) {
        $("#menu").append('<li><a href="#" class="parent-menu">' + root_menu.MenuName + '</a></li>');
        if(root_menu.hasOwnProperty("Menus") && root_menu.Menus.length > 0) {
            $("#menu").append("<li><ul class='child-list' id='menu_" + root_menu.MenuId + "'>");
            for(var n = 0, m = root_menu.Menus.length; n<m; n++) {
                var sub_menu = root_menu.Menus[n];
                if(sub_menu.hasOwnProperty("MenuId")) {
                    $("#menu_" + root_menu.MenuId).append("<li class='nav-child'>" + sub_menu.MenuName + "</li>");
                }
            }
            $("#menu").append("</li></ul>");
        }
    }
}
}); 
```

如何使用此 json 文件获取子子项？[您可以从http://jsfiddle.net/JcU4G/9/](http://jsfiddle.net/JcU4G/9/)看到我的代码 在此管理菜单中有两个子菜单，该子菜单有另一个子菜单。在小提琴中，您可以看到子菜单位于主页下。但实际上我想要管理菜单下的子菜单，这些子菜单主包含另一个大子菜单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T06:47:15.887

您*可以*通过`data[0].menu`但`data`变量不是 JSON 来获得它；它是一个数组。您需要去掉变量开头和结尾的方括号。

代替：

```
var data = [{
  menu: [
    {
       'Menu1' 
```

你要：

```
var data = {
  menu: [
    {
       'Menu1' 
```

现在`data`是一个对象。从那里，您的`for`循环将迭代对象中的键而不是计数。

```
for(var key in data.menu) {
    var root_menu = data.menu[key]; 
```

我已经更新了你的小提琴；希望这是您正在寻找的。

编辑：http: [//jsfiddle.net/buUtB/1/](http://jsfiddle.net/buUtB/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T06:45:47.270

您可以使用递归函数。

我发布的代码不会创建菜单，它只是将每个菜单名称记录到控制台。但是，它确实演示了您需要如何迭代对象。您需要用代码替换日志代码以呈现您的菜单。

```
for (var i in data[0].menu) {
    logMenu(data[0].menu[i]);
}

function logMenu(menuNode) {
    console.log(menuNode.MenuName);
    for (var i in menuNode.Menus) {
        logMenu(menuNode.Menus[i]);
    }
} 
```

请注意，该函数会为每个子菜单调用一次自身。

您可能需要传递一个“父”参数，以便知道每个子菜单项属于哪个菜单项。如果 'parent' 参数为空，那么您就知道要在页面上创建一个新的根菜单元素，而不是子菜单元素。

例如

```
for (var i in data[0].menu) {
    logMenu(data[0].menu[i], null);
}

function logMenu(menuNode, parent) {
    if (parent == null) {
        //Render root menu element in HTML
    } else {
        //Render sub menu element in HTML related to parent
    }
    for (var i in menuNode.Menus) {
        logMenu(menuNode.Menus[i], menuNode);
    }
} 
```

# git - 带有部分合并的 git pull

> ID：15105337
> 
> 赞同：2
> 
> 时间：2013-02-27T06:08:29.527
> 
> 标签：git

我的存储库中有 20 个文件 foo1.c,foo2.c,...foo20.c 我正在处理 foo2.c

现在，每当我执行 git pull 时，它都会拉入并合并对所有 foo*.c 的更改，包括 foo2.c 我想防止自动合并在我的存储库中修改的文件。

例如，有人可能在文件中的某个位置添加了 x=20，这覆盖了我在文件顶部对 x=0 的修改。

将 Bob 的更改与我的更改自动合并可能会导致难以检测到错误，如果其中一个错误有可能随机重启火星探测器，我希望在合并之前手动检查每个更改。

因此，在这种背景下，我想知道是否有办法让我提取（提取+合并）在我的仓库中未修改的文件，并且只提取影响我正在修改的文件的更改，以便我可以进行手动差异+合并

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T06:41:30.773

1.  不要使用全局变量。
2.  使用代码审查而不是这样做..
3.  或者在最坏的情况下，您可以执行 git diff 并查看 bob 发生了什么变化......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T19:33:07.557

在本地分支上工作，仅拉入官方分支，准备好后在相应的官方（已发布）分支上合并/重新调整您的更改，将结果推送到上游。没有“Bob 的更改合并到 Alice 完成一半的工作中，一切都搞砸了，QA 的 Charlie 搞砸了”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T06:22:02.937

您可以在[`.gitattributes`](http://git-scm.com/docs/gitattributes)文件中指定您希望您的 foo2.c 版本是合并期间考虑的版本：

```
foo2.c merge=ours 
```

（来自[gitattributes 页面](http://git-scm.com/book/ch7-2.html)。不过，您需要[激活该驱动程序](https://stackoverflow.com/a/14099431/6309)）

# visual-c++ - 获取蓝牙低功耗设备的设备句柄

> ID：15105343
> 
> 赞同：2
> 
> 时间：2013-02-27T06:09:08.927
> 
> 标签：visual-c++, windows-8, bluetooth-lowenergy

我有一个蓝牙低功耗设备，我需要从 PC 发送一些值。我需要将此设备连接到 Windows 8 PC，并且应该从我的应用程序（Visual C++，win 32 应用程序）与其通信。我已经知道设备的硬件 ID 和友好名称。

是否有任何 API 可以使用此 ID/友好名称建立与设备的连接，并提供设备句柄，以便我可以使用 GATT API 向设备发送值。[http://msdn.microsoft.com/en-us/library/windows/hardware/hh450825(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/hardware/hh450825(v=vs.85).aspx)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T07:21:50.603

[http://code.msdn.microsoft.com/windowshardware/Bluetooth-Generic-4f4ea968](http://code.msdn.microsoft.com/windowshardware/Bluetooth-Generic-4f4ea968)

低功耗蓝牙与 NFC 一样被视为 Network.Proximity。

# python - 如何在拉力赛开发中创建 pyral 配置文件？

> ID：15105345
> 
> 赞同：0
> 
> 时间：2013-02-27T06:09:11.517
> 
> 标签：python, rally, pyral

我正在尝试使用 python REST API 来访问 Rally 的内容。在阅读我时，他们提到使用配置文件作为服务器名称、用户凭据等。我在哪里可以创建配置文件以及我需要在该配置文件中放入哪些内容。

请帮助我...谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T00:18:24.840

要在使用 pyral 运行程序时使用配置文件，请在命令行上使用 --conf= 参数语法。请注意，您不需要指定配置文件名的“.cfg”后缀部分。

此外，在指定 --conf 部分时，pyral 提供了一些相当宽松的语法。除了 --conf=... 语法之外，您还可以使用 --config=... 或 --cfg=... 或 --rallyConfig=... 。

在使用 pyral 的 Python 脚本中，您需要导入 rallySettings 并包含一些包含变量定义等的代码。下面是一个使用名为 sample.conf 的配置文件内容的调用序列示例：

```
python test_prog.py --conf=sample 
```

示例.conf：

```
 SERVER    = rally1.rallydev.com  
 USER      = your_Rally_user_name@your_company.com
 PASSWORD  = your_Rally_password
 WORKSPACE = Your Rally Workspace 
 PROJECT   = Your Rally Project 
```

# joomla - Joomla 用户登录显示特定的用户文件

> ID：15105349
> 
> 赞同：0
> 
> 时间：2013-02-27T06:09:28.043
> 
> 标签：joomla

有谁知道 Joomla 的简单模块或扩展等可以使管理员上传与特定用户登录相关的文件？

例如，他们有一堆用户帐户，并且希望网站上的注册区域能够显示仅与该用户凭据相关的文件。

在后端，他们很容易想要添加一个文档并选择哪个用户可以看到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T06:14:34.313

您可能想在[这里查看“组件访问权限”扩展](http://extensions.joomla.org/extensions/access-a-security/site-access/backend-a-full-access-control/13524)

# c - 为什么局部常量变量不去 .rodata 部分？

> ID：15105350
> 
> 赞同：2
> 
> 时间：2013-02-27T06:09:30.497
> 
> 标签：c, compiler-construction, constants, elf

```
#include <stdio.h>

void inc(int* p) {
        *p = *p + 1;
}

int main() {
        const int a = 10;
        inc(&a);
        printf("%d\n",a);
} 
```

上面的程序编译没有任何错误，输出为 11，因为局部变量 'a' 进入堆栈。

所以我的问题是：

1.  为什么'a'进入堆栈。我期待它进入 .rodata 部分。但为什么没有呢？
2.  而如果我将“a”声明为全局常量变量，它将进入 .rodata 部分。

这让我很开心！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T07:07:58.600

除了名称表示`const`不在 C 中声明常量，而是在不可修改的变量中声明。它*必须*在“堆栈”上实现它，因为函数的递归调用必须导致该变量的不同实例化。（这些可以通过它们的地址来区分。）在您的情况下，您的函数不会递归导致可能的优化，但不一定要采用这种优化路径。

至于违反`const`属性，每个编译器都必须给你一个“诊断”，这是你自己承担的风险。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T06:12:35.777

编译器可以为所欲为。如果你声明它，`static`你可能会得到你正在寻找的行为。

在这种特定情况下，您会通过尝试修改一个`const`值来导致未定义的行为，所以*实际上*所有的赌注都没有了。

例如，我刚刚在这里用[clang](http://clang.llvm.org)构建了你的确切程序，我得到了`10`. `const`它确实给出了关于丢弃限定符的警告：

```
example.c:9:13: warning: passing 'const int *' to parameter of type 'int *' discards qualifiers [-Wincompatible-pointer-types]
        inc(&a);
            ^~
example.c:3:15: note: passing argument to parameter 'p' here
void inc(int* p) {
              ^
1 warning generated. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T18:01:11.790

在 C 中，“常量变量”实际上是*您*承诺不会更改的变量，仅此而已。如果它是函数的局部变量，则它会像任何其他变量一样被创建、初始化和销毁​​。唯一不同的是，如果你（公开地）试图改变它，你会被吓到。IE：

```
const int a = 15;
...
a = 17;  /* error: assignment of read-only variable ‘a’ */
...
int *p = (int *) &a;
...
*p = 117; /* Just fine, will even work making a == 117 */ 
```

# java - 有什么方法可以在不实际加入该表的情况下从实体获取字段？

> ID：15105355
> 
> 赞同：0
> 
> 时间：2013-02-27T06:10:26.233
> 
> 标签：java, jpa

我不确定这是否可能，但只知道 JPA 的基础知识，我想问一下是否可能。基本上我有一个实体（我们称之为`MyEntity`），上面有一堆字段。我们现在想要一个第二个实体，它具有所有相同的字段`MyEntity`以及一些它自己的字段。用例是归档这些实体。我们希望将所有归档实体存储在单独的表中，`MyEntity`这样我们就不必使用`archived=false`. JPA 注释`MyEntity`看起来像这样：

```
@Entity
@Inheritance(strategy=InheritanceType.SINGLE_TABLE)
@DiscriminatorColumn(name="TYPE")
public abstract class MyEntity
{
    .... 
```

有多个类扩展了这个抽象类，每个类都有`@DiscriminatorValue`注释

对于我的存档实体 ( `MyArchivedEntity`)，我想要一些类似的东西：

```
@Entity
public class MyArchivedEntity
{
    private MyEntity entity;
    private String archiveSpecificField;
    .... 
```

当然，这个问题是它想要加入`MyEntity`表并获得一个特定的`MyEntity`记录来填充该`entity`字段。是否有某种注释或我可以做些什么来将该实体（）中的相同字段/列获取`MyEntity`到该实体（`MyArchivedEntity`）中？

就像我在开始时所说的那样，我不确定这是否可能，但我希望我已经充分解释了我想要实现的最终目标，以便有一些方法可以实现它。如果有什么不同，我将 PostgreSQL 与 EclipseLink 一起使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T13:59:48.040

您可以做的是`@MappedSuperclass`在 AbstractParentEntity 上使用成为 和 的超`MyEntity`类`MyArchiveEntity`。因此，您将拥有以下内容：

```
@MappedSuperclass
public abstract class AbstractParentEntity {
    public String someField;
    ...
}

@Entity
@Inheritance(strategy=InheritanceType.SINGLE_TABLE)
@DiscriminatorColumn(name="TYPE")
public abstract class MyEntity extends AbstractParentEntity 
{
   //here you don't have any field (they all move to  AbstractParentEntity
   // (or, at least all the fields that need to be archivied are now declared in parent class)
   ....
}

@Entity
public class MyArchivedEntity extends AbstractParentEntity  
{
    private String archiveSpecificField;
    .... 
```

更多关于 MappedSuperclass[的信息](http://en.wikibooks.org/wiki/Java_Persistence/Inheritance#Mapped_Superclasses)：

> 映射超类继承允许在对象模型中使用继承，当它在数据模型中不存在时。它类似于按类继承的表，但不允许查询、持久化或与超类建立关系。它的主要目的是允许映射信息被它的子类继承。子类负责定义表、id 和其他信息，并且可以修改任何继承的映射。映射超类的一个常见用法是为您的应用程序定义一个公共 PersistentObject 来定义公共行为和映射，例如 id 和版本。映射的超类通常应该是抽象类。映射的超类不是实体，而是通过 @MappedSuperclass 注释或`<mapped-superclass>`元素定义的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T15:17:39.730

您可能希望查看 EclipseLink 的历史支持。它可以自动维护一个历史存档表。

见， [http://wiki.eclipse.org/EclipseLink/Examples/JPA/History](http://wiki.eclipse.org/EclipseLink/Examples/JPA/History)

另一种选择是使用 orm.xml 将另一个持久性单元中的相同类映射到存档表。

# java - 地址在本地计算机上无效 [仅在 Windows 8 上]

> ID：15105357
> 
> 赞同：4
> 
> 时间：2013-02-27T06:10:41.703
> 
> 标签：java, windows-8

我想检查对 url 的请求的状态代码，但正在获取代码

```
java.net.ConnectException: connect: Address is invalid on local machine or port is not valid on remote machine 
```

这是我的代码

```
public static boolean linkExists(String URLName){
        URLName = "http://www.google.com";
        try {
          HttpURLConnection.setFollowRedirects(false);
          HttpURLConnection con =
             (HttpURLConnection) new URL(URLName).openConnection();
          con.connect();
          System.out.println(con.getResponseCode());
          return (con.getResponseCode() == HttpURLConnection.HTTP_OK);
        }
        catch (Exception e) {           
           return false;
        }
  } 
```

堆栈跟踪

```
java.net.ConnectException: connect: Address is invalid on local machine, or port is not valid on remote machine
    at java.net.DualStackPlainSocketImpl.connect0(Native Method)
    at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:69)
    at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:339)
    at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:200)
    at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:182)
    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:157)
    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:391)
    at java.net.Socket.connect(Socket.java:579)
    at java.net.Socket.connect(Socket.java:528)
    at sun.net.NetworkClient.doConnect(NetworkClient.java:180)
    at sun.net.www.http.HttpClient.openServer(HttpClient.java:378)
    at sun.net.www.http.HttpClient.openServer(HttpClient.java:473)
    at sun.net.www.http.HttpClient.<init>(HttpClient.java:203)
    at sun.net.www.http.HttpClient.New(HttpClient.java:290)
    at sun.net.www.http.HttpClient.New(HttpClient.java:306)
    at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:995)
    at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:931)
    at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:849)
    at com.sls.lms.test.utilities.Utilities.linkExists(Utilities.java:70)
    at com.sls.lms.test.report.ReportTest.checkReportData(ReportTest.java:70)
    at com.sls.lms.test.report.ReportTest.CheckReportForGST(ReportTest.java:30)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
    at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
    at org.junit.runner.JUnitCore.run(JUnitCore.java:160)
    at org.junit.runner.JUnitCore.run(JUnitCore.java:138)
    at org.testng.junit.JUnit4TestRunner.start(JUnit4TestRunner.java:81)
    at org.testng.junit.JUnit4TestRunner.run(JUnit4TestRunner.java:69)
    at org.testng.TestRunner$1.run(TestRunner.java:682)
    at org.testng.TestRunner.runWorkers(TestRunner.java:1012)
    at org.testng.TestRunner.privateRunJUnit(TestRunner.java:713)
    at org.testng.TestRunner.run(TestRunner.java:614)
    at org.testng.SuiteRunner.runTest(SuiteRunner.java:334)
    at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:329)
    at org.testng.SuiteRunner.privateRun(SuiteRunner.java:291)
    at org.testng.SuiteRunner.run(SuiteRunner.java:240)
    at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:52)
    at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:86)
    at org.testng.TestNG.runSuitesSequentially(TestNG.java:1198)
    at org.testng.TestNG.runSuitesLocally(TestNG.java:1123)
    at org.testng.TestNG.run(TestNG.java:1031)
    at org.testng.TestNG.privateMain(TestNG.java:1338)
    at org.testng.TestNG.main(TestNG.java:1307) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-27T06:43:09.910

我相信这个问题是由 Java 尝试使用 IPV6 地址引起的，而您的操作系统不支持它，或者没有正确设置来处理它。

您可以强制 Java 使用具有以下属性的 IPV4 地址：

-Djava.net.preferIPv4Stack=true

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T06:27:29.210

我注意到的一件事是您的 URL 连接尚未使用……您还没有调用 connect()。如果这解决了您的问题，我会对错误消息感到失望，但您可能在提出请求之前无法获得响应代码。

[http://docs.oracle.com/javase/6/docs/api/java/net/URLConnection.html](http://docs.oracle.com/javase/6/docs/api/java/net/URLConnection.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T06:20:21.223

**使用Eclipse**对我来说效果很好。绝对听从 Nikolay 的建议，检查您是否有防火墙在运行。我看到的任何与此异常相关的论坛帖子都与这种情况有关。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T21:35:00.163

关闭所有java程序并打开运行（`winkey`+ `R`）或者如果你有像我这样的开始按钮就搜索运行，然后写`-Djava.net.preferIPv4Stack=true`进去。:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-12T15:30:01.203

遇到了这个问题，但只是关闭了我的防病毒软件并发现它正在工作，这与防病毒软件阻止了端口有关。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-07-25T20:39:48.657

我面临同样的问题。我有 windows8 64 使用 netbeans7.4。我的杀毒软件是卡巴斯基。解决方案是关闭您的防病毒软件或使防病毒软件暂停，然后运行它将起作用的代码

```
import java.net.*;
import java.io.*;

public class URLReader {
    public static void main(String[] args) throws Exception {

        URL oracle = new URL("http://www.oracle.com/");
        BufferedReader in = new BufferedReader(
        new InputStreamReader(oracle.openStream()));

        String inputLine;
        while ((inputLine = in.readLine()) != null)
            System.out.println(inputLine);
        in.close();
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-09-23T11:58:46.537

我遇到了同样的问题。我的杀毒软件是卡巴斯基。解决方法是，打开卡巴斯基->设置->防病毒保护->监控端口->选择

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-04-26T15:30:46.003

我在尝试使用 IPv4 地址和端口 0 打开 Socket 时收到此消息。您可能应该在看到此消息时检查使用的端口。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-10-07T04:50:00.070

我通过提供服务器的 IP 地址和端口号来创建到远程服务器的套接字连接。能够 ping 服务器，也能够 telnet 到端口。所以没有连接问题，仍然在问题中发布了相同的错误。我犯了一个愚蠢的错误，即传入一个空字符串来创建套接字实例。使用调试模式指出此类错误很有用。

# vb.net-2010 - .net 框架启动的版本与 .net 框架引导程序项目不匹配

> ID：15105358
> 
> 赞同：11
> 
> 时间：2013-02-27T06:10:48.397
> 
> 标签：vb.net-2010, setup-deployment, crystal-reports-2010

当我构建刚开始使用的 vb.net 2010 的发布项目时，我收到两个警告：

1.  .net 框架启动条件的版本与所选的 .net 框架引导程序包不匹配。更新 .net framewk 启动条件以匹配在先决条件对话框中选择的 .netfrk 版本。

2.  项目中.net framework 的目标版本与.net framework 启动条件版本.net framework 4 客户端配置文件不匹配。在高级编译选项对话框中更新 .net 框架启动条件的版本以匹配 .net 框架的目标版本。

我将主项目的框架从客户端配置文件（这是我第一次创建它时）更改为 frwk 4，因为我读到水晶报告不适用于 frwk 4 客户端配置文件。（真的吗）。

引导版本框架适用于 x64 和 x86。我继续浏览网络，发现可以在 setup 项目的启动条件中更改框架。这些似乎分散在许多地方，这是我不记得与其他版本的 .net 有过的问题。无论如何，这解决了这个问题，但还有另一个与此相关的问题。

我已将主项目和次要项目的 anycpu 更改为 x86，因为我在安装 msi 时遇到了问题。同时，其他辅助项目（从 2008 年升级）我更改为 x86，但在配置文件中，它说这些的 anycpu 并且正如这里所写的那样，不能更改为 x86。我没有收到错误消息，但尚未测试安装是否有效。

我在您的网站上阅读了一个答案以进入 vbproj 并将记事本从 x86 更改为 x64，因为它们无法以这种方式从 anycpu 更改为 x86。但我不想要 x64，所以不知道该怎么做。

似乎 anyCPU 将是一个不错的选择，但它可以与 Crystal 一起使用吗？如果我改变它，我是否需要附加 x86 msi 以外的东西？或者我可以在这种不清楚的情况下保持原样吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-05-05T18:13:46.533

此错误是由于不匹配造成的。您可以通过使其中一个匹配另一个来修复它。

一是“启动条件”。另一个是“先决条件”。

要更改启动条件：

*   在解决方案资源管理器中右键单击您的设置项目
*   点击查看 - 启动条件
*   选择启动条件下的“.NET Framework”项
*   在属性窗口中，查看版本项。您可以打开下拉菜单来选择适当的框架版本。

要更改先决条件：

*   在解决方案资源管理器中右键单击您的设置项目
*   选择属性，出现属性页对话框
*   单击“先决条件...”按钮
*   根据需要检查和取消选中框架版本

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-07-08T20:54:40.973

我们在 Microsoft 的朋友提供的另一个文档记录不佳的功能。选择安装项目后，解决方案资源管理器工具箱中有一系列图标；其中之一是“启动条件编辑器”。

选择安装项目，选择“启动条件编辑器”，打开新窗口。选择“启动条件”、“.Net Framework”查看属性、版本。选择当前版本，打开下拉菜单，选择所需的框架。

重建。

（感谢[http://social.msdn.microsoft.com/Forums/windows/en-US/5167197a-12a5-473e-940a-569e92f08f37/error-the-version-of-the-net-framework-launch-condition -net-framework-4-does-not-match-the](http://social.msdn.microsoft.com/Forums/windows/en-US/5167197a-12a5-473e-940a-569e92f08f37/error-the-version-of-the-net-framework-launch-condition-net-framework-4-does-not-match-the) )

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-11T05:16:27.970

好的，所以我也遇到了这个问题。我发现有 3 个地方需要匹配。不是2个地方。我将 VS2015 与 Microsoft 提供的加载项设置项目一起使用。

位置 1：目标框架需要是您的目标，变量 X。为此，请转到主项目的属性并为您的代码选择目标框架。

地方2：右键单击您的设置项目并转到查看>启动条件，单击.Net Framework，然后在属性窗口中选择您的目标框架...变量X。

地点 3：右键单击您的安装项目并转到属性 > 先决条件。这将显示程序的先决条件......在我的情况下，变量 X 需要匹配在此框中选中的内容。

这导致项目在没有警告的情况下成功构建。

# ios - 如何在 iOS 6 中切换应用程序时禁用窗口的自动截图？

> ID：15105366
> 
> 赞同：1
> 
> 时间：2013-02-27T06:11:08.993
> 
> 标签：ios, ios5, ios6

如何在 iOS 6 中切换应用程序时禁用窗口的自动截图？

我在 iOS 5 中启动应用程序，并用 5 个手指（滑动手势）切换到其他应用程序。然后回到第一个应用程序，当应用程序滚动时，我看到一个 Default.png 图像。这很好。

但是在iOS 6中，当应用程序到来时，我看到了应用程序窗口的屏幕截图，似乎是在应用程序进入后台时制作的。这很糟糕，因为屏幕截图是旧时制作的并向用户显示错误的图像，并且在应用程序激活后，图像很快就会变为真实。在某些情况下，截图实际上是，但经过 2-3 次尝试后，截图很旧。

任何人都知道，如何禁用自动截图或解决截图问题，因为截图会在每次应用程序切换时进行？

谢谢

# c - （标准？）问题的编码设计

> ID：15105367
> 
> 赞同：0
> 
> 时间：2013-02-27T06:11:11.050
> 
> 标签：c, algorithm

似乎是一个足够标准的问题，可以保证解决方案中的标准设计：

假设我想在文件中写入 x+2（或更少）字符串。x 字符串组成部分的内容，这两个字符串构成该部分的页眉和页脚。问题是，如果内容中没有字符串，我不会编写页眉/页脚字符串。此外，这些 x 字符串是从代码中的不同位置编写的。所以现在的流程是：

1.  写入标题字符串
2.  写入内容字符串
3.  写页脚字符串

即使内容为空，这也会导致写入页眉/页脚字符串，我必须解决这个问题，即在这种情况下不写入页眉/页脚字符串。

我能想到的解决方案是在正在写入的第一个内容字符串之前写入标题字符串（通过将每个内容字符串写入与标题字符串写入相结合来实现，并使用布尔标志防止多个标题字符串写入），然后编写仅当标题字符串已被写入（由布尔标志控制）时，页脚字符串。

这是它的顶级要点，只是想知道是否有可用于此类情况的标准方法。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T06:21:25.137

对此有多种解决方案：

*   将标题和数据行写入内存缓存，并在您尝试写入页脚时输出它们（但前提是有*数据*行，否则不输出）。
*   同样的事情，但使用一个临时文件作为数据缓存，以防它太大。
*   记住标题以及您是否已输出它。

由于前两种解决方案效率低下（可能缓存大量数据，或使用相对较慢的外部存储），我将专注于后者。请参阅底部关于如何进行缓存的注释^((a))。

不需要缓存数据的方法是仅指示您是否编写了标头。在每条数据线之前，仅当尚未设置标志时才输出标题（并设置标志）。您还可以使用此标志来控制页脚（如果尚未输出页眉，则页脚也不应输出）：

```
def outHeader (str):
    headerText = str
    headerSent = false

def outdata (str):
    if not headerSent:
        write headerText
        headerSent = true
    write str

def outFooter (str):
    if headerSent:
        write str 
```

就不需要数据缓存而言，此解决方案可能要简单得多。

* * *

^((a))如果您*确实*想使用缓存解决方案（尽管有人建议它是次优解决方案），以下伪代码显示了它是如何完成的：

```
def outHeader (str):
    cachedHeader = str
    cachedData = ""

def outdata (str):
    cachedData = cachedData + str + "\n"

def outFooter (str):
    if cachedData != "":
        write cachedHeader
        write cachedData
        write str 
```

内存缓存和基于文件的缓存之间的唯一区别是：

*   创建一个空的临时文件并将 lineCount 设置为 0 您当前`cachedData`在`outHeader()`.
*   发送`str`到临时文件并`lineCount`在`outData()`.
*   用于`lineCount`确定是否有缓存数据`outFooter`并从临时文件中读取行以作为数据输出。

# css - 在绝对定位的 div 下定位

> ID：15105368
> 
> 赞同：3
> 
> 时间：2013-02-27T06:11:22.833
> 
> 标签：css, positioning, css-position

我有 4 个包含图像的 div，绝对定位，总宽度为 100%。

这是由于用户希望在所有浏览器中使用页面的全宽。

我需要在它下面放置一个 div，宽度也为 100%，它以与浏览器相同的速率扩展/收缩。

我知道浮动不是一种选择。

所需布局：

```
[img1][img2][img3][img4]
[       content        ]
-------100% width------- 
```

HTML

```
 <div id="container">
          <div id="image1"><img src="images/1.jpg"></div>
          <div id="image2"><img src="images/2.jpg"></div>
          <div id="image3"><img src="images/3.jpg"></div>
          <div id="image4"><img src="images/4.jpg"></div>
        </div>

     <div id="content">
     </div> 
```

CSS：

```
#container{
    width: 100%;
    position: relative;
    height: auto;
}

#image1 {
       width: 25%;
      position: absolute;
      right: 50%;   
}
#image2 {
    width: 25%;
    position: absolute;
     right: 75%;

#image3 {
    width: 25%;
    position: absolute;
     left: 50%;
}
#image4 {
    width: 25%;
    position: absolute;
     left: 75%;
}

#content {
   width: 100%;
   height: auto;
}

img {
    max-width: 100%;
   height: auto;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T06:27:28.723

**习惯了这个方法**

**[现场演示](http://tinkerbin.com/ukYkcXFo)** ---------------------------- **[演示-二](http://tinkerbin.com/Syw5tK8Y)**

**CSS**

```
#pic-container{
font-size:0;
}
#pic-container img{
width:25%;
  vertical-align:top;
} 
```

**HTML**

```
 <div class="container">
     <div id="pic-container">
 <img src="images/1.jpg">
<img src="images/2.jpg">
<img src="images/3.jpg">
<img src="images/4.jpg">
      </div>
     </div>
     <div class="container">
                herer is the your content         
     </div> 
```

**[现场演示](http://tinkerbin.com/ukYkcXFo)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T06:33:54.833

如果我没记错，请查看您的 CSS 代码：

> 你忘了把你的 #image2 关闭“}”。
> 它现在必须看起来像这样。

```
#image2 {
  width: 25%;
  position: absolute;
  right: 75%;
 } 
```

> 希望能帮助到你。

# c# - 选择计算字段

> ID：15105374
> 
> 赞同：0
> 
> 时间：2013-02-27T06:11:48.030
> 
> 标签：c#, linq, entity-framework, compiler-errors, linq-to-entities

如何选择持续时间作为实体框架中两个字段之间的差异。以下是相应的 SQL 查询：

```
SELECT InitiateTime, StartTime, EndTime, Ano,Bno,  datediff(s,StartTime,EndTime) as duration
FROM [NEPALIVR2].[dbo].[CDR]
WHERE StartTime >= startDate and StartTime <= endDate order by StartTime desc 
```

**LINQ**

```
from u in db.CDRs 
where u.InitiateTime >= startDate && u.InitiateTime <= endDate 
orderby u.InitiateTime descending 
select new
{
   InitiateTime = u.InitiateTime,
   StartTime = u.StartTime,
   EndTime = u.StartTime,
   Ano = u.Ano,
   Bno = u.Bno,
   Duration = (SqlFunctions.DateDiff("mi", u.StartTime, u.EndTime))/360,
}; 
```

这将返回错误：

> 无法将类型隐式转换`'System.Linq.IQueryable<AnonymousType#1>'`为`'System.Linq.IQueryable<IVRControlPanel.Models.CDR>'`. 存在显式转换（您是否缺少演员表？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T06:17:44.127

看起来您的问题不是差异计算，而是您从查询返回的匿名类型。将其更改为`CDR`对象：

```
select new CDR
{
   InitiateTime = u.InitiateTime,
   StartTime = u.StartTime,
   EndTime = u.StartTime,
   Ano = u.Ano,
   Bno = u.Bno,
   Duration = SqlFunctions.DateDiff("mi", u.StartTime, u.EndTime)/360
}); 
```

# c - 使用 Makefile.options 文件中的定义作为 Makefile 变量中的条件

> ID：15105375
> 
> 赞同：0
> 
> 时间：2013-02-27T06:11:52.683
> 
> 标签：c, makefile, options

我正在使用 clearmake，我正在尝试执行以下操作：

我有一个在 clearmake 命令中使用的 Makefile.fast.options 文件。在那里我有一个 USERFLAGS = -DFAST

在另一个选项文件中我没有-DFAST（Makefile.slow.options）。

在实际的 Makefile 中，如果定义了 FAST，我想将输出二进制名称设置为一个名称，否则我想将其设置为另一个名称..（如果定义了 FAST，我希望输出在名字，否则我想要 .slow

是否有可能做到这一点？也许我错过了一种更简单的方法来使用选项文件来确定输出文件名？

我也在考虑在makefile选项文件中定义文件名，似乎更容易：

文件名 = File.Fast

但是我想使用选项文件来覆盖makefile本身中对FILENAME的定义。所以，如果在选项文件中设置了FILENAME，请使用它，或者使用makefile中的那个。这可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T00:52:04.283

您不能只更改您构建的文件的名称。您必须实际更改生成文件中规则中目标的名称。这意味着目标名称需要是可变的。您选择使其可变的方式取决于您。

如果您已经包含了基于快与慢的不同选项文件，那么最简单和最明显的方法是在这些选项文件中设置变量。这就是我推荐的方式。

如果你想根据 USERFLAGS 的值来做，你可以这样做：

```
ifeq ($(filter -DFAST,$(USERFLAGS)),-DFAST)
    FILENAME = File.fast
else
    FILENAME = File.slow
endif 
```

但是，这似乎更复杂，更难阅读和理解（对我来说）。

# c# - 将长度验证合并到现有的电子邮件地址格式正则表达式中

> ID：15105389
> 
> 赞同：0
> 
> 时间：2013-02-27T06:13:23.960
> 
> 标签：c#, regex, email-validation

我在 C# 中使用此正则表达式根据来自[http://www.regular-expressions.info/email.html](http://www.regular-expressions.info/email.html)的信息进行电子邮件格式验证：

```
Regex.IsMatch("test@gmail.com", 
              @"^[A-Z0-9'._%+-]+@(?:[A-Z0-9-]+\.)+[A-Z]{2,4}$",RegexOptions.IgnoreCase); 
```

我还想验证电子邮件的总长度在 5 到 254 个字符之间。应该如何修改这个正则表达式以满足长度条件？我不想明确检查 C# 中字符串的长度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T06:18:29.190

我建议你不要设置这样的限制。如果你真的想要正则表达式。正如paxdiablo所说，SO中存在许多问题。[正则表达式中的电子邮件验证](https://stackoverflow.com/questions/201323/using-a-regular-expression-to-validate-an-email-address)

```
^.{1,254}$ 
```

[http://rick.measham.id.au/paste/explain.pl?regex=%5E.%7B1%2C150%7D%24](http://rick.measham.id.au/paste/explain.pl?regex=%5E.%7B1%2C150%7D%24)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T01:24:19.197

虽然单独进行长度检查可能更简洁，但您可以通过在表达式的开头添加非捕获前瞻来合并长度约束：

```
^(?=.{5,254})[A-Z0-9'._%+-]+@(?:[A-Z0-9-]+\.)+[A-Z]{2,4}$ 
```

# jruby - 使用 Trinidad 和 Jruby on Rails 应用程序配置 Apache

> ID：15105394
> 
> 赞同：1
> 
> 时间：2013-02-27T06:14:11.610
> 
> 标签：jruby, jrubyonrails, trinidad-gem

Trinidad 文档详细介绍了如何启动和运行 Jruby on Rails 应用程序，但是有人可以告诉我/指向我有关如何配置 Apache 以使用 Trinidad 服务器的好教程吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T12:15:23.840

Trinidad wiki 描述了如何[配置 AJP](https://github.com/trinidad/trinidad/wiki/AJP-Configuration)以将 Apache 连接到 Trinidad：

```
jruby -S trinidad --ajp 8099 
```

将 Trinidad 配置为使用 AJP 后，您需要[配置 Apache](http://httpd.apache.org/docs/2.2/mod/mod_proxy_ajp.html)以连接到 AJP。首先启用 ajp 模块：

```
$ sudo a2enmod proxy_ajp 
```

然后，将 Apache 配置为连接到您在`httpd.conf`文件中在 Trinidad 上定义的端口上的 ajp：

```
<VirtualHost *:80>
  ProxyPass / ajp://localhost:8099/
  ProxyPassReverse / ajp://localhost:8099/
</VirtualHost> 
```

查看[Trinidad 页面](https://github.com/trinidad/trinidad/wiki/ajp-configuration#load_balancing)以获取有关负载平衡的更多详细信息。

最后，如果您想更深入地了解如何使用 Capistrano/Puppet 在 Trinidad 上配置和部署 JRuby 应用程序，您应该获得[Deploying with JRuby 。](http://pragprog.com/book/jkdepj/deploying-with-jruby)这是一本非常好的书。

# asp.net - VS 2012 中缺少 OnReceiveAsync 方法

> ID：15105399
> 
> 赞同：2
> 
> 时间：2013-02-27T06:14:25.500
> 
> 标签：asp.net, visual-studio-2012, signalr

我正在尝试使用 VS 2012 开发 Signalr 应用程序，但由于 Intellisense 没有启动，我无法获得 OnreceivedAsync 方法。我需要覆盖这些公共方法，但不知何故它不允许我这样做。我已包含 Microsoft.asp。 net.signalr 库也是。我正在 VM 中开发此应用程序。可能是什么原因？我包括一个屏幕截图。

![在此处输入图像描述](../Images/5e18712ae1f704cdb0ca61d916557744.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T07:21:19.240

从 SignalR 1.0.0 开始，`Async`后缀已从`OnReceivedAsync`方法以及`OnConnectedAsync`,`OnReconnectedAsync`和`OnDisconnectedAsync`方法中删除`PersistentConnection`。

它们现在分别称为`OnReceived`、`OnConnected`和。否则，这些方法几乎没有变化。它们都具有相同的方法签名，并且与以前一样在同一时间被调用。`OnReconnected``OnDisconnected`

[https://github.com/SignalR/SignalR/wiki/PersistentConnection](https://github.com/SignalR/SignalR/wiki/PersistentConnection)

# c# - 获取 AccessToken 返回“400 - 错误请求”以使用 WNS 验证云服务

> ID：15105405
> 
> 赞同：1
> 
> 时间：2013-02-27T06:14:54.127
> 
> 标签：c#, .net, windows-8, windows-store-apps

我一直在使用[MSDN 文章给出的代码（第 6 步给出的代码）](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/Hh868252%28v=win.10%29.aspx)。问题是它使用了 Windows Metro 风格框架中不可用的 HttpUtility WebClient 类，因此我修改了 GetAccessToken(....) 方法，如下所示。

```
protected OAuthToken GetAccessToken(string secret, string sid)
{
var urlEncodedSecret = WebUtility.UrlEncode(secret);
var urlEncodedSid = WebUtility.UrlEncode(sid);

HttpClient httpClient = new HttpClient();

httpClient.DefaultRequestHeaders.Add("grant_type", "client_credentials");
httpClient.DefaultRequestHeaders.Add("client_id", urlEncodedSid);
httpClient.DefaultRequestHeaders.Add("client_secret", urlEncodedSecret);
httpClient.DefaultRequestHeaders.Add("scope", "notify.windows.com");

Task<string> responseResult = null;

try
{
Task<HttpResponseMessage> response = httpClient.GetAsync("https://login.live.com/accesstoken.srf");

responseResult = response.Result.Content.ReadAsStringAsync();
}
catch (Exception ex)
{
// Display the error message
}

return GetOAuthTokenFromJson(responseResult.Result);
} 
```

问题是它返回“400”错误请求“作为结果。当从谷歌检查时，它表明我没有正确设置标题。正如[MSDN 页面](http://msdn.microsoft.com/en-us/library/windows/apps/hh465435.aspx#send_notification_request)所说，我已经设置了所有必需的标题，如下所示来获取访问令牌将用于发送通知

希望有人能帮我弄清楚这一点。谢谢:)

# c# - 记录您的 .Net 代码的最佳方法是什么？

> ID：15105406
> 
> 赞同：0
> 
> 时间：2013-02-27T06:14:54.110
> 
> 标签：c#, .net, visual-studio, editor

你和我都知道为代码创建文档真的很无聊，我将它作为一个讨论打开，你分享你为代码创建文档的经验。

我认为项目文档不同于项目文档中的代码文档，您可以使用 UML 来描述整个项目、算法、设计、架构。但是，在您开发 DLL 库或提供 Web 服务或任何其他工具时，您的代码文档非常有效其他开发人员将使用的代码。我认为讨论主题是：

## 1.您知道对生成文档有用的工具

## 2.提供源文档的方法和规则

## 3.其他开发人员代码注释是否对您有用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T06:27:59.453

这是社区通常倾向于不同意的事情之一。不是一般...我认为我们都承认代码文档是一件好事™，但我们*如何*做到这一点是个人问题。

这是我的看法：

* * *

我知道这很痛苦，但内联文档有助于让您保持专注，并为您提供一些您在回顾代码时可以参考的信息。

1) 我使用[Sandcastle](http://sandcastle.codeplex.com/)从我的库中生成帮助文件，我用 XML 文档注释记录这些文件。

2a) 始终为您的公共字段、属性和方法提供合理的 XML 文档。 *不要*只是放`/// <summary>FieldName</summary>`，描述该领域的用途。

2b) 谨慎使用内联注释。不要注释每一行，而是注释代码块做一些有趣的事情或以有趣的方式，这样你（或其他任何人）可以在下次阅读代码时清楚地理解它。

3) Abso-freaking-lutely。阅读我自己的代码通常很简单，但每个开发人员的工作方式都不同。当你有一段别人写的代码时，注释可以决定理解与否。

# ruby-on-rails-3 - 在虾 PDF 中显示回形针图像

> ID：15105409
> 
> 赞同：4
> 
> 时间：2013-02-27T06:15:16.227
> 
> 标签：ruby-on-rails-3, paperclip, prawn

我正在尝试显示由回形针导入的数据库中的图像。我已经尝试了几件事，但我不断收到“找不到文件”的错误消息。

这是我的虾配置文件中的内容：

```
def show_sample
    id_sample = Rails.root + @id_card_design.picture.url(:large).sub!(/\?.+\Z/, '')
    image id_sample, at: [0,900], height: 161, width: 250
    move_down 20
end 
```

我尝试了以下方法来剥离 ?12345676 但它仍然不起作用。

```
.sub!(/\?.+\Z/, '') 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-02T18:59:13.120

尝试使用 picture.path 而不是 picture.url

# c++ - 我可以使用什么 Mac/iOS/Portable 库来格式化信息以打印到标签纸上？

> ID：15105410
> 
> 赞同：3
> 
> 时间：2013-02-27T06:15:24.047
> 
> 标签：c++, ios, objective-c, c, macos

例如，我正在寻找一个开源（或廉价的商业）库来处理标准标签纸（比如 Avery 5160）格式化信息的困难。我想在 Mac 和 iPhone 应用程序中使用该库。我在专用标签打印机上看到了类似的问题，但我正在寻找一个兼容 Mac 的库，该库可以与加载到任何打印机中的标签纸一起使用： [开发人员可以使用哪些选项来打印到专用标签打印机？](https://stackoverflow.com/questions/3425617/what-options-are-available-to-developers-for-printing-to-a-dedicated-label-print)

或者，我对关于我自己做的最佳策略的建议很感兴趣……我不想弄清楚许多不同纸张格式的复杂性——我可能只针对一种美国信函标签纸和一种A4 标签纸。哪些是最受欢迎的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-04T18:50:05.013

编写了一个实际执行此操作的（封闭源代码）Mac 代码库后，我可以告诉您，这并不是世界上最困难的事情。我的代码库只支持 Avery 标签。我在应用程序中有一个资源文件，其中包含每种标签的几何信息（行数、列数、边距大小、装订线大小等）。我用它来布局主打印视图的大小合适的子视图网格，其中每个子视图都是一个标签。每个子视图负责修改其信息的布局以适应其大小。可以想象，现在这可以使用 Cocoa Autolayout 来完成（我的代码早于 Autolayout）。

[您可以在此处](https://gist.github.com/armadsen/5084458)下载我的标签尺寸文件的 CSV 版本。

编辑：我可能还会提到，您需要为适用于 Mac 和 iOS 的解决方案做一些重要的额外工作。两个平台之间的打印 API 完全不同。即使您在 iOS 上使用自定义视图进行打印，UIView 和 NSView 也不完全相同。尽管如此，通过一些仔细的计划，您应该能够提出至少在两个平台上共享通用核心代码的东西。

# android - 在 android 中做 XPath 评估或拉解析器更快？

> ID：15105413
> 
> 赞同：0
> 
> 时间：2013-02-27T06:15:35.903
> 
> 标签：android, xml

有一个远程 xml 文件，我需要从中获取一组 xml 节点并在活动中显示。一种方法是完全下载它，然后执行 xpath 评估并获取节点集，如下所示

```
// using node I can drill further down to collect my relevant info 
NodeList names = (NodeList) xPath.evaluate("/library/artists/name", new InputSource(new FileReader(getDowloadedXMLFileLocation())), XPathConstants.NODESET); 
```

另一种方法是使用拉式解析器，我想这将是更多代码来做一个简单的工作来提取 nodeset 。我想知道哪种方法在内存和速度方面表现更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T06:21:09.140

[我在解析 XML 的最佳实践中](https://stackoverflow.com/questions/6166862/best-practices-for-parsing-xml)找到了一个很好的答案

您还可以使用 XmlPullParser 来解析 xml。但是我建议如果可能的话，使用 json 而不是 XML，这会减少你的内存，而且谷歌在[GSON](https://sites.google.com/site/gson/gson-user-guide#TOC-Overview)中提供了它的包装机制，这是最好的。

链接。

1) [http://vtd-xml.sourceforge.net/](http://vtd-xml.sourceforge.net/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T06:33:56.400

定制代码与通用解决方案，等同于高性能与易用性。

`XPath`(and `XLST`, and `JDOM`etc) 将构造一个类似 DOM 的模型，并对其进行迭代。这将占用更多 RAM 和 CPU。XPath 很简单，但对于大文件来说可能真的很慢。它还要求您手头有完整的文件。将此用于小文件。

`PullParser`另一方面，就像只在您感兴趣的地方阅读文件，跳过其余部分。此外，一次只能将一个节点加载到 RAM 中。输入文件的大小没有限制，或者它是完全可用的还是通过媒体流式传输的。将此用于大型或流式文件。

# c# - 调用按钮单击事件

> ID：15105419
> 
> 赞同：1
> 
> 时间：2013-02-27T06:16:12.770
> 
> 标签：c#, webforms, buttonclick

是否可以从另一个 Web 表单中的按钮调用一个 Web 表单中的“按钮单击事件”？实际上我想要做的是，我有一个第二种形式的链接按钮，当它被点击时，我希望第一种形式显示，并且第一种形式的按钮也被点击。谁能帮我做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T06:23:48.357

我假设您正在使用 jQuery 并且对它有基本的了解。所以这样做：

```
<form id="form1" style="display:none">
 <Asp:Button id="button1" onclick="alert('clicked')" >button1</Asp:Button>
</form>

<form id="form2">
  <Asp:LinkButton url="javascript:void(0);" onclick="call1();">Link button1</Asp:LinkButton>
</form>

<script>
  function call1()
  {
    $("#form1").show();
    $("#button1").trigger("click");
  }
</script> 
```

注意：我写的asp标记会出现编译错误，请自行解决。我这样说只是为了让您了解如何处理它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T06:37:18.480

create a Delegate in WebForms (I have used in WinForms)

```
public delegate void LoginDelegate(string s);

 loginAirLineDelegate = new LoginDelegate(DisableToolStripMenuItems);

  public void DisableToolStripMenuItems(string s)
        {
           this.viewToolStripMenuItem.Visible = true;
            this.bookingToolStripMenuItem.Visible = true;
            this.existingUserToolStripMenuItem.Visible = false;
            this.newUserToolStripMenuItem.Visible = false;
            this.toolStripStatusUserID.Text = "USerID :- "+s;             
           this.LoginUserId = s;
        } 
```

I have passed the Delaqgte to other Form with Construtor as argumnet. I can able to fire the delegate from the second form like this

```
logDelegate(textBoxUserName.Text); 
```

# eclipse - 日食中缺少团队资源管理器

> ID：15105420
> 
> 赞同：2
> 
> 时间：2013-02-27T06:16:19.603
> 
> 标签：eclipse, plugins, tfs

我遵循了这个安装指南：

[http://msdn.microsoft.com/en-us/library/hh301122.aspx](http://msdn.microsoft.com/en-us/library/hh301122.aspx)

在某些计算机上，一切顺利。但是在某些情况下，缺少团队资源管理器窗口。

我什至在以下位置都找不到它：Window->Show view->Other。事实上，在 Eclipse 中的任何地方都没有 TFS 的痕迹（它没有出现在团队下的首选项中）。但它列在已安装的软件中。

所有计算机都有 Ubunto 12.04 LTS 和 eclipse 3.7.2 和 eclipse cdt。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-09-28T04:05:39.863

检查您是否有版本控制（团队）。我最近安装了 Eclipse 4.20，我在想 Team 菜单名称更改为 Version Control (Team) (Team -> Version Control (Team))。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T15:05:55.397

the solution apparently is to open eclipse with sudo and then start the installation. some permission problem that wasn't notified by the installation.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T15:13:22.703

权限问题可能会发生，您对安装 eclipse 的位置没有足够的权限，因此 TEE 的安装失败。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-27T16:06:52.947

我遇到了同样的问题。MSDN 的网站指出： Team Explorer Everywhere 旨在以非 root 用户身份在运行 Unix 的计算机上运行。

我终于能够通过运行以下命令来解决我的问题： sudo chown -R user:user /usr/lib/eclipse/ /usr/share/eclipse/

# android - 为什么tomcat依赖wi-fi

> ID：15105426
> 
> 赞同：0
> 
> 时间：2013-02-27T06:16:50.240
> 
> 标签：android, tomcat, wifi

我正在 GCM (Android) 上开发一个示例应用程序。在其中，我使用 tomcat 服务器发送消息。以及接收消息的设备。一切正常，除非我的 wifi 关闭。一旦我的 wi-fi 关闭，我就停止向我的设备发送消息，并且在浏览器上我收到以下错误。任何人都可以说出wifi和GCM服务之间的联系吗？

```
HTTP Status 500 -

type Exception report

message

description The server encountered an internal error () that prevented it from fulfilling this request.

exception

java.net.UnknownHostException: android.googleapis.com
    java.net.PlainSocketImpl.connect(Unknown Source)
    java.net.SocksSocketImpl.connect(Unknown Source)
    java.net.Socket.connect(Unknown Source)
    com.sun.net.ssl.internal.ssl.SSLSocketImpl.connect(Unknown Source)
    com.sun.net.ssl.internal.ssl.BaseSSLSocketImpl.connect(Unknown Source)
    sun.net.NetworkClient.doConnect(Unknown Source)
    sun.net.www.http.HttpClient.openServer(Unknown Source)
    sun.net.www.http.HttpClient.openServer(Unknown Source)
    sun.net.www.protocol.https.HttpsClient.<init>(Unknown Source)
    sun.net.www.protocol.https.HttpsClient.New(Unknown Source)
    sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.getNewHttpClient(Unknown Source)
    sun.net.www.protocol.http.HttpURLConnection.plainConnect(Unknown Source)
    sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(Unknown Source)
    sun.net.www.protocol.http.HttpURLConnection.getOutputStream(Unknown Source)
    sun.net.www.protocol.https.HttpsURLConnectionImpl.getOutputStream(Unknown Source)
    com.google.android.gcm.server.Sender.post(Sender.java:479)
    com.google.android.gcm.server.Sender.post(Sender.java:458)
    com.google.android.gcm.server.Sender.sendNoRetry(Sender.java:170)
    com.google.android.gcm.server.Sender.send(Sender.java:121)
    com.google.android.gcm.demo.server.SendAllMessagesServlet.doPost(SendAllMessagesServlet.java:82)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:717)

note The full stack trace of the root cause is available in the Apache Tomcat/6.0.33 logs. 
```

如需更多说明，请随时询问！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T06:30:26.910

如果发送通知，它首先从您的服务器发送到 Google GCM 服务器，然后从 GCM 服务器发送到手机。两个链接都必须启动并运行，通知才能到达。

当您关闭 WiFi 时，您似乎中断了从服务器到 Internet 的连接。它不再能够连接到 Google 服务器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T06:21:10.900

是的，它应该向您显示一个错误。

原因：我假设您正在使用本地网络连接访问 GSM 服务。因此，您的设备/手机希望您的 WiFi 连接处于开启状态。

# c++ - C/C++ 指针技巧修复

> ID：15105432
> 
> 赞同：0
> 
> 时间：2013-02-27T06:17:19.617
> 
> 标签：c++, c, pointers, dereference

我正在尝试这个指针技巧，但我不知道如何修复它，我在 ubuntu 12.04 64 位上运行 g++ 4.6。查看下面的代码：

```
int arr[5];
arr[3] = 50;
((short*) arr)[6] = 2;
cout << arr[3] << endl; 
```

逻辑是：因为`short`是 2 个字节，`int`是 4 个字节，我想更改 中的前 2 个字节`arr[3]`，同时将后 2 个字节的值保持为 50。所以我只是在弄乱位模式。不幸的是，`sizeof(int*)`和`sizeof(short*)`都是8个字节。是否有返回大小为 2 字节的指针的类型转换？

**更新：**

我意识到这个问题写得不好，所以我会解决这个问题：`cout << arr[3] << endl;`我得到的输出是2。我想要得到的输出既不是2也不是50，而是一个很大的数字，表明左边的部分int 位模式的值已更改，而存储在 arr[3] 中的 int 的右侧部分（第二个 2 位）仍保持不变。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T06:20:32.657

`sizeof(int*)`并且`sizeof(short*)`两者都将是相同的——正如将`sizeof(void*)`——你要求的是指针的大小，而不是指针指向的东西的大小。

使用`sizeof(int)`或`sizeof(short)`代替。

* * *

现在，对于您的代码片段，您正在对正在运行的机器的[字节序](http://en.wikipedia.org/wiki/Endianness)进行假设。给定平台上的“第一”部分`int`可能是地址较高的字节，也可能是地址较低的字节。

例如，您的内存块可能是这样布置的。假设最低有效字节的索引为零，而最高有效字节的索引为一。在大端架构上，int 可能如下所示：

```
 <------------- 4 bytes --------------->
+---------+---------+---------+---------+
| int:3   | int:2   | int:1   | int:0   |
| short:1 | short:0 | short:1 | short:0 |
+---------+---------+---------+---------+ 
```

请注意 int 中的第一个 short （在您的情况下应该是`((short*) arr)[6]`）如何包含 int 的最高有效位，而不是最低有效位。因此，如果您覆盖`((short*) arr)[6]`，您将覆盖 的最高有效位`arr[3]`，这似乎是您想要的。但是 x64 不是大端机器。

在小端架构上，您会看到：

```
 <------------- 4 bytes --------------->
+---------+---------+---------+---------+
| int:0   | int:1   | int:2   | int:3   |
| short:0 | short:1 | short:0 | short:1 |
+---------+---------+---------+---------+ 
```

导致相反的行为 -`((short*) arr)[6]`将是 的最低有效位`arr[3]`，并且`((short*) arr)[7]`将是最重要的。

* * *

这是我的机器发生的事情——你的机器可能不同：

```
C:\Users\Billy\Desktop>type example.cpp
#include <iostream>

int main()
{
        std::cout << "Size of int is " << sizeof(int) << " and size of short is "
                  << sizeof(short) << std::endl;

        int arr[5];
        arr[3] = 50;
        ((short*) arr)[6] = 2;
        std::cout << arr[3] << std::endl;
        ((short*) arr)[7] = 2;
        std::cout << arr[3] << std::endl;
}

C:\Users\Billy\Desktop>cl /W4 /EHsc /nologo example.cpp && example.exe
example.cpp
Size of int is 4 and size of short is 2
2
131074 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-27T06:34:50.107

你的问题是由于[endianness](http://en.wikipedia.org/wiki/Endianness)。Intel CPU 是 little endian，这意味着 int 的第一个字节存储在第一个地址中。让我举个例子：

假设 arr[3] 位于地址 10：

然后`arr[3] = 50;`将以下内容写入内存

```
10:   0x32
11:   0x00
12:   0x00
13:   0x00 
```

并将`((short*) arr)[6] = 2;`以下内容写入内存

```
10:  0x02
11:  0x00 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T06:20:49.553

当您索引一个指针时，它会将索引乘以所指向类型的大小。因此，您不需要 2 字节指针。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T06:21:53.500

你做了很多可能站不住脚的假设。另外，指针的大小与手头的问题有什么关系？

为什么不只使用位掩码：

```
arr[3] |= (top_2_bytes << 16); 
```

这应该设置高 16 个字节而不干扰低 16 个字节。（您可能会进入有符号/无符号的戏剧）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-27T17:52:35.143

综上所述，标准禁止这样做：通过指向另一种类型的指针设置变量是调用[未定义的行为](http://en.wikipedia.org/wiki/Undefined_behavior)。*如果*您知道您的机器是如何工作的（and 的大小`int`、`short`字节顺序，...）*并且* 您知道您的编译器（可能）如何翻译您的代码，*那么*您可能会侥幸成功。适用于整洁的客厅技巧，以及当机器/编译器/月相变化时的壮观爆炸。

如果它赢得任何性能，胜利将是最小的，甚至可能是净损失（很久以前我摆弄过的一个编译器，玩“我可以比编译器更好地实现这个循环，我确切地知道这里发生了什么”为我生成的代码比直接编写为循环的完全相同的代码要糟糕得多：我的“智能”代码使编译器感到困惑，它的“循环模式”不适用*）*。``label: ... if() goto label;`

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-02-27T06:23:08.637

您不希望您的实际指针大小为两个字节；这意味着它只能访问约 16k 的内存地址。但是，像您一样使用强制转换为短 *，将允许您每两个字节访问一次内存（因为编译器会将数组视为短数组，而不是整数数组）。

# performance - 这个 BIG monogdb 存储会导致性能低下吗？

> ID：15105435
> 
> 赞同：0
> 
> 时间：2013-02-27T06:17:26.457
> 
> 标签：performance, mongodb

我们有一个 mongodb，上面有 336GB 的数据。

不幸的是，该服务器上只有 8GB 内存。

说这会减慢数据库速度是真的吗，尤其是当我尝试遍历整个集合时？

我可以做些什么来提高性能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T09:12:21.313

为了把事情做好，这不是一个“大”的生产设置。它实际上是相对较小的。

除此之外：

> 说这会减慢数据库速度是真的吗，尤其是当我尝试遍历整个集合时？

是的。当您迭代集合时，MongoDB 将需要在您的数据中分页，即使您在集合上有索引也是如此。

例外情况是当您使用`indexOnly`游标时，所有数据仅来自索引，包括返回的文档；这些也称为覆盖查询。

您在这里遇到的问题是您的数据集比您的 RAM 量大 42 倍，假设您被允许使用所有 RAM（这当然不是真的，操作系统和其他程序将为自己保留数量）。这意味着，如果您希望迭代整个集合，您将无法高效地完成它，相反，MongoDB 可能会页面颠簸其分配的内存。

> 我可以做些什么来提高性能？

获得更多的内存。

如果在一台服务器上获得太多 RAM 很痛苦，您也可以尝试一些分片。

我的目标是获得比 RAM 多 20 倍的数据，这在大多数情况下应该不会太糟糕。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T08:18:34.300

您应该索引您的集合[http://docs.mongodb.org/manual/applications/indexes/](http://docs.mongodb.org/manual/applications/indexes/)以提高性能，但请记住，mongodb 在查询索引时会使用内存，因此请确保您创建的每个索引都适合内存你在你的服务器上。

您也可以对您的收藏进行分片，但您需要更多的服务器来执行此操作。[http://docs.mongodb.org/manual/sharding/](http://docs.mongodb.org/manual/sharding/)

而且我知道这很明显，但要获得更多内存-便宜！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T09:12:06.243

Mongodb 使用内存映射文件将数据映射到系统虚拟内存。如果您尝试访问的数据多于系统的可用内存，则性能会很差。您将不得不考虑其他选项，例如分片、索引、增加 RAM 等。如果在大型数据集上进行索引可能会提高性能，但不会提高很多，因为索引也需要内存。几个参考：

前 3 个问题讨论内存映射文件：[http ://docs.mongodb.org/manual/faq/storage/](http://docs.mongodb.org/manual/faq/storage/)

关于分片：[http ://docs.mongodb.org/manual/faq/sharding/](http://docs.mongodb.org/manual/faq/sharding/)

确保索引适合 RAM：[http ://docs.mongodb.org/manual/applications/indexes/#ensure-indexes-fit-ram](http://docs.mongodb.org/manual/applications/indexes/#ensure-indexes-fit-ram)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T12:35:13.047

其他答案说“有足够的内存来容纳您的数据”或“每个索引都有足够的内存”或“数据中有一些 RAM 的倍数”。这些对于容量规划都不是很有效也不是很精确。

您需要知道您的访问模式将是什么，然后决定您需要哪些索引才能有效地使用您的数据。如果您的*所有*索引都适合可用的 RAM，并且为最近接触的文档留出了一些空间，那么您应该没问题。

当您的工作集（访问的数据 + 索引）无法容纳在 RAM 中时，您的性能将与磁盘访问速度相关，而不是其他任何东西。根据您的磁盘速度以及您的吞吐量和延迟要求，它可能会正常工作，也可能不会。

虽然没有足够的信息可以确定您在这台特定机器上是否会成功或失败，但您应该能够收集足够的信息来通过分析您的索引需求等来确定自己。

# ruby-on-rails - 在生产服务器上部署后运行延迟作业

> ID：15105436
> 
> 赞同：1
> 
> 时间：2013-02-27T06:17:43.393
> 
> 标签：ruby-on-rails, delayed-job

使用rails 中的delayed_jobs gem（[https://github.com/collectiveidea/delayed_job](https://github.com/collectiveidea/delayed_job)），我可以将我的通知排队。但我不太明白如何在生产服务器上运行排队的作业。我知道我可以跑

```
$ rake jobs:work 
```

在本地服务器的控制台中。如文档所述，您可以执行以下操作：

```
RAILS_ENV=production script/delayed_job start
RAILS_ENV=production script/delayed_job stop

# Runs two workers in separate processes.
RAILS_ENV=production script/delayed_job -n 2 start
RAILS_ENV=production script/delayed_job stop

# Set the --queue or --queues option to work from a particular queue.
RAILS_ENV=production script/delayed_job --queue=tracking start
RAILS_ENV=production script/delayed_job --queues=mailers,tasks start

# Runs all available jobs and the exits
RAILS_ENV=production script/delayed_job start --exit-on-complete
# or to run in the foreground
RAILS_ENV=production script/delayed_job run --exit-on-complete 
```

我的问题是如何将它与我的 Rails 应用程序集成？我想在 config/initializers 中创建一个名为delayed_jobs.rb 的文件：

```
# in config/initializers/delayed_jobs
script/delayed_job start if Rails.env.production? 
```

但我不确定这是否是正确的方法。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T07:12:18.650

工作人员作为单独的进程运行，而不是作为 Rails 应用程序的一部分。最简单的方法是在[屏幕](http://www.gnu.org/software/screen/)会话中运行 rake 任务，以防止它在您退出终端会话时退出。但是有更好的方法：

您将使用诸如monit 或God 之类的系统或运行由delayed_job 提供的工作脚本。您将在[此问题的答案中](https://stackoverflow.com/questions/1226302/how-to-monitor-delayed-job-with-monit)找到更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-23T23:47:34.663

根据我的经验，我找到了使用[capistrano](http://capistranorb.com/) gem 的解决方案，用官方文档的话来说

> 它支持任意任务的脚本和执行，并包括一组健全的默认部署工作流。

基本上，它是一个帮助您部署应用程序的工具，包括所有这些任务，例如启动/停止队列、迁移数据库、捆绑新 gem，以及我们通常使用`ssh`连接执行的所有这些操作。

[这](http://www.ygamretuta.info/deploy-rails-4-2-with-capistrano-3-webfaction-figaro/)是关于 capistrano 和`webfaction`托管的 beutifull 教程。这是一个很好的模块来混合 capistrano[和](https://github.com/collectiveidea/delayed_job/wiki/Delayed-Job-tasks-for-Capistrano-3)`delayed_job`. 最后你应该只关心开发环境，因为每次你需要部署到生产环境时，你都会提交到你的存储库，然后

```
$ cap production deploy 
```

它将管理整个生产环境，停止/重新启动这些队列，重新启动应用程序，安装 gem 以及您可以通过 capistrano 脚本方式执行的所有操作。

# c# - 在 XmlRpc IllFormedXmlRepsonse 上无限重试

> ID：15105441
> 
> 赞同：0
> 
> 时间：2013-02-27T06:18:01.370
> 
> 标签：c#, .net-4.0, xml-rpc

我目前正在使用 Cook Computing XmlRpc 库集成两个系统，并且从其中一个系统返回一些混乱的响应。

该系统的开发人员向我保证，这已经结束，问题要到四月初才能解决。正如您可以想象的那样，如果一个系统发生更新而另一个系统返回错误的响应，我就会遇到非常严重的同步问题。

无论如何，直到四月，我基本上必须重试对系统的每次调用，直到它不返回 XmlRpcIllFormedXmlException。由于这个问题是完全间歇性和暂时的，它通常在最终工作之前失败约 1-3 次，但是我已经看到 10 多次重试，所以这些数字绝不是最大值。

我为处理这种可怕的场景而编写的代码开始让我担心，因为我正在有效地编写一个无限循环，并为控制流进行异常处理，但我看不到任何其他方法！

所以我的问题是：我所做的事情有什么本质上的错误吗？这会在下个月给我带来一些严重的问题吗？

```
while(true)
{
    try
    {
        XmlRpcStruct data = // AnyDataQuery

        if(data.Count() > 0)
            return new Contacts(data);
        else
            return null;
    }
    catch(XmlRpcIllFormedXmlException)
    {
          // Ensure we have not hit maximum retries.
          // Sleep thread for 500ms to avoid hitting api limit (this is no the ui thread)
          // Swallow exception and retry.

    }
} 
```

我只想重申，在有人问为什么数据会被注释填充之前，这不是我的代码的问题；p 这只是对系统的任何调用的包装器的一般格式。

我还在实际代码中跟踪重试，以避免达到 API 调用限制。

（如果这属于代码审查，请移动它！我觉得它属于 SO，因为它有点错误的代码，即使用异常进行控制 + 无限循环）

# oracle - 触发 SQLPLUS

> ID：15105444
> 
> 赞同：0
> 
> 时间：2013-02-27T06:18:18.157
> 
> 标签：oracle, plsql, triggers

我有一个表格，其中的列（id、t1、t2、t3、mark）分别具有类型（数字、整数、整数、整数、浮点数）我想插入学生 ID、测试 1 分数、测试 2 分数和测试的值3分。使用触发器我想在“标记”列中插入三个测试分数的平均值。

这是我写的触发器，但它给出了编译错误。

```
create or replace trigger trigger_2 before insert on grades
     for each row

declare
total integer ;
begin
total := :NEW.t1 + :NEW.t2 + :NEW.t3    
:NEW.mark := total/3.0;
end;
SQL> /

Warning: Trigger created with compilation errors.` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T11:23:39.997

这是（如果您使用的是 Oracle 10g）：

```
CREATE OR REPLACE TRIGGER trigger_2
  BEFORE INSERT ON grades
  FOR EACH ROW
BEGIN
  :NEW.mark := (:NEW.t1 + :NEW.t2 + :NEW.t3)/3;
END;
/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T15:38:30.880

你试试这个模板伙计

```
CREATE OR REPLACE TRIGGER <trigger_name>
      BEFORE INSERT ON grades
      FOR EACH ROW
    BEGIN
      :NEW.mark := (:NEW.<val1> + :NEW.<val2> + :NEW.<val3>...<valn>)/n;
    END;
    / 
```

# javascript - 如何切换单选按钮

> ID：15105447
> 
> 赞同：18
> 
> 时间：2013-02-27T06:18:29.013
> 
> 标签：javascript, jquery, html

说这是我的 HTML：

```
<input type="radio" name="rad" id="Radio0" checked="checked" />
<input type="radio" name="rad" id="Radio1" />
<input type="radio" name="rad" id="Radio2" />
<input type="radio" name="rad" id="Radio4" />
<input type="radio" name="rad" id="Radio3" /> 
```

如您所见，第一个单选按钮已选中。我需要单选按钮才能像切换一样起作用。例如。如果我再次单击`radio0`，则应取消选中所有单选按钮。

我怎样才能做到这一点？

**更新：**我不想要任何额外的按钮。例如。我可以添加一个按钮并将所有单选按钮的选中属性设置为 false。但是，我不希望那样。我只希望我的表单包含这 4 个单选按钮。

**更新：**由于大多数人不明白我想要什么，让我试着改写一下——我希望单选按钮在切换模式下起作用。我为所有单选按钮赋予了相同的名称，因此它是一个组。现在我希望单选按钮自行切换。例如。如果我点击radio0，如果它被选中，它应该被取消选中，如果它未被选中，它应该被选中。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-02-27T06:39:22.140

您会发现的问题是，一旦单击单选按钮，它的状态就会更改，然后您才能检查它。我建议添加一个自定义属性来跟踪每个收音机的先前状态，如下所示：

```
$(function(){
    $('input[name="rad"]').click(function(){
        var $radio = $(this);

        // if this was previously checked
        if ($radio.data('waschecked') == true)
        {
            $radio.prop('checked', false);
            $radio.data('waschecked', false);
        }
        else
            $radio.data('waschecked', true);

        // remove was checked from other radios
        $radio.siblings('input[name="rad"]').data('waschecked', false);
    });
}); 
```

您还需要将此属性添加到最初选中的单选标记

```
<input type="radio" name="rad" id="Radio0" checked="checked" data-waschecked="true" /> 
```

在此处查看演示：http: [//jsfiddle.net/GoranMottram/VGPhD/2/](http://jsfiddle.net/GoranMottram/VGPhD/2/)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-27T06:22:56.027

一旦您将 2 个或更多单选按钮的名称命名为相同，它们就会自动成为一个组。在该组中，只能选中一个单选按钮。你已经实现了这一点。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-08-16T13:34:07.173

这段代码解决了我的问题

```
$("[type='radio']").on('click', function (e) {
    var previousValue = $(this).attr('previousValue');
    if (previousValue == 'true') {
        this.checked = false;
        $(this).attr('previousValue', this.checked);
    }
    else {
        this.checked = true;
        $(this).attr('previousValue', this.checked);
    }
});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>

<label >Toogle radio button example</label>
<br />
<input type="radio" name="toogle_me" value="mango"> Blue </input>
<input type="radio" name="toogle_me" value="kiwi"> Green </input>
<input type="radio" name="toogle_me" value="banana"> Yellow </input>
<input type="radio" name="toogle_me" value="orange"> Orange </input>
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-22T14:54:18.873

我为我的自定义收音机使用如下 onClick() ：

```
$(function(){
  // if selected already, deselect
  if ($(this).hasClass('selected') {
    $(this).prop('checked', false);
    $(this).removeClass('selected');
  }
  // else select
  else {
    $(this).prop('checked', true);
    $(this).addClass('selected');
  }
  // deselect sibling inputs
  $(this).siblings('input').prop('checked', false);
  $(this).siblings('input').removeClass('selected');
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-03-28T23:25:23.133

使用@Goran Mottram 回答只是稍微调整一下以适应单选按钮不是兄弟的情况。

```
$(".accordian-radio-button").click(function(){
    var wasChecked = true;
    if($(this).data('waschecked') == true){
        $(this).prop('checked', false);
        wasChecked = false;
    }
    $('input[name="ac"]').data('waschecked', false);
    $(this).data('waschecked', wasChecked);
})

<input class="accordian-radio-button" data-waschecked="false" type="radio" name="ac" id="a1" /> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-01-26T21:09:06.640

我也遇到了这个问题，在考虑并玩弄了提供的各种小提琴之后，我对提供的解决方案有些不满。

我的主要问题是接受答案的最后一行，需要重置：

```
// remove was checked from other radios
    $radio.siblings('input[name="rad"]').data('waschecked', false); 
```

而且由于我没有使用 jQuery，我必须自己循环并评估兄弟姐妹，这不是什么大不了的事，但对我来说似乎很不雅。但是，使用该方法无法绕过它，因为您将数据集用作信息存储。

玩了之后，我意识到问题在于，当单击收音机时，它会触发单击事件，并且附加到该单击事件的任何功能都会在**评估**“onchange”事件的功能*之前*自行完成，更不用说叫。因此，如果单击事件“取消选中”切换，则**不会触发任何更改事件**。

 ****我在这里留下了我失败的尝试： [https ://codepen.io/RiverRockMedical/pen/daMGVJ](https://codepen.io/RiverRockMedical/pen/daMGVJ)

但是，如果您可以回答“在此点击事件之后会发生更改事件吗？”这个问题？然后你可以得到一个切换工作。

我想出的解决方案可以在这支笔上看到： [https ://codepen.io/RiverRockMedical/pen/VgvdrY](https://codepen.io/RiverRockMedical/pen/VgvdrY)

但基本上是这样的：

```
function onClick(e) {
  e.dataset.toDo = 'uncheck';
  setTimeout(uncheck, 1, {
    event:'click',
    id:e.id,
    dataset:e.dataset
  });
} 
```

因此，在单击事件上，设置一个单击已发生的标记，并使用 setTimeout() 创建一个暂停，以允许评估和触发 onchange 事件。

```
function onChange(e) {
  e.dataset.toDo = 'leave';
} 
```

如果 onchange 事件触发，它会撤消 onclick 事件所做的事情。

```
function uncheck(radio) {
  log('|');
  if (radio.event !== 'click') return;
  log('uncheck');
  if (radio.dataset.toDo === 'uncheck') {
    document.getElementById(radio.id).checked = false;
    radio.checked = false;
  } 
} 
```

然后，当 uncheck 功能启动时，它具有更改事件是否跟随单击事件的信息。如果不是，则收音机未选中，并用作切换开关。

而且，它基本上是自重置的，所以我不必遍历所有无线电并将它们的数据集重置为函数结束时的初始值。

现在，我确信有一种更酷的 async/await 方法可以做到这一点，它不使用 setTimeout 并且会更加优雅，但我仍在学习，但我无法想出它。还有谁？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-04-30T11:58:43.457

```
<input type="radio" name="gender" id="male"onclick="getChecked(1)"><label for="male">Male</label>
<input type="radio" name="gender" id="female"onclick="getChecked(2)"><label for="female">female</label> 
```

```
<script>
  var btnChecked = "";
  function getChecked(i) {
    if(btnChecked == i) {
      btnChecked = "";
      document.getElementsByTagName("input")[i-1].checked = false;
    }
    else btnChecked = i;
  }
</script> 
```****

# javascript - 如何使用 Jquery 将表列值从 Javascript 页面发送到 C# 页面

> ID：15105449
> 
> 赞同：0
> 
> 时间：2013-02-27T06:18:30.327
> 
> 标签：javascript, jquery

我有来自选定行的动态创建表的值。在每个选定的行中，我希望将所有属于的 td.innerText 值发送到 C# 页面，但我不知道如何发送。我使用的是 JSON，但我不知道我是否正确使用它。

```
function selectedRows() 
{

var selectedItems = $('#ScannedLabelTable').find(':checkbox:checked').parents('tr');

 var serial, kanbanNumber, customer, description, quantity;

    $.each(selectedItems, function (i, item) {

        var td = $(this).children('td');

        for (var i = 0; i < td.length; ++i)
        {

            serial = td[1].innerText;
            kanbanNumber = td[2].innerText;
            customer = td[3].innerText;
            description = td[4].innerText;
            quantity = td[5].innerText;

        }

        console.log(serial + ' ' + kanbanNumber + ' ' + customer + ' ' + description + ' ' + quantity);

    });

   $.ajax({
                    url: SEND_TO_TEXTFILE_PAGE
                    , data: "labelSerial=" + serial + "&kanbanNumber=" + kanbanNumber + "&customer="
                            + customer + "&description=" + description + "&quantity=" + quantity 
                    , dataType: 'json'
                    , success: function (status) {
                                                    if (status.Error) {
                                                        alert(status.Error);
                                                    }
                                                }
                    , error: Hesto.Ajax.ErrorHandler
                });

 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T08:37:43.783

编辑：对不起，我一定是读得太快了。这应该这样做。创建一个数组并在循环中将数据对象添加到其中。

如果您只是使用键值对创建一个 json 对象，则可以将该对象发送到您的 c# 控制器。

```
 function selectedRows() {
        var selectedItems = $('#ScannedLabelTable').find(':checkbox:checked').parents('tr');
        var serial, kanbanNumber, customer, description, quantity;
        var dataArray = new Array();

        $.each(selectedItems, function (i, item) {

            var td = $(this).children('td');

            for (var i = 0; i < td.length; ++i)
            {
                var InfoObject = {
                    serial: td[1].innerText;
                    kanbanNumber: td[2].innerText;
                    customer: td[3].innerText;
                    description: td[4].innerText;
                    quantity: td[5].innerText;
                };
                dataArray.push(InfoObject);
            }
    });

    $.ajax({
        url: SEND_TO_TEXTFILE_PAGE
        , data: dataArray
        , dataType: 'json'
        , success: function (status) {
            if (status.Error) {
                alert(status.Error);
            }
         }
         , error: Hesto.Ajax.ErrorHandler
    });
} 
```

# php - 使用simpleXML解析带有嵌套命名空间的XML？

> ID：15105457
> 
> 赞同：2
> 
> 时间：2013-02-27T06:19:22.387
> 
> 标签：php, xml-parsing, simplexml

下面是xml文件的内容：

```
 <?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<w:document xmlns:ve="http://schemas.openxmlformats.org/markup-compatibility/2006" xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" xmlns:m="http://schemas.openxmlformats.org/officeDocument/2006/math" xmlns:v="urn:schemas-microsoft-com:vml" xmlns:wp="http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing" xmlns:w10="urn:schemas-microsoft-com:office:word" xmlns:w="http://schemas.openxmlformats.org/wordprocessingml/2006/main" xmlns:wne="http://schemas.microsoft.com/office/word/2006/wordml">
    <w:body>
        <w:p w:rsidR="00546015" w:rsidRDefault="00546015">
            <w:r>
                <w:t xml:space="preserve">Hello </w:t>
            </w:r>
            <w:proofErr w:type="spellStart"/>
            <w:r>
                <w:t>Doctor</w:t>
            </w:r>
            <w:proofErr w:type="spellEnd"/>
            <w:r>
                <w:t>,</w:t>
            </w:r>
        </w:p>
        <w:p w:rsidR="00546015" w:rsidRDefault="00546015" w:rsidP="00B72192">
            <w:r>
                <w:t xml:space="preserve">I hope you are doing well. Thanks for taking the time to speak with us on Skype yesterday. It is always a pleasure talking with you. </w:t>
            </w:r>
        </w:p>
        <w:p w:rsidR="00546015" w:rsidRDefault="00546015"/>
        .
        .
        .
        .
        .
        and this list goes on 
```

这是我的启动代码，但不确定这是我遵循的正确方法还是有更好的方法来实现这一目标？

```
// load the xml into the object
$xml = simplexml_load_file('word/document.xml');

//Use that namespace
$namespaces = $xml->getNameSpaces(true);

//Now we don't have the URL hard-coded
$w_doc = $xml->children($namespaces['w']);
$document = $w_doc->document;

$w_body = $document->document->children($namespaces['w']);

$body = $w_body->body; 
```

如何遍历元素以获得内容`<w:t>`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T06:26:59.187

Xpath 可能是最简单的：

```
// load the xml into the object
$xml = simplexml_load_file('word/document.xml');

//Use that namespace
$namespaces = $xml->getNameSpaces(true);

$xml->registerXPathNamespace('w', $namespaces['w']);

$nodes = $xml->xpath('/w:document/w:body//w:t');

foreach($nodes as $node) {
  echo (string) $node . "\n\n";
} 
```

# wpf - wpf 使用键盘[Ctrl + RightArrow/leftArrow] 选择多个 ListboxItems（即图像）

> ID：15105459
> 
> 赞同：0
> 
> 时间：2013-02-27T06:19:33.720
> 
> 标签：wpf, select, keyboard, listboxitems

我已经对列表框项目进行了分组，我可以通过 SelectionMode="Extended" 或 "Multiple" 选择 "Multiple" 项目。现在我在“排序”中有两个问题和一件事

1.  什么时候

> [选择模式=“扩展”]

我可以通过按下并使用鼠标选择项目来选择多个项目，一旦我将鼠标移动到其他控件，我就会失去我的选择。

2.我无法使用键盘选择多个项目，也无法使用箭头键前往 listboxItems（即）“图像”。

1.  我想对分组的项目进行排序/排列。任何人都可以提前指导这些..thnx。

    ```
     <CollectionViewSource x:Key="CharacterCollectionView" 
        Source="{Binding}" >
            <CollectionViewSource.GroupDescriptions>
                <PropertyGroupDescription PropertyName="Name" />
             </CollectionViewSource.GroupDescriptions>
            <!--<CollectionViewSource.SortDescriptions>
                <cm:SortDescription PropertyName="First" />
            </CollectionViewSource.SortDescriptions>-->
        </CollectionViewSource>

        <ItemsPanelTemplate x:Key="HorizontalItemsPanel">
            <WrapPanel  Orientation="Horizontal" HorizontalAlignment="Stretch" />
        </ItemsPanelTemplate>

               <Style x:Key="myListboxStyle">
            <Style.Resources>
                <!-- Background of selected item when focussed -->
                <LinearGradientBrush x:Key="{x:Static SystemColors.HighlightBrushKey}" StartPoint="0.5,0" EndPoint="0.5,1">
                    <GradientStop Color="#66000000" Offset="0" />
                    <GradientStop Color="#33000000" Offset="1" />
                </LinearGradientBrush>
                <!-- Background of selected item when not focussed -->
                <LinearGradientBrush x:Key="{x:Static SystemColors.ControlBrushKey}" StartPoint="0.5,0" EndPoint="0.5,1">
                    <GradientStop Color="#66000000" Offset="0" />
                    <GradientStop Color="#33000000" Offset="1" />
                </LinearGradientBrush>
            </Style.Resources>
        </Style>

    </Window.Resources>

        <DockPanel>
        <StackPanel Orientation="Vertical" DockPanel.Dock="Left" Background="#336699" VerticalAlignment="Stretch" HorizontalAlignment="Stretch" >
        <ListBox
            Margin="20,20,20,5" DataContext="{Binding}"
            ItemsSource="{Binding Source={StaticResource CharacterCollectionView}}" 
            DockPanel.Dock="Top" x:Name="MyList" MouseEnter="MyListEvent"
            Width="700" SelectionMode="Extended"    Style="{StaticResource myListboxStyle }"
            Height="700" Background="LightGray" IsSynchronizedWithCurrentItem="True" 
            ScrollViewer.CanContentScroll="True" SelectedIndex="1"
            ScrollViewer.VerticalScrollBarVisibility="Visible" VerticalAlignment="Stretch" HorizontalAlignment="Stretch"   
            ScrollViewer.HorizontalScrollBarVisibility="Disabled" PresentationTraceSources.TraceLevel="High"  >

            <ListBox.ItemContainerStyle>
                <Style TargetType="{x:Type ListBoxItem}">
                    <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
                    <Setter Property="VerticalContentAlignment" Value="Stretch"/>
                    <Setter Property="Padding" Value="0"/>
                    <Setter Property="Margin" Value="1"/>
                    <Setter Property="BorderBrush" Value="Green"/>
                    <Setter Property="Width" Value="{Binding Path=Value, ElementName=sizeSlider, Mode=TwoWay}"/>
                    <Setter Property="Height" Value="{Binding Path=Value, ElementName=sizeSlider, Mode=TwoWay}"/>

                                               <!--<Style.Triggers>
                        <Trigger Property="IsKeyboardFocusWithin" Value="True">
                            <Setter Property="IsSelected" Value="True" />
                        </Trigger>
                    </Style.Triggers>-->

                </Style>
            </ListBox.ItemContainerStyle>

            <ListBox.ItemsPanel>
                <ItemsPanelTemplate>
                    <WrapPanel Orientation="Horizontal" HorizontalAlignment="Stretch" Background="LightSteelBlue"   />
                </ItemsPanelTemplate>
            </ListBox.ItemsPanel>

            <ListBox.ItemTemplate>
                <DataTemplate>
                    <Viewbox Stretch="Fill" HorizontalAlignment="Stretch" >
                        <Border BorderThickness="1" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" DataContext="{Binding}" BorderBrush="IndianRed"   Margin="0" Height="Auto">
                            <DockPanel>
                                <Image
                                    DockPanel.Dock="Top"
                                    Width="150" Margin="5"
                                    HorizontalAlignment="Stretch"
                                    VerticalAlignment="Stretch"
                                    Height="Auto"  x:Name="Myimage"
                                    Source="{Binding Path=ImageFilepath[0]}"/>
                                <Grid>
                                    <Label Content="{Binding Path=Name[0]}" HorizontalContentAlignment="Center" FontWeight="Normal"   FontSize="13"  />
                                </Grid>
                            </DockPanel>
                        </Border>
                    </Viewbox>
                </DataTemplate>
            </ListBox.ItemTemplate>

                     <ListBox.GroupStyle>
                <GroupStyle>
                    <GroupStyle.HeaderTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding Name}" FontSize="18"  Height="Auto" Background="Transparent" FontWeight="Medium"  />
                        </DataTemplate>
                    </GroupStyle.HeaderTemplate>
                    <GroupStyle.Panel>
                        <ItemsPanelTemplate>
                            <WrapPanel Orientation="Horizontal"     HorizontalAlignment="Stretch" Background="White"        />
                        </ItemsPanelTemplate>
                    </GroupStyle.Panel>
                        <GroupStyle.ContainerStyle>

                            <Style TargetType="{x:Type GroupItem}">
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="{x:Type GroupItem}">
                                            <GroupBox Header="{Binding Name}" BorderBrush="#336699" BorderThickness="2" Margin="5">
                                                <ItemsPresenter />
                                           </GroupBox>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </GroupStyle.ContainerStyle>
                    </GroupStyle>
               </ListBox.GroupStyle>

            </ListBox>
        <StackPanel Grid.Row="1" HorizontalAlignment="Center" Orientation="Horizontal" Margin="2,0,5,5">
            <TextBlock Width="Auto" Text="Min" Foreground="White" FontWeight="Bold" FontSize="14"  Margin="2" Padding="0" HorizontalAlignment="Right"  />
            <Slider
            Name="sizeSlider"
            Width="300" Orientation="Horizontal"  
            Value="200" Background="PowderBlue"      
            IsSnapToTickEnabled="True"
            Minimum="150" Maximum="250"
            TickPlacement="BottomRight"
            TickFrequency="50"
            AutoToolTipPrecision="10"
            AutoToolTipPlacement="TopLeft"  
            IsDirectionReversed="False"   
            IsMoveToPointEnabled="False" />

                <TextBlock Width="Auto" Text="{Binding Value, ElementName=sizeSlider}" Foreground="White" FontWeight="Bold" FontSize="14"  Margin="2" Padding="0" />
        </StackPanel> 
    ```

# android - 无法查看日历

> ID：15105461
> 
> 赞同：1
> 
> 时间：2013-02-27T06:19:37.940
> 
> 标签：android, calendar, samsung-mobile

在我的应用程序中，我想使用代码/以编程方式打开设备默认日历。我正在使用这段代码：

```
private void viewAllCalender() {
        // TODO Auto-generated method stub
        Intent i = new Intent();
        if(Build.VERSION.SDK_INT >= 8 && Build.VERSION.SDK_INT <= 14){
            i.setClassName("com.android.calendar","com.android.calendar.LaunchActivity");
        }else if(Build.VERSION.SDK_INT >= 15){    
            i.setClassName("com.google.android.calendar", "com.android.calendar.LaunchActivity");
        }else{
            i.setClassName("com.android.calendar","com.android.calendar.LaunchActivity");
        }
        startActivity(i);
    } 
```

**它适用于所有设备，但不适用于 SAMSUNG S3 -（构建 SDK 版本 - 17）**

请帮我弄清楚问题是什么？？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T06:32:53.400

你必须意识到你不能指望安卓设备有一个特定的应用程序。甚至无法安装播放应用程序。这样做的正确方法是不使用 .setClassName ，然后让用户决定要做什么。

有十几种不同的日历应用程序，每个手机制造商都有自己的...

**编辑**

如果你想向日历添加一个事件，你可以使用我的 CalendarOrganizer 来处理很多这些问题：

```
public class CalendarOrganizer {
    private final static int ICE_CREAM_BUILD_ID = 14;
    /**
     * Creates a calendar intent going from startTime to endTime
     * @param startTime
     * @param endTime
     * @param context
     * @return true if the intent can be handled and was started, 
     * false if the intent can't be handled
     */
    public static boolean createEvent(long startTime, long endTime, String title, String description, 
            String location, boolean isAllDay, Context context) {
        Intent intent = new Intent(Intent.ACTION_EDIT);
        int sdk = android.os.Build.VERSION.SDK_INT;
        if(sdk < ICE_CREAM_BUILD_ID) {
            // all SDK below ice cream sandwich
            intent.setType("vnd.android.cursor.item/event");
            intent.putExtra("beginTime", startTime);
            intent.putExtra("endTime", endTime);
            intent.putExtra("title", title);
            intent.putExtra("description", description);
            intent.putExtra("eventLocation", location);
            intent.putExtra("allDay", isAllDay);

//          intent.putExtra("rrule", "FREQ=YEARLY");
        } else {
            // ice cream sandwich and above
            intent.setType("vnd.android.cursor.item/event");
            intent.putExtra(CalendarContract.EXTRA_EVENT_BEGIN_TIME, startTime);
            intent.putExtra(CalendarContract.EXTRA_EVENT_END_TIME, endTime);
            intent.putExtra(Events.TITLE, title);
            intent.putExtra(Events.ACCESS_LEVEL, Events.ACCESS_PRIVATE);
            intent.putExtra(CalendarContract.EXTRA_EVENT_ALL_DAY , isAllDay);
            intent.putExtra(Events.DESCRIPTION, description);
            intent.putExtra(Events.EVENT_LOCATION, location);

//          intent.putExtra(Events.RRULE, "FREQ=DAILY;COUNT=10") 
        }
        try {
            context.startActivity(intent);
            return true;
        } catch(Exception e) {
            return false;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T07:31:48.583

要打开日历应用程序，请参阅意图视图指南[http://developer.android.com/guide/topics/providers/calendar-provider.html#intent-view](http://developer.android.com/guide/topics/providers/calendar-provider.html#intent-view)

# android - 如何在android中使用opencv从另一帧中减去一帧

> ID：15105462
> 
> 赞同：3
> 
> 时间：2013-02-27T06:19:41.513
> 
> 标签：android, opencv, frame, subtraction

我正在处理视频的帧，我想从其他帧中减去一帧以找出差异，但我不知道如何继续。我尝试将我的位图帧转换为垫子，然后减去它们，但它不起作用。我正在将 opencv 2.4.3 用于 mat 函数。谁能告诉我该怎么做。如果可能的话，用代码片段解释。

我试过这样的东西

```
 Bitmap myBitmap1 = BitmapFactory.decodeFile("/mnt/sdcard/Frames/mpgFrames/image001.jpg");  
    Bitmap myBitmap2 = BitmapFactory.decodeFile("/mnt/sdcard/Frames/mpgFrames/image002.jpg");  

    int width = myBitmap1.getWidth();
    int height = myBitmap1.getHeight();

    Mat  imgToProcess1 = new Mat(height, width, CvType.CV_8UC4);
    Mat  imgToProcess2 = new Mat(height, width, CvType.CV_8UC4);
    Mat  imgToProcess = new Mat(height, width, CvType.CV_8UC4);

    Utils.bitmapToMat(myBitmap1, imgToProcess1); 
    Utils.bitmapToMat(myBitmap2, imgToProcess1);        
    imgToProcess = imgToProcess1-imgToProcess2; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T15:35:05.987

如果你只是从另一帧中减去一个帧，你最终会得到一个只包含第二帧比第一帧值更高的区域的图像。

要获得*差异*，您需要使用`absdiff`：

```
absdiff(imgToProcess1, imgToProcess2, imgToProcess); 
```

这将为您提供实际差异的矩阵，但如果您想要差异区域的掩码，您可以对结果应用阈值：

```
Mat mask(imgToProcess.rows, imgToProcess.cols, CV_8U);
cvtColor(imgToProcess, mask, CV_RGB2GRAY, 1); //your conversion specifier may vary
threshold(mask, mask, 0, 255, CV_THRESH_BINARY); 
```

`0`可以调整最小阈值（上）。如果您使用的是 JPEG 图像，则可能需要稍微增加它以考虑编码噪声。

# jetty - 如何在 Jetty 上将 IP 地址默认为 https

> ID：15105463
> 
> 赞同：1
> 
> 时间：2013-02-27T06:19:48.913
> 
> 标签：jetty

使用 Jetty 作为应用服务器。如果我在浏览器中输入 IP 地址，如何使其默认为 https？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T09:13:13.763

首先，您需要为 https 配置一个连接器，如下所述：

[http://www.eclipse.org/jetty/documentation/current/configuring-ssl.html](http://www.eclipse.org/jetty/documentation/current/configuring-ssl.html)

如果您只想允许 https，请按照此处所述向您的 Web 应用程序添加安全约束：

[http://docs.oracle.com/javaee/5/tutorial/doc/bncbe.html#bncbm](http://docs.oracle.com/javaee/5/tutorial/doc/bncbe.html#bncbm)

这会将发送到 http 连接器的所有请求重定向到 https 连接器。

# php - 通知 Java 脚本 (jsNotifications) 更改为无需单击 PHP 代码即可运行

> ID：15105465
> 
> 赞同：0
> 
> 时间：2013-02-27T06:20:03.933
> 
> 标签：php, javascript, notifications

您好，我需要在 java 脚本中发出通知，我的网页将更改页面语言以显示客户端语言的网页。

我使用这段代码：

```
if ($client_languaje == $system_actual_languaje) {
    // Idioma Correcto
} else {
if ($client_languaje == "es") {
    $red_idioma = "Spanish";
header('Location: index.php?&language=$red_idioma');
} else if ($client_languaje == "en") {
    $red_idioma = "English";
header('Location: index.php?&language=$red_idioma');

    } else {
            $red_idioma = "English";
header('Location: index.php?&language=$red_idioma');
        }

} 
```

我需要通知客户该语言已更改或我不提供该语言的翻译。我更喜欢图形化的 java 脚本通知。我想使用这个：jsNotifications (http://code.google.com/p/jsnotifications/)。

这是我要显示的通知示例：http: [//www.lewebmonster.com/proyectos/classes-javascript/jsNotifications/demo/](http://www.lewebmonster.com/proyectos/classes-javascript/jsNotifications/demo/)

如果需要，您可以使用此链接下载：http: [//www.lewebmonster.com/proyectos/classes-javascript/jsNotifications/lewebmonster-clase-javascript-jsnotifications.zip](http://www.lewebmonster.com/proyectos/classes-javascript/jsNotifications/lewebmonster-clase-javascript-jsnotifications.zip)

我现在需要加载：

**这个java脚本在clic上运行：**

```
$(function(){
    //create a new instance of jsNotifications class and set up the general settings 
    var objInstanceName=new jsNotifications({
        autoCloseTime : 10,
        showAlerts: true,
        title: 'Notificación de Lenguaje'
    });

    //check the browser support
    if(objInstanceName.isAvailable()){
        //show the bar to Chrome/Chromium users
        if(objInstanceName.getStatus()==1) $('#divBottomBar').fadeIn(1200);
    }   
    //error message
    $('#btnError').on('click',function(){
        objInstanceName.show('error','Todavía no contamos con la traducción de tu idioma, ponemos a tu disposición el traductor google para que te ayude a traducir nuestra web',false,
        'Error en Lenguaje');
    });
    //ok message
    $('#btnOK').on('click',function(){
        objInstanceName.show('ok','Su idioma fue modificado automáticamente para que se sienta más cómodo, puede revertir esta función seleccionando el idioma manualmente del menú desplegable.');
    });

    //show html notification
    $('#btnHTML').on('click',function(){
        objInstanceName.showHTML('message.html',true);
    });
}); 
```

**我需要有这样的东西：**

```
If ($a == “a”) {
//show were the notification without need a click on a button
} 
```

我认为我需要更改 on('click',function... 并从 PHP 调用，但我需要一些帮助才能实现此功能。我将不胜感激并感谢您的帮助。

问候，亚历克斯！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T09:20:02.563

$('#body_id').onload(function(){ //执行决定客户端语言的函数代码

})

# javascript - 正确的点击格式

> ID：15105466
> 
> 赞同：1
> 
> 时间：2013-02-27T06:20:07.370
> 
> 标签：javascript, jquery

这样做的正确方法是什么？

```
$chatterhtml .= '<span style="float:right;" >
          <a href="javascript:void(0);" onClick="deletecmnt(this, "'.$val['id'].'", "'.BASE_URL.'");" title="Delete Chatter">x</a>
                </span>'; 
```

我在 Firefox 中收到一个错误，`SyntaxError: syntax error deletecmnt(this,`但这一直有效，直到我从输入文本更改为文本区域。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T06:25:34.207

问题是您使用引号来分隔 javascript*和*HTML 中的值。结果类似于： `onClick="deletecmnt(this, "0", "someurl.html");"` 这是无效的。此处的 onClick 被截断为 just`onClick="deletecmnt(this, "`其余的被视为无效的 HTML 属性数据

相反，您应该执行以下操作：

```
$chatterhtml .= "<span style=\"float: right;\">" .
  "<a href=\"javascript:void(0);\" onclick=\"deletecmnt(this, '" . $val['id'] . "', '" . BASE_URL . "');\" title=\"Delete Chatter\">x</a>" .
  "</span>"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T06:28:33.223

您的结果 HTML 无效。您在双引号内有双引号未转义。试试这个

```
$chatterhtml .= '<span style="float:right;" ><a href="javascript:void(0);" onClick="deletecmnt(this, \''.$val['id'].'\', \''.BASE_URL.'\');" title="Delete Chatter">x</a></span>'; 
```

# python - 如何访问字典项目作为属性，反之亦然

> ID：15105468
> 
> 赞同：1
> 
> 时间：2013-02-27T06:20:27.250
> 
> 标签：python

以下是我要在 python 中实现的要求：我有一个名为 context 的字典，它将从程序的各个部分更新。

现在我必须创建一个名为的 obj`env`来保存字典上下文和环境变量字典。

`env`对象应该具有字典类的所有特征，应该可以访问字典的项目作为对象的属性。

例如，

> `context = {'install_path' : '/home/xyz','cwd' : '/home/xyz/Desktop'}`

这

> `context` 字典将从程序的各个部分更新。

现在我必须创建`env`包含上下文字典和环境字典的对象。并且应该可以将字典的项目作为`env`对象的属性来访问。

例如：

```
print(env.install_path) # accessing item of context dictionary
print(env.os) #accessing environmental variable print(env)
print(env['install_path'])
print(env) 
```

应产生如下输出：

> ```
>  /home/xyz linux 
>  /home/xyz
>  {'install_path':'/home/xyz','cwd':'/home/xyz/Desktop'}
>  all envrionmental variables 
> ```

稍后当上下文字典更新时，`env`对象也应该更新。

请帮助如何实现这一目标。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T10:10:14.587

这是我见过的最简单的方法：

```
class AttrDict(dict):
    def __init__(self, *args, **kwargs):
        super(AttrDict, self).__init__(*args, **kwargs)
        self.__dict__ = self

if __name__ == '__main__':
    o = AttrDict(x=10)
    o.y = 20
    o['z'] = 30
    print o.x, o['y'], o.z 
```

输出：

```
10 20 30 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T06:37:12.233

Create a subclass of dict.

Objects have methods that get called if an attribute is missing. You can override the default implementation of these methods to do dictionary get and set operations.

```
class AttributeDict(dict):
    def __getattr__(self, attr):
        return self[attr]
    def __setattr__(self, attr, value):
        self[attr] = value 
```

Previous discussion [here](https://stackoverflow.com/questions/4984647/accessing-dict-keys-like-an-attribute-in-python)

If you need to create a new AttributeDict from an existing dictionary, you can use the following:

```
context = {'install_path' : '/home/xyz','cwd' : '/home/xyz/Desktop'}
new_dict = AttributeDict(context)
print new_dict.install_path 
```

If you want a different object that just references an existing dictionary, use this

```
class ReferencedDict(object):
    def __init__(self, reference):
        self.ref = reference
    def __getattr__(self, value):
        return self.ref[value]

env = ReferencedDict(context)
print(env) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T08:44:11.780

这样的事情应该可以解决问题：

```
class DictWithReference(dict):

    def __init__(self, *args, **kwargs):
        self._ref_other = kwargs.pop("ref", {})
        super(DictWithReference, self).__init__(*args, **kwargs)

    def __getattr__(self, attr):
        return self.__getitem__(attr)

    def __getitem__(self, key):
        try:
            return super(DictWithReference, self).__getitem__(attr)
        except KeyError:
            return self._ref_other[attr] 
```

用法：

```
>>> context = {'install_path' : '/home/xyz','cwd' : '/home/xyz/Desktop'}
>>> env = DictWithReference({'foo': 'bar'}, ref=context)
>>> env.foo
'bar'
>>> env['foo']
'bar'
>>> env.install_path
'/home/xyz'
>>> env['install_path']
'/home/xyz' 
```

# android - 对于 ormlite 和 sqlcipher，queryforall() 不起作用

> ID：15105470
> 
> 赞同：0
> 
> 时间：2013-02-27T06:20:35.353
> 
> 标签：android, sql, sqlite, ormlite, sqlcipher

我一起使用了 sqlcipher 和 ormlite。在我的项目中导入 net.sqlicipher 和 net.sqlicipher.database 包并下载 ormlite-android-sqlcipher.jar。我已经为 DatabaseHelper 类构造函数提供了密码，所以当我插入数据时它工作正常。但是在获取记录时 queryforall() 抛出 java.lang.NoSuchMethodError: net.sqlcipher.database.SQLiteDatabase.rawQuery 异常。但我在 sqlitedatabse 类中有那个方法。如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T13:42:33.610

SQLCipher 在该类上没有`queryForAll`方法`SQLiteDatabase`。您可以使用`rawQuery`发送一个 SQL 查询，该查询将返回`Cursor`您的结果。

# java - 比较包含 Singleton 实例的两个变量

> ID：15105473
> 
> 赞同：0
> 
> 时间：2013-02-27T06:20:46.430
> 
> 标签：java

假设我有两个变量 abc 和 xyz 如下：

```
Untitled abc = Untitled.getInstance();
Untitled xyz = Untitled.getInstance(); 
```

如何比较这两者以检查两者是否包含相同的实例？我的意思是我想验证 Untitled 是否是 Singleton 类。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T06:23:28.250

如果我没记错的话，我想你在这里问了两个问题。

要检查 abc 和 xyz 是否是相同的实例，只需使用 '==' 运算符。它检查引用相等性。

```
if (abc == xyz)
{
  //true
} 
```

要检查对象是否是特定类的实例，

```
if(obj instanceof ClassName)
{

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T06:24:23.577

您可以比较两个变量`a == b`以查看它们是否引用同一个对象，但这不一定意味着它们是单例，如果像这样比较，指向同一个对象的两个变量也会返回相同的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T06:25:36.710

检查 abc 和 xyz 的参考。你会看到同样的结果。 `if(abc==xyz)`它会回来`true`的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-05T07:38:18.173

对于 JUnit 测试，您可以使用类似的东西。

```
import static org.junit.Assert.assertSame;

assertSame("Objects are not same ",expected, actual); 
```

它验证 if (expected == actual) 并且不调用 equals() 方法的调用。

# android - Android Google 地图签名的 Api 密钥问题，地图未加载到我的应用程序中？

> ID：15105476
> 
> 赞同：-1
> 
> 时间：2013-02-27T06:20:50.053
> 
> 标签：android, google-maps, google-maps-api-3

在我的应用程序中，我使用谷歌地图 API，所以我已经为谷歌地图生成了 API 密钥，当我使用 eclipse 导出生成密钥时，谷歌地图在我的应用程序正常工作之前无法正常工作，现在它显示灰色背景。所以请帮助解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T06:23:29.787

请检查您是否在 Android 清单文件中添加了 INTERNET 权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T06:23:39.490

您需要使用您从中签署 APK 的新密钥库生成一个新的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T06:26:46.020

清理并卸载旧的然后安装新的然后尝试。和您的 Android 清单文件中的 INTERNET 许可。

# python-2.7 - scipy.weave.inline 命令如何知道代码之前是否已编译？

> ID：15105482
> 
> 赞同：0
> 
> 时间：2013-02-27T06:21:05.067
> 
> 标签：python-2.7, scipy

我今天尝试使用 scipy.weave.inline 并且效果很好。第一次运行程序后，它知道 C 代码之前已经编译过，之后运行得更快。我想知道它是如何知道的以及编译后的代码在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T06:42:03.763

`weave` has various caching strategies, as can be seen [from the source](https://github.com/scipy/scipy/blob/master/scipy/weave/inline_tools.py#L361): a local cache that's just a dictionary keyed by the source code, and then falling back to [a function catalog](https://github.com/scipy/scipy/blob/master/scipy/weave/catalog.py) that has its own cache or saves things on disk.

# javascript - Javascript 对象 - 使用创建之前在对象中定义的变量

> ID：15105484
> 
> 赞同：0
> 
> 时间：2013-02-27T06:21:09.927
> 
> 标签：javascript

我怎样才能做到这一点？

```
var people = Array();

people.push({
    name: "John",
    height_in_cm : 190,
    height_in_inches : this.height_in_cm * 0.39
}); 
```

这是行不通的。很明显，该对象尚未创建。有什么技巧可以让它工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T06:26:11.700

你可以先声明对象然后推送它：

```
var people = [];

var obj = {
  name: "John",
  height_in_cm : 190
};
obj.height_in_inches = obj.height_in_cm * .39;

people.push(obj); 
```

根据您的情况，您还可以创建一个“Person”对象/类：

```
var person = (function personModule() {
  function Person(props) {
    this.name = props.name;
    this.height_in_cm = props.height_in_cm;
    this.height_in_inches = this.height_in_cm * .39;
  }

  Person.prototype = {...}; // public methods if necessary

  return function(props) {
    return new Person(props);
  }
}());

var people = [];
people.push(person({ name: 'John', height_in_cm: 190 }));

console.log(people[0].height_in_inches); //=> 74.1 
```

# ruby - RallyRestToolkitForRuby - project_scope_up 和 project_scope_down 似乎不起作用

> ID：15105486
> 
> 赞同：2
> 
> 时间：2013-02-27T06:21:13.143
> 
> 标签：ruby, rally

我正在尝试使用 RallyRestToolkitForRuby 查询项目及其子项目中的所有故事。我正在尝试使用下面的代码片段，project_scope_up 和 project_scope_down 似乎与结果无关，包括指定树之外的项目的结果。这里有什么不正确的？

```
config = {:base_url => "https://rally1.rallydev.com/slm"}
config[:username]   = "xxxxxxxxxx"
config[:password]   = "xxxxxxxxx"
config[:workspace]  = "xxxxxxxxxxxxxxxxxxxxxxxxxxxxx"
config[:project]    = "xxxxxxxxx"
config[:headers]    = headers 
RallyAPI::RallyRestJson.new(config)
startdate = DateTime.parse "2013-02-20T00:00:00.000"
enddate = DateTime.parse "2013-02-23T00:00:00.000"
query = RallyAPI::RallyQuery.new()
query.type = "hierarchicalrequirement"
query.fetch = "Iteration,Capitalizeable,CapBucket,FormattedID,DirectChildrenCount,RevisionHistory,Revisions"
query.page_size = 20       #optional - default is 200
query.limit = 20          #optional - default is 99999
query.project_scope_up = false
query.project_scope_down= true
query.query_string = "((LastUpdateDate > \"#{startdate.to_s}\") AND (LastUpdateDate < \"#{enddate.to_s}\"))"
results = @rally.find(query) 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T16:30:13.860

在上面的示例中，您似乎没有为范围设置项目 - 确保您有一个行设置 query.project = 类似：query.project = {"_ref" => " [https:// rally1.rallydev.com/slm/webservice/1.25/project/12345.js](https://rally1.rallydev.com/slm/webservice/1.25/project/12345.js) “}

或者如果您将项目对象存储在变量中： myproject = @rally.find_project(workspace, "Project Name") query.project = myproject

希望有帮助。

# xml - 使用 XSLT 显示数据

> ID：15105487
> 
> 赞同：0
> 
> 时间：2013-02-27T06:21:14.357
> 
> 标签：xml, xslt

我有 xml 文件，它是

```
<?xml version="1.0" encoding="UTF-8" ?>
<?xml-stylesheet type="text/xsl" href="test1.xsl"?>
<products>
    <node>
        <node>
            <dist_value>
            <node> 55 </node>
            <node> 59 </node>
            <node> 72 </node>
            </dist_value>
            <reg_str_dt>
            <node> 2013-08-03 17:29:00 </node>
            </reg_str_dt>
            <product_id> 1 </product_id>
        </node>
    </node>
    <node>
        <node>
            <dist_value>
            <node> 72 </node>
            <node> 19 </node>
            <node> 49 </node>
            </dist_value>
            <reg_str_dt>
            <node> 2013-10-25 17:29:00 </node>
            </reg_str_dt>
            <product_id> 2 </product_id>
        </node>
    </node> 
    <node>
        <node>
            <dist_value>
            <node> 12 </node>
            <node> 548 </node>
            <node> 112 </node>
            </dist_value>
            <reg_str_dt>
            <node> 2013-08-12 17:29:00 </node>
            </reg_str_dt>
            <name> test </name>
            <product_id> 3 </product_id>
        </node>
    </node>
</products> 
```

我已经编写了这个 xslt 来显示产品的所有数据，其中`dist_value\node < 50`将给出产品的输出数据`2 & 3`

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="html" indent="yes" omit-xml-declaration="yes"/>

  <xsl:template match="/">
   <html>
    <body>

     <table border="1">
      <tr><th>Product ID</th><th>Product DATA</th></tr>
      <xsl:apply-templates select="products/node/node" />
     </table>
    </body>
   </html>
  </xsl:template>

  <xsl:template match="products/node/node/dist_value[node &lt; 50]">
   <tr>
    <td><xsl:value-of select="//product_id" /></td>
    <td><xsl:value-of select="products/node/node/*" /></td> 
   </tr>
  </xsl:template> 

</xsl:stylesheet> 
```

我是 xslt 的初学者，这里有些问题

我想输出这样的东西

```
Product ID  |   Product DATA
--------------------------------
2           |dist_value  => 72
            |               19
            |               79
            |reg_str_dt =>  2013-10-25 17:29:00
            |product_id => 2 
```

产品 3 包含名称

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T08:20:05.167

您需要稍微修改模板选择语句。在您的匹配语句中，您正在选择`<dist_value>`节点，因此在模板的其余部分中，选择语句需要相对于该`<dist_value>`节点，如下所示：

```
<xsl:template match="products/node/node/dist_value[node &lt; 50]">
  <tr>
    <td>
      <xsl:value-of select="../product_id" />
    </td>
    <td>
      <xsl:for-each select="./node">
        <xsl:value-of select="."/>
        <br/>
      </xsl:for-each>
      <xsl:value-of select="../reg_str_dt/node" />
    </td>
  </tr>
</xsl:template> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T08:31:48.463

关于 XSLT 要了解的一件事是它具有内置模板的概念。如果它正在寻找一个模板来匹配一个元素，但你的 XSLT 中没有这个模板，那么将使用这些模板。在您的情况下，您首先要查找**节点**元素

```
<xsl:apply-templates select="products/node/node" /> 
```

但是，您的模板匹配**dist_value**元素

```
<xsl:template match="products/node/node/dist_value[node &lt; 50]"> 
```

这意味着 XSLT 将开始使用内置模板，它将输出元素的文本，然后处理任何子元素。你可能应该做这样的事情来匹配**节点**元素。

```
<xsl:template match="products/node/node[dist_value/node &lt; 50]"> 
```

虽然您还需要一个模板来匹配**dist_value**不小于 50的**节点**元素。或者，您可以更改应用模板以仅选择您想要的那些

 **```
<xsl:apply-templates select="products/node/node[dist_value/node &lt; 50]" /> 
```

您遇到的另一个问题是**dist_value**模板中的这一行

```
<xsl:value-of select="//product_id" /> 
```

双斜杠表示它将查找相对于根元素的**product_id**，并始终选择第一个。您真的只需要这样做，以查找相对于当前**节点**元素的 product_id

```
<xsl:value-of select="product_id" /> 
```

这是完整的 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="html" indent="yes" omit-xml-declaration="yes"/>

   <xsl:template match="/">
      <html>
         <body>
            <table border="1">
               <tr>
                  <th>Product ID</th>
                  <th>Product DATA</th>
               </tr>
               <xsl:apply-templates select="products/node/node[dist_value/node &lt; 50]"/>
            </table>
         </body>
      </html>
   </xsl:template>

   <xsl:template match="products/node/node">
      <tr>
         <td>
            <xsl:value-of select="product_id"/>
         </td>
         <td>
            <xsl:apply-templates select="dist_value/node"/>
         </td>
      </tr>
      <tr>
         <td/>
         <td>
            <xsl:value-of select="reg_str_dt/node"/>
         </td>
      </tr>
      <tr>
         <td/>
         <td>
            <xsl:value-of select="product_id"/>
         </td>
      </tr>
   </xsl:template>

   <xsl:template match="dist_value/node">
      <xsl:value-of select="concat(., '&#10;')"/>
   </xsl:template>
</xsl:stylesheet> 
```

当应用于您的 XML 时，将输出以下内容

```
<html>
   <body>
      <table border="1">
         <tr>
            <th>Product ID</th>
            <th>Product DATA</th>
         </tr>
         <tr>
            <td> 2 </td>
            <td> 72 19 49 </td>
         </tr>
         <tr>
            <td/>
            <td> 2013-10-25 17:29:00 </td>
         </tr>
         <tr>
            <td/>
            <td> 2 </td>
         </tr>
         <tr>
            <td> 3 </td>
            <td> 12 548 112 </td>
         </tr>
         <tr>
            <td/>
            <td> 2013-08-12 17:29:00 </td>
         </tr>
         <tr>
            <td/>
            <td> 3 </td>
         </tr>
      </table>
   </body>
</html> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T08:36:32.530

您的代码有很多错误。专注于了解上下文节点、应用模板以及处理器如何迭代节点。您的架构也很尴尬；如果可以，请考虑将“node/node”替换为“product”。

这是一个 XSL：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="html" indent="yes" omit-xml-declaration="yes"/>

<xsl:template match="/">
    <html>
        <body>
            <table border="1">
                <tr><th>Product ID</th><th>Product DATA</th></tr>
                <xsl:apply-templates select="/products/node/node" />
            </table>
        </body>
    </html>
</xsl:template>

<!-- ignore the node with dist_value child by default -->
<xsl:template match="node[ dist_value ]" />
<xsl:template match="node[ dist_value[node &lt; 50] ]" priority="1.0">
    <xsl:variable name="span" select="1 + count( * )" />
    <tr>
        <td align="center" rowspan="{$span}"><xsl:value-of select="product_id" /></td>
    </tr>
    <xsl:apply-templates />
</xsl:template> 

<xsl:template match="name">
    <tr>
        <td>
            <xsl:value-of select="name()" />
            <xsl:text disable-output-escaping="yes"> => </xsl:text>
            <xsl:value-of select="." />
        </td>
    </tr>
</xsl:template>

<xsl:template match="dist_value">
    <tr>
        <td>
            <xsl:value-of select="name()"/>
            <xsl:text disable-output-escaping="yes"> =&gt; </xsl:text>
            <xsl:for-each select="*">
                <xsl:if test="position()>1">
                    <xsl:text>, </xsl:text>
                </xsl:if>
                <xsl:value-of select="normalize-space(.)" />
            </xsl:for-each> 
        </td>
    </tr>
</xsl:template>

<xsl:template match="reg_str_dt">
    <tr>
        <td>
            <xsl:value-of select="name()"/>
            <xsl:text disable-output-escaping="yes"> =&gt; </xsl:text>
            <xsl:value-of select="node" />
        </td>
    </tr>
</xsl:template>

<xsl:template match="product_id">
    <tr>
        <td>
            <xsl:value-of select="name()"/>
            <xsl:text disable-output-escaping="yes"> =&gt; </xsl:text>
            <xsl:value-of select="." />
        </td>
    </tr>
</xsl:template> 
```

这是输出 HTML：

```
<?xml version="1.0" encoding="UTF-8"?>
<html>
   <body>
      <table border="1">
         <tr>
            <th>Product ID</th>
            <th>Product DATA</th>
         </tr>
         <tr>
            <td align="center" rowspan="4">2</td>
         </tr>
         <tr>
            <td>dist_value =&gt; 72, 19, 49</td>
         </tr>
         <tr>
            <td>reg_str_dt =&gt;  2013-10-25 17:29:00</td>
         </tr>
         <tr>
            <td>product_id =&gt;  2</td>
         </tr>
         <tr>
            <td align="center" rowspan="5">3</td>
         </tr>
         <tr>
            <td>dist_value =&gt; 12, 548, 112</td>
         </tr>
         <tr>
            <td>reg_str_dt =&gt;  2013-08-12 17:29:00</td>
         </tr>
         <tr>
            <td>name =&gt;  test</td>
         </tr>
         <tr>
            <td>product_id =&gt;  3</td>
         </tr>
      </table>
   </body>
</html> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-27T08:55:18.963

当涉及到可以出现在`/products/node/node`. `node`它的子元素中的元素数量也更加灵活`/products/node/node`。

**XML 输入**（修改为显示几个额外的测试值来显示）

```
<products>
    <node>
        <node>
            <dist_value>
                <node> 55 </node>
                <node> 59 </node>
                <node> 72 </node>
            </dist_value>
            <reg_str_dt>
                <node> 2013-08-03 17:29:00 </node>
            </reg_str_dt>
            <product_id> 1 </product_id>
        </node>
    </node>
    <node>
        <node>
            <dist_value>
                <node> 72 </node>
                <node> 19 </node>
                <node> 49 </node>
            </dist_value>
            <reg_str_dt>
                <node> 2013-10-25 17:29:00 </node>
                <node>additional test value 1</node>
                <node>additional test value 2</node>
            </reg_str_dt>
            <product_id> 2 </product_id>
        </node>
    </node> 
    <node>
        <node>
            <dist_value>
                <node> 12 </node>
                <node> 548 </node>
                <node> 112 </node>
            </dist_value>
            <reg_str_dt>
                <node> 2013-08-12 17:29:00 </node>
            </reg_str_dt>
            <name> test </name>
            <product_id> 3 </product_id>
        </node>
    </node>
</products> 
```

**XSLT 1.0**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="html" indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="/products" priority="1">
        <html>
            <body>
                <table border="1">
                    <tr>
                        <th>Product ID</th>
                        <th colspan="2">Product DATA</th>
                    </tr>
                    <xsl:apply-templates select="node[node/dist_value/node &lt; 50]"/>
                </table>
            </body>
        </html>
    </xsl:template>

    <xsl:template match="node/node">
        <tr>
            <td>
                <xsl:value-of select="product_id"/>
            </td>
            <td><xsl:value-of select="name(*[1])"/> --></td> 
            <td><xsl:value-of select="*[1]/*[1]"/></td>
        </tr>
        <xsl:apply-templates select="*[not(self::product_id)]"/>
    </xsl:template>

    <!--These 2 templates will handle the data on the same
    row as the Product ID.-->
    <xsl:template match="node/node/*[1]" priority="1">
        <xsl:apply-templates mode="newrow"/>
    </xsl:template>
    <xsl:template match="node/node/*[1]/*[1]" mode="newrow"/>

    <xsl:template match="*" mode="newrow">
        <xsl:call-template name="dataRow"/>
    </xsl:template>

    <xsl:template match="node/node/*/*[not(position()=1)]">
        <xsl:call-template name="dataRow"/>
    </xsl:template>

    <xsl:template name="dataRow">
        <tr>
            <td/>
            <td/>
            <td><xsl:value-of select="."/></td>
        </tr>       
    </xsl:template>

    <xsl:template match="*[not(self::node)]">
        <tr>
            <td/>
            <td><xsl:value-of select="name()"/> --></td>
            <td><xsl:apply-templates/></td>
        </tr>
    </xsl:template>

</xsl:stylesheet> 
```

**HTML 输出**（代码）

```
<html>
   <body>
      <table border="1">
         <tr>
            <th>Product ID</th>
            <th colspan="2">Product DATA</th>
         </tr>
         <tr>
            <td> 2 </td>
            <td>dist_value --&gt;</td>
            <td> 72 </td>
         </tr>
         <tr>
            <td></td>
            <td></td>
            <td> 19 </td>
         </tr>
         <tr>
            <td></td>
            <td></td>
            <td> 49 </td>
         </tr>
         <tr>
            <td></td>
            <td>reg_str_dt --&gt;</td>
            <td> 2013-10-25 17:29:00 
               <tr>
                  <td></td>
                  <td></td>
                  <td>additional test value 1</td>
               </tr>
               <tr>
                  <td></td>
                  <td></td>
                  <td>additional test value 2</td>
               </tr>
            </td>
         </tr>
         <tr>
            <td> 3 </td>
            <td>dist_value --&gt;</td>
            <td> 12 </td>
         </tr>
         <tr>
            <td></td>
            <td></td>
            <td> 548 </td>
         </tr>
         <tr>
            <td></td>
            <td></td>
            <td> 112 </td>
         </tr>
         <tr>
            <td></td>
            <td>reg_str_dt --&gt;</td>
            <td> 2013-08-12 17:29:00 </td>
         </tr>
         <tr>
            <td></td>
            <td>name --&gt;</td>
            <td> test </td>
         </tr>
      </table>
   </body>
</html> 
```

**HTML 输出**（在 IE 中显示）

![在此处输入图像描述](../Images/50f98a0f15f34021a701c47a8884e010.png)**

# clickonce - 如何在 IE10 中检测 ClickOnce？

> ID：15105501
> 
> 赞同：0
> 
> 时间：2013-02-27T06:22:32.003
> 
> 标签：clickonce, internet-explorer-10

我们有一个从我们的站点启动的 ClickOnce 应用程序。我们可以检测浏览器是否在 Firefox、Chrome 和所有版本的 IE 中支持 ClickOnce，除了 Metro 模式下的 IE10。

我相信如果安装了 .Net Framework（应该是），Metro 模式下的 IE10 会启动 ClickOnce 应用程序，但我们无法检测到它会成功启动。如果不支持 ClickOnce，我们希望能够提供带有说明的页面（例如，我们提供指向 Firefox 和 Chrome 插件的链接）。

我看到一个关于确定[IE10 是否处于 Metro 模式](https://stackoverflow.com/questions/12236867/differentiating-between-ie10-desktop-and-metro)的问题，但我需要知道是否支持 ClickOnce。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T06:52:00.437

如果用户运行的是 Windows 8 Pro，他们应该能够使用“Metro”IE10 或桌面 IE10 安装 ClickOnce（我刚刚在我的电脑上尝试过）。

如果用户正在运行 WindowsRT，则用户无法使用任一浏览器安装 ClickOnce 应用程序。

所以你不能只检查操作系统吗？

# javascript - 使用 javascript 进行磁性光标移动

> ID：15105503
> 
> 赞同：3
> 
> 时间：2013-02-27T06:22:41.020
> 
> 标签：javascript, jquery, html, css

当人们打开带有几个图像的网页时，当浏览者将鼠标放在图像之外的某个区域跨度时，有什么方法可以像磁铁一样将鼠标吸引到图像上？有可能吗？请建议。

![磁效应样本图像](../Images/e52c38590795ba2cc321d858dba4fb81.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T06:31:30.570

不，你不能用 JavaScript 控制鼠标指针。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T06:33:43.020

任何网页都无法强制用户的鼠标移动到某个位置。允许这样做会产生巨大的恶意后果。

另一种方法可能是当用户将鼠标悬停在指定区域上时，图像会增长以填充该区域。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T15:58:51.303

亚马逊申请了一项关于基于重力的链接的专利，这在某种程度上类似于这里讨论的内容......

[http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO1&Sect2=HITOFF&d=PALL&p=1&u=%2Fnetahtml%2FPTO%2Fsrchnum.htm&r=1&f=G&l=50&s1=8386927.PN.&OS=PN/8386927&RS =PN/8386927](http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO1&Sect2=HITOFF&d=PALL&p=1&u=%2Fnetahtml%2FPTO%2Fsrchnum.htm&r=1&f=G&l=50&s1=8386927.PN.&OS=PN/8386927&RS=PN/8386927)

我也很想看看如何在 jQuery 中做到这一点，尽管如此！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-07T14:16:45.210

> **是的。**您可以使用 JavaScript 控制鼠标指针。

**这是[来自 Codrops 的一个非常漂亮的例子](https://tympanus.net/Tutorials/CustomCursors/index3.html)。**[您可以在codepen.io](https://codepen.io/search/pens/?depth=everything&order=popularity&page=3&q=custom%20cursor)

上找到很多其他内容。**这是一个：****[NodeCursor](https://codepen.io/hmongouachon/pen/Ygwjrj)**。

```
$(function() {
// init plugin
NodeCursor({
    cursor: true,
    node: true,
    cursor_velocity: 1,
    node_velocity: 0.15,
    native_cursor: "none",
    element_to_hover: ".nodeHover",
    cursor_class_hover: "disable",
    node_class_hover: "expand",
    hide_mode: true,
    hide_timing: 2000
    });
}); 
```

# javascript - 动态 jquerymobile 列切换未刷新

> ID：15105504
> 
> 赞同：1
> 
> 时间：2013-02-27T06:22:41.703
> 
> 标签：javascript, cordova, jquery-mobile

我正在使用 jquerymobile 1.3 -> 列切换表小部件。 [http://view.jquerymobile.com/1.3.0/docs/widgets/table-column-toggle/](http://view.jquerymobile.com/1.3.0/docs/widgets/table-column-toggle/)

我正在动态创建行和列。当我这样做时，列切换模式不起作用。如果我对数据进行硬编码，它就可以工作。有什么问题？

正如他们的文档中所建议的那样，我也很耳目一新。

```
$( "#myTable" ).table-columntoggle( "refresh" ); 
```

我的 Javascript 代码很简单。

```
var tBody = document.getElementById('idTBody');
var tr = document.createElement('TR');
var td = document.createElement('TD');
td.innerHTML = "Some string";
tr.appendChild(td);
tBody.appendChild(tr); 
```

idTbody 是分配给 Tbody 标签的 id。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T03:59:00.017

这似乎是 jquerymobile 1.3.0 中的一个已知错误，将在 1.3.1 中修复。这是链接--> [https://github.com/jquery/jquery-mobile/issues/5640](https://github.com/jquery/jquery-mobile/issues/5640)，这是跟踪链接--> [https://github.com/jquery/jquery-mobile/issues/5570](https://github.com/jquery/jquery-mobile/issues/5570)

# ruby-on-rails - 如何为每个拥有自己网站的多个用户将 Google 分析数据提取到 Rails 应用程序中？

> ID：15105505
> 
> 赞同：2
> 
> 时间：2013-02-27T06:22:43.407
> 
> 标签：ruby-on-rails, ruby, garb-gem

我有一个 Rails 应用程序，用户可以在其中创建项目。对于每个项目，我想让我的用户将一个谷歌帐户与项目相关联，然后提取相关的谷歌分析数据（即页面浏览量、自然流量、付费流量）作为项目仪表板的一部分呈现。为多个用户提取这些谷歌数据的最佳方式是什么，每个用户都会为给定的项目添加自己独特的谷歌分析帐户？

我已经看到一些将 Garb 作为标准 Ruby 库来访问 google API 的引用，但我无法弄清楚如何在我的 rails 应用程序中使用它来提取我正在寻找的相关数据。

Garb 仍然是 Ruby/Rails 的相关解决方案吗？有没有使用 Garb 提取 Google 数据的优秀示例应用程序？很抱歉这个问题的开放性，但我一直在研究这个问题一段时间，但收效甚微。谢谢你的帮助！

# ruby-on-rails - Rails 3.2.12 app sass/compass @import 仅在生产中失败

> ID：15105511
> 
> 赞同：5
> 
> 时间：2013-02-27T06:23:21.753
> 
> 标签：ruby-on-rails, import, sass, asset-pipeline, compass-sass

好的，所以在我的 css.scss 文件中的 @import 需要扩展名之前，我遇到了这个问题：

```
@import 'layout.css.scss' 
```

代替

```
@import 'layout' 
```

不知道为什么这只发生在生产中（在本地我没有问题）。我讨厌必须添加扩展名，不知道为什么，我想我必须输入它只是让我烦恼？:)

我遇到的问题是我似乎无法让指南针在生产中工作。我正在使用 compass-rails gem。我有一个 _config.css.scss 文件，顶部有以下导入：

```
@import "compass";
@import "compass/css3"; 
```

我尝试将 css.scss 添加到它们，然后找不到文件（甚至在本地）。所以我的问题是这样的：

有什么方法可以使用@import 而不必包含文件扩展名？

如果没有，我如何让 Compass 工作？

同样，这只会影响我的生产。

我已经尝试了一些我在 Stackoverflow 上找到的不同的东西，但没有任何帮助。

[Rails 3 应用程序中的 Sass 导入错误 - “找不到或无法读取要导入的文件：指南针”](https://stackoverflow.com/questions/6005361/sass-import-error-in-rails-3-app-file-to-import-not-found-or-unreadable-comp)

我在生产中运行应用程序时得到的确切错误：

```
Completed 500 Internal Server Error in 920ms
ActionView::Template::Error (File to import not found or unreadable: compass. 
```

**更新**

我确实成功地将 .scss 添加到我的指南针导入中

```
@import 'compass.scss' 
```

这不再在本地引发“找不到文件”错误。

但在生产中我仍然收到此错误：

```
ActionView::Template::Error (File to import not found or unreadable: compass.scss 
```

所以这告诉我，也许我的 Compass gem 在生产中不能正常工作？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-15T06:40:16.003

删除你的`Gemfile.lock`，只需将 `gem 'compass'`and`gem 'compass-rails'`放入 Gemfile。在此尝试`bundle install`生产环境之后。

# java - Spring 声明式事务使用 AOP with hibernate，仍然使用默认事务策略

> ID：15105520
> 
> 赞同：0
> 
> 时间：2013-02-27T06:23:52.613
> 
> 标签：java, spring

我正在尝试使用使用 AOP 和休眠的 Spring 事务管理来实现示例应用程序。下面是我的配置文件

```
 <beans xmlns="http://www.springframework.org/schema/beans"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:context="http://www.springframework.org/schema/context"
        xmlns:tx="http://www.springframework.org/schema/tx"
        xmlns:aop="http://www.springframework.org/schema/aop"
        xsi:schemaLocation="http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans-3.2.xsd
        http://www.springframework.org/schema/context 
        http://www.springframework.org/schema/context/spring-context-3.2.xsd
        http://www.springframework.org/schema/tx
        http://www.springframework.org/schema/tx/spring-tx-3.2.xsd
        http://www.springframework.org/schema/aop
        http://www.springframework.org/schema/aop/spring-aop-3.2.xsd ">

    <bean id="txManager"  
      class="org.springframework.orm.hibernate4.HibernateTransactionManager"> 
      <property name="sessionFactory" ref="sessionFactory"></property>
    </bean>

    <!-- Beans Declaration -->
    <bean id="userDAO" class="com.wjb.daoimpl.UserDAOImpl">
        <property name="sessionFactory" ref="sessionFactory"></property>
    </bean>

         <tx:advice id="txAdvice" transaction-manager="txManager">
            <tx:attributes>
           <tx:method name="add*" read-only="true"/>
           </tx:attributes>
         </tx:advice>

         <aop:config>
           <aop:pointcut id="userOperation" expression="execution(* com.wjb.daoimpl.UserDAOImpl.*(..))"/>
         <aop:advisor advice-ref="txAdvice" pointcut-ref="userOperation"/>
         </aop:config>

<!-- Database Configuration -->
<bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
<property name="driverClassName" value="org.postgresql.Driver" />
<property name="url" value="jdbc:postgresql://10.12.30.180:4568/finitedb" />
<property name="username" value="finiteuser" />
<property name="password" value="finiteuser" />
</bean>

    <bean id="sessionFactory" 
     class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">

    <property name="annotatedClasses">
            <list>
                <value>com.wjb.user.model.User1</value>
            </list>
        </property>

    <property name="dataSource">
      <ref bean="dataSource"/>
    </property>

    <property name="hibernateProperties">
       <props>
         <prop key="hibernate.dialect">org.hibernate.dialect.PostgreSQLDialect</prop>
         <prop key="hibernate.show_sql">true</prop>
       </props>
    </property>
 </bean>

</beans> 
```

这是我的 impl 课程

```
public class UserDAOImpl {

    Session session;
    SessionFactory sessionFactory;

    public void setSessionFactory(SessionFactory sessionFactory){
        this.sessionFactory = sessionFactory;
        session = this.sessionFactory.openSession();
    }

    public void addUser(User1 user) {
        session.save(user);
    }

    public SessionFactory getSessionFactory() {
        return sessionFactory;
    }

} 
```

当我运行应用程序时，我在日志中看到以下行，这表明我的 spring 事务没有被调用。

> 2013 年 2 月 27 日上午 11:00:20 org.hibernate.dialect.Dialect 信息：HHH000400：使用方言：org.hibernate.dialect.PostgreSQLDialect 2013 年 2 月 27 日上午 11:00:20 org.hibernate.engine.jdbc.internal .LobCreatorBuilder useContextualLobCreation INFO: HHH000423: Disabling contextual LOB creation as JDBC driver reports JDBC version [3] less than 4 Feb 27, 2013 11:00:20 AM默认事务策略（直接 JDBC 事务）2013 年 2 月 27 日上午 11:00:20 org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory 信息：HHH000397：使用 ASTQueryTranslatorFactory

我错过了什么吗？请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T12:24:55.953

来自 vmoksha 的 Sunilkumar

将此行放入您的 applicationcontext.xml

< tx:注解驱动 />

* * *

并在您的班级中也添加注释 ***@Transaction***

# javascript - 根据 Internet Explorer 版本使用 JSP 加载不同的 JS

> ID：15105531
> 
> 赞同：1
> 
> 时间：2013-02-27T06:24:54.090
> 
> 标签：javascript, html, jsp

我对 JSP 有点陌生，现在我被一个我们大多数人不希望遇到的问题难住了：Internet Explorer 6.0 支持。

我搜索了谷歌并没有找到答案。我的问题是，有没有办法根据浏览器版本在 JSP 中加载不同的 Javascript？

我的算法是：检查 Internet Explorer 版本。如果是 IE6，则加载 ie6.js 否则加载 normal.js。

到目前为止，这就是我加载 JS 的方式。

```
<script type="text/javascript" src="../js/normal.js"></script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T06:29:30.277

您可以使用条件[注释](http://en.wikipedia.org/wiki/Conditional_Comments)为 Internet Explorer 加载不同的 Javascript。

因此，对于您的情况：

```
<!--[if !IE 6]><!-->
    <script type="text/javascript" src="normal.js" />
<!--<![endif]-->
<!--[if IE 6]>
    <script type="text/javascript" src="ie6.js" />
<![endif]--> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T06:31:54.633

你可以通过这样的`navigator`对象来做到这一点：

```
 var ua = navigator.userAgent;
     if(navigator.appName == 'Microsoft Internet Explorer'){
            //check for version

            var re  = new RegExp("MSIE ([0-9]{1,}[\.0-9]{0,})");
            if (re.exec(ua) != null){
              version = parseFloat( RegExp.$1 );
            }
            if(version == 6.0){
               //load specific js for IE 6.0
               var file = document.createElement("script");
               file.setAttribute("type", "text/javascript");
               file.setAttribute("src", "../js/ie_6.js");
               document.getElementsByTagName("head")[0].appendChild(file);
            }
            else{
                //load normal.js for other IE versions.
                var file = document.createElement("script");
                file.setAttribute("type", "text/javascript");
                file.setAttribute("src", "../js/normal.js");
                document.getElementsByTagName("head")[0].appendChild(file);
            }
     } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T10:50:23.350

如果要在服务器端执行此操作，则必须检查`User-Agent`HTTP 标头。在此之后，您可以为当前请求设置一些属性，然后在 JSP 页面中检查该属性：

```
...
String browserString = httpServletRequest.getHeader("User-Agent");

String browserVersion = ...; // Some user agent parsing and version determining

httpServletRequest.setAttribute("browserVersion", browserVersion); 
```

用户代理示例可以在 Internet 上找到，例如[http://www.useragentstring.com/pages/Internet%20Explorer/](http://www.useragentstring.com/pages/Internet%20Explorer/)。

# c++ - 使用指针进行排序的有效算法

> ID：15105532
> 
> 赞同：0
> 
> 时间：2013-02-27T06:25:00.540
> 
> 标签：c++, sorting, linked-list

考虑一个简单的结构：

```
struct Node{
 int val;
 Node *next;
 Node *freeNode;
}; 
```

现在我必须仅使用 freeNode 对给定的链表进行排序，并且该方法必须高效。我不能制作另一个列表并在那里使用某种排序插入。也不能使用*基因组或冒泡排序*。列表中任何元素的指针`freeNode`可以指向列表中的任何元素。

现在我想出了两个想法：

1.  使用 freeNode 创建一个双向链表。

    并进行配对比较，即将第 i 个元素与第 (i+1) 个元素进行比较。当我发现需要交换两个元素时，我交换它们，然后再次从列表的头部开始。

    该算法将超过 O(n)（不确定只是猜测）。这将需要很多时间。

2.  另一种方法是我的 freeNode 指向比它小的 elem。

    例如，如果我有`30->6->14->56>Tail`，那么

    ```
    56->freeNode->14
    30->freeNode->14
    14->freeNode->6
    6->freeNode->NULL. 
    ```

    但同样，这并没有多大帮助，因为当我插入时，`45 or 20`我必须重新安排我的`freeNode`指针。而且，这也不是一个非常有效的方法。

对此有何建议？如何使用`freeNode`来实现更好更高效的排序方法。伪代码可以工作，我实际上更喜欢它而不是真正的代码。

**编辑：您不能使用数组、向量或其他任何东西。只是`freeNode`指针。以任何你想要的方式使用它。保持它为 NULL 或让它指向您选择的元素。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T07:10:29.950

你可以制作一棵二叉树。使用 next 作为你的右子指针和 freeNode 作为你的左子指针。使您应该对根进行排序的第一个节点。然后，取出其余节点并将它们“插入”到新的二叉树中。

编辑：像这样：

你的类型定义：

```
typedef struct Node{
 int val;
 struct Node *next;
 struct Node *freeNode;
} NodeT; 
```

一些定义使此代码更易于阅读：

```
// Conversions to make this code easier to read.
#define pRight freeNode
#define pLeft  next 
```

递归二叉树插入：

```
static void BinTreeInsert( NodeT *pRootNode, NodeT *pChildNode ); 
```

编辑 2：当明显这是家庭作业时，解决方案被删除。想清楚哥们！

该解决方案将是 O(n log n) 最佳/平均情况，但 O(n2) 最坏情况......如果传入列表已经排序。

[http://en.m.wikipedia.org/wiki/Tree_sort#section_1](http://en.m.wikipedia.org/wiki/Tree_sort#section_1)

# jquery - jQuery sortable：如何检查是否触发了排序事件？

> ID：15105533
> 
> 赞同：2
> 
> 时间：2013-02-27T06:25:07.083
> 
> 标签：jquery

我有一个使用 jQuery 可排序插件可排序的 HTML 表：

```
$("#sortableinputs").sortable(); 
```

我想在此事件触发时运行代码（例如，用户拖放表的行以对其进行重新排序）。我怎样才能做到这一点？

我正在使用：

```
If (sortable()) {
//check if running

} 
```

但它不起作用。感谢您的投入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T06:41:58.960

您可以在 sortable 上使用停止事件：

```
$( ".sortableinputs" ).sortable({
  stop: function( event, ui ) {
    //your code here 
   }
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T06:31:41.000

根据这篇[文章](https://groups.google.com/forum/?fromgroups=#!topic/jquery-dev/i-bCO_V7MZk)， .sortable() 似乎遇到了一些技术困难。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T06:31:13.123

根据文档，您可以使用可排序的开始事件。 [可排序：开始](http://api.jqueryui.com/sortable/#event-start)

```
$( "#sortableinputs" ).sortable({
  start: function( event, ui ) {
 alert('here you put the code');
}
}); 
```

# ruby-on-rails - 没有数据库的 Rails 应用程序

> ID：15105534
> 
> 赞同：1
> 
> 时间：2013-02-27T06:25:20.740
> 
> 标签：ruby-on-rails, session

在这里，我想在 Rails 中开发在线聊天应用程序，但没有数据库，所以我想到了使用会话。

来到应用程序的用户将来到主页并单击加入聊天按钮，然后填写两个字段（如姓名和性别），他的记录应该在会话中创建。

聊天后通过关闭他的记录应该会自动销毁。

是否有此类在线应用程序的示例工作或示例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T06:52:44.683

这个答案：[https](https://stackoverflow.com/a/821269/382982) ://stackoverflow.com/a/821269/382982将帮助您删除 Rails 的默认数据库依赖项。会话*应该*仍然正常工作（[http://guides.rubyonrails.org/action_controller_overview.html#session](http://guides.rubyonrails.org/action_controller_overview.html#session)）。

# c - 三重指针、数组和 malloc

> ID：15105536
> 
> 赞同：0
> 
> 时间：2013-02-27T06:25:27.950
> 
> 标签：c, arrays, pointers, malloc

我的代码编译得很好，但我对指针和数组的概念还是有点粗略。非常感谢您的帮助。

```
void initialize(int individual_count, int family_count, char ***indiIDs,
                char ***names, char ***spousesIDs, char ***childIDs)
//so here I declared two int variables and four triple pointers,
// which are pointer to a pointer to a pointer to an integer, correct?
{
    int i;

    //malloc allocates memory space and returns the address of the
    // first byte to the pointer *indiIDs,right?

    (*indiIDs) = (char**)malloc(sizeof(char*) * individual_count);
    (*names) = (char**)malloc(sizeof(char*) * individual_count);
    for(i = 0; i <individual_count; i++)
    {
        (*indiIDs)[i] = (char*)malloc(sizeof(char) * 20);
        (*names)[i] = NULL;
    }

    //*indiIDs[i] is an array of pointers, correct? so what exactly
    //  is the difference between mallocing and returning to *indiIDs
    //  and then to *indiIDs[i] as seen here?

    (*spousesIDs) = (char**)malloc(sizeof(char*) * family_count);
    (*childIDs) = (char**)malloc(sizeof(char*) * family_count);
    for(i = 0; i < family_count; i++)
    {
        (*spousesIDs)[i] = (char*)malloc(sizeof(char) * 40);

        //since spousesIDs[][] is a 2D array, would *spousesIDs[][]
        // indicate a triple array then?

        (*spousesIDs)[i][0] = '\0';
        (*childIDs)[i] = NULL;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T14:55:00.427

您的示例不显示 3D 数组，而是显示 2D 数组：

```
void init2D(char * ** x, int w, int h)
{
    (*x) = (char**)malloc(sizeof(char*) * w);

    for (i=0; i<w; i++) (*x)[i] = (char*)malloc(sizeof(char) * h);
} 
```

它有一个额外的 * 作为函数参数的原因是因为 C不像 C++ 那样**具有传递引用**

它是这样使用的：

```
void main ()
{

    char ** lines = 0;

    init2D (&lines, 4, 256); // char[256] x 4

} 
```

# linux - 如何在 FIND 命令结果中排除几个文件夹级别 - unix

> ID：15105539
> 
> 赞同：1
> 
> 时间：2013-02-27T06:25:51.267
> 
> 标签：linux, bash, shell, unix

以下是文件夹结构 - **home/ABCD/test1/example1/sample1/textfile.txt**

如果我执行**find**命令

```
find /home/ABCD/ -type f -print 
```

我得到以下输出

```
/home/ABCD/test1/example1/sample1/textfile.txt 
```

注意：**我正在从 ABCD 文件夹中执行 find 命令**，在结果中我想排除 /home/ABCD/ 文件夹我只想要**/test1/example1/sample1/testfile.txt**作为结果

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T06:33:07.380

由于您正在执行 find from ，因此请执行`/home/ABCD/`以下操作：

```
find * -type f -print 
```

或者，如果您正在查找文件，`test1`请执行以下操作：

```
find test1 -type f -print 
```

您还`-maxdepth N`可以限制 find 中的递归

如果您只想查找名为`textfile.txt`do的文件

```
find test1 -type f -name 'textfile.txt' -print 
```

如果要打印前导斜杠，请执行

```
find . -type f -printf '/%p\n' 
```

欲了解更多信息，请查看[这里](http://unixhelp.ed.ac.uk/CGI/man-cgi?find)

注意：如果变量中有上述字符串，您可以像这样修剪它：

```
string="/home/ABCD/test1/example1/sample1/textfile.txt"
echo "${string#/home/ABCD}" 
```

[这里](http://www.thegeekstuff.com/2010/07/bash-string-manipulation/)还有一些字符串操作的例子

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T07:26:00.107

只需`.`用作起始目录

```
find . -type f -print 
```

给

> ./test1/example1/sample1/textfile.txt

如果你真的想要一个前导斜杠，请使用`-printf`输出

```
find . -type f -printf '/%P\n' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T06:29:22.880

您可以使用该`mindepth`参数开始查看当前目录的下一级

```
find /home/ABCD/ -mindepth 1 -type f -print 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T07:28:22.700

这应该将您当前的工作目录名称替换为 .

```
find . -type f | perl -pne "s#$PWD#.#" 
```

所以你会得到如下结果：./test1/example1/sample1/textfile.txt

如果您不想要前面的 ./，请改用此命令：

```
find . -type f | perl -pne "s#$PWD/##" 
```

# multidimensional-array - array_sum 多维数组

> ID：15105540
> 
> 赞同：-1
> 
> 时间：2013-02-27T06:25:51.513
> 
> 标签：multidimensional-array

php array_sum 多维数组 我想得到每个数组字母的总和。请看一下我的代码

数组 ( / *-----帮助---------* /

```
[0] => Array
    (
        [0] => Array
            (
                [a] => 1
                [b] => 0
                [c] => 0
                [d] => 0
            )

        [1] => Array
            (
                [a] => 0
                [b] => 1
                [c] => 0
                [d] => 0
            )

    )
[1] => Array
    (
        [0] => Array
            (
                [a] => 1
                [b] => 0
                [c] => 0
                [d] => 0
            )

        [1] => Array
            (
                [a] => 0
                [b] => 1
                [c] => 0
                [d] => 0
            )

    ) 
```

）每个数组的总和想要这样的结果请帮助

```
 [0] => Array
            (
                [a] => 2
                [b] => 0
                [c] => 0
                [d] => 0
            )
        [1] => Array
            (
                [a] => 0
                [b] => 2
                [c] => 0
                [d] => 0
            ) 
```

**需要帮忙**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T06:57:34.747

没有任何标签，我将根据直觉进行解释，`PHP`因为这是我的直觉:)

一旦我知道您的语言支持，我一定会编辑我的帖子。

```
<?php

$myarr = Array(
        0 => Array
            (
                'a' => 1,
                'b' => 0,
                'c' => 0,
                'd' => 0,
            ),
            1=> Array
            (
                'a' => 0,
                'b' => 1,
                'c' => 0,
                'd' => 0,
            ),

        2 => Array
            (
                'a' => 0,
                'b' => 0,
                'c' => 1,
                'd' => 0,
            ),

    );

foreach($myarr as &$qwe )
{
 foreach($qwe as $key => &$value)
{
if($value == 1 )
$value++;
}
}

print_r($myarr); 
```

**输出**

```
Array
(
    [0] => Array
        (
            [a] => 2
            [b] => 0
            [c] => 0
            [d] => 0
        )

    [1] => Array
        (
            [a] => 0
            [b] => 2
            [c] => 0
            [d] => 0
        )

    [2] => Array
        (
            [a] => 0
            [b] => 0
            [c] => 2
            [d] => 0
        )

) 
```

# android - 无效的索引 3，大小为 3 Android

> ID：15105541
> 
> 赞同：1
> 
> 时间：2013-02-27T06:25:56.477
> 
> 标签：android

在我的应用程序中，我想在单击下一步和返回按钮时左右导航并更改 textView 值。但是当索引大于项目数时，我会收到强制关闭错误。这是我的代码。

```
 String[] seperated = imag;

        count_image = seperated.length-1;

        pager = (ViewPager) findViewById(R.id.pager);
        pager.setAdapter(new ImagePagerAdapter(seperated));

        pager.setCurrentItem(pagerPosition);

        options = new DisplayImageOptions.Builder()

        .showImageForEmptyUri(R.drawable.ic_launcher)

        .cacheOnDisc()

        .imageScaleType(ImageScaleType.IN_SAMPLE_INT)

        .build();

        pager.setOffscreenPageLimit(3);

        @Override

    public void onClick(View v) {

        // TODO Auto-generated method stub

        switch (v.getId()){

        case R.id.boutton_slide_droite:

            focus_image = pager.getCurrentItem();

            //get current image index 

            focus_image++;

            //move to next record

            position++;

            System.out.println("focus_image_up:"+focus_image);

            if(focus_image<count_image){

                if(focus_image>=count_image){

                    focus_image=0;
                    pagerPosition=0;

                }else {

                    pager.setCurrentItem(focus_image);

                    disable_progress=true; 

                    System.out.println("focus_image up if ++: 

"+focus_image);

                        text_num.setText("No. "+PostList.get(focus_image).getNum());
                        text_name.setText(PostList.get(focus_image).getNom());

                        text_team.setText(PostList.get(focus_image).getTeam());
                        text_date.setText(PostList.get(focus_image).getNaissance());

                    if 
(PostList.get(position).getNBVictoire().equals("1"))

                        text_victoires.setText("Victoire: "+PostList.get(focus_image).getNBVictoire());

                    else 
                        text_victoires.setText("Victoires: "+ PostList.get(focus_image).getNBVictoire());

                    if (PostList.get(focus_image).getNBCourse().equals("1"))

                        text_nomb.setText("Nombre de course: "+PostList.get(focus_image).getNBCourse());

                    else 

                        text_nomb.setText("Nombre de courses: "+PostList.get(focus_image).getNBCourse());

                }

            }else {

                pagerPosition=count_image;

                focus_image=count_image;
        }

            break;

         case R.id.boutton_slide_gauche:

             focus_image = pager.getCurrentItem();

             focus_image--;

            //move to previous record

            position--;

            if (focus_image>0){

                if (focus_image<=count_image) {

                    System.out.println("focus_image_down: if "+focus_image);

                    pager.setCurrentItem(focus_image);

                    disable_progress=true;

                    text_num.setText("No. "+PostList.get(focus_image).getNum());
                    text_name.setText(PostList.get(focus_image).getNom());

                    text_team.setText(PostList.get(focus_image).getTeam());

                    text_date.setText(PostList.get(focus_image).getNaissance());

                    if (PostList.get(focus_image).getNBVictoire().equals("1"))

                            text_victoires.setText("Victoire: "+PostList.get(focus_image).getNBVictoire());

                    else 

                        text_victoires.setText("Victoires: "+ PostList.get(focus_image).getNBVictoire());

                    if (PostList.get(position).getNBCourse().equals("1"))

                        text_nomb.setText("Nombre de course: "+PostList.get(focus_image).getNBCourse());
                    else 
                        text_nomb.setText("Nombre de courses: "+PostList.get(focus_image).getNBCourse());

                }else {

                    pager.setCurrentItem(focus_image);

                    disable_progress=true;

                    text_num.setText("No. "+PostList.get(focus_image).getNum());

text_name.setText(PostList.get(focus_image).getNom());

text_team.setText(PostList.get(focus_image).getTeam());

text_date.setText(PostList.get(focus_image).getNaissance());

                    if 

(PostList.get(focus_image).getNBVictoire().equals("1"))

                        text_victoires.setText("Victoire: "+PostList.get(focus_image).getNBVictoire());

                    else 

                        text_victoires.setText("Victoires: "+ PostList.get(focus_image).getNBVictoire());

                    if 

(PostList.get(position).getNBCourse().equals("1"))

                        text_nomb.setText("Nombre de course: "+PostList.get(focus_image).getNBCourse());

                    else 

                        text_nomb.setText("Nombre de courses: "+PostList.get(focus_image).getNBCourse());

                }

            }else {

                focus_image=0;
                pagerPosition=0;

            }

            break;
} 
```

错误是

java.lang.IndexOutOfBoundsException：索引 3 无效，大小为 3

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T06:27:58.860

`java.lang.IndexOutOfBoundsException: Invalid index 3, size is 3`足以找出错误。没有其他要求。

如果大小是`3`，则只能访问直到索引`2`。`4`如果要访问索引，请将数组/数组列表的大小增加到`3`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-10T05:55:51.167

```
holder.button.setOnClickListener(new View.OnClickListener() {
                @Override
                public void onClick(View v) {
                    Cursor cursor=FavouriteActivity.sqLiteHelper.getData("SELECT id FROM FAVOURITE");
                    ArrayList<Integer> arrID=new ArrayList<Integer>();
                    while(cursor.moveToNext()){
                        arrID.add(cursor.getInt(0));
                    }

                    FavouriteActivity.sqLiteHelper.deleteData(arrID.get(position));
//                    FavouriteActivity.adapter.notifyDataSetChanged();
                    Toast.makeText(context, "Delete " , Toast.LENGTH_SHORT).show();}

            });
            row.setTag(holder);
        }
        else {
            holder=(ViewHolder) row.getTag();
        }
        Model_Favourite model_favourite=favouritelist.get(position);
        byte[] favouriteimage = model_favourite.getImage();
        Bitmap bitmap= BitmapFactory.decodeByteArray(favouriteimage,0,favouriteimage.length);
        holder.imageView.setImageBitmap(bitmap);
        return row;

logcat:error
 java.lang.IndexOutOfBoundsException: Invalid index 3, size is 3
        at java.util.ArrayList.throwIndexOutOfBoundsException(ArrayList.java:255)
        at java.util.ArrayList.get(ArrayList.java:308)
        at com.vbs.ladieskurti.FavouriteListAdapter$1.onClick(FavouriteListAdapter.java:79)
        at android.view.View.performClick(View.java:5721)
        at android.view.View$PerformClick.run(View.java:22620)
        at android.os.Handler.handleCallback(Handler.java:739)
        at android.os.Handler.dispatchMessage(Handler.java:95)
        at android.os.Looper.loop(Looper.java:148)
        at android.app.ActivityThread.main(ActivityThread.java:7406)
        at java.lang.reflect.Method.invoke(Native Method) 
```

# android - 选择正确的聊天协议实现

> ID：15105545
> 
> 赞同：3
> 
> 时间：2013-02-27T06:26:19.290
> 
> 标签：android, xmpp, chat, irc

我正在尝试在 android 上创建一个基于论坛的群聊应用程序。我需要能够通过聊天绘制和发送语音消息。

我对使用聊天协议的 IRC 和 XMPP 感到困惑。有人可以在这方面给我建议吗？

我觉得 IRC 更适合我的应用程序，因为它主要是为论坛中的群组交流而设计的，但我不确定 IRC 是否支持除了文本消息之外的任何其他内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T07:55:28.633

您可以使用编码系统（例如 Base64）以纯文本形式发送任何类型的二进制数据（图像、声音等）。

您必须注意选择的编码字符域不会与您的协议方法冲突来分隔消息。其他常见问题是消息协议允许的大小。也许您需要在协议中实现某种类型的分块消息和一些描述二进制内容的 MIME。

[在这里](http://en.wikipedia.org/wiki/Binary-to-text_encoding)您可以找到常见 B2T 编码标准的列表。

对于“实时”绘制，最简单的解决方案是向客户端发送快照图像，当前图像正在抽屉客户端中绘制。如果您在一秒钟内执行 10 次，您将获得每秒 10 帧的绘图动画。为了优化这一点，有一种称为 Delta 编码的技术，有时也称为 Delta 压缩。是一种以顺序数据（在本例中为图像）而不是完整文件之间的差异形式存储或传输数据的方式。因此，在客户端中，您只需计算两个“框架”之间的差异，而您在客户端中唯一需要做的就是将当前“框架”与差异“合并”以显示下一个“框架”。

# visual-studio-2010 - 我可以使用 Visual Studio 2010 构建 SSIS 2008 自定义组件吗？

> ID：15105550
> 
> 赞同：1
> 
> 时间：2013-02-27T06:26:34.583
> 
> 标签：visual-studio-2010, ssis, components

我已经使用 VS2008 为 SSIS 2008 构建了自定义组件。我可以使用 VS2010 为 SSIS 2008 构建自定义组件吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T06:31:02.097

### 是的。

*是的，您可以使用Visual Studio 2010*构建 SSIS 2008 自定义组件，但您需要定位**`.NET Framework 3.5`**，因为 SSIS 2008 不支持*`.NET Framework 4.0`*

### 参考：

您可以在讨论类似问题的 MSDN 论坛上查看此答案。

[*SSIS 自定义组件和 .NET 4.0*](http://social.msdn.microsoft.com/Forums/en/sqlintegrationservices/thread/73b1a2af-d35b-4cdf-81b2-a1020ffbc696)

# playframework-2.0 - views.html.index 在哪个版本的 playframework 中可用

> ID：15105554
> 
> 赞同：1
> 
> 时间：2013-02-27T06:26:51.527
> 
> 标签：playframework-2.0, playframework-2.1

我们使用的是 Play 2.10 框架，但在 Play 2.10 库`views.html.index`中`views.html.main`找不到。我们在哪里可以找到这些？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T08:12:34.480

那是您编译的视图。当您在 views 文件夹中创建模板时，Play 会使用您的扩展名作为包名自动编译它们。

**例**：`views.html.index`指`views/index.scala.html`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T18:23:59.743

除非您创建这些文件，或者除非您使用为您提供它们的项目模板（或示例），否则这些文件将不存在 - 它们实际上并不是 Play 本身的一部分，而只是您可以编写的模板示例。

正如前面的答案所说，您可以在项目根目录内的 views 目录中创建 .scala.html 文件，Play 将为您编译它们。

# java - 导入 org.junit 无法解析

> ID：15105556
> 
> 赞同：127
> 
> 时间：2013-02-27T06:27:14.873
> 
> 标签：java, eclipse

我需要解决一个java问题进行面试，他们已经给我发了测试课。它开始于

```
import org.junit.Before; 
```

并且在某些地方还具有以下语法：

```
@RunWith(JUnit4.class)
...
@Before
...
@Test 
```

我有一段时间没有使用 Java，所以这让我有点困惑。我下载了eclipse，当我尝试编译这个测试文件时，在导入和@符号处出现错误。导入错误抛出：

```
The import org.junit cannot be resolved. 
```

并且 @RunWith 甚至无法识别，因为它试图将其解析为一种类型。

* * *

## 回答 #1

> 赞同：206
> 
> 时间：2013-02-27T06:29:25.057

您需要将`junit`库添加到项目的类路径中。根据您的开发设置，有多种选择可以实现它。

1.  **命令行**：在命令行调用的情况下，您必须使用 . 添加`junit.jar`到应用程序的类路径中`java -cp /path/to/junit.jar`。看看[这里](https://stackoverflow.com/q/2235276/2030471)的答案。

2.  **使用 eclipse**：Eclipse 发行版与这个库捆绑在一起，这就是您可以将它用于您的项目的方式。右键单击eclipse项目并导航：

> 属性 -> Java 构建路径 -> 库 -> 添加库 -> JUnit -> Junit 3/4

在您想要使用不同版本的 jar 的情况下，而不是单击上面的**添加库**，您应该单击**添加外部 Jar**并在文件系统上找到库。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-08-30T17:02:42.600

右键单击 eclipse 项目并导航：

> 属性 -> Java 构建路径 -> 库 -> 添加库 -> JUnit -> Junit 3/4

它适用于我的。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-12-13T11:01:23.313

如果您使用 maven 并且这段代码位于该`main`文件夹中，请尝试将其重新定位到该`test`文件夹​​中。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-04-21T08:27:37.120

您可以轻松搜索“@Test”之类的行，然后在此行使用快速修复“将 junit 4 库添加到构建路径”。我认为这比手动将junit添加到项目中要快。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2018-05-24T11:25:50.683

如果您正在使用 eclipse 并处理 maven 项目，那么上述步骤也可以工作。

右键单击您的根文件夹。

```
Properties -> Java Build Path -> Libraries -> Add Library -> JUnit -> Junit 3/4 
```

[分步说明在这里](https://www.toddlahman.com/import-org-junit-cannot-resolved-eclipse/)

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2020-01-18T04:45:29.700

您需要在 pom.xml 文件中添加 Junit 依赖项，这意味着您需要使用最新版本进行更新。

```
<dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.12</version>
        <scope>test</scope>
    </dependency> 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-02-27T06:29:04.903

似乎 Junit jar 文件不在路径中，还要确保您使用的是 jdk1.5 或更高版本。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-08-06T22:52:42.127

如果您使用的是 Java 9 或更高版本，您可能需要在 module-info.java 中使用 junit 依赖项

```
module myModule {
    requires junit;
} 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2019-07-25T20:54:19.930

如果使用 Maven，您可以上下文单击并运行“Maven/更新项目...”

[![在此处输入图像描述](../Images/f8e235e1c3747d8c0d4af33b06e8195e.png)](https://i.stack.imgur.com/IlnmG.png)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2018-07-15T08:06:02.590

在开始代码行复制过去 'Junit' 或 'TestNG' 元素将显示错误，直到您使用项目文件导入库。

要将库导入到项目中：

`Right Click on the Project --> Properties --> Java Build Path --> Libraries -> Add Library -> 'Junit' or 'TestNG'`

![添加 Junit 库](../Images/19d5dfb9c7fd3ed8c589cd34b5694569.png)

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2019-06-22T07:34:00.423

当您将 TestNG 添加到 Maven 依赖项时，将范围从测试更改为编译。希望这会解决您的问题..

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-02-07T06:49:11.983

如果您想创建自己的测试类。在 Eclipse 中，转到**File** -> **New** -> **J Unit Test Case**。然后，您可以在向导弹出窗口中选择所有路径和测试类设置。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-04-30T09:17:33.533

我现在有同样的问题。我的解决方案：将 JUnit 添加到 pom.xml 并从 Eclipse 项目属性（Java Build Path/Libraries）中删除 JUnit。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2022-02-13T02:31:55.450

如果您在 Eclipse 中使用 Maven，那么您需要按照以下步骤操作。

1）。在 pom.xml 文件中添加 Junit 依赖项

```
<dependency>
<groupId>javax.servlet</groupId>
<artifactId>javax.servlet-api</artifactId>
<version>4.0.1</version>
<scope>provided</scope>
</dependency> 
```

注意：请从以下链接获取最新信息 [https://mvnrepository.com/artifact/junit/junit](https://mvnrepository.com/artifact/junit/junit)

2).在您的测试类（例如 AdditionTest.class）上，您需要在您的测试方法上使用**@Test**进行注释（例如 testAdd() ）

注意：Test 注释告诉 JUnit，它所附加的公共 void 方法可以作为测试用例运行。

公共类 AdditionTest {

```
@Test
public void testAdd()
{ 
```

// 这里测试代码...

```
} 
```

当您第一次注释为**“@Test”**时，IDE 会询问您是否需要将 Junit jar 文件添加到类路径。一旦你接受它，它将把 Junit jar 文件添加到类路径中。

有了这个，你可以实现以下导入 **import org.junit.Test; 导入静态 org.junit.Assert.*；** 问候

* * *

## 回答 #15

> 赞同：-3
> 
> 时间：2018-09-18T07:39:02.857

在 pom.xml 中更新到最新的 JUnit 版本。这个对我有用。

# javascript - 使用 mongodb 在 javascript 中创建一个由多个数组组成的数组

> ID：15105557
> 
> 赞同：2
> 
> 时间：2013-02-27T06:27:15.787
> 
> 标签：javascript, node.js, mongodb, mongoskin

我的 mongodb 中有这个结构

```
 {
        category:['A','B'],
        info:.....,
    }
    {
        category:['A','F','T'],
        info:.....,
    }
    {
        category:['A','C'],
        info:.....,
    }
    {
        category:['D','B'],
        info:.....,
    } 
```

我必须查询所有类别，

```
var db = mongo.db(read+"@127.0.0.1:27017/database",{safe:false});
db.collection('comercio').find({},{_id:0,'category.$':1},function(err, result_array) 
```

第一个问题，有什么方法可以获取所有类别？？另一种方法而不是我的？

第二个问题……

我必须制作一个包含所有类别但不重复任何类别的数组......在这个例子中我必须制作一个包含这个的数组......

```
all_categories=['A','B','C','D','F','T']; 
```

再次感谢大家...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T06:57:09.293

您必须为此查询使用聚合框架，如下所示：

db.comercio.aggregate( { $unwind : "$category" } );

[展开](http://docs.mongodb.org/manual/reference/aggregation/unwind/#_S_unwind)后，您可以使用其他聚合（例如组）来获得所需的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T08:41:04.987

您不需要聚合框架来获取不同类别的数组。

只需使用[distinct](http://docs.mongodb.org/manual/reference/method/db.collection.distinct/#db.collection.distinct)：

```
> db.comercio.distinct("category");
["A","B","C","D","F","T"] 
```

# java - CXF 2.7.3 给出了 spring 3.2.1 的错误。RELEASE 可能与库发生冲突

> ID：15105559
> 
> 赞同：1
> 
> 时间：2013-02-27T06:27:26.560
> 
> 标签：java, spring, jakarta-ee, cxf, tomcat6

我有一个项目 prev 在 Spring 3.0.1 和 apache CXF 2.4 上运行良好，但是由于 apache CXF 2.4 中存在内存泄漏问题，我已经升级到版本 apache CXF 2.7.3 但它不适用于 spring 3.0.1 和最新的春季版本春季版本 3.2.1。下面提供了例外情况。我正在使用 maven 并在 pom.xml 中提供了依赖项

```
 Feb 27, 2013 11:16:05 AM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Allocate exception for servlet CXFServlet
java.lang.ClassNotFoundException: org.springframework.web.context.support.XmlWebApplicationContext
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1680)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1526)
    at java.lang.Class.getDeclaredFields0(Native Method)
    at java.lang.Class.privateGetDeclaredFields(Class.java:2300)
    at java.lang.Class.getDeclaredFields(Class.java:1745)
    at org.apache.catalina.util.DefaultAnnotationProcessor.processAnnotations(DefaultAnnotationProcessor.java:181)
    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1153)
    at org.apache.catalina.core.StandardWrapper.allocate(StandardWrapper.java:827)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:129)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:103)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:861)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:606)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Thread.java:680) 

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T10:07:33.513

**@Real**评论***“从堆栈跟踪中可以清楚地看出 XmlWebApplicationCentext 类是如何无法访问的。我猜 jar 不在类路径中”***帮助了我，我通过添加 spring-web 依赖项解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-09T10:44:42.497

将 spring-web 添加到依赖项对我不起作用。作为一种解决方法，我降级到 CXF 2.5.0

# jquery - 如何在此图像旋转器中添加延迟？

> ID：15105564
> 
> 赞同：1
> 
> 时间：2013-02-27T06:27:47.550
> 
> 标签：jquery, slider, delay

在继续淡出动画之前，希望旋转器在图像上保持 4 秒。我已经尝试将 .delay 输入到许多位置，但我就是不知道它会去哪里。只知道一点jquery。

```
/* image rotator */
function changeImg(){
$('.photogallery').animate({opacity: 0}, 3000, function(){
$(this).css('background','url(' + preloadArr[currImg++%preloadArr.length].src +') ',);

}).animate({opacity: 1}, 3000);
}

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T06:46:13.773

如果您要使用当前使用的方法，则应`.delay()`在最初调用`.animate()`. 但是，这会假设您连续多次调用此方法。

```
$('.photogallery').delay(4000).animate({
    opacity: 0
}, 3000, function () {
    $(this).css('background', 'url(' + preloadArr[currImg++%preloadArr.length].src +')';
}).animate({
    opacity: 1
}, 3000); 
```

**[演示](http://jsfiddle.net/z8fyZ/)**

如果您希望该方法自触发下一次迭代，您可以`changeImg`在动画执行结束时递归调用。尽管这会旋转图像，但利用递归进行无限循环通常会在浏览器中产生问题。

```
$('.photogallery').delay(4000).animate({
    opacity: 0
}, 3000, function () {
    $(this).css('background', 'url(' + preloadArr[currImg++%preloadArr.length].src +')';
    colorIndex++;
}).animate({
    opacity: 1
}, 3000, changeImg); 
```

**[演示](http://jsfiddle.net/z8fyZ/2/)**

首选方法可能是用于`window.setInterval`设置浏览器调用该方法之间的时间长度。您将不得不使用时间，因为它不尊重方法中发生的动画延迟。为了轻松解决这个问题，我在安排 with 之前简单地调用了一次`setInterval`。

```
changeImg();
window.setInterval(changeImg, 4000); 
```

**[演示](http://jsfiddle.net/z8fyZ/3/)**

# android - 将图像添加到 Android 中的消息应用程序

> ID：15105567
> 
> 赞同：5
> 
> 时间：2013-02-27T06:28:01.390
> 
> 标签：android, keyboard, stringbuilder

我正在尝试创建一个自定义键盘并在 android SDK 中使用*“SoftKeyboard”*示例。我对该示例进行了一些修改并创建了我的自定义键盘。我可以将此自定义键盘与我的 Android 设备的默认消息应用程序一起使用。

现在我想在我的自定义键盘中单击一个按钮，并在我键入 SMS 时添加一个图像。我注意到`String Builder`在*“SoftKeyBoard.java”*类（`private StringBuilder mComposing = new StringBuilder()`）中有，当我们使用键盘输入字母时，它会附加字符。

我试图附加我的 SD 卡的图像，如下所示，

```
 String imageDataString = "";

        String path = Environment.getExternalStorageDirectory().toString() + "/SamplePictures/";
         File file = new File(path, "myimage.jpg");
         try {

             FileInputStream imageInFile = new FileInputStream(file);
             byte imageData[] = new byte[(int) file.length()];
             imageInFile.read(imageData);

             // Converting Image byte array into Base64 String
             imageDataString = encodeImage(imageData);

            imageInFile.close();

         } catch (FileNotFoundException e) {
             System.out.println("Image not found" + e);
         } catch (IOException ioe) {
             System.out.println("Exception while reading the Image " + ioe);
         } 
```

我将“imageDataString”附加到字符串生成器，如下所示，

```
mComposing.append(imageDataString); 
```

但是我得到了这么多字符，而不是图像。使用键盘输入 SMS 时是否可以插入图像？

**更新：**我将 ImageSpan 和 Spannable 与以下代码一起使用。

```
SpannableStringBuilder ssb = new SpannableStringBuilder( "Here's a my picture  " );
            Bitmap smiley = BitmapFactory.decodeResource( getResources(), R.drawable.bitmap );
            ssb.setSpan( new ImageSpan( smiley ), 16, 17,Spannable.SPAN_INCLUSIVE_INCLUSIVE );
            mComposing.append(ssb); 
```

但它只显示*“这是我的照片”*，没有图像。我创建了一个带有 EditText 的示例单独应用程序，并将“ssb”变量设置为该 EditText 的文本。然后它很好地显示图像。但它不适用于消息传递应用程序。如果我可以设置消息应用程序 EditText，我想我可以设置图像。

有什么方法可以访问和更新消息应用程序的编辑文本？提前致谢..！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T11:40:28.720

我认为您想要做的是使用`ImageSpan`添加到 a`Spannable`的解决方案，该解决方案已在[此处](https://stackoverflow.com/questions/9340260/android-add-more-smileys-in-one-edittext)描述。按下键盘上的图像按钮后，您将触发一个方法，该方法应该`editText`通过从中获取现有文本来更新 ，添加`ImageSpan`包含您的图像并将其设置回`editText`.

# php - php中的日期字段返回错误值

> ID：15105568
> 
> 赞同：-1
> 
> 时间：2013-02-27T06:28:01.433
> 
> 标签：php

我正在尝试使用 php 从 FORM 中选择日期到我的 sql 数据库。

JS代码：

```
<script type="text/javascript" src="mootools-core-1.4.5-full-compat.js"></script>
<script type="text/javascript" src="datepicker.js"></script>
<script type="text/javascript">
        new DatePicker('.picker', {
         pickerClass: 'datepicker ',
             allowEmpty: true
                     });           
</script> 
```

表格中日期字段的代码 - HTML

```
 <td><input name='DateOfJourney' type='text' value='' class='date picker' ></td> 
```

我正在呼应的 PHP 代码： `echo $_POST['DateOfJourney'];`

sql 表中的 DateOfJourney 字段也是 VARCHAR 类型。

有CSS代码，如果需要我会复制它们。表单中的日期字段是日期选择器格式。

选择日期为AS时`16-02-2013`，其投掷的输出为：`1361079469`这似乎是垃圾。

您能否让我知道如何获得我在 FORM 中输入的确切值以在输出数据库中反映相同的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T06:31:31.507

该值不是`junk`，它是您日期的 UNIX 时间戳。尝试这个

```
<?php
echo date("m-d-Y",1361079469);    // or use `d-m-Y` as Rikesh suggested below
echo date("m-d-Y",$_POST['DateOfJourney']);
?> 
```

# iphone - 本土化与国际化

> ID：15105573
> 
> 赞同：-3
> 
> 时间：2013-02-27T06:28:24.773
> 
> 标签：iphone, ios, objective-c, ios5

我在 ios 的 tableview 中有 3 种语言。如果用户选择任何语言，nib文件会根据该语言自动更改，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T06:37:29.357

创建三个`UIViewController`这样的 VC1、VC2、VC3 并将`.h file`所有三个（*UIViewController*）放在你的`mainVC.m`（*这里**mainVC**是`UITableView`Containing`UIViewController`*）中，比如，

```
#import "VC1.h"
#import "VC2.h"
#import "VC3.h" 
```

和使用`didSelectRowAtIndexPath`方法`UITableView`

```
#pragma mark - UITableView Delegate

- (void)tableView:(UITableView *)aTableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (indexPath.row == 0)
    {
        VC1 *ob1 = [[VC1 alloc] init];
        [self presentModalViewController:ob1 animated:YES];
    }
    if (indexPath.row == 1)
    {
        VC2 *ob2 = [[VC2 alloc] init];
        [self presentModalViewController:ob2 animated:YES];
    }
    if (indexPath.row == 2)
    {
        VC3 *ob3 = [[VC3 alloc] init];
        [self presentModalViewController:ob3 animated:YES];
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T07:07:16.510

像这样创建一个语言类：

```
@implementation Language

static NSBundle *bundle = nil;

+(void)initialize {
 NSUserDefaults* defs = [NSUserDefaults standardUserDefaults];
 NSArray* languages = [defs objectForKey:@"AppleLanguages"];
 NSString *current = [[languages objectAtIndex:0] retain];
 [self setLanguage:current];

}

/*
  example calls:
  [Language setLanguage:@"it"];
  [Language setLanguage:@"de"];
*/
+(void)setLanguage:(NSString *)l {
 NSLog(@"preferredLang: %@", l);
 NSString *path = [[ NSBundle mainBundle ] pathForResource:l ofType:@"lproj" ];
 bundle = [[NSBundle bundleWithPath:path] retain];
}

+(NSString *)get:(NSString *)key alter:(NSString *)alternate {
 return [bundle localizedStringForKey:key value:alternate table:nil];
}

@end 
```

然后在 viewcontroller 中有一个实现 tableview 的函数，你可以使用 pickerview 有一个下拉菜单：

```
- (NSInteger)selectedRowInComponent:(NSInteger)component{
    if (component == 0)
    {
      [Language setLanguage:@"de"];
    }
    if (component == 1)
    {
       [Language setLanguage:@"it"];
    }
} 
```

希望这可以帮助...

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-27T06:47:34.653

试试这个。您可以为同一个 ViewController 使用如下三个 nib 文件，或者您可以将三个 ViewController 与三个 nib 一起使用。

```
- (void)tableView:(UITableView *)aTableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (indexPath.row == 0)
    {
        HomeViewController * objHome            =   [[HomeViewController alloc]initWithNibName:@"Write your 1 nib name here" bundle:nil];
    [self.navigationController pushViewController :objHome animated:NO];
    }
    if (indexPath.row == 1)
    {
        HomeViewController * objHome            =   [[HomeViewController alloc]initWithNibName:@"Write your 2 nib name here" bundle:nil];
    [self.navigationController pushViewController :objHome animated:NO];
    }
    if (indexPath.row == 2)
    {
       HomeViewController * objHome            =   [[HomeViewController alloc]initWithNibName:@"Write your 3 nib name here" bundle:nil];
    [self.navigationController pushViewController :objHome animated:NO];
    }

} 
```

如果您不使用 ARC，请不要忘记释放对象。

# c# - 反射是如何在 C# 中实现的？

> ID：15105575
> 
> 赞同：20
> 
> 时间：2013-02-27T06:28:33.940
> 
> 标签：c#, .net

我对在哪里`Type.GetType()`实现感到好奇，所以我看了一下程序集并注意到`Type.GetType()`调用`base.GetType()`，因为`Type`继承自我`MemberInfo`看了一下，它被定义为`_MemberInfo.GetType()`which 返回`this.GetType()`。由于我找不到显示 C# 如何获取类型信息的实际代码，我想知道：

CLR 如何在运行时从对象中获取 Type 和 MemberInfo？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-02T04:33:21.533

.NET Framework 2.0 的实际源代码可在 Internet 上获得（用于教育目的）：http: [//www.microsoft.com/en-us/download/details.aspx?id=4917](http://www.microsoft.com/en-us/download/details.aspx?id=4917)

这是 C# 语言实现。您可以使用 7zip 解压缩它。您将在此处（相对）找到反射命名空间：

> .\sscli20\clr\src\bcl\system\reflection

我正在挖掘您所询问的具体实现，但这是一个好的开始。

**更新：**对不起，但我认为这是一个死胡同。 `Type.GetType()`调用来自 System.Object 的基本实现。如果您检查该代码文件 ( `.\sscli20\clr\src\bcl\system\object.cs`)，您会发现方法是`extern`（参见下面的代码）。进一步检查可以发现实施，但它不在 BCL 中。我怀疑它会在某个地方出现在 C++ 代码中。

```
// Returns a Type object which represent this object instance.
// 
[MethodImplAttribute(MethodImplOptions.InternalCall)]
public extern Type GetType(); 
```

**更新（再次）：**我深入挖掘并在 CLR 虚拟机本身的实现中找到了答案。（它在 C++ 中）。

第一个难题在这里：

> \sscli20\clr\src\vm\ecall.cpp

在这里，我们看到将外部调用映射到 C++ 函数的代码。

```
FCFuncStart(gObjectFuncs)
    FCIntrinsic("GetType", ObjectNative::GetClass, CORINFO_INTRINSIC_Object_GetType)
    FCFuncElement("InternalGetHashCode", ObjectNative::GetHashCode)
    FCFuncElement("InternalEquals", ObjectNative::Equals)
    FCFuncElement("MemberwiseClone", ObjectNative::Clone)
FCFuncEnd() 
```

现在，我们需要去寻找`ObjectNative::GetClass`……这里是：

> \sscli20\clr\src\vm\comobject.cpp

这里是实现`GetType`：

```
 FCIMPL1(Object*, ObjectNative::GetClass, Object* pThis)
{
    CONTRACTL
    {
        THROWS;
        SO_TOLERANT;
        DISABLED(GC_TRIGGERS); // FCallCheck calls ForbidenGC now
        INJECT_FAULT(FCThrow(kOutOfMemoryException););
        SO_TOLERANT;
        MODE_COOPERATIVE;
    }
    CONTRACTL_END;

    OBJECTREF   objRef   = ObjectToOBJECTREF(pThis);
    OBJECTREF   refType  = NULL;
    TypeHandle  typeHandle = TypeHandle();

    if (objRef == NULL) 
        FCThrow(kNullReferenceException);

    typeHandle = objRef->GetTypeHandle();
    if (typeHandle.IsUnsharedMT())
        refType = typeHandle.AsMethodTable()->GetManagedClassObjectIfExists();
    else
        refType = typeHandle.GetManagedClassObjectIfExists();

    if (refType != NULL)
        return OBJECTREFToObject(refType);

    HELPER_METHOD_FRAME_BEGIN_RET_ATTRIB_2(Frame::FRAME_ATTR_RETURNOBJ, objRef, refType);

    if (!objRef->IsThunking())
        refType = typeHandle.GetManagedClassObject();
    else
        refType = CRemotingServices::GetClass(objRef);
    HELPER_METHOD_FRAME_END();

    return OBJECTREFToObject(refType);
}
FCIMPLEND 
```

最后一件事，`GetTypeHandle`可以在这里找到与其他一些支持功能的实现：

> \sscli20\clr\src\vm\object.cpp

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-27T07:47:02.227

反射的最重要部分是作为 CLI 本身的一部分实现的。因此，您可以查看[MS CLI 参考源（又名“Rotor”）](http://www.microsoft.com/en-gb/download/details.aspx?id=14124)或[单声道源](http://www.mono-project.com/SourceCodeRepository)。但是：它将主要是 C/C++。公共 API 实现细节（`MethodInfo`等`Type`）可能是 C#。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-03T03:57:09.700

它可能不会直接回答你的问题。但是，这里简要介绍了托管代码如何了解有关类型的所有内容。

1.  每当您编译代码时，编译器都会分析/解析源文件并收集它遇到的信息。例如看看下面的课程。

    ```
    class A
    {
      public int Prop1 {get; private set;}
      protected bool Met2(float input) {return true;}
    } 
    ```

    编译器可以看到这是一个有两个成员的内部类。成员一是具有私有设置器的 int 类型的属性。成员 2 是一个受保护的方法，名称为 Met2，类型为布尔值，采用浮点输入（输入名称为“输入”）。因此，它拥有所有这些信息。

2.  它将这些信息存储在程序集中。有几张桌子。例如，类（类型）都留在一个表中，方法存在于另一个表中。考虑一下 SQL 表，尽管它们绝对不是。

3.  当用户（开发人员）想要了解有关类型的信息时，它会调用 GetType 方法。此方法依赖于对象隐藏字段 - 类型对象指针。这个对象基本上是一个指向类表的指针。每个类表都有一个指向方法表中第一个方法的指针。每个方法记录都有一个指向参数表中第一个参数的指针。

PS：这种机制是使 .NET 程序集更安全的关键。您不能替换指向方法的指针。它会破坏组件的签名。

JIT 编译也严重依赖这些表

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-02T05:32:52.817

正如@GlennFerrieLive 指出的那样，对 GetType 的调用是一个`InternalCall`，这意味着实现在 CLR 本身中，而不是在任何 BCL 中。

我的理解是内部CLR方法从`this`指针中获取运行时类型信息，基本上相当于类型的名称。然后，它从所有已加载程序集（可能在当前应用程序域中）中存在的元数据中查找完整的类型信息，这使得反射变得相当昂贵。元数据区域基本上是程序集中存在的所有类型和成员的数据库，它构建了该数据的实例`Type`或`Method|Property|FieldInfo`从该数据构建实例。

# renderscript - 确定 Renderscript 是否在 CPU/GPU 和线程数上运行

> ID：15105579
> 
> 赞同：5
> 
> 时间：2013-02-27T06:28:56.997
> 
> 标签：renderscript

我似乎找不到任何关于如何检查 RenderScript 是否实际上是并行化代码的文档。我想知道是否正在使用 CPU 或 GPU 以及调度的线程数。

我唯一发现的是这个错误报告： [http ://code.google.com/p/android/issues/detail?id=28662](http://code.google.com/p/android/issues/detail?id=28662)

作者提到将 rsForEach 放入脚本导致它通过指向以下调试输出被序列化：

```
01-02 00:21:59.960: D/RenderScript(1256): = 0  0x0
01-02 00:21:59.976: D/RenderScript(1256): = 1  0x1 
```

我尝试在 LogCat 中搜索类似的字符串，但找不到匹配项。

有什么想法吗？

更新：其实我似乎已经想通了。看来我的 LogCat foo 并没有达到应有的水平。我通过我的应用程序信息过滤了调试输出，发现了这样一行：

```
02-26 22:30:05.657: V/RenderScript(26113): rsContextCreate dev=0x5cec0458
02-26 22:30:05.735: V/RenderScript(26113): 0x5d9f63b8 Launching thread(s), CPUs 2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T06:56:41.167

这只会告诉您可以使用多少个 CPU。这不会指示有多少线程或正在使用哪个处理器。根据设计，RS 避免暴露此信息

一般来说，RS 将使用所有可用的 CPU 内核，除非您调用“串行”函数，例如 rsg* 或时间函数。至于什么标准会导致脚本从 GPU 推送到 CPU，这将取决于每个供应商 GPU 的能力。

您引用的错误已在 4.1 中修复

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-26T17:13:22.900

当我与 RS 合作时，我遇到了同样的问题。我使用 Nexus 5 进行测试。我发现 RS 的初始启动使用 CPU 而不是使用 GPU，这是使用 Trepn 5.0s 应用程序验证的。后来我发现 Nexus-5 GPU 不支持双精度（[Link to Adreno 330](http://versus.com/en/xfx-double-d-hd-7790-vs-qualcomm-adreno-330-450mhz)），所以默认将其移植到 CPU 上。为了克服这个问题，我在我的 rs 文件的顶部使用了**#pragma rs_fp_relaxed**以及标题声明。

因此，如果您严格希望将其移植到 GPU 上，那么最好的方法是找出您的移动 GPU 规格并尝试上述技巧并使用 Trepn 5.0s 或等效应用程序测量 GPU 利用率。到目前为止，RS 没有公开线程级别的详细信息，但在实现过程中，我们可以利用根 - 内核的 x 和 y 参数作为线程索引。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-05-27T11:04:00.067

调试属性

RenderScript 包括 debug.rs.default-CPU-driver 和 debug.rs.script 调试属性。

**debug.rs.default-CPU 驱动程序**

值 = 0 或 1

默认值 = 0

如果设置为 1，则使用 RenderScript Compute 的 Android 开源项目 (AOSP) 实现。这不使用任何 GPU 功能。

**debug.rs.script**

值 = 0 或 1

默认值 = 0

如果设置为 1，则在 logcat 中打印附加诊断信息。此信息包括内核运行的实际设备，GPU 或应用处理器。如果内核无法在 GPU 上运行，则会提供更详细的信息来解释原因。例如： [RS-DIAG] GPU 上不支持递归调用

[Arm® Mali™ RenderScript 最佳实践_pdf](https://static.docs.arm.com/101144/0100/arm_mali_renderscript_best_practices_developer_guide_101144_0100_00_en.pdf)

# intellij-idea - Play 框架和 IntelliJ 新项目创建——错误

> ID：15105582
> 
> 赞同：4
> 
> 时间：2013-02-27T06:29:09.283
> 
> 标签：intellij-idea, playframework-2.0

我是第一次看 Play 2.0。我使用自制软件安装了它

```
~/code $ 酿造信息播放
玩：稳定2.1.0，HEAD
http://www.playframework.org/
/usr/local/Cellar/play/2.1.0（3998 个文件，254M）*
https://github.com/mxcl/homebrew/commits/master/Library/Formula/play.rb

```

我创建了一个新项目并将其设置为 IntelliJ (12.0.4)

```
~/code $ 播放新的游戏时间
...
玩！2.1.0（使用 Java 1.7.0_15 和 Scala 2.10.0），http://www.playframework.org
...
好的，应用程序播放时间已创建。
...
〜/代码$ cd播放时间/
~/code/playtime $ 游戏创意
...
...
[信息] 创建 /.../playtime/.idea_modules/playtime.iml
[信息] 创建 /.../playtime/.idea_modules/playtime-build.iml
〜/代码/播放时间$

```

我打开 IntelliJ 并重建项目。我明白了

```
scala：输出路径 /.../playtime/project/target/scala_2.9.2 在以下之间共享：模块“playtime-build”生产，模块“playtime-build”测试
当前外部 Scala 编译器禁止输出路径共享。
禁用外部构建模式或配置单独的输出路径。
提示：您可以使用 Project Artifacts 来组合已编译的类。

```

*   如何制作一个干净的空项目？
*   为什么 Play 创建一个 -build 模块？这有什么用途？
*   为什么这个模块引用 Scala 2.9.2 路径？
*   还创建了库 scala-2.9.2 和 scala-2.10.0，但未使用。为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T07:16:42.890

1）如何制作一个干净的空项目？

IDEA 12.1 的 Play 2.0 插件（0.2.25 或 0.2.26 版）即将上传在这个方向上会好很多，希望你在这里编译不会有问题。

2-3) 为什么 Play 创建一个 -build 模块？这有什么用途？

为 SBT 构建文件创建构建模块。SBT 依赖于 Scala 2.9.2（这就是为什么这个模块需要 Scala 2.9.2），所以为了更好地编辑这样的构建文件，SBT IDEA 插件创建了这个模块（这是第三方插件，我们自己的 SBT 插件将被实现很快）。然而，创建这样令人困惑的模块是不对的，在 Play 2.0 插件 0.2.25 项目创建中会清理这个模块。所以你不会有这个令人困惑的模块。

4) scala-2.10.0 库用于 Scala 方面的 Scala 编译器。但是在 Play 2.0 项目中没有使用 Scala 编译器，我们在支持中使用了 play 编译器（与 play SBT 编译器捆绑在一起），所以一般不使用它，但你仍然有这个库，否则你会收到一些错误消息Scala 编译器，什么是 Scala 插件可用性问题，你可以在这里发布关于它的新问题：http: [//youtrack.jetbrains.com/issues/SCL](http://youtrack.jetbrains.com/issues/SCL)

# android - android Listview 选定事件

> ID：15105599
> 
> 赞同：0
> 
> 时间：2013-02-27T06:29:59.670
> 
> 标签：android, listview

我用 2 个 ListView 创建了示例应用程序。我在列表视图选定事件中遇到问题。当用户单击第一个列表视图时，我想将数据绑定到第二个列表视图中。我在我的 Activity 类中扩展了“Activity”。我还想用不同的颜色更改我当前的列表项。

```
listviewCatagory.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
                public void onItemSelected(AdapterView<?> arg0, View arg1,
                        int arg2, long arg3) {
                    // TODO Auto-generated method stub
                    arg1.setSelected(true);
                    TextView lblCatagory = (TextView) findViewById(R.id.lblCatagory);
                    lblCatagory.setTextColor(getResources().getColor(
                            R.color.White));
                    //Log.d("Selected Item", Integer.toString(arg2));

                    Toast.makeText(getApplicationContext(), Integer.toString(arg2), Toast.LENGTH_SHORT).show();
                }

                public void onNothingSelected(AdapterView<?> arg0) {
                    // TODO Auto-generated method stub

                }

            }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T06:40:26.627

用于`onItemClickListener`列表视图。`onItemSelectedListener`用于纺纱机

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T06:44:19.283

用于`drawable`提供选择颜色和其他东西。

**item_selected.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android"> 

<item android:state_focused="true">
    <shape>
        <solid android:color="#FFFFFF" />
    </shape>
</item>
<item>
    <shape>
        <solid android:color="#666666" />
    </shape>
</item>

</selector> 
```

并在您的内部使用它`custom layout`，如下所示。

假设你`custom layout`有`RelativeLayout`

```
<RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/item_selected"> 
```

# ajax - jQuery ajax：想要对代码过程进行排序

> ID：15105601
> 
> 赞同：-1
> 
> 时间：2013-02-27T06:30:05.273
> 
> 标签：ajax, jquery

我正在通过 ajax 从 php 文件中获取数据。根据数据我需要做一些处理。我在我的代码中添加了一些警报，从中我意识到在 ajax 获取数据之前正在执行 ajax 之外的代码。我希望在从 php 文件接收到数据后完成代码。

代码：

```
$(function () {
    var originalData=""; 
    $.ajax({                                      
      url: 'data.php',                    
      data: "",                        
      dataType: 'text',               
      success: function(data)          
      {
        originalData=data;
        alert("originalData 1 "+ originalData);  
      }
    });

    alert("originalData 2 "+ originalData);  
    ...
      Processing code
    ...
}); 
```

警报的顺序是：

第一个：“原始数据 2”

第二：“原始数据1”

一种选择是我包含函数`Processing code`内部`success`，但我不能这样做，因为稍后我想放置一个逻辑，以便我可以有一个缓冲区`data`（至少 4-5 个堆栈深），因为我希望用户`data`在处理后立即获得新的current 的代码`data`，而不是等待`data`通过 php 检索到 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T06:35:04.620

ajax 调用不会停止下一行的执行，因此您必须执行以下操作：

```
$(function () {
var originalData=""; 
$.ajax({                                      
  url: 'data.php',                    
  data: "",                        
  dataType: 'text',               
  success: function(data)          
  {
    originalData=data;
    alert("originalData 1 "+ originalData);  
    myFunction();
  }
});

function myfunction()
{
alert("originalData 2 "+ originalData);  
...
  Processing code
...
} 
```

});

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T06:38:06.030

Ajax 使用异步处理模型，一旦向服务器发送请求，客户端将执行下一个语句，而无需等待响应返回。一旦服务器响应成功或失败回调将根据响应的状态被调用。

您需要使用来自成功回调中的 ajax 调用的数据进行所有处理。

前任：

```
$.ajax({
    ....
}).done(function(data) {
    //To all you post processing here
}).fail(function(){
    //Do your error handling here
}); 
```

# transactions - Lucene 中的事务

> ID：15105603
> 
> 赞同：1
> 
> 时间：2013-02-27T06:30:19.373
> 
> 标签：transactions, lucene

我知道 lucene 支持事务性 ACID 属性。

插入记录时，每条记录也会在 Lucene 中建立索引。

如果对数据库进行事务处理，则对索引进行处理。但是当它失败时，MYSQL 提供回滚，并且其他记录不会插入该事务中。

DB回滚时，即使当时创建的索引也应该回滚。

Lucene 有提供这样的功能吗？是否可以为记录绑定 MYSQL 事务和 Lucene 索引？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T14:51:11.643

> Lucene 有提供这样的功能吗？

Lucene 确实提供回滚，请参阅[`IndexWriter.rollback()`](http://lucene.apache.org/core/4_1_0/core/org/apache/lucene/index/IndexWriter.html).

> 是否可以为记录绑定 MYSQL 事务和 Lucene 索引？

不是开箱即用，不。但是有些[框架](http://www.hibernate.org/subprojects/search.html)可以为您做到这一点。

# extjs4.1 - 在 ExtJS 中获取组合框的值

> ID：15105606
> 
> 赞同：-1
> 
> 时间：2013-02-27T06:30:33.270
> 
> 标签：extjs4.1

我正在使用 ExtJs 4.1。我的页面有一个组合框和一个按钮。组合框有一个商店，它使用具有 4 个字段（用户名、ID（唯一 ID）、年龄、薪水）的模型。名称用作显示字段，ID 用作值字段。

**我想要什么：** 单击按钮时，我想在组合框中查看选定的值，并且我想*提取薪水。*

**可能的解决方案：**从组合框中获取所选值的 id 并在商店中找到记录并提取该记录的薪水。

我想知道 ExtJS 是否有更直接的方法或方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T21:21:36.043

在组合框选择上，您可以获得如下`salary`值：

```
 onComboboxSelect: function(combo, records, options) {
    var selectedValue=combo.getValue();
    var record = combo.findRecord(combo.valueField || combo.displayField, selectedValue);
    alert(record.get('salary'));
} 
```

我认为这很重要，然后您可以例如保存此值并在单击按钮时显示它..

# android - 在android中使用BluetoothDevice发送数据的常用蓝牙功能

> ID：15105609
> 
> 赞同：0
> 
> 时间：2013-02-27T06:30:58.223
> 
> 标签：android, sockets, bluetooth

我正在android中开发一个蓝牙应用程序，首先我必须扫描可用的蓝牙设备，然后连接它们。建立连接后，我必须向他们发送数据。我已经完成了直到连接。但我找不到将数据发送到连接设备的常用功能。我必须在我的应用程序中多次使用此功能。以下是我的连接代码...请帮帮我...

```
import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.OutputStream;
import java.text.SimpleDateFormat;
import java.util.Calendar;
import java.util.Date;
import java.util.Random;
import java.util.Set;
import java.util.TimeZone;
import java.util.UUID;

import android.annotation.SuppressLint;
import android.app.Activity;
import android.app.AlertDialog;
import android.app.Dialog;
import android.app.ProgressDialog;
import android.bluetooth.BluetoothAdapter;
import android.bluetooth.BluetoothDevice;
import android.bluetooth.BluetoothSocket;
import android.content.Context;
import android.content.DialogInterface;
import android.content.Intent;
import android.content.SharedPreferences;
import android.content.res.Configuration;
import android.graphics.Bitmap;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.ColorMatrix;
import android.graphics.ColorMatrixColorFilter;
import android.graphics.PorterDuff.Mode;
import android.graphics.drawable.BitmapDrawable;
import android.graphics.drawable.Drawable;
import android.os.Bundle;
import android.os.Environment;
import android.os.Handler;
import android.os.Message;
import android.preference.PreferenceManager;
import android.provider.Settings;
import android.util.Log;
import android.view.KeyEvent;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnTouchListener;
import android.view.Window;
import android.view.WindowManager;
import android.view.inputmethod.InputMethodManager;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ImageView;
import android.widget.TextView;
import android.widget.Toast;

@SuppressLint("NewApi")
public class Main extends Activity implements Runnable 
{
    protected static final String TAG = "TAG";
    private static final int REQUEST_CONNECT_DEVICE = 1;
    private static final int REQUEST_ENABLE_BT = 2;
    Button mScan;
    BluetoothAdapter mBluetoothAdapter;
    private UUID applicationUUID = UUID.fromString("00001101-0000-1000-8000-00805F9B34FB");
    private ProgressDialog mBluetoothConnectProgressDialog;
    private BluetoothSocket mBluetoothSocket;
    BluetoothDevice mBluetoothDevice;

    String MESSAGEPASS;

    @Override
    public void onCreate(Bundle mSavedInstanceState) 
    {
        super.onCreate(mSavedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
            WindowManager.LayoutParams.FLAG_FULLSCREEN);
        setContentView(R.layout.main);
        mScan = (Button) findViewById(R.id.Scan);
        mScan.setOnClickListener(new View.OnClickListener() 
        {
            public void onClick(View mView) 
            {
                mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter();
                if (mBluetoothAdapter == null) 
                {
                    Toast.makeText(Main.this, "Message1", 2000).show();
                } 
                else 
                {
                    if (!mBluetoothAdapter.isEnabled()) 
                    {
                        Intent enableBtIntent = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);
                        startActivityForResult(enableBtIntent, REQUEST_ENABLE_BT);
                    } 
                    else 
                    {
                        ListPairedDevices();
                        Intent connectIntent = new Intent(Main.this, DeviceListActivity.class);
                        startActivityForResult(connectIntent, REQUEST_CONNECT_DEVICE);
                    }
                }
            }
        });

    }

    public void onActivityResult(int mRequestCode, int mResultCode, Intent mDataIntent) 
    {
        super.onActivityResult(mRequestCode, mResultCode, mDataIntent);

        switch (mRequestCode) 
        {
            case REQUEST_CONNECT_DEVICE:
                if (mResultCode == Activity.RESULT_OK) 
                {
                    Bundle mExtra = mDataIntent.getExtras();
                    String mDeviceAddress = mExtra.getString("DeviceAddress");
                    Log.v(TAG, "Coming incoming address " + mDeviceAddress);
                    mBluetoothDevice = mBluetoothAdapter.getRemoteDevice(mDeviceAddress);
                    mBluetoothConnectProgressDialog = ProgressDialog.show(this, "Connecting...", mBluetoothDevice.getName() + " : " + mBluetoothDevice.getAddress(), true, false);

                    Thread mBlutoothConnectThread = new Thread(this);
                    mBlutoothConnectThread.start();

                    //pairToDevice(mBluetoothDevice); This method is replaced by progress dialog with thread

                }
                break;

            case REQUEST_ENABLE_BT:
                if (mResultCode == Activity.RESULT_OK) 
                {
                    ListPairedDevices();
                    Intent connectIntent = new Intent(Main.this, DeviceListActivity.class);
                    startActivityForResult(connectIntent, REQUEST_CONNECT_DEVICE);
                } 
                else 
                {
                    Toast.makeText(Main.this, "Message", 2000).show();
                }
                break;
        }
    }

    private void ListPairedDevices() 
    {
        Set<BluetoothDevice> mPairedDevices = mBluetoothAdapter.getBondedDevices();
        if (mPairedDevices.size() > 0) 
        {
            for (BluetoothDevice mDevice : mPairedDevices) 
            {
                Log.v(TAG, "PairedDevices: " + mDevice.getName() + " " + mDevice.getAddress());
            }
        }
    }

    public void run() 
    {
        try 
        {
            mBluetoothSocket = mBluetoothDevice.createRfcommSocketToServiceRecord(applicationUUID);
            mBluetoothAdapter.cancelDiscovery();
            mBluetoothSocket.connect();
            mHandler.sendEmptyMessage(0);
        }
        catch (IOException eConnectException) 
        {
            Log.d(TAG, "CouldNotConnectToSocket", eConnectException);
             closeSocket(mBluetoothSocket);
             return;
        }
    }

    private void closeSocket(BluetoothSocket nOpenSocket) 
    {
        try 
        {
            nOpenSocket.close();
            Log.d(TAG, "SocketClosed");
        } 
        catch (IOException ex) 
        {
            Log.d(TAG, "CouldNotCloseSocket");
        }
    }

    private Handler mHandler = new Handler() 
    {
        @Override
        public void handleMessage(Message msg) 
        {
            mBluetoothConnectProgressDialog.dismiss();
            Toast.makeText(Main.this, "Device Connected", 5000).show();

            Intent in = new Intent(getBaseContext(), Option.class);
            startActivity(in);

        }
    };

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T06:35:43.190

you need to use Bluetooth as a background service, so that it runs in background of the application and you can access that from any activity from the application, [check this out](https://stackoverflow.com/questions/15025852/how-to-move-bluetooth-activity-into-a-service/15038770#15038770)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-06T21:18:04.087

我已经对蓝牙进行了一些实验，在多个活动之间使用公共套接字的最简单方法是在全局变量的帮助下共享它。检查这个：[How to pass a Bluetooth Socket to another Activity using Application interface](https://stackoverflow.com/questions/5158758/how-to-pass-a-bluetooth-socket-to-another-activity-using-application-interface)

# mysql - MySQL 使用 BETWEEN 子句和 AND 子句和 OR 子句

> ID：15105618
> 
> 赞同：-2
> 
> 时间：2013-02-27T06:31:15.990
> 
> 标签：mysql, sql, between

我想运行一个查询，您可以在其中选择*date1*到*date2*之间的每个数据，这些数据的状态为按状态分组的*Confirmed*或*Reserved*。

但我正在尝试的代码，

```
select * from reservation where (date(bdate) between '2013-2-4' and '2013-2-8') and status='Reserved' or status='Confirmed' order by status 
```

似乎不起作用。

我只需要在日期范围内获取已*确认*或已*保留*状态的数据。请帮我。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T06:33:26.523

```
select *
from   reservation 
where  date(bdate) between '2013-2-4' and '2013-2-8' and 
       status IN ('Reserved','Confirmed')
order  by status 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T06:44:14.370

你可以使用这样的查询

```
select *
from reservation
where date(bdate) between '2013-2-4' and '2013-2-8'
    and (status = 'Reserved'
      or status = 'Confirmed')
order by status 
```

# c++ - 几个模板问题（已经解决......只是想知道为什么）

> ID：15105621
> 
> 赞同：0
> 
> 时间：2013-02-27T06:31:32.840
> 
> 标签：c++, templates, stl

所以，我正在为一个作业开发一个模板化的 Vector 类，我遇到了一些通过谷歌搜索解决的问题，但我仍然想知道为什么我做错了。第一个问题是我有：

```
template <typename T>
class Vector
{
    ...
    template <typename T2>
    Vector(const Vector<T2> &other);
}

template <typename T, T2>
Vector<T>::Vector(const Vector<T2> &other)
{
    ...
} 
```

这给了我 VS11 中的“无法将函数定义与现有声明匹配”。我通过将模板定义放在单独的行上来修复它：

```
template <typename T>
template <typename T2>
Vector<T>::Vector(const Vector<T2> &other)
{
    ...
} 
```

但我仍然不知道为什么需要这样做。我知道第一个定义对于在其中使用多个模板的函数/类是有效的，但是为什么当您将模板化类与模板化成员函数混合时语法会发生变化？

我的第二个问题与模板类中的类型有关。在编写迭代器时，我有以下功能：

```
template <typename T>
class Vector
{
    ...
    class iterator
    {
        ...
        iterator &operator++(void);
    }
}

template <typename T>
Vector<T>::iterator &Vector<T>::iterator::operator++(void)
{
    ...
} 
```

这给了我“依赖名称不是类型”，后来我发现我需要在前面添加“类型名称”：

```
template <typename T>
typename Vector<T>::iterator &Vector<T>::iterator::operator++(void)
{
    ...
} 
```

在谷歌搜索警告号（导致错误）之后，我意识到为什么存在错误，但编译器为什么不知道这`Vector<T>::iterator`是一种类型并不是很明显。我的意思是，它有类的定义，所以......

无论如何，感谢您为我澄清了这几件事！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T06:33:51.767

```
template <typename T>
template <typename T2>
Vector<T>::Vector(const Vector<T2> &other)
{ 
```

也可以写成

```
template <typename T> template <typename T2>
Vector<T>::Vector(const Vector<T2> &other)
{ 
```

您只需要 (?) 将其写成两组，因为它们毕竟是两组参数——第一组用于类，第二组用于函数。

`typename`对于依赖类型和相关规则（`this`对于模板基类成员和`template`模板成员函数（？））与称为[**“两阶段查找”**](https://stackoverflow.com/questions/7767626/two-phase-lookup-explanation-needed)的东西有关。然而，这在 MSVC++ 上实现得很糟糕（因为没有实现），因此它可能不会像符合标准的实现那样抛出尽可能多的错误。

更多信息 - [http://blog.llvm.org/2009/12/dreaded-two-phase-name-lookup.html](http://blog.llvm.org/2009/12/dreaded-two-phase-name-lookup.html) [http://womble.decadent.org.uk/c++/template-faq.html#disambiguation](http://womble.decadent.org.uk/c++/template-faq.html#disambiguation) [http ://eli.thegreenplace.net/2012/02/06/dependent-name-lookup-for-c-templates/](http://eli.thegreenplace.net/2012/02/06/dependent-name-lookup-for-c-templates/)

# javascript - 如何从javascript调用struts2动作？

> ID：15105622
> 
> 赞同：0
> 
> 时间：2013-02-27T06:31:37.710
> 
> 标签：javascript, struts2, dojo, struts2-json-plugin

我正在调用 Struts2.3 dojo 自动完成器 onChange 并使用 jquery ajax 根据自动完成器值更新文本字段。如果自动完成输入值不在数据库中，那么我想调用一个操作来首先在数据库中添加该项目。

我的 JavaScript 代码：-

```
dojo.event.topic.subscribe("/value", function(value, key, text, widget){
var itemcode=value; 
var data = {itemID:itemcode,itemDes:''};          
$.post("jsondefault/callAJax.action", data, function(data, textStatus) {
    if(data.itemDes.length===0){
    alert("Ihis item is not saved please save it first."); 
    window.location = "/actionName.action";
    }else{
        $('#itdes').val(data.itemDes);
    }
}, "json");
}); 
```

jsp代码：-

```
<div class="pull-left " style="width: 48%;">
<label id="item1">Item Code<br></label>
<s:url id="itemList" action="/jsondefault/createCoupon2" method="getItems" />               
<sx:autocompleter id="itemC" href="%{itemList}" forceValidOption="true" size="24"              
name="item" autoComplete="false" showDownArrow="false" valueNotifyTopics="/value">
</sx:autocompleter>
</div> <div class="pull-right " style="width: 48%;"> 
<label id="itdes1">Item Description</label>
<input type="text" placeholder="Item Description" id="itdes">
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T09:30:42.860

我在我的 javascript 中更改了我的一些代码行

```
dojo.event.topic.subscribe("/value", function(value, key, text, widget){
var itemcode=value;
alert(text);    
var data = {itemID:itemcode,itemDes:''};          
$.post("jsondefault/callAJax.action", data, function(data, textStatus) {
    if(data.itemDes.length===0){
        var where_to= confirm("This item is not saved, Do you want to save it?");
         if (where_to== true)
         {
         window.location="addItem.action";
         }
         else
         {
         window.location="createCoupon1.action";
         }
    }else{
        $('#itdes').val(data.itemDes);
    }
}, "json");
}); 
```

# command-line - 提示主机名更改命令行

> ID：15105624
> 
> 赞同：1
> 
> 时间：2013-02-27T06:31:45.757
> 
> 标签：command-line, wmic

编码：

```
wmic computersystem where name="%COMPUTERNAME%" call rename name="NEW-NAME" 
```

如何更改它以允许用户输入新名称？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T12:12:03.453

```
set /p new_name=enter a new computer name :
wmic computersystem where name="%COMPUTERNAME%" call rename name="%new_name%" 
```

你能试试这个吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-02T16:29:58.917

对我有用的确切批处理文件内容如下：

```
set /p new_name=enter a new computer name :
wmic computersystem where "name='%COMPUTERNAME%'" call rename name="%new_name%" 
```

... 用于常量 (JLT-) 和变量名。我使用了以下

```
set /p new_name=enter a new computer name :
wmic computersystem where "name='%COMPUTERNAME%'" call rename name=JLT-"%new_name%" 
```

然后我将批处理文件放入运行一次，以在首次启动后更改计算机名称。从 Windows 10 开始，您不能再在 Windows 10 或 sysprep 中的 unattend.xml 中作为首次启动的一部分执行 at。

# sql - 如何使用自联接从单个表中检索数据

> ID：15105627
> 
> 赞同：1
> 
> 时间：2013-02-27T06:32:00.657
> 
> 标签：sql

我有这样的桌子

```
id     name     pid
101   Animal    null
102   Dog       101
103   pug       102 
```

我想要动物>狗>哈巴狗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T06:43:07.630

我认为这样的东西适合你，因为我不知道你的 RDBMS 也许它需要一些改变

```
WITH  NewAnimal
        AS (SELECT  CAST((a.Desc + '>' + t.Name) AS VARCHAR(1000)) AS "Desc"
             FROM    Table AS t
             JOIN NewAnimal AS a
             ON t.PID = a.id
           )
SELECT * FROM NewAnimal 
```

# css - 浮动混乱

> ID：15105633
> 
> 赞同：1
> 
> 时间：2013-02-27T06:32:48.113
> 
> 标签：css, css-float

为什么这个[小提琴](http://jsfiddle.net/GBdDU/)中的橙色盒子没有和我的其他盒子一起漂浮在左边？我确信橙色盒子应该从流中取出并漂浮在蓝色盒子旁边。我错过了什么？

```
 <div class=" wrap clear">
        <div class="block pink float"></div>
        <div class="block blue float"></div>
        <div class="block green"></div>
        <div class="block orange float"></div>
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T06:36:43.557

[**工作小提琴**](http://jsfiddle.net/GBdDU/1/)

`div`默认情况下阻止其他元素并排，但可以使用 CSS 更改此行为。如果你想要你的橙色盒子和蓝色盒子，那么你可以改变你的安排。所以，绿色的 div 将无法推动那个橙色的。任何将放置在绿色之后的 div 都将在下一行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T06:34:47.643

这是因为您没有浮动绿色框。所以绿色框显示块级别并按下橙色框。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T06:38:54.910

现在替换为您的 html 代码，就像这样[**Live Demo**](http://jsfiddle.net/GBdDU/4/) --------- **[Full Demo](http://jsfiddle.net/GBdDU/4/embedded/result/)**

```
 <div class=" wrap clear">
            <div class="block pink float"></div>
            <div class="block blue float"></div>

            <div class="block orange float"></div>

     <div class="block green"></div>
        </div> 
```

**[演示](http://jsfiddle.net/GBdDU/4/)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T09:39:28.537

所有块级元素都位于自己的行中，并且不允许任何其他元素位于它们的左侧或右侧。尽管一个元素是浮动的并且被认为是块级的，但它已从正常的页面流中删除，不再位于它自己的行上。将块级元素放在浮动元素旁边的快速解决方案是将以下 css 规则添加到所需元素：

```
.Whatever {
    display: inline-block;
} 
```

# android - 闭源专有模块的未知符号错误

> ID：15105635
> 
> 赞同：0
> 
> 时间：2013-02-27T06:32:58.167
> 
> 标签：android, module, linux-kernel

我遇到了一些专有模块的问题。我正在使用 Mediatek android 内核，他们有很多专有模块，其中一些在安装时显示 Unkown symbol 错误。AFAIK 未知符号是由于内核源代码中缺少这些变量的 EXPORT_SYMBOL 所致。

由于这些是专有模块，因此内核源代码中没有声明和定义那些丢失的符号，因此内核没有这些符号，并且这些专有模块无法加载。

谁能告诉我该如何处理？真的 GPL 没有涵盖这些强制制造商发布其源代码的模块吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T16:56:20.250

Insmod'ng 您可能不知道其依赖关系的模块将导致您提到的错误。试试`modprobe`吧。它将处理依赖关系。如果再次出现类似问题，请运行`depmod`并使用 modprobe 跟进。

如果您仍然面临问题，您别无他法，只能从供应商自己那里找到这些模块的依赖关系。

# entity-framework - 使用 EF 5 代码初始化数据库时，RequiredIf 属性首先给出错误

> ID：15105636
> 
> 赞同：0
> 
> 时间：2013-02-27T06:33:05.393
> 
> 标签：entity-framework, asp.net-mvc-4

首先使用 EF5 代码初始化数据库时，在实体中使用 RequiredIf 属性时出现以下错误。

```
System.Data.DataException: An exception occurred while initializing the database. 
See the InnerException for details. ---> System.Data.Entity.Validation.DbEntityValidationException:
Validation failed for one or more entities. See 'EntityValidationErrors' property for more details. 
```

如果我注释 [RequiredIf] 属性代码首先成功构建数据库。任何想法？

![在此处输入图像描述](../Images/d6d68749ce865e7141f80864a0769dcb.png)

更新：

我单步调试调试器，发现它添加了一个验证错误。如何在首先使用代码初始化数据库时关闭它。

![在此处输入图像描述](../Images/1588601f3262c6c5a5c741111ec66bad.png)

![在此处输入图像描述](../Images/cf3ad346d58f287a15ca0af25cb494d6.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T23:15:10.533

问题出现在播种期间。requiredIf 验证说明是否`ApplicationStatus`建议使用 2，那么 2`DecisionDate`是强制性的。所以我`DecisionDate`在我的上下文中将该属性添加到种子函数中并且它起作用了。无论如何，谢谢大家关注这个问题。

经验教训是，如果您在域对象中进行验证，然后相应地播种数据。

![在此处输入图像描述](../Images/ed33cb4fb3ad01f31f663485f5a5e814.png)

# php - Laravel Eloquent ORM 事务

> ID：15105640
> 
> 赞同：115
> 
> 时间：2013-02-27T06:33:30.597
> 
> 标签：php, laravel

Eloquent ORM 非常好，但我想知道是否有一种简单的方法可以使用 innoDB 以与 PDO 相同的方式设置 MySQL 事务，或者我是否必须扩展 ORM 才能实现这一点？

* * *

## 回答 #1

> 赞同：195
> 
> 时间：2013-02-27T06:44:18.287

你可以这样做：

```
DB::transaction(function() {
      //
}); 
```

闭包中的所有内容都在事务中执行。如果发生异常，它将自动回滚。

* * *

## 回答 #2

> 赞同：111
> 
> 时间：2013-02-28T02:47:23.090

如果你不喜欢匿名函数：

```
try {
    DB::connection()->pdo->beginTransaction();
    // database queries here
    DB::connection()->pdo->commit();
} catch (\PDOException $e) {
    // Woopsy
    DB::connection()->pdo->rollBack();
} 
```

* * *

**更新**：对于 laravel 4，该`pdo`对象不再是公开的，所以：

```
try {
    DB::beginTransaction();
    // database queries here
    DB::commit();
} catch (\PDOException $e) {
    // Woopsy
    DB::rollBack();
} 
```

* * *

## 回答 #3

> 赞同：40
> 
> 时间：2014-02-18T21:19:56.650

如果你想使用 Eloquent，你也可以使用这个

这只是我项目中的示例代码

```
 /* 
         * Saving Question
         */
        $question = new Question;
        $questionCategory = new QuestionCategory;

        /*
         * Insert new record for question
         */
        $question->title = $title;
        $question->user_id = Auth::user()->user_id;
        $question->description = $description;
        $question->time_post = date('Y-m-d H:i:s');

        if(Input::has('expiredtime'))
            $question->expired_time = Input::get('expiredtime');

        $questionCategory->category_id = $category;
        $questionCategory->time_added = date('Y-m-d H:i:s');

        DB::transaction(function() use ($question, $questionCategory) {

            $question->save();

            /*
             * insert new record for question category
             */
            $questionCategory->question_id = $question->id;
            $questionCategory->save();
        }); 
```

* * *

## 回答 #4

> 赞同：38
> 
> 时间：2015-06-17T12:13:30.833

如果你想避免闭包，并且乐于使用门面，下面的代码可以保持整洁：

```
try {
    \DB::beginTransaction();

    $user = \Auth::user();
    $user->fill($request->all());
    $user->push();

    \DB::commit();

} catch (Throwable $e) {
    \DB::rollback();
} 
```

如果任何语句失败，提交将永远不会命中，事务也不会处理。

* * *

## 回答 #5

> 赞同：20
> 
> 时间：2016-06-07T04:23:26.547

我确定您不是在寻找封闭解决方案，试试这个以获得更紧凑的解决方案

```
 try{
    DB::beginTransaction();

    /*
     * Your DB code
     * */

    DB::commit();
}catch(\Exception $e){
    DB::rollback();
} 
```

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2014-10-04T07:27:52.063

由于某种原因，在任何地方都很难找到此信息，因此我决定将其发布在这里，因为我的问题虽然与 Eloquent 交易有关，但恰恰改变了这一点。

在阅读了[这个](https://stackoverflow.com/questions/24945631/laravel-dbtransaction-not-rolling-back-on-exception)stackoverflow 答案后，我意识到我的数据库表使用的是 MyISAM 而不是 InnoDB。

**对于在 Laravel（或其他任何地方）上工作的事务，需要将您的表设置为使用 InnoDB**

为什么？

引用 MySQL **Transactions 和 Atomic Operations**文档（[此处](http://dev.mysql.com/doc/refman/5.0/en/ansi-diff-transactions.html)）：

> MySQL 服务器（版本 3.23-max 和所有版本 4.0 及以上）支持使用 InnoDB 和 BDB 事务存储引擎的事务。InnoDB 提供完全的 ACID 合规性。请参阅第 14 章，存储引擎。有关 InnoDB 在处理事务错误方面与标准 SQL 的差异的信息，请参阅第 14.2.11 节，“InnoDB 错误处理”。
> 
> MySQL 服务器中的其他非事务性存储引擎（例如 MyISAM）遵循不同的数据完整性范式，称为“原子操作”。在事务方面，MyISAM 表实际上总是在 autocommit = 1 模式下运行。原子操作通常提供可比的完整性和更高的性能。
> 
> 因为 MySQL Server 支持这两种范式，您可以决定是通过原子操作的速度还是使用事务特性来最好地服务于您的应用程序。可以在每个表的基础上做出此选择。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2017-05-22T19:19:43.713

如果发生任何异常，事务将自动回滚。

**Laravel 基本交易格式**

```
 try{
    DB::beginTransaction();

    /* 
    * SQL operation one 
    * SQL operation two
    ..................     
    ..................     
    * SQL operation n */

    DB::commit();
   /* Transaction successful. */
}catch(\Exception $e){       

    DB::rollback();
    /* Transaction failed. */
} 
```

# iphone - 如何从 systemTimeZone(NSTimeZone) 中提取时区((GMT+05:30)

> ID：15105644
> 
> 赞同：2
> 
> 时间：2013-02-27T06:33:43.553
> 
> 标签：iphone, ios, objective-c

谁能告诉我从中提取时区的想法`systemTimeZone(NSTimeZone)`

我已经添加了这个样本。

```
NSTimeZone *localTime = [NSTimeZone systemTimeZone];
NSLog(@" - current  local timezone  is  %@",localTime); 
```

我得到如下输出 - 当前本地时区是亚洲/加尔各答 (GMT+05:30) 偏移`19800`

从上面提出如何单独获得该区域。即-仅 GMT+05:30

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T06:46:32.917

这会给你你想要的，

```
NSTimeZone *localTime = [NSTimeZone systemTimeZone];
NSLog(@" - current  local timezone  is  %@",[localTime abbreviation]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T06:51:28.013

```
 NSTimeZone *localTime = [NSTimeZone systemTimeZone];
    NSLog(@" - current  local timezone  is  %@",[localTime abbreviation]); 
```

我认为这很有帮助。

# php - php curl - Netsuite Web 服务

> ID：15105645
> 
> 赞同：1
> 
> 时间：2013-02-27T06:33:44.897
> 
> 标签：php, xml, web-services, curl, netsuite

我们目前正在尝试集成到 Netsuite 网络服务中，但是我们不希望使用他们的 PHP 连接器工具包。我们已经有了一个使用 Coldfusion 和 cfhttp 开发的脚本，可以毫无问题地将数据发布到 Netsuite。

现在，我们目前已将脚本转换为 PHP，并正在使用 curl 函数将数据发送到 Netsuite。

我们可以毫无问题地成功创建新的销售订单记录，但是事实证明，获取返回响应消息非常困难，因为我们得到的只是 302 重定向。

我假设这可能与执行收集返回对象的登录凭据有关，但是我不知道如何将此数据存储在 cookie 值中，以便可以继续在系统中读取它以进行系统集成。

下面是我们的 CURL 代码

```
$http_header = array(
    'Content-Type: text/xml; charset="utf-8"',
    'SOAPAction: getItemAvailability',
    'Content-Length: ' . strlen($myXml),
    'Accept: text/xml',
    'Cache-Control: no-cache',
    'Pragma: no-cache'
);

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $this->wdsl);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 1);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 1);
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_HTTPHEADER, $http_header);
curl_setopt($ch, CURLOPT_POSTFIELDS, $myXml);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_VERBOSE, 1);
$returnObj = curl_exec($ch);
curl_close($ch); 
```

我们已经尝试了各种方法，但似乎无法使其正常工作，因此我们可以获得返回的 xml 数据，它可以毫无问题地创建记录。任何建议将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-09T12:55:32.210

我建议使用包装库而不是 curl 进行 NetSuite 通信。我已经用[ruby​​ 包装器](https://github.com/netsweet/netsuite)做了很多工作，它对我来说效果很好。

您可以获得 302 的原因之一是您尝试访问的帐户与您指向的当前 WSDL 位于不同的数据中心。标准 WSDL 域是`system.netsuite.com`，但许多 NetSuite 安装都在`system.na1.netsuite.com`. 检查您所在的数据中心的最简单方法是登录到 GUI 并查看域。

# java - 使用 httpclient 的连接持久性

> ID：15105647
> 
> 赞同：3
> 
> 时间：2013-02-27T06:33:50.683
> 
> 标签：java, performance, persistence, httpclient, apache-httpclient-4.x

我使用 httpclient.execute(request) 对同一个 url 进行多个请求。我可以将连接重新用于连续请求吗？如何在不一次又一次声明 HttpClient 的情况下优化代码。

```
for(int i=0;i<=50;i++)
{
HttpClient client = new DefaultHttpClient();
HttpGet request = new HttpGet("my_url");
HttpResponse response = client.execute(request);
System.out.println(response.getStatusLine().getStatusCode());
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-27T06:59:56.030

为了在您的代码中使用单个客户端（基于[Exception using HttpRequest.execute(): Invalid use of SingleClientConnManager: connection still assigned](https://stackoverflow.com/q/4612573/1065197)和 Lars Vogel [Apache HttpClient - Tutorial](http://www.vogella.com/articles/ApacheHttpClient/article.html)）：

*   步骤 1\. 将客户端代移到`for-loop`.
*   第 2 步。您应该阅读响应内容并关闭流。如果你不这样做，你会得到以下异常

    ```
    Exception in thread "main" java.lang.IllegalStateException: 
        Invalid use of SingleClientConnManager: connection still allocated. 
    ```

在代码中：

```
//step 1
HttpClient client = new DefaultHttpClient();
for(int i=0;i<=50;i++) {
    HttpGet request = new HttpGet("my_url");
    HttpResponse response = client.execute(request);
    System.out.println(response.getStatusLine().getStatusCode());
    //step 2
    BufferedReader br = new BufferedReader(
        new InputStreamReader(response.getEntity().getContent()));
    //since you won't use the response content, just close the stream
    br.close();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T06:53:52.893

试试下面。

```
HttpUriRequest httpGet = new HttpGet(uri);
DefaultHttpClient defaultHttpClient = new DefaultHttpClient();
HttpResponse httpResponse = defaultHttpClient.execute(httpGet); 
```

# python - 使用金字塔的python unicode csv导出

> ID：15105652
> 
> 赞同：1
> 
> 时间：2013-02-27T06:34:14.073
> 
> 标签：python, pyramid, export-to-csv

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T06:47:21.043

我不是 Windows 人，所以我不确定问题是出在您的代码上还是出在 excel 上，只是没有很好地处理非 ascii 字符。但是我注意到您正在使用 python[`csv`](http://docs.python.org/2/library/csv.html)模块编写文件，该模块[因 unicode 令人头疼而臭名昭著](https://stackoverflow.com/questions/1846135/python-csv-library-with-unicode-utf-8-support-that-just-works)。

其他用户报告成功使用[`unicodecsv`](https://github.com/jdunck/python-unicodecsv)csv 模块的替代品。也许您可以尝试以 csv 编写器的身份加入此模块，看看您的问题是否会神奇地消失。

# php - drupal 6 form module not calling hook_theme

> ID：15105655
> 
> 赞同：0
> 
> 时间：2013-02-27T06:34:38.780
> 
> 标签：php, forms, drupal, drupal-6

I'm trying to build a table with form elements by theming the form.

I have created a form with 9 elements #type textfield: a1,a2,a3,b1,b2,b3,c1,c2,c3\.

I would like to put them into a table using theme_table($header,$row).

To do this I create a _theme(){} function and another function that creates the $header and $rows for the form and uses drupal_render to create the form. The form renders only when I have return $form in the form hook. But really i don't want to render the form there, but later in the theme_module where I drupal_render($form). But this isn't actually working.

```
function name_menu() {
  $items['name/form'] = array(
    'title' => t('Name'),
    'page callback' => 'drupal_get_form',
    'page arguments' => array('name_form'),
    'access callback' => 'user_access',
    'type' => MENU_CALLBACK,    
  );
  return $items;
}

function name_theme() {
    return array('name_form' => array('arguments' => array('form' => NULL),),);
}

function theme_name_form($form){
    $output = '',
    $header = array(
        array('data' => t('Header1')),
        array('data' => t('Header2')),
        array('data' => t('Header3')),
    );
    $rows = array(
        array($form['a1'],$form['b1'],$form['c1']),
        array($form['a2'],$form['b2'],$form['c2']),
        array($form['a3'],$form['b3'],$form['c3']),
    );

     $form['items'] = array(
        '#type' => 'markup', '#value' => theme_table($header,$rows),
        );   
    $output .= drupal_render($form); //form rendered
}

function name_form(&$form_state) {    
 $form['a1'] = array('#type' => 'textfield');
 $form['a2'] = array('#type' => 'textfield');
 $form['a3'] = array('#type' => 'textfield');
 $form['b1'] = array('#type' => 'textfield');
 $form['b2'] = array('#type' => 'textfield');
 $form['b3'] = array('#type' => 'textfield');
 $form['c1'] = array('#type' => 'textfield');
 $form['c2'] = array('#type' => 'textfield');
 $form['c3'] = array('#type' => 'textfield');         

$form['#theme'] = 'theme_name_form';
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T07:33:21.913

尝试遵循这些教程：
[http](http://www.jaypan.com/tutorial/themeing-drupal-6-forms-tables-checkboxes)
://www.jaypan.com/tutorial/themeing-drupal-6-forms-tables-checkboxes或 [http://coffeeshopped.com/2010/09/drupal-drag-and-drop-tables -in-custom-modules](http://coffeeshopped.com/2010/09/drupal-drag-and-drop-tables-in-custom-modules)
或 [https://drupal.stackexchange.com/questions/5374/how-to-render-a-form-in-table-layout](https://drupal.stackexchange.com/questions/5374/how-to-render-a-form-in-table-layout)

阅读：[http](http://api.drupal.org/api/drupal/modules%21system%21system.api.php/function/hook_theme/6)
://api.drupal.org/api/drupal/modules%21system%21system.api.php/function/hook_theme/6和[http://drupal.org/node/751826](http://drupal.org/node/751826)

看看这个文件：[http ://drupal.org/node/528932](http://drupal.org/node/528932)

故障排除：-清除drupal缓存（管理»站点配置»性能）-重新渲染模块（管理»站点构建»模块）

基本流程：

```
function module_perm(){} //creates permissions
function module_menu(){} //creates menu
function module_form(){} //makes form elements
function module_theme(){} //register the theme function 
function theme_module(){} //build and return an output string using drupal_render()
function module_submit(){} //called by submit in form 
```

# sql - SQL Query to fetch data in single transaction

> ID：15105659
> 
> 赞同：3
> 
> 时间：2013-02-27T06:34:48.967
> 
> 标签：sql, sql-server-2008

I have a table to keep friend information, with columns `MemberID` and `FriendID`. Here is some sample data:

```
RecordID MemberID FriendID
-------- -------- --------
   1        10       12    
   2        12       10    
   3        10       14    
   4        15       10    
   5        14       12    
   6        10       13    
   7        11       13 
```

I need to find the friends of any Member, either in the `MemberID` column or the `FriendID` column.

For example:

*   The friends for `MemberID` 10 are 12, 13, 14, 15.
*   The friends for `MemberID` 14 are 10, 12.

I have tried many ways to get the values with a query, but all in vain.

Please suggest the best SQL query to accomplish the task in a single statement.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T06:38:27.760

您是否尝试过使用工会进行查询？

```
SELECT FriendID
FROM mytable
WHERE MemberID = {The ID}
UNION
SELECT MemberID AS FriendID
FROM mytable
WHERE FriendID = {The ID} 
```

如果您需要它与众不同并且可能有重叠，您还可以使用：

```
SELECT DISTINCT FriendID
FROM (
    SELECT FriendID
    FROM mytable
    WHERE MemberID = {The ID}
    UNION
    SELECT MemberID AS FriendID
    FROM mytable
    WHERE FriendID = {The ID}
) Derived 
```

为了非常清楚，请务必替换`{The ID}`为您要查找的任何 ID。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T06:46:10.800

这将进行一次扫描。无需执行 -- 这`UNION`将需要 2 次扫描并且性能更差。

```
SELECT DISTINCT
   M.FriendID
FROM
   dbo.Friend F
   CROSS APPLY (VALUES
      (F.MemberID, F.FriendID),
      (F.FriendID, F.MemberID)
   ) M
WHERE
   M.MemberID = 10; 
```

[看到这个在 Sql Fiddle 中工作](http://sqlfiddle.com/#!3/d8fb9/2)。

现在要自相矛盾了——我想了更多。仅当您没有索引时，我关于扫描的陈述才是正确的。`MemberID`但是，如果你在两个和上都有一个单独的索引`FriendID`（一个是聚集的，另一个是非聚集的），那么一个`UNION`方法实际上会执行得更好，因为它会执行两次查找而不是扫描。因此，因此，我实际上建议您坚持`UNION`并让这些索引继续运行。

```
SELECT FriendID FROM dbo.Friend WHERE MemberID = 10
UNION
SELECT MemberID FROM dbo.Friend WHERE FriendID = 10; 
```

此外，我建议无论您选择哪种查询，`RecordID`都应从表中删除该列`Friend`。此列完全没有必要，因为任何时候您想引用朋友之间的关系，您都可以简单地使用 的组合键`(MemberID, FriendID)`。通过删除此列，每行将占用更少的字节，这将获得每页更多的行，这将导致获得相同数据的读取次数减少——这是一个提高性能的胜利。如果表中没有其他列，则通过删除`RecordID`!

以下是实施这些建议的方法：

```
-- if RecordID is part of the PK
ALTER TABLE dbo.Friend DROP CONSTRAINT PK_Whatever;

-- if RecordID is part of a separate non-PK clustered index
DROP INDEX dbo.Friend.CI_Whatever;

-- If the PK is not already over these two columns
ALTER TABLE dbo.Friend
   ADD CONSTRAINT PK_Friend PRIMARY KEY CLUSTERED (MemberID, FriendID);

CREATE NONCLUSTERED INDEX IX_Friend_FriendID_MemberID
   ON dbo.Friend (FriendID) -- MemberID is implicitly included. 
```

请注意，最终的非聚集索引现在是上述`UNION`查询第二部分的“覆盖”索引，这意味着它不需要命中聚集索引来满足查询的该部分。所以你现在得到 2 次搜索，性能最好。

# iphone - 如何获取在 iPhone/iPad 中配置的电子邮件帐户的详细信息

> ID：15105666
> 
> 赞同：1
> 
> 时间：2013-02-27T06:35:16.613
> 
> 标签：iphone, ios, objective-c, ios5

嗨，我正在制作 iPad 应用程序。如果他在设备中配置了他的电子邮件帐户并获取他的电子邮件和其他可用详细信息，我需要对用户进行身份验证。你们能帮我解决这个问题吗？

而且电子邮件未配置我想将他重定向到邮件设置。到目前为止，我得到了相同的以下代码

```
 [[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"mailto:"]]; 
```

请帮帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T06:52:27.477

不，您永远无法在邮件应用程序中配置用户详细信息，它会破坏用户隐私，因此不允许

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T06:44:03.310

无法获取帐户的详细信息。而且，这违反了苹果的政策。如果你在你的应用程序中这样做，那么苹果可以拒绝你的应用程序。但是，使用以下代码，您可以检查设备上至少启用了一个电子邮件帐户：

```
Class mailClass = (NSClassFromString(@"MFMailComposeViewController"));
if ([mailClass canSendMail])
{
    //There is email account configured
}
else
{
    //Email account is not configured. Can't send the email.
} 
```

# html - 为什么我的 HTML 页面的标题在页面上显示为纯文本？

> ID：15105667
> 
> 赞同：3
> 
> 时间：2013-02-27T06:35:30.567
> 
> 标签：html

标题确实按预期显示在浏览器的标题栏中，但它也显示为网页第一行的文本。这是HTML。是什么赋予了？

```
<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" href="admin.css" title="" type="text/css" media="screen" charset="utf-8">
        <title>User pics</title>
    </head>
    <body>
        <img src="http:/blah.s3.amazonaws.com/1xrfnyf08goxpsda1mhs.jpg">
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T06:37:30.663

尝试

```
<!DOCTYPE html>
<html>
    <head>
        <title>User pics</title>
        <link rel="stylesheet" href="admin.css" title="" type="text/css" media="screen" charset="utf-8">
    </head>
    <body>
        <img src="http:/blah.s3.amazonaws.com/1xrfnyf08goxpsda1mhs.jpg" alt="" />
    </body>
</html> 
```

**您不能在 html 标记之外定义链接标记。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T06:44:30.440

删除css参考并检查一次..可能是css的问题

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-19T05:33:32.050

如果你有

```
*{
    display:block; 
} 
```

在你的 CSS 文件中确保删除它，因为这会导致标题出现

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-16T03:35:54.897

您需要正确关闭上面的链接标签。你有

```
<link rel="stylesheet" href="admin.css" title="" type="text/css" media="screen" charset="utf-8"> 
```

它应该读

```
<link rel="stylesheet" href="admin.css" title="" type="text/css" media="screen" charset="utf-8"/> 
```

# r - How to calculate average values large datasets

> ID：15105670
> 
> 赞同：3
> 
> 时间：2013-02-27T06:35:42.730
> 
> 标签：r, time-series, average, plyr

I am working with a dataset that has temperature readings once an hour, 24 hrs a day for 100+ years. I want to get an average temperature for each day to reduce the size of my dataset. The headings look like this:

```
 YR MO DA HR MN TEMP
  1943  6 19 10  0   73
  1943  6 19 11  0   72
  1943  6 19 12  0   76
  1943  6 19 13  0   78
  1943  6 19 14  0   81
  1943  6 19 15  0   85
  1943  6 19 16  0   85
  1943  6 19 17  0   86
  1943  6 19 18  0   86
  1943  6 19 19  0   87 
```

etc for 600,000+ data points.

How can I run a nested function to calculate daily average temperature so i preserve the YR, MO, DA, TEMP? Once I have this, I want to be able to look at long term averages & calculate say the average temperature for the Month of January across 30 years. How do I do this?

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-27T06:44:58.783

在一个步骤中，您可以这样做：

```
 meanTbl <- with(datfrm, tapply(TEMP, ISOdate(YR, MO, DA), mean) ) 
```

这为您提供了日期时间格式的索引以及值。如果您只想要 Date 作为字符而没有尾随时间：

```
meanTbl <- with(dat, tapply(TEMP, as.Date(ISOdate(YR, MO, DA)), mean) ) 
```

每月平均值可以通过以下方式完成：

```
 monMeans <- with(meanTbl, tapply(TEMP, MO, mean)) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-27T06:54:45.260

你可以这样做`aggregate`：

```
# daily means
aggregate(TEMP ~ YR + MO + DA, FUN=mean, data=data) 

# monthly means 
aggregate(TEMP ~ YR + MO, FUN=mean, data=data)

# yearly means
aggregate(TEMP ~ YR, FUN=mean, data=data)

# monthly means independent of year
aggregate(TEMP ~ MO, FUN=mean, data=data) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-27T06:45:05.507

您的第一个问题可以使用`plyr`包来解决：

```
library(plyr)
daily_mean = ddply(df, .(YR, MO, DA), summarise, mean_temp = mean(TEMP)) 
```

与上述解决方案类似，获取月度意味着：

```
monthly_mean = ddply(df, .(YR, MO), summarise, mean_temp = mean(temp)) 
```

或获取整个数据集的月平均值（30 年，也就是气候的正常值），而不是每年：

```
monthly_mean_normals = ddply(df, .(MO), summarise, mean_temp = mean(temp)) 
```

# java - Java, Regex match first 10 digits in String, disregard leading zeros

> ID：15105672
> 
> 赞同：2
> 
> 时间：2013-02-27T06:35:46.867
> 
> 标签：java, regex

I am interested to extract the first 10 digits if exists from a long string while disregarding the leading zeros. Additionally if there are only zeroes, return only 1 zero, if there no numbers, return empty string. I wish to match it in a single `find`.

For example:

*   `"abcd00111.g2012asd"` should match to `"1112012"`
*   `"aktr0011122222222222ddd"` should match to `"1112222222"`
*   `"asdas000000asdasds0000"` should match to `"0"`
*   `"adsads.cxzv.;asdasd"` should match to `""`

Here is what I have tried so far: [Ideone Demo - code](http://ideone.com/nSfnaY)

```
Pattern p = Pattern.compile("[1-9]{1}+[0-9]{9}");
Matcher m = p.matcher(str);
if (m.find()) {
  String match = m.group();
  System.out.println(match);
} 
```

The problem is that this regex require 9 sequential digits after the first non zero, and I need any 9 digits (possible non digit chars in between).

Notice that in the code I have `if (m.find())` instead of `while (m.find())` because I wish to find the match in single run.

**UPDATE**

base on the comments i understood that it is not possible with regex to do it in single run.

I would like an answer not have to be regex based but most efficient since i will execute this method many times.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T06:51:55.087

~~在一般情况下，不可能使用单个`find`. 如果您知道连续数字序列的最大数量，则可以这样做，但如果不知道，则不可能，至少在 Java`Pattern`类的支持级别上是不可能的。~~我错了。[Kobi 的评论](https://stackoverflow.com/questions/15105672/java-regex-match-first-10-digits-in-string-disregard-leading-zeros/15105896#comment21253648_15105672)表明使用单个正则表达式是可能的。我将在这里复制评论：

> 哦，通过捕获 10 位数字中的每一个，这在正则表达式中是可能的，例如: `^[\D0]*(\d)\D*(?:(\d)\D*(?:(\d)\D*(?:(\d)\D*(?#{6 more times}))?)?)?`，但它真的很难看，并且不能很好地扩展。

不过，您仍然需要连接这些组。正则表达式开头的逻辑非常好：由于贪婪属性，它会搜索第一个非零数字，如果有的话，它会在所有前导零之后，或者如果没有非零，它将取最后一个 0 -零位。

* * *

如果你把关于效率的话题抛在脑后，而你想要简短的代码：

```
String digitOnly = str.replaceAll("\\D+", "");
String noLeadingZero = digitOnly.replaceFirst("^0+", "");
String result = digitOnly.isEmpty() ? "" :
                noLeadingZero.isEmpty() ? "0" : 
                noLeadingZero.substring(0, Math.min(noLeadingZero.length(), 10)); 
```

* * *

坦率地说，用 a 循环遍历字符串`StringBuilder`就足够了，而且它应该比正则表达式解决方案更快。

```
StringBuilder output = new StringBuilder();
boolean hasDigit = false;
boolean leadingZero = true;
for (int i = 0; i < str.length() && output.length() < 10; i++) {
    char currChar = str.charAt(i);
    if ('0' <= currChar && currChar <= '9') {
        hasDigit = true;
        if (currChar != '0') {
            output.append(currChar);
            leadingZero = false;
        } else if (!leadingZero) { // currChar == 0
            output.append(currChar);
        } // Ignore leading zero
    }
}

String result = !hasDigit ? "" :
                output.length() == 0 ? "0" :
                output.toString(); 
```

[**性能测试代码**](https://gist.github.com/anonymous/5046416)。请注意，您应该调整参数以使其类似于实际输入，以便获得良好的近似值。我怀疑循环方法比任何涉及正则表达式的方法都慢；但是，差异仅在大规模上显着。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T06:55:32.173

```
String test = "sdfsd0000234.432004gr23.022";
StringBuilder sb = new StringBuilder();
for(int i=0;i<test.length();i++) {
    if(Character.isDigit(test.charAt(i))) 
        sb = sb.append(test.charAt(i));
}
String result = sb.toString();
result = result.replaceFirst("^0*", "");  //Remove leading zeros
System.out.println(result);               //Will print 23443200423022 
```

# javascript - How can I prevent the user from printing multiple copies of a HTML page?

> ID：15105674
> 
> 赞同：1
> 
> 时间：2013-02-27T06:35:53.977
> 
> 标签：javascript, html

Usually if we print a page it will print the whole page and we have **option to print number of copies**. Here is the problem, for my erp application i **don't want to give number of copies** in the print dialog, somehow that option should disable through program (or) my page should print with only one copy without going to the print dialog box itself.

So, the print option should be available, but I want the user to be only able to print **one** copy of my page. How to achieve this?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T06:48:58.567

算了吧，除了构建自己的浏览器 :D 并强制用户只使用那个浏览器之外，您无能为力。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T06:39:38.310

您不能强制浏览器只允许打印您的页面的一份副本。那是不可能的。

此外，在 HTML/Javascript 中无法禁用打印对话框（以避免打印页面）。因此，您对此无能为力。

但是，您可以为打印布局定义不同的 CSS，因此您可以“隐藏”所有元素，您的用户将无法打印您的页面（但这可能很烦人）：

```
@media screen {
    body { /* css */}
}
@media print {
    body { display: none; }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T07:24:17.553

如果您从 CD 运行页面，则可以使用该`.bat`技巧从命令行静默打印。但是从 Web 浏览器中，您无法绕过打印对话框。如果可能的话，广告商会将传单打印到您的打印机上。

但是，您可以使用此[HTML/Javascript One Click Print（无对话框）](https://stackoverflow.com/questions/9213660/html-javascript-one-click-print-no-dialogs)并强制用户使用 Internet Explorer。除非绝对必要，否则不建议这样做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T07:42:36.657

您可以这样做，但仅适用于 Intranet 和 IE（据我所知）。

您不会为公共网站这样做，因为它需要在页面上操作 ActiveX，而且您必须降低浏览器的安全级别（在我的情况下是 IE），这仅适用于受控环境并增加安全风险。

# jedit - Every time i open a file with jedit text editor, large buffer warning pops up

> ID：15105681
> 
> 赞同：1
> 
> 时间：2013-02-27T06:36:38.537
> 
> 标签：jedit

I use *jEdit* very often to open my xml files. It so happened that once i tried opening a huge file(around **900MB** file size, say xyz.xml) with jEdit, which failed.
From then on, every time i open any file(file size< 1MB) with jedit text editor, large buffer warning pops up:
**The buffer is very large and jEdit may become unresponsive.**
Can anybody help me how to resolve this problem. Is the only way out for this is to reinstall the editor?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T17:09:10.640

JEdit doesn't support very large files very well. You can increase the size that JEdit is allowed to use inside of Java by changing [java's heap size](https://stackoverflow.com/questions/1565388/increase-heap-size-in-java) when you launch jedit like this:

```
java -Xmx512m -jar /FOO/BAR/jedit.jar 
```

If increasing the memory size doesn't work for your largest files, you should try another editor. [`vim`](http://www.vim.org/download.php) performs very well with very large files.

# python - If, Elif, Confusion

> ID：15105687
> 
> 赞同：-2
> 
> 时间：2013-02-27T06:37:08.990
> 
> 标签：python, if-statement

While writing a Blackjack script, I've come across some confusion on how I should use 'if', 'elif', and 'else' statements. I looked at most of the posts on the subject here, googled it, but am still confused. . .I did learn that if 'elif' is used instead of repeating 'if' statements, the code will short circuit when the (or one of the) 'elif' statements evaluates to True. This has actually confused me more (although I understand the concept of what happens when using 'elif' and shortcircuiting). The first 5 'if' statement illustrates this. Had I used 'elif' instead of 'if', the code may never reach the last condition if both player and dealer hit 21\. . .After this though, it seems I could have used 'elif' statements or just leave it the way it is. . .So, my question is, did I use them correctly in the rest of main()? If not, how would you do it? Thank you very much.

```
# current working version - - - 02/26/2013
# Notes: Nees to fix Ace problem. Ace can be 11 or 1.

import random
import os

def main():
    print "Welcome To Python Blackjack. [H] Is For A Hit, [S] Is To Stand, [Q] To       Quit.\n"
    c = ""    # Hit, Stand or Quit Variable.
    player = deal_cards()    # deal player
    dealer = deal_cards()    # deal dealer
    print "< ---- Player Hand ---->"
    print "Player Hand: ", player    
    print "Total Player Hand: ", total_hand(player)    
    print
    print "< ---- Dealer Hand ---->"
    print "Dealer Hand: ", dealer                      
    print "Total Dealer Hand: ", total_hand(dealer)
    print

    if (total_hand(player) == 21):
        print "BLACKJACK! YOU WIN!"
        message()
    if (total_hand(player) > 21):
        print "BUSTED! You Lose"
        message()
    if (total_hand(dealer) == 21):
        print "BLACKJACK! Sorry You Lose! Dealer Wins"               # must use if   statements because elif would fail to reach the tie line.
        message()
    if (total_hand(dealer) > 21):
        print "Dealer Busted! You Win!"
        message()
    if (total_hand(player) == 21) and (total_hand(dealer) == 21):    # must use if       statements because elif would fail to reach this line.
        print "Player And Dealer Tie! Game Goes To Dealer"
        message()

    while (c != "q"):   
        c = raw_input("[H]it [S]tand [Q]uit: ").lower()    
        if (c == "h"):
            hit(player)         
            print ""
            print "Your Cards Are Now: ",player                 
            print "Total For Player Is: ",total_hand(player)
            if (total_hand(player) == 21):
            print "BLACKJACK! You Win!"
            message()
            if (total_hand(player) > 21):
                print "BUSTED! Sorry, You Lose."
                message()
            if (total_hand(dealer) == 21):
                print "BLACKJACK! Sorry You Lose! Dealer Wins."
                message()
            if (total_hand(dealer) > 21):
                print "Dealer Busted! You Win!\n"
                message()
            if (total_hand(dealer) <= 17): 
                hit(dealer)
                print "\nThe Dealer Takes A Card", dealer
                print "For A Total Of: ", total_hand(dealer)
                if (total_hand(dealer) == 21):
                    print "BLACKJACK! Sorry You Lose! Dealer Wins.\n"
                    message()
                if (total_hand(dealer) > 21):
                    print "Dealer Busted! You Win!\n"
                    message()               
            elif (c == "s"):
            if (total_hand(dealer) <= 17):
                hit(dealer)
                print "The Dealer Takes A Card", dealer
                print "For A Total Of: ", total_hand(dealer)
                if (total_hand(dealer) == 21):
                    print "BLACKJACK! Dealer Wins.\n"
                    message()
                if (total_hand(dealer) > 21):
                    print "Dealer Busted! You Win!\n"
                    message()
                if (total_hand(dealer) >= total_hand(player)):
                    print "Sorry, You Lose. Dealer Wins With A Tie\n"
                    message()
                if (total_hand(player) > total_hand(dealer)):
                    print "You Win With The Best Hand!\n"
                    message()
             if (total_hand(player) > total_hand(dealer)):
                print "You Win With The Best Hand!\n"
                message()
            if (total_hand(dealer) > total_hand(player)):
                print "Sorry, You Lose. Dealer Wins\n"
                message()
        else:
            if (c == "q"):
                message()
            else:
                print "Invalid Choice. . .To Quit, Press [Q]"

def deal_cards():
    random1 = random.randint(1,11)
    random2 = random.randint(1,11)
    hand = [random1, random2]
    return hand

def hit(hand):
    newCard = random.randint(1,11)
    hand.append(newCard)
    return hand

def total_hand(hand):
    total = sum(hand)
    return total

def message():
    again = raw_input("Do You Want To Play Again? [Y] For Yes - Press Any Key To Quit:   ").lower()
    if "y" in again:
        main()
    else:
        print "Thanks For Playing"
        os._exit(1)

# main

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T06:55:47.943

尝试将更具体的条件放在不太具体的条件之前。

例如，如果您从此更改订单

```
if (total_hand(player) == 21):
    print "BLACKJACK! YOU WIN!"
    message()
if (total_hand(player) > 21):
    print "BUSTED! You Lose"
    message()
if (total_hand(dealer) == 21):
    print "BLACKJACK! Sorry You Lose! Dealer Wins"                
    message()
if (total_hand(dealer) > 21):
    print "Dealer Busted! You Win!"
    message()
if (total_hand(player) == 21) and (total_hand(dealer) == 21):         
    print "Player And Dealer Tie! Game Goes To Dealer"
    message() 
```

对此

```
if (total_hand(player) == 21) and (total_hand(dealer) == 21):         
    print "Player And Dealer Tie! Game Goes To Dealer"
    message()
elif (total_hand(player) == 21):
    print "BLACKJACK! YOU WIN!"
    message()
elif (total_hand(dealer) == 21):
    print "BLACKJACK! Sorry You Lose! Dealer Wins"                
    message()
elif (total_hand(player) > 21):
    print "BUSTED! You Lose"
    message()
elif (total_hand(dealer) > 21):
    print "Dealer Busted! You Win!"
    message() 
```

在您无法使用 elifs 达到语句的所有条件之前，因为满足最后一条语句所需的条件对于第一条或第三条语句都是正确的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T06:42:58.837

您的代码的一个主要问题是您应该首先检查平局，否则您将宣布玩家为赢家。

使用您的代码，无论您使用`if`或，它实际上并没有什么不同`elif`。这是因为该`message()`函数实际上从未返回：它要么退出程序，要么`main()`递归调用。这不是一个好的设计：任何其他阅读您的代码的人都不会期望一个名为的函数`message()`来做这些事情。

我的建议是创建一个函数来检查游戏是否结束并返回一个描述结果的字符串。这是我可以做到的；但是请注意，即使在这里您也可以使用`if`而不是`elif`，因为`return`语句无论如何都会退出函数。

```
def check_game_over(total_player, total_dealer):
    if total_dealer == 21:
        if total_player == 21:
            return "Player And Dealer Tie! Game Goes To Dealer"
        else:
            return "BLACKJACK! Sorry You Lose! Dealer Wins"              
    elif total_player == 21:
        return "BLACKJACK! YOU WIN!"
    elif total_player > 21:
        return "BUSTED! You Lose"
    elif total_dealer > 21:
        return "Dealer Busted! You Win!"
    else:
        return None 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T06:44:53.307

在这种情况下，使用`elif`是完全安全的。

您是否希望恰好发生几个子句*之一*？始终使用`elif`. 是否有可能发生多个，不一定相关的子句？使用`if`.

下面是一个示例，说明您需要注意差异的原因：

```
x = 0
if x < 1:
    do_something()
elif x < 2:
    do_something_else_instead() 
```

这种嵌套有时用于检查是否`x`在不同的范围内。但是，如果您不在`elif`这里使用：

```
x = 0
if x < 1:
    do_something()
if x < 2:
    do_something_else_instead() 
```

现在这两个子句都将被执行，而不是只执行一个，因为如果`x`小于一，它也将小于二。*有时*可以通过正确检查来避免这种情况，如下所示：

```
x = 0
if x < 1:
    do_something()
if x >= 1 and x < 2:
    do_something_else_instead() 
```

但是，如果 do_something() 也修改了 x，它可能会增加它并将其推送到 1 <= x < 2 范围内，因此第二个子句也将被执行。为了防止该问题，只需使用`elif`, that one 保证仅执行其中一个子句，即第一个计算结果为 的子句`True`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-27T06:45:58.707

如果您修改为在 of 中使用`while`循环`main`，而不是调用`main`from `message`，我建议您的程序最终会更短更清晰。

[结构化编程](http://en.wikipedia.org/wiki/Structured_programming)是曾经但不再有争议的想法，我们使用条件构造（如`if`和加`elif`循环`while`），而不是其他控制接下来发生的方法。或者，您的呼叫来自`message`于，`main`并且`os.exit`正在采取与结构化编程不同的策略。通过安排`main`反复打电话`message`，你把自己画到了一个角落。事实上`os.exit`，这只是摆脱那个角落的少数几种方法之一。另一种是抛出异常并在`main`.

所以试着用这种方式画出来：

```
def main():
    play()

def play():
    again = True
    while again:
        player = deal_cards()
        dealer = deal_cards()
        print ...
        ...
        game_over = False
        while not game_over
            if (total_hand(player) == 21) and (total_hand(dealer) == 21):
                print "Player And Dealer Tie! Game Goes To Dealer"
                game_over = True
                # You don't need to do anything else here.
            elif total_hand(player) == 21:
                print ...
                game_over = True
            elif total_hand(dealer) == 21:
                print ...
                game_over = True
            elif ...
                print ...
            elif ...
                ...
            else ...
                print ...

            if not game_over:
                c = raw_input("[H]it [S]tand [Q]uit: ").lower()
                if c == "q":
                    game_over = True
                elif c == "h":
                    hit(player)
                    # You don't need to do anything else here.
                else:
                    ...

        answer = raw_input("Do You Want To Play Again? [Y] For Yes - Press Any Key To Quit:   ").lower()
        again = ("y" in answer) 
```

（~~请忽略这个给专家的说明，只是因为 Stack Overflow 上有很多：我知道结构化编程的有趣替代方案，包括递归、适当的尾调用和蹦床。对于这个特定的问题，我建议它们不是下一步。~~ )

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-27T07:14:43.273

一个序列`if/elif/elif/.../elif/else`只是一个测试*链*，一个接一个地运行，直到一个成功（或者直到它们都失败并被`else`执行）。相反，`if`s 序列只是一系列*独立*测试，每个测试都在不咨询其他测试的情况下运行。

测试顺序的顺序很重要！较早的测试在以后的测试之前运行。因此，如果你这样做

```
def rangetest(n):
    if n >= 40:
        print "Big!"
    elif n >= 25:
        print "Medium!"
    elif n >= 10:
        print "Small!"
    else:
        print "Tiny!" 
```

然后放入`rangetest(100)`将始终 print only `Big!`，即使其余条件都匹配。（如果我们只`if`在这里使用而不是`elif`，那么我们会得到`Big!`，`Medium!`并且`Small!`全部打印出来）。

* * *

其他答案与`if/elif`您程序中的使用有关。我只想指出一件小事。

我会颠倒你程序的逻辑。我不会调用一个依次调用`main`的函数，而是编写一个如下所示的*主循环*：`message``main`

 *```
def main():
    play_game()
    while 1:
        again = raw_input("Do You Want To Play Again? [Y] For Yes - Press Any Key To Quit:   ")
        if 'y' in again.lower():
            play_game()
        else:
            print "Thanks for playing!"
            return # exit main loop 
```

然后`play_game`将包含游戏的主要逻辑，`return`而不是`message()`. 这简化了您的控制流程，因为您只需退出当前回合（通过使用`return`）而不是笨拙地“循环”`main`通过`message`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-27T06:41:01.977

不，有几个小的缩进错误，最后，您可以使用 elif 语句。这是您的代码的外观。

```
def main():
    print "Welcome To Python Blackjack. [H] Is For A Hit, [S] Is To Stand, [Q] To       Quit.\n"
    c = ""    # Hit, Stand or Quit Variable.
    player = deal_cards()    # deal player
    dealer = deal_cards()    # deal dealer
    print "< ---- Player Hand ---->"
    print "Player Hand: ", player    
    print "Total Player Hand: ", total_hand(player)    
    print
    print "< ---- Dealer Hand ---->"
    print "Dealer Hand: ", dealer                      
    print "Total Dealer Hand: ", total_hand(dealer)
    print

    if (total_hand(player) == 21):
        print "BLACKJACK! YOU WIN!"
        message()
    if (total_hand(player) > 21):
        print "BUSTED! You Lose"
        message()
    if (total_hand(dealer) == 21):
        print "BLACKJACK! Sorry You Lose! Dealer Wins"               # must use if   statements because elif would fail to reach the tie line.
        message()
    if (total_hand(dealer) > 21):
        print "Dealer Busted! You Win!"
        message()
    if (total_hand(player) == 21) and (total_hand(dealer) == 21):    # must use if       statements because elif would fail to reach this line.
        print "Player And Dealer Tie! Game Goes To Dealer"
        message()

    while (c != "q"):   
        c = raw_input("[H]it [S]tand [Q]uit: ").lower()    
        if (c == "h"):
            hit(player)         
            print ""
            print "Your Cards Are Now: ",player                 
            print "Total For Player Is: ",total_hand(player)
            if (total_hand(player) == 21):
            print "BLACKJACK! You Win!"
            message()
            if (total_hand(player) > 21):
                print "BUSTED! Sorry, You Lose."
                message()
            if (total_hand(dealer) == 21):
                print "BLACKJACK! Sorry You Lose! Dealer Wins."
                message()
            if (total_hand(dealer) > 21):
                print "Dealer Busted! You Win!\n"
                message()
            if (total_hand(dealer) <= 17): 
                hit(dealer)
                print "\nThe Dealer Takes A Card", dealer
                print "For A Total Of: ", total_hand(dealer)
                if (total_hand(dealer) == 21):
                    print "BLACKJACK! Sorry You Lose! Dealer Wins.\n"
                    message()
                if (total_hand(dealer) > 21):
                    print "Dealer Busted! You Win!\n"
                    message()               
        elif (c == "s"):
            if (total_hand(dealer) <= 17):
                hit(dealer)
                print "The Dealer Takes A Card", dealer
                print "For A Total Of: ", total_hand(dealer)
                if (total_hand(dealer) == 21):
                    print "BLACKJACK! Dealer Wins.\n"
                    message()
                if (total_hand(dealer) > 21):
                    print "Dealer Busted! You Win!\n"
                    message()
                if (total_hand(dealer) >= total_hand(player)):
                    print "Sorry, You Lose. Dealer Wins With A Tie\n"
                    message()
                if (total_hand(player) > total_hand(dealer)):
                    print "You Win With The Best Hand!\n"
                    message()
             if (total_hand(player) > total_hand(dealer)):
                print "You Win With The Best Hand!\n"
                message()
            if (total_hand(dealer) > total_hand(player)):
                print "Sorry, You Lose. Dealer Wins\n"
                message()
        elif (c == "q"):
            message()
        else:
            print "Invalid Choice. . .To Quit, Press [Q]" 
```*

# java - Log4j configuration(Size Based) not working

> ID：15105694
> 
> 赞同：4
> 
> 时间：2013-02-27T06:37:32.043
> 
> 标签：java, log4j, rollingfileappender

I have my application for which the below entry is done in **Log4j** properties file.Size based rolling is not working for this application. File does not rollover at 5 MB and the application keeps on logging and making it in GB. In one run approximately 6 MB of log is generated.The application runs multiple times a day.

Can someone help in pointing out where I am doing a mistake?

```
# SampleApp configuration
log4j.category.com.ibm.hmel.hwmmphdya=INFO, SampleApp  
log4j.additivity.com.ibm.hmel.hwmmphdya=false  
log4j.appender.SampleApp =org.apache.log4j.rolling.RollingFileAppender  
log4j.appender.SampleApp.File=S:/FIH/LOG/SAMPLE_APP_01/SAMPLE_APP_01.log  
log4j.appender.SampleApp.layout=org.apache.log4j.PatternLayout  
log4j.appender.SampleApp.layout.ConversionPattern=%-21d{dd-MMM-yyyy HH:mm:ss} [%t] %-5p %c %x - %m%n  

log4j.appender.SampleApp.RollingPolicy=org.apache.log4j.rolling.FixedWindowRollingPolicy
log4j.appender.SampleApp.RollingPolicy.FileNamePattern=S:/HIF/LOG/SAMPLE_APP_01  /SAMPLE_APP_01.log.%i.zip
log4j.appender.SampleApp.RollingPolicy.MinIndex=1
log4j.appender.SampleApp.RollingPolicy.MaxIndex=10
log4j.appender.SampleApp.TriggeringPolicy=org.apache.log4j.rolling.SizeBasedTriggeringPolicy
log4j.appender.SampleApp.TriggeringPolicy.MaxFileSize=5242880 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-11T01:50:35.830

以下对我有用

```
log4j.rootLogger=TRACE, Roller

log4j.appender.Roller=org.apache.log4j.rolling.RollingFileAppender
log4j.appender.Roller.RollingPolicy=org.apache.log4j.rolling.FixedWindowRollingPolicy  
log4j.appender.Roller.RollingPolicy.maxIndex=13
log4j.appender.Roller.TriggeringPolicy=org.apache.log4j.rolling.SizeBasedTriggeringPolicy  
log4j.appender.Roller.TriggeringPolicy.MaxFileSize=26214400
log4j.appender.Roller.RollingPolicy.FileNamePattern=j_log_%i.log
log4j.appender.Roller.RollingPolicy.ActiveFileName=j_log_0.log
log4j.appender.Roller.layout=org.apache.log4j.PatternLayout
log4j.appender.Roller.layout.ConversionPattern=%d [%t] %-5p %c - %m%n 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T07:34:19.153

尝试将单位添加到您的尺寸

```
MaxFileSize=5242880KB 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T08:51:39.673

如我所见，您正在使用 lo4j 伴侣附加功能。请确保您使用的是最新的 log4j.jar（1.2.17 版适用于我，我遇到了 1.2.14 版的问题）。

我编写了简单的测试应用程序来重现您的问题：

```
package com.ibm.hmel.hwmmphdya;
import org.apache.log4j.Logger;

public class Roller {

    private Logger logger = Logger.getLogger(Roller.class);
    private final String FAKE_LOG_LINE = "12345678901234567890123456789012345678901234567890";

    public static void main(String[] args) {
        Roller roller = new Roller();
        roller.logStuff();
    }

    private void logStuff() {
        for (;;) { // ugly loop
            logger.info(FAKE_LOG_LINE);
        }
    }
} 
```

并将以下内容`log4j.properties`放在类路径中：

```
log4j.category.com.ibm.hmel.hwmmphdya=INFO, Roller
log4j.additivity.com.ibm.hmel.hwmmphdya=false
log4j.appender.Roller=org.apache.log4j.rolling.RollingFileAppender
log4j.appender.Roller.File=D:/FIH/SAMPLE_APP_01.log
log4j.appender.Roller.layout=org.apache.log4j.PatternLayout
log4j.appender.Roller.layout.ConversionPattern=%-21d{dd-MMM-yyyy HH:mm:ss} [%t] %-5p %c %x - %m%n
log4j.appender.Roller.RollingPolicy=org.apache.log4j.rolling.FixedWindowRollingPolicy
log4j.appender.Roller.RollingPolicy.FileNamePattern=D:/FIH/SAMPLE_APP_01.log.%i.zip 
log4j.appender.Roller.RollingPolicy.MinIndex=1 
log4j.appender.Roller.RollingPolicy.MaxIndex=10 
log4j.appender.Roller.TriggeringPolicy=org.apache.log4j.rolling.SizeBasedTriggeringPolicy
log4j.appender.Roller.TriggeringPolicy.MaxFileSize=5242880 
```

我认为我的结果还可以，这些是我的日志输出目录的内容：

```
2013-02-27  09:30    <DIR>          .
2013-02-27  09:30    <DIR>          ..
2013-02-27  09:30         4 440 720 SAMPLE_APP_01.log
2013-02-27  09:30         5 242 920 SAMPLE_APP_01.log.1.zip
2013-02-27  09:30         5 242 920 SAMPLE_APP_01.log.2.zip
2013-02-27  09:30         5 242 920 SAMPLE_APP_01.log.3.zip
2013-02-27  09:30         5 242 920 SAMPLE_APP_01.log.4.zip
2013-02-27  09:30         5 242 920 SAMPLE_APP_01.log.5.zip 
```

文件大小“5 242 920”或多或少是配置的大小。

您可以通过提供`-Dlog4j.debug`系统属性来进一步解决您的问题。

**更新：** 您可能希望确保伴随的附加库（`apache-log4j-extras-1.1.jar`）存在于类路径中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-26T13:26:53.333

请检查您是否已包含[apache-log4j-extras.jar](https://javalibs.com/artifact/log4j/apache-log4j-extras)并使用[log4j-1.2.16.jar](http://repo1.maven.org/maven2/log4j/log4j/1.2.16/log4j-1.2.16.jar)或至少高于 2.17 版本。这是可以使用的示例 log4j.properties。

```
 #Worked with 2.17 version
    #make log files rotate based on size and zip old rotated
    log4j.rootLogger=INFO, loggerId
    log4j.appender.loggerId=org.apache.log4j.rolling.RollingFileAppender
    log4j.appender.loggerId.rollingPolicy=org.apache.log4j.rolling.FixedWindowRollingPolicy
    log4j.appender.loggerId.rollingPolicy.maxIndex=5
    log4j.appender.loggerId.triggeringPolicy=org.apache.log4j.rolling.SizeBasedTriggeringPolicy
    log4j.appender.loggerId.triggeringPolicy.MaxFileSize=10000000
    log4j.appender.loggerId.rollingPolicy.FileNamePattern=worker-%i.log.gz
    log4j.appender.loggerId.rollingPolicy.ActiveFileName=worker.log
    log4j.appender.loggerId.layout=org.apache.log4j.PatternLayout
    log4j.appender.loggerId.layout.ConversionPattern=%d [%t] %-5p (%F:%L) - %m%n 
```

有关房产的更多详细信息，请查看[此处](http://2min2code.com/articles/log4j_intro/rolling_archiving_file_on_size_prop)

# javascript - Web 应用程序中的跨源请求

> ID：15105698
> 
> 赞同：1
> 
> 时间：2013-02-27T06:37:46.173
> 
> 标签：javascript, xmlhttprequest, tizen, tizen-emulator

在我的 Tizen 系统应用程序中，我提出了一个跨源 AJAX 请求，它在 Tizen 的浏览器中运行良好，但是当我将其打包为 Web 应用程序时，跨源请求无法运行。我已经在模拟器和真实设备上对其进行了测试。我也使用 webkit 检查器记录网络日志，截图如下： ![在此处输入图像描述](../Images/3003429e67695a9504e4062e33555ca4.png)

哪位专家能告诉我为什么？

以下是我的代码：

```
var url = "";//this is assigned a domain which supports cross domain access according to HTML5 specification.
var client = new XMLHttpRequest();
client.open("GET", url, true);
client.setRequestHeader("Accept-Language", 'en-us');
client.onreadystatechange = function() { alert("succeed"); }
client.send(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T00:13:38.823

应该声明它在外部访问的任何资源[（请参阅访问外部网络资源）：](https://developer.tizen.org/dev-guide/web/2.3.0/org.tizen.mobile.web.appprogramming/html/app_dev_process/accessing_external_network_resources.htm)

> 默认情况下，您无法访问外部网络资源（WARP：W3C 访问请求策略）。因此，您必须为小部件请求权限才能检索网络资源。您可以使用“访问”选项卡上的“添加”按钮输入多个 URL。对于每个 URL，您可以指明是否要允许小部件访问 URL 子域。允许子域列的内容可以通过鼠标点击来切换。

因此，如果无法访问我们在以下定义的案例中所需的特定资源，它就无法工作`config.xml`：

```
<access origin="http://url_resource" subdomains="true"/> 
```

或者

```
<access origin="*" subdomains="true"/> 
```

让一切过去。

# android - Android蓝牙l2cap connectNative java.io.IOException：无效参数

> ID：15105700
> 
> 赞同：0
> 
> 时间：2013-02-27T06:38:04.880
> 
> 标签：android, bluetooth, arguments, l2cap

我正在为 Android 编写一个蓝牙应用程序。我通过反射使用 android l2cap api。但是我在某些设备上收到了错误报告（它在其他一些设备上正常工作）。

```
java.io.IOException: Invalid argument
at android.bluetooth.BluetoothSocket.connectNative(Native Method)
at android.bluetooth.BluetoothSocket.connect(BluetoothSocket.java:220) 
```

那么有什么问题呢？

# javascript - 通过书签设置访问链接的样式？

> ID：15105702
> 
> 赞同：4
> 
> 时间：2013-02-27T06:38:05.937
> 
> 标签：javascript, firefox, hyperlink, bookmarklet

一段时间以来，我广泛使用的一个书签在 Firefox 中被破坏了。它可能适用于其他浏览器，但我只在 Firefox 中使用它。

[有问题的小书签是squarefree](https://www.squarefree.com/bookmarklets/pagelinks.html)的“隐藏访问过的” 。

由于这不起作用（正确），我决定自己动手并最终得到这个：

```
javascript:(
function(){
var css=document.createElement('style');
css.type='text/css';
var styles='a%3Avisited{display%3Anone !important}';
css.appendChild(document.createTextNode(styles));
document.getElementsByTagName("head")[0].appendChild(css);
})(); 
```

为了可读性，分成几行，否则我正在使用的内容未修改。
问题是，它确实将内联样式表附加到头部，它只是永远不会改变链接的外观。但是，一旦我删除`:visited`（或`%3Avisited`此处显示的），样式表将应用于链接并且它们被隐藏，尽管很明显，无论此时它们的访问状态如何，隐藏都已完成。

这里的底线是，我认为存在问题`:visited`，并且可以预见的是，在 about:config 中翻转 bool`layout.css.visited_links_enabled`没有任何作用，因为这只会从访问的链接中删除样式。这是不可取的。:)

可能值得注意的是，squarefree 小书签仍然将其内容附加到头部，它也根本没有任何效果。

我很茫然。我错过了什么，是否可以通过小书签隐藏访问过的链接？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T10:43:19.310

**`:visited`由于安全原因，几年前的行为**已更改......虽然您的代码（和 squarefree 书签）可能适用于旧版浏览器，但您将无法在最新版本的浏览器中获得相同的影响

来自[https://blog.mozilla.org/security/2010/03/31/plugging-the-css-history-leak/的注释](https://blog.mozilla.org/security/2010/03/31/plugging-the-css-history-leak/)

*   **访问的链接只能在颜色上有所不同：前景、背景、轮廓、边框、SVG 描边和填充颜色**。所有其他样式更改要么通过加载资源或更改文档中样式化内容的位置或大小来泄漏链接的访问性，这可以被检测并用于识别访问过的链接。

其他有用的参考资料：

*   [http://www.azarask.in/blog/post/socialhistoryjs/](http://www.azarask.in/blog/post/socialhistoryjs/) - 安全问题是什么（及其创造性用途）
*   [http://dbaron.org/mozilla/visited-privacy](http://dbaron.org/mozilla/visited-privacy) - 修复方法

对于 CSS，您可以尝试以下方法：

```
a:visited {
    color: white !important; /* It would hide the text if the background is white too */
    /* or some better css approach for your requirement */
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T07:20:51.890

我知道您无法再找出哪些链接已被 javascript 访问过。这样做是为了保护用户隐私。出于安全目的，我相信即使尝试为访问过的链接设置样式或创建样式，在当前的任何主要浏览器中都不起作用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T08:42:29.243

出于安全原因，浏览器已采取措施防止 JavaScript 读取链接的“已访问”状态。这意味着您通过 CSS 应用于 ":visited" 的任何样式都不会在 DOM 中注册。

您可以更改颜色和文本装饰（可能）之类的内容，用户将在屏幕上看到更改，但 JS 无法读取结果。

为什么它不应用“显示：无”？因为如果浏览器要从页面中删除链接，这可能会改变页面的布局，例如 div 的高度，并提供潜在的侧通道来确定哪些链接已被访问。因此，不会应用“display:none”。

我可以为您的目标建议的最佳解决方案是更改链接颜色以匹配背景颜色，或者修改不透明度。

# python - python中的回归系数计算

> ID：15105707
> 
> 赞同：2
> 
> 时间：2013-02-27T06:38:18.170
> 
> 标签：python, numpy, pandas, linear-regression

我有一个数据框和一个活动的输入文本文件。数据框是通过熊猫生成的。我想使用以下公式找出每个术语的回归系数 Y=C1aX1a+C1bX1b+...+C2aX2a+C2bX2b+....C0 ，

其中 Y 是活动 Cna 是位置 n 处残差选择 a 的回归系数，X 是对应于位置 n 处残差选择 a 存在或不存在的虚拟变量编码（xna=1 或 0），C0 是活动。我的数据框看起来像

```
2u    2s    4r     4n     4m   7h   7v
0     1     1      0      0     0    1
0     1     0      1      0     0    1
1     0     0      1      0     1    0
1     0     0      0      1     1    0
1     0     1      0      0     1    0 
```

这里 1 和 0 分别代表残基的存在和不存在。使用 MLR（多元线性回归）如何找出每个残基的回归系数，即 2u、2s、4r、4n、4m、7h、7v。C1a 表示残差a 在第1 位置的回归系数（这里1a 是2u，1b 是2s，2a 是4r...） X1a 表示虚拟值，即1a 对应的0 或1。活动文件包含以下数据

```
6.5
5.9
5.7
6.4
5.2 
```

所以第一个方程看起来像

6.5=C1a*0+C1b*1+C2a*1+C2b*0+C2c*0+C3a*0+C3b*1+C0 …</p>

我可以使用 numpy 获得回归系数吗？请帮助我，所有建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T17:45:49.547

让`A`成为你的数据框（你可以将它作为一个纯粹而简单的 numpy 数组。`np.loadtxt`如果它是 CSV，则使用它来读取它），并且 y 是你的活动文件（再次，一个 numpy 数组），并使用`np.linalg.lstsq`

```
DF = """0     1     1      0      0     0    1
0     1     0      1      0     0    1
1     0     0      1      0     1    0
1     0     0      0      1     1    0
1     0     1      0      0     1    0"""

res = """6.5,  5.9,  5.7,  6.4,  5.2"""

A = np.fromstring ( DF, sep=" " ).reshape((5,7))
y = np.fromstring(res, sep=" ")

(x, res, rango, svals ) = np.linalg.lstsq(A, y )

print x
# 2.115625,  2.490625,  1.24375 ,  1.19375 ,  2.16875 ,  2.115625, 2.490625
print np.sum(A.dot(x)**2) # Sum of squared residuals:
# 177.24750000000003
print A.dot(x) # Print predicition
# 6.225,  6.175,  5.425,  6.4  ,  5.475 
```

# ios - NSMutableDictionary 删除关键路径上的对象？

> ID：15105709
> 
> 赞同：2
> 
> 时间：2013-02-27T06:38:20.043
> 
> 标签：ios, objective-c, nsmutabledictionary, key-value-coding

我有一个分层的 NSMutableDictionary 对象，我希望能够删除层次结构中更深层次的字典。有没有一种快速简便的方法来做到这一点，例如，类似于 removeObjectAtKeyPath 的方法？好像一个也找不到

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T07:28:12.887

没有内置任何东西，但是您的基本类别方法就可以了：

```
@implementation NSMutableDictionary (WSSNestedMutableDictionaries)

- (void)WSSRemoveObjectForKeyPath: (NSString *)keyPath
{
    // Separate the key path
    NSArray * keyPathElements = [keyPath componentsSeparatedByString:@"."];
    // Drop the last element and rejoin the path
    NSUInteger numElements = [keyPathElements count];
    NSString * keyPathHead = [[keyPathElements subarrayWithRange:(NSRange){0, numElements - 1}] componentsJoinedByString:@"."];
    // Get the mutable dictionary represented by the path minus that last element
    NSMutableDictionary * tailContainer = [self valueForKeyPath:keyPathHead];
    // Remove the object represented by the last element
    [tailContainer removeObjectForKey:[keyPathElements lastObject]];
}

@end 
```

注意这*要求*路径的倒数第二个元素 -`tailContainer`是响应的东西`removeObjectForKey:`，可能是另一个`NSMutableDictionary`。如果不是，轰！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T06:43:56.883

您可以创建一个类别：

这最多下降 1 级：

```
#import "NSMutableDictionary+RemoveAtKeyPath.h"

@implementation NSMutableDictionary (RemoveAtKeyPath)

-(void)removeObjectAtKeyPath:(NSString *)keyPath{

    NSArray *paths=[keyPath componentsSeparatedByString:@"."];

    [[self objectForKey:paths[0]] removeObjectForKey:paths[1]];

}

@end 
```

它被称为：

```
NSMutableDictionary *adict=[[NSMutableDictionary alloc]initWithDictionary:@{@"key1" : @"obj1", @"key11":@"obj11"}];

NSMutableDictionary *bdict=[[NSMutableDictionary alloc]initWithDictionary:@{@"key2" : adict}];

NSLog(@"%@",bdict);
NSLog(@"%@",[bdict valueForKeyPath:@"key2.key1"]);

[bdict removeObjectAtKeyPath:@"key2.key1"];
NSLog(@"After category : %@",bdict); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-01T17:33:43.570

为了处理不包含句点的键路径（即实际上是键的键路径），对 Josh 的答案进行了小幅改进：

```
- (void)removeObjectAtKeyPath:(NSString *)keyPath
{
    NSArray *keyPathElements = [keyPath componentsSeparatedByString:@"."];
    NSUInteger numElements = [keyPathElements count];
    if (numElements == 1) {
        [self removeObjectForKey:keyPath];
    } else {
        NSString *keyPathHead = [[keyPathElements subarrayWithRange:(NSRange){0, numElements - 1}] componentsJoinedByString:@"."];
        NSMutableDictionary *tailContainer = [self valueForKeyPath:keyPathHead];
        [tailContainer removeObjectForKey:[keyPathElements lastObject]];
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-09T02:44:48.933

我知道这是一篇较旧的帖子，但我需要在 Swift 2.0 中找到相同的解决方案，无法找到一个简单的答案，我想出了这个解决方案：

```
public extension NSMutableDictionary {
    public func removeObjectAtKeyPath(keyPath:String) {
        let elements = keyPath.componentsSeparatedByString(".")
        let head = elements.first!
        if elements.count > 1 {
            let tail = elements[1...elements.count-1].joinWithSeparator(".")
            if let d = valueForKeyPath(head) as? NSMutableDictionary {
                d.removeObjectAtKeyPath(tail)
            }
        }else{
            removeObjectForKey(keyPath)
        }
    }
} 
```

我添加了一个扩展来`NSMutableDictionary`使用递归来逐步执行`keyPath`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-01-24T07:17:19.193

我只是对 jscs 接受的答案进行了迭代，并稍作改进——使用`NSString`'s 的内置`pathUtlities`类别处理 KVC 密钥路径。

```
@implementation NSMutableDictionary (NestedMutableDictionaries)
- (void)removeObjectForKeyPath: (NSString *)keyPath
{
    NSArray *key = [keyPath pathExtension];
    NSString *keyPathHead = [keyPath stringByDeletingPathExtension];
    [[self valueForKeyPath:keyPathHead] removeObjectForKey:key];
}
@end 
```

稍微好一点，我觉得。

# php - php和搜索功能错误

> ID：15105711
> 
> 赞同：-1
> 
> 时间：2013-02-27T06:38:29.800
> 
> 标签：php, html, mysql, dreamweaver

我正在创建一个搜索功能或流程以从数据库中进行选择并在 listdropbox 中显示数据，以选择 MySQL 数据库中已经存在的国家，但我遇到了一个错误，我不知道如何修复它任何人都可以帮助我我是 php 新手。错误是（**警告：mysql_fetch_array() 期望参数 1 是资源，布尔值在 C:\wamp\www\Unnamed Site 2\resources\searchForm.php 第 36 行给出**）

# 搜索.php

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Search page</title>
<link href="style/stylesheet.css" rel="stylesheet" type="text/css" />
<style type="text/css">
.searchtitle {
    text-align: center;
}
</style>
</head>

<body>

<!--<?php require_once('header.php'); ?>-->
<table width="80%" height="432">
  <tr>
    <td width="14%" valign="top"><!--<?php require_once('leftsideBar.php'); ?>-->
</td>
    <td width="86%" valign="top"><h2 class="searchtitle">Search Types</h2>
      <table width="95%" height="94">
      <form action="searchProcess.php" method="post" id="searchForm">

        <tr>
          <td width="20%"><label for="searchByName2">By Name</label>
            <select name="searchByName" id="searchByName2">
            </select></td>
          <td width="20%"><label for="searchByCountry">By Country</label>
            <select name="searchByCountry" id="searchByCountry">
             <option id="0">--select your country--</option>
             <?php
               require_once('Connections/connfor_lamelchameltest.php'); 

               $getallCountries = mysql_query("SELECT * FROM country");
               while($viewallCountries = mysql_fetch_array($getallCountries)){

                ?>

               <option id="<?php echo $viewallCountries['country_id']; ?> "><?php echo $viewallCountries['country_name'] ?></option>
                 <?php } ?>

            </select></td>
          <td width="25%"><label for="searchByGovernorate">By Governorate</label>
            <select name="searchByGovernorate" id="searchByGovernorate">
            </select></td>
          <td width="15%"><label for="searchByCity">By City</label>
            <select name="searchByCity" id="searchByCity">
            </select></td>
          <td width="20%"><label for="searchBySpecialization">By Specialization</label>
            <select name="searchBySpecialization" id="searchBySpecialization">
            </select></td>
        </tr>
        </form>
      </table>

  </tr>
</table>

</body>
</html> 
```

# connfor_lamelchameltest.php

```
<?php
$hostname_conn = "localhost";
$database_conn = "lam_el_chamel_db";
$username_conn = "root";
$password_conn = ".....";
$conn = mysql_pconnect($hostname_conn, $username_conn, $password_conn) or trigger_error(mysql_error(),E_USER_ERROR); 
?> 
```

我添加我的配置文件

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T06:41:17.093

`FALSE`如果查询失败，[mysql_query](http://php.net/manual/en/function.mysql-query.php)返回。您需要检查返回值。如果是`FALSE`，您可以使用[mysql_error](http://www.php.net/manual/en/function.mysql-error.php)从数据库中获取错误消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T06:43:34.557

你也可以`mysql_num_rows`在这里使用，它会检查查询是否返回任何行。

```
 $getallCountries = mysql_query("SELECT * FROM country");
 if(mysql_num_rows($getallCountries) > 0) {
     while($viewallCountries = mysql_fetch_array($getallCountries)){
     // insert inside option
     }
 } 
```

您尚未选择数据库使用此代码选择数据库

```
$conn = mysql_pconnect($hostname_conn, $username_conn, $password_conn) or trigger_error(mysql_error(),E_USER_ERROR);
mysql_select_db($database_conn, $conn); 
```

更改`mysql_fetch_array`为`mysql_fetch_assoc`.

# meteor - Meteor 事务操作

> ID：15105712
> 
> 赞同：9
> 
> 时间：2013-02-27T06:38:37.650
> 
> 标签：meteor

我想在一个函数中更新 3 个流星集合，但前提是所有三个更新都成功。否则我想回滚。是否有这样做的好模式？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T09:39:51.863

流星使用 mongodb 作为其不明确支持事务的数据库后端。但是您仍然可以使用一种模式：http: [//docs.mongodb.org/manual/tutorial/perform-two-phase-commits/](http://docs.mongodb.org/manual/tutorial/perform-two-phase-commits/)

基本上，您只需在每笔交易中添加一个状态值，并且仅在一切完成后将其标记为已完成

# ruby-on-rails - Rails 3.x 如何正确定义拐点

> ID：15105722
> 
> 赞同：2
> 
> 时间：2013-02-27T06:39:51.347
> 
> 标签：ruby-on-rails, inflection

我需要为“chassis”这个词定义一个变形，其中同一个词定义了单数和复数，我真的很努力。我以为我在那里有 initialize/inflections.rb 定义

```
 ActiveSupport::Inflector.inflections do |inflect|
#   inflect.plural /^(ox)$/i, '\1en'
#   inflect.singular /^(ox)en/i, '\1'
#   inflect.irregular 'person', 'people'
#   inflect.uncountable %w( fish sheep )
    inflect.uncountable(/.*chassis.*/i)
 end 
```

记下`inflect.uncountable %w( fish sheep )`我第一次设置脚手架时尝试使用 inflect.uncountable %w( chassis ) 的示例，但这根本不起作用，因为它没有考虑路径中的前导部分并导致关系问题以及 car_chassis 和 chassis_lookup 等其他表。

在查看了作为 Stack Overflow 中类似问题的答案提供的各种解决方案后，我最终想出了`inflect.uncountable(/.*chassis.*/i)`似乎可以处理脚手架的问题，但是我遇到了路线问题，其中`<%= link_to "Chassis", admin_chassis_url%>`给我一个没有路线的显示操作错误。

```
ActionController::RoutingError - No route matches {:action=>"show", :controller=>"admin/chassis"} 
```

这是有道理的，因为我想要索引操作，所以我没有将对象传递给路径，但 Rails 显然认为我正在请求显示操作

正则表达式的其他示例

```
#   inflect.plural /^(ox)$/i, '\1en'
#   inflect.singular /^(ox)en/i, '\1' 
```

对我来说只是完整的gobbledygook，学习正则表达式需要一生的学习，我既没有兴趣也没有头脑清醒，并且rails文档[http://api.rubyonrails.org/classes/ActiveSupport/Inflector/Inflections .html](http://api.rubyonrails.org/classes/ActiveSupport/Inflector/Inflections.html)上的屈折变化坦率地说是非常可悲的。

我显然没有正确的拐点。谁能给我一个完整的解决方案，说明我应该如何为我和其他人定义“机箱”一词的变形，因为我发现以前的答案都没有提供完整和正确的解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T23:07:14.200

你的变化似乎是正确的。检查'rake routes'告诉你什么。在我的例子中，它足够聪明地检测到底盘的复数和单一形式是相同的，因此它生成了 admin_chassis_index 而不仅仅是 admin_chassis 用于#index 操作。可能对你来说也是如此。这就是我所做的：

在 config/routes.rb

```
namespace :admin do
  resources :chassis
end 
```

运行 'rake routes' 给出（注意第一条路径）：

```
admin_chassis_index GET    /admin/chassis(.:format)          admin/chassis#index
                    POST   /admin/chassis(.:format)          admin/chassis#create
  new_admin_chassis GET    /admin/chassis/new(.:format)      admin/chassis#new
 edit_admin_chassis GET    /admin/chassis/:id/edit(.:format) admin/chassis#edit
      admin_chassis GET    /admin/chassis/:id(.:format)      admin/chassis#show
                    PUT    /admin/chassis/:id(.:format)      admin/chassis#update
                    DELETE /admin/chassis/:id(.:format)      admin/chassis#destroy 
```

所以，对于#index，我需要调用：

```
<%= link_to "Chassis", admin_chassis_index_url%> 
```

# javascript - 在 javascript 中显示带有地址栏的全屏弹出窗口

> ID：15105723
> 
> 赞同：4
> 
> 时间：2013-02-27T06:39:51.743
> 
> 标签：javascript, web

我想全屏显示一个弹出窗口，只有顶部可见的地址栏。最小化和关闭按钮也应该不可见。目前我正在使用以下代码，它使我能够在 IE 9 中进入全屏模式，但即使 location=1 也不显示地址栏

```
function newPopup(url) {
    popupWindow = window.open(
        url,'popUpWindow','height=700,width=800,left=10,top=10,resizable=no,scrollbars=no,toolbar=1,menubar=1,location=0,directories=1,status=0,channelmode=0,fullscreen=1')
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T14:11:59.420

我认为目前还没有办法只全屏显示导航栏 - 或者至少不是我能找到的。

如果是这种情况，您需要以编程方式重新创建地址栏，然后在使用地址栏时通过 JavaScript 重置您的位置。您可以根据需要使用 CSS 样式使其看起来或多或少像标准栏。

在下面的示例中，我更加充实了 JS；在表单的`submit`事件上，您可以使用`window.location.href`它在浏览器中引起重定向。可能需要对输入进行大量操作以使其成为有效的 url（例如，在重置其位置之前确保它是有效地址）。

我还会考虑添加我们在普通浏览器中找到的那种功能，其中不被视为 URL 的查询被视为搜索。您可以为此使用 Google Web API：[https ://developers.google.com/web-search/docs/](https://developers.google.com/web-search/docs/)

您将无法访问自动完成的浏览器历史记录，这可以通过保留一个经常访问的站点库并使用自动完成库来帮助您来解决。

虽然这并不能直接回答你的问题，但我希望它可以对你有所帮助。

```
HTML
<div class="modal">
  <form>
    <input type="text"></input>
  </form>
</div>

JS

(function(){

document.getElementById("nav-form").addEventListener("submit", function(e){
    var val = document.getElementById("nav-bar").value;
    //parse and execute the navigation command
    //in here, we would check to make sure it's valid, etc.
    //and format it to make sure it's a working url
    //and keep a case for if it's not a valid url,
    //in which case you can leverage the google search api
    window.location.href = val;
});

}(window)); 
```

JS Fiddle 展示了上面的内容：http: [//jsfiddle.net/x8heK/2/](http://jsfiddle.net/x8heK/2/)

# javascript - 如何在新的 ember-v1.0.0-rc.1.js 中调用 _super()？

> ID：15105726
> 
> 赞同：1
> 
> 时间：2013-02-27T06:40:04.987
> 
> 标签：javascript, ember.js

这是我的代码。它在我的旧余烬中运行良好（即：pre-0.4）

```
Ember.Router.reopen({
    startRouting: function() {
        this._super(); // This line shows some error
    },
    transitionTo: function(name, param) {}
}); 
```

现在我已经升级到新的 ember（即 ember-v1.0.0-rc.1.js）。之后，我的茉莉花在我的控制台中显示了一些错误。有人可以帮忙吗？这是我的错误控制台：

```
> app/libs/ember-v1.0.0-rc.1.js:60  app/libs/ember-v1.0.0-rc.1.js:22975
> doTransition app/libs/ember-v1.0.0-rc.1.js:22830 
> app/common/route.js:24  app/libs/ember-v1.0.0-rc.1.js:892 superWrapper
> app/libs/ember-v1.0.0-rc.1.js:23085  app/common/route.js:52 
> app/libs/ember-v1.0.0-rc.1.js:892 superWrapper
> app/libs/ember-v1.0.0-rc.1.js:23116  app/common/route.js:39 
> app/libs/ember-v1.0.0-rc.1.js:892 superWrapper
> app/libs/ember-v1.0.0-rc.1.js:22460 
> app/libs/ember-v1.0.0-rc.1.js:22486 eachHandler
> app/libs/ember-v1.0.0-rc.1.js:22464 setupContexts
> app/libs/ember-v1.0.0-rc.1.js:22363 collectObjects
> app/libs/ember-v1.0.0-rc.1.js:22392 proceed
> app/libs/ember-v1.0.0-rc.1.js:22379 collectObject 
```

# c# - 仅执行一次 if 函数，即使计时器多次调用该函数

> ID：15105729
> 
> 赞同：-1
> 
> 时间：2013-02-27T06:40:20.490
> 
> 标签：c#, windows-phone-7

目前我有一个 timercallback，它每 100 毫秒调用一次 autoRing 函数来检查是否满足条件（适当的分钟和秒），如果满足，它将调用函数 btnSound_click（响铃）

问题是，我希望铃声只响一次（然后自动再次响起，但我需要的响铃之间的时间是 30 秒或更长时间），但问题是 autoRing 被多次调用并且铃声响了多次1 秒时间范围。

所以我按下按钮，这段代码被执行：

```
timerSound = new Timer(new TimerCallback(autoRing), null, 0, 100); 
```

和我的自动响铃功能：

```
private void autoRing(Object obj)
    {
        TimeSpan ts = timeWatch.Elapsed;

        if (ts.Minutes == bellMinutesFirst && ts.Seconds == bellSeconds || ts.Minutes == bellMinutesSecond && ts.Seconds == bellSeconds)
        {
            btnSound_Click_1(null, null);
        } 
```

timeWatch只是一个`Stopwatch`类，`bellMinutesFirst`//只是常量（整数）。`bellSeconds``bellMinutesSecond`

我尝试将 timercallback 更改为 1000ms，但有两个问题：

1.  戒指没有像我希望的那样准确。

2.  不一致，有时会听到 2 声响。

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T06:51:08.790

在回调中，您可以跟踪您是否正在轮询响铃，或者您是否正在等待响铃后的 30 秒。像这样的东西：

```
enum AutoRingStatus { Polling, Waiting }

AutoRingStatus _autoRingStatus = AutoRingStatus.Polling;
DateTime _autoRingWaitingTill = DateTime.Now;
private void autoRing(Object obj) {
    TimeSpan ts = timeWatch.Elapsed;

    if (ts.Minutes == bellMinutesFirst && ts.Seconds == bellSeconds || ts.Minutes == bellMinutesSecond && ts.Seconds == bellSeconds) {
        if (_autoRingStatus == AutoRingStatus.Polling) {
            btnSound_Click_1(null, null);
            _autoRingStatus = AutoRingStatus.Waiting;
            _autoRingWaitingTill = DateTime.Now.AddSecond(30);
        } else {
            if (_autoRingWaitingTill <= DateTime.Now) {
                _autoRingStatus = AutoRingStatus.Polling;
            } else {
                // Waiting for the 30s to pass...
            }
        }
    }
} 
```

# android - 为什么我在加载 ADT 时会收到错误消息“Android SDK 需要 Android Developer Toolkit 版本 XX.XX 或更高版本？”

> ID：15105730
> 
> 赞同：55
> 
> 时间：2013-02-27T06:40:23.220
> 
> 标签：android, eclipse, adt, android-sdk-tools

我刚刚将我的 Android SDK 工具更新到了 21.1 版。不幸的是，当我加载 Android Developer Toolkit 时，这会导致错误：

> Android SDK 需要 Android Developer Toolkit 版本 21.1.0 或更高版本。
> 
> 当前版本是 21.0.1.2012-12-6-2-58。
> 
> 请将 ADT 更新到最新版本。

当我升级 SDK 时，有人警告我可能需要升级 ADT。我试图通过转到帮助 > 检查更新来做到这一点。不幸的是，这会返回一条消息“未找到更新”。

如果我遗漏了一些东西，这里是我的 Android SDK 管理器的屏幕截图：

![Android SDK 管理器](../Images/d12d137954b99537048b28803a7a74e4.png)

我是否缺少安装包？我是否需要以另一种方式更新 ADT (Eclipse)？我应该只下载 ADT 的新副本吗？

* * *

## 回答 #1

> 赞同：126
> 
> 时间：2013-02-27T06:40:23.220

出于某种原因，ADT (Eclipse) 不会接受它确实需要更新的事实。由于用于更新的内置工具失败，您将不得不解决它们。在“帮助”菜单上，而不是选择“检查更新”，而是选择“安装新软件”（因此“帮助”>“安装新软件”）。

在“使用”下拉列表中的“可用软件”屏幕上，提供：
[https](https://dl-ssl.google.com/android/eclipse/) ://dl-ssl.google.com/android/eclipse/（如果尚不可用）。您应该会看到包括开发人员工具在内的选项列表。检查您要更新的所有内容。在下面的复选框列表中，取消选中“安装期间联系所有更新站点以查找所需软件”。

![安装新软件](../Images/e1bf0727000028490c0d8c11c2bb6b89.png)

单击下一步并按照屏幕上剩余的提示进行操作。您可能会收到警告，将执行更新而不是安装。这没关系。操作完成后，您在加载 ADT 时将不再收到“Android SDK 需要 Android Developer Toolkit 版本 21.1.0 或更高版本”的错误消息。

# ajax - AJAX 调用杀死 CodeIgnite 会话。为什么？

> ID：15105733
> 
> 赞同：1
> 
> 时间：2013-02-27T06:40:35.653
> 
> 标签：ajax, codeigniter, session, authentication

我正在使用 CodeIgniter 2.x 。对于身份验证，我使用的是 flexi auth ( [http://haseydesign.com/flexi-auth/](http://haseydesign.com/flexi-auth/) )。我正面临一个可怕的问题。在一个简单的 ajax 请求上，我正在失去会话。

**控制器 ：**

```
$this->auth = new stdClass;

        // Load 'standard' flexi auth library by default.
        $this->load->library('flexi_auth'); 

        // Check user is logged in as an admin.
        // For security, admin users should always sign in via Password rather than 'Remember me'.
        if (! $this->flexi_auth->is_logged_in_via_password()) 
        {
            // Set a custom error message.
            $this->flexi_auth->set_error_message('You must login as an admin to access this area.', TRUE);
            $this->session->set_flashdata('message', $this->flexi_auth->get_messages());
            redirect('auth');
        } 
```

**控制器功能**

```
public function checkItemCode(){

        if($this->input->is_ajax_request()){
            //die('sdasda');
            $getResult = $this->items_model->checkCodeAvailablity();
                if($getResult == false){
                    echo '<span style="color:#f00; margin-left:10px;">This code has been used for another item. Kindly use any other code. </span>';
                }else{
            //echo '<span style="color:#f00">You can use this code!!!</span>';
                }
        } // if
    } // checkItemCode 
```

**AJAX 调用**

```
$(document).ready(function() {
    /// make loader hidden in start
    $('#Loading').hide();    

    $('#code').blur(function(){
        $('#Loading').show();
        $.post("<?php echo base_url()?>items/checkItemCode", {
            code: $('#code').val()
        }, function(response){

            $('#Loading').hide();
            setTimeout("finishAjax('Loading', '"+escape(response)+"')", 400);
        });
        return false;
        });

});
function finishAjax(id, response){
  $('#'+id).html(unescape(response));
  $('#'+id).fadeIn();
} 
```

我已经完成了网络上所有可能的选项，如 sess_update 函数、MY_Session lib 等，但没有运气。

请帮帮我。

此致。

# c# - C#中的嵌套类

> ID：15105736
> 
> 赞同：3
> 
> 时间：2013-02-27T06:40:54.407
> 
> 标签：c#, nested-class

我正在尝试研究 c# 中的嵌套类。在阅读了许多文档和凝视之后，我仍然不清楚何时使用嵌套类。但据我了解，我做了一个小示例程序。我在下面粘贴我的代码。这个嵌套类程序是否以正确的逻辑实现？. 嵌套类实际上使用的是什么 for ？而且我对这个程序有疑问，我在程序中指定了这个疑问。请帮我 ...

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();

        Bank bankObj = new Bank();
        bankObj.CreateAccount();
        bankObj.ShowMyAccountNumber();
    }
}

class Bank
{
    static int accountNumber; //  here if I just declare this as int accountNumber without static it showing an error in the CreatePersonalAccount(int accNo) method's first line ie accountNumber = accNo; as "Cannot access a non-static member of outer type." What actually this error mean ?

    public class BankAccountSection
    {
        public bool CreatePersonalAccount(int accNo)
        {
            accountNumber = accNo;
            return true;
        }
    }

    public void CreateAccount()
    {
        bool result = new BankAccountSection().CreatePersonalAccount(10001);
    }

    public void ShowMyAccountNumber()
    {
        MessageBox.Show(accountNumber.ToString());
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T06:48:04.547

嵌套类通常用于在封闭（外部）类之外没有用处的小型实用程序类。因此，嵌套类通常是`private`. （甚至有一个[FxCop 规则](http://msdn.microsoft.com/en-us/library/ms182162.aspx)。）

**你的代码**

在您的情况下，嵌套类`BankAccountSection`并不是真正有用，因为它本身没有状态。`CreatePersonalAccount`也可能只是外部类的方法。

关于`static int accountNumber;`：这将在*所有*`accountNumber`Bank 对象之间创建一个共享字段，这违背了整个目的。不要那样做。如果确实需要在内部类内部设置对象的字段，则需要将对象的引用传递给内部类。（这与 Java 不同，Java 在某些情况下会自动获得这样的引用。）在您的特定情况下，只需摆脱内部类即可。*`Bank``Bank`*

 ***合法用例示例**

*   您在方法中有一个大型算法。您意识到使用许多小方法和实例变量将该算法提取到它自己的类中会增加可读性。由于该算法非常具体并且可能对其他类没有用，因此您将算法放入内部类中。因此，您可以避免将外部类与仅由该算法使用的实例变量混淆。
*   您创建一个 List 数据结构，该结构在内部实现为[链表](http://en.wikipedia.org/wiki/Linked_list)。由于您不向外界公开列表节点，因此您将节点设为内部类。

有关的：

*   [为什么/何时应该在 .net 中使用嵌套类？还是不应该？](https://stackoverflow.com/questions/48872/why-when-should-you-use-nested-classes-in-net-or-shouldnt-you)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T06:45:17.473

您似乎认为 C# 中的嵌套类的行为与 Java 中的行为相同。换句话说，除非嵌套类被声明为静态，否则它将共享封闭类的实例。在 C# 中，情况并非如此。C# 中没有这种东西——所有嵌套类都是隐式静态的。

这就是为什么您不能`accountNumber`从嵌套类访问，除非该字段被声明为静态的。（因为嵌套类无法访问任何特定实例） C# 中此问题的惯用解决方案是将封闭类的实例传递给嵌套类（可能`this`在实例化时通过构造函数参数传递）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T06:45:56.663

首先，这不是嵌套类，它们只是一个文件中的两个类。

现在，即使它是一个嵌套类，这也可能是一个不使用嵌套类的例子。您绝对应该将您的逻辑与您的 GUI 逻辑分开。

我真的不认为你应该使用嵌套类，我认为它们很难维护，但我可能错了。如果我真的需要使用嵌套类，我可能只会在子类紧密相关时才这样做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T06:49:30.383

该错误是因为您无法在没有对象的情况下访问非静态类的成员。如果你这样做，那么它必须被声明为静态的。*

# javascript - 动态行创建淘汰赛js

> ID：15105737
> 
> 赞同：1
> 
> 时间：2013-02-27T06:40:56.213
> 
> 标签：javascript, arrays, knockout.js, foreach

使用淘汰赛 js 我试图创建一个有 4rows 和 4coulmns 的表。下面是我的数组，它有 16 个元素，需要放入表中。

```
 /*----------------------------------------------------------------------*/
/* View Model                                                           */
/*----------------------------------------------------------------------*/
function ViewModel() {
    var self = this;
    self.items = ko.observableArray(["1.jpg", 
                                      "2.jpg", 
                                      "3.jpg", 
                                      "4.jpg",
                                      "5.jpg",
                                      "6.jpg"
                                      ]);
    self.itemRows = ko.computed(function () { //computes the rows dynamically based on items
        var rows = [];
        var count = 0;
        var items = self.items(); //get the item array
        var current = [];
        for(var i in items)
        {
            var item = items[i];
            current.push(item);
            count++;

            if (count == 4)
            {
                count = 0;
                rows.push(current);
                current = []; //next array
            }
        }

        if (current.length > 0)
        {
            rows.push(current);
        }

        return rows;
    });

    self.bindSort = function() {

        var startIndex = -1;         
        var sortableSetup = {        
         start: function (event, ui)
         {         
          startIndex = ui.item.index();
         },

         stop: function (event, ui) 
         {      
          var newIndex = ui.item.index();        
          if (startIndex > -1) 
          {
              self.from = ko.observable(startIndex);
              self.to = ko.observable(newIndex);
              var iTo = parseInt(self.to());
          var iFrom = parseInt(self.from());
          var from = self.items()[iFrom];
              var to = self.items()[iTo];
              self.items()[iTo] = from;
                  self.items()[iFrom] = to;
                  //alert('before');
                  // alert(from);
                  // alert(to);
                  var fromA = self.items()[iFrom];
              var toA = self.items()[iTo]; 
              //alert('after');
          //alert(fromA);
                  // alert(toA);
              self.items.remove(from);               
              self.items.splice(newIndex, 0, toA);
               self.items.remove(to); 
                self.items.splice(startIndex, 0, fromA);
                          //ui.item.remove();
               self.items.valueHasMutated();

          }

         }
        };

        $(".fruitList").sortable( sortableSetup );                           

    };

}   

/*----------------------------------------------------------------------*/
/* KO HTML Binding                                                      */
/*----------------------------------------------------------------------*/   
$(document).ready(function() {

    // create the view model
    var model = new ViewModel();

    // call the bind method for jquery UI setup
    model.bindSort();

    // binds ko attributes with the html
    ko.applyBindings(model);

}); 
```

并尝试在 html 中执行此操作，

```
<table data-bind="foreach: itemRows">
              <tr class="fruitList" data-bind="foreach: $data">
                  <td><img data-bind="attr: { src: $data }" /></td>
              </tr>
        </table> 
```

我无法获得数组的长度，以及如何在第一行创建 4 个 tds 然后创建第二行时打破循环。有什么建议吗？？？

更新：

当我使用可排序时，下面的代码似乎不起作用，

```
 start: function (event, ui)
     {         
      startIndex = ui.item.index();
     },

     stop: function (event, ui) 
     {      
      var newIndex = ui.item.index(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T07:21:21.877

UPDATE: Move to the bottom for the sortable version

**Non-sortable version**

I have created a jsfiddle which seems to meet your requirements before you edited and mentioned sorting: [http://jsfiddle.net/fENSD/4/](http://jsfiddle.net/fENSD/4/)

What I did was create a computed observable that observes your items observable and returns a nested array in the shape that you want for your table rendering. This isn't the most efficient function, but with some work you could probably cut down on the number of arrays that get allocated (at the moment, 5 or so will be created for a 4x4 grid every time it is updated):

```
self.items = ko.observableArray(["images/1.jpg", "images/2.jpg", "images/3.jpg", "images/4.jpg", "images/5.jpg", "images/6.jpg"]);

self.itemRows = ko.computed(function () { //computes the rows dynamically based on items
    var rows = [];
    var count = 0;
    var items = self.items(); //get the item array
    var current = [];
    for(var i in items)
    {
        var item = items[i];
        current.push(item);
        count++;

        if (count == 4)
        {
            count = 0;
            rows.push(current);
            current = []; //next array
        }
    }

    if (current.length > 0)
    {
        rows.push(current);
    }

    return rows;
}); 
```

The table is then rendered like so:

```
<table data-bind="foreach: itemRows">
    <tr data-bind="foreach: $data">
        <td><img data-bind="attr: { src: $data }" /></td>
    </tr>
</table> 
```

The JSFiddle includes an example of adding an item to the items observable and the table being updated to reflect that as well if you wanted to see that in action. There is also in the JSFiddle an example of one way you can get the length of the items array (`data-bind="text: items().length"`).

**Sortable version**

It was a quite a change, but I managed to get the sorting working as well. Taking the example from the jquery ui website I got the following:

[http://jsfiddle.net/fENSD/11/](http://jsfiddle.net/fENSD/11/)

It is very difficult to sort on tables, and so the jquery ui example actually used a list that had a defined width with each element taking up a certain width. This effectively creates a table. I assume that since you are using images that you can make them all exactly the same size.

To do this, I have some CSS like so:

```
#items { list-style-type: none; margin: 0; padding: 0; width: 200px; }
#items li { width: 48px; margin: 0px; padding: 0px; float: left; text-align: center; height: 48px; } 
```

I then created a proper binding handler like so:

```
ko.bindingHandlers['sortable'] = {
    init: function (element, valueAccessor) {
        var $element = $(element);
        var observable = valueAccessor();
        var value = ko.utils.unwrapObservable(observable);
        $element.sortable({
            stop: function(event, ui) {
                var prev = ui.item.prev();
                var data = ko.dataFor(ui.item[0]);
                var index = 0;
                if (prev.length > 0) {
                    //not the first item
                    var prevData = ko.dataFor(prev[0]);
                    var index = value.indexOf(prevData) + 1;
                }
                var oldIndex = value.indexOf(data);
                value.splice(oldIndex, 1);
                value.splice(index, 0, data);
                observable.valueHasMutated();
            }
        });
    }
}; 
```

Whenever the sortable is updated, it modifies the observable array passed into the binding. **Note**: This is incredibly unrobust and needs to check to make sure that the passed value is actually an observable before telling it that its value has mutated.

The viewmodel looks like so:

```
function ViewModel() {
    var self = this;

    self.items = ko.observableArray(["1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12", "13"]);

    self.items.subscribe(function (value) {
        console.log(value); //this is so you can see that the array is indeed being re-sorted
    });

    self.add = function () {
        self.items.push("another thing");
    };
} 
```

And to render:

```
<ul id="items" data-bind="sortable: items, foreach: items">
    <li><img data-bind="attr: { src: $data }" /></li>
</ul> 
```

The limitations of this method are that if your items are different sizes, the order of the sortable will look a little different than what is actually represented in memory. However, providing that all of your elements are the same size, it should work just fine. The other issue is that this doesn't work well with duplicate items. However, to solve this it should be a simple matter of making each element an object containing a value (maybe even an observable value) instead of a plain old string.

# swing - 如何使整个 Jtable 在 Swing 中不可见？

> ID：15105739
> 
> 赞同：0
> 
> 时间：2013-02-27T06:41:12.530
> 
> 标签：swing, jtable, invisible

我在 Single Jframe 中有两个表。我想隐藏一张桌子并显示另一张桌子，然后再次隐藏前一张桌子并将另一张桌子设置为可见。我试过`upload.jTable1.setVisible(false);`了，但它不工作。有输入吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T07:38:01.323

将您的表格放在 JPanel 中并用于面板[CardLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)

# objective-c - 用动画重新加载集合视图

> ID：15105743
> 
> 赞同：2
> 
> 时间：2013-02-27T06:41:28.350
> 
> 标签：objective-c, objective-c-blocks, uicollectionview

我想用动画重新加载集合。我浏览了文档，他们提供了以下方法。我用过。它工作正常。现在我想处理动画的速度（慢/快）。通过这种方法可以吗？

```
 - (void)performBatchUpdates:(void (^)(void))updates completion:(void (^)(BOOL finished))completion; 
```

我的代码：

```
[mycollectionView performBatchUpdates:^{
    [mycollectionView reloadData];
   }; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-30T10:40:39.710

为单元格添加移动效果和动画：

```
 - (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath
    {

    CGFloat xx=cell.frame.origin.x;
         CGFloat yy=cell.frame.origin.y;

        CGRect frame = cell.frame;
        frame.origin.x = 500; // new x coordinate
        frame.origin.y = 0; // new y coordinate
        cell.frame = frame;

        [UIView animateWithDuration:2.0 animations:^{

            CGRect frame = cell.frame;
            frame.origin.x = xx; // new x coordinate
            frame.origin.y = yy; // new y coordinate
            cell.frame = frame;
            // cell.entityImageEffect.alpha = 1;
        }];

    return cell;

    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-23T13:43:09.240

我不确定，但我认为通过简单地调用来实现是不可能的`performBatchUpdates:`，我认为覆盖它是没有意义的。

但是这样做的简单技巧是使单元格透明，然后调用 UIView`animateWithDuration:animations:`的`collectionView:cellForItemAtIndexPath:`

例如：

```
- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"SMSourceEntityCell";
    SMSourceEntityCollectionViewCell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:CellIdentifier forIndexPath:indexPath];

    cell.backgroundImageView.alpha = 0.1;
    cell.entityImageView.alpha = 0.1;
    cell.entityImageEffect.alpha = 0.1;

    [UIView animateWithDuration:2.0 animations:^{
        cell.backgroundImageView.alpha = 1;
        cell.entityImageView.alpha = 1;
        cell.entityImageEffect.alpha = 1;
    }];

    return cell;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-17T12:19:08.713

唷。我有点晚了，但是如果您正在缓存单元格的内容，您可以为尚未缓存的项目设置动画，并让缓存的单元格按原样显示。这样，您就不会为重复使用的单元格重复单元格动画。

# android - 在我的应用程序中启用 Gmail 登录

> ID：15105751
> 
> 赞同：0
> 
> 时间：2013-02-27T06:41:47.197
> 
> 标签：android, gmail

这些是我登录应用程序所需的最少详细信息：

> guid（全局唯一 ID）
> 
> 名称
> 
> 名字
> 
> 电子邮件
> 
> 性别

对于 Facebook 登录，很明显，可以这样做：

```
JSONObject json = Util.parseJson(facebook.request("me"); 
```

获取上面指定的所有数据。

有没有办法让我用 Gmail 做一些类似而简单的事情？

我读到[这个](https://stackoverflow.com/questions/11184639/is-there-any-gmail-sdk-for-android-just-like-facebook-sdk)说：

> 不，没有这样的 SDK（如 facebook），如果您想访问 Gmail 的电子邮件，那么您需要实现自己的电子邮件客户端，并为此遵循 Spk 共享的上述链接。

但我只想要很少的用户详细信息，我不需要任何与他的邮件等相关的东西，这些都属于授权（如果我是对的）。我只需要身份验证：

我也读过[这个](https://developers.google.com/accounts/)，但看起来没有任何帮助。

这是我现在拥有的代码：

```
import com.google.android.gms.common.ConnectionResult;
import com.google.android.gms.common.GooglePlayServicesClient.ConnectionCallbacks;
import com.google.android.gms.common.GooglePlayServicesClient.OnConnectionFailedListener;
import com.google.android.gms.plus.GooglePlusUtil;
import com.google.android.gms.plus.PlusClient;
import android.os.Bundle;
import android.app.Activity;
import android.app.ProgressDialog;
import android.content.Intent;
import android.content.IntentSender.SendIntentException;
import android.util.Log;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.widget.Toast;

public class MainActivity extends Activity implements ConnectionCallbacks,
        OnConnectionFailedListener {

    private static final int REQUEST_CODE_RESOLVE_ERR = 7;
    private ProgressDialog mConnectionProgressDialog;
    private PlusClient mPlusClient;
    private ConnectionResult mConnectionResult;
    private String TAG = "GmailLogin";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        int errorCode = GooglePlusUtil.checkGooglePlusApp(this);
        if (errorCode != GooglePlusUtil.SUCCESS) {
            GooglePlusUtil.getErrorDialog(errorCode, this, 0).show();
        } else {

             mPlusClient = new PlusClient.Builder(this, this, this)
             .setVisibleActivities( "http://schemas.google.com/AddActivity",
             "http://schemas.google.com/BuyActivity").build();

            mConnectionProgressDialog = new ProgressDialog(this);
            mConnectionProgressDialog.setMessage("Signing in...");

            Button signInButton = (Button) findViewById(R.id.sign_in_button);
            signInButton.setOnClickListener(new View.OnClickListener() {

                @Override
                public void onClick(View v) {

                    if (mConnectionResult == null) {
                        mConnectionProgressDialog.show();
                    } else {
                        try {
                            mConnectionResult
                                    .startResolutionForResult(
                                            MainActivity.this,
                                            REQUEST_CODE_RESOLVE_ERR);
                        } catch (SendIntentException e) {
                            // Try connecting again.
                            mConnectionResult = null;
                            mPlusClient.connect();
                        }
                    }
                }
            });
        }

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

    @Override
    public void onConnectionFailed(ConnectionResult result) {
        if (result.hasResolution()) {
            try {
                result.startResolutionForResult(this, REQUEST_CODE_RESOLVE_ERR);
            } catch (SendIntentException e) {
                mPlusClient.connect();
            }
        }
        // Save the result and resolve the connection failure upon a user click.
        mConnectionResult = result;
    }

    @Override
    protected void onActivityResult(int requestCode, int responseCode,
            Intent intent) {
        if (requestCode == REQUEST_CODE_RESOLVE_ERR
                && responseCode == RESULT_OK) {
            mConnectionResult = null;
            mPlusClient.connect();
        }
    }

    @Override
    public void onConnected() {
        String accountName = mPlusClient.getAccountName();
        Toast.makeText(this, accountName + " is connected.", Toast.LENGTH_LONG)
                .show();
    }

    @Override
    public void onDisconnected() {
        Log.d(TAG, "disconnected");
    }

    @Override
    protected void onStart() {
        super.onStart();
        mPlusClient.connect();
    }

    @Override
    protected void onStop() {
        super.onStop();
        mPlusClient.disconnect();
    }

    } 
```

非常感谢任何帮助，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T06:54:03.433

您不应使用 Gmail 进行使用 Google 帐户的用户身份验证。您可以改用适用于 Android 的 Google + 登录。这将允许您在使用 OAuth 获得所需权限后访问用户的个人资料信息。在此处查看指南：

[https://developers.google.com/+/mobile/android/sign-in](https://developers.google.com/+/mobile/android/sign-in)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T06:53:08.537

这些属性将在原始身份验证以及每个后续身份验证中 作为[声明传递。](http://en.wikipedia.org/wiki/Claims-based_identity)

Google[允许您请求](https://developers.google.com/accounts/docs/OpenID)它们最多包含国家、电子邮件、名字、语言和姓氏作为身份验证令牌的声明。

由于他们不提供 uuid，因此您必须从电子邮件地址中创建一个。没有支持（我能找到）检索性别。

# cassandra - 尽管有 Murmur3 分区器，但所有插入都转到 Cassandra 中的同一节点

> ID：15105753
> 
> 赞同：0
> 
> 时间：2013-02-27T06:41:59.583
> 
> 标签：cassandra

我在 Cassandra 中存储以下列系列

```
Mac Address // PKEY
TimeStamp // PKEY
LocationID
ownerName
Signal Strength 
```

主键是（Mac 地址，时间戳）。

每行的大小约为 100 字节。我有一个有 4 个节点的 Cassandra 集群，每个节点都有 1 GB / 512 MB RAM 和 25 GB 磁盘。我插入了 2000 万行以上列族（转换为 2 GB）。插入的每一行都有不同的 MacAddress，因此没有两行具有相同的 MAC 地址。据我了解，分区将发生在 MacAddress 上，并且由于没有相同的 MAC，2000 万行应该是均匀（嗯，几乎）分布的。我惊讶地发现 99.7% 的数据仅驻留在其中一个节点上。其他三个节点的行数很少。我的复制因子设置为 1（因为我仅将此设置用于 PoC）。

有没有可能发生这种事情的情况？我在网上找不到任何接近这个问题的东西，任何帮助将不胜感激。

* * *

```
Datacenter: datacenter1
==========
Replicas: 1

Address         Rack        Status State   Load            Owns                Token                                       
                                                                               9158199868423703627                         
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               367184151655397632                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               367194907514299830                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               367205663373202028                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               367216419232104226                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               367227175091006423                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               367237930949908621                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               367248686808810819                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               367259442667713017                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               367270198526615214                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               367280954385517412                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               367291710244419610                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               367302466103321808                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               367313221962224005                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               367323977821126203                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               367334733680028401                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               367345489538930599                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               367356245397832796                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               367367001256734994                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               367377757115637192                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               367388512974539390                          
.....
.....
.....
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               368646948466096527                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               368657704324998725                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               368668460183900923                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               368679216042803121                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               368689971901705318                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               368700727760607516                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               368711483619509714                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               368722239478411912                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               368732995337314109                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               368743751196216307                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               368754507055118505                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               368765262914020703                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               368776018772922900                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               368786774631825098                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               368797530490727296                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               368808286349629494                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               368819042208531691                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               368829798067433889                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               368840553926336087                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               368851309785238285                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               368862065644140482                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               368872821503042680                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               368883577361944878                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               368894333220847076                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               368905089079749273                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               368915844938651471                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               368926600797553669                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               368937356656455867                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               368948112515358064                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               368958868374260262                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               368969624233162460                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               368980380092064658                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               368991135950966855                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               369001891809869053                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               369012647668771251                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               369023403527673449                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               369034159386575646                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               369044915245477844                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               369055671104380042                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               369066426963282240                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               369077182822184437                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               369087938681086635                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               369098694539988833                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               369109450398891031                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               369120206257793228                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               369130962116695426                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               369141717975597624                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               369152473834499822                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               369163229693402019                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               369173985552304217                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               369184741411206415                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               369195497270108613                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               369206253129010810                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               369217008987913008                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               369227764846815206                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               369238520705717404                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               369249276564619601                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               369260032423521799                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               369270788282423997                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               369281544141326195                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               369292300000228392                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               369303055859130590                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               369313811718032788                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               369324567576934986                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               369335323435837183                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               369346079294739381                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               369356835153641579                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               369367591012543777                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               369378346871445974                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               369389102730348172                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               369399858589250370                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               369410614448152568                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               369421370307054765                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               369432126165956963                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               369442882024859161                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               369453637883761359                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               369464393742663556                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               369475149601565754                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               369485905460467952                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               369496661319370150                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               369507417178272347                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               369518173037174545                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               369528928896076743                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               369539684754978941                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               369550440613881138                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               369561196472783336                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               369571952331685534                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               369582708190587732                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               369593464049489929                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               369604219908392127                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               369614975767294325                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               369625731626196523                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               369636487485098720                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               369647243344000918                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               369657999202903116                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               369668755061805314                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               369679510920707511                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               369690266779609709                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               369701022638511907                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               369711778497414105                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               369722534356316302                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               369733290215218500                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               369744046074120698                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               369754801933022896                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               369765557791925093                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               369776313650827291                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               369787069509729489                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               369797825368631687                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               369808581227533884                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               369819337086436082                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               369830092945338280                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               369840848804240478                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               369851604663142675                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               369862360522044873                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               369873116380947071                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               369883872239849269                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               369894628098751467                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               369905383957653665                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               369916139816555863                          
192.168.121.176 rack1       Up     Normal  758.61 KB       0.03%               369926895675458061                          
192.168.121.129 rack1       Up     Normal  9.5 MB          0.18%               3898129039052635843                         
192.168.121.129 rack1       Up     Normal  9.5 MB          0.18%               3898262574450307387                         
192.168.121.129 rack1       Up     Normal  9.5 MB          0.18%               -4748915780896388021                        
192.168.121.192 rack1       Up     Normal  5.86 GB         99.72%              -4676858186858460085                        
192.168.121.192 rack1       Up     Normal  5.86 GB         99.72%              -4604800592820532149                        
192.168.121.192 rack1       Up     Normal  5.86 GB         99.72%              -4532742998782604213
....
....
....
....
192.168.121.192 rack1       Up     Normal  5.86 GB         99.72%              3970053097692892235                         
192.168.121.192 rack1       Up     Normal  5.86 GB         99.72%              4042110691730820171                         
192.168.121.192 rack1       Up     Normal  5.86 GB         99.72%              4114168285768748107                         
192.168.121.192 rack1       Up     Normal  5.86 GB         99.72%              4186225879806676043                         
192.168.121.192 rack1       Up     Normal  5.86 GB         99.72%              4258283473844603979                         
192.168.121.192 rack1       Up     Normal  5.86 GB         99.72%              4330341067882531915                         
192.168.121.192 rack1       Up     Normal  5.86 GB         99.72%              4402398661920459851                         
192.168.121.192 rack1       Up     Normal  5.86 GB         99.72%              4474456255958387787                         
192.168.121.192 rack1       Up     Normal  5.86 GB         99.72%              4546513849996315723                         
192.168.121.192 rack1       Up     Normal  5.86 GB         99.72%              4618571444034243659                         
192.168.121.192 rack1       Up     Normal  5.86 GB         99.72%              4690629038072171595                         
192.168.121.192 rack1       Up     Normal  5.86 GB         99.72%              4762686632110099531                         
192.168.121.192 rack1       Up     Normal  5.86 GB         99.72%              4834744226148027467                         
192.168.121.192 rack1       Up     Normal  5.86 GB         99.72%              4906801820185955403                         
192.168.121.192 rack1       Up     Normal  5.86 GB         99.72%              4978859414223883339                         
192.168.121.192 rack1       Up     Normal  5.86 GB         99.72%              5050917008261811275                         
192.168.121.192 rack1       Up     Normal  5.86 GB         99.72%              5122974602299739211                         
192.168.121.192 rack1       Up     Normal  5.86 GB         99.72%              5195032196337667147                         
192.168.121.192 rack1       Up     Normal  5.86 GB         99.72%              5267089790375595083                         
192.168.121.192 rack1       Up     Normal  5.86 GB         99.72%              5339147384413523019                         
192.168.121.192 rack1       Up     Normal  5.86 GB         99.72%              5411204978451450955                         
192.168.121.192 rack1       Up     Normal  5.86 GB         99.72%              5483262572489378891                         
192.168.121.192 rack1       Up     Normal  5.86 GB         99.72%              5555320166527306827                         
192.168.121.192 rack1       Up     Normal  5.86 GB         99.72%              5627377760565234763                         
192.168.121.192 rack1       Up     Normal  5.86 GB         99.72%              5699435354603162699                         
192.168.121.192 rack1       Up     Normal  5.86 GB         99.72%              5771492948641090635                         
192.168.121.192 rack1       Up     Normal  5.86 GB         99.72%              5843550542679018571                         
192.168.121.192 rack1       Up     Normal  5.86 GB         99.72%              5915608136716946507                         
192.168.121.192 rack1       Up     Normal  5.86 GB         99.72%              5987665730754874443                         
192.168.121.192 rack1       Up     Normal  5.86 GB         99.72%              6059723324792802379                         
192.168.121.192 rack1       Up     Normal  5.86 GB         99.72%              6131780918830730315                         
192.168.121.192 rack1       Up     Normal  5.86 GB         99.72%              6203838512868658251                         
192.168.121.192 rack1       Up     Normal  5.86 GB         99.72%              6275896106906586187                         
192.168.121.192 rack1       Up     Normal  5.86 GB         99.72%              6347953700944514123                         
192.168.121.192 rack1       Up     Normal  5.86 GB         99.72%              6420011294982442059                         
192.168.121.192 rack1       Up     Normal  5.86 GB         99.72%              6492068889020369995                         
192.168.121.192 rack1       Up     Normal  5.86 GB         99.72%              6564126483058297931                         
192.168.121.192 rack1       Up     Normal  5.86 GB         99.72%              6636184077096225867                         
192.168.121.192 rack1       Up     Normal  5.86 GB         99.72%              6708241671134153803                         
192.168.121.192 rack1       Up     Normal  5.86 GB         99.72%              6780299265172081739                         
192.168.121.192 rack1       Up     Normal  5.86 GB         99.72%              6852356859210009675                         
192.168.121.192 rack1       Up     Normal  5.86 GB         99.72%              6924414453247937611                         
192.168.121.192 rack1       Up     Normal  5.86 GB         99.72%              6996472047285865547                         
192.168.121.192 rack1       Up     Normal  5.86 GB         99.72%              7068529641323793483                         
192.168.121.192 rack1       Up     Normal  5.86 GB         99.72%              7140587235361721419                         
192.168.121.192 rack1       Up     Normal  5.86 GB         99.72%              7212644829399649355                         
192.168.121.192 rack1       Up     Normal  5.86 GB         99.72%              7284702423437577291                         
192.168.121.192 rack1       Up     Normal  5.86 GB         99.72%              7356760017475505227                         
192.168.121.192 rack1       Up     Normal  5.86 GB         99.72%              7428817611513433163                         
192.168.121.192 rack1       Up     Normal  5.86 GB         99.72%              7500875205551361099                         
192.168.121.192 rack1       Up     Normal  5.86 GB         99.72%              7572932799589289035                         
192.168.121.192 rack1       Up     Normal  5.86 GB         99.72%              7644990393627216971                         
192.168.121.192 rack1       Up     Normal  5.86 GB         99.72%              7717047987665144907                         
192.168.121.192 rack1       Up     Normal  5.86 GB         99.72%              7789105581703072843                         
192.168.121.192 rack1       Up     Normal  5.86 GB         99.72%              7861163175741000779                         
192.168.121.192 rack1       Up     Normal  5.86 GB         99.72%              7933220769778928715                         
192.168.121.192 rack1       Up     Normal  5.86 GB         99.72%              8005278363816856651                         
192.168.121.192 rack1       Up     Normal  5.86 GB         99.72%              8077335957854784587                         
192.168.121.192 rack1       Up     Normal  5.86 GB         99.72%              8149393551892712523                         
192.168.121.192 rack1       Up     Normal  5.86 GB         99.72%              8221451145930640459                         
192.168.121.192 rack1       Up     Normal  5.86 GB         99.72%              8293508739968568395                         
192.168.121.192 rack1       Up     Normal  5.86 GB         99.72%              8365566334006496331                         
192.168.121.192 rack1       Up     Normal  5.86 GB         99.72%              8437623928044424267                         
192.168.121.192 rack1       Up     Normal  5.86 GB         99.72%              8509681522082352203                         
192.168.121.192 rack1       Up     Normal  5.86 GB         99.72%              8581739116120280139                         
192.168.121.192 rack1       Up     Normal  5.86 GB         99.72%              8653796710158208075                         
192.168.121.192 rack1       Up     Normal  5.86 GB         99.72%              8725854304196136011                         
192.168.121.192 rack1       Up     Normal  5.86 GB         99.72%              8797911898234063947                         
192.168.121.192 rack1       Up     Normal  5.86 GB         99.72%              8869969492271991883                         
192.168.121.192 rack1       Up     Normal  5.86 GB         99.72%              8942027086309919819                         
192.168.121.192 rack1       Up     Normal  5.86 GB         99.72%              9014084680347847755                         
192.168.121.192 rack1       Up     Normal  5.86 GB         99.72%              9086142274385775691                         
192.168.121.192 rack1       Up     Normal  5.86 GB         99.72%              9158199868423703627 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T08:45:07.747

您是如何“看到” 99% 的数据在一个节点中的？我问的原因是因为我前几天遇到了类似的问题，但我不确定我的情况是否与您的情况相同。1.2 Datastax 社区版刚发布时，我已经安装了它。我看到我 99.7% 的数据都在一个节点上。我决定使用他们最新的 AMI 1.2，再次运行数据插入测试，然后执行 nodetool -h localhost ring。我猜 nodetool 脚本已更新，因为我看到了一个均匀分布，它没有列出所有 512 个节点。相反，它列出了 2 个节点。

# javascript - 如何互换两个 在选择任何下拉值时使用 jquery 在 HTML 中的位置？

> ID：15105758
> 
> 赞同：1
> 
> 时间：2013-02-27T06:42:37.513
> 
> 标签：javascript, jquery, html

我*有两个`<div>`容器需要在下拉值更改时交换它们的显示位置。

那么，如何使用 Jquery 来实现呢？

下面是显示位置需要互换的两个 div 容器

```
<div id="first"><p>I will be displayed on second place on dropdown's particular value</p></div>

<div id="second"><p>I will be displayed on first place on dropdown's same value for which first div is placed at second position</p></div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T06:46:07.243

简单使用 Javascript

```
<script>

function interchange()
{
 var strDiv1Content = document.getElementById('first').innerHTML;
 var strDiv2Content = document.getElementById('second').innerHTML;

 document.getElementById('first').innerHTML = strDiv2Content;
 document.getElementById('second').innerHTML = strDiv1Content;

}

</script> 
```

使用 jQuery

```
<script>
function interchange()
{
  var strDiv1Cont = $("#first").html();
  var strDiv2Cont = $("#second").html();

  $("#first").html(strDiv2Cont);
  $("#second").html(strDiv1Cont);
}

</script> 
```

在某些按钮单击时调用函数交换

```
<input type ='button' value ='interchange' onclick='interchange' /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T06:46:23.920

这会做到的。

```
var firstHtml = $('#first').html();
var secondHtml = $('#second').html();

$('#second').html(firstHtml);
$('#first').html(secondHtml); 
```

# sql - 子查询在 sql 中返回超过 1 个值

> ID：15105761
> 
> 赞同：-1
> 
> 时间：2013-02-27T06:42:56.510
> 
> 标签：sql, sql-server-2008, sql-update

当我运行它时，我有一个小查询，我收到了错误。请帮我。询问：

```
update MozendaData set [Sub Device]=
(select [Sub Device] from oldMozendaData 
     where MozendaData.[Product Details]=oldMozendaData.[Product Details]) 
where UserID ='APAC\gsvivekanand' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T06:44:23.480

试试这个：

```
UPDATE m
SET m.[Sub Device] = o.[Sub Device] 
FROM MozendaData AS m
INNER JOIN oldMozendaData AS o ON m.[Product Details] = o.[Product Details]
WHERE m.UserID ='APAC\gsvivekanand'; 
```

# android - 为什么 decodeStream 在 options.inSampleSize 派生而不是设置时返回 null

> ID：15105773
> 
> 赞同：0
> 
> 时间：2013-02-27T06:43:37.280
> 
> 标签：android

好的，有人帮我解决这个问题。我正在使用其他线程和 android 教程推荐的 Bitmap.options 来计算 inSample 大小。以下代码导致空位图而不是缩放位图的问题

```
 private int determineCorrectScale(InputStream imageStream){

        // Decode image size
        BitmapFactory.Options o = new BitmapFactory.Options();
        o.inJustDecodeBounds = true;
        BitmapFactory.decodeStream(imageStream, null, o);

        // The new size we want to scale to
        final int REQUIRED_SIZE = 100;

        // Find the correct scale value. It should be the power of 2.
        int scale = 1;
        while (o.outWidth / scale / 2 >= REQUIRED_SIZE && o.outHeight / scale / 2 >= REQUIRED_SIZE) {
            scale *= 2;
        }

        return scale;

    }
    private String saveScaledBitmapToPhone(Uri imagUri){

        InputStream imageStream;
        try {
            imageStream = getContentResolver().openInputStream(imagUri);

            int scale= determineCorrectScale(imageStream);

            BitmapFactory.Options options=new BitmapFactory.Options();
            options.inSampleSize = scale;

            Bitmap yourSelectedImage = BitmapFactory.decodeStream(imageStream, null, options );

.
.
.
.
        } catch (Exception e) {
            return imagUri.toString(); //default

        }
} 
```

yourSelectedImage 为空的问题。但是，如果我注释掉该行

```
 int scale= determineCorrectScale(imageStream); 
```

并将 insampleSize 设置为 8 或 16 或任何其他固定的手动数字，然后一切正常。任何人都可以解释这种行为或如何解决它？我的感觉说这是由于创建了两个静态类的 Options 对象，但这只是一个猜测。我仍然无法修复它:(请帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T08:34:08.553

您正在重用相同的数据流。要么重置它，将数据缓存在字节数组中，要么打开一个新流。

# qt - 在 Qt Creator 中强制链接库的顺序

> ID：15105785
> 
> 赞同：2
> 
> 时间：2013-02-27T06:44:24.843
> 
> 标签：qt, linker, qt-creator, static-linking

我正在尝试使用来自 Qt Creator 中的应用程序的 3rd 方驱动程序。此应用程序必须作为静态库包含在内。`/MT`没有标志它不会编译。在心痛之后，我把它归结为两个链接器错误：

```
msvcrtd.lib(ti_inst.obj):-1: error: LNK2005: "private: __thiscall type_info::type_info(class type_info const &)" (??0type_info@@AAE@ABV0@@Z) already defined in LIBCMTD.lib(typinfo.obj)
msvcrtd.lib(ti_inst.obj):-1: error: LNK2005: "private: class type_info & __thiscall type_info::operator=(class type_info const &)" (??4type_info@@AAEAAV0@ABV0@@Z) already defined in LIBCMTD.lib(typinfo.obj) 
```

我认为[这里](http://support.microsoft.com/kb/148652)描述了这个问题。如果是这种情况，那么我想我需要知道如何强制 Qt Creator 以特定顺序链接这些系统库，而我什至一开始都没有将它们明确包含在 .pro 文件中。如果有人能告诉我该怎么做，那就太好了。但是，如果这与 MS 页面上描述的问题不同，那么对我*真正*做错了什么的解释会更好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-01T01:32:42.367

只是为了将此标记为已回答，我将引用 kanders84152：“没关系。我链接到错误的 msvc 库。应该使用`msvcmrt.lib`而不是`msvcurt.lib`nor `msvcprt.lib`。现在似乎可以工作了。谢谢大家。”

# javascript - 如何以样式缓存图像 url？

> ID：15105787
> 
> 赞同：1
> 
> 时间：2013-02-27T06:44:37.507
> 
> 标签：javascript, jquery, html, css

我正在尝试创建一个包含多个图像的 HTML 页面。它在本地主机上运行良好，但如果我通过互联网访问，图像加载速度非常慢。如何以样式缓存图片网址？请检查以下 HTML 代码。

```
 <div style="display: block;" class="collection slide-item" id="div1">
    <div class="row collection type1">
        <div class="title">
            TRAVEL DESTINATION<div class="link">
                <a class="seecollection" href="searchdb.aspx?Keyword=travel destination">See Gallery</a></div>
        </div>
        <div class="span12">
            <a href="Search_Details.aspx?Id=1848760&amp;key=0">
                <div class="landscape thumb with_landscape" style="background-image: url(https://d3jpl91pxevbkh.cloudfront.net/imagedb-com/image/upload/1848760.jpg)">
                </div>
            </a>
        </div>
        <div class="span12">
            <div class="row">
                <div class="span4">
                    <a href="Search_Details.aspx?Id=1716438&amp;key=0">
                        <div class="square thumb with_landscape" style="background-image: url(https://d3jpl91pxevbkh.cloudfront.net/imagedb-com/image/upload/1716438.jpg)">
                        </div>
                    </a>
                </div>
                <div class="span4">
                    <a href="Search_Details.aspx?Id=1838282&amp;key=0">
                        <div class="square thumb with_landscape" style="background-image: url(https://d3jpl91pxevbkh.cloudfront.net/imagedb-com/image/upload/1838282.jpg)">
                        </div>
                    </a>
                </div>
                <div class="span4">
                    <a href="Search_Details.aspx?Id=1845302&amp;key=0">
                        <div class="square thumb with_landscape" style="background-image: url(https://d3jpl91pxevbkh.cloudfront.net/imagedb-com/image/upload/1845302.jpg)">
                        </div>
                    </a>
                </div>
            </div>
            <div class="row">
                <div class="span6">
                    <a href="Search_Details.aspx?Id=1717213&amp;key=0">
                        <div class="landscape thumb with_landscape" style="background-image: url(https://d3jpl91pxevbkh.cloudfront.net/imagedb-com/image/upload/1717213.jpg)">
                        </div>
                    </a>
                </div>
                <div class="span6">
                    <a href="Search_Details.aspx?Id=1842423&amp;key=0">
                        <div class="landscape thumb with_landscape" style="background-image: url(https://d3jpl91pxevbkh.cloudfront.net/imagedb-com/image/upload/1842423.jpg)">
                        </div>
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>
<div style="display: none;" class="collection slide-item" id="div2">
    <div class="collection slide-item">
        <div class="row collection type4">
            <div class="title">
                HOLI<div class="link">
                    <a class="seecollection" href="searchdb.aspx?Keyword=holi">See Gallery</a></div>
            </div>
            <div class="span6">
                <a href="Search_Details.aspx?Id=1918857&amp;key=0">
                    <div class="landscape thumb with_landscape" style="background-image: url(https://d3jpl91pxevbkh.cloudfront.net/imagedb-com/image/upload/1918857.jpg)">
                    </div>
                </a><a href="Search_Details.aspx?Id=1869141&amp;key=0">
                    <div class="landscape thumb with_landscape" style="background-image: url(https://d3jpl91pxevbkh.cloudfront.net/imagedb-com/image/upload/1869141.jpg)">
                    </div>
                </a>
            </div>
            <div class="span12">
                <a href="Search_Details.aspx?Id=1888875&amp;key=0">
                    <div class="landscape thumb with_landscape" style="background-image: url(https://d3jpl91pxevbkh.cloudfront.net/imagedb-com/image/upload/1888875.jpg)">
                    </div>
                </a>
            </div>
            <div class="span6">
                <a href="Search_Details.aspx?Id=1888899&amp;key=0">
                    <div class="landscape thumb with_landscape" style="background-image: url(https://d3jpl91pxevbkh.cloudfront.net/imagedb-com/image/upload/1888899.jpg)">
                    </div>
                </a><a href="Search_Details.aspx?Id=1918847&amp;key=0">
                    <div class="landscape thumb with_landscape" style="background-image: url(https://d3jpl91pxevbkh.cloudfront.net/imagedb-com/image/upload/1918847.jpg)">
                    </div>
                </a>
            </div>
        </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T06:49:54.423

您不必关心缓存，浏览器会为您完成这一切，这完全取决于浏览器，因为有些用户可能会定期禁用缓存或清除缓存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T07:17:23.317

由于这是一个性能问题，因此有几种方法可以解决它。

首先看一下图像，尤其是图像的大小和格式。目的是使用最合适的格式并减小图像大小。

这些图像是照片还是图形？

如果是照片，请尝试使用 jpeg 压缩级别并在质量和大小之间进行权衡。

如果它的图形尝试转换为 png 格式。

您是否检查图像内部是否有元数据（例如照片相机信息、拍摄图像的位置坐标等），因为您可以使用在线或独立实用程序删除元信息，结果会减小大小并可能删除一些个人信息。

根据格式、目的和更改图像的频率，您可以将它们组合成精灵（一张包含所有图像的图像）。您可以使用 css 从精灵中获取所需的图像。在这种情况下，您可以节省对服务器的调用量，这是您进行网站性能优化的目标之一。旧浏览器对它们可以对服务器执行的并行调用数量有限制（2 - 4 取决于浏览器），因此您的许多调用将被阻止，直到之前的执行完成。

如果您的图像足够小，您可以使用 Data URI 协议将图像嵌入到 html 或 css 中。

您还可以使用 javascript 在需要之前预加载图像，因此浏览器将在后台下载它们，然后时间到了，它们将立即从缓存中加载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T06:53:03.340

您使用的图像相当大。考虑使用较小的图像来加快下载过程（当然，取决于您的设计，但我怀疑您是否需要 3*900px 的宽度）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T06:53:21.093

您可能希望将您的 css 移动到外部样式表中。大多数现代浏览器将缓存它以供将来参考。就目前而言，您可能会得到不一致的缓存结果，具体取决于您使用的浏览器以及它如何解析所有内联 css。

# web-services - 无法将消息写入 OutputStream：com.ctc.wstx.exc.WstxIOException：连接超时

> ID：15105789
> 
> 赞同：1
> 
> 时间：2013-02-27T06:44:50.017
> 
> 标签：web-services, jboss5.x

当我们将数据库移动到新服务器时出现此错误。新服务器上的应用程序和旧服务器上的数据库运行良好。但是当我们将数据库移动到新服务器时，服务器日志会显示此错误。下面是服务器日志。我们正在使用 jboss-5.1.0.GA。

2013-02-22 01:02:31,336 错误 [org.apache.catalina.core.ContainerBase.[jboss.web].[localhost].[/]]（主要）StandardWrapper.Throwable org.springframework.ws.soap。 saaj.SaajSoapMessageException：无法将消息写入 OutputStream：com.ctc.wstx.exc.WstxIOException：连接超时：连接；嵌套异常是 javax.xml.soap.SOAPException: com.ctc.wstx.exc.WstxIOException: Connection timed out: connect at org.springframework.ws.soap.saaj.SaajSoapMessage.writeTo(SaajSoapMessage.java:169)

# java - 如何水平滚动图像？

> ID：15105791
> 
> 赞同：2
> 
> 时间：2013-02-27T06:44:52.720
> 
> 标签：java, android

我有水平滚动视图的问题。

这是我的 XML 代码：

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/relative_layout_id"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/bg"
    tools:context=".MainActivity" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:id="@+id/home_title_id"
        android:text="@string/home_title"
        android:layout_marginTop="@dimen/forty_text_size"
        android:textColor="@android:color/white"
        android:layout_centerHorizontal="true"
        android:gravity="center"
        android:textSize="@dimen/forty_text_size" />

    <LinearLayout
        android:id="@+id/linear_layout_id"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/home_title_id">

        <HorizontalScrollView
            android:id="@+id/horizontal_view_id"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <ImageView
                android:id="@+id/home_image_id"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:src="@drawable/abc" />
        </HorizontalScrollView>

         </LinearLayout>
        </RelativeLayout> 
```

在我的 Java 类中，扩展活动我已经声明了所有小部件，然后我创建了一个类滚动视图，扩展了水平滚动视图。

Java代码如下：

```
class scrollview extends HorizontalScrollView 
    {
        private static final int SWIPE_MIN_DISTANCE = 5;
        private static final int SWIPE_THRESHOLD_VELOCITY = 300;
        private ArrayList mItems = null;
        private GestureDetector mGestureDetector;
        private int mActiveFeature = 0;

        public scrollview(Context context) 
        {
            super(context);
        }

        public void setFeatureItems(ArrayList items)
        {
            LinearLayout internalWrapper = new LinearLayout(getContext());
            internalWrapper.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));
            internalWrapper.setOrientation(LinearLayout.HORIZONTAL);
            addView(internalWrapper);
            this.mItems = items;
            for(int i = 0; i< items.size();i++)
            {
                LinearLayout featureLayout = (LinearLayout) View.inflate(this.getContext(),R.layout.activity_main,null);
                //...
              //Create the view for each screen in the scroll view
                //...
                internalWrapper.addView(featureLayout);
            }
            setOnTouchListener(new View.OnTouchListener() 
            {
                @Override
                public boolean onTouch(View v, MotionEvent event) 
                {
                    //If the user swipes
                    if (mGestureDetector.onTouchEvent(event)) 
                    {
                        return true;
                    }
                    else if(event.getAction() == MotionEvent.ACTION_UP || event.getAction() == MotionEvent.ACTION_CANCEL )
                    {
                        int scrollX = getScrollX();
                        int featureWidth = v.getMeasuredWidth();
                        mActiveFeature = ((scrollX + (featureWidth/2))/featureWidth);
                        int scrollTo = mActiveFeature*featureWidth;
                        smoothScrollTo(scrollTo, 0);
                        return true;
                    }
                    else
                    {
                        return false;
                    }
                }
            });
            mGestureDetector = new GestureDetector(new MyGestureDetector());
        }
            class MyGestureDetector extends SimpleOnGestureListener 
            {
            @Override
            public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) 
            {
                try 
                {
                    //right to left
                    if(e1.getX() - e2.getX() > SWIPE_MIN_DISTANCE && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) 
                    {
                        int featureWidth = getMeasuredWidth();
                        mActiveFeature = (mActiveFeature < (mItems.size() - 1))? mActiveFeature + 1:mItems.size() -1;
                        smoothScrollTo(mActiveFeature*featureWidth, 0);
                        return true;
                    }
                    //left to right
                    else if (e2.getX() - e1.getX() > SWIPE_MIN_DISTANCE && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) 
                    {
                        int featureWidth = getMeasuredWidth();
                        mActiveFeature = (mActiveFeature > 0)? mActiveFeature - 1:0;
                        smoothScrollTo(mActiveFeature*featureWidth, 0);
                        return true;
                    }
                } catch (Exception e) {
                        Log.e("Fling", "There was an error processing the Fling event:" + e.getMessage());
                }
                return false;
            }
        }
    } 
```

但是什么也没发生，请帮忙。

**或者在 ONTOUCH 列表器功能中有滚动类会更好吗？？？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T06:51:26.320

`layout.xml`我认为您的文件中的标签位置错误。`LinearLayout`有`ImageView`in`HorizontalScrollView`而不是`HorizontalScrollView`in的地方`LinearLayout`如下：

```
 <HorizontalScrollView
        android:id="@+id/horizontal_view_id"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/home_title_id" >
   <LinearLayout
    android:id="@+id/linear_layout_id"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content">
        <ImageView
            android:id="@+id/home_image_id"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/abc" />
    </LinearLayout>
    </HorizontalScrollView> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T09:39:47.510

**这里不需要java编码。仅 SWIPE 功能需要此 Java 编码**

单独的 XML 编码就足够了！！！但是，采用以下格式

```
 <HorizontalScrollView
        android:id="@+id/horizontal_view_id"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/home_title_id" >
   <LinearLayout
    android:id="@+id/linear_layout_id"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content">
        <ImageView
            android:id="@+id/home_image_id"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/abc" />
    </LinearLayout>
    </HorizontalScrollView> 
```

因为水平滚动只能容纳一个子节点。

# java - 我需要使用 Java 阅读 Web 驱动程序中弹出窗口上显示的文本

> ID：15105796
> 
> 赞同：1
> 
> 时间：2013-02-27T06:45:11.183
> 
> 标签：java, javascript, webdriver, selenium-webdriver

![弹出窗口](../Images/d222f4d21f3c4e2fb7f426df19f8b302.png)

我需要使用 Java 阅读 Web 驱动程序中弹出窗口上显示的文本。我能够处理关闭的弹出窗口。我不知道如何阅读弹出窗口上显示的文本并在控制台中打印它。

我无法为此提供任何 HTML 代码，因为它是一个模态弹出窗口。

请帮助我。帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T12:10:46.327

鉴于您的屏幕截图，您尝试自动化的“模式弹出窗口”看起来是由 JavaScript alert() 函数生成的。如果是这种情况，下面的代码或类似的代码应该可以工作。

```
// WARNING! Untested code written from memory without
// benefit of an IDE! May not be exactly correct!

// Switch the driver context to the alert
Alert alertDialog = driver.switchTo().alert();

// Get the alert text
String alertText = alertDialog.getText();

// Click the OK button on the alert.
alertDialog.accept(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T22:46:58.370

您以前使用过 WebDriverWait 对象吗？要扩展上一个答案，您也许可以做类似的事情，但我没有测试过：

```
WebDriverWait wait = new WebDriverWait(5, TimeUnit.Seconds);

element.click();

// Wait for the dialog to show
wait.until(ExpectedConditions.alertIsPresent());

// Switch the driver context to the alert
Alert alertDialog = driver.switchTo().alert();

// Get the alert text
String alertText = alertDialog.getText();

// Click the OK button on the alert.
alertDialog.accept(); 
```

此外，您可能必须在收到文本后切换回警报。希望这可以帮助。

# java - java随机的。奇怪的行为

> ID：15105798
> 
> 赞同：0
> 
> 时间：2013-02-27T06:45:27.863
> 
> 标签：java, random

游戏：
有一个盒子分为五个部分。盒子里面是老鼠。猫坐在盒子附近。
每转一圈，猫都会将爪子放在该部分上。
1）如果猫用鼠标将爪子放在区域，则游戏结束
2）否则，鼠标移动到相邻区域，包括猫爪下的区域
我正在尝试找到一只策略猫将以最少的移动次数（平均）获胜。
链 - 循环重复的猫的移动序列。
以下函数返回给定链的平均获胜步数：

```
public static double computePerformanceForChain(String chain)
{
    final int iterationsCount = 10000;
    int catPos, mousePos,steps=0;
    Random random = new Random(System.currentTimeMillis());
    for(int i=0; i<iterationsCount; i++)
    {
        mousePos=random.nextInt(5);
        for(int j=0;;j++)
        {
            catPos=Integer.parseInt(String.valueOf(chain.charAt(j%chain.length())));
            steps++;
            if(catPos==mousePos)  break;
            if(mousePos==0) mousePos=1;
            else if(mousePos==4) mousePos=3;
            else mousePos+=random.nextInt(2)*2-1;
        }
    }
    return (double)steps/iterationsCount;
} 
```

例如，`computePerformanceForChain("1133")`返回大约 3。
但对于链`"23"`函数循环。
为什么会这样？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T07:01:14.407

简单的回答：不能保证执行会脱离内循环
检查内循环：

```
 for(int j=0;;j++) {
        catPos=Integer.parseInt(String.valueOf(chain.charAt(j%chain.length())));
        steps++;
        if(catPos==mousePos)  break;
        if(mousePos==0) mousePos=1;
        else if(mousePos==4) mousePos=3;
        else mousePos+=random.nextInt(2)*2-1;
    } 
```

因此，每次迭代`mousePos`的奇偶性都会改变。因此，如果：

*   `mousePos`最初分配给奇数
*   `chain`是偶数序列，例如“23”

then`catPos`永远不会等于`mousePos`并且循环永远不会结束。

简单地说：如果鼠标最初在奇数段（例如第 3 段），那么 cat 无法用 2-3 链捕获它，并将无限重复此序列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T07:09:51.567

你的猫序列让猫从偶数格移动到奇数格，并重复执行此操作，总是偶数、奇数、偶数、奇数。鼠标，因为它总是移动到相邻的方格，所以它也总是从偶数到奇数到偶数到奇数。因此，有 50/50 的机会鼠标从右侧方块开始。如果猫移动到偶数格时鼠标在奇数格上，那么当猫尝试奇数格时鼠标移动到偶数格。

在这种情况下，猫永远抓不到老鼠。

这对于猫总是从奇数到偶数到奇数到偶数的任何偶数解决方案都是正确的。

# algorithm - 图中的约束最短路径

> ID：15105803
> 
> 赞同：1
> 
> 时间：2013-02-27T06:45:58.657
> 
> 标签：algorithm

这是我在在线法官网站上发现的问题：

我有一个无向图（带循环）。我们在图中有 k 个不同类别的顶点。您可以将第 1 类顶点着色为绿色，将第 2 类顶点着色为红色，依此类推。还有一类特殊的白色顶点（稍后会详细介绍）。

现在，用户将指定一个源顶点、一个目标顶点和一系列**不同**的顶点类（非白色），例如。

我们得到源顶点 10、目标顶点 40 和一个序列：红色->蓝色->黑色。

我们必须找到**最短路径**，使得该路径从顶点 10 开始，接触 1 个红色顶点，然后是 1 个蓝色顶点和 1 个黑色顶点，然后到达顶点 40。但是，该路径可以根据需要具有任意数量的白色顶点。它还可以遍历一个白色顶点两次。

所以一个解决方案可以是：10->20(white)->35(red)->21(white)->22(white)->30(blue)->34(black)->40

不正确：

10->20（白色）->30（蓝色）->21（白色）->22（白色）->35（红色）->34（黑色）->40（先变成蓝色再变成红色）

10->20(白)->35(红)->56(红)->21(白)->22(白)->30(蓝)->34(黑)->40(穿过红两次）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T10:05:43.867

我可以建议一个基于简单图形修改的**O(n*(n+m))解决方案，该修改完成了 bfs 修改。**让我一步一步地描述它。

**图形修改。**

1.  为了避免任何麻烦，颜色源和一些独特颜色的白色顶点。
2.  使图形加权。最初存在的边的权重是**1**。
3.  对于每对彩色顶点**u, v**添加一条边**(u,v)**，其权重等于从 u 到 v 的最短白色路径。**白色路径**是仅通过白色顶点的路径。如果没有这样的白色路径，则不要添加边缘。
4.  删除所有白色顶点及其相邻边。

第二点可以通过从每个仅通过白色顶点的顶点运行**bfs来完成。**这将在 O(n*(n+m)) 中运行。

**等价。**

现在我们有了一个没有白色顶点的加权彩色图，很容易看出修改后问题仍然没有改变——我们仍然需要找到从源顶点到目标顶点的最短路径（现在就边权重而言）。

**搜索算法。**

要解决此图上的问题，请运行 bfs 的变体，哪些层对应于提供的路径颜色。这意味着，如果给定路径 red->blue->black，bfs 的第一个移动将移动到与源相邻的所有红色顶点，然后移动到与标记的红色相邻的所有蓝色，然后移动到与标记的蓝色相邻的所有黑色，最后到达目标。当某个顶点被推入 bfs 队列时，记住它的路径长度以备将来使用。

**伪代码。**

1.  **currentVertexes** = { (source,0) } // 顶点和路径长度
2.  *对于*i*从*0*到 sizeof* ( **givenPath** )*做*
    1.  **nextColor** = givenPath[ i ]
    2.  **下一个顶点**= {}
    3.  *for (v* *,* len) *in* **currentVertexes** *对* *所有***u** st 存在边**e := (v,u)***和***u.color = nextColor** **nextVertexes** .insert( (u, len + e.length))

    **********   **当前顶点**=**下一个顶点***********
********   选择存储在**currentVertexes中的****最小**长度，因为只有 (target, length) 对。*******

 ***********复杂：**

图形修改需要**O(n*(n+m))**运行时间，第二部分将运行**O(n*n)**，因为给定路径的长度不能超过 n （声明中没有颜色重复） ，并且在每一步中， *currentVertexes*中最多可以有 n 个顶点。总复杂度为**O(n*(n+m)) + O(n*n) = O(n*(n+m))**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T06:49:42.373

您可以使用带有附加标志的 dijkstra 算法来显示顶点的路径是否满足条件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T08:06:37.097

**假设 A1**（稍后解除）：序列 S 中不存在两次颜色。

然后我们可以使用以下**算法 B1**：

1.  在有向图 G' 中按以下方式变换图 G：
    *   G' 与 G 有相同的节点
    *   如果 v 是一个白色节点并且 (v,u) 存在于 G 中，则将 (v,u) 和 (u,v) 插入 G'
    *   如果 (v,u) 存在于 G 中并且 (color(v),color(u)) 存在于 S 中，则在 G' 中插入 (v,u)
    *   G 的所有其他边（包括循环）都被忽略。
2.  为所有边分配相同的权重
3.  在 G' 上执行最短路径算法，例如 Bellman-Ford

现在我们放宽 A1：**假设 A2：**在 S 中只有一种颜色存在不止一次

**算法 B2**：

1.  wl.og, c0 是在 S 中多次存在的颜色，更准确地说是 n 次。
2.  将 S 分成子序列 S1, S2, ... 其中 S1=(c1,c2,...,c0), S2=(c3,...,c0)...
3.  针对每个 S_i，通过关于 B1 的步骤 1\. 的变换 G 生成图 G1、G2、...
4.  通过连接 G1、G2、... Gn 形成图形 G'
    *   将 G1 中颜色 c0 的每个节点与颜色 c3 的每个节点和 G2 中的任何白色节点连接起来
    *   对 G2 和 G3 等做同样的事情。
5.  应用 G1 中的源和 Gn 中的目标的最短路径算法

扩展到序列中的几个重复颜色：

将序列拆分为没有重复颜色的序列，并类似地应用 B2。*********

# ruby-on-rails - 链接到选项

> ID：15105807
> 
> 赞同：16
> 
> 时间：2013-02-27T06:46:09.180
> 
> 标签：ruby-on-rails, twitter-bootstrap

所以我试图把它变成一个link_to链接：

```
<a class="dropdown-toggle" data-toggle="dropdown" href="#">Sign-In <b class="caret"></b></a> 
```

到目前为止我有这个，但无法弄清楚如何处理`<b class="caret"></b>`. 我在末尾尝试了一个 do 块`link_to`，但只得到了一个错误。

```
<%= link_to "Sign-In", new_user_session_path, :class => "dropdown-toggle", :data => {:toggle=>"dropdown"} %> 
```

我刚刚开始学习 Rails，并且四处搜索（包括阅读 RoR API 文档）但没有任何工作。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-02-27T08:39:48.567

`link_to`就上下文而言，您提供的内容是可以的。

让我告诉你这是怎么回事：

这是您提到的链接：

```
<%= link_to "Sign-In", new_user_session_path, :class => "dropdown-toggle", :data => {:toggle=>"dropdown"} %> 
```

这是上面的link_to形成的对应的html链接：

```
<a href="users/sessions/new" class="dropdown-toggle" data-toggle="dropdown">Sign-In</a> 
```

现在考虑这个链接：

```
<%= link_to(raw("Sign-In" +("<b class= 'caret'></b>")), new_user_session_path, :class => "dropdown-toggle", :data => {:toggle=>"dropdown"}) %> 
```

上面的链接将为您提供以下 html 链接：

```
<a class="dropdown-toggle" data-toggle="dropdown" href="users/sessions/new">Sign-In<b class= 'caret'></b></a> 
```

现在你几乎接近你的结果了。唯一的就是href。

好的，让我们稍微修改一下上面`link_to`的内容，只需更改**href 路径**为-

```
<%= link_to(raw("Sign-In" +("<b class= 'caret'></b>")), "#", :class => "dropdown-toggle", :data => {:toggle=>"dropdown"}) %> 
```

生成的链接现在等同于您想要的：

```
<a href="#" class="dropdown-toggle" data-toggle="dropdown">Sign-In<b class= 'caret'></b></a> 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-27T06:58:30.377

如果您提供一个块，则省略第一个参数（通常是 a 标签的内容），它将被块产生的内容替换。

```
<%= link_to new_user_session_path, :class => "dropdown-toggle", :data => {:toggle=>"dropdown"} do %>
  Sign-In <b class="caret"></b>
<% end %> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T07:03:42.603

将链接放在一个容器中，它可以是一个 div 并放置一个类 =“dropdown”。

```
 <div class="dropdown">
    <%= link_to image_tag('icons/lock_icon.png') + " Log In" +('<b class="caret"></b>').html_safe , '#', { :class => 'dropdown-toggle', 'data-toggle' =>  'dropdown' } %>
 </div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-31T18:40:15.467

它必须是 link_to 中的数据属性 `link_to remove_user_path(recipient_id: recipient.id) , method: :delete, data: {confirm: 'Are you sure you want to delete?'}`

# delphi - 将网格导出到 excel + OOXML

> ID：15105812
> 
> 赞同：0
> 
> 时间：2013-02-27T06:46:18.917
> 
> 标签：delphi, delphi-xe

之前我们使用 BIFF 将网格导出到 excel，但存在行数限制，因此我们考虑迁移到 OOXML 格式。是否有可用于入门的示例源。请帮助我，因为我是 Delphi 的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T07:43:24.263

首先，我会使用内置的 DevExpress 导出到 Excel 工具。它将为您节省*几天*的工作时间：

cxGridExportLink.pas：ExportGridToExcel [不使用 OOXML] 或 ExportGridToXLSX [通过自定义 DX xml 文档类使用 OOXML 等等]

但是，如果您必须使用 DIY OpenXML 方法，那么最好的起点是：

*   [http://ericwhite.com/blog/category/open-xml/spreadsheetml/](http://ericwhite.com/blog/category/open-xml/spreadsheetml/)
*   [http://openxmlviewer.codeplex.com/](http://openxmlviewer.codeplex.com/)
*   [http://powertools.codeplex.com/](http://powertools.codeplex.com/)

这些都是 C# 引用，但翻译起来并不难，主要是因为它是您所追求的 XML。我使用 OpenXML 的东西对 Word 和 Excel 进行了一些阅读和写入工作，而学习它的唯一方法是使用 OpenXML 查看器打开现有文档并浏览工作表/行/单元格，试图弄清楚它是如何适合的一起。这并不容易，而且文档很辛苦而且有限。当你开始解决它时，它有点令人满意，但它确实很耗时。

编辑

刚刚意识到我拥有的 DX 东西是 TcxGrid - 即不是早期的 TdxDBGrid。不确定这是否会在这种情况下有所作为。

# android - android中的内存不足异常

> ID：15105822
> 
> 赞同：1
> 
> 时间：2013-02-27T06:47:00.363
> 
> 标签：android, android-emulator

在我的应用程序中，我需要在画布中显示图像，我尝试使用下面的代码，它的工作效果很好。但如果一次又一次地播放同一页面，我的位图大小超出内存异常。我在网上冲浪，我当时设置了样本大小我也遇到了例外，请任何人帮助我这么多天在病房里遇到这个问题。

```
 Lines.class 

 public class Lines extends Activity
   {

  BitmapDrawable  sounddrawable,erasedrawable,backdrwable,fwddrwable,captiondrwable,img1drwable;
Bitmap img1bitmap,soundbitmap,eraseBitmap,backbitmap,fwdbitmap,captionbitmap;
Bitmap bitmapOrg1,bitmapOrg2,bitmapOrg3,bitmapOrg4,bitmapOrg5,bitmapOrg6,bitmapOrg;

MyView myview;
   View content;
 float screenHeight,screenWidth,screendensity;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setNoTitle();
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);

    DisplayMetrics displaymetrics = new DisplayMetrics();
    getWindowManager().getDefaultDisplay().getMetrics(displaymetrics);
     screenHeight = displaymetrics.heightPixels;
     screenWidth = displaymetrics.widthPixels;
     screendensity = displaymetrics.densityDpi;
    Log.i("screenHeight",""+screenHeight);
    Log.i("screenWidth",""+screenWidth);
    Log.i("screendensity",""+screendensity);

         setContentView(R.layout.line);

         widtho=(int)(91*(screenWidth/1024));
     highto=(int)(175*(screenHeight/600));
    bitmapOrg = Bitmap.createScaledBitmap(bitmapOrg, widtho, highto, true);
    leftorg=(int)(120*(screenWidth/1024));
    toporg=(int)(130*(screenHeight/600));

      bitmapOrg1 = BitmapFactory.decodeResource(getResources(),
                R.drawable.line1_2);

       width1=(int)(90*(screenWidth/1024));
        hight1=(int)(175*(screenHeight/600));
        bitmapOrg1 = Bitmap.createScaledBitmap(bitmapOrg1, width1, hight1, true);
      leftorg1=(int)(300*(screenWidth/1024));
       toporg1=(int)(130*(screenHeight/600));

  bitmapOrg2 = BitmapFactory.decodeResource(getResources(),
                R.drawable.line1_3);

    bitmapOrg2 = Bitmap.createScaledBitmap(bitmapOrg2, widtho, highto, true);

  leftorg2=(int)(470*(screenWidth/1024));
   toporg2=(int)(130*(screenHeight/600));

           bitmapOrg3 = BitmapFactory.decodeResource(getResources(),
                R.drawable.line1_4);
   bitmapOrg3 = Bitmap.createScaledBitmap(bitmapOrg3, width1, hight1, true);
              leftorg3=(int)(640*(screenWidth/1024));
  toporg3=(int)(130*(screenHeight/600));

          bitmapOrg4 = BitmapFactory.decodeResource(getResources(),
                R.drawable.line1_5);

          bitmapOrg4 = Bitmap.createScaledBitmap(bitmapOrg4, width1, hight1, true);
              leftorg4=(int)(810*(screenWidth/1024));
      toporg4=(int)(130*(screenHeight/600));

     bitmapOrg5 = BitmapFactory.decodeResource(getResources(),
                R.drawable.line1_6);

      width6=(int)(237*(screenWidth/1024));
       hight6=(int)(139*(screenHeight/600));
            bitmapOrg5 = Bitmap.createScaledBitmap(bitmapOrg5, width6, hight6, true);
leftorg5=(int)(150*(screenWidth/1024));
           toporg5=(int)(370*(screenHeight/600));

         bitmapOrg6 = BitmapFactory.decodeResource(getResources(),
                R.drawable.line1_7);

             bitmapOrg6 = Bitmap.createScaledBitmap(bitmapOrg6, width6, hight6, true);
        leftorg6=(int)(600*(screenWidth/1024));
          toporg6=(int)(370*(screenHeight/600));

  }   
       mPaint = new Paint();

    mPaint.setAntiAlias(true);
    mPaint.setDither(true);

    mPaint.setColor(Color.BLACK);
    mPaint.setStyle(Paint.Style.STROKE);
    mPaint.setStrokeJoin(Paint.Join.ROUND);
    mPaint.setStrokeCap(Paint.Cap.ROUND);
    mPaint.setStrokeWidth(6);

    }

     private void setNoTitle() {
    // TODO Auto-generated method stub
    requestWindowFeature(Window.FEATURE_NO_TITLE);
}
 private Paint       mPaint;
  private Bitmap  mBitmap;

    public void colorChanged(int color) {
        mPaint.setColor(color);
    }

    public class MyView extends View
    {

            private Canvas  mCanvas;
            private Path    mPath;
            private Paint   mBitmapPaint;

        public MyView(Context context) {
            super(context);
            // TODO Auto-generated constructor stub

             mPath = new Path();

                mBitmapPaint = new Paint(Paint.DITHER_FLAG);

        }
         @Override
            protected void onSizeChanged(int w, int h, int oldw, int oldh) {
                super.onSizeChanged(w, h, oldw, oldh);

                if (mBitmap != null) {
                    mBitmap.recycle();
                    mBitmap=null;
                 }

               mBitmap = Bitmap.createBitmap(w, h, Bitmap.Config.ARGB_8888);

                mCanvas = new Canvas(mBitmap);

                mCanvas.setBitmap(mBitmap);

            }

         @Override
            protected void onDraw(Canvas canvas) {

              if(action)
              {
                  invalidate();
              }

              Paint painto = new Paint();
               painto.setAntiAlias(true);
              painto.setColor(getResources().getColor(R.color.magnata));

               painto.setStrokeWidth(3);
               painto.setStyle(Paint.Style.FILL);

                      bitmapOrg.recycle();
               canvas.drawBitmap(bitmapOrg, leftorg, toporg, null);
               bitmapOrg1.recycle();
             canvas.drawBitmap(bitmapOrg1, leftorg1,toporg1, null);

              bitmapOrg2.recycle();

             canvas.drawBitmap(bitmapOrg2, leftorg2,toporg2, null);
             bitmapOrg3.recycle();
                canvas.drawBitmap(mBitmap, 0, 0, mBitmapPaint);
                canvas.drawBitmap(bitmapOrg3, leftorg3,toporg3, null);

                bitmapOrg4.recycle();
                canvas.drawBitmap(bitmapOrg4, leftorg4,toporg4, null);

                bitmapOrg6.recycle();

                canvas.drawBitmap(bitmapOrg6, leftorg6,toporg6, null);

                bitmapOrg5.recycle();
                canvas.drawBitmap(bitmapOrg5, leftorg5,toporg5, null);

               canvas.drawPath(mPath, mPaint);  
     } 
         private float mX, mY;
      private   float TOUCH_TOLERANCE = 2;
         private void touch_start(float x, float y) {
                 mPath.reset();
                  mPath.moveTo(x, y);
                      mX = x;
            mY = y;
              }
  private void touch_move(float x, float y) {
      float dx = Math.abs(x - mX);
      float dy = Math.abs(y - mY);
     if (dx >= TOUCH_TOLERANCE || dy >= TOUCH_TOLERANCE) {
  mPath.quadTo(mX, mY, (x + mX)/2, (y + mY)/2);
  mX = x;
  mY = y;
   }
   }
 private void touch_up() {
    mPath.lineTo(mX, mY);

   mCanvas.drawPath(mPath, mPaint);

    mPath.reset();
  }

@Override
         public boolean onTouchEvent(MotionEvent event) {
      float x = event.getX();
          float y = event.getY();

  switch (event.getAction()) {
      case MotionEvent.ACTION_DOWN:
      touch_start(x, y);
      invalidate();
      break;
  case MotionEvent.ACTION_MOVE:
      touch_move(x, y);
      invalidate();
      break;
  case MotionEvent.ACTION_UP:
      touch_up();
      invalidate();
      break;
      }
        return true;
}
 } 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-27T07:03:44.283

我不确定您为什么会收到 OutOfMemory 错误（因为您没有发布堆栈跟踪，我猜这不是您遇到的实际错误）。

您对 Bitmap.recycle() 的使用很可能是问题所在。它仅在您丢弃位图时使用，并且永远不会再次引用它。在任何情况下实际上都没有必要调用它，它只会导致对本机内存的早期清理，当 Bitmap 最终确定时将被释放。

文档说：

> 释放与此位图关联的本机对象，并清除对像素数据的引用。这不会同步释放像素数据；如果没有其他引用，它只是允许它被垃圾收集。该位图被标记为“死”，这意味着如果调用 getPixels() 或 setPixels() 将引发异常，并且不会绘制任何内容。此操作无法反转，因此只有在您确定位图没有进一步用途时才应调用它。这是一个高级调用，通常不需要调用，因为当没有更多对该位图的引用时，正常的 GC 进程将释放此内存。

因此，您绝对不应该在 onDraw 中调用它，而且绝对不能在尝试将位图绘制到画布之前调用它。我的建议是删除所有对 recycle() 的调用。

# jquery - JavaScript/jQuery：如何制作具有跑分值的任务列表

> ID：15105828
> 
> 赞同：0
> 
> 时间：2013-02-27T06:47:20.167
> 
> 标签：jquery, tasklist

我不确定如何最好地用一个标题来描述我的问题，所以我希望这有点意义。

让我解释一下我想要做什么。我想创建一个任务列表小部件。用户在一个`<input>`字段中写下任务的描述，然后从`<select>`. 点击“提交！” 按钮，使用 jQuery 将新项目添加到下面的无序列表中，其中包含任务描述和点值。当用户点击列表中的某个项目时，它会被移除，并且其关联的点值会（动态地，再次使用 jQuery）添加到总分中，该总分显示在角落`<div>`的 a 中。`fixed`

我在制作表格或向列表中添加项目时没有任何问题。然而，让我感到困惑的是**如何在单击任务时添加点值。**

我觉得这是一个带有参数“name”和“pointValue”的Task对象可能有用的地方，但我无法完全弄清楚如何。当然，我可以制作对象，但是我如何以某种方式将它与添加到页面的 HTML 关联起来，以便在单击它时将其点值添加到总数中？或者这完全是错误的做法？

[你可以在这里](http://jsfiddle.net/8L25m/8/)看到我目前的进展。就像我说的，我可以弄清楚如何让大多数事情发挥作用——只是积分系统不行。

任何和所有的帮助将不胜感激。我是 jQuery 和 JavaScript 的新手，所以如果我犯了愚蠢的错误，请尽量不要对我大发雷霆*。*;)

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T06:58:02.960

看到这个：http: [//jsfiddle.net/8L25m/9/](http://jsfiddle.net/8L25m/9/)

```
 $(document).on('click', '.task', function () {
    $(this).hide('fast', function () {
        $this.remove();
    });
    $("#score").html(parseInt($("#score").html(),10) + parseInt($(this).find(".taskValue").html(),10));

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-02T14:19:16.533

另一个好的可以在 jsfiddle 找到：http: [//jsfiddle.net/RWhitbeck/ZyYFG/](http://jsfiddle.net/RWhitbeck/ZyYFG/)

js（来自上面的源代码）：

```
$(document).ready(function () {
    $('#button').click(function () {
        //save inputs as variables:
        var taskName = $('input[name=newTaskName]').val();
        var pointWorth = $('select[name=newTaskPoints]').val();

        //add a new list item for the task (and do it with spiffy animation)
        $('<li class="task"><div class="taskOuter"><div class="taskValue">+' + pointWorth + '</div><div class="taskDescription">' + taskName + '</div></div></li>')
            .hide().prependTo('#taskList').slideDown('fast');
    });

    //remove item (with spiffy animation) when clicked:
    $(document).on('click', '.task', function () {
        $(this).hide('fast', function () {
            $this.remove();
        });
        $("#score").html(parseInt($("#score").html(),10) + parseInt($(this).find(".taskValue").html(),10));
        //adding points happens somewhere in here but I'm completely baffled
    });
}); 
```

*   有项目（下拉区域）
*   项目有任务，带有复选框

# javascript - 防止使用jQuery在输入中实时输入非数字

> ID：15105831
> 
> 赞同：-6
> 
> 时间：2013-02-27T06:47:28.927
> 
> 标签：javascript, jquery

正如我的问题所说，如何防止用户在字段中输入非数字字符`input`？例如，当他们尝试输入字母或特殊字符时，光标根本不会在`input`字段内移动？

```
<input id="1stfield" name="1stfield" value="" readonly/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T06:56:49.097

你也可以让它像下面一样

```
<input type="text" class="numbersOnly" value="" /> 
```

对于上面的输入字段，在javascript中添加以下代码..

```
$('.numbersOnly').keyup(function () { 
    this.value = this.value.replace(/[^0-9\.]/g,'');
}); 
```

# normalization - 如何优化设计数据库层以利用规范化和多维数据模型？

> ID：15105832
> 
> 赞同：1
> 
> 时间：2013-02-27T06:47:29.773
> 
> 标签：normalization, olap, olap-cube

我们公司的软件将事务表和报表表分开保存。为进行优化，报告架构已被非规范化并且表连接被最小化。

我们能否优化设计数据库以利用 OLAP 的规范化和多维数据模型？如果是，那么如何？

# java - 在单例双锁检查的情况下创建实例时通知所有等待线程

> ID：15105839
> 
> 赞同：1
> 
> 时间：2013-02-27T06:47:53.350
> 
> 标签：java, design-patterns, singleton

```
public static Singleton getInstance()
{ 
if (instance == null)
    {
    synchronized(Singleton.class) {  //1
    if (instance == null)          //2
    instance = new Singleton();  //3
        }
    }
    return instance; //4
} 
```

在上面的代码中，假设有 10 个线程正在调用这个方法，它们都超过了第一个 if 条件，然后一个线程进入同步块并创建实例。即使创建了实例，剩余的 9 个线程也应该一个一个来，它们需要通过同步块，只要任何线程创建了 Singleton 实例，所有其他线程都不应该等待。告诉我是否有解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T07:33:22.577

您是说您希望所有其他九个线程都运行而无需一次获得一个锁。

首先，我不得不提一下，等待初始化后获取锁的性能问题很小。其次，单例是邪恶的，有更好的方法来实现它们。

但是，如果您想部分地重新实现锁，那么您可以这样做。这样做可能有一些现成的`Future`，但我什么都看不到。无论如何，糟糕的实施让我一头雾水：

```
private static final AtomicReference<Object> ref = new AtomicReference<>();
    // <Object> as we require two distinguished values. :(
    // (I guess could use a mark.)

public static Singleton getInstance() {
    for (;;) { // May want to play with park to avoid spinning.
        Object obj = ref.get();
        if (obj instanceof Singleton) {
           return (Singleton)obj;
        }
        if (ref.weakCompareAndSet(null, Thread.currentThread())) {
            Singleton instance = null; // To reset on fail.
            try {
                instance = new Singleton();
            } finally {
                ref.set(instance);
            }
            return instance;
        }
    }
} 
```

我想我们可以在不变得太复杂的情况下做得更好，再次假设没有例外：

```
 {
        Object obj = ref.get();
        if (obj instanceof Singleton) {
           return (Singleton)obj;
        }
    }

    if (ref.compareAndSet(null, Thread.currentThread())) {
        Singleton instance = new Singleton();
        ref.set(instance);
        return instance;
    }

    for (;;) {
        Object obj = ref.get();
        if (obj instanceof Singleton) {
           return (Singleton)obj;
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T06:54:52.343

考虑到 Singleton 不是非常复杂的结构化类或者在构造函数的初始化中没有太多要加载的东西，我认为它的好代码和阻塞时间不会那么多。如果所有线程同时到达，它们必须等到任何一个线程创建第一个对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T06:55:15.733

没有条件同步。这意味着每当您使用同步时，它都会一直强制执行。在上面的示例中，当然可以选择在静态块中初始化 Singleton，然后您不需要 getter 的同步块。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T09:25:05.030

根据您的设计，剩余的线程确实必须一次通过一个线程 - 实际上对于任何这样的锁定策略，您都会得到相同的结果。也就是说，现在锁定的成本微不足道。

请注意，尽管未显示，但该`instance`变量必须是`volatile`此惯用语才能起作用。

如果您想要一种模式来满足您的需求（以低成本进行延迟初始化），那么我建议您使用静态初始化方法（如 Brian Goetz 所推荐的）：

```
public class Singleton {
    static class Holder {
        static final Singleton INSTANCE = new Singleton();
    }

    private Singleton() {
    }

    public static Singleton getInstance() {
        return Holder.INSTANCE;
    } 
```

这种方法简洁整洁，并且也是线程安全的，在您的情况下，访问静态`getInstance`方法（或任何静态方法）的第一个线程将支付初始化成本，但所有后续线程都不会，也不会阻塞。

# android - Mediacodec 果冻豆

> ID：15105843
> 
> 赞同：5
> 
> 时间：2013-02-27T06:48:13.257
> 
> 标签：android, mp4, android-4.2-jelly-bean

我正在为 jelly-bean 上的 .mp4 文件使用媒体编解码器，并在 logcat 中获取它

```
02-27 12:12:13.645: A/ACodec(6760): frameworks/av/media/libstagefright/ACodec.cpp:1041 CHECK(def.nBufferSize >= size) failed.
02-27 12:12:13.645: A/libc(6760): Fatal signal 11 (SIGSEGV) at 0xdeadbaad (code=1), thread 6778 (CodecLooper) 
```

谁能告诉我这是什么？以及如何解决？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-20T13:16:35.023

您提供的信息不多，所以答案如下：

看起来这是 libstagefright 库的内部检查。

我在解码器配置的三星 Tab 2 上遇到了同样的错误。

```
mDecoder = MediaCodec.createDecoderByType(mime); 
```

创建解码器后，它通过从提取器（又名解复用器）接收的输入格式进行配置

```
MediaFormat inputFormat = extractor.getTrackFormat(i);

mDecoder.configure(inputFormat, null, null, 0); // <-- crashes here 
```

修复（将其放在 mDecoder.configure 之前）：

```
inputFormat.setInteger(MediaFormat.KEY_MAX_INPUT_SIZE, 0); 
```

# excel - 如何管理单个列中的多个日期？

> ID：15105845
> 
> 赞同：1
> 
> 时间：2013-02-27T06:48:22.137
> 
> 标签：excel

我有一个组织的数据示例，

其中包括 sl.no、组织名称、设施类型、纬度、经度设施的开始日期。我的问题是对于特定设施，我有两个或多个开始日期，现在我想将这些多个日期存储在单个文件中，怎么样可能的？我的数据现在在excel中，我现在想制作形状文件..

# mysql - AWS Web 服务上的多个 Wordpress 服务器

> ID：15105848
> 
> 赞同：1
> 
> 时间：2013-02-27T06:48:29.177
> 
> 标签：mysql, wordpress, amazon-web-services, amazon-ec2, multiple-instances

我决定在亚马逊网络服务 (AWS) 上安装 word press 我们决定使用两台服务器，一台用于应用程序，2 台用于数据库，
这样我们就可以放置负载均衡，基于此文档的简单架构

[http://media.amazonwebservices.com/AWS_Web_Hosting_Best_Practices.pdf](http://media.amazonwebservices.com/AWS_Web_Hosting_Best_Practices.pdf) 我们已经知道目前亚马逊支持通过 EC2（虚拟机）和亚马逊 (RDS) 或通过 EBS 通过一台服务器使用 wordpress。但是我们想使用两台服务器，一台用于wordpress引擎，一台用于数据库。这样我们就可以扩展
我不知道应该从哪里开始以及如何做的系统？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T18:52:14.207

[如果你真的想在单独的实例上运行一个网络服务器和一个数据库，如果你使用Cloudformation](http://aws.amazon.com/cloudformation/)和 2 服务器[wordpress 模板](https://s3.amazonaws.com/cloudformation-templates-us-east-1/WordPress_Single_Instance_With_RDS.template)，你可以在大约十分钟内启动并运行。要详细了解这些模板，请参阅[此页面](http://aws.amazon.com/cloudformation/aws-cloudformation-templates/)

此外，[此视频](http://www.youtube.com/watch?v=qKljYgi2lQ0)可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T13:43:57.337

我不明白应用程序服务器的需求。

您可以通过多种方式开始使用它。

1) 如果你想深入了解细节并弄脏你的手，直接使用自动缩放 + ec2 + rds - 最好和最灵活的选项，尽管它需要更多的努力

2) 否则，您可以使用 Elastic Beanstalk 并让它为您的 wordpress 安装创建一个容器，并负责 ELB、AutoScaling、RDS 等。

在这两种情况下，谷歌上都有大量资源可以帮助您实现这一目标。

我不会担心应用程序服务器，我知道大多数 Wordpress 安装（如果不是全部的话）都可以在普通设置 Web 服务器 + DB 服务器上正常工作 - 这样做并让 AWS 为您完成艰巨的工作并扩展您的环境“自动“

高温高压

# mysql - 从 MySQL 中另一个数据库中创建的存储过程访问数据库

> ID：15105851
> 
> 赞同：0
> 
> 时间：2013-02-27T06:48:33.997
> 
> 标签：mysql

我在其中一个 MySQL 数据库中创建了一个存储过程，比如“db_name”。现在在该存储过程中，我正在执行以下 SQL 查询（用于获取特定表的大小，以 MB 为单位），它访问 MySQL 的 INFORMATION_SCHEMA 数据库。

```
SELECT ROUND(((DATA_LENGTH + INDEX_LENGTH) / 1024 / 1024),2) 
FROM INFORMATION_SCHEMA.TABLES  
WHERE TABLE_NAME = 'table_name' 
    AND TABLE_SCHEMA = 'db_name'; 
```

上述查询不会产生任何结果。可能是因为在一个数据库中创建的存储过程正试图访问另一个数据库或模式中的表。

有谁知道如何以存储过程或任何替代方式成功执行上述查询？

# c++ - 我应该如何在 C++ 中声明“东西”？

> ID：15105852
> 
> 赞同：-6
> 
> 时间：2013-02-27T06:48:43.320
> 
> 标签：c++

声明数组的最佳外观和有意义的方式是什么？

例如：

```
char *chData[ 100 ];
char chLetter; 
```

两个声明变量中的“ch”代表“char”。但是，一个被声明为数组。我应该怎么做呢？我应该这样声明：

```
char* a_chData[ 100 ];
char chLetter; 
```

变量“a_chData”中的“a”代表数组。看起来不错吧？是的，直到它在一个类中声明：

```
class ClassA
{
public:
    char*   m_a_chData[ 100 ];
    char    m_chLetter;
}; 
```

变量“m_a_chData”中的“m”代表成员，因为它被声明为 ClassA 类的成员。但是，看起来不太好。

哦，我应该如何声明一个类？我应该这样声明：

```
class cParent
{
}; 
```

“cParent”中的第一个“c”代表类。我是否应该忘记“c”并将其保留为“父级”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T06:55:15.940

正如您所注意到的，如果您遵循这条路径，您最终会得到一些非常笨拙的名称。

命名很大程度上取决于偏好（对于个人或新项目）或约定（对于现有项目）。如果您想学习约定，请阅读一些您可能想要贡献的代码。

不过，最重要的是，要与您的命名方案保持一致。可读性很重要——无论是对自己还是对他人。保持一致意味着人们可以弄清楚您的命名方案并更容易理解您的代码。

而且，如果您发现您的命名约定限制了您，请放弃它。没有什么比不自然的命名约定更糟糕的了——它会减慢你的速度，让你更难编写有效的代码。一旦你学会了命名约定，它应该自然而然地流动。

# node.js - 如何在新的 Grunt 0.4 中编写助手

> ID：15105856
> 
> 赞同：5
> 
> 时间：2013-02-27T06:49:01.600
> 
> 标签：node.js, gruntjs

在较旧的 grun 版本中，我执行如下助手：

```
module.exports = function (grunt) {
   grunt.registerMultiTask('taskname', "Grunt task example", function () {
      var result = grunt.helper('helpername', options, data);

      ...
   });

   grunt.registerHelper('helpername', function (options, data) {
      return data;
   });
}; 
```

我应该如何在新的 Grunt 0.4 版本中执行助手？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T11:12:33.440

从[从 0.3 升级到 0.4](http://gruntjs.com/upgrading-from-0.3-to-0.4#helpers)页面

> **帮手**
> 
> Grunt 的辅助系统已被移除，取而代之的是 node `require`。有关如何在 Grunt 插件之间共享功能的简明示例，请参阅[grunt-lib-legacyhelpers](https://github.com/gruntjs/grunt-lib-legacyhelpers)。鼓励插件作者升级他们的插件。

# c - 为什么我会收到函数参数未声明的错误？（C）

> ID：15105858
> 
> 赞同：0
> 
> 时间：2013-02-27T06:49:13.873
> 
> 标签：c, function, compiler-errors, arguments, undeclared-identifier

于是我找到了这个名为 libsha1 的库，并编写了一个简单的程序来测试它。但是，当我用 编译它时`gcc -lsha1 -o sha1sum sha1sum.c`，它给了我以下错误：

```
sha1sum.c: In function 'main':
sha1sum.c:30: error: 'byte' undeclared (first use in this function)
sha1sum.c:30: error: (Each undeclared identifier is reported only once
sha1sum.c:30: error: for each function it appears in.) 
```

我究竟做错了什么？这是代码：

```
#include <stdio.h>
#include <string.h>
#include <libsha1.h>

void printByte(unsigned char);

int main(int argc, char *argv[])
{
        unsigned char hash[20];
        int i;

        #ifndef LIBSHA1_NO_CTX
                sha1_ctx ctx;
        #endif

        if (argc != 2)
        {
                fprintf(stderr, "Usage: %s string\n", argv[0]);
                return 1;
        }

        #ifdef LIBSHA1_NO_CTX
                sha1(hash, argv[1], strlen(argv[1]));
        #else
                sha1_begin(&ctx);
                sha1_hash(argv[1], strlen(argv[1]), &ctx);
                sha1_end(hash, &ctx);
        #endif

        for (i=0; i<5; i++) printByte(byte); printf("\n");

        return 0;
}

void printByte(unsigned char byte)
{
        const char *digits = "0123456789abcdef";
        printf("%c%c", digits[byte / 16], digits[byte % 16]);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T06:53:07.537

您还没有定义第`byte`30 行调用的变量。也许您打算使用循环变量`i`？

# php - 如何在推荐系统中显示以上推荐？

> ID：15105859
> 
> 赞同：2
> 
> 时间：2013-02-27T06:49:18.150
> 
> 标签：php, mysql, referrals

我无法在我的推荐系统中显示用户。

如果您查看表格，您会注意到`userid`“29”被`refered`“28”所取代；和“28”乘“26”；也是“26”乘“10”

当用户会话“29”处于活动状态时，页面应显示在用户上方。希望你明白了。

**参考表：**

![在此处输入图像描述](../Images/7732497b8bb000dce078d19a95405713.png)

**代码：**

```
<?php
$rs=mysql_query("select userid from referal where refereduserid='29'") or  die(mysql_error());
$exitloopcount=mysql_num_rows($rs);
$last=mysql_fetch_array($rs);
if ($exitloopcount>0) 
{
  for($i=0;$i<$exitloopcount;$i++)
  {
    $rs=mysql_query("select userid from referal where refereduserid='".$last[$i]."'");
    while($data=mysql_fetch_array($rs))
    {
      echo $data[$i];
    } 
  }
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T07:27:55.580

这应该可以通过一个查询（如 Oracle 的`CONNECT BY`子句）来完成，但我不熟悉 MySQL，所以我为您提供替代解决方案，因为`mysql_*`有人会告诉您“不要再使用函数”这里。

此解决方案使用[`MySQLi`](http://www.php.net/manual/en/book.mysqli.php)而不是弃用的`mysql_*`函数集合。

```
$stmt=$mysqli->prepare("SELECT `userid` FROM `referal` WHERE `refereduserid`=?");
$stmt->bind_param("i",$id); //here $id=29
$stmt->execute();
$result=$stmt->get_result();
while($row=$result->fetch_assoc())
{
    echo $row["userid"];
    $id=intval($row["userid"]);
    $stmt->bind_param("i",$id);
    $stmt->execute();
    $result=$stmt->get_result();
} 
```

**编辑**：

解释：

`MySQLi`关于and的一件事`PDO`是他们支持[prepared statement](http://www.php.net/manual/en/pdo.prepared-statements.php)。

由于这是一种链式关系（幸好是一对一的关系），我可以简单地准备一个查询：

```
SELECT `userid` FROM `referal` WHERE `refereduserid`=? 
```

此查询将用于连续获取“推荐人”。

然后我们绑定“initiate” id `29`，并执行查询。

找到“引荐来源网址”时，将其回显（如您的代码中所示），然后将其重新绑定到准备好的查询，并执行它以查找其“引荐来源网址”。继续这一步。

在您的问题中使用示例日期：

1.  绑定：29 -> 执行 -> 获取：28
2.  绑定：28 -> 执行 -> 获取：26
3.  绑定：26 -> 执行 -> 获取：10
4.  绑定：10 -> 执行 -> 没有结果

# ruby - rails sti 和命名空间重复模型名称

> ID：15105860
> 
> 赞同：1
> 
> 时间：2013-02-27T06:49:23.150
> 
> 标签：ruby, ruby-on-rails-3, namespaces, sti

在我的 Rails 应用程序中，我有这样的模型

```
class Account < ActiveRecord::Base
class Account::Bonus < Account
class Account::Virtual < Account
...more 
```

像这样

```
class DiscountSystem  < ActiveRecord::Base
class DiscountSystem::MyFirst < DiscountSystem
class DiscountSystem::MySecond < DiscountSystem 
```

Account and DiscountSystem - STI 模型

之后，我希望 DiscountSystem 有 Account，仅用于 DiscountSystem 的帐户，并将新模型命名为 Account::DiscountSystem

如果我理解正确，“Account”的“DiscountSystem”在命名空间“Account”中。

他们：

```
class Account::DiscountSystem < Account
  belongs_to :discount_system,class_name: '::DiscountSystem',:foreign_key => :owner_id
end 
```

和

```
 class DiscountSystem  < ActiveRecord::Base
   has_one :account, :class_name => 'Account::DiscountSystem',:foreign_key => :owner_id
 end 
```

如果我在控制台中尝试

```
>> DiscountSystem::MyFirst.all
LoadError: Expected C:/.../app/models/account/discount_system.rb to define DiscountSystem
>> DiscountSystem.all
NoMethodError: undefined method `all' for DiscountSystem:Module 
```

为什么？我可能是一个非常误解的命名空间概念。

当然，如果我将 Account::DiscountSystem 重命名为 Account::ForDiscountSystem，一切正常。为什么命名空间帐户“重写”根名称 DiscountSystem？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T11:16:19.420

我在这里找到了解决方案。

Mongoid 模型和此处[的警告引用的顶级常量](https://stackoverflow.com/questions/11932265/top-level-constant-referenced-by-warning-for-mongoid-model)

[https://github.com/rails/rails/issues/6931](https://github.com/rails/rails/issues/6931)

```
require_dependency 'account/discount_system'

class DiscountSystem  < ActiveRecord::Base
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T10:05:03.733

我建议不要使用`class Account::Bonus < Account`，而是使用`class Bonus < Account`。您基本上是在使用`Account::`前缀重复自己，因为它已经从 DiscountSystem 继承。

然后你也可以在/方法调用中删除`class_name`参数。`belongs_to``has_one`

这样做将使您的代码更易于理解，并且更符合 Rails 的精神。

# php - 减去两个日期并以日期格式显示结果

> ID：15105864
> 
> 赞同：0
> 
> 时间：2013-02-27T06:49:41.313
> 
> 标签：php, datediff

我在减去两个日期后努力获取日期格式中的日期但没有得到正确的结果，结果是 1970-01-07 05:00:00 但我需要结果 2013-02-07 12:02： 00

```
$start_date =strtotime('2013-02-13 12:02:00');
$end_date =strtotime('2013-02-20 12:02:00');
$total = ($start_date - $end_date);
echo date("Y-m-d H:i:s",$total); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T06:52:48.500

从 PHP 5.3 开始，您可以将[`DateTime::diff()`](http://www.php.net/manual/en/datetime.diff.php)方法与[`DateInterval`](http://php.net/manual/de/class.dateinterval.php)类一起使用：

```
<?php

$start = new DateTime('2013-02-13 12:02:00');
$end   = new DateTime('2013-02-20 12:02:00');

$interval = $end->diff($start);
echo $interval->format('%Y-%M-%D %H:%I:%S'); 
```

此外，从 PHP5.3 开始，这是应该的方式，因为它可以正确处理时区、夏令时（闰小时）和闰年。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T06:53:24.383

你得到了正确的结果，因为减去两个日期结果是 7 天，它被添加到默认日期 1970-01-01

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T06:54:03.073

试试下面的代码

```
$date2 ='2013-02-13 12:02:00';
$date1 ='2013-02-20 12:02:00';

$diff = abs(strtotime($date2) - strtotime($date1));

$years = floor($diff / (365*60*60*24));
$months = floor(($diff - $years * 365*60*60*24) / (30*60*60*24));
$days = floor(($diff - $years * 365*60*60*24 - $months*30*60*60*24)/ (60*60*24));

printf("%d years, %d months, %d days\n", $years, $months, $days); 
```

# c# - 我无法通过文本框在 ms access 数据库中插入数据

> ID：15105872
> 
> 赞同：-3
> 
> 时间：2013-02-27T06:50:07.270
> 
> 标签：c#, ms-access-2007, oledb

我有一个数据库，我使用 MS ACCESS 2007。我想通过文本框将数据插入数据库。我在下面有此代码，但出现错误。

```
OleDbConnection con = new OleDbConnection(@"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=\\Sisc-stronghold\mis!\wilbert.beltran\DataBase\DataStructure.accdb");

private void button1_Click(object sender, EventArgs e)
        {
            try
            {
                OleDbCommand cmd = new OleDbCommand();
                cmd.CommandType = CommandType.Text;
                cmd.CommandText = "INSERT INTO Accountstbl (Username, Password)" + "VALUES ('" + textBox1.Text + "','" + textBox2.Text + "')";
                cmd.Parameters.AddWithValue("@Username", textBox1.Text);
                cmd.Parameters.AddWithValue("@Password", textBox2.Text);
                cmd.Connection = con;
                con.Open();
                cmd.ExecuteNonQuery();
            }
            catch (Exception ex)
            {
                textBox1.Text = ex.ToString();
            } 
```

这是错误

System.Data.OleDb.OleDbException：INSERT INTO 语句中的语法错误。在 System.Data.OleDb.OleDbCommand.ExecuteCommandTextErrorHandling(OleDbHResult hr) 在 System.Data.OleDb.OleDbCommand.ExecuteCommandTextForSingleResult(tagDBPARAMS dbParams, Object& executeResult) 在 System.Data.OleDb.OleDbCommand.ExecuteCommandText(Object& executeResult) 在 System.Data。 OleDb.OleDbCommand.ExecuteCommand(CommandBehavior 行为，Object& executeResult) 在 System.Data.OleDb.OleDbCommand.ExecuteReaderInternal(CommandBehavior 行为，字符串方法) 在 System.Data.OleDb.OleDbCommand.ExecuteNonQuery() 在 VirginiTEAcorp.Form3.button1_Click(Object sender , EventArgs e) 在 C:\Documents and Settings\12-014s\My Documents\applications\Database\WindowsFormsApplication1\Form3.cs:line 34

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T07:00:14.827

您已声明参数但未使用它们，如果您使用以下语句则无需使用参数

```
cmd.CommandText = "INSERT INTO Accountstbl (Username, Password)" + "VALUES ('" + textBox1.Text + "','" + textBox2.Text + "')"; 
```

但是如果你想使用参数，那么你需要改变命令文本如下......

```
cmd.CommandText = "INSERT INTO Accountstbl (Username, Password) VALUES (@UserName,@Password)"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T01:36:59.390

也许你可以试试这段代码

```
 private void button1_Click(object sender, EventArgs e)
    {
        try
        {
            cmd = new OleDbCommand();
            cmd.CommandType = CommandType.Text;
            cmd.CommandText = "INSERT INTO userinfo (FirstName, LastName, Age, Address, Course)" + "VALUES (@First_Name, @Last_Name, @Age, @Address, @Course)";
            cmd.Parameters.AddWithValue("@First_Name", textBox1.Text);
            cmd.Parameters.AddWithValue("@Last_Name", textBox2.Text);
            cmd.Parameters.AddWithValue("@Age", textBox3.Text);
            cmd.Parameters.AddWithValue("@Address", textBox5.Text);
            cmd.Parameters.AddWithValue("@Course", textBox5.Text);
            cmd.Connection = conn;
            conn.Open();
            clear();
            cmd.ExecuteNonQuery();
            {
                MessageBox.Show("Data Added!");
                conn.Close();
            }
            dataholder();
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.ToString());
        }
    } 
```

如果你要声明参数。您可能必须以某种方式使用它们。希望能帮助到你 ：）

# javascript - 名称为 $ 的函数

> ID：15105873
> 
> 赞同：-3
> 
> 时间：2013-02-27T06:50:09.687
> 
> 标签：javascript, function

有人可以解释这三个函数是如何相互关联的吗？ $ 在这里做什么？它有两个定义吗？

```
socket.onopen = function(){
    log("Welcome - status "+this.readyState); 
};

function $(id){ 
   return document.getElementById(id); 
}

function log(msg){ 
    $("log").innerHTML+="<br>"+msg; 
} 
```

这些函数写在下面的客户端代码中：

变种套接字；

```
function init() {
    var host = "ws://localhost:12345/websocket/server.php";
    try {
        socket = new WebSocket(host);
        log('WebSocket - status ' + socket.readyState);
        socket.onopen = function (msg) {
            log("Welcome - status " + this.readyState);
        };
        socket.onmessage = function (msg) {
            log("Received: " + msg.data);
        };
        socket.onclose = function (msg) {
            log("Disconnected - status " + this.readyState);
        };
    } catch (ex) {
        log(ex);
    }
    $("msg").focus();
}

function send() {
    var txt, msg;
    txt = $("msg");
    msg = txt.value;
    if (!msg) {
        alert("Message can not be empty");
        return;
    }
    txt.value = "";
    txt.focus();
    try {
        socket.send(msg);
        log('Sent: ' + msg);
    } catch (ex) {
        log(ex);
    }
}

function quit() {
    log("Goodbye!");
    socket.close();
    socket = null;
} // Utilities  function $(id){ return document.getElementById(id); }  function log(msg){ $("log").innerHTML+="<br>"+msg; }  function onkey(event){ if(event.keyCode==13){ send(); } } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T06:53:04.057

第一个函数调用第三个函数。第三个函数调用第二个函数。他们之间没有其他关系。

该`$`字符在变量名中没有特殊含义。您可以使用`foo`or`getEl`代替。

`$`只是一个特别不具信息性的名称，它在获取元素的函数中变得流行，因为它 (a) 很短，并且 (b) 是在某些其他语言中用于指示变量开始的字符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T06:52:53.463

它声明了一个名为的函数`$`，它接受一个 id 字符串并返回

```
documet.getEelementById(id); 
```

简单的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T07:03:36.070

第一个函数是事件处理程序。每当对象`socket`触发`open`事件时，JavaScript 都会调用`socket.onopen`. 该函数将调用`log`下面定义的另一个函数。

第二个函数为`document.getElementById()`. 由于`$`字符可以用作 JavaScript 中的常规标识符，因此它可以成为缩短常用函数的便捷工具。这里需要注意的是，几个常见的 js 库使用该符号来表示关键功能，因此您应该在自定义代码中避免这种情况。

该`log`函数使用速记选择一个元素以通过连接接收消息的文本。无论文本已经存在，都会将消息文本添加到其中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T06:58:43.003

重写：

```
// Binds an anonymous function to the open event of the 
// object named socket. The handler function prints a
// status message in the log panel by invoking the 
// function defined below named log.

socket.onopen = function () {
    log("Welcome - status " + this.readyState); 
};

// Function named $ that returns the DOM element
// whose id attribute equals id.

function $(id) { 
    return document.getElementById(id); 
}

// Function named log that invokes the function named $.
//
// This function finds the DOM element whose id equals
// "log" and appends a line break and a message to its
// inner content.

function log(msg) { 
    $("log").innerHTML += "<br>" + msg; 
} 
```

# ios - 我如何在 iOS 5 和 iOS6 上使用 TWRequest

> ID：15105874
> 
> 赞同：1
> 
> 时间：2013-02-27T06:50:16.810
> 
> 标签：ios, objective-c, cocoa, twitter

我正在开发支持 iOS 5 和 6 的 iPhone 应用程序。我想在 Twitter 上分享图片，我发现的方法是使用 iOS 5 中引入的 Twitter 框架。

但是 TWRequest 在 iOS 6 中已被弃用，并被社交框架中的 SLRequest 取代，这在 iOS 5 中不可用。那么我该如何解决这个问题，因为 TWRequest 在 iOS 6 中已被弃用并且 SLRequest 在 iOS 5 中不受支持。任何线索......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T07:15:28.747

如果您打算使用 prebuilt`SLComposeViewController`以模态方式呈现视图以在 Twitter 上共享，您可以使用类似这样的东西

```
//Check for Social Framework availability (iOS 6)
if(NSClassFromString(@"SLComposeViewController") != nil){

    if([SLComposeViewController instanceMethodForSelector:@selector(isAvailableForServiceType)] != nil)
    {
        if ([SLComposeViewController isAvailableForServiceType:SLServiceTypeTwitter])
        {
            NSLog(@"service available");
            SLComposeViewController *composeViewController = [SLComposeViewController composeViewControllerForServiceType:SLServiceTypeTwitter];
            [composeViewController setInitialText:@"Testing Continues"];
            [composeViewController addImage:[UIImage imageNamed:@"test.png"]];
            [self presentViewController:composeViewController animated:YES completion:nil];
        }
        else
        {
            NSLog(@"service not available!");
        }
    }
}

else{
// For TWTweetComposeViewController (iOS 5)  
    if ([TWTweetComposeViewController canSendTweet]) {
        TWTweetComposeViewController *tweetVC = [[TWTweetComposeViewController alloc] init];
        [self presentModalViewController:tweetVC animated:YES];
        [tweetVC setInitialText:@"testing app"];
    } 
} 
```

否则，如果您想创建自己的请求以在 twitter 上共享，则在设备上管理用户帐户后，`SLRequest`根据需要创建一个

```
NSDictionary *message = @{@"status": @”Test message”};
NSURL *requestURL = [NSURL URLWithString:@"http://api.twitter.com/1/statuses/update.json"];

SLRequest *postRequest = [SLRequest 
            requestForServiceType:SLServiceTypeTwitter
                    requestMethod:SLRequestMethodPOST
                              URL:requestURL 
                       parameters:message]; 
```

# android - android自定义对话框单声道中的单击事件

> ID：15105875
> 
> 赞同：0
> 
> 时间：2013-02-27T06:50:21.913
> 
> 标签：android, dialog, xamarin.android

我创建了一个自定义对话框，但我不知道如何在对话框的自定义 xml 布局中为 imageview 创建 onclick 事件。这是我的做法。

```
Dialog dialog = new Dialog(this);
            dialog.Window.RequestFeature(WindowFeatures.NoTitle);
            dialog.SetContentView(Resource.Layout.activity_pause_menu);
            // Auto size the dialog based on it's contents
            dialog.Window.SetLayout(LinearLayout.LayoutParams.WrapContent,LinearLayout.LayoutParams.WrapContent);
            dialog.Show(); 
```

我可以通过使用类似这样的东西在java中做到这一点。

```
ImageView btn= (ImageView) dialog.findViewById(R.id.btn);
        btn.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                //do something
            }
        }); 
```

但我不知道如何在 C# 中做到这一点。同样，我正在使用单声道的 android（C#，这是用于自定义对话框）谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T07:22:04.197

这个关于 MonoDroid 对话框的精彩教程应该告诉你你需要知道的一切 - [http://blog.ostebaronen.dk/2013/02/using-dialogs-in-mono-for-android.html](http://blog.ostebaronen.dk/2013/02/using-dialogs-in-mono-for-android.html)

您应该能够执行以下操作：

```
var btn= (ImageView)dialog.FindViewById(Resource.Id.btn);
btn.Click += (s,e) => { /* do something */ }; 
```

但是请参阅该教程以了解更多信息

[http://blog.ostebaronen.dk/2013/02/using-dialogs-in-mono-for-android.html](http://blog.ostebaronen.dk/2013/02/using-dialogs-in-mono-for-android.html)

# .htaccess - 自适应图像 CakePHP htaccess

> ID：15105877
> 
> 赞同：3
> 
> 时间：2013-02-27T06:50:40.983
> 
> 标签：.htaccess, cakephp-2.0

我试图让 Matt Wilcox 自适应图像与 CakePHP 一起工作但没有成功。 [http://adaptive-images.com/](http://adaptive-images.com/)

CakePHP 带有三个它自己的 .htaccess 文件。一`/`进`/app/`一进`/app/webroot/`

我需要让这四个文件一起工作，以便将图像请求发送到我放在根目录中的文件adaptive-images.php。

## 这是来自自适应图像的 htaccess

```
<IfModule mod_rewrite.c>
    Options +FollowSymlinks
    RewriteEngine On

    # Adaptive-Images -----------------------------------------------------------------------------------

    # Add any directories you wish to omit from the Adaptive-Images process on a new line, as follows:
    # RewriteCond %{REQUEST_URI} !some-directory
    # RewriteCond %{REQUEST_URI} !another-directory

    RewriteCond %{REQUEST_URI} !assets

    # Send any GIF, JPG, or PNG request that IS NOT stored inside one of the above directories
    # to adaptive-images.php so we can select appropriately sized versions
    RewriteRule \.(?:jpe?g|gif|png)$ adaptive-images.php

    # END Adaptive-Images -------------------------------------------------------------------------------
</IfModule> 
```

## 这是来自根目录的蛋糕 htaccess /

```
<IfModule mod_rewrite.c>
   RewriteEngine on
   RewriteRule    ^$ app/webroot/    [L]
   RewriteRule    (.*) app/webroot/$1 [L]
</IfModule> 
```

## 这是来自 /app/ 的蛋糕 htaccess

```
<IfModule mod_rewrite.c>
    RewriteEngine on
    RewriteRule    ^$    webroot/    [L]
    RewriteRule    (.*) webroot/$1    [L]
</IfModule> 
```

## 这是来自 /app/webroot 的蛋糕 htaccess

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^(.*)$ index.php [QSA,L]
</IfModule> 
```

我假设来自自适应图像的规则必须首先出现在其中一个文件中，并可能为最后一条规则添加一个 [L] 或其他内容。但到目前为止，我唯一能做到的就是破坏图像的路径，`/img/myimage.gif`以便 Cake 开始寻找 ImgController。

Apache 日志没有给我任何有价值的东西。

有什么建议么？

## 编辑：目前看起来像这样

我修改后的`/`- htaccess 现在如下所示。Cake 给了我一个关于缺少 ImgController 的错误，并且没有在自适应图像应该放入的 ai-cache-folder 中创建图像。

```
<IfModule mod_rewrite.c>
   Options +FollowSymlinks
   RewriteEngine on

    RewriteCond %{REQUEST_URI} !assets
    RewriteRule \.(?:jpe?g|gif|png)$ adaptive-images.php

   RewriteCond %{REQUEST_URI} !adaptive-images\.php [NC]
   RewriteRule    ^$ app/webroot/    [L]
   RewriteRule    (.*) app/webroot/$1 [L]
</IfModule> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T09:15:13.777

好吧，即使它可能不是最优化的解决方案，我也让它工作了。

我只更改了`/app/webroot`-folder 中的 htaccess，如下所示

```
<IfModule mod_rewrite.c>
    Options +FollowSymlinks
    RewriteEngine On

    RewriteCond %{REQUEST_URI} !debug_kit
    RewriteRule \.(?:jpe?g|gif|png)$ adaptive-images.php [L]

    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^(.*)$ index.php [QSA,L]
</IfModule> 
```

并将adaptive-images.php 文件添加到`app/webroot`Vendor 目录中的adaptive-images.php 文件可能会更好，但至少它可以工作。

我在adaptive-images.php中做了两个改变

```
$cache_path    = "app/tmp/cache/ai-cache";
$source_file    = $document_root.'/app/webroot'.$requested_uri; 
```

# performance - Azure VM - 加载网站缓慢。有小费吗？

> ID：15105881
> 
> 赞同：0
> 
> 时间：2013-02-27T06:50:56.693
> 
> 标签：performance, azure

![虚拟机使用情况快照](../Images/7d34ea98f91dc7049a946c793bd0d3b8.png)我目前在 Microsoft Azure 中的 VM 上测试一个网站，但是自从从私人托管公司转移后，该网站的速度要慢得多。我在每日流量高峰附近拍摄了报告的快照。你认为它需要2个以上的核心吗？有什么实用技巧可以加快虚拟机上的网站速度吗？还有人觉得云服务比虚拟机更好/更快吗？（我假设它几乎是一样的......）提前谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T14:23:51.300

您的图表显示 CPU 利用率达到 0.44% 的峰值。它几乎没有使用它拥有的 CPU，因此添加更多 CPU 也无济于事。图表中的所有指标都非常低——服务器的容量似乎比您需要的多得多。

这意味着减速不是硬件资源问题。我会从寻找软件或配置问题、网络问题或测量技术问题开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-28T19:29:44.473

同样的问题：我安装了 wamp、统一服务器、xamp，我正在测试的网站比我的网络服务器慢 20 倍左右。开始接收来自 apache 的响应大约需要 1.5 秒。

# python-2.7 - 在 python 中高效处理 Twitter 流 API 数据

> ID：15105882
> 
> 赞同：0
> 
> 时间：2013-02-27T06:51:00.633
> 
> 标签：python-2.7, tweepy, twitter-streaming-api

我目前正在使用 tweepy lib 和 python (2.7.3) 为我的项目使用 twitter 流 API。我收到的数据率非常高。有没有可能放慢速度？我在某处读到 Twitter 不喜欢将流媒体延迟太久的想法。

我想做的另一件事是引入数据，假设 5 分钟，然后在 5 分钟后整理数据（基于任何事情！例如主题标签的字数等）。但我认为这会减慢我的流媒体播放速度（因为我正在使用一个进程）。

那么，您能提出一种处理方法吗？多线程？多处理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T15:59:36.677

您可以使用多线程方法，让我们将此问题视为“生产者-消费者问题” [http://en.wikipedia.org/wiki/Producer-consumer_problem](http://en.wikipedia.org/wiki/Producer-consumer_problem)，其中生产者将是主线程，在 5 分钟内填充缓冲区，然后另一个线程将消耗缓冲区（以某种方式处理它）。

# javascript - 以编程方式更改浏览器设置以不缓存文档

> ID：15105886
> 
> 赞同：0
> 
> 时间：2013-02-27T06:51:17.030
> 
> 标签：javascript, html

是否有可能阻止浏览器在 javascript 中缓存页面？因为当用户登录然后按历史按钮时，它会返回到表单，尽管 PHP 已经实现了用户登录时的重定向。但是浏览器缓存了页面并让用户再次访问登录页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T07:02:31.860

试试这个元标记

```
<meta http-equiv="cache-control" content="no-cache" />
<meta http-equiv="pragma" content="no-cache" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T07:04:25.037

如果你在服务器上运行它，你可以运行一个[phantom querystring](http://davidwalsh.name/prevent-cache)。网站上没有很好地解释，但是，这样做的想法是为了通过不断变化的链接来停止缓存。

# jquery - 悬停下拉菜单和可访问的键盘

> ID：15105889
> 
> 赞同：1
> 
> 时间：2013-02-27T06:51:26.507
> 
> 标签：jquery

我试图使鼠标悬停下拉菜单并通过键盘选项卡焦点访问...

如何显示具有键盘选项卡焦点的图层？请帮助...

这是我的代码

```
<div class="myM">
            <a href="#" class="myMTxt"><strong>Menu</strong></a>
            <div class="myMList">
                <span class="arrow"></span>
                <ul>
                    <li><a href="#">sub1</a></li>
                    <li><a href="#">sub2</a></li>
                    <li><a href="#">sub3</a></li>
                </ul>  
            </div>
        </div> 

#myMenu { position:absolute; top:87px; right:0;    z-index:200;  }

.myM { position:relative; width:132px;  }
.myM a.myMTxt { display:block;  height:20px; padding:0 5px; color: #9d9d9d;}

.myMList { position:absolute; top:0; left:0; display:none; }
.myMList ul { width:132px; border-top:1px solid #f2f2f2;   }
.myMList li { background:#eee; }
.myMList li a { display:block;  height:20px; padding:0 5px; color:#9d9d9d; font-size:11px; line-height:20px; }
.myMList li:hover { background:#676767;  }
.myMList li:hover a { color:#fff; display:block;   } 

.myM:hover div.myMList { display:block;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T06:55:56.583

Additiona 添加`focus`元素

```
.myM:focus div.myMList { display:block;} 
```

# java - Python 中的 ++i 运算符

> ID：15105892
> 
> 赞同：5
> 
> 时间：2013-02-27T06:51:42.090
> 
> 标签：java, python

我正在尝试将我的一个 Java 项目翻译成 Python，但我遇到了某一行的问题。Java代码是：

```
if (++j == 9)
    return true; 
```

我认为这应该在python中是

```
if (j += 1) ==9:
        return True 
```

...但我得到一个错误`SyntaxError: invalid syntax`。

如何将此 Java 转换为 Python？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-27T06:53:46.077

是的，这确实是一个语法错误。

你可能想要：

```
j += 1
if j == 9:
  return True 
```

原因是 python 需要在关键字 ( [docs](http://docs.python.org/2/reference/compound_stmts.html#the-if-statement) )之后使用*表达式*，而is a *statement*。 `if``j += 1`

 ** * *

恭喜，你刚刚躲过了一劫——没有将它翻译成：

```
if (++j == 9):
    return True 
```

这*是有效的python代码*，几乎可以肯定是一个错误！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T06:53:41.377

只需将其分成两行，因为 Python 没有`++`运算符。

```
j += 1
if j == 9:
  return True 
```

正如 wim 所指出的，并且`if`语句需要评估为 True 或 False 值的东西。在 Java 中，该`++j`部分将在比较之前进行评估。然后将比较新`j`值，从而产生真或假表达式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T06:53:38.453

Python 中不存在 ++ 运算符。相反，你可以这样做：

```
j += 1
if j == 9:
    return True 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T06:54:03.417

+= 运算符是赋值运算符。赋值运算符需要与条件语句分开运行。您应该像这样运行代码：

```
j+=1
if j==9:
   return True 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-27T06:54:22.310

*   Python中没有`++`（或）运算符。`--`
*   `j += 1`不返回值，因此没有什么可比较的。

看起来你想要：

```
if j == 8:
    return True 
```

如果`j`是`global`（通常不赞成），那么：

```
j += 1
if j == 9:
    return True 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-27T06:55:25.433

`j += 1`相当于`j = j + 1`。它实际上并没有返回值，而只是覆盖了变量`j`。我假设你想看看 if `j + 1 == 9`，所以替换：

```
if (j += 1) ==9:
    return True 
```

和：

```
j += 1
if j == 9:
    return True 
```*

# oracle - ora-03115: 不支持的网络数据类型或表示

> ID：15105893
> 
> 赞同：0
> 
> 时间：2013-02-27T06:51:44.390
> 
> 标签：oracle, jsp, jstl

我使用 Oracle 11g 作为我的数据库，我有 2 个名为`CATEGORY`和的表`PRODUCT`。

```
CATEGORY - cat_id NUMBER not null (PK)
         , cat_name VARCHAR2(100)

PRODUCT - PRO_ID NUMBER not null (PK)
        , PRO_NAME VARCHAR2(100)
        , PRICE BINARY_FLOAT
        , DESCRIPTION VARCHAR2(200)
        , CATEGORY_ID NUMBER 
```

(是表`category_id`的外键。`cat_id``CATEGORY`

当我尝试使用 JSTL 通过 JSP 从 PRODUCT 表中检索数据时，出现以下错误，

```
 javax.servlet.ServletException: javax.servlet.jsp.JspException: 
  SELECT * FROM PRODUCT 
: ORA-03115: unsupported network datatype or representation 
```

这是我的 JSP 代码：

```
<sql:query var="products" dataSource="jdbc/affablebean">

        SELECT * FROM PRODUCT 

</sql:query> 
```

但是，当我试图从`CATEGORY`表中获取数据时，工作正常。那么会是什么问题呢？

# directshow - directshow 源过滤器 SetTime

> ID：15105895
> 
> 赞同：0
> 
> 时间：2013-02-27T06:51:51.437
> 
> 标签：directshow

我正在编写一个directshow源过滤器来读取特定的原始文件，原始文件在每一帧中都包含时间戳（utc时间）

我的过滤器是从微软SDK的“Push Source Filters Sample”修改而来的，所以最重要的是覆盖GetMediaType()、DecideBufferSize()和FillBuffer()。

我的问题在 FillBuffer(IMediaSample *pSample) 中。我不知道如何在这个函数中正确调用 pSample->SetTime() ，因为时间戳从一个很大的数字开始，帧会一直等到 StreamTime 到达时间戳。

该问题可以通过在每一帧上减去一个偏移量来解决，但我需要下游过滤器中的原始时间戳（SampleGrabber）

有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T08:16:34.617

媒体样本上没有绝对时间戳。您需要从正在流式传输的片段中的所有样本中减去前导媒体样本时间，以便第一个媒体样本为零，并且以下内容正确设置。

如果您可以使基本时间戳（您正在减去）可用于您的样本采集器回调，那么您可以将其添加回来并恢复正确的绝对时间。

MSDN：[DirectShow 中的时间戳](http://msdn.microsoft.com/en-us/library/windows/desktop/dd407208%28v=vs.85%29.aspx)

# nhibernate - 是否可以使用 NHibernate 调用存储过程并填充 DataTable？

> ID：15105897
> 
> 赞同：3
> 
> 时间：2013-02-27T06:52:02.667
> 
> 标签：nhibernate, stored-procedures, datatable

我已经知道我们如何使用 NHibernate 调用存储过程并填充 DTO（如此处所回答[）](https://stackoverflow.com/questions/14750969/is-it-possible-to-call-a-stored-procedure-using-nhibernate-which-returns-a-custo)。

但是，我想知道是否有可能在 NHibernate 中使用相同的 ResultTransformer 概念以某种方式填充 DataTable，或者是否有其他推荐的方法？

我更喜欢在 NHibernate 中使用 ResultTransformer 的概念。但是，我不知道它是否可能以及如何。有没有其他人试过这个？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T10:28:53.040

[我使用此处](http://www.codewrecks.com/blog/index.php/2010/10/07/load-a-strongly-typed-dataset-from-a-stored-with-nhibernate/)描述的 ResultTransformer 的概念提出了以下解决方案：

```
 public class DataTableResultTransformer : IResultTransformer
  {
    private DataTable dataTable;

    public IList TransformList(IList collection)
    {
      var rows = collection.Cast<DataRow>().ToList();
      rows.ForEach(dataRow => dataTable.Rows.Add(dataRow));
      return new List<DataTable> { dataTable };
    }

    public object TransformTuple(object[] tuple, string[] aliases)
    {
      //Create the table schema based on aliases if its not already done
      CreateDataTable(aliases);

      //Create and Fill DataRow
      return FillDataRow(tuple, aliases);
    }

    private DataRow FillDataRow(object[] tuple, string[] aliases)
    {
      DataRow dataRow = dataTable.NewRow();
      aliases.ToList().ForEach(alias =>
                                 {
                                   dataRow[alias] = tuple[Array.FindIndex(aliases, colName => colName == alias)];
                                 });
      return dataRow;
    }

    private void CreateDataTable(IEnumerable<string> aliases)
    {
      if (dataTable == null)
      {
        dataTable = new DataTable();
        aliases.ToList().ForEach(alias => dataTable.Columns.Add(alias));
      }
    }
  } 
```

并按如下方式使用：

```
 using (ISession session = sessionFactory.OpenSession())
    {
      var sqlQuery = session.CreateSQLQuery("SELECT ID, NAME, ADDRESS FROM CUSTOMER");
      var transformedQuery = sqlQuery.SetResultTransformer(new DataTableResultTransformer());
      return transformedQuery.List().Single();
    } 
```

我刚刚创建了一个自定义 ResultTransformer，并在我的 sql 查询中使用它来根据我在 DataTableResultTransformer 中的逻辑来转换查询的结果。

为结果集中的每个项目调用 TransformTupple 方法。元组包含数据，而别名包含数据的名称。因此，我们几乎可以构建和填充 DataTable。一旦结果集中的所有项目都已由 TransformTupple 方法转换，则最后调用 TransformList 方法。集合参数包含我们在 TransformTupple 方法中转换为 DataRow 的所有项目。所以，在这里我们可以很容易地用 DataRows 填充我们的 DataTable 并返回。

希望它对其他处理相同情况的人有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-07T01:25:25.483

更新了将列数据类型考虑在内的示例

```
[SuppressMessage("Design", "CA1001")]
public class DataTableResultTransformer : IResultTransformer
{
    readonly Type?[] m_DataTypeOverrides = Array.Empty<Type?>();
    readonly DataTable m_DataTable = new DataTable();

    /// <summary>
    /// Initializes a new instance of the <see cref="DataTableResultTransformer"/> class.
    ///
    /// Only use this constructor if none of the columns are nullable.
    /// </summary>
    /// <remarks>Warning: If a field is NULL in the first row, that entire column will be cast as a String.</remarks>
    public DataTableResultTransformer()
    {
    }

    /// <summary>
    /// Initializes a new instance of the <see cref="DataTableResultTransformer"/> class.
    ///
    /// 1\. If dataTypeOverrides for a given column is not null, it is used.
    /// 2\. If the field is not null for the first row, then that field's data type if used.
    /// 3\. If both the dataTypeOverride and the field in the first row are null, the column's data type is String.
    /// </summary>
    /// <param name="dataTypeOverrides">The expected data types.</param>
    public DataTableResultTransformer(params Type?[] dataTypeOverrides)
    {
        m_DataTypeOverrides = dataTypeOverrides;
    }

    public IList TransformList(IList collection)
    {
        return new List<DataTable> { m_DataTable };
    }

    public object TransformTuple(object[] tuple, string[] aliases)
    {
        if (tuple == null || tuple.Length == 0)
            throw new ArgumentException($"{nameof(tuple)} is null or empty.", nameof(tuple));

        if (aliases == null || aliases.Length == 0)
            throw new ArgumentException($"{nameof(aliases)} is null or empty.", nameof(aliases));

        if (m_DataTable.Columns.Count == 0)
        {
            //Create the DataTable if this is the first row
            for (var i = 0; i < aliases.Length; i++)
            {
                var col = m_DataTable.Columns.Add(aliases[i]);
                if (i < m_DataTypeOverrides.Length && m_DataTypeOverrides[i] != null)
                    col.DataType = m_DataTypeOverrides[i];
                else if (tuple[i] != null && tuple[i] != DBNull.Value)
                    col.DataType = tuple[i].GetType();
            }
        }

        return m_DataTable.Rows.Add(tuple);
    }
} 
```

# mysql - 从一行 MySQL 查询多行

> ID：15105898
> 
> 赞同：3
> 
> 时间：2013-02-27T06:52:17.690
> 
> 标签：mysql

我有一个如下的 MySQL 表。我想创建一个查询，根据我的示例中的“种子”计数为每个条目返回多行。这在 MySQL 上可行吗？

桌子：

```
-------------------------------
| ID      | Name    | Seed    |
| 1       | Entry 1 | 2       |
| 2       | Entry 2 | 3       |
| 3       | Entry 3 | 1       |
| 4       | Entry 4 | 2       |
------------------------------- 
```

结果：

```
ID    Name     Seed
1     Entry 1  2
1     Entry 1  2
2     Entry 2  3
2     Entry 2  3
2     Entry 2  3
3     Entry 3  1
2     Entry 2  2
2     Entry   2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T07:56:37.570

您可以引入另一个顺序种子值表。然后您的查询可以使用 >= 加入它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T21:17:32.407

当您需要多行时，您需要整数值，您可以通过该整数值来多行。因此，我的示例将使用[包含整数值的子查询](https://stackoverflow.com/questions/186756/generating-a-range-of-numbers-in-mysql)。

询问：

**[SQLFIDDLE示例](http://sqlfiddle.com/#!2/d7d13/6)**

```
SELECT t.ID, t.Name, t.Seed
FROM Table1 t
LEFT JOIN (SELECT
    (TWO_1.SeqValue + 
     TWO_2.SeqValue + 
     TWO_4.SeqValue + 
     TWO_8.SeqValue + 
     TWO_16.SeqValue) SeqValue
FROM
    (SELECT 0 SeqValue UNION ALL SELECT 1 SeqValue) TWO_1
    CROSS JOIN (SELECT 0 SeqValue UNION ALL SELECT 2 SeqValue) TWO_2
    CROSS JOIN (SELECT 0 SeqValue UNION ALL SELECT 4 SeqValue) TWO_4
    CROSS JOIN (SELECT 0 SeqValue UNION ALL SELECT 8 SeqValue) TWO_8
    CROSS JOIN (SELECT 0 SeqValue UNION ALL SELECT 16 SeqValue) TWO_16
)t2
ON t2.SeqValue < t.SEED 
```

结果：

```
| ID |    NAME | SEED |
-----------------------
|  1 | Entry 1 |    2 |
|  1 | Entry 1 |    2 |
|  2 | Entry 2 |    3 |
|  2 | Entry 2 |    3 |
|  2 | Entry 2 |    3 |
|  3 | Entry 3 |    1 |
|  4 | Entry 4 |    2 |
|  4 | Entry 4 |    2 | 
```

# mongodb - 适用于可扩展 Web 应用程序的数据库和 Web 服务器

> ID：15105902
> 
> 赞同：0
> 
> 时间：2013-02-27T06:52:43.293
> 
> 标签：mongodb, scala, nginx, jetty, hbase

我正计划使用 Scala 编程语言开发可扩展的 Web 应用程序。我是 scala 的新手。我正在考虑使用 nginx 作为前端和码头作为后端的播放框架。我对选择正确的数据库感到困惑。我应该去 mongodb 或 hbase 或 mysql 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T10:19:27.047

首先，正如其他人所说，持久层的选择取决于您的用例。

如果您正在寻找 SQL 解决方案，请查看[SO answer to "Good examples of Scala database persistence"](https://stackoverflow.com/a/2318935/734191)的概述，其中提供了以下示例：

*   [光滑](http://slick.typesafe.com)，
*   [异常](https://github.com/playframework/Play20/wiki/ScalaAnorm)，
*   [Circumflex ORM](http://circumflex.ru/projects/orm/index.html) ,
*   [斯奎尔](http://squeryl.org)，
*   [O/R 代理](http://code.google.com/p/orbroker/)，和
*   [唠叨](https://github.com/nkallen/querulous#readme)。

您可能还想查看[SORM 框架](http://sorm-framework.org)。

对于[Slick](http://slick.typesafe.com)，有一个很有前途的项目[play-slick](https://github.com/freekh/play-slick)，它有助于将其集成到 Play 框架中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T19:52:18.607

如今，令人高兴的是，选择数据库可能是一项具有挑战性的工作，因为环境非常多样化。这是一个有趣的视觉效果，突出了这一点：

[http://blogs.the451group.com/information_management/files/2013/02/db_Map_2_13.jpg](http://blogs.the451group.com/information_management/files/2013/02/db_Map_2_13.jpg)

从开发人员技能和 API 的角度来看，选择真正应该由最容易使用的驱动、数据的结构和大小、写入数据的频率与读取数据的频率、需要什么样的 ACID 要求以及最后您的应用程序需要如何扩展。我把可伸缩性放在最后，因为在大多数情况下，当你把可伸缩性放在首位时，结果就是没有问题的解决方案。如果它是一个新应用程序，实际上您可能对可伸缩性要求一无所知，所以我会选择适合您其他需求的东西。由于您的应用程序是在 Scala 中构建的，因此还可能会考虑可用于所考虑技术的 Scala 友好包装器的成熟度和质量。如果您决定采用非关系数据库，这一点尤其重要，

由于您特别提到了 MongoDB 和 HBase，我假设您可能有理由使用非关系数据库。事实上，在这个早期阶段，您面临的艰难选择实际上是采用关系解决方案还是非关系解决方案。如果您选择关系解决方案，那么从一个关系数据库迁移到另一个关系数据库会相对容易。如果您选择非关系型数据库，情况就不那么正确了，因为 API 在一种类型的非关系型数据库和另一种类型的非关系型数据库之间存在很大差异。

那么如何知道是否需要采用非关系型数据库呢？

1.  你有很多列的表吗？
2.  你有没有几列但有很多关系的表？
3.  你有没有父母和祖先的孩子的树状数据？
4.  您是否计划存储 XML 或 JSON 等结构化数据格式？
5.  您是否预见到需要频繁更改数据库架构？

如果您对这些问题中的任何一个回答是肯定的，那么您可能是非关系型的，但您可能不是乡巴佬。在这种情况下，第二个最难的问题是选择哪个非关系数据库。同样，根据您的数据结构以及它们与其他技术选择的匹配程度、您需要哪些 ACID 属性、您的技能所在以及最简单的方法进行选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T07:07:21.517

嗯，MongoDB 和 MySql 都是 GPL，除了查询 MongoDB 的方式之外，存储数据的方式还有性能优势。

在 MongoDB 中，数据存储为数据页，这是 MySQL 中许多表的结构化替换，因此当您查询 MongoDB 时，您可以访问索引查找并从一页中检索数据。

在 MySQL 中，对于相同的数据，因为它分布在几十个表中，所以您将执行几十个索引查找、几十个范围查找和几十个数据查找。

因此，第一轮的获胜者是 MongoDB。

我对 HBase 了解不多，但是这里显示了一个很棒的比较图[，这里](http://hammerprinciple.com/databases/items/hbase/mongodb)再次显示 MongoDB 似乎占了上风。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T08:27:00.990

也许一个用例是为了让答案更合适。通常，数据的类型及其用途将决定一个人是使用 SQL（关系型，例如 MySQL）还是 NoSQL 架构（例如 MongoDB）。

这篇[文章](http://slashdot.org/topic/bi/sql-vs-nosql-which-is-better/)可能有助于指明方向。

`....As programmers we can embrace what we’re given. Most likely we’ll have our own opinions. I sure do. But if you’re doing something that lends itself nicely to SQL tables, then we can get our job done. If you’re doing something that requires complex data structures and lends itself nicely to a NoSQL database, then we can similarly get our job done....`

# mysql - 对不在有子句中的列进行分组

> ID：15105904
> 
> 赞同：0
> 
> 时间：2013-02-27T06:52:47.737
> 
> 标签：mysql, sql

我有一个带有 GROUP BY 、 HAVING 和 ORDER BY 子句的简单**SQL查询。**HAVING 子句在 GROUP BY 中有一些我不想要的字段，这可能吗？因为我必须每小时对数据进行分组，并且在 HAVING 中有一个日期字段，所以分组无法正常工作。代码是：

```
alter procedure [dbo].[sp_metadata_inflow]
@grp_name varchar(40) , @subgrp_name varchar(40)
as
begin
declare @i as int , @j as int,@k as int,@d as datetime , @m as datetime,@y as datetime;
set @d = datepart(day,'2012-12-13 10:54:55.000');
set @m = datepart(month,'2012-12-13 10:54:55.000');
set @y = datepart(YEAR,'2012-12-13 10:54:55.000');
set @i = 1;
set @j = @i - 1;
while (@i <=24)
begin
(SELECT  top 5 @i,
         ContactReason,
         @grp_name,
         @subgrp_name,
         COUNT(*)
 FROM   [ISRM].[dbo].[ITSM01ISRM]
 GROUP  BY ContactReason,datepart(day,CreatedDate),CurrentGroup,CurrentSubGroup
 HAVING (
         datepart(day,CreatedDate)= @d AND datepart(MONTH,CreatedDate)= @m
         AND datepart(year,CreatedDate) = @y AND datepart(hour,CreatedDate) <= @i
         AND datepart(hour,CreatedDate) >=@j
        )
        AND (CurrentGroup = @grp_name) AND (CurrentSubGroup = @subgrp_name)
);
set @i = @i + 1;
set @j =  @i -1;
end
end
go 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T10:18:27.803

要实际回答您的问题，您似乎只希望在 where 子句中使用这些条件。它看起来也很像 SQL-Server 语法，而不是标签所暗示的 MySQL。

还值得注意的是，这是非常低效的：

```
 (datepart(day,CreatedDate)= @d 
AND datepart(MONTH,CreatedDate)= @m
AND datepart(year,CreatedDate) = @y 
AND datepart(hour,CreatedDate) <= @i 
AND datepart(hour,CreatedDate) >=@j ) 
```

在列上使用`DATEPART`不仅会强制函数对每一行进行评估，它还会消除列上任何索引的好处。这会更好写成`Createddate >= '20130227 00:00' AND CreatedDate < '20130227 01:00'`.

此外，在每个循环中，您执行 2 小时，这听起来不像预期的行为。

最后，我无法想象返回 24 个结果集是处理数据的最佳方式，如果您想要每小时计算一次，将小时作为列并执行一个查询并返回一个数据集是否没有意义？

例如

```
| ContactReason  | GroupName  | SubGroupName | 00:00 | 01:00 | 02:00 | 03:00 |.....| 23:00 |
|----------------+------------+--------------+-------+-------+-------+-------+.....+-------|
| Example Reason | Test Group | Sub Group    |   5   |   10  |    8  |    1  |.....|   14  |
| Another Reason | Test Group | Sub Group    |   3   |    1  |   13  |    8  |.....|   23  | 
```

在这种情况下，您的查询可以写成

```
DECLARE @Date DATETIME = '20121213';

WITH Data AS
(       SELECT  ContactReason,
                GroupName = @grp_name,
                SubGroupName = @subgrp_name,
                CreatedHour = CAST(DATEADD(HOUR, DATEDIFF(HOUR, 0, Createddate), 0) AS TIME),
                [Value] = 1
        FROM    [ISRM].[dbo].[ITSM01ISRM] 
        WHERE   CurrentGroup = @grp_name
        AND     CurrentSubGroup = @subgrp_name
        AND     CreatedDate >= @Date
        AND     CreatedDate < DATEADD(DAY, 1, @Date)
)
SELECT  *
FROM    Data
        PIVOT
        (   COUNT(Value)
            FOR CreatedHour IN 
                (   [00:00], [01:00], [02:00], [03:00], [04:00], [05:00], 
                    [06:00], [07:00], [08:00], [09:00], [10:00], [11:00], 
                    [12:00], [13:00], [14:00], [15:00], [16:00], [17:00],
                    [18:00], [19:00], [20:00], [21:00], [22:00], [23:00]
        ) pvt; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T09:52:24.137

以下查询按小时对所有结果进行分组。为什么不希望在 GROUP BY 中有 CreatedDate？

```
SELECT
    ContactReason,
    CurrentGroup,
    CurrentSubGroup,
    dateadd(hour, datediff(hour, 0, CreatedDate), 0),
    COUNT(1) 
FROM [ISRM].[dbo].[ITSM01ISRM] 
WHERE
    (CurrentGroup = @grp_name) AND (CurrentSubGroup = @subgrp_name)
GROUP BY 
    ContactReason,
    dateadd(hour, datediff(hour, 0, CreatedDate), 0),
    CurrentGroup,
    CurrentSubGroup; 
```

# struts2 - 在 Struts2 应用程序中出现错误

> ID：15105905
> 
> 赞同：1
> 
> 时间：2013-02-27T06:52:47.817
> 
> 标签：struts2, tomcat7

这些是我正在使用的 jar 文件：

```
commons-fileupload-1.2.2.jar
commons-io-2.0.1.jar
commons-lang3-3.1.jar
commons-logging-1.1.1.jar
commons-logging-api-1.1.jar
freemarker-2.3.19.jar
javassist-3.11.0.GA.jar
ognl-3.0.6.jar
struts2-core-2.3.8.jar
struts2-dojo-plugin-2.3.8.jar
xwork-core-2.3.8.jar 
```

**struts.xml** - 存在于项目的 web 内容文件夹中

```
<!DOCTYPE struts PUBLIC
 "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
  "http://struts.apache.org/dtds/struts-2.0.dtd">
 <struts>
    <package name="Login" extends="struts-default">
        <action name="login" class="org.jolly.struts.action.LoginAction">
                <result name="SUCCESS">register.jsp</result>
                <result name="LOGIN">login.jsp</result>
        </action>
    </package>

    <package name="Register" extends="struts-default">
        <action name="register" class="org.jolly.struts.action.FormAction">
                <result name="SUCCESS">success.jsp</result>

        </action>
    </package> 
```

**web.xml** - 存在于 Web 内容文件夹中

```
<?xml version="1.0" encoding="UTF-8"?>
 <web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"         
 xmlns="http://java.sun.com/xml/ns/javaee"  
 xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" 
 xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
 http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" id="WebApp_ID" version="3.0">
  <display-name>RegisterForm</display-name>
<welcome-file-list>
<welcome-file>index.html</welcome-file>
<welcome-file>index.htm</welcome-file>
<welcome-file>login.jsp</welcome-file>
<welcome-file>default.html</welcome-file>
<welcome-file>default.htm</welcome-file>
<welcome-file>default.jsp</welcome-file>
</welcome-file-list>

<filter>
<filter-name>struts2</filter-name>
<filter-class>
            org.apache.struts2.dispatcher.FilterDispatcher
</filter-class>
</filter>

<filter-mapping>
        <filter-name>struts2</filter-name>
        <url-pattern>/*</url-pattern>
</filter-mapping> 
```

**动作类**

**登录操作.java**

```
package org.jolly.action;

 import org.apache.commons.lang3.StringUtils;

 import com.opensymphony.xwork2.ActionSupport;

 public class LoginAction extends ActionSupport{

private String userId;
private String password;

public String execute(){
    if(getUserId().equals("user") && getPassword().equals("password"))
        return SUCCESS;
    else
        return LOGIN ;

}

public String getUserId() {
    return userId;
}

public void setUserId(String userId) {
    this.userId = userId;
}

public String getPassword() {
    return password;
}

public void setPassword(String password) {
    this.password = password;
}

public void validate(){

    if(StringUtils.isEmpty(getUserId())) {
        addFieldError("userId","UserId cannot be blank");
    }

    if(StringUtils.isEmpty(getPassword())) {
        addFieldError("password","Password cannot be blank");
    }
}

} 
```

**FormAction.java**

```
package org.jolly.action;

  import org.apache.commons.lang3.StringUtils;
  import com.opensymphony.xwork2.ActionSupport;

  public class FormAction extends ActionSupport{

private String name;
private String emailId;

public String execute(){
    return SUCCESS;
}

public String getName() {
    return name;
}

public void setName(String name) {
    this.name = name;
}

public String getEmailId() {
    return emailId;
}

public void setEmailId(String emailId) {
    this.emailId = emailId;
}

   public void validate(){
    if(StringUtils.isEmpty(getName())) {
        addFieldError("name","Name cannot be blank");
    }

    if(StringUtils.isEmpty(getEmailId())) {
        addFieldError("emailid","Email Id cannot be blank");
    }
} 
```

**JSP 的**

**1.登录.jsp**

```
 <%@ taglib prefix="s" uri="/struts-tags"%> 

<html>
<body>
<s:form action="login">
      <s:textfield label="User Id" key="userid"/>
      <s:password label="Password" key="password"/>
</s:form>
</body>
</html> 
```

**2.注册.jsp**

```
 <%@ taglib prefix="s" uri="/struts-tags"%>
    <%@ taglib prefix="sx" uri="/struts-dojo-tags"%>

     <html>
     <head>
      <s:head/>
      <sx:head/>
     </head>
     <body>
     <s:form action="register">
     <s:textfield label="Enter Your Name" key="name"/>
     <s:textfield label="Enter Your Email Id" key="emailId"/>
     <s:checkbox name= "Gender" fieldvalue="Female" value="true"/>
     <s:checkbox name ="Gender" fieldvalue="Male"/>
     <s:checkbox name ="Gender" fieldvalue="Others"/>
     <sx:autocompleter label= "Country" list ="{'India','Pakistan','U.S'}"/>
     <s:textarea key="add" name="address"/>
     <sx:datetimepicker name="date" label="Date" displayFormat="dd/MM/yyyy"/>
    <s:submit value= "Submit Form"/>
 </s:form>
  </body> 
```

**3.成功.jsp**

```
 <html>
  <body>
   Form is submitted successfully!!
 </body>
  </html> 
```

**错误**

```
SEVERE: Dispatcher initialization failed
 Unable to load configuration. - action - 

 file:/C:/Users/JOLLY/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp2/wtpweba 
 pps/RegisterForm%20(1)/WEB-INF/classes/struts.xml:7:69
    at  
 com.opensymphony.xwork2.config.ConfigurationManager.getConfiguration(ConfigurationManager. 
 java:70)
    at 
 org.apache.struts2.dispatcher.Dispatcher.init_PreloadConfiguration(Dispatcher.java:429)
    at org.apache.struts2.dispatcher.Dispatcher.init(Dispatcher.java:471)
    at org.apache.struts2.dispatcher.FilterDispatcher.init(FilterDispatcher.java:193)
    at 
 org.apache.catalina.core.ApplicationFilterConfig.initFilter(ApplicationFilterConfig.java:2
 81)
    at 
 org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:26
 2)
    at org.apache.catalina.core.ApplicationFilterConfig.<init>
 (ApplicationFilterConfig.java:107)
    at org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:4656)
    at 
 org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5312)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
    Caused by: Action class [org.jolly.struts.action.LoginAction] not found - action -  
 file:/C:/Users/JOLLY/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp2/wtpweba
 pps/RegisterForm%20(1)/WEB-INF/classes/struts.xml:7:69
    at 
 com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.verifyAction(XmlConfigur
 ationProvider.java:480)
    at 
 com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.addAction(XmlConfigurati
 onProvider.java:424)
    at 
 com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.addPackage(XmlConfigurat
 ionProvider.java:541)
    at c

 com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.loadPackages(XmlConfigur
 ationProvider.java:290)
    at 
 org.apache.struts2.config.StrutsXmlConfigurationProvider.loadPackages(StrutsXmlConfigurati
 onProvider.java:112)
    at 
 com.opensymphony.xwork2.config.impl.DefaultConfiguration.reloadContainer(DefaultConfigurat
 ion.java:239)
    at 
 com.opensymphony.xwork2.config.ConfigurationManager.getConfiguration(ConfigurationManager.
 java:67)
    ... 16 more
    Feb 27, 2013 12:12:12 PM org.apache.catalina.core.StandardContext filterStart

 SEVERE: Exception starting filter struts2

 Unable to load configuration. - action - 
 file:/C:/Users/JOLLY/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp2/wtpweba
 pps/RegisterForm%20(1)/WEB-INF/classes/struts.xml:7:69
    at org.apache.struts2.dispatcher.Dispatcher.init(Dispatcher.java:483)
    at org.apache.struts2.dispatcher.FilterDispatcher.init(FilterDispatcher.java:193)
    at 
 org.apache.catalina.core.ApplicationFilterConfig.initFilter(ApplicationFilterConfig.java:2 81)
    at 
 org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:26 
 2)
    at org.apache.catalina.core.ApplicationFilterConfig.<init> 
 (ApplicationFilterConfig.java:107)
    at org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:4656)
    at 

 org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5312)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
    Caused by: Unable to load configuration. - action - 
 file:/C:/Users/JOLLY/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp2/wtpweba
 pps/RegisterForm%20(1)/WEB-INF/classes/struts.xml:7:69
    at 
 com.opensymphony.xwork2.config.ConfigurationManager.getConfiguration(ConfigurationManager.
 java:70)
    at 
 org.apache.struts2.dispatcher.Dispatcher.init_PreloadConfiguration(Dispatcher.java:429)
    at org.apache.struts2.dispatcher.Dispatcher.init(Dispatcher.java:471)
    ... 14 more

 Caused by: Action class [org.jolly.struts.action.LoginAction] not found - action - 
 file:/C:/Users/JOLLY/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp2/wtpweba
 pps/RegisterForm%20(1)/WEB-INF/classes/struts.xml:7:69
    at 
 com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.verifyAction(XmlConfigur
 ationProvider.java:480)
    at 
 com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.addAction(XmlConfigurati
 onProvider.java:424)
    at 
 com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.addPackage(XmlConfigurat
 ionProvider.java:541)
    at 
 com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.loadPackages(XmlConfigur
 ationProvider.java:290)
    at 
 org.apache.struts2.config.StrutsXmlConfigurationProvider.loadPackages(StrutsXmlConfigurati
 onProvider.java:112)
    at 
 com.opensymphony.xwork2.config.impl.DefaultConfiguration.reloadContainer(DefaultConfigurat
 ion.java:239)
    at 
 com.opensymphony.xwork2.config.ConfigurationManager.getConfiguration(ConfigurationManager.
 java:67)
    ... 16 more

     Feb 27, 2013 12:12:12 PM org.apache.catalina.core.StandardContext startInternal
     SEVERE: Error filterStart
     Feb 27, 2013 12:12:12 PM org.apache.catalina.core.StandardContext startInternal
     SEVERE: Context [/RegisterForm_(1)] startup failed due to previous errors
     Feb 27, 2013 12:12:12 PM org.apache.coyote.AbstractProtocol start
     INFO: Starting ProtocolHandler ["http-bio-8080"]
     Feb 27, 2013 12:12:12 PM org.apache.coyote.AbstractProtocol start
     INFO: Starting ProtocolHandler ["ajp-bio-8009"]
     Feb 27, 2013 12:12:13 PM org.apache.catalina.startup.Catalina start
     INFO: Server startup in 9975 ms 
```

请任何人都可以提供帮助。两周以来我一直在尝试这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T12:24:11.057

错误消息准确地说明了问题所在。

您的配置文件为您的操作类使用一个包，您的操作类在另一个包中。

您的下一个问题将是找不到您的结果，因为配置文件使用所有大写的结果名称，而常量值都是小写的。

您还使用旧过滤器。为什么验证逻辑重复？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-13T05:13:32.380

struts.xml 文件应该放在

任何一个

1) 在 Java 资源--> src 文件夹-->struts.xml 中。

或者

2）在WebContent-->WEB-INF-->classes（创建一个名为“classes”的新文件夹）--> struts.xml

# cordova - Angular ng-view/routing 在PhoneGap 中不起作用

> ID：15105910
> 
> 赞同：27
> 
> 时间：2013-02-27T06:52:55.107
> 
> 标签：cordova, routing, angularjs, angular-routing

我在 PhoneGap 中遇到了 ngView 的问题。

一切似乎都加载得很好，我什至可以使用 ng-controller 获得一个基本的控制器。但是当我尝试将路由与 ngView 一起使用时，什么也没有发生。

索引.html

```
<!doctype html>
<html ng-app>
<head>
    <script type="text/javascript" src="lib/cordova-2.4.0.js"></script> 
    <script type="text/javascript" src="lib/angular-1.0.4.min.js"></script>
    <script type="text/javascript" src="js/app.js"></script>
</head>
<body>

<a href="#/test">Test</a>

<div ng-view></div>

</body>
</html> 
```

应用程序.js

```
angular.module('App', []).config(function ($routeProvider) {

    $routeProvider.when('/test', {
        controller: TestCtrl,
        template: '<h1> {{ test }} </h1>'        
    });

});

function TestCtrl($scope) {
    $scope.test = "Works!";
} 
```

Eclipse 记录器会`onMessage(onPageFinished, fle:///android_asset/www/index.html#/test)`在我每次单击该链接时显示，并且在不尝试的情况下尝试它`#`会引发找不到路径的错误。

从我在其他地方准备的内容来看，这应该可以工作。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-03-26T21:50:56.167

After searching through several questions and forums, I've finally got it working reliably. This is what it took me to get it running from a clean PhoneGap project.

index.html

```
<!DOCTYPE html>
<html ng-app="App">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
    <link rel="stylesheet" type="text/css" href="css/index.css" />
    <title>Hello World</title>
</head>
<body>

    <a href="#/">Main View</a>
    <a href="#/view">New View</a>

    <div ng-view></div>

    <!-- Libs -->
    <script type="text/javascript" src="lib/cordova-2.5.0.js"></script>
    <script type="text/javascript" src="lib/angular-1.0.5.js"></script>

    <!-- App -->
    <script type="text/javascript" src="js/index.js"></script>
    <script type="text/javascript" src="js/routers.js"></script>
    <script type="text/javascript" src="js/controllers.js"></script>
    <script type="text/javascript">
        app.initialize();
    </script>
</body>
</html> 
```

Note the `<html ng-app="App">` tag. The app won't load without a value for the directive, so make sure you include one.

index.js

```
var app = {
    initialize: function() {
        this.bindEvents();
    },
    bindEvents: function() {
        document.addEventListener('deviceready', this.onDeviceReady, true);
    },

    onDeviceReady: function() {
        angular.element(document).ready(function() {
            angular.bootstrap(document);
        });
    },
}; 
```

In this file, we're manually bootstrapping Angular when PhoneGap fires the `'ondeviceready'` event.

routers.js

```
angular.module('App', [])
.config(function ($compileProvider){
    $compileProvider.urlSanitizationWhitelist(/^\s*(https?|ftp|mailto|file|tel):/);
})
.config(function ($routeProvider) {

    $routeProvider
    .when('/', {
        controller: TestCtrl,
        templateUrl: 'partials/main.html'
    })
    .when('/view', {
        controller: ViewCtrl,
        templateUrl: 'partials/view.html'
    });
}); 
```

This file has two important things in it. First, we're creating the module with the same name we used before in `<html np-app="App">`. Second, we need to configure the router to whitelist file URIs. I personally didn't need this, but several people seem to have encountered the issue, so I included it.

controllers.js

```
function TestCtrl($scope) {
    $scope.status = "It works!";
}

function ViewCtrl($scope) {
    $scope.status = "Also totally works!";
} 
```

Finally, just some basic controllers.

I've created a github repo with all of this [here](https://github.com/thewildpendulum/angular-phonegap-seed).

Hope this helps someone else.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-13T00:04:36.667

我的问题是域白名单。

基本上你的 .config 需要看起来像这样：

```
angular.module('App', []).config(function ($routeProvider, $compileProvider) {

    $routeProvider.when('/test', {
        controller: TestCtrl,
        template: '<h1> {{ test }} </h1>'        
    });
    $compileProvider.urlSanitizationWhitelist(/^\s*(https?|ftp|mailto|file|tel):/);
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-10-04T11:44:14.687

FWIW - 这是我解决这个问题的 2 美分：

以上所有方法似乎都有效，并将我推向了一个工作应用程序，但我仍然无法让 $routeprovider 在页面之间导航......

我的最后一个问题是 - 我在 jqueryMobile 库的脚本标签中有一个包含，它在 Angular 获取 URL 请求之前劫持了它们。当我删除它时，导航请求最终到达了 $routeprovider，现在一切正常。

希望这可以帮助某人...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-28T21:18:43.790

我可以通过禁用 Google Chrome 中的本地访问策略标志来解决此问题。

```
$ open -a Google\ Chrome --args --disable-web-security for Mac OS. 
```

这是如何禁用本地访问文件策略的[链接。](https://stackoverflow.com/questions/3102819/chrome-disable-same-origin-policy)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-15T18:47:50.930

Angular 1.2 不提供该方法

```
$compileProvider.urlSanitizationWhitelist(/^\s*(https?|ftp|mailto|file|tel):/) 
```

反正，好像没必要了。我在我的手机上测试了它，它没有工作。

# c# - 以一种形式输入的数据显示到另一种形式

> ID：15105914
> 
> 赞同：3
> 
> 时间：2013-02-27T06:53:06.880
> 
> 标签：c#, .net, winforms, listbox

我想要另一个表单来显示从一个表单的列表框中选择的项目到另一个表单的富文本框，该表单在按钮单击时打开。我在表格 1 中使用了以下代码片段在消息框中显示内容，但现在我想要另一种表格。需要帮忙...

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace cities
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {

            StringBuilder message = new StringBuilder();

            foreach (object selectedItem in listBox1.SelectedItems)
            {
               message.Append(selectedItem.ToString() + Environment.NewLine);
            }
            MessageBox.Show("You selected: \n" +message.ToString());         

        }

        private void listBox1_SelectedIndexChanged(object sender, EventArgs e)
        {
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T08:51:15.187

我使用以下代码来实现我想要的。它做得很好！:)

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace cities
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {

            StringBuilder message = new StringBuilder();

            foreach (object selectedItem in listBox1.SelectedItems)
            {
               message.Append(selectedItem.ToString() + Environment.NewLine);
            }
            MessageBox.Show("Your Selected Cities :\n" + message.ToString() + "\n");

            Form2 childForm = new Form2();
            childForm.Controls["richTextBox1"].Text = message.ToString();
            childForm.Show();
        }

        private void listBox1_SelectedIndexChanged(object sender, EventArgs e)
        {
        }

    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T07:03:29.057

从第一个来只需像这样调用第二个形式

```
Form2 ob = new Form2(message);
ob.show(); 
```

这是设置消息的第二种形式

```
 public partial class Form2 : Form
        {
            public Form2()
            {
                InitializeComponent();
            }
            public Form2(String message)
            {
                InitializeComponent();
                richTextBox1.Text = message;
            }

            private void Form2_Load(object sender, EventArgs e)
            {

            }
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T07:00:34.663

在 form1 中创建一个公共属性，该属性在 get 中返回一个字符串，使用与循环和字符串构建器相同的逻辑组合字符串。

当您打开 form2 时，调用 form2 的一个接受字符串的方法，例如 SetMessage 并将 form1.Message 传递给您创建的该方法。

这是一种在不使表单依赖于其内部控件的情况下获得所需内容的方法，因此只要您只编辑几个方法/属性，替换控件就不会中断。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T07:00:57.637

在第二个中`form`创建一个方法：

```
public void SetRichTextboxText(string text)
{
     richTextBox1.Text = text;
} 
```

然后在您的第一个表单中添加以下代码：

```
private void button1_Click(object sender, EventArgs e)
 {
     StringBuilder message = new StringBuilder();

     foreach (object selectedItem in listBox1.SelectedItems)
     {
          message.Append(selectedItem.ToString() + Environment.NewLine);
     }

     var form = new Form2();
     form.SetRichTextboxText(message.ToString());
     form.Show(this);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-27T09:01:23.733

在表单 2 中，您必须为富文本框添加消息的属性：

```
private string _message = string.Empty;
    public string message
    {
        get { return _message; }
        set { _message = value; }
    } 
```

在表格 1 中：

```
 private void button1_Click(object sender, EventArgs e)
    {
        StringBuilder message = new StringBuilder();

        foreach (object selectedItem in listBox1.SelectedItems)
        {
           message.Append(selectedItem.ToString() + Environment.NewLine);
        }
        Form2 objForm2 = new Form2();
        objForm2.message = message.ToString();
        objForm2.ShowDialog(); 
```

}

在表单 2 页面加载中：

```
 private void Form2_Load(object sender, EventArgs e)
    {
        richTextBox1.Text = message;
    } 
```

# r - 如何读取多行 fwf 格式，其中行可能流或不流多行

> ID：15105923
> 
> 赞同：1
> 
> 时间：2013-02-27T06:53:44.403
> 
> 标签：r, fixed-width

我从我的一位经纪人那里获得了如下文本文件中的交易报告。我正在尝试解析它以进行一些分析。问题是每条记录都有多行，包括一个聚合行（标有 * 表示 BUY 或 SELL 及下方）。

```
 TRADE   SETTL  AT      BUY            SELL      CONTRACT DESCRIPTION           EX TRADE PRICE CC   DEBIT(DR)/CREDIT
 ------- ------- -- -------------- -------------- ------------------------------ -- ----------- -- --------------------
 11/26/2         F1                            1  JAN 13 SOYBEAN MEAL            01   424.70    US
                                                  ELECTRONIC TRADE
                 F1                            1*                                    COMMISSION US               1.20DR
                 F1                                                     EXCHANGE & CLEARING FEE US                .81DR
                 F1                                                                     NFA FEE US                .02DR
                 F1                                                     TOTAL COMMISSION & FEES US               2.03DR
 11/28/2         F1             1                 DEC 12 SWISS FRANC             16  107.490    US
                                                  ELECTRONIC TRADE
                 F1             1*                                                   COMMISSION US               1.20DR
                 F1                                                     EXCHANGE & CLEARING FEE US                .54DR
                 F1                                                                     NFA FEE US                .02DR
                 F1                                                     TOTAL COMMISSION & FEES US               1.76DR
 11/29/2         F1             2                 MAR 13 NEW COCOA               06    24.61    US
                                                  ELECTRONIC TRADE
                 F1             2*                                                   COMMISSION US               2.40DR
                 F1                                                     EXCHANGE & CLEARING FEE US               4.00DR
                 F1                                                                     NFA FEE US                .04DR
                 F1                                                     TOTAL COMMISSION & FEES US               6.44DR
 12/03/2         F1             1                 DEC 12 IMM EURO FX             16     1.30000 US
                                                  ELECTRONIC TRADE
                 F1             1*                                                   COMMISSION US               1.20DR
                 F1                                                     EXCHANGE & CLEARING FEE US                .54DR
                 F1                                                                     NFA FEE US                .02DR
                 F1                                                     TOTAL COMMISSION & FEES US               1.76DR
 12/07/2         F1                            3  DEC 12 US $ INDEX              13    80.245   US
                                                  ELECTRONIC TRADE
 12/07/2         F1             3                 DEC 12 US $ INDEX              13    80.250   US
                                                  ELECTRONIC TRADE
                 F1             3*             3*                                    COMMISSION US               7.20DR
                 F1                                                     EXCHANGE & CLEARING FEE US               8.10DR
                 F1                                                                     NFA FEE US                .12DR
                 F1                                                     TOTAL COMMISSION & FEES US              15.42DR 
```

目前，我只对聚合信息感兴趣，即其中带有 * 的数量以及下面的字段，即，`CONTRACT DESCRIPTION`以及`BUY`最后一列中指定的值？`SELL``COMMISSION``EXCHANGE AND CLEARING FEES``NFA FEE``TOTAL COMMISSION AND FEES``DEBIT(DR)/CREDIT`

任何指示我该怎么做？

我尝试使用`read.fwf`，但它对我不起作用，因为每条记录的多行格式不同。

最终，如果没有任何效果，我将不得不逐行编写解析器，我目前正试图避免这样做，看看是否可以以更优雅的方式完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T08:42:51.913

由于您的数据按日期分组，因此我对其进行扫描并使用`lapply`.

```
dat <- scan('yourfile_name',what='character')
ids <- c(grep('[0-9]+/[0-9]+/[0-9]',dat),length(dat))
lapply(head(seq_along(ids),-1),function(x)
{
  y <- dat[ids[x]:(ids[x+1]-1)]
  list( desc = paste(y[4:8] ,collapse=' '),
        dd = y[1],
       debit_credit = y[grep('.*DR',y)],
       trde_price = as.numeric(y[grep('[0-9]+[.][0-9]+$',y)])
       )
})
[[1]]
[[1]]$desc
[1] "JAN 13 SOYBEAN MEAL 01"
[[1]]$dd
[1] "11/26/2"
[[1]]$debit_credit
[1] "1.20DR" ".81DR"  ".02DR"  "2.03DR"
[[1]]$trde_price
[1] 424.7

[[2]]
[[2]]$desc
[1] "DEC 12 SWISS FRANC 16"

..... 
```

PS：我丢失了B/S的信息。希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T12:29:02.020

agstudy 的回答看起来很有帮助。我将建议一种替代方法：首先修复 bleeping 输入文件。如果您无法访问源程序并更改输出格式，至少您可以在任何文本编辑器中执行以下操作（甚至，我敢说，MicrosoftWord :-)）。

编辑：下面的建议是倒退的，即您可能只想保留后跟日期字符串的行尾**。**概念是相同的，但修改搜索词以查找 "anything but..." 。对不起，误导。

对段落标记（行尾）进行全局搜索和替换，后跟两位数字和“/”，并用制表符和相同的 2 位数字和“/”替换

在 Word 中，这将是`FIND what ^13([0-9]{2,2}/) REPLACE with ^t\1` ; 支持正则表达式的编辑器会有所不同。现在，您的源文件中的每个日期条目都有一个（较长的）行，您可以轻松提取感兴趣的列。

# c - getchar() 跳过 C 中的所有其他字符

> ID：15105926
> 
> 赞同：0
> 
> 时间：2013-02-27T06:53:53.900
> 
> 标签：c, visual-studio-2012, getchar

我在 C 中完全使用 getchar() 已经有一段时间了。在这种情况下，我试图读取一行并将该行的字符放入一个数组中。然而，在将 getchar() 分配给数组时，它会跳过一些字符。

例如输入“It skips all other”输出是...I\n \nk\np\n \nv\nr\n \nt\ne\n。（ \n 只是代表新行。）

```
int N = 0;

char message[80] = {};

do
{
    message[N] = getchar();
    N++;
    printf("%c\n", message[N-1]);
}
while(getchar() != '\n'); 
```

感谢您抽出宝贵的时间，正如我几乎在任何时候尝试过使用 getchar() 之前所说的，它总是会产生一些意想不到的结果。我不完全理解该函数如何读取字符。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-27T06:58:21.990

您在 while 条件和 do-while 主体内调用 getchar() 两次。

试试这个代码：

```
int N = 0;
#define MAX_SIZE 80

char message[MAX_SIZE] = {};
char lastChar;

do
{
    lastChar = getchar();  
    if (lastChar == '\n')
        break; 
    message[N] = lastChar;
    N++;
    printf("%c\n", message[N-1]);
}
while(N < MAX_SIZE); 
```

更新：添加了对数组最大大小的检查，而不是使用无限的 do-while 循环。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T06:59:40.463

您`getchar()`每次通过循环调用两次。每次调用`getchar()`它都会消耗一个字符。因此，不要调用`getchar()`您的`while( ... )`条件，而是将值`message[N]`与换行符进行比较。

# mysql - 简单加入，每组最多？

> ID：15105933
> 
> 赞同：-1
> 
> 时间：2013-02-27T06:54:07.130
> 
> 标签：mysql, sql, select

假设我有：

```
USERS:
userid | name
1      | John
2      | Jack

HITS:
id | userid | time
1  | 1      | 50
2  | 1      | 51
3  | 2      | 52
4  | 1      | 53
5  | 2      | 54
6  | 2      | 55 
```

如何获得每个用户的前两次点击。换句话说，修改这个：

```
select 
   users.userid,  
   h.time 
from  
   users  
left outer join hits h   
on (users.userid = h.userid) 
```

得到这个：

```
array() {
  [user 1] {
    hit 1 => 50
    hit 2 => 51
  }
  [user 2] {
    hit 3 => 52
    hit 5 => 54
  }
} 
```

?

我知道正常的加入会给我一切，但我如何将其限制为只有 2 次点击，从而有效地获得每个用户的前两次点击？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T07:10:27.837

试试这个查询 -

```
SELECT t.id, t.userid, t.time FROM (
  SELECT h1.*, COUNT(*) pos FROM hits h1
    LEFT JOIN hits h2
      ON h2.userid = h1.userid AND h2.time <= h1.time
  GROUP BY
    h1.userid, h1.time) t
WHERE pos <= 2; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T06:59:22.987

```
SELECT  a.userid, 
        a.name, 
        b.time
FROM    users a
        INNER JOIN hits b
            ON a.userid = b.userid
WHERE 
    (
        SELECT  COUNT(*) 
        FROM    hits as c
        WHERE   b.userid = c.userid and 
                b.id >= c.id
    ) <= 2; 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/c3358/4)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T07:03:25.840

试试这个查询

```
SET @level = 0;
SET @group = '';

SELECT 
*
FROM (
    SELECT 
    time,
    userid,
    @level := IF(@group = userid, @level+1, 1) AS level, 
    @group := userid as UGroup 
    FROM hits
    ORDER BY userid 
) rs
WHERE level < 3 
```

[演示](http://www.sqlfiddle.com/#!2/c3358/6)

# ios - 如何从 PDF 中获取 UIImage

> ID：15105936
> 
> 赞同：1
> 
> 时间：2013-02-27T06:54:12.687
> 
> 标签：ios, pdf, uiimage

网址让我获取 pdf。我需要一个 4 页的 pdf 文件来获取 UIImage，但不是全部，而只是页面的一部分。请告诉我如何使这更容易。感谢您花费的时间![示例](../Images/1c681521d44e7db9a563f863d7506276.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-12-22T23:11:02.460

Stefan Kieleithner 写了一篇名为[Extracting Images from a PDF in Swift](https://pspdfkit.com/blog/2019/extracting-images-from-a-pdf-in-swift/)的博文，展示了如何从 PDF 页面中提取图像。以下代码是 Swift 5 / iOS 12 Playground 页面中呈现的代码的实现：

```
import Foundation
import PDFKit
import MobileCoreServices

func getEmbeddedImages(in pdfPage: PDFPage) -> [UIImage] {
    guard let cgPDFPage = pdfPage.pageRef, let dictionary = cgPDFPage.dictionary else {
        print("Couldn't open page.")
        return []
    }
    var res: CGPDFDictionaryRef?
    guard CGPDFDictionaryGetDictionary(dictionary, "Resources", &res), let resources = res else {
        print("Couldn't get Resources.")
        return []
    }
    var xObj: CGPDFDictionaryRef?
    guard CGPDFDictionaryGetDictionary(resources, "XObject", &xObj), let xObject = xObj else {
        print("Couldn't load page XObject.")
        return []
    }

    //Enumerate all of the keys in `dict', calling the block-function `block' once for each key/value pair.
    var imageKeys = [String]()
    CGPDFDictionaryApplyBlock(xObject, { key, object, _ in
        var stream: CGPDFStreamRef?
        guard CGPDFObjectGetValue(object, .stream, &stream),
            let objectStream = stream,
            let streamDictionary = CGPDFStreamGetDictionary(objectStream) else {
                return true
        }

        var subtype: UnsafePointer<Int8>?
        guard CGPDFDictionaryGetName(streamDictionary, "Subtype", &subtype), let subtypeName = subtype else {
            return true
        }

        if String(cString: subtypeName) == "Image" {
            imageKeys.append(String(cString: key))
        }
        return true
    }, nil)

    let allPageImages = imageKeys.compactMap { imageKey -> UIImage? in
        var stream: CGPDFStreamRef?
        guard CGPDFDictionaryGetStream(xObject, imageKey, &stream), let imageStream = stream else {
            print("Couldn't get image stream.")
            return nil
        }
        var format: CGPDFDataFormat = .raw
        guard let data = CGPDFStreamCopyData(imageStream, &format) else {
            print("Couldn't convert image stream to data.")
            return nil
        }
        guard let image = UIImage(data: data as Data) else {
            print("Couldn't convert image data to image.")
            return nil
        }
        return image
    }

    return allPageImages
} 
```

用法：

```
let fileUrl = Bundle.main.url(forResource: "File", withExtension: "pdf")!
let pdfDocument = PDFDocument(url: fileUrl)!
let pdfPage = pdfDocument.page(at: 0)!
let images = getEmbeddedImages(in: pdfPage)
print(images) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T07:13:01.243

使用此框架将 UIImage 转换为 PDF。

[https://github.com/mindbrix/UIImage-PDF](https://github.com/mindbrix/UIImage-PDF)

# css - 带有链接的按钮在 Firefox 中有效，但在 Chrome 或 Safari 中无效

> ID：15105937
> 
> 赞同：0
> 
> 时间：2013-02-27T06:54:13.823
> 
> 标签：css, button, frontend

所以我知道 StackOverflow 上有很多关于按钮的兼容性问题，但经过几次搜索后我找不到答案。我的索引中有一个 video.html 文件，所以目录不是问题；这适用于 Firefox。但是在 Chrome 或 Safari 中，当我按下按钮时，它会在当前 url 的末尾添加一个 ?#，而不是正确地将其重定向到 video.html。

```
<center><button onclick= "location.href='video.html'"> Create</button> 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T07:08:07.700

试试这个[演示](http://jsfiddle.net/f9nF2/) CSS

```
.btn
{
    background-color: rgb(7, 55, 99);
    color: white;
    border: none;
    cursor: pointer;
    padding: 2px 12px 3px 12px;
    text-decoration: none;

} 
```

HTML

```
<center><a href="video.html" class="btn">Create</a></center> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T06:58:03.350

尝试`<center><button onclick="window.location.href='video.html'"> Create</button>`

如果这不起作用，您的 onclick 属性和第一个引号之间似乎有一个空格，这可能会导致您在 webkit 中的解析错误。

PS - 你使用按钮标签有什么原因吗？由于您所做的只是导航到另一个页面，因此您应该只使用锚标记并使用 CSS 对其进行样式设置。然后你将有一个更可靠、语义化的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T07:04:57.393

我的两分钱值

```
<script>
function video_redirect(video)
{
 top.location.href = video;
}
</script>

<center><button onclick="video_redirect('video.html')"> Create</button> 
```

或者只是在按钮上使用超链接...

```
<center><a href="video.html"><button> Create</button></a> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T07:07:10.793

习惯了一些**空白父顶部的方法**

```
For self:
location.href="video.html";

For blank:
window.open="video.html";

For parent:
parent.location.href="video.html";

For top:
top.location.href="video.html";

For SomeFrame:
parent.SomeFrame.location.href="video.html"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-27T07:08:45.873

这看起来不错，在 Chrome、FF 和 MSIE 中对我来说效果很好。您的问题很可能出在其他地方。也许一些 JS 库正在捕获所有按钮事件？尝试完全隔离偶数，即将那一行代码加载到浏览器中，看看是否有效。如果不是，那是您的本地计算机。

# html - 如何将类似 Grooveshark 的小部件实现为 Facebook 链接？

> ID：15105938
> 
> 赞同：1
> 
> 时间：2013-02-27T06:54:20.820
> 
> 标签：html, facebook, flash, facebook-opengraph, grooveshark

我在 Facebook 上发布了 Grooveshark 的链接，`http://grooveshark.com/s/Toothpaste+Kisses/3gGocy?src=5`并得到了看似正常的结果（链接到另一个页面），但一旦点击，它就会变成这样的 Flash 小部件[（](http://i.imgur.com/i6vwgls.png "Grooveshark 小部件正在播放") SWF 的 URL 是[https://grooveshark.com/facebookWidget。 swf?songID=249422](https://grooveshark.com/facebookWidget.swf?songID=249422)）。

我的问题是*这是如何实现的？* 我知道您可以将各种特殊的 Open Graph 数据添加到页面，但这是公司与 Facebook 进行的某种特殊交易吗？任何人都可以阐明这个谜团，因为理解它会非常有用。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T18:43:19.777

Grooveshark 开发人员在这里。我们与 FB 没有特别优惠。我不记得我们是如何设置这些东西的，但它都是使用开放图。如果您在浏览器中禁用 javascript 重定向并转到您在上面发布的歌曲 URL，然后查看源代码（或仅使用 wget 下载文件），您应该能够看到所有与打开的图形相关的标签。

# c# - 在哪里搜索？

> ID：15105940
> 
> 赞同：0
> 
> 时间：2013-02-27T06:54:24.657
> 
> 标签：c#, search, syntax, text-files

我目前正在做一个涉及文本文件的小型 C# 练习。文本文件的所有内容都是文本文件中每个新行的句子。到目前为止，我能够读取文本并将其存储到字符串数组中。接下来我需要做的是搜索一个特定的词，然后写出包含搜索词/短语的任何句子。我只是想知道我是否应该在while循环或其他地方这样做？

```
String filename = @"sentences.txt";

// File.OpenText allows us to read the contents of a file by establishing
// a connection to a file stream associated with the file.
StreamReader reader = File.OpenText(filename);

if (reader == null)
{
   // If we got here, we were unable to open the file.
   Console.WriteLine("reader is null");
   return;
 }

  // We can now read data from the file using ReadLine.

 Console.WriteLine();

 String line = reader.ReadLine();

  while (line != null)
  {

     Console.Write("\n{0}", line);
     // We can use String.Split to separate a line of data into fields.

     String[] lineArray = line.Split(' ');
     String sentenceStarter = lineArray[0];

     line = reader.ReadLine();

  }
  Console.Write("\n\nEnter a term to search and display all sentences containing it: ");
        string searchTerm = Console.ReadLine();

        String searchingLine = reader.ReadLine();

        while (searchingLine != null)
        {

            String[] lineArray = line.Split(' ');
            String name = lineArray[0];

            line = reader.ReadLine();
            for (int i = 0; i < lineArray.Length; i++)
            {
                if (searchTerm == lineArray[0] || searchTerm == lineArray[i])
                {
                    Console.Write("\n{0}", searchingLine.Contains(searchTerm));
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T07:02:47.230

您可以使用`File`该类使事情变得更容易一些。

要从文本文件中读取所有行，您可以使用`File.ReadAllLines`

```
string[] lines = File.ReadAllLines("myTextFile.txt"); 
```

如果要查找包含单词或句子的所有行，可以使用`Linq`

```
// get array of lines that contain certain text.
string[] results = lines.Where(line => line.Contains("text I am looking for")).ToArray(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T09:33:19.060

**问题：**我只想知道我是否应该在 while 循环内或其他地方执行此操作？
**答：**如果您不想（也不应该）将所有文件内容存储在内存中 - 在 while 循环内。否则，您可以将 while 循环中的每一行复制到`List`or`array`并在其中搜索其他地方（同样，对于大文件，这是非常资源贪婪的方法，不推荐）

个人注意：
您的代码看起来很奇怪（尤其是第二个`while`循环 - 它永远不会执行，因为文件已被读取，`reader`如果您想再次读取文件，则需要重置）。`while`除了写入控制台之外， 第一个循环没有做任何有用的事情......

如果这是真正的代码，你真的应该考虑修改它并使用 LINQ 实现 Matthew Watson 的建议

# authentication - 我可以在 YouTube 中使用 OAuth 2.0 授权来授权特定帐户，而无需用户输入其帐户信息吗？

> ID：15105942
> 
> 赞同：2
> 
> 时间：2013-02-27T06:54:38.847
> 
> 标签：authentication, youtube-api, oauth-2.0, deprecated

我正在尝试实现一个网络服务，其中上传到服务器的视频然后也被上传到我控制下的特定 YouTube 帐户（即我有访问凭据）。由于我有用户名和密码，看来我应该能够使用诸如 ClientLogin 之类的东西来获得将视频上传到该帐户的能力。但是，这种方法已被 Google 弃用，他们建议改用 OAuth 2.0。鉴于这是新开发，我更愿意使用未弃用的 api。显然，尽管每种 OAuth 2.0 身份验证方法都要求用户通过浏览器重定向提供帐户凭据以获得身份验证。这是一个服务器端程序，我不希望用户参与，而且用户无论如何都没有帐户凭据。这应该是谷歌想到的，那么有没有办法使用 OAuth 2.0 进行 ClientLogin 类型身份验证？我希望能够以编程方式完全使用 OAuth 2.0 进行身份验证，而无需用户参与。

我找到了这个答案：从 YouTube ClientLogin 迁移到 OAuth 2.0 [从 YouTube ClientLogin 迁移到 OAuth 2.0](https://stackoverflow.com/questions/10490910/migrating-from-youtube-clientlogin-to-oauth-2-0)

但是，据我所知，作为设备进行身份验证仍然需要用户通过浏览器输入帐户凭据。这个答案到现在已经快一年了，并没有解决问题，所以有人有什么新想法吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T14:22:12.263

在 Web 服务中，用户首次需要通过弹出窗口进行授权。一旦他授予对您应用程序的访问权限，他就不再需要了。

在移动设备中，它是一个弹出栏，他们可以选择他们已经保存的帐户。

作为一个简短的答案，没有解决它，因为这是为了具有更好的安全性而构建的。

# printing - 二维码 ActiveX 控件：打印时控件的位置不同

> ID：15105943
> 
> 赞同：1
> 
> 时间：2013-02-27T06:54:44.057
> 
> 标签：printing, mfc, activex, ondraw, cdc

我曾尝试用谷歌搜索 COleControl、IOleInPlaceSite 等许多键......但我仍然对此一无所知。我知道当activex控件处于非活动状态时，容器不会为activex控件创建窗口！所以 rect 将与 Ondraw 不同！如何使控件在同一个地方？在 ReportViewer 中我可以控制二维码的位置！但是当我将它打印到 PDF 时，它总是在纸的左上角！感谢您的帮助！

```
`
void CQRControlCtrl::OnDraw(CDC* pDC, const CRect& rcBounds, const CRect& rcInvalid)
{
    if(*m_DataText == NULL )
        m_DataText = L"";       

    LPWSTR szText = m_DataText.GetBuffer(m_DataText.GetLength());   

    int nSize = m_qSize;
    int nMargin = m_qMargin;

    BOOL bPrinting = pDC->IsPrinting();

    if (!pDC)
        return;

    double PixelsPermmX = (*pDC).GetDeviceCaps(LOGPIXELSX);
    double PixelsPermmY = (*pDC).GetDeviceCaps(LOGPIXELSY);

    pDC->SetMapMode(MM_ANISOTROPIC);
    pDC->SetWindowExt(48,48);   
    pDC->SetViewportExt(PixelsPermmX,PixelsPermmY); 

    HBITMAP hbitmap = GetHBitmapW(szText, nMargin, nSize, QR_ECLEVEL_M);    

    CBitmap *pBitmap=CBitmap::FromHandle(hbitmap);
    BITMAP bitmap;
    GetObject(hbitmap,sizeof(BITMAP),&bitmap);

    int nHeight = bitmap.bmHeight;
    int nWidth = bitmap.bmWidth;

    CRect rect;
    this->GetRectInContainer(rect);

    CDC MemDC;      
    MemDC.CreateCompatibleDC(pDC);  
    MemDC.SelectObject(pBitmap);    

    pDC->StretchBlt(rect.left,rect.top,nWidth,nHeight,&MemDC,0,0,nWidth,nHeight,SRCCOPY);
}` 
```

# titanium - Django Tastpie 使用 Titanium Appcelerator 发送

> ID：15105944
> 
> 赞同：0
> 
> 时间：2013-02-27T06:54:44.327
> 
> 标签：titanium, titanium-mobile, appcelerator-mobile, tastypie

我的观点 。

```
class EventRVSPResource(ModelResource):
event      = fields.ForeignKey(EventResource, 'event')
created_by = fields.ForeignKey(UserResource, 'created_by')  
class Meta:
    queryset = EventRsvp.objects.all()
    authorization = Authorization()
    resource_name = 'eventrvsp'
    filtering = {
        'event':ALL_WITH_RELATIONS,
        'created_by': ALL,

    } 
```

但是使用 curl 发送数据工作正常。它显示 201

```
curl --dump-header - -H "Content-Type: application/json" -X POST --data '{"created_by": "/mobapp/api/v1/user/1/","event": "/mobapp/api/v1/eventlist/5/","notes": "Going","past_status": "DG","status": "Y"}' http://192.168.1.8:9000/mobapp/api/v1/eventrvsp/ 
```

我对 django-tastypie 的 Http 请求。但它仍然显示错误。我不知道它有什么问题

```
var url = "http://192.168.1.8:9000/mobapp/api/v1/eventrvsp/";
 var client = Ti.Network.createHTTPClient({
     // function called when the response data is available
     onload : function(e) {
         Ti.API.info("Received text: " + this.responseText);
         alert('success');
     },
     // function called when an error occurs, including a timeout
     onerror : function(e) {
         Ti.API.debug();
         alert(e.error);
     },
     timeout : 5000  // in milliseconds
 });
 // Prepare the connection.
 client.open("POST", url);
 // Send the request.
 client.send({"created_by": "/mobapp/api/v1/user/1/","event": "/mobapp/api/v1/eventlist/4/","notes": "Going","past_status": "DG","status": "Y"}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T17:38:48.257

问题是您需要将标头“content-type”设置为“application/json”并使用 JSON.stringify

你可以在这里找到参考：http: [//django-tastypie.readthedocs.org/en/latest/interacting.html#creating-a-new-resource-post](http://django-tastypie.readthedocs.org/en/latest/interacting.html#creating-a-new-resource-post)

**注意：总是放在before`setRequestHeader`之后`open``send`**

```
 var data = JSON.stringify({created_by:"/mobapp/api/v1/user/1/",event:"/mobapp/api/v1/eventlist/5/",notes:"Going",past_status:"DG",status:"Y"});
.
.
.
.
.

    client.open("POST", url);
client.setRequestHeader("Content-Type", "application/json");  
client.send(data); 
```

# php - 将视频添加为收藏的逻辑。

> ID：15105947
> 
> 赞同：1
> 
> 时间：2013-02-27T06:54:57.163
> 
> 标签：php, mysql, html

假设我有一个允许用户观看视频的网站。我想实现用户可以单击视频旁边的按钮并将其“收藏”或将其标记为“收藏”并将收藏列表显示给特定用户的功能。当用户退出网站并在另一天返回时，他标记的那些视频将在他的收藏夹中

我该如何实现这一目标。请帮助，因为我是编码新手。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T07:05:42.923

创建一个名为 的新表`favorites`。在此表中有列 id、user、video。

字段“id”将是该表的主键。字段用户应包含用户 ID（如果您不创建用户表，则来自您应该拥有的用户表）。此外，视频列应仅包含视频的参考 ID，并有另一个包含视频的表格。

当用户单击“添加到收藏夹”时，您的脚本应该从会话变量或数据库中检索用户 ID，以及视频 ID。然后只需将这些与 INSERT 一起存储到您的`favorites`表中。

要向用户展示最喜欢的视频列表，只需 SELECT * FROM `favorites`WHERE `user_id`= $user_id;

注意：您可以通过会话变量或数据库使用当前登录的用户 ID 填充 $user_id，以存储您的会话数据为准。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T06:56:53.450

[在Junction 表](http://en.wikipedia.org/wiki/Junction_table)中添加一个条目，其中一列是用户的 id，另一列是视频的 id。

# php - Dropbox Api putFile php 发送文件失败

> ID：15105948
> 
> 赞同：0
> 
> 时间：2013-02-27T06:54:57.487
> 
> 标签：php, dropbox, dropbox-api, dropbox-php

我正在尝试使用[http://www.dropbox-php.com/将文件发送到 Dropbox](http://www.dropbox-php.com/)

Dropbox-PHP 答案：`Forbidden. This could mean a bad OAuth request, or a file or folder already existing at the target location.`

我已经发送了一个请求，只是为了测试，我尝试获取帐户信息。成功。我得到关于我的帐户的信息。

接下来，我尝试获取有关我将发送的文件的元数据。`No such file.`

我得到的元数据其他文件。

是什么导致了问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T10:31:30.223

它可能是请求的**路径**。尝试从**路径**的开头删除斜杠“ **/** ” 。

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T01:50:01.690

看起来您使用的 API 已损坏。

这是一个简单的 Dropbox-PHP 示例：

[https://github.com/hawaiianchimp/Dropbox-PHP-API](https://github.com/hawaiianchimp/Dropbox-PHP-API)**

# php - ASP.net 和 PHP 的成本、要求和区别

> ID：15105953
> 
> 赞同：-2
> 
> 时间：2013-02-27T06:55:19.420
> 
> 标签：php, asp.net

与PHP相比，运行asp.net有什么要求和成本？ASP.net 框架是免费的，我猜公司的 Visual Studio 需要花钱和 Windows Server；除此之外，还有其他费用吗？

asp.net 是否更适合更大的项目？ASP.net 是面向对象的，但 PHP 真的是面向对象的吗？就安全性而言，ASP 或 PHP 哪个更安全？

我对网络编程有点陌生，所以尽量保持答案简单。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T07:28:37.603

两者都适用于更大的项目，而且都是安全的。但这两件事取决于您雇用的程序员或团队。你可以看看[这里](http://en.wikipedia.org/wiki/Programming_languages_used_in_most_popular_websites)。

ASP 是完全面向对象的，只能用 OOPS 概念编写。PHP 可以用面向对象和过程方式编写。PHP 最初实现时是一种过程语言，但后来获得了 OOPS 原则。这就是为什么。

PHP 是一种开源语言。它对社区免费，并且随处可见大量教程和示例。ASP.net 是免费的框架，但需要 Web 服务器和操作系统成本。

# sql - SQL查询找出办公室的进出时间

> ID：15105954
> 
> 赞同：1
> 
> 时间：2013-02-27T06:55:19.147
> 
> 标签：sql, sql-server

对于 DATABASE 人来说，这可能是个愚蠢的问题，但对我来说，这非常困难，因为这是我第一次看到 DATABASE ..我不是 DATABASE 人，但我必须这样做。

我在 SQL SERVER 2005 中有 DATABASE，并且有一个 VIEW 包含与办公室中员工进出相关的数据。

![在此处输入图像描述](../Images/42e414b294bceaed945a1be47586ff3d.png)

在特定日期一天可能有超过 2 个条目，但我们认为一天中的第一个条目是在办公室的时间，最后一个条目是办公室的外出时间，在这之间，这些员工可以外出任何不时间，但我们只考虑一天中的第一次和最后一次进入。

所以我必须为此写QUERY ...

**编辑 ：**

视图中的列列表还有一些其他的列，但我认为没有必要在这里描述..

*   卡号
*   姓
*   名
*   中间名
*   个人身份证件
*   日期
*   时间
*   YMD
*   HMS
*   卡号
*   部门

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T06:59:30.943

试一试[`group by`。](http://www.w3schools.com/sql/sql_groupby.asp)

```
Select employeeID, Date,
    MIN(Time) as InTime, 
    MAX(Time) as OutTime
FROM Transactions
GROUP BY employeeID, Date 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T05:17:18.113

现在我正在使用该查询：

```
SELECT FirstName,LastName,CardNumber,Department, Date , MIN(Time) AS intime , MAX(Time) AS outtime ,
convert(varchar(8),(convert(datetime,MAX(Time),110) - convert(datetime,MIN(Time),110)),108) AS Duration
FROM CARDENTRYEXITTRANSACTIONVIEW
GROUP BY FirstName, Date,LastName,CardNumber,Department 
```

它给出了完美的结果............

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T07:39:13.823

您可以使用[ROW_NUMBER()](http://msdn.microsoft.com/en-us/library/ms186734%28v=sql.105%29.aspx)排名函数来确定第一次和最后一次进入

```
 ;WITH cte AS
 (                             
  SELECT *, ROW_NUMBER() OVER(PARTITION BY PersonalID ORDER BY [Date] ASC, [Time] ASC) AS rnASC,
            ROW_NUMBER() OVER(PARTITION BY PersonalID ORDER BY [Date] DESC, [Time] DESC) AS rnDESC
  FROM dbo.your_tableName
  )
  SELECT *
  FROM cte
  WHERE rnASC = 1 OR rnDESC = 1 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/72ef0/2)上的简单示例[](http://sqlfiddle.com/#!3/72ef0/2)

 **或将选项与[EXISTS](http://msdn.microsoft.com/en-us/library/ms188336%28v=sql.105%29.asp)运算符一起使用

```
SELECT *
FROM dbo.your_tableName t1
WHERE EXISTS (
              SELECT 1
              FROM dbo.your_tableName t2
              WHERE t1.PersonalID = t2.PersonalID
              HAVING (t1.[Date] = MAX(t2.[Date]) AND t1.[Time] = MAX(t2.[Time]))
                OR (t1.[Date] = MIN(t2.[Date]) AND t1.[Time] = MIN(t2.[Time]))
              ) 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/2f4c3/1)上的简单示例[](http://sqlfiddle.com/#!3/2f4c3/1)**

# spring - Togglz 与 Spring @Configuration bean

> ID：15105964
> 
> 赞同：5
> 
> 时间：2013-02-27T06:56:13.470
> 
> 标签：spring, togglz

我正在尝试使用 @Configuration bean 而不是 XML 来实现 Togglz & Spring。我不确定如何配置 Configuration bean 的返回类型。例如：

```
@Configuration
public class SystemClockConfig {

    @Bean
    public SystemClock plainSystemClock() {
        return new PlainSystemClock();
    }

    @Bean
    public SystemClock awesomeSystemClock() {
        return new AwesomeSystemClock();
    }

    @Bean
    public FeatureProxyFactoryBean systemClock() {
        FeatureProxyFactoryBean proxyFactoryBean = new FeatureProxyFactoryBean();
        proxyFactoryBean.setActive(awesomeSystemClock());
        proxyFactoryBean.setInactive(plainSystemClock());
        proxyFactoryBean.setFeature(Features.AWESOME_SYSTEM_CLOCK.name());
        proxyFactoryBean.setProxyType(SystemClock.class);
        return proxyFactoryBean;
    }
} 
```

该`systemClock`方法返回 a`FeatureProxyFactoryBean`但此 bean 的客户端需要 a `SystemClock`。当然，编译器对此感到非常震惊。

我想它只在使用 XML 配置时才有效。使用配置 bean 时我应该如何处理它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T07:40:17.207

我不是 Spring 的 Java Config 配置风格的专家，但我猜你的`systemClock()`方法应该返回一个使用 FeatureProxyFactoryBean 创建的代理。像这样的东西：

```
@Bean
public SystemClock systemClock() {
    FeatureProxyFactoryBean proxyFactoryBean = new FeatureProxyFactoryBean();
    proxyFactoryBean.setActive(awesomeSystemClock());
    proxyFactoryBean.setInactive(plainSystemClock());
    proxyFactoryBean.setFeature(Features.AWESOME_SYSTEM_CLOCK.name());
    proxyFactoryBean.setProxyType(SystemClock.class);
    return (SystemClock) proxyFactoryBean.getObject();
} 
```

但我不确定这是否是将 FactoryBeans 与 Spring Java Config 一起使用的常用方法。

# java - 如何使用 REST 服务处理客户端-服务器应用程序中的错误？

> ID：15105968
> 
> 赞同：2
> 
> 时间：2013-02-27T06:56:39.933
> 
> 标签：java, jquery, ajax, rest, exception-handling

**问题**

1) 使用 REST 服务时如何处理客户端-服务器应用程序中的错误？有人可以用示例代码帮助我什么是处理下面代码中的错误消息的最佳方法。例如，在创建服务的情况下，如何在客户端和/或服务器端捕获异常？

2）如果发生错误和成功，如何将用户转发到不同的页面？

* * *

**客户**

```
 $('#btnSignup').click(function(){ 
            var user = {"id": 10, "firstName": $('#firstName').val(), "lastName":       $('#lastName').val(), "age": 69, "freeText": "55555", "weight": 55};

            $.ajax({
            type: "POST",
            contentType: "application/json",
            url: "http://localhost:8080/test/webresources/entity.user/",
            dataType: "json",
            data: JSON.stringify(user),

            success: function(response) {
               $('#myModal').modal('hide');
            },
            error: function(data) {
                alert('addUser error: ');
            }
        });

    }); 
```

**休息服务**

```
@Stateless
@Path("entity.user")

public class UsersFacadeREST extends AbstractFacade<Users> {
@PersistenceContext(unitName = "testPU")
private EntityManager em;

public UsersFacadeREST() {
    super(Users.class);
}

@POST
@Override
@Consumes({"application/xml", "application/json"})
public void create(Users entity) {
    super.create(entity);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T07:26:47.600

只是我的 2 美分 那么你可以定义一个 Result Object ，你可以在每次休息后返回它

```
Class Result{
   private String statusCode;
   private String statusDescription;

} 
```

在豆子里

```
@POST
@Override
@Consumes({"application/xml", "application/json"})
@Produces({ "application/json"})
public Result create(Users entity) {
  Result result = new Result();
  try{
    super.create(entity);
   result.setStatus("200");
   result.setStatusDescriptions("Success");
   }catch(Exception) {
        result.setStatus("500");
        result.setStatusDescriptions("Fail");
   }

  return result;  // Return this as Json 
} 
```

您可以稍后使用 jquery 解析 HTML 中的响应并根据“状态”处理流程

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T07:45:26.870

1）在服务器端创建自己的 RESTException。

2) 每当您响应该异常时；在 HTTP 标头中添加该异常消息。

3) 在 HTTP 协议中，使用服务器端异常的标头中可用的 errorCode && errorMessage 并在客户端对其进行解码，以在客户端显示有关该异常的有意义的数据。

```
HTTP Status: 500 - Internal Server Error
Response Headers:
Date=Wed, 09 Jan 2013 13:41:15 GMT
Server=Apache/2.2.17 (Unix) mod_ssl/2.2.17 OpenSSL/0.9.8e-fips-rhel5 mod_jk/1.2.28

errorCode=4567
errorMessage=invalid conference passcode

Accept-Charset=big5, big5-hkscs, compound_text, euc-jp, euc-kr, gb18030, gb2312, gbk,      ibm-thai, ibm00858, ibm01140, ibm01141, ibm01142, ibm01143, ibm01144, ibm01145, ibm01146, ibm874, x-ibm875, x-ibm921, x-ibm922, x-ibm930, x-ibm933, x-ibm935, x-ibm937, x-ibm939, x- x-windows-50221, x-windows-874, x-windows-949, x-windows-950, x-windows-iso2022jp
Content-Length=6406
Connection=close
Content-Type=application/xml
Response Body:
4567: invalid conference passcode
com.xxx.exceptions.InvalidPasscodeException invalid conference passcode
    at com.xxx.dao.impl.context.multipleconfs.ResLessConfDao.validatePasscode(ResLessConfDao.java:754)
    at 
```

下面是用 C# 客户端代码向服务器发送请求的示例；这有错误处理机制。

```
 public static bool sendRequest(string requestURL, HTTPRequestMethod requestMethod,
        NetworkCredential m_netCred, String xml, ErrorResponse m_objErrorResponse)
    {
        try
        {
            HttpWebRequest request = WebRequest.Create(requestURL) as HttpWebRequest;
            request.PreAuthenticate = true;
            request.Credentials = m_netCred;
            request.Method = requestMethod.ToString();
            request.AllowAutoRedirect = false;
            request.ReadWriteTimeout = 100000;
            request.ContentLength = xml.Length;
            request.ContentType = "application/xml; encoding='utf-8'";
            Debug.WriteLine("XML: {0}", xml);
            StreamWriter postStream = new StreamWriter(request.GetRequestStream(), System.Text.Encoding.ASCII);
            postStream.Write(xml);
            postStream.Close();
            WebResponse response = request.GetResponse();
            response.Close();
        }
        catch (WebException webex)
        {
            var response = webex.Response as HttpWebResponse;
            int errCode = 0;
            if (response != null)
            {
                errCode = (int)response.StatusCode;
                Debug.WriteLine("HTTP Status Code: " + (int)response.StatusCode);
                if ((int)response.StatusCode != 500) //Other errors
                {
                    m_objErrorResponse.UpdateErrorResponse(errCode.ToString(), response.StatusCode.ToString(), "");
                }
                else
                {
                    m_objErrorResponse.UpdateErrorResponse(errCode.ToString(), response.StatusCode.ToString(),
                        response.Headers.ToString().Split('\n')[1].Substring(14).Trim());
                }
            }
            return false;
        }
        return true;
    }
} 
```

[Spring MVC REST 异常处理第 1 部分](http://www.stormpath.com/blog/spring-mvc-rest-exception-handling-best-practices-part-1)
[Spring MVC REST 异常处理第 2 部分](http://www.stormpath.com/blog/spring-mvc-rest-exception-handling-best-practices-part-2)

# javascript - 如何在 django ajax 更新中返回 json 字典

> ID：15105974
> 
> 赞同：6
> 
> 时间：2013-02-27T06:56:56.990
> 
> 标签：javascript, python, ajax, django, json

我多次问这个问题，因为我没有收到任何适用的帮助。

我的问题是我不知道如何将查询结果作为 ajax 响应返回到模板。

我这样做了：

```
if request.path == "/sort/":
    sortid = request.POST.get('sortid')
    locs = Location.objects.order_by(sortid)
    if request.is_ajax():
        return HttpResponse(locs,mimetype="application/json") 
```

然后我的ajax`done`函数这样做：

```
}).done(function(data){
$('.sortierennach').html(data);
}); 
```

现在发生的是它只是替换了的内容`.sortierennach`，它没有渲染 django dic，所以我可以这样做：

```
{% for loc in locs %}
  {{loc.name}}
{% endfor %} 
```

有人可以帮助我...非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T07:11:00.373

您需要将对象列表导出到 JSON 字典。

```
if request.path == "/sort/":
    sortid = request.POST.get('sortid')
    locs = Location.objects.order_by(sortid)
    if request.is_ajax():
        import json
        return HttpResponse(json.dumps(locs), mimetype="application/json") 
```

但是，这将需要您使用某种类型的客户端模板系统。

更好的方法是使用 Django 的`render_to_response`快捷方式。您实际上并不“需要”使用 JSON 进行响应。您可以使用字符串响应请求。

我通常为 AJAX 驱动的东西创建两个模板。第一个是部分模板，它仅包含我希望在 AJAX 更新期间更新的特定 HTML 位。第二种是包装器，可以在视图正常调用时使用。

一个便宜的例子，这是我的 object_list.html：

```
<ul id='object-list'>
    {% for object in object_list %}
        <li>{{ object.value }}</li>
    {% endfor %}
</ul> 
```

这是我的base.html：

```
<html>
<title>Example</title>
    <body>
        {% include 'object_list.html' %}
    </body>
</html> 
```

对于视图，您需要这样做：

```
from django.shortcuts import render_to_response
from django.template import RequestContext

from models import Location

def view(request):
    locs = Location.objects.order_by(sortid)
    if request.is_ajax():
        return render_to_response('object_list.html', {'object_list': locs}, context_instance=RequestContext(request))
    return render_to_response('base.html', {'object_list': locs}, context_instance=RequestContext(request)) 
```

这让我们可以通过标准 GET 或通过 XHTTP 请求正常调用视图，只返回您想要更新的部分 HTML。便利！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T07:10:38.860

如果您首先尝试在 ajax 函数中填充值，则需要将 queryset 对象转换为 json 对象，例如

```
if request.path == "/sort/":
    sortid = request.POST.get('sortid')
    locs = Location.objects.order_by(sortid)
    if request.is_ajax():
        locs = json.dumps(locs)
        return HttpResponse(locs,mimetype="application/json") 
```

现在在您的 ajax 代码中，您将收到 json 数据。

因此，通过使用此 locs 数据，您可以在 Ajax 中生成您的 html，或者您可以做任何您想做的事情。

# compilation - 错误 4 错误 C2440：“正在初始化”：无法从“void *”转换为“char *”

> ID：15105980
> 
> 赞同：0
> 
> 时间：2013-02-27T06:57:09.793
> 
> 标签：compilation

我试图编译它并得到了错误，例如：

```
Error   4   error C2440: 'initializing' : cannot convert from 'void *' to 'char *' 
```

此代码取自[此处](http://www.rohitab.com/discuss/topic/29190-memory-scanningediting/)。为什么它不起作用？

```
DWORD dwRead=0;

char *lpData = (VOID*)GlobalAlloc(GMEM_FIXED, MAX_READ), 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T07:01:23.283

您似乎正在使用 C++ 编译器进行编译，因此您需要显式转换：

```
char *lpData = (char *)GlobalAlloc(GMEM_FIXED, MAX_READ); 
```

# ipad - 将 UISplitViewController 的方向固定为横向

> ID：15105982
> 
> 赞同：0
> 
> 时间：2013-02-27T06:57:16.210
> 
> 标签：ipad, orientation, uisplitviewcontroller

我正在将 uisplitView 控制器的方向固定为代码中的横向，但它没有显示它隐藏该视图的 detailView 控制器是否有一种方法可以强制为此只横向进行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T12:29:52.307

使用 UISplitViewControllers、UINavigationControllers 和 UITabBars 检查此示例项目： [https ://github.com/alexth/TBSV](https://github.com/alexth/TBSV)

# python - 在 cgi python 脚本中以编程方式查找内存限制？

> ID：15105983
> 
> 赞同：0
> 
> 时间：2013-02-27T06:57:18.397
> 
> 标签：python, memory, cgi

使用大内存对象，想知道是否有办法检查一个 python CGI 进程从脚本中分配了多少内存？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T07:26:58.203

如果您使用的是 UNIX 机器，则可以尝试资源文档中的信息。不确定您到底想要什么，但 resource.RLIMIT_STACK 或 resource.RLIMIT_DATA (heap) 可能是您正在寻找的。

[http://docs.python.org/2/library/resource.html](http://docs.python.org/2/library/resource.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T07:04:38.977

不太可能有标准的方法来做到这一点。如果该值不在环境中，则无法以编程方式找到它。脚本如何运行（服务器、模块...）？

# asp.net - ASP.NET 中的 UserControl src 更改

> ID：15105989
> 
> 赞同：1
> 
> 时间：2013-02-27T06:57:55.960
> 
> 标签：asp.net, .net, user-controls

我有一个 index.aspx 页面

```
<AHD_MPC:AHDMainPageControl1 id="AHDControl" runat="server">
                </AHD_MPC:AHDMainPageControl1> 
```

并定义/加载相同。

```
 <%@ Register Src="UserControl/AHDControl1.ascx" TagName="AHDMainPageControl1" TagPrefix="AHD_MPC" %> 
```

在第一次加载时 AHDControl1.ascx 将被加载。现在我在 index.aspx 页面上有一个按钮....单击该按钮我想在同一位置加载 AHDControl2.ascx 并从该位置隐藏/销毁 AHDControl1.ascx ....除了 CSS 显示/隐藏选项，任何其他方式来做到这一点......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T07:00:43.503

`Visible = true`实例化页面上的两个控件，使用;启动 Control1 和 Controle2 与`Visible = false`. 当您想要切换可见性时，请在与`button_Click`事件相关的代码中执行此操作。

# jquery - JQuery 文件版本冲突

> ID：15105998
> 
> 赞同：0
> 
> 时间：2013-02-27T06:58:35.903
> 
> 标签：jquery

我在我的项目中广泛使用 JQuery。最初用于 razor webgrid 中的内联编辑，用于在编辑、更新等之后隐藏和显示文本框。为此，我参考了 jquery 文件 jquery-1.8.3.js。之后，我实现了用于显示消息的 JQuery 对话框。为此，我参考了另一个版本的 JQuery。但是现在的问题是我的项目中有很多 JQuery 文件，这会减慢页面的加载速度，并且由于版本差异，如果一种功能有效，另一种功能将不起作用。请任何人帮助解决以下问题。

1.  我在哪里可以找到最新的 JQuery 文件？
2.  旧版本的所有功能都适用于新版本吗？
3.  我如何知道旧版本中的一项功能在新版本中有效？
4.  在 MVC 中，为了减少加载时间，我如何引用 JQuery 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T07:01:02.017

1.  [http://jquery.com/download/](http://jquery.com/download/)
2.  是的，他们中的大多数人应该这样做。
3.  测试您使用的功能，而不是测试所有功能。
4.  只需加载一个版本而不是多个版本，并使用缩小版本。

另请检查[jQuery 对向后兼容性的支持有多好？](https://stackoverflow.com/questions/281438/how-good-is-jquerys-backward-compatibility)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T07:17:00.873

试试看 -

```
<script language="javascript" type="text/javascript">
    var $jq = jQuery.noConflict();
</script> 
```