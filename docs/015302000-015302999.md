# StackOverflow 问答 15302000-15302999

# jquery - jQuery Validate Plugin - 在错误消息中显示最小长度“要运行的字符”

> ID：15302005
> 
> 赞同：1
> 
> 时间：2013-03-08T19:43:35.537
> 
> 标签：jquery, jquery-validate, validation

我正在使用[jQuery Validate Plugin](http://docs.jquery.com/Plugins/Validation)来验证我网站上的表单。我想更改默认`minlength`消息以显示字段中仍需要的字符数，并且此数字会随着用户在`input`字段中键入而更改。

例如，如果`minlength`规则是 15 个字符，并且字段中有 2 个字符，则错误消息将显示为`"Please enter at least 13 more characters."`

为了简单起见，这是我的 jQuery。**下面的所有代码放在一起时都不能按预期运行，所以我需要一个可以工作的解决方案**

这是小提琴：http: [//jsfiddle.net/ac2T2/1/](http://jsfiddle.net/ac2T2/1/)

这是我的代码：

```
$('#contactForm').validate({
    rules: {
        contactName: {
            minlength: 15
        }
    }
}); 
```

我想添加一些执行以下操作的代码：

```
var numOfCharactersToGo = 15 - parseInt($('contactName').val().length); 
```

然后理论上我可以更改我的默认 jQuery 消息，`minlength`如下所示：

```
jQuery.extend(jQuery.validator.messages, {
    minlength: jQuery.validator.format('Please enter at least ' + numOfCharactersToGo + ' more characters.')
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T21:55:46.840

感谢@Sparky 的回答将我引向正确的方向，这是最终答案，以防其他人想要相同的功能。

这是小提琴：http: [//jsfiddle.net/ZhRGA/8/](http://jsfiddle.net/ZhRGA/8/)

**HTML**

```
<form id="myform">
    <input type="text" name="field1" id="field1" />
    <br/>
    <input type="submit" />
</form> 
```

**jQuery**

```
$(document).ready(function () {
var minChar = 15;
    $('#myform').validate({ // initialize the plugin
        rules: {
            field1: {
                required: true,
                minlength: minChar
            }
        },
        messages: {
            field1: {
                minlength: function () {
                    return [
                        (minChar - parseInt($('#field1').val().length)) +
                        ' more characters to go.'];

                }
            }
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T20:02:02.063

如果不使用内置方法进行此类更改，则无法动态更改`rules`或在表单上初始化插件之后。`messages`

我知道只有一种方法可以在初始化后*动态*覆盖任何规则和消息。[方法](http://docs.jquery.com/Plugins/Validation/rules#.22add.22rules)就是[这样`rules('add')`](http://docs.jquery.com/Plugins/Validation/rules#.22add.22rules)。

```
$('#field').on('keyup', function () {  
    current = 15 - parseInt($(this).val().length);
    $(this).rules('add', {
        minlength: 15,
        messages: {
            minlength: current + " characters to go"
        }
    });
}); 
```

您需要在`keyup`事件处理函数或您用于动态计算字符的任何函数中调用上述内容。该演示很粗糙，有一些问题需要克服，但它表明它是*可能*的。

**非常粗鲁的演示：http: [//jsfiddle.net/ZhRGA/5/](http://jsfiddle.net/ZhRGA/5/)**

# c++ - 我不明白为什么这段代码不会打开文件

> ID：15302007
> 
> 赞同：0
> 
> 时间：2013-03-08T19:43:45.070
> 
> 标签：c++, file, qt, user-interface, qfile

我不知道为什么这段代码不能打开文件，请帮忙。我尝试了很多不同的东西，但没有任何效果。我不相信它甚至打开文件？

这是main.cpp

```
#include "communicate.h"

int main(int argc, char *argv[])
{
  QApplication app(argc, argv);

  Communicate window;

  window.setWindowTitle("Communicate");
  window.show();
  return app.exec();
} 
```

这是我的标题。

```
using namespace std;
class Communicate : public QWidget
{
   Q_OBJECT

  public:
   Communicate(QWidget *parent = 0);

  //private slots:
  //void onenter();
  //void OnMinus();

  private:
    QFile namefile;
    QTextStream file;
    QString name;
    QLabel *label;
    QTextEdit *left;
    QTextEdit *right;
    QLineEdit *user;

};

#endif 
```

这是主window.cpp

```
#include "communicate.h"
Communicate::Communicate(QWidget *parent)
    : QWidget(parent),namefile("pname.txt"),file(&namefile)
{

  QPushButton *enter = new QPushButton("enter", this);
  enter->setGeometry(205, 205, 90, 35);

  //QPushButton *minus = new QPushButton("-", this);
  //minus->setGeometry(50, 100, 75, 30);

  label = new QLabel("money: 500", this);
  label->setGeometry(105, 0, 90, 30);

  left = new QTextEdit(this);
  left ->setGeometry(0,0,100,200);

  right = new QTextEdit(this);
  right ->setGeometry(200,0,100,200);   

  user = new QLineEdit(this);
  user ->move(0,205);
  user ->resize(200,35);

  name=file.readLine();
  right->setText(name);
  label->setText(name);
  namefile.close();
  //connect(enter, SIGNAL(clicked()), this, SLOT(onenter()));
  //connect(minus, SIGNAL(clicked()), this, SLOT(OnMinus())); 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T19:53:29.307

It doesn't open the file. You must open the file yourself, then create your `QTextStream` and pass it the opened file. Like this:

```
if (!file.open(QIODevice::ReadOnly | QIODevice::Text))
     return;

 QTextStream in(&file);
 name = file.readLine(); 
```

Your textstream needn't be a class member since you're only using it in the constructor. You can read all about using `QFile` and `QTextStream` here. [http://qt-project.org/doc/qt-4.8/qfile.html](http://qt-project.org/doc/qt-4.8/qfile.html)

# grails - 如何使用 gsp 模板创建文本文件？

> ID：15302009
> 
> 赞同：2
> 
> 时间：2013-03-08T19:43:48.000
> 
> 标签：grails, plugins, groovy, io

我过去曾使用过[Grails 渲染插件](http://grails.org/plugin/rendering)，在创建 PDF 方面取得了很大成功。现在抛出我想创建一个简单的文本文件，使用 gsp。我喜欢使用模型来定义如何将信息插入模板的便利性。我意识到我不需要渲染文本文件，但是有没有类似的方法可以使用模板来创建一个普通的文本文件？

如何使用 Grails 渲染插件渲染 jpg 的示例：（注意模型使用）

```
 def bytes = gifRenderingService.render(template: '/images/coupon', model: [serial: 12345])
// Render to a file
    new File("coupon.jpg").withOutputStream { outputStream ->
        jpegRenderingService.render(template: '/images/coupon', model: [serial: 12345])
    } 
```

如果没有像上面示例这样的简单方法，因为我的信息来自多个域类，我是否应该`<g>`在我的 gsp 模板中创建根据所需条件提取的标签？如果是这种情况..我如何将变量从我的服务插入到我的 gsp 模板中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T21:35:54.687

你可以看看`grails.gsp.PageRenderer`实用程序类。它允许您将 .gsp 模板呈现为`String`：

```
String gspOutput = groovyPageRenderer.render(view: '<your view>.gsp', model: [ modelObj1: ... ]) 
```

...或直接到 a `Writer`or `OutputStream`：

```
groovyPageRenderer.renderTo(view: '<your view>.gsp', model: [ modelObj1: ... ], <writer or OS>) 
```

Much more detail can be found here: [http://mrhaki.blogspot.com/2012/03/grails-goodness-render-gsp-views-and.html](http://mrhaki.blogspot.com/2012/03/grails-goodness-render-gsp-views-and.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T19:57:37.127

要将模板呈现为文本文件，您应该将响应的内容类型设置为 text/plain

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T20:01:28.240

我认为您只需使用 <g> 标签等将您的文本模板创建为标准模板，然后在 contentType 为“text/plain”的模板上调用标准 grails render() 函数。不需要插件？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-05T16:30:05.107

Add the following code to the GSP file

```
<%@page contentType="text/plain"%> 
```

# mysql - 如何在 MySQL 数据库中创建复合键

> ID：15302011
> 
> 赞同：6
> 
> 时间：2013-03-08T19:43:57.860
> 
> 标签：mysql, composite-key, composite-primary-key

我正在使用 mysql server.where 我创建了一个名为 question 的表。该表的列/属性是（课程，主题，年份，问题）我想创建一个主键（或复合键）由（课程+主题+年份）组成。即对于特定的课程+学科+年份组合，只能有一个问题。（课程+学科+年份）的组合将只有一行，无法创建另一行。我做到了：

```
primary key(course,subject,year); 
```

但它不起作用。我仍然可以使用相同的课程、主题、年份组合创建两行。

谁能告诉我如何创建复合键属性？？？？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-09-16T06:33:00.953

语法是**`CONSTRAINT constraint_name PRIMARY KEY(col1,col2,col3)`**例如::

`CONSTRAINT pk_PersonID PRIMARY KEY (P_Id,LastName)`

如果您在创建表时编写上面的示例，则上面的示例将起作用，例如::

```
CREATE TABLE person (
   P_Id int ,
   ............,
   ............,
   CONSTRAINT pk_PersonID PRIMARY KEY (P_Id,LastName)
); 
```

要将此约束添加到现有表，您需要遵循以下语法

```
ALTER TABLE table_name ADD CONSTRAINT constraint_name PRIMARY KEY (P_Id,LastName) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-08T19:53:55.710

如果您正在查看的是 mysql，您应该执行类似的操作

```
ALTER TABLE table_name ADD PRIMARY KEY (a, b, c); 
```

# scala - Scala 玩国际化：如何在所有模板中设置显式语言

> ID：15302012
> 
> 赞同：1
> 
> 时间：2013-03-08T19:44:10.947
> 
> 标签：scala, internationalization, playframework-2.0

我已经阅读了文档：[http](http://www.playframework.com/documentation/2.1.0/ScalaI18N) ://www.playframework.com/documentation/2.1.0/ScalaI18N 和这篇文章： [i18n 错误：控制器和模板使用不同的隐式语言](https://stackoverflow.com/questions/9733082/i18n-error-controller-and-templates-uses-different-implicit-languages?answertab=active#tab-top) ，从如果有隐式请求，则请求标头。在我的应用程序中，我需要根据某种逻辑（不依赖于请求标头中的语言）设置所有模板的语言。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T19:53:23.953

Yes, you need to add an extra implicit argument in your view like this:

```
@(form:Form[_])(implicit lang:play.api.i18n.Lang) 
```

Then in your controller you add a line like this:

```
// this retrieves the language from the configuration, 
// replace it with your own logic
implicit val defaultLang = Lang.availables.headOption.getOrElse(Lang.defaultLang) 
```

# google-analytics - 升级到新的异步 Google Analytics 代码 - 你应该这样做吗？

> ID：15302013
> 
> 赞同：1
> 
> 时间：2013-03-08T19:44:18.240
> 
> 标签：google-analytics, tracking

我曾在某处读过，现在忘记了升级到新的异步代码将无法跟踪用户停留在同一页面上时下载项目的实际点击次数，并且无法跟踪您需要使用旧版本的 GA 代码。

我的问题是，情况仍然如此吗？是否有人有其他理由不升级以使用较新的异步跟踪？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T02:53:05.957

嗯...您确定 GA 的“旧”版本会自动跟踪下载吗？AFAIK GA 从未自动跟踪下载链接，您总是必须自己将 GA 代码（如`_trackEvent`调用）附加到您的链接。但无论如何，自己做起来很容易，所以这真的没什么大不了的。另外，升级后你会得到很多好处，而且有一天它甚至可能不是坚持使用旧版本的选择......

如果你有 jQuery，你可以这样做：

```
// file types you want to consider a download
var downloadFileTypes = ['pdf','doc','docx','mp4']; 
$(document).ready(function() {
  $('a').filter(function() {
    var ext = $(this).attr('href').split('.').pop().toLowerCase();
    return ( $.inArray(ext, downloadFileTypes )>-1 );
    })
    .click(function() {
    _gaq.push(['_trackEvent', 'Downloads', $(this).attr('href')]);
  });
}); 
```

如果您没有像 jQuery 这样的框架，您仍然可以`.getElementsByTagName()`使用常规循环和条件而不是像`.filter`和`.inArray`

编辑：关于该示例的一些注意事项：

*   jQuery 代码是将 GA 代码挂钩到标准链接的示例，这些链接指向您在`downloadFiletypes`. 它仅适用于代码执行时存在的链接。如果您有可能稍后在页面上动态生成的链接，请考虑查看`.on()`而不是`.click()`
*   如果它们不指向带有扩展名的常规文件，则需要对要考虑下载的匹配链接进行调整。例如，一些网站有一个控制器脚本，它需要一个带有 ID 的参数，并且它动态地提供一个 pdf 或其他文件。如果你的文件是这样的，你将不得不改变逻辑来寻找它。

# erlang - Erlang：混合列表：seq 与模式匹配

> ID：15302015
> 
> 赞同：0
> 
> 时间：2013-03-08T19:44:20.800
> 
> 标签：erlang

我再次需要你的帮助。我想知道是否可以在模式匹配中使用 lists:seq(from,to) ？下面是我试图实现的代码

```
product_selling_price_evaluate(lists:seq(1100,1190),standard_produce,Costprice) -> Costprice*10;
product_selling_price_evaluate(lists:seq(1200,1300),standard_produce,Costprice) -> Costprice*20;
product_selling_price_evaluate(lists:seq(1400,1500),standard_produce,Costprice) -> Costprice*30;
product_selling_price_evaluate(lists:seq(1600,1700),standard_produce,Costprice) -> 40*Costprice. 
```

当我编译代码时，它给了我一个非法模式错误！

示例输入是

```
selling_price:product_selling_price_evaluate(1100,standard_produce,10). 
```

我希望它找到第一个作为匹配项并将输出作为

```
100 
```

list:seq 是否适用于案例？

让我用更简单的方式解释一下。我有以下情况

```
1100 to 1190   = Apples
1200 to 1300   = Oranges
1400 to 1500   = Bananas
1600 to 1700   = Berries 
```

如果我将输入设为 1125，我希望输出为 Apples。同样，如果我将输入设为 1450，我希望输出为香蕉。我希望你们明白，我想要实现什么！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T20:13:46.447

如果我正确地解释了您要达到的目标，那么您可能正在寻找的是警卫。

像这样的东西（未经测试）：

```
product_selling_price_evaluate(N,standard_produce,Costprice) when N >= 10 andalso N <= 20 -> Costprice*10; 
product_selling_price_evaluate(N,standard_produce,Costprice) when N >= 21 andalso N <= 30 -> Costprice*20;
[...] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T20:01:36.983

您没有提供所需的输入，您的函数需要一个 list([11001,1101, 1102,...,1189,1190]) 作为其第一个参数，而您提供的是一个数字，即 1100。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T14:05:42.580

守卫可以用逗号分隔（，），它的含义相同`andalso`。

```
product_selling_price_evaluate(N,standard_produce,Costprice)
    when 10 =< N, N =< 20 -> Costprice*10; 
product_selling_price_evaluate(N,standard_produce,Costprice)
    when 21 =< N, N =< 30 -> Costprice*20;
... 
```

`<=`在这里是非法的，请`=<`改用。

# objective-c - 尝试转换为 NSInteger * 和 NSMutableArray * 时出错

> ID：15302017
> 
> 赞同：-1
> 
> 时间：2013-03-08T19:44:26.023
> 
> 标签：objective-c, arrays, cocoa-touch, cocoa

我是obj c的新手。所以我有一个简单的问题。我有一个 NSInteger 值的矩阵。它被称为“curBoard”。我想用值“curStep”更新（x，y）坐标处的值。我有一个错误“算术类型为 void 的操作数......”

我究竟做错了什么 ？

```
[curBoard replaceObjectAtIndex:x withObject:(NSMutableArray *)[[curBoard objectAtIndex:x] replaceObjectAtIndex:y withObject:(NSInteger *)[NSNumber numberWithInt:curStep]]]; 
```

**更新：**

```
NSMutableArray *board; 
board = [NSMutableArray new]; 
for(NSInteger i = 0; i<boardSize; i++) { 
    NSMutableArray *row = [NSMutableArray new]; 

    for(NSInteger j = 0; j < boardSize; j++) 
        [row addObject:(NSInteger *)[NSNumber numberWithInt:0]]; 
        [board addObject:row]; 
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T20:14:42.703

这`withObject:(NSInteger *)[NSNumber numberWithInt:curStep]]`部分是导致问题的原因。如果你存储为 NSNumber 对象，你应该只使用：

```
... withObject:[NSNumber numberWithInt:curStep]] 
```

**编辑：** 从上面发布的代码中，您应该将其添加为：

```
[row addObject:[NSNumber numberWithInt:0]]; 
```

NSInteger 不是指针类型，您应该使用 NSNumber 本身添加到数组中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T09:21:57.977

Objective-C 基本上只是一堆绑定到 C 的对象语法。整体效果就像将喷气背包绑在马上：有时这两个部分并不能很好地协同工作。在这种情况下，当你真的应该打开油门时，你会告诉马头晕目眩来试图跑得更快。

`NSMutableArray`是喷气背包的一部分——它是一个 Objective-C 对象，仅用于处理 Objective-C 对象的数组。但`NSInteger`它是马的一部分——它是一个原始的 C 整数类型，而不是一个真实的对象。*

我知道`NSInteger`它像一个类一样大写，并且有一个`NS`像类一样的前缀，但它实际上是 C 的产物。你可以自己确认这一点——在 Xcode 中输入 Cmd-O，然后在弹出的“快速打开”对话框中输入“NSInteger”，然后您将能够跳转到它的定义。在我当前的 Mac 项目中，这是`typedef long NSInteger;`; `long`是原始 C 类型之一。

`NSNumber`存在是为了弥合两者。它是一个专门设计用于在其中保存 C 数字类型的对象。既然`NSNumber`是一个对象，`NSMutableArray`其他Objective-C的东西都可以处理它。

但是你不能只在`NSNumber`and之间转换`NSInteger`。`NSNumber`里面有一个`NSInteger`，但这并不意味着它实际上就是一个`NSInteger`本身。如果你把一个三明治放在一个塑料袋里，你就不能吃这个袋子。

相反，您必须使用`NSNumber`'`+numberWithInteger:`方法来构造`NSNumber`，并`-integerValue`从中取出整数。（`+numberWithInt:`并且`-intValue`通常会起作用，但是对于非常大的值，它们的行为可能会有所不同，具体取决于您的应用程序是在 32 位还是 64 位处理器上运行。）实际上，现在您可以说`[NSNumber numberWithInteger:foo]`as `@(foo)`，这要短得多。 **

所以当你添加一个数字时，你应该说：

```
[row addObject:@(0)]; 
```

当你以后想要那个号码回来时，你会想说：

```
n = [[row objectAtIndex:y] integerValue]; 
```

`-replaceObjectAtIndex:withObject:`错误是另一回事。`-replaceObjectAtIndex:withObject:`根本不返回任何内容，因此您不能将其用作参数。幸运的是，在这种情况下您不需要这样做。`-replaceObjectAtIndex:withObject:`不创建新数组；它改变了已经在里面的数组`[curBoard objectAtIndex:x]`，所以你不需要做任何事情`curBoard`。相反，您可以只写：

```
[[curBoard objectAtIndex:x] replaceObjectAtIndex:y withObject:@(curStep)]; 
```

* * *

* 您实际使用`NSInteger *`的是 ，略有不同。这`*`意味着“指向”，`NSInteger *`指向原始整数的指针也是如此。这有点像`NSNumber *`，指向`NSNumber`对象的指针，因此编译器允许您对其进行强制转换。

请注意，转换指针不会转换指针另一端的数据；它只是使编译器以不同的方式解释相同的数据。如果您实际上尝试使用`NSInteger *`指针来获取数据，您将获得垃圾数据或（由于太大而无法容纳此余量）崩溃。

但是，在这种情况下，一旦绝地欺骗了编译器，让编译器认为 value 是指向 an 的指针`NSInteger`，你就会尝试将它传递给 to `-addObject:`。`-addObject:`需要一个指向对象的指针，因此编译器不愿将指针传递给 an `NSInteger`。

** 只要您使用~~的是 iOS 6 SDK~~ Xcode 4.4 或更高版本，即使您实际在较旧的 iOS 上运行该应用程序，此语法也将有效。它还会自动`+numberWithWhatever:`为您使用正确的方法，因此您不必担心选择最好的方法。当您使用类似 的数字文字`0`时，括号是可选的，但当您使用变量或常量时，它们是必需的。当然，如果你愿意，你仍然可以用罗嗦的方式来做，但现在已经没有什么意义了。

# java - 如何编写测试类来测试我的代码？

> ID：15302020
> 
> 赞同：8
> 
> 时间：2013-03-08T19:44:36.350
> 
> 标签：java, arraylist, bluej

我想要一个测试类来测试这个类，但我不知道如何编写它，我试图在网上看到但我仍然无法弄清楚。我在 BlueJ 上编写了代码，我正在尝试创建设置游戏。

```
import java.util.*;

public class Deck
{
    ArrayList<Card> deck;
    public Deck ()
    {
         deck = new ArrayList<Card>();
    }

     public Deck (int capacity)
    {
        deck = new ArrayList<Card>(capacity);
    }

    public int getNumCards ()
    {
        return deck.size();
    }

    public boolean isEmpty () 
    {
        return deck.isEmpty();
    }

    public void add (Card card) 
    {
        deck.add(0,card);
    }

    public Card takeTop() 
    {
        return deck.remove(0);
    }

    public void shuffle ()
    {
        Collections.shuffle(deck);
    }

    public void sort ()
    {
        Collections.sort(deck);
    }

    public String toString ()
    { 
         return (deck.toString()+ "\n");
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-08T19:50:34.843

首先你需要决定你需要为你的类编写哪些测试用例，一旦你手头有测试用例列表，你就可以使用像 Junit 这样的库来创建测试用例。

下面是几个 Junit 方法的示例

```
import static org.junit.Assert.assertEquals;

import org.junit.AfterClass;
import org.junit.BeforeClass;
import org.junit.Test;

public class MyClassTest {

  MyClass tester;

  @BeforeClass
  public static void testSetup() {
    tester = new MyClass();
  }

  @AfterClass
  public static void testCleanup() {
    // Do your cleanup here like close URL connection , releasing resources etc
  }

  @Test(expected = IllegalArgumentException.class)
  public void testExceptionIsThrown() {        
    tester.divide(1000, 0);
  }

  @Test
  public void testMultiply() {
    assertEquals("Result", 50, tester.multiply(10, 5));
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T19:54:01.083

Use a testing framework like Junit, see the sample below,

```
 public class ThingTester extends TestCase
{
    public ThingTester (String name) 
    {
        super (name);
    }

    public static void main(String[] args) 
    {
        TestRunner.runAndWait(new TestSuite(ThingTester.class));
    }

    public void testGetName() throws Exception 
    {
        String fileSpec = new String("c:xxxyyyzzz.txt");
        assertEquals("zzz.txt", getName(fileSpec));
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T19:48:49.837

您需要创建将测试您的类的功能的主要方法。

```
public static void main(String args[])
{
    //To do
} 
```

例如，在您的主要方法中，您需要构造一个 Card 对象（假设您有 Card 类）。

```
Card card = new Card(); 
```

然后，您还需要构造一个 Deck 对象，您可以使用该对象调用 Deck 类的方法，例如将卡片添加到 Deck

```
Deck deck = new Deck(); 
```

使用deck对象调用add方法将卡片添加到Deck

```
deck.add(card); 
```

所以现在你的主要方法应该是这样的：

```
public static void main(String args[])
{
   Card card = new Card();
   Deck deck = new Deck();
   deck.add(card);
} 
```

同样在您的 Deck 课程中，我建议使用`List<Card> deck = new ArrayList<Card>();` 而不是`ArrayList<Card> deck = new ArrayList<Card>();`.

希望这能给你一个起点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T19:54:03.797

I think I didn't understand what you want, but I will give my suggestion here any way.

Where is Card class?

Add this method in your Deck class, compile your code and execute.

> ```
> public static void main(String[] args) {
>     Deck deck = new Deck();
>     // Call your methods here and do what do you want...
> } 
> ```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-11T03:24:34.343

如果您在 Blue Jay 中，您只需右键单击该类，然后在弹出窗口的底部，将有一个“创建测试类”选项。使用它可以简化流程。下面我提供了一个 Blue Jay 创建的示例。

```
import static org.junit.Assert.*;
import org.junit.After;
import org.junit.Before;
import org.junit.Test;

/**
 * The test class TestOfClass2Test.
 *
 * @author  (your name)
 * @version (a version number or a date)
 */
public class TestOfClass2Test
{
    /**
     * Default constructor for test class TestOfClass2Test
     */
    public TestOfClass2Test()
    {
    }

    /**
     * Sets up the test fixture.
     *
     * Called before every test case method.
     */
    @Before
    public void setUp()
    {
    }

    /**
     * Tears down the test fixture.
     *
     * Called after every test case method.
     */
    @After
    public void tearDown()
    {
    }
} 
```

# python - 如何调试 Python 内存故障？

> ID：15302027
> 
> 赞同：11
> 
> 时间：2013-03-08T19:44:54.340
> 
> 标签：python, debugging, memory, lxml

*编辑：非常感谢您在寻找错误方面的帮助 - 但由于它可能很难找到/重现，任何一般的调试帮助也将不胜感激！帮我帮自己！=)*

*编辑2：缩小范围，注释掉代码。*

*编辑 3：似乎 lxml 可能不是罪魁祸首，谢谢！完整的脚本在[这里](http://pastebin.com/iar4MhY6)。我需要仔细阅读它以寻找参考。他们看起来怎么样？*

**编辑 4：实际上，脚本在这部分**停止（100%） 。*`parse_og` *所以编辑 3 是错误的 - 它一定是 lxml 不知何故。**

 ****编辑 5 主要编辑：正如下面大卫罗宾逊和 TankorSmash 所建议的那样，我发现了一种`data`将`lxml.etree.HTML( data )`在疯狂循环中发送的内容。（我不小心忽略了它，但发现我的罪已被赎回，因为我已经付出了额外两天调试的代价！;) [一个有效的崩溃脚本在这里。](http://pastebin.com/0kCPQz3N) [（还提出了一个新问题。）](https://stackoverflow.com/questions/15367001/how-to-prevent-lxml-etree-html-data-from-crashing-on-certain-type-of-data)***

> 编辑 6：原来这是 lxml 2.7.8 及以下版本的错误（至少）。[更新到 lxml 2.9.0](ftp://xmlsoft.org/libxml2/)，并且错误消失了。[还要感谢这个后续问题](https://stackoverflow.com/questions/15367001/how-to-prevent-lxml-etree-html-data-from-crashing-on-certain-type-of-data)的好人。

我不知道如何调试我遇到的这个奇怪的问题。下面的代码可以正常运行大约五分钟，这时 RAM 突然完全填满（在 100% 期间从 200MB 到 1700MB - 然后当内存已满时，它进入蓝色等待状态）。

这是由于下面的代码，特别是前两行。这是肯定的。但这是怎么回事？什么可以解释这种行为？

```
def parse_og(self, data):
    """ lxml parsing to the bone! """
    try:
        tree = etree.HTML( data ) # << break occurs on this line >>
        m = tree.xpath("//meta[@property]")

        #for i in m:
        #   y = i.attrib['property']
        #   x = i.attrib['content']
        #   # self.rj[y] = x  # commented out in this example because code fails anyway

        tree = ''
        m = ''
        x = ''
        y = ''
        i = ''

        del tree
        del m
        del x
        del y
        del i

    except Exception:
        print 'lxml error: ', sys.exc_info()[1:3]
        print len(data)
        pass 
```

![在此处输入图像描述](../Images/f0da7d0389b554d3c2824773ac82814b.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T17:58:42.930

您可以尝试[使用 GDB 进行低级 Python 调试](http://grapsus.net/blog/post/Low-level-Python-debugging-with-GDB)。Python解释器或lxml库中可能存在错误，如果没有额外的工具很难找到它。

当 CPU 使用率达到 100% 时，您可以中断在 gdb 下运行的脚本并查看堆栈跟踪。它可能有助于理解脚本内部发生的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T23:06:36.847

这一定是由于一些参考资料使文件保持活力。必须始终小心 xpath 评估的字符串结果。我看到您已分配`None`给`tree`和`m`但未分配给`y`,`x`和`i`。

你也可以分配`None`给`y`,`x`和`i`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-09T16:32:20.373

在尝试追踪内存问题时，工具也很有帮助。我发现[guppy](http://guppy-pe.sourceforge.net/)是一个非常有用的 Python 内存分析和探索工具。

由于缺乏好的教程/文档，它不是最容易上手的，但是一旦你掌握了它，你会发现它非常有用。我使用的功能：

*   远程内存分析（通过套接字）
*   用于图表使用的基本 GUI，可选择显示*实时数据*
*   用于在 Python shell 中探索数据使用的强大且一致的接口*

# c# - Response.Write 处的 NullReferenceException

> ID：15302028
> 
> 赞同：-4
> 
> 时间：2013-03-08T19:44:54.437
> 
> 标签：c#, asp.net, nullreferenceexception, response.redirect

```
protected void Btnlogin_Click(object sender, EventArgs e)
{
    BLL.Bll Bll = new BLL.Bll();
    String Result = Bll.Login(TBNomelog.Text, TBPasslog.Text);
    String UserID = Bll.UserID(TBNomelog.Text);
    Session ["IDutil"] = UserID;
    Response.Write(Session["IDultil"].ToString());

    if (Result.Equals("True"))
    {
        MultiView1.ActiveViewIndex = 2;
    }
    else
    {
        MultiView1.ActiveViewIndex = 1;
    }
} 
```

}

当我执行 Response.Write 时，我收到“NullReferenceException 未被用户代码处理”，为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T19:47:21.597

您正在尝试使用另一个键从会话对象中读取，而不是在上面的行中写入（“IDutil”不等于“IDultil”）

```
Session ["IDutil"] = UserID;
Response.Write(Session["IDultil"].ToString()); // Session["IDultil"] will be null 
```

# java - JBoss 和 ActiveMQ 之间挂起的 Socket.read() 线程

> ID：15302029
> 
> 赞同：8
> 
> 时间：2013-03-08T19:44:54.533
> 
> 标签：java, multithreading, sockets, jboss, activemq

给定

*   我的 Java 应用程序是部署到 JBoss (4.0.4GA) 的 WAR
*   发布和订阅 ActiveMQ (5.6.0) 实例
*   Java 应用程序使用 Apache Camel (2.10.3) 与 ActiveMQ 进行所有集成（生产和消费）
*   JBoss 和 ActiveMQ 在自己的（CentOS 5.6 Final）四核虚拟服务器上，每个虚拟在不同的物理上

我有一个线程挂起问题，并且在我的线程转储中看到以下内容：

```
java.net.SocketInputStream.socketRead0(Native Method)
java.net.SocketInputStream.read(SocketInputStream.java:129)
java.io.BufferedInputStream.fill(BufferedInputStream.java:218)
java.io.BufferedInputStream.read1(BufferedInputStream.java:258)
java.io.BufferedInputStream.read(BufferedInputStream.java:317)
sun.net.www.http.HttpClient.parseHTTPHeader(HttpClient.java:687)
sun.net.www.http.HttpClient.parseHTTP(HttpClient.java:632)
sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1195)
java.net.HttpURLConnection.getResponseCode(HttpURLConnection.java:379)
org.springframework.remoting.httpinvoker.SimpleHttpInvokerRequestExecutor.validateResponse(SimpleHttpInvokerRequestExecutor.java:146)
org.springframework.remoting.httpinvoker.SimpleHttpInvokerRequestExecutor.doExecuteRequest(SimpleHttpInvokerRequestExecutor.java:66)
org.springframework.remoting.httpinvoker.AbstractHttpInvokerRequestExecutor.executeRequest(AbstractHttpInvokerRequestExecutor.java:136)
org.springframework.remoting.httpinvoker.HttpInvokerClientInterceptor.executeRequest(HttpInvokerClientInterceptor.java:192)
org.springframework.remoting.httpinvoker.HttpInvokerClientInterceptor.executeRequest(HttpInvokerClientInterceptor.java:174)
org.springframework.remoting.httpinvoker.HttpInvokerClientInterceptor.invoke(HttpInvokerClientInterceptor.java:142)
org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
$Proxy117.SigmaCruxer(Unknown Source)
com.tms.SigmaClient.SigmaClient.processMessage(SigmaClient.java:46)
com.tms.SigmaClient.SigmaServiceEndpoint.doSigma(SigmaServiceEndpoint.java:29)
com.tms.SigmaClient.SigmaServiceEndpoint.mark(SigmaServiceEndpoint.java:43)
sun.reflect.GeneratedMethodAccessor193.invoke(Unknown Source)
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
java.lang.reflect.Method.invoke(Method.java:597)
org.apache.camel.component.bean.MethodInfo.invoke(MethodInfo.java:329)
org.apache.camel.component.bean.MethodInfo$1.proceed(MethodInfo.java:231)
org.apache.camel.component.bean.BeanProcessor.process(BeanProcessor.java:169)
org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:104)
org.apache.camel.component.bean.BeanProcessor.process(BeanProcessor.java:74)
org.apache.camel.impl.ProcessorEndpoint.onExchange(ProcessorEndpoint.java:102)
org.apache.camel.impl.ProcessorEndpoint$1.process(ProcessorEndpoint.java:72)
org.apache.camel.impl.converter.AsyncProcessorTypeConverter$ProcessorToAsyncProcessorBridge.process(AsyncProcessorTypeConverter.java:50)
org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:78)
org.apache.camel.processor.SendProcessor$2.doInAsyncProducer(SendProcessor.java:114)
org.apache.camel.impl.ProducerCache.doInAsyncProducer(ProducerCache.java:284)
org.apache.camel.processor.SendProcessor.process(SendProcessor.java:109)
org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:78)
org.apache.camel.processor.DelegateAsyncProcessor.processNext(DelegateAsyncProcessor.java:98)
org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:89)
org.apache.camel.management.InstrumentationProcessor.process(InstrumentationProcessor.java:69)
org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:78)
org.apache.camel.processor.DelegateAsyncProcessor.processNext(DelegateAsyncProcessor.java:98)
org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:89)
org.apache.camel.processor.interceptor.TraceInterceptor.process(TraceInterceptor.java:99)
org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:78)
org.apache.camel.processor.RedeliveryErrorHandler.processErrorHandler(RedeliveryErrorHandler.java:318)
org.apache.camel.processor.RedeliveryErrorHandler.process(RedeliveryErrorHandler.java:209)
org.apache.camel.processor.DefaultChannel.process(DefaultChannel.java:305)
org.apache.camel.processor.UnitOfWorkProcessor.process(UnitOfWorkProcessor.java:102)
org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:78)
org.apache.camel.processor.DelegateAsyncProcessor.processNext(DelegateAsyncProcessor.java:98)
org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:89)
org.apache.camel.management.InstrumentationProcessor.process(InstrumentationProcessor.java:69)
org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:104)
org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:85)
org.apache.camel.component.jms.EndpointMessageListener.onMessage(EndpointMessageListener.java:91)
org.springframework.jms.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:560)
org.springframework.jms.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:498)
org.springframework.jms.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:467)
org.springframework.jms.listener.AbstractPollingMessageListenerContainer.doReceiveAndExecute(AbstractPollingMessageListenerContainer.java:325)
org.springframework.jms.listener.AbstractPollingMessageListenerContainer.receiveAndExecute(AbstractPollingMessageListenerContainer.java:263)
org.springframework.jms.listener.DefaultMessageListenerContainer$AsyncMessageListenerInvoker.invokeListener(DefaultMessageListenerContainer.java:1058)
org.springframework.jms.listener.DefaultMessageListenerContainer$AsyncMessageListenerInvoker.executeOngoingLoop(DefaultMessageListenerContainer.java:1050)
org.springframework.jms.listener.DefaultMessageListenerContainer$AsyncMessageListenerInvoker.run(DefaultMessageListenerContainer.java:947)
java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
java.lang.Thread.run(Thread.java:662) 
```

根据这两篇文章：（[这里](http://javaeesupportpatterns.blogspot.com/2011/08/javanetsocketinputstreamsocketread0.html)和[这里](http://javaeesupportpatterns.blogspot.com/2011/04/javanetsocketinputstreamsocketread0.html)），我的 JBoss 应用程序有一个阻塞 I/O 操作`Socket.read()`，正在等待来自下游服务提供者（在我的例子中是 ActiveMQ）的完整响应。同样，根据这些文章，罪魁祸首是以下三项之一：

*   ActiveMQ 处于不健康/不稳定状态，响应太慢，导致我的监听/等待/阻塞线程挂起；或者
*   ActiveMQ 实例本身很好，但是正在处理一个需要很长时间才能完成的操作（写入 KahaDB 等），再次导致我的线程挂起；或者
*   我的 JBoss 应用程序 (WAR) 和我的 ActiveMQ 实例之间存在网络问题。

我试图弄清楚这三个中的哪一个是这种情况。该线程转储中是否有任何内容表明它是哪一个？我的*理解*（在阅读了那些文章之后）是*真正的*挂起是客户端（阻塞）套接字刚刚没有收到它需要考虑响应完成的所有字节。意味着它没有收到来自 ActiveMQ 的*任何*响应，或者它只是没有收到完整的响应。

所以我问：

1.  是否有明确的迹象表明这三种情况中的哪一种是这种情况？如果是这样，是什么/为什么？如果没有，我的下一步*应该*是什么（我也是设置 ActiveMQ 的“管理员”，所以我可以完全访问它以及 JBoss 和部署到它的 WAR）。
2.  升级到更新的 JBoss 会解决这个问题吗？也许 4.0.4GA 正在使用“旧”（阻塞）Java I/O，而新版本可能使用 NIO？可能是一个长镜头，但还不能抹黑它。
3.  两篇文章都强调应该实施正确的套接字超时配置，这可以很好地缓解所有这些问题（尽管它没有解决底层的 ActiveMQ 无响应和/或网络问题）：
    1.  这是我将在我的 Java 代码中编写的超时吗？如果是这样，如何以及使用什么 API？JMS? 一些 ActiveMQ 客户端 jar？
    2.  这是我在操作系统级别实现的超时吗？如果是这样，我不确定如何进行...
    3.  这是我在服务器端（ActiveMQ）实现的超时吗？如果是这样，怎么做？

我想我正在接近解决方案，但有点卡住并且很难通过树木看到森林。提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T10:54:53.180

我对 JBoss（和 Glassfish）和 ActiveMQ 有一些经验，但我以前从未使用过 Camel（但我对 Mule 很熟悉，我读到的类似）。

您的堆栈跟踪看起来像是 Camel 试图将 ActiveMQ（跟踪底部的 JMS-stuff）链接到 Web 端点（跟踪顶部的 HTTP-stuff）。

我对骆驼在哪里运行（CamelContext）有点困惑。您说您有两台虚拟机，一台用于 JBoss，一台用于 ActiveMQ。在我的例子中，我们使用我们的 ActiveMQ 在机器上运行 Mule ESB。你的骆驼在哪里跑？

您的堆栈跟踪看起来最像第一篇文章中的问题 #1。就好像骆驼部分无法“看到”网络端点。检查您的 WAR 是否已正确部署，以及您的 Web 端点 (WSDL) 在两个虚拟机中是否可见。检查您的端点；也许一个设置为 localhost 或其他东西，这将不允许它到达另一台机器。

很难判断这是不完整的阅读还是完全无法阅读。有数据通过吗？Web 服务器可能会慢慢过载并且无法跟上请求（并且像您的错误一样饿死一些线程）。当您响应缓慢或请求很多时，套接字超时变得很重要；如果您可以创建一个简单的测试（快速且请求很少），那么您至少可以验证您是否具有基本连接。什么数据输入（测试）导致了这个错误？

考虑到更多的输入，我很乐意尝试改进这个答案。（对不起，我会尝试对您的问题发表评论，但我认为我还没有代表...）

# postscript - 连接和 4-up Postscript 文件

> ID：15302034
> 
> 赞同：1
> 
> 时间：2013-03-08T19:45:10.890
> 
> 标签：postscript

我有一个包含 79 个单页 PS 文件的目录。它们是用 gnuplot 制作的。我想打印它们，但是——由于它们的体积——需要在一张纸上放几个。理想情况下，我希望每面 4 个（每张 8 个）。

我试过了：

```
a2ps -4 -o output.ps *.ps 
```

（也尝试过`--file-align=virtual`）

其尾部写着：

```
[plot_Viscount_Hamilton.csv.ps (ps, delegated to PsNup): 5 pages on 2 sheets]
[plot_Viscount_Reidhaven.csv.ps (ps, delegated to PsNup): 5 pages on 2 sheets]
[plot_William_Gibson_Graig_M_P_.csv.ps (ps, delegated to PsNup): 5 pages on 2 sheets]
[Total: 312 pages on 78 sheets] saved into the file `output.ps' 
```

但`output.ps`包含一个四部分页面，其中左上象限包含原始 PS 文件之一（其他三个象限为空）。

我也尝试过使用 pstops 和 psjoin，但并没有走得太远。有什么建议吗？

PS：为了把它放在上下文中，我的数据流是这样的：

ABC Notation `==Lisp Program==>`Lisp 对象模型中的源文件`==Other Lisp Program==>`CSV 文件`==gnuplot==>`PS 文件`== ?? ==>`组合 PS 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T07:53:41.237

我认为`a2ps`有困难，因为它本身不处理后记，而是使用*委托*程序。因此，它将 postscript 文件本质上视为图像，并将文件（带有一些小包装）或多或少地直接插入其输出中。`a2ps`确实在漂亮的打印源代码上大放异彩，但是已经“渲染”的 ps 文档的串联和 N-up 合成有点超出了它的适当范围，IMO。*这是这项*工作的错误工具。

制作 4up 版本的 postscript 文件的工具是其中`psnup`的一部分，我在[这里](http://www.novell.com/documentation/suse91/suselinux-adminguide/html/ch06s08.html)`psutils`找到了一个不错的链接。

* * *

呃。我猜给定的错误输出清楚地显示了我上面“猜测”的内容。该链接详细介绍，但我将在这里进行总结。您需要控制 1 页文档`ps2ps`在被送入`psnup`.

# c# - C# WebClient 与 fidler2 （单独的结果）

> ID：15302036
> 
> 赞同：2
> 
> 时间：2013-03-08T19:45:12.433
> 
> 标签：c#, wpf, json, webclient, fiddler

所以我只是想用`WebClient`. 当我按原样运行程序时，即使我睡觉并等待，我也会得到一个空字符串结果。但是，当我打开 Fiddler2 时，程序可以工作......我所要做的就是打开 Fiddler......这是相关代码。

```
public partial class MainWindow : Window
{
    public  ObservableCollection<question>  questions { get; set; }

    public MainWindow() 
    {
        questions = new ObservableCollection<question>();
        this.DataContext = this;

        InitializeComponent();
    }

    void wc_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
    {
        MessageBox.Show(e.Result); //Right here is the difference. When 

        <BREAK POINT HERE OR IT BREAKS>

        string data = data = e.Result.Substring(e.Result.IndexOf("class=\"question-summary narrow\"") + 31);
        string content = data.Substring(0, data.IndexOf("class=\"question-summary narrow\""));
        string v, a, t, b, tgs, link;
        questions.Add(new question
            {
                //votes = v,
                //answers = a,
                //title = t.ToUpper(),
                //body = b,
                ////tags = tgs
                //href = link
             });
    }

    private void button1_Click(object sender, RoutedEventArgs e)
    {
        WebClient wc = new WebClient();
        wc.DownloadStringAsync(new Uri(@"http://api.stackoverflow.com/1.1/questions"));
        wc.DownloadStringCompleted += new DownloadStringCompletedEventHandler(wc_DownloadStringCompleted);
    }
}
public class question
{
    public string votes { get; set; }
    public string answers { get; set; }
    public string title { get; set; }
    public string body { get; set; }
    public string tags { get; set; }
    public string href { get; set; }
} 
```

另外值得注意的是提琴手结果当我在浏览器中加载[http://api.stackoverflow.com/1.1/questions](http://api.stackoverflow.com/1.1/questions)时提琴手显示

获取[http://api.stackoverflow.com/1.1/questions](http://api.stackoverflow.com/1.1/questions) 200 确定（应用程序/json）

和

获取[http://api.stackoverflow.com/favicon.ico](http://api.stackoverflow.com/favicon.ico) 503 服务不可用（文本/html）

当我在我的程序中加载它时，虽然只有这个显示

获取[http://api.stackoverflow.com/1.1/questions](http://api.stackoverflow.com/1.1/questions) 200 确定（应用程序/json）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T20:42:06.103

看起来问题出在 API 本身。即使您没有告诉它您接受 GZipped 内容，它仍然是 GZipping 它，显然 Fiddler 会为您处理并解压缩它。在您的应用程序中，您必须通过解压缩内容来解决此问题。这是一个如何做到这一点的简单示例：

```
var wc = new WebClient();
var bytes = wc.DownloadData(new Uri(@"http://api.stackoverflow.com/1.1/questions"));
string responseText;
using (var outputStream = new MemoryStream())
{
    using (var memoryStream = new MemoryStream(bytes))
    {
        using (var gzip = new GZipStream(memoryStream, CompressionMode.Decompress))
        {
            byte[] buffer = new byte[1024];
            int numBytes;
            while ((numBytes = gzip.Read(buffer, 0, buffer.Length)) > 0)
            {
                outputStream.Write(buffer, 0, numBytes);
            }
        }
        responseText = Encoding.UTF8.GetString(outputStream.ToArray());
    }
}

Console.WriteLine(responseText); 
```

不管它是否总是 GZipped，谁知道——你可以检查 Content-Encoding HTTP 标头以查看它是否是`gzip`，如果是，则运行此代码，如果不是，则可以将字节直接转换为文本。

# powershell - PowerShell 使用 DataSet 替换文件文本

> ID：15302037
> 
> 赞同：0
> 
> 时间：2013-03-08T19:45:21.093
> 
> 标签：powershell, powershell-3.0

我正在尝试在 PowerShell 中进行一些值替换。我有一个包含通用查询的文本文件，即

```
-- query.sql
SELECT
     'varTableName' AS myTableName
    , COUNT(DISTINCT parmColumnName) AS myDistinctCount
    , SUM(parmColumnName2) AS mySum
FROM varDatabaseName.varSchemaName.varTableName WITH (NOLOCK); 
```

我正在尝试替换“var”和“parm”值。我有两个不同的数据行。在我的脚本中，我遍历第一个数据行并使用焦点行进行替换。这很好用。我的问题是下一部分。然后，我需要遍历包含多行的第二个数据行，并对匹配的任何值执行替换。

我尝试做这样的事情，但没有成功：

```
# myScript.ps1 -- does not work 
# ...
# Code here to populate $MyDataRow 
ForEach ($MyRow In $MyDataRow) {
    [string]$Query = Get-Content query.sql  | ForEach-Object {
                            $_ -replace "varTableName", $Table `
                               -replace "varDatabaseName", $MyRow.DatabaseName `
                               -replace "varSchemaName", $MyRow.SchemaName `
                               -replace "varTableName", $MyRow.TableName
                               -replace $MyOtherDataRow.SearchString, $MyOtherDataRow.ReplaceString
                            }
} 
```

然而，这奏效了：

```
# myScript.ps1 -- works
# ...
# Code here to populate $MyDataRow 
ForEach ($MyRow In $MyDataRow) {
    [string]$Query = Get-Content query.sql  | ForEach-Object {
                            $_ -replace "varTableName", $Table `
                               -replace "varDatabaseName", $MyRow.DatabaseName `
                               -replace "varSchemaName", $MyRow.SchemaName `
                               -replace "varTableName", $MyRow.TableName
                            }

    ForEach($MyOtherRow In $MyOtherDataRow) {
        $Query = $Query | ForEach-Object {
            $_ -replace $MyOtherRow.SearchString, $MyOtherRow.ReplaceString
            }
    }
} 
```

不过，我只是在学习 PowerShell，所以我不知道这是否是处理此问题的最有效方法。我想知道我是否可以以某种方式将第二个 ForEach 替换传递给第一个结果？最好的方法是什么？

哦，如果它是相关的，我正在使用 PowerShell 3.0。

任何输入表示赞赏。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T22:13:28.607

我可能会这样做：

```
$query = Get-Content query.sql

$MyDataRow | % {
  $query = $query -replace "varDatabaseName", $_.DatabaseName `
                  -replace "varSchemaName", $_.SchemaName `
                  -replace "varTableName", $_.TableName
}

$MyOtherDataRow | % {
  $query = $query -replace $_.SearchString, $_.ReplaceString
} 
```

# c# - 如何将范围添加到字典但过滤掉空键？

> ID：15302040
> 
> 赞同：2
> 
> 时间：2013-03-08T19:45:31.750
> 
> 标签：c#, json, dictionary

此问题中的代码生成以下 JSON。

代码应该通过 line 排除空的“Children”键`.Where(a => a.Values != null)`，但它不起作用。

我可以在哪里放置 where 子句，以便 JSON 不包含一堆空的“儿童”数组？

谢谢你的帮助。

```
[{
        "NodeID" : 1,
        "NodeText" : "Country",
        "Children" : [{
                "NodeID" : 3,
                "NodeText" : "President",
                "Children" : []
            }, {
                "NodeID" : 4,
                "NodeText" : "Population",
                "Children" : []
            }, {
                "NodeID" : 5,
                "NodeText" : "State",
                "Children" : [{
                        "NodeID" : 6,
                        "NodeText" : "Governor",
                        "Children" : []
                    }, {
                        "NodeID" : 7,
                        "NodeText" : "Population",
                        "Children" : []
                    }, {
                        "NodeID" : 8,
                        "NodeText" : "County",
                        "Children" : [{
                                "NodeID" : 9,
                                "NodeText" : "Population",
                                "Children" : []
                            }
                        ]
                    }
                ]
            }
        ]
    }, {
        "NodeID" : 2,
        "NodeText" : "Year",
        "Children" : []
    }
] 
```

以下是生成上述 JSON 的示例代码：

```
public class Node
{
    public int? ParentNodeID { get; set; }
    public int NodeID { get; set; }
    public string NodeText { get; set; }

    public Node(int? parentNodeID, int nodeID, string nodeText)
    {
        ParentNodeID = parentNodeID;
        NodeID = nodeID;
        NodeText = nodeText;
    }
}

public List<Dictionary<string, object>> BuildTree(int? parentNodeID = null, List<Node> exampleData = null)
{
    // kickstart the recursion with example data
    if (exampleData == null)
    {
        exampleData = new List<Node>();
        exampleData.Add(new Node(null, 1, "Country"));
        exampleData.Add(new Node(null, 2, "Year"));
        exampleData.Add(new Node(1, 3, "President"));
        exampleData.Add(new Node(1, 4, "Population"));
        exampleData.Add(new Node(1, 5, "State"));
        exampleData.Add(new Node(5, 6, "Governor"));
        exampleData.Add(new Node(5, 7, "Population"));
        exampleData.Add(new Node(5, 8, "County"));
        exampleData.Add(new Node(8, 9, "Population"));
    }

    List<Dictionary<string, object>> result = new List<Dictionary<string, object>>();

    var nodes = exampleData.Where(a => a.ParentNodeID == parentNodeID).ToList();

    if (nodes != null)
    {
        result.AddRange(nodes
            .Select(a => new Dictionary<string, object> {
                { "NodeID", a.NodeID},
                { "NodeText", a.NodeText },
                { "Children", BuildTree(a.NodeID, exampleData) }
            })
            .Where(a => a.Values != null) // this doesn't have any effect
            .ToList()
        );
    }
    return result;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T20:40:51.737

问题是您总是在创建一个包含“儿童”值的字典，即使没有儿童也是如此。

解决方案是将其放入一个条件中，如果没有孩子则不添加该值，否则无论如何您都会继续添加带有空集合值的 Children Key。

这是我完成此操作的代码：肉和土豆是`Func<T> getNodeDictionary`现在在递归语句中调用的代码。

```
 public static List<Dictionary<string, object>> BuildTree(int? parentNodeID = null, List<Node> exampleData = null)
    {
        // kickstart the recursion with example data
        if (exampleData == null)
        {
            exampleData = new List<Node>();
            exampleData.Add(new Node(null, 1, "Country"));
            exampleData.Add(new Node(null, 2, "Year"));
            exampleData.Add(new Node(1, 3, "President"));
            exampleData.Add(new Node(1, 4, "Population"));
            exampleData.Add(new Node(1, 5, "State"));
            exampleData.Add(new Node(5, 6, "Governor"));
            exampleData.Add(new Node(5, 7, "Population"));
            exampleData.Add(new Node(5, 8, "County"));
            exampleData.Add(new Node(8, 9, "Population"));
        }

        List<Dictionary<string, object>> result = new List<Dictionary<string, object>>();

        var nodes = exampleData.Where(a => a.ParentNodeID == parentNodeID).ToList();

        if (nodes != null)
        {
            Func<Node, Dictionary<string, object>> getNodeDictionary = n => {
                var children = BuildTree(n.NodeID, exampleData); // still recursive
                var returnDictionary = new Dictionary<string, object> { // these 2 nodes always get added
                    { "NodeID", n.NodeID},
                    { "NodeText", n.NodeText }
                };

                // This ensures we only add Children if there are actually any children
                if (children.Any())
                {
                    returnDictionary.Add("Children", children);
                }

                return returnDictionary;
            };

            // No need for where clause since we now do not add the empty elements
            result.AddRange(nodes
                .Select(a => getNodeDictionary(a))
                .ToList()
            );
        }

        return result;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T19:49:58.610

`Values`对于孩子， in`.Where(a => a.Values != null)`始终不为空，因为您在递归 ( `{ "Children", BuildTree(a.NodeID, exampleData) }`) 中初始化它。更改 Where 条件以检查空子。

您可以添加方法：

```
 private static bool IsNotEmptyTree(object value)
    {
        if (value == null) return false;  //Is empty whatever
        if (value as List<Dictionary<string, object>> != null)
        {
            var dict = (value as List<Dictionary<string, object>>);
            return dict.Count > 0;
        }
        // not empty
        return true;
    } 
```

并在 Where 中使用它：

```
.Where(a => a.Values.All(IsNotEmptyTree)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T20:19:33.693

想想这里发生了什么。你有：

```
result.AddRange(nodes
    .Select(a => new Dictionary<string, object> {
        { "NodeID", a.NodeID},
        { "NodeText", a.NodeText },
        { "Children", BuildTree(a.NodeID, exampleData) }
    })
    .Where(a => a.Values != null) // this doesn't have any effect
    .ToList()
); 
```

`Where`正在检查您创建的新项目，而不是节点。所以这就像说：

```
var temp1 = nodes.Select(a => new Dictionary<string, object> { ... });
var temp2 = temp1.Where(a => a.Values != null);
result.AddRange(temp2); 
```

`temp1`一堆匿名对象实例也是如此，所有这些实例都包含一个字典，其中包含三个键/值对。

我想你想要的是：

```
.Where(a => a["Children"] != null) 
```

当然，假设`BuildTree`返回`null`一个空列表。

# ember.js - Emberjs - 如何在 RC1 中访问路由器

> ID：15302044
> 
> 赞同：3
> 
> 时间：2013-03-08T19:45:37.443
> 
> 标签：ember.js, ember-router

在 emberjs pre2 中**，**我们可以从任何地方访问路由器

```
App.get('router') 
```

谁能建议 emberjs **rc1**的类似代码是什么？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T03:50:54.253

> 谁能建议 emberjs rc1 的类似代码是什么？

Emberjs rc1 不会以这种方式暴露路由器。

作为替代方案，您应该通过本地引用访问路由器。

*   从控制器：this.get('target')
*   从一个角度来看：this.get('controller.target')
*   从一个模型：没有。只是不要这样做。
*   从控制台：可以在控制台中[访问新的 ember 路由器，](https://stackoverflow.com/questions/14109000/access-the-new-ember-router-in-the-console)但请记住[App.container 并不是一个公共 API](https://github.com/emberjs/ember.js/commit/5becdc4467573f80a5c5dbb51d97c6b9239714a8)

不仅仅是路由器，几乎所有过去可以通过全局常量访问的东西现在都被隐藏了。这是因为使用全局常量来访问实例会破坏封装，虽然这对控制台来说很好，但应该在应用程序代码中避免使用。

# java - 无法从片段中投射

> ID：15302049
> 
> 赞同：8
> 
> 时间：2013-03-08T19:45:52.910
> 
> 标签：java, android, android-fragments, android-fragmentactivity

我在 my 的布局中定义了两个片段，`MainActivity`并由`setContentView`. 我想从这些片段中调用一些方法，但我不知道如何访问它们。Eclipse 说：“无法将表单片段转换为 ListFileFrgament”。

```
public class MainActivity extends FragmentActivity {

    @Override
     protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.activity_main);

    FileListFragment listFragment = (FileListFragment) getFragmentManager().findFragmentById(R.id.list_fragment);  
     // cannot casr here
    PlayerFragment playerFragment = (PlayerFragment) getFragmentManager().findFragmentById(R.id.player_fragment); 
     // cannot cast here
    }

} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-08T19:49:46.137

使用`getSupportFragmentManager()`而不是`getFragmentManager()`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-08T19:49:52.617

确保您的导入匹配 - 它可能是 FileListFragment / PlayerListFragment 扩展 android.support.v4.app.Fragment 而 getFragmentManager().findFragmentById 返回 android.app.Fragment。

用于`getSupportFragmentManager()`返回 android.support.v4.app.Fragment 实例。

# php - 无法在 Chrome 中访问 c ookie，在 Firefox 中可以正常工作

> ID：15302050
> 
> 赞同：6
> 
> 时间：2013-03-08T19:45:58.000
> 
> 标签：php, google-chrome, firefox, cookies

**基本情况和基本相关信息：** 我有一个在开始标记之前执行的 php 代码`<doctype>`。希望是（如有必要）在加载其他任何内容之前根据用户浏览器的语言偏好发送重定向。

该脚本尝试根据支持的最高语言偏好做两件事：

1.  使用 php:`setcookie()`创建带有两个字母语言代码的 cookie。
    *   **示例 cookie 名称 = 值：x_language = es**
2.  使用 php: header("位置：" . $requestedSite); 重定向到子域，
    *   **示例域：es.domain.com**

例子：

```
if (isset($_COOKIE['x_language'])) {
    -Determine correct subdomain based on cookie value-
    -If not currently on that subdomain, redirect to it-
} else {
    setcookie('x_language','es',time() + 31536000 ,'/','.domain.com' );
    header("Location: " . $requestedSite);
} 
```

**问题：** Firefox 完美运行。Chrome（和其他浏览器）根本无法识别 cookie。

**我把它归结为：**

*   `print_r($_COOKIE)`在 Firefox 中正常工作，并返回一个可爱的填充数组。
*   `print_r($_COOKIE)`在 Chrome 中失败，并返回一个空数组。

**这是问题的核心**，我的函数无法识别 cookie 的存在，因为 Chrome 没有。

*   我确保每个浏览器都接受 cookie。
*   我已经检查了开发工具，以确保 cookie 在所有浏览器上都存在，（它是）。
*   我意识到 cookie 的值在下一页加载之前不可用，但这不是问题。即使设置后，它也不会读取。
*   初始 setcookie() 之上没有输出；

那么如何让 Chrome（和其他浏览器）识别自己的 cookie？！有谁知道为什么这一切都可以在 Firefox 上完美运行，但在其他地方却失败了？

* * *

我决定试试这个。我创建了一个仅包含的文件：

```
<?php
print_r($_COOKIE);
?> 
```

同样，我在 Firefox 中看到了 cookie 数组。同时，在 Chrome、IE、Opera、Safari 中，我得到一个空数组。这可能是服务器问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T18:34:40.653

**OP返回答案：**

好的，我将其添加为“答案”，以防其他人遇到这种（完全奇怪的）行为并落在此处：

事实证明，我的托管服务提供商正在对我的 WordPress 网站进行一些我不知道的非常激进的缓存。

在我发布我的问题时，我不认为使用 WordPress 是相关的，但显然它是相关的。

基本上它是这样做的：

* * *

***使用干净的缓存：***

*   访问者 1 访问该站点。
*   php 按预期处理并产生输出。
*   访问者 1 提供 php 输出（基于他的浏览器参数等）。

*   访客 2 访问该站点。访客 2 看到***访客 1 的网站版本。**

每次缓存清除时，php 只处理一次。

这种缓存行为意味着通过 php 访问 cookie 根本无法正常工作，但使用 Javascript 访问它们就可以了。

*（**重要提示：事实证明，****在登录 wordpress 时**查看网站的任何用户都禁用了上述缓存行为，这是 WordPress 缓存插件的常见行为。这就是为什么我在 Firefox 中看到的行为与我在其他浏览器，因为我是用 Firefox 主动登录的。这对那里的人来说可能是一条有用的信息。）*

* * *

**我的解决方案：**

使用 Javascript 对 .php 文件运行 AJAX 查询，该文件将处理访问者的语言偏好并将输出作为 2 字符代码返回*（即 'en' 'es' 'pt' 'de' 等）*。

使用 AJAX 调用 php 允许我使用 php 的服务器端访问浏览器的语言首选项，同时规避我的主机的超级农业缓存。

我希望这可以帮助别人！感谢所有试图帮助我解决这个问题的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T07:45:00.940

我对下面的代码没有这个问题。我能够`example.com`立即转到并被重定向到`en.example.com`并在`$_COOKIES`. 如果我使用过，我每次尝试`en.example.com?set=fr`都会被重定向到. 希望这就是你要找的！`fr.example.com``example.com`

```
<?php
print_r($_COOKIE);

if(isset($_GET['nuke'])) {
    setcookie('x_language','',time()-1000,'/','.example.com');
    echo 'It has been nuked!';
    exit;
} else if(isset($_GET['set'])) {
    setcookie('x_language',$_GET['set'],time() + 31536000, '/','.example.com');
    $_COOKIE['x_language'] = $_GET['set'];
}

if (isset($_COOKIE['x_language'])) {
    $redirect = $_COOKIE['x_language'].'.example.com';
    if($_SERVER['HTTP_HOST'] != $redirect)
        header('Location: http://'.$redirect);
} else {
    setcookie('x_language','en',time() + 31536000,'/','.example.com');
    $redirect = 'http://en.example.com';
    header('Location: '.$redirect);
}

echo '<br />Cookie: '.$_COOKIE['x_language'].' Domain: '.$_SERVER["HTTP_HOST"];
?> 
```

# javascript - 在 Next/Prev 控件单击事件上从 bxSlider 中删除滑块

> ID：15302053
> 
> 赞同：0
> 
> 时间：2013-03-08T19:46:02.143
> 
> 标签：javascript, bxslider

我在使用 bxSlider 插件时遇到了一个愚蠢的问题。我的滑块仅显示 4 张具有自动滑动模式的幻灯片。但是当有人点击一个特定的导航链接时，我会附加另一张与该链接相关的幻灯片。但是当有人单击上一个/下一个控件并重新加载带有 4 张幻灯片的默认滑块时，我想删除该新幻灯片。但它不适用于上一个/下一个控件。

这是代码：

```
//Default Slider
var slider= $('.bxslider').bxSlider({
    displaySlideQty : 4,
    moveSlideQty : 4,
    maxSlides: 4,
    auto: true,
    autoStart: true,
    preloadImages: 'visible',
    mode: 'fade',
    pager: false,
});

//If someone clicks any link on navigation
$('#how').click(function(e){
  e.preventDefault();

  if( $('ul.bxslider li.added').length > 0 ){
    $('.bxslider').find('li.added').remove();
  }
  $('.bxslider').append('<li class="added"><a class="fancybox fancybox.iframe" href="http://www.youtube.com/embed/Jwjv7OLazVY?enablejsapi=1&wmode=opaque" title="Click to Watch The Vieo"><img src="img/video.jpg"/></a></li>');
  slider.reloadSlider({
    mode:'fade',
    auto: false,
    autoStart: false,
    pager:false,

  });
  slider.goToSlide(4);

}); 
```

当#How 标签的幻灯片是当前幻灯片时，如果我想单击任何下一个/上一个控件，我想删除幻灯片 'li.added' 并重新加载带有 4 张幻灯片的默认滑块。那就是我尝试了以下代码

```
$('a.bx-next').click(function(e){
  if( $('ul.bxslider li.added').length > 0 ){
    $('.bxslider').find('li.added').remove();
    slider.reloadSlider({
    mode:'fade',
    auto: true,
    autoStart: true,
    pager:false,

  });
  }
}); 
```

但什么也没发生！谁能帮我解决这个问题？我做错了什么？这是为您提供方便的[实时测试站点。](http://byevan.com/web-template/selleroutlet/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T13:26:22.257

我发现每次调用 reloadSlider 时都需要绑定下一个按钮单击功能，因为它会重新绑定下一个上一个控件，因此如果您在页面加载时执行此操作，它将丢失事件绑定。所以请在每次重新加载时重新绑定点击事件。

```
var bindNext = function(){

 $('a.bx-next').click(function(e){
  if( $('ul.bxslider li.added').length > 0 ){
    $('.bxslider').find('li.added').remove();
    slider.reloadSlider({
    mode:'fade',
    auto: true,
    autoStart: true,
    pager:false,

  });
  }
}); 
```

}

然后当您调用 reloadSlider 时，在调用它之后调用 bindNext() 函数。

```
 $('#forSellers').click(function(e){
  e.preventDefault();

  if( $('ul.bxslider li.added').length > 0 ){
    $('.bxslider').find('li.added').remove();
  }

  $('.bxslider').append('<li class="added"><img src="img/seller.jpg" /></li>');
  slider.reloadSlider({

    auto: false,
    autoStart: false,
    pager:false,

    mode:'fade',
  });
  slider.goToSlide(4);

  bindNext();

}); 
```

它在我身边工作。

# sql-server - 如何有条件地求和？

> ID：15302054
> 
> 赞同：3
> 
> 时间：2013-03-08T19:46:05.913
> 
> 标签：sql-server, group-by, sum

我有一张下表

```
Col1   Col2   Col3
A1     1      null
A1     2      null
B1     5      null
B2     6      null
M1     1      M
M2     2      M
M3     3      M
J1     1      J
J2     2      J 
```

我想根据 Col1 对 Col2 求和。查询将如下所示，

```
select Col1, sum (Col2)
group by Col1 
```

但是，如果 Col3 具有相同的字母，我想为所有 Col1 总结 Col2。所以结果表应该是这样的

```
Col1    Col2 
A1      3
B1      5
B2      6
M1      6
M2      6
M3      6
J1      3
J2      3 
```

如何更改我的查询以获取上述表格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T19:53:20.553

Edit after comment / update to question. I didn't know a clever way, seems like some others have one though.

```
select * from (
select Col1, SUM(Col2) Col2
from Table
where Col3 is null
group by Col1

union

select mainset.Col1, tmp.Col2
from Table mainset
join 
(
    select Col3, SUM(Col2) Col2
    from Table
    where Col3 is not null
    group by Col3
) tmp on tmp.Col3 = mainset.Col3

where mainset.Col3 is not null
) fullset
order by fullset.Col1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T20:18:03.463

你可以这样做（我将表命名为#a）：

```
 ;WITH col3Sum AS
    (
        SELECT Col3, SUM(Col2) SUM3
        FROM #a
        WHERE col3 IS NOT NULL
        GROUP BY col3
    ),
        col1Sum AS
    (
        SELECT Col1, SUM(Col2) sum1
        FROM #a 
        GROUP BY Col1
    )   
    SELECT c1.Col1, ISNULL(c3.SUM3, c1.sum1) AS Col2
    FROM col1Sum c1
    LEFT JOIN col3Sum c3
        ON c1.Col1 LIKE c3.Col3+'%'
    ORDER BY c1.Col1 
```

# php - fastcgi 500 失败

> ID：15302080
> 
> 赞同：4
> 
> 时间：2013-03-08T19:47:30.043
> 
> 标签：php, http, cgi, fastcgi

我们正在运行 Windows Server 2012，带有 IIS 8 和 php

突然，该网站出现以下错误消息：

```
HTTP Error 500.0 - Internal Server Error
The FastCGI process has failed frequently recently. Try the request again in a whileMost likely causes:
IIS received the request; however, an internal error occurred during the processing of the request. The root cause of this error depends on which module handles the request and what was happening in the worker process when this error occurred. 
IIS was not able to access the web.config file for the Web site or application. This can occur if the NTFS permissions are set incorrectly. 
IIS was not able to process configuration for the Web site or application. 
The authenticated user does not have permission to use this DLL. 
The request is mapped to a managed handler but the .NET Extensibility Feature is not installed. 
 Things you can try:
Ensure that the NTFS permissions for the web.config file are correct and allow access to the Web server's machine account. 
Check the event logs to see if any additional information was logged. 
Verify the permissions for the DLL. 
Install the .NET Extensibility feature if the request is mapped to a managed handler. 
Create a tracing rule to track failed requests for this HTTP status code. For more information about creating a tracing rule for failed requests, click here. 
 Detailed Error Information:
Module    FastCgiModule 
Notification    ExecuteRequestHandler 
Handler    PHP_via_FastCGI 
Error Code    0x80004005 
Requested URL    http://thesite:80/index.php 
Physical Path    C:\inetpub\wwwroot\index.php 
Logon Method    Anonymous 
Logon User    Anonymous 
 More Information:
This error means that there was a problem while processing the request. The request was received by the Web server, but during processing a fatal error occurred, causing the 500 error. 
View more information »

Microsoft Knowledge Base Articles:

294807 
```

我将非常感谢有关我需要做什么来开始解决此问题并恢复网站的指导？

# java - 如何知道评论是否被某些用户在 Java 中回复了 youtube

> ID：15302081
> 
> 赞同：2
> 
> 时间：2013-03-08T19:47:30.897
> 
> 标签：java, youtube

我正在使用 Youtube api 版本 2 并使用 Java 语言来开发我的项目。

我想获取与该评论相关的评论和回复。我不知道怎么做。我已经尝试了 youtube 开发指南中写的所有可能性，但没有成功。

谁能给我代码示例如何实现这一目标？

现在我正在使用此代码来获取该评论的回复（在代码中硬编码）

```
 int startIndex = 1, maxResult = 50, j = 0;
    url = "http://gdata.youtube.com/feeds/api/videos/6afPT1hbMLk?client=comment+research?start-index%3D1";

    YouTubeService service = new YouTubeService(appName);
    YouTubeQuery query =  new YouTubeQuery(new URL(url));

    try {
        CommentFeed commentFeed = service.query(query, CommentFeed.class);
    } catch (IOException | ServiceException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

但它给了我以下例外......

com.google.gdata.util.ParseException：[第 1 行，第 268 列] 无效的根元素，应为 ( [http://www.w3.org/2005/Atom:feed](http://www.w3.org/2005/Atom:feed) ) 的 (命名空间 uri:local name)，发现 ( [http://www.w3.org/2005/Atom:com.google.gdata.util.XmlParser.parse(XmlParser.java](http://www.w3.org/2005/Atom:entry) ) 的入口在 com.google.gdata.util.XmlParser.throwParseException(XmlParser.java:730) :693) 在 com.google.gdata.data.BaseFeed.parseAtom(BaseFeed.java:867) 在 com.google.gdata.wireformats 的 com.google.gdata.util.XmlParser.parse(XmlParser.java:576)。 input.AtomDataParser.parse(AtomDataParser.java:68) 在 com.google.gdata.wireformats.input.AtomDataParser.parse(AtomDataParser.java:39)

# c# - 时区缩写

> ID：15302083
> 
> 赞同：63
> 
> 时间：2013-03-08T19:47:35.233
> 
> 标签：c#, .net, timezone

`TimeZoneInfo`不提供给定时区的缩写或短名称。唯一的好方法是拥有一个字典，将缩写映射到`Timezone.id`,`StandardName`或`DaylightName`属性。但是，我在缩写列表中搜索的所有来源都有不同的时区名称，即与 Windows 中的不同。

如何在 .NET 中向用户显示不是全名、ID 或任何其他名称的用户？我不想要 UtcOffset 但时区缩写 - PST 太平洋，UTC - 通用，EST - 东部标准等。是否有任何 C# 兼容列表或数据库与所有可能的时区及其缩写兼容那些`TimeZoneInfo.GetSystemTimeZones()`给你?

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2013-03-08T22:25:40.140

**更新的答案**

我的原始回复如下，并且仍然有效。但是，现在有一种更简单的方法，即使用[TimeZoneNames 库](https://github.com/mattjohnsonpint/TimeZoneNames)。[从 Nuget](https://www.nuget.org/packages/TimeZoneNames)安装后，您可以执行以下操作：

```
string tzid = theTimeZoneInfo.Id;                // example: "Eastern Standard time"
string lang = CultureInfo.CurrentCulture.Name;   // example: "en-US"
var abbreviations = TZNames.GetAbbreviationsForTimeZone(tzid, lang); 
```

生成的对象将具有类似于以下内容的属性：

```
abbreviations.Generic == "ET"
abbreviations.Standard == "EST"
abbreviations.Daylight == "EDT" 
```

您还可以使用同一个库来获取完全本地化的时区名称。该库使用 CLDR 数据的嵌入式独立副本。

**原始答案**

正如其他人所提到的，时区缩写是模棱两可的。但如果你真的想要一个用于显示，你需要一个 IANA/Olson 时区数据库。

您可以从 Windows 时区转到 IANA/Olson 时区以及其他方向。但请注意，任何给定的 Windows 区域都可能有多个 IANA/Olson 区域。这些映射在[此处](http://unicode.org/repos/cldr/trunk/common/supplemental/windowsZones.xml)的 CLDR 中维护。

[NodaTime](https://code.google.com/p/noda-time/)同时拥有数据库和映射。您可以从 .Net`DateTime`或`DateTimeOffset`,`TimeZoneInfo`转到 NodaTime`Instant`和`DateTimeZone`. 从那里，您可以获得缩写名称。

```
// starting with a .Net TimeZoneInfo
var timeZoneInfo = TimeZoneInfo.FindSystemTimeZoneById("Pacific Standard Time");

// You need to resolve to a specific instant in time - a noda Instant
// For illustrative purposes, I'll start from a regular .Net UTC DateTime
var dateTime = DateTime.UtcNow;
var instant = Instant.FromDateTimeUtc(dateTime);

// note that if we really wanted to just get the current instant,
// it's better and easier to use the following:
// var instant = SystemClock.Instance.Now;

// Now let's map the Windows time zone to an IANA/Olson time zone,
// using the CLDR mappings embedded in NodaTime.  This will use
// the *primary* mapping from the CLDR - that is, the ones marked
// as "territory 001".

// we need the NodaTime tzdb source.  In NodaTime 1.1.0+:
var tzdbSource = TzdbDateTimeZoneSource.Default;

// in previous NodaTime releases:
// var tzdbSource = new TzdbDateTimeZoneSource("NodaTime.TimeZones.Tzdb");

// map to the appropriate IANA/Olson tzid
var tzid = tzdbSource.MapTimeZoneId(timeZoneInfo);

// get a DateTimeZone from that id
var dateTimeZone = DateTimeZoneProviders.Tzdb[tzid];

// Finally, let's figure out what the abbreviation is
// for the instant and zone we have.

// now get a ZoneInterval for the zone and the instant
var zoneInterval = dateTimeZone.GetZoneInterval(instant);

// finally, you can get the correct time zone abbreviation
var abbreviation = zoneInterval.Name;

// abbreviation will be either PST or PDT depending
// on what instant was provided
Debug.WriteLine(abbreviation); 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-03-08T21:22:09.873

这是一个棘手的要求，您能做的最好的事情就是获取您选择的列表并创建一个扩展/帮助方法来获取给定 TimeZoneInfo 的缩写。

一旦开始的地方是[http://www.timeanddate.com/library/abbreviations/timezones/](http://www.timeanddate.com/library/abbreviations/timezones/)它有一个版本的列表，涵盖了我知道的区域。

问题在于在给定时区存在多个缩写的情况下选择适当的缩写。例如， **UTC**可以表示为**UTC**或**WET（西欧时间）**或**WEZ（Westeuropäische Zeit）**或**WT（西撒哈拉标准时间）**。

您可能希望与您的利益相关者就您将遵循给定选择的命名约定达成一致。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2014-03-29T16:02:01.117

您的问题并未表明您的应用程序必须在哪些时区运行，但在我的特定情况下，我只需要关注美国时区和 UTC。

美国时区的缩写总是时区名称中每个单词的第一个字符。例如，“Mountain Standard Time”的缩写是“MST”，“Eastern Daylight Time”的缩写是“EDT”。

如果你有类似的需求，可以直接从本地时区的名称中轻松推导出本地时区的时区缩写，如下（注意：这里我是根据当前的日期和时间来确定正确的名称）：

```
string timeZoneName = TimeZone.CurrentTimeZone.IsDaylightSavingTime(DateTime.Now)
                          ? TimeZone.CurrentTimeZone.DaylightName 
                          : TimeZone.CurrentTimeZone.StandardName;

string timeZoneAbbrev = GetTzAbbreviation(timeZoneName); 
```

该`GetTzInitials()`函数的代码非常简单。值得一提的是，某些时区可能设置为墨西哥或加拿大，这些时区的名称会在括号中加上国家名称，例如“太平洋标准时间（墨西哥）”。为了解决这个问题，任何带括号的数据都被直接传回。上面返回的缩写将是“PST(Mexico)”，这对我有用。

```
string GetTzAbbreviation(string timeZoneName) {
    string output = string.Empty;

    string[] timeZoneWords = timeZoneName.Split(' ');
    foreach (string timeZoneWord in timeZoneWords) {
        if (timeZoneWord[0] != '(') {
            output += timeZoneWord[0];
        } else {
            output += timeZoneWord;
        }
    }
    return output;
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-07-09T14:41:24.033

我将所有日期都存储在 UTC 中，并且经常必须在本地时间显示它们，所以我创建了一个扩展方法`ToAbbreviation()`

```
 public static string ToAbbreviation(this TimeZone theTimeZone)
    {

        string timeZoneString = theTimeZone.StandardName;
        string result = string.Concat(System.Text.RegularExpressions.Regex
           .Matches(timeZoneString, "[A-Z]")
           .OfType<System.Text.RegularExpressions.Match>()
           .Select(match => match.Value));

        return result;
    } 
```

示例用法：

```
string tz = TimeZone.CurrentTimeZone.ToAbbreviation();
string formattedDate = String.Format("{0:yyyy/MM/dd hh:mm:ss} {1}", myDate, tz); 
```

或者，如果您只想从 DateTime 对象中获取格式化的日期字符串：

```
public static string ToLocalTimeWithTimeZoneAbbreviation(this DateTime dt)
{
    DateTime localtime = dt.ToLocalTime();
    string tz = TimeZone.CurrentTimeZone.ToAbbreviation();

    string formattedDate = String.Format("{0:yyyy/MM/dd hh:mm:ss} {1}", localtime, tz);
    return formattedDate;
} 
```

并使用如下：

```
string formattedDate = myDateTimeObject.ToLocalTimeWithTimeZoneAbbreviation() 
```

输出：`2019-06-24 02:26:31 EST`

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-04-11T22:20:08.250

这是另一个使用 NodaTime 的片段：

```
NodaTime.ZonedDateTime hereAndNow = NodaTime.SystemClock.Instance.Now.InZone(
    NodaTime.DateTimeZoneProviders.Tzdb.GetSystemDefault());

System.TimeSpan zoneOffset = hereAndNow.ToDateTimeOffset().Offset;

string sTimeDisplay = string.Format("{0:G} {1} (UTC{2}{3:hh\\:mm} {4})", 
    hereAndNow.ToDateTimeOffset(), 
    hereAndNow.Zone.GetZoneInterval(hereAndNow.ToInstant()).Name, 
    zoneOffset < TimeSpan.Zero ? "-" : "+", 
    zoneOffset, 
    hereAndNow.Zone.Id); 
```

在我的系统上，这会产生：“4/11/2013 5:03:23 PM CDT (UTC-05:00 America/Chicago)”

（感谢马特·约翰逊（Matt Johnson）对缩写词存在于 TimeZoneInterval 中的线索的回答）

如果 NodaTime.ZonedDateTime 有一个 GetZoneInterval 方法会更容易，但也许我错过了一些东西。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-07-14T14:40:52.830

这对使用 Xamarin for iOS 或 Android 的任何人都有帮助，因为根据文档“显示名称是根据随 Windows 操作系统安装的区域性进行本地化的”。在中央时区使用它时，对于 DateTime“2016-09-01 12:00:00 GMT”，此函数返回“CDT”，这正是我遇到这个问题时所需要的。

```
public static string GetTimeZoneAbbreviation(DateTime time)
{
    string timeZoneAbbr;
    if(time.IsDaylightSavingTime() == true)
    {
        timeZoneAbbr = TimeZoneInfo.Local.DaylightName;
    }
    else
    {
        timeZoneAbbr = TimeZoneInfo.Local.StandardName;
    }

    return timeZoneAbbr;
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-03-22T18:42:29.350

我有一个类似的问题，但不想使用 3rd 方库（正如大多数答案所暗示的那样）。如果您只想支持 .Net 的时区名称，并决定使用查找表，请在[此处查看我的答案](https://stackoverflow.com/a/36162480/1618438)，它依靠 PHP 来帮助生成缩写列表。您可以调整那里的代码段和表格以满足您的需要。

# java - 为什么在 main 方法中使用 SwingUtilities.invokeLater？

> ID：15302085
> 
> 赞同：23
> 
> 时间：2013-03-08T19:47:41.587
> 
> 标签：java, swing, main, swingutilities, invokelater

经过多年的 Java 编程，我总是习惯于创建`main()`这样的方法：

```
public static void main(String[] args) 
{
    runProgram();
} 
```

但最近我从网上研究了一些代码，有时看到这个而不是`main()`上面通常的用法：

```
public static void main(String[] args) 
{
    SwingUtilities.invokeLater(new Runnable() 
    {
        public void run() 
        {
            runProgram();
        }
    });
} 
```

我只是想知道：

*   为什么要使用这个而不是通常的`main()`方式？当我试一试时，我看不出有什么不同。
*   这两种方式有什么区别？

感谢您阅读我和您的答案。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-08T20:00:03.207

文档解释了原因。从[初始线程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)

> 为什么初始线程不简单地创建 GUI 本身？因为几乎所有创建或与 Swing 组件交互的代码都必须在事件调度线程上运行。

和来自[事件调度线程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)

> 一些 Swing 组件方法在 API 规范中被标记为“线程安全”；这些可以从任何线程安全地调用。**所有其他 Swing 组件方法都必须从事件分派线程中调用。忽略此规则的程序可能在大多数情况下都能正常运行，但会出现难以重现的不可预测的错误。**

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-03-08T20:08:57.317

因为VM启动的线程“main”不是**事件调度线程**。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-09-11T12:04:29.100

API 中的一些 Swing 组件不是线程安全的，这意味着它们可能会导致死锁等问题，因此最好使用 Swing 提供的 Event Dispatcher 线程而不是来自主线程或任何其他线程来创建和更新此类 Swing 组件从 main 创建的线程。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-03-17T12:02:59.763

虽然上面的答案都是正确的，但我相信他们缺乏正确的解释。

是的，与 Swing 交互的所有事情（创建 UI、更新 UI、添加新组件或布局等）都应该始终在 AWT 事件调度线程上完成（有关该主题的更多信息，请参阅[这篇文章](https://stackoverflow.com/questions/6567870/what-does-swingutilities-invokelater-do)）。

`SwingUtilities.invokeLater()`将您的代码放在事件调度线程 (EDT) 的 FIFO 队列中，因此每当它完成它正在执行的其他任务时，它将从 EDT 执行。

* * *

话虽如此，**EDT 应该专门用于运行可快速执行的 Swing 相关任务**（如果阻止 EDT，则阻止整个 UI）。

`SwingUtilities.invokeLater()`如果您不使用 Swing/AWT（例如 JavaFX 应用程序或终端应用程序），则在 main 方法上使用是没有意义的。

如果您想要执行一些与 Swing 完全无关但需要启动 Swing 的任务（例如，在类似 MVC 的应用程序中启动模型和控制器），您可以从 EDT 或 Main线程（有关此主题的讨论，请参阅[此帖子）。](https://stackoverflow.com/questions/66585250/using-swingutilities-invokelater-in-main-method)

# android - 开发两个 android 应用程序并在两者之间进行通信

> ID：15302093
> 
> 赞同：18
> 
> 时间：2013-03-08T19:48:14.647
> 
> 标签：android, communication

我正在开发两个应用程序名称**A**和**B**。

**应用程序 A**作为活动命名`MainActivity`，服务调用`UpdateService`，`BroadcastReciever`调用`UpdateReceiver`。

**应用程序 B**为活动命名`TestActivity`，服务调用`DoService`，`BroadcastReciever`调用`DoReceiver`。

在我的**应用程序 B**中，我想访问**应用程序 A**`MainActivity`中的一些方法和代码。

 **这样，我需要完全控制**Application A代码才能在我的****应用程序 B**中访问它。

我怎样才能实现它？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-08T20:00:01.093

您不能直接访问`Activity`不同应用程序中的方法。

`Broadcast`会起作用，但如果您想要更多控制（即调用远程方法），请考虑绑定到其他应用程序中的远程服务或使用`Messenger`和处理程序进行通信。

[这是一个关于应用程序间通信](https://web.archive.org/web/20130731024012/http://code.google.com/p/openmobster/wiki/InterAppCommunication)的简短教程

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-08T19:56:39.413

您不能在不同的应用程序之间共享方法和代码段，但您可以使用意图来来回发送数据包，检查这个类似的问题：

[两个应用程序之间的android通信](https://stackoverflow.com/questions/4638939/android-communication-between-two-applications)**

# sql - 缓存多维数据？

> ID：15302094
> 
> 赞同：1
> 
> 时间：2013-03-08T19:48:17.110
> 
> 标签：sql, ruby-on-rails, caching

（这是一个关于优化和性能的问题，我想在这里打基础，那么最后是我的问题。）

我在 Ruby on Rails 中编写了一个 RESTful API，它返回有关某个区域中存在的视频的策略数据。示例策略可能是“视频**#1**：**美国**的**ShowWithAds** ”或“视频**#2**：**MX**中的**屏蔽**”。

 ******我需要为两个视图返回数据：

1.  “显示**美国**的所有视频并**阻止**”返回每个在美国被阻止的视频的政策列表。
2.  “在 MX 中显示视频# **1**的策略”返回**MX中视频 #1 的策略。**即“ **ShowAds** ”

这是我的表的样子：

**视频**

*   视频ID（字符串）
*   标题

**VideoPolicy**（充当视频和策略的 JOIN 表）

*   VideoID（FK 到视频，字符串）
*   国家（字符串）
*   PolicyID（FK 到 Policy，int）

['VideoID/Country' 和 'Country/PolicyID' 的索引]

**政策**

*   政策 ID（整数）
*   名称（字符串）

因此，上述每个视图的数据库查询如下所示：

1.  “从国家 = US AND PolicyID = 1 的 VideoPolicy 中选择”
2.  “从国家 = US AND VideoID = 2 的 VideoPolicy 中选择”

总体上非常简单的表/查询。当这个系统开始规模化时，假设我有 500,000 个视频，每个视频都有 200 个国家/地区的政策，这意味着**Video**表变为*500,000 行*，**VideoPolicy**表变为 (500,000 * 200 =) *1 亿行*，而**Policy**表只有*4行*。

**这是我的问题开始的地方。**

1.  尽管它缺少主键，但假设我在该 JOIN 表**VideoPolicy**上有正确的索引，我上面的查询是否仍能有效运行？
2.  如果是这样，我对 DB 端很满意。但是，作为一个 Web 应用程序，我不想每次都访问数据库以获取策略，所以我想实现缓存。为了满足这两个视图/查询，我应该为我的缓存使用什么样的键（假设有效负载是**VideoPolicy ）？**
3.  我可以在这里利用任何 Rails 魔法吗？
4.  我是否遗漏了任何其他潜在的性能瓶颈？

任何建议都非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-09T12:27:22.887

我认为 (country, video_id) 和 (country, policy_id) 上的复合索引可以解决问题，这对您的设备来说是一个简单的操作。您真的需要在这里缓存吗 - 不确定，如果数据库性能受到影响，您可以按国家/地区分片您的数据。

缓存怎么样——你可以缓存具体的页面（比如使用视图缓存）******

# java - 线程局部变量的存储

> ID：15302096
> 
> 赞同：4
> 
> 时间：2013-03-08T19:48:22.130
> 
> 标签：java

我有一个非常简单的问题。鉴于 Threadlocal 变量是使用 static 修饰符声明的，因此预计它将存储在堆中。这个假设正确吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-08T19:49:43.270

[所有 Java 对象（引用类型）都存储在堆上。](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-2.html#jvms-2.5.3)它与 . 无关`static`。

> ### 2.5.3 堆
> 
> Java 虚拟机有一个在所有 Java 虚拟机线程之间共享的*堆。*堆是为所有类实例和数组分配内存的运行时数据区域。

# javascript - 单击时在两个 CSS 类之间切换

> ID：15302097
> 
> 赞同：0
> 
> 时间：2013-03-08T19:48:31.990
> 
> 标签：javascript, jquery

我想知道如何在 jQuery 中更有效地做一些事情，那就是在单击时将一个类切换到另一个类`#trigger`。

因此，在奇数点击时，将给文档中的`.a`所有 s 赋予a ( ) 类`<nav>`，然后在偶数点击时，a ( `.a`) 类将被删除/关闭并替换为 b ( `.b`) 类。

我可以考虑这样做的唯一方法是添加新类并删除当前类，但我确信必须有一种更有效的方法来做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T19:52:34.783

```
 $('.a').on('click',function(){
      $(this).toggleClass('a b');
 }); 
```

# algorithm - 总分排名算法

> ID：15302099
> 
> 赞同：2
> 
> 时间：2013-03-08T19:48:54.590
> 
> 标签：algorithm, ranking, rating, reddit, scoring

背景;

我正在寻找一种方法来根据听众的反馈计算一段音频的分数。每次用户收听曲目时，如果他们喜欢，他们必须投票，简单的是或否。然后每个曲目都有一个分数，基于是票和否票的数量。

此外，我想在 31 天内统一衰减每次投票的值，所以在这段时间之后，它的值是 0，并且不会影响总分。

我发现了很多基于 reddit 和黑客新闻排名算法的讨论，但这些似乎会降低总分，而不是个人投票本身。根据最初投票的时间，每张选票都会有不同的衰减量。

任何人都可以帮助或推荐一些要查看的材料吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T19:56:46.473

您可以将其建模为“是”= 1.0 和“否”= 0.0。然后，投票后第 n 天的投票价值 = (31-n)/31。如果 n > 31 则进一步条件，然后将其设置为 0。希望这能回答您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T20:01:37.910

你想要什么加速退化。一个常见的是对数，因为它很容易实现。喜欢打1分，不喜欢打-1分。然后，当加总喜欢/不喜欢时，除以投票后的天数。第 1 天，投票的绝对值为 1。第 2 天，投票的绝对值为 1/2。第 3 天，价值 1/3，依此类推……第 31 天，价值 1/31 (0.03)。

对数退化的问题在于它下降得非常快。您可以使用许多其他方法，例如乘以 log(11-d)，其中第一天 d=1，第二天 2，依此类推。它只允许降解 11 天。log(31-d) 将允许 31 天。您需要确保不要尝试执行 log(0) 或 log(-x)。

整个模型的另一个问题是如何处理只有旧票的事情。如果某样东西除了喜欢什么都没有，但所有的喜欢都是旧的怎么办？它将注册为不太喜欢，因为所有喜欢都已降级。

# java - 我在 Eclipse 中的 src 文件夹是空的。无法对应用程序进行编码

> ID：15302100
> 
> 赞同：1
> 
> 时间：2013-03-08T19:49:00.240
> 
> 标签：java, android, eclipse, adt, src

我正在尝试编写一个 java 应用程序（以前从未使用过 Eclipse）。我在 YouTube 上看了一些教程，发现有问题。我的“src”文件夹是空的，这显然是最重要的文件所在的位置。（[http://img16.imageshack.us/img16/5039/40807052.jpg](http://img16.imageshack.us/img16/5039/40807052.jpg)）

我该如何解决这个问题？我是否错误地下载了程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T19:52:38.850

如果您下载了您正在使用的项目文件夹，那么您没有正确下载它；或者您确实正确下载了它，但项目本身构建不正确。

你能分享你从哪里得到这个项目吗？

至于如何解决问题，您需要创建一个 Activity 并将其放在 src 文件夹中，并将其添加到带有意图过滤器的清单中，该意图过滤器将告诉系统将其包含在启动器的应用程序列表中。

# php - 使用 HighRoller / High Charts php 绘制图形

> ID：15302101
> 
> 赞同：0
> 
> 时间：2013-03-08T19:49:10.740
> 
> 标签：php, sql, highcharts

我正在使用 php 包装器“highroller”来尝试绘制我在数据库表中的一些数据。

现在，此代码有效（来自示例）：

```
<?php
require_once('../HighRoller/HighRoller.php');
require_once('../HighRoller/HighRollerSeriesData.php');
require_once('../HighRoller/HighRollerLineChart.php');
$chartData = array(5324, 7534, 6234, 7234, 8251, 10324);
$series1 = new HighRollerSeriesData();
$series1->addName('myData')->addData($chartData);
$linechart = new HighRollerLineChart();
$linechart->chart->renderTo = 'linechart';
$linechart->title->text = 'Hello HighRoller';
$linechart->yAxis->title->text = 'Total';
$linechart->addSeries($series1);
?>

<head>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js"></script>
<!-- HighRoller: set the location of Highcharts library -->
<?php echo HighRoller::setHighChartsLocation("../highcharts/highcharts.js");?>
</head>

<body>
<div id="linechart"></div>
<script type="text/javascript">
<?php echo $linechart->renderChart();?>
</script>
</body> 
```

但是，我正在尝试编辑 $chartdata = array(5324,...) 以便我可以从数据库中提取它。这是我的尝试：

```
$connection = mysql_connect(#,#,#) or die("Couldn't connect to the server.");
$database = mysql_select_db(#, $connection) or die ("Couldn't select the correct database.");

$result = mysql_query("SELECT price FROM highroller");

while ($row = mysql_fetch_array($result)){
    $priceData[] = $row['price'];
}

$chartData = $priceData;

$linechart = new HighRollerLineChart();
$linechart->chart->renderTo = 'linechart';
$linechart->title->text = 'Line Chart';

$series1 = new HighRollerSeriesData();
$series1->addName('myData')->addData($chartData);

$linechart->addSeries($series1); 
```

现在，我不确定为什么这不起作用，因为 $priceData 是一个数组，就像之前的静态数组一样。

此外，作为参考，这里是库中“addData”的函数：

```
/** add data to plot in your chart
   * @param $chartdata - array, data provided in 1 of 3 HighCharts supported array formats (array, assoc array or mult-dimensional array)
   * @return void
   */
  public function addData($chartdata){
    if(!is_array($chartdata)){
      die("HighRoller::addData() - data format must be an array.");
    }
    $this->series = array($chartdata);
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-08T13:49:46.607

我不知道这个问题是否仍然有效，但您应该确保这`$chartdata`是一个数字数组，而不是字符串（因为它可能来自数据库）。

# amazon-web-services - 如何在cfn模板的bucketpolicy中指定多个bucket？

> ID：15302103
> 
> 赞同：5
> 
> 时间：2013-03-08T19:49:30.383
> 
> 标签：amazon-web-services, amazon-s3, amazon-cloudformation

以下是在 A 存储桶的 cfn 模板中设置存储桶策略的示例。

```
"mybucketpolicy" : {
   "Type" : "AWS::S3::BucketPolicy",
   "Properties" : {
      "PolicyDocument" : {
         "Id" : "MyPolicy",
         "Statement" : [ {
            "Sid" : "ReadAccess",
            "Action" : [ "s3:GetObject" ],
            "Effect" : "Allow",
            "Resource" : { "Fn::Join" : [
                  "", [ "arn:aws:s3:::", { "Ref" : "mybucket" } , "/*" ]
               ] },
            "Principal" : {
               "AWS" : { "Fn::GetAtt" : [ "mygroup", "Arn" ] }
            }
         } ]
      },
      "Bucket" : { "Ref" : "mybucket" }
      }
   }
} 
```

如果我想将策略应用于除 mybucket 之外的另一个存储桶，我该怎么做？

我一定要吗：

1.  创建一个全新的bucketpolicy，让我们说'mybucketpolicy2'，它与上面的非常相似？
2.  只需使用新的存储桶名称在上面的“语句”数组中再添加一项？如果是，那么这将与上面的“Bucket”键冲突，不是吗？
3.  其他方式？

PS：我在 aws cfn 论坛上问过同样的问题，但我意识到我在 SO 上比在 aws 论坛上更快地得到答案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-23T13:32:00.343

您不能将 AWS::S3::BucketPolicy 资源附加到多个存储桶。要将策略附加到多个资源，您需要使用 IAM 资源。[AWS::IAM::Policy](http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-iam-policy.html)资源用于通过 IAM 管理定义策略并将其应用于各种资源。在我看来，IAM 接口比旧式策略资源更强大、更灵活（但更复杂）。您不仅可以将单个策略应用于多个存储桶，还可以将多个策略（语句）应用于多个存储桶并分配给多个 IAM 用户/组/角色。

您可以使用可以在 CloudFormation 模板中创建的 IAM 组或用户授予对特定策略的访问权限，例如。AWS::IAM::Group 资源。

根据您的需要调整此代码段：

```
"GetS3ContentPolicy" : {
  "Type" : "AWS::IAM::Policy",
  "Properties" : {
    "PolicyName" : "S3ContentPolicy",
    "PolicyDocument" : {
      "Statement" : [ {
        "Effect" : "Allow",
        "Action" : [
          "s3:ListBucket"
        ],
        "Resource" : [ 
          { "Fn::Join" : ["", [ "arn:aws:s3:::", { "Ref" : "PubS3Bucket" } ] ] },
          { "Fn::Join" : ["", [ "arn:aws:s3:::", { "Ref" : "SecretS3Bucket" } ] ] }
        ]
      },
      {
        "Effect" : "Allow",
        "Action" : [
          "s3:GetObject",
          "s3:GetObjectVersion"
        ],
        "Resource" : [ 
          { "Fn::Join" : ["", [ "arn:aws:s3:::", { "Ref" : "PubS3Bucket" }, "/*" ] ] },
          { "Fn::Join" : ["", [ "arn:aws:s3:::", { "Ref" : "SecretS3Bucket" }, "/*" ] ] }
        ]
      } ]
    },
    "Groups" : [
      { "Ref" : "ManagementInstancesGroup" },
      { "Ref" : "WebInstancesGroup" }
    ]
  }
}, 
```

# grails - 我可以使用不提交的 db2 jdbc 驱动程序制作 Grails Web 应用程序吗？

> ID：15302114
> 
> 赞同：2
> 
> 时间：2013-03-08T19:50:09.277
> 
> 标签：grails, jdbc, db2, ibm-midrange, journaling

我的情况：我与许多 RPG 程序员一起工作，他们在 IBM-i 上以不创建日志的方式创建文件。我创建了一个 Grails 应用程序，它使用 db2 jdbc 驱动程序连接到文件并更新、插入等。我收到一个错误：

```
com.ibm.db2.jdbc.app.DB2DBException: MYFILE in MYLIB not valid for operation.
  Cause . . . . . :   The reason code is 3 .  Reason codes are:
  ...blah blah blah...
  3 -- MYFILE not journaled, no authority to the journal, or the journal state is *STANDBY.  Files with an RI constraint action of CASCADE, SET NULL, or SET DEFAULT must be journaled to the same journal. 
  ...blah blah blah... 
```

我知道我可以开始用 STRJRNPF 记录文件，但我不想跟上它（请不要责骂）。是否有我可以设置的 db2 jdbc 连接 url 的参数让它知道不要尝试提交？

这是我当前的连接信息：

```
dataSource
{
  dbCreate = "update" // one of 'create', 'create-drop', 'update', 'validate', ''
  pooled = true
  url = "jdbc:db2:*local;naming=system;libraries=LIBS;errors=full"
  driverClassName = "com.ibm.db2.jdbc.app.DB2Driver"
  username = "user"
  password = "pass"
  dialect = org.hibernate.dialect.DB2400Dialect.class
} 
```

**编辑：**这是我尝试过的：

```
url = "jdbc:db2:*local;naming=system;libraries=LIBS;errors=full;transaction isolation=none" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T21:50:12.993

最后，这确实与 Grails/Hibernate 有关。这是数据源最终的样子：

```
dataSource
{
  dbCreate = "update" // one of 'create', 'create-drop', 'update', 'validate', ''
  pooled = true
  url = "jdbc:db2:*local;naming=system;libraries=LIBS;errors=full;transaction isolation=none"
  driverClassName = "com.ibm.db2.jdbc.app.DB2Driver"
  username = "user"
  password = "pass"
  dialect = org.hibernate.dialect.DB2400Dialect.class
  properties{                      
    defaultTransactionIsolation = 0
  }
} 
```

感谢@Buck Calabro 的评论和这个[问题](https://stackoverflow.com/questions/10607717/how-to-specify-default-transaction-isolation-level-in-grails)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-08T20:41:44.727

你认为“跟上它”意味着什么？默认情况下，系统会为你做很多日记管理。欢迎使用 IBM i。;-)

# sql - 插入带有时区的日期文字

> ID：15302122
> 
> 赞同：0
> 
> 时间：2013-03-08T19:50:35.297
> 
> 标签：sql, oracle

我想以我用`alter session`命令设置的格式传递日期。这是我迄今为止尝试过的。不理解无效月​​份错误。我用的是10g。

数据库时区是 UTC

```
SELECT dbtimezone FROM DUAL;
UTC 
```

我设置了会话时区和日期格式

```
alter session set time_zone = 'UTC';
alter session set NLS_TIMESTAMP_TZ_FORMAT = 'YYYY-MM-DD HH24:MI:SS.FF TZR';
alter session set NLS_DATE_FORMAT = 'YYYY-MM-DD'; 
```

我在其中插入值的表如下。

![桌子](../Images/a32d5d19a655ebe4a70961ba9c710fb3.png)

单条记录插入的 SQL 代码：

```
Insert into books_outsource_plan(os_cell_id, os_date, os_value, os_snapshot, os_created) 
values (1,'2013-03-08',3000,'2013-03-07 19:10:10 UTC','2013-03-08 19:15:54 UTC'); 
```

错误报告：

```
SQL Error: ORA-01843: not a valid month 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T20:43:15.657

尝试 CASTING 到**to_date**然后插入

像

```
Insert into books_outsource_plan(os_cell_id, os_date, os_value, os_snapshot, os_created) 
values (1,to_date('2013-03-08'),3000,to_date('2013-03-07 19:10:10 UTC'),to_date('2013-03-08 19:15:54 UTC')); 
```

# python - HTML编码和lxml解析

> ID：15302125
> 
> 赞同：10
> 
> 时间：2013-03-08T19:50:46.617
> 
> 标签：python, unicode, web-scraping, beautifulsoup, lxml

我试图最终解决一些从尝试使用 lxml 抓取 HTML 时弹出的编码问题。以下是我遇到的三个示例 HTML 文档：

1.

```
<!DOCTYPE html>
<html lang='en'>
<head>
   <title>Unicode Chars: 은 —’&lt;/title>
   <meta charset='utf-8'>
</head>
<body></body>
</html> 
```

2.

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ko-KR" lang="ko-KR">
<head>
    <title>Unicode Chars: 은 —’&lt;/title>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
</head>
<body></body>
</html> 
```

3.

```
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html
PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Unicode Chars: 은 —’&lt;/title>
</head>
<body></body>
</html> 
```

我的基本脚本：

```
from lxml.html import fromstring
...

doc = fromstring(raw_html)
title = doc.xpath('//title/text()')[0]
print title 
```

结果是：

```
Unicode Chars: ì ââ
Unicode Chars: 은 —’
Unicode Chars: 은 —’ 
```

因此，显然是样本 1 和缺少`<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />`标签的问题。[此处](https://stackoverflow.com/questions/2686709/encoding-in-python-with-lxml-complex-solution)的解决方案将正确地将示例 1 识别为 utf-8，因此它在功能上等同于我的原始代码。

lxml 文档出现冲突：

从[这里](http://lxml.de/elementsoup.html#using-only-the-encoding-detection)的示例似乎建议我们应该使用 UnicodeDammit 将标记编码为 un​​icode。

```
from BeautifulSoup import UnicodeDammit

def decode_html(html_string):
    converted = UnicodeDammit(html_string, isHTML=True)
    if not converted.unicode:
        raise UnicodeDecodeError(
            "Failed to detect encoding, tried [%s]",
            ', '.join(converted.triedEncodings))
    # print converted.originalEncoding
    return converted.unicode

root = lxml.html.fromstring(decode_html(tag_soup)) 
```

但是[这里](http://lxml.de/parsing.html#python-unicode-strings)说：

> [Y] 当您尝试 [解析] Unicode 字符串中的 HTML 数据时，您将收到错误，该字符串在标头的元标记中指定字符集。在将 XML/HTML 数据传递给解析器之前，您通常应该避免将其转换为 unicode。它既慢又容易出错。

如果我尝试遵循 lxml 文档中的第一个建议，我的代码现在是：

```
from lxml.html import fromstring
from bs4 import UnicodeDammit
...
dammit = UnicodeDammit(raw_html)
doc = fromstring(dammit.unicode_markup)
title = doc.xpath('//title/text()')[0]
print title 
```

我现在得到以下结果：

```
Unicode Chars: 은 —’
Unicode Chars: 은 —’
ValueError: Unicode strings with encoding declaration are not supported. 
```

`<?xml version="1.0" encoding="utf-8"?>`样本 1 现在可以正常工作，但样本 3 由于标签而导致错误。

有没有正确的方法来处理所有这些情况？有比以下更好的解决方案吗？

```
dammit = UnicodeDammit(raw_html)
try:
    doc = fromstring(dammit.unicode_markup)
except ValueError:
    doc = fromstring(raw_html) 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-08T23:44:05.357

`lxml`有[几个](https://github.com/lxml/lxml/issues/94) 与处理 Unicode 相关的[问题。](https://github.com/lxml/lxml/pull/51)在明确指定字符编码时最好使用字节（现在）：

```
#!/usr/bin/env python
import glob
from lxml import html
from bs4 import UnicodeDammit

for filename in glob.glob('*.html'):
    with open(filename, 'rb') as file:
        content = file.read()
        doc = UnicodeDammit(content, is_html=True)

    parser = html.HTMLParser(encoding=doc.original_encoding)
    root = html.document_fromstring(content, parser=parser)
    title = root.find('.//title').text_content()
    print(title) 
```

### 输出

```
Unicode Chars: 은 —’
Unicode Chars: 은 —’
Unicode Chars: 은 —’ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T23:34:02.433

问题可能源于这`<meta charset>`是一个相对较新的标准（如果我没记错的话，HTML5，或者它之前并没有真正使用过。）

在`lxml.html`更新库以反映它之前，您将需要特别处理这种情况。

如果您只关心 ISO-8859-* 和 UTF-8，并且可以舍弃不兼容 ASCII 的编码（例如 UTF-16 或东亚传统字符集），则可以对字节进行正则表达式替换字符串，用`<meta charset>`旧格式替换新`http-equiv`格式。

否则，如果您需要适当的解决方案，最好的办法是自己修补库（并在您使用它时提供修复。）您可能想询问 lxml 开发人员是否有任何半生不熟的代码这个特定的错误，或者他们是否首先在他们的错误跟踪系统上跟踪错误。

# .net - Windows Phone 8 Web 浏览器下载 JSON

> ID：15302129
> 
> 赞同：0
> 
> 时间：2013-03-08T19:50:59.507
> 
> 标签：.net, json, windows-phone-8, webbrowser-control, windows-phone

我试图通过打开此[链接](http://api.quora.com/api/logged_in_user?fields=inbox,notifs,following,followers)来提取 JSON，但 Web 浏览器控件不呈现它。例如，如果您在桌面浏览器中打开上述链接，它会显示 JSON 输出，但在 Windows Phone 上的 IE 控件上却没有，而是说找不到可以打开它的应用程序。

我不想使用 WebClient，因为 Quora 登录 cookie/凭据存储在 Web 浏览器中，所以我不能使用 WebClient，因为用户无法登录。

请帮助，我无法找到解决方案。我想提取 JSON 输出，然后向用户显示数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T19:55:46.433

这不是您正在访问的公共 API。Quora 在前面加上“while(1);” 到 JSON 响应的开头，这样如果您尝试劫持它，那么您的应用程序将无法解析它。

请参阅：[为什么 Google 会在前面添加 while(1)；到他们的 JSON 响应？](https://stackoverflow.com/questions/2669690/why-does-google-prepend-while1-to-their-json-responses)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T23:27:35.317

您**无法**在 Windows Phone 上的 Internet Explorer 控件中打开 JSON 以进行呈现。您必须下载它，然后采取适当的措施。

# html - 下拉悬停时Firefox中的额外像素

> ID：15302132
> 
> 赞同：0
> 
> 时间：2013-03-08T19:51:20.663
> 
> 标签：html, css, drop-down-menu

我`top: 100%`用来在悬停时将子菜单下拉菜单推到主导航栏下方，但在 Firefox 中，菜单被推到菜单边框下方，导致 1px 间隙。在 webkit 浏览器中，它按我想要的方式工作，它显示子菜单，中间没有间隙。我使用 100% 来避免对值进行硬编码。

我创建了一个用于测试的[代码笔。](http://codepen.io/FernE97/pen/lnyzJ)我将菜单周围的边框设置为红色，以便更容易看到问题。第二个导航只是显示悬停状态。

**更新**

如果没有元素`display: table;`，`.nav-main`1px 间隙就会消失，但我正在使用它，因此我可以添加`display: table-cell;`到导航列表项以将它们展开并填充整个导航。关于如何解决这个问题的任何想法？

**html**

```
<nav role="navigation">
    <ul class="nav-main">
        <li><a href="#">Link One</a></li>
        <li>
            <a href="#">Link Two</a>
            <ul class="sub-menu">
                <li><a href="#">Dropdown Link One</a></li>
                <li><a href="#">Dropdown Link Two</a></li>
                <li><a href="#">Dropdown Link Three</a></li>
            </ul>
        </li>
        <li><a href="#">Link Three</a></li>
        <li><a href="#">Link Four</a></li>
    </ul>
</nav> 
```

**scss**

```
$pink: #ed2490;

a {
    text-decoration: none;
}

.nav-main {
    position: relative;
    display: table;
    margin: 0;
    padding: 0;
    width: 100%;
    border: 1px solid lighten(black, 22%);
    border-radius: 4px;
    background: lighten(black, 8%);
    @include background(linear-gradient(bottom, lighten(black, 8%), lighten(black, 36%)));
    font-weight: 500;
    line-height: 1;

    > li {
        display: table-cell;
        text-align: center;
        position: relative;

        &:hover {
            .sub-menu {
                top: 100%;
            }

            a {
                background: lighten(black, 18%);
                background: rgba(black, 0.25);
            }
        }
    }

    a {
        display: block;
        color: white;
        padding: 15px 10px;

        &:hover,
        &:focus {
            background: lighten(black, 18%);
            background: rgba(black, 0.25);
        }
    }

    .sub-menu { // dropdown
        position: absolute;
        top: -999px;
        z-index: 10;
        margin: 0;
        padding: 0;
        width: 200px;
        background: lighten(black, 4%);

        li {
            border-top: 1px solid lighten(black, 18%);

            &:first-child {
                border-top: 0;
            }
        }

        a:hover {
            background: $pink;
        }
    }
}

// For example only
.styleguide-dropdown {
    padding: 40px 20px 130px;
}

.nav-main {
    border-color: red;

    .psuedo-hover {
        a {
            background: lighten(black, 18%);
            background: rgba(black, 0.25);
        }

        .sub-menu {
            top: 100%;

            .psuedo-hover {
                background: $pink;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T21:37:37.603

不寒而栗，任何带有 display: table-* 的东西本质上都很难在浏览器中保持一致的样式。

但是，这就是说，这真的不是你的问题。以下修复都有效：

```
.submenu { display:none;}
:hover > .submenu { display: block;} 
```

或者

```
.submenu { height: 0; overflow:hidden }
:hover > .submenu { height: auto; } 
```

并且其中任何一个对于回流/重绘/重新渲染都应该比顶部的疯狂变化更好。此外，如果您想在页面上重新使用该导航下方，它们将更加强大，而不仅仅是通过将它们发送到负顶部来“隐藏”事物。

干杯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T20:09:00.850

去掉周围的1px边框`ul`解决问题；然后您可以为每个`li`. 虽然`border-radius`不会以相同的方式计算。

我相信原因是2px 边框`ul`的高度超过了`li`2px 的高度，因此 100% 的高度`li`还不够……但我真的不确定这个。

这是一个工作演示：[http ://codepen.io/anon/pen/jsBEt](http://codepen.io/anon/pen/jsBEt)

# windows - 使用 sc.exe 创建 Windows 服务时的大小写

> ID：15302137
> 
> 赞同：1
> 
> 时间：2013-03-08T19:51:46.217
> 
> 标签：windows, service, casing

当我使用命令时：

sc create "myservice" binPath= "C:\somepath\whatever.exe" DisplayName= **"MyService"** start= auto obj= ".\username" password= password

服务创建如下：

显示名称：我的服务

服务名称：我的服务

如您所见，它完全忽略了我在 DisplayName 中指定的大小写。

但是，如果我使用命令：

sc create "myservice" binPath= "C:\somepath\whatever.exe" DisplayName= **"My Service"** start= auto obj= ".\username" password= password

服务创建如下：

显示名称：我的服务

服务名称：我的服务

在我的第一个命令示例中，是什么导致 sc.exe 忽略我指定的显示名称的大小写？是否有另一种方法可以使用指定的大小写创建服务？

从运营的角度来看，服务名称并不重要，但我试图安抚别人的审美。

# android - 首选项在 PreferenceActivity 中自行停用

> ID：15302139
> 
> 赞同：1
> 
> 时间：2013-03-08T19:51:55.790
> 
> 标签：android, preferences

我的 Android 应用程序中有一个 PreferenceActivty，由于兼容性原因，我通过 getPreferenceScreen() 方法和我在代码中创建的一些 Preference 对象使用它，主要是 CheckBoxPreference 和 SwitchPreference。

直到我的应用程序的以前版本，总共有 8 个首选项，一切正常，但现在我又添加了 2 个首选项，我遇到了一个非常奇怪的问题。

屏幕上的第二个首选项是 SwitchPreference。当我打开活动时，它被选中。如果我向下滚动屏幕而不实际更改任何内容，它的值会突然自动设置为 OFF。我尝试将 OnChangeListener 添加到 Preference 并实现 OnSharedPreferenceChangeListener，但结果是相同的：一旦特定的 Preference 从屏幕上消失，它就会关闭。如果它设置为 OFF，它将保持其值并且不会调用更改侦听器。

有谁知道为什么会发生这种情况？我完全迷路了……

提前致谢！

* * *

我的偏好代码基本上是这样的，在 onCreate 方法上针对 5 种不同的设置重复 5 次：

```
controlWifiPreference = new CheckBoxPreference(this);
controlWifiPreference.setKey(Constants.PREF_1_KEY);
getPreferenceScreen().addPreference(controlWifiPreference);

wifiPreference = new SwitchPreference(this);
wifiPreference.setKey(Constants.PREF_2_KEY);
getPreferenceScreen().addPreference(wifiPreference); 
```

由于首选项位于 TabActivity 中，因此在 onResume 方法上，我为每个首选项调用 setChecked() 以再次设置其值，尽管我不确定它是否完全必要。

最后，我有一个 onSharedPreferenceChanged 方法，可以在单击其他人时激活/停用首选项，因为我无法让 setDependency 方法工作。是这样的（再次重复五次）：

```
if (key.equals(controlWifiPreference.getKey())) {
    wifiPreference.setEnabled(controlWifiPreference.isChecked());
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-09T09:55:05.710

原来这是 SwitchPreference 类中的一个 Android 错误。有人（我非常感谢他；））将其报告给 b.android.com，甚至发布了一个解决方法。都在这里：[https ://code.google.com/p/android/issues/detail?id=26194](https://code.google.com/p/android/issues/detail?id=26194)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T16:32:05.560

你是如何在 TabActivity 中实现首选项的？我在我自己的 IDE 中的 PreferenceActivity 中检查了你的代码，它的工作方式就像一个魅力。如果你需要在你的 Activity 中有一些伪首选项，你不应该使用首选项，而是需要使用范式项目并将它们的值手动保存到首选项中。这是我测试的代码，它的工作正常：

公共类 PreferencesFromCode 扩展 PreferenceActivity 实现 OnSharedPreferenceChangeListener {

```
private SwitchPreference switchPref;
private CheckBoxPreference checkboxPref;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setPreferenceScreen(createPreferenceHierarchy());
}

private PreferenceScreen createPreferenceHierarchy() {
    // Root
    @SuppressWarnings("deprecation")
    PreferenceScreen root = getPreferenceManager().createPreferenceScreen(
            this);

    // Inline preferences
    PreferenceCategory inlinePrefCat = new PreferenceCategory(this);
    inlinePrefCat.setTitle(R.string.inline_preferences);
    root.addPreference(inlinePrefCat);

    // Checkbox preference
    checkboxPref = new CheckBoxPreference(this);
    checkboxPref.setKey("checkbox_preference");
    checkboxPref.setTitle(R.string.title_checkbox_preference);
    checkboxPref.setSummary(R.string.summary_checkbox_preference);
    inlinePrefCat.addPreference(checkboxPref);

    // Switch preference
    switchPref = new SwitchPreference(this);
    switchPref.setKey("switch_preference");
    switchPref.setTitle(R.string.title_switch_preference);
    switchPref.setSummary(R.string.summary_switch_preference);
    inlinePrefCat.addPreference(switchPref);

    /*
     * The Preferences screenPref serves as a screen break (similar to page
     * break in word processing). Like for other preference types, we assign
     * a key here so that it is able to save and restore its instance state.
     */
    // Screen preference
    PreferenceScreen screenPref = getPreferenceManager()
            .createPreferenceScreen(this);
    screenPref.setKey("screen_preference");
    screenPref.setTitle(R.string.title_screen_preference);
    screenPref.setSummary(R.string.summary_screen_preference);

    return root;
}

@Override
protected void onResume() {
    super.onResume();
    PreferenceManager.getDefaultSharedPreferences(this)
            .registerOnSharedPreferenceChangeListener(this);
    /*
     * getPreferenceScreen().getSharedPreferences()
     * .registerOnSharedPreferenceChangeListener(this);
     */

}

@Override
public void onSharedPreferenceChanged(SharedPreferences sharedPreferences,
        String key) {
    Log.i("ghjg", "changed key is : " + key);
    if (key.equals(checkboxPref.getKey())) {
        switchPref.setEnabled(checkboxPref.isChecked());
    }
}
} 
```

但是，您可以覆盖`onContentChanged()`并查看会发生什么。

# google-maps - D3 + Google Maps + Paths + Labels 带有平移和缩放的错误

> ID：15302143
> 
> 赞同：1
> 
> 时间：2013-03-08T19:52:06.193
> 
> 标签：google-maps, d3.js, overlay, projection, labels

我是D3新手。我的目标是创建一个地图，在其上绘制一个 SVG 图层并定义区域，然后标记这些区域。

标签有错误。我可以成功添加它们，但是当我平移和缩放它们时，它们不会随地图移动。我感觉它与为文本标签确定的“x”和“y”值有关，但我不确定这些值应该是什么。

```
adminDivisions.selectAll("text")
.data(geoJson.features)
.enter()
.append("text")
.text(function(d){
   return d.properties.title;
})
.attr("x",function(d){
   return path.centroid(d)[0];
})
.attr("y", function(d){
   return path.centroid(d)[1];
}); 
```

我的代码基于此：[Overlay d3 paths on Google Maps?](https://stackoverflow.com/questions/11909099/overlay-d3-paths-onto-google-maps) 还有这个：[将州名添加到 d3.js 中的地图中](https://stackoverflow.com/questions/13897534/add-names-of-the-states-to-a-map-in-d3-js)

带有示例代码的 JSFiddle：http: [//jsfiddle.net/vZmrZ/](http://jsfiddle.net/vZmrZ/)

任何建议都会很棒！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T16:39:53.823

我想出了答案！x 和 y 属性需要调用两次，一次在“进入”之前，一次在“进入”之后，以便在地图移动时更新。不再有平移和缩放问题:)

```
adminDivisions.selectAll("text")
                    .data(geoJson.features)
                    .attr("x",function(d){
                        return path.centroid(d)[0];                         
                    })
                    .attr("y", function(d){
                        return path.centroid(d)[1];                         
                    }) 
                    .enter()                        
                    .append("text")
                    .text(function(d){
                        return d.properties.name;
                    })
                    .attr("x",function(d){
                        return path.centroid(d)[0];                         
                    })
                    .attr("y", function(d){
                        return path.centroid(d)[1];

                    }); 
```

更新小提琴：http: [//jsfiddle.net/vZmrZ/1/](http://jsfiddle.net/vZmrZ/1/)

# arrays - 通过方括号手动设置多暗阵列键未按预期工作

> ID：15302152
> 
> 赞同：1
> 
> 时间：2013-03-08T19:52:41.003
> 
> 标签：arrays, php

抱歉，如果问题的标题不够准确。我最近将我所有的生产资料转移到了一个新的生产服务器（它曾经只是一个本地主机交易）。

问题是我的很多阵列工作不再有效。

我曾经能够按照这些思路做一些事情：

```
$arrtest = array();
$arrtest[1]="a";
$arrtest[1][2]="b";
var_dump($arrtest); 
```

**输出**：

```
array(2) {
  [1]=>
  string(1) "a"
  [2]=>
  array(1) {
    [2]=>
    string(1) "b"
  }
} 
```

这将与以下内容相同：

```
$foo = array(1=>'a',array(2=>'b')); 
```

但是，方括号不再“假设”一个数组。这是新的生产示例：

```
$arrtest = array();
$arrtest[1]="a";
$arrtest[1][2]="b";
var_dump($arrtest); 
```

**输出**：

```
array(1) {
  [1]=>
  string(3) "a b"
} 
```

我假设我在 php.ini 中缺少一个愚蠢的设置？我找不到我要找的东西，因为我不知道如何表达这个问题。

**编辑** 真实世界示例，因为即使我的问题本身也令人困惑。

```
foreach($mans as $key2=>$val2){
$models = scandir($level1.'/'.$val2);
    foreach($models as $key3=>$val3){
        if(substr($val3,0,1)==='.'){
            unset($models[$key3]);
        }
            $mans[$key2][]=$models[$val3];
    }
} 
```

在这一点上几乎要重写整个事情。

尝试扫描顶级目录并获取文件夹名称（保存在 $mans 中）然后递归遍历 $mans 的每个目录并将其目录添加到 $mans[$key] 下作为第二级。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T19:58:02.053

你有一些时髦的逻辑。您的第一个示例不可能产生第一个输出。

您正在将 $arrtest[1] 设置为字符串，但随后您尝试将其设置为数组。它是哪一个？

```
$arrtest = array();
// You need to initialize the array here
$arrtest[1]=array();
$arrtest[1][]="a";
$arrtest[1][2]="b";
var_dump($arrtest); 
```

此示例匹配您的原始输出：

```
$arrtest = array();
// You need to initialize the array here
$arrtest[1]="a";
$arrtest[][2]="b";
var_dump($arrtest); 
```

就像这样：

```
$arrtest = array();
// You need to initialize the array here
$arrtest[1]="a";
$arrtest[2][2]="b";
var_dump($arrtest); 
```

输出：

```
array(2) {
  [1]=>
  string(1) "a"
  [2]=>
  array(1) {
    [2]=>
    string(1) "b"
  }
} 
```

# maven - 如何使用 Maven 生成不确定数量的 WAR 文件？

> ID：15302160
> 
> 赞同：0
> 
> 时间：2013-03-08T19:52:59.617
> 
> 标签：maven, build, maven-2, build-process, maven-3

我想在项目的构建周期中生成多个 WAR 文件。我已经知道如何使用 maven-war-plugin 添加多个*dest-file*和其他配置。但我想知道是否有办法在构建周期中生成**不确定数量的战争**，而无需为每个 WAR 编写配置。

我想为每个客户生成一个构建，我的项目中有以下目录结构：

```
| pom.xml
+ src
  + main
    + clients
      + client1
      + client2
      + client3
      + ...
      + clientn 
```

我想知道如何为每个客户端目录生成 WAR。我只想创建一个 Maven 配置，然后只关心添加一个新文件夹`mvn package`并获取*n 个*WAR 包。

是否可以？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-18T14:24:17.897

似乎 Maven 自己无法做到这一点，所以我最终创建了一个脚本，为`src/main/clients`.

## 在 Unix 中

```
#!/bin/bash
clear

###
# Check for Apache Maven home environment variable.
###
M2_HOME=`$M2_HOME`
if [ -z "$M2_HOME" ]; then
        echo "Error: M2_HOME variable not set. Please set Apache Maven home."
        exit
fi

###
# Build all client packages.
###
echo "Build start."
for f in $0/src/main/clients/*
        do echo Building: %f
        $M2_HOME/bin/mvn package -Dclient.id=`basename $f` -Dclient.path=$f -DskipTests
done;
echo "Build end." 
```

## 在 Windows 中

```
@ECHO off
SET M2_HOME=%M2_HOME%
CD %~p0
ECHO Build start.
FOR /r /d %%G in (src\main\client\*) DO (
    ECHO Building: %%~nG
    %M2_HOME%\bin\mvn package -Dclient.id=%%~nG -Dclient.path=%%G -DskipTests
)
ECHO Build end. 
```

# ssl - 通过 Badger 为 Heroku 添加了带有 DNS 的 RapidSSL 证书，但浏览时仍然是“SSL 不匹配”

> ID：15302164
> 
> 赞同：0
> 
> 时间：2013-03-08T19:53:12.983
> 
> 标签：ssl, heroku, openssl

昨天，我添加了一个 RapidSSL 证书，但是去supplybetter.com 仍然会给出一个 SSL 不匹配警告，并且显示的是 heroku 证书而不是我的证书。我想让这个工作并尽快摆脱警告。

为了获得证书，我按照[本教程](http://blog.pardner.com/2011/04/adding-ssl-to-an-app-hosted-at-heroku/)中的说明进行操作，除了第 16 步中没有与“../ssldir/myapp_mydomain_com_chain.key”类似的内容，因此我使用了唯一的 _chain-less .key 文件我有。我的 PEM 由我的 CRT 和中间 CRT 组成，检查后间距/换行符正确。

我的 DNS 是通过与 Heroku 交互的 Badger.com；当前记录如下所示。[这篇文章](https://stackoverflow.com/questions/12650890/heroku-ssl-endpoint-with-purchased-certificate-does-not-seem-to-work)建议添加一个我没有的 cname，但是如果不卸载 Heroku 插件，Badger 就无法做到这一点；它只允许一个输入，一个“_______.herokuapp.com”地址，其余的都做。

![当前域](../Images/d756d88ff46f6fadb42007fc75c6952f.png)

heroku 证书和 ssl 的结果

```
matt$ heroku certs
Endpoint                  Common Name(s)                          Expires               Trusted
------------------------  --------------------------------------  --------------------  -------
osaka-8681.herokussl.com  www.supplybetter.com, supplybetter.com  2014-03-09 23:27 UTC  True
matt$ heroku ssl
supplybetter.com has no certificate
www.supplybetter.com has no certificate 
```

此问题已提交给 Badger 和 Heroku 支持；如果没有公认的答案，我还没有解决方案。感谢您的帮助！

--

```
Heroku support: 
```

“嘿，

因此，您所遵循的教程是针对我们的旧功能 ssl:hostname 的，该功能已被删除以代替 ssl:endpoint。运行 heroku 证书，我看到您的证书已正确添加。但是，还有最后一步，您需要将您的 CNAME 指向您的 ssl:endpoint osaka-8681.herokussl.com

一旦你这样做了，只需等待 DNS 传播，你就可以开始了。”

现在的问题是，badger 没有我看到的添加非子域 cname 的方法，而且他们的 heroku 应用程序只接受 ____.herokuapp.com 格式的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T01:34:37.580

DNS 不支持域顶点（“非子域”）的 CNAME 记录。[Heroku 文档建议不要使用 apex domain](https://devcenter.heroku.com/articles/avoiding-naked-domains-dns-arecords)。您的 DNS 提供商可能会提供从 domain.com 到 www.domain.com 的重定向功能，您可以利用该功能。

DNSimple 有一个功能可以让您在 Heroku 上使用 apex，但您必须从 badger 切换：http: [//support.dnsimple.com/questions/32831-How-do-I-point-my-domain-顶点到 Heroku](http://support.dnsimple.com/questions/32831-How-do-I-point-my-domain-apex-to-Heroku)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T01:36:45.400

Badger 支持手动实现了我需要的 3 A 记录，以及指向 osaka.herokussl.com 的正确 CNAME。我的主要错误是，当面对 Badger 输入 CNAME 的格式时，_.domain.com，我没有意识到 www 可以工作。它现在已经传播并运行良好。

学到了：

*   截至 2013 年 3 月 8 日，Badger 的 Heroku 插件不支持自定义域，但可以手动添加
*   獾支持非常敏感

# ms-access - MS Access 2010 报表设计非常慢

> ID：15302165
> 
> 赞同：3
> 
> 时间：2013-03-08T19:53:15.777
> 
> 标签：ms-access, vba, ms-access-2010

我有一个带有一堆表单、查询、宏、报告等的 MS Access 2010 数据库

我的报告数据来自通过链接表属性到 SQL Server 2000 表的 ODBC 链接。

现在，每当我进入报表的设计模式时，一切都变得非常缓慢（每次鼠标点击，或选择文本框，或对报表执行的任何操作，我都必须等待至少半分钟）

报告本身需要大约一分钟才能运行。我不介意。

我正在寻找的只是一种更快地更改报告设计的方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-06-26T13:35:02.687

这是一个老问题，但我最近遇到了表单设计运行非常缓慢的类似问题。对我来说，似乎只有一种形式受到影响（所有其他形式在设计模式下都运行良好）。表单的记录源是建立在子查询层次结构上的复杂查询。我将查询结果转储到一个表中，并将该表用作表单而不是查询的记录源。这似乎已经解决了这个问题。希望这对其他人有帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-26T23:06:06.960

我发现主要原因是将 2003 格式转换为 2010 的 Access 转换程序。如果您创建一个新的 .accdb 然后导入所有对象，它应该可以正常工作。我确实解决了我的问题

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-31T12:31:34.787

对我有用的是基于 Albert Kallal 在[http://www.utteraccess.com/forum/lofiversion/index.php/t1959800.html](http://www.utteraccess.com/forum/lofiversion/index.php/t1959800.html)提供的答案。

对我来说，在我的拆分数据库中，如果我打开任何链接到后端的表，那么打开任何前端表单或子表单都非常快。如果我没有打开并保持打开一个链接表，那么从表单视图切换到设计视图大约需要 20 秒，然后打开一个子表单等大约需要 20 秒。 ***当我打开一个链接表时（没关系哪个表，只是链接到后端的任何表），然后执行任何这些功能大约需要 1 秒。*** 巨大的差异！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-08T20:59:48.910

这是不正常的。出了点问题。可能是您的 Office/Access 安装、您的操作系统安装、占用过多系统 CPU 的东西，或者您的系统只是没有资源（如内存）来正确运行 Access。或者您的数据库已损坏和/或臃肿。

您可以尝试两个测试。
首先，对数据库进行压缩/修复，看看是否可以修复它。
其次，是以安全模式启动计算机，看看 Access 是否仍然运行缓慢。这将测试上述大部分问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-01-20T22:22:58.867

对我有用的是将所有本地表上的子数据表名称从“自动”更改为“无”。在表格设计模式的属性表中执行此操作。其他地方发布了例程，可以找到所有本地表并更改此值。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-06-30T00:13:06.167

一个表链接到一个 Excel 文件。我发现当 Excel 文件打开时，要在任何表单上更改设计视图都需要很长时间。关闭 Excel 文件消除了我的问题！

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-11-13T05:41:16.170

My case is access work fine in every function except opening or designing report. But access can work fine when network disconnect. I found it's cause by printer share by other computer and the computer which was removed. I remove the printer from control panel and access can work smoothly.

# java - Android speech turn off number recognition

> ID：15302173
> 
> 赞同：0
> 
> 时间：2013-03-08T19:53:24.713
> 
> 标签：java, android, nlp, speech-to-text

Can anyone tell me if there is a parameter to shutoff the nlp of the google number translation within the android speech API?

For example I'm referring to the spoken 'seventy five' vs '75' recognized by the speech api. It is currently only a number.

I've been looking on [here](http://developer.android.com/reference/android/speech/RecognizerIntent.html), but it doesn't look like it.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T09:09:06.377

目前没有这样的参数。

# java - Are enums allowed to have setters in Java?

> ID：15302188
> 
> 赞同：10
> 
> 时间：2013-03-08T19:54:13.437
> 
> 标签：java, enums

I have an `enum` and it has a parameter (field) that is a `String`. Am I allowed to have a setter for this field?

```
public enum Blah {
    Monday("a"), Tuesday("b");
}

private final String letter;

Blah(String letter){
    this.letter = letter;
} 
```

Am I allowed to do the following?

```
public String setLetter(String letter){
    this.letter = letter;
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-08T20:08:26.100

您需要删除`final`字段的修饰符才能使其可设置：

```
public enum Blah {
    Monday("a"), Tuesday("b");

    private String letter;

    private Blah(String letter){
        this.letter = letter;
    }

    public void setLetter(String letter){
        this.letter = letter;
    }
} 
```

[http://ideone.com/QAZHol](http://ideone.com/QAZHol)

但是，通常不建议在枚举中使用可变状态。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-04-01T09:21:57.783

更新：枚举类型中可能有设置器。

```
public class Main {

public enum Account {

    ACCOUNT("NAME");

    private String name;

    private Account(String name){
        this.name = name;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }
}

public static void main(String[] args) {
    System.out.println(Account.ACCOUNT.getName()); // print NAME
    Account.ACCOUNT.setName("NEW");
    System.out.println(Account.ACCOUNT.getName()); // print NEW
} 
```

}

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-08T20:08:19.630

这不起作用，因为该字段被标记为`final`.

原则上，没有什么可以阻止枚举具有可变字段。然而，这很少是一个好主意。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-10-09T16:19:44.900

允许，但是，如果您要在多线程环境中使用枚举，请不要忘记，尽管 Java 枚举，实际上是一个**延迟初始化的单例**，在延迟初始化期间由 Java 保护（这意味着没有任何其他线程可以访问枚举，直到初始化线程尚未完成初始化），**无论如何都不能防止 setter 的并发使用**。

`volatile`因此，在 OP 的简单设置器的情况下，将可变字段声明为（当然删除）就足够了`final`：

```
volatile int letter; 
```

在更复杂的情况下，例如增量或其他情况（使用枚举几乎不可能，但是......谁知道，枚举设置器本身就是一种奇特的东西）可能需要其他并发武器，如`Atomic`s、`synchronized`blocks、 s。`Lock`

此外，还有[一个关于枚举线程安全的讨论](https://stackoverflow.com/questions/2531873/how-thread-safe-is-enum-in-java)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-08-14T20:11:02.103

在使用过程中`Enums`，将变量声明为`final`.
由于在上面的示例中没有这样做，我们可以将值设置为其他值。

根据定义：
`Enums`就像任何其他类一样，具有预定义的**NonChanging/FIXED**实例集。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-09T12:17:49.487

```
public class EnumExample {
        public enum Blah {
        Monday("a"), Tuesday("b");

        private String letter;

        private Blah(String letter){
            this.letter = letter;
        }

        public void setLetter(String letter){
            this.letter = letter;
        }

        public String getLetter(){
             return letter;
        }
    }

        public static void main (String[] args)         {
             System.out.println("The Value of Monday is "+ Blah.Monday.getLetter());//prints a
             System.out.println("The Value of Tuesday is "+Blah.Tuesday.getLetter());//prints b
        }
} 
```

# sql - SQL multiple insert and one group id

> ID：15302189
> 
> 赞同：0
> 
> 时间：2013-03-08T19:54:14.570
> 
> 标签：sql, nhibernate

I'm working on an MVC/NHibernate/SQL application where I need to insert multiple rows (generated dynamically) into the same table while giving them the same group id. Let's say I have the table with

```
fields(id[Identity], date, amount, group_Id) 
```

How do I figure out a group_id to identify group entries?

As I understand, querying the max group id wouldn't be the solution as many users might access the application at the same time thus generate the same group id. What would be the best way to do it?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T13:45:01.790

```
IList<Entity> group = ...;

var firstId = (int)session.Save(group[0]);
group[0].GroupId = firstId;

foreach(var e in group.Skip(1))
{
    e.GroupId = firstId;
    session.Save(e);
}
session.Flush(); 
```

这确实适用于几乎每个 Id 生成和数据库。这取决于第一个条目的唯一 ID

# python - 应按某些值过滤的字典列表

> ID：15302190
> 
> 赞同：-1
> 
> 时间：2013-03-08T19:54:34.150
> 
> 标签：python, list, dictionary

我有一个字典列表，并且希望只有基于某些键的唯一值。

可以说我有

```
data = [{name: "John", age: "20", occupation: "Python pro"}, \
        {name: "Jack", age: "80", occupation: "Olympic Athlete"}, \
        {name: "John", age: "20", occupation: "Student"}] 
```

我想根据键'name'和'age'来减少它，让它看起来像

```
[{name: "John", age: "20", occupation: "Python pro"}, \
 {name: "Jack", age: "80", occupation: "Olympic Athlete"}] 
```

我尝试了以下方法，但没有意识到它基本上每次都会添加所有内容的明显问题。

```
 all_drives =  drivesInBuilder("object") + drivesInBuilder("account") + drivesInBuilder("container")
    reduced_list = [(x["ip address"], x["name"]) for x in all_drives]
    unique_list = list(set(reduced_list))
    unique_drives = [x for x in all_drives if (x["ip address"], x["name"]) in unique_list]
    print(unique_drives) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T20:05:13.493

```
data = [{"name": "John", "age": "20", "occupation": "Python pro"}, \
        {"name": "Jack", "age": "80", "occupation": "Olympic Athlete"}, \
        {"name": "John", "age": "20", "occupation": "Student"}]

new_data = []
names_ages = set([])
for d in data:
    name_age = (d["name"], d["age"])
    if name_age not in names_ages:
        new_data.append(d)
    names_ages.add(name_age)

print new_data
# [{'age': '20', 'name': 'John', 'occupation': 'Python pro'},
#  {'age': '80', 'name': 'Jack', 'occupation': 'Olympic Athlete'}] 
```

# ruby - Can't install mysql gem on OS X 10.6 Snow Leopard Server

> ID：15302193
> 
> 赞同：2
> 
> 时间：2013-03-08T19:54:41.857
> 
> 标签：ruby, osx-snow-leopard, osx-server, ruby-on-rails-4

Having trouble installing mysql ruby gem on OS X Server 10.6.

This is the error I'm getting:

```
macserver:~ admin$ sudo env ARCHFLAGS="-arch x86_64" gem install mysql -- --with-mysql-       config=/usr/bin/mysql_config

Building native extensions. This could take a while…

ERROR: Error installing mysql:
ERROR: Failed to build gem native extension.

/Users/admin/.rvm/rubies/ruby-1.8.7-p371/bin/ruby extconf.rb --with-mysql-config=/usr/bin/mysql_config

checking for mysql_ssl_set()… yes
checking for rb_str_set_len()… yes
checking for rb_thread_start_timer()… yes
checking for mysql.h… no
checking for mysql/mysql.h… no

*** extconf.rb failed ***

Could not create Makefile due to some reason, probably lack of necessary libraries and/or headers. Check the mkmf.log file for more details. You may need configuration options.

Provided configuration options:
--with-opt-dir
--without-opt-dir
--with-opt-include
--without-opt-include=${opt-dir}/include
--with-opt-lib
--without-opt-lib=${opt-dir}/lib
--with-make-prog
--without-make-prog
--srcdir=.
--curdir
--ruby=/Users/admin/.rvm/rubies/ruby-1.8.7-p371/bin/ruby
--with-mysql-config

Gem files will remain installed in /Users/admin/.rvm/gems/ruby-1.8.7-p371/gems/mysql-2.9.1 for inspection.
Results logged to /Users/admin/.rvm/gems/ruby-1.8.7-p371/gems/mysql-2.9.1/ext/mysql_api/gem_make.out 
```

Any help is appreciated.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T20:13:24.940

您需要安装 MySQL 的开发头文件。Oracle 的默认二进制包不包括这些。

如果您使用 Homebrew 或 MacPorts，它们都将能够提供所需的文件。

# ruby-on-rails-3 - How to include css pie in Rails 3.2 with asset pipeline?

> ID：15302195
> 
> 赞同：0
> 
> 时间：2013-03-08T19:54:51.030
> 
> 标签：ruby-on-rails-3, css, asset-pipeline, css3pie

I would like to include PIE.htc in my Rails application to make CSS3 easier for IE. I can't seem to figure out how to include the PIE.htc file.

I tried to include PIE.htc in my assets folder as well as assets/stylesheets folder, but I no routes matching error.

How do I include PIE.htc with rails asset pipeline?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T16:39:52.047

Try the solution in this post: [Using PIE.htc in rails](https://stackoverflow.com/questions/15483371/using-pie-htc-in-rails)

Basically, it should be:

```
behavior: url(/assets/PIE.htc); 
```

Also, if you want to be completely sure that the PIE.htc file is being loaded, open it and add an alert as so:

```
<script type="text/javascript">
alert("PIE works); 
```

If the file if being loaded, a popup should appear showing the message.

# xml - 尝试使用 XSLT 从 XML 创建 HTML 表

> ID：15302199
> 
> 赞同：0
> 
> 时间：2013-03-08T19:55:03.747
> 
> 标签：xml, xslt, xslt-1.0, xslt-2.0, xslt-grouping

我正在努力使用 XSLT。我被困在程序领域。基本上我有一些从数据库生成的 XML，看起来有点像这样：

```
<?xml version="1.0" encoding="iso-8859-1"?>
<report>
    <generated_dtm>2013-03-08T18:57:26+00:00</generated_dtm>

    <range>
        <start_dtm>2013-02-21T17:52:00+00:00</start_dtm>
        <end_dtm>2013-03-08T17:52:00+00:00</end_dtm>
    </range>

    <sensor site_code="A0001" unit_no="1" sensor_no="1">
        <name>Food</name>
        <mu_symbol>°C</mu_symbol>
    </sensor>

    <sensor site_code="A0001" unit_no="1" sensor_no="2">
        <name>Air</name>
        <mu_symbol>°C</mu_symbol>
    </sensor>

    <readings>
        <slot slot_dtm="2013-02-21T17:50:00+00:00">
            <sensor sensor_no="1">
                <v>10</v>
                <status_code>IR</status_code>
                <status_desc>In Range</status_desc>
            </sensor>
            <sensor sensor_no="2">
                <v>20</v>
                <status_code>Lo</status_code>
                <status_desc>Low</status_desc>
                </sensor>
        </slot>

        <slot slot_dtm="2013-02-21T18:00:00+00:00">
            <sensor sensor_no="2">
                <v>21</v>
                <status_code>Lo</status_code>
                <status_desc>Low</status_desc>
            </sensor>
            <sensor sensor_no="1">
                <v>11</v>
                <status_code>IR</status_code>
                <status_desc>In Range</status_desc>
            </sensor>
        </slot>
    </readings>
</report> 
```

我试图以 HTML 表中的读数结束，每个传感器都是一列，每一行的时间都在左侧，如下所示：

```
Time                      | Food | Air
-------------------------------------
2013-02-21T17:50:00+00:00 | 10   | 11
2013-02-21T18:00:00+00:00 | 20   | 22 
```

Although the order of the time-slots is guaranteed to be ascending so I don't need to sort them (there could be 1000's), the problem is that within each time-slot the order of the sensors cannot be guaranteed, so I thought I would loop through the sensors I used to create the table headers each time and select the correct sensor from each slot as I iterate through the slots. Although this doesn't work you'll probably get what I tried to do (I realise now why it doesn't work.. variables do not behave how I expected!) : -

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:template match="report">
  <html>
  <head>
    <title>Report</title>
  </head>
  <body>
      <table border="0" width="100%" bgcolor="#ffffff" cellspacing="0" cellpadding="2">
        <tr>
          <td class="column_head_above" width="70">Time</td>
          <xsl:for-each select="sensor">
            <td class="column_head_above"><xsl:value-of select="name"/><xsl:text> </xsl:text><xsl:value-of select="mu_symbol"/></td>
          </xsl:for-each>
        </tr>

        <!-- go through each time slot -->

        <xsl:for-each select="readings/slot">
          <tr>
            <xsl:variable name="sdtm" select="@slot_dtm" /> 

            <td class="table_data"><xsl:value-of select="$sdtm"/></td>

            <!-- go through each sensor header -->

            <xsl:for-each select="../sensor">
              <xsl:variable name="sno" select="@sensor_no" /> 
              <td>
                <xsl:value-of select="../readings/slot[@slot_dtm=$sdtm]/sensor[@sensor_no=$sno]/v"/>
                <xsl:value-of select="../readings/slot[@slot_dtm=$sdtm]/sensor[@sensor_no=$sno]/status_desc"/>
              </td>
            </xsl:for-each>

          </tr>
        </xsl:for-each>

        <!-- end: go through each time slot -->

      </table>
  </body>
  </html>
</xsl:template>
</xsl:stylesheet> 
```

There can be 100's or even 1000's of time-slots, this is just a small example. I can adjust the hierarchy of the XML if it helps, but I cannot put the sensors in order within each time-slot without some serious rework of the database query. I'm hoping that isn't necessary.

Originally I had XML where the slots were separated out like this:

```
<readings>
    <slot slot_dtm="2013-02-21T17:50:00+00:00">
        <sensor sensor_no="1">
            <v>10</v>
            <status_code>IR</status_code>
            <status_desc>In Range</status_desc>
        </sensor>
    </slot>

    <slot slot_dtm="2013-02-21T17:50:00+00:00">
        <sensor sensor_no="2">
            <v>20</v>
            <status_code>Lo</status_code>
            <status_desc>Low</status_desc>
            </sensor>
    </slot>

    <slot slot_dtm="2013-02-21T18:00:00+00:00">
        <sensor sensor_no="1">
            <v>11</v>
            <status_code>IR</status_code>
            <status_desc>In Range</status_desc>
        </sensor>
    </slot>

    <slot slot_dtm="2013-02-21T18:00:00+00:00">
        <sensor sensor_no="2">
            <v>21</v>
            <status_code>Lo</status_code>
            <status_desc>Low</status_desc>
        </sensor>
    </slot>
</readings> 
```

Which involved a much simpler database query! Here I could guarantee the order, but the XQuery processor I'm using (Qt's QXmlQuery) does not support for-each-group so I could not find a way to group based on time.

Sorry this is so long, I hope someone can help at least point me in the right direction.

Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T20:51:01.117

This should do it:

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:variable name="allSensors" select="/report/sensor" />

  <xsl:template match="report">
    <html>
      <head>
        <title>Report</title>
      </head>
      <body>
        <table border="0" width="100%" bgcolor="#ffffff"
               cellspacing="0" cellpadding="2">
          <tr>
            <td class="column_head_above" width="70">Time</td>
            <xsl:apply-templates select="sensor" />
          </tr>
          <xsl:apply-templates select="readings/slot" />
        </table>
      </body>
    </html>
  </xsl:template>

  <xsl:template match="report/sensor">
    <td class="column_head_above">
      <xsl:value-of select="concat(name, ' ', mu_symbol)"/>
    </td>
  </xsl:template>

  <xsl:template match="slot">
    <xsl:variable name="currentSensors" select="sensor" />
    <tr>
      <td class="table_data">
        <xsl:value-of select="@slot_dtm"/>
      </td>

      <xsl:apply-templates select="$allSensors/@sensor_no">
        <xsl:with-param name="currentSlot" select="current()/@slot_dtm" />
      </xsl:apply-templates>
    </tr>
  </xsl:template>

  <xsl:template match="@sensor_no">
    <xsl:param name="currentSlot" />

    <td>
      <xsl:variable name="matchingSensor"
                    select="/report/readings/slot[@slot_dtm = $currentSlot]
                            /sensor[@sensor_no = current()]" />
      <xsl:value-of select="concat($matchingSensor/v, ' - ', 
                                       $matchingSensor/status_desc)" />
    </td>
  </xsl:template>
</xsl:stylesheet> 
```

I did some cleanup here, but the main points are:

*   Keeping a variable reference to the sensor definitions for easy access
*   Creating a variable reference to the current slot's sensors, which can be referenced inside the `for-each`.

When run on your sample input, this produces:

```
<html>
  <head>
    <META http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Report</title>
  </head>
  <body>
    <table border="0" width="100%" bgcolor="#ffffff" cellspacing="0" cellpadding="2">
      <tr>
        <td class="column_head_above" width="70">Time</td>
        <td class="column_head_above">Food °C</td>
        <td class="column_head_above">Air °C</td>
      </tr>
      <tr>
        <td class="table_data">2013-02-21T17:50:00+00:00</td>
        <td>10 - In Range</td>
        <td>20 - Low</td>
      </tr>
      <tr>
        <td class="table_data">2013-02-21T18:00:00+00:00</td>
        <td>11 - In Range</td>
        <td>21 - Low</td>
      </tr>
    </table>
  </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T21:01:27.127

Here's an update after spending some time figuring it out. Thanks to JLRishe for his answer too. Between that and what I've worked out it is starting to become clear (until the next problem!).

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:template match="report">
  <html>
  <head>
    <title>Report</title>
  </head>
  <body>
      <table border="0" width="100%" bgcolor="#ffffff" cellspacing="0" cellpadding="2">
        <tr>
          <td class="column_head_above" width="70">Time</td>
          <xsl:apply-templates select="sensors/sensor">
            <xsl:sort select="@sensor_no" />
          </xsl:apply-templates>
        </tr>

        <!-- go through each time slot -->

        <xsl:for-each select="readings/slot">
          <tr>
            <td class="table_data"><xsl:value-of select="@slot_dtm"/></td>

            <!-- go through each sensor header -->

            <xsl:apply-templates select="sensor">
              <xsl:sort select="@sensor_no" />
            </xsl:apply-templates>

          </tr>
        </xsl:for-each>

        <!-- end: go through each time slot -->

      </table>
  </body>
  </html>
</xsl:template>

<xsl:template match="slot/sensor">
    <td>
        <xsl:value-of select="@sensor_no"/> -
        <xsl:value-of select="v"/> -
        <xsl:value-of select="status_desc"/>
    </td>
</xsl:template>

<xsl:template match="sensors/sensor">
    <td class="column_head_above">
        <xsl:value-of select="name"/><xsl:text> </xsl:text><xsl:value-of select="mu_symbol"/>
    </td>
</xsl:template>

</xsl:stylesheet> 
```

# javascript - 谷歌地图未完全呈现

> ID：15302200
> 
> 赞同：0
> 
> 时间：2013-03-08T19:55:08.130
> 
> 标签：javascript, jquery, google-maps

我有一个用于显示谷歌地图的标签，但是它没有显示完整的地图，我已经做了一些谷歌搜索，但仍然无法解决它。我相信它与它位于 jquery 选项卡中的事实有关。我该如何解决？

这就是 html 的样子，包括周围的 div；

```
 <div id="details" class="det_tab1">
                            <ul class="head">
                                <li><a href="#" class="det_tab1">Property details</a></li>
                                <li><a href="#" class="det_tab2">Map view</a></li>
                                <li><a href="#" class="det_tab3">Street view</a></li>
                            </ul>
                            <div class="det_tab2">
                                <div id="map_canvas"></div>
                            </div> 
```

这是javascript

```
 <script type="text/javascript">
        function initialize() {
            var mapOptions = {
                center: new google.maps.LatLng(-34.397, 150.644),
                zoom:8,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            };

            var map = document.getElementById("map_canvas");
            map = new google.maps.Map(map, mapOptions);
            var center = map.get_center();
            google.maps.event.trigger(map, 'resize');
            map.set_center(center);
        }
    </script> 
```

和jQuery；

```
 $('#details .head a').click(function () {
                if ($(this).attr('class') != $('#details').attr('class')) {
                    $('#details').attr('class', $(this).attr('class'));
                }
                return false;
            }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-06T14:51:56.503

对于那些仍在尝试解决此问题的人，触发调整大小立即不起作用，您应该稍微延迟一下。

```
var millisecondsToWait = 200;
setTimeout(function () {
    google.maps.event.trigger(map, 'resize');
    google.maps.event.trigger($('#map'), 'resize');
}, millisecondsToWait); 
```

# c++ - C ++如何使用winsock2通过代理下载html页面

> ID：15302203
> 
> 赞同：-4
> 
> 时间：2013-03-08T19:55:24.220
> 
> 标签：c++, proxy, winsock2

如何使用winsock2通过代理下载html页面

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T19:58:28.180

你甚至不必使用 C++。编写一个批处理脚本来远程登录您要连接的服务器，然后使用命令`get`。然后使用`>>`运算符将​​其写入文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T20:55:08.563

不同类型的代理使用不同类型的通信协议，所以首先你需要决定首先要支持哪种类型的代理——HTTP[`CONNECT`](https://datatracker.ietf.org/doc/html/draft-luotonen-web-proxy-tunneling-01)动词、[SOCKS](http://en.wikipedia.org/wiki/SOCKS)等。首先实现它，然后一旦你成功建立了一个套接字通过代理与目标服务器连接，然后阅读[RFC 2616](https://www.rfc-editor.org/rfc/rfc2616)以了解如何通过该连接实现 HTTP 协议。

# kendo-ui - 绑定到网格的剑道外部模板

> ID：15302204
> 
> 赞同：0
> 
> 时间：2013-03-08T19:55:26.320
> 
> 标签：kendo-ui

```
 <fieldset  id="trans">

            <legend>Transaction info

            </legend>
            <table>

                <tr class="PickListItem">
                    <td>Issued By:</td>
                    <td>#= ActionInitiatedBy #</</td>
                </tr>
                <tr>
                    <td>Exp Date Override:</td>
                    <td>#=ExpDateOverridden #</td>
                </tr>
                <tr>
                    <td>billing Status:</td>
                    <td></td>
                </tr>
                <tr>
                    <td>Bill Batch Date:</td>
                    <td></td>
                </tr>
                <tr>
                    <td>Refunded:</td>
                    <td> #=RefundedDate#</td>
                </tr>
                <tr>
                    <td>Refunded By:</td>
                    <td>#=RefundedBy#</td>
                </tr>
                <tr>
                    <td>
                        <div>
                            Note:
                        <br />
                            #= Note#

                        </div>

                    </td>

                </tr>
                <tr>
                    <td>

                            #if ("#= Refunded #" == 'no'   )
                            {#
                            <div>
                                    <label>Refund Amount : $ #= PatronChargeAmount #</label>    &nbsp;   <a onclick="Refund(' #= ActionHistory_id # ')" class="k-button">Refund?</a>

                            </div>

                            #}#

                    </td>

                </tr>
            </table>

        </fieldset> 
```

我是 MVC 和剑道控件的新手。条件语句没有出错，但 div 从不显示。我究竟做错了什么。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T22:59:52.110

您的 HTML 不正确！你写道：（`<td>#= ActionInitiatedBy #</</td>`有一个额外的`</`）。应该是`<td>#= ActionInitiatedBy #</td>`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T06:47:51.437

确实您的情况不正确 -[检查文档](http://docs.kendoui.com/getting-started/framework/templates/overview)

它应该是这样的

```
<td>
            #if (Refunded == 'no'){#
                        <div>
                           <label>Refund Amount : $ #= PatronChargeAmount #</label>    &nbsp;   <a onclick="Refund(' #= ActionHistory_id # ')" class="k-button">Refund?</a>
                        </div>
            #}#
</td> 
```

# css - CSS Nav 背景图像未显示

> ID：15302206
> 
> 赞同：0
> 
> 时间：2013-03-08T19:55:28.797
> 
> 标签：css

我想在悬停时将图像添加到导航列表，但它不起作用！你能看看我这里有什么
[例子](http://jsfiddle.net/Behseini/933W9/)

```
enter code here
body{background-color:#2D2D2D;}
#nav {
width: 50%;
float: left;
margin: 0 0 3em 0;
padding: 0;
list-style: none;
border-bottom: 1px solid #ccc; 
border-top: 1px solid #ccc;
     }
    #nav li {
float: left; 
     }
    #nav li a {
display: block;
padding: 8px 15px;
text-decoration: none;
font-weight: bold;
color: #069;
border-right: 1px solid #ccc;
    }

    #nav li :hover{
background: url(http://www.demosphere.com/images/stories/glossy-light-bulb.jpg) no-repeat center top;
opacity:0;
    } 
```

谢谢你的时间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T20:04:50.637

因为在这一行背景中： url( [http://www.demosphere.com/images/stories/glossy-light-bulb.jpg](http://www.demosphere.com/images/stories/glossy-light-bulb.jpg) ) no-repeat center top；

我认为您使用正确的属性是错误的属性是使用背景图像

背景图片：网址（[http://www.demosphere.com/images/stories/glossy-light-bulb.jpg](http://www.demosphere.com/images/stories/glossy-light-bulb.jpg)）无重复中心顶部；

# php - 换行并从选项读取到 php 文件

> ID：15302210
> 
> 赞同：0
> 
> 时间：2013-03-08T19:55:36.253
> 
> 标签：php, html, newline, option, fwrite

我目前正在使用 php 写入文本文件。有两件事做得不好。第一个是，我不能跳新线，尝试了很多方法。第二件事是我无法从选定的选项中读取值。有什么解决办法吗？

php 与 html

```
<!DOCTYPE html>

<html>

<head>
<title>Inlämning3</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link rel="stylesheet" type="text/css" href="style.css">
<script type="text/javascript" src="jQuery.js" >
</script>
<script type="text/javascript" src="valideraFilmer.js" >
</script>

</head>

<body>
<div id="page">
    <?php
        include("header.php");
    ?>
    <div id="leftbar">
        <form id="form" method="POST" action="hanteraFilmer.php">
            <fieldset>
                <legend>Lägg till en film:</legend>
                Titel:
                <br><input type="text" name="name" id="name"><br>
                Betyg:
                <br><select id="options">
                    <option value="0">Välj betyg här...  </option>
                    <option value="*"> *</option>
                    <option value="**"> **</option>
                    <option value="***"> ***</option>
                    <option value="****"> ****</option>
                    <option value="*****"> *****</option>                       
                </select>
                <br>
                Länk till imdb:
                <br><input type="text" name="link" id="link"><br>
                Länk till bild:
                <br><input type="text" name="pic" id="pic"><br>
                Filmens handling:
                <br><textArea cols="20" rows="3" name="story" id="story"></textarea><br>
                <br><input type="submit" name="button" value="Spara film" id="button">
            </fieldset>
        </form>
    </div>
    <div id="rightbar">
        <h2>Filmer</h2>
    </div>
    <?php
        include("footer.php");
    ?>
</div>
</body>

</html> 
```

php

```
<?php

$name = $_POST['name'];
$grade = $_POST['options'];
$link = $_POST['link'];
$pic = $_POST['pic'];
$story = $_POST['story'];

$myFile = "filmer.txt";
$handle = fopen($myFile, 'a');

fwrite($handle, $name. ";");
fwrite($handle, $grade. ";");
fwrite($handle, $link. ";");
fwrite($handle, $pic. ";");
fwrite($handle, $story. "/n");
fclose($handle);

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T20:00:02.443

`name`您可以在 中添加一个属性`<select id="options">`，例如`<select id="options" name="options'>`

它应该是`"\n"`，不是`"/n"`

# ios - Pass data back with dismissViewControllerAnimated

> ID：15302219
> 
> 赞同：6
> 
> 时间：2013-03-08T19:55:56.070
> 
> 标签：ios, objective-c, delegates, uistoryboard

I have a `FirstViewController` and a `SecondViewController`. I created a button in `FirstViewController` in order to perform a segue modally to `SecondViewController`.

In `SecondViewController` I have a tableView showing a list of 8 items, as I select an item from that list, I `dismissViewControllerAnimated:`, going back to `FirstViewController`.

What I would like to do is pass a string back to the `FirstViewController`.

I used this post as a reference for my code: [dismissModalViewController AND pass data back](https://stackoverflow.com/q/6203799/2032708)

So this is what I have:

in FirstViewController.h

```
#import <UIKit/UIKit.h>
#import "AppDelegate.h"
#import "SecondViewController.h"

@interface FirstViewController : UIViewController <SecondDelegate>

@end 
```

in FirstViewController.m

```
#import "FirstViewController.h"

@interface FirstViewController ()

@end

@implementation FirstViewController

...

- (void)secondViewControllerDismissed:(NSString *)stringForFirst
{    
    NSString *theString = stringForFirst;
    NSLog(@"String received at FirstVC: %@",theString);
}

@end 
```

in SecondViewController.h

```
#import <UIKit/UIKit.h>

@protocol SecondDelegate <NSObject>
-(void) secondViewControllerDismissed:(NSString *)stringForFirst;
@end

@interface SecondViewController : UIViewController <UITableViewDataSource,UITableViewDelegate>
{
    __weak id myDelegate;
}

@property (nonatomic, weak) id<SecondDelegate> myDelegate;
@property (weak, nonatomic) IBOutlet UITableView *myTableView;

@end 
```

in SecondViewController.m

```
#import "SecondViewController.h"

@interface SecondViewController ()

@end

@implementation SecondViewController

@synthesize myDelegate;
@synthesize myTableView;

...

- (int)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (int)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return 8;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [atributoTableView dequeueReusableCellWithIdentifier:@"MainCell"];

    if(cell == nil){
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"MainCell"];
    }

    cell.textLabel.text = //strings from an array here;    
    return cell;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    if([self.myDelegate respondsToSelector:@selector(secondViewControllerDismissed:)])
    {
        [self.myDelegate secondViewControllerDismissed:@"SOME STRING HERE"];
        NSLog(@"string passed");
    }

    [self dismissViewControllerAnimated:YES completion:nil];
    NSLog(@"SecondViewController dismissed");
}

@end 
```

When I run the app I can go from `FirstViewController` to `SecondViewController`, and when I select a row from the tableView I go back to `FirstViewController` just fine. The problem is that the string "SOME STRING HERE" was not passed back.

What am I missing?

By the way, I'm not sure if this is relevant: I am using ARC and Storyboards.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T20:19:19.780

You have to set the delegate when you present the second view controller, ie, in your FirstViewController:

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
     if ([segue.identifier isEqualToString:@"present_secondviewcontroller]) {
          SecondViewController *svc = (SecondViewController *)segue.destinationViewController;
          svc.delegate = self;
     }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-01T21:27:29.027

According to your problem and the above mentioned solution, you should actually add `svc.myDelegate = self;` instead of `svc.delegate = self;`

# javascript - 将函数放入对象的最佳方法？

> ID：15302220
> 
> 赞同：0
> 
> 时间：2013-03-08T19:55:58.103
> 
> 标签：javascript, oop, function, scope, hoisting

我想知道集成功能的方式是什么……我在下面放了4种方法。由于变量范围和/或声明方式，其中一种更好吗？也许其中一些或全部是完全错误的？任何帮助表示赞赏。非常感谢！

```
//method 1
var derpHerp1 = function() {
    var addMe1 = function (firstNum,secNum){
        var sum = firstNum + secNum;
        return sum
    }
    return {
        derp : 'derp',
        herp : function(){
            alert('herp');
        },
        adding : addMe1(5,6)
    }
}();

//method 2 (2nd line & 3rd to the last changed)
var derpHerp2 = function() {
    var addMe2 = function addMe2(firstNum,secNum){
        var sum = firstNum + secNum;
        return sum
    }
    return {
        derp : 'derp',
        herp : function(){
            alert('herp');
        },
        adding : addMe2(5,6)
    }
}();

//method 3 (2nd line & 3rd to the last changed)
var derpHerp3 = function() {
    function addMe3(firstNum,secNum){
        var sum = firstNum + secNum;
        return sum
    }
    return {
        derp : 'derp',
        herp : function(){
            alert('herp');
        },
        adding : addMe3(5,6)
    }
}();

//method 4 
function addMe4 (firstNum,secNum){
            var sum = firstNum + secNum;
            return sum
}

var derpHerp4 = function() {
    return {
        derp : 'derp',
        herp : function(){
            alert('herp');
        },
        adding : addMe4(5,6)
    }
}(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T20:13:05.353

我会这样做

```
function f1(a, b) {
    ...
}

function f2() {
    ...
}

obj = {
    derp : 'derp',
    herp : (f1),
    adding : (f2)(5,6)
} 
```

# node.js - Ember.js、Express.js 和 Node.js 的资产管道？

> ID：15302221
> 
> 赞同：12
> 
> 时间：2013-03-08T19:55:59.130
> 
> 标签：node.js, ember.js, express, asset-pipeline, assets

我正在使用 Express.js 作为后端构建 Ember.js 应用程序。现在，我单独加载所有 *.js 文件并将我的 Handlebars 模板存储在我的 HTML 文件中。我喜欢用类似于 Rails 中的成熟的“资产管道”来替换。在一个完美的世界中，这将支持：

*   将 CoffeeScript 转换为 JavaScript。
*   使用 Ember.js 扩展预编译 Handlebars 模板。
*   连接和缩小 JavaScript 和 CSS（仅限生产）。

我简要介绍了 Require.js、[connect-assets](https://github.com/adunkman/connect-assets)和 convoy。前两个似乎没有提供任何简单的方法来预编译 Handlebars 模板，并且[Ember convoy 集成](https://npmjs.org/package/ember%20Title)基于 Ember 的过时版本。

[ember-runner](https://github.com/envone/ember-runner)有一段时间没有更新了。[grunt-ember-templates](https://github.com/dgeb/grunt-ember-templates)看起来像是将 Ember 模板编译为单个 *.js 文件的合理方法，因此这可能是更大解决方案的构建块。

是否有任何与 Ember.js 一起工作的 Node.js 资产编译系统？我很想拥有一个相当于[ember-rails](https://github.com/emberjs/ember-rails)的Node.js。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-11T18:28:07.893

[只使用connect-assets](https://github.com/adunkman/connect-assets)、[grunt-ember-templates](https://github.com/dgeb/grunt-ember-templates)和 Gruntfile就可以构建一个非常方便的系统。首先，我们需要在 Gruntfile.coffee 中添加如下配置：

```
grunt.initConfig
  watch:
    ember_templates:
      files: 'assets/templates/**/*.hbr'
      tasks: 'ember_templates'
  ember_templates:
    compile:
      options:
        templateName: (sourceFile) ->
          sourceFile.replace(/assets\/templates\//, '').replace(/\.hbr$/, '')
      files:
        'assets/js/templates.js': 'assets/templates/**/*.hbr'

# Plugins.
grunt.loadNpmTasks('grunt-contrib-watch')
grunt.loadNpmTasks('grunt-ember-templates')

# Default task.
grunt.registerTask('default', ['ember_templates']) 
```

然后，在我们的 Express.js 服务器配置中：

```
app.use require("connect-assets")() 
```

在我们的 index.html 文件中，我们需要在适当的地方添加两行。这些需要通过我们选择的 Node.js 模板引擎进行处理：

```
<%- css("application") %>
<%- js("application") %> 
```

然后我们需要创建 assets/css/application.styl（可以使用 @import 指令）和 assets/js/application.coffee（可以使用“#= require foo”注释）。

要使用这个系统，首先运行：

```
grunt 
```

要使 template.js 文件永久保持最新，请运行：

```
grunt watch 
```

对于其他所有内容，请参阅[connect-assets 文档](https://github.com/adunkman/connect-assets)。请注意，我使用 Stylus 比使用 Less 更幸运，这在撰写本文时似乎存在连接资产的问题。

## 其他快速成熟的工具

自从我写了这个答案以来，我遇到了其他几个以各种方式处理资产编译的好选择：

*   [ember-tools](https://github.com/rpflorence/ember-tools)不支持 CoffeeScript 或样式表（据我所知），但它处理其他资产编译，而且它似乎很受欢迎。
*   [brunch.io](http://brunch.io/)处理范围广泛的资产编译任务，包括 CoffeeScript 和各种 CSS 预处理器。目前最有前途的插件似乎是[brunch-with-ember-reloaded](https://github.com/gcollazo/brunch-with-ember-reloaded)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-08T20:34:57.343

使用 Grunt 的一个很好的起点示例项目：

[https://github.com/trek/ember-todos-with-build-tools-tests-and-other-modern-conveniences](https://github.com/trek/ember-todos-with-build-tools-tests-and-other-modern-conveniences)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T17:05:50.127

我开始着手在 ember 项目中使用 Assetfile 的设置，这是基于 peepcode 教程并添加了构建工具，请参阅：[https ://github.com/pixelhandler/peepcode-ordr](https://github.com/pixelhandler/peepcode-ordr)

至于编译咖啡脚本，这是一个这样做的例子...... [https://github.com/OC-Emberjs/peepcode-ordr-test/blob/assetmanager/Assetfile](https://github.com/OC-Emberjs/peepcode-ordr-test/blob/assetmanager/Assetfile)

```
# Assetfile
require 'rake-pipeline-web-filters'

output "public"

input "js/tests" do

  match "**/*.coffee" do
    coffee_script
    concat "tests.js"
  end

end

# vim:ft=ruby 
```

并像这样预编译 Handlebars 模板......

```
# Assetfile

# See Getting Started readme
# - https://github.com/livingsocial/rake-pipeline/blob/master/GETTING_STARTED.md

# See Assetfile examples:
# - https://gist.github.com/dudleyf/1557811
# - https://github.com/ryanto/ryanto.github.com/blob/master/Assetfile

require "rake-pipeline-web-filters"

output "public"

class HandlebarsFilter < Rake::Pipeline::Filter
  def generate_output(inputs, output)
    inputs.each do |input|
      # for sub-templates we can't really use '/' in a filename so using '__' instead, then replacing
      name = File.basename(input.fullpath, ".handlebars").sub(/__/, "/") 
      output.write "return Ember.TEMPLATES['#{name}'] = Ember.Handlebars.compile(#{input.read.to_json})"
    end
  end
end

input "app/templates" do
  match "**/*.handlebars" do
    filter HandlebarsFilter
    name = proc { |input| File.basename(input.fullpath, ".handlebars").sub(/__/, "/") + "_template" }
    minispade :module_id_generator => name
    concat "js/templates.js"
  end
end

# vim:ft=ruby 
```

这是我以前开始的示例文件：[https ://github.com/hjr3/dasfd/blob/master/Assetfile](https://github.com/hjr3/dasfd/blob/master/Assetfile)

# php - 对象 ID。叫它“id”还是叫它“classnameId”？

> ID：15302222
> 
> 赞同：2
> 
> 时间：2013-03-08T19:55:59.333
> 
> 标签：php, oop

例如，如果我有一个`User`班级和一个`Order`班级，这是命名他们的 ID 的最佳方式？

```
userId vs id
orderId vs id 
```

每个具有 id 的对象也是如此。

我的一个类被调用`DeliveryRequest`了，所以我必须调用它`deliveryRequestId`，你可以看到它有点长，`getDeliveryRequestId()`and方法使它变得更长，如果我只有and `setDeliveryRequestId()`，它会非常简单和容易阅读。`getId()``setId()`

我只是在想，如果你有很多类，它们的主键都称为“id”，这很糟糕吗？通过缩短主标识符进行编码和进行数据库工作时，您/您是否会遇到任何问题或困惑？

有正确或错误的答案，还是只是个人喜好问题？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T20:00:01.230

想想你什么时候会使用这个类。

考虑以下：

```
$deliveryRequest->getDeliveryRequestId(); 
```

对比

```
$deliveryRequest->getId(); 
```

我建议不要重复类的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T19:57:39.047

这是一个很好的问题（我认为），因为这是一种常见的不好的命名习惯。在任何情况下，我都会命名为“id”而不是“somethingId”

您可以只比较代码：

```
$user = new User();

// looks .. hmmm
$id = $user->getUserId();

// looks much better :)
$id = $user->getId(); 
```

# ruby-on-rails - PostgreSQL 复杂的索引类型和排序

> ID：15302224
> 
> 赞同：0
> 
> 时间：2013-03-08T19:56:31.827
> 
> 标签：ruby-on-rails, postgresql, ruby-on-rails-3.2, indexing, postgres-ext

过去几天我一直在做一些关于索引的大量阅读，我试图找出正确的方法来索引我有很多限制的查询。我正在使用[postgres_ext gem](https://github.com/dockyard/postgres_ext)来支持数组数据类型以及 GIN 和 GIST 索引类型。

我有两个疑问

```
.where("a_id IN (?) and b = ? and active = ? and ? != ALL(c) and ? = ANY(d)")
.where("a_id =? and active =? and ? != ALL(c)") 
```

c 和 d 是整数数组

我计划添加的索引：

```
 add_index :deals, [:a, :b], :where => "active = true"
 add_index :deals [:c, :d], :index_type => :gin, :where => "active = true" 
```

postgres 会在第一个查询中使用这两个多列索引吗？

数组数据类型是否应该始终采用“gin”索引类型？或者你也可以把它们放在 b-tree 索引中吗？

最后，第一个索引是否会在两个查询中用于“a”？

**附加信息：**

我正在使用 PostgreSQL 9.1.3

```
create_table "table", :force => true do |t|
 t.integer  "a_id"    ##foreign key
 t.string   "title"
 t.text     "description",    :default => ""
 t.boolean  "active",           :default => true
 t.datetime "created_at",      :null => false
 t.datetime "updated_at",    :null => false
 t.integer  "b",
 t.integer  "c", :limit => 8,   :array => true
 t.integer  "d",  :array => true
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T01:58:04.823

关于数组和 GIN，您可以拥有数组的 b-tree 索引，但它对于“数组包含元素”之类的操作没有用。为此，您需要 GIN 或 GiST，并且仅支持 GIN 作为所有数组类型的内置索引。

您还可以将[`intarray`扩展](http://www.postgresql.org/docs/current/static/intarray.html)及其 GiST 索引类型用于整数数组，这些数组在写入负载下性能更好，但在读取负载下性能更差。

至于Pg是否会使用这两个索引，最好的判断方法是使用[`EXPLAIN ANALYZE`](http://www.postgresql.org/docs/current/static/sql-explain.html)和查看。`log_statement`通过启用或从带有 SQL 登录的 Rails 日志中获取 Rails 从 PostgreSQL 日志中执行的语句。然后`psql`用`explain analyze`. 或者，使用[`auto_explain`扩展](http://www.postgresql.org/docs/current/static/auto-explain.html)在查询运行时捕获性能报告。

I have the feeling that you'll find that Pg can't combine a GiST or GIN and a b-tree index in the same filter. Combining indexes requires a bitmap index scan and that's IIRC only available for two b-tree indexes. You'd probably need to add the extra columns to the GiST or GIN index, but that'll increase the index size quite dramatically and may not be worth it.

You really need to use `explain analyze` to see how it works in the real world on sample or production data.

When working with multicolumn indexes, keep in mind that at least for b-tree indexes Pg can use an index on `(a,b)` for queries that filter on `a` or on both `a` and `b`, but not for queries that filter only on `b`. Indexes are usable left-to-right, you can't use an index to search for a value on the right side of the index unless you're also searching on all values to the left of it.

# sql - 尝试在 oracle sql 中获取超过 30 天的记录

> ID：15302225
> 
> 赞同：0
> 
> 时间：2013-03-08T19:56:33.837
> 
> 标签：sql, oracle

我正在尝试获取 Oracle sql 中超过 30 天（来自 Mod_date）的记录，我正在使用以下查询，它正在返回所有数据，我只想要 30 天前的数据。请有人帮我纠正这个查询示例：- Mod_date 03-NOV-12 12.00.00.000000000 AM 查询：-

```
select Mod_date 
from fil_cnfact 
where Mod_date <= sysdate -30 
order by Mod_date asc ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T19:57:51.457

您的查询要求从今天起小于或等于 30 天的所有记录。将您的操作员更改为`=`仅请求 30 天前的记录。

```
select Mod_date 
from fil_cnfact 
where trunc(Mod_date) = trunc(sysdate)-30 
order by Mod_date asc ; 
```

# ios - 打印分数和高分

> ID：15302227
> 
> 赞同：0
> 
> 时间：2013-03-08T19:56:37.137
> 
> 标签：ios, cocos2d-iphone

我试图更好地解释这种情况。

变量是：

```
int punteggio;

CCLabelTTF *labelPunteggio; 
```

然后在初始化方法中，我在屏幕上打印我的分数：

```
- (id)init {
    if ((self = [super init])) {

    // PUNTEGGIO
    labelPunteggio = [CCLabelTTF labelWithString:@"0000" fontName:@"Marker Felt" fontSize:13];

    [self addChild:labelPunteggio];
    ....
    }
} 
```

这就是在 Punteggio 上添加分数的功能：例如，每次我杀死一个怪物，我都会添加 10 分。

```
-(void)aggiungiPunti
{
    punteggio = punteggio +0001;

    [labelPunteggio setString:[NSString stringWithFormat:@"%d", punteggio]];
} 
```

但是现在，我不知道当玩家完成游戏时如何保存分数。我想保存这个分数，然后在屏幕上打印高分，我想

```
-(void) setScore:(int)score
{
    punteggio = highScore;

    if (punteggio>highScore)
    {
        highScore = punteggio;
    }
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T20:11:24.483

您的 setScore 方法肯定不起作用，因为您设置了 highScore = punteggio，if 永远不会为真。尝试：

```
-(void) setHighScore:(int) newScore {
    if(newScore>highScore) highScore = newScore;
} 
```

并且每次更新当前分数

```
-(void)aggiungiPunti
{
    punteggio = punteggio +0001;
    [labelPunteggio setString:[NSString stringWithFormat:@"%d", punteggio]];
    [self setHighScore:punteggio];
} 
```

这样，无论游戏状态如何，您的 highScore 变量都将始终设置。不要忘记在当前游戏开始时将 highScore 设置为您必须在某处坚持的当前 highScore。

# javascript - 单元测试 AngularJS 模块控制器

> ID：15302230
> 
> 赞同：5
> 
> 时间：2013-03-08T19:56:40.770
> 
> 标签：javascript, angularjs, jasmine

我正在查看 TODO MVC AngularJS 示例，我看到应用程序被定义为一个模块。

```
var todomvc = angular.module('todomvc', []); 
```

在控制器内部，我看到它们定义为：

```
todomvc.controller('TodoCtrl', function TodoCtrl($scope, $location, todoStorage, filterFilter) {
    //...
}); 
```

我的问题涉及单元测试......我如何为该类编写单元测试？

我试过这样的事情：

```
describe('TodoCtrl', function () {
    var controller;

    beforeEach(function () {
        controller = todomvc.TodoCtrl;
    });

    afterEach(function() {
        controller = null;
    });

    describe('addTodo() method', function() {
        console.log(controller)
        it('should do something', function () {
            expect(typeof controller.addTodo).toBe(true); //should fail
        });

    });
}); 
```

...但随后“控制器”最终为空或未定义。

我是否需要修改 TODO MVC 应用程序以使传递给*todomvc.controller()*的函数不是匿名的？

任何方向都会受到赞赏，因为我对 Angular 很陌生。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-08T21:13:05.797

您需要使用该`$controller`服务对控制器进行单元测试。

基本上，你做这样的事情：

```
var scope, ctrl;

beforeEach(inject(function($rootScope, $controller) {
  scope = $rootScope.$new();
  ctrl = $controller('TodoCtrl', {$scope: scope});
}));

//use scope and ctrl as needed 
```

请参阅此处的示例：[https ://github.com/angular/angular-phonecat/blob/master/test/unit/controllersSpec.js#L18](https://github.com/angular/angular-phonecat/blob/master/test/unit/controllersSpec.js#L18)

# c# - 将 Grid 字段绑定到 XML String 元素

> ID：15302231
> 
> 赞同：0
> 
> 时间：2013-03-08T19:56:41.513
> 
> 标签：c#, xml, data-binding, telerik, telerik-grid

在这种情况下，我使用的是 Telerik 的 RadGrid，但就这个问题而言，我认为这并不重要。我有如下格式的 XML 字符串：

```
<Root>
    <Sub>
        <Name>a</Name>
        <Value>1</Value>
    </Sub>
    <Sub>
        <Name>b</Name>
        <Value>2</Value>
    </Sub>
</Root> 
```

在数据绑定时，我为所有不同的值创建列，`Name`现在我想将数据绑定到`Value`每一行？

使用 sql （以相同格式）导出此数据时，我可以使用

```
Root.value('(Root/Sub[Name="a")/Value)[1]', 'nvarchar(50)') as 'a' 
```

所以我基本上需要这样做的东西，但是当绑定到基于 xml 字符串的网格上的一行时。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T18:43:44.650

看看以下在线演示：

*   [网格 - 从 XML 编程创建](http://demos.telerik.com/aspnet-ajax/grid/examples/programming/gridfromxml/defaultcs.aspx)
*   [网格 - 使用 XmlDataSource 编辑 XML](http://demos.telerik.com/aspnet-ajax/grid/examples/dataediting/xmldatasource/defaultcs.aspx)

# android - 围绕中心放置两个文本视图。（左右对齐）

> ID：15302235
> 
> 赞同：0
> 
> 时间：2013-03-08T19:56:52.247
> 
> 标签：android, android-layout

我有一个`ListView`每行有两个单词的地方。我希望这两个词围绕中心对齐，有一个小间隙。

类似于（一些随机词......）：

```
 Please    Help
     me    !!
   This    should
    not    be
     so    hard 
```

中的每一行`ListView`由两个`TextView`s..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T20:01:58.687

```
<LinearLayout 
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

    <TextView
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="0.4"
        android:gravity="right" />

    <View
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="0.2"
        />

    <TextView
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="0.4"
        android:gravity="left" />

</LinearLayout> 
```

# php - preg_match 不再从文件中提取数据

> ID：15302236
> 
> 赞同：0
> 
> 时间：2013-03-08T19:56:53.223
> 
> 标签：php

我正在使用以下代码：

```
<?

$file = file("http://www.schoolclosingsnetwork.com/output/clearchannel/wgyweb.asp");

while ($row = each($file)) {
    $match = preg_match("/\"(.*)\"\,\"(.*)\"/i", $row[1], $matches);
    echo '<b>' . $matches[1] . '</b><br>';
    echo $matches[2] . '<br><br>';
}

if ($match == 0) {
    echo '<p>No announcements found.</p>';
}

?> 
```

拉动学校关闭和延误的饲料，这一直在完美地工作。但是，截至今天，它已停止工作。

它从中提取的信息在`$file`

通常会发生的是输出如下所示：

**学校名称** 关闭/延迟

现在我得到的只是没有找到任何公告，就好像它没有找到任何匹配项一样。

也许我只是忽略了一些东西？我对 PHP 不太熟练，因为它通常不是我日常生活中不可或缺的一部分。

所以任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T20:12:45.440

您尝试解析的数据是 CSV 格式的数据。您应该使用更合适的功能，例如[`str_getcsv`](http://php.net/manual/en/function.str-getcsv.php)对其进行解码：

```
$file = file("http://www.schoolclosingsnetwork.com/output/clearchannel/wgyweb.asp");

foreach ($file as $row) {
    $matches = str_getcsv($row);
    echo '<b>' . $matches[0] . '</b><br>';
    echo $matches[1] . '<br><br>';
} 
```

# spring - Spring MVC 控制器单元测试未调用 @ControllerAdvice

> ID：15302243
> 
> 赞同：84
> 
> 时间：2013-03-08T19:57:22.073
> 
> 标签：spring, spring-mvc, junit

我在应用程序中有一组控制器和一个注释类，`@ControllerAdvice`它设置了在每个控制器中使用的某些数据元素。我正在`Spring MVC 3.2`为这些控制器使用并拥有 Junits。当我运行 Junit 时，如果我在其中部署应用程序并通过浏览器提交请求，控件将不会进入`ControllerAdvice`它工作正常的类。`Tomcat`

请问有什么想法吗？

* * *

## 回答 #1

> 赞同：129
> 
> 时间：2015-02-25T19:24:44.313

在使用@eugene-to 的答案和另一个类似的答案后，[我](https://stackoverflow.com/q/24765219/945789)发现了限制并在 Spring 上提出了一个问题：[https ://jira.spring.io/browse/SPR-12751](https://jira.spring.io/browse/SPR-12751)

因此，Spring test`@ControllerAdvice`在 4.2 中引入了在构建器中注册类的能力。如果您使用的是*Spring Boot*，那么您将需要 1.3.0 或更高版本。

通过这项改进，如果您使用独立设置，则可以设置一个或多个`ControllerAdvice`实例，如下所示：

```
mockMvc = MockMvcBuilders.standaloneSetup(yourController)
            .setControllerAdvice(new YourControllerAdvice())
            .build(); 
```

**注意：**该名称`setControllerAdvice()`可能不会立即显而易见，但您可以将许多实例传递给它，因为它具有 var-args 签名。

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2013-10-12T19:39:23.017

假设你有一个用@ControllerAdvice 注释的类MyControllerAdvice，它的方法用@ExceptionHandler 注释。对于 MockMvc，您可以轻松地将此类添加为异常解析器。

```
@Before
public void beforeTest() {
    MockMvc mockMvc = standaloneSetup(myControllers)
        .setHandlerExceptionResolvers(createExceptionResolver())
        .build();
}

private ExceptionHandlerExceptionResolver createExceptionResolver() {
    ExceptionHandlerExceptionResolver exceptionResolver = new ExceptionHandlerExceptionResolver() {
        protected ServletInvocableHandlerMethod getExceptionHandlerMethod(HandlerMethod handlerMethod, Exception exception) {
            Method method = new ExceptionHandlerMethodResolver(MyControllerAdvice.class).resolveMethod(exception);
            return new ServletInvocableHandlerMethod(new MyControllerAdvice(), method);
        }
    };
    exceptionResolver.afterPropertiesSet();
    return exceptionResolver;
} 
```

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2013-09-20T07:38:49.527

我在尝试`ExceptionHandler`用`@ControllerAdvice`. 就我而言，我必须在测试类上添加`@Configuration`带有`@EnableWebMvc`注释的文件。`@ContextConfiguration`

所以我的测试看起来像这样：

```
@RunWith(SpringJUnit4ClassRunner.class)
@WebAppConfiguration
@ContextConfiguration(classes = {
  RestProcessingExceptionHandler.class,
  TestConfiguration.class,
  RestProcessingExceptionThrowingController.class })
public class TestRestProcessingExceptionHandler {

  private MockMvc mockMvc;
  @Autowired
  WebApplicationContext wac;

  @Before
  public void setup() {
    mockMvc = webAppContextSetup(wac).build();
  }

  @Configuration
  // !!! this is very important - conf with this annotation 
  //     must be included in @ContextConfiguration
  @EnableWebMvc
  public static class TestConfiguration { }

  @Controller
  @RequestMapping("/tests")
  public static class RestProcessingExceptionThrowingController {
    @RequestMapping(value = "/exception", method = GET)
    public @ResponseBody String find() {
      throw new RestProcessingException("global_error_test");
    }
  }

  @Test
  public void testHandleException() throws Exception {
    mockMvc.perform(get("/tests/exception"))
      .andExpect(new ResultMatcher() {
        @Override
        public void match(MvcResult result) throws Exception {
          result.getResponse().getContentAsString().contains("global_error_test");
        }
      })
      .andExpect(status().isBadRequest());
  }
} 
```

通过`@EnableWebMvc`配置，我的测试通过了。

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2017-07-11T13:28:37.707

这段代码对我有用：

```
public class MyGlobalExceptionHandlerTest {

    private MockMvc mockMvc;

    @Mock
    HealthController healthController;

    @BeforeTest
    public void setUp() {
        MockitoAnnotations.initMocks(this);
        mockMvc = MockMvcBuilders.standaloneSetup(healthController)
            .setControllerAdvice(new GlobalExceptionHandler())
            .build();
    }

    @Test(groups = { "services" })
    public void testGlobalExceptionHandlerError() throws Exception {
        Mockito.when(healthController.health())]
               .thenThrow(new RuntimeException("Unexpected Exception"));
        mockMvc.perform(get("/health")).andExpect(status().is(500));
    }
} 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2013-04-08T10:27:51.190

很长一段时间以来，我一直在为同样的事情苦苦挣扎。经过大量挖掘，最好的参考是 Spring 文档：

[http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/testing.html#spring-mvc-test-framework](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/testing.html#spring-mvc-test-framework)

简而言之，如果您只是测试一个控制器及其方法，那么您可以使用*“standaloneSetup”*方法来创建一个简单的 Spring MVC 配置。这将**不**包括您使用 @ControllerAdvice 注释的错误处理程序。

```
private MockMvc mockMvc;

@Before
public void setup() {
    this.mockMvc = MockMvcBuilders.standaloneSetup(new AccountController()).build();
}

// ... 
```

要创建包含错误处理程序的更完整的 Spring MVC 配置，**您**应该使用以下设置：

```
@RunWith(SpringJUnit4ClassRunner.class)
@WebAppConfiguration
@ContextConfiguration("test-servlet-context.xml")
public class AccountTests {

    @Autowired
    private WebApplicationContext wac;

    private MockMvc mockMvc;

    @Autowired
    private AccountService accountService;

    // ...

} 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2020-03-10T09:06:13.423

应该由`ControllerAdvice`挑选`@WebMvcTest`，另请参阅[Spring-Doc](https://docs.spring.io/spring-boot/docs/1.5.2.RELEASE/reference/html/boot-features-testing.html#boot-features-testing-spring-boot-applications-testing-autoconfigured-mvc-tests) Works so far for me。

例子：

```
@RunWith(SpringRunner.class)
@WebMvcTest(ProductViewController.class) 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-08-20T18:46:38.930

@tunguski 示例代码有效，但了解事物的工作原理是值得的。这只是一种设置方式。

`@EnableWebMvc`相当于在一个spring配置文件中跟随

`<mvc:annotation-driven />`

基本上为了让事情正常工作，您需要初始化 Spring Mvc 并加载所有控制器和 bean 引用。因此，以下可能是有效的设置以及替代设置

以下是您将如何设置测试类

```
 @RunWith(SpringJUnit4ClassRunner.class)
    @ContextConfiguration(locations = { "classpath: "classpath:test-context.xml" })
    @WebAppConfiguration    
    public class BaseTest {

        @Autowired
        WebApplicationContext wac;

        private MockMvc mockMvc;

        @Before
        public void setUp()  {
            mockMvc = MockMvcBuilders.webAppContextSetup(webApplicationContext).build();
        }
    } 
```

以下可能是测试的弹簧配置

```
<mvc:annotation-driven />
<context:component-scan base-package="com.base.package.controllers" /> 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-10-30T04:50:43.457

[我在使用spock](http://spockframework.org/) (groovy)编写控制器测试时遇到了这个问题。我的测试课最初是这样写的：

```
@AutoConfigureMockMvc(secure = false)
@SpringBootTest
@Category(RestTest)
class FooControllerTest extends Specification {
  def fooService = Mock(FooService)
  def underTest = new FooController(FooService)
  def mockMvc = MockMvcBuilders.standaloneSetup(underTest).build()
....
} 
```

这导致 ControllerAdvice 被忽略。将代码更改为 Autowire 模拟解决了问题。

```
@AutoConfigureMockMvc(secure = false)
@SpringBootTest
@Category(RestTest)
class FooControllerTest extends Specification {

  @AutowiredMock
  FooService FooService

  @Autowired
  MockMvc mockMvc 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-03-08T20:22:56.237

您需要提供更多信息，可能还需要提供一些实际代码和/或配置文件，然后才能获得具体答案。也就是说，根据您提供的信息，听起来带注释的 bean 没有被加载。

尝试将以下内容添加到您的测试 applicationContext.xml （或等效的 spring 配置文件，如果您正在使用）。

```
<context:component-scan base-package="com.example.path.to.package" /> 
```

或者，您可能需要通过在测试类之前包含以下注释来“手动”加载测试中的上下文：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration("/applicationContext.xml") 
```

祝你好运！

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-05-17T08:45:11.373

我怀疑您需要在测试中使用 asyncDispatch；异步控制器破坏了常规测试框架。

尝试以下方法：[https ://github.com/spring-projects/spring-framework/blob/master/spring-test/src/test/java/org/springframework/test/web/servlet/samples/standalone/AsyncTests .java](https://github.com/spring-projects/spring-framework/blob/master/spring-test/src/test/java/org/springframework/test/web/servlet/samples/standalone/AsyncTests.java)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-05-29T05:44:16.143

我正在使用 Spring Boot 2.x，但似乎不再需要 MockMvcBuilders，或者当我们将 ControllerAdvice 定义为配置的一部分时，它会被加载。

```
@WebMvcTest
@ContextConfiguration(classes = {
  UserEndpoint.class, //the controller class for test
  WebConfiguration.class, //security configurations, if any
  StandardRestExceptionInterpreter.class. //<-- this is the ControllerAdvice class
})
@WithMockUser(username = "test@asdf.com", authorities = {"DEFAULT"})
@TestMethodOrder(MethodOrderer.OrderAnnotation.class)
public class UserEndpointTests {

@Test
@Order(3)
public void shouldThrowExceptionWhenRegisteringDuplicateUser() throws Exception {
    //do setup...
    Mockito.doThrow(EntityExistsException.class).when(this.userService).register(user);

    this.mockMvc
            .perform(MockMvcRequestBuilders
                    .post("/users")
                    .contentType(MediaType.APPLICATION_JSON)
                    .content(this.objectMapper.writeValueAsString(user)))
            .andDo(MockMvcResultHandlers.print())
            .andExpect(MockMvcResultMatchers.status().isConflict());
    }
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-12-29T15:20:17.640

最简单的方法是将您的@ControllerAdvice 注释类添加到@ContextConfiguration。

我不得不改变

```
@AutoConfigureMockMvc
@ContextConfiguration(classes = OrderController.class)
@WebMvcTest
class OrdersIntegrationTest 
```

对此：

```
@AutoConfigureMockMvc
@ContextConfiguration(classes = {OrderController.class, OrdersExceptionHandler.class})
@WebMvcTest
class OrdersIntegrationTest 
```

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2021-09-17T12:51:46.543

刚遇到同样的问题，但通过将建议器添加到@SpringBootTest 中的类来解决它：

```
@RunWith(SpringRunner.class)
@SpringBootTest(classes = {MyController.class, MyControllerAdvice.class})
@AutoConfigureMockMvc(secure = false)
@ContextConfiguration(classes = {MyTestConfig.class})
@EnableWebMvc 
```

# javascript - 当使用向上/向下箭头移动时运行函数 我有一个这样的下拉菜单： <select id="test"><option value="1">1</option> <option value="2">2</option> <option value="3">3</option> <option value="4">4</option></select> 如果我想在用户更改他

> ID：15302247
> 
> 赞同：6
> 
> 时间：2013-03-08T19:57:40.913
> 
> 标签：javascript, jquery, cross-browser, onchange, keypress

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T20:04:33.847

在 FireFox`change`事件在事件之后触发`kepress`，您可以使用`keyup`代替`keypress`：

```
select.keyup(function () { 
    log.append(this.value + "<br>"); 
}); 
```

[http://jsbin.com/ezalav/3](http://jsbin.com/ezalav/3)

# java - 用堆栈反转单词

> ID：15302249
> 
> 赞同：7
> 
> 时间：2013-03-08T19:57:49.553
> 
> 标签：java

我是新来的，也是编程新手。我正在尝试单独学习其他主题，因为当我有问题时，我的老师没有足够的帮助，所以就这样吧。我想用通用堆栈反转一个单词。

*我的 pop、push、isEmpty 和 peek 方法有效（我用一个更简单的程序对它们进行了测试，然后我在这个程序上尝试了它。）并且输出似乎给我一个 char 一个反向的单词，但之前总是给我一个 null每个字符！*

我的问题是：为什么会这样？即使我有一个 expandCapacity 方法可以在容量为 9 时工作，但是当输入超过限制时它并不适用。

* * *

# 这是我的代码

```
package Stack;

import java.util.Scanner;

public class ReverseDriver<T> {
    private static String out;
    private static String in;

    public static void main(String[] args) {

        Scanner input = new Scanner(System.in);
        System.out.println("Enter your sentence: ");
        in = input.nextLine();
        int size = in.length();

        ArrayStack<Character> revStack = new ArrayStack<>(size);

        for (int i = 0; i < in.length(); i++) {

            char u = in.charAt(i);
            revStack.Push(u);
            if (in.length() > 9) {

                revStack.expandCapacity();

            }
        }

        while (!revStack.IsEmpty()) {
            char u = revStack.Pop();
            out = out + u;
            System.out.flush();
            System.out.print(out);

        }

    }
} 
```

# 这是输出

```
run:
Enter a word: 
word
nullr
nullro
nullrow
Exception in thread "main" java.lang.NullPointerException
    at Stack.ReverseDriver.main(ReverseDriver.java:37)
Java Result: 1
BUILD SUCCESSFUL (total time: 2 seconds) 
```

# 编辑：这是我说的有效的方法。

```
@Override
public void Push ( T element)
   {
     if (count == stack.length){
         expandCapacity();
     }
      stack[++count] = element;

       //System.out.println(count);
   }

  @Override
   public String toString()
   {
      String result = "<top of stack>\n";

      for (int index=count-1; index >= 0; index--){
         result += stack[index] + "\n";
      }
      return result + "<bottom of stack>";
   }

         @Override
    public boolean IsEmpty()
    { //Checks if array is empty
        if(count == 0){
        System.out.println("Nothing");
        }

         return count == 0;

    }

 public  T Pop() 
      {

             T output; 

         output =  (stack[count - 1]);
         count--;

         return(output);

      }

 @Override
    public T Peek()
      {
          //looks at the object at the top of this stack without removing it
     //from the stack.

          if(stack.length == 0){
         // {
      System.out.println("Cant peek a ghost");

          }

         return(stack[--count]);

      }
         // else
         // {
     // System.out.println( stack[count-1]);

         // }

     // }

      @Override
    public int Size()
    {
        //Sets the size of this vector
        if(stack.length == 0){
            System.out.println("Nothing inside");
        }

       System.out.println("The array's size is : " + count);
        return count;

    }

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-08T20:03:48.770

```
private static String out; 
```

中的值为`out`空。

```
out = out + u;
// This is null = null + u; 
```

因此，输出开头的 null 。

您只需要创建一个新的 String 对象来赋予`out`初始值：

```
 private static String out = ""; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T20:16:02.300

我不确定你为什么需要那个`ExpandCapacity`位，这也有效：

```
public static void main(String[] args)
    {       

    String word ="reverse please";      
    Stack<Character> chStack = new Stack<Character>();      
    for (int i = 0; i < word.length(); i ++)
    {       
        chStack.push(word.charAt(i));       
    }

    String out = "";
    while (chStack.size() != 0)
    {
        out += chStack.pop();
        System.out.println(out);

    }               
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T20:28:33.343

有几点注意事项：

*   你不是在写一个泛型类所以 drop 。
*   尽可能多地保留迭代。
*   尽量使用 Java 标准类，在本例中使用 Stack 而不是 ArrayStack。
*   您不需要调整堆栈的大小，它会在您放入更多数据时动态处理其大小。
*   您应该在完成创建字符串后编写字符串，而不是在每一步中编写一次。
*   使用 + 附加字符串是非常低效的。使用字符串生成器。
*   使用它们使您的代码可读的方法。

继承人的代码：

```
import java.util.Scanner; 
import java.util.Stack;

public class ReverseDriver {
  public static String reverse(String string) {
    Stack<Character> revStack = new Stack<Character>();
    for (char c : string.toCharArray()) {
      revStack.push(c);
    }
    StringBuilder builder = new StringBuilder();
    while(!revStack.isEmpty()){
      builder.append(revStack.pop());
    }
    return builder.toString();
  }

  public static void main(String[]args){
    Scanner input = new Scanner(System.in);
    System.out.println("Enter your sentence: ");
    String in = input.nextLine();
    System.out.println(reverse(in));
  }
} 
```

# joomla - 隐藏美德商城页面详情中的最新产品模块

> ID：15302251
> 
> 赞同：0
> 
> 时间：2013-03-08T19:57:51.807
> 
> 标签：joomla, joomla1.5, virtuemart

我正在使用 Joomla 1.5 和 meadowmart 1.1.9，我已经将最新的模块包含在了 traitsmart 中。它在产品详细信息中显示模块，我也只想在 mercurial 头版中显示

我如何在产品详细信息页面中隐藏这些模块

```
div id="mainBlock">
    <jdoc:include type="modules" name="shopmodule" />                   
    <jdoc:include type="component" />

</div> 
```

请帮助我摆脱困境

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T23:07:34.607

找出一个参数来标识这个视图，即view = "product-detail"，然后

```
if (JRequest::getVar("view","")!=="product-details") {
   ?><jdoc:include type="modules" name="shopmodule" />     <?
} 
```

# haskell - GHCi 和 C 文件的 ByteCodeLink 错误

> ID：15302255
> 
> 赞同：5
> 
> 时间：2013-03-08T19:58:03.137
> 
> 标签：haskell, cabal, ghci

当我使用我创建的 C 函数的外部导入运行我的文件时，我收到此错误。

```
 ByteCodeLink: can't find label
    During interactive linking, GHCi couldn't find the following symbol:
              richards
    This may be due to you not asking GHCi to load extra object files,
    archives or DLLs needed by your current session.  Restart GHCi, specifying
    the missing library using the -L/path/to/object/dir and -lmissinglibname
    flags, or simply by naming the relevant files on the GHCi command line.
    Alternatively, this link failure might indicate a bug in GHCi.
    If you suspect the latter, please send a bug report to:
     glasgow-haskell-bugs@haskell.org 
```

在创建 .cabal 文件并从那里将其加载到 GHCi 后，我仍然收到此错误。有任何想法吗？

# android - 使用 Android 或 iOS SDK 监控应用程序活动

> ID：15302258
> 
> 赞同：0
> 
> 时间：2013-03-08T19:58:17.010
> 
> 标签：android, ios, monitoring, tracking, usage-statistics

除了应用程序是否启动之外，我是否可以使用上述方法监控应用程序活动。如果没有，我可以通过 iBooks 或任何 Epid 阅读器监控 ePub 的使用情况吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T20:11:39.703

我将无法帮助您解决您的 IOS 问题。但是对于 android，有一些工具可以监控您的应用程序的活动。我不能代表每个开发人员程序，但是当您使用带有 android SDK 的 Eclipse 时，您将受益于大量的工具。

在 Eclipse 中，您可以通过以下方式找到这些工具：Window>Show view>other（或按 ALT+SHIFT+Q、Q）。在屏幕中，您可以查找 Android 文件夹中列出的工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T20:44:30.123

对于 iOS，您可以使用 Instruments 通过 USB 监控应用程序活动。

选择 Xcode > 打开开发者工具 > 仪器。根据您想要的数据选择模板并选择目标应用程序。创下纪录，一切就绪！

# c# - 如何在 Windows 表单标签页中添加 wpf 表单？

> ID：15302259
> 
> 赞同：0
> 
> 时间：2013-03-08T19:58:17.127
> 
> 标签：c#, wpf, winforms, tabcontrol

当单击显示按钮时，我在 tabcontrol 中显示 win 表单的 win 表单元素，但我无法在此 tabcontrol 中添加 wpf 表单；

Faturalar() 是获胜形式；

```
Fatura.Faturalar ftr = new Fatura.Faturalar();
ftr.TopLevel = false;
ftr.Visible = true;
ftr.FormBorderStyle = FormBorderStyle.None;
ftr.Dock = DockStyle.Fill;
tabControl1.TabPages[0].Controls.Add(ftr); 
```

它有效，但是；

MainWindow 是 wpf 形式；

```
MenuYonetimi.MainWindow mny = new MenuYonetimi.MainWindow();
tabControl1.TabPages[2].Controls.Add(mny); 
```

它不允许做

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-03-08T20:02:15.497

如果你想这样称呼它，顶级`Window`s 不能包含在其他`Window`s 或“表单”中。如果您在 winforms 应用程序中需要 WPF 内容，则需要[`ElementHost`](http://msdn.microsoft.com/en-us/library/system.windows.forms.integration.elementhost.aspx)在表单内放置一个 WPF UI（可能在 WPF 中`UserControl`）。但是任何表单或窗口都不可能包含另一个`Window`.

# python - Hadoop Streaming 命令失败并出现 Python 错误

> ID：15302262
> 
> 赞同：3
> 
> 时间：2013-03-08T19:58:33.447
> 
> 标签：python, hadoop, hadoop-streaming

我是 Ubuntu、Hadoop 和 DFS 的新手，但我已经按照 Michael-Noll.com 上发布的说明在我的本地 ubuntu 机器上安装了一个单节点 hadoop 实例：

[http://www.michael-noll.com/tutorials/running-hadoop-on-ubuntu-linux-single-node-cluster/#copy-local-example-data-to-hdfs](http://www.michael-noll.com/tutorials/running-hadoop-on-ubuntu-linux-single-node-cluster/#copy-local-example-data-to-hdfs)

[http://www.michael-noll.com/tutorials/writing-an-hadoop-mapreduce-program-in-python/](http://www.michael-noll.com/tutorials/writing-an-hadoop-mapreduce-program-in-python/)

我目前坚持在 Hadoop 上运行基本字数统计示例。我不确定我一直在我的下载目录中运行 Hadoop 是否有太大的不同，但我已经尝试通过放置它们来围绕我的 mapper.py 和 reducer.py 函数的文件位置在 Hadoop 工作目录中没有成功。我已经用尽了我所有的研究，但仍然无法解决这个问题（即使用文件参数等）我真的很感谢提前提供的任何帮助，我希望我以一种可以帮助刚开始的其他人的方式提出这个问题使用 Python + Hadoop。

我独立测试了 mapper.py 和 reduce.py，当提示来自 bash shell 的玩具文本数据时，它们都可以正常工作。

我的 Bash Shell 的输出：

```
hduser@chris-linux:/home/chris/Downloads/hadoop$ bin/hadoop jar /home/chris/Downloads/hadoop/contrib/streaming/hadoop-streaming-1.0.4.jar -file mapper.py -file reducer.py -mapper mapper.py -reducer reducer.py -input /user/hduser/gutenberg/* -output /user/hduser/gutenberg-output3
Warning: $HADOOP_HOME is deprecated.

packageJobJar: [mapper.py, reducer.py, /app/hadoop/tmp/hadoop-unjar4681300115516015516/] [] /tmp/streamjob2215860242221125845.jar tmpDir=null
13/03/08 14:43:46 INFO util.NativeCodeLoader: Loaded the native-hadoop library
13/03/08 14:43:46 WARN snappy.LoadSnappy: Snappy native library not loaded
13/03/08 14:43:46 INFO mapred.FileInputFormat: Total input paths to process : 3
13/03/08 14:43:47 INFO streaming.StreamJob: getLocalDirs(): [/app/hadoop/tmp/mapred/local]
13/03/08 14:43:47 INFO streaming.StreamJob: Running job: job_201303081155_0032
13/03/08 14:43:47 INFO streaming.StreamJob: To kill this job, run:
13/03/08 14:43:47 INFO streaming.StreamJob: /home/chris/Downloads/hadoop/libexec/../bin/hadoop job  -Dmapred.job.tracker=localhost:54311 -kill job_201303081155_0032
13/03/08 14:43:47 INFO streaming.StreamJob: Tracking URL: http://localhost:50030/jobdetails.jsp?jobid=job_201303081155_0032
13/03/08 14:43:48 INFO streaming.StreamJob:  map 0%  reduce 0%
13/03/08 14:44:12 INFO streaming.StreamJob:  map 100%  reduce 100%
13/03/08 14:44:12 INFO streaming.StreamJob: To kill this job, run:
13/03/08 14:44:12 INFO streaming.StreamJob: /home/chris/Downloads/hadoop/libexec/../bin/hadoop job  -Dmapred.job.tracker=localhost:54311 -kill job_201303081155_0032
13/03/08 14:44:12 INFO streaming.StreamJob: Tracking URL: http://localhost:50030/jobdetails.jsp?jobid=job_201303081155_0032
13/03/08 14:44:12 ERROR streaming.StreamJob: Job not successful. Error: JobCleanup Task Failure, Task: task_201303081155_0032_m_000003
13/03/08 14:44:12 INFO streaming.StreamJob: killJob...
Streaming Command Failed! 
```

我的 HDFS 位于 /app/hadoop/tmp ，我相信它也与我的 hadoop 实例上的 /user/hduser 目录相同。

输入数据位于 /user/hduser/gutenberg/*（3 个 UTF 纯文本文件） 输出设置为在 /user/hduser/gutenberg-output 创建

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-15T21:44:34.470

类似于我遇到的错误——

* * *

首先，在： -file mapper.py -file reducer.py -mapper mapper.py -reducer reducer.py

您可以在“-file”上使用本地系统完全限定路径，然后在“-mapper”上使用相对路径，例如：-file /aFully/qualified/localSystemPathTo/yourMapper.py -mapper yourMapper.py

* * *

然后：记得在文件'reducer.py'和'mapper.py'的顶部包含“#!/usr/bin/python”

* * *

最后，

在我的 mapper.py 和 reducer.py 中，我将所有导入都放在一个“setup_call()”函数中（相对于文件的“全局”级别），然后将其包装为：

```
if __name__== '__main__':

    try:
        setup_call_andCloseOut()
    except: 
        import sys, traceback, StringIO

        fakeeWriteable = StringIO.StringIO()

        traceback.print_exc(None,  file=fakeeWriteable)
        msg = ""
        msg +="------------------------------------------------------\n"
        msg +="----theTraceback: -----------\n"
        msg += fakeeWriteable.getvalue() +  "\n"
        msg +="------------------------------------------------------\n"

        sys.stderr.write(msg)  

    #end 
```

那时，我能够使用 hadoop Web 作业日志（错误消息中的那些 http:// 链接），并导航到查看“stderr”消息的方式..（来自实际的核心逻辑）

* * *

我敢肯定还有其他更简洁的方法可以做到这一切，但这在语义上既清晰又足以满足我的迫切需求

祝你好运..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T13:21:31.643

查看以下路径中的日志（基于上面提供的信息）：

```
$HADOOP_HOME$/logs/userlogs/job_201303081155_0032/task_201303081155_0032_m_000003 
```

这应该为您提供有关该特定任务的一些信息。

Hadoop提供的日志非常好，只是需要一些挖掘才能找到信息:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-29T16:28:29.167

回复晚了非常抱歉。

您应该确保您的文件（映射器和化简器）可由 hadoop 用户执行，并在第一行包含[Shebang](https://en.wikipedia.org/wiki/Shebang_(Unix))。

这将解决你的问题。

# methods - 未定义方法 `remember_token=' 'find_by_remember_token' - 第 8 章 Ruby on Rails 教程

> ID：15302264
> 
> 赞同：3
> 
> 时间：2013-03-08T19:58:47.213
> 
> 标签：methods, undefined, actionview, nomethoderror

我正在尝试完成 Michael Hartl 的 Ruby on Rails 教程，但我被困在第 8 章。我在运行测试时遇到了同样的两个错误：

NoMethodError：未定义的方法`remember_token=' ActionView::Template::Error: undefined method`find_by_remember_token'

我对编码和编程非常陌生，所以我不确定要发布什么内容，以便人们可以帮助解决我的问题。我觉得我已经定义了 :remember_token 和 find_by_remember_token。我在下面的代码中包含了 :remember_token 出现的每个实例：

```
sample_app/app/helpers/sessions_helper.rb:
    2  
    3    def sign_in(user)
    4:     cookies.permanent[:remember_token] = user.remember_token
    5      self.current_user = user
    6    end
    .
   15  
   16    def current_user
   17:     @current_user ||= User.find_by_remember_token(cookies[:remember_token])
   18    end
   19  
   20    def sign_out
   21      self.current_user = nil
   22:     cookies.delete(:remember_token)
   23    end
   24  end

sample_app/app/models/user.rb:
   16  
   17    before_save { |user| user.email = email.downcase }
   18:   before_save :create_remember_token
   19  
   20    validates :name, presence: true, length: { maximum: 50 }
   ..
   27    private
   28  
   29:     def create_remember_token
   30:       self.remember_token = SecureRandom.urlsafe_base64
   31      end
   32  end

sample_app/db/migrate/[timestamp]_add_remember_token_to_users.rb:
    1  class AddRememberTokenToUsers < ActiveRecord::Migration
    2    def change
    3:     add_column :users, :remember_token, :string
    4:     add_index  :users, :remember_token
    5    end
    6  end

sample_app/spec/models/user_spec.rb:
   27    it { should respond_to(:password) }
   28    it { should respond_to(:password_confirmation) }
   29:   it { should respond_to(:remember_token) }
   30    it { should respond_to(:authenticate) }
   31  
   ..
  125    describe "remember token" do
  126      before { @user.save }
  127:     its(:remember_token) { should_not be_blank }
  128    end
  129  end

sample_app/spec/support/utilities.rb:
    7    click_button "Sign in"
    8    # Sign in when not using Capybara as well.
    9:   cookies[:remember_token] = user.remember_token
   10  end` 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-28T07:49:51.957

我也有这个问题。经过一番谷歌搜索后，我发现运行这些终端命令......

```
rake db:drop
rake db:create
rake db:migrate 
```

......让我重新振作起来。

希望它也对你有用。我知道这有多令人沮丧。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-19T05:27:16.380

我忘记在用户模型 app/model/user.rb 中包含 attr_accessor :remember_token

所以测试给了我错误：

未定义的方法`remember_token='

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-05T07:57:14.343

**是的，这个错误是因为你在用户**模型中没有属性 remember_token 。

检查您是否拥有正确的数据库迁移文件，然后：

```
rake db:drop
rake db:create
rake db:migrate 
```

或简称：

```
rake db:reset 
```

# r - 对数据框列进行操作的 R 函数

> ID：15302267
> 
> 赞同：0
> 
> 时间：2013-03-08T19:58:55.083
> 
> 标签：r, function, dataframe

我有以下功能：

```
calculateAngle <- function(x, y)
{
    v <- c(x, y)
    a <- c(1, 0)

    theta <- acos( sum(a*v) / ( sqrt(sum(a * a)) * sqrt(sum(v * v)) ) )

    if(v[[2]] < 0)
    {
        return(-1 * theta)
    }
    else
    {
        return(theta)
    }
} 
```

它采用 x 和 y 值并计算该向量与 1、0 向量之间的角度。现在，此函数在这些示例中可以正常工作：

```
> calculateAngle(0, 1)
[1] 1.570796
> calculateAngle(0, -1)
[1] -1.570796
> calculateAngle(0, -10)
[1] -1.570796
> calculateAngle(rnorm(1), rnorm(1))
[1] -0.2600444 
```

但是当我尝试将数据框的列传递给它时，当我想要的是每行的角度时，它会返回一个值。

```
df <- data.frame(x=rnorm(10), y=rnorm(10))

df$angle <- calculateAngle(df$x, df$y) 
```

帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T20:02:21.203

（警告：这是一个懒惰的答案，因为我不想在这上面花费超过 5 秒！）

```
calculateAnglev <- Vectorize(calculateAngle,c('x','y'))
> calculateAnglev(runif(2),runif(2))
[1] 0.2738694 0.8039875 
```

也就是说，在性能方面，这不应被误认为是真正矢量化的替代品。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T20:06:22.603

您的代码`theta`过于复杂，例如您的 term`sum(sqrt(a*a))`始终为 1，并且`sum(a*v)`始终为`x`。此外`sum(v*v) = x^2+y^2`，使用这种形式，我们得到了也适用于向量参数的版本：

```
calculateAngle <- function(x, y)
{
   a <- c(1, 0)
   theta <- acos( x / sqrt(x^2+y^2))
   sign(y)*theta
} 
```

# c# - 如何在我的登录屏幕上创建登录限制？

> ID：15302270
> 
> 赞同：0
> 
> 时间：2013-03-08T19:59:04.110
> 
> 标签：c#

我目前正在尝试用 C# 设计一台 atm 机器，对此我很陌生。我希望我的登录屏幕在 3 次尝试登录失败后返回到我的欢迎屏幕，但我不知道从哪里开始以及如何在我的程序中实现我的代码来执行此操作。

我当前的登录屏幕代码如下：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Data.OleDb;
using System.Data.Common;

namespace bankkk
{
    public partial class FrmLogin : Form
    {
        public FrmLogin()
        {
            InitializeComponent();
        }

        public static OleDbConnection con = new OleDbConnection();

        string dbProvider;
        string dbSource;

        OleDbDataAdapter da;

        public static DataSet ds1 = new DataSet();

        string sql;
        string pin;
        int rownum = 0;
        bool valid = false;

        private void FrmLogin_Load(object sender, EventArgs e)
        {
            dbProvider = "PROVIDER=Microsoft.ACE.OLEDB.12.0;";
            dbSource = "Data Source = 'd:\\bank11.accdb'";
            con.ConnectionString = dbProvider + dbSource;
            ds1 = new DataSet();
            con.Open();
            sql = " SELECT tblCustomers.* FROM tblCustomers";
            da = new OleDbDataAdapter(sql, con);
            rownum = da.Fill(ds1, "tblCustomers");

            con.Close();
        }

        private void btnexit_Click(object sender, EventArgs e)
        {

            System.Environment.Exit(0);
            this.Close();

        }

        //METHOD VALIDATE

        private bool validate()
        {
            ds1 = new DataSet();
            con.Open();

            sql = "SELECT tblCustomers.* FROM tblCustomers WHERE ((tblCustomers.AccountNo) = '" + txtAccount.Text + "')";
            da = new OleDbDataAdapter(sql, con);
            rownum = da.Fill(ds1, "tblCustomers");
            con.Close();

            if (rownum != 1)
            {
                MessageBox.Show("Not a valid Account");
                return false;
            }
            else
            {
                pin = ds1.Tables["tblCustomers"].Rows[0][4].ToString();
                if (pin == txtPin.Text)
                {
                    return true;
                }
                else
                {
                    MessageBox.Show("INVALID PIN");
                    return false;
                }
            }
        }

        private void btnLogin_Click(object sender, EventArgs e)
        {
            valid = validate();
            if (valid == true)
            {
                if (txtAccount.Text == "11111111" && txtPin.Text == "9999")
                {
                    Frmmanager Manager = new Frmmanager();
                    this.Close();
                    Manager.Show();
                }
                else
                {
                    frmaccount account = new frmaccount();
                    this.Close();
                    account.Show();

                    {
                        txtAccount.Clear();
                        txtPin.Clear();
                    }
                }
            }
        }

        private void btnlogin_Click_1(object sender, EventArgs e)
        {
            valid = validate();
            if (valid == true)
            {
                if (txtAccount.Text == "11111111" && txtPin.Text == "9999")
                {
                    Frmmanager Manager = new Frmmanager();
                    this.Close();
                    Manager.Show();
                }
                else
                {
                    frmaccount account = new frmaccount();
                    this.Close();
                    account.Show();

                    {
                        txtAccount.Clear();
                        txtPin.Clear();
                    }
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T20:08:11.477

你说*返回到我的欢迎屏幕*，所以我假设你显示的是`FrmLogin`using`.ShowDialog()`而不是`.Show()`. 这样，您只需要关闭旧表单。

如果你只是在做`.Show()`，你可以这样做：

```
public partial class FrmWelcome {

    //in some part of your code...
    var frmLogin = new FrmLogin();

    //when the login form is closed, show this one.
    //Depending on your application, you might want to add some boolean variable
    //to the Login Form that will be true if the user authentication failed, and 
    //show this form again only if it is true.
    frmLogin.Closed += (s, e) => this.Show();

    this.Hide();
    frmLogin.Show();
} 
```

**试试下面的代码。**这个想法是有一个`failedAttempts`变量，每次验证代码失败时都会递增。当它等于 3 时，您只需关闭表单（见上文）。

```
namespace bankkk
{
    public partial class FrmLogin : Form
    {
        public FrmLogin()
        {
            InitializeComponent();
        }

        ...

        int failedAttempts = 0;

        private void btnlogin_Click_1(object sender, EventArgs e)
        {
            valid = validate();
            if (!valid) {
                //Increment the number of failed attempts
                failedAttempts += 1;

                //If equal to 3
                if (failedAttempts == 3) {
                    //Just close this window
                    this.Close();
                }
            }
            else
            {
                //the same code you were using...
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T20:10:58.857

您可以在程序中添加一个变量并增加它以限制尝试登录的次数。要限制帐户的尝试次数，请添加一个表以将登录信息（包括无效尝试）存储到您的数据库中。将该表链接到您的客户表。当无效尝试登录到有效客户帐户时，增加无效尝试次数并将其写回登录表。成功登录后，您可以将无效尝试次数设置为 0。

# android - 为什么不推荐使用 InsertHelper？

> ID：15302271
> 
> 赞同：12
> 
> 时间：2013-03-08T19:59:08.127
> 
> 标签：android, sqlite, deprecated, bulkinsert

我花了很长时间查看我们设备上的一些性能问题，并注意到我们有很多应用程序都在执行数据库读/写..

我首先使用 Contacts API 插入新的联系人和数据行，但速度非常慢。1 分 18 秒插入大约 1500 行（250 个原始联系人和 1250 个数据行）..

我曾在另一个应用程序中使用插入助手进行性能插入，并决定编写一个测试应用程序，该应用程序将写入单独的数据库和单独的插入方法。

每个数据库都有一个表，每个表有 4 列：_ID、名称、时间和 Blob（所有类型为“字符串”）——就像联系人提供者定义数据列一样。

_ID 是自动增量 pk，Name 只是插入相同的东西 '1234567890'，time 是当前系统时间，单位是 milis，BLob 是一个长度为 6400 的字符串，其中包含字母 'A'...

我首先检查了批量插入，但它所做的只是循环遍历您定义的所有插入，并且与单独执行插入一样慢（或对性能的影响可以忽略不计）..

我测试了 3 种不同的插入方法：ContentValues w/db.insert 方法：SQLiteStatement w/statement.execute()（在事务中完成）。带有事务的 SqliteInsertHelper。

我可以提供一些代码，但我从 InsertHelper 中获得了最佳性能，并且想知道为什么它被弃用了：

插入 100 条记录的时间 ContentValues：7.778 秒（写入 82 字节/毫秒） SQLiteStatement：1.311 秒（写入 489 字节/毫秒） SqliteInsertHElper：0.292 秒（写入 2197 字节/毫秒）

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-10-09T23:45:53.207

很难得到任何关于为什么 InsertHelper 被弃用的信息，而不去实际的提交确实弃用它。弃用 InsertHelper 的工程师给出了以下原因：

> 这个类与 SQLiteStatement 相比没有任何优势，只是使代码更复杂和更容易出错。

从 InsertHelper 重构为 SQLiteStatement 后，我​​同意。一个例外是 null 安全绑定函数。虽然 InsertHelper 会自动为您调用 bindNull()，但如果您传递一个空字符串，SQLiteStatement 会崩溃，并且您必须在调用 bindString() 之前进行自己的空值检查。

见： [https ://android.googlesource.com/platform/frameworks/base/+/b33eb4e%5E!/](https://android.googlesource.com/platform/frameworks/base/+/b33eb4e%5E!/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-31T05:35:33.697

InsertHelper 允许用户使用相同的语句对表进行多次插入。但这并不是插入的好方法`not thread-safe`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-23T07:26:21.797

你应该使用[事务。](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#beginTransaction%28%29). 如果您没有为数据库操作显式创建事务，则框架会为每个操作创建一个。将您的对象组合在一起并一次将它们全部插入。这将大大提高性能。

# sql-server-2008 - SSIS 循环通过服务器并处理失败的登录

> ID：15302274
> 
> 赞同：1
> 
> 时间：2013-03-08T19:59:32.803
> 
> 标签：sql-server-2008, error-handling, ssis, foreach-loop-container

创建一个包，它将遍历我们不同环境（DEV、UAT、PROD）中的所有服务器。我们使用服务帐户，一个服务帐户用于 DEV 和 UAT，另一个用于 PROD。我正在使用 ForEach 循环容器/变量来设置连接字符串。

问题：当循环中的数据流尝试连接到 PROD 服务器时，它们会失败，因为它们正在使用显然无权访问 PROD 的 DEV/UAT 服务帐户，这很好。问题是这会杀死循环。通常我只会在数据流上放置一个事件处理程序并设置事件处理程序的系统变量 Propagate:OnError = False 以便错误不会冒泡到循环并杀死它。好吧，这是行不通的，因为数据流中的 OLE DB 连接在验证期间失败（在程序包运行时），并且显然 Propagate = False 设置仅在执行任务期间发生错误时才防止错误冒泡，而不是任务的确认。

我可以在包括包本身在内的所有内容上设置MaximumErrorCount = 0，但这有点笨拙，并且无论遇到什么错误，包总是会报告它运行成功。

运行 SQL Server 2008-R2

[链接](http://agilebi.com/jwelch/2008/06/29/continuing-a-loop-after-an-error/#comment-84936)到一篇文章，如果有人不熟悉它，如何使用传播设置不终止循环。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T14:40:55.110

一个建议是在数据流任务之前放置一个脚本任务，该任务使用 try-catch 块检查对连接字符串的访问，并在失败时设置一个变量，然后在条件拆分中使用该变量来确定是否运行数据流或记录连接字符串失败。

或者，如果您不关心它失败的原因（因为您已经知道这是因为权限），您可以只使用 Precedence Constraint 并且只在连接成功的地方运行数据流。

更新：

这是脚本任务的一些工作代码：

```
 public void Main()         {

string connString = Dts.Variables["ConnectionStringToTest"].Value;

                try                {
                    using (OleDbConnection connection = new OleDbConnection()) {
                        connection.ConnectionString = connString;
                        connection.Open();
                    }
                    Dts.Variables["User::DatabaseCanConnect"].Value = true;                
                }
                catch (Exception ex) {
                    Dts.Variables["User::DatabaseCanConnect"].Value = false;
                }

                Dts.TaskResult = (int)ScriptResults.Success;
            } 
```

1.  在包范围内创建一个名为*DatabaseCanConnect的变量。*将其设置为布尔值，它将默认为 False。
2.  创建脚本任务。编辑**ReadWriteVariables**属性并添加新变量。
3.  将您用于在 ForEach 循环之外构建连接字符串的任何变量添加到您的**ReadOnlyVariables 。**我已经命名了我的*ConnectionStringToTest*。
4.  将上面的脚本代码添加为您的 Main() 函数。请注意，这使用*OleDbConnection*。这应该模仿您在数据流中修改的连接管理器使用的任何连接。因此，如果它是 SQL 连接，请改用*SqlConnection*。
5.  在您的代码中，使用 DatabaseCanConnect 变量来确定此处的流量。您可以在优先约束中使用它来防止流向数据流，或者在条件拆分（我的偏好，对其他开发人员更可见）中使用它来记录失败时的连接错误，否则正常进行。

# c++ - D3DCompiler 未解决的外部

> ID：15302276
> 
> 赞同：1
> 
> 时间：2013-03-08T19:59:48.177
> 
> 标签：c++, visual-studio, visual-c++, directx

我在 Visual Studio 2012 中链接项目时遇到以下问题。我从 Effects11.lib 调用函数，但在链接时收到以下错误：

> 1>Effects11.lib(EffectAPI.obj) : 错误 LNK2019: 函数 _D3DX11CompileEffectFromFile 中引用的未解析外部符号 _D3DCompileFromFile@36

由于某种原因，它似乎无法与 D3DCompiler 链接。这是项目中的一组自动链接库：

```
#pragma comment(lib, "Effects11.lib")
#pragma comment(lib, "d3d11.lib")
#pragma comment(lib, "d3dx11.lib")
#pragma comment(lib, "DxErr.lib")
#pragma comment(lib, "D3DCompiler.lib")
#pragma comment(lib, "dxguid.lib") 
```

我已经验证我正在构建 32 位并且正在使用 x86 包含。我读到的一切都暗示了我已经尝试过的事情。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T20:27:25.267

这是我解决它的方法：

默认的 Effects 项目包括 Windows 开发工具包（对我来说是 C:\Program Files (x86)\Windows Kits\8.0）。先放 DirectX SDK 路径后，这个问题就解决了。

# jquery - 按类别显示/隐藏选择选项

> ID：15302278
> 
> 赞同：1
> 
> 时间：2013-03-08T19:59:53.750
> 
> 标签：jquery, select, show-hide, option

我正在为 apx 预先选择最常用的选项。300 选择元素，并希望区分这些值何时仍处于初始预选/默认状态*与*用户通过单击表单元素主动选择该值的时间*（表明他们主动决定离开它设置为该值）*。

为了做到这一点，我为每个预选的值创建了一对选项（值略有不同，即`value="50"`vs. `value="50_Default"`），当单击元素时，我想隐藏预选的选项并显示常规一。我想将类用作选择器，以便该函数适用于所有 Select 元素，而不管它们的值如何。

我无法将 jQuery 的显示/隐藏方法适应这种情况，和/或修改我在 SO 帖子上看到的类似问题的答案，这些问题需要指定函数中的每个选项（即[基于 Radio 的 jQuery 禁用 SELECT 选项已选择（需要对所有浏览器的支持）](https://stackoverflow.com/questions/877328/jquery-disable-select-options-based-on-radio-selected-need-support-for-all-brow/878331#878331)。我确实找到了一种按类显示/隐藏选择选项的解决方案，但是代码对我来说有点过于复杂，无法自行调整，因此如果这是最好的方法，我将不胜感激帮助修改它[https://stackoverflow.com/a/5924965/1056713](https://stackoverflow.com/a/5924965/1056713)

我正在尝试按照这些方式做一些事情*（这些功能都不起作用）*

JS

```
$(".default_set").click(function(){
    $(this).children("select option .default_field").hide();
    $(this).children("select option .selected_field").show();
});

// Store the hidden options (necessary in IE)
$(".hidden_field").hide();
$(this).parent("select option .default_field").removeAttr("selected");
$(this).parent("select option .default_field").hide();
$(this).parent("select option .selected_field").show(); 
```

HTML

```
<select name=min_jeans class="default_set">
    <option value=0>$0</option>
    <option value="50_Default" class="default_field" selected=selected>$50</option>
    <option value="50" class="selected_field" style="display:none">$50</option>
    <option value=100>$100</option>
    <option value=150>$150</option>
    <option class="hidden_field" value="hidden_field" style="display:none;"></option>    
</select> 
```

这是我得到的最接近的（在@kasdega 的帮助下）[http://jsfiddle.net/chayacooper/VN2Su/13/](http://jsfiddle.net/chayacooper/VN2Su/13/)，使用值而不是类。它也不能正常工作 - 在单击元素之前，小提琴不显示默认值，当我在计算机上运行代码时，我遇到了相反的问题 - 它在单击元素之前显示默认值，但没有不应该隐藏它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T20:16:24.957

我不会使用隐藏/显示。我只会操纵元素

```
$('select').focus(function() {
    var option = $(this).find("option[value*=Default]");
    option.attr('value', option.attr('value').match(/[0-9]+/));
}); 
```

[http://jsfiddle.net/JHAPp/2/](http://jsfiddle.net/JHAPp/2/)

用于`focus`检测用户是否与选择进行了交互。发生这种情况时，从值中删除`_Default`部分（它实际上只是匹配数字）。

提交表单而不触及任何内容会返回`50_Default`。触摸select后会返回`50`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T20:19:00.030

以下将显示选择中的默认选项，然后在单击项目时将其隐藏并选择它的关联值。

```
$(".default_set").focus(function () {
    $(".default_field").hide();
    if ($(".default_field").is(":selected")) {
        $(".selected_field").show().prop("selected", true);
    }
}); 
```

**[演示](http://jsfiddle.net/GvSAf/1/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T20:34:00.027

我会这样写：

```
$(".default_set").focus(function () {
if ($('.default_field:selected')) {
    $('.default_field').hide();
    $('.selected_field').show();
    $('.default_field').removeAttr('selected');
}
}); 
```

希望这有效并帮助您

# wix - 如何在 WIX 中对特定目录进行 DirectorySearch

> ID：15302279
> 
> 赞同：2
> 
> 时间：2013-03-08T19:59:54.523
> 
> 标签：wix

我正在尝试确定是否安装了目录以查看是否应该安装第三方客户端。

```
<util:DirectorySearch Path="C:\Program Files (x86)\CenterSpace\NMath 5.0 and NMath Stats 3.3"
                      Variable="NmathInstalled"/> 
```

当我执行此操作时，candle.exe 出错并告诉我该目录“不是有效的相对长名称，因为它包含非法字符”。并回避'：'是非法的事实。如何在没有':'的情况下在 c:\ 中搜索目录？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T20:31:17.593

在您的特定情况下，使用[Burn 内置变量](http://wix.sourceforge.net/manual-wix3/bundle_built_in_variables.htm) `ProgramFilesFolder`来`C:\Program Files (x86)\`解析机器上的正确位置。该文档的链接有许多其他文件夹选项。

# ruby-on-rails - Rails 脚手架 belongs_to - 显示 #

> ID：15302287
> 
> 赞同：0
> 
> 时间：2013-03-08T20:00:07.773
> 
> 标签：ruby-on-rails, scaffolding, belongs-to

经验丰富的 Java 开发人员，Rails 新手 - 想知道脚手架中的 belongs_to 关系。

看到另一个这样的答案

[rails scaffold 命令是否支持生成belongs_to 或多对多模型中间表迁移信息？](https://stackoverflow.com/questions/4057106/dose-rails-scaffold-command-support-generate-belongs-to-or-many-to-many-model-mi)

并遵循`rails generate scaffold_controller obj:references`模式。

显示索引/显示页面`#<MyClass:xxxx>`而不是我想要的字符串 - 目标类（的父端`belongs_to`）中是否有一个方法我需要覆盖以指定标识符？

同样在编辑视图中，它似乎正在尝试将引用修改*为字符串*而不是下拉列表 - 我需要指定什么来实现这一点吗？

谢谢！

顺便说一句 - 我能够在 Django 和 Grails 中获得类似的脚手架，其中外键变成了下拉列表；我希望 Rails 也同样简单，我只是想念它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T20:26:49.070

您可以覆盖`#to_s`实例上的方法，因为它是被调用的方法。

```
class FooDoodle < ActiveRecord::Base
  def to_s
    name
  end
end 
```

那是*显示*记录的时候。

但是，当您实际使用表单设置关联时，scaffold 只会在视图中生成一个输入字段，以便您输入 id。例如，您可以有一个下拉菜单，但必须以某种方式选择该下拉菜单的选项。

例如，如果有 2000 条可能的关联记录，您会显示哪些？你显示2000吗？只有前10个？该逻辑将进入您的控制器。

因此，例如：

```
class FooDoodlesController < ApplicationController
  def edit
    @foodoodle = FooDoodle.find(params[:id])

    @friends = @foodoodle.possible_friends # or else
  end
end 
```

并使用[`select`](http://api.rubyonrails.org/classes/ActionView/Helpers/FormBuilder.html#method-i-submit)and[`options_for_select`](http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html#method-i-options_for_select)作为选择

```
# _form.html.erb

<%= form_for @foodoodle do |f| %>
  <%= f.label :friend %>
  <%= f.select :friend, @friends.map{ |p| [p.to_s, p.id] } %> 
```

# java - 将来自 JavaScript 客户端的 JSON POST 到 Atmosphere 框架中的 Jersey 资源

> ID：15302288
> 
> 赞同：3
> 
> 时间：2013-03-08T20:00:08.850
> 
> 标签：java, javascript, json, jersey, atmosphere

我一直在谷歌搜索并试图让它工作几个小时......问题是服务器没有接收数据`JSON`而是文本。这是 POJO

```
package my.package;

import javax.xml.bind.annotation.XmlRootElement;

    @XmlRootElement
    public class TestConfig {

        private String firmID;
        private String traderID;
        private String userID;

        public TestConfig() {};
    ...
    } 
```

一个 Javascript 客户端，其中包含：

```
 function callbackForTest(response) {
        console.log("Call to callbackForTest");
        if (response.state == "opening" && response.status == 200) {

            //push request data
            if (connectedEndpoint[0] == null) {
                console.log("[DEBUG] Connected endpoint for " + value + "is null!");
                //disable button
                $(value).attr('disabled','');
                $.atmosphere.unsubscribe();
                return false;
            }

            // push ( POST ) 
            connectedEndpoint[0].push(JSON.stringify(
                    {
                        operation       :   "RUN",
                        firmID          :   $('#firmID').val(),
                        userID          :   $('#userID').val(),
                        traderID        :   $('#traderID').val(),
                        protocol        :   $('#protocol').val(),
                        group1          :   
                    }
                ));
        }
    }

    function subscribeUrl(jobName, call, transport) {
        var location = subscribePath + jobName.id;
        return subscribeAtmosphere(location, call, transport);
    }

    function globalCallback(response) {
        if (response.state != "messageReceived") {
            return;
        }
    }

    function subscribeAtmosphere(location, call, transport) {
        var rq = $.atmosphere.subscribe(location, globalCallback, $.atmosphere.request = {
            logLevel : 'debug',
            transport : transport,
            enableProtocol: true,
            callback : call,
            contentType : 'application/json'
        });
        return rq;
    }

    function sendMessage(connectedEndpoint, jobName) {
        var phrase = $('#msg-' + jobName).val();
        connectedEndpoint.push({data: "message=" + phrase});
    }

    // Run Test handlers
    $("input[name='runButtons']").each(function(index, value){
        $(value).click(function(){

            //disable button
            $(value).attr('disabled','disabled');

            // connect (GET)
            connectedEndpoint[index] = subscribeUrl(value, callbackForTest, transport);
            });
        }); 
```

我已包含此屏幕截图中显示的库：

[图书馆](http://i.stack.imgur.com/EJj5O.png)

这是我的 web.xml（它的一部分）

com.sun.jersey.api.json.POJOMappingFeature true

泽西岛资源

```
@Path("/subscribe/{topic}")
@Produces({MediaType.APPLICATION_JSON, "text/html;charset=ISO-8859-1", MediaType.TEXT_PLAIN})
public class Subscriber {

    private static final Logger LOG = Logger.getLogger(Subscriber.class);

    @PathParam("topic")
    private Broadcaster topic;

    @GET
    public SuspendResponse<String> subscribe() {
        LOG.debug("GET - OnSubscribe to topic");
        SuspendResponse<String> sr = new SuspendResponse.SuspendResponseBuilder<String>().broadcaster(topic).outputComments(true)
                .addListener(new EventsLogger()).build();

        return sr;
    }

    @POST
    @Consumes({MediaType.APPLICATION_JSON, MediaType.TEXT_PLAIN, MediaType.TEXT_HTML})
    @Broadcast
    public Broadcastable publish( TestConfig t) {
        LOG.debug("POST");
        String s = t.getFirmID();
        return new Broadcastable(s, "", topic);
    } 
```

我可以订阅确定。当我尝试推送到服务器时，我得到了这个异常：

```
A message body reader for Java class com.mx.sailcertifier.TestConfig, and Java type class com.mx.sailcertifier.TestConfig, and MIME media type text/plain was not found. 
```

如果我将内容类型设置为，为什么它会发送纯文本`application/json`？让 Jersey 资源读取 JSON 的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T02:43:33.967

我终于通过两个更改完成了这项工作：

[在这里](https://github.com/Atmosphere/atmosphere/tree/master/samples/rest-chat)查看示例后，我将其添加`init-param`到解决Tomcat`AtmosphereServlet`中的问题：`web.xml``text/plain`

```
<init-param>
     <param-name>org.atmosphere.websocket.messageContentType</param-name>
     <param-value>application/json</param-value>
</init-param> 
```

我没有在 Atmosphere 文档中看到任何记录。如果是这样的话，它会节省很多时间，但不幸的是，在文档方面，API 是杂乱无章且缺乏的。

此外，我需要使用[jersey-bundle](http://maven.java.net/service/local/artifact/maven/redirect?r=releases&g=com.sun.jersey&a=jersey-bundle&v=1.17&e=jar) jar 确保包含 Jersey 相关的所有内容，包括`jersey-json.jar`. 在那之后，它奏效了！希望这对可能遇到相同或类似问题的其他人有所帮助。

# sql - 查询给出两个日期范围之间的日期列表

> ID：15302291
> 
> 赞同：-1
> 
> 时间：2013-03-08T20:00:21.427
> 
> 标签：sql, oracle, oracle11g

对此我深表歉意，但我之前的问题没有正确构图，所以创建另一个帖子。

我的问题类似于以下问题： [http ://asktom.oracle.com/pls/asktom/f?p=100:11:0::::P11_QUESTION_ID:14582643282111](http://asktom.oracle.com/pls/asktom/f?p=100:11:0::::P11_QUESTION_ID:14582643282111)

我需要编写内部查询，它将为我提供两个日期范围之间的日期列表到外部查询。

我的内部查询返回以下 2 行：

```
SELECT request.REQ_DATE, request.DUE_DATE FROM myTable where id = 100

REQ_DATE           DUE_DATE
    3/19/2013          3/21/2013 
    3/8/2013           3/8/2013 
```

所以我需要内部查询，它将以下日期返回给外部查询：

```
3/19/2013
3/20/2013
3/21/2013
3/8/2013 
```

上面帖子中的答案具有硬编码的开始日期和结束日期，就我而言，它来自其他表。所以我正在尝试编写这样的查询，但它不起作用：</p>

```
Select * from outerTable where  my_date in
(   
    select to_date(r.REQ_DATE) + rownum -1 from all_objects, 
    (   
         SELECT REQ_DATE, DUE_DATE
         FROM    myTable where id = 100
    )  r                              
    where rownum <= to_date(r.DUE_DATE,'dd-mon-yyyy')-to_date(r.REQ_DATE,'dd-mon-yyyy')+1;
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T20:15:57.503

```
with 
T_from_to as (
   select
      trunc(REQ_DATE) as d_from, 
      trunc(DUE_DATE) as d_to
   FROM myTable 
   where id = 100
),
T_seq as (
   select level-1 as delta
   from dual
   connect by level-1 <= (select max(d_to-d_from) from T_from_to)
)
select distinct d_from + delta
from T_from_to, T_seq
where d_from + delta <= d_to
order by 1 
```

# sql - T-SQL 2008 将日期和时间字符串转换为日期时间

> ID：15302294
> 
> 赞同：1
> 
> 时间：2013-03-08T20:00:41.677
> 
> 标签：sql, datetime, time, concatenation, varchar

我的表中有两列，一列用于捕获时间，一列用于捕获日期。不幸的是，两者都是 varchar()。我需要获取这两个字段，将它们连接在一起，然后将它们转换为日期时间。

我正在尝试通过以下方式实现这一目标：

```
select CONVERT(datetime,(select txt_returned_date+' '+CONVERT(varchar(20),CONVERT(TIME,txt_time_returned))),126) 
from table_name 
```

我收到此错误消息：

```
Conversion failed when converting date and/or time from character string. 
```

日期被捕获为“20130308”作为字符串。时间被捕获为“4:27 PM”作为字符串

我在这里所做的是将时间字符串转换为 TIME，然后再转换回 varchar。然后我将它们连接在一起。这本身就有效，但是一旦我将 CONVERT(datetime) 引入整个查询，它就会给我错误。

尝试完成此操作的任何帮助都是有帮助的。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T20:13:20.750

将 DATE 和 TIME 值转换为 DATETIME 后，您可以将它们连接在一起。下面是一个示例，显示连接已存储为 VARCHAR 的 DATE 列和 TIME 列：

```
-- Set up some variables to test with
DECLARE @myTime TIME = GETDATE()
    , @myDate DATE = GETDATE()
    , @myTimeTxt VARCHAR(16)
    , @myDateTxt VARCHAR(10);

-- Initialize your variables
SELECT @myTimeTxt = @myTime
    , @myDateTxt = @myDate;

-- Display your separated values
SELECT @myDateTxt, @myTimeTxt;

-- Display your concatenated value
SELECT CAST(@myDateTxt AS DATETIME) + CAST(CAST(@myTimeTxt AS TIME) AS DATETIME); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T20:23:43.333

您可以使用此选项

```
DECLARE @date date = '20010101',
        @time time = '01:01:01'

SELECT CAST(@date AS datetime) + @time 
```

结果：`2001-01-01 01:01:01.000`

[**SQLFiddle**](http://sqlfiddle.com/#!3/d41d8/10610)上的演示[](http://sqlfiddle.com/#!3/d41d8/10610)

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T20:29:48.243

您使用的是 SQL 2012 吗？如果是这样，您可以使用 datetimedromparts 函数来实现这一点。如果不是这个特定的例子，那么知道未来总是好的:)

[http://technet.microsoft.com/en-gb/library/hh213233.aspx](http://technet.microsoft.com/en-gb/library/hh213233.aspx)**

# php - 用保留键内爆关联数组？

> ID：15302295
> 
> 赞同：0
> 
> 时间：2013-03-08T20:00:45.033
> 
> 标签：php, arrays, implode

```
$arr=array('a'=>1,'b'=>2);

echo implode(',',$arr) // returns '1,2' 
```

我需要得到`a=1,b=2`结果。

我知道我可以通过使用来获得它，`foreach`但我知道有一种更短的方法和更少的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T20:14:07.867

你可以试试：

```
echo urldecode(http_build_query($arr, '', ',')); 
```

的第三个参数`http_build_query()`是分隔符，所以不需要使用`str_replace()`

用于`urldecode()`解码，因为`http_build_query()`会对字符串进行urlencode。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T20:05:44.847

尝试这个：

```
<?php
$arr=array('a'=>1,'b'=>2);
echo str_replace('&', ',', http_build_query($arr)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T20:37:01.407

如果您想要更多地控制格式化或处理数组元素，您可以尝试：

```
<pre>
    <?php
        $fruits = array("d" => "lemon", 
                        "a" => "orange", 
                        "b" => "banana", 
                        "c" => "apple");

        function format_list(&$list, $key)
        {
            $list = "{$key}={$list}";
        }

        echo "Starting array:\n";
        print_r($fruits);

        echo "\nModified array:\n";
        array_walk($fruits, 'format_list');
        print_r($fruits);

        echo "\nFinal string:\n";
        echo implode(',',$fruits);

    ?>
</pre> 
```

我使用了两个 PHP 函数`array_walk`和`implode`，但我还需要定义一个回调函数 ，`format_list`。

使用`http_build_query`如landons 所示更简洁，但与所有PHP 一样，有很多方法可以做同样的事情。

您可以尝试以下 PHP 小提琴： http:
[//phpfiddle.org/main/code/f95-wsk](http://phpfiddle.org/main/code/f95-wsk)

# regex - 更改正则表达式不应用语义？

> ID：15302296
> 
> 赞同：0
> 
> 时间：2013-03-08T20:00:49.730
> 
> 标签：regex, scala, pattern-matching

给定正则表达式：

```
val FollowRE = """(?i)(?<=follow)(\s+(me|@[A-Za-z\d_]+))+""".r 
```

代码片段：

```
"@foo follow me" match {
  case FollowRE() => "baz"
  case _ => "foo"
} 
```

但它需要`"foo"`分支。我可以允许部分正则表达式匹配所以它需要`"baz"`分支吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T22:14:47.203

匹配必须具有`_`与 Regex 具有捕获组一样多的模式变量（或通配符，以忽略相应的捕获）。对于您的 RE，这是两个捕获组，尽管我无法匹配（我认为 RE 需要工作）。

**附录**

显然我错过了重点。你想要一个浮动匹配。Scala Regex 提取器中的匹配（在构造中使用它时得到的`match`）是*match*，而不是*find*。所以如果你想让它表现得像一个发现，你需要把它放在`.*`你的模式的开头和结尾。

# jquery - 有没有比为 3 个相同的动作重复 3 次函数更简洁的方法？

> ID：15302298
> 
> 赞同：-1
> 
> 时间：2013-03-08T20:00:53.700
> 
> 标签：jquery

基本上我正在做类似的事情：

[http://jsfiddle.net/3XwZv/71/](http://jsfiddle.net/3XwZv/71/)

除了我有 3 个实例之外，每个按钮都具有相同的功能。并且没有返回按钮/链接可以将其返回到正常状态。

所以我用它自己的相关部分和以下jquery的唯一ID标记了每个实例：

```
 $('#btn0').click(function(e){    
            $('#btn0').fadeOut('slow', function(){
                $('#reveal0').fadeIn('slow');
            });
        });
        $('#btn1').click(function(e){    
            $('#btn1').fadeOut('slow', function(){
                $('#reveal1').fadeIn('slow');
            });
        });
        $('#btn2').click(function(e){    
            $('#btn2').fadeOut('slow', function(){
                $('#reveal2').fadeIn('slow');
            });
        }); 
```

这种方式看起来有点笨拙，如果有更简洁的语法来做到这一点，它会徘徊吗？我已经尝试过 .each 并将它们全部列出在一个函数中，但是它们都一起消失了，这不是我想要的。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T20:03:11.013

```
$('#btn0, #btn1, #btn2').click(function(e){    
    $(this).fadeOut('slow', function(){
        $('#reveal' + this.id.replace('btn','')).fadeIn('slow');
    });
 }); 
```

使用类和数据属性会更有意义：

```
<button class="mybutton" data-reveal="reveal0">Foo</button>
<button class="mybutton" data-reveal="reveal1">Bar</button> 
```

进而：

```
$('.myButton').on('click', function(){
    var $this = $(this);
    $this.fadeOut('slow', function(){
        $('#' + $this.data('reveal')).fadeIn('slow');
    });
 }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T20:09:30.210

从父容器委托事件 click ，并通过 click 目标标签上的 data 属性检索要显示的元素的 id 。

类似的东西：

```
$('.btn-container').on('click', '.btn', function(e){
  var $toReveal = $("#" + $(this).data('reveal-id'))
  $(this).fadeOut('slow',function(){
    $toReveal.fadeIn('slow')
  });
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T20:05:33.577

我相信您可以使用一个事件处理程序拥有多个按钮。然后只需获取发件人：

```
$(function() { 

  $('#<%=btn1.ClientID %>, #<%=btn2.ClientID %>').click(function(event) { 
     var getBtnId= $(event.target).attr('id');
      'then just do some code specific to the button ID

    }); 
}); 
```

# javascript - 将数据从一个表单复制到多个表单

> ID：15302305
> 
> 赞同：1
> 
> 时间：2013-03-08T20:01:11.547
> 
> 标签：javascript, html, forms

我正在开发一个内部网页，以帮助自动化一些电子邮件任务。我目前有 1 个表单，其中包含一些在以下所有表单中都相同的通用信息，以及其他几个具有一些自定义信息的表单。我的问题是我无法从信息表单中获取数据以复制到页面上的其他表单。我的代码如下：

```
<html>
</body>
<script language="JavaScript">
function updateInput(ish){
    document.getElementById("emailsubj").value = ish;
}
</script>
<body>

Info Form
      <form id="info" name="info">
      Email Subjects:<input name="emailsubj" value="Enter Subject Here">
      </form>
<br><br>

Form 1
      <form id="form1" name="form1">
      Email<input name=emadd value="email@address.com">
      Subject<input name="subj" onblur="updateInput(this.value)">
      </form>
<br><br>

Form 2     
      <form id="form2" name="form2">
      Email<input name=emadd value="email@address.com">
      Subject<input name="subj" onblur="updateInput(this.value)">
      </form>
</body>
</html> 
```

所有非信息表单都将有一个提交按钮以执行相应的功能。我不反对使用 onchange 而不是 onblur，但是测试对我的测试没有任何帮助。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T20:20:53.053

**jQuery 答案** [http://codepen.io/anon/pen/aKIgc](http://codepen.io/anon/pen/aKIgc)

HTML

```
<html>
    <head>
<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="http://documentcloud.github.com/underscore/underscore-min.js"></script>
    </head>
    <body>
        Info Form
        <form id="info" name="info">
            Email Subjects:<input name="emailsubj" placeholder="Enter Subject Here">
        </form>

        Form 1
        <form id="form1" name="form1">
            Email<input name="emadd" placeholder="email@address.com">
            Subject<input name="subj">
        </form>

        Form 2
        <form id="form2" name="form2">
            Email<input name="emadd" placeholder="email@address.com">
            Subject<input name="subj">
        </form>
    </body>
</html> 
```

脚本

```
$('input[name=emailsubj]').on("keyup",function(e){
  $('[name=subj]').val($(this).val())
}); 
```

**没有 jQuery 答案** [http://codepen.io/anon/pen/BzKxG](http://codepen.io/anon/pen/BzKxG)

```
<html><body>

Info Form
<form id="info" name="info">
    Email Subjects:<input name="emailsubj" value="Enter Subject Here" onblur="updateInput(this.value)">
</form>
<br/><br/>

Form 1
<form id="form1" name="form1">
    Email<input name="emadd" value="email@address.com">
    Subject<input name="subj">
</form>
<br/><br/>

Form 2     
<form id="form2" name="form2">
    Email<input name="emadd" value="email@address.com">
    Subject<input name="subj">
</form>
</body></html> 
```

JS

```
function updateInput(ish){
    var a = document.getElementsByName("subj");
    for(var i in a){
        a[i].value = ish;
    }
} 
```

# dreamweaver - Dreamweaver CS6 默认颜色.xml

> ID：15302306
> 
> 赞同：1
> 
> 时间：2013-03-08T20:01:14.200
> 
> 标签：dreamweaver

有人可以给我提供 Dreamweaver CS6 的默认 Colors.xml 文件的链接吗？我已将我的偏好更新为深色方案，并希望恢复为默认值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T12:57:50.473

这是 Dreamweaver CS6 的默认颜色文件。 [https://dl.dropbox.com/u/19101303/Colors.xml](https://dl.dropbox.com/u/19101303/Colors.xml)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-05T16:12:05.120

假设您指的是代码颜色，您可以在此处将配色方案更改回“*经典*”：

> 首选项 > 代码着色 > 主题（下拉菜单）。

**屏幕截图**：[首选项面板屏幕截图](https://i.stack.imgur.com/oQ4nc.png)

# sql-server - Visual Studio：SQL 服务器对象资源管理器错误

> ID：15302310
> 
> 赞同：2
> 
> 时间：2013-03-08T20:01:18.780
> 
> 标签：sql-server, visual-studio-setup

当我选择 SQL Server 对象资源管理器时，我无法弄清楚如何解决此错误。

```
Could not load file or assembly

'Microsoft.Data.Tools.Schema.Utilities.Sql.11 Version=11.1.0.0

Culture=neutral, PublicKeyToken=**** or one of its dependencies. The system cannot find the file specified. 
```

我在微软论坛上问过，但我认为每天实际使用这个的人可能会有更好的回应。我是 VS 的新用户，所以我的知识有限。我已经更新了 VS，并且在这台机器上安装了 SQL Server 2012。

预先感谢您帮助我理解此错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-03T05:26:28.207

与 VS 2013 相同，可能是相同的根本问题：

无法加载文件或程序集 'Microsoft.Data.Tools.Schema.Utilities.Sql.12 版本 = 12.0.0

我能够通过获取最新版本的**Microsoft SQL Server Data Tools**来解决这个问题。这是在工具菜单下：

工具 >> 扩展和更新 >> 更新

# actionscript-3 - as3组件事件错误

> ID：15302315
> 
> 赞同：0
> 
> 时间：2013-03-08T20:01:48.990
> 
> 标签：actionscript-3, components

我正在我的项目中构建一个表单。在舞台上，我有一些组合框一个复选框和一个单选按钮。

当我实时运行应用程序时，我得到了这个错误。1046：未找到类型或不是编译时常量：ComponentEvent。

我不确定是什么导致了这个错误，因为我已经导入了 ComponentEvent。

代码如下。你能告诉我如何解决这个错误。谢谢你。

```
 package  {

     public class Flash_Main {

         import fl.motion.MotionEvent;
         import flash.events.Event;
         import flash.text.TextFormat;
         import fl.data.DataProvider;
         import fl.ComponentEvent;

         public function Flash_Main() {
         // Building the components

   var tf:TextFormat = new TextFormat();
   tf.font = "Arial";
   tf.size = 16;
   tf.color = 0x000000;

   var monthA=     

            ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October",   "November", "December"];

  monthCB.dataProvider.dp;

  var dataA:Array = [];
  setDatesF(31);
  function setDatesF(n:int):void {

     for (var i:int=1; i<=n; i++) {

        dataA.push(i);

   }

dp=new DataProvider(dataA);

dateCB.dataProvider=dp;

 }

  var yearA:Array = [];
  for (var i:int= 1910; i<2014; i++) {

     yearA.push(i);

  }

  dp = new DataProvider(yearA);

  yearCB.dataProvider=dp;

  monthCB.addEventListener(Event.CHANGE,monthF);

   function monthF(e:Event):void {

     var d:Date = new Date(yearCB.selectedLabel,1+monthA.indexOf(monthCB.selectedLabel),0);

     setDatesF(d.date);

  }

  var items:Array = [
 {label:"London", data:"LondonData"}, 
  {label:"Paris", data:"ParisData"}, 
  {label:"New York City", data:"New York CityData"}, 
  {
 ];                    
  aBb.DataProvider = new DataProvider(items);

   aBb.addEventListener(ComponentEvent.ENTER, onAddItem);

  function onAddItem(event:ComponentEvent):void { 
    var newRow:int = 0; 
    if (event.target.text == "Add") { 
        newRow = event.target.length + 1; 
             event.target.addItemAt({label:"" + newRow, data:"Data" + newRow},  
        event.target.length);  
   } 
 }

  aCb.addEventListener(MouseEvent.CLICK, clickHandler);

  aCd.enabled = false;
  aCe.enabled = false;

  function clickHandler(event:MouseEvent):void{
      aCd.enabled = event.target.selected;
      aCe.enabled = event.target.selected;
  }
          }

      }

  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T05:02:10.167

相信您将进口商品放在错误的位置：

```
package
{
    import fl.motion.MotionEvent;
    import flash.events.Event;
    import flash.text.TextFormat;
    import fl.data.DataProvider;
    import fl.events.ComponentEvent;

    public class Flash_Main {
        public function Flash_Main() {
            // Building the components

            var tf:TextFormat = new TextFormat();
            tf.font = "Arial";
            tf.size = 16;
            tf.color = 0x000000;

            var monthA:Array=
                ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October",   "November", "December"];

            monthCB.dataProvider.dp;

            var dataA:Array = [];
            setDatesF(31);
            function setDatesF(n:int):void {

                for (var i:int=1; i<=n; i++) {

                    dataA.push(i);

                }

                dp=new DataProvider(dataA);

                dateCB.dataProvider=dp;

            }

            var yearA:Array = [];
            for (var i:int= 1910; i<2014; i++) {

                yearA.push(i);

            }

            dp = new DataProvider(yearA);

            yearCB.dataProvider=dp;

            monthCB.addEventListener(Event.CHANGE,monthF);

            function monthF(e:Event):void {

                var d:Date = new Date(yearCB.selectedLabel,1+monthA.indexOf(monthCB.selectedLabel),0);

                setDatesF(d.date);

            }

            var items:Array = [
                {label:"London", data:"LondonData"}, 
                {label:"Paris", data:"ParisData"}, 
                {label:"New York City", data:"New York CityData"}, 
                {
            ];                    
            aBb.DataProvider = new DataProvider(items);

            aBb.addEventListener(ComponentEvent.ENTER, onAddItem);

            function onAddItem(event:ComponentEvent):void { 
                var newRow:int = 0; 
                if (event.target.text == "Add") { 
                    newRow = event.target.length + 1; 
                    event.target.addItemAt({label:"" + newRow, data:"Data" + newRow},  
                        event.target.length);  
                } 
            }

            aCb.addEventListener(MouseEvent.CLICK, clickHandler);

            aCd.enabled = false;
            aCe.enabled = false;

            function clickHandler(event:MouseEvent):void{
                aCd.enabled = event.target.selected;
                aCe.enabled = event.target.selected;
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T20:31:47.283

改变

```
import fl.ComponentEvent; 
```

至

```
import fl.events.ComponentEvent; 
```

# javascript - 将值推送到关联数组

> ID：15302318
> 
> 赞同：1
> 
> 时间：2013-03-08T20:01:54.117
> 
> 标签：javascript, push, associative-array

我为我指导的学生创建了以下代码，我想知道是否有人能想到更简单的方法或已经存在的方法？我也有兴趣学习如何在 javascript 中创建插件，但忘记了如何/无法在谷歌上找到它。

无论如何，这是代码......

```
window.addEventListener('load', function()
{
    for(var i = 0; i < document.forms[0].length; i++)
    {
        document.forms[0].elements[i].checked = false;
    }   
}, false);

function formHandler()
{
    valArray = new Array();
    toppArray = new Array();
    var theForm = document.forms[0];

    for(var i = 0; i < theForm.length; i++)
    {
        theValue = theForm.elements[i].value;
        if(theForm.elements[i].checked == true)
        {
            if(theForm.elements[i].type == 'checkbox' && theForm.elements[i].name == 'myChBx')
            {
                appendArr(toppArray, theForm.elements[i].value);
                appendArr(valArray, toppArray, 'topping');  
            }else
            {
                appendArr(valArray, theValue);  
            }
        }
    }
}

function appendArr(array, value, keyVal = '')
{
    if(keyVal != '')
    {
        array[keyVal] = value;
    }else
        array[array.length] = value;
} 
```

好的，现在简要解释一下这段代码的作用。在 php 中，我知道您可以使用类似的方法将值附加到数组中

```
$array[] = $value; 
```

但是我已经阅读了几个地方，您必须如何使用对象在 javascript 中创建关联数组。在某种程度上，我想我已经做到了，但我使用数组对象进行了管理。

这样做的目的是从一个简单的单选框和复选框表单中获取值，例如这个......

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<script type="text/javascript" src="./appendArr.js"></script>
</head>

<body>
    <form action="" method="post">
        Radio 1:<input type="radio" name="myRdo" id="rdo" value="radio 1" onclick="formHandler();" />
        Radio 2:<input type="radio" name="myRdo" id="rdo" value="radio 2" onclick="formHandler();" />
        Radio 3:<input type="radio" name="myRdo" id="rdo" value="radio 3" onclick="formHandler();" />
        <br />
        Checkbox 1:<input type="checkbox" name="myChBx" id="myChBx" value="Checkbox 1" onclick="formHandler();" />
        Checkbox 2:<input type="checkbox" name="myChBx" id="myChbx" value="Checkbox 2" onclick="formHandler();" />
        Checkbox 3:<input type="checkbox" name="myChBx" id="myChbx" value="Checkbox 3" onclick="formHandler();" />
        <br />
        <input type="submit" name="submit" id="button" " value="Button" />
    </form>
</body>
</html> 
```

并将它们存储在一个数组中，该数组的其中一个值是一个称为 toppings 的关联数组；所以数组中的一些值将是单个变量，而其他值将是单个变量的集合。

无论如何......我可能只是白白花了一个小时，但我来这里学习，所以请不要拖钓。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T22:51:50.943

JavaScript 没有关联数组，它有作为索引列表的“数组”，它有作为键：值容器的“对象”。这似乎也与您要问的内容无关，所以...您需要回答的实际问题是什么？“如何在 JavaScript 中执行 $arr[] = $val”？如果是这样，那就是 push()，如下所示：

```
["a","b","c"].push("d") // result: ["a","b","c","d"] 
```

如果这不是您的问题，请编辑您的原始帖子，因为您完全不清楚您真正想知道什么。

# c# - WebMatrix 的 WebImage Helper 支持哪些图像文件类型？

> ID：15302326
> 
> 赞同：2
> 
> 时间：2013-03-08T20:02:16.533
> 
> 标签：c#, post, webmatrix, webimage

使用时，WebMatrix 的 WebImage Helper 支持哪些图像文件类型`WebImage.GetImageFromRequest();`？

我看过这里： http: [//msdn.microsoft.com/en-us/library/system.web.helpers.webimage.getimagefromrequest](http://msdn.microsoft.com/en-us/library/system.web.helpers.webimage.getimagefromrequest(v=vs.111).aspx) (v=vs.111).aspx但它并没有真正提供任何有用的信息（除了你可以通过文件名请求之外，我已经知道了）。

我知道接受以下文件类型：“.jpg”、“.png”、“.bmp”和“.gif”

我知道不支持以下文件类型：“.ico”，任何与图像无关的文件扩展名。

是否还有其他未在此处列出的受支持或不受支持的图像文件类型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T07:47:36.117

WebImage 助手将尝试从任何具有[图像 MIME 类型](http://www.iana.org/assignments/media-types/image)的文件中返回图像。

# windows - 如何在 Windows 8 平板电脑（例如 ATIV Smart PC）上打开/关闭 LED 摄像头闪光灯

> ID：15302333
> 
> 赞同：4
> 
> 时间：2013-03-08T20:02:38.253
> 
> 标签：windows, flash, camera, led

我找不到控制 Windows 8 平板电脑相机闪光灯的代码。任何人都可以帮我得到它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-30T21:01:11.847

[http://msdn.microsoft.com/en-us/library/windows/hardware/jj151590(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/hardware/jj151590(v=vs.85).aspx)

:D 希望这可以帮助您找到解决方案

# c++ - 调用函数，如果有，否则忽略

> ID：15302337
> 
> 赞同：17
> 
> 时间：2013-03-08T20:02:46.287
> 
> 标签：c++, templates, c++11

我现在想制作将一些元素推送到支持`push_back`运算符的向量和其他类型的模板。

我可以这样做

```
template<typename T>
T fill(size_t n) {
    T v;
    //(1)
    for(size_t i = 0; i < n; ++i){
        v.push_back(generate_some_how());
    }
    return v;
} 
```

有用。但现在我想提高支持它的类型的速度，`v.reserve(n);`而不是`(1)`. 但我仍然希望能够为无法编译的类型编译此代码`reserve`

这是实现这一目标的简单方法吗？

我知道我可能专门研究硬编码类型，但它似乎并不好。

C++11 没问题。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-08T20:18:12.293

一个使用 C++11 的简单示例：

```
template<class T>
auto maybe_reserve(T& v, size_t n, int)
    -> decltype(v.reserve(n), void())
{
  v.reserve(n);
}

template<class T>
void maybe_reserve(T&, size_t, long){}

template<typename T>
T fill(std::size_t n) {
    T v;
    maybe_reserve(v, n, 0);
    for(size_t i = 0; i < n; ++i){
        v.push_back(generate_some_how());
    }
    return v;
} 
```

[活生生的例子。](http://ideone.com/1YCjlO)有关解释，请查看[此处](https://stackoverflow.com/a/9154394/500104)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-08T20:20:26.907

C ++ 11中的一种可能方法：

```
template<typename T, typename = void>
struct reserve_helper
{ static void call(T& obj, std::size_t s) { } };

template<typename T>
struct reserve_helper<T, decltype(std::declval<T>().reserve(0), void(0))>
{ static void call(T& obj, std::size_t s) { obj.reserve(s); } };

template<typename T>
T fill(std::size_t n)
{
    T v;
    reserve_helper<T>::call(v, 10);
    for(std::size_t i = 0; i < n; ++i){
        v.push_back(generate_somehow());
    }

    return v;
} 
```

这是一个**[实时示例](http://liveworkspace.org/code/4sAas7%2417)**，显示调用`reserve()`只是被一个未定义任何`reserve()`成员函数的 UDT 跳过。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-08T20:09:12.057

不太难......你需要编写一个特征来检测具有正确签名的保留成员函数的存在。使用该工具，您可以使用不同的方法，您可以编写一个`reserve_`模板函数，该函数使用该特征调度到调用`reserve()`或无操作并从中调用它，`// (1)`或者您可以在帮助程序或`fill`本身中使用 SFINAE。我会尝试使用辅助函数，因为填充的大多数代码都是相同的。

检测`void reserve(std::size_t)`C++03中是否存在成员函数：

```
template <typename T>
struct has_reserve {
   typedef char yes;
   typedef yes  no[2];
   template <typename U, U> struct ptrmbr_to_type;
   template <typename U> 
   static yes& test(ptrmbr_to_type<void (T::*)(std::size_t),&U::reserve>*);
   template <typename U> static no& test(...);
   static const bool value = sizeof(test<T>(0))==sizeof(yes);
}; 
```

# webrtc - webrtc AEC算法

> ID：15302339
> 
> 赞同：8
> 
> 时间：2013-03-08T20:02:49.053
> 
> 标签：webrtc, aec

我制作了一个使用 WebRTC DSP 库（AEC、NS、AGC、VAD）的软件。现在我需要知道每个算法使用什么算法来写我的硕士论文，但我没有找到任何相关信息。

有人知道这个库的算法，特别是声学回声消除（例如 NLMS，我知道它很常用，但我不知道 WebRTC 是否也使用它）。

我试图了解查看源代码的算法，但我还不够了解。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T03:37:35.127

我刚刚成功地为 android 使用了独立的 WebRTC aecm 模块。并且有一些提示：

1.最重要的是“延迟”这个东西，你可以在dir中找到它的定义：

..\src\modules\audio_processing\include\audio_processing.h

引用：

> 设置|延迟| 在 AnalyzeReverseStream() 接收远端帧和 ProcessStream() 接收包含相应回声的近端帧之间以毫秒为单位。在客户端，这可以表示为延迟 = (t_render - t_analyze) + (t_process - t_capture)
> 
> 在哪里，
> 
> *   t_analyze 是帧传递给 AnalyzeReverseStream() 的时间，t_render 是音频硬件渲染同一帧的第一个样本的时间。
> *   t_capture 是音频硬件捕获帧的第一个样本的时间，t_pull 是同一帧传递给
>     ProcessStream() 的时间。

如果您想在独立模式下使用 aecm 模块，请务必**严格**遵守此文档。

2.AudioRecord 和AudioTrack 有时会阻塞（由于最小化的缓冲区大小），所以在计算延迟时，不要忘记为其添加阻塞时间。

3.如果不知道怎么编译aecm模块，可以先学[Android NDK](http://developer.android.com/tools/sdk/ndk/index.html)，模块src路径为

..\src\modules\audio_processing\aecm

顺便说一句，这个博客可能对原生开发有很大帮助。和调试。

[http://mhandroid.wordpress.com/2011/01/23/using-eclipse-for-android-cc-development/](http://mhandroid.wordpress.com/2011/01/23/using-eclipse-for-android-cc-development/)

[http://mhandroid.wordpress.com/2011/01/23/using-eclipse-for-android-cc-debugging/](http://mhandroid.wordpress.com/2011/01/23/using-eclipse-for-android-cc-debugging/)

希望这可以帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-05T17:11:17.097

从 WebRtc 中 AGC 算法的代码检查来看，它与[http://www.ti.com/lit/wp/spraal1/spraal1.pdf中的描述非常吻合](http://www.ti.com/lit/wp/spraal1/spraal1.pdf)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-10T11:00:55.363

它基于 NLMS，但具有可变步长 (mu)。

# c# - 尝试通过 WSE 或 WCF 访问 Web 服务时出现“签名或解密无效”

> ID：15302343
> 
> 赞同：2
> 
> 时间：2013-03-08T20:03:08.310
> 
> 标签：c#, wcf, web-services, soap, wse

我已经获得了需要使用 C# 访问的 WSDL 和 Web 服务的 URL。通过 HTTPS 访问 Web 服务，并指示我需要使用已提供给我们的证书对 SOAP 有效负载进行签名。我们还获得了一个示例 SOAP 消息，当我将它插入到 soapUI 中时，它会返回一个有效的响应。该消息如下所示：

```
<soapenv:Envelope xmlns:oas="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xis="http://paymetric/2007-07/XiSecureWS.xsd">
   <soapenv:Header><wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd"><wsse:BinarySecurityToken EncodingType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-soap-message-security-1.0#Base64Binary" ValueType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-x509-token-profile-1.0#X509v3" wsu:Id="CertId-94D3D696D2D0F9176413124110633037" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">MIICYDCCAcmgAwIBAgIFLtK9XLEwDQYJKoZIhvcNAQEFBQAwgZQxCzAJBgNVBAYTAlVTMQswCQYDVQQIEwJUWDEQMA4GA1UEBxMHSG91c3RvbjEYMBYGA1UEChMPUGF5bWV0cmljLCBJbmMuMQ0wCwYDVQQLEwRTYWFTMRswGQYDVQQDExJQTUNBLnBheW1ldHJpYy5jb20xIDAeBgkqhkiG9w0BCQEWEW1pc0BwYXltZXRyaWMuY29tMB4XDTExMDQxMjE1MDk1M1oXDTEzMDQwMTE1MDk1M1owgYUxCzAJBgNVBAYTAlVTMQswCQYDVQQIEwJHQTERMA8GA1UEBxMIQ29sb21idXMxDjAMBgNVBAoTBUFmbGFjMQ4wDAYDVQQLEwVBZmxhYzEWMBQGA1UEAxMNQ2VjaWxsaW8gR2lsbDEeMBwGCSqGSIb3DQEJARYPY2dpbGxAYWZsYWMuY29tMFwwDQYJKoZIhvcNAQEBBQADSwAwSAJBAMN5LPHPVzhTWkB/R7qJVNMe/Z9dLsCZ5qlo/m1BRS0nGS+EWSTrjeGj12pGIO7xKg+OMOZMOylvNTzsgrh6U+sCAwEAAaMPMA0wCwYDVR0PBAQDAgP4MA0GCSqGSIb3DQEBBQUAA4GBACwh0KaS6RqMRXY4IDTGfWq2KQ+lLpkjtReAXlnpYr350axV9EoPoDkW3MPwdsKPWeFPll4vZQbOw4+kw07rGXrKLydxp2FpCRRNzoGlMTDyA1HpOtL2zMpokXz7HB7E13Y6SwJjK03KTJSw4wJLw/2AzYmZiYbp6L6OvD1lx0fJ</wsse:BinarySecurityToken><ds:Signature Id="Signature-3" xmlns:ds="http://www.w3.org/2000/09/xmldsig#">
<ds:SignedInfo>
<ds:CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
<ds:SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#rsa-sha1"/>
<ds:Reference URI="#id-2">
<ds:Transforms>
<ds:Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
</ds:Transforms>
<ds:DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/>
<ds:DigestValue>0YnXlBdLNSbCMUP0Tuiu3c2ye+g=</ds:DigestValue>
</ds:Reference>
</ds:SignedInfo>
<ds:SignatureValue>
LBpI+U/3Q9utuaNR/8j4smX1VGoOCeexbDmL6xM4nrHpHyNys1J6kOJIwGLOW0XEKRzTbdil5JjO
iKR/jzg5hw==
</ds:SignatureValue>
<ds:KeyInfo Id="KeyId-94D3D696D2D0F9176413124110633038">
<wsse:SecurityTokenReference wsu:Id="STRId-94D3D696D2D0F9176413124110633039" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd"><wsse:Reference URI="#CertId-94D3D696D2D0F9176413124110633037" ValueType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-x509-token-profile-1.0#X509v3"/></wsse:SecurityTokenReference>
</ds:KeyInfo>
</ds:Signature></wsse:Security></soapenv:Header>
   <soapenv:Body wsu:Id="id-2" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
      <xis:sEncrypt_Input>
         <xis:MaxUnmaskedDigits>4</xis:MaxUnmaskedDigits>
         <xis:isUnmaskedFromLeft>1</xis:isUnmaskedFromLeft>
         <xis:strRawValue>1234123412341234</xis:strRawValue>
      </xis:sEncrypt_Input>
   </soapenv:Body>
</soapenv:Envelope> 
```

我尝试使用 WSE 3.0 和 WCF 访问此服务。我知道 WSE 已经过时了，我不应该使用它，但是我非常渴望在这一点上有效的东西，而且我对 WCF 的运气也没有更好。

这是我的 WSE 实现：

```
XiSecureWSService svcXi = new XiSecureWSService();
            SoapContext context = svcXi.RequestSoapContext;

            X509Store store = new X509Store(StoreName.TrustedPeople, StoreLocation.LocalMachine);
            store.Open(OpenFlags.ReadOnly);

            X509Certificate2Collection certs = store.Certificates.Find(X509FindType.FindBySubjectDistinguishedName,
                "certificatelookupinfo", false);

            X509Certificate2 cert;
            X509SecurityToken signatureToken;
            if (certs.Count == 1)
            {
                cert = certs[0];
                signatureToken = new X509SecurityToken(cert);
            }
            else
            {
                signatureToken = null;
            }

            MessageSignature sig = new MessageSignature(signatureToken);

            context.Security.Tokens.Add(signatureToken);
            context.Security.Elements.Add(sig);
            context.Security.MustUnderstand = false;
            context.Security.Timestamp.TtlInSeconds = 60;

            sEncrypt_InputType xiInput = new sEncrypt_InputType();
            xiInput.MaxUnmaskedDigits = 4;
            xiInput.isUnmaskedFromLeft = false;
            xiInput.strRawValue = "1234123412341234";

            sEncrypt_OutputType xiOutput = svcXi.pm_SingleEncrypt(xiInput); 
```

这是我的 WCF 实现：

```
XiSecureWSPortTypeClient client = new XiSecureWSPortTypeClient("XiSecureWSServicePort",
                                                                           "https://endpointaddress");

            X509Store store = new X509Store(StoreName.TrustedPeople, StoreLocation.LocalMachine);
            store.Open(OpenFlags.ReadOnly);

            X509Certificate2Collection certs = store.Certificates.Find(X509FindType.FindBySubjectDistinguishedName,
                                                                       "certificatelookupinfo",
                                                                       false);

            X509Certificate2 cert;
            X509SecurityToken signatureToken;
            if (certs.Count == 1)
            {
                cert = certs[0];
                signatureToken = new X509SecurityToken(cert);
            }
            else
            {
                cert = null;
                signatureToken = null;
            }

            SecurityHeaderType security = new SecurityHeaderType();
            client.ClientCredentials.ClientCertificate.Certificate = cert;

            sEncrypt_InputType xiInput = new sEncrypt_InputType();
            xiInput.MaxUnmaskedDigits = 4;
            xiInput.isUnmaskedFromLeft = false;
            xiInput.strRawValue = "1234123412341234";

            sEncrypt_OutputType xiOutput = client.pm_SingleEncrypt(security, xiInput); 
```

我的 .config 文件如下所示：

```
<?xml version="1.0"?>
<configuration>
  <startup>
  <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.5"/></startup>
  <system.serviceModel>
    <protocolMapping>
      <add scheme="https" binding="customBinding"/>
    </protocolMapping>
    <bindings>
      <customBinding>
        <binding name="MyCustomBinding">
          <textMessageEncoding messageVersion="Soap11" />
          <security authenticationMode="CertificateOverTransport" includeTimestamp="true" />
          <httpsTransport keepAliveEnabled="false" />
        </binding>
      </customBinding>
    </bindings>
    <client>
      <endpoint address="https://endpointaddress" binding="customBinding"
        bindingConfiguration="MyCustomBinding" contract="XiSecureWSPortType"
        name="XiSecureWSServicePort" />
    </client>
  </system.serviceModel>
</configuration> 
```

通过 WSE 生成的 SOAP 调用如下所示：

```
 <?xml version="1.0" encoding="UTF-8"?>
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:wsa="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
    <soap:Header>
        <wsa:Action wsu:Id="Id-c93385e7-4e68-4e65-b73f-e0d6040b407a">http://endpoint.wsdl/pm_SingleEncrypt</wsa:Action>
        <wsa:MessageID wsu:Id="Id-dbdda6fd-6d3f-4b1d-8b30-34b87567d865">urn:uuid:054e3fdd-c1ab-4ef8-9e45-d6edbf462272</wsa:MessageID>
        <wsa:ReplyTo wsu:Id="Id-5704430b-7323-468d-9073-ce6f4adb03c6">
            <wsa:Address>http://schemas.xmlsoap.org/ws/2004/08/addressing/role/anonymous</wsa:Address>
        </wsa:ReplyTo>
        <wsa:To wsu:Id="Id-795dab74-1cab-44ed-8c1e-6cf5db6d89c5">https://endpointaddress</wsa:To>
        <wsse:Security>
            <wsu:Timestamp wsu:Id="Timestamp-5c742cc5-9653-45f3-81cf-691d5e76861c">
                <wsu:Created>2013-03-08T19:53:18Z</wsu:Created>
                <wsu:Expires>2013-03-08T19:54:18Z</wsu:Expires>
            </wsu:Timestamp>
            <wsse:BinarySecurityToken ValueType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-x509-token-profile-1.0#X509v3" EncodingType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-soap-message-security-1.0#Base64Binary" wsu:Id="SecurityToken-d1c1eee1-4eaa-4418-8d80-4416b05b4745">MIICrDCCAhWgAwIBAgIFLtjzLRAwDQYJKoZIhvcNAQEFBQAwgZQxCzAJBgNVBAYTAlVTMQswCQYDVQQIEwJUWDEQMA4GA1UEBxMHSG91c3RvbjEYMBYGA1UEChMPUGF5bWV0cmljLCBJbmMuMQ0wCwYDVQQLEwRTYWFTMRswGQYDVQQDExJQTUNBLnBheW1ldHJpYy5jb20xIDAeBgkqhkiG9w0BCQEWEW1pc0BwYXltZXRyaWMuY29tMB4XDTEyMDgzMTE1NTYyOFoXDTE0MDgyMTE1NTYyOFowgY0xCzAJBgNVBAYTAlVTMQswCQYDVQQIDAJTQzETMBEGA1UEBwwKQ2hhcmxlc3RvbjESMBAGA1UECgwJQmxhY2tiYXVkMQwwCgYDVQQLDANVQVQxFjAUBgNVBAMMDUxpbmRhIENvbGxpbnMxIjAgBgkqhkiG9w0BCQEWE25vb25lQGJsYWNrYmF1ZC5jb20wgZ8wDQYJKoZIhvcNAQEBBQADgY0AMIGJAoGBAKvvNxFm5pXQepTeBkonadC9AHAlZrwyJheNewJ7gaS+jGNAFPHOabiUHS99TIo5Qp9+iwkKBeHuCiiJCeBzhBUVjTJ+CQFbJc12IhVRvOeW5xnyawbe+025BkK+xfjDFvTU2LIZjAV+3y+TADVWUV4VSALlwARKHH2EOu0JaZqfAgMBAAGjDzANMAsGA1UdDwQEAwID+DANBgkqhkiG9w0BAQUFAAOBgQCGQfBXqMe/Qmr3LIItBzHFyP+qu8+/IA7x+//xOFFm/GpJg8FWd8uHiuWOVNHjxLKzN/o+oKRPs1rBamCjB4CDI9BhKDDi6ZmA2uvSJV2pdEeKL63mgPBb0o8QrFrUWSqoDEGqa8d6vlgXrQSzojIK3rxjd71xfoPcdrcBwHqJCw==</wsse:BinarySecurityToken>
            <Signature xmlns="http://www.w3.org/2000/09/xmldsig#">
                <SignedInfo>
                    <ds:CanonicalizationMethod xmlns:ds="http://www.w3.org/2000/09/xmldsig#" Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#" />
                    <SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#rsa-sha1" />
                    <Reference URI="#Id-c93385e7-4e68-4e65-b73f-e0d6040b407a">
                        <Transforms>
                            <Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#" />
                        </Transforms>
                        <DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1" />
                        <DigestValue>kOQUVB/DeBZJiM5sOBtjdtuxXlg=</DigestValue>
                    </Reference>
                    <Reference URI="#Id-dbdda6fd-6d3f-4b1d-8b30-34b87567d865">
                        <Transforms>
                            <Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#" />
                        </Transforms>
                        <DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1" />
                        <DigestValue>pJRl5c7txgnw4rXEWzrFrmOBVPE=</DigestValue>
                    </Reference>
                    <Reference URI="#Id-5704430b-7323-468d-9073-ce6f4adb03c6">
                        <Transforms>
                            <Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#" />
                        </Transforms>
                        <DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1" />
                        <DigestValue>YBG6XGu50bEz+yGcUl6LSflpegM=</DigestValue>
                    </Reference>
                    <Reference URI="#Id-795dab74-1cab-44ed-8c1e-6cf5db6d89c5">
                        <Transforms>
                            <Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#" />
                        </Transforms>
                        <DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1" />
                        <DigestValue>LOUX6dBXgV0UI+2Xz2SbvXCjLZg=</DigestValue>
                    </Reference>
                    <Reference URI="#Timestamp-5c742cc5-9653-45f3-81cf-691d5e76861c">
                        <Transforms>
                            <Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#" />
                        </Transforms>
                        <DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1" />
                        <DigestValue>tUlKm/sCne9jjjlg/oOtycdFUhI=</DigestValue>
                    </Reference>
                    <Reference URI="#Id-44ed0eaf-f408-45ac-b703-fff9b3fdd638">
                        <Transforms>
                            <Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#" />
                        </Transforms>
                        <DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1" />
                        <DigestValue>ekZF3fuslJcNRjuXNekGZ49Hdq8=</DigestValue>
                    </Reference>
                </SignedInfo>
                <SignatureValue>K1MfLOS6sHmPxVsaLgTHoS9/Kisy/T07Um0/qlpV+246F+jPy1HbU+K0/pnAGESgLnzzA8bbGp7fZxmoIOx6oAONtI7sqM6E6OxY9g0aw+b+XAL65JT+9cXIKLNOUs9O9f301PGmlJ0ldocz0TkAX9NQTxdv8e8zqhsBLsH9kKo=</SignatureValue>
                <KeyInfo>
                    <wsse:SecurityTokenReference>
                        <wsse:Reference URI="#SecurityToken-d1c1eee1-4eaa-4418-8d80-4416b05b4745" ValueType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-x509-token-profile-1.0#X509v3" />
                    </wsse:SecurityTokenReference>
                </KeyInfo>
            </Signature>
        </wsse:Security>
    </soap:Header>
    <soap:Body wsu:Id="Id-44ed0eaf-f408-45ac-b703-fff9b3fdd638">
        <sEncrypt_Input xmlns="http://endpoint/xsdname.xsd">
            <MaxUnmaskedDigits>4</MaxUnmaskedDigits>
            <isUnmaskedFromLeft>false</isUnmaskedFromLeft>
            <strRawValue>1234123412341234</strRawValue>
        </sEncrypt_Input>
    </soap:Body>
</soap:Envelope> 
```

WCF SOAP 请求如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/" xmlns:u="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
    <s:Header>
        <h:Security xmlns:h="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" />
        <VsDebuggerCausalityData xmlns="http://schemas.microsoft.com/vstudio/diagnostics/servicemodelsink">uIDPo8nVLrfiqatEmo8IboHWGp0AAAAA1E1NtzXJZEGIoAvEM9FGvDB0fAYl39xBpJzQdMwSA8IACQAA</VsDebuggerCausalityData>
        <o:Security xmlns:o="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" s:mustUnderstand="1">
            <u:Timestamp u:Id="_0">
                <u:Created>2013-03-08T21:13:18.546Z</u:Created>
                <u:Expires>2013-03-08T21:18:18.546Z</u:Expires>
            </u:Timestamp>
            <o:BinarySecurityToken u:Id="uuid-ecc8d8b8-ede9-46f6-b589-5d3b606a051a-1" ValueType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-x509-token-profile-1.0#X509v3">MIICrDCCAhWgAwIBAgIFLtjzLRAwDQYJKoZIhvcNAQEFBQAwgZQxCzAJBgNVBAYTAlVTMQswCQYDVQQIEwJUWDEQMA4GA1UEBxMHSG91c3RvbjEYMBYGA1UEChMPUGF5bWV0cmljLCBJbmMuMQ0wCwYDVQQLEwRTYWFTMRswGQYDVQQDExJQTUNBLnBheW1ldHJpYy5jb20xIDAeBgkqhkiG9w0BCQEWEW1pc0BwYXltZXRyaWMuY29tMB4XDTEyMDgzMTE1NTYyOFoXDTE0MDgyMTE1NTYyOFowgY0xCzAJBgNVBAYTAlVTMQswCQYDVQQIDAJTQzETMBEGA1UEBwwKQ2hhcmxlc3RvbjESMBAGA1UECgwJQmxhY2tiYXVkMQwwCgYDVQQLDANVQVQxFjAUBgNVBAMMDUxpbmRhIENvbGxpbnMxIjAgBgkqhkiG9w0BCQEWE25vb25lQGJsYWNrYmF1ZC5jb20wgZ8wDQYJKoZIhvcNAQEBBQADgY0AMIGJAoGBAKvvNxFm5pXQepTeBkonadC9AHAlZrwyJheNewJ7gaS+jGNAFPHOabiUHS99TIo5Qp9+iwkKBeHuCiiJCeBzhBUVjTJ+CQFbJc12IhVRvOeW5xnyawbe+025BkK+xfjDFvTU2LIZjAV+3y+TADVWUV4VSALlwARKHH2EOu0JaZqfAgMBAAGjDzANMAsGA1UdDwQEAwID+DANBgkqhkiG9w0BAQUFAAOBgQCGQfBXqMe/Qmr3LIItBzHFyP+qu8+/IA7x+//xOFFm/GpJg8FWd8uHiuWOVNHjxLKzN/o+oKRPs1rBamCjB4CDI9BhKDDi6ZmA2uvSJV2pdEeKL63mgPBb0o8QrFrUWSqoDEGqa8d6vlgXrQSzojIK3rxjd71xfoPcdrcBwHqJCw==</o:BinarySecurityToken>
            <Signature xmlns="http://www.w3.org/2000/09/xmldsig#">
                <SignedInfo>
                    <CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#" />
                    <SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#rsa-sha1" />
                    <Reference URI="#_0">
                        <Transforms>
                            <Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#" />
                        </Transforms>
                        <DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1" />
                        <DigestValue>8Jq254k3Mqm2AZ58M/7SZ0Oj9hY=</DigestValue>
                    </Reference>
                </SignedInfo>
                <SignatureValue>oUQgQmYxq+RvetZYGBzHMg953V+w0hxoT5BAICFs1xDuNoJi2SYIO2nvyHrywVGpvqMLeY+K89FI9SdfMyPJx6iReZm/QB8gTP5ZwkY9YQxyEEn6hlVnU+CUYaQmBtnAXMJJkQxS+OAzz3SfGBcXZSulGMwRS1fJtbC3tNtBfF4=</SignatureValue>
                <KeyInfo>
                    <o:SecurityTokenReference>
                        <o:Reference URI="#uuid-ecc8d8b8-ede9-46f6-b589-5d3b606a051a-1" />
                    </o:SecurityTokenReference>
                </KeyInfo>
            </Signature>
        </o:Security>
    </s:Header>
    <s:Body xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
        <sEncrypt_Input xmlns="http://vendor/xsdfile.xsd">
            <MaxUnmaskedDigits>4</MaxUnmaskedDigits>
            <isUnmaskedFromLeft>false</isUnmaskedFromLeft>
            <strRawValue>4100123412341234</strRawValue>
        </sEncrypt_Input>
    </s:Body>
</s:Envelope> 
```

无论我尝试使用 WSE 做什么，都会收到一条错误消息，提示“签名或解密无效”。如果我尝试 WCF 实现，我会得到“元素 'o:Security' 中的数据必须被理解但无法处理”。我一直在为此烦恼-有人有什么想法吗？

编辑：当前 SOAP 请求：

```
<?xml version="1.0" encoding="UTF-8"?>
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/" xmlns:u="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
    <s:Header>
        <h:Security xmlns:h="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" u:Id="_2" />
        <VsDebuggerCausalityData xmlns="http://schemas.microsoft.com/vstudio/diagnostics/servicemodelsink">uIDPo9KISySaFjJMiAw5zk9o3qYAAAAAxhoAIROo00iQikvZBzGIH8wpfBfX1e1Kg29TMjN6keYACQAA</VsDebuggerCausalityData>
        <o:Security xmlns:o="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" s:mustUnderstand="1">
            <o:BinarySecurityToken u:Id="uuid-bf6b0577-5466-4726-ac5e-2ba07665475f-2" ValueType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-x509-token-profile-1.0#X509v3" EncodingType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-soap-message-security-1.0#Base64Binary">MIICrDCCAhWgAwIBAgIFLtjzLRAwDQYJKoZIhvcNAQEFBQAwgZQxCzAJBgNVBAYTAlVTMQswCQYDVQQIEwJUWDEQMA4GA1UEBxMHSG91c3RvbjEYMBYGA1UEChMPUGF5bWV0cmljLCBJbmMuMQ0wCwYDVQQLEwRTYWFTMRswGQYDVQQDExJQTUNBLnBheW1ldHJpYy5jb20xIDAeBgkqhkiG9w0BCQEWEW1pc0BwYXltZXRyaWMuY29tMB4XDTEyMDgzMTE1NTYyOFoXDTE0MDgyMTE1NTYyOFowgY0xCzAJBgNVBAYTAlVTMQswCQYDVQQIDAJTQzETMBEGA1UEBwwKQ2hhcmxlc3RvbjESMBAGA1UECgwJQmxhY2tiYXVkMQwwCgYDVQQLDANVQVQxFjAUBgNVBAMMDUxpbmRhIENvbGxpbnMxIjAgBgkqhkiG9w0BCQEWE25vb25lQGJsYWNrYmF1ZC5jb20wgZ8wDQYJKoZIhvcNAQEBBQADgY0AMIGJAoGBAKvvNxFm5pXQepTeBkonadC9AHAlZrwyJheNewJ7gaS+jGNAFPHOabiUHS99TIo5Qp9+iwkKBeHuCiiJCeBzhBUVjTJ+CQFbJc12IhVRvOeW5xnyawbe+025BkK+xfjDFvTU2LIZjAV+3y+TADVWUV4VSALlwARKHH2EOu0JaZqfAgMBAAGjDzANMAsGA1UdDwQEAwID+DANBgkqhkiG9w0BAQUFAAOBgQCGQfBXqMe/Qmr3LIItBzHFyP+qu8+/IA7x+//xOFFm/GpJg8FWd8uHiuWOVNHjxLKzN/o+oKRPs1rBamCjB4CDI9BhKDDi6ZmA2uvSJV2pdEeKL63mgPBb0o8QrFrUWSqoDEGqa8d6vlgXrQSzojIK3rxjd71xfoPcdrcBwHqJCw==</o:BinarySecurityToken>
            <Signature xmlns="http://www.w3.org/2000/09/xmldsig#">
                <SignedInfo>
                    <CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#" />
                    <SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#rsa-sha1" />
                    <Reference URI="#_1">
                        <Transforms>
                            <Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#" />
                        </Transforms>
                        <DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1" />
                        <DigestValue>zFBRC19YqaNfiONdpUCbcr4DQxs=</DigestValue>
                    </Reference>
                    <Reference URI="#_2">
                        <Transforms>
                            <Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#" />
                        </Transforms>
                        <DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1" />
                        <DigestValue>IkDHDcU8EXvtVZTidHKQd1q1g3s=</DigestValue>
                    </Reference>
                </SignedInfo>
                <SignatureValue>a377DsYAjfklKE14NT1NjGWKNQaW2CCBXRpb08tzNcJKHPF07226AxqoA589y+IscFxwzlsQ+S5g4a5DkcXG25HYyNnXktHlQWzn9B1mvElQwY1pgq02hJ5g+Z3/ctyruqu4m1gKexYAtKthor06Zf800L4QNQlfYLDVawawwnc=</SignatureValue>
                <KeyInfo>
                    <o:SecurityTokenReference>
                        <o:Reference ValueType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-x509-token-profile-1.0#X509v3" URI="#uuid-bf6b0577-5466-4726-ac5e-2ba07665475f-2" />
                    </o:SecurityTokenReference>
                </KeyInfo>
            </Signature>
        </o:Security>
    </s:Header>
    <s:Body xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" u:Id="_1">
        <sEncrypt_Input xmlns="http://vendor/xsdfile.xsd">
            <MaxUnmaskedDigits>4</MaxUnmaskedDigits>
            <isUnmaskedFromLeft>false</isUnmaskedFromLeft>
            <strRawValue>1234123412341234</strRawValue>
        </sEncrypt_Input>
    </s:Body>
</s:Envelope> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T20:31:04.837

您发布的最后一个soap 看起来像WSE 生成的那个。wcf 的外观如何？我建议将 wcf 与authenticatioMode 为“mutualCertificate”的自定义绑定一起使用，而不是像您使用的那样。有关您可能会看到的消息的更多详细信息，请参见[此处。](http://webservices20.blogspot.co.il/2012/06/12-common-wcf-interop-confusions.html)

# parsing - 如何以未指定的顺序解析一组属性？

> ID：15302346
> 
> 赞同：0
> 
> 时间：2013-03-08T20:03:30.597
> 
> 标签：parsing, scala

我有一个处理自定义属性文件的正则表达式解析器。在我的文件中，我具有以下结构：

```
...
[NodeA]
propA=val1
propB=val2
propC=val3

[NodeB]
... 
```

我定义了一个处理 NodeA 的解析器，如下所示：

```
lazy val parserA: Parser[String] = "propA" ~> "=" ~> mPropA 
lazy val parserB: Parser[String] =  
...

lazy val nodeA: Parser[NodeA] = "[" ~> "NodeA" ~> "]" ~> parserA ~> parserB ~> parserB ^^ { 
   case iPropA ~ iPropB ~ iPropC => new NodeA(iPropA, iPropB, iPropC)
} 
```

就目前而言，这可以正常工作。问题是如果 NodeA 带有不同的属性顺序，在这种情况下我会得到一个解析错误。例如：

```
[NodeA]
propC=val3
propA=val1
propB=val2 
```

有什么方法可以定义我的解析器，使其接受 NodeA 属性的未指定排序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T22:19:05.517

我仍然觉得不理解您的问题，但是：

```
import scala.util.parsing.combinator.JavaTokenParsers

object Test extends App with JavaTokenParsers {

  case class Prop(name: String, value: String)
  case class Node(name: String, propA: Prop, propB: Prop, propC: Prop)

  lazy val prop = (ident <~ "=") ~ ident ^^ {
    case p ~ v => (p, v)
  }

  lazy val node = "[" ~> ident <~ "]"

  lazy val props = repN(3, prop) ^^ {
    _.sorted map Prop.tupled
  }

  lazy val nodes = rep(node ~ props) ^^ {
    _ map { case node ~ List(a, b, c) => Node(node, a, b, c) }
  }

  val in =
"""[NodeA]
propA=val1
propB=val2
propC=val3

[NodeB]
propC=val3
propA=val1
propB=val2"""

  println(parseAll(nodes, in))
} 
```

# android - android 有可以在多个应用程序之间共享的原子计数器吗？

> ID：15302347
> 
> 赞同：0
> 
> 时间：2013-03-08T20:03:30.767
> 
> 标签：android

我们在应用商店中有多个应用程序希望通过内容提供商在它们之间同步数据。对于一致性问题，我们希望有一个全局计数器来实现灯时钟之类的东西。有什么机制可以做到这一点吗？

请注意，客户经理不是我们的选项。

# c - 如何使用 SIGINT 打破对 accept() 或 read() 的等待？

> ID：15302348
> 
> 赞同：4
> 
> 时间：2013-03-08T20:03:35.207
> 
> 标签：c, sockets, sigint

我目前正在尝试通过使用信号（在本例中为 SIGINT）来打破对 accept() 和/或 write() 的等待。我的程序也没有按预期离开。

```
void sigHandler(int signal ){

    printf(" Exit\n");

    //x is global
    x = 1;

    return;

} 
```

我挂断的主要内容主要是：

```
 clientfd = accept( sockfd, (struct sockaddr *) &client_addr, (unsigned int *) &client_addr_len ); 
```

当我点击它并使用我的信号并返回时，我仍然停留在这行代码上，等待用户连接到我的套接字。处理程序中的 x 用于这段代码所在的外部循环。

有没有更好的方法来做我想做的事情？另外，如果这还不够信息，请告诉我。

谢谢你。

编辑：

这是对信号的检查，它位于 main 的顶部。我想这就是你所要求的：

```
if ( signal( SIGINT, signalhandler ) == SIG_ERR ){
    return( 1 );
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-08T20:29:35.323

如果您使用 建立信号处理程序`signal`，则会`accept`自动重新启动。使用`signal`类似于使用`sigaction`with `sa_flags`set to include `SA_RESTART`。代替`signal`，使用`sigaction`并确保`sa_flags`struct sigaction 的字段没有`SA_RESTART`设置位。

换句话说，代替: `signal( SIGINT, signalhandler )`，使用：

```
struct sigaction a;
a.sa_handler = signalhandler;
a.sa_flags = 0;
sigemptyset( &a.sa_mask );
sigaction( SIGINT, &a, NULL ); 
```

# php - 在图像上单击更改 mysql 值

> ID：15302353
> 
> 赞同：0
> 
> 时间：2013-03-08T20:03:52.857
> 
> 标签：php, mysql, ajax, json, onclick

我是使用 Jquery/Ajax/JSon 的新手，如果用户单击两个图标之一，我想制作一个脚本来更改 mysql 中的值。

我已经搜索了任何想法，只是我不知道从哪里开始。我将 smarty 与 slim 一起使用，并且我已经设置了一个带有数据表的页面，这很好用。

我已经制作了一个数据表第 2 行图标，如果有可能如果用户单击两个图标之一而不离开页面，则值正在更新。我现在添加了像 index.php/upd/del/1 这样的 aa href 来标记为已删除，并添加了 index.php/upd/save/1 来保存。

在 upd 后面，我有一个读取 save 或 del 的功能，而 1 就是这个想法。

有人可以给我一个想法或某个地方我可以找到这样的东西。

我希望我可以在这里问这个问题，并感谢你帮助我解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T20:20:35.630

```
<a id="option1"><img src="image1.jpg" /></a>
<a id="option2"><img src="image2.jpg" /></a>

<script type="text/JavaScript">
$(function() {
    $("#option1").click(function() {
        $.post("index.php/upd/del/1", function(json) {
                if (json && json.status) {
                    alert("Change made!");
                } else {
                    alert("something failed!");
                }
            }
        );
    });
    $("#option2").click(function() {
        $.post("index.php/upd/save/1", function(json) {
                if (json && json.status) {
                    alert("Change made!");
                } else {
                    alert("something failed!");
                }
            }
        );
    });
});
</script> 
```

现在，在您的 PHP 脚本中：

```
<?php
// In order for jquery to change the data we are returning to json, we should se the headers to json. 
// Also, it is important to notice that all the ajax request will work allways with utf-8
// so if you don't want to have a lot of problems with accents and special chars, use allways utf-8
header("Content-Type:application/json; Charset=utf-8");

// Make some really cool stuff with the data at mysql
// But if something went wrong:
if ($varToSetIfErrorOcurrs === true) {
    return json_encode(array ("status" => false));
}

return json_encode(array ("status" => true)); 
```

最后的一些考虑：

*   总是按照他们的想法使用 html 元素：img 显示图像，而不是点击它们。a （锚点）点击它们。或按钮来做一些动作
*   JS 最好放在页面底部，这样在执行时所有 DOM 都已经加载完毕
*   $(函数() {}); 一旦 DOM 准备好就执行那段代码（只有 html，document.onready 在所有内容都加载后执行，包括图像，因此速度较慢）

快乐编码！

# .net - 覆盖 DataRow 的 .Item 属性以允许 DBNULLS

> ID：15302355
> 
> 赞同：0
> 
> 时间：2013-03-08T20:03:57.750
> 
> 标签：.net, vb.net

我发现我编写的大多数程序通常都包含`DataTables`，并且我经常通过选择一个`DataRow`（通过循环或 Linq）从表中提取数据，并通过编写以下内容来分配我的变量值：

```
MyVar = ThisDataRow.Item("itm") 
```

这非常有效，除非特定项目是 a`DBNull`在这种情况下它会引发错误。

现在，一个简单的解决方法是编写一个简单的函数 / if 语句，该语句要么返回值，要么返回值`0`，`""`但`DBNull`我想知道以某种方式继承`DataRow`对象并创建新属性`ItemOrEmpty`（或其他你想调用它）不会引发错误并返回正确的值。

这将允许我使用：

```
MyVar = ThisDataRow.Item("itm") 
```

或者

```
MyVar = ThisDataRow.ItemOrEmpty("itm") 
```

取决于我是否想诱捕`Nulls`。

我的问题是：

1.  我不知道如何做到这一点并使 DataTable 使用这个新对象而不是 DataRow - 似乎我需要重载`DataRow`对象而不是创建新对象，但我不知道该怎么做。
2.  这是一个好/坏主意吗？你为什么这么认为？
3.  这会增加大量开销，而不仅仅是创建一个我`DataRow.Item`每次都运行的简单函数吗？

基本上，这是一个相当理论化的问题——这总体上是好还是坏，如何实现？

谢谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T18:07:16.490

为了完整起见-对于遇到此问题的任何人-我最终这样做的方式是接受@Tim的建议并编写自己的扩展方法。请注意，这是我写的第一个，所以如果有更好的方法，请告诉我。

```
''' <summary>
''' Returns the item from a DataRow and, if it is DBNull, it returns a specified default value
''' </summary>
''' <param name="ColumnName">The name of the Column in the datarow we want the value from.</param>
''' <param name="DefaultValue">The default value for that column if it is NULL.</param>
<System.Runtime.CompilerServices.Extension()> _
Public Function ItemOrEmpty(Of T)(ByVal dr As DataRow, ByVal ColumnName As String, ByVal DefaultValue As T) As T
    If dr.Item(ColumnName) Is Nothing Or IsDBNull(dr.Item(ColumnName)) Then
        Return DefaultValue
    Else
        Return dr.Item(ColumnName)
    End If
End Function 
```

希望这可以帮助其他人...

# sql - 如何使用 XSLT 组合两个 XML 文档，类似于 SQL JOIN

> ID：15302356
> 
> 赞同：1
> 
> 时间：2013-03-08T20:04:00.817
> 
> 标签：sql, xml, xslt

我有一个用于学校班级学生的数据库应用程序。我在一个包中将大量数据发送到用户界面。为了组装复杂的 XML，我经常需要将多个数据提取为 XML，然后将它们组合起来。

我试图找到一种方法来使用 XSLT 执行类似于 SQL JOIN 的操作。例如，给定以下两个 XML 文档：

```
<Xml>
    <Classes>
        <Class Name="BIOLOGY101" ClassId="11"/>
        <Class Name="PHYSICS101" ClassId="13"/>
        <Class Name="CALCULUS101" ClassId="17"/>
        <Class Name="BIOLOGY101" ClassId="19"/>
    </Classes>
</Xml>

<Xml>
    <Students>
        <Student Name="Bob Johnson" ClassId="11"/>
        <Student Name="Bob Johnson" ClassId="17"/>
        <Student Name="Bob Johnson" ClassId="19"/>
        <Student Name="Joe Jackson" ClassId="11"/>
        <Student Name="Joe Jackson" ClassId="13"/>
        <Student Name="Joe Jackson" ClassId="17"/>
        <Student Name="Rick Robertson" ClassId="13"/>
        <Student Name="Rick Robertson" ClassId="17"/>
        <Student Name="Rick Robertson" ClassId="19"/>
    </Students>
</Xml> 
```

我想通过单个 XSLT 运行它们，以生成以下内容：

```
<Xml>
    <Classes>
        <Class Name="BIOLOGY101" ClassId="11">
            <Student Name="Bob Johnson"/>
            <Student Name="Joe Jackson"/>
        </Class>
        <Class Name="PHYSICS101" ClassId="13">
            <Student Name="Joe Jackson"/>
            <Student Name="Rick Robertson"/>
        </Class>
        <Class Name="CALCULUS101" ClassId="17">
            <Student Name="Rick Robertson" "/>
            <Student Name="Joe Jackson"/>
            <Student Name="Bob Johnson"/>
        </Class>
        <Class Name="BIOLOGY101" ClassId="19">
            <Student Name="Bob Johnson"/>
            <Student Name="Rick Robertson" />
        </Class>
    </Classes>
</Xml> 
```

请注意，我从 <Student> 节点中省略了 ClassId 属性。

我可以将这两个 XML 文档组合成一个文档以传递给 XSLT，如果这样更容易处理的话。

由于这些数据来自数据库，我将加入不同的 XML 文档。我可能会加入学校的课程，或学生的成绩，或学校的活动。但是它们都将遵循相同的模式：来自子节点的数字属性将对应于父节点中的数字属性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T20:32:36.377

在 XSLT 中完成此操作并不像在 SQL 中那么简单，但假设您提前将两个输入文件组装到一个文档中（如果对您没有问题，我会建议您这样做）：

```
<Xml>
    <Classes>
        <Class Name="BIOLOGY101" ClassId="11"/>
        <Class Name="PHYSICS101" ClassId="13"/>
        <Class Name="CALCULUS101" ClassId="17"/>
        <Class Name="BIOLOGY101" ClassId="19"/>
    </Classes>
    <Students>
        <Student Name="Bob Johnson" ClassId="11"/>
        <Student Name="Bob Johnson" ClassId="17"/>
        <Student Name="Bob Johnson" ClassId="19"/>
        <Student Name="Joe Jackson" ClassId="11"/>
        <Student Name="Joe Jackson" ClassId="13"/>
        <Student Name="Joe Jackson" ClassId="17"/>
        <Student Name="Rick Robertson" ClassId="13"/>
        <Student Name="Rick Robertson" ClassId="17"/>
        <Student Name="Rick Robertson" ClassId="19"/>
    </Students>
</Xml> 
```

此 XSLT 可用于将数据连接在一起：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes" omit-xml-declaration="yes"/>
  <!-- Key to allow retrieving students by their class -->
  <xsl:key name="kStudentByClass" match="Student" use="@ClassId"/>

  <!-- Identity Template -->
  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="Class">
    <xsl:copy>
      <!-- Copy all attributes for this Class element -->
      <xsl:apply-templates select="@*" />

      <!-- Copy in all students for the current class -->
      <xsl:apply-templates select="key('kStudentByClass', @ClassId)" />
    </xsl:copy>
  </xsl:template>

  <!-- Omit the Students element and Students' ClassId 
       attribute from the output -->
  <xsl:template match="Students | Student/@ClassId" />
</xsl:stylesheet> 
```

当它在上面的输入 XML 上运行时，它会产生：

```
<Xml>
  <Classes>
    <Class Name="BIOLOGY101" ClassId="11">
      <Student Name="Bob Johnson" />
      <Student Name="Joe Jackson" />
    </Class>
    <Class Name="PHYSICS101" ClassId="13">
      <Student Name="Joe Jackson" />
      <Student Name="Rick Robertson" />
    </Class>
    <Class Name="CALCULUS101" ClassId="17">
      <Student Name="Bob Johnson" />
      <Student Name="Joe Jackson" />
      <Student Name="Rick Robertson" />
    </Class>
    <Class Name="BIOLOGY101" ClassId="19">
      <Student Name="Bob Johnson" />
      <Student Name="Rick Robertson" />
    </Class>
  </Classes>
</Xml> 
```

如果您可以稍微更改您的 XML 以指示外部组和内部组，以及要匹配的属性，如下所示：

```
<Xml>
  <Classes outer="true" matchAttribute="ClassId">
     ....
  </Classes>
  <Students inner="true">
     ....
  </Students>
</Xml> 
```

然后您可以使用这个更通用的 XSLT，虽然效率较低，但应该适用于与上述类似的任何输入：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes" omit-xml-declaration="yes"/>

  <xsl:variable name="innerItems"
                select="/*/*[@inner = 'true']/*" />
  <xsl:variable name="matchAttribute" 
                select="/*/*[@outer = 'true']/@matchAttribute" />

  <!-- Identity Template -->
  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="/*/*[@outer = 'true']/*">
    <xsl:copy>
      <!-- Copy all attributes for this element -->
      <xsl:apply-templates select="@*" />

      <xsl:variable name="matchValue" 
                    select="@*[local-name() = $matchAttribute]"/>
      <!-- Copy in all matching items -->
      <xsl:apply-templates 
        select="$innerItems[@*[local-name() = $matchAttribute] =
                      $matchValue]" />
    </xsl:copy>
  </xsl:template>

  <xsl:template match="/*/*[@inner = 'true']/*">
    <xsl:copy>
      <xsl:apply-templates 
         select="@*[local-name() != $matchAttribute] | node()" />
    </xsl:copy>
  </xsl:template>

  <!-- Omit the inner group element, and the meta attributes-->
  <xsl:template match="/*/*[@inner = 'true'] | @outer | @matchAttribute" />
</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T20:45:47.993

JLRishe 的答案是正确的，并且效果很好，但是以防万一其他人来查看，如果您需要使用 XSLT 来组合这两个文件，您可以执行以下操作

### 一个.xml

```
<Xml>
    <Classes>
        <Class Name="BIOLOGY101" ClassId="11"/>
        <Class Name="PHYSICS101" ClassId="13"/>
        <Class Name="CALCULUS101" ClassId="17"/>
        <Class Name="BIOLOGY101" ClassId="19"/>
    </Classes>
</Xml> 
```

### b.xml

```
<Xml>
    <Students>
        <Student Name="Bob Johnson" ClassId="11"/>
        <Student Name="Bob Johnson" ClassId="17"/>
        <Student Name="Bob Johnson" ClassId="19"/>
        <Student Name="Joe Jackson" ClassId="11"/>
        <Student Name="Joe Jackson" ClassId="13"/>
        <Student Name="Joe Jackson" ClassId="17"/>
        <Student Name="Rick Robertson" ClassId="13"/>
        <Student Name="Rick Robertson" ClassId="17"/>
        <Student Name="Rick Robertson" ClassId="19"/>
    </Students>
</Xml> 
```

### 样式表

```
<?xml version="1.0" encoding="utf-8"?>

<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes"/>

  <xsl:template match="node() | @*">
    <xsl:copy>
      <xsl:apply-templates select="node() | @*"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="Class">
    <xsl:copy>
      <xsl:apply-templates select="@*"/>
      <!-- Apply <Student> elements from b.xml -->
      <xsl:apply-templates
        select="document('b.xml')/Xml/Students/Student
          [@ClassId = current()/@ClassId]"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="Student">
    <xsl:copy>
      <xsl:apply-templates select="@Name"/>
    </xsl:copy>
  </xsl:template>

</xsl:stylesheet> 
```

### 输出

```
<?xml version="1.0"?>
<Xml>
  <Classes>
    <Class Name="BIOLOGY101" ClassId="11">
      <Student Name="Bob Johnson"/>
      <Student Name="Joe Jackson"/>
    </Class>
    <Class Name="PHYSICS101" ClassId="13">
      <Student Name="Joe Jackson"/>
      <Student Name="Rick Robertson"/>
    </Class>
    <Class Name="CALCULUS101" ClassId="17">
      <Student Name="Bob Johnson"/>
      <Student Name="Joe Jackson"/>
      <Student Name="Rick Robertson"/>
    </Class>
    <Class Name="BIOLOGY101" ClassId="19">
      <Student Name="Bob Johnson"/>
      <Student Name="Rick Robertson"/>
    </Class>
  </Classes>
</Xml> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T01:41:27.867

JLRishe 的回答很棒。我迷路了，直到我得到那个。（我发布了这个问题。）

因为我知道我正在处理来自 SQL Server 的数据，所以我将始终拥有对应于两个表的父节点和子节点，并且连接它们的属性是来自这两个表的字段：具有主键字段的独立表和具有外键字段的依赖表。因此，我针对我非常具体的需求概括了解决方案，如下所示：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:my="my:my">
    <xsl:output omit-xml-declaration="yes" indent="yes"/>
    <xsl:strip-space elements="*"/>

    <!-- Parameters to make solution general -->
    <xsl:param name="ParentNode">Class</xsl:param>
    <xsl:param name="ParentIdAttribute">ClassId</xsl:param>
    <xsl:param name="ChildNode">Student</xsl:param>
    <xsl:param name="ChildReferenceAttribute">ClassId</xsl:param>

    <!-- Key to allow retrieving child nodes by the Parent node -->
    <xsl:key name="kChildByParent" match="*[name() = $ChildNode]" use="@*[name()=$ChildReferenceAttribute]"/>

    <!-- Identity Template -->
    <xsl:template match="@* | node()">
        <xsl:copy>
            <xsl:apply-templates select="@* | node()"/>
        </xsl:copy>
    </xsl:template>

    <!-- Parent Node Matching Template -->
    <xsl:template match="*[name() = $ParentNode]">
        <xsl:copy>
            <!-- Copy all attributes and child nodes for the Parent element -->
            <xsl:apply-templates select="@* | node()" />

            <!-- Copy in all children that reference the current parent -->
            <xsl:apply-templates select="key('kChildByParent', @*[name()=$ParentIdAttribute])" />
        </xsl:copy>
    </xsl:template>

    <!-- Omit the child nodes and reference attribute of the child nodes, -->
    <xsl:template match="ChildNodes | *[name() = $ChildNode]/@*[name()=$ChildReferenceAttribute]" />

</xsl:stylesheet> 
```

# android - 在 android 代码中创建一个套接字（不在 android 应用程序中）获得 Permission Denied

> ID：15302363
> 
> 赞同：2
> 
> 时间：2013-03-08T20:04:29.193
> 
> 标签：android, c++, sockets, android-emulator

我正在尝试在 android 源代码中打开一个套接字。具体来说，现在我在DisplayDevice.cpp文件中，但是socket代码的位置可能会改变。现在在我这样做之后：

```
int fd = socket(AF_INET, SOCK_STREAM, 0); 
```

fd 被返回为 -1，当我检查错误消息时，它被列为 Permission Denied。为此，我环顾四周，大多数答案都涉及将互联网权限添加到 AndroidManifest 文件中。这对我*不起作用*，因为我添加的代码在 android 源代码中。

我想知道是否有办法绕过被拒绝的权限。或者，如果有更好的方法来做到这一点/使用不同类型的套接字（现在我正在使用来自

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T23:23:22.357

你得到`Permission Denied`错误是很自然的。这仅仅是因为您没有正确的权限:)。查看[android 权限模型](http://source.android.com/tech/security/index.html#the-android-permission-model-accessing-protected-apis)！

想象一个像操作系统中的普通用户这样的场景，你编写一个程序试图打开一个像你这样的套接字。您很可能会面临同样的问题，具体取决于要创建命名套接字的位置。

当您尝试在[DisplayDevice.cpp](https://android.googlesource.com/platform/frameworks/native/+/27e2562868dcd3ad26f9b4677b64ae272941704e/services/surfaceflinger/DisplayDevice.cpp)中创建套接字（从源代码编译 android）时，您可能有兴趣以超级用户身份编译源代码。[这](https://stackoverflow.com/a/12624051/782094)是[m-ric](https://stackoverflow.com/users/808044/m-ric)发布的解决方案（我从未测试过）。

一些类似方向的有用指针/参考，我在研究这个令人着迷的主题时发现它们很有用：

1.  [https://android.stackexchange.com/questions/18857/how-to-build-compile-su-from-source](https://android.stackexchange.com/questions/18857/how-to-build-compile-su-from-source)
2.  execv 命令 => [http://code.google.com/p/superuser/source/browse/trunk/su/su.c?r=2#169](http://code.google.com/p/superuser/source/browse/trunk/su/su.c?r=2#169)
3.  [https://github.com/ChainsDD/su-binary](https://github.com/ChainsDD/su-binary)
4.  [http://e2e.ti.com/support/omap/f/849/p/178679/648158.aspx#648158](http://e2e.ti.com/support/omap/f/849/p/178679/648158.aspx#648158)
5.  来自 Google I/O 2011 的视频[http://www.youtube.com/watch?v=5yorhsSPFG4](http://www.youtube.com/watch?v=5yorhsSPFG4)

# c++ - c++ - 访问冲突读取位置0xcccccccc

> ID：15302364
> 
> 赞同：0
> 
> 时间：2013-03-08T20:04:32.203
> 
> 标签：c++

我正在使用一个名为 tArray 的对象，它是一个对象数组，并且可以正常工作以执行所有其他任务。我需要使用对象数组中的buyerName 形成一个字符串数组，以填充我们的新数组，然后返回它。但是我不断收到标题中所述的错误，有人知道为什么吗？到目前为止，我在我的程序中只使用这种方法。谢谢

第一段代码用于调用我的分析器类中的方法

```
std::string *topBuyers = analyser.topFiveBuyers();
for(int idx = 0; idx < 5; idx++)
    std::cout << "Top buyer" << (idx+1) << ": " << topBuyers[idx] << std::endl;
std::cout << std::endl;
delete [] topBuyers; 
```

代码的下一部分是有问题的方法。

```
string* Analyser::topFiveBuyers()
{
const int sSize = 5;

string calcString[sSize] = {tArray[0].buyerName, tArray[1].buyerName, 
tArray[2].buyerName, tArray[3].buyerName, tArray[4].buyerName}; 

return calcString;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T20:06:24.380

您正在返回一个指向临时变量的指针`topFiveBuyers`。

正确的方法是从您的方法返回 a `vector<string>`or`array<string,5>`而不是 a `string*`。

如果出于某种非常奇怪的原因，您绝对*必须*返回一个指针，您将需要使用`new`- 分配空间以及随之而来的所有问题，因为被调用者必须在它之后进行清理。您当前正在函数范围内使用自动存储，不能保证在函数返回后仍然可用/可访问，因此您的访问冲突。

# javascript - 包含大量表单的页面的 Javascript 图像预览

> ID：15302371
> 
> 赞同：0
> 
> 时间：2013-03-08T20:05:25.443
> 
> 标签：javascript, image-upload

我在一个页面上有一堆表单，允许用户编辑每个表单的信息。表单的输入之一是图像上传。

表格如下：

```
<form class="myForm" ...>
    <div class="imagePreview"></div>
    <input type="file" name="myImage" onchange="handleFiles(this.files)" />
</form> 
```

我有 javascript 来处理图像预览，如下所示：

```
function handleFiles(files) {
    $(".obj").remove();
    for (var i = 0; i < files.length; i++) {
        var file = files[i];
        var imageType = /image.*/;

        if (!file.type.match(imageType)) {
            continue;
        }

        var pic_div = document.getElementById("imagePreview");
        var img = document.createElement("img");
        img.classList.add("obj");
        img.file = file;
        pic_div.appendChild(img);

        var reader = new FileReader();
        reader.onload = (
            function(aImg) { 
                return function(e) { 
                    aImg.src = e.target.result; 
                }; 
            }
        )(img);
        reader.readAsDataURL(file);
    }
} 
```

我想换行：

```
var pic_div = document.getElementById("imagePreview"); 
```

用适当的线。这就是我感到困惑的地方。我不知道如何为 myForm 类的 THIS FORM 引用“imagePreview”类的 div。

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T20:16:52.860

问题是你得到了带有 Id`imagePreview`的 div ，当表单中的 div 有`imagePreview`CSS 类时，你可以做的就是给 div 所需的 id，而不是像这样：

```
<div id="imagePreview"></div> 
```

或者，如果您将有多个具有相同类的 div，则使用 jQuery 获取它们，如下所示：

```
$(".imagePreview").each(function(index){
    //Do Something
}); 
```

或者：

```
var pic_div = $(".imagePreview")[0] 
```

# backbone.js - 添加此按钮未显示在backbone.js 模板中

> ID：15302372
> 
> 赞同：0
> 
> 时间：2013-03-08T20:05:25.787
> 
> 标签：backbone.js, addthis

AddThis 按钮未显示在我的backbone.js 模板中。

我的backbone.js 模板文件中有以下代码：

```
 <!-- AddThis Button BEGIN -->
            <div class="addthis_toolbox addthis_default_style ">
            <a class="addthis_button_facebook sharebtn"></a>
            <a class="addthis_button_twitter sharebtn"></a>
            <a class="addthis_button_preferred_4 sharebtn"></a>
            </div> 
```

我将以下内容放在头文件中。

```
<script type='text/javascript' src="https://s7.addthis.com/js/300/addthis_widget.js"></script> 
```

头文件使用 django 模板呈现。

我能做些什么？

编辑：

我试着把它放在主干模板中：

```
<div id = "toolbox"></div> 
```

然后把它放在主干视图中渲染函数的末尾：

```
 tbx = that.$el.find("div#toolbox"),
            svcs = {email: 'Email', print: 'Print', facebook: 'Facebook',
                expanded: 'More'};

        for (var s in svcs) {
            tbx.innerHTML += '<a class="addthis_button_'+s+'">'+svcs[s]+'</a>';
        }

        addthis.toolbox(document.getElementById('toolbox')); 
```

但是 addthis 仍然没有渲染。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T20:17:02.293

`AddThis`插件脚本在加载时解析 HTML 。您的模板是异步加载的，因此`AddThis`没有找到相关的标记来呈现按钮。

您需要做的是在`AddThis`模板渲染到屏幕后调用渲染函数。

Checkout *Render with javascript* section of their doc：http: [//support.addthis.com/customer/portal/articles/381263-addthis-client-api](http://support.addthis.com/customer/portal/articles/381263-addthis-client-api)

# android - Jquery Mobile Form 显示两个输入区域

> ID：15302375
> 
> 赞同：2
> 
> 时间：2013-03-08T20:05:38.647
> 
> 标签：android, jquery, jquery-mobile, mobile, motorola

我在 JQM 1.3、JQ 1.9.1、Android 2-4 和主要是摩托罗拉设备上遇到了这个奇怪的问题，但可以在某些 HTC 上复制。

首先让我先说明这段代码似乎适用于大多数移动浏览器。

## 代码在一个标准的 JQM 内容 div 中，在一个页面中：

```
<div style="width:80%; max-width:800px; text-align:center;">
    <!-- First Name -->
    <label for="txty" class="ui-hidden-accessible">First Name</label>
    <asp:TextBox ID="txty" runat="server" datafield="FirstName" collectInfo="true" CssClass="" Columns="50" placeholder="First Name"></asp:TextBox>

    <!-- Last Name -->
    <label for="txtx" class="ui-hidden-accessible">Last Name</label>
    <asp:TextBox ID="txtx" runat="server" datafield="LastName" collectInfo="true" CssClass="" Columns="50" placeholder="Last Name"></asp:TextBox>

    ..// more fields

    <!-- BUTTONS -->
    <button data-role="button" id="btnSubmit" name="btnSubmit" data-icon="alert" class="btn"><span>Submit</span></button>
    <button data-role="button" id="clear" name="clear" class="clear btn" data-icon="alert"><span>Clear</span></button>

</div> 
```

* * *

## 结果（我放大了，所以你可以看到表格）：

![在此处输入图像描述](../Images/305c30433b7626a626fabbd318b1b230.png)

* * *

## 问题：

** 注意页面不会显示以下错误，**除非**用户滚动然后尝试将文本输入到 texbox **

用户滚动并点击输入后，输入显示在两个位置...

![在此处输入图像描述](../Images/8cdfd6bf48842a885424f39f1ff8964a.png)

* * *

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T21:46:45.647

好吧，在搜索了几天后，我在这里发布并在此后不久找到了我的答案。

这是 Jellybean 的内部 Android 浏览器中的一个已知问题。

来源：https://code.google.com/p/android/issues/detail?can=2&start=0&num=100&q=& colspec=ID%20Type%20Status%20Owner%20Summary%20Stars &groupby=&sort=&id [=30964](https://code.google.com/p/android/issues/detail?can=2&start=0&num=100&q=&colspec=ID%20Type%20Status%20Owner%20Summary%20Stars&groupby=&sort=&id=30964)

有一些权衡的解决方法。比如失去在文本区域滚动的能力，但如果你有这个问题，那么这是一个很好的解决方法。

解决方法是将其添加到您的主 CSS 文件中：

```
/* 
Prevents a bug in Android 4.0-4.1 that duplicates text inputs onFocus ANDROID BUG# 30964
Link to Bug Tracker: http://j.mp/YhydH6
Remove when no longer needed...
*/

input {
-webkit-user-modify: read-write-plaintext-only;
} 
```

# html - 网格布局的自动裁剪图像

> ID：15302378
> 
> 赞同：0
> 
> 时间：2013-03-08T20:05:49.217
> 
> 标签：html, css

我有这个模板，用于在“网格”布局中显示产品：

```
<div id="cols3-top"></div>
<div id="cols3" class="box" data-field="products">
    <div data-field="product" class="col">
    <h3><a href="#" data-field="title">Sample Product</a></h3>
        <p class="nom t-center"><a href="#"><img src="tmp/200x140.gif" alt="" data-field="imageurl"/></a></p>
    <div class="col-text">
        <p data-field="content">Product information</p> 
        <ul data-field="features" class="ul-01"></ul>
    </div> <!-- /col-text -->
    <div class="col-more"><a href="#">
            <img src="design/cols3-more.gif" alt="" data-field="morebutton"/></a>
        </div>
    </div>              
</div> <!-- /cols3 -->
<div id="cols3-bottom"></div> 
```

然而，这并没有优化，因为 inf 图像 img 大小不一样，它会破坏“网格”布局。如何优化此布局，以便将图像“自动裁剪”到特定的宽度和高度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T20:28:35.703

确保您的图像不会比它们所在的列大。例如：

```
#cols3 img{
    width:300px; /* width of #cols3 */
    height:auto;
} 
```

很可能您也可以使用`100%`而不是`300px`

# python - 高级 for 循环

> ID：15302386
> 
> 赞同：1
> 
> 时间：2013-03-08T20:06:20.713
> 
> 标签：python, list, for-loop, loops

我有一个列表列表（最后一个列表并不重要）

```
data = [[[['f', 0], 'C'], [['X', 0], 'X']],
[[['s', 1], 'X'], [['X', 0], 'X']]] 
```

它本质上是一张有 4 个象限的地图。目前我正在迭代它并更新它

```
for i in data:
    for x in i:
        if x[0][0] == 'f':
            x[0][1] += 1 
```

但我想检查一个小区的邻居。有没有办法做到这一点，当通过这个迭代或者我必须解决用整数键在列表中移动？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T20:21:49.333

是的，除非您编写更复杂的东西以允许您迭代也为您提供邻居的元素，否则您将不得不使用元素的绝对寻址。

如果您确定总是使用列表列表（即不仅仅是其他一些可迭代的），您当然可以使用`enumerate`来快速获取索引*和*元素本身：

```
for i, row in enumerate(data):
    for j, cell in enumerate(row):
        # now you can access data[i][j-1], data[i+1][j] etc 
```

所以，我首先提到了“更复杂”的事情，你可以做的是制作一个生成器，它会自动迭代单元格并*返回*其他数据，例如左邻居或其他数据。

```
def myLeftNeighborGenerator(data):
    for i, row in enumerate(data):
        for j, cell in enumerate(row):
            leftNeighbor = data[i][j-1] if j > 0 else None
            yield cell, leftNeighbor 
```

然后您可以使用该生成器神奇地获取您的数据：

```
for x, left in myLeftNeighborGenerator(data):
    if x[0][0] == 'f':
        x[0][1] += 1
    if left is not None:
        # whatever 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T20:16:31.797

如果不想担心必须自己跟踪整数键，但仍想使用它们，python 有[内置函数`enumerate`](http://docs.python.org/2/library/functions.html#enumerate)。

```
>>> for index, value in enumerate(['my','list','of','stuff']):
...    print index, value
0 my
1 list
2 of
3 stuff 
```

该`enumerate`函数在循环的每次迭代中将项目的索引与该项目配对`for`。

# asp.net-mvc - MVC 4 VB 附加视图数据

> ID：15302390
> 
> 赞同：0
> 
> 时间：2013-03-08T20:06:28.203
> 
> 标签：asp.net-mvc, vb.net, asp.net-mvc-4

试图为这个问题寻求帮助让我想到了一个全新的问题：VB.NET 中完全缺乏资源、书籍和示例 vor MVC 4。我必须在通过经验学习（以及将头撞到墙上的相关感觉）之间做出选择，或者放弃它并一起转向 C#。

如果一家公司不愿意为其兄弟产品提供相同的支持，则任何公司都不应该发货。他们应该完全放弃 VB for MVC，或者为我们提供学习它的方法。

有了这个，这是我的问题。这一行：

```
@Html.EditorFor(Function(x) x.UsersData(temp).Roles(Role)) 
```

是一个不错的代码行。创造奇迹。但是如何向它添加一个类，以便我可以更改我的 css 文件的样式？

好吧，看来这应该可以解决问题：

```
@Html.EditorFor(Function(x) x.UsersData(temp).Roles(Role), New With {.class = "users-manage-check-box"}) 
```

但你猜怎么着，它没有。曾经。结果是一样的。

出了什么问题，我该如何解决？

老实说，我确实想出了一个解决方案。一个让我觉得脏的。

查看该代码的输出，我看到框类是“复选框”。

所以我一直在做的是：

```
@html.Raw(Html.EditorFor(Function(x) x.UsersData(temp).Roles(Role), New With {.class = "users-manage-textbox"}).ToHtmlString.Replace("check-box", "user-manage-checkbox")) 
```

这感觉不对。大错特错。它不仅是一段可悲的代码，而且还引入了安全风险，我必须在我的解决方案退出开发阶段之前解决这些风险。

关于为什么附加视图数据不能正常工作的任何线索？我有什么问题吗？我要求太多了吗？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T20:47:52.233

我认为 EditorFor 不允许这样做。所以你需要自己创建一个自定义编辑器模板。

[您可以在此博客文章](http://www.growingwiththeweb.com/2012/12/aspnet-mvc-display-and-editor-templates.html)中阅读有关创建自定义模板的更多信息

**更新：**

[从http://aspnetwebstack.codeplex.com/](http://aspnetwebstack.codeplex.com/workitem/223)看看这个问题的答案

> > 此行为是设计使然。
> 
> 您调用的重载接受一个名为 additionalViewData ( [http://msdn.microsoft.com/en-us/library/ff406462](http://msdn.microsoft.com/en-us/library/ff406462) ) 的对象参数。EditorFor 的默认实现忽略此值。您必须编写自定义编辑器模板才能访问该信息。

# php - 当文件名被剥离时 PHP 会话被丢弃

> ID：15302391
> 
> 赞同：0
> 
> 时间：2013-03-08T20:06:37.803
> 
> 标签：php, .htaccess, session, ini

这是一个快速的问题，已经困扰了我很长一段时间了！

我有一个`www.example.com/dir/index.php`设置`$_SESSION`变量的页面。我再次访问这个变量`www.example.com/dir/dir2/dostuff.php`，这工作正常！

但是，如果我通过它设置会话`www.example.com/dir/`，则不会在`www.example.com/dir/dir2/dostuff.php`.

我已经重写了.htaccess

```
RewriteRule ^.*\/dir\/$ /dir/index.php [NC] 
```

并使用以下方法在 index.php 中设置我的 php.ini：

```
ini_set('session.cookie_domain', '.example.com'); 
```

然而没有结果。有没有人有什么建议？

**更新：**

简而言之 index.php 简单地运行：

```
if (!isset($_SESSION)) session_start();
$_SESSION['param'] = "val"; 
```

dostuff.php 运行：

```
if (!isset($_SESSION)) session_start();
echo $_SESSION['param']; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T20:46:15.033

从[`session_start`](http://www.php.net/manual/en/function.session-start.php)

> **session_start()**根据通过 GET 或 POST 请求或通过 cookie 传递的会话标识符创建会话或恢复当前会话。

`session_start()`当您想要访问`_SESSION`变量时，您应该无条件调用。

# c# - Sql 连接在发行版中不起作用

> ID：15302395
> 
> 赞同：0
> 
> 时间：2013-03-08T20:06:47.157
> 
> 标签：c#, sql, sql-server, sql-server-express

我的程序有问题，一切都在调试模式下工作，但是当我切换到发布时，我得到了 InvalidOperationException：

[![](../Images/02c290e48d2805ec6779522684b28022.png)](http://imageshack.us/scaled/landing/585/screengk.jpg)

```
_sqlcon.ConnectionString = "Data Source=" + Properties.Settings.Default.serverAdress + ";" + "Initial Catalog=" + Properties.Settings.Default.initialDB + "; User ID=" + Properties.Settings.Default.sqlID + "; Password=" + Properties.Settings.Default.sqlPass + ";" + "Connect Timeout=" + Properties.Settings.Default.timeOut + "; Asynchronous Processing = true;"; 
```

这是我的连接字符串

```
Data Source=.\\SQLEXPRESS;Initial Catalog=visondb; User ID=sql; Password=test;Connect Timeout=30; Asynchronous Processing = true; 
```

我尝试使用简单的打开连接

```
 try
        {
           // await dbConnAsync(_sqlcon);   
            _sqlcon.Open();
        }
        catch (SqlException ex)
        {
            MessageBoxResult result = System.Windows.MessageBox.Show(ex.ToString());
        } 
```

但是在发布时它不起作用，当我使用 exe 时，我只是得到窗口“程序停止响应”。

在哪里寻找错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T20:16:26.847

我最好的猜测（基于此处的有限信息）是您从*发布* `Properties.Settings.Default`中提取以生成连接字符串的值之一是

*   空白（空字符串），或
*   不是你期望的那样。

从而创建了一个无效的连接字符串。

您应该在之前在线调试`_sqlcon.Open();`并确保连接字符串是您在发布模式下所期望的。

# java - 使用“this”需要帮助 - 不能在静态上下文中使用

> ID：15302397
> 
> 赞同：2
> 
> 时间：2013-03-08T20:07:04.090
> 
> 标签：java, this, affinetransform

我知道必须调用静态方法，但非静态方法必须创建一个实例。我正在尝试制作一个简单的 2D 游戏。我希望我的所有图形都出现在一个窗口中，而不是每个班级的几个不同的窗口中，这是正在发生的事情。所以我决定使用静态 updateBackBuffer 方法创建一个paintGraphics 类，该方法会将图像添加到 graphics2D 变量（名为 g2d）。我尝试了这段代码，但我得到一个错误，我不能在静态上下文中使用它，我该如何解决这个问题？：

```
public static void updateBuffer(Image image, int XPos , int YPos , int Height , int Width ,   int Rotation, AffineTransform trans) {
    trans.translate(XPos,YPos);
    trans.rotate(Rotation);      //More lines will probably be more lines totransform the shape more as the game gets more advanced
    g2d.drawImage(image,trans,this);    
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T20:26:14.720

在 : 行`g2d.drawImage(image,trans,this);`中，`this`指的是定义的类的实例`updateBuffer`。由于`updateBuffer`被声明`static`，它不能使用引用`this`，因为`this`不能保证被初始化。

* * *

更新

```
public class Foo {
   public Foo() {
      ...
   }

    public static void updateBuffer(Image image, int XPos , int YPos , int Height , int Width , int Rotation, AffineTransform trans, Foo foo) {
        trans.translate(XPos,YPos);
        trans.rotate(Rotation);      //More lines will probably be more lines totransform the shape more as the game gets more advanced
        g2d.drawImage(image,trans,foo); // <-- 'foo' stands in for 'this'

   }

   public static void main(String[] args) {
      Image i = new Image();
      int x,y,h,w,r;
      AffineTransform t = new AffineTransform();
      Foo f = new Foo();
      Foo.updateBuffer(i,x,y,h,w,r,t,f);
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T20:11:21.143

为了访问包含对象，为什么不将对象的实例作为参数传递给静态方法，即：

```
public static void updateBuffer(Image image, int XPos , int YPos , int Height , int Width , int Rotation, AffineTransform trans, Object parent) 
```

# jquery - 通过 camelCase 和连字符使选项可访问

> ID：15302399
> 
> 赞同：1
> 
> 时间：2013-03-08T20:07:15.543
> 
> 标签：jquery, jquery-plugins, naming-conventions, naming

任何想法如何使`JSON`-keys 可用于**小写**、**大写**、**驼峰**、**PerlCase**和**连字符**。我们有类似这样的对象表示法，它是用 camelCase 声明的：

```
var options = {
    "fooBar": "foo bar"
}; 
```

但是，如果用户使用连字符或类似符号声明默认值会怎样：

```
var options = {
    "foo-bar": "foo bar"
}; 
```

那么如何使用一键访问它们。

例如，[jQuery](http://jquery.com/)使用连字符和 camelCase来输入`$.fn.css`和访问键`$.fn.animate`

是否已经有解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T12:30:05.310

我做了一些不完美的东西，但它到目前为止有效：

```
(function(){
    var methods =  {
        toLowerCase: function(str){
            return str.toLowerCase();
        },

        toUpperCase: function(str){
            return str.toUpperCase();
        },

        toCamelCase: function(str){
            return str.replace(/(\-[a-z])/g, function($1){
                return $1.toUpperCase().replace("-", "");
            });
        },

        toDashCase: function(str){
            return str.replace(/([A-Z])/g, function($1){
                return "-"+$1.toLowerCase();
            });
        }
    };

    Object.prototype.getItem = function(key) {
        var opt = this[key];
        if(opt) return opt;
        for(var method in methods) {
            if(methods.hasOwnProperty(method)) {
                opt = this[ methods[method](key) ];
                if(opt) return opt;
            }
        }
    };
}()); 
```

我曾经`Object.prototype`很简单地使用它：

```
var options = {
    "foo": "foo",
    "BAR": "BAR",
    "fooBar": "fooBar",
    "bar-foo": "bar-foo"
};

console.log(
    options.getItem("foo"), // "foo"
    options.getItem("Foo"), // "foo"
    options.getItem("FOO"), // "foo"

    options.getItem("bar"), // "BAR"
    options.getItem("bar"), // "BAR"
    options.getItem("BAR"), // "BAR"

    options.getItem("fooBar"), // "fooBar"
    options.getItem("foo-bar"), // "fooBar"

    options.getItem("barFoo"), // "bar-foo"
    options.getItem("bar-foo") // "bar-foo"
); 
```

不完美，但可以进行任何改进。

# java - 由于 \ 导致的 Java 文件错误

> ID：15302400
> 
> 赞同：2
> 
> 时间：2013-03-08T20:07:21.050
> 
> 标签：java

我尝试使用 System.getenv("APPDATA")，它在文件夹之间返回 \。FileOutPutStream 不处理这些，那么如何将 \'s 转换为 /'s？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T20:08:23.030

每次需要使用 a`\`时，写两个：`\\`。换句话说：你需要转义它，因为`\`角色本身就是转义字符，它也需要转义！

或者，对于文件路径，您可以使用单个`/`，无论您在哪个平台（Windows、Linux、mac 等）中它都可以工作。

回到你的问题：发生这种情况有点奇怪，返回的字符串`getenv`肯定已经转义了`\`字符。让我们尝试使用采用 a的[构造函数](http://docs.oracle.com/javase/7/docs/api/java/io/FileOutputStream.html#FileOutputStream%28java.io.File%29)`File`：

```
FileOutputStream fos = new FileOutputStream(new File(System.getenv("APPDATA"))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T20:13:21.953

```
File f = new File(System.getenv("APPDATA"));
System.out.println(f.getAbsolutePath()); 
```

然后你可以构造一个新的 FileOutputStream(f);

# algorithm - 带二分搜索的简单线性方程？

> ID：15302401
> 
> 赞同：0
> 
> 时间：2013-03-08T20:07:23.537
> 
> 标签：algorithm, binary-tree, numerical-methods, linear-equation

有没有办法解决一个简单的线性方程，比如

```
 -x+3 = x+5 
```

使用二分查找？或任何其他数值方法？

**背景**：我的问题来了，
因为我想解决像`"2x+5-(3x+2)=x+5"`可能的运算符是：`*`，`-`和。`+``brackets`

我首先想到将它转换为等式两边的中缀符号，然后执行某种二进制搜索。

您如何看待这种方法？我应该在面试中不到 40 分钟解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T20:28:29.977

1.  编写一个简单的解析器，将 $-x+3 -(x+5) = 0$ 或任何其他类似的表达式以代数方式求解为 $a*x + b = 0$ 对于累积常量 $a$ 和 $b 并不难美元。然后，可以很容易地计算出精确解为 $x = -b/a$。

2.  如果你真的想要一个数值方法，观察两边都描述了他们自己的线性函数图，即左边的 $y_l = -x_l+3$ 和右边的 $y_r = x_r + 5$。因此，找到该方程的解与找到两个函数的交点相同。因此，您可以从*任何*值 $x=x_l=x_r$ 并计算两边得到对应的左右 $y$-值 $y_l$ 和 $y_r$。如果它们的差是 $0$，那么您找到了一个解决方案（幸运的唯一交点，或者两条线相等，如 $2x = 2x$）。否则，检查例如位置$x+1$。如果新的差 $y_l - y_r$ 与之前没有变化，则两条线是平行的（例如 $2x = 2x + 7$）。否则，差异会变得更远或更接近 0（从正面或负面）。所以，现在你已经拥有了对进一步的点 $x$ 进行数值测试所需的一切（例如，以二分搜索方式，如果你首先寻找一些 $x$ 实现了正的 $y$-difference 和另一个 $x$获得负的$y$-差值，然后在它们之间运行二分查找）来近似$x$-值，其中$y_l - y_r$ 的差值为$0$。

因此，数值方法在这里非常荒谬，但它激发了这种算法的思维方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T20:36:31.527

如果你需要二分查找，那么它很容易实现（但它太可悲了，lol）

对于当前`x`的二分搜索，解析和计算方程的左右部分。然后，根据`left > right`表达式更改搜索范围。

这很容易获得，如果您将所有内容移到左侧（现在右侧部分等于 0），如果`x < 0`您将所有内容乘以`-1`. 然后，很明显，如果这个带有 current 的表达式`x`是`expr > 0`，那么你需要更`x`小，否则 - 更大。

但是……你为什么需要那个？=D

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T20:34:29.657

你真的需要用数值方法来解决它吗？我很确定你可以，但解析表达式以解析解决它并不难。我的意思是，如果它确实是一个线性方程，那么只要发现 x 的系数是多少，当方程被简化时，自由项是多少。在这个问题的 26 分钟内，我手工制作了一个简单的解析器：

```
import re, sys, json

TOKENS = {
    'FREE': '[0-9]+', 
    'XTERM': '[0-9]*x', 
    'ADD': '\+', 
    'SUB': '-', 
    'POW': '\^',
    'MUL': '\*', 
    'EQL': '=',
    'LPAREN': '\(',
    'RPAREN': '\)',
    'EOF': '$'
}

class Token:
    EOF = lambda p: Token('EOF', '', p)

    def __init__(self, name, raw, position):
        self.name = name
        self.image = raw.strip()
        self.raw = raw
        self.position = position

class Expr:
    def __init__(self, x, c):
        self.x = x
        self.c = c

    def add(self, e):
        return Expr(self.x + e.x, self.c + e.c)

    def sub(self, e):
        return Expr(self.x - e.x, self.c - e.c)

    def mul(self, e):
        return Expr(self.x * e.c + e.x * self.c, self.c * e.c)

    def neg(self):
        return Expr(-self.x, -self.c)

class Scanner:
    def __init__(self, expr):
        self.expr = expr
        self.position = 0

    def match(self, name):
        match = re.match('^\s*'+TOKENS[name], self.expr[self.position:])
        return Token(name, match.group(), self.position) if match else None

    def peek(self, *allowed):
        for match in map(self.match, allowed):
            if match: return match

    def next(self, *allowed):
        token = self.peek(*TOKENS)
        self.position += len(token.raw)
        return token

    def maybe(self, *allowed):
        if self.peek(*allowed):
            return self.next(*allowed)

    def following(self, value, *allowed):
        self.next(*allowed)
        return value

    def expect(self, **actions):
        token = self.next(*actions.keys())
        return actions[token.name](token)

def evaluate(expr, variables={}):
    tokens = Scanner(expr)

    def Binary(higher, **ops):
        e = higher()        
        while tokens.peek(*ops):
            e = ops[tokens.next(*ops).name](e, higher())
        return e

    def Equation():
       left = Add()
       tokens.next('EQL')
       right = Add()
       return left.sub(right)

    def Add(): return Binary(Mul, ADD=Expr.add, SUB=Expr.sub)
    def Mul(): return Binary(Neg, MUL=Expr.mul)

    def Neg():
        return Neg().neg() if tokens.maybe('SUB') else Primary()

    def Primary():
        return tokens.expect(
            FREE = lambda x: Expr(0, float(x.image)),
            XTERM = lambda x: Expr(float(x.image[:-1] or 1), 0),
            LPAREN = lambda x: tokens.following(Add(), 'RPAREN')) 

    expr = tokens.following(Equation(), 'EOF')
    return -expr.c / float(expr.x)

print evaluate('2+2 = x')
print evaluate('-x+3 = x+5')
print evaluate('2x+5-(3x+2)=x+5') 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-08T20:20:11.903

首先，您的问题必须与[解决二叉树](https://stackoverflow.com/questions/8305878/solving-binary-tree)有关。您可以使用的一种方法是构建一个二进制尝试将根作为具有最高优先级的运算符，其次是较低优先级的运算符和操作是叶节点。[您可以在求解方程](http://www.cs.utexas.edu/~novak/algebra.pdf)时了解此方法。

# mongodb - MongoDB工作环境

> ID：15302404
> 
> 赞同：0
> 
> 时间：2013-03-08T20:07:33.510
> 
> 标签：mongodb, ide, database

我刚开始使用 MongoDB，还在 windows CMD 上试验它。

但事实证明，这很难阅读，而且有点难以写入。

有谁知道工作环境或某些 IDE 插件，它可以让我在其上使用 MongoDB 而不是 windows CMD

我做了一些研究，但没有找到任何东西。

mongo 的网站提供了很好的文档，但没有关于这个主题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T20:19:12.883

我使用[UMongo](http://edgytech.com/umongo/)作为 GUI 在测试时检查我的数据库的内容。它易于使用，但缺少一些基本功能，如键盘导航（例如按 F5 重新加载）。

可以在[http://docs.mongodb.org/ecosystem/tools/administration-interfaces/](http://docs.mongodb.org/ecosystem/tools/administration-interfaces/)的 MongoDB 文档中找到广泛使用的 GUI 样式管理界面的列表。

# java - 用于验证用户输入的正则表达式

> ID：15302406
> 
> 赞同：-4
> 
> 时间：2013-03-08T20:07:34.123
> 
> 标签：java, regex

我编写了一个 Java 程序并尝试`int[]`从`1,2,5,2,11`.

但首先我需要判断用户是否输入了正确的格式，例如“，”+数字。如何将其编写为 Java 正则表达式？

```
//set the default value of int[] a;
        int[] a  = {2,3,1,-2,2,7};  
        //set the UI;
        String text = JOptionPane.showInputDialog("please enter the array to be checked: ");
        String[] strs = text.split(",");
        System.out.println(strs);
        System.out.println(strs.length);
        int[] a2 = new int[strs.length];
        for(int i = 0; i < strs.length; i++){
            a2[i] = Integer.parseInt(strs[i]);
        } 
```

大家好，很抱歉第一次没有说清楚，我希望用户输入格式，如“，”+任何正数或负数，并且可以容忍空格，就像“1，-2，1,3，+ 55"

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T20:09:42.243

为此，您根本不需要正则表达式，只需[`String#split(",")`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split%28java.lang.String%29)and [`Integer#parseInt()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html#parseInt%28java.lang.String%29)。

无论如何，单独的正则表达式不足以将字符串转换为数字。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T20:13:14.577

要验证您的输入，您可以使用类似

```
if (text.matches("-?\\d+(,\\s?-?\\d+)*")){
    //try to split
}else{
    //inform user about wrong data format
} 
```

*   `-?`表示减号是可选的
*   `\\d+`表示一位或多位数字，
*   `,\\s?-?\\d+`表示“逗号”、“空白”（一个或无）、“减号”（一个或无）、“数字”（一个或多个）、
*   `(,\\s?-?\\d+)*`意味着这个结构可以出现零次或多次。

# c# - 从 NetworkStream 反序列化 XML 失败

> ID：15302408
> 
> 赞同：0
> 
> 时间：2013-03-08T20:07:51.397
> 
> 标签：c#, .net, xml-deserialization, networkstream

我将我的应用程序设置为通过网络发送对象，方法是在发送端将它们序列化为 XML，并在接收端反序列化它们。我首先使用 UDP 设置它，效果很好。像这样的代码：

发件人：

```
MemoryStream ms = new MemoryStream();
dataSerializer.Serialize(ms, dataToSend, serNamespaceRemover);
senderClient.Send(ms.GetBuffer(), (int)ms.Length); 
```

接收者：

```
IPEndPoint beaconEndpoint = new IPEndPoint(IPAddress.Parse("127.0.0.1"), SharedData.udpPort);
byte[] receiveData = beaconClient.Receive(ref beaconEndpoint);
MemoryStream ms = new MemoryStream(receiveData);
CommData recieved = dataDeserializer.Deserialize(ms) as CommData; 
```

现在我必须将其切换为使用 TCP。发件人似乎工作正常，而且非常简单：

```
dataSerializer.Serialize(senderClient.GetStream(), dataToSend, serNamespaceRemover); 
```

但是我的接收器有问题。我尝试了简单而明显的事情：

```
NetworkStream netstr = client.GetStream();
CommData data = dataDeserializer.Deserialize(netstr) as CommData; 
```

我得到了异常：XML 文档中存在错误 (5, 14)。XML 看起来像这样：

```
<?xml version="1.0"?>
<CommData>
  <RigName>Rig 100</RigName>
  <IsShutDown>false</IsShutDown>
</CommData> 
```

所以 5,14 位置是接收数据结束后的 2 个字符。我将数据读入一个 char 数组，并确认右括号结束后没有任何内容，所以我不确定反序列化器在说什么。

同时，如果我这样做，那么接收器可以工作：

```
NetworkStream netstr = client.GetStream();
byte[] arry = new byte[client.Available];
netstr.Read(arry, 0, client.Available);
MemoryStream ms = new MemoryStream(arry);
CommData data = dataDeserializer.Deserialize(ms) as CommData; 
```

这似乎很疯狂。为什么不能直接从 NetworkStream 中读取？我真的必须将数据读入 MemoryStream 然后将其传递给反序列化器吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T20:50:09.957

请参阅：[反序列化通过 TCP 发送的数据](https://stackoverflow.com/questions/2739653/xmlserializer-deserialize-blocks-over-networkstream)

那里的答案表明 NetworkStream 不会在读取最后一个字节时发出通知。因此，您的解串器似乎一直在尝试从 NetworkStream 读取（即使在结束之后；因为 NetworkStream 没有通知它），因此会导致异常。您将需要读入 MemoryStream。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T20:50:37.583

您如何知道何时收到了整个 XML 文件？只要远程端没有关闭连接，调用`Read`（`XmlSerializer`会这样做）就会阻塞并等待数据。

# asp.net-mvc - asp.net mvc 处理 http 400 错误

> ID：15302413
> 
> 赞同：1
> 
> 时间：2013-03-08T20:08:10.083
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-mvc-routing, http-status-code-400

我有一个 ASP.NET MVC 4 应用程序，我想将所有 HTTP 400 错误重定向到我的自定义错误页面。尽管 HTTP 400 错误没有像 404 错误那样处理，但我搜索了一个小时以找到解决方案。有许多解决方案展示了如何转义 400（错误请求错误），即允许在 url 中使用特殊字符。但我无法找到一些解决方案来捕获异常。

请帮助我以某种方式捕获所有 HTTP 错误请求并将它们重定向到我的错误页面。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T20:21:34.113

**如果出现错误，切勿重定向用户**，而是为失败的请求返回响应正文。我认为 IIS（和 ASP.NET）重定向到错误页面的功能从根本上是错误的、不正确的，并且违反了 HTTP 规范（因为错误是为错误页面资源本身返回的，而不是原始请求.如果它是一个网络浏览器，用户无法重试，因为重新加载页面将再次返回错误页面，而不是重试他们最初失败的请求，这是他们想要的）。

反正...

HTTP 400 响应必须由您的应用程序代码生成，它不会自动完成。当通知非人工代理（即 Web 服务客户端，*而不是 Web 浏览器*）他们的 HTTP 请求缺少必需的值或具有格式错误的值时，通常会使用错误请求。

您可以在 MVC 中通过为所有控制器创建一个基本控制器类来执行此操作，如下所示：

```
public abstract class BaseController : Controller {

    protected ActionResult Http400(String message) {

        Response.StatusCode = 400;
        return View(message); // you need to define a view file called "Http400.aspx" (or cshtml if you're using Razor) in your application's shared views folder
    } 

} 
```

所以在你的应用程序逻辑中：

```
public ActionResult Foobar() {

    if( IsBadRequest() ) return Http400("Bad request, try again");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T20:20:18.360

您可以做一些简单的事情，例如将其添加到您的 web.config

```
 <customErrors mode="RemoteOnly">
  <error statusCode="400" redirect="errorpage.html"/>
</customErrors> 
```

# asp.net - 更新数据库后如何发送警告消息并更新页面

> ID：15302416
> 
> 赞同：1
> 
> 时间：2013-03-08T20:08:17.177
> 
> 标签：asp.net

我有这个页面，您可以在其中“编辑”用户的数据......我想发送一条消息，如“编辑成功”，并使用新内容（DropDownLists 和 TextBoxes）更新页面。

我将其用于消息：

`ScriptManager.RegisterStartupScript(this, typeof(Page), "alert", "alert('Edited Successfully !');", true);`

为了更新页面，我尝试了： `Response.Redirect(Request.RawURl)`甚至一个简单的也`Response.Redirect(~/page.aspx)`没有用......

如果我尝试这种方式，它确实会更新页面，但它不会显示警报... ;\ 所有这些数据（填充 DropDownLists、文本框等）都在 Page_Load 上调用。我在发送消息后尝试调用相同的方法，但是它没有更新 =\

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T21:08:41.253

您面临的问题是因为您正在重新加载页面，因此您注册的脚本会丢失。

我在这种情况下使用的一种方法涉及使用[jQuery](http://jquery.com/)和[jQuery UI](http://jqueryui.com/) Dialog：

在您的页面中，放置一个将作为消息容器的 div。它最初是隐藏的，将在完成数据库请求后显示：

```
<div id="modal" title="Alert" style="display: none;">
</div> 
```

编写一个将显示对话框的 javascript 函数：

```
function showConfirmation(text){
    $("#modal").html(text).dialog({
          modal: true, // show the dialog as modal
          buttons: {
                Ok: function() {
                  location.reload();
               }
           }, // add a button that refreshes the page when clicked
           closeOnEscape: false, // avoid the dialog close when ESC is pressed
           dialogClass: 'no-close' // adds a CSS class that hides the default close button
    });
} 
```

该`dialog`函数负责显示对话框，使用 jQuery UI 库。该`buttons`参数显示一个按钮，按下时会刷新页面。

您所要做的就是使用以下`RegisterStartupScript`方法注册对话脚本：

```
ScriptManager.RegisterStartupScript(this, typeof(Page), "alert", "showConfirmation('Edited Successfully !');", true); 
```

如果您不使用 jQuery 和/或 jQuery UI，您所要做的就是在 head 标签中添加引用。如果您不想使用[CDN](http://en.wikipedia.org/wiki/Content_delivery_network)，请将文件下载到您的本地站点。

```
 <script type='text/javascript' src='http://code.jquery.com/jquery-1.9.1.js'></script>  
  <script type="text/javascript" src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
  <link rel="stylesheet" type="text/css" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css"> 
```

[您可以看到这个小提琴](http://jsfiddle.net/AN74S/2/)的客户端行为的工作示例

# c# - 在 Unity 中使用 Mono 的 C# 和 MySQL 之间的数据库连接问题

> ID：15302419
> 
> 赞同：2
> 
> 时间：2013-03-08T20:08:21.417
> 
> 标签：c#, mysql, mono, unity3d

对于个人项目，我正在尝试使用 MySQL 访问我创建的存储图像的数据库。我正在用 C# 编写脚本，但我的连接拒绝打开。这是我的代码片段（相关部分）：

```
using MySql.Data.MySqlClient;

string cs ="Server=localhost;Database=test;Uid=root;Pwd=password;";

MySqlConnection conn = null;
MySqlDataReader rdr = null;

try 
{
   conn = new MySqlConnection(cs);
   conn.Open();

   string stm = "SELECT * FROM images";
   MySqlCommand cmd = new MySqlCommand(stm, conn);
   rdr = cmd.ExecuteReader();

   while (rdr.Read())
   {
      //do stuff
   }

   catch (Exception ex)
   {
      print (ex.ToString());
   } 

   finally 
   {
      if (rdr != null) 
      {
         rdr.Close();
      }

      if (conn != null) 
      {
         conn.Close();
      }
   } 
```

我已经设置了断点，罪魁祸首是 conn.Open() 函数。那时它会抛出一个异常：

> System.TypeInitializationException：MySql.Data.MySqlClient.MySqlTrace 的类型初始化程序引发了异常---> System.MissingMethodException：找不到方法：'System.Configuration.IConfigurationSectionHandler.Create'。在 System.Configuration.ClientConfigurationSystem.System.Configuration.Internal.IInternalConfigSystem.GetSection (System.String configKey) [0x00000] 在：0 在 System.Configuration.ConfigurationManager.GetSection (System.String sectionName) [0x00000] 在：0 在系统.Configuration.ConfigurationSettings.GetConfig (System.String sectionName) [0x00000] in :0 at System.Diagnostics.DiagnosticsConfiguration.get_Settings () [0x00000] in :0 at System.Diagnostics.TraceSource..ctor (System.String name, SourceLevels sourceLevels) [0x00000] in :0 在 System.Diagnostics.TraceSource..ctor (System.Diagnostics.TraceSource..ctor)
> --- 内部异常堆栈跟踪结束 --- 在 MySql.Data.MySqlClient.Driver.Create (MySql.Data.MySqlClient.MySqlConnectionStringBuilder 设置) [0x00000] in :0 UnityEngine.MonoBehaviour:print(Object) UIScript:Start( ) (在 Assets/UIScript.cs:123)

在我看来，这听起来像是一个旧的/不匹配的 dll，但我引入了 MySql.Data、I18N 和 I18N.West，作为我在谷歌搜索时建议的几个解决方案。我已经用完了建议的修复程序，希望有人能提供帮助。我正在使用 MySQL 5.6 和 .Net 连接器 5.6.6。

# google-maps - 在 XHTML 中嵌入具有可变位置的 Google 地图

> ID：15302420
> 
> 赞同：0
> 
> 时间：2013-03-08T20:08:22.207
> 
> 标签：google-maps, xhtml-1.0-strict

我有一个获取参数的表单（方法=GET，所以参数在查询字符串中），并且我有一个带有嵌入式谷歌地图的对象。我想让嵌入的地图动态化，以便它反映参数（尤其是位置的 ll 参数）。关于如何使用[php](https://stackoverflow.com/q/2517736/1801588)和[javascript](https://stackoverflow.com/q/11014092/1801588)的答案有相关问题，但是有没有什么方法可以在没有脚本的情况下做到这一点？
在 XHTML 1.0 Strict 中可能吗？

另外，表单中的“目标”语法应该是什么？“”和当前页面的 URL 都不起作用，不同的页面只会让我离开，这不是我想要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T23:39:48.223

当表单和对象（带有地图的 iframe？）位于同一页面上时，您可以将表单直接发送到 iframe，在这种情况下，可以在没有任何脚本的情况下获得动态地图。

但是，当您使用 POST 时，参数不在 QUERY_STRING 中。

# javascript - 下拉菜单css根据内容扩展宽度

> ID：15302422
> 
> 赞同：0
> 
> 时间：2013-03-08T20:08:25.513
> 
> 标签：javascript, html, css, drop-down-menu

我试图创建一个具有动态值的下拉列表，基本上有 5 个文本框和一个页面上的下拉列表，下拉列表从这些文本框中获取值。如果用户输入的文本大于下拉菜单的宽度，那么它会在 IE 上倾斜。我通过 select:hover{width:auto;position:absolute} 解决了这个问题。现在的问题是，如果用户输入的值都小于它收缩的下拉列表的原始大小，我想要一种方法使其不会收缩并仍然扩展。有什么想法吗？？

我正在使用 dojo 和 javascript，不能使用 jquery。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T20:33:19.927

在 JavaScript 中找到文本的最大宽度，如果它大于下拉列表的当前宽度，则将宽度更改为文本的最大宽度。

当您再次更改文本时，这将像您希望的那样工作（宽度不收缩），因为 JavaScript 会发现文本的最大宽度小于下拉菜单的宽度，因此宽度不会改变。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T20:44:01.077

简单的解决方法是为您的下拉列表选择一个宽度，并为您的文本框值设置最大和最小长度，以便您可以控制提交的大小。否则我可以输入任何东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T20:58:09.600

我会让你在你的问题上回到 0 并提供一个解决方案。

使用 CSS。在选择框上设置一个宽度，即使其中的内容更小，它也不会变小。

```
<select style="min-width:200px;" id="someUniqueIdentifier">
    /* Your dynamicaly generated options*/
</select> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T23:08:55.573

如果我正确阅读了问题，最简单的解决方案是像这样使用 min-width 属性（developer.mozilla.org/en-US/docs/CSS/min-width） - 选择 { min-width: 50px; 宽度：自动；} - 这将允许控件的宽度根据需要扩展，但不会低于您定义的最小宽度。这可以在 :hover 状态选择器上定义，但在元素本身上也可以正常工作（我建议）。IE8+ 支持，无需 JavaScript。

# ios - UITabBarControllerDelegate - 没有为委托触发的方法？

> ID：15302426
> 
> 赞同：2
> 
> 时间：2013-03-08T20:08:42.967
> 
> 标签：ios

我有一个带有 4 个选项卡的 tabbarcontroller。当用户选择其中一个选项卡时，我想为新视图控制器进行一些设置 - 即 ...[newVC.databaseid=self.datbaseid];

我已经为他的 tabviewcontroller 设置了控制器，因为它是 viewdidload 中的代表。但是我尝试使用 3 种方法，但似乎只有一种方法可以触发。

```
-(void) tabBar:(UITabBar *)tabBar didSelectItem:(UITabBarItem *)item 
```

会火，

```
- (void)tabBarController:(UITabBarController *)tabBarController didSelectViewController:(UIViewController *)viewController 
```

- 似乎没有开火。这是我需要用来设置我新提出的 VC 的。

只是为了看看会发生什么，我尝试使用 - (BOOL)tabBarController:(UITabBarController *)tabBarController shouldSelectViewController:(UIViewController *)viewController

并且这似乎也没有触发（我返回 NO 并且没有任何区别，也没有使用 NSLog() 记录任何内容；

如果这些方法都没有触发，我认为我会错误地设置委托，但是一种方法会触发，但两种不会触发。有任何想法吗？

我已经使用情节提要设置了 tabbarcontroller。

```
-(void) tabBar:(UITabBar *)tabBar didSelectItem:(UITabBarItem *)item
{
    NSLog(@"item selected");
    //THIS DOES GET LOGGED
}

- (void)tabBarController:(UITabBarController *)tabBarController didSelectViewController:(UIViewController *)viewController
{
    NSLog(@"new VC");
    //this does not get logged
}

- (BOOL)tabBarController:(UITabBarController *)tabBarController shouldSelectViewController:(UIViewController *)viewController
{
     return NO;
    //this doesnt stop any views being presented
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-07-09T07:21:47.263

我找到了我的问题 - 我是我的错。我做了一些愚蠢的事情。我在作为 tabbarcontroller 的控制器的类中使用 self.tabbarcontroller.delegate = self 设置了委托，将其更改为 self.delegate = self; 已解决问题。相当愚蠢的错误！奇怪的是第一种方法实际上是如何工作的，但是嘿！

# javascript - 从 jsTree 搜索接收多个警报消息

> ID：15302427
> 
> 赞同：1
> 
> 时间：2013-03-08T20:08:55.173
> 
> 标签：javascript, jstree

我已经构建了下面的函数来搜索[jsTree](http://www.jstree.com/)中的文本。

如果找到搜索文本，则突出显示该节点。*如果未找到，请使用“没有具有搜索字符串的节点，重试”*字符串警告用户。

发生的情况是，当我输入不在 jsTree 中的搜索文本时，我会收到警报。我再次使用有效文本搜索节点，但仍然在浏览器窗口上收到警报。

有任何想法吗？

```
<script type="text/javascript"> 
function myFunction()
{
    $(document).ready(function(){
        var value=document.getElementById("search_field").value;    
        var searchResult;
        var AlertsOn = false

        $("#search_tree").click(function () { 
            searchResult=$("#tree").jstree("search",value);
                if ($(searchResult).find('.jstree-search').length == 0) 
                {
                    AlertsOn = true;
                }
                else 
                {
                    AlertsOn = false;
                }

                if(AlertsOn == true){
                    alert($(searchResult).find('.jstree-search').length);
                }       
        });
        document.getElementById("search_field").value='';
    }); 
}
</script> 
```

html:

```
<fieldset id="search">

    <input type="text" name="search_field" id="search_field" value="" />
    <button id="search_tree" onclick="myFunction()"> Search</button>

  </fieldset> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T14:16:02.410

我可以在 jquery 中执行此调用以重新加载页面以重新初始化警报框：

```
location.reload(); 
```

# android - ActiveAndroid 似乎没有初始化

> ID：15302430
> 
> 赞同：0
> 
> 时间：2013-03-08T20:09:08.653
> 
> 标签：android, activeandroid

我在 AndroidManifest.xml 中配置了 ActiveAndroid，如下所述：

```
<application
        android:name="com.xxx.xxxx.XXXApplication"
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        <meta-data
            android:name="AA_DB_NAME"
            android:value="MyDB.db" />
        <meta-data
            android:name="AA_DB_VERSION"

            android:value="2" />
...
</application> 
```

应用类：

```
public class XXXApplication extends Application {

    @Override
    public void onCreate() {
        super.onCreate();
        ActiveAndroid.initialize(this);
    }
} 
```

模式类是：

```
@Table(name = "Routes")
public class Route extends Model {
...

   public static List<Routes> all(){
      return new Select().from(Route.class).execute();
   }

} 
```

Ps：我按照文档： [https ://github.com/pardom/ActiveAndroid/wiki/Getting-started](https://github.com/pardom/ActiveAndroid/wiki/Getting-started)

当调用 Routes.all() 我得到这个错误：

**试图在未准备好的类“Lbr/com/xxx/xxx/xxxx/models/Route;”中执行代码**

全栈是：

```
03-08 16:41:56.505: E/dalvikvm(23688): ERROR: tried to execute code in unprepared class 'Lbr/com/xxx/xxx/xxxx/models/Route;' (5)
03-08 16:41:56.505: I/dalvikvm(23688): "main" prio=5 tid=1 RUNNABLE
03-08 16:41:56.505: I/dalvikvm(23688):   | group="main" sCount=0 dsCount=0 obj=0x41800508 self=0x417efce0
03-08 16:41:56.505: I/dalvikvm(23688):   | sysTid=23688 nice=0 sched=0/0 cgrp=apps handle=1075560240
03-08 16:41:56.505: I/dalvikvm(23688):   | schedstat=( 1596851683 269907401 1132 ) utm=148 stm=11 core=0
03-08 16:41:56.505: I/dalvikvm(23688):   at com.xxxx.models.Route.all(Route.java:-1)
03-08 16:41:56.505: I/dalvikvm(23688):   at com.xxxx.activities.SavedRoutesActivity.onCreate(SavedRoutesActivity.java:-1)
03-08 16:41:56.505: I/dalvikvm(23688):   at com.xxxx.activities.SavedRoutesActivity_.onCreate(SavedRoutesActivity_.java:24)
03-08 16:41:56.505: I/dalvikvm(23688):   at android.app.Activity.performCreate(Activity.java:5206)
03-08 16:41:56.505: I/dalvikvm(23688):   at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1083)
03-08 16:41:56.505: I/dalvikvm(23688):   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2064)
03-08 16:41:56.505: I/dalvikvm(23688):   at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2125)
03-08 16:41:56.505: I/dalvikvm(23688):   at android.app.ActivityThread.access$600(ActivityThread.java:140)
03-08 16:41:56.505: I/dalvikvm(23688):   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1227)
03-08 16:41:56.505: I/dalvikvm(23688):   at android.os.Handler.dispatchMessage(Handler.java:99)
03-08 16:41:56.505: I/dalvikvm(23688):   at android.os.Looper.loop(Looper.java:137)
03-08 16:41:56.505: I/dalvikvm(23688):   at android.app.ActivityThread.main(ActivityThread.java:4898)
03-08 16:41:56.505: I/dalvikvm(23688):   at java.lang.reflect.Method.invokeNative(Native Method)
03-08 16:41:56.505: I/dalvikvm(23688):   at java.lang.reflect.Method.invoke(Method.java:511)
03-08 16:41:56.505: I/dalvikvm(23688):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1006)
03-08 16:41:56.505: I/dalvikvm(23688):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773)
03-08 16:41:56.505: I/dalvikvm(23688):   at dalvik.system.NativeStart.main(Native Method)
03-08 16:41:56.505: E/dalvikvm(23688): VM aborting
03-08 16:41:56.505: A/libc(23688): Fatal signal 11 (SIGSEGV) at 0xdeadd00d (code=1), thread 23688 (o.mobile.xxxx) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-04-29T09:52:26.797

这已经晚了，但可以帮助面临同样问题的其他人。此问题仅在调试模式下出现，要解决它：

*   删除任何涉及该未准备类的监视表达式（在调试视图中）。
*   如果您不在代码中使用该类，只需将其删除（这也解决了第一点）。希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T06:45:53.053

您还记得为 Route 编写标准构造函数吗？例如。

```
public Route(){
    super();
} 
```

如果你有自己的 Application 类，它必须派生自`com.activeandroid.app.Application`：

```
public class Application extends com.activeandroid.app.Application {
    …
} 
```

如果这没有帮助，请张贴 Route 的签名。

# javascript - 匹配字符串的每次使用

> ID：15302432
> 
> 赞同：0
> 
> 时间：2013-03-08T20:09:18.807
> 
> 标签：javascript, regex, match

我正在开发一个待办事项列表应用程序，用户可以在其中将待办事项列表项添加到网页，还可以搜索待办事项列表项。下面我正在研究搜索功能。现在发生的事情是，我在页面上添加了一个 li 项目，上面写着“你找到了”+ 用户在下面搜索的名称 + 与该特定项目匹配的任务。但是，我不确定如何匹配使用该名称的每个列表项。例如，我可以让一个叫 Bob 的人做三项不同的任务。现在这个搜索只会匹配第一个，但我想匹配所有三个。有什么建议么？

```
function search() {
   var searchTerm = document.getElementById("search").value;
   searchTerm = searchTerm.trim();

   if(searchTerm == null || searchTerm == "") {
   alert("Please enter a string to search for");
   return;
   }
   else {
     var todoObj = undefined;
     results = undefined;
     re = undefined;

   for(var i = 0; i < todos.length; i++) {
     todoObj = todos[i];
     re = new RegExp(searchTerm, "ig");
     resultsOne = todoObj.who.match(re);
     if(resultsOne) {
       var ul = document.getElementById("test");
       var li = document.createElement(li);
       li.className = "listItem";  
       li.innerHTML = "You found " + todoObj.who + " who needs to " + todoObj.task; 
       ul.appendChild(li);    
       }
      }      
     }    
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T20:28:12.657

保留匹配的待办事项的临时列表，最后，在最后，输出您的结果：

```
var matchedTodos = []; // temporary list of matched todos

for(var i = 0; i < todos.length; i++) {
     todoObj = todos[i];
     re = new RegExp(searchTerm, "ig");
     resultsOne = todoObj.who.match(re);
     if(resultsOne) {
         // found a match, add it to our temporary list
         matchedTodos.push(todoObj);
     }
 } 

// now output the matched todos

if (matchedTodos.length > 0) {
    var ul = document.getElementById("test");
    var li = document.createElement("li");
    li.className = "listItem";  
    var tasks = '';
    var todoObj = null;
    for(var j = 0; j < matchedTodos.length; j++) {
        todoObj = matchedTodos[j];
        tasks += todoObj.task + ', ';
    }
    li.innerHTML = "You found " + todoObj.who + " who needs to " + tasks; 
    ul.appendChild(li);  
} 
```

您希望输出类似于`"You found Bob who needs to clean his room, take a bath, sleep"`. 您将不得不添加一些逻辑以获得正确数量的`,`逗号以使句子正确：P

*编辑：*将它们全部作为单独的列表项：

```
var matchedTodos = []; // temporary list of matched todos

for(var i = 0; i < todos.length; i++) {
     todoObj = todos[i];
     re = new RegExp(searchTerm, "ig");
     resultsOne = todoObj.who.match(re);
     if(resultsOne) {
         // found a match, add it to our temporary list
         matchedTodos.push(todoObj);
     }
 } 

// now output the matched todos

if (matchedTodos.length > 0) {
    var ul = document.getElementById("test");
    var todoObj = null;
    for(var j = 0; j < matchedTodos.length; j++) {
        var li = document.createElement("li");
        li.className = "listItem";  
        todoObj = matchedTodos[j];
        li.innerHTML = "You found " + todoObj.who + " who needs to " + todoObj.task;
        ul.appendChild(li);  
    } 
} 
```

# r - 将印度股票价格导入 R

> ID：15302434
> 
> 赞同：2
> 
> 时间：2013-03-08T19:04:35.163
> 
> 标签：r, finance, web

有没有办法将印度股票市场的股票价格数据 - BSE 和 NSE 导入 R？我想知道是否有一个包可以做 quantmod 从美国市场做的事情。还有其他方法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-08T20:42:55.963

quantmod 做到了。只需使用雅虎符号。（或使用谷歌符号并`src="google"`在`getSymbols`通话中使用）

例如

```
getSymbols("HDFCBANK.BO", src="yahoo")
getSymbols("IDFC.NS", src="yahoo") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-01-12T22:42:47.443

使用 yahoo/google 上的通用符号，然后使用

> .BO 用于疯牛病

和

> .NS 用于 NSE

```
getSymbols("SBIN.BO", src="yahoo")
getSymbols("SBIN.NS", src="yahoo") 
```

# iphone - 连接到“E”时出现奇怪的崩溃

> ID：15302436
> 
> 赞同：0
> 
> 时间：2013-03-08T20:09:32.730
> 
> 标签：iphone, ios, debugging, networking

我有一个奇怪的互联网连接问题。我的应用程序在连接到 3G 或 WiFi 时工作正常，但在连接到“E”时出现奇怪的崩溃（见下图）。

![在此处输入图像描述](../Images/7796cc152f1dbf34c3328e0f61e7dc3c.png)

在“E”连接上，如果我加载需要 Internet 的视图，然后按主页按钮，然后尝试将应用程序置于前台，应用程序将崩溃。这仅在将应用程序置于前台时在“E”连接上发生。

我似乎无法弄清楚这里出了什么问题，也无法使用调试器，因为这只发生在未插入设备时。

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T21:57:28.820

您可以通过 Xcode 的管理器窗口从设备中提取崩溃日志。

当您使用 EDGE 连接时，E 会出现，这很慢。您可以使用设置 > 开发人员中的网络链接调节器来复制这种类型的连接。

# javascript - dotdotdot.js 仅在窗口调整大小后有效

> ID：15302438
> 
> 赞同：5
> 
> 时间：2013-03-08T20:09:34.890
> 
> 标签：javascript, jquery, html, css, jquery-plugins

当它们超过一定高度时，我试图在我的网站上的几个多行段落中附加一个省略号。为此，我使用[dotdotdot](http://dotdotdot.frebsite.nl/)，即 jquery 插件。

奇怪的是，当我刷新页面时它不起作用。它仅在我调整窗口大小后才有效（然后它完美地工作）。我已经尝试将所有脚本放在我的 html 的末尾，所以 dotdotdot 会最后加载，但它仍然无法正常工作。有谁知道为什么会发生这种情况？

我将这些设置用于dotdotdot：

```
$(document).ready(function() {
    $("p.article-content").dotdotdot(
    {
        /* The HTML to add as ellipsis. */
        ellipsis : '...',

        /* How to cut off the text/html: 'word'/'letter'/'children' */
        wrap : 'word',

        /* jQuery-selector for the element to keep and put after the ellipsis. */
        after : null,

        /* Whether to update the ellipsis: true/'window' */
        watch : true,

        /* Optionally set a max-height, if null, the height will be measured. */
        height : null,

        /* Deviation for the height-option. */
        tolerance : 0,

        /* Callback function that is fired after the ellipsis is added,
        receives two parameters: isTruncated(boolean), orgContent(string). */
        callback : function( isTruncated, orgContent ) {},

        lastCharacter : {
            /* Remove these characters from the end of the truncated text. */
            remove : [ ' ', ',', ';', '.', '!', '?' ],

            /* Don't add an ellipsis if this array contains
            the last character of the truncated text. */
            noEllipsis : []
        }
    });
}); 
```

相关的 HTML 是（它很丑，我知道，我还在试验它）：

```
<article class="article">
  <div class="article-image"></div>
  <h2>Title</h2>
  <p class="date">December 19, 2012</p>
  <p class="article-content">Lorem ipsum etc. (the actual content is larger)</p>
</article> 
```

和CSS：

```
article {
  font-size: 99%;
  width: 28%;
  line-height: 1.5;
  float: left;
  margin-left: 8%;
  margin-bottom: 3em;
  text-align: justify;
}

article h2 {
  font-size: 125%;
  line-height: 0.5;
  text-transform: uppercase;
  font-weight: normal;
  text-align: left;
  color: rgba(0,0,0,0.65);
}

.date {
  margin-top: 0.3em;
  margin-bottom: 1em;
  font-family: 'PT Sans';
  color: rgba(0,0,0,0.5);
}

.article-image {
  background-image: url(http://lorempixel.com/g/400/300/city/7);
  width: 100%;
  height: 13em;
  overflow: hidden;
  margin-bottom: 1.5em;
}

p.article-content {
  font-family   : 'PT Sans';
  color         : rgba(0,0,0,0.65);
  margin-bottom : 0;
  height        : 7em;
  overflow      : hidden;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-08-28T12:50:16.533

起初，dotdotdot 似乎很容易。但是我也遇到了包含大量内容的响应式页面的问题。文档准备好后，页面上的容器仍在调整大小，因为正在填充内容。在您的评论的帮助下，我的解决方案现在是：

```
$(document).ready(ellipsizeText);        // Plugin must have been working flawles inhere as described in documentation.
window.setTimeout(ellipsizeText, 400);   // Just for any case.
window.setTimeout(ellipsizeText, 800);   // Maybe user didn't saw it flickering.
$(window).load(ellipsizeText);           // Oh hell! the images are loading so not all containers are yet on their places. We wait on them..
function ellipsizeText()
{
    $(".selectorForEllipsis").dotdotdot({
        watch: true
    });
} 
```

我认为正确的解决方案是在更改位置或大小以更新 dotdotdot 时，将侦听器附加到每个带有文本的容器，而不仅仅是调整窗口大小。也许使用[Ben Alman yquery 调整大小插件](http://benalman.com/projects/jquery-resize-plugin/)

或者是否存在更好地处理此内容加载问题的插件？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-25T10:02:56.740

有类似的问题。只需将dotdotdot初始化放在窗口加载事件处理程序中，而不是准备好dom。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T20:13:53.280

或者，简单地将整个函数包装在一个`.resize()`函数下。不是最优雅的解决方案，但它会起作用：

```
$(document).ready(function() {
    $(window).resize(function()
    {
        $("p.article-content").dotdotdot(
        {
            // All your code goes here
        });
    }).resize();

    // The second .resize() will fire when the document is ready (i.e. onload),
    // therefore executing .dotdotdot() upon loading
}); 
```

[编辑]：根据 Kevin 的建议，由于`.dotdotdot()`已经监听了 resize 事件，你甚至不需要包装函数。只需在文档准备好时触发事件，使用`$(window).resize()`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-19T11:02:52.403

从 watch: "window" 更改为 watch: true

它开始为我工作！

# sharepoint-2010 - 使用 CSOM（客户端对象模型）访问 SP2013 站点设置-> 母版页/导航设置等

> ID：15302439
> 
> 赞同：0
> 
> 时间：2013-03-08T20:09:35.857
> 
> 标签：sharepoint-2010, sharepoint-2013, csom

我想从 JavaScript 或 REST 服务或 Web 服务（我可以从 Javascript 调用）使用 CSOM（客户端对象模型）访问 SharePoint 2013 站点设置 → 母版页/导航设置等。如果此类 API/对象可用于 SharePoint 2013，我可以获得指针吗？

更具体地说：我想访问并将**站点设置→导航（在外观和感觉下）→全局和当前导航更改为“结构导航”而不是“托管导航”。我想使用 CSOM（Javascript / REST / Web 服务）来实现这一点。**我不想使用服务器端对象模型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T22:59:02.723

**用于设置母版页的完美工作脚本：**

$(document).ready(function () { jQuery('.cmdSet').click(function () {

```
 var scriptBase = _spPageContextInfo.webAbsoluteUrl + "/_layouts/15/";

    $.getScript(scriptBase + "sp.runtime.js", function () {

        $.getScript(scriptBase + "sp.js", function () {

            $.getScript(scriptBase + "sp.core.js", sharePointReady);

        });
    });

}); 
```

});

```
// create page-level variables to hold client context and web
var context;
var web;
var masterurl;
var site;
function sharePointReady() {

// assign values to page-level variables
context = new SP.ClientContext.get_current();
web = context.get_web();

// provide CSOM with instructions to load info about current web

context.load(web, 'ServerRelativeUrl');
web.set_customMasterUrl(L_Menu_BaseUrl + '/_catalogs/masterpage/seattle.master');
web.set_masterUrl(L_Menu_BaseUrl + '/_catalogs/masterpage/seattle.master');
web.update();

context.executeQueryAsync(function () {

    alert("Starting Master Page Setting......");
    masterurl = web.get_serverRelativeUrl() + "/_catalogs/masterpage/seattle.master";
    alert(masterurl);
    alert("Master Page is Set Successfully!!!");

}, function (sender, args) {

    alert("Error: " + args.get_message());

}); 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-02T23:12:49.707

在 SharePoint 2013 中引入了一个新的[SP.Publishing.Navigation](http://msdn.microsoft.com/en-us/library/office/jj607195(v=office.15).aspx)命名空间（SharePoint [Publishing JavaScript Library](http://msdn.microsoft.com/en-us/library/office/jj607192(v=office.15).aspx)的一部分）。特别是用于管理发布站点的导航设置的[WebNavigationSettings 类。](http://msdn.microsoft.com/en-us/library/office/jj994643(v=office.15).aspx)

以下示例演示如何将全局导航设置为显示`Structural Navigation`：

```
function configureNavigation()
{
   var ctx = SP.ClientContext.get_current();         
   var web = ctx.get_web();
   var webNavSettings = new SP.Publishing.Navigation.WebNavigationSettings(ctx,web);

   var navigation = webNavSettings.get_globalNavigation();
   navigation.set_source(SP.Publishing.Navigation.StandardNavigationSource.portalProvider); //set to Structural Navigation   
   webNavSettings.update();

   ctx.executeQueryAsync(
        function(){
            console.log("Navigation settings have been updated successfully");  
        },function(sender,args){    
            console.log(args.get_message());
        });
} 
```

关键点：

*   [SP.Publishing.Navigation.StandardNavigationSource 枚举](http://msdn.microsoft.com/en-us/library/office/jj994650%28v=office.15%29.aspx)`AreaNavigationSettings.aspx`标识控件面板上显示的三个枚举选项

用法

```
var scriptBase = _spPageContextInfo.webAbsoluteUrl + "/_layouts/15/";   
$.when(
    $.getScript( scriptBase + "sp.js" ),
    $.getScript( scriptBase + "sp.publishing.js" ),
    $.Deferred(function( deferred ){
        $( deferred.resolve );
    })
).done(function(){
     configureNavigation();    
}); 
```

# java - 如何让 Spinner OnListItemSelected 工作

> ID：15302440
> 
> 赞同：1
> 
> 时间：2013-03-08T20:09:38.067
> 
> 标签：java, android, spinner

我目前正在尝试在我的 android 应用程序中实现 Spinner。我在获取 OnItemSelected 方法时遇到问题，无法根据选择的项目打开一个新类。

我有下面显示的代码，这似乎不起作用，而且由于添加了这个，现在当我单击按钮打开电影和电视时它从菜单中打开错误的布局，但除了添加波纹管代码之外没有任何改变.

应该发生什么：活动开始 --> 单击电影和电视 --> 从 Spinner 中选择项目 --> 根据选择的项目打开新类。

现在发生的事情：活动开始 --> 点击电影和电视 --> 错误的布局打开 --> 在手机上按回 --> 正确的布局打开 --> 从微调器中选择项目 --> 没有发生

代码：

```
String classes[] = {"SeanConnery", "BillyConnoly", "JamesMcAvoy", "KarenGillan", "KellyMacdonald", "AshleyJensen"};
    @Override
public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) {

    String classSpot = classes[pos];
    try{
    Class nextClass = Class.forName("com.example.famouspeople." + classSpot);
    Intent ourIntent = new Intent(Film.this, nextClass);
    startActivity(ourIntent);
    }
    catch(ClassNotFoundException e){
        e.printStackTrace();
    }
    } 
```

显现：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.famouspeople"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.example.famouspeople.MainMenu"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name="com.example.famouspeople.Film"
        android:label="@string/app_name" >
    </activity>
    <activity
        android:name="com.example.famouspeople.SeanConnery"
        android:label="@string/app_name" >
    </activity>
            <activity
        android:name="com.example.famouspeople.BillyConnoly"
        android:label="@string/app_name" >
    </activity>
            <activity
        android:name="com.example.famouspeople.JamesMcAvoy"
        android:label="@string/app_name" >
    </activity>
            <activity
        android:name="com.example.famouspeople.KarenGillan"
        android:label="@string/app_name" >
    </activity>
            <activity
        android:name="com.example.famouspeople.AshleyJensen"
        android:label="@string/app_name" >
    </activity>
            <activity
        android:name="com.example.famouspeople.KellyMacdonald"
        android:label="@string/app_name" >
    </activity>
</application> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T20:16:38.820

要创建意图，您可以执行以下操作...

```
final Context context = this;
Intent intent = new Intent(context,youractivity.class);
            startActivity(intent); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T20:34:43.197

改变你`mainfest`的

```
<activity
        android:name="com.example.famouspeople.SeanConnery"
        android:label="@string/app_name" >
    </activity> 
```

至

```
<activity
        android:name=".YourJavaClassName"
        android:label="@string/app_name" >
        <intent-filter>
             <action android:name="com.example.famouspeople.SeanConnery" />
             <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
</activity> 
```

# histogram - 2D 填充. 等高线图，按 R 轴绘制 1D 直方图

> ID：15302442
> 
> 赞同：1
> 
> 时间：2013-03-08T19:00:27.333
> 
> 标签：histogram

我希望这个问题超出了“阅读手册”的范围。我的任务很简单，只是绘制以下内容，但中间的情节应该是一个填充的轮廓图：http: [//gallery.r-therapys.com/graph/Scatterplot_with_marginal_histograms_78](http://gallery.r-enthusiasts.com/graph/Scatterplot_with_marginal_histograms_78)

背景：我更喜欢 fill.contour 而不是 hist2d。因为，我可以使用内核平滑，所以离散数据的图不会太难看。我也尝试了 image()，然后是 contour()，但轮廓上的数字不清楚，也没有关于颜色的指示。

我的问题：在filled.contour 函数中，它使用 layout() 来填充轮廓 () 绘图和 rect() 绘图（颜色条）。但是，我在外部代码中使用 layout() 来组织 2 个直方图和一个 fill.contour 图。看起来，外面的布局被filled.contour() 遮蔽了。我不确定 R 如何处理这个问题。我应该以某种方式重写filled.contour() 吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T19:34:04.920

如果您查看帮助页面 ?filled.contour ，您会看到它还提到了另一个名为（在前面`.filled.contour`额外）的函数，它只进行简单的绘图而不调用并导致您看到的问题。您需要做更多的检查和初步工作，但您应该能够为主要情节做您想做的事情并自己设置布局。`.``layout``.filled.contour`

# jquery - 无法读取未定义的属性“0”

> ID：15302446
> 
> 赞同：2
> 
> 时间：2013-03-08T20:09:53.337
> 
> 标签：jquery

我正在通过将“请选择...”选项添加到交付方式选择框 (cmbD_method) 来进行一些基本的表单验证，然后确保用户选择了交付方式。我无法修改源代码，因此我的代码将验证添加到名为 validateUserDataFields() 的现有函数中。

但是，无论选择哪个选项，都会出现警告消息并且控制台显示“Uncaught TypeError: Cannot read property '0' of undefined”

我错过了什么？我的代码如下：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type='text/javascript'> 

var delMeth = new Option('Please Select A Delivery Method', '0');

$(delMeth).html("Please Select A Delivery Method");
$("#cmbD_Method").append(delMeth);
$('#cmbD_Method').val(0);
$('#cmbD_Method').width($('#cmbD_Method').width() + 40);

var validate = validateUserDataFields;

validateUserDataFields = function () {
if ($('#cmbD_Method').val(0)) {
  alert('Please Select A Delivery Method');
  }
else {
  validate(); // call the original function
  }
};

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T21:25:15.600

@Rongsir 回答了问题的主要部分——我需要

```
 if ($('#cmbD_Method').val() == '0') 
```

# google-maps - AngularJS：如何在函数返回之前阻止执行？

> ID：15302452
> 
> 赞同：1
> 
> 时间：2013-03-08T20:10:27.510
> 
> 标签：google-maps, angularjs

我正在尝试使用 Angular JS 在点击时显示谷歌地图。但我的函数似乎是基于函数调用（通过 ng-show）切换可见性。这意味着我的“调整大小”事件的触发器在地图 div 实际可见之前执行，因此它无法正常工作。

```
$scope.mapVisible = false;
$scope.toggleMap = function() {
    $scope.myMap.panTo($scope.myMarkers[0].getPosition());
    $scope.mapVisible = !$scope.mapVisible;
    // this executes too soon. How to block until the div is really visible?
    google.maps.event.trigger($scope.myMap, 'resize');
}

<div ng-show="mapVisible">
   <!-- map here -->
</div> 
```

那么如何阻止在我的地图上触发“调整大小”事件，直到 div 真正可见？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T20:19:27.680

```
$scope.$watch("mapVisible", function (val) {
  if (val) {
    google.maps.event.trigger($scope.myMap, "resize");
  }
}); 
```

这将确保在触发事件之前地图是可见的。
Angularjs 通过做脏检查来处理双向绑定。这基本上意味着正在观察的值与上一个周期中的值进行比较。`$digest`当发生可能改变范围内任何值的事情时，每个循环 ( ) 开始运行。如果值发生变化，将在循环完成后反映出来。

回到您的问题，当您切换`mapVisible`属性时，视图不会*立即*更新。它在重绘视图之前等待循环结束。但是你`resize`这么早触发事件，当地图仍然不可见时，因此渲染无效。

`$watch`确实会监视属性，并且更改将反映在更改的`next`周期中，这意味着视图将由调用观察器函数的时间进行更新。因此，将功能放在`resize`这里可以解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-02T21:52:39.750

我认为最简单的情况是使用该`$timeout`服务：

```
scope.$on "map:ui:shown", (event, args)->
    $timeout ->
      #use a delay because most of the time, the resizing should occur immediately after an angular cycle
      #like when an ng-show has been set to the True condition
      googleMaps.event.trigger(map, 'resize')
      map.fitBounds scope.bounds if scope.bounds 
```

# sql-server - 非唯一键上的 sql server 聚集索引

> ID：15302453
> 
> 赞同：0
> 
> 时间：2013-03-08T20:10:55.560
> 
> 标签：sql-server

我们有一个非常大的数据库，并且一直在使用我们想要摆脱的分片。每当一个表变得非常大时，分片就会起作用，我们启动一个与前一个表具有相同架构的新表，并在另一个表中保留一个数字，以帮助我们找到数据在哪个表中。这是一个繁琐的手动过程，并且意味着我们的数据分布在 N 个不同的表中，所有表都具有相同的模式。

我们正在尝试的想法是通过使用索引来消除对分片的需求。我们的数据查找查询不使用唯一键，并且返回的许多记录具有跨列的相同值。

下面说明了我们对特定表的许多查找选择，带 * 的字段表示该字段可能在选择中，也可能不在选择中。

where 子句：scheduled_test、*script、*label、*error_message

组/顺序：messenger_id、时间片、脚本、标签、error_message、step_sequence、*adapter_type

我的想法是我不想创建包含所有这 11 个字段的索引。相反，我选择了其中 3 个似乎更常用的，包括始终在 where 子句中的那个。我读过建议不要有太多字段的索引太宽。我还听说优化器将首先使用索引字段，并且即使 MSDN 声明唯一索引是最大的优势，具有非唯一索引的情况并不少见。这不是我们数据的设计方式。我意识到 SQL 会在索引中添加一些内容以使其独一无二，但这对于我们的目的似乎无关紧要。

当我在 sql server management studio 中查看类似于我们可能运行的查询的执行计划时，它说“聚集索引查找成本 100%”，但它使用的是我创建的聚集索引，所以我希望这个优于仅作为生成主键的默认聚集索引（以前如何定义表）。我希望我在这里所拥有的与我们的分片方法一样好或更好，并且将消除对分片的需求。

我们确实一次向表中插入了大量数据，但是这些行在许多列中都具有相同的数据值，我认为它们甚至倾向于在最后插入。这些插入不与旧数据共享值，如果索引只有 3 列，希望这不会对插入造成很大的影响。

我所说的是否合理，或者我还应该研究或考虑什么？非常感谢，我对这些类型的索引问题不太熟悉，但一直在寻找各种网站并进行试验。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T20:45:15.157

一般来说，聚集索引越窄越好，因为聚集索引的聚集键会添加到所有非聚集索引中，从而降低效率。

SQL Server 将向非唯一聚集索引添加唯一标识符，使它们（以及所有非聚集索引）更宽。

如果这些索引使用的空间对您来说不是问题，那么您应该考虑聚集索引键的值是否一直在增加（或减少），就好像它不是一样，您会得到页面拆分和碎片，这肯定会伤害你的插入物。

如果您可以检查不同的索引策略对您的正常查询的影响，那么在测试系统中设置它可能是值得的。

# c# - 如何将 2D int 数组从 C 代码返回到 C#？

> ID：15302455
> 
> 赞同：3
> 
> 时间：2013-03-08T20:10:58.633
> 
> 标签：c#, c, marshalling

我正在学习如何从我的 C# 代码中调用 C 代码。我想调用一个返回二维整数数组的 C 函数。此函数不接受任何参数。这是功能：

```
extern "C" _declspec(dllexport) int** intMatrixReturn()
{
    int** A = (int**)malloc(3 * sizeof(int *));
    for(int i = 0; i < 3; i++)
    {
        A[i] = (int*)malloc(3 * sizeof(int));
        for(int j = 0; j < 3; j++)
        {
            A[i][j] = i * j;
        }
    }
    return A;
} 
```

这就是我试图在我的 C# 代码中访问数组的方式：

```
IntPtr ip = intArrayReturn();
int[] iarr = new int[9];

Marshal.Copy(ip, iarr, 0, 9);
foreach (var item in iarr)
{
    Console.WriteLine(item);
} 
```

这是我的控制台输出：

```
1
2
3
4218
86245572
86252624
0
0
0 
```

我认为我的问题是我的 C# 代码。如何读取从 C 函数返回的 2D int 数组？此外，垃圾收集器是否释放保存 2D 数组的内存，还是应该在 C# 代码中这样做？

如果这是重复的，我深表歉意，但是我发现的有关 2D 数组的所有问题都涉及将它们从 C# 发送到 C，而不是相反。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T20:17:32.423

您正在传递`Marshal.Copy`一个一维数组，所以当然这就是您要返回的内容。此外，foreach 循环不适用于二维数组。

这绝不是一个解决方案，只是一个起点；

1）使 iarr 二维数组 -`int[] iarr = new int[9][9];`

2）使您的打印功能嵌套for循环 -

```
 for (int i = 0; i < 9; i++)
 {
      for (int j = 0; i < 9; j++)
      {
           Console.WriteLine(iarr[i][j]);
      }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T20:44:24.410

不。在本机端使用适当大小的一维数组，然后一切都可以开箱即用。否则，您将需要将本机数组编组为指针数组，其中每个元素都指向正确的内存块。然后，按照 evanmcdonnal 告诉您的操作，使用 Marshal.Copy 的相应重载。关于内存释放，您负责，或者更好的是，本机库是：安全的方法是将数组传递回本机库，该库负责正确的释放。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-26T03:25:44.443

我最终使用了`Paul Michalik`. 我使用了一维数组。这不是一种直截了当的方式，但它确实适用于 2D：

**C面：**

```
extern "C" {

    struct Matrix
    {
      int size1; // rows number
      int size2; // cols number
      int *data; 
    };

    Matrix* intMatrixReturn(int size1, int size2) {

        Matrix *m = (Matrix*)malloc(sizeof(Matrix) * 1);
        m->data = (int*)malloc(sizeof(int) * size1 * size2);
        m->size1 = size1;
        m->size2 = size2;

        for (int i = 0; i < size1; i++)
        {
            for (int j = 0; j < size2; j++)
            {
                m->data[i*size2+j] = i*size2+j;
            }
        }

        return m;

    }
} 
```

**C# 方面：**

```
 [StructLayout(LayoutKind.Sequential)]
    public struct Matrix
    {
        public int size1;
        public int size2;
        public IntPtr data;
    }

    [DllImport(@"dllname.dll", CallingConvention = CallingConvention.Cdecl)]
    public static extern IntPtr intMatrixReturn(int size1, int size2);

    static void Main(string[] args)
    {
        int size1 = 3; // rows
        int size2 = 3; // cols
        IntPtr p1 = intMatrixReturn(size1, size2);
        Matrix m1 = (Matrix)Marshal.PtrToStructure(p1, typeof(Matrix));
        int[] tmp = new int[m1.size1 * m1.size2];
        IntPtr pd2 = m1.data;
        Marshal.Copy(pd2, tmp, 0, m1.size1 * m1.size2);

        for (int i = 0; i < m1.size1; i++)
        {
            for (int j = 0; j < m1.size2; j++)
            {
                Console.Write(tmp[i * m1.size2 + j] + " ");
            }
            Console.WriteLine();
        }
    } 
```

**输出：**

```
0 1 2
3 4 5
6 7 8 
```

# c# - 保存控件位置并重新加载

> ID：15302457
> 
> 赞同：0
> 
> 时间：2013-03-08T20:11:02.323
> 
> 标签：c#, .net, winforms, controls, panel

我有一个包含随机放置的面板（带有自动滚动）`UserControls`，我想保存这些控件的位置并在以后将它们加载回来，以便它们准确地放置在它们之前的位置。

在 .NET 中执行此操作的正确方法是什么？目前这是我保存到数据库中的 X,Y：

X：`Math.Abs(panel.AutoScrollPosition.X) + control.Location.X;`

是的：`Math.Abs(panel.AutoScrollPosition.Y) + control.Location.Y;`

当我加载控件时，我会这样做： control.Location = new System.Drawing.Point(X, Y);

但我认为我错过了一些东西，因为 AutoScroll 在 .NET 中的行为方式。有时我在加载后发现控件放错了位置（不像它们的旧位置）。

想了很久，真希望能在这里找到一些信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T22:09:17.697

我想您想在滚动后将控件恢复到当前的视觉位置，这就是您考虑自动滚动的原因？当您说控件放错位置时，它们是否相对移动，或者整个控件是否“滚动”到错误的位置？

你确定 Math.Abs​​ 吗？这似乎有些奇怪。我会尝试只添加 Location.X 和 AutoScrollPosition.X（或使用 -AutoScrollPosition.X）

我还会在恢复时检查 AutoScrollPosition 当前为 0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T20:49:54.223

不确定您使用的所有配置，但请确保滚动条的增量步骤是整数。接下来确保将控件添加回面板控件树而不是父窗体并设置位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T20:56:23.997

您可以使用 app.config 文件来保存这些设置，因此当您需要它们时，您只需调用 app.config 中键的设置。

我认为没有合适的方法，无论您感觉更好，它都可以工作，但是如果您要动态创建控件，则可以像现在一样拥有一个数据库。但是，如果只有几个，app.config 文件会更好。

# php - 通过 PHP（jQuery/AJAX）从 MySQL 获取到 jquery（移动应用程序）

> ID：15302458
> 
> 赞同：-3
> 
> 时间：2013-03-08T20:11:02.707
> 
> 标签：php, jquery, mysql, ajax

我看过很多教程，但是它们太令人困惑了，为了做我想做的事，我只是不知道如何使用这些教程中的现有内容并让它们按照我想要的方式工作。

我有一个图标 @homepage 。当用户点击它时，我想做一个查询“select * from tablename”，并在特定的 div 中显示结果。

有人可以告诉我如何实现吗？我只需要一些非常基本的东西来让我开始。任何帮助表示赞赏。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T20:37:29.917

```
<html>
<head>
<script type="text/JavaScript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type="text/JavaScript">
$(function() {
    $("#buttonId#).click(function() {
        $("#divToUpdate").load("/scriptPhp.php");
    });
</script>
</head>
<body>
<input id="buttonId" type="button" value="click me!" />
<br />
<div id="divToUpdate">
</div>
</body>
</html> 
```

在您的 scriptPHP.php 文件中：

```
<table>
    <thead>
        <tr>
            <th>Cell 1</th>
            <th>Cell 2</th>
        </tr>
    </thead>
    <tbody>
<?php
$pdo = new Pdo("mysql:host=localhost;dbname=nameOfTheDatabase;charset=utf8", "username", "password");

$rows = $pdo->query("SELECT * FROM tablename")->fetchAll(PDO::FETCH_ASSOC);
foreach ($rows as $row) {
?>
        <tr>
            <td><?php echo $row['cell_1']; ?></td>
            <td><?php echo $row['cell_2']; ?></td>
        </tr>
<?php
}
?>
</table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T20:19:51.353

该文档几乎解释了它自己：[http ://www.php.net/manual/en/mysqli.construct.php](http://www.php.net/manual/en/mysqli.construct.php) [http://www.php.net/manual/en/mysqli.query.php](http://www.php.net/manual/en/mysqli.query.php)

```
$mysqli = new mysqli('localhost', 'my_user', 'my_password', 'my_db');

if ($mysqli->connect_error) {
    die('Connect Error (' . $mysqli->connect_errno . ') '
            . $mysqli->connect_error);
}

$result = $mysqli->query("SELECT 1;");
while(($row = $result->fetch_assoc()) != NULL) {
  //use rows
}
$mysqli->close(); 
```

# php - 您可以从脚本运行 PHPUnit 测试吗？

> ID：15302466
> 
> 赞同：11
> 
> 时间：2013-03-08T20:11:43.597
> 
> 标签：php, phpunit

我有一个 PHP 部署脚本，我想先运行 PHPUnit 测试，如果测试失败则停止。我已经在谷歌上搜索了很多，很难找到关于从 php 运行单元测试的文档，而不是从命令行工具。

对于最新版本的 PHPUnit，您可以执行以下操作：

```
$unit_tests = new PHPUnit('my_tests_dir');
$passed = $unit_tests->run(); 
```

最好是不需要我手动指定每个测试套件的解决方案。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-14T05:13:02.603

弄清楚了：

```
$phpunit = new PHPUnit_TextUI_TestRunner;

try {
    $test_results = $phpunit->dorun($phpunit->getTest(__DIR__, '', 'Test.php'));
} catch (PHPUnit_Framework_Exception $e) {
    print $e->getMessage() . "\n";
    die ("Unit tests failed.");
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-09T15:08:33.193

最简单的方法是实例化 PHPUnit_TextUI_Command 类的对象。

所以这里有一个例子：

```
require '/usr/share/php/PHPUnit/Autoload.php';

function dummy($input)
{
   return '';
}

//Prevent PHPUnit from outputing anything
ob_start('dummy');

//Run PHPUnit and log results to results.xml in junit format
$command = new PHPUnit_TextUI_Command;
$command->run(array('phpunit', '--log-junit', 'results.xml', 'PHPUnitTest.php'),
              true);

ob_end_clean(); 
```

这样，结果将以可以解析的 junit 格式记录在 results.xml 文件中。如果您需要不同的格式，您可以查看[文档](https://phpunit.de/manual/current/en/textui.html)。您还可以通过更改传递给 run 方法的数组来添加更多选项。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-03-22T11:00:01.173

使用 PHPUnit 7.5：

```
use PHPUnit\Framework\TestCase;
use PHPUnit\Framework\TestSuite;

$test = new TestSuite();
$test->addTestSuite(MyTest::class);
$result = $test->run(); 
```

$result 对象包含很多有用的数据：

```
$result->errors()
$result->failures
$result->wasSuccessful() 
```

ETC...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-02-19T20:59:16.210

PHP7 & phpunit ^7 解决方案

```
use PHPUnit\TextUI\Command;

$command = new Command();
$command->run(['phpunit', 'tests']); 
```

与 CLI 命令的效果相同：

```
vendor/bin/phpunit --bootstrap vendor/autoload.php tests 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-10-20T01:22:38.700

PHPUnit 似乎没有任何内置配置来防止它直接将其输出转储到响应中（至少从 PHPUnit 5.7 开始没有）。

所以，我曾经`ob_start`将输出分流到一个变量，并设置第三个参数`doRun`to`false`以防止 PHPUnit 停止脚本：

```
<?php

$suite = new PHPUnit_Framework_TestSuite();
$suite->addTestSuite('App\Tests\DatabaseTests');

// Shunt output of PHPUnit to a variable
ob_start();
$runner = new PHPUnit_TextUI_TestRunner;
$runner->doRun($suite, [], false);
$result = ob_get_clean();

// Print the output of PHPUnit wherever you want
print_r($result); 
```

# java - 在 Flextable 上设置小部件

> ID：15302467
> 
> 赞同：0
> 
> 时间：2013-03-08T20:11:47.477
> 
> 标签：java, gwt

我有这段代码，用于使用 FlexTable 在网格布局中呈现产品：

```
 @Override
        public void onSuccess(Map<Long, Product> mp) {
            int i = 0;
            int j = 0;

            GWT.log("Success list all products count="+mp.size());

            Iterator it = mp.entrySet().iterator(); 
            while (it.hasNext()) {
                Map.Entry pairs = (Map.Entry)it.next();

                Product product = (Product) pairs.getValue();
                ProductWidget pw = productInstance.get();
                pw.setTitle(product.getName());
                pw.setImageUrl(product.getImageUrl());
                pw.setContent(product.getInfo());

                flextable.setWidget(i, j, pw);
                i = j > 3 ? i : i++;
                j++;
                it.remove(); // avoids a ConcurrentModificationException
            }   

        } 
```

`Map`mp 返回`4`要呈现为小部件的产品，但仅`3`在 Flextable 上呈现，此代码可能有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T18:46:57.113

```
flextable.setWidget(i, j, pw);
i = j > 2 ? i++:i;
j = j > 2 ? 0 : j++; 
```

我想这会成功的。3 列和无限行。

# php - 查找两个 unix 时间戳之间的日期的问题

> ID：15302469
> 
> 赞同：1
> 
> 时间：2013-03-08T20:11:54.577
> 
> 标签：php, unix-timestamp, dst

我知道已经有很多问题和答案，但不幸的是我认为我的情况可能是独一无二的？出于某种原因，时间变化似乎使一天计算为比它应该计算的少一天。

这是我正在使用的 PHP，它工作得很好，直到它开始分别与夏令时之前和夏令时之后的开始日期和结束日期重叠（仅供参考，这是一个最近的问题，因为夏令时开始了这周末！）：

```
//$lastDate and $firstDate are 2 unix timestamps with valid month, day, and year values.
//The times are irrelevant at this point, they are only meant to represent a day.

//I start by making sure these have the same time values.
$lastDate = mktime(23, 59, 59, date("m", $lastDate), date("j", $lastDate), date("Y", $lastDate));
$firstDate = mktime(23, 59, 59, date("m", $firstDate), date("j", $firstDate), date("Y", $firstDate));

//Then calculate the total number of days in between.
$totalDays = abs(floor(($firstDate - $lastDate)/(60*60*24))); 
```

因此，再次明确地说，如果我不重叠夏令时更改，则上述工作...

以供参考：

[如何找到两个指定日期之间的日期？](https://stackoverflow.com/questions/2736784/how-to-find-the-dates-between-two-specified-date)

[PHP中两个unix时间戳之间的实际天数](https://stackoverflow.com/questions/9035589/actual-days-between-two-unix-timestamps-in-php)

[在php中查找2个unix时间戳之间的天数](https://stackoverflow.com/questions/4079814/finding-days-between-2-unix-timestamps-in-php)

而且，我现在还在使用 PHP 5.2。

**编辑/更新：**
我在这个链接上找到了以下内容：

[如何找到两个指定日期之间的日期？](https://stackoverflow.com/questions/2736784/how-to-find-the-dates-between-two-specified-date)

和

[如何计算php中2个unix时间戳之间的间隔而不除以86400（60 * 60 * 24）](https://stackoverflow.com/questions/3751712/how-to-calculate-the-the-interval-between-2-unix-timestamps-in-php-without-divid)

```
//$lastDate and $firstDate are 2 unix timestamps with valid month, day, and year values.
//The times are irrelevant at this point, they are only meant to represent a day.

//I start by making sure these have the same time values.
$lastDate = mktime(10, 00, 00, date("m", $lastDate), date("j", $lastDate), date("Y", $lastDate));
$firstDate = mktime(10, 00, 00, date("m", $firstDate), date("j", $firstDate), date("Y", $firstDate));

//Then calculate the total number of days in between. 
$totalDays = floor($firstDate / 86400) - floor($lastDate/ 86400); 
```

它现在似乎适用于 DST 的交叉。有人看到这有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T20:14:41.860

你在 PHP 5.3+ 上运行吗？A`DateInterval`非常适合这个问题。
[http://www.php.net/manual/en/datetime.diff.php](http://www.php.net/manual/en/datetime.diff.php)

```
<?php
$datetime1 = new DateTime('2009-10-11');
$datetime2 = new DateTime('2009-10-13');
$interval = $datetime1->diff($datetime2);
echo $interval->format('%R%a days'); 
```

# android - 验证后检索微调器的值

> ID：15302470
> 
> 赞同：0
> 
> 时间：2013-03-08T20:11:54.900
> 
> 标签：android, spinner, adapter

当我想验证我的插入时，我在检索微调器的值时遇到问题。

这是我如何填充我的微调器：

```
ArrayList<HashMap<String, String>> myArrayList;
myArrayList= new ArrayList<HashMap<String, String>>();
for (int i = 0; i < studentList.length(); i++) {
JSONObject c = studentList.getJSONObject(i);
String id = c.getString("id");
String name = c.getString("name");
HashMap<String, String> map = new HashMap<String, String>();
map.put("id", id);
map.put("name", name);
myArrayList.add(map);
} 
```

之后 ：

```
SpinnerAdapter studentAdapter = new SimpleAdapter(
MyActivity.this, myArrayList,
R.layout.student, new String[] { "id", "name"},
new int[] { R.id.id, R.id.name });
mySpinner.setAdapter(studentAdapter); 
```

当我单击“确定”按钮时，我得到微调器的值

```
mySpinner.getSelectedItem().toString(); 
```

我得到：

> {id=2，名称=史密斯}

但我敢肯定还有另一种方法**可以只检索名称**，但是如何？通过使用微调器获取适配器？是我的问题...

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T20:17:18.650

> 我确定还有另一种方法可以仅检索名称，但是如何？

您可以使用 OnItemSelectedListener 始终拥有用户当前的选择：

```
public void onItemSelected(AdapterView<?> parent, View view, int position, long id) {
    String name = ((TextView) view.findViewById(R.id.name)).getText().toString();
    // Do with name as you please
} 
```

或者您可以使用相同的技术，[`getSelectedView()`](https://developer.android.com/reference/android/widget/AbsSpinner.html#getSelectedView%28%29)仅在验证后获取名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T21:28:03.630

给你的对象`Spinner`是一个HashMap。将其转换为这样，然后以通常的方式提取值：

```
String studentName = ((HashMap)mySpinner.getSelectedItem()).get("name"); 
```

另一种选择：而不是使用`ArrayList<HashMap>`来填充您的`Spinner`，您可能想要使用它 `ArrayList<Student>`（假设`Student`您已经拥有一个可供您使用的类）。然后，您可以将当前选定的对象投射到`Student`并随意使用它：

```
String studentName = ((Student)mySpinner.getSelectedItem()).name; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-03T13:09:48.880

```
String data="{id=2, name=Smith}";//you retrieved 
String array[]=data.split("name=");//split in values of '**id=2,** ' and '**Smith**'
String name=array[array.length-1];  //take last value 
```

您将在名称变量中包含“Smith”。不喜欢，但如果别无选择，请使用它

# html - 导航的css精灵不起作用

> ID：15302472
> 
> 赞同：0
> 
> 时间：2013-03-08T20:12:00.997
> 
> 标签：html, css, image, sprite, css-sprites

我正在尝试在学校项目的 Dreamweaver 模板中使用 css sprite 进行导航，但图像没有显示出来。这是我的代码，现在我只处理主页按钮。我为每个按钮制作了单独的精灵。HTML：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Jordan's Website</title>
<link href="Styles/styles.css" rel="stylesheet" type="text/css" />
</head>

<body>

<div class="container">
  <div class="header"><a href="#"><img src="" alt="Insert Logo Here" name="Insert_logo" width="180" height="90" id="Insert_logo" style="background: #C6D580; display:block;" /></a> 
    <!-- end .header --></div>
  <div class="sidebar1">
    <ul class="nav">
      <li id="home"> <a href="#"></a></li>
      <li id="projects"><a href="#">Projects</a></li>
      <li id="tutorials"><a href="#">Tutorials</a></li>
      <li id="family"><a href="#">Family</a></li>
      <li id="hobbies"><a href="#">Hobbies</a></li>
      <li id="tennis"><a href="#">Tennis</a></li>
      <li id="yng"><a href="#">Youth and Gov</a></li>
      <li id="sources"><a href="#">Sources</a></li>
    </ul>
    <p>&nbsp;</p>
    <!-- end .sidebar1 --></div>
  <div class="content">
    <h1>Instructions</h1>
    <p>Be aware that the CSS for these layouts is heavily commented. If you do most of your work in Design view, have a peek at the code to get tips on working with the CSS for the fixed layouts. You can remove these comments before you launch your site. To learn more about the techniques used in these CSS Layouts, read this article at Adobe's Developer Center - <a href="http://www.adobe.com/go/adc_css_layouts">http://www.adobe.com/go/adc_css_layouts</a>.</p>
    <h2>&nbsp; </h2>
    <!-- end .content --></div>
  <div class="footer">
    <p>This .footer contains the declaration position:relative; to give Internet Explorer 6 hasLayout for the .footer and cause it to clear correctly. If you're not required to support IE6, you may remove it.</p>
    <!-- end .footer --></div>
  <!-- end .container --></div>
</body>
</html> 
```

CSS：

```
@charset "utf-8";
body {
    font: 100%/1.4 Verdana, Arial, Helvetica, sans-serif;
    background: #42413C;
    margin: 0;
    padding: 0;
    color: #000;
}

/* ~~ Element/tag selectors ~~ */
ul, ol, dl { /* Due to variations between browsers, it's best practices to zero padding and margin on lists. For consistency, you can either specify the amounts you want here, or on the list items (LI, DT, DD) they contain. Remember that what you do here will cascade to the .nav list unless you write a more specific selector. */
    padding: 0;
    margin: 0;
}
h1, h2, h3, h4, h5, h6, p {
    margin-top: 0;   /* removing the top margin gets around an issue where margins can escape from their containing div. The remaining bottom margin will hold it away from any elements that follow. */
    padding-right: 15px;
    padding-left: 15px; /* adding the padding to the sides of the elements within the divs, instead of the divs themselves, gets rid of any box model math. A nested div with side padding can also be used as an alternate method. */
}
a img { /* this selector removes the default blue border displayed in some browsers around an image when it is surrounded by a link */
    border: none;
}

/* ~~ Styling for your site's links must remain in this order - including the group of selectors that create the hover effect. ~~ */
a:link {
    color: #42413C;
    text-decoration: underline; /* unless you style your links to look extremely unique, it's best to provide underlines for quick visual identification */
}
a:visited {
    color: #6E6C64;
    text-decoration: underline;
}
a:hover, a:active, a:focus { /* this group of selectors will give a keyboard navigator the same hover experience as the person using a mouse. */
    text-decoration: none;
}

/* ~~this fixed width container surrounds the other divs~~ */
.container {
    width: 960px;
    background: #FFF;
    margin: 0 auto; /* the auto value on the sides, coupled with the width, centers the layout */
}

/* ~~ the header is not given a width. It will extend the full width of your layout. It contains an image placeholder that should be replaced with your own linked logo ~~ */
.header {
    background: #ADB96E;
}

/* ~~ These are the columns for the layout. ~~ 

1) Padding is only placed on the top and/or bottom of the divs. The elements within these divs have padding on their sides. This saves you from any "box model math". Keep in mind, if you add any side padding or border to the div itself, it will be added to the width you define to create the *total* width. You may also choose to remove the padding on the element in the div and place a second div within it with no width and the padding necessary for your design. You may also choose to remove the padding on the element in the div and place a second div within it with no width and the padding necessary for your design.

2) No margin has been given to the columns since they are all floated. If you must add margin, avoid placing it on the side you're floating toward (for example: a right margin on a div set to float right). Many times, padding can be used instead. For divs where this rule must be broken, you should add a "display:inline" declaration to the div's rule to tame a bug where some versions of Internet Explorer double the margin.

3) Since classes can be used multiple times in a document (and an element can also have multiple classes applied), the columns have been assigned class names instead of IDs. For example, two sidebar divs could be stacked if necessary. These can very easily be changed to IDs if that's your preference, as long as you'll only be using them once per document.

4) If you prefer your nav on the right instead of the left, simply float these columns the opposite direction (all right instead of all left) and they'll render in reverse order. There's no need to move the divs around in the HTML source.

*/
.sidebar1 {
    float: left;
    width: 180px;
    background: #EADCAE;
    padding-bottom: 10px;
}
.content {

    padding: 10px 0;
    width: 780px;
    float: left;
}

/* ~~ This grouped selector gives the lists in the .content area space ~~ */
.content ul, .content ol { 
    padding: 0 15px 15px 40px; /* this padding mirrors the right padding in the headings and paragraph rule above. Padding was placed on the bottom for space between other elements on the lists and on the left to create the indention. These may be adjusted as you wish. */
}

/* ~~ The navigation list styles (can be removed if you choose to use a premade flyout menu like Spry) ~~ */
ul.nav {
    list-style: none; /* this removes the list marker */
    border-top: 1px solid #666; /* this creates the top border for the links - all others are placed using a bottom border on the LI */
    margin-bottom: 15px; /* this creates the space between the navigation on the content below */
}
ul.nav li {
    border-bottom: 1px solid #666; /* this creates the button separation */
}
ul.nav a, ul.nav a:visited { /* grouping these selectors makes sure that your links retain their button look even after being visited */
    padding: 5px 5px 5px 15px;
    display: block; /* this gives the link block properties causing it to fill the whole LI containing it. This causes the entire area to react to a mouse click. */
    width: 160px;  /*this width makes the entire button clickable for IE6\. If you don't need to support IE6, it can be removed. Calculate the proper width by subtracting the padding on this link from the width of your sidebar container. */
    text-decoration: none;

}
#home li a{
       display: block;
       background: url(Assets/Images/homesprite.png) no-repeat;
       height: 20px;
       width: 155px;
       background-color:transparent;
}
#home:hover{
    background-position: 0 -20px;

}
/* ~~ The footer ~~ */
.footer {
    padding: 10px 0;
    background: #CCC49F;
    position: relative;/* this gives IE6 hasLayout to properly clear */
    clear: both; /* this clear property forces the .container to understand where the columns end and contain them */
}

/* ~~ miscellaneous float/clear classes ~~ */
.fltrt {  /* this class can be used to float an element right in your page. The floated element must precede the element it should be next to on the page. */
    float: right;
    margin-left: 8px;
}
.fltlft { /* this class can be used to float an element left in your page. The floated element must precede the element it should be next to on the page. */
    float: left;
    margin-right: 8px;
}
.clearfloat { /* this class can be placed on a <br /> or empty div as the final element following the last floated div (within the #container) if the #footer is removed or taken out of the #container */
    clear:both;
    height:0;
    font-size: 1px;
    line-height: 0px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T20:44:00.227

你的目标是错误的。您的 CSS 代码是`#home li a`.

你的 html 是`<li id="home"><a href="#"></a></li>`.

您需要像这样定位它，`#home a`因为`home`它是列表项。

这是向您展示的[jsfiddle](http://jsfiddle.net/V4E9G/3/)。

# jquery - jQuery根据复选框状态进行验证

> ID：15302482
> 
> 赞同：0
> 
> 时间：2013-03-08T20:12:45.163
> 
> 标签：jquery, jquery-validate

我在使用 jQuery validate.js 的表单中有三个字段：

```
<input type="text" id="StartDate" name="StartDate"><br />
<input type="text" id="EndDate" name="EndDate"><br />
<label for="AllDate"><input type="checkbox" name="AllDate" id="AllDate">All Dates</label> 
```

除非选中#AllDate，否则我需要在提交时要求#StartDate。如果选中#AllDate，则不需要#StartDate

失败的尝试：

```
rules: {
        StartDate: {
            required: {
                depends: function(element) {
                    return (! $("input[type='checkbox']:checked"))
                }
            }
        }
    } 
```

我也没有运气创建自定义验证规则。我正在寻找一种更好的方法，一种有效的方法！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T20:14:59.963

试试这个：

```
return !$("#AllDate").is(':checked'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T20:20:36.133

这是为您定制的

```
if(($("#AllDate").is(':checked')) == true ){
    //Do what you want when all dates are checked

} elseif (($("#StartDate").val()) != "") {
    //Do what you want with StartDate

} else {
    //You have to enter a date

} 
```

即时打字，看看这是否对你有帮助或给你一个基本的想法

# wcf-ria-services - 带有 SignalR 的 WCF RIA

> ID：15302484
> 
> 赞同：1
> 
> 时间：2013-03-08T20:12:54.740
> 
> 标签：wcf-ria-services, signalr

我正在寻找带有 SignalR 的 WCF RIA 示例程序。我有一个使用 WCF Ria 作为后端的 Silverlight 5 应用程序。

我们有一个要求，当用户将某些更改保存到屏幕时，连接到服务器的所有其他用户都应该收到通知。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T06:53:55.687

我为你找到[了这个](http://chris.59north.com/post/2011/12/15/SignalR-and-Silverlight.aspx)样本。有些陈述已经过时，因为 SignalR 在不断变化，但我相信这个示例可以帮助你。

您实际需要的是创建 SignalR 服务器端代码，该代码可以对通过 WCF RIA 所做的更改进行采样，因此您需要创建一些对数据的集中访问（如果您还没有），一旦您获得它，您只需要使用 Silverlight SignalR 客户端将其连接到推送机制。

# android - Android 在画布上绘制一个大位图，同时保持比例和填充屏幕居中

> ID：15302485
> 
> 赞同：1
> 
> 时间：2013-03-08T20:13:03.843
> 
> 标签：android, bitmapfactory

我正在加载要绘制的位图，但它距屏幕右侧约 25 像素。我不确定为什么会这样。

```
 scaleWallpaperBitmap(R.drawable.board2);
   canvas.drawBitmap(board, 0, topOffset, null);

   private void scaleWallpaperBitmap(int res) {
      // read bitmap in project
      BitmapFactory.Options options = new BitmapFactory.Options();
      options.inJustDecodeBounds = true;
      BitmapFactory.decodeResource(getResources(), res, options);
      int imgH = options.outHeight;
      int imgW = options.outWidth;

    // get new bitmap and find how to center it
    if (imgH == imgW) {
        // easy case of a square wallpaper
        if (screenH > screenW) {
            board = decodeSampledBitmapFromResource(getResources(), res,
                    screenW, screenW);
            verticalBitmapOffset = true;
            horizontalBitmapOffset = false;
            topOffset = (screenH - board.getHeight()) / 2;
        } else {
            board = decodeSampledBitmapFromResource(getResources(), res,
                    screenH, screenH);
            horizontalBitmapOffset = true;
            verticalBitmapOffset = false;
            leftOffset = (screenW - board.getWidth()) / 2;
        }
    } else {
        // ratio is now involved
    }
} 
```

其余方法来自此处的 android 文档...

[http://developer.android.com/training/displaying-bitmaps/load-bitmap.html](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)

图像几乎完全缩放并居中，垂直居中，但它不是应有的全屏宽度。右边距有大约 25 px 的可用空间。

任何反馈都会很棒！

谢谢

# wordpress - 循环播放 youtube 视频的 Fancybox

> ID：15302491
> 
> 赞同：1
> 
> 时间：2013-03-08T20:13:24.013
> 
> 标签：wordpress, loops, youtube, fancybox

在过去的几天里，这一直让我发疯，所以我想我会在这里问这个问题，有类似的帖子......但他们都没有解决这个问题。在此先感谢您的帮助！

这是我正在做的事情：

我有一个 wordpress 页面模板，它可以提取某种类型的帖子，这些帖子有一个自定义字段，其中包含一个 youtube 嵌入网址。当页面显示时，我希望用户能够单击缩略图以调出包含视频的幻想框。

这是问题所在：

循环中显示的第一个链接效果很好......但其他链接没有（他们进入全屏视频）。我认为这与 id 都是一样的有关。如果是这种情况，我不知道如何做到这一点。关于如何更改我可能想尝试的代码或替代方案的任何想法？

这是代码：

```
$("#video").click(function() {
    $.fancybox({
            'padding'       : 0,
            'autoScale'     : false,
            'transitionIn'  : 'none',
            'transitionOut' : 'none',
            'title'         : this.title,
            'width'     : 680,
            'height'        : 495,
            'href'          : this.href.replace(new RegExp("watch\\?v=", "i"), 'v/'),
            'type'          : 'swf',
            'swf'           : {
                 'wmode'        : 'transparent',
                'allowfullscreen'   : 'true'
            }
        });

    return false;
}); 
```

并且：

```
 <a id="video" title="<?php the_title();?>" href="<?php echo $lightbox;?>"><?php the_post_thumbnail( 'portfolio-post-thumbnail-xl' ); ?></a> 
```

再次感谢你的帮助！

# c# - 从一个中选择的 JQuery 自动完成组合框重新填充另一个

> ID：15302495
> 
> 赞同：0
> 
> 时间：2013-03-08T20:13:34.107
> 
> 标签：c#, jquery, asp.net, combobox, jquery-ui-autocomplete

我有一个 ASP.NET Web 应用程序，它使用 JQuery 自动完成来构建一个不错的动态组合框。页面上的一个框会触发一个更改事件，该事件会重新加载另一个框。基本上就像一个用户组/成员场景。我的更改事件触发并重新填充底层选择框，然后我对构建组合框的输入和按钮进行删除 - 到目前为止，这一切都很好。我的最后一行是在似乎没有触发的新重新填充的选择上调用组合框方法？标准选择显示新数据但没有 JQuery Goodness。任何帮助表示赞赏。谢谢。

变更事件：

```
function GetAnalysts() {

            $.ajax({
                type: "POST",
                url: "GetAnalystByGroup.ashx",
                data: 'group=' + $("#<%=supportGroup.ClientID%>" + " option:selected").text(),
                success: function (response) {
                    var analysts = eval(response);
                    $("#<%=assignedAnalyst.ClientID%>").children().remove();
                    $("#<%=assignedAnalyst.ClientID%>").append($('<option></option>').val('').html(firstoption));
                    for (var i = 0; i < analysts.length; i++) {
                        var text = analysts[i]['label'];
                        var val = analysts[i]['upn'];
                        $("#<%=assignedAnalyst.ClientID%>").append($('<option></option>').val(val).html(text));
                    }
                    //remove the JQ Combo then rebuild it
                    $("#<%=assignedAnalyst.ClientID%>JQ").remove();
                    $("#<%=assignedAnalyst.ClientID%>JQBut").remove();
                    $("#<%=assignedAnalyst.ClientID%>").show();
                    $("#<%=assignedAnalyst.ClientID%>").combobox();
                },
                error: function () {
                 }
            });
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T21:02:07.197

我最终通过将删除/显示行编码为 javascript 页面加载事件并将 AJAX 调用移动到更新面板中来解决该问题。

# javascript - 将此 jQuery 脚本用于多个 div

> ID：15302500
> 
> 赞同：2
> 
> 时间：2013-03-08T20:13:48.840
> 
> 标签：javascript, jquery, html, css

所以我对 jQuery 完全陌生，现在只是在修修补补，我现在正在使用一个测试脚本（如下）我想要实现的是让图像在单击时向下滑动 div 并提供更多信息 - 类似于新的谷歌图像效果。

下面脚本的问题是它在 div 打开时加载（我需要它在单击时打开），而且，这只适用于一个 div，我是否需要为多个 div 多次执行脚本？

```
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>

<script>
$(document).ready(function() {
     $('#clickme').click(function() {
          $('#me').animate({
               height: 'toggle'
               }, 500
          );
     });
});
</script>

<div id="clickme" style="background-color: #333333; color: #FFFFFF; padding: 10px; width: 200px; cursor:pointer;">
  Click here to toggle me in and out =)
</div>
<img id="me" src="http://www.randomsnippets.com/wp-content/uploads/2011/04/2.png" alt="It&#039;s me....ah!!!" title="Allen Liu" width="100" height="77" class="alignnone size-full wp-image-552" style="border: none;" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T20:17:24.837

首先，您不能对多个元素使用相同的 ID。相反，使用一个类。jQuery 只会选择第一次出现的 ID 而忽略其余的。

其次，您将需要为函数提供一些上下文 - 即`$(this).next()`- 这是因为当您有多个元素与`clickme`该类时，浏览器将知道它将必须选择***下一个***出现的具有类的元素`me`，而不是任何其他`.me`元素。

```
$(document).ready(function() {
    // Hide image onload
    $('.me').hide();

    // Provide context for each click event
    $('.clickme').click(function() {
         $(this).next('.me').animate({
              height: 'toggle'
              }, 500
         );
    });
}); 
```

HTML：

```
<div class="clickme" style="background-color: #333333; color: #FFFFFF; padding: 10px; width: 200px; cursor:pointer;">
  Click here to toggle me in and out =)
</div>
<img class="me" src="http://www.randomsnippets.com/wp-content/uploads/2011/04/2.png" alt="It&#039;s me....ah!!!" title="Allen Liu" width="100" height="77" class="alignnone size-full wp-image-552" style="border: none;" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T20:21:38.673

要从隐藏的 div 开始，您可以`display: none`使用内联样式或（最好）`<style>`元素或 CSS 文件将其设置为 。

然后你可以使用类和相对定位来实现你想要做的事情：

```
<script>
$(document).ready(function() {
     $('img.clickable').click(function() {
          $(this).prev('.image-info').first().animate({
               height: 'toggle'
               }, 500
          );
     });
});
</script>

<div style="background-color: #333333; color: #FFFFFF; 
      padding: 10px; width: 200px; cursor:pointer; display:none;" 
      class="image-info">
  Info about the image you clicked
</div>
<img src="http://www.randomsnippets.com/wp-content/uploads/2011/04/2.png" 
     alt="It&#039;s me....ah!!!" title="Allen Liu" width="100" height="77" 
   class="alignnone size-full wp-image-552 clickable" style="border: none;" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T20:17:55.073

执行上述评论者的建议，并将您的图像更改为基于类的方法。

其次，将此添加到`document.ready`块的开头

```
$('.me').hide(); 
```

[在这里提琴](http://jsfiddle.net/cBgMZ/1/)

# java - 马蒂斯的形式太“散开”了。如何全局缩小间距？

> ID：15302505
> 
> 赞同：0
> 
> 时间：2013-03-08T20:13:54.027
> 
> 标签：java, swing, layout, matisse

如何全局压缩 Matisse 生成的 GroupLayout 以及其他间隙间距，以使使用 Matisse 和 GroupLayout 生成的 Swing 对话框更紧凑？

我使用 Matisse 在 Java Swing 中重新实现了一些最初在 Visual Basic 的 GUI 构建器中为 Windows 开发的大型对话框。

Swing Windows L&F 中的结果与原生（一定年龄）非常相似，只是更“分散”。在较低的分辨率下，它们会从屏幕上泄漏。这对应用程序来说是一个真正的问题。

测量显示所有间隙按比例大于 Windows 默认值。（Swing 针对不同分辨率进行缩放的方式也无济于事。）这包括`ContainerGap`Matisse 发出的 s 和 L&F 控制的 GUI 组件之间的间隙。

我查看了`GroupLayout`我能找到的文档和马蒂斯文档。我查看`ContainerGap`了源代码中的 L&F 参数和相关类`GroupLayout`。没有什么能把我带到我需要去的地方。

所有洞察力都表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T21:07:38.117

有太多的方法可能是错误的，并且没有单点调整可以解决它。Visual Basic 版本在其单一目标平台上肯定看起来不错。在设计上，Swing 依赖于`pack()`，它“`Window`使它的大小适合其子组件的首选大小和布局”。首选尺寸可能因平台而异，如[嵌套布局示例所示](https://stackoverflow.com/a/5630271/230513)。[相反，应按照此处](https://stackoverflow.com/a/2561540/230513)的建议，研究可用的[布局](http://download.oracle.com/javase/tutorial/uiswing/layout/visual.html)并集中使用 GUI 设计器。

在不了解 Swing 布局的情况下，没有简单的方法可以解决 GUI 设计器中的布局问题；令人高兴的是，GUI 设计器是研究各种 Swing 布局效果的绝佳方式。

# iphone - 调度键盘时 UIPopoverController 的内容滑出视图

> ID：15302506
> 
> 赞同：0
> 
> 时间：2013-03-08T20:13:54.123
> 
> 标签：iphone, ios, ipad, uistoryboard, uistoryboardsegue

我有一个 iPad 应用程序，其登录屏幕如下所示（由于敏感信息，图像顶部被剪掉）： ![在此处输入图像描述](../Images/1703054577503d9da9f1320c0a19b427.png)

当用户点击“登录”按钮时，我会加载带有一些按钮的 UIPopoverController：

![在此处输入图像描述](../Images/2459043e79bf4fab600cedb1cf0c883a.png)

当用户点击“电子邮件”按钮时，我释放第一个弹出框并创建另一个带有两个文本字段的弹出框：

![在此处输入图像描述](../Images/a8f2f202676a353742add341d4ff98c5.png)

到目前为止看起来不错，但是当用户选择文本字段以输入文本时，两个 UITextField 控件都会滑出 PopoverController 的顶部，如下所示：

![在此处输入图像描述](../Images/7fcc4da929129a7c5969cc2180c43ed1.png)

我正在为这些弹出框控制器使用故事板/segues，并使用一些手工编码的东西来处理设备旋转。我正在使用 Autolayout 并且两个 UITextFields 都固定到 SuperView 顶部和前沿。就这些。

如果我将按钮向上移动到屏幕顶部（远离键盘），这种行为仍然存在。

是什么触发了这个，我在哪里可以覆盖它的行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T22:23:05.877

`-viewDidLoad`您是否在显示文本字段时为视图控制器设置了 ContentSizeForViewInPopover ？

```
[self setContentSizeForViewInPopover:CGSizeMake(200, 200)]; 
```

# google-apps-script - 字段和 FileUpload 的表单验证

> ID：15302510
> 
> 赞同：3
> 
> 时间：2013-03-08T20:14:07.240
> 
> 标签：google-apps-script, google-apps

我希望在具有文本输入和文件附件文件[上传的表单上进行验证/必填字段。](https://developers.google.com/apps-script/class_fileupload "谷歌文件上传类")

该脚本接受输入并允许用户附加文件。提交后，它将输入字段添加到电子表格并将文件上传到我的驱动器。我想要做的是强制回答文本输入和下拉列表并需要文件附件。

我找到了此链接以获取示例[“示例验证”](https://sites.google.com/site/appsscripttutorial/applications/contactus-form)，但在尝试将其添加到代码中的单击处理程序时遇到问题。任何人都可以帮助指出正确的方向吗？

```
// Script-as-app template.
var submissionSSKey = 'Insert SS Key';

function doGet(e) {
  var app = UiApp.createApplication().setTitle('Loan Registration Processing');
  var panel = app.createFormPanel();
  var grid = app.createGrid(10,2).setId('loanGrid');
  var loanTypeLabel = app.createLabel('Loan Type');
  var loanList = app.createListBox().setName('Loan List').setWidth('120px').setName('LoanType');
      loanList.addItem('Select Option');    
      loanList.addItem('FHA');
      loanList.addItem('Convential');  
      loanList.addItem('VA');
      loanList.addItem('Reverse');
      loanList.addItem('HELOC');
  var borrowerNameLabel = app.createLabel("Borrower's Name");
  var borrowerTextbox = app.createTextBox().setWidth('150px').setName('borrower');
  var loanAmountLabel = app.createLabel('Loan Amount');
  var loanAmountTextbox = app.createTextBox().setWidth('150px').setName('amount');
  var appDateLabel = app.createLabel('Loan Date');
  var appDateTextbox = app.createDateBox().setWidth('150px').setName('date');
  var lienPostition = app.createLabel('Lien Position');
  var lienPos = app.createListBox().setName('Lien Position').setWidth('150px').setName('LienPosition');
      lienPos.addItem('Select Option');     
      lienPos.addItem('1st');
      lienPos.addItem('2nd');
  var propertyType = app.createLabel('Property Type');
  var propType = app.createListBox().setName('Property Type').setWidth('150px').setName('PropertyType');
      propType.addItem('Select Option');
      propType.addItem('1-4 Units');
      propType.addItem('Manufactured');
  var submitButton = app.createSubmitButton('<B>Submit</B>'); 
  var warning = app.createHTML('<B>PLEASE WAIT WHILE DATA IS UPLOADING<B>').setStyleAttribute('background','yellow').setVisible(false)
  //file upload
  var upLoadTypeLabel = app.createLabel('Point File');
  var upLoad = (app.createFileUpload().setName('thefile'));
  var upLoadTypeLabel2 = app.createLabel('Credit Report');
  var upLoad2 = (app.createFileUpload().setName('thefile2'));

  //Grid layout of items on form
  grid.setWidget(0, 0, loanTypeLabel)
      .setWidget(0, 1, loanList)
      .setWidget(1, 0, borrowerNameLabel)
      .setWidget(1, 1, borrowerTextbox)
      .setWidget(2, 0, loanAmountLabel)
      .setWidget(2, 1, loanAmountTextbox)
      .setWidget(3, 0, appDateLabel)
      .setWidget(3, 1, appDateTextbox)
      .setWidget(4, 0, lienPostition)
      .setWidget(4, 1, lienPos)
      .setWidget(5, 0, propertyType)
      .setWidget(5, 1, propType)
      .setWidget(6, 0, upLoadTypeLabel)
      .setWidget(6, 1, upLoad)
      .setWidget(7, 0, upLoadTypeLabel2)
      .setWidget(7, 1, upLoad2)
      .setWidget(8, 0, submitButton)
      .setWidget(9, 1, warning)

  var cliHandler = app.createClientHandler().forTargets(warning).setVisible(true)
  submitButton.addClickHandler(cliHandler);  
  panel.add(grid);
  app.add(panel);
  return app;

}

 function doPost(e) {
  var app = UiApp.getActiveApplication();
  var LoanType = e.parameter.LoanType;
  var borrower = e.parameter.borrower;
  var amount = e.parameter.amount;
  var date = e.parameter.date;
  var LienPosition = e.parameter.LienPosition;
  var PropertyType = e.parameter.PropertyType;

   //Spreadsheet to load form values to
   var sheet = SpreadsheetApp.openById(submissionSSKey).getActiveSheet();
   var lastRow = sheet.getLastRow();
   var targetRange = sheet.getRange(lastRow+1, 1, 1, 6).setValues([[LoanType,borrower,amount,date,LienPosition,PropertyType]]);
   // data returned is a blob for FileUpload widget
   var fileBlob = e.parameter.thefile;
   var fileBlob2 = e.parameter.thefile2;
   //Grabs the folder to send upload files
   var folder = DocsList.getFolderById('0B8PHKnfhErK-T2IzRW9ZWjcwRmc');
   //Creates the upload file in root
   var doc = DocsList.createFile(fileBlob);
   var doc2 = DocsList.createFile(fileBlob2);
   //moves created files in root to specific folder
   doc.addToFolder(folder);
   doc2.addToFolder(folder);
   //Remove the copy left in the root, leaving only the version in the specific folder
   doc.removeFromFolder(DocsList.getRootFolder());       
   doc2.removeFromFolder(DocsList.getRootFolder());   
   //Message to user after submit of form

   var uplabel = app.createHTML('<B>Thank you for your Loan Registation Subumission. Press F5 on your keyboard to enter another Loan Registration.</B>');

//Send email to group
   var emailAddress = 'email@email.com';
   var folderURL = 'Folder URL';
   var ssURL = 'SS URL';

   var message = "<HTML><BODY>"
   + "<P>" + " A new Loan Registration has been submitted."
   + '<P>You can access the Loan Submitted documents <A HREF="' + folderURL + '">here</A>.'
   + '<P>You can access the submitted Loan Registration Spreadsheet <A HREF="' + ssURL + '">here</A>.'
   + "</HTML></BODY>";
   MailApp.sendEmail(emailAddress, "New Loan Registrtion Submittal Posted!", "", {htmlBody: message}); 
   app.add(uplabel);   
   return app;   
 } 
```

**编辑 - 在第二个文件上传和提交中添加不会启用**

我已经回去编辑了脚本并进行了一些修改，以基本上执行与以前相同的功能，但这个需要上传两个文件。我遵循相同的代码，但在测试提交按钮后将永远不会启用.. 这是更新的代码：

```
//Create the Labels, TextBoxes, and Drop downs
var borrowerTextbox = app.createTextBox().setWidth('150px').setName('borrower');
var Lender = app.createTextBox().setWidth('150px').setName('lender');
var correspondentBroker = app.createListBox().setName('Correspondent Broker').setWidth('120px').setName('correspondentbroker');
    correspondentBroker.addItem('Select Option');
    correspondentBroker.addItem('Correspondent');
    correspondentBroker.addItem('Broker');
var loanAmountTextbox = app.createTextBox().setWidth('150px').setName('amount');
var loanprogram = app.createTextBox().setWidth('150px').setName('program');
var rate = app.createTextBox().setWidth('150px').setName('rate');
var ysp = app.createTextBox().setWidth('150px').setName('ysp');
var closingcostcredit = app.createTextBox().setWidth('150px').setName('credit');
var ltv = app.createTextBox().setWidth('150px').setName('ltv');
var impound = app.createListBox().setName('impounds').setWidth('120px').setName('impounds');
    impound.addItem('Select Option');
    impound.addItem('Yes');
    impound.addItem('No');
var mortgageIns = app.createListBox().setName('Correspondent Broker').setWidth('120px').setName('mortgageinsurance');
    mortgageIns.addItem('Select Option');
    mortgageIns.addItem('MI');
    mortgageIns.addItem('PMI Borrower Paid');
    mortgageIns.addItem('PMI Lender Paid');
var upLoad = app.createFileUpload().setName('thefile');
var upLoad2 = app.createFileUpload().setName('thefile2');
var uploadtracker = app.createTextBox().setVisible(false);
var uploadtracker2 = app.createTextBox().setVisible(false);
var submitButton = app.createSubmitButton('<B>Submit</B>');  
var warning = app.createHTML('Please fill in all fields').setStyleAttribute('background','#FFcc99').setStyleAttribute('fontSize','20px');

//Click Handlers are set
var cliHandler2 = app.createClientHandler()
.validateLength(borrowerTextbox, 1, 40)
.validateLength(Lender, 1, 40)
.validateNotMatches(correspondentBroker,'Select Option')
.validateLength(loanAmountTextbox, 1, 40)
.validateLength(loanprogram, 1, 40)
.validateNotMatches(mortgageIns,'Select Option')
.validateLength(rate, 1, 40)
.validateLength(ysp, 1, 40)
.validateLength(closingcostcredit, 1, 40)
.validateLength(ltv, 1, 40)
.validateNotMatches(impound, 'Select Option')
.validateMatches(uploadtracker, 'selected')
.validateMatches(uploadtracker2, 'selected')
.forTargets(submitButton).setEnabled(true)
.forTargets(warning)
.setHTML('Now you can submit your form')
.setStyleAttribute('background','#99FF99')
.setStyleAttribute('fontSize','12px');

var cliHandler3 = app.createClientHandler().forTargets(uploadtracker).forTargets(uploadtracker2).setText('selected')

//Grid layout of items on form
grid.setText(0, 0, 'Borrower Name')
  .setWidget(0, 1, borrowerTextbox)
  .setText(1, 0, "Lender")
  .setWidget(1, 1, Lender)
  .setText(2, 0, 'Correspondent or Broker')
  .setWidget(2, 1, correspondentBroker)
  .setText(3, 0, 'Loan Amount')
  .setWidget(3, 1, loanAmountTextbox)
  .setText(4, 0, 'Loan Program')
  .setWidget(4, 1, loanprogram)  
  .setText(5, 0, 'Rate')
  .setWidget(5, 1, rate)  
  .setText(6, 0, 'YSP')
  .setWidget(6, 1,ysp)
  .setText(7, 0, 'Closing Cost Credit')
  .setWidget(7, 1, closingcostcredit)
  .setText(8, 0, 'LTV')
  .setWidget(8, 1, ltv)
  .setText(9, 0, 'Impounds')
  .setWidget(9, 1,impound)  
  .setText(10, 0, 'Point File')
  .setWidget(10, 1, upLoad.addChangeHandler(cliHandler3).addChangeHandler(cliHandler2))
  .setText(11, 0, 'Credit Report')
  .setWidget(11, 1, upLoad2.addChangeHandler(cliHandler3).addChangeHandler(cliHandler2))
  .setWidget(12, 0, submitButton)
  .setWidget(12, 1, warning)
  .setWidget(13, 0, uploadtracker)
  .setWidget(13, 1, uploadtracker2)
  .addClickHandler(cliHandler2);

var cliHandler = app.createClientHandler().forTargets(warning).setHTML('<B>PLEASE WAIT WHILE DATA IS BEING UPLOADED TO Google Drive<B>').setStyleAttribute('background','yellow');
submitButton.addClickHandler(cliHandler).setEnabled(false);

panel.add(grid);
app.add(panel);
return app;
} 
```

**编辑添加 CliHandler4** 我已经更新了代码以反映第四个 cliHandler 但我仍然无法激活提交按钮。不知道为什么它会失败..我已经看过好几次了，我似乎无法弄清楚出了什么问题..这是代码

**编辑作为答案：用户界面中缺少一个小部件（mortgageIns）**

```
 var submissionSSKey = 'ID GOES HERE';
    var Panelstyle = {'background':'#c0d6e4','padding':'100px','borderStyle':'ridge','borderWidth':'15PX','borderColor':'#31698a'}

function doGet(e) {
  var app = UiApp.createApplication().setTitle('PCH Mortgage Disclosure Request');
  app.add(app.createImage("http://www.pchmortgage.com/img/logo_thumbnail/6644.png"));
  var instructLabel = app.createHTML('<B><p> </p><p>Be sure to fill in each field completely prior to submitting the Disclsure Request</P></B>');
  app.add(instructLabel);

//Create the FormPanel and Grid for the application  
  var panel = app.createFormPanel().setStyleAttributes(Panelstyle).setPixelSize(450, 300);
  var grid = app.createGrid(15,2).setId('loanGrid');

//Create the Labels, TextBoxes, and Drop downs
    var borrowerTextbox = app.createTextBox().setWidth('150px').setName('borrower');
    var lender = app.createTextBox().setWidth('150px').setName('lender');
    var correspondentBroker = app.createListBox().setName('Correspondent Broker').setWidth('120px').setName('correspondentbroker');
    correspondentBroker.addItem('Select Option');
    correspondentBroker.addItem('Correspondent');
    correspondentBroker.addItem('Broker');
    var loanAmountTextbox = app.createTextBox().setWidth('150px').setName('amount');
    var loanprogram = app.createTextBox().setWidth('150px').setName('program');
    var rate = app.createTextBox().setWidth('150px').setName('rate');
    var ysp = app.createTextBox().setWidth('150px').setName('ysp');
    var closingcostcredit = app.createTextBox().setWidth('150px').setName('credit');
    var ltv = app.createTextBox().setWidth('150px').setName('ltv');
    var impound = app.createListBox().setName('impounds').setWidth('120px').setName('impounds');
    impound.addItem('Select Option');
    impound.addItem('Yes');
    impound.addItem('No');
    var mortgageIns = app.createListBox().setName('Correspondent Broker').setWidth('120px').setName('mortgageinsurance');
    mortgageIns.addItem('Select Option');
    mortgageIns.addItem('MI');
    mortgageIns.addItem('PMI Borrower Paid');
    mortgageIns.addItem('PMI Lender Paid');
    var upLoad = app.createFileUpload().setName('thefile');
    var upLoad2 = app.createFileUpload().setName('thefile2');
    var uploadtracker = app.createTextBox().setVisible(false);
    var uploadtracker2 = app.createTextBox().setVisible(false);
    var submitButton = app.createSubmitButton('<B>Submit</B>');  
    var warning = app.createHTML('Please fill in all fields').setStyleAttribute('background','#9999ff').setStyleAttribute('fontSize','20px');

//Click Handlers are set
  var cliHandler2 = app.createClientHandler().validateLength(borrowerTextbox, 1, 40).validateLength(lender, 1, 40)
  .validateNotMatches(correspondentBroker,'Select Option').validateLength(loanAmountTextbox, 1, 40).validateLength(loanprogram, 1, 40)
  .validateLength(rate, 1, 40).validateLength(ysp, 1, 40).validateLength(closingcostcredit, 1, 40)
  .validateLength(ltv, 1, 40).validateNotMatches(mortgageIns,'Select Option')
  .validateMatches(uploadtracker, 'selected').validateMatches(uploadtracker2, 'selected')
  .forTargets(submitButton).setEnabled(true).forTargets(warning).setHTML('Now you can submit your form')
  .setStyleAttribute('background','#99FF99').setStyleAttribute('fontSize','12px');

  var cliHandler3 = app.createClientHandler().forTargets(uploadtracker).setText('selected')
  var cliHandler4 = app.createClientHandler().forTargets(uploadtracker2).setText('selected')
  //Grid layout of items on form
  grid.setText(0, 0, 'Borrower Name')
  .setWidget(0, 1, borrowerTextbox)
  .setText(1, 0, "Lender")
  .setWidget(1, 1, lender)
  .setText(2, 0, 'Correspondent or Broker')
  .setWidget(2, 1, correspondentBroker)
  .setText(3, 0, 'Loan Amount')
  .setWidget(3, 1, loanAmountTextbox)
  .setText(4, 0, 'Loan Program')
  .setWidget(4, 1, loanprogram)  
  .setText(5, 0, 'Rate')
  .setWidget(5, 1, rate)  
  .setText(6, 0, 'YSP')
  .setWidget(6, 1,ysp)
  .setText(7, 0, 'Closing Cost Credit')
  .setWidget(7, 1, closingcostcredit)
  .setText(8, 0, 'LTV')
  .setWidget(8, 1, ltv)
  .setText(9, 0, 'Impounds')
  .setWidget(9, 1,impound)  
  .setText(10, 0, 'Mortgage Insurance')
  .setWidget(10, 1,mortgageIns)  
  .setText(11, 0, 'Point File')
  .setWidget(11, 1, upLoad.addChangeHandler(cliHandler3).addChangeHandler(cliHandler2))
  .setText(12, 0, 'Credit Report')
  .setWidget(12, 1, upLoad2.addChangeHandler(cliHandler4).addChangeHandler(cliHandler2))
  .setWidget(13, 0, submitButton)
  .setWidget(13, 1, warning)
  .setWidget(14, 0, uploadtracker)
  .setWidget(14, 1, uploadtracker2)
  .addClickHandler(cliHandler2);

  var cliHandler = app.createClientHandler().forTargets(warning).setHTML('<B>PLEASE WAIT WHILE DATA IS BEING UPLOADED TO GOOGLE DRIVE<B>').setStyleAttribute('background','yellow');
  submitButton.addClickHandler(cliHandler).setEnabled(false);

  panel.add(grid);
  app.add(panel);
  return app;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T20:56:13.633

一种简单的方法是使用另一个带有验证器的客户端处理程序。我建议像这样把它放在 fileUpload 上：（在同一个地方替换你的代码）

```
 var cliHandler2 = app.createClientHandler().validateLength(loanAmountTextbox, 1, 20)
  .validateLength(borrowerTextbox, 1, 20).validateLength(lienPos, 1, 20).forTargets(submitButton).setEnabled(true);// you can add more conditions here (widget name, minimum length, max length)

  var upLoad = app.createFileUpload().setName('thefile').addChangeHandler(cliHandler2); 
```

这个启用了提交按钮！你可以[在这里测试](https://script.google.com/macros/s/AKfycbxK43j2mKbOW-KJ3kHHuYGuTrtjyGXECuGeIp8FPrPPZHbe4tk/exec)

* * *

**编辑**

这是检查客户端处理程序上所有小部件的更复杂的选项....我复制了整个相关部分并更新了在线示例 - **EDIT3**：*DateBox 验证不起作用，这是我们必须解决的问题！*同时我在同一个处理程序上添加了一个新的消息处理

**编辑4：（**最后一个！）

我终于为每种小部件类型找到了一个可行的解决方案，日期必须包含一个“2”（我认为这在几年内都是如此；-) 我展示了整个 doGet 函数，因为我在这里和那里做了一些其他的更改。 .. 当 fileUpload 小部件填充到最后一个位置（不知道为什么）时效果最好，并且在某些情况下需要重新修改 textBow 以获得验证，但在大多数情况下它可以正常工作。

```
function doGet(e) {
  var app = UiApp.createApplication().setTitle('Loan Registration Processing');
  var panel = app.createFormPanel();
  var grid = app.createGrid(8,2).setId('loanGrid');
  var loanList = app.createListBox().setName('Loan List').setWidth('120px').setName('LoanType');
      loanList.addItem('Select Option');    
      loanList.addItem('FHA');
      loanList.addItem('Convential');  
      loanList.addItem('VA');
      loanList.addItem('Reverse');
      loanList.addItem('HELOC');
  var borrowerTextbox = app.createTextBox().setWidth('150px').setName('borrower');
  var loanAmountTextbox = app.createTextBox().setWidth('150px').setName('amount');
  var appDatebox = app.createDateBox().setWidth('150px').setName('date');
  var lienPos = app.createListBox().setName('Lien Position').setWidth('150px').setName('LienPosition');
      lienPos.addItem('Select Option');     
      lienPos.addItem('1st');
      lienPos.addItem('2nd');
  var propType = app.createListBox().setName('Property Type').setWidth('150px').setName('PropertyType');
      propType.addItem('Select Option');
      propType.addItem('1-4');
      propType.addItem('Manufactured');
  var submitButton = app.createSubmitButton('<B>Submit</B>'); 
  var warning = app.createHTML('Please fill in all fields').setStyleAttribute('background','#FFcc99').setStyleAttribute('fontSize','20px');
  //file upload
  var upLoad = app.createFileUpload().setName('thefile');
  var cliHandler2 = app.createClientHandler()
  .validateLength(borrowerTextbox, 1, 40).validateLength(loanAmountTextbox, 1, 40).validateNotMatches(loanList,'Select Option')
  .validateNotMatches(lienPos,'Select Option').validateNotMatches(propType, 'Select Option').validateMatches(appDatebox, '2','g')
  .validateNotMatches(upLoad, 'FileUpload').forTargets(submitButton).setEnabled(true).forTargets(warning)
  .setHTML('Now you can submit your form').setStyleAttribute('background','#99FF99').setStyleAttribute('fontSize','12px')

  //Grid layout of items on form
  grid.setText(0, 0, 'Loan Type')
      .setWidget(0, 1, loanList.addClickHandler(cliHandler2))
      .setText(1, 0, "Borrower's Name")
      .setWidget(1, 1, borrowerTextbox.addKeyUpHandler(cliHandler2))
      .setText(2, 0, 'Loan Amount')
      .setWidget(2, 1, loanAmountTextbox.addKeyUpHandler(cliHandler2))
      .setText(3, 0, 'Loan Date')
      .setWidget(3, 1, appDatebox)
      .setText(4, 0, 'Lien Position')
      .setWidget(4, 1, lienPos.addClickHandler(cliHandler2))
      .setText(5, 0, 'Property Type')
      .setWidget(5, 1, propType.addClickHandler(cliHandler2))
      .setText(6, 0, 'File Upload')
      .setWidget(6, 1, upLoad.addChangeHandler(cliHandler2))
      .setWidget(7, 0, submitButton)
      .setWidget(7, 1, warning);

  var cliHandler = app.createClientHandler().forTargets(warning).setHTML('<B>PLEASE WAIT WHILE DATA IS UPLOADING<B>').setStyleAttribute('background','yellow');
  submitButton.addClickHandler(cliHandler).setEnabled(false);  
  panel.add(grid);
  app.add(panel);
  return app;
} 
```

# d - D 中是否有元类或类引用？

> ID：15302514
> 
> 赞同：0
> 
> 时间：2013-03-08T20:14:11.387
> 
> 标签：d, metaclass, class-reference

D中是否有任何类引用系统？为了更准确，我寻找相当于德尔福

```
TMyClassRef = class of TMyClass; 
```

这将用于工厂（就像在`Object`但不使用类名）：

```
// ideally
void AddNew(*TBaseClass APtr, /*?class_ref_type?*/ AClassType)
{
    *APtr = new AClassType;
} 
```

目前我这样做：

```
void AddNew(*TBaseClass APtr)
{
    *APtr = new typeof(*APtr);
} 
```

但问题是它`typeof()`总是返回`TBaseClass`并且永远不会返回子类`TBaseClass`（当子类作为参数传递时）。这显然是在 Delphi 中使用类引用但 D 语言似乎没有这样的系统的情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T20:55:18.357

据我了解 Delphi 概念，D 没有以 Delphi 方式引用的类。如果您需要对对象构造做出运行时决定，[`object.TypeInfo`](http://dlang.org/phobos/object.html#.TypeInfo)可能会对您有所帮助。

您可以通过构造检索`TypeInfo`变量：`typeid`

```
import std.stdio;

class Base
{
    void f()
    {
        writeln("Base");
    }
}

class Descendant : Base
{
    override void f()
    {
        writeln("Descendant");
    }   
}

Base makeNew(Base other)
{
    // cast is needed because create() returns plain Object
    // we can be sure it is Base at least, though, because it was crated from Base
    return cast(Base)typeid(other).create();
}

void main()
{
    Descendant source = new Descendant;
    Base target = makeNew(source);
    // prints "Descendant"
    target.f();
} 
```

此代码示例是否与您想要的相似？

D 通常在运行时操作和编译时操作之间有非常明显的区别。`typeof`在编译时工作，因此在层次结构的情况下无法查询“真实”类类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T10:31:06.473

也许我完全错过了 Delphi 中的想法，但这似乎是模板的用途：

```
import std.stdio;

class Parent {
    string inherited() {
        return "Hello from parent";
    }

    override string toString() {
        return "Hello from parent";
    }
}

class Child : Parent {
    override string toString() {
        return "Hello from child";
    }
}

void add(C, P)(P* ptr) {
    *ptr = new C;
}

void main() {
    Parent t;
    writeln(t); // prints null

    add!Child(&t);
    writeln(t); // prints Hello from child
    writeln(t.inherited()); // prints Hello from parent
} 
```

通过这种方式，您传入要实例化的类型，而不是该类型的实例化对象。如果 C 不是 add() 中 P 的子代，这应该会产生编译错误。

**编辑：**

如果你想更具体地添加，你可以这样做：

```
void add(T : Parent)(Parent* ptr) {
    *ptr = new T;
} 
```

为了让事情变得更好，使用一个`out`更惯用的参数：

```
void add(T : Parent)(out Parent ptr) {
    ptr = new T;
}
void main() {
    Parent p;
    add!Child(p);
} 
```

# paypal - Paypal Classic API：测试帐户

> ID：15302516
> 
> 赞同：0
> 
> 时间：2013-03-08T20:14:25.117
> 
> 标签：paypal, paypal-sandbox, paypal-nvp

我需要在我的贝宝沙盒环境中模拟买家交易。本质上，买家是决定订阅我的服务的用户，这是使用 Paypal NVP API 方法完成的：DoDirectPayment。

阅读文档，我了解到在这种情况下，买家基本上是个人帐户，基本上要进行任何类型的 api 调用，我都需要 API 凭据。但是，PAYPAL 开发者网站没有显示此个人帐户的任何类型的 API 凭据：

![在此处输入图像描述](../Images/062d902c5294bd0adffdec8733d22069.png)

我确实有一个企业帐户，并且确实说明了相应的 API 凭据。我指的链接是： [https ://www.x.com/developers/paypal/documentation-tools/ug_sandbox#credentials](https://www.x.com/developers/paypal/documentation-tools/ug_sandbox#credentials)

其中声明为所有帐户指定了 API 凭据。

我背后的唯一理由是：

a) 个人账户没有获得 API 凭证，

b) 我需要使用我的企业帐户 API 凭据模拟 DoDirectPayment API，但文档指出，要模拟买家交易，我必须使用个人帐户。

c) 我需要以某种方式手动设置 API 凭据。

有什么线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T20:43:07.410

您将在 API 调用中使用您的业务帐户中的 API 凭证。至于买家，如果您使用 DoDirectPayment API，您将不会使用 PayPal 帐户付款。您将使用信用卡。您应该可以使用下面的任何卡号进行测试。我只是使用 Mod 10 检查来生成卡号。您可以使用任何有效的未来日期作为到期日期，并使用 123 作为卡安全码。

VISA 4539261585419872 45320635888063153 402400712571126 49161262622222225581496 491633352903290325503949296969326935757575757575757575757575757575757575757575757575757575757575757575757557575757575757575757575757575757557557557557557557557557575757575757575755太平洋

# css - 网页上的自定义字体被截断

> ID：15302517
> 
> 赞同：0
> 
> 时间：2013-03-08T20:14:25.350
> 
> 标签：css, fonts

这是一个显示我的问题的页面：

[http://coreyyoungcorp.com/font-issue/](http://coreyyoungcorp.com/font-issue/) ![在此处输入图像描述](../Images/0d48730c2216d451583493a488373263.png)

我不知道为什么它被切断了。这不是`line-height`问题，也不是字体大小问题，但我一生都无法弄清楚为什么会发生这种情况，只能使用这种字体“Oswald”。

有人有线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T20:24:54.747

这是Windows 上 Chrome 的 Oswald 字体和类似字体系列的一个[已知问题。](https://code.google.com/p/googlefontdirectory/issues/detail?id=152)

`font-weight`有时将属性更改为`normal`有效，但如果您使用粗体或浅色字体样式，则无法达到目的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T20:26:41.143

你`"Light"`和`"Bold"`字体是问题。看看[http://jsfiddle.net/FHCXf/1/](http://jsfiddle.net/FHCXf/1/)

# oracle - 可以更新一个简单的视图吗？

> ID：15302525
> 
> 赞同：0
> 
> 时间：2013-03-08T20:14:58.117
> 
> 标签：oracle, oracle11g, database-administration

我有一个关于观点的问题。简而言之，我必须通过视图更新字段。

A) 创建一个视图，显示每辆车的所有汽车字段和选项数据。确保所有汽车都会出现。

```
create view carview as
select c.serial, c.cname, c.make, c.model, c.cyear, c.color, c.trim,
c.enginetype, c.purchinv, c.purchdate, c.purchfrom, c.purchcost, c.freightcost,
c.listprice, o.ocode, o.odesc, o.ocost, o.olist
from car c
join baseoption b
on c.serial = b.serial
join options o
on b.ocode = o.ocode 
```

B) 让用户 C 访问视图，然后将视图的权限分配给用户 C 并让用户测试视图。仅查询部分字段。更新汽车的年份并在您的提交中包含响应。

```
GRANT ALL ON carview TO C; 
```

用户 C 可以访问视图并对其进行选择，但我不知道如何使用用户 C 更新视图。（如果可能的话）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T20:21:25.713

我个人不喜欢可更新的视图，但它们是可能的。您在视图上实现 INSTEAD OF 触发器：

[http://psoug.org/reference/instead_of_trigger.html](http://psoug.org/reference/instead_of_trigger.html)

您可以对其进行定制以仅允许特定类型的更新等：

```
CREATE OR REPLACE <TRIGGER NAME>
INSTEAD OF UPDATE
ON <VIEW>
FOR EACH ROW
BEGIN
    <UPDATE STATEMENT>; 
END <TRIGGER NAME>;
/ 
```

# ios - 转换为二进制 - long long 和 NSUInteger

> ID：15302532
> 
> 赞同：0
> 
> 时间：2013-03-08T20:15:26.570
> 
> 标签：ios, objective-c, cocoa, binary

我们需要将以下数据类型转换为二进制：

1.  长长转二进制
2.  NSUInteger 到二进制

对此的任何帮助将不胜感激。

我的代码是：

根据上面的链接，我们有

```
 - (NSString *) longlongToBinary:(long long) val {

long long num = val;
NSString *res = [NSString string];

for (long long i=63; i>=0; i--)
{

    long long div = 1l<<i;
    if ((num&div)==div) res = [res stringByAppendingString:@"1"];
    else res = [res stringByAppendingString:@"0"];
}

return res; 
```

}

如果 val 是 20，那么我得到的输出是：

> 00000000000000000000000000001010000000000000000000000000000010100

当我在在线转换器中看到它时，这是错误的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T20:17:23.297

`long`只有 32 位。由于该方法已命名`longlongToBinary`，因此将所有`long`变量更改为`long long`. 这将为您提供正在使用的 64 位。

现在您已将大多数变量更改为`long long`，将循环变量更改`i`回 an`int`并将`1l`常量更改为`1ll`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T20:26:20.817

文字`1l`仍然很长。这就是为什么您会看到两次输出。将文字更改为`1ll`

# mysql - MySQL 从选择查询中插入

> ID：15302535
> 
> 赞同：1
> 
> 时间：2013-03-08T20:15:40.250
> 
> 标签：mysql, insert

我有两张桌子：

表格1

```
| ColumnA  | ColumnB  |
-----------------------
| 123      | 1        | 
```

表2

```
| ColumnA  | ColumnC  |
-----------------------
| 123      | 20       | 
```

我更改了表 2 以添加一个新列，所以它看起来像这样

新表2

```
| ColumnA  | ColumnC  | ColumnB  |
----------------------------------
| 123      | 20       | NULL     | 
```

现在，我想选择的值`TABLE1.Column B`并将其插入`TABLE2.Column B`

所以我写了这个查询：

```
INSERT INTO TABLE2 (ColumnB)
SELECT t1.ColumnB
FROM TABLE1 AS t1
INNER JOIN
TABLE2 AS t2
ON t1.ColumnA = t2.ColumnA; 
```

但这似乎没有奏效。我错过了什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T20:17:38.180

您需要使用 UPDATE 语句来更新表。INSERT 将添加新行。

```
UPDATE Table2
JOIN Table1
ON
Table2.columnA = Table1.ColumnA
SET 
Table2.ColumnB = Table1.ColumnB
WHERE
Table2.ColumnB IS NULL 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-08T20:21:11.187

您似乎不想插入。看来您想更新 table2 中已有的行。您可以使用：

```
update table2 set ColumbB=(select ColumnB from table1 where table1.ColumnA=table2.ColumnA) 
```

# windows-phone - Windows 手机动态磁贴

> ID：15302540
> 
> 赞同：2
> 
> 时间：2013-03-08T20:16:05.607
> 
> 标签：windows-phone, live-tile

![瓦](../Images/af88cd190f9ecb59f9a7df4a2d6f86e5.png)

我想制作像图片一样的动态瓷砖。我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T23:54:27.880

上面创建的图块更可能是在服务器端创建的。话虽如此，windows phone 7.1 和 windows phone 8 之间发生了很大的变化。这里是windows phone 8 动态磁贴上更新信息 [的链接。](http://www.developer.nokia.com/Community/Wiki/Live_Tile_Templates_in_Windows_Phone_8)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T23:23:24.900

[此处](http://www.developer.nokia.com/Community/Wiki/Working_with_Live_Tiles_in_Windows_Phone_7)提供了一个很好的入门指南。您应该考虑的是，您在动态磁贴背景中看到的图像是动态生成的（例如在服务器上），然后通过预定义的通道返回到手机。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-07-14T15:32:50.860

在以前版本的 Windows 和 Windows Phone 上，使用动态磁贴仅限于一些预定义的模板。

当您看到更复杂的图块时，您可以打赌开发人员以编程方式生成了图像，然后将其应用于图块背景。

在 Windows 10 中，自适应磁贴带来了许多新的可能性。

```
...
<binding template="TileLarge" hint-textStacking="center">
  <group>
    <subgroup hint-weight="1"/>
    <subgroup hint-weight="2">
      <image src="Assets/Apps/Hipstame/hipster.jpg" hint-crop="circle"/>
    </subgroup>
    <subgroup hint-weight="1"/>
  </group>

  <text hint-style="title" hint-align="center">Hi,</text>
  <text hint-style="subtitleSubtle" hint-align="center">MasterHip</text>
</binding>
... 
```

[你可以在这里](http://blogs.msdn.com/b/tiles_and_toasts/archive/2015/06/30/adaptive-tile-templates-schema-and-documentation.aspx)找到完整的例子

对于以前的版本，您可以在[http://talkitbr.com/2015/05/25/live-tiles/找到示例](http://talkitbr.com/2015/05/25/live-tiles/)

# java - 从 Camel 路由强制 ActiveMQ 上的套接字超时？

> ID：15302549
> 
> 赞同：5
> 
> 时间：2013-03-08T20:16:45.233
> 
> 标签：java, sockets, timeout, activemq, apache-camel

所以下面我有骆驼（通过 Spring DSL）成功地将我的 bean 与 ActiveMQ 队列集成：

```
<!-- Note: this code is just a snippet; if you need to see more, please let me know! -->
<camelContext id="my-camel-context" xmlns="http://camel.apache.org/schema/spring">
    <route>
        <from uri="activemq-myinstance:queue:myqueue" />
        <onException>
            <exception>java.lang.Exception</exception>
            <redeliveryPolicy maximumRedeliveries="2" />
            <to uri="activemq-myinstance:queue_failures" />
        </onException>
        <to uri="bean:myBean?method=doCommand" />           
    </route>
</camelContext>

<bean id="jmsConnectionFactory-myqueue" class="org.apache.activemq.ActiveMQConnectionFactory">
    <property name="brokerURL" value="${activemq.instance.url}" />
</bean>

<bean id="pooledConnectionFactory-myqueue" class="org.apache.activemq.pool.PooledConnectionFactory">
    <property name="maxConnections" value="64" />
    <property name="maximumActive" value="${max.active.consumers}" />
    <property name="connectionFactory" ref="jmsConnectionFactory-myqueue" />
</bean>

<bean id="jmsConfig-myqueue" class="org.apache.camel.component.jms.JmsConfiguration">
    <property name="connectionFactory" ref="pooledConnectionFactory-myqueue"/>
    <property name="concurrentConsumers" value="${max.active.consumers}"/>
</bean>

<bean id="activemq-myqueue" class="org.apache.activemq.camel.component.ActiveMQComponent">
    <property name="configuration" ref="jmsConfig-myqueue"/> 
</bean> 
```

我想在 Camel 和 ActiveMQ 之间显式地强制执行 25 秒的**套接字超时**（on ）。`Socket.read()`因此，当 Camel 尝试将消息路由到 ActiveMQ 或从 ActiveMQ 路由消息时，如果 ActiveMQ 需要超过 25 秒才能完成该响应，我希望线程优雅地退出。显然，如果还可以设置某种故障转移（以便超时的请求可以在未来重播），这比仅仅丢失消息更可取！

我怎样才能做到这一点？提前致谢！

**更新**：如果 Camel/JMS/ActiveMQ 不支持这个开箱即用，我不介意编写自己的“ `ThreadManager`”，在 25 秒后中断/停止线程，但我不确定要实现哪些接口/类/extend，然后连接到我的 Spring bean。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T05:01:20.800

默认情况下，Camel activemq 请求在 20 秒后超时。

对于发送超时，org.apache.activemq.ActiveMQConnectionFactory 上有一个 sendTimeout 属性。还要检查 JMSConfiguraiton 的 requesttimeout 选项。

对于故障转移，您可以在代理 url 中设置故障转移传输。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T17:55:26.673

只需`timeout`在您的 brokerURL 上设置属性

```
failover:(tcp\://localhost\:61616)?timeout=25000 
```

这会将错误传播回您的生产者，以便您可以处理它而不是让它永远阻塞线程......

# cordova - Phonegap Cordova 2.3 清除inAppBrowser的内容

> ID：15302552
> 
> 赞同：1
> 
> 时间：2013-03-08T20:17:01.217
> 
> 标签：cordova, inappbrowser

有什么办法可以清除inAppBrowser的内容吗？每次弹出时，它都会显示它打开的最后一个内容的内容几秒钟，直到它完成加载我单击的 URL。我想做一些事情，比如在它退出时将它设置为空白，这样每次打开时它都有一个干净的状态。我正在使用科尔多瓦 2.3

# c++ - Dev-C++ 4.9.9.2 基本程序错误

> ID：15302556
> 
> 赞同：0
> 
> 时间：2013-03-08T20:17:14.967
> 
> 标签：c++

我正在制作这个程序，它需要我家人的名字并给出他们的星座。而且我遇到了一些困扰我的错误。随机名称仅用于“隐私”。是的，我只是一个初学者，我正在使用基本数组。

```
#include <iostream>
#include <cmath>
#include <string>

using namespace std;
int main() 
{
    string name;
    string hs[4];
    hs[0] = "Aquarius";
    hs[1] = "Cancer";
    hs[2] = "Leo";  
    hs[3] = "Taurus";  
    cin >> name;
    if name = "Harp"
    {
    cout << hs[0] << endl;
}
if name = "Herp"
{
        cout << hs[1] << endl;
        }
        if name = "Derp"
        {
        cout << hs[2] << endl;
        }
               if name = "Darp"
        {
                cout << hs[3] << endl;       
                }

    cout << "Press Enter To Exit This Program.";
    cin.get();
    return 0;
} 
```

我不断得到这个：预期的`（'在“名称”之前任何帮助都会很好。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T20:18:33.037

检查正确的`if`语法。- 失踪`(`和`)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T20:19:37.637

```
 if (name == "Harp") 
```

注意`(`and `)`，它们不是可选的。也使用`==`（不是`=`，它将右侧的值分配给左侧，这里名称将内容更改为“Harp”，然后将其转换为布尔值，...）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T20:22:09.417

更正的程序是这样的。注意 if 语句的正确语法

```
#include "stdafx.h"
#include <iostream>
#include <cmath>
#include <string>

using namespace std;
int main() 
{
    string name;
    string hs[4];
    hs[0] = "Aquarius";
    hs[1] = "Cancer";
    hs[2] = "Leo";  
    hs[3] = "Taurus";  
    cin >> name;
    if (name == "Harp")
    {
    cout << hs[0] << endl;
}
if (name == "Herp")
{
        cout << hs[1] << endl;
        }
        if (name == "Derp")
        {
        cout << hs[2] << endl;
        }
               if (name == "Darp")
        {
                cout << hs[3] << endl;       
                }

    cout << "Press Enter To Exit This Program.";
    cin.get();
    return 0;
} 
```

# asp.net - Asp.Net Mvc - 将事物存储在在 Application_Start 中重新初始化的静态变量中是否安全

> ID：15302566
> 
> 赞同：3
> 
> 时间：2013-03-08T20:17:53.027
> 
> 标签：asp.net, asp.net-mvc, appdomain

我有一些关于当前部署的一般非关键信息，这些信息收集在内部`Application_Start`并且当前存储在公共静态只读字符串中。

这只是一个小字符串，所以我不担心内存使用或任何事情。

从应用程序域回收的角度来看，这是否有效？是否会出现这样一种情况，即我的静态值中的值会简单地消失而不被重新初始化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T16:29:25.563

如果在填充变量之前发生异常并且异常被吞下，则字符串将为空。

# python - 错误地没有为 self.foo 设置值

> ID：15302569
> 
> 赞同：0
> 
> 时间：2013-03-08T20:17:55.917
> 
> 标签：python

我刚刚将脚趾浸入 Python 池中。我了解类和命名空间如何交互，`del`只是从范围中删除东西，以及所有这些好处。

我的问题很简单。我做了一个简单的“hello world”（Pygame）应用程序，但犯了一个严重错误（下面的简单案例）：

```
class Cat:
  __name = ""
  def __init__(self, newName):
    __name = newName
  def meow(self):
    print "Hi from {0}".format(self.__name)

c = Cat("Mittens")
c.meow(); # prints: "Hi from " 
```

事后看来，我的错误很明显：在我的方法（构造函数，特别是这里）中，我分配了一个值 to`__name`而不是 to `__self.name`（顺便说一下，它应该是损坏的和私有的）。

我什至了解它的工作原理和原因——它有点像 Java/C# 中的静态作用域。

我不明白的是如何避免这些棘手的错误。这很明显，很容易，而在我的情况下，结果是什么都没有——事情应该会奏效，但什么也没发生。

Python 开发者如何避免这个问题？似乎它会很常见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T20:21:48.327

在这种情况下，我肯定会避免添加`__name`到类命名空间。由于`__name`（应该是）由初始化程序（`__init__`）无条件地设置，因此没有必要设置类级别`__name`。

例如：

```
class Cat:
  def __init__(self, newName):
    __name = newName
  def meow(self):
    print "Hi from {0}".format(self.__name)

c = Cat("Mittens")
c.meow() # prints: "Hi from " 
```

现在运行代码，你会得到一个`AttributeError`有助于捕捉这些错误的代码。

换句话说，`__init__`在您的代码中的目的是设置`__name`正在初始化的新实例 ( `self`) via `self.__name = newName`。在您的代码中，您通过设置`__name`类来提供“安全网”。在 python 中，如果在实例上找不到属性，则在类中查找它。但是，在这种情况下，这个“安全网”实际上是一件坏事——您会得到与预期不同的行为，而不是可以用来帮助您追踪错误的异常。

* * *

作为旁注，实例上的属性访问的工作方式（排除有趣的事情，例如`__getattribute__`）是python首先在实例上查找属性，然后搜索类，然后按照类的方法解析顺序（其中新旧类不同）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T20:34:58.297

[pep8](https://pypi.python.org/pypi/pep8)、[pylint](http://www.logilab.org/857)、[pyflakes](https://pypi.python.org/pypi/pyflakes)和[flake8](https://pypi.python.org/pypi/flake8)等静态分析工具可以在一定程度上提供帮助。例如，`pyflakes`会抱怨您的代码（放在名为 的文件中`stack_overflow-2013-03-08.py`）：

```
$ pyflakes stack_overflow-2013-03-08.py
stack_overflow-2013-03-08.py:8: local variable '__name' is assigned to but never used 
```

但是没有什么比一组好的[测试](http://docs.python.org/2/library/unittest.html)更好的了。不用说，如果你有一个`Cat.meow`合理覆盖其功能范围的测试，你就会发现这个[问题](http://www.youtube.com/watch?v=mXPeLctgvQI)。

# git - 通过命令行自动在github上打开一个pull request

> ID：15302570
> 
> 赞同：14
> 
> 时间：2013-03-08T20:17:57.523
> 
> 标签：git, github, automation, fork, push

我正在使用 git 对协作项目进行版本控制。

我有两个遥控器。**fork**是一个**项目**的一个分支，而**origin**是原始项目。

那么，当我发送推送（git push fork master）时，我可以自动创建一个**原始**可用的拉取请求来合并它吗？

我不能直接承诺**原产地**（我知道这是可能的）。我需要先 push 来**分叉**，如果管理员批准，请在**origin**上接受。我想自动化这个过程，避免我手动去 github 并打开一个 fork。

我怎么能这样做？

**编辑：**

私人机构：

```
name: Org
repository: main
branch: master 
```

私人分叉：

```
name: OrgFork (A organization of mine with forks from **Org**) 
repository: main
branch: testing 
```

我尝试了以下方法，但还没有奏效：

```
curl -X POST -u <Username> -k -d '{"title": "<Title>","head": "Org:main","base": "testing"}' https://api.github.com/repos/Org/main/pulls 
```

怎么了？我怎样才能解决这个问题？

**编辑 2**

另一种尝试：

```
hub pull-request "Testing" -b OrgFork:main:testing -h OrgFork:main:master 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-09T07:04:21.600

你应该看看[`hub`](http://defunkt.io/hub/)，一个与 GitHub 交互的命令行工具。

[它的自述文件](https://github.com/defunkt/hub#git-pull-request)谈到了提出拉取请求。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-12T19:18:28.910

终于成功

第一个问题是我使用的是密钥密码而不是我的 github 密码。

使用这种结构：

私人机构：

```
name: Org
repository: main
branch: master 
```

私人分叉：

```
name: OrgFork (A organization of mine with forks from **Org**) 
repository: main
branch: testing 
```

另一个问题是我需要接受正确的参数，最终命令如下所示：

```
hub pull-request "Testing pull-request" -b Org:master -h OrgFork:testing 
```

谢谢@cjc343，@StevenPenny，@desert69 =)

# c# - 使用 ASP .NET 表单身份验证，如果一个新的身份验证 cookie 被盗，它是否可以在另一台 PC 上使用？

> ID：15302572
> 
> 赞同：3
> 
> 时间：2013-03-08T20:18:11.383
> 
> 标签：c#, asp.net, vb.net, security

如果攻击者将设置在 SetAuthCookie 调用中的身份验证 cookie 从受害者 PC 复制到他们的 PC，是否会认为攻击者已通过 Web 应用程序的身份验证？

```
public static void SetAuthCookie(
    string userName,
    bool createPersistentCookie
) 
```

使用标准表单身份验证 FormsAuthentication.SetAuthCookie 和参数 createPersistentCookie = false

假设这用于 Web 配置设置

```
<authentication mode="Forms">
    <forms name="MyWebApp" path="/" loginUrl="~/Default.aspx"
     timeout="30" defaultUrl="~/Default.aspx" protection="All"
     requireSSL="true" />       
</authentication> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T20:20:06.620

是的; ASP.Net 在身份验证 cookie 中不包含 IP 地址。（这甚至对共享 WiFi 或代理没有帮助）

但是，由于您拥有`requireSSL="true"`，攻击者（原则上）将无法获取该 cookie。（除非他们可以访问服务器或客户端，在这种情况下你会遇到更大的问题）

这就是为什么您应该始终使用 SSL。

# javascript - MongoDB 使用集合类型保存 - 另一种方式？

> ID：15302576
> 
> 赞同：0
> 
> 时间：2013-03-08T20:18:33.453
> 
> 标签：javascript, node.js, mongodb

第一次使用mongodb。我在服务器端使用 node.js 和 mongojs。有点困惑。db.save 的反转是 find，我希望能够做类似的事情：

```
 db.furni.find( db.furni_types.chair, db.furni_types.chair.plastic ); 
```

当前设置：

```
// Chair types
db.furni_types.save({ type: "chair", material: "wood" });
db.furni_types.save({ type: "chair", material: "plastic" });
db.furni_types.save({ type: "chair", material: "beanbag" });

// other furni types
db.furni_types.save({ type: "bed", material: "silk" });
db.furni_types.save({ type: "table", effect: "glass" });

db.furni.save({id: "13626450", name: "ComfyMan", type: "chair", material: "wood", description: "The most comfortable chair in extistence."}); 
```

几个问题：

我是以正确的方式解决这个问题还是什么？

如果我以后想将它们用作对象，在 db.furni.save(type: "chair", material: "wood") 中找到的数组是否足够？

如果我想做类似的事情怎么办：

```
 db.furni.save( name: "Super Comfort", db.furni_types.chair, db.furni_types.chair.wood ); 
```

上面的方法有用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T22:28:04.553

这绝对不是正确的方法……首先，它是一种关系数据库管理系统的思维方式，（关系数据库……）。其次，如果您希望能够执行以下操作：

```
db.furni.find( db.furni_types.chair, db.furni_types.chair.plastic ); 
```

那么它就是：

```
db.furni.find({type: "chair", material:"plastic"}); 
```

请注意，您传递给 find 的是一个对象，因此您不能只期望以逗号分隔格式从其他变量传递字符串或其他内容，更不用说认为您可以以这种方式引用您的类型模型（db.furni_types ！=数据库中数据的直接访问器，它是您必须“查找”的接口）。

因此，只需查看您发布的内容和我的建议，您还会看到，如果您必须在两者中都输入“椅子”，并且在两者中都输入“塑料”，那么您希望从您提出的方法中获得什么价值？

# paypal - 贝宝老程序员缺少旧沙箱

> ID：15302581
> 
> 赞同：0
> 
> 时间：2013-03-08T20:18:54.370
> 
> 标签：paypal, sandbox

我有停止工作的旧沙盒业务和个人帐户。我必须回去测试我两年前开发的网站。我在新网站上看到了导入这些帐户的参考，但每个链接似乎都在循环。我当然没有时间重写我所有客户的 api，即使他们会付钱让我进入测试模式。有人可以建议我如何恢复这些帐户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T20:44:48.517

目前正在解决一些问题以解决此问题。作为一种解决方法，如果您使用的是 IE，请尝试使用 FireFox 或 Chrome。在打开浏览器之前清除您的 cookie 和 chache。然后访问 developer.paypal.com 并使用您的实时 PayPal 帐户电子邮件地址登录。然后尝试导入您的帐户。与其他浏览器相比，IE 存在更多问题。

# html - 如何使用 css 摆脱最后一个 tr td 底部边框？

> ID：15302583
> 
> 赞同：0
> 
> 时间：2013-03-08T20:19:00.060
> 
> 标签：html, css

我需要你的帮助，

如何使用 CSS 摆脱最后一个表格行的底部边框？我在 HTML 页面上使用了颜色编码来识别哪个边框属于什么。我可以看到底部边框需要删除，因为它与我的容器边框冲突：

```
<!DOCTYPE html>
<html>
<head>

<style>

/* ----- Scrolling Table ----- */
.dataGridHeader {
position:relative;
padding-top:24px;
_padding-top:23px;

width:895px;

border-left: 1px solid red;
border-bottom: 1px solid orange;
}

.dataGridContent {
overflow:auto;
width:915px;
height:144px;
}

.dataGridHeader thead tr {
width:915px;
position:absolute;
top:0;
left:0;
}

.dataGridHeader table thead tr th, .dataGridHeader table tbody tr td { 
text-align:left;
height:0;
}

table.scrolltablestyle {
border-top: 1px solid #D9D9D9;
}

table.scrolltablestyle tbody tr td{
    background: #fff;
    text-align:left;
    padding: 4px 9px;
    border-bottom: 1px solid #999;
    border-right: 1px solid blue;
}
table.scrolltablestyle thead tr th{
background-color: #FFFFD9;
font-weight: normal;
text-align:left;
padding: 4px 9px 4px 9px;
border-bottom: 1px solid #999999;
}

table.scrolltablestyle thead tr th {
    border-right: 1px solid blue;
    border-top: 1px solid blue;
}

table.scrolltablestyle tbody tr td{
    border-right: 1px solid green;
}

</style>

</head>
<body>

<div class="dataGridHeader">
  <div class="dataGridContent">
    <table cellpadding="0" cellspacing="0" class="scrolltablestyle style-even">
      <thead>
        <tr>
          <th width="160">Shopper Name</th>
          <th width="160">First Name</th>
          <th width="160">Last Name</th>
          <th width="160">User ID</th>
          <th width="160">Status</th>
        </tr>
      </thead>
      <tbody>
  <tr>
    <td width="160">C2C Fishing</td>
    <td width="160">John</td>
    <td width="160">Doe</td>
    <td width="160">C2C Fishing</td>
    <td width="160">Enabled</td>
  </tr>
  <tr>
    <td width="160">C2C Fishing</td>
    <td width="160">John</td>
    <td width="160">Doe</td>
    <td width="160">C2C Fishing</td>
    <td width="160">Enabled</td>
  </tr>
    <tr>
    <td width="160">C2C Fishing</td>
    <td width="160">John</td>
    <td width="160">Doe</td>
    <td width="160">C2C Fishing</td>
    <td width="160">Enabled</td>
  </tr>
    <tr>
    <td width="160">C2C Fishing</td>
    <td width="160">John</td>
    <td width="160">Doe</td>
    <td width="160">C2C Fishing</td>
    <td width="160">Enabled</td>
  </tr>
    <tr>
    <td width="160">C2C Fishing</td>
    <td width="160">John</td>
    <td width="160">Doe</td>
    <td width="160">C2C Fishing</td>
    <td width="160">Enabled</td>
  </tr>
    <tr>
    <td width="160">C2C Fishing</td>
    <td width="160">John</td>
    <td width="160">Doe</td>
    <td width="160">C2C Fishing</td>
    <td width="160">Enabled</td>
  </tr>
    <tr>
    <td width="160">C2C Fishing</td>
    <td width="160">John</td>
    <td width="160">Doe</td>
    <td width="160">C2C Fishing</td>
    <td width="160">Enabled</td>
  </tr>
    <tr>
    <td width="160">C2C Fishing</td>
    <td width="160">John</td>
    <td width="160">Doe</td>
    <td width="160">C2C Fishing</td>
    <td width="160">Enabled</td>
  </tr>

      </tbody>
    </table>
  </div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T20:25:39.417

就用这个

```
table.scrolltablestyle tr:last-child td
{
border-bottom:none;
} 
```

或者你可以像这样设置

```
table.scrolltablestyle tr:last-child td
{
border-bottom:0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T20:25:07.840

删除此行-：

```
 border-bottom: 1px solid orange; 
```

# android - 在其他项目中使用 JavaCameraView

> ID：15302584
> 
> 赞同：-1
> 
> 时间：2013-03-08T20:19:01.590
> 
> 标签：android, android-layout, opencv, android-camera

我的问题很简单，我正在尝试从另一个项目的活动中启动 ColorBlobDetectionActivity（来自 OpenCV 示例 - color-blob-detection），到目前为止，我所做的只是：

*   将文件 ColorBlobDetectionActivity.java 和 ColorBlobDetector.java 复制到我的新项目中
*   添加 opencv 库 - 2.4.3.jar 作为引用库（到目前为止一切都正确构建，eclipse 未检测到错误）

当我从另一个活动中的按钮启动 ColorBlobDetectionActivity 时，问题就开始了（意图工作正常，但活动没有启动，手机说不幸的是 XXX 已停止）。我在 color_blob_detection_surface_view.xml 中收到有关 JavaCameraView 的错误（其中是我尝试启动的活动所引用的视图）：

```
 The following classes could not be instantiated:
    - org.opencv.android.JavaCameraView (Open Class, Show Error Log)
    See the Error Log (Window > Show View) for more details.
    Tip: Use View.isInEditMode() in your custom views to skip code when shown in Eclipse 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T21:34:51.607

您应该确保 jar 文件正确包含在项目中。检查项目属性，java> 构建路径。

还要确保此 jar 文件位于项目的**libs**文件夹中。如果它不在构建路径中，请右键单击它，> 添加到构建路径。

# c++ - HoughCircles OpenCV

> ID：15302587
> 
> 赞同：2
> 
> 时间：2013-03-08T20:19:23.163
> 
> 标签：c++, visual-studio-2008, opencv

我正在编写用于在 OpenCV 中检测具有 HSV 颜色空间的蓝色圆形对象的代码，程序还可以在对象的帮助下移动鼠标指针。我在我的代码中实现了 HoughCircles 函数，但它没有执行。这是代码：

```
 #include "cv.h"
 #include "highgui.h"
 #include <iostream>
 #include <windows.h>

using namespace cv;
using namespace std;

int main()
{

VideoCapture cap(0);
if(!cap.isOpened()) return -1;

Mat vd,copy,imgScribble;
namedWindow("Video",1);
namedWindow("Capture",1);
int width = GetSystemMetrics(SM_CXSCREEN);
int height = GetSystemMetrics(SM_CYSCREEN);
int ww = cap.get(CV_CAP_PROP_FRAME_WIDTH);
int wh = cap.get(CV_CAP_PROP_FRAME_HEIGHT);
double adjw = width/ww;
double adjh = height/wh;
int h = 640 * adjh;
int w = 320 * adjw;

for(;;)
{   
    cap>>vd;

    GaussianBlur( vd, vd, Size(9, 9), 2, 2 );

    cvtColor(vd,copy,CV_RGB2HSV);
    Mat thresh;

    inRange(copy,Scalar(0,200,0),Scalar(13,255, 255),thresh);
    flip(thresh,thresh,1);
    Moments mom = moments(thresh);
    double moment10 = mom.m10;
    double moment01 = mom.m01;
    double area = mom.m00;
    static int posX = 0;
    static int posY = 0;

    int lastX = posX;
    int lastY = posY;

    posX = moment10/area;
    posY = moment01/area;
    h = posX * 2.134375;
    w = posY * 2.4;
    vector<Vec3f> circles;
    HoughCircles(vd,circles,CV_HOUGH_GRADIENT,2,vd.rows/4,100,100,0,0);
    if(area >= 1000)
    {
    SetCursorPos(h,w);
    }

    cout<<height<<"x"<<width<<endl;
    cout<<h<<"xx"<<w<<endl;

    imshow("Capture",vd);   
    imshow("Video",thresh);

    if(waitKey(30) >= 0) 
    break;
}
cap.release();
return 0;
 } 
```

请帮我找到 HoughCircles 的解决方案？提前致谢。

# api - 我是否可以在以下情况下使用 last.fm API？

> ID：15302592
> 
> 赞同：0
> 
> 时间：2013-03-08T20:19:39.647
> 
> 标签：api, last.fm

我正在构建一个使用 last.fm API 的应用程序。我希望我的服务器与 last.fm 通信，并且我的应用程序的用户将与服务器通信。所以用户是在与 last.fm 进行间接通信。我这样做是为了通过在我的服务器上缓存一些数据来加速整个通信。

这个可以吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T14:56:31.253

只要你遵循他们的[TOS](http://www.last.fm/api/tos)就可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-23T10:23:12.093

是的，这没关系。许多其他服务都这样做。

如果你仔细想想，任何应用程序采取的任何行动都是间接的。不要求代表用户的应用程序与用户在同一台​​计算机上运行。应用程序通常在 Web 服务器上运行。

执行此操作的一些应用示例包括[http://tweekly.fm/](http://tweekly.fm/)和[http://hypem.com/](http://hypem.com/)。

为了让服务代表用户行事（对于某些方法，例如 scrobbling），您必须将您的应用程序授权为用户，这可以使用[http://www.last.fm中描述的 web auth 流程来实现/api/webauth](http://www.last.fm/api/webauth)。

（这是将用户定向到 Last.fm 上的页面以确认他们授权您的应用程序的流程之一。您的应用程序会收到一个会话密钥作为回报，它允许您的应用程序代表用户执行操作）。

# c# - 如何在asp.net中刷新图像？

> ID：15302594
> 
> 赞同：0
> 
> 时间：2013-03-08T20:19:40.417
> 
> 标签：c#, asp.net

我正在尝试制作一个基于 ASP.Net 的网站。我不知道如何刷新图像。我正在尝试建立一个指向 IP 摄像机的网站链接。我知道摄像头的来源，也有IP摄像头的授权。有没有人有任何想法这样做？

谢谢吉米

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T20:40:26.260

您可以使用 simple`javascript`在页面上刷新它。

假设您的相机更新相同的图像名称`imagefromcamera.jpg`。然后用简单的 html 或 asp 图像控件在页面上显示它，然后用 javascript 将其更新为：

```
<img id="LiveImg" width="320" height="320" alt="" src="imagefromcamera.jpg?" /> 
<script>
var myImg = document.getElementById("LiveImg");
if (myImg){
    window.setInterval(function(){
          myImg.src = myImg.src.replace(/\?.*$/, '?' + Math.random());
        }, 3000);
}        
</script> 
```

在图像末尾添加这个随机数，我们确保它不会保留在浏览器的缓存中。这里的计时器需要每隔几秒更新一次，假设这里是 3 秒。

现在，如果您的相机名称不同，您可以使用相同的想法并加载它们。如果您有其他方法可以从相机中获取图像，则可以使用处理程序来发送图像。这是一个类似的例子。我做了一个处理程序名称`captureimage.ashx`，在 javascript 端使用相同的代码：

```
<img id="LiveImg" width="320" height="320" alt="" src="captureimage.ashx?" /> 
<script>
var myImg = document.getElementById("LiveImg");
if (myImg){
    window.setInterval(function(){
          myImg.src = myImg.src.replace(/\?.*$/, '?' + Math.random());
        }, 3000);
}
</script> 
```

在服务器端，处理程序可以是：

```
public class ReadTheCameraImage : IHttpHandler 
{
     public void ProcessRequest (HttpContext context) 
    {
        context.Response.ContentType = "image/jpeg";
        context.Response.Buffer = false;
        // read the ImageData from what ever source you have
        context.Response.OutputStream.Write(ImageData, 0, ImageData.Length);        
    }

    public bool IsReusable 
    {
        get {
            return false;
        }
    }
} 
```

在这里我想说，这不是实时视频的解决方案，而只是将网络摄像头的捕获显示到页面上，例如在互联网上制作实时网络摄像头来显示某些地方。对于实时视频和实时通信，您需要更复杂的代码，以及将 Adob​​e Flash 播放器与服务器流、与每个连接的客户端直接连接以及其他东西一起使用。

视频的其他一些答案，如果您的相机软件支持直接视频流： [如何在 ASP.NET 中处理视频？](https://stackoverflow.com/questions/3992346/how-to-work-with-videos-in-asp-net/4010503#4010503)
[如何在网络浏览器中播放音频和视频文件？](https://stackoverflow.com/questions/10648471/how-to-play-audio-and-video-files-in-web-browser/10648724#10648724)
[如何在图像点击上播放 vimeo 播放器？](https://stackoverflow.com/questions/9224055/how-can-i-play-vimeo-player-on-image-click/9224219#9224219)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T20:40:36.633

您会发现这篇文章对[UpdatePanel Refresh](http://encosia.com/easily-refresh-an-updatepanel-using-javascript/)很有帮助。如果您不关心回发的闪烁，您还可以在 java-script 中创建一个计时器，并为每个滴答调用 __doPostBack('',''); 您还可以创建一个可以使用 jQuery 调用的 WebMethod 并以这种方式更新您的图像。

# java - 使用 JTextArea 时，MigLayout 会导致 JOption 窗格中出现异常。FlowLayout 很好

> ID：15302595
> 
> 赞同：2
> 
> 时间：2013-03-08T20:19:46.440
> 
> 标签：java, swing, joptionpane, miglayout

下面的示例程序显示了一个带有两个按钮的框架。按下使用的第二个按钮`MigLayout`会导致异常。使用的第一个按钮`FlowLayout`工作得很好。似乎是一个错误`MigLayout`？

```
import java.awt.FlowLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JDialog;
import javax.swing.JFrame;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.JTextArea;
import javax.swing.SwingUtilities;

import net.miginfocom.swing.MigLayout;

public class Main extends JPanel {

static private JFrame frame = new JFrame("Test MigLayout");

public Main() {
    JButton flowLayoutButton = new JButton("FlowLayout");
    JButton miglayoutButton = new JButton("MigLayout");
    add(flowLayoutButton);
    add(miglayoutButton);
    flowLayoutButton.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent actionEventIn) {
            showDialog(false);
        }
    });
    miglayoutButton.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent actionEventIn) {
            showDialog(true);
        }
    });
}

public static void main(String[] args) {
    Main main = new Main();
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setContentPane(main);
    SwingUtilities.invokeLater(new Runnable() {
        @Override
        public void run() {
            frame.pack();
            frame.setVisible(true);
            frame.setBounds(200, 200, 200, 200);
        }
    });
}
private void showDialog(boolean useMidgLayoutIn) {
    JPanel panel = new JPanel(useMidgLayoutIn ? new MigLayout() : new FlowLayout());
    JTextArea topTextArea = new JTextArea("Here is some junk text to fill up the Text Area.");
    panel.add(topTextArea);
    panel.add(new JButton("Button"));

    JOptionPane optionPane = new JOptionPane(panel, JOptionPane.ERROR_MESSAGE);
    JDialog dialog = optionPane.createDialog(frame, "Application  Error");
    dialog.setResizable(true);
    dialog.pack();
    dialog.setVisible(true);
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T16:44:06.560

NPE 的原因是一些与 JTextArea/JEditorPane 相关的 mig 内部魔法（详情如下）。这可能会导致嵌套容器出现问题，某些父级具有保持内部状态的管理器，即 BoxLayout 中的 fi。

最简单的出路：不要嵌套 - MigLayout 旨在控制一个大面板。在添加到像 optionPane 这样的预制特殊情况容器的情况下，这不是一个选项：这里它有助于将 textArea/editorPane 包装在 JScrollPane 中。

不完全确定这是否是一个错误，尽管仅在 getter (preferredLayouutSize) 中向上操作容器层次结构看起来很可疑。

NPE 发生原因的详细信息：magic 的效果是强制父容器布局查询 prefSize：

```
public Dimension preferredLayoutSize(Container parent) {
    synchronized (parent.getTreeLock()) {
        if (lastParentSize == null
                || !parent.getSize().equals(lastParentSize)) {
            for (ComponentWrapper wrapper : ccMap.keySet()) {
                Component c = (Component) wrapper.getComponent();
                if (c instanceof JTextArea
                        || c instanceof JEditorPane
                        || (c instanceof JComponent && Boolean.TRUE
                                .equals(((JComponent) c)
                                        .getClientProperty("migLayout.dynamicAspectRatio")))) {
                    layoutContainer(parent);
                    break;
                }
            }
        }

        lastParentSize = parent.getSize();
        return getSizeImpl(parent, LayoutUtil.PREF);
    }
} 
```

进而重新查询顶级容器的 prefSize（在 adjustWindowSize 中向下）：

```
private void adjustWindowSize(ContainerWrapper parent) {
    BoundSize wBounds = lc.getPackWidth();
    BoundSize hBounds = lc.getPackHeight();

    if (wBounds == null && hBounds == null)
        return;

    Window win = ((Window) SwingUtilities.getAncestorOfClass(Window.class,
            (Component) parent.getComponent()));
    if (win == null)
        return;

    Dimension prefSize = win.getPreferredSize();
    ....
} 
```

当嵌套在 BoxLayout 中时，这会导致重新输入 checkTarget：

```
public Dimension preferredLayoutSize(Container target) {
    Dimension size;
    synchronized(this) {
        checkContainer(target);
        // checkRequests initializes all internal book-keeping
        checkRequests();
        // here's the NPE in the second round
        size = new Dimension(xTotal.preferred, yTotal.preferred);
    }
    ...
 }

void checkRequests() {
    // config only if not yet done earlier
    if (xChildren == null || yChildren == null) {
        // The requests have been invalidated... recalculate
        // the request information.
        int n = target.getComponentCount();
        //JW: first time around the arrays of sz are initialized
        xChildren = new SizeRequirements[n];
        yChildren = new SizeRequirements[n];
        for (int i = 0; i < n; i++) {
            Component c = target.getComponent(i);
            ....
            Dimension min = c.getMinimumSize();
            Dimension typ = c.getPreferredSize();
            ....
        }
        .... 
        // JW: never reached if c.getPref re-enters, that is xTotal remains null
        if (absoluteAxis == X_AXIS) {
            xTotal = SizeRequirements.getTiledSizeRequirements(xChildren);
            yTotal = SizeRequirements.getAlignedSizeRequirements(yChildren);
        } else {
            xTotal = SizeRequirements.getAlignedSizeRequirements(xChildren);
            yTotal = SizeRequirements.getTiledSizeRequirements(yChildren);
        }

     }
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T13:37:36.707

MigLayout 5.0 对此进行了补偿。如果您想对其进行测试，它位于 Google Code 的后备箱中。

干杯，米凯尔

# c# - 如果 TextBox 有日期 转换为 DateTime 否则 NULL

> ID：15302597
> 
> 赞同：0
> 
> 时间：2013-03-08T20:19:55.550
> 
> 标签：c#, asp.net, sql

如果 TextBox 具有值，是否可以将文本框值转换为日期时间，否则使用以下方式在数据库中保存为 NUll。这是 VS 2005 使用 c# 将其保存到 SQL Server 2005。

我知道我可以事先检查文本框是否有日期，然后调用此函数。我有一个函数可以将其他值保存到数据库中，即使日期没有输入到文本框中。这只是我试图在这里给出的一个例子

```
new BusinessLogic.BizLogic().InsertDate(CID, Convert.ToDateTime(txtDate.Text)); 
```

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T20:22:39.077

```
DateTime value;

new BusinessLogic.BizLogic().InsertDate(CID, 
DateTime.TryParse(txtDate.Text, out value) ? value : (DateTime?)null); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T20:23:05.983

是的。但是您需要将转换逻辑拉到该语句之外。

```
 DateTime dt;

 if (!DateTime.TryParse(TextBox.text, dt))
      dt = null; 
```

# ios - 核心数据sqlite和其他数据库合并

> ID：15302598
> 
> 赞同：0
> 
> 时间：2013-03-08T20:19:56.617
> 
> 标签：ios, database, core-data

现在我正在开发一个具有非常复杂的核心数据图的 ios 应用程序，但我也计划将它用于 android 和其他设备以及网页。

网页和其他设备可以通过多个数据库进行管理，但在 ios 中我使用的是核心数据，因为我发现对编程更友好。我的问题是，如果要为整个应用程序生态系统（web、android、html、ios）制作服务器，我是否能够将所有数据合并到一个服务器数据库中，包括核心数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T00:08:59.620

You can certainly merge the data, but not the database files. If you're storing and/or syncing data using a server, you'll need to define some kind of server API for client access. An iOS app using Core Data could also make use of that API to communicate with the server. So, yeah, should be do-able.

Your server side code will almost certainly be something SQL-based, so when communicating back and forth you'll probably end up mapping Core Data entities to SQL tables. That's fine, so long as the server API doesn't require too much SQL-specific, non-Core Data style data. For example: Core Data doesn't generally use anything like join tables, since it has real many-to-many relationships. It's possible to make an iOS app convert between Core Data relationships and SQLisms like that (I've done it) but it's kind of a pain in the ass. It's not generally necessary though-- decent server APIs don't simply expose the entire table structure in its raw form.

# three.js - Three.js 获取立方体的 4 个角坐标？

> ID：15302603
> 
> 赞同：4
> 
> 时间：2013-03-08T20:20:06.623
> 
> 标签：three.js

如何获得立方体角的 4 个坐标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T20:24:16.857

如果您使用 CubeGeometry（宽度、高度、深度）并将立方体放置在某个位置，那么您的八个角位于

```
position.x + width/2, position.y + height/2, position.z + depth/2
position.x + width/2, position.y + height/2, position.z - depth/2
position.x + width/2, position.y - height/2, position.z + depth/2
position.x + width/2, position.y - height/2, position.z - depth/2
position.x - width/2, position.y + height/2, position.z + depth/2
position.x - width/2, position.y + height/2, position.z - depth/2
position.x - width/2, position.y - height/2, position.z + depth/2
position.x - width/2, position.y - height/2, position.z - depth/2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-11T18:26:08.263

这是一个完整的实现：

```
// Returns the positions of all the corners of the box
// Uses CSS ordering conventions: CW from TL.  First front face corners, then back.
THREE.BoxGeometry.prototype.corners = function(position){
  this._corners || (this._corners = [
    new THREE.Vector3,
    new THREE.Vector3,
    new THREE.Vector3,
    new THREE.Vector3,
    new THREE.Vector3,
    new THREE.Vector3,
    new THREE.Vector3,
    new THREE.Vector3
  ]);

  var halfWidth = this.parameters.width / 2, halfHeight = this.parameters.height / 2, halfDepth = this.parameters.depth / 2;

  this._corners[0].set(position.x - halfWidth, position.y + halfHeight, position.z + halfDepth);
  this._corners[1].set(position.x + halfWidth, position.y + halfHeight, position.z + halfDepth);
  this._corners[2].set(position.x + halfWidth, position.y - halfHeight, position.z + halfDepth);
  this._corners[3].set(position.x - halfWidth, position.y - halfHeight, position.z + halfDepth);
  this._corners[4].set(position.x - halfWidth, position.y + halfHeight, position.z - halfDepth);
  this._corners[5].set(position.x + halfWidth, position.y + halfHeight, position.z - halfDepth);
  this._corners[6].set(position.x + halfWidth, position.y - halfHeight, position.z - halfDepth);
  this._corners[7].set(position.x - halfWidth, position.y - halfHeight, position.z - halfDepth);

  return this._corners

}

THREE.Mesh.prototype.corners = function(){

  if (!this.geometry instanceof THREE.BoxGeometry){
    console.warn('Unsupported geometry for #corners()')
    return
  }

  return this.geometry.corners(this.position)

}; 
```

# java - Axis2 Web 服务 - 版本控制

> ID：15302604
> 
> 赞同：0
> 
> 时间：2013-03-08T20:20:09.943
> 
> 标签：java, service, web, axis2

我是网络服务的新手。我开发了一个示例 Web 服务，如下所示。

我正在尝试在数据中添加一个新字段，例如**布尔成功；**. （只是为了学习向后兼容性）

当我添加新字段时，正如我所料，服务调用从客户端存根失败。

我如何维护不同版本的服务。我有什么选择？

我在网上浏览了很多文章（不幸的是没有例子。:()。很少有选择是

1）用新的输出在类中编写不同的操作。这我明白了。

2) 对服务进行版本控制。喜欢 services/ **version1** /SumAndMult, services/ **version2** /SumAndMult

我如何实现第二个选项？这个选项背后的想法是什么？维护服务类的副本？

如果我的服务器上只有一个服务类，如何公开多个 wsdls？

另外，保持向后兼容性的最佳方法是什么？

```
public Data getSumAndMultData(int[] input){
    Data result = new Data();
    int sum = 0;
    int mult = 1;

    for(int i = 0; i < input.length; i++){
        sum += input[i];
        mult *= input[i];
    }
    result.setMult(mult);
    result.setSum(sum);
    return result;
}
class Data{
    int sum;
    int mult;
    public int getSum() {
        return sum;
    }
    public void setSum(int sum) {
        this.sum = sum;
    }

    public int getMult() {
        return mult;
    }
    public void setMult(int mult) {
        this.mult = mult;
    }
} 
```

作为

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T17:29:41.207

案例#2 实际上只是意味着使用自己的 WSDL 添加新的 Web 服务。您可能会从旧的 WSDL 开始，进行所需的任何更改，然后以不同的服务名称发布它，以便通过不同的 URL 访问它。

使用 Axis2，您可以将多个服务打包到同一个 AAR 中。在 services.xml 中，您将定义一个`<servicegroup>`包含`<service>`每个服务的部分。所有服务都将使用相同的类加载器并可以访问同一组静态变量。

# android - 将 PhoneGap Build App 部署到 Google Play 商店：多个密钥？

> ID：15302612
> 
> 赞同：1
> 
> 时间：2013-03-08T20:20:34.817
> 
> 标签：android, cordova, keytool, phonegap-build

我用 PhoneGap Build 构建了一个应用程序。我用密钥签名并将有效期设置为 50000 天。PhoneGap 似乎可以很好地构建它。所以我下载它并尝试将它上传到 Google Play 商店。我得到这个错误：

您的 APK 已使用多个证书进行签名。请仅用一张证书签署并重新上传。您上传的 APK 使用过早过期的证书签名。您需要使用在将来过期的证书对您的 APK 进行签名。

?? 我不知道还能做什么，也不知道为什么要使用多个证书进行签名。我有一个来自 Go Daddy 的 pfx 格式的代码签名证书。我使用密钥库将其转换为 JKS 格式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T21:22:09.640

为什么不让 Eclipse 生成用于签名的证书而不是使用第 3 方？转换后可能会出现问题。

# node.js - Node.js - 检查是否安装了模块而不实际需要它

> ID：15302618
> 
> 赞同：54
> 
> 时间：2013-03-08T20:20:57.460
> 
> 标签：node.js, module, require

在运行之前，我需要检查是否安装了“mocha”。我想出了以下代码：

```
try {
    var mocha = require("mocha");
} catch(e) {
    console.error(e.message);
    console.error("Mocha is probably not found. Try running `npm install mocha`.");
    process.exit(e.code);
} 
```

我不喜欢捕捉异常的想法。有没有更好的办法？

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2013-03-08T21:02:40.757

您应该使用`require.resolve()`而不是`require()`. `require`如果找到，将加载库，但`require.resolve()`不会，它将返回模块的文件名。

请参阅[require.resolve 的文档](https://nodejs.org/api/modules.html#modules_require_resolve)

```
try {
    console.log(require.resolve("mocha"));
} catch(e) {
    console.error("Mocha is not found");
    process.exit(e.code);
} 
```

如果找不到模块，require.resolve() 确实会抛出错误，因此您必须处理它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T21:29:37.683

`module.paths`存储 的搜索路径数组`require`。搜索路径相对于`require`调用的当前模块。所以：

```
var fs = require("fs");

// checks if module is available to load
var isModuleAvailableSync = function(moduleName)
{
    var ret = false; // return value, boolean
    var dirSeparator = require("path").sep

    // scan each module.paths. If there exists
    // node_modules/moduleName then
    // return true. Otherwise return false.
    module.paths.forEach(function(nodeModulesPath)
    {
        if(fs.existsSync(nodeModulesPath + dirSeparator + moduleName) === true)
        {
            ret = true;
            return false; // break forEach
        }
    });

    return ret;
} 
```

和异步版本：

```
// asynchronous version, calls callback(true) on success
// or callback(false) on failure.
var isModuleAvailable = function(moduleName, callback)
{
    var counter = 0;
    var dirSeparator = require("path").sep

    module.paths.forEach(function(nodeModulesPath)
    {
        var path = nodeModulesPath + dirSeparator + moduleName;
        fs.exists(path, function(exists)
        {
            if(exists)
            {
                callback(true);
            }
            else
            {
                counter++;

                if(counter === module.paths.length)
                {
                    callback(false);
                }
            }
        });
    });
}; 
```

用法：

```
if( isModuleAvailableSync("mocha") === true )
{
    console.log("yay!");
} 
```

或者：

```
isModuleAvailable("colors", function(exists)
{
    if(exists)
    {
        console.log("yay!");
    }
    else
    {
        console.log("nay:(");
    }
}); 
```

编辑：注意：

*   `module.paths`不在[API中](http://nodejs.org/api/modules.html)
*   Documentation [states](http://nodejs.org/api/modules.html#modules_loading_from_the_global_folders) that you can add paths that will be scanned by `require` but I couldn't make it work (I'm on Windows XP).

# node.js - 为什么 Mongoose 在脚本执行时不保存记录？

> ID：15302619
> 
> 赞同：0
> 
> 时间：2013-03-08T20:21:00.933
> 
> 标签：node.js, mongodb, mongoose

我会尽量简洁——即使在异步调用 save() 部分时，Mongoose 似乎也不会保存记录，直到整个脚本结束：

```
var reallyBigData = require('./data.json');

var importData = function(data) {
  var newObj = new Obj; // Mongoose Object
  newObj.x = data.x;
  newObj.save();
};

this.on('importData', importData);

for(var i in reallyBigData) {
  this.emit('importData', reallyBigData[i]);
}; 
```

这是一个粗略的简化，但你明白了。当我运行脚本并查询 Mongo 时，我在脚本运行时看不到任何记录。如果我将数量限制为 30，然后导入它们，它会快速完成，然后我会看到记录。

为什么 Mongoose 在脚本执行时不保存每条记录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T21:13:33.970

问题是`x.save()`(or `newObj.save()`) 是异步的，除了 Node 本身之外，你没有任何东西等待它完成。

由于是异步的，它只*启动*更新 MongoDB 中的集合的任务，然后立即退出。直到稍后调用可选回调时，它才会真正“*完成”：*

```
x.save(function (err, instance) {
    // at this point, it either erred or saved
}); 
```

不过，`x.save()`几乎可以立即完成。及时完成的​​记录数量较少意味着您有一个竞争条件——它将首先完成：对 MongoDB 或 Node/V8 的查询执行代码块？

而且，使用`EventEmitter`，至少您在这里对其进行采样的方式不足以使您的循环异步，因为您仍在`emit`同步处理事件并将同步`emit()`循环通过任何处理程序。

但是，有许多“*控制流*”库可以提供帮助。其中包括[promises](https://npmjs.org/browse/keyword/promises)、[futures](https://npmjs.org/browse/keyword/futures)和 iterators 的实现，例如[`async`](https://npmjs.org/package/async)：

```
var reallyBigData = require('./data.json');

async.each(Object.keys(reallyBigData),
    function (key, callback) {
        new Obj({ x: reallyBigData[key] }).save(callback);
    },

    function (err, results) {
        // called with an `err` or an `Array` of `results` (saved `Obj`s)
    }
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T21:58:21.493

首先，我认为您在这里有一个令人讨厌的错误：

```
var importData = function(data) {
  var newObj = new Obj; // Mongoose Object
  Obj.x = data.x;
  x.save();
}; 
```

其中最有可能读作：

```
var importData = function(data) {
  var newObj = new Obj; // Mongoose Object
  newObj.x = data.x;
  newObj.save();
}; 
```

因为看起来您正在尝试对您的架构进行操作，而不是在您从架构中“新建”的模型上进行操作。那有意义吗？或者也许这就是你拥有它的方式，而你只是错过了输入？因为我看不到您将如何从现有代码中获得预期结果，无论它如何执行到数据库。也许正如您现在所拥有的那样，它正在努力检测模型是否已更改值，或者它未能通过您的验证。

# facebook - Facebook API：如何为个人资料图片获得不同的分辨率？

> ID：15302620
> 
> 赞同：3
> 
> 时间：2013-03-08T20:21:01.500
> 
> 标签：facebook, api, profile, image

如何使用 facebook API 为个人资料图片获取不同的分辨率？我只知道

至少在 Objective-c 中，我使用链接**“ [http://graph.facebook.com/](http://graph.facebook.com/) *[facebookId]* /picture”**，将*[facebookId]*替换为来自 API 的实际 facebook id 号。

但是如何获得更高分辨率的图片呢？这个选项给了我一个非常小的图片。

干杯，

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-08T20:22:38.287

我刚刚在一篇博文中弄清楚了。你应该使用：

*   “ [http://graph.facebook.com/](http://graph.facebook.com/) *[facebookId]* /picture” 用于非常小的图片
*   “ [http://graph.facebook.com/](http://graph.facebook.com/) *[facebookId]* /picture?type=large&redirect=true&width= **400** &height= **400** ” 用于可自定义大小的图片。只需将高度和宽度的值替换为您想在应用程序中使用的值 =)

# laravel - Laravel 4 Eloquent ORM：如何更新具有复合主键的数据透视表条目

> ID：15302625
> 
> 赞同：2
> 
> 时间：2013-03-08T20:21:22.670
> 
> 标签：laravel, many-to-many, laravel-4, eloquent, composite-key

我有这样的多对多关系：

```
user
 - user_id

user_blocks
 - blocker_user_id
 - blocked_user_id
 - unblocked (Timestamp) 
```

其中blocker 和blocked_user_id 是一个复合主键，它们都作为用户表的user_id 的外键存在。这两个表都是 InnoDB。

当我尝试执行以下操作时：

```
$user = User::find(1)
$blocked_user = $user->blocked()->where('blocked_user_id', 2)->first();

$blocked_user->unblocked = User::freshTimestamp();
$blocked_user->save(); 
```

似乎认为我希望更新 user 表中的列，而不是 user_blocks 表。这只是一个 sql 错误，其中用户表正在尝试使用不存在的列进行更新`unblocked`。

我已经尝试在示例中为 $blocked_user 添加`->pivot`和`->pivot()`分配。第一个在 Eloquent\Model::performUpdate 中给了我一个错误，`Call to a member function update() on a non-object`而后者`call_user_func_array() expects parameter 1 to be a valid callback, class 'Illuminate\Database\Query\Builder' does not have a method 'pivot'`在 Eloquent\Builder::__call 中给了我一个错误。

用户表的模型将与自身的关系定义为：

```
public function blocked() {
    return $this->belongsToMany(
        'User', 
        'user_blocks', 
        'blocker_user_id', 
        'blocked_user_id'
    )->withPivot('unblocked');
} 
```

user_blocks 表没有模型，因为我不知道如何使用复合主键定义 Eloquent 模型（我到处搜索，这似乎不是任何人都问过的问题）。

我意识到模式没有针对 Eloquent 进行优化，但这是将 eloquent 移植到具有预先建立模式的 Codeigniter 项目中。使用 Codeigniter 模型的其他愉快体验。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T15:37:03.813

Eloquent 目前似乎没有明确地处理复合主键。但是，我能够通过制作 user_blocks 表的模型并仅指定一个主键来解决该问题：

```
class Blocker extends Model {

    protected $table = "user_blocks";
    protected $primaryKey = "blocker_user_id";
    public $timestamps = false; // Don't track nonexistent created_at/updated_at columns

} 
```

然后，在更新未阻塞列的逻辑中，我简单地执行了以下操作：

```
$blocked_user = Blocker::where('blocker_user_id', $user->user_id)
    ->where('blocked_user_id', $user_to_be_unblocked_id)
    ->first();

$blocked_user->unblocked = Blocker::freshTimestamp();

$blocked_user->save(); 
```

这不是解决问题的最优雅的方法，但在 Eloquent 获得对复合主键的支持之前它确实有效。

# c# - 自定义路由在 ASP.NET 中不起作用

> ID：15302628
> 
> 赞同：0
> 
> 时间：2013-03-08T20:21:33.053
> 
> 标签：c#, webforms, asp.net-routing

我一直在尝试关注这个[http://msdn.microsoft.com/en-us/library/cc668202(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/cc668202(v=vs.90).aspx)

我已经创建了将此添加到我的 web.config 中：

```
<modules>
      <remove name="ScriptModule"/>
      <add name="ScriptModule" preCondition="managedHandler" type="System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
      <remove name="UrlRoutingModule" />
      <add name="UrlRoutingModule"
           type="System.Web.Routing.UrlRoutingModule, 
               System.Web.Routing, 
               Version=3.5.0.0, 
               Culture=neutral, 
               PublicKeyToken=31BF3856AD364E35"/>
    </modules> 
```

而且，我已将此添加到我的 Global.asax 中：

```
protected void Application_Start(Object sender, EventArgs e)
        {
            SplendidInit.InitApp();
            RegisterRoutes(RouteTable.Routes);
        }

public static void RegisterRoutes(RouteCollection routes)
        {
            routes.Add("ShortUrl_Attachment_NoLogin", new Route
            (
               "a",
               new CustomRouteHandler("~/FACTS/Attachments/Attachment_NoLogin.aspx")
            ));
        }

        public class CustomRouteHandler : IRouteHandler
        {
            public CustomRouteHandler(string virtualPath)
            {
                this.VirtualPath = virtualPath;
            }

            public string VirtualPath { get; private set; }

            public IHttpHandler GetHttpHandler(RequestContext
                  requestContext)
            {
                var page = BuildManager.CreateInstanceFromVirtualPath
                     (VirtualPath, typeof(Page)) as IHttpHandler;
                return page;
            }
        } 
```

当我导航到`/FACTS/Attachments/Attachment_NoLogin.aspx`它时；但是，当我尝试导航到我的自定义路由`/a`时，它会显示“ **HTTP Error 404.0 - Not Found** ”。

我怎样才能使我的自定义路线工作？

感谢您的帮助。

**编辑：**

**我在 IIS 7.5 上使用 .NET 3.5，如果这会有所不同（我认为确实如此）。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T14:26:42.433

我使用的解决方案是下载并安装 IIS Rewrite 模块。超级简单，超级酷:)

[http://www.iis.net/downloads/microsoft/url-rewrite](http://www.iis.net/downloads/microsoft/url-rewrite)

# c# - 应用程序启动后，如何从 web.config 中读取值？

> ID：15302632
> 
> 赞同：6
> 
> 时间：2013-03-08T20:21:46.397
> 
> 标签：c#, asp.net, web-config

我很好奇 web.config 是如何加载到应用程序中的，对 web.config 中的值的任何引用是否实际上解析了 web.config 文件，或者在应用程序启动时它是否将值加载到单例中？

我想到了这一点，因为我想在 global.asax.cs 中根据每个请求检查 web.config 中的值：

```
protected void Application_BeginRequest(object sender, EventArgs e)
{
   if( ConfigurationManager.AppSettings["abc"] != null)
   {

    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T20:29:11.050

当应用程序第一次收到请求时，会解析配置文件并加载其设置。然后缓存这些设置，因此任何后续调用都不需要重新解析配置文件。这就是为什么当配置文件更改时，应用程序会重新启动并再次重新编译。

[http://msdn.microsoft.com/en-us/library/ms178685.aspx#calculating_configuration_settings_at_runtime](http://msdn.microsoft.com/en-us/library/ms178685.aspx#calculating_configuration_settings_at_runtime)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T20:26:36.983

配置在应用程序启动期间被反序列化为相应的[`ConfigurationSection`](http://msdn.microsoft.com/en-gb/library/system.configuration.configurationsection.aspx)类型。

这些通常使用只读属性实现，因此它们确实可以在单例中使用。

# javascript - DOJO 对话框没有第二次打开

> ID：15302636
> 
> 赞同：0
> 
> 时间：2013-03-08T20:21:51.943
> 
> 标签：javascript, html, css, jsp, dojo

我将 DOJO 用于名为“编辑”的对话框。第一次单击“编辑”按钮会打开一个对话框。使用对话框屏幕右侧的“x”按钮关闭对话框时，对话框消失。它第一次工作。但是随后单击“编辑”按钮不起作用，并且不会填充对话框。我希望这些也能正常工作。刷新页面使一切正常。

```
<div style="float: right;">
    <c:choose>
        <c:when test="${fn:startsWith(user.languageLocale, 'fr')}">
        <c:set var="a" value="75px"/></c:when>
        <c:otherwise><c:set var="a" value="60px"/></c:otherwise>
    </c:choose>

    <c:if test="${not formDisabled}">
    <a
        id="Pane"
        dojoType="Popup"
        popupCloseTitle="<spring:message code='close'/>"
        popupTitle="<spring:message code='edit'/>"
        href="/.../.../Disc.htm"
        destroyOnClose="true"
        popupWidth="920px"
        buttonWidth="<c:out value="${a}"/>"
        zIndex="30"
        buttonText="<spring:message code='edit'/>"
    </a>
    </c:if>

    <input type="hidden" id="Data" value="${Data }"/>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T21:06:20.157

没有使用`rmt.NewModalPopupButton`小部件的经验，我怀疑问题出`destroyOnClose="true"`在设置的属性上。从该属性的声音来看，如果实际的对话框小部件正在被破坏，因此无法在后续事件中重新显示，我不会感到惊讶。

# c# - 模型不更新数据库

> ID：15302637
> 
> 赞同：0
> 
> 时间：2013-03-08T20:21:56.790
> 
> 标签：c#, sql, ado.net

由于某种原因，该方法`dbase.SaveChanges()`无法更新数据库，因为`roomid`它应该为空。但是调试器确实说`room1.id`设置为2？

有人可以帮我吗？

```
private void button1_Click(object sender, EventArgs e)
{
    Room room1 = new Room();
    room1.Id = 2;
    dbase.AddToRoom(room1);
    dbase.SaveChanges();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T20:33:32.070

我不确定这实际上是 ADO.NET，它看起来更像是实体框架或 linq to SQL。

您要做什么也不太清楚。如果您尝试向数据库添加一个新房间，我建议您设置一些属性，否则您只是插入一个空房间。

```
var room1 = new Room();
room1.RoomNumber = 4;
room1.Available = true;
//...
dbase.AddToRoom(room1);
dbase.SaveChanges(); 
```

如果这是您尝试执行的操作，那么您无需指定房间的 ID（如果 ID 列设置为自动递增）。

如果您尝试*更新*房间而不是*插入*新房间，您可以执行以下操作：

```
var roomToUpdate = dbase.Rooms.Where(x => x.id == id).FirstOrDefault();
roomToUpdate.Property ="something";
//...
dbase.Update(roomToUpdate)
dbase.SaveChanges(); 
```

同样，如果我错了，您到底要做什么并不完全清楚，请详细说明。

# shell - 使用 shell 脚本从最后一个位置读取文件

> ID：15302638
> 
> 赞同：1
> 
> 时间：2013-03-08T20:22:04.030
> 
> 标签：shell, unix, file-io

我的要求是读取一个使用 cron 作业中的 shell 脚本不断更新的大文件。我会读到最后一行，然后停止这个过程。下次 cron 作业开始时，作业应该从上次完成的位置读取。任何建议如何在 shell 脚本中执行此操作。

我正在使用 Solaris Unix。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-30T07:59:59.733

像这样尝试（当然在cron中添加它）：

```
#!/bin/bash

#STAT_FILE=/tmp/stat.tmp
PREV_LINE_STAT=/tmp/prev_last_line.tmp
LINE=$(cat log | wc -l)
LOG=/tmp/log.tmp

if [ -f $PREV_LINE_STAT ]
then
    PREV_LINE=$(cat $PREV_LINE_STAT)
else
    PREV_LINE=0
fi

declare -i LINE_RANGE
LINE_RANGE=$LINE-$PREV_LINE

if [ $LINE_RANGE -lt 0 ]
then
    LINE_RANGE=$LINE
fi

tail -n $LINE_RANGE log > $LOG

COUNT1=$(grep any_word $LOG |wc -l)

echo "-------------------
LINE_RANGE is $LINE_RANGE
-------------------
number of words 
$COUNT1" > test.txt

echo $LINE > $PREV_LINE_STAT

cat test.txt 
```

所以这里的主要工具是“尾巴”。问我是否有任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T20:04:05.173

如前所述，最好的方法是使用“tail -f”，但假设由于某种原因你的程序死了，你必须从头开始阅读，你不能使用“tail -f”从中断的地方继续.

所以唯一的方法是编写自己的 C 应用程序。它应该很容易，因为它相当简单。您可以使用“ftell”来找出您在数据文件中的位置。然后，您将在退出应用程序之前或在每次读取之后（如果您永远不再重新处理一行至关重要）将该结果写入其他文件（控制文件）。

重新启动应用程序后，您将读取该控制文件，解析值并使用“fseek”跳转到您离开的地方。

如果数据文件被其他应用程序截断，您还应该让该应用程序删除您的控制文件。否则，您将不得不找到其他方法来知道该文件是新文件。可能是您读取的“fseek”大于当前的“ftell”，这表明文件比原来小，但这并不能涵盖所有可能性。

您可以调查“fstat”并使用数据文件的创建时间来查看它是否比您保存在控制文件中的创建时间更新，**或者**如果可以，我会在文件的第一个写一个日期/时间戳行，并将其也写入控制文件中。当应用重启时，如果第一行时间戳与控制文件时间戳不匹配，则从头开始读取。否则，“fseek”应该将您带到正确的位置。

# c++ - 用控件绘制窗口

> ID：15302639
> 
> 赞同：1
> 
> 时间：2013-03-08T20:22:05.770
> 
> 标签：c++, winapi, form-designer

好的，所以我打算在 WINAPI 中做一个表单设计器。我知道这会很困难，但是我刚开始就遇到了问题。到目前为止，我预见到的唯一问题是弄清楚如何绘制控件并将表单绘制到屏幕上。我确信我能做剩下的。

当我查看 C# 表单设计器时，我在屏幕上看到它实际上显示了一个窗口和一个控件列表，当您将一个按钮拖到该窗口上时，它会在该位置绘制一个按钮。那是一个真正的按钮还是只是一个可拖动的图像？那是带有退出按钮等的真实表单/窗口，还是可以拖动的图片？

我试图弄清楚如何在我的主窗口中绘制该表单/窗口。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T20:25:49.740

这取决于，在许多情况下它是一个真正的窗口。

例如，当您使用 WYSIWYG 表单设计器时，在 Qt、MFC、C++Builder 中。他们确实创建了一个表单，但具有拖放控件的能力。

如果你想构建一个像他们这样的工具，你应该动态地创建窗口、对话框、按钮、编辑……并将它们附加到你的主窗体上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T23:30:04.560

你应该看看[这个](http://www.darserman.com/Perl/Loft/ "GUI阁楼")。它被称为`The GUI Loft`。

# google-chrome - 打包应用程序 vs Adob e Air vs 其他

> ID：15302642
> 
> 赞同：1
> 
> 时间：2013-03-08T20:22:22.133
> 
> 标签：google-chrome, web-applications, air

我的任务是使用我们现有的 Web 应用程序并将其转换为可以与本地数据库或网络上的数据库一起使用的桌面应用程序。我希望尽可能少地重写应用程序，所以我开始研究 Google Packaged Apps 和 Adob​​e Air 之类的东西。我的应用程序严重依赖 jQuery，但不太依赖 PHP，尤其是在前端（如通过 php 重写 html）。以下是我的问题：

1.  使用 Google Packaged Apps，您是否需要在安装应用程序之前安装 Chrome？

2.  使用 Google Packaged Apps，您可以将安装和运行程序所需的所有内容打包到一个安装程序中（换句话说，您可以在没有互联网连接的情况下安装它吗？）

3.  性能是一个重要因素——它必须像在网络上作为桌面应用程序一样运行。Adobe Air、Google Packaged Apps 或其任何竞争对手是否会导致性能下降？如果是这样，哪个（哪些）性能最好？

4.  考虑到我为我的目的概述的内容，哪种产品最适合：Google Packaged Apps、Adobe Air 或其他竞争对手（我听说过但不确定他们是否能满足我的需求的是 Titanium，棱镜、app.js 等）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-20T23:22:03.010

> 使用 Google Packaged Apps，您是否需要在安装应用程序之前安装 Chrome？

是的，但是一旦打包的应用程序正式启动，如果您在任何设备上安装了 chrome 浏览器，您应该有运行打包的应用程序的运行时。

> 使用 Google Packaged Apps，您可以将安装和运行程序所需的所有内容打包到一个安装程序中（换句话说，您可以在没有互联网连接的情况下安装它吗？）

是的，您必须将它们打包（默认情况下它们处于脱机状态）。如果用户使用的是 chrome 浏览器，您可以让他们从您的网站一键安装（无需通过网上商店）。

> 考虑到我为我的目的概述的内容，哪种产品效果最好：Google Packaged Apps、Adobe Air 或其他竞争对手

Adobe AIR 和打包的应用程序都应该可以工作。但请注意，打包的应用程序尚未正式推出。从 Google I/O 的公告来看，预计它将在 29 版（今年夏天的某个时候）登陆 windows，然后登陆 mac 和 linux（当然还有 chrome os）。

与 AIR 相比，您最大的优势在于打包的应用程序也可以在移动设备上运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-02T15:30:39.340

很少有未回答的问题

> 我的任务是使用我们现有的 Web 应用程序并将其转换为可以与本地数据库或网络上的数据库一起使用的桌面应用程序。

这是一个可以解决您本地 dB 问题的链接：将
[数据发布到 database-web sql chrome extension](https://stackoverflow.com/questions/11175846/posting-data-into-database-web-sql-chrome-extension)

> 我希望尽可能少地重写应用程序

JS 是动态类型的。但由于谷歌设置了很多限制，你的应用程序开发可能比使用 javascript 的常规网页开发慢。限制，例如：http: [//developer.chrome.com/extensions/contentSecurityPolicy.html](http://developer.chrome.com/extensions/contentSecurityPolicy.html)

> 我的应用严重依赖 jQuery

是的，你可以使用 jQuery，只要你知道如何包含它。

> 性能是一个重要因素——它必须像在网络上作为桌面应用程序一样运行。Adobe Air、Google Packaged Apps 或其任何竞争对手是否会导致性能下降？如果是这样，哪个（哪些）性能最好？

AIR 应用程序比 Chrome 扩展程序慢，因为 chrome[V8] 中的 js 引擎比使用 webkit 的 air 中使用的引擎快。您可以通过在两种环境中创建一个 slideToggle() 方法来自己测试它，您会发现它在 chrome 中要平滑得多。这只是一个示例，您可以通过 adobe developer n/w 找到许多您研究的内容。

> 考虑到我为我的目的概述的内容，哪种产品最适合：Google Packaged Apps、Adobe Air 或其他竞争对手（我听说过但不确定他们是否能满足我的需求的是 Titanium，棱镜、app.js 等）

我不是谷歌的人，但除了 Chrome 应用程序/扩展之外别无他求。在对 Adob​​e AIR 应用程序、app.js、钛等进行彻底研究后，我发现这是最安全、性能最丰富、功能最丰富且独立于平台的。Adobe 已停止为 linux 发布更新的 AIR 版本，而 chrome 仍在努力推动该平台。名单还在继续。

# javascript - 悬停在兄弟姐妹上停止悬停效果

> ID：15302645
> 
> 赞同：0
> 
> 时间：2013-03-08T20:22:36.563
> 
> 标签：javascript, jquery, css, hover, siblings

所以我有两个彩色图像，当悬停时，通过将不透明度更改为 0，将另一个变为灰度（每个图像的黑白副本直接位于后面）。这很好用。

我现在正试图在悬停的图像上显示一个标题（当它悬停时）。发生的情况是，当我将鼠标悬停在图像上时，标题显示得很好。但是，如果鼠标移到标题上，则标题会不断消失并重新出现，因为我不再将鼠标悬停在图像本身上。当标题消失时，我再次将鼠标悬停在图像上，因此它重新出现。

我想要发生的是，当我将鼠标悬停在此标题上时，它的行为就像我仍在悬停图像一样。我也接受在图像上永久显示标题作为替代方案（老实说，从长远来看可能会更好）。

我已经研究了 event.stopPropagation() 方法，但这似乎可以防止效果向上移动 DOM 或达到这种效果，并且这个标题是一个兄弟。

代码如下

**HTML**

```
<div id="leftbox">
  <div id="upper" class="cap">
    <div class="gallery">
      <ul>
        <li>
          <a href="link.html">
            <img src="images/img1_color.jpg" class="color" alt="a" id="img1>
          </a>
        </li>
        <li>
          <a href="link.html">
            <img src="images/img1_dark.jpg" class="dark" alt="a">
          </a>
        </li>
      </ul>
    </div>
    <div id="caption1">
    </div>
  </div>
  <div id="lower" class="cap">
    <div class="gallery">
      <ul>
        <li>
          <a href="link2.html">
            <img src="images/img2_color.jpg" class="color" alt="b" id="img2>
          </a>
        </li>
        <li>
          <a href="link2.html">
            <img src="images/img2_dark.jpg" class="dark" alt="b">
          </a>
        </li>
      </ul>
    </div>
    <div id="caption2">
    </div>
  </div>
</div> 
```

**CSS**

```
.gallery li {
  list-style-type: none;
  position: relative;
}

img.dark {
  position: absolute;
  left: 0;
  top: 0;
}

img.color {
  position: absolute;
  left: 0; 
  top: 0;
  z-index: 1;
}

#leftbox {
  float: left;
  width: 450px;
  margin: 5px 10px 0px 0px;
}

#leftbox #upper {
  width: 450px;
  height: 250px;
  margin: 0px 0px 10px 0px;
}

#leftbox #lower {
  width: 450px;
  height: 250px;
  margin: 0px 0px 5px 0px;
}

.gallery  #capimg1{
  height: 20px;
  text-align: center;
  color: #ffffff;
  background-color: green;
  z-index:2;
  display: none;
  position: absolute;
  padding: 5px 100px 5px 100px;
}

.gallery  #capimg2{
  height: 20px;
  text-align: center;
  color: #ffffff;
  background-color: green;
  z-index:2;
  display: none;
  position: absolute;
  padding: 5px 100px 5px 100px;
} 
```

**Javascript**

```
window["img1"] = "#img1";
window["img2"] = "#img2";

$(document).ready(function(){
  $('img.color').hover(function(ev) {
    if (this.id == "img1") {
      $(img2).stop().animate({"opacity": "0"}, 600);
    }
    else if (this.id == "img2") {
      $(img1).stop().animate({"opacity": "0"}, 600);
    }

    $('#cap'+this.id).stop().fadeIn(400).html(this.alt);
  },
  function reAnim() {
    $([img1, img2].join(",")).stop().animate({"opacity": "1"}, "slow");
    $('#cap'+this.id).css("display", "none");       }
  );
}); 
```

附带问题：有没有办法使#capimg1 和#capimg2 div 的宽度与画廊div 的宽度相同？如果没有，我将为每个图像创建一个 div 并将宽度硬编码。

感谢帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T20:34:10.243

像这样更改您的javascript：

```
$(document).ready(function(){
  $('img.color').parents('div.cap').hover(function(ev) {
    if ($(this).find('img.color')[0].id == "img1") {
      $(img2).stop().animate({"opacity": "0"}, 600);
    }
    else if (this.id == "img2") {
      $(img1).stop().animate({"opacity": "0"}, 600);
    }

    $('#caption_'+$(this).find('img.color')[0].id).stop().fadeIn(400).html($(this).find('img.color')[0].alt);
  },
  function reAnim() {
    $([img1, img2].join(",")).stop().animate({"opacity": "1"}, "slow");
    $('#caption_'+$(this).find('img.color')[0].id).css("display", "none");
  });
}); 
```

然后将您的 HTML 更改为：

```
<div id="upper" class="cap">
  <div class="gallery">
    <ul>
      <li>
        <a href="link.html">
          <img src="images/img1_color.jpg" class="color" alt="a" id="img1>
        </a>
      </li>
      <li>
        <a href="link.html">
          <img src="images/img1_dark.jpg" class="dark" alt="a">
        </a>
      </li>
    </ul>
  </div>
  <div id="caption_img1">
  </div>
</div> 
```

**上述编辑的重要部分是将标题的 ID 更改为我们可以轻松与 img 的 ID 关联的东西**

这样做的目的不是将悬停效果放在图像本身上，而是放在容器上。因此，每当您的列表项悬停在上方时，效果都会保持不变，无论显示或不显示哪个子项。

**编辑**

几乎错过了你的附带问题。如果您想让它们的大小与您的画廊 div 相同，您需要使用以下两种方法之一：

1.  将画廊下方的所有元素设置为 100% 的宽度

    ```
    .gallery ul, .gallery li, .gallery a, .gallery img {
      width: 100%;
    } 
    ```

2.  使用 jQuery 设置宽度变量，如下所示：

    ```
    $('.gallery img').width($('.gallery').width()); 
    ```

**编辑 2**

[这是您解决的第一个问题的工作示例](http://jsfiddle.net/5hR2V/)

# regex - validateRegex 的动态模式不起作用，但静态版本是

> ID：15302648
> 
> 赞同：0
> 
> 时间：2013-03-08T20:22:50.250
> 
> 标签：regex, jsf

我有 JSF 页面。我的目标是通过从数据库中获取模式来动态构建验证器。

我下面的代码不起作用。我的意思是正则表达式失败。

```
<p:inputText value="#{basvuruBean.basvuru.sistem.tavsiyeEdilenID}" 
             requiredMessage="Lütfen Tavsiye Edilen ID giriniz"
             validatorMessage="#{basvuruBean.basvuru.sistem.tavsiyeEdilenIDHataMesaji}"
             rendered="#{basvuruBean.basvuru.sistem.tavsiyeEdilenIDRendered}">
    <f:validateRegex pattern="#{basvuruBean.basvuru.sistem.tavsiyeEdilenIDRegEX}" />
</p:inputText> 
```

但这按预期工作

```
<p:inputText value="#{basvuruBean.basvuru.sistem.tavsiyeEdilenID}" 
             requiredMessage="Lütfen Tavsiye Edilen ID giriniz"
             validatorMessage="#{basvuruBean.basvuru.sistem.tavsiyeEdilenIDHataMesaji}"
             rendered="#{basvuruBean.basvuru.sistem.tavsiyeEdilenIDRendered}">
    <f:validateRegex pattern="\d" />
</p:inputText> 
```

`basvuruBean.basvuru.sistem.tavsiyeEdilenIDRegEX`等于`\d`。我通过在 JSF 页面上打印它来检查它。

我必须做什么才能使其工作？

支持bean的相关部分

```
import java.io.IOException;
import com.itextpdf.text.DocumentException;
import java.io.Serializable;
import java.util.ArrayList;
import java.util.List;
import javax.annotation.PostConstruct;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.ViewScoped;
import javax.faces.context.FacesContext;
import org.primefaces.event.FlowEvent;

@ManagedBean
@ViewScoped
public class BasvuruBean implements Serializable {

private Basvuru basvuru = new Basvuru();
private Sistem sistem;

private static final long serialVersionUID = 1L;
private String url;
private List<Sistem> sistemler = new ArrayList<Sistem>();
private SistemDAO sistemDAO = new SistemDAO();

    @PostConstruct
void initialiseSession() {
    FacesContext.getCurrentInstance().getExternalContext().getSession(true);
    sistem=sistemler.get(0);
}

public BasvuruBean() {

    sistemler = sistemDAO.tumSistemler();

    this.basvuru.setSistem(sistem);
    this.basvuru.setSirketAdi("Şirket Adı");
    this.basvuru.setePosta("posta@sirket.com");

}

public void sistemChangeListener() {

    System.out.println(sistem.getSistemAdi());
    sistem.setKapsamaYaricapi(this.sistem.getKapsamaYaricapiDefault());
    this.sistem.setKapsamaYuksekligi(this.sistem.getKapsamaYuksekligiDefault());
    this.sistem.setFrekansMax(this.sistem.getFrekansMaxDefault());
    this.sistem.setFrekansMin(this.sistem.getFrekansMinDefault());
    this.sistem.setTavsiyeEdilenID(this.sistem.getTavsiyeEdilenIDDefault());
    this.sistem.setRunway(this.sistem.getRunwayDefault());
    this.sistem.setTrueRadiationDirection(this.sistem.getTrueRadiationDirectionDefault());
    this.sistem.setApproachCAT(this.sistem.getApproachCATDefault());
    this.sistem.setAntenVericiGucuDefault(this.sistem.getAntenVericiGucuDefault());
    this.sistem.setAntenYuksekligiAGL(this.sistem.getAntenYuksekligiAGLDefault());
    this.sistem.setFrekans(this.sistem.getFrekansDefault());
}
} 
```

和 selectonemenu 改变系统对象

```
<p:selectOneMenu value="#{basvuruBean.basvuru.sistem}" converter="sistemConverter">
  <f:selectItems value="#{basvuruBean.sistemler}" var="s" itemLabel="#{s.sistemAdi}" itemValue="#{s}" />
  <p:ajax listener="#{basvuruBean.sistemChangeListener}" update="p2 genelbilgi" />
</p:selectOneMenu> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:36:58.183

很难在代码中确定原因，因为它相对笨拙。

事实上，这`<f:validateRegex>`是一个视图构建时间标签。因此，在其中引用视图范围的 bean 属性将导致创建一个全新的实例，该实例与 UI 组件（如`<p:selectOneMenu>`. 因此，实际上，您最终得到了 2 个支持 bean 实例，一个由它引用`<f:validateRegex>`，另一个由`<p:selectOneMenu>`它引用`<p:ajax>`。因此，如果您在一个 bean 实例中通过 ajax 操作正则表达式模式，它不会反映在另一个 bean 实例中。

抛开可能的设计问题不谈，您可以使用[`<o:validator>`](http://showcase.omnifaces.org/taghandlers/validator)from [OmniFaces](http://omnifaces.org)而不是`<f:validateRegex>`.

```
<o:validator validatorId="javax.faces.RegularExpression" pattern="#{basvuruBean.basvuru.sistem.tavsiyeEdilenIDRegEX}" /> 
```

这将在渲染时而不是构建时解析属性。

# apache-flex - FlexPaper - 无法将远程 SWF 文件加载到 AIR 应用程序中

> ID：15302649
> 
> 赞同：0
> 
> 时间：2013-03-08T20:22:52.073
> 
> 标签：apache-flex, pdf, flash, flex4.6, flexpaper

我正在尝试将 SWF 加载到一个简单的应用程序中以进行测试。SWF 已使用 swftools-0.9.1 使用以下命令编译：

```
/usr/bin/pdf2swf 10993.PDF -o 10993.SWF -f -T 9 
```

SWF 在浏览器中加载良好。

将以下 Flex 代码与 Flex SDK 4.6 一起使用：

```
<?xml version="1.0" encoding="utf-8"?>
<s:WindowedApplication xmlns:fx="http://ns.adobe.com/mxml/2009" 
                       xmlns:s="library://ns.adobe.com/flex/spark" 
                       xmlns:mx="library://ns.adobe.com/flex/mx"
                       xmlns:flexpaper="com.devaldi.controls.flexpaper.*"
                       creationComplete="onCreationComplete()">
    <fx:Script>
        <![CDATA[
            import flash.utils.setTimeout;

            private function onCreationComplete():void
            {
                swf.SwfFile = 'http://my/domain/10993.SWF';
            }
        ]]>
    </fx:Script>
    <flexpaper:FlexPaperViewer width="100%" height="100%" id="swf"/>
</s:WindowedApplication> 
```

crossdomain.xml 文件是：

```
<?xml version="1.0"?>
<!DOCTYPE cross-domain-policy SYSTEM "http://www.adobe.com/xml/dtds/cross-domain-policy.dtd">
<cross-domain-policy>
  <allow-access-from domain="*"/>
</cross-domain-policy> 
```

最终结果是：

```
SecurityError: Error #3207: Application-sandbox content cannot access this feature. 
```

知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-03T01:11:38.403

这可能是由于加载的 SWF 包含`Security.allowDomain()`在 AIR 应用程序中调用时引发此错误的调​​用。`-t`尝试在不使用该选项的情况下重新生成 SWF 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-24T17:05:26.237

由于安全限制，我无法在 AIR 中加载外部 SWF。根据 Adob​​e 的说法，除了使用 HTML 组件通过外部 HTML 页面加载外部 SWF 之外，没有其他解决方法。

# r - 如何为混合模型生成残差与预测变量的关系图？

> ID：15302651
> 
> 赞同：-1
> 
> 时间：2013-03-08T20:22:59.540
> 
> 标签：r, statistics, hierarchical-clustering, mixed-models

我的混合模型如下：

```
model <- lme(Cost~1+Units, random=~1+Units|Factory, method="ML", data=A) 
```

有人告诉我应用下面的代码来绘制残差与拟合值，并且它起作用了：

```
plot(fitted(model), resid(model)) 
```

但是，当我尝试绘制残差与预测变量单位的关系时，它向我显示了一条错误消息。

```
> plot(Units(model), resid(model))
Error: could not find function "Units"
Error in plot(Units(model), resid(model)) : 
error in evaluating the argument 'x' in selecting a method for function 'plot' 
```

我应该怎么做才能解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T20:34:16.257

我将扩展@Didzis 的评论（这当然是真的），所以你会真正了解发生了什么。`Units`是您数据中的一个变量，而不是某种变量的特定名称，例如`residuals`or `fitted values`（尽管一般的单位确实具有这种含义......），因此没有任何现成的函数可以为您提供这些。在构建模型时，您已经在第一行代码中使用了 Units：在那里您使用`data`了带有 value的参数`A`，它告诉`lme`函数您在建模中使用的变量位于名为 的数据框内`A`。

您可以通过使用美元符号`$`和要提取的变量名称来访问数据框中的变量（您可以使用函数检查名称`names(A)`）。因此，您可以使用命令获取 Units 变量`A$Units`，因此您可以使用命令绘制`Units`变量与残差的关系

```
plot(A$Units,resid(model)) 
```

# vim - 在 Vim 中生成子字符串的多个副本的字符串

> ID：15302654
> 
> 赞同：8
> 
> 时间：2013-03-08T20:23:14.837
> 
> 标签：vim

我正在开发一个进行一些字符串操作的 Vimscript。我想知道是否有一种方法可以通过将另一个字符串乘以某个倍数来生成字符串。例如，`'a' * 5`会产生 5 个 a's: `'aaaaa'`。直到现在，我一直在用这样的`while`循环来做这件事：

```
let l:char = 'a'
let l:x = 5
let l:i = 0
let l:somestr = ""
while l:i < l:x
    let l:somestr .= l:char
    let l:i += 1
endwhile 
```

对于我正在做的事情，这似乎非常冗长。有什么办法可以让这个更紧凑？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-08T20:45:08.843

该`repeat()`功能可以做到这一点；不仅适用于字符串，也适用于列表元素：

```
:let l:somestr = repeat(l:char, l:x) 
```

# javascript - d3行过滤掉（删除）重复点

> ID：15302655
> 
> 赞同：3
> 
> 时间：2013-03-08T20:23:18.857
> 
> 标签：javascript, d3.js

我正在使用 D3.js 绘制 svg 线。我想通过在添加到线路径之前删除重复的 (x,y) 点来提高性能。在 D3 或 javascript 中执行此操作的最佳方法是什么。我正在从 json 文件加载数据，用于此测试，但稍后它可能会出现在服务器上的数组中。

请参阅下面的代码片段和控制台输出。

谢谢你的帮助

```
 var x = d3.scale.linear().domain([xMin, xMax]).rangeRound([0, width]);
        var y = d3.scale.linear().domain([yMin, yMax]).rangeRound([height, 0]);

        var line = d3.svg.line()
            .x(function(d, i) { 
                var xPoint = x((i + 1) * xMult);
                console.log("xPoint= " + xPoint.toString()); 
                return xPoint; })
            .y(function(d) { 
                var yPoint = y(d);
                console.log("yPoint= " + yPoint.toString()); 
                return yPoint; })
            .interpolate("basis-open")
            .tension(0);

            ...

        // Add the valueline path.
        g.append("path")
            .attr("class", "line")
            .attr("d", line(data));

--------------------------------------------------
Console Output from two lines in code above
console.log("xPoint= " + xPoint.toString()); 
console.log("yPoint= " + yPoint.toString());
----------------------------------------------

xPoint= 0
yPoint= 24
xPoint= 0
yPoint= 24
xPoint= 1
yPoint= 24
xPoint= 1
yPoint= 24
xPoint= 1
yPoint= 24
xPoint= 1
yPoint= 24
xPoint= 2
yPoint= 24
xPoint= 2
yPoint= 25
xPoint= 2
yPoint= 25
xPoint= 2
yPoint= 24
xPoint= 3
yPoint= 25
xPoint= 3
yPoint= 25
xPoint= 3
yPoint= 25
xPoint= 3
yPoint= 25
xPoint= 4
yPoint= 25 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T21:41:21.237

uniq 的问题在于，无论它们在数组中的位置如何，您都在删除重复点。对于点或点线的多边形，您只想删除连续的重复点。这是一个如何使用 JavaScript 执行此操作的示例。

```
var point1 = { x: 0, y: 24 };
var point2 = { x: 1, y: 24 };
var point3 = { x: 2, y: 24 };
var point4 = { x: 2, y: 25 };

var points = [point1, point1, 
              point2, point2, point2, point2, 
              point3, 
              point4, point4, 
              point3];

var pointsAreEqual = function(point1, point2) {
    return point1.x === point2.x && point1.y === point2.y;
}

var removeConsecDupes = function(items, itemsAreEqual) {
    var previous, results = []; 

    var callback = function(value, index) {
        if (index === 0 || !itemsAreEqual(previous, value)) {
            results.push(value);
        }   
        previous = value;
    }   
    items.forEach(callback);

    return results;
}

var results = removeConsecDupes(points, pointsAreEqual);

console.dir(results); 
```

结果：

```
[ { x: 0, y: 24 },
  { x: 1, y: 24 },
  { x: 2, y: 24 },
  { x: 2, y: 25 },
  { x: 2, y: 24 } ] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T20:27:49.617

我将使用[下划线`_.uniq`方法](http://underscorejs.org/#uniq)传递自定义迭代器函数（如在 JS 中`{} !== {}`）。

像这样的东西（适应你自己的上下文）

```
_.uniq(data, false, function( d1, d2 ) {
    return (d1.x === d2.x && d1.y === d1.y);
}); 
```

# vba - VBA遍历工作表1中具有日期的单元格，如果月份和年份匹配，则提取到工作表2

> ID：15302657
> 
> 赞同：-1
> 
> 时间：2013-03-08T20:23:20.560
> 
> 标签：vba, date, loops

我尝试使用 VLookup 和 Index&Match，但看起来只有 VBA 循环可以帮助我：

我有一个以第一个工作表中的日期开头的列表。现在我想遍历这个列表，检查列表第一列中日期的月份和年份是否与第二个工作表中的月份和年份匹配。如果是这样，则应将匹配日期行的其余信息复制到工作表 2。

我在这里上传了带有一些示例数据的工作表：[https ://cignifi.box.com/s/a6k03lh0bfe9ob53d4jy](https://cignifi.box.com/s/a6k03lh0bfe9ob53d4jy)

每一个帮助将不胜感激！我对 VBA 有一些了解，但对这类问题还不够好……

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T23:34:34.197

我不确定你的成品应该是什么，但这个子程序会按照你的要求做。它将使用 Sheet1 上表中的信息覆盖 Sheet2 上已有的任何信息。如果这不能满足您的要求，请告诉我。
您可以通过在开始时更改变量来调整传入和传出哪些列数据。

编辑：添加代码以检查下一个空白的帐户名称列，并使用该行号复制到：

```
Sub ProcessTableData()
    Dim wsSource, wsDestination As Worksheet
    Dim rowSourceStart, colSourceDate, rSource, colDestStart As Long
    Dim rowDestMonthYear, cDest, rowDestInsertAt As Long
    Dim destBlankColumnCount As Integer
    Dim colDestRegion, colDestAccountName, colDestPotentialName As Integer
    Dim colDestAmount, colDestWeightedAmount As Integer
    Dim colSourceRegion, colSourceAccountName, colSourcePotentialName As Integer
    Dim colSourceAmount, colSourceWeightedAmount As Integer

    Set wsSource = Sheet1
    Set wsDestination = Sheet2

    'Destination column offsets from month column
    colDestRegion = 0
    colDestAccountName = 1
    colDestPotentialName = 2
    colDestAmount = 3
    colDestWeightedAmount = 4

    'Source columns
    colSourceRegion = 5
    colSourceAccountName = 3
    colSourcePotentialName = 4
    colSourceAmount = 6
    colSourceWeightedAmount = 7

    colSourceDate = 2 'Source column for date
    rowSourceStart = 3 'Source starting row

    rowDestMonthYear = 2 'Destination row to check for month & year matching

    rSource = rowSourceStart
    'loop until the date field on the source sheet is blank
    Do While wsSource.Cells(rSource, colSourceDate).Value <> ""
        cDest = 1
        destBlankColumnCount = 0
        'loop through the destination columns until we've seen 5 blanks
        '(only 3 are ever expected)
        Do Until destBlankColumnCount > 5
            If wsDestination.Cells(rowDestMonthYear, cDest).Value <> "" Then
                destBlankColumnCount = 0
                'check if month matches
                If Month(wsSource.Cells(rSource, colSourceDate).Value) = wsDestination.Cells(rowDestMonthYear, cDest).Value Then
                    'check if year matches
                    If Year(wsSource.Cells(rSource, colSourceDate).Value) = wsDestination.Cells(rowDestMonthYear, (cDest + 1)).Value Then
                        'find last row to copy data to by finding the next blank "Account Name" row
                        rowDestInsertAt = (rowDestMonthYear + 2)
                        Do Until wsDestination.Cells(rowDestInsertAt, (cDest + colDestAccountName)).Value = ""
                            rowDestInsertAt = rowDestInsertAt + 1
                        Loop
                        'copy field data
                        wsDestination.Cells(rowDestInsertAt, (cDest + colDestAccountName)).Value = wsSource.Cells(rSource, colSourceAccountName).Value
                        wsDestination.Cells(rowDestInsertAt, (cDest + colDestPotentialName)).Value = wsSource.Cells(rSource, colSourcePotentialName).Value
                        wsDestination.Cells(rowDestInsertAt, (cDest + colDestRegion)).Value = wsSource.Cells(rSource, colSourceRegion).Value
                        wsDestination.Cells(rowDestInsertAt, (cDest + colDestAmount)).Value = wsSource.Cells(rSource, colSourceAmount).Value
                        wsDestination.Cells(rowDestInsertAt, (cDest + colDestWeightedAmount)).Value = wsSource.Cells(rSource, colSourceWeightedAmount).Value
                    End If
                End If
            Else
                destBlankColumnCount = destBlankColumnCount + 1
            End If
            cDest = cDest + 1
        Loop
        rSource = rSource + 1
    Loop

End Sub 
```

# iphone - 将新内容加载到 UIPopoverController

> ID：15302662
> 
> 赞同：0
> 
> 时间：2013-03-08T20:23:58.760
> 
> 标签：iphone, ios, ipad, uistoryboard, uistoryboardsegue

当用户点击“登录”时，我在我的 iPad 应用程序中使用 Storyboards 和 segues 创建一个弹出窗口。每种登录类型都有自己的 ViewController，需要更多的 popover 控制器。

让主视图控制器生成所有弹出框内容是否合适，或者更确切地说替换一个弹出框控制器的内容？

例如（我将尝试用文本绘图来表示它_）

1.) MainVC -> Popover（“使用电子邮件登录”、“使用 Facebook 登录”等） MainVC <- 用户点击按钮 MainVC -> 弹出框（电子邮件文本字段、密码文本字段） MainVC <- 用户输入内容...

2.) MainVC -> 弹出框（“使用电子邮件登录”、“使用 Facebook 登录”等）弹出框 -> 替换内容（使用文本字段加载视图控制器）新内容 -> 处理 UITextField 输入

我选择了选项 1，因为它很容易实现，尽管选项 2 似乎更有条理。你认为更好的做法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T20:56:20.117

任何一种选择都可以，任何涉及 UI 的东西都不是性能问题。因此，“正确”的答案可能取决于代码复杂性/清晰度等次要考虑因素。我投票赞成在 Storyboard 中创建单独的实例，而不是使用 rutnime 代码重新利用单个实例。

通过单独的视图控制器设置，每个场景都可以针对其内容进行最佳布局，包括使用动态约束。一切都记录在情节提要中，并且需要整理的运行时代码更少。对我来说，最好在故事板上有一些混乱而不是在代码中。您可能有不同的优先级。

如果不同弹出框的 ViewControllers 共享许多行为，请使用继承来减少代码扩散。

# sql - 处理 SQL FILESTREAM 数据损坏和备份

> ID：15302673
> 
> 赞同：3
> 
> 时间：2013-03-08T20:24:39.540
> 
> 标签：sql, sql-server, backup, filestream, corruption

在工作中，我们将为我们的客户存储媒体，例如视频、高清照片和音频，我建议使用 SQL FILESTREAM 来存储这些媒体。

这种方法的主要问题之一是如果 FILEGROUP 损坏会发生什么？

*   这会影响数据库或其功能吗？
*   是否会有任何警告数据可能已损坏？
*   使用损坏的 FILEGROUPS 备份数据库会引发任何警告吗？还是只是正常备份？
*   如果可以使用损坏的数据进行备份，那么还原呢？

还有其他我们应该考虑的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T07:34:03.270

请阅读 CIL。

这种方法的主要问题之一是如果 FILEGROUP 损坏会发生什么？

```
A: 如果 Filestream Filegroup 损坏，那么您的数据库将处于“recovery pending”
状态，就像其他文件组损坏一样。但几乎只有一种
FileStream FileGroup的损坏，就是hdr损坏，是一种
字典文件，保存文件头信息。
```

•这会影响数据库或其功能吗？

```
答：是的，这将使您的数据库无法正常工作。
```

• 是否会有任何警告数据可能已损坏？

```
答：不，如果您的 BLOB 文件中只是数据损坏，则不会发出警告。
实际上那些只是二进制文件，我想不出它可能被破坏的场景。
```

• 使用损坏的 FILEGROUPS 备份数据库是否会引发任何警告？还是只是正常备份？

```
A：如果 Filestream FileGroup 损坏，您的数据库无法正常工作，
您必须恢复数据库。
```

•如果可以对损坏的数据进行备份，那么恢复呢？

```
A：损坏的数据不能备份，可能有脏数据，
但脏数据仍然是合法数据。当我说脏数据的时候，比如
SQL Server中对你的文件流有
权限的人，也会对你的BLOB文件有权限，他们可以直接更新BLOB文件的内容，
这可能会涉及到一些脏数据。
```

```
至于其他问题，您需要
定期对数据库进行完整备份/差异备份/Tranlog 备份，以防万一发生灾难。文件组备份
对您没有帮助。
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T01:03:59.550

如果你关心数据——就像你显然关心的那样，基于这个问题——那么为什么要到处乱跑呢？在您的数据库中声明一个`BLOB`列，让 DBMS 处理您提出的问题。

有人，也许是您团队中的某个人，可能会反对太慢。首先，我挑战这个假设。其次，如果它经过测试并且速度太慢，无论如何都要这样做（！）并将 FILESTREAM 版本保留为外部缓存。这样转储/恢复可以忽略它，并且可以用一个`SELECT`语句纠正损坏/删除。

# solr - Solr 特殊字符未编入索引

> ID：15302676
> 
> 赞同：2
> 
> 时间：2013-03-08T20:24:50.457
> 
> 标签：solr, escaping, special-characters

我已经阅读了很多关于 solr 中的特殊字符并用“\”转义它们的内容，但除非我使用字符串字段类型，否则我没有得到这个为我工作。

我有一个包含`a[b`作为值的索引文本字段。我想搜索此值并仅返回包含该文本的文档（不需要仅包含该文本，但确实需要按该顺序包含这三个字符）。以下是我尝试过的一些查询以及我从 Solr 看到的 parsedQuery：

`q=field:a\\[b`parsedquery: `field:a field:b`(似乎返回任何包含 a 或 ab) `q=field:"a\\[b"`parsedquery: `PhraseQuery(field:"a b")`(似乎返回任何包含`a b`)

我正在使用 text_general 开箱即用 - 我已经尝试了一些推荐的更改，但到目前为止还没有运气。有没有人遇到过这个问题并找到了让它工作的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T03:04:24.073

Solr 默认使用 StandardTokenizerFactory 创建令牌。在创建标记时，此标记器会删除无关字符（可能对任何特殊字符进行标记）。Solr 可能实际上是在“[”上进行标记，因此您没有得到所需的结果。它还可以解释为什么仅在使用字符串类型时才获得所需的结果（因为未分析字符串类型）。尝试使用 WhiteSpaceTokenizerFactory 而不是 StandardTokenizerFactory。WhiteSpaceTokenizerFactory 将对任何空白进行标记，因此，您可以查询您的特殊字符（在转义它们之后）。

请记住在索引分析器以及查询和选择分析器（简而言之，所有分析器）中指定上述标记器。

一个例子 ：-

[http://www.pathbreak.com/blog/solr-text-field-types-analyzers-tokenizers-filters-explained](http://www.pathbreak.com/blog/solr-text-field-types-analyzers-tokenizers-filters-explained)

# java - 如何在 pdf 和 doc 文件上运行 Hadoop wordcount 程序？

> ID：15302681
> 
> 赞同：2
> 
> 时间：2013-03-08T20:25:06.763
> 
> 标签：java, pdf, hadoop, word-count

**如何在 pdf 和 doc 文件上运行 Hadoop wordcount 程序？** 当我尝试在 pdf 文件上运行它时，输出显示奇怪的字符。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T20:43:29.270

您提到的文件格式是二进制的，不适合作为字数的输入，除非将它们预处理成纯文本。您首先必须使用其他工具/库将它们转换为纯文本格式。

可能有一些免费的命令行实用程序可以帮助您做到这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T20:17:17.713

Hadoop不限于处理明文文件，你当然可以处理二进制文件，例如`SequenceFile`s是Hadoop中最常见的二进制格式，但是如果你想要自定义二进制格式，你也可以通过实现自己的`InputFormat`和`RecordReader`.

我建议查看[这篇关于在 Hadoop 中处理 .doc 文件的精彩文章](http://blogs.msdn.com/b/carlnol/archive/2011/12/30/hadoop-binary-streaming-and-f-mapreduce.aspx)，以及[关于处理 .docx 和 .pdf 文件](http://blogs.msdn.com/b/carlnol/archive/2012/01/01/hadoop-binary-streaming-and-pdf-file-inclusion.aspx)的这篇文章，这应该符合您的需求。

# c - 基于类型区分结构

> ID：15302683
> 
> 赞同：3
> 
> 时间：2013-03-08T20:25:17.480
> 
> 标签：c, struct

我有两个不同的结构，类型字段定义（请参见下文）。

```
struct A {
int type;
char type_a[8];
char random[8];
};

struct B {
int type;
char type_b[16];
char random[16];
}; 
```

现在我想根据类型区分这两种结构，例如

```
if (type == A)
struct A *a = (struct A *)buff;
if (type == B)
struct B *b = (struct B *)buff; 
```

我不知道事先在 buff 中传递给我的是什么类型的结构。那么如何从buff中提取类型。类型字段保证是两个结构中的第一个字段。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T20:36:31.610

你可以用 C 语言中的 OOP 设计模式来做这种事情。

这里的想法是一个`Base`结构有一个`type`成员。结构`A`和`B`“扩展” `Base`。由于该`Base`结构是两者的第一个成员`A`和`B`，任何一个都可以转换为`Base`并照此使用。

当您只`Base`需要`A`使用.`B``Base`

```
typedef struct Base {
    int type;
} Base;

typedef struct A {
    Base base;
} A;

typedef struct B {
    Base base;
} B;

int ATYPE = 1;
int BTYPE = 2;

int getType(Base *base) {
    return base->type;
}

int _tmain(int argc, _TCHAR* argv[])
{
    A a;
    B b;
    B *bptr;
    Base *base;
    int baseType;

    a.base.type = ATYPE;
    b.base.type = BTYPE;

    base = (Base*)&b;

    baseType = getType(base);

    // something like this is reasonable,
    // since you know that base is an
    // instance of B.
    if (baseType == BTYPE) {
        bptr = (B*)base;
    }

    if (baseType != BTYPE) return -1;
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T22:15:22.613

C 具有这种数据结构的[联合](http://en.wikipedia.org/wiki/Union_%28computer_science%29)功能。联合在外观上类似于结构，但联合中的每个成员占用相同的内存位置。然后在下面的示例中使用另一个字段，`type`以便您知道如何解释该结构。

使用它，您可以解决您的问题而无需任何转换，并保持编译时类型安全。

这是一个完整的例子：

```
#include <stdio.h>
#include <string.h>

#define TYPE_A 1
#define TYPE_B 2

struct A
{
    char member1[8];
    char member2[8];
};

struct B
{
    char member1[16];
    char member2[16];
};

struct base
{
    int type;
    union
    {
        struct A a;
        struct B b;
    } data;
};

char *get_member2(struct base *buff)
{
    if (buff->type == TYPE_A)
        return buff->data.a.member2;

    if (buff->type == TYPE_B)
        return buff->data.b.member2;

    return NULL;
}

int main(void)
{
    struct base b1;
    struct base b2;

    /* Set up test structs. */

    b1.type = TYPE_A;
    strcpy(b1.data.a.member2, "Hello");

    b2.type = TYPE_B;
    strcpy(b2.data.b.member2, "World");

    /* Print member2 from each struct. */

    printf("%s\n", get_member2(&b1));
    printf("%s\n", get_member2(&b2));

    return 0;
} 
```

输出：

```
Hello
World 
```

[代码：键盘](http://codepad.org/JCOSqNIM)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T20:28:14.080

假设您不想/不能更改 A 和 B：

```
#define TYPE_A 0
#define TYPE_B 1 
```

...

```
struct *B create_B()
{  struct *B= malloc(sizeof B);
   B->type=TYPE_B;
   return B;
} 
```

...

```
void *buff=create_B(); 
```

...

```
struct A a;
a.type=TYPE_A;
void *buff=&a; 
```

...

```
struct A *a=NULL;
struct B *b=NULL;
int type = *((int *)buff);
if (type == TYPE_A)
 a = (struct A *)buff;
else if (type == TYPE_B)
   b = (struct B *)buff; 
```

您的代码的问题是 a 和 b 的范围仅在 if 内，并且可能您更需要它。

# image - 双色调图像的通常位值是多少？

> ID：15302685
> 
> 赞同：0
> 
> 时间：2013-03-08T20:25:33.503
> 
> 标签：image, colors, bitmap

我计划以 1bpp 二进制格式存储一些二值化（双色调）图像。我应该为白色和黑色使用什么值？

*   通常在 RGB 中：

    *   白色是 255,255,255
    *   黑色是 0, 0, 0
*   所以对于双色调：

    *   按照 RGB 标准，白色应该是 1 吗？或 0，表示像素为空白？
    *   按照 RGB 标准，黑色是否应该为 0？或 1，表示像素已填充？

我正在寻找标准或“通常”的方法来做这件事，而不是遵循一种我以后会后悔的不寻常的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T03:03:32.287

> 按照 RGB 标准，白色应该是 1 吗？

是的

> 黑色是否应该为 1，表示像素已填充？

不。相反，以这种方式看待它（RGB方式，即加色）：白色像素“填充”，黑色像素“空”，因为白色像素“有光”，黑色像素什么都没有。

# ruby-on-rails-3 - rails迁移用换行符更改列的默认值

> ID：15302688
> 
> 赞同：1
> 
> 时间：2013-03-08T20:25:46.200
> 
> 标签：ruby-on-rails-3, rails-migrations

```
def change
    change_column :customer, :email_text, :string, :default => 'First Line \n Second Line \n Third Line'
end 
```

我正在尝试进行此迁移，以便此列的默认值将与新行一起使用。当我将这个字段与 simple_form 一起使用时：

```
<%= f.input :email_text, :as => :text, :label => 'E-Mail Text', %> 
```

换行符显示为 \n 而不是换行符。任何人都知道我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T21:31:22.483

这个红宝石“宝石”的另一个很好的例子：

```
1.9.3p327 :001 > '\n' == "\n"
 => false 
```

试试看：

```
:default => "First Line \n Second Line \n Third Line" 
```

# java - 日食中的 toString

> ID：15302691
> 
> 赞同：3
> 
> 时间：2013-03-08T20:25:52.130
> 
> 标签：java, eclipse, templates, tostring

toString 方法在eclipse中生成如下：

```
StringBuilder builder = new StringBuilder();
builder.append("Person [");
if (firstName != null)
    builder.append("firstName=").append(firstName).append(", ");
if (lastName != null)
    builder.append("lastName=").append(lastName).
if (title != null)
    builder.append("title=").append(title).append(", ");
if (car != null)
    builder.append("car=").append(car).append(", ");
    builder.append("]"); 
```

他们为什么不使用更短的形式，例如

```
builder.append("firstName=" + firstName + ", "); 
```

是为了节省`String`创作时间吗？

如何将模板更改为这种格式？

```
${object.className} [${member.name()}=${member.value}, ${otherMembers}] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-08T20:31:31.907

第一种形式稍微快一点 - 在其他形式`StringBuilder`中，在字节码中创建了额外的形式。一般来说，除非字符串创建是在一个紧密的循环中执行的，否则这并不重要。

至于第二个问题，你试过什么？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T20:30:52.453

```
builder.append("firstName=" + firstName + ", "); 
```

严格来说，它的效率低于 Eclipse 使用的形式，因为它创建了一个中间体`String`，然后立即被丢弃。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T20:32:54.980

除非我误解了这个问题，否则您可以在 Eclipse Preferences 中更改模板：Java -> Code Style -> Code Templates。

# c - 如何获取行数导致 SQL (C ANSI) 中的查询？

> ID：15302692
> 
> 赞同：1
> 
> 时间：2013-03-08T20:25:53.767
> 
> 标签：c, select, sqlite, count, mysql-num-rows

我需要在 C 示例中的 SQLite 中获取查询结果的行数：

```
SELECT name, age FROM test WHERE age > 18 
```

我如何在 SQLite C 中获取此查询的行数。

我看到命令 sqlite3_total_changes() 到受影响的行（使用 INSERT、UPDATE、DELETE 时）， sqlite3_column_count() 来获取列数，但我需要行数 sqlite3_column_bytes()。

我需要一个等于 PHP 的 mysql_num_rows 的函数。

如果示例返回 3 行，我如何获得 3 行 SQLite？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T20:28:32.207

这可能是你想要的：

```
SELECT Count(name) FROM test WHERE age > 18 
```

这将计算测试中年龄 > 18 且名称不为空的所有行。如果您想计算名称为空的人，请使用

```
SELECT Count(*) FROM test WHERE age > 18 
```

这是一些文档：

[http://www.sqlite.org/lang_aggfunc.html](http://www.sqlite.org/lang_aggfunc.html)

# c# - 输入格式不正确

> ID：15302693
> 
> 赞同：0
> 
> 时间：2013-03-08T20:26:08.607
> 
> 标签：c#, exception, file-io, type-conversion, runtime-error

我正在尝试读取文件，然后将值放入矩阵中。我收到输入字符串格式不正确的错误。它还有故障排除提示，“将字符串转换为 DateTime 时，在将每个变量放入 DateTime 对象之前解析字符串以获取日期。这很奇怪，因为我什至没有在任何地方使用 DateTime。下面是我的代码。我我确定我错过了一些愚蠢的东西。如果我忘记了您需要查看的代码的任何部分，请告诉我。

代码（C#）：

```
class Program
{
    private static string line;
    private static int[,] matrix;
    private static int numOfCities;
    private static int startCity;
    private static int[] greedyPath;
    private static int greedyRecursionCount;
    private static int total;
    private static int lowerBoundTotal;
    private static string filename = "points.txt";

    static void Main(string[] args)
    {
        readTxtFile();

        getStartCity();

        greedyStart();

        totalTour();

        lowerBound();

        compareAll();

        Console.ReadKey();

    }

    private static void readTxtFile()
    {
        numOfCities = 0;
        TextReader tr = new StreamReader(filename);
        numOfCities = int.Parse(tr.ReadLine().Trim());

        line = "1";
        int index = 0;
        matrix = new int[numOfCities,numOfCities];

        for (int i = 0; i < numOfCities; i++)
        {

            line = tr.ReadLine();

            for (int j = 0; j < numOfCities; j++)
            {

                matrix[i, j] = int.Parse(line[index].ToString().Trim());
                index = index + 2;

            }//end inner for loop
            index = 0;

        }//end outer for loop

        tr.Close();
    }
} 
```

文件内容：

```
1000 //Number of points that are in the file
16   11 //XY-Points that are separated by 3 spaces
10   45
29   47 
```

任何帮助，将不胜感激。先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T20:50:13.513

```
matrix[i, j] = int.Parse(line[index].ToString().Trim()); 
```

没有做你认为应该做的事。您将第一个字符转换为字符，然后是字符串，然后修剪然后解析。所以你的第一次转换将是 1，然后它会在尝试转换“”时失败。您正在寻找：

```
matrix[i, j] = int.Parse(line.substring(index,2).Trim());
index += 5; 
```

您还需要查看您的矩阵。当它看起来需要一个 numcities x 2 时，您正在创建一个方阵。您只有一个 x 和 y 坐标。将内部循环更改为：

```
for (int j = 0; j < 2; j++) 
```

并相应地调整矩阵。

# visual-studio-2008 - 独特的 6 位数字生成器算法

> ID：15302695
> 
> 赞同：-2
> 
> 时间：2013-03-08T20:26:12.350
> 
> 标签：visual-studio-2008, c#-4.0

我需要为满足以下要求的 C# 应用程序生成唯一编号 -。

1.  6位数。

2.  每天大约产生1000个号码

    ```
    byte[] buffer = Guid.NewGuid().ToByteArray();
    return string.Concat(((int)type).ToString(), 
     BitConverter.ToInt64(buffer, 0).ToString().Substring(1,    
                    6-((int)type).ToString().Length)); 
    ```

目前，我正在使用这种算法，但会出现重复，所以我想要另一个符合上述要求的算法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T21:33:09.943

如果您只生成 1,000 个 6 位数字，则非常简单：

```
int NumberToGenerate = 1000;
Random rnd = new Random();
HashSet uniqueNumbers = new HashSet<int>();
while (uniqueNumbers.Count < NumberToGenerate)
{
    int next = Random.Next(100000, 1000000);
    uniqueNumbers.Add(next);
} 
```

循环几乎肯定会产生一些重复，但`HashSet`会拒绝它们。

另一种方法是创建一个从 100,000 到 999,999 的所有数字的列表。然后，当您需要一个数字时，从列表中随机删除一个项目。

```
private List<int> allNumbers = new List<int>();

// in the constructor
for (var i = 100000; i < 1000000; ++i)
{
    allNumbers.Add(i);
}

private Random rnd = new Random();

public int GetNumber()
{
    var index = rnd.Next();
    var rslt = allNumbers[index];
    allNumbers.RemoveAt(index);
    return rslt;
} 
```

打电话`RemoveAt`有点贵。您可以通过以下方式加快速度：

```
 // move the last number in the list to fill the hole
    allNumbers[index] = allNumbers[allNumbers.Count-1];
    // remove the last item
    allNumbers.RemoveAt(allNumbers.Count-1); 
```

这将最大限度地减少在删除中移动的内存量。

或者，您可以创建所有数字的列表，将它们随机排列，然后从前面返回它们：

```
// assume you've created the list of numbers, as above
// Shuffle them
for (int i = 0; i < allNumbers.Count; ++i)
{
    int j = rnd.Next(i, allNumbers.Count);
    int temp = allNumbers[i];
    allNumbers[i] = allNumbers[j];
    allNumbers[j] = temp;
} 
```

现在，您可以返回前 1,000 个数字，或者您可以编写一个方法，以便在调用时按顺序返回下一个数字。

# hash - 计算两个元素散列时没有冲突的概率 h(x)=(x^2+1)mod3

> ID：15302697
> 
> 赞同：-1
> 
> 时间：2013-03-08T20:26:15.997
> 
> 标签：hash, hashtable, hashset, geohashing, universal-hashing

如何计算插入 2 个元素后没有碰撞的概率。答案是 4/9，但我看不出它是 4/9

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T20:55:19.873

我不太确定这是一个合适的 SO 问题，但这是我对答案的看法。这绝不是一个合法的数学证明，但它确实有效。

对于您的函数 h(x) = (x^2+1)mod3，让我们放一些样本值。

h(1) = (1+1)mod3 = 2mod3 = 2
h(2) = (4+1)mod3 = 5mod3 = 2
h(3) = (9+1)mod3 = 10mod3 = 1

h(4) = 17mod3 = 2
h(5) = 26mod3 = 2
h(6) = 37mod3 = 1

由于函数的性质（平方和加 1），这种模式将继续存在。

因此，我们有 (2/3) 的机会将函数的输入评估为 2，并且有 (1/3) 的机会评估为 1。

如果我们插入两个元素，我们发生碰撞的概率是两个输入评估为 2 的概率加上两个输入评估为 1 的概率。这是：

(2/3) *(2/3) + (1/3)* (1/3) = 4/9 + 1/9 = 5/9

因此，任何两个输入不会发生冲突的概率是 1 - (5/9)

或 4/9。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T21:38:05.483

关于为什么该模式成立的一些背景知识，请考虑所有等效类 mod 3，即 { 0, 1, 2 }。

如果`x mod 3 = 0`那么`x^2 mod 3 = (x mod 3)(x mod 3) mod 3 = (0 * 0) mod 3 = 0`通过分配等价，那么`x^2 + 1 mod 3 = 1`

如果`x mod 3 = 1`那么`x^2 mod 3 = (x mod 3)(x mod 3) mod 3 = (1 * 1) mod 3 = 1`，那么`x^2 + 1 mod 3 = 2`

如果`x mod 3 = 2`那么`x^2 mod 3 = (x mod 3)(x mod 3) mod 3 = (2 * 2) mod 3 = 1`，那么`x^2 + 1 mod 3 = 2`

它仍然不是 100% 正式的，而且它是一个用尽的笨拙示例，但它让您了解为什么这种模式适用于自然数并集 { 0 }。我也希望我更熟悉堆栈上的数学格式。假设是时候打元？:)

# java - 在 Spring 中添加管理部分

> ID：15302699
> 
> 赞同：0
> 
> 时间：2013-03-08T20:26:35.340
> 
> 标签：java, spring, spring-mvc

我有一个 Spring Web 项目，它需要一个管理部分。我认为这部分会很简单，并且我会遇到安全问题，但我什至无法指向 /admin/ 部分。

我的 dispatcher-servelet.xml 中有以下内容来将 JSP 文件映射到控制器：

```
<context:component-scan base-package="controller"/>
<context:component-scan base-package="controller.admin"/>

<bean id="viewResolver"
      class="org.springframework.web.servlet.view.InternalResourceViewResolver"
      p:prefix="/WEB-INF/jsp/"
      p:suffix=".jsp" /> 
```

现在在 /WEB-INF/jsp/ 中有一个标有“admin”的文件夹，我有 adminindex.jsp。我在 web.xml 中也有以下内容

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/applicationContext.xml</param-value>
    </context-param>
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>
    <servlet>
        <servlet-name>dispatcher</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <load-on-startup>2</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>dispatcher</servlet-name>
        <url-pattern>*.htm</url-pattern>
    </servlet-mapping>
    <session-config>
        <session-timeout>
            30
        </session-timeout>
    </session-config>
    <welcome-file-list>
        <welcome-file>redirect.jsp</welcome-file>
    </welcome-file-list>
    <security-constraint>
        <display-name>Constraint1</display-name>
    </security-constraint>
    <security-constraint>
        <display-name>admin pages</display-name>
        <web-resource-collection>
            <web-resource-name>Administration Pages</web-resource-name>
            <description/>
            <url-pattern>/admin/*</url-pattern>
        </web-resource-collection>
        <auth-constraint>
            <description/>
            <role-name>eCommerceAdmin</role-name>
        </auth-constraint>
        <!--  <user-data-constraint>
            <description/>
            <transport-guarantee>CONFIDENTIAL</transport-guarantee>
        </user-data-constraint>-->
    </security-constraint>
</web-app> 
```

当我尝试访问时

本地主机：8080/NewWebsite/admin/adminindex.htm

，我得到

> 访问请求的资源已被拒绝
> 
> 信息：ContextListener：attributeAdded（'org.apache.jasper.compiler.TldLocationsCache'，'org.apache.jasper.compiler.TldLocationsCache@44d1bd08'）

我访问没有问题

localhost:8080/NewWebsite/index.htm，我还想对 admin 文件夹进行自动重定向，就像根文件夹一样。IE 去

localhost:8080/NewWebsite/ 指向 index.htm。

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T17:23:26.013

首先你需要验证用户？不是吗？否则，您的应用程序将如何识别 ADMIN 正在尝试访问还是普通 USER？
在你这样做之前`security-constraint`从你的**web.xml**
中删除 所以在你的应用程序中添加 spring 身份验证。
首先创建一个 pojo 类以具有`GrantedAuthority`应实现的列表`org.springframework.security.core.userdetails.UserDetails`。下面是一个示例：

```
public class YourPojo implements UserDetails{

    /** The authorities. */
    //This collection will have eCommerceAdmin
    public Collection<GrantedAuthority> authorities;

    /** The username. */
    public String username;

    /** The account non expired. */
    public boolean accountNonExpired;

    /** The credentials non expired. */
    public boolean credentialsNonExpired;

    /** The enabled. */
    public boolean enabled;

    /** The Constant serialVersionUID. */
    private static final long serialVersionUID = -2342376103893073629L;

    /* (non-Javadoc)
     * @see org.springframework.security.core.userdetails.UserDetails#getAuthorities()
     */
    @Override
    public Collection<GrantedAuthority> getAuthorities() {
        return authorities;
    }

    /* (non-Javadoc)
     * @see org.springframework.security.core.userdetails.UserDetails#getPassword()
     */
    @Override
    public String getPassword() {
        return null;
    }

    /* (non-Javadoc)
     * @see org.springframework.security.core.userdetails.UserDetails#getUsername()
     */
    @Override
    public String getUsername() {
        return username;
    }

    /* (non-Javadoc)
     * @see org.springframework.security.core.userdetails.UserDetails#isAccountNonExpired()
     */
    @Override
    public boolean isAccountNonExpired() {
        return accountNonExpired;
    }

    /* (non-Javadoc)
     * @see org.springframework.security.core.userdetails.UserDetails#isAccountNonLocked()
     */
    @Override
    public boolean isAccountNonLocked() {
        return accountNonLocked;
    }

    /* (non-Javadoc)
     * @see org.springframework.security.core.userdetails.UserDetails#isCredentialsNonExpired()
     */
    @Override
    public boolean isCredentialsNonExpired() {
        return credentialsNonExpired;
    }

    /* (non-Javadoc)
     * @see org.springframework.security.core.userdetails.UserDetails#isEnabled()
     */
    @Override
    public boolean isEnabled() {
        return enabled;
    }

    /**
     * Sets the authorities.
     *
     * @param authorities the new authorities
     */
    public void setAuthorities(Collection<GrantedAuthority> authorities) {
        this.authorities = authorities;
    }

    /**
     * Sets the username.
     *
     * @param username the new username
     */
    public void setUsername(String username) {
        this.username = username;
    }

    /**
     * Sets the account non expired.
     *
     * @param accountNonExpired the new account non expired
     */
    public void setAccountNonExpired(boolean accountNonExpired) {
        this.accountNonExpired = accountNonExpired;
    }

    /**
     * Sets the account non locked.
     *
     * @param accountNonLocked the new account non locked
     */
    public void setAccountNonLocked(boolean accountNonLocked) {
        this.accountNonLocked = accountNonLocked;
    }

    /**
     * Sets the credentials non expired.
     *
     * @param credentialsNonExpired the new credentials non expired
     */
    public void setCredentialsNonExpired(boolean credentialsNonExpired) {
        this.credentialsNonExpired = credentialsNonExpired;
    }

    /**
     * Sets the enabled.
     *
     * @param enabled the new enabled
     */
    public void setEnabled(boolean enabled) {
        this.enabled = enabled;
    }

} 
```

以下是您需要的 HTTP 标记。

```
<!-- to use Spring security tags -->
    <bean class="org.springframework.security.web.access.expression.DefaultWebSecurityExpressionHandler" />
<http pattern="/login*" security="none"/>
<http pattern="/static/**" security="none"/>        
<http auto-config="false">      
        <intercept-url pattern="/admin/**" access="eCommerceAdmin" />
        <form-login login-page="/login" default-target-url="/welcome"
            authentication-failure-url="/loginfailed" />
        <logout logout-success-url="/logout" />     

        <session-management>
            <concurrency-control max-sessions="1" error-if-maximum-exceeded="true" />
        </session-management>           
    </http> 
```

现在定义您的身份验证提供程序。

```
<bean id="customeAuthProvider" class="your.auth.provider.class">
  </bean>

   <authentication-manager >        
        <authentication-provider ref="customeAuthProvider" ></authentication-provider>
  </authentication-manager> 
```

这`customeAuthProvider`应该实施`org.springframework.security.authentication.AuthenticationProvider`。

```
@Override
    public Authentication authenticate(Authentication authentication)
            throws AuthenticationException {

        UsernamePasswordAuthenticationToken userToken = (UsernamePasswordAuthenticationToken)authentication;
        String username = userToken.getName();
        String password = (String) authentication.getCredentials();
          //Do whatevr you want with the credentials
         //Then populate the authorities for this credential
         YourPojo user=new YourPojo ();
         user.setUserName("add username");
        //set other details
        List<GrantedAuthority> grantedAuthorityList = new ArrayList<GrantedAuthority>();
        //if user is admin add the below line
        GrantedAuthorityImpl grantedAuthorityImpl = new GrantedAuthorityImpl("eCommerceAdmin");
       //Add other authorities as applicable like 'user' etc.
       user.setAuthorities(grantedAuthorityList);
       return new UsernamePasswordAuthenticationToken(username, password, user.getAuthorities()); 
```

FYR 你可以在你的 web.xml 中引用安全 xml 文件，如下所示。你的 web.xml 应该有 spring 安全过滤器。

```
<context-param>
 <param-name>contextConfigLocation</param-name>
  <param-value>
    /WEB-INF/your-applicationContext.xml
    /WEB-INF/your-spring-security.xml
  </param-value>
</context-param>
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>

<filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>
<filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

您还需要 spring 安全依赖项。如果您在项目中使用 Maven，请添加以下依赖项，否则您可以手动下载这些 jar 并继续。

```
<!-- Spring Security -->
<dependency>
    <groupId>org.springframework.security</groupId>
    <artifactId>spring-security-core</artifactId>
    <version>${spring.version}</version>
</dependency>
<dependency>
    <groupId>org.springframework.security</groupId>
    <artifactId>spring-security-web</artifactId>
    <version>${spring.version}</version>
</dependency>

<dependency>
    <groupId>org.springframework.security</groupId>
    <artifactId>spring-security-config</artifactId>
    <version>${spring.version}</version>
</dependency> 
```

现在你可以走了.. FYR 经历[这个](http://www.mkyong.com/tutorials/spring-security-tutorials/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T23:42:20.783

The problem isn't in the viewresolver so the info you provide isn't sufficient to answer your question. Please show a bit more config esp you security configuration.

Besides your question. The component-scan on controller.admin shouldnt be necessary cause the first one will scan it.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T15:44:30.693

我认为你应该考虑使用spring security，然后你可以配置spring security角色系统来控制访问。下面是从我的一个应用程序中截取的片段，您可以看到 /admin 路径要求调用者具有管理员角色。Spring security 设置起来有点复杂，但是一旦设置它就可以很好地工作。

```
<http auto-config='true' use-expressions="true" >

    <!-- public resources that everyone should be able to access -->
    <intercept-url pattern="/favicon.ico" access="permitAll" />
    <intercept-url pattern="/login"       access="permitAll" />
    <intercept-url pattern="/login/error" access="permitAll" />
    <intercept-url pattern="/**/*.js"        access="permitAll" />
    <intercept-url pattern="/**/*.jsp"       access="denyAll" />

    <intercept-url pattern="/admin/**"     access="hasRole('admin')" />

    </session-management>

</http> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T20:51:41.767

您是否尝试将前缀更改为 WEB-INF/jsp/admin/ ？

# ruby-on-rails-3 - 使用简单形式和引导程序附加和前置

> ID：15302708
> 
> 赞同：0
> 
> 时间：2013-03-08T20:27:09.197
> 
> 标签：ruby-on-rails-3, haml, simple-form

我需要能够使用引导程序追加和前置来使用简单的表单输入标记。我可以很容易地做到这一点，但不能让他们都工作。这可能吗。

这是我使用的haml，这是一个前置，但我最后需要另一个，所以使用append。

```
= f.input :domain, wrapper: :prepend, label: false do
  %span.add-on
    %span.icon @
  = f.input_field :domain 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-05T16:58:33.997

最简单的方法是：

```
<%= f.input :field, :wrapper_html => {class: "input-prepend input-append"} do %>
  <span class="add-on">$</span>
    <%= f.input_field :field %>
  <span class="add-on">%</span>
<% end %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T03:21:43.360

simple_form 仅具有 or 的包装器，`:prepend`但`:append`不能同时具有两者。幸运的是，构建一个兼具两者的自定义包装器真的很容易。只需复制并粘贴其中一个包装器并稍微修改它。

这是我的解决方案：

配置/初始化程序/simple_form.rb

```
config.wrappers :prepend_append, :tag => 'div', :class => "control-group", :error_class => 'error' do |b|
  b.use :html5
  b.use :placeholder
  b.use :label
  b.wrapper :tag => 'div', :class => 'controls' do |input|
    input.wrapper :tag => 'div', :class => 'input-prepend input-append' do |pa|
      pa.use :input
    end
    input.use :hint,  :wrap_with => { :tag => 'span', :class => 'help-block' }
    input.use :error, :wrap_with => { :tag => 'span', :class => 'help-inline' }
  end
end 
```

而且，在您看来：

```
= f.input :url, wrapper: :prepend_append, label: false do
  %span.add-on something
  = f.input_field :url, input_html: { class: "span2" }
  %span.add-on something 
```

最后，将其添加到您的 css 中：

```
.input-prepend .add-on,
.input-append input {
  float: left;
} 
```

希望有帮助。请务必重新启动服务器。

# css - 为什么无论浏览器或版本如何，我的网站在 Windows 上的呈现方式与在 Mac 上的呈现方式不同？

> ID：15302711
> 
> 赞同：3
> 
> 时间：2013-03-08T20:27:20.127
> 
> 标签：css, forms, browser, cross-platform, incompatibility

![铬 25 Mac](../Images/e1660f19263e22d0a89f5101d0f03008.png) ![铬 23 窗口](../Images/103efc314d2bde2933aacc7825b94c75.png) ![火狐19 Mac](../Images/1f10ba65d61977407d4f5a16322510e5.png) ![火狐 19 窗口](../Images/2b77c9ac539e881be3502cf1fb1f53e5.png) ![即 8](../Images/061ed863348f66c07c5517dab544983d.png)

（图片，从上到下：Chrome 25 Mac、Chrome 23 Windows、FF 19 Mac、FF 19 Windows、IE 8）

根据[browsershots.org](http://browsershots.org/)的说法，当使用当前主要的 Mac OS X 浏览器（Firefox 18-19、Chrome 23-25 和 Safari 5-6）时，我的网站呈现出我想要的外观。但是在 Windows 上，这些相同的浏览器中的每一个，包括 IE8 和 Opera 12，都不会像 Mac 对应的那样显示，而且它们似乎都以几乎相同的“错误”方式显示，即菜单项 font-size 要么被误解，要么覆盖——因为它们都显示相同，我认为这一定不是浏览器不兼容，而是系统不兼容。

是什么导致了这种情况，以及如何以及在哪里创建特定于系统的黑客攻击？我是一个业余爱好者，对此知之甚少；我确信可能没有正确完成的一件事是我将搜索表单强制进入导航栏的笨拙方式......这是我可以使菜单搜索表单适用于 Wordpress 主题的唯一方法。我觉得它没有正确分类，但我不明白这些东西。

TL;DR：所有主流浏览器在给定平台上显示的站点相同，但站点在不同平台上的显示不一样。

一些希望相关的CSS：

```
#access,.menu a,.current_page_item {
    display: compact;
    border: none;
    font-size: 30px;
    font-family: 'ChopinScriptRegular', Palatino, Helvetica !important;
    font-weight: 400;
    font-style: normal;
    letter-spacing: -1px;   
}

/*Search form*/
#searchform{
    border: none;
}
#searchform input{
    font-family: 'ChopinScriptRegular', Palatino, Helvetica;
    font-size: 30px;
    border: none;
}
::-webkit-input-placeholder {
    color: #666;
    padding-top: 9px;
}
:-moz-placeholder { /* Firefox 18- */
    color: #666;
    padding-bottom: 2px;
}
::-moz-placeholder {  /* Firefox 19+ */
    color: #666;
    padding-bottom: 2px;
}
:-ms-input-placeholder {  
    color: #666;
}
input, select {
    width: 135px;
    height: 50px;
    border: none;
    background: none !important;    /* menubg search hover, see default.css*/
    -webkit-box-sizing: border-box; /* Safari/Chrome, other WebKit */
    -moz-box-sizing: border-box;    /* Firefox, other Gecko */
    box-sizing: border-box;         /* Opera/IE 8+ */
}
.widget_search .screen-reader-text{
    display: none;
}
/*FF*/
@-moz-document url-prefix() {
    input, select {position: relative; bottom: 2px;}
}
/*IE*/
@media screen and (-ms-high-contrast: active), (-ms-high-contrast: none) {
    input, select {position: relative; bottom: 5px;}
}

/*end*/ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T21:09:05.947

这是你的罪魁祸首：

```
.windows .sf-menu a {
  font-size: 12px;
} 
```

关于`line 168`styles.css

您正在为这些锚链接设置默认大小，但它并未应用于输入元素（搜索）。这就是为什么它们在 Windows 中都很不稳定。它不适用于 Mac 浏览器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T20:35:25.767

正如@user2019515 所说，您很可能使用 OSX 中不可用的字体，请使用以下之一：

1.  标准字体，例如`font-family: Arial, Helvetica, sans-serif;`
2.  谷歌网络字体[http://www.google.com/webfonts](http://www.google.com/webfonts)
3.  Cufon [http://cufon.shoqolate.com/generate/](http://cufon.shoqolate.com/generate/)（无论操作系统或浏览器如何，每次都能完美呈现字体）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T20:30:16.640

很可能您正在使用一种仅在 Windows 上可用但在 Mac 上不可用的字体，您应该指定一些不同的字体，如下所示：

```
font-family: Arial, Helvetica, sans-serif; 
```

# zend-framework2 - Zend Framework 2 重定向

> ID：15302713
> 
> 赞同：10
> 
> 时间：2013-03-08T20:27:28.510
> 
> 标签：zend-framework2

如何重定向到另一个模块？

```
return $this->redirect()->toRoute(null, array(
    'module'     => 'othermodule',
    'controller' => 'somecontroller',
    'action'     => 'someaction'
)); 
```

这似乎不起作用，有什么想法吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-08T21:04:31.647

这就是我从控制器重定向到另一个路由的方式：

```
return $this->redirect()->toRoute('dns-search', array(
    'companyid' => $this->params()->fromRoute('companyid')
)); 
```

dns-search 是我要重定向到的路由，companyid 是 url 参数。

最后 URL 变为 /dns/search/1 （例如）

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-01-09T11:50:17.730

重定向的简单方法之一是：

```
return $this->redirect()->toUrl('YOUR_URL'); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-07-23T10:02:27.550

这是ZF2中的重定向方式：

```
return $this->redirect()->toRoute('ModuleName',
  array('controller'=>$controllerName,
        'action' => $actionName,
        'params' =>$params)); 
```

我希望这可以帮助你。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-04-30T13:04:23.720

Google 认为，这个问题与**zf2 redirect with anchor**有关，所以如果您不介意，我会在此处添加答案。我们可以`fragment`在的第三个参数中使用选项`toRoute`：

```
public function doAction(){
    return $this->redirect()
         ->toRoute('chats', 
                   array('action' => 'view', 
                       'id' => $message->getChat()->getId()
                   ),
                   array('fragment' => 'm' . $message->getId())
    );
} 
```

我的路线：

```
'chats' => array(
    'type' => 'segment',
    'options' => array(
        'route' => '/chats/[:action/][:id/]',
        'constraints' => array(
            'action' => '[a-zA-Z][a-zA-Z0-9_-]*',
            'id' => '[0-9]+',
        ),
        'defaults' => array(
            'controller' => 'Application\Controller\Chats',
            'action' => 'index',
        ),
    ),
), 
```

因此，用户将被定向到类似`/chats/view/12/#m134`

# jquery - 如何在可扩展问题的末尾添加 + 或 -？

> ID：15302715
> 
> 赞同：3
> 
> 时间：2013-03-08T18:22:46.360
> 
> 标签：jquery

我有一个常见问题解答页面，当您单击问题时，答案会从问题下方展开。我想想办法在问题的末尾加上一个“+”，当你点击它时，它会变成一个“-”。是否有捷径可寻？我不确定您需要什么代码才能给我答案，所以我将这里是 html：

```
{exp:channel:entries channel="faq" sort="asc" {gv_param_disable_default}}
    <ul>
    <li class="trigger"><p><a href="#">{faqs_question}</a></p>
        <div class="hidden">
        <p>{faqs_answer}</p>
        </div>

    </li>
    </ul>
{/exp:channel:entries} 
```

和我的jQuery：

```
$('.trigger').click(function() {
   $(this).children('.hidden').toggle('slow');
return false;
 }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T18:40:51.100

```
{exp:channel:entries channel="faq" sort="asc" {gv_param_disable_default}}
    <ul>
    <li class="trigger"><p><a href="#">{faqs_question}</a></p> <span class="plus">[+]</span><span class="minus">[-]</span>
        <div class="hidden">
        <p>{faqs_answer}</p>
        </div>

    </li>
    </ul>
{/exp:channel:entries} 
```

Javascript

```
$('.trigger').click(function() {
   $(this).children('.hidden').toggle('slow', function() {
        if ($(this).is(':visible')) {
            $(this).parent().children('.plus').hide();
            $(this).parent().children('.minus').show();
        } else {
            $(this).parent().children('.plus').show();
            $(this).parent().children('.minus').hide();
        }
   });
    return false;
 }); 
```

parent() 应该是 li.trigger，然后我们要选择子 .plus 和 .minus 来改变可见性。

此外，您必须在页面加载时隐藏 [-]（最好在 css 中）。如果您希望减号/加号可点击，只需将它们移动到 a 标签中即可。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T19:11:05.807

您可以使用 CSS 生成的内容来执行此操作，方法是沿以下几行切换 li.trigger 的类：

（我稍微简化了你的 HTML）：

```
<ul>
  <li class="trigger">
    <p class="question"><a href="#">{faqs_question}</a></p>
    <p class="answer">{faqs_answer}</p>
  </li>
</ul> 
```

JS：

```
$('.trigger').click(function() {
  $(this).toggleClass('open').children('.answer').toggle('slow');
  return false;
}); 
```

CSS：

```
li.trigger p.answer {
  display: none;    
}
li.trigger p.question:after {
  content: "+";
  padding-left: .5em;   
}
li.open p.question:after {
  content: "-";
} 
```

你可以设计更多的样式；我只是添加了一点填充。

# linux - 使用 Linux binutils 设置 ELF 图像基地址的优雅方法？

> ID：15302718
> 
> 赞同：2
> 
> 时间：2013-03-08T20:27:38.260
> 
> 标签：linux, linker, ld, binutils

对于个人项目，我需要编写一个在非默认内存地址加载的可执行文件。从[这个 SO question](https://stackoverflow.com/questions/8116648/why-is-the-elf-entry-point-0x8048000-not-changeable)中，我知道我可以设置 ELF 的入口地址并手动修改部分地址，以便可执行文件有效地基于我选择的某个地址。但是，答案表明，这仅在我不进行 glibc 初始化（我需要此项目）的情况下才有效，并且每次编译时都设置段内存地址会很困难（更不用说乏味了）。

似乎应该有更好的方法在构建时为 ELF 设置基地址，但如果需要，我将使用构建后的脚本手动进行。`ld`如果它不是特定于 PE 端口的，则此选项将是完美的：

```
--image-base value
  Use value as the base address of your program or dll. This is the lowest 
  memory location that will be used when your program or dll is loaded. To 
  reduce the need to relocate and improve performance of your dlls, each should 
  have a unique base address and not overlap any other dlls. The default is 
  0x400000 for executables, and 0x10000000 for dlls. [This option is specific 
  to the i386 PE targeted port of the linker] 
```

我还没有找到一个 ELF 等价物。不存在吗？自己解析 ELF 文件不会是世界末日，但似乎这个功能应该存在于某个地方。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T12:16:43.553

ELF入口点可以在链接器响应文件中设置，可以用-T传递给ld

使用 --verbose 进行虚假链接将向您显示默认的链接器响应文件（可能是特定于系统的，但实际上它并没有那么糟糕，每个操作系统每个拱门一个）。

请注意，可能存在其他约束（例如位于文本/代码段中的入口点）

有关拖拽自定义链接器文件的实际示例，请参阅 Free Pascal 项目，它这样做是为了实现资源。

# asp.net - XML 解析器限制

> ID：15302720
> 
> 赞同：0
> 
> 时间：2013-03-08T20:27:41.470
> 
> 标签：asp.net, web-services, xml-parsing, ibm-datapower

所以我有一个向 Web 服务发送请求（执行搜索）的应用程序，我得到以下异常：

```
<env:Envelope xmlns:env="http://schemas.xmlsoap.org/soap/envelope/" xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsrr="http://wsrr_standard.[myCompany].com/2.0/"><env:Body><env:Fault><faultcode>200 OK</faultcode><faultstring>DataPower Error Message: document size limit of 4194304 bytes exceeded, aborting</faultstring><detail><errorCode>0x00030003</errorCode><errorNode>XICN0003:6807276</errorNode><errorOrigin>DataPower</errorOrigin><errorLevel>CRITICAL</errorLevel><ConsumerIDfromrequest/><ServiceSubscriberIDfromrequest/><RequestURI>/[MyService].svc</RequestURI><BackendOperation>{http://www.xmlns.[myCompany].com/interfaces/v1_0_2/}[MyMethod]</BackendOperation></detail></env:Fault></env:Body></env:Envelope>'. ---> System.Net.WebException: The remote server returned an error: (500) Internal Server Error. 
```

我正在对错误**DataPower 错误消息进行一些在线研究：超出了 4194304 字节的文档大小限制，正在中止**并遇到以下页面：[即使消息大小小于 XML 解析器限制设置，也超出了 XML 解析器限制](http://www-01.ibm.com/support/docview.wss?uid=swg21588939)，并且根据一种可能的解决方案是“禁用探测或增加附加到服务的 XML 管理器上的 XML 解析器限制”

我的问题如下，我可以从我的服务更改 web.config 中的 XML Parser 限制吗？或者还有什么其他可能的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T22:22:11.347

没有其他解决方案。不得不增加 DataPower 中 XML 管理器的大小。

# sed - 使用 sed 将文本附加到上一行的末尾

> ID：15302721
> 
> 赞同：1
> 
> 时间：2013-03-08T20:27:45.157
> 
> 标签：sed

并感谢您考虑我的问题！

我有这种格式的 nagios 配置文件：

```
define host{
    use             generic-camera
    host_name       camera_7
    alias           camera facing the 7th door at headquarters
    address         172.16.202.21
    parents         hq_switch
    hostgroups      cameras,fixed-cameras
    } 
```

我想要完成的是使用 sed 匹配 IP 地址，并将文本附加到它之前的行。我已经看到很多建议如何将文本附加到与正则表达式匹配的行，但没有看到如何附加到前一个。我想将地址下列出的 IP 的 MAC 地址附加到别名行。这就是我希望在 sed 运行后需要注意的事项：

```
define host{
    use             generic-camera
    host_name       camera_7
    alias           camera facing the 7th door at headquarters MAC 00:01:02:aa:bb:cc
    address         172.16.202.21
    parents         hq_switch
    hostgroups      cameras,fixed-cameras
    } 
```

它需要匹配 IP 的原因是 bash 脚本可以从其地址中获取设备的正确 MAC。

我也有可用的 awk，如果这是 awk 比 sed 写得更干净的情况。

感谢您的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T20:49:19.077

使用 awk：

```
awk 'NR>1{if ($0 ~ "^ *address") print x " MAC 00:01:02:aa:bb:cc"; else print x};
   {x=$0} END{print x}' in-file 
```

### 编辑：通过脚本而不是硬编码从 IP 地址获取 Mac 地址：

```
awk 'NR>1{if ($0 ~ "^ *address") {"arp "$2 | getline line; split(line, tok, " ");
    print x " MAC " tok[4];} else print x};{x=$0} END{print x}' in-file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T20:51:02.497

使用`sed`：

```
sed -n '
  ## Set label 'a'.
  :a

  ## Read and save every line until we find the IP.
  /172\.16\.202\.21/! { 
    N
    ba 
  }

  ## Append the MAC just before the last '\n' (previous line).
  s/^\(.*\)\n/\1 MAC 00:01:02:aa:bb:cc\n/

  ## Print all saved until now.
  p

  ## Remove all printed.
  s/^.*$//

  ## Enter a loop to save all content until end of file.
  :b
  $! { 
    N
    bb 
  }

  ## Remove the additional '\n' added by the 'N' command and print.
  s/\n//
  p

' infile 
```

它产生：

```
define host{
    use             generic-camera
    host_name       camera_7
    alias           camera facing the 7th door at headquarters MAC 00:01:02:aa:bb:cc
    address         172.16.202.21
    parents         hq_switch
    hostgroups      cameras,fixed-cameras
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T13:37:17.413

我觉得不需要转义 IP 地址字段中的点，文件中没有位置会包含不是 IP 地址的长字符串，所以我只是撕掉了 . 匹配以简化我的事情。shell 脚本加上我请求帮助的 sed 行如下所示：

```
#!/bin/bash
for (( h = 200; h <= 204; h++ ))
do
for (( j = 1; j <= 150; j++ ))
do
i="172.16.$h.$j"
mac=`grep $i\  /proc/net/arp |awk '{print $4}'`

sed "/alias/{N; /[^0-9]$i\$/s/\n/ MAC $mac&/;}" $1 >> ${1}.new1
done
done

grep -A4 -B4 MAC ${1}.new1 > ${1}.new2
sed -i "s/^--//g" ${1}.new2

sed -n -e '1,/host/p' /usr/local/nagios/etc/objects/${1} |sed '$d' > ${1}.top
grep -B4 -A999 HOST\ GROUP\ DEF /usr/local/nagios/etc/objects/${1} > ${1}.tail

mkdir -p new
cat ${1}.top ${1}.new2 ${1}.tail > new/${1} 
```

我确信有更清洁的方法可以做同样的事情，但这是我必须使用我目前（公认的低水平）技能的工作。特别是，每个输出文件仅更改 1 个主机，有时每个文件有数百个，因此将它们全部拆分，仅更改数百个主机中的 1 个，然后 grepping 将单个更改吐到其他地方应该是清理了，但如果其他人最终解决了这个问题，这应该可以工作，至少它对我有用，但 YMMV。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-09T12:38:32.893

另一个 sed 尝试：

```
sed '/alias/{N; /[^0-9]172\.16\.202\.21$/s/\n/ MAC 00:01:02:aa:bb:cc&/;}' file 
```

# xcode - cocos2d 从数组中扣除对象

> ID：15302724
> 
> 赞同：0
> 
> 时间：2013-03-08T20:27:59.103
> 
> 标签：xcode, arrays, cocos2d-iphone, ccsprite

在下面的代码中，我怎么能说在一个数组中有 5 个苹果，它们会一个接一个地掉下来，它们之间有几秒钟（或随机秒）。每次苹果落下时，数组都会变为 5-1=4 然后 4-1=3 依此类推，当它达到 1-1=0 时，它应该停止落下苹果。

我的 .h 文件：

```
@interface xyz : CCLayer {
        CCArray *appleArray;
}

@property (nonatomic, retain) CCArray *appleArray; 
```

我的 .m 文件：

```
@synthesize appleArray;

-(id) init
    {
        if( (self=[super init])) {

            // Init CCArray
            self.appleArray = [CCArray arrayWithCapacity:5];

            for (int i = 0; i < 5; i++) {
                CCSprite *Apple = [CCSprite spriteWithFile:@"Apple4.png"];
                [self addChild:Apple];
                int positionX = arc4random()%450;
                [Apple setPosition:ccp(positionX, 768)];

                // Add CCSprite into CCArray
                [appleArray addObject:Apple];
            }

            [self scheduleUpdate];
        }
        return self;
    }

    -(void) update: (ccTime) dt
    {
        for (int i = 0; i < 5; i++) {

            // Retrieve 
            CCSprite *Apple = ((CCSprite *)[appleArray objectAtIndex:i]);

            Apple.position = ccp(Apple.position.x, Apple.position.y -300*dt);
            if (Apple.position.y < -100+64)
            {
                int positionX = arc4random()% 450; //not 1000
                [Apple setPosition:ccp(positionX, 768)];
            }
        }
    } 
```

任何帮助，将不胜感激！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T19:32:40.003

确保包含 QuartzCore 框架并链接到它。

在您的 .h 中添加这些实例变量：

```
int _lastSpawn;
double _mediaTime;
int _mediaTimeInt;
int _lastIndex;
BOOL _randomTimeSet;
int _randomTime; 
```

在您的 .m init 方法中添加以下行：

```
_mediaTime = CACurrentMediaTime();
_lastSpawn = (int)_mediaTime; 
```

将您的更新方法更改为：

```
-(void) update: (ccTime) dt
{

    // Get Random Time Interval between 0 and 10 seconds.
    if(!_randomTimeSet) {
        _randomTime = arc4random() % 11;
        _randomTimeSet = YES;
    }

    // Set current time
    _mediaTime = CACurrentMediaTime();
    _mediaTimeInt = (int)_mediaTime;

    // Check to see if enough time has lapsed to spawn a new Apple.
    if(_mediaTimeInt < (_lastSpawn + _randomTime)) { return; }

    // Check if first apple has been added or last apple has been added.
    NSNumber *num = [NSNumber numberWithInt:_lastIndex];
    if(num == nil) {
        _lastIndex = 0;
    } else if(num == [appleArray count]-1) {
        _lastIndex = 0;
    }

    CCSprite *Apple = ((CCSprite *)[appleArray objectAtIndex:_lastIndex]);

    Apple.position = ccp(Apple.position.x, Apple.position.y -300*dt);
    if (Apple.position.y < -100+64)
    {
        int positionX = arc4random()% 450; //not 1000
        [Apple setPosition:ccp(positionX, 768)];
    }
    _lastIndex += 1;
    _randomTimeSet = NO;
    _mediaTime = CACurrentMediaTime();
    _lastSpawn = (int)_mediaTime;

} 
```

# sql - 将多个表值连接到一个表中以便清楚地看到事物

> ID：15302725
> 
> 赞同：1
> 
> 时间：2013-03-08T20:28:03.033
> 
> 标签：sql, sql-server, tsql, join

我有 4 张桌子：

订单：

```
OrderID Detail  Discount
------------------------
1001    xxx     True
1002    xxx     True
1003    xxx     True
1004    xxx     False
1005    xxx     True
1006    xxx     True 
```

订单折扣：

```
OrderID DiscountTypeID  DiscountID
----------------------------------
1001     1              8
1002     2              12
1003     1              9
1005     2              13
1006     2              9 
```

**优惠券**（`DiscountTypeID = 1`）：

```
CouponID    Title
------------------------
8           CouponTitle8
9           CouponTitle9 
```

**广告系列**( `DiscountTypeID = 2`):

```
CampaignID  Title
--------------------------
9           CampaignTitle9
12          CampaignTitle12
13          CampaignTitle13 
```

我需要一个查询，它将所有 4 个表合并到 1 个表中，这将给出一些结果，例如：

结果：

```
OrderID Discount    DiscountType    DiscountTitle
-----------------------------------------------------
1001    True        Coupon          CouponTitle8
1002    True        Campaign        CampaignTitle12
1003    True        Coupon          CouponTitle9
1004    False               
1005    True        Campaign        CampaignTitle13
1006    True        Campaign        CampaignTitle9 
```

请注意，某些优惠券 ID 可能作为活动 ID 存在。在这种情况下，像 CouponID 和 CampaignID 都存在“9”。

除了所需的查询之外，关于在构建查询时如何/为什么使用此类命令的正确解释会很棒，因为我不只是寻找答案，而且我也想自己处理类似的场景。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T21:17:55.923

下面的代码应该可以工作——我做**了一点修改**：我添加了一个“DiscountType”表。

我知道您正在寻找的只是一个快速而简单的答案，但我认为数据模式可以设置得更好。为每种折扣类型设置一个完整的表格既不可扩展也不灵活，并且随着时间的推移，像所建议的那样的查询只会变得更棘手、更糟糕和更卑鄙。当然，这一切都取决于您的要求。

```
SELECT
  OrderId = o.OrderId,
  Discount = CASE WHEN o.Discount = 1 THEN 'True' ELSE 'False' END,
  DiscountType = COALESCE(dt1.DiscountType, dt2.DiscountType, ''),
  DiscountTitle = COALESCE(coup.Title, camp.Title, '')
FROM
  Orders o
  LEFT JOIN 
    (OrderDiscounts od1       
     JOIN Coupons coup ON coup.CouponID = od1.DiscountID
     LEFT JOIN DiscountType dt1 ON dt1.DiscountTypeId = od1.DiscountTypeId
     ) ON o.OrderId = od1.OrderId
       AND o.Discount = 1
       AND od1.DiscountTypeID = 1
  LEFT JOIN 
    (OrderDiscounts od2 
     JOIN Campaigns camp ON camp.CampaignID = od2.DiscountID
     LEFT JOIN DiscountType dt2 ON dt2.DiscountTypeId = od2.DiscountTypeId
     ) ON 
       od2.OrderID = o.OrderID 
       AND o.Discount = 1
       AND od2.DiscountTypeID = 2 
```

在 SqlFiddle上亲自[查看。](http://sqlfiddle.com/#!3/0ad74/6)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T20:46:49.190

它应该如下所示：

```
SELECT Orders.OrderID,
CASE when OrderDiscounts.OrderID is NULL THEN False ELSE True end,
CASE when OrderDiscounts.DiscountTypeID  = 1 THEN 'Coupon' 
     when OrderDiscounts.DiscountTypeID  = 2 THEN 'Campaign' 
     else '' end,
CASE WHEN OrderDiscounts.DiscountTypeID  = 1 THEN Coupons.Title 
     WHEN OrderDiscounts.DiscountTypeID  = 2 THEN Campaigns.Title  
     ELSE '' end
FROM Orders
LEFT JOIN OrderDiscounts on Orders.OrderID = OrderDiscounts.OrderID
LEFT JOIN Coupons on OrderDiscounts.DiscountID = Coupons.CouponID
LEFT JOIN Campaigns on OrderDiscounts.DiscountID = Campaigns.CampaignID 
```

# javascript - 循环遍历对象数组并在单击时显示

> ID：15302729
> 
> 赞同：-1
> 
> 时间：2013-03-08T20:28:13.820
> 
> 标签：javascript, jquery, arrays, loops

```
var q = [{
        question1: "What is the capital of California?",
        choices: ["LA", "SF", "Sac"],
        correctAnswer:"Sacramento"},
        {question2: "What is the capital of Arizona?",
        choices: ["A", "B", "C"],
        correctAnswer:"B"},
        {question3: "What is the capital of Washington?",
        choices: ["D", "E", "F"],
        correctAnswer:"E"}]; 
```

我正在尝试制作一个有趣的测验应用程序，这就是我到目前为止所拥有的。我创建了这个数组，我希望能够在每次用户点击“提交”按钮时循环遍历它并将问题和选择打印为单选输入。

这就是我到目前为止所拥有的。我意识到现在我只打印 question1 但我不太确定如何从这里开始。

```
(function () {

    function init() {
        $('.submitBtn').hide();
        generateQuestions();
    }

    function generateQuestions() {

        var q = [{
            question1: "What is the capital of California?",
            choices: ["Los Angeles", "San Francisco", "Sacramento"],
            correctAnswer: "Sacramento"
        }, {
            question2: "What is the capital of Arizon?",
            choices: ["Los Angeles", "San Francisco", "Sacramento"],
            correctAnswer: "Sacramento"
        }, {
            question3: "What is the capital of Washington?",
            choices: ["Los Angeles", "San Francisco", "Sacramento"],
            correctAnswer: "Sacramento"
        }];

        var quiz = $('.quiz');

        $.each(q, function (index, obj) {
            $.each(obj, function (key, value) {
                $('.getStarted').click(function () {
                    $(this).fadeOut(500);
                    quiz.append(obj.question1);
                    $('.submitBtn').fadeIn(500);
                });
            });

        });

    }

    init();

})(); 
```

[小提琴](http://jsfiddle.net/TpmUY/)

**问题**：我如何正确地遍历这个数组并打印每个问题以及它的选择。你可以在上面看到我的尝试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T20:56:48.580

1.  在问题数组中使用相同类型的索引以获得更好的管理。
2.  使用更好的方法来检查/监听点击。在内部使用它们`each`无济于事。
3.  使用全局变量来循环问题。

[这是](http://jsfiddle.net/TpmUY/1/)更新小提琴的链接。jQuery 代码（改动很大）如下：

```
var i = 0;
var q = [{
    question: "What is the capital of California?",
    choices: ["Los Angeles", "San Francisco", "Sacramento"],
    correctAnswer: "Sacramento"
}, {
    question: "What is the capital of Arizon?",
    choices: ["Los Angeles", "San Francisco", "Sacramento"],
    correctAnswer: "Sacramento"
}, {
    question: "What is the capital of Washington?",
    choices: ["Los Angeles", "San Francisco", "Sacramento"],
    correctAnswer: "Sacramento"
}];
var ansWer = "";
$('#quiz-container, #btn-container .submitBtn').hide();

function generateQuestions() {
    $('#quiz-container, #btn-container .submitBtn').fadeIn('slow');
    var txt = "<h3>" + q[i].question + "</h3><br />";
    $(q[i].choices).each(function (idx, valuE) {
        txt += "<input type='radio' name='choice' value='" + valuE + "' />" + valuE;
    });
    ansWer = q[i].correctAnswer;
    $('.quiz').html(txt);
    i = ++i % q.length;
}
$('.getStarted').on('click', function () {
    $(this).parent().fadeOut(200);
    generateQuestions();
});
$('.submitBtn').on('click', function (e) {
    e.stopPropagation();
    if (ansWer == $('.quiz input:checked').val()) generateQuestions();

}); 
```

[我完成了作业，有很多空闲时间，所以重写了整个剧本。:P]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T20:57:21.003

您的所有对象都应该使用相同的键，例如`question`, not `question1`,`question2`等。

```
 var q = [{
        question: "What is the capital of California?",
        choices: ["Los Angeles", "San Francisco", "Sacramento"],
        correctAnswer: "Sacramento"
    }, {
        question: "What is the capital of Arizon?",
        choices: ["Los Angeles", "San Francisco", "Sacramento"],
        correctAnswer: "Sacramento"
    }, {
        question: "What is the capital of Washington?",
        choices: ["Los Angeles", "San Francisco", "Sacramento"],
        correctAnswer: "Sacramento"
    }]; 
```

然后，您需要为问题设置一个循环，并为选项设置一个嵌套循环：

```
$.each(q, function(i, obj) {
    var select = quiz.append('<select id="question'+i+'">'+obj.question+'</select>');
    $.each(obj.choices, function(j, choice) {
        select.append('<option value="'+j+'">'+choice+'</option>');
    });
}); 
```

您不应该在循环内建立一个点击处理程序，这应该做一次，首先调用这个代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T20:59:30.277

您可以只使用常规的 javascript 循环。另外，我猜你想打印每个问题，所以你的问题对象可能应该有一个 name 属性而不是 question1、question2 等。

```
function generateQuestions() {

 var q = [{
    name: "What is the capital of California?",
    choices: ["Los Angeles", "San Francisco", "Sacramento"],
    correctAnswer: "Sacramento"
 }, {
    name: "What is the capital of Arizon?",
    choices: ["Los Angeles", "San Francisco", "Sacramento"],
    correctAnswer: "Sacramento"
 }, {
    name: "What is the capital of Washington?",
    choices: ["Los Angeles", "San Francisco", "Sacramento"],
    correctAnswer: "Sacramento"
 }];

for(var i = 0; i < q.length; i++) {
  var $quiz = $('.quiz');
  var question = q[i];
  $quiz.append(question.name);

  for(var j = 0; j < question.choices.length; j++) {
    $quiz.append(question.choices[j]);
  }
}
} 
```

# python - SublimeText2：SublimeCodeIntel 即使建议也不会添加导入

> ID：15302739
> 
> 赞同：0
> 
> 时间：2013-03-08T20:28:33.983
> 
> 标签：python, autocomplete, sublimetext2, sublimetext

我正在尝试使用`SQLAlchemy`并`SublimeText2`执行以下顺序

![在此处输入图像描述](../Images/20ca4e1a75d45002901d0e58182246c3.png)

然后我做 ![在此处输入图像描述](../Images/85fb16d09189bdf0a9f60a5196d92e39.png) 然后 ![在此处输入图像描述](../Images/74d1318602872d5c8121b2299727a2ae.png)

所以我的代码是

```
from sqlalchemy.ext.declarative import declarative_base

Base = declarative_base()

class Transaction(Base):
    __tablename__ = 'transaction'
    # id = Column('id', Integer, primary_key=True)
    id = Column('id', Integer, primary_key=True)

def main():
    print 'Hello World!'

if __name__ == '__main__':
    main() 
```

当我尝试将其构建为 python build 我看到

```
line 10, in Transaction
    id = Column('id', Integer, primary_key=True)
NameError: name 'Column' is not defined
[Finished in 0.2s with exit code 1] 
```

这是因为它不导入文件中的`Column`,`Integer`

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T21:23:06.640

我的理解是，SublimeCodeIntel 会解析你导入的模块，并根据你导入的内容提出建议。从他们的[github 页面](https://github.com/Kronuz/SublimeCodeIntel)：

> 导入自动完成 - 实时显示可用模块/符号的自动完成。

我在他们的文档中没有看到他们说它会自动为您导入模块的任何地方，我自己也没有发现这个功能，因为我在 Sublime Text 中使用过它。

附带说明一下，将 PyDev 插件与 Aptana Studio 或 Eclipse 一起使用可为您提供很多关于导入和自动完成等功能。诚然，您现在使用的是完整的 IDE，而不是轻量级的文本编辑器，但两者肯定各有利弊。

# activerecord - 在控制器中使用演示者，就像它是模型一样

> ID：15302742
> 
> 赞同：1
> 
> 时间：2013-03-08T20:28:43.970
> 
> 标签：activerecord, controller

我在 Rails 控制器的索引操作中有这个：

```
 def index
    if current_user.nil?
      @programs = Program.paginate(page: params[:page])
    else
      @programs = ProgramPresenter.all_for(current_user, Program).paginate(page: params[:page])
    end
    respond_with @programs
  end 
```

`ProgramPresenter#all_for`返回一个程序演示者数组。当然，`.paginate()`from`will_paginate`不起作用，因为这不是数组实现的方法。然而，我想让其余的控制器和视图以与我通常处理`ActiveRecord`模型集合的方式类似的方式处理该“数组”。

那里的最佳做法是什么？

# javascript - 忽略按键按下时的输入字符

> ID：15302746
> 
> 赞同：9
> 
> 时间：2013-03-08T20:29:08.977
> 
> 标签：javascript

我想忽略手机输入中的某些字符，以便数据库只有数字。我知道我可以在服务器端（使用 PHP）轻松做到这一点，但我试图更好地理解 js 事件。我的问题是：

如果我有基本输入：

```
var phoneInput = document.getElementById("phoneInput"); 
```

我可以使用“onkeydown”添加一个事件监听器，效果很好

```
phoneInput.onkeydown = function(e){
  var c = String.fromCharCode(e.keyCode);
  var patt = /\d/;
  if(!patt.test(c)) return false;
}; 
```

但是如果我尝试使用“addEventListener”做同样的事情，返回 false 似乎什么都不做

```
phoneInput.addEventListener("keydown",function(e){
  var c = String.fromCharCode(e.keyCode);
  var patt = /\d/;
  if(!patt.test(c)) return false;
}); 
```

我只是不明白为什么。提前感谢您可以照亮主题的任何光线。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-08T20:36:49.313

我强烈建议不要更改用户的输入或以其他方式阻止他们在执行操作时输入内容。它令人困惑并导致糟糕的用户体验。

理想情况下，您应该保留服务器端验证，然后使用 HTML5 功能，例如：

```
<input type="number" /> Allows only numbers
<input type="text" pattern="[0-9\. -]*" /> Allows numbers, spaces, periods and hyphens
<input type="text" required /> Specifies a required field 
```

现代浏览器将阻止提交表单并向用户显示有用的错误消息（您可以使用`title`属性对其进行自定义）。

但是，作为一般参考，`return false;`并不一定会取消该事件。为此，您应该使用以下命令：

```
// if you haven't already:
e = e || window.event;
// to cancel the event:
if( e.preventDefault) e.preventDefault();
return false; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-07-24T20:57:05.610

我必须为我正在从事的项目做类似的事情。我就是这样做的。

```
// prevent users from typing alpha/ symbol characters on select fields
$("#modal-region").on("keydown", "#markdown, #sku", function(e) {

    var key = e.which;
    // when a keydown event occurs on the 0-9 keys the value 
    // of the "which" property is between 48 - 57 
    // therefore anything with a value greater than 57 is NOT a numeric key

    if ( key > 57) {
        e.preventDefault();

    } else if (key < 48) {

    // we don't want to disable left arrow (37), right arrow (39), delete (8) or tab (9)
    // otherwise the use cannot correct their entry or tab into the next field!

        if (key != 8 && key != 9 && key != 37 && key != 39 ) {
            e.preventDefault();
        }
    }

}); 
```

# java - 为什么我的数据打印不正确？付款计算器表

> ID：15302753
> 
> 赞同：2
> 
> 时间：2013-03-08T20:29:55.980
> 
> 标签：java

我似乎无法弄清楚为什么数据出现错误。我认为我的方程式编码正确。任何帮助将不胜感激！

这是我的代码：

```
package loanmonthlycalc;

import java.util.Scanner;

public class LoanMonthlyCalc {

public static void main(String[] args) {
    Scanner keyboard = new Scanner(System.in);

    //Get Data
    System.out.println("Loan Monthly Payment Table");
    System.out.print("Enter loan amount: \n");
    double loanAmount = keyboard.nextDouble();
    System.out.print("Enter rate range: \n");
    double initialRate = keyboard.nextDouble();
    double finalRate = keyboard.nextDouble();
    System.out.print("Enter rate count: \n");
    int rateCount = keyboard.nextInt();

    //Print Table
    System.out.println();
    System.out.print("Year |");
    double rate = initialRate;
    double inc = ((finalRate - initialRate) / (rateCount - 1));
    for (int count = 1; count <= rateCount; count++) {
        String percent = "%";
        System.out.printf("%8.2f%s ", rate * 100, percent);
        rate = (rate + inc);
    }//for each rate
    System.out.print("\n-----|");
    for (int count = 1; count <= rateCount; count++) {
        System.out.print("-----------");
    }
    int constantA = 50000;
    System.out.println();
    if (loanAmount <= constantA) {
        for (int year = 1; year <= 10; year++) {

            System.out.printf("%4d |", year);

            for (int count = 1; count <= rateCount; count++) {
                int monthCount = (year * 12);
                double monthlyRate = (rate / 12);
                double rateFactor = (Math.pow(1 + monthlyRate, monthCount));
                double monthPay = loanAmount * monthlyRate * rateFactor / (rateFactor - 
                System.out.printf("%10.2f", monthPay);
            }//for

            System.out.println();
        }//for

    }//if

    if (loanAmount > constantA) {
        for (int year = 5; year <= 30; year += 5) {

            System.out.printf("%4d |", year);

            for (int count = 1; count <= rateCount; count++) {
                int monthCount = (year * 12);
                double monthlyRate = (rate / 12);
                double rateFactor = (Math.pow(1 + monthlyRate, monthCount));
                double monthPay = loanAmount * monthlyRate * rateFactor / (rateFactor - 
                System.out.printf("%10.2f", monthPay);
            }//for
            System.out.println();
        }//for

    }//if

}//Main
}//LoanMonthlyCalc

and here is my output:

Loan Monthly Payment Table
Enter loan amount: 
140000
Enter rate range: 
.04 .1
Enter rate count: 
5

Year |    4.00%     5.50%     7.00%     8.50%    10.00% 
-----|-------------------------------------------------------
   5 |   3078.97   3078.97   3078.97   3078.97   3078.97
  10 |   1968.34   1968.34   1968.34   1968.34   1968.34
  15 |   1635.47   1635.47   1635.47   1635.47   1635.47
  20 |   1493.00   1493.00   1493.00   1493.00   1493.00
  25 |   1423.06   1423.06   1423.06   1423.06   1423.06
  30 |   1386.41   1386.41   1386.41   1386.41   1386.41 
```

该表应如下所示：

```
Year |     4.00%     5.50%     7.00%     8.50%    10.00%
-----|------------------------------------------------------------
   5 |   2578.31   2674.16   2772.17   2872.31   2974.59
  10 |   1417.43   1519.37   1625.52   1735.80   1850.11
  15 |   1035.56   1143.92   1258.36   1378.64   1504.45
  20 |    848.37    963.04   1085.42   1214.95   1351.03
  25 |    738.97    859.72    989.49   1127.32   1272.18
  30 |    668.38    794.90    931.42   1076.48   1228.60 
```

该作业给出的 2 个方程是：

月供 = 贷款金额 * 月利率 * 利率因子 / (利率因子-1)

其中，费率因子 = (1+月费率)^(月数)

我假设：

月费率 = 费率/12

和

月数 = (年 * 12)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T20:32:10.093

注意缺失`%`

改变

```
 System.out.printf("10.2f", monthPay); 
```

至

```
 System.out.printf("%10.2f", monthPay); 
```

将 if 从 for 中移出，如下所示：

```
 if (loanAmount <= constantA) {
        for (int year = 1; year <= 10; year++) {

            System.out.printf("%4d |", year);

            for (int count = 1; count <= rateCount; count++) {
                int monthCount = (year * 12);
                double monthlyRate = (rate / 12);
                double rateFactor = (Math.pow(1 + monthlyRate, monthCount));
                double monthPay = loanAmount * monthlyRate * rateFactor / (rateFactor - 1);
                System.out.printf("%10.2f", monthPay);
            }//for

            System.out.println();
        }//for

    }//if 
```

# c# - 在ajax之后更新webBrowser html

> ID：15302754
> 
> 赞同：0
> 
> 时间：2013-03-08T20:30:16.040
> 
> 标签：c#, ajax, browser

在通过 AJAX 函数更新后，我需要获取 webBrowser 的更新 html

例如，我导航到“page1.asp”，但“page1.asp”包含一个从另一个页面加载内容的 iframe。它还有一个 jQoery 函数，可以在 xx 秒后显示一个提交按钮。

我的问题是如何从 webBrowser 获取最新的 html？

我尝试更新但没有运气，

```
webBrowser.Update(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T20:51:46.007

好吧，这是一个有点棘手的问题，您需要正确遵循以下准则才能实现目标。

1.  您需要在表单上创建一个计时器。用 tick 绑定它并给出大约 500 ms 的间隔。
2.  在 timer_tick 事件中写下这段代码：

    if (browser.ReadyState == WebBrowserReadyState.Complete)

3.  一旦您发现就绪状态已完成，您就会寻找您认为在完成 ajax 请求后将更新的 html 元素。

您可以通过这种方式检查任何元素：

```
 HtmlElementCollection forms = browser.Document.GetElementsByTagName("form");
        HtmlElement form = null;
        foreach (HtmlElement el in forms)
        {
            string name = el.GetAttribute("name");
            if (name == "DATA")
            {
                form = el;
                break;
            }
        } 
```

4）一旦你有了你的元素，你就可以继续你的工作。

更新：这是您可以根据需要扩展的计时器滴答编码确保您已设置`Timer1.Inverval = 100`（100 毫秒）

```
 private void Timer1_Tick(sender, args) 
    {
        Application.DoEvents();

// make sure your are pulling right element id
        HtmlElement cTag = webBrowser.Document.GetElementById("myelement");         

        if(cTag != null) // if elemnt is found than its fine. 
        { 
            cTag.SetAttribute("value", "Eugene");
            Timer1.Enabled = false;
        } 
        else 
        {
// dont worry, the ajax request is still in progress... just wait on it and move on for the next tick. 
        }
        Application.DoEvents(); // you can call it at the end too.
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T20:36:08.083

使用`WebBrowser.DocumentText()`.

[来自 MSDN](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.documenttext.aspx)

> 此属性包含当前文档的文本，即使已请求另一个文档。如果设置此属性的值，然后立即再次检索它，如果 WebBrowser 控件没有时间加载新内容，则检索到的值可能与设置的值不同。您可以在 DocumentCompleted 事件处理程序中检索新值。或者，您可以通过在循环中调用 Thread.Sleep 方法来阻止线程直到加载文档，直到 DocumentText 属性返回您最初设置的值。

尝试在 DocumentCompleted() 事件处理程序中运行调用 DocumentText()。如果因为 iFrame 不引发此事件而无法执行此操作，则只需设置一个计时器并每隔几秒检索一次文本。

# iphone - PhoneGap 可以访问 iPhone 的语音识别软件吗？

> ID：15302756
> 
> 赞同：2
> 
> 时间：2013-03-08T20:30:26.530
> 
> 标签：iphone, cordova, voice-recognition

不仅仅是使用麦克风——我指的是 iPhone 将口语翻译成文本的能力。就像 Siri 使用的一样，但减去了整个“理解自然语言”部分。只是逐字逐句地弄清楚所说的话。语音识别。这是一个可访问的功能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T21:18:09.680

您必须编写一个运行 Objective-C 代码的**PhoneGap 插件来进行语音识别。**

请参考以下链接

[phonegap-语音识别-sdk](https://stackoverflow.com/questions/13120877/phonegap-speech-recognition-sdk)

[首次测试PhoneGap-Plugins](http://www.raymondcamden.com/index.cfm/2011/10/12/First-test-of-PhoneGap-Plugins)

[语音识别与phonegap-or-sencha](https://stackoverflow.com/questions/10013319/speech-recognition-with-phonegap-or-sencha)

# jquery - 引导框架 - 始终打开至少一个手风琴（又名折叠）项目

> ID：15302760
> 
> 赞同：6
> 
> 时间：2013-03-08T20:30:49.237
> 
> 标签：jquery, twitter-bootstrap, accordion, collapse

我在我的网站上使用 Bootstrap，只是在某些页面内容中添加了一个手风琴，也就是折叠。

它工作正常，但我想**始终保持至少一个面板打开**。

目前，面板总是切换打开/关闭，请参见下面的示例：

[http://twitter.github.com/bootstrap/javascript.html#collapse](http://twitter.github.com/bootstrap/javascript.html#collapse)

有没有人找到解决方法？

这是来自 Boostrap 站点的代码，与我当前的实现类似（使用数据属性对其进行初始化）：

```
<div class="accordion" id="accordion2">
  <div class="accordion-group">
    <div class="accordion-heading">
      <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseOne">
        Collapsible Group Item #1
      </a>
    </div>
    <div id="collapseOne" class="accordion-body collapse in">
      <div class="accordion-inner">
        Anim pariatur cliche...
      </div>
    </div>
  </div>
  <div class="accordion-group">
    <div class="accordion-heading">
      <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseTwo">
        Collapsible Group Item #2
      </a>
    </div>
    <div id="collapseTwo" class="accordion-body collapse">
      <div class="accordion-inner">
        Anim pariatur cliche...
      </div>
    </div>
  </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T17:50:19.580

这个问题的解决方案在这里： [你如何让 Twitter Bootstrap Accordion 保持一组开放？](https://stackoverflow.com/questions/15725717/how-do-you-make-twitter-bootstrap-accordion-keep-one-group-open)

感谢@aron.lakatos 指出另一个已解决的问题。虽然问题是一样的，但在这个问题之后的几周内，有人问了解决的问题:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-21T12:39:33.757

[http://jsfiddle.net/SMT9D/61/](http://jsfiddle.net/SMT9D/61/)

```
$('.accordion-toggle').on('click',function(e){
    if($(this).parents('.accordion-group').children('.accordion-body').hasClass('in')){
        e.preventDefault();
        e.stopPropagation();
    }
}); 
```

**如果页面中有滚动条，**则应添加`e.preventDefault();` **以防止 HTML 锚的默认行为`#`**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T21:02:46.717

当有人单击活动组时，您必须阻止 Bootstrap 执行任何操作。

在 bootstrap-collapse.js 中搜索处理此问题的函数。

你看过[http://twitter.github.com/bootstrap/javascript.html#collapse](http://twitter.github.com/bootstrap/javascript.html#collapse) > Usage > Options吗？

# android - android sdk - 如何在虚拟设备中获取本机邮件客户端？

> ID：15302763
> 
> 赞同：1
> 
> 时间：2013-03-08T20:30:59.490
> 
> 标签：android, email, testing, sdk

我刚刚下载了 Android SDK 包并完成了创建和启动虚拟 Android 设备 (4.2.2) 的过程。现在我正在尝试找到本机电子邮件客户端。似乎没有安装，如果我尝试使用联系人“登录帐户”，按钮会单击，但没有任何反应。

难道我做错了什么？如何安装或访问原生 Android 电子邮件客户端？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T21:13:25.240

如果您使用 AVD 的旧版本（即 4.0.3），它将具有本机电子邮件客户端（具有交换支持）。无论出于何种原因，本机电子邮件/交换客户端似乎并未包含在 4.2 模拟器图像中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T21:00:42.847

**对于较低版本的 Android：**

您需要修改*Emulator Image*的一些核心组件。按照[这些说明](http://techdroid.kbeanie.com/2011/01/android-market-on-emulator-22.html)在模拟器上设置*Android 电子市场。*这还将添加电子邮件功能。另请记住，`IMG`此解决方案提供的 s 可能会针对您的电子邮件帐户和密码进行网络钓鱼，因此我建议创建一个新的*gmail*帐户，仅用于测试被黑客入侵的模拟器。

**对于更高版本的 Android：**

听起来您无法做到这个简单的解决方案： [如何在模拟器上安装电子邮件客户端](https://stackoverflow.com/questions/13107457/how-to-install-email-client-on-emulator)

所以我建议您查看有关添加 Google Play 商店的其他帖子，例如[Android 4.0 模拟器上的 Google Play](https://stackoverflow.com/questions/11154222/google-play-on-android-4-0-emulator)

# asp.net-mvc - 防止 TagBuilder.MergeAttribute 对属性文本进行编码

> ID：15302765
> 
> 赞同：3
> 
> 时间：2013-03-08T20:31:10.090
> 
> 标签：asp.net-mvc, spam-prevention, tagbuilder

我创建了一个对电子邮件地址进行编码的 Html 助手，以防止垃圾邮件。这与 MarkdownSharp 库在自动生成电子邮件链接时使用的技术相同。

问题是对`TagBuilder.MergeAttribute`破坏链接的属性文本进行编码。是否可以覆盖此行为或至少以另一种方式指定属性。我知道我可以回退到仅使用字符串连接或 a`StringBuilder`但`TabBuilder`确实提供了许多好处，例如轻松合并其他 HTML 属性。

```
 /// <summary>
    /// Creates an encoded email link in the hopes of foiling most SPAM bots
    /// </summary>
    public static IHtmlString EmailLink(this HtmlHelper html, string email, string text = null, object htmlAttributes = null)
    {
        Ensure.Argument.NotNullOrEmpty(email, "email");

        var encodedEmail = EncodeEmailAddress(email);

        var tb = new TagBuilder("a");
        tb.MergeAttribute("href", "mailto:" + encodedEmail);

        tb.InnerHtml = text ?? encodedEmail;

        if (htmlAttributes != null)
        {
            tb.MergeAttributes(new RouteValueDictionary(htmlAttributes));
        }

        return new HtmlString(tb.ToString());
    }

    /// <summary>
    /// encodes email address randomly  
    /// roughly 10% raw, 45% hex, 45% dec 
    /// note that @ is always encoded and : never is
    /// </summary>
    private static string EncodeEmailAddress(string addr)
    {
        var sb = new StringBuilder(addr.Length * 5);
        var rand = new Random();
        int r;
        foreach (char c in addr)
        {
            r = rand.Next(1, 100);
            if ((r > 90 || c == ':') && c != '@')
                sb.Append(c);                         // m
            else if (r < 45)
                sb.AppendFormat("&#x{0:x};", (int)c); // &#x6D
            else
                sb.AppendFormat("&#{0};", (int)c);    // &#109
        }
        return sb.ToString();
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T21:07:19.010

I do not believe your helper will do anything meaningful to help reduce spam. When crawlers use HTML parsers, they're seeing the decoded strings, not the encoded ones. It is the same logic as in the browser itself. So all they need to do is strip the mailto: prefix, and they now have the original email address.

If you still wish to pursue this, you must use string concatenation. TagBuilder isn't designed to work with input that is already encoded. Make sure that you encode the &, ', and " characters if you go this route.

# batch-file - 批量读取文件中的每一行

> ID：15302766
> 
> 赞同：1
> 
> 时间：2013-03-08T20:31:14.717
> 
> 标签：batch-file

我有这种类型的文件txt：

```
007   87855
008   87823
015   87830 
```

两列由选项卡分隔

我想这样做：

```
read each line of input.txt
if %%test == first_column_value_file
then assign %%second_column_value_file to %%var

"test" for example is 008. 
```

当我的 %%a 与第一列的值匹配时，我可以停止读取文件。可以批量进行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T23:17:05.750

我使用了@rene 答案的模拟版本来提出这个问题（不是 rene 的答案也可以）......

```
@echo off
set test=002
for /f "tokens=1,2" %%a in (test.txt) do if %%a==%test% set var=%%b & goto end
:end
set test
set var
pause>nul 
```

内容`test.txt`：

```
001 00001
002 00002
003 00003 
```

代码输出：

```
test=002
var=00002 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T20:51:10.907

列用制表符分隔太糟糕了。如果它们用空格分隔，这将起作用......（直接从命令行（因此不需要批处理文件）

```
for /f "tokens=1,2 delims= "  %a in (input.txt) do if %a==008 set result=%b 
```

如果您回显 %result% 您会在与 008 作为第一个标记匹配的行上看到第二个标记的内容。

这个版本可以在批处理脚本中使用，并修复了分隔符是一个制表符的问题（我必须学会不要那么精确/明确）。

```
set result=
for /f "tokens=1,2"  %%a in (input.txt) do if %%a==008 set result=%%b

echo Result is %result% 
```

# jquery - jQuery Drop Down Hover on Div（不仅仅是链接）

> ID：15302771
> 
> 赞同：2
> 
> 时间：2013-03-08T20:31:19.240
> 
> 标签：jquery

当您尝试转到 div 时，我试图让此滑块悬停，并且我将使用它作为下拉菜单。

[http://jsfiddle.net/ANFRD/263/](http://jsfiddle.net/ANFRD/263/)

```
 <a href="#" id="toggleLink">Click Here</a>
  <div class="toggledDiv">This is the content of the toggled div</div>
  <div class="alwaysVisible">This is the content of the always visible div</div> 
```

和 JS

```
var toggleState = true;
$('#toggleLink').hover(function () {
if (toggleState) {
    $('.toggledDiv').stop().animate({
        height: 80
    }, 500);
} else {
    $('.toggledDiv').stop().animate({
        height: 0
    }, 500);
}
toggleState = !toggleState;
return false;
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T20:32:42.393

我通过使用[`mouseover`](http://api.jquery.com/mouseover/)on`a.toggleLink`来显示 div 来实现这一点。然后我隐藏[`mouseleave`](http://api.jquery.com/mouseleave/)了`toggleWrapper`div。如果您不想使用包装 div（当您将鼠标悬停在上方时，它可以防止它向上滑动，`a.toggleLink`您可以更改`$('.toggleWrapper')`为`$('.toggledDiv')`

工作[小提琴](http://jsfiddle.net/ncapito/KWdaT/)

旁注，请注意我删除了 ID 并改用类。我建议更改样式并使用类。

```
<div class='toggleWrapper'>
    <a href="#" class="toggleLink">Click Here</a>
    <div class="toggledDiv">This is the content of the toggled div</div>
</div>
<div class="alwaysVisible">This is the content of the always visible div</div> 
```

然后将样式更改为：

```
.toggleLink{
  display:block;
  width:100%
} 
```

JavaScript

```
$('a.toggleLink').mouseover(
    function () {
        $('.toggledDiv').animate({height: 80}, 500);
    }
);                 

$('.toggleWrapper').mouseleave(
    function(){
        $('.toggledDiv').stop().animate({height: 0}, 500);
    }
); 
```

# python - Py2exe/Python26/ArcGIS10 不产生可执行文件

> ID：15302774
> 
> 赞同：0
> 
> 时间：2013-03-08T20:31:35.520
> 
> 标签：python, arcgis

我在我的计算机（32 位系统，Windows XP）上运行 ArcGIS 10、Python2.6 和适当的 py2exe 版本。我一直在尝试将 python 脚本打包成 Windows 可执行文件。我的 setup.py 运行没有任何错误，但没有产生任何输出。我在脚本中使用 wxpython 并确保 MSVCP90.DLL 在我的引用目录中，但仍然没有运气。

这是我的 setup.py：

```
from distutils.core import setup
from glob import glob
import py2exe

data_files = [("Microsoft.VC90.CRT.manifest", glob(r'C:\test\viscruntime\*.*'))]
setup(data_files=data_files, windows=["test.py"]) 
```

我应该提一下，这对我来说在 ArcGIS9.3 和 Python 2.5 上运行良好。

更新：从命令行运行脚本产生了一个奇怪的可执行文件。从 Wing IDE 运行它不会。

# spring - 如何在 Freemarker 模板中访问 Spring 应用程序属性？

> ID：15302775
> 
> 赞同：4
> 
> 时间：2013-03-08T20:31:40.170
> 
> 标签：spring, spring-mvc, freemarker

我有使用 Spring 3.1 的 Java webapp，带有用于呈现视图的 Freemarker 模板。我想根据特定应用程序属性的真/假值有条件地在视图中显示链接。

我在中定义了以下应用程序属性`src/main/resources/application.properties`：

`showLink=true`

如果我在 Spring MVC 中使用常规 JSP，我可以使用 SpEL 根据以下值有条件地显示链接`showLink`：

```
<c:if test="${configuration['showLink']}">
    <a href="...">some link</a>
</c:if> 
```

如何在 Freemarker 模板中执行此操作？我尝试做这样的事情，但无法让它工作：

```
<#assign showLink>${configuration['showLink']}</#assign>

<#if showHelpLink>
    <a href="...">some link</a>
</#if> 
```

我查看了[Spring freemarker 宏](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/view.html#views-form-macros)（在 spring.ftl 中），但我看到的最接近的是获取消息属性的能力，而不是应用程序属性。

## 我尝试过但不起作用的事情

1.  我查看了 spring.ftl 中的宏，但最接近的是给我消息属性。

2.  此外，我无法将值注入控制器然后将其放入 中`ModelMap`，因为我的 FreeMarker 模板是所有页面的标题，因此它是自动导入的：

```
<bean id="abstractFreemarkerConfig" class="org.springframework.web.servlet.view.freemarker.FreeMarkerConfigurer" abstract="true">
    ...
    <property name="freemarkerSettings">
        <props>
            <prop key="auto_import">
                /spring.ftl as spring, /myTemplate.ftl as myTemplate
            </prop>
        </props>
    </property>
    ...
</bean> 
```

## 我还没有尝试过的事情

1.  我发现一篇[博客文章](http://adaptiweb.blogspot.sk/2012/10/freemarker-template-with-spring.html)描述了如何手动向 Freemarker 添加对 SpEL 的支持。对于我需要它的这种情况，我宁愿不做所有这些。

2.  创建一个自定义标签库来检索应用程序属性值，所以我可以在我的 freemarker 模板中执行以下操作：

```
<#assign showLink><foo:getAppProperty name="showLink"/></#assign> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T15:31:10.287

我在春天使用加载属性

```
<util:properties id="myProperties" location="classpath:/myprops.properties" /> 
```

然后在配置中我使用“freemarkerVariables”属性，例如

```
<bean id="abstractFreemarkerConfig" class="org.springframework.web.servlet.view.freemarker.FreeMarkerConfigurer" abstract="true">
...
    <property name="freemarkerVariables" ref="staticAttributesMap" /> 
```

```
<util:map id="staticAttributesMap">
    <entry key="var1" value="${var1}" />
    <entry key="var2" value="${var2}" />

    <entry key="myMap">
        <map>
            <entry key="v1" value="${value1}" />
            <entry key="v2" value="${value2}" />
        </map>
    </entry>
</util:map> 
```

其中 var1/var2/value1/value2 是文件中的所有属性。

您可以像这样访问freemarker中的属性

```
$var1$
$var2$
$myMap.v1$
$myMap.v2$ 
```

此解决方案的唯一缺点是，Freemarker 不会自动使用属性。你需要添加你想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-20T16:41:56.123

由于某些未知原因，接受的解决方案对我不起作用。我正在使用 bean 加载属性。所以假设存在一个用这个 bean 映射的 Java 类：

```
<bean id="appProperties" class="com.myCompany.AppProperties">
    <property name="appVersion" value="${app.version}" />
</bean> 
```

我使用这个 xml 映射访问 Freemarker 中的 bean 变量：

```
<bean id="freemarkerConfig" class="org.springframework.web.servlet.view.freemarker.FreeMarkerConfigurer">
    <property name="templateLoaderPath" value="/WEB-INF/views/"/>
    <property name="defaultEncoding" value="UTF-8" />
    <property name="freemarkerSettings">
        <props>
            <prop key="auto_import">spring.ftl as spring</prop>
            <prop key="number_format">0.####</prop>
        </props>
    </property>
    <property name="freemarkerVariables" ref="staticAttributesMap"/>
</bean>

<util:map id="staticAttributesMap">
    <entry key="appversion" value="#{appProperties.appVersion}" />
</util:map> 
```

并且不要忘记在 xml 文件的顶部添加相应的名称空间（...是您已经拥有的名称空间，以防您像我一样直到现在才使用 util）：

```
<beans ...
   xmlns:util="http://www.springframework.org/schema/util"
   xsi:schemaLocation="...
     http://www.springframework.org/schema/util
     http://www.springframework.org/schema/util/spring-util-3.0.xsd"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-21T12:15:18.563

我无法让公认的解决方案正常工作，但如果我使用**context:property-placeholder**而不是 util:properties 加载属性文件，一切都会无缝运行：

代替

```
<util:properties id="myProperties" location="classpath:/myprops.properties" /> 
```

和

```
<context:property-placeholder location="classpath:/myprops.properties" /> 
```

我实际上是在尝试从 maven 获取版本，所以我的位置是

```
 META-INF/maven/group.id/artifactid/pom.properties 
```

此外，我发现我必须像这样访问 freemarker 中的变量： ${var1}, ${var2}

# django - 我不应该将 Django 项目的哪些部分包含在 Git 中？

> ID：15302780
> 
> 赞同：2
> 
> 时间：2013-03-08T20:31:56.817
> 
> 标签：django, git, svn

我不是程序员，我目前正处于将与我一起工作的程序员从 A 切换到 B 的情况。

A 使用 SVN 对项目进行版本控制，但 B 更喜欢 Git。

我目前有整个项目站点的 tarball，大概包括很多 SVN 的东西。我想为程序员 B 建立一个漂亮、干净的 Git 存储库。

我应该从初始存储库中排除什么？

我是从一个只对 Django 有一些了解（我已经完成教程的一半）和有限的 Git 接触（我可以建立一个简单的 GitHub 项目，但我绝不是高手）的非程序员的基础上问的) 试图最小化这个新存储库的重量。

*   每个 Django 项目都有标准的文件夹，包含它是没有意义的？
*   是否存在由 SVN 创建的包含我可以删除的冗余或旧版本的文件夹？
*   是否有其他文件或文件夹只是增加了存储库的权重并且应该被修剪？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T20:42:34.667

我使用 github 中的[gitignore 存储](https://github.com/github/gitignore/blob/master/)库来查找要在不同项目中忽略的常见文件。对于 Django，它列出了：

```
*.log
*.pot
*.pyc
local_settings.py 
```

local_settings.py 将是一个本地设置文件，它覆盖存储在您的正常 settings.py 中的不同生产值。除了这些，我还在我的 .gitignore 中包含 *.bak。

# git - 使用 vim 作为 git commit 消息编写器，是否可以自动完成修改后的函数名称？

> ID：15302781
> 
> 赞同：4
> 
> 时间：2013-03-08T20:32:06.353
> 
> 标签：git, vim, git-commit

我发现自己经常在提交消息中重复我编辑过的函数的名称，并且在编写提交消息时对我刚刚更改的函数进行自动完成会很好。

是否有可能让 vim 以某种方式搜索当前提交的文件并获取函数名，或者更好的是，只有修改过的文件名？

我正在使用 gVim7.3 和 C#，如果这完全相关的话。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-08T21:14:54.890

如果您使用该`-v`选项`git commit`，将导致 git 将您提交的内容的差异放在用于创建提交消息的文件中。对于大多数语言，该差异中的大块头将指示正在修改的函数的名称。这将使修改后的函数的名称可用于使用`Ctrl`+`N`或`Ctrl`+完成`P`

为了简化这一点，我很久以前做过

```
git config --global alias.ci 'commit -v' 
```

并且始终使用`git ci`而不是`git commit`.

较新版本的 git 支持配置为所有提交打开此功能。

```
git config --global commit.verbose true 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-08T20:50:23.843

Vim 7.3 附带`$VIMRUNTIME/ftplugin/gitcommit.vim`，它定义了一个`:DiffGitCached`命令来显示你将要提交的差异。一旦您在拆分窗口中拥有它，默认`<C-N>`完成（假设默认`'complete'`值）将自动选择这些字符串。（最后一次检查你是否真的提交了正确的东西也很有用。）

# vb.net - 在 VB.NET 中隐藏集合的种类

> ID：15302785
> 
> 赞同：0
> 
> 时间：2013-03-08T20:32:17.377
> 
> 标签：vb.net, interface, encapsulation, icomparable

在下面的示例中，我想向客户端隐藏 .sort() 方法，我该如何实现？

```
Namespace test
  Class Figure
    Implements IComparable(Of Figure)
    Public Property Area As Double
    Public Function CompareTo(ByVal other As Figure) As Integer Implements System.IComparable(Of Figure).CompareTo
      CompareTo = Me.Area.CompareTo(other.Area)
    End Function
  End Class
  Class Figures
    Inherits System.Collections.Generic.List(Of Figure)
    Public Shadows Sub Add(ByVal nieuweFiguur As Figure)
      MyBase.Add(nieuweFiguur)
      Me.Sort()
    End Sub
  End Class
  Class Client
    Public Shared Sub Main()
      Dim figures As New Figures
      figures.Add(New Figure With {.Area = 12})
      figures.Add(New Figure With {.Area = 16})
      '***********************************************************
      figures.Sort() 'i want to hide the sort method to the client
      '***********************************************************
    End Sub
  End Class
End Namespace 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T20:35:42.260

很简单，如果您不希望调用者能够像使用基类的实例一样使用您的类的实例，那么您一开始就不应该有这种继承关系——它违反了[Liskov 替换原则](http://en.wikipedia.org/wiki/Liskov_substitution_principle).

我强烈怀疑`Figures`应该使用组合而不是继承 - 所以它会有一个私有字段`List(Of Figure)`而不是从它派生，并且你会公开你想要的任何操作，并且*只*公开那些操作。大多数操作可能只是委托给列表。

# php - ec2上的php ftp慢

> ID：15302787
> 
> 赞同：0
> 
> 时间：2013-03-08T20:32:28.643
> 
> 标签：php, ftp, amazon-ec2

我们已经设置了一个 EC2 实例来使用 php 的 FTP 库备份我们的网站，但是速度非常慢。

过去在我们的旧机器上备份大约 25MB 需要 10-15 秒，现在在 EC2 上需要 7 分钟。

被动FTP与它有什么关系吗？

在 vsftpd.conf 中已将被动端口设置为 1024-1048，这些端口已在安全组中打开。

配置东西：

```
pasv_enabled=YES
pasv_min_port=1024
pasv_max_port=1048
pasv_address="Public dns/IP of the instance" 
```

这个个体很大，我知道它有汁液……

所以基本上，它可以工作，但它太慢了。我在一堆不同的实例大小上尝试过，传输时间总是一样的。传输 23.5MB 大约需要 7:54 分钟。

我知道使用 php 的 ftp 库不是最好的，可能需要不同的解决方案，但它需要是服务器到服务器而不接触 pc。

跟踪路由：

```
1  ip-10-212-180-3.ec2.internal (10.212.180.3)  0.377 ms  0.580 ms  0.603 ms
 2  ip-10-1-44-9.ec2.internal (10.1.44.9)  0.512 ms  0.494 ms  0.463 ms
 3  ip-10-1-34-72.ec2.internal (10.1.34.72)  0.461 ms  0.449 ms ip-10-1-34-8.ec2.internal (10.1.34.8)  2.975 ms
 4  100.64.20.73 (100.64.20.73)  0.489 ms 100.64.20.75 (100.64.20.75)  0.438 ms 100.64.20.235 (100.64.20.235)  0.512 ms
 5  216.182.224.92 (216.182.224.92)  2.354 ms 216.182.224.218 (216.182.224.218)  1.642 ms 216.182.224.228 (216.182.224.228)  1.792 ms
 6  100.64.2.173 (100.64.2.173)  1.917 ms 100.64.2.125 (100.64.2.125)  1.176 ms 100.64.2.107 (100.64.2.107)  1.508 ms
 7  100.64.0.144 (100.64.0.144)  1.494 ms 100.64.0.172 (100.64.0.172)  1.437 ms 100.64.0.6 (100.64.0.6)  1.656 ms
 8  100.64.16.155 (100.64.16.155)  0.610 ms 100.64.16.91 (100.64.16.91)  39.310 ms 100.64.16.75 (100.64.16.75)  0.654 ms
 9  72.21.220.241 (72.21.220.241)  0.726 ms 205.251.245.54 (205.251.245.54)  1.587 ms 72.21.220.241 (72.21.220.241)  0.448 ms
10  72.21.220.46 (72.21.220.46)  1.550 ms 205.251.245.54 (205.251.245.54)  11.483 ms  1.512 ms
11  equinix.dc2.ash.oneandone.net (206.126.236.200)  3.265 ms 72.21.220.54 (72.21.220.54)  1.441 ms  1.530 ms
12  equinix.dc2.ash.oneandone.net (206.126.236.200)  9.687 ms  10.203 ms te-2-2.bb-c.ms.mkc.us.oneandone.net (74.208.6.101)  46.610 ms
13  te-2-2.bb-c.ms.mkc.us.oneandone.net (74.208.6.101)  46.525 ms  46.139 ms  46.430 ms
14  ae-10.bb-c.slr.lxa.us.oneandone.net (74.208.6.106)  46.924 ms ae-11.gw-distp-a.slr.lxa.oneandone.net (74.208.1.117)  46.918 ms  47.368 ms
15  ae-11.gw-distp-a.slr.lxa.oneandone.net (74.208.1.117)  47.362 ms ae-1.gw-prtr-r5-a.slr.lxa.oneandone.net (74.208.1.167)  47.142 ms ae-10.gw-distp-a.slr.lxa.oneandone.net (74.208.1.101)  47.266 ms
16  * * ae-1.gw-prtr-r5-a.slr.lxa.oneandone.net (74.208.1.167)  47.183 ms
17  u15393060.onlinehome-server.com (74.208.218.40)  46.636 ms  47.613 ms  47.321 ms 
```

# c - C：解释 if(exit(0),0){} 行代码

> ID：15302789
> 
> 赞同：3
> 
> 时间：2013-03-08T20:32:37.733
> 
> 标签：c, exit

我正在学习 C，作为练习，我正在尝试编写一个没有任何分号的简单程序。我在替换`return 0`语句时遇到了一些麻烦，但我发现这是（唯一的？）在 C: 中执行此操作的方法`if(exit(0),0){}`。

这个声明究竟是如何工作的？

我知道`exit()`from`stdlib`是一个 void 函数，但我不明白工作`,0`中的部分`if`（其余部分对我来说很清楚）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-08T20:38:36.993

C 中的`,`运算符计算它的两个参数，并返回第二个参数的值。所以表达式

```
exit(0), 0 
```

调用`exit(0)`并返回 0。因此，您发布的代码实际上等效于：

```
exit(0);
if (0) {} 
```

但是，`exit()`应该终止进程，所以这永远不会真正返回。该成语只是用于防止虚假的编译器警告。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-08T20:38:02.133

在学习 C 时，弄清楚如何编写没有分号的程序没有任何价值。听起来你已经偏离了学习 C 的方向，转而玩无用的把戏。

不过，要回答您的问题，当您有多个用逗号分隔的语句时，“结果”是最后一个语句。`if`需要一些带有值的语句来评估，因为`exit()`它是无效的，所以它没有价值。逗号后面的 0 为`if`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-08T20:49:09.507

当你写

```
int i = (5, 7); 
```

`i` ****未****分配**`7` **`5`****

 ****括号中`,`分隔的表达式从 LHS 执行到 RHS。

同样`if(exit(0), 0) == if(0)`，但**exit(0) 先执行**。（*不优化为空白*）

我的以下示例及其输出将在一定程度上帮助您了解其行为：

```
#include<stdio.h>
int fun(char* c){
 printf("%s\n", c);
 return 0;
}
int main(){
 int i = (fun("1"),fun("2"));
 if(fun("3"),7){
   printf("ONE %d", i);
 }
 else{
  printf("TWO %d", i);
 }
} 
```

其输出：

```
1
2
3
ONE 0 
```

*特别注意***`ONE`**最后打印的输出0，因为在`if(fun("3"),7) == if(7)`. 否则`fun()`返回`0`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-08T20:43:57.613

这只是**[逗号运算符](http://en.wikipedia.org/wiki/Comma_operator)**。

这意味着返回运算符的右侧值，并评估左侧部分。

在这种情况下，使用它`exit()`可以将 0 放入`if`语句中，并将 0 作为参数传递以在`if`语句中进行检查（它不能用于 void 值）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-08T20:39:45.683

逗号运算符可以被视为与`;`正常编程中相同的效果。实际上在这种情况下，内部的每个表达式`if`都将被评估。但是无论何时`exit()`调用该程序都会终止。有关逗号运算符的详细信息，请点击此[链接](https://stackoverflow.com/questions/1613230/uses-of-c-comma-operator)****

# python - 替代python替换

> ID：15302793
> 
> 赞同：1
> 
> 时间：2013-03-08T20:32:52.937
> 
> 标签：python

我想知道下面的代码是否有替代方法，因为，1：有错误，2：我不想经常这样做：

```
restring=string.replace("a","01").replace("b","02")... 
```

可能替换的代码：

```
chars=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","t","s","u","v","w","x","y","z"]
numbs=["01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26"]
string="test";
restring=string.replace(chars,numbs);
print restring; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T20:36:39.217

在这里，由于您只有 1 个字符替换“键”，我将使用 dict 和`join`：

```
>>> chars=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","t","s","u","v","w","x","y","z"]
>>> numbs=["01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26"]
>>> d = dict(zip(chars,numbs))
>>> my_sentence = "foobar"
>>> ''.join(d.get(c,c) for c in my_sentence)
'061515020118' 
```

虽然这不能扩展到多个字符替换键......

# objective-c - AVFoundation AVAssetExportSession 在尝试使用图层指令翻转视频时产生空白视频

> ID：15302796
> 
> 赞同：2
> 
> 时间：2013-03-08T20:33:01.993
> 
> 标签：objective-c, avfoundation, avassetexportsession

我正在尝试使用 AVFoundation 框架以正确的方式翻转视频。出于某种原因，下面的代码每次都会产生一个空白视频。

我注意到，当我不为 AVAssetExportSession 应用 videoComposition 设置时，它确实通过了视频（它在 Photo LIbrary 中可见且可播放），但由于未应用图层指令，它不会翻转。所以我认为问题在于传递给组合的层指令，但它已正确设置。我错过了什么，或者没有看到什么？

这是代码：

```
 NSURL *assetURL = [NSURL fileURLWithPath:path];
    AVAsset *movieAsset = [AVAsset assetWithURL:assetURL];
    NSLog(@"Asset: %0.1f",CMTimeGetSeconds(movieAsset.duration));
    NSLog(@"Asset Preferred Transform %@", NSStringFromCGAffineTransform(movieAsset.preferredTransform));

    //Output Composition
    AVMutableComposition *outputComposition = [[AVMutableComposition alloc] init];
    AVMutableCompositionTrack *videoTrack = [outputComposition addMutableTrackWithMediaType:AVMediaTypeVideo
                                                                           preferredTrackID:kCMPersistentTrackID_Invalid];
    [videoTrack insertTimeRange:CMTimeRangeMake(kCMTimeZero, movieAsset.duration)
                        ofTrack:[[movieAsset tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0]
                         atTime:kCMTimeZero
                          error:nil];
    [videoTrack setPreferredTransform:CGAffineTransformMakeScale(1, -1)];

    AVMutableVideoCompositionLayerInstruction *videoLayerInstruction = [AVMutableVideoCompositionLayerInstruction videoCompositionLayerInstructionWithAssetTrack:videoTrack];
    [videoLayerInstruction setTransform:CGAffineTransformMakeScale(1, -1) atTime:kCMTimeZero];

    AVMutableVideoCompositionInstruction *videoInstruction = [AVMutableVideoCompositionInstruction videoCompositionInstruction];
    videoInstruction.timeRange = CMTimeRangeMake(kCMTimeZero, movieAsset.duration);
    videoInstruction.layerInstructions = [NSArray arrayWithObjects:videoLayerInstruction, nil];

    AVMutableVideoComposition *outputVideoComposition = [AVMutableVideoComposition videoComposition];
    outputVideoComposition.instructions = [NSArray arrayWithObjects:videoInstruction, nil];
    outputVideoComposition.frameDuration = CMTimeMake(1, 30);
    outputVideoComposition.renderSize = CGSizeMake(480, 640);

    //Export
    AVAssetExportSession *exporter = [[AVAssetExportSession alloc] initWithAsset:outputComposition presetName:AVAssetExportPresetHighestQuality] ;
    exporter.videoComposition = outputVideoComposition;
    NSString *newPath = [documentsDirectory stringByAppendingPathComponent:[self.filePath stringByAppendingString:@"-fb.mov"]];
    [[NSFileManager defaultManager] removeItemAtPath:newPath error:nil];
    exporter.outputURL = [NSURL fileURLWithPath:newPath];
    exporter.outputFileType = AVFileTypeQuickTimeMovie;

    NSLog(@"Starting export");

    [exporter exportAsynchronouslyWithCompletionHandler:^(void){

        dispatch_async(dispatch_get_main_queue(), ^{
            NSLog(@"Video exported");
            NSLog(@"%@", newPath);
            NSURL *newAssetURL = [NSURL fileURLWithPath:newPath];
            AVAsset *newMovieAsset = [AVAsset assetWithURL:newAssetURL];
            NSLog(@"New Asset %@",newMovieAsset);
            NSLog(@"New Asset Duration: %0.1f",CMTimeGetSeconds(newMovieAsset.duration));
            NSLog(@"New Asset Preferred Transform %@", NSStringFromCGAffineTransform(newMovieAsset.preferredTransform));

            UISaveVideoAtPathToSavedPhotosAlbum(newPath, nil, nil, nil);}}]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T05:47:34.587

您提供给 outputVideoComposition 的渲染大小不正确。应该是根据iphone屏幕

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T06:52:28.627

我遇到了同样的问题，它正在将视频从导出帧中旋转出来。旋转锚的东西在左上角。

要修复，请应用另一个转换，如下所示：

CGAffineTransformMakeTranslation(exportingVideoWidth, exportingVideoHeight);

希望这会有所帮助，如果您有任何问题，请告诉我。

# extjs - 基于相邻列数组List的动态组合框下拉列表

> ID：15302798
> 
> 赞同：0
> 
> 时间：2013-03-08T20:33:29.043
> 
> 标签：extjs

我有一个 JSON 存储定义为

```
var reader = new Ext.data.JsonReader({
    id: 'id',
    totalProperty: 'totalCount',
    root: 'rows',
    fields: [{
        name: 'id'
    }, {
        name: 'seriesId',
        type: 'string'
    }, {
        name: 'seriesTitle',
        type: 'string'
    }, {
        name: 'productionId',
        type: 'string'
    }, {
        name: 'triggered',
        type: 'string'
    }, {
        name: 'partnerName',
        type: 'string'
    }, {
        name: 'partnerId',
        type: 'string'
    }, {
        name: 'startDate',
        type: 'date'
    }, {
        name: 'startDate0',
        mapping: 'startDate',
        type: 'date'
    }, {
        name: 'endDate',
        type: 'date'
    }, {
        name: 'drmType',
        type: 'string'
    }, {
        name: 'defaultDrmType',
        type: 'string'
    }

    ]
});

var conn = new Ext.data.Connection({
    url: '/SyndicationPlatform/masterDrmStore/listJson',
    timeout: 300000
});

var proxy = new Ext.data.HttpProxy(conn);

var store = new Ext.data.GroupingStore({
    reader: reader,
    url: '/SyndicationPlatform/masterDrmStore/listJson',
    proxy: proxy,
    autoLoad: 'true',
    //,groupField: ['seriesPartner']
    remoteSort: true
});

I have a Column Model defined as below
for the above json store.

var cm = new Ext.grid.ColumnModel([{
    header: "<div class=\"x-grid3-hd-checker\" style=\"width: 26px;\">",
    id: "priority",
    width: 35,
    sortable: false,
    resizable: false,
    menuDisabled: true,
    fixed: true,
    renderer: function (data, cell, record, rowIndex, columnIndex, store) {
        if (data) {
            var today = new Date();
            var startDate = new Date(record.data.startDate);
            var out = '<div';
            out += (startDate < today) ? ' class="red-row" id="red-row"' : ((startDate < new Date(today.getTime() + 3 * 24 * 60 * 60 * 1000)) ? ' class="orange-row" id="orange-row"' : ((startDate < new Date(today.getTime() + 8 * 24 * 60 * 60 * 1000)) ? ' class="blue-row" id="blue-row"' : ' class="green-row" id="green-row"'));
            out += '>';
            if (record.data.isLicenceUpdated == true) out += '<img src="/SyndicationPlatform/images/skin/exclamation.png" class="icon-updated"/>';
            else out += "";
            if (record.data.deliverable) {
                out += '<div class="x-grid3-row-checker" id="x-grid3-row-checker"></div>';
            }
            out += '</div>';
            return out;
        }
    },
    dataIndex: 'startDate0'
}, {
    header: "Partner",
    id: "partner",
    editor: new Ext.form.TextField({
        readOnly: true
    }),
    width: 35,
    sortable: true,
    dataIndex: 'partnerName'
}, {
    header: "Type",
    id: "archiveCatchup",
    editor: new Ext.form.TextField({
        readOnly: true
    }),
    width: 50,
    sortable: true,
    dataIndex: 'triggered'
}, {
    header: "Series",
    id: "seriesPartner",
    editor: new Ext.form.TextField({
        readOnly: true
    }),
    width: 50,
    sortable: false,
    hideable: false,
    hidden: true,
    dataIndex: 'seriesPartner'
}, {
    header: "Licence ID",
    id: "licId",
    editor: new Ext.form.TextField({
        readOnly: true
    }),
    width: 100,
    sortable: true,
    dataIndex: 'id'
}, {
    header: "Production ID",
    id: "prodId",
    editor: new Ext.form.TextField({
        readOnly: true
    }),
    width: 87,
    sortable: true,
    dataIndex: 'productionId'
}, {
    header: "Series ID",
    id: "seriesId",
    editor: new Ext.form.TextField({
        readOnly: true
    }),
    width: 50,
    sortable: true,
    dataIndex: 'seriesId',
    hidden: true
}, {
    header: "DRM List",
    id: "drmList",
    editor: new Ext.form.TextField({
        readOnly: true
    }),
    width: 50,
    sortable: true,
    dataIndex: 'drmList',
    hidden: true
}, {
    header: "Series Title",
    id: "seriesTitle",
    editor: new Ext.form.TextField({
        readOnly: true
    }),
    width: 190,
    sortable: true,
    dataIndex: 'seriesTitle',
    hidden: false
}, {
    header: "Start Date",
    id: "startDate",
    editor: new Ext.form.DateField({
        readOnly: true,
        hideTrigger: true,
        format: 'd/m/Y'
    }),
    width: 65,
    sortable: true,
    renderer: Ext.util.Format.dateRenderer('d/m/Y'),
    dataIndex: 'startDate'
}, {
    header: "End Date",
    id: "endDate",
    editor: new Ext.form.DateField({
        readOnly: true,
        hideTrigger: true,
        format: 'd/m/Y'
    }),
    width: 65,
    renderer: Ext.util.Format.dateRenderer('d/m/Y'),
    sortable: true,
    dataIndex: 'endDate'
}, {
    header: "DRM Type",
    id: "drmType",
    editor: new Ext.form.ComboBox({
        mode: 'local',
        forceSelection: true,
        id: 'drm-combo'
        typeAhead: true,
        selectOnFocus: true,
        triggerAction: 'all',
        displayField: 'name',
        valueField: 'name',
        store: new Ext.data.JsonStore({
            autoLoad: true,
            url: '/SyndicationPlatform/masterDrmStore/jsonDrmTypelist',
            root: 'items',
            fields: ['name']
        })
    }),
    width: 80,
    sortable: true,
    dataIndex: 'drmType'
},
rowActions]); 
```

我想将组合框的下拉列表作为相应标题的值：“DRM 列表”。

我怎样才能做到这一点？对此的任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T15:10:32.797

这是组合框类的扩展。

```
DynamicGridCombo = Ext.extend(Ext.form.ComboBox, {
    initComponent: function() {
        DynamicGridCombo.superclass.initComponent.call(this);
        if(Ext.isObject(this.dynamic)) {
            this.parents = new Array();
            Ext.each(this.dynamic.parents,function(parent, index){
                this.parents[index] = parent;
            }, this);

            this.lastQuery = '';

            this.addListener('beforequery', function(field){

                var grid = field.combo.gridEditor;
                var indx = grid.row;
                var store = grid.record.store;
                var rec = store.getAt(indx);

                var filters = [];
                Ext.each(this.parents,function(parent){
                    filters.push({
                        property: parent,
                        value: rec.data[parent]
                    });
                });
                this.store.filter(filters);
            });

            this.addListener('blur', function(field){
                this.store.clearFilter(true);
            });
        }
    }
});

Ext.reg('DynamicGridCombo', DynamicGridCombo); 
```

以这种方式定义您的组合：

```
{
    header: "Child Combo",
    sortable: true,
    dataIndex: 'childcombo',
    editor: {
        xtype:'DynamicGridCombo',
        id: 'dynamic-childcombo-grid',
        hiddenValue: 'id',
        displayField: 'text',
        valueField: 'id',
        store: 'ChildStore',
        triggerAction: 'all',
        dynamic: {
            parents: ['father'] //dataindex of the father store **
        },
        allowBlank: false,
        forceSelection: true,
        editable: false
    }
}

{
    header: "Father",
    sortable: true,
    dataIndex: 'father', **
    editor:{
        xtype: 'DynamicGridCombo', //not necessary it could be a simple combo
        id: 'dynamic-father-grid',
        hiddenValue: 'id',
        displayField: 'text',
        valueField: 'id',
        store: 'FatherStore',
        triggerAction: 'all',
        allowBlank: false,
        forceSelection: true,
        editable: false,                
    }
} 
```

然后用父引用定义子存储：

```
{
        storeId: 'ChildStore',
        url: 'myresturl',
        fields: [{
            name: 'id'
        }, {
            name: 'text'
        }, {
            name: 'father' //you have to retrive the father value in the list
        }]
    } 
```

试试看。再见！

铝

# windows - 批量从 Mounted 驱动器获取 Unix 路径

> ID：15302799
> 
> 赞同：1
> 
> 时间：2013-03-08T20:33:29.527
> 
> 标签：windows, unix, path, mount

只是想把它传递下去，因为我花了几天时间才弄清楚这一点。我不是批处理人，更像是 unix 人，但我拥有的是一个 build.bat，它从已安装的 unix 驱动器运行，并从 windows cmd 提示符在 Windows 和 Unix 上运行构建脚本。我曾经将路径硬编码在 bat 文件中，但我希望能够将脚本放在 Unix 上的任何位置，并允许用户将源签出到他们自己的沙箱，安装驱动器打开 cmd 提示符，cd 到脚本目录，然后就可以了运行构建。有许多进程从此脚本运行。所以我不得不从挂载的驱动器中获取路径。再次 - 我确信可能有更简单或更短的方法，但这对我有用：

```
@echo off

set USERNAME=%1
set PASSWORD=%2

setlocal enabledelayedexpansion

:: All scripts are run from the same script directory on the mounted unix drive
:: 
:: Get the unix path to the scripts directory by using the following command
::
::    net use %~d0
:: 
:: %~d0  - drive letter where the script is running from
:: %~dp0 - complete path to this script
::
set WIN_PATH=%~dp0
set DRIVE_LETTER=%~d0

:: get "Remote Name" from net use command
FOR /F "tokens=*" %%i in ('net use %DRIVE_LETTER% ^| FINDSTR /I "^Remote"') DO SET NET_USE_OUTPUT=%%i

:: Get mounted unix drive from net use drive_letter, returns //ServerName/mount
FOR /F "tokens=3" %%A IN ("%NET_USE_OUTPUT%") DO SET MOUNTED_DRIVE=%%A

::  substitute drive_Letter for mounted_drive \\serverName\mount\path\to\scripts 
set WIN_MOUNTED_PATH=!WIN_PATH:%DRIVE_LETTER%=%MOUNTED_DRIVE%!

::  Change to win to Unix slashes //serverName/mount/path/to/scripts
set UNX_MOUNTED_PATH=%WIN_MOUNTED_PATH:\=/%

:: get SERVER_NAME 
FOR /F "tokens=1 delims=/" %%A IN ("%UNX_MOUNTED_PATH%") DO SET "SERVER_NAME=%%A"

:: Remove //serverName from full path - not needed on unix server
SET "SERVER_NAME_REMOVE=*//%SERVER_NAME%"

:: Remove serverName to get unix path to scripts directory
::  SCRIPTS = /path/to/scripts
CALL SET SCRIPTS=%%UNX_MOUNTED_PATH:!SERVER_NAME_REMOVE!=%%

:: Run script on Unix using plink
pink -pw %PASSWORD% %USERNAME%@%SERVER_NAME% "%SCRIPTS%/run.sh"

:: Run script on Windows
%WIN_PATH%run.bat 
```

# c# - 传递给委托时将整数作为引用类型处理

> ID：15302801
> 
> 赞同：3
> 
> 时间：2013-03-08T20:33:34.847
> 
> 标签：c#, delegates

本周我参加了在荷兰举行的 TechDays 2013，我收到了一个有趣的测验问题。问题是：以下程序的输出是什么。这是代码的样子。

```
class Program
{
    delegate void Writer();

    static void Main(string[] args)
    {
        var writers = new List<Writer>();
        for (int i = 0; i < 10; i++)
        {
            writers.Add(delegate { Console.WriteLine(i); });
        }

        foreach (Writer writer in writers)
        {
            writer();
        }
    }
} 
```

显然，我给出的答案是错误的。我论证结束，因为 int 是一种值类型，所以传入的实际值`Console.WriteLine()`被复制，所以输出将是 0...9。然而`i`，在这种情况下被作为引用类型处理。正确答案是它会显示 10 乘以 10。谁能解释为什么以及如何？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-08T20:36:29.810

> 我争论结束，因为 int 是一个值类型，传递给 Console.WriteLine() 的实际值被复制

这是完全正确的。 **当您调用时`WriteLine`，该值将被复制**。

那么，你什么时候打电话`WriteLine`？它不在`for`循环中。在那个时间点你没有写任何东西，你只是在创建一个委托。

直到`foreach`您调用委托时的循环，才将变量中的值`i`复制到堆栈中以调用`WriteLine`.

那么，在循环`i`期间的价值是什么？`foreach`对于循环的每次迭代，它是 10 `foreach`。

所以现在你问，“好吧，`i`在.`foreach loop, isn't it out of scope`匿名方法，可以是任何时间段。如果根本没有做任何特别的事情，读取变量将是随机垃圾，其中包含发生在内存中该位置的任何内容。C# 积极确保这种情况不会发生。

那么它有什么作用呢？它创建了一个闭包类；它是一个包含许多字段的类，这些字段代表所有已关闭的内容。换句话说，代码将被重构为如下所示：

```
public class ClosureClass
{
    public int i;

    public void DoStuff()
    {
        Console.WriteLine(i);
    }
}

class Program
{
    delegate void Writer();

    static void Main(string[] args)
    {
        var writers = new List<Writer>();
        ClosureClass closure = new ClosureClass();
        for (closure.i = 0; closure.i < 10; closure.i++)
        {
            writers.Add(closure.DoStuff);
        }

        foreach (Writer writer in writers)
        {
            writer();
        }
    }
} 
```

现在我们都有一个匿名方法的名称（所有匿名方法都由编译器命名），并且我们可以确保该变量将在引用匿名函数的委托存在时持续存在。

看看这个重构，我希望很清楚为什么结果是`10`打印了 10 次。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-08T20:37:37.970

这是因为它是一个捕获的变量。请注意，这*曾经*也发生过`foreach`，但在 C# 5 中发生了***变化***。但是要将代码重新编写为您实际拥有的代码：

```
class Program
{
    delegate void Writer();

    class CaptureContext { // generated by the compiler and named something
        public int i;      // truly horrible that is illegal in C#
        public void DoStuff() {
            Console.WriteLine(i);
        }
    }
    static void Main(string[] args)
    {
        var writers = new List<Writer>();
        var ctx = new CaptureContext();
        for (ctx.i = 0; ctx.i < 10; ctx.i++)
        {
            writers.Add(ctx.DoStuff);
        }

        foreach (Writer writer in writers)
        {
            writer();
        }
    }
} 
```

如您所见：只有一个，`ctx`因此只有一个，当您结束`ctx.i`时，它是 10 。`foreach``writers`

顺便说一句，如果你想让旧代码工作：

```
for (int tmp = 0; tmp < 10; tmp++)
{
    int i = tmp;
    writers.Add(delegate { Console.WriteLine(i); });
} 
```

基本上，捕获上下文与变量处于同一级别。这里变量在循环内的范围**内**，所以这会生成：

```
for (int tmp = 0; tmp < 10; tmp++)
{
    var ctx = new CaptureContext();
    ctx.i = tmp;
    writers.Add(ctx.DoStuff);
} 
```

这里每个`DoStuff`都在不同的捕获上下文实例上，因此有一个不同且独立的`i`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T20:37:12.077

在您的情况下，委托方法是访问局部变量（*for*循环索引）的*匿名方法。*也就是说，这些是*clousures*。*`i`*

 **由于匿名方法在*for循环之后被调用了十次，因此它获得了**i*的最新值。

## 访问相同参考的各种 clousure 的简单示例

这是 clousure 行为的简化版本：

```
int a = 1;

Action a1 = () => Console.WriteLine(a);
Action a2 = () => Console.WriteLine(a);
Action a3 = () => Console.WriteLine(a);

a = 2;

// This will print 3 times the latest assigned value of `a` (2) variable instead
// of just 1\. 
a1();
a2();
a3(); 
```

* * *

[查看 StackOverflow 上的其他问答（*What are clousures in .NET？*）以获取有关什么是 C#/.NET clousures 的更多信息！](https://stackoverflow.com/questions/428617/what-are-closures-in-net)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T20:57:38.943

`Action`对我来说，通过将旧行为和新行为与本地类而不是 custom进行比较更容易理解`Writer`。

在 C# 5 闭包之前，在 for、foreach 变量和局部变量捕获的情况下捕获了相同的变量（不是变量的值）。所以给定代码：

```
 var anonymousFunctions = new List<Action>();
    var listOfNumbers = Enumerable.Range(0, 10);

    for (int forLoopVariable = 0; forLoopVariable < 10; forLoopVariable++)
    {
        anonymousFunctions.Add(delegate { Console.WriteLine(forLoopVariable); });//outputs 10 every time.
    }

    foreach (Action writer in anonymousFunctions)
    {
        writer();
    } 
```

我们只看到我们为*变量设置的最后一个**值*。但是，在 C# 5 中，foreach 循环已被修改。现在我们捕获不同的变量。 *`forLoopVariable`*

 *例如

```
 anonymousFunctions.Clear();//C# 5 foreach loop captures

    foreach (var i in listOfNumbers)
    {
        anonymousFunctions.Add(delegate { Console.WriteLine(i); });//outputs entire range of numbers
    }

    foreach (Action writer in anonymousFunctions)
    {
        writer();
    } 
```

所以输出更直观：0,1,2...

请注意，这是一个重大更改（尽管它被假定为次要更改）。这可能就是为什么 for 循环行为在 C# 5 中保持不变的原因。***

# .net - WPF 是否有一个 MouseDown 事件在释放鼠标按钮之前触发？

> ID：15302802
> 
> 赞同：0
> 
> 时间：2013-03-08T20:33:45.020
> 
> 标签：.net, wpf

**背景：**

在 WPF 中，某些事件在操作期间重复触发。例如，在拖放操作期间，DragOver 事件会重复触发。

**问题：**

是否存在在鼠标按钮按下时重复触发的 WPF 事件（可能是与鼠标相关的事件）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T21:13:02.043

不，不是的。而是使用 MouseUp（附加事件）。

请参阅[http://msdn.microsoft.com/en-us/library/system.windows.input.mouse.mouseup.aspx](http://msdn.microsoft.com/en-us/library/system.windows.input.mouse.mouseup.aspx)以供参考。

您可以做的是设置一个重复触发事件的计时器，设置为在 MouseDown 上开始，并在 MouseUp 上停止计时器。

# desire2learn - Desire2Learn Valence API - 是否可以获取文档的内容？

> ID：15302803
> 
> 赞同：0
> 
> 时间：2013-03-08T20:33:58.687
> 
> 标签：desire2learn

我们正在使用 Valence API 来获取课程的内容。我们可以使用模块 API 来获取模块中的主题

例如

```
{
    "TopicType": 1,
    "Url": "/content/enforced/6671-Sandbox_101/Document 1.html",
    "StartDate": null,
    "EndDate": null,
    "IsHidden": false,
    "IsLocked": false,
    "Id": 560,
    "Title": "Document 1",
    "ShortTitle": "",
    "Type": 1
} 
```

定义文档内容的 Url 是：/content/enforced/6671-Sandbox_101/Document 1.html

如果我以经过身份验证的用户身份在浏览器中访问它，我可以获得数据。但是，我们希望能够使用使用 Valence API 身份验证方案进行身份验证的后端进程来访问数据。

我可以在 Valence 文档中找到关于上传文件、从学习对象存储库下载文件的参考资料，但我找不到任何关于我们如何下载课程文件的参考资料。

有人有任何见解吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T21:51:17.327

随着 2013 年 5 月 D2L 学习套件 v10.2.0 的发布，存在一个 API，可以让调用者[取回](http://docs.valence.desire2learn.com/res/content.html#get--d2l-api-le-(version)-(orgUnitId)-content-topics-(topicId)-file)文件类型内容主题的基础数据。为了使用该 API，后端服务需要提供 v10.2.0 或更高版本的 LE 产品组件，并提供 v1.3 或更高版本的 LE API 合约。

# android - 以编程方式单击/点击 ListView 项目

> ID：15302805
> 
> 赞同：0
> 
> 时间：2013-03-08T20:34:00.503
> 
> 标签：android, android-listview

我的 ListView 项目有一个自定义选择器。这是它的样子：

```
<item android:drawable="@color/transparent" android:state_activated="false"/>
<item android:drawable="@color/blue" android:state_activated="true"/> 
```

当我点击一个项目时，它的背景变成蓝色。我想通过代码执行此“点击”，但即使我已经知道孩子在 ListView 中的位置，我也不知道要调用什么方法。

* * *

实际上，我真正想要的是在不触发 onListItemClick() 的情况下更改一行的背景（类似于点击它时）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T20:35:48.917

> 我想通过代码做这个“点击”

获取您想要的行（它必须在屏幕上）并调用[`performClick()`](https://developer.android.com/reference/android/view/View.html#performClick%28%29)或者您可以使用[`setActivated(true)`](https://developer.android.com/reference/android/view/View.html#setActivated%28boolean%29)（我从未尝试过这种方法。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T03:23:09.937

将选择器更改为打开`android:state_selected="true"`，然后使用`listView.setSelection(index)`;

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T21:27:32.543

如果您尝试模拟触摸事件会怎样？也许不是最干净的答案，但是...

获取您想要的行的视图然后调用

```
rowView.dispatchTouchEvent(MotionEvent.obtain(SystemClock.uptimeMillis(), SystemClock.uptimeMillis(), MotionEvent.ACTION_DOWN, 0, 0, 0)); 
```

# jquery - 使用从 ASP.NET MVC 模型动态生成的 URL 在单击时加载 iframe

> ID：15302806
> 
> 赞同：1
> 
> 时间：2013-03-08T20:34:03.630
> 
> 标签：jquery, asp.net-mvc, iframe

我有一个包含项目列表的页面，我希望这样当用户单击项目链接时，它会滑出一个 iframe，该 iframe 指向我们 wiki 上的相应页面，该页面将包含一个包含更多详细信息的页面项目。问题是，一个页面可能包含许多项目，所以我不想加载每个 iframe。我只想加载需要滑出的 iframe，因为它们已滑出。

到目前为止，这是我的视图的精简版本（它是 PartialView）：

```
@model IEnumerable<IT_Project_Manager.Models.ItProject>

<script type="text/javascript">
    $(function () {
        $("body").on("click", "#project-header", function () {
            var elem = $("~ #details", this);
            if (!$("> iframe", elem).attr("src")) {
                elem.slideDown(200);
                changeSrc(elem);
            }
            else elem.slideToggle(200);
        });
    });
</script>

@foreach (var item in Model)
{
    string wikiUrl = "https:/wiki-url/" + string.Join("+", item.Project_Name.Split(' '));

    <text>
    <script type="text/javascript">
        function changeSrc(elem) {
            $("> iframe", elem).attr("src", "@wikiUrl")
        }
    </script>
    </text>

    <div class="project">
        <div class="well well-small>
        <h4 id="project-header">
            <a>
                @Html.DisplayFor(model => item.Project_Name) 
                (@Html.DisplayFor(model => item.Program))
            </a>
        </h4>
        <p>@Html.DisplayFor(model => item.Description)</p>
        <div id="details" class="cell hide">
            <iframe seamless="seamless" height="400px"></iframe>
        </div>
        </div>
    </div>
} 
```

正如你所看到的，我的模型是一个 IEnumerable，所以我必须遍历它，但是 foreach 发生在服务器上，在 javascript 有机会访问它之前。所以当脚本可以访问它时，wikiUrl 总是只对应于最终项目的 URL。

所以我想我的问题是，我该如何做到这一点，以便 javascript 能够获取模型的 Project_Name 中的每个项目，以便我可以生成正确的 URL 并将其分配给正确的 iframe？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T15:33:34.723

我想出了一个非常优雅的解决方案。简单地将 wikiUrl 绑定到自定义数据属性允许 javascript 稍后轻松地将值指向 src 属性。

工作代码现在显示：

```
@model IEnumerable<IT_Project_Manager.Models.ItProject>

<script type="text/javascript">
    $(function () {
        $("body").on("click", "#project-header", function () {
            var wrapper = $("~ #details", this);
            var frame = $("> iframe", wrapper);
            if (!frame.attr("src")) {
                frame.attr("src", frame.attr("data-hidden-src"));
                wrapper.slideDown(200);
            }
            else wrapper.slideToggle(200);
        });
    });
</script>

@foreach(var item in Model)
{
    string wikiUrl = "https://wiki-url/" + string.Join("+", item.Project_Name.Split(' '));

    <div class="project">
        <div class="well well-small">
        <h4 id="project-header">
            <a>
                @Html.DisplayFor(model => item.Project_Name) 
                (@Html.DisplayFor(model => item.Program))
            </a>
        </h4>
        <p>@Html.DisplayFor(model => item.Description)</p>
        <div id="details" class="cell hide">
            <iframe seamless="seamless" height="400px" data-hidden-src="@wikiUrl"></iframe>
        </div>
        </div>
    </div>
} 
```

# veracode - 什么是 CWE-78 中提到的 Windows 的特殊元素 操作系统命令 Veracode 中使用的特殊元素的中和

> ID：15302809
> 
> 赞同：0
> 
> 时间：2013-03-08T20:34:10.837
> 
> 标签：veracode

我的代码已被 Veracode 静态分析标记为易受 CWE-78 攻击。

在我找到的所有关于该漏洞的白皮书中，他们都提到了特殊元素，但没有一个真正说明特殊元素是什么。

在 windows 平台上，我认识到 & 和 && 是命令分隔符。针对查找 & 和 && 实例的正则表达式进行验证是否足以满足静态分析？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T10:02:00.430

对所有测试执行的原则规则是它应该是白名单测试。

只允许验证输入。

黑名单测试并不全面，只会检查已知字符

# google-bigquery - 我可以在为 bigquery 做准备时对谷歌云 sql 中的数据进行非规范化吗

> ID：15302811
> 
> 赞同：0
> 
> 时间：2013-03-08T20:34:14.337
> 
> 标签：google-bigquery, denormalization

鉴于 bigquery 并不是一个非规范化数据的平台，我可以在导入 bigquery 之前对谷歌云 sql 中的数据进行非规范化吗？

我有以下表格：Table1 500M 行，Table2 2M 行，Table3 800K 行，

由于各种原因，我无法在我们现有的关系数据库中进行非规范化。所以我想做一个数据库的 sql 转储，将其加载到谷歌云 sql 中，然后使用 sql 连接脚本创建一个大型平面表以导入 bigquery。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T19:55:06.780

那应该行得通。您应该能够将生成的平面表转储到 csv 并导入到 bigquery。然而，目前没有直接的 Cloud SQL 到 bigquery 加载机制。

# wpf - WPF StackPanel 是否可冻结

> ID：15302813
> 
> 赞同：0
> 
> 时间：2013-03-08T20:34:27.863
> 
> 标签：wpf, performance, stackpanel

我`StackPanel`在 WPF 中使用只是为了轻松布局水平对齐的框和线，但使用`StackPanel`.

所有的微软教程似乎只谈论冻结一些`SolidColorBrush`等对象，但 StackPanel 是否可以在第一次布局后被冻结，这样 CPU 就不必一直布局它，只需一次？

还是我只是被迫使用非常快`Canvas`的对象并将其中的所有对象一一布局？

示例 1：在设计器中非常容易布局，但缺乏性能：

```
 <StackPanel Height="35" Canvas.Left="49" Canvas.Top="874" Width="395" Orientation="Horizontal">
        <TextBox Text="test" Width="65"/>
        <Rectangle Stroke="Black" Width="1" />
        <TextBox Text="test" Width="55"/>
        <Rectangle Stroke="Black" Width="1" />
        <TextBox Text="test" Width="75"/>
        <Rectangle Stroke="Black" Width="1" />
        <TextBox Text="test" Width="35"/>
        <Rectangle Stroke="Black" Width="1" />
        <TextBox Text="test" Width="95"/>
        <Rectangle Stroke="Black" Width="1" />
        <TextBox Text="test" Width="65"/>
        <Rectangle Stroke="Black" Width="1" />
    </StackPanel> 
```

示例 2：良好的性能，在设计器中进行布局很痛苦：

```
 <Canvas Height="35"  Canvas.Left="49" Canvas.Top="914" Width="395">
        <TextBox Text="test" Width="65" Height="35"/>
        <Rectangle Stroke="Black" Width="1" Height="35" Canvas.Left="65"/>
        <TextBox Text="test" Width="55" Canvas.Left="66" Height="35"/>
        <Rectangle Stroke="Black" Width="1" Height="35" Canvas.Left="195"/>
        <TextBox Text="test" Width="75" Height="35" Canvas.Left="122"/>
        <Rectangle Stroke="Black" Width="1" Height="35" Canvas.Left="121"/>
        <TextBox Text="test" Width="35" Height="35" Canvas.Left="198"/>
        <Rectangle Stroke="Black" Width="1" Height="35" Canvas.Left="197"/>
        <TextBox Text="test" Width="95" Height="35" Canvas.Left="234"/>
        <Rectangle Stroke="Black" Width="1" Height="35" Canvas.Left="329"/>
        <TextBox Text="test" Width="65" Height="35" Canvas.Left="330"/>
        <Rectangle Stroke="Black" Width="1" Height="35" Canvas.Left="233"/>         
    </Canvas> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T22:04:00.553

不，`StackPanel`不是`Freezable`，但是您提到您在渲染时`GPU`遇到问题，请尝试删除fps`Animations``60fps``Animation`

在您的主要 Windows 构造函数中，您可以覆盖默认`framerate`值`Animations`

我通常使用 30fps，因为它仍然很流畅，使用低端`GFX`显卡的用户将能够更流畅地运行您的应用程序。

例子：

```
 public MainWindow() 
    {
        InitializeComponent();

        Timeline.DesiredFrameRateProperty.OverrideMetadata(typeof(Timeline)
           , new FrameworkPropertyMetadata { DefaultValue = 30 }); // 30 = 30fps
    } 
```

试试看是否有帮助

# sql - 具有 BIT 值类型的 SQL Server 存储过程中的语法问题

> ID：15302821
> 
> 赞同：2
> 
> 时间：2013-03-08T20:34:57.520
> 
> 标签：sql, sql-server, tsql, stored-procedures

我正在尝试将 xmlString 值和位值 1 插入以下存储过程：

```
ALTER PROCEDURE [dbo].[sbssp_ArchivedMessages]
(
      @xmlString varchar(max),
      @fromToMach bit
)
AS
BEGIN
      DECLARE @idoc int, @lastId int
      EXEC sp_xml_preparedocument @idoc OUTPUT, @xmlString, @fromToMach

      INSERT INTO [dbo].[tblArchivedMessages]
      SELECT * FROM OPENXML(@idoc, '/Mach', 2) WITH [dbo].[tblArchivedMessages]

      SET @lastId = (SELECT IDENT_CURRENT('tblArchivedMessages'))

      UPDATE [dbo].[tblArchivedMessages] 
        SET FromToMach = @fromToMach 
        WHERE ID = @lastId
END 
```

当我执行 SP 时，我这样做如下：

```
EXEC dbo.sbssp_InsertArchivedMessages '<MACH><B000>StringVal</B000><B002>StringVal</B002><B003>StringVal</B003><B004>StringVal</B004><B007>StringVal</B007><B011>StringVal</B011><B012>StringVal</B012><B013>StringVal</B013><B015>StringVal</B015><B018>StringVal</B018><B028>StringVal</B028><B032>StringVal</B032><B037>StringVal</B037><B039>StringVal</B039><B041>StringVal</B041><B043>StringVal</B043><B048>StringVal</B048><B049>StringVal</B049><B058>StringVal</B058><B061>StringVal</B061><B063>StringVal</B063><B127>StringVal</B127></MACH>', 1 
```

这是我得到的错误：

> *消息 515，级别 16，状态 2，过程 sbssp_InsertArchivedMessages，第 13 行
> 无法将值 NULL 插入列“FromToMach”，表“MachoPOST.dbo.ArchivedMessages”；列不允许空值。插入失败。该语句已终止。*

关于我到底做错了什么有什么建议吗？我还将@variable 名称放在每个值的前面，但仍然得到相同的错误。

任何帮助/方向将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T20:38:34.140

您没有填充其中一列

我不确定桌子是什么样子，但问题是这样的

```
INSERT INTO [dbo].[tblArchivedMessages]
      SELECT * FROM OPENXML(@idoc, '/ATM', 2) WITH [dbo].[tblArchivedMessages] 
```

问题是您传递到 FromToATM 列的值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-22T00:23:18.110

@fromToMatch 不应作为 sp_xml_preparedocument 存储过程的最后一个参数提供。

该参数用于 xPath 命名空间，您的示例 XML 中似乎没有任何参数，因此在这种情况下，此参数不需要任何值。

此外，XML 是区分大小写的，因此在您的 OPENXML 中，将“Mach”更改为“MACH”。

如果没有任何涉及的表的 DDL，我无法在我的系统上准确地模拟它，但试一试：

```
EXEC sp_xml_preparedocument 
    @idoc OUTPUT, 
    @xmlString;

INSERT INTO [dbo].[tblArchivedMessages]
    --(really should list columns here)
SELECT 
    --really should list columns here
    --instead of 
    *
FROM OPENXML(@idoc, '/MACH', 2) 
    WITH [dbo].[tblArchivedMessages];

SET @lastId = SCOPE_IDENTITY();

EXEC sp_xml_removedocument 
   @idoc;   --never a bad idea to clean up!

UPDATE [dbo].[tblArchivedMessages] SET
    FromToMach = @fromToMach 
WHERE 
    ID = @lastId; 
```

试一试，看看有没有用。如果没有，请编写您的“tblArchivedMessages”表，然后发布 DDL。

我们会让它工作，一种或另一种方式！

干杯!

（顺便说一句，这段代码在我的机器上似乎可以正常工作）：

```
DECLARE 
    @idoc int, 
    @lastId int, 
    @xmlString varchar(max),
    @fromToMach bit

SET @xmlString = 
   '<MACH><B000>StringVal</B000><B002>StringVal</B002><B003>StringVal</B003><B004>StringVal</B004><B007>StringVal</B007><B011>StringVal</B011><B012>StringVal</B012><B013>StringVal</B013><B015>StringVal</B015><B018>StringVal</B018><B028>StringVal</B028><B032>StringVal</B032><B037>StringVal</B037><B039>StringVal</B039><B041>StringVal</B041><B043>StringVal</B043><B048>StringVal</B048><B049>StringVal</B049><B058>StringVal</B058><B061>StringVal</B061><B063>StringVal</B063><B127>StringVal</B127></MACH>';

SET @fromToMach = 1;

EXEC sp_xml_preparedocument 
    @idoc OUTPUT, 
    @xmlString;

SELECT 
    --really should list columns here
    --instead of 
    *
FROM OPENXML(@idoc, '/MACH', 2) 
        WITH
            (
                B000 VARCHAR(100),
                B001 VARCHAR(100), 
                B002 VARCHAR(100), 
                B003 VARCHAR(100), 
                B004 VARCHAR(100), 
                B005 VARCHAR(100), 
                B006 VARCHAR(100), 
                B007 VARCHAR(100), 
                B008 VARCHAR(100), 
                B009 VARCHAR(100), 
                B010 VARCHAR(100), 
                B011 VARCHAR(100), 
                B012 VARCHAR(100), 
                B013 VARCHAR(100), 
                B014 VARCHAR(100), 
                B015 VARCHAR(100), 
                B016 VARCHAR(100), 
                B017 VARCHAR(100), 
                B018 VARCHAR(100), 
                B019 VARCHAR(100), 
                B020 VARCHAR(100), 
                B021 VARCHAR(100), 
                B022 VARCHAR(100), 
                B023 VARCHAR(100), 
                B024 VARCHAR(100), 
                B025 VARCHAR(100), 
                B026 VARCHAR(100), 
                B027 VARCHAR(100), 
                B028 VARCHAR(100), 
                B029 VARCHAR(100), 
                B030 VARCHAR(100), 
                B031 VARCHAR(100), 
                B032 VARCHAR(100), 
                B033 VARCHAR(100), 
                B034 VARCHAR(100), 
                B035 VARCHAR(100), 
                B036 VARCHAR(100), 
                B037 VARCHAR(100), 
                B038 VARCHAR(100), 
                B039 VARCHAR(100), 
                B040 VARCHAR(100), 
                B041 VARCHAR(100), 
                B042 VARCHAR(100), 
                B043 VARCHAR(100), 
                B044 VARCHAR(100), 
                B045 VARCHAR(100), 
                B046 VARCHAR(100), 
                B047 VARCHAR(100), 
                B048 VARCHAR(100), 
                B049 VARCHAR(100), 
                B050 VARCHAR(100), 
                B051 VARCHAR(100), 
                B052 VARCHAR(100), 
                B053 VARCHAR(100), 
                B054 VARCHAR(100), 
                B055 VARCHAR(100), 
                B056 VARCHAR(100), 
                B057 VARCHAR(100), 
                B058 VARCHAR(100), 
                B059 VARCHAR(100), 
                B060 VARCHAR(100), 
                B061 VARCHAR(100), 
                B062 VARCHAR(100), 
                B063 VARCHAR(100), 
                B064 VARCHAR(100), 
                B065 VARCHAR(100), 
                B066 VARCHAR(100), 
                B067 VARCHAR(100), 
                B068 VARCHAR(100), 
                B069 VARCHAR(100), 
                B070 VARCHAR(100), 
                B071 VARCHAR(100), 
                B072 VARCHAR(100), 
                B073 VARCHAR(100), 
                B074 VARCHAR(100), 
                B075 VARCHAR(100), 
                B076 VARCHAR(100), 
                B077 VARCHAR(100), 
                B078 VARCHAR(100), 
                B079 VARCHAR(100), 
                B080 VARCHAR(100), 
                B081 VARCHAR(100), 
                B082 VARCHAR(100), 
                B083 VARCHAR(100), 
                B084 VARCHAR(100), 
                B085 VARCHAR(100), 
                B086 VARCHAR(100), 
                B087 VARCHAR(100), 
                B088 VARCHAR(100), 
                B089 VARCHAR(100), 
                B090 VARCHAR(100), 
                B091 VARCHAR(100), 
                B092 VARCHAR(100), 
                B093 VARCHAR(100), 
                B094 VARCHAR(100), 
                B095 VARCHAR(100), 
                B096 VARCHAR(100), 
                B097 VARCHAR(100), 
                B098 VARCHAR(100), 
                B099 VARCHAR(100), 
                B100 VARCHAR(100), 
                B101 VARCHAR(100), 
                B102 VARCHAR(100), 
                B103 VARCHAR(100), 
                B104 VARCHAR(100), 
                B105 VARCHAR(100), 
                B106 VARCHAR(100), 
                B107 VARCHAR(100), 
                B108 VARCHAR(100), 
                B109 VARCHAR(100), 
                B110 VARCHAR(100), 
                B111 VARCHAR(100), 
                B112 VARCHAR(100), 
                B113 VARCHAR(100), 
                B114 VARCHAR(100), 
                B115 VARCHAR(100), 
                B116 VARCHAR(100), 
                B117 VARCHAR(100), 
                B118 VARCHAR(100), 
                B119 VARCHAR(100), 
                B120 VARCHAR(100), 
                B121 VARCHAR(100), 
                B122 VARCHAR(100), 
                B123 VARCHAR(100), 
                B124 VARCHAR(100), 
                B125 VARCHAR(100), 
                B126 VARCHAR(100), 
                B127 VARCHAR(100)
            ) 

SET @lastId = SCOPE_IDENTITY();

EXEC sp_xml_removedocument 
   @idoc;   --never a bad idea to clean up! 
```

# php - PHP 无休止的 while 循环混乱

> ID：15302824
> 
> 赞同：2
> 
> 时间：2013-03-08T20:34:59.480
> 
> 标签：php, while-loop

我试图弄清楚为什么这个循环不会向浏览器返回任何内容：

```
while(1) {
    echo "hello";
    flush();
    sleep(1);
} 
```

我期待它每秒向浏览器返回“你好”......我错了吗？现在页面似乎只是挂起。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T20:37:05.203

PHP 仅在执行完成后输出。所以你所做的就是每毫秒生成一个新的 hello，并且由于你从不退出循环，所以你永远看不到输出。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T08:24:53.490

为了更正我的答案并让您更好地理解，并且对于 AJAX 爱好者......你需要在那里额外冲洗......'ob_'一个：

```
<?php
while( 1 ):
    echo "hello";
    ob_flush( ); flush();
    sleep( 1 );
endwhile; 
```

这是每个需要知道的人的“诀窍”；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T08:50:53.853

[Valentin](https://stackoverflow.com/a/15565761/592540)给了你正确的答案（支持他/接受他的答案！），但没有解释原因。这是解释：

# 输出缓冲

PHP 不会立即输出到浏览器，它会等待有一些内容发送到浏览器（可能以 1024、2048 或 4096 字节的块发送），或者在执行结束时。调用`flush()`使 PHP 发送数据，但不止一层缓冲。一种是内部缓冲（我刚刚评论过），但您可以添加更多缓冲层。假设这段代码：

```
<?php
echo "hi";
setcookie('mycookie', 'somevalue');
?> 
```

该`setcookie()`函数向浏览器发送一个 http 标头，但它不能这样做，因为在 HTTP 中，服务器（或客户端，两种方式都相同）必须首先发送所有标头，一个空行，然后是内容。如您所见，您在标头之前输出了一些内容（*hi*），因此它失败了（因为内部缓冲遵循相同的执行顺序）。

您可以使用 php 函数添加另一层输出缓冲[`ob_*()`](http://www.php.net/manual/en/ref.outcontrol.php)。通过`ob`缓冲它只缓冲内容输出，而不是 HTTP 标头。您可以使用它们来获取直接输出到浏览器的函数的输出，例如`var_dump()`. 此外，您可以**嵌套**以下层`ob`：

```
<?php
// start first level of output buffering
ob_start();
echo "nesting at level ", ob_get_level(), "<br />\n"; // prints level 1
echo "hi<br />";
ob_start();
echo "nesting at level ", ob_get_level(), "<br />\n"; // prints level 2
var_dump($_POST);
$post_dump = ob_get_clean();

// this will print level 1, because ob_get_clean has finished one level.
echo "nesting at level ", ob_get_level(), "<br />\n";

echo "The output of var_dump(\$_POST) is $post_dump<br />\n";

// in spite of being inside a layer of output_buffering, this will work
setcookie('mycookie', 'somevalue');

// flush the current buffer and delete it (will be done automatically at the
// end of the script if not called explicitly)
ob_end_flush(); 
```

可能您的 PHP 服务器默认启用了 output_buffering。查看[配置变量](http://www.php.net/manual/en/outcontrol.configuration.php)以默认关闭/打开它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T09:58:26.667

好的，卡洛斯批评我，因为我没有解释我的答案，但他的答案是含糊的......用饼干，层...... POST，ob_levels......：OO到很多关于真正问题没有真正意义的信息用户，但我会告诉你为什么你的代码不起作用。因为您在 php.ini 中设置了输出缓冲，例如：

```
output_buffering = On 
```

或者

```
output_buffering = 4096 (default setting on most distributions) 
```

这就是为什么你需要额外的'ob_flush()'来摆脱任何垃圾输出..

所以...要使您的代码正常工作，您有两个选择：

```
1). set output_buffering = 0 or Off (if you have access to the php.ini)
2). ob_flush many times as layers of buffering you have 
```

如果您不知道您有多少层，您可以执行以下操作：

```
while (@ob_end_clean( )); 
```

并清理你可能拥有的所有垃圾，然后你的代码就可以正常工作了。完整的片段：

```
<?php
while (@ob_end_clean( ));
while(1) {
    echo "hello";
    flush();
    sleep(1);
} 
```

赛亚..

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-08T20:36:49.170

在收到整个页面之前，浏览器不会显示任何内容。PHP 无法完成您想要完成的工作。

在 Javascript 中，这非常简单。

```
<script>
    window.setInterval(function(){document.innerHTML += "<br> Hello"}, 1000)
</script> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-08T20:39:42.080

您应该意识到 PHP 是一种脚本语言，因为它仅在完成脚本后才返回输出。编辑：或者在输出缓冲区被填满后，感谢@Marc B。不管我会说为此使用 JS 或者如果你真的需要你的服务器更明智，请使用 AJAX 请求。

也许您应该考虑使用 Javascript？这将允许您每秒添加内容（请记住，JS 在客户端运行，因此您可能不想让您的操作变得如此广泛。）

或者，您可以考虑通过例如 JQuery 使用 AJAX 请求，但这可能超出了这个问题的范围......

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-22T07:00:51.067

也许回答还不算晚，但是如果您想在这里每秒刷新一次，我给您一个示例：

```
<?php
echo "Flushing every second ...\n";
flush( );
$seconds = array (0,1,2,3,4,5,6,7,8,9);

foreach ($seconds as $second):
    echo $second . "\n";
    sleep( 1 );
    @ob_flush( ); flush( );
endforeach;
echo 'I flashed 10 second :P'; 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-03-08T20:44:47.730

添加到所有其他答案，

要对客户端进行异步服务器推送，您需要使用 WebSockets。这是一个庞大的主题，并没有完全标准化，但肯定有办法做到这一点。如果您有兴趣搜索 PHP Websockets。

# javascript - 向类添加方法与向类的原型添加方法有什么优势？

> ID：15302825
> 
> 赞同：3
> 
> 时间：2013-03-08T20:35:05.147
> 
> 标签：javascript

当我编写一个 javascript 类时，它通常是这样的：

```
var myClass = function(prop1, prop2) {
    this.prop1 = prop1;
    this.prop2 = prop2;

    this.method1 = function() {//blah}
    this.method2 = function() {//blahblah}
} 
```

但是我读过的大多数书籍/教程都描述了这样的写作课程：

```
var myClass = function(prop1, prop2) {
    this.prop1 = prop1;
    this.prop2 = prop2;
}
myClass.prototype.method1 = function() {//blah}
myClass.prototype.method2 = function() {//blahblah} 
```

这两种方法有什么区别？这个比那个好吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T20:44:42.810

使用原型的第二种方法在创建大量对象时效率更高，尤其是在您拥有大量方法的情况下。

第一种方法需要在每次调用时创建所有方法函数`new myClass()`。当您使用原型时，这些函数只需创建一次。

第一种方法有一个优点：您可以将构造函数用作闭包，因此它的方法可以访问构造函数中的局部变量。

作为旁注，您的构造函数名称应以大写字母开头，以遵循正常的 JavaScript 约定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T20:45:45.413

您实现的只是功能。它们可以用作创建对象的构造函数。调用构造函数时，会创建一个新对象，并将其`Prototype`设置为构造函数的原型属性，这意味着它与构造函数的原型共享属性。在第一种情况下`method1`， 和是使用构造函数`method2`创建的每个对象的属性。`myClass`如果这些方法在以这种方式创建的所有对象中都是相同的，那就是一种内存浪费。如果将这些方法放入构造函数的原型中，则在调用构造函数时不会创建它们的新副本，但创建的对象仍然可以使用原型链访问它们。所以一般是为了节省内存。

# javascript - 不知道我的正则表达式哪里出错了

> ID：15302826
> 
> 赞同：0
> 
> 时间：2013-03-08T20:35:15.707
> 
> 标签：javascript, regex, replace, bookmarklet

我正在编写一个 Javascript 书签作为工作的辅助项目（不要以编码为生，非常适合初学者）。

它扫描`cnn.com`成绩单并挑选出现场嘉宾的姓名和头衔，不包括从磁带播放的那些。

为此，我抓取该站点，然后使用`replace()`and 正则表达式删除 and 之间的文本`BEGIN VIDEO CLIP`，`END VIDEO CLIP`然后使用另一个正则表达式扫描与`NAME, TITLE:`格式匹配的所有内容。它在某些成绩单上就像一种魅力，而在其他成绩单上却惨遭失败。这是我的代码：

```
(function () {
    var webPage = document.body.innerText;
    var tape = webPage.replace(/(BEGIN VIDEO CLIP)([\s\S]*)(END VIDEO CLIP)|(BEGIN VIDEOTAPE)([\s\S]*)(END VIDEOTAPE)/g, "");
    var searchForGuests = /[A-Z ].+,[A-Z0-9 ].+:/g;
    var guests = tape.match(searchForGuests).join("; ");
    alert("Guests: " + guests)
})(); 
```

例如，当应用于[http://transcripts.cnn.com/TRANSCRIPTS/1303/05/pmt.01.html](http://transcripts.cnn.com/TRANSCRIPTS/1303/05/pmt.01.html)时，即使有几个现场客人，它也只会提醒主持人的姓名（Piers Morgan）。是我的正则表达式有问题吗？我一直在 Regexr 中进行测试，但据我所知，没有在 Javascript 中使用任何非法内容。

它应该适用于以下任何成绩单：[http](http://transcripts.cnn.com/transcripts) ://transcripts.cnn.com/transcripts 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T20:45:09.013

这里的主要问题可能是贪婪`[\s\S]*`，它会匹配和删除太多。尝试`[\s\S]*?`改用。`?`在之后添加`*`使其匹配尽可能少（而不是尽可能多）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T20:48:37.197

在您的`searchForGuests`正则表达式中，尝试`^([A-Za-z0-9, ]+(?=:))`

如果您的文字是这样的：

```
TOM COUGHLIN, NFL COACH: Preparation is the key to success. 
MORGAN: Plus he's worn out his Oscar welcome but she's Hollywood's golden girl, Kristin Chenoweth. 
```

它将返回匹配：

```
TOM COUGHLIN, NFL COACH
MORGAN 
```

# php - Ajax、PHP、MySQL 返回 sql 表

> ID：15302829
> 
> 赞同：0
> 
> 时间：2013-03-08T20:35:32.087
> 
> 标签：php, mysql, ajax

我有以下 Ajax 代码将信息从 HTML 表单发送到 PHP 文件。

```
 $(document).ready(function(){
         $('#txt').load( '../../do_comment.php' );
     });
     $(function(){
        $("#submit").click(function(e) {
            e.preventDefault();
            var name = $("#user_name").val();
            var comment = $("#user_comment").val();
            var ID = '2'; //must change for each post
            $.ajax({
            type: "POST",
            url: "../../do_comment.php",
            data: {user_name:name, user_comment:comment, ID:ID},
            success: function(){
                $('#txt').load( '../../do_comment.php' );
            },
            error:function(e){alert("it failed");}
            });
        }); 
}); 
```

在我的 PHP 文件中，我声明如下变量：

```
$name = $_POST[user_name];
$comment = $_POST[user_comment];
$ID = $_POST[ID]; 
```

并用这个正确地填充我的数据库：

```
 if($_POST[user_comment] != Null) {
    $sql = "INSERT INTO $table_name (post_ID, user_name, comments)
    VALUES ('$ID','$name', '$comment')";

    $result = @mysql_query($sql,$connection) or die(mysql_error());

 } 
```

问题是没有一个变量会回显任何类型的值，当我尝试查询数据库时，它只有在我硬编码 ID 值而不是使用变量时才有效。

```
$data = mysql_query("SELECT * FROM $table_name WHERE post_ID = 
 '".mysql_real_escape_string($ID)."'") or
    die(mysql_error()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T20:42:37.950

从 $_GET/$_POST/$_REQUEST 收集时使用以下内容：

```
$name = $_POST['user_name'];
$comment = $_POST['user_comment'];
$ID = $_POST['ID']; 
```

注意抽动。正确的语法是`$_POST['']`.

您是否检查过数据库以确保插入了正确的值？

此外，如果`post_id`是整数，请不要使用抽动

```
SELECT * FROM table WHERE post_ID = 1234 
```

**注意**：不要使用 MySQL_*，它在 PHP 5.5 中已被弃用。使用 MySQLi 或 PDO。还要注意 SQL 注入，尤其是在使用 MySQL_* 时。

# c# - 检查 Flash 是否在 C# 中运行

> ID：15302830
> 
> 赞同：0
> 
> 时间：2013-03-08T20:35:35.557
> 
> 标签：c#, flash, windows-7, process

我想创建一个工具来定期检查 Flash 是否正在运行。我唯一想到的是检查进程，但即使在关闭包含 Flash 内容的选项卡后，Flash 播放器插件进程仍在运行。我有哪些选择？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-08T20:41:06.593

是检查是否有任何 Flash 应用程序正在运行或是否有特定的 Flash 应用程序正在运行？如果是后者，那么你可以做我为我的 Flash 应用程序所做的事情。我向沙箱写入了一个 xml 文件，该文件标记了我的 flash 应用程序的状态以及用户在 flash 应用程序中的位置。不知道

# asp.net-mvc - 如何将我自己的 `Html` 变量添加到当前视图页面？

> ID：15302831
> 
> 赞同：0
> 
> 时间：2013-03-08T20:35:39.660
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-mvc-helpers

许多 MVC 扩展在视图页面上使用自己的变量`HtmlHelper`，就像您将 Telerik 助手标记为`@Telerik().Helper`. 我的扩展仍然停留在 ol' 上`HtmlHelper<TModel>`，所以我不能说`@Erisia().Helper`，不得不求助于普通的旧的、非促销的`@Html.MyHelper`.

我怎样才能像其他扩展库一样实现这个技巧？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T21:33:18.400

您可以为此创建自己的静态类

```
public static class Test
{
    public static string Helper()
    {
        return "helper!";
    }
} 
```

然后在你看来`@Test.Helper`

如果您出于某种原因需要从 HtmlHelper 继承，请参阅[此问题。](https://stackoverflow.com/questions/9456953/inheriting-from-htmlhelper-instead-of-extending-it)

# php - API 错误代码：100 facebook OpenGraph

> ID：15302835
> 
> 赞同：3
> 
> 时间：2013-03-08T20:35:51.787
> 
> 标签：php, javascript, facebook, facebook-graph-api, heroku

我刚刚开始制作一个托管在 heroku 上的新 Facebook 应用程序，我还没有做任何更改，但对功能进行了一些测试，以习惯这些东西的工作方式。一切都很好，直到我尝试“发送消息按钮”，出现一个对话框，其中包含以下错误日志：

```
An error occurred. Please try later

API Error Code: 100
API Error Description: Invalid parameter
Error Message: 'link' is invalid. 
```

我查看了一些相关的代码，并没有发现任何问题，但是我很新，所以也许你们中的任何人都可以帮助我找出问题所在：

```
 $('#sendToFriends').click(function() {
          FB.ui(
            {
              method : 'send',
              link   : $(this).attr('data-url')
            },
            function (response) {
              // If response is null the user canceled the dialog
              if (response != null) {
                logResponse(response);
              }
            }
          );
        }); 
```

我认为没有问题的原因`$(this).attr('data-url');`是以下工作（发布到墙上按钮）：

```
 $('#postToWall').click(function() {
      FB.ui(
        {
          method : 'feed',
          link   : $(this).attr('data-url')
        },
        function (response) {
          // If response is null the user canceled the dialog
          if (response != null) {
            logResponse(response);
          }
        }
      );
    });

  } 
```

获取值的`getUrl()`函数是：

```
 public static function getUrl($path = '/') {
if (isset($_SERVER['HTTPS']) && ($_SERVER['HTTPS'] == 'on' || $_SERVER['HTTPS'] == 1)
  || isset($_SERVER['HTTP_X_FORWARDED_PROTO']) && $_SERVER['HTTP_X_FORWARDED_PROTO'] == 'https'
) {
  $protocol = 'https://';
}
else {
  $protocol = 'http://';
}

return $protocol . $_SERVER['HTTP_HOST'] . $path; 
```

}

谁能帮帮我吗？我在 facebook 开发者论坛和 stackoverflow 上进行了一些搜索，但是虽然错误代码相同，但错误消息却不同。我认为这个问题来自facebook，因为方法`feed`有效，而方法`send`无效。这两种方法都在 facebook sdk 中定义

注意：我使用的是最新的 php sdk

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-14T13:02:54.517

我只使用发送对话框遇到了这个问题。提要发布工作正常，这很奇怪。我在公共 URL 上使用动态查询字符串参数。

我通过强制 Facebook在尝试通过 FB UI 发送对话框发送URL**之前抓取 URL 来解决此问题。**使用 FB API 来点击参数`graph.facebook.com`中发布的 URL，并将参数设置为.`id``scrape``true`

像这样：

```
FB.api('https://graph.facebook.com/', 'post', {
    id: '[URL]',
    scrape: true
}, function(response) {
    FB.ui({
        method: 'send',
        name: '[name]',
        picture: '[Picture URL]',
        link: '[URL]',
        description: '[description]'
    });
}); 
```

[我也在这里](https://stackoverflow.com/questions/18118858/facebook-api-error-100-link-is-invalid/18232393#18232393)用这个解决方案回答了同样的问题。

# c++ - 本机和托管 C++ 之间的函数调用（方法）

> ID：15302837
> 
> 赞同：0
> 
> 时间：2013-03-08T20:36:03.487
> 
> 标签：c++, .net, hook, marshalling

我是 .Net 的新手，并试图解决这个问题。在过去的几天里，我做了足够多的谷歌搜索，除了一些模糊的（至少对我来说）C# 相关信息，我什么也没有遇到

基本上，我正在尝试设置一些全局挂钩来执行某些自动化过程。由于开发环境是 VS2008 C++ windows forms，所以我首先编译了一个本地 Dll 以由调用 prog 注入。策略是本机 dll 中的回调 proc 调用 .Net 程序（或者可能是包装管理的 dll）中的函数，传递过滤后的原始数据（键盘/鼠标/WM_create/etc）消息以进行进一步处理。

问题：如何将此类函数的句柄传递给注入的 dll？

托管包装器 dll 路径是更简单的选择，还是只是让托管和本机函数并排驻留在主应用程序中？

我将不得不做很多编组，这是事情的另一个阴暗面。是否有指向编组功能的精确文档/示例的链接？

我提前感谢您的帮助。
标记

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T21:49:57.703

看看'Marshal.GetFunctionPointerForDelegate'

# gwt - 从 GWT 返回 404 或其他错误代码

> ID：15302838
> 
> 赞同：1
> 
> 时间：2013-03-08T20:36:07.203
> 
> 标签：gwt

我正在处理我的 GWT 应用程序中的历史记录。如果在 History.ValueChanged 事件期间，历史标记值未知，我想向用户显示 404。

如何从 GWT 返回标准的“页面未找到”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T21:08:22.937

URL 令牌（ 之后的部分`#`）不会发送到服务器 - 对该 URL 部分的更改不会创建 HTTP 请求，因此没有 HTTP 响应，因此没有 HTTP 错误代码。

（当然，您可以从 History 的 ValueChangeHanler 中对 URL 令牌更改做出反应，并手动触发 HTTP 请求 - 然后可以返回 404。但是要向用户显示 404，您必须重新定位到该 URL，这可能不是您想要的。不如向用户显示一条漂亮的错误消息怎么样？）

# algorithm - 整数线性规划是否提供最佳解决方案？

> ID：15302841
> 
> 赞同：3
> 
> 时间：2013-03-08T20:36:19.380
> 
> 标签：algorithm, optimization, linear-programming, np-hard

我正在尝试使用整数线性规划 (ILP) 来解决问题。由于问题是 NP-hard ，我想知道 Simplex Method 提供的解决方案是否是最优的？任何人都可以评论使用单纯形法的 ILP 的最优性或指向某些来源。是否有任何其他算法可以为 ILP 问题提供最佳解决方案？

编辑：我正在寻找通过 ILP 的任何算法（单纯形法、分支定界和切割平面）获得的解决方案的最优性的是/否答案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T22:11:12.927

单纯形法不处理您想要整数的约束。简单地对结果进行四舍五入并不能保证给出最佳解决方案。

[如果约束矩阵是完全对偶积分](http://en.wikipedia.org/wiki/Total_dual_integrality)，则使用单纯形法解决 ILP 问题确实有效。

一些解决 ILP（不限于完全对偶积分约束矩阵）的算法是[Branch and Bound](http://en.wikipedia.org/wiki/Branch_and_bound)，它易于实现，并且如果成本合理均匀（非常不均匀的成本使其尝试许多看起来很有希望的尝试），通常效果很好首先，但事实并非如此）和[切割平面](http://en.wikipedia.org/wiki/Cutting-plane_method)，老实说我不太了解，但它可能很好，因为人们正在使用它。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-08T21:39:15.577

根据定义，线性规划问题的解集是最优的。

线性规划是一类称为“约束满足”的算法。一旦你满足了约束，你就解决了问题并且没有“更好”的解决方案，因为根据定义，最好的结果是满足约束。

但是，如果您还没有完全模拟问题，那么显然其他类型的解决方案可能会更好。

* * *

澄清：当我在上面写“满足约束”时，我包括目标函数的最大化。切割平面算法本质上是单纯形算法的扩展。

# python - 如何更新元组中列表的一部分？还有 IndexError: list index out of range 我做错了什么？

> ID：15302852
> 
> 赞同：0
> 
> 时间：2013-03-08T20:36:42.817
> 
> 标签：python, python-2.7

pnew 到 python，我正在玩元组中的列表。我只想删除密码而不是用户名，并在删除密码后更新密码，但是我测试了代码以发现它删除了整个元组和元组中的列表，然后它给了我 IndexError: list index超出范围....任何帮助将不胜感激。

```
Users=[("Jim","password1"),("Bob","password2"),("Helen","password3"),("Beverly","blue")]

def changePassword():
    a=raw_input("Enter old password to continue:\n")

    for i in range(len(Users)):
        c,d=Users[i]
        if a==d:
            Users.remove(Users[i])
            print "Password deleted"
            print Users
    if a!=d:
        print"Incorrect"
        changePassword()
    a=raw_input("Enter new password:\n")
    for i in range(len(Users)):
        c,d=Users[i]
    if a==d:
        Users.append(Users[i])
        changePassword() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T21:15:55.320

你的函数有几个问题，除非我完全误解了它的目的，但让我们从`IndexError`你得到的开始。

这是它发生的代码：

```
for i in range(len(Users)):
    c,d=Users[i]
    if a==d:
        Users.remove(Users[i])
        print "Password deleted"
        print Users 
```

那么这里会发生什么？您遍历列表的长度，如果您匹配密码，则从列表中删除当前用户。之后，您继续迭代*先前计算*的列表长度。因此，如果您从列表中删除一项，其长度会减一，*但*for 循环仍将遍历旧长度（因为`range(len(Users))`会立即计算）。因此，如果您刚刚从列表中删除了一个用户，则 for 的最后一个值`i`将尝试访问列表中不再存在的项目。

有一个相关问题会直接作为后续问题发生，那就是您将跳过循环中的元素。您正在从列表中删除一个项目，但您也在前进`i`，就像没有删除任何项目一样。因此，当您删除 item`1`时，*新*的item`1`就是之前的item `2`。因此，当您前进到 时`2`，您将跳过该项目。

那么你能做些什么来解决这个问题呢？嗯，有不同的方法。您可以创建一个 while 循环并以“经典”方式处理该索引（增加自己并始终检查 while 条件中的长度）。您还可以保留第二个列表以记住稍后（循环之后）要删除的项目。但是，在您的情况下，我认为做一些完全不同的事情可能是个好主意。

根据我对您的功能的理解，您想编写一些允许您更改*单个*用户密码的东西。因此，您输入当前密码，然后输入新密码，它将更新列表中用户的条目。到目前为止，这不是您的版本中正在发生的事情。您的函数的作用如下：

1.  询问当前密码
2.  删除所有密码匹配的用户
3.  如果列表中的最后一个用户没有输入密码，则打印“不正确”（它只会看到 的*最后一个*值`d`，因此它只会检查最后一个用户）
4.  要求新密码
5.  再次遍历用户列表并仅保存最后一个用户（同样，`c`将`d`包含循环后的最后一个值）
6.  如果最后一个用户的密码与您输入的相同（为什么要检查，您想输入一个*新*密码），则将相同的用户（因为`i`再次指向列表中的最后一个索引）附加到列表。

如您所见，发生了一些奇怪的事情，可能不是故意的。你可能想要做的是这样的：

1.  询问当前密码
2.  查找该密码的用户
3.  询问新密码
4.  从列表中删除旧用户
5.  将修改后的用户附加到列表

所以也许是这样的：

```
oldPassword = raw_input('Enter your old password to continue:\n') # 1
found = False
for name, password in Users:
    if password == oldPassword: # 2
        found = True
        break

if found:
    newPassword = raw_input('Enter new password:\n') # 3

    Users.remove((name, password))    # 4
    Users.append((name, newPassword)) # 5
else:
    print 'Incorrect password' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T21:41:12.417

我不确定元组列表是存储用户 ID 和密码的最佳方式。也许您可以改用字典，如下所示：

```
Passwords = {"Jim": "password1", "Bob": "password2", "Helen":"password3", "Beverly": "blue"} 
```

这样你就可以确定两个不同的用户不会有相同的 id。

此外，通过密码检索用户也不是一个好主意，因为多个用户可能具有相同的密码。您应该首先提示输入用户 ID，或者将其作为更改密码函数的参数传递。像这样的东西：

```
def changePassword(userId):
  input=raw_input("Enter old password to continue:\n")
  if input == Passwords[userId]:
    new_password = raw_input("Enter new password:\n")
    Passwords[userId] = new_password
  else:
    print "Wrong password"
    changePassword(userId) 
```

# jquery - jQuery 禁用链接

> ID：15302856
> 
> 赞同：0
> 
> 时间：2013-03-08T20:36:51.637
> 
> 标签：jquery, html, disable-link

基本上我有这个 HTML 表（它作为一个菜单）：

```
<table class="content" align="center">
    <tr>
        <td class="links">
            <table class="links">
                <tr>
                    <td>
                        <div id="i1">   
                            <a href="http://www.google.com">Sth 1</a>
                        </div>
                        <div id="i1">   
                            <a>Sth 2</a>
                            <div id="i2">   
                                <a href="http://www.google.com">Sth 2 2</a>
                            </div>
                        </div>
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table> 
```

和这个 jQuery 脚本使它打开/关闭：

```
$(document).ready(function(){
$("table.links").find("div").toggle(
    function(e){
        $(e.target).closest("div").children("div").slideDown(200);
    }, 
    function(e){
        $(this).children("div").slideUp(200);
    }
);}); 
```

对于一些未知的 jQuery 代码禁用链接 - 如果您右键单击链接并选择在新窗口中打开，您仍然可以打开它们，但如果您左键单击它们不会打开。

有人可以告诉我为什么会这样以及如何解决它。

下载所有文件（包括 HTML 代码、CSS 样式、jQuery 代码和 jQuery）：[http ://www.2shared.com/file/veMG6Gjo/test.html](http://www.2shared.com/file/veMG6Gjo/test.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T20:49:44.063

[这是toggle()](http://api.jquery.com/toggle-event/)的已知副作用。文档说：

> 该实现还调用事件，因此如果在元素上调用`.preventDefault()`了链接，则不会跟踪链接，也不会单击按钮。`.toggle()`

要解决这个问题，您必须绑定到`click`而不是`toggle`.

-- 来源 --> [jQuery: .toggle() 之后链接不起作用](https://stackoverflow.com/questions/11883663/jquery-link-doesnt-work-after-toggle)

* * *

所以你可以做类似的事情：

```
$(document).ready(function(){
    $("table.links").find("div").each(function(){
        var toggler = false;
        $(this).click(function(e){
            toggler = !toggler;
            if(toggler){
                 $(e.target).closest("div").children("div").slideDown(200);
            }else{
                  $(this).children("div").slideUp(200);
            }
        });
    });
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T20:47:07.347

使用以下代码，这将仅在 div 有子项时启用切换：

```
$(document).ready(function(){
    $("table.links").find(".i2").parent().toggle(
        function(e){
            $(e.target).closest("div").children("div").slideDown(200);
        }, 
        function(e){
            $(this).children("div").slideUp(200);
        }
    );
}); 
```

另请注意，我使用`.i2`了而不是`#i2`，那是因为您应该使用类，而不是 ID。

# javascript - 切换多个同名类中 1 个的 css

> ID：15302862
> 
> 赞同：2
> 
> 时间：2013-03-08T20:37:27.200
> 
> 标签：javascript, jquery, html, css

我已经动态创建了 div ..

`<div class="container"></div>`

每个 div 中都有一个输入元素。

```
<div class="container">
   <input type="button" class="container_button" value="toggle" />
</div> 
```

我的目标是仅最小化单击按钮的容器 div ..

```
$('.container_button').onclick(function() {
   $('.container').css('height','20px');
}); 
```

当存在同一类的多个 div 时，如何实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T20:38:33.377

你需要找到`.container`相对于被点击的 DOM 元素。

```
$('.container_button').click(function () {
   $(this).closest('.container').css('height', '20px');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T20:42:25.430

jQuery 对象没有`onclick`方法，您可以使用`on`方法来代替，因为您正在动态生成元素，您还应该委托事件。

```
$(document).on('click', '.container_button', function() {
   $(this).parent('.container').css('height','20px');
   //  ^--- clicked element
}); 
```

# css - HTML5 中的移动网站在刷新之前不会提取 CSS 文件

> ID：15302871
> 
> 赞同：0
> 
> 时间：2013-03-08T20:38:09.133
> 
> 标签：css, html, forms, contact

![在此处输入图像描述](../Images/130bc1399170308295bd54d27bbd2f86.png)我正在为 HTML5 和 CSS 的移动网站构建联系表单。这是我在所有移动网站上使用的相同形式，在 5 小时不工作后，我直接从我建立的工作网站中提取代码，但它仍然无法正常工作。

问题是当您转到联系页面时，它会显示联系表单，但标签居中且提交按钮图像未显示。我必须刷新它以调出正确的 CSS 文件以将文本左对齐并显示提交按钮。最初我认为这是由于 CSS/JS 与顶部菜单的冲突，所以我取消了它，但它仍然导致同样的问题。我已经清除了手机和网络浏览器上的现金，它们的工作方式都一样。

这是链接：www.lpokc.org/mobi/contact.php 转到此页面后点击刷新，您将看到不同之处。

我的问题是，这是一个缓存问题，是服务器端问题，还是我的编码冲突。我不擅长在此站点上发布代码，但如果您从 Web 浏览器访问移动站点，您只需右键单击并查看源代码即可查看我的代码。我有一个带有样板 CSS 和自定义 CSS 的样板 html 核心文件。

是否有某种脚本可以用来使此页面在页面加载时自动刷新一次，然后在重新加载后不再刷新？我不想使用这样的不当修复，但我已经在这个问题上工作了一天。

左侧是刷新前。我现在已经从网站上提取了代码，但我认为这是一个 js 冲突，因为当单击任何页面的链接时，它会从菜单中自动加载 css。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T20:53:19.280

我看到它很好。似乎完美无缺，但如果您仍然遇到问题，您可以使用 cookie 或会话变量。如果该变量不存在，您可以使用 php 函数`header( 'Location: http://www.lpokc.org/mobi/contact.php' ) ;`来“刷新”页面。它实际上只是一个重定向命令，但是如果您将它们发送回它们所在的页面，则与刷新几乎相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T21:01:56.283

这是我的菜单 JS/CSS 的一个冲突问题。我拉了它，现在一切正常。

# php - 将复选框数据放入数组中，然后在 PHP 中进行检查

> ID：15302873
> 
> 赞同：0
> 
> 时间：2013-03-08T20:38:28.570
> 
> 标签：php, arrays

我正在传递一些数据...

```
<input class="cbox" type="checkbox" name="type[]" value="School" />
<input class="cbox" type="checkbox" name="type[]" value="Home" /> 
```

我知道数据正常到达，因为我正在检查

```
echo implode(",",$_POST['type']); 
```

现在，我还希望检查某个复选框是否被勾选（每个复选框都被勾选）。

我正在尝试类似...

```
if(!empty($_POST['type'])) {
 if(in_array("School",$type)) {
  // Code here
 }
} 
```

但我最终看到`Warning: in_array() [function.in-array]: Wrong datatype for second argument`. 这不是我要传递的数组吗？我可以使用其他功能来执行此操作吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T20:40:11.017

`$type`未声明。尝试：

```
if(!empty($_POST['type'])) {
    if(in_array("School", $_POST['type'])) {
        // Code here
    }
} 
```

# php - 来自服务器的 XCode 图像

> ID：15302880
> 
> 赞同：-2
> 
> 时间：2013-03-08T20:38:59.013
> 
> 标签：php, xcode, json, image

我有一个随机选择图像源的 php 页面，示例输出为：

[http://mywebsite.com/lion.jpg](http://mywebsite.com/lion.jpg)

我将如何让 Xcode 获取输出并将其用作图像源。（我正在使用 MainStoryboard）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T20:43:56.363

您需要手动加载图像。 `UIImage's` `imageWithData:`将从网站加载图像。

在您的视图控制器中，为 ImageView 添加一个 IBOutlet。

```
@property (nonatomic) IBOutlet UIImageView* backgroundImageView; 
```

在您的 Storyboard 中添加`UIImageView`所有内容并将其分配给 backgroundImageView 插座。

在`viewDidLoad`视图控制器的方法中添加：

```
NSString *ImageURL = @"YourURLHere";
NSData *imageData = [NSData dataWithContentsOfURL:[NSURL URLWithString:ImageURL]];
self.backgroundImageView.image = [UIImage imageWithData:imageData]; 
```

# android - 当应用程序进入后台时Android会引发通知（不是单个活动）

> ID：15302881
> 
> 赞同：0
> 
> 时间：2013-03-08T20:39:05.617
> 
> 标签：android, android-activity, background, notifications

我有一个由 3 个活动 A、B 和 C 组成的 Android 应用程序：

*   A 是应用程序本身（一个常规的 Activity）
*   B 是设置屏幕（使用 PreferenceActivity 制作）
*   C 是关于屏幕（常规活动）

活动之间的关系如下：

*   A是主要活动
*   B的父母是A
*   C的父母是B

Activity A 在进入后台时会发出通知，这是通过在 A 的 onStop() 方法中调用 NotificationManager 的 notify() 来完成的。

当用户启动应用程序时，它从活动 A 开始，然后如果用户按下主页按钮，则会在显示主屏幕时立即发出通知。单击通知将使用户返回应用程序。

一切似乎都正常，但现在有一种我不喜欢的行为：当用户启动应用程序然后进入设置（因此显示活动 A，然后显示 B）时，也会引发通知（因为 A 已经进入后台以便显示 B)。

这是不希望的：仅当应用程序进入后台时才应引发通知，而不管用户正在查看的活动如何。

如何实现这种正确的行为？

在此先感谢，马可

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T20:56:44.440

您可以设置一个布尔标志，在发出通知之前检查该标志，并在 startig Activity B 之前将其设置为“false”。

当然，这样你就必须在活动 B 和 C 中做同样的事情，让他们也发出通知。

或者，正如在您可以实现自己的应用程序类并在那里获取回调之前所暗示的那样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T20:57:39.013

`shouldNotify`当您打开其他活动之一时，只需创建一个布尔标志并将其设置为 false。如果没有您的代码，我无法确切地告诉您如何实现它，但这里有一个例子可以让您了解这个想法：

```
private boolean shouldNotify = true;

@Override 
public void onStart(){
    super.onStart();
    shouldNotify = true;
}

@Override
public void onStop(){
    super.onStop();
    if(shouldNotify){
        sendNotification();
    }
}

// Where you need to put these next snippets depends on how you've made your Activity

/*
 * Launching settings activity
 */
shouldNotify = false;
Intent settingsIntent = new Intent(this, YourSettingsActivity.class);
startActivity(settingsIntent); 
```

# python - Linux中的Python：将用户输入异步放入队列

> ID：15302883
> 
> 赞同：0
> 
> 时间：2013-03-08T20:39:07.627
> 
> 标签：python, linux, asynchronous, queue, user-input

我正在尝试运行一个程序，该程序在工作完成时接受输入。我查看了几种表格，并查看了[文档](http://docs.python.org/2/library/threading.html?highlight=threading#threading)。我在 Debian 中运行它，我知道我可以使用这个[getch 函数](https://stackoverflow.com/questions/1052107/reading-a-single-character-getch-style-in-python-is-not-working-in-unix)来接收字符而无需按回车键。为了打破它，这就是我试图在我的无限while循环中实现的

*   接受输入（线程在这里对我不起作用
*   将输入放入队列
*   如果没有正在运行的作业，则以队列前面的项目作为变量启动作业

我也在运行线程模块来执行另一条指令。有什么办法可以做到这一点吗？

* * *

更新：这是我迄今为止尝试过的：

首先，我尝试使用线程模块中的计时器来阻止它等待，就像这样。

```
def getchnow():    
        def time_up():
            answer= None
            print 'time up...'

    wait = Timer(5,time_up) # x is amount of time in seconds
    wait.start()
    try:
            print "enter answer below"
            answer = getch()
    except Exception:
            print 'pass\n'
            answer = None

    if answer != True:   # it means if variable have somthing 
            wait.cancel()       # time_up will not execute(so, no skip)
    return answer
line = getchnow()
#Add line variable to queue
#Do stuff with queue 
```

这里的问题是它仍在等待用户输入。

然后我尝试将 getch 函数放入另一个线程。

```
q = Queue.Queue
q.put(getch())  
if q.get() != True:   # it means if variable have somthing
    line = q.get()
    #Add line variable to queue
#Do stuff with queue 
```

这种尝试不会让我做任何事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T00:49:37.083

我阅读了这个[链接](http://code.activestate.com/recipes/134892/)的更多内容，并且在底部有一个我想要的实现。

> 我将 select 模块用于 Linux 上的非阻塞实现。如果没有收到输入，这将在（此处为 5 秒）超时。在线程中使用时特别有用，因此 getch 调用是非阻塞的，并允许线程干净地退出

```
# This class gets a single character input from the keyboard
class _GetchUnix:
    def __init__(self):
        import tty, sys
        from select import select
    def __call__(self):
        import sys, tty, termios
        from select import select
        fd = sys.stdin.fileno()
        old_settings = termios.tcgetattr(fd)
        try:
                tty.setraw(sys.stdin.fileno())
                [i, o, e] = select([sys.stdin.fileno()], [], [], 2)
                if i: 
                ch=sys.stdin.read(1)
                else: 
                ch='' 
        finally:
                    termios.tcsetattr(fd, termios.TCSADRAIN, old_settings)
            return ch
getch = _GetchUnix()
# End Class 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-02T15:37:00.100

我也用过`[i, o, e] = select([sys.stdin.fileno()], [], [], 2)`，但听说它可能无法在 Windows 上运行。如果有人仍然需要多线程、非阻塞输入示例：

```
import threading
import sys
import time

bufferLock=threading.Lock()
inputBuffer=[]

class InputThread(threading.Thread):
    def run(self):
        global inputBuffer
        print("starting input")
        while True:
            line=sys.stdin.readline()
            bufferLock.acquire()
            inputBuffer.insert(0,line)
            bufferLock.release()

input_thread=InputThread()
input_thread.start()
while True:
    time.sleep(4)
    bufferLock.acquire()
    if len(inputBuffer)>0:
        print("Popping: "+inputBuffer.pop())
    bufferLock.release() 
```

# visual-c++ - 如何在 C++ CLI 中获取枚举项的名称？

> ID：15302884
> 
> 赞同：2
> 
> 时间：2013-03-08T20:39:16.263
> 
> 标签：visual-c++, visual-studio-2012, enums, c++-cli

我已经有以下代码，但变量`System::String^ Name_`是`nullptr`：

```
enum EWeapons
{
    Fist    =   0   
}
System::String^ Name_ = Enum::GetName( EWeapons::typeid,0) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-08T20:50:54.230

您需要使用`enum class`关键字来声明托管枚举类型：

```
public enum class EWeapons
{
    Fist = 0   
};
...
System::String^ Name = Enum::GetName(EWeapons::typeid, (Object^)0); 
```

请注意更高版本的 Visual Studio（VS2012 及更高版本）中的问题点，C++11 语言规范也采用了`enum class`关键字。与其他 C++/CLI 关键字（如`override`和`nullptr`. 这是一个非常讨厌的问题`enum class`，C++/CLI 编译器确实区分了本机枚举和托管枚举类型。托管枚举最终出现在元数据中，而本机枚举则没有。当然 Enum::GetName() 不能用于原生枚举。

您*必须*使用可访问性关键字（`public`或`private`）来声明托管枚举类型。在本机枚举上无效，这是编译器可以区分的唯一方法。

# java - 将从网络摄像头获取的图像添加到现有的 JPanel

> ID：15302889
> 
> 赞同：0
> 
> 时间：2013-03-08T20:39:35.410
> 
> 标签：java, swing, opencv, webcam, javacv

当单击按钮时，我试图将我从网络摄像头捕获的图像添加到现有的 JPanel，但 JPanel 从不显示图像。谁能指出我正确的方向？

```
private void captureButtonActionPerformed(java.awt.event.ActionEvent evt) {
    BufferedImage img1;
    JLabel label;
    final OpenCVFrameGrabber grabber = new OpenCVFrameGrabber(0);

    try {
        grabber.start();
        IplImage img = grabber.grab();
        if (img != null) {

            img1 = img.getBufferedImage();
            ImageIcon icon = new ImageIcon(img1);
            label = new JLabel(icon);
            //photo is the name of the JPanel
            photo.add(label);
            photo.setVisible(true);
            grabber.stop();
            System.out.println("done");

        }

    } catch (Exception e) {
        e.printStackTrace();
    } 
```

编辑：这是整个班级。（为了便于阅读，剪掉了）

```
package honoursproject;

    import com.googlecode.javacv.OpenCVFrameGrabber;
    import com.googlecode.javacv.cpp.opencv_core.IplImage;
    import java.awt.image.BufferedImage;
    import javax.swing.ImageIcon;
    import javax.swing.JFrame;
    import javax.swing.JLabel;
    import javax.swing.JPanel;

public class AddPerson extends javax.swing.JFrame {

/** Creates new form AddPerson */
public AddPerson() {
    initComponents();
}

@SuppressWarnings("unchecked")
// <editor-fold defaultstate="collapsed" desc="Generated Code">
private void initComponents() {

    jLabel1 = new javax.swing.JLabel();
    jSeparator1 = new javax.swing.JSeparator();
    jLabel2 = new javax.swing.JLabel();
    jLabel3 = new javax.swing.JLabel();
    nameField = new javax.swing.JTextField();
    surnameField = new javax.swing.JTextField();
    photo = new javax.swing.JPanel();
    captureButton = new javax.swing.JButton();
    saveButton = new javax.swing.JButton();
    cancelButton = new javax.swing.JButton();

    setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

    photo.setBorder(javax.swing.BorderFactory.createLineBorder(new java.awt.Color(0, 0,       0)));

    pack();
}// </editor-fold>

private void captureButtonActionPerformed(java.awt.event.ActionEvent evt) {                                              
    BufferedImage img1;
    JLabel label;
    final OpenCVFrameGrabber grabber = new OpenCVFrameGrabber(0);
    JFrame frame = new JFrame();
    try {
        grabber.start();
        IplImage img = grabber.grab();

        if (img != null) {

       img1 = img.getBufferedImage();
        ImageIcon icon = new ImageIcon(img1);
        label = new JLabel(icon);
        //photo is the name of the JPanel
        photo.add(label);
        photo.setVisible(true);
        grabber.stop();
        System.out.println("done");

            grabber.stop();
            System.out.println("done");
        }

    } catch (Exception e) {
        e.printStackTrace();
    }
}                                             

public static void main(String args[]) {
    java.awt.EventQueue.invokeLater(new Runnable() {

        public void run() {
            new AddPerson().setVisible(true);
        }
    });
}
// Variables declaration - do not modify
private javax.swing.JButton cancelButton;
private javax.swing.JButton captureButton;
private javax.swing.JLabel jLabel1;
private javax.swing.JLabel jLabel2;
private javax.swing.JLabel jLabel3;
private javax.swing.JSeparator jSeparator1;
private javax.swing.JTextField nameField;
private javax.swing.JPanel photo;
private javax.swing.JButton saveButton;
private javax.swing.JTextField surnameField;
// End of variables declaration 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T20:43:25.887

如果您要向您的容器中添加新组件，`photo` `JPanel`则需要更新和绘制容器：

```
photo.revalidate();
photo.repaint(); 
```

或者，`JLabel`也可以在启动时添加，允许您调用[setIcon](http://docs.oracle.com/javase/7/docs/api/javax/swing/JLabel.html#setIcon%28javax.swing.Icon%29)来更新图像。

**更新：**

您似乎没有将您的*添加*`JPanel` `photo`到您的`JFrame`任何地方：

```
add(photo); 
```

* * *

不要创建另一个`JFrame`来显示您的图像。将其添加到您`JPanel`使用的原始`JFrame`. 看到[这个帖子](https://stackoverflow.com/questions/9554636/the-use-of-multiple-jframes-good-bad-practice)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T21:03:55.050

我通过使用 JLabel 而不是 JFrame 或 JPanel 解决了它，它可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-20T15:48:23.193

你忘了打电话`setIcon`：

```
label.setIcon(icon); 
```

# r - 为重复的行分配唯一 ID

> ID：15302895
> 
> 赞同：4
> 
> 时间：2013-03-08T20:39:58.833
> 
> 标签：r, duplicates, dataframe

如果我有一个如下所示的数据框：

```
x y
13 a
14 b
15 c
15 c
14 b 
```

我希望每组相等的行都有一个唯一的 id，如下所示：

```
x y id
13 a 1
14 b 2
15 c 3
15 c 3
14 b 2 
```

有什么简单的方法可以做到这一点吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T21:27:34.963

我对这种方法有点担心`paste0`。如果您的列包含更复杂的数据，您最终可能会得到令人惊讶的结果，例如想象：

```
 x  y
ab  c
 a bc 
```

一种解决方案是替换`paste0(...)`为`paste(..., sep = "@")`. 即便如此，你也无法想出一个`sep`足够通用的方法来处理任何类型的数据，因为某种数据中总是存在非零概率`sep`。

更稳健的方法是使用拆分/转换/组合方法。你当然可以用这个`base`包来做，但`plyr`会更容易一些：

```
library(plyr)
.idx <- 0L
ddply(df, colnames(df), transform, id = (.idx <<- .idx + 1L)) 
```

如果这太慢了，我会推荐一种`data.table`方法，如下所示：[data.table "key indices" or "group counter"](https://stackoverflow.com/questions/13018696/data-table-key-indices-or-group-counter)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T20:53:26.693

这是我首先想到的：

创建一个新变量，通过将它们的值粘贴到字符串来组合两列：

```
a<-paste0(z$x,z$y) #z is your data.frame 
```

将其作为一个因素并将其结合到您的数据框：

```
cbind(z,id=factor(a,labels=1:length(unique(a)))) 
```

编辑：@flodel 担心使用`paste0`，最好使用普通`paste`或交互：

```
a<-interaction(z,drop=TRUE)
cbind(z,id=factor(a,labels=1:length(unique(a)))) 
```

这是假设您要分开`x=ab`,`y=c`和`x=a`, `y=bc`。如果没有，则使用`paste0`.

# perl - 未来日期减去现在 = 天数 perl

> ID：15302898
> 
> 赞同：1
> 
> 时间：2013-03-08T20:40:06.210
> 
> 标签：perl, datetime

新手来了 抱歉，提前致谢。我有一个未来的约会

```
(ie:2013-06-09 / $fields[12]) 
```

我今天需要减去

```
(ie:2013-03-08) 
```

获取剩余天数。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T21:09:37.377

我会使用[DateTime](http://search.cpan.org/perldoc?DateTime)。如果您从日期作为字符串开始，您可以使用[DateTime::Format::Strptime](http://search.cpan.org/perldoc?DateTime%3a%3aFormat%3a%3aStrptime)来解析它。

```
use DateTime                   qw( );
use DateTime::Format::Strptime qw( );

my $format = DateTime::Format::Strptime->new(
    pattern   => '%Y-%m-%d',
    time_zone => 'local',
    on_error  => 'croak',
);

my $ref  = DateTime->today( time_zone => 'local' );
my $dt   = $format->parse_datetime('2013-06-09');
my $days = $ref->delta_days($dt)->in_units('days');

print(
   $dt < $ref ? "$days days ago\n" :
   $dt > $ref ? "$days days from now\n" :
   "today\n"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T21:08:23.900

使用[日期时间模块](http://search.cpan.org/perldoc?DateTime)：

```
use DateTime;

my $d1 = DateTime->new(
      year       => 2013,
      month      => 9,
      day        => 6
);

my $d2 = DateTime->now;
my $diff = $d2->delta_days($d1);

print $diff->delta_days, "\n";  # 182 (from 8/3/2013) 
```

# rest - REST 服务调用的 CAS 身份验证

> ID：15302901
> 
> 赞同：1
> 
> 时间：2013-03-08T20:40:25.557
> 
> 标签：rest, jruby, cas

在我们当前的设置中，我们有大约十几个 Web 应用程序部署到单个 Tomcat 服务器。这些应用程序之一是用于所有授权的 CAS。

这工作得很好，在我们的 jRuby Web 应用程序中，我们使用 ruby​​cas-client gem，指向 CAS，我们就完成了。

现在我们有一个需求，在 Java 组件中，我们需要能够通过驻留在同一服务器上的 rest 服务调用另一个 Web 应用程序。我的第一个想法是使用 CAS 代理票证，但我们目前必须访问的 Web 应用程序没有启用此功能，并且由于环境的性质，这无法更改。

因此，据我所知，我们试图通过在我们的 Web 应用程序中使用 iframe 来模拟用户，该 iframe 指向另一个（我们都在同一个域和服务器上）并抓取其 sessionid 以进行模拟并通过它一直到 Java 层。但我真的，真的不想这样做。

我错过了什么吗？有没有更好的方法来做到这一点？有没有办法在没有 iframe 的情况下获取 sessionid？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T09:08:16.093

如果您想使用 CAS 身份从 Web 应用程序调用 Web 服务，您当然应该使用 CAS 代理功能。如果您不能对您的 Web 服务进行 cassify，那么您还有另一个选择：您可以将 Apache 模块用于 CAS：[https](https://wiki.jasig.org/display/CASC/mod_auth_cas) ://wiki.jasig.org/display/CASC/mod_auth_cas 。

# django - 具有计算属性的 NDB 查询返回一个空白列表

> ID：15302906
> 
> 赞同：0
> 
> 时间：2013-03-08T20:40:49.557
> 
> 标签：django, google-app-engine

我正在尝试使用计算属性查询 ndb 模型，但它返回一个空列表。[这个答案](https://stackoverflow.com/a/8895986/986415)表明我应该能够查询计算属性，[文档](https://developers.google.com/appengine/docs/python/ndb/queries#intro)也是如此。我究竟做错了什么？

```
from django.template import defaultfilters
class Video(models.SfxModel):

  title = ndb.StringProperty()
  slug = ndb.ComputedProperty(
    lambda self: str(defaultfilters.slugify(self.title)) ) 
```

在交互式控制台中

```
from app.lib.videos import Video

slug = Video.query().get().slug
print slug
# => "some-dasherized-string"
print Video.query(Video.slug == slug).fetch()
# => [] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T21:02:18.947

您遇到的“问题”是为非[祖先查询提供的](https://developers.google.com/appengine/docs/python/datastore/queries#Ancestor_Queries)[最终一致性](https://developers.google.com/appengine/docs/python/datastore/queries#Data_Consistency)。 您所看到的对于高复制数据存储来说是完全正常的。当您放置一个实体并在它之后立即查询它时，可能是它没有复制到所有数据中心，因此无法找到它。

如果你想让它工作，你必须通过将父级添加到实体来使用实体组。这可以是实体键或不属于任何存储实体的构造键。

这有效：

```
class Video(ndb.Model):
    title = ndb.StringProperty()
    slug  = ndb.ComputedProperty(lambda self: self.title.replace(' ', '-'))

v = Video(parent = ndb.Key(Video, 'xxx'), title = 'foo bar') 
v.put()

print Video.query(Video.slug == v.slug, ancestor = ndb.Key(Video, 'xxx')).get() 
```

# grails - Grails 执行器插件 callAsync 块总是采用相同的值

> ID：15302909
> 
> 赞同：2
> 
> 时间：2013-03-08T20:40:55.853
> 
> 标签：grails, threadpool, java.util.concurrent, executor

我正在尝试在 grails 中使用 executor 插件，但我遇到了一个我无法解决的问题。基本上，我有一个我想要抓取的链接列表，我遇到了一个问题，它总是抓取相同的链接，所以我将我的示例简化为：

```
 List offerLinks = getOfferLinks(parser)
    offerLinks.each{println it}

    List futures = new Vector()
    for (def link : offerLinks) {
        def future = callAsync {
            return link
        }
        futures.add(future)
    }

    futures.each{println "FUTURE " +  it.get()} 
```

这是在控制台中打印的内容

bt-ofrd-acciona-6633344.htm？
bt-ofrd-celiasiffredi-293068.htm？
bt-ofrd-clahubiz-92924.htm？
bt-ofrd-haruko-1672632.htm？
未来的 bt-ofrd-clahubiz-92924.htm？
未来的 bt-ofrd-haruko-1672632.htm？
未来的 bt-ofrd-haruko-1672632.htm？
未来的 bt-ofrd-haruko-1672632.htm？

前 4 个结果用于`offerLinks.each{println it}`代码
最后 4 个用于`futures.each{println "FUTURE " + it.get()}`

我试图找出的是为什么将这些链接放在 callAsync 块中并从未来对象中检索它们会使它们获取最后一个值，似乎它替换了已经创建的未来对象？

这段代码位于控制器调用的服务中。我很感激你能给我的任何帮助。谢谢

**更新**：
我认为 Java 执行程序 API 中存在某种问题......或者我不完全理解它是如何工作的？
这是另一个将代码更改为使用 invokeAll 的测试：

```
 def threadPool = Executors.newCachedThreadPool()

    List offerLinks = getOfferLinks(parser)
    List lista = new ArrayList()
    for (enlace in offerLinks) {
        println "link " + enlace
        lista.add({enlace} as Callable)
    }
    def futures = threadPool.invokeAll(lista)

    futures.each{println "FUTURE " +  it.get()} 
```

这是打印
链接/bt-ofrd-implementar-192996.htm 的内容吗？
链接/bt-ofrd-cdonini-864908.htm？
链接/bt-ofrd-hvtalent-1493932.htm？
链接/bt-ofrd-dbak-1358120.htm？
链接/bt-ofrd-hexacta-100072.htm？
链接/bt-ofrd-ccibelli-457472.htm？
未来 /bt-ofrd-ccibelli-457472.htm？
未来 /bt-ofrd-ccibelli-457472.htm？
未来 /bt-ofrd-ccibelli-457472.htm？
未来 /bt-ofrd-ccibelli-457472.htm？
未来 /bt-ofrd-ccibelli-457472.htm？
未来 /bt-ofrd-ccibelli-457472.htm？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T17:51:18.777

在我看来，在闭包外部定义但从内部引用的变量范围发生了一些奇怪的事情，它没有正确地“关闭”。如果你这样做会更好吗

```
def threadPool = Executors.newCachedThreadPool()

List offerLinks = getOfferLinks(parser)
List lista = new ArrayList()
for (enlace in offerLinks) {
    println "link " + enlace
    lista.add(({ it }.curry(enlace)) as Callable)
}
def futures = threadPool.invokeAll(lista)

futures.each{println "FUTURE " +  it.get()} 
```

这应该确保正确的东西被传递到闭包中，并且闭包本身不需要直接引用外部定义的`enlace`变量。

这本身并不能解释*为什么*您已经尝试过的方法不起作用，但它可能会给您一个解决方法。

* * *

编辑：我之前没有发现这一点，但我现在注意到你没有在那个循环中*声明* ，所以它不是一个局部变量，闭包（正确地）指的是单个共享变量而不是“关闭”特定循环迭代中的值。如果您使用这样的结构，它应该可以工作：`enlace``for`

```
def tasks = offerLinks.collect { link ->
  println "link " + enlace
  return ({ link } as Callable)
}
def futures = threadPool.invokeAll(tasks)
futures.each{println "FUTURE " +  it.get()} 
```

其中`link`变量是`collect`闭包的本地变量，因此`{...} as Callable`将关闭正确的值。相当于`callAsync`将使用

```
List futures = offerLinks.collect { link ->
  callAsync { link }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T06:34:20.110

听起来像我刚刚经历的同一个现象，请参阅[这个答案](http://grails.1312388.n4.nabble.com/Log4j-MDC-problem-with-runAsync-td4641782.html)。

对我来说，问题是“当前线程的 MDC 被新生成的线程继承”。我不知道为什么会这样，所以我不知道你为什么会遇到同样的问题——但可能是因为你从服务中检索了链接？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T20:52:19.637

这是否更好？

```
List offerLinks = getOfferLinks(parser)
offerLinks.each{println it}

List futures = new Vector()
for (def link : offerLinks) {
    futures.add( callAsync {
        return link
    } 
```

) }

```
futures.each{println "FUTURE " +  it.get()} 
```

# xcode - Cocos2d - 如何在不降低 fps 的情况下加载 740 个精灵

> ID：15302910
> 
> 赞同：0
> 
> 时间：2013-03-08T20:40:57.177
> 
> 标签：xcode, cocos2d-iphone

我需要在游戏开始时加载精灵矩阵（32x23），但它会将 FPS 降低到 15！我不知道该怎么做，我试着这样做：

```
 [[CCSpriteFrameCache sharedSpriteFrameCache] addSpriteFramesWithFile:@"tereni.plist"];
CCSpriteBatchNode *batch = [CCSpriteBatchNode batchNodeWithFile:@"tereni.png"];

for(int i = 0; i < 23; i++)
{
    for(int j=0; j<32; j++)
    {
        CCSprite *sprite = [CCSprite spriteWithSpriteFrameName:@"1.png"];
        sprite.position=ccp(j*32+32, i*32+32);
        [batch addChild:sprite];    
    }
}
[self addChild:batch]; 
```

但还是一样。1.png 是 32x32 像素的图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T21:56:45.153

您添加精灵的方法很好，但您的性能结果无效。

iOS Simulator 拥有比设备更快的 CPU、更多的 RAM，但渲染速度却非常慢。它无法与真实设备的性能相提并论。模拟器不使用硬件加速，它是一个软件渲染器。模拟器性能几乎无关紧要。

我使用的是具有更快 GPU 的四核 2012 iMac，即使使用那台机器，在相当复杂的场景（tilemap，4 层）中，我在 iPad Simulator 上也只能获得 30 fps。事实上，在这台机器和我之前的 2009 年末 iMac 之间，模拟器的性能似乎没有太大改善。

# java - 清除 ServletContext 的扩展 context=getServletContext();

> ID：15302914
> 
> 赞同：1
> 
> 时间：2013-03-08T20:41:10.237
> 
> 标签：java, servlets

```
ServletContext context=getServletContext(); 
```

这里 ServletContext 是接口。

Context 是 ServletContext 的类型

`getServletContext`是`ServletContext`接口中的一个方法，返回有关 Servlet 的信息。

我的问题是我们正在为接口创建一个上下文对象。我们如何为接口创建一个对象？

如果不是，我们正在为 ServletContect 创建对象我们到底在做什么 ServletContext 和 getServletContext() 之间的映射是什么？

请先一步一步解释谢谢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T14:40:18.570

`getServletContext`不是[ServletContext](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContext.html)接口的方法。它是[GenericServlet](http://docs.oracle.com/javaee/6/api/javax/servlet/GenericServlet.html)正在实现的[ServletConfig](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletConfig.html)接口的方法，因此它在扩展[GenericServlet的](http://docs.oracle.com/javaee/6/api/javax/servlet/GenericServlet.html)[HttpServlet](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServlet.html)中可用。[ServletContext](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContext.html)可能由 Web 服务器实现，它们可能在[GenericServlet](http://docs.oracle.com/javaee/6/api/javax/servlet/GenericServlet.html)中返回该类的对象。

希望这个解释有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T11:54:02.763

您的问题是`How can we create an object for interface?`
`Answer is :`我们无法创建接口对象（任何接口），但我们可以分配接口实现类对象的引用（这是有效的，并在 OOP 中提供多态性和继承）
我建议阅读**Head First Core Java**以更好地理解所有这些东西。
我们不能**`new`**在接口之后调用关键字并以分号 Ex 结尾。

```
ServletContext context = new ServletContext(); //invalid. cannot end with semicolon 
```

但是经过几次阅读后，您会发现类似的构造/语法

```
ServletContext context = new ServletContext() {    // see semicolon absent after ()

// and all methods here with some definition

}; 
```

这是实现 ServletContext 接口的匿名类。

如果你看到像这样的构造

```
Thread t = new Thread() {  //semicolon is absent after () bracket

}; 
```

表示它是扩展类 Thread 的匿名类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-21T07:41:22.003

我认为您的问题是如何从界面创建对象。

答案是不能。

但是我们可以使用接口名称，然后我们可以将接口的引用分配给类对象。

（这意味着我们可以创建匿名类（在对象内部））。

有关更多详细信息，请阅读 javatpoint 接口课程。

# javascript - 这个javascript代码如何/为什么打印“有趣”？

> ID：15302915
> 
> 赞同：7
> 
> 时间：2013-03-08T20:41:13.413
> 
> 标签：javascript

```
alert(
    (![]+[])[[]-[]]+
    (([]+[])+([][[]]))[[]-[]]+
    (([]+[])+([][[]]))[!![]-[]]
); 
```

这是小提琴：http: [//jsfiddle.net/leeny/6VugZ/](http://jsfiddle.net/leeny/6VugZ/)

这段神秘的代码究竟是如何工作的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-08T20:45:32.140

```
 vvvvvvv [0]
(![]+[])[[]-[]]                            = "false"[0]
^^^^^^^^ "false"

                  vvvvvvv again [0]
(([]+[])+([][[]]))[[]-[]]                  = "undefined"[0]
^^^^^^^^^^^^^^^^^^ "undefined"

                  vvvvvvvvv this time [1]
(([]+[])+([][[]]))[!![]-[]]                = "undefined"[1]
^^^^^^^^^^^^^^^^^^ again "undefined" 
```

这样你就得到了`"f"+"u"+"n" === "fun"`。

## 进一步说明

### `"false"`

`![]`是`false`。`+[]`只是充当字符串的转换。这样我们就得到了字符串`"false"`。

### `"undefined"`

其中一个操作数必须是字符串。这是由`[]+[]`. 实际`undefined`在右侧创建：`[][[]]`=== `[][0]`，空数组的第一个条目是`undefined`.

# web-services - 取消 Windows Phone 中的异步 Web 服务调用

> ID：15302916
> 
> 赞同：0
> 
> 时间：2013-03-08T20:41:17.880
> 
> 标签：web-services, silverlight, asynchronous, windows-phone

我正在开发一个使用 .Net Web 服务的 Windows Phone 应用程序（也由我开发）。当我调用 Web 服务方法时，它会异步执行并且不会阻塞 UI。例如，这是一个代码示例，用于向服务器询问航班到达列表。

```
service.MobileWSSoapClient Proxy { get; set; }
Proxy = new service.MobileWSSoapClient();
Proxy.GetArrivalsCompleted += proxy_GetArrivalsCompleted;
Proxy.GetArrivalsAsync(searchFilter); 
```

这样，我可以让用户自由地再次调用相同的方法或另一个方法（例如：刷新到达列表或搜索特定的到达）。如果用户生成对服务的新调用，应用程序应“取消”第一次调用并仅显示最后一次调用的结果。我认为取消已经到达服务器的 Web 服务调用在技术上是不可能的，我们应该等待服务器响应然后忽略它。知道这一点，以某种方式将该调用标记为过时会很有帮助。接收错误作为对该过时调用的响应就足够了。我会写一个我想象/需要的伪代码。

```
void proxy_GetArrivalsCompleted(object sender, service.GetArrivalsCompletedEventArgs e){

   if (e.Error == null){ 
       // DO WORK
   }
   else 
   {
      if(e.Error == Server Exception || e.Error == Connection Exception){
         MessageBox.Show("error");
      }
      else if (e.Error == obsolete call){
        // DO NOTHING
      }
   } 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T12:27:55.467

您可以将[BackgroundWorker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)用于您的场景。因此，当用户再次调用 Web 服务时，您可以取消将结束服务调用的后台工作进程。

如何在[此处](http://msdn.microsoft.com/en-us/library/cc221403%28v=vs.95%29.aspx)使用 BackgroundWorker 。

# zend-framework - 如何在 Zend Framework 中的另一个单选元素中添加单选元素？

> ID：15302917
> 
> 赞同：0
> 
> 时间：2013-03-08T20:41:18.443
> 
> 标签：zend-framework, radio-button, zend-form

我正在尝试编写一个包含多个无线电选择的表单，如下所示。

*   收音机 1 选项 1

    *   收音机 2 选项 1

    *   收音机 2 选项 2

*   收音机 1 选项 2

    *   收音机 3 选项 1

    *   收音机 3 选项 2

我正在考虑创建一个自定义 Radio 类来重新定义整个结构。但不确定如何编写装饰器。

非常感谢任何有关如何编写这种表格的有用提示。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T14:54:21.870

感谢 Pavel 在[http://paveldubinin.com/2011/04/zend-form-radio-buttons/](http://paveldubinin.com/2011/04/zend-form-radio-buttons/)上的帖子，我通过将 Radio 1 作为 StandaloneRadio 元素并将 Radio 2 和 Radio 3 放在电台 1。

# python - 如何在 Python 中替换多维列表的第 n 个元素？

> ID：15302919
> 
> 赞同：4
> 
> 时间：2013-03-08T20:41:42.060
> 
> 标签：python, list

我有一个这样的列表：

```
a = [['0', '0'], ['0', '0'], ['0', '0']] 
```

我正在尝试编写一个以第 n 个列表元素为参数并将 0 替换为“X”的函数。例如：函数`replace([1, 2])`会做：

```
 a = [['0', 'X'], ['X', '0'], ['0', '0']] 
```

换句话说，替换函数应该将 a 视为一个连续列表。

由于每个列表都是一个元素，我认为这是不可能的。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T21:05:57.430

```
import math
def replace(a, t):
    for i in t:
        a[int(math.floor(i/2))][i % 2] = "X"

    return a

replace([['0', '0'], ['0', '0'], ['0', '0']], [1,2])
>> [['0', 'X'], ['X', '0'], ['0', '0']] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T20:47:08.553

您的`replace()`功能没有意义，但是在您想要的任何列表中替换任何您想要的东西肯定是可能的而且确实很简单。

```
>>> a = [['0', '0'], ['0', '0'], ['0', '0']]
>>> a[0][1] = '1'
>>> a[1][0] = '2'
>>> a
[['0', '1'], ['2', '0'], ['0', '0']]
>>> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T20:59:25.983

鉴于：

```
a = [['0', '0'], ['0', '0'], ['0', '0']] 
```

您可以展平列表：

```
>>> [e for sub in a for e in sub]
['0', '0', '0', '0', '0', '0'] 
```

然后元素线性映射：

```
>>> fl=[e for sub in a for e in sub]
>>> fl[1]=1
>>> fl[2]=2
>>> fl
['0', 1, 2, '0', '0', '0'] 
```

如果您展平列表，则可以使用切片分配：

```
>>> fl[1:2]='XX'
>>> fl
['0', 'X', 'X', '0', '0', '0', '0', '0', '0', '0', '0'] 
```

如果您愿意，然后重新组合子组：

```
>>> [list(e) for e in zip(*[fl[i::2] for i in range(2)])]
[['0', 'X'], ['X', '0'], ['0', '0']] 
```

您还可以转换为多维下标：

```
li=[[1,2,3],[4,5],[6],[7,8,9,10]]

def xlate(li,wanted):
    idx=0
    for i,e in enumerate(li):
        for j,e_ in enumerate(e):
            if idx==wanted: return (i,j)
            idx+=1

    return (None,None)        

t=xlate(li,5)
li[t[0]][t[1]]='X' 
```

印刷：

```
[[1, 2, 3], [4, 5], ['X'], [7, 8, 9, 10]] 
```

# css - 选择所有直接后代 dom 元素，无论类型如何

> ID：15302922
> 
> 赞同：47
> 
> 时间：2013-03-08T20:41:56.717
> 
> 标签：css, css-selectors

我正在尝试将 CSS 应用于父容器元素的任何直接子元素。如何使用 CSS 的后代`<`选择器来选择任何直接子级，而不管类型如何（div / span / 等）。

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2013-03-08T20:43:08.050

我假设您的意思是子选择器。是`>`，不是`<`。

```
.parent > * 
```

这将选择任何元素。您当然可以使用任何其他选择器作为子选择器（元素、类、id 等）

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2021-06-21T11:50:22.400

如果您在 SCSS 中，那么

```
.parent {
  & > * {

  }
} 
```

# r - 将毫秒转换为 R 中的时间

> ID：15302925
> 
> 赞同：2
> 
> 时间：2013-03-08T20:42:06.993
> 
> 标签：r

我有一组时间（以毫秒为单位），我想转换为 mm:ss （与类似的集合进行比较）。例如我有

```
 x<-c(119254, 246973, 267492) 
```

我可以用算术算出分钟数

```
 > x/1000/60
 [1] 1.987567 4.116217 4.458200 
```

不确定如何获得 %M:%S 格式，或者是否有适当的方法来获取毫秒并在没有算术的情况下进行转换。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-08T20:47:42.860

只需将秒数添加到 DateTime 对象，即可`format.POSIXct`处理显示计算。您不需要除以 60，因为 POSIXct 时间以秒为单位：

```
> as.POSIXct(Sys.Date())+x/1000
#[1] "2013-03-07 16:01:59 PST" "2013-03-07 16:04:06 PST" "2013-03-07 16:04:27 PST"

> format( as.POSIXct(Sys.Date())+x/1000, "%M:%S")
#[1] "01:59" "04:06" "04:27" 
```

# javascript - 找不到变量 - PhantomJS

> ID：15302928
> 
> 赞同：12
> 
> 时间：2013-03-08T20:42:12.333
> 
> 标签：javascript, phantomjs

经过数小时徒劳的搜索后，我在这里发帖。PhantomJS 不允许我使用下面代码中的变量，运行脚本时出现错误消息“找不到变量”。

你知道我的问题在哪里吗？

```
page.open(myurl, function (status) {

    if (status == 'success') {

        page.includeJs("http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js", function() {

            elem = page.evaluate(function () {

                /* Select one element with jQuery */
                myElem = $('body');
                return myElem;

            })

            var elemHtml   = page.evaluate(function() { return $(elem).html(); });
            console.log(elemHtml);

        })

        phantom.exit();     

    }  

}) 
```

谢谢 =)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-09T04:39:59.563

[快速入门](http://phantomjs.org/quick-start.html)教程（在其**代码评估**部分）中有一条重要信息：

> 要在网页上下文中评估 JavaScript 或 CoffeeScript 代码，请使用 evaluate() 函数。执行是“沙盒”的，代码无法访问其自身页面上下文之外的任何 JavaScript 对象和变量。一个对象可以从评估（）返回，但它仅限于简单的对象，不能包含函数或闭包。

因此，您的代码存在双重问题：

1.  变量`elem`在网页上下文之外初始化，它不能从第二个`evaluate`.
2.  您返回一个非简单对象，即一个 DOM 元素。

这是一个容易解决的问题，主要是通过适当地设计代码以适应实际的“监禁”执行模型。请仔细阅读所有相关文档并探索大量[包含的示例](https://github.com/ariya/phantomjs/tree/master/examples)。

# asp.net-web-api - ASP.NET Web API 操作 - 每个控制器只有一个 GET？

> ID：15302939
> 
> 赞同：3
> 
> 时间：2013-03-08T20:43:01.340
> 
> 标签：asp.net-web-api

我是 ASP.NET Web API 的新手，但我遇到了一个问题，如果我尝试将两个 get 方法添加到单个控制器，则无法尝试获取操作。除非我们添加相同方法的重载，否则我们是否允许每个控制器只获取一次？

如果我只有一个 get 方法，例如第一个方法，则此方法有效。一旦我将 Get 添加到第二个方法名称，它就会给我一个 500。

```
[HttpGet]
public string GetToday()
{
    return "Hello today";
}

[HttpGet]
public string GetPending()
{
    return "Hello Pending";
} 
```

我正在拨打的电话：http: [//abc.com/api/tasks/gettoday](http://abc.com/api/tasks/getpending) [http://abc.com/api/tasks/getpending](http://abc.com/api/tasks/gettoday)

如果方法名称只是“今天”，我可以进行此调用，只要我输入 [HttpGet] 属性即可。但前提是我没有第二个动作。这意味着如果我从第二种方法中删除 [HttpGet] 属性，并从方法名称中删除“Get”，使其只是待处理，那么它就可以工作。

只要有两种获取方法，我就会收到此错误：

{"Message":"发生错误。","ExceptionMessage":"找到与请求匹配的多个操作：\r\nSystem.String TodaysTasks() on type TaskTrackerService.Controllers.TasksController\r\nSystem.String PendingTasks () 类型 TaskTrackerService.Controllers.TasksController","ExceptionType":"System.InvalidOperationException","StackTrace":" 在 System.Web.Http.Controllers.ApiControllerActionSelector.ActionSelectorCacheItem.SelectAction(HttpControllerContext controllerContext)\r\n 在 System .Web.Http.Controllers.ApiControllerActionSelector.SelectAction(HttpControllerContext controllerContext)\r\n 在 System.Web.Http.ApiController.ExecuteAsync(HttpControllerContext controllerContext, CancellationToken cancelToken)\r\n 在 System.Web.Http.Dispatcher。HttpControllerDispatcher.SendAsyncInternal(HttpRequestMessage request, CancellationToken cancelToken)\r\n 在 System.Web.Http.Dispatcher.HttpControllerDispatcher.SendAsync(HttpRequestMessage request, CancellationToken cancelToken)"}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-07-23T13:59:35.923

Web API 背后的想法是它代表了一个[ReSTful 资源](http://en.wikipedia.org/wiki/Representational_state_transfer)。ReST 的语义意味着控制器对应于“[资源](http://restful-api-design.readthedocs.org/en/latest/resources.html)”的概念，并且该行为由用于访问资源的 HTTP 动词决定——意味着 GET、POST、PUT、DELETE ......</p>

用于这些资源的模型是您对它们有点“ [CRUD](http://en.wikipedia.org/wiki/CRUD) -y”；您查询资源的元素，将新元素放入资源中，更新资源中的元素 - 你明白了。

对于每个（相关）动词，您应该只有一个处理该性质请求的操作。通过 GET 访问多个操作的想法不是很 ReSTful，更像是一种 MVC-ish RPC 风格的思维模式，不适合 ASP.NET Web API。

因此，您的控制器可能改为：

```
public class FooController : ApiControlle
{
    [HttpGet]
    public Account Get(string flavour)
    {
        switch (flavour) {
            case "greeting": return "Hello today";
            case "pending": return "Hello Pending";
            default: throw new InvalidOperationException("Cannot get your flavour of foo :(");
        }
    }
} 
```

但正如您在评论中所写，问题在于您从未打算将控制器用作 Web API 控制器，而是 MVC 控制器。

# charts - 时间线图的具体案例

> ID：15302945
> 
> 赞同：1
> 
> 时间：2013-03-08T20:43:15.193
> 
> 标签：charts, highcharts, google-visualization, bar-chart

我正在尝试创建一个时间线图表，它应该像水平条形图一样表示，其中水平条形可能没有相同的起点。所以它可能看起来像这样：

```
 ----------
                                            -------------------- 
```

## ---------

```
 ----------------------------------------------------------------- 
```

## ----------------------

```
 --------------------- 
```

有没有人对我可以使用什么有任何建议。

我已经研究过 HighCharts 和 Google Chart，但没有运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T17:02:29.670

您需要的是甘特图。根据您使用的软件或您需要的介质，有多种选择。Microsoft Project 是专门为它设计的。如果您将其编码到程序中，您将需要一个第三方应用程序（例如[Dundas](http://www.dundas.com/dashboard/features/dvcontrols/chart/)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T11:32:11.907

请看甘特图演示图

[http://highcharts.uservoice.com/forums/55896-general/suggestions/804783-gantt-chart](http://highcharts.uservoice.com/forums/55896-general/suggestions/804783-gantt-chart)

# javascript - 使用 .load 传递 $_GET 变量并加载特定的页面片段

> ID：15302952
> 
> 赞同：1
> 
> 时间：2013-03-08T20:43:32.260
> 
> 标签：javascript, get, load, fragment

我试图把两件事放在一起：

```
$('#result').load('liste_result #mainDiv'); 
```

和

```
$('#result').load("liste_result?q=" + $("#categorie").val()); 
```

这两个工作，分开。但我现在正试图把它们放在一起，所以传递一个变量并只加载一个特定的 div。但我似乎无法让它工作，这是我的代码：

```
$('#result').load("liste_result?q=" + $("#categorie").val()"#mainDiv"); 
```

我应该如何让它发挥作用？

非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T20:46:37.417

这可能是你想要的：

```
$('#result').load("liste_result?q=" + $("#categorie").val() + " #mainDiv"); 
```

但我对 $.load() 不太熟悉。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T20:46:59.073

不知道您要完成什么，但它可能应该是这样的：

```
$('#result').load("liste_result?q=" + $("#categorie").val() + $("#mainDiv").val()); 
```

但是您应该知道您的查询`q`中可能有空格，我不明白您为什么要将 html 发送到服务器。

**更新：** 要回答您关于外部链接的评论，如果您不是从同一个域查询，则不确定是否可以这样做，语法应该是这样的：

```
$('#result').load("liste_result?q=" + $("#categorie").val() + " #mainDiv"); 
```

# mongodb - 如何在不更改_id的情况下将对象从一个集合移动到另一个集合

> ID：15302956
> 
> 赞同：1
> 
> 时间：2013-03-08T20:43:41.400
> 
> 标签：mongodb, mongoose

我有一个我想保持较小的队列机制，所以所有排队的对象在完成处理后都被移动到另一个称为历史的集合中，在那里它们不再更新，仅用于参考和信息。

是否可以从一个集合中获取一个对象，将其删除并将其插入另一个集合而不更改 _id ？

我现在通过在模式中创建第二个 id 来解决这个问题，并将其转移到新对象，但我宁愿继续引用 _id。

此外，如果您认为我忽略了某些东西并且不需要第二次收集来保持我的排队机制快速，我很想听听。

这是我目前的做法（使用步骤和下划线）

`

```
 // moving data to a new process in the history collection
            var data = _.omit(process.toObject(), '_id');
            console.log("new history data", data);
            var history = new db.History(data);
            history.save(this.parallel());
            db.Queue.remove({_id : process._id }, this.parallel()); 
```

`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T05:05:02.530

您可以将文档从一个集合复制/移动到另一个集合，而无需更改它`_id`。如果您创建一个已有的新文档，`_id`那么 Mongoose/Mongo 将使用它。并且`_id`值只需要在单个集合中是唯一的，而不是在集合之间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-06T14:32:15.297

我尝试使用 delete `delete object._id;` 来删除该属性并允许 mongodb 自己分配一个，但由于某种原因 delete 不起作用。

这对我有用：

```
obj['_id'] = undefined; 
```

如果您不打算使用，`_id`那么这将解决您的问题。

# javascript - 使用 JavaScript 获取 URL 的源代码

> ID：15302957
> 
> 赞同：0
> 
> 时间：2013-03-08T20:43:46.300
> 
> 标签：javascript

我正在尝试使用 Javascript 获取页面的源代码（比如说 google.com）。我尝试的代码如下，但问题仍然存在，即我正在访问不同的域。我要做的是检查页面的源代码，检查该源代码中的特定值并根据该信息进行行为。谢谢！

> $.get(url, function(data){ something(data); }//end function(data) );//end get

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T20:44:56.410

如果页面来自另一个域并且没有明确允许它带有[CORS headers](https://developer.mozilla.org/en-US/docs/HTTP/Access_control_CORS) ，则您不能这样做。请参阅[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)。

唯一的“解决方法”是使用服务器，为您获取源或充当代理。

# azure - Windows Azure平台上的云环境

> ID：15302960
> 
> 赞同：0
> 
> 时间：2013-03-08T20:43:50.230
> 
> 标签：azure, cloud

我的帐户上有 6 个网站、2 个数据库和 1 个云环境设置

我使用云通过 Windows 任务管理器运行一些任务，一切都安装在我的 D 驱动器上，但在上周和今天 3 月 8 日之间，我的文件夹中包含要运行的“exe”被删除。我还安装了 SVN tortoise 来部署文件，但它不再安装了

我想知道是否有人知道我的问题

此致

法兰克梅林

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T21:00:42.777

如果您使用云服务（网络/工作者角色），这些是*无状态*虚拟机。即：Windows Azure 提供操作系统，然后在启动后将您的部署包带入环境。以这种方式启动的每个虚拟机实例都从一个干净的 OS 映像以及您提供的完全相同的代码位集开始。

如果您将 RDP 放入盒子并手动安装任何东西，那么您安装的任何东西充其量只是暂时的。您的东西可能会在重新启动后幸存下来。但是，如果操作系统需要更新（尤其是底层主机操作系统），您的更改将随着新操作系统的启动而丢失。

这就是为什么对于云服务，所有自定义都应该通过启动任务或 OnStart() 事件来完成。您*永远不*应该通过 RDP 手动安装任何东西，因为：

*   您的更改将是暂时的
*   您的更改不会传播到其他实例；您将需要 RDP 进入每个盒子以执行相同的更改。

您可能需要下载[Azure 培训工具包](http://www.microsoft.com/en-us/download/details.aspx?id=8396)并浏览一些云服务实验室，以更好地了解启动任务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T22:10:23.410

除了大卫所说的，请查看[http://blogs.msdn.com/b/kwill/archive/2012/10/05/windows-azure-disk-partition-preservation.aspx](http://blogs.msdn.com/b/kwill/archive/2012/10/05/windows-azure-disk-partition-preservation.aspx)了解不同驱动器将被摧毁。

另请查看[http://blogs.msdn.com/b/kwill/archive/2012/09/19/role-instance-restarts-due-to-os-upgrades.aspx](http://blogs.msdn.com/b/kwill/archive/2012/09/19/role-instance-restarts-due-to-os-upgrades.aspx)，它指向 RSS 提要和在 MSDN 文章中，您可以看到当前正在部署一个新的操作系统。

# layout - JavaFX VBox 和 HBox 布局

> ID：15302961
> 
> 赞同：4
> 
> 时间：2013-03-08T20:43:50.873
> 
> 标签：layout, javafx-2

我正在开发一个`JavaFX`应用程序，该应用程序具有从外部数据结构生成的布局，由

*   显示知道自己纵横比的组件（高度取决于宽度）
*   2 种结构组件
    *   在页面上以相等的宽度显示所有子级，每个子级都根据需要向上垂直空间
    *   使用全宽显示页面下方的所有子项，并根据需要占用尽可能多的垂直空间

但我发现事情并没有像我预期的那样显示。我做了一个简化的案例来演示这个问题。

代码在下面，问题是它`v3`没有显示出来，我一生都无法弄清楚为什么。我想我不理解`VBox`es 和es的某些方面。`HBox`

我真的很感激任何帮助或想法。提前致谢！

```
import javafx.application.Application;
import javafx.scene.Scene;
import javafx.scene.layout.HBox;
import javafx.scene.layout.Priority;
import javafx.scene.layout.Region;
import javafx.scene.layout.VBox;
import javafx.scene.paint.Color;
import javafx.scene.shape.Rectangle;
import javafx.stage.Stage;

import java.util.Random;

public class Test extends Application {

    static Random rand = new Random();

    public static void main(String args[]) {
        Application.launch("something");
    }

    @Override
    public void start(Stage mainStage) throws Exception {
        testVBoxes(mainStage);
    }

    private void testVBoxes(Stage mainStage) {
        VBox root = new VBox();
        Scene one = new Scene(root, 800, 600, Color.WHITE);

        FixedAspectRatioH h1 = new FixedAspectRatioH();
        FixedAspectRatioH h2 = new FixedAspectRatioH();
        FixedAspectRatioH h3 = new FixedAspectRatioH();
        FixedAspectRatioV v1 = new FixedAspectRatioV();
        FixedAspectRatioV v2 = new FixedAspectRatioV();
        FixedAspectRatioV v3 = new FixedAspectRatioV();

        h1.prefWidthProperty().bind(root.widthProperty());

        h2.add(v2);

        v1.add(h3);
        v1.add(h2);

        h1.add(v1);
        h1.add(v3);

        root.getChildren().add(h1);

        mainStage.setScene(one);
        mainStage.show();
    }

    private class FixedAspectRatioV extends VBox {
        public FixedAspectRatioV() {
            Rectangle r = new Rectangle();
            r.setFill(Color.rgb(rand.nextInt(256), rand.nextInt(256),     rand.nextInt(256)));
            r.widthProperty().bind(widthProperty());
            r.heightProperty().bind(r.widthProperty().divide(3));
            getChildren().add(r);
        }

        public void add(Region n) {
            n.prefWidthProperty().bind(widthProperty());
            getChildren().add(n);
        }
    }

    private class FixedAspectRatioH extends HBox {
        public FixedAspectRatioH() {
            Rectangle r = new Rectangle();
            r.setFill(Color.rgb(rand.nextInt(256), rand.nextInt(256),     rand.nextInt(256)));
            r.widthProperty().bind(widthProperty().divide(4));
            r.heightProperty().bind(r.widthProperty());
            getChildren().add(r);
        }

        public void add(Region n) {
            HBox.setHgrow(n, Priority.ALWAYS);
            getChildren().add(n);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-07T11:11:22.127

它的 2 年，但解决方案是你忘记了

```
Node.setPrefSize(width,height); 
```

并将其添加到您的构造函数中`Hbox.setFillHeight(true);`

# windows - 滚动条显示在 Windows 上

> ID：15302968
> 
> 赞同：1
> 
> 时间：2013-03-08T20:44:04.523
> 
> 标签：windows, scrollbar, hidden, tidesdk

我在 Windows 8 上遇到了 TideSDK 问题。

我的 tiapp.xml 中有：

```
<chrome scrollbar="false">true</chrome> 
```

但即使这样，滚动条也会出现，为什么？

我可以使用 jQuery 或 CSS 隐藏它们

```
overflow: hidden; 
```

但在那之后我不能再滚动了。

你能帮我吗？

对不起我的英语不好，我是法国人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T17:34:01.333

如果您正在处理移动设备，这个 6 岁的答案不再有效......

--- OG 回答 ---

使用可滚动窗格上的 :hover 选择器...

```
.scrollpane {
    overflow:hidden;
}
.scrollpane:hover {
    overflow-y:scroll;
} 
```

# emacs - Emacs 自动保存：为什么文件没有存储在正确的文件夹中？

> ID：15302973
> 
> 赞同：2
> 
> 时间：2013-03-08T20:44:29.093
> 
> 标签：emacs, autosave

我查看了各个地方，最后在 Emacs 中为“自动保存”模式提出了以下设置：

```
(defvar my-auto-save-folder (concat "~/.emacs.d/auto-save")); folder for auto-saves
(setq auto-save-list-file-prefix "~/.emacs.d/auto-save/.saves-"); set prefix for auto-saves 
(setq auto-save-file-name-transforms `((".*", my-auto-save-folder t))); location for all auto-save files
(setq tramp-auto-save-directory my-auto-save-folder); auto-save tramp files in local directory 
```

在设置了几个星期后，我访问了 ~/.emacs.d 并发现文件夹 ~/.emacs.d/auto-save 是空的，而 ~/.emacs.d 包含两个表单的自动保存文件`#!home!<myusername>!<myfolder>!<myfile>`. 为什么自动保存文件没有存储在 ~/.emacs.d/auto-save 中？[该文件夹`auto-save`的权限为 775、700 `.emacs.d`]

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-09T07:57:39.120

您的错误在于：

```
(defvar my-auto-save-folder (concat "~/.emacs.d/auto-save")); folder for auto-saves 
```

`concat`（顺便说一句，使用单个参数调用 to是毫无意义的）。

> 如果可选元素 UNIQUIFY 为非 nil，则自动保存文件名通过将**替换的文件名的目录部分**与缓冲区文件名连接起来，所有目录分隔符都更改为“！” 以防止冲突。

Emacs 通过尾随标识目录名称`/`，这意味着您使用的路径的“目录部分”是“~/.emacs.d/”。

你要：

```
(defvar my-auto-save-folder "~/.emacs.d/auto-save/"); folder for auto-saves 
```

以下逗号的位置也很奇怪（尽管显然它仍然有效）：

```
`((".*", my-auto-save-folder t))) 
```

那真的应该是：

```
`((".*" ,my-auto-save-folder t))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T21:26:28.470

这就是我的 .emacs 中的内容，对我来说效果很好：

```
(add-to-list 'auto-save-file-name-transforms
             (list "\\(.+/\\)*\\(.*?\\)" (expand-file-name "\\2" my-auto-save-folder))
             t) 
```

# jquery - 如果文本输入有长度，jQuery取消选中复选框

> ID：15302976
> 
> 赞同：0
> 
> 时间：2013-03-08T20:44:43.147
> 
> 标签：jquery, validation

如果另一个文本输入具有值（M/DD/YYY 格式），我需要取消选中复选框（如果已选中）。我正在使用 glDatePicker 设置 #StartDate 的值，即通过 ajax 引入的内容，所以我使用 '.on' 功能

```
<div id="bottomContent">
    <input type="text" id="StartDate" name="StartDate"><br />
    <input type="text" id="EndDate" name="EndDate"><br />
    <label for="AllDate"><input type="checkbox" name="AllDate" id="AllDate">All Dates</label>
</div>

$(function() {
    $('#bottomContent').on('change', '#StartDate', function(e){
        var value = $(this).val();
        if ( value.length > 0  ) {
        //$('#AllDate').prop('checked', false);
        console.log('hi');
        }
    });
}); 
```

我很确定我的参数在 .on 参数中搞砸了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T20:48:20.473

`.prop('checked', false)`应该按预期工作。尝试取消注释该行，它应该可以工作（参见下面的小提琴链接）。

```
$(function() {
    $('#bottomContent').on('change', '#StartDate', function(e){
        var value = $(this).val();
        if ( value.length > 0  ) {
             $('#AllDate').prop('checked', false);
        console.log('hi');
        }
    });
}); 
```

我之前推荐过使用`.removeProp()`，[但我弄错](https://stackoverflow.com/questions/9950123/what-is-the-proper-way-to-uncheck-a-checkbox-in-jquery-1-7)了。

在这里看小提琴 - [http://jsfiddle.net/teddyrised/Xkvcx/](http://jsfiddle.net/teddyrised/Xkvcx/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T21:08:48.430

好的！给你，因为你正在使用 glDatePicker。

我也修改了 jsfiddle 来这样做。

[http://jsfiddle.net/Xkvcx/8/](http://jsfiddle.net/Xkvcx/8/)

```
$(function() {
    $('#StartDate').glDatePicker({
        onClick: (function(el, cell, date, data) {
            el.val(date.toLocaleDateString());
            $('#AllDate').prop('checked', false);
        })
    });
}); 
```

使用此脚本，每当您选择一个可选日期时，它都会从 AllDate 中删除该复选框

显然这一切都来自这个参考： http: [//glad.github.com/glDatePicker/#reference](http://glad.github.com/glDatePicker/#reference)

谢谢，晚安！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T20:50:53.543

```
$('#StartDate').on('change', function(e){
    $('#AllDate')[0].checked = $(this).val().length > 0;
}); 
```

[例子](http://jsfiddle.net/8Yesy/)

* * *

或者，如果您`#bottomContent`使用 AJAX 进行更新并且需要保持`.on()`绑定相同：

```
$('#bottomContent').on('change', '#StartDate', function(e){
    $('#AllDate')[0].checked = $(this).val().length > 0;
}); 
```

[例子](http://jsfiddle.net/8Yesy/2/)

# php - SimplePie 多提要演示代码不起作用。我应该改用什么？

> ID：15302989
> 
> 赞同：0
> 
> 时间：2013-03-08T20:45:28.847
> 
> 标签：php, simplepie

我试图弄清楚为什么在 SimplePie 网站上发布的用于显示多个提要的代码不起作用。具体来说，此代码示例：

[http://simplepie.org/wiki/tutorial/sort_multiple_feeds_by_time_and_date](http://simplepie.org/wiki/tutorial/sort_multiple_feeds_by_time_and_date)

这是我正在使用的具体内容：

```
<?php
// Include the SimplePie library
// For 1.0-1.2:
#require_once('simplepie.inc');
require_once($_SERVER['DOCUMENT_ROOT']."/path/to/simplepie/autoloader.php");
// For 1.3+:

// Create a new SimplePie object
$feed = new SimplePie();

// Instead of only passing in one feed url, we'll pass in an array of three
$feed->set_feed_url(array(
'http://apps.leg.wa.gov/billinfo/SummaryRss.aspx?bill=1891&year=2013',
'http://apps.leg.wa.gov/billinfo/SummaryRss.aspx?bill=1313&year=2013',
'http://apps.leg.wa.gov/billinfo/SummaryRss.aspx?bill=5811&year=2013',
'http://apps.leg.wa.gov/billinfo/SummaryRss.aspx?bill=1044&year=2013',
'http://apps.leg.wa.gov/billinfo/SummaryRss.aspx?bill=1804&year=2013',
'http://apps.leg.wa.gov/billinfo/SummaryRss.aspx?bill=5512&year=2013',
'http://apps.leg.wa.gov/billinfo/SummaryRss.aspx?bill=5127&year=2013',
'http://apps.leg.wa.gov/billinfo/SummaryRss.aspx?bill=5128&year=2013',
'http://apps.leg.wa.gov/billinfo/SummaryRss.aspx?bill=1440&year=2013',
'http://apps.leg.wa.gov/billinfo/SummaryRss.aspx?bill=1085&year=2013',
'http://apps.leg.wa.gov/billinfo/SummaryRss.aspx?bill=1095&year=2013',
'http://apps.leg.wa.gov/billinfo/SummaryRss.aspx?bill=5395&year=2013',
'http://apps.leg.wa.gov/billinfo/SummaryRss.aspx?bill=5429&year=2013',
'http://apps.leg.wa.gov/billinfo/SummaryRss.aspx?bill=5482&year=2013',
'http://apps.leg.wa.gov/billinfo/SummaryRss.aspx?bill=1812&year=2013',
'http://apps.leg.wa.gov/billinfo/SummaryRss.aspx?bill=1457&year=2013'
));

// Initialize the feed object
$feed->init();

// This will work if all of the feeds accept the same settings.
$feed->handle_content_type();

// Begin our HTML markup
?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"> 
<head>
    <title>Awesome feeds</title>

    <style type="text/css">
    h4.title {
        /* We're going to add some space next to the titles so we can fit the 16x16 favicon image. */
        background-color:transparent;
        background-repeat:no-repeat;
        background-position:0 1px;
        padding-left:20px;
    }
    </style>
</head>
<body>
    <div id="site">

        <?php if ($feed->error): ?>
        <p><?php echo $feed->error; ?></p>
        <?php endif; ?>

        <h1>Awesome feeds</h1>

        <?php foreach ($feed->get_items() as $item): ?>

        <div class="chunk">

            <?php /* Here, we'll use the $item->get_feed() method to gain access to the parent feed-level data for the specified item. */ ?>
            <h4 class="title" style="background-image:url(<?php $feed = $item->get_feed(); echo $feed->get_favicon(); ?>);"><a href="<?php echo $item->get_permalink(); ?>"><?php echo $item->get_title(); ?></a></h4>

            <?php echo $item->get_content(); ?>

            <p class="footnote">Source: <a href="<?php $feed = $item->get_feed(); echo $feed->get_permalink(); ?>"><?php $feed = $item->get_feed(); echo $feed->get_title(); ?></a> | <?php echo $item->get_date('j M Y | g:i a T'); ?></p>

        </div>

        <?php endforeach; ?>

    </div>
</body>
</html> 
```

这是我得到的 HTML 输出：

```
<body>
    <div id="site">

        <h1>Awesome feeds</h1>

        <div class="chunk">
 <h4 class="title" style="background-image:url(<br />
<b>Warning</b>:  Favicon handling has been removed, please use your own handling in <b>/home/user/domain/library/SimplePie.php</b> on line <b>2946</b><br />
http://g.etfv.co/http%3A%2F%2Fapps.leg.wa.gov%2Fbillinfo%2Fsummary.aspx%3Fbill%3D1044%26amp%3Byear%3D2013);"><a href="<br />
<b>Fatal error</b>:  Call to a member function get_base() on a non-object in <b>/home/user/domain/folder/subfolder/simplepie/library/SimplePie/Item.php</b> on line <b>167</b><br /> 
```

我尝试修改代码（例如，我可以不使用网站图标），但我*总是*收到致命错误消息，说“调用 [SimplePie 文件] 中非对象的成员函数 [填空] ”。

是否有更多最新代码可以用作构建处理多个提要的页面的模板？是什么破坏了 SimplePie 的工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T02:09:04.203

我不确定您使用的是哪个版本的 SimplePie，但显然

> Favicon 处理已被删除，请在第 2946 行的**/home/user/domain/library/SimplePie.php中使用您自己的处理**

假设你不想调试 SimplePie 本身，你不应该这样称呼：

> $feed->get_favicon()

对于初学者。我不知道为什么删除了 favicon 支持，因为我使用它，但是我可能已经写了一个解决方法，或者我使用的是 SimplePie 的旧（劣质）版本。拉出网站图标的东西，然后再试一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-07T08:27:55.900

我不喜欢按原样查看示例代码，在一个范围内有一个 $feed 实例，而在 foreach() 构造范围内有另一个 $feed 实例。因此，我将 $feed 的第一个实例重命名为 $the_feed，同时将 $feed 变量保留在 foreach 中。

对非对象方法调用的抱怨在公共（iPage）服务器上消失了。

我来到这里寻找类似问题的答案。就我而言，在我的家庭服务器上运行良好的东西在公共服务器（iPage）上不起作用。主服务器运行 PHP 版本 5.3.3-7，而公共服务器运行 5.2.17。另一个区别是家庭服务器的服务器 API=Apache 2.0 处理程序，而公共服务器的服务器 API=CGI。不确定这些点是否重要。

# ruby-on-rails - 如何从 Instagram gem 响应中获取 X-RateLimit-Limit 和 X-Ratelimit-Remaining

> ID：15302997
> 
> 赞同：0
> 
> 时间：2013-03-08T20:45:52.197
> 
> 标签：ruby-on-rails, instagram

我正在使用[instagram-ruby-gem](https://github.com/Instagram/instagram-ruby-gem)。它工作得很好，但我想知道我是否曾经遇到过速率限制。

[Instagram 以两个 HTTP 标头的形式提供此信息](https://groups.google.com/d/msg/instagram-api-developers/u5dvkdye-BI/Tb-Dh8zJLDkJ)，但我不知道如何从 API 响应中检索标头。

我使用 instagram gem 进行的典型调用如下所示：

```
tagged_photos = client.tag_recent_media "hashtag" 
```

但是，如果我查看数据，`puts tagged_photos`我看不到任何标题。

知道如何访问它们吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-27T11:37:11.200

**编辑：拉取请求刚刚合并，所以做一个`bundle update`，你应该很好！** **老的：**

这是一个已知[问题](https://github.com/Instagram/instagram-ruby-gem/issues/125 "问题")，有一个[拉取请求](https://github.com/Instagram/instagram-ruby-gem/pull/126)，但尚未合并。同时，请按照问题中引用的说明进行操作：

> 改变
> 
> 宝石“Instagram”
> 
> 在您的 Gemfile 中
> 
> 宝石'instagram'，github：'leonko/instagram-ruby-gem'，分支：'fix_utils_raw_request'

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-18T20:00:17.463

我刚刚在我的 instagram-ruby-gem 分支[https://github.com/weyus/instagram-ruby-gem](https://github.com/weyus/instagram-ruby-gem)中添加了速率限制信息。

还有一个针对实际 instagram-ruby-gem 的拉取请求，但不确定它会去哪里。

# javascript - 如何从选定 href 标记内的 span 标记中检索文本？

> ID：15302999
> 
> 赞同：1
> 
> 时间：2013-03-08T20:46:12.557
> 
> 标签：javascript, jquery, html

我正在尝试从选定的 href 标记内的 span 元素中检索文本。这是我之前示例中的 HTML：

```
<ul class="thumbnails">
<li>
    <a href="#" class="thumbnail">
        <img class="giftthumb" src='thumb1.jpg' alt="">
        <span class="gifttitle">Thumb1</span>
    </a>    
</li>
<li>
    <a href="#" class="thumbnail">
        <img class="giftthumb" src='thumb2.jpg' alt="">
        <span class="gifttitle">Thumb2</span>
    </a>    
</li>
<li>
    <a href="#" class="thumbnail">
        <img class="giftthumb" src='thumb3.jpg' alt="">
        <span class="gifttitle">Thumb3</span>
    </a>    
</li>
</ul>

<input type="button" class="btn btn-success" value="Test" id="capture"/> 
```

我的 jQuery 看起来像这样

```
$('#capture').click(function(e) {
    e.preventDefault();

        var test = $(".highlight .gifttitle").text();       
    alert("TEXT " + test);
}); 
```

选择一个项目后，我添加一个名为：“highlight”的类

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T20:51:47.483

你只需要一个简单的类选择器：

```
var test = $(".gifttitle.highlight").text(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T20:53:35.603

您应将代码更改为：

```
$('#capture').click(function(e) {
    e.preventDefault();

    // var test = $(".gifttitle", this).text();      
    alert("TEXT " + test);
}); 
```

伪类`:selected`不适用于`span`元素。

`$(". gifttitle ", this)`表示选择当前元素中具有类的`gifttitle`元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T20:53:47.310

var test = $('.highlight > .gifttitle').text();