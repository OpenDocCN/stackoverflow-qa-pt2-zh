# StackOverflow 问答 15281000-15281999

# google-chrome - 在 Chrome 中复制标签而不重新加载页面？

> ID：15281000
> 
> 赞同：28
> 
> 时间：2013-03-07T20:23:13.947
> 
> 标签：google-chrome, google-chrome-extension, google-chrome-devtools

有没有办法完全复制谷歌浏览器中当前标签的状态？我想要页面当前状态的精确副本，而无需在另一个选项卡中重新加载页面。

一个示例用例：

在浏览新闻网站上的“幻灯片”时，我想保留我正在播放的当前幻灯片，但创建一个副本以便我可以继续查看下一张幻灯片。如果我只是右键单击并“复制”选项卡，新页面将完全重新加载，重新处理所有 Javascript 并再次运行预幻灯片广告。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2019-06-18T04:56:17.850

简而言之，“不”你不能。

我不是这方面的专家，但可以通过我知道的某些方式实现类似的行为：

**转储整个 DOM**

从来没有试过这个。您可以将 DOM 转换为字符串，将其传递给新窗口，然后将其解析为文档。这会让你失去你的 DOM 事件和状态操作 javascript。（但这对你的情况有好处）

```
var dtab = window.open('about:blank', 'duplicate_a_tab');
dtab.document.open();
dtab.document.write("... yout html string ..");
dtab.document.close(); 
```

**开发扩展**

让用户以当前状态继续在当前选项卡上，您的扩展程序应该能够捕获该区域的屏幕截图并在新选项卡中打开该屏幕截图。市场上有很多屏幕截图扩展。

**如果该网站是您自己的**

您可以开发使用本地状态的服务，例如渐进式 Web 应用程序。单独提供一个指向“重复”的链接，该链接最终将在不同的选项卡中打开相同的 URL，具有相同的本地状态和标志不同步。

> 当用户使用浏览器内置的重复功能时，这将不起作用。

# database - 缺少数据库

> ID：15281001
> 
> 赞同：0
> 
> 时间：2013-03-07T20:23:20.573
> 
> 标签：database, ms-access, duplicate-data, missing-data

我的基于访问的数据库有问题。当我尝试使用插入命令时，所有记录都发送到根文件夹中的 mydatabase.mdb，但是当我想从数据库中读取时，记录来自 bin 文件夹中的另一个数据库。它会导致一个大问题，因为每次我应该将 mydatabase.mdb 从根文件夹复制到 bin 文件夹！我该如何解决这个问题？

PS 我在插入和选择命令中使用相同的连接字符串。

```
 public OleDbConnection con = new OleDbConnection(@"Provider=Microsoft.Jet.OLEDB.4.0; Data Source=F:\\fanoos\\new work\\C# regester_markaze tebi\\regester\\regester\\bin\\Debug\\Db_reg.mdb"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T20:43:38.217

听起来您的数据库有链接表，这些表指向“bin 文件夹中的其他数据库”。在 Access 中打开您要连接的数据库，然后使用`linked table manager`查看链接表指向的位置。在 Access 2010+（可能还有 2007+）中，链接表管理器位于`External Data`功能区选项卡上。

# asp.net - ASP.NET 网络表单路由

> ID：15281005
> 
> 赞同：0
> 
> 时间：2013-03-07T20:23:28.410
> 
> 标签：asp.net, routing, webforms, asp.net-routing

我们正在构建一个产品站点，并在 ASP.NET WebForms C# 中使用路由。我们目前有

```
routes.MapPageRoute("", "{categoryName}", "~/Category.aspx");
routes.MapPageRoute("", "{categoryName}/{subCategoryname}", "~/SubCategory.aspx"); 
```

它工作得很好..

*鞋子/女士，鞋子/儿童，靴子/男士，靴子/女士。*

我们添加了一条新路线，希望得到以下结果

*产品/Mountain-Light-Mens-Hiking-Boots*

所以我们现在我们的路由器有

```
routes.MapPageRoute("", "{categoryName}", "~/Category.aspx");
routes.MapPageRoute("", "{categoryName}/{subCategoryname}", "~/SubCategory.aspx"); 
routes.MapPageRoute("", "Product/{productName}", "~/Product.aspx"); 
```

但是，当我们转到*/Product/Mountain-Light-Mens-Hiking-Boots*时，路由器会触发**SubCategory.aspx**，这不是我们想要发生的。我们希望**Product.aspx**启动。

我知道路由器不知道“产品”是否是类别名称。

如何为 /Products 添加另一个根级别路由？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T20:30:38.217

像这样更改您的代码顺序

```
routes.MapPageRoute("", "Product/{productName}", "~/Product.aspx");
routes.MapPageRoute("", "{categoryName}/{subCategoryname}", "~/SubCategory.aspx"); 
routes.MapPageRoute("", "{categoryName}", "~/Category.aspx"); 
```

顺序非常重要。因为你输入像“www.domain.com/abc/abc”这样的网址，如果

```
routes.MapPageRoute("", "{categoryName}/{subCategoryname}", "~/SubCategory.aspx"); 
```

在第三没有。然后这条路线从未调用过。它调用以下路线。

```
routes.MapPageRoute("", "{categoryName}", "~/Category.aspx"); 
```

价值将是。

```
string Value= Page.RouteData.Values["categoryName"].ToString();
Value= "abc/abc"; 
```

因此，包含一个参数的 Url Pattern 应该在和路由集合中。

# c++ - Segmentaion故障调用方法第二次C++

> ID：15281006
> 
> 赞同：-4
> 
> 时间：2013-03-07T20:23:28.883
> 
> 标签：c++, methods, fault

如果我向 setColor 添加第二个调用，则会出现分段错误。我认为也许该方法正在以某种方式更改数组指针，但我不确定为什么。

```
#include <iostream>

using namespace std;

struct Color {
    int red;
    int blue;
    int green;
};

void setColor(Color **arr, int index, int red, int blue, int green) {
    Color *ptr = arr[index];
    (*ptr).red = red;
    (*ptr).blue = blue;
    (*ptr).green = green;
}

int main() { 
    Color *arr[3];
    setColor(arr, 0, 12, 23, 34);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T20:25:36.367

`arr`是一个未初始化的指针数组。你很“幸运”它完全有效，因为你调用了**undefined behavior**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T20:25:30.500

您已经声明了一个指向颜色的指针数组，但没有留出任何内存供它使用。这是未定义的行为。作为未定义的行为，你不能说会发生什么。如果你继续运行它，你可能会从中得到一杯咖啡！

为了使这个答案值得保留，您所说明的确切场景称为取消引用[野指针](http://en.wikipedia.org/wiki/Dangling_pointer#Cause_of_wild_pointers)。

# tomcat - Geronimo 或 Tomcat 服务器中的 CAR（连接器存档）是什么？

> ID：15281008
> 
> 赞同：0
> 
> 时间：2013-03-07T20:23:38.490
> 
> 标签：tomcat, geronimo

在一些基于 EAR 文件的部署中，我将“汽车”文件视为类型。它是如何工作的？与 JAR 或 WAR 文件有何不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T20:27:42.457

A "CAR" is a "Configuration ARchive"; a WAR is a "Web Application aRchive", and an EAR is an "Enterprise Application aRchive" (which can consist of multiple WAR's).

Here's a link that discusses how to use CAR's to backup WebSphere configurations; the concept is similar for Geronimo:

*   [IBM WebSphere Configuration Archives](http://publib.boulder.ibm.com/infocenter/ieduasst/v1r1m0/index.jsp?topic=/com.ibm.iea.was_v6/was/6.0/SystemManagement/WASv6_SM_Configuration_Archives/player.html)

# emacs - ILISP安装问题

> ID：15281010
> 
> 赞同：1
> 
> 时间：2013-03-07T20:23:43.467
> 
> 标签：emacs, lisp

OK 我知道 ILISP 已经不再开发了，但是 SLIME 没有 ILISP 的一些特性，即自动补全、突出显示用户定义的函数、用户函数的参数列表提示等

[我在这个地方](https://github.com/barak/ilisp)找到了一个更新的 ILISP 包存储库。我在 Linux 上使用 SBCL。我不得不编辑`ilcompat.el`和添加

```
 ((string-match "^24" emacs-version)
         'fsf-23) 
```

使其与 Emacs 24.x 一起编译。它确实编译了*大量*警告。然后按照`INSTALLATION`文档，我添加`(load "ilisp/ilisp.emacs")`到我的`~/.emacs`文件中。;

但是在emacs启动时，我得到一个错误。我不知道emacs足以解决这个问题？？

```
Loading 00debian-vars...done
Loading /etc/emacs/site-start.d/50cmake-data.el (source)...done
Loading /etc/emacs/site-start.d/50devhelp.el (source)...done
Loading /etc/emacs/site-start.d/50dictionaries-common.el (source)...
Loading debian-ispell...
Loading /var/cache/dictionaries-common/emacsen-ispell-default.el (source)...done
Loading debian-ispell...done
Loading /var/cache/dictionaries-common/emacsen-ispell-dicts.el (source)...done
Loading /etc/emacs/site-start.d/50dictionaries-common.el (source)...done
Loading /etc/emacs/site-start.d/50gcl.el (source)...done
Loading /etc/emacs/site-start.d/50ilisp.el (source)...
Loading /etc/ilisp/ilisp.el (source)...
Loading /etc/ilisp/ilisp-keybindings.el (source)...done
Loading /etc/ilisp/ilisp.el (source)...done
Loading /etc/emacs/site-start.d/50ilisp.el (source)...done
Loading /etc/emacs/site-start.d/50slime.el (source)...
Loading /usr/share/emacs24/site-lisp/slime/slime-autoloads.elc...done
Loading /etc/emacs/site-start.d/50slime.el (source)...done
Loading /home/robin/.emacs.d/paredit.el (source)...done
Loading /home/robin/ilisp-master/ilisp.emacs...
Loading ilfsf23...done
Loading /home/robin/ilisp-master/ilisp.emacs...done
For information about GNU Emacs and the GNU system, type C-h C-a.
Loading ilcompat...
Loading ilfsf23...done
Loading ilcompat...done
Loading comint-ipc...done
Loading extra/cltl2...done
Loading ilisp-def...done
Loading ilisp-sym...done
Loading ilisp-inp...done
Loading ilisp-ind...done
Loading ilisp-prc...done
Loading ilisp-val...done
Loading ilisp-out...done
Loading ilisp-mov...done
Loading ilisp-key...done
Loading ilisp-prn...done
Loading ilisp-low...done
Loading ilisp-doc...done
Loading ilisp-ext...done
Loading ilisp-mod...done
Loading ilisp-dia...done
Loading ilisp-cmt...done
Loading ilisp-rng...done
Loading ilisp-hnd...done
Loading ilisp-utl...done
Loading ilisp-cmp...done
Loading ilisp-kil...done
Loading ilisp-snd...done
Loading ilisp-xfr...done
Loading ilisp-hi...done
Loading ilisp-aut...done
Loading /home/robin/ilisp-master/ilisp-cl.el (source)...
File mode specification error: (invalid-function (\` (progn (defvar ((\, hook)) nil ((\, (format "*Inferior %s hook." full-name)))) (defvar ((\, program)) nil ((\, (format "*Inferior %s default program." full-name)))) (defun ((\, setup)) (buffer) ((\, (format "Set up for interacting with %s." full-name))) ((\, (read (format "(setup-%s buffer)" parent)))) ((\,@ body)) (setq ilisp-program (or ((\, program)) ilisp-program) ilisp-dialect (cons (quote ((\, dialect))) ilisp-dialect)) (run-hooks (quote ((\, (read (format "%s-hook" dialect))))))) (defun ((\, dialect)) (&optional buffer program) ((\, (format "Create an inferior %s.  With prefix, prompt for buffer and program." full-name))) (interactive (list nil nil)) (ilisp-start-dialect (or buffer ((\, dialects))) program (quote ((\, setup)))) (setq ((\, program)) ilisp-program)) (lisp-add-dialect ((\, dialects))))))
Loading vc-git...done
byte-code: Beginning of buffer [4 times] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T11:24:36.333

问题是 ILISP 使用过时的反引号语法。该错误似乎来自[ilisp-dia.el 中 defdialect 的定义](https://github.com/barak/ilisp/blob/9dde83ede6febe0170f95c90b137f2cdad68f554/ilisp-dia.el#L110)：

```
(defmacro defdialect (dialect full-name parent &rest body)
  "Define a new ILISP dialect.
DIALECT is the name of the function to invoke the inferior LISP. The
hook for that LISP will be called DIALECT-hook.  The default program
will be DIALECT-program.  FULL-NAME is a string that describes the
inferior LISP.  PARENT is the name of the parent dialect."

  (let ((setup (read (format "setup-%s" dialect)))
        (hook (read (format "%s-hook" dialect)))
        (program (read (format "%s-program" dialect)))
        (dialects (format "%s" dialect)))
    (`
     (progn
       (defvar (, hook) nil (, (format "*Inferior %s hook." full-name)))
... 
```

反引号和逗号的类似函数用法在 Emacs Lisp 中已弃用。来自 Emacs 24.1 的 NEWS 文件：

> ** 对已过时 10 年以上的“旧式”反引号的支持已进一步减少。现在，不跟空格的反引号总是被视为“新式”反引号。请从您的代码中删除所有“旧式”反引号。如果您的代码使用 Elisp 手册中记录的反引号，并且在没有警告的情况下编译，那么您在这方面无事可做。不遵循适当约定的代码可能无法编译。
> 
> 最常见的问题原因似乎是旧式反引号后跟换行符。

所以这段代码应该重写为：

```
(defmacro defdialect (dialect full-name parent &rest body)
  (let ((setup (read (format "setup-%s" dialect)))
        (hook (read (format "%s-hook" dialect)))
        (program (read (format "%s-program" dialect)))
        (dialects (format "%s" dialect)))
    `(progn
       (defvar ,hook nil ,(format "*Inferior %s hook." full-name))
... 
```

（虽然我怀疑让 SLIME 正常运行会更好地利用时间。）

# javascript - 移动网络应用程序上的 keyup 似乎仍然没有覆盖内容块

> ID：15281018
> 
> 赞同：1
> 
> 时间：2013-03-07T20:24:08.733
> 
> 标签：javascript, jquery, ios, webview

我有一些从输入文本框上的**keyup**事件获得的输入。

```
$(selector).keyup(function(){
  var str = $(this).val();
  var X = 2;
  var Y = 1;
  $(this).val(str.substring(X,Y));
}); 
```

在标准的 web 应用程序中查看它时，**$(this).val()**没有新按下的键。我应该关注生命周期的哪个部分？似乎在 webapp 中执行此操作时，它似乎按计划执行，但在 iOS webview/移动应用程序中使用它时却没有

**编辑：**

似乎这些听众的生命周期实际上可能有所不同。在进行 keyup 时，它会将**$(this).val()**识别为旧内容加上新字符，而在移动设备上，它只识别旧内容。新角色很容易通过以下方式获得：

```
String.fromCharCode(event.which) 
```

但在生命周期的那个时候，我不能说不删除它。我正在研究可能与其他事件相关的想法，以及做类似*event.preventDefault();之类的事情。*或*event.stopPropagation();* 但我不知道该去哪里。

任何想法如何工作和处理此类事件或侦听器都会很棒。以我目前的逻辑，当我有新的内容集时需要它。也许一个简单 *的 on("input")*就足够了？

指导高度赞赏。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T13:14:36.983

keyup() 页面上的 Jquery 文档：

> 为了捕捉实际的文本输入， .keypress() 可能是更好的选择。

解决我的编码问题：

1) 将事件从 keyup 更改为 keypress。2) 执行以下操作：

```
var reg = new RegExp("\\D");
if(reg.test(String.fromCharCode(event.which))){
  var str = $(this).val();
  var strArr = str.split("");
  // for handling when people maintain the press, 
  //    i created a range array to delete the range.
  strArr.splice(cRange[0], cRange[1]-cRange[0]+1); 
  str = strArr.join("");
  $(this).val(str);
  event.preventDefault();
} 
```

# coldfusion - ColdFusion 9 Solr：无法创建/更新/刷新集合

> ID：15281019
> 
> 赞同：0
> 
> 时间：2013-03-07T20:24:11.683
> 
> 标签：coldfusion, solr, coldfusion-9

我的 Solr 收藏遇到了一些问题，出于沮丧，我决定删除所有文件夹并从头开始。首先，我没有通过 CFAdmin 删除它们。

经过一番搜索，我读到有人建议将`/solr/core0`文件夹的内容复制到`/ColdFusion9/collections`. 这至少会使它们出现在 CFAdmin 中。但是，当尝试索引集合时，我收到以下错误：

```
ERROR unknown_field_author ERROR unknown_field_author request: 
    http:localhost:8983/solr/dtrparti/update?commit=true&waitFlush=false&waitSearcher=false&wt=javabin&version=1 
```

这是否可以在无需从头开始重新安装 ColdFusion 9 的情况下恢复？

谢谢，

^_^

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T13:32:48.953

是的！这是！根据[http://www.elliottsprehn.com/cfbugs/bugs/83331](http://www.elliottsprehn.com/cfbugs/bugs/83331)，如果将以下内容添加到所有受影响的 collection/conf/schema.xml 中：

<field name="author" type="text_ws" indexed="true" stored="true" required="true" />

..它现在将索引。

^_^

# sql - Sybase 获取记录组的最后一条记录

> ID：15281024
> 
> 赞同：1
> 
> 时间：2013-03-07T20:24:33.040
> 
> 标签：sql, sybase-asa

我有一张这样的桌子

id ref 状态日期

1 150 P 10/01/2010
2 150 P 11/01/2010
3 150 P 12/01/2010
4 151 P 10/01/2010
5 151 C 空
6 152 P 11/01/2010
7 152 P 12/01 /2010
8 152 C 空

我想要的是根据列日期检索所有状态等于**C**和（对于那些状态为**P**的）最后一条记录的记录。

例如：

id ref 状态日期

3 150 P 12/01/2010
5 151 C 无
8 152 C 无

到目前为止，我已经尝试进行子查询，但我没有根据日期获得最后一条记录。

我正在使用 Sybase 8.0.2.4542。十分感谢大家！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T20:54:04.743

尝试使用解决方案：

```
select id, ref, status, max(date)
from table 
where status = 'P'
group by id, ref, status, date
union all
select id, ref, status, date
from table 
where status = 'C' 
```

一个查询：

```
select *from 
(select id, ref, status, max(date)
from table 
where status = 'P'
group by id, ref, status, date
union all
select id, ref, status, date
from table 
where status = 'C') RES 
```

# authentication - 登录/身份验证被卡住，window.fbAsyncInit / FB.init 似乎没有运行

> ID：15281028
> 
> 赞同：0
> 
> 时间：2013-03-07T20:24:49.843
> 
> 标签：authentication, facebook-authentication

自从最近几天我尝试登录我的 Facebook 应用程序 (Lovedot) 以来，我无法通过 Facebook 身份验证。好吧，有时身份验证有效，有时我需要刷新几次，有时甚至刷新也无济于事。

当我尝试连接到 TopEleven 游戏时，我注意到了同样的问题。

我使用的代码是：

```
 window.fbAsyncInit = function () {

        FB.Canvas.setSize({ width: 960, height: 2000 });

        FB.init({ appId: 'MYAPPID', channelUrl: '//fb.lovedot.com/channel.html', status: true, cookie: true, xfbml: true, oauth: true });

        FB.Event.subscribe('auth.login', function (response) {
            if (response.authResponse) {
                window.location = 'https://fb.lovedot.com/outFacebookLanding.aspx?';
            }
        });

        FB.Event.subscribe('auth.logout', function (response) {
        }); 
```

所以基本上这是我在 Facebook 上找到的复制粘贴。当我检查 HTTP Watch 跟踪时，我看到：

*   [访问https://connect.facebook.net/en_US/all.js](https://connect.facebook.net/en_US/all.js)时出现 ERROR_INTERNET_CONNECTION_RESET
*   [对https://1-pct.channel.facebook.com/pull?channel=p_MYUSERID&seq=25&partition=246&clientid=1a0bc541&cb=jhp8&idle=21&state=active](https://1-pct.channel.facebook.com/pull?channel=p_MYUSERID&seq=25&partition=246&clientid=1a0bc541&cb=jhp8&idle=21&state=active)的请求需要 30 秒，这是重复请求并再次需要 30 秒。

这开始发生在大约。在过去的 3-4 天内。

任何想法？

# asp.net-mvc-3 - mvc3 dapper 参数问题

> ID：15281029
> 
> 赞同：1
> 
> 时间：2013-03-07T20:24:55.280
> 
> 标签：asp.net-mvc-3, parameters, dapper

我的 dapper 工作正常，但它是不安全的，因为我没有使用参数，我怎样才能最好地将我的 dapper 变量转换为参数，例如这是我工作的未参数化代码..

```
var getinfo = sqlConnection.Query<test>("Select name,location from tests where location="+ myplace).FirstOrDefault(); 
```

**myplace**是用户放置信息的文本框，现在当我尝试参数化该代码时

```
var getinfo = sqlConnection.Query<test>("Select name,location from tests where location='@location'", new {location = myplace}).FirstOrDefault(); 
```

我绝对没有返回，但没有错误消息。我在这里可以缺少什么或参数化变量的最佳方法是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T20:36:42.450

您不需要在参数周围放置单引号。希望这可以帮助。

```
var getinfo = sqlConnection.Query<test>("Select name,location from tests where location=@location", new {location = myplace}).FirstOrDefault(); 
```

# c# - 带有大型案例声明的条码扫描器应用程序的设计模式建议

> ID：15281034
> 
> 赞同：1
> 
> 时间：2013-03-07T20:25:06.647
> 
> 标签：c#, design-patterns, architecture, barcode-scanner

我正在寻找一些关于用于重构制造工厂中使用的 Windows CE 条形码扫描应用程序的良好设计模式/模型的输入。试图让它更面向对象，更少程序化

目前，应用程序的大部分功能基本上由一种主要方法中的大型案例语句控制，私有整数的值决定了通过案例的路径。

因为许多扫描是按顺序执行的，所以代码在每次条码扫描后基本上循环通过这个主要方法，直到用户退出菜单并选择不同的扫描功能。

对于很多事务类型，代码需要依次通过主case语句走多条路径。例如，“打包”交易需要用户先扫描自己的id badge，然后扫描目标容器，再扫描目标容器中要打包的物品，这些都是main方法中的单独案例。

在这种情况下，一个非常简化的示例：

```
private int activeTrans;
private int baseTrans;
private int nextTrans;

btnPack_Click()
{
   nextTransaction = 2
   StartTransaction(1, 1)              
}

StartTransaction(int transId, int transMode)
{
  //determines the initial path(s) to take 

  switch (transMode)
  {
    case 1:  //scan parent 
      activeTrans = 4;
      baseTrans = transId;
      break;

    //a handful of other case statements representing the major types of transactions
    ...
  }

  StartBarcodeRead() //the scanner prepared to scan, once the user scans a barcode, 
                     //the HandleData method is called
}

HandleData()
{
  switch (activeTrans)
  {
    case 1:  //select target container
      DoSomeMethodForTheTargetContainer();
      activeTrans = baseTrans;

    case 2:  //pack in container
      DoThePackingMethod();

    case 3:  //scan id badge
       ValidateIdBadgeScan();
       activeTrans = baseTrans;
       baseTrans = nextTrans;

    ... //about 20 more cases for all the different transactions
} 
```

这似乎是使用命令模式的可能候选者，因为每个扫描功能都有可能成为“堆栈”或按顺序运行的事务，但我不确定。代码运行良好——我只想尝试重构一下，因为我可以预见随着需求的变化或添加，代码会变得越来越复杂。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T20:53:35.163

这是一个非 OO 问题，因此寻找 OO 设计模式是不合适的（至少在重构的这个阶段）。你需要一个有限状态机，所以设计一个 FSM。如果您的 FSM 的特定部分仍然看起来过于繁琐或复杂，请为其寻找合适的 OO 设计模式。

# ruby - 如何使用 JRuby 1.7 运行 Ruby 2.0？

> ID：15281036
> 
> 赞同：28
> 
> 时间：2013-03-07T20:25:13.670
> 
> 标签：ruby, jruby, ruby-2.0

让 JRuby 在 2.0 模式下运行的最佳方法是什么？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-03-07T20:27:14.307

For a specific script, you can use the `--2.0` option:

```
jruby --2.0 -S rails s 
```

For setting 2.0 as the default value, set `JRUBY_OPTS`:

```
export JRUBY_OPTS=--2.0 
```

You can also set the value in `~/.jrubyrc`:

```
compat.version=2.0 
```

# c++ - 从数组转换为向量的边界

> ID：15281042
> 
> 赞同：0
> 
> 时间：2013-03-07T20:25:40.220
> 
> 标签：c++, arrays, stdvector

我正在尝试在 C++ 中学习向量类。为此，我试图从数组转换为向量形式。

以**数组**形式

```
int find_recursively(int *a, int low, int high) {
    int mid = (low+high)/2;

    if(....)
        return find_recursively(a,low,mid+1);
    else if(...)
        return find_recursively(a,mid+1,high);
} 
```

我的**向量**形式的转换是这样的：

```
int find_recursively(vector<int> a) {
    int low = 0;
    int high = a.size() - 1;
    int mid = (low + high) / 2;

    if(....) {

        vector<int> temp ( a.begin(), a.begin() + mid-2 );
        return find_recursively(temp);
    }

    else if(...) {
        vector<int> temp (a.begin()+mid+1, a.begin()+high);
        return find_recursively(temp);
    }
} 
```

我测试了它，并直接给力关闭。我认为问题出在边界上，我没有得到向量中边界的逻辑。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T20:58:02.953

一旦您的递归深入到大小为 2 或更少的向量，您编写的代码就会出现问题。此时，您的“中间”值为 1，并且您的第一个“if”块中上限的“中间 2”计算产生 -1。此外，您的函数会打开一个没有返回语句的代码路径（如果两个“if”条件都评估为 false）。

无论如何，您不应该像这样递归地克隆向量。您应该使用迭代器，如下所示：

```
template< class Iter >
int find_recursively(Iter low, Iter high) {
   Iter mid = low + distance(low, high) / 2;

   if (...some test of *mid...) {
      return find_recursively(low, mid);
   }
   else if (...some other test of *mid...) {
      return find_recursively(++ mid, high);
   }
   else {
      return (something);
   }
}

// call site:
find_recursively(my_vector.begin(), my_vector.end()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T20:58:51.480

`.begin()`并且`.end()`是迭代器，它提供了一种简单地遍历容器的方法：

```
for(auto it = vec.begin(); it != vec.end(); ++vec)
    cout << *it << " "; // print the contents of vec 
```

请注意，这`end()`实际上并不是容器的一部分。为什么这很重要？因为它可用于创建更通用的算法版本：

```
template <class ForwardIt>
int find_recursively(ForwardIt first, ForwardIt last) {
    const size_t length = std::distance(first,last);
    if(length == 0) {
        /* do something accordinlgy */
    } else if (length == 1) {
        /* do something accordingly */
    }
    auto mid = first;
    std::advance(mid,length/2);

    if(....) {
        return find_recursively(first, mid);
    }

    else if(...) {
        return find_recursively(mid, first);
    }
}

/* example calls: */
std::vector<int> vec = {....};
int result1 = find_recursively(vec.begin(), vec.end());
int array[] = {....};
int result2 = find_recursively(std::begin(array), std::end(array)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T20:46:21.227

vector 支持索引运算符，所以不要使用向量切片作为函数参数。传递对向量和索引的引用。与数组相同的东西，但使用向量：

```
int find_recursively(const vector <int> &a, int low, int high) 
```

您可以使用 a[index]（例如 a[low]）来访问您的值。但是如果 "high" == a.size，尝试使用 a[high] 会使你的 SW 崩溃。永远记得检查索引是否在向量内。

当您递归调用时，只需传递相同的“a”：

```
find_recursively(a, low, mid+1); 
```

例如。

# actionscript-3 - AS3 对象出现 onClick 鼠标在舞台上点击的地方

> ID：15281045
> 
> 赞同：1
> 
> 时间：2013-03-07T20:25:45.553
> 
> 标签：actionscript-3, flash, click, mouseevent, mouseclick-event

我想在动作脚本中将我的库中的一个对象放在我单击的舞台上。看起来很容易？对？完全消隐。任何帮助都会很棒:)到目前为止我的代码是：

```
package code {

import flash.display.MovieClip;
import flash.events.MouseEvent;

public class Main extends MovieClip {

    public var redBox: Box = new Box(mouseX, mouseY);

    public function Main() {
        // constructor code
        stage.addEventListener(MouseEvent.CLICK, mouseClickEvent);
    }
    public function mouseClickEvent(e:MouseEvent):void {
        addChild(redBox);
    }
}

} 
```

那是主要的，然后盒子代码是：

```
package code {

import flash.display.MovieClip;

public class Box extends MovieClip{

    public function Box(myX:Number, myY:Number) {
        // constructor code
        myX = x;
        myY = y;
    }

}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T20:29:05.300

只需这样做：

```
package code {

import flash.display.MovieClip;
import flash.events.MouseEvent;

public class Main extends MovieClip {

    public var redBox: Box = new Box();

    public function Main() {
        // constructor code
        stage.addEventListener(MouseEvent.CLICK, mouseClickEvent);
    }
    public function mouseClickEvent(e:MouseEvent):void {
        redBox.x = stage.mouseX;
        redBox.y = stage.mouseY;
        addChild(redBox);

    }
}

} 
```

# gwt - 在生产模式下启用 GWT.UncaughtExceptionHandler

> ID：15281047
> 
> 赞同：0
> 
> 时间：2013-03-07T20:25:48.780
> 
> 标签：gwt

在我的 GWT 应用程序中，我有一个类似于[http://www.summa-tech.com/blog/2012/06/11/7-tips-for-exception-handling-in-gwt/的错误记录器](http://www.summa-tech.com/blog/2012/06/11/7-tips-for-exception-handling-in-gwt/)

```
 // Handle all exception errors
    GWT.setUncaughtExceptionHandler( new UncaughtExceptionHandler() {

        @Override
        public void onUncaughtException(Throwable e) {
            Window.alert("caught it!");
                    }
            }; 
```

此代码在主机模式下完美运行，但在生产模式下，它会按照文档中的说明进行编译。有没有办法让这段代码进入生产模式？

GWT.setUncaughtExceptionHandler 的文档 [http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/core/client/GWT.UncaughtExceptionHandler.html](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/core/client/GWT.UncaughtExceptionHandler.html)

干杯，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T20:40:45.520

我认为您误解了该文件：

> 在开发模式下，默认处理程序将堆栈跟踪打印到日志窗口。在生产模式下，默认处理程序为 null，因此允许转义异常，这提供了使用 JavaScript 调试器的机会。

*默认*处理程序在 dev 模式下打印堆栈跟踪，而在 prod 模式下，*默认*处理程序为 null，但如果您自己连接，它将被遵守。如果您想要开发/生产模式的自定义行为，那么添加是`GWT.isProdMode()`检查您自己的自定义处理程序。

# android - sqlite 错误中的多个表

> ID：15281049
> 
> 赞同：1
> 
> 时间：2013-03-07T20:25:52.400
> 
> 标签：android, sqlite, listview

我正在尝试将数据插入到 A.class 中的列表视图中，数据将来自 B.class 的编辑文本我有 2 个表这是我的代码

这是我的 DbAdapter

```
public class SQLiteAdapter extends Search{

@Override
public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    setContentView(R.layout.row);
}

public static final String APP_NAME = "AdvancedSearch";
public static final String MYDATABASE_NAME = "Food_DB";
public static final String MYDATABASE_TABLE = "Food_Table";
public static final int MYDATABASE_VERSION = 1;

public static final String KEY_ID = "_id";
public static final String KEY_FOODNAME = "FoodName";
public static final String KEY_CALORIES = "Calories";

public static final String FOODLOG = "Food_tab";
public static final String ID = "_id";
public static final String FOODNAME = "FoodName";
public static final String CALORIES = "Calories";

//create table MY_DATABASE (ID integer primary key, Content text not null);

private static final String SCRIPT_CREATE_DATABASE =
        "create table " + MYDATABASE_TABLE + " ("
                + KEY_ID + " integer primary key autoincrement, "
                + KEY_FOODNAME + " text not null, " + 
                KEY_CALORIES + " integer);";

private static final String CREATE_FOODLOG =
        "create table " + FOODLOG + " ("
                + ID + " integer primary key autoincrement, "
                + FOODNAME + " text not null, " + 
                CALORIES + " integer);";

private SQLiteHelper sqLiteHelper;
private SQLiteDatabase sqLiteDatabase;

private Context context;

public SQLiteAdapter(Context c){
    context = c;
}

public SQLiteAdapter openToRead() throws android.database.SQLException {
    sqLiteHelper = new SQLiteHelper(context, MYDATABASE_NAME, null, MYDATABASE_VERSION);
    sqLiteDatabase = sqLiteHelper.getReadableDatabase();
    return this;
}

public SQLiteAdapter openToWrite() throws android.database.SQLException {
    sqLiteHelper = new SQLiteHelper(context, MYDATABASE_NAME, null, MYDATABASE_VERSION);
    sqLiteDatabase = sqLiteHelper.getWritableDatabase();
    return this;
}

public void close()
{
    sqLiteHelper.close();
}

public long insert(String foodname, int i){
    ContentValues contentValues = new ContentValues();
    contentValues.put(KEY_FOODNAME, foodname);
    contentValues.put(KEY_CALORIES, i);
    return sqLiteDatabase.insert(MYDATABASE_TABLE, null, contentValues);    

}

public long insert1(String food, String cal){
    ContentValues Values = new ContentValues();
    Values.put(FOODNAME, food);
    Values.put(CALORIES, cal);
    return sqLiteDatabase.insert(FOODLOG, null, Values);    

}

public int deleteAll(){
    return sqLiteDatabase.delete(MYDATABASE_TABLE, null, null);
}

public Cursor queueAll(){
    String[] columns = new String[]{KEY_ID, KEY_FOODNAME, KEY_CALORIES};
    Cursor cursor = sqLiteDatabase.query(MYDATABASE_TABLE, columns,
            null, null, null, null, null);

    return cursor;
}

public Cursor queueFoodLog(){
    String[] columns = new String[]{ID, FOODNAME, CALORIES};
    Cursor cursor = sqLiteDatabase.query(FOODLOG, columns,
            null, null, null, null, null);

    return cursor;
}
 public void update_byID(int id, String v1, String v2){
      ContentValues values = new ContentValues();
      values.put(KEY_FOODNAME, v1);
      values.put(KEY_CALORIES, v2);
      sqLiteDatabase.update(MYDATABASE_TABLE, values, KEY_ID+"="+id, null);
     }

public class SQLiteHelper extends SQLiteOpenHelper {

    public SQLiteHelper(Context context, String name,
            CursorFactory factory, int version) {
        super(context, name, factory, version);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        // TODO Auto-generated method stub
        db.execSQL(SCRIPT_CREATE_DATABASE);
        db.execSQL(CREATE_FOODLOG);
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // TODO Auto-generated method stub

    }

        }

public void open()
{
    sqLiteDatabase = sqLiteHelper.getWritableDatabase();
}

public void delete_byID(int item_id) {
    // TODO Auto-generated method stub
    sqLiteDatabase.delete(MYDATABASE_TABLE, KEY_ID, null);
}

} 
```

这是我试图获取我的数据的代码。我的B级

```
 private ListView.OnItemClickListener listContentOnItemClickListener = new ListView.OnItemClickListener(){
  public void onItemClick(AdapterView<?> parent, View view, int position,
            long id) {
       Cursor cursor = (Cursor) parent.getItemAtPosition(position);

      String item_content1 = cursor.getString(cursor.getColumnIndex(SQLiteAdapter.KEY_FOODNAME));
      String item_content2 = cursor.getString(cursor.getColumnIndex(SQLiteAdapter.KEY_CALORIES));
      arlene = arlene + Integer.parseInt(item_content2);
      String item = String.valueOf(" Food Name: " + item_content1 ) + "\n" +
              " Calories: " +  item_content2;

       Toast.makeText(Search.this, item, Toast.LENGTH_LONG).show();      

       food.setText(item_content1);
       calories.setText(String.valueOf(arlene));

       String data1 = food.getText().toString();
       String data2 = calories.getText().toString();
       mySQLiteAdapter.insert1(data1, data2);
       updateList();
    } 
```

这是我的 A.class 我试图调用 B.class 中插入的数据

```
 mySQLiteAdapter = new SQLiteAdapter(this);
          mySQLiteAdapter.openToRead();

          Cursor cursor = mySQLiteAdapter.queueAll();
          startManagingCursor(cursor);

          String[] from = new String[]{SQLiteAdapter.FOODNAME,SQLiteAdapter.CALORIES};
          int[] to = new int[]{R.id.tv3, R.id.tv4};

          SimpleCursorAdapter cursorAdapter =
           new SimpleCursorAdapter(this, R.layout.foodlist, cursor, from, to);
          foodlog.setAdapter(cursorAdapter); 
```

这是我的 LOGCAT

```
03-08 03:58:06.068: E/AndroidRuntime(27320): FATAL EXCEPTION: main
03-08 03:58:06.068: E/AndroidRuntime(27320): java.lang.IllegalStateException: database not open
03-08 03:58:06.068: E/AndroidRuntime(27320):    at android.database.sqlite.SQLiteDatabase.insertWithOnConflict(SQLiteDatabase.java:1493)
03-08 03:58:06.068: E/AndroidRuntime(27320):    at android.database.sqlite.SQLiteDatabase.insert(SQLiteDatabase.java:1410)
03-08 03:58:06.068: E/AndroidRuntime(27320):    at me.mojica.caloriewatch.SQLiteAdapter.insert1(SQLiteAdapter.java:88)
03-08 03:58:06.068: E/AndroidRuntime(27320):    at me.mojica.caloriewatch.Search$1.onItemClick(Search.java:230)
03-08 03:58:06.068: E/AndroidRuntime(27320):    at android.widget.AdapterView.performItemClick(AdapterView.java:284)
03-08 03:58:06.068: E/AndroidRuntime(27320):    at android.widget.ListView.performItemClick(ListView.java:3382)
03-08 03:58:06.068: E/AndroidRuntime(27320):    at android.widget.AbsListView$PerformClick.run(AbsListView.java:1696)
03-08 03:58:06.068: E/AndroidRuntime(27320):    at android.os.Handler.handleCallback(Handler.java:587)
03-08 03:58:06.068: E/AndroidRuntime(27320):    at android.os.Handler.dispatchMessage(Handler.java:92)
03-08 03:58:06.068: E/AndroidRuntime(27320):    at android.os.Looper.loop(Looper.java:123)
03-08 03:58:06.068: E/AndroidRuntime(27320):    at android.app.ActivityThread.main(ActivityThread.java:4627)
03-08 03:58:06.068: E/AndroidRuntime(27320):    at java.lang.reflect.Method.invokeNative(Native Method)
03-08 03:58:06.068: E/AndroidRuntime(27320):    at java.lang.reflect.Method.invoke(Method.java:521)
03-08 03:58:06.068: E/AndroidRuntime(27320):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
03-08 03:58:06.068: E/AndroidRuntime(27320):    at     com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
03-08 03:58:06.068: E/AndroidRuntime(27320):    at dalvik.system.NativeStart.main(Native Method) 
```

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T04:56:45.240

改变

```
String data1 = food.getText().toString();
String data2 = calories.getText().toString();
mySQLiteAdapter.insert1(data1, data2);
updateList(); 
```

到

```
String data1 = food.getText().toString();
String data2 = calories.getText().toString();
mySQLiteAdapter.open();
mySQLiteAdapter.insert1(data1, data2);
mySQLiteAdapter.close();
updateList(); 
```

# ios - Objective-C：用于在文件中/从文件中保存/恢复复杂数据的数据结构？

> ID：15281051
> 
> 赞同：1
> 
> 时间：2013-03-07T20:25:59.373
> 
> 标签：ios, objective-c

我处于一种情况，我想在开始编码之前获得建议。我有一个文档可以有 1-1000 页，文档中的某些页面包含矩形，当文档打开和关闭时我一直在跟踪这些矩形（保存 CGRect），我想要做的是保存这些矩形与某些数据结构中的每个页面关联，我可以将它们作为元数据保存到与该文档关联的单独文件中，因此当我打开文档时，我打开该文件并读取每个页面的数据（矩形），然后我可以渲染它们与每个页面（将它们成像为用户制作的每个页面中突出显示的矩形。每个页面可能很少。现在我的问题是在可以保存的数据结构中组织每个页面的矩形的最佳方法是什么/restore to a file? 这意味着索引以查找页面，然后从那里，在该页面中找到 rect(s) 的集合，并将特定文档的整个数据保存到该文件中。任何想法或想法将不胜感激。

谢谢，锦

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T20:30:03.067

I would suggest reading through the [Archives and Serialization Guide](https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/Archiving/Archiving.html#//apple_ref/doc/uid/10000047-SW1), specifically, how to use the [`NSKeyedArchiver`](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSKeyedArchiver_Class/Reference/Reference.html#//apple_ref/occ/cl/NSKeyedArchiver) and [`NSKeyedUnarchiver`](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSKeyedUnarchiver_Class/Reference/Reference.html#//apple_ref/occ/cl/NSKeyedUnarchiver) classes which can handle serializing arbitrary data to files or network connections.

For any Objective-C class you want to save, have the class conform to the [`NSCoding` protocol](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Protocols/NSCoding_Protocol/Reference/Reference.html#//apple_ref/occ/intf/NSCoding) and implement saving the `CGRect`s in the `encodeWithCoder` and restoring from save in `initWithCoder`.

# mobile-safari - 非响应式网站，在移动设备和平板电脑上格式不正确

> ID：15281057
> 
> 赞同：0
> 
> 时间：2013-03-07T20:26:09.350
> 
> 标签：mobile-safari

我似乎无法弄清楚为什么这个网站没有默认在移动设备和平板电脑上显示全屏（我只在 iphone 和 kindle fire 上查看）。它也在屏幕上左对齐，而不是居中。该网站还没有响应，所以我没有使用任何媒体查询。

[http://dev.dhmsounds.com/](http://dev.dhmsounds.com/)

当我有以下情况时，主页还会显示促销横幅的完整图像：

```
html,body{
margin:0;
padding:0;
max-width:100%;
height:100%;
background-color:#534f4b;
color:#534f4b;
z-index:-500;
border:0;

 }

 body{overflow-x: hidden;} 
```

该网站在 Firefox、Chrome 和 Safari 网络浏览器中运行良好（仍在 IE 中测试）。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T14:34:01.000

如果有人遇到同样的情况，我会发现问题。我在页脚的 ul 上有一个 width:100% 。这解决了所有内页的问题，但是对于主页，我还必须在我的主要促销横幅上添加一个溢出-x：隐藏，即使它已经应用于正文。

# javascript - firefox插件开发| 重写 browser.xul

> ID：15281059
> 
> 赞同：1
> 
> 时间：2013-03-07T20:26:18.023
> 
> 标签：javascript, firefox, firefox-addon, xul, firefox-addon-sdk

我想开发一个改变整个 UI 的 Firefox 插件，比如编写新的 chrome://browser/content/browser.xul 文件。

我是 js 开发人员，没有插件开发经验我在插件 sdk 文档中没有找到类似的东西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T10:03:53.640

AFAIK，此类功能可通过 XUL 覆盖在普通旧的非引导 Firefox 附加组件（那些需要重新启动 Web 浏览器才能安装）中获得。如果对您来说没问题，您可以创建这样的附加组件。它就像编写普通的 HTML（实际上是 XML）一样简单。在*MDN*上查找**Chrome 注册**和**XUL 覆盖**以获取详细信息。

 *如果您需要创建引导（无需重新启动）的 Firefox 扩展或者您必须使用 Addon SDK，那么您唯一的选择是观看新创建的浏览器窗口并手动修改它们。在这种情况下，您无法修改`chrome://browser/content/browser.xul`文件的来源。*

# magento - Limit number of products shown on homepage, list.phtml

> ID：15281060
> 
> 赞同：4
> 
> 时间：2013-03-07T20:26:21.697
> 
> 标签：magento, block, php

I am trying to limit the number of products from a certain category to 4 on my homepage.

The code I am trying to do this with is:

```
{{block type="catalog/product_list" column_count="4" category_id="13" template="catalog/product/list.phtml"}} 
```

Here are some of the things I have tried:

```
num_products="4"
limit = 4, limit="4"
count = 4, count="4"
_productCollection="4"
_productsCount="4" 
```

I have made a copy of list.phtml thinking there might be a way to change it in there, but was unable to find out a way.

At the very top pf list.phtml is this code:

```
<?php
    $_productCollection=$this->getLoadedProductCollection();
    $_helper = $this->helper('catalog/output');
?> 
```

And under grid view there is this:

```
<?php $_collectionSize = $_productCollection->count() ?>
    <?php $_columnCount = $this->getColumnCount(); ?>
    <?php $i=0; foreach ($_productCollection as $_product): ?>
        <?php if ($i++%$_columnCount==0): ?> 
```

Any ideas on to limit the products either within the block or the template file?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T20:33:53.470

更快的被替换`column_count=4`为`is_homepage=1`

并在 phtml 中添加：

```
 <?php if($this->getIsHomepage() && $i==4) break; ?> 
```

在这之前 ：

```
 <?php if ($i++%$_columnCount==0): ?> 
```

然后你的主页上只有 1 行（如果我想是 4 行）所以总共 4 个产品

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T20:34:03.153

尝试

```
 {{block type="catalog/product_list" limit="4" category_id="13" template="catalog/product/list.phtml"}} 
```

看

*   [http://www.mcnab.co/blog/e-commerce/magento/magento-displaying-products-in-a-static-block/](http://www.mcnab.co/blog/e-commerce/magento/magento-displaying-products-in-a-static-block/)
*   [通过 XML 的 Magento 产品收集限制](https://stackoverflow.com/questions/6959567/magento-product-collection-limit-via-xml)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-16T13:10:21.317

在 Magento 版本中。1.9.0.1 我找到了一个简单的解决方案，只需在 list.phtml 中添加这些行，只需找到它出现两次的 foreach 循环，因此需要在两个位置添加。

```
<?php $i=0; ?>
<?php foreach ($_productCollection as $_product): 
if($i == 6) break;
$i++;
?> 
```

我把它放了 6 条记录，您可以根据需要更改它。

谢谢

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-04T05:08:11.990

尝试这个： `$_productCollection=$this->getLoadedProductCollection(); $_productCollection->getSelect()->limit(5);`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-11-06T05:38:09.463

当我遇到这个问题时，他们搜索了很多网站，但让我理解它的网站却很少。我自己编辑了它，通过执行这些步骤来显示来自某些类别的产品的固定数量如下：- 转到

```
1) app\design\frontend\default\<your theme>\template\catalog\product
   copy list.phtml and save as list_new.phtml 
```

现在打开 list_new.phtml 并在结束 if 循环后搜索 '' 插入此代码

```
<?php if($i<=4): // for 4 product?> 
```

并在列表结束后关闭。

```
<?php endif // for 4 product?> 
```

代码将如下所示 -

```
<?php if ($i++%$_columnCount==0): ?>
    <ul class="products-grid">
<?php endif ?>
<?php if($i<=4): // for 4 product?>
    <li class="item<?php if(($i-1)%$_columnCount==0): ?>"> 
        // some code here
     </li>
<?php endif // for 4 product?> 
```

2) 现在转到 CMS>Pages>select home page>content> 并复制此代码（在此处更改您的类别 ID）

```
{{block type="catalog/product_list" name="product_list" category_id="<category id>" column_count="4"mode="grid" template="catalog/product/list_new.phtml"}} 
```

# google-visualization - Google Charts AnnotatedTimeLine 中的列颜色

> ID：15281067
> 
> 赞同：2
> 
> 时间：2013-03-07T20:26:54.503
> 
> 标签：google-visualization

我正在使用`AnnotatedTimeLine`Google 的图表。我的图表非常混乱（10-15 个数据集），我试图让它更容易处理。按照这些思路，我添加了一个带有复选框的“索引”来启用/禁用特定列。现在我想知道如何获取/设置每列的颜色/厚度/线条质量。

看起来您可以使用获取有关给定列的信息，`getColumnProperties( column # )`但是当我在调试器中查看返回的对象时，我看到很多方法但没有属性。

任何一个：

1.  在 js 调试器中查看“属性”对象是枚举属性名称/值的错误方法
2.  没有任何用户可设置的属性

关于我应该在哪里寻找的建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T00:45:38.053

您需要为图表中的每个数据值设置颜色。[请参阅此处](https://developers.google.com/chart/interactive/docs/gallery/annotatedtimeline#Configuration_Options)的文档。该`colors`选项将允许您为每组设置颜色（为每个不同系列的颜色传入一个数组）。`thickness`将设置线条粗细，但它是“一刀切”选项，不能为每个系列单独配置。[您可以在此处](http://code.google.com/apis/ajax/playground/?type=visualization#annotated_time_line_configuration)查看如何配置带注释的时间线图的示例：

```
function drawVisualization() {
  var data = new google.visualization.DataTable();
  data.addColumn('date', 'Date');
  data.addColumn('number', 'Sold Pencils');
  data.addColumn('string', 'title1');
  data.addColumn('string', 'text1');
  data.addColumn('number', 'Sold Pens');
  data.addColumn('string', 'title2');
  data.addColumn('string', 'text2');
  data.addColumn('number', 'Sold Papers');
  data.addRows([
    [new Date(2009, 1 ,1), 30000, null, null, 4645, null, null, 12345],
    [new Date(2009, 1 ,2), 14045, null, null, 2374, null, null, 44444],
    [new Date(2009, 1 ,3), 55022, null, null, 5766, null, null, 76545],
    [new Date(2009, 1 ,4), 75284, null, null, 1334, 'Out of Stock', 'Ran out of stock on pens at 4pm', 16345],
    [new Date(2009, 1 ,5), 41476, 'Bought Pens', 'Bought 200k pens', 6467, null, null, 41345],
    [new Date(2009, 1 ,6), 33322, null, null, 3463, null, null, 33665]
  ]);

  var annotatedtimeline = new google.visualization.AnnotatedTimeLine(
      document.getElementById('visualization'));
  annotatedtimeline.draw(data, {
                                //'allValuesSuffix': '%', // A suffix that is added to all values
                                'colors': ['blue', 'red', '#0000bb'], // The colors to be used
                                'displayAnnotations': true,
                                'displayExactValues': true, // Do not truncate values (i.e. using K suffix)
                                'displayRangeSelector' : false, // Do not sow the range selector
                                'displayZoomButtons': false, // DO not display the zoom buttons
                                'fill': 30, // Fill the area below the lines with 20% opacity
                                'legendPosition': 'newRow', // Can be sameRow
                                //'max': 100000, // Override the automatic default
                                //'min':  100000, // Override the automatic default
                                'scaleColumns': [0, 1], // Have two scales, by the first and second lines
                                'scaleType': 'allfixed', // See docs...
                                'thickness': 2, // Make the lines thicker
                                'zoomStartTime': new Date(2009, 1 ,2), //NOTE: month 1 = Feb (javascript to blame)
                                'zoomEndTime': new Date(2009, 1 ,5) //NOTE: month 1 = Feb (javascript to blame)
                               });
} 
```

由于它是一个闪存图表，因此您可以在选项之外进行很少的配置。如果您想更好地控制图表，我建议使用[注释列组合](https://developers.google.com/chart/interactive/docs/roles#whatrolesavailable)[折线图](http://code.google.com/apis/ajax/playground/?type=visualization#line_chart)。如果您想在下面有一个类似的可拖动滑块，允许您选择日期范围，我建议将折线图与[图表范围过滤器](http://code.google.com/apis/ajax/playground/?type=visualization#chartrangefilter_control)结合使用。

# cocos2d-iphone - Cocos2d：移除精灵时黑屏

> ID：15281073
> 
> 赞同：1
> 
> 时间：2013-03-07T20:27:25.527
> 
> 标签：cocos2d-iphone

我目前正在做教程[http://www.raywenderlich.com/25736/how-to-make-a-simple-iphone-game-with-cocos2d-2-x-tutorial](http://www.raywenderlich.com/25736/how-to-make-a-simple-iphone-game-with-cocos2d-2-x-tutorial)。当忍者星击中怪物时，我的反应部分有问题。我的代码是：

```
- (void)update:(ccTime)dt {    
    NSMutableArray *projectilesToDelete = [[NSMutableArray alloc] init];
    for (CCSprite *projectile in _projectiles) {

        NSMutableArray *monstersToDelete = [[NSMutableArray alloc] init];
        for (CCSprite *monster in _monsters) {
            if (CGRectIntersectsRect(projectile.boundingBox, monster.boundingBox)) {
                [monstersToDelete addObject:monster];
            }
        }

        for (CCSprite *monster in monstersToDelete) {
            [_monsters removeObject:monster];
            [self removeFromParentAndCleanup:YES];
        }

        if (monstersToDelete.count > 0) {
            [projectilesToDelete addObject:projectile];
        }
        [monstersToDelete release];
    }

    for (CCSprite *projectile in projectilesToDelete) {
        [_projectiles removeObject:projectile];
        [self removeChild:projectile cleanup:YES];
    }
    [projectilesToDelete release];

} 
```

这工作正常，不会崩溃，但是当我用弹丸击中怪物时，模拟器上的屏幕变黑。没有错误或任何东西。我记录了 CGRectIntersectRect，它按原样记录。问题是，当这种情况发生时，一切都会变黑。知道为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T20:53:10.570

我查看了教程，我在上面的评论中确定的行是：

```
[self removeChild:monster cleanup:YES]; 
```

试试看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T21:09:08.023

您正在执行 [self removeFromParentAndCleanup:YES] 从父级删除当前图层。所以你得到一个黑屏。

您可能想要从图层中移除子怪物。

# jquery - 动态创建的按钮和事件处理程序

> ID：15281080
> 
> 赞同：0
> 
> 时间：2013-03-07T20:27:45.600
> 
> 标签：jquery, getjson

我有下面的函数来生成按钮行。

有没有一种方法可以创建一个事件处理程序，该处理程序将使用每行的选定 ID（val.Id）？

谢谢

```
 $("#test").on("click", "input.select", function () {
            alert($(this).closest("tr").data("resultId"));
        });

        $("#btnSearch").click(function () {
            var searchTerm = $("#tbSearchField").val();
            $.getJSON('http://localhost:50151/api/principals/' + searchTerm, function (data) {
                var html = ""
                var sel = ""

                $.each(data, function (key, val) {
                    sel = val.Id
                    html += '<tr data-result-id="' + sel + '">'
                    html += '<td><input class="select" type="button" text="Select" value="Select"></td>'
                    html += '</tr>'
                });
                $(html).appendTo('#test');
            });
        }); 
```

下面是生成的 HTML 的样子：

```
<table id="test" border="0" style="border: none; width: 100%; padding: 2px;">
<tbody>
    <tr data-result-id="1999860918">
        <td>
            <input class="select" type="button" value="Select" text="Select">
        </td>
    </tr>
    <tr data-result-id="1169565143">
        <td>
            <input class="select" type="button" value="Select" text="Select">
        </td>
    </tr>
    <tr data-result-id="1404344114">
        <td>
            <input class="select" type="button" value="Select" text="Select">
        </td>
    </tr>
</tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T20:41:56.543

将 id 添加到行中，然后从那里获取它。

```
html += '<tr data-result-id="' + sel + '">' 
```

然后，在您当前的代码之上，

```
$("#test").on("click","td input[type=button]", function(){
    alert( $(this).closest("tr").data("resultId") );
}); 
```

删除 onlick 属性。

最终结果：

```
$("#test").on("click","input.select", function(){
    alert( $(this).closest("tr").data("resultId") );
});
$("#btnSearch").click(function () {
    var searchTerm = $("#tbSearchField").val();
    $.getJSON('http://localhost:50151/api/principals/' + searchTerm, function (data) {
        var html = ""

        $.each(data, function (key, val) {
            var sel = val.Id;
            html += '<tr data-result-id="' + sel + '">';
            html += '<td><input type="button" class="select" text="Select" value="Select"></td>';
            html += '</tr>';
        });
        $(html).appendTo('#test');
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T20:55:19.500

试试这个：

```
$("#btnSearch").click(function () {
            var searchTerm = $("#tbSearchField").val();
            $.getJSON('http://localhost:50151/api/principals/' + searchTerm, function (data) {
                var html = ""
                var sel = ""

                $.each(data, function (key, val) {
                    sel = val.Id
                    html += '<tr>'
                        html += '<td><input type="button" text="Select" value="Select" data-valId="' + sel +'"></td>'
                    html += '</tr>'
                });
                $(html).appendTo('#test');
            });
        });

$("input[type='button']").on('click',function(){
    console.log($(this).data("valId"));

}); 
```

# verilog - How do I fix the error on instance: Undefined variable B?

> ID：15281082
> 
> 赞同：3
> 
> 时间：2013-03-07T20:27:57.690
> 
> 标签：verilog

I want to compile this Verilog code, but I had errors in the instance of the `B` module in the `MultiP` module:

```
error 1: Undefined variable B.
error 2: near "Adder1": syntax error, unexpected IDENTIFIER. 
```

Code:

```
 module A(x,y,ci,co,sum);
     input x,y,ci;
     output co,sum;  
     reg co,sum;

     always @(x | y | ci)
       begin
       sum = x ^ y ^ ci;
       co = (x & y) | (ci & y ) | (ci & x);
     end  
endmodule

module B(ppk,x,y,ci,co,ppko);
  input x,y,ppk,ci;
  output ppko,co;
  reg ppko,co;

  always @(x | y | ci | ppk)
    begin
      A((x & y),ppk,ci,co,ppko);
   end 
endmodule

module MultiP(x,y,ppko);
  input [3:0] x;
  input [3:0] y;
  output [7:0] ppko;
  wire [12:0] cW;
  wire [12:0] ppW;

  always @(x | y )
  begin

    B Adder1( (x[0]&y[1]) , y[0], x[1], 0     , cW[0] , ppko[1] );
    B Adder2( (x[0]&y[2]) , y[1], x[1], cW[0] , cW[1] , ppW[0]  );
    B Adder3( (x[0]&y[3]) , y[2], x[1], cW[1] , cW[2] , ppW[1]  );
    B Adder4( 0           , y[3], x[1], cW[2] , cW[3] , ppW[2]  );

    B Adder5( ppW[1] , y[0] , x[2] , 0     , cW[4] , ppko[2] );
    B Adder6( ppW[2] , y[1] , x[2] , cW[4] , cW[5] , ppW[3]  );
    B Adder7( ppW[3] , y[2] , x[2] , cW[5] , cW[6] , ppW[4]  );
    B Adder8( cW[3]  , y[3] , x[2] , cW[6] , cW[7] , ppW[5]  );

    B Adder9( ppW[3] , y[0] , x[3] , 0      , cW[8]   , ppko[3] );
    B Adder10( ppW[4] , y[1] , x[3] , cW[8]  , cW[9]   , ppko[4] );
    B Adder11( ppW[5] , y[2] , x[3] , cW[9]  , cW[10]  , ppko[5] );
    B Adder12( cW[7]  , y[3] , x[3] , cW[10] , ppko[7] , ppko[6] );

  end    

endmodule 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T21:34:13.363

我想说代码还有其他更微妙的问题。

首先，确保没有声明隐式网络是一个好习惯。否则，拼写错误的网络名称可能会导致自动创建单比特网络，结果会出现奇怪的行为

```
`default_nettype none 
```

然后我建议在模块的端口声明中包含端口网络的网络类型声明

```
module A(input wire x,
     input wire y,
     input wire ci,

     output reg co,
     output reg sum);

   always_comb begin //Use this if you have a system verilog compiler
   always @* begin //Use @* as suggested otherwise 
      sum = x ^ y ^ ci;
      co = (x & y) | (ci & y ) | (ci & x);
   end  
endmodule

module B(input wire ppk,
     input wire x,
     input wire y,
     input wire ci,

     output reg co,
     output reg ppko); 
```

此外，我强烈建议您使用命名参数实例化，如下所示。

```
 A a(.x(x&y),
       .y(ppk),
       .ci(ci),
       .co(co),
       .ppko(ppko));

endmodule

module MultiP(input wire  [3:0] x,
          input wire  [3:0] y,
          output reg [7:0] ppko);

  wire [12:0] cW;
  wire [12:0] ppW;

   B Adder1(.ppk(x[0]&y[1]),
        .x(y[0]), 
        .y(x[1]), 
        .ci(0), 
        .co(cW[0]), 
        .ppko(ppko[1]));

... //The rest of all B instantiations

endmodule 
```

正如前面所说的，模块实例化并不是在 always 块中完成的。

我认为您需要阅读一本关于 Verilog 的好书。我个人从 Verilog HDL [http://www.amazon.com/Verilog-HDL-paperback-2nd-Edition/dp/0132599708/ref=sr_1_1?ie=UTF8&qid=1362691992&sr=8-1&keywords=verilog+hdl学习](https://rads.stackoverflow.com/amzn/click/com/0132599708)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T21:14:03.320

我对您的代码进行了最小的更改以使其编译：

```
module A(x,y,ci,co,sum);
     input x,y,ci;
     output co,sum;
     reg co,sum;

     always @* begin
       sum = x ^ y ^ ci;
       co = (x & y) | (ci & y ) | (ci & x);
     end
endmodule

module B(ppk,x,y,ci,co,ppko);
  input x,y,ppk,ci;
  output ppko,co;
  reg ppko,co;

    A A ((x & y),ppk,ci,co,ppko);
endmodule

module MultiP(x,y,ppko);
  input [3:0] x;
  input [3:0] y;
  output [7:0] ppko;
  wire [12:0] cW;
  wire [12:0] ppW;

    B Adder1( (x[0]&y[1]) , y[0], x[1], 0     , cW[0] , ppko[1] );
    B Adder2( (x[0]&y[2]) , y[1], x[1], cW[0] , cW[1] , ppW[0]  );
    B Adder3( (x[0]&y[3]) , y[2], x[1], cW[1] , cW[2] , ppW[1]  );
    B Adder4( 0           , y[3], x[1], cW[2] , cW[3] , ppW[2]  );

    B Adder5( ppW[1] , y[0] , x[2] , 0     , cW[4] , ppko[2] );
    B Adder6( ppW[2] , y[1] , x[2] , cW[4] , cW[5] , ppW[3]  );
    B Adder7( ppW[3] , y[2] , x[2] , cW[5] , cW[6] , ppW[4]  );
    B Adder8( cW[3]  , y[3] , x[2] , cW[6] , cW[7] , ppW[5]  );

    B Adder9( ppW[3] , y[0] , x[3] , 0      , cW[8]   , ppko[3] );
    B Adder10( ppW[4] , y[1] , x[3] , cW[8]  , cW[9]   , ppko[4] );
    B Adder11( ppW[5] , y[2] , x[3] , cW[9]  , cW[10]  , ppko[5] );
    B Adder12( cW[7]  , y[3] , x[3] , cW[10] , ppko[7] , ppko[6] );
endmodule 
```

正如 Marty 提到的，我将模块 A 中的始终阻止敏感度列表替换为`*`. 我摆脱了 A 和 B 实例周围的总是块。我为 A 实例添加了一个实例名称。

# mysql - MySQL Determine which condition was satisfied

> ID：15281083
> 
> 赞同：1
> 
> 时间：2013-03-07T20:28:03.250
> 
> 标签：mysql, sql, select, syntax

I was wondering if there is way to store where clause conditions and not calculate them more than once in order to determine which one was satisfied. Here is what I am talking about: `select col, col1>5 cond1, col2<400 cond2 from table where col1>5 or col2<400`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T20:51:41.607

我认为您不必担心*为每一行*`col1 > 5`计算多次简单的比较，但是为了节省输入更复杂的查询，您*可以*这样做：

 **```
SELECT col, col1 > 5 AS cond1, col2 < 400 AS cond2
FROM table
HAVING cond1 or cond2 
```

使用`having`而不是可以访问子句`where`中引入的别名。`select`**

# java - Android Apps crashes without explanation.

> ID：15281084
> 
> 赞同：-1
> 
> 时间：2013-03-07T20:28:05.987
> 
> 标签：java, android, eclipse, sdk

I am programming a tic-tac-toe android app, and I'm trying to use a for loop to make all the buttons in the array I put them in the same size.

However, when I put this line of code in to do that:

```
for (int count = 0; count < 9; count++){
    board[count].Height(ht);
} 
```

The app crashes when I try to run it, without explanation.

What is going on?

Here is the entire code for reference:

```
package tictacstartns;

import com.google.devtools.simple.runtime.components.android.Button;
import com.google.devtools.simple.runtime.components.Component;
import com.google.devtools.simple.runtime.components.HandlesEventDispatching;
import com.google.devtools.simple.runtime.components.android.Form;
import com.google.devtools.simple.runtime.components.android.HorizontalArrangement;
import com.google.devtools.simple.runtime.components.android.Label;
import com.google.devtools.simple.runtime.events.EventDispatcher;

public class TicTacStartNS extends Form implements HandlesEventDispatching {

   private Button btnOne;
   private Button btnTwo;
   private Button btnThree;
   private Button btnFour;
   private Button btnFive;
   private Button btnSix;
   private Button btnSeven;
   private Button btnEight;
   private Button btnNine;

   private Button btnXOchanger;
   private Button btnReset;
   private Button btnClearScore;

   private Label lblTurn;
   private Label lblSpace;
   private Label lblXWins;
   private Label lblXWinsCount;
   private Label lblOWins;
   private Label lblOWinsCount;
   private Label lblCatsGame;
   private Label lblCatsGameCount;

   int ht = 75;
   int wd = 75;
   float fs = 50.0f;

   boolean xGoesNow = true;

   Button board[]=    {btnOne,btnTwo,btnThree,btnFour,btnFive,btnSix,btnSeven,btnEight,btnNine};

      void $define() {

      HorizontalArrangement hr = new HorizontalArrangement(this);
      btnOne = new Button(hr);
      btnTwo = new Button(hr);
      btnThree = new Button (hr);

      hr = new HorizontalArrangement(this);
      board[3] = new Button(hr);
      board[4] = new Button(hr);
      board[5] = new Button(hr);

      hr = new HorizontalArrangement(this);
      board[6] = new Button(hr);
      board[7] = new Button(hr);
      board[8] = new Button(hr);

      for (int count = 0; count < 9; count++){
       board[count].Height(ht);
      }

   EventDispatcher.registerEventForDelegation(this, "JavaBridge", "Click");
}

   @Override
   public boolean dispatchEvent(Component component, String id, String eventName,
                         Object[] args) {

   if (component.equals(btnOne) && eventName.equals("Click")) {
       btnOne.Text(xGoesNow?"X":"O");
       xGoesNow = (xGoesNow?false:true);
       return true;
   } else if (component.equals(btnTwo) && eventName.equals("Click")) {
       btnTwo.Text(xGoesNow?"X":"O");
       xGoesNow = (xGoesNow?false:true);
       return true;
   } else if (component.equals(btnThree) && eventName.equals("Click")) {
       btnThree.Text(xGoesNow?"X":"O");
       xGoesNow = (xGoesNow?false:true);
       return true;
   }
   return false;
   }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T20:32:41.287

```
Button board[]=    {btnOne,btnTwo,btnThree,btnFour,btnFive,btnSix,btnSeven,btnEight,btnNine}; 
```

它包含所有这些参考。但它们被初始化为`null`.

当你这样做

`btnOne = new Button(hr);`

`board [0]`没有更新，所以它保持**，**`null`访问时导致 NPE。

这是因为尽管引用指向同一个对象，但当您重新分配一个引用的值时，它只特定**于**该引用。

举个简单的例子：

```
String str = null;
String [] arr= {str};
str = "hello";
System.out.println ("The value of the reference is " + arr[0]); 
```

输出是 参考值是`null`。

因此，在实际分配它们之前，请确保要分配给数组的引用指向 Object，或者进行双重分配，一个 for`btnOne`和一个 for `board[0]`。但是，由于您已经拥有数组，`btnOne`因此是多余的。

# php - Display same values in rows in mysql and print column value and it's count in php

> ID：15281086
> 
> 赞同：0
> 
> 时间：2013-03-07T20:28:25.723
> 
> 标签：php, mysql

I want to make a voting list kind of thing. I have a form that saves the entered data to mysql database. Suppose a user entered "Something". It'll be saved in column called "bname". Now what I want is Suppose 10 people entered "Something" or "something"(case sensitivity to be ignored automatically if there is a way?) then I want: "Something - 10" to be printed in php page.

My try:

```
$query="SELECT bname, count 
FROM brandnames 
GROUP BY bname 
HAVING COUNT(*) > 0
LIMIT 11";

$result=mysqli_query($con,$query) or die('Error!: ' . mysqli_error($con));

$query2="SELECT count
FROM brandnames
GROUP BY count
HAVING COUNT(*) > 0
ORDER BY count DESC
LIMIT 11";

$result2=mysqli_query($con,$query2) or die('Counting Error!: ' . mysqli_error($con));

while ($row=mysqli_fetch_assoc($result))
{
while ($row2=mysqli_fetch_assoc($result2))
{
echo ($row['bname'] . '&nbsp' . '-' . '&nbsp' . $row2['count'] . '<br />');
}
} 
```

This thing prints Something - 4 Something - 3

I do not want to use this method. I posted this as if I don't post someone will point me out to post. :/

I don't want to use "count" column. I want a simple voting list as I mentioned above.

Thanks, :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T20:39:11.653

您要查找的查询应该类似于

```
select bname, count(*) as nbr
  from brandnames
 group by bname
 order by nbr desc
limit 11; 
```

count(*) 将返回按 bname 组合在一起的行数。区分大小写取决于您的联盟。如果它是区分大小写的联盟，则需要改为按 lower(bname) 分组。请注意，这可能会阻止索引为此查询工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T21:38:50.160

感谢大家。我开始知道如何做到这一点。希望这对某人有所帮助:) 特别感谢@Andreas Wederbrand

```
<?php

//Create Connection

$query="SELECT columnname, count(*)
AS alias
FROM tablename
GROUP BY columnname
ORDER BY alias DESC";

$result=mysqli_query($con,$query) or die('Counting Error!: ' . mysqli_error($con));

while ($row=mysqli_fetch_array($result))
{
echo ($row['columnname'] . '&nbsp' . '-' . '&nbsp' . $row['alias'] . '<br />');
}

//Close Connection
?> 
```

# ios - Apple push notifications - delivery receipt

> ID：15281087
> 
> 赞同：1
> 
> 时间：2013-03-07T20:28:31.470
> 
> 标签：ios, background, push-notification

I wrote a simple messaging system, which allows sending brief messages from web interface to devices, in form of push notification.

On android, everything went well, once device receives notification is sends delivery confirmation receipt back to server, then read acknowledgement. Obviously, delivery confirmation often happens while app is running in background or phone is asleep.

I wrote similar app for iOS. How surprised I was that application: didReceiveRemoteNotification is not called when app is not active!

Is it really impossible to track message delivery **without user interaction** when app is not active? Others have suggested keeping log of messages on server and sending them when app opens, but this still requires user interaction.

Is there a way around apple restriction on background services? Can I somehow make my app use sound or location service, to allow simple POST request while in background?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-08-20T20:49:42.150

在 iOS7 中，您可以使用带有后台获取的推送通知，这是一个设置了 content-available 标志的远程通知。有效负载示例：{aps: {content-available: 1}}。在这种情况下，iOS 将唤醒您的应用程序（有一些限制，请参阅：[如果用户强制退出，iOS 会在后台启动我的应用程序吗？](https://stackoverflow.com/questions/19068762)）。

唤醒您的应用程序后，您有 30 秒的时间向您的服务器发送推送通知回执确认。您还必须在 Target 后台模式中启用“Background fetch”功能并更新 AppDelegate 以包含此方法：

```
- (void)application: (UIApplication *)application didReceiveRemoteNotification: 
  (NSDictionary *)userInfo fetchCompletionHandler: 
  (void (^)(UIBackgroundFetchResult))completionHandler 
```

所以这需要你做一些工作。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T20:33:22.093

滥用后台服务是让您的应用程序被拒绝的好方法。Apple 对应用程序可以在后台执行的操作非常严格。

作为用户，如果我发现我安装的某个应用无缘无故地在后台发出 Web 请求，它会被迅速删除！

推送通知是一种单向消息 - 甚至无法保证通知已送达，更不用说阅读了。[我建议您在此处](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ApplePushService/ApplePushService.html#//apple_ref/doc/uid/TP40008194-CH100-SW9)阅读 APNS 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-18T13:20:42.017

当应用程序不处于活动状态时应用程序：不会调用 didReceiveRemoteNotification 方法。

如果您想在应用程序未处于活动状态时跟踪通知信息，请按照以下步骤操作。

应用程序didFinishLaunchingWithOptions：每次打开应用程序时都会调用该方法

通过这个方法，我们得到了一个叫做launchOptions的NSDictionary对象。从这个 launchOptions 字典中，我们将以字典形式获取键 UIApplicationLaunchOptionsRemoteNotificationKey 的通知数据

从下面找到代码：

```
 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions{
NSDictionary *remoteNotify = [launchOptions objectForKey: UIApplicationLaunchOptionsRemoteNotificationKey];
//Accept push notification when app is not open
if (remoteNotify)         // it is only true when you get the notification{
    // use the remoteNotify dictionary for notification data}} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-01T17:51:09.930

对于 iOS，没有任何直接的方式可以提供有关实际交付的任何信息，但我找到了一种我尝试过的解决方法，它工作正常。

使用“通知服务扩展”，它的主要用途是提供丰富的通知，所以它基本上会在新推送到来时唤醒我们的应用程序，并给大约 30 秒的时间来执行我们的任务，例如下载图像以显示在通知中。我们可以使用这个应用唤醒功能来调用我们的后端。

因此，发送一些带有有效负载的唯一 id，并通过此方法使用推送 id 调用您的后端服务器，通过这种方式，您可以确保推送通知已传递到设备中。

这将适用于应用程序的所有状态，即使在终止状态下也是如此，因此这是完整的证明，我们可以依靠此解决方法来获取交付信息。

参考链接：[https ://developer.apple.com/documentation/usernotifications/unnotificationserviceextension](https://developer.apple.com/documentation/usernotifications/unnotificationserviceextension)

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2013-03-07T20:33:12.967

[http://cydia.saurik.com/package/backgrounder](http://cydia.saurik.com/package/backgrounder)

检查一下，对于源，单击开发人员页面。

如果它不是苹果的方式，那就没有办法了。

这就是越狱的用武之地。您可能必须使您的应用越狱兼容并利用更多功能。

我会说你正在寻找什么，制作一个新版本的Backgrounder，以你需要的方式工作。

# java - 检查数组是否有空元素

> ID：15281090
> 
> 赞同：1
> 
> 时间：2013-03-07T20:28:38.243
> 
> 标签：java, arrays, null, nullpointerexception

所以我用 5 个私有字段创建了自己的类：每个都是一个具有预设长度的数组。这是我创建表格的方式，其中每个数组都是一列，并且它们具有预设长度，因为并非每个单元格都包含一个元素（因此，不使用任何动态）。

无论如何，我的问题是：我可以检查特定数组的特定单元格是否包含“null”吗？使用 .equals(null) 会产生 nullpointerexception :(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T20:29:57.883

当您调用时，`.equals(...)`您调用对象的方法。如果为空，则没有方法。因此空检查是这样的：

```
if (myArray[position] == null) {
    ....

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T20:30:58.243

不要做 .equals(null) 但 == null：

```
if( the_array[i] == null ) {
  //...
} 
```

考虑通过二维数组构建一个表。例子：

```
TheClass my_array[][] = new TheClass[10][5]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T20:31:23.473

你应该使用

```
if (cell[i] == null){

} 
```

因为您正在测试参考相等性。在 cell[i] 实际上为 null 的情况下， null 没有 equals 方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T20:35:21.490

混合 for 循环和`null`构造

```
for(Integer ints : intNum) {
    if(intNum != null) {
      //valid
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-07T20:36:04.327

我更好奇你为什么要制作 5 个阵列？你听说过多维数组吗？在这种情况下，也许这就是您真正需要的。

像这样的数组 fx: int[][] arrayName = new int[3][3];

将代表一个包含 3 行和 3 列的数组。

也许您已经知道这一点，但是如果您只想要一个类似表格的结构，那么制作五个不同的数组对我来说似乎很奇怪。

# validation - MS Access 中我的 DateFrom 和 DateTo 的表验证

> ID：15281097
> 
> 赞同：1
> 
> 时间：2013-03-07T20:29:03.657
> 
> 标签：validation, datetime, ms-access

我可以在我的表格中放入什么来验证，以便我的“DateFrom”总是在我的“DateTo”之前，这样我就可以得到一个弹出框，说明日期不能晚于日期？

我目前正在使用表格中的验证规则和验证文本

```
 <="DateTo" 
```

但它没有验证！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T20:45:30.400

Access 不允许您在字段的验证规则中引用另一个字段。*请改用表格*属性表中的验证规则。

![表验证规则属性](../Images/ac0e73097dd11fe8ecba4fe25b0a78a0.png)

确保将字段名称括在方括号中，如图所示。否则，Access 可能会用引号将它们括起来。这行不通，因为该规则将基于两个字符串的比较。

如果您想要在违反规则时 Access 显示的错误文本以外的内容，还请提供您自己的验证文本消息。

# c# - Visual Studio 改变了 Ctrl-KD 的工作方式

> ID：15281099
> 
> 赞同：16
> 
> 时间：2013-03-07T20:29:07.547
> 
> 标签：c#, javascript, vb.net, visual-studio, formatting

在 Visual Studio（我使用的是 2012）中，是否有任何方法可以编辑组合处理其**自动格式化**的方式`Ctrl`？`K``D`

 **我的意思不是改变这些组合键的作用，我的意思是*扩展自动格式化的方式*。

它处理*tabbing*等的方式很好，我更关心**white-space**。

我们正在使用一个插件，可以轻松对齐变量属性，使其易于阅读。像这样：

```
var test            = 'whatever',
    another         = 'this one',
    alignedProperly = 'yay'; 
```

似乎很挑剔，但是在非常大的对象文字中，能够阅读它们非常有帮助！

**有没有人找到自动格式化规则的位置，是否可以编辑/更改它们？**（在选项中的任何地方都找不到它们！）

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-07T20:36:48.187

您是否在寻找：

> 工具 > 选项 > 文本编辑器 > C# > 格式 > 间距 > 设置其他间距选项 > 忽略声明语句中的空格

这是在 VS 2010 中，但我想 2012 应该有点相似。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-05-10T07:20:38.783

在 VS 2017 中：

> 工具 > 选项 > 文本编辑器 > C# > 代码样式 > 格式 > 间距 > 设置其他间距选项 > 忽略声明语句中的空格

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-08-25T10:32:04.210

此功能已更改为 Ctrl+K、Ctrl+E。这称为代码清理。单击 VS 页面底部的“除尘器”，然后单击“配置代码清理”以​​分配特定操作。

[代码清理](https://i.stack.imgur.com/fAAi7.png)**

# c - Compiling problems using linux terminal

> ID：15281106
> 
> 赞同：0
> 
> 时间：2013-03-07T20:29:43.473
> 
> 标签：c, linux, compilation

So I'm attempting to compiling a program using the linux command line. I'm using linux through a virtual machine. I compile using

```
gcc -lm calc.c -o calc 
```

where `calc.c` is the source file and I'm compiling with `-lm` because it includes `math.h`. I'll make changes to the source code but it does not reflect when I run. In fact, that line of code does not even produce calc.exe....Help??

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T20:33:26.150

> 事实上，那行代码甚至不会产生 calc.exe

您需要阅读 gcc 和 Linux，可执行文件在 Linux 中不需要任何特定扩展，它只需要可执行权限。（.exe 在 windows 上使用）

'gcc -lm calc.c -o 计算'

此行将生成一个名为的可执行文件（标志`calc`后面的名称是您的可执行文件的名称）。`-o`你运行它：

`./calc`

您可以通过 验证它是否可执行`ls -l calc`，您将看到如下内容：

```
-rwxrwxr-x 1 [owner/group names] [file size] [date you built] [time you built] calc 
```

输出中的 x 表示它是可执行的。

# javascript - 如果与 match() 一起使用，正则表达式不起作用

> ID：15281107
> 
> 赞同：0
> 
> 时间：2013-03-07T20:29:48.827
> 
> 标签：javascript

谁能告诉我为什么以下不起作用？：

小提琴：http: [//jsfiddle.net/anderslyman/86NHs/](http://jsfiddle.net/anderslyman/86NHs/)

JavaScript：

```
var value = 'lorem ipsum dolor sit amet';
var wordLength = 11;
var find = new RegExp('\b[a-zA-Z]{2,' + wordLength + '}\b');
console.log(value.match(find));
console.log(value.match(/\b[a-zA-Z]{2,11}\b/)); 
```

我希望这两个`console.log()`语句都输出相同的东西，因为正则表达式是相同的......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T20:30:41.960

[`\`在 strings 中已经具有特殊含义](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Values,_variables,_and_literals#Using_special_characters_in_strings)，因此您需要对它们进行双重转义。

```
var find = new RegExp('\\b[a-zA-Z]{2,' + wordLength + '}\\b'); 
```

[http://jsfiddle.net/mattball/35Msf](http://jsfiddle.net/mattball/35Msf)

# c# - 在运行时加载“松散”的本地化资源？

> ID：15281109
> 
> 赞同：1
> 
> 时间：2013-03-07T20:29:58.700
> 
> 标签：c#, wpf, localization, internationalization

我有一个 Web 服务，它为我提供生成的 .resx（仅限 XML），然后我将其转换为二进制`.resources`文件。我目前正在使用`al.exe`. 以下是我的论点：

```
/t:lib /c:{culture} /embed:"{.resource input}" /out:"{.dll output}" 
```

通过加载这个程序集`Assembly.LoadFrom(file)`工作正常，但我相信我的程序集没有正确生成。它没有可调用的类型、命名空间或方法，因此`ResourceManager`显然也没有。

本质上，我只是想知道是否有可能生成、加载和利用没有我的项目在编译时知道的类或命名空间的资源。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T01:42:57.710

您的程序集是附属程序集。来自[MSDN](http://msdn.microsoft.com/en-us/library/21a15yht%28v=vs.71%29.aspx)：

> 根据定义，附属程序集只能包含资源。它们不能包含任何可执行代码。

如果您想访问此程序集的资源 - 类似的代码应该可以工作：

```
ResourceManager rm = new ResourceManager(
    "ResourceTest.Properties.Resources", 
     Assembly.LoadAssembly(file));
MessageBox.Show(rm.GetString("helloWorldString")); 
```

此外，来自 MSDN 的文章：[演练：从附属程序集加载资源](http://msdn.microsoft.com/en-us/library/cc668131%28v=vs.90%29.aspx)显示了如何从附属程序集加载资源字符串的另一种方法。

# c - 为什么我的内核线程只执行一次？

> ID：15281114
> 
> 赞同：1
> 
> 时间：2013-03-07T20:30:14.327
> 
> 标签：c, linux, linux-kernel

[在这篇文章之后](http://tuxthink.blogspot.co.il/2011/02/kernel-thread-creation-1.html)，我在我的内核模块中实现了：

```
static int val = 1;
static char thread_name[128] = "my thread name"; 
```

在初始化中：

```
thread1 = kthread_run(thread_fn, &val, thread_name); 
```

这就是功能

```
int thread_fn(void *data)
{
    unsigned long j0,j1;
    int delay = 60*HZ;
    j0 = jiffies; 
    j1 = j0 + delay; 

    printk(KERN_INFO "here");

    while (time_before(jiffies, j1)) 
        schedule();
    return 1;
} 
```

为什么这只执行1次？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T20:48:46.813

这是任何线程的正常行为。如果你想要一个周期性的行为，你需要一个循环`thread_fn`。
这是一个很好的内核线程文档：[https ://prof.hti.bfh.ch/myf1/adv-linux/courseNotes/kthread-intro-1.2.pdf](https://prof.hti.bfh.ch/myf1/adv-linux/courseNotes/kthread-intro-1.2.pdf)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T20:51:55.513

基于对[如何在 rmmod 上停止 Linux 内核线程的公认答案？](https://stackoverflow.com/questions/5280693/kernel-thread-implementation)，以及我自己的一些闲逛，我怀疑有两个可能的原因：

1.  您的函数返回。

2.  你的线程状态是`TASK_INTERRUPTIBLE`，所以调用`schedule()`永远不会返回。

如果您将主体包装在一个`while (! kthread_should_stop() )`循环中，并确保您的任务在`TASK_RUNNING`调用之前处于状态`schedule()`，那么它将继续运行：

```
int thread_fn(void *data)
{
    unsigned long j1;
    int delay = 5*HZ;  /* use a 5-second delay instead of a 60-sec one */

    int count = 0;
    while (! kthread_should_stop() ) {
        j1 = jiffies + delay; 

        printk(KERN_INFO "here %d\n", ++count);

        while (time_before(jiffies, j1)) {
            set_current_state(TASK_RUNNING);
            schedule();
        }
    }
    return 1;
} 
```

# angularjs - 视图未更新

> ID：15281115
> 
> 赞同：0
> 
> 时间：2013-03-07T20:30:25.000
> 
> 标签：angularjs

我正在尝试使用 Angular JS 创建一个简单的 UI，但似乎无法弄清楚为什么控制器 rpc 完成后视图没有得到更新。

```
<!-- search result view -->
<p>size is {{resultCount}}</p>

<!-- main view which has ng-view -->
<html ng-app="exApp">
    <body ng-controller="exApp.MainCtrl">
        <!-- form which submits to SearchCtrl -->
        <form name="searchform" ng-controller="exApp.SearchCtrl" ng-submit="search()">
            <input type="text" ng-model="queryString">
        </form>
        <div class="view-panel" ng-view></div>
    </body>
</html> 
```

```
exApp.MainCtrl = function ($scope) {
    $scope.queryString = '';
    $scope.resultCount = 0;
}

exApp.SearchCtrl = function ($scope, $http) {
    function display(response) {
        $scope.poreqs = response["resource"];
        // should update the html, but does not
        $scope.resultCount = $scope.poreqs.length;
    }
    $scope.search = function () {
        $http.get('/search?q=' + $scope.queryString).success(display);
    };
}; 
```

# android - 如何避免为每个属性输入“android”？

> ID：15281116
> 
> 赞同：6
> 
> 时间：2013-03-07T20:30:27.963
> 
> 标签：android, eclipse, autocomplete, attributes

我是 Android 开发的新手，也是一名设计师兼前端人员。

如何避免`android:`每次添加属性时都必须输入？

在其他文本编辑器 ( [TextMate](http://en.wikipedia.org/wiki/TextMate) ) 中，我可以通过键入已知触发器来触发片段并`tab`自动完成单词。Eclipse有类似的东西吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T20:32:49.467

只需开始输入关键字的第二部分（紧随其后`android:`并按`Ctrl`+ `Space`，Eclipse 将为您插入所需的关键字，前缀为`android:`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-07T21:28:40.770

您可以通过在新行的开头按`Ctrl`+来调出自动完成对话框。`Space`

此外，我想添加一个注释，说明您为什么需要输入`android:`（以及如何将其更改为您想要的任何内容）。

如果您查看布局文件中的第一个元素，将会有如下一行：

```
xmlns:android="http://schemas.android.com/apk/res/android" 
```

如果您在`android`此处更改单词，那么这将是您需要输入的前缀 - 所以如果您改为设置

```
xmlns:a="http://schemas.android.com/apk/res/android" 
```

那么你所有的属性只需要在前面加上`a:`，例如在这个例子中：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:a="http://schemas.android.com/apk/res/android"
    a:layout_width="fill_parent"
    a:layout_height="fill_parent"
    a:orientation="vertical" >

    <TextView
        a:layout_width="fill_parent"
        a:layout_height="wrap_content"
        a:text="@string/hello" />

</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-07T20:36:55.027

首先使用`Ctrl`+ `Space`。然后开始输入任何内容。使用箭头键浏览列表并`Enter`选择一个。

:-)

# android - 是否保证 PackageManager.getInstallerPackageName() 始终返回非“空”字符串？

> ID：15281117
> 
> 赞同：0
> 
> 时间：2013-03-07T20:30:31.493
> 
> 标签：android, android-package-managers

是否保证[`PackageManager.getInstallerPackageName()`](http://developer.android.com/reference/android/content/pm/PackageManager.html#getInstallerPackageName%28java.lang.String%29)总是返回一个非`null`字符串？

```
PackageManager myapp= this.getPackageManager(); 
String installer = myapp.getInstallerPackageName("com.MyPackage");
if (installer == null) {
    // ...
} 
```

我们正在考虑这个选项与谷歌许可。但是应用程序应该在没有网络访问的情况下以离线模式运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-05T21:24:44.057

据我所知，这很容易被欺骗，无论是使用 ADB（[**这里**](http://www.strazzere.com/blog/2010/09/getinstallerpackagename-take-that-mr-pirate/)）还是通过代码（[**这里**](http://developer.android.com/reference/android/content/pm/PackageManager.html#setInstallerPackageName%28java.lang.String,%20java.lang.String%29)）。

我没有测试它们中的任何一个，但似乎这种方法没有很好的保护。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-17T11:48:10.140

如果您通过朋友分享安装应用程序 getInstallerPackageName 给 null

# css - 按比例放大缩小（ctrl +-）整个网页纯css

> ID：15281120
> 
> 赞同：0
> 
> 时间：2013-03-07T20:30:36.673
> 
> 标签：css

我希望我的页面放大或使用 ctrl + 或 - 按比例放大，我不知道如何做到这一点。任何帮助都会非常好。[http://jsfiddle.net/3Lhe7/14/](http://jsfiddle.net/3Lhe7/14/) 添加这个 css 只是为了我可以在 jsfiddle 链接我的演示。

```
body {
max-width: 1000px;    
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T20:34:33.543

```
 body {
   zoom: 2;  /* or any zoom amount you want */
} 
```

# php - PHP拆分/分解字符串

> ID：15281124
> 
> 赞同：1
> 
> 时间：2013-03-07T20:30:44.917
> 
> 标签：php, regex, split, explode

我想在 PHP 中拆分/分解一个字符串。字符串如下所示：

```
<strong>Label</strong><p>Value</p> 
```

有了这个结果：

```
array(
    '<strong>Label</strong>',
    '<p>Value</p>'
) 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T20:40:07.083

你可以这样做：

```
$string = "<strong>Label</strong><p>Value</p>";
$pos = strpos($string,'<p>');
$array = array();
$array[] = substr($string, 0,$pos);
$array[] = substr($string,$pos); 
```

或使用 preg_match：

```
preg_match('%(.*g>)(.*)%',$string,$array);
//$array[1] = '<strong>Label</strong>'
//$array[2] = '<p>Value</p>' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T20:36:21.590

这不是总是比`preg`函数快吗？

```
<?php
$str = "<strong>Label</strong><p>Value</p>";
$str = explode( "g><p", $str );
$str = implode( "g>~<p", $str);
$str = explode( "~", $str ); 
```

请注意：标签可能会嵌套，逻辑会变得困难。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T20:34:35.220

如果不做一些有点骇人听闻的事情，你将无法通过爆炸来实现这一点：

```
$str = "<strong>Label</strong><p>Value</p>";
$strExp = explode("<p>", $str);
$strExp[1] = "<p>" . $strExp[1]; 
```

我建议改用正则表达式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T20:35:24.517

这不是拆分的工作方式。您需要将 preg_split 与 PREG_SPLIT_DELIM_CAPTURE 标志一起使用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-07T20:46:35.470

这应该可以解决问题；

```
$string = "<strong>Label</strong><p>Value</p>";
$array = explode("\t", str_replace("><", ">\t<", $string)); 
```

# sql - 在select语句中动态编号不同的sql行

> ID：15281125
> 
> 赞同：5
> 
> 时间：2013-03-07T20:30:48.647
> 
> 标签：sql, sql-server, tsql, row-number

我将如何在与此类似的查询中动态编号行：

```
Select distinct name from @table where %rules 
```

当我添加 ROW_NUMBER() OVER() 时，我失去了独特的属性，它返回表中的每个元素，并带有唯一的行号。

```
Select distinct ROW_NUMBER OVER(order by name), name from @table where %rules 
```

我不想创建一个临时表，否则我会为临时表创建一个主键并让它以这种方式插入行号。

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T20:32:28.107

像这样使用。

```
select ROW_NUMBER() OVER(order by name), * from 
(Select distinct name from @table where %rules) as mytable 
```

# javascript - JavaScript 对象文字符号未按预期工作

> ID：15281127
> 
> 赞同：0
> 
> 时间：2013-03-07T20:30:58.013
> 
> 标签：javascript, jquery

我正在使用 jQuery 1.7。我正在尝试了解命名空间应该如何工作。我可以让某些部分工作，但并不完全像我期望的那样工作。我希望当输入表单元素时，函数 checkPasswordForm 将触发并提醒该字段的值。

我有这个表单元素。

```
<input type='text' id='Password'> 
```

我希望这段代码将创建一个命名空间、创建一个对象并创建一个函数。

```
// SET NAMESPACE
var nsPASS = {

$Password: $('#Password'),

checkPasswordForm: function() {
    var Password = $Password.val();
    alert(Password);
}

};
nsPASS.$Password.keyup(nsPASS.checkPasswordForm); 
```

这段代码虽然没有运行。我收到一条错误消息，提示 $Password 未定义。我修改了代码一千种不同的方法来让它工作。下面的版本按我的预期工作。完成任务所需的代码似乎更多。

```
// SET NAMESPACE
var nsPASS = {

$Password: $('#Password'),

init: function() {
    $Password = $('#Password');
},

checkPasswordForm: function() {
    var Password = $Password.val();
    alert(Password);
}

};

nsPASS.init();
nsPASS.$Password.keyup(nsPASS.checkPasswordForm); 
```

在第二个示例中，如果我删除 nsPASS.init()，代码会中断。如果我删除 Password: $('#Password') 代码会中断。

我可以定义对象然后在函数中立即使用它们吗？为什么第一个示例有效，而第二个示例无效？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T20:35:29.553

JavaScript 没有命名空间，只有对象。如果您对对象的属性具有某些值，则不能像变量一样仅使用属性名称，您将始终需要通过对象对其进行寻址。

> 在第二个示例中，如果我删除 nsPASS.init()，代码会中断。如果我删除 Password: $('#Password') 代码会中断。

这是因为一个是隐式全局变量（在函数中分配，在`init`函数中使用`checkPasswordForm`） - 另一个是对象的属性`nsPass`（在对象文字中初始化，在`nsPASS.$Password.keyup(…)`调用中使用）。所以改成

```
var Password = nsPass.$Password.val(); 
```

如果您正在编写总是在命名空间对象的上下文中调用的函数（作为方法），您可以使用[`this`关键字](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/this)作为对该对象的引用。然而，您的特定函数将被称为事件处理程序，因此其上下文就是`#Password`输入本身。您可以轻松地将其更改为

```
var Password = $(this).val(); // or shorter: this.value; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T20:33:22.923

回到您使用的第一个代码块。你应该使用这个：

```
var Password = nsPASS.$Password.val(); 
```

像这样的对象就是这样，您必须始终记住指定在哪里查找变量；）

# java - 将 XML 文件解析为链接的 java 对象

> ID：15281133
> 
> 赞同：0
> 
> 时间：2013-03-07T20:31:10.970
> 
> 标签：java, xml, parsing

我在 XML 文件上使用 SAX 解析器来创建相互引用的对象。

```
<?xml version="1.0"?>
<xml encoding="UTF-8" version="1.0"> 
 <course number="CSC212">
  <textbook name="BookFor212"/> 
 </course> 
 <course number="CSC241"> 
  <prereq number="CSC212"/>
  <textbook name="BookFor241"/> 
  <textbook name="AnotherBookFor241"/> 
 </course> 
 <course number="CSC455"> 
  <prereq number="CSC241"/> 
  <prereq number="CSC365"/> 
  <textbook name="BookFor455"/> 
 </course> 
 <course number="CSC365"> 
  <prereq number="CSC241"/> 
  <textbook name="BookFor365"/> 
  <textbook name="AnotherBookFor365"/> 
  <textbook name="YetAnotherBookFor365"/> 
 </course> 
</xml> 
```

因此，我创建了一门课程并将教科书和先决条件添加到课程中的相应数组中，最后我将该课程添加到数组中。解析后，系统会提示用户输入课程编号，程序会输出信息，包括先决条件和所需的所有内容，以及他们的教科书和先决条件。

```
public class Course {
private String number;
private Course[] prereqs = new Course[5];
private int pCounter = 0;
private Textbook[] books = new Textbook[5];
private int tCounter = 0;

public Course(String n) {
  number = n;
}

public String getNumber() {
  return number;
}

public void addPrereq(Course prereq) {
  prereqs[pCounter++] = prereq;
}

public void addTextbook(Textbook book) {
  books[tCounter++] = book;
}

public String toString() {
  String retVal = "Course: " + number + (tCounter == 0 ? ", No books." : ", textbooks:   ");
  for (int i = 0; i < tCounter; i++)
    retVal += books[i].toString() + " ";
  retVal += "\n" + (pCounter == 0 ? "No prerequisites.\n" : "Prerequisites:\n");
  for (int i = 0; i < pCounter; i++)
    retVal += prereqs[i].toString();
  return retVal + "End of course " + number + ".\n";
}
} 
```

问题是在添加先决条件时，我会查看已创建课程的数组，如果存在则使用它，如果不存在则创建一个新课程。因此，如果它不存在，我会添加一个除了编号之外没有任何信息的课程。因此，我最终选择了具有先决条件 CSC365 的 CSC455 课程，但没有列出教科书或先决条件。我该怎么做才能使先决条件成为完成的课程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T21:05:00.873

你需要维护一个`Map`来查找你的课程。每当您遇到新的`Course`或参考时，您都会检查地图，然后将新`Course`的 s 放入地图中。这样，您可以`Course`从 req 创建一个，然后稍后添加信息。

我建议在你的中使用`List`s 或`Set`s ，`Course`因为这意味着`ArrayOutOfBounds`当你有超过 5 本教科书时你不会得到一个。

```
public class Course {

    private String number;
    private List<Course> prereqs = new LinkedList<Course>();
    private List<Textbook> books = new LinkedList<Textbook>();

    public Course(String n) {
        number = n;
    }

    public String getNumber() {
        return number;
    }

    public void addPrereq(Course prereq) {
        prereqs.add(prereq);
    }

    public void addTextbook(Textbook book) {
        books.add(book);
    }

    public String toString() {
        String retVal = "Course: " + number + (books.isEmpty() ? ", No books." : ", textbooks:   ");
        for (final Textbook  book : books) {
            retVal += book.toString() + " ";
        }
        retVal += "\n" + (prereqs.isEmpty() ? "No prerequisites.\n" : "Prerequisites:\n");
        for (final Course course : prereqs) {
            retVal += course.toString();
        }
        return retVal + "End of course " + number + ".\n";
    }
} 
```

现在您需要存储一个`Map<String, Course>`并添加一个`getCourse()`您使用的方法，而不是构建新课程 - 这是一个工厂模式：

```
private class CourseFactory {

    private final Map<String, Course> courseMap;

    public CourseFactory(final Map<String, Course> courseMap) {
        this.courseMap = courseMap;
    }

    public Course getCourse(final String name) {
        Course course = courseMap.get(name);
        if(course == null) {
            course = new Course(name);
            courseMap.put(name, course);
        }
        return course;
    }
} 
```

所以现在在你的解析器顶部创建一个`CourseFactory`并使用它来获取你的课程。它将确保您始终引用同一个。

# highcharts - 带有日期时间 X 轴列的 Highchart 堆积列太薄

> ID：15281134
> 
> 赞同：4
> 
> 时间：2013-03-07T20:31:18.640
> 
> 标签：highcharts, stacked

我正在尝试向我的用户显示他们每台相机每天录制的视频数量。为此，我想使用堆叠的背面（每个堆叠显示使用给定相机录制的视频的数量）。以下是我传入的选项：

```
var options = { 
    "title": { 
        "text": null 
    },
    "legend": { 
        "layout": "vertical",
        "style": {  },
        "enabled": false 
    },
    "xAxis": { 
        "type": "datetime",
        "minTickInterval": 86400000 
    },
    "yAxis": { 
        "stackLabels": { "enabled": true },
        "title": { "text": null } 
    },
    "tooltip": { "enabled": true },
    "credits": { "enabled": false },
    "plotOptions": { 
        "column": { "stacking": "normal" } 
    },
    "chart": { 
        "defaultSeriesType": "column",
        "height": 200,
        "borderRadius": 0,
        "renderTo": "monthy_chart" 
    },
    "subtitle": {  },
    "colors": [ "#c7084b","#089fbf","#00d047","#d300d1","#f48400","#f6f400" ],
    "series": [
        { 
            "name": "Camera",
            "data": [ [ 1362614400000,6 ],[ 1362528000000,2 ] ] 
        },
        { 
            "name": "NewCamera2",
            "data": [ [ 1362614400000,1 ] ] 
        }
    ] 
}; 
```

该图正确显示了数据，但即使只有 2 天的数据（下图），也会非常狭窄地呈现列。有没有办法让我定义 x 轴的比例，这样列的宽度会显示得更好一些？

[http://i.stack.imgur.com/NSSYg.png](http://i.stack.imgur.com/NSSYg.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T10:47:41.690

您可以设置 pointWidth 和 startOnTick / endOfTick

[http://jsfiddle.net/bLrah/](http://jsfiddle.net/bLrah/)

```
 "xAxis": {
                startOnTick:true,
                 endOnTick:true,
            "type": "datetime",
                "minTickInterval": 86400000 
```

[http://api.highcharts.com/highcharts#xAxis.startOnTick](http://api.highcharts.com/highcharts#xAxis.startOnTick) [http://api.highcharts.com/highcharts#xAxis.endOnTick](http://api.highcharts.com/highcharts#xAxis.endOnTick) [http://api.highcharts.com/highcharts#plotOptions.column.pointWidth](http://api.highcharts.com/highcharts#plotOptions.column.pointWidth)

# css - 带边距的 CSS div 移动一切

> ID：15281137
> 
> 赞同：0
> 
> 时间：2013-03-07T20:31:24.217
> 
> 标签：css, html, margin

下面是我的一个简单页面的代码。我正在尝试（A）顶部的横幅，其中包含徽标，右侧的标题，然后是“登录/注册”链接，（B）在所有这些下方，然后我将获得主要文本网站。

我希望顶部的正文和横幅之间有很大的差距。所以我用 div 来划分页面。但是，当我对#main 应用“margin-top”以使横幅保持一定距离时，所有内容，即正文和横幅中的所有内容都会在页面下方移动。如果我将“margin-bottom”应用于标题元素，也会发生同样的事情。

我对 CSS 和 HTML 有点陌生，但我虽然在此之前我已经掌握了它。我已经为此挠头很久了，但我似乎根本无法理解这里的定位！

* * *

```
<!DOCTYPE html>
<html lang="en">
<head>
  <link href="style.css" rel="stylesheet" type="text/css"/>
  <meta charset="utf-8"/>
  <title>My Page</title>
</head>

<body>
<header id="masthead" role="banner">
  <img src="jep.jpeg" alt="My Page">
  <h2>Welcome!</h2>
  <p><a href="dummy.html">Sign&nbsp;in</a>&nbsp;&nbsp;&nbsp;<a          href="dummy.html">Register</a></p>
</header>

<div id="main" role="main">
<!--main text here -->
</div>
</body>
</html> 
```

* * *

这是CSS代码：

```
#masthead {
position: relative;
}

#masthead img {
position: absolute;
}

#masthead h2 {
position: absolute;
left: 150px;
}

#masthead p {
position: absolute;
right: 10px;
}

#main {
margin-top: 40px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T21:02:36.453

问题是所有的`absolute`定位都会从文档流中移除元素。这意味着您的标题的高度为 0px，但所有内容仍然相对于它定位。

只需给您的标头广告一个高度。

[JSFiddle](http://jsfiddle.net/UygUb/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T20:39:28.300

您只需将元素包装在它们自己的容器中，这样您就可以更好地定位它们。您可能还想在其中定义一些高度。包括一个高度`#masthead`

假设您需要响应式设计：

```
<header id="masthead" role="banner">
  <section class="logo">
    <img src="jep.jpeg" alt="My Page">
  </section>

  <section class="title">
    <h2>Journal of Electronic Publishing</h2>
  </section>

  <section class="sign-in">
    <a href="dummy.html">Sign&nbsp;in</a>&nbsp;&nbsp;&nbsp;<a          href="dummy.html">Register</a>
  </section>
</header>

.logo {
width: 30%;
float: left;
margin-right: 5%;
box-sizing: border-box;
}

.title {
width: 30%;
float: left;
margin-right: 5%;
box-sizing: border-box;
}

.sign-in {
width: 30%;
float: left;
margin-right: 0;
box-sizing: border-box;
} 
```

请注意，总 100% 是假设您在该计算中包括边距。所以，30+30 = 60 + 5 + 5 = 70 + 30 = 100%

编辑：现在我可以看到您的 CSS，您的具体问题是使用 position:absolute;。删除这些应该会让你走上正确的道路。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T20:53:43.543

我建议使用表格布局。有些人不赞成使用 1 行表进行样式设置，但这似乎可行：

HTML：

```
<body>
<header id="masthead" role="banner">
  <table>
    <tr>
      <td><img src="jep.jpeg" alt="My Page"></td>
      <td><h2>Welcome!</h2></td>
      <td><p><a href="dummy.html">Sign&nbsp;in</a>&nbsp;&nbsp;&nbsp;<a          href="dummy.html">Register</a></p></td>
    </tr>
  </table>
</header>

<div id="main" role="main">
    <p>Testing</p>
</div>
</body>
</html> 
```

和 CSS：

```
#masthead {
width: 100%;
}

#masthead table {
width: 100%;
}

#main {
margin-top: 40px;
} 
```

**编辑**：使用`div`s。

这有点混乱，但它有效。自从我使用 div 进行这样的定位以来已经有一段时间了。

HTML：

```
<body>
<header>
    <div class="col">
      <div class="content">
           <img src="jep.jpeg" alt="My Page">
      </div>

      <div class="content">
        <h2>Welcome!</h2>
      </div>

      <div class="content">
        <p><a href="dummy.html">Sign&nbsp;in</a>&nbsp;&nbsp;&nbsp;<a          href="dummy.html">Register</a></p>
      </div>

    </div> 
</header>

<div id="main" role="main">
    Testing
</div>
</body>
</html> 
```

CSS：

```
header {
width: 100%;
}

.col {
height: 100px;
position: relative;
}

.content {
float: left;
width: 33.3%;
}

#main {
margin-top: 50px;
} 
```

# jquery - 使用 .each()，我想将一个数字值 .append() 到值 .attr()ibute在 jQuery 中

> ID：15281150
> 
> 赞同：0
> 
> 时间：2013-03-07T20:32:13.390
> 
> 标签：jquery, arrays, append, each, attr

我想将用逗号分隔的数字放在`<input>`. 问题是它会删除它并在那里放置一个新数字，而不是将其附加到属性的末尾。有人可以在这里帮忙吗？？？

您在这个 html 中看不到的是当将某些内容放入 div 时 JQuery UI 构建的内容。列表元素将如下所示：

```
<li>Doe, John, 12787</li>
<li>Doe, Jane, 9867</li>
<li>etc... 
```

我已经提取了列表元素中的数字，我需要构建某种类型的数组，然后使数字数组成为

的HTML：

```
<div id="teamPool">
    <h1 class="ui-widget-header">Your Branch Team</h1>
    <div class="ui-widget-content">
        <ol>
            <li class="placeholder">Add your items here</li>
        </ol>
    </div>
</div>

<div id="remove"><p>Remove</p></div>
<div id="clear"><p>Clear</p></div>
<div id="submit"><p>Submit</p></div>    

    <!--- Hidden variables --->
<div id="hiddenVariables">
    <cfoutput>
        <input type="hidden" name="uid" value="1" />
        <input id="eids" type="hidden" name="eid" value="" />
    </cfoutput>
</div> 
```

JS：

```
$('#submit').click(function(){
   $('#teamPool li').each(function() {
      var num = parseInt($(this).text().match(/\d+/)[0], 10);
      var strv = num+' ,';
      $('#eids').attr('value',strv);
   });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T20:36:26.917

你应该在每个人之外加入他们，`.attr`只打电话一次

```
$('#submit').click(function(){
   var nums = [];
   $('#teamPool li').each(function() {
      var num = parseInt($(this).text().match(/\d+/)[0], 10);
      nums.push(num);
   });
   var strv = nums.join(', ');
   $('#eids').attr('value',strv);
}); 
```

# c# - 编译器对 switch 语句的想法是什么？

> ID：15281160
> 
> 赞同：16
> 
> 时间：2013-03-07T20:32:44.550
> 
> 标签：c#, switch-statement, unreachable-code

再次受到一个`-5`问题的启发！

*   [C# 中 switch 的空情况是否与下一个非空情况相结合？](https://stackoverflow.com/questions/15164318/is-empty-case-of-switch-in-c-sharp-combined-with-the-next-non-empty-one)

我读了[@Quartermeister的[](https://stackoverflow.com/users/364001/quartermeister)[此评论](https://stackoverflow.com/questions/15164318/is-empty-case-of-switch-in-c-sharp-combined-with-the-next-non-empty-one/15165445#comment21476340_15165445)]并感到惊讶！

那么为什么编译

```
switch(1) {
    case 2:
} 
```

但事实并非如此。

```
int i;

switch(i=1) {
    case 2: // Control cannot fall through from one case label ('case 2:') to another
} 
```

这也不是

```
switch(2) {
    case 2: // Control cannot fall through from one case label ('case 2:') to another
} 
```

* * *

更新：

`-5`问题变成了`-3`。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-07T21:43:00.230

它们*都不应该*编译。C# 规范要求 switch 部分至少有一个语句。解析器应该禁止它。

让我们忽略解析器允许空语句列表的事实；那不是相关的。规范说switch部分的末端不能有可到达的端点；这是相关的位。

在您的最后一个示例中， switch 部分有一个可到达的端点：

```
void M(int x) { switch(2) { case 2: ; } } 
```

所以它一定是一个错误。

如果你有：

```
void M(int x) { switch(x) { case 2: ; } } 
```

那么编译器不知道 x 是否永远是 2。它保守地假设它可以，并说该部分有一个可到达的端点，因为 switch case 标签是可到达的。

如果你有

```
void M(int x) { switch(1) { case 2: ; } } 
```

然后编译器可以推断端点不可达，因为 case 标签不可达。编译器知道常量 1 永远不会等于常量 2。

如果你有：

```
void M(int x) { switch(x = 1) { case 2: ; } } 
```

或者

```
void M(int x) { x = 1; switch(x) { case 2: ; } } 
```

然后你知道，我知道终点不可到达，但编译器不知道。规范中的规则是，可达性只能通过分析常量表达式来确定。任何包含变量的表达式，即使您通过其他方式知道它的值，也不是常量表达式。

过去，C# 编译器存在一些错误，但情况并非如此。你可以这样说：

```
void M(int x) { switch(x * 0) { case 2: ; } } 
```

并且编译器会推断 x * 0 必须为 0，因此无法访问 case 标签。那是一个错误，我在 C# 3.0 中修复了它。规范说*只有常量*用于该分析，并且`x`是变量，而不是常量。

现在，如果程序是*合法*的，那么编译器可以使用像这样的高级技术来影响生成的代码。如果你说这样的话：

```
void M(int x) { if (x * 0 == 0) Y(); } 
```

然后编译器可以生成代码，就像你写的一样

```
void M(int x) { Y(); } 
```

如果它想要。但它不能使用`x * 0 == 0`真实的事实来确定语句的可达性。

最后，如果你有

```
void M(int x) { if (false) switch(x) { case 2: ; } } 
```

那么我们知道这个开关是不可到达的，因此这个块没有一个可到达的端点，所以这令人惊讶地是合法的。但是根据上面的讨论，你现在知道了

```
void M(int x) { if (x * 0 != 0) switch(x) { case 2: ; } } 
```

不`x * 0 != 0`视为`false`，因此端点被认为是可达的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T21:24:02.337

在 Visual Studio 2012 中，第一个原因是显而易见的。编译器确定代码不可访问：

```
switch (1)
{
    case 2:
} 
```

警告：检测到无法访问的代码。

在另外两种情况下，编译器报告“控制不能从一个案例标签（'case 2:'）落到另一个”。在任何一个失败的情况下，我都没有看到它说“（'case 1'）”。

我猜编译器对持续评估并不积极。例如，以下是等价的：

```
int i;
switch(i=1)
{
    case 2:
} 
```

和

```
int i = 1;
switch(i)
{
    case 2:
} 
```

在这两种情况下，编译器都会尝试生成代码，当它*可以*进行评估并确定您正在编写的内容是：

```
switch (1)
{
    case 2:
} 
```

并确定代码不可达。

我怀疑“为什么不编译”的答案将是“因为我们让 JIT 编译器处理积极的优化”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T20:44:27.030

好的，所以问题在于编译器完全优化了开关，这里有证据：

```
static void withoutVar()
{
    Console.WriteLine("Before!");

    switch (1)
    {
        case 2:
    }

    Console.WriteLine("After!");
} 
```

当用 ILSpy 反编译时，它向我们展示了这个 IL：

```
.method private hidebysig static 
    void withoutVar () cil managed 
{
    // Method begins at RVA 0x2053
    // Code size 26 (0x1a)
    .maxstack 8

    IL_0000: nop
    IL_0001: ldstr "Before!"
    IL_0006: call void [mscorlib]System.Console::WriteLine(string)
    IL_000b: nop
    IL_000c: br.s IL_000e

    IL_000e: ldstr "After!"
    IL_0013: call void [mscorlib]System.Console::WriteLine(string)
    IL_0018: nop
    IL_0019: ret
} // end of method Program::withoutVar 
```

它在任何地方都不记得 switch 语句。我*认为*它没有优化第二个的原因可能与运算符重载和排序有关。因此，我可能有一个自定义类型，当分配给 时`1`，它会变成`2`. 但是，我不完全确定，在我看来应该提交错误报告。

# php - 如何在 Laravel 中链接数据库关系（多个 has_many？）

> ID：15281163
> 
> 赞同：14
> 
> 时间：2013-03-07T20:32:54.613
> 
> 标签：php, mysql, activerecord, laravel, eloquent

我正在使用 Laravel，这很棒，但我遇到了数据库问题。

假设我们有三个表，如下所示：

**表 1：页数**

```
id    |   route   |  title 
```

**表 2：元素**

```
id    |   page_id   |  type 
```

**表 3：内容**

```
id    |   element_id   |  data 
```

我想对页面进行一次选择，然后选择具有该页面 id 的所有元素，并且对于每个元素，它应该选择具有元素 id 的所有内容行。

我想在 Page 模型中有一个静态**load_by_route($route)**函数，当被调用时，它将使用路由来加载和返回页面信息以及如上所述的元素和内容。理想情况下，它将返回包含所有这些信息的单个对象/数组。

基本上，我不确定如何将 has_many() 调用链接在一起，以便获得两级关系。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-03-07T22:46:54.543

查看急切加载。这应该做你想要的。

```
class Page extends Eloquent {

    public function elements()
    {
        return $this->has_many( 'Element' );
    }

}

class Element extends Eloquent {

    public function contents()
    {
        return $this->has_many( 'Content' );
    }

}

class Content extends Eloquent {}

$page = Page::with( array( 'elements', 'elements.contents' ) )->first(); 
```

[https://laravel.com/docs/master/eloquent-relationships#eager-loading](https://laravel.com/docs/master/eloquent-relationships#eager-loading)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-24T09:09:22.520

Collin James 的回答为您提供了一个包含所有数据的对象。我来到这里是因为我只是想遍历`contents`属于一个页面的所有内容。以下是获得此类收藏的方法：

```
 $page = Page::with('elements.contents.element')->has('elements.contents');

  $contents = [];
  foreach ($page->elements as $element) {
    $contents = $element->contents->merge($temp);
  } 
```

`with`确保您使用预先[加载](https://laravel.com/docs/5.3/eloquent-relationships#eager-loading)，并`has` [确保我们只迭代带有 content 的元素](https://laravel.com/docs/5.3/eloquent-relationships#querying-relationship-existence)。

`belongsTo`从每个内容元素中，您可以从我们也通过预加载收到的关系中获取元素信息：

```
class Content extends Eloquent 
{

 public function element()
 {
    returh $this->belongsTo('\App\Page');
 }

} 
```

# android - 将云端点模型类序列化为 Android 文件系统的方法

> ID：15281164
> 
> 赞同：4
> 
> 时间：2013-03-07T20:32:56.577
> 
> 标签：android, caching, serialization, google-cloud-endpoints

我已经成功创建了一个云端点模型，可以轻松地从 App Engine 检索信息。为了减少往返并提供更快的用户体验，我确定了一个我希望存储到本地存储的实例。

在我的应用程序的其余部分，我使用 ObjectInputStream 来读取和写入对象，例如：

```
FileInputStream fis = context.openFileInput("PRIVFILE");
ObjectInputStream ois = new ObjectInputStream(fis);
AppModelState s = (AppModelState) ois.readObject(); 
```

这显然需要所有数据成员实现 Serializable 接口。Model 类扩展了 GenericJSON 并且不是“Serializable”，因为

```
 public final class ModelClass extends GenericJson {} 
```

我可以手动创建一个映射到模型的可序列化对象；但是，由于属性的数量，这似乎很业余。

我考虑的另一种选择是创建一个可序列化的对象包装器，它只是将 JSON 字符串作为成员，并提供一个接受 ModelClass 作为参数的 setter/getter，例如：

```
class AppModelState implements Serializable {
   private String modelClassJSON;

   public ModelClass getModelClass() {
      // generate a new ModelClass from the JSON
   }

   public void setModelClass(ModelClass c) {
      // extract the JSON for storage
   }

   .....
} 
```

我觉得必须有更好的方法，这应该已经解决了十几次，但我没有找到任何资源。请提供输入。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-11-24T20:52:01.150

我做的和你在问题中所说的完全一样。

由于 Cloud Endpoints 对象已经序列化以通过线路传输，因此它们也可以序列化以存储在本地。作为额外的奖励，使用 Android 3.0 或更高版本，您甚至不需要导入任何库——它已经存在！例如：

```
import com.google.api.client.extensions.android.json.AndroidJsonFactory;
import com.google.api.client.json.GenericJson;
import com.google.api.client.json.JsonFactory;

private static final JsonFactory JSON_FACTORY = new AndroidJsonFactory();

public void putObject(String key, Object value) throws Exception {
    byte[] outputbytes = null;
    if (value instanceof GenericJson) {
        outputbytes = JSON_FACTORY.toByteArray(value);
    } else {
        ByteArrayOutputStream output = new ByteArrayOutputStream();
        ObjectOutputStream objectstream = new ObjectOutputStream(output);
        objectstream.writeObject(value);
        objectstream.close();
        outputbytes = output.toByteArray();
    }

    // persist "outputbytes" ...
}

public <T> T getObject(String key, Class<T> outclass) throws Exception {
    // retrieve saved bytes...
    byte[] valuebytes = ...

    if (valuebytes[0] == '{' && valuebytes[1] == '"' && valuebytes[valuebytes.length-1] == '}') {
        // Looks like JSON...
        return JSON_FACTORY.fromString(new String(valuebytes, "UTF-8"), outclass);
    } else {
        ByteArrayInputStream input = new ByteArrayInputStream(valuebytes);
        ObjectInputStream objectstream = new ObjectInputStream(input);
        Object value = objectstream.readObject();
        objectstream.close();
        return outclass.cast(value);
    }
} 
```

请注意，`AndroidJsonFactory`在序列化长字符串时，默认值（无论如何从 Android v4.3 开始）非常慢。`JacksonFactory`如果您遇到性能问题，请创建一个新的。其他一切都保持不变。

**更新：** 如果你想序列化一个 GenericJson 对象列表，你只需要创建一个包含这些对象列表的 GenericJson 对象。例如：

```
import com.google.api.client.json.GenericJson;
import com.google.api.client.util.Key;

public static class PersistantJson extends GenericJson {
    @Key public int one;
    @Key public String two;
}

public static class PersistantJsonList extends GenericJson {
    @Key public List<PersistantJson> list = new ArrayList<PersistantJson>();
} 
```

您现在可以将所有`PersistantJson`（即“生成云端点客户端库”创建的某个类）对象添加到变量的`.list`元素，`PersistantJsonList`然后将该变量传递给`putObject()`. 请注意，这要求列表中的所有对象都属于同一类，以便反序列化知道类型是什么（因为 JSON 序列化不记录类型）。如果您使用`List<Object>`，那么回读的是 a`List<Map<String, Object>>`并且您必须手动提取字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T02:30:04.593

我认为对将与 Endpoints 一起使用的类进行标准 Java 序列化效果不佳。问题是序列化是二进制的，HTTP comm 是字符串。

如果您自己进行 HTTP 通信，而不是使用端点，我认为您会遇到同样的问题。为了发送对象，您将对其进行序列化（将字符串成员转换为二进制），然后您必须将二进制转换回字符串。

因此，如果您使用的数据量不是太多，将您的对象存储为 JSON 可能是最简单的。

# css - IE8 中的 CSS 无序列表问题

> ID：15281165
> 
> 赞同：0
> 
> 时间：2013-03-07T20:32:56.610
> 
> 标签：css

我有一个 CSS 问题。我的网页上有一个无序列表。在谷歌浏览器中，一切似乎都正确显示。但是，在 IE 中，我在列表中收到了一个额外的项目符号。

![IE 问题示例](../Images/75cfdc1f7b5cb381365f0b096b2dc5a1.png)

![Chrome 示例工作](../Images/0b83a7032fb9c6a2997b67e3f1821fb5.png)

这是CSS：

```
#home-blocks-area { padding: 20px 20px 0 20px; min-height:100px; overflow:hidden; clear:both; }
/**********************************************************************************/

/* Example overrides */

.home-block-area { width: 290px; float:left; padding:0 10px; }

.home-block-area.first { padding-left:0; }

.home-block-area.last { padding-right:0;  }

#home-blocks-area .region-home-area-3-b .block { background:none; margin: -6px 0 0; }

#home-blocks-area .block { background:url(images/home-block-box-bg-white.png) repeat-x top; padding-bottom:20px;  }

#home-blocks-area .block h2 { height: 36px; font-size:20px; font-weight:bold; color:#333333; margin:0; padding:10px 0 0 20px; }

#home-blocks-area .region-home-area-1 .block h2 {  padding:10px 0 0 60px; }

#home-blocks-area .region-home-area-2 .block h2 {  padding :10px 0 0 60px; }

#home-blocks-area .region-home-area-3 .block h2
{
    padding: 10px 0 0 30px;
} 

#home-blocks-area .block .content 
{
     background:url(images/home-block-box-bg-white.png); 
     padding:20px; display:block; overflow:hidden;  
     font-family:  Arial, Helvetica, Sans Serif; 
     font-size: 14px; 
     color: #000000;
 } 

 #home-blocks-area .block .content h1, 
 #home-blocks-area .block .content h2, 
 #home-blocks-area .block .content h3, 
 #home-blocks-area .block .content h4 { color:#ffffff; }

 #home-blocks-area .block .content h3 { font-size:17px; }

 #home-blocks-area .block .content .detail h3 { font-size:14px; padding:0; margin:0; }
 #home-blocks-area .block .content .detail h4 { color: #6a7796; font-size: 14px; line-height: 16px; padding:0; margin:0; font-weight:normal; }

 #home-blocks-area .block .content p.post-note{  font-size: 12px; margin-top: -10px; }

 #home-blocks-area .block .content p.post-note a{ color: #3f9fcf; }  

ul.inline li.node-readmore, ul.inline li.comment-add { background: #11719F; border: none; color: #FFFFFF; float: right; font-weight: bold; margin: 10px 0 0 10px;  cursor:pointer; 
font-family: Arial, Verdana, Helvetica, sans-serif; padding:10px; }    

ul.menu { margin: 0 0 0.75em; padding: 0;  }

ul.menu li { margin: 0 0 0.25em 1.5em; padding: 0; } 

.links { clear:both; overflow:hidden; margin:10px 0; }

ul li.leaf { list-style-type: disc; list-style-image:none; 

ul.inline li.node-readmore, ul.inline li.comment-add { background: #11719F; border: none;    color:  #FFFFFF; float: right; font-weight: bold; margin: 10px 0 0 10px;  cursor:pointer; 
font-family: Arial, Verdana, Helvetica, sans-serif; padding:10px; }

.clearfix:after { content: " "; display: block; clear: both; visibility: hidden; line-height: 0; height: 0; }

.clearfix { display: inline-block; }

html[xmlns] .clearfix { display: block; } 
```

这是div：

```
<div id="home-blocks-area" class="clearfix">

    <div class="home-block-area first">
        <?php print render($page['home_area_1']);?>         
    </div>
</div> 
```

源代码：

```
<div id="home-blocks-area" class="clearfix">  
    <div class="home-block-area first">
          <div class="region region-home-area-1">
<div id="block-menu-menu-quick-links" class="block block-menu">
<h2>Quick Links</h2>
<div class="content">
<ul class="menu"><li class="first leaf"><a href="/academic-catalog">Academic Catalog</a></li>
<li class="leaf"><a href="/academic-programs">Academic Programs</a></li>
<li class="leaf"><a href="/accreditations-and-affiliations">Accreditations and   Affiliations</a></li>
<li class="leaf"><a href="https://my.state.edu/ics/Admissions/">Admissions</a></li>
<li class="leaf"><a href="https://my.state.edu/ics/Portal_Homepage.jnz?portlet=Events_Calendar">Calendar</a></li>
<li class="leaf"><a href="https://my.state.edu/ics/Inclement_Weather.jnz">Closings and Cancellations</a></li>
<li class="leaf"><a href="/contact-us">Contact Us</a></li>
<li class="leaf"><a href="https://my.state.edu/ICS/Academics/Academic_Information.jnz?portlet=Course_Schedules&amp;screen=Advanced+Course+Search&amp;screenType=next">Course Schedule</a></li>
<li class="leaf"><a href="/employee-directory">Directory</a></li>
<li class="leaf"><a href="/state-col">Employment Opportunities</a></li>
<li class="collapsed"><a href="/giving">Giving</a></li>
 <li class="leaf"><a href="/locations">Locations</a></li>
<li class="last leaf"><a href="https://my.state.edu/ics/">My Z-Online</a></li>
</ul></div>
</div>  </div>      
       </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T22:29:41.173

Chrome 有时会帮助格式化额外的 li。IE，不！我猜你在你的 php.ini 中错误地输入了你的 li。检查您可能未能使用 . 可能是这样的

```
<li>string1<li>
<li>string2<li> 
```

如果您可以发布产生的 php 代码

```
<?php print render($page['home_area_1']);?> 
```

你会更好地理解我的意思。

# iis - 重写规则在 IIS 中为 phpfox 无法正常工作

> ID：15281172
> 
> 赞同：0
> 
> 时间：2013-03-07T20:33:15.373
> 
> 标签：iis, rewrite, phpfox

** 当我尝试下面的代码时，我更改了我的重写规则以将我的网站链接从 www.mydomain.com/index.php?do=/blog 更改为 www.mydomain.com/blog，它不会让我更改任何页面，例如如果我想访问 www.mydomain.com/blog，我只是卡在 www.mydomain.com，意味着重定向到我的同一个根页面，

我应该为此做些什么改变，请帮忙。我是新人

我的代码是**

```
`<rule name="Redirect index.php" stopProcessing="true">
    <match url="index\.php/(.*)" />
    <action type="Redirect" url="{R:1}" appendQueryString="false" />
  </rule>
  <rule name="Rewrite index.php">
    <match url="(.*)" />
    <conditions>
      <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
      <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
    </conditions>
    <action type="Rewrite" url="index.php/{R:1}" />
  </rule>
</rules>` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T00:09:14.323

根据这篇关于重写的[论坛帖子](http://www.phpfox.com/forum/solved-cases-77/htaccess-2007/view_225193/)`.htaccess`，您需要重写为：

`index.php?do=/{R:1}`

您缺少`?do=`中间的部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-28T19:23:48.720

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
    <system.webServer>
        <rewrite>
          <rules>
            <rule name="Imported Rule 1">
              <match url="^file/pic/photo/([0-9]+)/([0-9]+)/([A-Za-z0-9]{32}+)\-(.*?)_([0-9]*?)\.(.*)$" ignoreCase="false" />
              <action type="Rewrite" url="file/pic/photo/{R:1}/{R:2}/{R:3}_{R:5}.{R:6}" />
            </rule>
            <rule name="Imported Rule 2">
              <match url="^file/pic/photo/([0-9]+)/([0-9]+)/([A-Za-z0-9]{32}+)\-(.*?)\.(.*)$" ignoreCase="false" />
              <action type="Rewrite" url="file/pic/photo/{R:1}/{R:2}/{R:3}.{R:5}" />
            </rule>
            <rule name="Imported Rule 3">
              <match url="^(.*)$" ignoreCase="false" />
              <conditions>
                <add input="{HTTP_HOST}" pattern="^www\." ignoreCase="false" negate="true" />
              </conditions>
              <action type="Redirect" redirectType="Found" url="http://www.%" />
            </rule>
            <rule name="Imported Rule 4" stopProcessing="true">
              <match url="[^/]$" ignoreCase="false" />
              <conditions>
                <add input="{REQUEST_FILENAME}" matchType="IsFile" ignoreCase="false" negate="true" />
                <add input="{REQUEST_FILENAME}" matchType="IsDirectory" ignoreCase="false" negate="true" />
              </conditions>
              <action type="Redirect" redirectType="Permanent" url="{URL}/" />
            </rule>
            <rule name="Imported Rule 5">
              <match url="^(.*)" ignoreCase="false" />
              <conditions>
                <add input="{REQUEST_FILENAME}" matchType="IsFile" ignoreCase="false" negate="true" />
                <add input="{REQUEST_FILENAME}" matchType="IsDirectory" ignoreCase="false" negate="true" />
              </conditions>
              <action type="Rewrite" url="index.php?do=/{R:1}" appendQueryString="false" />
            </rule>
            <rule name="Imported Rule 6">
              <match url="^file/pic/photo/(.*)\.(.*)$" ignoreCase="false" />
              <action type="Rewrite" url="static/image.php?file={R:1}&amp;ext={R:2}" appendQueryString="false" />
            </rule>
          </rules>
        </rewrite>
    </system.webServer>
</configuration> 
```

# android - 没有 singleLine 选项的 EditText 的 actionDone

> ID：15281177
> 
> 赞同：3
> 
> 时间：2013-03-07T20:33:21.443
> 
> 标签：android, android-edittext, android-softkeyboard

我需要为我的edittext设置actiondone而不设置singleLine oprions（我需要多行输入）。我该怎么做？

那是代码：

```
<EditText
    android:id="@+edit_text/title"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:hint="Titolo"
    android:imeOptions="actionNext"
    android:singleLine="true" />

<EditText
    android:id="@+edit_text/content"
    android:layout_width="fill_parent"
    android:layout_height="0dp"
    android:layout_weight="1"
    android:gravity="top"
    android:hint="Inserisci la nota"
    android:singleLine="false"
    android:imeOptions="actionDone" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T20:58:46.377

这对我有用：

```
 <EditText
        android:id="@+id/name"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:imeOptions="actionDone"
        android:singleLine="false" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-01T12:33:16.820

由于 SingleLine = false/true 已被弃用。应用下面的代码。它对我有用。

```
 <EditText
    android:id="@+id/my_EditText"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" 
    android:maxLines="1" 
    android:imeOptions="actionDone"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-01T10:51:10.460

我找到了一个解决方案 Set on your view 以编程方式

```
mEditText.setRawInputType(InputType.TYPE_CLASS_TEXT);
mEditText.setImeActionLabel(getResources().getString(R.string.done), EditorInfo.IME_ACTION_DONE);
mEditText.setImeOptions(EditorInfo.IME_ACTION_DONE); 
```

xml 文件将是：

```
<EditText
    android:id="@+id/my_EditText"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" /> 
```

解决方案在这里找到： [https ://gist.github.com/Dogesmith/2b98df97b4fca849ff94](https://gist.github.com/Dogesmith/2b98df97b4fca849ff94)

# string - 在 VHDL 报告中使用通用字符串

> ID：15281184
> 
> 赞同：0
> 
> 时间：2013-03-07T20:33:25.120
> 
> 标签：string, generics, report, vhdl

当我在 VHDL 中使用报告语句时，我希望字符串输出依赖于我可以在实例化级别声明的泛型。我可以以及如何做到这一点？让我们说一个疯狂的例子，在我放置的实体中：

```
generic ( blah : string :="happy"); 
```

...

然后我在架构中：

```
report "my mood is: " <blah> severity warning; 
```

我知道这不起作用，那么如何将泛型作为报告输出的一部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T11:58:25.340

您需要使用以下方式连接字符串`&`：

```
report "my mood is " & blah severity warning; 
```

# php - SQL语法错误php db类

> ID：15281188
> 
> 赞同：0
> 
> 时间：2013-03-07T20:33:33.763
> 
> 标签：php, database

我有一个需要更新的表单我收到一个 sql 错误。在我的类文件中看不到我的 sql 语句发生了什么。需要帮助找出问题所在。

```
public function update(){
    global $database;
$sql = "UPDATE ".self::$table_name." SET when = '{$database->mysql_prep($this->when)}', where = '{$database->mysql_prep($this->where)}', howmuch = '{$database->mysql_prep($this->howmuch)}', contact = '{$database->mysql_prep($this->contact)}', daytimephone = '{$database->mysql_prep($this->daytimephone)}', emailqueries = '{$database->mysql_prep($this->emailqueries)}', websiteurl = '{$database->mysql_prep($this->websiteurl)}', description = '{$database->mysql_prep($this->description)}' WHERE id='{$database->mysql_prep($this->id)}'";
    $database->query($sql);
    return ($database->affected_rows() == 1) ? true:false;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T20:36:42.010

`WHEN`和`WHERE`是 MySQL 中的保留关键字。如果您需要将它们用作字段名称，请将它们括在反引号中：

```
`where`
`when` 
```

# jquery - 我的 div 没有使用 jQuery 重定向

> ID：15281189
> 
> 赞同：0
> 
> 时间：2013-03-07T20:33:37.293
> 
> 标签：jquery, redirect

从这里使用 jQuery：http: [//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js](http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js)

```
$(".myBox").click(function(){
    window.location=$(this).attr("http://google.com");
} 
```

上面的代码不起作用，请有人帮助我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T20:36:22.987

像这样使用：

```
window.location.href = "http://www.google.com"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T21:14:42.583

上面发布的 TurnItUp 应该也可以工作，但是在这里，JQuery 方法：

```
$(".mybox").click(function(){
    $(location).attr('href','http://www.google.com');
}); 
```

我还假设您将其包装在“文档就绪事件”下，对吗？

完整的东西真的应该是

```
$(function()
{
   $(".mybox").click(function(){
       $(location).attr('href','http://www.google.com');
   });
}); 
```

# sql-server-2008 - 我视图中的所有列名在 SSMS 中都带有红色下划线

> ID：15281193
> 
> 赞同：21
> 
> 时间：2013-03-07T20:34:06.127
> 
> 标签：sql-server-2008

我创建了 View_DefectDaysOutstanding3 视图。当我选择查看数据时，它给出了数据，但是为什么在选择语句中所有字段都带有红色下划线作为错误？

```
SELECT TOP 1000 [ID]
          ,[Severity]
          ,[AvgDaysOutstanding]
          ,[ReportMonth]
          ,[ReportYearMonth]
          ,[#OfBugs]
          ,[projid]
          ,[folderid]
      FROM [SoftwarePlanner].[dbo].[View_DefectDaysOutstanding3]
      order by ReportYearMonth 
```

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-03-07T20:43:46.773

[您是否刷新了 Intellisense 缓存？](http://blogs.msdn.com/b/dtjones/archive/2008/09/11/refreshing-the-intellisense-cache.aspx)

键盘快捷键： `Ctrl`+ `Shift`+`R`

或者，使用菜单：`Edit`-> `IntelliSense`->`Refresh Local Cache`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-07T20:44:38.423

转到编辑 > IntelliSense > 选择“刷新本地缓存”。

创建新表/添加列/新视图等后，您需要刷新缓存

# c# - 如何使用 LiNQ 从基于另一个列表的列表中选择项目？

> ID：15281196
> 
> 赞同：-4
> 
> 时间：2013-03-07T20:34:18.307
> 
> 标签：c#, linq

我正在创建一个游戏，我的桌面布局如下所示：

```
dbPlayer:
Id (int)
...

dbGame:
Id (int)
Finished (bool)
...

dbGamePlayer:
GameId
PlayerId
... 
```

给定一个玩家 ID，我如何选择玩家参与但尚未（真）完成的所有游戏？

这就是我到目前为止所做的：

```
from g in dbGame
join gp in dbGamePlayer on gp.GameId equals g.Id
join p in dbPlayer on p.Id equals gp.PlayerId
where p.Id == 1 && g.Finished == false
select g 
```

但是我到处都是错误。抱歉，我是 LINQ 的新手

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T07:11:17.900

您的 LINQ 语句是错误的。

联合`object`( `gp`) 必须位于等号语句的右侧。

```
join gp in dbGamePlayer on g.Id equals gp.GameId 
```

同样适用于第二个连接：

```
join p in dbPlayer on gp.PlayerId equals p.Id 
```

所以完整的声明应该是这样的：

```
IEnumerable query = (from g in dbGame
join gp in dbGamePlayer on g.Id equals gp.GameId 
join p in dbPlayer on gp.PlayerId equals p.Id 
where p.Id == 1 && g.Finished == false
select g); 
```

但是错误

> 名称模型不在等号左侧的范围内。考虑交换等号两边的表达式。

应该告诉你的。

# javascript - Javascript：根据单击的按钮运行脚本

> ID：15281197
> 
> 赞同：0
> 
> 时间：2013-03-07T20:34:20.200
> 
> 标签：javascript, forms, function, button

有人可以启发我吗？我试图实现一个简单的 Javascript 函数。这个想法是，根据单击的按钮运行条件脚本。似乎无法弄清楚这一点：

```
<script type="text/javascript">

function whichButton(){

if(//Button 1 is clicked...){
    //Run script 1   
 }
else if(//Button 2 is clicked){
    //Run script 2  
 }
else if(//Button 3 is clicked){
    //Run  script 3  
 }
else if(//Button 4 is clicked){
    //Run script 4  
 }
else{
    //Do nothing
 }
}
</script>

<form id="form1" onSubmit="whichButton();">
<button id="btn1">Button 1</button><br/>
<button id="btn2">Button 2</button><br/>
<button id="btn3">Button 3</button><br/>
<button id="btn4">Button 4</button><br/>
</form> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T20:40:35.473

您想将 onclick 处理程序添加到按钮标签：

```
<script type="text/javascript">    
function whichButton(buttonElement){
  alert(buttonElement.id);
  var buttonClickedId = buttonElement.id;
  if( buttonClickedId === 'btn1' ){
     // do btn1 stuff
  }
  else if( buttonClickedId === 'btn2' ){
     // do btn2 stuff
  }
  // ...
  else{
     // don't know which button was clicked
  }

}
</script>

<form id="form1" >
<button id="btn1" onclick="whichButton(this)">Button 1</button><br/>
<button id="btn2" onclick="whichButton(this)">Button 2</button><br/>
<button id="btn3" onclick="whichButton(this)">Button 3</button><br/>
<button id="btn4" onclick="whichButton(this)">Button 4</button><br/>
</form> 
```

编辑：

要根据单击的按钮运行不同的代码，请使用类似于我在上面编辑的原始帖子的 IF 语句。// 你可以去掉那个警报，或者进入每个 if/else if 范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T20:38:22.617

将 from 传递给您的函数，然后找到活动元素：

```
<form id="form1" onSubmit="whichButton(this);">
    Buttons...
</form> 
```

和 JavaScript：

```
function whichButton(form) {
    var clicked = form.querySelector(":active");
    switch(clicked.id) {
    case "btn1":
        // do stuff
        break;
    // add more cases
    }
} 
```

请注意，我对此不确定，但我已经对其进行了测试，它似乎可以工作。请注意，IE7 及更早版本不支持`:active`，我不知道如何在这些旧版本中使其工作。

编辑：这是一个要演示的[小提琴。](http://jsfiddle.net/DuQgU/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T20:41:40.917

您可以尝试使用 jQuery 进行以下操作：

```
<script type="text/javascript">
        $(document).on("click", "button.btn", function(){
                console.log("You clicked " + $(this).html());
                return false;
        });
</script>
<form>
<button class="btn">Button 1</button><br/>
<button class="btn">Button 2</button><br/>
<button class="btn">Button 3</button><br/>
<button class="btn">Button 4</button><br/>
</form> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-07T20:38:12.040

使用 AJAX 获取脚本，将它们插入 DOM 中的某个位置，然后使用 initialize() 运行它们。

```
$.get('js/script1.js', function(data) {
    $('#dummydiv').html(data);
    initialize();
}); 
```

# c++ - 当我定义一个子类只是为了抽象出基类构造函数的细节时，它叫什么？

> ID：15281198
> 
> 赞同：0
> 
> 时间：2013-03-07T20:34:20.993
> 
> 标签：c++, constructor, subclass, copy-constructor

我正在编写一个库，该库为两个客户端提供使用 ZeroMQ PUB/SUB 套接字进行通信的能力。每个客户端应用程序实例化广播者端点或接收者端点，并且这些端点类有一个 Connection 成员：

```
class Connection {
    Connection(const char* address, int outgoingPort, int incomingPort);
}; 
```

Connection 有几个套接字，并被配置为通过各自的端口连接到给定的地址。但是，我不想在实际实例化 Connection 的类中公开这些细节。基本连接对象有一个传入端口和一个传出端口，但是这个细节不需要渗透到程序的其余部分。在那些更高级别的层中，考虑两个指定端口，数据端口和控制端口会更明智。所以我有两个子类，它们实现构造函数来定义哪个端口是传入端口，哪个是该特定连接类型的传出端口。

```
class BroadcasterConnection : public Connection {
    BroadcasterConnection(int dataPort, int controlPort)
    :Connection("*", dataPort, controlPort) {}
};
class ReceiverConnection : public Connection {
    ReceiverConnection(const char* hostAddress, int dataPort, int controlPort)
    :Connection(hostAddress, controlPort, dataPort) {}
}; 
```

此外，广播器作为稳定端点绑定到其端口，因此需要使用它来`"*"`代替实际的远程地址。同样，实例化和使用广播器连接的类不需要关心这些细节，因此 BroadcasterConnection 构造函数会处理它。

作为另一个例子，我对包装 ZeroMQ 套接字的类做同样的事情。我有一个基本的 Socket 类，子类构造函数只是将 ZeroMQ 标头中的适当值（ZMQ_PUB 或 ZMQ_SUB）传递到底层套接字。由于我们不能让客户端直接使用来自 ZeroMQ 的值，因此我们需要以某种正式的方式对 PUB 套接字和 SUB 套接字之间的区别进行编码，并且提供单个子类构造函数似乎是一种透明且明智的做法。

```
class Socket:
    Socket(void* context, const char* address, int port, int socketType);

class PublishSocket : public Socket:
    PublishSocket(void* context, const char* address, int port)
    :Socket(context, address, port, ZMQ_PUB) {}

class SubscribeSocket : public Socket:
    SubscribeSocket(void* context, const char* address, int port)
    :Socket(context, address, port, ZMQ_SUB) {} 
```

这些子类根本没有做任何花哨的事情，但我希望您会同意它们是抽象服务中有用且健康的补充。但我不知道这个简单成语的通用名称。当我定义一个*只*实现构造函数的子类时，仅仅为了构造一个具有更专业的参数集的对象，我在做什么？

这里的关键点是这些子类*没有定义任何额外的方法或数据*。这是另一个示例，其中有一个标记基类，可标识任何类型的任何实体。子类用于根据一些特定于域的参数为各个类型的实体创建标签，但最终它们都归结为 Tag 对象。

```
Tag(char typeIdentifier, int entityIdentifier);

LightTag(int lightIndex):Tag('L', lightIndex) {}
SkeletonTag(const char* skeletonName):Tag('S', hash(skeletonName)) {}
CameraTag():Tag('C', 0) {} 
```

所以，有几个问题：

1.  这个成语有一个常用的、可在 Google 上搜索的名称吗？

2.  如果我写`Connection c = BroadcasterConnection(40001, 40002);`，复制构造函数被调用。由于`BroadcasterConnection`没有定义任何额外的数据，这两个类应该是可互换的（尽管有 RTTI），我们应该能够向下转换而不用担心对象切片，对吧？是否有类似方便的语法来以这种方式构造对象来避免复制？即使在构造函数初始值设定项列表中，这似乎也会发生。

3.  这是一个不太实际的例子，但假设我写`Connection* c = new BroadcasterConnection(40001, 40002);`然后`delete c;`. Connection 没有虚拟析构函数，但它没有任何虚拟函数开头（所以没有 vtable）。由于 BroadcasterConnection 是 Connection 的直接子类，没有定义额外的数据，这个操作是否安全？如果 BroadcasterConnection 添加了一些成员数据呢？那么它会导致内存泄漏吗？

4.  有没有办法以上述方式明确编码特定子类仅是构造函数的事实，以便编译器不允许它包含任何附加数据？

而且，当然，如果有一种从根本上更好的方法来解决同样的问题，我很想听听。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T20:42:36.937

当心。您调用了未定义的行为。

**5.3.5**

> 3）在第一种选择（删除对象）中，如果操作数的静态类型与其动态类型不同，则静态类型应为操作数动态类型的基类，并且静态类型应具有虚拟析构函数或行为未定义。[...]

我怀疑它几乎总是可以工作，但是您正在调用未定义的行为，因此要求编译器将硬盘驱动器的内容通过电子邮件发送到照片打印机，并使用您的信用卡支付费用。或者其他任何感觉。

在实践中，它可能只会调用基类析构函数。

请注意，上述大多数实用程序都可以通过返回具有派生类名称的基类对象副本的函数来处理。即，您有一个名为的函数，而不是一个名为 SubscribeSocket 的类，`SubscribeSocket`它返回一个`Socket`. 在移动语义（你确实有一个快速移动`Socket`，对吗？）和 RVO（假设你愿意公开 的实现`SubscribeSocket`）之间，这将是有效的。

您的方案的一个优点是您可以`Socket`在需要时键入您的 s。一种不调用未定义行为（但确实有一些怪癖）的有效方法是定义一个`SubscribeSocket`与 无关的类，该类`Socket`拥有 a `Socket`，将其构造函数转发给它，并具有`operator Socket&()`and `operator Socket const&() const`，允许将其传递给需要`Sockets`. 当你明确需要它时，抛出一个`.GetSocket()`方法。避免`operator=(Socket const&)`，你现在阻止切片。也许有一个明确的“从套接字创建”类型的函数，可以在调试中检查......

# android - AppaholicsUpdateChecker：没有连接问题

> ID：15281199
> 
> 赞同：1
> 
> 时间：2013-03-07T20:34:21.890
> 
> 标签：android, updates

我是“Android 编码”场景的新手，我已经编写了我的第一个应用程序，现在我想实现一个自动更新功能。

现在我找到了这个库： [https ://github.com/RaghavSood/AppaholicsUpdateChecker](https://github.com/RaghavSood/AppaholicsUpdateChecker)

现在我有了这个 onCreate 函数：

```
@Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

UpdateChecker checker = new UpdateChecker(this, true);
checker.checkForUpdateByVersionCode("http://app.XXX.in/version.txt");
checker.isUpdateAvailable();
checker.downloadAndInstall("http://app.XXX.in/apk/tGlApp.apk");
    } 
```

如果我现在开始我的应用程序，则会出现一个 ToastText，表明我没有 Internet 连接，更新失败，但我有 Internet 连接。清单文件中也允许访问 Internet。

上面的代码错了吗？

这是我的清单文件：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.tglapp"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="11"
        android:targetSdkVersion="17" />

    <supports-screens
        android:largeScreens="true"
        android:normalScreens="false"
        android:smallScreens="false"
        android:xlargeScreens="true" />

    <uses-permission android:name="android.permission.INTERNET" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.tglapp.MainActivity"
            android:configChanges="orientation"
            android:label="@string/app_name"
            android:screenOrientation="landscape" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <action android:name="android.intent.action.MAIN2" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name="com.example.tglapp.MainActivity2"
            android:configChanges="orientation"
            android:label="@string/title_activity_main_activity2"
            android:screenOrientation="landscape" >
        </activity>
        <activity
            android:name="com.example.tglapp.MainActivity3"
            android:label="@string/title_activity_main_activity3" >
        </activity>
    </application>

</manifest> 
```

有了这个更新脚本，我需要允许“android.permission.INTERNET”的其他东西？

# capybara - 使用 capybara-webkit 在 Google Maps 中单击覆盖标记

> ID：15281200
> 
> 赞同：28
> 
> 时间：2013-03-07T20:34:24.427
> 
> 标签：capybara, capybara-webkit

有没有办法用 capybara-webkit 点击谷歌地图覆盖？Capybara 使用 Selenium 怎么样？选择标记后，我想测试信息窗口的内容。我还想测试页面上有*n 个*标记。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-24T18:29:24.187

测试页面上有n个标记：

```
expect(find('.gmap_container')['data-markers'].split('},{').count).to eq(n) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-13T23:27:37.690

这可以完成，但需要更改创建标记的方式。您必须指示它们呈现为图像而不是画布元素：

```
new google.maps.Marker({
  position:  latLng,
  animation: google.maps.Animation.DROP,
  name:      business.get('name'),
  id:        business.get('id'),
  optimized: false, // <-- this is the stuff
  title:     business.get('name')
}); 
```

然后在你的测试中，你可以`find('div[title="Business\ Title"]').click`

如果可能，您可能只想考虑为测试环境执行此操作，但这取决于您和您的需求。

信用：[http ://blog.mojotech.com/selecting-google-maps-v3-markers-with-selenium-or-jquery/](http://blog.mojotech.com/selecting-google-maps-v3-markers-with-selenium-or-jquery/)

希望这可以帮助！

# asp.net-mvc-4 - BreezeController 中如何调用 SaveChanges()？

> ID：15281205
> 
> 赞同：2
> 
> 时间：2013-03-07T20:34:42.980
> 
> 标签：asp.net-mvc-4, knockout.js, asp.net-web-api, breeze

似乎所有现有的breathjs示例都在将实体模型传入和传出`BreezeController`.

但几乎我们所有构建的页面都使用某种形式的视图模型。在我们没有 BreezeJs 的日子里，我们从存储库中检索数据（域模型）以填充（使用 AutoMapper 或手动）视图模型，该模型仅包含该视图所需的数据。WebAPI 仅将视图模型数据发送到浏览器，我们可以在其中填充客户端视图模型（通常是`knockout`observable）。

保存数据时，我们从 a 收集数据`<form>`以填充输入视图模型，仅将这些数据发送到服务器，其中输入视图模型中的数据被映射到域模型。通过调用存储库`SaveChanges()`中的`DbContext`实体来保存更新。

现在，`BreezeJs`是通过创建一个`EFContextProvider`. 我见过的例子通常是检索领域模型数据，然后将其全部传递给客户端。

```
[HttpGet]
    public IQueryable<Item> Items() {
        return _contextProvider.Context.Items;
    } 
```

构建视图模型是客户端 javascript 的工作。

当然我们可以在服务器端构建视图模型：

```
[HttpGet]
public List<ItemViewModel> Items() {
    var items = _contextProvider.Context.Items
                  .Include("RelatedEntity")
                  .ToList();
    var model = new List<ItemViewModel>();
    .... some code to build model from items ....
    return model;
} 
```

好处是通过网络传输的数据更少，我们可以在服务器端进行许多操作。但我不知道这样修改是否是一个好习惯`BreezeController`。但至少，它返回列出所有项目所需的数据。

当我尝试 POST 数据时，真正的麻烦来了。

在我发现的 BreezeJs 示例中，他们使用 a`ko.observableArray()`来存储所有域模型数据，比如说`vm.items`. 然后将新记录`newItem`构建`manager.createEntity`到域模型中。在验证数据之后`item.entityAspect.validateEntity()`，`newItem`被推入`vm.items`并被`manager.saveChanges()`调用，它以某种方式`SaveChanges()`在 BreezeController 上调用。

```
 [HttpPost]
    public SaveResult SaveChanges(JObject saveBundle) {
        return _contextProvider.SaveChanges(saveBundle);
    } 
```

我发现被接管的东西太多了！（如果您不同意，请嘲笑我。）我的问题是：

1.  我可以`createEntity`然后`saveChanges`吗？我只有一个空表格要填写和提交。当然没有必要`items`在客户端构建一个完整的阵列。

2.  我可以将输入视图模型作为 a 传递`JObject`并在调用之前进行一些服务器端处理`_contextProvider.SaveChanges()`吗？

* * *

原来又是一篇超长的帖子。感谢您通读。真的很感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T21:10:51.857

好问题。不幸的是，我们的演示代码似乎掩盖了 Breeze 在客户端和服务器上的真正功能。Breeze 不受您恐惧的方式的限制。

我不想重复我们文档中的所有内容。我们确实在谈论这些问题。我们需要更多的例子来确定。

您正在描述 CQRS 设计。我认为它使大多数应用程序过于复杂。但这是你的特权。

如果你想发送`ItemViewModel`而不是`Item`，你可以。如果您希望将其视为 Breeze 客户端上的实体 -`EntityManager`将其转换为 KO 可观察对象并在缓存中对其进行管理、更改跟踪、验证它 - 您必须为其提供元数据......在服务器或客户端上。Breeze 也是如此……以及您可以命名的所有其他系统（Ember、Backbone 等）。很快，我们将更容易在服务器上为任意 CLR 模型创建元数据；这可能会有所帮助。

您可以完全控制服务器上的查询，顺便说一句，无论`Item`是`ItemViewModel`. 您不必公开任何一个开放式查询。您似乎通过第二个示例查询知道这一点。

到**指挥部**。

您写道：“ *[示例] 使用 ko.observableArray() 存储所有域模型数据，比如说 vm.items* ”

这并不完全正确。您在示例中看到的 items 数组是为了*演示*而存在的。从 Breeze 的角度来看，items 数组不存储任何内容。事实上，在一次查询之后，查询响应中返回的实体（如果它们是实体）已经在管理器的缓存中，无论您对查询结果做什么，无论是放入数组还是丢弃它们。**数组在经理对实体的跟踪中没有任何作用**。

你写道：“*我可以`createEntity`然后`saveChanges`吗？* ”

当然！该`EntityManager.createEntity`方法将新实体放入缓存中。同样，您看到它被推入`items`数组的原因是为了向用户展示。该数组与经理将保存的内容无关。

您写道：“*我可以传递一个输入视图模型......并在调用之前进行一些服务器端处理`_contextProvider.SaveChanges()`吗？* ”

我不知道您所说的“输入视图模型”是什么意思。微风`EntityManager`追踪实体。如果您的“输入视图模型”是一个实体，`EntityManager`则会跟踪它。如果它发生了变化并且您调用`saveChanges`了 ，管理器会将其发送到控制器的`SaveChanges`方法。

您拥有控制器`SaveChanges`方法的实现。`JObject`您可以使用更改集数据的 JSON.NET 表示来做任何您想做的事情。我认为您将受益于将`ContextProvider`对象解析为`SaveMap`. 阅读[有关自定义 EFContextProvider 的主题](http://www.breezejs.com/documentation/custom-efcontextprovider)。大多数人认为这提供了他们在将这些数据传递到数据访问层之前验证和操作客户端更改集数据所需的东西......无论是 EF 还是其他东西。

相反，如果您想创建自己的自定义 DTO 以 POST 到您自己的自定义控制器方法......请继续。不过不要打电话`EntityManager.saveChanges`。调用`EntityManager.getChanges()`并将更改的实体数组操作到您的 DTO 中。您将手动完成所有操作。但是你可以。就个人而言，我有更好的事情要做。

# treeview - Doxygen：如何在树视图中隐藏某些页面

> ID：15281206
> 
> 赞同：6
> 
> 时间：2013-03-07T20:34:54.630
> 
> 标签：treeview, hide, doxygen

我有一个我自己无法解决的问题。请帮忙。

我有（有条件地）：

```
/** @mainpage A
@subpage B
*/

/** @page B 
@subpage C
*/

/** @page C */ 
```

Doxygen 使所有页面都显示在根级别上的树。

+A/
|---B/
|------C
|---B <- 想隐藏
|---C <- 想隐藏

但我只需要顶部（此处的 A 和嵌套的 B 和 C）可见，即应该相应地组织 @subpage 标记。

我还尝试在 DoxygenLayout.xml 中将可见设置为“否”。但它隐藏了所有页面，只剩下“文件”和“类”。

提前谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-03-25T13:31:23.280

当页面/子页面文件属于大多数受支持的格式（如`*.c`,`*.cpp`等）时，您的代码会生成所需的树视图（仅在根级别没有单独条目的嵌套页面） `*.dox`。我能找到的唯一例外（在 Doxygen 1.8.6 中） ) 是降价格式 (`*.md`或`*.markdown`)，也会为其生成单独的根级别条目。

在 markdown 文件被[视为](https://stackoverflow.com/questions/9502426/how-to-make-an-introduction-page-with-doxygen/9522667#comment12326185_9522667)其他文件格式之前，解决方法是使用其他文件格式之一（如`*.dox`）而不是`*.md`页面/子页面。目前，可以使用 markdown 格式，无需生成根级条目，仅用于[mainpage](https://stackoverflow.com/a/13442157/4128146)。

# resources - ClassLoader - 加载和保存数据

> ID：15281209
> 
> 赞同：0
> 
> 时间：2013-03-07T20:35:08.290
> 
> 标签：resources, classloader, loading, save, data-management

希望有人可以帮助我。

据我了解，使用 ClassLoader 是加载内容的最可靠方式。

```
public class Pipeline{
   public static URL getResource(String filename) {
      return ClassLoader.getSystemResource(filename);
   }

   public static InputStream getResourceAsStream(String filename) {
      return ClassLoader.getSystemResourceAsStream(filename);
   }
} 
```

如果您在“[jar bundle]/resources/abc.png”中有一个文件..您可以通过以下方式加载它：

```
URL url = Pipeline.getResource("resources/abc.png"); 
```

加载很简单。
储蓄是我的动力。

我有一个程序在运行时收集数据，在退出时保存该数据，然后在下次加载数据并继续添加。

我认为最简单的解决方案是保存回 jar 包中，以便 ClassLoader 可以获取它们。这甚至可能吗？还是推荐？

我不介意将我的资源放在 jar 之外，只要我不必求助于“文件”来获取它们并保存到它们。（除非它可以干净地完成）

```
folder/application.jar

folder/resources/abc.png 
```

如果您可以 ../ 从 ClassLoader 正在查找的位置返回一个，那么从实际包含 jar 文件的目录中干净地获取数据将很容易

```
Pipeline.getResource("../resources/abc.png"); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T20:51:09.493

这并不是类加载器的真正用途。从类加载器加载资源意味着您可以将应用程序捆绑为一个包，并且组件可以相互读取，而不必担心您要部署到的系统是如何设置的。

如果 JAR 中的文件打算由应用程序更改，那么它不是应用程序的一部分，因此可能不应该在 JAR 中。

我在您的应用程序上没有很多上下文，但希望我的建议对您的情况有效。

我建议在您的应用程序中设置一个要求，即它具有允许对其进行读写的工作区，并接受指定此目录所在位置的配置设置。在 Java 中执行此操作的典型方法是使用环境变量、系统属性或 JNDI 设置（用于容器部署）。

例子：

1.  Tomcat 的启动脚本会确定它的安装位置并设置名为 catalina.home 的系统属性，并允许您使用名为 CATALINA_HOME 的环境变量覆盖它。
2.  JBoss 查找 JBOSS_HOME
3.  Java 应用程序服务器通常会查找 JAVA_HOME 来查找 JDK。

# shared-libraries - libGLEW.so.1.9：无法打开共享对象文件

> ID：15281214
> 
> 赞同：3
> 
> 时间：2013-03-07T20:35:36.320
> 
> 标签：shared-libraries, glew

我是 C++ 新手，在我的新项目中有一个我不明白的问题。
我的程序的相关部分是：

```
 #include <glew.h>      
    #include <SDL.h>
    #include <SDL_opengl.h>

    int initGlew()
    {
        if(glewInit()!=GLEW_OK)
        {
            printf("Unable to init glew!");
            return 1;
        }
        return 0;
    } 
```

但是当我使用代码块运行它时，会出现以下运行时错误：

```
home/samuel/Dokumente/ProjekteC++/GameGL/bin/Debug/GameGL: error while loading shared libraries: libGLEW.so.1.9: cannot open shared object file: No such file or directory 
```

在我链接到这些so文件的构建选项中：

*   ../../../../../usr/local/lib/SDL
*   ../../../../../usr/local/lib64/libGLEW.so
*   ../../../../../usr/local/lib64/libGLEW.so.1.9

我搜索了很多可能出现错误的地方，但没有找到任何东西。我希望你能帮助我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-28T19:26:44.520

环境变量 LD_LIBRARY_PATH 的使用旨在用于临时的、仅用于测试的解决方案。相反，如果在 linux 上将相同的路径放入系统范围的配置文件中：

```
/etc/ld.so.conf 
```

喜欢 ：

```
cat /etc/ld.so.conf

/usr/lib64 
```

然后参与此更改问题：

```
sudo ldconfig 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T23:40:35.770

错误是说它在运行时找不到动态库。当你编译你的应用程序时，你链接到静态库（.a 文件），但在运行时你可以动态加载 .so 文件，这就是这里发生的事情。

如果您列出您的应用程序库依赖项，您可能会发现它找不到 libGLEW。您可以使用 ldd 命令在命令行上执行此操作。

```
$ ldd <your_file>
    linux-vdso.so.1 =>  (0x00007fff769ff000)
    libGLEW.so.1.9 => not found
    libc.so.6 => /lib/x86_64-linux-gnu/libc.so.6 (0x00007f2af9e28000)
    /lib64/ld-linux-x86-64.so.2 (0x00007f2afa208000) 
```

将目录添加到库搜索路径是通过 LD_LIBRARY_PATH 导出完成的。同样，您可以像这样在命令行上执行此操作。

```
$LD_LIBRARY_PATH=/usr/lib64 ldd <your_file>
    linux-vdso.so.1 =>  (0x00007fff2e053000)
    libGLEW.so.1.9 => /usr/lib64/libGLEW.so.1.9 (0x00007f4071ca5000)
    libc.so.6 => /lib/x86_64-linux-gnu/libc.so.6 (0x00007f40718c7000)
    libGL.so.1 => /usr/lib/x86_64-linux-gnu/mesa/libGL.so.1 (0x00007f4071660000)
    ... 
```

然后，您可以通过省略 ldd 命令来运行您的应用程序。我不确定如何在代码块中使用它，但我假设您可以在运行/调试设置中的某处设置调试环境配置。

谢谢

# ruby-on-rails - Ruby/Rails：了解 ruby getter-setter 方法和实例

> ID：15281215
> 
> 赞同：1
> 
> 时间：2013-03-07T20:35:44.883
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, getter-setter

我是 ruby​​ 和编程的新手，我正在尝试掌握一些关键概念。鉴于我有一个类 Dog，具有以下特征。

```
class Dog
  attr_accessor :type, :popularity, :total

  def initialize(type = nil)
    @type = type
  end

  def total_dogs
    Dog.count
  end

  def total
    Dog.where(:type => self.type).size
  end

  def popularity
    total.to_f/total_dogs
  end
end 
```

我想了解的是 ruby​​ 如何通过 getter/setter 方法将属性保存到实例中。我很清楚，如果我实例化一个新实例，然后将属性保存到该实例，这些属性将绑定到该实例，因为如果我查看对象，则属性显示如下：

```
 @dog = Dog.new
 @dog
 => #<Dog:0x007fa8689ea238 @type=nil> 
```

我很容易理解，当我传递@dog 对象时，它的@type 属性总是为零。但是，我无法理解的情况是，如果我将此 @dog 对象传递给另一个类。就像我这样做：

```
 Owner.new(@dog) 
```

当我在所有者类中并调用@dog.popularity 时，它如何知道该实例的流行度值？在运行时是否处理了所有方法，然后该实例总是与当时的值相关联？抱歉，如果这没有任何意义，或者我离题了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T20:59:18.813

当你这样做

```
@dog = Dog.new 
```

你做了两件事

1）为您的代码当前所在的任何对象创建一个实例变量@dog

2) 实例化 Dog 的新实例（及其所有方法和属性）并将对它的引用分配给 @dog

@dog 是一个变量，它恰好指向您在该点创建的 Dog 实例（“类实例”通常与“对象”含义相同）。您可以将其他变量设置为指向同一个实例，在 Ruby 中，这通常是您传递数据的方式。对象包含实例变量，而这些实例变量指向更多对象。

使用赋值运算符（即“=”），您可以将变量指向任何其他对象。

依次回答您的问题：

> 当我在所有者类中并调用@dog.popularity 时，它如何知道该实例的流行度值？

在 Ruby（以及一般的 OO 语言）中，您必须小心区分描述和问题中的类和对象。Ruby 我假设您指的是 Owner 类中的一行代码，并且您希望它与所有者对象一起使用。我还假设 @dog 是您添加到所有者的属性。

在这种情况下，Ruby 知道，因为 @dog 指向您添加到所有者的 Dog 对象。每个 Dog 对象都有自己的所有 Dog 实例变量的副本。但是在 Ruby 中您确实需要注意，因为变量*指向*对象，所以您不能简单地将同一个 Dog 对象传递给所有所有者（即它们都有效地共享一条狗）。因此，您需要了解何时创建新实例（通过 new）以及何时仅处理现有引用。

> 在运行时是否处理了所有方法，然后该实例总是与当时的值相关联？

不会。在运行时，基本 Ruby 只会执行您已编码的分配。在分配它们的代码运行之前，实例变量甚至可能不存在。如果您使用 attr_reader 等方法，那么变量将至少存在（但除非您在初始化期间分配某些内容，否则将为 nil）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T21:56:06.987

尼尔对此有一个很好的答案，我只是想添加一些东西。

**数狗**:)

你需要一个类变量来做到这一点..

```
class Dog
  @@count = 0     # this is a class variable; all objects created by this class share it

  def initialize
    @@count += 1  # when we create a new Dog, we increment the count
  end
  def total
    @@count
  end
end 
```

还有另一种方法可以使用“类对象的实例变量”来做到这一点，但这是一个有点高级的话题。

**访问实例变量**

在 Ruby 中，变量实际上只是对对象/实例的引用。

```
 > x = 1
 => 1 
 > x.class
 => Fixnum
  > 1.instance_variables
 => [] 
```

x 是对对象 '1' 的引用，它是类 Fixnum 的一个实例。'1' 对象是 Fixnum 的一个实例，它不包含任何实例变量。它与对新“Dog”实例的引用没有任何不同。

类似地，您可以说`x = Dog.new`，那么 x 是对 Dog 类实例的引用。

```
class Dog
  attr_accessor :legs   # this defines the 'legs' and 'legs=' methods!
end

x = Dog.new
x.instance_variables
=> []     # if you would assign legs=4 during "initialize", then it would show up here
x.legs = 4      # this is really a method call(!) to the 'legs' method
x.instance_variables   # get created when they are first assigned a value
 => [:legs] 
```

将这样的引用传递给方法调用，或传递给另一个类，或者只是自己评估它都没有关系 - Ruby 知道它是一个对象引用，并查看对象内部以及它的继承链如何解决问题。

**解析方法名称**

这只是部分事实:) 解释时`x.legs`，Ruby 检查对象的类继承链中是否有一个方法，该方法响应该名称“腿”。它不会神奇地访问具有相同名称的实例变量！

我们可以通过执行“attr_reader :legs”或“attr_accessor :legs”来定义方法“legs”，或者自己定义方法。

```
class Dog
  def legs
     4     # most dogs have 4 legs, we don't need a variable for that
  end
end

x.legs     # this is a method call! it is not directly accessing a :legs instance variable!
 => 4
x.instance_variables
 => []     # there is no instance variable with name ":legs" 
```

如果我们尝试将它实现为方法和实例变量，就会发生这种情况：:)

```
class Dog
   attr_accessor :legs  # this creates "def legs" and "def legs=" methods behind the scenes
   def legs        # here we explicitly override the "def legs" method from the line above.
      4
   end
end

x = Dog.new
x.legs       # that's the method call we implemented explicitly
 => 4
x.legs = 3   # we can still assign something to the instance_variable via legs=
 => 3
x.legs       # the last definition of a method overrides previous definitions
             # e.g. it overrides the automatically generated "legs" method
 => 4 
```

`attr_accessor :legs`只是执行此操作的简写符号：

```
class Dog
  def legs
    @legs
  end 
  def legs=(value)
    @legs = value
  end
end 
```

没有神奇的方法可以自动访问实例变量。它们总是通过一种方法访问，以后可以覆盖该方法。

我希望这对你有意义

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T20:56:49.977

创建对象时，不需要使用`@`符号。变量是对象。因此，如果您有多只狗，您会这样做：

```
myDog = Dog.new(brown)
yourDog = Dog.new(white) 
```

从那里，你可以说：

```
yourDog.type #white
myDog.type #brown 
```

你不会做的是：

```
@dog = Dog.new #myDog
@dog = Dog.new #yourDog 
```

如果您需要一个对象的多个版本，您只需给它们不同的名称。因此，如果您创建多条狗并将它们传递给其他对象，它们将起作用。例如：

假设您的所有者类是：

```
Class Owner
def initialize(pet)
    puts "my pet is #{pet.type}"
end 
```

然后使用实例变量将是：

```
me = Owner.new(myDog) #my pet is brown
you = Owner.new(yourDog) #my pet is white 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T21:13:17.010

“类型”和“流行度”都是“狗”实例上的方法。它们的定义如下：

```
class Dog
  # getter
  def type
    @type
  end

  def popularity
    total.to_f/total_dogs
  end
end 
```

这大致相当于：

```
class Dog
  attr_accessor :type

  def popularity
    total.to_f/total_dogs
  end
end 
```

请注意， attr_accessor 只是定义 getter 方法的快捷方式。如果你自己定义一个方法，那么使用 attr_accessor 是没有意义的：

```
class Dog
  attr_accessor :popularity

  # this will override getter defined by attr_accessor
  def popularity
    total.to_f/total_dogs
  end
end 
```

回到你的问题：@dog.type 在 @dog 上调用 type 方法，它返回它的实例变量；@dog.popularity 调用 @dog 上的流行度方法，它会即时进行计算（由您定义）并返回结果。这里没有魔法！

# android - 将 OAuth2 用于我自己的 Android 应用程序

> ID：15281217
> 
> 赞同：1
> 
> 时间：2013-03-07T20:35:48.853
> 
> 标签：android, database, security, oauth, oauth-2.0

请原谅我的愚蠢，但是否可以使用 OAuth2 之类的东西，以便用户可以安全地登录我的应用程序，即使该应用程序不使用 Facebook 或 Google+ 等的任何功能。所以我只是想要一些东西来验证我的用户。

我的应用程序调用数据库服务器，但目前我没有任何安全性，我什至不知道谷歌是为了什么。我想为数据库上的用户保存加密密码并传回某种令牌以表示他们现在已经登录，但我不知道该怎么做，只是想知道是否有更简单的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T00:10:33.740

我在stackoverflow的线程中阅读了很长时间。我建议通读[*这个*](https://stackoverflow.com/questions/7561631/oauth-2-0-benefits-and-use-cases-why)。如果您阅读了这篇文章，您正在寻找的是一种双向身份验证，因为您已经信任该应用程序（您自己的），您可以使用用户名和密码来信任它。因此，您只需要在服务器上使用您自己的数据库对它们进行身份验证，并向用户提供访问令牌。

# python - 获取可迭代列表组合的优雅方式

> ID：15281221
> 
> 赞同：2
> 
> 时间：2013-03-07T20:36:00.967
> 
> 标签：python, itertools

我有一个可迭代对象的列表，我有兴趣从每个可迭代对象中获取包含 0 或 1 个项目的所有列表（顺序不重要，所以我寻求的是组合而不是排列）。

我在下面发布了一个非常不优雅的实现。

我相信有一种更优雅的方法可以做到这一点，可能是使用`itertools`模块，但我想不出任何东西。有什么建议吗？

* * *

```
import itertools

def all_subsets(ss):
    subset_lens = range(0, len(ss) + 1)
    list_of_subsets = map(lambda n: itertools.combinations(ss, n), subset_lens)
    return itertools.chain.from_iterable(list_of_subsets)

list_of_iterables = [["A1"], ["B1", "B2", "B3"], ["C1", "C2"]]

all_possibilities = itertools.chain.from_iterable(itertools.product(*subset)
                                for subset in all_subsets(list_of_iterables))

# Visual representation of the desired result
for eg in all_possibilities:
    print eg 
```

结果：

```
()
('A1',)
('B1',)
('B2',)
('B3',)
('C1',)
('C2',)
('A1', 'B1')
('A1', 'B2')
('A1', 'B3')
('A1', 'C1')
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T20:52:41.447

这就是我想出的...

```
data = [["A1"], ["B1", "B2", "B3"], ["C1", "C2"]]
data = [[None] + x for x in data]
data = sorted(filter(None, x) for x in itertools.product(*data))
for result in data:
    print result 
```

输出：

```
()
('A1',)
('A1', 'B1')
('A1', 'B1', 'C1')
('A1', 'B1', 'C2')
('A1', 'B2')
('A1', 'B2', 'C1')
('A1', 'B2', 'C2')
('A1', 'B3')
('A1', 'B3', 'C1')
('A1', 'B3', 'C2')
('A1', 'C1')
('A1', 'C2')
('B1',)
('B1', 'C1')
('B1', 'C2')
('B2',)
('B2', 'C1')
('B2', 'C2')
('B3',)
('B3', 'C1')
('B3', 'C2')
('C1',)
('C2',) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T20:52:50.717

```
[filter(None, comb) for comb in itertools.product(*[[None] + it for it in list_of_iterables])] 
```

这做了几个简化的假设。如果您的可迭代对象包含在布尔上下文中不正确的值，则必须使用更复杂的`filter`. 如果您的可迭代对象不是列表，则必须使用`itertools.chain`而不是`[None] + it`.

# c# - 如何从一些对象数组创建一个数组？

> ID：15281224
> 
> 赞同：0
> 
> 时间：2013-03-07T20:36:10.383
> 
> 标签：c#, arrays, object

我在 C# 中进行编程，并且我有一个对象数组（称为`A`）。现在我想要另一个数组，每个单元格都包含一个`A`(Called `B`) 数组。例如：

```
B=[A1,A2,A3]; 
```

有人可以指导我解决问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T20:44:53.057

您可能知道，对象数组`A`定义为：

```
A[] 
```

然后，一个数组...`A`对象数组定义为：

```
A[][] 
```

您可以像这样创建它：

```
A[] a1 = new A[10];
A[] a2 = new A[20];
A[] a3 = new A[5];
A[][] b = new A[][] {a1, a2, a3}; 
```

您可以按以下方式编制索引：

```
var value = b[2][3]; 
```

这将获得索引 2 处的数组和该数组的元素 3。

# primefaces - Glassfish 应用程序未启动

> ID：15281231
> 
> 赞同：0
> 
> 时间：2013-03-07T20:36:35.663
> 
> 标签：primefaces, glassfish-3

我只是在阅读有关在 glassfish 中使用库的信息。也就是说，将 jar 文件放在“集中”位置，以便可以从不同的 Web 应用程序访问它。*domain-dir/lib/ext*就是这样的位置之一。我在那里放了一些jar文件并重新启动了服务器。重启成功，但没有应用程序加载；甚至没有管理控制台。我对此进行了调查，发现罪魁祸首是我放置的 primefaces jar 文件。在移除它时，glassfish 工作正常。我已经尝试了 primefaces 的 3.1 和 3.2 版本，结果是一样的。在检查服务器日志时，我发现在 ext 文件夹中使用 primefaces 时，该类`javax.faces.context.PartialViewContextFactory`无法加载。知道可能是什么原因造成的。我可能应该尝试其他库位置，例如*domain-dir/lib/*但我很好奇。顺便说一句，我正在使用 windows 7 操作系统并使用 glassfish 3.1.1 谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T13:45:46.637

只需将库放入`domains-dir/lib/`.

来自 Glassfish 手册：

> 要使用通用类加载器，请将 JAR 文件复制到 domain-dir/lib 或 as-install/lib 目录或将 .class 文件（和其他需要的文件，例如 .properties 文件）复制到 domain-dir/lib /classes 目录，然后重新启动服务器。使用 Common 类加载器可以让部署在共享相同配置的服务器上的所有应用程序或模块访问应用程序或模块。但是，这种可访问性不会扩展到应用程序客户端。

可以在[此处](https://blogs.oracle.com/sivakumart/entry/classloaders_in_glassfish_an_attempt)找到有关 Glassfish 中的类加载的更多信息。

# python - Kivy你好世界不工作

> ID：15281239
> 
> 赞同：5
> 
> 时间：2013-03-07T20:36:57.490
> 
> 标签：python, ubuntu-12.04, cython, kivy

我正在尝试让 kivy 在我的 Ubuntu 系统上工作。我按照他们网站上的说明进行[操作](http://kivy.org/docs/installation/installation-linux.html)。

但是当我尝试从他们的网站运行以下 hello world 代码时：

```
import kivy
kivy.require('1.5.1') # replace with your current kivy version !

from kivy.app import App
from kivy.uix.button import Button

class MyApp(App):
    def build(self):
        return Button(text='Hello World')

if __name__ == '__main__':
    MyApp().run() 
```

我收到以下错误：

```
[INFO   ] Kivy v1.5.1
[INFO   ] [Logger      ] Record log in /home/malik/.kivy/logs/kivy_13-03-08_6.txt
[INFO   ] [Factory     ] 137 symbols loaded
[DEBUG  ] [Cache       ] register <kv.lang> with limit=None, timeout=Nones
[DEBUG  ] [Cache       ] register <kv.image> with limit=None, timeout=60s
[DEBUG  ] [Cache       ] register <kv.atlas> with limit=None, timeout=Nones
[DEBUG  ] [Cache       ] register <kv.texture> with limit=1000, timeout=60s
[DEBUG  ] [Cache       ] register <kv.shader> with limit=1000, timeout=3600s
[INFO   ] [Text        ] using <pygame> as text provider
[DEBUG  ] [App         ] Loading kv <./my.kv>
[DEBUG  ] [App         ] kv <./my.kv> not found
[INFO   ] [Window      ] using <pygame> as window provider
  X Error of failed request:  BadRequest (invalid request code or no such operation)
    Major opcode of failed request:  138 (ATIFGLEXTENSION)
    Minor opcode of failed request:  66 ()
    Serial number of failed request:  14
    Current serial number in output stream:  14 
```

跟我的显卡有关系吗？我正在使用 ATI Mobility Radeon HD 5400 显卡。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T17:50:24.550

终于通过将 Ubuntu 更新到 12.10 使它工作似乎问题出在图形驱动程序上。现在该示例按预期工作。谢谢琼杰和qua-non。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T20:55:31.997

我按照您提供的说明进行操作。并使用您提供的代码，我得到了这个结果。见图![图1](../Images/024d0a56138a7081e21b1c223fb40062.png)。python版本是python2.7。我使用的系统是ubuntu12.10。

代码需要超级用户权限，我从命令行运行代码：sudo python demo.py

尝试使用“sudo”来运行它。

# javascript - 通过闭包处理数组值

> ID：15281240
> 
> 赞同：1
> 
> 时间：2013-03-07T20:36:58.240
> 
> 标签：javascript, arrays, closures

对上一个问题的困惑感到抱歉。我一直在寻找一种快速的方法来获取和更新存储在闭包函数中的数百个数组值。由于相信闭包更快，我一直远离使用对象，我听说这甚至可能不是真的。我没有通过 onclick 传递变量。这两个功能的性能是我所关心的。我只是想更新一个数组索引，更新后返回数组值，返回原始数组，返回一个空数组。

```
 <script>

function ArrValues(arr){
    if(arr=='ID') return ['ID1','ID2','ID3','ID4','ID5'];
    if(arr=='NAM') return ['cat','dog','fish','bird','horse'];
    if(arr=='COL') return ['blue','yellow','green','pink','green'];
}

function IDUfunc(value,index,action) {
    var arr="ID";
    var IDU=ArrValues(arr);

       return function(value,index,action) {
        if(action==1){}
        if(action==2){IDU[index]=value;}
        if(action==3){IDU=ArrValues(arr);}
        if(action==4){IDU=['empty'];}

        return IDU;
    }
} 
IDU=IDUfunc(0,0,0);

  </script>

  <div onclick="alert(IDU(3,3,4))">test</div> 
```

onclick 中的值表示数组值、数组索引和要执行的操作。（抱歉有任何混淆）。

# php - 通过PHP发送邮件，但是通过JS检查表单是否有效，有点困惑

> ID：15281242
> 
> 赞同：0
> 
> 时间：2013-03-07T20:37:13.620
> 
> 标签：php, javascript

我需要检查表单字段是否为空，如果不是，我需要 JS 返回一个值并通过 PHP 提交表单，然后将其发送到另一个页面，在该页面中编写和发送邮件等，我可以做到这一点。

问题是提交验证表格，这是我所拥有的：

```
 <script>
function popup()
{

if (document.getElementById("email").value == "") {

alert("Please enter a email adress");
return false;

}
else

return true; // this is where i have issues the issue, it returns true, but how do i submit the form when it returns true
}
      </script> 
```

HTML 表单：

```
<form action="email_func.php" class="signup_form" data-remote="true" id="signup_form" method="post" >

<input class="txt accent-color colorize_border-color required" id="email" name="email" placeholder="Indtast din E-mail" data-label-text="Email" type="email">

<input class="submit button big btn" id="submit_button" name="submit" value="abc" onclick="popup()">

</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T20:39:35.657

```
onclick="return popup()" 
```

会成功的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T21:12:41.153

这就是您可能正在寻找的，但我不太确定

```
<form action="email_func.php" class="signup_form" data-remote="true" id="signup_form" method="post" onsubmit="return popup();"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T20:50:14.923

onclick 事件不应该放在 input 标签中，而应该放在 form 标签中。所以使用这个：

```
 <form action="email_func.php" class="signup_form" data-remote="true" id="signup_form" method="post" onclick="return popup()"> 
```

# java - 如何使用比最新 TZupdater 版本更新的 IANA 文件更新 Java 时区信息？

> ID：15281244
> 
> 赞同：5
> 
> 时间：2013-03-07T20:37:21.667
> 
> 标签：java, timezone

最新的 Java 时区更新工具 (TZUpdater) 包含一个较旧的时区数据文件，该文件没有计划在本周末对智利进行的时区更改。

[IANA 时区数据库](http://www.oracle.com/technetwork/java/javase/tzdata-versions-138805.html)拥有智利时区变化的最新信息。

如何将最新的 IANA 文件 (tzdata2013a.tar.gz) 与 TZupdater 一起使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T20:55:12.100

如果您的应用程序专门使用 Joda Time，则似乎可以为 Joda 时间[更新数据库](http://joda-time.sourceforge.net/tz_update.html)。但是我还没有看到在整个 JVM 上使用时间文件的认可方式。

但是，[这篇 SF 帖子](https://serverfault.com/questions/368985/install-java-timezone-update)可能会有所帮助......如果你走这条路，我会首先在一个相同但一次性的 OS/jvm 系统上进行大量测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T06:05:48.123

甲骨文终于贴出一条说明，更新的[TZupdater](http://www.oracle.com/technetwork/java/javase/tzdata-versions-138805.html)可用：

> 包含 Olson 2013a 更新的 TZUT v1.3.54 现在可供拥有使用 Java 的受支持 ORACLE 产品或持有 Java SE 合同的客户使用。请联系您当地的 Oracle 支持办公室以获取此版本。如有问题，请联系 Oracle 支持。

除了提供将近两天的通知以便您有足够的时间进行测试外，该文件还没有在网页上提供，您必须联系 Oracle 支持以获取副本。

好吧，这是确保您为支持付费的一种方法“付款或其他，我们担心您的软件可能会发生一些不好的事情”

# javascript - AngularJS：在包含对作用域属性的引用的指令中自定义模板

> ID：15281246
> 
> 赞同：0
> 
> 时间：2013-03-07T20:37:27.973
> 
> 标签：javascript, angularjs, angularjs-directive

我正在尝试在指令中自定义模板，并在父范围中包含对属性的引用。我对 Angular 还是很陌生，但我已经进行了相当多的搜索，并且我的尝试基于[Customizing the template within a Directive](https://stackoverflow.com/q/10629238/2142116)。但是，如果我将对父作用域变量的引用作为属性传递给指令，则它不会得到解析，可能是因为在调用 compile 函数时它仍然未定义。

我的指令定义如下所示：

```
app.directive('sectionHeader', function() {
  return {
    restrict: 'EC',
    replace: true,
    transclude: true,
    scope: {sectionName:'@sectionName', imageUrl:'@imageUrl'},
    compile: function(element, attrs) {
      var imageHtml = attrs.hasOwnProperty('imageUrl') ? '<div style="float: left; padding-right: 5px;"><img class="float_left" src="' + attrs.imageUrl + '" alt=""/></div>' : '';
      var htmlText =
        '<div>' + imageHtml + '<h1 class="float-left">' + attrs.sectionName + '</h1>' +
        '<div class="clear"></div>' +
        '<div class="modal_hr"></div></div>';
      element.replaceWith(htmlText);
    },
  };
}); 
```

我正在使用这样的指令：

```
 <div class="section-header" section-name="{{currentFeatureName}}"></div> 
```

问题是在指令上调用编译函数时，我的控制器中的 {{currentFeatureName}} 变量似乎没有定义。

我考虑过解决这个问题的一种方法是在 compile 函数中在 sectionName 属性上设置一个观察者函数，当它看到更改时更新 h1 元素内容。这似乎有点笨拙，我想知道是否有更好或更优雅的方式来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T20:55:19.060

你对为什么这不起作用是正确的。当编译和链接函数运行时，内插属性*不可*用，因为尚未发生摘要以将内插解析为值。[您可以在此处](http://docs.angularjs.org/guide/directive)阅读有关此内容的更多信息。您对解决方案也是正确的：使用`attrs.$observe( 'sectionName', function ( val ) { ... });`

但是，您似乎不需要动态模板。如果这是您的模板：

```
<div>
  <div style="float: left; padding-right: 5px;" ng-show="{{imageUrl}}">
    <img class="float_left" ng-src="{{imageUrl}}" alt="" />
  </div>
  <h1 class="float-left">{{sectionName}}</h1>
  <div class="clear"></div>
  <div class="modal_hr"></div>
</div> 
```

那么你就不需要编译**或**链接函数中的**任何逻辑了。**也许这种模式也会对您有所帮助。

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T21:00:20.273

查看[Directive docs](http://docs.angularjs.org/guide/directive)`$observe`中的函数。

但除此之外，实际上似乎没有必要做你想做的事情。看：

```
var app = angular.module('plunker', []);
app.controller('AppController',
    [
      '$scope',
      function($scope) {
        $scope.currentFeatureName = 'Current Feature Name';
        $scope.imageUrl = "https://lh3.googleusercontent.com/GYSBZh5RpCFwTU6db0JlHfOr_f-RWvSQwP505d0ZjWfqoovT3SYxIUPOCbUZNhLeN9EDRK3b2g=s128-h128-e365";
      }
    ]
  );

app.directive('sectionHeader', function() {
  return {
    restrict: 'EC',
    replace: true,
    transclude: true,
    scope: {
      sectionName:'@',
      imageUrl:'@'
    },
    template: '<div><div style="float: left; padding-right: 5px;" ng-show="imageUrl"><img class="float_left" ng-src="{{imageUrl}}" alt=""/></div><h1 class="float-left">{{sectionName}}</h1><div class="clear"></div><div class="modal_hr"></div></div>'
  };
}); 
```

HTML：

```
<div ng-controller="AppController">
  <div class="section-header" section-name="{{currentFeatureName}}" image-url="{{imageUrl}}"></div>
</div> 
```

[笨蛋。](http://plnkr.co/edit/qAvQNPyaMqY0WVC0gJum)**

# matlab - 基础 MATLAB 中是否有一个函数可以返回变量的可打印表示以在 eval 或控制台中使用？

> ID：15281247
> 
> 赞同：3
> 
> 时间：2013-03-07T20:37:29.157
> 
> 标签：matlab

例如，如果我将此矩阵存储在`mat`：

```
0.9058    0.1270    0.9134
0.6324    0.0975    0.2785 
```

是否有一些函数`func(mat)`会返回一个字符串，我可以传入`eval`或在控制台上使用来重新声明该变量，例如：

```
[0.9058,0.1270,0.9134;0.6324,0.0975,0.2785] 
```

我没有想出任何搜索[文档](http://www.mathworks.com/help/matlab/index.html)的内容，但我在其他语言中找到了类似的功能，例如 Python 的`repr`，在交互/控制台使用期间非常方便。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T20:40:11.510

编辑：原来的答案完全是假的，这里有一个更好的：

怎么样`mat2str(mat)`？

[http://www.mathworks.se/help/matlab/ref/format.html](http://www.mathworks.se/help/matlab/ref/format.html)

> str = mat2str(A) 将矩阵 A 转换为字符串。此字符串适用于 eval 函数的输入，以便 eval(str) 生成精度在 15 位以内的原始矩阵。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T22:25:27.077

替代解决方案是来自[FileExchange](http://www.mathworks.com/matlabcentral/fileexchange/8933-matrix2m)的 MATRIX2M。它也可以与 3D 矩阵一起使用，`mat2str`但不能。虽然输出不是那么漂亮。

```
>> x = rand([1 2 2]);
>> Matrix2M('x')
ans =
x = zeros(1,2,2);
x(1,1,1) = 0.16218230819324275;
x(1,2,1) = 0.79428454068390697;
x(1,1,2) = 0.31121504204480488;
x(1,2,2) = 0.52853313550621273;

>> class(ans)
ans =
char 
```

# sql - 为什么此查询中没有使用聚集索引？

> ID：15281252
> 
> 赞同：1
> 
> 时间：2013-03-07T20:38:02.793
> 
> 标签：sql, sql-server, sql-server-2008

我有下表：

```
CREATE TABLE [Cache].[Marker](
    [ID] [int] NOT NULL,
    [SubID] [varchar](15) NOT NULL,
    [ReadTime] [datetime] NOT NULL,
    [EquipmentID] [varchar](25) NULL,
    [Sequence] [int] NULL
) ON [PRIMARY] 
```

使用以下聚集索引：

```
CREATE UNIQUE CLUSTERED INDEX [IX_Marker_EquipmentID_ReadTime_SubID] ON [Cache].[Marker] 
(
    [EquipmentID] ASC,
    [ReadTime] ASC,
    [SubID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
GO 
```

这个查询：

```
Declare @EquipmentId nvarchar(50)

Set @EquipmentId = 'KLM52B-MARKER'

SELECT TOP 1 
    cr.C44DistId,
    cr.C473RightLotId
From Cache.Marker m
    INNER JOIN Cache.vwCoaterRecipe AS cr ON cr.MarkerId = m.ID
Where m.EquipmentID = @EquipmentId And m.ReadTime >= '3/1/2013'
ORDER BY m.Id desc 
```

这是正在生成的查询计划：

![在此处输入图像描述](../Images/680be8b38045a2568d4fe9d73c438758.png)

我的问题是这个。为什么 Cache.Marker 表上的聚集索引不用于查找而不是扫描另一个索引？此外，SSMS 查询分析器建议我在 Marker.ReadTime 上添加一个索引，其中包含 ID 和 EquipmentID 列。

Cache.Marker 表中大约有 1M 行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T20:44:35.150

你有多少个唯一的设备 ID？它可能决定 date 是一个更好的第一次查找（可能是错误的）。`WITH( INDEX() )`您可以通过语句强制它使用您的索引。`FORCESEEK`也可以提供帮助。我强烈推荐这样做，因为随着数据库增长到大型，索引行为是可以预测的。

```
SELECT TOP 1 
    cr.C44DistId,
    cr.C473RightLotId
From Cache.Marker m
     WITH ( INDEX( IX_Marker_EquipmentID_ReadTime_SubID ), FORCESEEK )
    INNER JOIN Cache.vwCoaterRecipe AS cr 
    ON cr.MarkerId = m.ID
Where m.EquipmentID = @EquipmentId And m.ReadTime >= '3/1/2013'
ORDER BY m.Id desc 
```

# git - 如何将外部 Emacs 配置文件添加到 Git 存储库？

> ID：15281258
> 
> 赞同：1
> 
> 时间：2013-03-07T20:38:28.440
> 
> 标签：git, emacs, github, symlink

我在 OSX 上使用 Aquamacs Emacs 和 GitHub。我正在尝试将我的 Emacs 配置文件添加到我的 Emacs 文件的 Git 存储库中。

我的 Emacs 文件的 Git 存储库位于`~/elisp/`

我在另外两个地方有 Emacs 配置文件： 1\. 一个文件：`~/.emacs` 2\. 一个目录：`~/Library/Application Support/Aquamacs\ Emacs`

我尝试将文件和目录移动到`~/elisp`其中，以便可以在 Git 中跟踪它们，然后使用符号链接将它们虚拟地恢复到原始位置。

在我的`~/elisp`目录中，我这样做了：

```
mv .emacs elisp/.emacs
ln -s elisp/.emacs .emacs
mv Aquamacs\ Emacs ~/elisp/Aquamacs\ Emacs
ln -sf ~/elisp/Aquamacs\ Emacs ~/Library/Application\ Support/Aquamacs\ Emacs 
```

这似乎有效，并且 Emacs 似乎运行正常。

但是，现在我无法将目录提交到存储库：

```
~/elisp/ git:(master) $ git status
# On branch master
# Changes not staged for commit:
#   (use "git add <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#   (commit or discard the untracked or modified content in submodules)
#
#   modified:   Aquamacs Emacs (modified content)
#
no changes added to commit (use "git add" and/or "git commit -a")

~/elisp/ git:(master) $ git add .

~/elisp/ git:(master) $ git status
# On branch master
# Changes not staged for commit:
#   (use "git add <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#   (commit or discard the untracked or modified content in submodules)
#
#   modified:   Aquamacs Emacs (modified content)
#
no changes added to commit (use "git add" and/or "git commit -a")

~/elisp/ git:(master) $ git add Aquamacs\ Emacs

~/elisp/ git:(master) $ git status
# On branch master
# Changes not staged for commit:
#   (use "git add <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#   (commit or discard the untracked or modified content in submodules)
#
#   modified:   Aquamacs Emacs (modified content)
#
no changes added to commit (use "git add" and/or "git commit -a")

~/elisp/ git:(master) $ git commit -m "moved folder"
# On branch master
# Changes not staged for commit:
#   (use "git add <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#   (commit or discard the untracked or modified content in submodules)
#
#   modified:   Aquamacs Emacs (modified content)
#
no changes added to commit (use "git add" and/or "git commit -a") 
```

有什么想法吗？谢谢你。

# html - 容器不为子 div 调整大小

> ID：15281259
> 
> 赞同：2
> 
> 时间：2013-03-07T20:38:31.807
> 
> 标签：html, css

[点击这里查看视觉](http://waly1039.com/content/page/everything-kitchen-sink#overlay-context=content/page/everything-kitchen-sink)

从图片中可以看出，我的父容器没有扩展以适应我的子容器。页面容器 (#contain) 实际上停在厨房照片的左下角。子容器 (#zone2) 明显溢出到其父容器 (#contain) 之外。我希望能够让（#contain）自动扩展以适应（#zone2）。CSS是：

```
#contain {
    position: relative;
    width: 100%;
    margin: 0 px;
    background: #E3DCCC;
    z-index: 0;
}

#zone1 {
    width: 100%;
    height: 850px;
    background: url(http://waly1039.com/sites/default/files/k4.jpg) no-repeat center   top;
    position: absolute;
    z-index: -1;
}
#head {
    position: absolute;
    top: 20px;
    width: 100%;
    height: 330px;
}

#head img {
    max-width: auto;
    height: auto;
}

#zone2 {
    position: relative;
    overflow: hidden;
    padding: 3px;
    top: 360px;
    float: right;
    right: 15px;
    width: 53%;
    height: auto;
    border: 4px solid #715E40;
    background-color: white;
}
#zone2 img {
      max-width:100%;
      height: auto;
      float:left;
      margin: 5px;
}

#zone3 {
    position: relative;
    top: 710px;
    left: 15px;
    float: left;
    height: 340px;
    width: 38%;
    border: 4px solid #715E40;
    background-color: white;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T20:42:37.280

这是一个浮动问题。尝试将传统的 CSS 清除修复添加到 #zone2 的容器：

```
.container:after{
  visibility: hidden;
  display: block;
  font-size: 0;
  content: " ";
  clear: both;
  height: 0;
} 
```

一定要把它放在 :after 伪选择器中，否则它对你不起作用。浮动元素存在于正常文档流之外，这就是为什么容器没有扩展以包含它们的原因。clear 修复强制清除浮动，这将导致容器围绕该元素的底部展开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T21:31:05.653

我测试了添加更多图像`#zone2`并`#contain`垂直扩展。不知何故，你有一个元素`#zone2`没有被添加到父元素的总高度中。

如果您想快速修复以继续前进，请添加`margin-bottom: 30px;`到`#zone2`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T21:33:35.150

我已经复制了您的问题并能够通过以下方式解决它：您可能想尝试一下。它看起来有点奇怪，所以如果你愿意，可以为它开设一个课程。我更关心它的放置位置。

在您的代码行下方，添加我的第三行。就这样，你就完成了。请注意，它更多关于定位。

```
<div id="zone3"></div>
<div id="zoneclear"></div>
<br style="clear:both; float:none; display:block; height:1px;" /> 
```

只需添加第三行。

只需修改您的一种样式：

```
#zoneclear {   
    clear: both;
    float:none;
    display:block;  
    height: 30px;
    position: relative;
} 
```

[编辑] 代码在 Firefox 中有一个严重的错误，谷歌浏览器中不存在该错误（由于您的相对定位，我之前测试过。所以我修改了#zoneclear 样式来解决这个问题。您可能需要测试是否其他浏览器喜欢这个黑客。

希望对你有帮助

# ruby-on-rails - Rails 验证：计数关联不包括要删除的对象？

> ID：15281260
> 
> 赞同：1
> 
> 时间：2013-03-07T20:38:34.160
> 
> 标签：ruby-on-rails, activerecord

我有一个看起来像这样的模型：

```
class thing < ActiveRecord::Base
  has_many :bobbles

  validate :has_two_bobbles
  def has_two_bobbles
    unless self.bobbles.size == 2
      errors.add(:bobbles, "Need two bobbles")
    end
  end
end 
```

从表单更新时我遇到了麻烦。如果我删除一个 bobble 并在同一个提交中添加一个 bobble，当我点击 self.bobbles.size 我得到 3 而不是 2。是否有任何地方可以限制 self.bobbles 只返回那些没有计划删除的记录？

我知道在控制器中您可以访问参数中的 _destroy，但是模型级别是否有任何内容表明是否要删除记录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T20:56:39.500

记录在响应时将死`.marked_for_destruction?`

```
class thing < ActiveRecord::Base
  has_many :bobbles

  validate :has_two_bobbles
  def has_two_bobbles
    unless self.bobbles.select {|t| !t.marked_for_destruction?}.size == 2
      errors.add(:bobbles, "Need two bobbles")
    end
  end
end 
```

# arrays - 在 Excel 数组 IF 公式输出中排除空白/错误单元格

> ID：15281261
> 
> 赞同：1
> 
> 时间：2013-03-07T20:38:40.593
> 
> 标签：arrays, excel-formula

我很难让数组公式按照我希望的方式工作。

在未排序的日期列中，我希望它将值提取到新列中。下面的公式标识给定月份和年份的所需单元格，但它们出现在原始行中，而不是在输出范围的顶部。此外，我希望将所有 ""/FALSE 单元格从输出数组中排除。

```
=IF((MONTH($I$15:$I$1346)=1)*(YEAR($I$15:$I$1346)=2008),$I$15:$I$1346,"") 
```

事实上，$I$15:$I$1346 应该是动态的，并转到最后填充的范围（我可以为此创建一个命名范围）

第二部分是扩展该公式，以便计算作为上述数据的两列偏移量的数据。

以上内容是否可以通过 IF、INDEX、SMALL 和其他的组合构建到一个单元格中？

我不是在寻找过滤器解决方案。希望以上内容足够清楚，并且您可以提供帮助！

这是一个缩短的示例布局：

```
 A           B          C
1   Date        Series_A   Series_B
2   03/01/2011  45         20
3   04/01/2011  73         30
4   06/01/2011  95         40
5   08/01/2011  72         50
6   06/02/2011  5          13
7   09/02/2011  12         #N/A
8   05/02/2011  23         65
9   07/03/2011  12         65 
```

然后我想要三个输入单元格作为年份和月份和系列名称（索引/匹配，因为有更多的数据列）。如果是 2011 年 2 月和 Series_A，我希望它计算该月的平均值。在这种情况下，它将是 (5+12+23)/3。如果它是 2011 年 2 月和 Series_B，它有错误，它应该显示 (13+65)/2 而不是错误。

除此之外，我想要一个单独的，它将输出一个包含数据的数组，而不是中间没有“洞”并且具有正确的“长度”。C 列中 2011 年 2 月的示例：

```
 A           B          C                  D
1   Date        Series_A   Desired Output     Output based on f above
2   03/01/2011  45         5                  
3   04/01/2011  73         12
4   06/01/2011  95         23
5   08/01/2011  72         
6   06/02/2011  5                             5
7   09/02/2011  12                            12
8   05/02/2011  23                            23
9   07/03/2011  12 
```

如果我然后运行 ​​=ISBLANK(C5) 它应该是真的，而不是 =""=C5

希望编辑澄清

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T17:34:10.763

我联系了各种平台以获得答案，在这里你有一个可以的。仍然没有完全回答第 1 部分，但仍然有效。

[http://www.excelforum.com/excel-formulas-and-functions/905356-exclude-blank-false-cells-in-in-excel-array-if-formula-output.html](http://www.excelforum.com/excel-formulas-and-functions/905356-exclude-blank-false-cells-in-in-excel-array-if-formula-output.html)

# android - 如何检测何时释放触摸？

> ID：15281263
> 
> 赞同：2
> 
> 时间：2013-03-07T20:38:57.390
> 
> 标签：android, touch, libgdx, touch-event

我正在尝试找到一种方法来检测何时使用`gdx.input`libgdx 的一部分释放了触摸点。我知道确定何时释放触摸点的 Android 方式，如此处所述[，](https://stackoverflow.com/questions/5765904/touch-release-method-in-android)但我正在寻找一种特定于 libgdx 的方式来执行此操作。

如何检测何时释放触摸？我找不到在`gdx.input`.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-07T21:01:56.343

根据 libgdx wiki，您必须实现该`InputProcessor`接口。在界面中有一个函数被`touchUp`调用，当触摸被释放时应该调用它。

您可以在此处阅读有关使用 libgdx 进行触摸输入的所有信息：[http ://code.google.com/p/libgdx/wiki/InputEvent](http://code.google.com/p/libgdx/wiki/InputEvent)

wiki 上有一个相当简单的例子。这是实现的接口：

```
public class MyInputProcessor implements InputProcessor {
    @Override
    public boolean keyDown (int keycode) {
        return false;
    }

    @Override
    public boolean keyUp (int keycode) {
        return false;
    }

    @Override
    public boolean keyTyped (char character) {
        return false;
    }

    @Override
    public boolean touchDown (int x, int y, int pointer, int button) {
        return false;
    }

    @Override
    public boolean touchUp (int x, int y, int pointer, int button) {
        return false; /* This should be what you're looking for. */
    }

    @Override
    public boolean touchDragged (int x, int y, int pointer) {
        return false;
    }

    @Override
    public boolean touchMoved (int x, int y) {
        return false;
    }

    @Override
    public boolean scrolled (int amount) {
        return false;
    }
} 
```

如何将您的班级设置为听众：

```
MyInputProcessor inputProcessor = new MyInputProcessor();
Gdx.input.setInputProcessor(inputProcessor); 
```

# ajax - Updatepanel 不会调用控件事件方法

> ID：15281270
> 
> 赞同：0
> 
> 时间：2013-03-07T20:39:57.897
> 
> 标签：ajax, updatepanel

我有一个包含母版页的网页。它有两个下拉菜单。在 dropdown1 的 Selected index chagne 上，我称 dropdown1_selectedindex 已更改。但是，当我在第一个下拉菜单中更改选择时，什么也没有发生。我已将脚本管理器放在母版页中。控制页面中的更新面板。更新面板包含两个下拉菜单。请帮帮我。我是一个初学者，我认为这将是非常简单的。我在这里想念什么？

这是.aspx

```
 <%@ Page Language="C#" AutoEventWireup="true" MasterPageFile="~/Site.master"     CodeBehind="Emailer.aspx.cs" Inherits="ServiceAlertEmailerGUI.Emailer" %>

    <asp:Content ID="HeaderContent" runat="server" ContentPlaceHolderID="HeadContent">
    </asp:Content>
    <asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
    <%--    <h2>
        Welcome to ASP.NET!
     </h2>--%>
    <%--    <p>
            To learn more about ASP.NET visit <a href="http://www.asp.net" title="ASP.NET Website">www.asp.net</a>.
    </p>--%>
    <%--    <p>
        You can also find <a href="http://go.microsoft.com/fwlink/?LinkID=152368&amp;clcid=0x409"
            title="MSDN ASP.NET Docs">documentation on ASP.NET at MSDN</a>.
    </p>--%>

    <script type="text/javascript">
        function HandleIT() {
            alert("called");
        }
    </script>

    <asp:Label ID="Label1" runat="server" Text="Status:"></asp:Label>
    <asp:RadioButton ID="RadioButton1" Text="New Alert"  GroupName="Status" runat="server" /> 
    <asp:Label ID="Label2" runat="server" Text="Select Application: "></asp:Label> 
    <asp:UpdatePanel runat="server" ChildrenAsTriggers="true" UpdateMode="Conditional">
    <ContentTemplate>
    <asp:DropDownList ID="ddApplicationList" runat="server" 

            OnSelectedIndexChanged="ddApplicationList_SelectedIndexChanged">
    </asp:DropDownList>
    <br />
    <asp:RadioButton ID="RadioButton2" GroupName="Status" Text="Update"  runat="server" />
    <asp:Label ID="Label3" runat="server" Text="Select  Service: "></asp:Label>
    <asp:DropDownList ID="ddServcieList" runat="server" >
    </asp:DropDownList>
    </ContentTemplate>
    <%--
     <Triggers> 
            <asp:AsyncPostBackTrigger ControlID="ddApplicationList" EventName="ddApplicationList_SelectedIndexChanged" /> 
        </Triggers> 
   --%>
         </asp:UpdatePanel>
    <br />
     <asp:RadioButton ID="RadioButton3" GroupName="Status" Text="Resolved"   runat="server" /><br />
     <asp:RadioButton ID="RadioButton4" GroupName="Status" Text="Resolved (No Email)"  runat="server" />
    <asp:Button ID="Button1" runat="server" Text="Build Template" Width="144px" />
    <br />
    <asp:RadioButton ID="RadioButton5" GroupName="Status" Text="Root Cause"   runat="server" /><br />
    <br />

   </asp:Content> 
```

这是母版页

```
 <%@ Master Language="C#" AutoEventWireup="true" CodeBehind="Site.master.cs" Inherits="ServiceAlertEmailerGUI.SiteMaster" %>

    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
   <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
    <head runat="server">
        <title></title>
        <link href="~/Styles/Site.css" rel="stylesheet" type="text/css" />
        <asp:ContentPlaceHolder ID="HeadContent" runat="server">
        </asp:ContentPlaceHolder>
    </head>
    <body>
    <form runat="server">
    <asp:ScriptManager ID="AjaxManager" EnablePageMethods ="true" EnablePartialRendering = "true" runat="server">
    </asp:ScriptManager>
    <div class="page">
        <div class="header">
            <div class="title">
                <h1>
                   Service Alert Emailer
                </h1>
            </div>
    <%--            <div class="loginDisplay">
                <asp:LoginView ID="HeadLoginView" runat="server" EnableViewState="false">
                    <AnonymousTemplate>
                        [ <a href="~/Account/Login.aspx" ID="HeadLoginStatus" runat="server">Log In</a> ]
                    </AnonymousTemplate>
                    <LoggedInTemplate>
                        Welcome <span class="bold"><asp:LoginName ID="HeadLoginName" runat="server" /></span>!
                        [ <asp:LoginStatus ID="HeadLoginStatus" runat="server" LogoutAction="Redirect" LogoutText="Log Out" LogoutPageUrl="~/"/> ]
                    </LoggedInTemplate>
                </asp:LoginView>
            </div>--%>
            <div class="clear hideSkiplink">
                <asp:Menu ID="NavigationMenu" runat="server" CssClass="menu" EnableViewState="false" IncludeStyleBlock="false" Orientation="Horizontal">
                    <Items>
                        <asp:MenuItem NavigateUrl="~/Default.aspx" Text="Emailer"/>
                        <%--<asp:MenuItem NavigateUrl="~/About.aspx" Text="About"/>--%>
                    </Items>
                </asp:Menu>
            </div>
        </div>
        <div class="main">
            <asp:ContentPlaceHolder ID="MainContent" runat="server"/>
        </div>
        <div class="clear">
        </div>
    </div>
    <div class="footer">

    </div>
    </form>
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T15:14:05.347

感谢你们试图提供帮助。

我发现了触发器中的错误。在触发器中，eventname 应该是事件名称 SelectedIndexChanged 而不是 ddApplicationList_SelectedIndexChanged。

```
<Triggers>
            <asp:AsyncPostBackTrigger ControlID="ddApplicationList" EventName = "SelectedIndexChanged"/>
</Triggers> 
```

抱歉，我丢失了给我这个答案的另一个链接。

# android - 如何通过 GCM 服务器将 XML 文件从服务器推送到 android 应用程序

> ID：15281272
> 
> 赞同：2
> 
> 时间：2013-03-07T20:40:02.293
> 
> 标签：android, xml, xml-parsing, push

我正在尝试基于 GCM 的 android 应用程序将消息从服​​务器推送到 android 客户端。我可以使用以下 coe 推送修复字符串。我想知道从服务器推送 XML 文件并在 android 应用程序中解析的方法。我做了一些研究，但我找不到推送 XML，而是找到了发送 XML 文件。谢谢

```
if (androidArray.size() == 1) {

    String registrationId = androidArray.get(0);
    Message message = new Message.Builder()
    .collapseKey(collapseKey)
    .timeToLive(30)
    .delayWhileIdle(true)
    .addData("message", Message)
    .build();

    Result result = sender.send(message, registrationId, 5); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T21:01:49.923

您不会将 xml（或最好是 JSON）推送到 android 应用程序。您向应用程序发送一条简单的消息。当应用程序收到消息时，它需要从网站上提取 xml/json，并使用 http get 请求到将提供 xml 的相关 url。然后，android 应用程序可以解析响应并做任何你想做的事情。

这是关于 C2DM（GCM 的先驱）的优秀教程[http://www.vogella.com/articles/AndroidCloudToDeviceMessaging/article.html](http://www.vogella.com/articles/AndroidCloudToDeviceMessaging/article.html) 您应该能够找出所需的差异。

**更新**

Google Android 有一个关于 GCM 的完整部分，可以在这里找到 [http://developer.android.com/google/gcm/index.html](http://developer.android.com/google/gcm/index.html)

在该链接中，有入门指南和 GCM 演示应用程序

您可以发送的数据量是有限制的，您不应依赖您的数据不会超过限制或 Google 任意更改允许您发送的数据量。

如果发生其中任何一种情况，您将需要更新您的应用程序，因此请首先正确执行。

您发送的消息应充当“密钥”，以确定收到消息时要采取的操作。

**更新**

如果您真的很喜欢冒险，您可以使用自定义同步适配器来帮助您使用 Web 服务。这是相当高级的东西，但如果您对此感到好奇，请观看关于使用 RESTfull Web 服务的 Google I/O 研讨会[http://www.youtube.com/watch?v=xHXn3Kg2IQE](http://www.youtube.com/watch?v=xHXn3Kg2IQE)

# eclipse - 在 Eclipse indigo 上安装 egit 依赖项失败

> ID：15281273
> 
> 赞同：1
> 
> 时间：2013-03-07T20:40:05.053
> 
> 标签：eclipse, git, ubuntu

我在尝试在 Ubuntu 12.04 上的 Eclipse Indigo 中安装 EGit 时遇到了这个问题：

> 无法完成安装，因为找不到一项或多项所需项目。正在安装的软件：EGit Plug-in Import Support 2.3.1.201302201838-r (org.eclipse.egit.import.feature.group 2.3.1.201302201838-r)
> 缺少要求：EGit Plug-in Import Support 2.3.1.201302201838-r (org. eclipse.egit.import.feature.group 2.3.1.201302201838-r) 需要 'org.eclipse.team.core 3.6.100' 但找不到

这是完整的 Eclipse 版本，如“关于”对话框中所示：

```
Version: 3.7.2
Build id: I20110613-1736 
```

我正在使用 Indigo 安装附带的默认 egit 更新源：

```
http://download.eclipse.org/egit/updates 
```

我按“全选”按钮进行更新，但它一直显示该错误。我之前也负责更新所有内容，但它继续失败。

有任何想法吗？

提前非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-26T18:03:37.147

选择要安装的内容时取消选中 EGit 导入支持功能。它是可选的，并且在 indigo 中似乎不受支持。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T06:52:09.420

您的 Eclipse 版本需要为 3.8 或更高版本。您必须已经从 Ubuntu 或 Synaptic 的软件中心安装了 Indigo，因为这就是安装的内容。您可以从[Eclipse](http://www.eclipse.org/downloads/)项目下载适合您的 Juno。这是一个 tar.gz，您只需将其解压缩到您想要的目录并运行它。您可以使用相同的工作区。

# php - 在 PHP 中访问其子类中的抽象类非静态变量

> ID：15281277
> 
> 赞同：1
> 
> 时间：2013-03-07T20:40:13.053
> 
> 标签：php, oop, inheritance, abstract-class, abstract

我有一个抽象类，基本上它定义了一堆**常量、变量、抽象方法和非抽象/常规方法**。它的典型结构是这样的：

```
abstract class ClassName{
 const CONSTANT_NAME = "test";
 protected static $variable_1 = "value";
 protected $variable_2 = "value_2";
 protected $variable_3 = "value_3"
 abstract function doSomething();
 protected function doSomethingElse();
} 
```

困境是当我扩展这个类时，需要访问我的子类中的受保护变量，例如：

```
public class ChildClassName extends ClassName{

   public function accessParentClassMembers()
   {
    echo parent::$variable_1;  // WORKS FINE
    echo parent::$variable_2; // OBVIOUSLY DOESN'T WORK because it is not a static variable
   }
} 
```

问题是，我如何访问$variable_2，即子类如何访问**抽象父类****成员变量**？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T20:43:10.290

你有三个错误。这是一个工作示例。见代码注释

```
//    |------- public is not allowed for classes in php
//    |
/* public */ class ChildClassName extends ClassName{

       // has to be implemented as it is declared abstract in parent class
       protected function doSomething() {

       }

       public function accessParentClassMembers() {

           // note that the following two lines follow the same terminology as 
           // if the base class where non abstract

           // ok, as $variable_1 is static
           echo parent::$variable_1;

           // use this-> instead of parent:: 
           // for non static instance members
           echo $this->variable_2;
   }
} 
```

* * *

进一步注意，这：

```
protected function doSomethingElse(); 
```

在父类中不起作用。这是因为所有非抽象方法都必须有一个主体。所以你有两个选择：

```
abstract protected function doSomethingElse(); 
```

或者

```
protected function doSomethingElse() {} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T20:48:59.147

```
abstract class ClassName{
  protected static $variable_1 = "value";
  protected $variable_2 = "value_2";
  protected $variable_3 = "value_3";
}
class ChildClassName extends ClassName{
  protected $variable_3 = 'other_variable';
  public function accessParentClassMembers()
  {
    echo parent::$variable_1;
    echo $this->variable_2;
    echo $this->variable_3;
    $parentprops = get_class_vars(get_parent_class($this));
    echo $parentprops['variable_3'];
  }
} 
```

# angular-ui - 在 AngularUI 的 nggrid 中，在焦点单元格选择示例上编辑不 .... 在焦点上编辑

> ID：15281278
> 
> 赞同：2
> 
> 时间：2013-03-07T20:40:15.360
> 
> 标签：angular-ui

Ng-grid 在它的页面上有这个例子，

标题：编辑焦点单元格选择示例

pluker 是：[http ://plnkr.co/edit/mfIWpK?p=preview](http://plnkr.co/edit/mfIWpK?p=preview)

我没有看到任何编辑被触发......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T21:58:41.073

该属性在最新版本 2.0.0 中已更改。就是现在

```
enableCellEdit: true 
```

[http://plnkr.co/edit/EzCZcM?p=preview](http://plnkr.co/edit/EzCZcM?p=preview)

# joomla - Joomla Chronoforms 在登录时工作，但在以访客身份浏览时不工作

> ID：15281279
> 
> 赞同：1
> 
> 时间：2013-03-07T20:40:22.503
> 
> 标签：joomla, mootools, chronoforms

我决定在这里问这个问题，因为这可能与 Chronoforms-plugin 不完全相关。我的问题是我用 Chronoforms 制作了一个自定义的 Joomla 注册表单，但是当我尝试提交它时，页面只是刷新了。事实上，如果我没有登录，Chronoforms 制作的任何表格都不起作用。但如果我登录了，它们都可以正常工作。

我的猜测是，这与 Mootools 有关，因为 Chronoforms 正在使用 Mootools，当我登录时，该站点似乎正在加载 Mootools，以便表单工作。但我不知道如何解决这个问题......这是注册表的链接：http: [//tylypahka.tk/muuta/rekisteroidy](http://tylypahka.tk/muuta/rekisteroidy)

任何建议和帮助将不胜感激！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-12T11:18:37.657

*   尝试暂时将站点错误报告设置为最大，以查看是否有任何有意义的错误消息

*   尝试暂时启用调试

*   如果使用 ChronoForms v4，请尝试在常规选项卡中将相对 URL 设置为否

*   如果在启用缓存的情况下使用 CAPTCHA，请尝试禁用缓存

*   如果使用 CAPTCHA，请尝试暂时禁用 CAPTCHA 或尝试 RECAPTCHA

参考：[http ://chronoengine.com/forums/viewtopic.php?f=2&t=65518&p=311707&hilit=form+not+submitting#p264431](http://chronoengine.com/forums/viewtopic.php?f=2&t=65518&p=311707&hilit=form+not+submitting#p264431)

# c# - 为什么有时会出现“无法访问已处置的对象”异常？

> ID：15281280
> 
> 赞同：1
> 
> 时间：2013-03-07T20:40:24.170
> 
> 标签：c#

我的后台`DoWork`事件中有这段代码：

```
private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
{
    BackgroundWorker worker = sender as BackgroundWorker;
    while (true)
    {

        if ((worker.CancellationPending == true))
        {
            e.Cancel = true;
            break;
        }
        else
        {
            if (tempCpuValue >= (float?)nud1.Value || tempGpuValue >= (float?)nud1.Value)
            {
                soundPlay = true;
                blinking_label();
                NudgeMe();
            }
            else
            {
                soundPlay = false;
                stop_alarm = true;

            }
            cpuView();
            gpuView();
        }
    }
} 
```

在`cpuView()`方法中我有这个代码：

```
if (InvokeRequired)
{
    this.Invoke(new Action(() => data = new List<string>()));
    this.Invoke(new Action(() => data.Add("Gpu Temeprature --- " + sensor.Value.ToString())));
    this.Invoke(new Action(() => listBox1.DataSource = null));
    this.Invoke(new Action(() => listBox1.DataSource = data));
    this.Invoke(new Action(() => listBox1.Invalidate()));
} 
```

这次异常/错误是在线的：

```
this.Invoke(new Action(() => data = new List<string>())); 
```

这是我的 Form1 闭幕活动：

```
private void Form1_FormClosing(object sender, FormClosingEventArgs e)
{
    if (MessageBox.Show("Are you Sure you want to Exit. Click Yes to Confirm and No to continue", "WinForm", MessageBoxButtons.YesNo, MessageBoxIcon.Question) == DialogResult.No)
    {
        e.Cancel = true;
    }
    else
    {
        if (backgroundWorker1.WorkerSupportsCancellation == true)
        {
            backgroundWorker1.CancelAsync();
        }
    }
} 
```

一旦我退出我的应用程序点击右上角的红色 x 并选择“是”退出，就会发生错误/异常。

我该怎么办 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T20:48:46.027

所以这里的部分问题是您没有利用 BGW 为您提供的功能。如果您`Invoke`从内部调用，`DoWork`则意味着您并没有真正使用 BGW 来完成它的工作。在您的情况下，您应该只调用`ReportProgress`BGW，然后有一个`ProgressChanged`事件处理程序根据进度更新 UI。您可以传入一个表示要更新 UI 的数据的参数，因此您可以在 内部构造列表`DoWork`，通过 传递它`ReportProgress`，然后`DataSource`在`ProgressChanged`事件处理程序中设置 。

现在，一旦工人被取消，BGW 负责不报告进度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-14T17:46:27.417

当 Form 关闭时，它的子控件和表单本身都会被释放。但是，WinForms 继续处理 UI 线程上的未决调用。这就是为什么它会引发“无法访问已处置的对象”。

`Application.DoEvents()`通常被描述为邪恶，但它的工作是处理 UI 线程上的所有待处理消息。

在 Close 事件中完成后台线程是不够的。

这就是为什么我建议您`Application.DoEvents()`在任何 Dispose 之前添加一个，以便刷新待处理的调用，然后表单将优雅地关闭。

```
if (MessageBox.Show("Are you Sure you want to Exit. Click Yes to Confirm and No to continue", "WinForm", MessageBoxButtons.YesNo, MessageBoxIcon.Question) == DialogResult.No)
{
    e.Cancel = true;
}
else
{
    if (backgroundWorker1.WorkerSupportsCancellation == true)
    {
        backgroundWorker1.CancelAsync();
    }

    Application.DoEvents();
} 
```

如果 Application.DoEvents() 对您来说太难了，您可以使用封装 InvokeRequired 模式的扩展方法来吞下 ObjectDisposedException：

```
public static void InvokeIfRequired(this Control control, Action action)
{
    try
    {
        if (control.IsDisposed)
            return;

        if (control.InvokeRequired)
            control.Invoke(action);
        else
            action();
    }
    catch (ObjectDisposedException)
    {
        // There is nothing much we can do when an Invoke is pending on a disposed control 
        // the other exceptions will bubble up normally
    }
} 
```

# php - 如果内容发生变化，自动刷新 JS 数组？

> ID：15281282
> 
> 赞同：1
> 
> 时间：2013-03-07T20:40:27.327
> 
> 标签：php, javascript, ajax

我有这个 javascript 函数，它为外部 PHP 脚本提供 AJAX 请求，`<div>`如果新检查与旧检查不同，我希望它自动更新 HTML。

```
<script>
window.setInterval(function()
{
  $(function () 
  {
    $.ajax({                                      
        url: 'api.php', data: "", dataType: 'json',  success: function(rows)        
        {
            for (var i in rows)
            {
                var row = rows[i];          
                var id = row[0];
                var vname = row[1];
                var Password = row[2]
                $('#output').append("<hr />").append("<b>id: </b>"+id+"<b> name: </b>"+vname+" <b>Password: </b>"+Password);
            } 
        } 
    });       
  });
 }, 5000);
  </script> 
```

这目前成功地返回并使用数组中的内容更新了 div，问题是，由于添加了该`window.setInterval(function()`行，它将每 5 秒提供一次连接并`<div>`使用重复数据更新 .. 当我想要的时候，它会回显新数据（如果有的话）

这是我的另一个 PHP 脚本：

```
$STD = new mysqli ("localhost", "root", "hidden", "ajaxrequests");

        $array = array(); 
    $Query = $STD->prepare ("SELECT * FROM ajaxdata");
    $Query->execute();
    $Query->bind_result($ID, $Name, $Password);

    while ($Query->fetch())
    {
        $array[] = array ( $ID, $Name, $Password);
    }

  echo json_encode($array); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T20:52:56.143

只需`empty()`在循环之前添加一个调用即可。

```
<script>
window.setInterval(function()
{
  $(function () 
  {
    $.ajax({                                      
        url: 'api.php', data: "", dataType: 'json',  success: function(rows)        
        {
            $('#output').empty();
            for (var i in rows)
            {
                var row = rows[i];          
                var id = row[0];
                var vname = row[1];
                var Password = row[2]
                $('#output').append("<hr />").append("<b>id: </b>"+id+"<b> name: </b>"+vname+" <b>Password: </b>"+Password);
            } 
        } 
    });       
  });
 }, 5000);
 </script> 
```

当然，如果您的数据量很大，这将不是非常理想的。我实际上建议让 PHP 服务器发送一个时间戳值及其响应。然后，您可以在后续的 AJAX 请求中将其传回，并让服务器确定自上一个时间戳以来是否有实际要传递的更新。然后，您可以让服务器只发送那些更新的记录，您可以像您已经在做的那样附加/更新这些记录。

# backbone.js - 为什么这个主干视图不能正确渲染？

> ID：15281284
> 
> 赞同：1
> 
> 时间：2013-03-07T20:40:45.173
> 
> 标签：backbone.js

我在backbone.js 中有几个观点，我想成为另一个的孩子。所以我创建了以下代码。

```
var app = app || {} ;

app.ProjectCardView = Backbone.View.extend({

    el: $('.list'),

    template: _.template( $("#tpl-project-card-summary").html() ),

    initialize: function() {
        this.render();
    },

    render: function() {
        return this.$el.html( this.template() );

    }

});

app.DashboardView = Backbone.View.extend({

    el: $('.contentwrap'),

    template: _.template( $("#tpl-dashboard").html() ),

    initialize: function() {
        this.render();
        this.addProjects();
    },

    render: function() {
        //console.log(this.template());
         this.$el.html( this.template() );

    },

    addProjects: function() {
        var pcv = new app.ProjectCardView();    
    }

});

app.dash = new app.DashboardView; 
```

DashboardView 完美呈现，但是当我创建 ProjectCardView 时，视图似乎没有初始化，因此模板为空且未设置 el。如果我在初始化函数中设置了 el，那么 $el 仍然没有设置。我只是看不出我做错了什么。

编辑：看起来我发现了问题；$('.list') 是第一个视图引入的元素，因此，它不会在第二个视图试图找到它时呈现 - 即使第一个视图已经在 DOM 中呈现。

那么我该如何解决呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T21:02:23.903

如果您将您的 el 指定为 jQuery 选择器`$('.list')`，您应该知道它将在您执行时`Backbone.View.extend`执行。因此，如果到那时您的元素不在 DOM 中，您的选择器将无法工作。

所以你需要指定`el`它在 DOM 中的时间。所以在你的情况下你可以写：

```
addProjects: function() {
    var pcv = new app.ProjectCardView({ el: $('.list') });    
} 
```

或者您可以使用 Backbone 功能，您可以将其指定`el`为字符串而不是 jQuery 选择器：

```
app.ProjectCardView = Backbone.View.extend({    
    el: '.list',
    //...
} 
```

# api-key - 获取 Gravatar API 密钥

> ID：15281286
> 
> 赞同：3
> 
> 时间：2013-03-07T20:40:47.340
> 
> 标签：api-key, gravatar

有谁知道如何获取 Gravatar API 密钥？我已经看到无数关于 Gravatar 的示例和教程，其中提到只需使用您的密钥，但我一直无法找到如何获得一个。据我所知，似乎没有办法直接在他们的网站上这样做。这是他们仍然提供/使用的东西吗？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-23T13:56:58.613

要获取您的个人资料图片，您只需 md5 您的电子邮件地址并提出这样的请求`<img src="http://www.gravatar.com/avatar/md5(email)" />`

# delphi - TSQLQuery 没有返回正确数量的记录

> ID：15281288
> 
> 赞同：3
> 
> 时间：2013-03-07T20:40:48.497
> 
> 标签：delphi, sqlite, delphi-xe3, firemonkey-fm2

我有一个名为的表`Artist`，它当前包含四个记录和一个`TSQLQuery`包含以下语句的表：

```
SELECT name
FROM Artist 
```

表 Artist 还包含以下记录：

```
id          name
1           Artist 1
2           Artist 2
3           Artist 3
4           Artist 4 
```

* * *

**当前的记录检索方法：**

```
Query1.Open;
for i := 0 to qArtist.FieldCount -1 do
    with cbArtist.ListBox.ListItems[i] do
        Text := qArtist.Fields[i].AsString; 
```

**以前的记录检索方法：**

数据绑定`Query1`到`ComboBox1`.

* * *

使用“previous”方法，`ComboBox1`将显示`Artist`表中的所有预期记录。但是，当我尝试使用“当前”方法时，尽管存在其他三个现有值，但`Query1`仅从表中选择第一条记录。`Artist`我已经在其他查询中尝试了“当前”方法，它们也只返回了表的第一个值。

我采用这种新方法的原因是因为我觉得如果我继续使用“以前的”/数据绑定方法，我能做的事情非常有限，但这不是重点。

那么我该如何解决这个问题呢？即查询的问题只选择表中的第一条记录。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-07T20:52:03.453

您必须使用[`Eof`](http://docwiki.embarcadero.com/Libraries/XE3/en/Data.DB.TDataSet.Eof)and[`Next`](http://docwiki.embarcadero.com/Libraries/XE3/en/Data.DB.TDataSet.Next)方法来遍历记录。

```
Query1.Open;
 while not Query1.eof do
 begin
  cbArtist.Items.Add(Query1.FieldByName('Artist').AsString);
  Query1.Next;
 end; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T20:52:38.733

您的代码显示了对字段的交互，如果您需要迭代所有记录，那么您必须使用如下代码：

```
Query1.Open;
Query1.first;
while not Query1.eof do
begin
    with cbArtist.ListBox.ListItems[i] do
        Text := qArtist.Fields[1].AsString; //put here field you want to bind on ListBox.
    Query1.next;
end; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T20:46:47.810

我认为您没有正确导航查询的数据集。FieldCount 和 Fields[i] 访问字段元数据（跨越的列），而不是行。我相信 Delphi 你使用 While not Eof begin... end。

[导航数据集](http://docwiki.embarcadero.com/RADStudio/XE3/en/Navigating_Datasets)

我会考虑更改数据绑定字段以满足您的需求。Delphi 的数据绑定非常强大。手动迭代数据集以填充控件将只是可以隐藏错误的额外代码。利用工具的内置功能，它会更容易理解和维护。

# php - 必须使用活动访问令牌来查询有关当前用户的信息 | 访问令牌似乎是有效的

> ID：15281291
> 
> 赞同：2
> 
> 时间：2013-03-07T20:41:02.567
> 
> 标签：php, javascript, facebook, facebook-graph-api, permissions

我已经定义了一个访问令牌并拥有“喜欢”一个 Facebook 页面所需的权限，但萤火虫不断给我标题中的错误。**请不要将此帖子标记为重复**，因为我查看了有关该问题的帖子，但找不到任何适合我的特定情况的答案。我不明白为什么或如何解决它。我的代码如下：

**实用程序.php**

```
 <?php
require_once('sdk/src/facebook.php');
require_once("AppInfo.php");
/**
 * @return the value at $index in $array or $default if $index is not set.
 */
function idx(array $array, $key, $default = null) {
  return array_key_exists($key, $array) ? $array[$key] : $default;
}

function he($str) {
  return htmlentities($str, ENT_QUOTES, "UTF-8");
}
$facebook = new Facebook(array(
'appId'  => AppInfo::appID(),
'secret' => AppInfo::appSecret(),
'sharedSession' => true,
'trustForwarded' => true,
'file_upload' =>true
));
$user_id = $facebook->getUser();
if($user_id)
{
  $logoutUrl =$facebook->getLogoutUrl();
}
  else
  {
      $loginUrl=$facebook->getLoginUrl();
  }
if ($user_id) {
try {
  // Fetch the viewer's basic information
  $user_profile = $facebook->api('/me');
} catch (FacebookApiException $e) {
  // If the call fails we check if we still have a user. The user will be
  // cleared if the error is because of an invalid accesstoken
  if (!$facebook->getUser()) {
    header('Location: '. AppInfo::getUrl($_SERVER['REQUEST_URI']));
    exit();
  }
}
}
?> 
```

**喜欢.php**

```
 <?php

require_once("sdk/src/facebook.php"); 
require_once("utils.php");
require_once("AppInfo.php");
$permissions = $facebook->api('/me/permissions    ');
if( array_key_exists('publish_actions', $permissions['data'][0]) ) {
    // Permission is granted!
    // Do the related task
    //$post_id = $facebook->api('/me/feed', 'post', array('message'=>'Hello World!'));
} else {
    // We don't have the permission
    // Alert the user or ask for the permission!
    header( "Location: " . $facebook->getLoginUrl(array("scope" => "publish_actions")) );
}
?>
    <!DOCTYPE html>
    <html xmlns:fb="http://ogp.me/ns/fb#">
    <head>

      <style type="text/css">
      li{ 
        vertical-align: middle;
        padding-top: 1em; 
      }
    </style>
    <div id="fb-root"></div>
      <script type="text/javascript" src="/javascript/jquery-1.7.1.min.js"></script>
     <script type="text/javascript">

      (function(d, debug){
         var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
         if (d.getElementById(id)) {return;}
         js = d.createElement('script'); js.id = id; js.async = true;
         js.src = "//connect.facebook.net/en_US/all" + (debug ? "/debug" : "") + ".js";
         ref.parentNode.insertBefore(js, ref);
       }(document, false)); //loads javascript-sdk

        $(function() {
          // Set up so we handle click on the buttons
          $('#like_but').click(function(){
          FB.api(
      'me/og.likes',
      'post',
      {
        object: "http://facebook.com/216730015024772"
      },
      function(response) {
        alert(response);
      });});}); // they are closed properly, don't bother checking it. (!) Should like the 'object'
     </script>
    </head>
    <body> 
    <div style="position:fixed; display:block">
      <input type="button" value="Like" id="like_but"/>
 </div>    
</body>
</html> 
```

有谁知道为什么会出现错误或我该如何解决？任何提示将不胜感激。

注意：用户是从另一个index.php登录的，这里就不贴了，因为没有问题，而且在utils.php中还是收集了access token。此外，当检查“likes.php”中是否授予权限时，它工作正常。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-17T20:37:51.443

假设`access_token`您从 Facebook 收到的信息确实有效......看起来您的 Facebook javascript SDK 实现不完整。

您已经包含了库加载器，但没有`FB.init();`用于初始化库的部分。我在第二个代码块中没有看到任何引用`appId`，因此 Facebook 有办法知道您的代码所引用的应用程序。

请参阅[Facebook 的以下文档](https://developers.facebook.com/docs/reference/javascript/)。

具体来说，这可能会解决您的问题：

```
window.fbAsyncInit = function() {
    // init the FB JS SDK
    FB.init({
        appId      : 'YOUR_APP_ID', // App ID from the App Dashboard
        channelUrl : '//WWW.YOUR_DOMAIN.COM/channel.html', // Channel File for x-domain communication
        status     : true, // check the login status upon init?
        cookie     : true, // set sessions cookies to allow your server to access the session?
        xfbml      : true  // parse XFBML tags on this page?
    });

    // Additional initialization code such as adding Event Listeners goes here
    document.getElementById('like_but').addEventListener('click', function() {
        FB.api('me/og.likes', 'post', {
            object: "http://facebook.com/216730015024772"
        }, function(response) {
            console.log(response);
        });
    }, false);
};

(function(d, debug){
    var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
    if (d.getElementById(id)) {return;}
    js = d.createElement('script'); js.id = id; js.async = true;
    js.src = "//connect.facebook.net/en_US/all" + (debug ? "/debug" : "") + ".js";
    ref.parentNode.insertBefore(js, ref);
}(document, /*debug*/ false)); 
```

# sql-server - 我是否必须购买 SQL Server 才能使用 Access 2013

> ID：15281293
> 
> 赞同：-10
> 
> 时间：2013-03-07T20:41:12.213
> 
> 标签：sql-server, ms-access, office-2013

我正在阅读有关 Access 2013 的在线文档（当他们删除用户级安全性时，我什至比 2007 年更讨厌它）。它一直在谈论它如何使用 SQL Server 作为后端数据库。我对 SQL Server 的体验是，免费版本不是很好，付费版本非常昂贵。

如果我想在家里使用 Access 2013，并且我想要合适的 SQL Server，那么我必须购买它吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T20:45:41.660

您可以以 40 美元到 50 美元之间的价格购买 SQL Server Developer Edition。货比三家。Developer Edition 具有 Enterprise Edition 的所有功能，但许可条款不同（例如，您不能在生产中运行它）。对于许多中小型应用程序来说，Express 也绰绰有余。

也就是说，我认为您误读了文档。它肯定说您可以***使用***SQL Server 作为后端数据库。有很多基于 Access 的应用程序没有。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T20:46:37.970

MS Access 2013 有一个名为 ACE 的新引擎，而不是以前版本中使用的 Jet 引擎。作为与 SQL Server 的前端有更好的集成。但是，您不需要 SQL Server 的实际实例来使用它。

[http://accessexperts.com/blog/2012/08/20/10-things-we-love-about-access-2013/](http://accessexperts.com/blog/2012/08/20/10-things-we-love-about-access-2013/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T20:46:38.670

如果您想在家中使用它，您可以随时购买 SQL Server 2012 开发人员版，它与完整版具有完全相同的功能。

> Enterprise 与 Developer 之间的唯一[限制](http://sqlserverpedia.com/wiki/SQL_Server_Developer_Edition#Limitations_of_Developer_Edition.3F)或区别是许可证。您不能在开发以外的环境中使用 Developer，或者您违反了您的许可协议。否则，它的功能与企业版完全相同。

开发版可以在 50 美元以下购买，这里只是一个[链接](http://www.bhphotovideo.com/bnh/controller/home?O=&sku=883463&is=REG&Q=&A=details)

# javascript - 如何在 JavaScript 中使用 sessionScope？

> ID：15281294
> 
> 赞同：0
> 
> 时间：2013-03-07T20:41:18.900
> 
> 标签：javascript, session

我有一个名为 userdet 的用户类型的会话对象，它有一个名为 firstName 的属性。我正在尝试使用脚本标记内的以下代码检索 firstName，但我无法做到。我在 xhtml 页面中做所有事情，所以我排除了 scriplet 标记。

```
var userName = "#{sessionScope['userdet']['firstName']}"; 
```

# c++ - 我只是不明白 Qt 中的线程

> ID：15281297
> 
> 赞同：0
> 
> 时间：2013-03-07T20:41:36.883
> 
> 标签：c++, qt, ipc

好的，所以，这是交易。

我目前正在使用 SysV IPC 编写一个小型聊天消息模拟/项目，并且我将 Qt 用于我的客户端应用程序。我想要的是一个后台线程，它会在消息队列上等待，并在有新消息出现时向 GUI 线程发送信号。我曾尝试使用 QThread 继承来编写代码，但它似乎不起作用，消息没有显示，我想我在这里遗漏了一些东西。

至于代码：ipcEventListener.h：

```
class IPCEventListener : public QThread
{
    Q_OBJECT
public:
    IPCEventListener();
    void run();
    messageWrapper mw;
signals:
    void sendChatMsg(MSG_CHAT_MESSAGE cm);
}; 
```

ipcEventListener.cpp

```
IPCEventListener::IPCEventListener()
{

}
void IPCEventListener::run()
{
        mutex.lock();
        int n = msgrcv(myQueueId, &mw, sizeof(mw)-sizeof(long), 0, IPC_NOWAIT);
        mutex.unlock();
        if (n>0)
        {
            snip...
            else if (mw.resp.type == MESSAGE)
            {
                emit sendChatMsg(mw.chatMsg);
            }
        }
    exec();
} 
```

主窗口.cpp：

```
MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::MainWindow)
{
    ui->setupUi(this);
    listener = new IPCEventListener(this);
    connect(this->listener, SIGNAL(sendChatMsg(MSG_CHAT_MESSAGE)), this, SLOT(message_received(MSG_CHAT_MESSAGE)));
    connect(this->ui->pushButton, SIGNAL(clicked()), this, SLOT(on_pushButton_clicked()));
    listener->start();
    ui->comboBox->addItem("Client");
    ui->comboBox->addItem("Room");
}
void MainWindow::message_received(MSG_CHAT_MESSAGE cm)
{
    QString formattedMessage = "";
    formattedMessage.append("[");
    formattedMessage.append(cm.send_time);
    formattedMessage.append("] ");
    if (cm.msg_type == PRIVATE) formattedMessage.append("[PRIV:] ");
    formattedMessage.append(cm.sender);
    formattedMessage.append(": ");
    formattedMessage.append(cm.message);
    formattedMessage.append("\n");
    ui->textEdit->append(formattedMessage);
} 
```

我错过了什么？

（PS：我知道代码可能打破了大约十万个代码约定，但截止日期很快，我不得不求助于kludges。不过，这只是一个学校项目）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T21:12:45.037

您的代码中有逻辑错误。您将 void IPCEventListener::run() 视为处于循环中并再次执行 ang 再次 ang 的方法，但事实并非如此。QThread::run() 是您只初始化线程并执行 exec() 函数以启动事件循环的方法。这意味着在您的应用程序的当前版本中，您尝试只接收一次消息，然后您的线程只是等待一些事件，而不对它们做任何事情。

因此，您需要的是一个无限循环，您将在其中尝试接收消息。并且不要忘记在程序关闭时停止这个循环。

# java - 在 Log4j 中，LevelRangeFilter 和 Threshold 有什么区别？

> ID：15281301
> 
> 赞同：1
> 
> 时间：2013-03-07T20:41:42.940
> 
> 标签：java, log4j

`LevelRangeFilter`和 和有什么不一样`Threshold`？我什么时候使用一个与另一个？

```
<filter class="org.apache.log4j.varia.LevelRangeFilter">
    <param name="LevelMin" value="DEBUG"/>
</filter> 
```

```
<param name="Threshold" value="DEBUG"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T21:13:14.810

这两个选项将具有相同的行为。阈值应该更快。

如果你想要更大的灵活性，你应该使用“过滤器”。除了能够定义 LevelMin 和 LevelMax 之外，过滤器还允许您实现自己的逻辑，如果需要，您还可以将它们链接在一起。

如果您只需要基本的“阈值”功能，我会选择您的第二个选项。

您可以从[AppenderSkeleton](http://logging.apache.org/log4j/1.2//apidocs/org/apache/log4j/AppenderSkeleton.html) API 获取更多详细信息。注意简单`setThreshold`的与决定是否将其传递给其他过滤器的和`addFilter`。`decide``LoggingEvent`

# java - 由于任务尝试未能报告状态 600 秒，reduce 失败。杀戮！解决方案？

> ID：15281307
> 
> 赞同：6
> 
> 时间：2013-03-07T20:42:31.217
> 
> 标签：java, eclipse, hadoop, mapreduce, elastic-map-reduce

作业的减少阶段失败，原因如下：

# 失败的减少任务超过了允许的限制。

每个任务失败的原因是：

任务尝试_201301251556_1637_r_000005_0 600 秒未能报告状态。杀戮！

问题详细：

Map 阶段接收格式为：time、rid、data 的每条记录。

数据的格式为：数据元素及其计数。

eg: a,1 b,4 c,7 对应一个记录的数据。

映射器为每个数据元素输出每个记录的数据。例如：

键:(时间, a,), val: (rid,data) 键:(time, b,), val: (rid,data) 键:(time, c,), val: (rid,data)

每个reduce都从所有记录中接收到同一个key对应的所有数据。eg: key:(time, a), val:(rid1, data) 和 key:(time, a), val:(rid2, data) 到达同一个reduce实例。

它在这里进行一些处理并输出类似的摆脱。

对于 10MB 这样的小数据集，我的程序可以毫无问题地运行。但是当数据增加到1G时失败，原因如上所述。我不知道为什么会这样。请帮忙！

**减少代码：**

下面有两个类：

*   `VCLReduce0Split`
*   `CoreSplit`

**一种。`VCLReduce0SPlit`**

```
public class VCLReduce0Split extends MapReduceBase implements Reducer<Text, Text, Text, Text>{
    //  @SuppressWarnings("unchecked")
        public void reduce (Text key, Iterator<Text> values, OutputCollector<Text, Text> output, Reporter reporter) throws IOException {

            String key_str = key.toString();
            StringTokenizer stk = new StringTokenizer(key_str);
            String t = stk.nextToken();

            HashMap<String, String> hmap = new HashMap<String, String>();

            while(values.hasNext())
            {
                StringBuffer sbuf1 = new StringBuffer(); 
                String val = values.next().toString();
                StringTokenizer st = new StringTokenizer(val);

                String uid = st.nextToken();

                String data = st.nextToken();

                     int total_size = 0;

                     StringTokenizer stx = new StringTokenizer(data,"|");

                     StringBuffer sbuf = new StringBuffer();

                     while(stx.hasMoreTokens())
                     {
                         String data_part = stx.nextToken();
                         String data_freq = stx.nextToken();

                    //   System.out.println("data_part:----->"+data_part+" data_freq:----->"+data_freq);
                         sbuf.append(data_part);
                         sbuf.append("|");
                         sbuf.append(data_freq);
                         sbuf.append("|");
                     }
                /*     
                     for(int i = 0; i<parts.length-1; i++)
                     {
                         System.out.println("data:--------------->"+data);
                         int part_size = Integer.parseInt(parts[i+1]);
                         sbuf.append(parts[i]);
                         sbuf.append("|");
                         sbuf.append(part_size);
                         sbuf.append("|");
                         total_size = part_size+total_size;
                         i++;
                     }*/

                sbuf1.append(String.valueOf(total_size));
                sbuf1.append(",");
                sbuf1.append(sbuf);
                if(uid.equals("203664471")){
                //  System.out.println("data:--------------------------->"+data+" tot_size:---->"+total_size+" sbuf:------->"+sbuf);
                }
                hmap.put(uid, sbuf1.toString());

            }

            float threshold = (float)0.8;

            CoreSplit obj = new CoreSplit();

            ArrayList<CustomMapSimilarity> al = obj.similarityCalculation(t, hmap, threshold);

            for(int i = 0; i<al.size(); i++)
            {
                CustomMapSimilarity cmaps = al.get(i);
                String xy_pair = cmaps.getRIDPair();
                String similarity = cmaps.getSimilarity();
                output.collect(new Text(xy_pair), new Text(similarity));
            }

         }
    } 
```

**湾。`coreSplit`**

```
package com.a;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.HashSet;
import java.util.Iterator;
import java.util.Set;
import java.util.StringTokenizer;
import java.util.TreeMap;

import org.apache.commons.collections.map.MultiValueMap;

public class PPJoinPlusCoreOptNewSplit{

     public ArrayList<CustomMapSimilarity> similarityCalculation(String time, HashMap<String,String>hmap, float t)
     {

         ArrayList<CustomMapSimilarity> als = new ArrayList<CustomMapSimilarity>();
         ArrayList<CustomMapSimilarity> alsim = new ArrayList<CustomMapSimilarity>();

        Iterator<String> iter = hmap.keySet().iterator();

        MultiValueMap index = new MultiValueMap();

        String RID;
        TreeMap<String, Integer> hmap2;
        Iterator<String> iter1;

        int size;
        float prefix_size;
        HashMap<String, Float> alpha;
        HashMap<String, CustomMapOverlap> hmap_overlap;

        String data;

        while(iter.hasNext())
            {
                RID = (String)iter.next();

                String data_val = hmap.get(RID);

                StringTokenizer st = new StringTokenizer(data_val,",");
            //    System.out.println("data_val:--**********-->"+data_val+" RID:------------>"+RID+" time::---?"+time);
                String RIDsize = st.nextToken();
                size = Integer.parseInt(RIDsize);
                data = st.nextToken();

                StringTokenizer st1 = new StringTokenizer(data,"\\|");

                String[] parts = data.split("\\|");

            //  hmap2 = (TreeMap<String, Integer>)hmap.get(RID);
        //      iter1 = hmap2.keySet().iterator();

            //  size = hmap_size.get(RID);

                prefix_size = (float)(size-(0.8*size)+1); 

                if(size==1)
                {
                    prefix_size = 1;
                }

                alpha = new HashMap<String, Float>();

                hmap_overlap = new HashMap<String, CustomMapOverlap>();

        //      Iterator<String> iter2 = hmap2.keySet().iterator();

                int prefix_index = 0;

                int pi=0;

                for(float j = 0; j<=prefix_size; j++)
                {

                    boolean prefix_chk = false;
                    prefix_index++;
                    String ptoken = parts[pi];
            //      System.out.println("data:---->"+data+" ptoken:---->"+ptoken);
                    float val = Float.parseFloat(parts[pi+1]);
                    float temp_j = j;
                     j = j+val;
                     boolean j_l = false ;
                     float prefix_contri = 0;
                     pi= pi+2;

                     if(j>prefix_size)
                        {

                            // prefix_contri = j-temp_j;
                             prefix_contri = prefix_size-temp_j;

                            if(prefix_contri>0)
                            {
                                 j_l = true;
                                 prefix_chk = false;

                            }
                            else
                            {
                                prefix_chk = true;                              
                            }
                        }                   

                    if(prefix_chk == false){

                        filters(index, ptoken, RID, hmap,t, size, val, j_l, alpha, hmap_overlap, j, prefix_contri);

                    CustomMapPrefixTokens cmapt = new CustomMapPrefixTokens(RID,j);
                    index.put(ptoken, cmapt);

                }

            }

                als = calcSimilarity(time, RID, hmap, alpha, hmap_overlap);

                for(int i = 0; i<als.size(); i++)
                {
                    if(als.get(i).getRIDPair()!=null)
                    {
                        alsim.add(als.get(i));

                    }
                }

            }

         return alsim;

     }

     public void filters(MultiValueMap index, String ptoken, String RID, HashMap<String, String> hmap, float t, int size, float val, boolean j_l, HashMap<String, Float> alpha, HashMap<String, CustomMapOverlap> hmap_overlap, float j, float prefix_contri)
     {
            @SuppressWarnings("unchecked")

            ArrayList<CustomMapPrefixTokens> positions_list = (ArrayList<CustomMapPrefixTokens>) index.get(ptoken);

            if((positions_list!=null) &&(positions_list.size()!=0))
            {

                CustomMapPrefixTokens cmapt ;
                String y;
                Iterator<String> iter3;
                int y_size = 0;
                float check_size = 0;
            //  TreeMap<String, Integer> hmapy;
                float RID_val=0;
                float y_overlap = 0;
                float ubound = 0;
                ArrayList<Float> fl = new ArrayList<Float>();

              StringTokenizer st;

            for(int k = 0; k<positions_list.size(); k++)
            {
                cmapt = positions_list.get(k);

                if(!cmapt.getRID().equals(RID))
                {

                 y = hmap.get(cmapt.getRID());

                // iter3 = y.keySet().iterator();

                 String yRID = cmapt.getRID();

                 st = new StringTokenizer(y,",");

                 y_size = Integer.parseInt(st.nextToken());

                 check_size = (float)0.8*(size);

                if(y_size>=check_size)
                {

                    //hmapy = hmap.get(yRID);

                    String y_data = st.nextToken();

                    StringTokenizer st1 = new StringTokenizer(y_data,"\\|");

                    while(st1.hasMoreTokens())
                    {
                        String token = st1.nextToken();
                        if(token.equals(ptoken))
                        {

                            String nxt_token = st1.nextToken();
                    //      System.out.println("ydata:--->"+y_data+" nxt_token:--->"+nxt_token);
                            RID_val = (float)Integer.parseInt(nxt_token);
                            break;
                        }
                    }

                 //    RID_val = (float) hmapy.get(ptoken); 
                     float alpha1 = (float)(0.8/1.8)*(size+y_size);

                     fl = overlapCalc(alpha1, size, y_size, cmapt, j, alpha, j_l,RID_val,val,prefix_contri);

                     ubound = fl.get(0);
                     y_overlap = fl.get(1);

                    positionFilter(ubound, alpha1, cmapt, y_overlap, hmap_overlap);

                  }

                }   
            }
        }

     }

   public void positionFilter( float ubound,float alpha1, CustomMapPrefixTokens cmapt, float y_overlap, HashMap<String, CustomMapOverlap> hmap_overlap)
   {

     float y_overlap_total = 0;

            if(null!=hmap_overlap.get(cmapt.getRID()))
            {

            y_overlap_total = hmap_overlap.get(cmapt.getRID()).getOverlap();

            if((y_overlap_total+ubound)>=alpha1)
            {

                CustomMapOverlap cmap_tmp = hmap_overlap.get(cmapt.getRID());

                float y_o_t = y_overlap+y_overlap_total;

                cmap_tmp.setOverlap(y_o_t);
                hmap_overlap.put(cmapt.getRID(),cmap_tmp);

            }
            else
            {
                float n = 0;
                hmap_overlap.put(cmapt.getRID(), new CustomMapOverlap(cmapt.getRID(),n));
            }

            }
            else
            {
                CustomMapOverlap cmap_tmp = new CustomMapOverlap(cmapt.getRID(),y_overlap);
                hmap_overlap.put(cmapt.getRID(), cmap_tmp);

            }

   }

   public ArrayList<Float> overlapCalc(float alpha1, int size, int y_size, CustomMapPrefixTokens cmapt, float j, HashMap<String, Float> alpha, boolean j_l, float RID_val, float val, float prefix_contri )
   {

            alpha.put(cmapt.getRID(), alpha1);
            float min1 = y_size-cmapt.getPosition();
            float min2 = size-j;
            float min = 0;

            float y_overlap = 0;

            if(min1<min2)
            {
                min = min1;
            }
            else
            {
                min = min2;
            }
            if(j_l==true)
            {
                val = prefix_contri;    
            }                                       
            if(RID_val<val)
            {
                y_overlap = RID_val;
            }
            else
            {
                y_overlap = val;
            }

            float ubound = y_overlap+min;

            ArrayList<Float> fl = new ArrayList<Float>();
            fl.add(ubound);
            fl.add(y_overlap);

            return fl;

   }

     public ArrayList<CustomMapSimilarity> calcSimilarity( String time, String RID, HashMap<String,String> hmap , HashMap<String, Float> alpha, HashMap<String, CustomMapOverlap> hmap_overlap)
     {

         float jaccard = 0;

         CustomMapSimilarity cms = new CustomMapSimilarity(null, null);   
         ArrayList<CustomMapSimilarity> alsim = new ArrayList<CustomMapSimilarity>();

        Iterator<String> iter = hmap_overlap.keySet().iterator();

        while(iter.hasNext())
        {
            String key = (String)iter.next();

            CustomMapOverlap val = (CustomMapOverlap)hmap_overlap.get(key);

            float overlap = (float)val.getOverlap();

            if(overlap>0)
            {

               String yRID = val.getRID();

              String RIDpair = RID+" "+yRID;

             jaccard = unionIntersection(hmap, RIDpair);

             if(jaccard>0.8)
                {
                    cms = new CustomMapSimilarity(time+" "+RIDpair, String.valueOf(jaccard));
                    alsim.add(cms);
                }

            }

        }

         return alsim;

     }

     public float unionIntersection( HashMap<String,String> hmap, String RIDpair)
     {

            StringTokenizer st = new StringTokenizer(RIDpair);

            String xRID = st.nextToken();

            String yRID = st.nextToken();

            String xdata = hmap.get(xRID);

            String ydata = hmap.get(yRID);

            int total_union = 0;

            int xval = 0;
            int yval = 0;
            int part_union = 0;

            int total_intersect = 0;

        //  System.out.println("xdata:------*************>"+xdata);

            StringTokenizer xtokenizer = new StringTokenizer(xdata,",");
            StringTokenizer ytokenizer = new StringTokenizer(ydata,",");
        //  String[] xpart = xdata.split(",");
        //  String[] ypart = ydata.split(",");

            xtokenizer.nextToken();
            ytokenizer.nextToken();

            String datax = xtokenizer.nextToken();
            String datay = ytokenizer.nextToken();

            HashMap<String,Integer> x = new HashMap<String, Integer>();
            HashMap<String,Integer> y = new HashMap<String, Integer>();

            String [] xparts;

                 xparts = datax.toString().split("\\|");

              String [] yparts;

                 yparts = datay.toString().split("\\|");

                 for(int i = 0; i<xparts.length-1; i++)
                 {
                     int part_size = Integer.parseInt(xparts[i+1]);
                     x.put(xparts[i], part_size);

                     i++;
                 }

                 for(int i = 0; i<yparts.length-1; i++)
                 {
                     int part_size = Integer.parseInt(yparts[i+1]);
                     y.put(xparts[i], part_size);

                     i++;
                 }

             Set<String> xset = x.keySet();
             Set<String> yset = y.keySet();

            for(String elm:xset )
            {

                yval = 0;

                xval = (Integer)x.get(elm);

                part_union = 0;
                int part_intersect = 0;
                if(yset.contains(elm)){

                    yval = (Integer) y.get(elm);

                if(xval>yval)
                {
                    part_union = xval;
                    part_intersect = yval;
                }
                else
                {
                    part_union = yval;
                    part_intersect = xval;
                }
                total_intersect = total_intersect+part_intersect;
                }
                else
                {
                    part_union = xval;
                }

                total_union = total_union+part_union;

            }

            for(String elm: yset)
            {
                part_union = 0;

                if(!xset.contains(elm))
                {
                    part_union = (Integer) y.get(elm);
                    total_union = total_union+part_union;
                }

            }

            float jaccard = (float)total_intersect/total_union;

         return jaccard;

     }

} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-07T21:15:52.017

超时的原因可能是您的 reducer 中长时间运行的计算没有将进度报告回 Hadoop 框架。这可以使用不同的方法来解决：

I. 增加超时时间`mapred-site.xml`：

```
<property>
  <name>mapred.task.timeout</name>
  <value>1200000</value>
</property> 
```

默认值为`600000 ms = 600 seconds`.

二、报告每 x 条记录的进度，[如 javadoc 中的 Reducer 示例](http://hadoop.apache.org/docs/r1.1.1/api/org/apache/hadoop/mapred/Reducer.html)：

```
public void reduce(K key, Iterator<V> values,
                          OutputCollector<K, V> output, 
                          Reporter reporter) throws IOException {
   // report progress
   if ((noValues%10) == 0) {
     reporter.progress();
   }

   // ...
} 
```

您可以选择增加自定义计数器，如[示例](http://hadoop.apache.org/docs/r1.1.1/api/org/apache/hadoop/mapred/Reducer.html)中所示：

```
reporter.incrCounter(NUM_RECORDS, 1); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T21:04:25.610

有可能你已经消耗了 Java 的所有堆空间，或者 GC 发生得太频繁，让 reducer 没有机会向 master 报告状态，因此被杀死。

另一种可能性是其中一个reducer 获得的数据过于倾斜，即对于特定的消除，那里有很多记录。

尝试通过设置以下配置来增加您的 Java 堆： `mapred.child.java.opts`

到

`-Xmx2048m`

此外，尝试通过将以下配置设置为低于当前值（默认值为`2`）来减少并行化简器的数量：

`mapred.tasktracker.reduce.tasks.maximum`

# c# - 使用 LINQ 在 IList 中查找项目

> ID：15281311
> 
> 赞同：16
> 
> 时间：2013-03-07T20:42:42.540
> 
> 标签：c#, .net, linq, list

我有一个 IList：

```
IList list = CallMyMethodToGetIList(); 
```

我不知道我能得到它的类型

```
Type entityType = list[0].GetType();` 
```

我想用 LINQ 搜索这个列表，比如：

```
var itemFind = list.SingleOrDefault(MyCondition....); 
```

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-03-07T20:54:52.867

简单的：

```
IList list = MyIListMethod();

var item = list
    .Cast<object>()
    .SingleOrDefault(i => i is MyType); 
```

或者：

```
IList list = MyIListMethod();

var item = list
    .Cast<object>()
    .SingleOrDefault(i => i != null); 
```

希望这有帮助！

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-07T20:51:37.713

```
IList list = ...

// if all items are of given type
IEnumerable<YourType> seq = list.Cast<YourType>().Where(condition);

// if only some of them    
IEnumerable<YourType> seq = list.OfType<YourType>().Where(condition); 
```

# c++ - 通过 C++ 代码与 servlet 交互

> ID：15281314
> 
> 赞同：0
> 
> 时间：2013-03-07T20:42:52.163
> 
> 标签：c++, http, servlets

美好的一天，我正在尝试从 C++ 代码调用 java servlet。到目前为止，我已经做到了：

```
 execl( "/usr/bin/lynx", "lynx", "-dump", url.c_str(), (char *) 0); 
```

其中“url”是保存地址和参数的 url 编码字符串。

但是我还没有找到让 execl 返回 servlet 响应以便我在代码中分析它的方法。是否有另一种更有效的方法来调用 servlet 并处理答案？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T20:49:58.123

你可以用管道做到这一点：

```
string cmd = "lynx -dump ";
cmd += url;
FILE* pipe = popen(cmd.c_str(), "r");
if (!pipe)
{
    cout << "Couldn't open pipe";
    return;
}
char buffer[128];
string result = "";
while(!feof(pipe)) 
{
    if(fgets(buffer, 128, pipe) != NULL)
        result += buffer;
}
pclose(pipe); 
```

# android - 使用对话框删除 ListView 项

> ID：15281317
> 
> 赞同：1
> 
> 时间：2013-03-07T20:43:08.933
> 
> 标签：android, arrays, android-listview, android-adapter

我正在尝试`ListView`通过对话框删除一个项目，但是该项目 ( `message`) 是在单独的`onClick()`事件中创建的：

```
final Button addButton = (Button) findViewById(R.id.Button1);
addButton.setOnClickListener(new View.OnClickListener() {

    public void onClick(View v) {
        Context context = getApplicationContext();
        CharSequence addToast = "Choice added";
        int duration = Toast.LENGTH_SHORT;
        Toast toast = Toast.makeText(context, addToast, duration);
        adapter.remove(dMessage);
        EditText editText = (EditText) findViewById(R.id.edit_choice);
        String message = editText.getText().toString();
        adapter.add(message);
        toast.show();
        editText.setHint(R.string.edit_another_choice);
        editText.setText(null);
    }
}); 
```

当我使用对话框时，`onClick()`我希望它删除`message`我正在尝试执行的选定项：

```
listView.setOnItemClickListener(new OnItemClickListener(){

    public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
        AlertDialog.Builder builder = new AlertDialog.Builder(MainActivity.this);
        builder.setCancelable(true);
        builder.setTitle("Delete choice");
        builder.setPositiveButton("Yes", new DialogInterface.OnClickListener() {

            public void onClick(DialogInterface dialog, int which) {
                int index = listView.getSelectedItemPosition();
                adapter.remove(adapter.getItem(index));
            }
        }); 
```

我不能这样做，`adapter.remove(message);`因为`message`在选择按钮时必须以另一种方法创建，所以我尝试使用该`getSelectedItemPosition()`方法，但它正在抛出一个`ArrayOutOfBoundsException`我觉得解决方案可能是一个简单的解决方案，但我无法弄清楚。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T21:02:28.170

您不必调用 getSelectedItemPosition。您已经从 onItemClick 参数中获得了位置。

IDE 自动生成方法签名，如下所示：

```
public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) { 
```

相反，把它改成这个，它会更有意义

```
public void onItemClick(AdapterView<?> parent, View view, int position, long id) { 
```

我猜想（如果你好奇，你可以调试或记录来确认），没有选定的项目，所以 getSelectedItemIndex 可能返回 -1 表示“没有选择”。这将解释索引越界异常。

# python - 将系列分类到熊猫中的新列

> ID：15281320
> 
> 赞同：8
> 
> 时间：2013-03-07T20:43:16.953
> 
> 标签：python, pandas

我希望能够获取我当前填充了整数的数据集，并根据某些标准对它们进行分类。该表如下所示：

```
[in]> df = pd.DataFrame({'A':[0,2,3,2,0,0],'B': [1,0,2,0,0,0],'C': [0,0,1,0,1,0]})
[out]>
   A  B  C
0  0  1  0
1  2  0  0
2  3  2  1
3  2  0  0
4  0  0  1
5  0  0  0 
```

我想按字符串将它们分类在单独的列中。由于对 R 更加熟悉，我尝试使用该列定义中的规则创建一个新列。之后我尝试使用 .ix 和 lambdas ，它们都导致类型错误（在 ints 和 series 之间）。我的印象是这是一个相当简单的问题。尽管以下是完全错误的，但这是尝试 1 的逻辑：

```
df['D']=(
if ((df['A'] > 0) & (df['B'] == 0) & df['C']==0): 
    return "c1";
elif ((df['A'] == 0) & ((df['B'] > 0) | df['C'] >0)): 
    return "c2";
else:
    return "c3";) 
```

最终结果：

```
 A  B  C     D
0  0  1  0  "c2"
1  2  0  0  "c1"
2  3  2  1  "c3"
3  2  0  0  "c1"
4  0  0  1  "c2"
5  0  0  0  "c3" 
```

如果有人可以帮助我解决这个问题，将不胜感激。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-07T20:53:56.313

我可以想到两种方法。首先是编写分类器函数，然后`.apply`逐行编写：

```
>>> import pandas as pd
>>> df = pd.DataFrame({'A':[0,2,3,2,0,0],'B': [1,0,2,0,0,0],'C': [0,0,1,0,1,0]})
>>> 
>>> def classifier(row):
...         if row["A"] > 0 and row["B"] == 0 and row["C"] == 0:
...                 return "c1"
...         elif row["A"] == 0 and (row["B"] > 0 or row["C"] > 0):
...                 return "c2"
...         else:
...                 return "c3"
...     
>>> df["D"] = df.apply(classifier, axis=1)
>>> df
   A  B  C   D
0  0  1  0  c2
1  2  0  0  c1
2  3  2  1  c3
3  2  0  0  c1
4  0  0  1  c2
5  0  0  0  c3 
```

第二个是使用高级索引：

```
>>> df = pd.DataFrame({'A':[0,2,3,2,0,0],'B': [1,0,2,0,0,0],'C': [0,0,1,0,1,0]})
>>> df["D"] = "c3"
>>> df["D"][(df["A"] > 0) & (df["B"] == 0) & (df["C"] == 0)] = "c1"
>>> df["D"][(df["A"] == 0) & ((df["B"] > 0) | (df["C"] > 0))] = "c2"
>>> df
   A  B  C   D
0  0  1  0  c2
1  2  0  0  c1
2  3  2  1  c3
3  2  0  0  c1
4  0  0  1  c2
5  0  0  0  c3 
```

哪个更清楚取决于情况。通常，逻辑越复杂，我就越有可能将其包装在一个函数中，然后我可以记录和测试。

# ios - 使用 Grand Central Dispatch (GCD) 时获取 OSSpinLockLock

> ID：15281322
> 
> 赞同：1
> 
> 时间：2013-03-07T20:43:25.250
> 
> 标签：ios, multithreading, cocoa-touch, thread-safety, grand-central-dispatch

我们正在使用 GCD 在我们的图像编辑器视图中“在后台”执行一些图像处理操作，效果很好。问题是，如果我们打开编辑器视图，进行一些处理，然后在编辑器视图中停留 10-20 分钟，我们会得到这些`OSSpinLockLock`冻结，但我们没有使用`SpinLocks`或任何类型的锁定，我们有以下属性：

```
@property (nonatomic, readonly) dispatch_semaphore_t processingSemaphore;
@property (nonatomic, readonly) dispatch_queue_t serialQueue; 
```

并像这样设置队列：

```
processingSemaphore = dispatch_semaphore_create(1);
serialQueue = dispatch_queue_create("com.myapp.imageProcessingQueue", NULL);
dispatch_set_target_queue(serialQueue, dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, NULL)); 
```

并因此处理：

```
dispatch_async(self.serialQueue, ^{
    dispatch_semaphore_wait(self.processingSemaphore, DISPATCH_TIME_FOREVER);

    ....<do stuff>....

    dispatch_semaphore_signal(self.processingSemaphore);

    dispatch_sync(dispatch_get_main_queue(), ^{
        ....<notify that we're done>....
    }];
}); 
```

我想知道它是否是某种信号量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T04:55:06.260

libdispatch 不在队列或信号量实现中使用 OSSpinLockLock，但 malloc 使用（因此 Block_copy，libdispatch 作为 dispatch_async 的一部分调用）。

当你被 OSSpinLockLock 阻塞时，你能显示所有线程的回溯吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T20:53:48.603

也许您可以创建一个串行队列，而不是使用信号量。像这样创建队列：

```
serialQueue = dispatch_queue_create("com.myapp.imageProcessingQueue", DISPATCH_QUEUE_SERIAL); 
```

这将确保一次只执行一个块。

但是，您不能取消对此队列的操作。为此，您需要使用 NSOperationQueue。

# mysql - 从两个表中获取数据？

> ID：15281324
> 
> 赞同：0
> 
> 时间：2013-03-07T20:43:36.953
> 
> 标签：mysql

我有 2 张桌子。

一个持有问题：

```
id | question
1   How old are you?
2   Are you male of female? 
```

另一个举行考试：

```
id  |   title     |  question_ids
1    Summer Exam     [1,2] 
```

我的问题是，我想从考试表中选择一个考试，并获取与该特定考试相关的所有问题（question_ids 字段），但从问题表中获取问题，而不仅仅是存储在 question_ids 中的 id。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T20:54:40.953

也许将问题表中的 id 列更改为 q_id 并将 question_id 也称为 q_id，这样您就有了一种清晰的方法来链接您的表。例如，将您的 id 列更改为exam_id，这样您的名字就不会那么混乱了。然后你可以使用内部连接，例如......

```
SELECT q.q_id, q.question, e.exam 
FROM questions q 
 INNER JOIN exams e ON q.q_id=e.q_id 
WHERE ...... 
```

类似的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T20:49:36.787

您可以使用该`FIND_IN_SET`命令。请注意，这不会使用您的索引，因此可能会很慢

```
SELECT title, question
FROM questions
INNER JOIN exams
ON FIND_IN_SET(questions.id, exams.question_ids) 
```

您也可以使用`IN`. 请注意，这仅在选择特定考试时有效。在不选择特定考试的情况下，您将返回整个考试表中 question_ids 列中引用的每条记录

```
SELECT title, question
FROM questions, exams
WHERE exams.id = 1
AND questions.id IN (question_ids) 
```

# azure - Azure DataCache Windows Azure 模拟器出现问题，但未生成错误。应用程序只是挂起

> ID：15281333
> 
> 赞同：1
> 
> 时间：2013-03-07T20:43:50.283
> 
> 标签：azure, azure-web-roles, azure-caching, azure-compute-emulator

我有一个现有的 mvc4 Web 项目，我想将其部署到云服务并开始使用 azure 数据缓存。

我已将 windows azure 缓存 nuget 包添加到解决方案中的两个项目中，即 web 项目和类库项目，这两个项目都需要这些。

然后，我为 Web 项目添加了一个 Web 角色，并更新了 中的数据缓存标识符引用`web.config`以指向启用共存缓存的 Web 角色。

当我没有任何数据缓存代码时，我可以在模拟器上本地运行它而不会出现任何问题。但是我输入代码以访问数据缓存的那一刻就是我遇到问题的时候。只是这段代码导致 web 项目挂起：

```
var cache = new DataCache("default"); 
```

没有我知道的错误，无论是在 vs 输出中还是从 Web 应用程序生成的错误中，它只是挂起。

开始诊断此问题所在的最佳方法是什么？

**更新**

我刚刚注意到应用程序事件日志中生成了以下错误：

```
Application: CacheServiceEmulator.exe
Framework Version: v4.0.30319
Description: The process was terminated due to an unhandled exception.
Exception Info: Microsoft.ApplicationServer.Caching.DataCacheException
Stack:
   at Microsoft.ApplicationServer.Caching.AzureCommon.AzureUtility.ProcessException(System.Exception)
   at Microsoft.ApplicationServer.Caching.CacheServiceEmulator.CacheServiceEmulator.Main(System.String[])

Faulting application name: CacheServiceEmulator.exe, version: 1.0.4797.0, time stamp: 0x506f41ec
Faulting module name: KERNELBASE.dll, version: 6.2.9200.16451, time stamp: 0x50988aa6
Exception code: 0xe0434352
Fault offset: 0x000000000003811c
Faulting process ID: 0x13cc
Faulting application start time: 0x01ce1b74c41f996d
Faulting application path: D:\Users\Tony\My Documents\Visual Studio 2012\Projects\Seqential\Didbook_ws\Didbook.net\Didbook.net v1.0\didbook.net Web.Azure\csx\Debug\roles\didbook.net Web\plugins\Caching\CacheServiceEmulator.exe
Faulting module path: C:\WINDOWS\system32\KERNELBASE.dll
Report ID: 03114030-8768-11e2-beaf-68942335e1fe
Faulting package full name: 
Faulting package-relative application ID: 

Fault bucket -936878625, type 5
Event Name: CLR20r3
Response: Not available
Cab Id: 0

Problem signature:
P1: cacheserviceemulator.exe
P2: 1.0.4797.0
P3: 506f41ec
P4: Microsoft.ApplicationServer.Caching.AzureServerCommon
P5: 1.0.4797.0
P6: 506f41df
P7: 3d
P8: 18
P9: SWOUM0PNYW4I1S3EYHEY4VNB5OWO0LJ1
P10: 

Attached files:
C:\Users\Tony\AppData\Local\Temp\WER90C9.tmp.WERInternalMetadata.xml

These files may be available here:
C:\ProgramData\Microsoft\Windows\WER\ReportArchive\AppCrash_cacheserviceemul_667e21a2e47da59aad2c601844d8dcfd3d291a_28d494fe

Analysis symbol: 
Rechecking for solution: 0
Report ID: 03114030-8768-11e2-beaf-68942335e1fe
Report Status: 0
Hashed bucket: 700c7356d6308372410cf1d2baaf5d77 
```

这是否有助于追踪正在发生的事情？

另一条可能有帮助的信息是，如果我创建一个全新的解决方案，添加一个 Web 角色并启用同位缓存，我可以让它正常工作——它只是看起来特定于这个解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T11:18:23.590

Azure 缓存模拟器启动 logman.exe，将 cnf 参数作为 30:00 传递，但如果格式与您的区域设置不兼容，logman 可能会拒绝它。

您所要做的就是将长时间设置更改为“HH：mm：ss”，它会起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T10:31:08.287

您可以在此处转储您的 cscfgs 并列出存储密钥，同时检查应用程序服务器通道 (Admin) 中的事件和堆栈跟踪，它会有更好的堆栈跟踪。

# c# - SSRS 报告是否需要禁用部分呈现

> ID：15281334
> 
> 赞同：1
> 
> 时间：2013-03-07T20:43:51.947
> 
> 标签：c#, asp.net, telerik, reportingservices-2005, radmenu

我正在处理的 ASP.NET 站点有一些 SSRS 报告作为页面。对于这些页面中的每一个（但不是其他任何页面），母版页的 RadMenu 下拉菜单都不起作用，这似乎是因为报告视图页面正在通过 Page_Init 事件的脚本管理器禁用部分呈现。

不幸的是，原来的开发者已经不在了，而且这里似乎没有人确切知道为什么部分渲染被禁用了。如果我确实启用了部分渲染，似乎什么都不会破坏，但考虑到选择似乎是多么刻意，这似乎是一个不好的理由。

这是 Page_Init 事件的代码：

```
 protected void Page_Init(object sender, EventArgs e)
    {
        ScriptManager sm = ScriptManager.GetCurrent(this);
        if (sm != null)
        {
            sm.EnablePartialRendering = false;
        }
    } 
```

RadMenu 在我的母版页上，如下所示：

```
 <telerik:RadMenu ID="MasterPageMenu" runat="server" Height="20px" Style="top: 0px;
        left: 0px;" Width="100%" CssClass="RadMenuLevel" EnableRoundedCorners="True"
        OnItemDataBound="MasterPageMenu_ItemDataBound" OnClientItemClicking="onClicking"
        DataTextField="title" DataNavigateUrlField="url">
        <DefaultGroupSettings OffsetX="11" OffsetY="2" />
    </telerik:RadMenu> 
```

所有的报告都使用一个 ReportViewer.aspx 页面来加载，下面是代码：

```
 <%@ Page Title="Reports" Language="C#" MasterPageFile="~/HPTS.Master"       AutoEventWireup="true"
        CodeBehind="ReportViewer.aspx.cs" Inherits="HPTS.HPTSAdmin.ReportViewer" %>

    <%@ Register Assembly="Microsoft.ReportViewer.WebForms, Version=9.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"
        Namespace="Microsoft.Reporting.WebForms" TagPrefix="rsweb" %>
    <asp:Content ID="Content1" ContentPlaceHolderID="head" runat="server">
        <style type="text/css">
            .heightTest
            {
                height: auto;
            }
            .fullheight
            {
                margin-bottom: 120px;
            }
            #testdiv
            {
                display:table;
                width:1250px;
                height:auto;
            }
        </style>

        <script language="JavaScript" type="text/JavaScript">

    window.onload=function resize(){

    var viewer = document.getElementById("testdiv");

    var htmlheight = document.documentElement.clientHeight;

    viewer.style.height = (htmlheight - 120) + "px";

    }

        </script>

    </asp:Content>
    <asp:Content ID="Content2" ContentPlaceHolderID="cphHPTS" runat="server">
        <telerik:RadAjaxManagerProxy ID="RadAjaxManagerProxyforReports" runat="server">
            <AjaxSettings>
                <telerik:AjaxSetting AjaxControlID="ReportViewerControl">
                    <UpdatedControls>
                        <telerik:AjaxUpdatedControl ControlID="ReportViewerControl" />
                    </UpdatedControls>
                </telerik:AjaxSetting>
            </AjaxSettings>
        </telerik:RadAjaxManagerProxy>
        <div id="testdiv" style="width: 100%">
            <br />
            <rsweb:ReportViewer ID="ReportViewerControl" runat="server" Font-        Names="Verdana"
                Font-Size="8pt" ProcessingMode="Remote" CssClass="fullheight" Height="8.5in"
                Width="100%" SizeToReportContent="true">
                <ServerReport ReportPath="" ReportServerUrl="" />
            </rsweb:ReportViewer>
        </div>
    </asp:Content> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T15:31:01.920

我已经启用了部分渲染并将更改部署到我们的 QA 实例和我们的 Staging 实例，并且启用了部分渲染对页面没有任何负面影响，因此看起来没有问题。

# javascript - 在谷歌地图中拖动时如何从标记下方删除十字架

> ID：15281335
> 
> 赞同：1
> 
> 时间：2013-03-07T20:43:53.403
> 
> 标签：javascript, google-maps-api-3

如何在拖动过程中从标记下方移除那个烦人的十字？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T20:56:37.737

实现它的最简单方法是设置`raiseOnDrag: false`标记选项。

请参阅此处的示例：[小提琴](http://jsfiddle.net/dN7R9/2/)

# php - 最佳实践：使用 AJAX 发送的数据生成查询

> ID：15281336
> 
> 赞同：0
> 
> 时间：2013-03-07T20:43:55.313
> 
> 标签：php, mysql, pdo

我的应用程序中有一个搜索表单，其中数据被提交到后端，该后端返回一个包含结果的表。查询是这样动态构造的：

1.  $_POST['data'] 中的所有字段都根据该特定查询类别的允许字段列表进行过滤。

2.  空的字段被丢弃。

顺便说一句，在保存数据时也会这样做。现在，对于由一个单词组成的字段，这完全可以。但是我在某些查询中有一些复杂的 JOIN，并且 PDO 有时会抱怨不明确的字段（例如“id”）。

我应该怎么做才能最好地处理这种情况？我不希望用户操纵我的查询，但仍然想像今天一样简单地生成它们：

```
case 'id':
case 'company':
   $where .= ' AND `' . $field . '` = :' . $field;

... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T21:00:24.487

只需使用包含它的表的名称来完全限定每个字段名称。否则，您必须这样做，假设您有 2 个表“类别”和“项目”，两个表都有一个名为“名称”的字段，其中包含各自对象的名称，否则您将如何决定要引用哪一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T23:02:10.310

如果要连接表 A 和表 B，在引用 A 的 id 列时，请确保指定 A.id，这样 id 不再是“模糊字段”。

# batch-file - 从powershell按钮单击事件执行.bat文件

> ID：15281338
> 
> 赞同：0
> 
> 时间：2013-03-07T20:43:59.853
> 
> 标签：batch-file

我正在使用一些调用 .bat 文件的 powershell 按钮。我环顾四周，但它似乎只是反过来工作。我正在尝试找出从 powershell 按钮调用 .bat 文件的语法。这似乎可以从命令行工作，但我在按钮中使用它时遇到问题。有什么建议吗？

```
$StartButton = New-Object System.Windows.Forms.Button
$StartButton.Location = New-Object System.Drawing.Size(170, 450)
$StartButton.Size = New-Object System.Drawing.Size(125,43)
$StartButton.Font = New-Object System.Drawing.Font("Courier New", "10.5")
$StartButton.Text = "Start Tuner"
$StartButton.Add_Click(invoke-command{C:\temp\Map.bat})
$tunerForm.Controls.Add($StartButton) 
```

谢谢任何东西都非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T02:57:06.047

您还可以使用 Start-Process 和 -wait

```
Start-Process myBatch.bat -wait 
```

这样，您的脚本在该脚本运行/完成时不会执行任何其他操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T20:46:42.307

对不起，伙计们..我找到了答案.. Invoke-Expression "cmd /cc:\path\to\batch\file.bat"

对不起...

# java - 具有多个键的 Java Map，并将计数作为值

> ID：15281340
> 
> 赞同：1
> 
> 时间：2013-03-07T20:44:05.273
> 
> 标签：java, dictionary

我正在为一家小型企业创建一些图形软件。他们给了我一份他们去年的销售报告，在这份报告中，它显示了每个特定销售的“时间戳”和项目或“sku”，但没有特定的顺序。我想弄清楚在某一天每件商品的销量。我知道我想使用地图，但我不太熟悉在这种情况下如何使用它。如果 sku 在特定日期售出 0 件商品，我还需要地图返回 0。这很难，因为我不知道报告上会有多少个sku，而且报告没有特定的顺序。

例如，报告可以显示：

```
sku="AKD123"; timestamp="2012-02-01";
sku="AKD123"; timestamp="2012-04-14";
sku="REN134"; timestamp="2012-02-01";
sku="PIK383"; timestamp="2012-10-07";
sku="REN134"; timestamp="2012-02-01";
sku="REN134"; timestamp="2012-02-01";
sku="PIK383"; timestamp="2012-03-01";
sku="REN134"; timestamp="2012-02-01"; 
```

我怎么想有一张地图，我可以检查“2012-02-01”销售了多少“REN134”，希望得到 4 的回报。

我希望我说得足够清楚。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T20:47:39.497

Map 不能有重复的键。您需要做的是有一个`HashMap<String, ArrayList<String>>`或类似的东西，其中键是 SKU 编号，值是所有日期的列表，然后您可以将其用于进一步排序和处理以计算出现次数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T21:11:44.640

您需要两张地图，一张用于匹配`sku`某个日期和计数，另一张将每个日期映射到计数......试试这个......

```
final static String skus[] = {
    "AKD123",
    "AKD123",
    "REN134",
    "PIK383",
    "REN134",
    "REN134",
    "PIK383",
    "REN134"
};

final static String timestamp[] = {
    "2012-02-01",
    "2012-04-14",
    "2012-02-01",
    "2012-10-07",
    "2012-02-01",
    "2012-02-01",
    "2012-03-01",
    "2012-02-01"
};

@Test
public void countSkusPerDay() {
    Map<String, Map<String, Integer>> countMap = new HashMap<>();
    for(int i = 0; i < skus.length; i++) {
        String sku = skus[i];
        String date = timestamp[i];
        Map<String, Integer> countPerDateMap = countMap.get(sku);
        if(countPerDateMap == null) {
            countPerDateMap = new HashMap<>();
            countMap.put(sku, countPerDateMap);
        }
        Integer count = countPerDateMap.get(date);
        if(count == null) {
            countPerDateMap.put(date, 1);
        } else {
            countPerDateMap.put(date, count.intValue() + 1);
        }
    }

    for(Map.Entry<String, Map<String, Integer>> e : countMap.entrySet()) {
        System.out.println("sku " + e.getKey() + " sold in " + e.getValue().size() + " day(s) " + e.getValue());
    }
} 
```

输出是

```
sku REN134 sold in 1 day(s) {2012-02-01=4}
sku PIK383 sold in 2 day(s) {2012-10-07=1, 2012-03-01=1}
sku AKD123 sold in 2 day(s) {2012-02-01=1, 2012-04-14=1} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T21:03:22.763

考虑这段代码（我已经添加了您的示例数据）......它利用了 Map 不能有重复键的事实：

```
import java.util.HashMap;
import java.util.Map;
import java.util.Set;

public class TEST
{
  public static void main(String[] args)
  {
/*
sku="AKD123"; timestamp="2012-02-01";
sku="AKD123"; timestamp="2012-04-14";
sku="REN134"; timestamp="2012-02-01";
sku="PIK383"; timestamp="2012-10-07";
sku="REN134"; timestamp="2012-02-01";
sku="REN134"; timestamp="2012-02-01";
sku="PIK383"; timestamp="2012-03-01";
sku="REN134"; timestamp="2012-02-01";

    Transform into this array:
*/
    String[] inputValues = new String[]
    { "AKD123|2012-02-01", "AKD123|2012-04-14", "REN134|2012-02-01", "PIK383|2012-10-07", "REN134|2012-02-01", "REN134|2012-02-01",
        "PIK383|2012-03-01", "REN134|2012-02-01" };

    // That is your map
    Map<String, Integer> mapCouter = new HashMap<String, Integer>();
    // now iterate though all SKU sales
    for (String key : inputValues)
    {
      Integer count = mapCouter.get(key);
      if (count == null)
      {
        // not found... lets init.
        count = 0; // using java autoboxing.
      }
      mapCouter.put(key, ++count); // incrementing by 1 before storing in the Map
    }
    System.out.println("Report:");
    Set<String> keys = mapCouter.keySet();
    for (String key : keys)
    {
      System.out.println("key: " + key + " has " + mapCouter.get(key) + " occurences.");
    }
  }
} 
```

* * *

它产生以下输出：

```
Report:
key: REN134|2012-02-01 has 4 occurences.
key: AKD123|2012-04-14 has 1 occurences.
key: PIK383|2012-10-07 has 1 occurences.
key: AKD123|2012-02-01 has 1 occurences.
key: PIK383|2012-03-01 has 1 occurences. 
```

**注意：**您需要解析输入文件（因为它可能是大数据）并使用所示的“地图计数器”技术。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T20:50:52.067

创建您自己的`Item`类来封装`sku`和`timestamp`字段。实现`hashCode`and`equals`方法，以便稍后 a`HashMap`可以正常工作。

创建您的地图。

```
Map<Item, Integer> salesMap = new HashMap<Item, Integer>(); 
```

您需要使用 0 的值初始化地图，以便稍后您可以了解哪些商品在一天内没有销售。

从报告中读取数据并创建您的`Item`对象。如果地图中还不存在，则将其存储在地图中，值为 1。如果存在，则取存储的值，加 1，并存储新值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-07T21:14:10.020

[有一张Guava Multisets](https://code.google.com/p/guava-libraries/wiki/NewCollectionTypesExplained#Multiset)的地图怎么样`Map<String,Multiset<String>> itemToDatesSoldMap = new HashMap<>();`。这将允许我们做类似的事情

```
public int countSalesOfItemOnDate(String sku, String timestamp){
    Multiset<String> timestampMultiset = itemToDatesSoldMap.get(sku);
    if(timestampMultiset == null){
        return 0;
    }
    return timestampMultiset.count(timestamp);
}

countSalesOfItemOnDate("REN134","2012-02-01"); 
```

# record - 单击“添加评论”按钮

> ID：15281341
> 
> 赞同：0
> 
> 时间：2013-03-07T20:44:05.683
> 
> 标签：record, selenium-ide, playback

当我录制我的脚本时，我的脚本在点击“添加评论”图标时失败了。我得到的错误是找不到该元素。html脚本是：

一个 id="cmt_place" class="btn add_comment" onclick="javascript:SNI.Community.Toolbox.TopNavCheckandShow()">

所以我很困惑我应该使用哪个命令以及目标和值应该是什么，以便在测试运行时它应该能够自动单击添加注释图标。

新的测试用例

```
open    /registration/login.esi     
type    id=up-ur-email             
type    id=up-ur-password       

click   css=#up-ur-widget-login > #up-ur-widget-nav-item-off > a > em   
open    /home/home.esi  
click   link=TEST_upload    
click   id=Add Comment  
click   id=commenttext  
type    id=commenttext                test123
click   css=#post-comment-omnt > em     
clickAndWait    link=Log Out 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T10:36:36.467

在目标字段中使用注释框的 Xpath 并使用 pause & setCursorPosition 命令暂停等待一段时间并使用 setCursorPosition 命令指向注释框

```
open    /registration/login.esi     
type    id=up-ur-email             
type    id=up-ur-password       
click   css=#up-ur-widget-login > #up-ur-widget-nav-item-off > a > em   
open    /home/home.esi  
click   link=TEST_upload   
click   id=Add Comment(use Xpath of comment box instead of this)
pause   2000
setCursorPosition   id=commenttext
click   id=commenttext  
type    id=commenttext                test123
click   css=#post-comment-omnt > em     
clickAndWait    link=Log Out 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T11:30:09.600

```
open    /registration/login.esi     
type    id=up-ur-email             
type    id=up-ur-password       

click   css=#up-ur-widget-login > #up-ur-widget-nav-item-off > a > em   
open    /home/home.esi  
click   link=TEST_upload 
Pause   30000
click   id=Add Comment  
click   id=commenttext  
type    id=commenttext                test123
click   css=#post-comment-omnt > em     
clickAndWait    link=Log Out    

pause command will pause 3 second before click the  Add comment button. 

Try this.

Thank you. 
```

# html - 如果我使用整个路径名，我的 CSS 只会链接到我的 HTML 页面！为什么？

> ID：15281349
> 
> 赞同：-1
> 
> 时间：2013-03-07T20:44:42.860
> 
> 标签：html, css, filepath

如果我尝试使用 cssstyle2.css ||fifastream1.0/cssstyle2.css 甚至 %fifastream1.0%/cssstyle2.css 将我的 CSS 链接到我的 HTML 页面，它不会在网页上显示任何 CSS。（FF、IE、Chrome）。我之前已经将我的 CSS 页面上传到 stackoverflow，显然它很好。

显然，如果我只能让我的网页在我的驱动器上“正常”工作，那就不好了。Soo 知道为什么 FF、IE 或 Chrome 无法获取我的 CSS 吗？

作为一个完整的初学者，已经为此工作了几个星期。如果有人能找到答案，那将是很大的帮助！我已经搜索并尝试了一切。

这是 HTML 中的链接（如果这有帮助的话）

```
<!DOCTYPE html> 
<html>

<head>
<link href="C:///*****/******/Desktop/FifaStream1.0/cssstyle2.css" rel="stylesheet"  type="text/css" media"screen"/>
<title> Fifa Stream </title>
</head>

<body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T21:05:03.023

当所有内容都在同一个文件夹中时，您应该使用以下内容：

```
<link href="cssstyle2.css" rel="stylesheet"  type="text/css" media"screen"/> 
```

当您的 CSS 文件位于不同的文件夹中时，请使用：

```
<link href="folder/cssstyle2.css" rel="stylesheet"  type="text/css" media"screen"/> 
```

如果您的 CSS 文件是 html 文件上方的一个目录，则使用：

```
<link href="../cssstyle2.css" rel="stylesheet"  type="text/css" media"screen"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T20:48:17.127

要进行相对引用，您的 CSS 至少需要在一定程度上具有引用性。例如，如果页面在 Users/whatever/index.html 中，您的 CSS 将在 Users/whatever/css/style.css 中。那么您的参考将是“css/style.css”

快速参考指南：

```
<!--
    ./filename or filename = same folder as page location
    ../filename = folder above that of page folder location
    /filename = root folder of project
--> 
```

如果您的 CSS 文件与您的页面文件位于完全不同的位置，则除非您提供您必须提供的完整路径，否则可能无法找到它。

# javascript - 什么是flare json中的“大小”——在D3示例中使用？

> ID：15281352
> 
> 赞同：3
> 
> 时间：2013-03-07T20:44:54.130
> 
> 标签：javascript, d3.js, flare

我和我的同事正在使用 D3 可视化。具体来说，我们从[这个例子](http://bl.ocks.org/mbostock/4063530)开始。这个可视化似乎使用了某种与 [flare API相关的json](http://flare.prefuse.org/api/)

在示例 json 中，有如下几行：

```
 "name": "cluster",
 "children": [
  {"name": "AgglomerativeCluster", "size": 3938},
  {"name": "CommunityStructure", "size": 3812},
  {"name": "HierarchicalCluster", "size": 6714},
  {"name": "MergeEdge", "size": 743} 
```

我知道“名称”之后的东西与 Flare 类有关。尽管进行了很多谷歌搜索，但我似乎无法找到“大小”到底是什么以及它的单位是什么？更一般地说，在哪里可以找到某种关于flare的json格式的规范及其含义？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-03T22:58:39.497

您所指的节点链接树布局示例未使用它。该大小用于其他示例，如树形图、气泡布局、圆形包装、气泡布局、冰柱、旭日形等。您将使用带有这些示例的flare.json 文件看到大小的影响。

# javascript - 如何使用 javascript 在服务器上保存图像？

> ID：15281353
> 
> 赞同：0
> 
> 时间：2013-03-07T20:44:58.700
> 
> 标签：javascript

我正在一个生成base64图像的小网络应用程序中工作，我正在使用blob将它放回文件中（是​​.png，但我还没有重命名它），现在我正在尝试保存它在我的服务器上有什么想法或不同的方法吗？

这是脚本：

```
var img = document.getElementById("MyPix");
    img.onclick = function() {

        var image_data = atob(img.src.split(',')[1]);
        var arraybuffer = new ArrayBuffer(image_data.length);
        var view = new Uint8Array(arraybuffer);
        for (var i=0; i<image_data.length; i++) {
            view[i] = image_data.charCodeAt(i) & 0xff;
        }
        try {
            var blob = new Blob([arraybuffer], {type: 'application/octet-stream'});
        } catch (e) {
            var bb = new (window.WebKitBlobBuilder || window.MozBlobBuilder);
            bb.append(arraybuffer);
            var blob = bb.getBlob('application/octet-stream');
        }

        var url = (window.webkitURL || window.URL).createObjectURL(blob);

        valor = (document.getElementById("link").value = url)

        location.href = valor; 

    }; 
```

我对 js 不是很好，所以如果你想有一个更好的想法，请访问项目[点击这里](http://forbesstudio.com/apps/post_card/index2.html)它的所有 javascript，所以只需查看源代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T00:11:07.520

您不能仅使用客户端 JavaScript 将其保存到您的服务器。形成您要保存在 Javascript 中的数据，然后通过调用您编写的页面将其发布到您的服务器，该页面可以将 POST 数据转换为文件系统上的文件，因此在您的情况下，是一个 .php 文件，其中包含查找的代码`$_POST`数据，然后将其写入文件。在确保它是安全的之后，因为任何人都可以将数据发布到该页面，而不仅仅是使用您网页的人。

# ios - 从 iOS 上的浏览 器流式传输 MJPEG

> ID：15281354
> 
> 赞同：2
> 
> 时间：2013-03-07T20:44:59.160
> 
> 标签：ios, video-streaming, mjpeg

在花了几个小时在 HTML5 中搜索非工作`drawImage`画布的解决方案后，我陷入了没有解决方案的困境。基本上我正在运行一个 MJPEG 服务器，我需要从`Safari`或流式传输其内容`Chrome`。

是否有不涉及创建本机应用程序的解决方案？

# .net - 温莎城堡国际奥委会“成本”

> ID：15281356
> 
> 赞同：0
> 
> 时间：2013-03-07T20:45:06.533
> 
> 标签：.net, performance, castle-windsor, ioc-container

使用 Castle Windsor 进行依赖解析的性能成本在哪里？是开`new WindsorContainer()`还是开`container.Resolve<T>()`？

基于对此的回答，ASP.NET 服务是否应该在 中初始化 Container `Application_Start`，然后`Resolve<T>()`根据需要进行初始化？还是`Resolve<T>()`在`Application_Start`?

顺便说一句 - 我知道这可能会在某些人的脑海中构成过早的优化......我只是在为可扩展的 ASP.NET 服务寻找正确的实现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T00:03:02.837

大多数应用程序中最昂贵的操作是在容器中注册组件 ( `container.Install(FromAssembly.This())`)，这是每个应用程序执行一次的操作。

除非你做错了什么，否则解决*问题*的成本往往可以忽略不计。

扩大注册。与容器做的其他事情相比，它的成本很高。在绝对数量上，它仍然足够快，不会在绝大多数应用程序中令人头疼。

因为那是容器（以 Windsor 为例，因为这就是您似乎正在使用的，而且我碰巧最了解）去扫描程序集（带有反射）以查找您要注册的类型，然后检查这些类型（使用反射）以构建适当的组件模型，然后将所有这些信息提供给设施和其他扩展以进行检查和可能的修改。此时还会进行依赖关系图的分析和各种优化，以便 Windsor 可以在注册过程完成后更快地执行其他更频繁的操作。

# javascript - 如何在javascript中多次获取更改innerHTML的链接

> ID：15281359
> 
> 赞同：1
> 
> 时间：2013-03-07T20:45:20.530
> 
> 标签：javascript, html, hyperlink, innerhtml, getelementbyid

我正在尝试获取一个链接以更改每次单击 javascript innerHTML。

```
function id_1(a){
    var id = document.getElementById(a);
    if (id.innerHTML==="innerHTML2"){
        id.innerHTML="innerHTML1";
    }
    if (id.innerHTML==="innerHTML1"){
        id.innerHTML="innerHTML2";
    }
} 
```

```
<a id="id" href="javascript:id_1('id')">innerHTML1</a> 
```

当您单击链接时，我希望它从`innerHTML1`to`innerHTML2`变为`innerHTML1`to`innerHTML2`等等。

现在它只是从`innerHTML1`到切换一次`innerHTML2`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T20:49:14.800

您需要使用`else if`第二个 if 语句。

您的代码中的逻辑在第二次单击时（当内容为 innerHTML2 时）如下所示：

1.  第一个 if 语句测试内容是否为 innerHTML2，因此将内容更改为 innerHTML1（您想要的）。
2.  第二个 if 语句测试内容是否为 innerHTML1，它是（因为它只是在步骤 1 中更改）所以内容被更改回 innerHTML1（不是您想要的）。

所以解决方案应该如下所示：

```
function id_1(a){
    var id = document.getElementById(a); 
    if (id.innerHTML=="innerHTML2"){
        id.innerHTML="innerHTML1";
    }else if (id.innerHTML=="innerHTML1"){
        id.innerHTML="innerHTML2";
    }
} 
```

为了强调这一点，您可以保持代码不变，但使用 return 来确保只使用一个 if 语句。

```
function id_1(a){
    var id = document.getElementById(a); 
    if (id.innerHTML=="innerHTML2"){
        id.innerHTML="innerHTML1";
        return;
    }

    if (id.innerHTML=="innerHTML1"){
        id.innerHTML="innerHTML2";
        return;
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T20:49:30.923

你只需要`else`在你的`if`陈述之间使用一个：

```
function id_1(a){
    var id = document.getElementById(a);
    if (id.innerHTML==="innerHTML2"){
        id.innerHTML="innerHTML1";
    } else if (id.innerHTML==="innerHTML1"){
        id.innerHTML="innerHTML2";
    }
} 
```

没有第二个，`else`您的第二个`if`会受到第一个更改的影响`if`。

由于 innerHTML 只有两种状态，您实际上可以简化为：

```
function id_1(a){
    var id = document.getElementById(a);
    if (id.innerHTML==="innerHTML2"){
        id.innerHTML="innerHTML1";
    } else {
        id.innerHTML="innerHTML2";
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T20:53:44.443

它实际上一直在切换，但正如你所写的那样，它切换到“innerHTML1”，然后又回到“innerHTML2”

所以只需将第二个“if”更改为“else if”

```
<html>
<head>
<script>
function id_1(a){
    var id = document.getElementById(a);
    if (id.innerHTML==="innerHTML2"){
    id.innerHTML="innerHTML1";
    }
    else if (id.innerHTML==="innerHTML1"){
    id.innerHTML="innerHTML2";
    }
}
</script>
</head>
<body>
<a id="id" href="javascript:id_1('id')">innerHTML1</a>
</body>
</html> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-07T20:50:17.920

您只是缺少一个 else：

```
<html>
<head>
<script>
function id_1(a){
    var id = document.getElementById(a);
    if (id.innerHTML==="innerHTML2"){
        id.innerHTML="innerHTML1";
    }
    else if (id.innerHTML==="innerHTML1"){
        id.innerHTML="innerHTML2";
    }

}
</script>
</head>
<body>
<a id="id" href="javascript:id_1('id')">innerHTML1</a>
</body>
</html> 
```

小提琴：http: [//jsfiddle.net/WCgAS/](http://jsfiddle.net/WCgAS/)

# java - Spring 任务执行器仅在 @Scheduled 注解放置在轮询类中时创建一个实例

> ID：15281364
> 
> 赞同：0
> 
> 时间：2013-03-07T20:45:30.193
> 
> 标签：java, spring, task

我有一系列扩展基础服务的服务。在这个基础服务中，我实例化了一个用于轮询数据库并根据其内容发送通知的类，该轮询的时间由 spring 处理。我期望的是每个扩展基本服务的服务都应该有一个这个轮询器的实例，但是根据我放置@Scheduled 注释的位置，它不起作用。

我想要的是这样的：

```
public class Base {
    private Poller p = new Poller(this);

    // the rest of the service code
}

public class Poller{

    Base b;

    public Poller(Base B){
        b=B;
    }

    @Scheduled(fixedDelay=5000)
    public void poll(){
        //do stuff
        System.out.println(b.name); //doesn't work, causes really unhelpful errors
        System.out.println("----"); //prints as expected, but only once
                                    //regardless of how many extending services exist
    }
} 
```

但它似乎只在所有扩展程序之间实例化一个轮询器。如果我像这样构造它：

```
public class Base {
    private Poller p = new Poller(this);

    // the rest of the service code

    @Scheduled(fixedDelay=5000)
    public void poll(){
        p.poll();
    }
}

public class Poller{

    Base b;

    public Poller(Base B){
        b=B;
    }

    public void poll(){
        //do stuff
        System.out.println(b.name); //prints the name of the service for each extender
        System.out.println("----"); //prints as expected, once for each extender
    }
} 
```

它按预期工作，但不符合这里的设计目标。

有没有办法让预定的注释留在轮询器中，同时确保每个扩展服务都有自己的实例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T20:54:55.673

这是因为您的`Poller`课程不是 Spring 管理的，在哪里`Base`。 用 in 中的操作符`Poller`实例化，因此 Spring 没有处理它。如果 Spring 没有创建实例，则它不会由 Spring 管理。`new``Base`

我认为您的设计总体上是有缺陷的。您的孩子有对基数的引用和对孩子的基数。对我来说，您似乎很难以这种方式创建多个子类。

如果你想有一个基类，我会推荐两件事之一。

1.  遗产。拥有`Poller`（以及其他子类） extend `Base`。
2.  代表团。成为`Base`每个子类的成员，并在子类中委派给它。

使用其中任何一种设计，我认为您都可以让您的代码按预期工作。

# php - 从多维数组中的特定数组中获取所有值

> ID：15281374
> 
> 赞同：1
> 
> 时间：2013-03-07T20:45:58.887
> 
> 标签：php, arrays, loops

我一直在寻找这个问题的答案，但恐怕我一直无法找到解决这个问题的方法。我创建了一个包含邮政编码信息的多维数组。但是，我无法以我需要的方式从中提取价值。这是 print_r() 的示例：

```
Array ( 
[0] => Array ( 
    [0] => 59101 
    [1] => 0.0 )
[1] => Array ( 
    [0] => 59102 
    [1] => 5.0 )
[2] => Array ( 
    [0] => 59105 
    [1] => 6.8 )
[3] => Array ( 
    [0] => 59106 
    [1] => 9.2 )
[4] => Array ( 
    [0] => 59037 
    [1] => 12.7 )
[5] => Array ( 
    [0] => 59044 
    [1] => 13.9 )
[6] => Array ( 
    [0] => 59002 
    [1] => 16.6 )
[7] => Array ( 
    [0] => 59079 
    [1] => 19.3 ) 
```

)

我需要查看特定邮政编码的数组，然后获取与该邮政编码关联的距离（每个数组中的第二个值）。我曾考虑重组阵列，但我不确定如何完成它。这是我当前的代码：

## 编辑##对不起，我可能不清楚。下面的代码是我用来构建数组的代码，而不是从数组中提取信息。我不知道如何从数组中获取信息。

```
$rArray = array();
foreach ($points as $point){
    $zips = $point->Postcode;
    $dists =  number_format($point->D,1);
    array_push($rArray,array($zips,$dists));
} 
```

关于实现这一目标的最佳方法的任何想法？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T21:04:37.553

这？

# 编辑：在你的问题更新之后。

```
function getDistanceByZip($zip) {
   $array = //your array here;
   foreach($array as $value) {
      if($zip == $value[0]) {
         return $value[1];
      }
   }
   return false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T20:51:15.467

也许这个？

```
foreach ($points as $point){
   if ($point->Postcode === $codeIamLookingFor) {
       echo "Distance: " . number_format($point->D, 1);
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T20:54:00.293

```
function arrayseek($array, $zip){
   foreach($array as $k => $v){
       if($v[0] == $zip){
           return $v[1];
       }
   }
   return false;
} 
```

# html - CSS 选项卡在 IE 中位于左侧，但在 Mozilla 中它们居中。IE 有解决办法吗？

> ID：15281375
> 
> 赞同：0
> 
> 时间：2013-03-07T20:46:04.783
> 
> 标签：html, css

标签完美地工作。我只是在 IE 中的位置有问题。在 Mozilla 中，它完美地显示了选项卡的位置，但是当我在 IE 中加载页面时，它会将选项卡移动到选项卡所在的表格的完整左侧。

这是我的 CSS 代码：

```
 a:active {
outline: none;
 }
 a:focus {
-moz-outline-style: none;
 }
 #tabs_container {
width: 626px;
font-family: Arial;
font-size: 10px;
}
 #tabs_container ul.tabs {
list-style: none;
border-bottom: none;
height: 25px; 
margin: 0px;

  }
  #tabs_container ul.tabs li {
 float: left;
   }
  #tabs_container ul.tabs li a {
padding: 6px 9px;
display: block;
border-left: 1px solid #90afcb;
border-top: 1px solid #90afcb;
border-right: 1px solid #90afcb;
border-bottom: 1px solid #90afcb;
margin-right: 4px;
text-decoration: none;
background-color: #ffffff;
    }
    #tabs_container ul.tabs li.active a {
background-color: #90afcb;
padding-top: 6px;
    }
   div.tab_contents_container {
border: none;
border-top: none;
padding: 10px;
font-size: 10px;
    }
    div.tab_contents {
display: none;
    }
    div.tab_contents_active {
display: block;
    }
    div.clear {
clear: both;
    } 
```

HTML

```
 <!-- These are the tabs -->
  <ul class="tabs">
    <li class="active">
      <a href="#" rel="#tab_1_contents" class="tab"><span>Dienstleistung | Services</span></a>
    </li>
    <li><a href="#" rel="#tab_2_contents" class="tab"><span>Über uns | About us</span></a></li>
    <li><a href="#" rel="#tab_3_contents" class="tab"><span>Netzwerken | Networking</span></a></li>
    <li><a href="#" rel="#tab_4_contents" class="tab"><span>Social Media</span></a></li>
    <li><a href="#" rel="#tab_5_contents" class="tab"><span>Impressum</span></a></li>
  </ul> 
```

如果您能提供任何帮助，我将不胜感激。非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T04:47:54.103

嗨，您是否尝试添加`float` `#tabs_container ul.tabs`和`#tabs_container ul.tabs li a`

```
#tabs_container ul.tabs {
     float:left;
    border:1px solid red;
list-style: none;
border-bottom: none;
height: 25px; 
margin: 0px;

  }

  #tabs_container ul.tabs li a {
float:left;
padding: 6px 9px;
display: block;
border-left: 1px solid #90afcb;
border-top: 1px solid #90afcb;
border-right: 1px solid #90afcb;
border-bottom: 1px solid #90afcb;
margin-right: 4px;
text-decoration: none;
background-color: #ffffff;
    } 
```

# image - Wordpress 调整图片大小 = 大

> ID：15281376
> 
> 赞同：0
> 
> 时间：2013-03-07T20:46:12.370
> 
> 标签：image, wordpress

我的主题工作正常。我在调整大小方面没有问题，但是生成的图像的大小存在很大问题。

我上传了一张 30KB 的图片：300*250

它调整了大小，100*80 的图像是 20Kb，这太疯狂了。它应该最大为 5 或 6KB。

我正在使用 Wordpress 内置调整大小功能。使用 WP Smush 并没有太大帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T21:31:07.790

一个完全未压缩的 80 x 100 像素、8 位颜色的 jpeg 图像最多可以拍摄：

```
 80 * 100 * (24 bits per pixel) / 8 = 24000 bytes ~= 23.4375 kb 
```

Wordpress 的默认压缩率为 90%，但如果太高，您可以使用 3.5 版中添加的[WP_Image_Editor](http://codex.wordpress.org/Class_Reference/WP_Image_Editor)类更改它。

具体来说，您应该按照 jpeg_quality 的[Wordpress 过滤器参考中的建议将](http://codex.wordpress.org/Plugin_API/Filter_Reference)[set_quality](http://core.trac.wordpress.org/browser/tags/3.5.1/wp-includes/class-wp-image-editor.php#L194)与 wp_editor_set_quality 或 WP_Image_Editor::set_quality()一起使用。

# oop - 设置器和状态模式中的逻辑

> ID：15281377
> 
> 赞同：2
> 
> 时间：2013-03-07T20:46:12.470
> 
> 标签：oop, design-patterns, state-pattern

让我们定义一个简单的状态机：

```
public enum State {

    A, B, C, D;

    private List<State> validChange;

    static {
        A.validChange = Arrays.asList(B);
        B.validChange = Arrays.asList(C);
        C.validChange = Arrays.asList(A, D);
        D.validChange = Arrays.asList(D);
    }

    public boolean couldChange(State newState) {
        return validChange.contains(newState);
    }
} 
```

和一个简单的状态对象

```
public class StateObject {

    private State currentState;

    public State getCurrentState() {
        return currentState;
    }

    public void setCurrentState(State currentState) {
        if (this.currentState != null && !this.currentState.couldChange(currentState)) {
            throw new IllegalStateException(String.format("Can not change from %s to %s", this.currentState, currentState));
        }
        this.currentState = currentState;
    }
} 
```

正如我们在 setter 中看到的，我们检查状态更改是否有效。我的问题：

1.  向 setter 方法添加一些逻辑是否是一个好的解决方案（我们不感兴趣它是如何工作的，只关心 setter 中的事实逻辑）？
2.  我们什么时候应该添加逻辑，什么时候不应该？
3.  如果不是为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T20:55:11.437

状态模式多年来一直有其参考实现。实施无需您担心。状态不表示为枚举，而是表示为从同一基类继承的类。通过这种方式，状态之间的转换实现更加简单和清晰，因为每个状态只负责自己的转换。

我想知道为什么您决定尝试自己的方法，而不是遵循良好、可靠的做法。

回答您的问题 - 在 setter 中使用代码并没有根本性的错误。但是你实现状态模式的方式会引发不必要的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T21:49:36.210

1.  一般来说，是的，在 setter 中有逻辑是可以的。

2.  如果您认为[SRP](https://en.wikipedia.org/wiki/Single_responsibility_principle)是一个好主意，那么**您可以添加与 setter 功能相关的逻辑**，这主要意味着保持对象的完整性以更改属性值。

3.  就像我说的，这是一个坏主意的情况之一是违反 SRP。

实际上，我会说发布的代码显示了这种违规的示例，因为 setter 有两个职责：

*   初始化`State`一个新`StateObject`实例，
*   处理任何过渡到新的`State`.

如果您实现规范状态机的剩余部分，即完整的转换功能，包括转换操作，第二个责任将变得更加明显。

这种关注点分离变得重要的一个主要例子是在你只有setter注入的代码中——在这种情况下你如何区分初始化和转换？使用此代码，您不能。

* * *

此外，我相信如果你重构`validChange`到`StateObject`，情况会变得更加明显，我认为这是必要的，因为当前代码破坏了封装 -`State`状态**机标签**包含状态转换功能的“保护规范”。假设您希望在不同的状态机中拥有相同的标签 - 就目前的代码而言，您不能拥有这样的标签（*甚至有一种很好的代码味道应该指出您的问题，而不是使用`enum`构造函数，你被迫创建一个静态初始化块*）。

# linux - 颠覆预提交钩子

> ID：15281380
> 
> 赞同：0
> 
> 时间：2013-03-07T20:46:22.073
> 
> 标签：linux, svn, hook

嗨！我有一个在 linux 上运行的颠覆服务器，我想设置一个检查日志消息格式的钩子。日志消息应该是这样的：

#ID 文本

所以它应该以 # 开头，后跟一个 ID（仅限数字），然后是一个空格和一个日志消息，其长度至少为 50 个字符。

我怎样才能做到这一点？哦，我想在那之后调用一些脚本，我想将日志消息传递给脚本，所以我需要变量或其他东西中的日志消息。

谢谢您的帮助！

# html-email - 从 HTML 电子邮件中的嵌套表中提取电子邮件地址

> ID：15281381
> 
> 赞同：0
> 
> 时间：2013-03-07T20:46:23.477
> 
> 标签：html-email

在接下来的一天左右，我将收到大约 500 封电子邮件。电子邮件的布局完全相同，即在表格内显示信息的 HTML 电子邮件。电子邮件中有嵌套表。

我需要从每封电子邮件中提取电子邮件地址并将其存储在文件（文本/csv）中。而不是“复制和粘贴”，有没有我可以用来执行此操作的 php 脚本或一些浏览器插件？

GF

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T20:51:12.537

我将通过 id、class 或 name 使用 php 解析和一个小脚本来抛出该文件夹中的所有页面以将其提取为 csv 我将使用 fputcsv。

希望它有所帮助。

# java - Scala 不能引用 Java 类

> ID：15281383
> 
> 赞同：1
> 
> 时间：2013-03-07T20:46:27.770
> 
> 标签：java, scala, scala-java-interop

我有一个用于国际象棋 AI 服务器的 Java 框架。我打算使用 Scala 为我的国际象棋 AI 编写逻辑。所以我需要编辑框架的“AI”类来调用我的Scala代码。

当我尝试从 Scala 中的 java 框架中引用一个类时，就会出现我的问题，并且我收到一个遵循此模式的错误：

```
class * in package * cannot be accessed in package * 
```

我能找到的最相关的事情是： [scala 访问限定符的保证是什么？](https://stackoverflow.com/questions/13712506/what-are-the-guarantees-for-scala-access-qualifiers)，但是这对我一点帮助都没有。

接下来我发现：[.java 和 .scala 类之间是否可能存在循环依赖关系？](https://stackoverflow.com/questions/4464059/is-it-possible-to-have-a-circular-dependency-between-java-and-scala-classes/4464076#4464076) 我将尝试设置一个 maven 解决方案，但最终我需要使用 make 编译它，并使用 shell 脚本运行它

创建虚拟类似乎是一个糟糕的解决方案。我不想继续编辑框架，重新编译它，并修复它对调用我的 Scala 类的任何抱怨。

我有点困惑为什么这是一个问题。我可以使用 Java 语法调用任何本机 Java 函数，没问题。为什么会发生这种情况，即使我已将框架放入 jar 并以这种方式引用它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T21:02:01.953

看起来特定的类是包私有的。请将它们公开，然后再报告。

# dynamics-crm-2011 - 表单的加载脚本可以访问除主要实体之外的其他实体吗？

> ID：15281385
> 
> 赞同：2
> 
> 时间：2013-03-07T20:46:31.587
> 
> 标签：dynamics-crm-2011

我需要根据另一组实体的数据将字段添加到表单中。这可以使用事件脚本还是需要插件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T22:33:36.170

鉴于我正确理解了您的任务，可以使用 JavaScript 和插件来完成。您需要考虑一个显着差异。

是否仅在实际用户加载表单时才对其他实体进行更改？如果是这样，JS 是正确的方法。

或者，即使控制台客户端或系统进程检索到主实体的值，您也可能需要确保写入这些值？在这种情况下，C# 是您唯一的选择。

编辑：

只需调用 oData 即可在*onload*事件中访问**任何**实体的值。我相信最近有人问[过类似的问题。](https://stackoverflow.com/questions/15276617/how-to-filter-w-r-t-multiple-fields-in-odata-using-filter/15279446#15279446)基本格式如下所示。

 *```
http://Server:Port/Organization
  /XrmServices/2011/OrganizationData.svc
  /TheEntityLogicalNameOfYoursSet()?$filter=FieldName eq 'ValueOfIt' 
```

一些额外的说明。

1.  如果您的目标是在线安装，那么语法当然会有所不同，因为*Schema-Server-Port-Organization*以不同的模式提供（https、orgName.crm4.something.something.com 等）。*您可以在Settings*中查找它。

2.  也许它应该不言而喻，我相信你已经意识到了，但为了完整起见，*TheEntityLogicalNameOfYours*需要替换为**实际**名称（除非**那是**你的实际名称，在这种情况下我会担心，哈哈）。

3.  如果您对整个 oData 事物不熟悉，请继续询问。我的印象是我给你的信息很受欢迎，但并没有真正产生“啊哈！” 为你体验。不过，您可能想提出单独的问题。一些例子就在我的脑海中。

    一种。“如何在 JavaScript 中执行 oData 调用？”
    湾。“我如何访问获取的数据？”
    C。“如何以编程方式在表单上添加/删除/隐藏字段？”
    d。“我如何合并来自……的数据？”*

# iphone - Google + iPhone API 无需离开应用即可登录和分享

> ID：15281386
> 
> 赞同：14
> 
> 时间：2013-03-07T20:46:31.637
> 
> 标签：iphone, google-plus

我最近在我的应用程序中集成了 Google + API，这很容易，我唯一的问题是一切都需要你离开应用程序然后回来（它为此使用 URL 方案）。这不是我想要的行为，有没有办法直接调用他们的服务并像在 LinkedIn API 中一样对响应做任何我想做的事情？

我真的很想避免在 Safari 和我的应用程序之间来回切换。任何建议/文件表示赞赏。

谢谢，

奥斯卡

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2014-07-04T15:04:24.047

**来自谷歌的更新**

> 今天，我们发布了一个新的 Google Sign In iOS SDK，它内置了对通过 WebView 登录的完整支持：developers.google.com/identity/sign-in/ios SDK 支持调度到任何处理 Sign 的 Google 应用程序在存在时，使用 WebView 后备。在所有情况下，都避免了 Safari 开关，我们认为这是避免应用被拒绝的关键因素。我们期待从使用新 SDK 的人们那里获得反馈，并希望它的使用可以取代人们在此期间实施的（巧妙而勤奋的）变通办法。

* * *

***不再需要下面的方法***

**此方法使用自定义 UIWebView 处理登录内部，此方法有效且已获 Apple 批准**

我的应用被踢出审查原因

```
"The app opens a web page in mobile Safari for logging in to Google plus, 
then returns the user to the app. The user should be able log in without opening 
Safari first." 
```

请参阅此链接[https://code.google.com/p/google-plus-platform/issues/detail?id=900](https://code.google.com/p/google-plus-platform/issues/detail?id=900) 我确实通过以下步骤解决了它

**1）创建UIApplication的子类，覆盖openURL：**

。H

```
#import <UIKit/UIKit.h>

#define ApplicationOpenGoogleAuthNotification @"ApplicationOpenGoogleAuthNotification"

@interface Application : UIApplication

@end 
```

.m

```
#import "Application.h"

@implementation Application

- (BOOL)openURL:(NSURL*)url {

    if ([[url absoluteString] hasPrefix:@"googlechrome-x-callback:"]) {

        return NO;

    } else if ([[url absoluteString] hasPrefix:@"https://accounts.google.com/o/oauth2/auth"]) {

        [[NSNotificationCenter defaultCenter] postNotificationName:ApplicationOpenGoogleAuthNotification object:url];
        return NO;

    }

    return [super openURL:url];
}

@end 
```

*   这基本上会阻止从 iOS 上的 Chrome 打开任何内容
*   我们捕获 auth 调用并将其重定向到我们的内部 UIWebView

**2）到 info.plist，添加 Principal 类，并为其添加 Application（或任何您命名的类）**

*添加 plist 键“NSPrincipalClass”并作为主应用程序的类的值（扩展 UIApplication 的类，在本例中为 Application（参见上面的代码））*

**3) 捕获通知并打开内部 webview**

*当您的自定义应用程序类发送 ApplicationOpenGoogleAuthNotification 时，在某处（可能在 AppDelegate 中）侦听它，当您收到此通知时，打开 UIWebView（使用通知传递的 URL 作为 webview 的 url）（在我的情况下 LoginViewController 侦听对于此通知，当收到通知时，它会打开一个视图控制器，其中仅包含一个连接到委托的 web 视图）*

**4）在webview里面**

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType {

    if ([[[request URL] absoluteString] hasPrefix:@"com.XXX.XXX:/oauth2callback"]) {
        [GPPURLHandler handleURL:url sourceApplication:@"com.google.chrome.ios"n annotation:nil];

        // Looks like we did log in (onhand of the url), we are logged in, the Google APi handles the rest
        [self.navigationController popViewControllerAnimated:YES];
        return NO;
    }
    return YES;
} 
```

*   或类似的代码，处理响应
*   com.XXX.XXX:/oauth2callback 来自上述代码，替换为您的公司和应用标识符，例如“com.company.appname:/oauth2callback”
*   您可能想使用 @"com.apple.mobilesafari" 作为 sourceApplication 参数

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-08T10:28:06.253

所以，这取决于你想做什么。

**登录**：这将始终调用另一个应用程序。如果安装了 Google+ 应用程序，它将调用它，否则它将回退到 Chrome 和 Safari。

**分享/互动帖子**：现在这总是使用 Chrome 或移动 Safari。

**检索朋友，编写应用程序活动，检索个人资料信息**：所有这些都是使用登录后检索到的访问令牌完成的，因此不需要离开应用程序。

虽然不受支持，但可以跳过 SDK 并弹出 UIWebView，动态构建 OAuth 链接并将用户发送到该链接（查看随 SDK 提供的开源库中的 GTMOAuth2ViewControllerTouch）。下面是一个非常粗略的示例，您可以将其重新插入 GPPSignIn 实例。

但是，您将保证用户必须输入他们的用户名和密码（可能还有第二个因素）。使用 Google+ 应用程序几乎可以保证您已经登录，并且使用 Chrome/Safari 路由，用户可能已经登录（特别是如果他们正在使用其他应用程序通过 Google+ 登录）。

这也没有解决共享问题，所以我强烈建议尽可能使用现有的 SDK。以您希望它的工作方式提交功能请求也是一件好事：[https ://code.google.com/p/google-plus-platform/issues/list](https://code.google.com/p/google-plus-platform/issues/list)

```
@interface ViewController() {
  GTMOAuth2ViewControllerTouch *controller;
}
@end;

@implementation ViewController

- (void)viewDidLoad {
  [super viewDidLoad];
  GPPSignIn *signIn = [GPPSignIn sharedInstance];
  signIn.clientID = @""; // YOUR CLIENT ID HERE.
  signIn.delegate = self;
}

- (IBAction)didTapSignIn:(id)sender {
  void (^handler)(id, id, id) =
      ^(GTMOAuth2ViewControllerTouch *viewController,
        GTMOAuth2Authentication *auth,
        NSError *error) {
        [self dismissViewControllerAnimated:YES completion:^{
            [controller release];
        }];
        if (error) {
          NSLog(@"%@", error);
          return;
        } else {
          BOOL signedIn = [[GPPSignIn sharedInstance] trySilentAuthentication];
          if(!signedIn) {
            NSLog(@"Sign In failed");
          }
        }
  };
  controller = [[GTMOAuth2ViewControllerTouch
      controllerWithScope:kGTLAuthScopePlusLogin
                 clientID:[GPPSignIn sharedInstance].clientID
             clientSecret:nil
         keychainItemName:[GPPSignIn sharedInstance].keychainName
        completionHandler:handler] retain];
  [self presentViewController:controller animated:YES completion:nil];
}

- (void)finishedWithAuth:(GTMOAuth2Authentication *)auth
                   error:(NSError *)error {
  if (!error) {
    UIAlertView * al = [[UIAlertView alloc] initWithTitle:@"Authorised"
                                                   message:@"Authorised!"
                                                  delegate:nil
                                         cancelButtonTitle:@"OK"
                                         otherButtonTitles:nil];
    [al show];
    [al release];
  }
} 
```

此代码唯一真正的技巧是它使用 [GPPSignIn sharedInstance].keychainName - 这意味着身份验证令牌与 GPPSignIn 按钮存储在相同的钥匙串条目中，这反过来意味着我们可以使用 [[GPPSignIn sharedInstance] trySilentAuthentication] 一旦被填充，并保持与主库相同的基于回调的流程。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-02-28T21:39:43.143

如果未安装 Google Plus 应用程序，@PeterLapisu 方法效果很好。然后从 app 传出的 url 前缀如下：

*   @"googlechrome-x-回调："
*   @" [https://accounts.google.com/o/oauth2/auth](https://accounts.google.com/o/oauth2/auth) "

但是，如果安装了 Google 应用程序，则会多出一个 url，前缀列表如下所示：

*   @“com.google.gppconsent.2.4.1：”
*   @"googlechrome-x-回调："
*   @" [https://accounts.google.com/o/oauth2/auth](https://accounts.google.com/o/oauth2/auth) "

因此，如果安装了 Google App，它将与包含 webview 的应用程序 UIViewController 同时启动。然后，如果用户成功使用 Google App 登录，他将被引导回我们的应用程序，并且 ViewController 将可见。

为了防止这个谷歌应用程序应该被允许登录用户并将他引导回我们的应用程序。根据此讨论：[https](https://code.google.com/p/google-plus-platform/issues/detail?id=900) ://code.google.com/p/google-plus-platform/issues/detail?id= 900 Apple 允许。

所以在我的实现中，我首先检查是否安装了谷歌应用程序：

```
- (BOOL)openURL:(NSURL*)url {

NSURL *googlePlusURL = [[NSURL alloc] initWithString:@"gplus://plus.google.com/"];

BOOL hasGPPlusAppInstalled = [[UIApplication sharedApplication] canOpenURL:googlePlusURL];

if(!hasGPPlusAppInstalled)
{
    if ([[url absoluteString] hasPrefix:@"googlechrome-x-callback:"]) {

        return NO;

    } else if ([[url absoluteString] hasPrefix:@"https://accounts.google.com/o/oauth2/auth"]) {

        [[NSNotificationCenter defaultCenter] postNotificationName:ApplicationOpenGoogleAuthNotification object:url];
        return NO;

    }
}

return [super openURL:url];
} 
```

编辑：

现在我可以确认我的应用程序最终通过此解决方案获得批准。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-05-08T14:50:08.600

我希望它会帮助某人。它合并了 Google+ 和 Gmail 示例，完全避免使用 Google 登录按钮，即您无需离开应用程序。

将 Google+ 和 Gmail API 添加到您的 Google 项目中，在您的应用程序中登录到 google，就像使用 OAuth2 中的 GTMOAuth2ViewControllerTouch.xib 登录到 gmail 一样，并将范围设置为 Google+：

```
-(IBAction)dologin{
    NSString *scope = kGTLAuthScopePlusLogin;//Google+ scope
    GTMOAuth2Authentication * auth = [GTMOAuth2ViewControllerTouch 
    authForGoogleFromKeychainForName:kKeychainItemName
    clientID:kClientID
    clientSecret:kClientSecret];
    if ([auth refreshToken] == nil) {
    GTMOAuth2ViewControllerTouch *authController;
    authController = [[GTMOAuth2ViewControllerTouch alloc] 
    initWithScope:scope 
    clientID:kClientID 
    clientSecret:kClientSecret  
    keychainItemName:kKeychainItemName
    delegate:self
    finishedSelector:@selector(viewController:finishedWithAuth:error:)];
    [[self navigationController] pushViewController:authController animated:YES];
    }else{
    [auth beginTokenFetchWithDelegate:self didFinishSelector:@selector(auth:finishedRefreshWithFetcher:error:)];
    }
} 
```

如果登录成功，则保留身份验证对象，然后在使用 google plus 服务时使用该身份验证对象：

```
GTLServicePlus* plusService = [[[GTLServicePlus alloc] init] autorelease];
[plusService setAuthorizer:self.auth];//!!!here use our authentication object!!! 
```

不需要 GPPSignIn。

完整的文章在这里：[这是另一个解决方案](https://stackoverflow.com/questions/24243379/google-plus-sign-in-ios-using-uiwebview/30088771#30088771)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-29T06:17:01.763

使用（新的）[Google 登录 iOS SDK](https://developers.google.com/identity/sign-in/ios)。

当没有 Google 应用程序存在以完成登录过程时，SDK 原生支持通过 WebView 登录。为此，它还支持向多个 Google 应用程序的潜在发送。

# xml - 使用 VB.Net 创建 .XSL 文件的最佳方法？

> ID：15281391
> 
> 赞同：0
> 
> 时间：2013-03-07T20:46:40.447
> 
> 标签：xml, vb.net, xslt

每个月我们都会收到一个包含两列数据的 .csv。第一列是代码，然后另一列是描述。例如：M23 | 缺少发票。

我需要使用这些数据来创建一个看起来像这样的新 .XSL 文件。

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:template name="AdjustmentRemarkCodeReplacements">
        <xsl:param name="CodeValue"/><xsl:choose><xsl:when test="$CodeValue = 'A0'">Patient refund amount.</xsl:when><xsl:when test="$CodeValue = 'A1'">Claim denied charges.</xsl:when><xsl:when test="$CodeValue = '999'">TESTING ONE TWO THREE now.</xsl:when><xsl:otherwise/></xsl:choose></xsl:template>
    <xsl:template name="RemarkCodeReplacements">
        <xsl:param name="CodeValue"/><xsl:choose><xsl:when test="$CodeValue = 'M1'">X-ray not taken within the past 12 months or near enough to the start of treatment.</xsl:when><xsl:when test="$CodeValue = 'M2'">Not paid separately when the patient is an inpatient.</xsl:when><xsl:otherwise/></xsl:choose></xsl:template>
</xsl:stylesheet> 
```

做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T15:10:05.490

XSL 通常用于将 XML 文件解析或转换为其他内容（XML 或其他格式）。

您真的要从 CSV 文件创建 XSL 文件吗？例如，如果您将使用您创建的 XSL 的输出来转换其他未提及的 XML 文件。

如果是这样，那么您将不会使用任何 XML 编码将 csv 转换为 XSL。您将使用 StreamWriter 或类似的东西为 csv 中的每一行编写 xsl:template，并将 CodeValue 和描述替换为 csv 文件中的值。

对不起，这应该是一个评论，但我没有足够的代表......更多的是 StackOverflow 的读者而不是提问者/回答者。

**如果这对您来说仍然是一个问题**，请在这篇文章中添加评论或在您的原始评论中添加解释，我会看看我还能做些什么。否则，**如果这篇文章对您有所帮助**，我们将不胜感激。

# javascript - 带有 jQ uery 和 AJAX 的单选按钮

> ID：15281393
> 
> 赞同：3
> 
> 时间：2013-03-07T20:46:43.773
> 
> 标签：javascript, jquery, ajax, forms

发送表单时出现以下错误，确切地说是单选按钮输入。

这是 HTML 代码：

```
 <input name="radio" type="radio" class="raido-btn" id="coral1" value="coral1" />
      <label for="coral1">CORAL I</label>
      <input name="radio" type="radio" class="raido-btn" id="coral2" value="coral2" />
      <label for="coral2">CORAL II</label>
      <input name="radio" type="radio" class="raido-btn" id="coral3" value="coral3" />
      <label for="coral3">CORAL III</label> 
```

这是Javascript代码：

```
if($('#coral1').prop('checked')){
        apartamentos = 'Coral 1';
    }
    else if($('#coral2').prop('checked')){
        apartamentos = 'Coral 2';
    }
    else if($('#coral3').prop('checked')){
        apartamentos = 'Coral 3';
    } 
```

我不知道如何将变量“apartamentos”设置为选中的单选按钮。

它总是设置变量 apartamentos = 'Coral'

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T20:50:20.320

JQuery 有几种方法可以做到这一点。我通常这样做的一种方法是使用[`.is()`](http://api.jquery.com/is/)，例如，`$('#coral2').is(':checked')`。你也可以使用`apartamentos = $('.raido-btn:checked').val()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T21:11:19.913

您将 if 语句附加到什么？我将它附加到 jsFiddle 中的 clickevent 上，它似乎工作正常。我不确定您是否要`apartamentos`设置为单选按钮的值或您定义的字符串，但它肯定会被更新。

[http://jsfiddle.net/FTT5e](http://jsfiddle.net/FTT5e)

# postgresql-9.2 - 在 postgresql 中使用 NULL 更新 bytea 数据

> ID：15281394
> 
> 赞同：1
> 
> 时间：2013-03-07T20:46:44.067
> 
> 标签：postgresql-9.2

我有一个 bytea 字段，其中包含我想用 NULL 替换的数据。我尝试了以下语法：

```
update ir_act_report_xml set report_rml_content_data = E'\\000'::bytea, report_sxw_content_data = E'\\000'::bytea where id = 365; 
```

但它随后返回 00 而不是 NULL。

将 bytea 字段更新为 NULL 的正确语法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-10T14:18:58.203

只需使用关键字`NULL`：

```
UPDATE ir_act_report_xml SET
   report_rml_content_data = NULL,
   report_sxw_content_data = NULL
 WHERE id = 365; 
```

# php - Magento soap api 可以在货件创建后添加跟踪订单吗？

> ID：15281395
> 
> 赞同：1
> 
> 时间：2013-03-07T20:46:45.237
> 
> 标签：php, magento, soap

我有下面的代码，并且订单已经创建了一个货件，但我正在尝试添加跟踪号。如果货件已创建且订单已标记完成，是否可以通过此方法添加运单号？

```
$newShipmentId = $client->call($sess_id, 'sales_order_shipment.create', array($ShippedOrderId, array(), 'Shipment Created', true, true));
            $newTrackId = $client->call($sess_id, 'sales_order_shipment.addTrack', array($newShipmentId, $shippedby, $shipname, $fields[4]));} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T00:33:06.527

通过此方法创建货件后，您似乎无法添加跟踪号。[在Magento SOAP API sales_order_shipment create and addTrack questions](https://stackoverflow.com/questions/14994809/magento-soap-api-sales-order-shipment-create-and-addtrack-questions)查看我的回答

# regex - 从重复组生成反向引用

> ID：15281400
> 
> 赞同：3
> 
> 时间：2013-03-07T20:46:59.137
> 
> 标签：regex

```
(?:\/(\w+?=\/)\/(\w+))* 
```

有没有办法从组内检索反向引用？在我上面的表达式中，无引用 (?:) 是否会阻止整个组捕获反向引用？

尝试匹配例如：/hello/how/are/you.../today 并捕获 '/' 之间的所有值

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T08:26:36.017

> 有没有办法从组内检索反向引用？

是的。组不按层次结构解释。例如`(a(b))`，只有两个组，一个和两个，可以（反向）引用。就引用而言，它等于`(a)(b)`。引用的顺序仅由正则表达式模式中组的顺序（由组的开头确定）确定。一个群体是另一个群体的一部分这一事实并不能改变这一事实。

> 在我上面的表达式中，无引用 (?:) 是否会阻止整个组捕获反向引用？

不会。它只会阻止标记为非捕获组的组捕获（反向）引用。嵌套组不受影响并且将被捕获，除非它们也被标记为非捕获组。

# javascript - javascript中选择选项的验证

> ID：15281403
> 
> 赞同：0
> 
> 时间：2013-03-07T20:47:16.103
> 
> 标签：javascript

我正在通过 Struts HTML 标记为特定的 jsp 使用选择选项。选项的值为 Yes 和 No。这是代码。

```
 <select name="select" id='choice'>
     <option value="<%YES%>" selected><%="YES"%></option>
     <option value="<%=NO%>"></option> 
```

默认情况下，在选择选项列表中看到的值为 YES。我正在执行验证，如果没有选择任何值（如在“是”上给出的 Selected 属性）并且提交了表单，则应引发警报以选择新值。下面是我的代码。

```
 if( document.form.select.value == "YES" )
 {
   alert( "Please select other value" );
   return false;
 }
 if( document.form.select.value == "NO" )
 {
   alert( "Please select other value" );
   return false;
 } 
```

上面的代码没有正确验证。谁能建议我一些改变。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T21:45:03.340

这是检查所选值是否为默认值的方法，即使我不太了解您的意图。

```
el = document.getElementById('choice');

if( el.options[el.selectedIndex].defaultSelected){
    alert("Please select other value");
    return false;
} 
```

PS：您可能需要修复您的代码：

```
<select name="select" id='choice'>
     <option value="<%=YES%>" selected><%="YES"%></option>
     <option value="<%=NO%>"></option>
</select> 
```

# google-app-engine - 在谷歌应用引擎中获取私钥

> ID：15281404
> 
> 赞同：0
> 
> 时间：2013-03-07T20:47:18.397
> 
> 标签：google-app-engine, signing, saml-2.0

我们部署在谷歌应用引擎上，我们需要签署我们向外部身份提供者（基于 saml）提出的请求。我阅读了 appidentity 文档并能够检索公钥。我知道每个应用程序都部署在谷歌应用引擎有自己的私钥。我需要将该私钥引用为 java.security.PrivateKey；以便我可以签署我的请求。另一个原因是我使用 openSAML 创建 SAML 请求并签署我的请求，我需要在凭据对象中设置 privateKey。

有谁能帮我解决我的问题吗？这在谷歌应用引擎中是否可行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T00:18:11.217

没有办法下载私钥。但是，在[AppIdentityService](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/appidentity/AppIdentityService.html#signForApp%28byte%5B%5D%29)中提供了[signForApp](https://developers.google.com/appengine/docs/java/appidentity/)方法。此方法允许您对任意字节数组进行签名。

# ruby-on-rails - Rspec：“其”和“指定”有什么区别？

> ID：15281408
> 
> 赞同：1
> 
> 时间：2013-03-07T20:47:33.240
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec

假设我有这个代码：

```
require 'spec_helper'

  describe "authorization" do

    describe "for non-signed-in users" do
      let(:user) { FactoryGirl.create(:user) }

      describe "in the Users controller" do

      describe "submitting to the update action" do
        before { put user_path(user) }
        specify { response.should redirect_to(signin_path) }
      end
    end
  end
end 
```

代替：

> 指定 { response.should redirect_to(signin_path) }

为什么我不能使用：

> 它的 { response.should redirect_to(signin_path) }

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T21:12:10.753

AS [Zippie](https://stackoverflow.com/users/1279707/zippie)，[Juliano](https://stackoverflow.com/users/973740/juliano)，[apneadiving](https://stackoverflow.com/users/350087/apneadiving)曾表示：

**指定****它**的别名

 ****上下文**它是一个别名来**描述**

您可以使用表单 its(:method) {expectation } 来调用主题上的方法：

```
let(:bar) { Bar.new }
subject { bar }

its(:foo) { should == 0 } 
```

测试这个

```
class Bar
  def foo
    0
  end
end 
```**

# xml - xmlvalue 与 XMLAttributeValue

> ID：15281411
> 
> 赞同：3
> 
> 时间：2013-03-07T20:47:41.930
> 
> 标签：xml, r

我使用以下代码解析了一个 XML 文件，得到的结果如下：

```
url = htmlTreeParse("http://www.appannie.com/app/ios/candy-crush-saga/", useInternalNodes = T)
ItemList =getNodeSet(url, "//li/a/@title")

>ItemList
[[1]]
           title 
"Angry Birds Star Wars HD" 
attr(,"class")
[1] "XMLAttributeValue"

[[2]]
           title 
"iShuffle Bowling 2" 
attr(,"class")
[1] "XMLAttributeValue"

 ....
[[15]]
           title 
"Angry Birds Star Wars Free" 
attr(,"class")
[1] "XMLAttributeValue"

attr(,"class")
[1] "XMLNodeSet" 
```

我的问题是我想通过解析来获取游戏的名称。所以我尝试了这段代码（根据我处理 xmlValue 的经验） -

```
IL <- lapply(ItemList, function(x) c(xmlValue(x), xmlAttrs(x)[["href"]])) 
```

但它最终给出了这个错误：

```
Error in UseMethod("xmlValue") : no applicable method for 'xmlValue' applied to an object of class "XMLAttributeValue" 
```

我进行了广泛的谷歌搜索，但找不到处理 XMLAttributeValue 的解决方案。有人可以给我一个提示，让我知道 xmlValue 和 xmlAttributeValue 之间的区别吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T09:09:19.923

感谢更新的问题和添加的示例 URL！

我认为`@title`您已经进入了属性，这就是为什么您无法解析`xmlValue`. 例如：

```
> htmlTreeParse("http://www.appannie.com/app/ios/candy-crush-saga/", useInternalNodes = TRUE)
> xpathSApply(url, "//li/a", function(x) c(xmlValue(x), xmlAttrs(x)[["href"]])) 
```

* * *

**更新**：过滤你的结果，你可能只尝试`xpathSApply`“客户也买了”div：

```
> xpathSApply(url, "//div[@class='app_content_section']/ul/li/a", function(x) c(xmlValue(x), xmlAttrs(x)[["href"]])) 
```

# rest - ASP.NET MVC Web API 4 REST Webservice：PUT/POST - 对象列表

> ID：15281413
> 
> 赞同：0
> 
> 时间：2013-03-07T20:47:44.567
> 
> 标签：rest, asp.net-web-api

想知道它是否可能和/或支持将整个对象放置/发布到 REST Web 服务，而不是仅仅一些名称/值对？

如果是这样，也可以放置/发布对象列表吗？

我认为这可能是可能的，因为 GET 请求能够返回对象列表，我想对更新的对象进行“反向”操作（而不是一次发送一个，或者更糟的是，单独发送通过名称/值对片段）？

我知道这是一个非常基本的问题，但到目前为止我采取的方法是尝试对 PUT 进行编码并使其工作（如果 PUT 函数没有参数，则该工作有效，例如：

```
public class AObjectController : ApiController
{
    public List<int[]> Put()
    {
        List<int[]> ret = new List<int[]>();

        ret.Add(new int[] {-1, 1111});
        ret.Add(new int[] {-2, 2222});

        return ret;
    } 
```

如果我指定单个对象或对象列表，则会出现异常：

```
 public List<int[]> Put(AObject object)         **CASE 1**
    public List<int[]> Put(List<AObject> objects)  **CASE 2**
    {
        List<int[]> ret = new List<int[]>();

        ret.Add(new int[] { -1, 1111 });
        ret.Add(new int[] { -2, 2222 });

        return ret;
    } 
```

* * *

**案例 1：**公共列表（int[]）Put（AObject 对象）

* * *

![在此处输入图像描述](../Images/8f2725cf9720445c99d40a8ee754b597.png)

* * *

**案例 2：**公共列表（int[]）放（列表（AObject）对象）

* * *

![在此处输入图像描述](../Images/332829e99589b7c7a43518663d66b838.png)

* * *

下面是进行调用的客户端的代码：

```
 public int writeAll(List<T> data)
    {
        _sendBuffer = 
            JsonConvert.SerializeObject(
                tabletData,
                new JsonSerializerSettings { TypeNameHandling = TypeNameHandling.All }
            );

        byte[] b = StringHelper.GetBytes(_sendBuffer);

        string url = ContructUrlRequest(null, null);

        WebRequest request = WebRequest.Create(url);

        request.Method = "PUT";
        request.ContentType = "application/json";
        request.ContentLength = b.Length;
        request.Credentials = CredentialCache.DefaultCredentials;
        ((HttpWebRequest)request).UserAgent = "...";
        //((HttpWebRequest)request).AutomaticDecompression = DecompressionMethods.GZip | DecompressionMethods.Deflate;

        using (Stream requestStream = request.GetRequestStream())
        {
            requestStream.Write(b, 0, b.Length);
            requestStream.Flush();
            requestStream.Close();
        }

        WebResponse response = request.GetResponse();

        if (response == null)
        {

            return -1;
        }

        StreamReader sr = new StreamReader(response.GetResponseStream()); ;

        _recieveBuffer = sr.ReadToEnd();

        List<int[]> _resultData = JsonConvert.DeserializeObject<List<int[]>>(
            _recieveBuffer,
            new JsonSerializerSettings { TypeNameHandling = TypeNameHandling.All }
        );

        return data.Count;
    } 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T17:39:09.683

在我的客户端使用来自服务器的序列化编写代码并且它有效

```
 public int writeAll(List<AObject> aObjects)
    {
        string url = ContructUrlRequest(null, null);

        WebRequest request = WebRequest.Create(url);
        request.Method = WebRequestMethods.Http.Put;
        request.ContentType = "application/json; charset=utf-8";            
        request.Credentials = CredentialCache.DefaultCredentials;
        ((HttpWebRequest)request).UserAgent = "going insane";

        JsonSerializerSettings serializerSettings = new JsonSerializerSettings();
        serializerSettings.TypeNameHandling = TypeNameHandling.Objects | TypeNameHandling.Arrays;
        serializerSettings.Converters.Add(new IsoDateTimeConverter());

        JsonSerializer serializer = JsonSerializer.Create(serializerSettings);

        using (Stream requestStream = request.GetRequestStream())
        {
            using (StreamWriter streamWriter = new StreamWriter(requestStream, new UTF8Encoding(false, true)))
            {
                using (JsonTextWriter jsonTextWriter = new JsonTextWriter(streamWriter))
                {
                    serializer.Serialize(jsonTextWriter, aObjects);
                }
            }
        }

        WebResponse response = request.GetResponse();

        if (response == null)
        {
            Log.Info(FIDB.TAG_WSBUFFER, "WSBuffer.writeAll: response = NULL");

            return -1;
        }

        StreamReader sr = new StreamReader(response.GetResponseStream());

        _recieveBuffer = sr.ReadToEnd();

        _resultData = JsonConvert.DeserializeObject<List<int[]>>(
            _recieveBuffer,
            new JsonSerializerSettings { TypeNameHandling = TypeNameHandling.All }
        );

        return tabletData.Count;
    } 
```

# objective-c - 如何使用 ocmock 在 nsnotificationcenter 上测试 addObserver 和 removeObserver 调用

> ID：15281417
> 
> 赞同：3
> 
> 时间：2013-03-07T20:48:03.110
> 
> 标签：objective-c, unit-testing, ocmock

在我的基础模拟类中：

```
- (void)tearDown
{
    _mockApplication = nil;
    self.observerMock = nil;
    self.notificationCenterMock = nil;
} 
```

其中 notificaitonCenterMock 只是一个 id；

然后在我的测试中我做这样的事情：

```
self.notificationCenterMock = [OCMockObject partialMockForObject:[NSNotificationCenter defaultCenter]];
[(NSNotificationCenter *) [self.notificationCenterMock expect]
        removeObserver:self.component
                  name:UIApplicationDidBecomeActiveNotification
                object:nil]; 
```

现在.. 如果我运行此代码，我的单元测试将虚假地失败（即一次运行 370 个中只有 60 个将运行，下一次运行 70 或 65 个）。我的几个单元测试将失败并出现以下错误：

```
OCPartialMockObject[NSNotificationCenter]: expected method was not invoked: removeObserver:    
<VPBCAdComponent-0x17d43e0-384381847.515513: 0x17d43e0> name:@"UIApplicationDidBecomeActiveNotification" object:nil
Unknown.m:0: error: -[VPBCAdComponentTests testCleanUpAfterDisplayingClickthrough_adBrowser_delegateCallback] :       
OCPartialMockObject[NSNotificationCenter]: expected method was not invoked: removeObserver:
<VPBCAdComponent-0x17d43e0-384381847.515513: 0x17d43e0> name:@"UIApplicationDidBecomeActiveNotification" object:nil 
```

然后将终止测试。我可以清楚地看到，部分模拟通知中心会导致运行测试套件出现问题。

问题是，我该怎么办？确保设置诸如观察者之类的重要事物以及回归证明会非常好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T17:44:44.140

如果在这种情况下你可以避免部分模拟，那就去做吧。如果您只想测试添加和删除观察者，您应该能够使用标准模拟或漂亮模拟。

如果你可以隔离几个测试来验证观察者的添加和删除，那么它不应该有这样的连锁反应吗？

```
id mockCenter = [OCMockObject mockForClass:[NSNotificationCenter class]];
[[mockCenter expect] addObserver:observer options:UIApplicationDidBecomeActiveNotification context:nil];

// method on the Subject Under Test

[mockCenter verify]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-06T11:19:07.050

在这种情况下，我个人使用本地模拟。较小的模拟范围可确保减少对应用程序其他部分的干扰。在 NSUserDefaults 或其他共享对象的情况下更重要。我使用的测试模式是一样的。

```
- (void)testRegisterNofificaitonTest {
    id ncMock = OCMClassMock([NSNotificationCenter class]);
    OCMStub([ncMock defaultCenter]).andReturn(ncMock);

    UIViewController *sut = [UIViewController new];
    [[ncMock expect] addObserver:sut selector:@selector(doSomething:) name:@"NotificationName" object:nil];

    [sut viewDidLoad]; //assuming viewDidLoad calls [[NSNotificationCenter defaultCenter] addObserver: ...

    [ncMock verify];
    [ncMock stopMocking];
} 
```

# header - 是否可以有一个粘性标题，滚动到响应式布局中的所有锚点？

> ID：15281420
> 
> 赞同：0
> 
> 时间：2013-03-07T20:48:21.540
> 
> 标签：header, responsive-design, anchor, sticky, smooth-scrolling

我有一个响应式布局，并且我使用sticky.js 作为我的标题。这似乎工作减去一些我可以忍受的小故障。但是我的锚总是关闭（我正在使用平滑滚动）。当响应式布局不断改变宽度和高度时，我不确定如何在滚动到锚点时补偿粘性标题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T20:42:20.033

不幸的是，你不能用不会扭曲你的设计的直接 CSS 做很多事情。为了在之前的项目中解决这个问题，我使用 jQuery 来处理这些类型的滚动/锚点问题。

**你现在拥有的：** `<a>`在页面上寻找`id`'s 的标签。问题是：当网站响应时，这些锚标记与您的 DOM 布局并没有很好地对齐。

**我的解决方案：** 为您提供高级概念 - 我使用 jQuery 即时修改 ID 位置。假设您在网站全尺寸时单击链接，一切都很好。这里不需要 jQuery。现在说，当您在站点缩放到大约 768 像素宽度范围（iPad 纵向）时单击同一个链接时：然后我的锚看起来好像它们偏离了大约 100 像素（例如）。我写了一点 jQuery 来处理这个问题：**“如果宽度是*_* _，则将锚点偏移`ID`___px。”**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-19T16:09:25.593

我建议使用 JS 来解释滚动时间的差异，而不是试图人为地改变锚标签的高度属性。这是一个可能对您有用的函数，使用纯 JS：

```
adjustScroll = function () {
  // Sticky nav selector (you'll have to provide your own selector)
  const nav = document.querySelector('header>nav');

  if (location.href.indexOf("#") >= 0) {
    // Find the name of the anchor
    let n = location.href.substr(location.href.indexOf("#")+1);

    // Find the anchor by name, if it exists
    let a = document.querySelector('a[name="'+n+'"]');
    if (!a) {
      return;
    }

    // Set y value as y-value of the anchor, offset by the header height
    let y = a.offsetTop;
    y -= nav.height + 10;

    // Scroll to the y position
    window.scrollTo(0, y);
  }
}

// Call it wherever you need to call it
adjustScroll(); 
```

在哪里调用它的示例可能是在[DOMContentLoaded](https://developer.mozilla.org/en-US/docs/Web/Events/DOMContentLoaded)事件上，或者在锚标记的[onclick事件上。](https://developer.mozilla.org/en-US/docs/Web/API/GlobalEventHandlers/onclick)

# javascript - 带有数据变量的 json 请求 - 如何读取函数中的变量？

> ID：15281421
> 
> 赞同：2
> 
> 时间：2013-03-07T20:48:34.077
> 
> 标签：javascript, jquery, json, function, variables

从名为 bundleOfData 的数组中加载一堆 json 文件。.url 是每个 json 文件的 url。

如何在*processData*函数中读取我的变量“myI”？

```
for(var i = 0; i < bunchOfData.length; i++){
        $.getJSON(bunchOfData[i].url, {"myI":i}, function(ds){}).success(processData);

        function processData(ds){
            console.log(ds.myI); //undefined
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T20:58:31.207

```
function successHandler(i){
    console.log('i is instantiated/stored in the closure scope:',i);
    return function(data, textStatus, jqXHR){ 
        // here, the server response and a reference to 'i'
        console.log('i from the closure scope:',i, 'other values',data,textStatus,jqXHR);
    }            
}

var i = 0; i < bunchOfData.length; i++){
    $.getJSON(bunchOfData[i].url, {"myI":i}, function(ds){}).success(successHandler(i));

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T20:52:22.913

您不能访问范围之外的变量，响应将仅有效

```
function(ds){
    // Here
} 
```

尝试这个：

```
for(var i = 0; i < bunchOfData.length; i++){
    $.getJSON(bunchOfData[i].url, {"myI":i}, function(ds){
        console.log(ds);
    });
} 
```

同样，一旦请求完成并且内容`success`将运行成功，请注意，您尝试实现的目标可能不是单个请求（您可以统一文件并在一个请求中提供它们），因此您可以获得数据和然后迭代。

# web-services - Web 服务上的 mule 版本控制

> ID：15281424
> 
> 赞同：0
> 
> 时间：2013-03-07T20:48:39.217
> 
> 标签：web-services, mule, esb, flow, mule-studio

我在同一个 mule 服务器上部署了具有 2 个不同版本的相同 mule webservice 应用程序。我们称之为 MuleApp.1.0 和 MuleApp.1.1。流程与 mulesoft 网站上的 webservice 流程示例一样简单。他们的 wsdl 网址不同：

```
http://www.myhost.com:25101/MuleApp.1.0/Service?wsdl
http://www.myhost.com:25101/MuleApp.1.1/Service?wsdl 
```

当另一个未部署在 mule 服务器上时，它们都按预期工作。当我将它们都部署在同一个 mule 服务器上时，就会出现问题，就像我以前在 WebLogic 中所做的那样。现在我可以访问 MuleApp.1.1，但是当我尝试访问 MuleApp.1.0 时，出现如下错误

```
07-Mar-2013:14:52:57.142        VWILVM3667      [MuleApp.1.1].connector.http.mule.default.receiver.03
WARN    org.mule.transport.http.HttpMessageReceiver     NA
No receiver found with secondary lookup on connector: connector.http.mule.default with URI key: http://www.myhost.com:25101/MuleApp.1.0/Service 
```

这应该是一个非常常见的版本控制案例。我在配置中错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T21:50:44.393

在同一个 Mule 实例中不能有两个不同的应用程序共享同一个 HTTP 端口。

所以可能发生的情况是`MuleApp.1.0`没有正确部署（检查日志），这就是为什么没有端点监听的原因`/MuleApp.1.0`。

任何一个：

*   在两个应用程序中使用不同的端口，
*   将两个流程放在一个应用程序中。
*   创建一个前端应用程序，它侦听端口 25101 和`/MuleApp.1.0`路径`/MuleApp.1.1`，并将请求分派到`MuleApp.1.0`私有`MuleApp.1.1`端口（比如 25102 和 25103）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T02:54:17.860

我终于在 tomcat 上部署了我的应用程序，并将 http 入站端点替换为 servlet 入站端点。我使用 servlet 类 org.mule.transport.servlet.MuleReceiverServlet 配置 web.xml。现在我可以在同一个端口上部署多个应用程序。

# java - Java-main中文本文件的相对路径？

> ID：15281428
> 
> 赞同：11
> 
> 时间：2013-03-07T20:48:51.923
> 
> 标签：java, file-io, relative-path

我想知道如何为存储在我的 java 项目的 src 文件夹中的文本文件指定相对路径名。我想用这个文本文件的路径存储一个字符串。例如，如果我的 java 项目的 src 文件夹中有 example.txt，我将如何找到它的相对路径？我也在我的 main 中这样做，所以我在使用 .getResource() 时遇到了麻烦。我该怎么做？谢谢。

我的文件路径如下 eclipse /MyProject/src/data.txt 中的属性

我试过了：

字符串路径 = "/MyProject/src/data.txt";

但这不起作用？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-07T20:53:33.023

如果您使用的是 eclipse，请将您的文本文件放在项目文件夹的根目录中，在`/src`and`/bin`文件夹之外。现在应该可以通过相对路径直接访问它。

如果要访问 src 文件夹中的文件，则必须`/src/`在文件路径/名称之前附加前缀

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-05-08T10:25:25.567

`src/`在文件路径/名称之前使用前缀。

```
String path = "src/data.txt"; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-07T20:57:53.390

该路径是相对于您执行“java”命令的目录。例如

```
 /opt/projects/myproject>$ java -cp <whatever your classpath is that contains your class files> com.mycompany.mypackage.MyJavaClass 
```

在这种情况下，MyJavaClass 会找到相对于目录
/opt/projects/myproject的文件

如果您愿意，还有另一种方法可以做到这一点：您可以使用通过类路径机制找到的加载资源。

```
 getClass().getResource("foo.txt"); 
```

您可以查看此帖子以获取更多信息

[在 Java 中加载资源的首选方式](https://stackoverflow.com/questions/3861989/preferred-way-of-loading-resources-in-java)

# c# - 如何优化此功能？c#扫描文本文件中的字符串

> ID：15281430
> 
> 赞同：1
> 
> 时间：2013-03-07T20:49:12.030
> 
> 标签：c#, .net, performance

我正在编写一个程序来扫描文本文件中的字符串块（行），并在找到时将块输出到文件在我的进程类中，函数 proc() 处理一个 6MB 文件的时间异常长。在我之前编写的程序中，我只扫描文本以查找一种特定类型的字符串，处理同一个文件需要 5 秒。现在我重写了它来扫描不同字符串的存在。它需要超过 8 分钟，这是一个显着的差异。有人对如何优化此功能有任何想法吗？

这是我的正则表达式

```
System.Text.RegularExpressions.Regex RegExp { get { return new System.Text.RegularExpressions.Regex(@"(?s)(?-m)MSH.+?(?=[\r\n]([^A-Z0-9]|.{1,2}[^A-Z0-9])|$)", System.Text.RegularExpressions.RegexOptions.Compiled); } } 
```

.

```
 public static class TypeFactory
{
    public static List<IMessageType> GetTypeList()
    {
        List<IMessageType> types = new List<IMessageType>();
        types.AddRange(from assembly in AppDomain.CurrentDomain.GetAssemblies()
                       from t in assembly.GetTypes()
                       where t.IsClass && t.GetInterfaces().Contains(typeof(IMessageType))
                       select Activator.CreateInstance(t) as IMessageType);

        return types;
    }
}

public class process
{

    public void proc()
    {
        IOHandler.Read reader = new IOHandler.Read(new string[1] { @"C:\TEMP\DeIdentified\DId_RSLTXMIT.LOG" });

        List<IMessageType> types = MessageType.TypeFactory.GetTypeList();

        //TEST1
        IOHandler.Write.writeReport(System.DateTime.Now.ToString(), "TEST", "v3test.txt", true);

        foreach (string file in reader.FileList)
        {
            using (FileStream readStream = new FileStream(file, FileMode.Open, FileAccess.Read))
            {
                int charVal = 0;
                Int64 position = 0;
                StringBuilder fileFragment = new StringBuilder();
                string message = string.Empty;

                string current = string.Empty;
                string previous = string.Empty;

                int currentLength = 0;
                int previousLength = 0;

                bool found = false;

                do
                {
                    //string line = reader.ReturnLine(readStream, out charVal, ref position);
                    string line = reader.ReturnLine(readStream, out charVal);

                    for (int i = 0; i < types.Count; i++)
                    {
                        if (Regex.IsMatch(line, types[i].BeginIndicator)) //found first line of a message type
                        {
                            found = true;
                            message += line;

                            do
                            {
                                previousLength = types[i].RegExp.Match(message).Length;

                                //keep adding lines until match length stops growing
                                //message += reader.ReturnLine(readStream, out charVal, ref position);
                                message += reader.ReturnLine(readStream, out charVal);
                                currentLength = types[i].RegExp.Match(message).Length;

                                if (currentLength == previousLength)
                                {
                                    //stop - message complete
                                    IOHandler.Write.writeReport(message, "TEST", "v3test.txt", true);

                                    //reset
                                    message = string.Empty;
                                    currentLength = 0;
                                    previousLength = 0;
                                    break;
                                }

                            } while (charVal != -1);

                            break;
                        }
                    }

                } while (charVal != -1);

                //END OF FILE CONDITION
                if (charVal == -1)
                {

                }

            }

        }
        IOHandler.Write.writeReport(System.DateTime.Now.ToString(), "TEST", "v3test.txt", true);
    }
} 
```

.

编辑：我在 VS2012 中运行分析向导，我发现大部分时间都花在 RegEx.Match 函数上

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T20:52:29.203

以下是一些想法：

*   正则表达式匹配不是进行子字符串搜索的最有效方式，并且您对每个匹配的“类型”执行一次匹配检查。如果您需要匹配文字子字符串而不是模式，请查看有效的子字符串匹配算法，例如[Boyer-Moore 。](http://en.wikipedia.org/wiki/Boyer%E2%80%93Moore_string_search_algorithm)
*   如果您必须使用 RegEx，请考虑[使用已编译的表达式](http://blogs.msdn.com/b/bclteam/archive/2010/06/25/optimizing-regular-expression-performance-part-i-working-with-the-regex-class-and-regex-objects.aspx)。
*   使用 BufferedStream 来提高 IO 性能。对于一个 6MB 的文件来说可能是微不足道的，但它只需要一行代码。
*   使用分析器来确定确切的时间花费在哪里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T20:56:44.003

高层次的想法：

1.  使用 Regex.Matches 一次查找所有匹配项，而不是一项一项。可能是主要性能受到打击

2.  预先构建搜索模式以一次包含多条消息。您可以使用正则表达式 OR。

# perl - 我的 LWP 脚本不工作

> ID：15281433
> 
> 赞同：-2
> 
> 时间：2013-03-07T20:49:17.593
> 
> 标签：perl, web-crawler, lwp

我在跑步

```
#!/usr/bin/perl -w
use strict;
use LWP::Simple; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T21:05:36.730

变量`$site`有`html`代码。

您还可以使用该功能`getstore`将`html`数据保存到文件中，例如：

```
my $http_code = getstore( 'http://www.google.com/', 'google.html' ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T22:56:11.060

如果您能看到失败的*原因*，这将对您有很大帮助。我建议您使用核心`LWP`而不是简单版本。像这样：

```
#!/usr/bin/perl

use strict;
use warnings;

use LWP;

my $ua = LWP::UserAgent->new;

my $response = $ua->get('http://www.google.com/');

die 'Couldn't get it: ', $response->status_line unless $response->is_success;

my $site = $response->decoded_content;
print 'Got it.'; 
```

# installation - SUGARCRM - 安装后只有主页（dashlets）和报告模块是空白的

> ID：15281434
> 
> 赞同：0
> 
> 时间：2013-03-07T20:49:29.673
> 
> 标签：installation, sugarcrm

我在 Ubuntu 12.04 上安装了 6.5.10 版本。

安装后，当我登录时，我的主页是空白的（没有破折号，只有模块的快捷方式），我可以去每个模块，除了报告模块，它打开了我完全空白的页面？

可能是什么问题以及如何解决？

谢谢

这是来自错误日志

```
[Thu Mar 07 16:20:00 2013] [error] [client 192.168.0.122] PHP Fatal error:  Allowed memory size of 136314880 bytes exhausted (tried to allocate 516171 bytes) in /var/www/crmpro/include/nusoap/nusoap.php on line 8488, referer: http://192.168.0.202/crmpro/index.php?module=Calendar&action=index
[Thu Mar 07 17:08:19 2013] [error] [client 192.168.0.122] PHP Fatal error:  Allowed memory size of 136314880 bytes exhausted (tried to allocate 516171 bytes) in /var/www/crmpro/include/nusoap/nusoap.php on line 8488, referer: http://192.168.0.202/crmpro/index.php?module=Calendar&action=index
[Thu Mar 07 21:40:29 2013] [error] [client 192.168.254.26] PHP Fatal error:  Allowed memory size of 136314880 bytes exhausted (tried to allocate 594552 bytes) in /var/www/crm/include/nusoap/nusoap.php on line 8488, referer: http://192.168.0.202/crm/index.php?action=Login&module=Users&login_module=Home&login_action=index
[Thu Mar 07 21:40:39 2013] [error] [client 192.168.254.26] PHP Fatal error:  Allowed memory size of 136314880 bytes exhausted (tried to allocate 600349 bytes) in /var/www/crm/include/nusoap/nusoap.php on line 8488, referer: http://192.168.0.202/crm/index.php?action=Login&module=Users&login_module=Home&login_action=index
[Thu Mar 07 21:41:02 2013] [error] [client 192.168.254.26] PHP Warning:  session_destroy(): Trying to destroy uninitialized session in /var/www/crm/modules/Users/authentication/SugarAuthenticate/SugarAuthenticate.php on line 350, referer: http://192.168.0.202/crm/index.php?module=Home&action=index
[Thu Mar 07 21:41:22 2013] [error] [client 192.168.254.26] PHP Fatal error:  Allowed memory size of 136314880 bytes exhausted (tried to allocate 574099 bytes) in /var/www/crm/include/nusoap/nusoap.php on line 8488, referer: http://192.168.0.202/crm/index.php?module=Users&action=Login&login_language=en_UK
[Thu Mar 07 21:41:46 2013] [error] [client 192.168.254.26] PHP Warning:  session_destroy(): Trying to destroy uninitialized session in /var/www/crm/modules/Users/authentication/SugarAuthenticate/SugarAuthenticate.php on line 350, referer: http://192.168.0.202/crm/index.php?module=Home&action=index
[Thu Mar 07 21:42:12 2013] [error] [client 192.168.254.26] PHP Fatal error:  Allowed memory size of 136314880 bytes exhausted (tried to allocate 578184 bytes) in /var/www/crm/include/nusoap/nusoap.php on line 8488, referer: http://192.168.0.202/crm/index.php?module=Users&action=Login&login_language=sr_RS
[Thu Mar 07 21:42:45 2013] [error] [client 192.168.254.26] PHP Warning:  session_destroy(): Trying to destroy uninitialized session in /var/www/crm/modules/Users/authentication/SugarAuthenticate/SugarAuthenticate.php on line 350, referer: http://192.168.0.202/crm/index.php?module=Home&action=index
[Thu Mar 07 21:44:45 2013] [error] [client 192.168.254.26] PHP Fatal error:  Allowed memory size of 136314880 bytes exhausted (tried to allocate 596391 bytes) in /var/www/crm/include/nusoap/nusoap.php on line 8488, referer: http://192.168.0.202/crm/index.php?module=Users&action=Login
[Fri Mar 08 00:01:48 2013] [notice] caught SIGTERM, shutting down
[Fri Mar 08 00:01:49 2013] [notice] Apache/2.2.22 (Ubuntu) PHP/5.3.10-1ubuntu3.5 with Suhosin-Patch configured -- resuming normal operations
[Fri Mar 08 00:04:04 2013] [notice] caught SIGTERM, shutting down
[Fri Mar 08 00:04:05 2013] [notice] Apache/2.2.22 (Ubuntu) PHP/5.3.10-1ubuntu3.5 with Suhosin-Patch configured -- resuming normal operations
[Fri Mar 08 00:04:37 2013] [notice] caught SIGTERM, shutting down
[Fri Mar 08 00:04:56 2013] [notice] Apache/2.2.22 (Ubuntu) PHP/5.3.10-1ubuntu3.5 with Suhosin-Patch configured -- resuming normal operations
[Fri Mar 08 00:05:13 2013] [error] [client 192.168.254.26] PHP Fatal error:  Allowed memory size of 136314880 bytes exhausted (tried to allocate 596370 bytes) in /var/www/crm/include/nusoap/nusoap.php on line 8488
[Fri Mar 08 00:05:39 2013] [error] [client 192.168.254.26] PHP Fatal error:  Allowed memory size of 136314880 bytes exhausted (tried to allocate 414782 bytes) in /var/www/crm/include/nusoap/nusoap.php on line 8488, referer: http://192.168.0.202/crm/
[Fri Mar 08 00:05:47 2013] [error] [client 192.168.254.26] PHP Fatal error:  Allowed memory size of 136314880 bytes exhausted (tried to allocate 412645 bytes) in /var/www/crm/include/nusoap/nusoap.php on line 8488, referer: http://192.168.0.202/crm/
[Fri Mar 08 00:05:47 2013] [error] [client 192.168.254.26] File does not exist: /var/www/favicon.ico
[Fri Mar 08 00:06:22 2013] [error] [client 192.168.254.26] PHP Fatal error:  Allowed memory size of 136314880 bytes exhausted (tried to allocate 604665 bytes) in /var/www/crm/include/nusoap/nusoap.php on line 8488
[Fri Mar 08 00:10:22 2013] [error] [client 192.168.254.26] PHP Fatal error:  Allowed memory size of 136314880 bytes exhausted (tried to allocate 695686 bytes) in /var/www/crmpro/include/nusoap/nusoap.php on line 8488, referer: http://192.168.0.202/crmpro/index.php?action=Login&module=Users&login_module=Home&login_action=index 
```

这是来自 /proc/meminfo 内存信息

```
root@crmdemo:/var/log/apache2# cat /proc/meminfo 
MemTotal:        1019080 kB
MemFree:          477272 kB
Buffers:            7752 kB
Cached:            91496 kB
SwapCached:        29236 kB
Active:           137384 kB
Inactive:         254092 kB
Active(anon):      97864 kB
Inactive(anon):   196360 kB
Active(file):      39520 kB
Inactive(file):    57732 kB
Unevictable:           0 kB
Mlocked:               0 kB 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T00:12:19.213

鉴于您发布的日志，看起来 PHP 内存限制是问题所在。

SugarCRM 非常需要内存，因此需要在大多数服务器上增加默认的 PHP 内存限制。通常需要 128 MB 或更高（我在我的安装中使用 256）。

您可以通过`php.ini`在 SugarCRM 安装的根目录中编辑文件，或`php.ini`在`/etc/php5/apache2/`.

# ruby - Sinatra：热代码推动生产？

> ID：15281436
> 
> 赞同：4
> 
> 时间：2013-03-07T20:49:33.810
> 
> 标签：ruby, nginx, sinatra, passenger, unicorn

当我将新代码从我的 Sinatra 应用程序推送到我的生产服务器时，我目前正在通过触摸触发乘客重启`tmp/restart.txt`，这会加载新的更改。问题是该站点在此过程中基本上关闭了大约 10 秒。

如何设置我的服务器，以便完全避免任何停机时间？

也就是说，我希望应用程序继续提供旧版本的代码，直到新代码完全加载，然后立即切换到新代码。

在这里使用shotgun 或sinatra/reloader 将不起作用，因为这是一个生产环境。最后，如果答案取决于应用程序服务器，我会对如何同时使用独角兽和乘客感兴趣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T08:23:05.290

您正在寻找的是滚动重启。Phusion 客运企业支持这一点：[http ://www.modrails.com/documentation/Users%20guide%20Nginx.html#PassengerRollingRestarts](http://www.modrails.com/documentation/Users%20guide%20Nginx.html#PassengerRollingRestarts)

# javascript - 仅在基本 url 上运行的 JS 函数

> ID：15281439
> 
> 赞同：1
> 
> 时间：2013-03-07T20:49:48.980
> 
> 标签：javascript, function, url, location

我正在开发一个严重依赖 javascript 进行浏览器历史操作的网站，并且只使用一个实际的页面文件。我希望脚本在用户点击网站的基本 url 时运行一个函数，但我不确定哪种方法是合适的。我想我可以快速比较当前窗口的位置，但是如果用户输入 www 而不是 http://，或者一个都不输入，该怎么办。有些东西告诉我这应该很容易。

```
if (window.location.href == 'http://mysite.com') {
    console.log('you hit the base url, yay');
    myFunction();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T20:55:51.477

听起来您想隔离 URL 的路径部分。

```
function isHomePage() {
    return window.location.pathname === '/' || window.location.pathname === '';
} 
```

这应该涵盖您的基础，即使 URL 类似于

```
https://www2.example.com:443/#hash 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T20:52:17.820

[`window.location.href`始终包含协议](https://developer.mozilla.org/en-US/docs/DOM/window.location#Properties)，因此如果用户在输入 URL 时省略了协议，则没有问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T20:57:06.920

JavaScript 可以部分访问当前 URL。对于此网址：

[http://mysite.com/example/index.html](http://mysite.com/example/index.html)

```
window.location.protocol = "http"
window.location.host = "mysite.com"
window.location.pathname = "example/index.html" 
```

确保使用主机属性

```
if (window.location.host === 'mysite.com') {
    console.log('you hit the base url, yay');
    myFunction();
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-07T20:56:44.647

如果通过基本 url，您的意思是没有路径组件或哈希片段，您可以按如下方式检查：

```
if (window.location.pathname==='/' && window.location.hash==="") {
    console.log('you hit the base url, yay');
    myFunction();
} 
```

# ruby-on-rails - 重命名控制器后更新路由

> ID：15281443
> 
> 赞同：0
> 
> 时间：2013-03-07T20:50:04.683
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, rails-routing

我有一个名为`report`（所以文件名是 report_controller.rb ）的控制器和`show`它里面的一个方法和这样的路由：

```
 resources :management, only: [:show] do
    member do
      get 'report' => 'report#show'
    end
  end 
```

所以我可以点击下面这样的 URL 并看到我返回的 JSON 并且生活很好。

```
 http://localhost:3000/management/1/report.json 
```

现在我被告知我应该将我的控制器的名称从报告**复数**到**报告**。我也是。

但是现在当我转到我以前的 URL 时，它给出了错误提示

```
 uninitialized constant ReportController 
```

这太烦人了。我现在该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T21:10:36.250

控制器类名和文件名都必须是复数。然后你将要使用这条路线

```
get 'reports' => reports#show' 
```

# c# - c#中不寻常的正则表达式行为

> ID：15281444
> 
> 赞同：0
> 
> 时间：2013-03-07T20:50:06.127
> 
> 标签：c#, regex

我有一个行为相当奇怪的正则表达式，我不知道为什么。原始正则表达式：

```
Regex regex = new Regex(@"(?i)\d\.\d\dv"); 
```

此表达式返回/匹配等效于 1.35V 或 1.35v 的值，这正是我想要的。但是，它对我的​​程序来说还不够独特，它会返回一些我不需要的字符串。

修改正则表达式：

```
Regex rgx = new Regex(@"(?i)\d\.\d\dv\s"); 
```

只需在表达式中添加“\s”，它就会匹配/返回 DDR3，这根本不是我想要的。我猜某种反转正在发生，但我不明白为什么，我似乎无法找到解释它的参考。我想做的只是在表达式的末尾添加一个空格来过滤更多结果。

任何帮助将不胜感激。

编辑：这是一个功能测试用例，其中包含我的代码中正在发生的事情的通用版本。只需在 Visual Studio 中打开一个新的 WPF，复制并粘贴，它就会为您重复结果。

```
namespace WpfApplication1
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
    {
        InitializeComponent();
    }
    Regex rgx1 = new Regex(@"(?i)\d\.\d\dv");
    Regex rgx2 = new Regex(@"(?i)\d\.\d\dv\s");

    string testCase = @"DDR3 Vdd            |            |            |            |            |    1.35v   |";

    string str = null;

    public void IsMatch(string input)
    {
        Match rgx1Match = rgx1.Match(input);
        if (rgx1Match.Success)
        {
            GetInfo(input);
        }
    }
    public void GetInfo(string input)
    {
        Match rgx1Match = rgx1.Match(input);
        Match rgx2Match = rgx2.Match(input);

        string[] tempArray = input.Split();
        int index = 0;

        if (rgx1Match.Success)
        {
            index = GetMatchIndex(rgx1, tempArray);
            str = tempArray[index].Trim();
            global::System.Windows.Forms.MessageBox.Show("First expression match: " + str);
        }
        if (rgx2Match.Success)
        {
            index = GetMatchIndex(rgx2, tempArray);
            str = tempArray[index].Trim();
            System.Windows.Forms.MessageBox.Show(input);
            global::System.Windows.Forms.MessageBox.Show("Second expression match: " + str);
        }
    }
    public int GetMatchIndex(Regex expression, string[] input)
    {
        int index = 0;

        for (int i = 0; i < input.Length; i++)
        {
            if (index < 1)
            {
                Match rgxMatch = expression.Match(input[i]);
                if (rgxMatch.Success)
                {
                    index = i;
                }
            }
        }
        return index;
    }

    private void button1_Click(object sender, RoutedEventArgs e)
    {
        string line;
        IsMatch(testCase);
    }

} 
```

}

GetMatchesIndex 方法在代码的其他部分被多次调用，没有发生任何意外，只是在这个 Regex 上我遇到了一个绊脚石。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T21:44:46.360

您看到的行为完全与您的应用程序逻辑有关，与正则表达式几乎没有关系。在`GetMatchIndex`，你是默认的`index = 0`。那么如果没有`string[] input`匹配的条目会发生什么？你回来了`index = 0`，它是 中`DDR3`的第一个元素的索引`string[] input`。

您在第一个正则表达式中看不到该行为，因为它匹配`1.35v`. 但是，当您将空格添加到末尾时，它与拆分输入中的任何条目都不匹配，因此默认情况下您会返回第一个，恰好是`DDR3`. 此外，`if (rgx1Match.Success)`这并没有真正的帮助，因为您首先检查整个字符串中的匹配项（确实匹配，因为那里有一个空格），然后在拆分后搜索索引，从而删除了空格！

The fix is pretty simple: When you are returning an index from an array in a programming language that uses 0-based numbering, the standard way to represent "not found" is with -1 so it doesn't get confused with the valid result of `0`. So default `index` to `-1` instead and handle a result of `-1` as a special case, i.e., display an error message to the user like "No matches".

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T21:14:49.437

你的问题不正确：

`new Regex(@"(?i)\d\.\d\dv\s").Match("DDR3").Success` 是假的

事实上，结果似乎完全如您所愿。

# jqgrid - 如何在 jqGrid 模态表单中引用提交按钮

> ID：15281446
> 
> 赞同：0
> 
> 时间：2013-03-07T20:50:07.460
> 
> 标签：jqgrid

如何引用提交按钮？当退出某个字段时，我试图将焦点设置在提交按钮上。

这是我的方法的一个例子：

```
 dataEvents:[{
      type:'blur',
      fn: function(){
          $('#add').focus();
      }    
  }] 
```

也试过 $('#submit').focus();

注意：这个按钮是jqGrid的Add New Record模态表单的Add按钮

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T23:30:04.837

您应该能够在模糊后通过

```
$('#sData').focus(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T21:01:27.520

在提交按钮中添加 id 并尝试这个

```
$(document).ready(function(){
$("#submit").focus();
});

<input type="submit" value="u" name="submit" id="submit"/> 
```

# intuit-partner-platform - ITEM 名称必须是唯一的

> ID：15281453
> 
> 赞同：0
> 
> 时间：2013-03-07T20:50:27.677
> 
> 标签：intuit-partner-platform

使用 Intuit Anywhere QuickBooks Desktop，我正在创建添加到云中且没有错误的项目。使用 ItemQuery，查找项目工作正常。这是我的 XML 请求和响应：

[http://pastebin.com/4YaJbgZg](http://pastebin.com/4YaJbgZg)

当我运行 Intuit Sync Manager 时，我新添加的项目进入错误状态。在我运行同步管理器之前，这些项目在 QuickBooks 中不存在。进入错误状态后，这个查询会让它们出现：

```
 ItemQuery iq = new ItemQuery();
        iq.ErroredObjectsOnly = true;
        var bItems = iq.ExecuteQuery<Item>(dataServices.ServiceContext); 
```

如何找出这些项目进入错误状态的原因？我使用 Intuit Sync Manager 创建了一个日志文件，但是，我没有看到有关这些项目的错误消息。这是我的日志：

[http://pastebin.com/QhpKHvWF](http://pastebin.com/QhpKHvWF)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T14:33:55.990

QBD 项目创建处于测试阶段，在 v2 中不受支持。

[QBD 支持的对象和操作](http://docs.developer.intuit.com/0025_Intuit_Anywhere/0050_Data_Services/v2/0500_QuickBooks_Windows/0500_Supported_Objects)

在 V3 发布之前，不会添加对 Item Create 的支持。有关 V3 的更多信息，请参阅[V3 网络研讨会录制](http://ippblog.intuit.com/blog/2013/02/quickbooks-api-v3-webinar-recording.html)。

# django - 我应该如何处理 TypeError 函数（）正好需要 2 个参数（1 个给定）

> ID：15281469
> 
> 赞同：0
> 
> 时间：2013-03-07T20:51:30.540
> 
> 标签：django, django-views

我有两种看法，

```
def create_order(request,id):
    orders = Order()
    orders.restaurant = Restaurant.objects.get(pk=id)
    orders.save()

    if orders.pk:
        ....
    return orders 
```

第二个视图调用第一个视图，

```
def show_checkout(request,id):
    if order.is_empty(request):
        ...
    if request.method == 'POST':
        restaurant = Restaurant.objects.get(pk=id)
        form = forms.CheckoutForm(request.POST,instance=restaurant)
        if form.is_valid():
            order_created = create_order(request,restaurant)
            .......
    return render_to_response('checkout/checkout.html',context,context_instance=RequestContext(request)) 
```

我当我运行这个我得到错误`

show_checkout() 正好接受 2 个参数（1 个给定）` 我的 Traceback，

```
Traceback:
File "/home/matsinvasion/projects/f4l/env/local/lib/python2.7/site-packages/django/core/handlers/base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)

Exception Type: TypeError at /orders/checkout/
Exception Value: show_checkout() takes exactly 2 arguments (1 given) 
```

我会继续这样做，并建议阅读有关处理争论的好书，这是值得赞赏的

```
from .views import show_item, show_order,get_category,homepage,show_checkout,reciept
from f4l import settings
from django.conf.urls.defaults import patterns, include, url

urlpatterns = patterns('',
    url(r'^$',homepage,name="homepage"),
    url(r'^menu/(\d+)$',get_category, name="f4l_menu"),
    url(r'^your_order/$',show_order,name="order_index"),
    url(r'^item/(?P<id>\w+)/$',show_item, name="item_order"),
    url(r'^checkout/$',show_checkout,name="checkout"),
    url(r'^reciept/$',reciept,name="checkout_reciept"),
) 
```

修复 urls.py，`NoReverseMatch error`在这个函数中引发，

```
Reverse for 'checkout' with arguments '()' and keyword arguments '{}' not found.
    def get_checkout_url(request):
        return urlresolvers.reverse('checkout') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T21:31:46.377

您的`show_checkout`视图采用了`id`您未在 URL 中考虑的第二个参数。

您需要将其添加到您的 URL，如下所示：

```
url(r'^checkout/(?P<checkout_id>[\w|\W]+)$',show_checkout,name="checkout"), 
```

当您在模板中调用 URL 时，您需要`id`在视图中传递您要求的内容，如下所示：

```
{% url checkout checkout.id %} 
```

或者，如果您使用的是 Django 1.5：

```
{% url 'checkout' checkout.id %} 
```

# scala - 任何数字类型的 Scala 隐式转换

> ID：15281472
> 
> 赞同：2
> 
> 时间：2013-03-07T20:51:37.993
> 
> 标签：scala, implicit-conversion, syntactic-sugar

我目前正在学习 Scala 编程语言（顺便说一下喜欢它），最近发现了隐式转换。所以我有我的类 Complex 和它的伴生对象。在我的伴侣对象中，我想要这些隐式转换：

```
 implicit def convertToComplex(x: Double) = new Complex(x, 0);
    implicit def convertToComplex(x: Int) = new Complex(x, 0);
    implicit def convertToComplex(x: Float) = new Complex(x, 0);
    implicit def convertToComplex(x: Short) = new Complex(x, 0);
    implicit def convertToComplex(x: Long) = new Complex(x, 0); 
```

为了不使我的复数类因 +、-、* 和 / 的重载而膨胀，以添加数字类型。

所以我的问题是：

有没有更短的方法来编写带有某种语法糖的隐式转换？（我的意思是没有所有的重载......）

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T23:15:38.467

你可以做这样的事情

```
object ConvertComplex {
  case class Complex[T: Numeric](x: T, y: Int) {

    val nX = implicitly[Numeric[T]]

    def doSomething = nX.toInt(x) * y
    def doSomethingElse = nX.plus(x, nX.fromInt(y))
  }

  object Complex {
    implicit def convertToComplect[T: Numeric](x: T) = Complex(x, 0)
  }

} 
```

以及测试结果：

```
def doSomething[T: Numeric](x: Complex[T]) = x.doSomething
def doSomethingElse[T: Numeric](x: Complex[T]) = x.doSomething

val double = 1: Double    //> double  : Double = 1.0
val int = 1: Int          //> int  : Int = 1
val float = 1: Float      //> float  : Float = 1.0
val short = 1: Short      //> short  : Short = 1
val long = 1: Long        //> long  : Long = 1

doSomething(double)       //> res0: Int = 0
doSomething(int)          //> res1: Int = 0
doSomething(float)        //> res2: Int = 0
doSomething(short)        //> res3: Int = 0
doSomething(long)         //> res4: Int = 0

doSomethingElse(double)   //> res5: Double = 1.0
doSomethingElse(int)      //> res6: Int = 1
doSomethingElse(float)    //> res7: Float = 1.0
doSomethingElse(short)    //> res8: Short = 1
doSomethingElse(long)     //> res9: Long = 1 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T01:07:29.777

你需要`Integral`而不是`Numeric`如果你想`Complex`用 method `/`。

这是一个几乎完成的解决方案：

```
scala> :paste
// Entering paste mode (ctrl-D to finish)

import scala.math.Integral

class Complex[T: Integral](val real: T, val imag: T) {
  import Integral.Implicits._
  def +(that: Complex[T]) = Complex(real+that.real, imag+that.imag)
  def -(that: Complex[T]) = Complex(real-that.real, imag-that.imag)
  def *(that: Complex[T]) = Complex(real*that.real - imag*that.imag, real*that.imag+imag*that.real)
  def /(that: Complex[T]) = {
    val d = that.real*that.real + that.imag*that.imag
    Complex((real*that.real + imag*that.imag)/d, (-real*that.imag+imag*that.real)/d)
  }
  override def toString: String = imag.signum match {
    case 1  => "" + real + "+" + imag +"i"
    case -1 => "" + real + "" + imag + "i"
    case _  => "" + real
  }
}

object Complex {
  import Integral.Implicits._
  def apply[T: Integral](real: T, imag: T): Complex[T] = new Complex[T](real, imag)
  object i extends Complex[Byte](0.toByte, 1.toByte)
  implicit class Real2Imag[T](val imag: T) {
    def *(v: i.type)(implicit ig: Integral[T]) = Complex(ig.zero, imag)
  }
  implicit def promote[U, V](c: Complex[U])(implicit ev: U => V, il: Integral[V]) =
    Complex(ev(c.real), ev(c.imag))
  implicit def real2complex[T: Integral](real: T) = Complex(real, implicitly[Integral[T]].zero)
  implicit val doubleIsIntegral = scala.math.Numeric.DoubleAsIfIntegral
}

// Exiting paste mode, now interpreting.

warning: there were 2 feature warnings; re-run with -feature for details
import scala.math.Integral
defined class Complex
defined object Complex

scala> import Complex._
import Complex._

scala> val c1 = 3 + 4*i
c1: Complex[Int] = 3+4i

scala> val c2 = 3.0 + 4.0*i
c2: Complex[Double] = 3.0+4.0i

scala> val c3 = c1/c2
c3: Complex[Double] = 1.0

scala> val c4 = 3 - 4*i
c4: Complex[Int] = 3-4i

scala> val c5 = c2*c4
c5: Complex[Double] = 25.0 
```

你可以这样写你的`pow`方法（注意如何生成`Complex`一个）：

```
 def pow(n: Int): Complex[T] = {
    val one = Complex[T](implicitly[Integral[T]].one, implicitly[Integral[T]].zero)
    Iterator.iterate(one)(_*this).drop(n).next
  }

scala> i.pow(2)
res5: Complex[Byte] = -1

scala> i.pow(10)
res6: Complex[Byte] = -1

scala> (1+1*i).pow(4)
res7: Complex[Int] = -4

scala> (1+1*i).pow(5)
res8: Complex[Int] = -4-4i 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T20:57:06.220

就在这里。我假设这个`Complex`类有`Double`参数。然后，您可以一次性编写隐式转换。

```
implicit def doubleToComplex[T <% Double](x: T): Complex = new Complex(x, 0) 
```

# coffeescript - CoffeeScript：用（splat ...）参数覆盖方法

> ID：15281475
> 
> 赞同：3
> 
> 时间：2013-03-07T20:51:44.463
> 
> 标签：coffeescript

我被困在试图将 splat 传递给超级构造函数。像这样的东西：

```
class Mom
    constructor: (vars...) ->
        [code]

class Son extends Mom
    constructor: (vars...) ->
        super(???)
        [code] 
```

好吧，问题是：

**如何调用传递儿子收到的 splat 参数的超级构造函数？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T21:02:16.797

`super vars...`可能是您正在寻找的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T22:19:22.393

`super`超级神奇。

如果您[只是编写`super`](http://coffeescript.org/#try%3aclass%20Mom%0A%20%20constructor%3A%20%28vars...%29%20-%3E%0A%20%20%20%20console.log%20%22constructing%20Mom%20with%20%23%7Bvars%7D%22%0A%0Aclass%20Son%20extends%20Mom%0A%20%20constructor%3A%20%28vars...%29%20-%3E%0A%20%20%20%20super%0A%0Anew%20Son%20%27a%27%2C%20%27b%27%2C%20%27c%27%20%0A%23%20Output%3A%20constructing%20Mom%20with%20a%2Cb%2Cc)它，它将编译为对转发所有参数的超级构造函数的调用，这正是您在这种情况下想要的:)

```
class Mom
  constructor: (vars...) ->
    console.log "constructing Mom with #{vars}"

class Son extends Mom
  constructor: (vars...) ->
    super

new Son 'a', 'b', 'c' 
# Output: constructing Mom with a,b,c 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-31T07:50:54.737

你不需要做任何事情。构造函数实际上只使用了`arguments`javascript 变量。这意味着，您可以`super`按原样留下您的电话。

# jquery - Highcharts - 单击事件未在绘图区域之外触发

> ID：15281478
> 
> 赞同：0
> 
> 时间：2013-03-07T20:51:58.020
> 
> 标签：jquery, svg, highcharts

[http://jsfiddle.net/jriggs/N6HGK/](http://jsfiddle.net/jriggs/N6HGK/)

要复制，请尝试单击图例左侧或右侧的区域。

我也尝试过对 highcharts-0 甚至 body 标签使用 click 事件，但这似乎被 svg 掩盖了

高图代码：

```
$(function () {
    // create the chart
    var chart = new Highcharts.Chart({
        chart: {
            renderTo: 'container',
            events: {
                click: function(event) {
                    alert ('x: '+ event.xAxis[0].value +', y: '+
                          event.yAxis[0].value);
                }
            }        
        },
        xAxis: {
        },

        series: [{
            data: [29.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4]        
        }]
    });
});

$('#highcharts-0').click(function() {
alert('outside the box');
});
$(document).click(function() {
alert('body tag');
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T00:17:35.967

将其绑定到`chart.container`。
然后你可以用你的函数简单地覆盖事件。

```
var originalEvent = chart.container.onclick;
chart.container.onclick = function(e) {
    // do what you want
    originalEvent(e);
} 
```

[**演示**](http://jsfiddle.net/N6HGK/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T23:44:40.713

自 Highcharts 1.2.0 以来，click 函数的定义是：

> 单击绘图背景时触发。this 关键字是指图表对象本身。一个参数，事件，被传递给函数。这包含基于 jQuery 或 MooTools 的常见事件信息，具体取决于哪个库用作 Highcharts 的基础。

所以你可以在情节背景之外获得事件......

参考：[http ://api.highcharts.com/highcharts#chart.events.click](http://api.highcharts.com/highcharts#chart.events.click)

很遗憾。

泽维尔。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-01T00:43:31.493

有点迂回的方式，但我发现最简单的方法是将单击事件附加到 highcharts 标记的图表容器对象。我似乎无法在图表创建时指定它的 id，但它是您渲染它的 div 的第一个孩子的第一个孩子。例如，如果您有：

```
 var options = {
        chart: {
            renderTo: someIdForDivFoo,
        },
        ... 
```

然后，您可以在创建图表后直接调用它：

```
 DivFoo.children[0].children[0].addEventListener("click", function () {
            //your click event logic
        }); 
```

这似乎收集了所有点击事件：系列、情节区域、标题、轴、标签、图例等。希望这会有所帮助！

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-06-18T14:34:28.043

看一下将事件单击添加到容器但在文档就绪和图表运行 DOM 结构中的示例。

```
$(document).ready(function(){

    $('#highcharts-0').click(function(){
    alert('a');
    });

}); 
```

[http://jsfiddle.net/N6HGK/9/](http://jsfiddle.net/N6HGK/9/)

# forms - Symfony2 表单基于其他实体填充实体

> ID：15281482
> 
> 赞同：1
> 
> 时间：2013-03-07T20:52:19.243
> 
> 标签：forms, symfony

我正在使用 Symfony2 表单组件来创建和修改表单。我目前正在加载所有模型实体作为选择，但我只需要从制造商处获取与所选（发布）值相关的模型。

我怎样才能做到这一点？

```
class VehicleType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder->add('manufacturer', 'entity', array(
            'label' => 'Brand',
            'attr' => array('class' => 'input-block-level'),
            'class' => 'BalslevCarBundle:Manufacturers',
            'property' => 'short_name',
            'empty_value' => 'All',
            'required' => false
        ));
        $builder->add('model', 'entity', array(
            'label' => 'Model',
            'class' => 'BalslevCarBundle:Models',
            'property' => 'model',
            'empty_value' => 'All',
            'required' => false
        ));
    }

    public function getName()
    {
        return 'search';
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T10:02:27.887

首先，您必须根据用户选择“动态地”创建您的选择。
有两种方式，与您的应用程序行为严格耦合，导致（在这两种情况下）相同的“核心”代码；区别仅在于您称呼它的方式。

所以，让我们解释一下这两种可能性：

1.  “静态”选择制造商，不要在请求期间更改它：使用从业务逻辑中检索到的数据
2.  “动态地”选择制造商，并且可以在请求时更改它们：在每次请求时替换您的表格；新表单将由业务逻辑提供

所以，*你*的问题的核心是：我怎样才能只检索关联的实体？

### 回答

进入您的 VehicleType.php （在这种情况下，实体是 VehicleType 吗？）

```
private $manufacturerId;

public function __construct($manufacturerId)
{
    $this->manufacturerId = $manufacturerId;
}

public function BuildForm(FormBuilderInterface $builder)
{
    $manufacturerId = $this->manufacturerId;

    $manufacturerQuery = function(EntityRepository $repo) use ($manufacturerId ){
                              return $repo->createQueryBuilder('m')
                                          ->where('m.id = :id')
                                          ->setParameter('id',$manufacturerId );};

    $builder->add('manufacturer', 'entity', array(
        'label' => 'Brand',
        'attr' => array('class' => 'input-block-level'),
        'class' => 'BalslevCarBundle:Manufacturers',
        'property' => 'short_name',
        'empty_value' => 'All',
        'required' => false,
        'query_builder' => $manufacturerQuery;
    ));

    $builder->add('model', 'entity', array(
        'label' => 'Brand',
        'attr' => array('class' => 'input-block-level'),
        'class' => 'BalslevCarBundle:Manufacturers',
        'property' => 'short_name',
        'empty_value' => 'All',
        'required' => false,
        'query_builder' => $modelQuery;
    ));
} 
```

如您所见，通过这种方式，我们使用自定义存储库来仅获取适合我们需求的实体。显然，我在不知道您的数据库结构的情况下编写我的 DQL 查询：根据您的实际情况调整它是您的任务和责任。

此外，您必须为模型创建另一个查询（`$modelQuery`在我的回答中调用）以根据所选模型检索正确的模型`$id`

# javascript - 在 WebView 中调用 JavaScript 函数

> ID：15281484
> 
> 赞同：1
> 
> 时间：2013-03-07T20:52:21.837
> 
> 标签：javascript, android, function, android-webview

我知道这个问题已经被问过很多次了，我已经检查了所有的解决方案并研究了一切。但是，这根本不适合我。

我不知道我做错了什么。有人可以帮我吗？

我正在加载一个本地 html 文件`WebView`，然后调用 JavaScript 函数：

```
wv.loadUrl("file:///android_asset/sample.html");
wv.getSettings().setJavaScriptEnabled(true);
JavascriptInterface javasriptInterface = new JavascriptInterface(MyActivity.this);
wv.addJavascriptInterface(javasriptInterface, "MyInterface");
wv.loadUrl("javascript:loadpath()"); 
```

HTML 文件是：

```
<html>
<head>
</head>

<body>
<script type="text/javascript">
    function callDoSomething() {
        // Do something
    }

    function loadpath() {
        // Is not called no matter whatever operation I do here. Just printing a string, setting variable, android callback anything.
        document.write("Hi");
        document.getElementById('img').src = "path.png";
    }
</script>

<form name="myForm" action="FORM">
    <img src=""  alt="Autofill" /><br>
    <input type="button" value="Submit" onClick="callDoSomething()" />
</form>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T20:53:31.083

`loadUrl()`是异步的。你打电话给你的第二种`loadUrl()` *方式*太快了。你需要等到你的页面被加载，也许通过使用 a`WebViewClient`和观察 for `onPageFinished()`。

# c++ - 编写 C++ Dll 并将其有效地暴露给 .NET（不是通过 C++/CLI）

> ID：15281496
> 
> 赞同：1
> 
> 时间：2013-03-07T20:52:51.433
> 
> 标签：c++, .net, interop, pinvoke, marshalling

我正在构建一个 C# 项目。该项目将通过 CUDA 使用 NVidia 的 Tesla。CUDA C 原生实现没有直接暴露给 C#，而且在我看来，可用的 C# 包装器（如 Brahma、CUDAfy、Linq to GPU）对于生产来说还不够成熟。

我决定继续在一个 C++ 组件中构建我的数学逻辑，该组件将访问官方支持的 CUDA。C++/CLI 不是一个选项，因为我使用英特尔 C++ 编译器来提高性能，它不支持 CLR 扩展。

我最重要的标准是性能，因此，我会尽量减少 C++（我的业务逻辑所在）和 .NET（我的其余应用程序）之间的编组和复制数组。

我知道以前有人问过这个问题，但大多数情况下，C++ 库已经存在，而其他时候，C++/CLI 是一个选项，但在这里，两种情况都不是这样。

**鉴于我打算用 C++ 从头开始​​编写 C++ 库，因此我可以决定将它暴露给 C# 的最佳方式。您是否有任何建议或最佳实践，我应该遵循以在 C++ 和 .NET 之间实现最简单和最高性能的集成？请注意，我将要交换的主要是大型数组**

编辑：澄清我正在用 C++ 构建我的业务逻辑（数学），而不是一个基础设施库来促进对 GPU 的访问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T21:00:28.760

虽然肯定有可能超越您认为不够成熟的现有库，但您在这里提出这个问题的事实应该让您在决定推出自己的库/实现时三思而后行！

如果要将其投入生产，则除了特定性能（例如稳定性和可靠性）之外的考虑应该是您的主要关注点。通常，除非您知道自己在做什么，否则重复社区或其他开发团队的工作可能是一个滑坡。

我知道这个答案并不能真正解决您的问题，但是在我看来，您的问题过于宽泛，没有简单的答案。最初我打算将此作为评论发布，但我认为它太长了，无法适应格式。

因此，最后，我建议您尝试现有的库，如果您发现它们从性能角度来看不合适，请开始提出具体问题。

**更新**

如果您要在 C++ 中实现大部分逻辑，并且希望将一些结果以数组的形式传回托管代码，那么您不需要做太多事情。通常，数组的自动编组与您将获得的一样有效。

我建议的一件事是，在决定获得“创造性”以改进事情之前，尽可能多地阅读有关编组的信息并使用性能分析器。

最后一个想法可能很有趣，但同样，您应该在尝试使用它之前进行分析：您可能会尝试使用内存映射文件作为数据的后备存储并从两端打开文件。最终，这可能有用，也可能没有用，所以*在购买之前一定要先介绍一下*；）

# wpf - 如何使用 UniformGrid 将 TextBoxes 绑定到 ItemsControl 中的 ObservableCollection

> ID：15281499
> 
> 赞同：1
> 
> 时间：2013-03-07T20:53:00.823
> 
> 标签：wpf, binding, textbox, observablecollection, uniformgrid

如果在 WPF 我有这个代码：

```
using System.Collections.ObjectModel;

...
...

public partial class MainWindow : Window
{
    public ObservableCollection<String> myMatrixData = new ObservableCollection<String>();
    public MainWindow()
    {
        InitializeComponent();

        int i;
        for (i = 0; i < 100; i++)
            myMatrixData.Add("Test");

        myMatrix.ItemsSource = myMatrixData;
    }

    private void Button_Click_1(object sender, RoutedEventArgs e)
    {
        Cell00.Text = myMatrixData[0];
    }
} 
```

XAML：

```
 xmlns:sys="clr-namespace:System;assembly=mscorlib" 
...
...
<Grid>
    <StackPanel>
        <ItemsControl x:Name="myMatrix">
            <ItemsControl.Resources>

            </ItemsControl.Resources>

            <ItemsControl.ItemsPanel>
                <!-- specify the panel that is the container for the items -->
                <ItemsPanelTemplate>
                    <UniformGrid Rows="10" Columns="10" />
                </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>
            <!-- specify the template used to render each item -->
            <ItemsControl.ItemTemplate>
                <DataTemplate DataType="{x:Type sys:String[]}">
                    <TextBox Text="{Binding Path=., UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"/>
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ItemsControl>
        <Button Content="Read cell 0/0" Click="Button_Click_1"/>
        <TextBlock x:Name="Cell00"/>
    </StackPanel>
</Grid> 
```

我只想反映`ObservableCollection myMatrixData`要反映在一个名为的`UniformGrid`样式中的元素。更改第一个单元格中的文本并按下按钮表明这不起作用。`ItemsControl``myMatrix`

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T21:39:12.950

`ObservableCollection<string>`不会更新对的更改，`string`因为`string`它本身没有实现`INotifypropertyChanged`

尝试为您的收藏创建一个简单的模型

例子：

```
private ObservableCollection<Matrix> _myMatrix = new ObservableCollection<Matrix>();

public MainWindow()
{
    InitializeComponent();
    this.DataContext = this;

    for (int i = 0; i < 100; i++)
    {
        MyMatrix.Add(new Matrix { Value = "Test" + i });
    }
}

public ObservableCollection<Matrix> MyMatrix
{
    get { return _myMatrix; }
    set { _myMatrix = value; }
}

.......

public class Matrix : INotifyPropertyChanged
{
    private string _value;
    public string Value
    {
        get { return _value; }
        set { _value = value; NotifyPropertyChanged("Value"); }
    }

    public event PropertyChangedEventHandler PropertyChanged;
    public void NotifyPropertyChanged(string property)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(property));
        }
    }
} 
```

xml:

```
<Window x:Class="WpfApplication9.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:WpfApplication9"
        Title="MainWindow" Height="350" Width="525" Name="UI">
    <StackPanel>
        <ItemsControl x:Name="myMatrix" ItemsSource="{Binding MyMatrix}" >
            <ItemsControl.ItemsPanel>
                <!-- specify the panel that is the container for the items -->
                <ItemsPanelTemplate>
                    <UniformGrid Rows="10" Columns="10" />
                </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>
            <!-- specify the template used to render each item -->
            <ItemsControl.ItemTemplate>
                <DataTemplate DataType="{x:Type local:Matrix}">
                    <TextBox Text="{Binding Path=Value, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"/>
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ItemsControl>
        <Button Content="Read cell 0/0" Click="Button_Click_1" />
        <TextBlock x:Name="Cell00" />
    </StackPanel>

</Window> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T21:15:56.190

我发现这对于使用 NotifyPropertyChanged 和命令进行绑定非常有用

[wpf-mvvm-inotifypropertychanged](https://stackoverflow.com/questions/5285377/wpf-mvvm-inotifypropertychanged-implementation-model-or-viewmodel)

[实现 MVVM 模式](http://msdn.microsoft.com/en-us/library/gg405484%28v=PandP.40%29.aspx)

[WPF/MVVM 快速入门教程 --- 超级好用的这个](http://www.codeproject.com/Articles/165368/WPF-MVVM-Quick-Start-Tutorial)

# jquery-ui - JQuery UI自动完成，如果鼠标悬停，则不选择输入值

> ID：15281503
> 
> 赞同：1
> 
> 时间：2013-03-07T20:53:17.947
> 
> 标签：jquery-ui, autocomplete, jquery-ui-autocomplete

我对 JQuery UI 自动完成有疑问。

我希望它的行为是这样的：
如果我将鼠标放在输入和输入值的正下方，那么自动完成出现并按 Enter，脚本将从自动完成列表中选择值。我宁愿让脚本关闭并选择用户输入的值。

简而言之：如果用户实际点击建议，我希望自动完成只是为了替换输入文本。

这有可能吗？

最好的祝福

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T10:11:40.133

您可以使用 select 事件：

```
select : function(event, selectedObject) {
  jQuery(this).val(selectedObject.item.value);
} 
```

# visual-studio - 数据库发布后VS 2012 / MSBuild CMD？

> ID：15281504
> 
> 赞同：1
> 
> 时间：2013-03-07T20:53:21.060
> 
> 标签：visual-studio, msbuild, continuous-integration, post-build-event

部署 VS 2010 数据库项目后，我能够运行自定义脚本。我需要在 Visual Studio 2012 中做类似的事情，在发布数据库后，我想 shell 到 CMD（所以我可以运行 sqlcmd、bcp 等）。

有谁知道实现这一目标的方法？

谢谢。

# android - 检测 Unity Android/Eclipse 项目上的闪屏退出

> ID：15281513
> 
> 赞同：0
> 
> 时间：2013-03-07T20:53:49.103
> 
> 标签：android, eclipse, unity3d, splash-screen

我按照[此处](https://developer.vuforia.com/resources/dev-guide/extending-unity-android-activity-and-adding-custom-views-eclipse)的说明创建了一个基于 Vuforia/Unity 项目的 Eclipse 项目。这是启动和运行。

我正在向我的主要活动添加一个按钮，从 QCARPlayerActivity 扩展。这也有效，但是，当 Unity 启动屏幕播放时，该按钮位于 Unity 播放器的顶部。

有什么方法可以检测 Unity 启动画面何时退出，因此在场景加载之前我没有适当的控件？

**2013 年 3 月 18 日更新**

我在 Eclipse 中的主要活动中添加了一个静态布尔值，以跟踪启动画面的完成情况，并修改了添加控件以观察布尔值的代码。

MainActivity.java

```
public static boolean splashComplete = false;
private View mControlViewContainer = null; // initialized in onCreate

class QCARViewFinderTask extends TimerTask {
    public void run() {
        MainActivity.this.runOnUiThread(new Runnable() {
            public void run() {
                if (!QCAR.isInitialized()) return; //wait for QCAR init
//search for QCAR view if it hasn't been found
                if (mQCARView == null)
                {
                    View rootView = MainActivity.this.findViewById(android.R.id.content);
                    QCARUnityPlayer qcarView = findQCARView(rootView);
                    if (qcarView != null) {
                        mQCARParentView = (ViewGroup)(qcarView.getParent());
                        mQCARView = qcarView;
                    }
                }                       

                // add controls if QCAR view is located and the splash sequence is complete
                if(mQCARView != null && splashComplete && mControlViewContainer != null){
                    mQCARParentView.addView(mControlViewContainer);
                    mViewFinderTimer.cancel();
                    mViewFinderTimer = null;
                }
            }
        });
    }
} 
```

在 Unity 中，我创建了一个简单的脚本来设置 Java 中的静态布尔值并将其附加到 Vuforia ARCamera

SplashExit.js

```
function Start () {
    var mainActivity = new AndroidJavaClass ("com.example.app.MainActivity");
    mainActivity.SetStatic.("splashComplete",true);
} 
```

这在具有简单场景的项目中效果很好。我的控件似乎在启动退出时加载。但是，当我在更复杂的场景中使用此方法时，控件会在闪屏消失前一秒左右出现。

有没有更好的地方来附加我的 Unity 脚本，或者脚本中有更好的方法，可以更准确地反映启动序列何时退出？也许 Jerdak 在评论中的建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T20:43:49.973

添加一个 yield 语句就可以了。完整的解决方案如下。

SplashExit.js 应该附加到 Unity 中的 ARCamera Game 对象。start 方法将停止，直到场景加载完毕，然后在 MainActivity.java 中将 splashComplete 设置为 true。

由于 MainActivity.java 中的计时器重复调用 QCARViewFinderTask 的 run 方法，控制视图将被添加到 Unity Player 父视图中作为 splashComplete 转换为 true。

MainActivity.java

```
public class MainActivity extends QCARPlayerActivity {
    private QCARUnityPlayer mQCARView = null;
    private ViewGroup mQCARParentView = null;
    private Timer mViewFinderTimer = null;
    private View mControlViewContainer = null;

    public static boolean splashComplete = false;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        mControlViewContainer = getLayoutInflater().inflate(R.layout.control_layout, null);
    }

    @Override
    public void onResume() {
        super.onResume();
        if (mQCARView == null) {
            //search the QCAR view
            mViewFinderTimer = new Timer();
            mViewFinderTimer.scheduleAtFixedRate(new QCARViewFinderTask(), 1000, 1000);
        }
    }

    @Override
    public void onPause() {
        super.onPause();
        if (mViewFinderTimer != null) {
            mViewFinderTimer.cancel();
            mViewFinderTimer = null;
        }
    }

    class QCARViewFinderTask extends TimerTask {
        public void run() {
            MainActivity.this.runOnUiThread(new Runnable() {
                public void run() {
                    if (!QCAR.isInitialized()) return; //wait for QCAR init

                    //search for QCAR view if it hasn't been found
                    if (mQCARView == null)
                    {
                        View rootView = MainActivity.this.findViewById(android.R.id.content);
                        QCARUnityPlayer qcarView = findQCARView(rootView);
                        if (qcarView != null) {
                            mQCARParentView = (ViewGroup)(qcarView.getParent());
                            mQCARView = qcarView;
                        }
                    }                       

                    // add controls if QCAR view is located and the splash sequence is complete
                    if(mQCARView != null && splashComplete && mControlViewContainer != null){
                        mQCARParentView.addView(mControlViewContainer);
                        mViewFinderTimer.cancel();
                        mViewFinderTimer = null;
                    }
                }
            });
        }

        private QCARUnityPlayer findQCARView(View view) {
            if (view instanceof QCARUnityPlayer) {
                return (QCARUnityPlayer)view;
            }
            if (view instanceof ViewGroup) {
                ViewGroup vg = (ViewGroup)view;
                for (int i = 0; i 
```

 `SplashExit.js` 

```
function Start () {
    yield; // wait for the scene to fully load
    // Note that com.example.app.MainActivity should be updated to match your bundle identifier and class names
    var mainActivity = new AndroidJavaClass ("com.example.app.MainActivity");
    mainActivity.SetStatic.("splashComplete",true);
}
```

# javascript - 为什么 GetElementsByTagName 不能以这种形式工作？

> ID：15281517
> 
> 赞同：0
> 
> 时间：2013-03-07T20:53:57.460
> 
> 标签：javascript, forms, getelementbyid, getelementsbytagname, getelementsbyname

我在 avidest.com/new 上有一个表格。第一个字段是一个单选按钮。电子邮件字段下方是一个提示，该提示应根据为单选按钮选择的值而改变。如果选择了雇主，则提示应为“请使用您的公司电子邮件地址”。如果选择了自由职业者，提示应该是“请使用您的学校电子邮件地址。”。出于某种原因，我的 javascript 代码无法正常工作。我试过用 GetElementsByName 替换 getElementsByTagName 但这不起作用。这是我在 html 页面的 <head> 部分中编写的函数：

```
<script>
function topHint(){
  if(document.getElementsByTagName('Type').value == "Freelancer"){
    document.getElementById('employorlance').innerHTML = "Please use your school e-mail address.";
  }
  if(document.getElementsByTagName('Type').value == "Employer"){
    document.getElementById('employorlance').innerHTML = "Please use your company e-mail address.";
  }
}
</script> 
```

然后我在页面加载时调用该函数：

```
<body onload = "topHint()"> 
```

这是页面上的表单元素：

```
<label id="item4_0_label">
    <input type="radio" id="item4_0_radio" data-hint=""  required value="Freelancer" name="Type" />
        <span class="fb-fieldlabel" id="item4_0_span">Freelancer
        </span>
</label>
<label id="item4_1_label">
    <input type="radio" id="item4_1_radio"  required value="Employer" name="Type" />
        <span class="fb-fieldlabel" id="item4_1_span">Employer
        </span>
</label>
<div class="fb-hint" id ="employorlance" style="color: rgb(136, 136, 136); font-weight: normal; font-style: normal; ">
    Please use your school email address.
</div> 
```

谢谢。

根据 stakoverflow 的建议，我尝试了以下方法，但仍然无法正常工作：

```
function topHint() {
  var elems = document.getElementsByName("Type");
    for (i in elems) {
        if (elems[i].value == "Freelancer") {
          document.getElementById('employorlance').innerHTML = "Please use your school e-mail address.";
        }

        if (elems[i].value == "Employer") {
          document.getElementById('employorlance').innerHTML = "Please use your company e-mail address.";
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T20:58:12.550

该`getElementsByTagName`方法不返回具有匹配名称的单个元素，它返回具有匹配标签名称的元素数组。

在您的情况下，您将得到一个空数组，因为您没有任何`<type>`元素。

* * *

该`getElementsByName`方法还返回一个数组，并且您始终会获得所有单选按钮，而不仅仅是选定的单选按钮，因此您必须检查状态：

```
function topHint(){
  var radios = document.getElementsByName('Type');
  if(radios[0].checked){
    document.getElementById('employorlance').innerHTML = "Please use your school e-mail address.";
  }
  if(radios[1].checked){
    document.getElementById('employorlance').innerHTML = "Please use your company e-mail address.";
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T20:57:01.020

`getElementsByTagName`选择 HTML 标记名称（`body, input, form`等）

你想使用`document.getElementsByName("Type")`：

```
var elems = document.getElementsByName("Type");

function topHint() {
    for (i in elems) {
        if (elems[i].value == "Freelancer" && elems[i].checked) { ... }
        if (elems[i].value == "Employer" && elems[i].checked) { ... }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T21:03:28.080

由于您已经在单选按钮上有唯一的 ID，为什么不使用`document.getElementById`？

```
if(document.getElementById('item4_0_radio').checked){
    // change the hint text
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T21:10:30.360

我认为您真正想要的是：

```
<script>
function topHint(){
  if (document.getElementById('item4_0_radio').checked) {
      document.getElementById('employorlance').innerHTML = 
         "Please use your school e-mail address.";
  }
  else {
      document.getElementById('employorlance').innerHTML = 
         "Please use your company e-mail address.";
  }
}
</script> 
```

然后，在每个单选按钮上添加： `onclick="topHint();"`

# java - 空字符串时休眠选择大小写

> ID：15281522
> 
> 赞同：0
> 
> 时间：2013-03-07T20:54:10.777
> 
> 标签：java, hibernate, string

我在 PostgreSQl 表中实现搜索时遇到问题。该表包含导致错误的空字符串值的列。

来自列设计的一些信息： 数据类型：字符变化（20） 默认值：非 NULL：否 主键：否

我的列的 java 类注释：

```
@Column(name = "codeClient")
private String codeClient; 
```

当没有“空字符串”值时，此查询字符串有效：

```
SELECT c FROM Client c WHERE c.id = 765432 
```

我的 Json 回来了：

```
[{"id":765432,"nameClient":"JACK SMITH","codeClient":"234567890"}] 
```

当我更改查询以处理空值时：

```
SELECT c.id, c.nameClient, CASE c.codeClient WHEN '' THEN 'nonexistent' else c.codeClient END FROM Client c WHERE c.id = 765432 
```

查询有效，但 Json 结果缺少 de 列描述：

```
[[765432,"JACK SMITH","234567890"]] 
```

为了解决这个问题，我将查询更改为返回一个对象：

```
SELECT new ClientDTO(c.id, c.nameClient, CASE c.codeClient WHEN '' THEN 'nonexistent' else c.codeCliente END) FROM Client c WHERE c.id = 765432 
```

但是当结果为空字符串时，Hibernate 无法解决：

```
Java.lang.IllegalArgumentException: org.hibernate.QueryException: could not instatiate class [ClientDTO] from tuple 
```

我尝试使用 JPA CriteriaBuilder。它适用于简单的查询，但由于复杂性，我无法实现我需要的查询。

我无法更改数据库设计，我需要 Json 结果。

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T21:58:48.553

您无法实例化 ClientDTO 可能是因为该类未映射到 persistence.xml。您可以将 'new ClientDTO()' 更改为 'new Client()'。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T21:00:57.857

我会将`CASE c.codeClient WHEN '' THEN 'nonexistent' else c.codeCliente END`逻辑放在 DTO 中：

```
public ClientDTO(){
...
    this.codeClient = ("".equals(codeClient)) ? "nonexistent" : c.codeClient;
...
} 
```

并使查询尽可能简单：

```
SELECT new ClientDTO(c.id, c.nameClient, c.codeClient) FROM Client c WHERE c.id = 765432 
```

# c# - ASP.NET Web API 使用新创建的 ApiController 返回代码 404

> ID：15281529
> 
> 赞同：1
> 
> 时间：2013-03-07T20:54:30.853
> 
> 标签：c#, asp.net-mvc-4, asp.net-web-api

我最近刚刚在我的 ASP.NET MVC4 项目中添加了一个名为 ServerInfoController 的新 ApiController（我已经在 Controllers 文件夹中添加了一个 ApiController）。我使用 CRUD 模板选项创建了这个；这是它的样子：

```
using System.Collections.Generic;
using System.Net;
using System.Net.Http;
using System.Web.Http;
using WebFrontend.Models;

namespace WebFrontend.Controllers
{
    public class ServerInfoController : ApiController
    {
        // GET api/serverinfo
        public Dictionary<string, string> Get()
        {
            var settings = GlobalStaticVars.StaticCore.LoadServerSettings("Last", "Server");

            if (settings != null)
            {
                return new Dictionary<string, string>
                                         {
                                             {"ServerIP", settings.Address},
                                             {"ServerPort", settings.Port.ToString()}

                                         };
            }
            return new Dictionary<string, string>
                                  {
                                      {"ServerIP", ""},
                                      {"ServerPort", ""}
                                  };
        }
    }
} 
```

但是，每次我尝试在浏览器中导航到该资源时，都会收到 404 错误。我知道我的路由已正确注册，因为我的其他控制器仍然可以在 /api 端点访问。

以下是在 WebApiConfig.cs 中配置的路由（默认路由）：

```
public static void Register(HttpConfiguration config)
        {
            config.Routes.MapHttpRoute(
                name: "ActionApi",
                routeTemplate: "api/{controller}/{action}/{id}",
                defaults: new { id = RouteParameter.Optional }
            );
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T21:44:55.677

您不需要路线中的 {action} 部分。这是默认路由：

```
public static void Register(HttpConfiguration config)
{
    config.Routes.MapHttpRoute(
        name: "DefaultApi",
        routeTemplate: "api/{controller}/{id}",
        defaults: new { id = RouteParameter.Optional }
    );
} 
```

# jquery - jquery fancybox、iframe 或 ajax，使用 url 加载

> ID：15281530
> 
> 赞同：0
> 
> 时间：2013-03-07T20:54:32.187
> 
> 标签：jquery, ajax, url, iframe, fancybox

使用fancybox (v2)，我如何创建一个独特的url，在加载时，显示带有iframe 内容的fancybox。我可以很好地处理内联内容（例如 www.mysite.com/index.html#idgoeshere），但不知道 url 或 js 应该包含什么才能加载fancybox，并在其中包含特定的 iframe或 ajax.txt 页面。

我想要实现的是通过以下链接访问：

www.mysite.com/index.html#iframe.html

加载索引页面，打开fancybox 窗口，将iframe.html 页面加载到fancybox 窗口中（或者它也可以是通过ajax 加载的.txt 文件）。

HTML

```
<a class="fancybox fancybox.iframe" href="iframe.html">Iframe</a> 
```

花式盒

```
<script>
$(document).ready(function($) { 
    $.fancybox({
    content: $(window.location.hash).html()
});
    $('.fancybox').fancybox();
});
</script> 
```

感谢您的任何帮助或指导。

凯尔

***更新***

谢谢大家的帮助！！这就是最终对我有用的东西。我将我们的内容保存到单独的 html 文件中，然后使用 fancybox.iframe 调用它们

JS：

```
<script>
$(document).ready(function () {
    $('.fancybox').fancybox({
     'scrolling'   : 'no'   
    });
    if (window.location.hash !== "") {
        $(window.location.hash).click();
    }
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T18:09:29.543

使用主题标签是个坏主意，因为 Google 和 Facebook 等网站经常忽略它们。

而是在 fancybox 的 afterLoad 函数中使用 window.history.replacestate。

例如：

```
afterLoad:function(){
    window.history.replaceState({},"Fancybox","/url-to-set");
} 
```

replaceState 的奇怪之处在于前两个参数无关紧要（据我所知）。唯一重要的是最后一个参数“/url-to-set”。您想将此设置为您希望作为 url 的唯一 url。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T22:30:09.253

查看[Fancybox 站点](http://fancybox.net)上的示例Fancybox 操作完全基于链接的 href。`iframe.html`因此，如果您加载页面，然后在调用它之前更新页面上链接的 href 以指向`.fancybox`它，那么它应该按预期工作。警告：未经测试的代码从我脑海中浮现……</p>

```
$(document).ready(function(){ 
    $('#target').attr('href', window.location.hash.substring(1)).fancybox();
}); 
```

需要调用子字符串来`#`从返回的哈希字符串中删除`window.location.hash`

希望这可以帮助

# c# - 如何防止 src 等属性中的 XSS 攻击？

> ID：15281531
> 
> 赞同：9
> 
> 时间：2013-03-07T20:54:34.567
> 
> 标签：c#, security, xss, html-agility-pack

所以我一直在使用带有白名单的 html 敏捷性构建一个 C# html sanitizer。它工作正常，除了以下情况：

```
<img src="javascript:alert('BadStuff');" />
<img src="jav&#x09;ascript:alert('BadStuff');"> 
```

我确实想允许 src 属性，而不是其中的恶意内容。我查找的所有内容都刚刚推荐了标签及其属性的白名单。你会如何处理这样的事情呢？我知道这在任何较新的浏览器中都不起作用，但我对安全性不是很熟悉，而且我确信攻击者可以做一些其他聪明的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T21:01:21.437

像“必须是有效的 Uri，无论是相对还是绝对的 http/https 方案”是一个很好的起点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T19:27:43.943

只要您正确清理和处理输入，您就可以安全地允许 src 属性。为此，您应该首先通过有效 URL 字符的白名单对其进行清理，对其进行[规范化](http://www.how-to-asp.net/how-to-canonical-urls-asp-net/)，然后验证它是否指向有效图像。

您提到的白名单是第一步（也是重要的一步）。要实现白名单，只需删除对 URL 无效的每个字符。还要验证 URL 的格式是否正确，这意味着它指向用户应该能够访问的有效资源。例如，用户不应该通过传入`file://sensitive.txt`或其他方式访问服务器上的本地文件。如果 http 或 https 是唯一应该使用的协议，请检查 URL 是否以这些协议开头。如果您特别偏执，您可能会完全拒绝该请求，因为很明显它已被篡改。白名单很重要，但单独的白名单并***不能***保证功能的安全。

规范化很重要，因为许多攻击依赖于提交最终将您带到某个位置的 URL，但可能会滥用计算机与生俱来的缺乏推理的能力来获取它不应该得到的东西。这也将有助于消除相同资源的重复路径，这可能会提高性能（或者至少允许您通过不重新检查自上次检查以来未更改的已知文件来提高性能。但请注意这一点，因为可以欺骗最后修改日期，以便攻击者可以在您已经“检查并信任”它之后交换恶意文件）。

要验证您指向的图像是否有效，请打开文件并读取前几个字节。不要*简单*地信任文件扩展名，尽管在打开文件之前先检查它（为了性能和安全）。每种图像格式都有特定的字节模式可供您检查。[JPEG 是](https://en.wikipedia.org/wiki/JPEG_File_Interchange_Format)一个值得一看的好方法。恶意用户仍有可能将 shellcode 或其他攻击代码放入包含正确标头的图像文件中，但要做到这一点要困难得多。这将是一个性能瓶颈，因此如果您实施它，请进行适当的计划。

# python - 使用 __bases__ 作为参数时的正确大小写

> ID：15281534
> 
> 赞同：1
> 
> 时间：2013-03-07T20:54:51.243
> 
> 标签：python, naming, camelcasing

我有一个长而简单的线性层次结构。我的`Grandparent`班级需要`_something`为所有孩子（无论多么遥远）提供一个通用方法，但问题是它需要在`NextClass`完成后调用 a 。

在这种情况下，`NextClass`始终是父级。

这样做是否可以：

```
class Grandparent(object):
    def __init__(self):
        pass

    def _something(self, NextClass):
        print "I did something."
        return NextClass()

class Parent(Grandparent):
    def __init__(self):
        print 'Parent called.'
        super(Parent, self).__init__()

class Child(Parent):
    def __init__(self):
        super(Child, self).__init__()

    def _special_something(self):
        self._something(self.__bases__[0])

'Parent called.'
'I did something.'
'Parent called.' 
```

我如何更好地传达这里发生的事情？

```
def _special_something(self):
    parent_class = self.__bases__[0]
    self._something(parent_class) 
```

这是明确的，但它看起来像一个实例。这打破了命名约定，但我认为更清楚。

```
def _special_something(self):
    ParentClass = self.__bases__[0]
    self._something(ParentClass) 
```

“变量”不应该是驼峰式的，但这是一个变量吗？当一切都是对象时，很难说出规则适用于何处。

# excel - vba 在遍历集合时从集合中删除

> ID：15281539
> 
> 赞同：1
> 
> 时间：2013-03-07T20:55:03.557
> 
> 标签：excel, vba

我所拥有的是一列，我在其中使用了匹配函数来生成找到值的位置。所以该列中的每个单元格都会有一个位置值。前任。3, 4, 5, #N/A, 7, 8, etc. 保存一些带有“#N/A”值的单元格。

我的目标是生成一个包含这些缺失集合值的集合。例如，根据上面的示例，我的集合将具有值“6”。我目前的方法是用所有可能的位置填充一个集合，然后循环遍历列并根据列单元格的值删除。

```
Dim arrPos As New Collection
Dim bottomRow, matchRow As Long
bottomRow = Range("A" & Rows.Count).End(xlUp).Row
matchRow = Range("C" & Rows.Count).End(xlUp).Row

' fill collection
For i = 3 To bottomRow
arrPos.Add i
Next i

' remove selects
For h = 3 To matchRow
    For g = 1 To arrPos.Count
    If Range("C" & h).Value = arrPos(g) Then
    arrPos.Remove (g)
    End If
    Next g
Next h 
```

我的问题是，我似乎无法在循环中根据索引删除。我在声明中遇到`Run-time error '9': Subscript out of range`错误。`If`我猜这是因为我在循环中删除并且索引不断重新排序。那么为什么问题是如何在循环中实现这些删除，或者是否有更好的方法来实现我正在尝试的内容。

请注意，这些匹配结果并非完全按照升序或降序排列。所以它实际上看起来更像“5, 8, 4, 3, 7, #N/A, etc.”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T20:58:29.960

您应该从最后一个位置开始，然后倒数：

```
For h = matchRow To 3 Step -1
    For g = arrPos.Count To 1 Step -1
        If Range("C" & h).Value = arrPos(g) Then
            arrPos.Remove (g)
        End If
    Next g
Next h 
```

# servicestack - 在哪里创建 MySql 表 ServiceStack 和 OrmLite

> ID：15281542
> 
> 赞同：2
> 
> 时间：2013-03-07T20:55:14.957
> 
> 标签：servicestack, ormlite-servicestack

我只是想知道应该在何时何地为持久化应用程序创建表。我已经在 Global.asax.cs 中注册了我的数据库连接工厂：

```
container.Register<IDbConnectionFactory>(new OrmLiteConnectionFactory(conn, MySqlDialectProvider.Instance)); 
```

我也明白我需要使用 OrmLite API 从我定义的类创建表。因此，例如创建我的用户类：

```
 public class User
    {
        [AutoIncrement]
        public int Id { get; set; }

        public string Name { get; set; }

        [Index(Unique = true)]
        public string Email { get; set; }

        public string Country { get; set; }

        public string passwordHash { get; set; }

        public DateTime Dob { get; set; }

        public Sex Sex { get; set; }

        public DateTime CreatedOn { get; set; }

        public Active Active { get; set; }
    } 
```

我将执行以下操作：

```
Db.CreateTable<User>(false); 
```

我有很多需要创建的表。我应该创建一个单独的类，首先像这样创建我的所有表，还是在每次对`UserService`.

也可以直接在我的数据库中创建我的所有表，用相应的类命名每个表，然后 Orm 会自动将类与现有表匹配？

对不起，这让我有点困惑。感谢你给与我的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T21:31:55.757

我将在其中创建它们，`AppHost.Configure()`它仅由 Startup 上的单个主线程运行，该主线程保证在提供任何请求之前完成。

如果您愿意，您可以通过使用反射来查找所有需要创建的类型并调用非泛型 API 版本来自动执行此操作：

```
db.CreateTable(overwrite:false, typeof(Table1));
db.CreateTable(overwrite:false, new[] { typeof(Table1), typeof(Table2, etc }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T21:47:29.273

**是否可以直接在我的数据库中创建我的所有表，用相应的类命名每个表，然后 Orm 会自动将类与现有表匹配？**

您不必使用 OrmLite 来创建表格。如果表已经存在于您的 MySQL 数据库中（或者您想使用 MySQL 接口创建），只要类名与表名相同，您就可以访问它们。如果表名与类名不匹配，请使用`Alias`属性

```
[Alias("Users")] //If table name is Users
public class User
{
    public int Id {get;set;}
} 
```

我不会在您的服务中创建表格。一般来说，我会`AppHost.Configure method`在应用程序启动时运行它。这样做将在每次启动应用程序时尝试创建表（可能每天一次 - 请参见[此处](https://softwareengineering.stackexchange.com/questions/141930/why-does-iis-default-to-recycling-the-application-pool-every-1740-minutes)），因此您可能希望在配置文件中设置一个标志来检查创建表。

# java - Java中的按钮数组问题

> ID：15281548
> 
> 赞同：-2
> 
> 时间：2013-03-07T20:55:32.420
> 
> 标签：java, android, arrays, button

所以我正在编写一个 Java 应用程序，我使用了一个 for 循环来设置按钮的宽度和高度。

```
for (int count = 0; count < 9; count++) {
    board[count].Height(ht);
    board[count].Width(wt);
 } 
```

这段代码有效，但后来我疯狂地应用这样的尺寸。

```
board[0&1&2&3&4&5&6&7&8&9].Height(ht);
board[0&1&2&3&4&5&6&7&8&9].Width(wd); 
```

但它只适用于按钮[0]。这是为什么？

此外，是否有比 for 循环更好的方法来更改按钮尺寸？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T20:58:19.693

您的代码不是选择所有按钮，而是执行大量位与操作（`&`是 Java 的位与运算符）：

```
board[0&1&2&3&4&5&6&7&8&9] 
```

此处的位与运算将评估为零（0 & 任何东西都是 0）。您需要使用`for`循环将操作应用于所有按钮。

# jquery - 我的 div 没有重定向

> ID：15281550
> 
> 赞同：-1
> 
> 时间：2013-03-07T20:55:34.500
> 
> 标签：jquery, redirect

[http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js](http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js)

```
$(".myBox").click(function(){

window.location=$(this).attr("http://google.com");

return false;
});

div width="200px" height="200px" class="myBox">ggg
div 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T21:02:58.923

这是一个工作示例

[http://jsfiddle.net/axqCK/1/](http://jsfiddle.net/axqCK/1/)

$(函数(){

```
 $(".myBox").click(function(){
       window.location="http://bing.com";
       return false;
   }); 
```

});

请记住，某些网站（例如 Google）不允许您在框架内加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T21:03:08.417

假设`div`您单击的中有一个属性（我想不出一个`div`元素的有效属性来包含一个`href`值，但无论如何）：

```
<!-- the following is an invalid use of a `href` attribute, please never do this -->
<div class="myBox" href="http://google.com/">http://google.com/</div>

$(".myBox").click(function(){
    var newURL = $(this).attr('href'),
        newWindow = window.open(newURL, 'newWindowName');
    return false;
}); 
```

如果您正在使用自定义`data-*`属性（如果您正在这样做，您应该这样做）：

```
<div class="myBox" data-href="http://google.com/">http://google.com/</div>

$(".myBox").click(function(){
    var newURL = $(this).data('href'),
        newWindow = window.open(newURL, 'newWindowName');
    return false;
}); 
```

如果您使用的*文本*`div`：

```
<div class="myBox">http://google.com/</div>

$(".myBox").click(function(){
    var newURL = $(this).text().trim(),
        newWindow = window.open(newURL, 'newWindowName');
    return false;
}); 
```

您的代码不起作用的原因是这一行：

```
window.location = $(this).attr("http://google.com"); 
```

`attr()`是 getter 或 setter；获取属性的*值*：

```
window.location = $(this).attr('nameOfAttribute'); 
```

要*设置*属性的值：

```
window.location = $(this).attr('nameOfAttribute', 'valueOfAttribute'); 
```

您在代码中试图*检索*属性的值`http://google.com`；不用说，它不存在。

参考：

*   [`attr()`](http://api.jquery.com/attr/).
*   [`data()`](http://api.jquery.com/data/).
*   [`text()`](http://api.jquery.com/text/).
*   [`trim()`](http://api.jquery.com/trim/).

# xml - 将 jstree 与 XML 和 AJAX 一起使用

> ID：15281551
> 
> 赞同：0
> 
> 时间：2013-03-07T20:55:35.610
> 
> 标签：xml, ajax, jstree

我正在尝试使用 jstree 下载 XML 文件并显示它。我正在使用以下语法：

```
<script type="text/javascript">
    $(function () {
        $("#tree").jstree({
            "xml_data": {
                "ajax": {
                    "url": "/Content/test.xml"
                },
                "xsl": "nest"
            },
            "plugins": ["themes", "xml_data", "ui", "types"]
        });
    });
</script> 
```

然而，什么都没有发生。我正在查看控制台，但没有提出任何请求。这是从 github 构建的 PRE 2.0.0。我还尝试了来自官方网站的 1.0.0 Pre Fix 2 版本，并且确实请求但它卡在 Loading... 消息上。

我究竟做错了什么？

# jquery - jquery superfish - onhide 事件触发太快

> ID：15281554
> 
> 赞同：0
> 
> 时间：2013-03-07T20:55:47.857
> 
> 标签：jquery, superfish

我正在使用带有 jquery 的 superfish ( [http://users.tpg.com.au/j_birch/plugins/superfish/#aa](http://users.tpg.com.au/j_birch/plugins/superfish/#aa) ) 来进行菜单控制。几乎所有元素都设置在

*   嵌套在 . 每次关闭超级鱼菜单时，我都想隐藏一个菜单项（我用 .show() 在其他地方显示）。所以，我的 superfish 初始化看起来像这样：

    ```
    $(document).ready(function () {
        $("#menu").superfish({
              delay: 400,
              onHide: function () { $("#HideThis").hide(); }
         });
     }); 
    ```

    但是，它会在 HideThis 悬停时隐藏 HideThis（没有悬停事件绑定到该元素）。这使得菜单项无法使用，因为当您尝试单击它而不是菜单关闭时它会隐藏。似乎没有任何其他事件可以符合我的目的，有什么想法可以通过超级鱼来实现吗？

    我使用的 HTML 如下所示：

    ```
    <ul id="menu">
      <li id="Stuff"><span>Stuff</span>
         <ul>
            <li id="HideThis" ><span>Hide This</span>
               <ul>
                  <li><span>Hidden Stuff</span></li>
               </ul>
            </li>
            <li id="DontHideThis" ><span>Dont Hide This</span></li>
         </ul>
      </li>
    </ul> 
    ```

    编辑：我能够找出问题所在：每次隐藏子菜单时都会触发“onHide”事件，而不仅仅是在整个菜单隐藏时（有趣的是，它也会在菜单首次显示时触发；所以 onHide 发生的频率更高超出您的预期）。所以，我最终不得不像这样过滤 onHide：

    ```
    $(document).ready(function () {
       $("#menu").superfish({
          delay: 400,
          onHide: function () { if ($('ul.sf-menu li.sfHover').length == 0) $("#HideThis").hide(); }
       });
    }); 
    ```

    并且“if”语句仅在所有菜单都折叠时才成立。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T10:08:41.077

你最好为这种事情创建一个 jsFiddle。[我在这里为你做了一个，](http://jsfiddle.net/tBZPe/5/)并添加了一些粗略的样式，以及一个`.sf-menu`用于悬挂所述样式的类。从我所见，您的代码似乎可以按照您的意愿工作。如果这没有帮助，请随时描述我所缺少的。

# python - 列表中的python随机序列

> ID：15281558
> 
> 赞同：0
> 
> 时间：2013-03-07T20:55:52.310
> 
> 标签：python

例如，如果我有一个范围从 0 到 9 的列表。我将如何使用 random.seed 函数从该数字范围中随机选择？还有我如何定义结果的长度。

```
import random

l = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
a = 10
random.seed(a)
length = 4

# somehow generate random l using the random.seed() and the length.
random_l = [2, 6, 1, 8] 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-07T20:59:33.527

使用[`random.sample`](http://docs.python.org/3/library/random.html#random.sample). 它适用于任何序列：

```
>>> random.sample([0, 1, 2, 3, 4, 5, 6, 7, 8, 9], 4)
[4, 2, 9, 0]
>>> random.sample('even strings work', 4)
['n', 't', ' ', 'r'] 
```

与`random`模块中的所有函数一样，您可以像往常一样定义种子：

```
>>> import random
>>> lst = list(range(10))
>>> random.seed('just some random seed') # set the seed
>>> random.sample(lst, 4)
[6, 7, 2, 1]
>>> random.sample(lst, 4)
[6, 3, 1, 0]
>>> random.seed('just some random seed') # use the same seed again
>>> random.sample(lst, 4)
[6, 7, 2, 1]
>>> random.sample(lst, 4)
[6, 3, 1, 0] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T21:02:44.393

```
import random

list = [] # your list of numbers that range from 0 -9

# this seed will always give you the same pattern of random numbers.
random.seed(12) # I randomly picked a seed here; 

# repeat this as many times you need to pick from your list
index = random.randint(0,len(list))
random_value_from_list = list[index] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-10T11:01:50.100

如果您`numpy`已加载，则可以使用`np.random.permutation`. 如果你给它一个整数作为参数，它会返回一个包含来自的元素的混洗数组`np.arange(x)`，如果你给它一个类似对象的列表，则元素会被混洗，如果是`numpy`数组，则复制数组。

```
>>> import numpy as np
>>> np.random.permutation(10)
array([6, 8, 1, 2, 7, 5, 3, 9, 0, 4])
>>> i = list(range(10))
>>> np.random.permutation(i)
array([0, 7, 3, 8, 6, 5, 2, 4, 1, 9]) 
```

# d3.js - 如何在地图上显示状态信息

> ID：15281559
> 
> 赞同：1
> 
> 时间：2013-03-07T20:55:54.317
> 
> 标签：d3.js

我在geojson中制作了一张加拿大地图。我对d3和geojson真的很陌生。我想在地图上显示状态信息。我应该如何划分地图？

我的加拿大地图代码是

```
 <script type="text/javascript">
      var w = 1560;
      var h = 900;

      var proj = d3.geo.mercator();

      var path = d3.geo.path().projection(proj);

      var t = proj.translate(); // the projection's default translation
      var s = proj.scale() // the projection's default scale

      var map = d3.select("#vis").append("svg:svg")
        .attr("width", w)
        .attr("height", h)
        .call(d3.behavior.zoom().on("zoom", redraw));

      var axes = map.append("svg:g").attr("id", "axes");

      var xAxis = axes.append("svg:line")
        .attr("x1", t[0])
        .attr("y1", 0)
        .attr("x2", t[0])
        .attr("y2", h);

      var yAxis = axes.append("svg:line")
        .attr("x1", 0)
        .attr("y1", t[1])
        .attr("x2", w)
        .attr("y2", t[1]);

      var uk = map.append("svg:g").attr("id", "uk");

      d3.json("uk.json", function (json) {
          uk.selectAll("path")
          .data(json.features)
        .enter().append("svg:path")
          .attr("d", path);
      });

      function redraw() {
          // d3.event.translate (an array) stores the current translation from the parent SVG element
          // t (an array) stores the projection's default translation
          // we add the x and y vales in each array to determine the projection's new translation
          var tx = t[0] * d3.event.scale + d3.event.translate[0];
          var ty = t[1] * d3.event.scale + d3.event.translate[1];
          proj.translate([tx, ty]);

          // now we determine the projection's new scale, but there's a problem:
          // the map doesn't 'zoom onto the mouse point'
          proj.scale(s * d3.event.scale);

          // redraw the map
          uk.selectAll("path").attr("d", path);

          // redraw the x axis
          xAxis.attr("x1", tx).attr("x2", tx);

          // redraw the y axis
          yAxis.attr("y1", ty).attr("y2", ty);
      }
  </script> 
```

你能告诉我该怎么做吗？

请指导我。

我对d3真的很陌生。

# java - 方法 wait() 和 notifyAll() 不是静态的

> ID：15281566
> 
> 赞同：3
> 
> 时间：2013-03-07T20:56:07.263
> 
> 标签：java, multithreading, wait, producer-consumer, notify

```
public synchronized  static int get() {
    while(cheia()==false){
        try{
            wait();
          }
        catch(InterruptedException e){
        }
    }

    if (fila[inicio] != 0) {
        int retornaValor = fila[inicio];
        fila[inicio] = 0;
        inicio++;
        if (inicio == size) {
            inicio = 0;
        }
        notifyAll();
        return retornaValor;
    }
    notifyAll();
    return 0;
} 
```

为什么 wait() 和 notifyAll() 在这段代码中没有运行？

IDE说：方法wait（）（或notifyAll）不是静态的？

你能帮助我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T20:58:09.140

这是因为您在一个静态方法中，这意味着该方法是在类实例而不是对象实例上执行的。 `wait`并且`notify`是实例方法。

而是创建一个对象锁，并使用它来执行同步和信令。

```
private static final Object lock = new Object();

public static int get(){
   synchronized(lock){
      lock.wait();
      lock.notify();
      ...etc
   } 
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-09-10T01:57:49.623

同步静态方法锁在 Class 对象上，所以很自然地，你可以这样做：

```
[youclass].class.wait();
[youclass].class.notify(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T20:58:35.627

您正在调用非静态方法，例如静态方法`wait()`或`notifyAll()`从静态方法调用。你不能做这个。将您的 get 方法更改为此

```
public synchronized int get() 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-07T20:57:51.107

你期望它有什么`wait`用？您必须等待通知某些特定对象，并且这里没有对象。

# asp.net-mvc - viewModels 如何适应 ASP .NET MVC 的 WebApi 实现？

> ID：15281570
> 
> 赞同：0
> 
> 时间：2013-03-07T20:56:16.373
> 
> 标签：asp.net-mvc, asp.net-mvc-3, web-applications, asp.net-mvc-4, asp.net-web-api

现在我的项目有几层：Core <> Repository <> API... 我将构建一个“客户端”MVC Web 项目层。我的问题是——视图模型在这个架构中属于哪里？

Web项目的控制器方法是否应该调用API（多次-getTheseObjects、getThoseObjects）来获取数据，然后构建viewModel？或者 API 是否应该支持调用来构造 viewModel，以便应用程序的每个页面只需要进行一次 API 调用 (getAllObjectsForThisPage)？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T21:40:18.813

您的视图模型将属于您的客户端 MVC 应用程序。它们将特定于该单个客户端应用程序中的视图，并且通常由域对象填充。这就是它的工作方式：控制器调解 https 请求，从而调用 API 端点并接收一些数据或域对象，然后您使用这些数据或域对象来填充您的视图模型。

如果您从 api 返回域对象，请查看[automapper ，它确实有助于将域对象映射到视图模型。](https://github.com/AutoMapper/AutoMapper)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T22:02:36.683

您可以将 ViewModel 放入您的 MVC 应用程序中，但您可以创建称为 DTO（数据转换对象）的东西并将其从 Web API 返回到您的客户端。本质上，它将是一个只包含您传递给客户端的必要信息的类。如果您想调用该 ViewModel，您不妨继续这样称呼它。我的建议是拨打一个电话并返回所有必要的信息。一打电话一程。

我的做法通常是将 ViewModel 从 MVC 中分离出来，并将其存储在其他项目中。服务层将准备一个 ViewModel 并将其返回给 MVC。这样做的原因是，一旦我需要在 MVC 完成后构建 WPF 应用程序。移动东西并重新测试一切以确保它仍然可以正常工作是一件非常痛苦的事情。

# delegates - 委托和 websocket 在幕后是否相似？

> ID：15281571
> 
> 赞同：0
> 
> 时间：2013-03-07T20:56:17.130
> 
> 标签：delegates, websocket, push

我只是想弄清楚这两件事是如何工作的。显然 websocket 使用推送技术，因此客户端不必进行长轮询，或者不断刷新并检查是否发生了变化（有点像事件监听器）。

但是对于委托，就像在目标 C 中一样，委托是通过一遍又一遍地发送请求来不断检查是否已触发方法。还是将方法已被触发的信息推送给了代表？

或者我关于委托的第三个理论是，因为它们当然在同一个程序中，所以这两个类（协议和委托类）总是有一个“开放连接”，有点像轮询。还是像我的第二段那样，信息真正被推送了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T23:58:18.507

WebSockets 是基于双向全双工消息的通信通道。许多推送技术可以获得较低的服务器到客户端（浏览器）延迟，但使用 WebSockets，您还可以获得较低的客户端到服务器延迟（因此也可以降低往返延迟）。

根据我的阅读（我不是 Objective-C 专家），委托只是在对象之间创建松散协议（在对象意义上，而不是网络意义上）的一种方式。我不知道实施细节，但我确定没有进行轮询。委托方法可能只是在需要时查找。不需要“打开连接”或轮询。将委托视为进行函数/方法调用的一种方式，而不是网络传输（如 WebSockets）。这个[Apple 文档](http://developer.apple.com/library/ios/#documentation/General/Conceptual/CocoaEncyclopedia/DelegatesandDataSources/DelegatesandDataSources.html)更详细地介绍了。

# android - 通过意图打开 Samsung S Planner 时出现异常

> ID：15281573
> 
> 赞同：2
> 
> 时间：2013-03-07T20:56:37.717
> 
> 标签：android, android-intent, nullpointerexception

我正在尝试打开已安装的日历应用程序，以便用户可以输入新事件。我使用以下在 Nexus 和许多其他设备上运行良好的意图。

```
Intent intent = new Intent(Intent.ACTION_EDIT);
intent.setType("vnd.android.cursor.item/event"); 
```

到目前为止，唯一的问题是安装了 S Planner 日历应用程序的三星设备。执行意图时，LogCat 中会显示以下异常，并且 S Planner 应用程序严重崩溃（带有系统错误对话框）。

```
java.lang.RuntimeException: Unable to start activity ComponentInfo{com.android.calendar/com.android.calendar.event.EditEventActivity}: java.lang.NullPointerException
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2110)
    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2135)
    at android.app.ActivityThread.access$700(ActivityThread.java:140)
    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1237)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:137)
    at android.app.ActivityThread.main(ActivityThread.java:4921)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:511)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1027)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:794)
    at dalvik.system.NativeStart.main(Native Method)
    Caused by: java.lang.NullPointerException
    at com.android.calendar.CalendarEventModel.(CalendarEventModel.java:406)
    at com.android.calendar.event.EditEventFragment.onAttach(EditEventFragment.java:548)
    at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:787)
    at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:1035)
    at android.app.BackStackRecord.run(BackStackRecord.java:635)
    at android.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1399)
    at android.app.Activity.performStart(Activity.java:5215)
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2083)
    ... 11 more 
```

在试图追查中发生的事情时，我在[公开可用的资源](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android-apps/4.1.2_r1/com/android/calendar/CalendarEventModel.java#CalendarEventModel.%3Cinit%3E%28android.content.Context%2Candroid.content.Intent%29)`CalendarEventModel`中没有找到任何线索。

有人知道如何正确启动 S Planner 来创建新事件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T22:12:23.743

感谢各种回复。我已经想通了。S Planner 需要设置开始和结束日期。否则它会崩溃。

```
Intent intent = new Intent(Intent.ACTION_INSERT).setData(Events.CONTENT_URI)
    .putExtra(CalendarContract.EXTRA_EVENT_BEGIN_TIME, beginTime.getMillis())
    .putExtra(CalendarContract.EXTRA_EVENT_END_TIME, endTime.getMillis());

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T21:59:59.990

我创建了这个用于创建日历事件的实用程序类，希望你觉得它有用：

```
public class CalendarOrganizer {
    private final static int ICE_CREAM_BUILD_ID = 14;
    /**
     * Creates a calendar intent going from startTime to endTime
     * @param startTime
     * @param endTime
     * @param context
     * @return true if the intent can be handled and was started, 
     * false if the intent can't be handled
     */
    public static boolean createEvent(long startTime, long endTime, String title, String description, 
            String location, boolean isAllDay, Context context) {
        Intent intent = new Intent(Intent.ACTION_EDIT);
        int sdk = android.os.Build.VERSION.SDK_INT;
        if(sdk < ICE_CREAM_BUILD_ID) {
            // all SDK below ice cream sandwich
            intent.setType("vnd.android.cursor.item/event");
            intent.putExtra("beginTime", startTime);
            intent.putExtra("endTime", endTime);
            intent.putExtra("title", title);
            intent.putExtra("description", description);
            intent.putExtra("eventLocation", location);
            intent.putExtra("allDay", isAllDay);

//          intent.putExtra("rrule", "FREQ=YEARLY");
        } else {
            // ice cream sandwich and above
            intent.setType("vnd.android.cursor.item/event");
            intent.putExtra(CalendarContract.EXTRA_EVENT_BEGIN_TIME, startTime);
            intent.putExtra(CalendarContract.EXTRA_EVENT_END_TIME, endTime);
            intent.putExtra(Events.TITLE, title);
            intent.putExtra(Events.ACCESS_LEVEL, Events.ACCESS_PRIVATE);
            intent.putExtra(CalendarContract.EXTRA_EVENT_ALL_DAY , isAllDay);
            intent.putExtra(Events.DESCRIPTION, description);
            intent.putExtra(Events.EVENT_LOCATION, location);

//          intent.putExtra(Events.RRULE, "FREQ=DAILY;COUNT=10") 
        }
        try {
            context.startActivity(intent);
            return true;
        } catch(Exception e) {
            return false;
        }
    }
} 
```

# linux - 使用 UNIX 或 perl 从文本文件的每一行中提取某些文本

> ID：15281582
> 
> 赞同：0
> 
> 时间：2013-03-07T20:56:57.013
> 
> 标签：linux, unix, text-processing

我有一个带有如下行的文本文件：

```
Sequences (1:4) Aligned. Score:  4
Sequences (100:3011) Aligned. Score: 77
Sequences (12:345) Aligned. Score: 100
... 
```

我希望能够将值提取到一个新的制表符分隔的文本文件中：

```
1 4 4
100 3011 77
12 345 100 
```

（像这样，但使用制表符而不是空格）

任何人都可以提出任何建议吗？也许是 sed 或 cut 的某种组合？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T21:00:03.943

您可以使用 Perl：

```
cat data.txt | perl -pe 's/.*?(\d+):(\d+).*?(\d+)/$1\t$2\t$3/' 
```

或者，保存到文件：

```
cat data.txt | perl -pe 's/.*?(\d+):(\d+).*?(\d+)/$1\t$2\t$3/' > data2.txt 
```

* * *

**小解释：**

这里的正则表达式是这样的：

```
s/RULES_HOW_TO_MATCH/HOW_TO_REPLACE/ 
```

如何匹配 = .*?(\d+):(\d+).*?(\d+)

如何替换 = $1\t$2\t$3

在我们的例子中，我们使用以下标记来声明我们希望如何匹配字符串：

*   .*? - 尽可能多地匹配任何字符 ('.') ('*')，只要该字符不匹配正则表达式中的下一个标记（在我们的例子中是 \d）。

*   \d+:\d+ - 匹配至少一个数字后跟冒号和另一个数字

*   .*? - 同上

*   \d+ - 匹配至少一位数字

此外，如果正则表达式中的某些标记在括号中，则表示“保存它以便我以后可以引用它”。第一个括号将被称为“$1”，第二个被称为“$2”等。在我们的例子中：

```
.*?(\d+):(\d+).*?(\d+)
     $1    $2      $3 
```

最后，我们将 $1、$2、$3 打印出来，并用制表符 (\t) 分隔：

```
$1\t$2\t$3 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T21:02:17.533

你可以使用 sed：

```
sed 's/[^0-9]*\([0-9]*\)/\1\t/g' infile 
```

这是一个 BSD sed 兼容版本：

```
sed 's/[^0-9]*\([0-9]*\)/\1'$'\t''/g' infile 
```

上述解决方案在输出中留下一个尾随标签，附加`s/\t$//`或`s/'$'\t''$//`分别删除它。

如果您知道每行总是有 3 个数字，则可以使用 grep：

```
<infile grep -o '[0-9]\+' | paste - - - 
```

所有情况下的输出：

```
1       4       4       
100     3011    77      
12      345     100 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T21:04:03.697

我的解决方案使用`sed`：

```
sed 's/\([0-9]*\)[^0-9]*\([0-9]*\)[^0-9]*\([0-9]\)*/\1     \2      \3/g' file.txt 
```

# javascript - 如何使用jQuery检查不在DOM中的元素是否可见

> ID：15281583
> 
> 赞同：0
> 
> 时间：2013-03-07T20:57:00.023
> 
> 标签：javascript, jquery, html, dom, visible

似乎不在 DOM 中的元素被认为是隐藏的，不管 CSS 应用于这些元素

例如，将以下内容放在 Chrome 控制台中的计算结果为`false`：

```
$('<div style="display: block;">i am a div</div>').is(":visible") 
```

有什么方法可以检查像上面这样的分离元素是否可见。我不只是想检查`display`css 属性是`block`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T21:00:09.427

这取决于您要执行的操作，但最简单的方法是将其附加以进行检查：

```
var $div = $("<div>");
$div.appendTo("body").is(":visible");
$div.detach(); 
```

如果此检查对您来说是禁止的，您可以同时检查`display`和`visibility`CSS 以分别检查它们是否不是`none`和`hidden`，并且该`hidden`属性未设置。您也可以执行类似设置`position: fixed; top: 100%`的操作并执行上述测试。

编辑：似乎 jQuery 的隐藏检查是：

```
jQuery.css( elem, "display" ) === "none"
|| !jQuery.contains( elem.ownerDocument, elem ) 
```

所以你可以去掉那里的第二行来做一个等效的检查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T21:00:46.523

[**你当然可以**](http://jsfiddle.net/bevacqua/JTTg2/)

```
var foo = $('<div style="display: block;">i am a div</div>');
foo.appendTo('body');

var vis = foo.is(":visible");

console.log(vis);

foo.detach(); 
```

不过，不知道你为什么想尝试这个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T21:00:20.393

尝试这个：

```
$('<div style="display: block;">i am a div</div>').css("display")!="none" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T21:00:49.940

如果一个元素未附加到 DOM，则浏览器不会将其视为可见，因为简单地说它没有可能影响其可见性的父元素

# sed - 带有 $ 符号的 sed 变量

> ID：15281587
> 
> 赞同：1
> 
> 时间：2013-03-07T20:57:12.273
> 
> 标签：sed

我确定以前有人问过这个问题，如果有，我很抱歉，但我找不到。

我试图用 dovecot SHA512-CRYPT 密码替换下面的“mypassword”，但美元符号搞砸了，我不知道如何逃脱它。

生成的密码`doveadm pw -s SHA512-CRYPT -p ${rootemailpw}`如下所示，其中包含几个美元符号：

```
{SHA512-CRYPT}$6$sujue1sr0abLZisA$Dq1qtz422woyR/A4wDaJ9JYByKHis27FO.mO5EfUCDuI/PRSawxgCRGA3Oq/LE4Nbr32nCr4731BCPIotmRNR0 
```

这是我正在使用的脚本：

```
rootemailpw=$(</dev/urandom tr -dc A-Za-z0-9 | head -c12)
rootpw=$(doveadm pw -s SHA512-CRYPT -p ${rootemailpw})

cat <<'EOF' > tmp
USE `postfix`;
INSERT INTO `users` (`username`,`password`) VALUES ('root@localhost','mypassword');
EOF

sed -i "s/mypassword/${rootpw}/" tmp 
```

那么如何正确地转义 $ 符号`s/mypassword/${rootpw}/`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T21:43:06.517

SHA 哈希可能包含斜杠字符 ( `/`)，这是通常的 sed 分隔符。`sed`支持大多数分隔符，因此一种解决方法是使用不同的分隔符，例如管道字符 ( `|`)：

```
pw=$(doveadm pw -s SHA512-CRYPT -p somepassword)
echo password | sed "s|password|$pw|" 
```

输出：

```
{SHA512-CRYPT}$6$qtXJPWaMbX3l8zMW$mXWuax8NG9Wa1AkFdcClA5vw2T3407uBdImKNNbcBd/CUkS5NafjZnQ5ow.IubyLujU5ohS8PWogdNoPiF4d// 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T21:19:47.387

在 ./tmp 中使用以下内容：

```
USE `postfix`;
INSERT INTO `users` (`username`,`password`) VALUES ('root@localhost','mypassword'); 
```

执行`rootpw='1234$asdf' ; cat tmp | sed "s/mypassword/${rootpw}/"`会将*mypassword替换为**${rootpw}*的内容，如下所示：

```
USE `postfix`;
INSERT INTO `users` (`username`,`password`) VALUES ('root@localhost','1234$asdf'); 
```

为了：

1.  `rootpw='1234$asdf'`设置环境变量
2.  `cat tmp | sed "s/mypassword/${rootpw}/"`用“1234$asdf”替换*mypassword*

在变量上使用单引号。

这是否回答你的问题？

# spring - WebLogic 12c Domain Home Classpath 资源在 Windows 上抛出 FileNotFoundException 而不是 Linux

> ID：15281591
> 
> 赞同：2
> 
> 时间：2013-03-07T20:57:36.760
> 
> 标签：spring, classpath, weblogic12c

我正在创建一个需要在 Weblogic 12c 上运行的 Web 应用程序。该应用程序被设置为具有一个由用户提供的外部 XML 配置文件，使用 Spring ClasspathResource bean（即`<bean id="myResource" value="config.xml>`）读取。在 linux 环境中，当文件放在`DOMAIN_HOME`. 但是，当我在 Windows 环境中尝试相同的操作时，我会在尝试访问 Resource 实例时立即收到 FileNotFoundException。WebLogic 安装来自同一个 jar 可执行安装程序，并且完全相同，所以我似乎无法弄清楚为什么这在 Windows 上不起作用。我将不胜感激任何帮助......只是为了澄清，我知道我可以通过通知用户设置`CLASSPATH`环境变量来在 Windows 上解决这个问题，但我宁愿不这样做。

# php - 在codeigniter的mysql表中上传图像和数据

> ID：15281597
> 
> 赞同：0
> 
> 时间：2013-03-07T20:58:01.537
> 
> 标签：php, codeigniter

我正在尝试上传带有汽车制造商、年份、租赁和付款数据的图像以及图像上传。我的图像路径也被插入到数据库中，但我仍然不知道如何将两者结合起来。我得到一个`error Array to string conversion`并且它没有输入我的数据和图像上传。

汽车表：

```
car_make | car_model | car_year | car_lease | car_payment | imgpath
acura    | G37 Sedan |   2009   |  48       |   350       |  assets/images/acura_1.jpg 
```

控制器：

```
public function car_validation_do_upload() {

        $this->load->library('form_validation');

        $this->form_validation->set_rules('car_make', 'Car Make', 'required');
        $this->form_validation->set_rules('car_model', 'Car Model', 'required');
        $this->form_validation->set_rules('car_year', 'Car Year', 'required');
        $this->form_validation->set_rules('car_lease', 'Car Lease', 'required');
        $this->form_validation->set_rules('car_payment', 'Car Payment', 'required');

        if($this->form_validation->run() == TRUE) {

            $config['upload_path'] = './assets/images/';
            $config['allowed_types'] = 'gif|jpeg|jpg|png';
            $this->load->library('upload', $config);

            $newRow = array("car_make" => $this->input->post('car_make'),
                        "car_model" => $this->input->post('car_model'),
                        "car_year" => $this->input->post('car_year'),
                        "car_lease" => $this->input->post('car_lease'),
                        "car_payment" => $this->input->post('car_payment'));

            $data = array('upload' => $this->upload->data());

            $result = array_merge($newRow, $data);

        $this->load->model("model_users");

        $this->model_users->insert1($result);   
        $this->session->set_flashdata('message', 'car inserted into database!');
        redirect('main/insertCar');

    }

    else {
    $this->load->view('insert_car');
    }

    }

Model:
public function insert1($data) {

        $this->db->insert("cars", $data);
        }

View
<?php 

    //echo form_open('main/car_validation_insert');
    echo form_open_multipart('main/car_validation_do_upload');  
        echo validation_errors();

        if($this->session->flashdata('message')){
  echo $this->session->flashdata('message');
  }
    ?>

    <table width="504" style="margin-left:15px;">
<tr>
<td colspan="2"><p class="table-title">Insert Car</p></td>
<td></td>

</tr>

<tr>
<td>Car Make: </td>
<td><input type="text" name="car_make" class="textbox" tabindex="1"/></td>
<td>&nbsp;&nbsp;&nbsp;</td>

</tr>
<tr>
  <td>Car Model:</td>
  <td><input type="text" name="car_model" class="textbox" tabindex="2"/></td>
  <td>&nbsp;</td>

</tr>
<tr>
  <td>Car Year:</td>
  <td><input type="text" name="car_year" class="textbox" tabindex="3"/></td>
  <td>&nbsp;</td>

</tr>
<tr>
  <td>Car Lease:</td>
  <td><input type="text" name="car_lease" class="textbox" tabindex="4"/></td>
  <td>&nbsp;</td>

</tr>
<tr>
  <td>Car Payment:</td>
  <td><input type="text" name="car_payment" class="textbox" tabindex="5"/></td>
  <td>&nbsp;</td>

</tr>

<tr>
  <td>Car Image:</td>
  <td><input type="file" name="userfile" size="20" /></td>
  <td>&nbsp;</td>

</tr>

<tr>
  <td>&nbsp;</td>
  <td>&nbsp;</td>
  <td>&nbsp;</td>
  <td>&nbsp;</td>
  <td>&nbsp;</td>
</tr>

</table>

<input type="submit" name="submit" value="submit" id="button" class="button" style="margin-left:140px;"  />

<?php

echo form_close();
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T21:42:41.323

改变这个：

```
$data = array('upload' => $this->upload->data());

$result = array_merge($newRow, $data); 
```

对此：

```
 if ($this->upload->do_upload()){
    $image_data = $this->upload->data();
    //this will create a new key with the name upload in your newRow
    //so theres no need to use the function array_merge
    $newRow['imgpath'] ='assets/images/'.$image_data['file_name'];
}
else{
    //do something here
    echo 'error uploading image'
} 
```

$image_data 变量将包含有关您上传的图像的信息

```
 Array
(
    [file_name]    => mypic.jpg
    [file_type]    => image/jpeg
    [file_path]    => /path/to/your/upload/
    [full_path]    => /path/to/your/upload/jpg.jpg
    [raw_name]     => mypic
    [orig_name]    => mypic.jpg
    [client_name]  => mypic.jpg
    [file_ext]     => .jpg
    [file_size]    => 22.2
    [is_image]     => 1
    [image_width]  => 800
    [image_height] => 600
    [image_type]   => jpeg
    [image_size_str] => width="800" height="200"
) 
```

您可以在 codeingiter 的用户指南中找到有关文件上传类的所有信息：http: [//ellislab.com/codeigniter/user-guide/libraries/file_uploading.html](http://ellislab.com/codeigniter/user-guide/libraries/file_uploading.html)

# android - 如何将小部件与背景上的某个位置对齐，并在不同的设备上正确显示？

> ID：15281598
> 
> 赞同：0
> 
> 时间：2013-03-07T20:58:01.817
> 
> 标签：android, android-layout, android-widget, android-edittext, android-ui

我不是设计师，但最近，我被要求为我公司的应用程序更改登录屏幕 UI。

我从设计师那里得到了背景图片。此图像是完整的登录屏幕。这意味着它是一个带有输入框（用户名和密码框）的单个 PNG 文件。

当然，即使它看起来像一个完整的登录屏幕，放在那里也不行，因为输入框是假的。

我试图将`EditText`小部件放在它上面，试图让它放在背景图像上的位置并将这两个小部件背景设置为无，这样用户就不会看到它。但是，在不同的设备上它只是显示不正确。有时在“背景输入框”上方，有时在其下方。无论如何，它不适合那里。

我想知道是否有一种方法可以让我解决这个问题。无论设备如何变化，都让小部件位于背景的确切位置。

这是我现在的布局，希望对您有所帮助：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/mainTableLayout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/pbackground"
    android:stretchColumns="1" >

    <RelativeLayout
        android:id="@+id/relativeLayout1"
        android:layout_width="match_parent"
        android:layout_height="160dp" >

        <EditText
            android:id="@+id/txtBxPassword"
            android:layout_width="wrap_content"
            android:layout_height="30dp"
            android:layout_alignParentBottom="true"
            android:layout_centerHorizontal="true"
            android:layout_marginBottom="10dp"
            android:ems="10"
            android:gravity="center_vertical|center_horizontal|center"
            android:height="33dp"
            android:password="true"
            android:singleLine="true"
            android:width="160dp" >

            <requestFocus />
        </EditText>

        <EditText
            android:id="@+id/txtBxUserID"
            android:layout_width="wrap_content"
            android:layout_height="30dp"
            android:layout_above="@+id/txtBxPassword"
            android:layout_alignLeft="@+id/txtBxPassword"
            android:layout_marginBottom="10dp"
            android:ems="10"
            android:gravity="center_vertical|center_horizontal|center"
            android:height="33dp"
            android:singleLine="true"
            android:width="160dp" />

    </RelativeLayout>
</RelativeLayout> 
```

这是我从 Eclipse 中捕获的图像，如您所见，我`EditText`在背景上输入框的位置放置了两个框。但在真实设备上，它们会放错位置。

![](../Images/b8824f96d9442490dd5abdb164315cee.png)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T21:38:12.420

您应该要求您的设计师为您提供各个元素的文件——例如，挂锁和头像图标本身，以及阴影框本身。将框转换为[九补丁](http://developer.android.com/guide/topics/graphics/2d-graphics.html#nine-patch)，并将其设置为合适布局元素的背景可绘制对象（即每行的容器布局）。

您还希望[每个图像具有多种尺寸以支持不同的像素密度](http://developer.android.com/guide/practices/ui_guidelines/icon_design.html#icon-sets)。

如果你不这样做，你总会有一些设备的屏幕看起来很糟糕。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T21:16:16.400

将linearlayout作为基本布局而不是相对布局......并使用tablerow布局并将小部件放置在其中明智地使用android：layout_margin和android：layout_width和android：layout_height......希望它会有所帮助

# java - 应用程序运行后是否需要 java .class 文件？

> ID：15281600
> 
> 赞同：8
> 
> 时间：2013-03-07T20:58:07.680
> 
> 标签：java, git, classloader

我很难写出这个问题的标题，但这是我的情况和我要问的：

*   我有一个 Java 项目，我在上面运行“ant test”来运行测试
*   运行测试大约需要 10 分钟
*   我可以在运行这些测试的过程中切换到不同的 Git 分支而不会产生任何后果吗？
*   我希望测试针对原始代码完成，并允许我在发生这种情况时简单地在不同的分支上工作。

我想我的问题的根源是：**加载并运行应用程序后是否需要 .class 文件？** 类只是存储在内存中，我不再需要文件系统上的文件了吗？还是它仍然访问/读取文件系统上的东西？

任何洞察或更好地理解 java 对运行应用程序的需求都值得赞赏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T21:01:29.190

类是按需加载的。在引用该类之前，类加载器不会尝试加载该类。因此，在运行过程中从类路径中删除类文件几乎肯定会导致失败。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T21:00:48.200

如果您在测试运行时不将从 Git 获取的 .java 文件编译到同一位置，那么 .class 文件不会有问题 - 无论 IDE 如何加载类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T21:11:13.267

好吧，我认为您必须退后一步并重新考虑解决方案。

您写道，您执行集成测试。作为测试的一部分，您正在切换经过测试的源。如果这样做，您将产生无用的测试数据，因为您无法确定真正执行了什么。

如果您想测试软件的两个不同的 vrsion / 分支，只需启用两个测试运行并比较结果。

如果您使用过 *.class 文件，您只能确定它已加载。加载类文件后，它留在 JVM 的内存中。如果一段时间未使用并且 GEM 空间变低，它可能会被卸载（但我不这么认为）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T21:02:32.677

在标准（我的意思是 sun/oracle）JVM 中，一旦加载了一个类，它就会留在内存中，直到 jvm 关闭，但它可能尚未加载，因为类是按需加载的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-07T21:02:35.320

如果所有文件都已加载到内存中，则不需要...但是您如何确保所有类都已加载到内存中...所以您需要类路径中的类文件

# ruby-on-rails - 遍历 Rails lib 文件夹以查找子文件夹

> ID：15281607
> 
> 赞同：0
> 
> 时间：2013-03-07T20:58:28.083
> 
> 标签：ruby-on-rails

以下代码旨在确定要执行自身的哪个子类。它循环遍历 ObjectSpace 中的所有内容以查找子类，然后从那里执行正确的子类。在 Rails 中，这不起作用，因为库文件夹中的类不在 ObjectSpace 中。什么是在特定文件夹中搜索子类的方法？

```
def execute
  ObjectSpace.each_object(Class).select do |klass|
    if (klass < self.class)
      klass.designations.each do |designation|
        if (designation.downcase.capitalize == @action.downcase.capitalize)
          command = klass.new(@sumo_params)
          command.execute
        end
      end
    end
  end
end 
```

或者——你会推荐这个问题的更好的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T21:06:43.367

我会说为此使用一个模块。因此，这将使您编写如下代码：

库/base_methods.rb

```
module BaseMethods

  def self.included(base)
    @@classes_including ||= []
    @@classes_including << base
  end

  def do_whatever
    @@classes_including.each do |class|
      #....
    end
  end

end 
```

lib/class_1.rb

```
class Class1
  include BaseMethods
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T14:27:31.923

我现在采取了简单的方法（遍历字符串值数组）：

```
def execute
  @descendants.each do |descendant|
    klass = descendant.downcase.capitalize.constantize
    if (klass < self.class)
      klass.designations.each do |designation|
        if (designation.downcase.capitalize == @action.downcase.capitalize)
          command = klass.new(@sumo_params)
          command.execute
        end
      end
    end
  end
end 
```

# php - 我如何判断当前交易是否会改变任何具有 Doctrine 2 的实体？

> ID：15281614
> 
> 赞同：5
> 
> 时间：2013-03-07T20:58:44.143
> 
> 标签：php, mysql, doctrine-orm

我正在使用 Doctrine 来保存用户数据，并且我想要一个`last modification`字段。这是用户按下后我希望如何保存表单的伪代码`Save`：

*   开始交易
*   做了很多事情，可能是查询数据库，也可能不是
*   如果此交易有任何改变
    *   修改`last updated`字段
*   提交事务

有问题的部分是`if anything will be changed by this transaction`。Doctrine 可以给我这样的信息吗？

如何判断当前交易中的实体是否发生了变化？

**编辑**

只是为了澄清问题，我正在尝试修改一个`lastUpdated`在实体中调用的字段，`User`如果任何实体（包括但不限于`User`）将在提交当前事务后更改。换句话说，如果我开始一个事务并修改一个名为`nbCars`的实体的字段`Garage`，我希望更新该实体的`lastUpdated`字段，`User`即使该实体没有被修改。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T00:00:29.913

这是一个必要的回复，旨在纠正@ColinMorelli 发布的内容（因为不允许在生命周期事件侦听器中刷新 - 是的，文档中有一个位置另有说明，但我们将摆脱它，所以请不要去做吧！）。

您可以简单地[`onFlush`](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/events.html#lifecycle-events)使用如下监听器收听：

```
use Doctrine\Common\EventSubscriber;
use Doctrine\ORM\Event\OnFlushEventArgs;
use Doctrine\ORM\Events;

class UpdateUserEventSubscriber implements EventSubscriber
{
    protected $user;

    public function __construct(User $user)
    {
        // assuming the user is managed here
        $this->user = $user;
    }

    public function onFlush(OnFlushEventArgs $args)
    {
        $em  = $args->getEntityManager();
        $uow = $em->getUnitOfWork();

        // before you ask, `(bool) array()` with empty array is `false`
        if (
            $uow->getScheduledEntityInsertions()
            || $uow->getScheduledEntityUpdates()
            || $uow->getScheduledEntityDeletions()
            || $uow->getScheduledCollectionUpdates()
            || $uow->getScheduledCollectionDeletions()
        ) {
            // update the user here
            $this->user->setLastModifiedDate(new DateTime());
            $uow->recomputeSingleEntityChangeSet(
                $em->getClassMetadata(get_class($this->user)), 
                $this->user
            );
        }
    }

    public function getSubscribedEvents()
    {
        return array(Events::onFlush);
    }
} 
```

`User`只有当包含要提交到数据库的更改时，这才会将更改应用于配置的对象`UnitOfWork`（工作单元实际上是您可能定义为应用程序级状态事务的内容）。

您可以随时通过调用向 ORM 注册此订阅者

```
$user         = $entityManager->find('User', 123);
$eventManager = $entityManager->getEventManager();
$subscriber   = new UpdateUserEventSubscriber($user);

$eventManager->addEventSubscriber($subscriber); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T21:00:42.850

很抱歉一开始给您错误的答案，这应该会引导您朝着正确的方向前进（请注意，它并不完美）。

您需要实现两个事件。一个监听 OnFlush 事件，行为如下：

```
// This should listen to OnFlush events
public function updateLastModifiedTime(OnFlushEventArgs $event) {
    $entity = $event->getEntity();
    $entityManager = $event->getEntityManager();
    $unitOfWork = $entityManager->getUnitOfWork();

    if (count($unitOfWork->getScheduledEntityInsertions()) > 0 || count($unitOfWork->getScheduledEntityUpdates()) > 0) {
        // update the user here
        $this->user->setLastModifiedDate(new \DateTime());
    }
} 
```

我们需要等待 OnFlush 事件，因为这是我们访问所有将要完成的工作的唯一机会。请注意，我没有在上面包含它，但是`$unitOfWork->getScheduledEntityDeletions()`如果您想跟踪它，也有。

接下来，您需要另一个监听 PostFlush 事件的最终事件监听器，如下所示：

```
// This should listen to PostFlush events
public function writeLastUserUpdate(PostFlushEventArgs $event) {
    $entityManager = $event->getEntityManager();
    $entityManager->persist($this->user);
    $entityManager->flush($this->user);
} 
```

不幸的是，一旦交易开始，就为时已晚，无法获得拯救另一个实体的教义。因此，我们可以在 OnFlush 处理程序中对对象的字段进行*更新*`User`，但实际上我们不能将其保存在那里。（您可能可以找到一种方法来做到这一点，但 Doctrine 不支持它，并且必须使用 UnitOfWork 的一些受保护的 API）。

但是，一旦事务完成，您可以立即执行另一个快速事务来更新用户的日期时间。是的，这确实有一个不幸的副作用，即不在单个事务中执行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T21:07:34.630

与其他 2 个答案类似，我的猜测是，在有或不会发生变化时说出你想做的任何事情，使用事件侦听器。

但是如果你只想在交易开始*之前*`Doctrine_Record::getModified()`知道，你可以使用（[链接](http://docs.doctrine-project.org/projects/doctrine1/en/latest/en/manual/component-overview.html#id83)）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-07T21:00:49.053

`@PreUpdate`如果实体没有更改，则不会调用事件。

# c# - 在 C# 中使用 LINQ 从二维数组 (int[ , ]) 中获取切片

> ID：15281616
> 
> 赞同：1
> 
> 时间：2013-03-07T20:58:45.313
> 
> 标签：c#, linq, multidimensional-array

我不是 C# 专家，也不是 LINQ 初学者，在 SO 和 Google 中进行了一些搜索，但没有发现如何执行以下操作：

如果我有，比如说，`int[10,10]`数组，我怎么能从中得到一个 2D 切片？

例如，如果所述数组中的值取决于它们的位置（a[2,3] = 23、a[4,8] = 48 等），我想执行以下伪代码：

```
int[3,3] a_slice = slicer_method(a, 3, 6, 2, 5)   // or anything equivalent to this

> [[ 32, 33, 34],
   [ 42, 43, 44],
   [ 52, 53, 54]] 
```

它不必专门使用 LINQ，但我已经看到 LINQ 在我最近遇到的每个类似操作中都使用过。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T21:00:41.503

在 CLR 上没有办法做到这一点，因为它不支持数组切片的概念。他们最好的办法是在模拟切片的数组上创建一个包装器类型

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-07T21:09:24.683

你可以尝试这样的事情：

```
public T[,] Slice<T>(T[,] a, int x1, int y1, int x2, int y2)
{
    var result = new T[x2 - x1, y2 - y1];
    for (var i = x1; i < x2; i++)
    {
        for (var j = y1; j < y2; j++)
        {
            result[i - x1, j - y1] = a[i,j];
        }
    }
    return result;
} 
```

[样本](https://dl.dropbox.com/u/40318759/SliceSample.png)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-07T21:10:21.427

@JaredPar 是正确的，没有内在的方法来做切片 - 也就是说，你可以设计一个扩展方法来做到这一点：

```
public static class Ext
{
    public static T[] Slice<T>(this T[] source, int fromIdx, int toIdx)
    {
        T[] ret = new T[toIdx - fromIdx + 1];
        for(int srcIdx=fromIdx, dstIdx = 0; srcIdx <= toIdx; srcIdx++)
        {
            ret[dstIdx++] = source[srcIdx];
        }
        return ret;
    }
    public static T[,] Slice<T>(this T[,] source, int fromIdxRank0, int toIdxRank0, int fromIdxRank1, int toIdxRank1)
    {
        T[,] ret = new T[toIdxRank0 - fromIdxRank0 + 1, toIdxRank1 - fromIdxRank1 + 1];

        for(int srcIdxRank0=fromIdxRank0, dstIdxRank0 = 0; srcIdxRank0 <= toIdxRank0; srcIdxRank0++, dstIdxRank0++)
        {        
            for(int srcIdxRank1=fromIdxRank1, dstIdxRank1 = 0; srcIdxRank1 <= toIdxRank1; srcIdxRank1++, dstIdxRank1++)
            {
                ret[dstIdxRank0, dstIdxRank1] = source[srcIdxRank0, srcIdxRank1];
            }
        }
        return ret;
    }
} 
```

和一个测试：

```
void Main()
{
    var singleArr = new int[]{ 0, 1, 2, 3, 4, 5, 6, 7, 8, 9 };  
    singleArr.Slice(2, 4).Dump();
    var doubleArr = new int[,]
    {
        { 0, 1, 2, 3, 4, 5, 6, 7, 8, 9 },
        { 0, 1, 2, 3, 4, 5, 6, 7, 8, 9 },
        { 0, 1, 2, 3, 4, 5, 6, 7, 8, 9 },
        { 0, 1, 2, 3, 4, 5, 6, 7, 8, 9 },
        { 0, 1, 2, 3, 4, 5, 6, 7, 8, 9 },
        { 0, 1, 2, 3, 4, 5, 6, 7, 8, 9 },
        { 0, 1, 2, 3, 4, 5, 6, 7, 8, 9 },
        { 0, 1, 2, 3, 4, 5, 6, 7, 8, 9 },
        { 0, 1, 2, 3, 4, 5, 6, 7, 8, 9 },
    };  
    doubleArr.Slice(2, 4, 2, 4).Dump();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T21:10:44.680

```
 public class MyArraySlice<T>  where T:struct {
    public MyArraySlice(T[,] array, int xMin, int xMax, int yMin, int yMax) {
      Array = array;
      XMin = xMin; XMax = xMax;
      YMin = yMin; YMax = yMax;
    }

    public T this[int i, int j] { get {
        if (XMin <= i && i < XMax  && YMin <= j && j < YMax)
          return Array[i+XMin, j+YMin];

        throw new ArgumentOutOfRangeException();
      }
    }

    T[,] Array;
    int XMin;
    int XMax;
    int YMin;
    int YMax;
  } 
```

# c# - 在不发送重定向的情况下使用 Controller 和 Action？

> ID：15281618
> 
> 赞同：1
> 
> 时间：2013-03-07T20:58:48.507
> 
> 标签：c#, asp.net-mvc-3

我有一些服务器端代码运行一些规则，然后会根据规则的结果重定向到不同的控制器和操作。

什么是表示控制器和动作组合而不执行的最佳方式，`RedirectToAction("Action","Controller");`因为我实际上不想在方法执行后立即发出重定向。

所以我想做类似的事情

```
public SomeObject ApplyRules(){
   if(somecondition){
      return(Action1,Controller1);
   else if(someotherCondition){
      return(Action2,Controller2);
   }
} 
```

我可以创建一个具有两个字符串属性（`Controller`和`Action`）的类，但我必须认为应该使用一些内置类来表示它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T21:31:51.723

您可以使用`RedirectToRouteResult`类型并传递它。您不必创建新对象或元组。

```
[NonAction]
private RedirectToRouteResult ApplyRules(){
    if(condition1){
        return RedirectToAction("Action1");
    }
    else if(condition2){
        return RedirectToAction("Action2");
    }
    else return RedirectToAction("Action3")
}

public ActionResult MyAction()
{
    RedirectToRouteResult result = ApplyRules();

    // As long as you don't return your "result" from THIS METHOD
    // redirect won't happen:

    // return result;

    return View();
} 
```

只要您不`RedirectResult`从 ACTION 方法返回，就可以将其用作您的`ApplyRules()`或任何其他方法的返回参数。

如果您的`ApplyRules()`方法在 Controller 之外，则不能使用`RedirectToAction`helper。在这种情况下，您可以`RedirectToRouteResult`像这样生成：

```
var routeValues = new System.Web.Routing.RouteValueDictionary();
routeValues.Add("controller", "Account");
routeValues.Add("action", "Register");
var result = new RedirectToRouteResult(routeValues); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T21:19:34.407

我通常不使用元组，但这可能是有意义的情况：

```
public Tuple<string,string> ApplyRules(){
   if(somecondition)
   {
      return(new Tuple<string, string>("Action1","Controller1"));
   }
   else if(someotherCondition)
   {
      return(return(new Tuple<string, string>("Action2","Controller2")););
   }
} 
```

[在此 msdn 帖子](http://msdn.microsoft.com/en-us/library/system.tuple.aspx)中了解有关元组的更多信息。

您当然会进行重定向，如下所示：

```
public void DoMyRedirect(Tuple<string,string> route)
{
  return RedirectToAction(route.Key1, route.Key2);
} 
```

# jquery - 使用javascript删除所有paratheses和里面的内容

> ID：15281635
> 
> 赞同：0
> 
> 时间：2013-03-07T21:00:03.760
> 
> 标签：jquery, regex

我正在解析我网站上的 XML 提要，其中一个提要以以下格式显示： **新闻故事标题（2013 年 1 月 15 日）**。我想删除括号和其中的所有内容。

我将整个字符串存储在一个变量中，如下所示： `var title = $(this).text();`

然后我使用 jquery 的 each 来遍历每个 RSS 标题，如下所示：

```
$('h4 a').each(function() {

      var title = $(this).text();

}); 
```

然后我可以使用正则表达式来获取括号内的内容并像这样警告它：

```
var title = $(this).text();
var regex = new RegExp('\\((.*?)\\)', 'g');
var match, matches = [];
while(match = regex.exec(title))
    matches.push(match[1]);
alert(matches); 
```

这很好，但我将如何从字符串中删除这些？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T21:11:33.930

您可以将其用作基础，并根据日期的需要细化您的正则表达式。

```
$('h4 a').each(function() {
    var new_text = $(this).text().replace(/((\s*)\((.*)\))/, "");
    $(this).text(new_text);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T21:14:11.103

如果您确信标题将遵循相同的模式，则无需使用正则表达式来完成此操作：

```
function removeDate(title) {
    var index = title.lastIndexOf('(');
    return title.substr(0, index).trim();
}

$('h4 a').each(function() {
    $(this).text(removeDate($(this).text());
}); 
```

# java - 尝试关闭 I/O 对象时“找不到符号”

> ID：15281640
> 
> 赞同：5
> 
> 时间：2013-03-07T21:00:10.740
> 
> 标签：java, exception-handling

```
public static int howMany(String FileName)
{
    BufferedReader br = null;

    try
    {
        FileInputStream fis = new FileInputStream(FileName);
        DataInputStream dis = new DataInputStream(fis);
        br = new BufferedReader(new InputStreamReader(dis));
    }
    catch (FileNotFoundException e)
    {
        System.out.print("FILE DOESN'T EXIST");
    }
    finally
    {
        fis.close();
        dis.close();
        br.close();
    }

    String input;
    int count = 0;

    try
    {

        while ((input = br.readLine()) != null)
        {
            count++;
        }

    }
    catch (IOException e) 
    {
        System.out.print("I/O STREAM EXCEPTION");
    }

    return count;
} 
```

由于某种原因，我无法关闭任何 I/O 对象。fis.close()、dis.close()、br.close() 都给我找不到符号，即使我导入了所有 I/O 库 (import java.io.*;) 并启动了所有对象。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T21:01:12.080

```
 BufferedReader br = null;
 FileInputStream fis =null;
 DataInputStream dis null;
 try {
     fis = new FileInputStream(FileName);
     dis = new DataInputStream(fis);
     br = new BufferedReader(new InputStreamReader(dis));
 } 
```

将它们放在您的`try block`中，以便您的 finally 块可以看到变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T21:01:34.283

您必须声明块外的*所有*流`try`，否则它们将在块中不可见`finally`：

```
FileInputStream fis = null;
DataInputStream dis = null;
BufferedReader br = null; 
```

或者，您可以使用 Java 7 的新[try-with-resources](http://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html)语法来自动关闭资源。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T21:01:48.263

您的对象在您的块内为空

```
FileInputStream fis =null;
DataInputStream dis null; 
```

像这样在块外定义它们

```
try{

    fis = new FileInputStream(FileName);
    dis = new DataInputStream(fis);

   } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T21:01:56.057

您已将范围限定`fis`在 try 块内，因此 final 不知道它在那里。尝试：

```
FileInputStream fis;
DataInputStream dis;
try
    {
        fis = new FileInputStream(FileName);
        dis = new DataInputStream(fis);
        br = new BufferedReader(new InputStreamReader(dis));
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-07T21:02:06.123

尝试这个：

```
BufferedReader br = null;
FileInputStream fis = null;
DataInputStream dis = null;
try
{
    fis = new FileInputStream(FileName);
    dis = new DataInputStream(fis);
    br = new BufferedReader(new InputStreamReader(dis));
} 
```

# jquery - jQuery jplist：初始化，排序，选择时未触发的行上的单击事件

> ID：15281641
> 
> 赞同：0
> 
> 时间：2013-03-07T21:00:12.600
> 
> 标签：jquery, google-maps-api-3

我有一个谷歌地图，它通过点击一个 div 类行来触发。当在页面上使用 jplist 插件时，这将被完全忽略。如果我删除此插件的代码，触发器将完美运行。

jsfiddle [http://jsfiddle.net/LVThH/](http://jsfiddle.net/LVThH/)

```
$(this).click(function(){
google.maps.event.trigger( otherMarkers ,'click');
}); 
```

我真的很想弄清楚这里的问题是什么以及是否存在冲突。

请帮忙 :D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T22:34:28.283

似乎没有人注意到你;）所以我给你一些相处的东西 - 我试过了，似乎 jplist 可能会解除你的点击事件与那些`.row`类 div 的（以及所有在它之下）的绑定 - 当它初始化时，排序，或者什么。它还提供了`redraw_callback`事件，但它仅在页面加载时触发一次（真遗憾，因为它可以用于`.row`在初始化后附加您自己的点击事件）。演示类似：`redraw_callback: setClickEvents();`where`setClickEvents();`将是包含与您调用标记单击的代码类似的代码的方法。

但因为它没有工作！- 我至少看到了几种可能性：

1.）（好方法）尝试另一个插件 - 因为我已经讨厌 jplist 进行那些解除绑定或......

2.）（HACKER 方式）在不使用 jquery 的情况下将 javascript 点击处理程序添加到 div，并在页面顶部编写一点 javascript 以调用在地图初始化时放置在数组内的标记的点击。

试试这个[小提琴](http://jsfiddle.net/LVThH/9/)（经测试可与 moz 和 chrome 一起使用。）.. 请注意，我仍然会选择 Good way 或咨询插件制造商如何`redraw_callback`工作或是否损坏等。

# javascript - 通过 MVC 和 RAZOR 编写 JSON

> ID：15281647
> 
> 赞同：3
> 
> 时间：2013-03-07T21:00:33.437
> 
> 标签：javascript, razor

我有一个 ASP.NET MVC 4 应用程序。这个应用程序在页脚中有一个带有 javascript 块的视图。我正在使用 RAZOR 视图引擎。我试图弄清楚如何将我的结果集转换为 JSON 数组。目前，我正在执行以下操作：

```
<script type="text/javascript">
@for (int i=0; i<ViewBag.States.Count; i++) {
    <text>
        { id: @Html.Raw(ViewBag.States[i]["ID"], name: \"" + ViewBag.States[i]["Name"] + "\"}")
    </text>
    if (i < (ViewBag.States.Count - 1)) {
        <text>,</text>
    }
}
</script> 
```

这种方法在语法上看起来很草率。但是，我不知道该怎么做。有谁知道我该如何清理这个？使用这种方法，我什至无法弄清楚如何将“ID”值用引号括起来。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-10-15T11:23:24.123

我知道这个问题已经在一年多前得到了回答，但我想添加我的解决方案，恕我直言，这是最干净的。

我基本上做的是这个（使用Newtonsofts Json.Net）。我为 HtmlHelper 类创建了一个扩展方法，如下所示：

```
public static class HtmlHelperExtensions
{
    public static HtmlString ToJson(this HtmlHelper @this, object value)
    {
        return new HtmlString(JsonConvert.SerializeObject(value));
    }

    public static HtmlString ToJson(this HtmlHelper @this, object value, Formatting formatting)
    {
        return new HtmlString(JsonConvert.SerializeObject(value, formatting));
    }
} 
```

这让我可以做到：

```
$scope.test = @(Html.ToJson(new []
                    {
                        new {id='1',name="Hello", desc="World"},
                        new {id='1',name="Hello", desc="World"},
                        new {id='1',name="Hello", desc="World"}
                    })); 
```

结果是：

```
$scope.test = [{"id":"1","name":"Hello","desc":"World"},{"id":"1","name":"Hello","desc":"World"},{"id":"1","name":"Hello","desc":"World"}]; 
```

基本上你的例子会变成这样：

```
@(Html.ToJson(ViewBag.States.Select(s=>new {id=s["ID"], name=s["Name"]}))) 
```

或者

```
@(Html.ToJson(
    from state in ViewBag.States
    select new {id=state["ID"], name=state["Name"]})) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T21:21:03.567

您可以使用[JavaScriptSerializer](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptserializer.aspx)类将您的集合序列化为 JSON：

```
@{
   var serializer = new JavaScriptSerializer();
   var serializedData = serializer.Serialize(Enumerable.Select(ViewBag.States, state =>
                                                      new {
                                                            id = state["ID"],
                                                            name = state["Name"]
                                                           }));

} 
```

您可以通过以下方式呈现序列化数据：

```
@Html.Raw(serializedData) 
```

您可以像这样解析它以供 javascript 使用：

```
JSON.parse('@Html.Raw(serializedData)'); 
```

我认为您的示例中存在某种语法错误，我无法弄清楚您打算使用 Html.Raw() 方法调用的目的，但是您可以对我的代码稍作修改并将方法调用插入到任何位置它是必需的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T21:22:26.170

Razor 可以更好地处理基于 xml 的语言，但为了正确起见：这实际上是可能的。

我想你想这样做：

```
@model IEnumerable<Your.Actual.Namespace.State>
[
@for (int i=0; i < Model.Count; i++) {
    var item = Model[i];
    <text>{ id: @Html.Raw(item["ID"]), name: '@Html.Raw(item["Name"])' }</text>
    if (i < (Model.Count - 1)) 
    {
        <text>,</text>
    }
}
] 
```

调用视图时，这样写：

```
return View(states); 
```

“states”应该是您之前放入 ViewBag 的“State”对象数组。您以这种方式将其添加为模型，您可以在 .cshtml 中将其用作模型（您可以在我的代码中看到）。

我还稍微清理了您的代码。

我不建议您这样做，但这比使用来自控制器中的对象的 json 序列化程序有一个很大的优势：您可以更改序列化，而无需重新构建代码并将其重新发布到生产服务器。

所以总的来说你的代码会很丑陋，你对此无能为力，但它可以通过编辑 cshtml 在实时应用程序上进行更改。

我会在超过 100 的情况下这样做，但有时这种灵活性可能很重要。但不是你的情况。如果你的 json 有一个预定义的格式，你真的应该使用某种 json 序列化程序，比如 Nico 或 Rickard 建议的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T21:05:09.367

如果您不想通过 Ajax 加载它，我建议您在控制器中创建一个模型，然后将其序列化为字符串并将其公开为 @Model 本身或在 ViewBag 中。

一种方法是`JsonObject`在[JSON.NET](http://json.net)或[ServiceStack.Text](https://github.com/ServiceStack/ServiceStack.Text)中使用并使用其序列化程序来获取字符串。

# android - 安卓音频播放

> ID：15281659
> 
> 赞同：-1
> 
> 时间：2013-03-07T21:00:58.130
> 
> 标签：android, android-mediaplayer

我正在使用媒体播放器从 http 链接播放音频，并释放 mediaPlayer 在其中播放歌曲的活动的 mediaPlayer onStop()。我希望歌曲继续播放，除非用户退出应用程序，即退出主页。如何从主页停止和释放媒体播放器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T21:35:59.493

您将需要一个[`Service`](http://developer.android.com/reference/android/app/Service.html)播放音乐的应用程序，然后您的应用程序只会向该服务发送消息。

# maven - 如何使用 Maven 部署本地已安装的工件

> ID：15281665
> 
> 赞同：9
> 
> 时间：2013-03-07T21:01:21.647
> 
> 标签：maven, maven-3, tycho, maven-deploy-plugin

## 故事

我知道，maven deploy 命令贯穿整个生命周期。我的问题，在我的情况下需要很多时间。让我解释：

*   有一个从服务器构建的应用程序**，以及一个单一来源的 Eclipse RAP&RCP**客户端
*   通信由与服务器一起构建的**共享 API 项目定义，但 GUI 项目也需要**
*   **GUI**项目是**由 Tycho 构建的**，因此不可能在一个构建中构建它们（在一个反应​​器中，**编辑：**因为 P2 工件对于 RCP 和 RAP 是不同的）
*   我使用多步 Jenkins 构建构建了一个版本。为了确保一切正常，我**首先**对服务器和 GUI 变体进行了全新安装，**然后部署**它们，如果没有失败

## 问题

将所有内容构建两次需要大量时间。有没有类似“***请简单地将所有构建****的工件从我的本地存储库部署到 POM 定义的存储库**并跳过整个生命周期***”？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-08T00:46:05.230

如果您已经拥有先前构建的工件，则可以按照[将 3rd 方 JAR 部署到远程存储库](http://maven.apache.org/plugins/maven-deploy-plugin/deploy-file-mojo.html)的指南来考虑[部署：部署文件](http://maven.apache.org/plugins/maven-deploy-plugin/deploy-file-mojo.html)。我总是使用这个目标将一些稳定的工件发布到开发人员公共远程存储库，以便让其他团队测试/使用。

我希望这可能会有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T08:04:26.787

我不认为有一个纯粹的 Maven 解决方案。问题是您的仅部署构建不知道要部署哪些工件 - AFAIK 此信息仅在内存中的 Maven 模型中，而不是持久化到目标文件夹。

该问题可以通过支持暂存的 Maven 存储库管理器来解决，例如（商业）Nexus Pro。然后，您的构建将直接部署到临时存储库中，并且只有在一切成功时才将工件提升到（主）存储库。

# java - 将 DefaultTableModel 数据复制到剪贴板

> ID：15281679
> 
> 赞同：1
> 
> 时间：2013-03-07T21:02:16.763
> 
> 标签：java, swing, jtable, clipboard, defaulttablemodel

我有下一个 JTable

```
private void initComponents() {

    jScrollPane1 = new javax.swing.JScrollPane();
    jTable1 = new javax.swing.JTable();
    jButton1 = new javax.swing.JButton();
    jButton2 = new javax.swing.JButton();

    setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
    getContentPane().setLayout(null);

    jTable1.setModel(new javax.swing.table.DefaultTableModel(
        new Object [][] {
            {"Hat", "New York", "1000"},
            {"T-Shirt", "New York", "3500"},
            {"Sweater", "Washington", "2800"},
            {"Bag", "California", "7000"},
        },
        new String [] {
            "Name", "Warehouse", "Quantity"
        }
    ));
    jScrollPane1.setViewportView(jTable1);

    getContentPane().add(jScrollPane1);
    jScrollPane1.setBounds(19, 11, 375, 170);

    jButton1.setText("Copy");
    getContentPane().add(jButton1);
    jButton1.setBounds(113, 195, 63, 23);

    jButton2.setText("Exit");
    getContentPane().add(jButton2);
    jButton2.setBounds(225, 195, 53, 23);

    pack();
} 
```

我希望按钮将模型的信息复制到剪贴板，但它不起作用，我尝试使用

```
String myString = "This text will be copied into clipboard when running this code!";
StringSelection stringSelection = new StringSelection (myString);
Clipboard clpbrd = Toolkit.getDefaultToolkit ().getSystemClipboard ();
clpbrd.setContents (stringSelection, null); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-07T23:21:38.143

概念比较简单，实现稍微复杂一些。

诀窍是找到各种应用程序将识别并允许您翻译数据的 mime 类型。

我没有包含 CSV 翻译，从示例代码中得到它并不需要太多，而且，我没有包含表格单元格值的任何“格式”，我相信你能想到也出来了。

```
import java.awt.Toolkit;
import java.awt.datatransfer.Clipboard;
import java.awt.datatransfer.ClipboardOwner;
import java.awt.datatransfer.DataFlavor;
import java.awt.datatransfer.Transferable;
import java.awt.datatransfer.UnsupportedFlavorException;
import java.io.ByteArrayInputStream;
import java.io.IOException;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.table.DefaultTableModel;
import javax.swing.table.TableModel;

public class CopyTableModel {

    public static void main(String[] args) {
        DefaultTableModel model = new DefaultTableModel(
                new Object[][]{
            {"A1", "A2", "A3", "A4", "A5"},
            {"B1", "B2", "B3", "B4", "B5"},
            {"C1", "C2", "C3", "C4", "C5"},
            {"D1", "D2", "D3", "D4", "D5"},
            {"E1", "E2", "E3", "E4", "E5"},
            {"F1", "F2", "F3", "F4", "F5"}
        },
                new Object[]{"1", "2", "3", "4", "5"});

        Clipboard cb = Toolkit.getDefaultToolkit().getSystemClipboard();
        cb.setContents(new TableTransferable(model), new ClipboardOwner() {
            @Override
            public void lostOwnership(Clipboard clipboard, Transferable contents) {
                System.out.println("You lose :(");
            }
        });

    }

    public static class TableTransferable implements Transferable {

        public static final DataFlavor TABLE_DATA_FLAVOR = new DataFlavor(TableModel.class, "binary/x-java-tablemodel; class=<javax.swing.TableModel>");
        public static final DataFlavor HTML_DATA_FLAVOR = new DataFlavor("text/html", "HTML");
        public static final DataFlavor CSV_DATA_FLAVOR = new DataFlavor("text/csv", "CVS");
        public static final DataFlavor PLAIN_DATA_FLAVOR = new DataFlavor("text/plain", "Plain text");
        public static final DataFlavor SERIALIZED_DATA_FLAVOR = new DataFlavor(String.class, "application/x-java-serialized-object; Plain text");
        private final TableModel model;

        public TableTransferable(TableModel model) {
            this.model = model;
        }

        @Override
        public DataFlavor[] getTransferDataFlavors() {
            return new DataFlavor[]{TABLE_DATA_FLAVOR, HTML_DATA_FLAVOR, CSV_DATA_FLAVOR, SERIALIZED_DATA_FLAVOR};
        }

        @Override
        public boolean isDataFlavorSupported(DataFlavor flavor) {
            System.out.println("isSupported " + flavor);
            boolean supported = false;
            for (DataFlavor mine : getTransferDataFlavors()) {
                if (mine.equals(flavor)) {
                    supported = true;
                    break;
                }
            }
            return supported;
        }

        @Override
        public Object getTransferData(DataFlavor flavor) throws UnsupportedFlavorException, IOException {
            System.out.println("get " + flavor);
            Object data = null;
            if (TABLE_DATA_FLAVOR.equals(flavor)) {
                data = model;
            } else if (HTML_DATA_FLAVOR.equals(flavor)) {
                data = new ByteArrayInputStream(formatAsHTML().getBytes());
            } else if (SERIALIZED_DATA_FLAVOR.equals(flavor)) {
                data = formatAsHTML();
            } else if (CSV_DATA_FLAVOR.equals(flavor)) {
                data = new ByteArrayInputStream("CSV".getBytes());
            } else {
                throw new UnsupportedFlavorException(flavor);
            }
            return data;
        }

        public String formatAsHTML() {
            StringBuilder sb = new StringBuilder(128);
            sb.append("<html><body>");
            sb.append("<table>");
            sb.append("<tr>");
            for (int index = 0; index < model.getColumnCount(); index++) {
                sb.append("<th>").append(model.getColumnName(index)).append("</th>");
            }
            sb.append("</tr>");
            for (int rowIndex = 0; rowIndex < model.getRowCount(); rowIndex++) {
                sb.append("<tr>");
                for (int colIndex = 0; colIndex < model.getColumnCount(); colIndex++) {
                    Object o = model.getValueAt(rowIndex, colIndex);
                    // You will want to format the value...
                    String value = o == null ? "" : o.toString();
                    sb.append("<td>").append(value).append("</td>");
                }
                sb.append("</tr>");
            }
            sb.append("</table>");

            return sb.toString();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T04:13:58.667

JTable 的默认复制功能会将选定的数据行复制到剪贴板。

有关使您可以访问此操作的方法，请参阅[操作映射操作。](http://tips4java.wordpress.com/2008/12/06/action-map-action/)使用提供的类，代码将是：

```
Action copyAction = new ActionMapAction("Copy Table", table, "copy");
JButton copyButton = new JButton(copyAction); 
```

# c# - 有没有办法重置 Observable.Window 的 windowClosingSelect 函数？

> ID：15281696
> 
> 赞同：0
> 
> 时间：2013-03-07T21:03:10.700
> 
> 标签：c#, system.reactive

我的目标是为“Type2”对象每 5 秒调用一次更新处理程序。observable 每 5 秒会生成一个以上的值，但我想忽略在最后一次处理更新后 5 秒内发生的所有值。

我在这里问了这个问题： [仅在满足特定条件时才进行节流](https://stackoverflow.com/questions/15253675/rx-throttle-only-if-specific-condition-met/15255162?noredirect=1#comment21549005_15255162)

并得到了很好的反馈。它导致我使用 Observable.Window 来尝试实现我的目标。我以为我让它工作了，但事实证明，如果第一次更新恰好在窗口关闭之前发生（因此更新被处理），然后一旦下一个窗口打开，另一个更新到达并且也被处理，当我不希望它发生，因为它在最后一次处理更新的 5 秒内出现。

这是一些演示该问题的代码，对链接中的代码稍作修改：

```
var source = new Subject<Thing>();    
var feed = source.Publish().RefCount();

var ofType1 = feed.Where(t => t.ActivationType == "Type1");
var ofType2 = feed
    .Where(t => t.ActivationType == "Type2")
    .Window(() =>
            Observable.Timer(TimeSpan.FromSeconds(5))
            .Do(t => Console.WriteLine("\nTICK: " + DateTime.Now.ToString("hh:mm:ss:fff"))))
    .Select(x => x.Take(1))
    .Merge()
    .Do(t => Console.WriteLine("A new window opened " + DateTime.Now.ToString("hh:mm:ss:fff")));

var query = ofType1.Merge(ofType2);        
query.Subscribe(t => Console.WriteLine("UPDATE: " + t.ID + " " + DateTime.Now.ToString("hh:mm:ss:fff")));    

int msDelay = 3000;
Task task = Task.Factory
    .StartNew(() => { Thread.Sleep(msDelay); })
    .ContinueWith((Task starter) =>
        {
            while (running)
            {
                var thing = new Thing();  //Note that all Things are by default Type2
                source.OnNext(thing);
                Thread.Sleep(100);
            }
        }, TaskContinuationOptions.LongRunning);

Console.ReadLine(); 
```

因此，订阅已完成，一旦订阅完成，Window 中使用的 Observable.Timer 就会开始。用于生成值的 while 循环直到 3000 毫秒延迟后才开始。

输出如下所示：

```
A new window opened 03:48:03:725
UPDATE: 1ac54fb3-f73d-4840-b4d8-95d4250ce65d 03:48:03:752

TICK: 03:48:05:714
A new window opened 03:48:05:754
UPDATE: 12d36e53-010f-4ccd-b9f8-2951b085f88c 03:48:05:754

TICK: 03:48:10:730
A new window opened 03:48:10:755
UPDATE: 25d84e72-94f9-4f50-83f4-14c1004c10fa 03:48:10:755

TICK: 03:48:15:738
A new window opened 03:48:15:755
UPDATE: 5f32b7d5-196f-445c-bf25-5c362b2fd6f0 03:48:15:755

TICK: 03:48:20:747
A new window opened 03:48:20:756
UPDATE: e3a3a30d-8031-41b5-b115-499dbe91aaf7 03:48:20:756

TICK: 03:48:25:755
A new window opened 03:48:25:756
UPDATE: 239fb25b-5135-463b-bf7e-5728ffa07f5c 03:48:25:756 
```

如您所见，第一个 Type2 更新是在窗口打开时进行的，因此会得到处理。然后，2 秒后，Window 的计时器开始计时并打开一个新窗口。它会立即处理下一个 Type2 更新，我不希望它这样做。之后它看起来可以正常工作（按照 Window 声明中的定义，每 5 秒更新一次）。

有没有一种方法或另一种方法可以用来确保每 5 秒（或我选择的任何时间范围）只有一次更新？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T09:23:08.040

我想我有一个解决方案，但首先我可以提出一些建议。我认为这个问题有很多噪音，很难找到真正的问题是什么。

实际上，您是在问“我怎样才能获得一个值，然后保持至少 5 秒的静音”。`Type1`代码让人分心。序列的生成也是一种干扰。

因此，让我们清理示例代码，看看我们是否可以看到树木的木材：

首先，我不认为这是完全相关的类型是什么。在您的示例中，我们从不推送 a `Type1`，因此我们只使用整数。它可能会让事情变得更容易。

接下来，我们可以只使用 Observable.Timer 而不是大循环+任务+thread.sleep 的东西来清理创建。

现在我们有一个简单的起点：

```
var source = Observable.Timer(TimeSpan.FromSeconds(3),TimeSpan.FromMilliseconds(300), Scheduler.TaskPool);   
var feed = source.Publish().RefCount(); 
```

所以我们的第一个问题是对您正在使用的 Window 重载的误解。我认为您的期望是当第一个值被推送时它会打开一个窗口。事实并非如此。每次打开窗口时都会订阅 Timer（即 Observable.Timer(TimeSpan.FromSeconds(5))），最初是订阅发生时，然后在窗口本身关闭时再次订阅。因此，计时器立即启动，您只会获得第一个窗口的 2 秒值。

接下来，我将画出我的问题空间。我最喜欢的方法是使用大理石图。他们在 ASCII 中翻译得不是很好，但让我们尝试任何方式。

给定这个输入序列：

```
//Seconds             1111111111222222222233333333334444444444555555555566666666667777777777888888888899999999990000000000
//Tenths    01234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890
//
//source  : ------------------------------0--1--2--3--4--5--6--7--8--9--0--1--2--3--4--5--6--7--8--9--0--1--2--3--4--5--6--7--8--9--0 
```

这应该表示在 3.0 秒时产生的值“0”。然后是 3.3 秒时的“1”等。

现在有了一点问题空间的清晰性，我们可以画出我们认为窗口应该打开的位置，它应该关闭的位置以及下一个窗口应该打开的位置。

让我们看看我们想要什么。

在这里，我们添加了一个 Window1 (W1)，它在第一个值被按下时打开 ('1' @3.0s)。5 秒后关闭。在此窗口期间，我们希望在第一个值 1 之后保持静音。

窗口 2（W2）应该在下一个值产生后打开，而不是在最后一个窗口关闭后立即打开（我认为？！）。在这里，我们看到当在 8.4 秒时按下值“17”时，这是 Opened。

```
//Seconds             1111111111222222222233333333334444444444555555555566666666667777777777888888888899999999990000000000
//Tenths    01234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890

//source  : ------------------------------0--1--2--3--4--5--6--7--8--9--1--1--1--1--1--1--1--1--1--1--2--2--2--2--2--2--2--2--2--2--3--3--3--3--3--3--3--3--3--3--4--4--4--4-
                                                                        0  1  2  3  4  5  6  7  8  9  0  1  2  3  4  5  6  7  8  9  0  1  2  3  4  5  6  7  8  9  0  1  2  3
//
//W1      :                               0-------------------------------------------------|
//W2      :                                                                                  (17)----------------------------------------------|
//W3      :                                                                                                                                     (34)------------------------>

//expected: ------------------------------0--------------------------------------------------1--------------------------------------------------3---------------------------
                                                                                             7                                                  4 
```

既然我们现在正在寻找什么值，我们就可以构造一个查询。

我想出了这个。我假设提要实际上是一个热序列。使用这个假设，我构建了一个重复结构，它从提要中获取 1 个值，并将 5 秒的静默连接到序列中。然后我添加了重复操作符，它只会在 5 秒的静默期过后重新订阅提要。

```
public static IObservable<T> Silencer<T>(this IObservable<T> source, TimeSpan minSilencePeriod)
{
    return source.Take(1)
                 .Concat(Observable.Empty<T>().Delay(minSilencePeriod))
                 .Repeat();
} 
```

这确实会按预期产生值 0、17、51 等。

现在将其应用于原始问题的代码（清理一些东西）

```
void Main()
{
    var source = Observable.Timer(TimeSpan.FromSeconds(3),TimeSpan.FromMilliseconds(300), Scheduler.TaskPool).Select(_=>new Thing());   
    var feed = source.Publish().RefCount();

    var ofType1 = feed.Where(t => t.ActivationType == "Type1");
    var ofType2 = feed
            .Where(t => t.ActivationType == "Type2")
            .Silencer(TimeSpan.FromSeconds(5));

    var query = ofType1.Merge(ofType2);        
    var subscription = query.Subscribe(t => Console.WriteLine("UPDATE: " + t.ID + " " + DateTime.Now.ToString("hh:mm:ss:fff")));    

    Console.ReadLine();
    subscription.Dispose();
} 
```

我们看到输出值至少相隔 5 秒

```
UPDATE: 3f0fc6f3-8a5a-476f-9661-b7330ab77877 09:14:04:725
UPDATE: fc8f0025-7a79-4329-8164-b8b421ad5865 09:14:09:817
UPDATE: ad739a71-885e-4d5b-a352-2302df0a4d87 09:14:14:925 
```

# sql-server - 如何在 Openrowset 中使用变量来循环所有 XML 文件

> ID：15281697
> 
> 赞同：0
> 
> 时间：2013-03-07T21:03:12.957
> 
> 标签：sql-server, xml

我正在尝试使用 OpenRowSet 从文件夹中读取 XML 文件，但无法这样做并收到错误消息

> *无法批量加载，因为“'@FullFilename'' 不存在。*

如果有人能建议我如何纠正问题以从每个 XML 文件中获取所有数据，我将不胜感激。

谢谢。

代码：

```
declare @Directory varchar(50)
select @Directory = 'E:\XML\'

DECLARE @CD TABLE (XMLData XML);
declare @FileExist int
DECLARE @FileName varchar(500),
@DeleteCommand varchar(1000),
@FullFileName varchar(500)

DECLARE @SQL NVARCHAR(1000),@xml xml

--This is so that we know how long the loop lasts
declare @LoopID int, @MaxID int
SELECT @LoopID = min(id),@MaxID = max(ID)
FROM #tempList

WHILE @LoopID <= @MaxID
BEGIN
    SELECT @FileNAme = filename
    from #tempList
    where id = @LoopID

    SELECT @FullFileName = @Directory + @FileName 
    print @FULLFileName

    exec xp_fileexist @FullFileName , @FileExist output

    if @FileExist =1 --sanity check in case some evil person removed the file
    begin

---********************************Problem with @FullFileName----------------     
    INSERT INTO @CD
    SELECT *
    FROM OPENROWSET(BULK ''' + @FullFileName +''' ,Single_BLOB) as rs
---********************************------------

    select * from @CD

    --SET @DeleteCommand = 'del ' +  @Directory + @FileName 
    --maybe you want to delete or move the file to another directory
    -- ** here is how to delete the files you just imported
    -- uncomment line below to delete the file just inserted
    --EXEC MASTER..XP_CMDSHELL @DeleteCommand
    -- ** end of here is how to delete the files
    end

    --Get the next id, instead of +1 we grab the next value in case of skipped id values
    SELECT @LoopID = min(id)
    FROM #tempList
    where id > @LoopID
END

select * from #tempList 
```

这有效，我能够从指定文件中获取 XML 数据

```
DECLARE @CD TABLE (XMLData XML);
Declare @get_GeneralID bigint
INSERT INTO @CD
SELECT *
FROM OPENROWSET(BULK N'E:\XML\TestResult.XML', SINGLE_BLOB) rs;
select * from @CD 
```

PS：我整理了从网上找到的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T14:01:37.487

我不认为你可以在你的`OPENROWSET`命令中使用 T-SQL 变量——这些东西需要完全明确地说明。

如果您需要对 XML 文件列表执行此操作，则必须将 T-SQL 命令创建为字符串，然后使用动态 SQL 执行该命令。

# iphone - iOS TDD：测试使用 UIVIew animateWithDuration:animations:completion 的方法：

> ID：15281699
> 
> 赞同：7
> 
> 时间：2013-03-07T21:03:17.583
> 
> 标签：iphone, ios, objective-c, tdd

我有一个按钮可以触发动画，动画完成后会更改标签的文本。我想写一个测试来验证当按钮被按下时，标签的文本最终会正确改变。

执行按钮按下 IBAction 将使用`[UIView animateWithDuration:animations:completion:]`. 我显然不希望我的单元测试实际上等待 0.5 秒才能完成动画。

我考虑过模拟 UIView，但将 UIView 作为对视图控制器的依赖项注入似乎很奇怪。此外，我正在使用的模拟框架 (OCMockito) 似乎不适用于模拟类方法。

我还考虑过方法调配或为 编写一个测试类别，并使用一个除了调用块后跟块`UIView`之外什么都不做的实现。这对我来说似乎有点破碎。我担心在 UIView 上重写类方法的实现可能会产生意想不到的后果。`animations:``completion:`

作为 TDD 的新手，我不确定这里有什么最佳实践。这是应该被视为“UI twiddling”的那些代码之一，因此可以接受未经测试的代码吗？还是有一些更明显的方法来测试我缺少的这个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T21:12:18.283

我会简单地创建一个属性来确定动画的长度并将其默认为 0.5 秒。

这样，您的测试可以将动画持续时间设置为 0，并观察标签的文本无需等待即可更新。

这是[依赖注入](http://en.wikipedia.org/wiki/Dependency_injection)，如果您刚开始使用 TDD，它非常有用。它还具有使您的代码更模块化和更少耦合的良好副作用。

# c - 为什么会出现异常说明“运行时检查失败 #2 - 围绕变量 'f' 的堆栈已损坏。” 扔在这里？

> ID：15281703
> 
> 赞同：1
> 
> 时间：2013-03-07T21:03:36.717
> 
> 标签：c, exception, function-pointers

我写了这段代码：

```
void f1(void)
{
    sprintf("\nf1.");
}
void f2(void)
{
    sprintf("\nf2.");
}
void f3(void)
{
    sprintf("\nf3.");
}
void f4(void)
{
    sprintf("\nf4.");
}
int main()
{
    // int i;
    void (*f[4])(void);
    f[1]=f1;
    f[2]=f2;
    f[3]=f3;
    f[4]=f4;
    (*f[1])();
    (*f[2])();
    (*f[3])();
    (*f[4])();
    /*for(i=0;i<4;i++)
    {
        (*f[i])();
    }*/
    getch();
} 
```

程序编译、运行并显示输出

```
f1.
f2.
f3.
f4. 
```

但是当我按下回车键时，它会抛出异常，指出“运行时检查失败 #2 - 变量‘f’周围的堆栈已损坏。”

请向我解释原因，以及何时使用 snprintf 和 sprintf。另外，让我知道为什么我不能使用

```
for(i=0;i<4;i++)
{
    (*f[i])();
} 
```

为函数指针。它也为此引发了错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T21:05:21.810

```
void (*f[4])(void);
f[4]=f4; 
```

数组在 C 中从 0 开始。访问`f[4]`是非法的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T21:14:31.770

除了你的越界数组问题之外，你还必须有这一行：

```
#include <stdio.h> 
```

因为您正在使用该`sprintf`功能。如果你这样做，你的编译器应该给你一个错误，说你调用它不正确。您的编译器可能已经警告您它使用了隐式声明。就目前而言，它正在继续并错误地调用该函数并希望获得最好的结果。这也可能导致堆栈问题。

# php - 从php发送json数据

> ID：15281707
> 
> 赞同：6
> 
> 时间：2013-03-07T21:03:58.720
> 
> 标签：php, json

我对 Php 完全陌生，我正在尝试将 json 数据从 php 发送到 android。我在 php 中有以下代码从数据库中读取值：

```
<?php
$con=mysql_connect("localhost","root","");

if(! $con)
{
        die('Connection Failed'.mysql_error());
}

mysql_select_db("registration",$con);
$name="Adam";//$_POST["name"];
$password="charles";//$_POST["password"];
$sql="SELECT * FROM users WHERE name='$name'and password='$password'"; 

$result=mysql_query($sql, $con);
while($row = mysqli_fetch_array($result))     
{
    $details= array(
        'name' => $row['name'],
        'password' => $row['password'],

    );
    array_push($json, $bus);
}

$jsonstring = json_encode($json);
echo $jsonstring;
mysql_close();
?> 
```

我期望输出是这样的：

```
[{"name":"Adam","age":"25","surname":"charles"}] 
```

如果我没记错 JSON 数据。但这给了我错误：

```
mysqli_fetch_array() expects parameter 1 to be mysqli_result, resource given in... 
```

并且

```
Undefined variable: json in... 
```

有人可以告诉我可能是什么错误

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-07T21:07:37.800

试试这样

```
$result=mysql_query($sql, $con);
$json = array();
while($row = mysql_fetch_array($result))     
 {
    $json[]= array(
       'name' => $row['name'],
     'password' => $row['password']
    );
}

$jsonstring = json_encode($json);
 echo $jsonstring; 
```

并且不推荐使用mysql，何时可以使用mysqli或PDO

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-07T21:10:09.580

除了 sam 和 pitchinnate 建议的更改之外，还可以考虑添加 php header 以将内容类型设置为 json

```
header('Content-type: application/json'); 
```

那就是如果你使用android远程请求json信息

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T21:06:07.930

您正在使用`mysql_query`with `mysqli_fetch_array`。你需要使用`mysql_fetch_array`.

但是 mysql_* 函数不应再使用。

还有另一个错误：

```
array_push($json, $bus); // i believe $bus should be replaced with $details 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T21:09:56.967

我认为您应该检查变量 $result (var_dump()); 的内容 事实上，如果没有定义结果，你的程序就不会进入循环，也不会定义$json。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-07T21:11:06.420

未定义变量：json 是因为您尝试执行 array_push($json, $bus) 但 $json 不存在而引起的。

你应该先声明它

```
$json = Array(); 
```

mysql 错误很可能是因为您混合使用了 mysql 和 mysqli 模块。

仅使用 mysqli。

```
$con=mysqli_connect("localhost","root","");
mysql_select_db("registration",$con);
...
$result=mysql_query($sql, $con); 
```

此外，以纯文本形式存储密码通常不是一个好主意。至少考虑使用散列函数。

# c# - 在 asp.net Web API 中映射数组

> ID：15281710
> 
> 赞同：2
> 
> 时间：2013-03-07T21:04:16.263
> 
> 标签：c#, asp.net, asp.net-web-api

我正在尝试将控制器功能映射到我的 web api。

```
config.Routes.MapHttpRoute(
              name: "RPCRoutingApiCaseStudy",
              routeTemplate: "api/{controller}/{action}/{ServiceID}",
              defaults: new { ServiceID = RouteParameter.Optional }
              ); 
```

问题是，在我的控制器中，ServiceID 应该是一个数组。如何设置我的映射以接受数组，它会是什么样子？对不起，如果这是一个明显的问题，但我对这些东西非常不熟悉，我正在努力学习。

我了解如何使用常规参数来执行此操作，例如 int 我会输入`url/api/controller/method/5`

我只是不知道如何处理数组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T22:55:20.600

为了将复杂类型传递到 Web API，您需要创建包含 IENumerable 类型的辅助类，然后通过 JSON 封装将该对象传递到 Web API。

以下示例接受 POST 方法并采用包含 List 的 CustomListType 对象。然后，您可以对对象做您喜欢的事情。

```
public class ValuesController : ApiController
{

    [System.Web.Http.AcceptVerbs("POST")]
    public bool POST(CustomListType myList)
    {
        //Do stuff here

        return true;
    }

    public class CustomListType
    {
        public List<int> myArray { get; set; }
    }

} 
```

使用Chrome 的[Advanced Rest Client](https://chrome.google.com/webstore/detail/advanced-rest-client/hgmloofddffdnphfgcellkdfbfbjeloo)；您可以通过发送对象来测试帖子：

```
{myArray:[0,1,2]} 
```

请注意，因为 CustomListType 有一个名为“myArray”的成员，我们的 JSON 对象中也有“myArray”。

如果你在那里放一条调试线，你应该能够看到“myArray”的对象和值

# c# - PrimaryScreen.Size 的问题

> ID：15281714
> 
> 赞同：16
> 
> 时间：2013-03-07T21:04:20.757
> 
> 标签：c#, winforms

我已经有`Screen.PrimaryScreen.Bounds.Size`一段时间了，但是在我连接到大屏幕电视的 Windows7 计算机上，它给了我不正确的值。

我在其他地方读过尝试`SystemInformation.PrimaryMonitorSize`，但给出了相同的值。

当我右键单击桌面以获取屏幕分辨率时，它显示`1920x1080`. 以上两个都是给我的`1280x720`。

我也尝试过 WPF 版本：

```
var w = System.Windows.SystemParameters.PrimaryScreenWidth;
var h = System.Windows.SystemParameters.PrimaryScreenHeight;
MessageBox.Show(new Size((int)w, (int)h).ToString()); 
```

显示尺寸已通过（右键单击桌面）`Personalize > Desktop`选项更改为 150%（因为屏幕为 60 英寸并且您坐得有点远）。

如何检测到这一点，以便可以调整从上面返回的值？

**注意**：我已经发现如何通过右键单击可执行文件来解决此问题并调整兼容性以禁用 DPI 虚拟化，但我仍然需要一个编程解决方案，因此我不必让用户自己调整：参见 - [http： //msdn.microsoft.com/en-us/library/dd464660(VS.85).aspx#dpi_virtualization](http://msdn.microsoft.com/en-us/library/dd464660(VS.85).aspx#dpi_virtualization)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T21:53:30.920

可能是您`Dpi`在 Windows 中的设置高于 100%

尝试使用此方法，这会将分辨率缩放到当前系统 Dpi 设置

窗体：

```
private Size GetDpiSafeResolution()
{
    using (Graphics graphics = this.CreateGraphics())
    {
        return new Size((Screen.PrimaryScreen.Bounds.Width * (int)graphics.DpiX) / 96
          , (Screen.PrimaryScreen.Bounds.Height * (int)graphics.DpiY) / 96);
    }
} 
```

WPF：

```
private Size GetDpiSafeResolution()
{
    PresentationSource _presentationSource = PresentationSource.FromVisual(Application.Current.MainWindow);
    Matrix matix = _presentationSource.CompositionTarget.TransformToDevice;
    return new System.Windows.Size(
        System.Windows.SystemParameters.PrimaryScreenWidth * matix.M22,
        System.Windows.SystemParameters.PrimaryScreenHeight * matix.M11);
} 
```

**注意：**确保您的 MainWindow 在运行此代码之前已加载

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-08T00:41:54.473

我不觉得这是一个重复的问题，但答案与另一个线程相同：[https](https://stackoverflow.com/a/13228495/353147) : //stackoverflow.com/a/13228495/353147 因为问题不是字体模糊，而是为什么 Screen.PrimaryScreen。 Bounds.Size 返回错误信息。它可以帮助其他人。

我确实遇到了一条错误消息，即 mscorlib 抛出了一个空错误。从这个线程[http://forums.asp.net/t/1653876.aspx/1](http://forums.asp.net/t/1653876.aspx/1)我能够发现取消选中“启用 ClickOnce 安全设置”修复了它。这似乎是一个 hack，但它确实有效。

# javascript - Chrome 缓存页面

> ID：15281715
> 
> 赞同：0
> 
> 时间：2013-03-07T21:04:22.533
> 
> 标签：javascript, jquery, google-chrome

我有一个静态网页，正在根据用户请求由工具重新生成。重新生成完成后，页面会重新加载。这不是 HTTPS。问题是该页面无法在 Chrome 中正确更新。公平地说，我有时也会在 IE 中看到这个问题，但它似乎主要是 chrome。我尝试了以下但没有成功：
1.在chrome开发人员工具中检查'禁用缓存'
2.重新加载时将随机字符串附加到页面，即

```
top.location = top.location.href + "?r=" + jQuery.now(); 
```

3.尝试各种重新加载的方法，比如history.go()、location.reload()，我能找到的一切。
但问题仍然存在......还有什么我可以尝试的吗？

# mysql - 在数据导入期间永不结束 MySQL 查询

> ID：15281717
> 
> 赞同：0
> 
> 时间：2013-03-07T21:04:23.470
> 
> 标签：mysql

我正在处理从一组 CSV 文件到我的主数据库的数据导入例程，并且被这组特定的数据所困扰。我使用 LOAD DATA LOCAL INFILE 将 CSV 数据转储到我的表 feed_hcp_leasenote 中：

```
CREATE TABLE `feed_hcp_leasenote` (
 `BLDGID` varchar(50) COLLATE utf8_unicode_ci DEFAULT NULL,
 `LEASID` varchar(50) COLLATE utf8_unicode_ci DEFAULT NULL,
 `NOTEDATE` varchar(50) COLLATE utf8_unicode_ci DEFAULT NULL,
 `REF1` varchar(50) COLLATE utf8_unicode_ci DEFAULT NULL,
 `REF2` varchar(50) COLLATE utf8_unicode_ci DEFAULT NULL,
 `LASTDATE` varchar(50) COLLATE utf8_unicode_ci DEFAULT NULL,
 `USERID` varchar(50) COLLATE utf8_unicode_ci DEFAULT NULL,
 `NOTETEXT` varchar(1000) COLLATE utf8_unicode_ci DEFAULT NULL,
 `tempid` int(11) NOT NULL AUTO_INCREMENT,
 PRIMARY KEY (`tempid`),
 KEY `BLDGID` (`BLDGID`),
 KEY `LEASID` (`LEASID`),
 KEY `REF1` (`REF1`),
 KEY `NOTEDATE` (`NOTEDATE`)
) ENGINE=MyISAM AUTO_INCREMENT=65002 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci 
```

我正在尝试将此数据导入两个表，lease_notes 和 customfield_data。Lease_notes 只存储一个唯一的 ID 值、注释本身以及将其链接到租用表的盖子。customfield_data 存储系统和用户创建的字段的各种数据，每条记录通过 linkid 字段链接到另一个表。这是lease_note 表：

```
CREATE TABLE `lease_notes` (
 `lnid` int(11) NOT NULL AUTO_INCREMENT,
 `notetext` longtext COLLATE utf8_unicode_ci NOT NULL,
 `lid` int(11) NOT NULL COMMENT 'Lease ID',
 PRIMARY KEY (`lnid`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci 
```

和 customfield_data 表：

```
CREATE TABLE `customfield_data` (
 `cfdid` int(11) NOT NULL AUTO_INCREMENT,
 `data_int` int(11) DEFAULT NULL,
 `data_date` datetime DEFAULT NULL,
 `data_smtext` varchar(1000) COLLATE utf8_unicode_ci DEFAULT NULL,
 `data_lgtext` longtext COLLATE utf8_unicode_ci,
 `data_numeric` decimal(20,2) DEFAULT NULL,
 `linkid` int(11) DEFAULT NULL COMMENT 'ID value of specific item',
 `cfid` int(11) NOT NULL COMMENT 'Custom field ID',
 PRIMARY KEY (`cfdid`),
 KEY `data_smtext` (`data_smtext`(333)),
 KEY `linkid` (`linkid`),
 KEY `cfid` (`cfid`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci 
```

卡住的查询如下：

```
SELECT NOTEDATE, REF1, REF2, LASTDATE, USERID, feed_hcp_leasenote.NOTETEXT, leases.lid, lease_notes.lnid
FROM feed_hcp_leasenote
JOIN customfield_data mrileaseid ON feed_hcp_leasenote.LEASID = mrileaseid.data_smtext AND mrileaseid.cfid = ?
JOIN leases ON mrileaseid.linkid = leases.lid
JOIN suites ON leases.sid = suites.sid
JOIN floors ON suites.fid = floors.fid
JOIN customfield_data coid ON floors.bid = coid.linkid AND coid.cfid = ? AND coid.data_smtext = feed_hcp_leasenote.BLDGID
JOIN customfield_data status ON leases.lid = status.linkid AND status.cfid = ? AND status.data_smtext <> ?
LEFT JOIN lease_notes ON leases.lid = lease_notes.lid
LEFT JOIN customfield_data notedate ON lease_notes.lnid = notedate.linkid AND notedate.data_date = feed_hcp_leasenote.NOTEDATE AND notedate.cfid = ?
LEFT JOIN customfield_data ref1 ON lease_notes.lnid = ref1.linkid AND ref1.data_smtext = feed_hcp_leasenote.REF1 AND ref1.cfid = ? 
```

我的目标是返回 feed_hcp_leasenote 中的所有记录，并根据lease_notes.lnid 是否为空，根据需要插入或更新记录（空值将是插入，而不是空值将是更新。）问题是提供的data 使用 4 个字段的组合来确定唯一性：BLDGID、LEASID、NOTEDATE 和 REF1。如果没有正确的 BLDGID 和 LEASID（在我的查询中转换为有效的 *lid*。它可以将现有记录与有效的 lid、NOTEDATE 和 REF1 匹配，但如果这些不匹配，那么我可以假设它是一个新纪录。

如果我从 SELECT 中切掉所有 LEFT JOIN 和lease_notes.lnid，它会正确执行并给我所有记录。由于我无法让我的原始查询工作，我想循环所有结果并执行**另一个**SELECT 以查看 noteate 和 ref1 是否匹配。如果没有，我插入，否则更新。虽然这种方法有效，但它每秒只能处理大约 20 条记录，当我一次处理 30,000 条记录时，这是一个问题。

由于我在上一个问题中被问到，这里是我的查询的解释：

```
id  select_type     table   type    possible_keys   key     key_len     ref     rows    Extra
1   SIMPLE  status  ref     data_smtext,linkid,cfid     cfid    4   const   934     Using where
1   SIMPLE  mrileaseid  ref     data_smtext,linkid,cfid     linkid  5   rl_hpsi.status.linkid   19  Using where
1   SIMPLE  leases  eq_ref  PRIMARY,sid     PRIMARY     4   rl_hpsi.mrileaseid.linkid   1   Using where
1   SIMPLE  suites  eq_ref  PRIMARY,fid     PRIMARY     4   rl_hpsi.leases.sid  1    
1   SIMPLE  floors  eq_ref  PRIMARY,bid     PRIMARY     4   rl_hpsi.suites.fid  1    
1   SIMPLE  feed_hcp_leasenote  ref     BLDGID,LEASID   LEASID  153     rl_hpsi.mrileaseid.data_smtext  19  Using where
1   SIMPLE  coid    ref     data_smtext,linkid,cfid     data_smtext     1002    rl_hpsi.feed_hcp_leasenote.BLDGID   10  Using where
1   SIMPLE  lease_notes     ALL     NULL    NULL    NULL    NULL    15000    
1   SIMPLE  notedate    ref     linkid,cfid     linkid  5   rl_hpsi.lease_notes.lnid    24   
1   SIMPLE  ref1    ref     data_smtext,linkid,cfid     data_smtext     1002    rl_hpsi.feed_hcp_leasenote.REF1     10 
```

谁能指出我正确的方向？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T16:38:50.577

根据我们的评论：

答案是添加使条目对您的目标表唯一的列，并在它们上创建一个复合唯一键。然后在插入该表时使用`INSERT ON DUPLICATE KEY UPDATE`以防止重复数据。插入完成后，如果不再需要这些列，您可以删除它们，以防止将数据存储在多个表中。

# mysql - 表中只有一个属性是好的，还是被认为是糟糕的设计？

> ID：15281719
> 
> 赞同：0
> 
> 时间：2013-03-07T21:04:26.437
> 
> 标签：mysql, database

我想将一个弱实体连接到某个强实体，但弱实体只有一个属性，所以实体中只有一个属性可以吗，或者我必须在强实体中合并该属性（合并会产生冗余） .所以我想对这种混乱提出一些建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T21:45:18.933

在某些情况下，它可能会过度标准化，但从您的示例数据来看，我认为它没有任何问题，实际上它可能是处理多对多关系的最佳方式。

# svn - wso2 治理注册表和带 svn 的 scm

> ID：15281720
> 
> 赞同：0
> 
> 时间：2013-03-07T21:04:26.647
> 
> 标签：svn, wso2

我正在尝试将我的治理存储库设置为由 svn 支持。这个页面看起来很简单，但它不起作用。

[http://docs.wso2.org/wiki/pages/viewpage.action?pageId=12421346](http://docs.wso2.org/wiki/pages/viewpage.action?pageId=12421346)

安装的文件夹出现，但其中没有内容。我在这里错过了一步吗？

这是我在 registry.xml 中的代码

```
<scm>
    <connection checkOutURL="scm:svn:http://dev-code-repo/svn/wso2Dev/ESBConfig/synapse-configs" workingDir="/opt/wso2greg-4.5.0/repository/svn" mountPoint="/_system/foo" checkInURL="false" readOnly="true" updateFrequency="1">
            <username>tim</username>
            <password>password</password>
    </connection>
</scm 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T19:58:05.573

将 svnkit 包添加到 lib 文件夹后，它仍然无法正常工作。您需要在操作系统上安装 svn，因为这似乎是使用的。老实说，这个系统会导致很多问题，如果可能的话，我会推荐一条不同的路径。

# php - PHP JSON 不起作用，谁能告诉我为什么？

> ID：15281722
> 
> 赞同：1
> 
> 时间：2013-03-07T21:04:33.267
> 
> 标签：php, jquery, json

**我的文件.php**

```
header('Content-type: application/json');

echo json_encode( array( 'error' => 'jkfshdkfj hskjdfh skld hf.' ) ); 
```

上面的代码有效。

但是当我改变它时它停止工作：

```
if( isset( $_GET['customerID'] ) ){

       // do something else error

} else {

   header('Content-type: application/json');
   echo json_encode( array( 'error' => 'jkfshdkfj hskjdfh skld hf.' ) );

} 
```

两个输出都是正确的：

```
{"error":"jkfshdkfj hskjdfh skld hf."} 
```

但我得到一个ajax错误：

**我的文件.phtml**

```
 <?php 
            if( isset( $_GET['custID'] ) )
               echo "var custID = " . htmlentities( $_GET['custID'] ) . ";";                             
            else
               echo "var custID = null;";                             
        ?>

        $.ajax({

            url: 'php/viewCustomer.php',
            type: 'GET',
            data: {customerID: custID},
            dataType: 'json',
            cache: false,
            beforeSend: function(){

                $('#display').append('<div id="loader"> Lodaing ... </div>');

            },
            complete: function(){

                $('#loader').remove();

            },
            success: function( data ){

                if( data.error ) {

                    var errorMessage = "";

                    $.each( data, function( errorIndex, errorValue ){ 

                        errorMessage += errorValue + "\n";

                    });

                    alert( errorMessage );

                } else {

                    //$('div#customer-content table tr td').eq(0).text( '1234' );
                    //$('div#customer-content table tr td').eq(1).text( '1234' );
                    //$('div#customer-content table tr td').eq(2).text( '1234' );
                    //$('div#customer-content table tr td').eq(3).text( '1234' );
                    //$('div#customer-content table tr td').eq(4).text( '1234' );
                    alert( data );

                }                       

            },
            error: function( jqXHR ){

                alert( 'AJAX ERROR' );

            }

        });

    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T21:13:57.033

从评论看来，您正在传递一个空的 customerID，并且不希望它进入 if 条件。但即使该值为空，`$_GET['customerID']`仍然设置。将检查更改为`empty()`，它将按您的预期工作：

```
if( !empty( $_GET['customerID'] ) ){
    .... 
```

# css - 还需要第一行注释css类型声明吗？

> ID：15281725
> 
> 赞同：-1
> 
> 时间：2013-03-07T21:04:40.113
> 
> 标签：css

当我刚开始学习前端开发时，我曾经看到第一行注释
/* css document */
或类似的东西，我不记得它是什么......

*   我最近没用过。甚至还有必要吗？*   那只是织梦者的事情吗？*   将您的第一行 css 作为评论会很危险吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T21:10:12.550

CSS 不需要任何声明，就像 HTML 文档确实需要 DOCTYPES 一样（它们不需要它们，但强烈推荐）

将注释作为 CSS 的第一行一点也不危险。（事实上​​ WordPress 主题需要这个，但那完全是另外一回事）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T21:15:05.130

你从来没有。据我回忆，第一行 css 注释在某些时候是 Dreamweaver 的一个有点不必要的功能。它的唯一目的是提醒用户他们正在编写一个 css 文件，这只是必要的，因为如果您单击新建>CSS 文件，dreamweaver 会自动将文档保存为 .css。

# ios - iOS -- 我可以访问用户的图书库吗？

> ID：15281726
> 
> 赞同：0
> 
> 时间：2013-03-07T21:04:46.463
> 
> 标签：ios

我知道可以访问和播放用户的 iTunes 库。是否可以访问用户的图书库？我猜没有，但我想我会检查以防万一。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T21:08:35.810

目前无法访问此信息（在 iOS <= 6.1.3 上）。Books 应用程序是一个独立的应用程序，具有自己的私有沙箱，用于存储书籍。

# javascript - HTML - 脚本 - 访问 domain.com/example 时隐藏“/index.html”文件

> ID：15281727
> 
> 赞同：1
> 
> 时间：2013-03-07T21:04:47.257
> 
> 标签：javascript, html, .htaccess, redirect

例如：在苹果网站上，当我访问 apple.com/support 时，我会访问 apple.com/support/，应该是 apple.com/support/index.html，但 index.html 没有显示。

我想在我的网站上看到这个：例如，当去 jonathangurebo.se/contact 时，我会来到 jonathangurebo.se/contact/index.html，我不想显示 index.html。

我应该如何解决这个问题？

也许在我的 .htaccess 文件中添加一些行？因为当去 jonathanurebo.se/mlkhgljfehgljfebgfgb 时，它会来到我的错误 404 页面并在我的地址栏中显示相同的链接。而不是这种情况下的真正链接 jonathanurebo.se/error/404.html

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T21:16:56.460

您的网站显示该`index.html`部分的唯一原因是您将其添加到 HTML 页面中。而不是像这样制作：

```
<a href="http://www.jonathangurebo.se/apps/index.html">Apps</a> 
```

您应该制作如下链接：

```
<a href="http://www.jonathangurebo.se/apps/">Apps</a> 
```

一切都会像您预期的那样工作！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T21:08:21.460

index.html 或 index.php 主要是默认文件，每个浏览器“首先查看”链接到 www.jonathangurebo.se/contact/ 并且它将自动打开 www.jonathangurebo.se/contact/index.html 而不显示“ index.html”在浏览器中

试试[http://www.jonathangurebo.se/contact/](http://www.jonathangurebo.se/contact/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T21:10:26.497

你是对的，你需要在你的 .htaccess 文件中添加一些东西。

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?$1 [L,QSA]

RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s(.*)/index\.php [NC]
RewriteRule ^ /%1 [R=301,L] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T21:16:12.797

从[`DirectoryIndexRedirect`](http://httpd.apache.org/docs/current/mod/mod_dir.html#directoryindexredirect)

> 默认情况下，DirectoryIndex 被选中并透明地返回给客户端。

如果您在某处设置了此指令，则必须将其删除。或者，如果您被允许在 .htaccess 中覆盖它，请使用

```
DirectoryIndexRedirect off 
```

# c# - 使用 LDAP 和 C# 设置 Active Directory 帐户过期

> ID：15281730
> 
> 赞同：5
> 
> 时间：2013-03-07T21:04:54.173
> 
> 标签：c#, active-directory

我想设置一个新用户帐户，使其在创建后 90 天内过期。这是我创建用户并设置所有内容的代码。一切正常，除了我试图将其设置为过期的最后一个块。

```
 DirectoryEntry newUser = dirEntry.Children.Add("CN=" + cnUser, "user");
            newUser.Properties["samAccountName"].Value = cnUser;
            newUser.Properties["userPrincipalName"].Value = cnUser;
            newUser.Properties["pwdLastSet"].Value = 0;
            newUser.CommitChanges();

            //Changes Password
            String passwrd = userPassword.ToString();
            newUser.Invoke("SetPassword", new object[] { passwrd });
            newUser.CommitChanges();

            //Sets User Account to Change Passowrd on new login
            newUser.Properties["pwdLastSet"].Value = 0;
            newUser.CommitChanges();

            //Enables account
            newUser.Properties["userAccountControl"].Value = (int)newUser.Properties["userAccountControl"].Value & ~0x2;
            newUser.CommitChanges();

            //Set the account to expire in 90 days
            var dt1 = DateTime.Today.AddDays(90);
            newUser.Properties["accountExpires"].Value = dt1.ToFileTime().ToString();
            newUser.CommitChanges(); 
```

关于如何让他工作的任何建议？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T21:08:44.643

请参阅有关此字段[的文档。](http://msdn.microsoft.com/en-us/library/windows/desktop/ms675098(v=vs.85).aspx)您需要将其转换为“刻度”-

```
the number of 100-nanosecond intervals since January 1, 1601 (UTC). A value of 0 or 0x7FFFFFFFFFFFFFFF (9223372036854775807) indicates that the account never expires. 
```

`new DateTime(DateTime.UtcNow.AddDays(90).Ticks - new DateTime(1601, 1, 1).Ticks)`将为您提供正确和准确的值。

您可以通过从上述表达式中获取值并执行来检查您的工作（手动）：

```
w32tm.exe /ntte 130149277684873234 
```

对我来说，上述命令的结果是

```
150635 17:42:48.4873234 - 6/5/2013 12:42:48 PM 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-02-20T02:44:19.010

或者你可以这样做：

```
DateTime expire = System.DateTime.Now.AddDays(90);
newUser.Properties["accountExpires"].Value = Convert.ToString((Int64)expire.ToFileTime());
newUser.CommitChanges(); 
```

这比弄乱蜱虫和所有这些更容易处理

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-04T11:34:59.720

参考：[https ://msdn.microsoft.com/en-us/library/ms180914(v=vs.80).aspx](https://msdn.microsoft.com/en-us/library/ms180914(v=vs.80).aspx)

```
//Use the DirectoryEntry.InvokeSet method to invoke the AccountExpirationDate property setter.

System.DirectoryServices.DirectoryEntry dirEntryLocalMachine =
    new System.DirectoryServices.DirectoryEntry("WinNT://" + Environment.MachineName + "/" + userID);

dirEntryLocalMachine .InvokeSet("AccountExpirationDate", new object[] {new DateTime(2005, 12, 29)});

//Commit the changes.
usr.CommitChanges(); 
```

# workflow-foundation - 从构建工作流中的路径获取最新的变更集编号

> ID：15281731
> 
> 赞同：1
> 
> 时间：2013-03-07T21:04:56.777
> 
> 标签：workflow-foundation, tfsbuild

如何在构建工作流程中获取当前构建工作路径的最新变更集编号？

我想将变更集编号放入我的项目的内部版本号和程序集版本文件中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T15:33:13.120

您必须查询 tfs api 版本控制以获取您的项目的历史记录

[http://msdn.microsoft.com/en-us/library/hh981750.aspx](http://msdn.microsoft.com/en-us/library/hh981750.aspx)

最基本的形式：

```
QueryHistory(
    "ServerPathToYourWorkspace",
    RecursionType.Full,
    1, //number of items returned
) 
```

不确定这在 TFS2012 中是否为 1:1，就像在 2010 中一样，您可以从 BuildDetails.Definition.Workspace.Mappings 获取工作区。您可以通过 BuildDetails 团队项目集合调用来访问版本控制服务器

```
GetService<VersionControlServer>(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T21:30:15.310

在标准模板的末尾附近有一个序列（您可能希望在编译之前在模板中将其向上移动），其中称为“如果关联变更集”，其中是关联变更集和工作项活动。该结果或 out 参数称为 associatedChangesets，它是 Changeset 对象的列表，然后您可以将其用作您自己的自定义任务的 InArgument 并完成您想要的。Changeset 编号是每个 Changeset 对象上的 Property ChangesetID。

# testing - 使用 Selenium IDE 关闭弹出框

> ID：15281743
> 
> 赞同：1
> 
> 时间：2013-03-07T21:05:24.637
> 
> 标签：testing, automation, selenium-ide, qa

我正在使用 Selenium IDE 进行一些测试。但几乎没有坚持一个动作 - 我需要关闭 FF 中的下载弹出窗口。

执行此操作的常用方法是使用 selectWindow 命令，但是 - 我的弹出窗口 - 它实际上是一个框架，因此它没有 ID 和其他对 IDE 有用的参数。

我关闭此弹出窗口的所有尝试都导致关闭主窗口。我尝试过这样的事情，但也没有奏效：

```
<tr>
    <td>click</td>
    <td>css=#fpm &gt; img</td>
    <td></td>
</tr>
<tr>
    <td>waitForFrameToLoad</td>
    <td>http://www.somesite.com/lg/c.do?proj=1111&amp;aid=1111&amp;rnd=0.132456</td>
    <td></td>
</tr>
<tr>
    <td>pause</td>
    <td>5000</td>
    <td></td>
</tr>
<tr>
    <td>close</td>
    <td></td>
    <td></td>
</tr>
<tr> 
```

过去有人遇到过这个问题吗？我知道，此时可以使用 JS，但我不知道如何使用。你能建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T18:30:30.720

最后，我找到了一种方法......有点棘手，但它有效。因此，这是一个 IDE 错误，IDE 无法识别打开的“_blank”窗口。这是解决方法：

```
<tr>
    <td>storeAttribute</td>
    <td>//a[@'Here you can use id/class/href/rel link, etc, for ex: @rel='Register']/@href</td>
    <td>href</td>
</tr>
<tr>
    <td>openWindow</td>
    <td>${href}</td>
    <td></td>
</tr>
<tr>
    <td>pause</td>
    <td>2000</td>
    <td></td>
</tr>
<tr>
    <td>storeEval</td>
    <td>selenium.getAllWindowNames()[1];</td>  -- [1] - window to select from array of window names, 0 - it's a main, 1 - 1st opened pop up, 2 - 2nd, etc.
    <td>windowName</td>
</tr>
<tr>
    <td>pause</td>
    <td>2000</td>
    <td></td>
</tr>
<tr>
    <td>selectWindow</td>
    <td>${windowName}</td>
    <td></td>
</tr>
<tr>
    <td>verifyElementPresent</td>
    <td>Verify something here</td>
    <td></td>
</tr>
<tr>
    <td>close</td>  -- close pop up
    <td></td>
    <td></td>
</tr>
<tr>
    <td>selectWindow</td>  -- return to main window
    <td>null</td>
    <td></td>
</tr> 
```

# cypher - 使用 Neo4jclient 使用正则表达式搜索属性

> ID：15281744
> 
> 赞同：1
> 
> 时间：2013-03-07T21:05:28.430
> 
> 标签：cypher, neo4jclient

我有一个有效的密码查询，但无法在 Neo4jclient 中工作。

我的密码查询是

```
start n=node(*) where has(n.Name) and n.Name =~ 'X.*' return n; 
```

它返回具有以 X 开头的 Name 属性的所有节点。
我故意不在这里使用索引或关系。

我的第一次幼稚尝试（甚至不使用我计划使用的正则表达式）在 res.Results 上因超时（！）而失败

```
var res = _client.RootNode
    .StartCypher("n")
    .Where<Meeting>(m => m.Name == "X")
    .Return<Meeting>("m"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T11:52:50.793

尝试：

```
var query = _client.Cypher
    .Start("n", graphClient.RootNode)
    .Where("has(n.Name)")
    .And()
    .Where("n.Name =~ 'X.*'")
    .Return<Meeting>("n"); 
```

这在我的机器上工作，你会得到如下结果：

```
var results = query.Results; 
```

**编辑：** 我想我已经意识到为什么你有问题，一开始，你放了`StartCypher("n")`然后，使用`m`而不是`n`. 所以`Return<Meeting>("m")`应该是`Return<Meeting>("n")`

# python - 按名称初始化、设置和获取我的自定义对象属性的 Pythonic 方法是什么？

> ID：15281746
> 
> 赞同：11
> 
> 时间：2013-03-07T21:05:48.110
> 
> 标签：python, object, properties, attributes

我对 Python 很陌生，我需要声明自己的数据结构，不过我对如何做到这一点有点困惑。我目前有：

```
class Particle:

    def __init__(self, mass, position, velocity, force):

        self.mass = mass
        self.position, self.velocity, self.force = position, velocity, force

    def __getitem__(self, mass):
        return self.mass

    def __getitem__(self, position):
        return self.position

    def __getitem__(self, velocity):
        return self.velocity

    def __getitem__(self, force):
        return self.force 
```

但是，当我尝试使用以下方法定义类的实例时，这不起作用：

```
 p1 = Particle(mass, position, velocity, force) 
```

每个值都以 (0.0, 0.0) 结尾（这是速度和力的值）。

有人可以解释我哪里出错了，我需要从数据结构中提取数据，仅此而已。（编辑：实际上，对不起，我稍后将不得不更改它们）

谢谢

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-07T21:15:25.917

首先，您应该了解这`__getitem__`是语法糖。拥有它很好，但如果你不需要它，就不要使用它。`__getitem__`并且`__setitem__`基本上是如果您希望能够使用括号符号访问对象中的项目，例如：

```
p= Particle(foo)
bar = p[0] 
```

如果您不需要这个，请不要担心。

现在，到其他一切。看起来你已经有了你希望你的对象在你的`__init__`定义中携带的主要特征，这很好。现在您需要使用以下方法将这些值实际绑定到您的对象上`self`：

```
class Particle:
    def __init__(self, mass, position, velocity, force):
        self.mass = mass
        self.position = position
        self.velocity = velocity
        self.force = force 
```

就是这样。您现在可以使用点表示法访问这些值，如下所示：

```
mass,pos,vel,f = 0,0,0,0 # just for readability
p = Particle(mass,pos,vel,f)
print p.mass, p.position, p.velocity, p.force 
```

我们从中得到的好处之一是，如果我们问 python 是什么`p`，它会告诉你它是该`Particle`类型的一个实例，如下所示：

```
in [1]: p
out[1]: <__main__.Particle instance at 0x03E1fE68> 
```

理论上，当您使用这样的对象时，您希望在用户和数据之间有一个“抽象层”，这样他们就不会直接访问或操作数据。为此，您创建函数（就像您尝试使用 所做的那样`__getitem__`）以通过类方法调解用户和数据之间的交互。这很好，但通常不是必需的。

在您更简单的情况下，要更新这些属性的值，您可以直接按照我们访问它们的方式进行操作，使用点表示法：

```
in [2]: p.mass
out[2]: 0

in [3]: p.mass = 2 
in [4]: p.mass
out[4]: 2 
```

您可能已经知道这一点，但是`__init__`函数甚至`class`定义（您通常/应该定义类的大部分属性和方法的地方）都没有什么神奇之处。某些类型的对象非常允许您随时随地添加属性。这可能很方便，但通常非常hacky并且不是好的做法。我不是建议你这样做，只是告诉你这是可能的。

```
in [5]: p.newattr ='foobar!'
in [6]: p.newattr
out[6]: 'foobar!' 
```

很奇怪吧？如果这让你的皮肤爬行......好吧，也许它应该。但这是可能的，我是谁说你能做什么和不能做什么。所以这是对课程运作方式的一种体验。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-07T21:11:20.813

```
class Particle:
    def __init__(self, mass, position, velocity, force):
        self.mass = mass
        self.position = position
        self.velocity = velocity
        self.force = force

particle = Particle(1, 2, 3, 4)
print(particle.mass)  # 1 
```

如果你想假装你的类有属性，你可以使用`@property`装饰器：

```
class Particle:
    def __init__(self, mass, position, velocity, force):
        self.mass = mass
        self.position = position
        self.velocity = velocity
        self.force = force

    @property
    def acceleration(self):
        return self.force / self.mass

particle = Particle(2, 3, 3, 8)
print(particle.acceleration)  # 4.0 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-07T21:14:58.870

似乎`collections.namedtuple`是你所追求的：

```
from collections import namedtuple

Particle = namedtuple('Particle', 'mass position velocity force')
p = Particle(1, 2, 3, 4)
print p.velocity 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-07T21:11:06.977

你可以在使用它之前把这个类定义放在前面。如果要声明它，请查看此站点：[http ://www.diveintopython.net/getting_to_know_python/declaring_functions.html](http://www.diveintopython.net/getting_to_know_python/declaring_functions.html)

顺便说一句，您的问题与这篇文章类似：[Is it possible to forward-declare a function in Python?](https://stackoverflow.com/questions/1590608/is-it-possible-to-forward-declare-a-function-in-python) 还有这篇文章：[在python中声明它们的主体之前是否可以使用函数？](https://stackoverflow.com/questions/1909325/is-it-possible-to-use-functions-before-declaring-their-body-in-python)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-07T21:19:54.007

如果您**只**需要存储一些属性值（类似于 C 语言`struct`），您可以这样做：

```
class myContainer(object):
    pass  # Do nothing

myContainerObj = myContainer()
myContainerObj.storedAttrib = 5
print myContainerObj.storedAttrib 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-06-14T15:09:18.267

在 Python 3.7+ 中有数据类库。这个库将允许您创建自己的类来使用装饰器快速保存数据，`@dataclass`.

装饰器`@dataclass`允许您快速定义和添加功能到您打算主要用于保存数据的类。

您的问题的数据类可能如下实现。我已经包含了类型提示和默认值，您可能会觉得它们很有帮助。

```
from dataclasses import dataclass

@dataclass
class Particle:
   mass: float
   position: float
   velocity: float = 0.0
   force: float = 0.0 
```

[这是一篇有用的文章](https://realpython.com/python-data-classes/)，它解释了如何在 Python 3.7+ 中使用数据类和其他一些特性。

# groovy - 如何在字符串中搜索groovy中的单词列表

> ID：15281750
> 
> 赞同：0
> 
> 时间：2013-03-07T21:06:09.217
> 
> 标签：groovy

什么是在字符串中搜索单词列表的好方法？（不区分大小写）

例子：

```
def s = "This is a test"

def l = ["this", "test"] 
```

结果可能是对的，也可能是错的，但最好能找到找到的单词数量并且这些单词是......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T22:05:27.927

> 结果可能是对的，也可能是错的，但最好能找到找到的单词数量并且这些单词是......

那么您可能想要[`findAll`](http://groovy.codehaus.org/groovy-jdk/java/util/Collection.html#findAll%28groovy.lang.Closure%29)该列表中包含在字符串中的单词：D

```
def wordsInString(words, str) {
    def strWords = str.toLowerCase().split(/\s+/)
    words.findAll { it.toLowerCase() in strWords }
}

def s = "This is a test"
assert wordsInString(["this", "test"], s) == ["this", "test"]
assert wordsInString(["that", "test"], s) == ["test"]
assert wordsInString(["that", "nope"], s) == []

// Notice that the method conserves the casing of the words.
assert wordsInString(["THIS", "TesT"], s) == ["THIS", "TesT"]

// And does not match sub-words.
assert wordsInString(["his", "thi"], s) == [] 
```

而且，由于列表具有与之关联[的真值](http://docs.codehaus.org/display/GROOVY/Groovy+Truth)`if (wordsInString(someWords, someString)) { ... }`，因此您可以直接在布尔上下文中使用结果，例如.

# javascript - 如何使用 JavaScript 计算点击次数？

> ID：15281757
> 
> 赞同：0
> 
> 时间：2013-03-07T21:06:23.257
> 
> 标签：javascript, click

我正在尝试制作一个计数器，它将计算单击按钮的次数，但由于某种原因，它不起作用，Javascript代码如下：

```
var clicks = 0;
if (clicks==1)
{
function changeDiv()
{
    document.getElementById('body').style.display = "none"; // hide body div tag
    document.getElementById('body1').style.display = "block"; // show body1 div tag
    document.getElementById('innerbody').innerHTML = "If you can see this, JavaScript function worked"; // display text if JavaScript worked
}
}

else{
if (clicks==2)
{
    function changetwoDiv()
    {
        document.getElementById('body1').style.display = "none";
        document.getElementById('body2').style.display = "block";
    }
}
} 
```

HTML 代码如下：

```
<div class="footerlinks">
<ul>
    <li class="numlink1"><a href="index.html" target="_blank">&lt;&lt;Back</a></li>
    <li class="link2" onClick="clicks++">&gt;&gt;Next</li>

</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T21:25:43.127

您的 JavaScript 代码在加载时只执行一次，如下所示：

1.  用户加载页面
2.  代码（if-else-block）被执行，但由于计数器为 0，所以什么也不做
3.  用户点击按钮，计数器计数，但不会再次执行 if-else-block

您必须确保每次用户单击按钮时都会调用 if-else-block。

更改您的 onClick 事件`<li>`以调用函数（我将在`count()`下面调用它）。然后在你的代码中创建这个函数并将相关的东西放在那里。

HTML：

```
<li class="link2" onClick="count()">&gt;&gt;Next</li> 
```

JavaScript：

```
var clicks = 0; // This needs to stay outside the function!

function count() {
    clicks++;
    if (clicks == 1) {
        // Do something
    } else if (clicks == 2) {
        // Do something else
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T21:21:08.823

这里有两个主要问题：

1.  不要在 if/else 块中定义函数，这是不可靠的。
2.  每次点击时唯一发生的事情就是让计数器递增，仅此而已。

我相信你想要这样的东西：

```
var clicks = 0;

function clicked() {
    clicks++;
    if (clicks==1) {
        changeDiv();
    } else if (clicks==2) {
        changetwoDiv();
    }
}

function changeDiv() {
    document.getElementById('body').style.display = "none"; // hide body div tag
    document.getElementById('body1').style.display = "block"; // show body1 div tag
    document.getElementById('innerbody').innerHTML = "If you can see this, JavaScript function worked"; // display text if JavaScript worked
}

function changetwoDiv() {
    document.getElementById('body1').style.display = "none";
    document.getElementById('body2').style.display = "block";
} 
```

HTML：

```
<div class="footerlinks">
<ul>
    <li class="numlink1"><a href="index.html" target="_blank">&lt;&lt;Back</a></li>
    <li class="link2" onClick="clicked()">&gt;&gt;Next</li>

</ul> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T21:21:32.287

为您的 javascript 试试这个：

```
var clicks = 0;

function next_clicked() {

     clicks++;

     if( clicks == 1 ) { changeDiv(); }
     else if( clicks == 2 ) { changetwoDiv(); }

}

function changeDiv()
{
    document.getElementById('body').style.display = "none"; // hide body div tag
    document.getElementById('body1').style.display = "block"; // show body1 div tag
    document.getElementById('innerbody').innerHTML = "If you can see this, JavaScript function worked"; // display text if JavaScript worked
}

function changetwoDiv()
{
    document.getElementById('body1').style.display = "none";
    document.getElementById('body2').style.display = "block";
} 
```

然后在您的html代码中：

```
<li class="link2" onClick="javascript:next_clicked()">&gt;&gt;Next</li> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T21:20:44.827

试试这个代码：

```
<script type="text/javascript">
var clicks = 0;

function check() {
    if (clicks==1) {
        changeDiv();
    } else if(clicks==2) {
        changetwoDiv();
    }
}

function changeDiv()
{
    document.getElementById('body').style.display = "none"; // hide body div tag
    document.getElementById('body1').style.display = "block"; // show body1 div tag
    document.getElementById('innerbody').innerHTML = "If you can see this, JavaScript function worked"; // display text if JavaScript worked
}

function changetwoDiv()
{
    document.getElementById('body1').style.display = "none";
    document.getElementById('body2').style.display = "block";
}
</script>

<div class="footerlinks">
<ul>
    <li class="numlink1"><a href="index.html" target="_blank">&lt;&lt;Back</a></li>
    <li class="link2"><a href="#" onclick="clicks++;check();">&gt;&gt;Next</a></li>

</ul> 
```

我不确定你在那里做了什么，但是在你创建你的函数之后你应该调用它，所以我在上面所做的我创建了函数，然后当你点击 Next 链接时，它会添加一个到 clicks 变量并调用将确定如何处理点击次数的函数 check()。

# sql - SQL查询加入问题

> ID：15281759
> 
> 赞同：3
> 
> 时间：2013-03-07T21:06:32.317
> 
> 标签：sql, join

我有两张桌子`login_activity`和`event_details`. 表的结构如下：

```
Login_activity
activity_id   |  student_id   |  login_date  | event_id

event_details
event_id   |  event_name   |  event_date 
```

我需要从匹配`event_id`的.`student_id``login_activity``event_id`

我尝试了以下查询

```
select event_id,student_id 
from login_activity 
where login_activity.event_id in (select event_id from event_details); 
```

但我无法为这些获得不同的 event_id 和 student_ids 计数。我知道必须有一个简单的解决方案，但我似乎无法得到它。我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T21:08:30.127

您需要使用 GROUP BY 和 COUNT

```
SELECT l.event_id, count(student_ID)
FROM login_activity l
 INNER JOIN event_details e ON l.event_id = e.event_id
GROUP BY l.event_id 
```

您实际上不需要 event_details 表，除非您想提取特定的 event_name 或 event_date

```
SELECT l.event_id, count(student_ID)
FROM login_activity l
GROUP BY l.event_id 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T21:23:28.950

我相信您会希望在 WHERE 子句之后使用 'GROUP BY student_id'。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T21:12:32.120

您的结果是否需要 event_details 表（即，您是否需要在查询中使用事件的名称或日期）？如果没有，您可以只使用 login_activity 表：

```
 select event_id, count(student_id) as student_count from login_activity group by event_id 
```

但是，如果您想要事件的名称，它仍然大致相同。

```
 select e.event_name, count(l.student_id) as student_count
    from event_details e
    left join login_activity l on e.event_id = l.event_id
    group by e.event_name 
```

上面左连接的优点是，如果适用，您可以获得尚未有任何登录活动的事件的结果。您可以根据需要将 event_name 替换为 event_id 或日期。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-07T21:18:03.863

您需要内部联接或左联接来组合数据以获得所需的数据。然后您可以使用 group by 并使用您的事件 ID。要获取计数，您可以使用 count 命令，您可以将其作为一个新字段，例如 count(l.student_id) as studentCount。

# java - Raspbian/Java：Classpath 和 MySQL，在 Windows 上工作而不是在 Pi

> ID：15281763
> 
> 赞同：0
> 
> 时间：2013-03-07T21:07:00.213
> 
> 标签：java, sql, linux, windows, driver

我知道这个问题已经被问过/回答了好几次，但我仍然找不到解决这个`ClassNotFoundException`错误的方法，因为它可以在我的计算机上运行，​​但不能在我的 RasPi（我安装了 OpenJDK7）上运行。

我的应用程序使用 JDBC 访问 MySQL 数据库，这是主要问题。[正如许多网站（ [1]](http://javarevisited.blogspot.de/2011/08/classnotfoundexception-in-java-example.html)、[[2]](http://javarevisited.blogspot.sg/2012/03/jdbc-javalangclassnotfoundexception.html)、[[3]](http://javarevisited.blogspot.de/2011/01/how-classpath-work-in-java.html) ）所指出的，不幸的是，这是一个常见问题。

所以，我正在使用`mysql-connector-java-5.0.8.jar`作为驱动程序。我的文件夹结构类似于`/src/de/web/project/`我通过调用主方法`java de.web.project.WakeOnLan`（这是启动所有其他类的主类等）。我得到了常见的 ClassNotFound 异常，因此添加了 -cp 参数，所以我通过调用项目`java -cp .;mysql-connector-java-5.0.8.jar de.web.project.WakeOnLan`来添加驱动程序到类路径。

这从命令行在我的 Windows 计算机上运行良好，但现在我想将此代码推送到我的 Raspberry Pi 并在那里执行它。正如我所说，我在那里安装了 OpenJDK7（使用 apt-get，如果这很重要的话），使用 SFTP 将文件夹结构和代码上传到 /home/pi/java/ 那里还有 ejre1.7.0_10 文件夹（所以代码现在实际上在/home/pi/java/de/web/project/)。

我现在回到 /home/pi/java 并`java -cp .;mysql-connector-java-5.0.8.jar de.web.project.WakeOnLan`像在 Windows 计算机上一样输入，但它拒绝工作（我已将连接器放在途中的任何文件夹中，以防万一）。当我调用这个函数时，我得到一长串 Java 想要给我哪些参数允许用于 java 的提示，最后说明：`-bash: mysql-connector-java-5.0.8.jar: command not found`. 我还尝试将“.;mysql ...”转为“mysql ...;。” 这也不起作用。如果我不包含 -cp 参数，我的程序会显示“线程已启动”并在下一行中显示：`java.lang.ClassNotFoundException: com.mysql.jdbc.Driver`等等，因此程序确实会启动并将“线程已启动”写入 System.out。

出于某种原因，树莓派上的 Java 似乎忽略了类路径参数的第二个值，我看不出有什么好的理由。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T21:16:57.140

您可能只是在类路径设置中遇到问题，windows 和 linux 存在差异

类路径语法取决于操作系统。来自[维基百科](http://en.wikipedia.org/wiki/Classpath_%28Java%29)：

> 由于与文件系统密切相关，命令行类路径语法取决于操作系统。例如：
> 
> 在所有类 Unix 操作系统（如 Linux 和 Mac OS X）上，目录结构具有 Unix 语法，不同的文件路径由冒号 (":") 分隔。
> 
> 在 Windows 上，目录结构具有 Windows 语法，每个文件路径必须用分号 (";") 分隔。
> 
> 这不适用于在清单文件中定义类路径时，其中每个文件路径必须用空格 (" ") 分隔，而与操作系统无关。

# android - commonsware locationpoller 服务

> ID：15281766
> 
> 赞同：-2
> 
> 时间：2013-03-07T21:07:27.903
> 
> 标签：android, commonsware-cwac

`@commonsware`首先让我感谢您为这个社区提供的所有帮助，我发誓我在谷歌上搜索的大多数问题都是公认的答案。

[无论如何，在我开始使用locationpoller](https://github.com/commonsguy/cwac-locpoll/)后有几个问题

如[另一篇文章](https://stackoverflow.com/questions/8690198/sending-message-to-a-handler-on-a-dead-thread-when-getting-a-location-from-an-in)所述，一旦我启动您的投票服务，我偶尔会得到以下信息：

`03-07 15:42:03.260: W/MessageQueue(14699): Handler (android.location.LocationManager$ListenerTransport$1) {419425f8} sending message to a Handler on a dead thread`

这仍然是一个问题吗？我不知道这是否只是位置管理器搞砸的事情，可能是超时处理程序

接下来是我创建这篇文章的主要关注点：

作为目的地感知导航类应用程序的一部分，我需要在他们的屏幕关闭时跟踪用户，并且由于某种原因，它在进入地下一段时间后没有醒来。

我在没有网络的情况下也得到了一些奇怪的测试结果。现在我按照你的建议开始服务

`Intent i=new Intent(this, LocationPoller.class);
i.putExtra(LocationPoller.EXTRA_INTENT, new Intent(this, LocationReceiver.class)); i.putExtra(LocationPoller.EXTRA_PROVIDER, LocationManager.NETWORK_PROVIDER);`

一切似乎都如您所记录的那样工作，`PollerThread#onPreExecute()`每次打开飞行模式进行测试时都会被调用，然后永远不会结束，2分钟后，我的接收器终于在`onTimeout` `Runnable`触发时收到通知。

然后当我再次关闭飞行模式时，一切似乎恢复正常，我的接收器最终又赶上了。

我的问题是，当我在现实世界中进行测试，乘地铁回家但让应用程序和服务保持运行时，一旦我在地面上重新连接，我似乎无法在日志中找到服务继续运行的任何痕迹，而且我的接收器，它使用另一个唤醒锁来重新打开屏幕/在靠近目的地时发送通知，直到我重新打开我的应用程序才被触发

长话短说 - 这是图书馆的问题吗？位置管理器如何工作的问题？你有什么更好的方法来测试这个而不是仅仅使用飞行模式吗？

地上，骑自行车，开车等，一切似乎都很好，但是一旦我介绍了地铁，我失去了所有的连接，狗屎停止工作，我只是不知道 locationmanager 的细节来理解为什么服务似乎停止

*免责声明*这个应用程序不适合地铁上的人，但我只是不确定（没有任何方法可以测试）用户是否在偏僻的地方并且失去了网络连接我希望他们也不会失去跟踪（因为他们可以根据设置选择仅使用网络提供商或 gps）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T21:52:58.053

> 这仍然是一个问题吗？

我不知道。如果您可以创建一个可重现的测试用例来证明这一点，请将问题发布到项目的问题跟踪器。

> 我的问题是，当我在现实世界中进行测试，然后乘坐地铁回家但让应用程序和服务保持运行时，一旦我在地面上重新连接，我似乎无法在日志中找到服务继续运行的任何痕迹

该服务不应该“继续”。该服务将尝试片刻以获取位置修复，然后在发送超时消息后关闭。您可以通过`AlarmManager`或类似方式进行实际的“轮询”。

引用文档：

> 您只需设置一个 AlarmManager 警报，以您希望的任何频率联系 LocationPoller，它将从那里处理所有定位工作，通过广播 Intent 向您发送结果......接下来，您需要通过 AlarmManager 创建一个警报，因此您可以控制检索位置的频率以及是否应在设备处于睡眠状态时唤醒设备。请不要频繁请求位置更新，因为这会耗尽用户的电池电量，尤其是在您使用 GPS 时。

因此，您的第一步是确定您的警报是否正常工作。您可以使用它`adb shell dumpsys alarm`来检查已注册的警报并查看发生了什么。

# ruby - Ruby Gem Twitter - Twitter::Error::ClientError: initialize: name or service not known

> ID：15281770
> 
> 赞同：0
> 
> 时间：2013-03-07T21:07:52.677
> 
> 标签：ruby, twitter, oauth, gem, client

我想使用 ruby​​ gem 'twitter' 但由于未知原因它不起作用。这是我在运行脚本时遇到的错误：

`C:/nwcloud/jruby-1.7.2/lib/ruby/gems/shared/gems/faraday-0.8.6/lib/faraday/reques/multipart.rb:5 warning: already initialized constant DEFAULT_BOUNDARY Twitter::Error::ClientError: initialize: name or service not known request at C:/nwcloud/jruby-1.7.2/lib/ruby/gems/shared/gems/twitter-4.5.0/lib/twitter/client.rb:85 get at C:/nwcloud/jruby-1.7.2/lib/ruby/gems/shared/gems/twitter-4.5.0/lib/twitter/client.rb:64 __send__ at org/jruby/RubyBasicObject.java:1671 send at org/jruby/RubyKernel.java:2094 cursor_from_response at C:/nwcloud/jruby-1.7.2/lib/ruby/gems/shared/gems/twitter-4.5.0/lib/twitter/api/utils.rb:108 cursor_from_response_with_user at C:/nwcloud/jruby-1.7.2/lib/ruby/gems/shared/gems/twitter-4.5.0/lib/twitter/api/utils.rb:96 friends at C:/nwcloud/jruby-1.7.2/lib/ruby/gems/shared/gems/twitter-4.5.0/lib/twitter/api/friends_and_followers.rb:314 (root) at tCon.rb:11`

我在我的 twitter 开发者帐户中注册了我的应用程序并安装了 gem。这是我的编码（我删除了所有键）：

> 需要“推特”
> 
> 客户 = Twitter::Client.new(
> 
> :consumer_key => "",
> 
> :consumer_secret => "",
> 
> :oauth_token => "",
> 
> :oauth_token_secret => ""
> 
> )
> 
> client.update("我正在用@gem 发推文！")`

我也试着这样做：

> Twitter.configure 做 |config|
> 
> config.consumer_key = YOUR_CONSUMER_KEY
> 
> config.consumer_secret = YOUR_CONSUMER_SECRET
> 
> config.oauth_token = YOUR_OAUTH_TOKEN
> 
> config.oauth_token_secret = YOUR_OAUTH_TOKEN_SECRET
> 
> 结尾

..它不起作用:-( ..我是红宝石的新手，所以也许我忘了……我真的很期待你的回答。提前谢谢你！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T19:38:49.823

我认为这是一个代理问题。将其部署到云端后，它工作了！

# javascript - jQuery数据问题

> ID：15281775
> 
> 赞同：0
> 
> 时间：2013-03-07T21:08:01.023
> 
> 标签：javascript, jquery, attributes

我有点挣扎。我正在尝试利用为元素分配自定义属性的酷特性。但是它不起作用。

基本上，我试图将多个元素分配给该行中的 TR 元素标识信息。这是它的样子：

```
for (x=0; x< theData.length; x++)
{
    // create table row
    var selector = "wc_" + wID + "_row_" + x;

    oRow = document.createElement("TR");
    oRow.setAttribute("id", selector);
    tBodyO.appendChild(oRow);
    var rowCount = 0;
    var identCnt = 0;
    for (var index in theData[x])
    {
        identCnt = 0;
        if (hasIdentify)
        {
            for (y=0; y < theIdent.length; y++)
            {
                console.log("ROW: "+x+" , checking: "+index+"  ===  "+theIdent[y]["data_name"]);
                if (index === theIdent[y]["data_name"])
                {
                    myrow = $("#" + selector);
                    //myrow.attr("test","works");
                    console.log("ident Dataname: "+theIdent[y]["data_name"]+ "  identify:"+theIdent[y]["identify"]+"   value: "+theData[x][index]);
                    jQuery.data( myrow, "test", { first: 16, last: "pizza!" });
                    alert(myrow.data("test"));
                }
            }
        }
    }
} 
```

我遗漏了一些不相关的代码，但我希望你能明白。我想要做的是：

我有一个数组，其中包含有关特定数据行的“身份”信息。它可以有 0、1 个或更多这样的身份片段。我想将这些存储为`<TR>`元素上的自定义数据属性。

每个数据都有一个不同的`key`（例如：数据行号和身份计数器`i_0_1`在哪里）但是，我无法让它工作。我已经尝试了很多替代方案，甚至试图求助于没有运气。我究竟做错了什么？？`0``1``.attr()`

我收到一条警报，上面写着`undefined`。当我尝试这`myrow.attr("test","works");`条路线时，我可以在 DOM 中看到该属性。为什么这种`data()`方式对我不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T22:13:08.917

我刚刚弄清楚问题是什么。我想在阅读 jQuery.data() 上的文档后，我没有看到有人真正清楚地站出来说：

查看源代码时，您不会在 DOM - 元素中看到数据信息。

感谢这里的每个人，他们确实告诉我，我只是不知道我在读什么（现在我知道预期的内容）

马特写道：“实际上并没有在元素上设置属性或属性；jQuery 将此数据存储在内部缓存中，并且仅将其映射到您选择的元素”

尽管在玩弄了 .attr() 和 setAttribute() 函数之后，我变得更加困惑。

感谢大家！

# scala - Scala 类型参数似乎被“卡住”了

> ID：15281779
> 
> 赞同：3
> 
> 时间：2013-03-07T21:08:17.683
> 
> 标签：scala, lift, lift-json

我正在使用 lift-json 将 JSON 字符串反序列化为 Scala 案例类。我正在解析的 JSON 有一个共同的结构：数据、成功和错误字段，其中数据包含有趣的位。我创建了一个 APIResponse 类来解释这个结构，以及一个简单的解析方法，它接受一个类型参数来表示“数据”中包含的对象的类型：

```
import net.liftweb.json.Serialization.read
import net.liftweb.json.DefaultFormats

object JSONParseTest extends App {
  implicit val formats = DefaultFormats

  def parse[T: Manifest](json: String) = {
    read[APIResponse[T]](json)
  }

  val resultA = parse[TypeA](""" { "data": { "foo": "string" }, "success": true } """)
  println(resultA)
  val resultB = parse[TypeB](""" { "data": { "bar": "string" }, "success": true } """)
  println(resultB)
}

case class TypeA(foo: String)
case class TypeB(bar: String)

case class APIResponse[D](data: D, success: Boolean, error: Option[String]) {
  override def toString: String =
    if(success) {
      "SUCCESSFUL: " + data.toString
    } else {
      "ERROR: " + error.get
    }
} 
```

一切都很好......对于解析的第一个对象。但是，由于某种原因，解析的第二个对象似乎“卡住”了，就像传递了第一个类型参数而不是第二个类型参数一样。正如您在下面的输出中看到的，lift-json 正在 JSON 字符串中寻找一个 'foo' 字段并且找不到它；'foo' 存在于 TypeA 上，但不存在于 TypeB 上。我已经检查了 parse 方法中的清单，它在那里有正确的类型。如果我注释掉第一个解析/打印，第二个开始工作。关于为什么这不符合预期的任何指示？这让我有点难以置信。

```
SUCCESSFUL: TypeA(string)

Exception in thread "main" net.liftweb.json.MappingException: No usable value for data
No usable value for foo
Did not find value which can be converted into java.lang.String
    at net.liftweb.json.Meta$.fail(Meta.scala:191)
    at net.liftweb.json.Extraction$.mkValue$1(Extraction.scala:357)
    at net.liftweb.json.Extraction$.build$1(Extraction.scala:317)
    at net.liftweb.json.Extraction$$anonfun$12.apply(Extraction.scala:253)
    at net.liftweb.json.Extraction$$anonfun$12.apply(Extraction.scala:253)
    at scala.collection.TraversableLike$$anonfun$map$1.apply(TraversableLike.scala:233)
    at scala.collection.TraversableLike$$anonfun$map$1.apply(TraversableLike.scala:233)
    at scala.collection.LinearSeqOptimized$class.foreach(LinearSeqOptimized.scala:59)
    at scala.collection.immutable.List.foreach(List.scala:76)
    at scala.collection.TraversableLike$class.map(TraversableLike.scala:233)
    at scala.collection.immutable.List.map(List.scala:76)
    at net.liftweb.json.Extraction$.instantiate$1(Extraction.scala:253)
    at net.liftweb.json.Extraction$.newInstance$1(Extraction.scala:286)
    at net.liftweb.json.Extraction$.build$1(Extraction.scala:315)
    at net.liftweb.json.Extraction$.net$liftweb$json$Extraction$$extract0(Extraction.scala:366)
    at net.liftweb.json.Extraction$.net$liftweb$json$Extraction$$extract0(Extraction.scala:199)
    at net.liftweb.json.Extraction$.extract(Extraction.scala:43)
    at net.liftweb.json.JsonAST$JValue.extract(JsonAST.scala:300)
    at net.liftweb.json.Serialization$.read(Serialization.scala:58)
    at jmullin.api.Test$.parse(API.scala:11)
    at jmullin.api.Test$delayedInit$body.apply(API.scala:16)
    at scala.Function0$class.apply$mcV$sp(Function0.scala:34)
    at scala.runtime.AbstractFunction0.apply$mcV$sp(AbstractFunction0.scala:12)
    at scala.App$$anonfun$main$1.apply(App.scala:60)
    at scala.App$$anonfun$main$1.apply(App.scala:60)
    at scala.collection.LinearSeqOptimized$class.foreach(LinearSeqOptimized.scala:59)
    at scala.collection.immutable.List.foreach(List.scala:76)
    at scala.collection.generic.TraversableForwarder$class.foreach(TraversableForwarder.scala:30)
    at scala.App$class.main(App.scala:60)
    at jmullin.api.Test$.main(API.scala:7)
    at jmullin.api.Test.main(API.scala)
Caused by: net.liftweb.json.MappingException: No usable value for foo
Did not find value which can be converted into java.lang.String
    at net.liftweb.json.Meta$.fail(Meta.scala:191)
    at net.liftweb.json.Extraction$.mkValue$1(Extraction.scala:357)
    at net.liftweb.json.Extraction$.build$1(Extraction.scala:317)
    at net.liftweb.json.Extraction$$anonfun$12.apply(Extraction.scala:253)
    at net.liftweb.json.Extraction$$anonfun$12.apply(Extraction.scala:253)
    at scala.collection.TraversableLike$$anonfun$map$1.apply(TraversableLike.scala:233)
    at scala.collection.TraversableLike$$anonfun$map$1.apply(TraversableLike.scala:233)
    at scala.collection.LinearSeqOptimized$class.foreach(LinearSeqOptimized.scala:59)
    at scala.collection.immutable.List.foreach(List.scala:76)
    at scala.collection.TraversableLike$class.map(TraversableLike.scala:233)
    at scala.collection.immutable.List.map(List.scala:76)
    at net.liftweb.json.Extraction$.instantiate$1(Extraction.scala:253)
    at net.liftweb.json.Extraction$.newInstance$1(Extraction.scala:286)
    at net.liftweb.json.Extraction$.build$1(Extraction.scala:315)
    at net.liftweb.json.Extraction$.mkValue$1(Extraction.scala:351)
    ... 29 more
Caused by: net.liftweb.json.MappingException: Did not find value which can be converted into java.lang.String
    at net.liftweb.json.Meta$.fail(Meta.scala:191)
    at net.liftweb.json.Extraction$.convert(Extraction.scala:403)
    at net.liftweb.json.Extraction$.build$1(Extraction.scala:314)
    at net.liftweb.json.Extraction$.mkValue$1(Extraction.scala:351)
    ... 42 more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T19:17:13.987

事实证明，lift-json 在后台对类到构造函数映射进行了一些记忆，而忽略了类型参数。当对具有不同类型参数的同一个类执行查找时，会返回旧的构造函数，从而导致此处出现混淆。谜团解决了（虽然问题不是）。

# c# - 当我以编程方式填充 ComboBox 时没有事件触发

> ID：15281790
> 
> 赞同：0
> 
> 时间：2013-03-07T21:09:02.907
> 
> 标签：c#, winforms, events, combobox

为了使其尽可能简单：ComboBox1 绑定到一个空列表（在 Form1 加载事件处理程序中），并且有一个与 ComboBox1 关联的事件处理程序：

```
private void CB1_SelectedIndexChanged(object sender, EventArgs e)
{
    MessageBox.Show("Event fired");
}

private void Form1_Load(object sender, EventArgs e)
{
     CB1.DataSource = list1;
     CB1.ValueMember = "Name";
     CB1.DisplayMember = "Name";
} 
```

表单加载完毕，CB1.SelectedIndex = -1, CB1.Text = "", CB1.Items.Count = 0

当我单击 Button1 时，会填充 list1。现在情况如下：CB1.SelectedIndex = 0, CB1.Text = "Some Text", CB1.Items.Count =196

但是，事件没有触发，尽管 SelectedIndex 从 -1 变为 0，并且我没有得到 MessageBox.Show（“事件触发”）。但是，当用户从列表中选择某个项目时，会触发该事件。此外，还有另一个按钮可以清除 list1，从而清除 CB1.Items。按下此按钮时，事件也会触发（SelectedIndex 从 X 变为 -1）。

我尝试使用其他事件，例如 SelectedValueChanged、TextChanged、SelectionChangeCommitted，但没有成功。

虽然这个问题有一个简单的暴力解决方法，但我仍然不明白为什么会出现这个问题，因此无法预料类似的情况。这就是为什么如果有人向我解释为什么在我描述的情况下没有事件发生，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T21:44:55.690

我的评论得到了足够的关注，所以我应该把它作为一个潜在的答案似乎是合适的。您应该确保已通过委托或在设计器中使用组合框本身的属性将事件实际分配给方法。

```
// Somewhere in the form load or init events
CB1.SelectedIndexChanged += new EventHandler(CB1_SelectedIndexChanged); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T21:52:17.943

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
        this.button1.Click += new System.EventHandler(this.comboBox1_SelectionChangeCommitted);
    }
    private void Form1_Load(object sender, EventArgs e)
    {
        List<string> list = new List<string> { "a", "b", "c" };
        comboBox1.DataSource = list;
        comboBox1.SelectedIndex = 0;
    }
    private void comboBox1_SelectionChangeCommitted(object sender, EventArgs e)
    {
        MessageBox.Show(comboBox1.SelectedValue.ToString());
    }
    private void button1_Click(object sender, EventArgs e)
    {
        comboBox1.SelectedIndex = 1;

    }
} 
```

# sql - 不同的顺序没有到位

> ID：15281795
> 
> 赞同：-1
> 
> 时间：2013-03-07T21:09:38.457
> 
> 标签：sql, sql-server

我有一个临时表，列出了按不同列排序的名称列表，例如

```
@table:

John, 1
Mary, 3
Mary, 5
Mary, 7
John, 8
Kyle, 9
Brad, 10 
```

当我调用 simple 时`select * from @table`，这就是我得到的，但是当我调用 a 时，`select distinct name from @table`我得到了：

```
Kyle
John
Mary
Brad 
```

为什么不使用就地订购？这是我不知道的 sql 怪癖吗？我希望（并希望）它是：

```
John
Mary
Kyle
Brad 
```

编辑：附加问题：由于我在原始表上“排序”，是否有功能原因导致它不会持续存在？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T21:20:48.140

使用时，`SELECT DISTINCT`您不能按未选择的列排序。做你想做的最简单的方法是：

```
SELECT name FROM @table GROUP BY name ORDER BY min(id); 
```

# java - 带有电子邮件附件的 Tomcat 文件上传失败 - 权限被拒绝

> ID：15281799
> 
> 赞同：0
> 
> 时间：2013-03-07T21:10:04.743
> 
> 标签：java, file, tomcat, upload, permissions

我以前曾经工作过的代码，但现在开始失败，我的猜测可能是服务器上的某些内容发生了更改，可能是权限或其他内容。我需要弄清楚它可能是什么才能修复。

基本上我有：

1.  将文件发送到服务器的 POST 请求
2.  文件通过电子邮件作为附件发送

这是准备 Mimeparts 的代码

```
DiskFileItemFactory factory = new DiskFileItemFactory();        
ServletFileUpload upload = new ServletFileUpload(factory);

//parse request
List<?> items = upload.parseRequest(request);

HashMap<String, FileItem> form = new HashMap<String, FileItem>(); 

Iterator<?> iterator = items.iterator();
while (iterator.hasNext()) {
    FileItem item = (FileItem) iterator.next();           
    form.put(item.getFieldName(), item);
}

//handle attachment
if(form.containsKey("uploaded_file"))
{
    FileItem fileItem = form.get("uploaded_file");
    String fileName = fileItem.getName();
  File f = new File(fileName);
    try {
        InputStream inputStream = fileItem.getInputStream();

        OutputStream out=new FileOutputStream(f);
        byte buf[]=new byte[1024];
        int len;
        while((len=inputStream.read(buf))>0)
            out.write(buf,0,len);

        out.close();
        inputStream.close();

    }  catch (Exception e) {
        e.printStackTrace();
    }

    MimeBodyPart attachment = new MimeBodyPart();
    attachment.setDataHandler(new DataHandler(new FileDataSource(f)));
    attachment.setFileName(fileName);
}

//below I use a javax.mail.Transport to send it via email      
//mimeparts : new MimeBodyPart[]{attachment} 
```

以前的代码可以正常工作，刚开始抛出这个异常：

```
    javax.mail.MessagingException：发送消息时出现IOException；
      嵌套异常是：
        java.io.FileNotFoundException：uploaded_file_name.zip（权限被拒绝）
        com.sun.mail.smtp.SMTPTransport.sendMessage(SMTPTransport.java:1141)
        javax.mail.Transport.send0(Transport.java:195)
        javax.mail.Transport.send(Transport.java:124)

```

# ruby-on-rails - 什么是迁移索引？

> ID：15281800
> 
> 赞同：0
> 
> 时间：2013-03-07T21:10:06.763
> 
> 标签：ruby-on-rails

我正在阅读 RoR 的在线指南，并看到了这段用于迁移的代码。

```
change_table: products do |t|
  #some code here

  t.string :part_number
  t.index :part_number

  #some code here
end 
```

这里的索引是什么？由于我已经有一个名为 part_number 的字符串列，为什么可以添加另一个具有相同名称但类型不同的列？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T21:12:19.213

这是说`part_number`将用作索引。列的名称不是`part_number`。

# javascript - 如何在没有 Fleegix.js 的情况下使用 timezone-js 加载时区文件？

> ID：15281801
> 
> 赞同：2
> 
> 时间：2013-03-07T21:10:07.893
> 
> 标签：javascript, timezone

我想在我的应用程序中使用 timezone-js，但我不是 Fleegix.js，它“正常工作”。自述文件说要在规范文件中查找示例，但看起来它使用了 Node.js 的东西。有没有办法为 Jquery 或只是原始 JS 或其他东西进行加载？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T13:26:34.820

我也对那些文档感到困惑。这不是很清楚，但是已经内置了 jQuery 支持。您只需设置`async`为`false`即可使其工作。不知道为什么 - 因为 ajax 无论如何都是异步的 - 但这是设置它以使其与 jQuery 一起使用的标志。不需要其他接线。

```
timezoneJS.timezone.zoneFileBasePath = 'scripts/tz';
timezoneJS.timezone.init({ async: false }); 
```

此外 - 还有其他库做同样的事情。您可能会发现其中一种[更具](https://stackoverflow.com/a/15171030/634824)吸引力。

# wpf - 如何使用 caliburn.micro 从视图模型设置滚动位置？

> ID：15281804
> 
> 赞同：0
> 
> 时间：2013-03-07T21:10:14.360
> 
> 标签：wpf, mvvm, caliburn.micro

我`ListBox`认为，绑定到一个动态增长的集合。我希望滚动位置跟随最后添加的项目（附加到列表底部）。如何使用 Caliburn.Micro 实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T14:08:25.247

另一种方法是使用事件聚合器将消息发布到视图。

就像是：

```
Aggregator.Publish(ItemAddedMessage<SomeItemType>(itemThatWasJustAdded)); 
```

在视图中：

```
public class SomeView : IHandle<ItemAddedMessage<SomeItemType>>
{

   public void Handle(ItemAddedMessage<SomeItemType> message)
   {
       // Implement view specific behaviour here
   }
} 
```

这取决于您的要求，但至少视图负责显示问题，您仍然可以测试 VM

您也可以只在视图中实现代码 - 因为它似乎是一个视图问题（例如使用列表框提供的事件）

一种行为也会很有用，但可能与您的类型的耦合度较低 - 例如一种通用行为`SeekAddedItemBehaviour`，它挂钩列表框事件以查找最后一项。不确定列表框是否公开了所需的事件，但值得一看

编辑：

好的，这可能会完全停止 - 你应该能够将此行为附加到列表框，它应该负责其余的：

```
public class ListBoxSeekLastItemBehaviour : System.Windows.Interactivity.Behavior<ListBox>
{
    private static readonly DependencyProperty ItemsSourceWatcherProperty = DependencyProperty.Register("ItemsSourceWatcher", typeof(object), typeof(ListBoxSeekLastItemBehaviour), new PropertyMetadata(null, OnItemsSourceWatcherPropertyChanged));

    private ListBox _listBox = null;

    private static void OnItemsSourceWatcherPropertyChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        ListBoxSeekLastItemBehaviour source = d as ListBoxSeekLastItemBehaviour;

        if (source != null)
            source.OnItemsSourceWatcherPropertyChanged();
    }

    private void OnItemsSourceWatcherPropertyChanged()
    {
        // The itemssource has changed, check if it raises collection changed notifications
        if (_listBox.ItemsSource is INotifyCollectionChanged)
        {
            // if it does, hook the CollectionChanged event so we can respond to items being added
            (_listBox.ItemsSource as INotifyCollectionChanged).CollectionChanged += new NotifyCollectionChangedEventHandler(ListBoxSeekLastItemBehaviour_CollectionChanged);
        }
    }

    void ListBoxSeekLastItemBehaviour_CollectionChanged(object sender, NotifyCollectionChangedEventArgs e)
    {
        if (e.Action == NotifyCollectionChangedAction.Add && e.NewItems.Count > 0)
        {
            // If an item was added seek it
            ScrollIntoView(e.NewItems[0]);
        }
    }

    protected override void OnAttached()
    {
        base.OnAttached();

        // We've been attached - get the associated listbox
        var box = this.AssociatedObject as ListBox;

        if (box != null)
        {
            // Hold a ref
            _listBox = box;

            // Set a binding to watch for property changes
            System.Windows.Data.Binding binding = new System.Windows.Data.Binding("ItemsSource") { Source = _listBox; }  

            // EDIT: Potential bugfix - you probably want to check the itemssource here just 
            // in case the behaviour is applied after the original ItemsSource binding has been evaluated - otherwise you might miss the change
            OnItemsSourceWatcherPropertyChanged();
        }
    }

    private void ScrollIntoView(object target)
    {
        // Set selected item and try and scroll it into view
        _listBox.SelectedItem = target;
        _listBox.ScrollIntoView(target);
    }
} 
```

您可能想稍微整理一下，并确保在更改`CollectionChanged`时删除事件处理程序。`ItemsSource`

您也可能想调用它`SeekLastAddedItemBehaviour`或`SeekLastAddedItemBehavior`- 我倾向于保留美国拼写，因为它与 Microsoft 的拼写匹配。我认为`SeekLastItem`听起来它会滚动到列表中的最后一项而不是最后添加的项目

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T22:02:34.450

您可以使用 GetView() 引用视图模型中的视图。这也将视图和视图模型耦合在一起。

```
var myView = GetView() as MyView;
myView.MyListBox.DoStuff 
```

另一种选择是创建行为。 [这](http://www.codeproject.com/Articles/120474/Programmatic-Silverlight-Tree-View-Control-Node-Ex)是一个如何使用行为来扩展`TreeView`视图模型的示例。这同样适用于`ListBox`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-07T12:27:49.083

实际上，有一种更简单的方法可以实现这一点，而无需上述任何方法。

只需使用以下内容扩展您的列表框：

```
namespace Extensions.Examples {
    public class ScrollingListBox : ListBox
        {
            protected override void OnItemsChanged(System.Collections.Specialized.NotifyCollectionChangedEventArgs e)
            {
                if (e.NewItems != null)
                {
                    int newItemCount = e.NewItems.Count;
                    if (newItemCount > 0)
                        this.ScrollIntoView(e.NewItems[newItemCount - 1]);

                    base.OnItemsChanged(e);
                }
            }
        }
} 
```

然后在 Xaml 中，声明扩展类的位置，如下所示：

```
xmlns:Extensions="clr-namespace:Extensions.Examples" 
```

当您创建列表框时，而不是使用

```
<Listbox></Listbox> 
```

只需使用您的扩展类

```
<Extensions:ScrollingListBox></Extensions:ScrollingListBox> 
```

# sql - INSERT-OUTPUT 包括来自其他表的列

> ID：15281814
> 
> 赞同：29
> 
> 时间：2013-03-07T21:10:50.723
> 
> 标签：sql, sql-server, tsql, sql-insert

我有一个存储过程需要插入到三个不同的表中，但我需要获取从一个输入生成的 ID 并使用它插入到下一个表中。我熟悉这个`INSERT-OUTPUT`结构，但我不确定在这种特殊情况下如何使用它。

```
DECLARE @guids TABLE ( [GUID] UNIQUEIDENTIFIER );
DECLARE @contacts TABLE ( [ContactID] INT, [GUID] UNIQUEIDENTIFIER );
DECLARE @mappings TABLE ( [TargetID] INT, [GUID] UNIQUEIDENTIFIER );

INSERT @guids ( [GUID] ) ...

INSERT [Contacts] ( [FirstName], [LastName], [ModifiedDate] )
OUTPUT [inserted].[ContactID], g.[GUID]
INTO @contacts
SELECT [First_Name], [Last_Name], GETDATE()
FROM [SourceTable] s
JOIN @guids g ON s.[GUID] = g.[GUID]

INSERT [TargetTable] ( [ContactID], [License], [CreatedDate], [ModifiedDate] )
OUTPUT [inserted].[TargetID], c.[GUID]
INTO @mappings
SELECT c.[ContactID], [License], [CreatedDate], [CreatedDate]
FROM [SourceTable] s
JOIN @contacts c ON s.[GUID] = c.[GUID] 

INSERT [Mappings] ( [TargetID], [SourceGUID] )
SELECT [TargetID], [GUID]
FROM @mappings 
```

但我收到以下错误：

> 无法绑定多部分标识符“g.GUID”。
> 
> 无法绑定多部分标识符“c.GUID”。

如果我改用，我会得到类似的错误`s.GUID`。`OUTPUT`是否可以在子句中进行某种联接？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-03-07T21:31:47.243

我不确定这是否是最佳选择，但似乎您可以使用以下方法来解决问题`MERGE`：

```
MERGE [Contacts]  trgt
USING 
(  
  SELECT [First_Name], [Last_Name], g.[GUID] as [GUID]
  FROM [SourceTable] s
  JOIN @guids g ON s.[GUID] = g.[GUID]
)src ON (1=0)
WHEN NOT MATCHED THEN INSERT ( [FirstName], [LastName], [ModifiedDate] )
 VALUES (src.[First_Name],src.[Last_Name], GETDATE())
OUTPUT [inserted].[ContactID], src.[GUID]
INTO @contacts 
```

# arrays - 将 (ixj) 数组中的行输出到文本文件中的单个 (5xj/5) 数组中

> ID：15281819
> 
> 赞同：1
> 
> 时间：2013-03-07T21:11:06.840
> 
> 标签：arrays, io, fortran

在我正在编写的程序中，我创建了一个已分配的最终产品数组 AFT(n,92)。在我的输出中，我想将每一行呈现为它自己的表格，5 列宽。

所以在这种情况下，它将是 n 个 19 行 X 5 列的单独表，最后一行只有 2 个值。我尝试将其作为一个 do 循环来执行，如下面的代码片段所示，但输出只是一个长列。我不知道从这里去哪里。

```
DO i=1,n
    WRITE(4,800) t(i), ' HHMM LDT'   !Writes the table header using an array which holds the corresponding time value
    800 FORMAT(14, A9)
    DO j=1,92
        WRITE(4,900) AFT(i,j)
        900 FORMAT(5ES23.14)
    END DO
END DO 
```

我相信这种情况正在发生，因为由于使用循环，写入命令是针对每个 j 单独执行的，但是当我尝试提出另一种方法时，我对 FORTRAN 的缺乏经验导致我陷入空白。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T21:15:41.893

是的，每个 write 语句都会产生一行文本输出。如果您希望多个项目包含在同一输出记录中，则必须将它们包含在 write 语句中。如果要包含数组的某些部分，可以使用以下技术：

```
do i=1, N
   write (*, *) (array (i,j), j=1, 5)
end do 
```

或者

```
do i=1, N
   write (*, *) array (i, 1:5)
end do 
```

第一个是使用隐含的 do 循环，第二个是数组部分。

# android - Android SDK - 在列表视图行中定位元素

> ID：15281830
> 
> 赞同：-3
> 
> 时间：2013-03-07T21:11:31.797
> 
> 标签：android, android-layout

出于某种原因，我在使用 eclipse 和 android SDK 进行设计方面遇到了麻烦。制作布局非常困难，而且不像 WPF/Visual Studio 那样容易。

我正在尝试完成以下任务：

```
Top: what I have
Bottom: what I want to achieve 
```

[http://imgur.com/AsaTuGq](http://imgur.com/AsaTuGq)

当前代码：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:padding="10dip"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<TextView
    android:textIsSelectable="false"
    android:id="@+id/line1"
    android:layout_width="match_parent"
    android:layout_height="0dp"
    android:textSize="18sp"
    android:layout_weight="1"
    android:textStyle="bold"
    />

<TextView
    android:textIsSelectable="false"
    android:id="@+id/line2"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:textSize="18sp"
    />

<TextView
    android:textIsSelectable="false"
    android:id="@+id/line3"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_gravity="center"
    android:textSize="18sp"
    />

</LinearLayout> 
```

编辑：

我也尝试在水平线性布局中使用垂直线性布局，但这只会产生很多错误。

编辑2：

差评是怎么回事？

编辑3：

试过这个链接：[http](http://android-developers.blogspot.ca/2009/02/android-layout-tricks-1.html) ://android-developers.blogspot.ca/2009/02/android-layout-tricks-1.html 用文本视图替换图像，但日期与第一行对齐..嗯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T21:25:14.293

您应该使用RelativeLayout：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    tools:context=".MainActivity" >

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="false"
        android:layout_alignParentTop="true"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Medium Text"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <TextView
            android:id="@+id/textView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Medium Text"
            android:textAppearance="?android:attr/textAppearanceMedium" />

    </LinearLayout>

    <TextView
        android:id="@+id/textView3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_centerVertical="true"
        android:text="Medium Text"
        android:textAppearance="?android:attr/textAppearanceMedium" />

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T21:28:11.427

我会为此建议`RelativeLayout`一个

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:padding="10dip"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<TextView
    android:textIsSelectable="false"
    android:id="@+id/line1"
    android:layout_width="wrap_content"
    android:layout_height="0dp"
    android:textSize="18sp"
    android:layout_weight="1"
    android:textStyle="bold"
    android:layout_alignParentLeft="true"
    />

<TextView
    android:textIsSelectable="false"
    android:id="@+id/line2"
    android:layout_width="wrap_content"
    android:layout_height="match_parent"
    android:textSize="18sp"
    android:layout_alignParentLeft="true"
    android:layout_below="@_id/line1"
    />

<TextView
    android:textIsSelectable="false"
    android:id="@+id/line3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:gravity="center_vertical"
    android:layout_alignParentRight="true"
    android:textSize="18sp"
    />
</RelativeLayout> 
```

变化：

更改`LinearLayout`为`RelativeLayout`用于`android:layout_alignParentLeft="true"`前两行和`android:layout_below="@+id/line1"`第二行。将日期移到右边，`android:layout_alignParentRight="true"`希望`android:gravity="center_vertical"`这能满足您的需要。

# php - 从当前日期时间减去 datetime 得到一个计时器

> ID：15281833
> 
> 赞同：1
> 
> 时间：2013-03-07T21:11:39.363
> 
> 标签：php, mysql, datetime

我在 mysql 数据库中有一个列，它是已创建帖子的到期时间.... 我有一个页面试图显示在时间达到每个帖子的到期时间之前还剩下多少小时和秒。例如，我的数据库中有这个：

2013-03-07 13:15:39

这显示了这篇文章什么时候过期......

现在我希望能够转到显示每个帖子的页面，然后显示每个帖子过期之前的剩余时间（基于当前时间）。

2013-03-07 12:15:39

到目前为止我一直在使用这个：

```
$now = new DateTime(date("h:i:s",time()));
$exp = new DateTime($row['time_expires']);
$diff = $now->diff($exp);
printf('%d hours, %d minutes, %d seconds', $diff->h, $diff->i, $diff->s); 
```

$row 从数据库中获取帖子的位置

它一直在工作，但有时似乎有问题...我不知道为什么，但有时效果很好，但是当我再次检查时，时间说 15 小时到期，而实际上应该说 2 小时

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T21:16:28.713

`h`in`date()`是 12 小时制，这会造成混淆，因为`DateTime`会将其解释为 24 小时制。默认情况下，对象将`DateTime`具有当前时间，因此只需使用：

```
 $now = new DateTime();
  $exp = new DateTime($row['time_expires']);
  $diff = $now->diff($exp); 
```

但 Marc B 建议直接在查询中执行此操作可能更好。

# java - 集合 - clear()

> ID：15281834
> 
> 赞同：0
> 
> 时间：2013-03-07T21:11:41.527
> 
> 标签：java, collections, iterator

我创建了一个集合并用集合元素填充它，但是当我尝试使用构造（或其他方法）遍历这个容器时，`foreach`它什么也没有返回，我试图获取 size() 并看到了我的期望（适当的数字）但似乎每个集合内的容器不为空是空的

**代码片段示例：**

```
Item it1, it2;
List<Collection<Item>> hull = new ArrayList<Collection<Item>>();
List<Item> seq = new ArrayList<Item>();
seq.add(it1);
hull.add(seq);
seq.clear();
seq.add(it2);
hull.add(seq);
for (<Collection<Item> c: hull)
      System.out.println(c); 
```

这只是我所做的一个简化片段请提出替代方案。我在哪里做错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T21:14:42.150

每次你打电话给`seq.clear()`你清空内部的 ArrayList。不要忘记，当您将对象添加到 Collection 时，您只添加了引用。你不克隆对象。您应该在每次迭代时创建一个新的 ArrayList 对象。

例如

```
List<Collection<Item>> hull = new ArrayList<Collection<Item>>();
List<Item> seq = new ArrayList<Item>();
seq.add(it1);
hull.add(seq);
List<Item> seq2 = new ArrayList<Item>();
seq2.add(it2)
hull.add(seq2); 
```

编辑：

编译的完整示例：

```
import java.util.ArrayList;
import java.util.Collection;
import java.util.List;

public class NewClass1 {

    static class Item {

        String a;

        public Item(String a) {
            this.a = a;
        }
        @Override
        public String toString() {
            return a;
        }
    }

    public static void main(String[] args) {
        List<Collection<Item>> hull = new ArrayList<Collection<Item>>();
        List<Item> seq = new ArrayList<Item>();
        Item it1 = new Item("item 1");
        seq.add(it1);
        hull.add(seq);
        List<Item> seq2 = new ArrayList<Item>();
        Item it2 = new Item("item 2");
        seq2.add(it2);
        hull.add(seq2);

        for (Collection<Item> current : hull) {
            for (Item item : current) {
                System.out.println(item);
            }
        }
    }
} 
```

输出：

```
run:
item 1
item 2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T21:21:31.303

您的代码，更正为编译：

```
package sample;

import java.util.ArrayList;
import java.util.List;

public class Item {
   public static void main( String[] args ) {
      List< List< Item >> hull = new ArrayList<>();
      List< Item >        seq = new ArrayList<>();
      seq.add( new Item());
      hull.add( seq );
      seq = new ArrayList<>(); // in place of seq.clear();
      seq.add( new Item());
      hull.add( seq );
      for( List<Item> c: hull ) {
         System.out.println( c.get( 0 ));
      }
   }
} 
```

输出：

```
sample.Item@6da264f1
sample.Item@40914272 
```

如您所见，没有问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T21:18:01.080

为了遍历集合的集合，您需要一个嵌套的 foreach。

```
 for(Collection<Item> c: hull)
    {
        for(Item i: c)
        {

        }
    } 
```

顺便说一句，您是否知道 it1 和 it2 未初始化，这就是为什么您什么也没得到？

size() 将始终为您提供集合的大小，但它们可能包含空值（就像您的情况一样）。

# c# - 有时我的 listBox1 或我在里面更新的值会闪烁一秒或更短，我该如何解决？

> ID：15281836
> 
> 赞同：2
> 
> 时间：2013-03-07T21:11:44.470
> 
> 标签：c#, winforms

这是我正在更新的代码`ListBox`：

```
this.Invoke(new Action(() => data = new List<string>()));
this.Invoke(new Action(() => data.Add("Gpu Temeprature --- " + sensor.Value.ToString())));
this.Invoke(new Action(() => listBox1.DataSource = null));
this.Invoke(new Action(() => listBox1.DataSource = data));
this.Invoke(new Action(() => listBox1.Invalidate())); 
```

一旦我为数据添加了一个新的变量数据`List<string>`，所以现在传感器（sensor.Value）的值正在更新，我的意思是每次删除旧值并添加一个新值。

有时项目本身`ListBox`闪烁不到一秒钟左右，有时只有`sensor.Value`闪烁。

试图添加一个`Validate()`没有`ListBox`帮助。

这是后台做工作事件：

```
private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
{
    BackgroundWorker worker = sender as BackgroundWorker;
    while (true)
    {

        if ((worker.CancellationPending == true))
        {
            e.Cancel = true;
            break;
        }
        else
        {
            if (tempCpuValue >= (float?)nud1.Value || tempGpuValue >= (float?)nud1.Value)
            {
                soundPlay = true;
                blinking_label();
                NudgeMe();
            }
            else
            {
                soundPlay = false;
                stop_alarm = true;

            }
            cpuView();
            gpuView();
        }
    }
} 
```

我还有两个 listBox 事件：

```
private void listBox1_MeasureItem(object sender, MeasureItemEventArgs e)
{
    e.ItemHeight = 25;
}

private void listBox1_DrawItem(object sender, DrawItemEventArgs e)
{
    if (e.Index == -1)
    {
    }
    else
    {

        ColorText.ColorListBox(data, e);

    }
} 
```

另一个类的 ColorText 函数为 listBox 中的项目着色：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Drawing;
using System.Windows.Forms;

namespace GatherLinks
{
    class ColorText
    {

        public static void Texts(RichTextBox box, string text, Color color)
        {
            box.SelectionStart = box.TextLength;
            box.SelectionLength = 0;

            box.SelectionColor = color;
            box.AppendText(text);
            box.SelectionColor = box.ForeColor;
        }

        public static void ColorListBox(List<string> data, DrawItemEventArgs e)
        {
            string strLeft = null;
            string strMid = "---";
            string strRight = null;
            if (data[e.Index].Contains(strMid))
            {
                int index = data[e.Index].IndexOf(strMid);
                strLeft = data[e.Index].Substring(0, index);
                strRight = data[e.Index].Substring(index + strMid.Length);
            }

            using (Font f = new Font(FontFamily.GenericSansSerif, 20, FontStyle.Regular))
            {
                float startPos;
                e.Graphics.DrawString(strLeft, f, Brushes.Red, e.Bounds.X, e.Bounds.Y);
                startPos = e.Graphics.MeasureString(strLeft, f).Width;
                e.Graphics.DrawString(strMid, f, Brushes.Black, e.Bounds.X + startPos, e.Bounds.Y);
                startPos = e.Graphics.MeasureString(strLeft + strMid, f).Width;
                e.Graphics.DrawString(strRight, f, Brushes.Green, e.Bounds.X + startPos, e.Bounds.Y);
            }
        }
    }
} 
```

我怎样才能使它`ListBox`不会每隔几秒钟或每次更新新的sensor.Value值时闪烁？我不确定为什么以及何时发生，但`ListBox`项目和传感器。值正在闪烁。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T21:26:07.890

我认为问题出在您正在清除`DataSource`然后再次设置它的事实。不必将数据源设置为`null`然后在数据更改时将其重置。

尝试删除这两行，看看闪烁是否消失：

```
this.Invoke(new Action(() => listBox1.DataSource = null));
this.Invoke(new Action(() => listBox1.DataSource = data)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T21:26:45.700

您对`Invoke`方法的使用是错误的，这可能是闪烁的原因。

尝试像这样更改代码的第一部分：

```
this.Invoke(new Action(() =>
    {
        data = new List<string>();
        data.Add("Gpu Temeprature --- " + sensor.Value.ToString());
        listBox1.DataSource = null;
        listBox1.DataSource = data;
        listBox1.Invalidate()
    })); 
```

每次调用该`Invoke`方法时，都会向应用程序的消息队列发布一条消息，稍后在 UI 不忙时在 UI 线程中进行处理。`Invoke`通过多次调用，您将发送多条消息，这些消息将分别处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T21:42:59.953

一旦我解决了把它放在我的表格上：

```
protected override CreateParams CreateParams
{
    get
    {
        CreateParams cp = base.CreateParams;
        cp.ExStyle |= 0x02000000;  // Turn on WS_EX_COMPOSITED
        return cp;
    }
} 
```

# grails - remoteLink 找不到控制器

> ID：15281837
> 
> 赞同：-1
> 
> 时间：2013-03-07T21:11:44.437
> 
> 标签：grails, groovy

我可以使用以下链接在 gsp 视图中调用控制器的关闭：

```
 <g:link url="${request.contextPath}/data/${params.name}/myController/myClosure">
 Text Goes Here
 </g:link> 
```

但是我想使用 remoteLink 因为我不想渲染任何东西，只需执行一项任务。我想使用remoteLink是否正确？

不幸的是 remoteLink 没有 url 属性。所以我使用控制器和动作：

```
 <g:remoteLink controller="myController" action="myClosure">
 Text Goes Here
 </g:remoteLink> 
```

哪个未成功使用 url “/myApp/MyController/MyClosure”，这与有效的 url 不同。

所以我的问题是，

1.  我的控制器是如何获得更长的网址的？它没有出现在我的 URLMappings 中。这是什么控制的？

2.  无论如何我可以使用 remoteLink 访问该网址吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T22:31:16.100

URL 映射必须命名为：

```
static mappings = {
   name <mapping name>: <url pattern> {
      // …
   }
} 
```

然后你可以这样做：

```
 <g:remoteLink mapping="<mapping name>" controller="myController" action="myClosure">
 Text Goes Here
 </g:remoteLink> 
```

# c# - Windows 8 原生自定义控件

> ID：15281845
> 
> 赞同：3
> 
> 时间：2013-03-07T21:12:01.160
> 
> 标签：c#, windows-8, windows-runtime, custom-controls

我想用 C# 中的 Windows 8 API 制作一个自定义控件，以便它可以在通过商店分发的 RT 应用程序上运行。

我查看了可以添加到项目中的内容，发现**Templated Control**和**User Control**。两者都允许我将其他控件和一些逻辑组织成一个新的控件以实现可重用性。

但这不是我想要的。我希望能够自定义绘画和创建控件。如果他们将其删除，我会感到震惊，但老实说，我不确定是否可以。我基本上是在寻找要继承的类以及要覆盖的方法/事件以让我自己绘制控件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T01:03:11.040

我找到了一种使用我以前不知道的**模板化控制选项的方法。**本质上，我的自定义控件有一个画布，我通过将对象（线条、图像等）添加为子对象并在事件中对其进行操作来“绘制”它们。

[本教程](http://blogs.u2u.be/diederik/post/2012/12/06/Building-Custom-Controls-for-Windows-8-Store-apps.aspx "为 Windows 8 应用商店应用构建自定义控件")帮助我弄清楚我在做什么。

我见过其他人说他们创建了一个矩形并使用特殊的画笔绘制它，要么是 ImageBrush（他们在背景中绘制图像）要么是 DrawingBrush。

希望这两种方法中的一种可以帮助任何寻找与我相同的东西的人。

# .net - 表单加载事件中未处理的异常

> ID：15281848
> 
> 赞同：4
> 
> 时间：2013-03-07T21:12:17.237
> 
> 标签：.net, exception, event-handling

我刚刚在.Net 中遇到了异常处理的奇怪行为。（我在 MS Visual Studio 2008 中使用 C#，但我在这里看到的一个问题似乎暗示我所看到的在整个 .Net 世界中都是正确的。）我正在编写一个普通的 WinForm 应用程序。我故意在任何 try 块之外的 form_load 事件处理程序中引发未处理的异常。我没有收到任何通知。如果在正常方法中发生未处理的异常，则会弹出一条消息，告诉我发生了异常，并提供有关问题的一些信息。但是在处理程序中，代码只是悄悄地退出函数，而不让任何人知道它发生了。如果我添加一个 try/catch 块，则会按预期捕获异常。

这种行为是否确实发生在所有事件处理程序中？这是预期的行为吗？如果是这样，是不是因为如果事件处理程序意外停止，就会有太多坏事发生的危险？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-01T06:22:26.837

无论是在 VS 内部还是外部，当有一个调试器附加到进程时，就会发生这种行为。但是，作为调试版本没有区别。*如果在没有*附加调试器的情况下在 VS 外部运行，则会触发未处理的异常。你可以检查

[为什么表单加载无法捕获异常？](https://stackoverflow.com/questions/3209706/why-the-form-load-cant-catch-exception), 并且 [VS2010 不会在 64 位版本的 Windows 上的 WinForms 应用程序中显示未处理的异常消息，以](https://stackoverflow.com/questions/4933958/vs2010-does-not-show-unhandled-exception-message-in-a-winforms-application-on-a)寻求可能的解决方案。

编辑：据我所知，此行为仅特定于 form_load 事件处理程序。

# ios - 用于识别用户的 UDID 编号

> ID：15281861
> 
> 赞同：0
> 
> 时间：2013-03-07T21:13:32.630
> 
> 标签：ios, objective-c, udid

您好 StackOverflow 成员 :) 我想知道是否可以发送 UDID 号码以通过调用 Web 服务来验证我的应用程序的用户？

在我的数据库中，我将 UDID 作为主键以及引用此键的可用信用数。

苹果允许吗？如果是，我怎样才能以编程方式获取 UDID？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T21:18:19.797

可以获得序列号但我认为不建议使用UDID

对于序列号，您可以使用此代码

```
- (NSString*)getSerialNumber
{
    CFTypeRef serialNumberAsCFString;
    io_service_t platformExpert = IOServiceGetMatchingService(
        kIOMasterPortDefault, IOServiceMatching("IOPlatformExpertDevice"));
    if (platformExpert)
        {
            serialNumberAsCFString = IORegistryEntryCreateCFProperty(
                platformExpert, CFSTR(kIOPlatformSerialNumberKey), 
                kCFAllocatorDefault, 0);
        }
    IOObjectRelease(platformExpert);
    NSString *serial = 
        [[NSString alloc] initWithFormat:@"%@",serialNumberAsCFString];
    return serial;
} 
```

[代码参考](http://www.iphonedevforums.com/forum/sdk-coding-help/145-unique-identifier-iphone.html)

但是，您可以尝试使用这行代码来获取 UDID，但我不确定它是否会给出所需的结果。Apple 可能会拒绝该应用程序，并且此 UDID 功能在较新版本的 iOS 中已弃用。

```
NSString *uid;
uid= [[UIDevice currentDevice] uniqueIdentifier];
NSLog(@"udid is %@",uid); 
```

# ios - 在 MobileSubstrate 调整中显示 UIView？

> ID：15281862
> 
> 赞同：0
> 
> 时间：2013-03-07T21:13:38.677
> 
> 标签：ios, tweak, springboard, theos, cydia-substrate

我正在做一个 iOS MobileSubstrate Tweak，我已经连接了 Springboard 和 launch() 方法。现在我想显示一个带有按钮的视图，如果单击它，它将调用 %orig （原始代码）。如果我没有视图控制器，如何显示视图？我会很感激一些帮助。提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-02T16:17:44.657

我相信您想要做的是添加它 `UIViewController *view = [[UIViewController alloc] init];` ，然后从那里配置您想要的视图。

# pdf - 在 MAC 上使用 Applescript 仅从文件夹中删除 PDF 文件

> ID：15281869
> 
> 赞同：1
> 
> 时间：2013-03-07T21:14:01.913
> 
> 标签：pdf, applescript, delete-file

我只需要从网络驱动器上的文件夹中删除 PDF 文件。文件夹中还有其他文件类型我无法触摸。我假设我必须先选择或识别 PF 文件，然后将它们移动到垃圾箱或删除它们。

到目前为止我所拥有的：

```
tell application "Finder"
    set theFolder to "Macintosh HD:Users:Kathlene:Desktop:ABC123_JOB"
    set destFolder to "Server/JOBS/TRANSFER_TRASH/"
    set thePDFs to every file of theFolder whose name extension is "pdf"
    move thePDFs to destFolder
end tell 
```

我得到的错误：

> 错误“无法获取 \"Macintosh HD:Users:Kathlene:Desktop:ABC123_JOB:\" 的每个文件。” “Macintosh HD:Users:Kathlene:Desktop:ABC123_JOB”的每个文件中的编号 -1728

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T21:26:04.330

尝试：

```
tell application "Finder" to delete (files of folder "Macintosh HD:Users:Kathlene:Desktop:ABC123_JOB" whose name extension is "pdf") 
```

# javascript - 用于解析路径字符串的 Javascript 正则表达式

> ID：15281871
> 
> 赞同：3
> 
> 时间：2013-03-07T21:14:03.310
> 
> 标签：javascript, regex, url, url-parameters

我有一个向用户显示照片和相册的应用程序。根据应用程序的当前状态，我显示适当的视图。每次视图更改时，我都会更改 url，然后控制器使用 window.location.hash 获取 url 值

它返回这种形式的字符串：

```
"photos/byalbum/albumid"
"photos/allphotos"
"photos/eachphoto/albumid/photoid" 
```

我的问题是如何使用 javscript 正则表达式解析它以确定我应该显示哪个视图并获取参数（albumId/photoId）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T21:19:11.957

我认为你最好这样做，然后是正则表达式：

```
"photos/eachphoto/albumid/photoid".split("/") 
```

然后你得到你可以检查的数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T21:21:49.823

而不是使用正则表达式，您可能应该简单地将字符串拆分为“/”并检查您需要的数据的每个值。

```
var urlString = <your returned value here>;
var urlPieces = urlString.split("/");

var view = urlPieces[1];
var album = (urlPieces[2]) ? urlPieces[2] : "";
var photo = (urlPieces[3]) ? urlPieces[3] : ""; 
```

然后根据需要使用您的数据。:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-10-12T15:58:56.370

如果有人对这个问题仍然感兴趣，我使用这个 lib: [path-to-regexp](https://www.npmjs.com/package/path-to-regexp)来解决这个问题。

基本上，您可以使用模式将 url 转换为变量。例如：

```
const pattern = 'photos/eachphoto/:albumid/:photoid'
const path = 'photos/eachphoto/10/23'
const converter = pathToRegex.match(pattern, { decode: decodeURIComponent }) 
const params = converter(path)?.params || {} 
```

和参数将类似于：**{ albumid: "10", photoid: "23" }**

# python - Nose：基于 TestCase 的类的生成器

> ID：15281881
> 
> 赞同：3
> 
> 时间：2013-03-07T21:14:32.623
> 
> 标签：python, python-3.x, nose

我想为 TestCase 派生类的变体创建一个生成器。

我尝试的是这样的：

```
import unittest

def create_class(param):
    class Test(unittest.TestCase):
        def setUp(self):
            pass

        def test_fail(self):
            assert False
    return Test

def test_basic():
    for i in range(5):
        yield create_class(i) 
```

我得到的是：

```
======================================================================
ERROR: test_1.test_basic
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/lib/python3.3/site-packages/nose/case.py", line 268, in setUp
    try_run(self.test, names)
  File "/usr/lib/python3.3/site-packages/nose/util.py", line 478, in try_run
    return func()
TypeError: setUp() missing 1 required positional argument: 'self' 
```

产生实例而不是类 ( `yield create_class(i)()`) 给我留下了这个错误：

```
======================================================================
ERROR: test_1.test_basic
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/lib/python3.3/site-packages/nose/case.py", line 198, in runTest
    self.test(*self.arg)
  File "/usr/lib/python3.3/unittest/case.py", line 492, in __call__
    return self.run(*args, **kwds)
  File "/usr/lib/python3.3/unittest/case.py", line 423, in run
    testMethod = getattr(self, self._testMethodName)
AttributeError: 'Test' object has no attribute 'runTest' 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T21:31:40.980

实例化 a 时`TestCase`，您应该传递测试的方法名称：

```
yield create_class(i)('test_fail') 
```

否则，名称默认为`runTest`（因此您得到的最后一个错误）。

另请注意，测试生成器和`TestCase`. 使用以下代码：

```
import unittest

def create_class(param):
    class Test(unittest.TestCase):
        def setUp(self):
            pass

        def test_fail(self):
            print('executed')
            assert False
            print('after assert')

    return Test

def test_basic():
    for i in range(5):
        yield create_class(i)('test_fail') 
```

我得到这个输出：

```
$ nosetests -s
executed
.executed
.executed
.executed
.executed
.
----------------------------------------------------------------------
Ran 5 tests in 0.004s

OK 
```

正如你所看到的，测试没有失败，即使`assert`工作正常。这可能是由于`TestCase`处理了`AssertionError`但`nose`不希望处理的事实，因此它看不到测试失败。

这可以从以下文档中看出[`TestCase.run`](http://docs.python.org/2/library/unittest.html#unittest.TestCase.run)：

> 运行测试，将结果收集到作为`result`. 如果 result 被省略或 None ，则创建一个临时结果对象（通过调用该`defaultTestResult()`方法）并使用。结果对象不会返回给`run()`的调用者。
> 
> ```
> The same effect may be had by simply calling the TestCase instance. 
> ```

所以，`nose`没有看到生成器产生的对象是一个`TestCase`应该以特殊方式处理的对象，它只是期望一个可调用的。运行，但结果`TestCase`被放入一个丢失的临时对象中，这会吃掉测试中发生的所有测试失败。因此产生`TestCase`es 根本行不通。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T21:25:28.930

我已经运行了您提供的代码。我没有收到错误。我使用的版本是python2.7。系统是ubuntu12.10。也许您需要检查python2.7。

# javascript - 使用 JQuery 选择“选项”Div 隐藏/显示

> ID：15281882
> 
> 赞同：1
> 
> 时间：2013-03-07T21:14:37.807
> 
> 标签：javascript, jquery, html, jquery-selectors, visible

当有人在选择元素上选择某个“选项”时，我正在尝试创建一个自动隐藏/显示功能。这是我对“选择器”的看法：

```
<li id="foli16" class="name notranslate">
                    <label class="desc" id="title16" for="Field16">
                        Repeat Pattern
                        <span id="req_16" class="req"></span>
                    </label>
                    <span class="left">
                        <select id="Field16" style="margin-left: 0px;" name="" class="field select">
                            <option value="" <?php echo $doc_selected; ?>>None</option>
                            <option value="" <?php echo $doc_selected; ?>>Daily</option>
                            <option value="" <?php echo $doc_selected; ?>>Weekly</option>
                            <option value="" <?php echo $doc_selected; ?>>Monthly</option>
                            <option value="" <?php echo $doc_selected; ?>>Yearly</option>
                        </select>
                    </span>
                    <p class="instruct" id="instruct16"><small>How often does this test occur?</small></p>
                </li> 
```

当有人选择“每日”选项时，我希望显示 id 为“每日”的 div。如果他们选择了不同的，则需要关闭可见的并显示新的选择。

我之前使用单击按钮和单个切换来完成此操作，但我不确定如何为如此大的切换编写此操作，尤其是使用选择“选项”。我认为我的选择也需要 ID。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T21:23:08.563

您有 5 个选项元素，如果您有 5 个应根据所选选项隐藏/显示的目标元素，您可以向目标元素添加一个类并使用`eq`和`index`方法：

```
var $targets = $('.theTargets');

$('#Field16').change(function(){
    var i = $('option:selected', this).index();
    $targets.hide().eq(i).show();
}); 
```

如果您想按 ID 选择目标元素：

```
$(function(){
    var $targets = $('.theTargets'); // If they have a common class name

    $('#Field16').change(function(){
        var id = this.value.toLowerCase();
        $targets.hide().filter('#' + id).show();
    })
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T21:18:19.270

您可以对选择字段使用更改功能，并获取所选选项的 ID。

```
<script>
    $(document).ready(function() {

        //This will fire when an option is selected from <select>
        $("#Field16").change(function() {
            //Add a class to all div's so you can hide previous ones
            $(".whateveryourclassis").hide();

            //Get the ID of the selected option
            var selectedID = $(this).attr("id") + "div";

            //Show the right div. (assuming the div you want has the same ID as option
            //with "div" after it
            $("#" + selectedID).show();
        }

    }
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T21:21:17.430

你可以这样做：

```
$('select').on('change', function () {
    $('li').hide()
    $('#' + this.value).show();
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T21:25:46.683

根据 tymeJV 的回答构建，

我会给每个将被隐藏/显示的 div 一个类名，例如`showhide`，然后

```
$("#Field16").change(function() {
    //Get the ID of the desired div
    var selectedID = $(this).val();

    $(".showhide").hide();
    $("#" + selectedID).show();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-07T21:26:36.793

你可以尝试这样的事情。

您可以将 select 绑定到 onchange 事件并获取类似的值。

```
$('#Field16').bind('change',function(){
    $('.box').hide(); // All the elements you want to hide on change.
    $('#'+$(this).val()).show();
}); 
```

[http://jsfiddle.net/XKLx8/](http://jsfiddle.net/XKLx8/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-07T22:20:32.783

正是你想要的：

**HTML**

```
<select id="Field16" style="margin-left: 0px;" name="" class="field select">
                            <option value="">None</option>
                            <option value="">Daily</option>
                            <option value="">Weekly</option>
                            <option value="">Monthly</option>
                            <option value="">Yearly</option>
                        </select>
<div id="none">I am None</div>
<div id="daily">I am Daily</div>
<div id="monthly">I am Monthly</div>
<div id="weekly">I am Weekly</div>
<div id="yearly">I am Yearly</div> 
```

**jQuery**

```
jQuery(document).ready(function($){
    hide_all();
    function hide_all(){
    $("#Field16 option").each(function(){
        var ids=$(this).text().toLowerCase();
        $('#'+ids).hide();
    });
    }
    $("#Field16").change(function(){
        hide_all();
        var val=$('option:selected',this).text().toLowerCase();
        $('#'+val).show();
    });

}); 
```

这是演示：http: [//jsfiddle.net/8wKzQ/](http://jsfiddle.net/8wKzQ/)

# python - 无法弄清楚 python selenium webdriver move_to_element 功能

> ID：15281887
> 
> 赞同：4
> 
> 时间：2013-03-07T21:14:50.367
> 
> 标签：python, selenium, webdriver, mouseover

我查看了一些示例以及 ActionChains 的源代码，似乎正在使用其他示例中建议的代码来实现悬停功能，但我仍然无法克服这个异常。代码如下：

```
menu = browser.find_element_by_xpath("//nav/ul/li/a[@href='#'][.='Profile']")
hover = ActionChains(webdriver).move_to_element(menu)
hover.perform() 
```

例外是：

```
Traceback (most recent call last):
File "./test.py", line 56, in <module>
hov.perform()
File "/usr/local/lib/python2.7/dist-packages/selenium/webdriver/common/action_chains.py", line 44, in perform
action()
File "/usr/local/lib/python2.7/dist-packages/selenium/webdriver/common/action_chains.py", line 201, in <lambda>
self._driver.execute(Command.MOVE_TO, {'element': to_element.id}))
AttributeError: 'module' object has no attribute 'execute' 
```

起初，我认为它不起作用，因为元素上没有 id 属性，但我确认不是这种情况（find_element_by_xpath 确实返回正确的元素并且分配了某种 {unique id} ）。我的 Python 技能非常初级，但我需要调整我正在编写的测试脚本。我确定我只是不明白这个错误。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-07T21:21:27.583

第一个参数`ActionChains`是您用来控制浏览器的驱动程序实例，即`browser`在这种情况下。尝试以下操作：

```
menu = browser.find_element_by_xpath("//nav/ul/li/a[@href='#'][.='Profile']")
hover = ActionChains(browser).move_to_element(menu)
hover.perform() 
```

# php - 自定义 PHP 日志记录类保持双写错误消息

> ID：15281888
> 
> 赞同：1
> 
> 时间：2013-03-07T21:14:54.590
> 
> 标签：php, class, logging, duplicates, fwrite

我正在为我的网站编写一个使用 PHP 的自定义日志类，主要是为了获得更多的编程经验，但我遇到了一个我无法解决的奇怪问题。我用以下方式来上课；

```
$objLogger = new logger(DIRECTORY_LOG, logger::DEBUG);
$objLogger->logDebug("Debug message 1", "Extra Notes Here");
$objLogger->logDebug("Debug message 2", "Extra Notes Here"); 
```

加载页面后，日志文件显示（注意它进入 1-2 然后重复 1-2）；

```
2013-03-07 16:03:41 - DEBUG --> Debug message 1 ('Extra Notes Here')
2013-03-07 16:03:41 - DEBUG --> Debug message 2 ('Extra Notes Here')
2013-03-07 16:03:41 - DEBUG --> Debug message 1 ('Extra Notes Here')
2013-03-07 16:03:41 - DEBUG --> Debug message 2 ('Extra Notes Here') 
```

我只调用一次代码，它写了 2 行。我包括以下课程的代码；

```
// Logging class to record data from the website into the daily log files
class logger {
    // Define and set the class constants
    const EMAIL = 0;        // Errors with sending/dealing with emails
    const DATABASE = 1;     // Errors with any sort of database work
    const SERVER = 2;       // 404 type server errors
    const INFO = 3;         // Basic information messages
    const SCRIPT = 4;       // Errors encountered by running scripts
    const DEBUG = 5;        // Debug messages
    const ARGUMENTS = 'none';
    // Define the static variables that may be used
    private static $permissions = 0777;             // File writing permissions
    private static $timestamp = 'Y-m-d G:i:s';      // Format for the log timestamp
    private static $date = 'Y-m-d';                 // Format for the file name
    // Define the variables that may be used
    private $pathway = null;
    private $status = false;
    private $file = null;

    // Construct the class object when it is called initially
    public function __construct($_directory, $_severity = self::SCRIPT) {
        // Create the full pathway to the log file to record to
        $this->pathway = $_directory . 'log_' . date(self::$date) . '.log';
        // Set the threshold for logging (match the severity level to record)
        $this->threshold = $_severity;
        // Check for and create the directory for the logs if not created already
        if (!file_exists($_directory)) {
            mkdir($_directory, self::$permissions, true);
        }
        // Check if the log file exists and can be written to
        if (file_exists($this->pathway) && !is_writable($this->pathway)) {
            // Set the flag so we don't attempt to write later
            $this->status = false;
        }
        // Open the log file for writting
        if (($this->file = fopen($this->pathway, 'a'))) {
            // Set the flag so we can write later
            $this->status = true;
        } else {
            // Set the flag so we don't attempt to write later
            $this->status = false;
        }
    }

    // Log: Debugging
    public function logDebug($_line, $_args = self::ARGUMENTS) {
        $this->writeLog($_line, self::DEBUG, $_args);
    }

    // Write the constructed string into the log file
    public function writeLog($_line, $_severity, $_args = self::ARGUMENTS) {
        // Check if we can write to the log file first
        if (!$this->status) {
            // There is some reason we cannot write to the log file
            return false;
        }
        // Check to make sure the severity is not higher then the threshold set earlier
        if ($_severity > $this->threshold) {
            // A message above the threshold is trying to log so ignore it
            return false;
        }
        // Build the string for the log
        $line = $this->buildString($_severity, $_line);
        // Check for and add any additional arguments if passed
        if ($_args !== self::ARGUMENTS) {
            $line .= ' (' . var_export($_args, true) . ')';
        }
        // Add the proper 'new line' character to the end of the line
        $line .= "\r\n";
        // Write to the log file
        if (fwrite($this->file, $line) === false) {
            // Writting to the log failed for some reason
            return false;
        }
    }

    // Return the string with in its constructed format
    private function buildString($_level, $_line) {
        // Build the timestamp
        $time = date(self::$timestamp);
        // Build the string based on the passed level
        switch ($_level) {
            case self::EMAIL:
                return "$time - EMAIL --> $_line";
            case self::DATABASE:
                return "$time - DATABASE --> $_line";
            case self::SERVER:
                return "$time - SERVER --> $_line";
            case self::INFO:
                return "$time - INFO --> $_line";
            case self::SCRIPT:
                return "$time - SCRIPT --> $_line";
            case self::DEBUG:
                return "$time - DEBUG --> $_line";
            default:
                return "$time - LOG --> $_line";
        }
    }
} 
```

我真的可以使用一些帮助，我不会两次调用它，所以我无法弄清楚问题出在哪里。我在网上查看了示例并使用部分示例来构建它，它似乎运行正常。我在所有 5 种浏览器上都试过了，它做同样的事情。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T21:19:50.577

代码看起来没问题。如果您使用 mod_rewrite 通过单个 PHP 脚本重写所有请求，我猜浏览器正在发出第二个请求，`/favicon.ico`这就是导致第二个日志条目的原因。验证这一点的最简单方法是将 REQUEST_URI 临时添加到日志数据中：

```
$objLogger->logDebug("Debug message 1", "Request: {$_SERVER['REQUEST_URI']}"); 
```

# java - 将字符串数组转换为int数组

> ID：15281894
> 
> 赞同：1
> 
> 时间：2013-03-07T21:15:18.630
> 
> 标签：java, arrays, int

这是我到目前为止所拥有的，我需要将此字符串数组转换为整数数组，字符串数组看起来像这样

```
wholef[0] = "2 3 4";
wholef[1] = "1 3 4";
wholef[2] = "5 3 5";
wholef[3] = "4 5 6";
wholef[4] = "3 10 2"; 
```

这些值来自我读取的文本文件，但现在我需要将其转换为一个大整数数组，我尝试使用 split 方法，但我不确定它是否适用于这种设置。如果有人能给我一个更好的方法，那就太好了，但我只需要将它转换为整数数组，这就是我所需要的。

```
for(int k = 0; k < fline; k++)
    {
        String[] items = wholef[k].replaceAll(" ", "").split(",");

        int[] parsed = new int[wholef[k].length];

        for (int i = 0; i < wholef[k].length; i++)
        {
            try 
            {
                parsed[i] = Integer.parseInt(wholef[i]);
            } catch (NumberFormatException nfe) {};
        }
    } 
```

这是我现在使用的新代码，它非常接近，因为我只得到一个错误

```
int q = 0;
        for (String crtLine : wholef) 
        {
            int[] parsed = new int[wholef.length];

            String[] items = crtLine.split(" ");
            for (String crtItem: items) 
            {
                parsed[q++] = Integer.parse(crtItem);
            }
        } 
```

错误是这个 java:97: error: cannot find symbol parsed[q++} = Integer.parse(crtItem); ^ 符号：方法解析（字符串）位置：类整数 1 错误

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T21:20:15.763

试试这个：

```
int i = 0;
for (String crtLine : wholef) {
     String[] items = crtLine.split(" ");
     for (String crtItem: items) {
          parsed[i++] = Integer.parseInt(crtItem);
     }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T21:30:15.077

这会将您的字符串数组转储到 intholef[n..total]; 如果你想把它变成二维数组或对象数组，你必须做一些额外的事情。然后你可以做一个对象数组，并将每组值作为一个属性。

```
 String[] parts = wholef[0].split(" ");
 int[] intwholef= new int[parts.length];

 for(int n = 0; n < parts.length; n++) {
    intwholef[n] = Integer.parseInt(parts[n]);
  } 
```

# c - 在 Windows 7 上安装 PortAudio 以与 Cygwin 一起使用

> ID：15281896
> 
> 赞同：2
> 
> 时间：2013-03-07T21:15:35.080
> 
> 标签：c, windows, gcc, cygwin, portaudio

我正在尝试让 PortAudio 在我的计算机上工作。我一直在使用 Cygwin 和 gcc 在 C 中制作应用程序，但我完全不知道如何让 PortAudio 在我的系统上编译和工作。

我在 PortAudio 的网站上找到了让它与 Microsoft Visual Studio 一起工作的信息，但我没有使用那个 IDE（或任何与此相关的东西。只是在 Notepad++ 中工作并从命令行运行东西）。

如果有人有任何关于我如何让它工作的信息，或者我可以在哪里寻找答案，将不胜感激！谢谢！-贾斯汀

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T21:23:51.007

您应该能够按照[Linux 的 PortAudio 说明进行操作](http://portaudio.com/docs/v19-doxydocs/compile_linux.html)。

正如它在说明中所说，“您可能需要在您的机器上使用 yum 或其他包管理器，而不是 apt-get”。对于 Cygwin，这可能意味着使用 Cygwin setup.exe 程序。

# javascript - Google Maps V3 API 密钥无效 - 但我的个人开发密钥有效

> ID：15281897
> 
> 赞同：11
> 
> 时间：2013-03-07T21:15:35.100
> 
> 标签：javascript, google-maps-api-3

我最近一直在进行开发，将我们的地图升级到 v3，并且在开发过程中我使用了我自己的个人密钥。一切正常。到了投入生产的时候，我让某人通过公司的谷歌帐户生成了一个密钥，但现在它不起作用。我坐在他们旁边确保他们正在生成浏览器密钥，并且我很确定在匹配两者的“推荐人”部分下的域是正确的： *.mydomain.com/* mydomain.com /*

我已经验证我们正在使用浏览器应用程序的密钥。

我已通过服务面板验证了 Google Maps API v3 已打开。一切都与我用钥匙做的方式相同。我认为唯一的区别是他们在公司帐户上启用了计费，而我的密钥没有。我们希望将其从我的密钥中移除，以查看它如何接收超过我帐户的 25k 次观看/天限制。

使用公司 API 密钥时，地图会加载，然后很快我会收到一个警告框，上面写着：“Google 已禁用此应用程序的 Maps API。提供的密钥不是有效的 Google API 密钥，或者未经授权用于此站点上的 Google Maps Javascript API v3。如果您是此应用程序的所有者，您可以在此处了解如何获取有效密钥：[https](https://developers.google.com/maps/documentation/javascript/tutorial#api_key) ://developers.google.com/maps/documentation/javascript/tutorial#api_key "

如果我然后用我自己的密钥替换密钥，并使用相同的引用设置，它可以工作..

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-07-19T12:05:11.563

你错过了`v=3`你之前的`key={yourkey}`

像这样：

```
maps.googleapis.com/maps/api/js?v=3&key={your key}&sensor=false 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-12T16:27:49.783

我能够通过简单地生成一个新的浏览器密钥来解决这个问题。我生成了，把它扔到浏览器中，加载了地图。然后我进入并从以前的密钥中复制了我的推荐人。已保存。刷新。它仍然有效。老实说，我认为这是谷歌的一个错误，在我们生成原始密钥的那一天，它吐出了无效的密钥。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-04-08T07:08:53.827

实际上，您希望`Google Maps JavaScript API`启用而不是`Google Maps API v3`因为前者是您在此处实际使用的。后者现在分为iOS和Android BTW。

您还需要将您的参考添加到您的服务器密钥中。

如果它是本地的，它应该是这样的：

`localhost/*`

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-08T14:03:20.383

我认为您必须检查推荐人。API 控制台站点上的给定示例是：

```
Example: *.example.com/*. *One URL or pattern per line.* 
```

尝试在不使用通配符的情况下包含完整的引用名称。通配符的用法似乎有点奇怪。更多人为此苦苦挣扎，请参阅[此](https://groups.google.com/forum/?fromgroups=#!topic/google-maps-js-api-v3/NHDMRPYpdko)帖子。[您可以在Google API 控制台帮助页面](https://developers.google.com/console/help/#restrictingusage)上找到可能的白名单配置的说明。

（您提到您的个人密钥与您的公司密钥具有相同的引荐来源。我想知道这是否可能，因为在这种情况下您可以为同一个应用程序使用不同的密钥。）

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-10-12T07:33:11.073

我把头撞在墙上了一会儿。包括示例没有做的版本号，为我修复了它。

`<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?v=3.exp&key=YOURKEY">`

^ 那个有`?v=3.exp`一点

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-02-27T14:30:53.187

在推荐人下，我们有`*`. 修复实际上是将其留空 `` 这意味着允许所有。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-11-23T09:55:08.340

`v=3;`在您的密钥之前添加。

```
maps.googleapis.com/maps/api/js?**v=3;**key={your key};sensor=false 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-07-03T00:11:37.270

我收到了许多客户关于他们网站上的谷歌地图问题的报告。我检查并收到“无效密钥”错误。

奇怪的是，谷歌过去常常在 API 密钥之前和之后给出带有空格的密钥。过去，当我离开空格时，钥匙坏了。记得离开这些空间令人沮丧。

现在，`trim()`我将当前的 API 密钥（带或不带空格）提交到谷歌地图之前，它可以工作。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-05-20T11:24:35.050

如果您在本地进行测试，请确保将您的本地 ip 添加到服务器密钥：

```
xxx.xxx.xxx.xxx 
```

如果您希望地图 api 在整个域中可用，请将其添加到浏览器键中：

```
*.mydomain.com/* 
```

希望这可以帮助。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-10-03T19:02:35.660

我也收到了无效的密钥信息，在网上搜索了一遍之后，发现了我的问题。它也可能影响其他人。它与钥匙无关。

我发现我在“初始化”函数中有一个错误（在我的例子中，mapOptions 中的一行末尾缺少逗号）。出现这种情况是因为我添加了一个新的（最后一个）行，并且未能在前一行的末尾放置一个逗号。即使在最后一行，始终使用逗号也是一个很好的论据。

我现在可以打开或关闭删除/替换该逗号的无效键消息。我的结论是，与地图相关的 JS 中的任何错误都可能导致它。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-07-21T14:15:20.513

现在从谷歌添加地图变得比以前更成问题。在[https://leafletjs.com/](https://leafletjs.com/)页面上，您会发现另一个更方便的带有地图的库。

# .htaccess - 为什么谷歌会添加通知“此站点可能已被入侵”

> ID：15281901
> 
> 赞同：0
> 
> 时间：2013-03-07T21:15:53.567
> 
> 标签：.htaccess, webserver, robots.txt

今天早上，我的很多网站在其搜索结果中都被 Google 标记为“此网站可能已被入侵”。在我自己的 VPS 服务器上受我监督的网站。我对它进行了深度扫描，没有什么不寻常的。我已经寻找可疑的 htaccess 和 javascript 注入，到目前为止没有任何问题。

昨天，我把一个 htaccess 文件放到我的 web 根目录，以确保没有 sql、javascript、base64 和任何其他可疑的黑客解决方案可能攻击我的服务器。

所以我确实怀疑谷歌添加了“这个网站可能被入侵”，因为我在我的所有网站上都添加了这种保护。

有这个 htaccess 的内容：

```
RewriteEngine On
RewriteCond %{REQUEST_URI} !^/robots.txt
RewriteCond %{REQUEST_URI} !^/sitemap.xml

RewriteCond %{HTTP_USER_AGENT} ^-?$ [OR] 
RewriteCond %{HTTP_USER_AGENT} ^[bcdfghjklmnpqrstvwxz\ ]{8,}|^[0-9a-z]{15,}|^[0-9A-Za-z]{19,}|^[A-Za-z]{3,}\ [a-z]{4,}\ [a-z]{4,} [OR]
RewriteCond %{HTTP_USER_AGENT} ^<sc|<\?|^adwords|@nonymouse|Advanced\ Email\ Extractor|almaden|anonymous|Art-Online|autoemailspider|blogsearchbot-martin|CherryPicker|compatible\ \;|Crescent\ Internet\ ToolPack|Digger|DirectUpdate|Download\ Accelerator|^eCatch|echo\ extense|EmailCollector|EmailWolf|Extractor|flashget|frontpage|Go!Zilla|grub\ crawler|HTTPConnect|httplib|HttpProxy|HTTP\ agent|HTTrack|^ia_archive|IDBot|id-search|Indy\ Library|^Internet\ Explorer|^IPiumBot|Jakarta\ Commons|^Kapere|Microsoft\ Data|Microsoft\ URL|^minibot\(NaverRobot\)|^Moozilla|^Mozilla$|^MSIE|MJ12bot|Movable\ Type|NICErsPRO|^NPBot|Nutch|Nutscrape/|^Offline\ Explorer|^Offline\ Navigator|OmniExplorer|^Program\ Shareware|psycheclone|PussyCat|PycURL|python|QuepasaCreep|SiteMapper|Star\ Downloader|sucker|SurveyBot|Teleport\ Pro|Telesoft|TrackBack|Turing|TurnitinBot|^user|^User-Agent:\ |^User\ Agent:\ |vobsub|webbandit|WebCapture|webcollage|WebCopier|WebDAV|WebEmailExtractor|WebReaper|WEBsaver|WebStripper|WebZIP|widows|Wysigot|Zeus|Zeus.*Webster [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^curl|^Fetch\ API\ Request|GT\:\:WWW|^HTTP\:\:Lite|httplib|^Java/1.|^Java\ 1.|^LWP|libWeb|libwww|^PEAR|PECL\:\:HTTP|PHPCrawl|python|Rsync|Snoopy|^URI\:\:Fetch|WebDAV|^Wget [NC]
RewriteRule (.*) - [F]

RewriteCond %{REQUEST_METHOD} (GET|POST) [NC]
RewriteCond %{QUERY_STRING} ^(.*)(%3C|<)/?script(.*)$ [NC,OR]
RewriteCond %{QUERY_STRING} ^(.*)(%3D|=)?javascript(%3A|:)(.*)$ [NC,OR]
RewriteCond %{QUERY_STRING} ^(.*)document\.location\.href(.*)$ [OR]
RewriteCond %{QUERY_STRING} ^(.*)(%3D|=)http(%3A|:)(/|%2F){2}(.*)$ [NC,OR]
RewriteCond %{QUERY_STRING} ^(.*)base64_encode(.*)$ [OR]
RewriteCond %{QUERY_STRING} ^(.*)GLOBALS(=|[|%[0-9A-Z]{0,2})(.*)$ [OR]
RewriteCond %{QUERY_STRING} ^(.*)_REQUEST(=|[|%[0-9A-Z]{0,2})(.*)$ [OR]
RewriteCond %{QUERY_STRING} ^(.*)(SELECT(%20|\+)|UNION(%20|\+)ALL|INSERT(%20|\+)|DELETE(%20|\+)|CHAR\(|UPDATE(%20|\+)|REPLACE(%20|\+)|LIMIT(%20|\+))(.*)$ [NC]
RewriteRule (.*) - [F] 
```

这个文件中有很多关于黑客术语的关键字......谷歌有什么办法可以调查 htaccess 文件吗？

我应该只为这个 htaccess 使用 robots.txt 阻止谷歌，还是可以/应该直接在 htaccess 中添加一行代码来阻止谷歌扫描这个文件......？

你怎么看 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T23:04:17.570

如果`.htaccess`从外面可以看到，那么你有一个严重的问题。任何通过 http 访问该站点的*人**都不*应看到该文件。在 robots.txt 中阻止它只会阻止行为良好的机器人查看它。但是忽略 robots.txt 的机器人仍然可以访问。

 *如果你怀疑你的 .htaccess 是问题的原因，你需要确保它不能被提供。这是 Apache 的默认设置，但如果你在使用权限，我想你可能已经暴露了它。如果你这样做了，你需要解决这个问题。

我认为您需要在其他地方寻找 Google 的“此站点可能已被入侵”消息的原因。在 [此站点可能已被入侵] 上进行的 Google（或 Bing）搜索会显示很多关于为什么会出现该警告的信息。*

# java - 为什么这个 Java 方法看起来有两种返回类型？

> ID：15281904
> 
> 赞同：11
> 
> 时间：2013-03-07T21:16:00.780
> 
> 标签：java, methods

```
public <E extends Foo> List<E> getResult(String s); 
```

`Foo`我自己的课在哪里。

这个方法的返回类型是什么？为什么它似乎有两种返回类型？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-07T21:17:16.580

不，您没有两种返回类型。这是您看到的[*通用方法。*](https://docs.oracle.com/javase/tutorial/extra/generics/methods.html)

*   `<E extends Foo>`→ 您正在为您的方法声明一个泛型类型；
*   `List<E>`→ 这是您的返回类型。

你的方法可以有一个泛型类型`E`，它是`Foo`. 该方法的返回类型是 a `List<Foo-or-any-subtype-of-Foo>`。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-07T21:17:20.547

返回类型是`List<E>`. 该子句`<E extends Foo>`不是返回类型；它是一个泛型类型声明，指定特定类型`E`必须是 a `Foo`（或 的子类`Foo`）。这是声明泛型方法的标准语法。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-07T21:17:43.857

查看与泛型有关的 Java[文档。](http://docs.oracle.com/javase/tutorial/java/generics/boundedTypeParams.html)

```
<E extends Foo> // declares the bounds for the generic type `E`
List<E> // declares the return value 
```

该方法的返回类型是`List<E>`.

# yii - 如何使用 YII 的 createCommand 也返回总项目？

> ID：15281905
> 
> 赞同：3
> 
> 时间：2013-03-07T21:16:08.390
> 
> 标签：yii

假设我做了一个简单的查询：

```
$products = 
 Yii::app()->db->createCommand()->setFetchMode(PDO::FETCH_OBJ)
  ->select('*')
  ->from('products')
  ->limit(9)
  ->queryAll(); 
```

假设数据库中有 500 个产品。如果包含“限制”，有没有办法让 YII 自动返回产品的总数（计数）？也许返回一个像这样的对象：

```
$products->products = array( ... products ... )
$products->totalProducts = 500; 
```

问题是，如果包含 LIMIT ，它将返回项目，因此计数将为 9。我想要一个解决方案，它将返回 9 个项目，但如果有 200 个项目，还可以说 200 个项目的计数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-01-30T04:19:25.977

为什么不容易：

```
$сount = Yii::app()->db->createCommand('select count(*) from table')->queryScalar();
echo $count; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T04:14:20.587

您要么必须运行两个查询（一个 count(*) 无限制查询，然后是有限查询），或者您可以发送您可以使用[CSqlDataProvider](http://www.yiiframework.com/doc/api/1.1/CSqlDataProvider)检索您的产品并让它为您完成。但它通常需要两个查询。

**注意：**`CSqlDataProvider` Yii 1.1.13 的一个很好的特性是如果你要使用数据提供者，你可以发送你的查询构建器命令。[有关修复它的这个拉取请求的](https://github.com/yiisoft/yii/pull/1500)更多信息。这样，您既可以使用查询构建器的强大功能，又可以将数据转移到数据提供者中。以前您必须手动构建 SQL 语句或获取命令的 queryText。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-08T08:22:14.160

```
Yii::app()->db->createCommand('select count(*) from tbl_table')->queryScalar(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T08:53:35.260

尝试使用**execute()**而不是**query()**因为 execute 返回行数。例子：

```
$rowCount = $command->execute(); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-07T21:20:41.487

您可以尝试像这样使用 COUNT：

```
$dbCommand = Yii::app()->db->createCommand("
SELECT COUNT(*) as count FROM `products`");
$data = $dbCommand->queryAll(); 
```

希望有帮助！

编辑：您可能会发现这也很有用：[CDataProvider](http://www.yiiframework.com/doc/api/1.1/CDataProvider)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-12-11T10:33:16.317

试试这个 -

```
$sql = Yii::app()->db->createCommand('select * from tbl_table')->queryAll(); //It's return the Array

echo count($sql); //Now using count() method we can count the array. 
```

# php - 如何仅在 joomla 主页上显示消息？

> ID：15281911
> 
> 赞同：2
> 
> 时间：2013-03-07T21:16:38.863
> 
> 标签：php, joomla

我怎样才能只在joomla的主页上显示一条消息？我有兴趣在 site.com 上显示它，而不是在 site.com/index.php/page 或任何其他网站上显示它。

我已经测试了以下内容：

```
 <?php $app = JFactory::getApplication(); 
    $menu = $app->getMenu(); 
    $lang = JFactory::getLanguage(); 
if ($menu->getActive() == $menu->getDefault($lang->getTag())) : ?>this is the homepage
    <?php endif; ?> 
```

和这个

```
<?php $menu = & JSite::getMenu();
if ($menu->getActive() == $menu->getDefault()) {
    echo "this is the homepage";
}
?> 
```

问题是我仍然可以在诸如[http://site.com/index.php/category/id/78-article](http://site.com/index.php/category/id/78-article)之类的页面上看到消息“这是主页”，这显然不是主页。似乎每当链接中有index.php时，上面的代码就认为它属于主页。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T22:12:22.347

这与链接中的“index.php”无关。相反，它与[http://site.com/index.php/category/id/78-article](http://site.com/index.php/category/id/78-article)上的链接没有与之关联的菜单项有关。要完全按照您的要求进行操作，您可能需要对代码进行一些处理，并检查以确保实际页面的信息与主页信息匹配：

```
$jinput = JFactory::getApplication()->input;
$menu = & JSite::getMenu();
$active = $menu->getActive();
$default = $menu->getDefault();
if (
    $active == $default && 
    $jinput->get('option') == $default->query['option'] && 
    $jinput->get('view') == $default->query['view'] && 
    $jinput->get('id') == $default->query['id']
) {
    echo "This is the homepage";
} 
```

我正在检查默认菜单项选项（哪个组件）以及视图和 id 值与输入中设置的值。

[http://site.com/index.php/category/id/78-article](http://site.com/index.php/category/id/78-article)此链接会将 id 设置为 78，并可能会更改主页菜单中定义的视图和选项，因此触发器不会发生。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T22:00:13.280

好的，只是一个想法，但请尝试：

```
if (preg_match('/index\.php$/',$_SERVER['PHP_SELF'])) {
  echo "this is the homepage";
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-27T09:56:50.020

你应该试试这个。1\. 从管理员部分检查已分配“主页”（这是主页）的菜单。复制那里显示的链接。会是这样的

```
index.php?option=com_somecomponent&view=someview 
```

2.  现在转到模板中的 index.php。
3.  在那里写一个条件

    ```
    if(JRequest::getVar('option')=='com_something' && JRequest::getVar('view')=='someview'){    //show message    } 
    ```

这应该为您解决问题！但请记住。如果您更改主页菜单，则必须相应更改。

# performance - 运行时间分析，三个内部for循环

> ID：15281916
> 
> 赞同：0
> 
> 时间：2013-03-07T21:17:10.977
> 
> 标签：performance, algorithm, analysis, pseudocode

这是我的第一个问题，我很确定我也会收到我的第一个答案：P

我必须对一个算法进行渐近分析，该算法从一个数组`A[1...n]`计算一个矩阵`M[n][n]`，其中每个矩阵包含`M[i][j]`一个由下式给出的值：

```
M[i][j] = (A[i] + ... + A[j])/(j-i+1), if i<=j 
```

和

```
M[i][j] = 0, if i>j 
```

```
for i=1 to N do                [N]
   for j=1 to N do             [N]
    if(i<=j)                   [cost]
      start=i                  [cost]
      end=j                    [cost]
      sum=0                    [cost]
      for a=start to end do    [??]
         sum += A[a]           [cost]
      M[i][j]=sum/(j-i+1       [cost]
    else                       [cost]
      M[i][j]=0                [cost] 
```

考虑到给出前两个 for 循环，我必须期望至少运行时间为 O(n^2)，而第三个内部 for 循环我会得到类似 O(N*N*[??]) 的东西。第三个 for 循环每次执行 j-i+1 次操作，并且只针对 i<=j。矩阵的第一行将填充计算的平均值，第二行是第一个元素等于 0，然后是计算的平均值......

最终的矩阵将几乎填充一半（但不是 N/2）所以第三个循环的值不是 [N/2]

如何计算最内层 For 的运行时间以及整个算法的运行时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T21:50:22.627

您可以尝试仅计算执行内部循环语句的次数。

您将 i 从 1 循环到 N。现在您只会在 j 大于或等于 N 时执行内循环（使用总和），因此 j 从 i 循环到 N。然后最内循环由 ji 加法组成。在所有你得到（在枫树语法）

```
sum(sum(j-i,j=i..N), i=1..N)= 1/6*N^3-1/6*N 
```

然后，您需要考虑完成 N^2 次的 M[i][j] 的分配。

前面是指令的总量。但是，如果您只是在寻找总体复杂性，那么您应该只看到内部循环取决于 N，这会给您 O(N^3) 的总体复杂性。

Do note that the code could avoid the inner loop complexity by storing the A[i] sums from the start and don't try to recalculate them every time

# .net - Dapper .net 丢失与 Sybase 12 或 16 的连接字符串

> ID：15281920
> 
> 赞同：1
> 
> 时间：2013-03-07T21:17:20.207
> 
> 标签：.net, dapper, sqlanywhere

我使用 Sybase 12 和 dapper.net。一切都很好，直到我进行了 Sybase 更新 3817。在此更新之后，我开始收到这样的异常：“System.NullReferenceException：”

痕迹：

```
 iAnywhere.Data.SQLAnywhere.SAConnection.CalledByEntityFramework() +263
   iAnywhere.Data.SQLAnywhere.SAConnection.get_ConnectionString() +538
   Dapper.Identity..ctor(String sql, Nullable`1 commandType, IDbConnection connection, Type type, Type parametersType, Type[] otherTypes) +73
   Dapper.<QueryInternal>d__13`1.MoveNext() +545
   System.Collections.Generic.List`1..ctor(IEnumerable`1 collection) +381
   System.Linq.Enumerable.ToList(IEnumerable`1 source) +58
   Dapper.SqlMapper.Query(IDbConnection cnn, String sql, Object param, IDbTransaction transaction, Boolean buffered, Nullable`1 commandTimeout, Nullable`1 commandType) +218
   Dapper.SqlMapper.Query(IDbConnection cnn, String sql, Object param, IDbTransaction transaction, Boolean buffered, Nullable`1 commandTimeout, Nullable`1 commandType) +88 
```

当我查看我看到的连接时，该连接字符串有异常：

> “MDbConnection.ConnectionString”引发了“System.NullReferenceException”类型的异常。

我无法理解这次 sybase 更新中发生了什么。版本 12 和最新版本的所有下一次更新 - 16 与 dapper 有同样的问题！但如果我使用 ADO.Net - 一切正常！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-09-27T07:49:41.590

我反编译了程序集，显示以下代码：

```
 public override string ConnectionString
{
    get
    {
        SATrace.PropertyCall("", this._objectId);
        if (this._connStr == null)
        {
            return "";
        }
        if (SAConnectionOptions.GetAdoDotNetTesting(this._connOpts))
        {
           //.....
        }
        if (SAConnectionOptions.GetPersistSecurityInfo(this._connOpts) || base.DesignMode || SAConnection.s_isHostedByVisualStudio)
        {
            return this._connStr;
        }
        if (this.CalledByEntityFramework()) //It goes wrong here
        {
            return this._connStr;
        }
        string result;
        string text2;
        string text3;
        SAConnection.RemoveKeyValuesFromString(this._connStr, SAConnectionOptions.s_passwordKeys, false, out result, out text2, out text3);
        return result;
    }
    set
    {
        ///...
    }
} 
```

所以我在我们的连接字符串中添加了以下内容：`;Persist Security Info=True` 这将允许代码进入第 3`if`条语句，而不是导致空引用的 4 条。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T07:31:45.753

这太有趣了; 看起来它与：

```
internal Identity(string sql, CommandType? commandType, IDbConnection connection, Type type, Type parametersType, Type[] otherTypes)
    : this(sql, commandType, connection.ConnectionString, type, parametersType, otherTypes, 0)
{ } 
```

所以这是查询`.ConnectionString`失败的简单行为。你说：

> 但如果我使用 ADO.Net - 一切正常！

我*想*这是因为在使用 ADO.NET 时，您没有任何理由查看`.ConnectionString`连接打开后的情况。可能要做的第一件事（你能检查一下吗？）是看看是否`.ConnectionString` *会*抛出错误，即

```
using(var conn = new WhateverConnection(connectionString)) {
    conn.Open();
    // maybe execute a command, just for fun
    Console.WriteLine(conn.ConnectionString);
} 
```

当然，如果代码中的其他内容可能以某种方式使其错误地认为它与实体框架有关，则根据：

```
iAnywhere.Data.SQLAnywhere.SAConnection.CalledByEntityFramework() +263 
```

然而！最终，看起来这里的“问题”是：`SAConnection`实现中的一个错误。坦率地说，我认为这是您需要使用 sybase 登录的内容。

# c++ - dup2() 导致子进程提前终止

> ID：15281921
> 
> 赞同：1
> 
> 时间：2013-03-07T21:17:20.167
> 
> 标签：c++, unix, fork, pipe, dup2

因此，我正在编写一个程序，该程序涉及创建 2 组管道，以便父进程可以写入子进程，而子进程可以立即返回......

我的子进程有以下代码：

```
if(pid==0){  //child process
        cout << "executing child" << endl;
        close(fd1[WRITE_END]);
        close(fd2[READ_END]);
        if(dup2(fd1[READ_END],STDIN_FILENO) < 0 || dup2(fd2[WRITE_END],STDOUT_FILENO) < 0){
            cerr << "dup2 failed" << endl;
            exit(1);
        }
        cout << "test output" << endl;
        close(fd2[WRITE_END]);
        close(fd1[READ_END]);
        read(fd1[READ_END],buf,BUFFER_SIZE);
        cout << "Child process read " << buf << endl;
        execl("/bin/sort", "sort", "-nr", NULL);

    } else {  //... parent process 
```

当我运行我的程序时，我得到的只是子进程的输出，`executing child`但没有`test output`。但是，当我删除处理 dup2 调用的 if 语句时，我的输出确实包括`test output`.

关于为什么 dup2 导致我的子进程无法完成终止的任何想法？

（顺便说一句，最初，我的两个 dup2 是在单独的 if 语句中完成的......当我将测试输出放在测试下面时`dup2(fd1[READ_END],STDIN_FILENO) < 0`，它会输出，但当我把它放在另一个 dup2 条件测试下面时却没有，所以我确信这就是我的问题所在）

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T21:23:07.620

对 dup2(fd2[WRITE_END],STDOUT_FILENO) 的调用将 STDOUT（由 C++ cout 流使用）连接到您的 fd2 管道。所以“测试输出”被写入管道。

# bash - 如何修改 zsh 以在 $PATH 之前使用本地目录自动完成“源”？

> ID：15281924
> 
> 赞同：1
> 
> 时间：2013-03-07T21:17:30.720
> 
> 标签：bash, shell, sh, zsh, zsh-completion

我无法计算我输入的次数：`source en<tab>`只是在屏幕上留下一堆乱码，因为它来自程序 env 而不是本地 env.sh。

我尝试制作一个简单的函数来检测这个特定的用例，但它没有用。

这是我尝试过的：

```
source () {
    if [ "$1" == "env" ]
    then
        source ./env.sh
    else
        source $@
    fi
} 
```

我意识到 source 是一个 shell 命令，这可能是它不起作用的原因，但我并不真正关心它是如何实现的，我只想在本地目录之前停止在我的 $PATH 上采购二进制文件。

干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T23:54:35.123

它不起作用的原因是你递归地调用你的函数。用于`builtin source`调用内置源而不是您的函数源：

```
source () {
    if [ "$1" == "env" ]
    then
        builtin source ./env.sh
    else
        builtin source $@
    fi
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T13:25:27.740

`source`与其重写通用命令 ( ) 来处理特殊情况，不如创建一个新命令来处理特殊情况。

```
locenv () {
    source ./env.sh
} 
```

# php - Facebook请求权限示例？

> ID：15281925
> 
> 赞同：1
> 
> 时间：2013-03-07T21:17:38.320
> 
> 标签：php, javascript, facebook, authentication, permissions

我一直在寻找一个关于如何通过 facebook 登录实现请求权限的实际示例，但我找不到任何东西。我能找到的只是权限的名称，关于要问什么的建议，但没有例子。

问题是：我在哪里以及如何使用 php 或 js 请求权限？一点代码会很有帮助。我是 facebook 开发的新手，我已经开始阅读有关 facebook 登录和 facebook api 的所有内容，并尝试做一些小应用程序，所以我习惯了事情的工作方式，但我有点卡住了。

* * *

**编辑**我找到了这段代码，这似乎是我一直在寻找的：

```
FB.login(function(response) {
  // handle the response
}, {scope: 'email,publish_actions'}) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T21:27:23.190

您应该从[Facebook PHP SDK](http://developers.facebook.com/docs/reference/php/)开始，关键是要了解服务器端登录流程，如此处所述[，](http://developers.facebook.com/docs/concepts/login/login-architecture/)您可以使用此示例作为开始：

```
require 'facebook.php';

$facebook = new Facebook(array(
  'appId'  => 'YOUR_APP_ID',
  'secret' => 'YOU_APP_SECRET',
));

// Get User ID
$user = $facebook->getUser();

// We may or may not have this data based on whether the user is logged in.
// If we have a $user id here, it means we know the user is logged into
// Facebook, but we don't know if the access token is valid. An access
// token is invalid if the user logged out of Facebook.

if ($user) {
  try {
    // Proceed knowing you have a logged in user who's authenticated.
    $user_profile = $facebook->api('/me');
  } catch (FacebookApiException $e) {
    error_log($e);
    $user = null;
  }
}

// Login or logout url will be needed depending on current user state.
if ($user) {
  $logoutUrl = $facebook->getLogoutUrl();
} else {
  $loginUrl = $facebook->getLoginUrl(array("scope" => "user_photos"));
}

?>
<!doctype html>
<html xmlns:fb="http://www.facebook.com/2008/fbml">
  <head>
    <title></title>
  </head>
  <body>    
    <?php if ($user): ?>
      <a href="<?php echo $logoutUrl; ?>">Logout</a>
    <?php else: ?>
      <div>
        <a href="<?php echo $loginUrl; ?>">Login with Facebook</a>
      </div>
    <?php endif ?>

    <h3>PHP Session</h3>
    <pre><?php print_r($_SESSION); ?></pre>

    <?php if ($user): ?>
      <h3>You</h3>
      <img src="https://graph.facebook.com/<?php echo $user; ?>/picture">

      <h3>Your User Object (/me)</h3>
      <pre><?php print_r($user_profile); ?></pre>
    <?php else: ?>
      <strong><em>You are not Connected.</em></strong>
    <?php endif ?>

  </body>
</html> 
```

# java - 基本链表类型队列，扩展了一个非常基本的节点 在 Java + 请求外行术语

> ID：15281927
> 
> 赞同：5
> 
> 时间：2013-03-07T21:17:43.080
> 
> 标签：java, nodes

首先，是的，这是学校的作业，但我不是在找人以任何方式重写或检修我的代码。我的问题是：

我被要求编写一个类来创建一个扩展 Node 的队列（后者如下所示）

```
public class Node<T>{
  protected      T  data;
  protected Node<T> next; 
} 
```

我已经编写了（一个很可能非常粗略的）方法来做到这一点，以及一个将整数类型存储到队列中的基本测试程序（希望如此）。我不知道所有的专业术语，我已经阅读了“泛型”文档，但可能错过了一个关键点，我已经阅读了链表的工作原理（他们的例子在节点类中有很多，这是我的东西） m 不允许在此分配中编辑），以及循环数组等。当我运行我的代码时，我得到了一个我没想到的关于类型的错误。我将发布我的相关代码，有人可以大致解释一下我做了什么来得到这个（而是......在我的代码中我不应该使用的地方？）

```
public class Queue<T> extends Node<T> {

    public Node base;
    public Node end;

    public void enqueue(T item) {

        Node newItem = new Node();
        newItem.data = item;
        newItem.next = null;

        if (isEmpty()) { //Sets to item count of 1
            this.base = newItem; //Base becomes the new item
            this.base.next = this.end; //Base Points Next as End
            this.end.next = this.base; //End points to the one before it (base)
        } 
        else { //Sets to item count above 1.
            this.end.next.next = newItem; //The Last Item Now Points Next as the New Item (End is never counted as an item)
            this.end.next = newItem; //End now points to the next final item.
        }

    }

    public T dequeue() {

        if (isEmpty()) {
            return (null);
        }

        else {
            T item = this.base.data;

            if (this.base.next == this.end) {
                this.base = null;
                this.end = null;
            }

            else {
                this.base = this.base.next;
            }

            return (item);
        }

    }

    public int size() {

        int count = 0;

        for (Node node = base; node != null; node = node.next) {
            count++;
        }
        return count;

    }

    public boolean isEmpty() {

        return (base == null);

    }

    public Queue() {

        this.base = null;
        this.end = null;

    }
 } 
```

TestQueue.java 代码是：

```
public class TestQueue {

    public static void main(String args[]) {

        QueueStuff<Integer> firstQueue = new QueueStuff<>();

        firstQueue.enqueue (66);
        firstQueue.enqueue (6);
        firstQueue.enqueue (666);
        firstQueue.enqueue (0);
        firstQueue.enqueue (6666);

        //firstQueue.printQueue();
    }

} 
```

错误是这样的：

```
incompatible types. 
   T item = this.base.data;
                     ^
   required: T
   found:    Object
   where T is a Type variable: T extends Object declared in class Queue 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T21:40:00.247

问题是您的字段是原始类型

```
public Node base;
public Node end; 
```

这意味着它们在技术上被视为相同，`Node<Object>`并且因为您是泛型类型`T`比`Object`您无法分配`Object`给它更具体。例如你可以做

```
Node test = new Node();
test.data = Integer.valueOf(1);
test.data = "One"; 
```

但`T`在这个例子中被替换为`Integer`and 这意味着你可以尝试这个

```
Node test = new Node()
test.data = "One";
Integer item = test.data; 
```

PS我不确定Queue是否需要扩展Node，只是使用Node来存储数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T21:24:26.200

这里：

```
public Node base;
public Node end; 
```

应该：

```
public Node<T> base;
public Node<T> end; 
```

问题是：泛型都是关于编译时的类型检查。当您执行任务时：

```
T item = this.base.data; 
```

编译器不允许，因为它不进行类型检查。它不输入检查，因为：

```
public Node base; 
```

相当于：

```
public Node<Object> base; 
```

# java - java函数读取文件夹中的文件

> ID：15281930
> 
> 赞同：0
> 
> 时间：2013-03-07T21:17:46.533
> 
> 标签：java, function, bufferedreader

我有一个程序当前读取文件，查找关键字，并输出关键字的出现次数。我需要编写一个读取所有文件的函数，并且我需要将此函数插入​​某个位置，以便显示出现的总数。

我目前正在阅读这样的 1 个文件

```
try (BufferedReader br = new BufferedReader(new FileReader("C:\\P4logs\\out.log.2012-12-26")))
    { 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T21:21:40.757

您将需要获取您的文件夹路径，然后遍历该文件夹中的所有文件，并检查是否过滤掉您不想要的文件。

```
File path = new File(path); //path to your folder. eg. C:\\P4logs
for(File f: path.listFiles()) { // this loops through all the files + directories
    if(f.isFile()) { // checks if it is a file, not a directory.
                     // most basic check. more checks will have to be added if 
                     // you have other files you don't want read. (like non log files)
        try (BufferedReader br = new BufferedReader(new FileReader(f.getAbsolutePath()))) { 
        // gets the full path of a file. so "C:\\P4logs\\out.log.2012-12-26"
            //do stuff
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T21:20:13.300

这很简单：

```
File folder = new File("C:/path_to_your_folder/");

for (File file : folder.listFiles()) {
  // Got a file. Do what you want.
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T21:37:13.520

您需要一个递归函数来进行递归搜索

```
void readAllFiles(final File myFile) {
  if(file.isFile()) {
    //read the file and whatever
    return;
  }
  for(final File childFile : myFile.listFiles()) {
    readAllFiles(childFile);
  }
} 
```

# activerecord - 从 ActiveRecord-hash 中删除元素而不在 DB 上删除

> ID：15281935
> 
> 赞同：0
> 
> 时间：2013-03-07T21:18:18.210
> 
> 标签：activerecord, hash

我怎样才能做到这一点？

```
all_tickets = Ticket.find(:all)

all_tickets.each do |at|
   if at "a condition"
      all_tickets.delete(at)
   end
end 
```

使用此代码，我从数据库中删除了 at 元素，但我只想在“a 条件”为真时从 all_tickets ActiveRecord-Hash 中删除 at 元素。

感谢帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T01:28:09.803

根据您的提示，此解决方案已转换为不使用 sql。简而言之，抓住票，循环它们，如果条件为真，则从属性中删除特定的键。最后，使用这些属性生成一个新的工单实例（不是记录）。

我知道条件是一个外部的东西，但我建议或者将 attr_accessor 添加到将采取条件的对象上。我会在视图中利用这一点，以便不依赖给定字段的存在或不存在来确定它的交付方式。我在这里做了一些假设，但解决方案让我对需要这种操作的功能感到好奇。祝你好运。

```
all_tickets = Ticket.find(:all)
processed_tickets = []
all_tickets.each do |ticket|
  attributes = ticket.attributes
  attributes.delete(:some_key) if some_condition?
  processed_tickets << Ticket.new(attributes)
end 
```

# python - 什么是帮助在 python 中生成重复报告的最佳绘图/报告包？

> ID：15281938
> 
> 赞同：0
> 
> 时间：2013-03-07T21:18:19.947
> 
> 标签：python, matplotlib, plot, report

python新手:)

我正在寻找我需要学习的python包。我的目标是以漂亮的格式（PDF、HTML、LaTex.. 等）创建每日报告，并拥有图表和表格，并设置自动计划并向用户发送电子邮件。

我看到有几个可用的选项；mathplot, scipy, .. 等等。我不知道从哪里开始。

如果可以的话，请让我知道您正在使用什么，或者您最喜欢什么会很棒。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T21:24:52.010

您正在寻找[matplotlib](http://matplotlib.org)，而不是 'mathplot' 或任何其他库。对于交互式使用，请尝试在[IPython中使用](http://ipython.org/)[pylab](http://www.scipy.org/PyLab)。

[matplotlib 简介](http://matplotlib.org/users/intro.html)

# java - 使用字符串设置 JLabel 的颜色

> ID：15281940
> 
> 赞同：3
> 
> 时间：2013-03-07T21:18:22.790
> 
> 标签：java, swing, colors, jlabel, foreground

我正在开发一个 Java 项目。我想让用户输入标签的颜色。我想做这样的事情，但是用一个字符串。

```
jLabel3.setForeground(Color.blue); 
```

这是我尝试过的，但没有奏效：

```
String a = "blue";
jLabel3.setForeground(Color.a); 
```

或者：

```
String a = "blue";
jLabel3.setForeground(a); 
```

有没有可能用另一种方法来做到这一点？任何帮助都会很棒。谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-07T21:22:07.673

这是一种方法：

```
Map<String, Color> colors = new HashMap<String, Color>();

// ...

colors.put("blue", Color.BLUE);
colors.put("red", Color.RED);
colors.put("green", Color.GREEN);
// other colors 
```

然后像这样使用它：

```
String a = "blue";
jLabel3.setForeground(colors.get(a.toLowerCase())); 
```

* * *

**编辑：**考虑一个颜色选择器。请参阅[如何使用颜色选择器](http://docs.oracle.com/javase/tutorial/uiswing/components/colorchooser.html)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-07T21:22:16.327

尝试反射：

```
Color color;
try {
    Field field = Class.forName("java.awt.Color").getField("yellow");
    color = (Color)field.get(null);
} catch (final Exception e) {
    e.printStackTrace();
} 
```

除此之外，您还可以创建颜色及其名称的地图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T21:24:03.707

不确定是否有更好的方法，但您可以执行以下操作：

```
If("blue".equals(a)){
    jLabel3.setForeground(Color.blue);
} 
```

# ms-access - 如何避免 ms 访问公式中的名称错误？

> ID：15281947
> 
> 赞同：0
> 
> 时间：2013-03-07T21:18:54.413
> 
> 标签：ms-access, ms-access-2007, ms-access-2010

我想将表单字段的 DefaultValue 设置为

```
=IIf(IsNull([Forms]![MyForm]![MySubForm].[Form]![MyField]);"";[Forms]![MyForm]![MySubForm].[Form]![MyField]) 
```

当 MyForm 关闭时，我想将字段值设置为“”。不幸的是，我找不到如何测试 MyForm 是否关闭：我尝试过 IsNull、IsObject，非常它总是返回 #Name 吗？

这可能吗 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T21:46:54.723

我使用这样的函数来检查表单是否打开：

```
Function IsLoaded(ByVal strFormName As String) As Boolean
 ' Returns True if the specified form is open in Form view or Datasheet view.

    Const conObjStateClosed = 0
    Const conDesignView = 0

    If SysCmd(acSysCmdGetObjectState, acForm, strFormName) <> conObjStateClosed Then
        If Forms(strFormName).CurrentView <> conDesignView Then
            IsLoaded = True
        End If
    End If

End Function 
```

# python - 在 Windows 上隐式调用 Python 脚本时的 sys.argv 内容

> ID：15281951
> 
> 赞同：2
> 
> 时间：2013-03-07T21:19:06.673
> 
> 标签：python, windows-7

我在 Windows 7 上`.PY`的系统环境`PATHEXT`变量中添加了文件。我也添加`C:\scripts`到我的`PATH`变量中。

考虑我有一个非常简单的 Python 文件 C:\Scripts\helloscript.py

```
print "hello" 
```

现在我可以使用以下命令从控制台调用 Python 脚本：

```
C:\>helloscript 
```

输出是：

```
hello 
```

如果我将脚本更改为更具动态性，请在控制台上将名字作为第二个参数并将其与称呼一起打印出来：

```
import sys
print "hello,", sys.argv[1] 
```

输出是：

```
c:\>helloscript brian
Traceback (most recent call last):
File "C:\Scripts\helloscript.py", line 2, in <module>
    print sys.argv[1]
IndexError: list index out of range 
```

`sys.argv`好像：

```
['C:\\Scripts\\helloscript.py'] 
```

* * *

如果我以通常的方式显式调用脚本：

```
C:\>python C:\Scripts\helloscript.py brian 
```

输出是：

```
hello, brian 
```

如果我尝试使用`optparse`结果是相似的，虽然我可以避免出现错误：

```
from optparse import OptionParser

parser = OptionParser()
parser.add_option("-f", "--firstname", action="store", type="string", dest="firstname")
(options, args) = parser.parse_args()
print "hello,", options.firstname 
```

输出是：

```
hello, None 
```

同样，如果我明确地调用它，该脚本可以正常工作。

* * *

这是问题。这是怎么回事？为什么在`sys.argv`隐式调用我的脚本时不会只填充脚本名称？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T22:22:14.520

原来我不得不手动编辑注册表：

HKEY_CLASSES_ROOT\Applications\python.exe\shell\open\command 是：

```
"C:\Python27\python.exe" "%1" 
```

应该是：

```
"C:\Python27\python.exe" "%1" %* 
```

# ruby-on-rails - has_secure_password 自定义错误信息

> ID：15281953
> 
> 赞同：2
> 
> 时间：2013-03-07T21:19:14.367
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我是 ruby​​ 和 rails 的新手。
我尝试使用 has_secure_password 创建身份验证。
一切都很好，直到我尝试覆盖 password_digest 字段的错误消息。
我已经搜索过了，但所有问题都是关于“如何将'密码摘要不能空白'更改为'密码不能空白'”
我知道这可以在 config/locales/en.yml 中更改，但如果我想要更改整个消息。
假设我需要一条消息，例如“密码摘要不能空白，请填写”或其他语言的消息。
那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-11-21T03:48:36.987

我意识到这篇文章已经有好几年了，但它仍然是关于这个问题的第一个出现的。话虽这么说，如链接中所示[，](https://api.rubyonrails.org/v5.1/classes/ActiveModel/SecurePassword/ClassMethods.html)如果您提供带有 options 参数的 has_secure_password 并在对象内部放置，`validations: false`那么您可以制作自己的验证消息。请注意，这将取消所有验证方法，因此您必须在长度和确认方面进行验证。

例如，

```
has_secure_password(options={validations:false}

validates :password, presence: {message: "Password was not entered"} 
```

这将在验证失败时显示“未输入密码”。

# boto - Elastic Map Reduce：CANCEL_AND_WAIT 和 CONTINUE 之间的区别？

> ID：15281954
> 
> 赞同：9
> 
> 时间：2013-03-07T21:19:21.430
> 
> 标签：boto, elastic-map-reduce, amazon-emr

我刚刚发现使用 Amazon 的 Elastic Map Reduce，我可以指定一个步骤来选择三个 ActionOnFailure 选项之一：

*   TERMINATE_JOB_FLOW
*   CANCEL_AND_WAIT
*   继续

TERMINATE_JOB_FLOW 是默认值且显而易见 - 它会在步骤失败时关闭整个集群。

CANCEL_AND_WAIT 和 CONTINUE 有什么区别？在我看来，两者都将保持集群运行，并在添加时简单地继续下一步。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-08T19:45:12.113

假设您已经启动了一个集群并添加了以下 3 个步骤：

*   第1步
*   第2步
*   第三步

现在，如果`Step1`ActionOnFailure 为`CANCEL_AND_WAIT`，那么如果 失败`Step1`，它将取消所有剩余的步骤，集群将进入一个`Waiting`状态。而且我猜如果您使用`--stay-alive`选项启动集群，那么这是默认行为。

如果`Step1`ActionOnFailure 为`CONTINUE`，则在 失败的情况下`Step1`，它将*继续*执行`Step2`。

如果`Step1`ActionOnFailure 为`TERMINATE_JOB_FLOW`，那么在失败的情况下`Step1`，它会按照您提到的那样关闭集群。

# sql - SQL Azure 迁移向导 - 如何重新迁移

> ID：15281956
> 
> 赞同：0
> 
> 时间：2013-03-07T21:19:42.707
> 
> 标签：sql, azure, migration, sync, wizard

将本地 SQL Server 数据库成功迁移到 SQL Azure 后，如何使用 SQL Azure 迁移向导重新迁移（或同步）数据库？

我收到许多错误，当我尝试重新运行向导时迁移挂起。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T21:42:57.987

我不确定 SQL Azure 迁移向导是否会重新迁移/同步数据。

要同步数据，您可以考虑以下几个选项：

*   SQL 数据同步 - 目前处于预览状态。它会将 SQL Server 同步到 SQL 数据库，或将 SQL 数据库同步到 SQL 数据库。[您可以在http://msdn.microsoft.com/en-us/library/hh456371.aspx](http://msdn.microsoft.com/en-us/library/hh456371.aspx)找到更多信息
*   Red Gate 的 SQL 数据比较 - 这个工具应该也适用于 SQL 数据库。我不相信它有一个开箱即用的调度组件，但你可能可以把它连接起来。 [http://www.red-gate.com/products/sql-development/sql-data-compare/](http://www.red-gate.com/products/sql-development/sql-data-compare/)

# bash - 确定变量中的字符数

> ID：15281957
> 
> 赞同：1
> 
> 时间：2013-03-07T21:19:44.157
> 
> 标签：bash

如何确定变量中的字符数？

```
FOO="blabla.bla.blabla.bla."
--check--
echo $FOO # 4 dot

FOO="..bla.bla.bla.blabla.bla."
--check--
echo $FOO # 7 dot 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T21:22:00.633

你应该试试这个：

```
echo ${#FOO} 
```

`${#VARIABLE_NAME}`给你一个字符串的长度。[阅读](http://tldp.org/LDP/abs/html/string-manipulation.html)（在页面顶部）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T21:23:38.047

```
 awk -F. '{print NF-1}' <<<$FOO 
```

例子：

```
kent$  FOO="blabla.bla.blabla.bla."   

kent$  awk -F. '{print NF-1}' <<<$FOO
4

kent$  FOO="..bla.bla.bla.blabla.bla."

kent$  awk -F. '{print NF-1}' <<<$FOO 
7 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T22:50:44.900

去除非点并计算结果的长度。

```
 $ x=..bla.bla.bla.blabla.bla.
 $ _=${x//[^.]} count=${#_}; echo "$count"
7
 $ printf -v _ %s%n "${x//[^.]}" count; echo "$count"
7 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T21:24:29.517

`echo $FOO | tr -dc \\. | wc -c`

这是否回答你的问题？

# knockout.js - KnockoutJS 多视图模型和“突破”一个

> ID：15281963
> 
> 赞同：1
> 
> 时间：2013-03-07T21:20:08.033
> 
> 标签：knockout.js, viewmodel

所以我正在使用 KnockoutJS 处理多个视图模型，如下所示：

```
function firstViewModel() {
    var self = this;
    self.dataArray = ko.observableArray([
        { title: "title1", theData: "data1" },
        { title: "title2", theData: "data2" },
        { title: "title3", theData: "data3" },
    ]);
};

function secondViewModel() {
    var self = this;
    self.addData = function() {
        firstViewModel.dataArray.push({ title: "newTitle", theData: "newData" });
        // trying to trigger dataArray in firstViewModel, doesn't work
    }
};

ko.applyBindings(new firstViewModel(), document.getElementById('first'));
ko.applyBindings(new secondViewModel(), document.getElementById('second')); 
```

然后是这样的：

```
<div id="first" data-bind="with: dataArray">
    <ul data-bind="foreach: $data">
        <li data-bind="text: theData"></li>
    </ul>
</div>
<div id="second">
    <button data-bind="click: addData">add</button>
</div> 
```

它的结构是这样的原因是因为我有一个第三视图模型，并且元素在 DOM 中重叠。我也不知道如何让它[工作](http://www.knockmeout.net/2012/05/quick-tip-skip-binding.html)。

有没有办法将结构和引用 firstViewModel 保留在 secondViewModel 中？*firstViewModel.theData.push("newData");* 显然不起作用，但我想我会把它包括在内以进一步阐明我想要做什么。

我是 KO 的新手——如果这是一个愚蠢的问题，我很抱歉。

**编辑：**看起来我明白了！

如果我从 firstViewModel 中删除“自我”，它会起作用......

```
dataArray = ko.observableArray([
    { title: "title1", theData: "data1" },
    { title: "title2", theData: "data2" }
]); 
```

然后

```
self.addData = function() {
    dataArray.push({ title: "newTitle", theData: "newData" });
} 
```

我还不知道删除“自我”是否会产生后果，但到目前为止它正在发挥作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T09:02:05.727

就个人而言，我更喜欢让我的模型解耦，并使用发布/订阅模式让它们相互交谈。[查看我对带有 knockoutJS](https://stackoverflow.com/questions/14555381/variable-dependency-with-knockoutjs/14559492#14559492)的变量依赖项的回答

此外，如果你确实想走这条路，你也可以看看[淘汰赛邮箱](https://www.google.co.uk/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDUQFjAA&url=https://github.com/rniemeyer/knockout-postbox/&ei=7Kg5UdLxMaLL0AXQsYCQCw&usg=AFQjCNG-FzUVJ5Y20TdRgrG8dZv1CVv4og&sig2=1o7hkt8cMVaEEaR79sXdLQ&bvm=bv.43287494,d.d2k)来完成同样的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T21:30:54.390

您可以传递第一个视图模型的引用：

```
function firstViewModel() {
    var self = this;
    self.dataArray = ko.observableArray([
        { title: "title1", theData: "data1" },
        { title: "title2", theData: "data2" },
        { title: "title3", theData: "data3" },
    ]);
};

function secondViewModel(firstViewModel) {
    var self = this;
    self.addData = function() {
        firstViewModel.dataArray.push({ title: "newTitle", theData: "newData" }); // doesn't work
    }
};

var firstVm = new firstViewModel();
var secondVm = new secondViewModel(firstVm);
ko.applyBindings(firstVm, document.getElementById('first'));
ko.applyBindings(secondVm, document.getElementById('second')); 
```

# python - 我如何知道我的邮递员帖子是否成功使用 gmail？

> ID：15281965
> 
> 赞同：3
> 
> 时间：2013-03-07T21:20:10.633
> 
> 标签：python, command-line, mailman

如果您使用 gmail 向邮递员邮件列表发帖，您将不会在收件箱中收到您自己的邮件，因为它会立即存档。有很多关于 Gmail 对此行为的投诉，但到目前为止，您无能为力。

是否还有一种可能的方式来获得对您的帖子的确认？

（请注意，如果列表版主接受您的帖子需要一些时间，您可能希望在您的邮件发送给列表的订阅者时收到通知。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T21:20:10.633

**仅为您自己启用确认**

mailman 中有一个[选项](http://www.gnu.org/software/mailman/mailman-member/node24.html)可以让 mailman 告诉您邮件何时送达：

> 我如何让邮递员告诉我我的帖子何时被列表收到？（确认选项）
> 
> [...]
> 
> 要使用电子邮件界面进行设置：
> 
> 使用命令 set ack on 或 set ack off 向 LISTNAME-request@DOMAIN 发送邮件。

**通过命令行为所有用户更改它**

但是，如果您是邮递员列表的管理员，甚至是运行许多邮递员列表的服务器的管理员，您可能希望为列表中的所有 gmail 用户更改此选项。在这种情况下，以下脚本可能会帮助您通过命令行自动更改选项。

*   将以下行保存到`/usr/lib/mailman/bin/ackpostforgmail.py`（文件名很重要！替换`/usr/lib/mailman`为您的邮递员安装路径！）
*   `cd /usr/lib/mailman/bin/`
*   `sudo withlist -r ackpostforgmail LISTNAME`

    ```
    # Call this script with:
    # cd /usr/lib/mailman/bin/
    # withlist -r ackpostforgmail LISTNAME

    from Mailman import mm_cfg

    def ackpostforgmail(m):
        # m is the maillist object for the list LISTNAME

        # We need to lock the list, since we want to change something...
        m.Lock()

        print "Setting 'AcknowledgePosts' to True for all gmail adresses of the list..."
        for memb in m.members:
            # If the mailadress memb contains 'gmail'...
            if 'gmail' in memb:
                # ...set the ackpost option...
                prev_state = m.getMemberOption(memb, mm_cfg.AcknowledgePosts)
                m.setMemberOption(memb, mm_cfg.AcknowledgePosts,True)
                after_state = m.getMemberOption(memb, mm_cfg.AcknowledgePosts)

                print "%s: %s -> %s" % (memb, prev_state, after_state)

        m.Save() 
    ```

如果您想为所有列表运行此命令，您可能需要为该命令设置`-a`标志。`with_list`否则，该`list_lists`命令可能有助于您查找正在运行的列表。

# c++ - c++11中函数指针向量的初始化列表

> ID：15281970
> 
> 赞同：1
> 
> 时间：2013-03-07T21:20:18.320
> 
> 标签：c++, c++11, initialization, function-pointers

我正在尝试使用函数指针表来编码 DFA。

该表由指向函数的函数指针填充，以输出某些内容或移动到表中的另一个状态，所有这些都基于机器接收到的输入。

现在我能做的是

```
function<token* ()> A1 = bind(A, &data);
function<token* ()> A2 = bind(B, &data);
function<token* ()> S1 = bind(S, 1);
function<token* ()> S2 = bind(S, 2);

vector< function<token* ()> > _table = { A1, A2, S1, S2 }; 
```

要制作一个 2x2 “表”，其中 [0][0] 执行动作 A1，[0][1] 执行动作 A2，[1][0] 确实转移到第 1 行，[1][1] 转移到第 2 行……以此类推。

我的问题是，在 c++11 中，有没有更快的方法来做到这一点？我的状态表已经增长到 60x150，我有 50 个不同的动作都绑定到不同的函数，我必须定义一个移位函数来到达每一行。

我试图在 C++11 的初始化功能中完成这一切，所以它是在编译时完成的，而不是在运行时完成的。

是否可以创建一个宏或执行以下操作的东西：

```
vector<function<token* ()> > S;
for(int i = 0; i < 60; i++){
  function<token* ()> S[i] = bind(S, i);
} 
```

以便在那之后我可以引用`S[3]`或其他任何东西，它会给我返回适当绑定的函数指针？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T23:13:04.963

使用[Boost Preprocessor](http://www.boost.org/doc/libs/1_53_0/libs/preprocessor/doc/index.html)，您可以轻松地制作一些：

例如：

```
#include <vector>
#include <functional>
#include <boost/preprocessor/repetition.hpp>
#include <boost/preprocessor/punctuation/comma_if.hpp>
struct token{};
token* S(int){return new token;}
#define MAKE_FUNCT(z, n, unused)         \
BOOST_PP_COMMA_IF(n)                     \
std::bind(S, n)                          \

int main()
{
   std::vector<std::function<token* ()>> table = 
                  {BOOST_PP_REPEAT(10, MAKE_FUNCT, ~)};
} 
```

这是一个[示例](http://liveworkspace.org/code/419oaX%2410)，传递了`-E`我得到的标志：

```
std::vector<std::function<token* ()>> table = { std::bind(S, 0) , std::bind(S, 1) , std::bind(S, 2) , std::bind(S, 3) , std::bind(S, 4) , std::bind(S, 5) , std::bind(S, 6) , std::bind(S, 7) , std::bind(S, 8) , std::bind(S, 9)}; 
```

# forms - 验证表格中的电话号码

> ID：15281980
> 
> 赞同：0
> 
> 时间：2013-03-07T21:20:54.257
> 
> 标签：forms, validation

我正在尝试让我的代码适用于表单。我希望它验证电话号码。它想继续告诉我电话号码不正确，即使它是正确的。

这就是我所拥有的。我取出了与这部分相关的其余代码以简化它。我不确定我的代码是否正确，但我希望有人只能输入数字。输入一个 10 位的数字字符串，如果可能，将其更改为以下格式 (XXX) XXX-XXXX。

```
<?php

include_once "contact-config.php";

$error_message = '';

if (!isset($_POST['submit'])) {

  showForm();

} else { //form submitted

  $error = 0;

 if(!empty($_POST['phone'])) {
$phone[2] = clean_var($_POST['phone']);
if (!validPhone($phone[2])) {
  $error = 1;
  $phone[3] = 'color:#FF0000;';
  $phone[4] = '<strong><span style="color:#FF0000;">Invalid Phone Number</span></strong>';
  }
 }
  else {
    $error = 1;
    $phone[3] = 'color:#FF0000;';
  } 

<td class="quote_text" style="width:{$left_col_width}; text-align:right; vertical-align:top; padding:{$cell_padding}; {$phone[3]}"><span class='required'><b>* </b></span>{$phone[0]}</td>
<td style="text-align:left; vertical-align:top; padding:{$cell_padding};"><input type="text" name="{$phone[1]}" value="{$phone[2]}" size="20" maxlength="11" id="{$phone[1]}" /> {$phone[4]}</td>

/* Phone Number Validation Function. */

function validPhone($phone)
{
  $isValid = true;
  if(array_key_exists('phone', $_POST))
  {
    if(!preg_match('/^[0-9]{3}-[0-9]{3}-[0-9]{4}$/', $_POST['phone']))
    {
      $isValid = false;
    }
 }
 return $isValid;
 }
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T21:33:51.570

尽管我没有深入调试，但我对您的原始代码有一些评论。

1.  [http://php.net/manual/en/function.preg-match.php](http://php.net/manual/en/function.preg-match.php)上有一个更复杂的正则表达式，您可以尝试一下。它大约在页面的一半处。[我在http://regexpal.com/](http://regexpal.com/)和[http://www.solmetra.com/scripts/regex/index.php](http://www.solmetra.com/scripts/regex/index.php)都尝试了你的正则表达式；它在我使用的电话号码的任何一个地方都不起作用。我从 PHP 参考页面中提取的正则表达式，如下所示，有效。

    /^(?:1(?:[.-])?)?(?:((?=\d{3})))?([2-9]\d{2})(?:(? <=(\d{3})))? ?(?:(?<=\d{3})[.-])?([2-9]\d{2})[. -]?(\d{4})(?: (?i:ext).? ?(\d{1,5}))?$/

2.  您使用参数调用函数然后不使用函数体中的参数，这让我觉得很奇怪。

3.  这可能是[PHP 的重复主题：美国电话号码验证，](https://stackoverflow.com/questions/11705507/php-validation-of-us-phone-numbers)非常全面。

# java - OpenGL着色器得到不正确的数据，即使它看起来是正确的

> ID：15281982
> 
> 赞同：1
> 
> 时间：2013-03-07T21:21:00.677
> 
> 标签：java, opengl, lwjgl, opengl-3

我刚开始学习如何使用 OpenGL 3.2，现在我正在尝试组合一个用于加载几何数据的实用程序。当我查看加载顶点的代码时，一切看起来都是正确的，我输入的调试输出甚至似乎给了我正确的值。代码应该生成一个三角形，每个点都得到完整的 r、g 或 b，但几乎是纯红色/橙色。

这是带有几何数据的代码：

```
 final float[] vertexPositions3 = new float[] {
            0.0f,    0.5f, 0.0f, 1.0f,
            0.5f, -0.366f, 0.0f, 1.0f,
            -0.5f, -0.366f, 0.0f, 1.0f,
            1.0f,    0.0f, 0.0f, 1.0f,
            0.0f,    1.0f, 0.0f, 1.0f,
            0.0f,    0.0f, 1.0f, 1.0f,
    };

    geometry = new Geometry();
    geometry.addBufferOffset(vertexPositions3, GL_STATIC_DRAW, 0, Geometry.VERTEX_4F, Geometry.VERTEX_4F); 
```

以及加载它的代码：

```
protected int getDataTypeSize(int dataType) {
    if(dataType == VERTEX_1F) {
        return 1;
    }
    else if(dataType == VERTEX_2F) {
        return 2;
    }
    else if(dataType == VERTEX_3F) {
        return 3;
    }
    else {
        return 4;
    }
}

public void addBufferOffset(float[] data, int usage, int vertexColumn, int... dataTypes) {
    if(numAttributes + dataTypes.length >= MAX_VBO) {
        throw new IllegalStateException("Can only have up to 16 attributes, requested: " + (numAttributes + dataTypes.length));
    }

    int rowSize = 0;
    for(int type : dataTypes) {
        rowSize += getDataTypeSize(type);
    }
    if(numRows == 0) {
        numRows = data.length / rowSize;
    }
    else if(numRows != (data.length / rowSize)) {
        throw new IllegalStateException("Number of rows in buffers don't match: " + numRows + " vs " + (data.length / rowSize));
    }

    if(numVertices == 0) {
        numVertices = getDataTypeSize(dataTypes[0]) * (data.length / rowSize) / getDataTypeSize(dataTypes[0]);
    }
    else {
        int addingVerts = getDataTypeSize(dataTypes[0]) * (data.length / rowSize);
        if(addingVerts != numVertices) {
            throw new IllegalStateException("Vertex count for buffers don't match: " + numVertices + " vs " + addingVerts);
        }
    }
    glBindVertexArray(vao);

    FloatBuffer buf = BufferUtils.createFloatBuffer(data.length);
    buf.put(data);
    buf.flip();
    int vbo = glGenBuffers();
    vbos[numBuffers++] = vbo;
    glBindBuffer(GL_ARRAY_BUFFER, vbo);
    glBufferData(GL_ARRAY_BUFFER, buf, usage);

    int startPos = 0;
    for(int i = 0; i < dataTypes.length; i++) {
        glEnableVertexAttribArray(numAttributes + i);
        glVertexAttribPointer(numAttributes + i, getDataTypeSize(dataTypes[i]), GL_FLOAT, false, 0, startPos);
        System.out.println((numAttributes + i) + ", " + getDataTypeSize(dataTypes[i]) + ", " + startPos);
        startPos += numRows * getDataTypeSize(dataTypes[i]);
    }
    System.out.println("Num verts: " + numVertices);
    if(usesIndices) {
        glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, indicesRef);
    }
    numAttributes += dataTypes.length;
    glBindVertexArray(0);
} 
```

和顶点着色器：

```
#version 330

layout(location = 0) in vec4 position;
layout(location = 1) in vec4 color;

smooth out vec4 theColor;
uniform float loopDuration;
uniform float time;
uniform vec4 camera;

void main() {
    float timeScale = 3.14159f * 2.0f / loopDuration;
    vec4 totalOffset = vec4(
        cos(time * 1.5f * timeScale) * 0.5f,
        sin(time * 1.5f * timeScale) * 0.5f,
        0.0f,
        0.0f);
    gl_Position = position + totalOffset;
    theColor = color;
} 
```

最后是片段着色器：

```
#version 330

smooth in vec4 theColor;

out vec4 outputColor;

uniform float fragLoopDuration;
uniform float time;

const vec4 firstColor = vec4(1.0f, 1.0f, 1.0f, 1.0f);
const vec4 secondColor = vec4(0.0f, 1.0f, 0.0f, 1.0f);

void main() {
    float lerpTime = time * 1.5f / fragLoopDuration;
    outputColor = theColor;
} 
```

当我运行程序时，addBufferOffset 方法会产生以下输出：

```
0, 4, 0
1, 4, 12
Num verts: 3 
```

这意味着它找到了两组三个顶点，每个顶点有四个浮点值。其中一个从数组偏移量 0 开始，另一个从数组偏移量 12 开始。这与发送给它的数组相对应：具有 x、y、z、w 值的 3 个顶点和具有 r、g、b 值的 3 个顶点，一个值。从输出来看，它似乎应该工作，但事实并非如此。我真的很感激一些帮助来解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T22:53:01.903

我对 lwjgl 不熟悉，但是`glVertexAttribPointer`C API 中 OpenGL 函数的最后一个参数是数据的字节偏移量 - 似乎您正在传递数组索引。这可以解释为什么您会看到一个红色/橙色三角形，因为从第 12 个字节（3 个浮点数之后）开始的数据如下所示：

```
 1.0f, 0.5f, -0.366f, 0.0f,
        1.0f, -0.5f, -0.366f, 0.0f,
        1.0f, 1.0f,  0.0f, 0.0f 
```

将这些值限制在 0 和 1 之间将给出

```
 1.0f, 0.5f, 0.0f, 0.0f,
        1.0f, 0.0f, 0.0f, 0.0f,
        1.0f, 1.0f,  0.0f, 0.0f 
```

假设您的混合设置忽略了零 alpha 分量，这些将给出橙色、红色和黄色顶点。

# c# - asp.net c#visual studio 2010 发送电子邮件的问题 - 按钮什么也不做

> ID：15281990
> 
> 赞同：1
> 
> 时间：2013-03-07T21:21:31.413
> 
> 标签：c#, asp.net, visual-studio, smtp

嗨，我在从表单发送电子邮件时遇到问题，我的按钮没有任何作用，请帮助！我尝试了不同的解决方案，并且 smtp 设置端口但仍然无法正常工作，任何帮助将不胜感激，这是我的代码：

```
 Aspx side:

      <asp:Content ID="HeaderContent" runat="server" ContentPlaceHolderID="HeadContent">
    <style type="text/css">
        .style2
        {
            width: 341px;
        }
    </style>
        </asp:Content>
      <asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
    <h2>
      Test
    </h2>
    <p>
  <h2>Contact Us</h2>
<asp:Panel ID="Panel1" runat="server" DefaultButton="btnSubmit">
              <p>
        Please Fill the Following to Send Mail.</p>
              <p>
        Your name:
        <asp:RequiredFieldValidator ID="RequiredFieldValidator11" runat="server"   ErrorMessage="*"
            ControlToValidate="YourName" ValidationGroup="save" /><br />
        <asp:TextBox ID="YourName" runat="server" Width="250px" /><br />
        Your email address:
        <asp:RequiredFieldValidator ID="RequiredFieldValidator1" runat="server" ErrorMessage="*"
            ControlToValidate="YourEmail" ValidationGroup="save" /><br />
        <asp:TextBox ID="YourEmail" runat="server" Width="250px" />
        <asp:RegularExpressionValidator runat="server" ID="RegularExpressionValidator23"
            SetFocusOnError="true" Text="Example: username@gmail.com" ControlToValidate="YourEmail"
            ValidationExpression="\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*" Display="Dynamic"
            ValidationGroup="save" /><br />
        Subject:
        <asp:RequiredFieldValidator ID="RequiredFieldValidator2" runat="server" ErrorMessage="*"
            ControlToValidate="YourSubject" ValidationGroup="save" /><br />
        <asp:TextBox ID="YourSubject" runat="server" Width="400px" /><br />
        Your Question:
        <asp:RequiredFieldValidator ID="RequiredFieldValidator3" runat="server" ErrorMessage="*"
            ControlToValidate="Comments" ValidationGroup="save" /><br />
        <asp:TextBox ID="Comments" runat="server" 
                TextMode="MultiLine" Rows="10" Width="400px" />
    </p>
    <p>
        <asp:Button ID="btnSubmit" runat="server" Text="Send" 
                    OnClick="Button1_Click" ValidationGroup="save" />
    </p>
</asp:Panel>
<p>
    <asp:Label ID="DisplayMessage" runat="server" Visible="false" />
</p>  `enter code here`
</asp:Content>

and cs:
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Net;
using System.Net.Mail;

public partial class About : System.Web.UI.Page
{
    protected void SendMail()
    {

  // your email address
 var fromAddress = YourEmail.Text.ToString();
 // any address where the email will be sending
 var toAddress = "my email address";

        //Password of your gmail address
        const string toPassword = "my password";
        // Passing the values and make a email formate to display
        string subject = YourSubject.Text.ToString();
        string body = "From: " + YourName.Text + "\n";
        body += "Email: " + YourEmail.Text + "\n";
        body += "Subject: " + YourSubject.Text + "\n";
        body += "Question: \n" + Comments.Text + "\n";
        // smtp settings
        var smtp = new System.Net.Mail.SmtpClient();
        {
            smtp.Host = "smtp.gmail.com";
            smtp.Port = 587;
            smtp.EnableSsl = true;
            smtp.DeliveryMethod = System.Net.Mail.SmtpDeliveryMethod.Network;
            smtp.Credentials = new NetworkCredential(toAddress, toPassword);
            smtp.Timeout = 20000;
        }
        // Passing values to smtp object
        smtp.Send(fromAddress, toAddress, subject, body);
    }

    protected void Button1_Click(object sender, EventArgs e)
    {
        try
        {
            //here on button click what will done 
            SendMail();
            DisplayMessage.Text = "Your Comments after sending the mail";
            DisplayMessage.Visible = true;
            YourSubject.Text = "";
            YourEmail.Text = "";
            YourName.Text = "";
            Comments.Text = "";
        }
        catch (Exception) { }
    }
} 
```

# ajax - Wordpress 创建类别 AJAX 响应

> ID：15281995
> 
> 赞同：4
> 
> 时间：2013-03-07T21:21:42.970
> 
> 标签：ajax, wordpress, categories

我目前有一个插件，允许用户激活/停用类别来驱动菜单。我已经为切换创建了一个选项，并让它在创建表单和编辑表单中无缝运行。我似乎无法添加它的唯一地方是创建类别时从 wordpress 返回的 AJAX。我可以在加载类别页面时创建列，但不知道如何在不修改核心的情况下利用 AJAX 返回。是否有一个我不知道的钩子可以让你修改这个回报？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-14T20:18:23.240

使用 Akmal 的回答，这是我检查分类分类是否已创建的脚本。谢谢阿克马尔。

WordPress 版本 3.8.2

```
 $(document).ajaxComplete(function(event, xhr, settings) {
            var queryStringArr = settings.data.split('&');
                if( $.inArray('action=add-tag', queryStringArr) !== -1){
                    var xml = xhr.responseXML;
                    $response = $(xml).find('term_id').text();
                    if($response!=""){
                        console.log('This is the action.');

                    }
                }
        }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-19T04:45:59.557

您是否尝试在 ajax 返回后（添加新类别后）运行一些 Javascript？

当您以类别形式创建自定义字段时，请尝试将以下代码放入您的代码中：

```
 $(document).ajaxComplete(function(event, xhr, settings) {

         var queryStringArr = settings.data.split('&');

         if ($.inArray('action=add-tag', queryStringArr) !== -1){
             your_javascript_function(); //this is your js function
         }

       }); 
```

# php - 在 cakephp 的查询中使用 LIKE 条件

> ID：15281996
> 
> 赞同：7
> 
> 时间：2013-03-07T21:21:48.090
> 
> 标签：php, mysql, cakephp

在继续保存记录之前，我试图找出数据库中是否已经存在类似的记录。我用谷歌搜索并发现它看起来应该可以工作，但不幸的是没有。我是 cakephp 新手，无法找出正确的查询。

```
$this->Tape->recursive = -1;
$tapeexists = $this->Tape->find('all', array('condition'=>array('Tape.name LIKE'=>'blondie%')));
$this->set('output', $tapeexists); 
```

如果我 print_r() 视图中的结果，我可以看到它只是运行并获取该表中的所有结果，其中没有一个名称甚至远程像“金发女郎”！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-07T21:52:47.137

我认为您`conditions`在查找时只是拼写错误：

```
$tapeexists = $this->Tape->find('all', array('conditions'=>array('Tape.name LIKE'=>'blondie%'))); 
```

这应该会给你预期的结果。

对于不允许重复的特定目标，我建议在`Tape`模型上创建一个验证规则。有一个特定的内置规则旨在避免重复，因此您最好使用它。[在此处](http://book.cakephp.org/2.0/en/models/data-validation.html)查看有关数据验证的更多信息- 查看`isUnique`核心验证规则。

# php - 在 foreach 中组合先前的数组值

> ID：15281998
> 
> 赞同：-1
> 
> 时间：2013-03-07T21:21:53.300
> 
> 标签：php, foreach

我在数组中有目录，我的目标是在 foreach（或等效）语句中获取文件夹名称和文件夹路径。

这是我到目前为止所拥有的。

```
<?
$array = array("folder","path","here");
foreach ($array as $value){
    echo "File Name: $value";
    echo "File Path:       ";
} 
```

如您所见，我不知道如何获取路径。我想要的，是这样的。

```
File Name: folder
File Path: /folder

File Name: path
File Path: /folder/path

File Name: here
File Path: /folder/path/here 
```

有人有什么建议吗？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T21:24:16.957

对于您的确切输出，您可以使用[`array_slice()`](http://php.net/array_slice)：

```
foreach ($array as $current_index => $value){
    echo "File Name: $value";
    echo "File Path: /" . implode( '/', array_slice( $array, 0, $current_index + 1));
} 
```

这[将输出](http://viper-7.com/oMWXSI)：

```
File Name: folder
File Path: /folder

File Name: path
File Path: /folder/path

File Name: here
File Path: /folder/path/here 
```

否则，对于完整路径，您可以使用[`implode()`](http://php.net/implode)：

```
echo implode( '/', $array); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T21:24:24.500

使用`implode`函数来组合数组的元素：

```
implode( '/', $array ) 
```

见[http://www.php.net/manual/en/function.implode.php](http://www.php.net/manual/en/function.implode.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T21:30:04.263

在循环内构建路径：

```
<?
$array = array("folder","path","here");
$path = "";
foreach ($array as $value){
    $path .= "/$value";
    echo "File Name: $value";
    echo "File Path: $path";
} 
```

# jenkins - 用 Puppet 触发 Jenkins

> ID：15281999
> 
> 赞同：2
> 
> 时间：2013-03-07T21:21:53.890
> 
> 标签：jenkins, puppet

最近，我们的组织决定从使用 Maven/Cargo-plugin 部署我们的应用程序转变为使用 Puppet。我们仍然在 Jenkins 中进行所有构建和测试工作。所以我想弄清楚的是如何根据木偶清单中更改的特定行触发特定的 Jenkins 作业？我们正在使用包含我们所有已部署组件及其版本的清单。如果我更改其中一个组件的版本，我希望根据更改的组件触发特定的测试作业。如果测试失败，最终我会想要回滚 puppet 更改。有没有人做过相关的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T21:37:14.093

我没有将它用于您的特定用例，但是对于您想要监视 Puppet 清单内容以进行更改的“拉动”场景，只要您的 Jenkins 作业可以访问， [Jenkins FSTrigger 插件就](https://wiki.jenkins-ci.org/display/JENKINS/FSTrigger+Plugin)应该适合您木偶清单文件。您可以将其设置为查找整个文件内容的更改，或仅查找内容的特定部分。

如果您希望“推送”场景在 Puppet 清单更改后立即触发构建，您可以编写一个在保存更改后运行的脚本，检查哪些组件已更改，并通过[Jenkins CLI](https://wiki.jenkins-ci.org/display/JENKINS/Jenkins+CLI)触发构建。