# StackOverflow 问答 14564000-14564999

# html - html - IE9 中的 td 最大宽度

> ID：14564001
> 
> 赞同：3
> 
> 时间：2013-01-28T14:17:45.847
> 
> 标签：html, internet-explorer-9

我想限制表格中列的宽度。

```
<!DOCTYPE html>
<style type="text/css">
table tr td {border:1px solid; max-width:2em; overflow:hidden; white-space:nowrap;}
</style>
<table>
    <tr><td>this is looooooooo ooooooooo ooooooooooooo ooooooooo ng text</td></tr>
</table> 
```

下一个代码在 Firefox 中运行良好（单元格的宽度有限），但在 IE9 中宽度不受限制。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T14:46:08.193

您需要在 HTML 中的 td 之后添加一个 div，如下所示。里面的任何东西都`div`不会伸展`table`细胞。

[演示](http://jsfiddle.net/Sriganesh/9S74F/)

```
<!DOCTYPE html>
    <table>
      <tr>
        <td>
          <div>
            this is looooooooo ooooooooo ooooooooooooo ooooooooo ng text
          </div>
        </td>
      </tr>
    </table> 
```

## CSS：

```
table tr td {
    border:1px solid;
    max-width:2em;
    overflow:hidden;
    white-space:nowrap;
}

div {
  width: 2em;
} 
```

在 IE8、Chrome 和 Firefox 中运行良好。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-28T14:22:56.213

尝试使用 IE 表达式`width: expression(document.body.clientWidth > 901 ? "900px" : "auto");`

# maven - 如何使用 pom 文件在 jenkins 中创建可调试的构建？

> ID：14564002
> 
> 赞同：0
> 
> 时间：2013-01-28T14:17:51.393
> 
> 标签：maven, jenkins, robotium, pom.xml

我正在尝试构建一个可以从詹金斯自动执行测试用例的robotium apk文件并收到以下错误：

```
[INFO]   Run started: se.stuff.android.app.test, 7 tests:
[INFO]     Start: se.stuff.android.test.app.APP_Test#test_A_check_app
[INFO]     End: se.stuff.android.test.app.APP_Test#test_A_check_app
[INFO]     Start: se.stuff.android.test.app.APP_Test#test_B_bad_credentials
[INFO]     End: se.stuff.android.test.app.APP_Test#test_B_bad_credentials
[INFO]     Start: se.stuff.android.test.app.APP_Test#test_C_Log_in
[INFO]     ERROR:se.stuff.android.test.app.APP_Test#test_C_Log_in
[INFO]     Test failed to run to completion. Reason: 'Instrumentation run failed due to 'java.lang.ClassNotFoundException''. Check device logcat for details
[INFO]     End: se.stuff.android.test.app.APP_Test#test_C_Log_in
[INFO]   Run failed: Instrumentation run failed due to 'java.lang.ClassNotFoundException'
[INFO]   Run ended: 0 ms
[ERROR]   FAILURES!!!
[INFO]   Tests run: 3 (of 7),  Failures: 0,  Errors: 1
[INFO] Report file written to /var/lib/hudson/jobs/App_Android_Test/workspace/APP_Test/target/surefire-reports/TEST-localhost_49851_unknown_sdk.xml
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE 
```

我检查了模拟器，似乎缺少 InstrumentationTesRunner。我听说的是，在为发布而构建应用程序时，仪器类被排除在外。因此，我的问题是，如何使用 pom.xml 文件在 jenkins 中创建可调试的构建并使用 maven 构建？

前两个测试用例实际上可以通过，因为它应该在开始之前检查一切是否正常。如果没有发现潜在问题，测试执行将继续。

# c# - Webview 始终位于顶部（Metro 应用程序）

> ID：14564007
> 
> 赞同：1
> 
> 时间：2013-01-28T14:18:13.363
> 
> 标签：c#, xaml, webview, windows-runtime, z-index

我注意到，只要您的屏幕上有一个 WebView，它就会成为 UI 的最顶层元素。有没有办法设置z-index？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T14:49:48.523

没有办法设置 z-index 或任何类似的东西，WebView 总是在 XAML（“空域”问题）之上。如果新内容完全隐藏 WebView 或使用 WebViewBrush 控件，则必须隐藏 Web 视图。

[http://blogs.msdn.com/b/wsdevsol/archive/2012/10/18/nine-things-you-need-to-know-about-webview.aspx#AN2](http://blogs.msdn.com/b/wsdevsol/archive/2012/10/18/nine-things-you-need-to-know-about-webview.aspx#AN2)

[http://blogs.msdn.com/b/priozersk/archive/2012/08/13/how-to-display-charms-on-a-top-of-the-webview.aspx](http://blogs.msdn.com/b/priozersk/archive/2012/08/13/how-to-display-charms-on-a-top-of-the-webview.aspx)

[http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.webviewbrush.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.webviewbrush.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-23T19:54:27.237

从[https://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.webview.aspx](https://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.webview.aspx)：

> 注意“空域问题”已从 Windows 8.1 开始修复。

# c# - 弄清楚我的对象在 2D 平面上朝向哪个方向？

> ID：14564010
> 
> 赞同：1
> 
> 时间：2013-01-28T14:18:32.147
> 
> 标签：c#, xna, 2d, game-physics

我和我的朋友在 XNA 4.0 中玩弄 2D 赛车游戏。有点像这个：Ivan “Ironman” Stewart 的 Super Off Road。我们遇到的问题是知道汽车面向哪个方向以适当地移动它。我们可以通过枚举值 North、South、East、West 来跟踪方向，但出于多种原因我们不想这样做。

我们想知道是否有办法通过数学来实现这一点。也许通过在汽车引擎盖上指定一个锚点并让汽车始终朝着该位置移动，然后移动该锚点。我们不确定。或者也许有一种使用二维向量的方法。

我想既然我们遇到了困难，我们应该向编码社区寻求帮助！

只是要清楚。我不是在寻找代码；我只想讨论所有方向的 2D 运动的一些概念，而不必跟踪方向枚举。我知道这不是唯一的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T14:22:29.273

汽车物理实际上是一门非常难的学科。我祝你一切顺利，但你正在着手一项艰巨的任务。

至于答案：您可以将方向角存储为弧度并使用 atan2 函数来获取角度之间的关系。

或者您可以使用 Vector2D 并使用矢量数学来确定角度，atan2 也将成为您的朋友。

我在这个问题上的代码片段：

```
public class RotatingImage implements RotatingImageVO {
  protected double x, y; // center position
  protected double facingx, facingy;
  protected double angle;

  protected void calculateAngle() {
    angle = Math.atan2(x-facingx, facingy-y);
  }
} 
```

请记住，计算 atan2 的成本很高。当我为每个对象（塔防，塔在旋转；）的每次绘制迭代中执行此操作时，它占用了我大约 30% 的计算能力。只有在检测到明显的角度变化时才这样做。像这样：

```
public void setFacingPoint(double facingx, double facingy) {
  if (Math.abs((facingx-this.facingx)/(facingx+this.facingx)) > 0.002 
      || Math.abs((facingy-this.facingy)/(facingy+this.facingy)) > 0.002) {
    this.facingx = facingx;
    this.facingy = facingy;
    calculateAngle();
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T14:27:18.990

使用单位向量描述方向和使用点描述位置是有意义的。然后当汽车向前移动时

`currentPosition = currentPosition + distance * directionvector;`//（伪代码）

改变方向时，最好使用矩阵来（旋转）变换方向向量。

（我对 XNA 不熟悉）

写了一些虚拟代码来说明：

```
[Test]
public void MoveForwardTest()
{
    var position = new Point(0, 0);
    var direction = new Vector(1, 0);
    double distance = 5;
    //Update position moving forward distance along direction
    position = position + distance * direction; 
    Assert.AreEqual(5.0, position.X, 1e-3);
    Assert.AreEqual(0, position.Y, 1e-3);
}

[Test]
public void RotateThenMoveTest()
{
    var position = new Point(0, 0);
    var direction = new Vector(1, 0);
    double distance = 5;
    //Create the rotation matrix
    var rotateTransform = new RotateTransform(90); 
    //Apply the rotation to the direction
    direction = Vector.Multiply(direction, rotateTransform.Value); 
    //Update position moving forward distance along direction
    position = position + distance * direction; 
    Assert.AreEqual(0, position.X, 1e-3);
    Assert.AreEqual(5.0, position.Y, 1e-3);
}

[Test]
public void CheckIfOtherCarIsInfrontTest()
{
    var position = new Point(0, 0);
    var direction = new Vector(1, 0);
    var otherCarPosition = new Point(1, 0);
    //Create a vector from current car to other car
    Vector vectorTo = Point.Subtract(otherCarPosition, position); 
    //If the dotproduct is > 0 the other car is in front
    Assert.IsTrue(Vector.Multiply(direction, vectorTo) > 0); 
}

[Test]
public void AngleToNortTest()
{
    var direction = new Vector(1, 0);
    var northDirection = new Vector(0, 1);
    Assert.AreEqual(90, Vector.AngleBetween(direction, northDirection), 1e-3);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T14:28:02.157

您可以使用归一化向量来表示方向。这只是一个硬编码示例，但您可以轻松地使用来自游戏手柄拇指杆的输入。

```
Vector2 north = new Vector2(0, -1); 
```

然后在你的代码中像这样移动你的精灵（假设有一个位置向量）。

```
float speed = 100; // 100 pixels per second.
Vector2 direction = north;
position += direction * ((float)gameTime.ElapsedGameTime.TotalSeconds * speed); 
```

# spring - 使用 AOP 和 Log4J 实现日志记录

> ID：14564011
> 
> 赞同：0
> 
> 时间：2013-01-28T14:18:35.897
> 
> 标签：spring, configuration, log4j, aspectj

我尝试使用方面向使用 Java EE 和 Spring（核心 + mvc + 安全性...）开发的 Web 应用程序添加自动日志记录。依赖项由 maven 管理，应用程序服务器是 Glassfish 服务器。方面部分似乎工作，但日志文件没有得到我通过方面发送的日志。

我在 web.xml 中设置了日志记录配置，并添加了以下内容：

```
<listener id="myLogger">
    <listener-class>org.springframework.web.util.Log4jConfigListener</listener-class>
</listener> 
```

属性文件如下（它可以工作，因为日志文件在我的系统文件夹中创建得很好）：

```
# Root logger option
log4j.rootLogger=INFO, file
log4j.rootLogger=WARN, file
log4j.rootLogger=ERROR, file
# Direct log messages to a log file
log4j.appender.file=org.apache.log4j.RollingFileAppender
log4j.appender.file.File=C:\\Users\\chaese\\Documents\\Dev\\LogsMEANS\\logging.log
log4j.appender.file.MaxFileSize=1MB
log4j.appender.file.MaxBackupIndex=1
log4j.appender.file.layout=org.apache.log4j.PatternLayout
log4j.appender.file.layout.ConversionPattern=%d{ABSOLUTE} %5p %c{1}:%L - %m%n 
```

我还配置了一个方面（使用 AspectJ），以便在调用以“get”开头的函数时记录所有信息。这是这方面的课程：

```
import org.apache.log4j.Logger;
import org.aspectj.lang.annotation.Aspect;
import org.aspectj.lang.annotation.Before;

@Aspect
public class PropertyChangeTracker {

private Logger logger = Logger.getLogger(PropertyChangeTracker.getClass());

@Before("execution(String get*(..))")
public void trackCalls(){
    logger.info("controller called !!");
}
} 
```

aspect-config.xml 中的配置：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:aop="http://www.springframework.org/schema/aop" xmlns:p="http://www.springframework.org/schema/p"
xmlns:tx="http://www.springframework.org/schema/tx" xmlns:context="http://www.springframework.org/schema/context"
xsi:schemaLocation="http://www.springframework.org/schema/beans 
   http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
   http://www.springframework.org/schema/aop 
   http://www.springframework.org/schema/aop/spring-aop-3.1.xsd
   http://www.springframework.org/schema/context 
   http://www.springframework.org/schema/context/spring-context.xsd">

<bean id="propertyChangeTracker" class="services.aspects.PropertyChangeTracker">   </bean>

<aop:aspectj-autoproxy>
    <aop:include name="propertyChangeTracker"/>
</aop:aspectj-autoproxy>
</beans> 
```

我在调试模式下对此进行了测试，我的“trackCalls”方法被调用没有任何问题，但没有信息被记录到日志文件中。我感觉我的应用程序中有两个不同的记录器，而 PropertyChangeTracker 类使用的一个不是我想要的......你看到我在哪里设置了错误吗？

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T15:34:15.753

我不确定，但您的 log4j 配置看起来很可疑。尝试仅在 log4j.properties 中添加 log4j.rootLogger=INFO 文件。

# mysql - MySQL - 选择最大日期

> ID：14564016
> 
> 赞同：-1
> 
> 时间：2013-01-28T14:18:55.003
> 
> 标签：mysql

我在下面有一张表

```
id  Title datetime       Details
---|----- |------------|--------|---------
1  | AAA  | 28/03/2009 | AAAAA
2  | BBB  | 26/03/2009 | BBBBB
3  | CCC  | 27/03/2009 | CCCCC 
```

我只想显示 2 条最新日期的记录

记录需要显示如下

```
id  Title datetime       Details
---|----- |------------|--------|---------
1  | AAA  | 28/03/2009 | AAAAA
3  | CCC  | 27/03/2009 | CCCCC 
```

知道我该怎么做吗？请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T14:25:53.490

```
SELECT  a.*
FROM    tableName a
        INNER JOIN
        (
          SELECT DISTINCT dateTime
          FROM   tableName
          ORDER  BY STR_TO_DATE(datetime, '%d/%m/%Y')  DESC
          LIMIT  2
        ) b ON a.datetime = b.datetime 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/f053e/4)

为了获得更好的性能，请创建一个`INDEX`on 列`datetime`，如果可能，将日期的值修复为`yyyy/MM/dd`并将其数据类型更改为，`DATETIME`这样您就不会从字符串转换为日期，因为它可能会降低性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T14:40:53.897

您可以按 datetime desc 排序，然后使用 LIMIT。

如果`datetime`字段存储为日期（或日期时间）：

```
SELECT   yourtable.*
FROM     yourtable
ORDER BY yourtable.datetime desc
LIMIT    2 
```

如果`datetime`将其存储为 varchar，则可以按以下顺序订购：

```
ORDER BY STR_TO_DATE(datetime, '%d/%m/%Y') desc 
```

（如果最后日期的记录超过两条，这将只显示 2 行，我不确定这真的是你想要的）。

# android - Eclipse 导出的 apk 崩溃

> ID：14564019
> 
> 赞同：3
> 
> 时间：2013-01-28T14:19:04.627
> 
> 标签：android, eclipse, proguard

我需要发布我的应用程序，我运行了 Eclipse 导出向导并导出了带有自签名证书的签名 apk，我还运行了 zipalign 工具。问题是在设备上安装这个包并运行它时，它直接崩溃，虽然我可以直接从 eclipse 运行应用程序没有问题。这与proguard配置或其他任何东西有关吗？！

**更新：**问题来自proguard配置文件，这是异常的堆栈跟踪：

```
 01-28 17:49:03.510: E/AndroidRuntime(14897): FATAL EXCEPTION: main
    01-28 17:49:03.510: E/AndroidRuntime(14897): java.lang.ExceptionInInitializerError
    01-28 17:49:03.510: E/AndroidRuntime(14897):    at com.actionbarsherlock.app.SherlockActivity.c(Unknown Source)
    01-28 17:49:03.510: E/AndroidRuntime(14897):    at com.actionbarsherlock.app.SherlockActivity.onPostCreate(Unknown Source)
    01-28 17:49:03.510: E/AndroidRuntime(14897):    at android.app.Instrumentation.callActivityOnPostCreate(Instrumentation.java:1115)
    01-28 17:49:03.510: E/AndroidRuntime(14897):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1950)
    01-28 17:49:03.510: E/AndroidRuntime(14897):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1992)
    01-28 17:49:03.510: E/AndroidRuntime(14897):    at android.app.ActivityThread.access$600(ActivityThread.java:127)
    01-28 17:49:03.510: E/AndroidRuntime(14897):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1158)
    01-28 17:49:03.510: E/AndroidRuntime(14897):    at android.os.Handler.dispatchMessage(Handler.java:99)
    01-28 17:49:03.510: E/AndroidRuntime(14897):    at android.os.Looper.loop(Looper.java:137)
    01-28 17:49:03.510: E/AndroidRuntime(14897):    at android.app.ActivityThread.main(ActivityThread.java:4511)
    01-28 17:49:03.510: E/AndroidRuntime(14897):    at java.lang.reflect.Method.invokeNative(Native Method)
    01-28 17:49:03.510: E/AndroidRuntime(14897):    at java.lang.reflect.Method.invoke(Method.java:511)
    01-28 17:49:03.510: E/AndroidRuntime(14897):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
    01-28 17:49:03.510: E/AndroidRuntime(14897):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
    01-28 17:49:03.510: E/AndroidRuntime(14897):    at dalvik.system.NativeStart.main(Native Method)
    01-28 17:49:03.510: E/AndroidRuntime(14897): Caused by: java.lang.IllegalArgumentException: Class a is not annotated with @Implementation
    01-28 17:49:03.510: E/AndroidRuntime(14897):    at com.actionbarsherlock.a.a(Unknown Source)
    01-28 17:49:03.510: E/AndroidRuntime(14897):    at com.actionbarsherlock.a.<clinit>(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T14:29:36.930

有时 Eclipse 只是被窃听了。您可以做什么，通常会有所帮助：

1.  清理你的项目
2.  清除 Eclipse 工作台设置

如何准确地执行步骤 #2 取决于您的操作系统，但在 Mac 上是：

1.  前往您的工作区
2.  打开 .metadata（您需要能够看到隐藏文件夹）
3.  打开 .plugins
4.  打开 org.eclipse.e4.workbench
5.  删除 workbench.xmi

这将清除您的基本工作台设置，其中包括您的视图设置。

在重新进行工作台设置之前，尝试打包您的应用程序。通常对我有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T10:12:36.617

我通过将 -keep 添加到 actionbarsherlock 并支持库类和接口解决了这个问题

```
 -keep class android.support.v4.app.** { *; }
    -keep interface android.support.v4.app.** { *; }
    -keep class com.actionbarsherlock.** { *; }
    -keep interface com.actionbarsherlock.** { *; } 
```

并通过使用 -libraryjars 关键字添加相应的库 jar

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-21T14:31:20.490

使用来自[https://github.com/JakeWharton/ActionBarSherlock](https://github.com/JakeWharton/ActionBarSherlock)的最新版本在 ADT 21.x 上构建良好，没有任何问题

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-01T10:17:13.157

eclipse 偶尔会发生这种情况。我建议您在将其上传到应用商店之前，始终在真实设备上试用 apk 文件。

通过清理项目然后再次导出它可以解决问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-01-23T12:59:36.097

生成签名的 apk 时，必须排除任何外部 jar 文件和库，如下所示

```
-libraryjars libs

# The official support library.
-keep class android.support.v4.app.** { *; }
-keep interface android.support.v4.app.** { *; }

# Library JARs.
-keep class de.greenrobot.dao.** { *; }
-keep interface de.greenrobot.dao.** { *; }
-keep class org.joda.** { *; }
-keep interface org.joda.** { *; }
-keep class com.loopj.android.http.** { *; }
-keep interface com.loopj.android.http.** { *; }

# Library projects. 
-keep class com.actionbarsherlock.** { *; }
-keep interface com.actionbarsherlock.** { *; }
-keep class com.viewpagerindicator.** { *; }
-keep interface com.viewpagerindicator.** { *; } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-28T14:23:00.847

我相信eclipse会为你运行zipalign，所以你不需要自己做。也许尝试一下？

是的，从 eclipse 运行处于调试状态，proguard 被忽略。导出将是一个发布版本，如果在 project.properties 中配置了 proguard，它可能会生效。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-28T14:28:51.883

也许您错误地进行了 zipalign，我不相信 eclipse 会为您做到这一点。

正确的语法是

```
zipalign -v 4 /location/to/eclipse/exported/apk /location/of/where/to/output/aligned/apk 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-28T14:29:50.347

删除 proguard 优化。不要使用 zipalign。测试导出的包。如果它工作 - 很好，重新检查 zipalign/proguard 参数，如果没有 - 检查其他东西）

# autocomplete - YUI3 自动完成焦点事件调用

> ID：14564020
> 
> 赞同：0
> 
> 时间：2013-01-28T14:19:05.797
> 
> 标签：autocomplete, focus, yui3

我试图在 YUI3 自动完成控件上调用 focus()，但没有任何反应。

代码是：

```
var ac = new Y.AutoComplete({ inputNode: '#ac-input' });
ac.focus(); //doesn't do anything
ac.fire('focus'); //neither this
ac.simulate("focus"); //no success either, yes I did include 'node-event-simulate'
ac.invoke("focus"); //no success either 
```

用“点击”代替“焦点”，但什么也没有。

尝试使用focusmanager，但还没有成功。

如何聚焦自动完成的查询字段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T11:49:59.683

我认为 ac 不是您认为的节点。

尝试在输入节点上调用焦点方法。

```
var inputNode = Y.one('#ac-input'),
    ac = new Y.AutoComplete({ inputNode: inputNode });

inputNode.focus(); 
```

# url-rewriting - 从 joomla 中的 url 中删除菜单项名称/别名

> ID：14564030
> 
> 赞同：0
> 
> 时间：2013-01-28T14:19:40.477
> 
> 标签：url-rewriting, url-routing, joomla2.5, joomla-sef-urls, sef

我有一个菜单，当我单击一个菜单项时，我被重定向到项目内容。

所以我在**domain.com/menuitem**页面。在当前页面中，我有一些类别，当我单击一个类别时，我会被重定向到其内容。

所以我在**domain.com/menuitem/category**页面。当我在该页面上时，我不希望显示菜单项名称。我想要**domain.com/category**

我怎样才能通过不使用任何外部 sef 组件来实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T13:41:18.813

创建一个新的“类别页面”类型的 1 级菜单项，并将其命名为“类别”。

# asp.net-mvc-4 - 间歇性错误：“在控制器 '[x]' 上找不到公共操作方法 'index.php'

> ID：14564031
> 
> 赞同：0
> 
> 时间：2013-01-28T14:19:42.847
> 
> 标签：asp.net-mvc-4

我有一个 SecurityController.Login 方法，它是一个 HTTPGET。间歇性地，在我的 IIS 日志中，我看到一个 /Security/Login 请求紧随其后（通常在 2 毫秒内），紧接着是 3 个 /Security/index.php 请求。

大多数情况下，当有人来到我的站点登录时，我只看到第一个 /Security/Login 请求，这是正确的。但是，有时我会看到以下 3 个请求，这当然会导致错误：“在控制器'[x]'上找不到公共操作方法'index.php'。

任何想法如何请求这个“index.php”？index.php 没有被列为 IIS 中的默认文档，我们的应用程序中没有对 index.php 的请求实例，也没有任何名为 index.php 的视图或其他文档。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T14:34:15.493

```
Any ideas how this "index.php" is being requested? 
```

这可能是机器人、蜘蛛等。我正在使用`Elmah`，而且我经常可以找到很多带有`*.php`. 其中许多都有奇怪的标题，`user-agents`包含：Java、旧浏览器版本，有时是扫描站点的域名或检测 CMS。

# iphone - 如何在 iOS 视网膜和非视网膜的屏幕底部放置 admob 横幅

> ID：14564033
> 
> 赞同：6
> 
> 时间：2013-01-28T14:19:51.247
> 
> 标签：iphone, ios, objective-c, cordova

我已经构建了一个 phonegap 应用程序，并想向它添加一个 Admob 横幅。我的横幅在 iOS6 模拟器的屏幕底部工作，但是当我在视网膜设备上对其进行测试时，横幅将远离底部，就像它仍在尝试为非视网膜显示调整屏幕大小一样。这是我当前在 viewDidLoad 中的代码：

```
// Initialize the banner at the bottom of the screen.
CGPoint origin = CGPointMake(0.0,
                             self.view.frame.size.height -
                             CGSizeFromGADAdSize(kGADAdSizeBanner).height);

// Use predefined GADAdSize constants to define the GADBannerView.
bannerView_ = [[GADBannerView alloc] initWithAdSize:kGADAdSizeBanner
                                             origin:origin];

// Specify the ad's "unit identifier." This is your AdMob Publisher ID.
bannerView_.adUnitID = @"xxxxxxxxxxxx";

// Let the runtime know which UIViewController to restore after taking
// the user wherever the ad goes and add it to the view hierarchy.
bannerView_.rootViewController = self;
[self.view addSubview:bannerView_];

// Initiate a generic request to load it with an ad.
[bannerView_ loadRequest:[GADRequest request]]; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-30T08:25:03.253

你可以试试这个

```
bannerView_ = [[GADBannerView alloc] initWithFrame:CGRectMake(0.0, self.view.frame.size.height-GAD_SIZE_320x50.height, GAD_SIZE_320x50.width, GAD_SIZE_320x50.height)]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-28T15:59:53.620

我通过将上面的代码从 移动到 解决了这个`viewDidLoad`问题`webViewDidFinishLoad`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-27T18:52:37.147

我使用此代码计算 NavigationBar 和状态栏：

```
CGPoint origin = CGPointMake(0.0,
                             self.view.frame.size.height -
                             CGSizeFromGADAdSize(kGADAdSizeBanner).height -
                             self.navigationController.navigationBar.frame.size.height -
                             20 /* status bar */); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-12T03:09:35.273

我没有测试你的代码，所以它可能已经在工作了，但是使用非原点初始化并在之后重置原点似乎有效：

```
bannerView_ = [[GADBannerView alloc] initWithAdSize:kGADAdSizeBanner];

// Omitted: set up ad id, etc

CGRect frame = bannerView_.frame;
frame.origin.y = self.view.frame.size.height - frame.size.height;
bannerView_.frame = frame;

[self.view addSubview:bannerView_]; 
```

# git - 从无到有创建 git diff

> ID：14564034
> 
> 赞同：14
> 
> 时间：2013-01-28T14:19:55.437
> 
> 标签：git, diff, patch, review-board

我正在尝试创建一个要通过[reviewboard](http://www.reviewboard.org)使用的补丁文件。
这将是最初的补丁。

`diff -ruN --exclude=.git empty_dir working_dir > mypatch_00.patch`有效，但我收到“所选文件似乎不是差异”。错误。

有没有办法使用 git-diff 或 diff 让它工作？谢谢

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-31T10:23:06.510

如果您想获得初始提交的差异（也许我误解了您的问题），您可以使用

```
git show COMMIT 
```

或者将其作为文件获取：

```
git format-patch -1 COMMIT 
```

`COMMIT`此提交的修订版在哪里。如果这也是您当前的提交，则您根本不必指定它。

但是，如果您的提交不是初始提交并且您想获得历史的完整差异，则需要先创建空分支：

```
git checkout --orphan empty         # Create orphaned branch
git read-tree --empty               # Remove all files from index
git commit --allow-empty -m 'Empty' # Initial commit 
```

现在您可以对空分支进行完全差异：

```
git diff empty..master 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2014-07-31T16:28:34.623

如果您想要从无到特定提交的完整差异，则有一种比接受的答案更简单的方法：

```
empty_tree=$(git hash-object -t tree /dev/null) 
git diff-tree -p ${empty_tree} $MY_COMMIT [${files}...] 
```

的值`${empty_tree}`总是`4b825dc642cb6eb9a060e54bf8d69288fbee4904`，但我不喜欢在那里有幻数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-01T13:59:26.863

我更喜欢“空”作为标签。最简单的方法是：

```
git tag empty $(git hash-object -t tree /dev/null) 
```

因为标签可以直接指向树形，无需提交。现在获取工作树中的所有文件：

```
git diff --name-only empty 
```

或与 stat 相同：

```
git diff --stat empty 
```

所有文件作为差异：

```
git diff empty 
```

检查所有文件中的空格：

```
git diff --check empty 
```

# combobox - extjs 组合框在存储加载后不更新

> ID：14564035
> 
> 赞同：0
> 
> 时间：2013-01-28T14:20:01.507
> 
> 标签：combobox, extjs4, store

在我的 MVC 应用程序中，我有一个这样定义的控制器：

```
Ext.define('NE.controller.MyController', {
    extend: 'Ext.app.Controller',
    stores : [...'StoreAgents'..],

    views: [ ...'MyView'...], // * alias w_view

    init: function() {
        this.control({
            'w_view': {
                render: function() { this.getStore('StoreAgents').load(); }
            }
        });
    }
}); 
```

在 MyView 视图中，我定义了一个组合框，如下所示：

```
{
    xtype: 'combobox',
    name : 'id_agent',
    forceSelection: true,
    fieldLabel: 'Agent',
    store: 'StoreAgents',
    queryMode: 'local',
    displayField: 'name',
    valueField: 'id'
} 
```

我希望每次呈现视图时都会更新组合框列表，我错了吗？目前，组合框仍然没有任何选项，即使我（通过萤火虫）看到应用程序触发了正确返回所有代理数据的请求。

此外，我注意到，每当我浏览由另一个控制器管理的另一个视图时，该控制器又声明另一个 StoreAgent 并调用其 load() 方法。好吧，如果我回来，现在我看到组合框已填充。

我错过了什么？谢谢

**编辑：** 我注意到商店是`{buffered: true}`. 如果我将其切换为 false，则商店会触发“datachange”事件；否则它不会。所以现在的问题是：为什么如果启用缓冲，load() 不会触发“datachange”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T14:26:05.073

这可能是由于过滤掉的情况。如果组合框在存储加载之前填充了一个值，则将在存储上放置一个过滤器，在它们存在之前过滤掉所有值，然后在添加新记录时它们也不会显示。尝试这个。

```
init: function() {
        this.control({
            'w_view': {
                render: function() { this.getStore('StoreAgents').load(); 
                this.getStore('StoreAgents').clearFilter();}
            }
        });
    } 
```

# php - 非顺序分页 PHP

> ID：14564037
> 
> 赞同：1
> 
> 时间：2013-01-28T14:20:05.310
> 
> 标签：php, html, mysql, navigation, pagination

我目前正在尝试在 PHP 中设置某种分页，但运气不佳。我发现的所有教程都是按 ID 完成的顺序教程，因此 +1 或 -1 但在我的情况下不起作用。

我正在尝试显示链接到客户的不同送货地址。到目前为止，我已经连接到 MySQL，运行查询以获取我需要的信息并将其放入一个数组中，这个数组现在存储一个 ID 和一个客户 ID。每个 ID 都不同，因为它们是在不同时间添加的。例如，同一个客户 ID 中的一个是 379，也是 707，所以我不能只是 +1。

我希望这些细节能有所帮助.. 有没有办法设置它，所以生成的链接只有那些 ID？因此，如果用户选择客户 ID 14，那么他们只能看到链接到 14 的收货地址，可能是收货地址 300 和 500？

非常感谢你读到这里，我不知道，我几乎把我所有的头发都拔掉了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T14:29:40.613

好的，因此您将获取客户地址的 ID，并将该数字作为索引值放入数组中。

您希望通过数组进行交互，但由于数字的原因，您无法迭代 + 1。

`foreach()`在阵列上使用。例如

```
foreach ($array as $key=>$value) {
    echo "$key : $value <br />";
} 
```

`$key`将是您设置的地址的 ID。您可以对其进行操作以仅创建指向这些地址的链接。我希望我已经理解你的要求。

# list - 来自变量文件的 Robotframework 列表变量

> ID：14564042
> 
> 赞同：1
> 
> 时间：2013-01-28T14:20:18.777
> 
> 标签：list, variables, file-upload, robotframework

我在从文件中读取列表变量时遇到问题。我有一个包含 3 个变量的文件（variables.py）：

```
TEST1=212
TEST2=[111, 222, 333, 444, 555, 666]
TESTS3="sadasd" 
```

两者`${TEST1}`和`${TEST3}`都可以访问（我从变量文件中获取值）但是当我尝试使用 访问第二个变量时`@{TEST2}[2]`，我得到一个错误：

```
FAIL : Non-existing variable '@{TEST2}[2]' 
```

仅当我尝试使用文件中的变量时才会发生这种情况。如果我在 RIDE 中创建列表变量，我可以轻松访问它`@{Variable}[{$index}]`

如果我尝试这种语法 : `${TEST2}[2]`，我会得到：

```
'[111, 222, 333, 444, 555, 666][2]' 
```

所以robotframework 知道有一个给定名称的变量，但不知道它是一个列表变量。难道我做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T15:03:47.753

要明确区分作为标量变量值的列表和列表变量，您必须`LIST__`在变量文件中为 @{vars} 使用前缀。有关详细信息，请参阅[Robot Framework 用户指南：直接创建变量](http://robotframework.org/robotframework/latest/RobotFrameworkUserGuide.html#creating-variables-directly) 。

在您的情况下，这将是：

```
LIST__TEST2 = [111, 222, 333, 444, 555, 666] 
```

一般来说，有三种方法可以初始化[变量文件](http://robotframework.org/robotframework/latest/RobotFrameworkUserGuide.html#variable-files)中的列表：

```
STRINGS = ["one", "two", "three", "four"]
LIST__STRINGS = ["one", "two", "three", "four"] 
```

不要将此与该`*** Variables ***`部分的语法混淆，其中初始化列表将是：

```
*** Variables ***
@{STRINGS}     | one | two | three | four 
```

您可以访问分配给标量变量的列表中的各个元素，如下所示：

```
${TEST2[0]} 
```

# mysql - 奇怪的查询结果

> ID：14564043
> 
> 赞同：0
> 
> 时间：2013-01-28T14:20:20.023
> 
> 标签：mysql

我得到了下表：

![在此处输入图像描述](../Images/e1a4b91df08c88c6b511b5db10153c74.png)

我需要从我的数据库中获取每个用户、每个日期的最早时间。所以我有以下查询：

```
SELECT * FROM `taskdate_user` WHERE `taskdate_time` IN
(
    SELECT min(`taskdate_time`)
    FROM `taskdate_user`
    WHERE `taskdate_time` BETWEEN '2013-01-21' AND '2013-01-28'
    GROUP BY  date_format(taskdate_time, "%Y-%m-%d"), user_id
)
ORDER BY `taskdate_time` ASC 
```

结果是：

![在此处输入图像描述](../Images/5fe866559d38aa3430f6d2b5a4ece3d5.png)

为什么它返回双'2013-01-21'？它与其他日期相得益彰。

我正在使用的数据库是：

> MySQL 版本：5.1.66-0ubuntu0.10.04.3 通过 PHP 扩展 MySQLi

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T14:23:38.797

您还按 user_id 分组，因此，您有 2 个该日期的条目

# gwt - 获取 URL/浏览器栏的 x/y 位置

> ID：14564044
> 
> 赞同：0
> 
> 时间：2013-01-28T14:20:20.303
> 
> 标签：gwt, gwt-ext

我有一个 GWT 小部件，它是一个窗口。用户可以拖放窗口。我正在使用一个名为 GWT-Ext 的旧 API。它有能力实现一个监听器来检测窗口何时被移动。我想通过检测窗口的 XY 坐标并在窗口“越界”时将窗口放回原始位置来防止窗口隐藏在浏览器栏下。如何确定浏览器栏的 XY 坐标，以便知道我的窗口是否被浏览器栏遮挡？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T16:23:30.833

浏览器*栏*始终位于 0。但您必须考虑文档的滚动位置，因此实际上它位于`Document.get().getScrollTop()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T13:15:10.257

我确定浏览器栏位于 0。所以我检查我的 Y 位置是否小于 0，然后调用`.setPagePosition`.

```
this.addListener(new PanelListenerAdapter()
{
   @Override
   public void onMove(BoxComponent component, int x, int y)
   {
      // prevent user from accidentally dragging window under browser bar
      if (y <= 0)
      {
         component.setPagePosition(DEFAULT_X_POS, DEFAULT_Y_POS);
      }
   }            
}); 
```

# windows - 评估 wp7/wp8 中的字符串

> ID：14564053
> 
> 赞同：0
> 
> 时间：2013-01-28T14:20:43.423
> 
> 标签：windows, string, xaml, sdk, eval

我目前正在 wp8 sdk 中做我的第一个应用程序并且遇到了一个问题。我想要做的是当用户单击超链接按钮时，它会评估绑定的文本框（作者）并将其作为搜索字符串发送给谷歌。

" [http://www.google.com/search?q=](http://www.google.com/search?q=) "

现在我尝试使用 asp.net 中可用的 Eval 方法；但它没有用。我也试图找到它的替代品，但也没有太多运气。

所以我的问题是。有没有办法向谷歌发送搜索字符串，评估字符串？

顺便提一下，所有这些都在 windows phone 8 sdk 中。并且在数据模板中。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T18:27:52.060

设置`NavigateUri`和应该导航`Target`到`HyperlinkButton`网站。要构建`NavigateUri`包含用户输入的内容，您可以在已绑定的属性旁边添加一个额外的字符串属性`Author`（无论它位于何处），然后只公开根“ [http://www.google.com/search?q=”+](http://www.google.com/search?q=)`Author`。一旦您将其绑定到`NavigateUri`（并同时获得属性更改通知`Author`），该按钮应启动，其中包含用户输入的文本。

# php - 奇怪的 php 数组语法错误

> ID：14564054
> 
> 赞同：0
> 
> 时间：2013-01-28T14:20:44.517
> 
> 标签：php

我有：在我的 pc:wamp 服务器（apache+php-5.4.3+mysql）上，在我的 vps:nginx+php5-fpm+mysql（所有最新的 ubuntu 64 位服务器存储库中）。

最近我重新安装了整个vps

我的问题是

像这样的声明：

```
function foo($arr){

return $arr;

}

foo(['foo1','foo2','foo3']) 
```

在我的电脑上工作，并且曾经在服务器上工作（相同的安装），但现在它给出了一个错误，例如：

```
Parse error: syntax error, unexpected '[' in /home/Websites/Domains/squazza/php/db.php 
on line 261 
```

（用 Array( ) 替换 [ ] 确实可以解决问题）

现在我假设这个问题与 php.ini 有关，所以我想问什么设置可能会影响这种行为，为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T14:23:26.643

如果您查看短语法仅在 php 5.4+ 中可用的[文档，我怀疑您的 php 版本不同。](http://php.net/manual/en/language.types.array.php)

PHP5.4中的新特性[列表](http://php.net/manual/en/migration54.new-features.php)可能对您有些用处。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T14:24:10.000

您可能没有使用 PHP 5.4。`phpinfo()`在您的脚本中运行并检查它。请记住，您可以在 CLI 模式下拥有不同的 PHP 版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T18:48:46.327

正如@piddl0r 所指出的，短数组语法 ( `[ 1, 2, 3 ]`) 是在 PHP 5.4 中添加的。您会从[Ubuntu 软件包存档](http://packages.ubuntu.com/)中注意到[Ubuntu 12.04 - Precise Pangolin - 仅提供 PHP 5.3.10](http://packages.ubuntu.com/search?suite=precise&keywords=php5)；[PHP 5.4.6 在下一个版本 Quantal 中提供](http://packages.ubuntu.com/search?suite=quantal&keywords=php5)。要检查您的 PHP 版本，请在命令行上使用`phpinfo()`或。`php --version`

# c++ - OpenCV：iOS中的k-means聚类

> ID：14564055
> 
> 赞同：3
> 
> 时间：2013-01-28T14:20:50.350
> 
> 标签：c++, objective-c, opencv, uiimage, k-means

现在我正在尝试在 iOS 中进行 k-means 聚类。为了做 k-means，我从 UIImage 转换为 cv::Mat 并将函数用于集群 cv::Mat。该功能无法正常工作。结果看起来几乎不错，但右侧的 cols 变黑了。我阅读了 openCV 参考资料，但我不知道出了什么问题。代码如下。如果有人帮助我，那将非常感激。原谅我的英语不好...

```
- (UIImage *)UIImageFromCVMat:(cv::Mat)cvMat
{
NSData *data = [NSData dataWithBytes:cvMat.data length:cvMat.elemSize()*cvMat.total()];
CGColorSpaceRef colorSpace;

if (cvMat.elemSize() == 1) {
    colorSpace = CGColorSpaceCreateDeviceGray();
} else {
    colorSpace = CGColorSpaceCreateDeviceRGB();
}

CGDataProviderRef provider = CGDataProviderCreateWithCFData((__bridge CFDataRef)data);

// Creating CGImage from cv::Mat
CGImageRef imageRef = CGImageCreate(
    cvMat.cols,                                 //width
    cvMat.rows,                                 //height
    8,                                          //bits per component
    8 * cvMat.elemSize(),                       //bits per pixel
    cvMat.step[0],                              //bytesPerRow
    colorSpace,                                 //colorspace
    kCGImageAlphaNone|kCGBitmapByteOrderDefault,// bitmap info
    provider,                                   //CGDataProviderRef
    NULL,                                       //decode
    false,                                      //should interpolate
    kCGRenderingIntentDefault                   //intent
);

// Getting UIImage from CGImage
UIImage *finalImage = [UIImage imageWithCGImage:imageRef];
CGImageRelease(imageRef);
CGDataProviderRelease(provider);
CGColorSpaceRelease(colorSpace);

return finalImage;
}

- (cv::Mat)cvMatFromUIImage:(UIImage *)image
{
CGColorSpaceRef colorSpace = CGImageGetColorSpace(image.CGImage);
CGFloat cols = image.size.width;
CGFloat rows = image.size.height;

cv::Mat cvMat(rows, cols, CV_8UC4); // 8 bits per component, 4 channels

CGContextRef contextRef = CGBitmapContextCreate(
cvMat.data,                 // Pointer to  data
cols,                       // Width of bitmap
rows,                       // Height of bitmap
8,                          // Bits per component
cvMat.step[0],              // Bytes per row
colorSpace,                 // Colorspace
kCGImageAlphaNoneSkipLast |
kCGBitmapByteOrderDefault); // Bitmap info flags

CGContextDrawImage(contextRef, CGRectMake(0, 0, cols, rows), image.CGImage);
CGContextRelease(contextRef);
CGColorSpaceRelease(colorSpace);

return cvMat;
}

- (cv::Mat)kMeansClustering:(cv::Mat)input
{
cv::Mat samples(input.rows * input.cols, 3, CV_32F);

for( int y = 0; y < input.rows; y++ ){
    for( int x = 0; x < input.cols; x++ ){
        for( int z = 0; z < 3; z++){
            samples.at<float>(y + x*input.rows, z) = input.at<cv::Vec3b>(y,x)[z];
        }
    }
}

int clusterCount = 20;
cv::Mat labels;
int attempts = 5;
cv::Mat centers;
kmeans(samples, clusterCount, labels, cv::TermCriteria(CV_TERMCRIT_ITER|CV_TERMCRIT_EPS, 100, 0.01), attempts, cv::KMEANS_PP_CENTERS, centers );

cv::Mat new_image( input.rows, input.cols, input.type());

for( int y = 0; y < input.rows; y++ ){
    for( int x = 0; x < input.cols; x++ )
    {
        int cluster_idx = labels.at<int>(y + x*input.rows,0);
        new_image.at<cv::Vec3b>(y,x)[0] = centers.at<float>(cluster_idx, 0);
        new_image.at<cv::Vec3b>(y,x)[1] = centers.at<float>(cluster_idx, 1);
        new_image.at<cv::Vec3b>(y,x)[2] = centers.at<float>(cluster_idx, 2);
    }
}

return new_image;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T16:45:10.147

您正在提供`kMeansClustering`一个四通道图像，它需要 3 个通道。尝试丢失 Alpha 通道。

在函数顶部添加：

```
cv::cvtColor(input , input , CV_RGBA2RGB); 
```

所以它看起来像这样：

```
- (cv::Mat)kMeansClustering:(cv::Mat)input
{
    cv::cvtColor(input , input , CV_RGBA2RGB);
    cv::Mat samples(input.rows * input.cols, 3, CV_32F); 
```

# javascript - 在jqgrid中使用XML设置复选框

> ID：14564056
> 
> 赞同：0
> 
> 时间：2013-01-28T14:20:53.063
> 
> 标签：javascript, jquery, jqgrid, checkbox

我有一个正在加载 XML 数据的网格。XML 的参数之一是真/假值，我想使用该值来选择预先选择的行（多选：真）。

举个例子：

```
<rows>
<row><data>338</data><host>foo</host><sent>true</sent></row>
<row><data>485</data><host>bar</host><sent>false</sent></row>
</rows> 
```

我所指的复选框列是内置列，当多选为真时添加为第一列。我没有转储它并使用自定义复选框列的唯一原因是有许多其他例程作用于该列，所以我想尽可能保留它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T15:09:02.933

jqGrid 列设置：

```
{ name: 'checked', index: 'checked', 
 editable:true, edittype:'checkbox', editoptions: { value:"True:False"}, 
 formatter: "checkbox", formatoptions: {disabled : false}} 
```

本地数据示例：

```
var data = [
    {id:"66", thingy:"Lemiux", blank:"", number:"66", status:"Retired", checked:"Yes"},
    {id:"99", thingy:"Gretzky", blank:"", number:"66", status:"Retired", checked:"No"}
]; 
```

jsfiddle 上的工作示例：http: [//jsfiddle.net/dumbguy5689/9ueDL/](http://jsfiddle.net/dumbguy5689/9ueDL/)

编辑：要处理多选，请使用此链接上的代码，然后只需测试您在包含天气的行中传递的值，该行是否应该被选中。 [jqGrid 设置选定的行](https://stackoverflow.com/questions/8310339/jqgrid-set-selected-rows)

# c# - 动态添加验证引擎 jquery 的语言支持文件

> ID：14564058
> 
> 赞同：0
> 
> 时间：2013-01-28T14:20:53.173
> 
> 标签：c#, javascript, asp.net, jquery-validation-engine

我在 ASP.NET 应用程序中使用验证引擎 jquery 进行验证。我想从后面的代码或使用java脚本动态添加语言支持文件。我尝试了以下方法：

在母版页中：

```
<script type="text/javascript">
    $(document).ready(function(){
       loadjscssfile("Scripts/jquery.validationEngine-en.js");
    });

    function loadjscssfile(filename) {
            var fileref = document.createElement('script');
            fileref.setAttribute("type", "text/javascript");
            fileref.setAttribute("src", filename);

            if (typeof fileref != "undefined")
                document.getElementsByTagName("head")[0].appendChild(fileref);
        }
</script> 
```

在子页面中：

```
<script type="text/javascript">
    $(document).ready(function(){
       $(formid).validationEngine('attach');
    });
</script> 
```

语言文件是动态加载的，但仅当在 loadjssssfile() 语句之后编写 alert() 语句时，它才会附加到 validationEngine jquery。如果注释了 alert() 语句，则会给出错误“请添加验证引擎语言规则”。

# php - PHP 数组 - 获取多维值

> ID：14564059
> 
> 赞同：-2
> 
> 时间：2013-01-28T14:20:55.920
> 
> 标签：php, arrays, multidimensional-array

我有以下数组数据：

```
array(1) { 
    [0]=> array(8) { 
      [0]=> string(2) "55" 
      [1]=> string(1) "2" 
      [2]=> string(1) "1" 
      [3]=> string(1) "3"  
      [4]=> string(1) "4" 
      [5]=> string(1) "5" 
      [6]=> string(1) "6" 
      [7]=> string(1) "7" 
      } 
    } 
```

我希望能够单独恢复这些值，`[1]`例如`[2]`，谁的值分别是 2 和 1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T14:24:07.743

$matches[0][1] - 不敢相信我真的问了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T14:24:36.817

在多维数组中，您需要引用嵌套数组，然后是嵌套数组元素。

例如，如果您的数组设置在 $array 中，您可以将其引用为：

`$array[0][1];`

这基本上是说“第一个嵌套数组的第二个元素的值”。

# json - Richfaces 对 javascript JSON 做了什么？

> ID：14564062
> 
> 赞同：0
> 
> 时间：2013-01-28T14:21:05.747
> 
> 标签：json, richfaces

我想使用 JSON.stringify() 将我的 JS 对象转换为 json 字符串。但是当我在网页中使用richfaces 组件时，我得到了错误的结果。请参见下面的示例。请帮我。谢谢！这是代码：

```
function testJSON()
{
var selArray = new Array();
selArray.push("aaa");
selArray.push("bbb");
selArray.push("ccc");
alert(JSON.stringify(selArray));
} 
```

如果页面中没有richfaces 组件，我会得到这个。

```
["aaa","bbb","ccc"] 
```

如果页面中有任何richfaces组件，如“rich:modalpanel”，它会得到以下错误的JSON字符串。

```
"[\"aaa\",\"bbb\",\"ccc\"]" 
```

我认为那是因为richfaces 做了一些影响JSON 的歌曲。

那么我该怎么做才能避免richfaces的影响呢？

非常感谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-14T14:52:53.210

也许你遇到了这个问题，因为 Richfaces 使用 Prototype: [JSON.stringify() array bizarreness with Prototype.js](https://stackoverflow.com/q/710586/132374)

我能够通过以下答案之一解决问题：[https ://stackoverflow.com/a/6611126/132374](https://stackoverflow.com/a/6611126/132374)

# linux - 与共享对象链接时未定义的引用

> ID：14564063
> 
> 赞同：1
> 
> 时间：2013-01-28T14:21:09.023
> 
> 标签：linux, gcc, shared-libraries, undefined-reference

我是一个愚蠢的新手。

我有一个名为 file.c 的文件，其中包含 my_putstr(char *) 和 my_strlen(char *) 函数

my_putstr() 用 write() (unistd.h) 写入参数

我想从 file.c 创建一个库，所以我做了：

```
gcc -fPIC -c file.c
gcc -shared -o libfile.so file.o 
```

然后我创建了一个 main.c 文件并从中调用 my_putstr() 。我试图编译和链接我的 .so

```
gcc -L. -lfile main.c -o test 
```

但我得到了对 my_putstr() 的未定义引用

我试图在其中创建一个带有 my_putstr() 和 my_strlen() 的 .h，并将其包含在 main 中，但我遇到了同样的错误。

很抱歉提出愚蠢的问题。

假期。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T07:18:44.830

您的问题缺乏信息，但我可以建议您首先尝试

```
gcc main.c ./libfile.so -Wl,-rpath . -o test 
```

如果这会失败，那么您的来源有问题。如果此时一切正常，请尝试

```
gcc main.c -L . -lfile -Wl,-rpath . -o test 
```

如果这将输出未定义的引用，那么您的 lib 路径中可能已经有类似 libfile.a 的内容，而没有 my_putstr（可能来自以前的实验）。

如果一切正常，那么您的链接器对提供给命令字符串的库的顺序是明智的，并且您必须记住，库总是在使用该库的对象之后。

# c# - 在 Android 中读取 mdb 文件？使用 Web 服务或 xml

> ID：14564064
> 
> 赞同：0
> 
> 时间：2013-01-28T14:21:15.390
> 
> 标签：c#, php, android, asp.net, mobile

我想制作一个需要访问数据库（MS Access *.mdb 文件）的 android 应用程序，因为他们的 Current Application 在 ASP 和 MDB 中，

我想在 Android 的这个 MDB 文件中的表中读取数据

请告诉我要使用的技术？

我需要使用什么？

可能吗 ？像 MDB 到 XML，然后从 Android 访问 XML 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T15:08:37.013

您的标签包括 ASP.NET 和 PHP。这是一个很好的调用——一个明智的策略是围绕数据库构建一个 Web 服务，并从 Android 端调用它。服务和 Android 客户端之间的交换格式由您决定 - 可以是 XML、JSON 或逗号分隔值，我只关心。

你到底被什么难住了——Android部分还是服务部分？后者几乎可以在任何服务器端脚本技术中使用 - 使用您更熟悉的一种，以及对您的服务器环境更友好的一种（这意味着 - ASP.NET 如果它是 Windows 机器，PHP 如果它是*没有一个）。在 Android 方面，有很好的旧 HttpClient 类，以及相应的格式解析器（`String.split`据记录，这是一个非常高效的 :)）。

哪种技术-您更熟悉的技术（或有精通它的人）。可以做到吗？当然可以。SO 社区会为您做这件事吗？可能不会，这不是我们来这里的目的。

不过，我不建议*将*数据库转换为 XML。关系数据最好保存在关系数据库中，而 Access 并不是最糟糕的。然而，使用 XML 作为您的有线格式是非常好的。

# javascript - 两个数值之间的正则表达式

> ID：14564069
> 
> 赞同：1
> 
> 时间：2013-01-28T14:21:32.330
> 
> 标签：javascript, regex

> **可能重复：**
> [如何匹配小于或等于 100 的数字？](https://stackoverflow.com/questions/11011674/how-to-match-a-number-which-is-less-than-or-equal-to-100)

我需要这两个值之间的正则表达式 1000 <= x <= 500000 我正在尝试使用我构建但似乎不起作用的这个

```
/(1[8-9]|[8-9]|[8-9]|5[0-9]|[0-9]|[0-9]|[0-9]|[0-9])/ 
```

有任何想法吗？提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T14:29:59.900

是否有特殊原因您不只是将数字测试*为数字*？

```
var yourNum = parseInt(yourString, 10); // use parseFloat if it has decimals
if (yourNum >= 1000 && yourNum <= 500000) {
    // success
} else 
    // fail
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-28T14:23:54.510

```
\b([1-9][0-9]{3,4}|[1-4][0-9]{5}|500000)\b 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T14:25:34.960

匹配案例 1000-9999、10000-99999、100000-499999 或 500000：

```
([1-9]\d{3}|[1-9]\d{4}|[1-4]\d{5}|500000) 
```

或者先将两者结合起来：

```
([1-9]\d{3,4}|[1-4]\d{5}|500000) 
```

# asp.net-web-api - 如何从 WEB API 检索消息？

> ID：14564074
> 
> 赞同：18
> 
> 时间：2013-01-28T14:21:59.623
> 
> 标签：asp.net-web-api, consumer

我创建了一些 web api，当发生错误时，api 返回使用 CreateErrorResponse 消息创建的 HttpResponseMessage。像这样的东西：

```
return Request.CreateErrorResponse(
              HttpStatusCode.NotFound, "Failed to find customer."); 
```

我的问题是我无法弄清楚如何在消费者应用程序中检索消息（在本例中为“*未能找到客户。 ”）。*

这是消费者的示例：

```
private static void GetCustomer()
{
    var client = new HttpClient();
    client.DefaultRequestHeaders.Accept.Add(
                new MediaTypeWithQualityHeaderValue("application/json"));
    string data =
        "{\"LastName\": \"Test\", \"FirstName\": \"Test\"";

    var content = new StringContent(data, Encoding.UTF8, "application/json");

    var httpResponseMessage = 
                 client.PostAsync(
                    new Uri("http://localhost:55202/api/Customer/Find"),
                    content).Result;
    if (httpResponseMessage.IsSuccessStatusCode)
    {
        var cust = httpResponseMessage.Content.
                  ReadAsAsync<IEnumerable<CustomerMobil>>().Result;
    }
} 
```

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-01-31T15:41:14.843

确保您正确设置了接受和/或内容类型（解析请求内容时出现 500 错误的可能来源）：

```
client.DefaultRequestHeaders.Accept.Add(new MediaTypeWithQualityHeaderValue("application/json"));

content.Headers.ContentType = new MediaTypeWithQualityHeaderValue("application/json"); 
```

然后你可以这样做：

```
var errorMessage = response.Content.ReadAsStringAsync().Result; 
```

当然，这一切都在客户端。WebApi 应该根据接受和/或内容类型适当地处理内容的格式。好奇，你也许还可以`throw new HttpResponseException("Failed to find customer.", HttpStatusCode.NotFound);`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-28T14:48:43.937

获取消息的一种方法是：

```
((ObjectContent)httpResponseMessage.Content).Value 
```

这将为您提供一个字典，其中还包含`Message`.

**更新**

参考官方页面：

[http://msdn.microsoft.com/en-us/library/jj127065(v=vs.108).aspx](http://msdn.microsoft.com/en-us/library/jj127065(v=vs.108).aspx)

您必须改变读取成功响应和错误响应的方式，因为其中一个显然是 StreamContent，另一个应该是 ObjectContent。

更新 2

你试过这样做吗？

```
if (httpResponseMessage.IsSuccessStatusCode)
    {
        var cust = httpResponseMessage.Content.
                  ReadAsAsync<IEnumerable<CustomerMobil>>().Result;
    }
else
{
   var content = httpResponseMessage.Content as ObjectContent;

   if (content != null)
    {
       // do something with the content
       var error = content.Value;
    }
   else
   {
      Console.WriteLine("content was of type ", (httpResponseMessage.Content).GetType());
   }

} 
```

**最终更新（希望...）**

好的，现在我明白了 - 只需尝试这样做：

`httpResponseMessage.Content.ReadAsAsync<HttpError>().Result;`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-24T19:03:32.310

这是一个从错误响应中获取消息的选项，可避免进行某种`...Async().Result()`类型的调用。

```
((HttpError)((ObjectContent<HttpError>)response.Content).Value).Message 
```

不过，您应该首先确保它`response.Content`是类型`ObjectContent<HttpError>`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-28T15:07:49.570

它应该在 HttpResponseMessage.ReasonPhrase 中。如果这听起来有点奇怪的名字，那只是因为它在 HTTP 规范[http://www.w3.org/Protocols/rfc2616/rfc2616-sec6.html中是这样命名的](http://www.w3.org/Protocols/rfc2616/rfc2616-sec6.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-28T07:52:42.667

好的，这很有趣，但是使用 QuickWatch 我想出了这个优雅的解决方案：

（新 System.Collections.Generic.Mscorlib_DictionaryDebugView(((System.Web.Http.HttpError)(((System.Net.Http.ObjectContent)(httpResponseMessage.Content)).Value)))).Items[0].Value

这是超级可读的！

# ios - 仅重新加载自定义 UITableViewCell 的子视图

> ID：14564077
> 
> 赞同：1
> 
> 时间：2013-01-28T14:22:20.053
> 
> 标签：ios, ios5, uitableview

我目前正在为 iOS 5 及更高版本开发一个应用程序，其中使用**AVQueuePlayer**的实例在**自定义 UITableViewCell**内播放视频。

 ***有“n”个这样的自定义单元格播放“n”个视频。*

我想实现一个功能，在给定时间后**禁用**播放器播放视频。

我有一个倒数计时器，它显示**UILabel**中剩余的时间，用于禁用 AVQueuePlayer 实例下的播放器。

我必须在一分钟后更新计时器（假设）以显示禁用发生的剩余时间。例如*“还剩 5 分钟”*。

我为此目的使用**NSTimer 。**但是，我不知道如何*只重新加载*或*更新*自定义 UITableViewCell的**UILabel**实例。我在一些线程中看到使用以下方法

```
- (void)reloadRowsAtIndexPaths:(NSArray *)indexPaths withRowAnimation:(UITableViewRowAnimation)animation 
```

但是，如果我在播放视频时这样做，它会停止并再次重新加载。

这个问题有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T14:37:47.397

您可以在创建单元格时保存对单元格的引用（听起来您只制作每种单元格类型中的一种，即使您有一个表格视图）；或从表格中取出单元格并将标签拉出。

我很想设置标签的标签，然后用它来取回标签。

当您创建标签（或在 interface-builder 中设置）调用时`[myLabel setTag:LABEL_TAG];`

然后你可以：

```
UITableViewCell * myCell = self.myTableView cellForRowAtIndexPath:LABLE_CELL_POSITION];
UILabel * myLabel = [cell viewWithTag:LABEL_TAG];
myLabel.setText:@"my new value"; 
```

上面`LABLE_CELL_POSITION`是表格视图中单元格的位置（0到...）；并且`LABEL_TAG`是您想用来表示该视图的任何数字，也许是`1234`。**

# javascript - Respond.js 不能跨域工作

> ID：14564079
> 
> 赞同：6
> 
> 时间：2013-01-28T14:22:21.587
> 
> 标签：javascript, internet-explorer-8, cross-domain, media-queries, respond.js

我无法让[Respond 的 CDN/X 域设置](https://github.com/scottjehl/Respond#cdnx-domain-setup)正常工作。

我开始从 CDN 提供所有资产：

```
<link rel="stylesheet" href="http://cdn.example.com/css/main.css?2013012401">
<script src="http://cdn.example.com/js/modernizr-2.6.2.min.js?2013012401"></script>
<script src="http://cdn.example.com/js/respond.min.js?2013012401"></script> 
```

理论上这应该可行，因为所有资产都来自同一个域。然而 IE8 并没有像它应该的那样获得媒体查询支持。所以我调查了 Respond 的 CDN/X-Domain Setup 并将我的`<head>`部分修改为：

```
<link rel="stylesheet" href="http://cdn.example.com/css/main.css?2013012401">
<script src="http://cdn.example.com/js/modernizr-2.6.2.min.js?2013012401"></script>
<script src="http://cdn.example.com/js/respond.min.js?2013012401"></script>
<link href="http://cdn.example.com/respond-proxy.html?2013012401" id="respond-proxy" rel="respond-proxy">
<link href="http://cdn.example.com/img/respond.proxy.gif?2013012401" id="respond-redirect" rel="respond-redirect">
<script src="http://cdn.example.com/js/respond.proxy.js?2013012401"></script> 
```

当这也失败时，我将我的`<head>`部分修改为：

```
<link rel="stylesheet" href="http://cdn.example.com/css/main.css?2013012401">
<script src="http://cdn.example.com/js/modernizr-2.6.2.min.js?2013012401"></script>
<script src="http://cdn.example.com/js/respond.min.js?2013012401"></script>
<link href="http://cdn.example.com/respond-proxy.html?2013012401" id="respond-proxy" rel="respond-proxy">
<link href="/img/respond.proxy.gif" id="respond-redirect" rel="respond-redirect">
<script src="/js/respond.proxy.js"></script> 
```

我不确定我还能尝试什么才能真正让它发挥作用。它在不使用 CDN 的本地开发环境中运行良好，但在 Live 环境中，此 Respond.js CDN/X-Domain 设置不起作用。它可能与添加到 CDN 资产中的缓存破坏器查询字符串有关吗？当所有资产都来自同一个域时，为什么我的原始示例不起作用？

**编辑：** [这是在 IE8 中引发的错误](http://cl.ly/MVQ6/o)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T13:52:32.883

此问题是由`respond-proxy.html`包含查询字符串 ( `respond-proxy.html?2013012401`) 的文件引用引起的。从此文件中删除查询字符串会导致上述实现工作。

# sql - 我想从表中获取值 按类动态过滤日期

> ID：14564088
> 
> 赞同：0
> 
> 时间：2013-01-28T14:22:44.853
> 
> 标签：sql, dynamic

```
DECLARE @H_TS MONEY
DECLARE @CLASS VARCHAR(50)='CLASS 04'   
DECLARE @TAB_NA VARCHAR(1000)='Classdata'
SET @SQL = 'SELECT @H_TS=SUM(CAST([HISTORY TOTAL$] AS MONEY)) FROM '+@TAB_NA+' WHERE SUBCLASS!=''TOTAL'' AND CLASS LIKE '+@CLASS+''
  EXECUTE SP_EXECUTESQL @SQL, N'@H_TS nvarchar(200) OUTPUT', @H_TS = @H_TS OUTPUT
PRINT @H_TS 
```

我得到以下错误

消息 102，级别 15，状态 1，第 1 行“04”附近的语法不正确。

因为我的变量类包含空间有没有办法在不改变类值的情况下解决这个问题（不删除类中的空间）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T14:27:35.267

我认为您只是缺少几个单引号：

```
SET @SQL = 'SELECT @H_TS=SUM(CAST([HISTORY TOTAL$] AS MONEY)) FROM '+@TAB_NA+' 
WHERE SUBCLASS!=''TOTAL'' AND CLASS LIKE ''' + @CLASS + '''' 

EXECUTE SP_EXECUTESQL @SQL, N'@H_TS nvarchar(200) OUTPUT', @H_TS = @H_TS OUTPUT 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T14:44:34.897

假设您正在尝试执行 LIKE 查询并需要您的 % 运算符，这可能就是您要查找的内容：

```
CREATE TABLE ClassData ([History Total$] int, SUBCLASS varchar(100), class varchar(100));

INSERT INTO ClassData VALUES (1, 'TOTAL', '1Class 04');
INSERT INTO ClassData VALUES (2, 'NOTTOTAL', '1Class 04 22');

DECLARE @H_TS MONEY
DECLARE @CLASS VARCHAR(50)='CLASS 04'   
DECLARE @TAB_NA VARCHAR(1000)='Classdata'
DECLARE @SQL NVARCHAR(MAX);

SET @SQL = 'SELECT @H_TS=SUM(CAST([HISTORY TOTAL$] AS MONEY)) FROM '+@TAB_NA+' WHERE SUBCLASS!=''TOTAL'' AND CLASS LIKE ''%' + @CLASS + '%''';

EXECUTE SP_EXECUTESQL @SQL, N'@H_TS nvarchar(200) OUTPUT', @H_TS = @H_TS OUTPUT
SELECT @H_TS

DROP TABLE ClassData 
```

祝你好运。

# jquery - jQuery 将表单序列化两次（缓存序列化？）

> ID：14564090
> 
> 赞同：1
> 
> 时间：2013-01-28T14:22:53.033
> 
> 标签：jquery, caching, serialization

在这个 URL [http://www.juju.runover.com.br/meus-dados](http://www.juju.runover.com.br/meus-dados)中，我在“Bancos”部分有一个动态加载的表单。我发出警报以向我显示发送的数据，当我更改“Selecionar banco”选项并尝试提交时，序列化重复了！

这是我的第一次提交：

```
pessoa=0&cpf_cnpj=40367993805&conta=0082734&conta_digito=7&agencia=0395&agencia_digito=6&tipo=0&id=1&acao=alterar 
```

现在，在我将“Selecionar banco”选项更改为“outro ...”并再次更改为“itau”之后，结果如下：

```
pessoa=0&cpf_cnpj=40367993805&conta=0082734&conta_digito=7&agencia=0395&agencia_digito=6&tipo=0&id=1&acao=alterar&pessoa=0&cpf_cnpj=40367993805&conta=0082734&conta_digito=7&agencia=0395&agencia_digito=6&tipo=0&id=1&acao=alterar 
```

因此我无法更新记录，因为新数据在旧数据之前发送（第二次提交生成）......

我搜索了很多，尝试了serializeArray，但什么也没有

序列化代码：

```
jQuery('#banco').live('submit', function () {
    var dados = jQuery('#banco').serialize();
    alert(dados);

    /*
    jQuery.post(
        'app/painel/form/form_banco.php',
        dados,
        function (data) {
            alert(data);
            atualizaLista();
        }
    );
    */
    return false;
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T14:33:36.443

看起来您有两个具有相同 ID 的表单：“banco”

```
This is what I got from the console:
$("#banco")

[
<form id=​"banco" class=​"row-fluid" method=​"post" action>​…​&lt;/form>​
, 
<form id=​"banco" class=​"row-fluid" method=​"post" action>​…​&lt;/form>​
] 
```

您需要更改表单的 ID。

# javascript - 使用数组中的参数初始化 Mootools 类

> ID：14564091
> 
> 赞同：0
> 
> 时间：2013-01-28T14:22:53.017
> 
> 标签：javascript, mootools

我有一个 Mootools 课程：

```
var Foo = new Class({
    initialize: function(param1, param2) {
        // do stuff
    }
}); 
```

初始化 Foo 的值在一个数组中：

```
a = ['value1', 'value2']; 
```

如何使用 from 的值`a`来初始化 的实例`Foo`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T21:27:36.363

我会扩展类的原型，所以它不在乎（参见 Felix 的回答）。

```
var Foo = new Class({
    initialize: function(param1, param2) {
        console.log(param1, param2);
    }
});

(function(){
    var oldFoo = Foo.prototype.initialize;
    Foo.implement({
        initialize: function(){
            var args = typeOf(arguments[0]) == 'array' ? arguments[0] : arguments;
            return oldFoo.apply(this, args);
        }
    });
}());

new Foo(['one', 'two']); // one two
new Foo('three', 'four'); // three four 
```

它涉及更少的黑客攻击，并且可能比创建特殊的构造函数抽象更容易理解/维护。

如果可以，你甚至可以做

```
var Foo2 = new Class({
     Extends: Foo,
     initialize: function () {
         var args = typeOf(arguments[0]) == 'array' ? arguments[0] : arguments;
         this.parent.apply(this, args);
     }
});

new Foo2(['one', 'two']);
new Foo2('three', 'four'); 
```

因此，在不修改父原型和期望的情况下进行非常清晰的抽象 - 并保持讨厌的 SOLID 原则混蛋高兴：D

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T15:43:34.270

没有直接的方法来调用带有要扩展的参数数组的构造函数，就像使用`Function.apply`.

如果你用 来创建你的类的一个新实例`new Foo()`，MooTools 调用构造函数 ( `initialize`) 隐式地传递你调用 Foo() 的参数。但是，`initialize`它仍然作为实例的方法存在，因此您可以像这样简单地“再次”调用它：

```
var myFoo = new Foo();
myFoo.initialize.apply(myFoo, ['value1', 'value2']); 
```

但这确实是一种不好的做法，因为构造函数通常不会被调用两次，而且您很可能会遇到问题。

另一种方法是在不让 MooTools 调用构造函数的情况下创建实例。首先，您需要一个普通实例，然后`initialize`作为实例的方法调用。这是相当骇人听闻的，但可以这样实现：

```
var Foo = new Class({
    initialize: function(param1, param2) {
        this.param1 = param1;
        this.param2 = param2;
    },
    getParams: function() {
        console.log(this.param1 + ', ' + this.param2);
    }
});

Class.createInstance = function(klass, args) {
    klass.$prototyping = true;
    var inst = new klass();
    klass.$prototyping = false;
    inst.initialize.apply(inst, args);
    return inst;
}

var myFoo = Class.createInstance(Foo, ['a', 'b']);

// returns "a, b"
myFoo.getParams(); 
```

`$prototyping`是 MooTools 不调用构造函数的开关。

# c - C中具有精确长度的字符串的快速字符串比较

> ID：14564092
> 
> 赞同：8
> 
> 时间：2013-01-28T14:22:53.107
> 
> 标签：c, string, algorithm

有谁知道对正好有 6 个字符的字符串进行字符串比较的最快方法是什么？

我的想法如下：

```
inline bool jfStrEq6(const char *s1, const char *s2)
{
    uint64_t s1ui64 = *((uint64_t *)s1);
    uint64_t s2ui64 = *((uint64_t *)s2);

    return (s1ui64 & 0x0000ffffffffffff) == (s2ui64 & 0x0000ffffffffffff);
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-28T14:28:08.557

这是未定义的行为：您读取了 6 字符字符串的最后一个有效字节。只有七个而不是八个字节可以读取。此外，字节顺序很重要：您可能需要`0xffffffffffff0000`在某些架构上。

如果您知道字符串的长度，请使用`memcmp`：

```
inline bool jfStrEq6(const char *s1, const char *s2) {
    return !memcmp(s1, s2, 6);
} 
```

很有可能，您的优化器会将其转换为 CPU 内在函数，以便在您的平台上进行最快的比较。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-28T14:27:43.123

你觉得异或怎么样？

返回！（s1ui64 ^ s2ui64）；

但我不确定它是否真的更快，但至少更短。

# c++ - 使用 boost::assign::list_of 和 boost::variant

> ID：14564095
> 
> 赞同：0
> 
> 时间：2013-01-28T14:23:00.273
> 
> 标签：c++, boost, c++98

鉴于：

```
typedef boost::variant<std::vector<int8>, std::vector<std::string> > Container; 
```

如何初始化`c`为单列？

```
std::vector<std::string> v = boost::assign::list_of<std::string>("stringValue");
Container c(v); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T14:31:22.653

应该这样做 - 将 list_of 结果显式转换为您希望变体存储的类型：

```
Container c(vector<string>(list_of<string>("stringValue"))); 
```

甚至更好 - 使用 C++11：

```
Container c{ vector<string> {"stringValue1", "stringValue2"}}; 
```

# wpf - 通过 COM 从 VBS 到 WPF

> ID：14564096
> 
> 赞同：0
> 
> 时间：2013-01-28T14:23:00.710
> 
> 标签：wpf, com, interface, vbscript

我们有一个讨厌的（或者可能是微不足道的？）问题。

有一个 WPF 控件。它有 2 个接口，主接口和一个用于自动化测试目的的接口。这样定义：

```
[ComVisible(true)]
[Guid("xxx")]
public interface IXXXXXTest
{
[DispId(1)]
    void Test1(int index);
}

[ComVisible(true)]
public interface IXXXXX
{
    void Main1(index);
}

[ComVisible(true)]
[Guid("xxx")]
ClassInterface(ClassInterfaceType.None)]
public partial class XXXXX_WPF_CONTROL : UserControl,
                         IXXXXX,
                         IXXXXXTest
{
     ...
} 
```

现在我们正试图从 VBS 到达它。试试 1)

```
Set Ctrl = GetControl(...)  <---- this is ok
Ctrl.Test1(0)  <---- Object doesn't support this property or method: 'Ctrl.Test1'

Set Ctrl = GetControl(...)  <---- this is ok
Ctrl.Main1(0)  <---- this is ok 
```

所以它适用于“主”界面，但适用于测试界面。这似乎没问题（？），因为据我所知，如果没有 IDispatchEx，VBS 只能通过 IDispatch 到达“主”界面。所以我给IXXXXX加了一个属性来获取测试接口。

```
[ComVisible(true)]
public interface IXXXXX
{
    void Main1(index);
    IXXXXXTest Test { get;}
}
....
public IXXXXXTest Test
{
    get {   return this as IXXXXXTest;  }
} 
```

太好了，所以现在我可以通过“主”界面访问这个 IXXXXTest 界面。试试 2)

VBS：

```
Set Ctrl = GetControl(...)  <---- this is ok
Set CtrlTest = Ctrl.Test  <----- this is ok
CtrlTest.Test1(0)    <---- Object doesn't support this property or method: 'CtrlTest.Test1' 
```

:(

请注意，对于我们的其他 .NET 控件，“Try1”可以正常工作，没有任何技巧！

那么可能是由于 WPF 的不同吗？此外，改变

```
ClassInterface(ClassInterfaceType.None)] 
```

进入其他任何东西（AutoDispatch / AutoDual），或者离开它会使 WPF 控件不可用。

除此之外，这篇文章也应该是这样的：[Is it possible to package WPF window as COM Object](https://stackoverflow.com/questions/2186829/is-it-possible-to-package-wpf-window-as-com-object)

你知道可能是什么问题吗？提前非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T15:00:52.090

脚本语言只能使用类的默认接口。你有不止一个，所以至少其中一个将不可用。如果与其他声明冲突，方法名称可能会被重命名。我假设你在你的问题中混淆了真实姓名，很难从你发布的内容中诊断出这种重命名。

最好的办法是在您的接口类型上临时应用 [InterfaceType(ComInterfaceType.InterfaceIsDual)] 属性。它允许您使用 Tlbexp.exe 生成类型库，然后您可以使用 OleView.exe 实用程序 File + View Typelib 命令查看该库。您将看到方法的确切名称，并且您将看到哪个接口是 coclass 上的 [默认] 接口。从那里你应该可以毫不费力地修改你的声明，这样它们就可以在脚本语言中工作了。

# android - 在另一个 Android 上叠加位图

> ID：14564100
> 
> 赞同：2
> 
> 时间：2013-01-28T14:23:24.400
> 
> 标签：android, bitmap, android-canvas, bitmapimage

大家好，我正在尝试获取图像（来自资源的框架）以将其覆盖在原始位图上。到目前为止，我无法让我的位图进入框架，因为框架总是空的。原始位图现在显示在框架内。这是我用来完成此操作的代码。

> ```
>  Canvas canvas = new Canvas();
>     Bitmap border = null;
>     Bitmap scaledBorder = null;
>     border = BitmapFactory.decodeResource(getResources(), R.drawable.frame1);
>     int width = bmp.getWidth();
>     int height = bmp.getHeight();
>     scaledBorder = Bitmap.createScaledBitmap(border,width,height, false);
>     canvas.drawBitmap(scaledBorder, 0, 0, new Paint());
>     view.setImageBitmap(scaledBorder); 
> ```

bmp 作为我来自画廊或相机的原始位图。我找不到把它们放在一起的地方。只有框架会出现，但不会出现 bmp。提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T09:17:07.430

谢谢大佬，我自己想出来的。使用这个

```
void hm1(){
    Bitmap border = BitmapFactory.decodeResource(getResources(), R.drawable.vignette2);
    int width = bmp.getWidth();
    int height = bmp.getHeight();
    change = Bitmap.createScaledBitmap(change, width, height, false);
    Canvas canvas = new Canvas(change);
    Bitmap scaledBorder = Bitmap.createScaledBitmap(border,width,height, false);
    canvas.drawBitmap(scaledBorder, 0, 0,null);
    //canvas.drawBitmap(k, 0, 0, null);
    view.setImageBitmap(change);
    } 
```

通过在任何单击按钮、菜单等上添加此方法，您可以在彼此之上绘制两个位图。
PS：`Bitmap change`是原始位图的另一个位图，因为我不希望用户在原始方法上应用叠加层，而是在更改后的方法上应用。希望答案对某人有所帮助。谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T14:28:05.973

底线，首先您需要将原始图像添加到画布，然后是边框，然后将画布放在视图上。您最好的选择是在 onDraw() 方法中执行此操作。像这样的东西应该工作：

```
@Override
void onDraw (Canvas canvas)
{
    canvas.drawBitmap(bmp,0,0,new Paint())
    Bitmap border = null;
    Bitmap scaledBorder = null;
    border = BitmapFactory.decodeResource(getResources(), R.drawable.frame1);
    int width = bmp.getWidth();
    int height = bmp.getHeight();
    scaledBorder = Bitmap.createScaledBitmap(border,width,height, false);
    canvas.drawBitmap(scaledBorder, 0, 0, new Paint());
} 
```

或者，您可以从视图中调用 draw() 函数。

```
canvas.drawBitmap(bmp,0,0,new Paint())
Bitmap border = null;
Bitmap scaledBorder = null;
border = BitmapFactory.decodeResource(getResources(), R.drawable.frame1);
int width = bmp.getWidth();
int height = bmp.getHeight();
scaledBorder = Bitmap.createScaledBitmap(border,width,height, false);
canvas.drawBitmap(scaledBorder, 0, 0, new Paint());
view.draw(canvas); 
```

# asp.net - Team City：使用 Web Deploy 部署时跳过 web.config

> ID：14564110
> 
> 赞同：4
> 
> 时间：2013-01-28T14:24:00.710
> 
> 标签：asp.net, .net, iis-7, teamcity, webdeploy

我使用构建参数部署项目，例如：

systemDeployOnBuild = true

system.DeployIISAppPath = [某事]

system.DeployTarget = MSDeployPublish

和一些其他参数来定位我的 IIS Web 部署服务器。

如何防止 Web 配置与它一起部署？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-29T07:27:48.447

定义属性`ExcludeFilesFromDeployment`。该值是要从部署中排除的文件和通配符的分号分隔列表。

所以为了排除网络配置定义`ExcludeFilesFromDeployment=Web.config`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-28T14:37:35.507

假设您通过命令行使用 msdeploy，您可以使用[-skip 参数](http://technet.microsoft.com/en-us/library/dd569089%28v=ws.10%29.aspx)，如下所示：

```
-skip:objectName=filePath,absolutePath="^.*web\.config$" 
```

在此示例中，我使用正则表达式来排除所有 web.config，但您也可以输入 web.config 文件的相对路径。

# sql - 提高性能的 SQL 表设计

> ID：14564114
> 
> 赞同：0
> 
> 时间：2013-01-28T14:24:08.377
> 
> 标签：sql, sql-server, database, database-design

我正在为一个网站设计一个数据库，其中性能是重中之重。

关键功能基于两个表。

并且这些表具有多对多关系。

为了拆分它，我添加了一个额外的表 Table1_Table2，然后在每个关系的基础上保存两个表主键的组合。

例如，我将所有汽车都放在 Car 表中，并将所有颜色都放在颜色表中

**车桌**

* * *

ID(PK) - 姓名

* * *

1 - 宝马
2 - 梅赛德斯
3 - 大众
4 - 奥迪

* * *

**颜色表**

* * *

ID(PK) - 颜色

* * *

1 - 蓝色
2 - 绿色
3 - 黑色
4 - 黄色

* * *

对于多对多关系，我这样做了：

**Car_ColorTable**

* * *

ID(PK) - CarID - ColorID

* * *

1 - 1 - 2
2 - 1 - 4
3 - 2 - 4
4 - 3 - 1
5 - 4 - 1
6 - 4 - 3
7 - 4 - 3

* * *

这是一个好的设计考虑：

1）性能是重中之重。

2）表会有大量数据（两个表都有超过100万条记录，你可以想象Car_ColorTable最终会有多少行。

如果上述设计不是解决方案，我应该如何设计？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T14:30:14.283

它应该是 Car_ColorTable

```
CarID (PK) - ColorID (PK) 
```

你不希望 id 列在那里，
主键应该有两列
你可以创建类似的非聚集索引，列的顺序相反，意思是（ColorID，CarID）
，就是这样

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T14:33:40.997

这是映射关系的最佳方式。只需确保您知道通常会尝试从哪个对象接近关系并将聚集索引放在该列上。

您也可以选择创建组合 PK，但不能使用任何重复项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T14:36:16.867

您可能的*意思*是说 SELECT 性能是最重要的。但是您不能让 SELECT 性能胜过数据完整性。快速得到错误的答案*从来都不*是一个好的要求。

如果您使用代理键（整数），您的主键应该是`primary key (car_id, color_id)`. 额外的代理键“ID”在这里没有用，通常会损害 SELECT 的性能。（更多的列，更宽的行，磁盘上每个数据页的更少行，更多的磁盘 I/O。）

您应该使用自然键（汽车名称和汽车颜色）*和*代理键进行测试。每个查询的代理键都需要两个连接；自然键不需要*连接*。使用代理键（汽车、颜色）的表仍然需要对名称进行唯一约束。您不想以后发现“蓝色”有 13 个不同的 ID 号。

花一两个小时编写一个脚本来生成几百万行有和没有代理键，并比较性能。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-28T14:37:24.550

你的设计看起来不错。要记住的事情：

1.  索引是你的朋友。使用它们。
2.  在谈论性能时，请记住，提高读取性能通常会导致小的更新/插入写入性能损失。

一百万条记录确实不算多，您可以进行快速查询。获得具有足够处理能力和内存的体面服务器，您应该没问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-28T21:06:05.233

关于`Car_ColorTable`表格，除非您真的想允许同一辆车和颜色之间的多个连接，或者有其他[特定原因](https://stackoverflow.com/a/13964847/533120)，否则请放弃代理键`{Id}`并使用自然键，即汽车和颜色的组合。

具体如何执行取决于您需要运行的查询：

*   如果您需要：“对于给定的汽车，给我颜色”，[请](http://use-the-index-luke.com/sql/clustering/index-organized-clustered-index)在`{CarID, ColorID}`.
*   如果您需要“给定颜色，给我汽车”，请在`{ColorID, CarID}`.
*   如果两者都需要，请在 上创建一个主键`{CarID, ColorID}`和一个二级索引`{ColorID, CarID}`。
    *   除非您没有向我们展示其他字段，否则请使 PK 集群化。
    *   如果您确实有其他字段，请使用非集群（即基于堆）表，或者使用这两个索引[覆盖所有字段（](http://use-the-index-luke.com/sql/glossary/covering-index) [INCLUDE](http://msdn.microsoft.com/en-us/library/ms188783.aspx)关键字可能会派上用场）。

# maven - Maven：使用来自 URL 的 jar 作为资源的来源

> ID：14564115
> 
> 赞同：0
> 
> 时间：2013-01-28T14:24:08.853
> 
> 标签：maven

处理遗留项目，我需要从 URL 的 jar 加载文本资源。然后将过滤文本资源并将其包含在输出中；这些资源来自已发布的工件。

从资源插件我看到只能提供一些目录；是否可以根据需要加载资源？

我想做这样的事情，但使用远程 jar 而不是工作区中的其他项目：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
<artifactId>maven-resources-plugin</artifactId>
<executions>
    <execution>
    <id>copy-resources</id>
    <phase>process-resources</phase>
    <goals>
        <goal>copy-resources</goal>
    </goals>
    <configuration>
        <outputDirectory>${project.build.directory}/${project.build.finalName}</outputDirectory>
                        <resources>
                            <resource>
                                <directory>../<another project on the same workspace>/src/main/filtered-resources</directory>
                                <filtering>true</filtering>
                            </resource>
                        </resources>
                    </configuration>
                </execution>
            </executions>
        </plugin>
    </plugins> 
```

正如其中一个答案所建议的那样，远程资源插件不起作用，因为导入的包中没有文件最终到达目标；我无法使用远程资源插件生成原始捆绑包（它是一个仍在使用且完全不受我控制的遗留项目）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T14:28:54.610

我认为[Maven 远程资源插件](http://maven.apache.org/plugins/maven-remote-resources-plugin/)将满足您的需求。

**编辑**：

从插件的[使用页面](http://maven.apache.org/plugins/maven-remote-resources-plugin/usage.html)获取的片段。该 XML 片段会将插件附加到`generate-sources`阶段（如果它不符合您的需要，请选择不同的），将下载`apache-jar-resource-bundle`工件并将其内容解压缩到`${project.build.directory}/maven-shared-archive-resources`.

为了获得更好的结果，建议使用`bundle`相同插件的目标创建资源工件。

```
<!-- Turn this into a lifecycle -->
<plugin>
  <artifactId>maven-remote-resources-plugin</artifactId>
  <version>1.4</version>
  <executions>
    <execution>
      <id>process-remote-resources</id>
      <phase>generate-sources</phase>
      <goals>
        <goal>process</goal>
      </goals>
      <configuration>
        <resourceBundles>
          <resourceBundle>org.apache:apache-jar-resource-bundle:1.0</resourceBundle>
        </resourceBundles>
      </configuration>
    </execution>
  </executions>
</plugin> 
```

**编辑 2：使用 AntRun 的替代解决方案**

如果您的工件不适合 Maven 需求并且您需要更多定制的东西，那么使用 AntRun 插件您可以通过某种方式获得它：

```
<plugin>
  <groupId>org.apache.maven.plugins</groupId>
  <artifactId>maven-antrun-plugin</artifactId>
  <version>1.7</version>
  <executions>
    <execution>
      <id>download-remote-resources</id>
      <goals>
        <goal>run</goal>
      </goals>
      <configuration>
        <target>
          <get src="URL of the resource" dest="${project.build.directory}" />
          <unzip src="${project.build.directory}/filename.[jar|zip|war]" dest="${project.build.directory}/${project.build.finalName}" />
        </target>
      </configuration>
    </execution>
  </executions>
</plugin> 
```

# python - 如何将文件移动到相应的文件夹中

> ID：14564118
> 
> 赞同：0
> 
> 时间：2013-01-28T14:24:09.770
> 
> 标签：python, file, move, directory

我有一个脚本，旨在通过查找每个文件的第一个字母然后检查名称的唯一性来创建多个文件夹，然后根据唯一值创建文件夹并在唯一值之后命名文件夹，最后将相应的文件到正确的文件夹中。我的代码是

```
import os
from os import listdir
import dircache
import sys
import shutil
import dircache
import glob

path = "C:\\Users\\hra\\Desktop\\fg"
dirList=os.listdir(path)
for fname in dirList:
    print fname

#myList = fname
myList2 = sorted(dirList, key=lambda x:x[0:3])
oldList = [x[0] for x in myList2]
newList = list(set(oldList))
for char in newList:
    print newList

root_path = "C:\\Users\\hra\\Desktop\\fg"
folders = newList
for folder in folders:
    os.mkdir(os.path.join(root_path,folder))

fCounter = len(glob.glob1("C:\\Users\\hra\\Desktop\\fg","f*"))
mCounter = len(glob.glob1("C:\\Users\\hra\\Desktop\\fg","m*"))
bCounter = len(glob.glob1("C:\\Users\\hra\\Desktop\\fg","b*"))
nLCounter =  len(newList) 
```

到目前为止，我已经设法让我的代码从唯一值创建和重命名所需的文件，但我正在努力将我的文件移动到相应的文件夹中，因为它意味着能够处理可能无限数量的文件，这可能会导致对正在创造的许多独特价值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T14:36:10.907

在程序末尾添加这个

```
import os
for fname in dirList:
  os.rename(fname,os.path.join(root_path,fname[0],fname)) 
```

或者您可能想导入 shutil 并使用

```
shutil.copyfile(fname, path.join(root_path,fname[0],fname)) 
```

相反，因为这是非破坏性的

# c# - 将对象的匿名类添加到匿名列表

> ID：14564119
> 
> 赞同：2
> 
> 时间：2013-01-28T14:24:14.077
> 
> 标签：c#, .net, list, generics, anonymous-types

我已经声明了一个这样的匿名列表，它还包含联系人列表

```
var ContactGroup = new[] { new { ContactGroupKey = 0, ContactGroupTLK = 0, Desc = "",  Contacts=new List<object>() } }.ToList(); 
```

我尝试检查列表，如果 ContactGroupKey 存在，则仅更新联系人（定义为列表），否则插入新的联系人组。但是当我尝试在我的匿名列表中添加一个新的联系人组时，它会抛出一个错误“'System.Collections.Generic.List.Add(AnonymousType#2)'的最佳重载方法匹配有一些无效参数”我正在使用匿名第一次列出。在这种情况下，我试图避免上课。任何人都可以建议我在哪里犯了错误？

```
 while()
 {
    var Contact= new {
                       ContactKey = Convert.ToInt64(DB["ContactKey", "0"]),                       
                       FirstName = DB["FirstName", ""].ToString(),
                       Surname = DB["Surname", ""].ToString(),
                       FullName = DB["Fullname", ""].ToString(),
                       Street = DB["bStreet", ""].ToString(),
                       City = DB["bCity", ""].ToString(),
                     };
     foreach (var item in ContactGroup)
                {
                    if (item.ContactGroupKey == Contact.ClaimContactGroupKey)
                    {
                        item.Contacts.Add(Contact);
                        added = true;
                    }
                }
     if(!added){

      ContactGroup.Add(new {
                           ContactGroupKey = Convert.ToInt64(DB["ContactGroupKey", "0"]),
                           ContactGroupTLK = Convert.ToInt64(DB["TranslationKey", "0"]),
                           Desc = DB["Description", ""].ToString(),
                           Contacts=GenerateList(Contact)
                           });          
       }
 }// End While

public static List<T> GenerateList<T>(T itemOftype)
 {
     List<T> newList = new List<T>();
     return newList;
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T14:30:03.993

问题是您使用的匿名类型不一样。您需要让属性在名称、类型和顺序上匹配。看这个：

```
 ContactGroup.Add(new {
                       ContactGroupKey = Convert.ToInt64(DB["ContactGroupKey", "0"]),
                       ContactGroupTLK = Convert.ToInt64(DB["TranslationKey", "0"]),
                       Desc = DB["Description", ""].ToString(),
                       Contacts=GenerateList(Contact)
                       }); 
```

这将具有`ContractGroupKey`和`ContactGruopTLK`作为`long`属性，并且`Contacts`作为您的其他匿名类型`List<T>`在哪里。`T`您需要将初始化更改为：

```
var sampleContact = new { ContactKey = 0L, /* etc */ };
var sampleContactList = new[] { sampleContact }.ToList();
var contactGroup = new[] { new { ContactGroupKey = 0L,
                                 ContactGroupTLK = 0L, 
                                 Desc = "", 
                                 Contacts = sampleContactList } }.ToList(); 
```

这*可以*工作 - 但你最好为此创建命名类。最终感觉这些很可能是您系统中的重要实体，因此值得努力将它们建模为命名类型。

（旁注：在你的命名中保持一致是值得的；通常局部变量是`camelCased`，所以你应该使用`contactGroup`而不是`ContactGroup`等）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T14:25:54.693

匿名类型不打算离开当前方法。您不能将它们传递给其他方法。您应该定义一个包含您需要处理的属性的类。

# iphone - 如何将工具栏添加为标题视图？

> ID：14564137
> 
> 赞同：-1
> 
> 时间：2013-01-28T14:25:10.403
> 
> 标签：iphone

我正在尝试将 UIToolbar 添加为导航项的标题视图。工具栏已成功添加到 titleview。但似乎框架没有正确设置。

![在此处输入图像描述](../Images/d2c2e1686efd3230decc71d599790f0e.png)

以上是我目前得到的输出。我没有设置右/左栏按钮。

谢谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-28T14:55:08.757

而不是分配给titleview，将其添加为子视图

```
[navigationController.navigationBar addSubview:toolBar]; 
```

如果它不起作用，那么请执行以下操作

像这样创建一个视图

```
UIView *yourView = [[UIView alloc] initWithFrame:navigationController.navigationBar.bounds];
yourView .backgroundColor = [UIColor yellowColor];
[yourView addSubView:toolBar];
ctrl.autoresizingMask = UIViewAutoresizingFlexibleWidth;
[navigationController.navigationBar addSubview:yourView]; 
```

# hibernate - 如何从 Play 2.0 中排除 ebeans？

> ID：14564139
> 
> 赞同：2
> 
> 时间：2013-01-28T14:25:12.940
> 
> 标签：hibernate, scala, playframework, playframework-2.0, ebean

我正在使用带有 Scala 和 JPA/Hibernate 的 Play 2.0。Hibernate 自动创建数据库结构并插入奇怪的列，例如`bitmap$init$0`应该由 ebean 引起的列（据我所知）。

我尝试在我的 ApplicationBuild 对象中使用以下设置禁用 ebean：

```
val main = PlayProject(appName, appVersion, appDependencies, mainLang = SCALA).settings(
  ebeanEnabled := false
) 
```

但是无论如何都会生成奇怪的列。

如何禁用 ebean？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T16:45:33.867

非常简单的解决方案是[升级](http://www.playframework.com/documentation/2.1.0/Migration)到 Play 2.1。由于模块化，默认情况下不再包含 ebean。

# python - 适用于 Visual Studio 2012 的 Python 工具。工具/选项窗口中缺少 Python

> ID：14564145
> 
> 赞同：4
> 
> 时间：2013-01-28T14:25:36.743
> 
> 标签：python, visual-studio, ptvs

[从 codeplex](http://pytools.codeplex.com/wikipage?title=Getting%20interpreters%20&%20libraries%20-%20details&referringTitle=Home)遵循此页面上的指南后，我无法在我的工具/选项窗口中看到 Python 选项。我相信我从指南中得到的唯一偏差是：

*   发行版：没有安装 activestate python，因为我已经安装了 Python。
*   解释器：仅安装 IronPython 2.7

几次安装/重新安装后，我仍然看不到它工作......我可能会错过什么？还是我应该回到 Visual Studio 2010？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T12:38:39.483

您是否尝试过使用 Microsoft Web 平台安装程序？它在安装框架、检查依赖项等时绕过了许多可能的错误：

[http://www.microsoft.com/web/downloads/platform.aspx](http://www.microsoft.com/web/downloads/platform.aspx)

# android - 内存字符串不足 Android

> ID：14564146
> 
> 赞同：5
> 
> 时间：2013-01-28T14:25:36.987
> 
> 标签：android, out-of-memory

我收到了巨大的 JSON，并且当我阅读 OutOfMemoryError 行时出现。

这是我尝试解析 JSON 的第一种方法。

```
 InputStream in = response.getEntity().getContent();
    BufferedReader reader = new BufferedReader(new InputStreamReader(in, "UTF-8"), 8);
    String result = "";

    while (true) {

                String ss = reader.readLine();
                if (ss == null) {
                        break;
                }
                result += ss;
   } 
```

而且我也试过这种方法。

```
 InputStream in = response.getEntity().getContent();
    BufferedReader reader = new BufferedReader(new InputStreamReader(in, "UTF-8"), 8);
    StringBuilder sb = new StringBuilder();
    String line = null;

    while ( (line = reader.readLine()) != null)
    {
    sb.append(line);
    } 
```

在这两种情况下，OutOfMemoryErorr 都会出现。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T14:30:58.363

大多数错误将由于堆大小而发生。您需要增加堆的大小

[增加堆大小](https://stackoverflow.com/questions/11275650/how-to-increase-heap-size-of-an-android-application)

有关 java 中堆大小的更多信息，请访问[此处](http://docs.oracle.com/javase/1.4.2/docs/tooldocs/windows/java.html#nonstandard)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T07:40:11.590

我发现的最佳解决方案是提高应用程序的堆。

我放在`android:largeHeap="true"`了`<application/>`中`AndroidManifest.xml`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-28T14:39:48.040

当您实例化您的`BufferedReader`时，您传入一个`int size`of `8`，这意味着您的缓冲区是 8 个字符（我认为这不是您想要的）。如果您传递 no `size`，则默认值为 8192 个字符。

尝试这个：

```
BufferedReader reader = new BufferedReader(new InputStreamReader(in, "UTF-8")); 
```

或者这个（同样的效果）：

```
BufferedReader reader = new BufferedReader(new InputStreamReader(in, "UTF-8"), 8192); 
```

[http://developer.android.com/reference/java/io/BufferedReader.html](http://developer.android.com/reference/java/io/BufferedReader.html)

我不完全确定这会解决你看到的错误，但如果你不能让它工作，值得一试。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-08-06T05:11:24.737

我的 JSON 代码正在等待状态，即将结束。所以我修改了代码以提前返回。

```
// try to get formattedAddress without reading the entire JSON
        String formattedAddress;
        while ((read = in.read(buff)) != -1) {
            jsonResults.append(buff, 0, read);
            formattedAddress = ((String) ((JSONObject) new JSONObject(
                    jsonResults.toString()).getJSONArray("results").get(0))
                    .get("formatted_address"));
            if (formattedAddress != null) {
                Log.i("Taxeeta", "Saved memory, returned early from json") ;
                return formattedAddress;
            }               
        }
JSONObject statusObj = new JSONObject(jsonResults.toString());
        String status = (String) (statusObj.optString("status"));
        if (status.toLowerCase().equals("ok")) {
            formattedAddress = ((String) ((JSONObject) new JSONObject(
                    jsonResults.toString()).getJSONArray("results").get(0))
                    .get("formatted_address"));
            if (formattedAddress != null) {
                Log.w("Taxeeta", "Did not saved memory, returned late from json") ;
                return formattedAddress;
            }           
        } 
```

# c# - 连接字符串适用于 OLE DB 连接，但不适用于 Sql Server Native Client 10.0

> ID：14564148
> 
> 赞同：3
> 
> 时间：2013-01-28T14:25:45.620
> 
> 标签：c#, sql, sql-server, ado.net

以下是我使用 Microsoft OLE DB Provider for SQL Server 的配置工具连接到数据库时生成的连接字符串。

```
Provider=SQLOLEDB.1;Password=password;Persist Security Info=True;User ID=sa;
Initial Catalog=database;Data Source=localhost;Use Procedure for Prepare=1;
Auto Translate=True;Packet Size=4096;Workstation ID=computer1;
Use Encryption for Data=False;Tag with column collation when possible=False 
```

如果我使用 SQL Server Native Client 10.0 连接到同一个数据库，我会得到这个连接字符串。

```
Provider=SQLNCLI10.1;Integrated Security=\"\";Persist Security Info=False;
User ID=sa;Initial Catalog=database;Data Source=localhost;Use Procedure for Prepare=1;
Auto Translate=True;Packet Size=4096;Workstation ID=computer1;
Initial File Name=\"\";Use Encryption for Data=False;
Tag with column collation when possible=False;
MARS Connection=False;DataTypeCompatibility=0;Trust Server Certificate=False\0 
```

我有 ac# 应用程序，它读取这些连接字符串之一并使用它来创建与我的数据库的连接，如下所示

```
SqlConnectionStringBuilder _sqlConnectionStringBuilder = new SqlConnectionStringBuilder();
OleDbConnectionStringBuilder conBuilder = new OleDbConnectionStringBuilder( CONNECTION STRING SHOWN ABOVE);
_initialCatalogValue = (string)conBuilder["Initial Catalog"];
_dataSourceValue = conBuilder.DataSource;

_sqlConnectionStringBuilder.Password = (string)conBuilder["Password"];
_sqlConnectionStringBuilder.UserID = (string)conBuilder["User Id"];
_sqlConnectionStringBuilder.InitialCatalog = _initialCatalogValue;
_sqlConnectionStringBuilder.DataSource = _dataSourceValue;
_sqlConnectionStringBuilder.PersistSecurityInfo = true;

_conn = new SqlConnection(_sqlConnectionStringBuilder.ConnectionString);
_conn.Open(); 
```

当我使用 SQL Server 本地客户端时密码为空并且我的 SQLConnection 将在登录时失败的问题。我得到的错误是“用户'sa'登录失败”。

OLE DB 连接字符串成功。由于我在 c# 中使用的某些类，我的 sql server 本机客户端登录失败了吗？Sql Server Native Client 10.0 是否加密密码？我应该尝试识别连接字符串中的哪个提供程序并且有两个不同的代码路径吗？如果是这样，连接需要什么？

基本问题是，无论我收到哪个连接字符串（仅以上两个），如何确保连接成功？

注意我无法控制连接字符串。我只能使用我收到的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T15:27:06.963

您提供的第二个连接字符串**不**包含密码；因此，当您设置为第二个字符串`conBuilder["Password"]`时返回一个空字符串。`conBuilder.ConnectionString`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T13:40:02.673

问题解决如下。

有一个主应用程序正在使用上述连接字符串并执行以下操作。

应用程序将采用连接字符串。如果连接字符串的提供程序是 SQL Server Native Client (SQLNCLI10.1)，则应用程序会检查持久安全性。如果找不到任何内容，则将 IntegratedSecurity=SSPI 添加到连接字符串，然后使用 Windows 身份验证进行连接。这是否是正确的（或安全的事情），这就是正在做的事情。

“回答”这个问题。您可以输入连接字符串，如果找不到密码，您可以设置 IntegratedSecurity=SSPI。这将允许您使用 Windows 身份验证而不是 SQL Server 身份验证进行连接。我不建议你这样做，但它会起作用。

# javascript - Javascript原型继承 - 后代相互覆盖

> ID：14564155
> 
> 赞同：11
> 
> 时间：2013-01-28T14:25:58.670
> 
> 标签：javascript

我正在创建两个对象（继承），它们都继承自 Base。第二个对象的属性赋值覆盖第一个对象中的值。

有什么想法吗？如何进行适当的继承，以便基类将包含其继承后代的公共成员，但后代可以分配自己的值而不会相互干扰。

```
var testParams1 = { title: "john" };
var testParams2 = { title: "mike" };

Function.prototype.inheritsFrom = function (baseClass)
{
    this.prototype = new baseClass;
    this.prototype.constructor = this;
    this.prototype.base = baseClass.prototype;
    return this;
};

function Base() {
    this.viewModel = {};
    this.viewModel.title = (function ()
    {
        var savedVal = "";
        return function (newVal)
        {
            if (typeof (newVal) === "undefined")
            {
                return savedVal;
            }
            savedVal = newVal;
        };
    })();
}
function Inherits(params) {
    this.viewModel.title(params.title);
}

Inherits.inheritsFrom(Base);

///// preparing code:
var testObj1 = new Inherits(testParams1);
var testObj2 = new Inherits(testParams2);

///// testing code:
equals(testObj1.viewModel.title(), testParams1.title, "first instance ok"); // returns "john"
equals(testObj2.viewModel.title(), testParams2.title, "second instance ok");  // also returns "john" 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-01-29T05:30:28.817

### 问题）

*   类`Base`构造函数只被调用一次。
    this.prototype = 新基类；
*   特权方法将`this`跨实例引用相同的对象，因为这些方法是在构造函数中创建的（仅调用一次）。

### 基于意见的问题

*   `Function.prototype`如果您打算与不属于您的 JavaScript 一起工作，您应该尽量避免修改本机原型（即 . ）。

### 解决方案

*   为创建的每个新实例调用构造函数和父构造函数。
*   继承父原型链（不是父类的实例）。
*   保持原型链中创建的实例数与调用构造函数数的比例为 1:1。

### Max问题的最终解决方案

请特别注意`inherits`功能和`ParentClass.call(this, title);`线路。要寻找的构造函数是`ParentClass`和`ChildClass`

```
/**
 * Allows a child constructor to safely inherit the parent constructors prototype chain.
 * @type {Function}
 * @param {!Function} childConstructor
 * @param {!Function} parentConstructor
 */
function inherits(childConstructor, parentConstructor){
    var TempConstructor = function(){};
    TempConstructor.prototype = parentConstructor.prototype; // Inherit parent prototype chain

    childConstructor.prototype = new TempConstructor(); // Create buffer object to prevent assignments directly to parent prototype reference.
    childConstructor.prototype.constructor = childConstructor; // Reset the constructor property back the the child constructor
};

//////////////////////////////////////
/** @constructor */
function ParentClass(title) {
    this.setTitle(title);

    var randId_ = Math.random();
    /** @return {number} */
    this.getPrivlegedRandId = function()
        {return randId_;};
};

/** @return {string} */
ParentClass.prototype.getTitle = function()
    {return this.title_;};

/** @param {string} value */
ParentClass.prototype.setTitle = function(value)
    {this.title_ = value;};

//////////////////////////////////////    
/**
 * @constructor
 * @param {string} title
 * @param {string} name 
 */
ChildClass = function (name, title) {
    ParentClass.call(this, title); // Call the parent class constructor with the required arguments

    this.setName(name);
}
inherits(ChildClass, ParentClass); // Inherit the parent class prototype chain.

/** @return {string} */
ChildClass.prototype.getName = function()
    {return this.name_;};

 /** @param {string} value */
ChildClass.prototype.setName = function(value)
    {this.name_ = value;}; 
```

## 掉进兔子洞

对于那些好奇为什么它起作用而不是简单地记住它的`inherits`功能的人。

### 如何使用原型链解析属性

当在实例级别找不到属性时，JavaScript 将尝试通过搜索实例构造函数原型链来解决丢失的属性。如果在第一个原型对象中没有找到该属性，它将搜索父原型对象，依此类推，直到`Object.prototype`. 如果在其中找不到它，`Object.prototype`则会引发错误。

### 从子构造函数调用父构造函数：尝试 #1

```
// Bad
var ChildConstructor = function(arg1, arg2, arg3){
    var that = new ParentConstructor(this, arg1, arg2, arg3);
    that.getArg1 = function(){return arg1};
    return that;
} 
```

使用创建的任何变量都`new ChildConstructor`将返回`ParentConstructor`. 将`ChildConstructor.prototype`不会被使用。

### 从子构造函数调用父构造函数：尝试 #2

```
// Good
var ChildConstructor = function(arg1, arg2, arg3){
    ParentConstructor.call(this, arg1, arg2, arg3);
} 
```

现在适当地调用构造函数和父构造函数。但是，只有在构造函数中定义的方法才会存在。不会使用父原型上的属性，因为它们尚未链接到子构造函数原型。

### 继承父原型：尝试#1

```
// Bad
ChildConstructor.prototype = new ParentConstructor(); 
```

父构造函数将被调用一次或多次调用，具体取决于是否`ParentConstructor.call(this)`使用。

### 继承父原型尝试#2

```
// Bad
ChildConstructor.prototype = ParentConstructor.prototype; 
```

虽然这在技术上是可行的，但任何分配`ChildConstructor.prototype`也将被分配给，`ParentConstructor.prototype`因为对象是通过引用而不是通过复制传递的。

### 继承父原型尝试#3

```
// Almost there
var TempConstructor = function(){};
TempConstructor.prototype = ParentConstructor.prototype;
ChildConstructor.prototype = new TempConstructor(); 
```

这允许您分配属性，`ChildConstructor.prototype`因为它是临时匿名函数的实例。在 的实例上找不到的属性`TempConstructor`将检查它的原型链的属性，因此您已成功继承父原型。唯一的问题是，`ChildConstructor.prototype.constructor`现在指向`TempConstructor`.

### 继承父原型尝试#4

```
// Good
var TempConstructor = function(){};
TempConstructor.prototype = ParentConstructor.prototype;
ChildConstructor.prototype = new TempConstructor();
ChildConstructor.prototype.constructor = ChildConstructor; 
```

### 全部一起

```
var ParentConstructor = function(){
};

var ChildConstructor = function(){
    ParentConstructor.call(this)
};

var TempConstructor = function(){};
TempConstructor.prototype = ParentConstructor.prototype;
ChildConstructor.prototype = new TempConstructor();
ChildConstructor.prototype.constructor = ChildConstructor; 
```

您已成功从父类继承！让我们看看我们是否可以做得更好。

### 继承函数

```
function inherits(childConstructor, parentConstructor){
    var TempConstructor = function(){};
    TempConstructor.prototype = parentConstructor.prototype; // Inherit parent prototype chain

    childConstructor.prototype = new TempConstructor(); // Create buffer object to prevent assignments directly to parent prototype reference.
    childConstructor.prototype.constructor = childConstructor; // Reset the constructor property back the the child constructor (currently set to TempConstructor )
};

var ParentConstructor = function(){
};

var ChildConstructor = function(){
    ParentConstructor.call(this)
};
inherits(ChildConstructor, ParentConstructor); 
```

# java - 模板方法模式 - 命名约定

> ID：14564162
> 
> 赞同：17
> 
> 时间：2013-01-28T14:26:25.480
> 
> 标签：java, naming-conventions, template-method-pattern

我有这个名为**RenderableEntity**的抽象类。

我有一个公共方法`render()`，其中包含一些围绕抽象受保护`render()`方法的逻辑。我应该如何命名这个抽象`render()`方法。是否有某种约定，例如。`doRender()`，`makeRender()`对于受保护的方法`render()`？

```
public abstract class RenderableEntity extends Entity {

    private boolean visible;

    public void render(){
        if(visible){
            render();
        }
    }
    protected abstract void render();
} 
```

***编辑**：我知道这个片段不能编译。我只是想知道如何命名这个抽象方法，因为我不能拥有具有相同名称和相同参数的方法。*

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-28T14:40:17.977

第一：只有在模板方法*专用*的情况下，才考虑对这些方法进行特殊命名。此外，您应该评论这些方法，说明它们由模板方法使用，并且应该在考虑到该用法的情况下进行任何修改。

在模板方法中构成可替换步骤的方法通常称为“挂钩”方法。您有时会看到它们以“Hook”结尾。

在您的示例中，您可能希望调用它`renderHook()`，但如果您可以更具体地了解它在模板方法中执行的任务，`render()`那将更具描述性。

我见过`doXXX()`使用过，尽管它主要是在存在一对一的模板到钩子关系时使用的。

一个可能的建议。对于模板方法`stuff()`：

*   如果`stuff()`主要是围绕单个挂钩的简单控制逻辑，请命名挂钩`doStuff()`（在上面的示例中似乎就是这种情况）

*   如果`stuff()`编排了多个钩子，请独立命名，`Hook`后缀名，不要*将*它们命名为与模板相同的名称（在这种情况下，应该没有`stuffHook()`方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T14:33:40.423

没有关于它的约定。但我更愿意看到更有意义的名字。例如`forceRender`,或类似的东西`renderNow`，`renderImmideately`它说明了它以某种方式呈现的事实，而不仅仅是`render`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T14:35:27.293

**模板方法模式**没有关于命名约定的任何此类指南。但是请给出适当的名称，以便它清楚地解释方法的**意图**，并且将来更容易**维护**。

# c# - 如何在 c# 中使用 openxml 查找与段落相关的选项卡数？

> ID：14564164
> 
> 赞同：1
> 
> 时间：2013-01-28T14:26:42.227
> 
> 标签：c#, ms-office, openxml

如何在 c# 中使用 openxml 找到与段落相关的选项卡数？

例如：

```
 test paragraph1
              test paragraph2 
```

想象第一段有一个制表符空间，第二段有两个制表符空间。我想在 c# 中使用 open xml 找到类似的东西，但是如何？

这个帖子有关系吗？

[c-sharp-tab-escape-character](https://stackoverflow.com/questions/5787/c-sharp-tab-escape-character)

[转义序列](http://msdn.microsoft.com/en-us/library/h21280bw.aspx)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T16:31:39.837

Open XML 将使用闲置的 xml 在段落中包含选项卡

```
<w:r>
  <w:tab />
  <w:t>Paragraph one</w:t>
</w:r> 
```

以下代码将满足您在 C# 中的要求：

```
XNamespace W = @"http://schemas.openxmlformats.org/wordprocessingml/2006/main";
using (
    WordprocessingDocument document =
        WordprocessingDocument.Open(@"YourDocPath\tabs_in_text.docx", true))
{
    var body = document.MainDocumentPart.Document.GetFirstChild<Body>();
    var paras = body.Elements<Paragraph>();

    foreach (var para in paras)
    {
        //Ver. 1
        //var xml = XElement.Parse(para.OuterXml);
        // var count = xml.Descendants(W + "tab").Count();

        //Ver. 2
        var tabElements = para.Descendants<TabChar>();
        var count = tabElements.Count(); // Collect the counts into array or dictionary for your usage.
    }
} 
```

希望这可以帮助。

# unix - Unix上的文本替换

> ID：14564168
> 
> 赞同：0
> 
> 时间：2013-01-28T14:27:06.620
> 
> 标签：unix

我想在`Unix`系统上用以下语句替换这些语句，有人知道我该怎么做吗？

```
/www/docs/syndrome.ms.fcm 
```

经过

```
$_SERVER['DOCUMENT_ROOT'] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T14:28:43.047

是的，使用[sed](/questions/tagged/sed "显示标记为“sed”的问题")：

```
sed -i "s@/www/docs/syndrome.ms.fcm@\$_SERVER['DOCUMENT_ROOT']@g" $(
    grep -l "/www/docs/syndrome.ms.fcm" *files
) 
```

如果您没有`-i`开关：

```
for f in $(grep -l "/www/docs/syndrome.ms.fcm" *files); do
    sed "s@/www/docs/syndrome.ms.fcm@\$_SERVER['DOCUMENT_ROOT']@g" "$f" > newfile &&
    mv newfile "$f"
done 
```

# actionscript-3 - 如何将事件侦听器添加到数字步进器的文本框中？

> ID：14564170
> 
> 赞同：0
> 
> 时间：2013-01-28T14:27:12.693
> 
> 标签：actionscript-3, apache-flex, flex3

我有一个数字步进器，我想在其文本框中添加一个事件侦听器：

```
use namespace mx_internal;
durationStepper.inputField.addEventListener(Event.CHANGE,durationStepperTextInputChanged);

private function durationStepperTextInputChanged(event:Event):void
{ 
    use namespace mx_internal;
    trace(durationStepper.inputField.text);
} 
```

但是，事件函数不执行！我在那里设置了一个断点，但它没有达到它！我在这里想念什么？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T17:03:43.867

问题是开发人员已阻止 Change 事件冒泡。如果你去 NumericStepper 的源文件，你可以找到它。这里有两个函数，它们会阻止您获取事件。

```
override protected function createChildren():void
{
    super.createChildren();

    if (!inputField)
    {
        inputField = new TextInput();

        //some code

        //some code

        inputField.addEventListener(Event.CHANGE, inputField_changeHandler);

        addChild(inputField);
    }
}

private function inputField_changeHandler(event:Event):void
{
    // Stop the event from bubbling up.
    event.stopImmediatePropagation();

    var inputValue:Number = Number(inputField.text);
    if ((inputValue != value &&
        (Math.abs(inputValue - value) >= 0.000001 || isNaN(inputValue))) || 
        inputField.text == "")
    {
        _value = checkValidValue(inputValue);
    }
} 
```

如您所见，第二个函数有 event.stopImmediatePropagation();

在这种情况下，您有两个选择：您应该找到另一种实现逻辑的方法，或者您可以复制组件的源代码并删除此代码行。

覆盖该函数会很好，但它是私有的。

[您可以在此处](http://jwopitz.wordpress.com/2007/03/08/private-functions-in-flex-source-and-what-you-can-do-about-it/)阅读有关此常见问题的信息

我试图选择第二种方式。它完美地工作！它不仅是 *.as 文件，还有其他一些文件在其中使用。

[您可以在此处](http://it-skills.su/ifolder/com.zip)下载该组件。

# c# - System.Timers.Timer.Enabled 属性线程是否安全，因此可以从计时器的 Elapsed 事件中访问它吗？

> ID：14564173
> 
> 赞同：3
> 
> 时间：2013-01-28T14:27:18.403
> 
> 标签：c#, multithreading, timer, thread-safety

我有一个 Elapsed 方法，其中有一个 while 循环。如果计时器从另一个线程被禁用/停止，我希望这个循环停止。我可以依赖 Elapsed 方法中计时器的 Enabled 属性，还是应该创建一个“volatile bool timerEnabled”变量来确定。我的测试表明它没问题，但我想在将它投入生产之前确定这一点。

这就是我想要实现的（不是实际代码，而是关闭）

```
private volatile bool isElapsedAlreadyRunning

void myTimer_Elapsed(object sender, ElapsedEventArgs e)
{
    if (!isElapsedAlreadyRunning)   // to prevent reentrance
    {
        isElapsedAlreadyRunning = true;
        try 
        {
            while (myTimer.Enabled && some other condition)
            {
                do stuff
            }
        }
        finally
        {
            isElapsedAlreadyRunning = false;
        }
    }
}

myTimer.Start() and myTimer.Stop() are in other methods that can be called frrom other threads 
```

我正在使用 System.Timers.Timer 类

如果您有任何其他意见或看到此设计中的任何陷阱，请随时发表评论：）

谢谢

* * *

编辑 ：

伙计，穿线很难。根据答案和其他stackoverflow问题（[特别是这个答案](https://stackoverflow.com/a/7055902/7059)），这将是做到这一点的方法（我希望这次没问题）

```
public class NoLockTimer : IDisposable
{
    private readonly System.Timers.Timer _timer;

    private bool _isTimerStopped = false;
    private readonly object _isTimerStoppedLock = new object();

    public NoLockTimer()
    {
        _timer = new System.Timers.Timer { AutoReset = false, Interval = 1000 };

        _timer.Elapsed += delegate
        {
            try
            {
                while (!IsTimerStopped && some other condition) 
                {
                    // do stuff
                }
            }
            catch (Exception e)
            {
                // Do some logging
            }
            finally
            {
                if (!IsTimerStopped) 
                {
                    _timer.Start(); // <- Manual restart.
                }
            }
        };

        _timer.Start();
    }

    public void Stop()
    {
        IsTimerStopped = true;
        if (_timer != null)
        {
            _timer.Stop();
        }
    }

    private bool IsTimerStopped
    {
        get 
        {
            lock (_isTimerStoppedLock)
            {
                return _isTimerStopped;
            }
        }
        set 
        {
            lock (_isTimerStoppedLock)
            {
                _isTimerStopped = value;
            }
        }
    }

    public void Dispose()
    {
        Stop();
        if (_timer != null)
        {
            _timer.Dispose();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T14:36:44.323

不，这不安全。Elapsed 事件处理程序在线程池线程上调用。您无法预测该线程何时实际调用您的方法，这取决于进程中正在运行的其他 TP 线程。同时进行两个通话在技术上是可行的。这使得 isElapsedAlreadyRunning 变量上的*volatile*关键字不足以确保该方法是线程安全的，您必须改用*lock*关键字或 Monitor.TryEnter()。

当您将 Timer 的 AutoReset 属性设置为 false 时，此问题就会消失。确保在 finally 块中重新启动计时器，Timer.Elapsed 事件的另一个令人讨厌的问题是异常在没有诊断的情况下被吞没。System.Threading.Timer 是一个全面的更好的计时器，这样的惊喜更少。

Timer.Enabled 属性也有类似的问题，你总是会看到很晚。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T14:33:40.887

你的后卫`isElapsedAlreadyRunning`显然不是线程安全的。

但是您可以简单地用`lock(...) { ...}`语句替换它。

# wpf - 如何将子实体详细信息字段绑定到文本框？

> ID：14564183
> 
> 赞同：1
> 
> 时间：2013-01-28T14:27:46.700
> 
> 标签：wpf, entity-framework, data-binding, telerik

我的 RadGridView 通过父实体的导航属性绑定到子记录。用户可以在网格中编辑记录。现在我还想允许在网格之外编辑子记录。在网格中选择记录后，您可以使用文本框对其进行编辑。我似乎无法为每个文本框找到正确的绑定语句。我的工作子网格 XAML 看起来像这样：

```
<telerik:RadGridView Name="childGrid" ItemsSource="{Binding ChildEntitiesNav, Mode=TwoWay}" IsSynchronizedWithCurrentItem="True" AutoGenerateColumns="False">
     <telerik:RadGridView.Columns>
          <telerik:GridViewDataColumn DataMemberBinding="{Binding ChildFieldOne}" Header="Child Field One"/>
          <telerik:GridViewDataColumn DataMemberBinding="{Binding ChildFieldTwo}" Header="Child Field Two" /> 
```

我添加了与每个网格列对应的文本框，但我无法显示任何数据。我试过这些文本框绑定语句：

`Text="{Binding Path=ChildEntitiesNav.ChildFieldOne}`

和`Text="{Binding Path=ChildFieldOne}`

我首先使用 WPF 和实体框架数据库。**通过父导航属性编辑子详细信息实体的正确绑定语句是什么？**

提前致谢。

**回答：**安德烈的回答让我找到了解决方案。我只需要将我的文本框绑定到网格的 SelectedItem（而不是绑定到子实体）。我将网格名称作为 DataContext 添加到我的文本框中：

```
<TextBox Name="ChildFieldTextBox" Text="{Binding Path=ChildFieldName, Mode=TwoWay, ValidatesOnExceptions=true, NotifyOnValidationError=true}" DataContext="{Binding ElementName=childGrid, Path=SelectedItem, Mode=TwoWay}"  /> 
```

这些链接有帮助：

[这里](http://www.telerik.com/community/forums/wpf/gridview/bind-a-textbox-text-to-the-current-item-of-a-radgridview.aspx)和[这里。](http://www.telerik.com/help/wpf/radgridview-selection-programmatic-selection.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T10:53:33.053

[这](http://andreygordeev.com/updating-a-property-of-a-control-based-on-a-property-of-datagrids-selected-item/)是一篇可能对您有所帮助的文章。它描述了如何将控件绑定到 DataGrid 的选定项的属性。

或者您可以将`SelectedChildEntityNav`属性添加到您的 ViewModel。RadGridView 声明将如下所示：

```
<telerik:RadGridView Name="childGrid" IsSynchronizedWithCurrentItem="True" AutoGenerateColumns="False"
ItemsSource="{Binding ChildEntitiesNav, Mode=TwoWay}"
SelectedItem="{Binding SelectedChildEntityNav, Mode=TwoWay}"> 
```

之后，您可以将文本框绑定到`SelectedChildEntityNav`的属性。

# iphone - Xcode Scrollview 慢

> ID：14564186
> 
> 赞同：0
> 
> 时间：2013-01-28T14:27:57.960
> 
> 标签：iphone, ios, uiscrollview

我在滚动视图中创建了一个标签。for循环计数超过1000。当时滚动很慢。如果数据量较少（200、300，...），则其滚动顺畅。我正在使用以下代码创建标签。

```
UILabel     *modelLabel;
UIButton    *modelButton;

for (int i = 0; i < [modelArray count]; i++)
{
    modelButton                 = [UIButton buttonWithType:UIButtonTypeCustom];
    modelButton.frame           = CGRectMake(0.0, (i * LABEL_HEIGHT), LABEL_WIDTH, LABEL_HEIGHT);
    modelButton.tag             = i+100;
    [modelButton addTarget:nil action:@selector(modelButtonAction:) forControlEvents:UIControlEventTouchUpInside];
    [modelScrollView addSubview:modelButton];
    modelLabel                  = [[UILabel alloc] initWithFrame:CGRectMake(0.0, (i * LABEL_HEIGHT), LABEL_WIDTH, LABEL_HEIGHT)];
    modelLabel.text             = [NSString stringWithFormat:@"%@", [[modelArray objectAtIndex:i] valueForKey:@"Model"]];
    modelLabel.tag              = i+1000;
    modelLabel.backgroundColor  = [UIColor clearColor];
    modelLabel.textColor     = [UIColor grayColor];
    modelLabel.alpha         = 0.5;
    modelLabel.textAlignment    = UITextAlignmentCenter;
    modelLabel.font             = EUROSLITE_FONT(14);
    [modelScrollView addSubview:modelLabel];
}

[modelScrollView setContentSize:CGSizeMake(280.0, ([modelArray count] * LABEL_HEIGHT))]; 
```

我该如何解决这个问题？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T14:45:24.783

这发生在您身上，因为您将许多东西加载到内存中

正如上面的评论所说，使用`UITableView`.

虽然如果你想要更多的控制，并且你决定使用滚动视图，你必须实现延迟加载。这样做是在实际需要显示标签时而不是在初始化期间分配和放置标签。`scrollViewDidScroll:`通过将视图控制器设置为委托并从方法中获取 contentOffset，您将能够知道这一点。同样在识别出您需要删除子视图以清除内存后

你可以[在这里看到很好的例子](http://developer.apple.com/library/ios/#samplecode/PageControl/Introduction/Intro.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T14:44:57.957

我觉得这是因为 ios 试图在内存中创建并保留很多这些视图，而不是在它们滚动时动态创建它们（我使用那个词对吗？）。使用具有重用标识符的 UITableView 会快得多。这将阻止 iO 为您创建的每个视图创建新的内存分配。创建一个自定义 UTTableViewCell，其中包含通过重用标识符创建的所需标签和按钮。

```
- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier 
```

您应该能够在网络上找到大量资源来创建具有自定义样式的 UITableView。如果您需要水平滚动 UITableView 看看[EasyTableView](http://github.com/alekseyn/EasyTableView)。

# javascript - 如何在 Meteor 中动态更新/设置集合的子属性？

> ID：14564188
> 
> 赞同：4
> 
> 时间：2013-01-28T14:28:04.627
> 
> 标签：javascript, mongodb, meteor

我想在我的代码中指定要在数据库更新中动态设置/更新的属性。像这样的东西：

```
var fieldname = "firstname"
var name = "loomi"
Meteor.users.update({_id:Meteor.user()._id},
                    {$set:{"profile."+fieldname: name}}) 
```

（个人资料 [字段名] 顺便说一句不起作用。）

上面的结果应该和这个一样：

```
Meteor.users.update({_id:Meteor.user()._id},
                       {$set:{"profile.firstname": "loomi"}}) 
```

请问我怎样才能以一种简洁的方式实现这一点？（没有让整个对象进行操作并将整个对象送回。）

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-28T14:58:44.593

您目前无法在对象文字中定义变量键。相反，您必须构建对象，然后传递它：

```
var $set = {};
$set['profile.' + fieldname] = name;
Meteor.users.update({_id:Meteor.user()._id}, { $set: $set }); 
```

* * *

[更新]

ECMAScript 6 已经定义了对对象字面量/初始化器中[计算键的支持。](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Object_initializer#Computed_property_names)

因此，使用[ES6 兼容引擎](https://kangax.github.io/compat-table/es6/)，现在可以写成：

```
Meteor.users.update(
    { _id: Meteor.user()._id },
    { $set: { ['profile.' + fieldname]: name } }
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-29T22:33:11.670

这对我有用：

```
 var $set = {};
    $set['profile.fieldname'] = 'the name';
    Meteor.users.update({_id:Meteor.user()._id}, { $set: $set }, function(error){
        if(error)
            console.log(error.reason)
    }); 
```

# .net - 在执行期间更改网络服务的地址

> ID：14564193
> 
> 赞同：1
> 
> 时间：2013-01-28T14:28:08.723
> 
> 标签：.net, web-services

我有一个使用 web 服务的 windows 应用程序。我需要根据它使用的环境（测试/开发/生产）动态添加 web 服务 url。更改后的 url 应该反映在 app.config ，refrence.vb.current 我正在使用配置服务引用选项。但是每次我需要更改环境时，我都需要更改地址并构建解决方案。有什么办法可以在不构建解决方案的情况下更改地址。

当我们使用配置服务参考选项时，所有文件都使用新地址更新？(app.config,refrence.vb,reference.svcmap,configuration.svcinfo,configuration91.svcinfo)

谢谢 ！！！

# php - PHP创建Excel文件，变音符号问题

> ID：14564197
> 
> 赞同：1
> 
> 时间：2013-01-28T14:28:20.770
> 
> 标签：php, excel, character-encoding, header, content-type

您好，我正在使用 PHP 创建一个 Excel 文件。在打印出一些数据之前，我正在设置标题：

```
header('Content-type: application/vnd.ms-excel; charset=utf-8'); 
```

然后我插入类似的东西：

```
echo '<table><tr><td>täääst</td></tr></table>'; 
```

我的问题是 ä 没有在 excel 文件中正确显示。

当我打开显示以下内容的文件时，我也遇到了错误：

您尝试打开的文件“filename.xls”的格式与文件扩展名指定的格式不同。在打开文件之前，请确认文件没有损坏并且来自受信任的来源。您现在要打开文件吗？

你能帮我吗？先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T14:29:52.577

您不是在创建 excel 文件。您正在创建一个 HTML 文件并告诉 excel 假装它是一个 .xls。这就是您收到“不同格式”警告的原因。

使用[PHPExcel](http://phpexcel.codeplex.com/)创建本机 excel 文件（.xls 或 .xlsx）。

# sparql - 将用户查询转换为 SPARQL 查询

> ID：14564200
> 
> 赞同：1
> 
> 时间：2013-01-28T14:28:28.943
> 
> 标签：sparql

我正在为我的课堂项目构建一个电影本体。我的问题是如何将用户输入的查询（通过提供的网页）集成到 SPARQL 查询并通过本体从数据库中获取答案列表。

我有一些将本体映射到我的数据库的知识。请为此提供解决方案。提前致谢。（我正在使用 Protege 和 onpro 插件进行映射）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-03-25T04:30:30.613

如果您的意思是将用户查询转换为机器可理解的查询，这不是一件容易的事。这是问答 (QA) 领域的一个问题，需要复杂的工作。

构建问答系统的三个步骤包括问题分析、文档（数据库）分析和答案提取。这三个中的每一个也包含不同的任务。例如，问题分析包括特征选择和提取、构建分类器并对其进行评估以获得预期答案类型（EAT）。

但是，如果您的查询具有静态格式，那么您可以要求用户以该格式提出他们的查询，然后，您可以更轻松地将用户查询与 SPARQL 查询匹配并获得答案。就个人而言，我认为你应该从使用 SPARQL 查询开始，或者使用基于关键字的界面而不是基于文本的界面，如果你想让你的工作变得简单，因为这种方法适用于小型项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T16:06:03.780

用户查询是什么意思？文本搜索？多面搜索？混合物？别的东西？对我来说，这并不清楚，一些细节将有助于理解。

还有一个例子实际上是理想的。如果可能的话，就像“用户查询”和“sparql 等效”一样。

# dns - Google App Script 中有没有办法获取 DomainUser 的上次登录时间？

> ID：14564206
> 
> 赞同：0
> 
> 时间：2013-01-28T14:28:49.383
> 
> 标签：dns, google-apps-script, provisioning

我已经为我的域的用户配置了许多帐户。

我需要向不活跃的用户发送一些提醒，因为信息正在在线传递到他们的帐户，如果他们没有登录，他们可能会丢失信息。

我有什么方法可以在 Google App Script 框架中检索用户或用户组的最后登录时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-22T06:00:58.827

目前无法获取该信息，您可以在[问题跟踪器](https://code.google.com/p/google-apps-script-issues/issues/list)上提出增强请求，您唯一可以了解的是域用户是否已登录一次并[同意使用条款](https://developers.google.com/apps-script/reference/domain/domain-user#getAgreedToTerms%28%29)

# symfony1 - 将值传递给表单

> ID：14564217
> 
> 赞同：0
> 
> 时间：2013-01-28T14:29:18.520
> 
> 标签：symfony1, symfony-1.4, symfony-forms

我有一个表单，我想显示一个选择列表，用户可以在其中选择一个项目并保存。

我需要做的是将一个值传递给表单：

```
$form = new TestForm($id) 
```

那么我如何`$id`在我的`Testform`班级中获得价值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T14:08:25.097

以下似乎有效：

```
$id = $this->getOption('id'); 
```

和

```
TestForm(array(),array('id'=>$id)) 
```

# ruby - 在 Ruby 中通过 Tempfile 写入文件

> ID：14564222
> 
> 赞同：6
> 
> 时间：2013-01-28T14:29:46.853
> 
> 标签：ruby, csv, temporary-files

我有以下后台作业，它写入 csv 文件并通过电子邮件发送出去。我正在使用 Tempfile 类，因此在将文件通过电子邮件发送给用户后会删除该文件。目前，当我查看 csv 文件时，我生成的结果如下所示：

```
["Client Application"    "Final Price"   "Tax"   "Credit"    "Base Price"    "Billed At"     "Order Guid"    "Method of Payment Guid"    "Method of Payment Type"]
["web"   nil     nil     nil     nil     nil     nil     "k32k313k1j3"   "credit card"] 
```

请忽略数据，但问题是，它是直接以 ruby​​ 格式写入文件的，而不是删除“”和 [] 字符。

请看下面的代码：

```
class ReportJob
@queue = :report_job

 def self.perform(client_app_id, current_user_id)
  user = User.find(current_user_id)
  client_application = Application.find(client_app_id)
  transactions = client_application.transactions
  file = Tempfile.open(["#{Rails.root}/tmp/", ".csv"]) do |csv|
    begin
     csv << ["Application", "Price", "Tax", "Credit", "Base Price", "Billed At", "Order ID", "Payment ID", "Payment Type"]
     transactions.each do |transaction|
      csv << "\n"
      csv << [application.name, transaction.price, transaction.tax, transaction.credit, transaction.base_price, transaction.billed_at, transaction.order_id, transaction.payment_id, transaction.payment_type]
    end
   ensure
    ReportMailer.send_rev_report(user.email, csv).deliver
    csv.close(unlink_now=false)
    end
  end
end

end 
```

这会是使用 tempfile 类而不是 csv 类的问题吗？或者我可以做些什么来改变它被写入文件的方式？

在邮件程序中添加用于读取 csv 文件的代码。我目前收到一个 TypeError，上面写着“无法将 CSV 转换为字符串”。

```
class ReportMailer < ActionMailer::Base
 default :from => "test@gmail.com"

  def send_rev_report(email, file)
     attachments['report.csv'] = File.read("#{::Rails.root.join('tmp', file)}")
      mail(:to => email, :subject => "Attached is your report")
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-28T14:36:36.783

问题是您实际上并没有将 csv 数据写入文件。您正在将数组发送到文件句柄。我相信你需要类似的东西：

```
Tempfile.open(....) do |fh|
    csv = CSV.new(fh, ...)
    <rest of your code>
end 
```

正确设置 CSV 输出过滤。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-05-20T22:05:52.290

我更喜欢做

```
tempfile = Tempfile.new(....)
csv = CSV.new(tempfile, ...) do |row|
  <rest of your code>
end 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-05-05T00:22:49.247

这就是我的做法。

```
patient_payments = PatientPayment.all

Tempfile.new(['patient_payments', '.csv']).tap do |file|
  CSV.open(file, 'wb') do |csv|
    csv << patient_payments.first.class.attribute_names

    patient_payments.each do |patient_payment|
      csv << patient_payment.attributes.values
    end
  end
end 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-28T15:14:58.960

试试这个：

```
Tempfile.open(["#{Rails.root}/tmp/", ".csv"]) do |outfile|
  CSV::Writer.generate(outfile) do |csv|
    csv << ["Application", "Price", "Tax", "Credit", "Base Price", "Billed At", "Order ID", "Payment ID", "Payment Type"]
    #...
  end
end 
```

# sql - SQL Server 多行查询与分组依据

> ID：14564226
> 
> 赞同：2
> 
> 时间：2013-01-28T14:29:55.760
> 
> 标签：sql, tsql, select

我有类似的数据

```
╔══════╦══════════╦═══════╗
║ DEPT ║ EMPLOYEE ║ IMAGE ║
╠══════╬══════════╬═══════╣
║    1 ║        1 ║ Y     ║
║    1 ║        2 ║ N     ║
║    2 ║        3 ║ N     ║
║    2 ║        4 ║ N     ║
╚══════╩══════════╩═══════╝ 
```

从查询**中，我只想获得图像 = 'N' 的部门**

所以这**应该返回 dept 2**

我将如何在 SQL Server Select 语句中执行此操作

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T14:30:47.600

```
SELECT Dept
FROM   tableName
GROUP  BY DEPT
HAVING SUM(CASE WHEN [Image] = 'N' THEN 1 ELSE 0 END) = COUNT(*) 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!3/a92f0/2)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-28T14:36:38.947

```
SELECT Distinct Dept from TableName where Image = 'Y' 
```

但是您的示例将带回 Dept 1 AND Dept 2，因为 Dept 1 的第二条记录在 Image 下的值为“N”。你不会只是回到第 2 部门。

# regex - Oracle 正则表达式匹配美国电话号码格式

> ID：14564231
> 
> 赞同：3
> 
> 时间：2013-01-28T14:30:05.930
> 
> 标签：regex, oracle, regexp-like

Oracle 正则表达式 仅匹配以下格式的美国电话号码。

`(NNN) NNN-NNNN`或`NNN-NNN-NNNN`或`NNNNNNNNNN`

我已经尝试过并想出了这个：

```
with test as
(
select '(444) 123-6780' as testcol from dual
union
select '444123-6780'                from dual
union
select '6741236780'                from dual
union
select '(445) 123-6781'            from dual
union
select '447-127-6787'            from dual
union
select '447-127-3333333333'            from dual
)
SELECT *
FROM test
WHERE REGEXP_LIKE(testcol, '^\(?\d{3}\)?([[:blank:]|-])?\d{3}-?\d{4}$'); 
```

结果 ：

```
(444) 123-6780  -- valid
(445) 123-6781  -- valid
444123-6780     -- not valid
447-127-6787    -- valid
6741236780      -- valid 
```

如您所见，我收到了`444123-6780`( `NNNNNN-NNNN`) 格式，这是我不需要的。

有没有办法阻止上述格式不匹配？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-16T11:40:32.470

```
REGEXP_LIKE(testcol,'^(\(\d{3}\))([[:blank:]])\d{3}-\d{4}$|^\d{3}(-)\d{3}(-)\d{4}$|^\d{10}$') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T14:36:58.297

试试这个 reg ex .. 它会帮助你

```
REGEXP_LIKE(testcol,'^\([0-9]{3}\)[:space:]?[0-9]{3}(-|[:space:])?[0-9]{4}$|^[0-9]{3}-?[0-9]{3}-?[0-9]{4}$') 
```

来源： http: [//psoug.org/snippet/Regular-Expressions--RegExp-examples-3_859.htm](http://psoug.org/snippet/Regular-Expressions--RegExp-examples-3_859.htm)

# php - pthread 线程对象重置它们的状态

> ID：14564234
> 
> 赞同：8
> 
> 时间：2013-01-28T14:30:20.003
> 
> 标签：php, multithreading, pthreads, shared-memory

最近在使用扩展[pthreads](http://php.net/manual/en/intro.pthreads.php)时，我发现了一个异常。我有一个具有内部状态的简单对象：

```
class Sum {
    private $value = 0;
    public function add($inc)  { $this->value += $inc; }
    public function getValue() { return $this->value; }
} 
```

现在我创建了一个对这个对象执行某些操作的 Thread 类：

```
class MyThread extends Thread {
    private $sum;

    public function __construct(Sum $sum) {
        $this->sum = $sum;
    }

    public function run(){
        for ($i=0; $i < 10; $i++) {
            $this->sum->add(5);
            echo $this->sum->getValue() . " ";
        }
    }
} 
```

在我的主函数中，我创建了一个 Sum 对象，将其注入线程并启动它：

```
$sum = new Sum();
$thread = new MyThread($sum);
$thread->start();
$thread->join();
echo $sum->getValue(); 
```

我预计结果是`50`，因为线程必须将值增加 10 倍 5。但我得到了一个`0`！

更奇怪的是，不是同步回主线程失败，而是线程似乎在途中忘记了它的内部状态：`run()`方法内部的 echo 输出不是预期的`5 10 15 20 25 30 35 40 45 50`，而是`0 0 0 0 0 0 0 0 0 0`. 没有人干扰线程 - 为什么它不保留其状态？

* * *

旁注：如果我不启动线程而是直接在主线程（`$thread->run();`）中调用 run() 方法，结果仍然相同。但是，如果我现在删除`extends Thread`类声明中的 ，它可以完美运行并返回预期的`5 10 15 20 25 30 35 40 45 50`.

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-28T15:40:17.220

任何不是从 pthreads 定义派生的对象都将在将其设置为从 pthreads 派生的对象的成员时被序列化。

+= 和 [] 等操作在内部使用指针，序列化与其他对象的指针不兼容。在介绍页面的手册中，它指出任何打算由多个上下文操作的对象都应该扩展 Stackable、Thread 或 Worker，例如

```
<?php
class Sum extends Stackable {
    private $value = 0;
    public function add($inc)  { $this->value += $inc; }
    public function getValue() { return $this->value; }
    public function run(){}
}

class MyThread extends Thread {
    public $sum;

    public function __construct(Sum $sum) {
        $this->sum = $sum;
    }

    public function run(){
        for ($i=0; $i < 10; $i++) {
            $this->sum->add(5);
            echo $this->sum->getValue() . " ";
        }
    }
}

$sum = new Sum();
$thread = new MyThread($sum);
$thread->start();
$thread->join();
echo $sum->getValue();
?> 
```

如果 Sum 不使用指针，您可以选择在连接后从线程对象中检索引用。

这些都是简单的操作，您不需要同步。您应该同步的唯一时间是您计划等待一个对象或通知一个对象。

与 pthread 捆绑的对象非常适合这种环境，并且永远不会被序列化。

请务必阅读手册中的介绍以及您希望使用的方法中的所有示例，以确切了解什么是什么，然后随时问为什么:)

我知道 PHP 的用户不习惯做研究，但我们在这里挑战极限，你会发现有正确的方法来做不正确的事情，其中​​大多数都记录在示例中，以及任何不是我肯定会在 SO 上从我身上提取出来，并最终找到它的文档方式。

我不确定您给出的示例是否特别测试了对象，但是您提供的代码不必是两个对象，也不应该是两个对象，请考虑以下内容：

```
<?php
class MyThread extends Thread {
    public $sum;

    public function run(){
        for ($i=0; $i < 10; $i++) {
            $this->add(5);

            printf("%d ", $this->sum);
        }
    }

    public function add($num) { $this->sum += $num; }
    public function getValue() { return $this->sum; }
}

$thread = new MyThread();
$thread->start();
$thread->join();
var_dump($thread->getValue());
?> 
```

查看更多功能并进行解释可能对您很有用，所以这里有一个与您类似的示例：

```
<?php
class MyThread extends Thread {
    public $sum;

    public function __construct() {
        $this->sum = 0;
    }

    public function run(){
        for ($i=0; $i < 10; $i++) {
            $this->add(5);

            $this->writeOut("[%d]: %d\n", $i, $this->sum);
        }

        $this->synchronized(function($thread){
            $thread->writeOut("Sending notification to Process from %s #%lu ...\n", __CLASS__, $thread->getThreadId());
            $thread->notify();
        }, $this);
    }

    public function add($num) { $this->sum += $num; }
    public function getValue() { return $this->sum; }

    /* when two threads attempt to write standard output the output will be jumbled */
    /* this is a good use of protecting a method so that 
        only one context can write stdout and you can make sense of the output */
    protected function writeOut($format, $args = null) {
        $args = func_get_args();
        if ($args) {
            vprintf(array_shift($args), $args);
        }
    }
}

$thread = new MyThread();
$thread->start();

/* so this is synchronization, rather than joining, which requires an actual join of the underlying thread */
/* you can wait for notification that the thread is done what you started it to do */
/* in these simple tests the time difference may not be apparent, but in real complex objects from */
/* contexts populated with more than 1 object having executed many instructions the difference may become very real */
$thread->synchronized(function($thread){
    if ($thread->getValue()!=50) {
        $thread->writeOut("Waiting for thread ...\n");
        /* you should only ever wait _for_ something */
        $thread->wait();
        $thread->writeOut("Process recieved notification from Thread ...\n");
    }
}, $thread);

var_dump($thread->getValue());
?> 
```

这在一些简单的示例中结合了一些更高级的功能，并进行了评论以帮助您。在共享对象的主题上，如果 Thread 对象包含其他线程或堆栈所需的某些功能和数据，则传递它并没有错。您应该旨在使用尽可能少的线程和对象来完成工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T14:39:40.453

您的问题是您正在从主线程和 MyThread 线程访问变量。CPU 缓存变量，它在 MyThread 的缓存中更新，但在主线程的缓存中没有更新，因此您的两个线程永远不会看到其他线程的更改。在 Java / C 等中有关键字 volatile 但我不知道它是否存在于 PHP 中。

我认为您应该尝试调用 sum synchronized 中的方法（[http://php.net/manual/en/thread.synchronized.php](http://php.net/manual/en/thread.synchronized.php)）

例如，而不是：

```
 $this->sum->add(5); 
```

称呼：

```
 $this->synchronized(function($thread){
            $thread->sum->add(5);
        }, $this); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-31T23:43:26.907

我还以为我做错了什么。如前所述 [] 和其他使用指针的操作将不起作用。这是解决方法：

```
class MyThread extends Thread {
    public $table;

    public function __construct($data) {
        $this->table= $data;
    }

    public function run(){
        //Set temporary array with current data
        $temp = $this->table;
        for ($i=0; $i < 10; $i++) { 
            //Add new elements to the array
            $temp[] = $i . ' New Value';
        }
        //Overwrite class variable with temporary array
        $this->table = $temp;
    }
} 
```

这有效，因为我们在临时函数变量上使用 [] 操作，而不是将其设置为类变量。

更好的例子为什么有必要：

```
class MyThread extends Thread {
        public $table;

        public function __construct($data) {
            $this->table= $data;
        }

        public function run(){
            $this->addElem();
            $temp = $this->table;
            $temp[] = 1;
            $this->table = $temp;
        }

        protected function addElem() {
            $temp = $this->table;
            $temp[] = $i . ' New Value';
            $this->table = $temp;
        }
    } 
```

因此，我们可以在多个函数中使用并向变量添加新元素。这同样适用于 += 和其他运算符，但您需要它的临时变量。

易于扩展功能：

```
protected function overload($name, $val, $type = '[]'){
        $temp = $this->$name;
        switch($type){
            case '[]':
                $temp[] = $val;
                break;
            case '+=':
                $temp += $val;
                break;
            case '.=':
                $temp .= $val;
                break;
        }
        $this->$name = $temp;
    } 
```

Eval 可以在这里工作，但我发现这更安全。

# clearcase - 如何将视图从 ClearCase 注册表移动到新的 ClearCase 注册表

> ID：14564235
> 
> 赞同：1
> 
> 时间：2013-01-28T14:30:21.000
> 
> 标签：clearcase

我只有一个 ClearCase 注册表。但我需要创建另一个以增强安全性。取消注册vob并将其注册到新注册表中很容易，但是如何移动所有视图？我说的是两千次观看。所以，我需要一种机制来将一个vob 的所有视图移动到一个新的注册表中。是否可以？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T14:56:04.060

基本上，您需要有一个脚本：

*   `rmtag`
*   `unregister`
*   `mktag`
*   `register`再次

（来自[`rgy_admin`](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/index.jsp?topic=/com.ibm.rational.clearcase.books.cc_admin.doc/rgy-admin.htm)：）

![在此处输入图像描述](../Images/798e54fd7199ec01d0029bb8e3592dc8.png)

但这会使视图无法操作：用户必须删除它们（简单删除，`mkview`不需要），并[重建 view.dat](http://www-01.ibm.com/support/docview.wss?uid=swg21204161)（用于快照视图）

也许将**您的第二个注册表服务器声明为您的第一个注册表的备份会更容易，并且一旦两个服务器同步，进行 rgy 切换**（从“ [`rgy_backup`](https://publib.boulder.ibm.com/infocenter/cchelp/v7r1m0/index.jsp?topic=/com.ibm.rational.clearcase.cc_admin.doc/topics/c_rgy_backup.htm)”）。

# r - 如何删除名称存储在R中其他字符串变量中的数据帧

> ID：14564237
> 
> 赞同：1
> 
> 时间：2013-01-28T14:30:32.053
> 
> 标签：r

```
state1 <- "CA"
state2 <- "IL"
state3 <- "FL" 
```

CA、IL 和 FL 是三个数据帧。如何编写一个循环来使用 paste("state", i) 删除这些数据帧，其中 i 是一个整数？假设有许多这样的数据帧，因此将它们一一删除将是低效的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T14:38:09.873

以下是方法，但您永远不必这样做：

```
CA <- data.frame()
IL <- data.frame()
FL <- data.frame()
ls()
[1] "CA" "FL" "IL"

rm(list=c("CA", "IL", "FL"))
ls()
character(0) 
```

相反，您应该做的是将所有这些对象放在一个列表中，然后操作该列表：

```
states <- list(
  CA = data.frame(),
  IL = data.frame(),
  FL = data.frame()
)

str(states)
List of 3
 $ CA:'data.frame': 0 obs. of  0 variables
 $ IL:'data.frame': 0 obs. of  0 variables
 $ FL:'data.frame': 0 obs. of  0 variables 
```

由于您的列表是单个对象，因此您可以使用简单的方法删除`rm()`：

```
rm(states)
ls()
character(0) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T14:35:23.387

如果您在字符向量中有数据框的名称，`states`那么您可以使用 `rm(list=states)`

现在有多种获取方式`states`

只需创建它并在创建新状态变量时对其进行更新。例如

```
CA <- data.frame()
states <- "CA"

IL <- data.frame()
states <- c(states, "IL")

FL <- data.frame()
states <- c(states, "FL") 
```

或者

如果你在变量中有对象的名称，比如`state1`等等`state2`。那么你可以按照大卫的建议去做

```
states = sapply(paste("state", 1:2, sep=""), get)
rm(list = states) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-28T14:35:32.293

您*可以*像这样删除它们：

```
rm(list=sapply(paste("state", 1:50, sep=""), get)) 
```

*但是*，这是存储数据的不好方法（请参阅[将数据保留在变量名之外](http://nedbatchelder.com/blog/201112/keep_data_out_of_your_variable_names.html)）。更好的做法是将所有数据框保存为命名列表，以便您可以通过以下方式访问它们：

```
states[["CA"]]
states[["IL"]] 
```

并使用以下命令一次性删除它们：

```
rm(states) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-28T14:51:53.767

使用`rm`and `get`，但使用`do.call`，更优雅，因为我们操作指令列表。

我假设 N 是状态数。

```
do.call(rm,lapply(paste("state", 1:N, sep=""), get)) 
```

# jquery - JQgrid 与 Kendo Grid

> ID：14564240
> 
> 赞同：3
> 
> 时间：2013-01-28T14:30:35.213
> 
> 标签：jquery, jqgrid, kendo-ui

谁能告诉我 Kendo UI Grid 和 JQgrid 之间的基本区别？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T15:53:43.057

从我个人的角度来看，KendoUI 优于 jqGrid + jQueryUI 的优势在于，在 Kendo UI 中，您拥有来自单一来源的大多数（全部？）控件，因此实际上很容易集成它们，而且它们看起来都一样。

来自 jQueryUI 的控件集成得非常好，但是您需要转到 jqGrid 来获取网格，jXYZ 来获取......而且并非所有这些都支持 jQuery UI 主题，所以看起来不一样。您最终拥有一个看起来不统一的站点/应用程序。

当然，这是我的两分钱，我同意两者都是优秀的网格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T14:55:09.727

两者都有一组可比较的功能：Kendo UI 网格在演示中整体看起来更加精致，而 jqGrid 具有广泛的功能集（如果您愿意，您可能可以组合一个功能矩阵，但只需比较演示，有jqGrid 的更多演示网格）。

Kendo UI 不是免费的，但包括各种 UI 控件，包括网格。另一方面，jqGrid 与 jQuery UI 很好地集成并且是免费的。

我还看到有用于 Kendo UI 网格的 ASP.NET MVC 和 JSP 代码示例，而 jqGrid 包括 ASP.NET MVC、ASP.NET 和 PHP 服务器端集成。但请记住，由于两者都是 JavaScript 控件，您应该能够使用您喜欢的任何后端。这些控件可能会使它更容易走出大门。

我会将您的选择基于您将在应用程序中使用的其他控件。如果您打算使用其他 Kendo UI 控件，那么您也可以继续使用网格。总体而言，Kendo UI 控制演示非常好，因此它们可能物有所值。但是我从来没有用过它们...

# android - 密度独立性测试

> ID：14564241
> 
> 赞同：0
> 
> 时间：2013-01-28T14:30:36.687
> 
> 标签：android, testing, size, screen

完成我的应用程序的编程部分后，我想使用 Android 模拟器对其进行测试。

1.  我试图让我的应用程序密度独立，现在我想用不同的模拟器设备测试它。我应该测试哪些分辨率和屏幕尺寸？您是否有一个虚拟设备列表，用于在发布之前测试您的应用程序？

2.  我应该测试哪些 api-Levels？（我的应用程序使用蓝牙）。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T14:35:06.617

基本上，这里的正确答案是“测试每一种可能性”。但这当然是一项巨大的工作。

我通常将 Nexus 设备作为基准线，它将引导您了解大多数可能和流行的尺寸。

您应该检查每一个 Android 版本，从您想要支持的最低版本开始。每个版本不仅可以对您的布局和样式做出不同的反应，而且可以不同地处理您的 java 代码。

[您可以在http://developer.android.com/distribute/promote/device-art.html](http://developer.android.com/distribute/promote/device-art.html)找到 Nexus 设备及其尺寸。 请务必按“旧设备”

除此之外，您还可以尝试使用三星和 HTC 等其他制造商的一些流行设备，因为他们也可以改变您的布局和样式的行为方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T14:35:21.183

没有神奇的防弹答案。

您可以使用此[平台版本](https://developer.android.com/about/dashboards/index.html)来收集有关最常见的 API lvls 和正在使用的设备密度的一些信息。

但最终你的问题的答案很大程度上取决于你的目标受众和他们携带的设备。最好的情况是测试尽可能多的不同配置 =) 当然从最广泛使用的配置开始。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T14:56:29.987

如果您正在设计一个特定于密度的应用程序，那么您应该测试所有可能的密度。要在各种密度的设备上测试您的应用程序，您应该为每个密度提供基本设备，例如 Samsung Nexus - xhdpi、HTC One(hdpi) 以及类似的一个用于 mdpi、ldpi 的基本设备。如果您还支持平板电脑，则具有支持不同密度的基本设备平板电脑。此外，您可以通过在清单文件 supports-screens android:anyDensity=false 中设置以下参数来避免相对于设备密度进行缩放

# user-interface - 将变量添加到 GAS 中的垂直面板

> ID：14564242
> 
> 赞同：0
> 
> 时间：2013-01-28T14:30:37.180
> 
> 标签：user-interface, google-apps-script, google-sheets

我正在处理一个*应该*将 UiApp 嵌入到活动工作表中的主工作表。我尝试使用第一行中的标签对第一部分进行编码，但我坚持让名称 [i] 出现在任务标签下的表格左侧。

我打算在每个任务标签下为每个名称显示复选框。

下面是代码：

```
function showTable() 
{
var ss = SpreadsheetApp.getActive();
var TL = ss.getRange('B3').getValue();
//SetFontWeight("bold") for TL < *This does not work either* >

var startDate = ss.getRange('B2').getValue();
var strStartDate = startDate.getDate() + "/" + (startDate.getMonth() + 1) + "/" + StartDate.getFullYear();

var counta = ss.getRange('B4').getValue();

var app = UiApp.createApplication().setHeight(375).setWidth(620)
.setTitle('This is ' + TL + "'s Team Tasks for " + strStartDate);

var panel = app.createAbsolutePanel().setId('panel').setHeight(355).setWidth(605)
.setStyleAttribute('background', 'lightCyan');

var names = ss.getRange('B11:B').getValues();

for (var i = 0; 0 < names.length; i++)   **//This is the part that does not work**
{
 var agents = app.createLabel(names[i]); 
}

var handler1 = app.createServerHandler('btnCloseWindow'); 
var btnCloseWindow = app.createButton('Close Window').addClickHandler(handler1).setStyleAttribute('background', 'lightYellow');
handler1.addCallbackElement(panel);

var myLabel0 = app.createLabel('Tasks');
var myLabel1 = app.createLabel('HW');
var myLabel2 = app.createLabel('MU');
var myLabel3 = app.createLabel('MOV');

panel.add(myLabel0, 40, 12)
panel.add(myLabel1, 100, 12)
panel.add(myLabel2, 140, 12)
panel.add(myLabel3, 175, 12)

panel.add(agents, 40, 30)

panel.add(btnCloseWindow, 490, 320)
app.add(panel);
ss.show(app);
return app;
};

function btnCloseWindow(e) 
{
var ss = SpreadsheetApp.getActive();
var app = UiApp.getActiveApplication();
app.close();
return app;
}; 
```

你如何用名字制作一个垂直面板？名称在 col B11:B 中定义，任务在标签中定义。

这是我第一次制作 UiApp，非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T22:39:09.473

像这样试试吧，我不知道整个想法应该是什么样子，但现在名字列表的部分是正确的......

```
function showTable() 
{
var ss = SpreadsheetApp.getActive();
var TL = ss.getRange('B3').getValue()  
ss.getRange('B3').setFontWeight('bold')
var startDate = ss.getRange('B2').getValue();
var strStartDate = Utilities.formatDate(startDate, ss.getSpreadsheetTimeZone(), 'dd/mm/yyyy');

var counta = ss.getRange('B4').getValue();

var app = UiApp.createApplication().setHeight(375).setWidth(620)
.setTitle('This is ' + TL + "'s Team Tasks for " + strStartDate);

var panel = app.createAbsolutePanel().setId('panel').setHeight(355).setWidth(605)
.setStyleAttribute('background', 'lightCyan');

var handler1 = app.createServerHandler('btnCloseWindow'); 
var btnCloseWindow = app.createButton('Close Window').addClickHandler(handler1).setStyleAttribute('background', 'lightYellow');
handler1.addCallbackElement(panel);

var myLabel0 = app.createLabel('Tasks');
var myLabel1 = app.createLabel('HW');
var myLabel2 = app.createLabel('MU');
var myLabel3 = app.createLabel('MOV');

panel.add(myLabel0, 40, 12)
panel.add(myLabel1, 100, 12)
panel.add(myLabel2, 140, 12)
panel.add(myLabel3, 175, 12)

var names = ss.getRange('B11:B').getValues();
Logger.log(names)
for(i=0;i<names.length;++i){
Logger.log(names[i][0]);// names is a 2D array, you only want the first and only column
if(names[i][0]!=''){ // don't show if empty
panel.add(app.createLabel(names[i][0])); //add label to the panel
}
}

panel.add(btnCloseWindow, 490, 320)
app.add(panel);
ss.show(app);

}; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-28T20:35:26.563

> var 名称 = ss.getRange('B11:B').getValues();

应该，

```
var names = ss.getRange('B11:B1').getValues(); 
```

我是如何研究的，

```
var data = ss.getRange("b11:b1").getValues();

data.forEach(function(element,index,array){Logger.log(index + " " + element )}); 
```

日志，“0 狗 1 猫 2 青蛙 3 鱼 4 仓鼠 5 狗 6 猫 7 青蛙 8 鱼 9 仓鼠 10 狗”

# wpf - 如何将一个按钮命令从一个视图路由到多个视图模型

> ID：14564244
> 
> 赞同：0
> 
> 时间：2013-01-28T14:30:45.323
> 
> 标签：wpf, c#-4.0

我在我的 WPF 应用程序中使用 MVVM 模式。在我的一个视图中，我有一个按钮，单击该按钮时使用命令与其 ViewModel 对话。我遇到的问题是我需要 ViewModel 然后与其他 ViewModel 对话以调用他们的一些公共方法。我使用 IOC (Unity) 并将容器注入到第一个 ViewModel 中，因此可以使用它访问其他容器。我不确定这是否符合 MVVM 概念。

我的所有 ViewModel 是否有可能以某种方式订阅一键单击？这些是解决此问题的推荐方法还是有更好的方法？

为了进一步解释我的应用程序，每个视图都是一个带有多个文本框的选项卡控件。在第一个选项卡上还有一个按钮和组合框。用户可以自由输入自己的数据或从组合中选择一个选项。在这种情况下，如果然后单击按钮，我需要所有选项卡根据第一个选项卡的组合中的选定项目加载其文本框。我需要以某种方式连接此按钮单击，以便将组合中的值传递给所有相关的视图模型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T14:38:32.593

您可以使用**[EventAggregator](http://msdn.microsoft.com/en-us/library/ff921122%28v=pandp.20%29.aspx)**。让命令发布其他 ViewModel 可以订阅的事件。引发事件时，他们都会收到事件，而不需要一个 VM 知道其他 VM

另一种选择是使用**[复合命令](http://www.silverlightshow.net/items/Working-with-Prism-4-Part-3-Composite-Command-and-Pub-Sub-Events.aspx)**而不是常规命令。使命令按钮使用复合命令，并让其他视图模型[注册](http://msdn.microsoft.com/en-us/library/gg405494%28v=pandp.40%29.aspx#sec3)到该复合命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T14:41:12.813

您可以通过以下几种方式进行此操作：

*   如果发生某些事情，请使用某种事件框架来通知所有订阅者：例如[Prism EventAggregator](http://msdn.microsoft.com/en-us/library/ff921122%28v=pandp.20%29.aspx)。为此，您显然需要设置 Prism。还有其他（MVVM）框架支持某种事件/消息系统，如[Caliburn.Micro](http://caliburnmicro.codeplex.com/)或[MVVMLight](http://www.google.com/search?q=mvvmlight)

*   创建一个`MasterViewModel`包含所有选项卡的所有子视图模型。这样，“主”可以从其子级订阅 PropertyChanged 事件并执行适当的操作。或者 Master 甚至可以包含您绑定的命令。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T14:44:25.263

我建议使用某种形式的“Messenger”服务。我的意思是一个实现“订阅模式”的类。

我不确定您可能使用的是哪个 MVVM 库，但如果您查看 CodePlex 上提供的“MVVM Light Toolkit”，您会在那里找到一个非常轻量级的 Messenger 实现。

基本上，每个 ViewModel 都会订阅接收特定的通知，并且带有组合框和按钮的 ViewModel 将在单击按钮时发布消息。发送消息的方式非常灵活，并且您的 ViewModel 不需要了解彼此的任何信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T14:44:54.340

如果您使用 GalaSoft 的 MVVM lite 工具包，您可以访问 Messenger，它允许您发送可以在每个视图模型中订阅的消息。

```
// Send message from command handler
Messenger.Default.Send<MyMessage>(new MyMessage());

// Register for message in view models.
Messenger.Default.Register<MyMessage>(this, MyMessageReceived);

// Method to do work
private void MyMessageReceived(MyMessage myMessage)
{
// Do Work
} 
```

# jquery - 使用 getJson 方法检查空响应

> ID：14564247
> 
> 赞同：6
> 
> 时间：2013-01-28T14:30:49.867
> 
> 标签：jquery, json, jquery-ui, autocomplete

刚刚完成一个应用程序，我需要在 json 方面再实现一件事。

我有一个 jquery 自动完成，它使用我编写的返回 json 的 Web 服务。

我需要稍微改变一下，这样如果第一个带有参数的请求返回 null，那么它将使用不带参数的默认 url 再次尝试进行主搜索。

只是为了确保我没有错过任何技巧，我说过我会问，看看是否有任何 jquery 大师有一种优雅的方式来实现这一点。

```
var cache = {},lastXhr;
var web_service_url_default = "http://json_sample.php";
var web_service_url_specific = "http://json_sample.php/?param1=hello&param2=world";

var autocomp_opt = {
        minLength: 1,
        source: function( request, response ) {
            var term = request.term;
            if ( term in cache ) {
                response( cache[ term ] );
                return;
            }

            lastXhr = $.getJSON( web_service_url_specific, request, function( data, status, xhr ) {
                cache[ term ] = data;
                if ( xhr === lastXhr ) {
                    response( data );
                }
            });
        }
}; 
```

这是我的自动完成选项变量，它输入到自动完成调用中，如下所示，并且工作正常。

```
$('.some_class').autocomplete(autocomp_opt); 
```

我需要更改它，以便如果第一个请求返回空，那么它会触发没有参数的默认请求。

一如既往地为帮助欢呼。

* * *

**更新了工作示例**

完成此操作，请参阅以下代码以防它对任何人有所帮助。它可能不是最优雅的，但无论如何它都有效。

请注意，在此示例和测试中，缓存似乎并没有很好地发挥作用，并导致请求不时被触发，因此我将其删除。现在它可以 100% 工作。

```
var autocomp_opt = {
            minLength: 1,
            source: function( request, response ) {
                var term = request.term;

                lastXhr = $.getJSON( web_service_url_specific, request, function( data, status, xhr ) {
// check if there is only one entry in the json response and if the value is null, my json script returns empty like this
                        if(data.length == 1 && data[0].value == null){
                            $.getJSON( $web_service_url_default, request, function( data, status, xhr ) {
                                response( data );
                            });
                        }else{
                            response( data );
                        }
                });
            }
        };

$('.some_class').autocomplete(autocomp_opt); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T15:06:36.363

```
if(data.length == 1 && data[0].value == null) 
{
    ...
} 
```

我设法让这个自己工作。如果对任何人有帮助，请参阅上面的示例。这可能不是最优雅的方式，但它仍然有效。干杯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T15:09:58.973

我假设“空请求返回”意味着请求失败（例如错误，不是空字符串左右）。您可以使用 $.ajax 构建您的 ajax 调用并挂钩到错误函数：

```
$.ajax({
  url: web_service_url_specific,
  data: request,
  dataType, 'json',
  success: function( data, status, xhr ) {
    // not going to question this part
    cache[ term ] = data;
    if ( xhr === lastXhr ) { response( data ); }
  },
  error: function() {
    // fallback ajax call
    $.ajax({});
  }
}); 
```

# bash - Bash 命令引用问题

> ID：14564250
> 
> 赞同：4
> 
> 时间：2013-01-28T14:31:10.173
> 
> 标签：bash, quoting

我有这个奇怪的问题，我不明白为什么会发生。对于任何 bash 忍者来说，这应该是小菜一碟。

```
OPTIONS="-auto -batch -ignore 'Path one' -ignore 'Path two' -ignore 'Path three'"
unison $OPTIONS a b 
```

我希望这会被翻译为...

```
unison -auto -batch -ignore 'Path one' -ignore 'Path two' -ignore 'Path three' a b 
```

...然后工作。但事实并非如此。运行完整命令时，我没有问题，一致就可以了。但是当我运行命令时`unison $OPTIONS a b`，齐声抱怨：

```
Usage: unison [options]
    or unison root1 root2 [options]
    or unison profilename [options]

For a list of options, type "unison -help".
For a tutorial on basic usage, type "unison -doc tutorial".
For other documentation, type "unison -doc topics".

unison was invoked incorrectly (too many roots) 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T14:33:16.103

BASH 常见问题解答条目 #50：[“我正在尝试将命令放入变量中，但复杂的情况总是失败！”](http://mywiki.wooledge.org/BashFAQ/050)

```
options=(-auto -batch -ignore 'Path one' ...)
unison "${options[@]}" a b 
```

# php - 在 PHP 中将无效的日期格式转换为另一种格式

> ID：14564253
> 
> 赞同：4
> 
> 时间：2013-01-28T14:31:15.290
> 
> 标签：php, oracle, date-format, date-formatting

我有一个 Oracle 格式的日期：

```
22-JAN 07 
```

我想把它转换成这样的东西：

```
22/01 
```

问题是，我无法使用该`date`函数，因为我要转换的字符串[与任何有效的日期格式都不匹配。](http://php.net/manual/en/datetime.formats.date.php)

我是这样尝试的：

```
date('d/m', strtotime($row['BOOKED_DATE_FROM_1'])) 
```

但这表明：

```
01/01 
```

我怎么能处理这个？谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-28T14:33:48.653

[确认工作](http://codepad.viper-7.com/6OF3ck)

```
$date = DateTime::createFromFormat('d-M y', '22-JAN 07');
echo $date->format('d/m'); 
```

# apache - .htaccess 如何强制/自动清除 URL

> ID：14564258
> 
> 赞同：1
> 
> 时间：2013-01-28T14:31:44.410
> 
> 标签：apache, .htaccess, mod-rewrite, clean-urls

我是 mod_rewrite 的新手，但我正在尽力用干净的 URL 修复我的网站。

使用 RewriteRule 我可以得到它，这样你就可以输入一个干净的 URl 并进入正确的页面，但我遇到的问题是如果使用“凌乱”的 URL，我会自动重定向到干净的 URL（这很有可能是由于用户提交的链接和内容等）

现在，我在另一个 .htaccess 论坛上找到了这段代码，它适用于一种情况，但不适用于另一种情况。我会解释：

```
# FORCE CLEAN URLS
RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s/+index\.php\?(.*)=([^\s]+) [NC]
RewriteRule ^ %1\/%2? [R=301,L] 
```

这适用于这样的地址，例如：**www.domain.com/index.php?cmd=login**它会自动重定向到**www.domain.com/cmd/login**

但是当有多个查询时问题就来了，例如：**www.domain.com/index.php ?cmd=view-profile&user=bob**

当地址中可能有多达 3 个或更多查询时，我无法弄清楚如何让它理清那种 URL。我不完全胜任正则表达式，所以我尝试修改我的代码片段到目前为止失败了。

任何帮助，将不胜感激！我希望它们是 301 重定向，这样无论使用哪种类型的干净或凌乱的 URL，网站都可以正确编入索引并符合 SEO，但我愿意接受建议！

**编辑**

在玩了几个小时的正则表达式之后，我进步了，但又被难住了。

如果我对此表示：

```
index\.php\?(.*)=([^\s]+)(&(.*)=([^\s]+))?+
$1/$2/$3/$4/$5 
```

它将匹配 index.php 之后的这 3 个 URL：

> [http://site.com/index.php?cmd=shop&cat=78](http://site.com/index.php?cmd=shop&cat=78)
> 
> [http://site.com/index.php?cmd=shop](http://site.com/index.php?cmd=shop)
> 
> [http://site.com/index.php?cmd=shop&cat=78&product=68](http://site.com/index.php?cmd=shop&cat=78&product=68)

但结果输出取决于它是什么。这些是我的结果：

> [http://site.com/cmd=shop&cat/78///](http://site.com/cmd=shop&cat/78///)
> 
> [http://site.com/cmd/shop///](http://site.com/cmd/shop///)
> 
> [http://site.com/cmd=shop&cat=78&product/68///](http://site.com/cmd=shop&cat=78&product/68///)

我不确定如何让它将某些部分视为可选部分，以便正确分组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T00:47:59.677

您需要分别处理每对参数的数量。您拥有的可用于处理一个名称/值对，然后类似地处理 2 和 3（如果需要，还可以使用 4）：

```
# To handle a single name/value pair in the query string:

RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s/+index\.php\?([^&=]+)=([^&\ ]+)(\ |$) [NC]
RewriteRule ^ /%1\/%2? [R=301,L]

# To handle 2:

RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s/+index\.php\?([^&=]+)=([^&\ ]+)&([^&=]+)=([^&\ ]+)(\ |$) [NC]
RewriteRule ^ /%1\/%2/%3/%4? [R=301,L]

# To handle 3:

RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s/+index\.php\?([^&=]+)=([^&\ ]+)&([^&=]+)=([^&\ ]+)&([^&=]+)=([^&\ ]+)(\ |$) [NC]
RewriteRule ^ /%1\/%2/%3/%4/%5/%6? [R=301,L] 
```

基本上，您在检查请求结束`&([^&=]+)=([^&\ ]+)` *之前*`(\ |$)`添加另一个，并将另一个添加`/%#/%#`到目标 URI 的末尾，其中**#**是适当的递增反向引用。

# c - 读取文件内容时出现堆块错误

> ID：14564260
> 
> 赞同：1
> 
> 时间：2013-01-28T14:31:56.587
> 
> 标签：c, heap-memory, fread

我正在尝试编写一个程序，它从文件中读取字母“A、B、C、D、E”，记下这些字符的所有实例，并忽略大于和小于符号之间的任何字符，“< 和>”。尽管文件似乎已正确打开，但 findCommonAnswers() 中的 for 循环似乎访问了受保护或不存在的值。Windows 提供异常代码 c0000005，GNU 调试器告诉我“0xXXXXX 处的堆块已在 0xXXXXX+1 处修改，请求大小为 6”。在每次调试中，数字 6 一直保持不变。代码的当前输出是“-1.#IND”，在以前的版本中，它为除常量“probabilityArrayLength”之外的所有项目返回零。如果有人可以让我了解错误的性质，将不胜感激。这是我的代码：

```
#include<stdio.h>
#include<stdlib.h>
...
...
int fsize(FILE *fp)
{

    int prev = ftell(fp);
    fseek(fp, 0L, SEEK_END);
    int sz = ftell(fp);
    fseek(fp,prev,SEEK_SET);    
  return sz;
}

double* findCommonAnswerChoices( )
{
  FILE *data;  
  data = fopen( "F:\\COMP_SCI\\APCalculusBCMultipleChoiceResults.txt", "r" );

int bufferSize = fsize( data ), totalAnswers = 0, instanceOfA = 0, instanceOfB = 0,
instanceOfC = 0, instanceOfD = 0, instanceOfE = 0, probabilityArrayLength =6,    bytesRead = 0;
int j = 0 , k;

double probOfA = 0.0, probOfB = 0.0, probOfC = 0.0, probOfD = 0.0, probOfE = 0.0;
double* probabilities = (double*)malloc( probabilityArrayLength*(sizeof(double)) );

char answers[bufferSize];

if( data==NULL )
{
    printf( "%d %s %d \n",bufferSize, " ", sizeof(data) );
    printf( "Not Enough Memory" );

}
else
{
    bytesRead = fread( answers, 0, bufferSize, data );
}

for( j = 0; j<bytesRead; j++ )
{
    if( answers[j]=='<' )
    {
        do
        {
            j++;
        }
        while( answers[j]!='>' );
    }

    switch( answers[j] )
    {

        case 'A':
            instanceOfA++;
            break;

        case 'B':
            instanceOfB++;
            break;

        case 'C':
            instanceOfC++;
            break;

        case 'D':
            instanceOfD++;
            break;

        case 'E':
            instanceOfE++;
            break;

        default:
            break;
    }

}

fclose(data);

totalAnswers = ( instanceOfA+instanceOfB+instanceOfC+instanceOfD+instanceOfE );
probOfA = ( (double)instanceOfA/(double)totalAnswers );
probOfB = ( (double)instanceOfB/(double)totalAnswers );
probOfC = ( (double)instanceOfC/(double)totalAnswers );
probOfD = ( (double)instanceOfD/(double)totalAnswers );
probOfE = ( (double)instanceOfE/(double)totalAnswers );

probabilities[0] = (double)probabilityArrayLength;
probabilities[1] = probOfA;
probabilities[2] = probOfB;
probabilities[3] = probOfC;
probabilities[4] = probOfD;
probabilities[5] = probOfE;

return probabilities;
}

 int main()
 {
double* something = findCommonAnswerChoices();
int size = (int)something[0];
int p;

for( p = 0; p<size; p++  )
{
    printf( "%g \n", something[p] );
}
free( something );
return 0;
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T14:36:53.713

```
double* probabilities = (double*)malloc( probabilityArrayLength ); 
```

这分配了 6 个字节，不足以存储 6 个双精度。它应该是：

```
double* probabilities = malloc(probabilityArrayLength*sizeof(double)); 
```

您可以省略强制转换，在 C 中您可以将 a 分配`void*`给任何类型的指针。

您的`fsize`方法也有一个错误，您正在寻求最后获取文件的长度，但您并没有在之后重新开始使用`fseek(fp, SEEK_SET)`.

# ruby - 在 Google Fusion Tables 中，如何使用 Ruby 发出 PUT 请求？

> ID：14564266
> 
> 赞同：0
> 
> 时间：2013-01-28T14:32:50.987
> 
> 标签：ruby, google-fusion-tables, put

查看[Google Fusion Tables API](https://developers.google.com/fusiontables/docs/v1/reference/style/update)，它说可以通过 PUT 请求更新 Fusion Tables 样式。

是否可以使用 Ruby 发出这样的 PUT 请求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T15:02:08.580

`Net::HTTP`图书馆来了：

```
require 'net/http'
google_api = Net::HTTP.new 'www.googleapis.com'
google_api.get '/fusiontables/v1/tables' 
```

这是一个简单的自制解决方案。也许您会使用更广泛的框架来访问 google api。快速搜索“google api ruby​​ gem”发现了[这个 gem](https://github.com/google/google-api-ruby-client)。

[http://www.ruby-doc.org/stdlib-1.9.3/libdoc/net/http/rdoc/Net/HTTP.html](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/net/http/rdoc/Net/HTTP.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T14:39:09.467

您可以使用 HTTP POST 来执行 INSERT 或 UPDATE。查看[谷歌在线信息](https://developers.google.com/fusiontables/docs/v1/sql-reference)。还有一个[Ruby 库](http://code.google.com/p/google-api-ruby-client/#Fusion_Tables_API)

# javascript - eval() 返回未定义的代码

> ID：14564267
> 
> 赞同：-3
> 
> 时间：2013-01-28T14:32:51.377
> 
> 标签：javascript, eval

当我`eval(command)`在控制台中尝试时，它只会给我“未定义”。我想要做的是将“命令”作为一行。如何？

```
str = ""
command = ""

if (document.checks.cb1.checked) {str += " && randomNum3 != 1"}
if (document.checks.cb2.checked) {str += " && randomNum3 != 2"}
if (document.checks.cb3.checked) {str += " && randomNum3 != 3"}
if (document.checks.cb4.checked) {str += " && randomNum3 != 4"}

command = "while (str == str" + str + ") {randomNum3 = Math.floor(Math.random() * (1 - 5)) + 5}"
eval(command) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T14:40:48.943

您可以在没有`eval`. 这应该可以解决问题：

```
var num = [];

if (document.checks.cb1.checked) {num.push(1)}
if (document.checks.cb2.checked) {num.push(2)}
if (document.checks.cb3.checked) {num.push(3)}
if (document.checks.cb4.checked) {num.push(4)}

while (num.indexOf(randomNum3) == -1) {
    randomNum3 = Math.floor(Math.random() * (1 - 5)) + 5;
} 
```

假设`str`和`randomNum3`已定义，这应该会返回一个随机数。

# build - 如何在 Yeoman build 中使用更新版本的 r.js？

> ID：14564270
> 
> 赞同：0
> 
> 时间：2013-01-28T14:33:05.633
> 
> 标签：build, requirejs, yeoman, r.js

我正在尝试`yeoman build`在使用 requireJS 和[require-handlebars-plugin](https://github.com/SlexAxton/require-handlebars-plugin)的项目上运行。运行 rjs 任务时出现此错误：

```
<WARN> Error: ENOENT, no such file or directory '/Users/tkrell/Sites/pathrabbit-marionette-require/temp/scripts/template/schedules/day-jobs    -past.js'
In module tree:
    main
      schedules/schedule-layouts
        schedules/schedule-jobs-view
          hbs

    at Object.fs.openSync (fs.js:338:18)
 Use --force to continue. </WARN> 
```

我相信这与似乎只需要解决最新版本的 r.js 的问题[相同。](https://github.com/SlexAxton/require-handlebars-plugin/issues/69)当我手动使用较新版本的 r.js 时，我没有收到错误并且一切正常。如何强制`yeoman build`任务使用最新版本的 r.js？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T13:04:41.693

[关于我](https://github.com/yeoman/yeoman/issues/871)在 Yeoman 的 github 页面上创建的问题给出的建议对我有用：

> Yeoman 使用 2.0.2（参见它的 package.json）。
> 
> 您可以进入安装 yeoman 的目录并运行 npm install -f requirejs 以强制安装更新版本。没有承诺它不会破坏。
> 
> 但是，在 yeoman 1.0（即将推出）中，我们将使用 grunt-requirejs 代替。

# javascript - javascript转换 到

> ID：14564281
> 
> 赞同：0
> 
> 时间：2013-01-28T14:33:36.377
> 
> 标签：javascript, jquery

我有一个带有键/值对的 javascript 对象，其中值是一个字符串数组：

```
var errors = {
    "Message": ["Error #1", "Error #2"],
    "Email": ["Error #3", "Error #4"]
}; 
```

我想将其转换为每个数组的第一个元素的键/值对，以便它是 a 而不是：

```
var firstErrorOnly = {
    "Message": "Error #1",
    "Email": "Error #3"
}; 
```

我尝试这样做，`jQuery.map`但我没有得到我想要的结果。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T14:36:03.043

[`for ... in`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/for...in)您可以使用和遍历整个对象，[`hasOwnProperty()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/hasOwnProperty)以您希望的样式创建一个新对象。

```
var firstErrorOnly = {};
for( var key in errors ) {
  if ( errors.hasOwnProperty( key ) ) {
    firstErrorOnly[ key ] = errors[key][0];
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T14:37:12.620

对于 jQuery 实现，试试这个：

```
var firstErrorOnly = {};
$.each(errors, function(i, value) {
    firstErrorOnly[i] = value[0];
}); 
```

[**示例小提琴**](http://jsfiddle.net/kwdEf/)

# asp.net-mvc-4 - MVC4：ViewModel 在 [HttpPost] 上为空

> ID：14564288
> 
> 赞同：0
> 
> 时间：2013-01-28T14:33:54.153
> 
> 标签：asp.net-mvc-4, http-post, viewmodel

我正在尝试在 MVC4 中制作一个简单的新闻系统。我对此很陌生，我有一个简单的 News 基类，如下所示：

新闻邮报：

```
public class NewsPost
{
    public virtual int Id { get; set; }
    public virtual string Subject { get; set; }
    public virtual string Content { get; set; }
} 
```

然后将其附加到一个类别类，如下所示：

**新闻分类**：

```
public class NewsCategory
{
    public virtual int Id { get; set; }
    public virtual string Name { get; set; }
    public virtual ICollection<NewsPost> NewsPosts { get; set; }
} 
```

然后我有一个用于创建这些 NewsPosts 的控制器：

**新闻控制器**：

```
private readonly INewMvcSiteDataSource _db;

public NewsController(INewMvcSiteDataSource db)
{
    _db = db;
}

[HttpGet]
public ActionResult Create()
{
    var model = new CreateNewsViewModel();

    model.Categories = new SelectList(_db.NewsCategories, "Id", "Name");

    return View(model);
}

[HttpPost]
public ActionResult Create(CreateNewsViewModel newsModel)
{
    if (ModelState.IsValid)
    {
        int id = int.Parse(newsModel.SelectedCategories.Single(f => f.Selected).Value);
    }
    return View(newsModel);
} 
```

最后，为了方便创建 NewsPost，我使用了 CreateNewsViewModel，如下所示：

**创建新闻视图模型**：

```
public class CreateNewsViewModel
{
    [Required]
    public string Subject { get; set; }

    [Required]
    public string Content { get; set; }

    public SelectList Categories { get; set; }
    public SelectList SelectedCategories { get; set; }
} 
```

我的观点是这样的：

**创建.cshtml**：

```
@model NewMvcSite.Models.CreateNewsViewModel

@{
    ViewBag.Title = "Create";
}

<h2>Create</h2>

@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)

    <fieldset>
        <legend>CreateNewsViewModel</legend>

        <div class="editor-label">
            @Html.LabelFor(model => model.Subject)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Subject)
            @Html.ValidationMessageFor(model => model.Subject)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Content)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Content)
            @Html.ValidationMessageFor(model => model.Content)
        </div>
        <div class="editor-label">
            @Html.LabelFor(model => model.Categories)
        </div>
        <div class="editor-field">
            @Html.DropDownListFor(model => model.Categories, Model.SelectedCategories)
        </div>
        <p>
            <input type="submit" value="Create" />
        </p>
    </fieldset>
}

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
} 
```

出于某种原因，当我单击提交按钮创建新闻帖子时，我的视图模型没有返回，并且由于 [HttpPost] 创建操作没有无参数构造函数，因此它失败并显示*“没有为此对象定义无参数构造函数”。*

我一直在尝试浏览其他帖子，说明同样的问题，但我看不到他们在做什么和我在做什么之间的联系。我希望那里有人可以帮助我。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T15:14:35.020

如果要从下拉列表中选择类别，首先您应该向模型添加属性以保存所选类别的 Id。像这样的东西（属性**类别**）：

 `````
public class CreateNewsViewModel
    {
        [Required]
        public string Subject { get; set; }

        [Required]
        public string Content { get; set; }

        public SelectList Categories { get; set; }
        public SelectList SelectedCategories { get; set; }
        public int Category { get; set; }
    } 
````  `之后，您应该将代码更改为填充**模型。类别**为：

 `````
model.Categories = new SelectList(categories, "Id", "Name", model.Category); 
```` 

`而且，在您看来，类别的编辑器应该如下所示：`

 ``````
 <div class="editor-field">
                @Html.DropDownListFor(m => m.Category, Model.Categories);

 </div> 
````  `* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T14:48:57.100

```
model.Categories = new SelectList(_db.NewsCategories, "Id", "Name"); 
```

在这一行，您填写`Categories`属性

```
@Html.DropDownListFor(model => model.Categories, Model.SelectedCategories) 
```

在这里您尝试`select`使用`Categories`名称和`SelectedCategories`项目创建

```
int id = int.Parse(newsModel.SelectedCategories.Single(f => f.Selected).Value); 
```

在这里，您尝试获取选定的项目，但在提交表单时您只发送一个号码，而不是列表。你的一个`SelectList`必须是`int`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T22:42:48.580

我找到了解决方案。

我不得不将 ViewModel 更改为：

```
public IEnumerable<SelectListItem> Categories { get; set; }
public int SelectedCategoryId { get; set; } 
```

我将控制器更改为：

```
var model = new CreateNewsViewModel
                {
                    Categories = new SelectList(_db.NewsCategories, "Id", "Name")
                }; 
```

并将视图更改为：

```
@Html.DropDownListFor(x => x.SelectedCategoryId, Model.Categories) 
`````````

# sql - 在三个表上使用条件的 SQL 查询

> ID：14564289
> 
> 赞同：0
> 
> 时间：2013-01-28T14:33:56.723
> 
> 标签：sql, oracle

所以这里我有数据库的结构：

![表](../Images/33a9226e1d1c49274b099b0bea9851a5.png)

情况如下，假设我有一个 ID 为 1294652442332 的子元素“Sivu”和几个属性（不重要）。我需要选择我的 Sivu 的父页面（页面是 Sivu 的父元素）。当前工作的 oracle DB 查询是

```
SELECT
  DISTINCT parent.oid as parentid
                , parent.otype as parenttype
                , child.oid as childid
                , child.otype as childtype
                , child.ncode as ncode
                , child.nrank as nrank
FROM
  assetrelationtree child
        , assetrelationtree parent
        , Page parentasset
WHERE
  child.oid = 1294652442332 
  AND child.otype = 'Sivu'
  AND child.nparentid != 0
  AND child.ncode = '-'
  AND parent.nid = child.nparentid
  AND parent.otype = 'Page'
  AND parentasset.id = parent.oid
  AND parentasset.status != 'VO'
ORDER BY   
  nrank 
```

现在，在图片中您会看到有一个siteplan 表（OID 字段包含Page ID）。它还包含关于 Page（Sivu 的父元素）的另一件重要的事情。我想知道的重要领域是NCODE。因此，基本上，我想修改此查询以选择在表 siteplantree 中具有 NCODE 字段的页面元素具有特定值（NCODE = 'Placed'）。我试图修改查询，但我被卡住了，我什至不知道单次选择是否可行：

```
SELECT
    DISTINCT parent.oid as parentid
                , parent.otype as parenttype
                , child.oid as childid
                , child.otype as childtype
                , child.ncode as ncode
                , child.nrank as nrank
FROM
    assetrelationtree child
        , assetrelationtree parent
       , Page parentasset
       , siteplantree siteplan
WHERE
    child.oid = 1294652442332
    AND child.otype = 'Sivu'
    AND child.nparentid != 0
    AND child.ncode = '-'
    AND parent.nid = child.nparentid
    AND parent.otype = 'Page'
    AND parentasset.id = parent.oid
    AND parentasset.status != 'VO'

  AND siteplan.ncode = 'Placed'
  AND siteplan.oid = child.nparentid
ORDER BY
    nrank 
```

希望我已经描述了问题，以便您能够理解。如果有些事情不清楚，请告诉我，我会更新描述。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T15:34:25.193

更改`AND siteplan.oid = child.nparentid`为`AND siteplan.oid = parentasset.id`

# java - 如何使用 SpriteBatch 绘制方法

> ID：14564291
> 
> 赞同：1
> 
> 时间：2013-01-28T14:34:02.670
> 
> 标签：java, libgdx

```
SpriteBatch batcher = new SpriteBatch();
batcher.draw(TextureRegion region,
             float x,
             float y,
             float originX,
             float originY,
             float width,
             float height,
             float scaleX,
             float scaleY,
             float rotation) 
```

`originX`, `originY`, `scaleX`, `scaleY`,是什么意思`rotation`？你也能给我一个他们使用的例子吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-28T15:13:40.250

您为什么不查看[文档](http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/graphics/g2d/SpriteBatch.html#draw%28com.badlogic.gdx.graphics.g2d.TextureRegion,%20float,%20float,%20float,%20float,%20float,%20float,%20float,%20float,%20float,%20boolean%29)？

如文档中所述，原点位于左下角，`originX`,`originY`是从该原点的偏移量。例如，如果您希望对象围绕他的中心旋转，您将执行此操作。

```
originX = width/2;
originY = height/2; 
```

通过指定`scaleX`, `scaleY`，您可以缩放图像，如果您想让 Sprite 变大 2 倍，您需要将 scaleX 和 scaleY 都设置为 number `2`。

`rotation`以度数指定围绕原点的旋转。

**此代码段绘制围绕其中心旋转 90 度的纹理**

```
SpriteBatch batch = new SpriteBatch();
Texture texture = new Texture(Gdx.files.internal("data/libgdx.png"));
texture.setFilter(TextureFilter.Linear, TextureFilter.Linear);

int textureWidth = texture.getWidth();
int textureHeight = texture.getHeight();
float rotationAngle = 90f;

TextureRegion region = new TextureRegion(texture, 0, 0, textureWidth, textureHeight);

batch.begin();
batch.draw(region, 0, 0, textureWidth / 2f, textureHeight / 2f, textureWidth, textureHeight, 1, 1, rotationAngle, false);
batch.end(); 
```

[或在这里](http://code.google.com/p/libgdx/wiki/SpriteBatch)查看教程。

# java - 基于 Tomcat 7 的 Spring 应用程序是否可以立即移植到 JBoss EAP6？

> ID：14564294
> 
> 赞同：0
> 
> 时间：2013-01-28T14:34:15.643
> 
> 标签：java, spring, tomcat7, jboss-eap-6

OpenShift 提供了使用 JBoss EAP6 开发基于 Spring 的应用程序的可能性。我正在考虑迁移在 Tomcat 7 上开发/部署的 Spring 应用程序。

我对 JBoss 的经验很少。如果我迁移我的应用程序，我会遇到很多麻烦吗？如果是的话是哪个？Tomcat 7 和 JBoss EAP6 兼容吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T15:01:14.153

这完全取决于您的应用程序。

JBoss 6 中的 servlet 容器基于 Tomcat 6。如果您使用 Tomcat 7 中的任何新功能（例如 Servlet 3.0 或 JSP 2.2 规范中的扩展），这些将不会在 JBoss 6 上运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T17:27:12.533

一般的回答是肯定的，JBoss 将提供 Tomcat 提供的所有标准元素。但是总是有可能使它不兼容（直接使用一些 tomcat 类，JBoss Web 使用不同的名称空间并且没有 1:1 的核心响应）。

在大多数情况下，您需要进行一些小调整（添加一些配置和属性，更改数据源名称......）。

[JBoss AS7 文档包含一些 Spring 集成元素](https://docs.jboss.org/author/display/AS72/Spring+applications+development+and+migration+guide)。

JBoss 中默认提供的一些元素可能会给您带来一些麻烦（例如 JPA），但是如果您完全控制了应用程序源，您应该能够不费吹灰之力地让它工作。

如果没有在您的应用程序内部，将很难给出具体的工作量估计。

# gremlin - Gremlin：如何在查询中引用循环变量？

> ID：14564299
> 
> 赞同：0
> 
> 时间：2013-01-28T14:34:29.707
> 
> 标签：gremlin

我坚持使用 gremlin 查询来`rank`根据作为参数传递给查询的排序键列表为节点分配值。由“uniqueId”值标识的每个节点都应根据重新排列的数组中的出现顺序分配一个等级。

这有效：

```
reranked = [uniqueId1, uniqueId2, uniqueId3]
v.outE.as('e').inV.filter{it.key == reranked[2]}.back('e').sideEffect{it.rank = 2} 
```

但这不是（用 for 循环变量替换 int ）：

```
reranked = [uniqueId1, uniqueId2, uniqueId3]
for (i in 1..reranked.size())
v.outE.as('e').inV.filter{it.key == reranked[i]}.back('e').sideEffect{it.rank = i} 
```

你知道为什么这不起作用吗？我也很高兴能用更简单的想法来达到同样的目标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T22:56:40.080

好吧，看起来我找到了一个解决方案，也许很笨拙，但是嘿，它有效！

```
c=0
v.as('st').outE.as('e').inV.filter{it.key == reranked[c]}.back('e').sideEffect{
    it.rank = reranked.size() - c }.outV.loop('st'){ c++ < so.size() } 
```

如果对上述情况有解决办法，我仍然会接受另一个答案，也许是一种更优雅的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T12:43:41.117

您可以使用 Groovy 来执行此操作，`eachWithIndex`例如：

```
reranked = [uniqueId1, uinqueId2, uniqueId3]
reranked.eachWithIndex{uniqueId, idx -> v.outE.as('e').inV.has('key', uniqueId).back('e').sideEffect{it.rank = idx} } 
```

我使用了 Gremlin 的`has`上述步骤，因为它比`filter`简单的属性查找更有效。

# c# - 路径的可视化

> ID：14564303
> 
> 赞同：2
> 
> 时间：2013-01-28T14:34:37.397
> 
> 标签：c#, wpf, data-binding

假设有三类：节点、端口和电缆。一个节点至少有一个端口，一根电缆正好有两个端口。一些端口每个都连接到另一个端口。就像网络一样，有设备相互连接，使用它们的端口，通过电缆，但有些端口没有连接。

如何在 Wpf 中将其可视化？我想查看一个节点的所有端口和连接到其他节点的电缆，例如：

```
Node1: port1 -> port2 -> Cable1 ->port3 ->port4 -> Node2
       port5 -> port6 -> Cable2 ->port7 ->port8 -> Cable3 ->port9 ->port10 -> Node3
       port3 -> *not connected* 
```

创建一个包含两个端口（一个节点和一个电缆）和一个（电缆或节点）的新类是否是一种好习惯，并且每个节点都有一个这些新类实例的列表，对于每个电缆一个并且对于另一个和上的节点。所以这个新类的实例可以被模板使用，也许是分层的？还是使用现有结构并从中创建模板更好，但看起来，它在 Wpf 中将是一个非常复杂的代码。

编辑：输出应该是上面的表格。我在问如何创建这样的表。可以说，每个节点在*ObservableCollection*中都有其端口，并且对象之间的所有其他连接都被实现为属性。是否可以在不使用*传输对象*的情况下在 wpf 中显示此表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T15:14:05.193

有很多方法可以做到这一点。我不推荐您必须复制对象仅用于演示的解决方案。只需编写一个迭代每个端口、节点和电缆的函数并获取它们的每个“输出”。

它会是这样的：

```
allObjects = all port, node and cable
for each object in allObjects
  for each output in object
     find output and link it with object 
```

之后一切都将被链接，您唯一的问题是找到一个不错的表示层，例如[这个](https://stackoverflow.com/questions/4562927/free-and-open-source-wpf-chart-library)，或者任何允许您显示[图形](http://en.wikipedia.org/wiki/Graph_%28mathematics%29)的库。数学意义上的图形，而不是 excel，xy 轴图

# jquery - JQuery Mobile - # 添加到 URL

> ID：14564306
> 
> 赞同：1
> 
> 时间：2013-01-28T14:34:51.777
> 
> 标签：jquery, jquery-mobile

我刚刚更新到 jquery mobile 1.3.0，我注意到 # 总是添加到 URL 中。我在 google chrome 和 safari 中遇到了这个问题，但在 Firefox 中没有。这里是 URL： http: [//m.nearbyph.com/streetnames](http://m.nearbyph.com/streetnames) 如果您单击链接，在页面加载后，会在 URL 中添加一个 #。

我所有的链接都有 data-ajax="false"。

我在之前的版本中没有遇到过这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T14:47:28.290

这是当前 1.3 beta 版本的已知错误。

您可以等待新的 jQM 版本来解决此问题。

或者你可以看看这个链接：[https ://github.com/jquery/jquery-mobile/issues/5442](https://github.com/jquery/jquery-mobile/issues/5442)

在底部，您将找到指向固定文件的链接。忽略它的名字（它被命名为 navigator.js）。打开您的 jquery.mobile-1.3.0-beta.1.js 文件（不要使用缩小版）并更改以红色选择的代码与以绿色选择的代码。

但我建议您等待下一个 jQM 测试版。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T14:40:22.477

这是因为您的标签将“#”作为其“href”属性的值。如果你想让它停止，你可以试试这个：

```
 $('someanchorelement').click(function(e) {
           e.preventDefault();
           /* ... other code ... */    
    }) 
```

# actionscript-3 - 绘制三角形形状背景

> ID：14564308
> 
> 赞同：1
> 
> 时间：2013-01-28T14:34:57.100
> 
> 标签：actionscript-3

我在数组中有三个点。我想用这个点画一个三角形。

现在，我使用 MoveTo() 和 LineTo() 函数来绘制这个三角形的边框。

问题是，我还需要绘制这条线创建的区域的内部背景。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T14:47:34.860

你应该使用`graphics.beginFill(color);`：

```
public function astest()
{
    var verticies:Vector.<Point> = Vector.<Point>([new Point(0, 100), new Point(100, 0), new Point(100, 100)]);
    var sh:Shape = new Shape();
    addChild(sh);

    drawPolygon(sh.graphics, verticies, 0xFF0000);
}

protected function drawPolygon(graphics:Graphics, verticies:Vector.<Point>, color:uint):void
{
    graphics.beginFill(color);
    var p:Point = verticies.shift();
    graphics.moveTo(p.x, p.y);
    for(var i:int = 0; i < verticies.length; i++)
    {
        p = verticies[i];
        graphics.lineTo(p.x, p.y);
    }   
    graphics.endFill();
} 
```

# python - Python - 在指定时间内循环 100 次

> ID：14564312
> 
> 赞同：1
> 
> 时间：2013-01-28T14:35:07.953
> 
> 标签：python, loops, time

我正在考虑在 Python 中创建一个随机化脚本，以在特定时间内执行一个循环。如果我想在 5 天内随机运行 100 次循环，那么最好的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T14:42:04.023

沿区间选取一百个均匀分布的随机点，并在它们之间休眠：

```
import random, time

DURATION = 5 * 86400  # five days
EXECS = 100

now = time.time()
points = sorted(random.random() * DURATION + now
                for i in xrange(EXECS))

for p in points:
   now = time.time()
   if p > now:
       time.sleep(p - now)
   # run your loop here 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T14:51:47.870

您可以“预先计划”您的随机时间，以便在您的时间范围内完美匹配。这假设您的循环时间在天数范围内是微不足道的（对于 100 次运行）。如果你想非常准确，你需要添加一些东西

```
import random, time

def Rand_Run(func, time_range, num_runs):
    # time range passed as days / convert to seconds
    time_range = time_range*3600*24

    # create a list of random numbers and a scaling factor for your time period
    r_items = [random.random() for i in xrange(num_runs)]
    r_scale = time_range/sum(r_items)

    # create the list of time delays between runs
    r_time_delays = (r_item*r_scale for r_item in r_items)

    # run the function between random time delays
    for r_time_delay in r_time_delays:
        func()
        time.sleep(r_time_delay) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T14:41:38.583

不是 Python，而是一些想法：

```
duration = 5*24*60*60 //duration in seconds
for i = 0 to 99
    array(i)=rand()*duration
end
sort array
counter=0
while time_elapsed<duration
    if (time_elapsed>=array(counter))
        DO SOMETHING
        counter=counter+1
    end
end 
```

# django - django-tastypie popup oauth like twitter

> ID：14564317
> 
> 赞同：0
> 
> 时间：2013-01-28T14:35:20.837
> 
> 标签：django, oauth, tastypie

我找不到 django-tastypie 示例，如何制作像 twitter oauth 这样的登录弹出窗口。

Mayby django-tastypie 有示例或教程我怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T00:34:58.910

如果您正在寻找可以与 Django 集成的模式窗口/弹出窗口，Bootstrap 有一个不错的选择：http: [//twitter.github.com/bootstrap/javascript.html#modals](http://twitter.github.com/bootstrap/javascript.html#modals)。

# c - 需要编写一个接受汇编语言程序并产生相应机器语言的程序

> ID：14564321
> 
> 赞同：0
> 
> 时间：2013-01-28T14:35:27.527
> 
> 标签：c, assembly, computer-architecture, machine-code, machine-language

我对编程很陌生，我需要编写一个程序来接受汇编语言程序并生成相应的机器语言。

我需要用 C 编写程序

有谁知道我可以找到任何好的教程来创建这个程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T14:43:24.450

您想要做的是找到一个数据表，其中描述了您正在编写的汇编指令的不同操作码。试试 ISA“你的处理器名称”——这可能会带来一些有用的东西。

这可能会很困难，你会遇到很多问题，但你可能会从中学到一些东西。

# php - 在多个 mysql 表之间保持更新的 mysql 数据

> ID：14564326
> 
> 赞同：1
> 
> 时间：2013-01-28T14:35:56.830
> 
> 标签：php, mysql, triggers

我在mysql中有两个表。当我在第一个表中插入/删除值时，我希望这些值在表 2 中重复以保持它们“对齐”。

表1：
id - 用户名
1 - test_user表 2
：

与 table1 相同的 id 和与 table1 相同的用户名（在插入/删除时）

我想保持表之间的数据对齐而不进行多次查询。我读过关于触发器的文章，不确定这是否是正确的道路，我是个笨蛋。
我说两个表，但我需要在多个表中执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T14:38:39.267

您可以使用 Mysql 触发器。这样您就可以从第二个表中自动插入/更新/删除数据。

[MySql 使用触发器](http://dev.mysql.com/doc/refman/5.0/en/triggers.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T14:53:14.300

当您`INSERT`新建记录时，考虑到由于某种原因您不想进行两次插入，[使用触发器](http://dev.mysql.com/doc/refman/5.0/en/triggers.html)插入第二个表将起作用。对于`UPDATE`并且`DELETE`您可能想查看`CASCADE`带有[外键](http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html)的选项。如果您所做的只是保持表之间的数据一致，那么这正是 cascade 的用途。

当您创建 table2 时，您只需添加一个外键，如下所示：

```
FOREIGN KEY (id, username) 
  REFERENCES table1(id, username) ON UPDATE CASCADE ON DELETE CASCADE 
```

然后，每当您更改 table1 时，更改将自动推送到 table2。

**这个工作的几个先决条件：**

1.  您必须使用支持外键的[存储引擎](http://dev.mysql.com/doc/refman/5.1/en/storage-engines.html)`InnoDB`，例如而不是`MyISAM`
2.  您需要`(id,username)`在 table1 中有一个索引；外键需要匹配父表中的一个键
3.  您应该阅读[外键](http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html)的文档页面。还有其他几种方法可以调整它们，您应该找出最适合您的目的的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T14:54:40.267

您当然可以在您的 table1 上放置触发器，以便在您的应用程序更改 table1 时对您的其他表进行并行更改。

有关文档，请参见此处：http: [//dev.mysql.com/doc/refman/5.0/en/trigger-syntax.html](http://dev.mysql.com/doc/refman/5.0/en/trigger-syntax.html)

但是，您应该考虑一下您的设计。插入和更新需要多次查询；他们只会在服务器上“在你背后”完成。他们仍然需要时间。触发器真的可以减慢速度。

此外，触发器有点脆弱。如果您将一列添加到表中，您将不得不重新设计您的触发器。触发器通常在源代码控制系统中很难保存，而在测试中也很麻烦，因此使用它们会使您的应用程序维护起来更加麻烦。

你能想出另一种方法来处理这种重复需求吗？例如，您是否可以使用视图或连接将您需要的数据呈现给应用程序，而无需实际复制表和其中的行？如果你弄清楚如何做到这一点，从长远来看，你会更快乐。

```
 CREATE VIEW table2 AS 
      SELECT * 
       FROM table1; 
```

将生成一个包含 table1 内容的“假”table2。

或者，如果您希望仅查看第二个表中的测试用户，则视图也可以为您执行此操作，例如：

```
CREATE VIEW table3 AS
     SELECT * 
       FROM table1
      WHERE usertype = 'test_user' ; 
```

如果您使用重复表进行“备份”，那么确保您的信息安全是一种糟糕的方式。相反，您需要备份 MySQL 服务器实例。

正式的关系数据库设计原则教我们复制数据，而是使用视图和连接来按照应用程序需要查看数据的方式构建数据。

# excel - 分隔格式奇怪的文本

> ID：14564331
> 
> 赞同：0
> 
> 时间：2013-01-28T14:36:15.973
> 
> 标签：excel, excel-formula, formula, delimiter

我正在尝试找到一种在不丢失数据的情况下在 excel 中分隔文本的好方法。

我有 Nastran 数据，其中包含如下数据：

```
GRID      160125  106000 12.2417-226.961 .557834  106000  
GRID      160126  106000-48.3499-2.75691-2.21477  106000 
```

我希望 Excel 将数据排列如下：

```
GRID   |   160125 |  106000 |  12.2417  |  -226.961  |    .557834  |  106000  
GRID   |   160126 |  106000 | -48.3499  |   -2.75691 |  -2.21477   |  106000 
```

但是，如果我用空格和 定界`-`，它会丢弃`-`和 使数字为正。有没有我可以写的公式，如果它遇到 a `-`，它会在前面放一个空格，然后分隔所有数据？或者有没有一种简单的方法可以在没有公式的情况下对其进行定界？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T14:49:00.100

试试这个公式（假设您的数据从 开始`A1`）：`=SUBSTITUTE(A1,"-"," -")`。根据需要自动填充，然后使用公式复制并**特殊粘贴**整个列作为**VALUES**。现在您可以应用带空格的文本分隔符。

我希望你对结果感到满意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T15:16:08.450

可以使用`Fixed width`分隔选项：至少在您的示例中，数据列具有统一的长度。也许它有更多的数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T15:19:24.040

我尝试了 Kami 的解决方案，*固定宽度*导入效果很好。

我将您的输入数据保存为 .txt 文件。然后我在 Excel 中打开了文本文件。虽然它在空格处放置了几个中断，但我必须单击减号旁边的以创建新的中断。

Excel 然后正确地解析了这些列。

# html - 神秘填充物..？

> ID：14564333
> 
> 赞同：-1
> 
> 时间：2013-01-28T14:36:19.597
> 
> 标签：html, css, padding, cellpadding

我最近设计并完成了 2 个时事通讯；但是当我回去进行快速更改（在容器外部添加背景颜色）时，我意识到内容和背景颜色之间存在一些神秘的填充，我想要完成的是获取背景在主要内容的边缘着色。我已经玩了很多 CSS，但仍然没有想出一个修复..

**[小提琴](http://jsfiddle.net/FrYuZ/1/)**

以下是时事通讯的完整来源：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

        <title>The Cook's Nook</title>
        <style type="text/css">
            /* Client-specific Styles */
            #outlook a{padding:0;} /* Force Outlook to provide a "view in browser" button. */
            body{width:100% !important;} .ReadMsgBody{width:100%;} .ExternalClass{width:100%;} /* Force Hotmail to display emails at full width */
            body{-webkit-text-size-adjust:none;} /* Prevent Webkit platforms from changing default text sizes. */

            /* Reset Styles */
            body{margin:0; padding:0;}
            img{border:0; height:auto; line-height:100%; outline:none; text-decoration:none;}
            table td{border-collapse:collapse;}
            #backgroundTable{height:100% !important; margin:0; padding:0; width:100% !important;}

            /* Template Styles */

            /* /\/\/\/\/\/\/\/\/\/\ STANDARD STYLING: COMMON PAGE ELEMENTS /\/\/\/\/\/\/\/\/\/\ */

            /**
            * @tab Page
            * @section background color
            * @tip Set the background color for your email. You may want to choose one that matches your company's branding.
            * @theme page
            */
            body, #backgroundTable{
                 background-color:#7C1A27;
            }

            /**
            * @tab Page
            * @section email border
            * @tip Set the border for your email.
            */
            #templateContainer{
            }

            /**
            * @tab Page
            * @section heading 1
            * @tip Set the styling for all first-level headings in your emails. These should be the largest of your headings.
            * @style heading 1
            */
            h1, .h1{
                color:#000000;
                display:block;
                font-family:Arial;
                font-size:12px;
                line-height:100%;
                margin-top:0;
                margin-right:0;
                margin-left:0;
                text-align:left;
                font-weight: normal;
            }

            /**
            * @tab Page
            * @section heading 2
            * @tip Set the styling for all second-level headings in your emails.
            * @style heading 2
            */
            h2, .h2{
                 color:#202020;
                display:block;
                 font-family:Arial;
                 font-size:30px;
                 font-weight:bold;
                 line-height:100%;
                margin-top:0;
                margin-right:0;
                margin-bottom:10px;
                margin-left:0;
                 text-align:left;
            }

            /**
            * @tab Page
            * @section heading 3
            * @tip Set the styling for all third-level headings in your emails.
            * @style heading 3
            */
            h3, .h3{
                 color:#202020;
                display:block;
                 font-family:Arial;
                 font-size:26px;
                 font-weight:bold;
                 line-height:100%;
                margin-top:0;
                margin-right:0;
                margin-bottom:10px;
                margin-left:0;
                 text-align:left;
            }

            /**
            * @tab Page
            * @section heading 4
            * @tip Set the styling for all fourth-level headings in your emails. These should be the smallest of your headings.
            * @style heading 4
            */
            h4, .h4{
                 color:#202020;
                display:block;
                 font-family:Arial;
                 font-size:16px;
                 font-weight:normal;
                 line-height:100%;
                margin-top:0;
                margin-right:0;
                margin-bottom:10px;
                margin-left:0;
                 text-align:left;
            }

            /* /\/\/\/\/\/\/\/\/\/\ STANDARD STYLING: HEADER /\/\/\/\/\/\/\/\/\/\ */

            /**
            * @tab Header
            * @section header style
            * @tip Set the background color and border for your email's header area.
            * @theme header
            */
            #templateHeader{
                 background-color:#FFFFFF;
                 border-bottom:0;
            }

            /**
            * @tab Header
            * @section header text
            * @tip Set the styling for your email's header text. Choose a size and color that is easy to read.
            */
            .headerContent{
                 color:#202020;
                 font-family:Arial;
                 font-size:34px;
                 font-weight:bold;
                 line-height:100%;
                 padding:0;
                 text-align:center;
                 vertical-align:middle;
            }

            /**
            * @tab Header
            * @section header link
            * @tip Set the styling for your email's header links. Choose a color that helps them stand out from your text.
            */
            .headerContent a:link, .headerContent a:visited, /* Yahoo! Mail Override */ .headerContent a .yshortcuts /* Yahoo! Mail Override */{
                 color:#336699;
                 font-weight:normal;
                 text-decoration:underline;
            }

            #headerImage{
                height:auto;
                max-width:600px !important;
            }

            /* /\/\/\/\/\/\/\/\/\/\ STANDARD STYLING: MAIN BODY /\/\/\/\/\/\/\/\/\/\ */

            /**
            * @tab Body
            * @section body style
            * @tip Set the background color for your email's body area.
            */
            #templateContainer, .bodyContent{
                 background-color:#FFFFFF;
            }

            /**
            * @tab Body
            * @section body text
            * @tip Set the styling for your email's main content text. Choose a size and color that is easy to read.
            * @theme main
            */
            .bodyContent div{
                 color:#505050;
                 font-family:Arial;
                 font-size:13px;
                 line-height:120%;
                 text-align:left;
                 margin-left: 10px
            }

            /**
            * @tab Body
            * @section body link
            * @tip Set the styling for your email's main content links. Choose a color that helps them stand out from your text.
            */
            .bodyContent div a:link, .bodyContent div a:visited, /* Yahoo! Mail Override */ .bodyContent div a .yshortcuts /* Yahoo! Mail Override */{
                 color:#336699;
                 font-weight:normal;
                 text-decoration:underline;
            }

            .bodyContent img{
                display:inline;
                height:auto;
            }

            /* /\/\/\/\/\/\/\/\/\/\ STANDARD STYLING: FOOTER /\/\/\/\/\/\/\/\/\/\ */

            /**
            * @tab Footer
            * @section footer style
            * @tip Set the background color and top border for your email's footer area.
            * @theme footer
            */
            #templateFooter{
                 background-color:#FFFFFF;
                 border-top:0;
            }

            /**
            * @tab Footer
            * @section footer text
            * @tip Set the styling for your email's footer text. Choose a size and color that is easy to read.
            * @theme footer
            */
            .footerContent div{
                 color:#707070;
                 font-family:Arial;
                 font-size:12px;
                 line-height:125%;
                 text-align:left;
            }

            /**
            * @tab Footer
            * @section footer link
            * @tip Set the styling for your email's footer links. Choose a color that helps them stand out from your text.
            */
            .footerContent div a:link, .footerContent div a:visited, /* Yahoo! Mail Override */ .footerContent div a .yshortcuts /* Yahoo! Mail Override */{
                 color:#336699;
                 font-weight:normal;
                 text-decoration:underline;
            }

            .footerContent img{
                display:inline;
            }

            /**
            * @tab Footer
            * @section social bar style
            * @tip Set the background color and border for your email's footer social bar.
            * @theme footer
            */
            #social{
                 background-color:#FAFAFA;
                 border:0;
            }

            /**
            * @tab Footer
            * @section social bar style
            * @tip Set the background color and border for your email's footer social bar.
            */
            #social div{
                 text-align:center;
            }

            /**
            * @tab Footer
            * @section utility bar style
            * @tip Set the background color and border for your email's footer utility bar.
            * @theme footer
            */
            #utility{
                 background-color:#FFFFFF;
                 border:0;
            }

            /**
            * @tab Footer
            * @section utility bar style
            * @tip Set the background color and border for your email's footer utility bar.
            */
            #utility div{
                 text-align:center;
            }

            #monkeyRewards img{
                max-width:190px;
            }
        </style>
    </head>
    <body leftmargin="0" marginwidth="0" topmargin="0" marginheight="0" offset="0">
        <center>
            <table border="0" cellpadding="0" cellspacing="0" height="100%" width="100%" id="backgroundTable">
                <tr>
                    <td align="center" valign="top">
                        <table border="0" cellpadding="0" cellspacing="0" width="600" id="templateContainer">
                            <tr>
                                <td align="center" valign="top">
                                    <!-- // Begin Template Header \\ -->
                                    <table border="0" cellpadding="0" cellspacing="0" width="600" id="templateHeader">
                                        <tr>
                                            <td class="headerContent">

                                                <!-- // Begin Module: Standard Header Image \\ -->
                                                <img src="images/header-bg.png" />
                                                <a href="#"><img src="images/social-events.png" style="float:right;padding-right:25px;" /></a>
                                                <a href="https://www.facebook.com/TheCooksNook?fref=ts"><img src="images/social-fb.png" style="float:right;padding-right:3px;" /></a>
                                                <!-- // End Module: Standard Header Image \\ -->
                                            <a href="#"><img src="images/logo.png" style="float:left;padding-top:20px;padding-left:30px;" /></a>
                                            <br /><br /><div style="float:right;">
                                                    <h1 style="padding-right:25px;text-align:right;margin-top:30px;"><strong>Holiday Hours:</strong>&nbsp;Monday-Friday&nbsp;9am-8pm</h1>
                                                    <h1 style="padding-right:25px;text-align:right;">Saturday&nbsp;9am-5pm&nbsp;&bull;&nbsp;Sunday&nbsp;1pm-5pm</h1>
                                                </div>

                                            </td>                                                                                       
                                        </tr>                                       
                                    </table>
                                    <!-- // End Template Header \\ -->
                                </td>
                            </tr>
                            <tr>
                                <td align="center" valign="top">
                                    <!-- // Begin Template Body \\ -->
                                    <table border="0" cellpadding="0" cellspacing="0" width="600" id="templateBody">
                                        <tr>
                                                <a href="#"><img src="images/butn-home.png" style="padding-top:15px;" /></a>
                                                <a href="#"><img src="images/butn-about-us.png" /></a>
                                                <a href="#"><img src="images/butn-in-store-coupons.png" /></a>
                                                <a href="#"><img src="images/butn-photo-gallery.png" /></a>
                                                <a href="#"><img src="images/butn-recipe-blog.png" /></a> 
                                                <a href="#"><img src="images/butn-contact-us.png" /></a>
                                            <td valign="top" class="bodyContent">                                                                                
                                                <!-- // Begin Module: Standard Content \\ -->
                                                <table border="0" cellpadding="20" cellspacing="0" width="100%">
                                                    <tr>
                                                        <td valign="top" style="padding-bottom:0px;">
                                                            <div>
                                                                A few years back (1998), one of our employees baked and brought this coffee cake recipe to all of us at the store.  We have had numerous calls over the years from people who misplaced this recipe and wanted to see if they could still get it from us.
                                                                <br /><br />
                                                                <h4>Cindy's Coffee Cake</h4>
                                                                <img src="images/featured-image.png" style="float:left;margin-top:5px;"/>                                                                          
                                                                <span style="line-height:110%;">     
                                                                           &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&bull; 1 yellow cake mix<br />
                                                                           &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&bull; 1 cup sour cream<br />
                                                                           &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&bull; 3 eggs<br />
                                                                           &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&bull; 1 cup pecans<br />
                                                                           &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&bull; ¼ cup water<br />
                                                                           &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&bull; ¾ cup brown sugar<br />
                                                                           &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&bull; 1 teaspoon cinnamon<br />
                                                                           &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&bull; ¾ cup melted margarine<br />
                                                                           &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&bull; 1 ¼ cups graham cracker crumbs<br /><br />
                                                                </span>                                                                             

                                                                Grease and flour a 10-inch round cake pan.  In a large bowl, combine cracker crumbs, nuts, brown sugar, cinnamon and margarine.  Set aside.  In another bowl, pour cake mix, sour cream, water and eggs.  Mix at low speed until moist, then beat at high speed for two minutes.  Pour half the batter into pan.  Sprinkle half crumb mix on top, then repeat with batter and crumb mix.  Bake at 350 degrees for 30 – 40 minutes until done.  Cool upright for 10 – 15 minutes.  Invert on plate.  Cool.  Glaze with powdered sugar and milk.                                                            </div>
                                                                <div style="margin-top:25px;"><center>
                                                                <img src="images/coupon-1.png" style="" />
                                                                <img src="images/coupon-2.png"  style="padding-left:15px;"/></center>
                                                                </div>                                            
                                                                <div style="float:right;padding-right:30px;padding-top:20px;">
                                                                    <a href="#"><img src="images/butn-view-print-coupons.png" /></a>
                                                                </div>                   
                                                        </td>
                                                    </tr>
                                                </table>
                                                <!-- // End Module: Standard Content \\ -->

                                            </td>
                                        </tr>
                                    </table>
                                    <!-- // End Template Body \\ -->
                                </td>
                            </tr>
                            <tr>
                                <td align="center" valign="top">
                                    <!-- // Begin Template Footer \\ -->
                                    <table border="0" cellpadding="10" cellspacing="0" width="600" id="templateFooter">
                                        <tr>
                                            <td valign="top" class="footerContent">                                            
                                                <!-- // Begin Module: Standard Footer \\ -->
                                                <table border="0" cellpadding="10" cellspacing="0" width="100%">
                                                    <tr>
                                                        <td colspan="2" valign="middle" id="utility"  style="padding-top:2px;">
                                                            <div>
                                                                <img src="images/footer-bg.png" />
                                                            </div>
                                                        </td>
                                                    </tr>                                                    
                                                </table>
                                                <!-- // End Module: Standard Footer \\ -->                                            
                                           </td>
                                        </tr>
                                    </table>
                                    <!-- // End Template Footer \\ -->
                                </td>
                            </tr>
                        </table>
                        <br />
                    </td>
                </tr>
            </table>
        </center>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T14:41:12.250

我避免使用表格出现不良行为的最佳方法是设置“table-layout:fixed;” 在表格上并使用元素设置列宽度。

另外，我想您正在使用某种工具将您的样式标签转换为内联 css。我建议不要这样做，这会生成大量不必要的代码，从而增加您的电子邮件的分量。

# c# - 在 OnNavigatingFrom 上取消导航时停止 wp7 过渡

> ID：14564334
> 
> 赞同：0
> 
> 时间：2013-01-28T14:36:23.727
> 
> 标签：c#, .net, windows-phone-7, navigation, transitions

在我的应用程序中的某些情况下，我必须取消返回导航。我正在使用代码：

```
 protected override void OnNavigatingFrom(NavigatingCancelEventArgs e)
    {
        if (e.NavigationMode == NavigationMode.Back)
        {
            if (WaitPanelGrid.Visibility == System.Windows.Visibility.Visible)
            {
                e.Cancel = true;
            }
        }
        base.OnNavigatingFrom(e);
    } 
```

一切都很好，除了一件事：在这个页面我有过渡：

```
<toolkit:TransitionService.NavigationInTransition>
    <toolkit:NavigationInTransition>
        <toolkit:NavigationInTransition.Backward>
            <toolkit:TurnstileTransition Mode="BackwardIn" />
        </toolkit:NavigationInTransition.Backward>
        <toolkit:NavigationInTransition.Forward>
            <toolkit:TurnstileTransition Mode="ForwardIn" />
        </toolkit:NavigationInTransition.Forward>
    </toolkit:NavigationInTransition>
</toolkit:TransitionService.NavigationInTransition>
<toolkit:TransitionService.NavigationOutTransition>
    <toolkit:NavigationOutTransition>
        <toolkit:NavigationOutTransition.Backward>
            <toolkit:TurnstileTransition Mode="BackwardOut" />
        </toolkit:NavigationOutTransition.Backward>
        <toolkit:NavigationOutTransition.Forward>
            <toolkit:TurnstileTransition Mode="ForwardOut" />
        </toolkit:NavigationOutTransition.Forward>
    </toolkit:NavigationOutTransition>
</toolkit:TransitionService.NavigationOutTransition> 
```

并在 OnNavigatingFrom 中调用 Cancel 停止应用程序从导航返回，但转换仍在工作，所以最后我只有黑屏，因为页面没有改变，但它被动画并移动到屏幕后面的某个地方。

我的问题是：如何取消导航和转换？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T15:27:05.400

摘自[这篇文章](http://blogs.msdn.com/b/wfaught/archive/2010/11/15/transitions.aspx)

### 禁用导航转换

如果要禁用页面的导航转换，请在页面上将 TransitionService.NavigationInTransition 和 TransitionService.NavigationOutTransition 设置为 null。如果要恢复这些值，只需预先存储它们，然后再次设置它们。

```
PhoneApplicationFrame frame = (PhoneApplicationFrame)Application.Current.RootVisual;

PhoneApplicationPage page = (PhoneApplicationPage)frame.Content;

// Save the transitions

NavigationInTransition oldIn = TransitionService.GetNavigationInTransition(page);

NavigationOutTransition oldOut = TransitionService.GetNavigationOutTransition(page);

// Clear the transitions

TransitionService.SetNavigationInTransition(page, null);

TransitionService.SetNavigationOutTransition(page, null);

// Restore the transitions

TransitionService.SetNavigationInTransition(page, oldIn);

TransitionService.SetNavigationOutTransition(page, oldOut); 
```

# javascript - 使用 jQuery/JSON 的导航菜单

> ID：14564337
> 
> 赞同：-1
> 
> 时间：2013-01-28T14:36:27.937
> 
> 标签：javascript, jquery, html, css

如何仅使用 jQuery/JSON 构建以下导航菜单？ ![在此处输入图像描述](../Images/4a7468b3f12d0e6af9324665f438493b.png)

我的 JSON 如下；

```
{
   "general":{
      "logo":"assets/images/logo.png",
      "name" : "Company Name"
   },
   "navigation":[
      {
         "title":"Home",
         "link":"index.html"
      },
      {
         "title":"Products",
         "link":"product.html",
         "subnav":[
            {
               "title":"Webapps",
               "link":"products/w.html"
            },
            {
               "title":"Mobile Apps",
               "link":"products/m.html"
            }
         ]
      }
   ]
} 
```

我会避免使用 jQuery 以外的任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T16:12:14.253

如果您的问题只是遍历 json..这可能会有所帮助。

```
for (i in jar.navigation) {
                alert(jar.navigation[i].title);
                var hassub = (jar.navigation[i].subnav != null);                
                if (hassub) {                                        
                    for (j in jar.navigation[i].subnav) {
                        alert(jar.navigation[i].subnav[j].title);
                    }}
            } 
```

# graphite - 在作曲家中显示时，有没有办法按范围忽略值？

> ID：14564338
> 
> 赞同：5
> 
> 时间：2013-01-28T14:36:28.250
> 
> 标签：graphite

Graphite URL API 中是否有一个函数允许我们忽略某个范围内（或外）的值？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T08:44:38.710

相信你可以看看[`removeAboveValue`](http://graphite.readthedocs.org/en/0.9.10/functions.html#graphite.render.functions.removeAboveValue)and[`removeBelowValue`](http://graphite.readthedocs.org/en/0.9.10/functions.html#graphite.render.functions.removeBelowValue)函数。

例如，要排除低于 2 和高于 10 的值：

```
http://host/render&target=removeAboveValue(removeBelowValue(a.b.c, 2), 10) 
```

忽略一个范围*内*的值有点困难，但它可能可以通过对先前已过滤掉数据（未经测试）的系列求和来实现：

```
http://host/render&target=sum(removeAboveValue(a.b.c, 2), removeBelowValue(a.b.c, 10)) 
```

# eclipse - 每次运行后 Eclipse 输出执行时间

> ID：14564339
> 
> 赞同：7
> 
> 时间：2013-01-28T14:36:29.017
> 
> 标签：eclipse, eclipse-plugin

我知道我们可以在程序开始和结束时使用**System.printTimeinMillis()方法。**但是想象一下，对项目中的每个可执行文件都有这个，并在 CVS 中签入该代码。

运行 Junit 测试用例时，我从附件中看到测试用例的执行时间为**14.662 秒**。当您一遍又一遍地运行程序时，进行代码更改是查看是否有任何改进的好方法。

有什么方法（内置选项或插件）我可以让 Eclipse 在控制台上每次执行后打印出时间？

我遇到了一个**[插件](http://www.eclipse.org/tptp/home/downloads/?ver=4.7.2)**，但它不适用于 Eclipse Juno 4.1 版本。

![在此处输入图像描述](../Images/6bc0c15e1ad8c927af274f0f5246007f.png)

# ocaml - ocaml 对象语法 `object(...)` 的含义是什么？

> ID：14564341
> 
> 赞同：2
> 
> 时间：2013-01-28T14:36:34.280
> 
> 标签：ocaml

Ocaml中的“object（self：something）”是什么意思，继承？

```
class tcp_messaging my_address my_cookie (drop_it: drop_function) =
....
object(self : # messaging ) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T16:52:17.477

类名前面的尖号表示至少包含类的类型的类类型，所以它或多或少是一个接口表示。

Ocaml 在其实现中没有特殊的关键字来引用对象（例如`this`C++ 中的关键字）。相反，它提供了一种灵活的语法来定义将用于引用对象实例的名称（在这种情况下使用名称`self`）。看来这个命名实际上是普遍使用的（这是一种实践），所以你会经常看到它。

所以基本上，该语法允许您将对象绑定到一个名称，并在该名称上添加一个约束，以便实现必须至少实现该类型。如果没有`#`，则类实现将需要完全属于该类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T14:55:53.280

顺便说一句，`self`绑定对象本身的值。阅读以下[手册](http://caml.inria.fr/pub/docs/manual-ocaml-4.00//manual017.html#class-body)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T14:57:08.227

`object(self)`定义当前对象的值。

该`: #messaging`位表示它实现了接口`messaging`。

# php - 根据第二个数组设置数组的顺序

> ID：14564344
> 
> 赞同：0
> 
> 时间：2013-01-28T14:36:38.267
> 
> 标签：php, arrays

我有一个数组如下：

```
array(1) { 
    [0]=> string(1) "2" 
    [1]=> string(1) "1" 
    [2]=> string(1) "3"  
    [3]=> string(1) "4" 
    [4]=> string(1) "5" 
    [5]=> string(1) "6" 
    [6]=> string(1) "7" 
  } 
} 
```

我想做的是根据上述命令订购第二个数组（随用户选择而变化）：

```
Array {
   "Two" => "Two",
   "One" => "One",
   "Three" => "Three",
   "Four" => "Four",
   "Five" => "Five",
   "Six" => "Six"
   "Seven" => "Seven"     
} 
```

编辑：用户访问有 jQuery 可排序列表的页面 - 他们随意订购并保存到数据库中，我现在要做的是当用户返回页面时确保清单按照他们列出的顺序排列。所以这是他们设定的顺序。

第二个数组是填充 .PHP 页面上列表的数组，这就是为什么我需要它来匹配第一个数组。

我看过，`array_multisort`但没有喜悦。

我假设我会在 PHP 中做一些循环来填充第二个数组，然后再使用它，但我很挣扎 - 有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T15:34:24.490

我猜[array_combine](http://php.net/manual/en/function.array-combine.php)是你正在寻找的：

```
$indexes = array('2','1');
$indexes = array_merge($indexes, range(3,7)); // used range to fill missing indexes
$values = array('two', 'one', 'three', 'four', 'five', 'six', 'seven');
$result=array_combine($indexes, $values);

ksort($result); // sort by keys

print_r($result);
// Array
// (
//   [1] => one
//   [2] => two
//   [3] => three
//   [4] => four
//   [5] => five
//   [6] => six
//   [7] => seven
// ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T15:03:37.273

我不完全理解你的目标，但我认为下面的代码会产生你想要的结果

```
$data = array("two", "one", "three", "seven");
$result = array();
foreach ( $data as $item) {
    $result[$item] = $item;
}

print_r($result); 
```

这将输出

```
Array
(
  [two] => two
  [one] => one
  [three] => three
  [seven] => seven
) 
```

# c# - 为什么不可访问的成员被认为是继承的？

> ID：14564347
> 
> 赞同：2
> 
> 时间：2013-01-28T14:36:49.080
> 
> 标签：c#, inheritance

C# 规范指出：

> 基类成员声明的可访问性不控制该成员是否被继承——继承扩展到任何不是实例构造函数、静态构造函数或析构函数的成员。但是，继承的成员可能无法在派生类型中访问，因为它声明了可访问性，或者因为它被类型本身的声明隐藏了。

为什么一个不可访问的成员被认为是继承的？为什么做出这样的区分/实际？

作为一个具体的例子

```
class A
{
    const string foo = "c";

    internal void DoWork() { }
}

class B: A
{
    const string bar = "d";//renamed to foo does not appear to have a noticeable impact
    B() { bar = foo; }//inaccessible due to protection level

    internal new void DoWork() { }//hide inherited member
} 
```

在我看来，在运行时继承意味着共享状态和/或行为。在这种情况下`foo`不会发生这种事情。

至于`B`是否继承`DoWork()`. 因此，`DoWork()`成为其中的一员`B`是直观且相关的。另一方面，为什么被`foo`视为 的成员`B`？ `B`无法读取或写入`foo`。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-28T14:39:41.323

在您的情况下，您正在谈论`const`的是隐式静态的。无论如何，静态成员实际上都不会被继承。刚刚检查了规范，这意味着静态成员*是*继承的 - 但由于它们不代表状态并且不能成为多态性的一部分，它至少是一种“不同”的继承。我认为静态成员只是对派生类“通过简单名称可用”，假设它们完全可以访问 - 换句话说，它与名称解析有关，而不是真正的继承。

如果这是一个私有*实例*变量，那么它将是从 派生的任何类型的实例的任何实例的状态的一部分`A`，因此它将*是*继承状态。如果您考虑继承对象的状态和行为，我认为这是有道理的。

（您可能对静态部分或私有部分感兴趣；它们有点正交。）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-28T16:59:32.803

这篇文章可能会对你有所帮助。

[http://ericlippert.com/2011/09/19/inheritance-and-representation/](http://ericlippert.com/2011/09/19/inheritance-and-representation/)

> 为什么一个不可访问的成员被认为是继承的？为什么做出这样的区分/实际？

最好问一个相反的问题：为什么制定一个规则说不可访问的成员不被继承？让我们考虑这样一个规则的后果。

首先，如果你有

```
class B
{
  internal int x; 
}
class D1 : B {}
// in another assembly
class D2 : B {} 
```

你会说 x 是由 D1 继承的，而不是由 D2 继承的？这似乎很奇怪。或者这个案例怎么样：

```
class B
{
  private int x;
  private class D1 : B {}
}
class D2 : B {} 
```

同样，您会说 x 是由 D1 继承的，而不是由 D2 继承的？

*在每种情况下，派生类都有一个整数字段 x* ，但是您会仅仅因为在某些源代码位置中无法通过名称访问该字段而否认这一*事实吗？*将“继承”的定义与“可访问”的定义联系在一起，有什么令人信服的价值？

简单地使这两个概念正交要容易得多。“继承”的意思是“这个基类型的成员也是派生类型的成员”。可访问性是访问源代码是否在声明成员的可访问域内的问题。它们彼此关系不大，所以我们不要不必要地将它们混为一谈。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-28T15:12:36.423

这很容易通过演示来解释：

```
public class Parent
{
    private int value;
    public virtual int GetValue()
    {
        return value;
    }
}

public class Child : Parent
{
    public int GetOtherValue()
    {
        //"value" is no accessible in this scope
        return GetValue() + 1;
    }
} 
```

创建对象时，会为该类型的所有实例字段分配内存。 `Child`实际上有 1 个实例字段，而不是 0。 `value`继承自`Parent`并且是 的实例字段`Child`。当你创建一个`Child`实例时，它有它自己的价值`value`。`value`虽然定义中无法访问该字段`Child`（因为它是私有的）；它只能通过`Parent`公开的可访问的方法/属性*来*访问。

# javascript - Joomla 自定义表单字段类型

> ID：14564348
> 
> 赞同：2
> 
> 时间：2013-01-28T14:36:50.297
> 
> 标签：javascript, html, joomla, joomla2.5, joomla-extensions

大家好，我正在 Joomla 2.5/3 中开发自定义表单字段类型。但是我的代码不起作用，我的意思是当我按下它时，它不会显示消息并且它有不同的 ID。这是我的代码：

```
{module}/elements/testfield.php 
```

* * *

```
<?php

/**
 * @copyright   Copyright (C) 2011 Cedric KEIFLIN alias ced1870
 * http://www.joomlack.fr
 * @license     GNU/GPL
 * */
// no direct access
defined('_JEXEC') or die('Restricted access');

class JFormFieldTestfield extends JFormField {

    protected $type = 'testfield';

    protected function getInput() {
        $document = JFactory::getDocument();
        $html = '<input name="' . $this->name . '" id="xxxfffaaa" value="' . $this->value . '" onclick="" />';
        return $html;
    }

    protected function getLabel() {
    }

} 
```

*

```
{module}/{module_name}.xml 
```

* * *

```
...     
<fields name="params">
            <fieldset name="basic">

                ....
                <field name="blablaname" type="testfield" label="this is label"/>

            </fieldset>
        </fields> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T16:24:19.243

您需要将以下代码添加到`fields`标签中

```
addfieldpath="modules/mod_mymodule/elements" 
```

所以你的代码看起来像这样：

```
<fields name="params" addfieldpath="modules/mod_mymodule/elements">
    <fieldset name="basic">
        <field name="blablaname" type="testfield" label="this is label"/>
    </fieldset>
</fields> 
```

# symfony - 附加内容以阻止多个子模板

> ID：14564351
> 
> 赞同：2
> 
> 时间：2013-01-28T14:36:57.020
> 
> 标签：symfony, twig

关于如何用树枝附加块有几个问题。答案总是使用继承和使用，然后调用 parent()。不知何故，我不知道这在我的具体情况下是如何工作的：

base.html.twig

```
{% block content %}{% endblock %}
{% block appendable %}
{% endblock %}
{% block another_appendable %}
{% endblock %} 
```

site.html.twig

```
{% extends base.html.twig %}
{% block content %}
{# Here use/include/embed, i dont know #}
{% use sub1.html.twig %}
{% use sub2.html.twig %}
{% endblock content %} 
```

sub1.html.twig

```
Some content that should be directly rendered
{% block appendable %}
some stuff that should be added to appendable
{% endblock %}
{% block another_appendable %}
This content should be added to "another appendable"
{% endblock %} 
```

sub2.html.twig

```
{% block appendable %}
additional stuff that should be appended
{% endblock %} 
```

我希望 sub1 和 sub2 的内容都呈现在可附加内容中。我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-12-04T16:53:42.640

我们走吧。我有同样的问题，这个解决方案对我有用：

base.html.twig

```
{% block content %}{% endblock %} 
```

site.html.twig

```
{% extends base.html.twig %}

{% use sub1.html.twig with appendable as appendableContent, another_appendable as another_appendableContent %}

{% block content %}

    {% block appendable -%}
        {{ block('appendableContent') }}
    {% endblock %}

    {% block another_appendable -%}
        {{ block('another_appendableContent') }}
    {% endblock %}

{% endblock %} 
```

sub1.html.twig

```
{% use sub2.html.twig with appendable as appendableContentAlternative %}

{% block appendable %}
    some stuff that should be added to appendable<br/><br/>

    {{ block('appendableContentAlternative') }}
{% endblock %}

{% block another_appendable %}
    This content should be added to "another appendable"<br/><br/>
{% endblock %} 
```

sub2.html.twig

```
{% block appendable %}
    additional stuff that should be appended<br/><br/>
{% endblock %} 
```

根据我的研究，这种技术称为“水平重用”，这是文档：

[http://twig.sensiolabs.org/doc/tags/use.html](http://twig.sensiolabs.org/doc/tags/use.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T14:48:03.677

要包含模板，您需要使用`include`关键字，而不是`use`关键字：

```
{% block appendable %}

    {# Assuming your sub1 template is in AcmeDemoBundle/Resources/views/MySub/sub1.html.twig #}
    {% include "AcmeDemoBundle:MySub:sub1.html.twig" %}

{% endblock appendable %} 
```

**AcmeDemoBundle:MySub:sub1.html.twig**可能如下所示：

```
<b>Put directly your code there, no need to use the blocks.</b> 
```

## 使用继承

如果您愿意，可以使用`{{ parent() }}`关键字来使用继承。例如，如果您想`sub1.html.twig`默认包含但附加`sub2.html.twig`在您的子模板中，您可以执行以下操作：

base.html.twig

```
{% block content %}

    {% include "AcmeDemoBundle:MySub:sub1.html.twig" %}

{% endblock %} 
```

site.html.twig

```
{% extends base.html.twig %}

{% block content %}

    {# render what happens in the parent content block #}
    {{ parent() }}

    {# and append sub2.html.twig as well #}
    {% include "AcmeDemoBundle:MySub:sub2.html.twig" %}

{% endblock content %} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-14T10:42:38.537

我想分享我自己解决这个问题的方法。我实现了自己的 Twig 扩展，它实现了自定义标签`widget`（我使用 Twig 标签`embed`作为源）。

## 扩大

小部件节点.php：

```
namespace Artprima\Bundle\TwigWidgetTagBundle\Twig\Extension;

/**
 * Class WidgetNode
 *
 * @author Denis V
 *
 * @package Artprima\Bundle\TwigWidgetTagBundle\Twig\Extension
 */
class WidgetNode extends \Twig_Node_Include
{
    // we don't inject the module to avoid node visitors to traverse it twice (as it will be already visited in the main module)
    public function __construct($filename, $index, \Twig_Node_Expression $variables = null, $only = false, $ignoreMissing = false, $lineno, $tag = null)
    {
        parent::__construct(new \Twig_Node_Expression_Constant('not_used', $lineno), $variables, $only, $ignoreMissing, $lineno, $tag);

        $this->setAttribute('filename', $filename);
        $this->setAttribute('index', $index);
    }

    /**
     * Compiles the node to PHP.
     *
     * @param $compiler \Twig_Compiler A Twig_Compiler instance
     */
    public function compile(\Twig_Compiler $compiler)
    {
        $compiler->addDebugInfo($this);

        if ($this->getAttribute('ignore_missing')) {
            $compiler
                ->write("try {\n")
                ->indent()
            ;
        }

        $this->addGetTemplate($compiler);

        $compiler->raw('->displayBlock(');

        $compiler->string('widget');

        $compiler->raw(', ');

        $this->addTemplateArguments($compiler);

        $compiler->raw(");\n");

        if ($this->getAttribute('ignore_missing')) {
            $compiler
                ->outdent()
                ->write("} catch (Twig_Error_Loader \$e) {\n")
                ->indent()
                ->write("// ignore missing template\n")
                ->outdent()
                ->write("}\n\n")
            ;
        }
    }

    protected function addGetTemplate(\Twig_Compiler $compiler)
    {
        $compiler
            ->write("\$this->env->loadTemplate(")
            ->string($this->getAttribute('filename'))
            ->raw(', ')
            ->string($this->getAttribute('index'))
            ->raw(")")
        ;
    }
} 
```

WidgetTokenParser.php：

```
namespace Artprima\Bundle\TwigWidgetTagBundle\Twig\Extension;

/**
 * Class WidgetTokenParser
 *
 * @author Denis V
 *
 * @package Artprima\Bundle\TwigWidgetTagBundle\Twig\Extension
 */
class WidgetTokenParser extends \Twig_TokenParser_Include
{
    /**
     * Parses a token and returns a node.
     *
     * @param \Twig_Token $token A Twig_Token instance
     *
     * @return \Twig_NodeInterface A Twig_NodeInterface instance
     */
    public function parse(\Twig_Token $token)
    {
        $stream = $this->parser->getStream();

        $parent = $this->parser->getExpressionParser()->parseExpression();

        list($variables, $only, $ignoreMissing) = $this->parseArguments();

        // inject a fake parent to make the parent() function work
        $stream->injectTokens(array(
            new \Twig_Token(\Twig_Token::BLOCK_START_TYPE, '', $token->getLine()),
            new \Twig_Token(\Twig_Token::NAME_TYPE, 'extends', $token->getLine()),
            new \Twig_Token(\Twig_Token::STRING_TYPE, '__parent__', $token->getLine()),
            new \Twig_Token(\Twig_Token::BLOCK_END_TYPE, '', $token->getLine()),
        ));

        $module = $this->parser->parse($stream, array($this, 'decideBlockEnd'), true);

        // override the parent with the correct one
        $module->setNode('parent', $parent);

        $this->parser->embedTemplate($module);

        $stream->expect(\Twig_Token::BLOCK_END_TYPE);

        return new WidgetNode($module->getAttribute('filename'), $module->getAttribute('index'), $variables, $only, $ignoreMissing, $token->getLine(), $this->getTag());
    }

    public function decideBlockEnd(\Twig_Token $token)
    {
        return $token->test('endwidget');
    }

    /**
     * Gets the tag name associated with this token parser.
     *
     * @return string The tag name
     */
    public function getTag()
    {
        return 'widget';
    }

} 
```

模板标签扩展.php：

```
namespace Artprima\Bundle\TwigWidgetTagBundle\Twig\Extension;

/**
 * Class TemplateTagsExtension
 *
 * @author Denis V
 *
 * @package Artprima\Bundle\TwigWidgetTagBundle\Twig\Extension
 */
class TemplateTagsExtension extends \Twig_Extension
{
    /**
     * @inheritdoc
     */
    public function getTokenParsers()
    {
        return array(
            new WidgetTokenParser(),
        );
    }

    /**
     * Returns the name of the extension.
     *
     * @return string The extension name
     */
    public function getName()
    {
        return 'template_tags';
    }
} 
```

服务.yml：

```
parameters:
    artprima.twig.extension.template_tags.class: Artprima\Bundle\TwigWidgetTagBundle\Twig\Extension\TemplateTagsExtension

services:
    artprima.twig.extension.template_tags:
        class: %artprima.twig.extension.template_tags.class%
        tags:
            - { name: twig.extension } 
```

## 使用示例

视图/块/widget.html.twig：

```
{# please note, that only "widget" block is rendered, all other blocks can be used inside the "widget" block #}
{# if you don't define the "widget" block, nothing will be rendered #}
{% block widget %}
    <div class="{{ block('widget_box_class') }}">
        {{ block('widget_header') }}
        {{ block('widget_body') }}
    </div>
{% endblock %}

{% block widget_header %}
    <div class="{{ block('widget_header_class') }}">
        {{ block('widget_title') }}
        {% if display_toolbar is defined and display_toolbar %}{{ block('widget_toolbar') }}{% endif %}
    </div>
{% endblock %}

{% block widget_body %}
    <div class="{{ block('widget_main_class') }}">
        {{ block('widget_main') }}
    </div>
{% endblock %}

{% block widget_title %}
    <h5 class="widget-title">{{ block('widget_title_text') }}</h5>
{% endblock %}

{% block widget_title_text %}(undefined){% endblock %}

{% block widget_toolbar %}
    <div class="widget-toolbar">
        {{ block('widget_toolbar_inner') }}
    </div>
{% endblock %}

{% block widget_toolbar_inner %}{% endblock %}

{% block widget_box_class %}{% spaceless %}widget-box{% endspaceless %}{% endblock %}

{% block widget_main_class %}{% spaceless %}widget-main{% endspaceless %}{% endblock %}

{% block widget_main %}{% endblock %}

{% block widget_header_class %}{% spaceless %}widget-header{% endspaceless %}{% endblock %} 
```

视图/仪表板/小部件/sample.html.twig

```
{% widget "ArtprimaSampleBundle:Blocks:widgets.html.twig" %}
    {% block widget_title_text %}{{ "widget.records_creation_history"|trans }}{% endblock %}
    {% block widget_main_class %}{% spaceless %}no-padding {{ parent() }}{% endspaceless %}{% endblock %}
    {% block widget_main %}
        <table class="table table-striped table-bordered table-hover no-margin-bottom">
            <thead>
            <tr>
                <th>Description</th>
                <th>Amount</th>
            </tr>
            </thead>
            <tbody>
            <tr>
                <td>{{ "widget.number_of_countries.created"|trans }}</td>
                <td>{{ dashboard.countries.created }}</td>
            </tr>
            <tr>
                <td>{{ "widget.number_of_users.created"|trans }}</td>
                <td>{{ dashboard.users.created }}</td>
            </tr>
            </tbody>
        </table>
    {% endblock %}
{% endwidget %} 
```

## 概括

因此，如您所见，使用我的扩展程序，可以包含一个模板并重用其中的块。如果您需要多个小部件，您可以`widget`使用相同的源模板在模板中有多个标签，并且块内容不会重叠。本质上，它就像使用 Twig's 嵌入模板`embed`（我使用这个标签作为我的扩展的源），但唯一（和主要）不同 - 它只呈现*名为*“widget”的块。所有其他块都被忽略，但可以在“小部件”块内使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-30T17:46:04.247

如果您只在子模板中定义块，您可以使用该[`block`](https://twig.symfony.com/doc/functions/block.html)函数并显式替换：

base.html.twig

```
{% block content %}{% endblock %}
{% block appendable %}{% endblock %}
{% block another_appendable %}{% endblock %} 
```

site.html.twig

```
{% extends base.html.twig %}

{% block appendable %}
{{ block('appendable', 'sub1.html.twig') }}
{{ block('appendable', 'sub2.html.twig') }}
{% endblock %}

{% block another_appendable %}
This content should be added to "another appendable"
{{ block('another_appendable', 'sub1.html.twig') }}
{% endblock %} 
```

sub1.html.twig

```
{% block appendable %}
some stuff that should be added to appendable
{% endblock %}

{% block another_appendable %}
This content should be added to "another appendable"
{% endblock %} 
```

sub2.html.twig

```
{% block appendable %}
additional stuff that should be appended
{% endblock %} 
```

# sql-server - Any 与 FirstOrDefault 的性能

> ID：14564352
> 
> 赞同：2
> 
> 时间：2013-01-28T14:36:57.597
> 
> 标签：sql-server, entity-framework

所以我一直在挖掘 EF 为我们的应用程序生成的查询，我注意到一些奇怪的 sql 生成`Any`调用 - 它们似乎过于复杂。`Any`似乎生成`case when (x) then 1 when (not x) then 0 end`- 为什么不使用其他？这样 SQL server 必须在`Any`应该返回的情况下执行两次相同的查询`false`。我想出了在那些使用 的情况下似乎更快的解决方法`Where(cond).Select(q => true).FirstOrDefault()`，但我仍然对这是否只是疏忽或它有一些我遗漏的意义感兴趣。

`context.Books.Any(b => b.Id == bookId);`

```
declare @p__linq__0 Int = 1;

SELECT 
CASE WHEN ( EXISTS (SELECT 
    1 AS [C1]
    FROM [Books] AS [Extent1]
    WHERE [Extent1].[ID] = @p__linq__0
)) THEN cast(1 as bit) WHEN ( NOT EXISTS (SELECT 
    1 AS [C1]
    FROM [Books] AS [Extent2]
    WHERE [Extent2].[ID] = @p__linq__0
)) THEN cast(0 as bit) END AS [C1]
FROM  ( SELECT 1 AS X ) AS [SingleRowTable1] 
```

`context.Books.Where(b => b.ID == bookId).Select(b => true).FirstOrDefault();`

```
declare @p__linq__0 Int = 1;

SELECT TOP (1) 
cast(1 as bit) AS [C1]
FROM [Books] AS [Extent1]
WHERE [Extent1].[ID] = @p__linq__0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T14:48:58.173

在您看到某物不存在之后，很明显它确实不存在，因此没有必要检查 agin 是否真的不存在。这只是 linq 产生过于复杂的查询的情况之一。您的解决方法有效，但它不一定像人们希望的那样容易理解，因此我建议将原始 linq 的性能降低，直到它真正成为性能问题。只需确保在 Id 列上有一个索引。

# android - 如何为 android phonegap 制作 HTML 闪屏？

> ID：14564356
> 
> 赞同：5
> 
> 时间：2013-01-28T14:37:02.107
> 
> 标签：android, cordova

我想知道如何为 android phonegap 应用程序而不是 png 图像制作 HTML 闪屏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T15:33:11.083

考虑到您将看到应用程序的黑屏启动然后创建 Web 视图的白屏，那么 HTML 启动屏幕非常无用，然后您必须等待加载您的 html。您最好使用本机启动画面并在加载 HTML 时将其关闭。

[phonegap - Android 应用程序的启动画面](https://stackoverflow.com/questions/8156841/phonegap-splash-screen-for-android-app/8157103#8157103)

# node.js - 实时 node.js 应用程序与 mongodb

> ID：14564357
> 
> 赞同：0
> 
> 时间：2013-01-28T14:37:06.550
> 
> 标签：node.js, mongodb, real-time-updates

我有一个 node.js 应用程序，它每 x 秒轮询一次 mongodb 数据库以显示数据变化。

我认为必须有更好的方法来做到这一点，使用 node.js 环境的所有功能......这是触发 mongodb 数据变化并使用节点显示它们的最有效方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T14:41:18.220

您可以使用可尾光标

[http://docs.mongodb.org/manual/tutorial/create-tailable-cursor/](http://docs.mongodb.org/manual/tutorial/create-tailable-cursor/)

# python-2.7 - Python中的MySQL；第一个循环后连接在 for 循环中关闭

> ID：14564359
> 
> 赞同：2
> 
> 时间：2013-01-28T14:37:19.657
> 
> 标签：python-2.7, database-connection, mysql-python

我的 MySQL 连接在一个循环周期后关闭。我可能在使用 mysql 对象时做错了什么。它输出一个周期，然后以错误退出。

这是我的代码：

```
cnx = mysql.connector.connect(**config)
cursor = cnx.cursor()

fetch_ids = cnx.cursor()
query = ("SELECT * FROM items WHERE has_recipe = 1")
fetch_ids.execute(query)

count = 0
for (data) in fetch_ids:
    fetch_details = cnx.cursor()
    query = ("SELECT * FROM recipes WHERE recipe_id = " + str(data[1]))
    fetch_details.execute(query) 
```

我得到的错误是：

```
Traceback (most recent call last):
  File "trade.py", line 47, in <module>
    fetch_details = cnx.cursor()
  File "/Users/allendar/Desktop/mysql/connector/connection.py", line 1076, in cursor
    raise errors.OperationalError("MySQL Connection not available.")
mysql.connector.errors.OperationalError: MySQL Connection not available. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T15:30:33.773

MySQL 不支持真正的游标，并且该库仅模拟它们。因此，您一次只能为每个连接运行一个游标。

在循环中，您打开了第二个游标，这不是 MySQL 可以处理的。在将游标用于新查询之前，读取第一个查询中的所有行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T15:21:14.950

你调用 cnx.cursor() 太多次了。只需像您一样第一次调用游标，然后为以下查询重用相同的对象。当你处理完你的数据库后，记得在某处放置一个 cnx.close() 来清理会话。

# javascript - 以结构化方式使用jquery按条件创建动态元素

> ID：14564364
> 
> 赞同：0
> 
> 时间：2013-01-28T14:37:35.463
> 
> 标签：javascript, jquery, html

有一种更好的方法可以使用 jquery 按条件构建或创建动态元素。现在用纯javascript编写的代码如下所示：

```
if (some_var == some_condition) {
 document.write("<tr>");
 document.write("<td></td>");
 document.write("<td>");
 document.write("<input type='BUTTON' onclick='CheckForm(this.form)' value='Enter'>");
 document.write("<input type='reset' value='Cancel'>");
 document.write("</td>");
 document.write("</tr>");
} 
```

如果很多代码都以这种方式编写，我会在网页上苦苦挣扎......我想建立一个更好的结构并将这段代码组织在可理解的块中。所以我需要以干净的方式处理动态设计、标记和代码。

如何使用 jquery more 修改上面的代码以使其更加活跃和高效？

有一些资源或文章可以帮助我使用 jquery 根据需要创建不同的 html 元素吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T14:43:23.120

好吧，有 2 种方法可以使用 jQuery 创建 html 元素，请使用最适合您的一种。第一个选项更快。

# 1

```
var $td = $('<tr><td>Hello world</td></tr>'); 
```

# 2

```
var $tr = $('<tr/>');
var $td = $('<td/>').text('Hello world'); 
```

然后你可以简单地做

```
$tr.append($td); 
```

等等......一个简化的例子，但你明白了。如果您想让我详细说明，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T14:50:24.283

你应该使用`document.createDocumentFragment()`

这样您就可以使用构建您的 html，然后根据需要附加它。

```
var data = document.createDocumentFragment();
data.appendChild('<tr><td>hello</td></tr>');
document.getElementById("some-table").appendChild(data); 
```

您不应该不断地操作 DOM，因为这样做代价高昂。

[文档片段](https://developer.mozilla.org/en-US/docs/DOM/document.createDocumentFragment)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T14:49:56.970

如果可能，您可以将 HTML 保留在文档中并通过 CSS 触发其可见性，例如：

**HTML**

```
<tr class="onCondition">Rest of the HTML</tr> 
```

**CSS**

```
.onCondition.hidden { display: none; } 
```

**JS**

```
if (someCondition) { $('.onCondition').addClass('hidden'); } // or .hide() and without CSS 
```

当然，这种方法在逻辑上也适用。

# c# - 在特定时间使用 ProgressBar

> ID：14564365
> 
> 赞同：-4
> 
> 时间：2013-01-28T14:37:46.027
> 
> 标签：c#, winforms

我希望`ProgressBar`在我的代码中的某个点开始并运行总秒数直到我的文件完成，当然我知道我的文件的运行需要多长时间。我尝试在 MSDN 上阅读，但我不明白如何使用它。

我的应用程序运行文件（wireshark 文件，使用 bittwist 发送数据包），每个文件将运行几秒钟，我希望该选项可以查看正在进行的进度。

例如，我想将`ProgressBar`跑步时间设置为 30 秒。
我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T14:49:19.317

也许你想要这样的东西：

```
public void AnimateProgBar (int milliSeconds)
{
    if (!timer1.Enabled)  {
        progressBar1.Value = 0;
        timer1.Interval = milliSeconds / 100;
        timer1.Enabled = true;
    }
}

private void timer1_Tick(object sender, EventArgs e)
{
    if (progressBar1.Value < 100) {
        progressBar1.Value += 1;
        progressBar1.Refresh();
    } else {
        timer1.Enabled = false;
    }
} 
```

然后你只需要打电话`AnimateProgBar(2000)`让你的`ProgressBar`动画在 2 秒内。

编辑：对不起，我在 VB.NET 中发布了代码。修改为 C#。
编辑：您可以添加处理程序并以这种方式调用函数（例如）：

```
 private void Form1_Load(object sender, EventArgs e)
    {
        this.timer1.Tick += new System.EventHandler(this.timer1_Tick);
        AnimateProgBar(2000);
    } 
```

# javascript - 无限滚动+砌体=不工作

> ID：14564369
> 
> 赞同：1
> 
> 时间：2013-01-28T14:37:54.010
> 
> 标签：javascript, jquery, html, jquery-masonry

在搜索了一段时间并尝试了多种“解决方案”之后，我认为是时候寻求帮助了。我已经尝试了几乎所有我能想到的东西，但似乎没有任何效果。

我正在使用简单的砌体和无限滚动代码，但它不起作用。任何帮助表示赞赏。

```
<html>
<head>
    <script src="../src/js/jquery.js"></script>
    <script src="../src/js/masonry.js"></script>
    <script src="../src/js/infinitescroll.js"></script>
    <script type="text/javascript">
        $(function(){
            var $container = $('#container');
            $container.imagesLoaded(function(){
                $container.masonry({
                    itemSelector: 'img',
                });
            });

            $container.infinitescroll({
                  navSelector  : '#navigation',
                  nextSelector : '#navigation a',
                  itemSelector : 'img',
            },

            function( newElements ) {
                var $newElems = $( newElements ).css({ opacity: 0 });
                $newElems.imagesLoaded(function(){
                    $newElems.animate({ opacity: 1 });
                    $container.masonry( 'appended', $newElems, true ); 
                });
            });
        });
    </script>
</head>
<body>
    <div id="container">
        <img src="../src/1.jpg"/>
        <img src="../src/2.jpg"/>
        <img src="../src/3.jpg"/>
        <img src="../src/1.jpg"/>
        <img src="../src/2.jpg"/>
        <img src="../src/3.jpg"/>
    </div>
    <div id="navigation">
        <a href="index.html"></a>
    </div>
</body> 
```

总结一下；无限滚动将不起作用。我不知道我做错了什么，所以我在这里。也不确定这是否与砌体部分有关。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T18:30:14.277

似乎无限滚动不适用于最新的 jQuery 版本（1.9.0 atm）。切换到旧版本，特别是 1.7.1，解决了所有问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T18:43:54.223

jQuery 1.9 也破坏了很多向后兼容性。您也可以尝试将[jQuery migrate](https://github.com/jquery/jquery-migrate/)与 jQuery 1.9 一起使用，看看是否可以让它工作。

# python - Python获取文本文件中每行的最后一个数字并将其放入列表中

> ID：14564370
> 
> 赞同：0
> 
> 时间：2013-01-28T14:37:54.667
> 
> 标签：python, arrays, list, text

我只想要每行的最后一个数字。

```
with open(home + "/Documents/stocks/" + filePath , newline='') as f:
stockArray = (line.split(',') for line in f.readlines())
    for line in stockArray:
        List = line.pop()
        #print(line.pop())
        #print(', '.join(line))
else:
    print("Finished") 
```

我尝试使用 line.pop() 来获取最后一个元素，但它只从一行中获取它？如何从每一行获取它并将其存储在列表中？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T14:39:21.343

你可能只想要这样的东西：

```
last_col = [line.split(',')[-1] for line in f] 
```

对于更复杂的 csv 文件，您可能需要查看`csv`标准库中的模块，因为它可以正确处理字段的引用等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T15:36:39.917

```
my_list = []
with open(home + "/Documents/stocks/" + filePath , newline='') as f:
    for line in f:
        my_list.append(line[-1]) # adds the last character to the list 
```

那应该这样做。

如果要从文件中添加列表的最后一个元素：

```
my_list = []
with open(home + "/Documents/stocks/" + filePath , newline='') as f:
    for line in f:
        my_list.append(line.split(',')[-1]) # adds the last character to the list 
```

# zend-framework2 - 自动加载在哪里？试图进行单元测试

> ID：14564373
> 
> 赞同：0
> 
> 时间：2013-01-28T14:38:10.953
> 
> 标签：zend-framework2

我正在关注关于 zend 框架 2的入门[教程](http://framework.zend.com/manual/2.0/en/user-guide/skeleton-application.html)，在它建议使用测试[的主题之一中，它建议](http://framework.zend.com/manual/2.0/en/user-guide/unit-testing.html)[的代码](http://framework.zend.com/manual/2.0/en/user-guide/unit-testing.html#your-first-controller-test)是：

```
namespace ApplicationTest\Controller;

use ApplicationTest\Bootstrap;
use Zend\Mvc\Router\Http\TreeRouteStack as HttpRouter;
use Application\Controller\IndexController;
use Zend\Http\Request;
use Zend\Http\Response;
use Zend\Mvc\MvcEvent;
use Zend\Mvc\Router\RouteMatch;
use PHPUnit_Framework_TestCase;

class IndexControllerTest extends PHPUnit_Framework_TestCase
{
    protected $controller;
    protected $request;
    protected $response;
    protected $routeMatch;
    protected $event;

    protected function setUp()
    {
        $serviceManager = Bootstrap::getServiceManager();
        $this->controller = new IndexController();
        $this->request    = new Request();
        $this->routeMatch = new RouteMatch(array('controller' => 'index'));
        $this->event      = new MvcEvent();
        $config = $serviceManager->get('Config');
        $routerConfig = isset($config['router']) ? $config['router'] : array();
        $router = HttpRouter::factory($routerConfig);

        $this->event->setRouter($router);
        $this->event->setRouteMatch($this->routeMatch);
        $this->controller->setEvent($this->event);
        $this->controller->setServiceLocator($serviceManager);
    }
    public function testIndexActionCanBeAccessed()
    {
        $this->routeMatch->setParam('action', 'index');

        $result   = $this->controller->dispatch($this->request);
        $response = $this->controller->getResponse();

        $this->assertEquals(200, $response->getStatusCode());        

    }
} 
```

如您所见，没有`__autoload($class)`.

为了手动使其工作，我添加了`include "../../Bootstrap.php";`它确实解决了问题，但我记得一旦我可以让这段代码工作，并且教程似乎没有忘记概念上明显的东西并且在主题评论中没有关于它的反馈，可能有是我想念的东西，上面的代码可能会如何工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T10:27:16.420

我设法让它工作，但注意到你不能使用 phpUnit 的扩展请求和响应对象。这些是早期 2.0 版本的说明。至少在 2.0.7 之后，指令有很大不同，代码也更干净：

[http://zf2.readthedocs.org/en/latest/user-guide/unit-testing.html](http://zf2.readthedocs.org/en/latest/user-guide/unit-testing.html)

```
<?php

namespace ApplicationTest\Controller;

use Zend\Test\PHPUnit\Controller\AbstractHttpControllerTestCase;

class IndexControllerTest extends AbstractHttpControllerTestCase
{
    public function setUp()
    {
        $this->setApplicationConfig(
            include '/path/to/application/config/test/application.config.php'
        );
        parent::setUp();
    }

    public function testIndexActionCanBeAccessed()
    {
        $this->dispatch('/');
        $this->assertResponseStatusCode(200);

        $this->assertModuleName('application');
        $this->assertControllerName('application_index');
        $this->assertControllerClass('IndexController');
        $this->assertMatchedRouteName('home');
    }
} 
```

在这个例子中，测试是通过扩展 Zend 的控制器测试用例来进行的，这是使用 zf1 进行控制器测试的方式。

# ios6 - 有没有办法选择在 UITable iOS 中使用的特定图像？

> ID：14564374
> 
> 赞同：0
> 
> 时间：2013-01-28T14:38:11.560
> 
> 标签：ios6, uiimageview, uiimage

我有一个 UITable，我喜欢在单元格的详细视图中添加图像。我可以处理从相机胶卷或相机中选择任何图像：

```
cell.imageView.image = someImage; 
```

但是我如何定义一个特定的图像 - 在上面的例子中：“someImage”，以便下次运行应用程序时，为每个项目显示正确的图像。

更新。这是我用来捕捉/选择图像的代码..

```
- (IBAction)btnTakePicture_Clicked:(id)sender
{
    NSLog(@"%s", __FUNCTION__);
    UIActionSheet *actionSheet = [[UIActionSheet alloc] initWithTitle:@"Select Image from..." delegate:self cancelButtonTitle:@"Cancel" destructiveButtonTitle:nil otherButtonTitles:@"Camera", @"Image Gallary", nil];
    actionSheet.actionSheetStyle = UIActionSheetStyleBlackTranslucent;
    actionSheet.alpha=0.90;
    actionSheet.tag = 1;
    [actionSheet showInView:self.view];
}

- (void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex
{
    NSLog(@"%s", __FUNCTION__);
    switch (actionSheet.tag)
    {
        case 1:
            switch (buttonIndex)
        {
            case 0:
            {
#if TARGET_IPHONE_SIMULATOR

                UIAlertView* alert = [[UIAlertView alloc] initWithTitle:@"Ooops" message:@"Camera not available." delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
                [alert show];

#elif TARGET_OS_IPHONE

                UIImagePickerController *picker = [[UIImagePickerController alloc] init];
                picker.sourceType = UIImagePickerControllerSourceTypeCamera;
                picker.delegate = self;
                //picker.allowsEditing = YES;
                [self presentViewController:picker animated:YES completion:nil];

#endif
            }
                break;
            case 1:
            {
                UIImagePickerController *picker = [[UIImagePickerController alloc] init];
                picker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;
                picker.delegate = self;
                [self presentViewController:picker animated:YES completion:nil];
            }
                break;
        }
            break;

        default:
            break;
    }
}

-(void)imagePickerController:(UIImagePickerController*)picker didFinishPickingMediaWithInfo:(NSDictionary*)info
{
    NSLog(@"%s", __FUNCTION__);
    dataImage = UIImageJPEGRepresentation([info objectForKey:@"UIImagePickerControllerOriginalImage"],1);
    imgPicture.image = [[UIImage alloc] initWithData:dataImage];

    [picker dismissViewControllerAnimated:YES completion:nil];
} 
```

更新 2\. 在下面的人的帮助下，我认为这个解决方案对我有用：

```
- (IBAction)photoLibraryAction:(id)sender
{   
    int c = self.capturedImages.count;
    for (int i=0; i < c; i++ ){
        if (self.imageView.tag == cellTag) {
            NSLog(@"found it");
    } else {
        NSLog(@"can't find it");
    }
    }
}

 if ([self.capturedImages count] == 1)
        {
            // we took a single shot
            [self.imageView setImage:[self.capturedImages objectAtIndex:0]];
          [self.imageView setTag:myTag];
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T15:19:53.630

我会这样做。

```
@interface CustomClassCell : UITableViewCell
  @property (unsafe_unretained, nonatomic) IBOutlet UIImageView *HomePicture;
@end

@interface CustomClass : NSObject
   @property (nonatomic, copy) NSString *PicPath;
@end

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath      
{
   CustomClassCell *cell = [tableView dequeueReusableCellWithIdentifier:@"CustomClassCellIdentifer"];
   id object = [self.tableData  objectAtIndex:indexPath.row];
   CustomClass *myObject = (CustomClass*)object;
   cell.HomePicture.image = [UIImage imageNamed:myObject.PicPath];
   return cell;
} 
```

# sql-server - 如何解决 SQL Server 死锁 - 一旦更改顺序和缩短查询用尽？

> ID：14564375
> 
> 赞同：5
> 
> 时间：2013-01-28T14:38:17.783
> 
> 标签：sql-server, sql-server-2008-r2, database-deadlocks

我有两个假设的查询：

```
UPDATE BankAccounts SET HomePhone = '+1 252-555-0912' 
WHERE AccountNumber = 14400000619 
```

和

```
SELECT * FROM BankAccounts 
WHERE HomePhone = '555-1212' 
```

在没有额外索引的假设表上：

```
CREATE TABLE BankAccounts 
( 
   AccountNumber bigint NOT NULL PRIMARY KEY CLUSTERED,
   FirstName nvarchar(50) NOT NULL,
   MiddleName nvarchar(50) NULL,
   LastName nvarchar(50) NOT NULL,
   HomePhone varchar(50) NULL,
   IsClosed tinyint DEFAULT 0
) 
```

一切都会很好。如果我在以下位置添加索引`HomePhone`：

```
CREATE INDEX IX_BankAccounts_HomePhone ON BankAccounts 
( HomePhone) 
```

现在我的`SELECT`陈述可能成为**僵局**的受害者：

> Tranasction（进程 ID 169）与另一个进程在锁资源上死锁，并已被选为死锁牺牲品。重新运行事务。

常见的建议是：

*   以相同的顺序访问表
*   尽可能缩短交易时间

除了这种情况：

*   我正在以相同的顺序访问（一个）表（1 选择 1 是 1）
*   交易是一个*单一的声明*；我不能比那更短

消除这种死锁的长期解决方案是什么？

我正在考虑将我的**交易隔离级别**更改为`READ UNCOMMITTED`（即消除完整性），但因为我实际上正在处理一个金融系统，所以我很犹豫是否允许客户两次提取他的全部余额。

我能找到的唯一其他解决方案来自[知识库文章 83252](http://support.microsoft.com/kb/832524)：

> ## SQL Server 技术公告 - 如何解决死锁
> 
> ...死锁无法避免。这就是为什么应该设计前端应用程序来处理死锁。
> 
> 在设计良好的应用程序中，前端应用程序应捕获 1205 错误，重新连接到 SQL Server，然后重新提交事务。

我猜这是在说：*“不能赢；不要尝试”*

还要别的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T14:46:51.303

如果将 替换`SELECT *`为列列表（或考虑所有列），然后将它们作为`INCLUDE`d[列](http://msdn.microsoft.com/en-gb/library/ms190806.aspx)添加到索引中，则`SELECT`查询将不需要查询聚集索引即可完成。然后`SELECT`可以始终运行到完成。

如果您不想这样做，那么与其更改整个隔离级别，我会考虑是否适当的[锁定提示。](http://msdn.microsoft.com/en-gb/library/ms187373.aspx)您是否需要仔细考虑`SELECT`适当的提示（在理想情况下，有一种方法可以指定但获取有关是否实际发生任何跳过行的信息）。`NOLOCK``READPAST``READPAST`

当然，也可以考虑`SNAPSHOT` [隔离](http://msdn.microsoft.com/en-us/library/ms130975.aspx)（如果没有锁，就没有死锁）。

* * *

（一个贪吃的惩罚也可以考虑`TABLOCKX`在`SELECT`语句上使用。它可以防止死锁并确保你读取一行（如果存在），对并发的巨大惩罚）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T15:20:10.090

> 赢不了；不要尝试

这是正确的。您可能看到了[读写](http://rusanu.com/2009/05/16/readwrite-deadlock/)死锁（没有死锁图只是我们的推测）。反向顺序访问的发生正是*因为*您正在做正确的事情（即您确实拥有正确的索引）。即使您访问不同的密钥（查找一部手机，更新另一部手机），由于哈希冲突，您仍然在玩[概率游戏。](http://rusanu.com/2009/05/29/lockres-collision-probability-magic-marker-16777215/)

您可以接受死锁或诉诸[快照隔离](http://msdn.microsoft.com/en-us/library/ms345124%28v=sql.90%29.aspx)模型。

# jmeter - JMeter 使用变量作为响应断言模式的输入

> ID：14564376
> 
> 赞同：2
> 
> 时间：2013-01-28T14:38:19.253
> 
> 标签：jmeter

我在 JMeter 中有一个测试计划，它有一个**响应断言**，我想使用一个来自**CSV Data Set Config的***变量*。所以我的模式看起来像：

 **```
${assert1} 
```

这对应于（至少在我看来）来自**CSV Data Set Config**中使用的文件的内容，但它不起作用。我已经看到了多个使用**正则表达式提取器**的建议，但是我看到的示例指的是他们试图从页面中捕获的内容。就我而言，我使用的是外部 csv 文件。

我的问题：如何使用变量作为**响应断言**模式的输入？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T15:20:55.410

我已成功使用 CSV 数据集配置作为我在 url 参数中使用的字符串源，然后使用响应断言在响应中查找该参数。

*   变量名：`P`.
*   网址：`/product/${P}`。

*   响应断言 Parterns to Test: `${P}`。

我想知道是否不需要在请求中使用 CSV 数据变量才能使其在响应断言中可用？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T07:24:15.017

如果我的理解是正确的，那么
您的问题是：
您想将 CSV 中的值用作 URL 的一部分，并且也可以通过变量使用。

解决方案：

像这样配置您的 CSV 数据集配置：

*   文件名：url csv 路径
*   变量名：assert1
*   分隔符 : , （如果您的 CSV 逗号分隔）
*   保持不变

就是这样，您可以在任何地方使用变量 assert1：`${assert1}`。**

# java - 在没有其他线程等待相同对象成本的对象上调用 notify()

> ID：14564377
> 
> 赞同：2
> 
> 时间：2013-01-28T14:38:20.373
> 
> 标签：java, multithreading, performance, optimization, notify

`notify()`调用一个没有其他对象`wait()`在 Java中调用过的对象的相关成本是多少？

我对此感兴趣的原因是因为我有一个具有对象队列的工作线程。

线程不断循环检查队列中是否有任何需要处理的对象。如果它循环并且在所述队列中没有任何内容，则线程调用等待一个单独的对象。

当另一个线程将一个对象添加到队列中时，它会在对象上调用通知，工作线程将等待，而不管工作线程是否实际在等待。

在任何人说任何话之前，它都已正确同步并且不会抛出任何异常/错误。

我的问题是：这个设置是否比让工作线程继续检查并且从不调用更慢？在没有任何线程等待对象的情况`wait()`下调用的成本是多少？`notify()`

我在这里先向您的帮助表示感谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T14:50:31.617

如果您不阻塞工作线程，它将是一个忙等待“自旋循环”模式，例如：

```
while (queue.isEmpty()) {
  Thread.yield();
} 
```

我今天一直在阅读这种条件等待模型（关于我自己的问题:)），并发现了以下说明，说明这种模型何时可能显示出优于普通方案的性能`wait()`：`notify()`

> ...主要的例外情况是您以某种方式知道条件必须在非常短的、有限的时间内变为真实的情况。在这种情况下，浪费的时间可能少于挂起和恢复线程所需的时间。

这本书是 Doug Lea 的“Java 中的并发编程：设计原则和模式”。

# powershell - 如何禁用所有驱动器的自动运行

> ID：14564380
> 
> 赞同：0
> 
> 时间：2013-01-28T14:38:31.443
> 
> 标签：powershell, windows-xp

我需要运行一个 powershell 脚本来禁用计算机上所有驱动器的自动运行。

可以按照[此处](http://support.microsoft.com/kb/967715)所述手动完成，但我需要使用 WDS 服务器为多台计算机（使用 Windows XP 和 7）执行此操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T15:07:21.933

试试这个：

```
$path ='HKLM:\SOFTWARE\Microsoft\Windows\CurrentVersion\policies\Explorer'
Set-ItemProperty $path -Name NoDriveTypeAutorun -Type DWord -Value 0xFF 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T14:49:09.487

你可以试试这个：

```
function Disable-AutoRun
{
    $item = Get-Item `
        "REGISTRY::HKEY_LOCAL_MACHINE\Software\Microsoft\Windows NT\CurrentVersion\IniFileMapping\AutoRun.inf" `
        -ErrorAction SilentlyContinue
    if (-not $item) {
        $item = New-Item "REGISTRY::HKEY_LOCAL_MACHINE\Software\Microsoft\Windows NT\CurrentVersion\IniFileMapping\AutoRun.inf"
    }
    Set-ItemProperty $item.PSPath "(default)" "@SYS:DoesNotExist"
} 
```

这要重新启用：

```
function Enable-AutoRun
{
    Remove-Item "REGISTRY::HKEY_LOCAL_MACHINE\Software\Microsoft\Windows NT\CurrentVersion\IniFileMapping\AutoRun.inf" -Force
} 
```

[解释](http://blogs.msdn.com/b/powershell/archive/2009/01/17/using-powershell-to-protect-against-conficker-enabling-and-disabling-autorun-inf.aspx)。

# php - 嵌套存档导航

> ID：14564393
> 
> 赞同：1
> 
> 时间：2013-01-28T14:39:11.417
> 
> 标签：php, wordpress

我想在我的 wordpress 主题的存档导航中复制以下标记。

HTML：

```
<ul>
  <li>2012
    <ul>
      <li>December
        <ul>
          <li>Page 1</li>
          <li>Page 2</li>
          <li>Page 3</li>
        </ul>
      </li>
      <li>November
        <ul>
          <li>Page 1</li>
          <li>Page 2</li>
          <li>Page 3</li>
        </ul>
      </li>
    </ul>
  </li>
</ul> 
```

到目前为止，我在另一篇文章中有以下 php，我如何更新此代码以输出像我的 html 年/月/文章标题一样的输出？

```
 <?php

// Declare some helper vars
$previous_year = $year = 0;
$previous_month = $month = 0;
$ul_open = false;

// Get the posts
$myposts = get_posts('numberposts=-1&orderby=post_date&order=DESC&cat=13');

?>

<?php foreach($myposts as $post) : ?>   

    <?php

    // Setup the post variables
    setup_postdata($post);

    $year = mysql2date('Y', $post->post_date);
    $month = mysql2date('n', $post->post_date);

    ?>

    <?php if($year != $previous_year || $month != $previous_month) : ?>

        <?php if($ul_open == true) : ?>
        </ul>
        <?php endif; ?>

        <h3><?php the_time('F Y'); ?></h3>

        <ul class="month_archive">

        <?php $ul_open = true; ?>

    <?php endif; ?>

    <?php $previous_year = $year; $previous_month = $month; ?>

    <li><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></li>

<?php endforeach; ?>
    </ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T15:37:20.187

你试过内置的`wp_get_archives()`吗？

`<?php wp_get_archives( array( 'type' => 'monthly' ) ); ?>`

[有关此方法的更多信息，](http://codex.wordpress.org/Function_Reference/wp_get_archives)请参阅Codex 。

**更新**

尝试此 WP 论坛帖子末尾建议的插件之一：[http ://wordpress.org/support/topic/list-posts-by-year-and-month-archive-like](http://wordpress.org/support/topic/list-posts-by-year-and-month-archive-like)

它们现在已经很老了，我不确定它们是否仍然有效。

# html - 添加网站图标 - HTML

> ID：14564394
> 
> 赞同：0
> 
> 时间：2013-01-28T14:39:11.763
> 
> 标签：html

我知道这可能是一个愚蠢的问题，但我正在尝试向我的网站添加一个图标，但由于某种原因它没有出现。我尝试将 favicon.ico 放在根文件夹中，但它没有显示，我还尝试在 HTML 中使用以下代码

```
<link rel = "shortcut icon" href = "images/icon.ico">

<link rel = "shortcut icon" type = "image/x-icon" href = "images/icon.ico">

<link rel = "icon" type = "image/png" href = "images/icon.png"> 
```

显然我有所有的图像，我不想使用不存在的图像。目前我正在使用 chrome 并且我已经尝试使用 IE

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T14:48:56.737

网站图标被大量缓存，与图像等临时 Internet 文件不同，因此可能只是网站图标在初始加载期间以错误的方式缓存。我会配置它你希望它如何工作（可能只是将网站图标粘贴在网站的根文件夹中，你可以覆盖特定页面），然后才在全新的浏览器上打开网站/页面并将页面添加书签. 浏览器应该是您之前没有测试过网站的浏览器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T14:41:42.040

现在任何浏览器都可以在您的网站根目录中找到 favicon.ico。像[http://example.com/favicon.ico](http://example.com/favicon.ico)和你不需要任何代码。

如果这不起作用，请从任何网站下载 favicon.ico 并尝试使用此图标。

# regex - 6位数字的正则表达式，可选2位十进制数字

> ID：14564400
> 
> 赞同：11
> 
> 时间：2013-01-28T14:39:34.757
> 
> 标签：regex, stringtokenizer

我需要一个带有可选 2 个十进制数字的 6 位数字的正则表达式 **允许的值：**

```
 .1  .11  0.11  10\. 10.1   10.12  00.00  0.0  00.00

   123456 12345 1234 123 12 1 0 0\. 123\. 123.55 123456\. 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-28T14:58:04.530

正则表达式应该是：（`^\d{0,6}(\.\d{0,2})?$`它通过了你所有的样本）

更新：

为避免空字符串和单点，正则表达式为`^(?!\.?$)\d{0,6}(\.\d{0,2})?$`. 该表达式添加了一个负前瞻`?!\.?$`，它不包括 0 或 1 个点。

[我在Fiddle](http://jsfiddle.net/hzheng/FXzRe/)添加了一个单元测试。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-29T01:56:23.900

让我们把它分成四个正则表达式。这四个中至少有一个必须匹配。

```
# decimal, 1-2 digits
\.\d{1,2}

# 1-4 digits, optional decimal, 0-2 digits
\d{1,4}\.?\d{0,2}

# 5 digits, optional decimal, optional digit
\d{5}\.?\d?

# 6 digits, optional decimal
\d{6}\.? 
```

然后可以将其与[交替运算符](https://www.regular-expressions.info/alternation.html)( `|`) 组合成一个正则表达式：

```
(\.\d{1,2}|\d{1,4}\.?\d{0,2}|\d{5}\.?\d?|\d{6}\.?) 
```

然后添加插入符号 ( `^`) 和粘贴 ( `$`) 以[匹配字符串的开头和结尾](https://www.regular-expressions.info/anchors.html)。

```
^(\.\d{1,2}|\d{1,4}\.?\d{0,2}|\d{5}\.?\d?|\d{6}\.?)$ 
```

这不能很好地扩展（例如，如果您想将 100 位数字与小数点后最多 20 位匹配），但它可以工作并且相对容易理解。

如果您不必使用正则表达式，则有更简单的方法可以解决此问题。:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-28T14:43:00.517

这与您的所有示例相匹配，并且不接受超过 6 位或 2 位小数。

```
^\d{0,5}(\d\.\d?|\.\d)?\d?$ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T14:36:58.027

用于验证最大长度为 10 的字符串的快速 Java 示例，即 9 位，最大 3 位小数 注意：为什么是 9 位而不是 10 位？因为小数点也算一个字符

```
package com.baji.regex;

import java.util.regex.Matcher;
import java.util.regex.Pattern;

import org.junit.Test;

import static org.junit.Assert.assertTrue;

/*
 * @author: Baji Shaik
 * Quick java example for validating string with max length as 10
 * i.e. 9 digits with max 3 decimal
 * NOTE: why 9 digits instead of 10 digits? because the decimal point also count as a character
*/
public class CheckNumber {

  @Test
  public void testSimpleTrue() {
    String s= "12345678.1";
    assertTrue(Validate10DigitsWithMax3DecimalsNumber(s));
    s= "1234567.12";
    assertTrue(Validate10DigitsWithMax3DecimalsNumber(s));
    s = "123456.123";
    assertTrue(Validate10DigitsWithMax3DecimalsNumber(s));
    s = "123456789";
    assertTrue(Validate10DigitsWithMax3DecimalsNumber(s));

    s = "1234567891";
    assertTrue(Validate10DigitsWithMax3DecimalsNumber(s));
    s = ".123";
    assertTrue(Validate10DigitsWithMax3DecimalsNumber(s));

    s = "000000.123";
    assertTrue(Validate10DigitsWithMax3DecimalsNumber(s));

  }

  public static boolean Validate10DigitsWithMax3DecimalsNumber(String value){
    Pattern pattern = Pattern.compile("^(\\.\\d{1,3}|\\d{1,6}\\.\\d{1,3}|\\d{1,7}\\.\\d{1,2}|\\d{1,8}\\.\\d{1}|\\d{1,10})$");
    Matcher matcher = pattern.matcher(value);
    if (matcher.find()){
      return true; 
    } 
    return false; 
  }

} 
```

# iphone - UILabel 的行数问题

> ID：14564401
> 
> 赞同：-1
> 
> 时间：2013-01-28T14:39:39.327
> 
> 标签：iphone, uilabel, xcode4.5

我必须显示一些文本（动态），它们位于三个字符串变量中，如下所示：

SanFransisco,California 32122 ie city,state 邮政编码

所以想在三个标签中显示它们。但我不明白什么时候使用 sizetoFit 什么时候不使用。如果它是一个大文本，`BrightWood Park,District of Columbia 32123`那么我得到它就像`BrightWood Park,District of Columb`。我在模拟器上看不到邮政编码部分。所以无论文本可能是什么，它都应该显示在模拟器中。

如果城市的文字很大，`Massachusetts Avenue Heights,District of Columbia 32123`那么它应该显示为`Massachusetts Avenue Heights,District of`

```
 Columbia   32123 
```

目前我得到了`Massachusetts Avenue Heights,District of Co`

```
NSString *city=[NSString stringWithFormat:@"%@,",self.city];
 CGSize constraint4 = CGSizeMake(250, 2000.0f);
 CGSize size4=[city sizeWithFont:[UIFont fontWithName:@"Helvetica-Bold" size:12] constrainedToSize:constraint4 lineBreakMode:UILineBreakModeWordWrap];
 lblCity=[[UILabel alloc] init];
 [lblCity setFrame:CGRectMake(60,Lane1.frame.size.height+Lane1.frame.origin.y,size4.width,size4.height) ];
 lblCity.textAlignment=UITextAlignmentLeft;
 lblCity.backgroundColor=[UIColor clearColor];
 lblCity.text=[NSString stringWithFormat:@"%@",city];
 [lblCity setNumberOfLines:0];
 lblCity.highlightedTextColor=[UIColor greenColor];
 [lblCity setFont:[UIFont fontWithName:@"Helvetica-Bold" size:12]];
 [testscroll addSubview: lblCity];

  NSString *state=[NSString stringWithFormat:@"%@ ",self.state];
  CGSize constraint5 = CGSizeMake(250, 2000.0f);
  CGSize size5=[state sizeWithFont:[UIFont fontWithName:@"Helvetica-Bold" size:12] constrainedToSize:constraint5 lineBreakMode:UILineBreakModeWordWrap];
  lblState=[[UILabel alloc] init];
  [lblState setFrame:CGRectMake(lblCity.frame.origin.x+lblCity.frame.size.width,Lane1.frame.size.height+Lane1.frame.origin.y,size5.width,size5.height) ];
  lblState.textAlignment=UITextAlignmentLeft;
  lblState.backgroundColor=[UIColor clearColor];
  lblState.text=[NSString stringWithFormat:@"%@" ,state];
  [lblState setNumberOfLines:0];
   lblState.highlightedTextColor=[UIColor greenColor];
   [lblState setFont:[UIFont fontWithName:@"Helvetica-Bold" size:12]];
   [testscroll addSubview: lblState];

   NSString *zip=[NSString stringWithFormat:@"%@",self.zip];
   CGSize constraint200=CGSizeMake(250,2000.0f);
   CGSize size200=[zip sizeWithFont:[UIFont fontWithName:@"Helvetica-Bold" size:12]constrainedToSize:constraint200 lineBreakMode:UILineBreakModeWordWrap ];
    zipCode=[[UILabel alloc] init];
   [zipCode setFrame:CGRectMake(lblState.frame.origin.x+lblState.frame.size.width,Lane1.frame.size.height+Lane1.frame.origin.y,size200.width,size200.height) ];
    zipCode.textAlignment=UITextAlignmentLeft;
    zipCode.backgroundColor=[UIColor clearColor];
    zipCode.text=[NSString stringWithFormat:@"%@" ,zip];
    [zipCode setNumberOfLines:0];
    zipCode.highlightedTextColor=[UIColor greenColor];
    [zipCode setFont:[UIFont fontWithName:@"Helvetica-Bold" size:12]];
    [testscroll addSubview:zipCode]; 
```

2.什么时候使用sizetoFit沿着numberofLines=0，什么时候不使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T15:45:17.717

进行 autofit 有几个要点`UILabel`。

*   首先，您必须将标签的高度设置为零

*   其次，您也必须将 label'`numberOfLines`设置为零

*   最后你必须调用`sizeToFit`方法

像这样：

```
label.frame = CGRectMake(x, y, width, 0.0f);
label.numberOfLines = 0;
[label sizeToFit]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T05:00:26.403

得到字符串后，`UILabel`像这样设置大小

```
lblCity.text=[NSString stringWithFormat:@"%@",city];
 [lblCity setNumberOfLines:0];
 [lblCity setFrame:CGRectMake(60,Lane1.frame.size.height+Lane1.frame.origin.y,size4.width,size4.height) ];
[lblCity sizeToFit]; it may be work 
```

///这里我测试工作正常并显示整个文本

```
NSString *city=@"Orlando ";
    CGSize constraint4 = CGSizeMake(250, 2000.0f);
    CGSize size4=[city sizeWithFont:[UIFont fontWithName:@"Helvetica-Bold" size:12] constrainedToSize:constraint4 lineBreakMode:UILineBreakModeWordWrap];
    NSLog(@"size4.width %f height %f ",size4.width,size4.height);
   UILabel* lblCity=[[UILabel alloc] init];
    [lblCity setFrame:CGRectMake(160,16,size4.width,size4.height) ];
    lblCity.textAlignment=UITextAlignmentLeft;
    lblCity.backgroundColor=[UIColor clearColor];
    lblCity.text=[NSString stringWithFormat:@"%@",city];
    [lblCity setNumberOfLines:0];
    lblCity.highlightedTextColor=[UIColor greenColor];
    [lblCity setFont:[UIFont fontWithName:@"Helvetica-Bold" size:12]];
     [lblCity sizeToFit];
    [self.view addSubview: lblCity]; 
```

# jquery - PhoneGap、jQuery Mobile 和 Codeigniter

> ID：14564405
> 
> 赞同：1
> 
> 时间：2013-01-28T14:39:43.417
> 
> 标签：jquery, codeigniter, css, cordova, jquery-mobile

我已经使用 PhoneGap 和 jQuery Mobile 开始了一个迷你项目。

```
<title>PhoneGap</title> 
```

```
<link rel="stylesheet" href="css/jquery.mobile.css"/>

<script type="text/javascript"  src="js/jquery.js"></script>
<script type="text/javascript"  src="js/jquerym.js"></script>
<script type="text/javascript"  src="js/myscript.js"></script>
<script type="text/javascript" charset="utf-8" src="js/cordova-2.3.0.js"></script> 
```

```
<div id ="page1" data-role="page">
    <div data-role ="header">
        <h1>Welcome to Page 1</h1>
    </div>
    <a href="#page2" data-transition="flip">Page2</a>
</div>

<div id ="page2" data-role="page">
    <div data-role ="header">
        <h1>Welcome to Page 2</h1>
    </div>

    <form>
        First name: <input type="text" name="name" id="username"><br>
        Last name: <input type="text" name="surname" id="usersurname"><br>
        <input type="submit" id ="submit" name="submit" value="GO TIME">
    </form>
    <a href="#page1" data-transition="flip">Page1</a>
</div> 
```

现在我在 Codeigniter 中创建了一个控制器，并希望使用 ajax 与控制器中的特定方法对话，然后让该方法做出响应。这是我的ajax代码：

```
$(document).ready(
function(){
            $('#submit').click(function() 
            {
                var name = $("#username").val();
                var surname = $("#usersurname").val();

                $.post(
                    "http://localhost:8080/bookbay/index.php/Home/test", 
                    {'name':name,'surname':surname},
                    function(data)
                    {
                        alert(data.name + " " + data.surname);
                    },
                    "json");
            });         
          }); 
```

这是我的控制器：

```
class Home extends CI_Controller
{
    function test()
    {
        $name = $this->input->post('name');
        $surname = $this->input->post('surname');
        $array = array('name' => "*".$name."*", 'surname'=> "?".$surname."?");
        echo json_encode($array);
    }
} 
```

现在，当我单击提交按钮时，它只会将我转发到第 1 页？我不确定我做错了什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T14:50:55.053

这是因为**`$(document).ready(`**不能与**`jQuery Mobile`**.

在我的博客**[文章](http://www.gajotres.net/document-onpageinit-vs-document-ready/)**中，您将了解为什么这很重要以及更多关于**`jQuery Mobile`**页面事件的信息。或者你可以看看**[这里](https://stackoverflow.com/a/14469041/1848600)**。

您应该将代码更改为：

```
$(document).on('pagebeforeshow', '#page2', function(){       
   $('#submit').click(function() 
   {
       var name = $("#username").val();
       var surname = $("#usersurname").val();

       $.post(
           "http://localhost:8080/bookbay/index.php/Home/test", 
           {'name':name,'surname':surname},
           function(data)
           {
               alert(data.name + " " + data.surname);
           },
           "json");
   });
}); 
```

# javascript - 了解 Node.js 处理顺序

> ID：14564408
> 
> 赞同：0
> 
> 时间：2013-01-28T14:39:55.880
> 
> 标签：javascript, node.js, express

我在理解 Node.js 中的处理顺序时遇到问题。我的问题：我编写了一个小应用程序，它将会话保存在具有以下属性的 cookie 中：

```
session.email = email;
session.randomHash = randomHash; 
```

randomHash var 是一个随机字符串，每次用户登录时都会生成并保存到数据库中。如果有会话的用户现在想要查看私有页面，则调用 checkSession() 方法：

```
exports.checkSession = function(req, res) {
    if(req.session) {
        var User = mongoose.model("User", userSchema);
        User.count({email: req.session.email, randomHash: req.session.randomHash}, function(err, count) {
            if(count === 0) {
                return false;
            }
            if(count === 1) {
                return true;
            }
        });
    }
    else {
        return false;
    }
}; 
```

该方法将cookie的randomHash与Db的randomHash值进行比较。此方法在路由中调用：

```
exports.init = function(req, res) {
    if(hashing.checkSession(req, res)) {
        res.render("controlpanel", {title: "Controlpanel", email: req.session.email});
    }
    else {
        res.send("Sorry but you are not logged in. Go to /login");
    }   
}; 
```

现在肯定有问题。由于节点非阻塞样式，该方法被调用但在执行 if 语句之前没有完成。我能做些什么呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T14:46:04.027

回调中的`return`值不是. 回调在*after*完成之前不会运行。`User.count``return``checkSession``User.count` *`checkSession`*

 *将回调传递给`checkSession`并调用它`User.count`：

```
exports.checkSession = function(req, res, callback) {
    if(req.session) {
        var User = mongoose.model("User", userSchema);
        User.count({email: req.session.email, randomHash: req.session.randomHash}, function(err, count) {
            if(count === 0) {
                callback(false);
            }
            if(count === 1) {
                callback(true);
            }
        });
    }
    else {
        callback(false);
    }
}; 
```

并称它为：

```
exports.init = function(req, res) {
    hashing.checkSession(req, res, function(result) {
        if(result) {
            res.render("controlpanel", {title: "Controlpanel", email: req.session.email});
        }
        else {
            res.send("Sorry but you are not logged in. Go to /login");
        }
    });
}; 
```*

# java - 检查javascript函数是从java小程序定义的

> ID：14564410
> 
> 赞同：0
> 
> 时间：2013-01-28T14:39:56.207
> 
> 标签：java, javascript, applet, undefined, japplet

我正在开发一个 Java 小程序，我在其中调用一个 javascript 函数：

```
boolean isAllowed = (boolean) win.eval("isPointMarkCreationAllowed()"); 
```

我想**检查该函数是否存在**，就像我们在 javascript 中所做的那样：

```
if (isPointMarkCreationAllowed == 'function') 
```

无论如何在Java中可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T14:56:43.163

没有实际尝试过，不会

`win.eval("typeof isPointMarkCreationAllowed == 'function'");`

做你想做的事并返回一个布尔值（真或假）？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-28T14:50:33.160

您可以使用反射来测试方法是否存在。

例如，如果您有一个对象 foo，您可以在下面获取该对象的类中声明的所有方法：

```
Method[] methods = foo.getClass().getMethods(); 
```

这将返回类中声明的方法的数组。

然后只需使用 for 循环检查返回的数组中是否存在特定方法

```
for (Method m : methods)
{
     if (m.getName().equals(someString))
     {
        //do something
     }
} 
```

someString 是您要查找的方法的名称，在您的情况下为“isPointMarkCreationAllowed”。

使用以下站点了解 Java 中的反射 [http://docs.oracle.com/javase/tutorial/reflect/member/methodType.html](http://docs.oracle.com/javase/tutorial/reflect/member/methodType.html)

# c++ - 在构造函数中更改初始化顺序

> ID：14564411
> 
> 赞同：1
> 
> 时间：2013-01-28T14:39:58.220
> 
> 标签：c++, oop, c++11, constructor, initialization

```
 class a
 {
 public:
 a() : b(5), a1(10) //will firstly initialize a1 then b, so order here doesn't matter
 int a1;
 private:
 int b;
 } 
```

问题是如何更改顺序（在 a1 之前初始化 b）？我必须有高于私人的公共成员，这样解决方案对我来说不合适。当然在这里我使用整数，问题更复杂，但这只是一个例子，说明我的问题是什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T14:42:01.673

您不能更改初始化顺序，初始化顺序始终由类中成员的声明顺序定义。这是必要的，因为*破坏*顺序必须与*构造*顺序**相反**，如果您更改了构造顺序，编译器将被迫跟踪您初始化成员的顺序以生成正确的破坏序列。

 *所以我的建议是：

1.  忍受它，并且;
2.  不要依赖于成员变量的构造顺序。

为了实现第 2 点），您可以为您的成员提供默认构造函数以进行默认初始化，然后按照您在构造函数*主体*内的顺序正确初始化您的成员（换句话说，将构造与逻辑初始化解耦）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T14:41:11.687

初始化的顺序由成员变量的声明顺序决定。所以如果你想`b`在之前被初始化`a`，你必须在之前声明它。

```
class a
{
  public:
   a() : b(5), a1(10) {}
  private:
   int b;
  public:
   int a1;
}; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-28T14:52:47.123

如果我理解你是正确的，你有某种风格指南说公共成员应该在私人之前。

在这种情况下，我建议您将所有成员变量声明为私有并为它们创建访问器函数。这样你就可以绕过它。

```
class a
 {
 public:
   a() : _a1(5), _b(10) 
   int a1() const { return _a1; }
   void a1(int value) { _a1 = value; }
   int b() const { return _b; }
   void b(int value) { _b = value; }

 private:
   int _a1;
   int _b;
 } 
```

无论如何，任何理智的编译器都会对其进行优化，因此开销将最小化。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-28T14:50:30.743

将您的`b`对象设为私有，在之前声明它`a1`，并创建一个访问函数来访问`b`. [如有必要，使其返回对`b`对象的引用，以便调用代码可以修改它——尽管将类的内部暴露给调用代码显然是很糟糕的设计，无论是通过公共声明还是通过返回参考]*

# php - 在组成员上存储数组

> ID：14564412
> 
> 赞同：0
> 
> 时间：2013-01-28T14:40:00.593
> 
> 标签：php, mysql

情况如下：
用户创建组`cars`。
用户 2、用户 3、用户 4 和用户 5 要求加入`cars`。
用户批准 user2、user3、user4 和 user5

我应该有这样的表：

```
Leader (userid)
, description
, image
, Users (array { userid1, userid2, userid3, userid4 } ) 
```

和

```
user_groups 
username, groupid, status 
```

看起来像

```
User2 1 0 
```

状态 0 表示 user2 正在等待组邀请，状态 1 表示他在组中。然后如果有人访问 users2 个人资料，我查询

```
select * from user_groups where username=$username 
```

这是最干净的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T15:13:53.603

为用户创建一个表可能更明智，这样您就可以根据需要向用户添加更多信息。然后创建一个 Groups 表，包含 groupid、description、image、status 等。最后，创建一个表将它们映射在一起，使用两个外键——Groups 中的 groupid 和 Users 中的 userid——作为新的主键。在这里，我还将为他们是否是组长设置一个二进制值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T17:02:24.557

数组永远不会是最干净的方式。简单地做有什么问题

```
User(UserID, Name)
Group(GroupID, LeaderUserID, Name)
UserGroup(UserID, GroupID, Status) 
```

或者，从 DevinFalgoust 窃取，或者：

```
User(UserID, Name)
Group(GroupID, Name)
UserGroup(UserID, GroupID, Status, IsLeader) 
```

# iphone - 以模态方式呈现 UIImagePickerController 时出错

> ID：14564413
> 
> 赞同：3
> 
> 时间：2013-01-28T14:40:04.507
> 
> 标签：iphone, ios, objective-c, cocoa-touch, uiview

`UIImagePickerController`我在我的 iOS 6 应用程序中呈现模态时遇到了一个奇怪的问题。这`XCode`给了我这个错误：

```
Warning: Attempt to present <UIImagePickerController: 0x1e025040> on <UINavigationController: 0x1d51ce00> whose view is not in the window hierarchy! 
```

我有以下窗口层次结构`AppDelegate`：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    UIWindow *window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    self.window = window;

    firstViewController = [[SGNewMailViewController alloc] init];
    navController = [[UINavigationController alloc] initWithRootViewController:firstViewController];
    self.window.rootViewController = firstViewController;
    [self.window makeKeyAndVisible];
    return YES;
} 
```

在我的中，`SGNewMailViewController`我提出了一个新`UIView`的`SGFoldingAttachmentView`类成员，其中包含以下代码：

```
- (void)choosePhotoPressed {
    SGNewMailViewController *mailVC = [((SGAppDelegate *)[UIApplication sharedApplication].delegate).firstViewController.navigationController.viewControllers lastObject];
    [mailVC displayCameraRoll];
} 
```

最后，这是我的`SGNewMailViewController` `displayCameraRoll`方法：

```
- (void)displayCameraRoll {
    if ([UIImagePickerController isSourceTypeAvailable:
         UIImagePickerControllerSourceTypeSavedPhotosAlbum])
    {
        UIImagePickerController *imagePicker =
        [[UIImagePickerController alloc] init];
        imagePicker.delegate = self;
        imagePicker.sourceType =
        UIImagePickerControllerSourceTypePhotoLibrary;
        imagePicker.mediaTypes = [NSArray arrayWithObjects:
                                  (NSString *) kUTTypeImage,
                                  nil];
        imagePicker.allowsEditing = NO;
        [self presentViewController:imagePicker animated:YES completion:nil];
    }
} 
```

那么可能是什么问题呢？它是否在另一个类提供的自定义视图中？我应该如何解决它？提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T14:59:48.617

使 UINavigationController 成为窗口的根视图控制器。这应该可以解决问题

```
self.window.rootViewController = navController; 
```

# mysql - 如何在 mysql 中构建此查询

> ID：14564415
> 
> 赞同：0
> 
> 时间：2013-01-28T14:40:07.303
> 
> 标签：mysql, sql

希望有人能帮助我建立这个查询。我需要从数据库中获取属于某个特定用户的值。这些是我需要得到的列。

```
01\. city_name // From city table
02\. district_name // From district table
03\. category_name // From category table
04\. subscription_period // From tutors table
05\. date_registered // From tutors table 
```

我已经分别得到了值tutor_id、city_id和category_id`1, 53, 5`

我的地址表有`city_id`列，`City`表有`district_id`列，类别表有`category_id`列，导师表有`tutor_id`和`address_id`。

我尝试过这样的事情，但这不起作用。

```
SELECT city_name, district_name, category_name, subscription_period AS sp, date_registered AS date
FROM tutors AS t
INNER JOIN district AS d 
INNER JOIN city ON city.district_id = d.district_id
INNER JOIN address ON address.city_id = 50
INNER JOIN category
WHERE t.tutor_id = 1 AND category.category_id= 5 
```

我的预期结果应该有 1 行作为输出，但是这个查询给了我更多的行作为输出

**我的 SQL 表**

```
CREATE TABLE tutors (
tutor_id SMALLINT UNSIGNED NOT NULL AUTO_INCREMENT,
address_id SMALLINT NOT NULL,
tutor_name VARCHAR(80) NOT NULL,
subscription_period SMALLINT NOT NULL,
date_registered TIMESTAMP  NOT NULL DEFAULT CURRENT_TIMESTAMP,
PRIMARY KEY (tutor_id)
); 

CREATE TABLE address (
address_id SMALLINT UNSIGNED NOT NULL AUTO_INCREMENT,
address VARCHAR(40) NOT NULL, 
city_id SMALLINT UNSIGNED NOT NULL,
PRIMARY KEY (address_id)
);

CREATE TABLE district(
district_id SMALLINT UNSIGNED NOT NULL AUTO_INCREMENT,
district_name VARCHAR(30) NOT NULL, 
PRIMARY KEY (district_id)
);

CREATE TABLE city(
city_id SMALLINT UNSIGNED NOT NULL AUTO_INCREMENT,
city_name VARCHAR(30) NOT NULL, 
district_id SMALLINT UNSIGNED NOT NULL,
PRIMARY KEY (city_id)
);

CREATE TABLE category (
category_id SMALLINT UNSIGNED NOT NULL AUTO_INCREMENT,
category_name VARCHAR(60) NOT NULL, 
PRIMARY KEY (category_id)
);

CREATE TABLE tutor_category(
tutor_id SMALLINT UNSIGNED NOT NULL,
category_id SMALLINT UNSIGNED NOT NULL,
PRIMARY KEY (tutor_id)
); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T14:55:20.753

尝试这样的事情：

```
SELECT c.city_name, 
       d.district_name, 
       c.category_name, 
       t.subscription_period AS sp, 
       t.date_registered AS date
FROM tutors t
   INNER JOIN address a ON t.address_id = a.address_id 
   INNER JOIN city c ON c.city_id  = a.city_id 
   INNER JOIN district d ON c.district_id = d.district_id 
   INNER JOIN tutor_category tc on t.tutor_id = tc.tutor_id 
   INNER JOIN category cat on tc.category_id = cat.category_id 
WHERE t.tutor_id = 1 AND cat.category_id= 5 AND c.city_id = 50 
```

你需要`JOIN`在你的桌子上确保你只收到想要的结果。

如果您收到相同的重复行，则您可能做错了什么或您提供的定义不正确（看起来确实如此）。`GROUP BY`您可以通过在查询中添加或来“解决”问题，`DISTINCT`但这不是最好的方法。

# .net - Visual Studio 2012 打开的文件消失

> ID：14564418
> 
> 赞同：7
> 
> 时间：2013-01-28T14:40:13.390
> 
> 标签：.net, ide, visual-studio-2012

当我在 Visual Studio 2012 中工作并在一段时间后进行调试、更改和调试时，最终我打开的文档消失了。显然，它们仍然是打开的（我会添加一个屏幕截图，但我还不能），但是转到 Window >（一个文件）并尝试选择它什么都不做。我必须选择关闭所有文档（如果只有一个或两个文档很好 - 但下次调试时我会回到相同的状态）或重新启动应用程序。还有其他人遇到这种情况吗？我想知道它是否是导致问题的扩展。

已安装的扩展：

*   高级安装程序 9.6.1
*   Microsoft Web 开发人员工具 NuGet 包
*   经理生产力电动工具
*   拼写检查器
*   团队基础服务器电源工具 2012
*   Telerik WebUI VSExtensions
*   Telerik Windows Phone VSExtensions
*   Telerik WinForms VSEXtensions
*   TFS 进程模板编辑器
*   TFS 团队协作
*   TFS 工作项类型设计器
*   Visual Studio 2012 颜色主题编辑器
*   适用于 JavaScript 的 Windows 库的 Visual Studio 扩展
*   适用于 Visual Studio 2012 Web Essentials 2012 的 VSCommands
*   ReSharper 7.1.1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T16:05:10.280

我有同样的问题，但我没有 VSCommands。相反，我删除了最近安装的几个 VS 2010（是的 2010）组件。目前，一切似乎都正常。（可能存在一些版本混乱，所以 2012 选择了一些错误的 2010 组件。只是猜测......）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T14:58:09.743

问题似乎是 Visual Studio 2012（早期访问版本）的 VSCommands。我卸载它并停止出现问题，然后重新安装它，问题又回来了。我不知道它是否与另一个加载项冲突，但我暂时将其卸载。

# python - Python - Mongoengine 高级查询列表字段

> ID：14564420
> 
> 赞同：4
> 
> 时间：2013-01-28T14:40:19.890
> 
> 标签：python, pymongo, mongoengine, listfield

我有一个列表列表，如下所示：

```
li = [[('A', 'one'), ('A', 'two')], [('B', 'three'), ('B', 'four')]] 
```

我需要查询一个 mongo 数据库以获取其列表字段在每个子列表中至少包含一个项目的所有对象`li`。例如：具有 [('A', 'one') OR ('A', 'two')] 和 [('B', 'three') OR ('B', 'four')] 的项目...

我正在使用 mongoengine，但如果我可以使用其他东西来完成这项工作，那可能会改变。所以现在我正在做很多这样的查询，以避免得到重复的条目：

```
final = set()
for sublist in li:
    query = Obj.objects(list_field__in=sublist)
    final &= set(query) 
```

问题是在处理大型查询结果时这非常慢（我相信使集合需要很长时间）。有没有办法可以加快速度？具体来说，有没有办法可以避免从查询结果中创建集合/列表？

我真的很想能够以某种方式写出这样的东西：

```
query = Obj.objects(list_field__in=li[0] AND list_field__in=li[1] AND ...) 
```

编辑：下面的答案在进一步测试后不起作用，因为 mongoengine 不允许`Q(field=x) & Q(field=y)`

Edit2：这是我想做的等效 mongoDB 查询：

```
db.obj.find({ "$and": [
    {"list_field": {"$in":
        [["A", "one"], ["A", "two"]]
    }},
    {"list_field": {"$in":
        [["B", "three"], ["B", "four"]]
    }}
]}) 
```

我可以在 mongoengine 中执行此操作吗？它不会让我查询`Q(list_field__in=[('A', 'one'), ('A', 'two')]) | Q(list_field__in=[('B', 'three'), ('B', 'four')])`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T15:01:38.183

我认为您可以[通过 Q 类](https://mongoengine-odm.readthedocs.org/en/latest/guide/querying.html#advanced-queries)尝试：

```
 filter = reduce(Q.__and__, map(lambda x: Q(list_field__in=x), li))
  Obj.objects(filter) 
```

# php - 为什么我收到错误，因为“此网页有重定向循环”

> ID：14564421
> 
> 赞同：1
> 
> 时间：2013-01-28T14:40:21.797
> 
> 标签：php, drupal, drupal-7

我在 drupal 中有一个站点，突然站点命中出现错误，因为“此网页具有重定向循环”。

的网页`http://example.com/install.php`导致了过多的重定向。清除此站点的 cookie 或允许第三方 cookie 可能会解决问题。如果不是，则可能是服务器配置问题，而不是您的计算机问题。以下是一些建议： 稍后重新加载此网页。了解有关此问题的更多信息。

> 错误 310 (net::ERR_TOO_MANY_REDIRECTS)：重定向太多。

谁能告诉我哪里出错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T08:46:08.957

尝试将静态 HTML 文件上传到同一目录并尝试通过 HTTP 访问此文件。如果它给你同样的错误，那么它是目录权限。

常见的原因是您没有浏览该文件夹的权限。您可以通过提供来修复它`execute permission for everyone`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-03T21:14:57.577

我有同样的错误信息。我[在 drupal.org 上发现了这个问题](https://drupal.org/node/1093464)，我从中得到了查找`install.php`已被 Softaculous（自动安装软件）删除的想法。

`install.php`从新下载的包中复制解决了这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-05T19:16:30.830

我最近在开发网站上工作时遇到了这个问题。只有首页导致“重定向过多”错误，该站点的所有其他页面都正常工作。原来是与托管有关的问题，关闭缓存，一切正常。

# c# - 解密从 PHP 服务接收到的 AES 缓冲区

> ID：14564423
> 
> 赞同：2
> 
> 时间：2013-01-28T14:40:22.437
> 
> 标签：c#, php, encryption, cryptography, aes

我在解密 AES 加密数据时遇到问题。我从远程服务接收 base64 编码的加密缓冲区。使用 PHP 中的 OpenSSL 库使用 AES 128-cbc 对数据进行加密。我正在尝试以这种方式解密它：

```
var encryptedKey = Encoding.ASCII.GetString(key);
var rsaKey = Convert.FromBase64String(encryptedKey);
var ms = new MemoryStream();
var aes = RijndaelManaged.Create();
aes.Padding = PaddingMode.None;
aes.Mode = CipherMode.CBC;
aes.KeySize = 128;
aes.BlockSize = 128;
aes.Key = pwd;
aes.IV = pwd;
var stream = new CryptoStream(ms, aes.CreateDecryptor(), CryptoStreamMode.Write);
stream.Write(rsaKey, 0, rsaKey.Length);
var ss6 = Encoding.ASCII.GetString(ms.ToArray()); 
```

但我得到绝对无效的结果。

这是用于加密数据的 PHP 代码：

```
($this->source, 'aes-128-cbc', $this->key, true, $this->key) 
```

有人知道可能出了什么问题吗？密钥和 IV 设置正确。

谢谢

PS 我已经尝试了所有可用的 CipherModes :) 密钥大小也是 16 字节。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-28T14:55:07.633

这就是我用来做的：

以下是参数的含义：

```
/// <summary>
        /// Decrypts specified ciphertext using Rijndael symmetric key algorithm.
        /// </summary>
        /// <param name="cipherText">
        /// Base64-formatted ciphertext value.
        /// </param>
        /// <param name="passPhrase">
        /// Passphrase from which a pseudo-random password will be derived. The
        /// derived password will be used to generate the encryption key.
        /// Passphrase can be any string. In this example we assume that this
        /// passphrase is an ASCII string.
        /// </param>
        /// <param name="saltValue">
        /// Salt value used along with passphrase to generate password. Salt can
        /// be any string. In this example we assume that salt is an ASCII string.
        /// </param>
        /// <param name="hashAlgorithm">
        /// Hash algorithm used to generate password. Allowed values are: "MD5" and
        /// "SHA1". SHA1 hashes are a bit slower, but more secure than MD5 hashes.
        /// </param>
        /// <param name="passwordIterations">
        /// Number of iterations used to generate password. One or two iterations
        /// should be enough.
        /// </param>
        /// <param name="initVector">
        /// Initialization vector (or IV). This value is required to encrypt the
        /// first block of plaintext data. For RijndaelManaged class IV must be
        /// exactly 16 ASCII characters long.
        /// </param>
        /// <param name="keySize">
        /// Size of encryption key in bits. Allowed values are: 128, 192, and 256.
        /// Longer keys are more secure than shorter keys.
        /// </param>
        /// <returns>
        /// Decrypted string value.
        /// </returns>
        /// <remarks>
        /// Most of the logic in this function is similar to the Encrypt
        /// logic. In order for decryption to work, all parameters of this function
        /// - except cipherText value - must match the corresponding parameters of
        /// the Encrypt function which was called to generate the
        /// ciphertext.
        /// </remarks> 
```

这是实际的功能：

```
 public static string Decrypt(string cipherText,
                                     string passPhrase,
                                     string saltValue,
                                     string hashAlgorithm,
                                     int passwordIterations,
                                     string initVector,
                                     int keySize)
        {
            // Convert strings defining encryption key characteristics into byte
            // arrays. Let us assume that strings only contain ASCII codes.
            // If strings include Unicode characters, use Unicode, UTF7, or UTF8
            // encoding.
            byte[] initVectorBytes = Encoding.ASCII.GetBytes(initVector);
            byte[] saltValueBytes = Encoding.ASCII.GetBytes(saltValue);

            // Convert our ciphertext into a byte array.
            byte[] cipherTextBytes = Convert.FromBase64String(cipherText);

            // First, we must create a password, from which the key will be 
            // derived. This password will be generated from the specified 
            // passphrase and salt value. The password will be created using
            // the specified hash algorithm. Password creation can be done in
            // several iterations.
            PasswordDeriveBytes password = new PasswordDeriveBytes(
                                                            passPhrase,
                                                            saltValueBytes,
                                                            hashAlgorithm,
                                                            passwordIterations);

            // Use the password to generate pseudo-random bytes for the encryption
            // key. Specify the size of the key in bytes (instead of bits).
            byte[] keyBytes = password.GetBytes(keySize / 8);

            // Create uninitialized Rijndael encryption object.
            RijndaelManaged symmetricKey = new RijndaelManaged();

            // It is reasonable to set encryption mode to Cipher Block Chaining
            // (CBC). Use default options for other symmetric key parameters.
            symmetricKey.Mode = CipherMode.CBC;

            // Generate decryptor from the existing key bytes and initialization 
            // vector. Key size will be defined based on the number of the key 
            // bytes.
            ICryptoTransform decryptor = symmetricKey.CreateDecryptor(
                                                             keyBytes,
                                                             initVectorBytes);

            // Define memory stream which will be used to hold encrypted data.
            MemoryStream memoryStream = new MemoryStream(cipherTextBytes);

            // Define cryptographic stream (always use Read mode for encryption).
            CryptoStream cryptoStream = new CryptoStream(memoryStream,
                                                          decryptor,
                                                          CryptoStreamMode.Read);

            // Since at this point we don't know what the size of decrypted data
            // will be, allocate the buffer long enough to hold ciphertext;
            // plaintext is never longer than ciphertext.
            byte[] plainTextBytes = new byte[cipherTextBytes.Length];

            // Start decrypting.
            int decryptedByteCount = cryptoStream.Read(plainTextBytes,
                                                       0,
                                                       plainTextBytes.Length);

            // Close both streams.
            memoryStream.Close();
            cryptoStream.Close();

            // Convert decrypted data into a string. 
            // Let us assume that the original plaintext string was UTF8-encoded.
            string plainText = Encoding.UTF8.GetString(plainTextBytes,
                                                       0,
                                                       decryptedByteCount);

            // Return decrypted string.   
            return plainText;
        } 
```

# extjs - 从子 html 关闭 Ext.Window

> ID：14564424
> 
> 赞同：1
> 
> 时间：2013-01-28T14:40:25.600
> 
> 标签：extjs

我是 ExtJS 的新手。

这是我的窗口定义：

```
this.dialog = new Ext.Window({
title : "About us",
layout  : 'anchor',
modal   : true,
autoEl : {
        tag : "iframe",
        id: "myframe",
        src : "../editor/actorseditor.html",
        height: 500,
        width : 600
} });   
this.dialog.show(); 
```

我想从“actorseditor.html”关闭我的对话窗口。

如何实现这一点。打开的窗口也没有关闭按钮。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T01:03:31.490

仅当 iFrame 中的 html 页面来自与父页面相同的应用程序时，这才有效。或者至少协议、子域、域和端口都是相同的。

您需要在父页面中公开一个全局函数，该函数将由在子页面 (iframe) 中运行的 JavaScript 调用。

在您的子页面中，您调用：

```
 if (window.parent && window.parent.myGlobalFunction) {
       window.parent.myGlobalFunction('hello!');
  } 
```

在您的父页面中，您包含以下全局函数（当然可以根据需要命名）：

```
function myGlobalFunction(input){
        console.log('message received:'+input);
        MyApp.app.fireEvent('closeMyWindow',input);
    } 
```

这假设您正在使用 MVC，并且您创建了属性“app”并在应用程序启动功能中将其设置为“this”。并且您有一个控制器正在侦听这样的应用程序范围的事件：

```
Ext.define('MyApp.controller.Qnum', {
    extend:'Ext.app.Controller',
    init:function(){
        this.control({
            ...
        });
        //listen for app wide event fired by : MyApp.app.fireEvent('closeMyWindow',input);
        this.application.on({
            closeMyWindow: this.closeWindowItsDrafty,
            scope: this
        });
    },
    closeWindowItsDrafty:function(){
       //get reference to my window
       //call myWindow.close();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T16:16:57.730

我假设在 actoreditor.html 中，你必须有一个按钮

在此按钮中，您可以设置此侦听器：

```
listeners : {
    click : function () {
         Ext.getCmp('yourdialogid').close();
    }
} 
```

您还需要在对话框中添加一个 id。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-25T22:19:22.030

请在您的关闭按钮侦听器中尝试以下操作：

```
var parentDialogWindow = window.parent.Ext.cmp('ID_OF_DIALOG_WINDOW');
parentDialogWindow[parentDialogWindow.closeAction](); 
```

# javascript - 无法调用 null 的方法“事务”

> ID：14564436
> 
> 赞同：0
> 
> 时间：2013-01-28T14:41:13.710
> 
> 标签：javascript, html, local-storage, web-sql

我收到以下错误

无法调用 null 的方法“事务”

尝试插入 WEBSQL 时（是的，我知道它已被弃用）。

我在另一个页面上有一个几乎完全相同的脚本副本，这个脚本只是有一个不同的名称和单独的字段。代码如下。

```
var html5rocks = {};
html5rocks.webdb = {};

html5rocks.webdb.db = null;

html5rocks.webdb.open = function() {
    var dbSize = 5 * 1024 * 1024; // 5MB
    html5rocks.webdb.db = openDatabase('Customer', '1.0', 'customer manager', dbSize);
}

html5rocks.webdb.onError = function(tx, e) {
    alert('Something unexpected happened: ' + e.message );
    console.log('error');
}

html5rocks.webdb.onSuccess = function(tx, r) {

    var statusOutput = "Customer Form Saved!";
    var status = document.getElementById('status');
    $('.form-title-area').css('background-color','#26c622');
    $('.form-title-area').html('<h1>Customer Form Saved!</h1>');
    status.innerHTML = statusOutput;

    html5rocks.webdb.getAllTodoItems(loadTodoItems);
}

html5rocks.webdb.createTable = function() {
    html5rocks.webdb.db.transaction(function(tx) {
                                    tx.executeSql('CREATE TABLE IF NOT EXISTS ' + 
                                                  'customerform(ID INTEGER PRIMARY KEY ASC, companyname TEXT, tradingas TEXT, regadd1 TEXT, regadd2 TEXT, regaddcity TEXT, regaddstate TEXT, regaddcountry TEXT, regaddpostcode TEXT, cregno TEXT, vatregno TEXT, accountsname TEXT,  accountsphone TEXT, accountsemail TEXT, accountsfax TEXT, invadd1 TEXT, invadd2 TEXT, invaddcity TEXT, invaddstate TEXT, invaddcountry TEXT, invaddpostcode TEXT, creditlimit TEXT, firstorder TEXT, reqdeldate TEXT, deladd1 TEXT, deladd2 TEXT, deladdcity TEXT, deladdstate TEXT, deladdcountry TEXT, deladdpostcode TEXT, buyingname TEXT, buyingphone TEXT, buyingemail TEXT, buyingfax TEXT, ordersource TEXT, currency TEXT, deliveryterms TEXT, maxpallet TEXT, pallettype TEXT, wrap TEXT, invoiceterms TEXT, specialinstructions TEXT, bookingname TEXT, bookingphone TEXT, signed TEXT, signeddate TEXT, inputby TEXT, inputdate TEXT, added_on DATETIME)', []);
                                    });

}

html5rocks.webdb.addTodo = function(companynameText, tradingasText, regadd1Text, regadd2Text, regaddcityText, regaddstateText, regaddcountryText, regaddpostcodeText, cregnoText, vatregnoText, accountsnameText, accountsphoneText, accountsemailText, accountsfaxText, invadd1Text, invadd2Text, invaddcityText, invaddstateText, invaddcountryText, invaddpostcodeText, creditlimitText, firstorderText, reqdeldateText, deladd1Text, deladd2Text, deladdcityText, deladdstateText, deladdcountryText, deladdpostcodeText, buyingnameText, buyingphoneText, buyingemailText, buyingfaxText, ordersourceText, currencyText, deliverytermsText, maxpalletText, wrapText, invoicetermsText, specialinstructionsText, bookingnameText, bookingphoneText, signedText, signeddateText, inputbyText, inputdatetext) {

    html5rocks.webdb.db.transaction(function(tx){

                                    var addedOn = new Date();
                                    tx.executeSql('INSERT INTO customerform(companyname, tradingas, regadd1, regadd2, regaddcity, regaddstate, regaddcountry, regaddpostcode, cregno, vatregno, accountsname, accountsphone , accountsemail, accountsfax, invadd1, invadd2, invaddcity, invaddstate, invaddcountry, invaddpostcode, creditlimit, firstorder, reqdeldate, deladd1, deladd2, deladdcity, deladdstate, deladdcountry, deladdpostcode, buyingname, buyingphone ,buyingemail, buyingfax, ordersource, currency, deliveryterms, maxpallet, pallettype, wrap, invoiceterms, specialinstructions, bookingname, bookingphone, signed, signeddate, inputby, inputdate, added_on) VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)', 
                                                  [companynameText, tradingasText, regadd1Text, regadd2Text, regaddcityText, regaddstateText, regaddcountryText, regaddpostcodeText, cregnoText, vatregnoText, accountsnameText, accountsphoneText, accountsemailText, accountsfaxText, invadd1Text, invadd2Text, invaddcityText, invaddstateText, invaddcountryText, invaddpostcodeText, creditlimitText, firstorderText, reqdeldateText, deladd1Text, deladd2Text, deladdcityText, deladdstateText, deladdcountryText, deladdpostcodeText, buyingnameText, buyingphoneText, buyingemailText, buyingfaxText, ordersourceText, currencyText, deliverytermsText, maxpalletText, pallettypeText, wrapText, invoicetermsText, specialinstructionsText, bookingnameText, bookingphoneText, signedText, signeddateText, inputbyText, inputdateText, addedOn],
                                                  html5rocks.webdb.onSuccess,
                                                  html5rocks.webdb.onError);
                                    });

}

function init() {
    html5rocks.webdb.open();
    html5rocks.webdb.createTable();
    html5rocks.webdb.getAllTodoItems(loadTodoItems);

}

function initi() {

    html5rocks.webdb.getRecords();
}

function addTodo() {
console.log('trigger');
    var companyname = document.getElementById('companyname');
    var tradingas = document.getElementById('tradingas');
    var regadd1 = document.getElementById('regadd1');
    var regadd2 = document.getElementById('regadd2');
    var regaddcity = document.getElementById('regaddcity');
    var regaddstate = document.getElementById('regaddstate');
    var regaddcountry = document.getElementById('regaddcountry');
    var regaddpostcode = document.getElementById('regaddpostcode');
    var cregno = document.getElementById('cregno');
    var vatregno = document.getElementById('vatregno');
    //var vatregno = $('vatregno').val();
    var accountsname = document.getElementById('accountsname');
    var accountsphone = document.getElementById('accountsphone');
    var accountsemail = document.getElementById('accountsemail');
    var accountsfax = document.getElementById('accountsfax');
    var invadd1 = document.getElementById('invadd1');
    var invadd2 = document.getElementById('invadd2');
    var invaddcity = document.getElementById('invaddcity');
    var invaddstate = document.getElementById('invaddstate');
    var invaddcountry = document.getElementById('invaddcountry');
    var invaddpostcode = document.getElementById('invaddpostcode');
    var creditlimit = document.getElementById('creditlimit');
    var firstorder = document.getElementById('firstorder');
    var reqdeldate = $('.reqdeldate');
    var deladd1 = document.getElementById('deladd1');
    var deladd2 = document.getElementById('deladd2');
    var deladdcity = document.getElementById('deladdcity');
    var deladdstate = document.getElementById('deladdstate');
    var deladdcountry = document.getElementById('deladdcountry');
    var deladdpostcode = document.getElementById('deladdpostcode');
    var buyingname = document.getElementById('buyingname');
    var buyingphone = document.getElementById('buyingphone');
    var buyingemail = document.getElementById('buyingemail');
    var buyingfax = document.getElementById('buyingfax');
    var ordersource = document.getElementById('ordersource');
    var currency = document.getElementById('currency');
    var deliveryterms = document.getElementById('deliveryterms');
    var maxpallet = document.getElementById('maxpallet');
    var pallettype = document.getElementById('pallettype');
    var wrap = document.getElementById('wrap');
    var invoiceterms = document.getElementById('invoiceterms');
    var specialinstructions = document.getElementById('specialinstructions');
    var bookingname = document.getElementById('bookingname');
    var bookingphone = document.getElementById('bookingphone');
    var signed = document.getElementById('signed');
    var signeddate = $('.signeddate');
    var inputby = document.getElementById('inputby');

    var inputdate = $('.inputdate');

    console.log('triggers2');

    html5rocks.webdb.addTodo(companyname.value, tradingas.value, regadd1.value, regadd2.value, regaddcity.value, regaddstate.value, regaddcountry.value, regaddpostcode.value, cregno.value, vatregno.value, accountsname.value, accountsphone.value, accountsemail.value, accountsfax.value, invadd1.value, invadd2.value, invaddcity.value, invaddstate.value, invaddcountry.value, invaddpostcode.value, creditlimit.value, firstorder.value, reqdeldate.value, deladd1.value, deladd2.value, deladdcity.value, deladdstate.value, deladdcountry.value, deladdpostcode.value, buyingname.value, buyingphone.value, buyingemail.value, buyingfax.value, ordersource.value, currency.value, deliveryterms.value, maxpallet.value, pallettype.value, wrap.value, invoiceterms.value, specialinstructions.value, bookingname.value, bookingphone.value, signed.value, signeddate.value, inputby.value, inputdate.value);

    alert('Customer Form Saved');

} 
```

有人知道问题到底是什么吗？我很难过

# data-structures - 形成相同 AVL 和展开树的序列？

> ID：14564437
> 
> 赞同：6
> 
> 时间：2013-01-28T14:41:16.383
> 
> 标签：data-structures, tree, binary-search-tree, avl-tree, splay-tree

是否存在这样的数字序列（1-7，所有数字都使用，每个数字仅一次），可以形成相等的 AVL 和展开树？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-03-14T08:14:35.603

好吧，为了科学的利益，我根据各自的 Wikipedia 文章在 Python 中实现了 AVL 和 splay 树。假设我没有在某处犯错，我的发现是**没有产生相同 AVL 和 splay tree 的 {1, ..., 7} 排列**。我猜想所有大小 k > 3 的集合都是如此。至于根本原因，我不知道。

如果有人想检查我的代码，这里是：

```
#####################
# Class definitions #
#####################
class Node:
    ''' A binary tree node '''
    def __init__(self, n, p=None, l=None, r=None):
        self.n = n
        self.p = p
        self.l = l
        self.r = r
        self.h = None

    def __str__(self):
        return "[%s %s %s]" % (self.n, (self.l if self.l else "-"), (self.r if self.r else "-"))

    def __eq__(self, other):
        if not isinstance(other, Node):
            return NotImplemented
        return self.n == other.n and self.l == other.l and self.r == other.r

    def __ne__(self, other):
        return not (self == other)

class HNode(Node):
    ''' A binary tree node, with height '''
    def __init__(self, n, p=None, l=None, r=None):
        super(HNode, self).__init__(n, p, l, r)
        self.hup()

    def lh(self):
        ''' Get height of left child '''
        return self.l.h if self.l else 0

    def rh(self):
        ''' Get height of right child '''
        return self.r.h if self.r else 0

    def hup(self):
        ''' Update node height '''
        self.h = max(self.lh(), self.rh())+1

    def __str__(self):
        return "[%s (%d) %s %s]" % (self.n, self.h, (self.l if self.l else "-"), (self.r if self.r else "-"))

#########################
# Basic tree operations #
#########################

#      v           u
#     / \         / \
#    u   c  -->  a   v
#   / \             / \
#  a   b           b   c
def rright(v):
    ''' Rotate right '''
    u = v.l
    u.r, v.l = v, u.r
    if v.l:
        v.l.p = v
    u.p, v.p = v.p, u
    return u

#    u             v
#   / \           / \
#  a   v   -->   u   c
#     / \       / \
#    b   c     a   b
def rleft(u):
    ''' Rotate left '''
    v = u.r
    u.r, v.l = v.l, u
    if u.r:
        u.r.p = u
    u.p, v.p = v, u.p
    return v

######################
# AVL tree functions #
######################

def avl_lr(v):
    v.l = rleft(v.l)
    v.l.l.hup()
    v.l.hup()
    return avl_ll(v)

def avl_ll(v):
    u = rright(v)
    u.r.hup()
    u.hup()
    return u

def avl_rl(v):
    v.r = rright(v.r)
    v.r.r.hup()
    v.r.hup()
    return avl_rr(v)

def avl_rr(v):
    u = rleft(v)
    u.l.hup()
    u.hup()
    return u

def avl_insert(v, n, p=None):
    if v is None:
        return HNode(n, p)
    if n < v.n:
        v.l = avl_insert(v.l, n, v)
        v.hup()
        if v.lh() > v.rh() + 1:
            return (avl_ll if (v.l.lh() > v.l.rh()) else avl_lr)(v)
        else:
            return v
    else:
        v.r = avl_insert(v.r, n, v)
        v.hup()
        if v.rh() > v.lh() + 1:
            return (avl_rr if (v.r.rh() > v.r.lh()) else avl_rl)(v)
        else:
            return v

def build_avl_tree(s):
    ''' Build an AVL tree from the given sequence '''
    v = None
    for n in s:
        v = avl_insert(v, n)
    return v

########################
# Splay tree functions #
########################

two = lambda x: (x,x)

def bst_insert(p, n, g=None):
    ''' Insert a value into a BST, returning a pair consisting of
        the root of the tree and the new node '''
    if p is None:
        return two(Node(n,g))
    if n < p.n:
        p.l, x = bst_insert(p.l, n, p)
    else:
        p.r, x = bst_insert(p.r, n, p)
    return p, x

def splay(x):
    ''' Percolate x to the root of its tree '''
    if x.p:
        p = x.p
        g = p.p
        if g:
            if p.n < g.n:
                if x.n < p.n:
                    x = rright(rright(g))
                else:
                    g.l = rleft(p)
                    x = rright(g)
            else:
                if x.n > p.n:
                    x = rleft(rleft(g))
                else:
                    g.r = rright(p)
                    x = rleft(g)
            p = x.p
            if p:
                if x.n < p.n:
                    p.l = x
                else:
                    p.r = x
            return splay(x)
        else:
            if x.n < p.n:
                return rright(p)
            else:
                return rleft(p)
    else:
        return x

def splay_insert(p, n, g=None):
    r, x = bst_insert(p, n, g)
    return splay(x)

def build_splay_tree(s):
    ''' Build a splay tree from the given sequence '''
    v = None
    for n in s:
        v = splay_insert(v, n)
    return v

####################
# The Big Question #
####################

from itertools import permutations
def find_matches(n):
    ''' Generate all permutations of {1, ..., n} that produce
        matching AVL and splay trees '''
    for s in permutations(range(1, n+1)):
        t1 = build_avl_tree(s)
        t2 = build_splay_tree(s)
        if t1 == t2:
            yield s

def find_match(n):
    ''' Return a permutation of {1, ..., n} that produces matching
        AVL and splay trees, or None if no such permutation exists '''
    return next(find_matches(n), None) 
```

# node.js - 在 socket.io 中使用 socket.id 断开客户端的套接字

> ID：14564438
> 
> 赞同：2
> 
> 时间：2013-01-28T14:41:16.970
> 
> 标签：node.js, socket.io

我创建了一个数组，其中包含我们关于套接字和会话以及昵称的信息，如下所示

```
 myarray ==   [
        {sessionId: '12345', nickname: 'timmay!', socketIds: [1, 2, 3]},
        {sessionId: '23456', nickname: 'pete', socketIds: [4, 5, 6]}
    ] 
```

现在我想断开 1 号和 2 号 socket.id 的连接，因为我希望用户只有 1 个用于 1 个浏览器的套接字。例如，如果昵称 timmy 的用户使用他浏览器的一个选项卡打开我们的聊天， `socketIds: [1]`那么如果他打开另一个选项卡，我们会为他创建另一个 id 为 2 的套接字，现在我们为一个客户端创建了 2 个 id。无论如何要断开 id 编号 1 与 socket.id 的连接吗？

例如像这样的一些代码？

```
socket.disconnect(socket.id) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T15:02:14.057

尝试这个：

```
delete io.sockets.sockets[myarray[index].sessionId]; 
```

# python - Python 脚本 - 提高速度

> ID：14564440
> 
> 赞同：2
> 
> 时间：2013-01-28T14:41:19.033
> 
> 标签：python, performance

我有一个工作 Python 脚本，它检查 6,300 个左右的站点，我们必须通过向每个站点发送 HTTP 请求并测量响应来确保它们正常运行。目前脚本需要大约 40 分钟才能完全运行，我可能对加速脚本的其他一些方法感兴趣，两个想法是线程或多个运行实例。

这是现在的执行顺序：

1.  MySQL 查询以获取要扫描的所有活动域（6,300 个给予或接受）
2.  遍历每个域并使用 urllib 向每个域发送 HTTP 请求
3.  如果该站点未返回“200”，则记录结果
4.  重复直到完成

这似乎可以通过线程显着加快，但我不太确定该流程的外观，因为我不熟悉线程。

如果有人可以提供示例高级流程和任何其他使用线程的指针或提供有关如何改进脚本的任何其他见解，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T14:47:03.567

你可以看看scrapy框架。它是为网页抓取而设计的。它的异步构建在扭曲且非常快的基础上。

在您的情况下，您可以获取要抓取的域列表，并且只查看它是否会返回 200 而不会实际抓取任何内容。它应该快得多。

这是链接： [http ://scrapy.org/](http://scrapy.org/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T14:48:38.043

流程看起来像这样：

1.  创建域队列
2.  创建结果队列
3.  MySQL 查询以获取要扫描的所有活动域
4.  将域放入域队列
5.  产生一个工作线程池
6.  运行线程
7.  每个worker会从域Queue中获取一个域，发送请求并将结果放入result Queue
8.  等待线程完成
9.  从结果队列中获取所有内容并记录下来

您可能希望调整线程数，从而调整池，而不仅仅是每个域的 6300 个线程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T14:45:54.340

线程**绝对**是您需要的。它将消除算法的序列化性质，并且由于它主要受 IO 限制，因此您将通过并行发送 HTTP 请求获得很多收益。

您的流程将变为：

1.  MySQL 查询以获取要扫描的所有活动域（6,300 个给予或接受）
2.  遍历每个域并创建一个线程，用于`urllib`向每个域发送 HTTP 请求
3.  在线程中记录结果

您可以通过创建`n`带有队列的工作线程来改进此算法，并将域添加到队列中，而不是为每个域创建一个线程。由于您不熟悉线程，因此我只是想让您的事情变得更容易一些。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-28T14:49:35.760

我猜你应该使用线程，调查启动的最佳进程数，以避免杀死你的客户。Python手册提供了很好的例子顺便看看这里[同时下载多个页面？](https://stackoverflow.com/questions/1491993/download-multiple-pages-concurrently/1493005#1493005)

和[urllib](http://docs.python.org/library/urllib.html) ,[线程](http://docs.python.org/library/threading.html#module-threading),[多处理](http://docs.python.org/library/multiprocessing.html#module-multiprocessing)

# android - 使用 Windows Azure 推送数据

> ID：14564443
> 
> 赞同：0
> 
> 时间：2013-01-28T14:41:30.423
> 
> 标签：android, design-patterns, azure, push-notification

我目前正在使用带有 Android 的 Windows Azure，并且需要使用 PUSH 通知在用户集之间同步数据。

例如：用户 A 将数据上传到存储在 SQL DB 中的 Azure。然后需要将其推送到一组特定的设备并本地存储在 SQLite 中。

最好的设计模式是什么？我应该使用 PUSH 通知推送数据还是使用 PUSH 作为应用程序的提示，然后连接 azure 并下载数据。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T15:40:48.847

我认为您可能希望向设备发送通知，提示用户启动应用程序，然后应用程序获取数据。我不知道 Android 推送服务是如何工作的，但我认为您可以在单个通知中发送的数据量相当有限。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T22:02:22.067

完成此操作的最佳方法是使用 Windows Azure 移动服务和非官方的 Android SDK。非官方的 Android SDK 可以在：[https ://github.com/goldshtn/wams-android](https://github.com/goldshtn/wams-android)

在这种情况下使用移动服务的好处是在 INSERT 上编写服务器端脚本非常容易。将项目连接到移动服务后，您将前往“数据”选项卡，选择适当的表格，然后前往“脚本”。从下拉列表中选择 INSERT，然后编写一个向指定用户子集发送推送通知的函数。您需要用 JavaScript 编写它。

您可以使用非官方 SDK 中包含的一些代码，但如果您查看[https://www.windowsazure.com/en-us/develop/mobile/tutorials/get-started-with-push-dotnet/#update - 脚本](https://www.windowsazure.com/en-us/develop/mobile/tutorials/get-started-with-push-dotnet/#update-scripts)，您可以了解在任何平台上执行应用程序的步骤（尽管目前教程仅介绍 Windows Phone 8、Windows 应用商店和 iOS）。

# themes - MoinMoin 将主题文件夹与 MoinMoin htdocs 文件夹分开

> ID：14564448
> 
> 赞同：1
> 
> 时间：2013-01-28T14:41:43.000
> 
> 标签：themes, htdocs, moinmoin

我想将我的自定义主题文件夹与默认的 MoinMoin htdocs 文件夹分开。这是我当前安装的目录结构：

```
/path/to/python2.7/lib/site-packages/MoinMoin/web/static/htdocs/
/path/to/python2.7/lib/site-packages/MoinMoin/web/static/htdocs/...
/path/to/python2.7/lib/site-packages/MoinMoin/web/static/htdocs/index.html
/path/to/python2.7/lib/site-packages/MoinMoin/web/static/htdocs/classic
/path/to/python2.7/lib/site-packages/MoinMoin/web/static/htdocs/modern
/path/to/python2.7/lib/site-packages/MoinMoin/web/static/htdocs/mytheme
/path/to/python2.7/lib/site-packages/MoinMoin/web/static/htdocs/mytheme/style.css 
```

还有我自定义的 Git 版本化 wiki/data 目录：

```
/path/to/git-repo/wikiconfig.py
/path/to/git-repo/wikiserver.py
/path/to/git-repo/wiki/data/...
/path/to/git-repo/wiki/data/plugin/theme/mytheme.py
/path/to/git-repo/wiki/underlay/... 
```

`wikiconfig.py`包含以下配置：

```
class LocalConfig(multiconfig.DefaultConfig):
  wikiconfig_dir = os.path.abspath(os.path.dirname(__file__))
  instance_dir = os.path.join(wikiconfig_dir, 'wiki')
  data_dir = os.path.join(instance_dir, 'data', '') # path with trailing /
  data_underlay_dir = os.path.join(instance_dir, 'underlay', '') # path with trailing /
  DesktopEdition = True # give all local users full powers
  acl_rights_default = u"All:read,write,delete,revert,admin"
  surge_action_limits = None # no surge protection
  sitename = u'Foo'
  logo_string = u'<span><img src="...">Bar</span>' % url_prefix_static
  page_front_page = u'StartPage'
  theme_default = 'mytheme' 
```

我想将主题的静态文件移动到`/path/to/git-repo`文件夹中，因为这个目录是一个 Git 存储库，它应该包含所有自定义修改，以及主题的静态文件。

任何想法如何做到这一点？

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T13:43:26.237

我建议您将内置的静态内容留在原处。

对于自定义和单独的主题开发，您可以做的是在某个特定 URL 处提供静态内容，并在 Web 服务器中捕获该 URL，然后再将其提供给 moin.wsgi（并最终由 MoinMoin 的内置静态文件服务器提供服务），就像是：

```
Alias /moin_static196/mytheme /path/to/git-repo/static
WSGIScriptAlias / /..../moin.wsgi 
```

/moin_static196 是 moin 1.9.6 默认使用的 url 路径，您可以在 wikiconfig.py 中修改它以使用您喜欢的任何内容。

您可以将主题 python 代码也放入您的 git 存储库中，然后从实例数据/插件/主题/目录中对其进行符号链接。

# php - php用户名和密码验证安全代码

> ID：14564459
> 
> 赞同：0
> 
> 时间：2013-01-28T14:42:09.390
> 
> 标签：php, ajax

我正在使用 WYSIWYG Webbuilder 8 来构建一个网站。部分网站将仅限于注册用户访问。为此我创建了一个 MySQL 数据库。我也有一个注册表单。当新用户希望注册时，我想让用户名自动检查数据库以确保它不存在。我打算使用 AJAX 函数来执行此操作，因为所见即所得软件内置了此选项。我需要自己构建，这就是我正在努力的地方是 AJAX 命令将转到的 validate.php。

我目前有这样的事情（请原谅我的无知！）：

```
<?php
$username = $_POST['data'];

// TODO: lookup username in database...
if ($username == 'user')
{
  echo "true";
}
else
{
  echo "false";
}
?> 
```

我不知道这是否足够或安全。我一直在阅读一些关于 sql 注入和其他涉及表单使用的黑魔法的可怕内容，如果可能的话，我想避免陷阱。请好心人看看我的请求并帮助我吗？无论如何，我都不是程序员，而且我在这里已经超出了我的深度。在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T14:49:06.027

你想使用一些东西来为你处理你的应用程序和数据库之间的交流。当今可用的最佳工具之一是 PDO 库，特别是 PDO-MySQL 供您使用。它将通过使用参数化（准备好的）语句为您处理转义和 SQL 注入问题

这是连接到数据库并在 MySQL 中发出查询的示例

```
$db = new PDO('mysql:host=localhost;dbname=dbname;charset=UTF-8', 'username', 'password');
$statement = $db->prepare('SELECT user_id FROM users WHERE username = :username LIMIT 1');
$statement->bindValue(':username', $_POST['data']);
$statement->execute();

if (false == $userId = $statement->fetchColumn()) {
    // No matching username was found in the database
} else {
    // A matching username was found in the database
    // $userId contains the matching user ID
} 
```

知道如何将其传递回您的 JS/AJAX 集成可能取决于您使用的框架（如果有）以及您希望该数据采用什么格式

# c# - 无法从 vs 2010 访问 Hubconnection()？

> ID：14564460
> 
> 赞同：0
> 
> 时间：2013-01-28T14:42:19.630
> 
> 标签：c#, visual-studio-2010, webforms, signalr

`SignalR`我正在使用 VS 2010 在 asp .net Web 应用程序中进行跨域实现。

我的问题是我无法`HubConnection()`从我的应用程序访问。我已经安装了 SignalR 版本 0.5.3 。我已经搜索了名称空间， `HubConnection()`但找不到任何名称。谁能告诉我`HubConnection()`无法访问的名称空间或原因。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using SignalR;

namespace SignalRVersion5
{
    public partial class TestServerEvent : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {

        }

        protected void Button1_Click(object sender, EventArgs e)
        {
            var connection = new HubConnection("http://localhost:58416/");
            var chat = connection.CreateProxy("chat");
            chat.On<string>("addMessage", Console.WriteLine);
            try
            {
                connection.Start().Wait();
                string msg = null;
                while ((msg = Console.ReadLine()) != null)
                {
                    chat.Invoke("send", msg).Wait();
                }
            }
            catch (Exception ex)
            {
                using (var error = ex.GetError()) // NEW ERROR HANDLING FEATURES
                {
                    Console.WriteLine(error.StatusCode);
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T23:31:30.070

您需要使用 NuGet 上提供的 SignalR 客户端包：http: [//nuget.org/packages/Microsoft.AspNet.SignalR.Client](http://nuget.org/packages/Microsoft.AspNet.SignalR.Client)

您应该使用 SignalR 的 1.0.0 RC2 版本。0.5.3 已过时。

一旦你安装了正确的客户端包，你应该使用`Microsoft.AspNet.SignalR.Client.Hubs`命名空间。

[https://github.com/SignalR/SignalR/wiki](https://github.com/SignalR/SignalR/wiki)上的文档不断更新最新版本的 SignalR。以下文档与使用 .NET 客户端库和集线器有关：[https ://github.com/SignalR/SignalR/wiki/SignalR-Client-Hubs](https://github.com/SignalR/SignalR/wiki/SignalR-Client-Hubs)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T23:49:45.447

这是一个使用 SignalR.Client 0.5.1.1 的示例。如果您正在创建一个新项目，我绝对建议您先查看 SignalR 1.0。

```
using SignalR.Client.Hubs;

var hubConnection = new HubConnection(HUB_URL);
var hub = hubConnection.CreateProxy(HUB_NAME);

Console.WriteLine("Starting connection");

await hubConnection.Start();

Console.WriteLine("Connected");

var start = DateTime.Now;
var question = new Question
{
    Text = "text message",
    Time = start.ToString("d")
}
};

await hub.Invoke("Ask", question);
hubConnection.Stop(); 
```

# c++ - 一次平方根比平方n次慢吗？

> ID：14564463
> 
> 赞同：-4
> 
> 时间：2013-01-28T14:42:36.647
> 
> 标签：c++

我只是在查看一些素数算法并遇到了这个问题：

```
for(int i=2;i*i <= n;i++)
{/*assume no operations here*/} 
```

我只是想知道上面的循环是否会比下面的更快？

```
int x=sqrt(n);
for(int i=2;i<=x;i++)
{/*nop*/} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T14:46:59.803

当然，这取决于 的值`n`。无论如何，`sqrt()`不​​能保证给你正确的结果：由于四舍五入的原因，你最终可能会`x`得到一个比预期小一的值并破坏算法。与其进行微优化，我会在这里坚持正确性并使用原始版本，这样可以保证给出正确的结果。

# .net - 可以使用 installutil 安装使用较新版本的 .NET Framework 编写的服务

> ID：14564467
> 
> 赞同：0
> 
> 时间：2013-01-28T14:42:45.410
> 
> 标签：.net, .net-framework-version, installutil

installutil 可以用于安装使用较新版本的 .NET Framework 编写的服务吗？

例如，可以使用 .NET Framework 2.0 的版本来安装用 .NET 4 编写的服务吗？

我知道从技术上讲，.NET 4 的版本在技术上应该是可用的，因为服务显然需要它。

*附加信息* 问这个问题的原因是我们用来安装服务的工具似乎是硬编码的，带有指向 .NET 版本 2.0 框架 installutil 的路径。但是我想安装的服务是使用 .NET 4.0 Framework 构建的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T15:47:46.230

为使用任何特定版本的 .NET 而编写的应用程序需要安装该版本的 .NET。只要安装了需要的.NET版本，服务exe就可以执行。如果服务 exe 可以执行，则 INSTALLUTIL 可以安装它（假设所有其他依赖程序集都可以访问）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-10T13:54:24.233

事实证明，您确实需要一个至少与编写程序集的框架版本一样新的版本。

> Microsoft (R) .NET Framework 安装实用程序版本 2.0.50727.6387 版权所有 (c) Microsoft Corporation。版权所有。
> 
> 初始化安装时发生异常：System.BadImageFormatException: 无法加载文件或程序集 'file:///C:\Program Files (x86)\example\example.exe '或其依赖项之一。此程序集由比当前加载的运行时更新的运行时构建，无法加载。Microsoft (R) .NET Framework 安装实用程序版本 2.0.50727.6387 版权所有 (c) Microsoft Corporation。版权所有。

# sql-server - 在 SSMS 2012 中打开 .sql 文件作为默认程序并使用现有实例

> ID：14564469
> 
> 赞同：10
> 
> 时间：2013-01-28T14:42:53.177
> 
> 标签：sql-server, ssms-2012

将 SSMS 2012 与任何其他现有 SSMS 安装（例如 SSMS 2008 R2）一起安装时，将用于打开 .SQL 文件的默认程序设置为新的 SSMS 2012 版本时存在问题。

将 .sql 文件拖到查询窗口可以成功。但是，当用户双击 .sql 文件时，2008 R2 的新实例可以作为 .sql 关联条目打开。双击新文件时更改默认打开方式没有区别。此外，更改打开的命令行脚本也许可以实现将 .sql 更改为 SSMS 2012 中的打开，但它仍然会导致重复 ssms 实例而不是使用现有实例（导致额外的负载和内存使用）。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2015-03-20T15:53:37.923

1.  改编自这篇关于如何[修复 .sql 文件无法使用 SSMS 2008 打开的](http://darrenmyher.com/2012/11/28/how-to-fix-sql-file-not-opening-with-ssms-2008/)帖子，您应该首先打开注册表 ( `regedit`)
2.  转到`HKEY_CLASSES_ROOT\.sql`并将默认值更改为`ssms.sql.11.0`（SSMS 2012 是产品的 v11）。这会告诉您的计算机在尝试打开类型文件时应查找的应用程序字符串`.sql`

    ![.sql](../Images/c7e838ed8997d39dbb3db664cca18b87.png)

3.  注册表采用您刚刚输入的名称，然后查找在另一个注册表设置中实际执行的操作。

    将默认`HKEY_CLASSES_ROOT\ssms.sql.11.0\Shell\Command`值更改为：

    ```
    "C:\Program Files (x86)\Microsoft SQL Server\110\Tools\Binn\ManagementStudio\ssms.exe" "%1" /dde 
    ```

    ![ssms.sql.11.0](../Images/bdab12850e02c20f6a537cfd72509bba.png)

4.  关闭并再次打开您的计算机以获得良好的测量效果。

    如果由于某种原因仍然无法正常工作。右键单击任何 SQL 文件。转到属性并单击以更改它打开的文件。您可能有两个可用的 SQL 选项。尝试一个然后另一个。

    ![打开用](../Images/cd3db8c10cadfc639cce37e33fc80c1c.png)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-28T14:42:53.177

1.  为了更改为默认条目，我使用了一个显示 DDE（动态数据交换）值的应用程序。我个人使用[FileTypesMan](http://www.nirsoft.net/utils/file_types_manager.html)。
2.  然后我将 SSMS 的命令行更改为：

    ```
    "C:\Program Files (x86)\Microsoft SQL Server\110\Tools\Binn\ManagementStudio\Ssms.exe" /dde "%1" 
    ```

    总是通过编辑打开新实例的原因似乎是 windows 需要[将文件与程序相关联，](http://delltech.150m.com/XP/installing/3.htm)以便它可以识别现有程序是否正在运行并使用此实例。这似乎是通过使用 DDE 来实现的。`/dde`表示命令行应该使用 DDE。"%1" 将第一个字符串（ssms.exe 路径）传递给 DDE 协议以用作参数。

3.  DDE 消息：保持在我发现的 SSMS 2008 R2 的值：`Open("%1")`

4.  DDE 应用程序：将应用程序更改为`ssms.11.0`

    **为什么**？这是困难的部分。这是在哪里找到的？我找不到显示 DDE 应用程序名称的工具。我发现当我查看注册表编辑器时，它`sqlwb.sql.9.0`是使用 2008 R2 打开新 .sql 文件的条目。`sqlwb.9.0`这与我开始在 FileTypesMan 中进行更改之前显示的 SSMS 2008 R2 条目的注册表条目相匹配。我删除了 .sql 并发现`HKEY_CLASSES_ROOT`有一个 .sql 条目`ssms.sql.11.0`。

= 文件关联现在设置为全新安装，如果 SSMS.EXE 打开，它应该使用现有实例，无需额外工作。

**提示**：如果您没有打开初始加载，要进一步加快初始加载速度，您可以在加载时使用其他命令行选项。只需转到“运行”对话框并键入：`ssms.exe -?`以获取启动参数列表。我个人`-nosplash`用来消除闪屏负载。

此外，我使用[SSMSBoost](http://www.ssmsboost.com/)，这是我每天使用 SSMS 时不得不帮助的最好的工具（基本代码格式、带光标放置的片段、首选连接设置、完整的键盘快捷键编程（以及一次快捷方式中的多个步骤的选项） ，即基本宏”。Andre 和他的团队对他们论坛中的新想法非常敏感，它的开发人员帮助改善了其他开发人员的生活。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-05-22T15:23:35.780

对于 SQL 2014，您可以使用以下 *.reg 文件（对于 2012，将 12 替换为 11，对于 2016（我猜），将其替换为 13）：

```
Windows Registry Editor Version 5.00

[HKEY_CLASSES_ROOT\sql_auto_file]
@=""
"EditFlags"=hex:00,00,00,00
"FriendlyTypeName"="SQL"

[HKEY_CLASSES_ROOT\sql_auto_file\shell]

[HKEY_CLASSES_ROOT\sql_auto_file\shell\open]

[HKEY_CLASSES_ROOT\sql_auto_file\shell\open\command]
@="\"C:\\Program Files\\Microsoft SQL Server\\120\\Tools\\Binn\\ManagementStudio\\Ssms.exe\" /dde \"%1\""

[HKEY_CLASSES_ROOT\sql_auto_file\shell\open\ddeexec]
@="Open(\"%1\")"

[HKEY_CLASSES_ROOT\sql_auto_file\shell\open\ddeexec\Application]
@="ssms.12.0"

[HKEY_CLASSES_ROOT\sql_auto_file\shell\open\ddeexec\Topic]
@="system" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-05-16T21:20:28.823

我有同样的问题。在 ssms 2012 中使用“恢复文件关联”没有效果。我可以通过右键单击并选择“打开方式”来解决它 - >选择默认程序。现在我知道你说过这不起作用，但有一个技巧。不要选择 ssms 2012 的预提供图标，而是选择浏览并转到 c:\program files(x86)\Microsoft SQL server\110\tools\binn\managementStudio\ 并单击 ssms.exe。点击打开，点击确定。完成此操作后，ssms 2012 是默认设置，双击更多 .sql 文件会加载到同一实例中的选项卡中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-24T23:04:01.523

另一种解决方案：[https ://stackoverflow.com/a/24945327/813599](https://stackoverflow.com/a/24945327/813599)

我去寻找一种更合适的方法来链接到其他 Q/A，但在搜索了 15 分钟后找不到它……我很想接受教育，如果是这样，我会编辑掉它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-09-12T18:05:27.377

我遇到了类似但略有不同的问题。我想在 SSMS 2014 的新选项卡中打开 .sqlplan 文件。我尝试了以上所有方法，但都没有奏效。

查看注册表，我发现 ssms.sql.12.0 有“DdeExec”节点，而 ssms.sqlplan.12.0 没有。

[在此处输入图像描述](http://i.stack.imgur.com/KOLpE.png)

因此，我从 ssms.sql.12.0 导出“DdeExec”节点并将 sql 重命名为 sqlplan，然后将其重新导入。之后，我能够在新选项卡中打开 .sqlplan 文件。

这是注册表文件：Windows 注册表编辑器版本 5.00

```
[HKEY_CLASSES_ROOT\ssms.sqlplan.12.0\Shell\Open\DdeExec]
@="Open(\"%1\")"

[HKEY_CLASSES_ROOT\ssms.sqlplan.12.0\Shell\Open\DdeExec\Application]
@="ssms.12.0"

[HKEY_CLASSES_ROOT\ssms.sqlplan.12.0\Shell\Open\DdeExec\Topic]
@="system" 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-10-14T01:02:47.940

管理工作室 18：

```
"C:\Program Files (x86)\Microsoft SQL Server Management Studio 18\Common7\IDE\Ssms.exe" /dde "%1" 
```

# android - 导入 Google 的 Zip 扩展库

> ID：14564470
> 
> 赞同：1
> 
> 时间：2013-01-28T14:42:53.117
> 
> 标签：android

我正在尝试`Zip Expansion library`在我的应用程序中使用来自 Google 的，但我似乎无法正确导入库。

现在，在我的代码中，为了测试库，我正在使用：

```
ZipResourceFile expansionFile = new ZipResourceFile(); 
```

这是抛出错误，因为我没有正确导入扩展库。

从头开始，有人能告诉我如何在我的项目中使用这个库吗？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T16:59:28.953

在 Eclipse 中，导入“zip_file”项目（使用“将项目复制到工作区”选项）。在您的项目属性下添加对该项目的引用，然后将该项目添加到您的 Java 构建路径。将命名空间添加到您的代码文件中：

```
import src.com.android.vending.expansion.zipfile.*; 
```

此时使用`ZipResourceFile`不应引发任何错误。您还应该在项目属性下将此依赖项标记为 Android 库，以便在构建时对其进行正确管理。

# webbrowser-control - 为 Windows Phone 8 App WebBrowser 控件注册自定义协议

> ID：14564471
> 
> 赞同：1
> 
> 时间：2013-01-28T14:42:54.403
> 
> 标签：webbrowser-control, windows-phone-8

我正在寻找一种为 Windows Phone 8 注册自定义协议的方法。我试图注册一个自定义协议，`WebRequest.RegisterPrefix("xxx://", this)`但这对`WebBrowser`控件不起作用。由于我们的协议方案不是有效的 uri，如果应用程序尝试导航（通过 location.url='xxx://this-is-no-valid-uri'），它就会崩溃。

我希望任何人都可以将光传播到黑暗中；）

编辑：[这](https://dl.dropbox.com/u/7499473/crashing.zip)是我的测试项目。我认为这是一个主要错误，因为您可以通过简单的 JavaScript 语句强制每个应用程序崩溃。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T16:25:11.223

最近我不得不创建一个[自定义 uri](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj206987%28v=vs.105%29.aspx#BKMK_LaunchingaURIusingProximity)方案，这在你的 WMAppManifest 中很容易添加：

```
<Extensions>
  <Protocol Name="XXXX" NavUriFragment="encodedLaunchUri=%s" TaskID="_default" />
</Extensions> 
```

这是站在后面`Tokens`

比在您的 App.cs 文件中重定向到负责导航的类

```
RootFrame.UriMapper = new CustomUriMapper(); 
```

例如

```
class CustomUriMapper : UriMapperBase
{
    private string tempUri;
    public override Uri MapUri(Uri uri)
    {
        tempUri = System.Net.HttpUtility.UrlDecode(uri.ToString());

        if (tempUri.Contains("XXXX"))
        {
         return new Uri("/MainPage.xaml?parameter=XXXX", UriKind.Relative);
        }
        else
            {
                return new Uri("/MainPage.xaml", UriKind.Relative);
            }           
    }
} 
```

我希望我有所帮助

编辑

我创建了一个小项目，我确信它可以工作，请试试这个

```
 string url = "xxxx:";
            WebBrowserTask browser = new WebBrowserTask();
            browser.URL = url;
            browser.Show(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-04T15:20:01.827

我终于找到了解决问题的方法，您需要注册一个自己的 UriParser。

**我的 UriParser：**

```
public class MyUriParser : UriParser
{
    public MyUriParser()
    {

    }

    protected override string GetComponents(Uri uri, UriComponents components, UriFormat format)
    {
        return "";
    }
    protected override bool IsWellFormedOriginalString(Uri uri)
    {
        return true;
    }
    protected override void InitializeAndValidate(Uri uri, out UriFormatException parsingError)
    {
        parsingError = null;
    }
    protected override bool IsBaseOf(Uri baseUri, Uri relativeUri)
    {
        return false;
    }
    protected override string Resolve(Uri baseUri, Uri relativeUri, out UriFormatException parsingError)
    {
        parsingError = null;
        return "";
    }
} 
```

**通过以下方式注册：**

```
if (!UriParser.IsKnownScheme(SCHEMENAME_0))
    UriParser.Register(new MyUriParser(), SCHEMENAME_0, 80); 
```

# java - 理解Java解释

> ID：14564473
> 
> 赞同：0
> 
> 时间：2013-01-28T14:42:58.383
> 
> 标签：java

我正在做一个练习，我需要实现一个类，我很难理解解释。

这是解释/练习：

```
 * Adds all of the elements in the specified set, for which it is
 * possible, to this set.
 * post: all elements, for which it is possible, in the
 * specified set are added to this set.
 * @return true if this set changed as a result of the call 
```

这就是答案

```
public boolean addAll(SimpleSet<? extends E> s) {
    Iterator<? extends E> it = s.iterator();
    boolean changed = false;
    while (it.hasNext()) {
        changed = add(it.next());
    }
    return changed;
} 
```

这就是我自己尝试做的事情，但是我很难把我的头绕在我应该做的事情上。

```
public boolean addAll(SimpleSet<? extends E> s){
        Iterator<? extends E> itr = s.iterator();
        while(itr.hasNext()){
            add(itr.next());
        }
    return true;
} 
```

感谢任何可能的帮助，

鲍比。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T14:51:11.927

实际上，您的答案与提供的答案并没有太大的不同，它会添加所有给定的元素。你没有考虑什么？

根据该方法的定义，它应该返回一个布尔值，指示集合是否由于添加元素而改变。在您的实现中，您只需返回 true，这意味着您没有考虑尝试添加的元素何时已存在于集合中。尽管给定的实现只检查最后一个也不正确的实现。

请记住，根据定义，一个 Set 不能有重复的元素，所以布尔值只是为了让调用者知道某些东西是否真的发生了变化。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T14:52:08.277

您的代码与提供的答案之间的区别在于您的代码无条件返回`true`，即使没有任何变化（与返回集合是否已更改的规定要求相反）。提供的答案实际上也有一点缺陷，因为它只返回最后一个对象是否被接受（即它可以返回假阴性），该行应该是`changed = changed || add(it.next());`.

# django - 保存使用 requests.POST 上传的文件的服务器端问题

> ID：14564479
> 
> 赞同：1
> 
> 时间：2013-01-28T14:43:23.530
> 
> 标签：django, python-requests

下面是我在特定服务器上上传文件的 python 片段代码：

```
import requests
url = "http://<my_url>"
files = {'file':open("<file to be uploaded>", "rb"), "name":"<name of the file>"}
r = requests.post(url, files=files) 
```

状态码是200，所以没问题。我的问题是，在服务器端，我如何保存这个文件？我可以通过以下方式访问字典上的“名称”：

```
request.POST.get('name') 
```

我也可以访问“文件”，但无法保存。我正在尝试这个：

```
ufile = request.POST.get('file')
dest = open("<file on the server side>", "wb+")
for chunk in ufile.chunks():
   dest.write(chunk)
dest.close() 
```

但这不起作用，它会引发此异常：

```
unicode object has no attribute 'chunks' 
```

我也试过：

```
ufile.save(<"filepath on the server side">) 
```

但是我遇到了同样的异常。

希望得到任何反馈！提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T14:51:52.753

文件不在`request.POST`，它们在`request.FILES`.

但您可能想阅读[文件上传文档](https://docs.djangoproject.com/en/1.4/topics/http/file-uploads/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T14:46:41.750

尝试以下操作，而不是逐块写入：

```
dest.write(ufile) 
```

ufile 对象是一个字符串，而不是文件句柄。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-19T09:21:13.020

有同样的问题..您应该从请求标头中删除“Content-type”，您的文件将出现在 中`request.FILES`，然后您可以使用`<TemporaryUploadedFile>`

我认为这个答案与@jaysonpryde 无关，但也许会对其他人有所帮助.. :)

# angularjs - AngularJS 中的 $scope 是否等同于 MeteorJS 中的 Session？

> ID：14564481
> 
> 赞同：0
> 
> 时间：2013-01-28T14:43:24.613
> 
> 标签：angularjs, meteor

我正在学习 AngularJS 和 MeteorJS，并想同时使用它们。我注意到每个包都有自己的对象来存储全局变量：`$scope`在 Angular 和`Session`MeteorJS 中。

同步它们是否有意义，即 $scope 中的变量更改会导致 Session 中的相应更改，反之亦然？我应该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T01:48:52.013

*（不是一个完全令人满意的答案，而是一个快速的提示，因为我目前正在试验/评估两者）*

Meteor 使用 Session 作为全局缓存对象，而 Angular $scope 简单而强大地基于经典的作用域概念——并且在此过程中带来了对其含义的直观理解。换句话说，Angular 中的控制器和指令都有自己的 $scope，而 Meteor 模板和几乎所有对象都可以访问 Session 对象。

就我目前看到的 Angular 和 Meteor 之间的基准测试而言，两者都是经过深思熟虑的框架，但由于许多组件是多余的，所以不能很好地结合在一起——对于 Backbone 和 Meteor 的观察相同。反应式编程是在 Meteor 中实现的，就像 Angular 使用双向绑定变量一样。Meteor 似乎通过为客户端和服务器启用一种语言和工具箱使事情变得更容易。

# extjs - 如何在 ext js4 中创建对象数组并为其设置值？

> ID：14564483
> 
> 赞同：0
> 
> 时间：2013-01-28T14:43:27.420
> 
> 标签：extjs, extjs4

我正在使用 extjs4 MVC。我在哪里卡住了* *。这是如何在 extjs4 中定义对象数组并为其设置值以及从该对象中检索值。**我试过了，但还没有解决。假设我有 Qusetion 论文。它显示了一些带有选项的问题。我有正确选择的选项的问题。但我没有成功将它存储在正确的模型实例中。我知道如何将单个记录存储到特定的模型实例。但我不知道如何将重复值存储到特定模型对象。我如何解决这个问题。

1）这是我的一些控制器文件代码

```
temp:function()
    {
        var obj = Ext.create('Demo.model.Poll');
        for(var i=0;i<4;i++)
        {
                var inputs = document.getElementsByName(i); 
                var radio = "";  
                for (var j = 0; j < inputs.length; j++) {
                    if (inputs[j].checked) {
                        name = inputs[j].name;
                        value  = inputs[j].value;
                        //console.log("questionId="+name +" value="+ value);
                        check.set('poll',name);
                        check.set('option',value);
                    }// End of if statment
                }// End of inner for loop
          }//End of outer for loop

        //Here I am going to display values inside object  
        console.log("----------------------------------");
          for(var i=0;i<4;i++)
          {
              console.log(i);
              console.log(check.get('poll'));
              console.log(check.get('option'));
          }
    //Is it possible to save object array to server side in single save method
    //  obj.save();

}// End of temp function 
```

2）运行此代码后，我得到了模型的最后一个设置值。在萤火虫中，我得到了这个结果。例如。

```
3 
England 

3 
England 

3 
England

3 
England 
```

请给我一些建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T09:07:39.523

试试看，var myObj = [];

```
for(.....)
{
   myObj.push(
      {
        'poll' : name, 
        'option' : value
      });
} 
```

访问，

```
var i;
for(i=0; i<myObj.length; i++)
{
   console.log(myObj[i].poll);
   console.log(myObj[i].option);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T07:44:47.450

我已经找到了我的问题的解决方案，这就是答案。

```
//code for getting question name and value from view and send to server side in a asingle request
check:function()
{
    //creating objects in javascript
        var storeObject=this.getStore('qb.QbquestionoptionStore');
    for(var i=0;i<=4;i++)
    {
            var inputs = document.getElementsByName(i); 
            var radio = "";  
            for (var j = 0; j < inputs.length; j++) {
                if (inputs[j].checked) {
                    name = inputs[j].name;
                    value  = inputs[j].value;
                    console.log("questionId="+name +" value="+ value);
                        var check = Ext.create('Balaee.model.qb.QbquestionoptionModel');
                        check.set('questionId',name);
                        check.set('option',value);

                    storeObject.add(check);
                  //console.log("User Infooooooooo: option="+check.get('option')+"questionId="+check.get('questionId'));
                }// End of if statment
            }// End of inner for loop
      }//End of outer for loop
    // code to display data in store object 
      for(var i=0;i<4;i++)
      {
          var record=storeObject.getAt(i);
          console.log("record no="+i);
          console.log("Qusetion Id="+record.get('questionId'));
          console.log("Option="+record.get('option'));
          console.log();
      }
      storeObject.sync();
}// End of check function 
```

# php - 如何在 Eclipse 上不显示 @todo 任务标签（Mac OS 上的 eclipse-php）

> ID：14564484
> 
> 赞同：0
> 
> 时间：2013-01-28T14:43:34.533
> 
> 标签：php, eclipse, todo

我想让右边的任务标记不显示。
左边的记事本图标就够了，右边的蓝色标记与出现的绿色标记混合在一起，所以它使视图混乱，我第一眼就无法区分它们。
如何关闭@任务？

![](../Images/5ee0b8458384571cc43b6fd946467682.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T15:15:42.603

我用的是Apatana studio，但我觉得在Eclipse中也是一样的……</p>

首选项 > 编辑器 > 文本编辑器 > 注释

选择“任务”并取消选中垂直标尺。

# mysql - Mysql查询以获取相差5分钟的行

> ID：14564485
> 
> 赞同：0
> 
> 时间：2013-01-28T14:43:38.510
> 
> 标签：mysql

我有两个与外键关系链接的表。两个表都有创建日期列。如何找到时差为 5 分钟加或减的所有匹配行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T14:50:08.417

您需要使用 timestampdiff 函数和 abs 函数，如下所示：

```
select * from table1 a, table2 b where a.ID=b.FOREIGNID and ABS(TIMESTAMPDIFF(MINUTE,a.CREATEDDATE,b.CREATEDDATE)) > 5 
```

两个函数的文档：

[http://dev.mysql.com/doc/refman/5.0/en/mathematical-functions.html#function_abs](http://dev.mysql.com/doc/refman/5.0/en/mathematical-functions.html#function_abs)

[http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_timestampdiff](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_timestampdiff)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T14:50:51.000

那应该行得通。还是双方都需要？

```
SELECT *
  FROM tableA a
  JOIN tableB b
    ON a.keyInfo = b.keyInfo
   AND b.created BETWEEN a.created - 5/(24*60) AND a.created + 5/(24*60) 
```

# javascript - Javascript选中/取消选中所有复选框功能仅在有多个复选框时才有效

> ID：14564486
> 
> 赞同：0
> 
> 时间：2013-01-28T14:43:46.220
> 
> 标签：javascript

我将一系列复选框设置为数组 (name="action[]") 和一个 JavaScript 函数，该函数链接到另一个复选框以选中/取消选中所有这些复选框。当至少有两个要检查的复选框时，它工作正常，但如果只有一个，它什么也不做。谁能指出我正确的方向？谢谢！

HTML：

```
<input type="checkbox" name="checkall" id="checkall" class="box" onClick="doCheck(this, 'action');">

<input type="checkbox" name="action[]" id="action" value="' . $something['someid'] . '" class="box">
<input type="checkbox" name="action[]" id="action" value="' . $something['someid'] . '" class="box"> 
```

JavaScript：

```
function doCheck(mainChk, fields) {
  for(i = 0; i < mainChk.form.elements[fields].length; i++) {
    mainChk.form.elements[fields][i].checked = mainChk.checked;
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T14:50:47.420

```
<input type="checkbox" name="checkall" id="checkall" class="box">

<input type="checkbox" name="action[]" id="action" value="' . $something['someid'] . '" class="box check-child">
<input type="checkbox" name="action[]" id="action" value="' . $something['someid'] . '" class="box check-child"> 
```

如果您想使用 jquery，您可以使用以下代码：

```
$("#checkall").click(function(){
    if($(this).is(":checked"))
        $(".check-child").attr("checked", "checked");
    else
        $(".check-child").removeAttr("checked");
)); 
```

# spring - 没有定义类型 [javax.persistence.EntityManagerFactory] 的唯一 bean：预期的单个 bean 但找到 0：

> ID：14564487
> 
> 赞同：0
> 
> 时间：2013-01-28T14:43:48.337
> 
> 标签：spring, hibernate, jpa-2.0

我正在使用 springframework 3.2 和 jboss server 7.1 。尝试使用 jpa2(hibernate provider, mysql) 和 spring mvc 设置一个简单的 spring 应用程序。

我使用了一个简单的 DAO，我在家庭控制器中注入了自动装配注释。这个 dao 类只是有一个用于注入 persistentContext 的字段（em），它可能更简单，我不使用persistence.xml，因为从 3.1 版及更高版本的 spring 不需要......请注意，包被扫描正确地，我已经尝试了网络上发布的其他解决方案的所有内容（包括这里）......但我收到了这个错误：

> org.springframework.beans.factory.BeanCreationException：无法自动装配字段：com.stko.home.model.daos.UserDao com.stko.home.controllers.HomeController.userDao; 嵌套异常是 org.springframework.beans.factory.BeanCreationException：创建名为“userDao”的 bean 时出错：注入持久性依赖项失败；嵌套异常是 org.springframework.beans.factory.NoSuchBeanDefinitionException：没有定义类型 [javax.persistence.EntityManagerFactory] ​​的唯一 bean：预期单个 bean 但找到 0：org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject (AutowiredAnnotationBeanPostProcessor.java:514) org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:87) org.springframework.beans.factory。

我的 applicationContext.xml：

```
<bean class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close" id="dataSource">
    <property name="driverClassName" value="com.mysql.jdbc.Driver"/>
    <property name="url" value="jdbc:mysql://localhost:3306/mmydb"/>
    <property name="username" value="user"/>
    <property name="password" value="1234"/>
</bean>

<bean class="org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor" />

<bean id="entityManagerFactory"
        class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean" >

<property name="dataSource" ref="dataSource"/>
    <property name="jpaVendorAdapter">
        <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter"/>
    </property>

    <property name="packagesToScan" value="com.stko.home.model.entities"/>

            <property name="jpaProperties">
                <props>
                    <prop key="hibernate.dialect">org.hibernate.dialect.MySQL5InnoDBDialect</prop>
                    <prop key="hibernate.max_fetch_depth">3</prop>
                    <prop key="hibernate.show.sql">true</prop>
                    <prop key="hibernate.connection.charSet"> UTF-8</prop>
                </props>

            </property>
        </bean>

<!--  tell spring to use annotation based congfigurations -->
<context:annotation-config />

 <!-- scan for beans -->
<context:component-scan base-package="com.stko.home.model.daos"/>

<!-- to recognize persistnce annotations like PersistenceContext -->
<bean class="org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor"/>
<tx:annotation-driven transaction-manager="transactionManager" />

<bean id="databaseProperties" class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
        <property name="location" value="classpath:database.properties"/>
</bean> 
```

我的 servlet-context.xml：

```
<!-- Enables the Spring MVC @Controller programming model -->
<annotation-driven />

<!-- Handles HTTP GET requests for /resources/** by efficiently serving up static resources in the ${webappRoot}/resources directory -->
<resources mapping="/resources/**" location="/resources/" />

<!-- Resolves views selected for rendering by @Controllers to .jsp resources in the /WEB-INF/views directory -->
<beans:bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <beans:property name="prefix" value="/WEB-INF/views/" />
    <beans:property name="suffix" value=".jsp" />
</beans:bean>

<context:component-scan base-package="com.stko.home"/> 
```

我的 web.xml：

```
<!-- The definition of the Root Spring Container shared by all Servlets and Filters -->
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/spring/root-context.xml</param-value>
</context-param>

<!-- Creates the Spring Container shared by all Servlets and Filters -->
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>

<!-- Processes application requests -->
<servlet>
    <servlet-name>appServlet</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/spring/appServlet/servlet-context.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>appServlet</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping> 
```

我的用户道：

```
@Service("userDao")
@Repository
public class UserDao implements Serializable {
  @PersistenceContext
  private EntityManager em;

  @Transactional
  public  void saveUser(User user) {
  if(user!=null)
   em.persist(user);
  }

} 
```

我的实体类用户：

```
 @Entity
   @Table(name = "user")
   public class User implements Serializable {

   @Id
   @GeneratedValue(strategy = GenerationType.IDENTITY)
   @Column(name = "userid")
   private Integer userid;

   @Column(name="username")
   private String username;
   public User(){}
   } 
```

我典型的家庭控制器：

```
@Controller
public class HomeController {
.....

@Autowired
UserDao userDao;

@RequestMapping(value = "/", method = RequestMethod.GET)
public String home(Locale locale, Model model) {

.....

User newUser = new User();
newUser.setName("blabla");

userDao.saveUser(newUser);

return "home";
} 

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T15:00:24.950

问题很可能是`servlet-context.xml`文件中的这一行：

```
<context:component-scan base-package="com.stko.home"/> 
```

这实际上是试图在您的 Web 应用程序上下文中再次创建您的 DAO。你应该只有一个过滤器，它只在这里创建你的控制器，这样：

```
<context:component-scan base-package="com.stko.home">
<context:include-filter expression="org.springframework.stereotype.Controller" type="annotation" />
</context:component-scan> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T14:45:10.730

您是否有一个在其中定义了持久性单元的 persistence.xml？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-05T22:02:50.293

尝试这个

```
<bean class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean" id="entityManagerFactory">
    <property name="persistenceUnitName" value="persistenceUnit"/>
    <property name="dataSource" ref="dataSource"/>
    <property name="jpaDialect">
        <bean class="org.springframework.orm.jpa.vendor.HibernateJpaDialect" />
    </property>
</bean> 
```

为您的 EMF bean 定义属性，persistenceUnit 应该是您在 persistence.xml 中声明的名称

# iis-7 - AppFabric IIS 扩展

> ID：14564489
> 
> 赞同：1
> 
> 时间：2013-01-28T14:44:14.010
> 
> 标签：iis-7, appfabric

我继承了一个使用在 Win2K8R2 应用服务器上托管的 AppFabric 的应用程序。我将 IIS 功能添加到服务器，并尝试安装 IIS UI 扩展。谁能建议如何做到这一点？

谢谢

保罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T08:32:52.177

只需在您的服务器上安装 AppFabric（[在此处下载](http://www.microsoft.com/en-us/download/details.aspx?id=27115)）

对于 IIS Extension，您只需要安装**Hosting Administration**。请注意，如果您的服务器正在托管 WCF/WF 服务，您还需要**托管服务**：如果没有此功能，如果在配置中启用，您的服务将不会使用 Appfabric 事件。

![在此处输入图像描述](../Images/7e3c07ec13c61570ef1f445e7e2cb797.png)

# php - php代码不起作用

> ID：14564491
> 
> 赞同：0
> 
> 时间：2013-01-28T14:44:22.110
> 
> 标签：php, mysql, lamp

这是我的php代码

```
<?php
try
{   
    $mysqlConnection = mysqli_connect('localhost', 'root', 'root');
    if($mysqlConnection)
    {
        echo "Connected"."\n";
        mysqli_select_db('test',$mysqlConnection);
        $result = mysqli_query("SELECT * from tbl_details");
        $row = mysqli_fetch_array($result);
        echo strlen($row);
    }
    else
    {
        echo "Not connected";
    }
}
catch(Exception $exp)
{
    echo $exp;
}   
?> 
```

我已经验证了凭据，并且表中也有数据，但我仍然没有得到任何记录。任何任何指出为什么？

***更新：：***

工作代码

```
<?php
try
{   
    $mysqlConnection = mysqli_connect('localhost', 'root', 'root','test');
    if($mysqlConnection)
    {
        echo "Connected"."\n";
        $result = $mysqlConnection->query("SELECT NAME,State FROM tbl_details");
        echo $result->num_rows."\n";
    }
    else
    {
        echo "Not connected";
    }
}
catch(Exception $exp)
{
    echo $exp;
}   
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T14:47:56.323

```
$mysqli = new mysqli('localhost', 'my_user', 'my_password', 'my_db');
$resultaat = $mysqli->query("SELECT * FROM tabel");
while ($record = $resultaat->fetch_assoc())
{
  print_r($record);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T14:49:19.190

您缺少这段代码来显示结果：

```
while($row = mysql_fetch_array($result))
  {
  echo $row['name of column'] . " " . $row['name of column'];
  echo "<br />";
  } 
```

看这个链接：[http ://www.w3schools.com/php/php_mysql_select.asp](http://www.w3schools.com/php/php_mysql_select.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T14:49:36.913

试试下面的代码：

```
$link = mysql_connect('localhost','root','');
$db_selected = mysql_select_db('test',$link);

$result = mysql_query("SELECT * from tbl_details");
while($row = mysql_fetch_array($result))
{
    echo $row['fieldname'];
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T14:51:15.500

这是初学者的最佳网站 - 初学者[的“MySQLi”](http://codular.com/php-mysqli)

并记住不要使用 mysql_ 函数，因为它们已被弃用。

[用于备份我的 anwser 的 PHP 站点](http://php.net/manual/en/function.mysql-query.php)

一些示例代码

```
 $db = new mysqli('localhost', 'user', 'pass', 'demo');

    if($db->connect_errno > 0){
    die('Unable to connect to database [' . $db->connect_error . ']'); 
```

}

# hadoop - 我可以动态重命名 oozie 作业名称吗

> ID：14564493
> 
> 赞同：5
> 
> 时间：2013-01-28T14:44:29.287
> 
> 标签：hadoop, oozie

我们有一个 Hadoop 服务，其中有多个应用程序。我们需要通过重新执行相同的工作流来处理每个应用程序的数据。这些计划在一天中的同一时间执行。问题是，当这些作业正在运行时，很难知道该作业正在运行/失败/成功的应用程序。当然，我可以打开作业配置并知道它，但这确实需要时间，因为有 10 多个应用程序在该服务下运行。

oozie 中是否有任何选项可以在执行作业时动态传递工作流（或其一部分）的名称，例如

```
oozie job -run -config <filename> -name "<NameIWishToGive>"
OR
oozie job -run -config <filename> -nameSuffix "<MyApplicationNameUnderTheService>" 
```

此外，我们不希望创建多个作业文件夹分别执行，因为这将是太多的复制粘贴。

请建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-10T21:05:15.330

在我看来，您应该能够只使用作业配置中设置的属性。

通过执行以下操作，我能够获得动态名称。

这是我的 workflow.xml 的示例：

```
<workflow-app xmlns="uri:oozie:workflow:0.2" name="map-reduce-wf-${environment}">
...
</workflow-app> 
```

在我的 job.properties 中，我有：

```
...
environment=test
... 
```

这个名字最终是：“map-reduce-wf-test”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T15:37:23.097

您会在 apache 文档中找到一大堆 oozie 命令行[。](http://oozie.apache.org/docs/3.1.3-incubating/DG_CommandLineTool.html#Submitting_a_Workflow_Coordinator_or_Bundle_Job)我不确定您到底在寻找哪一个，所以我想我只是粘贴链接。希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-09T14:39:20.637

我在 oozie 中找不到任何东西可以做到这一点。这是在 *.xml 文件中查找/替换 #{appName} 和 #{frequency} + 将所有文件上传到 hdfs 的脚本。值取自作为第三个参数传递给脚本的属性文件。

要点 - [https://gist.github.com/epishkin/5952522](https://gist.github.com/epishkin/5952522)

例子：

```
./upload.sh simple_reports namenode01 simple_reports/coordinator_script-1.properties 
```

其中 'simple_reports' 是一个包含 workflow.xml 和 coordinator.xml 文件的文件夹。

工作流.xml：

```
<workflow-app name="#{appName}" xmlns="uri:oozie:workflow:0.3">
...
</workflow-app> 
```

协调器.xml：

```
<coordinator-app name="#{appName}-coord" xmlns="uri:oozie:coordinator:0.2"

             frequency="#{frequency}"
             start="${start}"
             end=  "${end}"

             timezone="America/New_York">
...
</coordinator-app> 
```

coordinator_script-1.properties：

```
appName=multi_network
frequency=${coord:days(7)}
... 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-05T22:00:22.830

我最近遇到了这个问题，所有表都使用相同的工作流程，但 oozie 应用程序的名称应该反映它正在处理的表的名称。

然后从 job.properties 传递相同的参数，然后 ozzie 应用程序的名称将与 dataload_tablename 一致。

# wordpress - 获取与自定义帖子类型相关的术语

> ID：14564499
> 
> 赞同：0
> 
> 时间：2013-01-28T14:44:44.503
> 
> 标签：wordpress, taxonomy, custom-post-type, term

我正在根据提供给美国每个州的信息类别构建一个站点。我创建了一个名为 state_data 的分类法，并为每个州创建了一个自定义帖子类型。州帖子类型共享分类法，但并非所有州都会获得所有术语。我正在寻找一种方法来列出仅与特定状态相关的所有术语。原生 wp 函数 get_terms 获取分类的所有术语。有没有办法通过 post_type 过滤 get_terms？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T16:05:43.707

好吧，你。如果每个表示状态的 post_type 中没有那么多实体。说10没问题。您可以在一个 post_type 中循环所有实体，并使用 wp_get_post_terms 结果循环来记录所有术语 ID 并将其标记在数组中。

我在 SQL 方面没有我想的那样有经验，但是在查看数据库时，这可以通过自定义 SQL 查询来实现。

看，特定自定义帖子类型的每个实体都有唯一的 ID。你可以

```
SELECT ID FROM wp_posts WHERE post_type = 'Alabama'; 
```

现在您拥有来自阿拉巴马州的所有实体 ID。现在您可以选择分配给这些实体的所有术语。

```
SELECT term_taxonomy_id FROM wp_term_relationship WHERE object_id IN ( *RESULT FROM PREVIOUS QUERY* ); 
```

因此，现在您已经获得了与所有阿拉巴马州实体相关的 term_taxonomy_ids，您可以从 wp_term_taxonomy 表中获取它们

```
SELECT term_id from wp_term_taxonomy WHERE term_taxonomy_id in ( *RESULT FROM PREVIOUS QUERY* ); 
```

最后，您可以从 wp_terms 获取所有术语或通过 PHP 函数查询它们。就像我说的。我不是 SQL 专家，所以我无法通过一个 SQL 查询将其组合在一起，但我不会那么复杂地通过 PHP 的一点帮助将它们组合在一起。但重要的是效率，我想...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-30T23:43:05.307

您可能想尝试这样的事情：

```
SELECT p.ID, p.post_title, tr.term_taxonomy_id, t.`name` 
FROM wp_term_relationships as tr 
JOIN wp_posts AS p ON p.ID = tr.`object_Id`
JOIN wp_terms AS t ON t.`term_id` = tr.`term_taxonomy_id`
WHERE p.post_type = 'state_data'
AND t.`name` = 'Alabama'
ORDER BY p.ID; 
```

您可以从查询中选择您想要的内容`SELECT`...只是 ID，或您希望的任何字段。

本质上，查询所做的是通过 terms_relationship 表将 terms 表链接到 posts 表。

# java - 如何通过jtextfield替换文件中的一行？

> ID：14564500
> 
> 赞同：3
> 
> 时间：2013-01-28T14:44:44.890
> 
> 标签：java, swing, file-io, persistence

这是一个程序，它允许用户搜索一个项目，然后程序将项目拆分并将它们存储在 4 个不同的`textfields`. 但是，以下是将检索到的项目更新回文件的方法。问题是每当用户单击更新按钮时，该行确实更新成功，但文件中的其他行被删除！

我正在使用一个`arraylist`来存储搜索到的项目以及临时文件来写入项目然后重命名它。

```
file.txt

ramal hotel1  10 uk

bren  hotel2  20 france

gil   hotel3  30 china 
```

* * *

```
//Update to file
button9.addActionListener(new ActionListener(){
public  void actionPerformed(ActionEvent ae){

    try {

    String stringSearch = textfield1.getText();

    File filetemp = File.createTempFile("TempFileName", ".tmp", new File("/"));
    BufferedWriter writer = new BufferedWriter(new FileWriter(filetemp));
    File file = new File("file.txt");
    BufferedReader bf = new BufferedReader(new FileReader(file));

    int linecount = 0;
              String line;

    ArrayList<String> list = new ArrayList<String>();
    while (( line = bf.readLine()) != null){
    list.add(line);
    linecount++;

    int indexfound = line.indexOf(stringSearch);

    if (indexfound > -1) {

    String a = textfield1.getText();
    String b = textfield2.getText();
    String c = textfield3.getText();
    String d = textfield4.getText();

    String[] word = line.split("\t");
    String firstword = word[0];
    String secondword = word[1];
    String thirdword = word[2];
    String fourthword = word[3];

    writer.write(line.replace("\t", "\t").replace(firstword, b).replace(secondword, c).replace(thirdword, d));
    writer.flush();

    }

    writer.newLine();
    }
    writer.close();
    bf.close();
    filetemp.renameTo(file);
    filetemp.deleteOnExit();

    FileChannel src = new FileInputStream(filetemp).getChannel();
    FileChannel dest = new FileOutputStream(file).getChannel();
    dest.transferFrom(src, 0, src.size());

    }catch (IOException e) {

    System.out.println("IO Error Occurred: " + e.toString());

    }

}
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T10:40:25.217

您只将该数据保存回包含您正在搜索的字符串的文件中，而您忽略了其他行。

在 if 块之后将其添加到您的代码中

```
else{
    writer.write(line);
    writer.flush();
} 
```

就在以下行之前：

> writer.newLine();

因此，您的代码将如下所示：

```
//Update to file
button9.addActionListener(new ActionListener(){
public  void actionPerformed(ActionEvent ae){

    try {

    String stringSearch = textfield1.getText();

    File filetemp = File.createTempFile("TempFileName", ".tmp", new File("/"));
    BufferedWriter writer = new BufferedWriter(new FileWriter(filetemp));
    File file = new File("file.txt");
    BufferedReader bf = new BufferedReader(new FileReader(file));

    int linecount = 0;
              String line;

    ArrayList<String> list = new ArrayList<String>();
    while (( line = bf.readLine()) != null){
    list.add(line);
    linecount++;

    int indexfound = line.indexOf(stringSearch);

    if (indexfound > -1) {

    String a = textfield1.getText();
    String b = textfield2.getText();
    String c = textfield3.getText();
    String d = textfield4.getText();

    String[] word = line.split("\t");
    String firstword = word[0];
    String secondword = word[1];
    String thirdword = word[2];
    String fourthword = word[3];

    writer.write(line.replace("\t", "\t").replace(firstword, b).replace(secondword, c).replace(thirdword, d));
    writer.flush();

    }
    else{
        writer.write(line);
        writer.flush();
    }
    writer.newLine();
    }
    writer.close();
    bf.close();
    filetemp.renameTo(file);
    filetemp.deleteOnExit();

    FileChannel src = new FileInputStream(filetemp).getChannel();
    FileChannel dest = new FileOutputStream(file).getChannel();
    dest.transferFrom(src, 0, src.size());

    }catch (IOException e) {

    System.out.println("IO Error Occurred: " + e.toString());

    }

}
}); 
```

# android - 免费 Play 帐户和在应用中使用 AdMob

> ID：14564501
> 
> 赞同：-3
> 
> 时间：2013-01-28T14:44:48.920
> 
> 标签：android, admob

我来自无法开设 Google 商家帐户的地区，但我有免费的 Play 帐户，这意味着我无法发布付费应用程序。我想问，如果我发布带有广告的免费应用程序，比如使用 AdMob，我能赚钱吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T14:50:34.277

是的你可以！

说明、教程和更多信息，[请访问 http://www.google.com/ads/admob/](http://www.google.com/ads/admob/)

# python - BeautifulSoup 在其中查找文本 这是我从这行 Python 代码中得到的结果 listm = soup.findAll('td',{'class':'thumb'}) 当我遍历列表时，这里是一个项目的例子...... [![1507 BOSTWICK LN](/res/slir/w75-h57-c4:3/propertyimages/20120904/BB/DSCN0738.JPG)](/property-search/property-details/
问问题
问问题 2013-01-28T14:45:12.350
4754 次
This question shows research effort; it is useful and clear
2
This question does not show any research effort; it is unclear or not useful
Bookmark this question.
Show activity on this post.
这是我从这行 Python 代码中得到的结果
listm = soup.findAll('td',{'class':'thumb'})
当我遍历列表时，这里是一个项目的例子......
<a href=) 但是，我真正想要的是内部的“1507 BOSTWICK LN”

> ID：14564508
> 
> 赞同：2
> 
> 时间：
> 
> 标签：python, regex, beautifulsoup

这是我从这行 Python 代码中得到的结果

```
listm = soup.findAll('td',{'class':'thumb'}) 
```

当我遍历列表时，这里是一个项目的例子......

```
<a href="/property-search/property-details/1021206?StrtNum=1507"><img alt="1507 BOSTWICK LN" src="/res/slir/w75-h57-c4:3/propertyimages/20120904/BB/DSCN0738.JPG"/></a> 
```

但是，我真正想要的是内部的“1507 BOSTWICK LN”`<img alt=`

我试过`.get_text`with 返回一个空白，我试过 `lista = soup.findAll('td',{'class':'thumb'},{'alt':'img'})`，以及其他几个没有让我得到文本的变体。

我想让 BeautifulSoup 返回文本，还是正则表达式有效？我对RE的了解是zilch，任何输入将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T14:50:16.757

试试这个：

```
listm = soup.findAll('td',{'class':'thumb'})
for elem in listm:
    print elem('img')[0]['alt'] 
```

这应该`img`在每个标签中找到标签`td`并打印`alt`属性的值。

编辑：

你不应该假设`img`标签的存在。改为这样做：

```
listm = soup.findAll('td',{'class':'thumb'})
for elem in listm:
    imgs = elem('img')
    if imgs:
        print imgs['alt'] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T14:49:29.413

您的`td`元素包含一些嵌套元素；在每个元素中搜索`img`标签，然后通过项目查找获取属性：`td``alt`

```
for td in listm:
    img = td.find('img')
    if img is not None:
        print img['alt'] 
```

# php - 限制 VPS 上的脚本访问

> ID：14564513
> 
> 赞同：0
> 
> 时间：2013-01-28T14:45:25.113
> 
> 标签：php, apache

我能得到一些关于限制 PHP 可以做什么的建议吗，例如我有一个 VPS

*   主页/somesite1.com/
*   主页/somesite2.com/
*   主页/somesite3.com/

假设安装了 wordpress 或 pyroCMS，我该如何阻止代码

```
<?php
$files = scandir('../../../');
?> 
```

代码可能会删除所有内容的地方。

提前致谢

# c# - 将 OpenXML SDK .docx 文件转换为 PDF

> ID：14564514
> 
> 赞同：5
> 
> 时间：2013-01-28T14:45:28.930
> 
> 标签：c#, .net, pdf, openxml-sdk

我正在使用 OpenXML sdk 2.5 用数据库中的数据填充 word 模板，我需要将结果导出为 PDF。我目前正在使用服务器端互操作方法，但有时会出现异常：

> System.Runtime.InteropServices.COMException (0x80080005)：检索具有 CLSID {00020906-0000-0000-C000-000000000046} 的组件的 COM 类工厂失败，原因是以下错误：80080005。

有没有其他*免费*的方法可以将 .docx 文档转换为 .pdf？

# sharepoint-2010 - 在文本或计算字段中使用站点标题作为默认值

> ID：14564515
> 
> 赞同：0
> 
> 时间：2013-01-28T14:45:29.713
> 
> 标签：sharepoint-2010, default-value, calculated-columns, calculated-field

我想设置一个默认显示网站标题的网站栏。这应该通过设置单行文本字段的默认值或使用计算字段来完成。我将在工作流中使用字段值。我曾尝试使用 [Site Name] 和 [Site Title] 但这会产生错误。我可以使用标识符或查找来检索此属性吗？我正在使用 SharePoint 2010 和 SPD 2010。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T13:59:33.600

我认为标准功能不可能做到这一点。但是您可以通过 SPD 实现您的目标。

首先编辑您的母版页，并在 head 标签内包含一个新的 jQuery 脚本标签。我建议将当前版本上传到文档库，例如样式库。

```
<script type="text/javascript" src="/_layouts/scripts/jquery.min.js"></script> 
```

现在将此脚本也添加到母版页：

```
<script type="text/javascript">
var web = null;

$(document).ready(function () {
    ExecuteOrDelayUntilScriptLoaded(initialize, "sp.js");       
});

function initialize() {
    if ($("input[title='CurrentSiteTitle']").length > 0) {
        var context = new SP.ClientContext.get_current();
        web = context.get_web();
        context.load(web);
        context.executeQueryAsync(onSuccess, onFail);
    }
}

function onSuccess() {
    $("input[title='CurrentSiteTitle']").val(web.get_title());
}
</script> 
```

添加一个新的网站栏并将其命名为“CurrentSiteTitle”（单行文本）。由于某种原因，我无法使其与 ID 一起使用。

# internet-explorer - IE 10 播放不带扩展名的视频

> ID：14564518
> 
> 赞同：1
> 
> 时间：2013-01-28T14:45:40.387
> 
> 标签：internet-explorer, html5-video, internet-explorer-10

我正在尝试在 IE 10 中播放视频：

```
<video id='media-player' controls preload='auto' width='1770' height='980' >
    <source src='file:///c:/file' />
</video> 
```

这行不通。如果我将文件重命名为 file.mp4，它可以工作。

问题是：如何让 IE 10 播放视频，即使它没有 mp4 扩展名？

正如一个想法，在 IE 9 中这很有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T15:16:02.650

尝试添加`type="video/mp4"`到`source`标签。虽然，据我对`audio`元素的了解，如果 IE 无法识别扩展名，则无论您尝试什么，它都不会播放该文件。我怀疑这也可能是真的`video`。

# javascript - Highcharts：基于多个系列名称的条件工具提示（OR 逻辑运算符）

> ID：14564519
> 
> 赞同：5
> 
> 时间：2013-01-28T14:45:40.970
> 
> 标签：javascript, highcharts

通常可以根据 highchart 中的系列名称调整工具提示格式，使用以下类型的代码：

```
tooltip: {
                formatter: function() {
                    return ''+
                        this.x +': '+ this.y +
                        (this.series.name == 'Recovered' ? '%' : '');
                    }
          } 
```

上面在最后一行中说，如果这个系列名称是“Recovered”，则添加“%”，否则不添加任何内容。

但是我希望我的两个系列有 % 而不仅仅是一个，所以我想添加一个 OR 运算符，比如

```
 tooltip: {
        formatter: function() {
            return ''+
                this.x +': '+ this.y +
                (this.series.name == 'Recovered'||'Targeted' ? '%' : '');
        }
    } 
```

这样这两个系列都添加了 % 。但是上面的方法对我不起作用。有任何想法吗？非常感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T14:53:55.960

我已经发现了如何做到这一点 - 留下问题以防它帮助其他人。正确的语法是：

```
tooltip: {
  formatter: function() {
    return ''+
           this.x +': '+ this.y +
           (this.series.name == 'Recovered(%)'||this.series.name =='Defaulted(%)' ? '%' : '');
  }
}
```

# java - 从 Web 浏览器检测客户端 jre

> ID：14564520
> 
> 赞同：0
> 
> 时间：2013-01-28T14:45:47.967
> 
> 标签：java, web-applications, deployment, applet

我想从我的 Web 应用程序组织打印文件操作。我认为最好的方法 - 从小程序打印。但在运行小程序之前，我必须将 jre 安装到客户端计算机。

有什么方法可以从 Web 应用程序中检测 - 客户端机器是否安装了 jre？

如果 jre 不可用，此功能需要显示一些消息。

我认为我的问题的答案是“否”，但希望听到我在这里写的不同答案......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T14:54:42.910

[按照小程序标签 Wiki](https://stackoverflow.com/tags/applet/info)`deployJava.js`中提到和链接的方式使用。

# java - 基于 rfc 2231 从 Mime 标头中使用 charset iso-2022-jp 解码文件名的问题

> ID：14564525
> 
> 赞同：1
> 
> 时间：2013-01-28T14:46:07.530
> 
> 标签：java, jakarta-mail, mime

在 javamail 中，我将 mail.mime.decodeparameter 设置为 true。我有如下附件的 Mimeheader。

```
Content-Type: image/png;
 name*0*=ISO-2022-JP''%1B%24B%24%22%24%24%24%26%24%28%24*%24%22%24%24%24%26;
 name*1*=%24%28%24*%24%22%24%24%24%26%24%28%24*%24%22%24%24%24%26%24%28;
 name*2*=%24*%1B%28B.png
Content-Transfer-Encoding: base64
Content-Disposition: inline;
 filename*0*=ISO-2022-JP''%1B%24B%24%22%24%24%24%26%24%28%24*%24%22%24%24;
 filename*1*=%24%26%24%28%24*%24%22%24%24%24%26%24%28%24*%24%22%24%24%24;
 filename*2*=%26%24%28%24*%1B%28B.png 
```

使用 part.getFileName() 获取文件名时，文件名未正确呈现。文件名已呈现如下。

```
あいうえおあいう$&$($*$"$$$&$($*$"$$$&$($*.png 
```

但实际的文件名是 あいうえおあいうえおあいうえおあいうえお.png 。

当我调试 javamail 的源时，在 decodeBytes() 方法中的 ParameterList.java 中，当编码字符串被拆分时，为值 pf 延续参数返回损坏的字符串。我认为当双字节字符集（例如 iso-2022-jp）被拆分时，它会在 javamail 中返回损坏的字符串。我是否正确？或者请建议我解决此问题的解决方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T22:34:44.623

[虽然在RFC 2231 规范](https://www.rfc-editor.org/rfc/rfc2231)中并不清楚，因为参数的每个部分都可以控制该部分是否被编码，这意味着每个部分的编码独立于其他部分的编码，因此这些部分可以是独立解码。在与规范的作者核实后，我确定这不一定是真的。因此，这看起来像是 JavaMail 中的一个错误。修复看起来并不简单。

# php - 构建此数据库的最有效方法是什么？

> ID：14564527
> 
> 赞同：0
> 
> 时间：2013-01-28T14:46:18.287
> 
> 标签：php, mysql, database, forms

我正在设计一个表单处理 Web 服务，类似于用户注册的[wufoo](http://wufoo.com)和[formstack.com](http://formstack.com)，创建一个表单操作，他们将复制并粘贴到他们的表单中，我的服务会将这些数据存储在数据库中并重定向回来到他们的感谢页面。

我将使用`PHP`and来构建它`MySQL`。到目前为止，我已经弄清楚了基本的功能，但是我在抽象层面上变得松懈的地方是如何最好地存储用户数据。

我的第一个想法是为每个创建的新表格创建一个新表格，这看起来有点傻而且过头了。

现在我在想，我创建了一个通用`data`表，其中包含 50 个字段，命名为：`field1, field2, field3, field4`等，它将存储每个人的数据，然后将该表链接到另一个名为`fieldnames`的表，用户可以在其中自定义他们的“仪表板”，使其看起来像他们已经命名了这些字段。

我真的不太确定如何最好地处理这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T14:50:57.507

使用两张表格作为表格和字段，另外一张作为答案：

```
form(id, title, user ...)
field(id, form_id, order, title, type ...)
answer(field_id, value, ...) 
```

这样您就不会将用户限制在一定数量的字段中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T15:07:13.347

有几种解决方案 - 这主要取决于您在输入数据后要对它做什么。

hsan 的答案通常被称为“实体属性值”或 EAV。它很灵活，可以存储许多不同类型的数据（当您需要超过 50 个答案时不会用完）。如果您正在存储数据以重新构建另一个网页（例如，显示表单的所有者），它工作得很好；如果你想创建一些“人类可读”的东西，例如报告，那就有点棘手了。如果你想对数据提出问题，这可能会很棘手——想象一下找到“你赚多少钱”这个问题的所有答案，答案是“25000-35000”，用户还说他们最喜欢的颜色是“红色” .

您还可以将数据存储在 XML 或 JSON 文档中。这使得数据更难在 SQL 中推理，但使得将数据转换为报告或 PDF 变得非常简单。

# android - Android：如何设置多个按钮、编辑文本等

> ID：14564530
> 
> 赞同：-4
> 
> 时间：2013-01-28T14:46:32.850
> 
> 标签：android, android-layout, android-widget

如何水平设置两个或多个按钮，就像这样，所有这些都是按照垂直形式排列的。请告诉xml中的编码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T14:49:07.040

您需要将它们放在线性布局中并将方向设置为水平

```
 <LinearLayout 
       android:id="@+id/login_selectionButtonGroup"
       android:layout_width="fill_parent"
       android:layout_height="wrap_content"
       android:orientation="horizontal">
                <Button
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:layout_gravity="center_horizontal"
                    android:text="Button 1"
                    android:layout_weight="1">
                </Button>
                <Button
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:layout_gravity="center_horizontal"
                    android:text="Button 2"
                    android:layout_weight="1">
                </Button>
        </LinearLayout> 
```

希望这可以帮助

# xaml - WPF 通过构造函数设置 DataContext

> ID：14564534
> 
> 赞同：3
> 
> 时间：2013-01-28T14:46:52.410
> 
> 标签：xaml, mvvm, binding

据我了解，当我将 ViewModel 绑定到 View 时，它是通过 DataContext 完成的。就像是

```
 <Grid.Resources>
        <myData:MyVM x:Key="Vm" />
    </Grid.Resources>
    <Grid.DataContext>
        <Binding Source="{StaticResource Vm}"></Binding>
    </Grid.DataContext> 
```

我对 ViewModel 是如何填充的理解是 View 调用 ViewModel（通过绑定），ViewModel 与 Model 对话并执行它需要做的任何事情来让自己（ViewModel）进入所需的状态。

那么，如果你的“模型”是由 UI 创建的，会发生什么？我的模型是我的 MainWindow 构造函数的一个参数。

所以，我的视图（主窗口）是

```
public MainWindow(MyObject myObject)
    {
          InitializeComponent();
    } 
```

我的视图模型是

```
 public class ViewModel 
{
    #region properties

    private MyObject myList;
    public MyObject MyList
    {
        get; set ;
    }

    #region Constructors

    public ViewModel ()
    {

    }

    public ViewModel (MyObject myObject)
    {
        this.myObject= myObject;
    }        
} 
```

现在，当我的应用程序运行时（并且我确定我在这里使用了错误的词）我如何将我的参数“注入”到 ViewModel 中？还是我们觉得有更好的方法？

**编辑**

解释我想要实现的目标可能会有所帮助。我的程序执行一些任务并创建一个日志。日志存储在内存中。在我的程序进程结束时，日志显示在屏幕上。这就是我将对象传递给构造函数的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T15:31:25.060

> 还是我们觉得有更好的方法？

我宁愿看到您将您的视图绑定到您的视图模型。如果您要遵循 MVVM 模式，那么这是一种方法。现在，我无法确定您是否使用依赖注入，但您在问题中提到了“注入”，所以我假设您是。这是一个代码示例：

将您的视图的数据上下文设置为您的视图模型：

```
 public YourView(IUnityContainer container)
        {
            InitializeComponent();
            this.DataContext = container.Resolve<IYourViewModel>();
        } 
```

将您的模型注入到您的视图模型中：

```
 private YourModel _yourModel;

 public YourViewModel(YourModel yourModel)        
        {
            _yourModel = yourModel;
            InitializeDelegateCommands();
        } 
```

So, now your view-model is bound to your view. All model interaction should be coordinated throught the view-model.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T14:48:52.293

不要忘记添加`InitializeComponent()`您的`MainWindow`构造函数。

```
public MainWindow(MyObject myObject)
{
    InitializeComponent();
} 
```

# python - 使用 python 和 firefox 的 selenium webdriver sendkeys()

> ID：14564539
> 
> 赞同：12
> 
> 时间：2013-01-28T14:47:04.993
> 
> 标签：python, firefox, selenium, selenium-webdriver

我正在使用`selenium 2.25.0`,`firefox 3`和`python 2.6.6`. 我正在尝试运行一个硒函数，它使用`sendkeys()`：

```
 Webdriver.find_element_by_name( 'j_username' ).clear()
 webdriver.find_element_by_name( 'j_username' ).send_keys( "username" ) 
```

这段代码可以在我的机器上运行。然而，从另一台机器上运行，用户名字段被留空并继续脚本的其余部分（不报告任何错误）。

我可以看到该字段在尝试发送用户名之前被清除，所以我知道找到按钮/按钮的名称没有问题。我尝试在清除字段和发送用户名之间暂停，但这似乎也不起作用。

我需要保持我的 firefox 和 selenium 版本相同，还有什么可以解决这个问题的吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-28T15:00:31.987

你的代码看起来很奇怪。通常，您定位一个元素，然后对它执行操作......而不是每次都定位它。

尝试这样的事情：

```
from selenium import webdriver

driver = webdriver.Firefox()
elem = driver.find_element_by_name('j_username')
elem.clear()
elem.send_keys('username') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-17T21:30:16.963

我的问题是相同的，我通过从 selenium==2.42.1 到 selenium==2.25.0 解决了它

更改我的 selenium 版本后，测试能够 send_keys() 并使用 send_keys(Key.ENTER) 提交表单

我目前正在使用 Iceweasel 3.5.16 在远程 Debian Squeeze 6.0.8 服务器上运行无窗口

```
Mozilla Iceweasel 3.5.16, Copyright (c) 1998 - 2010 mozilla.org

Distributor ID: Debian
Description:    Debian GNU/Linux 6.0.8 (squeeze)
Release:        6.0.8
Codename:       squeeze 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-29T07:23:34.380

使用以下作为解决方法，我认为它可能有效。

```
driver = webdriver.Firefox()
elem = driver.find_element_by_name('j_username')
elem.clear()
app = Application.Application()
app.window_(title_re='*.Firefox.*').TypeKeys('username') 
```

最后两行在 Python(pyWinauto) 中

# javascript - Google Chrome：如何确定哪个窗口生成了 WebRequest？

> ID：14564540
> 
> 赞同：0
> 
> 时间：2013-01-28T14:47:11.510
> 
> 标签：javascript, google-chrome, google-chrome-extension

我写了 chome 扩展，处理浏览器中的所有请求：

清单.json：

```
{
  "name": "MyExtension",
  "version": "0.1",
  "description": "All requests are under control!",
   "permissions": [
        "tabs",
        "webRequest",
        "http://*/*"
  ],
  "background": {
    "scripts": ["background.js"]
  },

  "manifest_version": 2
} 
```

背景.js：

```
chrome.webRequest.onCompleted.addListener(
  function(details) {
  console.log(details);
  console.log(chrome.tabs.getCurrent());

  },
   {urls: ["http://*/*"],
   types: ["image"]}); 
```

但是现在，我想知道，哪个页面（标签？）创建了这个请求？

例如：

```
Request 1 - generated by google.com page,
Request 2 - generated by stackoverflow.com. 
```

我该如何解决这个任务？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T16:12:12.677

以下代码将获取生成 Web 请求的选项卡\页面详细信息。

`onCompleted Listener`具有标识选项卡的**tabId**属性，您可以检索选项卡的所有详细信息。

```
chrome.webRequest.onCompleted.addListener(

function (details) {
    chrome.tabs.get(details.tabId, function (tab) {
        console.log("This  " + JSON.stringify(details) + " Web request is from this " + tab.id + " tab and its details are" + JSON.stringify(tab));
    });
}, {
    urls: ["http://*/*"],
    types: ["image"]
}); 
```

# 样本输出

```
This  {"frameId":0,"fromCache":true,"ip":"74.125.236.63","method":"GET","parentFrameId":-1,"requestId":"563","statusCode":200,"statusLine":"HTTP/1.1 200 OK","tabId":64,"timeStamp":1359389270317.956,"type":"image","url":"http://www.google.co.in/images/srpr/logo3w.png"} Web request is from this 64 tab and its details are{"active":true,"highlighted":true,"id":64,"incognito":false,"index":4,"pinned":false,"selected":true,"status":"loading","title":"Google","url":"http://www.google.co.in/","windowId":1} 
```

# javascript - 为 github 上的核心 grunt 任务做贡献

> ID：14564541
> 
> 赞同：3
> 
> 时间：2013-01-28T14:47:14.517
> 
> 标签：javascript, git, node.js, github, gruntjs

我想在 github 上为我对 grunt qunit 任务所做的更改创建一个拉取请求，但在获取我可以使用的 repo 的本地副本时遇到了麻烦。

1.  master 分支不包含该`tasks`目录，因此我克隆了 v0.3-stable 分支，但我想它是 master 而不是我想要尝试推送的稳定版本 - 我如何实现这一点。
2.  在我的 0.3-stable 分支的克隆中运行时`grunt test`，许多节点模块是未定义的，所以我必须在本地安装它们......即使它们都在我的 /usr/lib/ ... /node_modules 目录中可用。我怎么能咕噜咕噜地使用这些全局副本？（当用作 grunt 构建的一部分时，qunit 通常运行良好，例如包含 jquery 插件的本地目录）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-04T19:32:22.870

1.  您可以从非主分支提交拉取请求。您可以简单地`v0.3-stable`在 fork 中使用分支，并确保使用该分支而不是`master`在您的拉取请求中。

2.  您可能需要在当前目录中安装节点模块，即使您已经全局安装了它们（它们可能是不同的版本）。尝试`npm install`先在存储库的根目录中运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-08T16:43:26.327

暂时也很难知道在哪里推送，因为在运行到 v4 时，大多数核心 grunt 任务都被提取到他们自己的`grunt-contrib-taskname`repos 中。但是，现在推送到这些回购很简单

# magento - Magento 自定义选项 - 将 CSS 类名添加到自定义选项字段

> ID：14564542
> 
> 赞同：8
> 
> 时间：2013-01-28T14:47:24.400
> 
> 标签：magento

我想指定一个 CSS 类以应用于我的自定义选项字段。这将允许我在产品视图页面上使用更强大的 JavaScript 选择器。

所以在管理员的产品>自定义选项中，我想要这样的东西： ![在自定义选项中添加 CSS 类](../Images/dda387de04ce3a7b8b95fa43b1fb8cd3.png)

我在该字段中添加了 CSS Class 属性。

这可以在 adminhtml 模板文件中简单地添加：

```
app\design\adminhtml\default\default\template\catalog\product\edit\options\option.phtml 
```

但是我不知道我需要覆盖/扩展哪些文件，以便在单击“保存”时保存该额外属性。谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-28T15:50:11.913

假设您为选项类型“文本”执行此操作。您需要提供一种输入、编辑、存储和输出此新属性的方法。

**进入**：正如您已经发现的，您必须编辑后端模板文件。app\design\adminhtml\default\default\template\catalog\product\edit\options\type\text.phtml：

[在第 36 行之后输入](https://github.com/varinen/solvingmagento_1.7.0/blob/master/app/design/adminhtml/default/default/template/catalog/product/edit/options/type/text.phtml#L36)

```
'<th class="type-last last"><?php echo Mage::helper('catalog')->__('Custom CSS') ?> </th>'+ 
```

[在第 47 行](https://github.com/varinen/solvingmagento_1.7.0/blob/master/app/design/adminhtml/default/default/template/catalog/product/edit/options/type/text.phtml#L47)之后：

```
'<td class="type-last last"><input type="text" class="input-text" name="product[options][{{option_id}}][custom_css]" value="{{custom_css}}"></td>'+ 
```

这将添加一个字段以输入自定义 CSS 类。

**编辑**：您需要重写一个输出选项 HTML 的块，以便新字段可以从模型中获取值。在您的模块中创建一个块，声明如下：

```
class YourPackage_YourModule_Block_Adminhtml_Option extends Mage_Adminhtml_Block_Catalog_Product_Edit_Tab_Options_Option 
{ 
```

`getOptionValues()`从类中复制/粘贴函数`Mage_Adminhtml_Block_Catalog_Product_Edit_Tab_Options_Option`并添加代码

```
##.......code omitted for brevity.......##
$value['sku'] = $this->htmlEscape($option->getSku());
$value['max_characters'] = $option->getMaxCharacters();

// your new field output to the adminhtml form
$value['custom_css'] = $option->getCustomCss();

$value['file_extension'] = $option->getFileExtension();
##.......code omitted  for brevity.......## 
```

**存储**。这有点棘手。您需要扩展表catalog_product_option；用一列存储您的新属性。创建一个包含以下内容的安装/更新脚本：

```
$installer = $this;
$installer->startSetup();
$installer->run("
    ALTER TABLE `catalog_product_option` ADD
    `custom_css` text");
$installer->endSetup(); 
```

脚本运行后，确保表有一个新列`custom_css`

**输出**：最后，通过添加代码来更新模板文件`frontend/yourpackage/yourtheme/template/catalog/product/view/options/type/text.phtml`以输出新的自定义 CSS 类属性，例如

```
$_option->getCustomCss(); 
```

# sql-server-2008 - 将范围分组到范围

> ID：14564544
> 
> 赞同：3
> 
> 时间：2013-01-28T14:47:29.353
> 
> 标签：sql-server-2008, stored-procedures, group-by

我有一张桌子：

```
tblUnit (ID, Name, PriceFrom, PriceTo)

1, Audi, 170, 340
2, BMW,  250, 290
3, Ford, 275, 500
4, Kia,  110, 250
5, VW,   135, 460 
```

然后我预定义了这样的价格范围：

```
tblPriceRange(ID, PriceFrom, PriceTo)

1,   0,  100
2, 100,  200
3, 200,  300
4, 300,  400
5, 400, 1000 
```

我正在尝试计算一个或多个价格范围内存在的车辆数量。宝马只有 1 个范围，而奥迪有 3 个范围，福特有 3 个。

我追求的结果应该是这样的：

```
VehiclesPerRange:
(RangeFrom, RangeTo, NoVehicles)
  0, 100,  0
100, 200,  3
200, 300,  5
300, 400,  3
400, 1000, 2 
```

我已经阅读了这个论坛和其他地方的很多关于按范围分组的帖子。但是这些示例都集中在一个应该分组到一个范围内的单一价格上。我知道如何通过连接等来做到这一点，但我不知道如何编写 SQL 来将一个范围分组到一个范围内。

任何建议都非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T14:56:58.047

您想加入范围重叠的匹配行`tblUnit`。`tblPriceRange`如果第二个范围的开始在第一个结束之前并且第一个的开始在第二个结束之前，则两个范围重叠，因此您的连接条件如下所示：

```
SELECT *
FROM dbo.tblUnit u
JOIN dbo.tblPriceRange p
ON u.PriceFrom < p.PriceTo
AND p.PriceFrom < u.PriceTo 
```

之后，您只需要分组和计数：

```
SELECT PriceFrom, PriceTo, COUNT(1)
FROM(
    SELECT p.PriceFrom, p.PriceTo
    FROM dbo.tblUnit u
    JOIN dbo.tblPriceRange p
    ON u.PriceFrom < p.PriceTo
    AND p.PriceFrom < u.PriceTo
)X
GROUP BY PriceFrom, PriceTo; 
```

# php - 在里面插入带有php代码的html字符串

> ID：14564546
> 
> 赞同：1
> 
> 时间：2013-01-28T14:47:47.520
> 
> 标签：php, jquery, html

好吧，我需要在表单中插入一个带有 php 代码的 HTML 字符串。

我有一种形式来创建新用户。在其中，我需要为这个用户插入一个角色，所以我的数据库中有一些角色可以应用于他。

我有一个 html 选择字段来执行此操作，以及一个添加新角色的按钮。当我单击按钮时，我想在我的表单中添加一个新的选择字段。但在这段代码中，我有 PHP 代码来显示所有角色。我使用 jQuery 尝试这种方式：

```
$(document).ready(function () {
    $('#add-role').click(function (event) {
        var newRoleField = "<label for=\"usuario_perm_id\">ROLE <span class=\"required-field\"> * </span>:</label>" +
            "<select id=\"usuario_perm_id\" name=\"usuario_perm_id\" tabindex=\"7\">" +
            "<option <?php echo ($this->usuario[\"rol_id\"] == \"none\" ? 'selected=\"selected\"' : null); ?> value=\"none\">-- Seleccione un rol --</option>" +
            "<?php foreach ($this->roles as $rol): ?>" +
            "<option value=\"<?php echo $rol[\"rol_id\"]; ?>\" <?php echo ($this->usuario[\"rol_id\"] == $rol[\"rol_id\"] ? 'selected=\"selected\"' : null); ?>><?php echo $rol[\"nombre\"]; ?></option>" +
            "<?php endforeach; ?>" +
            "</select><br />";

        $('#new-roles').append(newRoleField);

        event.stopPropagation();
        event.preventDefault;
    });
}); 
```

我得到一个新的选择字段，但在其中，文本：

`usuario["rol_id"] == "none" ? 'selected="selected"' : null); ?> value="none">-- Select role --`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T14:51:32.957

你不能。JavaScript（以及 jQuery）运行**客户端**，PHP 运行**服务器端**。浏览器不知道如何处理您可能插入的任何 PHP。

处理此问题的一种方法是让 jQuery 向服务器查询角色并让您的服务器创建一个（PHP 生成的）角色列表。查看[AJAX](http://en.wikipedia.org/wiki/Ajax_%28programming%29)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T14:51:01.513

您不能在客户端 (Javascript) 上插入服务器端代码 (PHP)。

您可以在页面首次加载时将 PHP 中的数据加载到 JS 变量中，然后从那里加载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T14:52:10.273

我不知道它是如何与 JQuery 一起工作的（我将它与纯 JavaScript 一起使用），但寻找 AJAX。

# ruby - 在说 smtp.start 时获取“`initialize': getaddrinfo: nodename nor servname provided, or not known (SocketError)”

> ID：14564548
> 
> 赞同：2
> 
> 时间：2013-01-28T14:47:58.040
> 
> 标签：ruby, email, smtp, gmail

我正在尝试使用我的 gmail 在一个非常简单的 ruby​​ 脚本中发送电子邮件。这是应该向我发送电子邮件的`RECEIVER`部分`SENDER`。因为`PASSWD`我使用我的 gmail 密码。

```
smtp = Net::SMTP.new 'smtp.gmail.com', 587
smtp.enable_starttls
smtp.start('gmail.com', SENDER, PASSWD, :login)
smtp.send_message message, SENDER, RECEIVER
smtp.finish 
```

现在，我总是得到这个错误：

```
/Users/David/.rvm/rubies/ruby-1.9.3-p374/lib/ruby/1.9.1/net/smtp.rb:540:in `initialize': getaddrinfo: nodename nor servname provided, or not known (SocketError)
from /Users/David/.rvm/rubies/ruby-1.9.3-p374/lib/ruby/1.9.1/net/smtp.rb:540:in `open'
from /Users/David/.rvm/rubies/ruby-1.9.3-p374/lib/ruby/1.9.1/net/smtp.rb:540:in `tcp_socket'
from /Users/David/.rvm/rubies/ruby-1.9.3-p374/lib/ruby/1.9.1/net/smtp.rb:549:in `block in do_start'
from /Users/David/.rvm/rubies/ruby-1.9.3-p374/lib/ruby/1.9.1/timeout.rb:68:in `timeout'
from /Users/David/.rvm/rubies/ruby-1.9.3-p374/lib/ruby/1.9.1/timeout.rb:99:in `timeout'
from /Users/David/.rvm/rubies/ruby-1.9.3-p374/lib/ruby/1.9.1/net/smtp.rb:549:in `do_start'
from /Users/David/.rvm/rubies/ruby-1.9.3-p374/lib/ruby/1.9.1/net/smtp.rb:525:in `start' 
```

奇怪的是它在一两天前就起作用了，而我没有更改脚本。

不过，我确实在过去两天内更新了 Ruby 和 Rails，但我不确定我是在更新之前还是之后测试了脚本。这可能有关系吗？

有谁知道这里发生了什么以及可能的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T22:39:27.863

我将在这里回答我的问题，因为我发现了导致此错误的原因，因此它不会出现未回答的情况。

所以，就在发布这个问题之后，我意识到我不小心在 Hands Off 中阻止了对 smtp.google.com 的访问！我的错。所以，这个问题现在已经解决了，一切正常。

# c# - 可比的 .CompareTo 在 Sort 中与 null 进行比较

> ID：14564554
> 
> 赞同：2
> 
> 时间：2013-01-28T14:48:20.763
> 
> 标签：c#, sorting, compareto, icomparable

我想借助`IComparable<T>.CompareTo`名为. 我写`T``Path`

```
var shortest = new List<Path>();
//Fill shortest with elements != null
if (shortest.Contains(null))
      throw new System.Exception("Path is null");
shortest.Sort();
if (shortest.Contains(null))
      throw new System.Exception("Path is null"); 
```

令我惊讶的是，该方法

```
 int IComparable<Path>.CompareTo(Path other)
    {
        if (other == null)
            return -1;

        if (!other.valid)
            return 1;

        if (pfad.Count() > other.pfad.Count())
        {
            return -1;
        }
        else if (pfad.Count() < other.pfad.Count())
        {
            return 1;
        }
        else
        {
            if (length > other.length)
                return -1;
            else
                return 1;

        }

    } 
```

从课堂上

```
 public class Path : IComparable<Path> 
```

从`Sort()`with调用`other==null`。我更惊讶的是，在第一个代码块中，抛出了*第二个异常*，这意味着`shortest`在排序之后而不是之前包含一个空值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T14:56:32.030

虽然我无法解释为什么 Sort 需要与 null 进行比较，但 IComparable.CompareTo 的[文档](http://msdn.microsoft.com/en-us/library/system.icomparable.compareto.aspx)明确指出：

> 根据定义，任何对象比较大于（或跟随）null，并且两个 null 引用比较彼此相等。

因此，无论原因是什么，CompareTo 的实现都必须遵循此规则和其他规则，以确保与 Sort() 等兼容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T15:24:46.017

你的`CompareTo`功能坏了。当一个对象与其自身进行比较时它不会返回，并且当两个对象被比较时`0`它总是返回。所以可能有两个对象和与和这可能会导致行为奇怪。`1``valid == false``a``b``a.CompareTo(b) == 1``b.CompareTo(a) == 1``Sort()`

此外，正如在另一个答案中已经指出的那样，它应该返回`1`if `other == null`。（当列表不包含时应该不重要`null`）

# javascript - XDR ajax 获取 IECors 的请求

> ID：14564555
> 
> 赞同：0
> 
> 时间：2013-01-28T14:48:23.253
> 
> 标签：javascript, jquery, ajax, xdomainrequest

我正在使用类似于下面的代码（一个非常简化的版本）执行跨域获取请求。

```
var addData = function() {
    $.ajax({
      type:'GET',
      url:'http://DifferentDomain.com/data.php',
      data:'body',
      success: function(data){
        $('body').html(data);
      }
    });
} 
```

现在，由于 IE 不支持 CORS，我需要使用`XDomainRequest`iecors 插件，该[插件](https://github.com/dkastner/jquery.iecors)效果很好，因为当 IE 出现故障时，`XHttpRequest`它会切换到`XDR`.

但是，我遇到的问题是，`$('body').html(data);`这似乎仅在我在控制台中实时执行时才在 IE 中起作用，而不是在第一次调用它时才起作用`$(document).ready`？**（这适用于所有其他浏览器，因为它们支持 XHR）**

我认为这是时间问题，所以我不确定如何解决这个问题，我是否使用 a`setTimeout()`并为 IE 浏览器运行两次？请问有人可以提供一些建议吗？提前谢谢了。

**编辑**

我通过使用 setTimeout 执行它找到了一种解决方法，但仍然觉得这不是最好的解决方案，例如

```
 setTimeout(function(){
   addData();
 },0); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T23:08:56.520

我通过使用 setTimeout 执行它找到了一种解决方法，但仍然觉得这不是最好的解决方案，例如

```
 setTimeout(function(){
   addData();
 },0); 
```

# cakephp - Cakephp 返回主机 IP 而不是客户端

> ID：14564556
> 
> 赞同：1
> 
> 时间：2013-01-28T14:48:24.200
> 
> 标签：cakephp

我已经将我的项目上传到我的服务器，并且在调试时，我意识到系统正在返回主机的 IP 而不是客户端的 IP。`$this->request->clientIp`如果使用 CakePHP ( ) 或使用原生 PHP 代码完成，则没有区别。我从项目中提取了代码片段，并在一个 PHP 文件中对其进行了测试，它工作正常。

有人知道如何让 CkaePHP 返回客户端 IP 吗？我在用着`CakePHP 2.1`

滚动的是： - Cakephp 返回主机 IP，我可以使用`$this->request->clienteIp();`或计划 php 与`$_SERVER['REMOTE_ADDR']`. - 他们都返回托管我的项目的服务器的IP。- 我用该方法测试了其他项目（没有 cakephp 框架）`$_SERVER['REMOTE_ADDR']`并且工作正常。- 我需要客户端，用户的IP（使用Cakephp的框架）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T15:49:08.900

*资料来源：[https](https://stackoverflow.com/a/5675320/1110760) ://stackoverflow.com/a/5675320/1110760 作为对[这个问题](https://stackoverflow.com/q/5675265/1110760)的回答- 如果您对此表示赞同，请考虑同时支持原始[答案](https://stackoverflow.com/a/5675320/1110760)*

**CakePHP 1.x**：

[`RequestHandlerComponent::getClientIp();`](http://api.cakephp.org/class/request-handler-component#method-RequestHandlerComponentgetClientIP)

所以澄清一下：

```
public $components = array(
    'RequestHandler'
); 
```

然后在控制器方法中：

```
$this->RequestHandler->getClientIp(); 
```

**CakePHP 2.x**：

`RequestHandler::getClientIp()`已弃用；您可以从[`CakeRequest`对象](http://book.cakephp.org/2.0/en/controllers/request-response.html#cakerequest)获取客户端 IP ：

```
$this->request->clientIp(); 
```

* * *

那么，您确定您使用的是方法 ( `$this->request->clientIp()`) 而不是变量 ( `$this->request->clientIp`) 吗？就像你在问题中提到的那样？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T17:13:33.033

在 cakephp 2.xx 中试试这个

```
$this->request->clientIp(); 
```

您可以使用本机 PHP 服务器变量

```
$_SERVER['REMOTE_ADDR'] 
```

这是我在 CakePhP 上的应用程序的工作示例

```
function getIp(){
    if (!empty($_SERVER['HTTP_CLIENT_IP'])){    //check ip from share internet
                $ip = $_SERVER['HTTP_CLIENT_IP'];
            } elseif (!empty($_SERVER['HTTP_X_FORWARDED_FOR'])){   //to check ip is pass from proxy
                $ip = $_SERVER['HTTP_X_FORWARDED_FOR'];
            } else {
                $ip = $_SERVER['REMOTE_ADDR'];
            }
return $ip;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T00:39:59.493

我已经自己解决了。调试返回`$_SERVER['HTTP_X_REAL_IP']`用户 ip。当我意识到我找到了这个网站时：http: [//www.maheshchari.com/real-ip-address/](http://www.maheshchari.com/real-ip-address/)

# java - 尝试实现我自己的 ThreadPool 时的问题（概念问题）

> ID：14564557
> 
> 赞同：0
> 
> 时间：2013-01-28T14:48:26.657
> 
> 标签：java, design-patterns, concurrency, synchronization, threadpool

我想和你分享我的想法。
考虑你必须自己实现一个线程池。

我认为它有一些像`private static List<Thread>`Threads 这样的成员字段作为我的“池”。

我也有两种方法
：从池中分配线程。
湾。它将一个线程返回到池中。

**我的问题是**：
1\. 你将如何保护它们`List`不被某些线程同时访问：
我想用 声明这两种方法`synchronize`，然后购买意识到这不好，因为我将无法执行以下操作：
将一个线程返回到池中，同时从池中取出一个。
我也想过使用像 Vector 这样的线程安全集合，但似乎也有同样的问题。

2.你认为线程池类应该是一个`Singleton`吗？您认为代码的哪一部分应该负责分配它的单个实例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T14:57:34.113

1.  我认为这是一个快速的操作：get、set、delete、add。所以，如果你希望它是线程保存的，你需要锁定机制
2.  我想，这取决于你想要什么。在[.NET](http://msdn.microsoft.com/query/dev10.query?appId=Dev10IDEF1&l=EN-US&k=k%28SYSTEM.THREADING.THREADPOOL%29;k%28THREADPOOL%29;k%28TargetFrameworkMoniker-%22.NETFRAMEWORK,VERSION=V4.0%22%29;k%28DevLang-CSHARP%29&rd=true)中是单例的
3.  我认为这不是 100% 适合提出问题的部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T18:09:13.387

这个问题的关键取决于

您是否打算实际重用一个线程来运行多个任务，从而维护一个线程池而不终止它们 [A] 或

您是否打算将池仅作为限制来控制可以在任何给定点运行的同时任务的数量，并且在每次执行后线程将被终止，并且必须创建另一个线程来代替它。[乙]

如果未完成的作业请求的总数低于系统限制，则可以通过返回一个新的 Thread 对象来轻松实现 [B]。显然，线程对象在退出之前应该知道如何减少公共资源使用计数器。在这种情况下，您不必维护线程集合，而只需维护所有线程对公共引用计数对象（例如信号量）的引用。

[A] 但是，需要一个从 Thread 继承的类，该类在执行给定任务后不会退出，而是等待下一个任务执行。一旦此类可用，您可以简单地将适当的线程对象引用返回给调用者，并使用一个标记，该标记将以线程安全的方式将线程标记为已使用或未使用。

这是实现这一目标的一种简单方法

```
ArrayList<MyThread>      pool = new ArrayList<MyThread>      (DEFAULT_POOL SIZE);
ArrayList<AtomicBoolean> used = new ArrayList<AtomicBoolean> (DEFAULT_POOL SIZE); 
```

如果您将 pool[i] 返回给调用者，请将其标记为正在使用，通过执行

```
used[i].set(true). 
```

当线程返回池时，将同一对象标记为未使用 (set(false)。显然，您可以从同步的分配/释放方法中执行此操作。由于它们是同步的，用于存储池线程的集合不需要同步，您可以使用任何结构/集合，具体取决于您使用的算法来确定接下来要发出哪个线程。

作为一种优化，您可以在第一次请求池化线程时即时创建池（和各个线程） - 这样您无需在它可用之前对其进行初始化。但是您需要以线程安全的方式进行操作，我不会详细说明。

至于问题 2，除非您想创建多个池，否则将池类设为单例是个好主意，如果不选中它会很危险。如果您使用的是非静态池对象，它还将使您无需跟踪实例化了多少此类池。

如前所述，您可以通过重新使用现有的线程池类来省去麻烦，这些线程池类为您很好地处理了场景 A :)

# jdbc - eclipse中的JDBC CONNECTION错误

> ID：14564558
> 
> 赞同：0
> 
> 时间：2013-01-28T14:48:27.810
> 
> 标签：jdbc

如何解决以下问题...

```
java.lang.ClassNotFoundException: mysql-connector-java-3.1.14-bin at java.net.URLClassLoader$1.run(URLClassLoader.java:200) at
java.security.AccessController.doPrivileged(Native Method) at
java.net.URLClassLoader.findClass(URLClassLoader.java:188)  at
java.lang.ClassLoader.loadClass(ClassLoader.java:307) at
sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301) at
java.lang.ClassLoader.loadClass(ClassLoader.java:252) at
java.lang.ClassLoader.loadClassInternal(ClassLoader.java:320) at
java.lang.Class.forName0(Native Method) at
java.lang.Class.forName(Class.java:169) at
com.myeclipseide.ws.FirstExample.main(FirstExample.java:20) 
```

我的 JDBC 驱动程序文件是`mysql-connector-java-3.1.14-bin`

我的 CLASSPATH 变量设置为：`C:\Program Files\MySQL\mysql-connector-java-3.1.14`

我的 DB_URL 是：`jdbc:mysql://localhost/EMP`

我的包是`com.myeclipseide.ws`
并且我已经在路径中粘贴了访问jdbc驱动的类的类文件：`C:\Users\Mrinal\Workspaces\MyEclipse 10\restdemo\WebRoot\WEB-INF\lib....`
请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T16:14:59.603

您必须提供更多详细信息。我想，问题出在你的类路径中，因为在异常文本中你有：

```
java.lang.ClassNotFoundException: mysql-connector-java-3.1.14-bin 
```

而且绝对不存在名为 mysql-connector-java-3.1.14-bin 的此类。mysql 连接器的驱动程序类名称是*com.mysql.jdbc.Driver*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-11T10:12:56.210

我认为，问题在于您的`forName`方法论点。它应该是

```
Class.forName("com.mysql.jdbc.Driver"); 
```

因为

```
java.lang.Class.forName(Class.java:169) at 
```

您的异常跟踪中的这一行是这样说的！

# scala - 在 Akka 中暂停演员

> ID：14564568
> 
> 赞同：14
> 
> 时间：2013-01-28T14:48:52.773
> 
> 标签：scala, akka, actor, throttling

我在 Akka 中有一个演员，它将处理消息以创建某些实体。这些实体上的某些字段是根据创建时数据库中其他实体的状态计算的。

我想避免创建参与者处理速度快于数据库能够持久化实体的竞争条件。这可能会导致数据不一致，如下所示：

*   Actor 创建一个`Foo`并将其发送给其他 Actor 进行进一步处理和保存
*   要求演员创建另一个`Foo`. 由于第一个还没有保存，所以新的是根据数据库的旧内容创建的，从而创建了一个错误的`Foo`.

现在，这种可能性非常小，因为`Foo`s 的创建将被手动触发。但仍然可以想象，在高负载下双击可能会出现问题。谁知道明天`Foo`是否会自动创建。

因此，我需要某种方法来告诉演员等待，并且只有在确认`Foo`s 已保存后才能恢复其操作。

> 有没有办法让演员进入空闲状态，并告诉它在一段时间后恢复操作？

基本上，我想将邮箱用作消息队列，并控制队列的处理速度。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-28T17:05:53.933

不，您不能暂停演员：演员总是尽快从他们的邮箱中提取消息。这只留下传入请求被隐藏起来以供稍后处理的可能性：

```
class A(db: ActorRef) extends Actor with Stash {
  def receive = {
    case Request =>
      doWork()
      db ! Persist
      context.setReceiveTimeout(5.seconds)
      context.become({
        case Request        => stash()
        case Persisted      => context.unbecome(); unstashAll()
        case ReceiveTimeout => throw new TimeoutException("not persisted")
      }, discardOld = false)
  }
} 
```

请注意，无法保证消息传递（或数据库可能已关闭），因此建议使用超时。

## 根本问题

这个问题主要出现在参与者模型和域模型之间没有很好对齐的情况下：参与者是一致性单位，但在您的用例中，您的一致图像需要一个最新的外部实体（数据库），以便演员做正确的事。如果不了解用例的更多信息，我无法推荐解决方案，但请尝试在考虑到这一点的情况下重塑您的问题。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-28T16:25:12.230

事实证明，这只需要几行代码。这是我提出的解决方案，与 pagoda_5b 的建议一致：

```
class QueueingActor(nextActor: ActorRef) extends Actor with Stash {
  import QueueingActor._

  def receive = {
    case message =>
      context.become({
        case Resume =>
          unstashAll()
          context.unbecome()
        case _ => stash()
      })
      nextActor ! message
  }
}

object QueueingActor {
  case class Resume()
} 
```

# php - TCPDF：将条码往回撞一页？

> ID：14564574
> 
> 赞同：2
> 
> 时间：2013-01-28T14:49:01.270
> 
> 标签：php, html, pdf, pdf-generation, tcpdf

使用 TCPDF，我已经成功地创建了一个干净且实用的 3 列布局，以适合用于邮寄标签的 Avery 模板，但只有一个问题，下面我将解释我遇到的唯一问题。

每张纸上有 30 个这样的标签，现在我还能够添加 USPS 智能邮件条形码（这是 TCPDF 内置的功能，在示例 27 中进行了演示）。

**这是我的问题：每页上最后一条记录（第 30 条记录）的条形码坚持要在 NEXT 页上插入自身。**

![条码问题说明](../Images/91e9d80b4b49c73679d03688f5e0fc35.png)

我用黄色突出显示了这个条形码以指出它。条形码只是简单地用 X 和 Y 坐标排列，但似乎定位与最后一条记录无关（30）。Y 在记录 30 上设置的任何值都将保留在下一页上——我什至尝试输入一个负值以将其推回上一页，但只有当我这样做时它才会消失。

我怎样才能把这个条形码放在正确的位置？

* * *

这是我所拥有的：

除了条形码之外的所有内容都作为一个字段写在一起——（我找不到一种方法来呈现条形码并将它们与地址一起写，所以我只能做 X 和 Y 定位）。

**完整地址字段：**

*   （这是重写为一个的大约 8 个不同字段的组合）。
*   相对于页面
*   高度 1"

输出前的 PHP 代码：

```
<?php
$this->record++;
$initr=$this->record;
//set top margin
$topmargin=.75; //.75 bumping up the top margin moved the Full Address down and was how I gave the barcode room on the label

// change this number to the number of items per page
$r=($initr % 30);
if ($r==0) {

//also change this to items per page
$r=30;
}

    //column 1
    if (($r % 3) == 1) {
    $x=.25;
    $y=((floor($r/3)+1)*$h)-($h-$topmargin);
}

    //column 2
    if (($r % 3) == 2) {
    $x=3;
    $y=((floor($r/3)+1)*$h)-($h-$topmargin);
}

    //column 3
    if (($r % 3) == 0) {
    $x=5.75;
    $y=((floor($r/3)+1)*$h)-((2*$h)-$topmargin);
}
?> 
```

输出后的 PHP 代码：

```
<?php
//change this to number of items per page
if ($r == 30) {
$this->AddPage();
}
?> 
```

**条码字段：**

*   为了制作条形码，我在我的“邮政编码”字段中添加了它，因为在条形码计算中的连字符之后需要它。注意：我需要使用“str_replace”函数删除任何邮政编码的连字符。所以我对每条记录都这样做，以便用 X 和 Y 正确定位它们。
*   相对于页面
*   任何东西的高度（只是为了让它出现）
*   输出前的 PHP 代码：http: [//pastebin.com/AGyY2M1i](http://pastebin.com/AGyY2M1i)

我一直在研究这些条形码，但无法解决这个小问题。

## 更新

这就是这些字段的排列方式...

![TCPDF 字段顺序](../Images/f8e44509b959b2611892c170d19435a4.png)

但我只是切换了它们，现在问题看起来更容易解决。

似乎现在唯一有问题的记录是 LAST 记录。我在这里搜索了一下没有运气，但是有没有办法定位最后一条记录？

它遇到麻烦的原因是因为我在所有“elseif”语句之后的“else”语句。但是，如果我把那个“else”语句拿走，把它变成一个像其他语句一样的“elseif”语句 - 例如 elseif ($r == 30) - 每页上的第 30 个条码消失（最后一条记录的条码也是如此） .

我想我需要能够定位最后一条记录？

# terminology - 你会称什么为从日期和至今有效的事实表？

> ID：14564582
> 
> 赞同：0
> 
> 时间：2013-01-28T14:49:20.353
> 
> 标签：terminology, data-warehouse, business-intelligence, star-schema

在某些方面有点愚蠢的问题，因为这只是关于术语。

如果我有一个事实表，它记录随着事实所属的维度而随时间变化的事实，那么这样的事实表会被称为什么？实际上有一个特定的名称吗？

例如，事实表可能在帮助台系统中存储工单实例并具有状态维度。工单将在其生命周期过程中将状态从“打开”更改为“已解决”。我需要能够为每个状态更改存储事实记录以进行历史报告。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T15:02:20.280

如果您的状态更改数量有限（< 6），您可以将所有日期放在事实表的一行中。可以对仓库事实表进行非规范化。

在操作数据库中，我将这种类型的域表称为日期范围表。

这本书可能会有所帮助：[时间数据和关系模型](https://rads.stackoverflow.com/amzn/click/com/1558608559)。

你也可以谷歌“时态数据库”，看看有没有什么对你有帮助。

# mongodb - 如何使用 monger 和 Clojure 向 mongodb 添加文档？

> ID：14564589
> 
> 赞同：1
> 
> 时间：2013-01-28T14:49:39.987
> 
> 标签：mongodb, clojure, monger

我以前没用过MongoDb，也没用过Monger。我正在开发一个 Clojure 应用程序。我只是希望能够添加一个文档，作为 upsert。这是我的一些代码：

```
(defn convert-data-to-be-persisted [session-data]
  (convert/to-db-object session-data))

(defn persist-data-to-database [converted-document-to-persist]
  (mc/update "timeout_discovery" {:sessions converted-document-to-persist} {} :upsert true)) 
```

我正在使用贩子：

[http://clojuremongodb.info/](http://clojuremongodb.info/)

我拥有的 println 和 timbre/spy 语句正在将此数据打印到终端输出：

在持久数据到数据库中：{“serverUsed”：“/127.0.0.1:27017”，“updatedExisting”：false，“upserted”：{“$oid”：“510680444077296acfa67d6b”}，“n”：1， “connectionId”：4，“err”：null，“ok”：1.0}

如果我在命令行登录 MongoDb，似乎集合仍然是空的：

db.timeout_discovery.find() { "_id" : ObjectId("51017c5fa86c7bcc3d423c4d"), "timeout" : "discovery" }

有一个文档，但里面除了“超时”和“发现”之外什么都没有。

我看这里试图弄清楚该怎么做，但我尝试的每一个变化都失败了：

[http://clojuremongodb.info/articles/updating.html](http://clojuremongodb.info/articles/updating.html)

这一行：

```
(convert/to-db-object session-data)) 
```

返回此文档（但我在此处将其缩短，因为原始文档很长，其中包含您在此处看到的更多 HTML）：

在 get-data-to-be-persisted 中要持久化的文档是： { "e6e20a2c-cb46-498c-b2f2-743e2b38b917" : { "itinerary-as-string" : "\n \t\n \t\t

## http://www.super.com/mexico/bars/2012-food-drink-award-nominees-best\" class=\"fn given-name url\">2012 年餐饮奖提名：最佳新啤酒吧

\n \t\t \t\t \n \n 投票现已结束\n在此处查看结果在餐厅 + 酒吧中查看更多信息

\n \t\n \t\n http://www.super.com/mexico/bars/2012-food-drink-award-nominees-best-new-beer-bar\">http://media. super.com/images/100131935/150/113/image.jpg\" /> \n \n \n \t\n \t\t

## http://www.super.com/mexico/sex-dating/summer-dates-in-mexico-bars-and-restaurants\" class=\"fn given-name url\">夏季日期：食物和-在墨西哥酒吧和餐厅喝酒约会

\n \t\t \t\t

性与约会

\n \n \n 在这些夏季约会期间，在墨西哥热门景点享用晚餐或饮品。如果您要追求一个痴迷于食物的伴侣，请不要在本季的标准晚餐和电影之外。在纽约查看五个以食物和饮料为重点的夏季约会......

\n \t\n \t\n http://www.super.com/mexico/sex-dating/summer-dates\">http://media.super.com/images/100453911/150/113/图像.jpg\" /> \n \n \n \t\n \t\t

## http://www.super.com/mexico/restaurants/organic\" class=\"fn given-name url\">有机

\n \t\t \t\t

美食美酒、美式风味、亚洲风味

\n \n \n \n ***$***\n \n \n \n \n \n https://foursquare.com/intent/venue.html\" data-context=\"vcard-Content-Venue-50137\">保存到foursquare\n \n \n \n Tribeca fro-yo 狂热者可以在这家有机健康食品吧的第二个位置满足他们对健康的渴望。明亮的外卖店——配备木镶板和白色和绿色的柜台——还供应鲜榨果汁果汁和冰沙，...

编辑 \n \t \n \t\n \t\n http://www.super.com/mexico/restaurants/organic\">http://media.super.com/images/100461855/150/113 /image.jpg\" /> \n \n \n \n \t \n 275 Greenwich St, (Murray Sts 和 Warren Sts 之间), New York, 10007\n \t \n \t \t \n \t \t平均课程：9 美元。美国运通，光盘，MC，... \t \n \n http://www.super.com/mexico/restaurants/organic\">

那么，为什么不保存呢？

我没有在终端输出中看到任何错误，但如果有错误，我想要关于如何捕获并查看它的建议。

如果没有错误，我是否只是因为 MongoDb 或 monger 的语法错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T21:12:32.973

Monger的作者在这里。你在什么环境下运行这段代码？这可能是身份验证问题。Monger 默认使用“安全”写入关注点，因此写入永远不会静默失败（就 Monger 而言，您仍然必须处理异常）。根据您发布的服务器响应，写入成功（您可以在响应文档中看到“ok”：1.0）。

如果您对函数参数有任何疑问，请参阅 Monger 的文档。我强烈建议从 REPL 中的入门指南开始。

# c# - Math.Truncate 返回不正确的小数截断

> ID：14564591
> 
> 赞同：2
> 
> 时间：2013-01-28T14:49:43.363
> 
> 标签：c#, .net

当我尝试将 4 位小数（解决方案中要求）添加到 2 位小数的双精度值时，发生了一件奇怪的事情：

**不正确的值：**

```
 var result = string.Format("{0:#,0.0000}", Math.Truncate(2.03*10000)/10000); 
```

//返回 2.0299

**正确值：**

```
 var result = string.Format("{0:#,0.0000}", Math.Truncate(2.02*10000)/10000); 
```

//返回 2.0200

**和：**

```
 var result = string.Format("{0:#,0.0000}", Math.Truncate(2.04*10000)/10000); 
```

//返回 2.0400

知道为什么这只发生在 2.03 上吗？12.03 作为输入值返回 12.0300 btw。

我搞不清楚了。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T14:57:55.657

在这里乘以 10000 除以 10000 是没有意义的。您只会冒着引入轻微错误的风险，就像您在此处看到的那样：请注意，双精度和浮点数使用 base-2 表示，因此不能准确表示任意十进制数。

这会给你你想要的：

```
String.Format("{0:#,0.0000}", 2.03) 
```

如果您需要十进制数字的完美准确性，请改用十进制类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T14:56:49.183

这是精度损失，在某些情况下并不是什么大问题。尝试像这样使用[十进制](http://msdn.microsoft.com/en-us/library/364x0z75%28v=vs.80%29.aspx)类型：

```
var result = string.Format("{0:#,0.0000}", Math.Truncate(2.03m*10000m)/10000m); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T15:06:23.813

试试下面的代码......它会帮助你......

```
 var result = Decimal.Add(Convert.ToDecimal(2.03 * 10000 / 10000), .0000m);
        //Results 2.0300

        var result = Decimal.Add(Convert.ToDecimal(2.02 * 10000 / 10000), .0000m);
        //Results 2.0200

        var result = Decimal.Add(Convert.ToDecimal(2.04 * 10000 / 10000), .0000m);
        //Results 2.0400

        var result = Decimal.Add(Convert.ToDecimal(12.03 * 10000 / 10000), .0000m);
        //Results 12.0300 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T14:54:05.477

数字 2.03 表示为二进制数，这意味着它不能精确存储。这可能导致截断无法纠正的舍入错误（例如，小数点后 15 位）。

如果你把数字四舍五入，你就可以避免这个问题。

# node.js - 将 node.js 模块与流星一起使用的推荐方法

> ID：14564598
> 
> 赞同：0
> 
> 时间：2013-01-28T14:50:07.997
> 
> 标签：node.js, meteor, npm

有人可以告诉我推荐的使用 node.js 包的方法是什么，可以在本地安装 npm（不带 -g 选项的 npm）？

有人推荐的一种方法是：

```
 % cd myapp/.meteor/local/build/server/
    % npm install aws-lib
    npm http GET https://registry.npmjs.org/aws-lib
    npm http 304 https://registry.npmjs.org/aws-lib
    npm ERR! Could not create /home/user/myapp/.meteor/local/build/server/node_modules/___aws-lib.npm 
```

这失败了，因为 myapp/.meteor/local/build/server/node_modules 符号链接到 /usr/lib/meteor/lib/node_modules/。

我想在本地安装它有几个原因。我希望它是可移植的，如果我将应用程序部署到其他地方，我希望所有依赖项都与它一起旅行。我不想以 root 身份执行此操作。将这样的东西安装到 /usr/lib/meteor 中似乎是错误的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T16:21:12.213

1.  首先，`meteor bundle bundle.tar.gz`获取`node`应用程序的 -deployable 包。
2.  `tar -xvf bundle.tar.gz`和`cd bundle`。
3.  在捆绑包的`server`目录中有一个`node_modules`目录。
4.  `cd server & npm install aws-lib`

这是一个可部署的软件包。打电话`node bundle/main.js`开始吧。

要实际使用该模块，您必须调用`__meteor_bootstrap__.require`.

查看此以获得更详细的解决方案！ [https://stackoverflow.com/a/12730509/1757994](https://stackoverflow.com/a/12730509/1757994)

或者，您可以将`node`模块包装为包含模块代码和`__meteor_bootstrap__.require`行的包。这是一个简单的垫片的一个很好的例子：

[https://github.com/tmeasday/meteor-page-js](https://github.com/tmeasday/meteor-page-js)

这是一个围绕节点模块的垫片的示例：

[https://github.com/possibilities/meteor-awssum](https://github.com/possibilities/meteor-awssum)

我怀疑这是您首先想要的包裹...

# python - 在 Linux 中从 USB 设备捕获输入

> ID：14564599
> 
> 赞同：3
> 
> 时间：2013-01-28T14:50:11.133
> 
> 标签：python, linux, usb, pipe, device

所以，经过一番搜索......找到了以下从我的 USB QR 码扫描仪捕获输入的方法。

```
import sys
pipe = open('/dev/input/event3', 'r')
while 1:
        for character in pipe.read():
                print(character) 
```

它有效，但我仍然对上述方法有 2 个问题。

我在带有 Debian Wheezy 和 GUI 的 Raspberry 设备上，并且可以确认问题 2 发生在 GUI 上......还不知道没有 GUI 的系统上的输出

1.  有什么更好的方法吗？
2.  上面的方法，当我单击右键时，脚本会立即取消并输出所有已扫描的条目。这是为什么？

## 更新

我想我错过了解释上面代码的结果，因为它最终输出了 ASCII 字符，所以我最终做了以下事情：

```
sys.stdin = open('/dev/tty')
a = raw_input('Scan: ') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T14:54:54.187

问题 1 确实取决于您的 QR 扫描仪。我认为你很幸运，它是这样工作的，因为大多数时候，USB 设备都有复杂的协议来与主机通信。例如，对于鼠标，您如何区分点击和鼠标移动？您需要某种数据格式来交换。

问题 2 可能是因为您的方法在 pipe.read() 处阻塞，等待输入。不知何故，只有右键单击才能结束 read() 函数并允许打印工作

# r - 在 MongoDB (rmongodb) 中使用 $set 运算符更新数组

> ID：14564613
> 
> 赞同：0
> 
> 时间：2013-01-28T14:50:55.670
> 
> 标签：r, mongodb, crud, nosql

`$set`在使用( [doc1](http://docs.mongodb.org/manual/applications/update/) , [doc2](http://docs.mongodb.org/manual/reference/operator/set/) ) 运算符通过[rmongodb更新](http://cran.r-project.org/web/packages/rmongodb/index.html)[MongoDB](http://www.mongodb.org/)中的数组时，我遇到了一些意外行为。

[我尝试使用三个不同版本的数据库服务器（ 2.2.2](http://downloads.mongodb.org/win32/mongodb-win32-x86_64-2.2.2.zip)、[2.2.3_rc0](http://downloads.mongodb.org/win32/mongodb-win32-x86_64-2008plus-2.2.3-rc0.zip)和[2.2.3_rc1](http://downloads.mongodb.org/win32/mongodb-win32-x86_64-2.2.3-rc1.zip) ）尽可能系统地对此进行测试。我将 MongoDB 的错误日志和我的平台信息等详细信息放在最后。

如果有人可以验证这种行为和/或告诉我我做错了什么，那就太好了。

## 示例文档

假设我们的数据库中有以下文档

```
_id : 7      5106887fe2be1937c1e3c8b0
host : 2     host1.com
array : 4    
    0 : 2    value1
    1 : 2    value2
    2 : 2    value3 
```

我想更新第一个数组值（索引 = `0`）。似乎这仅在新值与先前值没有“太大”差异的情况下才有效：

# 更新 1

## 成功

通过“第一个匹配运算符”（）将值更改`value1`为`VALUE1`数组`array``$`

```
b <- mongo.bson.from.list(list(
    host="host1.com",
    array="value1"
))

value.new <- "VALUE1"
bnew <- mongo.bson.from.list(list("$set"=list("array.$"=value.new)))
> bnew
    $set : 3     
        array.$ : 2      VALUE1
res <- mongo.update(mongo=con, ns=ns, criteria=b, objNew=bnew)
> res
[1] TRUE

b <- mongo.bson.from.list(list(
    host="host1.com",
    array=value.new
))
> mongo.find.one(mongo=con, ns=ns, query=b)
    _id : 7      5106887fe2be1937c1e3c8b0
    host : 2     host1.com
    array : 4    
        0 : 2    VALUE1
        1 : 2    value2
        2 : 2    value3 
```

## 失败

但是，当我尝试更改`VALUE1`为`othervalue`时，更新失败

```
b <- mongo.bson.from.list(list(
    host="host1.com",
    array="VALUE1"
))
> mongo.find.one(mongo=con, ns=ns, query=b)
    _id : 7      5106887fe2be1937c1e3c8b0
    host : 2     host1.com
    array : 4    
        0 : 2    VALUE1
        1 : 2    value2
        2 : 2    value3
# >> query seems to be okay.

value.new <- "othervalue"
bnew <- mongo.bson.from.list(list("$set"=list("array.$"=value.new)))
> bnew
    $set : 3     
        array.$ : 2      othervalue

res <- mongo.update(mongo=con, ns=ns, criteria=b, objNew=bnew)
> res
[1] FALSE

b <- mongo.bson.from.list(list(
    host="host1.com",
    array=value.new
))
> mongo.find.one(mongo=con, ns=ns, query=b)
NULL 
```

# 更新 2

## 成功

通过位置索引将值更改`VALUE1`为`value1`数组`array`

```
b <- mongo.bson.from.list(list(
    host="host1.com",
    array="value2"
))

value.new <- "value1"
bnew <- mongo.bson.from.list(list("$set"=list("array.0"=value.new)))
bnew
    $set : 3     
        array.0 : 2      value1

res <- mongo.update(mongo=con, ns=ns, criteria=b, objNew=bnew)
> res
[1] TRUE

b <- mongo.bson.from.list(list(
    host="host1.com",
    array=value.new
))
> mongo.find.one(mongo=con, ns=ns, query=b)
    _id : 7      5106887fe2be1937c1e3c8b0
    host : 2     host1.com
    array : 4    
        0 : 2    value1
        1 : 2    value2
        2 : 2    value3 
```

## 失败

同样，当我尝试将第一个数组值更改为 时`abcd`，更新失败

```
value.new <- "abcd"
bnew <- mongo.bson.from.list(list("$set"=list("array.0"=value.new)))
bnew
    $set : 3     
        array.0 : 2      abcd

res <- mongo.update(mongo=con, ns=ns, criteria=b, objNew=bnew)
> res
[1] FALSE

b <- mongo.bson.from.list(list(
    host="host1.com",
    array=value.new
))
> mongo.find.one(mongo=con, ns=ns, query=b)
NULL 
```

* * *

## MongoDB的错误日志

```
Mon Jan 28 15:19:37 [conn1]  mytest.hosts Assertion failure x == _nfields src\mongo\db\jsobj.cpp 1250
Mon Jan 28 15:19:37 [conn1] mongod.exe    ...\src\mongo\util\stacktrace.cpp(182)                           mongo::printStackTrace+0x3e
Mon Jan 28 15:19:37 [conn1] mongod.exe    ...\src\mongo\util\assert_util.cpp(109)                          mongo::verifyFailed+0xdc
Mon Jan 28 15:19:37 [conn1] mongod.exe    ...\src\mongo\db\jsobj.cpp(1250)                                 mongo::BSONIteratorSorted::BSONIteratorSorted+0xf3
Mon Jan 28 15:19:37 [conn1] mongod.exe    ...\src\mongo\db\ops\update_internal.cpp(906)                    mongo::ModSetState::createNewFromMods+0xa3
Mon Jan 28 15:19:37 [conn1] mongod.exe    ...\src\mongo\db\ops\update.cpp(370)                             mongo::_updateObjects+0x15a2
Mon Jan 28 15:19:37 [conn1] mongod.exe    ...\src\mongo\db\instance.cpp(573)                               mongo::receivedUpdate+0x60d
Mon Jan 28 15:19:37 [conn1] mongod.exe    ...\src\mongo\db\instance.cpp(437)                               mongo::assembleResponse+0x626
Mon Jan 28 15:19:37 [conn1] mongod.exe    ...\src\mongo\db\db.cpp(193)                                     mongo::MyMessageHandler::process+0xf5
Mon Jan 28 15:19:37 [conn1] mongod.exe    ...\src\mongo\util\net\message_server_port.cpp(86)               mongo::pms::threadRun+0x59a
Mon Jan 28 15:19:37 [conn1] mongod.exe    ...\src\third_party\boost\libs\thread\src\win32\thread.cpp(180)  boost::`anonymous namespace'::thread_start_function+0x21
Mon Jan 28 15:19:37 [conn1] mongod.exe    f:\dd\vctools\crt_bld\self_64_amd64\crt\src\threadex.c(314)      _callthreadstartex+0x17
Mon Jan 28 15:19:37 [conn1] mongod.exe    f:\dd\vctools\crt_bld\self_64_amd64\crt\src\threadex.c(292)      _threadstartex+0x7f
Mon Jan 28 15:19:37 [conn1] kernel32.dll                                                                   BaseThreadInitThunk+0xd
Mon Jan 28 15:19:37 [conn1] update mytest.hosts query: { host: "host1.com", array: "VALUE1" } update: { $set: { array.$: "othervalue" } } nscanned:1 keyUpdates:0 exception: assertion src\mongo\db\jsobj.cpp:1250 locks(micros) w:343875 344ms
Mon Jan 28 15:20:06 [conn1]  mytest.hosts Assertion failure x == _nfields src\mongo\db\jsobj.cpp 1250
Mon Jan 28 15:20:06 [conn1] mongod.exe    ...\src\mongo\util\stacktrace.cpp(182)                           mongo::printStackTrace+0x3e
Mon Jan 28 15:20:06 [conn1] mongod.exe    ...\src\mongo\util\assert_util.cpp(109)                          mongo::verifyFailed+0xdc
Mon Jan 28 15:20:06 [conn1] mongod.exe    ...\src\mongo\db\jsobj.cpp(1250)                                 mongo::BSONIteratorSorted::BSONIteratorSorted+0xf3
Mon Jan 28 15:20:06 [conn1] mongod.exe    ...\src\mongo\db\ops\update_internal.cpp(906)                    mongo::ModSetState::createNewFromMods+0xa3
Mon Jan 28 15:20:06 [conn1] mongod.exe    ...\src\mongo\db\ops\update.cpp(370)                             mongo::_updateObjects+0x15a2
Mon Jan 28 15:20:06 [conn1] mongod.exe    ...\src\mongo\db\instance.cpp(573)                               mongo::receivedUpdate+0x60d
Mon Jan 28 15:20:06 [conn1] mongod.exe    ...\src\mongo\db\instance.cpp(437)                               mongo::assembleResponse+0x626
Mon Jan 28 15:20:06 [conn1] mongod.exe    ...\src\mongo\db\db.cpp(193)                                     mongo::MyMessageHandler::process+0xf5
Mon Jan 28 15:20:06 [conn1] mongod.exe    ...\src\mongo\util\net\message_server_port.cpp(86)               mongo::pms::threadRun+0x59a
Mon Jan 28 15:20:06 [conn1] mongod.exe    ...\src\third_party\boost\libs\thread\src\win32\thread.cpp(180)  boost::`anonymous namespace'::thread_start_function+0x21
Mon Jan 28 15:20:06 [conn1] mongod.exe    f:\dd\vctools\crt_bld\self_64_amd64\crt\src\threadex.c(314)      _callthreadstartex+0x17
Mon Jan 28 15:20:06 [conn1] mongod.exe    f:\dd\vctools\crt_bld\self_64_amd64\crt\src\threadex.c(292)      _threadstartex+0x7f
Mon Jan 28 15:20:06 [conn1] kernel32.dll                                                                   BaseThreadInitThunk+0xd
Mon Jan 28 15:20:06 [conn1] update mytest.hosts query: { host: "host1.com", array: "value2" } update: { $set: { array.0: "abcd" } } nscanned:1 keyUpdates:0 exception: assertion src\mongo\db\jsobj.cpp:1250 locks(micros) w:344363 345ms
Mon Jan 28 15:20:06 [journal] *** unhandled exception (access violation) at 0x0000000076D632D0, terminating
Mon Jan 28 15:20:06 [journal] *** access violation was a read from 0x0000008301570AD8
Mon Jan 28 15:20:06 [journal] *** stack trace for unhandled exception:
Mon Jan 28 15:20:06 [journal] ntdll.dll                                                                      RtlFreeHeap+0xd0
Mon Jan 28 15:20:06 [journal] kernel32.dll                                                                   HeapFree+0xa
Mon Jan 28 15:20:06 [journal] mongod.exe    f:\dd\vctools\crt_bld\self_64_amd64\crt\src\free.c(51)           free+0x1c
Mon Jan 28 15:20:06 [journal] mongod.exe    ...\src\mongo\db\d_concurrency.cpp(309)                          mongo::Lock::ScopedLock::~ScopedLock+0xac
Mon Jan 28 15:20:06 [journal] mongod.exe                                                                     mongo::Lock::GlobalRead::`scalar deleting destructor'+0x14
Mon Jan 28 15:20:06 [journal] mongod.exe    ...\src\mongo\db\dur.cpp(567)                                    mongo::dur::_groupCommitWithLimitedLocks+0x174
Mon Jan 28 15:20:06 [journal] mongod.exe    ...\src\mongo\db\dur.cpp(608)                                    mongo::dur::groupCommitWithLimitedLocks+0x24
Mon Jan 28 15:20:06 [journal] mongod.exe    ...\src\mongo\db\dur.cpp(743)                                    mongo::dur::durThreadGroupCommit+0x70
Mon Jan 28 15:20:06 [journal] mongod.exe    ...\src\mongo\db\dur.cpp(814)                                    mongo::dur::durThread+0x198
Mon Jan 28 15:20:06 [journal] mongod.exe    ...\src\third_party\boost\libs\thread\src\win32\thread.cpp(180)  boost::`anonymous namespace'::thread_start_function+0x21
Mon Jan 28 15:20:06 [journal] mongod.exe    f:\dd\vctools\crt_bld\self_64_amd64\crt\src\threadex.c(314)      _callthreadstartex+0x17
Mon Jan 28 15:20:06 [journal] mongod.exe    f:\dd\vctools\crt_bld\self_64_amd64\crt\src\threadex.c(292)      _threadstartex+0x7f
Mon Jan 28 15:20:06 [journal] kernel32.dll                                                                   BaseThreadInitThunk+0xd
Mon Jan 28 15:20:06 [journal] writing minidump diagnostic file mongo.dmp
Mon Jan 28 15:20:06 [journal] *** immediate exit due to unhandled exception 
```

## 平台信息

操作系统：Windows 7（64 位）

```
> sessionInfo()
R version 2.15.1 (2012-06-22)
Platform: i386-pc-mingw32/i386 (32-bit)

locale:
[1] LC_COLLATE=German_Germany.1252  LC_CTYPE=German_Germany.1252   
[3] LC_MONETARY=German_Germany.1252 LC_NUMERIC=C                   
[5] LC_TIME=German_Germany.1252    

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] rmongodb_1.0.5

loaded via a namespace (and not attached):
[1] tools_2.15.1 
```

* * *

**仅供感兴趣的人参考：这是生成示例文档的代码**

```
#-------------------------------------------------------------------------------
# ENSURE PACKAGE
#-------------------------------------------------------------------------------

pkg <- "rmongodb"
lib <- file.path(R.home(), "library")
if (!suppressWarnings(require(pkg, lib.loc=lib, character.only=TRUE))) {
    install.packages(pkg, lib=lib)
    require(pkg, lib.loc=lib, character.only=TRUE)
}

# /ENSURE PACKAGE ----------

#-------------------------------------------------------------------------------
# DB CONNECTION
#-------------------------------------------------------------------------------

db      <- "mytest"
ns.0    <- "hosts"
ns      <- paste(db, ns.0, sep=".")
con     <- mongo.create(db=db)

# /DB CONNECTION ----------

#-------------------------------------------------------------------------------
# INSERT EXAMPLE DOCS
#-------------------------------------------------------------------------------

# ENSURE EMPTY DB
mongo.remove(mongo=con, ns=ns)
cursor  <- mongo.find(mongo=con, ns=ns)
out <- NULL
while (mongo.cursor.next(cursor=cursor)) {
    out <- c(out, list(mongo.cursor.value(cursor=cursor)))
}
out
# /

blist <- NULL

########
# DOC1 #
########
buf <- mongo.bson.buffer.create()
mongo.bson.buffer.append(buf, name="host", 
    value="host1.com") 
    mongo.bson.buffer.start.array(buf, "array")
    values <- list("value1", "value2", "value3")
    for (ii in seq(along=values)) {
        mongo.bson.buffer.append(
            buf=buf, 
            name=as.character(ii-1), 
            value=values[[ii]]
        )
    } 
    mongo.bson.buffer.finish.object(buf) # finish array
mongo.bson.buffer.finish.object(buf) # finish doc

b <- mongo.bson.from.buffer(buf)
blist <- c(blist, list(b))
blist

sapply(blist, function(ii) {
    mongo.insert(mongo=con, ns=ns, b=ii)
})

# TEST QUERY
cursor  <- mongo.find(mongo=con, ns=ns, query=b)
out <- NULL
while (mongo.cursor.next(cursor=cursor)) {
    out <- c(out, list(mongo.cursor.value(cursor=cursor)))
}
out

# /INSERT EXAMPLE DOCS ---------- 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T17:17:07.920

Rappster，您没有“R”问题或“rmongodb”问题。不幸的是，服务器（mongod.exe）又搞砸了。但是，我自己在 mongod 2.2.2（64 位）上尝试过，没有问题。我查看了断言失败的代码，但不明白为什么它会失败，除非传递了一个格式不正确的 BSON 或某处存在内存损坏。看起来需要提交另一个错误报告，以便 10gen 的一位专家可以查看此问题。只需在此处引用它们。你已经很好地解释了情况。谢谢。

# javascript - 何时触发 MutationObserver 回调？

> ID：14564617
> 
> 赞同：43
> 
> 时间：2013-01-28T14:51:12.530
> 
> 标签：javascript, dom, browser, dom4

我知道 MutationObservers 回调可能会在 DOM 更改后的某个时间被调用。但问题是：这些回调的时机是什么？回调是否进入浏览器的事件队列？如果是这样，他们什么时候进入队列？

是回调：

*   在 DOM 突变发生后立即调用，
*   操作 DOM 的函数完成后立即调用，
*   调用堆栈为空时立即调用，
*   在 DOM 突变发生后立即排队，
*   操作 DOM 的函数完成后立即入队，或者
*   在其他时间？

例如，如果执行以下代码（[此处定义了 setZeroTimeout](http://dbaron.org/log/20100309-faster-timeouts)）：

```
var target = document.body;

new MutationObserver(function(mutations) {
  console.log('MutationObserver');
}).observe(target, {
  attributes: true,
  childList: true,
  characterData: true
});

// Post message
setZeroTimeout(function () { console.log('message event'); });
// DOM mutation
target.setAttribute("data-test", "value"); 
```

“MutationObserver”应该在“消息事件”之前还是之后打印？或者它是实现定义的？

我在 Chromium 26 上的“消息事件”之前得到“MutationObserver”，尽管 DOM 突变是在消息发布之后。也许这表明 MutationObserver 回调**没有**使用事件队列。

我搜索了 HTML 规范、DOM 规范或浏览器实现文档，但没有找到与此行为相关的任何内容。

请问有关于 MutationObservers 回调时间的解释或文档吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-08T21:45:25.867

MutationObservers 异步触发但“很快”，这意味着它们在队列中的其他事物之前触发，例如布局、绘制或触发事件。

这改善了同步的损失，因为在观察者有机会做出反应之前，您不必担心屏幕闪烁或其他坏事发生。

在开发人员说明中，他们谈到了“微任务结束”时序模型。我同意这没有很好的记录。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2015-12-16T12:07:52.537

两年后，我将根据[WHATWG 更新的 DOM 规范](https://dom.spec.whatwg.org/#mutation-observers)回答我自己的问题。

如规范所示：

> 要将突变观察者复合微任务排队，请运行以下步骤：
> 
> 1.  如果设置了变异观察者复合微任务队列标志，则终止这些步骤。
> 2.  设置变异观察者复合微任务队列标志。
> 3.  排队一个复合微任务以通知突变观察者。

而“对复合微任务进行排队”链接到[HTML 规范中](https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-microtask)解释微任务队列模型的部分。

因此，我们可以得出结论，`MutationObserver`回调是作为微任务触发的，这确实比[上面@Scott Miles 的答案](https://stackoverflow.com/a/15889583/711717)所建议的任务队列任务更快。

为了进一步了解事件循环和处理模型， HTML 规范[的事件循环部分](https://html.spec.whatwg.org/multipage/webappapis.html#event-loops)将是完美的。

就个人而言，我很高兴看到`MutationObserver`s 是标准的一部分，并且有一个有据可查且一致的时序模型。[大多数现代浏览器都支持](http://caniuse.com/#feat=mutationobserver)s `MutationObserver`，我认为它们现在非常适合生产使用。

# javascript - TinyMCE 错误 - INDEX_SIZE_ERR：DOM 异常 1

> ID：14564619
> 
> 赞同：0
> 
> 时间：2013-01-28T14:51:25.733
> 
> 标签：javascript, tinymce

我有一个使用 TinyMCE 的遗留内部系统，但它最近停止工作，我不知道为什么，所以我希望可能有一些用户可以提供帮助。

该系统是一个常见问题类型，在一个页面上有 4 个 tinymce 初始化文本区域，当提交时，更新数据库。

Chrome中的Bug如下：

`Uncaught Error: INDEX_SIZE_ERR: DOM Exception 1`不可编辑插件的 editor_plugin.js 中的第 110 行

```
r = s.getRangeAt(0); 
```

另一个错误是

`Uncaught TypeError: Cannot read property 'nodeName' of null`它位于表插件的 editor_plugin.js 的第 1 行。链接：[http ://www.tinymce.com/wiki.php/Plugin:table](http://www.tinymce.com/wiki.php/Plugin:table)

奇怪的是，如果我点击页面上的第四个tinymce框，然后更新内容并提交，数据库更新得很好，所以非常非常奇怪。

我知道这没什么可继续的，但问题更多的是希望而不是期望。

不可编辑插件的 editor_plugin_src.js 的最后一次提交是

`editor_plugin_src.js,v 1.1 2010/12/15 14:00:33 amcpeake`

我尝试在 github 上查看此文件的提交，但看不到任何解决此错误的内容。

我也尝试下载最新版本的tinymce，但这完全破坏了系统。

![在此处输入图像描述](../Images/89a10925dbb069e0ef073d947f141d38.png)

这是代码的完整分支，其中不可编辑的插件从上面提到的行中获取错误：

```
_moveSelection : function(e, inst) {
var s, r, sc, ec, el, c = tinyMCE.getParam('noneditable_editable_class', 'mceNonEditable');

    if (!inst)
        return true;

    // Always select whole element
    if (tinyMCE.isGecko) {
        s = inst.selection.getSel();
        r = s.getRangeAt(0);
        sc = tinyMCE.getParentNode(r.startContainer, function (n) {return tinyMCE.hasCSSClass(n, c);});
        ec = tinyMCE.getParentNode(r.endContainer, function (n) {return tinyMCE.hasCSSClass(n, c);});

        sc && r.setStartBefore(sc);
        ec && r.setEndAfter(ec);

        if (sc || ec) {
            if (e.type == 'keypress' && e.keyCode == 39) {
                el = sc || ec;

                // Try!!
            }

            s.removeAllRanges();
            s.addRange(r);

            return tinyMCE.cancelEvent(e);
        }
    }

    return true;
}, 
```

# google-maps - Google Maps API v3 和 Overlay Map Types - 使用 fitBounds 时出现图块错误

> ID：14564621
> 
> 赞同：2
> 
> 时间：2013-01-28T14:51:34.917
> 
> 标签：google-maps, google-maps-api-3, webkit

我在使用 Google Maps Javascript API 时遇到了一个奇怪的问题。当使用 fitBounds() 方法时，webkit 浏览器在某些缩放级别之间缩放时会为平移和缩放设置动画。这很好，但是当使用“叠加地图类型”时，有时不会显示原始地图图块。我无法在较小的显示器上重新创建它，所以我认为它与大地图画布有关。

我制作了一个简单的示例页面，该页面几乎是从 API 文档中复制而来的。为了重现问题：

1) 使用大显示器在 Chrome（Mac 或 Windows 上）中打开[http://pastehtml.com/view/cqloxyo5v.html](http://pastehtml.com/view/cqloxyo5v.html)，并确保窗口最大化。我用的是 24"。

2) 按“点击我！” 左下角的按钮触发 fitBounds() 方法，其中两个坐标位于地图范围之外。

3) 地图将动画以适应坐标，一些地图图块将变为空。如果没有动画，您的浏览器窗口可能太小了。如果它确实动画但瓷砖看起来不错，请更新页面并再次尝试几次。它似乎偶尔发生。

这就是我的样子：[https ://vimeo.com/58366640](https://vimeo.com/58366640)

有人遇到过类似的事情吗？有什么办法可以禁用动画吗？

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T13:21:37.580

另一个复制链接：[http ://tinyurl.com/baqvppr](http://tinyurl.com/baqvppr)

这似乎是一个 Chrome 错误。由于某种原因，Chrome 的 GPU 内存不足。您可以在这里为这个问题投票： [https ://code.google.com/p/chromium/issues/detail?id=175549](https://code.google.com/p/chromium/issues/detail?id=175549)

![在此处输入图像描述](../Images/e36dcebb2da055adf148f321aa7583b4.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T20:22:14.167

This is a known issue, there are a lot of requests to give an option to disable the animation.

I didn't notice the behaviour as shown in the video, but for me the zooming-animation is a very unsightly process when switching between very high and very low zoom-levels.

I don't know if it would be an option in your case and if it will fix the issue, but I've found a possible workaround in OpenLayers, where it's possible to avoid the animation in Google Maps. They simply hide the complete map-container and show the container when the process has been finished.

In your case this would be:

```
 $().ready(function() {
      $("#clickButton").click(function() {
        var bounds = new google.maps.LatLngBounds();
        bounds.extend(new google.maps.LatLng(49.0, 2.55));
        bounds.extend(new google.maps.LatLng(35.55, 139.78));
        var mapDiv=map.getDiv();
        map.fitBounds(bounds);
        google.maps.event.addListenerOnce(map,'tilesloaded',
                                          function(){mapDiv.style.visibility=''});
        mapDiv.style.visibility="hidden";
      });
  }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-11T07:13:53.087

碰巧我需要稍微平移我的地图以显示所有标记。除了解决这个问题外，地图停止了各种缩放的动画。效果并不完全是人们想要的（地图变为空白，然后标记缩放到它们的位置，然后显示具有新范围的地图），但它对我的需要更好，也许对你更好。这是在地图上放置标记的函数的底部：

```
map.fitBounds(latlngbounds);
//This minimum zoom trick I got from StackOverflow:
google.maps.event.addListenerOnce(map, 'bounds_changed', function(event){
    if (this.getZoom() >= 5){  
        this.setZoom(5) 
        }
    }); 
map.panBy(1,0); 
```

# python - 评估到同一日期的两个不同的周数

> ID：14564622
> 
> 赞同：4
> 
> 时间：2013-01-28T14:51:41.967
> 
> 标签：python

我正在解析来自使用年份和周数显示日期的来源的每周时间序列数据。但是，当尝试使用 Python 的`datetime.strptime`函数将这些日期转换为 YYYY-MM-DD 日期时，两个不同的周数有时会计算为相同的日期，而我知道它们不应该。每周数据是在星期五结束的那一周。例如：

```
datetime.strptime("1998-5-53", "%Y-%w-%U")
Out[43]: datetime.datetime(1999, 1, 8, 0, 0)

datetime.strptime("1999-5-01", "%Y-%w-%U")
Out[44]: datetime.datetime(1999, 1, 8, 0, 0) 
```

来自欧洲中央银行的基础数据；一个示例系列在[这里](http://sdw.ecb.europa.eu/quickview.do?SERIES_KEY=123.ILM.W.U2.C.A010.Z5.Z0Z)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T14:57:26.697

1998 年没有 53 周；12 月 31 日是第 52 周：

```
>>> datetime.strptime("1998-4-52", "%Y-%w-%U")
datetime.datetime(1998, 12, 31, 0, 0) 
```

请注意，`%U`状态的文档：

> 一年中的周数（星期日作为一周的第一天），十进制数 [00,53]。第一个星期日之前的新年中的所有日子都被认为是在第 0 周。

可能是您的数据源将第一个星期日之前的几天视为第 1 周。

# matlab - 在 Matlab 中拆分时间戳

> ID：14564623
> 
> 赞同：5
> 
> 时间：2013-01-28T14:51:46.440
> 
> 标签：matlab, textscan

我有一个文件，其中包含我试图在 Matlab 中拆分的数据值和时间戳。这是格式：

```
-18.151346    Mon Jan 28 11:33:08 2013 
```

我正在使用 textscan 功能尝试拆分它。

```
data=textscan(fid,'%f%s%s%f%s%n','delimiter','space'); 
```

我正在尝试将时间戳拆分为单独的列，以便我可以只使用时间而不是日期或年份。我看了一些以前的问题，这些问题非常相似，但由于某种原因，我无法让它做我想做的事。我得到的单元格数组就是这种格式。

```
Column 1     Column 2   Column 3 
-18.151346   Mon       Jan 28 11:33:08 2013 
```

我对 Matlab 完全陌生，因此将不胜感激任何帮助。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T14:57:23.717

1.  您使用`'space'`字符串作为分隔符，这在`textscan`. 将其指定为`' '`。
2.  您希望将连续空格视为一个，因此您还应该将`'MultipleDelimsAsOne'`标志设置为 1。

正确的语法应该是：

```
textscan( fid, '%f%s%s%s%s%n', 'delimiter', ' ', 'MultipleDelimsAsOne', 1); 
```

如果您没有尝试修改 delimiter 选项，则默认情况下此行为会正确完成，因此只需省略所有选项：

```
textscan( fid, '%f%s%s%s%s%n'); 
```

另请注意，您需要为字符串中被空格包围的每个项目设置一个标志。换句话说，对于这样的字符串：

> -18.151346 2013 年 1 月 28 日星期一 11:33:08

字符串形式的时间戳将存储在结果元胞数组的第 5 列中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T14:58:02.783

要读取我会使用的时间戳`regexp`。

我要建议的解决方案可以优化，但至少在第一次尝试时它可以帮助你。

```
A = regexp(str,'[^\s]+','match'); 
```

这样，您可以匹配字符串中的所有正则表达式。然后，您知道`values`并`time`存储为元素 1 和 5。

我做了一个简短的测试：

```
cell = {'-18.151346 Mon Jan 28 11:33:08 2013','19.33333 Tue Feb 29 10:12:23 2012'}; 
```

这会将您带到一个单元格`A{1,2}`。

同样，此过程是完美的，但您可以将其用作提示。

# c# - 如何在asp.net 4.0 c#中没有直接链接的服务器上下载文件？

> ID：14564625
> 
> 赞同：-2
> 
> 时间：2013-01-28T14:51:51.203
> 
> 标签：c#, asp.net

**ASP.NET 4.0**

我已经用谷歌搜索了近一个星期，但找不到任何解决我的问题的方法。我想下载文件以将它们存储在我的服务器上。我知道使用 webclient 它可以完成这项工作，但仅适用于直接链接

```
 webClient = new WebClient();
 webClient.DownloadFile(fileUrl, filePath); 
```

它不适用于没有直接链接的文件！我怎样才能下载这些类型的文件？

直接链接：www.example.com/pic.jpg

间接链接：www.example.com/download?xxxxxxx

我遇到这个问题的具体网站是 www.zbigz.com

[您可以通过在 www.zbigz.com 上复制此链接torrent 链接](http://torcache.net/torrent/ACDD7792CDC413CC5A0398A6E0F96EDFD308F937.torrent?title=%5Bkat.ph%5D100.amazing.3d.hd.wallpapers.1366.x.768)来获得间接链接，它会在一分钟内缓存文件并在“免费”类别下为您提供链接。

我确实有一个由这个站点生成的链接，但它对你不起作用，因为这个站点不支持下载共享链接。 [http://34044.zbigz.com/core/outfile.php?did=d85ade21e892f386e55a556ce47b654b](http://34044.zbigz.com/core/outfile.php?did=d85ade21e892f386e55a556ce47b654b)

**编辑** 对于所有认为这是为了抓取的人！我想下载这些文件，但不能直接这样做，因为我的大学已经阻止了包括这个在内的许多网站，所以作为一名 cse 学生，我想到了另一种将它们下载到我的服务器然后从服务器下载到我的机器的方法。

```
 byte[] content;
        HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);
        WebResponse response = request.GetResponse();

        Stream stream = response.GetResponseStream();

        using (BinaryReader br = new BinaryReader(stream))
        {
            content = br.ReadBytes(500000);
            br.Close();
        }
        response.Close();

        FileStream fs = new FileStream(file_name, FileMode.Create);
        BinaryWriter bw = new BinaryWriter(fs);
        try
        {
            bw.Write(content);
        }
        finally
        {
            fs.Close();
            bw.Close();
        } 
```

这是我正在尝试的代码，适用于直接链接，但在上述链接上给出 403 禁止错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T15:01:48.380

不使用`WebClient`但使用`WebRequest`

WebRequest 可以自动处理重定向。

请参阅 从中派生 WebRequest 的[System.Net.WebRequest](http://msdn.microsoft.com/en-us/library/system.net.webrequest.aspx) 和[System.Net.HttpWebRequest](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.aspx)

# plsql - pl/sql utl_file endline 总是 \r\n

> ID：14564633
> 
> 赞同：0
> 
> 时间：2013-01-28T14:52:09.083
> 
> 标签：plsql, oracle11g

我已经在 oracle 11g db 上的 pl/sql 中编写了一个函数来导出遵循特定细节的表。其中一个细节是 \n 作为断线。

```
PROCEDURE exportTableAScsv (p_tname varchar2) IS
    fileHandler     UTL_FILE.FILE_TYPE;
    l_theCursor     integer default dbms_sql.open_cursor;
    l_columnValue   varchar2(4000);
    l_status        integer;
    l_query         varchar2(1000) default 'select * from ' || p_tname;

    l_colCnt        number := 0;
    l_separator     varchar2(1) default '|';
    l_descTbl       dbms_sql.desc_tab;
    test_n          number:=0;
    filename        varchar2(100) := 'custom_export_'|| p_tname ||'_' ||    to_char(sysdate,'yyyymmddhhmmss')|| '.csv';
    ex_custom EXCEPTION;
    PRAGMA EXCEPTION_INIT( ex_custom, -20001 );

 BEGIN

 fileHandler := UTL_FILE.FOPEN('TEMPDIR', filename , 'W');
 dbms_sql.parse(  l_theCursor,  l_query, dbms_sql.native );
 dbms_sql.describe_columns( l_theCursor, l_colCnt, l_descTbl );
 . . .

 for i in 1 .. l_colCnt loop
     if (i>1) then
         UTL_FILE.put( fileHandler, l_separator || l_descTbl(i).col_name );
     else
         UTL_FILE.put( fileHandler, l_descTbl(i).col_name );
     end if;
     dbms_sql.define_column( l_theCursor, i, l_columnValue, 4000 );
 end loop;
 -- UTL_FILE.put_line(fileHandler,'')
 UTL_FILE.fflush(fileHandler)
 UTL_FILE.put( fileHandler, CHR(10) );

 l_status := dbms_sql.execute(l_theCursor);
 . . . 
 while ( SYS.dbms_sql.fetch_rows(l_theCursor) > 0 ) loop
     for i in 1 .. l_colCnt loop
         SYS.dbms_sql.column_value( l_theCursor, i, l_columnValue );
         if (i > 1) then
            utl_file.put( fileHandler, l_separator || l_columnValue );
         else
            utl_file.put( fileHandler, l_columnValue );
         end if;
     end loop;
    -- UTL_FILE.put_line(fileHandler,'')
    UTL_FILE.fflush(fileHandler)
    UTL_FILE.put( fileHandler, CHR(10) );
  end loop;

  dbms_sql.close_cursor(l_theCursor);
  UTL_FILE.FCLOSE(fileHandler);
EXCEPTION
 . . .
 UTL_FILE.FCLOSE(fileHandler);
 raise;
. . . 
END exportTableAScsv; 
```

如标题中所述，尽管有上面的代码，但当我运行该函数时，我总是将数据提取为 Windows 格式，并以 \r\n 作为行尾。Oracle DB 位于 Windows 机器上。PS 不幸的是，我不能将数据库放在 linux 机器上，而是使用 put_line。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T15:03:30.513

我怀疑这是由您使用 UTL_FILE.FFLUSH 引起的。引用[文档](http://docs.oracle.com/cd/E11882_01/appdev.112/e25788/u_file.htm#i1003404http://docs.oracle.com/cd/E11882_01/appdev.112/e25788/u_file.htm#i1003404)（我的重点）：

> FFLUSH 将挂起的数据物理写入由文件句柄标识的文件。通常，写入文件的数据会被缓冲。FFLUSH 过程强制将缓冲数据写入文件。 **数据必须以换行符结束。**

但是，在您的函数中，您在使用 PUT 附加换行符*之前调用 FFLUSH。*当您在 Windows 机器上时，您将获得 Windows 换行符。

顺便说一句；为什么这是一个函数而不是一个过程？它作为一个过程更有意义，因为您不太可能希望人们能够从 SQL 调用它。

# iphone - 新的IOS苹果地图

> ID：14564637
> 
> 赞同：2
> 
> 时间：2013-01-28T14:52:18.230
> 
> 标签：iphone, ios, xcode, mkmapview

我已经使用当前代码在当前应用程序上实现了 IOS 映射“轮流”功能：

```
Class itemClass = [MKMapItem class];
if (itemClass && [itemClass respondsToSelector:@selector(openMapsWithItems:launchOptions:)]) {
    MKMapItem *currentLocation = [MKMapItem mapItemForCurrentLocation];
    MKMapItem *toLocation = [[MKMapItem alloc] initWithPlacemark:[[MKPlacemark alloc] initWithCoordinate:to addressDictionary:nil]];
    toLocation.name = @"Destino";
    [MKMapItem openMapsWithItems:[NSArray arrayWithObjects:currentLocation, toLocation, nil]
                   launchOptions:[NSDictionary dictionaryWithObjects:[NSArray arrayWithObjects:MKLaunchOptionsDirectionsModeDriving, [NSNumber numberWithBool:YES], nil]
                                                             forKeys:[NSArray arrayWithObjects:MKLaunchOptionsDirectionsModeKey, MKLaunchOptionsShowsTrafficKey, nil]]]; 
```

我的问题是，我使用地图后如何返回我的应用程序？谷歌可以使用 webView，但我不能让它在苹果地图上工作。

在此先感谢并为我的英语不好感到抱歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T15:10:26.257

恐怕你想要实现的目标是不可能的。您可以在触发地图应用程序时传递各种启动选项（例如要使用哪个地图，将地图居中的位置等），但您不能做的是传递回调以将用户“返回”回您的当他们完成时。用户必须自己手动导航回您的应用程序。

如果您认为此功能特别值得，您可能需要考虑向 Apple 提交功能请求。

# c++ - 重载解析和模板函数

> ID：14564639
> 
> 赞同：2
> 
> 时间：2013-01-28T14:52:22.527
> 
> 标签：c++, templates, overloading, specialization

我有一个具有两个不同功能的模板类（OutgoingPacket）：

```
void _prepare() {
    assert(false); // this should have been specialized and the native function never called.
}

template <typename Args, typename ... RemArgs>
void _prepare(Args&& args, RemArgs&& ... remArgs) {
    assert(false); // this should have been specialized and the native function never called.
} 
```

然后，我在类定义之外定义了两者的一些特化：

```
// no args
template <> void OutgoingPacket<PacketServerAck> ::_prepare();
template <> void OutgoingPacket<PacketSup>       ::_prepare();
template <> void OutgoingPacket<PacketWelcome>   ::_prepare();
template <> void OutgoingPacket<PacketServerPing>::_prepare();

// with args
template <> template <> void OutgoingPacket<PacketGTFO>::_prepare<std::string>(std::string&& message);
template <> template <> void OutgoingPacket<PacketPlayer>::_prepare<std::shared_ptr<User>>(std::shared_ptr<User>&& user); 
```

不带参数的函数调用prepare按预期工作，但调用带参数的重载调用基本模板；他们触发断言。

为什么会这样？

* * *

更新：我刚刚尝试修改专业化定义以包含具有相同结果的引用：

```
template <> template <> void OutgoingPacket<PacketGTFO>::_prepare<std::string&&>(std::string&& message);
template <> template <> void OutgoingPacket<PacketPlayer>::_prepare<std::shared_ptr<User>&&>(std::shared_ptr<User>&& user); 
```

* * *

附带说明一下，我这样做的原因是因为我不认为基类 OutgoingPacket 应该散布所有这些不同版本的准备函数。而且我觉得子类化不合适，因为不同 OutgoingPackets 之间的差异非常小（约 4 行）。

本质上，OutgoingPacket 对象是使用任意参数创建的，然后将其转发给准备函数：

```
template<typename ... Args>
OutgoingPacket(Args&&... args) {
    _prepare(std::forward<Args>(args)...);
} 
```

如果这是不好的做法，我可以得到一些关于设计的建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T15:02:23.127

原因很可能是您使用**不是**右值的参数调用函数。

请注意，主可变参数模板的函数参数绑定到右值和左值：换句话说，它们是**通用引用**（Scott Meyers 的非标准术语），而专用模板中的函数参数*仅*绑定到右值。

```
// The parameters are universal references
template <typename Args, typename ... RemArgs>
void _prepare(Args&& args, RemArgs&& ... remArgs) 

// The parameters are NOT universal references
template <> template <> 
void OutgoingPacket<PacketGTFO>::_prepare<std::string>(std::string&& message); 
```

有关通用引用如何工作的说明，请参阅[本文](http://isocpp.org/blog/2012/11/universal-references-in-c11-scott-meyers)和[此演示文稿。](http://channel9.msdn.com/Shows/Going+Deep/Cpp-and-Beyond-2012-Scott-Meyers-Universal-References-in-Cpp11)棘手的部分是`&&`后缀并不总是意味着右值引用：例如，在您的主模板的情况下，它不是，但在您的专用模板的情况下它确实如此。

因此，如果您的函数的输入参数是左值（例如，具有名称的变量而不是函数调用的返回值），由于常规的重载解析规则，它们将绑定到您的主模板而不是您的专用模板。

# oracle - 在过程中删除表

> ID：14564641
> 
> 赞同：7
> 
> 时间：2013-01-28T14:52:25.037
> 
> 标签：oracle, plsql, oracle11g

> **可能重复：**
> [Oracle：如果表存在](https://stackoverflow.com/questions/1799128/oracle-if-table-exists)
> [则删除表（如果存在）](https://stackoverflow.com/questions/10838558/drop-table-if-it-exists)

我正在尝试创建此过程，但出现错误。

```
CREATE OR REPLACE PROCEDURE SP_VEXISTABLA(NOMBRE IN VARCHAR2)
IS
CANTIDAD NUMBER(3);
BEGIN
SELECT COUNT(*) INTO CANTIDAD FROM ALL_OBJECTS WHERE OBJECT_NAME = NOMBRE;
IF (CANTIDAD >0) THEN
    DROP TABLE NOMBRE;
END IF;
END; 
```

错误是：

> 错误（8,1）：PLS-00103：在预期以下情况之一时遇到符号“END”：（开始 case 声明退出 goto if loop mod null pragma raise return select update while with << continue close current delete fetch lock插入打开的回滚保存点集 sql 执行所有合并管道清除的提交。

你知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-28T15:15:38.560

您需要将程序更改为：

```
CREATE OR REPLACE PROCEDURE SP_VEXISTABLA(NOMBRE IN VARCHAR2)
IS
CANTIDAD NUMBER(3);
BEGIN
SELECT COUNT(*) INTO CANTIDAD FROM USER_TABLES WHERE TABLE_NAME = NOMBRE;
IF (CANTIDAD >0) THEN
    execute immediate 'DROP TABLE ' || NOMBRE;
END IF;
END; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T15:13:43.223

不能使用 DROP 命令在过程中 DROP 表。您需要使用 EXECUTE IMMEDIATE 在 PL/SQL 中运行 DDL 命令。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T03:57:08.180

它不允许您在 PLSQL 过程中直接使用 DDL 状态。您需要使用`Execute Immediate`语句才能执行 DDL。

使用下面的代码：

```
CREATE OR REPLACE PROCEDURE SP_VEXISTABLA(Table_nameIN VARCHAR2)
IS
CANTIDAD integer;
BEGIN
   SELECT COUNT(*) INTO CANTIDAD FROM USER_TABLES WHERE TABLE_NAME = Table_name;
   DBMS_OUTPUT.PUT_LINE(CANTIDAD);
   IF (CANTIDAD >0) THEN
      DBMS_OUTPUT.PUT_LINE(Table_name);
      execute immediate 'DROP TABLE ' || Table_name;
   END IF;
END; 
```

# sql-server - 计算会话 ID 出现的次数 (MSSQL)

> ID：14564642
> 
> 赞同：1
> 
> 时间：2013-01-28T14:52:27.557
> 
> 标签：sql-server, count

我正在尝试在我们的票务网站上汇总用户的实时视图。

目前，我在网站上有 2 个会话（Session col）。我当前的查询返回以下内容：

```
EVENTID     EVENT      Session    SessionOpened           SessionLength   NumberofTix
1619        BB King     11         2013-01-28 09:34:16.300   -2            2
1622        BB King     12         2013-01-28 09:36:55.073    0            1
1622        BB King     12         2013-01-28 09:36:55.077    0            3 
```

但是，它应该如下所示：

```
EVENTID     EVENT      Session    SessionOpened           SessionLength   NumberofTix
1619        BB King     11         2013-01-28 09:34:16.300   -2            2
1622        BB King     12         2013-01-28 09:36:55.073    0            4 
```

为什么第 12 次会议返回 2 行——1 行有 1 张票，1 行有 3 张票？

查询：

```
SELECT distinct set_eSRO_Event as EventID, shName as EventName, setSRO_UID as SRO_SessionID, setDateTime as SessionStarted, 
DATEDIFF(mi, getDate(), setDateTime) as SessionTimer, Count(*) AS NumberofTickets FROM SessionTickets
INNER JOIN Shows on shCode = setShowCode
WHERE setStatus = 0
GROUP BY setsro_UID, shName, set_eSRO_Event, setDateTime 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T14:59:49.040

您的结果的列和查询的别名不连贯，很难说。我想 setDateTime 是不同的（= SessionStarted 或 SessionOpened）。当您按 setDatetime 分组时，如果它们不同 => 两行。

因此，向 setDatetime 添加一个`MIN`聚合函数（如您的“想要的”结果），并从 GROUP BY 中删除 setDatetime

```
SELECT set_eSRO_Event as EventID, 
shName as EventName, 
setSRO_UID as SRO_SessionID, 
MIN(setDateTime) as SessionStarted, 
DATEDIFF(mi, getDate(), MIN(setDateTime)) as SessionTimer, 
COUNT(*) AS NumberofTickets 
FROM SessionTickets
INNER JOIN Shows on shCode = setShowCode
WHERE setStatus = 0
GROUP BY setsro_UID, shName, set_eSRO_Event 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T15:00:04.950

在不知道 wich 列属于 wich 表的情况下，以及 SQL Server 的版本，您可以尝试以下查询：

```
SELECT  EventID, 
        EventName, 
        SRO_SessionID, 
        MIN(SessionStarted) SessionStarted, 
        SessionTimer,
        SUM(NumberofTickets) NumberofTickets
FROM (  SELECT  set_eSRO_Event as EventID, 
                shName as EventName, 
                setSRO_UID as SRO_SessionID, 
                setDateTime as SessionStarted, 
                DATEDIFF(mi, getDate(), setDateTime) as SessionTimer, 
                Count(*) AS NumberofTickets 
        FROM SessionTickets 
        INNER JOIN Shows 
            ON shCode = setShowCode
        WHERE setStatus = 0
        GROUP BY set_eSRO_Event, shName, setSRO_UID, setDateTime,
                 DATEDIFF(mi, getDate(), setDateTime)) A
GROUP BY EventID, EventName, SRO_SessionID, SessionTimer 
```

# postgresql - Postgres 密码认证失败

> ID：14564644
> 
> 赞同：59
> 
> 时间：2013-01-28T14:52:43.647
> 
> 标签：postgresql

我尝试使用我的 Windows 机器上的 postgres 用户使用 Pgadmin 登录到我的服务器。

但它一直给我这个错误：

```
psql: FATAL:  password authentication failed for user "postgres" 
```

然后我尝试使用 psql 从命令行登录，这给了我同样的错误。然后，在将 pg_hba.conf 中的本地条目放入信任之后，我使用 psql 将密码重置为“test”。然后我将条目放回 md5，并尝试使用密码“test”登录。

在 psql 中，我使用了以下命令：

```
ALTER ROLE postgres WITH PASSWORD 'test';
ALTER ROLE postgres PASSWORD 'test';
ALTER USER postgres WITH PASSWORD 'test';
ALTER USER postgres PASSWORD 'test'; 
```

还有这个特殊的 psql 命令

```
\password 
```

每次，我将 pg_hba.conf 本地条目返回给 md5，并尝试使用 psql 登录：

```
psql -U postgres 
```

然后我被要求输入密码。输入“test”后，psql 给出了与我之前提到的相同的错误。

当然，我在每次更改 pg_hba 文件后都重新启动了 postgresql。我正在使用带有'su postgres'的psql。

因此，即使我能够以通常的方式更改密码，它也不会被接受为密码。

我希望有人能够帮助我解决这个问题。

一些信息：

Postgresql 9.1 Ubuntu 12.04

Pg_hba 文件（根据要求）

```
local   all             postgres                                md5

local   all             all                                     md5
# IPv4 local connections:
host    all             all             127.0.0.1/32            md5
# IPv6 local connections:
host    all             all             ::1/128                 md5

host    all             all             <my-ip-address>/32        md5 
```

想修改密码的时候，把上面的md5改成trust。我想提一下，这个配置以前没有问题。

结果

```
sudo -u postgres psql -x -c "select * from pg_user where usename='postgres'" 
```

是：

```
usename     | postgres
usesysid    | 10
usecreatedb | t
usesuper    | t
usecatupd   | t
userepl     | t
passwd      | ********
valuntil    | 1970-01-01 00:00:00+01
useconfig   | 
```

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2013-01-28T16:13:28.180

如最新编辑所示，密码有效期至 1970 年，这意味着它目前无效。这解释了与密码错误相同的错误消息。

使用以下命令重置有效性：

```
ALTER USER postgres VALID UNTIL 'infinity'; 
```

在最近的一个问题中，另一位用户对用户帐户和 PG-9.2 有同样的问题：

[PostgreSQL - 添加组角色后密码验证失败](https://stackoverflow.com/questions/14470448/postgresql-password-authentication-fail-after-adding-group-roles/14487190)

因此，显然有一种方法可以无意中为 Unix 纪元（1970 年 1 月 1 日，该`abstime`类型的最小可能值）设置虚假密码有效性。可能是 PG 本身或某些客户端工具中存在会造成这种情况的错误。

**编辑**：原来是一个 pgadmin 错误。请参阅[https://dba.stackexchange.com/questions/36137/](https://dba.stackexchange.com/questions/36137/)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-12-29T08:59:04.557

我遇到了这个问题，这里的答案对我不起作用；我无法弄清楚为什么我无法登录并收到上述错误。

事实证明，postgresql 将用户名保存为小写，但在身份验证期间它同时使用大写和小写。

```
CREATE USER myNewUser WITH PASSWORD 'passWord'; 
```

将使用用户名“mynewuser”和密码“passWord”创建一个用户。

这意味着您必须使用“mynewuser”而不是“myNewUser”进行身份验证。对于像我这样的 pgsql 新手来说，这很令人困惑。我希望它可以帮助遇到这个问题的其他人。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-01-28T15:00:43.557

`pg_hba.conf`条目通过 IP 地址定义登录方法。您需要显示的相关部分`pg_hba.conf`才能获得适当的帮助。

更改此行：

```
host    all             all             <my-ip-address>/32        md5 
```

反映您的本地网络设置。因此，如果您的 IP 是`192.168.16.78`（C 类），掩码为`255.255.255.0`，则输入：

```
host    all             all             192.168.16.0/24        md5 
```

确保您的 WINDOWS 机器在该网络中，`192.168.16.0`然后重试。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-04-24T08:15:16.077

假设您在盒子上具有 root 访问权限，您可以执行以下操作：

```
sudo -u postgres psql 
```

如果数据库“postgres”失败，则此块不存在。

```
sudo -u postgres psql template1 
```

然后 sudo nano /etc/postgresql/11/main/pg_hba.conf 文件

```
local   all         postgres                          ident 
```

对于较新版本的 PostgreSQL，ident 实际上可能是对等的。

在 psql shell 中，您可以给 DB 用户 postgres 一个密码：

```
ALTER USER postgres PASSWORD 'newPassword'; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-25T17:17:04.317

我在 Windows 机器上遇到了同样的问题

实际上，我为另一个用户遇到了同样的错误，但问题是我的机器上安装了 Postgres 数据库，对于我正在处理的这个特定项目，我正在尝试在 docker 上使用 Postgres 图像，所以当我想运行项目我得到这个错误。最后，我发现问题在于 Postgres 服务已启动并正在运行，所以首先我必须终止它`services.msc`，然后运行项目，以便它使用 Postgres 图像。

# java - 从数据库查询结果时出现异常？

> ID：14564646
> 
> 赞同：0
> 
> 时间：2013-01-28T14:52:50.797
> 
> 标签：java, oracle, spring, hibernate

我正在使用弹簧和休眠应用程序。我正在使用 C3P0 连接池连接到 oracle 数据库。但我经常低于例外。

```
Database failure Exception 
java.net.SocketTimeoutException: Read timed out
    at java.net.SocketInputStream.socketRead0(Native Method)
    at java.net.SocketInputStream.read(Unknown Source)
    at org.apache.coyote.http11.InternalInputBuffer.fill(InternalInputBuffer.java:746)
    at org.apache.coyote.http11.InternalInputBuffer$InputStreamInputBuffer.doRead(InternalInputBuffer.java:776) 
```

它与C3P0配置有关吗？以下是 c3p0 配置：

```
<bean id="someDataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource">
            <property name="driverClass" value="${driverClassName}" />
            <property name="jdbcUrl" value="${url}" />
            <property name="user" value="${username}" />
            <property name="password" value="${password}" />
            <!-- pool sizing -->
        <property name="initialPoolSize" value="3" />
        <property name="minPoolSize" value="6" />
        <property name="maxPoolSize" value="25" />
        <property name="acquireIncrement" value="3" />
        <property name="maxStatements" value="${common.db.max.statements}" />
        <!-- retries -->
        <property name="acquireRetryAttempts" value="1" />
        <property name="acquireRetryDelay" value="1000" /> <!-- 1s -->

            <property name="preferredTestQuery" value="select sysdate from dual" />
      </bean> 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T15:17:39.850

有一些查询花费了太多时间来返回响应。异常跟踪似乎是异常响应的最终堆栈。

如果您捕获异常响应的“causedBy”跟踪，您将能够查明占用大量执行时间的确切代码逻辑。

希望这可以帮助！

# asp.net - 使用 express 2012 for web 没有更多文件错误

> ID：14564650
> 
> 赞同：1
> 
> 时间：2013-01-28T14:53:19.633
> 
> 标签：asp.net

我正在使用 Windows 7 64 位，并开始使用 Visual Studio Express 2012 for web。完成了几个教程好的，但是现在当我按 F5 并尝试加载 IE 时，我遇到了这个错误（越来越多） - 用“没有更多文件”轰炸了我已经广泛搜索并尝试了 CTRL F5，确保页面处于设计（不是源代码）中，将页面设置为启动，允许 VS2012 - 和 IE！- 通过防火墙 - 使用 BitDefender - 但没有乐趣 o:( 我什至禁用了 BD 但结果相同。我可以输入网址

本地主机：55137/Account/Login.aspx

它显示正常。有任何想法吗？

只是为了让它更加混乱，在奇怪的情况下，即使显示错误，它也会继续并在 IE 中加载页面。. . 去搞清楚！

问候投手

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-02T02:30:13.327

我知道这个问题很老了，但是我今天遇到了这个问题，刚刚发现在任务管理器中有大量的 ie 进程在附近徘徊。杀死他们解决了这个问题。

由于问题不断出现，我在桌面上放置了一个快捷方式来杀死所有 ie 进程。taskkill.exe /F /IM iexplore.exe

# silverlight - 在哪里可以找到适用于 Windows Phone 7 应用程序的 Silverlight 模板？

> ID：14564652
> 
> 赞同：0
> 
> 时间：2013-01-28T14:53:37.387
> 
> 标签：silverlight, windows-phone-7, ironruby

我需要 Silverlight 才能使用 IronRuby，因为 Silverlight 提供了 DRL。但是，我在 Visual Studio 2012 for Windows Phone 中找不到用于创建 Silverlight Windows Phone 应用程序的模板。

有人可以指点我这样的模板吗？因为 Windows Phone 上 IronRuby 的所有教程都说要使用 Silverlight。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T19:36:02.740

I just took a quick look in VS2012/Exp, all the C# Phone templates there *are* for SilverLight. They just don't say so (explicitly) any more. When you see a MainPage.xaml you're doing SL.

But do note that Project|Properties|Build also has a combobox for the target platform. If WP7 isn't in the list you'll have to install another/extra SDK.

# python - 子类化 numpy.ma.MaskedArray

> ID：14564656
> 
> 赞同：5
> 
> 时间：2013-01-28T14:53:58.900
> 
> 标签：python, numpy

我正在尝试对 numpy 进行子类化`MaskedArray`以添加属性，但似乎无法获得正确的结果。

我首先按照子类化 a[的示例](http://docs.scipy.org/doc/numpy/user/basics.subclassing.html#slightly-more-realistic-example-attribute-added-to-existing-array)`numpy.ndarray`开始，它工作正常。

然后我尝试将 a 子类`numpy.ma.MaskedArray`化，如下所示：

```
import numpy as np

class MyMaskedArray(np.ma.MaskedArray):

    def __new__(cls, input_array, info=None):
        obj = np.asarray(input_array).view(cls)
        obj.info = info
        return obj

    def __array_finalize__(self, obj):
        if obj is None: return
        self.info = getattr(obj, 'info', None)
        super(MyMaskedArray, self).__array_finalize__(obj)

arr = np.arange(5)
obj = MyMaskedArray(arr, info='information')
print obj.info
print obj[1:].info 
```

这导致

```
information
None 
```

我曾两次期待“信息”。

`obj = np.asarray(input_array).view(cls)`用`obj = np.ma.MaskedArray(input_array).view(cls)`或没有解决该问题替换该行`obj = np.ma.MaskedArray.__new__(cls, input_array)`（我走这条路，因为我想通过`*args`并`**kwargs`在`__new__`未来的子类化身中传递。）

请注意，与子类的示例相反，我还必须`MaskedArray.__array_finalize`在我的子类中添加一个调用；如果我不这样做，则找不到该属性。`__array_finalize__``ndarray``_mask`

也许有人可以启发我：

*   如何`obj[1:].info`保持原件`obj.info`

*   为什么`ndarray`不需要超类调用`__array_finalize__`，但`MaskedArray`确实需要（更多的奖励问题）。

我想继承`MaskedArray`而不是编写容器类，因为后者会失去`MaskedArray`s 带来的一些便利。

（注意：这与[这个问题](https://stackoverflow.com/questions/12597827/how-to-subclass-numpy-ma-core-masked-array)不同，因为我已经“解决”了`__init__`/`__new__`问题。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T23:53:44.133

为了让切片按您的意愿工作，您可能需要重载`__getitem__`：

```
def __getitem__(self, item):
    out = np.ma.MaskedArray.__getitem__(self, item)
    out.info = self.info
    return out 
```

同上`__setitem__`。

如果您的`info`属性相对简单，例如在您的示例中，您可能需要查看 的`_optinfo`属性`MaskedArray`，该属性是为此目的而设计的：它只是一个存储一些必须以某种方式保存的信息的字典。这是一个例子：

```
class MyMaskedArray(np.ma.MaskedArray):

    def __new__(cls, input_array, info=None):
        obj = np.asarray(input_array).view(cls)
        obj._optinfo['info'] = info
        return obj

    @property
    def info(self):
        return self._optinfo.get('info', None) 
```

请注意，这里`.info`是一个只读属性，但使其可写很简单。

**关于** `__array_finalize__`

我不确定我是否理解您的问题：`ndarray`它本身就是超类。`MaskedArray`是一个子类，`ndarray`因此需要定义一个`__array_finalize__`方法，特别是告诉如何设置掩码（通过`_mask`参数）。检查此[链接](http://docs.scipy.org/doc/numpy/user/basics.subclassing.html)以获取有关子类化的更多信息。

在您的示例中，您使用自己的属性`__array_finalize__`来设置`.info`属性。在这种情况下，您必须调用父方法`MaskedArray.__array_finalize__`，它是基本的 Python 子类化。`__array_finalize__`请注意，如果您走这条路，您不必明确定义`_optinfo`......

**笔记**

*   `__array_prepare__`and`__array_wrap__`方法实际上用于在将函数应用到子类之前准备子类的实例并`ndarray`处理函数的结果

# html - Twitter Bootstrap - 当容器有填充时输入超出范围

> ID：14564657
> 
> 赞同：1
> 
> 时间：2013-01-28T14:53:58.900
> 
> 标签：html, css, twitter-bootstrap

我的容器是`span4`，我在它上面放置了填充/边框。一切都很好，但是输入超出了范围，因为它们也有`span4`类。我提供了我的 HTML、CSS 以及显示问题的图像。

如何确保输入的宽度最大化但不超出范围？

```
<div class="span4 newsletter">
    <h3>Newsletter</h3>
    <input type="text" name="name" placeholder="Name" class="span4" />
    <input type="text" name="surname" placeholder="Surname" class="span4" />
    <input type="text" name="email" placeholder="Email" class="span4" />
    <button type="submit" class="btn btn-inverse pull-right"><i class="icon-envelope icon-white"></i>Subscribe</button>
</div> 
```

```
.newsletter {
    -moz-box-sizing: border-box;
    -webkit-box-sizing: border-box;
    box-sizing: border-box;
    padding: 12px;
    border: 1px solid #ccc;
    background-color: white;
} 
```

![在此处输入图像描述](../Images/afda8355ea51801e5e143089aef810cd.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T15:33:57.347

尝试在输入上使用“input-block-level”类而不是“span4”。

# java - 如何读取 GZIP 对象输入，Java

> ID：14564658
> 
> 赞同：1
> 
> 时间：2013-01-28T14:53:58.557
> 
> 标签：java, object, client, gzipoutputstream

我有一个我想通过套接字发送的对象。对于我得到的输出：

```
Socket s = serverSocket.accept();
ObjectOutputStream dout = new ObjectOutputStream(new GZIPOutputStream(s.getOutputStream()));
Msg m = new Msg("123", "123", karte);
dout.writeObject(m);
dout.reset(); //No I don't want to chache it 
```

对于我得到的输入：

```
Socket s = new Socket(host, port);
ObjectInputStream din = new ObjectInputStream(new GZIPInputStream(s.getInputStream()));
Msg m = (Msg)din.readObject(); 
```

Msg 对象是可序列化的。

如果我运行这段代码，我会得到一个客户端连接，服务器也会发送数据，但客户端永远不会开始读取输入

有什么建议么？

感谢所有回复

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T14:58:44.097

也许在调用 reset() 之前刷新输出流？

哦，是的，另一件事，您可能需要先关闭 GZIP 输出，我相信它不会在调用 close() 之前完成 gzip 流。在这种情况下，您可能必须关闭您要去的整个流堆栈并重新打开它。也许考虑单独处理压缩并将结果推送到输出流？

一些示例代码：

```
Socket s = serverSocket.accept();
ByteArrayOutputStream compressed = new ByteArrayOutputStream();
GZIPOutputStream compressor = new GZIPOutputStream(compressed);

Msg m = new Msg("123", "123", karte);
m.writeObject (compressor);
compressor.close();

OutputStream fout = s.getOutputStream();
fout.write (compressed.toByteArray() );
fout.close (); 
```

如果你不能关闭流，它会变得有点棘手。如果服务器没有关闭流，您就不会收到 EOS 信号。这意味着您必须在缓冲区中累积传入字节（ByteArrayOutputStream 很方便），并在字节进入时手动扫描它们以获取一些结束序列，所以你知道什么时候停止阅读并开始反序列化。

上面的代码当然没有担保人......：p

# youtube - 通过 VPN 访问 youtube API 时遇到问题

> ID：14564660
> 
> 赞同：1
> 
> 时间：2013-01-28T14:54:09.860
> 
> 标签：youtube, youtube-api, vpn, youtube.net-api

在我所在的地区无法访问 Youtube，我使用 VPN（cyberghost VPN）并使用它来访问 youtube API，具体来说，这是我请求的方式（通过 .NET 客户端库）：

下面是我的示例代码

```
YouTubeRequestSettings settings = new YouTubeRequestSettings(Config.YoutubeApplicationName, Config.YouTubeDeveloperKey, Config.YouTubeConnectionUserName, Config.YouTubeConnectionPassword);
YouTubeRequest request = new YouTubeRequest(settings);

Video newVideo = new Video();

newVideo.Title = "XXXXXXXXXXXXXX";
newVideo.Tags.Add(new MediaCategory("XXXXXXXXXXX", YouTubeNameTable.CategorySchema));
newVideo.Keywords = "xxxxx";
newVideo.Description = "XXXXXXXXXXXXXXXXXXXXXXXX";
newVideo.YouTubeEntry.Private = true;

FormUploadToken token = request.CreateFormUploadToken(newVideo); 
```

我收到一封关于“可疑登录尝试”的电子邮件，这是有道理的……因为我现在通过不同的国家/地区登录，但我认为我可以将一些 IP 列入白名单并通过……在那里找不到任何此类选项！ ！

### 问题1：

youtube 开发者帐户中是否有将 IP（一组 IP）列入白名单的选项？

### 问题2：

如果不可能，我该怎么做？（一种可能的解决方案似乎是生成“应用程序特定密码”）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T22:57:01.957

我建议切换到 OAuth 2 而不是 ClientLogin。使用 OAuth 2，您可以使用 Google 帐户在浏览器中进行一次身份验证，授权访问，然后您会取回一个令牌，该令牌可以重复用于进行 API 调用，而无需再次登录。

[https://developers.google.com/youtube/2.0/developers_guide_protocol_oauth2](https://developers.google.com/youtube/2.0/developers_guide_protocol_oauth2)

# javascript - windows Javascript 之间的共享对象

> ID：14564662
> 
> 赞同：0
> 
> 时间：2013-01-28T14:54:19.120
> 
> 标签：javascript, windows

我有一个应用程序可以在同一个域中打开多个窗口（使用 javascript）。

我想在这些窗口之间共享一些 javascript 对象（例如，一个包含一些配置的对象）。

是否可以在 javascript 中执行此操作以及如何执行此操作？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T15:07:50.407

有两种可能：本地存储和会话存储

会话存储存储会话持续时间的值，当浏览器关闭并重新打开时，该值被删除。

```
// Store value
sessionStorage.setItem('key', 'value');
//or
sessionStorage['key'] = value; 
// Retrieve value
alert(sessionStorage.getItem('key')); 
```

本地存储存储超过会话持续时间的值，即使关闭并重新打开浏览器后也可以检索该值。

```
// Store value
localStorage.setItem('key', 'value');
//or
localStorage['key'] = value; 

// Retrieve value 
alert(localStorage.getItem('key')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T15:08:36.140

使用`localStorage`with`JSON`将对象存储为字符串：

环境：

```
window.localStorage.setItem('yourKey', JSON.stringify(yourObject)); 
```

得到：

```
var yourObject = JSON.parse(window.localStorage.getItem('yourKey')); 
```

`localStorage`只要这些数据存在于同一个域中，这些数据就会在您的所有页面之间共享。

# javascript - 客户端数据存储

> ID：14564665
> 
> 赞同：0
> 
> 时间：2013-01-28T14:54:32.670
> 
> 标签：javascript, performance, html, web

我正在构建一个页面，该页面根据日期范围显示在 0 到几百行之间。当用户进入页面时，它会加载所有行并显示它们，然后用户可以根据需要过滤数据。这在 chrome 中似乎相当快，但 IE8 在某些时候变得相当慢。（不幸的是 IE8 是最重要的浏览器）

假设我在页面加载时需要整个数据，但只想显示一个子集。最好的方法是什么？

1.) 构建一个 DOM 字符串并仅将所需的行添加到“真实”DOM。
2.) 将数据保存在 localStorage 中。
3.) 从服务器生成的 JSON 对象中获取所需的数据。
4.) ???

还是用指定的查询访问服务器并只返回所需的数据总是更好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T15:55:55.313

在页面加载时渲染 DOM 中的所有行并在 JSON 数组中打印数据的必要字段。当过滤条件发生变化时，过滤 JSON 中的数据，然后使用 JSON 中的唯一标识符隐藏表中的行（只隐藏，不删除）。这样您就不必重新渲染现有行。

如果您选择 ajax 方式，最快的方式是在服务器端呈现 HTML，然后简单地用它替换表的内容。通过这种方式，浏览器从给定的字符串呈现表示，您不必遍历 JSON 数组并一一呈现。它的缺点可能是网络延迟和带宽。希望它有助于决定

# dart - 在 Dart WebUI 中，如何在加载元素时调用方法

> ID：14564670
> 
> 赞同：0
> 
> 时间：2013-01-28T14:54:44.327
> 
> 标签：dart, dart-webui, web-component

在 Dart 中，我正在尝试类似：

```
<element name="x-facet-select" constructor="SelectOptions" extends="div">
<template>
  <div>
    <select bind-value="str" on-click="update()" on-load="init()" id="outputitems" multiple="multiple"> 
```

我无法在 SelectOptions 调用中运行 on-load（或 onload，或任何东西）方法。这只是一个简单的打印 Hello World 行，用于控制台作为测试。

Dart 的 WebUI 中是否有一种方法可以在元素的初始加载时调用方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T20:40:13.957

如果要在用户更改下拉值后运行代码：

```
<select id="list" on-change="selectionChanged($event)">
  <option>one</option>
  <option>two</option>
  <option>three</option>
</select> 
```

```
class SelectOptionsComponent extends WebComponent {
  selectionChanged(Event e) {
    print(__list.value);
  }
} 
```

这就是全部。

**更新：**看起来您还想在组件准备好后运行一些代码，请尝试`inserted()`：

```
class SelectOptionsComponent extends WebComponent {
  selectionChanged(Event e) {
    print(__list.value);
  }

  inserted() {
    // populate __list here.
    (__list as OListElement).innerHtml = '<option>bar</option>'; // Just an example.
  }
} 
```

# java - 用Java通过索引结构、数据类型、检索类型等扩展PostgreSQL？

> ID：14564674
> 
> 赞同：4
> 
> 时间：2013-01-28T14:54:56.247
> 
> 标签：java, postgresql

我了解到 PostgreSQL 是用 C 编写的。我想扩展它

*   自定义索引结构
*   定制的最近邻检索（具有各种距离函数）
*   自定义数据类型

到目前为止，我一直害怕使用 PostgreSQL，因为它是用 C 编写的。但是，我在 PostgreSQL 的关于页面 ( [http://www.postgresql.org/about/](http://www.postgresql.org/about/) ) 上看到它们支持“库接口”，例如用于 Java。因此，我可以使用 Java 来实现（至少）最近邻检索和自定义数据类型（我猜不是索引结构，因为它非常低级）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T05:06:57.510

这里的答案是“这很复杂”。实际上，您可以使用过程语言（包括 pl/java）走得更远，但您永远无法获得使用 C 可以获得的灵活性。从根本上缺少的是能够在 PL/Java 中提供适当的索引支持，因为一个不能创建新的基元。更多信息，您可能想查看[我的博客](http://ledgersmbdev.blogspot.com)，尽管大多数示例都在 pl/pgsql 中。

**类型**

现在，您实际上可以使用 PL/Java（或 PL/Perl，或 PL/Python，或任何您喜欢的东西）走得很远，但有些事情将是遥不可及的。这也是对 db 中的过程语言可以实现什么以及不可以实现什么的一个非常高的概述。

有两种有效的方法可以处理过程语言中的类型。您可以使用域（基元的子类型），也可以使用复杂类型（具有属性的对象，每个属性都是另一种类型，可以是基元、域或复杂类型本身）。一般来说，在索引复杂类型本身方面你不能做太多事情，但你可以索引它们的成员。另一件不安全的事情是输出格式，但您可以提供其他功能来替换它。

例如，假设我们想要一个类型来存储 PNG 文件并为数据库中的某些属性处理它们。我们可以通过以下方式做到这一点：

```
CREATE DOMAIN png_image as bytea check value like [magic number goes here]; 
```

然后我们可以创建一堆存储过程来以各种方式处理 png。例如，我们可能会在函数 is_sunset 的顶部附近寻找橙色。我们也许可以这样做：

```
SELECT name FROM landmark l
  JOIN landmark s ON (s.name = 'San Diego City hall' 
                      and  ST_DISTANCE(l.coords, s.coords) < '20')
 WHERE is_sunset(photo)
 ORDER BY name; 
```

没有理由不能用 Java、Perl 或任何您喜欢的语言处理 is_sunset。由于 is_sunset 返回一个布尔值，我们甚至可以：

```
CREATE INDEX l_name_sunset_idx ON landmark (name) where is_sunset(photo); 
```

这将通过允许我们缓存日落照片名称的索引来加快查询速度。

在 Java 中你不能做的是创建新的原始类型。请记住，诸如索引支持之类的东西处于原始级别，因此，例如，您不能创建支持 GiST 索引的新 IP 地址类型（这不是您需要的，因为 ip4r 可用）。

因此，在您可以重用和使用已经存在的原语的范围内，您可以使用 Java 或任何您喜欢的方式进行开发。您实际上只受到可用原语的限制，并且有足够多的人用 C 编写了新的原语，您可能根本不需要接触这些原语。

**索引**

索引代码几乎只是 C 原语。您不能在过程语言中自定义索​​引行为。您可以做的是使用其他开发人员的原语等等。这是您最有可能不得不降到 C 的区域。

（更新：在我看来，可以使用`CREATE OPERATOR CLASS`and`CREATE OPERATOR`命令挂钩到现有的索引类型，以添加对基于其他 PL 函数的各种索引的支持。虽然我没有这样做的经验。）

**表现**

请记住，PL/Java 意味着您在每个后端进程中运行一个 JVM。在许多情况下，如果您可以在 pl/pgsql 中执行您想做的事情，您将获得更好的性能。当然，其他语言也是如此，因为您需要在后端进程中使用解释器或其他环境。

# c++ - “标准输出流”和“标准输出设备”有什么区别？

> ID：14564675
> 
> 赞同：2
> 
> 时间：2013-01-28T14:54:59.877
> 
> 标签：c++, c, linux, windows, winapi

互联网上的许多文章都使用“标准输入/输出/错误流”术语*，好像*每个术语都与其他文章中使用的“标准输入/输出/错误设备”术语具有相同的含义。例如，许多文章说标准输出流默认是监视器，但可以重定向到文件、打印机或其他设备。

我们以标准输出为例：

1.  标准输出流和标准输出设备有什么区别？如果有，它们之间的关系是什么？

    引用自[GetStdHandle()](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683231%28v=vs.85%29.aspx)的帮助页面，

    > “进程的标准句柄可以通过调用 SetStdHandle来*重定向，在这种情况下 GetStdHandle 返回重定向的句柄。”*

2.  究竟是重定向哪一个，是标准输出流还是标准输出设备？

3.  每个流程都有自己的标准流吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T16:15:02.737

输出设备是可以写入数据的一些逻辑实体。

输出流是到输出设备的连接。

在一个进程中，您有一个标准输出流，它连接到您的标准输出设备。这意味着将数据写入标准输出流会将其输出到标准输出设备。当然，您实际上可以在流程开始后更改流绑定到哪个设备。

要回答您的最后一个问题，答案是肯定的，每个流程都有自己的标准流。这实际上映射到哪个设备取决于操作系统以及进程的启动方式。例如，在 Linux 或 Windows 中直接从控制台启动的任何进程都默认将其标准输出流链接到该控制台。但是，可以使用“>”来重定向此流，以引用硬件设备或文件，或者通过“管道”来重定向，这可用于使一系列程序将其标准输出流重定向到彼此。

例如： `echo hi > example.txt`将使用参数“hi”启动程序“echo”并将标准输出流设置为文件“example.txt”。

类似地，每个进程也有一个标准输入流和一个标准错误（输出）流。

# asp.net - Office Web 应用程序的 JavaScript API

> ID：14564676
> 
> 赞同：2
> 
> 时间：2013-01-28T14:55:00.610
> 
> 标签：asp.net, sharepoint, ms-office

是否有适用于 Office Web Apps（特别是 Word Web App）的 JavaScript API，我可以使用它来从 Word 文档中获取通知？

我的情况是这样的：

我有一个 ASP.NET 应用程序，我想在其中使用 Word Web App（本地）显示 Word 文档。我想使用 iFrame 将文档嵌入到网页中（还没有尝试过，希望它能工作......）。

我想在用户保存文档时收到通知，这样当发生这种情况时，我可以删除 iFrame 并显示其他内容。

那可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T21:13:58.577

我最近阅读了有关此的 MSDN 文章 - [http://msdn.microsoft.com/en-us/magazine/jj891051.aspx](http://msdn.microsoft.com/en-us/magazine/jj891051.aspx)。希望有帮助。

# c - 尝试以二进制模式重新打开 tty 是否有意义？

> ID：14564683
> 
> 赞同：2
> 
> 时间：2013-01-28T14:55:21.030
> 
> 标签：c, freopen

我偶然发现了这个 C 代码。它使用 freopen 以二进制模式重新打开标准输入：

```
if (!isatty(STDIN_FILENO))
    freopen(NULL, "rb", stdin); 
```

我不明白*isatty*测试从何而来。这是否意味着重新打开终端没有意义？

省略 isatty 测试会有什么问题，离开

```
freopen(NULL, "rb", stdin); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T14:57:15.810

该`isatty()`函数是[POSIX 标准](http://linux.die.net/man/3/isatty)的。

我想这样做是有意义的，如果您想确保以二进制模式处理正在读取的文件（我认为是通过 shell 输入重定向）。

# stata - 跨列的简单计数

> ID：14564687
> 
> 赞同：1
> 
> 时间：2013-01-28T14:55:47.497
> 
> 标签：stata

在 Stata 中，如果你有这样的数据：

```
Location    Person 1 Gifts    Person 2 Gifts    Person 3 Gifts     Person 4 Gifts
   1               2                 7                 1                        
   2               4                 1                 12                  2
   3               5                 5                 5                   5
   4               4                                   1 
```

创建一个新变量“over_three_less_than_six”的最简单方法是计算每个位置有多少人提供了 3 个或更多礼物但少于 6 个。我希望它忽略缺失值。所以在上面的例子中，新列将输出：

```
over_three_less_than_six
          0
          1
          4
          1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T15:23:14.147

我请求在变量命名的风格上有所不同！我假设变量如`gift1`...`gift4`

```
gen count = 0 

quietly forval j = 1/4 { 
    replace count = count + inrange(gift`j', 3, 5) 
} 
```

另见技术的详细回顾

SJ-9-1 pr0046。. . . . . . . . . . . . . . . . . . 说Stata：Rowwise（帮助rowsort，如果安装了rowranks）。. . . . . . . . . . NJ Cox Q1/09 SJ 9(1):137--157 展示了如何利用函数、egen 函数和 Mata 进行逐行工作；引入rowsort和rowranks

.pdf 在[http://www.stata-journal.com/sjpdf.html?articlenum=pr0046免费提供](http://www.stata-journal.com/sjpdf.html?articlenum=pr0046)

```
inlist(gift`j', 3, 4, 5) 
```

也可以代替`inrange()`通话。

# android - 替换选项卡中的片段，更改所有选项卡

> ID：14564694
> 
> 赞同：0
> 
> 时间：2013-01-28T14:56:16.510
> 
> 标签：android, android-fragments, android-actionbar, fragment, android-tabs

**编辑** 我编辑了上一个问题，我解决了。非常感谢您的回复。

我有一个带有 3 个选项卡（新闻、策略和历史）的 gui，其中一个（新闻）我加载一个 ExpandableListView，当用户单击列表中的一个项目时，它会加载另一个包含所选项目详细信息的片段. 我设法使用以下代码将该选项卡中的片段替换为另一个片段：

```
 CategoryTab categories = new CategoryTab();//Fragment 2
    FragmentManager manager = activity.getFragmentManager();
    FragmentTransaction transaction = manager.beginTransaction();
    transaction.replace(this.getId(), categories, "News");
    //transaction.replace(android.R.id.content, categories, "News");
    transaction.addToBackStack(null);
    transaction.commit(); 
```

当秒片段加载到新闻选项卡中时，所有其他选项卡都会显示该片段。我正在使用这个监听器来管理标签导航

```
public static class TabListener<T extends Fragment> implements ActionBar.TabListener {
    private final Activity mActivity;
    private final String mTag;
    private final Class<T> mClass;
    private final Bundle mArgs;
    private Fragment mFragment;

    public TabListener(Activity activity, String tag, Class<T> clz) {
        this(activity, tag, clz, null);
    }

    public TabListener(Activity activity, String tag, Class<T> clz, Bundle args) {
        mActivity = activity;
        mTag = tag;
        mClass = clz;
        mArgs = args;

        // Check to see if we already have a fragment for this tab, probably
        // from a previously saved state.  If so, deactivate it, because our
        // initial state is that a tab isn't shown.
        mFragment = mActivity.getFragmentManager().findFragmentByTag(mTag);
        if (mFragment != null && !mFragment.isDetached()) {
            FragmentTransaction ft = mActivity.getFragmentManager().beginTransaction();
            ft.detach(mFragment);
            ft.commit();
        }
    }

    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        if (mFragment == null) {
            mFragment = Fragment.instantiate(mActivity, mClass.getName(), mArgs);
            ft.add(android.R.id.content, mFragment, mTag);
        } else {
            ft.attach(mFragment);
        }
    }

    public void onTabUnselected(Tab tab, FragmentTransaction ft) {          
        if (mFragment != null) {
            ft.detach(mFragment);
        }
    }

    public void onTabReselected(Tab tab, FragmentTransaction ft) {
        Toast.makeText(mActivity, "Reselected!", Toast.LENGTH_SHORT).show();
    }
} 
```

我的问题是¿为什么所有选项卡在替换完成后都显示相同的片段？和¿如何使用操作栏中提供的图标模拟后退按钮，以在新闻选项卡中再次加载片段 1？

任何帮助将不胜感激

PD：对不起我的英语

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T15:44:07.860

确保在 onActivityCreated 中或之后调用 getActivity()，因为之前它将返回 null。

Fragment 将附加到一个空活动，直到 onActivityCreated ......也就是说，如果您在 onCreate 或 onCreateView 中调用 getActivity()，它将返回 null，因为尚未创建活动。因此，请确保您在 onActivityCreated 中或之后对 getActivity() 进行了所有调用

# php - 仅按时间戳定义的时间运行一次 cronjob

> ID：14564707
> 
> 赞同：0
> 
> 时间：2013-01-28T14:56:57.040
> 
> 标签：php, timestamp, crontab

我想在时间戳定义的时间自动执行 PHP 脚本。
因此，假设我已经在另一个 PHP 脚本中计算了一个未来时间戳（例如 1359504000），而此时（类似于）一个 cronjob 应该调用另一个脚本。之后它（我目前正在考虑 conjob）应该被禁用/杀死/删除。完成此类任务的最佳方法是什么？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T15:03:43.013

我认为没有办法做到这一点。

最多您可以每分钟自动运行 cronjob 并检查您是否必须执行某些功能。这是因为 cronjob 仅用于重复任务

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T15:02:01.733

如果您要多次执行此过程，并且不需要严格的计时，则可以创建一个每 30/10/5/1 分钟（取决于您的想法）执行一次的 cronjob，它会查找时间戳并调用脚本。

# c++ - 删除默认构造函数头疼

> ID：14564709
> 
> 赞同：5
> 
> 时间：2013-01-28T14:56:58.967
> 
> 标签：c++

我的 c++ 书是这样说的（lippman，c++ Primer，第五版，第 508 页）：

> 如果类 ... 具有类型未显式定义默认构造函数**且**该成员没有类内初始化程序的 const 成员，则将合成的默认构造函数定义为已删除。（强调我的）

那么为什么这段代码会产生错误呢？

```
class Foo {
  Foo() { }
};

class Bar {
private:
  const Foo foo;
};

int main() {
  Bar f; //error: call to implicitly-deleted default constructor of 'Bar'
  return 0;
} 
```

上面的规则似乎表明它不应该是一个错误，因为 Foo 确实明确定义了一个默认构造函数。有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T15:02:20.173

修复你的错误。您需要将 Foo::Foo() 公开。

```
class Foo
{
public:
    Foo() { }
}; 
```

否则我相信它是私人的。

这是你要找的吗？

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-28T15:05:22.600

当类构造不是微不足道时，默认构造函数被省略。

这通常意味着要么有一个显式构造函数接收参数（然后你不能假设它可以在没有这些参数的情况下构造）

或者如果需要在构造中启动成员或基类之一（它们本身没有简单的构造函数）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T15:02:54.663

我认为这应该有效

```
class Foo {
  public:
  Foo() { }
};

class Bar {
public:
  Bar() : foo() {}
private:
  const Foo foo;
}; 
```

# c++ - Arduino 代码异常 - LCD 因多个“if”语句而失败

> ID：14564714
> 
> 赞同：0
> 
> 时间：2013-01-28T14:57:15.887
> 
> 标签：c++, arduino

我对一些代码和奇怪的异常有疑问。此代码放置在[Digispark](http://digistump.com/)上。Digispark 的代码大小限制为 6,010 字节。使用嵌套`if`语句时，文本不会输出到 LCD 屏幕（请参见下面的链接）。通过分别注释掉每个集合，我可以让它再次工作。

基本液晶功能：

1.  LCD 输出内部啤酒温度和环境空气温度。[http://imgur.com/S0rYvaa](http://imgur.com/S0rYvaa)
2.  LCD 清除
3.  LCD 输出目标温度和加热器（继电器）状态[http://imgur.com/OtFXG1K](http://imgur.com/OtFXG1K)

变量是浮点类型。

```
float inside_temp;
float outside_temp;
float target = 74.00;

//inside_temp and outside_temp are values from 2 ds18b20's
inside_temp = 70.70;
outside_temp = 70.81; 
```

LCD 在使用此代码时工作，并像这样注释掉它。编译后的大小为 5,928 字节。

```
if(inside_temp < target){
    //Create a limit so heater isn't crazy hot as 5 gallons takes a while to change temperature.
    // float limit = target + 1;
    // if(outside_temp > limit){
    //     digitalWrite(RELAY_PIN, LOW);
    //     lcd.print("OFF");
    // }
    // else{
    digitalWrite(RELAY_PIN, HIGH);
    lcd.print("ON");
    // }
  }
  else{
      digitalWrite(RELAY_PIN, LOW);
      lcd.print("OFF");
  } 
```

LCD 也可以使用此代码。编译后的大小为 5,590 字节。

```
// if(inside_temp < target){
    //Create a limit so the heater isn't crazy hot as 5 gallons takes a while to change temperature.
    float limit = target + 1;
    if(outside_temp > limit){
        digitalWrite(RELAY_PIN, LOW);
        lcd.print("OFF");
    }
    else{
       digitalWrite(RELAY_PIN, HIGH);
       lcd.print("ON");
    }
    // }
    // else{
    //     digitalWrite(RELAY_PIN, LOW);
    //     lcd.print("OFF");
    // } 
```

未注释时 LCD 不工作。编译后的大小为 5,992 字节。它所做的只是坐在那儿，开着背光，没有文字。[http://imgur.com/xPAzY0N,DdGdYoI](http://imgur.com/xPAzY0N,DdGdYoI)

```
if(inside_temp < target){
    //create a limit so heater isn't crazy hot as 5 gallons takes a while to change temperature.
    float limit = target + 1;
    if(outside_temp > limit){
        digitalWrite(RELAY_PIN, LOW);
        lcd.print("OFF");
    }
    else{
        digitalWrite(RELAY_PIN, HIGH);
        lcd.print("ON");
    }
}
else{
    digitalWrite(RELAY_PIN, LOW);
    lcd.print("OFF");
} 
```

我不明白为什么会这样。发生这种情况是因为我太接近最大尺寸限制了吗？我不能像这样构造代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T15:06:11.210

我认为很难以结论性的方式回答这个问题，而不能在本地进行测试。

听起来确实很可疑，当代码大小接近最大值时它会中断。另一方面，它似乎表明工具中的一个错误，如果超过某个限制，它不会“硬”破坏。

关于如何减少代码大小的一些提示：

*   不要使用`float`，因为 CPU 必须模拟它。定点格式应该适合温度。
*   分解出对 and 的函数调用`digitalWrite()`，`lcd.print()`因为函数调用会生成大量代码。

排除这些调用的一种方法是执行以下操作：

```
uint8_t relay_pin = LOW;
const char *lcd_text = "OFF";
if(inside_temp < target) {
    float limit = target + 1;
    if(outside_temp > limit) {
    }
    else {
      relay_pin = HIGH;
      lcd_text = "ON";
    }
}
digitalWrite(RELAY_PIN, relay_pin);
lcd.print(lcd_text); 
```

这利用了我们希望始终更新 LCD 和继电器的事实，因此我们始终可以调用这些函数。然后我们使用变量来保存所需的值，因为赋值通常比函数调用便宜（就代码大小而言，这里）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T16:02:28.650

不要忘记 RAM 的小尺寸，因为 Attiny85 只有 512 字节的 SRAM，而 328 的 2K。您可能只是用完了 RAM。我了解到，当它用完时，它只是坐在那里。

我建议从这个库中阅读[自述](https://github.com/mpflaga/Arduino-MemoryFree)文件以获取 FreeRAM。它提到了“.print”如何同时消耗 RAM 和 ROM。

我现在总是用

```
Serial.print(F("HELLO")); 
```

相对

```
Serial.print("HELLO"); 
```

因为它节省了 RAM，这对于 lcd.print 应该是正确的。我总是放一个

```
Serial.println(freeMemory(), DEC);  // print how much RAM is available. 
```

在代码的开头，并注意。请注意，需要有空间来运行实际代码并递归到其中。

unwind 将 .print 分解为一个实例的示例是使用变量。它实际上与 F()（旧的 getPSTR()）类似，因为它不再是 const 字符串。所以它实际上也使用了更少的内存。

# facebook - 跨应用程序共享 OpenGraph 操作类型

> ID：14564722
> 
> 赞同：0
> 
> 时间：2013-01-28T14:57:46.747
> 
> 标签：facebook, facebook-graph-api, facebook-opengraph

我目前正在尝试弄清楚应用程序是否可以共享自定义 OpenGraph 操作。

即应用程序 A 指定操作 B，具有应用程序 C 的令牌的用户是否允许发布操作 B，但出现应用程序 A 的所有相关元信息？

具体来说，我是用户登录的应用程序 C。用户将在网站 A 上执行操作，网站 A 希望我通过操作 B 在 Facebook 上发布该操作。但是，我们希望网站 A 的应用程序 A 定义操作 B ，因为它应该将流量吸引到网站 A 而不是我。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-06T06:50:06.550

几个月后回答我自己的问题：不，那是不可能的

# sql - 多个左连接之间的矛盾

> ID：14564730
> 
> 赞同：1
> 
> 时间：2013-01-28T14:58:06.833
> 
> 标签：sql, left-join

我试图理解由某些软件库自动生成的以下查询：

```
SELECT DISTINCT `t`.* FROM `teacher` AS `t` 
LEFT JOIN `rel` AS `rel_profile` 
    ON `rel_profile`.`field_id` = 2319 AND `rel_profile`.`item_id` = `t`.`id` 
LEFT JOIN `teacher_info` AS `profile` 
    ON `profile`.`id` = `rel_profile`.`related_item_id` 
LEFT JOIN `rel` AS `rel_profile_city` 
    ON `rel_profile_city`.`field_id` = 2320 AND `rel_profile_city`.`item_id` = `profile`.`id` WHERE `rel_profile_city`.`item_id` = 1 
```

有三个左连接。我理解第一个和第二个。我不明白的是第三个左​​连接：

```
LEFT JOIN `rel` AS `rel_profile_city` 
    ON `rel_profile_city`.`field_id` = 2320 AND `rel_profile_city`.`item_id` = `profile`.`id` WHERE `rel_profile_city`.`item_id` = 1 
```

该表`rel`已在第一个左连接中使用：

```
LEFT JOIN `rel` AS `rel_profile` 
    ON `rel_profile`.`field_id` = 2319 
```

现在，同一张表再次左连接，但这次连接字段的值不同：

```
LEFT JOIN `rel` AS `rel_profile_city` 
    ON `rel_profile_city`.`field_id` = 2320 
```

为什么这两个连接不矛盾？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T15:16:06.453

该查询使用别名：

```
`rel` AS `rel_profile` 
```

说要假装桌子`rel`实际上是一张叫做 的桌子`rel_profile`。然后在整个查询中使用该别名。我不确定 MySQL，但在其他一些数据库系统上，`rel`从那时起 (*) 引用表是错误的（除非有另一个连接重新引入表并且不提供别名）。

并且允许多次加入同一个表 - 只要名称（或别名）是唯一的。当您尝试构建依赖于同一个表中*多*行内容的结果时，这很有用，其中结果应该占据单行。

* * *

(*) “然后开始”是按照处理子句的顺序，而不是文本顺序。例如，您应该在子句中使用别名，`SELECT`因为即使它在文本上较早出现，它（从概念上）在`FROM`子句之后处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T15:05:18.903

彼此并不“矛盾”。想象一下，您有一张用户表，其中包含用户的人口统计和个人数据。另一个表是用户之间的“关系”。所以，在这个“关系”表中，你有列`UserId1`和`UserId2`. 如果您想要一个返回这两个用户数据的查询，您需要对`JOINS`table执行两次`Users`，每`User`列一次。这并不意味着它们相互矛盾。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T15:01:45.337

此查询将显示与**OR**`teacher`关联的行`rel``field_id = 2319` **`field_id = 2320`**

# java - 如何在 JSF 1.2 中扩展转换器

> ID：14564731
> 
> 赞同：0
> 
> 时间：2013-01-28T14:58:11.343
> 
> 标签：java, jsf, jsf-1.2

我不喜欢[`f:convertNumber`](http://docs.oracle.com/javaee/5/javaserverfaces/1.2/docs/tlddocs/f/convertNumber.html)显示 NaN ( `"\ufffd"`) 和两个无穷大 ( `"\u221e"`) 的方式。

有没有办法扩展开箱即用的转换器以注入我自己的显示逻辑？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T15:06:45.313

去做这个：

1.  创建一个扩展[NumberConverter](http://docs.oracle.com/cd/E17802_01/j2ee/j2ee/javaserverfaces/1.2/docs/api/javax/faces/convert/NumberConverter.html)的类。
2.  通过显式处理您的特殊值并推迟所有其他值来覆盖[getAsString方法。](http://docs.oracle.com/cd/E17802_01/j2ee/j2ee/javaserverfaces/1.2/docs/api/javax/faces/convert/NumberConverter.html#getAsString%28javax.faces.context.FacesContext,%20javax.faces.component.UIComponent,%20java.lang.Object%29)`super`伪代码：

    ```
    getAsString(FacesContext ctx, UIComponent component, Object value) {
        if (value is NaN) {
            return your-own-NaN-string;
        }

        if (value is infinity) {
            return your-own-infinity-string;
        }

        return super.getAsNumber(ctx, component, value);
    } 
    ```

3.  将该类注册为转换器并使用它而不是`f:convertNumber`.

# sencha-touch - 无效的配置，必须是有效的配置对象 - Sencha Touch 2.1

> ID：14564733
> 
> 赞同：0
> 
> 时间：2013-01-28T14:58:17.290
> 
> 标签：sencha-touch, sencha-touch-2.1

当我在点击按钮后尝试打开新面板时，总是会收到此错误：

`Uncaught Error: [ERROR][Ext.Container#factoryItem] Invalid config, must be a valid config object`

这是功能（位于自定义控制器中）：

```
push : function(navigationView, viewClass) {
    navigationView.push(viewClass);
} 
```

这就是它的名称（位于扩展自定义控制器的控制器类中）：

```
push(this.getNvw_main(), 'First.view.HomePage'); 
```

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T15:21:09.410

好吧，视图必须被实例化才能被推送：

```
push : function(navigationView, viewClass) {
    var view = Ext.ClassManager.instantiate(viewClass);
    navigationView.push(view);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T15:23:04.340

对于您的第二个参数，您可能应该传递一个具有如下配置的对象`{xtype:'homepage'}`：那是假设你`First.view.Homepage`有一个别名`widget.homepage`。

# java - Oracle ADF 中 Java 代码中的 URL 参数

> ID：14564734
> 
> 赞同：0
> 
> 时间：2013-01-28T14:58:26.910
> 
> 标签：java, oracle-adf

我有奇怪的问题。我有一个带有两个控件的 JSF 页面： - InputText - 按钮

```
<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<f:view xmlns:f="http://java.sun.com/jsf/core" xmlns:af="http://xmlns.oracle.com/adf/faces/rich">
<af:document title="view12.jsf" id="d1">
    <af:messages id="m1"/>
    <af:form id="f1">

        <af:inputText label="Label 1" id="it98" value="#{param.test}" editable="always"/>
        <af:commandButton actionListener="#{bindings.przekierowanie.execute}" text="przekierowanie"
                          disabled="#{!bindings.przekierowanie.enabled}" id="cb1"/>
    </af:form>
</af:document> 
```

我想用 URL 中的参数初始化 InputText（参数名称是 test - value="#{param.test}"）。在 JSF 页面中一切都很好。但是单击按钮后，我必须从 Java 代码中的 InputText 读取值，所以我有 URL：

```
http://127.0.0.1:7101/Application6-ViewController-context-root/faces/view12.jsf?test=asd 
```

单击按钮后执行的我的Java代码是：

```
public String przekierowanie() {
    Map <String,String> map=FacesContext.getCurrentInstance().getExternalContext().getRequestParameterMap();
    String tttValue=map.get("test");
    System.err.println("test:" + tttValue);
return null;
} 
```

但这不起作用......每次我点击按钮时都会得到空值。你能告诉我为什么以及如何从我的 java 函数中的 InputTex 获取这个值吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T11:38:13.953

在您的托管 Bean 中实现`PagePhaseListener`并使用以下代码访问 URL 参数。

例子：

```
public void beforePhase(PagePhaseEvent pagePhaseEvent) {
    if (pagePhaseEvent.getPhaseId() == Lifecycle.PREPARE_MODEL_ID) {
        testVar = FacesContext.getCurrentInstance().getExternalContext().getRequestParameterMap().get("test");
    }
} 
```

我正在使用 Jdev 11.1.2.0.0

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-18T18:21:54.630

可能是因为您只返回 NULL 。

```
public String przekierowanie() {
    Map <String,String> map=FacesContext.getCurrentInstance().getExternalContext().getRequestParameterMap();
    String tttValue=map.get("test");
    System.err.println("test:" + tttValue);
**return null**;
} 
```

# vb.net - 扩展方法不是类的成员

> ID：14564735
> 
> 赞同：11
> 
> 时间：2013-01-28T14:58:31.787
> 
> 标签：vb.net, visual-studio-2010, compiler-errors

一段时间以来，我一直在使用扩展方法来扩展现有类的功能。一个例子：

```
<System.Runtime.CompilerServices.Extension()> _
Public Sub DrawRoundedRectangle(graphics As Graphics, pen As Pen, x As Single, y As Single, width As Single, height As Single, radius As Single)
    graphics.DrawRoundedRectangle(pen, x, y, width, height, radius, RectangleEdgeFilter.All)
End Sub 
```

这很高兴地扩展了图形对象，以便我可以调用：`e.graphics.DrawRoundedRectangle()`

然而，Visual Studio 每隔一段时间就会报告：

> DrawRoundedRectangle 不是 System.Drawing.Graphics 的成员

这意味着我由于错误而无法构建，并且除了重新启动 Visual Studio（耗时）之外，我还没有找到克服这些错误的方法。

我在各种不同的类上有许多扩展方法（目前大约 10 种），所有这些方法同时失败，这会产生 66 个错误。

我的问题是，在创建这些扩展方法时我是否遗漏了什么，或者有什么办法可以阻止这些错误的发生？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T14:29:15.043

您是否在公共模块中定义扩展？试图“重建解决方案”，它可以解决问题吗？

# youtube-api - YouTube 嵌入/API 播放器从 HTTP -> HTTPS 重定向，API 无法访问

> ID：14564738
> 
> 赞同：2
> 
> 时间：2013-01-28T14:58:38.460
> 
> 标签：youtube-api

当我尝试将嵌入式视频加载到我的页面上时，使用以下命令：

```
<embed src="http://www.youtube.com/v/BzC135ql_wA?version=3&amp;enablejsapi=1"></embed> 
```

由于浏览器安全限制，请求会自动从 HTTP 重定向到 HTTPS，因此 API 无法访问。

这似乎与我的 Google 帐户有关，因为如果我从隐身窗口尝试，它不会重定向。然而，这让我担心——我网站的一些用户将无法按我的预期使用该页面，而且据我所知，我无法知道。

除了在 HTTPS 上托管我自己的网站之外，有什么方法可以强制使用 HTTP，或者我可以在这里做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T22:59:14.073

有许多浏览器扩展可以自动将 http:// URL 转换为 https:// 用于一组特定的域。我想你正在使用一个这样的扩展，这可以解释为什么你在隐身窗口中看不到这种行为。我无法告诉您您可能正在使用哪个扩展程序——我知道 HTTPS Everywhere 在 Firefox 上很流行，但不确定哪些在 Chrome 上常用——但请查看`chrome://extensions/`任何可能的罪魁祸首。

# php - $row['{$variable}'] 的问题

> ID：14564741
> 
> 赞同：-3
> 
> 时间：2013-01-28T14:58:43.447
> 
> 标签：php, mysql, arrays

我正在尝试创建一个多页调查，每次进入下一页时都会保存该调查。如果他们随后离开并回到起点，所有信息都会自动填充到字段中。

首先，我选择所有以前保存的数据：

```
$survey = $_GET['survey'];
$query = "SELECT * FROM data WHERE id='{$survey}'";
$result = mysql_query($query);
$row = mysql_fetch_array($result); 
```

然后稍后我使用一个循环来获取页面上的所有问题，如果它存在于 $row 数组中，则会自动填充信息。

```
$query = "SELECT * FROM questions WHERE id in (1,2,3)";
$result = mysql_query($query);
    while ($items = mysql_fetch_array($result)){
        if($items['type'] == "text"){ 
        $value = $items['name']; ?>
        <p><?php echo $items['question']; ?> <input type="text" id="<?php echo $items['name']; ?>" name="<?php echo $items['name']; ?>" value="<?php echo $row['{$value}']; ?>" /></p>
        <?php }
    } 
```

表格示例：

问题

ID，类型，名称，问题

1,text,first_name,你的名字是什么？

2,text,last_name, 你姓什么？

数据

id,first_name,last_name

1，约翰，多伊

一切似乎都在工作，除了：

```
value="<?php echo $row['{$value}']; ?>" 
```

提前致谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T14:59:47.540

抛弃引号，它们使它成为字符串文字而不是变量。（括号可能也不是必需的）：

```
value="<?php echo $row[$value]; ?>" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T15:01:08.300

这应该是，不需要`'`

```
value="<?php echo $row[$value]; ?>" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T15:05:04.477

您的问题是，您使用的单引号不执行 PHP 变量或函数，而是按原样获取文本。如果使用双引号，则 {$var} 将被视为变量。但是，在这种情况下，您根本不需要引号。

采用：

```
<?php echo $row[$value]; ?> 
```

# linux - Unix命令在目录中所有文件的顶部插入注释

> ID：14564744
> 
> 赞同：3
> 
> 时间：2013-01-28T14:58:45.037
> 
> 标签：linux, file, shell, unix, find

我想为 Unix 目录中的所有文件添加注释。如果我可以使用任何命令组合，请提出解决方案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T15:03:31.900

使用`find`和`sed`：

```
$ find . -maxdepth 1 -type f -exec sed -i '1i #comment' {} \; 
```

这会将行添加`#comment`到当前目录中所有文件的顶部

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T15:00:37.257

尝试使用简单的`shell`连接来做到这一点：

```
for i in *; do
    { echo '# this is a comment'; cat "$i"; } > /tmp/_$$file &&
    mv /tmp/_$$file "$i"
done 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T19:14:58.787

为了好玩，请尝试使用[ed](/questions/tagged/ed "显示标记为“ed”的问题")执行此操作：

```
echo $'1i\n# comment\n.\nw\nq' | ed -s file.txt 
```

*Here-doc*版本：

```
ed -s file.txt <<EOF
1i
# comment
.
w
q
EOF 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-10-21T11:12:11.570

如果您想为所有带有扩展名的文件添加注释（例如“.rb”）：

```
find . -maxdepth 1 -type f -name "*.rb" -exec sed -i '1i #comment' {} \; 
```

和递归：

```
find . -type f -name "*.rb" -exec sed -i '1i #comment' {} \; 
```

# c++ - C++ 多集迭代器排序

> ID：14564745
> 
> 赞同：0
> 
> 时间：2013-01-28T14:58:47.527
> 
> 标签：c++, sorting, iterator, multiset

我有一个 multiset `mymult`i 我根据类成员排序`m_a`。

然后我想检查所有排序的元素，如果`m_a`相邻字段的差异`mymulti`小于我给定的阈值，比如 0.001。如果是这样，那么我想更喜欢另一个类成员 m_b 较小的那个。

在这里我被卡住了，我没有使用多重集或迭代器的经验。我不知道如何比较两次迭代的迭代器。如果您能为我提供正确的代码，我将不胜感激！我的尝试，不是太多，只是我的概念：

```
 //all before I got stuck
    for(it = mymulti.begin(); it!= mymulti.end(); ++it) //or it++?
        if( (it+1)->mymulti.m_a - (it)->mymulti.m_a < 0.001)
           if ((it+1)->mymulti.m_b < (it)->mymulti.m_b)
              //swap them. but how to swap two fields in a multiset, not two multisets?
           // otherwise do nothing 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T15:14:53.937

您不能（或者如果可以，取决于您的 STL 实现，不应该）在将项目插入到 中后对其进行修改`multiset`，因为这可能会违反`multiset`. 所以交换将是一个坏主意，即使你能做到。

请参阅[https://stackoverflow.com/a/2038534/713961](https://stackoverflow.com/a/2038534/713961)和[http://www.cplusplus.com/reference/set/multiset/](http://www.cplusplus.com/reference/set/multiset/)

如果您想删除项目，请使用[`multiset::erase`](http://en.cppreference.com/w/cpp/container/multiset/erase)，它需要一个迭代器。我相信“修改”多集中项目的标准做法是删除它，然后插入修改后的版本。

作为旁注，我注意到您正在使用固定的 epsilon (0.001) 检查两个浮点数的值是否足够接近。正如[本文](http://www.altdevblogaday.com/2012/02/22/comparing-floating-point-numbers-2012-edition/)中所解释的，这仅在您比较的所有浮点数都足够小的情况下才有效。请参阅这篇文章，了解对大浮点值和小浮点值同样适用的比较。

# bash - 在 bash 中，如何获取 set -x 的当前状态？

> ID：14564746
> 
> 赞同：25
> 
> 时间：2013-01-28T14:58:48.883
> 
> 标签：bash, set, built-in

我想在我的脚本中临时设置-x，然后恢复到原始状态。

有没有办法在不启动新子外壳的情况下做到这一点？就像是

```
echo_was_on=.......
... ...
if $echo_was_on; then set -x; else set +x; fi 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-28T15:10:14.913

您可以检查 的值`$-`以查看当前选项；如果它包含一个 x，则它已被设置。你可以像这样检查：

```
old_setting=${-//[^x]/}
...
if [[ -n "$old_setting" ]]; then set -x; else set +x; fi 
```

万一你不熟悉：`${}`上面是一个[Bash Substring Replacement](https://tldp.org/LDP/abs/html/string-manipulation.html)，它接受变量`-`并替换任何不是 a`x`的东西，只留下`x`后面（或者什么都没有，如果没有 x）

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2018-06-03T16:05:54.020

```
reset_x=false
if ! [ -o xtrace ]; then
    set -x
    reset_x=true
fi

# do stuff

"$reset_x" && set +x 
```

您使用 test 测试 shell 选项`-o`（使用`[`如上或 with `test -o`）。如果`xtrace`未设置该选项 ( `set +x`)，则设置它并设置一个标志以稍后将其关闭。

在函数中，您甚至可以设置`RETURN`陷阱以在函数返回时重置设置：

```
foo () {
    if ! [ -o xtrace ]; then
        set -x
        trap 'set +x' RETURN
    fi

    # rest of function body here
} 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-01-28T15:15:04.273

或在案例陈述中

```
 case $- in
   *x* ) echo "X is set, do something here" ;;
   * )   echo "x NOT set" ;;
 esac 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2016-01-10T18:30:40.987

以下是基于[@shellter](https://stackoverflow.com/a/14565058/804678)和[@glenn jackman 的](https://stackoverflow.com/a/14574113/804678)答案的可重用函数：

```
is_shell_attribute_set() { # attribute, like "e"
  case "$-" in
    *"$1"*) return 0 ;;
    *)    return 1 ;;
  esac
}

is_shell_option_set() { # option, like "pipefail"
  case "$(set -o | grep "$1")" in
    *on) return 0 ;;
    *)   return 1 ;;
  esac
} 
```

使用示例：

```
set -e
if is_shell_attribute_set e; then echo "yes"; else echo "no"; fi # yes

set +e
if is_shell_attribute_set e; then echo "yes"; else echo "no"; fi # no

set -o pipefail
if is_shell_option_set pipefail; then echo "yes"; else echo "no"; fi # yes

set +o pipefail
if is_shell_option_set pipefail; then echo "yes"; else echo "no"; fi # no 
```

* * *

**更新**：对于 Bash，`test -o`是完成相同任务的更好方法，请参阅[@Kusalananda 的回答](https://stackoverflow.com/questions/14564746/in-bash-how-to-get-the-current-status-of-set-x#50668339)。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-01-29T01:17:11.547

还：

```
case $(set -o | grep xtrace | cut -f2) in
    off) do something ;;
    on)  do another thing ;;
esac 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-02-21T09:39:13.767

不那么冗长

```
[ ${-/x} != ${-} ] && tracing=1 || tracing=0 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-09-02T18:50:18.023

如果您对 bash 扩展（非 POSIX）没问题并且您的 bash 版本支持它，这应该可以准确回答问题。

```
[[ $- =~ x ]] && echo_was_on=true || echo_was_on=false 
```

# ember.js - ember js 比较 DOM if 语句中的值或至少在视图中与来自 DOM 的值进行比较

> ID：14564750
> 
> 赞同：1
> 
> 时间：2013-01-28T14:59:05.693
> 
> 标签：ember.js, handlebars.js, conditional-statements

我一直在尝试比较车把 if 语句中的一些值`{{#if value == 'otherValue'}}`，显然没有成功，因为车把不喜欢这样，并且需要一个字符串、布尔值或函数名。好吧，那没关系，但后来我尝试在函数中传递参数，就像你可以用`{{action}}`助手做的那样，而且那也没有锻炼，在控制台中得到了这个

`Error: assertion failed: You must pass exactly one argument to the if helper`

所以然后我决定在视图中执行此操作，即使 ember js 指出访问范围内的模板值是不寻常的，它们只提供了没有示例的糟糕段落。 [http://emberjs.com/guides/understanding-ember/the-view-layer/#toc_accessing-template-variables-from-views](http://emberjs.com/guides/understanding-ember/the-view-layer/#toc_accessing-template-variables-from-views)

所以当我尝试这样做时，我遇到了访问这些变量的问题，我尝试了这种方式`this.get('controller.templateVariables')`并通过查看的完整路径，但值要么未定义，要么`.get()`不作为方法存在。

所以此时我决定将变量保存在 DOM 数据属性中，但事实证明，`{{#view App.TabsView data-title="{{tab}}"}}`当`{{tab}}`我尝试使用`this.get('data-title')`.

留给我的唯一方法是在视图中插入其他元素并在那里存储变量，然后使用 jQuery 类选择器访问它。但是在执行函数时，DOM 中尚不存在元素`isVisible`，因此当时我无法访问值。这就解释了为什么`this.get('element')`要回归`null`。

ember js 上的类似示例大多以类似的结尾 `if (someLogic) {}`，但是当我没有可用的变量时如何执行任何逻辑。

**问题**

为了简化我的问题 - 有没有办法在 ember js 中做这样的事情？简单如

```
// have objects stored in controller
var obj = [{title:'Tab1'}, {title:'Tab2'}, {title:'Tab3'}];

// loop via them in the DOM
obj.forEach(function(tab) {
    // do this kind of comparison
    if( tab.title == currentTab() ) {
        // do something here
    }
}); 
```

如果那不可能，那么实现类似功能的另一种方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T20:23:11.730

您可以编写一个处理程序栏助手来执行此操作

```
{{activeTab tab}}

Handlebars.registerHelper('activeTab', function(tab) {

}) 
```

查看关于同一问题的问题

*   [活动标签](https://stackoverflow.com/questions/11355566/passing-data-to-ember-js-from-handlebars/11716082#11716082)

或者查看现有的助手来编写自己的

*   [绑定助手](https://github.com/emberjs/ember.js/blob/v1.0.0-pre.4/packages/ember-handlebars/lib/helpers/binding.js#L322)
*   [模板助手](https://github.com/emberjs/ember.js/blob/v1.0.0-pre.4/packages/ember-handlebars/lib/helpers/binding.js#L322)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T21:05:22.777

我认为证明这一点的最佳方式是使用我为您整理的大量评论 JSFiddle：http: [//jsfiddle.net/PbLnm/](http://jsfiddle.net/PbLnm/)

如果您不确定任何事情，请在下面提出任何问题。

确定何时添加`active`类的主要部分在计算属性中：

```
// Determine if the object we have for this view is the same as the activeTab's object. If it is the same, then this view is the current active tab.
active: function() {
    return Boolean(this.get('parentView.activeTab') == this.get('tab'));
}.property('parentView.activeTab') 
```

# function - 这是超话吗？为什么或者为什么不？

> ID：14564751
> 
> 赞同：1
> 
> 时间：2013-01-28T14:59:05.810
> 
> 标签：function, statistics, probability, discrete-mathematics

![在此处输入图像描述](../Images/48b6615f4f37601e622b80a40db94652.png)

我的印象是，如果 |B| > |A|，但我不太确定。这样的事情不能发生吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-31T11:41:04.293

我再次偶然发现了这个问题，我想我会给出一个更完整的答案。

根据定义，函数`f: X -> Y`必须遵守这样的规则，即对于每个`x`in`X`中只有一个`y`in`Y`这样的`f(x) = y`。您的示例不遵守此规定，因此不是函数。由此可见，它不可能是一个凸出。

您的示例应该称为*关系*，而不是*函数*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-17T20:23:17.850

它不是一个函数，因为你不能有一个输入指向 codomain 中的两个不同结果

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-25T23:54:51.410

我相信这个函数确实是满射的。只要对于您的 codomain 的每个成员，在您的域中都存在一个映射到它的成员，该函数就是满射的。唯一成员不是必需的。

虽然不完整，但我总是发现[http://mathsguide.org/surjections.php](http://mathsguide.org/surjections.php)是其中一些基础知识的不错资源。

# c++ - 继承的 const 属性和初始化（错误？）

> ID：14564752
> 
> 赞同：6
> 
> 时间：2013-01-28T14:59:16.043
> 
> 标签：c++, inheritance, attributes, initialization, constants

我很惊讶这段代码实际上被认为是正确的（gcc 4.2.1）：

```
class A {
public:
  const int i;
};
class B: public A {
public:
  //B() {}
}; 
```

这样我就可以让一些属性未初始化。当我尝试实例化 A 时编译器会抱怨（我当然同意），但让我实例化 B 而没有任何警告或错误！

但更糟糕的是，编译器不一致。当我取消注释 B 的空 ctor 时，编译器会在我实例化 B 时抱怨......对我来说似乎是一个错误，对吗？还是我在某个地方犯了错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T15:25:16.290

这确实是一个编译器错误，[在此处](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=52369)报告。

# jquery - 隐藏所有子 DOM 元素，直到找到

> ID：14564753
> 
> 赞同：4
> 
> 时间：2013-01-28T14:59:16.567
> 
> 标签：jquery

我想知道如何隐藏所有元素，直到找到第一个`<hr/>`. 然后循环应该停止

```
 <div class='row-father'>
   <legend> Title here </legend>
        <div class="row-fluid">...</div>
        <div class="row-fluid">...</div>
        <hr/>
        <div class="row-fluid">...</div>
        <div class="row-fluid">...</div>
        <div class="row-fluid">...</div>
        <div class="row-fluid">...</div>
        <hr/>
        <div class="row-fluid">...</div>
        <div class="row-fluid">...</div>
        <hr/>
    </div> 
```

...

```
$('.row-father').find('*').each(function(){
    if ($(this) != '<hr/>')
        $(this).hide();
}); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-28T15:01:08.137

使用这个：`$('.row-father > hr:first').prevAll(':not(legend)').hide();` 见[http://api.jquery.com/prevall/](http://api.jquery.com/prevall/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T15:08:54.150

您可以使用`.is('hr')`.

代码：

```
$('.row-father').find('*').each(function() {
     if (!$(this).is('hr')) {
         $(this).hide();
     }
     else {
         return false;
     }
}); 
```

示例可以在[这里](http://jsfiddle.net/jp2KK/)找到。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T15:24:14.683

`$('.row-father').find('hr').eq(0).prevAll('.row-fluid').hide();`

[演示](http://jsfiddle.net/jashwant/eJPQt/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T15:08:20.717

你也可以使用

`$('.row-fluid:first').nextUntil("hr").andSelf().hide();`

[http://jsfiddle.net/gDGmX/3/](http://jsfiddle.net/gDGmX/3/)

**编辑：**

如果要替换`<hr/>`为包含文本的 div，例如：

```
 <div class='row-father'>
   <legend> Title here </legend>
        <div class="row-fluid">...</div>
        <div class="row-fluid">...</div>
        <div>test</div>
        <div class="row-fluid">...</div>
        <div class="row-fluid">...</div>
        <div class="row-fluid">...</div>
        <div class="row-fluid">...</div>
        <hr/>
        <div class="row-fluid">...</div>
        <div class="row-fluid">...</div>
        <hr/>
    </div> 
```

你可以试试这段代码：

```
$('.row-fluid:first').nextUntil("div>:contains('test')").andSelf().hide(); 
```

# c++ - glutKeyboardFunc 错误

> ID：14564758
> 
> 赞同：-1
> 
> 时间：2013-01-28T14:59:32.767
> 
> 标签：c++, opengl

我有一个用于读取 .ply 文件的 opengl c++ 代码。我想阅读键盘箭头键（上、下、右、左）以在屏幕上移动一个点。我使用`glutKeyboardFunc`了函数但我有一个错误：

`Unhandled exception at 0x1000bb1e in opengl3.exe: 0xC0000005: Access violation reading location 0x00000070.`

在这条线上：

`glutKeyboardFunc(keyPressed);`

```
#include <windows.h>
#include <gl/gl.h>
#include <gl/glu.h>
#include <gl/glut.h>
 #include <iostream>
#include <stdio.h>
#include <string.h>
#include <cmath>
#include <string>
#include <conio.h>
HWND    hWnd;
HDC     hDC;
HGLRC   hRC;

// Set up pixel format for graphics initialization
void SetupPixelFormat()
{
    PIXELFORMATDESCRIPTOR pfd, *ppfd;
    int pixelformat;

    ppfd = &pfd;

    ppfd->nSize = sizeof(PIXELFORMATDESCRIPTOR);
    ppfd->nVersion = 1;
    ppfd->dwFlags = PFD_DRAW_TO_WINDOW | PFD_SUPPORT_OPENGL | PFD_DOUBLEBUFFER;
    ppfd->dwLayerMask = PFD_MAIN_PLANE;
    ppfd->iPixelType = PFD_TYPE_COLORINDEX;
    ppfd->cColorBits = 16;
    ppfd->cDepthBits = 16;
    ppfd->cAccumBits = 0;
    ppfd->cStencilBits = 0;

    pixelformat = ChoosePixelFormat(hDC, ppfd);
    SetPixelFormat(hDC, pixelformat, ppfd);
}

void InitGraphics()
{
    hDC = GetDC(hWnd);

    SetupPixelFormat();

    hRC = wglCreateContext(hDC);
    wglMakeCurrent(hDC, hRC);

    glClearColor(0, 0, 0, 0.5);
    glClearDepth(1.0);
    glEnable(GL_DEPTH_TEST);
}

// Resize graphics to fit window
void ResizeGraphics()
{
    // Get new window size
    RECT rect;
    int width, height;
    GLfloat aspect;

    GetClientRect(hWnd, &rect);
    width = rect.right;
    height = rect.bottom;
    aspect = (GLfloat)width / height;

    // Adjust graphics to window size
    glViewport(0, 0, width, height);
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    gluPerspective(45.0, aspect, 1.0, 100.0);
    glMatrixMode(GL_MODELVIEW);
}

// Draw frame
void DrawGraphics()
{
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

    // Set location in front of camera
    glLoadIdentity();
    glTranslated(0, 0, -10);

    // Draw a square
    glBegin(GL_QUADS);
    glColor3d(100, 200, 30);
    /*
    glVertex3d(-2, 2, 0);
    glVertex3d(2, 2, 0);
    glVertex3d(2, -2, 0);
    glVertex3d(-2, -2, 0);
    */

    //FILE * file = fopen("D:\\dart.ply","r");
    FILE * file = fopen("mosalas.ply","r");
        if (file!=NULL)
  {
        fseek(file,0,SEEK_END);
        long fileSize = ftell(file);
        float* Vertex_Buffer;
        try
        {
        Vertex_Buffer = (float*) malloc (ftell(file));
        }
        catch (char* )
        {
            //return -1;
        }
        //if (Vertex_Buffer == NULL) return -1;
        fseek(file,0,SEEK_SET); 

       //Faces_Triangles = (float*) malloc(fileSize*sizeof(float));
       //Normals  = (float*) malloc(fileSize*sizeof(float));

       if (file)
       {
            int i = 0;   
            int temp = 0;
            int quads_index = 0;
            int triangle_index = 0;
            int normal_index = 0;
            char buffer[1000];

            fgets(buffer,300,file);         // ply

            // READ HEADER
            // -----------------
            int TotalConnectedPoints;
            // Find number of vertexes
            while (  strncmp( "element vertex", buffer,strlen("element vertex")) != 0  )
            {
                fgets(buffer,300,file);         // format
            }
            strcpy(buffer, buffer+strlen("element vertex"));
            sscanf(buffer,"%i", &TotalConnectedPoints);

            int TotalFaces;
            // Find number of face
            fseek(file,0,SEEK_SET);
            while (  strncmp( "element face", buffer,strlen("element face")) != 0  )
            {
                fgets(buffer,300,file);         // format
            }
            strcpy(buffer, buffer+strlen("element face"));
            sscanf(buffer,"%i", &TotalFaces);

            // go to end_header
            while (  strncmp( "end_header", buffer,strlen("end_header")) != 0  )
            {
                fgets(buffer,300,file);         // format
            }
            i =0;
            float* ver0,ver1,ver2,ver3;
            //char* key[100];

            for (int iterator = 0; iterator < TotalConnectedPoints; iterator++)
            {
                fgets(buffer,300,file);

                //sscanf(buffer,"%f %f %f", &Vertex_Buffer[i], &Vertex_Buffer[i+1], &Vertex_Buffer[i+2]);
                sscanf(buffer,"%f %f %f", &ver1, &ver2, &ver3);
                glNormal3f(ver1, ver2, ver3);
                glVertex3d(ver1, ver2, ver3);

                //glVertex3f(ver1, ver2, ver3);

                i += 3;
            }

       }

}

    glPushMatrix();
glBegin;
glTranslatef(-10,5,0);
glColor3f(1,1,1);
glRotatef(90,0,1,0); 
glutSolidCone(0.25, 15, 20, 20);
glEnd();
glPopMatrix();
    //glutMouseFunc(0,0,0);

    /*
    glVertex3d(1.000000, 1.000000, 6);
    glVertex3d(3.000000, 0.000000, 4);
    glVertex3d(0.000000, 0.000000, 4);
    glVertex3d(0.000000, 3.000000, 4);
    glVertex3d(1.500000, 0.500000, 0);*/

    glEnd();

    // Show the new scene
    SwapBuffers(hDC);/**/
}
void keyPressed (unsigned char key, int x, int y) {  
}  
// Handle window events and messages
LONG WINAPI MainWndProc (HWND hWnd, UINT uMsg, WPARAM  wParam, LPARAM  lParam)
{
    switch (uMsg)
    {
    case WM_SIZE:
        ResizeGraphics();
        break;

    case WM_CLOSE: 
        DestroyWindow(hWnd);
        break;

    case WM_DESTROY:
        PostQuitMessage(0);
        break;

    // Default event handler
    default: 
        return DefWindowProc (hWnd, uMsg, wParam, lParam); 
        break; 
    } 

    return 1; 
}

int WINAPI WinMain (HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpCmdLine, int nCmdShow)
{

    const LPCWSTR appname = TEXT("OpenGL Sample");

    WNDCLASS wndclass;
    MSG      msg;

    // Define the window class
    wndclass.style         = 0;
    wndclass.lpfnWndProc   = (WNDPROC)MainWndProc;
    wndclass.cbClsExtra    = 0;
    wndclass.cbWndExtra    = 0;
    wndclass.hInstance     = hInstance;
    wndclass.hIcon         = LoadIcon(hInstance, appname);
    wndclass.hCursor       = LoadCursor(NULL,IDC_ARROW);
    wndclass.hbrBackground = (HBRUSH)(COLOR_WINDOW+1);
    wndclass.lpszMenuName  = appname;
    wndclass.lpszClassName = appname;

    // Register the window class
    if (!RegisterClass(&wndclass)) return FALSE;

    // Create the window
    hWnd = CreateWindow(
            appname,
            appname,
            WS_OVERLAPPEDWINDOW | WS_CLIPSIBLINGS | WS_CLIPCHILDREN,
            CW_USEDEFAULT,
            CW_USEDEFAULT,
            800,
            600,
            NULL,
            NULL,
            hInstance,
            NULL);

    if (!hWnd) return FALSE;

    // Initialize OpenGL
    InitGraphics();

    // Display the window
    ShowWindow(hWnd, nCmdShow);
    UpdateWindow(hWnd);
    DrawGraphics();
    // Event loop
    int key;
    int asgh = 0;
    POINT pt;
    /**/while (1)
    {
        if (PeekMessage(&msg, NULL, 0, 0, PM_NOREMOVE) == TRUE)
        {
            if (!GetMessage(&msg, NULL, 0, 0))
                return TRUE;

            TranslateMessage(&msg);
            DispatchMessage(&msg);
        }

        glutKeyboardFunc(keyPressed);
        DrawGraphics();
    }

    wglDeleteContext(hRC);
    ReleaseDC(hWnd, hDC);

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T15:02:54.557

您发布的程序缺少对`glutInit()`.

此外，您正在执行 GLUT 应该抽象出来的所有特定于平台的窗口管理和上下文创建。

底线：如果您想使用 GLUT，请使用 GLUT。如果要使用 Win32，请使用 Win32。不要试图混搭。

# .net - 通过网络发送字符串数组

> ID：14564759
> 
> 赞同：0
> 
> 时间：2013-01-28T14:59:35.637
> 
> 标签：.net, arrays, vb.net, string, tcpclient

我正在尝试在字符串格式的列表视图中检索用户名。我想要做的是检索这些用户名并将它们存储在一个字符串数组中并通过网络发送它们，以便接收部分可以提取它们并将这些用户名放在列表视图中。

但问题是，我在通过网络发送字符串数组时遇到了麻烦。我知道如何通过网络发送字符串，但我不知道如何通过网络发送字符串数组。

我在想的是，也许我应该使用循环来存储和提取字符串？但我不知道该怎么做。

**这是我的发送代码。**

```
'Say, this array contains the following strings
Dim strData() As String = {"Dog", "Cat", "Mouse"}

If networkStream.CanWrite Then

       'This is not the proper way. What should I do here?
       Dim SentData As Byte()

       SentData = Encoding.ASCII.GetBytes(strData)

       NetworkStream.Write(SentData, 0, SentData.Length())

End If 
```

**这是我的接收代码。**

```
Dim rcvData() As String

If networkStream.CanWrite Then

       'Again, I don't think this is the proper way of handling an array of strings.
       Dim ByteData(ClientSocket.ReceiveBufferSize) As Byte

       NetworkStream.Read(ByteData, 0, CInt(ClientSocket.ReceiveBufferSize))

       rcvData = Encoding.ASCII.GetString(ByteData)

End If 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T15:13:10.627

ASCII.GetBytes 没有接受字符串数组的重载。在转换数据之前，您需要加入您的字符串数组，然后发送一个字符串。

```
Dim strData() As String = {"Dog", "Cat", "Mouse"}

If networkStream.CanWrite Then

   Dim toSend = String.Join(";", strData)
   Dim SentData As Byte()
   SentData = Encoding.ASCII.GetBytes(toSend)
   NetworkStream.Write(SentData, 0, SentData.Length())
End If 
```

当然，在接收端你应该分离收到的字符串

```
 Dim rcvData As String

 If networkStream.CanRead Then
     Dim bytesReceived As Integer = 0
     Dim ByteData(ClientSocket.ReceiveBufferSize) As Byte
     Do
         bytesReceived = networkStream.Read(ByteData, 0, CInt(ClientSocket.ReceiveBufferSize))
         rcvData = rcvData + Encoding.ASCII.GetString(ByteData, 0, bytesReceived)
     Loop While networkStream.DataAvailable
     Dim strData = rcvData.Split(";")
 End If 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T15:02:07.037

您知道如何发送单个字符串，但不知道它们的数组吗？因此，将数组编码为字符串，然后*发送*. 尝试[JSON](http://en.wikipedia.org/wiki/Json)（请参阅[如何在 VB.NET 中对数组进行 JSON 编码？](https://stackoverflow.com/questions/579053/how-can-i-encode-an-array-in-vb-net-to-json)）或[XML](http://en.wikipedia.org/wiki/XML)。

# iphone - animateWithDuration: 破坏平滑的进度条增量

> ID：14564761
> 
> 赞同：7
> 
> 时间：2013-01-28T14:59:44.047
> 
> 标签：iphone, ios, nsthread, uiviewanimation, uiprogressview

在我的一个观点中，我需要为 UIImageView 的框架属性设置动画，并且在执行此操作时，我想在导航栏的标题视图中显示进度条（UIProgressView）。问题是如果我注释掉以下动画块进度条按预期顺利更新。另一方面，由于以下动画，进度条在几个地方停止并再次增加。

```
//add message bubble
[UIView animateWithDuration:0.3
                      delay:0
                    options:UIViewAnimationOptionAllowUserInteraction
                  animations:^
 {
     animationBubbleImageView.alpha = 1;
 }
                 completion:^(BOOL finished)
 {
     [self removeAutoCorrectionAndHighlight];
     [UIView animateWithDuration:0.3
                           delay:0
                         options:UIViewAnimationOptionAllowUserInteraction
                      animations:^
      {
          CGRect bubbleFrame = CGRectMake(animationBubbleImageView.frame.origin.x,
                                          animationBubbleImageView.frame.origin.y,
                                          bubbleSize.width,
                                          bubbleSize.height);

          [animationBubbleImageView setFrame:bubbleFrame];
          messageLabel.alpha = 1;
      }
                      completion:^(BOOL finished)
      {
          [self sendSubviewToBack:textView];
          [self.delegate moveBubbleToTableCell];
      }];
 }]; 
```

动画块不会阻塞主线程，但进度视图不流畅的原因是什么？

**更新**：我想要实现的是 IOS 中的 MessagesApp 气泡动画。当输入的消息变成气泡并飞到它的位置时，进度条应该缓慢增加。

如果我在没有动画进度条增量正常的情况下尝试相同的操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T13:22:20.533

尝试将进度条动画与气泡动画放在同一动画中。或者将它们全部放入一个动画组中。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-12T07:50:23.370

您是否尝试过 Instruments 来查看发生了什么？

疯狂猜测：您还可以检查两个视图是否在不经意间重叠。

如果可行，您还可以尝试按照“爸爸”的建议将动画组合在一起。

最好的，阿科斯

# silverlight - 如何使用 WebClient 在 Web 服务器上写入文件

> ID：14564767
> 
> 赞同：0
> 
> 时间：2013-01-28T15:00:04.560
> 
> 标签：silverlight, webserver

我正在使用以下代码在异步（Silverlight 4）上下文中将简单文件写入 Web 服务器：

```
 public void WriteToServerAsync(string _input, Uri _uri, Action<bool> _writeComplete)
    {
        var client = new WebClient();
        var bytes = Encoding.UTF8.GetBytes(_input);
        var inputStream = new MemoryStream(bytes);
        client.OpenWriteCompleted += (s, e) =>
        {
            var buffer = new byte[4096];
            var bytesRead = 0;
            while ((bytesRead = inputStream.Read(buffer, 0, buffer.Length)) != 0)
            {
                e.Result.Write(buffer, 0, bytesRead);
            }
            e.Result.Close();
        };
        client.WriteStreamClosed += (s, e) =>
        {
            _writeComplete(e.Error == null);
        };
        client.OpenWriteAsync(_uri);
    } 
```

我用它来称呼它

```
 public void TestWriteToServer()
    {
        var uri = new Uri( GetAppSetting( "MLCalculations" ) );
        WriteToServerAsync("This is some stuff to write", uri, (b) =>
        {
            // All done!
        });
    } 
```

从 GetAppSetting 调用返回的字符串看起来像

```
http://servername/MainDirectory/Writeable/TestFile.txt 
```

我遇到的问题是在 client.WriteStreamClosed 事件处理程序中，其中 e.Error 有“远程服务器返回错误：NotFound。”

在 Web 服务器上，有一个文件结构 C:\inetpub\wwwroot\MainDirectory\Writeable。MainDirectory 文件夹上的安全性表明 IIS_IUSRS 具有完全控制权，Writeable 文件夹也有，尽管 MainDirectory 上的复选标记是粗体，而在 Writeable 上它们是灰色的。

我还尝试将“原始”文件放入目标目录，以防它是“创建”问题”，但我得到了相同的结果。

我对 WebClient.OpenReadAsync 没有任何问题。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T20:16:18.767

对您的文件夹权限的灰色检查仅表示这些权限是从父文件夹继承的。

10 次中有 9 次，臭名昭著的“未找到”错误是由异常服务器端引起的。如果您检查 IIS 日志，您可能能够找到状态码为 500（服务器错误）的条目。

你能调试网络服务吗？如果没有，您能否对其进行编辑以提供额外的跟踪。该错误几乎可以肯定是由服务本身的异常引起的，因此一旦您在服务器端跟踪了错误，您就会顺利进行。

如果您无法弄清楚，也许您可​​以发布 Web 服务的代码？

# c++ - cin条件检查错误

> ID：14564771
> 
> 赞同：3
> 
> 时间：2013-01-28T15:00:17.680
> 
> 标签：c++

我是一个学习c ++的初学者程序员。我对 cin 命令有一个烦人的问题。在下面的程序部分，如果我在第一个 cin 命令中输入了错误的类型，程序将根本不会执行以下任何 cin 命令，但会执行程序的其余部分。

```
//start
#include <iostream>
using namespace std;
int main()
{
    int x=0;
    cout << endl << "Enter an integer" << endl;

    //enter integer here. If wrong type is entered, goes to else
    if (cin >> x){
            cout << "The value is " << x << endl;
    }
    else {
         cout << "You made a mistake" << endl; //executes
         cin.ignore();
         cin.clear();
    }
    cout << "Check 1" << endl; //executes
    cin >> x;                  //skips
    cout << "Check 2" << endl; //executes
    cin >> x;                  //skips
    return 0;                  
}
//end 
```

而不是 if else ，如果我将相同的概念放在循环中 while (!(cin >> x)) 程序在输入错误的输入时进入无限循环。请帮我解释这种现象，因为我所遵循的教科书说上面输入的代码应该按预期工作。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T16:41:09.457

`cin`是输入流。如果发生错误`cin`进入我们称之为“错误发生”状态。虽然在此状态下无法进行字符输入，但您从输入流中收集字符的请求将被忽略。随着`clear()`您清除错误，输入流将停止忽略您。

这是忽略函数原型

```
istream&  ignore ( streamsize n = 1, int delim = EOF ); 
```

此函数从输入流中获取字符并丢弃它们，但如果您的流忽略您，您将无法获取任何字符，因此您必须先`clear()`输入流然后再输入`ignore()`它。

另外，请注意：如果有人输入，例如`"abc"`，在第一个输入请求中，您`cin`只会得到一个字符，该字符`'a'`留`"bc"`在缓冲区中等待被拾取，但下一次调用`cin`获取`'b'`并`'c'`留在缓冲区中，因此您再次遇到错误。

这个例子的问题是`cin.ignore()`if no arguments 被传递给它只会忽略 you 之后的 1 个字符`clear()`。第二个`cin`得到了`'c'`，所以你仍然有问题。

这个问题的一般解决方案是调用

```
cin.ignore(10000, '\n'); 
```

第一个数字必须是一个你不希望有人输入的巨大数字，我通常输入 10000。

此调用确保您从错误输入中拾取所有字符，或者确保在按下输入之前拾取每个字符，这样您的输入流不会两次进入“错误发生”状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-29T02:41:05.567

您可能还想尝试 if ( std::cin.fail() )

作为备份，以防止在提示时输入错误类型而导致崩溃

# api - 谷歌 OAuth 混淆

> ID：14564774
> 
> 赞同：2
> 
> 时间：2013-01-28T15:00:31.703
> 
> 标签：api, content-management-system, oauth-2.0

我想将我们网站的谷歌帐户中的谷歌日历和分析集成到我们网站的内容管理系统中。因此，我们的 cms 无需请求用户登录即可访问日历和分析。

我对总是谈论使用您的个人 Google 帐户重定向、登录和授予权限的文档感到困惑。

有人能指出我正确的方向吗，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T07:37:56.810

OAuth 是一种允许其他应用程序访问其他应用程序受保护资源的机制。在您的情况下，您的网站想要访问 Google 帐户的受保护资源。OAuth 分多个步骤执行此操作，但步骤可总结如下：

1.  您的应用程序向 OAuth 服务器（在您的情况下是 Google）发送访问某些特定受保护资源的请求。此时，您将控制权转移到 OAuth 服务器；换句话说，您正在重定向到 OAuth 服务器。
2.  OAuth 服务器然后显示一个页面，在该页面中它向用户显示正在请求的资源列表。然后，用户可以选择是否允许应用程序（它启动到 OAuth 服务器的重定向）访问列出的资源。
3.  如果用户选择*不*授予应用程序对所列资源的访问权限，则工作流程结束。
4.  如果用户*确实*允许访问列出的资源，OAuth 服务器将重定向回应用程序，同时发送一个 OAuth 令牌和重定向。
5.  一旦控制权被转移回应用程序，它就会从请求中提取令牌。请记住，此令牌是由 OAuth 服务器颁发的。
6.  应用程序现在可以通过随每个请求发送令牌来访问 OAuth 服务器上请求的受保护资源。OAuth 服务器将识别它刚刚发出的令牌并返回被请求的受保护资源。

描述此工作流程的一个不错的页面是：[http ://hueniverse.com/2007/10/beginners-guide-to-oauth-part-ii-protocol-workflow/](http://hueniverse.com/2007/10/beginners-guide-to-oauth-part-ii-protocol-workflow/)

当然，您还应该查看[Google 的 OAuth 文档](https://developers.google.com/adsense/management/tutorials/oauth-generic)。他们甚至有一个不错的[OAuth 游乐场](https://developers.google.com/oauthplayground/)，您可以在其中使用 Google 提供的 OAuth 功能。

# android - Android ProgressBar 从非Activity类开始

> ID：14564788
> 
> 赞同：1
> 
> 时间：2013-01-28T15:01:14.997
> 
> 标签：android, android-activity, android-progressbar

我正在使用在它自己的类中定义的自定义 OnClickListener 创建一个 android 应用程序。问题是当我想在标题栏中创建 Indeterminate Progress Bar 时，它将在调用 onClick 方法时启动。我无法从 MyOnClickListener 类中设置ProgressBarIntederminateVisibility，因为它不是主要活动，我无法请求 getParent，因为它不是活动。

```
public class MyOnClickListener implements OnClickListener {
    private message;

    public MyOnClickListener(Context context,TextView mstatus, TextView message) {
        this.message=message;
    }

    @Override
    public void onClick(View v) {
        int id = v.getId();
        switch (id){
        case R.id.next:
            this.message.setText(GetValue.getNextValue());//during this operation I want progress bar to be spinning
            Log.v("MyOnClickListener", "next pressed");
            break;
        case R.id.prev:
            this.message.setText(GetValue.getPrevValue());
            Log.v("MyOnClickListener","prev pressed");
            break;
        case R.id.last:
            this.message.setText(GetValue.getlastvalue());
            break;
        default: break;
        }

    }

} 
```

我能做些什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T15:05:33.680

通常，您会将其作为 Activity 的内部类，然后隐式引用您的“外部”Activity 类。作为替代方案，您当然可以在构造侦听器对象时传递对 Activity 的引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-08T08:52:39.583

万一它对其他人有帮助，我有一个调用非活动类的活动，该类从服务器下载 xml 数据文件。我想显示一个进度指示器。我是这样做的（这不是类的完整实现，但应该给出一个好主意）：

```
 /*Setup Activity Class */
            public class MySetup extends Activity implements ThreadCompleteListener{
                Button btnLogin, btnItems, btnConfig, btnStart;
                ProgressDialog pDialog;
            @Override
            protected void onCreate(Bundle savedInstanceState) {
                super.onCreate(savedInstanceState);
                setContentView(R.layout.setup_activity);
                //set up links to buttons, etc
             }

           public void onBtnClicked(View v){
            Intent intent;
            switch(v.getId()){
                case R.id.btn_download_items: 
                    final Context ctx = this;
                    startProgressIndicator(); 
                    //async read a list of items from a server
                    myList=ItemsList.getItemsListInstance(ctx);
                    btnConfig.setEnabled(true);
                    break;
              //other options here 
           }
        }

        public void startProgressIndicator(){
           pDialog = new ProgressDialog(this);
           pDialog.setMessage("Downloading items...");
           pDialog.setIndeterminate(false);
           pDialog.setCancelable(false);
           pDialog.show();
       }

       public void endProgressIndicator(){
         pDialog.dismiss();
      }

} 
```

然后在我的非活动课上-我下载

```
 public class ItemsList implements ThreadCompleteListener{
            //create a list of MyItem
            private ArrayList<MyItem> items = new ArrayList<MyItem>();
            //create a single static instance
            private static ItemsList itemsListInstance;
            String baseUrl; //to connect to webservice
            Context ctx;

            public ItemsList(Context context){
                readJSONFeed("http://someurl/", context);
                ctx=context;        
            }

        public  void readJSONFeed(String theURL, Context context) {
                //Read JSON string from URL

                final Context ctx = context;
                setBaseUrl(); 
                //NotifyThread is a class I found in a Stack Overflow answer
                //that provides a simple notification when the async process has completed
                NotifyThread getItemsThread = new NotifyThread(){
                     @Override
                     public void doRun(){
                         try {
                             //do the JSON read stuff here...
                         }catch (Exception e) {
                         } 
                     };
                     getItemsThread.addListener(this);
                     getItemsThread.start();
                }

//Overload the NotifyThread method 
                public void notifyOfThreadComplete(final Thread thread){
                //CALL the method in the calling activity to stop the progress indicator
                    ((MySetup)ctx).endProgressIndicator();
               }

            public  static AuctionItemsList getItemsListInstance(Context context)         {
                if (itemsListInstance == null){
                    itemsListInstance = new itemsList(context);
                }
                return itemsListInstance;
            }
    } 
```

# git - 如何从远程 rm 文件

> ID：14564789
> 
> 赞同：0
> 
> 时间：2013-01-28T15:01:19.507
> 
> 标签：git

我已将提交的文件推送到远程服务器主机。但是这些文件是我需要删除的。如何从远程服务器中删除文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T15:27:04.847

如果您推送了不想出现在历史记录中的内容（密码、咒骂等），您也可以重新编写历史记录。但这应该只是一种紧急措施，如果人们已经从那个分支中撤出，他们可能会生你的气。在本地，您可以`git rebase -i`用来修改您的历史记录，然后使用`git push REMOTE +BRANCH`(where`REMOTE`和`BRANCH`分别引用远程和分支名称) 推送它。如果要删除远程分支，请使用`git push REMOTE :BRANCH`. 请注意，根据您在服务器上的权限（例如由 gitolite 实现），您无法重写服务器上的历史记录。

如果是您推送的密码，请务必更改它们，人们可能已经看到它们！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T17:05:06.760

有两种方法可以做到。
一：
在你的本地目录中操作。 #或者你使用的分支
**`git rm FILENAME`**
**`git commit -m "WRITE SOMETHING"`**
**`git push origin master`**

二：
在您的本地目录类型流中： #或您使用的分支
**`git remote rm FILENAME`**
**`git commite -m "WRITE SOMETHING"`**
**`git push origin master`**

# ios - 获取麦克风音量并在仪表上显示值

> ID：14564798
> 
> 赞同：0
> 
> 时间：2013-01-28T15:02:05.820
> 
> 标签：ios, audio

我想创建一个应用程序来测量 iPad 上的声音输入。

用户必须对着 iPad 麦克风尖叫，然后仪表会显示尖叫声级。所以我将不得不获取麦克风音量并在仪表上显示值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T15:34:52.540

你可以使用`AVAudioRecorder`它。看看这个教程：[教程：检测用户何时对麦克风吹气](http://mobileorchard.com/tutorial-detecting-when-a-user-blows-into-the-mic/)

在[Apple 的文档](https://developer.apple.com/library/mac/#documentation/AVFoundation/Reference/AVAudioRecorder_ClassReference/Reference/Reference.html)中，重点关注：

**使用音频电平表**

*   `meteringEnabled` 财产
*   `updateMeters`
*   `peakPowerForChannel:`
*   `averagePowerForChannel:`

# c# - 删除 HttpApplication 上的单个特定无主事件订阅

> ID：14564802
> 
> 赞同：1
> 
> 时间：2013-01-28T15:02:19.317
> 
> 标签：c#, asp.net, reflection, event-handling

[这与我不久前打开的](https://stackoverflow.com/questions/3980025/where-exactly-does-forms-authentication-exist-in-the-http-pipeline)一个问题半相关。ASP.NET Forms Authentication 模块的行为方式是它注册订阅`app.AuthenticateRequest`和`app.EndRequest`Forms auth 劫持 EndRequest 的方式非常糟糕，并且是一个糟糕的设计决策，使 Forms Auth 扩展非常复杂。目前我有一个讨厌的实现，它阻止重定向做我想做的事。我从来没有对此感到满意，今天我突然想到查看这段代码有没有办法可以解开

`app.EndRequest += new EventHandler(this.OnLeave);`

我看到有关于[如何从控件中删除所有事件处理程序](https://stackoverflow.com/questions/91778/how-to-remove-all-event-handlers-from-a-control)的潜在相关答案，但这些答案的实现似乎差异很大，并且似乎它们可能只与`Control`继承者相关。

这个最重要的部分是删除 1 个特定的事件订阅，而不是一揽子核弹。我想任何可以获得订阅、将它们全部核对然后允许我重新订阅所有其他人的解决方案同样有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T17:52:12.937

这样的事情应该可以解决问题：

```
var formsModule = application.Modules.OfType<FormsAuthenticationModule>().FirstOrDefault();
if (formsModule != null)
{
   const BindingFlags flags = BindingFlags.Instance | BindingFlags.NonPublic;
   var method = typeof(FormsAuthenticationModule).GetMethod("OnLeave", flags);
   var handler = (EventHandler)Delegate.CreateDelegate(typeof(EventHandler), formsModule, method);
   application.EndRequest -= handler;
} 
```

# android - 如何获取特定网址的推文？

> ID：14564805
> 
> 赞同：0
> 
> 时间：2013-01-28T15:02:20.300
> 
> 标签：android, twitter, capture

我想要一些资源，它可以引导我捕获仅针对特定链接的推文。假设我将捕获所有包含链接[http://aaa.com](http://aaa.com)的推文， 我该怎么做？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T15:44:54.127

[在此处](https://dev.twitter.com/)阅读有关 Twitter API的信息，但更好的库是[Twitter4J](http://twitter4j.org/en/index.html)。

在这里，您有代码示例：

*   添加新推文：

    ```
    Twitter twitter = TwitterFactory.getSingleton();
    Status status = twitter.updateStatus(latestStatus);
    System.out.println("Successfully updated the status to [" + status.getText() + "]."); 
    ```

*   获取时间线：

    ```
     Twitter twitter = TwitterFactory.getSingleton();
       List<Status> statuses = twitter.getHomeTimeline();
      System.out.println("Showing home timeline.");
       for (Status status : statuses) {
          System.out.println(status.getUser().getName() + ":" +
                           status.getText());
    } 
    ```

*   使用 OAuth 登录 Twitter（Java 代码，编辑它）：

    ```
    Twitter twitter = TwitterFactory.getSingleton();
    twitter.setOAuthConsumer("[consumer key]", "[consumer secret]");
    RequestToken requestToken = twitter.getOAuthRequestToken();
    AccessToken accessToken = null;
    BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
    while (null == accessToken) {
      System.out.println("Open the following URL and grant access to your account:");
      System.out.println(requestToken.getAuthorizationURL());
      System.out.print("Enter the PIN(if aviailable) or just hit enter.[PIN]:");
      String pin = br.readLine();
      try{
         if(pin.length() > 0){
           accessToken = twitter.getOAuthAccessToken(requestToken, pin);
         }else{
           accessToken = twitter.getOAuthAccessToken();
         }
      } catch (TwitterException te) {
        if(401 == te.getStatusCode()){
          System.out.println("Unable to get the access token.");
        }else{
          te.printStackTrace();
        }
      }
    }
    //persist to the accessToken for future reference.
    storeAccessToken(twitter.verifyCredentials().getId() , accessToken);
    Status status = twitter.updateStatus(args[0]);
    System.out.println("Successfully updated the status to [" + status.getText() + "].");
    System.exit(0); 
    ```

    }

    private static void storeAccessToken(int useId, AccessToken accessToken){ //存储 accessToken.getToken() //存储 accessToken.getTokenSecret()

    *   获取推文：

        ```
        Twitter twitter = TwitterFactory.getSingleton();
        Query query = new Query("source:twitter4j yusukey");
        QueryResult result = twitter.search(query);
        for (Status status : result.getStatuses()) {
            System.out.println("@" + status.getUser().getScreenName() + ":" + status.getText());
        } 
        ```

我希望我有所帮助。

来源：http: [//twitter4j.org/en/code-examples.html](http://twitter4j.org/en/code-examples.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T15:34:30.263

看看 Twitter API。[https://dev.twitter.com/](https://dev.twitter.com/)

事实上，这个问题有点过于开放，无法轻易回答。本质上，您将使用 API 来拉取给定的推文，然后使用您自己的一些代码来解析您想要检查的 URL，然后最后对 URL 或推文做一些事情。

请做一些研究，然后再提出一个更具体的问题。

# django - 在 Django 中连接两个视图

> ID：14564806
> 
> 赞同：0
> 
> 时间：2013-01-28T15:02:20.503
> 
> 标签：django, forms, hash, django-views, preview

我想确保我的访问者（未经过身份验证的用户）在不直接来自“先前视图”的情况下无法访问特定视图。我不得不手动创建表单预览和确认状态。这是提交和预览之间的步骤，以及预览和确认我想“保护”。

表单提交视图 -> 预览视图 -> 确认视图。

有什么方法可以创建一个唯一的哈希，发布它，并检查它是否正确，或者在某种程度上生成一个 cookie、会话——或者其他任何感觉聪明的东西？

我是 Django 初学者（一般是编程初学者），任何片段或指出我正确的方向都将非常感激！

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T16:38:22.443

我能想到的至少有两种方法可以做到这一点：

一种是在您的表单或查询字符串值中包含一个隐藏字段，其中包含您想要在下一个视图中获取的哈希/唯一值。如果它不存在或不正确，请重定向。

另一种方法是检查 request.META 中的引用 URL，以查看它们是否来自您希望它们首先进入的视图，并从表单提交中保存会话值以执行其余视图。如果不存在，请重定向。如果引用 URL 不是您所期望的，请重定向。

无论您使用 cookie、会话、查询字符串参数还是隐藏表单帖子，它们都在做同样的事情 - 验证值是否存在。无论哪种方法效果最好，对于您作为该应用程序的开发人员和最有可能的维护者来说最有意义的方法。

# python - Python - 将 Spynner 窗口设置为特定大小

> ID：14564809
> 
> 赞同：0
> 
> 时间：2013-01-28T15:02:24.280
> 
> 标签：spynner, python, qt, spynner

在 python 中使用[spynner](/questions/tagged/spynner "显示标记为“spynner”的问题")，我正在寻找将窗口大小设置为`spynner] Webview? I've looked through the`Qt Python 的正确方法`Documentation and there does seem to be a way have a fixed size, but can't figure out how it implements in to`。任何帮助表示赞赏。

[http://doc.qt.io/qt-4.8/qwidget.html#setFixedSize](http://doc.qt.io/qt-4.8/qwidget.html#setFixedSize)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T15:07:43.340

尝试这样做：

```
browser = spynner.Browser()
browser.debug_level = spynner.DEBUG
browser.create_webview()
browser.show()
# now maximize the webview
browser.webview.showMaximized() 
```

请参阅[如何设置 spynner python 模块的 GUI 大小？](https://stackoverflow.com/questions/11004973/how-can-i-set-gui-size-of-spynner-python-module)

# linq - 逐项列表比较，使用结果更新每个项目（没有第三个列表）

> ID：14564810
> 
> 赞同：0
> 
> 时间：2013-01-28T15:02:25.993
> 
> 标签：linq, list, collections, compare

到目前为止，我在比较对象列表的研究中发现的解决方案通常会生成一个新的对象列表，比如那些存在于一个列表中但不存在于另一个列表中的项目。就我而言，我想比较两个列表以发现其键存在于一个列表中而不存在于另一个列表中的项目（比较两种方式），并且对于在两个列表中找到的那些键，检查值是相同还是不同。

被比较的对象有多个构成键的属性，加上一个构成值的属性，最后还有一个描述比较结果的枚举属性，例如，{Equal, NotEqual, NoMatch, NotYetCompared}。所以我的对象可能看起来像：

```
class MyObject
{
   //Key combination
   string columnA;
   string columnB;
   decimal columnC;

   //The Value
   decimal columnD;

   //Enum for comparison, used for styling the item (value hidden from UI)
   //Alternatively...this could be a string type, holding the enum.ToString()
   MyComparisonEnum result;
} 
```

这些对象被收集成两个`ObservableCollection<MyObject>`进行比较。当绑定到 UI 时，网格行的样式基于 caomparison 结果枚举，因此用户可以很容易地看到新数据集中有哪些键，但旧数据集中没有，反之亦然，以及两个数据集中的键不同的价值。两个列表都以数据网格的形式呈现在 UI 中，行的样式基于比较结果。

LINQ 是否适合作为有效解决此问题的工具，或者我应该使用循环来扫描列表并在找到密钥时中断等等（这样的解决方案自然来自我的程序编程背景）......或其他方法？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T15:10:27.260

您可以使用[`Except`](http://msdn.microsoft.com/en-us/library/bb300779.aspx)和[`Intersect`](http://msdn.microsoft.com/en-us/library/bb460136.aspx)：

```
var list1 = new List<MyObject>();
var list2 = new List<MyObject>();
// initialization code 
var notIn2 = list1.Except(list2);
var notIn1 = list2.Except(list1);
var both = list1.Intersect(list2); 
```

要查找具有不同值 ( `ColumnD`) 的对象，您可以使用这个（非常有效的）Linq 查询：

```
var diffValue = from o1 in list1
                join o2 in list2
                on new { o1.columnA, o1.columnB, o1.columnC } equals new { o2.columnA, o2.columnB, o2.columnC }
                where o1.columnD != o2.columnD
                select new { Object1 = o1, Object2 = o2 };

foreach (var diff in diffValue)
{
    MyObject obj1 = diff.Object1;
    MyObject obj2 = diff.Object2;
    Console.WriteLine("Obj1-Value:{0} Obj2-Value:{1}", obj1.columnD, obj2.columnD);
} 
```

当您覆盖`Equals`并`GetHashCode`适当地：

```
class MyObject
{
    //Key combination
    string columnA;
    string columnB;
    decimal columnC;

    //The Value
    decimal columnD;

    //Enum for comparison, used for styling the item (value hidden from UI)
    //Alternatively...this could be a string type, holding the enum.ToString()
    MyComparisonEnum result;

    public override bool Equals(object obj)
    {
        if (obj == null || !(obj is MyObject)) return false;
        MyObject other = (MyObject)obj;
        return columnA.Equals(other.columnA) && columnB.Equals(other.columnB) && columnC.Equals(other.columnC);
    }

    public override int GetHashCode()
    {
        int hash = 19;
        hash = hash + (columnA ?? "").GetHashCode();
        hash = hash + (columnB ?? "").GetHashCode();
        hash = hash + columnC.GetHashCode();
        return hash;
    }
} 
```

# jquery - jQuery拖放 - 重新定位项目

> ID：14564812
> 
> 赞同：0
> 
> 时间：2013-01-28T15:02:26.913
> 
> 标签：jquery, jquery-draggable

所以，这是我的困境。我有 6 个拖放项目（如下图所示）。他们工作得很好。除了一旦我将一个项目拖到不同的放置项目，它们最终会重叠，如您所见。我想知道的是，有没有办法插入 DIV 而不会导致其他项目移动？

我曾尝试使用 before() 和 after() 函数，但这样做会将所有其他元素向下推，当您放置多个拖动项时，这不起作用。所以我希望做的只是将项目向下移动到下一个可用位置，而不会导致其他元素移动。

有任何想法吗？ ![在此处输入图像描述](../Images/b98a0a4520d33ae838ed5b82404f371a.png)

**更新**- 基本上我想要做的是将可排序的 jQuerys 与可拖动的结合起来。不确定这是否有帮助，但这本质上就是我想要做的，因为我希望拖动项目像排序项目在重新排列时那样做出反应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T15:08:46.210

我不确定我是否完全理解你想在这里做什么（你所说的“不导致其他项目移动”是什么意思？），但如果我正确理解这个想法（用户应该订购黄色框正确放入步骤 1-6，每个步骤中只有一个项目），您可能应该使用 jQuery UI 的可排序小部件而不是可拖动小部件。这将自动负责将项目整齐地排列在一个简单的列表中而不会重叠，并且您可以简单地从通过表单提交的列表的顺序中了解哪个步骤是哪个步骤。

# c - 如何使用C将整数转换为字符数组

> ID：14564813
> 
> 赞同：25
> 
> 时间：2013-01-28T15:02:32.080
> 
> 标签：c

我想将整数转换为 C 中的字符数组。

输入：

```
int num = 221234; 
```

结果等价于：

```
char arr[6];
arr[0] = '2';
arr[1] = '2';
arr[2] = '1';
arr[3] = '2';
arr[4] = '3';
arr[5] = '4'; 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-28T15:06:57.517

使用该`log10`函数来确定位数并执行以下操作：

```
char * toArray(int number)
{
    int n = log10(number) + 1;
    int i;
    char *numberArray = calloc(n, sizeof(char));
    for (i = n-1; i >= 0; --i, number /= 10)
    {
        numberArray[i] = (number % 10) + '0';
    }
    return numberArray;
} 
```

或者另一个选择是`sprintf(yourCharArray,"%ld", intNumber);`

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-01-28T15:22:37.880

' [sprintf](https://linux.die.net/man/3/sprintf) ' 可以正常工作，如果您的第一个参数是指向字符的指针（指向字符的指针是 'c' 中的数组），则必须确保有足够的空间容纳所有数字和终止'\0'。例如，如果一个整数使用 32 位，则它最多有 10 个十进制数字。所以你的代码应该是这样的：

```
int i;
char s[11]; 
...
sprintf(s,"%ld", i); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-28T15:06:11.547

*简单*的方法是使用`sprintf`. 我知道其他人提出了建议`itoa`，但是 a) 它不是标准库的一部分，并且 b)`sprintf`为您提供了没有的格式化选项`itoa`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-28T15:04:53.903

[使用 itoa，如此处](http://www.daniweb.com/software-development/c/threads/11049/convert-int-to-string#)所示。

```
char buf[5];
// Convert 123 to string [buf]
itoa(123, buf, 10); 
```

`buf`将是您记录的字符串数组。您可能需要增加缓冲区的大小。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-28T15:04:37.937

您可以尝试使用[itoa](http://www.cplusplus.com/reference/cstdlib/itoa/)。另一种选择是使用[sprintf](http://www.cplusplus.com/reference/cstdio/sprintf/)。

# objective-c - 更改 CIFilter 的工作色彩空间

> ID：14564815
> 
> 赞同：2
> 
> 时间：2013-01-28T15:02:45.480
> 
> 标签：objective-c, cocoa, cifilter, cgcolorspace

我正在开发一个 MacAppStore 友好的 CIColorWheelGenerator 实现。它是一个简单的 CIFilter，它生成您可以在 Apple 的颜色选择器中看到的色轮。遗憾的是，这是 Apple 不允许我们在面向 MacAppStore 的应用程序中使用的私有内容的一部分。

我已经部分成功了，我得到了一个有效的实现，但它仍然停留在 genericRGB 颜色空间中。Apple 使用 sRGB 色彩空间工作。我找到了一种解决方法：

```
CGColorSpaceRef cSpace = CGColorSpaceCreateWithName(kCGColorSpaceSRGB);
NSDictionary *dict = @{kCIContextWorkingColorSpace : CFBridgingRelease(cSpace),};
CIContext *ctx = [CIContext contextWithCGContext:[[NSGraphicsContext currentContext] graphicsPort] options:dict];

[ctx drawImage:_wheelImage inRect:rect fromRect:_wheelRect]; 
```

（_wheelImage 是使用我的色轮生成器过滤器生成的 CIImage）。

我已经检查了 QuartzComposer、CIColorWheelGenerator 接缝以使用 sRGB 颜色空间（基于我的颜色感知以及我自己的实现没有给出相同结果的事实）。问题来了：我是否误解了某些东西，我在 QC 中使用的 CIColorWheelGenerator 不仅仅是一个 CIFilter，而是带有更复杂的代码，或者是否可以在 CIFilter 中指定工作颜色空间（默认为 genericRGB）？

这是一张图片，因此您可以看到 Apple 的色轮（右侧）与我的不同（逻辑上，左侧）：

![微小的差异](../Images/a27eac730a49ed8d380a77d2bae3ae17.png)

我的应用程序（左）与 Apple 的颜色选择器（右）你可以看到一些相似之处：

![细微差别2](../Images/73fb03d2fea441170ac8ffa0e07a0df2.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-08T07:15:06.413

Quartz Composer 有一个隐藏设置。从菜单中选择首选项时按住选项键。在（编辑器）窗格中，将有一个“uncorrectedCoreImage”设置。检查它，关闭 QC，然后重新打开它。现在所有滤镜都将在未经校正的色彩空间中运行。重复该过程以返回正常的色彩空间转换。

除此之外，我不知道有什么方法可以改变 Quartz Composer 中的色彩空间。

# html - 调整浏览器大小时元素不会重新定位

> ID：14564816
> 
> 赞同：1
> 
> 时间：2013-01-28T15:02:52.503
> 
> 标签：html, css, positioning, css-position, horizontal-scrolling

我正在努力创建一个只有水平滚动的网站。请看一下这个[演示](http://kode.co.nf/positiondemo/)。我的问题是当我调整浏览器的大小时，内容（浅黄色框内的段落）不会重新定位。我希望该段位于黄色环段上方。我怎样才能做到这一点？

下面是我的代码。

**HTML**

```
<html>
<head>
<link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" />
<link rel="stylesheet" type="text/css" href="stylesheets/styles.css" />

<script type="text/javascript" src="scripts/jquery.min.js"></script>
<script type="text/javascript" src="scripts/scripts.js"></script>
</head>
<body>

<div id="container">

<img id="backimage" src="images/rings.png" />

<div id="info">
<p> Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer at sollicitudin turpis. Fusce fermentum, odio vitae luctus mollis, tortor mauris condimentum leo, at interdum urna massa a orci. Class aptent taciti sociosqu ad litora torquent per conubia
</p>
</div><!-- end of info -->

</div><!-- end of container -->

</body>
</html> 
```

**CSS**

```
a { text-decoration:none; }

li {list-style-type:none; }

body { overflow-y:hidden; }

#container {
    position:absolute;
    height:100%;
    width:10000px;
    background-color:#FC9;
}

#info {
    position:absolute;
    width:200px;
    height:220px;
    background-color:#FFC;
    top:180px;
    left:250px;
}

#backimage {
    position:absolute;
    height:100%;
    background-size:cover;
    bottom:0;
} 
```

我尝试将`#info`的位置设置为，`relative`但是当我这样做时，它会从页面中消失。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T15:46:20.900

您将每个位置定义为绝对位置。这不是一个好的解决方案。相反，您应该使用相对布局。它们可能有点复杂，而且不像“免费”那样“免费”，但它们确实解决了大部分问题。从您的 HTML 中删除 backImage 和容器并执行以下操作：

```
a { text-decoration:none; }

li {list-style-type:none; }

body { 
    overflow-y:hidden; 
    background:url(images/rings.png);
    background-color:#FC9;
}

#container { //body is the container. You dont need something like this in this case.
}

#info {
    background-color:#FFC;

    //width and height are dynamic to the size of content

    margin-top:180px; //You just set the margin (outer gap) instead of the position.
    margin-left:250px;
}

#backimage { //You don't need a back-image if you use background:url(...) in body
} 
```

如果窗口较小，则希望框的外部间隙变小，请使用带边距的百分比。

如果要限制信息 div 的大小，请使用 max-width:xyz;

正如我在您对另一个答案的评论中读到的那样，您希望 div 位于背景的特定部分。您可以使用背景位置来实现这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T15:16:08.017

您希望内容发生什么？因为使用当前参数，位置是相对还是绝对无关紧要，它将保持从背景图像左上角向下 180px 和 250px ......而且它的大小也不会改变。

# mysql - MySQL 将列结果拆分为视图中的动态列

> ID：14564820
> 
> 赞同：0
> 
> 时间：2013-01-28T15:03:06.310
> 
> 标签：mysql, views

我不确定这是否可以单独使用 MySQL，或者是否需要 PHP 或类似的。我想要生成的是一个视图，它取决于一个表中存在的信息量，以确定视图中显示了多少列。

我有一个包含以下字段的组件表：

```
CM_ID (The component ID)
CM_CODE (A specific company assigned code)
CM_DESCRIPTION (A brief description of the component)
FORMAT_ID (A referenced FK)
ITEM_ID (A referenced FK) 
```

从 Component 表中选择的示例是：

```
CM_ID   CM_CODE CM_DESCRIPTION      FORMAT_ID       ITEM_ID
1       111111  Technical Manual    1 (280 Page A4 Book)    32
2       111112  Schematic Diagram   2 (A3 Fold-out sheet)   32
3       222223  Technical Manual    1 (280 Page A4 Book)    2
4       222224  Price Guide         25 (32 Page A4 Book)    2
5       333335  Instruction Manual  33 (220 Page A5 Book)   44 
```

我试图获得的视图基于显示项目（来自主项目表）。每个项目将有一个或多个组件（通过 CM_ID 上的 FK 引入）

我产生了以下观点：

```
SELECT  i.item AS Item,
GROUP_CONCAT(DISTINCT CONCAT(cm.CM_CODE, _utf8', ',cm.CM_DESCRIPTION, _utf8,', ',f.FORMAT_DESCRIPTION) SEPARATOR '; ') AS Components
FROM item AS i
JOIN components AS cm ON i.ITEM_ID = cm.ITEM_ID
JOIN format AS f ON cm.FORMAT_ID = f.FORMAT_ID 
```

这将获得以下形式的结果：

```
Item    Components
2       222223, Technical Manual, 164 Page A4 Book; 222224, Price Guide, 32 Page A4 Book
32      111111, Technical Manual, 280 Page A4 Book; 111112, Schematic Diagram, A3 Fold-out
44      333335, Instruction Manual, 220 Page A5 Book 
```

由于串联，仅返回 2 列（项目和组件）。我想做的是为项目的组件形成单独的列，这些组件取决于组件的实际数量。

示例输出：

```
Item    Component1                                  Component2
2       222223, Technical Manual, 164 Page A4 Book  222224, Price Guide, 32 Page A4 Book
32      111111, Technical Manual, 280 Page A4 Book  111112, Schematic Diagram, A3 Fold-out Sheet
44      333335, Instruction Manual, 220 Page A5 Book 
```

请注意，项目 44 只有一个组件，因此，它在 component2 列中没有数据。如果只对第 44 项进行选择，那么理想情况下，根本不会提及 Component2 列。同样，如果另一个项目带有 4 个组件，则输出将自动缩放以形成 4 个组件列。

我已经研究了许多实现这一目标的方法，但似乎没有一个是完全正确的。这可能吗？

提前谢谢了

伊恩

****更新 ******

 **好的，我正在尝试设置定义的列数并对其进行选择，但仍然遇到困难。我在 Components 表中添加了另一个字段：

```
CM_ORDER 
```

可用于区分同一项目的组件（理论上）。

我知道这是不对的，但是我试图按照以下方式进行操作：

```
SELECT  i.item AS Item,
cm.CM_CODE AS Component_Code1 WHERE cm.CM_ORDER = 1,
cm.CM_DESCRIPTION AS Component_Description1 WHERE cm.CM_ORDER = 1,
cm.CM_CODE AS Component_Code2 WHERE cm.CM_ORDER = 2,
cm.CM_DESCRIPTION AS Component_Description2 WHERE cm.CM_ORDER = 2
FROM item AS i
JOIN components AS cm ON i.ITEM_ID = cm.ITEM_ID
JOIN format AS f ON cm.FORMAT_ID = f.FORMAT_ID 
```

不知道我如何在那里获得相关的“格式”信息。显然，MySQL 对我在 SELECT 语句中放置多个 WHERE 子句并不满意，所以我尝试使用 CASE 来代替，并取得了同样多的成功（没有）。

必须有一种方法可以在不使用脚本/编码语言的情况下将其拆分为同一查询中的单独列。

试图达到的结果：

```
Item    Component_Code1    Component_Description1    Component_Code2    Component_Description2
2       222223             Technical Manual          222224             Price Guide
32      111111             Technical Manual          111112             Schematic Diagram
44      333335             Instruction Manual 
```

*   以及相关的“格式”数据。

我希望这可以做到

干杯

伊恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T15:12:58.410

严格来说，你想做的事情在 SQL 中是不可能的。SQL 要求查询中的列是预定义的。

一种可能的方法是为此目的使用动态 SQL。您将计算数据中组件的最大数量，然后使用此信息创建查询。

您已经在尝试第二种方法，即使用逗号分隔列表的分号分隔列表。

最后一种方法是确定某个最大数量的组件，并为此构建查询。因此，您可以展示前三个组件。**

# assert - 打破断言 - 或不

> ID：14564821
> 
> 赞同：0
> 
> 时间：2013-01-28T15:03:07.447
> 
> 标签：assert, assertions

对于以下哪种替代方案（此处以 C 语言为例）是否存在共识？

1.  所有参数的一个断言：

    ```
    int f(int m, int n)
    {
       assert((m >= 0) && (m <= mmax) && (n >= 0) && (n <= nmax));
       ...
    } 
    ```

2.  每个参数一个断言：

    ```
    int f(int m, int n)
    {
        assert((m >= 0) && (m <= mmax));
        assert((n >= 0) && (n <= nmax));
        ...
    } 
    ```

3.  具有原子条件的断言：

    ```
    int f(int m, int n)
    {
        assert(m >= 0);
        assert(m <= mmax);
        assert(n >= 0);
        assert(n <= nmax);
        ...
    } 
    ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T15:06:42.270

我个人更喜欢第三个，不仅是为了可读性，也是为了将来的可维护性和调试。想象一下，在编写代码一段时间后，其中一个断言突然开始失败。对于前两个中的任何一个，当其中一个断言失败时，您不确切知道哪个条件为假。

但是对于第三个，绝对没有歧义。

# gmail - MailApp.sendEmail() 方法是否模拟发件人地址？

> ID：14564824
> 
> 赞同：0
> 
> 时间：2013-01-28T15:03:26.803
> 
> 标签：gmail, google-apps-script

我正在使用 Google Apps 脚本从 Gmail 向第三方服务发送邮件。该第三方要求向他们注册发件人电子邮件地址。如果发件人未注册，则会将错误/营销消息发送回原始发件人。

从 Gmail 手动发送邮件时，第三方会按预期进行处理。当消息由脚本发送时，消息不被第三方处理，也不会像上面描述的那样发送错误响应。在这样一条消息上添加不同的 gmail 地址作为密件抄送后，我发现脚本生成的消息显示“mailed-by:bounce.secureserver.net”和“signed-by:gmail.com”

我担心 GAS 会冒充发件人，导致第三方无法将发件人识别为注册地址。或者，第三方可能会将邮件作为垃圾邮件丢弃。（[http://productforums.google.com/d/topic/apps-script/tGxlioK1ejg/discussion](http://productforums.google.com/d/topic/apps-script/tGxlioK1ejg/discussion)）

非常感谢社区对此问题的反馈。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T16:31:49.227

根据 Google 的文档，[sendEmail()](https://developers.google.com/apps-script/class_mailapp#sendEmail)方法会在用户运行脚本时发送一封电子邮件。话虽如此，附加参数会自动添加到电子邮件的标题中，这些参数可能会在收件人端触发一些过滤规则。除了使用像 SendGrid 这样的第三方电子邮件服务可能会更好地确保您的电子邮件能够通过之外，您对此无能为力。

# jira - 子任务和 Greenhoper

> ID：14564828
> 
> 赞同：0
> 
> 时间：2013-01-28T15:03:37.493
> 
> 标签：jira, jira-plugin, jira-agile

是否可以在敏捷页面的 Greenhopper 计划屏幕中看到子任务？就像现在一样，我们只能看到案例，而不能看到子任务（子案例）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T23:36:38.837

当您单击问题时，子任务会显示在右侧详细视图的“子任务”部分中。由于子任务不是独立的工作项，它们不会直接显示在积压工作中。

谢谢，肖恩

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T16:37:12.933

在 Greenhoper 版本：6.1.3.1 中无法看到 sprint 或 backlog 中的子任务

# ssl - Azure 云尝试绑定 SSL 证书超时

> ID：14564834
> 
> 赞同：0
> 
> 时间：2013-01-28T15:04:12.510
> 
> 标签：ssl, azure, cloud

我已经为我的云服务配置了 SSL

[http://blogs.msdn.com/b/azuredevsupport/archive/2010/02/24/how-to-install-a-chained-ssl-certificate.aspx](http://blogs.msdn.com/b/azuredevsupport/archive/2010/02/24/how-to-install-a-chained-ssl-certificate.aspx)

但是当我在本地启动我的应用程序时，它仍然会查找带有指纹 F8ACE24A36F93B006BFAF495F6C14FB827AC61A3 的不同证书，我可以在证书存储中找到并颁发给 127.0.0.1。

我想知道为什么不使用我的 SSL 证书以及为什么尝试绑定到默认证书超时。

-贾拉尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T15:59:12.587

1.  确保您的证书在正确的存储中，即“本地机器”而不是当前用户
2.  确保您在模拟器中运行云服务
3.  确保IUSR和NETWORK SERVICE可以访问证书的私钥-开始>>运行>> MMC，然后为“本地计算机”添加证书管理单元-找到证书并右键单击，所有任务>>管理私钥

# php - 使用 WSF/PHP 作为客户端和 .NET 作为服务器的 Soap WS

> ID：14564835
> 
> 赞同：0
> 
> 时间：2013-01-28T15:04:22.280
> 
> 标签：php, wso2, wso2carbon, wsh

我必须使用（来自我的客户文档）在 .Net 服务器上调用 SOAP WS

```
SOAP 1.1
WS-Addressing (August 2004)
WS-Security 1.1
WS-Trust (February 2005)
WS-SecureConversation (February 2005)
WS-SecurityPolicy 1.1 
```

我使用 WSO2 WSF/PHP（wso2-wsf-php-src-2.1.0.zip 文件），这是我的客户端

```
function appel($rec_cert, $pvt_key, $sUrl)
{
$reqPayloadString = <<<XML
<ns1:echo xmlns:ns1="http://wso2.org/wsfphp/samples"><text>Hello World!</text></ns1:echo>
XML;
    $sPolicy = dirname(__FILE__) . '/policy.xml';
    $sAction = "http://www.aaa.fr/SendMessage";
    $reqMessage = new WSMessage($reqPayloadString, array("to" => $sUrl, "action" => $sAction));

    $policy_xml = file_get_contents($sPolicy);
    $policy = new WSPolicy($policy_xml);
    $sec_token = new WSSecurityToken(array("privateKey" => $pvt_key, "receiverCertificate" => $rec_cert));

    $client = new WSClient(array(
        "useSOAP"=>1.1, 
        "useWSA" => 1.0,
        "policy" => $policy, 
        "securityToken" => $sec_token,
    ));

    $resMessage = $client->request($reqMessage);

    printf("Response = %s \n", $resMessage->str);
} 
```

在我的本地网络服务上，它运行良好，但只是在我的客户预生产服务器上抛出异常“错误，未收到响应”。我只是不使用相同的密钥和证书，因为我没有客户密钥。

这是我的本地网络服务

```
<?php 

function echoFunction($inMessage) {
    $returnMessage = new WSMessage($inMessage->str);
    return $returnMessage;
}

$pub_key = ws_get_cert_from_file("/var/www/samples/security/keys/alice_cert.cert");
$pvt_key = ws_get_key_from_file("/var/www/samples/security/keys/bob_key.pem");

$operations = array("echoString" => "echoFunction");

$actions = array("http://www.aaa.fr/SendMessage" => "echoString");

$policy = new WSPolicy(file_get_contents("policy.xml"));
$sec_token = new WSSecurityToken(array("privateKey" => $pvt_key, "receiverCertificate" => $pub_key));

$svr = new WSService(array(
    "actions" => $actions,
    "operations" => $operations,
    "policy" => $policy,
    "securityToken" => $sec_token));

$svr->reply(); 
```

最大的问题是这个错误发生在一个不存在的 url、客户端和服务器之间的不同策略以及我可以在我的服务器上创建的其他几个错误。

第一个证据来自 wsf_php_client.log ：

```
[Mon Jan 28 15:49:02 2013] [error] assertion_builder.c(510) [neethi] Unknown Assertion RampartConfig with namespace http://ws1.apache.org/rampart/policy
[Mon Jan 28 15:49:02 2013] [error] engine.c(548) [neethi] Assertion creation failed from element.
[Mon Jan 28 15:49:02 2013] [error] engine.c(145) [neethi] All creation failed
[Mon Jan 28 15:49:02 2013] [error] engine.c(473) [neethi] All creation failed from element.
[Mon Jan 28 15:49:02 2013] [error] engine.c(190) [neethi] Exactlyone creation failed.
[Mon Jan 28 15:49:02 2013] [error] engine.c(496) [neethi] Exactlyone creation failed from element.
[Mon Jan 28 15:49:02 2013] [error] engine.c(285) [neethi] Policy creation failed. 
```

和第二个（我正在搜索这个）

```
[Mon Jan 28 16:18:13 2013] [info]  Starting addressing out handler
[Mon Jan 28 16:18:13 2013] [debug] http_transport_sender.c(241) ctx_epr:https://recette.customer.fr/securit.svc
[Mon Jan 28 16:18:13 2013] [debug] http_transport_sender.c(776) using axis2 native http sender.
[Mon Jan 28 16:18:13 2013] [debug] http_sender.c(494) msg_ctx_id:urn:uuid:ef0a33e6-695d-1e21-2453-d43d7e273c95
[Mon Jan 28 16:18:13 2013] [debug] http_transport_utils.c(3794) No session map stored
[Mon Jan 28 16:18:13 2013] [info]  [ssl client] CA certificate not specified
[Mon Jan 28 16:18:13 2013] [error] ssl/ssl_utils.c(50) Cannot find certificates
[Mon Jan 28 16:18:13 2013] [error] ssl/ssl_stream.c(99) Error occurred in SSL engine
[Mon Jan 28 16:18:13 2013] [error] http_client.c(294) Data stream creation failed for Host recette.customer.fr and 443 port
[Mon Jan 28 16:18:13 2013] [error] http_client.c(560) Client data stream null or socket error for host recette.customer.fr and 443 port
[Mon Jan 28 16:18:13 2013] [error] http_client.c(562) A read attempt(HTTP) for the reply without sending the request
[Mon Jan 28 16:18:13 2013] [error] http_sender.c(1303) status_code < 0
[Mon Jan 28 16:18:13 2013] [error] engine.c(171) Transport sender invoke failed
[Mon Jan 28 16:18:13 2013] [error] /home/cedric/wso2-wsf-php-src-2.1.0/src/wsf_client.c(1696) [WSF/PHP] Response Payload NULL( Error number and code) => : 76 :: A read attempt(HTTP) for the reply without sending the request 
```

我在哪里可以找到更多信息来解决我的问题？我已经要求客户告诉我他是否有我的 WS 呼叫的任何痕迹（但我现在仍然没有答案）。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-07T18:09:44.367

我认为您的服务器没有启动与远程服务器的 SSL 通信。如果它无法将其证书追踪到它知道的根证书颁发机构，则可能会发生这种情况（请参阅[https://en.wikipedia.org/wiki/Root_certificate](https://en.wikipedia.org/wiki/Root_certificate)）。

通常您可以禁用此检查（例如，如果您使用 CURL），或者更好地 - 提供 ca.crt 文件的路径。默认情况下，Apache 应该知道它在哪里。例如，它的配置可能包括

SSLCACertificateFile "C:/Program Files/Apache Software Foundation/Apache2.2/conf/keys/ca.crt"

（如[http://wso2.org/library/articles/ssl-enabled-web-services-apache-axis2-c](http://wso2.org/library/articles/ssl-enabled-web-services-apache-axis2-c)中所述）

# php - symfony2 路由 yml 错误 - symblog 教程

> ID：14564840
> 
> 赞同：1
> 
> 时间：2013-01-28T15:04:39.037
> 
> 标签：php, symfony, yaml

eclipse 正在标记我从 symfony2 博客教程中获取的路线。

错误是否正确标记或者我需要更改我的 yml 编辑器？

![在此处输入图像描述](../Images/c835b4092645927964a17bb42da5c377.png)

```
_welcome:
    pattern:  /
    defaults: { _controller: BloggerBlogBundle:Default:index } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T15:49:57.397

如果我的记忆是正确的，Symfony2 使用自定义 YAML 解析器，它不需要在非字母数字字符的值周围加上引号。传统的 YAML 规范可以。尝试在 _controller 的值周围加上引号。它不会破坏 Symfony，它应该让 Eclipse 开心

`{ _controller: "BloggerBlogBundle:Default:index" }`

# ember.js - 在 Ember-1.0.0-pre4 中，隐藏渲染模板的正确方法是什么？

> ID：14564845
> 
> 赞同：0
> 
> 时间：2013-01-28T15:04:57.157
> 
> 标签：ember.js

在以前的 Ember 版本中，我会执行以下操作：

```
someRoute: Ember.Route.extend({
  showDialog: function (router) {
    router.get("applicationController").connectOutlet("dialog", "dialog");
  },
  hideDialog: function (router) {
    router.get("applicationController").disconnectOutlet("dialog");
  }
}); 
```

在当前版本的 Ember 中执行相同操作的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T16:08:37.090

`connectOutlet`在当前版本的 Ember 中，您仍然有一种-esque 方法。我想您需要质疑这是否是**最好**的方法，但是否可行。

例如：

```
someRoute: Ember.Route.extend({
    showDialog: function (router) {
        this.controllerFor('application').set('dialog', this.controllerFor('dialog'));
    },
    hideDialog: function (router) {
        this.controllerFor('application').set('dialog', null);
    }
}); 
```

# c# - 如何分隔字符串中的段落？

> ID：14564846
> 
> 赞同：4
> 
> 时间：2013-01-28T15:04:58.020
> 
> 标签：c#, regex, string, escaping, string-literals

我试图取一个由几段组成的多行字符串并将其拆分为几个单独的文本。

我意识到，每当我跳过一行时，都会有一个 \n\r 序列。之后我认为每个新行都以 \n 开头并以 \r 结尾。为此，我编写了以下代码。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Text.RegularExpressions;

namespace ConsoleApplication15
{
   class Program
   {
    struct ParagraphInfo
    {
        public ParagraphInfo(string text)
        {
            int i;
            Text = text;
            i = text.IndexOf('.');
            FirstSentence = text.Substring(0, i);
        }

        public string Text, FirstSentence;
    }

    static void Main(string[] args)
    {
        int tmp = 0;
        int tmp1 = 0;
        string MultiParagraphString = @"AA.aa.

BB.bb.

CC.cc.

DD.dd.

EE.ee.";

        List<ParagraphInfo> Paragraphs = new List<ParagraphInfo>();

        Regex NewParagraphFinder = new Regex(@"[\n][\r]");
        MatchCollection NewParagraphMatches = NewParagraphFinder.Matches(MultiParagraphString);

        for (int i = 0; i < NewParagraphMatches.Count; i++)
        {
            if (i == 0)
            {
                Paragraphs.Add(new ParagraphInfo((MultiParagraphString.Substring(0, NewParagraphMatches[0].Index))));
            }
            else if (i == (NewParagraphMatches.Count - 1))
            {
                tmp = NewParagraphMatches[i].Index + 3;
                tmp1 = MultiParagraphString.Length - NewParagraphMatches[i].Index - 3;
                Paragraphs.Add(new ParagraphInfo(MultiParagraphString.Substring(tmp, tmp1)));
            }
            else
            {
                tmp = NewParagraphMatches[i].Index + 3;
                tmp1 = NewParagraphMatches[i + 1].Index - NewParagraphMatches[i].Index+3;
                Paragraphs.Add(new ParagraphInfo(MultiParagraphString.Substring(tmp, tmp1)));
            }
        }

        Console.WriteLine(MultiParagraphString);
        foreach (ParagraphInfo Paragraph in Paragraphs)
        {
            Console.WriteLine(Paragraph.Text);

        }

    }
}
} 
```

当我将段落的每个成员一个接一个地打印在整个文本旁边时，出现了一些相当奇怪的东西。段落列表的输出是这样的：

AA.aa。

* * *

抄送。

DD。

* * *

DD.dd。

EE。

* * *

EE.ee.

* * *

我不明白为什么这种情况一直发生，而且我不明白为什么每次输出都如此不同。

对不起，如果它是一团糟，但我真的需要一些帮助。如果有人有更好的想法，请随时分享。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T15:13:18.260

您可以尝试以下方法：

```
MultiParagraphString.Split(new [] {Environment.NewLine}, 
           StringSplitOptions.RemoveEmptyEntries); 
```

这将返回一个`IEnumerable<String>`. 如果您想将它们转换为您的结构，只需使用`Select`：

```
MultiParagraphString.Split(new [] {Environment.NewLine}, 
           StringSplitOptions.RemoveEmptyEntries)
          .Select(s => new ParagraphInfo(s)).ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T15:12:09.147

> 我认为每个新行都以 \n 开头并以 \r 结尾

No. `\r\n`是用于在 Windows（和其他非 Unix）系统中指示新行的两个字符序列。它并不表示段落的“开始”和“结束”。

要分成段落，您可以使用[`string.Split()`](http://msdn.microsoft.com/en-us/library/tabh47cf.aspx)：

```
string[] paragraphs = MultiParagraphString.Split(new string[]{"\r\n"},
                           StringSplitOptions.RemoveEmptyEntries); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-24T19:22:33.900

```
 string text = richTextBox1.Text; 
```

**您可以使用以下方法忽略段落：**

```
text = text.Replace((char)10, ' '); 
```

**您可以使用以下方法检测段落：**

```
string[] words = s.split('');
foreach (string word in words)
{
if (word.Contains((char)10))
{
MessageBox.Show("A paragraph is here (with brillant English accent)");
} 
```

注意：此代码仅在段落由文本上的输入键分隔时才有效。

# emacs - .emacs .txt 文件视觉线模式与缪斯模式同时

> ID：14564848
> 
> 赞同：0
> 
> 时间：2013-01-28T15:05:05.260
> 
> 标签：emacs, elisp, mode

我以“#title”开头，将我的缪斯模式文件（通常以 .txt 后缀命名）表示为缪斯模式。为此，我有

```

    ;; *.txt 文件上的缪斯模式，如果是#title 或 sect。标题在前 4 行
    (add-hook '文本模式挂钩
              （拉姆达（）
                (除非 (或 (eq major-mode 'muse-mode)
                (不是 (stringp buffer-file-truename)))
                  （当（等于（文件名扩展缓冲区-文件-真名）“txt”）
                    （保存游览
                      （转到第 5 行）
                      (if (re-search-backward "\* [AZ][az]+.*\\|#title " 1 t)
                          （缪斯模式）））））））

```

如果我也有

```
    （添加到列表 'auto-mode-alist '("\\.txt$" . visual-line-mode))

```

在 .emacs 中（按照上面的代码），然后 muse-mode 不再起作用。虽然如果我在 muse 文件上的 emacs 中使用 Meta-x 调用视觉线模式，它不会把事情搞砸。

理想情况下，我希望对所有 .txt 文件都使用视觉线模式，但又不会弄乱缪斯。否则，我想以可视行模式启动所有 .txt 文件，除非它们是 muse 文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T15:16:14.357

变量[`'auto-mode-alist`](http://www.gnu.org/software/emacs/manual/html_node/elisp/Auto-Major-Mode.html)选择*主要*模式。

`visual-line-mode`是一种*次要*模式，通过将其添加到`'auto-mode-alist`您可以使其表现得像一个*主要*模式，它取代了`text-mode`您开始使用的。

相反，添加`turn-on-visual-line-mode-in-txt`类似`text-mode-hook`这样：

```
(add-hook `text-mode-hook 'turn-on-visual-line-mode)

(defun turn-on-visual-line-mode-in-txt ()
  (when (and (buffer-file-name)
             (string-match ".txt$" (buffer-file-name)))
    (turn-on-visual-line-mode))) 
```

有关差异的更多信息，请阅读[主要](http://www.gnu.org/software/emacs/manual/html_node/emacs/Major-Modes.html#Major-Modes)和[次要](http://www.gnu.org/software/emacs/manual/html_node/emacs/Minor-Modes.html)模式的手册。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T15:44:24.567

我认为@treyJackson 发现了问题，但这里有一些额外的评论：

顺便说一句，您使用 a`text-mode-hook`切换到`muse-mode`会在各种情况下行为不端（因为您首先切换到文本模式，然后在中途激活 muse 模式，之后文本模式激活结束（通常，剩下的不多了）做，但在 text-mode-hook 上可能有更多功能要运行）仍将执行）。一种更强大的方法可能是：

```
(add-to-list 'auto-mode-alist '("\\.txt\\'" . text-or-muse-mode))

(defun text-or-muse-mode ()
  (if (save-excursion
        (goto-line 5)
        (re-search-backward "\\* [A-Z][a-z]+.*\\|#title " 1 t))
      (muse-mode)
    (text-mode))) 
```

当然，您也可以`-*- muse -*-`在第一行使用 a ，或者改为依靠`magic-mode-alist`。

# qt - 如何在不从当前活动选项卡中获取焦点的情况下将子窗口添加到 QMdiArea（设置为 TAB 模式）？

> ID：14564849
> 
> 赞同：0
> 
> 时间：2013-01-28T15:05:11.383
> 
> 标签：qt, qt4, qmdiarea

我有一个在后台运行并在`QMdiArea`. 但是，当添加新选项卡时，它会从当前活动的选项卡中窃取焦点。有没有办法可以添加一个新的非活动选项卡（子窗口），以便将焦点保持在当前使用的选项卡上？

我已经在网上搜索过，但找不到与此问题相关的任何内容。

我尝试了以下方法：

```
MyWidget *widget=new MyWidget();
QMdiSubWindow *sub=ui->mdiArea->addSubWindow(widget,Qt::SubWindow);
sub->setWindowState(Qt::WindowNoState); 
```

但它没有达到预期的效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T06:21:02.727

我在另一个论坛上得到了帮助，并找到了解决该问题的方法：

```
QMdiSubWindow *previous = ui->mdiArea->activeSubWindow();
QTextEdit *edit=new QTextEdit;
QMdiSubWindow *sub=ui->mdiArea->addSubWindow(edit,Qt::Window)
sub->show();
if (previous==0)
   ui->mdiArea->setActiveSubWindow(sub);
else if (previous->isWidgetType()) //I check if previous is widget, because if you close the previous tab, when the new one is opened the program crashes on the next line because previous no longer exists.
   ui->mdiArea->setActiveSubWindow(previous); 
```

# linux - linux命令清空一个目录下的所有文件

> ID：14564850
> 
> 赞同：20
> 
> 时间：2013-01-28T15:05:11.920
> 
> 标签：linux, file, command

我想清空目录中的所有文件。我试过这个：

```
find myFolderPath/* -exec cat /dev/null > {} ';' 
```

但它不起作用。我该怎么做？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-01-28T15:12:56.930

您不能直接在其中使用重定向 ( `>`)，`find -exec`因为它发生在命令运行并创建名为`{}`. 要解决这个问题，您需要在新的 shell 中使用`sh -c`.

另外，请注意，您不需要`cat /dev/null > file`为了破坏文件。您可以简单地使用`> file`.

试试这个：

```
find . -type f -exec sh -c '>"{}"' \; 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-28T15:13:04.177

这将做你想要的：

```
for f in *; do >$f; done 
```

# java - 相等比较中的奇怪问题

> ID：14564851
> 
> 赞同：2
> 
> 时间：2013-01-28T15:05:14.090
> 
> 标签：java, nullpointerexception, equals

我对以下语法有一个奇怪的问题：

以下代码块不会抛出空指针异常

```
Map<String, String> requestHeaderMap = FacesContext.getCurrentInstance().getExternalContext().getRequestHeaderMap();

if(!"partial/ajax".equals(requestHeaderMap.get("faces-request")))    
{
    System.out.println("This works");
} 
```

但是这个抛出空指针异常：

```
FacesContext.getCurrentInstance().getExternalContext().getRequestHeaderMap().get("faces-request").equals("partial/ajax") 
```

我只是无法弄清楚这里出了什么问题。除了可读性之外，我看不出两个调用之间有任何区别。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T15:08:11.233

`FacesContext.getCurrentInstance().getExternalContext().getRequestHeaderMap().get("faces-request")`一片空白。您的版本之所以有效，是因为您将等号反转，这两个操作归结为：

```
null.equals(object) 
```

或者

```
object.equals(null) 
```

第一个抛出 a `NullPointerException`，第二个评估为 false。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T15:07:02.423

两者以不同的顺序做事。`x.equals(y)`这就像和之间的区别`y.equals(x)`。如果`y`为 null，则只有其中的第二个会抛出 NPE。在您的情况下，`requestHeaderMap.get("faces-request")`为空。

这不会引发异常，因为 *.equals(null) 非常好：

```
"partial/ajax".equals(requestHeaderMap.get("faces-request") 
```

另一方面，这是试图取消引用 null：

```
getRequestHeaderMap().get("faces-request").equals("partial/ajax") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T15:11:46.903

```
if(!"partial/ajax".equals(requestHeaderMap.get("faces-request"))) 
```

是真的，因为这意味着

```
if( !("partial/ajax".equals(null)). 
```

如果你试试

```
null.equals("partial/ajax") 
```

这将引发异常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T15:08:01.037

这是因为`getRequestHeaderMap().get("faces-request")`可以返回`null`并`null.equals("partial/ajax")`抛出异常选项。

但是，`"partial/ajax".equals(...)`永远不会抛出异常，即使它正在与`null`.

在我个人看来，这是这个结构**唯一**的好处`Joda`。

# javascript - 溢出结合绝对位置和浮动

> ID：14564854
> 
> 赞同：0
> 
> 时间：2013-01-28T15:05:28.683
> 
> 标签：javascript, overflow

请看一下[JSFiddle 示例](http://jsfiddle.net/tTc5g/1/)。

我想在右侧制作带有关闭“x”的菜单。点击绿色 div 后弹出菜单。

### HTML

```
<div class="field">
<nav id="menu">
    <ul>
        <li>Menu item 1</li>
        <li>Menu item 2</li>
        <li>Item 3</li>
    </ul>
    <div class="close">X</div>
</nav> 
```

### CSS

```
.field {
    background: green;
    width: 350px;
    height: 200px;
    margin: 10px auto;
    position: relative;
    cursor: pointer;
}
#menu {
    position: absolute;
    display: none;
}
#menu ul {
    width: 80%;
    border: 1px solid #999;
    float: left;
}
#menu li {
    background: #fff;
    padding: 5% 15%;
    border-width: 0 0 1px 0;
    border-style: solid;
    border-color: #999;
    white-space: nowrap;
}
#menu .close {
    background: #ccc;
    width: 20%;
    padding: 5%;
    float: right;
} 
```

### JS

（JS乱七八糟，我很快就写好了）

```
$('.field').on('click', function (e) {

 var $pointer = $('#pointer'),
        $menu = $('#menu'),
        parentOffset = $(this).offset(),
        relX = e.pageX - parentOffset.left,
        relY = e.pageY - parentOffset.top,
        circleX = relX - ($pointer.outerWidth() / 2) + 1,
        circleY = relY - ($pointer.outerHeight() / 2) + 1;

    $pointer.css('left', circleX);
    $pointer.css('top', circleY);
    $pointer.show();

    $menu.css('left', circleX + $pointer.outerWidth());
    $menu.css('top', circleY);
    $menu.show();

    $menu.one('click', '.close', function (e) {
        $menu.hide();
        $pointer.hide();
        e.stopPropagation();
    });
}); 
```

有2个问题：

*   li 项目没有正确溢出其中的文本；

*   [x] 元素在菜单下，而不是在它的右侧；

我尝试了其他类似问题中建议的不同组合，但没有任何效果，或者我累了，我错过了一些东西。

重要的是不应该有任何硬编码值。正确的值只有 %。那是因为它应该在不同的浏览器尺寸上看起来不错。

任何想法如何解决这些问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T16:46:12.330

你应该看看[CSS Box 模型](https://developer.mozilla.org/en-US/docs/CSS/box_model)。填充、边框和边距始终添加到元素的宽度/高度，并且不包含在您定义的宽度中。您的浮动 X 正在向下跳，因为 . 右侧没有 20% 的空间`ul`。

最好将 X 放在 div 之外。你也可以省略所有的浮动。设置`position: absolute`div.close 并使用 将其移到容器边界之外`left: 100%`。

```
#menu {
    position: absolute;
    display: none;
}
#menu ul {
    border: 1px solid #999;
}
#menu li {
    background: #fff;
    padding: 5% 15%;
    border-width: 0 0 1px 0;
    border-style: solid;
    border-color: #999;
}
#menu .close {
    background: #ccc;
    width: 20%;
    padding: 5%;
    position: absolute;
    top: 0;
    left: 100%;
} 
```

顺便说一句，`white-space: nowrap`导致您的菜单元素的文本超出了 的边界`li`，这不是很灵活。

# visual-studio-2012 - Visual Studio Express 2012 for Windows Phone 中没有可用的“存储”菜单

> ID：14564857
> 
> 赞同：0
> 
> 时间：2013-01-28T15:05:33.963
> 
> 标签：visual-studio-2012, windows-phone-8

我已经从 MS 站点下载了 Windows Phone SDK 8.0。我以两种方式安装它：

1.  WPexpress_full 通过网络安装。
2.  wpsdkv80_enu1.iso (1.6 Gb) 下载并安装。

在这两种情况下，我都找不到商店菜单。我开发了一个应用程序，它必须提交到 Windows Phone 商店。我在这些论坛上找不到任何解决方案。我需要一些指导。

注意：我还尝试通过查看工具 - > 自定义选项来找到此菜单。那对我不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T15:21:55.967

您不能仅使用 Visual Studio 提交 Windows Phone 8 应用程序。您必须在此处登录并使用“新应用”对话框提交带有您的应用的 XAP：
[Windows Phone 开发中心](https://dev.windowsphone.com/en-us)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-01T21:01:50.040

实际上，您可以通过以下菜单从 Visual Studio 2012 开始使用商店提交应用程序：项目 >>> 商店 >>> 保留应用程序名称...

但是，这只是指向实际网站的链接： [https ://appdev.microsoft.com/StorePortals/en-us/Developer/Catalog/ReleaseAnchor](https://appdev.microsoft.com/StorePortals/en-us/Developer/Catalog/ReleaseAnchor)

# groovy - Groovy - 从程序中获取 JAVA_HOME

> ID：14564858
> 
> 赞同：7
> 
> 时间：2013-01-28T15:05:34.790
> 
> 标签：groovy, gradle

我需要从 Groovy (Gradle) 获取 JAVA_HOME 属性，有人知道如何实现吗？我能想到的唯一方法是以某种方式通过 Exec 从 cmd 行执行此操作。

谢谢（我正在运行 Windows 顺便说一句:)）

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-28T15:14:54.577

```
System.properties.find { it.key == "java.home" } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-11-17T15:06:16.267

一个让我难堪的问题。请记住在 gstring 中使用花括号。

`println "inside a gstring, java.home=$System.properties.'java.home' will be problematic`

//转储所有系统属性

但

`println "inside a gstring, java.home=${System.properties.'java.home'} will be fine`

`Result: inside a gstring, java.home=C:\FAST\JDK64\1.7.0.79\jre will be fine`

# c++ - 从文件中读取的 C++ 最佳块大小

> ID：14564862
> 
> 赞同：0
> 
> 时间：2013-01-28T15:05:42.060
> 
> 标签：c++, file-io

我有一个程序可以生成包含字符 A - Z 的随机分布的文件。我编写了一个方法，使用具有不同缓冲区大小的 fread 读取这些文件（并计算每个字符），以尝试确定读取的最佳块大小。这是方法：

```
int get_histogram(FILE * fp, long *hist, int block_size, long *milliseconds, long *filelen)
{
    char *buffer = new char[block_size];
    bzero(buffer, block_size);

    struct timeb t;
    ftime(&t);
    long start_in_ms = t.time * 1000 + t.millitm;

    size_t bytes_read = 0;
    while (!feof(fp))
    {
        bytes_read += fread(buffer, 1, block_size, fp);
        if (ferror (fp))
        {
            return -1;
        }
        int i;
        for (i = 0; i < block_size; i++)
        {
            int j;
            for (j = 0; j < 26; j++)
            {
                if (buffer[i] == 'A' + j)
                {
                    hist[j]++;
                }
            }
        }
    }

    ftime(&t);
    long end_in_ms = t.time * 1000 + t.millitm;
    *milliseconds = end_in_ms - start_in_ms;
    *filelen = bytes_read;

    return 0;
} 
```

但是，当我使用 2 - 2^20 的块大小绘制字节/秒与块大小（缓冲区大小）的关系时，我得到了 4 个字节的最佳块大小——这是不正确的。我的代码一定有问题，但我找不到。

任何建议表示赞赏。

问候。

编辑：

本练习的重点是通过记录不同缓冲区大小的读取时间（加上计算时间）来演示最佳缓冲区大小。文件指针由调用代码打开和关闭。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T15:13:30.917

这段代码有很多bug：

*   它使用`new[]`C++。
*   它不会释放分配的内存。
*   它总是循环`block_size`输入的字节，而不是`bytes_read`返回的`fread()`.

此外，实际的直方图代码效率相当低，因为它似乎遍历每个字符以确定它是哪个字符。

**更新**：删除了`feof()`在 I/O 之前使用是错误的说法，因为那不是真的。感谢 Eric 在评论中指出这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T15:12:26.800

您没有说明您在哪个平台上运行它，以及您使用的编译时间参数。

当然，这`fread()`涉及一些开销，离开用户模式并返回。另一方面，`hist[]`您不是直接设置信息，而是遍历字母表。这是不必要的，如果不进行优化，每个字节都会产生一些开销。

`hist[j-26]++`我会用或类似的东西重新测试这个。

通常，如果您的缓冲区大小等于给定媒体的系统缓冲区大小，则将获得最佳时机。

# android - 从 Android 应用发布文件

> ID：14564866
> 
> 赞同：0
> 
> 时间：2013-01-28T15:05:55.080
> 
> 标签：android, uploading

我需要从 Android 应用程序（200 - 500 kb）发送一个文件。我已经尝试了选定的脚本，但这些都返回了错误。

```
private void doFileUpload(String filename) {
    HttpURLConnection conn = null;
    DataOutputStream dos = null;
    DataInputStream inStream = null;
    String existingFileName = filename;
    String lineEnd = "\r\n";
    String twoHyphens = "--";
    String boundary =  "*****";
    int bytesRead, bytesAvailable, bufferSize;
    byte[] buffer;
    int maxBufferSize = 1*1024*1024;
    String responseFromServer = "";
    String urlString = "http://scary-story.ru/";

    try {
        //------------------ CLIENT REQUEST
        FileInputStream fileInputStream = new FileInputStream(new File(existingFileName) );
        // open a URL connection to the Servlet
        URL url = new URL(urlString);
        // Open a HTTP connection to the URL
        conn = (HttpURLConnection) url.openConnection();
        // Allow Inputs
        conn.setDoInput(true);
        // Allow Outputs
        conn.setDoOutput(true);
        // Don't use a cached copy.
        conn.setUseCaches(false);
        // Use a post method.
        conn.setRequestMethod("POST");
        conn.setRequestProperty("Connection", "Keep-Alive");
        conn.setRequestProperty("Content-Type", "multipart/form-data;boundary="+boundary);
        dos = new DataOutputStream( conn.getOutputStream() );
        dos.writeBytes(twoHyphens + boundary + lineEnd);
        dos.writeBytes("Content-Disposition: form-data; name=\"uploadedfile\";filename=\"" + existingFileName + "\"" + lineEnd);
        dos.writeBytes(lineEnd);
        // create a buffer of maximum size
        bytesAvailable = fileInputStream.available();
        bufferSize = Math.min(bytesAvailable, maxBufferSize);
        buffer = new byte[bufferSize];
        // read file and write it into form...
        bytesRead = fileInputStream.read(buffer, 0, bufferSize);

        while (bytesRead > 0) {
            dos.write(buffer, 0, bufferSize);
            bytesAvailable = fileInputStream.available();
            bufferSize = Math.min(bytesAvailable, maxBufferSize);
            bytesRead = fileInputStream.read(buffer, 0, bufferSize);
        }

        // send multipart form data necesssary after file data...
        dos.writeBytes(lineEnd);
        dos.writeBytes(twoHyphens + boundary + twoHyphens + lineEnd);
        // close streams
        Log.e("Debug","File is written");
        fileInputStream.close();
        dos.flush();
        dos.close();
    }
    catch (MalformedURLException ex) {
        Log.e("Debug", "error: " + ex.getMessage(), ex);
    }
    catch (IOException ioe) {
        Log.e("Debug", "error: " + ioe.getMessage(), ioe);
    }

    //------------------ read the SERVER RESPONSE
    try {
        inStream = new DataInputStream(conn.getInputStream());
        String str;

        while ((str = inStream.readLine()) != null) {
            Log.e("Debug","Server Response "+str);
        }
        inStream.close();
    }
    catch (IOException ioex) {
         Log.e("Debug", "error: " + ioex.getMessage(), ioex);
    }
} 
```

此脚本返回下一个错误并强制关闭应用程序。

```
01-28 16:54:20.729: E/AndroidRuntime(5647): FATAL EXCEPTION: main
01-28 16:54:20.729: E/AndroidRuntime(5647): android.os.NetworkOnMainThreadException
01-28 16:54:20.729: E/AndroidRuntime(5647):     at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1100)
01-28 16:54:20.729: E/AndroidRuntime(5647):     at java.net.InetAddress.lookupHostByName(InetAddress.java:426)
01-28 16:54:20.729: E/AndroidRuntime(5647):     at java.net.InetAddress.getAllByNameImpl(InetAddress.java:277)
01-28 16:54:20.729: E/AndroidRuntime(5647):     at java.net.InetAddress.getAllByName(InetAddress.java:251)
01-28 16:54:20.729: E/AndroidRuntime(5647):     at libcore.net.http.HttpConnection.<init>(HttpConnection.java:71)
01-28 16:54:20.729: E/AndroidRuntime(5647):     at libcore.net.http.HttpConnection.<init>(HttpConnection.java:50)
01-28 16:54:20.729: E/AndroidRuntime(5647):     at libcore.net.http.HttpConnection$Address.connect(HttpConnection.java:351)
01-28 16:54:20.729: E/AndroidRuntime(5647):     at libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:86)
01-28 16:54:20.729: E/AndroidRuntime(5647):     at libcore.net.http.HttpConnection.connect(HttpConnection.java:128)
01-28 16:54:20.729: E/AndroidRuntime(5647):     at libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:308)
01-28 16:54:20.729: E/AndroidRuntime(5647):     at libcore.net.http.HttpEngine.connect(HttpEngine.java:303)
01-28 16:54:20.729: E/AndroidRuntime(5647):     at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:282)
01-28 16:54:20.729: E/AndroidRuntime(5647):     at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:232)
01-28 16:54:20.729: E/AndroidRuntime(5647):     at libcore.net.http.HttpURLConnectionImpl.connect(HttpURLConnectionImpl.java:80)
01-28 16:54:20.729: E/AndroidRuntime(5647):     at libcore.net.http.HttpURLConnectionImpl.getOutputStream(HttpURLConnectionImpl.java:188)
01-28 16:54:20.729: E/AndroidRuntime(5647):     at com.example.testapp1.MainActivity.doFileUpload(MainActivity.java:342)
01-28 16:54:20.729: E/AndroidRuntime(5647):     at com.example.testapp1.MainActivity.stopRecording(MainActivity.java:186)
01-28 16:54:20.729: E/AndroidRuntime(5647):     at com.example.testapp1.MainActivity.access$2(MainActivity.java:170)
01-28 16:54:20.729: E/AndroidRuntime(5647):     at com.example.testapp1.MainActivity$1.onClick(MainActivity.java:302)
01-28 16:54:20.729: E/AndroidRuntime(5647):     at android.view.View.performClick(View.java:3524)
01-28 16:54:20.729: E/AndroidRuntime(5647):     at android.view.View$PerformClick.run(View.java:14226)
01-28 16:54:20.729: E/AndroidRuntime(5647):     at android.os.Handler.handleCallback(Handler.java:605)
01-28 16:54:20.729: E/AndroidRuntime(5647):     at android.os.Handler.dispatchMessage(Handler.java:92)
01-28 16:54:20.729: E/AndroidRuntime(5647):     at android.os.Looper.loop(Looper.java:137)
01-28 16:54:20.729: E/AndroidRuntime(5647):     at android.app.ActivityThread.main(ActivityThread.java:4516)
01-28 16:54:20.729: E/AndroidRuntime(5647):     at java.lang.reflect.Method.invokeNative(Native Method)
01-28 16:54:20.729: E/AndroidRuntime(5647):     at java.lang.reflect.Method.invoke(Method.java:511)
01-28 16:54:20.729: E/AndroidRuntime(5647):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
01-28 16:54:20.729: E/AndroidRuntime(5647):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
01-28 16:54:20.729: E/AndroidRuntime(5647):     at dalvik.system.NativeStart.main(Native Method) 
```

对不起，我的英语，我是乌克兰学生。

PS：[使用 Http Post 发送图像](https://stackoverflow.com/questions/2935946/sending-images-using-http-post)- 此方法不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T15:11:17.217

`NetworkOnMainThreadException`当您在主线程上执行网络相关操作时会发生。请参阅此[链接](https://stackoverflow.com/questions/6343166/android-os-networkonmainthreadexception)以解决您的问题。

# mysql - 通过mysql中的代码获取具有min（price）组的行的值

> ID：14564867
> 
> 赞同：0
> 
> 时间：2013-01-28T15:06:08.003
> 
> 标签：mysql, sql

我的表结构是这样的：

```
country                 | price  | code
---------------------------------------
EGYPT PROPER  WHOLESALE | 0.037  | 20
EGYPT FIXED             | 0.0710 | 20
EGYPT-OTHER             | .0497  | 20 
```

我必须使用 GROUP BY 代码，我希望输出为：

```
country                 | price  | code
---------------------------------------
EGYPT PROPER  WHOLESALE | 0.037  | 20 
```

具有价格的最小值。

我的查询是：

```
select MIN(inp.price) as Price, inp.code, inp.country
from tbl_input_values as inp 
GROUP BY code 
```

但我得到的输出为：

```
country         | price | code
------------------------------
EGYPT-OTHER     | .037  | 20 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T15:07:21.677

这里，

```
SELECT  *
FROM    tbl_input_values
WHERE   price = (SELECT MIN(PRICE) FROM tbl_input_values) 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/23ed6/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T15:13:04.067

这将显示每个代码具有最低价格的行：

```
SELECT yourtable.*
FROM yourtable
WHERE (code, price) IN (select code, min(price)
                        from yourtable
                        group by code) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T15:15:53.470

有多个代码：

```
SELECT tb1.* 
FROM tbl_input_values tb1
INNER JOIN (select code, min(price) minPrice
            FROM tbl_input_values
            GROUP BY code) as a
   ON a.code = tb1.code and a.minPrice =tb1.price 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T15:14:11.793

我认为最简单的方法是：

```
select t.*
from t
order by price
limit 1 
```

你根本不需要聚合。

# java - 将“新地图”结果绑定到 Hibernate 中的对象

> ID：14564870
> 
> 赞同：1
> 
> 时间：2013-01-28T15:06:12.800
> 
> 标签：java, hibernate, optimization, query-optimization

我正在创建一个繁重的 HQL 查询并尝试对其进行优化。有一个表`Product`，需要为每个产品计算一些统计数据，我们称之为`stat`。我正在尝试这种查询来一次获取所有产品及其统计信息（这是一个简化的查询，真正的查询要复杂得多）：

```
select new map(min(product) as prod, sum(somestat) as stat) 
from Product product
  left join product.stats somestat
group by product.id, product.name
order by product.name 
```

但是，当我尝试执行这种查询时，它首先执行主选择，然后执行 X 次`SELECT product.* FROM product WHERE product.id=?`选择返回的每个产品。

有没有办法让它从第一个查询中获取结果来创建那些 Product 实例？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T15:23:33.303

If you want the whole product, then hibernate is already doing the only reasonable thing: executing N+1 selects. You happen to group by the primary key so theoretically one could imagine doing it, but even in SQL you are not allowed to select any columns not used in group-by. Anyway, such custom trickery is beyond an ORM such as Hibernate.

# c++ - 人脸识别与 CAM 距离无关

> ID：14564874
> 
> 赞同：1
> 
> 时间：2013-01-28T15:06:26.847
> 
> 标签：c++, opencv, face-recognition

我正在做一个视频处理项目，它需要对主题的认可。但是我发现当主体移开或移到 CAM 时，它无法准确识别。我目前正在使用带阈值的 LBP 识别器模型......我是图像处理的新手，如果有人可以建议，我会很高兴一些预处理技术可以提高人脸识别的准确率......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T05:47:12.930

尝试下面指定的流程..

原始图像 -> OpenCV 人脸检测器 -> 裁剪人脸并将大小调整为恒定大小 -> 预处理，如 Hist Eq 或其他 -> LBP 人脸识别器 -> 结果

上述所有步骤都可以使用 OpenCV 完成。在每个步骤中尝试不同的算法...

另外，您为什么不在训练期间收集许多图像说 - 要求用户将头部从左向右转动.. 上下... 前后... 这样，您将在识别过程中涵盖所有可能的变化...

# python - 具有范围结构的python中的正则表达式

> ID：14564875
> 
> 赞同：0
> 
> 时间：2013-01-28T15:06:32.340
> 
> 标签：python, regex

我需要在具有以下格式混合结构的字符串中获取较低和较高的值：

```
Rules:
1\. If lower and upper range is available then they are separated by '-'. 
2\. Sometimes the range is written as <=xx.y

2a. If 'less than' is anywhere in the text then search for the number. pl. see Example below:

3\. If at all age range appears then it appears always before the range, separated from range by a ':'
4\. the unit is optional 
```

示例数据

```
10.0 - 35.0 MCG/ML
<=6.0 MG/24 H
51-60 YEARS: 37-129
15 - 60
0.5-9.9 %
LESS THAN 30 PG/ML
LESS THAN OR EQUAL 35 UG/DL
LESS THAN OR EQUAL TO 35
NEGATIVE: LESS THAN 20
REF RANGE LESS THAN 2.0
1.3 OR LESS PMOL/L
LAR: LESS THAN 1 NG/M 
```

从上面的示例中，我的输出将是：

```
10.0,35.0, MCG/ML
0, 6.0, MG/24 H
37, 129,
15,60
0.5, 9.9, % 
```

编辑：

```
the string is in 'refVal'
re.search(r'([0-9]*\.?[0-9]*)\s*-\s*([0-9]*\.?[0-9]*)', refVal)
re.search(r'(<=|<|<\s*=|<\sOR\s=)\s*([0-9.]+)', refVal) 
```

我在上面的示例中添加了更多示例（尤其是小于）。如果文本中有“小于”，我想编写获取值的正则表达式。

以下给了我不需要的“无”。

```
>>> re.search(r'([0-9.]+) OR LESS|LESS THAN ([0-9.]+)', '5.4 OR LESS').groups()
('5.4', None) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T15:31:01.073

IMO，您不会仅使用正则表达式获得可靠的解决方案。如果是我，我会把它分解成多个条件和正则表达式。话虽如此，对于狗屎和笑容，我确实想出了这个......它确实匹配上面的所有内容，但它很丑; 对于初学者，数据根据格式被捕获到不同的组......

```
(?(?=.*:).*:\s*([0-9.]+)\s*-\s*([0-9.]+)|(?(?=.*\<=)(.*?)<=\s*([0-9.]+)\s*(.*)|([0-9.]+)\s*-\s*([0-9.]+)\s*(.*))) 
```

# event-handling - Facebook 应用登录：是否可以捕获“cancelButtonPressed”事件？

> ID：14564876
> 
> 赞同：1
> 
> 时间：2013-01-28T15:06:33.153
> 
> 标签：event-handling, authorization, facebook-ios-sdk

是否可以通过授权流程捕获事件“ **CancelButtonPressed” ？**`Facebook App``facebook-ios-sdk`

我使用相当旧的版本`Facebook SDK for IOS`并像这样打开会话：

```
[_facebookSession openWithBehavior:FBSessionLoginBehaviorWithNoFallbackToWebView
                             completionHandler:^(FBSession *session, FBSessionState status, NSError *error) {
                NSLog(@"this is FBSession State: %d",status);
                NSLog(@"this is NSError: %@",error);
                NSLog(@"create new session with permissions: %@",_facebookSession.permissions);
            }]; 
```

我看到了[这个](http://facebook.stackoverflow.com/questions/12684428/how-to-return-to-app-if-user-cancel-facebook-login)问题，但也许有些东西改变了`Facebook IOS SDK`？

也许有人知道答案或好的解决方案？

感谢帮助！

**编辑：**

```
if ([_facebookSession state]==FBSessionStateCreatedOpening){
    // if we call FBApp, facebook session will be in this state (createdOpening)
    // and we need to check it and close, to recall FBApp
    [_facebookSession closeAndClearTokenInformation];
    // and now recrate session and open it ;)
    _facebookSession = [[FBSession alloc] initWithAppID:kAppId
                                                    permissions:permissions
                                                urlSchemeSuffix:nil
                                             tokenCacheStrategy:[FBSessionTokenCachingStrategy defaultInstance]
                                ];

    //and reopen it like `[_facebookSession openWith... ];`
} 
```

# android - Android编程sqlite数据库通过String值排序查询到listview

> ID：14564877
> 
> 赞同：0
> 
> 时间：2013-01-28T15:06:34.117
> 
> 标签：android, sqlite, sql-order-by, where-clause

我有一个查询，它使用 where 子句根据 Day 值从 sqlite 数据库获取数据，我得到的数据是“星期一”，然后将这些数据填充到列表视图中。除此之外，我想按时间升序对数据进行排序，以形成一个列表，其中包含从最早到最晚开始时间的周一所有事件。

按天查询：

```
public Cursor getMonday () {
String Monday = "Monday";
return db.query(
    DATABASE_TABLE,
    new String[] { KEY_ID, KEY_LESSON, KEY_DAY, KEY_START, KEY_END, KEY_LOCATION}, 
    KEY_DAY + "=?", 
    new String[] {Monday},
    null, null, null);
} 
```

我试过了：

```
public Cursor getMonday () {
    String Monday = "Monday";
    return db.query(DATABASE_TABLE, 
        new String[] {KEY_ID, KEY_LESSON, KEY_DAY, KEY_START,KEY_END, KEY_LOCATION},
        KEY_DAY + "=?", 
        new String[] {Monday}, 
        null, null, null, 
        KEY_START + " ASC");
  } 
```

这通常会起作用，但我想 WHERE 子句和 order by 的顺序不正确，我不知道如何让它们协同工作。有人可以建议吗？谢谢。

这是我得到的错误：

```
01-28 14:24:02.738: E/AndroidRuntime(1672): FATAL EXCEPTION: main
01-28 14:24:02.738: E/AndroidRuntime(1672): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.unischeduler/com.example.unischeduler.ScheduleActivity}: java.lang.IllegalArgumentException: invalid LIMIT clauses:Start ASC 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T15:10:17.003

您的参数顺序不正确，请尝试以下操作：

```
 public Cursor getMonday () {

 String Monday = "Monday";

 return db.query(DATABASE_TABLE, 
         new String[] {KEY_ID, KEY_LESSON, KEY_DAY, KEY_START,
                        KEY_END, KEY_LOCATION}, KEY_DAY + "=?", 
    new String[] {Monday}, null, null, KEY_START + " ASC", null);

  } 
```

**编辑**建议以 hh:mm 格式订购：

看看[SQLite 日期和时间函数](http://www.sqlite.org/lang_datefunc.html)，也许你可以尝试（我还没有测试过）这样的东西：

```
 return db.query(DATABASE_TABLE, 
         new String[] {KEY_ID, KEY_LESSON, KEY_DAY, KEY_START,
                        KEY_END, KEY_LOCATION}, KEY_DAY + "=?", 
    new String[] {Monday}, null, null, "strftime('%H:%M', " + KEY_START + ")", null); 
```

# c++ - 使用地图时出现分段错误

> ID：14564878
> 
> 赞同：0
> 
> 时间：2013-01-28T15:06:34.430
> 
> 标签：c++, map, segmentation-fault

对地图执行任何操作时出现分段错误。它的声明如下：

```
typedef std::map<uint16_t, std::vector<std::pair<std::string, uint16_t> > > bitMap_t; 
```

然后我有一个使用这张地图的私人班级成员

```
 private:
        bitMap_t m_bitMap; 
```

我使用此地图的代码如下所示

```
uint16_t i = 1;
uint16_t j = 0;
uint16_t reg = 0;
uint16_t regIndex = 0;
uint8_t regSizeWords = 0;

for (regIndex = 0; regIndex < NUMBER_OF_BIT_REGS; regIndex++) {
    for (i = 1, reg = m_regList[regIndex].address; reg < (m_regList[regIndex].address + REGS_SIZE); reg++, i++) {
        for (j = 0; j < m_regList[regIndex].signalsAndBitMasks.size(); j++) {
            ostringstream signalName;
            signalName << m_regList[regIndex].signalsAndBitMasks[j].first << "." << i;

            m_bitMap[reg].push_back(make_pair(signalName.str(), m_regList[regIndex].signalsAndBitMasks[j].second));
        }
    }
} 
```

我还测试了在所有这些代码之前只做一个 m_bitMap.clear() 并且这也不起作用。所以我猜它与嵌套地图、向量和对或？段错误错误如下所示：

> `std::less<unsigned short>::operator() at stl_function.h:230 0x805e8da
> std::_Rb_tree<unsigned short, std::pair<unsigned short const, std::vector<std::pair<std::string, unsigned short>, std::allocator<std::pair<std::string, unsigned short> > > >, std::_Select1st<std::pair<unsigned short const, std::vector<std::pair<std::string, unsigned short>, std::allocator<std::pair<std::string, unsigned short> > > > >, std::less<unsigned short>, std::allocator<std::pair<unsigned short const, std::vector<std::pair<std::string, unsigned short>, std::allocator<std::pair<std::string, unsigned short> > > > > >::_M_lower_bound() at stl_tree.h:986 0x8063a0f`
> 
> `std::_Rb_tree<unsigned short, std::pair<unsigned short const, std::vector<std::pair<std::string, unsigned short>, std::allocator<std::pair<std::string, unsigned short> > > >, std::_Select1st<std::pair<unsigned short const, std::vector<std::pair<std::string, unsigned short>, std::allocator<std::pair<std::string, unsigned short> > > > >, std::less<unsigned short>, std::allocator<std::pair<unsigned short const, std::vector<std::pair<std::string, unsigned short>, std::allocator<std::pair<std::string, unsigned short> > > > > >::lower_bound() at stl_tree.h:745 0x8063531`
> 
> `std::map<unsigned short, std::vector<std::pair<std::string, unsigned short>, std::allocator<std::pair<std::string, unsigned short> > >, std::less<unsigned short>, std::allocator<std::pair<unsigned short const, std::vector<std::pair<std::string, unsigned short>, std::allocator<std::pair<std::string, unsigned short> > > > > >::lower_bound() at stl_map.h:701 0x806311a`
> 
> `std::map<unsigned short, std::vector<std::pair<std::string, unsigned short>, std::allocator<std::pair<std::string, unsigned short> > >, std::less<unsigned short>, std::allocator<std::pair<unsigned short const, std::vector<std::pair<std::string, unsigned short>, std::allocator<std::pair<std::string, unsigned short> > > > > >::operator[]() at stl_map.h:447 0x8062bc1`
> 
> `srvmgr::MbBitMap::InitBitMap() at mbbitmap.cpp:175 0x80620cc`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T15:42:22.790

到目前为止，最常见的原因首先是实际上没有地图。

你写地图是`private: bitMap_t m_bitMap;`，即一个对象的成员。我敢打赌你有一个指向这个对象的指针（`MbBitMap`？），但由于某种原因，与这个指针无关的`std::map`是无效的。

# rspec2 - 使用突变 gem 对 ActiveRecord 模型进行突变测试

> ID：14564880
> 
> 赞同：4
> 
> 时间：2013-01-28T15:06:36.523
> 
> 标签：rspec2, rspec-rails, rails-activerecord, mutation-testing

我一直在尝试开始对我们的 rails 应用程序进行突变测试，但无法让它工作 - 有没有人设法设置它？

这是我到目前为止所尝试的：

```
mutant -I app/models -r foo "Foo#bar" foo_spec.rb
.../trunk/app/models/foo.rb:24:in `<top (required)>': uninitialized constant ActiveRecord (NameError) 
```

我还尝试使用 -I 直接加载 activerecord gem，gem 已经安装在当前的 rvm gemset 中 - 我感觉这将涉及一些更完整的设置来使用 database.yml，不幸的是我可以似乎找不到任何已经这样做的人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-29T13:25:06.693

免责声明：突变作者在这里发言。

假设您使用带有 rspec 的 rails，您可以通过以下命令行测试您的模型：

`RAILS_ENV=test bundle exec mutant -r ./config/environment --use rspec YourModel`

有一个[README 部分](https://github.com/mbj/mutant#rails)解释了 rails 集成。如果您遇到问题，请访问以确保您有最新的说明。

# c++ - C++：首先声明哪个结构？

> ID：14564881
> 
> 赞同：0
> 
> 时间：2013-01-28T15:06:36.753
> 
> 标签：c++, struct

我编写了一个使用 C++ stl 的程序`set`。有一个`struct event`用来构造集合的，它对应的`binary predicate`..`struct comp`来定义它们在集合中的顺序。

代码部分如下所示：

```
struct event
{
    int s;
    int f;
    int w;
    set<event,comp>::iterator nxt;
};
struct comp
{
    bool operator()(event a, event b)
    {
        if(a.f!=b.f)
            return a.f<b.f;
        else
        {
            if(a.s!=b.s)
                return a.s<b.s;
            else
                return a.w>b.w;
        }
    }
};

set< event , comp > S; 
```

我在这里面临的问题是先写哪个结构？我已经尝试前向声明这两个结构。在这两种情况下我都有编译器错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T15:09:27.567

您需要在创建`std::set`对象之前包含这两个定义：

```
std::set<event,myComp> S; 
```

前向声明对你不起作用，因为一旦你前向声明一个类型，它就会变成一个不完整的类型，在这种情况下，编译器需要知道这两种类型的布局和大小。仅当编译器不需要知道类型的大小或布局时，不完整类型才起作用，例如：指向该类型的指针，因为所有指针都具有相同的大小。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T15:17:35.740

你可以这样做。注意引用的使用。

```
struct event;
struct comp
{
    bool operator()(const event& a, const event& b);
}
struct event
{
    int s;
    int f;
    int w;
    set<event,comp>::iterator nxt;
};
bool comp::operator()(const event& a, const event& b)
{
    if(a.f!=b.f)
        return a.f<b.f;
    else
    {
        if(a.s!=b.s)
            return a.s<b.s;
        else
            return a.w>b.w;
    }
} 
```

# iis - IIS ARR - 多个反向代理

> ID：14564890
> 
> 赞同：0
> 
> 时间：2013-01-28T15:06:59.460
> 
> 标签：iis, url-rewriting, reverse-proxy

这可能吗？

我们已经在我们的服务器上设置了 ARR，并使用反向代理规则为 SSL 和 URL 重写添加了一个新的绑定，它工作正常。

是否可以编辑它，例如...

```
Binding Address: server1
https://server1/portal/server2 > Uses ARR to go to http://server2 internally.
https://server1/portal/server3 > Uses ARR to go to http://server3 internally. 
```

我想说的是，是否可以使用 URL 重写从一个站点的绑定中获得多个反向代理？

或者是否可以在 PHP 中构建类似的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T20:00:27.230

是的，这应该可以正常工作。您唯一需要注意的是，您使用出站重写来修改内容中的 URL`server2`并`server3`添加`/portal/server2`和添加`/portal/server3`到任何 URL，否则静态内容可能无法加载，并且到内部页面的链接可能不会指向正确的 URL。

# asp.net - ASP.net/Linq 的奇怪缓存问题

> ID：14564896
> 
> 赞同：1
> 
> 时间：2013-01-28T15:07:13.487
> 
> 标签：asp.net, linq, webforms

我正在编写一个涉及存储配置文件的应用程序。我正在使用 Linq 访问数据库，但在保存配置文件时遇到了一个奇怪的问题。当我保存它时，它会正确写入数据库 - 但是当我离开页面并返回时，旧值仍保留在配置文件形式中。

我的个人资料页面：

```
if(!Page.IsPostBack) {
    Profile p = Student.GetProfile(Int32.Parse(Session["userID"].ToString()));
    if (p != null)
    {
          FirstNameTextBox.Text = p.FirstName;
          LastNameTextBox.Text = p.LastName;
          Address1TextBox.Text = p.Address1;
          .....
    } 
```

还有我的学生课：

```
 public static Profile GetProfile(int uID)
    {
        var profile = (from p in db.Profiles
                       where p.uID == uID
                       select p).FirstOrDefault();
        return profile;
    } 
```

我没有在任何地方做任何花哨的缓存，所以不确定旧值的存储位置......

** 编辑 **

所以，它似乎归结为一个全局的 LinqDataContext。在我的学生课上，我有：

```
public class Student
{
    private static LinqClassesDataContext db = new LinqClassesDataContext() { CommandTimeout = 36000 };

    public static Profile GetProfile(int uID)
    {
            var profile = (from p in db.Profiles
                           where p.uID == uID
                           select p).FirstOrDefault();
            return profile;   
    } 
```

如果我给 GetProfile 方法它自己的 DataContext，问题就解决了。

对于 Linq 来说仍然很新，拥有一个具有众多方法的类的最佳方法是使用相同的数据库访问权限？有这样的全球背景吗？还是每种方法都使用自己的数据上下文？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T15:10:15.467

假设您将其存储`userID`在`Session["userID"]`某处并且在保存时没有将其清除，这可能是“缓存”发生的地方。 `Session`对象将（大致）在浏览器会话的生命周期内（或者如果启用内存会话，则在服务器进程的生命周期内）存活。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T15:11:54.740

我猜即使 linq 将查询发送到数据库，它也会使用存储在缓存中的旧值。所以如果你想要新值，你必须清除缓存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T18:13:14.553

它最终成为我使用的 DataContext。我不完全确定为什么这解决了这个问题，但我改变了我的课程：

```
public class Student
{
   private static LinqClassesDataContext db = new LinqClassesDataContext() { CommandTimeout = 36000 };

   public static Profile GetProfile(int uID)
   {
        var profile = (from p in db.Profiles
                       where p.uID == uID
                       select p).FirstOrDefault();
        return profile;   
   }
} 
```

至：

```
public class Student
{
   public static Profile GetProfile(int uID)
   {     
        LinqClassesDataContext db = new LinqClassesDataContext();
        var profile = (from p in db.Profiles
                       where p.uID == uID
                       select p).FirstOrDefault();
        return profile;   
   }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T15:27:17.010

继续您添加的评论，我猜您正在获取的页面是由浏览器/http服务器缓存的。如果 url 与先前请求的页面相同，则某些默认设置将告诉浏览器/服务器使用缓存 html。为了避免这种情况并为每个请求获取新的 html，您可以尝试在 html 的 head 标记中添加元标记。

```
<meta http-equiv="Pragma" CONTENT="no-cache"> 
```

# php - 服务器发送的事件和 php - 什么触发服务器上的事件？

> ID：14564903
> 
> 赞同：109
> 
> 时间：2013-01-28T15:07:29.233
> 
> 标签：php, server-sent-events

全部，

HTML5 Rocks 有一个关于服务器发送事件 (SSE) 的不错的初学者教程：

[http://www.html5rocks.com/en/tutorials/eventsource/basics/](http://www.html5rocks.com/en/tutorials/eventsource/basics/)

但是，我不明白一个重要的概念 - 是什么触发了服务器上导致发送消息的事件？

换句话说 - 在 HTML5 示例中 - 服务器只发送一次*时间戳*：

```
<?php
header('Content-Type: text/event-stream');
header('Cache-Control: no-cache'); // recommended to prevent caching of event data.
function sendMsg($id, $msg) {
  echo "id: $id" . PHP_EOL;
  echo "data: $msg" . PHP_EOL;
  echo PHP_EOL;
  ob_flush();
  flush();
}
$serverTime = time();
sendMsg($serverTime, 'server time: ' . date("h:i:s", time())); 
```

如果我正在构建一个实际示例——例如，Facebook 风格的“墙”或股票行情，其中服务器会在每次数据更改时向客户端“推送”一条新消息，它是如何工作的？

换句话说... ***PHP 脚本是否有一个连续运行的循环，检查数据的变化，然后在每次找到时发送一条消息？如果是这样 - 你怎么知道什么时候结束这个过程？***

或者 - PHP 脚本是否只是发送消息，然后结束（在 HTML5Rocks 示例中似乎就是这种情况）？如果是这样 - 您如何获得持续更新？浏览器是否只是定期轮询 PHP 页面？如果是这样 - 那是一个“服务器发送的事件”吗？这与在 JavaScript 中使用 AJAX 定期调用 PHP 页面的 setInterval 函数有何不同？

抱歉 - 这可能是一个非常幼稚的问题。但是我找不到的例子都没有说明这一点。

[更新]

我认为我的问题措辞不佳，所以这里有一些澄清。

假设我有一个网页应该显示 Apple 股票的最新价格。

当用户第一次打开页面时，页面会使用我的“流”的 URL 创建一个 EventSource。

```
var source = new EventSource('stream.php'); 
```

我的问题是——“stream.php”应该如何工作？

像这样？（伪代码）：

```
<?php
    header('Content-Type: text/event-stream');
    header('Cache-Control: no-cache'); // recommended to prevent caching of event data.
    function sendMsg($msg) {
        echo "data: $msg" . PHP_EOL;
        echo PHP_EOL;
        flush();
    }

    while (some condition) {
        // check whether Apple's stock price has changed
        // e.g., by querying a database, or calling a web service
        // if it HAS changed, sendMsg with new price to client
        // otherwise, do nothing (until next loop)
        sleep (n) // wait n seconds until checking again
    }
?> 
```

换句话说 - 只要客户端“连接”到它，“stream.php”就保持打开状态吗？

如果是这样 - 这是否意味着您运行`stream.php`的线程数与并发用户数一样多？如果是这样 - 这是远程可行的，还是构建应用程序的适当方式？你怎么知道什么时候可以*结束*一个实例`stream.php`？

我的天真印象是，如果是这样的话，PHP**不**适合这种服务器。但是到目前为止我看到的所有演示都暗示 PHP 对此很好，这就是为什么我如此困惑......

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-02-12T01:50:54.990

服务器发送的事件用于从服务器端到客户端的实时更新。在第一个示例中，来自服务器的连接没有保留，客户端每 3 秒尝试再次连接，使服务器发送的事件与 ajax 轮询没有区别。

因此，要使连接持续存在，您需要将代码包装在一个循环中并不断检查更新。

PHP 是基于线程的，更多的连接用户会使服务器耗尽资源。这可以通过控制脚本执行时间并在脚本超过一定时间（即 10 分钟）时结束脚本来解决。API将`EventSource`自动再次连接，因此延迟在可接受的范围内。

另外，查看我[的服务器发送事件的 PHP 库](https://github.com/licson0729/libSSE-php)，您可以了解更多关于如何在 PHP 中执行服务器发送事件并使其更容易编码。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2013-11-01T00:44:16.050

> “......只要客户端“连接”到它，“stream.php”是否保持打开状态？

是的，您的伪代码是一种合理的方法。

> “你怎么知道什么时候可以结束 stream.php 的实例？”

在最典型的情况下，这发生在用户离开您的网站时。（Apache 识别出关闭的套接字，并杀死 PHP 实例。）您可能从服务器端关闭套接字的主要时间是如果您知道一段时间内将没有数据；您发送给客户的最后一条消息是告诉他们在某个时间回来。例如，在您的股票流媒体案例中，您可以在晚上 8 点关闭连接，并告诉客户在 8 小时内回来（假设纳斯达克从凌晨 4 点到晚上 8 点开放报价）。星期五晚上你告诉他们星期一早上回来。（我有一本即将出版的关于 SSE 的书，并专门针对这个主题进行了几节。）

> “...如果是这样的话，PHP 不是一种适合这种服务器的技术。但是到目前为止我所看到的所有演示都暗示 PHP 对此很好，这就是为什么我如此使困惑...”

好吧，人们争辩说 PHP 不是适合普通网站的技术，他们是对的：如果用 C++ 替换整个 LAMP 堆栈，则可以用更少的内存和 CPU 周期来做到这一点。然而，尽管如此，PHP 为大多数网站提供了良好的支持。它是一种非常高效的 Web 工作语言，因为它结合了熟悉的类 C 语法和许多库，并且对于管理人员来说是一种安慰，因为有大量的 PHP 程序员可以雇用，大量的书籍和其他资源，以及一些大型的用例（例如 Facebook 和维基百科）。这些基本上与您可能选择 PHP 作为您的流技术的原因相同。

典型的设置不会是每个 PHP 实例与 NASDAQ 的一个连接。相反，您将有另一个进程与 NASDAQ 的单一连接，或者集群中的每台机器到 NASDAQ 的单一连接。然后将价格推入 SQL/NoSQL 服务器或共享内存。然后 PHP 只是轮询共享内存（或数据库），并将数据推出。或者，有一个数据收集服务器，每个 PHP 实例打开一个到该服务器的套接字连接。数据收集服务器在接收到更新时向其每个 PHP 客户端推送更新，然后它们又将这些数据推送到其客户端。

使用 Apache+PHP 进行流式传输的主要可扩展性问题是每个 Apache 进程的内存。当您达到硬件的内存限制时，做出业务决策，将另一台机器添加到集群中，或者将 Apache 排除在循环之外，并编写一个专用的 HTTP 服务器。后者可以在 PHP 中完成，因此您现有的所有知识和代码都可以重复使用，或者您可以用另一种语言重写整个应用程序。我这个纯粹的开发人员会用 C++ 编写一个专用的、流线型的 HTTP 服务器。我的经理会添加另一个盒子。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-02-13T12:28:09.727

我注意到 sse techink 向客户端发送每两个延迟数据（类似于从客户端页面前 Ajax 池数据中反转池数据 techink。）所以为了克服这个问题，我在 sseServer.php 页面上做了这个：

```
<?php
        session_start();
        header('Content-Type: text/event-stream');
        header('Cache-Control: no-cache'); // recommended to prevent caching of event data
        require 'sse.php';
        if ($_POST['message'] != ""){
                $_SESSION['message'] = $_POST['message'];
                $_SESSION['serverTime'] = time();
        }
        sendMsg($_SESSION['serverTime'], $_SESSION['message'] );
?> 
```

sse.php 是：

```
<?php
function sendMsg($id, $msg) {
  echo "id: $id" . PHP_EOL;
  echo "data: $msg" . PHP_EOL;
  echo PHP_EOL;
  ob_flush();
  flush();
}
?> 
```

请注意，在 sseSerer.php 我开始一个会话并使用一个会话变量！来克服这个问题。

`variable message`此外，每次我想“更新”消息时，我都会通过 Ajax 调用 sseServer.php（发布并将值设置为）。

现在在 jQuery (javascript) 我做这样的事情： 1）我声明一个全局变量**var timeStamp=0;** 2nd）我使用下一个算法：

```
if(typeof(EventSource)!=="undefined"){
        var source=new EventSource("sseServer.php");
        source.onmessage=function(event)
        if ((timeStamp!=event.lastEventId) && (timeStamp!=0)){
                /* this is initialization */
                timeStamp=event.lastEventId;
                $.notify("Please refresh "+event.data, "info");
        } else {
                if (timeStamp==0){
                         timeStamp=event.lastEventId;
                }
        } /* fi */

} else {
        document.getElementById("result").innerHTML="Sorry, your browser does not support server-sent events...";
} /* fi */ 
```

在 : 行`$.notify("Please refresh "+event.data, "info");` 是否可以处理消息。

对于我的情况，我曾经发送一个 jQuery 通知。

您可以使用 POSIX PIPES 或数据库表来通过 POST 传递“消息”，因为 sseServer.php 执行类似于“无限循环”的操作。

我当时的问题是，上面的代码不会将“消息”发送给所有客户端，而只会发送给一对（调用 sseServer.php 的客户端对每一对都是单独的）所以我将更改技术并改为从我想触发“消息”的页面更新数据库，然后是 sseServer.php，而不是通过 POST 获取消息，它将从数据库表中获取。

我希望我有帮助！

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-28T15:12:46.847

这确实是关于您的应用程序的结构性问题。实时事件是您想从一开始就考虑的事情，因此您可以围绕它设计您的应用程序。如果您编写的应用程序只使用字符串查询运行一堆随机`mysql(i)_query`方法并且不通过任何类型的中介传递它们，那么很多时候您将别无选择，只能重写大部分应用程序，或者持续的服务器端轮询。

但是，如果您将实体作为对象进行管理并通过某种中间类传递它们，则可以挂钩该过程。看这个例子：

```
<?php
class MyQueryManager {
    public function find($myObject, $objectId) {
        // Issue a select query against the database to get this object
    }

    public function save($myObject) {
        // Issue a query that saves the object to the database
        // Fire a new "save" event for the type of object passed to this method
    }

    public function delete($myObject) {
        // Fire a "delete" event for the type of object
    }
} 
```

在您的应用程序中，当您准备好保存时：

```
<?php
$someObject = $queryManager->find("MyObjectName", 1);
$someObject->setDateTimeUpdated(time());
$queryManager->save($someObject); 
```

这不是最优雅的例子，但它应该作为一个体面的构建块。您可以连接到您的实际持久层来处理触发这些事件。然后您立即获得它们（尽可能实时），而无需敲击您的服务器（因为您无需不断地查询您的数据库并查看事情是否发生了变化）。

您显然不会以这种方式捕获对数据库的手动更改 - 但如果您以任何频率手动对数据库执行任何操作，您应该：

*   修复需要手动更改的问题
*   构建一个工具来加快进程，并触发这些事件

* * *

## 回答 #5

> 赞同：-7
> 
> 时间：2015-04-19T17:47:13.057

基本上，PHP 不适合这类事情。是的，你可以让它工作，但在高负载下这将是一场灾难。我们运行股票服务器，通过 websockets 向数十万用户发送股票变化信号——如果我们为此使用 php……好吧，我们可以，但是那些自制的周期——只是一场噩梦。每个连接都会在服务器上创建一个单独的进程，或者您必须处理来自某种数据库的连接。

只需使用 nodejs 和 socket.io。它将让您在几天内轻松启动并拥有一个正在运行的服务器。Nodejs 也有自己的局限性，但对于 websockets（和 SSE）连接来说，它现在是最强大的技术。

而且 - SSE 并不像看起来那么好。websockets 的唯一优点是数据包被本地压缩（ws 不是压缩的），但缺点是 SSE 是单向连接。您的用户，如果他想在下标中添加另一个股票代码，则必须发出 ajax 请求（包括所有与源控制有关的问题，并且请求会很慢）。在 websockets 中，客户端和服务器在一个打开的连接中进行双向通信，因此如果用户发送交易信号或订阅报价，他只需在已打开的连接中发送一个字符串。而且速度很快。

# python - 如何将制表键发送到 python 子进程的标准输入

> ID：14564904
> 
> 赞同：2
> 
> 时间：2013-01-28T15:07:28.923
> 
> 标签：python, subprocess, readline, tab-completion

**背景：** 我有一个 Python 子进程，它连接到一个类似 shell 的应用程序，该应用程序使用 readline 库来处理输入，并且该应用程序有一个用于命令输入的 TAB 完成例程，就像 bash 一样。生成子进程，如下所示：

```
def get_cli_subprocess_handle():
    return subprocess.Popen(
                            '/bin/myshell',
                            shell=False,
                            stdin=subprocess.PIPE,
                            stdout=subprocess.PIPE,
                            stderr=subprocess.STDOUT,
                            ) 
```

一切都很好，除了制表符完成。每当我的 Python 程序将制表符传递`'\t'`给子进程时，我会在 STDIN 中获得 5 个空格，而不是触发 readline 库的制表符完成例程。:(

**问题：** 我可以向子进程的 STDIN 发送什么来触发子进程的 tab-complete 功能？也许以另一种方式问：如果可能的话，我如何发送 TAB ***key***而不是 TAB ***character ？***

**相关但未得到答复和出轨：**

[触发围绕readline构建的python批处理的选项卡完成](https://stackoverflow.com/questions/12378473/trigger-tab-completion-for-python-batch-process-built-around-readline)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T15:52:59.240

类似外壳的应用程序可能会区分连接到标准输入的终端和连接到它的管道。许多 Unix 实用程序这样做是为了优化它们的缓冲（行与块），类似 shell 的实用程序可能会禁用批处理输入（即 PIPE）的命令完成功能以避免意外结果。命令完成实际上是一个交互式功能，需要终端输入。

检查`pty`模块并尝试使用主/从对作为子进程的管道。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T15:46:36.907

确实没有向管道发送制表**键这样的事情。**管道只能接受位字符串，如果制表符不这样做，则可能没有解决方案。

有一个项目可以做类似的事情，叫做[pexpect](http://www.noah.org/wiki/pexpect)。只看它的`interact()`代码，我没有看到任何明显的东西使它工作，而你的却没有。鉴于此，最可能的解释是 pexpect 实际上做了一些工作以使自己看起来像一个伪终端。也许您可以为此合并它的代码？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T17:45:54.923

根据[isedev的回答](https://stackoverflow.com/a/14565848/538418)，我修改了我的代码如下：

```
import os, pty

def get_cli_subprocess_handle():
    masterPTY, slaveTTY = pty.openpty()
    return masterPTY, slaveTTY, subprocess.Popen(
                                                 '/bin/myshell',
                                                 shell=False,
                                                 stdin=slaveTTY,
                                                 stdout=slaveTTY,
                                                 stderr=slaveTTY,
                                                 ) 
```

使用这个返回的元组，我能够根据需要执行，`select.select([masterPTY],[],[])`并且`os.read(masterPTY, 1024)`我使用与 pty 模块源中的私有方法非常相似的函数写入 master-pty：

```
def write_all(masterPTY, data):
    """Successively write all of data into a file-descriptor."""
    while data:
        chars_written = os.write(masterPTY, data)
        data = data[chars_written:]
    return data 
```

感谢所有人提供的良好解决方案。希望这个例子对其他人有所帮助。:)

# c++ - Windows 中的 DLL 链接错误

> ID：14564906
> 
> 赞同：0
> 
> 时间：2013-01-28T15:07:36.807
> 
> 标签：c++, qt, dll

最近我为我的项目找到了一个动态链接库。可以在[这里](http://pedsim.silmaril.org/)找到。但是，我真的很难让它工作。我下载的是一个 .dll 文件和一些 .h 头文件。我的 IDE 是 Qt SDk 1.2（Qt 4.8.1）。

编译演示代码后，我的编译器抱怨“由于 'dllexport' 属性，符号 'Ped::LIBPEDSIM_VERSION' 需要外部链接”

它在 ped_includes.h 中。所以经过一番搜索，我在文件中添加了 extern "C++"。现在看起来像这样：

```
#ifndef _ped_includes_h_
#define _ped_includes_h_ 1

#include "ped_agent.h"
#include "ped_obstacle.h"
#include "ped_waypoint.h"
#include "ped_scene.h"
extern "C++"    //what I added.
namespace Ped {
    const double LIBEXPORT LIBPEDSIM_VERSION = 2.2;
}

#endif 
```

这次错误消失了，我得到了很多“**未定义的对 XX::XX::XX()**的引用”错误。我试图将 dll 的路径添加到 .pro 文件中：

```
LIBS += -LE:\\klive\\code\\QtProgram\\libpedsim-example\\libpedsim.dll 
```

但它不起作用。

现在我想知道的是我是否正确修改了'ped_includes.h'，有没有extern语句有什么区别？另外，如何解决联动错误？

# excel - 需要 Excel SUBTOTAL 有条件地使用来自不同列的总和

> ID：14564908
> 
> 赞同：3
> 
> 时间：2013-01-28T15:07:37.833
> 
> 标签：excel, subtotal

我有一个相当简单的 Excel 2007 工作表，其中包含三列；名称（A 列）、Value1（B 列）和 Value2（C 列）。此工作表通常会按名称列自动过滤。

在第二列的底部，我想执行 B 列的条件小计，遵守任何过滤器，遵循以下规则：如果给定的行 B 列为 0，则使用 C 列中该行的值，*否则，应忽略 C 列。*

```
 A         B         C       
1   Name     Value1    Value2
2  Bob         100         6   <-- use 100, ignore 6 in Col C because B is non-zero
3  Bob         200             <-- use 200
4  Bob           0        50   <-- Col B=0, use C, thus 50 (and so on)
5  Bob         300
6  Ralph        10
7  Ralph        20         1   <-- use 20 from col B, ignore col 6.
8  Ralph         0        60
9  Ralph        50
10 Mary       1000
11 Mary       1200
12 Mary          0       250
13 Mary       1040       
14 Subtotal   4280 
```

现在，我可以用公式得到我想要的*总值：*

=SUMPRODUCT(--(B2:B13=0),C2:C13)+小计(9,B2:B13)

但是使用 SUMPRODUCT 会阻止它满足隐藏/过滤单元格的要求，例如过滤掉 Mary 不会导致总数下降 3690。并且 SUBTOTAL 不能使用 (B2:B13=0) 数组引用。所以我大脑的一个很好的部分试图告诉我我可以接近，但真的无法到达那里。但我（也是？）固执地放弃了这么快:)

我的一部分试图说如果不深入研究 VBA 就无法直接完成，如果可能的话，我希望避免这种解决方案。我认为值得就这个问题征求其他一些人的意见，以便指出一个我只是看不到的（可能非常简单的）解决方案。

**编辑 1：**我应该指出的一个明显的解决方案是简单地添加带有简单 IF 表达式的第四列，然后 SUBTOTAL 。这当然有效，但我无法适应这种情况。此处所示的表格只是从更大的、高度结构化的工作表中提取的代表性摘录，因此不能选择添加任意列。

**编辑 2：**我提供的示例数据允许一个简单的推断，即所有列的直接小计将解决问题，但从中提取此数据的实际数据可能包括 C 列的值，即使 B 列是非零。在这种情况下，必须忽略 C 列 - B 列（如果存在）总是胜过。我已经相应地修改了原始数据表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T18:21:02.353

我放弃并辞去了基于 VBA 的 UDF：

```
Function DifColSubTotal(Range1 As Range, Range2 As Range) As Single

  Dim c As Range
  Dim sum As Single
  Dim col_offset As Long

  col_offset = Range2.Column - Range1.Column

  For Each c In Range1
     If c.Height > 0 Then
       If ((c.Value = 0) Or (c.Value = "")) Then
           sum = sum + c.Offset(0, col_offset)
       Else
           sum = sum + c.Value
       End If
     End If
  Next
  DifColSubTotal = sum
End Function 
```

结果在这里：

![在此处输入图像描述](../Images/1904989cfe0475310cfb0f2fbdf6ec06.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T21:15:36.387

要使用公式做到这一点，诀窍是使用**OFFSET**返回一个“范围数组”，每个单元格一个单元格，然后我们可以使用**SUBTOTAL**单独查询每个单元格，即使用这个“数组公式”

**编辑**- 根据 Daniel Otykier 的评论 - 最初没有看到......

`=SUM(IF(SUBTOTAL(2,OFFSET(B2,ROW(B2:B13)-ROW(B2),0)),IF(B2:B13=0,C2:C13,B2:B13)))`

确认`CTRL+SHIFT+ENTER`

假设`B2:B13`按照给出的示例完全填充

编辑：您也可以使用不需要“数组条目”的这个版本

`=SUMPRODUCT(SUBTOTAL(9,OFFSET(C2,ROW(C2:C13)-ROW(C2),0)),(B2:B13=0)+0)+SUBTOTAL(9,B2:B13)`

的这种用法`SUBTOTAL/OFFSET`是由 Laurent Longre 开发的 - 见[这里](http://www.dailydoseofexcel.com/archives/2005/05/11/arrays-with-offset/)

# javascript - 无法创建 2 个表

> ID：14564914
> 
> 赞同：1
> 
> 时间：2013-01-28T15:07:50.063
> 
> 标签：javascript, html, css

我正在尝试根据用户输入动态创建一个表，它运行良好，但是，它应该根据`super`用户提供的输入创建一个表，所以如果`super`是`2`，那么它会循环创建 2 个表。但是它正在做所有事情，因为如果是这样，那么表格将彼此相邻，而不是彼此下方，因为我已经以这种方式设置了 CSS。有任何想法吗？

```
<script type="text/javascript">
function createTable()
{
var num_ports = document.getElementById('ports').value;
var num_super = document.getElementById('super').value;
var num_rows = document.getElementById('rows').value;
var num_cols = document.getElementById('cols').value;
var tbody = '';
var colStart = num_cols / num_super;
var y = 1;
for( var i = 1; i <= num_super; i++){
    var theader = '<div style="margin:0 auto;"><table border="1" style="border:1px solid black; float:left;">\n';
        for(u = 1; u <= num_rows; u++){
          tbody += '<tr>';
            for( var j = 0; j < colStart; j++)
            {
            tbody += '<td style="width:80px; height:70px;">';
            tbody += '<sub style="float:right; position:relative; top:24px; z-index:11;  ">' + y + '</sub>';
            tbody += '</td>';
            y++;
            }
    tbody += '</tr>\n';
}
var tfooter = '</table></div>';
document.getElementById('wrapper').innerHTML = theader + tbody + tfooter;
}
}
</script>

<body>
<form name="tablegen">
<label>Ports: <input type="text" name="ports" id="ports"/></label><br />
<label>Super Columns: <input type="text" name="super" id="super"/></label><br />
<label>Rows: <input type="text" name="rows" id="rows"/></label><br />
<label>Columns: <input type="text" name="cols" id="cols"/></label><br/>
<input name="generate" type="button" value="Create Table!" onclick='createTable();'/>
</form>

<div id="wrapper"></div>
</body>
</html> 
```

它应该是什么样子

![动态表](../Images/deabdb1d0496910d2575676d20292308.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T15:16:13.477

它在这一行的当前迭代中将它创建的表重置为新表：

```
document.getElementById('wrapper').innerHTML = theader + tbody + tfooter; 
```

你必须做这样的事情：

```
document.getElementById('wrapper').innerHTML += theader + tbody + tfooter; 
```

除了您的评论：

```
var colStart = num_cols / num_super; 
```

应该是：

```
var colStart = num_cols * num_super; 
```

# android - Android NDK 发布构建

> ID：14564918
> 
> 赞同：15
> 
> 时间：2013-01-28T15:07:58.777
> 
> 标签：android, android-ndk

我试图在发布模式下构建我的 android 项目。为了在发布模式下构建我的项目，我需要设置任何优化标志吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-29T09:47:55.697

除非您已创建 Application.mk 或在 AndroidManifest.xml 中将您的应用程序定义为可调试，否则您无需执行任何操作，因为**默认情况下，应用程序的模块***由 ndk-build 脚本在***发布*****模式下编译。***

 *否则，您可以在 Application.mk 文件中使用 APP_OPTIM 指令：

```
APP_OPTIM := debug
APP_PLATFORM := android-14
APP_STL := gnustl_static
APP_ABI := armeabi armeabi-v7a 
```

从 android-ndk-r8d/docs/APPLICATION-MK.html 文件：

```
APP_OPTIM
    This optional variable can be defined to either 'release' or
    'debug'. This is used to alter the optimization level when
    building your application's modules.

    A 'release' mode is the default, and will generate highly
    optimized binaries. The 'debug' mode will generate un-optimized
    binaries which are much easier to debug.

    Note that if your application is debuggable (i.e. if your manifest
    sets the android:debuggable attribute to "true" in its <application>
    tag), the default will be 'debug' instead of 'release'. This can
    be overridden by setting APP_OPTIM to 'release'.

    Note that it is possible to debug both 'release' and 'debug'
    binaries, but the 'release' builds tend to provide less information
    during debugging sessions: some variables are optimized out and
    can't be inspected, code re-ordering can make stepping through
    the code difficult, stack traces may not be reliable, etc... 
```*

# powershell - 如何使用 PowerShell 合并两个 csv 文件

> ID：14564920
> 
> 赞同：3
> 
> 时间：2013-01-28T15:08:03.767
> 
> 标签：powershell, csv, powershell-3.0

我有两个 .CSV 文件，其中包含有关我工作的员工的信息。第一个文件 (ActiveEmploye.csv) 有大约 70 个不同的字段和 2500 个条目。另一个 (EmployeEmail.csv) 有四个字段（名字、姓氏、电子邮件、全名）和 700 个条目。这两个文件都有共同的 FullName 字段，这是我唯一可以用来比较每个文件的东西。我需要做的是将电子邮件地址（来自 EmployeEmail.csv）添加到 ActiveEmploye.csv 中的相应员工。而且，对于那些没有电子邮件地址的人，该字段可以留空。

我尝试使用几天前在互联网上找到的 Join-Object 函数，但第一个 csv 文件包含的字段太多，该函数可以处理。

任何建议都非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T16:36:43.570

可能有几种方法可以给这只猫剥皮。我会试试这个：

```
Import-Csv EmployeeEmail.csv | ForEach-Object -Begin {
    $Employees = @{}
} -Process {
    $Employees.Add($_.FullName,$_.email)
}

Import-Csv ActiveEmployees.csv | ForEach-Object {
    $_ | Add-Member -MemberType NoteProperty -Name email -Value $Employees."$($_.FullName)" -PassThru
} | Export-Csv -NoTypeInformation Joined.csv 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-23T17:19:26.360

这是@BartekB 的另一种方法，我用来将多个字段连接到左侧，并且在处理时间方面有更好的结果。

```
Import-Csv EmployeeEmail.csv | ForEach-Object -Begin {
    $Employees = @{}
} -Process {
    $Employees.Add($_.FullName,$_)
}

Import-Csv ActiveEmployees.csv |
    Select *,@{Name="email";Expression={$Employees."$($_.FullName)"."email"}} |
        Export-Csv Joined.csv -NoTypeInformation 
```

这允许查询 $Employees 上 FullName 的数组索引，然后获取该元素上命名成员的值。

# subdomain - 没有“域”的 lighttpd 子域

> ID：14564930
> 
> 赞同：0
> 
> 时间：2013-01-28T15:08:50.727
> 
> 标签：subdomain, lighttpd

在此处引用此问题：[将子域支持添加到 lighttpd](https://stackoverflow.com/questions/1976628/adding-subdomain-support-into-lighttpd)

我正在尝试在我的服务器上设置一个子域。上面链接中提供的示例有效，但问题是，我还没有购买域，并且由于我在开发环境中运行并且我的 IP 是动态的，因此我在设置它时遇到了问题，因为我需要更改配置每次我更改我的IP时文件。

有没有办法设置子域而不必设置域？

这个问题非常适合所有在具有动态 IP 的开发环境中运行并需要为其网站设置子域的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T15:56:23.950

为什么不通过编辑`/etc/hosts`文件来强制使用 dns（在本地计算机上）？

```
#[server ip]   [new domain not bought]
90.90.90.90    subdomain.domain.com 
```

然后，每次你继续`subdomain.domain.com`，它会指向`90.90.90.90`，这是你的服务器。

# javascript - 无法通过javascript获取复选框列表中选中项目的值

> ID：14564932
> 
> 赞同：0
> 
> 时间：2013-01-28T15:08:58.393
> 
> 标签：javascript, asp.net, checkboxlist

在我的应用程序中，我有一个复选框列表。下面列出的是复选框列表的 html，以及在加载它所在的页面时绑定它的 vb 代码。

```
<asp:CheckBoxList Runat="server" id="chklistTeams" RepeatColumns="7" RepeatDirection="Horizontal"
                        CellPadding="4" Font-Size="7pt"></asp:CheckBoxList> 
```

下面是绑定复选框列表的VB

```
myCmd.CommandText = "Select id, title from teams"
Dim DS As SqlDataReader
DS = myCmd.ExecuteReader
chklistTeams.DataValueField = "id"
chklistTeams.DataTextField = "title"
chklistTeams.DataSource = DS
chklistTeams.DataBind()
DS.Close() 
```

当点击保存按钮时，会调用一个 javascript 函数。这是被调用的函数的一部分，它应该让我们得到项目的值。

```
var checkList = document.getElementById('chklistTeams');
var checkBoxList = checkList.getElementsByTagName("input");
var checkBoxSelectedItems = new Array();

for (var i = 0; i < checkBoxList.length; i++) {
    if (checkBoxList[i].checked) {
        checkBoxSelectedItems.push(checkBoxList[i].value);
        alert('checked - checkBoxList[i]: ' + checkBoxList[i].value)
    }
} 
```

存储到数组中的所有值（通过警报测试） - 以“on”值返回 - 所以我检查了此列表中复选框的 html，这是其中一个复选框的结果

```
<input name="chklistTeams:21" id="chklistTeams_21" type="checkbox" value="on"/> 
```

我确信这些值已正确绑定到列表 - 因为在获取它们的值的旧方式中，您会获得该项目的正确整数值 - 下面列出的是用于处理此问题的 VB 代码（并返回一个字符串整数，取决于选中了多少个框 - 没有返回值“on”的列表）。我需要能够通过 javascript 获取此信息，以便我们在此页面上进行的另一项修改，我们现在必须使用 PageMethods 保存，并且不能在后端使用公共共享功能

VB 代码将在复选框列表中获取选中项的正确值

```
 For Each li In chklistTeams.Items
        If li.Selected = True Then
            strTeamList = strTeamList & li.Value & ","
            bolTeamSelected = True
        End If
    Next
    If bolTeamSelected = True Then
        strTeamList = strTeamList.Substring(0, strTeamList.Length - 1)
    End If 
```

谁能明白为什么获取值的 javascript 方式是给我“on”而不是像 VB 方式那样的整数值？再次感谢您的帮助。再次 - 这必须在 JS 中完成 - 由于函数是公共和共享的，因此不能使用背后的 VB 代码。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T01:24:23.403

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.checkboxlist.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.checkboxlist.aspx)

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listcontrol.items.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listcontrol.items.aspx)

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listitem.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listitem.aspx)

checkboxlist.items(index) 是 listitem 类型，listitem 有一个 attributes 属性可以设置客户端属性

这是代码示例： [ListItem.Attributes.Add 不起作用](https://stackoverflow.com/questions/10977378/listitem-attributes-add-not-working)

在您的 chklistTeams DataBound 事件中：

```
foreach(ListItem li in chklistTeams.Items)
{
     li.Attributes.Add("JSvalue", li.Value);
} 
```

在 JavaScript 中：

```
checkBoxSelectedItems.push(checkBoxList[i].getAttribute("JSvalue")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T16:28:14.853

找到了一个解决方案，制作了全局共享数组，在加载时用 id 值填充了数组，然后通过 javascipt 我能够获取检查项目的索引 - 然后可以转到同一索引处的数组以获取 id 值供以后使用。

# java - 小程序安全权限

> ID：14564935
> 
> 赞同：0
> 
> 时间：2013-01-28T15:09:21.480
> 
> 标签：java, security, applet, appletviewer

源代码：

```
package com.web;

import com.web.Operation;
import java.applet.*;
import java.awt.Graphics;
import java.net.MalformedURLException;
import java.net.URL;
import java.util.*;
import java.io.*;

public class AppletExample extends Applet {

public void init() {
    try {
        getAppletContext().showDocument(new URL("file:///C:/Users/Victor/Desktop/test.txt"), "_blank");
    }
    catch (MalformedURLException ex) {
        System.out.println(ex.getMessage());
    }
}

public void paint( Graphics g ) {
    Operation op = new Operation();
    op.response();
    g.drawString("Go File", 0,100);
}
} 
```

当我使用 Appletviewer 应用程序运行 Applet 时，屏幕上出现下一个错误：

```
C:\Users\Victor\Desktop\project2\src>appletviewer display.html
Warning: Can't read AppletViewer properties file: C:\Users\Victor\.hotjava\prope
rties Using defaults.
java.security.AccessControlException: access denied ("java.io.FilePermission" "C
:\Users\Victor\Desktop\test.txt" "write")
        at java.security.AccessControlContext.checkPermission(AccessControlConte
xt.java:366)
        at java.security.AccessController.checkPermission(AccessController.java:
555)
        at java.lang.SecurityManager.checkPermission(SecurityManager.java:549)
        at java.lang.SecurityManager.checkWrite(SecurityManager.java:979)
        at java.io.FileOutputStream.<init>(FileOutputStream.java:203)
        at java.io.FileOutputStream.<init>(FileOutputStream.java:104)
        at java.io.FileWriter.<init>(FileWriter.java:63)
        at com.web.Operation.response(Operation.java:15)
        at com.web.AppletExample.paint(AppletExample.java:25)
        at sun.awt.RepaintArea.paintComponent(RepaintArea.java:264)
        at sun.awt.RepaintArea.paint(RepaintArea.java:240)
        at sun.awt.windows.WComponentPeer.handleEvent(WComponentPeer.java:347)
        at java.awt.Component.dispatchEventImpl(Component.java:4936)
        at java.awt.Container.dispatchEventImpl(Container.java:2287)
        at java.awt.Component.dispatchEvent(Component.java:4686)
        at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:707)
        at java.awt.EventQueue.access$000(EventQueue.java:101)
        at java.awt.EventQueue$3.run(EventQueue.java:666)
        at java.awt.EventQueue$3.run(EventQueue.java:664)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDo
main.java:76)
        at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDo
main.java:87)
        at java.awt.EventQueue$4.run(EventQueue.java:680)
        at java.awt.EventQueue$4.run(EventQueue.java:678)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDo
main.java:76)
        at java.awt.EventQueue.dispatchEvent(EventQueue.java:677)
        at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThre
ad.java:211)
        at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.
java:128)
        at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThre
ad.java:117) 
```

这就是类 Operation 所做的：

```
package com.web;

import com.web.AutomatedTelnetClient;
import java.util.*;
import java.io.*;

public class Operation {

public Operation() {
}

public void response() {
    try {
        BufferedWriter out = new BufferedWriter(new FileWriter("C://Users/Victor/Desktop/test.txt"));

        AutomatedTelnetClient telnetClient = new AutomatedTelnetClient();
        telnetClient.connect();

        StringBuffer text = telnetClient.sendCommand("display gps");
        telnetClient.disconnect();

        out.write(text.toString());
        out.close();      
    } catch (Exception e) {
        e.printStackTrace();
    }
}
} 
```

从小程序写入文件似乎是权限问题，不是吗？我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T15:28:38.097

由于它是您尝试写入的客户端的文件系统。您需要使用类文件创建一个 jar，并且必须将其签名为受信任的应用程序。按照这篇关于如何签名[的帖子，然后你就是那个 jar 来加载小程序。](http://docs.oracle.com/javase/tutorial/deployment/jar/signing.html)

# php - 查找和替换后 Git 重置失败

> ID：14564936
> 
> 赞同：1
> 
> 时间：2013-01-28T15:09:26.727
> 
> 标签：php, git, git-commit

没有 git 的命令在工作了，创建了一个分支，做了一些提交。然后我做了一个递归查找和替换：

```
LANG=C find . -type f -name '*.*' -exec sed -i '' s/My\ sentence/My\ sentencevotre/ {} + 
```

它工作正常，但现在我不能提交，我不能硬重置，我在重置时有一系列消息：错误：packfile .git/objects/pack/pack-$SHA.pack 与索引不匹配。 .

并在提交时：

警告：packfile .git/objects/pack/pack-$SHA.pack 无法访问....错误：无效对象 100644 $SHA for 'Doxyfile' 错误：构建树时出错

我该如何管理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T15:13:31.793

撤消您的查找和替换，然后重试。也许你足够幸运......否则使用你的备份。

下次要小心你的 .git 目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T15:13:04.820

您似乎更改了 .git 文件夹中的文件，该文件夹定义了存储库。除了删除 .git 文件夹并在该文件夹中重新创建一个新的 git 存储库之外，我不知道任何其他解决方案。如果您有 GitHub 之类的远程存储库，这应该不是什么大问题。

# css - XML - 将图像放入 .xsl

> ID：14564937
> 
> 赞同：1
> 
> 时间：2013-01-28T15:09:26.927
> 
> 标签：css, xml, image, xslt, xslt-1.0

我有一个用 XML 和 XLST 制作的“博客”。

这是博客的格式：

```
<post id="1" category="Miscellaneous">
<ptitle>MiG-21</ptitle>
<psubtitle>Mikoyan-Gurevich MiG-21</psubtitle> 
<image></image>
<author> Brian Livori </author> 
<date> 11/10/2012 </date>
<par> The Mikoyan-Gurevich MiG-21 (Russian: Микоян и Гуревич МиГ-21; NATO reporting name: Fishbed) is a supersonic jet fighter aircraft, designed by the Mikoyan-Gurevich Design Bureau in the Soviet Union. It was popularly nicknamed "balalaika", from the aircraft's planform-view resemblance to the Russian stringed musical instrument or ołówek (English: pencil) by Polish pilots due to the shape of its fuselage.[2]

Early versions are considered second-generation jet fighters, while later versions are considered to be third-generation jet fighters. Some 50 countries over four continents have flown the MiG-21, and it still serves many nations a half-century after its maiden flight. The fighter made aviation records. At least by name, it is the most-produced supersonic jet aircraft in aviation history and the most-produced combat aircraft since the Korean War, and it had the longest production run of a combat aircraft (1959 to 1985 over all variants).
</par>
<source>http://en.wikipedia.org/wiki/Mikoyan-Gurevich_MiG-21</source>
<comments>dsgsdg</comments>
</post>

<post id="2" category="Miscellaneous">
<ptitle>MiG-21</ptitle>
<psubtitle>Mikoyan-Gurevich MiG-21</psubtitle> 
<image></image>
<author> Brian Livori </author> 
<date> 11/10/2012 </date>
<par> The Mikoyan-Gurevich MiG-21 (Russian: Микоян и Гуревич МиГ-21; NATO reporting name: Fishbed) is a supersonic jet fighter aircraft, designed by the Mikoyan-Gurevich Design Bureau in the Soviet Union. It was popularly nicknamed "balalaika", from the aircraft's planform-view resemblance to the Russian stringed musical instrument or ołówek (English: pencil) by Polish pilots due to the shape of its fuselage.[2]

Early versions are considered second-generation jet fighters, while later versions are considered to be third-generation jet fighters. Some 50 countries over four continents have flown the MiG-21, and it still serves many nations a half-century after its maiden flight. The fighter made aviation records. At least by name, it is the most-produced supersonic jet aircraft in aviation history and the most-produced combat aircraft since the Korean War, and it had the longest production run of a combat aircraft (1959 to 1985 over all variants).
</par>
<source>http://en.wikipedia.org/wiki/Mikoyan-Gurevich_MiG-21</source>
<comments>dsgsdg</comments>
</post> 
```

我想为每篇博文插入一张图片。

我怎样才能做到这一点？

这是我的 .xls 文件：

```
<?xml version="1.0" encoding="ISO-8859-1"?>

<xsl:stylesheet version="1.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:output method="html"/>

<xsl:template match ="/">

    <html>
    <body>
        <table align="center" >
            <tr bgcolor="C77838">
                <th>Brian's Blog </th>
                <th>About</th>
                <th>Contact</th>
            </tr>
        </table>

        <table align="center"  bgcolor="1D6135">

        <tr align="center">

        <xsl:element name="img" >
          <xsl:attribute name="border">0</xsl:attribute>
          <xsl:attribute name="src">images/banner.jpg</xsl:attribute>
          <xsl:attribute name="alt">Banner</xsl:attribute>
         </xsl:element>

        </tr>

        <tr align="center">
        <h1>JET FIGHTERS</h1>
        </tr>

        </table>
        <br></br><br></br>

        <table >
            <td width="10%" bgcolor="white"></td>

            <td bgcolor="CC9933">
            <xsl:for-each select="blog/post">
            <tr bgcolor="FFFF99" ><td><xsl:value-of select="ptitle"/></td></tr>
            <tr bgcolor="FFFFCC"><td><xsl:value-of select="psubtitle"/></td></tr><br></br><br></br>
            <tr bgcolor="FFFFCC"><td><xsl:value-of select="image"/></td></tr>

            <tr><td><xsl:value-of select="par"/></td></tr><br></br><br></br>
            <tr bgcolor="D6D6B2"><td>Source: <xsl:value-of select="source"/></td></tr>

            <br></br><tr bgcolor="FFFFCC">Posted on: <xsl:value-of select="date"/> by <xsl:value-of select="author"/></tr>
            <br></br><tr bgcolor="FFFFCD">Comments: <xsl:value-of select="comments"/> by <xsl:value-of select="comments"/></tr>
            <hr color="white"></hr>
            </xsl:for-each>
            </td>

            <td width="10%" bgcolor="white"></td>
        </table>
    </body>
    </html>

</xsl:template>

<xsl:template match="list">
   Images are element contents, apply a template to all image elements:
   <xsl:apply-templates select="image"/>
   Images are attribute values of an element, we do it differently:
   <xsl:apply-templates select="image3"/>
</xsl:template>

<xsl:template match="image1">
                <p> <img src="{@source}"/><br/><xsl:value-of select="."/> </p>
</xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T15:41:48.367

假设图像的 URL 将包含在`<image>`元素中并且图像应该被省略，因为`<images>`它是空白的，我相信这就是你想要完成的。如果不是，请澄清您的问题：

```
<xsl:stylesheet version="1.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

  <xsl:output method="html"/>

  <xsl:template match ="/">

    <html>
      <body>
        <table align="center" >
          <tr bgcolor="C77838">
            <th>Brian's Blog </th>
            <th>About</th>
            <th>Contact</th>
          </tr>
        </table>

        <table align="center"  bgcolor="1D6135">

          <tr align="center">
            <td>
              <img border="0" src="images/banner.jpg" alt="Banner" />
            </td>
          </tr>

          <tr align="center">
            <td>
              <h1>JET FIGHTERS</h1>
            </td>
          </tr>

        </table>
        <br />
        <br />

        <table >
          <tr>
            <td width="10%" bgcolor="white"></td>

            <td bgcolor="CC9933">
              <xsl:apply-templates select="blog/post" />
            </td>

            <td width="10%" bgcolor="white"></td>
          </tr>
        </table>
      </body>
    </html>

  </xsl:template>

  <xsl:template match="post">
    <table>
      <tr bgcolor="FFFF99" >
        <td>
          <xsl:value-of select="ptitle"/>
        </td>
      </tr>
      <tr bgcolor="FFFFCC">
        <td>
          <xsl:value-of select="psubtitle"/>
        </td>
      </tr>
      <br></br>
      <br></br>
      <xsl:if test="normalize-space(image)">
        <tr bgcolor="FFFFCC">
          <td>
            <xsl:apply-templates select="image"/>
          </td>
        </tr>
      </xsl:if>
      <tr>
        <td>
          <xsl:value-of select="par"/>
        </td>
      </tr>
      <br />
      <br />
      <tr bgcolor="D6D6B2">
        <td>
          Source: <xsl:value-of select="source"/>
        </td>
      </tr>

      <br></br>
      <tr bgcolor="FFFFCC">
        <td>
          Posted on: <xsl:value-of select="date"/> by <xsl:value-of select="author"/>
        </td>
      </tr>
      <br></br>
      <tr bgcolor="FFFFCD">
        <td>
          Comments: <xsl:value-of select="comments"/> by <xsl:value-of select="comments"/>
        </td>
      </tr>
      <hr color="white" />
    </table>
  </xsl:template>

  <xsl:template match="image">
    <p>
      <img src="{.}"/>
      <br/>
      <xsl:value-of select="."/>
    </p>
  </xsl:template>

</xsl:stylesheet> 
```

您的 HTML 存在很多问题。我清理了我能做的，但还有很多需要解决的。你不应该使用表格进行布局，但如果你必须这样做，至少，你不应该在表格元素的正下方有`<br/ >`s 和s， s 必须在s 的正下方，s 必须在s的正下方。`<hr />``<td>``<tr>``<tr>``<table>`

# html - 如何在 li 中显示内联输入？

> ID：14564939
> 
> 赞同：1
> 
> 时间：2013-01-28T15:09:30.937
> 
> 标签：html, css

HTML：

```
<div id="options">
    <ul>
        <li>
            <label for="input_color">Input Color</label>
            <input type="text" id="input_color">
        </li>
        <li>
            <label for="output_color">Output Color</label>
            <input type="text" id="output_color">
        </li>
        <li>
            <label for="pixels">Pixels to the left</label>
            <input type="text" id="pixels">
        </li>
        <li>
            <label for="pixels">Speed (in second)</label>
            <input type="text" value="0.02" id="speed">
        </li>
        <li>
            <input type="submit" value="Reset" class="submit">
        </li>
    </ul>
</div> 
```

CSS：

```
div#options ul, div#options li{
    margin:0; 
    padding:0; 
    list-style:none;
}
div#options li{
    clear: both;
    list-style:none;
    padding-bottom:30px;
    white-space: nowrap;
}

div#options input{
    float:left;
    width: 50%;
}
div#options label{
    float:left;
    width: 50%;
} 
```

![图片](../Images/38d00d6adde6d11cd55cce24a0b8b20a.png)

我需要在标签旁边显示输入，但它总是出现在它下面 - 如何修复它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T15:12:40.107

从输入和标签中删除填充、边距和边框，或者使它们的宽度都小于 50%。

它们不能并排放置，盒子模型将（至少`<input>`）宽于 50%：它占用的空间将是其容器宽度的 50%，*加上*它的填充，*再加上*它的边框。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T15:23:16.167

Keep your `li`'s in `div` to get them side-by-side. and give `width:100%;` instead of `width:50%;`.

```
div{width:50%;float:left;} 
```

**[Fiddle](http://jsfiddle.net/6zVt2/1/)**

# android - 独立的移动平台（ios，android...）是否连接一个事务服务器？

> ID：14564941
> 
> 赞同：0
> 
> 时间：2013-01-28T15:09:40.780
> 
> 标签：android, ios, windows-8, socketserver

我想开发一个向独立客户端发送/接收文本的事务服务器。我决定使用java语言开发事务服务器，我有三个客户端，分别是android、Ios和Win8来与事务服务器通信。那么，有可能开发这样的项目吗？是否可以使用android的网络库和Ios的网络库来连接一个用java编写的事务服务器？我很高兴看到你的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T15:30:00.677

简短的回答是 - 是的，这是可能的。

扩展的答案是 - 您可以在 Java（或任何其他语言）上编写您的 Web 服务，无论他们使用哪种平台，它都会处理来自不同客户端的请求。一旦它是网络服务，它就应该通过 HTTP 协议与客户端一起工作。在 HTTP 协议之上，您可以使用 JSON 或 XML 来封装您的数据。您的客户端将知道对您的服务器的请求列表，并且每个客户端都将实现自己的网络引擎来准备请求、发送请求并执行服务器的响应。

[有](http://www.raywenderlich.com/2941/how-to-write-a-simple-phpmysql-web-service-for-an-ios-app)示例如何为 iOS 实现简单的 PHP 服务器。您可以从那里获得共同的想法并根据您的需要进行调整。

# javascript - 文档 createElement 最短语法

> ID：14564942
> 
> 赞同：1
> 
> 时间：2013-01-28T15:09:45.427
> 
> 标签：javascript, dojo, element, document, createelement

我正在寻找最短的语法，它可以为我提供与此 dojo 行相同的结果：

```
var divblock5 = dojo.create("div", {className: "barlittle", id: "block5"}); 
```

但我想使用纯 JavaScript 而不是 dojo 框架。我有很多动态元素创建，我想让我的代码尽可能短。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-28T15:14:51.350

```
var create = function(element, properties) {
    var elmt = document.createElement(element);
    for (var prop in properties) {
        elmt[prop] = properties[prop];
    }
    return elmt;
}

create("div", {className: "barlittle", id: "block5"}); 
```

或者，我个人最喜欢的只是将 HTML 转换为 DOM 节点：

```
var elmtify(html) {
    var wrapper = document.createElement('div');
    wrapper.innerHTML = html;
    return wrapper.firstChild;
}

elmtify('<div class="barlittle" id="block5"></div>'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-31T03:34:36.283

由于这似乎是一个仍然悬而未决的问题，我正在添加我的方法，这与 Tom 所说的几乎相同，但我的方法考虑了样式信息：

```
function createElement(tag, attrs) {
  if(!tag) throw new SyntaxError("'tag' not defined"); // In case you forget

  var ele = document.createElement(tag), attrName, styleName;
  if(attrs) for(attrName in attrs) {
    if(attrName === "style")
      for(styleName in attrs.style) {ele.style[styleName] = attrs.style[styleName];}
    else
      ele[attrName] = attrs[attrName];
  }
  return ele;
} 
```

因此，如果您通常在没有任何库的情况下编写：

```
var divBlock5 = document.createElement("div");
divBlock5.className = "barlittle";
divBlock5.id = "block5"; 
```

使用 Tom 提供的代码段，您只需编写：

```
var divBlock5 = createElement("div", {className:"barlittle", id:"block5"}); 
```

但是假设你想为你的元素添加一个独立的样式。然后，加上我的补充，你写：

```
var divBlock5 = createElement("div", {className:"barlittle", id:"block5", style:{color:"#08A", fontWeight:"bold"}}); 
```

希望这可以帮助。干杯!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T19:03:15.847

您应该检查 put-selector：[https](https://github.com/kriszyp/put-selector) ://github.com/kriszyp/put-selector 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T15:16:05.473

```
createElement = function(type, className, id) {
    var element = document.createElement(type);
    element.className = className;
    element.id = id;

    return element;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-11-28T08:31:41.040

```
function createElement(tag, attrs, html) {
    if (!tag) throw new SyntaxError("'tag' not defined"); // In case you forget

    var ele = document.createElement(tag),
        attrName, styleName;
    if (attrs)
        for (attrName in attrs) {
            if (attrName === "style")
                for (styleName in attrs.style) { ele.style[styleName] = attrs.style[styleName]; }
            else if (attrs[attrName])
                ele.setAttribute(attrName, attrs[attrName]);
        }
    if (html)
        ele.innerHTML = html;
    return ele;
} 
```

该解决方案建立在 Tom 和 Xch3l 建议的基础之上，但它增加了对传递自定义属性以应用于 DOM 元素的支持。对于任何给定的 DOM 元素，哪些属性作为属性存在取决于 DOM 元素的类型，因此使用元素的`setAttribute`方法是一种更健壮的解决方案。

请注意，您需要传递“class”属性而不是“className”，并且此解决方案还添加了对可作为第三个参数传递的可选 HTML 字符串的支持。

以下是如何使用该功能的示例：

```
var divBlock5 = createElement("div", {class:"barlittle", "data-my-custom-attribute":"lorem ipsum", id:"block5", style:{color:"#08A", fontWeight:"bold"}},`<h5>An Optional String of HTML to be Inserted Inside the Newly Created Element</h5><p>Preserve Line Spacing by Using Backticks Instead of Quotes</p>`); 
```

# c++ - 在专用模板中添加运算符重载

> ID：14564945
> 
> 赞同：3
> 
> 时间：2013-01-28T15:10:04.557
> 
> 标签：c++, templates, inheritance, operator-overloading

想知道有用的用途`operator ,`我正在尝试创建一组帮助器对象，以便更轻松地从 C++ 代码构建 DB 查询。我的想法是利用`operator ,`类似于数据库调用的创建指令的顺序。辅助对象如下：

```
class Fields
{
public:
    Fields &operator ,(const std::string &s)
    {
        SQL.append(s).append(1, ',');
        return *this;
    }

    Fields &operator ,(const Fields &f)
    {
        std::string Result = f;
        SQL.append(Result);
        return *this;
    }

    virtual operator std::string() const = 0;
protected:
    std::string SQL;
};

template <const char *INSTRUCTION> struct Instruction : public Fields
{
    operator std::string() const
    {
        std::string Result(INSTRUCTION);
        return Result.append(SQL);
    }
}; 
```

然后，使用正确`typedef`的 s 和值，此方法允许执行以下操作：

```
extern const char SQL_SELECT[] = "SELECT ";
extern const char SQL_FROM[] = "FROM ";
extern const char SQL_WHERE[] = "WHERE ";
extern const char SQL_ORDER_BY[] = "ORDER BY ";

typedef Instruction<SQL_SELECT> SELECT;
typedef Instruction<SQL_FROM> FROM;
typedef Instruction<SQL_WHERE> WHERE;
typedef Instruction<SQL_ORDER_BY> ORDER_BY;

std::string Query = ((SELECT(), "a", "b", "c"),
                     (FROM(), "A", "B"),
                     (WHERE(), "a = b AND c <> b"),
                     (ORDER_BY(), "a", "c"));

std::cout << Query; 
```

这会产生这个输出：（`SELECT a,b,c,FROM A,B,WHERE a = b AND c <> b,ORDER_BY a,c,`我正在处理我的版本中的尾随逗号，为了缩短示例省略了这部分），[这是代码](http://ideone.com/B4UD6G)。

问题是指令`ORDER BY`。该指令可以采用改变排序行为的最终操作数，我想（通过`operator ,`）将枚举值传递给`struct Instruction`实例：

```
enum ORDER
{
    ASC,
    DESC,
};

std::string OrderBy = (ORDER_BY(), "a", "c", DESC); // <---- Note the 'DESC' value. 
```

但只想为`Instruction<SQL_ORDER_BY>`实例启用此运算符，所以我尝试专门化模板：

```
template <> struct Instruction<SQL_ORDER_BY> : public Fields
{
    Instruction() : order(ASC) {}

    Fields &operator ,(const ORDER o)
    {
        order = o;
        return *this;
    }

    operator std::string() const
    {
        std::string Result(SQL_ORDER_BY);
        Result.append(SQL);
        Result.append(order == ASC? "ASC": "DESC");
        return Result;
    }

private:
    ORDER order;
}; 
```

AFAIK 这个专业化必须有三个`operator ,`重载：

*   `Fields &operator ,(const Fields &)`.
*   `Fields &operator ,(const std::string &)`.
*   `Fields &operator ,(const ORDER)`.

但是在创建专业化之后，查询字符串：

```
std::string Query = ((SELECT(), "a", "b", "c"),
                     (FROM(), "A", "B"),
                     (WHERE(), "a = b AND c <> b"),
                     (ORDER_BY(), "a", "c")); 
```

结束具有值：`SELECT a,b,c,FROM A,B,WHERE a = b AND c <> b,c,`。这就像 if`ORDER_BY`被忽略，并且添加该`DESC`值会导致编译错误：

```
std::string Query = ((SELECT(), "a", "b", "c"),
                     (FROM(), "A", "B"),
                     (WHERE(), "a = b AND c <> b"),
                     (ORDER_BY(), "a", "c", DESC)); // <-- cannot convert 'ORDER' to 'string' 
```

似乎`ORDER`值没有进入`operator ,`专业化，但是在同一个命名空间上添加一个自由运算符可以修复编译错误：

```
std::string operator ,(const std::string &left, const ORDER right)
{
    std::string Result(left);
    return Result.append(1, ',').append(right == ASC? "ASC": "DESC");
} 
```

但我真的认为这`Fields &Instruction<SQL_ORDER_BY>::operator ,(const ORDER)`会被调用，所以我现在寻求一些建议：

1.  为什么`Instruction<SQL_ORDER_BY>`在专门化模板后实例没有附加到查询字符串？
2.  为什么这些`ORDER`值没有调用`Fields &operator ,(const ORDER)`专业化提供的值。
3.  `operator ,`有多少`Instruction<SQL_ORDER_BY>`实例？

PS：所有这些努力都是出于自学的目的，该代码的几乎零行最终会出现在生产代码中，因此请避免对使用库或代码的实用性发表评论，

谢谢。

编辑：

删除他的答案的人建议在专业化中添加`using Fields::operator std::string;`和`using Fields::operator,;`行，这样做解决了*忽略`ORDER_BY`*问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T15:28:21.073

问题是由于子类中运算符的重载将重载的运算`,`符隐藏*在*超类中。这正是 C++ 中函数调用解析的工作方式：名称查找首先发生，一旦找到*某个命名空间中的*一组名称就停止；然后，执行重载决议。`Instruction<SQL_ORDER_BY>``Fields`

 **[Herb Sutter](http://www.gotw.ca/publications/mill08.htm)在这篇相关文章中解释了这个问题。该文章与您的问题并不完全相关，但包含解决方案。特别是，请查看“**示例 2a** ”。

您必须使用`using`指令将`Field`基类的运算符重载导入派生类的范围，因此您的`,`in重载`Instruction<SQL_ORDER_BY>`不会隐藏它们。

以这个小程序为例：

```
#include <iostream>
#include <string>

using namespace std;

struct A // Class A contains two overloads of operator ,
{
    void operator , (int) { cout << "A::operator , (int)" << endl; }
    void operator , (string) { cout << "A::operator , (string)" << endl; }
};

struct B : A // Class B contains only *one* overload of operator ,
             // Overloads coming from `A` are *hidden* by this one
{
    void operator , (double) { cout << "B::operator , (double)" << endl; }
};

int main()
{
    A a;
    a, 1; // "A::operator , (int)" will be printed to std out
    a, "hello"; // "A::operator , (string)" will be printed to std out

    B b;
    b, 3.0; // "B::operator , (double)" will be printed to the std out
    b, "hello"; // Nothing in the standard output!
} 
```

但是，如果您更改`B`这种方式的定义：

```
struct B : A
{
    using A::operator ,; // <-- Brings A's overloads into scope!
    void operator , (double) { cout << "B::operator , (double)" << endl; }
}; 
```

您将看到`main()`上面示例程序的最后一行将其打印到标准输出：

```
A::operator , (string) 
```

这意味着运算符的`B`' 重载`,`不再隐藏 中定义的重载`A`，这很可能是您想要的。

**更新：**

答案还没有涵盖另一个问题。`,`基类中运算符的重载`Fields`返回对类型对象的引用`Fields`。由于`,`运算符关联到左侧，因此表达式`e1, e2, e3`的计算结果为`(e1, e2), e3`。在您的特定情况下，结果`(e1, e2)`是对不支持`,`派生类支持的运算符重载的基类的引用。

让我们再次将其简化为反映您的设计的更简单示例：

```
#include <iostream>
#include <string>

using namespace std;

struct A
{   
    // Operator overloads return a reference to A
    A& operator , (int) 
    { cout << "A::operator , (int)" << endl; return *this; }

    A& operator , (string) 
    { cout << "A::operator , (string)" << endl; *this; }
};

struct B : A
{   
    // Imported overloads still return a reference to A
    using A::operator ,;

    // This overload returns a reference to B 
    B& operator , (double) 
    { cout << "B::operator , (double)" << endl; return *this; }
};

int main()
{
    B b;
    b, 3.0;
    b, "hello", 3.2; // What will be displayed here?
} 
```

考虑示例的最后一行。您可能希望它调用`B::operator , (double)`，但这是打印到标准输出的内容：

```
A::operator , (int) 
```

为什么？好吧，因为逗号运算符的关联性和重载的返回类型。首先，对表达式`b, "hello"`求值，并返回对 的**引用`A`**。然后，根据该表达式的结果，`A::operator , (3.2)`将调用该函数。`A`有一个可行的功能，即接受`int`. 而那个被选中。`B`看不到 的重载，因为第一个表达式的结果`b, "hello"`是 类型`A&`。

那么如何解决呢？您可以使用称为 CRTP（“Curiously Recurring Template Pattern”）的设计模式，并将您的定义`A`转换`B`为以下内容：

```
template<typename T>
struct A
{
    T& operator , (int) 
    { cout << "A::operator , (int)" << endl; return *(static_cast<T*>(this)); }

    T& operator , (string) 
    { cout << "A::operator , (string)" << endl; *(static_cast<T*>(this)); }
};

struct B : A<B>
{
    using A::operator ,;
    B& operator , (double) 
    { cout << "B::operator , (double)" << endl; return *this; }
}; 
```

这样，`main()`上面示例中函数的最后一行将在标准输出中打印您期望的内容：

```
A::operator , (string)
B::operator , (double) 
```**

# git - 'git status' 显示更改的文件，但 'git diff' 不显示

> ID：14564946
> 
> 赞同：238
> 
> 时间：2013-01-28T15:10:07.210
> 
> 标签：git, diff

我看过所有类似的问题。但是，我已经仔细检查过，肯定会发生一些奇怪的事情。

在一台服务器（带有 Git 1.8.1 的 Solaris）上，我克隆了 Git 存储库，然后将 .git 文件夹复制到我现有的实时文件中。这工作得很好，我可以跑

```
git status 
```

然后

```
git diff [filename] 
```

检查任何不同的文件。

在另一台服务器（带有 Git 1.7.6 的 Solaris）上，我正在做同样的事情

```
git diff [filename] 
```

什么也不显示，即使文件的内容肯定不同。我还测试了添加一个新文件，提交它，然后编辑。同样的问题，`git status`显示文件已更改，但`git diff`没有显示任何内容。如果我下载更改的文件并在本地运行差异，那么我会得到差异输出。

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2015-02-10T14:58:02.830

我将文件添加到[索引](https://git-scm.com/docs/git-add)中：

```
git add file_name 
```

然后跑：

```
git diff --cached file_name 
```

你可以看到`git diff` [这里](http://git-scm.com/docs/git-diff)的描述。

如果您需要撤消 git add，请参见此处：*[如何在提交前撤消“git add”？](https://stackoverflow.com/questions/348170/how-do-i-undo-git-add-before-commit)*

* * *

## 回答 #2

> 赞同：101
> 
> 时间：2015-08-13T11:09:01.057

对我来说，它与文件权限有关。在我的项目中使用 Mac/Linux 的人似乎提交了一些具有非默认权限的文件，而我的 Windows Git 客户端无法重现这些文件。

我的解决方案是告诉 Git 忽略文件权限：

```
git config core.fileMode false 
```

其他见解：*[如何让 Git 忽略文件模式 (chmod) 更改？](https://stackoverflow.com/questions/1580596/how-do-i-make-git-ignore-file-mode-chmod-changes)*

* * *

## 回答 #3

> 赞同：74
> 
> 时间：2013-06-27T17:25:37.257

有几个原因`git status`可能会显示出差异但`git diff`可能不会。

*   文件的模式（权限位）已更改 - 例如，从 777 更改为 700。

*   换行样式从 CRLF (DOS) 更改为 LF (UNIX)

找出发生了什么的最简单方法是运行`git format-patch HEAD^`并查看生成的补丁说明了什么。

* * *

## 回答 #4

> 赞同：51
> 
> 时间：2016-09-27T08:13:14.833

我遇到了一个问题，数百个行尾被某个程序修改，并将`git diff`所有源文件列出为已更改。修复行尾后，`git status`仍将文件列为已修改。

我能够通过将所有文件添加到索引然后重置索引来解决这个问题。

```
git add -A
git reset 
```

`core.filemode`被设置为假。

* * *

## 回答 #5

> 赞同：31
> 
> 时间：2019-07-15T14:00:26.603

正如[前面的回答中已经指出的那样](https://stackoverflow.com/questions/14564946/git-status-shows-changed-files-but-git-diff-doesnt/39719481#39719481)，这种情况可能是由于行尾问题（CR/LF vs. LF）引起的。我用这个命令解决了这个问题（在 Git 版本 2.22.0 下）：

```
git add --renormalize . 
```

根据手册：

```
 --renormalize
           Apply the "clean" process freshly to all tracked files to
           forcibly add them again to the index. This is useful after
           changing core.autocrlf configuration or the text attribute in
           order to correct files added with wrong CRLF/LF line endings.
           This option implies -u. 
```

* * *

## 回答 #6

> 赞同：18
> 
> 时间：2013-02-20T12:44:08.287

我怀疑您的 Git 安装或存储库有问题。

尝试运行：

```
GIT_TRACE=2 git <command> 
```

看看有没有什么有用的。如果这没有帮助，只需使用[strace](https://en.wikipedia.org/wiki/Strace)看看出了什么问题：

```
strace git <command> 
```

* * *

## 回答 #7

> 赞同：10
> 
> 时间：2014-10-21T19:59:36.967

我有一个类似的问题：`git diff`会显示差异，但`git diff <filename>`不会。原来我设置`LESS`了一个包含`-F`( `--quit-if-one-screen`) 的字符串。删除该标志解决了这个问题。

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2016-04-21T20:06:02.020

# 简短的回答

跑步`git add`有时会有所帮助。

# 例子

Git 状态显示已更改的文件，而 git diff 没有显示任何内容...

```
> git status
On branch master
Changes not staged for commit:
  (use "git add <file>..." to update what will be committed)
  (use "git checkout -- <file>..." to discard changes in working directory)

        modified:   package.json

no changes added to commit (use "git add" and/or "git commit -a")
> git diff
> 
```

...运行 git add 解决了不一致问题。

```
> git add
> git status
On branch master
nothing to commit, working directory clean
> 
```

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2016-11-06T10:43:53.967

我遇到了这个问题。我的情况类似于[rcwxok 发布](https://stackoverflow.com/questions/14564946/git-status-shows-changed-files-but-git-diff-doesnt/26495246#26495246)[的`LESS`](https://stackoverflow.com/questions/14564946/git-status-shows-changed-files-but-git-diff-doesnt/26495246#26495246)问题。

就我而言，我将`PAGER`环境变量设置为`PAGER='less -RSF'`.

但是，与之前的答案不同，我不想删除该`-F`选项，因为我明确地将它放在那里，希望防止显示差异，`less`如果它比一个屏幕短。

为了获得所需的结果，我没有删除`-F`，而是添加了`-X`: `PAGER='less -RSFX'`。这既解决了`git diff`问题，又防止了显示短差异`less`。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2020-12-24T09:10:52.540

### TL;博士

行尾问题：

1.  将 autocrlf 设置更改为默认 true。即，在 Windows 上签出 Windows 风格的行尾，并在远程 Git 存储库上提交 Linux 风格的行尾：

    ```
    git config --global core.autocrlf true 
    ```

2.  在 Windows 机器上，将存储库中的所有文件更改为 Windows 样式：

    ```
    unix2dos ** 
    ```

3.  Git添加所有修改过的文件，修改后的文件会去：

    ```
    git add .
    git status 
    ```

### 背景

*   平台：Windows、[WSL](https://en.wikipedia.org/wiki/Windows_Subsystem_for_Linux)

我偶尔会遇到这个问题，`git status`显示我修改了文件而`git diff`没有显示任何内容。这很可能是行尾问题。

### 根本原因

我经常遇到这个问题的原因是我在 Windows 机器上工作并在**WSL**中与 Git 交互。在 Linux 和 Windows 设置之间切换很容易导致此行尾问题。由于操作系统中使用的行结束格式不同：

*   视窗：`\r\n`
*   操作系统/Linux：`\n`

### 常见做法

当你在你的机器上安装 Git 时，它会要求你选择行尾设置。通常，通常的做法是在远程 Git 存储库上使用（提交）Linux 样式的行尾，并在 Windows 机器上签出 Windows 样式。如果你使用默认设置，这就是 Git 为你做的。

[![在此处输入图像描述](../Images/a80ff363864efcaa46a5f53ba4ead1e9.png)](https://i.stack.imgur.com/C9e9G.png)

这意味着，如果您的存储库中有一个 shell 脚本`myScript.sh`和 Bash 脚本`myScript.cmd`，则这些脚本都以 Linux 风格的结尾存在于您的远程 Git 存储库中，并且都以 Windows 风格的结尾存在于您的 Windows 机器上。

我曾经检查过 shell 脚本文件并使用`dos2unix`更改脚本行结尾以便在 WSL 中运行 shell 脚本。这就是我遇到这个问题的原因。Git 一直告诉我我对行尾的修改已更改，并询问是否提交更改。

### 解决方案

使用默认的行尾设置，如果您更改某些文件的行尾（如使用`dos2unix`or `dos2unix`），请删除更改。如果行尾更改已经存在并且您想摆脱它，请尝试`git add`它们并且更改将会消失。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2013-02-19T15:27:19.883

我对您的用例的假设：

您有一个包含文件和目录的现有目录，现在想要将其转换为从其他地方克隆的 Git 存储库，*而不*更改当前目录中的任何数据。

真的有两种方法。

**克隆 repo - mv `.git`- git reset --hard**

此方法就是您所做的 - 将现有存储库克隆到一个空目录中，然后将该`.git`目录移动到目标目录中。为了没有问题地工作，这通常需要您然后运行

```
git reset --hard 
```

但是，这会改变当前目录中文件的状态。您可以在目录的完整副本/rsync 上尝试此操作并研究更改内容。至少之后您应该不再看到`git log`和 之间的差异`status`。

**初始化新存储库 - 指向原点**

第二个不那么令人不安：`cd`进入您的目的地，并开始一个新的存储库

```
git init 
```

然后你告诉那个新的存储库，它在其他地方有一个祖先：

```
git remote add origin original_git_repo_path 
```

然后安然无恙

```
git fetch origin master 
```

在不更改本地文件的情况下复制数据。现在一切都应该好了。

我总是推荐第二种方法来减少出错的可能性。

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2016-08-09T09:58:24.313

我刚刚遇到了类似的问题。`git diff file`什么也没显示，因为我将文件添加到 Git 索引中，其名称的某些部分是大写的：`GeoJSONContainer.js`.

之后，我将其重命名为，`GeoJsonContainer.js`并且更改不再被跟踪。`git diff GeoJsonContainer.js`什么也没显示。我不得不使用强制标志从索引中删除文件，然后再次添加文件：

```
git rm -f GeoJSONContainer.js
git add GeoJSONContainer.js 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2016-09-15T01:58:53.773

我再次偶然发现了这个问题。但这一次发生的原因不同。我已将文件复制到存储库以覆盖以前的版本。现在我可以看到文件已修改，但 diff 不返回差异。

例如，我有一个*mainpage.xaml*文件。*在文件资源管理器中，我将一个新的mainpage.xaml*文件粘贴到当前存储库中的那个文件上。我在另一台机器上完成了这项工作，然后将文件粘贴到了这里。

[![Git 显示已修改](../Images/e34c1c5e53f83dba9236cb80c3d8ea12.png)](https://i.stack.imgur.com/qFjbg.png)

该文件显示已修改，但是当我运行时`git diff`，它不会显示更改。

这可能是因为文件上的 fileinfo 已更改，Git 知道它实际上不是同一个文件。有趣的。

[![Git diff 什么也没显示](../Images/4709f8e1d8a17131b73ae4838262affe.png)](https://i.stack.imgur.com/59WTH.png)

您可以看到，当我对文件运行 diff 时，它什么也不显示，只是返回提示。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2015-09-11T21:15:23.970

我有以下方式描述的同样问题：如果我输入

```
$ git diff 
```

Git 简单地返回提示，没有错误。

如果我输入

```
$ git diff <filename> 
```

Git 简单地返回提示，没有错误。

最后，通过阅读，我注意到`git diff`实际上调用了`mingw64\bin\diff.exe`来做这项工作。

这是交易。我正在运行 Windows 并安装了另一个 Bash 实用程序，它改变了我的路径，因此它不再指向我的**mingw64\bin**目录。

因此，如果您键入：

```
git diff 
```

它只是返回到您可能遇到此问题的提示。

> 实际运行的`git`diff.exe 位于您的 mingw64\bin 目录中

最后，为了解决这个问题，我实际上将我的`mingw64\bin`目录复制到了 Git 正在寻找它的位置。我试了一下，它仍然没有工作。

然后，我关闭了我的[Git Bash](https://superuser.com/questions/1053633/what-is-git-bash-for-windows-anyway)窗口并再次打开它，进入了我失败的同一个存储库，现在它可以工作了。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-10-19T07:30:37.637

`git diff -a`将所有文件视为文本，它对我有用。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2020-12-08T16:22:23.933

我用过`git svn`，一个文件有这个问题。使用`ls-tree`文件的每个祖先，我注意到一个有 2 个子文件夹 -`Submit`和`submit`. 由于我在 Windows 上，因此无法同时检出它们，从而导致此问题。

解决方案是直接从 中删除其中一个`TortoiseSVN` `Repo-browser`，然后运行，然后`git svn fetch`运行`git reset --hard origin/trunk`​​.

# ios - 如何添加到 NSMutableDictionary 键 NSIndexPath 和值 BOOL？

> ID：14564952
> 
> 赞同：1
> 
> 时间：2013-01-28T15:10:19.580
> 
> 标签：ios, objective-c, nsmutabledictionary, key-value, nsindexpath

> **可能重复：**
> [Objective-C 字典插入 BOOL](https://stackoverflow.com/questions/2108042/objective-c-dictionary-inserting-a-bool)

我需要将键值对 NSIndexPath -> BOOL 添加到 NSMutableDictionary。我该怎么做？这对我来说真的是个问题。我既不能使用`setValue forKey`（因为 key 只能是 NSString）也不能使用`setObject forKey`（因为 BOOL 是原始的，我`[NSNumber numberWithBool:YES]`也不能使用，因为 NSNumber 是不可变的，我需要更改 BOOL 值）。

所以问题是如何添加这样一个具有所有限制的键值对。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T15:14:52.363

`NSNumber`按照此答案中的建议将 BOOL 包装在 a中： [Objective-C dictionary inserting a BOOL](https://stackoverflow.com/questions/2108042/objective-c-dictionary-inserting-a-bool)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T15:15:07.593

字典必须包含对象。没有办法解决这个问题。您可以执行此操作的一种方法是为您需要操作的 BOOL 创建自定义 getter 和 setter 方法，以便它获取和更新字典中的值而不是属性中的值。或者，如果您需要保留属性引用，则需要使用 KVO 来保持这两个值同步，但这听起来像是一种反模式。如果您更详细地描述您的用例可能会有所帮助，但我认为这是您的两个选择。

# python - 更改会话 cookie 的超时时间时是否存在安全风险？

> ID：14564953
> 
> 赞同：1
> 
> 时间：2013-01-28T15:10:23.090
> 
> 标签：python, security, session, pyramid

假设我有一个金字塔应用程序，`UnencryptedCookieSessionFactoryConfig`用于 csrf 令牌和身份验证`SessionAuthenticationPolicy`。会话 cookie 的默认超时时间是 1200，这意味着我的用户在 20 分钟后断开连接，这很烦人。

我很想提高超时甚至删除它，并设置一个 max_age 以使其在浏览器中存活，但我想超时是有充分理由的。

拥有长期会话 cookie 是否存在安全风险？它被认为是不好的做法吗？

我的猜测是 csrf 令牌应该是短暂的。在这种情况下，我应该`AuthTktAuthenticationPolicy`用于身份验证。同样的问题：在将来使用 max_age 的身份验证 cookie 是一种不好的做法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T15:29:27.580

请注意，超时仅适用于在此期间未联系服务器的用户。在 20 分钟内访问您的网站会刷新 cookie。

是的，允许更长的 cookie 超时存在安全风险；它会创建一个更长的窗口来破坏客户端计算机或尝试利用应用程序中的 XSS 漏洞。我仍然会对 cookie 设置*限制*。

无论如何，我都会使用`AuthTktAuthenticationPolicy`来管理用户身份验证会话；它提供了对会话生命周期的更细粒度的控制（请参阅[我的这个较旧的答案](https://stackoverflow.com/questions/12232364/pyramid-security-questions-double-cookies-insecure-cookies-expiration/12234593#12234593)）。

您甚至可以编写一小段 javascript，当用户处于活动状态时（键盘和鼠标输入，例如每分钟一次）定期戳服务器以刷新该 cookie；关闭浏览器，会话在 20 分钟内自动消失。

# android - 如何重构我的代码以使用 AsyncTask？

> ID：14564955
> 
> 赞同：1
> 
> 时间：2013-01-28T15:10:26.160
> 
> 标签：android, android-asynctask

我为最初针对较低版本（2.3）的Android制作了一个应用程序。在我的概念验证工作之后，我试图让它在 Android 4 上工作。那时我得到了 NetworkOnMainThread 异常。

经过一番研究，我很快找到了 AsyncTask，听起来很棒。问题是，我很难绕开它。例如，这是我的原始代码：

```
public void Refresh(Context c)
{
    SummaryModel model = MobileController.FetchSummary(c);

    TextView txtCurrentWeight = (TextView)findViewById(R.id.txtCurrentWeight);
    TextView txtWeightChange = (TextView)findViewById(R.id.txtWeightChange);
    TextView txtAvgPerWeek = (TextView)findViewById(R.id.txtAvgPerWeek);

    if(model.ErrorMessage == "")
    {
        txtCurrentWeight.setText(model.CurrentWeight);
        txtWeightChange.setText(model.WeightChange);
        txtAvgPerWeek.setText(model.Average);
    }
    else
    {
        Toast.makeText(c, model.ErrorMessage, Toast.LENGTH_LONG).show();

        txtCurrentWeight.setText("");
        txtWeightChange.setText("");
        txtAvgPerWeek.setText("");
    }
} 
```

我创建了一个这样的 AsychTask：

```
public class WebMethodTask extends AsyncTask<Object, Integer, Object> {
    @Override
    protected void onPreExecute() {
        super.onPreExecute();
    }

    @Override
    protected void onProgressUpdate(Integer... values) {
        super.onProgressUpdate(values);
    }

    @Override
    protected void onPostExecute(Object result) {
        super.onPostExecute(result);

        SummaryModel model = (SummaryModel)result;
        // Can't seem to access UI items here??

    }

    @Override
    protected Object doInBackground(Object... params) {

        Context c = (Context)params[0];
        return MobileController.FetchSummary(c);
    }
} 
```

如何从 onPostExecute 方法访问 UI 项？或者，我对如何使用 AsyncTask 有错误的想法？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T15:19:56.173

您应该能够访问您放置评论的UI（在`postExecute`方法中）

此外，我建议对 AsyncTask 使用更专业的类，以便您的代码看起来更好：

```
public class WebMethodTask extends AsyncTask<Object, Integer, SummaryModel> {

    private Activity source;
    public WebMethodTask(Activity activity) {
        this.source=activity;
        }

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
    }

    @Override
    protected void onProgressUpdate(Integer... values) {
        super.onProgressUpdate(values);
    }

    @Override
    protected void onPostExecute(SummaryModel model) {
        super.onPostExecute(model );

        TextView txtCurrentWeight = (TextView)source.findViewById(R.id.txtCurrentWeight);
        TextView txtWeightChange = (TextView)source.findViewById(R.id.txtWeightChange);
        TextView txtAvgPerWeek = (TextView)source.findViewById(R.id.txtAvgPerWeek);

        if(model.ErrorMessage.length()==0)
        {
            txtCurrentWeight.setText(model.CurrentWeight);
            txtWeightChange.setText(model.WeightChange);
            txtAvgPerWeek.setText(model.Average);
        }
        else
        {
            Toast.makeText(c, model.ErrorMessage, Toast.LENGTH_LONG).show();

            txtCurrentWeight.setText("");
            txtWeightChange.setText("");
            txtAvgPerWeek.setText("");
        }

    }

    @Override
    protected SummaryModel doInBackground(Context ... params) {
        Context c = params[0];
        return MobileController.FetchSummary(c);
    }
} 
```

**编辑：**添加了对您的活动的引用，以考虑您的最后评论。

* * *

但是，如果您的 acynctask 可能很长，那么保留对​​活动的引用可能不是一个好主意。

创建一个将接受某些`displayModel(CummaryModel)`方法的侦听器类将是一个更好的设计，如果活动同时没有暂停/停止，其职责是调用 setText 方法......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T15:55:54.387

在刷新方法中创建一个内部类

```
enter code herepublic void Refresh(Context c) 
```

{ SummaryModel 模型 = MobileController.FetchSummary(c);

```
TextView txtCurrentWeight = (TextView)findViewById(R.id.txtCurrentWeight);
TextView txtWeightChange = (TextView)findViewById(R.id.txtWeightChange);
TextView txtAvgPerWeek = (TextView)findViewById(R.id.txtAvgPerWeek);

if(model.ErrorMessage == "")
{
    txtCurrentWeight.setText(model.CurrentWeight);
    txtWeightChange.setText(model.WeightChange);
    txtAvgPerWeek.setText(model.Average);
}
else
{
    Toast.makeText(c, model.ErrorMessage, Toast.LENGTH_LONG).show();

    txtCurrentWeight.setText("");
    txtWeightChange.setText("");
    txtAvgPerWeek.setText("");
}
class WebMethodTask extends AsyncTask<Object, Integer, Object> {
@Override
protected void onPreExecute() {
    super.onPreExecute();
}

@Override
protected void onProgressUpdate(Integer... values) {
    super.onProgressUpdate(values);
}

@Override
protected void onPostExecute(Object result) {
    super.onPostExecute(result);

    SummaryModel model = (SummaryModel)result;
    // Can't seem to access UI items here??

}

@Override
protected Object doInBackground(Object... params) {

    Context c = (Context)params[0];
    return MobileController.FetchSummary(c);
} 
```

}

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T15:13:07.097

使用 WebMethodTask#onPostExecute 方法中加载的模型数据填充 ui 项。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T15:35:18.630

您需要参考您的 UI 控件。将 UI 控件的引用传递给 ASyncTask 时，您将产生问题。假设以下场景：

1.  显示活动（活动实例 1）
2.  以 te 活动作为参考调用异步任务。
3.  旋转您的设备（默认情况下，设备旋转将创建一个新活动）->（活动实例 2）
4.  当同步任务完成时，活动实例 1 用于显示结果。但是，该活动不再存在，导致异常。

结论是 ASyncTask 不应该用于网络活动相关的后台任务。

幸运的是，有一个解决方案：RoboSpice。RoboSpice 使用了另一种方法。查看[https://github.com/octo-online/robospice/wiki/Understand-the-basics-of-RoboSpice-in-30-seconds](https://github.com/octo-online/robospice/wiki/Understand-the-basics-of-RoboSpice-in-30-seconds)以获得很好的解释。更多信息：[https ://github.com/octo-online/robospice](https://github.com/octo-online/robospice)

# c++ - 多模板类中模板的条件

> ID：14564958
> 
> 赞同：0
> 
> 时间：2013-01-28T15:10:30.253
> 
> 标签：c++, templates, std

一个初学者的问题：

如何在多模板类中的模板上放置条件：

我试过这个：

```
template <class T, class U>
typename std::enable_if<...>
class foo
{
}; 
```

还有这个：

```
template <class T,
          class U = std::enable_if<...>>
class foo
{
}; 
```

但他们没有工作。任何帮助，将不胜感激 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T15:13:56.577

声明一个默认为的附加模板参数`void`并将其专门化为`enable_if`：

```
template <typename T, typename U, typename Enable = void>
class foo {};

template <typename T, typename U>
class foo<T, U, typename std::enable_if<...>::type>
{
}; 
```

# java - Hibernate 4 connection.autocommit=false 被忽略

> ID：14564961
> 
> 赞同：5
> 
> 时间：2013-01-28T15:10:44.850
> 
> 标签：java, hibernate, tomcat, guice, guice-persist

我们在 tomcat 6 上有一个使用 Java、hibernate 4、guice 3、guice-persist 3 的应用程序

connection.autocommit 在 hibernate.cfg.xml 文件中配置为 false：

```
<session-factory>
    <property name="dialect">org.hibernate.dialect.MySQL5InnoDBDialect</property>
    <property name="connection.driver_class">com.mysql.jdbc.Driver</property>
    <property name="connection.url">jdbc:mysql://localhost:3306/dev</property>
    <property name="connection.username">root</property>
    <property name="connection.password">root</property>
    <property name="connection.autocommit">false</property>
    <property name="connection.proof_property">true</property>

    <!-- Disable second-level cache. -->
    <property name="cache.provider_class">org.hibernate.cache.NoCacheProvider</property>
    <property name="cache.use_query_cache">false</property>
    <property name="cache.use_minimal_puts">false</property>
    <property name="max_fetch_depth">3</property>

    <!-- Print SQL to stdout. -->
    <property name="show_sql">true</property>
    <property name="format_sql">true</property>

    <property name="id.new_generator_mappings">true</property>

    <!-- Drop and then re-create schema on SessionFactory build, for testing. -->
    <property name="hbm2ddl.auto">create</property>

    <!-- Bind the getCurrentSession() method to the thread. -->
    <property name="current_session_context_class">thread</property>

    <!-- configuration pool via c3p0--> 
    <property name="c3p0.initialPoolSize">0</property>
    <property name="c3p0.acquire_increment">1</property>
    <property name="c3p0.max_size">32</property>
    <property name="c3p0.max_statements">100</property> 
    <property name="c3p0.min_size">0</property> 
    <property name="c3p0.timeout">600</property> <!-- seconds --> 

    <!-- Hibernate XML mapping files -->
    <!-- <mapping resource="org/MyClass.hbm.xml"/>-->

    <!-- Hibernate Annotations (and package-info.java)-->
    <mapping package="model"/>

</session-factory> 
```

但是在部署时，日志文件显示自动提交设置为 true：

```
INFO: Starting Servlet Engine: Apache Tomcat/6.0.35
28 janv. 2013 16:03:01 org.hibernate.annotations.common.Version <clinit>
INFO: HCANN000001: Hibernate Commons Annotations {4.0.1.Final}
28 janv. 2013 16:03:01 org.hibernate.Version logVersion
INFO: HHH000412: Hibernate Core {4.1.9.Final}
28 janv. 2013 16:03:01 org.hibernate.cfg.Environment <clinit>
INFO: HHH000206: hibernate.properties not found
28 janv. 2013 16:03:01 org.hibernate.cfg.Environment buildBytecodeProvider
INFO: HHH000021: Bytecode provider name : javassist
28 janv. 2013 16:03:01 org.hibernate.cfg.Configuration configure
INFO: HHH000043: Configuring from resource: /hibernate.cfg.xml
28 janv. 2013 16:03:01 org.hibernate.cfg.Configuration getConfigurationInputStream
INFO: HHH000040: Configuration resource: /hibernate.cfg.xml
28 janv. 2013 16:03:01 org.hibernate.cfg.Configuration doConfigure
INFO: HHH000041: Configured SessionFactory: null
28 janv. 2013 16:03:01 org.hibernate.service.jdbc.connections.internal.ConnectionProviderInitiator instantiateExplicitConnectionProvider
INFO: HHH000130: Instantiating explicit connection provider: org.hibernate.service.jdbc.connections.internal.C3P0ConnectionProvider
28 janv. 2013 16:03:01 org.hibernate.service.jdbc.connections.internal.C3P0ConnectionProvider configure
INFO: HHH010002: C3P0 using driver: com.mysql.jdbc.Driver at URL: jdbc:mysql://localhost:3306/dev
28 janv. 2013 16:03:01 org.hibernate.service.jdbc.connections.internal.C3P0ConnectionProvider configure
INFO: HHH000046: Connection properties: {user=root, password=****, autocommit=true, proof_property=true, release_mode=auto}
28 janv. 2013 16:03:01 org.hibernate.service.jdbc.connections.internal.C3P0ConnectionProvider configure
INFO: HHH000006: Autocommit mode: true
28 janv. 2013 16:03:01 com.mchange.v2.log.MLog <clinit>
INFO: MLog clients using java 1.4+ standard logging.
28 janv. 2013 16:03:02 com.mchange.v2.c3p0.C3P0Registry banner
INFO: Initializing c3p0-0.9.1 [built 16-January-2007 14:46:42; debug? true; trace: 10]
28 janv. 2013 16:03:02 com.mchange.v2.c3p0.impl.AbstractPoolBackedDataSource getPoolManager
INFO: Initializing c3p0 pool... com.mchange.v2.c3p0.PoolBackedDataSource@b6868296 [ connectionPoolDataSource -> com.mchange.v2.c3p0.WrapperConnectionPoolDataSource@8d0e5680 [ acquireIncrement -> 1, acquireRetryAttempts -> 30, acquireRetryDelay -> 1000, autoCommitOnClose -> false, automaticTestTable -> null, breakAfterAcquireFailure -> false, checkoutTimeout -> 0, connectionCustomizerClassName -> null, connectionTesterClassName -> com.mchange.v2.c3p0.impl.DefaultConnectionTester, debugUnreturnedConnectionStackTraces -> false, factoryClassLocation -> null, forceIgnoreUnresolvedTransactions -> false, identityToken -> 1hgeby98szzd5hkbs91s5|a69b6b, idleConnectionTestPeriod -> 0, initialPoolSize -> 0, maxAdministrativeTaskTime -> 0, maxConnectionAge -> 0, maxIdleTime -> 600, maxIdleTimeExcessConnections -> 0, maxPoolSize -> 32, maxStatements -> 100, maxStatementsPerConnection -> 0, minPoolSize -> 0, nestedDataSource -> com.mchange.v2.c3p0.DriverManagerDataSource@d4b5ff9b [ description -> null, driverClass -> null, factoryClassLocation -> null, identityToken -> 1hgeby98szzd5hkbs91s5|75b3ee, jdbcUrl -> jdbc:mysql://localhost:3306/dev, properties -> {user=******, password=******, autocommit=true, proof_property=true, release_mode=auto} ], preferredTestQuery -> null, propertyCycle -> 0, testConnectionOnCheckin -> false, testConnectionOnCheckout -> false, unreturnedConnectionTimeout -> 0, usesTraditionalReflectiveProxies -> false; userOverrides: {} ], dataSourceName -> null, factoryClassLocation -> null, identityToken -> 1hgeby98szzd5hkbs91s5|1a9bea3, numHelperThreads -> 3 ]
28 janv. 2013 16:03:02 org.hibernate.dialect.Dialect <init>
INFO: HHH000400: Using dialect: org.hibernate.dialect.MySQL5InnoDBDialect
28 janv. 2013 16:03:02 org.hibernate.engine.jdbc.internal.LobCreatorBuilder useContextualLobCreation
INFO: HHH000424: Disabling contextual LOB creation as createClob() method threw error : java.lang.reflect.InvocationTargetException
28 janv. 2013 16:03:02 org.hibernate.engine.transaction.internal.TransactionFactoryInitiator initiateService
INFO: HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory
28 janv. 2013 16:03:02 org.hibernate.hql.internal.ast.ASTQueryTranslatorFactory <init>
INFO: HHH000397: Using ASTQueryTranslatorFactory
28 janv. 2013 16:03:02 org.hibernate.tool.hbm2ddl.SchemaExport execute
INFO: HHH000227: Running hbm2ddl schema export 
```

为什么休眠忽略自动提交属性？我们应该关心吗？（正如我们的测试向我们展示的那样，正确注释的方法中的异常会回滚，所以一切看起来都很好）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-10T07:42:19.537

我在使用hibernate + MySQL时也遇到了这个问题。我没有设置为假但结果为真，而是将其设置为真但结果为假。我看到了你的问题，但没有答案。我想通过以下方式分享我如何解决问题：

1 重新启动数据库服务器。

2 清理项目。

3 重启网络服务器。

我已经尝试了很多方法，实际上，我不知道为什么这终于奏效了......只是为了分享。

# c# - 连接必须有效且打开。MySql 5.2 上的错误

> ID：14564963
> 
> 赞同：0
> 
> 时间：2013-01-28T15:10:54.680
> 
> 标签：c#, .net, mysql

我在调用存储过程时遇到此错误...为什么？

```
 public void InsertVideo()
    {
            MySqlConnection conn = new MySqlConnection(ConfigurationManager.ConnectionStrings["AxWaveConnection"].ToString());
            MySqlCommand cmd = new MySqlCommand("InsertVideo", conn);
            cmd.CommandType = System.Data.CommandType.StoredProcedure;

            cmd.Parameters.Add(new MySqlParameter("in_youtubevideoid", VideoId));
            cmd.Parameters.Add(new MySqlParameter("in_title", Title));
            cmd.Parameters.Add(new MySqlParameter("in_rating", ViewCount));
            cmd.Parameters.Add(new MySqlParameter("in_viewcount", Rating));

            cmd.ExecuteNonQuery();
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T15:12:10.107

因为你忘记`OPEN`了连接，在调用之前，先调用`ExecuteNonQuery`，`conn.Open()`

```
conn.Open();
cmd.ExecuteNonQuery(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-06T04:05:07.390

```
 Your complete solution

    public void InsertVideo()
      {
         MySqlConnection conn = new  MySqlConnection(ConfigurationManager.ConnectionStrings["AxWaveConnection"].ToString());

         MySqlCommand cmd = new MySqlCommand("InsertVideo", conn);

        cmd.CommandType = System.Data.CommandType.StoredProcedure;
        conn.Open()
        cmd.Parameters.Add(new MySqlParameter("in_youtubevideoid", VideoId));
        cmd.Parameters.Add(new MySqlParameter("in_title", Title));
        cmd.Parameters.Add(new MySqlParameter("in_rating", ViewCount));
        cmd.Parameters.Add(new MySqlParameter("in_viewcount", Rating));

        cmd.ExecuteNonQuery();
      } 
```

# symfony - 1 个表单中的几个相同的表单，不同的实体字段类型

> ID：14564964
> 
> 赞同：0
> 
> 时间：2013-01-28T15:10:57.923
> 
> 标签：symfony, symfony-forms

你好，我有一个表格

```
 ->add('workers', 'entity',  array(
                'class'=>'Surgery\WorkersBundle\Entity\Workers',
                'property'=>'profession',
                'query_builder'=> function(\Doctrine\ORM\EntityRepository $er)
                {
                    return $er->createQueryBuilder('u')
                              ->where('u.profession = ?1 ')
                              ->setParameter(1, 'P');
                } 
```

我想在我的模板中使用三个具有不同参数的相同表格（L 和 M） 可以做这样的事情吗？我是否创建了 3 个不同的表单？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T15:43:47.733

选项一：

将对象类型作为参数传递给表单类型构造函数，并在构建表单时使用它。

选项 b（可能更好）：

使用继承将更抽象的形式扩展到其他更具体的形式。

# python - Python“追加”功能

> ID：14564965
> 
> 赞同：0
> 
> 时间：2013-01-28T15:11:09.600
> 
> 标签：python, windows, python-2.7, append

我在使用附加功能将帐户添加到映射时遇到问题。

```
mapp = ["example"]

example1 = raw_input("Enter Username: ")
if example1 in mapp:
    print "yay"
else:
    print ("Forgot Username eh?")
    example = raw_input("Enter New Username: ")
    if example not in mapp:
        mapp.append(sana) 
```

从脚本中可以看出，如果我输入用户名“example”，程序会打印“yay”。如果我输入错误，我可以创建新的“帐户”，下次我希望我的程序打印“耶”时可以使用它。但是当我尝试添加新的“帐户”时它不起作用。我没有收到任何错误消息或任何东西，但它只是没有向 mapp 添加新的“帐户”。那么有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T15:13:57.470

您没有将正确的变量附加到`mapp`; 您正在追加`sana`，但您应该追加`example`：

```
if example not in mapp:
    mapp.append(example) 
```

对于这个用例，您可以使用 a`set`代替：

```
mapp = {'example'}

# ...
if example1 in mapp:
    # ...
else:
    # ... 
    example = raw_input("Enter New Username: ")
    mapp.add(example) 
```

# asp.net-mvc - mvc 标签助手的意义何在？

> ID：14564973
> 
> 赞同：0
> 
> 时间：2013-01-28T15:11:48.437
> 
> 标签：asp.net-mvc, html-helper

我知道 actionlink 使用路由表来显示 corrert 链接，但是 Html.Label 助手提供了什么优势？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T19:37:17.773

标签助手并没有做很多事情。它的功能是封装一小部分标记，这样你就不必每次都手动编写 HTML。它还提供**智能感知**。当您更改模型中的值时，这很有帮助，然后您不必返回并编辑您的视图。理想情况下，您的标签文本和目标应该由您的`ViewModel`使用驱动，`LabelFor`而不是在您的 HTML 中定义。

如果您查看`Label`帮助程序的源代码，它会执行以下操作：

```
//Create a new <label> element
TagBuilder tag = new TagBuilder("label");
//Add the attribute "for" with the id value of the target <input>
tag.Attributes.Add("for", TagBuilder.CreateSanitizedId(html.ViewContext.ViewData.TemplateInfo.GetFullHtmlFieldName(htmlFieldName)));
//Set the label text <label>My Text</label>
tag.SetInnerText(resolvedLabelText);
//Merge any attributes specified in the htmlAttributes arguement (ex: class="style")
tag.MergeAttributes(htmlAttributes, replaceExisting: true);
//Write the output rendering, this is not a self closing tag </label>
return tag.ToMvcHtmlString(TagRenderMode.Normal); 
```

注意：我在这里引用了 LabelFor 而不是 Label。但是，LabelFor 助手实际上在内部调用了 Label 助手。LabelFor 助手是最佳实践。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T20:18:57.330

`Html.Label`并且`Html.LabelFor`是[HTML 标签](http://www.w3.org/wiki/HTML/Elements/label)标签的包装器。此标记的核心“隐藏”功能之一是，如果它与输入控件关联，您可以通过单击标签将焦点设置到关联控件。这对于文本框和类似的东西来说没什么大不了的，但是将它与您的复选框和单选按钮一起使用将大大提高您的用户的可用性 - 单击标签与单击控件本身具有相同的效果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T15:19:38.467

只需从 mvc 书中阅读即可

“最后，值得注意的是，这些 HTML 帮助方法会自动对它们呈现的字段值进行 HTML 编码。这非常重要；否则，您的应用程序中将有无穷无尽的 XSS 漏洞。”

Pro ASP.NET MVC 2 框架

史蒂文·桑德森

# zend-form - ZF2 使用数据库中的数据渲染表单

> ID：14564977
> 
> 赞同：0
> 
> 时间：2013-01-28T15:11:57.970
> 
> 标签：zend-form, render, zend-framework2

我想使用 Zend Form (Zend Framework 2) 编辑数据库中的记录。

在 ZF1 中，我在控制器中做了：

```
$values = $table->getValues();
$form = new MyForm();
$form->populate($values);
$this->view->form = $form; 
```

并在视图中：

```
<?php echo $this->form ?> 
```

在 ZF2 中，我在控制器中尝试过：

```
$values = $table->getValues();
$form = new MyForm();
$form->populateValues($values); // form->setData($values) does not work either
return array('form' => $form); 
```

在我的观点中：

```
<?php echo $this->form()->openTag($form) ?>
<?php echo $this->formCollection($form) ?>
<?php echo $this->form()->closeTag($form) ?> 
```

但这会呈现表单，但没有数据。

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T15:49:46.503

问题是`$table->getValues()`在我的代码中返回一个 arrayObject 而`populateValues()`需要一个数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T15:34:57.470

`prepare()`在您的视图脚本中打开它之前，您需要调用您的表单。例如：

```
<?php $form->prepare(); ?>
<?php echo $this->form()->openTag($form) ?>
<?php echo $this->formCollection($form) ?>
<?php echo $this->form()->closeTag($form) ?> 
```

[请参阅此处](http://framework.zend.com/manual/2.0/en/modules/zend.form.collections.html)的参考指南

请注意以下几点：

> 准备（）方法。您必须在视图中呈现任何内容之前调用它（此函数仅用于在视图中调用，而不是在控制器中）。

# linux - 为 ARM 架构编译 Linux 程序 - 在主机操作系统上运行

> ID：14564978
> 
> 赞同：6
> 
> 时间：2013-01-28T15:12:05.110
> 
> 标签：linux, windows, arm

我有一个运行 Linux Ubuntu 的飞思卡尔 (i.MX53) 的 ARM Coretex-A8 开发板。它启动得很好，我可以用鼠标/键盘/终端访问系统。

首先，我想在主机操作系统内的板上运行一个应用程序，就像在 PC 上运行应用程序一样。

我的问题是编译我的测试程序，使用基于 gcc 的工具链，如 YAGARTO，我最终遇到了链接问题，因为我没有定义任何启动脚本。

我找到了很多关于构建“裸机”配置的信息（包括编译内核以及制作加载和链接脚本），但对于让应用程序在主机操作系统上运行没有任何用处。

我的开发环境在 Windows 7 上运行。我也可以选择在 Linux X86 上运行，但我怀疑这是否有助于我制作 ARM 应用程序。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T10:16:47.323

对于 ARM-Linux 应用程序开发，最好的选择是安装了 ARM 工具链的 Linux Host(x86) 机器。在 Ubuntu Desktop 机器中，您可以使用以下命令安装 ARM 工具链：

```
apt-get install gcc-arm-linux-gnueabi 
```

工具链安装后，您可以使用以下命令进行交叉编译：

```
gcc-arm-linux-gnueabi-gcc -o hello hello.c 
```

使用此工具链，您可以使用标准 C 库交叉编译您的 C 程序，而无需启动代码。应用程序可以在您的 Host Linux(x86) 平台上进行交叉编译，并在 Target Linux(ARM) 平台上运行。

Windows 版本的 ARM-Linux 工具链也可用。你可以从[这里](https://launchpad.net/linaro-toolchain-binaries)得到它。

[Linaro Developers Wiki](https://wiki.linaro.org/) - 一个专注于改进 Linux on ARM 的开放组织，将为您的工作提供很好的参考。

# c# - 过滤带有 1-10k 个关键字的 HTML 文档

> ID：14564980
> 
> 赞同：0
> 
> 时间：2013-01-28T15:12:08.063
> 
> 标签：c#, regex, full-text-search, string-matching

我有一个 html 文档，并希望针对多个 (1 - 10k) [目前为 1k，稍后最多 10k] 关键字的出现对其进行过滤。

我有一个预编译的正则表达式，它存储我的搜索词，例如：

```
static Regex r = new Regex(@"keyword1|keyword2|keyword999",RegexOptions.Compiled | RegexOptions.IgnoreCase); 
```

这是我的代码：

```
Stopwatch sw = new Stopwatch();
sw.Start();
MatchCollection matches = Cache.r.Matches(doc.DocumentNode.InnerHtml);
string s = "";
if (matches.Count > 0)
{
    foreach (Match m in matches)
    {
        s += m.Value + ",";
    }
}
long time = sw.ElapsedMilliseconds;
Console.Write(time + " = "+matches.Count+" -> "+s ); 
```

平均时间大约需要 5-8 秒。这太过分了。是否有任何有效的方法来过滤针对大量关键字的 html 文档？或者也许有更有效的算法来过滤这个..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T15:19:42.693

你应该使用`StringBuilder`而不是`string`..

除非您告诉我们更多有关关键字是什么的信息，否则几乎没有任何优化..

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T15:46:42.897

正如**lboshuizen**指出的那样

> 用 10k 个关键字创建一个正则表达式似乎不是要走的路 [...]

如果您负担得起产生多个线程的费用，则可以并行扫描文档以查找关键字的出现：

```
IEnumerable<string> keywords = LoadKeywords();
List<string> list = new List<string>();
keywords.AsParallel()
    .Aggregate(list, (seed, keyword) =>
    {
        if(doc.DocumentNode.InnerHtml.Contains(keyword))
            seed.Add(keyword);
        return seed;
    }); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-28T15:53:17.650

有些答案已经很好了，但我想我也会把它扔进去......

我也做过同样的事情，我使用 HTML Agility Pack 来帮助减少我正在分析的关键字。

[http://htmlagilitypack.codeplex.com/](http://htmlagilitypack.codeplex.com/)

获取 HTML 片段非常容易，仅搜索文本节点，然后在该空间而不是整个文档上运行关键字分析。

它还有助于消除误报（出现在 javascript 注释、alt 标记等任何其他内容中的关键字）。

只是一个尝试缩小搜索空间的想法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-28T15:19:34.913

建议：

用 10k 个关键字创建一个正则表达式似乎不是我的 POV 的方法。正则表达式是贪婪的，会尝试各种冗余匹配。（=浪费时间）

使用较小的关键字集构建正则表达式并在您的 html 文档中以增量方式运行它们。

优化可以是从文档中删除匹配的关键字（和相关内容），将缩小并且剩余的正则表达式的工作更少==运行得更快。

或者

把它转过来，不要使用正则表达式来扫描文档。将文档分解为单词并再次使用字典检查它们。我怀疑该文档将包含所有 10k 个单词。（从最小集合循环比从最大集合循环更有效）

# delphi - 在 Excel 中插入一行

> ID：14564984
> 
> 赞同：1
> 
> 时间：2013-01-28T15:12:19.280
> 
> 标签：delphi, delphi-xe2, excel-2010

我试图说服 Excel 从 Delphi 应用程序中插入一行。

通常我只会将新数据附加到电子表格的末尾，但此应用程序的简要说明需要遵循严格的模板设计。

这个[问题](https://stackoverflow.com/questions/5114484/how-to-append-rows-to-an-excel-sheet)有一个答案，GolezTrol 建议以下代码：

```
ExcelApplication.ActiveSheet.Rows[10].Insert; 
```

或者

```
ExcelApplication.ActiveSheet.ActiveCell.EntireRow.Insert; 
```

使用 Excel2010，当我尝试编译任一选项时，我会得到“未声明的标识符‘行’”或“未声明的标识符：ActiveCell”。

有什么建议可以让我这样做吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T21:09:35.150

您正在使用早期绑定，您在链接的问题中提到的答案是后期绑定。您可以使用以下代码测试该答案：

```
var
  Excel: OleVariant;
begin
  Excel := CreateOleObject('Excel.Application');
  Excel.Visible := True;
  Excel.Workbooks.Add;
  Excel.ActiveSheet.Rows[10].Insert;
  ... 
```

然而，对象模型与早期绑定接口有些不同。您可以在[此处](http://msdn.microsoft.com/en-us/library/ms262200%28v=office.14%29.aspx)找到参考。

插入行的示例如下所示。假设“工作簿”指的是一个有效的工作簿，然后您可以在第 10 行插入一行，如下所示：

```
var
  Range: ExcelRange;
begin
  Range := (Workbook.ActiveSheet as _Worksheet).Range['A10', 'A10'].EntireRow;
  Range.Insert(xlShiftDown, Null);
  .. 
```

# ios - 用 NSString 替换 NSMutableData 的一部分

> ID：14564985
> 
> 赞同：0
> 
> 时间：2013-01-28T15:12:21.677
> 
> 标签：ios, ascii, nsdata

我有一些`NSMutableData`持有一些`ASCII`代码。我想用由以下组成的其他字节替换特定范围内的一些字节`NSString`：

```
NSString *myString = @"\r"
const char *myChar = [myString UTF8String];
[myData replaceBytesInRange:myRange withBytes:&myChar]; 
```

现在，在记录 myData 时，每次运行应用程序时，我都会为交换的字节获得不同的值！我不应该得到<0D>吗？！

我究竟做错了什么？

# activereports - 如何判断我拥有的是标准版还是专业版？

> ID：14564987
> 
> 赞同：0
> 
> 时间：2013-01-28T15:12:23.290
> 
> 标签：activereports

我们在 Windows-XP 上使用 DataDynamic ActiveReports .Net 3.0，我们希望升级到 Windows-7 的最新版本。然后我们遇到了一个问题。我们无法判断我们使用的是哪个版本（标准版或专业版）。我尝试了谷歌搜索，它不是很有帮助。我们查看了“程序文件”和“数据动态”文件夹，我们发现没有可执行文件。所以，我们不知道我们拥有什么。

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T18:34:03.320

这取决于您的序列号。两个版本的安装相同。通过电子邮件或致电 ComponentOne 销售团队并提供您的序列号（或者如果您没有序列号，请发送注册用户或购买者），他们会告诉您您拥有哪个版本的许可证。

或者，如果您已经在开发人员机器上安装了产品，您可以尝试使用仅包含在专业版中的功能（例如 WebViewer、最终用户设计器控件）来查看它们是否显示“评估”消息. 如果他们在您运行产品时显示评估消息，则您拥有 Standard。如果他们没有，你有 Pro。

# java - 列表输入法

> ID：14564988
> 
> 赞同：0
> 
> 时间：2013-01-28T15:12:25.400
> 
> 标签：java, list, input, nullpointerexception

我是新手，我对以下方法有疑问：问题是：`java.lang.NullPointerException`

代码：

```
public static List<Integer> input(List<Integer> l)
{
        Node<Integer> pos=l.getFirst();
        System.out.println("Enter num (!=999)");
        int x = reader.nextInt();
        l.insert(null, x);
        while(x!=999)
        {
                System.out.println("Enter num (!=999)");
                l.insert(pos, x);
                pos = pos.getNext();
        }

        return l;
} 
```

**愚蠢的我，我忘记了一段时间内的输入消息......**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T15:28:35.190

两种可能：

1.  你的“ `pos`”参考是`null`（你可以检查）
2.  " `pos`" 对象包含一个 NULL 对象，然后编译器尝试将其自动装箱为某处的原始类型（该`Node`事物被声明为`Integer`对象类型）

`null`SO：在尝试访问“”之前进行检查，并在声明内容时`pos`使用“ `Integer`”对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T15:33:38.750

如果您初始化`l`为空列表，则调用

```
Node<Integer> pos=l.getFirst(); 
```

会回来`null`的。然后稍后，您调用`pos.getNext();`一个`null`实例，因此`NullPointerException`. 解决此问题的一种方法是处理`while`循环中出现空列表的可能性，如下所示：

```
while (x != 999)
{
    System.out.println("Enter num (!=999)");
    l.insert(pos, x);
    if (pos == null)
        pos = l.getFirst();
    else
        pos = pos.getNext();
} 
```

当你运行它时，你会在你的代码中看到第二个问题，你应该能够解决它。

祝你好运！

# php - 使用 mysqli_query 进行 ajax 表单验证

> ID：14564991
> 
> 赞同：3
> 
> 时间：2013-01-28T15:12:29.423
> 
> 标签：php, javascript, jquery, mysql, ajax

到目前为止，我已经使用纯 javascript 来验证我的表单，但我需要在组合中添加一个 mysqli 查询。只有我对 jquery 和 ajax 不太擅长。我可以做一个简单的登录表单，但这有点复杂。谁能给我任何关于如何添加 jquery/ajax 组件来验证这一点的指示：

```
foreach($_POST as $key=> $for) {

     if(!empty($for) && $key != 'send' && $key != 'title')  {

        $usercheck =  "SELECT email FROM users WHERE email = '$for'";
        $usercheck = $db->query($usercheck);

     if($usercheck->num_rows > 0) {$x="1"; continue;}
     if($usercheck->num_rows == 0){$x="2"; break;}
     }
  }

     if($x == "2") {$message = $for." is not a regestered email";}
     if($x == "1") {  // valid - submit. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T15:47:09.227

你可以做的是像这样发送[$.post](http://api.jquery.com/jQuery.post/)：

```
 $.post("test.php", { "post1": "something", "post2":"somethingelse" }, // those will be sent via post to test.php
  function(data){// the returned data
    console.log(data.return1); // here just logging to the console. **optional**
    console.log(data.return2); 
    // complete your process 
  }, "json"); // specifying the type as json also optional 
```

在你的`test.php`

```
foreach($_POST as $key=> $for) {

 if(!empty($for) && $key != 'send' && $key != 'title')  {

    $usercheck =  "SELECT email FROM users WHERE email = '$for'";
    $usercheck = $db->query($usercheck);

 if($usercheck->num_rows > 0) {$x="1"; continue;}
 if($usercheck->num_rows == 0){$x="2"; break;}
 }
  }

 if($x == "2") {$data['message'] = $for." is not a regestered email";
   echo json_encode($data); // echo to pass back to $.post .. json_encode() in case of using json
   }
 if($x == "1") {  // valid - submit
  $data['message'] = 'valid'; // pass the message as valid post
echo json_encode($data); 
} 
```

## 记住：

如果您要发布表单提交以添加`event.preventDefault()`到您的 javascript 函数以手动处理表单。[在这里](http://api.jquery.com/event.preventDefault/)你可以找到更多关于它的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T15:23:36.127

Take a look at the Ajax Form Plugin [http://malsup.com/jquery/form/](http://malsup.com/jquery/form/).

For example, use it like this:

```
$(document).ready(function() { 
    $('#myForm').ajaxForm(
    {
        beforeSend: function() {

        },
        success: function(response)
        {
                //wow, it worked, let's do something with response
        },
        uploadProgress: function(event, position, total, percentComplete) {
            /*e.g. a upload percentage label */ 
            //var percentVal = percentComplete + '%';
            //$('#myLoadingDiv').html(percentVal);
        },
        cache: false,
    });
}); 
```

# actionscript-3 - AS3 无法访问公共静态常量

> ID：14564992
> 
> 赞同：1
> 
> 时间：2013-01-28T15:12:35.563
> 
> 标签：actionscript-3, flash, constants

我有这个类，我在其中声明了两个公共静态常量：

```
package com.xxx.videoplayer_v2 {    
    import flash.display.DisplayObject;
    import flash.display.MovieClip; 
    import flash.events.Event;
    import flash.events.MouseEvent;
    import flash.geom.Rectangle;
    import flash.text.TextField;

    public class ControlBar extends MovieClip 
    {
        public static const VOLUME_PRESSED:String = "volumePressed";
        public static const PLAY_PRESSED:String = "playPressed";        
        ... 
```

声明对我来说看起来不错，但是当我从项目中的任何其他类调用常量时（下面是舞台上的一个示例）

```
import com.xxx.videoplayer_v2.ControlBar;

trace(ControlBar.PLAY_PRESSED); 
```

我收到此错误：

> 1119：通过静态类型 Class 的引用访问可能未定义的属性 PLAY_PRESSED。

为什么会这样？我已经用相同的语法对其他类做了数千次，但我以前从未遇到过这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T15:47:52.623

我想到了！

我在舞台上有一个 ControlBar 实例，它的属性是我为 ActionScript 导出的。

**问题是这样的：**我填写了与基类（ControlBar）完全相同的名称的类文本字段，并在基类文本字段中插入了“com.weborama.videoplayer_v2.ControlBar”，这是正确的。

我修复了填写类文本字段“ **VPControlBar** ”而不是“ControlBar”。现在我知道我不能将基类的相同名称放在那里。

感谢所有试图帮助我的人！

# excel - Excel：检查列表中的值并根据结果对其进行着色

> ID：14564993
> 
> 赞同：0
> 
> 时间：2013-01-28T15:12:35.810
> 
> 标签：excel, list, conditional-formatting

我一直在寻找几个小时，寻找一种使用条件格式检查从一个表到另一个表的数据的方法，如下所示：

![在此处输入图像描述](../Images/2db025762b5eebe8be3e666e55f90b38.png)

如果任何项目与表 B 中的另一个项目匹配，则条件格式将为表 A 上的单元格着色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T15:21:09.433

您不能在工作表中使用条件格式（我刚刚意识到）。唯一的方法是将查找数据的“副本”与您想要条件格式的单元格放在同一张表上。因此设置例如 A3 = Sheet2!A3、A4 = Sheet2!A4 等。然后您应该能够对单元格使用条件格式。因此，选择表 A 中的一个单元格，转到格式/条件格式并选择公式，然后执行以下操作：

```
=NOT(ISNA(VLOOKUP(D3,$A$3:$A$6,1,0))) 
```

其中 D3 是表 A 中的单元格，$A$3:$A$6 是表 B 的位置。或类似的。

# javascript - 打开对话框 点击？

> ID：14564996
> 
> 赞同：1
> 
> 时间：2013-01-28T15:12:39.407
> 
> 标签：javascript, jquery

我的网站页面运行了`header.php`，其中包含所有页面所需的所有 JavaScript 和 CSS。

我想要做的是，无论用户在什么页面上，如果他们点击`<div>` `.register_button_click`，他们都会打开一个 JavaScript 对话框。我已将 JavaScript 放在 header.php 文件中并创建了我的`<div class="register_button_click">click here</div>`，但它没有带来任何东西。

我哪里错了？

```
<head>       
 <script type="text/javascript">
        var $dialog; 
        $(document).ready(function () {
            $dialog = $('<div></div>')
            .html('My Dialog Demo...')
            .dialog({
                autoOpen: false,
                title: 'My Dialog'
            });

            $('#register_button_click').click(function () {
                $dialog.dialog('open');
                return false; ////cancel eventbubbeling
            });
        });

        function showDialog() {
            $dialog.dialog('open');
            return false //cancel eventbubbeling
        }

    </script>
 </head> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T15:20:26.890

从 id 更改为 class：

```
 $('.register_button_click').click(function () {
               showDialog();
            }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T15:24:41.400

在 jquery 函数中，您试图通过它的 ID 访问元素。但是您只在 HTML 代码中定义了元素的类。

将您的 div 更改为`<div id="register_button_click">click here</div>`，一切都会好起来的。