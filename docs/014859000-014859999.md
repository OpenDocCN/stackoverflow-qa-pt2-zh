# StackOverflow 问答 14859000-14859999

# php - Joomla 从 1.7 升级到 2.5 的数据库脚本？

> ID：14859002
> 
> 赞同：0
> 
> 时间：2013-02-13T17:08:29.693
> 
> 标签：php, joomla, joomla2.5, joomla1.7

我正在寻找执行数据库更改并将 Joomla 安装从 Joomla 1.7 升级到 Joomla 2.5 的脚本。因此，我不是在寻找代码中的更改，因为我可以从 SVN 中检查这些更改。访问此脚本可以让我只在无法从 Joomla 管理员运行自动升级的服务器上运行这些脚本。

更新：正如@Elin 指出的那样。com_admin 下 sql 文件夹的快照。从这里执行哪些 sql 查询？

![在此处输入图像描述](../Images/d7c100314773373fec19c29796ced073.png)

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T03:19:51.607

查看 com_admin 的 sql 文件夹。

# python - Python中有没有operator.unpack？

> ID：14859005
> 
> 赞同：3
> 
> 时间：2013-02-13T17:08:32.963
> 
> 标签：python, functional-programming

是否有任何内置版本

```
def unpack(f, a):
    return f(**a) #or ``return f(*a)'' 
```

为什么*unpack*不被认为是一个运算符并且位于 operator.* 中？

我正在尝试做与此类似的事情（但当然想要针对同一类型问题的通用解决方案）：

```
from functools import partial, reduce
from operator import add
data = [{'tag':'p','inner':'Word'},{'tag':'img','inner':'lower'}]
renderer = partial(unpack, "<{tag}>{inner}</{tag}>".format)
print(reduce(add, map(renderer, data))) 
```

就像**不使用 lambdas 或 comprehensions**一样。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T17:13:34.377

这不是解决这个问题的方法。怎么样

```
print(''.join('<{tag}>{inner}</{tag}>'.format(**d) for d in data)) 
```

以 Pythonic 风格呈现的相同行为。

编辑：既然你似乎反对使用 Python 的任何好的特性，那么这个怎么样：

```
def tag_format(x):
    return '<{tag}>{inner}</{tag}>'.format(tag=x['tag'], inner=x['inner'])
results = []
for d in data:
    results.append(tag_format(d))
print(''.join(results)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T19:30:38.947

我不知道有一个运算符可以做你想做的事，但你真的不需要它来避免 lambdas 或理解：

```
from functools import reduce
from operator import add
data = [{'tag':'p','inner':'Word'},{'tag':'img','inner':'lower'}]
print(reduce(add, map("<{0[tag]}>{0[inner]}</{0[tag]}>".format, data))) 
```

如果您愿意，似乎可以概括这样的事情。

# python - 使用 PyCrypto 解密 Perl 加密密码

> ID：14859006
> 
> 赞同：1
> 
> 时间：2013-02-13T17:08:34.707
> 
> 标签：python, encryption, pycrypto

我正在尝试解密存储在文件中的密码短语。加密是使用 Perl::CBC 模块完成的，但我需要为 Python 脚本解密它。坦率地说，我对加密算法知之甚少（或任何东西）。

密码短语被加密如下：

```
use Crypt::CBC;

my $key = '0123456789';
my $iv  = '$KJh#(}q';

my $cipher = Crypt::CBC->new(
    -key    => $key,
    -cipher => 'Blowfish',
    -header => 'none',
    -iv     => $iv,
);

my $passphrase = 'You have decrypted the passphrase.';
my $hex_encrypted = $cipher->encrypt_hex($passphrase); 
```

它给出了一个加密的密码：9033c838e4418fbdc50a9fc0813745296d195d59954008f94b2b36a8e65dca959686206960a7828a

现在，我需要在 Python 脚本中使用它（使用 Python 2.7）。天真地，我希望这会奏效：

```
from Crypto.Cipher import Blowfish
from binascii import hexlify, unhexlify

perl_pass =  unhexlify('9033c838e4418fbdc50a9fc0813745296d195d59954008f94b2b36a8e65dca959686206960a7828a')
key = '0123456789'
iv  = '$KJh#(}q'
print Blowfish.new(key, Blowfish.MODE_CBC, iv).decrypt(perl_pass) 
```

但这似乎只会产生一堆无法打印的垃圾。我玩了一些没有成功。我不太确定我需要在这里做什么才能成功解密此密码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T20:32:58.863

您提供给 Crypt::CBC 的“密钥”实际上是一个密码短语，从中生成了一个“文字密钥”；Crypto.Cipher.Blowfish 需要该文字密钥，而不是密码。您可以从 Perl 程序中以十六进制打印生成的密钥，然后在 Python 中使用它：

```
use Crypt::CBC;

my $key = '0123456789';
my $iv  = '$KJh#(}q';

my $cipher = Crypt::CBC->new(
    -key    => $key,
    -cipher => 'Blowfish',
    -header => 'none',
    -iv     => $iv,
);

my $passphrase = "You have decrypted the passphrase.";
my $hex_encrypted = $cipher->encrypt_hex($passphrase);

print unpack('H*', $cipher->key()), "\n"; 
```

-

```
$ perl perl_crypt_cbc.pl
781e5e245d69b566979b86e28d23f2c78e938564cd1410f0ec1c1781466a6738bab0a6ed984c75ab34c68bbf7558077714043c5bdb959e46 
```

-

```
from Crypto.Cipher import Blowfish
from binascii import hexlify, unhexlify

perl_pass = unhexlify("9033c838e4418fbdc50a9fc0813745296d195d59954008f94b2b36a8e65dca959686206960a7828a")

key = unhexlify("781e5e245d69b566979b86e28d23f2c78e938564cd1410f0ec1c1781466a6738bab0a6ed984c75ab34c68bbf7558077714043c5bdb959e46")
iv  = '$KJh#(}q'
print Blowfish.new(key, Blowfish.MODE_CBC, iv).decrypt(perl_pass) 
```

-

```
python python_crypt_cbc.py 
You have decrypted the passphrase. 
```

注意最后会有一些不可打印的字符： Blowfish 加密的字符串必须是 8 字节的倍数，所以 Perl 默默地填充它。它填充的字节是填充的长度：在这种情况下，六个字节的填充，所以它们每个都是 0x06。您可以轻松删除它们：

```
from Crypto.Cipher import Blowfish
from binascii import hexlify, unhexlify

perl_pass = unhexlify("9033c838e4418fbdc50a9fc0813745296d195d59954008f94b2b36a8e65dca959686206960a7828a")

key = unhexlify("781e5e245d69b566979b86e28d23f2c78e938564cd1410f0ec1c1781466a6738bab0a6ed984c75ab34c68bbf7558077714043c5bdb959e46")
iv  = '$KJh#(}q'
num_padding = ord(Blowfish.new(key, Blowfish.MODE_CBC, iv).decrypt(perl_pass)[-1])

print Blowfish.new(key, Blowfish.MODE_CBC, iv).decrypt(perl_pass)[:(-1*num_padding)] 
```

# git - 当我忘记创建主分支时如何“合并”一个 git 分支

> ID：14859011
> 
> 赞同：0
> 
> 时间：2013-02-13T17:08:43.917
> 
> 标签：git, branch, branching-and-merging

我最近从 CVS/SVN 切换到 Git，到目前为止我很享受。然而，在我最近的开发周期中，我忘记了在创建我的开发分支之前创建主分支的关键步骤。

在我的正常周期中，我有我的主干（稳定代码），然后是我的维护分支，我们在其中执行维护版本。在该维护分支中，我们有针对个别错误的开发分支。

通常，我的维护分支遵循我的版本。所以在我的后备箱里，我会有我的主要版本（即：ver 1、ver 2、ver 3）。然后是我的维护分支（即：1.1、2.1、2.2 等）。然后在我的维护分支中，我的这个版本的开发分支（即：1.2.1、2.1.3 等）。

在我的上一个周期中，我正在开发 2.2.1。我的上一个版本是 2.1.8。我不小心从我的 2.1 分支中分支出来并对其进行了处理，而不是首先创建一个 2.2 分支。现在，当我想合并我的更改时，我没有 2.2 分支可以合并回。

我“应该”做的是将我的 2.1 分支合并回主干（v2），然后从主干分支 2.2，然后从 2.2 分支分支 2.2.1。

既然我没有 2.2 分支，而我的 2.2.1 分支错误地脱离了 2.1，我该如何自救？

在 2.2.1 中已经完成了很多开发工作。

```
|-1.0
|-2.0
   |-2.1
      |-2.1.1
      |-2.1.2
      |-....
      |-2.1.8
      |-2.2.1        <---- wrong place!!! 
```

本来应该：

```
|-1.0
|-2.0
   |-2.1
      |-2.1.1
      |-2.1.2
      |-....
      |-2.1.8
   |-2.2
      |-2.2.1 
```

谢谢，

埃里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T17:59:21.990

首先，在 git 中，您可以随时更改内容并移动内容。所以不要惊慌。首先，创建整个目录的副本以“以防万一”在不同的副本上运行测试，然后再在主副本上进行。它会让你感觉更安全一些。

你需要做的是：

1) 在您希望的位置创建 2.2 分支。IE，看看你*应该*从哪里分支（就像`git checkout v2.1`我想的那样，但很难从你的描述中看出）。然后用类似的东西在那里创建 2.2 分支`git checkout -b v2.2`。

2) 然后，您需要将 2.2.1 分支移至 v2.2 分支。这实际上很容易用 来完成`git rebase`，它在功能上将分支从树中的一个位置移动到另一个位置。您可以使用`git checkout v2.2.1`后跟来执行此操作`git rebase v2.2`，这会将在 v2.2.1 分支中所做的更改移动到新的 v2.2 分支中。

# objective-c - 在数组上使用 KVC 的 @count 会从数组中的类中引发异常

> ID：14859012
> 
> 赞同：1
> 
> 时间：2013-02-13T17:08:51.607
> 
> 标签：objective-c, cocoa, nsarray, key-value-coding

所以，我有这个：

```
@interface Foo
@property(nonatomic, readonly, retain) NSArray* bars;
@end

@implementation Foo
@synthesize bars = _bars;
// ... more stuff here ...
@end 
```

所以`Foo`充满了`bars`的实例`Bar`，并且 的实例`Foo`存在于容器对象中。然后我说：

```
[container valueForKeyPath:@"foo.bars.@count"] 
```

我希望能给我一个很好的盒装号码。但是我反而得到：

```
Exception: [<Bar 0xc175b70> valueForUndefinedKey:]: this class is not key value coding-compliant for the key bars. 
```

所以为什么？我不希望必须实现任何特殊的东西`Bar`才能使`NSArray`of `Bar`s 可数，但这就是这个错误消息所暗示的。该文档只有一些琐碎的示例，但我希望它能够以相同的方式工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T17:35:45.853

我的代码与您的代码有何不同？因为这行得通...

```
//  Foo.h
#import <Foundation/Foundation.h>

@interface Foo : NSObject
@property(nonatomic, readonly, retain) NSArray* bars;
@end

//  Foo.m
#import "Foo.h"

@interface Foo ()
// extended property decl here, to be readable, but this didn't seem to matter in my test
@property(nonatomic, retain) NSArray* bars;
@end

@implementation Foo

- (id)init {

    self = [super init];
    if (self) {
        _bars = [NSArray arrayWithObjects:@"bar one", @"bar none", nil];
    }
    return self;
}

@end 
```

然后，在我的容器类中：

```
// .h
@property (strong, nonatomic) Foo *foo;

// .m
_foo = [[Foo alloc] init];
NSNumber *c = [self valueForKeyPath:@"foo.bars.@count"];
NSLog(@"count is %@", c); 
```

日志 => “计数为 2”

# javascript - 当有哈希时按下浏览器后退按钮时执行某些操作

> ID：14859013
> 
> 赞同：0
> 
> 时间：2013-02-13T17:08:52.253
> 
> 标签：javascript, jquery, fragment-identifier

当我按下返回以从散列访问页面时，我试图发出警报。我正在使用以下代码

```
if(window.location.hash) {
} else {
    alert('test');
} 
```

如果我在[http://someurl.com/#somehash](http://someurl.com/#somehash)并按下浏览器后退按钮以返回[http://someurl.com/](http://someurl.com/)，则不会触发警报。

有什么办法可以使这项工作，还是我误解了什么？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T17:11:05.390

[这](https://stackoverflow.com/questions/8908172/jquery-up-to-date-hash-change-listener)是您已经回答的问题。

归结为使用监听器：

```
window.onhashchange = function() {
  console.log('hash changed');
} 
```

# php - Curl 的替代方案 - 本地文件

> ID：14859014
> 
> 赞同：1
> 
> 时间：2013-02-13T17:08:59.643
> 
> 标签：php, post, curl, local

我们在我们的服务器中设置了多个虚拟主机/域。我需要从不同的 VHost（读取：相同的服务器，不同的 v-hosts）将数据发布到 VHost 中的文件（基本上执行 php 并获取结果）。

我能够做到这一点`curl`。喜欢`curl http://vhost/file.php`。但我想知道是否有更好的方法可以在没有`curl`, 的情况下执行本地 php 文件。另一个问题是虚拟主机。虚拟主机配置不正确。所以`localhost`不是 vhost 是唯一的选择，所以它不起作用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T17:15:47.430

`shell_exec()`将执行本地命令并返回一个字符串。

`$output = shell_exec('php file.php');`我认为应该做你想做的事。您将不得不使用参数传入域名，因为命令行不知道有什么不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T17:21:11.787

如果我理解正确，您需要执行 POST 请求。POST 是一种 HTTP 请求的方法，这就是 curl 的用途。话虽如此，我认为将 CURL 用于您的任务没有任何问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T17:44:21.390

为什么需要“更好”的方式？它起作用了，实际上没有任何东西通过网络流出，流量会在到达 NIC 之前很久就反弹回网络堆栈。除非您想重新编码这些应用程序以处理一些奇怪的本地调用新方法，否则我会保持原样。

唯一真正通过网络发出的是用于解析主机名的 DNS 请求。

# windows-8 - Windows 8 Store App DirectX 11.1 启用带有 alpha 加载的 PNG 纹理的 Blendstate

> ID：14859018
> 
> 赞同：0
> 
> 时间：2013-02-13T17:09:06.413
> 
> 标签：windows-8, windows-store-apps, directx-11, alphablending, c++-cx

我正在使用以下代码将具有透明度的 PNG 加载到纹理中：

```
ComPtr<IWICStream> stream;
ComPtr<IWICBitmapDecoder> bitmapDecoder;
ComPtr<IWICBitmapFrameDecode> bitmapFrame;
ComPtr<IWICFormatConverter> formatConverter;
unsigned int width, height
D3D11_SUBRESOURCE_DATA resourceData;

ZeroMemory(&resourceData, sizeof(resourceData));

DX::ThrowIfFailed( m_wicFactory->CreateStream(&stream) );
DX::ThrowIfFailed( stream->InitializeFromMemory( rawFileBytes->Data, rawFileBytes->Length) );
DX::ThrowIfFailed( m_wicFactory->CreateDecoderFromStream( stream.Get(), nullptr, WICDecodeMetadataCacheOnDemand, &bitmapDecoder ) );
DX::ThrowIfFailed( bitmapDecoder->GetFrame(0, &bitmapFrame) );
DX::ThrowIfFailed( m_wicFactory->CreateFormatConverter(&formatConverter) );
DX::ThrowIfFailed( formatConverter->Initialize( bitmapFrame.Get(), GUID_WICPixelFormat32bppPBGRA, WICBitmapDitherTypeNone, nullptr, 1.0f /* some docs set this to 0.0f */, WICBitmapPaletteTypeCustom ) );
DX::ThrowIfFailed( bitmapFrame->GetSize(&width, &height) );

std::unique_ptr<byte[]> bitmapPixels(new byte[width * height * 4]);
DX::ThrowIfFailed( formatConverter->CopyPixels( nullptr, width * 4, width * height * 4, bitmapPixels.get() ) );

resourceData.pSysMem = bitmapPixels.get();
resourceData.SysMemPitch = width * 4;
resourceData.SysMemSlicePitch = 0;

CD3D11_TEXTURE2D_DESC textureDesc( DXGI_FORMAT_B8G8R8A8_UNORM, width, height, 1, 1 );
DX::ThrowIfFailed( m_d3dDevice->CreateTexture2D( &textureDesc, &resourceData, &texture2D ) );

if ( textureView != nullptr ) {
  CD3D11_SHADER_RESOURCE_VIEW_DESC shaderResourceViewDesc( texture2D.Get(), D3D11_SRV_DIMENSION_TEXTURE2D );
  DX::ThrowIfFailed( m_d3dDevice->CreateShaderResourceView( texture2D.Get(), &shaderResourceViewDesc, &shaderResourceView ) );
} 
```

并在不同的代码部分设置我的混合状态：

```
Microsoft::WRL::ComPtr<ID3D11BlendState1> blendState;

D3D11_BLEND_DESC1 desc;
ZeroMemory( &desc, sizeof( desc ) );
desc.IndependentBlendEnable = FALSE;
desc.AlphaToCoverageEnable = FALSE;
desc.RenderTarget[0].BlendEnable = TRUE;
desc.RenderTarget[0].LogicOpEnable = FALSE;
desc.RenderTarget[0].SrcBlend = D3D11_BLEND::D3D11_BLEND_SRC_ALPHA;
desc.RenderTarget[0].DestBlend = D3D11_BLEND::D3D11_BLEND_INV_SRC_ALPHA;
desc.RenderTarget[0].BlendOp = D3D11_BLEND_OP::D3D11_BLEND_OP_ADD;
desc.RenderTarget[0].SrcBlendAlpha = D3D11_BLEND::D3D11_BLEND_ONE;
desc.RenderTarget[0].DestBlendAlpha = D3D11_BLEND::D3D11_BLEND_ONE;
desc.RenderTarget[0].BlendOpAlpha = D3D11_BLEND_OP::D3D11_BLEND_OP_ADD;
desc.RenderTarget[0].RenderTargetWriteMask = D3D11_COLOR_WRITE_ENABLE_ALL;

direct3d.device->CreateBlendState1( &desc, blendState.GetAddressOf() );
direct3d.context->OMSetBlendState( blendState.Get(), NULL, 0xffffffff ); 
```

通过所有这些设置，我仍然会在应该有 alpha 的地方得到黑色背景。

**澄清：** 我有一组 48 个方形面板，它们从 z 0.0f 到 48.0f 相互重叠，但我只能看到最前面的 48.0f 纹理。透明区域不是透明的，而是被渲染为黑色。

**编辑：**这是我的像素着色器：

```
Texture2D Texture : register(t0);
SamplerState Sampler : register(s0);

struct sPSInput
{
    float4 pos : SV_POSITION;
    float3 norm : NORMAL;
    float2 tex : TEXCOORD0;
};

float4 SimplePixelShader(sPSInput input) : SV_TARGET
{
  float4 textured = Texture.Sample(Sampler, input.tex);
  return textured;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T23:45:01.913

这个

```
 desc.RenderTarget[0].SrcBlend = D3D11_BLEND::D3D11_BLEND_ONE; 
```

应该是这个

```
 desc.RenderTarget[0].SrcBlend = D3D11_BLEND::D3D11_BLEND_ALPHA; 
```

AlphaToCoverageEnable 也应根据您的需要设置为 false

此外，您必须禁用 Z 缓冲区。启用的 Z 缓冲区可防止绘制前面对象后面的所有对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-07T02:58:59.533

您需要将 Z 值标准化为 0.0f（近）- 1.0f（远）的范围。

您是否正确设置了 ViewPort？

```
D3D11_VIEWPORT Viewport =
{
    0.0f,                           // TopLeftX
    0.0f,                           // TopLeftY
    <width>,                        // Width
    <height>,                       // Height
    0.0f,                           // MinDepth
    1.0f };                         // MaxDepth 
```

# jquery - jquery.val() vs 底层元素值性能

> ID：14859021
> 
> 赞同：1
> 
> 时间：2013-02-13T17:09:16.100
> 
> 标签：jquery, performance, dom

我有一个简单的性能问题。

哪一个更好

```
var elem = jQuery("#idOfMyElem"), y;
if (elem.length) {
    y = elem.val();
    // y = elem[0].value;
} 
```

哪一个表现更好？elem.val() 或 elem[0].value；

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T17:11:03.420

这个：

```
var elem = document.getElementById('idOfMyElem'), y;

if (elem) {
    y = elem.value;
}

$(elem).on('click', function() { ... }) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T17:18:49.150

[这](http://jsperf.com/jquery-val-test)是一个简单的测试。据它说，`y = elem.val()`比它慢约 90%`y = elem[0].value`

# clojure - 在事务中包装返回值

> ID：14859028
> 
> 赞同：2
> 
> 时间：2013-02-13T17:09:34.447
> 
> 标签：clojure

在我看来，我想要实现的目标是微不足道的；然而，我自己解决这个问题让我很头疼。

我有一个用 Clojure 编写的服务实现，它通过 JPA 与数据库后端通信。我必须做这样的事情：

```
(defn foo []
  (let [entitymanager ... query ...]
    (do
      (.. entitymanager (getTransaction) (begin))
      (read-from-db query) ; <-- shall be returned
      (.. entitymanager (getTransaction) (commit))
      )
    )
  ) 
```

从*数据库读取*返回一个值。我查看了*java.jdbc*包，它看起来很有希望，但我想/必须坚持使用 JPA。此外，我的问题似乎并不特定于 JPA 本身。

有没有一种惯用的方法来在 Clojure 中对返回值进行这种包装？请记住，我是 Clojure 新手。

亲切的问候！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T17:49:26.337

我不确定是否理解您的问题。这是我对您的问题的回答：

```
(defn foo []
  (let [entitymanager ... query ...]
    (do
      (.. entitymanager (getTransaction) (begin))
      (let [db-reply (read-from-db query)] ; <-- shall be returned
        (.. entitymanager (getTransaction) (commit))
        db-reply)
      )
    )
  ) 
```

正确的？

# php - li 和 ul 有条件地显示子菜单

> ID：14859030
> 
> 赞同：0
> 
> 时间：2013-02-13T17:09:43.410
> 
> 标签：php, javascript, html, html-lists

我创建了一个带有标题的页面。此 header.php 具有以下格式：

```
<?php
$index_admin = "/test/index_test.php";
...
?>

<div id="button"> 
  <ul> 
    <li><a href=<?=$index_test?>><span class="<?php if($currentpath == basename($index_test)){echo("buttonon");} ?>">test</span></a></li>
    ...
  </ul> 
</div> 
```

在哪里

```
$currentpath = basename(__FILE__) 
```

在之前的每一页中设置

```
include "header.php" 
```

所以当我打开页面 index_test 我有类按钮，它改变了我的链接的颜色（所以它被显示为活动的）。

现在我想创建一个隐藏的 li 子菜单，如下所示：

```
<li><a href=<?=$index_test?>><span class="<?php if($currentpath == basename($index_test))    {echo("buttonon");} ?>">test</span></a></li>
     <ul style="display:none">
         <li>...</li> 
```

只有当我只经过

```
<li> 
```

和

```
<onmouseover:"callfunctiontoshowthesubmenu">. 
```

我在那儿。

我的问题是：当我打开子菜单上列出的页面时，我想保持子菜单显示。我怎样才能做到这一点？

哪种方式最快？

# ios - 快速滚动ios时自定义单元格中的UITextField值出现问题

> ID：14859031
> 
> 赞同：2
> 
> 时间：2013-02-13T17:09:44.330
> 
> 标签：ios, uitableview, uitextfield, custom-cell

我有一个包含自定义单元格的简单表格，每个单元格都包含一个文本字段。在**cellForRowAtIndexPath:**我根据**indexPath.row**创建和初始化每个单元格：

```
case 0:
{
    CellIdentifier = @"TextEditCell";
    TextEditCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        NSArray *topLevelObjects = [[NSBundle mainBundle] loadNibNamed:CellIdentifier owner:self options:nil];
        cell = [topLevelObjects objectAtIndex:0];
    }

    [cell configureCellWithText: [self.valueArray objectAtIndex:0]
                    placeholder: @"value no.0"]

    [cell performAction: @selector(saveValue0:)
        forControlEvent: UIControlEventEditingDidEnd
               inTarget: self];

    return cell;
} 
```

**configureCellWithText:placeholder：**设置单元格文本字段的文本和占位符。 **performAction:forControlEvent:inTarget**直接引用 textField 并将 textField 的值保存到本地数组中，以便再次使用时准确。

当我快速滚动表格时出现问题。来自不同单元格的值复制到另一个单元格并修改本地数组。我不知道为什么会这样。有人知道吗？如果需要，我可以提供更多代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T17:33:45.210

发生这种情况是因为您正在重用单元格，并且在重用单元格后正在运行 configureCellWithText。要解决这个问题，您可以：

1.  不要重复使用单元格-但这确实会损害您的表现。
2.  如果您在 6.0 上运行，则可以`tableView:didEndDisplayingCell:forRowAtIndexPath:`在单元格滚动到屏幕外时取消文本设置操作。
3.  您可以在将单元格出列时设置的自定义单元格类中创建一个标志。

**编辑**

因为我不知道你的细胞是如何工作的。除了 sudo 代码概念之外，我很难给你任何东西。

这是我的 sudo 代码：

用于行的 Tableview 单元格... - 出列单元格 - [单元格 cancel_previous_action] - 设置新操作。

# mysql - mySQL：如何选择每周有更多人休息的日子

> ID：14859032
> 
> 赞同：0
> 
> 时间：2013-02-13T17:09:48.090
> 
> 标签：mysql, sql

我有这个数据库： ![在此处输入图像描述](../Images/c5ccd55b18c7a014a5f75d320fecd7ea.png)

其中从 1 到 28 的数字代表一个月中的某天（FEB），1 和 0 分别代表 user_bid_id 何时下班或不下班。我想选择每周（即 1 到 7、8 到 15、16 到 23 等）人数最多的一天。

我尝试了许多不同的查询。

我可以使用此功能查看当天谁有空并计算当天的人数：

```
function checkPublishTraining($month){
     $month = sanitize($month);

if(bidIsPublished($month)){
 if(($month === 'FEB')){
  echo'
 <table>
 <tr id="checkBidding">
 <th>1</th> 
 <th>2</th> 
 <th>3</th> 
 <th>4</th> 
 <th>5</th> 
 <th>6</th> 
 <th>7</th> 
 <th>8</th> 
  <th>9</th> 
 <th>10</th> 
 <th>11</th> 
 <th>12</th> 
 <th>13</th> 
 <th>14</th> 
 <th>15</th> 
 <th>16</th> 
 <th>17</th> 
 <th>18</th> 
 <th>19</th> 
 <th>20</th> 
 <th>21</th> 
  <th>22</th> 
  <th>23</th> 
  <th>24</th> 
  <th>25</th> 
  <th>26</th> 
  <th>27</th> 
  <th>28</th> 
  </tr>
   <tr>';
          $i = 1;

    while ( $i <= 28 ) {
       $count = mysql_query("SELECT COUNT(`$i`)as days FROM $month WHERE `$i` = '1'");
       $num = mysql_fetch_array($count);

       echo'<td>';
       $names = mysql_query("SELECT user_bid_id FROM $month WHERE `$i` = '1'");
       while($row = mysql_fetch_array($names)){
       $name = firstName_from_id($row['user_bid_id']);
       echo '<h5>'.$name.'</h5>';
                    }

        echo'<h5>'.$num['days'].'</h5>';
         $i++;

       echo '</td>';

       }

       echo'</tr></table>';
       }
          }

             } 
```

返回此表：

![在此处输入图像描述](../Images/0bc5c6dead9ddeccf7d5f9d42a47d478.png)

我现在可以选择有更多会员的日子，但尝试每月至少为每个会员提供一次培训课程吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T18:16:40.113

要做到这一点，您需要对 MySQL 不支持的数据进行 UNPIVOT。因此，您可以为此创建一个视图，使用 UNION ALL（查看下面的查询）返回未透视的数据。获得此视图后，您可以执行以下操作：

```
SELECT myView.week, myView.day
FROM (
  SELECT week, max(total) as total
  FROM myView
  GROUP BY week) s
JOIN myView
  ON s.week = myView.week
  AND s.total = myView.total 
```

如评论中所述，如果一周的最大值相同，您每周可能会获得 1 个以上的结果。

这是视图查询：

```
CREATE myView AS
SELECT 1 as week, 1 as day, SUM(`1`) as total
FROM tableName
UNION ALL
SELECT 1, 2, SUM(`2`)
FROM tableName
UNION ALL
SELECT 1, 3, SUM(`3`)
FROM tableName
UNION ALL
SELECT 1, 4, SUM(`4`)
FROM tableName
UNION ALL
SELECT 1, 5, SUM(`5`)
FROM tableName
UNION ALL
SELECT 1, 6, SUM(`6`)
FROM tableName
UNION ALL
SELECT 1, 7, SUM(`7`)
FROM tableName
UNION ALL
SELECT 2, 1, SUM(`8`)
FROM tableName
UNION ALL
SELECT 2, 2, SUM(`9`)
FROM tableName
UNION ALL
SELECT 2, 3, SUM(`10`)
FROM tableName
UNION ALL
SELECT 2, 4, SUM(`11`)
FROM tableName
UNION ALL
SELECT 2, 5, SUM(`12`)
FROM tableName
UNION ALL
SELECT 2, 6, SUM(`13`)
FROM tableName
UNION ALL
SELECT 2, 7, SUM(`14`)
FROM tableName
UNION ALL
SELECT 3, 1, SUM(`15`)
FROM tableName
UNION ALL
SELECT 3, 2, SUM(`16`)
FROM tableName
UNION ALL
SELECT 3, 3, SUM(`17`)
FROM tableName
UNION ALL
SELECT 3, 4, SUM(`18`)
FROM tableName
UNION ALL
SELECT 3, 5, SUM(`19`)
FROM tableName
UNION ALL
SELECT 3, 6, SUM(`20`)
FROM tableName
UNION ALL
SELECT 3, 7, SUM(`21`)
FROM tableName
UNION ALL
SELECT 4, 1, SUM(`22`)
FROM tableName
UNION ALL
SELECT 4, 2, SUM(`23`)
FROM tableName
UNION ALL
SELECT 4, 3, SUM(`24`)
FROM tableName
UNION ALL
SELECT 4, 4, SUM(`25`)
FROM tableName
UNION ALL
SELECT 4, 5, SUM(`26`)
FROM tableName
UNION ALL
SELECT 4, 6, SUM(`27`)
FROM tableName
UNION ALL
SELECT 4, 7, SUM(`28`)
FROM tableName 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T17:50:34.790

对每列和之后的所有行值求和，将日期的列更改为 DAYOFWEEK 以对值进行分组

# include - 在主机文件中使用包含

> ID：14859034
> 
> 赞同：1
> 
> 时间：2013-02-13T17:09:54.557
> 
> 标签：include, hosts

我可以在我的主机文件中执行类似于 apache Include 的操作吗？

/etc/hosts 127.0.0.1 localhost 包括 /something/test-hosts

/something/tests-hosts 127.0.0.1 test.local

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T16:46:58.400

所以要回答这个问题，不，你不能在主机文件中使用包含

# angularjs - 如何使用 ng:Options 设置选项值

> ID：14859036
> 
> 赞同：3
> 
> 时间：2013-02-13T17:10:04.737
> 
> 标签：angularjs

显然 AngularJS 无法`<option>`在 IE 中正确地将元素列表构造为简单的模板，因此它提供了`ng:Options`指令（参见[https://github.com/angular/angular.js/issues/235](https://github.com/angular/angular.js/issues/235)）。

查看源代码后，我能够使用所需的标签构造选项，如下（[JSFiddle](http://jsfiddle.net/TVMmz/7/)）：

```
<!-- what I'd like to do -->
<select>
    <option ng:repeat='key in keys' value='{{key}}'> {{lookup[key].firstName}} {{lookup[key].lastName}} </option>
</select>
<br/>
<br/>
<!-- what Angular lets me do -->
<select ng-model='key' ng:options='k as lookup[k].firstName + " " + lookup[k].lastName for k in keys'></select> 
```

但是，当我使用 Firebug 检查选项时，我看到该值是一​​个数字索引，而不是我想要的键值（我希望将初始`k`值用作选项值）。

我没有深入研究代码，所以不知道我是否缺少表达式的另一部分（正则表达式似乎没有任何额外的相关关键字）。

我希望这里的某个人可能对这个指令足够了解，可以告诉我（1）怎么做，或者（2）我不走运。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T17:33:01.337

您所需的键值在您由 ng-model 指定的属性中，即`key`. 添加`{{key}}`到 HTML 的底部（就在最后一个选择列表之后）以查看它。

如您所见，Angular 将数组索引存储在 HTML 中。有关此的更多信息，请参阅[AngularJS - 选择的值属性](https://stackoverflow.com/questions/13803665/angularjs-value-attribute-for-select)

# sql - 从两个表中选择 - 按外键和主键排序结果

> ID：14859038
> 
> 赞同：1
> 
> 时间：2013-02-13T17:10:16.077
> 
> 标签：sql, sqlite

我有两张桌子：

1.  部分：_id，名称
2.  项目：_id，名称，section_id

我正在尝试以这种方式对结果进行排序：

```
1 Section1
1 Item1 1
2 Item2 1
3 Item3 1
2 Section2
4 Item4 2
5 Item5 2 
```

换句话说 - 将属于部分的项目放在部分本身的下方。

是否可以仅使用一个查询来实现这样的结果？

**编辑**

现在我正在使用`INNER JOIN`，但它并不完全适合我的目的：我需要知道查询中不同部分的确切数量，如果我能够知道下一部分的确切位置会很棒（现在我'我只是排序`section_id`并寻找它的变化）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T17:24:04.840

也许像这样，[这里有一些小提琴](http://sqlfiddle.com/#!9/6b051/8)

```
select 
        s._id sid,
        s.name, 
        null iid
    from 
        section s
union all
select 
        i.section_id sid, 
        i.name, 
        i._id iid
    from
        item i
    order by
        sid, iid 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T17:28:24.193

它可以像

```
select section._id as sectionId,section.name, 0  as itemId
from section 
union
select item.section_id as sectionId, item.name, item._id as itemId
from item
order by sectionId, itemId 
```

# java - 石英不触发简单触发器

> ID：14859044
> 
> 赞同：12
> 
> 时间：2013-02-13T17:10:50.663
> 
> 标签：java, cron, quartz-scheduler

这应该很简单，但我没有看到正在执行的工作。我在任务的 execute() 方法上有一个断点，没有线程到达那里。我不明白出了什么问题。

工作

```
class Printer implements Job{
    public Printer(){
        System.out.println("created printer");
    }

    @Override
    public void execute(JobExecutionContext context)
            throws JobExecutionException {
        System.out.println("hi" + context.getFireTime());
    }

} 
```

主要班

```
class MyClass {
      public static void main(String[] args) throws Throwable {
            Scheduler s = StdSchedulerFactory.getDefaultScheduler();
            JobDetail job = newJob(Printer.class).build();
            CronTrigger trigger = 
                    newTrigger()
                    .withIdentity("a", "t")
                    .withSchedule(cronSchedule("0/5 * * * * ?").inTimeZone(TimeZone.getDefault()))
                    .forJob(job).build();
            s.scheduleJob(job, trigger);

// This prints the right date!

            System.out.println(trigger.getNextFireTime()); 
            s.start();
        }
} 
```

**编辑**：我发现我没有quartz.property 文件，因此有可能从未创建石英的线程池。因此，如[文档](http://quartz-scheduler.org/api/2.1.0/org/quartz/impl/DirectSchedulerFactory.html)中所述，我将使用 StdSchedulerFactory 的代码替换为以下内容：

```
DirectSchedulerFactory.getInstance().createVolatileScheduler(10);
Scheduler s = DirectSchedulerFactory.getInstance().getScheduler(); 
```

你猜怎么了？还是没有运气。一样的效果。应用程序保持活动状态，触发不触发。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-19T09:41:58.627

我找到了解决方案：将定义作业（打印机）的类的可见性更改为**public**将使 Quartz 可以访问它并运行它。

```
public class Printer implements Job { // just add 'public'!
    public Printer() {
        System.out.println("created printer");
    }

    @Override
    public void execute(JobExecutionContext context)
            throws JobExecutionException {
        System.out.println("hi" + context.getFireTime());
    }

} 
```

这是可以理解的，因为只能将 a 传递`<? extends Job>.class` 给调度程序（该死的，为什么？？）而不是 - 例如 - 匿名对象。

话虽如此，**我发现 Quartz 在没有一条错误消息的情况下默默地失败触发作业的方式真的令人不安。**

# liferay - 有人在 liferay 6.1 上成功运行 Liferay Portal Systems Development(2012) 的示例代码吗？

> ID：14859045
> 
> 赞同：0
> 
> 时间：2013-02-13T17:10:54.840
> 
> 标签：liferay, liferay-6

我正在学习 Jonas X. Yuan 的 Liferay Portal Systems Development 2012。我尝试运行第 3 章的示例代码知识库 portlet，但出现了很多错误，例如社会权益不存在，viewJSP 未在 java 文件中定义等，有人在 liferay 6.1 上成功运行它吗？ 1？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T20:46:50.137

不确定他是否使用了您可以在[市场上](https://www.liferay.com/marketplace/-/mp/application/15197613)找到的 Liferay 标准知识库插件（源代码可在此处或在[github](https://github.com/olafk/liferay-plugins/tree/6.1.x/portlets/knowledge-base-portlet)上找到）。这本书似乎是针对 6.0 的（在网站上找不到信息，但它是 2012 年 1 月发布的），并且似乎知识库正在访问已弃用的 API。Liferay 6.0 中的社会公平在 Liferay 6.1 中称为社会活动。

# jquery - 使用 FontAwesome 等图标字体时，如何使图标在 jQuery 中可绑定？

> ID：14859051
> 
> 赞同：6
> 
> 时间：2013-02-13T17:11:22.477
> 
> 标签：jquery, html, css, twitter-bootstrap, font-awesome

使用[Font Awesome](http://fortawesome.github.com/Font-Awesome/)，我想使用*icon-remove*图标。所以我有`<i class="icon-remove"></i>`我的 HTML，它工作得很好。但是，我想在 jQuery 中使这个可绑定来为我关闭一个 div。

所以我用：

```
 $(".icon-remove").click(function() {
        alert("HELLO");
        $(".login-window").hide();
        $(".register-window").hide();
        $(".shadow").hide();
    }); 
```

但是，这不起作用。当我点击它时，什么也没有发生。

这是我使用过的 CSS（另请注意：`cursor: pointer;`不起作用）。

```
.icon-remove {
    display: block;

    color: #444;
    cursor: pointer;
    float: right;
    margin-right: 15px;
} 
```

我到底做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-13T17:17:35.797

如果图标是在页面加载后动态添加的，则该单击事件将不起作用。你需要使用[on](http://api.jquery.com/on/)代替。

这是使用它的一种方法：

```
$(document).on("click", ".icon-remove", function() {
    alert("HELLO");
    $(".login-window").hide();
    $(".register-window").hide();
    $(".shadow").hide();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T17:18:47.573

DOM 准备好后你的 javascript 执行了吗？您将需要以下内容：

```
$(document).on("click", ".icon-remove", function() {
    alert("HELLO");
    $(".login-window").hide();
    $(".register-window").hide();
    $(".shadow").hide();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T17:17:37.163

你的代码没问题。也许您的 JavaScript 代码中存在一些错误，导致整个事情无法正常工作。例如，在 Firefox 上使用 Firebug，您可以检查控制台选项卡以查看代码中是否存在错误。

这是用于测试您的代码的 JS Bin：http: [//jsbin.com/obogof/4](http://jsbin.com/obogof/4)

对于这一`CSS`部分，您必须确保您的 CSS 代码位于影响`.icon-remove`该类的任何其他 CSS 规则之后。它在这里正常工作：http: [//jsbin.com/obogof/5](http://jsbin.com/obogof/5)

# php - 使用 Joomla Mailer 发送数字签名邮件

> ID：14859052
> 
> 赞同：2
> 
> 时间：2013-02-13T17:11:24.287
> 
> 标签：php, email, joomla

我想使用 Joomla Mailer 类发送一封预先使用 openssl_pkcs7_sign PHP 函数签名的电子邮件。

有谁知道我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T13:08:41.197

JMail 从 PHPMailer 扩展而来，因此您可以使用 PHPMailer 支持的所有功能。

在这种情况下，您应该查看 Sign-function ( [Joomla API](http://api.joomla.org/PHPMailer/PHPMailer.html#Sign) ) 您将在 GitHub ( [PHPMailer](https://github.com/Synchro/PHPMailer) )上找到该项目

例子：

```
$mail = JFactory::getMailer();
$mail->Sign($cert_filename, $key_filename, $key_password); 
```

额外的：

[使用 phpmailer 通过 php 发送安全认证 (s/mime) 电子邮件](http://www.adam-makes-websites.com/discoveries/sending_secure_certified_s-mime_emails_via_php)

# jenkins - 在职位描述中插入文本文件的内容

> ID：14859055
> 
> 赞同：0
> 
> 时间：2013-02-13T17:11:36.427
> 
> 标签：jenkins

我正在尝试在职位描述中插入文件的内容。我的构建会生成一个文件，我可以通过以下 URL 轻松找到它：http://[my-domain]job/[my-job]/lastBuild/artifact/[my-file]。就我而言，这是一个文本文件，我想在职位描述中显示它。我可以使用 HTML 轻松插入指向该文件的链接，但如何插入该文件的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T14:58:59.620

你的詹金斯在运行什么？Windows 还是 Linux？

[Project Description Setter 插件](https://wiki.jenkins-ci.org/display/JENKINS/Project+Description+Setter+Plugin)确实是要走的路，但是您需要先在构建日志中显示文件的内容，然后插件才会选择它。

正如 Christopher 所说，您不需要工作 URL 即可访问工作区中的文件。

对于 Linux，将以下内容放入您的**shell 执行**步骤：
`echo -n "[DESC] " && cat myfile`
对于 Windows，请使用：
`echo|set /p="[DESC] " & type myfile`

这将打印文件的内容并以“[DESC]”为前缀。我们需要这个前缀（它可以是你想要的任何东西）来将这一行标识到 Description Setter 插件

在作业配置中，在**Set build description**下，键入：
`\[DESC\] (.*)`

注意：描述中只打印文件的第一行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T17:16:43.810

The [Project Description Setter plugin](https://wiki.jenkins-ci.org/display/JENKINS/Project+Description+Setter+Plugin) can do this.

# magento - Magento：在产品网格中显示产品已售出的次数

> ID：14859056
> 
> 赞同：1
> 
> 时间：2013-02-13T17:11:39.133
> 
> 标签：magento, magento-1.7

我希望在产品网格中添加一列（在管理区域中要清楚）以显示该产品已售出多少次。以下是我从其他几篇文章拼凑而成的内容：

在 app/code/local/Namespace/Qtysold/Block/Adminhtml/Catalog/Product/Grid.php

```
<?php

class Namespace_Qtysold_Block_Adminhtml_Catalog_Product_Grid extends Mage_Adminhtml_Block_Catalog_Product_Grid
{
/* Overwritten to be able to add custom columns to the product grid. Normally
 * one would overwrite the function _prepareCollection, but it won't work because
 * you have to call parent::_prepareCollection() first to get the collection.
 *
 * But since parent::_prepareCollection() also finishes the collection, the
 * joins and attributes to select added in the overwritten _prepareCollection()
 * are 'forgotten'.
 *
 * By overwriting setCollection (which is called in parent::_prepareCollection()),
 * we are able to add the join and/or attribute select in a proper way.
 *
 */
public function setCollection($collection)
{
    /* @var $collection Mage_Catalog_Model_Resource_Product_Collection */

    $store = $this->_getStore();

    if ($store->getId() && !isset($this->_joinAttributes['qty_sold'])) {
        $collection->joinAttribute(
            'qty_sold',
            'reports/product_collection',
            'entity_id',
            null,
            'left',
            $store->getId()
        );
    }
    else {
        $collection->addAttributeToSelect('qty_sold');
    }

    echo "<pre>";
    var_dump((string) $collection->getSelect());
    echo "</pre>";

    parent::setCollection($collection);
}

protected function _prepareColumns()
{
    $store = $this->_getStore();
    $this->addColumnAfter('qty_sold',
        array(
            'header'=> Mage::helper('catalog')->__('Qty Sold'),
            'type'  => 'number',
            'index' => 'qty_sold',
        ),
        'price'
     );

    return parent::_prepareColumns();
}
} 
```

这里有几件事。1) $store->getId() 返回 0，因此它永远不会进入 setCollection 中的第一个块，这是正确的行为，因为它是管理区域吗？2）如果我强制 joinAttribute 运行，它会导致异常（无效实体...），这是意料之中的，因为报告似乎并不是一个实体，但我不太清楚整个实体业务. 3）在其他示例中（例如：[http](http://www.creativemediagroup.net/creative-media-web-services/magento-blog/30-show-quantity-sold-on-product-page-magento) ://www.creativemediagroup.net/creative-media-web-services/magento-blog/30-show-quantity-sold-on-product-page-magento ）他们使用像这样的东西：

```
$_productCollection = Mage::getResourceModel('reports/product_collection')
->addOrderedQty($from, $to, true)
->addAttributeToFilter('sku', $sku)
->setOrder('ordered_qty', 'desc')
->getFirstItem(); 
```

而且我不确定是否有任何方法可以“加入”此报告/product_collection，或者是否有任何方法可以重新创建其“addOrderedQty”数据？

这是在 Magento 1.7 上。我可以根据需要提供更多详细信息。我是 Magento 开发的初学者，因此将不胜感激任何帮助（包括学习资源）。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T17:24:32.077

1) 管理区确实有商店 ID = 0，所以是的，这将始终返回。

这也意味着您的条件总是失败并且永远不会进行任何加入，它只会尝试将 qty_sold 添加到集合中，这当然不会起作用，因为它不是该实体数据的一部分。

问题是 joinAttribute 方法仅适用于“实体”（它取决于您尝试加入的模型使用的类），并且由于报告/产品集合不是其中之一，您将不得不以另一种方式加入使用这样的方法：

```
join() or joinLeft() 
```

用这种东西：

```
$collection->getSelect()
    ->join(
    'customer_entity',
    'main_table.customer_id = customer_entity.entity_id',
     array('customer_name' => 'email')
 ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-27T13:25:55.320

也在处理这个问题并解决如下：

```
protected function _prepareCollection() {
    // [...]
    $collection = Mage::getModel('catalog/product')->getCollection();

    // Add subquery join to sales_flat_order_item to get a SUM of how many times this product has been ordered
    $totalOrderedQuery = Mage::getSingleton('core/resource')->getConnection('core_read')
        ->select()
        ->from('sales_flat_order_item', array('product_id', 'qty_ordered' => 'SUM(`qty_ordered`)'))
        ->group('product_id');

    $collection->joinField('qty_ordered', $totalOrderedQuery, 'qty_ordered', 'product_id=entity_id', null, 'left');
    // [...]
    return parent::_prepareCollection();
} 
```

请注意 的用法`$collection->joinField()`，尝试使用提到的`$collection->getSelect()->join()`，但由于内部 Magento 数据收集未将列识别​​为数据集的一部分，它给出了排序顺序和过滤的各种问题。

然后`_prepareColumns`你可以简单地添加列：

```
$this->addColumn('qty_ordered', array(
    'header' => Mage::helper('xyz')->__('Total quantity ordered'),
    'sortable' => true,
    'width' => '10%',
    'index' => 'qty_ordered',
)); 
```

您可能想要添加一个渲染器来检查`NULL`值并将其转换为`'0'`，否则如果尚未订购产品，您最终将得到空列（您也可以在 SELECT 查询中使用[IFNULL](https://dev.mysql.com/doc/refman/5.0/en/control-flow-functions.html#function_ifnull) for修复此问题`qty_ordered`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T19:31:38.713

多亏了 Andrew 的提示，我能够实现我所需要的（尽管它并不完美）。这是我更新的 setCollection 代码：

```
public function setCollection($collection)
{
    /* @var $collection Mage_Catalog_Model_Resource_Product_Collection */

    $store = $this->_getStore();

    $collection->getSelect()->joinLeft(
        array('oi' => 'sales_flat_order_item'),
        'e.entity_id = oi.product_id',
        array("qty_sold" => 'SUM(oi.qty_ordered)')
    )->group('e.entity_id');

    parent::setCollection($collection);
} 
```

我很好奇是否有任何 Magento 开发人员发现这种方法存在严重缺陷（我知道一些业务逻辑，例如不计算被取消的产品等）或提出更好方法的建议。无论哪种方式，这现在都“足够好”并且满足我的需求，所以我会发布以防其他人需要它。

# cygwin - 安装 Cygwin x11 包

> ID：14859057
> 
> 赞同：2
> 
> 时间：2013-02-13T17:11:39.997
> 
> 标签：cygwin, x11

所以我试图安装这个：

[http://rcc.its.psu.edu/user_guides/remote_display/cygwin/](http://rcc.its.psu.edu/user_guides/remote_display/cygwin/)

大约 2 小时后，当我到达：

C:\cygwin\usr\X11R6\bin"

我只看到两个文件：cygXft-1.dll 和 X-start-menu-icons.sh

请帮助我，因为我花了大约 3 天的时间试图做到这一点，但它仍然不起作用。我可能做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T12:53:15.010

这些说明至少已经过时了 4 年（可能更久）并且不再正确。

X11 不再安装到 /usr/X11R6/ 中。

您可能会发现[http://x.cygwin.com/docs/ug/cygwin-x-ug.html](http://x.cygwin.com/docs/ug/cygwin-x-ug.html)上的说明很有帮助。

# javascript - 为什么 Segment.io 加载程序脚本将方法名称/参数推送到看似被覆盖的队列中？

> ID：14859058
> 
> 赞同：10
> 
> 时间：2013-02-13T17:11:52.767
> 
> 标签：javascript, asynchronous, segment-io

我一直在剖析以下代码片段，它用于异步加载[Segment.io](https://segment.io)分析包装脚本：

```
// Create a queue, but don't obliterate an existing one!
var analytics = analytics || [];

// Define a method that will asynchronously load analytics.js from our CDN.
analytics.load = function(apiKey) {

    // Create an async script element for analytics.js.
    var script = document.createElement('script');
    script.type = 'text/javascript';
    script.async = true;
    script.src = ('https:' === document.location.protocol ? 'https://' : 'http://') +
                  'd2dq2ahtl5zl1z.cloudfront.net/analytics.js/v1/' + apiKey + '/analytics.min.js';

    // Find the first script element on the page and insert our script next to it.
    var firstScript = document.getElementsByTagName('script')[0];
    firstScript.parentNode.insertBefore(script, firstScript);

    // Define a factory that generates wrapper methods to push arrays of
    // arguments onto our `analytics` queue, where the first element of the arrays
    // is always the name of the analytics.js method itself (eg. `track`).
    var methodFactory = function (type) {
        return function () {
            analytics.push([type].concat(Array.prototype.slice.call(arguments, 0)));
        };
    };

    // Loop through analytics.js' methods and generate a wrapper method for each.
    var methods = ['identify', 'track', 'trackLink', 'trackForm', 'trackClick',
                   'trackSubmit', 'pageview', 'ab', 'alias', 'ready'];

    for (var i = 0; i < methods.length; i++) {
        analytics[methods[i]] = methodFactory(methods[i]);
    }
};

// Load analytics.js with your API key, which will automatically load all of the
// analytics integrations you've turned on for your account. Boosh!
analytics.load('MYAPIKEY'); 
```

它的注释很好，我可以看到它在做什么，但是当涉及到函数时我很困惑，它会`methodFactory`在主`analytics.js`脚本加载到全局`analytics`数组之前推送任何方法调用的详细信息（方法名称和参数）。

这一切都很好，但是如果/当主脚本*确实*加载时，它似乎只是覆盖了全局`analytics`变量（请参见[此处的最后一行](https://github.com/segmentio/analytics.js/blob/master/src/analytics.js)），因此所有数据都将丢失。

我看到这如何通过存根不存在的方法来防止网页中的脚本错误，但我不明白为什么存根不能只返回一个空函数：

```
var methods = ['identify', 'track', 'trackLink', 'trackForm', 'trackClick',
               'trackSubmit', 'pageview', 'ab', 'alias', 'ready'];

for (var i = 0; i < methods.length; i++) {
    lib[methods[i]] = function () { };
} 
```

我错过了什么？请帮我理解！

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-19T19:09:47.800

Ian，Segment.io 的联合创始人——我实际上并没有编写代码，Calvin 做了，但我可以告诉你它在做什么。

你是对的，这`methodFactory`是对方法进行存根，以便它们在脚本加载之前可用，这意味着人们可以`analytics.track`在不将这些调用包装在`if`or调用中的情况下`ready()`调用。

但是这些方法实际上比“哑”存根更好，因为它们保存了被调用的方法，因此我们可以稍后重播这些操作。就是这部分：

```
analytics.push([type].concat(Array.prototype.slice.call(arguments, 0))); 
```

为了使其更具可读性：

```
var methodFactory = function (method) {
    return function () {
        var args = Array.prototype.slice.call(arguments, 0);
        var newArgs = [method].concat(args);
        analytics.push(newArgs);
    };
}; 
```

它附加了被调用方法的名称，这意味着如果 I `analytics.identify('userId')`，我们的队列实际上会得到一个如下所示的数组：

```
['identify', 'userId'] 
```

然后，当我们的库加载时，它会卸载所有排队的调用并将它们重播到实际方法（现在可用）中，以便仍然保留加载之前记录的所有数据。这是关键部分，因为我们不想在库有机会加载之前丢弃发生的任何调用。看起来像这样：

```
// Loop through the interim analytics queue and reapply the calls to their
// proper analytics.js method.
while (window.analytics.length > 0) {
    var item = window.analytics.shift();
    var method = item.shift();
    if (analytics[method]) analytics[method].apply(analytics, item);
} 
```

`analytics`在那个时候是一个局部变量，在我们完成重放之后，我们用局部替换全局`analytics`（这是真正的交易）。

希望这是有道理的。我们实际上将在我们的博客上发布一个关于 3rd-party Javascript 的所有小技巧的系列文章，所以您可能很快就会了解它！

# android - Android SQLiteDB 没有完成添加值

> ID：14859063
> 
> 赞同：0
> 
> 时间：2013-02-13T17:12:05.920
> 
> 标签：android, android-sqlite

我的 SQLiteDatabase 给我带来了一些麻烦。当用户关闭应用程序时，在 onPause() 中，AsyncTask 开始保存数据。我不知道这是否是最好的方法，但我这样做的方法是，首先数据库删除所有现有数据（不是太多，两个表之间可能有20-30个值），然后将新数据添加回数据库。

deleteAll() 方法工作得很好，但是当它尝试添加每个项目时，它在第 6 个之后失败。

这是我的 AsyncTask 的 doInBackground() 方法：

```
@Override
    protected Void doInBackground(Void... args) 
    {           
        //open database
        try 
        {
            myDbHelper.openDatabase();
        }catch(SQLException sqle)
        {    
            throw sqle;  
        }

        myDbHelper.deleteAll();

        //add all ingredients & units
        for (int i = 0; i < ingredients.size(); i++)
            myDbHelper.addIngredient(ingredients.get(i));
        for (int i = 0; i < units.size(); i++)
            myDbHelper.addUnit(units.get(i));

        myDbHelper.close();

        return null;
    } 
```

接下来，这里是我的 DatabaseHelper 类的 deleteAll()、addIngredient() 和 addUnit() 方法：

```
public void deleteAll() 
{
    int deletedIngredientCount = myDataBase.delete(TABLE_INGREDIENTS, "1", null);
    Log.d("QBCPro", deletedIngredientCount + " ingredients deleted successfully");

    int deletedUnitCount = myDataBase.delete(TABLE_UNITS, "1", null);
    Log.d("QBCPro", deletedUnitCount + " units deleted successfully");
}

public void addIngredient(Ingredient ingredient) 
{
    ContentValues values = new ContentValues();
    values.put(ING_KEY_NAME, ingredient.getName());
    values.put(ING_KEY_DENSITY, ingredient.getDensity());

    // Insert Row
    int row = (int) myDataBase.insert(TABLE_INGREDIENTS, null, values);
    if (row == -1)
        Log.d("QBCPro", "An error occurred, row == " + row);
    else
        Log.d("QBCPro", "Successfully inserted " + values.get(ING_KEY_NAME) + " into row " + row);
}

public void addUnit(Unit unit)
{
    ContentValues values = new ContentValues();
    values.put(UNIT_KEY_NAME, unit.getName());
    values.put(UNIT_KEY_BASE_VALUE, unit.getBaseValue());
    values.put(UNIT_KEY_FINAL_VALUE, unit.getFinalValue());
    values.put(UNIT_KEY_IS_WEIGHT, unit.getIsWeight());

    // Insert Row
    myDataBase.insert(TABLE_UNITS, null, values);
} 
```

最后，这是日志。如您所见，它突然结束，只调用了 addIngredient() 六次。还有 showStatusIcon 警告，但我不知道它可能来自哪里，或者是什么原因造成的。

```
02-13 18:47:32.320: D/QBCPro:::(25264): SaveAllTask: Saving to database...
02-13 18:47:32.405: W/IInputConnectionWrapper(25264): showStatusIcon on inactive InputConnection
02-13 18:47:32.445: D/QBCPro(25264): DatabaseHelper deleteAll() called.
02-13 18:47:32.480: D/QBCPro(25264): 11 ingredients deleted successfully
02-13 18:47:32.510: D/QBCPro(25264): 12 units deleted successfully
02-13 18:47:32.510: D/QBCPro(25264): Leaving DatabaseHelper deleteAll() method.
02-13 18:47:32.540: D/QBCPro(25264): Successfully inserted almonds (ground) into row 1
02-13 18:47:32.575: D/QBCPro(25264): Successfully inserted baking powder into row 2
02-13 18:47:32.610: D/QBCPro(25264): Successfully inserted baking soda into row 3
02-13 18:47:32.640: D/QBCPro(25264): Successfully inserted butter into row 4
02-13 18:47:32.685: D/QBCPro(25264): Successfully inserted cocoa powder into row 5
02-13 18:47:32.720: D/QBCPro(25264): Successfully inserted flour (all-purp) into row 6 
```

我猜这会导致内存泄漏或其他原因，因为这是日志的结尾。它还会导致应用程序中断，因为当我将它带回前台时，我会收到一堆 IInputConnection 警告，并且我的所有视图都是不可见的。

任何见解将不胜感激！

**更新：**

它无缘无故地停止了，但它又开始了。我没有更改数据库中的任何代码（日志语句除外），但我在主 Activity 中进行了一些更改，但它不应该对数据库有任何影响。这是发生的事情：

用户退出应用程序，调用 AsyncTask SaveAllTask​​。代码和上面一样，但是我添加了一些日志语句，你可以看到：

```
02-14 13:41:29.561: D/QBCPro:::(12104): SaveAllTask doInBackground called...
02-14 13:41:29.561: D/QBCPro:::(12104): SaveAllTask: ingredients.size() = 11
02-14 13:41:29.576: D/QBCPro:::(12104): SaveAllTask: units.size() = 12
02-14 13:41:29.616: D/QBCPro:::(12104): SaveAllTask: Saving to database...
02-14 13:41:29.671: W/IInputConnectionWrapper(12104): showStatusIcon on inactive InputConnection
02-14 13:41:29.701: D/QBCPro(12104): DatabaseHelper deleteAll() called.
02-14 13:41:29.736: D/QBCPro(12104): 11 ingredients deleted successfully
02-14 13:41:29.761: D/QBCPro(12104): 12 units deleted successfully
02-14 13:41:29.761: D/QBCPro(12104): Leaving DatabaseHelper deleteAll() method.
02-14 13:41:29.781: D/QBCPro(12104): Successfully inserted almonds (ground) into row 1
02-14 13:41:29.811: D/QBCPro(12104): Successfully inserted baking powder into row 2
02-14 13:41:29.836: D/QBCPro(12104): Successfully inserted baking soda into row 3
02-14 13:41:29.861: D/QBCPro(12104): Successfully inserted butter into row 4
02-14 13:41:29.886: D/QBCPro(12104): Successfully inserted cocoa powder into row 5
02-14 13:41:29.921: D/QBCPro(12104): Successfully inserted flour (all-purp) into row 6
02-14 13:41:29.961: D/QBCPro(12104): Successfully inserted flour (cake) into row 7
02-14 13:41:29.991: D/QBCPro(12104): Successfully inserted milk (2%) into row 8
02-14 13:41:30.021: D/QBCPro(12104): Successfully inserted sugar (br, packed) into row 9 
```

然后它突然结束，就像上面一样，虽然奇怪的是在第 9 行而不是第 6 行。将应用程序带回前台调用 AsyncTask LoadAllTask​​，导致：

```
02-14 13:43:57.106: D/QBCPro:::(12532): LoadAllTask doInBackground called...
02-14 13:43:57.121: D/QBCPro:::(12532): LoadAllTask: ingredients.size() == 9
02-14 13:43:57.121: D/QBCPro:::(12532): LoadAllTask: units.size() == 0
02-14 13:43:57.121: D/QBCPro(12532): Database CLOSED! (good thing)
02-14 13:43:57.121: D/QBCPro:::(12532): LoadAllTask doInBackground completed... 
```

我的应用程序坏了。

我认为没有必要，但以防万一，这是我的 LoadAllTask​​ 代码：

```
@Override
    protected Void doInBackground(Void... params) 
    {
        Log.d(TAG, "LoadAllTask doInBackground called...");
        //open database
        try 
        {
            myDbHelper.openDatabase();
        }catch(SQLException sqle)
        {    
            throw sqle;  
        }

        //get all ingredients and units
        ingredients = myDbHelper.getAllIngredients();
        units = myDbHelper.getAllUnits();

        Log.d(TAG, "LoadAllTask: ingredients.size() == " + ingredients.size());
        Log.d(TAG, "LoadAllTask: units.size() == " + units.size());

        myDbHelper.close();
        Log.d(TAG, "LoadAllTask doInBackground completed...");
        return null;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T13:52:19.513

我通过在其中创建一个带有 AsyncTask 的 IntentService 并在 onPause 中调用它来解决此问题。它现在可以正常工作。这是 onPause 中的代码：

```
 Intent saveIntent = new Intent(this, SaveService.class);
    startService(saveIntent); 
```

这是我的 SaveService 类：

```
public class SaveService extends IntentService
{
    private ArrayList<Ingredient> ingredientsArray;
    private ArrayList<Unit> unitsArray;
    private DatabaseHelper dbHelper;

    public SaveService(String name) 
    {
        super(name);
    }

    public SaveService() 
    {
        super("SaveService");
    }

    @Override
    protected void onHandleIntent(Intent intent) 
    {
        //save data to database
        dbHelper = new DatabaseHelper(getApplicationContext());
        ingredientsArray = QuickBakeConverterPro.ingredients;
        unitsArray = QuickBakeConverterPro.units;

        new SaveAllTask().execute();
    }

    private class SaveAllTask extends AsyncTask<Void, Void, Void>
    {
        @Override
        protected Void doInBackground(Void... args) 
        {
            //open database
            try 
            {
                dbHelper.openDatabase();
            }catch(SQLException sqle)
            {    
                throw sqle;  
            }

            dbHelper.deleteAll();

            //add all ingredients & units
            for (int i = 0; i < ingredientsArray.size(); i++)
                dbHelper.addIngredient(ingredientsArray.get(i));
            for (int i = 0; i < unitsArray.size(); i++)
                dbHelper.addUnit(unitsArray.get(i));

            dbHelper.close();

            return null;
        }
    }//SaveAllTask
}//class SaveService 
```

# javascript - 在 HTML 表格中强制执行唯一的元组

> ID：14859064
> 
> 赞同：2
> 
> 时间：2013-02-13T17:12:08.420
> 
> 标签：javascript, jquery, html

jQuery 或 JS 中是否有任何内置函数可以强制 HTML 表中元组的唯一性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T05:45:10.993

试试这个：[http ://www.datatables.net/examples/](http://www.datatables.net/examples/)

里面有很多内置功能，如果你发现任何困难，请告诉我。

# windows-phone-8 - 在 windows phone os 中从一种语言到另一种语言的基于语音的翻译

> ID：14859072
> 
> 赞同：0
> 
> 时间：2013-02-13T17:12:41.430
> 
> 标签：windows-phone-8

我的项目是只做一个基于语音的翻译。用户需要用他们的母语以语音的形式给出输入。然后系统需要生成用户首选语言的翻译。问题是我不知道如何设置不同语言的语音识别。请帮我。在此先感谢我在 Windows Phone 8 中执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T18:13:04.080

有适用于 Windows Phone 的 API，但您需要使用两个来完成您想要做的事情。首先，您需要使用语音识别将语音转换为文本。然后，通过 Microsoft Translator 运行它以翻译成另一种语言。请注意，对于语音识别，您应该查询所讲语言的适当语音识别器。

请参阅以下链接：

[语音识别](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj207021%28v=vs.105%29.aspx)

[微软翻译](http://www.microsoft.com/en-us/translator/developers.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T03:57:22.480

这里有一个如何为 Translator 构建 Windows Phone 8 应用程序的示例：

[http://blogs.msdn.com/b/translation/p/windowsphone8.aspx](http://blogs.msdn.com/b/translation/p/windowsphone8.aspx)

您可以将其与语音捕获而不是文本输入一起使用。

# javascript - 覆盖角度 $resource 函数

> ID：14859077
> 
> 赞同：2
> 
> 时间：2013-02-13T17:12:59.773
> 
> 标签：javascript, angularjs

我正在尝试用自定义 $http-GET 覆盖 AngularJS $resource 的 query() 方法。但是，它似乎并没有覆盖操作的结果。它返回一个带有`method`,`data`和`headers`, not的对象`data.rows[]`。

```
angular.module('couchdb', ['ngResource']).
  factory('Project', function($resource, $http) {
    var Project = $resource('http://couchdb/mydb', {}, {
        'update': { method: 'PUT' },
        'query':  {method:'GET', isArray: false}
      }
    );

    Project.query = function() {
      return $http({method: 'GET', url: 'http://couchdb/mydb/_design/projects/_view/index'}).
        success(function(data, status, headers, config) {
          return data.rows;
        }).
        error(function(data, status, headers, config) {
          $scope.data = data || "Request failed";
          $scope.status = status;
        });
    };

    return Project;
  }); 
```

如何仅获取资源结果的行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T16:20:46.227

`ngResource`s 不需要依赖`$http`服务。您不需要重新定义该`Project.query`功能 - 因为您已经将其指示为 的操作`Project` `$resource`（除了默认情况下包含它之外）。

这意味着该`Project.query`函数已准备就绪，无需重新定义。你可以从字面上做得到`Project.query()`结果。它支持成功/失败的回调，因此`Project.query({}, successCallback, failureCallback)`不会提交任何参数，并允许您访问返回的数据。

我建议你仔细阅读[AngularJS $resource 文档](http://docs.angularjs.org/api/ngResource.%24resource)，因为它们提供了很多很好的例子。[Angular 教程](http://docs.angularjs.org/tutorial/step_11)的第 11 步中还包含一个基本示例。

# r - 在 R 中使用支持函数保持 DRY 的最佳方法

> ID：14859078
> 
> 赞同：1
> 
> 时间：2013-02-13T17:13:13.800
> 
> 标签：r, dry

在处理我的第一个 R 包时，a 注意到当在 man 目录“man”中创建包结构时，代码中的每个函数/方法都有一个文档文件。

为了保持干燥（不要重复自己），我在循环或迭代中使用了一些函数作为“辅助”函数。我怎么能告诉 R 我不想为他们提供任何文档，因为最终用户不应该直接调用它们？！？！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T19:07:15.670

Use the `roxygen2` and `devtools` packages to document your functions and build your package.

```
#' Function 1 Title
#'
#' Describe what function 1
#' does in a paragraph. This function
#' will be exported for external use because
#' it includes the @export tag.
#'
#' @param parameter1 describe the first parameter
#' @param parameter2 describe the second parameter
#' @examples
#' function1(letters[1:10], 1:10)
#' @export
function1 <- function(parameter1, parameter2) {
  paste(parameter1, parameter2)
}

#' Function 2 Title
#'
#' Description here. This will not 
#' be added to the NAMESPACE.
#'
#' @param parameter1
function2 <- function(parameter1) {
  parameter1
} 
```

Once you have all your documentation, use the tools in the `devtools` package to build, document, and check your package. It will automatically update the man files and DESCRIPTION, and add / remove functions from the NAMESPACE.

```
document()
build()
check() 
```

I also recommend using the `rbundler` package to control how you load packages.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T17:18:50.507

如果您不通过 NAMESPACE 导出它们，则不需要提供文档。

另一个（旧的）太简单了，比如创建一个，`internal.Rd`然后定义一堆`\alias{foo}, \alias{bar}, \alias{frob}`，这样 codetools 也很高兴。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T18:08:16.080

谢谢@Jojoshua-ulrich 和@dirk-eddelbuettel

根据“编写 R 扩展”：

> man 子目录应该（仅）包含 R 文档 (Rd) 格式的包中对象的文档文件。文档文件名必须以 ASCII（小写或大写）字母或数字开头，并具有扩展名 .Rd（默认）或 .rd。此外，名称必须在 'file://' URL 中有效，这意味着 9 它们必须完全是 ASCII 并且不包含 '%'。有关更多信息，请参阅编写 R 文档文件。请注意，包中的所有用户级对象都应记录在案；如果包 pkg 包含仅供“内部”使用的用户级对象，它应该提供一个文件 pkg-internal.Rd 记录所有此类对象，并明确说明这些对象不应该由用户调用。例如，请参阅 R 发行版中的 package grid 的源代码。

顺便说一句，是否有任何约定可以在代码中包含注释，以便人们直接从代码中获取函数描述、参数描述等？

# java - 如何注入 java.io.File 然后设置它的名字

> ID：14859080
> 
> 赞同：0
> 
> 时间：2013-02-13T17:13:26.563
> 
> 标签：java, file, unit-testing, dependency-injection, mockito

我有一个有趣的场景，我需要在`File`我的 POJO 中注入一个引用（这样，在我的测试类中，我可以存根`File`而不实际将任何内容写入磁盘），但文件的*名称*实际上是不知道的，直到运行：

```
public class MyPOJO {
    private File file;

    private FileWriter writer;

    // Getter and setter for file & writer

    public void writeToDisk(String message) {
        String fileName = complexLogicToBuildFileName();

        // How do I do the equivalent of: file.setName(fileName);

        try {
            writer.write(message);

            writer.close();
        } catch(IOException ioe) {
            ...
        }
    }
}

public class MyPOJOTest {
    @Test
    public void verifyWriteToDiskAttemptsToWrite() {
        MyPOJO pojo = new MyPOJO();
        File mockFile = Mockito.mock(File.class);
        FileWriter mockWriter = Mockito.mock(FileWriter.class);

        Mockito.doNothing().when(mockWriter).write(Mockito.anyString());

        pojo.setWriter(mockWriter);
        pojo.setFile(mockFile);

        pojo.writeToDisk("This won't write to disk.");

        Mockito.verify(mockWriter).write("This won't write to disk.");
    }
} 
```

问题是，由于强制构造函数，在我有机会执行*之前*`File(String)`，我必须将注入`File`的实例绑定到文件名，而这不能用简单的 setter 方法覆盖。关于如何保存和注入属性的任何想法（为了可测试性），但仍然让我用来命名文件？提前致谢。*`complexLogicToBuildFileName()``file``fileWriter``complexLogicToBuildFileName()`*

 ** * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T17:20:44.350

我不明白您为什么要注入 a`File` *和*a `FileWriter`，并且您的 POJO 也派生了一个文件名（通过`complexLogicToBuildFileName()`）。

如果你想抽象出写作，为什么不简单地用一个`Writer`（接口）注入你的 POJO，你可以选择一个模拟版本（甚至是一个`StringWriter`）而不是提供一个`FileWriter`. 然后，您可以将其提取`complexLogicToBuildFileName()`到一个新对象（例如`FileNameBuilder`）中并单独对其进行测试。*

# python - 使用 Pandas 从文件中读取分层 ascii 表

> ID：14859085
> 
> 赞同：3
> 
> 时间：2013-02-13T17:13:47.353
> 
> 标签：python, pandas, hierarchical

我在这里的第一篇文章，我希望它不会太长或太详细。

当我尝试阅读和解释以下 ascii 表（从一个更大的表中简单提取）时，我遇到了一个问题。

假设文件名为“test.txt”：

```
 A         B          C             D             E    
0       992    CEN/4 -2.657293E+00 -3.309567E+01  4.697218E-01
                1291 -3.368449E+00  7.837483E+00  2.311393E+00
                 800 -3.530800E+00 -7.392188E+01 -1.401380E+00
                 801 -1.952177E+00 -7.392114E+01 -1.367195E+00
                1290 -1.777301E+00  7.838229E+00  2.345850E+00
0       994    CEN/4  7.270955E+00 -6.637891E+01 -1.293553E+01
                1110  5.816999E+00 -3.981042E+01 -1.504738E+01
                 785  5.535329E+00 -9.246339E+01 -1.061554E+01
                 786  8.625161E+00 -9.163719E+01 -1.092563E+01
                1109  9.080517E+00 -4.059749E+01 -1.523589E+01 
```

使用 python 2.7 和 pandas (0.9.1)，我可以阅读如下：

```
>>> r=pd.read_fwf('test.txt', widths=(3, 8, 9, 14, 14, 14),skiprows=1, header=None)
>>> print r

   X0   X1     X2        X3         X4         X5
0   0  992  CEN/4 -2.657293 -33.095670   0.469722
1 NaN  NaN   1291 -3.368449   7.837483   2.311393
2 NaN  NaN    800 -3.530800 -73.921880  -1.401380
3 NaN  NaN    801 -1.952177 -73.921140  -1.367195
4 NaN  NaN   1290 -1.777301   7.838229   2.345850
5   0  994  CEN/4  7.270955 -66.378910 -12.935530
6 NaN  NaN   1110  5.816999 -39.810420 -15.047380
7 NaN  NaN    785  5.535329 -92.463390 -10.615540
8 NaN  NaN    786  8.625161 -91.637190 -10.925630
9 NaN  NaN   1109  9.080517 -40.597490 -15.235890 
```

尝试将其直接读取为“分层表”：

```
>>> r=pd.read_fwf('test.txt', widths=(3, 8, 9, 14, 14, 14), skiprows=1, index_col=[0,1,2], header=None)
>>> print r

                    X3         X4         X5
X0 X1  X2                                   
0  992 CEN/4 -2.657293 -33.095670   0.469722
   994 1291  -3.368449   7.837483   2.311393
       800   -3.530800 -73.921880  -1.401380
       801   -1.952177 -73.921140  -1.367195
       1290  -1.777301   7.838229   2.345850
       CEN/4  7.270955 -66.378910 -12.935530
       1110   5.816999 -39.810420 -15.047380
       785    5.535329 -92.463390 -10.615540
       786    8.625161 -91.637190 -10.925630
       1109   9.080517 -40.597490 -15.235890 
```

我的目标是获得：

```
>>> print r
                    X3         X4         X5
X0 X1  X2                                   
0  992 CEN/4 -2.657293 -33.095670   0.469722
       1291  -3.368449   7.837483   2.311393
       800   -3.530800 -73.921880  -1.401380
       801   -1.952177 -73.921140  -1.367195
       1290  -1.777301   7.838229   2.345850
   994 CEN/4  7.270955 -66.378910 -12.935530
       1110   5.816999 -39.810420 -15.047380
       785    5.535329 -92.463390 -10.615540
       786    8.625161 -91.637190 -10.925630
       1109   9.080517 -40.597490 -15.235890 
```

有没有使用熊猫的简单方法，还是我必须在解析之前“按摩” ascii 表以获得我想要的东西？提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T18:10:54.893

看起来您需要在索引之前填充 NA 值。尝试这个：

```
r=pd.read_fwf('test.txt', widths=(3, 8, 9, 14, 14, 14),skiprows=1, header=None)
r=r.fillna(method='pad')
r=r.set_index(['X0','X1','X2']) 
```

# windows-phone-7 - 部分声明不得指定不同的基类 windows phone

> ID：14859086
> 
> 赞同：0
> 
> 时间：2013-02-13T17:13:49.077
> 
> 标签：windows-phone-7, user-controls, mvvm-light

我收到了这个错误：

```
public partial class MainPage : UserControl
{

    public MainPage()
    {

        InitializeComponent();

    }

} 
```

我的 xaml 是这样的：

```
<UserControl x:Class="GameMemory.MainPage"..../> 
```

除了它返回错误：以下方法或属性之间的调用不明确：'GameMemory.MainPage.InitializeComponent（）'和'GameMemory.MainPage.InitializeComponent（）'有什么想法吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-13T17:18:17.060

您引用的其中一个程序集似乎有一个名为 UserControl 的类。检查您的 using 声明。

# wso2 - 为公司代理配置 WSO2 ESB，以便它可以访问外部 URI

> ID：14859092
> 
> 赞同：2
> 
> 时间：2013-02-13T17:14:14.137
> 
> 标签：wso2, wso2esb, wso2carbon

如何配置`WSO2ESB`以便我可以代理我当前托管在 Windows Azure 上的服务？

在我的本地开发机器上，我有一个 WSO2ESB 实例，我也可以在我的本地开发机器上使用它来代理 WCF 服务，但现在我需要进一步进行这个概念验证工作，并展示如何使用 WSO2ESB 代理 WCF外部托管的服务，在本例中是在 Windows Azure 上。

我试图为我的 Azure 服务添加一个新的代理服务，选择`Specify source URL`发布 WSDL，然后输入`.svc`我的 Azure 服务的地址，但是当我测试 URI（大约需要一分钟）它返回

> WSDL URI 无效（无法建立连接）

我相信这是由于我们的公司代理和我的机器需要提供基本信息才能打出一个洞，但我看不出如何/在哪里做这件事。

我正在使用**WSO2ESB 4.5.1**，我的代理服务源是：

```
<proxy xmlns="http://ws.apache.org/ns/synapse" name="Azure" 
       transports="https,http" 
       statistics="disable" trace="disable" startOnLoad="true">
  <target>
    <outSequence>
      <send/>
    </outSequence>
    <endpoint>
      <address uri="http://myazureservice.cloudapp.net/Service.svc"/>
    </endpoint>
 </target>
 <description></description>
</proxy> 
```

**更新**
我还尝试通过将服务生成的 WSDL 复制到剪贴板并将其粘贴到 WSO2 中来导入该服务，但这被拒绝了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T10:00:10.450

您可以将 wsdl 下载到带有 *.wsdl 扩展名的本地文件系统，并提供其指向“publishWSDL”选项的链接

# umbraco - 需要：具有自动缩略图生成功能的照片库

> ID：14859094
> 
> 赞同：0
> 
> 时间：2013-02-13T17:14:21.073
> 
> 标签：umbraco

我正在寻找一个 Umbraco 照片库，它支持自动缩略图生成（可能还有其他功能），并且最好有源代码，并且可以与 uBlogsy 集成。

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T21:06:18.330

以下是包存储库中的三个选项：

[http://our.umbraco.org/projects/website-utilities/simple-image-gallery-macro](http://our.umbraco.org/projects/website-utilities/simple-image-gallery-macro)

[http://our.umbraco.org/projects/website-utilities/jqgallery](http://our.umbraco.org/projects/website-utilities/jqgallery)

[http://our.umbraco.org/projects/starter-kits/easymodules-gallery](http://our.umbraco.org/projects/starter-kits/easymodules-gallery)

# java - 发出 HTTP 请求时在 java 中实现超时的最佳方法

> ID：14859098
> 
> 赞同：1
> 
> 时间：2013-02-13T17:14:24.640
> 
> 标签：java, multithreading, networking

使用 java.net.Socket 上的 setSoTimeout 还是使用 ExecutorService 包装使用另一个类进行 Http 调用的服务并使用 Futures 管理方法超时更好？

更好目前被定义为良好实践/更可靠/准确。除非影响很大，否则不一定要考虑对性能的影响。

编辑：还应该提到 java.net.Socket 上的 connect(SocketAddress endpoint, int timeout) 方法更清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T17:34:18.870

两者都不？使用`HttpURLConnection.setReadTimeout()`和`setConnectTimeout()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T19:37:08.017

BenG——我认为这是一个“取决于你想要什么”的场景——如果你对并发库进行规范化，那很好，但你需要自己管理关闭套接字。

如果您想使用超时，它会为您完成。

如果您在代码中的任何地方都使用并发库并且它们感觉非常自然，当然，您可以自己手动管理套接字。

从技术上讲（如果您查看 Socket 内部的代码），两者并没有什么大的优势。只要确保当您在 Future 中处理套接字状态时，您正在捕捉潜在的 IOExceptions，因此处理您的 Future 不会潜在地炸毁您的执行线程。

# java - 获取正确的 Joda LocalDateTime 值，然后对其进行格式化

> ID：14859099
> 
> 赞同：2
> 
> 时间：2013-02-13T17:14:37.063
> 
> 标签：java, string-formatting, jodatime

我正在尝试在每个星期日的午夜运行一份报告，其中将包括从上一个星期六午夜到报告开始前的 11:59:59 的数据。因此，如果要在即将到来的星期日（2/17）开始，它将：

*   在 2013 年 2 月 17 日午夜执行（或星期一早上，但你想怎么想）
*   包括从 2/10/2013 12:00:00 AM（上周六午夜）开始的数据
*   包括截至 2013 年 2 月 16 日晚上 11:59:59 的数据（本周六晚上，报告触发前 1 秒）

我正在尝试获取`startDateTime`并`endDateTime`封装时间范围，并希望使用 JODA`LocalDateTime`来保存每个值。然后我需要将它们格式化为 YYYYMMDD_HHmmss 格式的字符串。

这是我最好的尝试：

```
LocalDateTime rightNow = new LocalDateTime();
LocalDateTime startDateTime = rightNow.minusDays(7);
LocalDateTime endDateTime = rightNow.minusDays(1);

String startDateTimeFormatted = startDateTime.toString();
String endDateTimeFormatted = endDateTime.toString();

System.out.println(startDateTimeFormatted);
System.out.println(endDateTimeFormatted); 
```

当我运行它时，我得到：

```
2013-02-06T12:10:27.411
2013-02-12T12:10:27.411 
```

**注意**：由于我今天（2013 年 2 月 13 日）运行此代码，因此开始/结束日期不同，它们将在 2/17 星期日（或任何其他星期日），但它的时间表示和字符串格式我'我真的对这里很感兴趣。

所以我问：

1.  如何`startDateTime`表示（对于这个例子 - 但我需要动态的答案！） 2/10/2013 12:00:00 AM
2.  如何`endDateTime`表示（对于这个例子 - 但我需要答案是动态的！） 2/16/2013 11:59:59 PM
3.  如何格式化`startDateTime`并`endDateTime`分别显示为 20130210_120000 和 20130216_115959？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-13T17:56:54.467

好的，如前所述，我强烈建议使用 UTC 作为时区，并作为唯一的终点。因此，您可以使用：

```
private static final DateTimeFormatter FORMATTER =
    DateTimeFormat.forPattern("yyyyMMdd'_'HHmmss")
                  .withLocale(Locale.US);
...

// I prefer to be explicit about using "the current time". I prefer to use
// an injectable dependency such as a Clock type, too...
DateTime now = new DateTime(System.currentTimeMillis(), DateTimeZone.UTC);

// Note: this *doesn't* ensure that it's the right day of the week.
// You'd need to think about that separately - it may be as simple as
// scheduling it appropriately... but bear your local time zone in mind!
DateTime end = now.withTimeAtStartOfDay();
DateTime start = end.minusDays(7);

String startText = FORMAT.print(start);
String endText = FORMAT.print(end); 
```

进一步注意，这将使用 24 小时制，因此它会给出`20130210_000000`而`20130217_000000`不是`120000`用作时间。这是更加一致和明确的。鉴于它总是午夜，您可能只想完全使用`yyyyMMdd`和删除时间部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T17:30:09.077

System.out.println(DateTime.now().toString("yyyy-MM-dd"));

toString 方法接受格式化模板，请参阅：http: [//joda-time.sourceforge.net/apidocs/org/joda/time/format/DateTimeFormat.html](http://joda-time.sourceforge.net/apidocs/org/joda/time/format/DateTimeFormat.html)

# django - 如何使用 django-import-export 为字段定义管理员导入格式

> ID：14859100
> 
> 赞同：2
> 
> 时间：2013-02-13T17:14:38.260
> 
> 标签：django, import, csv-import

我正在尝试使用最近开源的[django-import-export](https://github.com/bmihelac/django-import-export)通过管理员导入一些数据，我需要选择自定义日期格式。

它有效，但是有问题/更好的方法吗？

**管理员.py：**

```
from import_export.admin import ImportExportMixin, ImportExportModelAdmin
from import_export import resources

from .models import Enrolment

class EnrolmentResource(resources.ModelResource):

    class Meta:
        model = Enrolment
        fields = ('id','source','firstname','surname','date_of_birth',
                  'bonus','status','tracking_comments')

        widgets = {
                'date_of_birth': {'format': '%d/%m/%Y'},
                }

class EnrolmentAdmin(ImportExportMixin, admin.ModelAdmin):

    def get_resource_class(self):
        if not self.resource_class:
            return EnrolmentResource
        else:
            return self.resource_class

admin.site.register(Enrolment, EnrolmentAdmin) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-10-11T13:32:31.570

按照[此](https://django-import-export.readthedocs.org/en/latest/getting_started.html#admin-integration)代码示例，您应该执行以下操作：

```
# ...
class EnrolmentResource(resources.ModelResource):
# ...
class EnrolmentAdmin(ImportExportMixin, admin.ModelAdmin):
    resource_class = EnrolmentResource
# ...
admin.site.register(Enrolment, EnrolmentAdmin) 
```

# opencv - OpenCV 图像加载问题

> ID：14859104
> 
> 赞同：0
> 
> 时间：2013-02-13T17:14:40.527
> 
> 标签：opencv

我已经使用 imagesnake 开发了一个 opencv 程序，但它适用于一些图像，但对于其他图像则不起作用。我收到以下错误：

> OpenCV 错误：cvSnakeImage 中的通道数错误（输入图像具有多个通道），文件 /opt/local/var/macports/build/_opt_local_var_macports_sources_rsync.macports.org_release_ports_graphics_opencv/opencv/work/OpenCV-2.3.1/modules/legacy /src/snakes.cpp，第 416 行终止在抛出 'cv::Exception' what() 的实例后调用：
> 
> /opt/local/var/macports/build/_opt_local_var_macports_sources_rsync.macports.org_release_ports_graphics_opencv/opencv/work/OpenCV-2.3.1/modules/legacy/src/snakes.cpp:416：错误：（-15）输入图像超过函数 cvSnakeImage 中的一个通道

中止陷阱

有没有人看到这个问题或知道如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T17:18:21.710

看起来您正在尝试加载彩色图像，而 cvSnakeImage 只接受单通道图像，即：黑白图像。

黑白图像是唯一有效的吗？

# jquery - jQuery 日历 - 突出显示日期

> ID：14859105
> 
> 赞同：2
> 
> 时间：2013-02-13T17:14:48.930
> 
> 标签：jquery, calendar

我有一个日历，其中突出显示了一些日期

在我想突出显示 2013 年 3 月 31 日之后的日期之前，它工作得非常好。在那之后，日期就正常显示了。

有人知道为什么会这样吗？

这是我用来突出显示日期的代码

```
<script type="text/javascript">
//<![CDATA[ 

$(document).ready(function() {
var SelectedDates = {};
SelectedDates[new Date('2013-02-14')] = new Date('2013-02-14');
SelectedDates[new Date('2013-02-15')] = new Date('2013-02-15');
SelectedDates[new Date('2013-02-16')] = new Date('2013-02-16');
SelectedDates[new Date('2013-02-22')] = new Date('2013-02-22');
SelectedDates[new Date('2013-02-23')] = new Date('2013-02-23');
SelectedDates[new Date('2013-03-01')] = new Date('2013-03-01');
SelectedDates[new Date('2013-04-01')] = new Date('2013-04-01');
SelectedDates[new Date('2013-04-11')] = new Date('2013-04-11');

$('#datepicker').datepicker({

altField: "#alternate", altFormat: "yy-mm-dd", maxDate: "+12M", dateFormat: "yy-mm-dd",

    beforeShowDay: function(date) {
        var Highlight = SelectedDates[date];
        if (Highlight) {
            return [true, "Highlighted", Highlight];
        }
        else {
            return [true, '', ''];
        }

    }
});
});
//]]>  

</script>

<style>

div.ui-datepicker{
font-size:250%;
}

.Highlighted a{
background-color : #800000 !important;
background-image :none !important;
color: White !important;
font-weight:bold !important;
font-size: 22pt;
}

</style> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T17:03:08.537

我想我发现了你的问题..

不同之处在于传入的“日期”变量。时区在“GMT 标准时间”和“GMT 夏令时间”之间切换。在“日期”上发出警报，您会看到。

# java - Java从另一个数组的通用运行时类型创建数组

> ID：14859106
> 
> 赞同：2
> 
> 时间：2013-02-13T17:14:53.907
> 
> 标签：java, arrays, generics

我有以下代码合并两个数组，并且应该处理除原语之外的任何类型。

```
@SuppressWarnings("unchecked")
public static synchronized <E> E[]  aryMergeNoDup(E[]... arys){
    HashSet<E> hs = new HashSet<E>();
        for(E[] ary : arys) {
            if(ary == null) continue;
            for(E item : ary) {
                if(item != null) hs.add(item);
            }
        }
        hs.remove(null);
        return hs.toArray((E[]) Array.newInstance(
                arys.getClass().getComponentType(),hs.size()));
} 
```

但是，当代码运行时，它会生成此异常：

```
java.lang.ArrayStoreException: java.lang.String
  at java.util.AbstractCollection.toArray(AbstractCollection.java:188)
  at util.Utils.aryMergeNoDup(Utils.java:197) 
```

变量的运行时类型`arys`是String[]；但是，当我`arys.getClass().getComponentType()`用`String.class`代码替换时运行良好。

但是，该方法只能用于字符串，因为 pf this. 我看不出出了什么问题，因为他们都应该提到`java.lang.String`.

AbstractCollection.java:188 中抛出异常的行是：

```
r[i] = (T)it.next();

public <T> T[] toArray(T[] a) {
    // Estimate size of array; be prepared to see more or fewer elements
    int size = size();
    T[] r = a.length >= size ? a :
              (T[])java.lang.reflect.Array
              .newInstance(a.getClass().getComponentType(), size);
    Iterator<E> it = iterator();

    for (int i = 0; i < r.length; i++) {
        if (! it.hasNext()) { // fewer elements than expected
            if (a != r)
                return Arrays.copyOf(r, i);
            r[i] = null; // null-terminate
            return r;
        }
        r[i] = (T)it.next();
    }
    return it.hasNext() ? finishToArray(r, it) : r;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T17:21:03.553

由于它是可变参数，因此运行时类型`arys`将是`E[][]`，而不是`E[]`。因此，您可能需要`arys.getClass().getComponentType().getComponentType()`作为`Array.newInstance`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T17:20:41.100

我相信问题在于`arys`它类似于数组数组。所以可能`arys.getClass().getComponentType()`是`String[]`，而不是`String`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T18:40:51.133

你有两个不同的东西在这里相互作用。首先，您使用的是可变参数，它在幕后将它们的参数包装在一个动态生成的数组中。所以 arys 的类型将是 E[][]，所以获取组件类型将是 E[]。其次，泛型意味着 E 在运行时被擦除为 Object，因此即使两次`getComponentType`调用也不会删除它 - 除非您可以始终返回 Object[]。

您可以做的是使用 arys[0] 的组件类型（如果存在）。这甚至不适用于所有情况，因为例如第二个数组的类型可能是超类或第一个的兄弟，赋值与第一个类型的数组不兼容。

为了解决这个问题，您可以通过检查所有数组的类型来计算最小上限类型，但如果您的典型用法是相同类型的数组，我认为这与“第一种类型获胜”相比有点过头了。

# git - 詹金斯：git“检查修订版”后失败

> ID：14859109
> 
> 赞同：2
> 
> 时间：2013-02-13T17:15:04.247
> 
> 标签：git, testing, jenkins, jenkins-plugins

我有一个类似的问题：[詹金斯停止了检查修订的工作](https://stackoverflow.com/questions/14566026/jenkins-stopped-work-on-checking-out-revision)（我认为......）我的问题不是它挂断而是它只是崩溃了。我似乎无法弄清楚出了什么问题。我不知道，控制台输出并没有真正帮助我。任何帮助，将不胜感激！

```
Started by user my_repo
Building in workspace /var/lib/jenkins/jobs/Test my_repo master/workspace
Checkout:workspace / /var/lib/jenkins/jobs/Test my_repo master/workspace - hudson.remoting.LocalChannel@3301b455
Using strategy: Default
Last Built Revision: Revision 1f3c154da300f5e8b96b7c1ba6d683913e96ea31 (origin/master)
Fetching changes from 1 remote Git repository
Fetching upstream changes from git@github.com:my_repo/my_repo.git
Commencing build of Revision 1f3c154da300f5e8b96b7c1ba6d683913e96ea31 (origin/master)
Checking out Revision 1f3c154da300f5e8b96b7c1ba6d683913e96ea31 (origin/master)
[workspace] $ /bin/bash -xe /tmp/hudson5411167788999806789.sh
+ source /var/lib/jenkins/.bashrc
++ PATH=/var/lib/jenkins/.rvm/gems/ruby-1.9.3-p385/bin:/var/lib/jenkins/.rvm/gems/ruby-1.9.3-p385@global/bin:/var/lib/jenkins/.rvm/rubies/ruby-1.9.3-p385/bin:/var/lib/jenkins/.rvm/bin:/usr/local/bin:/usr/bin:/bin:/usr/local/games:/usr/games:/var/lib/jenkins/.rvm/bin
++ '[' -s /var/lib/jenkins/.rvm/scripts/rvm ']'
++ source /var/lib/jenkins/.rvm/scripts/rvm
+++ __rvm_has_opt posix
+++ [[ -n '' ]]
+++ [[ -n 4.2.24(1)-release ]]
+++ [[ :braceexpand:errexit:hashall:interactive-comments:xtrace: =~ :posix: ]]
+++ return 1
+++ export HOME rvm_prefix rvm_user_install_flag rvm_path
+++ HOME=/var/lib/jenkins
+++ [[ -n '' ]]
++++ umask
+++ export rvm_stored_umask=0022
+++ rvm_stored_umask=0022
+++ ((  0 == 0  ))
+++ rvm_rvmrc_files=("/etc/rvmrc" "$HOME/.rvmrc")
+++ [[ -n /var/lib/jenkins ]]
+++ [[ /var/lib/jenkins/.rvmrc -ef /var/lib/jenkins/.rvmrc ]]
+++ for rvmrc in '"${rvm_rvmrc_files[@]}"'
+++ [[ -f /etc/rvmrc ]]
+++ for rvmrc in '"${rvm_rvmrc_files[@]}"'
+++ [[ -f /var/lib/jenkins/.rvmrc ]]
+++ GREP_OPTIONS=
+++ grep '^\s*rvm .*$' /var/lib/jenkins/.rvmrc
+++ source /var/lib/jenkins/.rvmrc
++++ export rvm_trust_rvmrcs_flag=1
++++ rvm_trust_rvmrcs_flag=1
+++ unset rvm_rvmrc_files
+++ [[ -z /var/lib/jenkins/.rvm ]]
+++ rvm_path=/var/lib/jenkins/.rvm
+++ [[ -z /var/lib/jenkins ]]
+++ [[ -z '' ]]
+++ [[ /var/lib/jenkins == \/\v\a\r\/\l\i\b\/\j\e\n\k\i\n\s ]]
+++ rvm_user_install_flag=1
+++ export rvm_loaded_flag
+++ [[ -n 4.2.24(1)-release ]]
+++ typeset -f rvm
+++ rvm_loaded_flag=0
+++ ((  0 == 0  ))
+++ [[ -n /var/lib/jenkins/.rvm ]]
+++ [[ -d /var/lib/jenkins/.rvm ]]
+++ true /var/lib/jenkins/.rvm/scripts
+++ [[ -f /var/lib/jenkins/.rvm/scripts/base ]]
+++ source /var/lib/jenkins/.rvm/scripts/base
++++ __rvm_has_opt errexit
++++ [[ -n '' ]]
++++ [[ -n 4.2.24(1)-release ]]
++++ [[ :braceexpand:errexit:hashall:interactive-comments:xtrace: =~ :errexit: ]]
++++ rvm_stored_errexit=1
++++ set +e
++++ : rvm_trace_flag:0
++++ ((  rvm_trace_flag > 0  ))
++++ export __array_start rvm_path
(............  a lot more of the same output.........)
++ hooks+=("$PWD/.rvm/hooks")
++ _hooks_list=($(
    find -L "${hooks[@]}" -iname "$rvm_hook*" -type f 2>/dev/null
  ))
+++ find -L /var/lib/jenkins/.rvm/hooks '/var/lib/jenkins/jobs/Test my_repo master/workspace/.rvm/hooks' -iname 'after_cd*' -type f
Build step 'Execute shell' marked build as failure
Finished: FAILURE 
```

**更新**

我的构建 shell 命令如下所示：

```
source ~/.bashrc
cd .
rm -rf jenkins && mkdir jenkins
export RAILS_ENV=test
bundle install
rake db:drop db:create db:structure:load
SPEC_OPTS="--format html" rspec spec > jenkins/rspec.html
SPEC_OPTS="--format html" rspec spec_without_rails > jenkins/rspec.html 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T17:21:01.450

这个问题与git无关。签出成功完成，第一个“Execute Shell”步骤开始执行，随后失败（如日志倒数第二行所示）。

RVM 命令（或其他命令）以某种方式失败。我猜是因为`find`执行找不到任何文件。

当脚本以非零返回码退出时，它会导致 Jenkins 构建失败。

# xcode - backBarButtonItem BackButtonBackgroundVerticalPositionAdjustment

> ID：14859111
> 
> 赞同：3
> 
> 时间：2013-02-13T17:15:07.567
> 
> 标签：xcode, ios5, ios6, uibarbuttonitem, uiappearance

我正在尝试设置后 UIBarButtonItem 的垂直位置，但它没有任何影响。我不想将其作为 UIAppearance 选择器，因为我只想在一个类中使用它。我究竟做错了什么？

我已经在父视图控制器和子视图控制器中尝试过这个。

```
[self.navigationItem.backBarButtonItem setBackButtonBackgroundVerticalPositionAdjustment:-10 forBarMetrics:UIBarMetricsDefault]; 
```

谢谢！

# ms-access - 多选可能的下拉框以及写入其他信息的选项

> ID：14859112
> 
> 赞同：0
> 
> 时间：2013-02-13T17:15:10.133
> 
> 标签：ms-access, ms-access-2007, vba

我有一个要求，用户可以一次选择一些选项。他可以选择一个或多个选项。还有一个称为“其他”的额外字段，通过选择用户可以编写自己的信息而不是选择提供给他的选项。我想在 Access 中的表单上设计此要求。我真的很困惑数据类型应该是什么以及应该如何设计保管箱。请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T19:07:14.140

I'm already wary of the design as far as concatenating these values (your data should be as atomic as possible), but you could create your list box object, and in a button beside it or in after update, you could do

```
dim values as string
dim item as variant
for each item in me!myListBox.ItemsSelected
values = values & me!myListBox.column(0, item) & ","
 next item 
```

I posted this as an answer instead of a comment above so that the code snippet would be more readable.

Edit: I'm just seeing a red flag as far as design goes, it seems like what you want to accomplish would be better implemented using two tables with a one->many relationship. Instead of modeling the data with a multi-select listbox, your continuous subform would house this data.

# javascript - 为什么我的变量不取函数中的值？

> ID：14859113
> 
> 赞同：0
> 
> 时间：2013-02-13T17:15:14.887
> 
> 标签：javascript, jquery, html, function, geolocation

我想在屏幕上显示 var longitude en latitude 但我认为该函数是最后执行的，我坚持使用初始值。目标是在屏幕上打印浏览器返回的地理位置的确切值。谢谢 ！！！

```
<!DOCTYPE html>

<head>

<script>
var longitude = "10";
var latitude = "20";
</script>

</head>
<html>
<body  onload="getLocation()">

<script>
var longitude = "30";
function getLocation() {

    if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(function(position){
                latitude = position.coords.latitude;
                longitude = position.coords.longitude;
                alert('aaab:' +longitude);
    });
    }else {
                   alert("Geolocation API is not supported in your browser.");
    }
    }

</script>

<script>
alert("ccc");
document.write (longitude);
document.write (latitude);

</script>
</body>
</html> 
```

我知道它在函数内工作，但是有什么方法可以在外面使用这些变量吗？我只想能够将它们存储在一个可以在任何地方调用的全局变量中。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T17:19:19.830

在您编写经度和纬度时，可能尚未调用 Geolocation Callback。也许您可以使用 jQuery 将正确的值写入屏幕...

```
<script>
    var longitude = "30";
    function getLocation() {

        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(function(position){
                latitude = position.coords.latitude;
                longitude = position.coords.longitude;
                //alert('aaab:' +longitude);

                // Use jQuery to write your values to the html
                $("#longitude").html(longitude);
                $("#latitude").html(latitude);
            });
        }else {
            alert("Geolocation API is not supported in your browser.");
        }
    }

</script>

<html>
    ...
    <body onload="getLocation()">
        <div id="longitude"></div>
        <div id="latitude"></div>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T17:22:55.603

document.write 在更新它的代码运行之前被执行。您需要在回调中执行 document.write，如下所示：

```
<!DOCTYPE html>
  <head>
    <script type='text/javascript'>
      var longitude = "10";
      var latitude = "20";

      function getLocation() {
        if (navigator.geolocation) {
          navigator.geolocation.getCurrentPosition(function(position){
            latitude = position.coords.latitude;
            longitude = position.coords.longitude;

            document.write(latitude+" / "+longitude);  
          });
        }else{
          alert("Geolocation API is not supported in your browser.");
        }
      }

    </script>
  </head>
  <body onload="getLocation()">

  </body>
  </html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T17:25:25.663

尝试这个：

```
function getLocation() {

    if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(displayLocation);
    }else {
                   alert("Geolocation API is not supported in your browser.");
    }
}

    function displayLocation(position) {
       latitude = position.coords.latitude;
       longitude = position.coords.longitude;
       alert('aaab:' +longitude);
    } 
```

# php - js中将php字符串数组转换成js数组

> ID：14859116
> 
> 赞同：0
> 
> 时间：2013-02-13T17:15:26.650
> 
> 标签：php, javascript

我有一个从 AJAX 检索到的数据数组（它来自 MVC-view-cakephp）。我想将数组重新填充到组合框中。数组看起来像这样：

```
Array (
    [266] => Andy Employee II
    [26] => Annette Oliveira
    [214] => Edwina Umeyor
    [39] => Eva Britton
    [193] => Leigh Otterson
    [68] => Louise Edelston
    [71] => Margaret Williams
    [97] => Simon Harris
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T17:18:15.723

您将使用该`json_encode`函数将 PHP 数组转换为 JavaScript 对象。更多信息`json_encode`可以在[PHP 手册](http://php.net/manual/en/function.json-encode.php)中找到。

```
<?php
$arr = array('a' => 1, 'b' => 2, 'c' => 3, 'd' => 4, 'e' => 5);

echo json_encode($arr);
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T17:18:27.127

我想你必须编写一个自定义解析器才能做到这一点。你不太可能在互联网上找到一个。

这里最好的解决方案是让 cakephp 脚本将此数组输出为 JSON。JSON 可以通过 php 轻松生成`json_encode`，当然 javascript 非常擅长读取 JSON 对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T17:18:34.713

Javascript 没有关联数组。相反，他们使用对象。在你的 PHP 回显 json_encode( $yourArray ); 而不是你现在返回的任何东西（看起来像一个vardump？）。

在您的 AJAX 调用中，将 JSON 设置为预期的内容返回类型。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-13T17:17:11.350

你会使用 php [json_encode](http://php.net/manual/en/function.json-encode.php)函数，比如

```
<script type="text/javascript">
var arr = <?php echo json_encode($myarray);?>;
</script> 
```

# ruby - 在 Ruby 中计算中位数

> ID：14859120
> 
> 赞同：55
> 
> 时间：2013-02-13T17:15:33.430
> 
> 标签：ruby, median

如何使用 Ruby 计算数字数组的中位数？

我是一个初学者，正在努力处理数组长度为奇数和偶数的情况。

* * *

## 回答 #1

> 赞同：107
> 
> 时间：2013-02-13T17:37:06.713

这是一个适用于偶数和奇数长度数组并且不会改变数组的解决方案：

```
def median(array)
  return nil if array.empty?
  sorted = array.sort
  len = sorted.length
  (sorted[(len - 1) / 2] + sorted[len / 2]) / 2.0
end 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-04-03T00:57:31.353

```
 def median(array)                          #Define your method accepting an array as an argument. 
      array = array.sort                     #sort the array from least to greatest
      if array.length.odd?                   #is the length of the array odd?
        array[(array.length - 1) / 2] #find value at this index
      else array.length.even?                #is the length of the array even?
       (array[array.length/2] + array[array.length/2 - 1])/2.to_f
                                             #average the values found at these two indexes and convert to float
      end
    end 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-12-19T09:26:32.820

类似于 nbarraille 的，但我发现跟踪它的工作原理更容易一些：

```
class Array
  def median
    sorted = self.sort
    half_len = (sorted.length / 2.0).ceil
    (sorted[half_len-1] + sorted[-half_len]) / 2.0
  end
end 
```

*half_len = 直到并包括（对于具有奇数项的数组）数组中间的元素数。*

更简单：

```
class Array
  def median
    sorted = self.sort
    mid = (sorted.length - 1) / 2.0
    (sorted[mid.floor] + sorted[mid.ceil]) / 2.0
  end
end 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-13T17:30:58.017

如果通过计算中位数你的意思是[这个](http://www.mathsisfun.com/median.html)

然后

```
a = [12,3,4,5,123,4,5,6,66]
a.sort!
elements = a.count
center =  elements/2
elements.even? ? (a[center] + a[center+1])/2 : a[center] 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-01-17T22:50:51.473

我喜欢使用 Refinements，这是一种对 ruby​​ 类进行**Monkey Patch**的安全方法，不会对系统产生附带影响。

使用**变得**比新方法更清洁。

使用[Refinements](https://docs.ruby-lang.org/en/2.4.0/syntax/refinements_rdoc.html)，您可以对类进行修补`Array`，实现该方法，`Array#median`并且此方法仅在使用细化的类的范围内可用！:)

### 改进

```
module ArrayRefinements
  refine Array do
    def median
      return nil if empty?
      sorted = sort
      (sorted[(length - 1) / 2] + sorted[length / 2]) / 2.0
    end
  end
end

class MyClass
  using ArrayRefinements
  # You can use the Array#median as you wish here

  def test(array)
    array.median
  end
end

MyClass.new.test([1, 2, 2, 2, 3])
=> 2.0 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-04-02T12:54:58.147

处理边缘情况的更正确解决方案：

```
class Array
  def median
    sorted = self.sort
    size = sorted.size
    center = size / 2

    if size == 0
      nil
    elsif size.even?
      (sorted[center - 1] + sorted[center]) / 2.0
    else
      sorted[center]
    end
  end
end 
```

有一个规格可以证明：

```
describe Array do
  describe '#median' do
    subject { arr.median }

    context 'on empty array' do
      let(:arr) { [] }

      it { is_expected.to eq nil }
    end

    context 'on 1-element array' do
      let(:arr) { [5] }

      it { is_expected.to eq 5 }
    end

    context 'on 2-elements array' do
      let(:arr) { [1, 2] }

      it { is_expected.to eq 1.5 }
    end

    context 'on odd-size array' do
      let(:arr) { [100, 5, 2, 12, 1] }

      it { is_expected.to eq 5 }
    end

    context 'on even-size array' do
      let(:arr) { [7, 100, 5, 2, 12, 1] }

      it { is_expected.to eq 6 }
    end
  end
end 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-02-22T23:52:03.747

```
def median(array)
  half = array.sort!.length / 2
  array.length.odd? ? array[half] : (array[half] + array[half - 1]) / 2 
end 
```

*如果长度是偶数，则必须加上中间点加上中间点-1，以说明从0开始的索引

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-02-04T16:47:20.957

```
def median(array, already_sorted=false)
    return nil if array.empty?
    array = array.sort unless already_sorted
    m_pos = array.size / 2
    return array.size % 2 == 1 ? array[m_pos] : mean(array[m_pos-1..m_pos])
end 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-02-04T15:26:54.603

这是一个解决方案：

```
app_arry = [2, 3, 4, 2, 5, 6, 16].sort

# check array isn't empty
if app_arry.empty?  || app_arry == ""
  puts "Sorry, This will not work."
  return nil
end

length = app_arry.length
puts "Array length = #{length}"
puts "Array = #{app_arry}"

if length % 2  == 0
 # even number of elements
 puts "median is #{(app_arry[length/2].to_f +  app_arry[(length-1)/2].to_f)/2}"
else
 # odd number of elements
 puts "median is #{app_arry[(length-1)/2]}"
end 
```

**输出**

> 数组长度 = 7
> 
> 数组 = [2, 3, 4, 2, 5, 6, 16]
> 
> 中位数为 2

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-12-01T05:42:39.090

```
def median(arr)
    sorted = arr.sort 
    if sorted == []
       return nil
    end  

    if sorted.length % 2 != 0
       result = sorted.length / 2 # 7/2 = 3.5 (rounded to 3)
       return sorted[result] # 6 
    end

    if sorted.length % 2 == 0
       result = (sorted.length / 2) - 1
       return (sorted[result] + sorted[result+1]) / 2.0 #  (4 + 5) / 2
    end
end

p median([5, 0, 2, 6, 11, 10, 9]) 
```

* * *

## 回答 #11

> 赞同：-2
> 
> 时间：2013-09-23T09:23:07.407

我觉得很好：

```
#!/usr/bin/env ruby

#in-the-middle value when odd or
#first of second half when even.
def median(ary)
  middle = ary.size/2
  sorted = ary.sort_by{ |a| a }
  sorted[middle]
end 
```

或者

```
#in-the-middle value when odd or
#average of 2 middle when even.
def median(ary)
  middle = ary.size/2
  sorted = ary.sort_by{ |a| a }
  ary.size.odd? ? sorted[middle] : (sorted[middle]+sorted[middle-1])/2.0
end 
```

我使用 sort_by 而不是 sort 因为它更快：[在 Ruby 中按降序对数组进行排序](https://stackoverflow.com/questions/2642182/sorting-an-array-in-descending-order-in-ruby)。

# python - 在 Python 中过滤 USB HID 列

> ID：14859122
> 
> 赞同：0
> 
> 时间：2013-02-13T17:15:35.563
> 
> 标签：python, filter, usb, hid

我似乎无法找到答案。请记住，我不是专家，所以我可能会遗漏简单的内容，也许我正在打印我想要的设备。我正在尝试从 USB 设备存储设备版本号（来自此处的 dvm）。问题是 USB 设备有两列用于报告、功能和输出。

因此，当我打印设备时，我会收到两组打印语句。

#

def 设备（target_usage，target_vendor_id）：

```
hidDevice = False
all_devices = hid.HidDeviceFilter(vendor_id = target_vendor_id).get_devices()
print "\n", all_devices
if len(all_devices) == 0:
    # Exit if no devices found, report error.
    hidDevice = False
    time.sleep(0.2)
    print "No devices can be detected, please check device is connected."
    sys.exit(1)
    return
elif len(all_devices) > 2:
    # announce there are more than 1 device connected to prevent conflicting upgrades
    hidDevice = True
    time.sleep(0.2)
    print "Too many devices connected, ensure the only device connected is the device needed to test."
    sys.exit(1)

else:
    # loop through all devices
    for device in all_devices:
        try:
            device.open()

            # print device details
            device_name = unicode("=== INFO: Found %s %s (vID=[%04x], pID=[%04x], version number [%04x]) ===" % \
            (device.vendor_name, device.product_name, device.vendor_id, device.product_id, device.version_number))
            dvm = unicode("%04x" % \
            (device.version_number))
            print dvm;
            print device_name; 

        finally:
            device.close()

    hidDevice = True

return hidDevice 
```

#

调用此函数时，它将打印所有设备，但我最终得到以下结果（针对隐私问题修改了 pids/vids 等。）

[HID 设备 (vID=0x0000, pID=0x0000, v=0x0000); 制作; 型号，路径：\?\hid#vid_0000&pid_0000&col01#7&00000000&1&0000#{00000000-0000-0000-0000-000000000000}，HID设备（vID=0x0000，pID=0x0000，v=0x0000）；制作; 型号，路径：\?\hid#vid_0000&pid_0000&col02#7&00000000&1&0000#{00000000-0000-0000-0000-000000000000}

重要的部分是 col01 和 col02。

如何过滤掉第二个枚举的 HID 设备？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T11:41:29.487

包括以下代码。

```
for report in device.find_output_reports(): 
                    if target_usage in report:
                        # add to target list
                        Targets.append(device)

            finally:
                device.close()

        for item in Targets:        

            try:
                item.open(output_only = True)
                dvm = unicode("%04x" % \
                (device.version_number))
                print dvm
            finally:
                item.close() 
```

问题已解决。

# javascript - 如何在推文中显示实体

> ID：14859125
> 
> 赞同：1
> 
> 时间：2013-02-13T17:15:45.807
> 
> 标签：javascript, jquery, python, twitter, tweepy

为了减少对 Twitter API 的调用次数，我们在服务器上缓存了一些推文并直接从那里显示它们。问题在于，当我们向它们显示实体时——链接、主题标签和 Twitter 用户不是活动链接。

有没有办法让它们链接前端和后端解决方案都是可以接受的。我们在后端使用 Python/TweePy，在前端使用 jQuery。

# javascript - Sencha Touch 2：如何覆盖导航视图上的后退按钮

> ID：14859129
> 
> 赞同：2
> 
> 时间：2013-02-13T17:16:02.517
> 
> 标签：javascript, mobile, extjs, sencha-touch, sencha-touch-2

我想知道如何覆盖导航视图上的后退按钮。我尝试使用 onBackButtonTap 但它似乎不起作用[http://www.senchafiddle.com/#8zaXf](http://www.senchafiddle.com/#8zaXf)

```
var view = Ext.Viewport.add({
            xtype: 'navigationview',
            onBackButtonTap: function () {
                alert('Back Button Pressed');
            },

            //we only give it one item by default, which will be the only item in the 'stack' when it loads
            items: [
                {
                    //items can have titles
                    title: 'Navigation View',
                    padding: 10,

                    //inside this first item we are going to add a button
                    items: [
                    {
                    xtype: 'button',
                    text: 'Push another view!',
                    handler: function() {
                    //when someone taps this button, it will push another view into stack
                    view.push({
                    //this one also has a title
                    title: 'Second View',
                    padding: 10,

                    //once again, this view has one button
                    items: [
                    {
                    xtype: 'button',
                    text: 'Pop this view!',
                    handler: function() {
                    //and when you press this button, it will pop the current view (this) out of the stack
                    view.pop();
                }
                }
            ]
        }); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T18:54:23.573

您提到的小提琴在我机器上的本地项目中运行良好。出于某种原因，它在小提琴网站上不起作用。尝试在本地项目上运行它。

与其使用`onBackButtonTap`配置，不如扩展`Ext.navigation.View`类和覆盖`onBackButtonTap`方法。这样您就可以更好地控制整个组件。您还想覆盖其他配置。这是我会使用的 -

```
Ext.namespace('Ext.ux.so');

Ext.define('Ext.ux.so.CustomNav',{
    extend:'Ext.navigation.View',
    xtype:'customnav',
    config:{

    },
    onBackButtonTap:function(){
        this.callParent(arguments); 
        alert('back button pressed');
    }
}); 
```

该行将`this.callParent(arguments)`允许组件以默认方式运行+希望它运行的方式。如果你想完全覆盖后退按钮的行为，你可以删除这一行。尝试两种方式。

要使用此自定义组件，您可以使用 -

```
launch: function() {
        // Destroy the #appLoadingIndicator element
        Ext.fly('appLoadingIndicator').destroy();

        var view = Ext.create('Ext.ux.so.CustomNav', {
            fullscreen: true,

            items: [{
                title: 'First',
                items: [{
                    xtype: 'button',
                    text: 'Push a new view!',
                    handler: function() {
                        //use the push() method to push another view. It works much like
                        //add() or setActiveItem(). it accepts a view instance, or you can give it
                        //a view config.
                        view.push({
                            title: 'Second',
                            html: 'Second view!'
                        });
                    }
                }]
            }]
        });

    } 
```

试一试。它会为你工作哟。

# java - 客户端服务器按顺序交换消息

> ID：14859131
> 
> 赞同：1
> 
> 时间：2013-02-13T17:16:05.757
> 
> 标签：java, client-server, serversocket

以下是我的服务器和客户端身份验证程序。我想知道我是否以正确的方式进行操作，我希望消息按顺序发送和接收，这意味着服务器仅在接收到来自客户端的输入后才发送数据，在收到来自服务器的响应后，同样的事情会发送到客户端然后回复。

```
Client class:

try {
        // Set up the socket
        connection = new Socket("127.0.0.1", 55555);
        PrintWriter out = new PrintWriter(connection.getOutputStream(),
                true);
        BufferedReader in = new BufferedReader(new InputStreamReader(
                connection.getInputStream()));

        // Client --> Server 'A'
        BigInteger A = client.Step1(username, password);
        out.println(A);
        // Client received s , B
        byte[] s = new BigInteger(in.readLine()).toByteArray();
        BigInteger B = new BigInteger(in.readLine());
        // Client --> Server 'A'
        BigInteger M1 = client.Step2(new BigInteger(s), B);
        out.println(M1);
        // Client received M2
        BigInteger M2 = new BigInteger(in.readLine());

        boolean clientVerify = client.clientVerify(M2);
        if (clientVerify) {
            System.out.println("Client OK");
        } else {
            System.out.println("NOT OK");
        }

        out.close();
        in.close();
        connection.close();
    } catch (Exception e) {
        e.printStackTrace();
    }

Server class:
try {
        socServer = new ServerSocket(55555);
        System.out.println("Waiting Client....");
        connection = socServer.accept();
        System.out.println("Client Connected");

        PrintWriter out = new PrintWriter(connection.getOutputStream(),
                true);
        BufferedReader in = new BufferedReader(new InputStreamReader(
                connection.getInputStream()));

        // Server received A
        BigInteger A = new BigInteger(in.readLine());
        // Server --> Client 's' , 'B'
        out.println(new BigInteger(s));
        BigInteger B = server.step1(username, new BigInteger(s), v);
        out.println(B);
        server.step2(A);

        // Server received 'M1'
        BigInteger M1 = new BigInteger(in.readLine());
        boolean serverVerify = server.serverVerify(M1);
        if (serverVerify) {
            // Server --> Client 'M2'
            BigInteger M2 = server.step2(A, M1);
            out.println(M2);
            System.out.println("Server OK");
        } else {
            System.out.println("NOT OK");
            connection.close();
        }

        out.close();
        in.close();
        connection.close();
    } catch (Exception e) {
        e.printStackTrace();
    } 
```

我可以通过 Wireshark 捕获数据吗？

# python-3.x - ipython3 iptest3 错误

> ID：14859133
> 
> 赞同：0
> 
> 时间：2013-02-13T17:16:18.993
> 
> 标签：python-3.x, ipython

我正在运行 Mac OSX 10.7.5。我删除了 Python 2.7 并安装了 Python 3.3。我安装了 ipython，当我运行 iptest3 时出现以下错误：

```
Traceback (most recent call last):

  File "/Library/Frameworks/Python.framework/Versions/3.3/bin/iptest3", line 9, in <module>
    load_entry_point('ipython==0.13.1', 'console_scripts', 'iptest3')()

  File "/Library/Frameworks/Python.framework/Versions/3.3/lib/python3.3/site-packages/distribute-0.6.34-py3.3.egg/pkg_resources.py", line 343, in load_entry_point
    return get_distribution(dist).load_entry_point(group, name)

  File "/Library/Frameworks/Python.framework/Versions/3.3/lib/python3.3/site-packages/distribute-0.6.34-py3.3.egg/pkg_resources.py", line 2308, in load_entry_point
    return ep.load()

  File "/Library/Frameworks/Python.framework/Versions/3.3/lib/python3.3/site-packages/distribute-0.6.34-py3.3.egg/pkg_resources.py", line 2014, in load
    entry = __import__(self.module_name, globals(),globals(), ['__name__'])

  File "/Library/Frameworks/Python.framework/Versions/3.3/lib/python3.3/site-packages/ipython-0.13.1-py3.3.egg/IPython/__init__.py", line 43, in <module>

from .config.loader import Config
  File "/Library/Frameworks/Python.framework/Versions/3.3/lib/python3.3/site-packages/ipython-0.13.1-py3.3.egg/IPython/config/__init__.py", line 16, in <module>

from .application import *
  File "/Library/Frameworks/Python.framework/Versions/3.3/lib/python3.3/site-packages/ipython-0.13.1-py3.3.egg/IPython/config/application.py", line 31, in <module>

from IPython.config.configurable import SingletonConfigurable
  File "/Library/Frameworks/Python.framework/Versions/3.3/lib/python3.3/site-packages/ipython-0.13.1-py3.3.egg/IPython/config/configurable.py", line 26, in <module>

from .loader import Config
  File "/Library/Frameworks/Python.framework/Versions/3.3/lib/python3.3/site-packages/ipython-0.13.1-py3.3.egg/IPython/config/loader.py", line 27, in <module>

from IPython.utils.path import filefind, get_ipython_dir
  File "/Library/Frameworks/Python.framework/Versions/3.3/lib/python3.3/site-packages/ipython-0.13.1-py3.3.egg/IPython/utils/path.py", line 25, in <module>

from IPython.utils.process import system
  File "/Library/Frameworks/Python.framework/Versions/3.3/lib/python3.3/site-packages/ipython-0.13.1-py3.3.egg/IPython/utils/process.py", line 27, in <module>

from ._process_posix import _find_cmd, system, getoutput, arg_split
  File "/Library/Frameworks/Python.framework/Versions/3.3/lib/python3.3/site-packages/ipython-0.13.1-py3.3.egg/IPython/utils/_process_posix.py", line 22, in <module>

from IPython.external import pexpect
  File "/Library/Frameworks/Python.framework/Versions/3.3/lib/python3.3/site-packages/ipython-0.13.1-py3.3.egg/IPython/external/pexpect/__init__.py", line 2, in <module>

import pexpect
  File "/Library/Frameworks/Python.framework/Versions/3.3/lib/python3.3/site-packages/pexpect-2.4-py3.3.egg/pexpect.py", line 82

except ImportError, e:

                  ^

SyntaxError: invalid syntax 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T03:56:09.290

pexpect is not compatible with Python 3\. You need to install [pexpect-u](http://pypi.python.org/pypi/pexpect-u).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T20:46:50.057

对我来说似乎是一个预期的问题。你可以在普通的 python3.3 shell 中导入 pexpect 吗？

还

*   我不确定 ipython .egg 是否适用于 python3。
*   我认为您**无需**删除 2.7 即可使用 3.3

# sql - Is there a good way to do this in SQL?

> ID：14859134
> 
> 赞同：4
> 
> 时间：2013-02-13T17:16:21.717
> 
> 标签：sql, tsql, unique-constraint, sap-ase

I am trying to solve the following problem **entirely in SQL** (ANSI or TSQL, in Sybase ASE 12), without relying on cursors or loop-based row-by-row processing.

[NOTE: I already created a solution that accomplishes the same goal in application layer (therefore please refrain from "answering" with "don't do this in SQL"), but as a matter of principle (and hopefully improved performance) I would like to know if there is an efficient (e.g. no cursors) pure SQL solution.]

**Setup**:

*   I have a table T with the following 3 columns (all NOT NULL):

    ```
    ---- Table T -----------------------------
    | item  | tag           | value          | 
    | [int] | [varchar(10)] | [varchar(255)] | 
    ```

*   The table has unique index on `item, tag`

*   Every tag has a form of a string "TAG##" where "##" is a number 1-99

*   Existing tags are not guaranteed to be contiguous, e.g. item 13 may have tags "TAG1", "TAG3", "TAG10".

*   **TASK**: I need to insert a bunch of new rows into the table from another table T_NEW, which only have items and values, and assign new tag to them so they don't violate unique index on `item, tag`.

    Uniqueness of values is irrelevant (assume that item+value is always unique already).

    ```
    ---- Table T_NEW --------------------------
    | item  | tag            | value          | 
    | [int] | STARTS AS NULL | [varchar(255)] | 
    ```

*   **QUESTION**: How can I assign new tags to all rows in table T_NEW, such that:

    *   All item+tag combinations in a union of T and T_NEW are unique

    *   Newly assigned tags should all be in the form "TAG##"

    *   Newly assigned tags should ideally be the smallest available for a given item.

*   If it helps, you can assume that I already have a temp table `#tags`, with a "tag" column that contains 99 rows containing all the valid tags (TAG1..TAG99, one per row)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T19:43:19.417

我开始了一个[小提琴](http://sqlfiddle.com/#!3/d63dc/2)，它将按项目为您提供可用的“打开”标签列表。它使用 #tags (AllTags) 并执行`outer-join-where-null`. 您可以使用它从 T_New 插入新标签...

```
with T_openTags as (
  select 
    items.item,
    openTagName = a.tag
  from
    (select distinct item from T) items
    cross join AllTags a
    left outer join T on 
      items.item = T.item
      and T.tag = a.tag
  where
    T.item is null
 )

select * from T_openTags 
```

或查看此[更新的小提琴](http://sqlfiddle.com/#!3/4bc26/1)以对 T_New 表进行更新。本质上添加了一个 row_number，因此我们可以选择正确的打开标记以在单个更新语句中使用。我用前导零填充标签名称以简化排序。

```
with T_openTags as (
  select 
    items.item,
    openTagName = a.tag,
    rn = row_number() over(partition by items.item order by a.tag)
  from
    (select distinct item from T) items
    cross join AllTags a
    left outer join T on 
      items.item = T.item
      and T.tag = a.tag
  where
    T.item is null

), T_New_numbered as (

  select *, 
     rn = row_number() over(partition by item order by value) 
  from T_New
)

update tnn set tag = openTagName
from T_New_numbered tnn
inner join T_openTags tot on 
  tot.item = tnn.item
  and tot.rn = tnn.rn

select * from T_New 
```

用可怜的 mans row_number 替换更新[小提琴，它只适用于不同的 T_New 值](http://sqlfiddle.com/#!3/4bc26/3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-17T09:31:53.833

尝试这个：

```
DECLARE @T TABLE (ITEM  INT, TAG VARCHAR(10), VALUE VARCHAR(255))
INSERT INTO @T VALUES 
(1,'TAG1', '100'),
(2,'TAG2', '200')

DECLARE @T_NEW TABLE (ITEM  INT, TAG VARCHAR(10), VALUE VARCHAR(255))
INSERT INTO @T_NEW VALUES 
(3,NULL, '500'),
(4,NULL, '600')

INSERT INTO @T
SELECT
    ITEM,
    ('TAG' + CONVERT(VARCHAR(20),ITEM)) AS TAG,
    VALUE
FROM 
   @T_NEW

SELECT * FROM @T 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-13T21:19:42.990

OK, here's a correct solution, tested to work on Sybase (H/T: big thanks to @ypercube for providing a solid basis for it)

```
declare @c int
select @c = 1
WHILE (@c > 0)
BEGIN

    UPDATE
        t_new
    SET
        tag =  
        ( SELECT min(tags.tag)
          FROM #tags tags
            LEFT JOIN t o
              ON  tags.tag = o.tag
              AND o.item = t_new.item
            LEFT JOIN t_new n3
              ON  tags.tag = n3.tag
              AND n3.item = t_new.item
          WHERE o.tag IS NULL
          AND n3.tag IS NULL
        )
        WHERE tag IS NULL
        -- and here's the main magic for only updating one item at a time
        AND NOT EXISTS (SELECT 1 FROM t_new n2 WHERE t_new.value > n2.value 
                        and n2.tag IS NULL and n2.item=t_new.item)
        SELECT @c = @@rowcount
END 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-13T17:36:51.093

~~直接插入`t`：~~

 ~~```
INSERT INTO t
    (item, tag, value) 
SELECT 
    item, 
    ( SELECT MIN(tags.tag)
      FROM #tags AS tags
        LEFT JOIN t AS o
          ON  tags.tag = o.tag
          AND o.item_id = n.item_id 
      WHERE o.tag IS NULL
    ) AS tag,
    value  
FROM
    t_new AS n ; 
```~~ 

更新`t_new`：

```
UPDATE
    t_new AS n
SET
    tag =  
    ( SELECT MIN(tags.tag)
      FROM #tags AS tags
        LEFT JOIN t AS o
          ON  tags.tag = o.tag
          AND o.item_id = n.item_id 
      WHERE o.tag IS NULL
    ) ; 
```

 ~~**更正**

```
UPDATE
    n
SET
    n.tag = w.tag
FROM
    ( SELECT item_id,
             tag,
             ROW_NUMBER() OVER (PARTITION BY item_id ORDER BY value) AS rn
      FROM t_new
    ) AS n
  JOIN
    ( SELECT di.item_id,
             tags.tag,
             ROW_NUMBER() OVER (PARTITION BY di.item_id ORDER BY tags.tag) AS rn
      FROM 
          ( SELECT DISTINCT item_id
            FROM t_new
          ) AS di
        CROSS JOIN 
          #tags AS tags
        LEFT JOIN
          t AS o
            ON  tags.tag = o.tag
            AND o.item_id = di.item_id 
      WHERE o.tag IS NULL
    ) AS w
    ON  w.item_id = n.item_id
    AND w.rn = n.rn ; 
```~~

# c++ - Creating 8bpp bitmap with GDI and saving it as a file

> ID：14859138
> 
> 赞同：2
> 
> 时间：2013-02-13T17:16:35.073
> 
> 标签：c++, visual-c++, bitmap, gdi, bitmapimage

I have a perfectly working code that creates 32bpp bitmap and I need to change it so that 8bpp bitmap is created.

Here's the piece of code that creates 32bpp bitmap, draws into it, then it creates a bitmap file and store it into the vector of bytes:

```
// prepare bitmap:
BYTE* bitmap_data = NULL;
HDC hDC = GetDC(NULL);
HDC memHDC = CreateCompatibleDC(hDC);
BITMAPINFO bmi;
memset(&bmi, 0, sizeof(BITMAPINFO));
bmi.bmiHeader.biSize = sizeof(BITMAPINFOHEADER);
bmi.bmiHeader.biWidth = desiredWidth;                 // desiredWidth is 800
bmi.bmiHeader.biHeight = desiredHeight;               // desiredHeight is 202
bmi.bmiHeader.biPlanes = 1;
bmi.bmiHeader.biBitCount = 32;
bmi.bmiHeader.biCompression = BI_RGB;
bmi.bmiHeader.biSizeImage = (((desiredWidth * bmi.bmiHeader.biBitCount + 31) & ~31) >> 3) * desiredHeight;
HBITMAP bitmap = CreateDIBSection(hDC, &bmi, DIB_RGB_COLORS, (void**)&bitmap_data, NULL, NULL);
ReleaseDC(NULL, hDC);
DeleteDC(hDC);

... // drawing into bitmap

// prepare bitmap file header:
BITMAPFILEHEADER bf;
memset(&bf, 0, sizeof(BITMAPFILEHEADER));
bf.bfType = MAKEWORD('B', 'M');
bf.bfOffBits = sizeof(BITMAPFILEHEADER) + bmi.bmiHeader.biSize;
bf.bfSize = bf.bfOffBits + bmi.bmiHeader.biSizeImage;

// write bitmap file into the vector:
std::vector<BYTE> bitmapData;
bitmapData.insert(bitmapData.end(), (BYTE*)&bf, ((BYTE*)&bf) + sizeof(BITMAPFILEHEADER));
bitmapData.insert(bitmapData.end(), (BYTE*)&bmi.bmiHeader, ((BYTE*)&bmi.bmiHeader) + sizeof(BITMAPINFOHEADER));
bitmapData.insert(bitmapData.end(), bitmap_data, bitmap_data + bmi.bmiHeader.biSizeImage); 
```

And later the vector is stored into the file:

```
std::ofstream of("picture.bmp", std::ofstream::out | std::ofstream::binary);
of.write((char*)&bitmapData[0], bitmapData.size());
of.close(); 
```

and here's the output image:

![32bpp image](../Images/08cb996799a7b544b3ac93432b172220.png)

### What I've tried:

First step was naturally replacing `32` with `8` in this line: `bmi.bmiHeader.biBitCount = 32;` which resulted into image filled with solid grey colour. Then based on [this answer](https://stackoverflow.com/a/3143766/1168156) I made following changes:

```
BITMAPINFO bmi;
memset(&bmi, 0, sizeof(BITMAPINFO)); 
```

changed into:

```
struct BITMAPINFO256 {
    BITMAPINFOHEADER bmiHeader;
    RGBQUAD bmiColors[256];
} bmi;
memset(&bmi, 0, sizeof(BITMAPINFO256)); 
```

added this loop right before `CreateDIBSection` is called:

```
for (UINT i = 0; i < 256; i++) {
    bmi.bmiColors[i].rgbRed   = i;
    bmi.bmiColors[i].rgbGreen = i;
    bmi.bmiColors[i].rgbBlue  = i;
} 
```

and when the `bmi.bmiHeader` is being written into the vector, the `RGBQUAD` array is included: so `sizeof(BITMAPINFO256)` expresses the size of the header.

The new code ([full code here](http://paste2.org/p/2860028)) produces this output:

![8bpp image](../Images/94ab639c02df32975dfe89bc9291a609.png)

Why the new image looks that way? What's going on there? What am I missing?

Any help will be appreciated.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T17:54:41.177

它看起来像一个对齐问题。确保更新 BITMAPFILEHEADER 中的 bfOffBits，使其指向像素数据的第一个字节。（如果你不改变它，那么它可能指向调色板的开头。）

换句话说，`sizeof(RGBQUAD)*256`也应该在这里添加：

```
bf.bfOffBits = sizeof(BITMAPFILEHEADER) + bmi.bmiHeader.biSize; 
```

还要确保第一条扫描线从 DWORD 边界开始。也就是说，它与文件开头的偏移量应该是四个字节的倍数。同样，每条扫描线都应填充为四个字节的倍数。（如果你的宽度是很好的偶数，你可能看不到这些问题。在你的测试用例中有一个奇数宽度的图像很好。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T17:41:04.953

您需要指定您附加的调色板的大小。现在它为零，因此调色板显示为图像中的第一束像素。

```
bmi.bmiHeader.biClrUsed = 256; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T18:03:03.433

您需要为图像生成调色板。32 位图像中的每个像素都存储为 8 位，用于 Alpha、Red、Green 和 Blue。在 8 位图像中，每个像素中的值是调色板中的 8 位索引。

你的 for(i=0..255) { bmi.bmiColors[i].rgbRed = i; ....} 代码生成一个灰度调色板。

如果整个图像显示为灰色，则听起来像是对齐错误，从内存中调色图像的宽度必须是 4 的倍数。

尝试从 Paint 中保存 SMALL 256 颜色（又名 8 位图像）并在十六进制编辑器中进行比较。

# mysql - Showing all posts that have the same 'tags' or 'categories' of the user

> ID：14859140
> 
> 赞同：1
> 
> 时间：2013-02-13T17:16:44.133
> 
> 标签：mysql, sql, database

I am not sure if my method is the correct way of doing this in terms of my mysql schema because it is proving difficult as a user could have up to three tags and a post can also have up to three tags.

For example if a post has tags; Music, Technology. And a user has tags Music, Sports. The user would be able to see that post as the tag Music exists in both, the user profile and the post.

My tables are as follows:

**Profile** has columns:

```
Profile_id | tag1 | tag2 | tag3 
```

**Post** has columns:

```
post_id | author | item | tag1 | tag2 | tag3. 
```

Each tag in the table is related to a specific tag. E.g. `tag1`= Music, `tag2`= Sports etc.

A tag is inserted in the table dependant on whether the user ticks it when editing their profile or making a post, so tag could have a value `NULL`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T17:21:39.813

首先，您需要修复您的设计。创建一个标签表，然后为每个用户和帖子创建一个查找表，这应该使解决方案更加明显。

所以你的新结构将是：

**轮廓：**

```
profile_id | Other_Profile_Info ... 
```

**邮政：**

```
post_id | author | item 
```

**标签：**

```
tag_id | tag 
```

**Post_Tag：**

```
post_id | tag_id 
```

**Profile_Tag：**

```
profile_id | tag_id 
```

然后查询可能如下所示：

```
SELECT p.* FROM Post AS p
   INNER JOIN Post_Tag AS PostTag ON p.post_id = PostTag.post_id
   INNER JOIN Profile_Tag AS ProfileTag ON PostTag.tag_id = ProfileTag.tag_id
   INNER JOIN Profile AS Profile ON Profile.profile_id = ProfileTag.profile_id
WHERE Profile.profile_id = 'MyID' 
```

或使用子查询：

```
SELECT p.* FROM Post AS p 
WHERE p.post_id IN
   (SELECT post_id FROM Post_Tag WHERE tag_id IN
        (SELECT tag_id from Profile_Tag WHERE profile_id = 'MyID')
   ) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T17:26:14.973

理想情况下，您希望更加规范化您的数据库。创建一个名为`Tags`并具有列 tag_id 和 tag_name 的新表将比多列提供更好的灵活性。例如，如果您希望帖子有 100 个或更多标签怎么办？

创建一个管理帖子和标签之间关系的新表（即`post_tags`）以及另一个用于标签和用户的表（`user_tags`）将使您做得更好。

例如，您可以找到给定用户兴趣的所有帖子：

```
select p.*
from users u
join user_tags ut on u.user_id = ut.user_id
join post_tags pt on ut.tag_id = pt.tag_id
join posts p on p.id = pt.post_id
where u.user_name = 'theUser' 
```

请记住，您需要两个多对多表来拥有两个 id 的复合键，并检查您的查询是否有可能的重复项等。

# html - HTML5: Should I use h2's or h3's for content inside of an aside element?

> ID：14859142
> 
> 赞同：6
> 
> 时间：2013-02-13T17:16:47.613
> 
> 标签：html, asp.net-mvc-4

I've been poking around online but I can't seem to find a definitive answer on this. Given the following HTML5 structure below, should I be using h2's or h3's inside of my aside element for content titles?

I know it's okay to use multiple h1's as long as they are inside a section and/or article element. But i'm not sure what I should do within my aside? I think I should stay away from multiple h1's in an aside but im not sure about h2's and h3's.

Thanks!

```
<!DOCTYPE html>
<html>
<head>
<title>Heading Tags</title>
</head>
<body>
<section>
    <header>
        <h1>Main Section</h1>
    </header>

    <article>
        <h1>Article Title 1</h1>
        <div>Some Content Here</div>
    </article>

    <article>
        <h1>Article Title 2</h1>
        <div>Some Content Here</div>
    </article>

    <article>
        <h1>Article Title 3</h1>
        <div>Some Content Here</div>
    </article>
</section>

<aside>
    <header>
        <h1>Side Bar Heading</h1>
    </header>

    <div>
        <h2>Side Content Title 1</h2>
        <div>Some Content Here</div>
    </div>

    <div>
        <h2>Side Content Title 2</h2>
        <div>Some Content Here</div>
    </div>

    <div>
        <h2>Side Content Title 3</h2>
        <div>Some Content Here</div>
    </div>
</aside>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2018-12-26T21:20:12.317

根据[MDN](https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/Using_HTML_sections_and_outlines#The_HTML5_outline_algorithm)：

> HTML5 中的部分可以嵌套。除了由元素定义的主要部分之外，部分限制是显式或隐式定义的。明确定义的部分是 <body>、<section>、<article>、<aside> 和 <nav> 标签中的内容。
> 
> 每个部分都可以有自己的标题层次结构。因此，即使是嵌套部分也可以有一个 <h1>。

所以你做的方式——在你的里面有一个`<h1>`和多个——是合适的。`<h2>``<aside>`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-13T17:37:01.673

你真的不应该`<h1>`在一个页面上使用多个 s 。标签主要`h`用于指示文档结构。[Web Content Accessibility Guidelines (WCAG) 2.0 标准](http://www.w3.org/TR/2012/NOTE-WCAG20-TECHS-20120103/G141)显示了`h1`标签应为页面标题的示例。大多数州（例如伊利诺伊州）都有自己的无障碍标准大纲。伊利诺伊州在特定的大纲中指出，页面上应该只有一个`h1`标签，并且它的内容与`<title>`标签相似。虽然这可能并且可能会被争论，但只使用一个`h1`标签并让其他 5 层正确嵌套在语义上是有意义的。

确实，常识在构建其他`h`标签方面起着重要作用。想象一下，完成后以“大纲模式”查看您的网站。是否有意义？

例如，假设您希望网站的轮廓如下所示：

```
Page Title

Content
 - Article
   - Sub-article
 - Article

Sidebar
 - Weather
 - Local News 
```

那么这就是您的标题标签应该如何工作：

```
<header>
  <h1>My News Website</h1>
  <nav></nav>
</header>
<section>
  <article>
    <h2>Article Title</h2>
    <p>Blah Blah Blah.</p>
    <h3>Sub-heading in Article</h3>
    <p>More blah blah blah.</p>
  </article>
  <article>
    <h2>Article Title</h2>
    <p>Blah Blah Blah.</p>
  </article>
</section>
<aside>
  <h2>Weather</h2>
  <p>Weather information.</p>
  <h2>Local News</h2>
  <ul>
    <li>News Item</li>
    <li>News Item</li>
  </ul>
</aside> 
```

只要您想要在同一级别上共享相同的标题编号，那么您就在正确的轨道上。与在上下文中有意义的“低于”所述标题的标题相关的事物应将标题编号加一。

最后，您可以使用 HTLM 5 Outline 向您展示已完成网站的大纲。在这里查看：http: [//gsnedders.html5.org/outliner/](http://gsnedders.html5.org/outliner/)

# javascript - Can I use a div to animate the container it is in?

> ID：14859145
> 
> 赞同：3
> 
> 时间：2013-02-13T17:17:05.027
> 
> 标签：javascript, html, scroll, containers

I have a container with three divs of content inside of it. I am using javascript to navigate from left to right across the divs with the navigation tools referenced as an unordered list. Instead I would like to make those divs fixed and just move the entire container from left to right using the same navigation buttons.

Here is the javascript I tried. In order for this to work, I tried to change var $anchor = $(this) to var $anchor = $(the name of the container div), but that doesn't work. Could someone help me out with this? Thanks

```
<script type="text/javascript">
        $(function() {
            $('ul.nav a').bind('click',function(event){
                var $anchor = $(this);
                $('html, body').stop().animate({
                    scrollLeft: $($anchor.attr('href')).offset().left
                }, 1000);
                event.preventDefault();
            });
        });
 </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T17:44:10.083

谢谢...不过我找到了答案！

[http://jsfiddle.net/pXy2C/](http://jsfiddle.net/pXy2C/)

```
$(document).ready(function(){
$("#right").click(function(){
    $("#contents").animate({left:'-200px'},500);
    $("#container").animate({'margin-left':'200px'},500);
});
$("#left").click(function(){
    $("#contents").animate({left:'0px'},500);
     $("#container").animate({'margin-left':'0px'},500);
  });
 }); 
```

# json - 使用 Swagger 解析 Jackson 注释

> ID：14859146
> 
> 赞同：3
> 
> 时间：2013-02-13T17:17:07.473
> 
> 标签：json, rest, jackson, swagger, api-doc

默认情况下，Swagger 解析类的数据成员，以便记录用作参数或由给定 Web 服务返回的对象。如果您使用的是 Jackson，Jackson 注释会提供更准确的 API 描述。

有谁知道让 Swagger 解析 Jackson 注释的（简单）方法。也许是一个被覆盖的解析器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T05:52:59.463

不确定这是否会有所帮助，但 Jackson 2.1 及更高版本公开了 Jackson 本身所见的 POJO 结构 ( `ObjectMapper.acceptJsonFormatVisitor`)，可用于生成不同种类的工件。例如，我用它编写了一个 Avro 模式生成器（作为[Jackson Avro 模块](https://github.com/FasterXML/jackson-dataformat-avro)的一部分）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-13T13:18:35.097

从 1.2 版开始，Swagger 可以自行解析 Jackson 注释。我使用 Jackson 2.1 确认了这一点。

# bash - 如何在 PS1 中设置条件换行符？

> ID：14859148
> 
> 赞同：15
> 
> 时间：2013-02-13T17:17:15.807
> 
> 标签：bash, shell, ps1

我正在尝试进行设置`PS1`，以便它在登录后立即打印出一些内容，但稍后会出现换行符。

假设`export PS1="\h:\W \u\$ "`，所以第一次（即，登录后）你得到：

```
hostname:~ username$ 
```

我一直在尝试类似的东西`~/.bashrc`：

```
function __ps1_newline_login {
  if [[ -n "${PS1_NEWLINE_LOGIN-}" ]]; then
    PS1_NEWLINE_LOGIN=true
  else
    printf '\n'
  fi
}

export PS1="\$(__ps1_newline_login)\h:\W \u\$ “ 
```

期望得到：

```
# <empty line>
hostname:~ username$ 
```

从一开始就有一个完整的例子：

```
hostname:~ username$ ls `# notice: no empty line desired above!`
Desktop      Documents

hostname:~ username$ 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-13T17:40:24.093

尝试以下操作：

```
function __ps1_newline_login {
  if [[ -z "${PS1_NEWLINE_LOGIN}" ]]; then
    PS1_NEWLINE_LOGIN=true
  else
    printf '\n'
  fi
}

PROMPT_COMMAND='__ps1_newline_login'
export PS1="\h:\W \u\$ " 
```

解释：

*   `PROMPT_COMMAND`是一个特殊的 bash 变量，每次设置提示之前都会执行。
*   您需要使用`-z`标志来检查字符串的长度是否为 0。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-13T18:39:24.243

使用 dogbane 的答案运行，您可以使 PROMPT_COMMAND “自毁”，从而无需在每个命令后运行函数。

在您的`.bashrc`or`.bash_profile`文件中，执行

```
export PS1='\h:\W \u\$ '
reset_prompt () {
  PS1='\n\h:\W \u\$ '
}
PROMPT_COMMAND='(( PROMPT_CTR-- < 0 )) && { 
  unset PROMPT_COMMAND PROMPT_CTR
  reset_prompt
}' 
```

处理文件时，`PS1`最初不会在提示前显示换行符。但是，`PROMPT_CTR`在第一次显示提示之前立即递减为 -1（之前隐式为 0）。在第一个命令之后，`PROMPT_COMMAND`在重置提示以包含换行之前清除自身和计数器。随后，no`PROMPT_COMMAND`将执行。

当然，有一个快乐的媒介，它不会`PROMPT_COMMAND`自行清除，而是重置为更普通的功能。就像是

```
export PS1='\h:\W \u\$ '
normal_prompt_cmd () {
   ...
}
reset_prompt () {
  PS1='\n\h:\W \u\$ '
}
PROMPT_COMMAND='(( PROMPT_CTR-- < 0 )) && {
   PROMPT_COMMAND=normal_prompt_cmd
   reset_prompt
   unset PROMPT_CTR
  }' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-02-21T20:38:56.330

**2018 年更新**（灵感来自 chepner 的回答）

**更新**：修复`PROMPT_COMMAND`了其他答案引起的问题

变化：

1.  [无需导出 PS1](https://unix.stackexchange.com/questions/247585/to-export-or-not-to-export-bash-ps1-variable)
2.  我使用“\n$PS1”而不是重新输入。
3.  其他答案会干扰`PROMPT_COMMAND`的默认行为（下面有更多信息）

* * *

在 ~/.bash_profile 中输入以下内容（用您的提示替换第一行）：

```
PS1=YOUR_PROMPT_HERE

add_newline_to_prompt() {
  is_new_login="true"
  INIT_PROMPT_COMMAND="$PROMPT_COMMAND"
  DEFAULT_PROMPT_COMMAND=update_terminal_cwd
  PROMPT_COMMAND='{
    if [ $is_new_login = "true" ]; then
      is_new_login="false"
      eval $INIT_PROMPT_COMMAND
    else
      PS1="\n$PS1"
      PROMPT_COMMAND=$DEFAULT_PROMPT_COMMAND
    fi
  }'
}

add_newline_to_prompt 
```

* * *

**PROMPT_COMMAND**

我注意到我在终端中的选项卡名称没有更新到我当前的工作目录并进行了一些调查。我意识到上述解决方案与`PROMPT_COMMAND`. 试试这个：

1.  注释掉对`PROMPT_COMMAND`配置文件（.bash_profile 等）中的任何修改
2.  添加`INIT_PROMPT_COMMAND="$PROMPT_COMMAND"`到您的配置文件

现在打开一个新的外壳：

```
$ echo $INIT_PROMPT_COMMAND
shell_session_history_check; update_terminal_cwd
$ echo $PROMPT_COMMAND
update_terminal_cwd 
```

请注意，当您打开一个新外壳时，它会运行“历史检查”并更新选项卡当前工作目录的名称。请注意，它最初只运行“历史检查”，然后再也不运行它。

注意：我只在 Mac 的终端上测试过。在其他系统上可能会有所不同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-09T16:39:50.770

将其插入您的 .bashrc：

```
PROMPT_COMMAND="export PROMPT_COMMAND=echo"
alias clear="clear; export PROMPT_COMMAND='export PROMPT_COMMAND='echo''" 
```

这正是您想要的。PS1 中不需要 \n 或任何功能。

# c++ - 当超类持有指向 X 的指针，以及指向 Y 的子类时：X

> ID：14859150
> 
> 赞同：2
> 
> 时间：2013-02-13T17:17:26.843
> 
> 标签：c++, inheritance

我想不出更好的标题...如果可以请编辑！

```
class AbstractGUIBase
{
...
};
class GUIConcrete : public AbstractGUIBase
{
...
};

class AbstractApplicationBase
{
 AbstractGUIBase *mGUI;
};

class MyApplication : public AbstractApplicationBase
{
 GUIConcrete *mGUI;
}; 
```

这基本上是我的设置......应用程序基类提供了通用功能，包括对 GUI 基类实例的引用`mGUI`。`mGUI`仅在`MyApplication`或其他具体子类中实例化。

我不想`mGUI`在两个类中重新声明，因为我最终会做类似`super::mGUI = mGUI = new ConcreteGUI()`. 但我也不想`mGUI`每次在`MyApplication`.

这里有正常的模式吗？我在想你可以`AbstractApplicationBase`在 GUI 类类型上进行模板化，但我不是特别喜欢模板编程。

我使用的是 MSVC++2008，所以没有花哨的现代东西可用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T17:39:47.550

我将尝试剥离模型的细节并专注于以下抽象设计：

```
 struct A                    struct DA : A 
                {                           {
                };                          };

//==============================================================================

                struct B                    struct DB : B 
                {                           { 
                    A* p;                       DA* pD; // Avoid this
                };                          }; 
```

现在您要做的是避免向 中添加*额外的*成员变量`DB`，并且能够将`p`继承自的指针`B`视为类型`DA*`。

您可以通过以下方式构造`B`类`DB`：

```
struct B
{
private:
    A* p;
public:
    B(A* _p) : p(_p) { }
    A* get_p() { return p; }
}

struct DB : B
{
public:
    B(DA* _p) : B(_p) { }
    DA* get_p() { return static_cast<DA*>(A::get_p()); }
} 
```

超类`B`将持有一个类型的指针`A*`。该指针在构建时设置。如果在创建 的实例时调用构造函数，则将存储`DB`指向类型对象的指针。提供了一个隐藏的版本并返回一个（正确转换的）类型指针的函数。`DA``DB``get_p()``B``get_p()``DA*`

由于这种设计，保证了`static_cast<>`in`DB::get_p()`是安全的（除非您使用虚拟继承，在这种情况下您应该使用效率较低的`dynamic_cast<>`）。

的内部操作`B`将直接访问指针`p`。的客户`B`将通过调用来检索它`B::get_p()`。在 的内部`DB`和客户端中`DB`，您将`p`通过通过函数检索指针来访问指向的对象`B::get_p()`，而不是直接取消引用`p`。

# .net - 由于以下错误，检索具有 CLSID {xxxx} 的组件的 COM 类工厂失败：80040154

> ID：14859151
> 
> 赞同：4
> 
> 时间：2013-02-13T17:17:32.957
> 
> 标签：.net, com, interop, registry, regsvr32

我正在将 VB6 应用程序升级到 VB.Net。它使用“Adobe Acrobat 10.0 类型库”。但是，当与 .Net 项目一起使用时，我在标题中遇到错误。我创建了一个小型测试项目。当我尝试在以下行实例化 AcroPDDoc 时引发异常：

```
Dim acroApp As Acrobat.AcroPDDoc = New Acrobat.AcroPDDoc() 
```

adobe 库位于`C:\Program Files (x86)\Adobe\Reader 10.0\Reader\AcroRd32.dll`. 添加后，它会将一个名为“Interop.Acrobat.dll”的 dll 放入项目的 obj 文件夹中。我已经尝试在两个 dll 上运行 RegSvr32.exe，正如我在某处看到的那样，但收到了一个错误

> dll 已加载，但对 DllRegisterServer 的调用失败，错误代码为 0x80004005

我无法在该错误代码上找到很多信息。

我还尝试[将平台目标从 'any cpu' 链接到 x86](https://stackoverflow.com/questions/4021796/error-80040154-class-not-registered-exception-when-initializing-vcprojectengin#4021887)。

编辑 - 我在 Windows 7 的 32 位和 64 位版本上都遇到了同样的问题。

在 win 7 64 中，我输入了以下内容：

> C:\Windows\SysWOW64> regsvr32 "C:\Program Files (x86)\Adobe\Reader 10.0\Reader\AcroRd32.dll"

收到以下错误：

![RegSvr32 错误 - 64 位 win7](../Images/033330ef2aa7c6d0d557231cd1859047.png)

在 win 7 32 中，输入以下内容：

> C:\Windows\system32> regsvr32 "C:\Program Files\Adobe\Reader 10.0\Reader\AcroRd32.dll"

收到以下错误：

![RegSvr32 错误 - 32 位 win7](../Images/ba7ead09c86efc3881d096d240670b7f.png)

编辑 2 - 根据 Raymond Chen 的建议，我在 Adob​​e 网站上再次通过。[我在这里](http://forums.adobe.com/thread/393569)、[这里](http://forums.adobe.com/thread/753819)找到了几个线程，以及关于[stackoverflow](https://stackoverflow.com/questions/2063111/visual-c-sharp-express-edition-cant-get-acrobat-pdf-reader-to-work)的另一个问题。前两个链接没有专门针对 .NET，但从它们看来，似乎必须安装 Acrobat Reader 的完整版本才能使这些互操作类工作/注册相关的 dll。明天我会检查，但我强烈怀疑客户的环境可能包含 Acrobat Reader 的完整版本。感谢所有回答的人，感谢您的宝贵时间。

编辑 3 - 安装了完整版的 Acrobat，你瞧，一切都很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T09:42:18.893

如上所述，除非机器上安装了 Acrobat 的完整版本，否则 dll 不允许自己注册。

# arrays - 如何在 ActionScript 中的 for 循环语句中推送数组

> ID：14859158
> 
> 赞同：0
> 
> 时间：2013-02-13T17:17:47.973
> 
> 标签：arrays, actionscript, for-loop, array-push

如果我在任何方面都含糊不清，我很抱歉，因为我对 AS3.0 和 stackoverflow 不熟悉。我只是想推动`i`变量添加到变量`_bullets`中。

```
var i:int = 0; //initializing the i variable

_bullets.push(i);

//Loops thought all the bullets on stage
for (var i:int = 0; i > _bullets.length; i++)
{
//Some code...
} 
```

我想要达到的结果是 for 循环现在有一些东西要循环。如果需要更多信息，我会尽力提供。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T17:40:36.333

我真的不明白您要做什么，但是您的代码中至少有两个错误：

1.  该变量`i`被声明了两次：在第一行和在循环中。
2.  循环中的延续测试是错误的。它应该是

    ```
    for (var i:int = 0; i < _bullets.length; i++) 
    ```

`_bullets`应该是`Array`一个`int`？因此，将在数组末尾`_bullets.push(i)`添加变量`i`（此处）的内容。`0`是你想做的吗？

然后，如果您想遍历 的元素，如果您不关心 的值，则`_bullets`可以使用循环：`for each``i`

```
for each (var bullet:int in _bullets ) 
{
    // some code using bullet
} 
```

它相当于

```
for (var i:int = 0; i < _bullets.length; i++ ) 
{
    var bullet:int = _bullet[i];
    // some code using bullet
} 
```

# android - 基于 Android 风格创建自定义按钮

> ID：14859160
> 
> 赞同：0
> 
> 时间：2013-02-13T17:17:56.377
> 
> 标签：android, button, styles

我需要创建一个自定义按钮控件，该控件将继承与我的应用程序中的所有其他按钮相同的 Android 样式。但是，我希望能够添加几行文本，其中文本的某些字符将采用不同的颜色。有没有办法实现这一点，我似乎看不到办法？

目前我已经通过绘制背景创建了一个看起来像按钮的视图，这没关系，但我希望背景等随着应用程序样式的变化而变化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T17:28:24.460

您应该使您的按钮从[`Widget.Button`](https://github.com/android/platform_frameworks_base/blob/master/core/res/res/values/styles.xml#L314). 这样，您可以确保所有默认设置都会为您提供。

# php - PHP - 用静态属性序列化一个类

> ID：14859163
> 
> 赞同：3
> 
> 时间：2013-02-13T17:18:01.013
> 
> 标签：php, class, serialization, static

当用户登录我的站点时，我会创建我的`User`类的一个实例，获取一些与用户相关的数据并将对象存储在`SESSION`.

我从数据库中获取的一些数据应该在整个会话期间保持不变，并且我希望可以从其他对象访问这些数据。在使用另一个对象中的值时，我更喜欢使用`User::$static_value_in_class`to `$_SESSION['static_value_in_session']`，但我愿意说服。

问题是，当我将`User`实例序列化到 中时，这些值不会被记住`SESSION`，然后加载不同的页面。

**类定义：**

```
class User {
    public $name;
    public static $allowed_actions;
    public function __construct($username, $password) {
        // Validate credentials, etc.
        self::$allowed_actions = get_allowed_actions_for_this_user($this);
    }   
}
class Blog {
    public static function write($text) {
        if (in_array(USER_MAY_WRITE_BLOG, User::$allowed_actions)) {
            // Write blog entry
        }
    }
} 
```

**登录.php：**

```
$user = new User($_POST['username'], $_POST['password']);
if (successful_login($user)) {
    $_SESSION['user'] = $user;
    header('Location: index.php');
} 
```

**索引.php：**

```
if (!isset($_SESSION['user'])) {
    header('Location: login.php');
}
Blog::write("I'm in index.php! Hooray!")
// Won't work, because Blog requires User::$allowed_actions 
```

我应该实现`Serializable`和编写自己的版本`serialize()`并`unserialize()`包含静态数据吗？

我应该咬紧牙关`$_SESSION`从`Blog`课堂上访问变量吗？

我是否应该要求将有效`User`实例发送到该`Blog` `write()`方法？

或者，也许互联网有更好的主意......

**编辑：**编写我**的真实**用例（不是完整的代码，但足以了解要点）。

我的网站处理具有共享预算帐户的用户组。用户可以将团体的钱花在团体同意的某些事情上，他们通过创建`Transaction`类的实例并将其发送到`Bank`类进行数据库存储来报告交易。

**`Bank`班级：**

```
class Bank {
   // Group-agreed reasons to spend money
   public static $valid_transaction_reasons;
   public function __construct(User $user) {
      Bank::$valid_transaction_reasons = load_reasons_for_this_group($user->bank_id);
   }
} 
```

**`User`班级：**

```
class User {
   public $bank_id;
   public function __construct($username, $password) {
      $query = "SELECT bank_id FROM users WHERE username=$username AND password=$password";
      $result = mysql_fetch_array(mysql_query($query));
      $this->bank_id = $result['bank_id'];
   }
} 
```

**`Transaction`班级：**

```
class Transaction {
   public function __construct($reason, $amount) {
      if (!in_array($reason, Bank::$valid_transaction_reasons)) {
         // Error! Users can't spend money on this, the group doesn't cover it
      }
      else {
         // Build a Transaction object
      }
   }
} 
```

**实际代码（login.php 之类的）：**

```
$user = new User($_GET['uname'], $_GET['pword']);
$_SESSION['bank'] = new Bank($user);

// Some shit happens, user navigates to submit_transaction.php

$trans = new Transaction(REASON_BEER, 5.65);
// Error! Bank::$valid_transaction_reasons is empty! 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-13T17:30:36.440

正如我在评论中提到的，这更像是一个软件设计问题，而不是如何使用 PHP 实现这一点的问题。

**静态属性不是对象状态的一部分，因此不会与它一起序列化。**

我会给你一个简短的例子，我将如何解决一个相关的问题。假设你有以下消息类，它有一个静态的 $id 属性来确保所有实例都有一个唯一的 id：

```
class Message {

    public static $id;

    public $instanceId;

    public $text;

    /**
     *
     */
    public function __construct($text) {
        // the id will incremented in a static var
        if(!self::$id) {
            self::$id = 1;
        } else {
            self::$id++;
        }

        // make a copy at current state
        $this->instanceId = self::$id; 
        $this->text = $text;
    }
} 
```

序列化/反序列化代码：

```
$m1 = new Message('foo');
printf('created message id: %s text: %s%s',
    $m1->instanceId,  $m1->text, PHP_EOL);
$m2 = new Message('bar');
printf('created message id: %s text: %s%s',
    $m2->instanceId,  $m2->text, PHP_EOL);

$messages = array($m1, $m2);

$ser1 = serialize($m1);
$ser2 = serialize($m2);

$m1 = unserialize($ser1);
printf('unserialized message id: %s text: %s%s',
    $m1->instanceId,  $m1->text, PHP_EOL);
$m2 = unserialize($ser2);
printf('unserialized message id: %s text: %s%s',
    $m2->instanceId,  $m2->text, PHP_EOL); 
```

为了确保 id 在多个脚本运行中是唯一的，进一步的工作是必要的。您必须确保`Message::$id`在创建任何对象之前使用上次脚本运行的值对其进行初始化。当涉及到网络服务器上的并行 PHP 请求时，这将得到额外的连接。

* * *

它只是一个我知道的最简单的静态属性的例子：一个实例计数器。在这种情况下，我会这样做。但我希望您看到在`static`没有副作用的情况下序列化/反序列化属性需要进一步的工作。这取决于您的应用程序需求。

**这个问题一般不能回答**我倾向于说在任何情况下序列化静态成员都是没有意义的。但我希望对此发表评论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T17:53:29.547

> 我从数据库中获取的一些数据应该在整个会话期间保持不变，并且我希望可以从其他对象访问这些数据。

如果数据真的是常数，那么就让它们成为常数。

如果数据不是常数，考虑它们是否属于单个用户（对象实例）或作为一般概念的用户（这是什么是类）。

> 我应该实现 Serializable 并编写自己的 serialize() 和 unserialize() 版本来包含静态数据吗？

将静态成员存储在序列化对象的字符串中是没有意义的，因为它们彼此独立。存储它们将是对象被序列化时类状态的快照。

考虑以下代码片段：

```
$user = new User;
$user::$allowed_actions = 'foo';
$string = serialize($user);
unset($user); 
```

现在想象一下你的代码的其他部分是这样做的：

```
echo User::$allowed_actions; 
```

尽管目前没有对象在内存中，但它仍然给出“foo”。那是因为它是一个静态成员。是阶级状态。

现在想象你这样做：

```
User::$allowed_actions = 'bar'; 
```

如果你现在对对象进行反序列化，那么 $allowed_actions 应该是什么？富还是酒吧？

```
$user = unserialize($string);
echo $user::$allowed_actions; 
```

输出应该并且将是“bar”，因为静态成员与类有关。我们创建、销毁并从中恢复对象的事实是无关紧要的。这是我们在这里改变的班级的所有状态。

另外，考虑到[静态是可测试性的死亡，](http://misko.hevery.com/2008/12/15/static-methods-are-death-to-testability/)并且[您希望尽可能避免它们](http://kore-nordmann.de/blog/0103_static_considered_harmful.html)。毕竟，它被称为 OOP 而不是面向类的编程。

> 我应该咬紧牙关从 Blog 类中访问 $_SESSION 变量吗？

不，您不应该在任何地方访问任何超全局变量，而是为它们中的每一个或更确切地说为它们内部的数据编写抽象。它们只是输入源。如果`$_SESSION`您想要做的是在您的引导程序中获取该特定请求所需的所有数据，然后将数据传递给周围，例如重新创建用户并传递它。

> 我是否需要将有效的 User 实例发送到 Blog write() 方法？

一般来说，方法应该在具有最多信息的对象上来完成一个动作。这是否适用于您的 Blog::write 我不知道。如果 allowed_actions 是 User 实例的一部分，那么可能是的，您可能需要一个有效的 User 实例。

> 或者，也许互联网有更好的主意......

另一种选择是将权限放入专用的 Permissions 对象中，持有用户角色及其权限。然后，您可以通过传入 User 对象从该列表中查找权限。搜索访问控制列表 (ACL) 以获取有关可能实现的更多信息。

> 编辑：编写我的真实用例（不是完整的代码，但足以了解要点）。

如果您只是担心它`Bank::$valid_transaction_reasons`可能为空，那么根本不要将 Bank 存储在 Session 中，而仅在运行事务时从用户那里加载它，例如在 submit_transaction.php 中创建 Bank 实例（在需要时创建它）。这样你就永远不会遇到错误。

# javascript - Javascript 试图将 HTML 字符代码写入页面

> ID：14859165
> 
> 赞同：1
> 
> 时间：2013-02-13T17:18:04.157
> 
> 标签：javascript, html

我正在使用`.innerHTML`将字符串写入 HTML 页面。我需要有类似的东西并在页面上`&lt;`和`&gt;`旁边打印。但是，始终打印为. 我听说如果我以 HTML 而不是文本的形式写入页面，我可以做到这一点，但我认为是这样做的。有没有我可以使用的转义字符，或者我可以用 JS 做些什么来完成这项工作？`<``>``&lt;``<``.innerHTML`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T17:20:59.120

你需要`&lt;`写成`&amp;lt;`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T17:19:55.007

你可以在你的输出中使用`<pre>&lt;</pre>`和`<pre>&rt;</pre>`标记 `HTML`。这应该给你你正在寻找的输出。

# ember.js - Ember / Handlebars / bootstrap - 每行获得 2 个 div

> ID：14859166
> 
> 赞同：1
> 
> 时间：2013-02-13T17:18:09.277
> 
> 标签：ember.js, handlebars.js

在遍历数组中的对象时，在模板中每行获得 N 个分隔符的最佳方法是什么？基本上我需要类似下面的东西，但事先不知道数组中有多少元素。

```
<div class="row">
   <div class="span6"> 
      {{ someView }}
   </div>
   <div class="span6">
      {{ someView }}
   </div>
</div>
<div class="row">
   <div class="span6"> 
      {{ someView }}
   </div>
   <div class="span6">
      {{ someView }}
   </div>
</div> 
```

我找到[了这个链接](http://jaketrent.com/post/every-nth-item-in-handlebars-loop/)，但无法让它与最新版本的 Ember 和 Handlebars 一起使用。有没有人这样做过？

# python - Jinja2 渲染自定义视图

> ID：14859167
> 
> 赞同：0
> 
> 时间：2013-02-13T17:18:10.400
> 
> 标签：python, flask, jinja2

我正在用flask-python开发一个网站。我在一个变量中创建了一个html文件。我可以渲染这个变量而不是写render_template（'index.html'）吗？这是我的代码：

```
 replacedView = rc.replaceActions() 
```

现在replacedView有一个html文件的代码。我的目的是说jinja2渲染这个。可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T17:48:06.243

我已经解决了我的问题。答案很简单。最后我有一个变量，里面有 html。所以我返回了它。所以有它！

```
return replacedView 
```

# javascript - 在javascript中设置变量

> ID：14859170
> 
> 赞同：0
> 
> 时间：2013-02-13T17:18:19.197
> 
> 标签：javascript, jquery, ios, jquery-mobile

我需要在基于 A 标签 ID 的 javascript 片段上创建，窗口将导航到正确的 html 文件。我有一些东西，当我看它时，它应该可以工作，但由于某种原因它没有。这就是我得到的。

```
<script> 
    $(document).bind('pageinit', function() { 
        $('a').each(function (index){
            var elementId = $(this).attr("id"); 
            elementId= elementId + '.html';
            $(function(){ 
                $(elementId).click(function (event) { 
                    event.preventDefault(); 
                    window.location.assign(elementId); 
                }); 
            }); 
        });
    }); 
</script> 
```

这部分是为了让我可以在 ios Web 应用程序中加载外部 html 而无需退出 Web 应用程序窗口

```
$(function(){ $(elementId).click(function (event) { 
    event.preventDefault(); 
    window.location.assign(elementId); 
```

我是不是把变量写错了？任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T17:23:50.467

我会大胆猜测：

```
$(function(){ 
    $('a').on('click', function(e) {
        e.preventDefault();
        window.location.assign(this.id + '.html'); 
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T17:26:33.233

这是您那里的简化版本...

```
<script>
    $(function() {
        $("a").on("click", function(e) {
            e.preventDefault();
            window.location.href = this.id + ".html";
        });
    });
</script> 
```

# android - Android XML 样式的完整参考

> ID：14859171
> 
> 赞同：1
> 
> 时间：2013-02-13T17:18:20.213
> 
> 标签：android, android-ui

Google 的 Android 文档在类、接口等方面相对完整。但是我无法找到所有与样式相关的 XML 的完整参考——不仅是背景和填充等等，还有操作栏选项等。这样的事情是否存在，或者它真的只是分散在其他文档中?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T17:27:09.220

它并没有真正显示文档中每种样式中包含的所有选项，而只是对标签的引用。

[我发现使用 GitHub 是最好的选择](https://github.com/android/platform_frameworks_base/blob/master/core/res/res/values/styles.xml)：-\

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T18:21:08.997

作为 hwrdprkns 答案的补充，我建议使用适用于 Chrome 的 Android Resource Navigator。它是一个扩展，允许您在 URL 栏/多功能框中键入“arn”，然后开始搜索您想要的任何资源（XML 样式）。当您单击任何结果时，它会在您选择一个时将您连接到 GitHub。

[https://chrome.google.com/webstore/detail/android-resource-navigato/agoomkionjjbejegcejiefodgbckeebo](https://chrome.google.com/webstore/detail/android-resource-navigato/agoomkionjjbejegcejiefodgbckeebo)

# django - django admin changelist foreignKey from frreignKey sortable

> ID：14859172
> 
> 赞同：0
> 
> 时间：2013-02-13T17:18:20.740
> 
> 标签：django, django-admin

我有这个模型：

```
class Project(models.Model):
    name = models.CharField()

class Task(models.Model):
    title = models.CharField()
    project = models.ForeignKey('Project')

class Activity(models.Model):
    title = models.CharField()
    task = models.ForeignKey('Task') 
```

在 Activity 的更改列表中，我想显示一个带有 Project.name 的列。是否可以显示内容并使该列**可排序**？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T03:14:06.200

```
class ActivityAdmin(admin.ModelAdmin):
    list_display = [
        'title',
        'task',
        'project',
    ]

    def project(self, obj):
        return obj.task.project.name

    project.admin_order_field = 'task__project__name'

admin.site.register(Activity, ActivityAdmin) 
```

# javascript - 将 .NET DateTime 转换为 Javascript 日期

> ID：14859176
> 
> 赞同：4
> 
> 时间：2013-02-13T17:18:31.647
> 
> 标签：javascript, wcf, date, datetime

我有一个 WCF 服务，可以为我的 javascript 提供一些日期。我想操纵日期，但它在 javascript 中看起来像这样：

```
/Date(1361145600000+0000)/ 
```

我知道这是自 1970/01/01 以来的毫秒数，但我无法弄清楚如何将其转换为 javascript 日期。

我是否需要使用正则表达式或修剪文本来提取毫秒，然后像这样使用它：

```
new Date(miliseconds) 
```

当然必须有更简单的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T18:17:03.820

如果“+0000”是标准时区偏移量，则前 2 位是小时，后两位是分钟。

大概它并不总是'0000'-

您需要将 UTC 的毫秒差添加（或减去）到第一个整数部分以返回正确的日期。

```
 function timeconvert(ds){
        var D, dtime, T, tz, off,
        dobj= ds.match(/(\d+)|([+-])|(\d{4})/g);
        T= parseInt(dobj[0]);
        tz= dobj[1];
        off= dobj[2];
        if(off){
            off= (parseInt(off.substring(0, 2), 10)*3600000)+
(parseInt(off.substring(2), 10)*60000);
            if(tz== '-') off*= -1;
        }
        else off= 0;
        return new Date(T+= off).toUTCString();
    }
    timeconvert('Date(1361145600000)+0000'); 
```

//返回值：（字符串UTC）

**格林威治标准时间 2013 年 2 月 18 日星期一 00:00:00**

如果日期**始终**为 UTC（'+0000'），您可以从字符串中提取有效数字 -

```
 function timeconvert(ds){
        var d=ds.match(/(\d+)/)[1];
        return new Date(+d).toUTCString();
    }
    timeconvert('Date(1361145600000)+0000)');

// returned value: (String UTC)

Mon, 18 Feb 2013 00:00:00 GMT 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-05-29T12:07:05.377

kennebec 提出的代码有一个错误，其日期低于 1​​970 年 1 月 1 日。例如，Date(-124054000000+0300) 是 Wed Jan 26 1966 07:33:20

固定代码： [http ://output.jsbin.com/cejolu/3/edit?js,console](http://output.jsbin.com/cejolu/3/edit?js,console)

```
function timeconvert(ds){
    var D, dtime, T, tz, off,
        dobj = ds.match(/(-?\d+)|([+-])|(\d{4})/g);

    T = parseInt(dobj[0], 10);
    tz = dobj[1];
    off = dobj[2];

    if (off) {
        off = (parseInt(off.substring(0, 2), 10) * 3600000) + (parseInt(off.substring(2), 10) * 60000);
        if(tz == '-') off *= -1;
    }
    else off= 0;
    return new Date(T += off).toUTCString();
} 
```

测试最新的变化：

```
console.log(timeconvert("Date(-124054000000+0300)"));
console.log(timeconvert('Date(1361145600000)+0000'));
console.log(timeconvert("Date(0+0300)"));
console.log(timeconvert("Date(-2+0200)"));
console.log(timeconvert("Date(-860000000000+1100)"));

/* Output */

"Wed, 26 Jan 1966 07:33:20 GMT"
"Mon, 18 Feb 2013 00:00:00 GMT"
"Thu, 01 Jan 1970 03:00:00 GMT"
"Thu, 01 Jan 1970 01:59:59 GMT"
"Thu, 01 Oct 1942 18:06:40 GMT" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-13T17:48:57.157

您可以使用以下代码创建 javascript 日期：

```
var d = new Date("1/1/2012") 
```

因此，只需将您的 .Net 日期提供为以下格式即可：

```
new DateTime().ToString("M/d/yyyy") 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-14T09:34:36.773

我找到了另一种方法，稍微改编自肯尼贝克的回答：

```
function timeConvert(date){
    var miliseconds = date.replace(/(^.*\()|([+-].*$)/g, '');
    miliseconds = parseInt(miliseconds);
    return new Date(miliseconds);
}

var x = timeConvert("/Date(1361145600000+0000)/");
console.log(x); 
```

# php - 使用 PHP 和 twitter API 将图像上传到 twitter 配置文件标题

> ID：14859177
> 
> 赞同：1
> 
> 时间：2013-02-13T17:18:33.137
> 
> 标签：php, twitter

几个月前，推特推出了新的个人资料设计，您可以在其中拥有像 facebook 一样的个人资料标题图像。

我知道可以使用 API 上传图片。我到处搜索，但我找不到如何做到这一点。

正是我想要这样做：如果我的服务器中有图像，我只想使用 php 将其上传到 twitter 标题图像。

如果有人知道这样做的方法，请告诉我。提前致谢。

# paypal - 如何为 PayflowPro Express Checkout 设置订单摘要？

> ID：14859184
> 
> 赞同：1
> 
> 时间：2013-02-13T17:18:53.363
> 
> 标签：paypal, payflowpro

我想显示这样的项目的描述： ![在此处输入图像描述](../Images/97c62a3729db923e10dfb10ae8ea055a.png)

我根据这篇[文章](https://www.x.com/developers/community/blogs/pp_integrations_preston/testing-paypal-payflow-gateway)编写了我的解决方案，并附在这个 asp.net 解决方案上。

但是，在 PayPal 登录页面上（如第一张图片），我只看到购买和金额（与第一张图片不同）。

我使用这些 URL 来创建交易：

*   沙盒 - [https://pilot-payflowpro.paypal.com/](https://pilot-payflowpro.paypal.com/)
*   直播 - [https://payflowpro.paypal.com](https://payflowpro.paypal.com)

要设置交易，我发送以下参数：

*   “伙伴”
*   “小贩”
*   “用户”
*   “残疾人”
*   “TRX类型”
*   “AMT”
*   “货币”
*   “创建安全令牌”
*   “SECURETOKENID”
*   “返回网址”
*   “取消网址”
*   “错误网址”
*   “冗长”
*   “比尔托第一名”
*   “BILLTOLASTNAME”
*   “比尔街”
*   “比尔托克城”
*   “比尔托斯塔特”
*   “BILLTOZIP”
*   “比尔托国家”
*   “船名”
*   “船舶名称”
*   “船街”
*   “船城”
*   “船国”
*   “SHIPTOZIP”
*   “船国”

我尝试使用这些参数定义行项目描述：

*   “L_QTYn”
*   “L_NAMEn”
*   “L_DESCn”
*   “L_COSTn”
*   “L_TAXAMTn”

where `n`- 0 或 1 的行号（我现在不记得了）

我也尝试过这些参数：

*   “L_PAYMENTREQUEST_m_NAMEn”
*   “L_PAYMENTREQUEST_m_NUMBERn”
*   *... 等等*

在所有情况下，我都没有得到任何改变。

那么，我错过了什么？是否可以显示 PayflowPro Express Checkout 的项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T19:12:34.807

感谢您参考我的文章 :)

要通过 Payflow 传递 EC 行项目，有两种解决方案：

A) 联系 www.paypal.com/mts 并要求他们切换启用 EC 行项目的功能位图

B）将此添加到您的请求中：“_TRAILER_PASSTHROUGH__=Y”

请注意，(B) 可以将您从 Payflow 收到的响应格式更改为具有值长度标签，即 NAME[5]=VALUE 而不是 NAME=VALUE，因此请进行相应解析...

（特别是当从 PayPal 返回的 VALUE 中包含特殊字符（例如“&”）时会发生这种情况，因此您不能简单地将字符串拆分为“&”）

# iphone - 未找到 Cocos2d 2.0 实例方法；接收者是前锋类

> ID：14859185
> 
> 赞同：0
> 
> 时间：2013-02-13T17:18:56.300
> 
> 标签：iphone, ios, xcode, methods, cocos2d-iphone

我的 GameScene.m 文件：

```
#import "GameScene.h"

// Needed to obtain the Navigation Controller
#import "AppDelegate.h"

#pragma mark - GameScene

// GameScene implementation
@implementation GameScene

// on "init" you need to initialize your instance
-(id) init
{
self = [super init];
if (self != nil)
{
    [self addChild:[GameLayer node]];
}
return self;
}

- (void) dealloc
{
[super dealloc];
}

@end
@implementation GameLayer
@synthesize hero;

-(id) init
{
if( (self=[super init] )) 
{
    hero = [[Hero alloc] initWithGame:self];
}
return self;
}

-(void) dealloc
{
[super dealloc];
}

@end 
```

我的 GameScene.h 文件：

```
#import <GameKit/GameKit.h>

// When you import this file, you import all the cocos2d classes
#import "cocos2d.h"

// GameScene
@interface GameScene : CCScene 
{
}

@end

@class Hero;

@interface GameLayer : CCLayer
{
Hero * _hero;

NSMutableArray * _bullets;
bool _playerFiring;

NSMutableArray * _enemies;
float _lastTimeEnemyLaunched;
float _enemyInterval;

int _score;
int _lives;
int _bombs;
int _level;
}

@property (nonatomic,retain) Hero * hero;
@property (nonatomic,readwrite) bool playerFiring;
@property (nonatomic,readwrite) float lastTimeEnemyLaunched;
@property (nonatomic,readwrite) float enemyInterval;
@property (nonatomic,retain) NSMutableArray * enemies;
@property (nonatomic,retain) NSMutableArray * bullets;
@property (assign,readwrite) int score;
@property (assign,readwrite) int lives;
@property (assign,readwrite) int bombs;
@property (assign,readwrite) int level;

@end 
```

我的 Hero.h 文件：

```
#import <Foundation/Foundation.h>
#import "cocos2d.h"
#import "GameScene.h"

@class GameLayer;

@interface Hero : CCNode
{
CCSprite * mySprite;
GameLayer * theGame;
float _lastTimeFired;
float _fireInterval;
float _firingSpeed;
float _movementSpeed;
}

@property (nonatomic,retain) CCSprite * mySprite;
@property (nonatomic,retain) GameLayer * theGame;
@property (nonatomic,readwrite) float lastTimeFired;
@property (nonatomic,readwrite) float fireInterval;
@property (nonatomic,readwrite) float firingSpeed;
@property (nonatomic,readwrite) float movementSpeed;

@end 
```

还有我的 Hero.m 文件：

```
#import "Hero.h"

@implementation Hero

@synthesize theGame,mySprite;

-(id) initWithGame:(GameLayer *)game
{
self = [super init];
if(self != nil)
{

    // ask director for the window size
    CGSize size = [[CCDirector sharedDirector] winSize];

    self.theGame = game;
    mySprite = [CCSprite spriteWithFile:@"hero.png"];
    [theGame addChild:mySprite z:2];
    [mySprite setPosition:ccp(size.width/2,50)];

    self.lastTimeFired = 0;
    self.fireInterval = 3;
    self.firingSpeed = 10;
    self.movementSpeed = 5;

}
return self;
}

-(void) dealloc
{
[super dealloc];
}

@end 
```

这是我的问题：我收到两个警告 - 1.“未找到实例方法 -initWithGame（返回类型默认为 'id'）”和 2.“接收者 'Hero' 是一个转发类，对应的 @interface 可能不存在”

我尝试在 Hero.h 界面中添加“-(id) initWithGame:(GameLayer *)game” 行，但它不起作用。我尝试添加该行，但使用 + 而不是 -，但什么也没有。

我最终没有在屏幕上显示我的英雄。有谁知道如何解决这个问题（我使用最新版本的 Xcode）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T17:40:20.187

中`GameScene.m`，你应该

```
#import "Hero.h" 
```

这解释了为什么会收到“前向类”警告：由于您没有导入标头，因此编译器在 GameScene 编译单元中唯一知道的就是前向声明。

一旦你这样做了，如果你也在`initWithGame`Hero.h 中声明，那么你将不会收到任何警告。

# c# - C#下拉列表默认值

> ID：14859191
> 
> 赞同：0
> 
> 时间：2013-02-13T17:19:25.070
> 
> 标签：c#, drop-down-menu

我正在使用此代码将数据库表中的值输入到下拉列表中：

```
<div class="editor-field">
        @Html.DropDownListFor(model => model.TourImageID, new SelectList(Model.Images, "ImageID", "Filename", Model.TourImageID))
</div> 
```

我想要做的是将一个项目添加到列表的顶部，该项目不存在于数据库表中。

就像是`DROPDOWN LIST VALUES = (DEFAULT-ITEM) + (DATABASE-TABLE-ITEMS)`

那可能吗？如果是这样，如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T17:29:51.107

如果你`Model.Images`是 type `SelectList`，你可以在你的控制器中做这样的事情：

```
var query = UnitOfWork.GlobalImageLibraryRepository.Images.Select(x => new { x.ImageID, x.Filename });

viewModel.Images = new SelectList(query.AsEnumerable(), "ImageID", "Filename");
viewModel.Images.Insert(0, new SelectListItem { Value = "0", Text = "--Select--" }); 
```

我假设您的 GlobalImageLibraryRepository 类中有一个方法返回`IQueryable<Images>`如下：

```
public IQueryable<Images> Images { get { return dbcontext.Images; } } 
```

所以毕竟，您的视图将如下所示：

```
<div class="editor-field">
        @Html.DropDownListFor(model => model.TourImageID, (SelectList)Model.Images, Model.TourImageID))
</div> 
```

# c++ - 文件输入和处理数据

> ID：14859194
> 
> 赞同：0
> 
> 时间：2013-02-13T17:19:35.433
> 
> 标签：c++, ifstream

我想从文本文件中读取，文件的格式是

方法 1
方法 2
插入 3 “James Tan”

我目前正在使用 ifstream 打开文本文件并读取项目，但是当我使用 >> 读取行时，这导致名称没有被完全读取为“James Tan”。下面附上代码和输出。

```
ifstream fileInput; 

  if(fileInput.is_open()){
       while(fileInput.good()){
  fileInput >>methondName>>value>>Name;
    ...... 
```

输出

```
methodName = Method, Method, Insert
value = 1, 2, 3 (must be a usigned integer)
Name = James 
```

处理读取行和内容的更好方法是什么。有人告诉我getline。但我知道 getline 完全读取为一行，而不是一个单词一个单词。

接下来是 fstream 真的快吗？因为，我想处理 500000 行数据，如果 ifstream 不快，我还有什么其他选择。

请就此提出建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T17:29:50.387

> > 方法 1
> > 方法 2
> > 插入 3 “James Tan”

我认为您的意思是该文件由几行组成。每行要么以单词“Method”或单词“Insert”开头，在每种情况下都后跟一个数字。此外，以“插入”开头的行末尾有一个多词名称。

是对的吗？如果是这样，请尝试：

```
ifstream fileInput("input.txt");
std::string methodName;
int value;
while ( fileInput >> methodName >> value ) {
  std::string name;
  if(methodName == "Insert")
    std::getline(fileInput, name);

  // Now do whatever you meant to do with the record.
  records.push_back(RecordType(methodName, value, name); // for example
} 
```

# entity-framework - 实体框架 - 错误 11007：实体类型未映射。

> ID：14859196
> 
> 赞同：40
> 
> 时间：2013-02-13T17:19:53.730
> 
> 标签：entity-framework

当我获得最新的 .edmx 时，我遇到了问题。

我收到一条消息，显示错误 11007：未映射实体类型“pl_Micro”。查看设计器视图，我确实看到该表确实存在。

我怎样才能克服这个消息？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-13T17:22:31.723

来自 MSDN：

> 错误 11007：实体类型未映射

当概念模型中的实体类型未映射到数据源时，会发生此错误。要解决此错误，请将实体类型映射到数据源。查看 MSDN 链接

[如何：将实体映射到数据库表](http://msdn.microsoft.com/en-us/library/bb738478%28v=vs.103%29.aspx)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-01-18T12:07:06.850

当我将数据库表移动到不同的架构或删除数据库表时，我会收到此错误。*在这种情况下，当您从数据库更新模型*时，实体框架似乎没有正确更新 edmx 文件...。

我解决这个问题的方法是对违规实体的名称进行文本搜索。然后，我删除了 edmx 文件的 xml 视图中对此的所有引用，删除了定义实体的相应 cs 文件，以及项目中的任何其他引用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-07-29T11:39:51.007

这个错误是由 SQL Server 身份验证服务器传递给我的，它没有必要的权限并且看不到实体。

确认您的 sql 用户在数据库中具有必要的权限。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-10-18T09:54:04.950

当您通过 edmx 中的图表导入表然后将 app.config 指向不同的数据库实例时，也会发生这种情况（例如，从 dev db 切换到 test db）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-01-16T13:11:16.590

我收到此错误是因为我复制粘贴了一个实体并对其进行了修改。重新启动视觉工作室解决了这个问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-01-24T20:36:15.257

正确，关闭视觉学习，用notepad++、sublime text、notepad等输入*.edmx文件，查表、查列并修改列大小（MaxLength），在所有匹配中，我的情况是2，但他们可以更多。启动 Visual Studio，更改已被接受。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-12-14T07:39:32.023

我收到此错误是因为我必须更新表列类型。刷新 SQL Server 中的表并在实体框架中重新添加表以解决此问题。

# java - Java Web Start - JNLP 资源 - 罐子和类？

> ID：14859198
> 
> 赞同：2
> 
> 时间：2013-02-13T17:20:02.053
> 
> 标签：java, jnlp, java-web-start

我远非 Java 专家，所以请多多包涵。:)

我也用谷歌搜索并阅读了三天的文档，但这对我来说仍然不清楚，所以请不要投票给我。:)

我正在处理一个尝试通过 Java Web Start 部署我们的应用程序的项目。我能够让“HelloWorld”应用程序工作，但不是我们的项目。我认为问题出在我的 jnlp 文件中的资源标签上，但我不确定。

在我的第一次尝试中，JNLP 加载器说它找不到 log4j 库，即使它在指定的位置。我的技术负责人说问题可能是 Java 实际上在寻找其他 jar 文件，但只抛出 log4j 错误，因为它是应用程序的第一步。我将所有 jars 添加到资源部分，现在加载器关闭，根本没有给出任何消息。（你可以在这里试试 - [http://www.powellportfolio.net/test/webstarttest/Match.jnlp](http://www.powellportfolio.net/test/webstarttest/Match.jnlp)）

我需要列出资源中的每个 jar 文件吗？

我是否还需要包含类的标签？如果是这样，我需要为它们创建一个 jar 文件，还是单独链接它们？我试着震慑他们，但这可能是错误的方法。

你知道为什么装载机在没有任何消息的情况下关闭吗？

你有什么其他的建议？

这是我的 jnlp 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<jnlp spec="1.0+" codebase="http://www.powellportfolio.net/test/webstarttest/" href="Match.jnlp">
    <information>
        <title>Jnlp Testing</title>
        <vendor>My Company</vendor>
        <homepage href="http://www.powellportfolio.net/test/webstarttest/" />
        <description>Testing Testing</description>
                                <offline-allowed/>
    </information>
    <resources>
        <j2se version="1.6+" />
        <jar href="Match.jar" />
                                <jar href="Match_lib/commons-cli-1.2.jar" />
        <jar href="Match_lib/dcm4che-audit-2.0.26.jar" />
        <jar href="Match_lib/dcm4che-base64-2.0.26.jar" />
        <jar href="Match_lib/dcm4che-core-2.0.26.jar" />
        <jar href="Match_lib/dcm4che-filecache-2.0.26.jar" />
        <jar href="Match_lib/dcm4che-hp-2.0.26.jar" />
        <jar href="Match_lib/dcm4che-image-2.0.26.jar" />
        <jar href="Match_lib/dcm4che-imageio-2.0.26.jar" />
        <jar href="Match_lib/dcm4che-imageio-rle-2.0.26.jar" />
        <jar href="Match_lib/dcm4che-iod-2.0.26.jar" />
        <jar href="Match_lib/dcm4che-net-2.0.26.jar" />
        <jar href="Match_lib/dcm4che-soundex-2.0.26.jar" />
        <jar href="Match_lib/dcm4che-tool-dcm2dcm-2.0.26.jar" />
        <jar href="Match_lib/dcm4che-tool-dcm2jpg-2.0.26.jar" />
        <jar href="Match_lib/dcm4che-tool-dcm2txt-2.0.26.jar" />
        <jar href="Match_lib/dcm4che-tool-dcm2xml-2.0.26.jar" />
        <jar href="Match_lib/dcm4che-tool-dcmdir-2.0.26.jar" />
        <jar href="Match_lib/dcm4che-tool-dcmecho-2.0.26.jar" />
        <jar href="Match_lib/dcm4che-tool-dcmgpwl-2.0.26.jar" />
        <jar href="Match_lib/dcm4che-tool-dcmhpqr-2.0.26.jar" />
        <jar href="Match_lib/dcm4che-tool-dcmmv-2.0.26.jar" />
        <jar href="Match_lib/dcm4che-tool-dcmmwl-2.0.26.jar" />
        <jar href="Match_lib/dcm4che-tool-dcmof-2.0.26.jar" />
        <jar href="Match_lib/dcm4che-tool-dcmqr-2.0.26.jar" />
        <jar href="Match_lib/dcm4che-tool-dcmrcv-2.0.26.jar" />
        <jar href="Match_lib/dcm4che-tool-dcmsnd-2.0.26.jar" />
        <jar href="Match_lib/dcm4che-tool-dcmups-2.0.26.jar" />
        <jar href="Match_lib/dcm4che-tool-dcmwado-2.0.26.jar" />
        <jar href="Match_lib/dcm4che-tool-fixjpegls-2.0.26.jar" />
        <jar href="Match_lib/dcm4che-tool-jpg2dcm-2.0.26.jar" />
        <jar href="Match_lib/dcm4che-tool-logger-2.0.26.jar" />
        <jar href="Match_lib/dcm4che-tool-pdf2dcm-2.0.26.jar" />
        <jar href="Match_lib/dcm4che-tool-rgb2ybr-2.0.26.jar" />
        <jar href="Match_lib/dcm4che-tool-txt2dcmsr-2.0.26.jar" />
        <jar href="Match_lib/dcm4che-tool-xml2dcm-2.0.26.jar" />
        <jar href="Match_lib/derby.jar" />
        <jar href="Match_lib/derbyclient.jar" />
        <jar href="Match_lib/derbyLocale_cs.jar" />
        <jar href="Match_lib/derbyLocale_de_DE.jar" />
        <jar href="Match_lib/derbyLocale_es.jar" />
        <jar href="Match_lib/derbyLocale_fr.jar" />
        <jar href="Match_lib/derbyLocale_hu.jar" />
        <jar href="Match_lib/derbyLocale_it.jar" />
        <jar href="Match_lib/derbyLocale_ja_JP.jar" />
        <jar href="Match_lib/derbyLocale_ko_KR.jar" />
        <jar href="Match_lib/derbyLocale_pl.jar" />
        <jar href="Match_lib/derbyLocale_pt_BR.jar" />
        <jar href="Match_lib/derbyLocale_ru.jar" />
        <jar href="Match_lib/derbyLocale_zh_CN.jar" />
        <jar href="Match_lib/derbyLocale_zh_TW.jar" />
        <jar href="Match_lib/derbynet.jar" />
        <jar href="Match_lib/derbyrun.jar" />
        <jar href="Match_lib/derbytools.jar" />
        <jar href="Match_lib/log4j-1.2.16.jar" />
        <jar href="Match_lib/slf4j-api-1.6.1.jar" />
        <jar href="Match_lib/slf4j-log4j12-1.6.1.jar" />
        <jar href="classes/classes.jar" />
    </resources>                
    <application-desc main-class="gui.GUIMatch" />
</jnlp> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T17:37:40.070

> 我需要列出资源中的每个 jar 文件吗？

不必要。稍后的 JWS 启动允许我们指定一个包含主类的 Jar 和一个指定主类和所有*依赖的 Jars*的清单。OTOH 我发现明确列出每个 Jar 更容易、更清晰。

*   它以人类可读的形式声明资源（如果您认为 JNLP 是“人类可读的”）。
*   它允许延迟或以编程方式加载一些 Jars。如果清单中列出，Jar 会被急切地下载。

> 我是否还需要包含类的标签？如果是这样，我需要为它们创建一个 jar 文件，还是单独链接它们？

JWS 不能部署松散的类文件，它们需要在一个 Jar 中。

> 我试着震慑他们，但这可能是错误的方法。

这是唯一可行的方法。坚持下去。

> 你知道为什么装载机在没有任何消息的情况下关闭吗？

不是马上。使用[JaNeLA](http://pscode.org/janela/)验证 JNLP并确保将[Java 控制台](http://www.java.com/en/download/help/javaconsole.xml)配置为在启动时显示。

# jax-ws - 带有 WS-Notification 的 Axis2

> ID：14859202
> 
> 赞同：0
> 
> 时间：2013-02-13T17:20:11.367
> 
> 标签：jax-ws, axis2, ws-notification

通过 Apache Axis2 实现的 JAX-WS 是否提供 WS-Notification 规范？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T09:20:38.533

根据[其模块列表](http://axis.apache.org/axis2/java/core/modules/index.html)，截至今天，Apache Axis2 支持以下 WS-* 标准：

*   WS 寻址（2005-08 版）
*   [通过Sandesha2](http://axis.apache.org/axis2/java/sandesha/index.html)实现 WS-Reliable Messaging（2005 版）
*   [通过Rampart](http://axis.apache.org/axis2/java/rampart/)的 WS-Security 和相关规范（WS-SecureConversation、WS-SecurityPolicy、WS-Trust）

因此，回答您的问题：不，Axis2 中不支持 WS-Notification。

# jquery - 如果所有字符计数器都不正常，则禁用提交按钮

> ID：14859203
> 
> 赞同：1
> 
> 时间：2013-02-13T17:20:16.920
> 
> 标签：jquery

我们有一个非常简单的单词计数器，可以很好地满足我们的需要。不过，我们现在需要对其进行修改。请在[http://jsfiddle.net/MUSXU/1上查看我们的 JSfiddle](http://jsfiddle.net/MUSXU/1)

```
(function($){
    $.fn.textareaCounter = function(options) {
        // setting the defaults
        // $("textarea").textareaCounter({ limit: 100 });
        var defaults = {
            limit: 100
        };  
        var options = $.extend(defaults, options);

        // and the plugin begins
        return this.each(function() {
            var obj, text, wordcount, limited;

            obj = $(this);
            obj.after('<span style="font-size: 11px; clear: both; margin-top: 3px; display: block;" id="counter-text">Max. '+options.limit+' words</span>');

            obj.keyup(function() {
                text = obj.val().replace(/\s+/g, " ");;
                if(text === "") {
                    wordcount = 0;
                } else {
                    wordcount = $.trim(text).split(" ").length;
                    var URLs = text.match(/([^\s])+\.(com|net|org|biz|gov|edu|mobi|info|ca|us|mil)/g);
                    if(URLs != null && URLs.length > 0){
                      wordcount += (URLs.length*2);
                    }
                }
                if(wordcount > options.limit) {
                   obj.next().html('<span style="color: #DD0000;">-' + parseInt(wordcount - options.limit, 10) + ' words left</span>');

                    $("#submit").prop('disabled', true);
                } else {
                    obj.next().html((options.limit - wordcount)+' words left');
                $("#submit").prop('disabled', false);
                } 
            });
        });
    };
})(jQuery);
$('textarea').textareaCounter({limit:15}); 
```

我们有一个问题：

1.  如果页面上的任何字符计数器超出其限制，我们需要保持禁用提交按钮。现在，按照我们的编码方式，当字数超过时，提交按钮被成功禁用，但一旦你输入下一个文本区域，它就会立即重新启用。

我不太擅长 javascript，只是为了满足我们的需要而将其组合在一起，这是我在部署它之前需要做的最后一件事。

我将不胜感激您可以提供的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T17:43:34.373

您可以使用数组来保存结果以检查验证。看到这个...

[http://jsfiddle.net/kmd97/Up9KS/](http://jsfiddle.net/kmd97/Up9KS/)

```
var res = [];

 $("#submit").prop('disabled', false);
                    $.each(res, function (index, value) {
                        if (value) {
                            $("#submit").prop('disabled', true);
                            return false;
                        } 
```

添加此位 onload 以模拟按键，这可能是实现预先验证的最干净/最简单的方法。

```
var press = jQuery.Event("keyup");
press.ctrlKey = false;
press.which = 40;
$("textarea").trigger(press); 
```

# google-apps-script - 从不同的电子表格运行 Google 电子表格脚本

> ID：14859204
> 
> 赞同：1
> 
> 时间：2013-02-13T17:20:17.863
> 
> 标签：google-apps-script, google-sheets

我有几个从多个/不同表单收集数据的电子表格，我可以根据表单提交运行绑定到该电子表格的脚本。但是，我想做的是让表单电子表格的脚本访问并运行主电子表格的脚本。主电子表格收集和处理来自几种不同形式的数据。似乎在基于编辑的主电子表格中使用触发器仅适用于用户实际编辑时，而不是当另一个电子表格向其写入数据时。谢谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T17:55:15.633

[看看这个答案](https://stackoverflow.com/questions/14164736/trigger-onedit-with-a-programmatic-edit)。它似乎

> OnEdit 触发器旨在在实际用户编辑电子表格时工作

如果这些其他工作表中的每一个都只是在主工作表中添加一行，那么您可以创建一种方式，让主工作表跟踪它知道的行数。然后你设置一个每 X 分钟运行一次的 cron，检查是否有新行，并在这些行上做它需要做的事情。

# javascript - 如何检查字符串中的最后一个字符是否为“空格”？

> ID：14859205
> 
> 赞同：8
> 
> 时间：2013-02-13T17:20:22.720
> 
> 标签：javascript, regex

[我在这个小提琴](http://jsfiddle.net/jc92619/872VH/1/)中有如下代码：

```
<span id="someid">check this phrase </span><br>
<span id="result"></span> 
```

在这里，我在“短语”一词之后放置了一个空格，但是当我放置条件语句时，它总是返回一个结果。如何检查字符串的结尾是否有空格？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-13T17:24:11.300

您可以通过以下正则表达式检查文本值是否以空格结尾：

```
/\s$/ 
```

`/\s$/`表示字符串末尾有一个空格。

**[JSFiddle](http://jsfiddle.net/872VH/2/)**

**JavaScript**

```
var mystring = $("#someid").text();

$("#someid").click( function (event) {
    if(/\s+$/.test(mystring)) {
        $("#result").text("space");    
    } else {
        $("#result").text("no space");

    }    
}); 
```

正如**jfriend00 所**注意到`\s`的，它不仅仅意味着空格，它是空格 [即也包括制表符 (\t)]

如果您只需要空间使用：`/ $/`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-11-24T07:43:08.907

一个更简单明了的解决方案是使用 .endsWith()

```
"hallo ".endsWith(" "); // true 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-13T17:33:11.133

这样做： -

```
/(.*)\s+$/ 
```

## JS：

```
var mystring = $("#someid").text();

$("#someid").click(function(event) {
    if(/(.*)\s+$/.test(mystring)) {
        $("#result").text("space");
    }
    else
    {
        $("#result").text("no space");    
    }
}); 
```

参考**[现场演示](http://jsfiddle.net/SivaCharan/872VH/7/)**

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-13T17:24:19.620

您的正则表达式`/%(?!$)/`检查不在字符串末尾的百分号，而不是空格。

> 如何检查字符串的结尾是否有空格？

使用`/\s$`/。

# php - 如果它们在同一个字符串中多次出现，如何将 < 替换为 >= 和 > 替换为 <= 并将 <= 替换为 > 和 >= 替换为 <？

> ID：14859207
> 
> 赞同：2
> 
> 时间：2013-02-13T17:20:30.023
> 
> 标签：php, preg-replace, str-replace

我正在用 PHP 做这个。我有一个这样的字符串：“AND day_1 >= day_2 AND day_1 < day_3”，我想用 < 替换第一个 >= ，我想用 >= 替换第二个 <

换句话说，我想反转日期范围逻辑：

“AND day_1 >= day_2 AND day_1 < day_3”

我想反转看起来像这样：

“AND day_1 < day_2 AND day_1 >= day_3”

这是我的代码：

```
$str = "AND day_1 >= day_2 AND day_1 < day_3";
echo "{$str}<br>";
$old_replace = array(">=", "<=", "<", ">");
$new_replace = array("<", ">", ">=", "<=");
$count = 1;
$str = str_replace($old_replace, $new_replace, $str, $count);
echo $str; 
```

当我尝试使用字符串替换时，它会这样做：

替换前：AND day_1 >= day_2 AND day_1 < day_3 替换后：AND day_1 <== day_2 AND day_1 <== day_3

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T17:25:06.293

尝试这个：

```
$replacements = Array("<="=>">",">="=>"<","<"=>">=",">"=>"<=");
$str = strtr($str,$replacements); 
```

# javascript - 在 HTML 中显示和突出显示特定行

> ID：14859208
> 
> 赞同：0
> 
> 时间：2013-02-13T17:20:31.130
> 
> 标签：javascript, html

我正在尝试实现一个应该具有以下属性的网页。

1.  HTML 页面包含多行文本（数千行），基本上是一个日志文件。
2.  在执行所需操作时，与该操作相关的行应突出显示并显示。（如果您单击 chrome 检查元素中记录的变量的相应源按钮，就会发生这种情况。）

这似乎很基本，但我不知道怎么做！可能是我遗漏了一些文学术语。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T17:25:02.087

有很多方法可以解决这个问题。但是记录的源代码中是否有任何类标签，或者只是一个大文本块？

如果 html 上有 class 或 id 标签，您可以使用 javascript 或 jquery 来执行此操作。

```
document.getElementById('myText'); 
```

或在jQuery中

```
var element = $("#myText");
//example css changes
element.css("position","center");
element.css("color","red"); 
```

然后更改这些 html 元素的 css 样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T17:52:51.423

你需要做几件事：

```
$("li").each(function(i, element) {
  var li = $(element);

  if (li.text() == "Orange") {
    li.addClass("selected");

    // Get position of selected element relative to top of document
    var position = li.offset().top;

    // Get the height of the window
    var windowHeight = $(window).height();

    // Scroll to and center the selected element in the viewport
    $("body").scrollTop(position - (windowHeight/2));
  }
}); 
```

见[演示](http://jsfiddle.net/zaknotzak/B25Ah/1/)。

# php - 在 php 字符串中包含一个 php 变量

> ID：14859210
> 
> 赞同：0
> 
> 时间：2013-02-13T17:20:38.767
> 
> 标签：php

这对你们中的许多人来说一定很简单。

```
<?php if (stripos($_SERVER['REQUEST_URI'],'/thispage/') !== false) {echo 'This page content';} ?> 
```

但我想在“thispage”中设置这个“$thisproduct['alias']”，该怎么做？

我试着像这样添加它：

```
<?php if (stripos($_SERVER['REQUEST_URI'],'/$thisproduct['alias']/') !== false) {echo 'This page content';} ?> 
```

但它给出了这个错误：解析错误：语法错误，意外的T_STRING

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T17:22:29.463

你会这样做：

```
<?php if (stripos($_SERVER['REQUEST_URI'], "/{$thisproduct['alias']}/") !== false) {echo 'This page content';} ?> 
```

强调`"/{$thisproduct['alias']}/"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T17:22:16.373

所以你想通过使用来构造字符串`.`

```
stripos($_SERVER['REQUEST_URI'],'/'.$thisproduct['alias'].'/') 
```

或双引号评估变量

```
stripos($_SERVER['REQUEST_URI'],"/{$thisproduct['alias']}/") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T17:35:24.500

由于您使用的是单引号，因此您的变量被视为字符串，而不是变量实际包含的值。

有道理？

```
$array = array('foo' => 'bar);

echo $array;            //array()
echo $array['foo'];     //bar
echo '$array[\'foo\']'; //array['foo']
echo "{$array['foo']}"; //bar 
```

ETC

如果您不是专门寻找*/alias/*而只是寻找*别名，最好用这个来处理*

```
// were $thisproduct['alias'] is now treated as a variable, not a string
if (FALSE !== stripos($_SERVER['REQUEST_URI'], $thisproduct['alias'])) 
{
    echo 'This page content';
} 
```

除此以外

```
if (FALSE !== stripos($_SERVER['REQUEST_URI'], "/{$thisproduct['alias']}/")) 
{
    echo 'This page content';
} 
```

如果你想要*/别名/*

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-13T17:23:33.047

试试下面的：

```
"this is a text and this is a $variable " ; // using double quotes or 
"this is a test and this is a {$variable} "; // or 
"this is a test and this is a ". $variable ; 
```

因此，对于您的情况，您可以这样做：

```
<?php if (stripos($_SERVER['REQUEST_URI'], "/{$thisproduct['alias']}/") !== false) {echo 'This page content';} ?> 
```

以下来自： http: [//php.net/manual/en/language.types.string.php](http://php.net/manual/en/language.types.string.php)

```
<?php
// Show all errors
error_reporting(E_ALL);

$great = 'fantastic';

// Won't work, outputs: This is { fantastic}
echo "This is { $great}";

// Works, outputs: This is fantastic
echo "This is {$great}";
echo "This is ${great}";

// Works
echo "This square is {$square->width}00 centimeters broad."; 

// Works, quoted keys only work using the curly brace syntax
echo "This works: {$arr['key']}";

// Works
echo "This works: {$arr[4][3]}";

// This is wrong for the same reason as $foo[bar] is wrong  outside a string.
// In other words, it will still work, but only because PHP first looks for a
// constant named foo; an error of level E_NOTICE (undefined constant) will be
// thrown.
echo "This is wrong: {$arr[foo][3]}"; 

// Works. When using multi-dimensional arrays, always use braces around arrays
// when inside of strings
echo "This works: {$arr['foo'][3]}";

// Works.
echo "This works: " . $arr['foo'][3];

echo "This works too: {$obj->values[3]->name}";

echo "This is the value of the var named $name: {${$name}}";

echo "This is the value of the var named by the return value of getName(): {${getName()}}";

echo "This is the value of the var named by the return value of \$object->getName(): {${$object->getName()}}";

// Won't work, outputs: This is the return value of getName(): {getName()}
echo "This is the return value of getName(): {getName()}";
?> 
```

# sql - 使用动态 SQL 或 SQL Server INFORMATION_SCHEMA 上的相关子查询从许多表中查询列

> ID：14859217
> 
> 赞同：0
> 
> 时间：2013-02-13T17:20:50.480
> 
> 标签：sql, sql-server, dynamic-sql, information-schema, correlated-subquery

我想列出`Manufacturers`在 SQL Server 数据库中识别的所有内容。

其中有许多带有制造商名称的表，但它们并不总是在一个命名良好的列中。但是，列名*是*LIKE `%manuf%`。

所以：

```
SELECT TABLE_NAME, COLUMN_NAME 
FROM INFORMATION_SCHEMA.COLUMNS 
WHERE COLUMN_NAME LIKE '%manuf%' 
ORDER BY TABLE_NAME; 
```

获取我要查询的表列表和要查询的列名。

我现在如何从这些表中查询制造商名称？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T17:30:21.120

如果您希望所有这些都在一个结果集中返回，您可以使用此查询：

```
DECLARE @cmd NVARCHAR(MAX);

SET @cmd = STUFF((
SELECT ' UNION ALL SELECT '+QUOTENAME(COLUMN_NAME)+' FROM '+QUOTENAME(TABLE_NAME)
FROM INFORMATION_SCHEMA.COLUMNS 
WHERE COLUMN_NAME LIKE '%manuf%' 
ORDER BY TABLE_NAME
FOR XML PATH(''),TYPE
).value('.','NVARCHAR(MAX)'),1,11,'')
;

EXEC( @cmd); 
```

这要求它们都是 (n)varchar 数据类型。如果遇到问题，请添加演员表：

```
SELECT ' UNION ALL SELECT CAST('+QUOTENAME(COLUMN_NAME)+' AS NVARCHAR(MAX)) FROM '+QUOTENAME(TABLE_NAME) 
```

这似乎是一个非常奇怪的数据库设计。你可能想重新审视...

* * *

如果`INFORMATION_SCHEMA`不适合你使用这个：

```
DECLARE @cmd NVARCHAR(MAX);

SET @cmd = STUFF((
SELECT ' UNION ALL SELECT '+QUOTENAME(c.name)+' FROM dbo.'+QUOTENAME(t.name)
FROM sys.columns c
JOIN sys.tables t
ON c.object_id = t.object_id
WHERE c.name LIKE '%name%' 
AND t.is_ms_shipped = 0
ORDER BY t.name
FOR XML PATH(''),TYPE
).value('.','NVARCHAR(MAX)'),1,11,'')
;

EXEC( @cmd); 
```

虽然`INFORMATION_SCHEMA`是 ANSI 标准的一部分，但使用 SQL Server 目录视图通常是首选方式。

* * *

还有一件事：如果`INFORMATION_SCHEMA`返回不正确的结果，您可能会发生某种损坏，您应该通过`DBCC CHECKDB`在该数据库中运行来检查。

# struts2 - 显示标签在 Weblogic 9.2 上不工作，但在 Weblogic 11g 上工作正常

> ID：14859218
> 
> 赞同：1
> 
> 时间：2013-02-13T17:20:53.220
> 
> 标签：struts2, displaytag, weblogic11g, weblogic9.x

我有一个显示表写为

```
 <display:table name="${someList}" class="displayTagTable" 
             uid="service" requestURI="" defaultsort="2"> 
```

当部署在 Weblogic 11g 上时，此实现工作正常。但是，如果部署在 Weblogic 9.2 上，该表不会显示任何内容。我也没有任何错误。

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-02T14:29:45.577

我确实通过完全删除 EL 表达式解决了这个问题。出于某种原因，如果部署在 Weblogic 9.2 中，EL 表达式在 displayTag 中不起作用

# c++ - OpenMP 刷新与刷新（列表）

> ID：14859219
> 
> 赞同：2
> 
> 时间：2013-02-13T17:20:53.137
> 
> 标签：c++, openmp

在 OpenMP 中，我可以刷新一组指定的变量或整个缓存。

有人知道这个操作的性能吗？仅刷新真正发生变化的变量是否有意义，或者“全部刷新”如此之快，我不应该担心？

我有链接列表，我需要不时刷新我的线程。我应该遍历列表并单独刷新每个元素，还是简单地刷新所有内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T19:41:41.103

Given the advice in the OpenMP 3.1 standard:

> Use of a **flush** construct with a list is extremely error prone and users are strongly discouraged from attempting it.

and the following sentence:

> An implementation may implement a **flush** with a list by ignoring the list, and treating it the same as a **flush** without a list.

I would implement first a solution with `pragma omp flush` (without any list).

Then, I would really think carefully before trying to optimize this implementation adding a list to flush constructs, as the code *won't be performance portable*.

# perl - Perl WWW:Mechanize 访问散列引用中的数据

> ID：14859222
> 
> 赞同：-1
> 
> 时间：2013-02-13T17:21:01.927
> 
> 标签：perl, hash, www-mechanize, hashref

**我有一个问题希望你能帮忙？**

这是我在理解哈希引用方面需要帮助的最后一部分

**代码：**

```
my $content_lengths; # this is at the top
foreach my $url ( # ... more stuff

# compare
if ( $mech->response->header('Content-Length') != $content_length ) {
  print "$child_url: different content length: $content_length vs "
    . $mech->response->header('Content-Length') . "!\n";

  # store the urls that are found to have different content
  # lengths to the base url only if the same url has not already been stored
  $content_lengths->{$url}->{'different'}->{$child_url} = $mech->response->header('Content-Length');

} elsif ( $mech->response->header('Content-Length') == $content_length ) {
  print "Content lengths are the same\n";

  # store the urls that are found to have the same content length as the base
  # url only if the same url has not already been stored
  $content_lengths->{$url}->{'equal'}->{$child_url} = $mech->response->header('Content-Length');
} 
```

**使用 Data::Dumper 的样子**

```
$VAR1 = {
      'http://www.superuser.com/' => {
                                       'difference' => {
                                                         'http://www.superuser.com/questions' => '10735',
                                                         'http://www.superuser.com/faq' => '13095'
                                                       },
                                       'equal' => {
                                                    'http://www.superuser.com/ ' => '20892'
                                                  }
                                     },
      'http://www.stackoverflow.com/' => {
                                           'difference' => {
                                                             'http://www.stackoverflow.com/faq' => '13015',
                                                             'http://www.stackoverflow.com/questions' => '10506'
                                                           },
                                           'equal' => {
                                                        'http://www.stackoverflow.com/ ' => '33362'
                                                      }
                                         }
    }; 
```

**我需要帮助：**

我需要帮助了解访问散列引用中不同部分的各种方法，并使用它们来做事，例如打印它们。

因此，例如，我如何`$url`从哈希引用中打印所有内容（即来自 Data::Dumper 的[http://www.superuser.com/](http://www.superuser.com/)和[http://www.stackoverflow.com/](http://www.stackoverflow.com/)）

以及如何打印**所有**`$child_url`或特定的**一个/子集**`$child_url`等等？

**非常感谢您对此的帮助，**

多谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T17:25:12.163

您可以这样导航您的 hashref：

```
$hashref->{key1}{key2}{keyN}; 
```

例如，如果您想要超级用户相等分支：

```
my $urlArrayref = $hashref->{'http://www.superuser.com/'}{'equal'}; 
```

更重要的是，要打印 hashref 的 url（第一级键），您可以：

```
foreach my $key ( keys( %{$hashref} ) ) {
    print( "key is '$key'\n" );
} 
```

然后，如果您想要二级密钥：

```
foreach my $firstLevelKey ( keys( %{$hashref} ) ) {
    print( "first level key is '$firstLevelKey'\n" );
    foreach my $secondLevelKey ( keys( %{$hashref->{$firstLevelKey}} ) ) {
        print( "\tfirst level key is '$secondLevelKey'\n" );
    }
} 
```

等等……

**- - - 编辑 - - -**

这是您上面示例中的工作示例代码：

```
#!/usr/bin/perl

use strict;
use warnings;

my $content_lengths = {
    'http://www.superuser.com/' => {
        'difference' => {
            'http://www.superuser.com/questions' => '10735',
            'http://www.superuser.com/faq' => '13095'
        },
        'equal' => {
            'http://www.superuser.com/ ' => '20892'
        }
    },
    'http://www.stackoverflow.com/' => {
        'difference' => {
            'http://www.stackoverflow.com/faq' => '13015',
            'http://www.stackoverflow.com/questions' => '10506'
        },
        'equal' => {
            'http://www.stackoverflow.com/ ' => '33362'
        }
    }
};

foreach my $key1 ( keys( %{$content_lengths} ) ) {
    print( "$key1\n" );
    foreach my $key2 ( keys( %{$content_lengths->{$key1}} ) ) {
        print( "\t$key2\n" );
        foreach my $key3 ( keys( %{$content_lengths->{$key1}{$key2}} ) ) {
            print( "\t\t$key3\n" );
        }
    }
} 
```

这导致此输出：

```
http://www.superuser.com/
        difference
                http://www.superuser.com/questions
                http://www.superuser.com/faq
        equal
                http://www.superuser.com/
http://www.stackoverflow.com/
        difference
                http://www.stackoverflow.com/faq
                http://www.stackoverflow.com/questions
        equal
                http://www.stackoverflow.com/ 
```

# javascript - 连接 Javascript 数组中的值

> ID：14859230
> 
> 赞同：0
> 
> 时间：2013-02-13T17:21:38.853
> 
> 标签：javascript, arrays, join

说我有：

```
var Certificated = {} 
```

子项目是动态添加和变化的。可能的结果：

```
var Certificated = {
    Elementary: ["foo","bar", "ball"]
    MiddleSchool: ["bar", "crampapydime"]
}; 
```

我想做以下事情：

```
Certificated.Elementary = Certificated.Elementary.join(""); 
```

除了我需要它对里面的所有对象执行此操作。

请记住，我无法确定其中包含多少对象的标题`Certificated`。

我的问题是如何在不专门调用每个元素的情况下使用`.join("")`里面的所有元素？`Certificated`

**编辑：**我知道 .join() 用于数组，并且 Certificated 中的对象将是数组。因此加入方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T17:35:18.370

这行得通吗？

```
for (var key in Certificated) {
    if (Certificated.hasOwnProperty(key)) {
        Certificated[key] = Certificated[key].join("");
    }
} 
```

它遍历. `Certificated`_ `key`_`[""]``join`

快速提问 - 你确定要使用`join`吗？我知道您刚刚提供了一个示例，但是您不能调用`join`字符串……它用于数组。只是想确保你知道。

这是我使用用于属性的数组的代码的 jsFiddle：

[http://jsfiddle.net/v48dL/](http://jsfiddle.net/v48dL/)

请注意，在浏览器控制台中，属性的值是字符串，因为`join`它们与`""`.

# ruby-on-rails - Rails 2.0.1，Pow.cx - config.ru 错误

> ID：14859234
> 
> 赞同：1
> 
> 时间：2013-02-13T17:21:48.850
> 
> 标签：ruby-on-rails, ruby, rack, ruby-on-rails-2, rack-pow

我有 rails 2.0.1 和最新版本的 pow.cx 设置，我收到一个错误，我认为它与 config.ru 文件有关：

```
 NameError: uninitialized constant ActionController::Dispatcher
  ~/repos/selfsale-001/vendor/rails/activerecord/lib/../../activesupport/lib/active_support/dependencies.rb:263:in `load_missing_constant'
  ~/repos/selfsale-001/vendor/rails/activerecord/lib/../../activesupport/lib/active_support/dependencies.rb:453:in `const_missing'
  ~/repos/selfsale-001/config.ru:3
  ~/Library/Application Support/Pow/Versions/0.4.0/node_modules/nack/lib/nack/builder.rb:4:in `instance_eval'
  ~/Library/Application Support/Pow/Versions/0.4.0/node_modules/nack/lib/nack/builder.rb:4:in `initialize'
  ~/repos/selfsale-001/config.ru:1:in `new'
  ~/repos/selfsale-001/config.ru:1 
```

我`config.ru`的是：

```
# Rails.root/config.ru
require "./config/environment"
run ActionController::Dispatcher.new 
```

所以 ActionController 没有初始化，我的问题是这个设置需要初始化什么？我已经搜索了谷歌，但还没有找到一个有效的配置。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T18:23:08.517

嗯..我的猜测是您至少需要使用 Rails 2.3 才能运行 Rack 中间件，请参阅

[http://edgeguides.rubyonrails.org/2_3_release_notes.html](http://edgeguides.rubyonrails.org/2_3_release_notes.html)

因此，对于 2.3 之前的 Rails，您的 config.ru 不能使用。

# sql - 更新表的所有列

> ID：14859235
> 
> 赞同：1
> 
> 时间：2013-02-13T17:21:47.560
> 
> 标签：sql, oracle, ms-access

我正在使用 MS Access 连接到链接的 Oracle 数据库。我有表 B 仅从表 A 中提取某些列（在链接数据库中）。

我正在尝试执行一个运行 Query1 的宏，以使用 A 中不断变化的数据更新表 B。

两者不一定通过某些 ID 相关，因此 UPDATE TABLE 命令对我来说似乎不合逻辑。我应该使用 JOIN 吗？我只需要一个地方来启动我的查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T17:49:26.127

根据评论中的讨论，听起来表 B 只是表 A 上的“视图”。我不确定您是否需要 UPDATE 查询。

在 MS Access 中，[创建视图的语法](http://msdn.microsoft.com/en-us/library/office/bb177895%28v=office.12%29.aspx)如下：

```
CREATE VIEW my_view AS 
  SELECT 
    col1, col2 
  FROM 
    [Table A] 
```

# sql - 需要编写一个 sql 脚本来查找 oracle 中任何数据库的元数据详细信息

> ID：14859238
> 
> 赞同：-1
> 
> 时间：2013-02-13T17:21:51.480
> 
> 标签：sql, oracle, plsql, oracle10g

我的目标是使用 PL/SQL 在 Oracle 中编写一个脚本，以从以下格式的数据库表中获取数据。

```
table_name|table_size|avg_row_length 
```

我需要数据库中所有可用的表。以下是尝试编写以获取特定架构的上述详细信息的脚本。但是我得到以下错误

> PLS-00103：在预期以下情况之一时遇到符号“AVG_ROW_SIZE”：:=; 不为空默认字符

```
SET serveroutput on;
clear screen;

set lin 20000;
set trimspool on;
set feed off;
set verify off;
set head off;

spool &&1..metadata_report.out

DECLARE
    v_tbl_name   VARCHAR2(1500);
    v_row_num    NUMBER(20);
    table_size   NUMBER(20);
    avg_row_size NUMBER(30);
    CURSOR c1 IS
      SELECT DISTINCT table_name
      FROM   all_tables
      WHERE  owner = Upper('&&1')
      ORDER  BY table_name ASC;
    c1_rec       c1%ROWTYPE;
BEGIN
    OPEN c1;

    LOOP
        FETCH c1 INTO c1_rec;

        exit WHEN c1%NOTFOUND;

        EXECUTE IMMEDIATE
'select sum((bytes/1024)) from user_extents where segment_name = "'||c1_rec.table_name||'"' INTO
table_size;

EXECUTE IMMEDIATE
'select decode(count(*),NULL,0, count(*)) FROM &&1.."'||c1_rec.table_name||'"'
    INTO v_row_num;

IF( v_row_num = 0 ) THEN
  avg_row_size := 0;
ELSE
  EXECUTE IMMEDIATE 'SELECT table_size/v_row_num FROM DUAL' INTO avg_row_size;
END IF;

dbms_output.Put_line(c1_rec.table_name
                     ||'|'
                     ||table_size
                     ||'|'
                     ||avg_row_size);
END LOOP;

CLOSE c1;
END; 

/ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T18:05:45.823

Given the error, and without seeing your script, my guess is that you are trying to get this information from `DBA_TABLES` and that you want to use the `AVG_ROW_LEN` column but have typed the name incorrectly as `AVG_ROW_SIZE`. My guess is that you are trying to write the query

```
SELECT table_name, num_rows * avg_row_len, avg_row_len
  FROM dba_tables 
```

Be aware, however, that the data in `DBA_TABLES` may be incorrect. At best, it is an approximation of the state of the table the last time that statistics were gathered on the table. But it is entirely possible that statistics were never gathered on the table. Or that statistics were gathered when the table had a very small amount of data and now it has billions of rows. For many situations, though, it's reasonable to assume that the statistics are reasonably accurate and that these approximate values will be close enough. Of course, you'd really want to add the `OWNER` column to the query since there can be many different tables with the same name in a single database.

You may also get tripped up by definitions. The "average row length" of a table or the "size of a table" can mean very different things to different people. What happens, for example, if your table contains an out-of-line `LOB`? Do you count the size of the `LOB` when you are calculating the size of the table since the `LOB` is not stored in the table's segment? Does the average row length change if you add a million empty blocks to your table? It does if you want to define it as the size of the table divided by the number of rows. It doesn't if you want to define it as the average amount of data that would be returned if you fetched one row of data from the table.

If you want more accuracy, you can use the `DBA_SEGMENTS` table to get the size of the various segments on disk. Depending on your definitions, though, you may need to use other data dictionary tables like `DBA_LOBS` to figure out which LOB segments are related to a particular table in order to include them in the calculation for the size of the table. You can use the `DBMS_SPACE` package to get information about the amount of empty space in the table should you want to back that out. If you want to get an accurate count of the number of rows in the table, you'd need to do a `SELECT COUNT(*) FROM table_name` which would potentially be quite expensive.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-28T12:58:26.803

关于 table_size，您应该总结所有分配的块，而不是乘以计算的平均行长度和基于创建的统计信息的行数。只需考虑具有大量删除（除其他外）的未重用块或表。[QueryAdvisor 中提供了优化所需的此信息和其他与数据库相关的信息。](http://www.queryadvisor.com/ "数据库优化")

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T17:50:10.017

这是 calc avg row len 的示例：[http](http://www.dba-oracle.com/t_average_row_length.htm) ://www.dba-oracle.com/t_average_row_length.htm 您可以添加其余部分...不需要 PL/SQL。

# c++ - 将 Matrix::row() 的返回分配给 Matrix

> ID：14859241
> 
> 赞同：1
> 
> 时间：2013-02-13T17:22:09.850
> 
> 标签：c++, eigen

我正在编写一个将行矩阵作为参数的方法，例如：

```
method(Matrix<float,1,Dynamic>& rowMatrix); 
```

如果我尝试使用 Matrix.row(x) 的结果调用该方法，例如：

```
Matrix<float,Dynamic,Dynamic> matrix(2,2);
method(matrix.row(1)); 
```

我收到以下错误：

```
no known conversion for argument 1 from ‘Eigen::DenseBase<Eigen::Matrix<float, -1, -1> >::ColXpr {aka Eigen::Block<Eigen::Matrix<float, -1, -1>, -1, 1, true, true>}’ to ‘Eigen::Matrix<float, -1, 1>&’ 
```

我知道这里的问题是我正在尝试分配对 a 的引用`Matrix<float,1,Dynamic>`，`ColXpr`这似乎无效。我可以通过按值传递来“解决”问题，在这种情况下，我猜想构造一个新的 Matrix 并使用`ColXpr`as 参数构造函数，并且一切正常。

我没有修改方法内部的矩阵，所以按值传递是“可以接受的”。但是，我想通过引用传递以避免复制数据并提高性能。有什么方法可以从 return 转换`Matrix::row()`为任何可分配给的东西`Matrix<datatype,1,Dynamic>&`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T17:41:13.903

这是不可能的，但您有两种选择：

1.  按照 Eigen[手册](http://eigen.tuxfamily.org/dox-devel/TopicFunctionTakingEigenTypes.html)中的说明制作函数模板。

2.  如果您无法编写模板函数，那么devel 分支中可用的[Ref<>类是正确的答案。](http://eigen.tuxfamily.org/dox-devel/classEigen_1_1Ref.html)基本上，它归结为：

    `method(Ref<Matrix<float,1,Dynamic>, 0, InnerStride> rowMatrix);`

    或 const 版本：

    `method(const Ref<const Matrix<float,1,Dynamic>, 0, InnerStride<> >& rowMatrix);`

# pentaho - pentaho BI 中的租户感知数据源

> ID：14859243
> 
> 赞同：2
> 
> 时间：2013-02-13T17:22:15.217
> 
> 标签：pentaho

我们有几个客户（公司），每个客户都有单独的数据库，即 companyA 有 databaseA，CompanyB 有 databaseB ...等等，所以我想要实现的是，在 pentaho 用户控制台中，所有这些公司都使用相同的报告，但使用不同的报告datasoruce，例如 CompanyA,CompanyB..etc 将有权访问名为“Reports”的解决方案文件夹，该文件夹有一个报告列表，例如每周销售报告，所以我希望每周销售报告在登录用户来自公司 A 时使用公司 A 的数据库并使用登录用户来自公司B时公司B的数据库，

我试过[了，](http://jira.pentaho.com/browse/BISERVER-6330)但我收到了这个错误

```
XmlBeanDefinitionStoreException: Line 67 in XML document from file [C:\pentaho2 
biserver-ce\pentaho-solutions\system\pentahoObjects.spring.xml] is invalid; nes 
ed exception is org.xml.sax.SAXParseException; lineNumber: 67; columnNumber: 50 
 The value of attribute "value" associated with an element type "property" must 
not contain the '<' character. 
```

它在抱怨`<property name="datasourceNameFormat" value="<![CDATA[{0}-{1}]]>`

关于导致此错误的任何想法，或者有任何其他方法可以做到这一点谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T15:32:43.350

我不确定你的方式，但完全有可能拥有动态 jndi。您可以在 xaction 中的变量中使用 jndi，并可以在 xaction 中使用它来区分目标数据库。

```
<inputs> 
<JNDDDI type="string"> 
  <sources> 
    <request>JNDDDI</request> 
  </sources>  
  <default-value><![CDATA[jndi_database1]]></default-value> 
</JNDDDI> 
```

……

```
<action-definition> 
<component-name>SQLLookupRule</component-name>
<action-type>hourly</action-type>
<action-inputs> 
  <JNDDDI type="string"/>
</action-inputs>
<action-outputs> 
  <prepared_component type="sql-query"/> 
</action-outputs>
<component-definition> 
  <jndi>{JNDDDI}</jndi>  
  <query><![CDATA[select ...from ...]]></query>  
  <live><![CDATA[true]]></live> 
</component-definition> 
```

如果你使用 JasperReport 组件，同样的事情。

# macos - 修复 Mac OS 上的 $PATH

> ID：14859245
> 
> 赞同：-1
> 
> 时间：2013-02-13T17:22:18.053
> 
> 标签：macos, path

我试图在我的路径环境中添加一个目录，但不知何故出了问题，现在终端甚至无法重新识别“ls”命令。如何重置或修复此问题？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T17:35:37.357

如果需要，通过以单用户模式启动，从另一个帐户执行此操作：http: [//support.apple.com/kb/HT1492](http://support.apple.com/kb/HT1492)

这假定您熟悉 Unix shell 的基础知识。

# sql-server-2008 - 内置 SP 的 SQL Server - Cliff Notes

> ID：14859247
> 
> 赞同：0
> 
> 时间：2013-02-13T17:22:27.647
> 
> 标签：sql-server-2008, tsql, stored-procedures

我希望我们都使用过**SP_HELP**。我今天第一次使用**SP_HELPTEXT 。**大多数情况下，我从已经了解它们的同事或一些随机的 stackoverflow 发现中学习这些。

是否有关于内置 SP 及其功能的 SQL Server 的详尽列表？我可能写的代码比我必须写的多。

谢谢您的帮助。

马特

# xcode - 在 Storyboard 中移动位于其他对象后面的对象

> ID：14859249
> 
> 赞同：13
> 
> 时间：2013-02-13T17:22:28.630
> 
> 标签：xcode, interface-builder, storyboard

我经常在 IB/Storyboard 中堆叠对象，几乎不可能拖动其他对象后面的对象而不移动前面的对象。无论如何我可以移动已经选择但在其他对象后面的对象吗？当我尝试移动它时，它总是选择位于顶部的对象，还是我必须将它带到前面并移动它然后将它发送回后面？

谢谢！艾伦

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-05-26T00:12:17.660

Control + Shift + 单击 Interface Builder 中的对象以查看鼠标下所有对象的菜单。

来自： [https ://stackoverflow.com/a/934152/1374512](https://stackoverflow.com/a/934152/1374512)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-01-16T06:08:30.417

仍然没有足够的声誉来添加评论，所以我必须发表评论作为答案。

正如@nvrtd 提到的，您可以按住`Ctrl`+`Shift`然后单击以显示控件选择弹出窗口。

但正如@David所说，那样你只能选择而不是使用鼠标拖动/移动：

> 这对我不起作用。我可以选择它，但不能移动它。

我的解决方案：

1.  先选择控件
2.  使用键盘箭头键移动控件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-02T10:06:42.593

您还可以根据您的设计更改对象的顺序......可能是一个解决方案。见这里。

[如何将 NIB 文件中的对象发送到前/后？](https://stackoverflow.com/questions/3378234/how-to-send-objects-in-nib-files-to-front-back)

# java - 如何将斜率转换为度数，反之亦然？

> ID：14859251
> 
> 赞同：3
> 
> 时间：2013-02-13T17:22:30.130
> 
> 标签：java, math, degrees, projectile

我正在制作一个游戏，其中你有一个向鼠标方向发射子弹的精灵。到目前为止，它适用于 1 个子弹。我有这个方法可以得到一个斜率，然后对向量进行归一化：

```
 public static Vector2f getSimplifiedSlope(Vector2f v1, Vector2f v2) {
    Vector2f result = new Vector2f(v2.x - v1.x, v2.y - v1.y);
    float length = (float)Math.sqrt(result.x * result.x + result.y * result.y);

    return new Vector2f(result.x / length, result.y / length);
} 
```

但是，现在我正在制作一把可以发射几发子弹的霰弹枪，并带有“扩散”。我的计划是，我将取基本斜率，将其转换为度数，添加或减去一对以创建偏差，然后将度数转换回斜率，并将其传递给子弹。

但是，我不知道该怎么做。如果有人能告诉我如何将 2D 斜率转换为度数，那就太好了，反之亦然。

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T17:26:16.790

最简单的方法是使用三角法`Math.atan2`计算以弧度为单位的角度，使用 将其转换为度数`Math.toDegrees`，执行调整，使用 将其转换回弧度`Math.toRadians`，然后使用三角法`Math.tan`将弧度值转换回斜率。您需要注意从该`tan`方法返回的潜在无限斜率。

这是该类的[Javadocs 。](http://docs.oracle.com/javase/7/docs/api/java/lang/Math.html)`Math`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T17:24:58.540

[Math.atan2()](http://docs.oracle.com/javase/6/docs/api/java/lang/Math.html#atan2%28double,%20double%29)将执行此操作并以弧度为您提供结果。

> 从直角坐标 (x, y) 到极坐标 (r, theta) 的转换中返回角度 theta。此方法通过计算 -pi 到 pi 范围内的 y/x 的反正切来计算相位 theta。

[Math.toDegrees()](http://docs.oracle.com/javase/6/docs/api/java/lang/Math.html#toDegrees%28double%29)将执行您的弧度/度数转换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T17:24:08.840

使用[`Math.atan2()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Math.html#atan2%28double,%20double%29)，并记住结果是*弧度*，而不是*度数*。

# javascript - 在 javascript 中通过 setAttribute 添加空白页选项

> ID：14859255
> 
> 赞同：1
> 
> 时间：2013-02-13T17:22:37.100
> 
> 标签：javascript

我可以`a`通过这个在js中添加一个元素：

```
var mydiv = document.getElementById("myDiv");
var aTag = document.createElement('a');
aTag.setAttribute('href',"yourlink.htm");
aTag.innerHTML = "link text";
mydiv.appendChild(aTag); 
```

但我还想确保此链接在新页面中打开。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T17:23:34.437

```
aTag.setAttribute("target", "_blank"); 
```

**演示：http:** [//jsfiddle.net/dWDAQ/](http://jsfiddle.net/dWDAQ/)

# java - 取消按钮必须有一个功能

> ID：14859256
> 
> 赞同：0
> 
> 时间：2013-02-13T17:22:48.953
> 
> 标签：java, swing, joptionpane

这个取消按钮有问题。

使用这些代码：

```
int deposit;
String dep =
   JOptionPane.showInputDialog("How much would you like to deposit?\n\t$: ");
deposit = Integer.parseInt(dep); 
```

应该会出现一个“确定”和“取消”按钮，但是每当我单击取消按钮时，根本没有任何响应。我想要的是，每当我点击“取消”按钮时，它应该让我回到主菜单，但是如何呢？

编码：

```
private static void processDeposit(String num, int rc){
    int deposit;
    String dep =
        JOptionPane.showInputDialog(
            "How much would you like to deposit?\n\t$: ");
    deposit = Integer.parseInt(dep);
    JOptionPane.showMessageDialog(
        null, "You have deposited $" + dep + " into the account of " + name);
    myAccount.setBalance(myAccount.getBalance() + deposit);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T17:25:56.237

如果用户单击取消 dep 将返回为 null

所以你可以这样做：

```
 if(input == null || (input != null && ("".equals(input))))   
 {

         //what you ever you need to do here

 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-24T00:21:23.717

尝试这个：

```
private static void processDeposit(String num, int rc) {
    int deposit;
    String dep =
            JOptionPane.showInputDialog(
                    "How much would you like to deposit?\n\t$: ");
    if (dep == null || dep.equals("")) {  // cancel pressed
        JOptionPane.getRootFrame().dispose(); // close dialog
    } else {
        deposit = Integer.parseInt(dep);  // no else or try/catch = NFE exception
        JOptionPane.showMessageDialog(
                null, "You have deposited $" + dep + " into the account of " + name);
        myAccount.setBalance(myAccount.getBalance() + deposit);
    }

} 
```

# jpa - 在 EclipseLink 上使用 Compsite Keys 时出现异常

> ID：14859258
> 
> 赞同：0
> 
> 时间：2013-02-13T17:22:51.990
> 
> 标签：jpa, eclipselink, composite-key

我在使用 JPA EclipseLink 的复合主键时遇到问题。问题是当我有一个外键是另一个表的主键时。我有这个简单的场景。

## 用户

```
public class Users implements Serializable {
...
private Collection<UserCompany> userCompanyCollection;
@JoinColumn(name = "user_roles", referencedColumnName = "user_role_id")
@ManyToOne(optional = false)
private UserRoles userRoles;
...
} 
```

## 用户角色

```
public class UserRoles implements Serializable {
private static final long serialVersionUID = 1L;
@EmbeddedId
protected UserRolesPK userRolesPK;
…
} 
```

## 用户角色 PK

```
@Embeddable
public class UserRolesPK implements Serializable {
@Basic(optional = false)
@Column(name = "user_role_id")
private int userRoleId;
@Basic(optional = false)
@NotNull
@Column(name = "user_role_company_id")
private int userRoleCompanyId;
...
} 
```

有了这些对象，我得到了这个异常：

```
Caused by: Exception [EclipseLink-7220] (Eclipse Persistence Services - 2.3.0.v20110604-r9504): org.eclipse.persistence.exceptions.ValidationException
Exception Description: The @JoinColumns on the annotated element [field userRoles] from the entity class [class jpa.Users] is incomplete. When the source entity class uses a composite primary key, a @JoinColumn must be specified for each join column using the @JoinColumns. Both the name and the referencedColumnName elements must be specified in each such @JoinColumn.
at org.eclipse.persistence.exceptions.ValidationException.incompleteJoinColumnsSpecified(ValidationException.java:1805)
at org.eclipse.persistence.internal.jpa.metadata.accessors.mappings.MappingAccessor.getJoinColumnsAndValidate(MappingAccessor.java:575)
at org.eclipse.persistence.internal.jpa.metadata.accessors.mappings.MappingAccessor.getJoinColumns(MappingAccessor.java:525)
at org.eclipse.persistence.internal.jpa.metadata.accessors.mappings.ObjectAccessor.processOneToOneForeignKeyRelationship(ObjectAccessor.java:629)
at org.eclipse.persistence.internal.jpa.metadata.accessors.mappings.ObjectAccessor.processOwningMappingKeys(ObjectAccessor.java:686)
at org.eclipse.persistence.internal.jpa.metadata.accessors.mappings.ManyToOneAccessor.process(ManyToOneAccessor.java:119)
at org.eclipse.persistence.internal.jpa.metadata.MetadataProject.processOwningRelationshipAccessors(MetadataProject.java:1432)
at org.eclipse.persistence.internal.jpa.metadata.MetadataProject.processStage3(MetadataProject.java:1667)
at org.eclipse.persistence.internal.jpa.metadata.MetadataProcessor.processORMMetadata(MetadataProcessor.java:521)
at org.eclipse.persistence.internal.jpa.deployment.PersistenceUnitProcessor.processORMetadata(PersistenceUnitProcessor.java:526)
at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.predeploy(EntityManagerSetupImpl.java:1320)
... 36 more
|#] 
```

提前感谢所有帮助。

问候，丹尼尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T03:43:48.683

JPA 要求在关系映射中使用完整的主键，这就是它不喜欢您的映射的原因 - 您没有使用 user_role_company_id pk 字段。如果 user_role_id 足以唯一标识 userRoles，则不应使用复合键，而应仅使用单个字段。

EclipseLink 能够将外键映射到非或不完整的 ID 字段，但我建议不要这样做：实体缓存在它们的主键上，因此即使实体已经在缓存中，解析关系也可能需要不必要的数据库查询。映射它需要使用定制器来创建或修改映射。使用定制器的示例在这里 [http://wiki.eclipse.org/EclipseLink/Examples/JPA/MappingSelectionCriteria](http://wiki.eclipse.org/EclipseLink/Examples/JPA/MappingSelectionCriteria)

# command-line - 使用 DOS 命令替换字符串中的字符

> ID：14859259
> 
> 赞同：7
> 
> 时间：2013-02-13T17:22:52.020
> 
> 标签：command-line, batch-file, dos

我有一个要求，我需要使用 DOS 命令替换字符串中的特定字符。

例如，如果我的字符串是“1,2,3,4”，我需要通过将每个“，”替换为“。”来获得结果“1.2.3.4”。特点。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-13T17:57:33.873

以下将为您工作

```
 @echo off
    set string1=1,2,3,4
    set string2=%string1:,=.%
    echo %string2% 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-13T17:29:41.057

这将使您知道要做什么，而不是确切地知道如何让字符串开始。

```
set str=1,2,3,4
set str=%str:,=.% 
```

# r - 如何将颜色分配给变量ggplot2的子集

> ID：14859261
> 
> 赞同：1
> 
> 时间：2013-02-13T17:22:52.493
> 
> 标签：r, ggplot2

我有一个包含 379838 行和列中 13 个变量的数据框（13 个临床样本）：

```
 >  str( df)
'data.frame':   379838 obs. of  13 variables:
  $ V1 : num  0.8146 0.7433 0.0174 0.177 0 ...
 $ V2 : num  0.7465 0.5833 0.0848 0.5899 0.0161 ...
 $ V3 : num  0.788 0.843 0.333 0.801 0.156 ...
 $ V4 : num  0.601 0.958 0.319 0.807 0.429 ...
 $ V5 : num  0.792 0.49 0.341 0.865 1 ...
 $ V6 : num  0.676 0.801 0.229 0.822 0.282 ...
 $ V7 : num  0.783 0.732 0.223 0.653 0.507 ...
 $ V8 : num  0.69 0.773 0.108 0.69 0.16 ...
 $ V9 : num  0.4014 0.5959 0.0551 0.7578 0.2784 ...
 $ V10: num  0.703 0.784 0.131 0.698 0.204 ...
 $ V11: num  0.6731 0.8224 0.125 0.6021 0.0772 ...
 $ V12: num  0.7889 0.7907 0.0881 0.7175 0.2392 ...
 $ V13: num  0.6731 0.8221 0.0341 0.4059 0 ... 
```

我正在尝试制作一个 ggplot2 箱线图，将变量分组为三组： V1-V5 、 V6-V9 和 V10-V13 ，并为每组的变量分配不同的颜色。

我正在尝试以下代码：

```
 df1= as.vector(df[, c("V1", "V2", "V3","V4", "V5")])
    df2= as.vector(df[, c("V6","V7", "V8","V9")])
    df3=as.vector(df[, c( "V10","V11", "V12","V13")])
    sample= c(df1,df2,df3)

   library(reshape2)

  meltData1 <- melt(df, varnames="sample")

  str(meltData1)
 'data.frame':  4937894 obs. of  2 variables:
  $ variable: Factor w/ 13 levels "V1","V2","V3",..: 1 1 1 1 1 1 1 1 1 1 ...
  $ value   : num  0.8146 0.7433 0.0174 0.177 0 ...

   p=ggplot(data=meltData1,aes(variable,value, fill=x$sample))
   p+geom_boxplot() 
```

这给了我白盒图。如何为三组变量分配颜色？提前谢谢了！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T17:47:24.740

由于未提供样本数据，因此制作了包含 13 列的新数据框，其名称为`V1`to `V13`。

```
df<-as.data.frame(matrix(rnorm(1300),ncol=13)) 
```

借助`melt()`库`reshape2`数据的功能，将数据从宽格式转换为长格式。现在数据框有两列：`variable`和`value`。

```
library(reshape2)
dflong<-melt(df) 
```

向长格式`sample`添加了新列。在这里，我根据原始数据框中的行数和每组中的原始列数重复了名称`group1`， 。`group2``group3`

```
dflong$sample<-c(rep("group1",nrow(df)*5),rep("group2",nrow(df)*4),rep("group3",nrow(df)*4)) 
```

新列与参数`fill=`一起使用以根据分组设置颜色。

```
library(ggplot2)
ggplot(data=dflong,aes(variable,value, fill=sample))+geom_boxplot() 
```

![在此处输入图像描述](../Images/14c50ed807556ee9f3e3fafc4eaa0214.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T20:27:02.983

这是 Didzis Elferts 的后续作品。

Objective: 将样品分成 3 个颜色组，颜色组内的色度不同。

代码的第一部分是相同的：

```
df<-as.data.frame(matrix(rnorm(1300),ncol=13))
library(reshape2)
dflong<-melt(df)
dflong$sample<-c(rep("group1",nrow(df)*5),rep("group2",nrow(df)*4),rep("group3",nrow(df)*4))
library(ggplot2) 
```

现在，使用包 RColorBrewer 来选择颜色深浅

```
library(RColorBrewer) 
```

按颜色类创建颜色列表

```
col.g <- c(brewer.pal(9,"Greens"))[5:9] # select 5 colors from class Greens
col.r <- c(brewer.pal(9,"Reds"))[6:9] # select 4 colors from class Reds
col.b <- c(brewer.pal(9,"Blues"))[6:9] # select 4 colors from class Blues
my.cols <- c(col.g,col.r,col.b) 
```

看看选择的颜色：

```
image(1:13,1,as.matrix(1:13), col=my.cols, xlab="my palette", ylab="", xaxt="n", yaxt="n", bty="n") 
```

现在使用我们创建的颜色进行绘图

```
ggplot(data=dflong,aes(variable,value,colour=variable))+geom_boxplot()+scale_colour_manual(values = my.cols) 
```

在上面，使用 color 和 scale_colour_manual 命令，只有线条被着色。下面，我们使用fill和scale_fill_manual：

```
 ggplot(data=dflong,aes(variable,value,fill=variable))+geom_boxplot()+scale_fill_manual(values = my.cols) 
```

![这是我正在寻找的一个例子](../Images/1e5a554dc8c02e8e5092693214453852.png)

PS我是一个完全的新手，我自己也在学习R。我认为这个问题是一个应用我刚刚学到的东西的机会。

# c# - 从 json 对象数组中获取 WebMatrix C# 对象数组

> ID：14859263
> 
> 赞同：1
> 
> 时间：2013-02-13T17:23:00.880
> 
> 标签：c#, arrays, json, object, webmatrix

鉴于 json 文件（json 对象）看起来像这样（对象数组）：

```
{
    "job": [
        {
            "title": "Mechanic",
            "department": "Central Repair Department",
            "summary": "Repair and perform preventative maintenance to vehicles and equipment.",
            "qualifications": "High school diploma or equivalent, valid Oklahoma driver's license, general knowledge of operating principals of gasoline and diesel engines, and experience with mechanical repair of vehicles. Basic knowledge of hydraulics and equipment is also desirable.",
            "incentive": "",
            "wage": ""
        },
        {
            "title": "Police Patrol Officer",
            "department": "Police Department",
            "summary": "Repair and perform preventative maintenance to vehicles and equipment.",
            "qualifications": "High school diploma or equivalent, valid Oklahoma driver's license, general knowledge of operating principals of gasoline and diesel engines, and experience with mechanical repair of vehicles. Basic knowledge of hydraulics and equipment is also desirable.",
            "incentive": "",
            "wage": ""
        }
    ]
} 
```

我怎样才能得到一个对象数组，用这些值绘制？

如果您熟悉如何在 WebMatrix 的 C# 中执行此操作，请仅回答（这与常规 C# 不同，即没有 JsonReader 方法，没有 JObject 方法，也没有其他 C# 建议指出的其他方法）。虽然，我认为我*可能*无法为这些方法中的某些方法找到正确的 using 指令，但是 WebMatrix 中的细微差异再次让我无法找到该信息，如果它确实存在的话。

此外，我不知道 LINQ 是什么或如何使用它，我也不关心，除非它绝对是最好/最简单的方法。

我在 WebMatrix 中注意到的一些与 json 相关的非静态方法包括“DynamicJsonObject”和“DynamicJsonArray”，但是，无论是[使用 Server.MapPath 与否] 指向文件的路径还是只是将完整的 json 文件存储为单个字符串变量，我尝试使用这些方法都没有成功。

有没有简单的方法可以简单地从 json 对象数组创建 C# 对象数组？

谢谢你的帮助！如果您需要任何进一步的信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T21:56:39.183

您可以使用[Json Helper](http://www.mikesdotnetting.com/Article/160/WebMatrix-Working-With-The-JSON-Helper)将 JSON 解码为动态对象。假设您在上面发布的 JSON 在名为 JsonFile.txt 的文件中，以下将执行此操作：

```
@{
    var json = File.ReadAllText(Server.MapPath("~/JsonFile.txt"));
    var data = Json.Decode(json);
}

<!DOCTYPE html>

<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title></title>
    </head>
    <body>
        @foreach(var j in data.job){
            <h3>@j.title</h3>
            <div>@j.summary</div>
        }
    </body>
</html> 
```

# jsf - Primefaces 动态超级菜单 - 无法两次删除相同的组件

> ID：14859265
> 
> 赞同：0
> 
> 时间：2013-02-13T17:23:14.070
> 
> 标签：jsf, primefaces

我用带有模型的巨型菜单更改了我的静态菜单文件（header.xhtml）。像这样：

```
 <p:megaMenu model="#{menuController.megaModel}" autoDisplay="false" styleClass="menu-bar"  >

          </p:megaMenu> 
```

到目前为止一切都很好，它工作得很好，就像我预期的那样建造。问题是，在我的表单页面上，当验证第二次失败时......我收到此错误：

```
 javax.faces.FacesException: Cannot remove the same component twice: j_idt15:j_id2     com.sun.faces.context.StateContext$AddRemoveListener.handleAddRemoveWithAutoPrune(StateContext.java:493)
        com.sun.faces.context.StateContext$AddRemoveListener.handleRemove(StateContext.java:372) 
```

查看生成的 HTML，我找不到这个字符串“j_idt15:j_id2”，但我可以找到：

```
 <div id="j_idt14:j_idt15" class="ui-menu ui-menubar ui-megamenu ui-widget ui-widget-content ui-corner-all ui-helper-clearfix menu-bar" role="menubar"> 
```

还有这个：

所以...我真的不明白。我的 MenuController 是一个 sessionBean：

```
@Component
@Scope("session")
public class MenuController implements Serializable {

@PostConstruct
   public void init(){
   todosModulos = moduloService.findAll();
   modulosAcesso = extrairModulos();
   createMegaMenu();
} 
```

...所以..一些注意事项：

我发现这个错误发生在 2.1.9 以上的 Mojarra 版本上。（我使用的是 2.1.10）。因此，一种可能的解决方案是将 JSF imp 更改为 My Faces。我试过了，但它破坏了我的结构（我的复合组件停止工作并且 dynaForm 也停止了）。

我尝试了一些解决方法，但没有成功。这就是我尝试过的： [Overriding AbstractMenu](http://forum.primefaces.org/viewtopic.php?f=3&t=23669)和[Marlon Patrick's solution (PT-BR)](http://marlonpatrick.info/blog/2013/01/24/primefaces-menu-dinamico-e-a-inofensiva-mensagem-unable-to-find-component-dot-dot-dot/)。

根本行不通=[

**编辑**-> 创建菜单项

```
 MenuItem anItem = new MenuItem();
 anItem.setOutcome(item.getOutcome());
 anItem.setValue(item.getRotulo());
 anItem.setIcon(item.getIcone()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T18:04:25.997

从我看到的你已经尝试了我的两个解决方法：覆盖 AbstractMenu 并放置 PhaseListener。

好吧，我意识到我遇到的问题是 MenuBar 的组件，而您尝试使用的是 MegaMenu，也许是我不适用于 MegaMenu 的解决方案，尽管我相信应该可以。

我要对你说的是检查以下内容：

1 - 当您覆盖类 AbstractMenu 时，您确定 PrimeFaces 开始使用它吗？以确保它在那里放置一个断点以及他是否看到执行流程。如果不停止，因为 PrimeFaces 仍在使用它自己的类。

2 - 当尝试将解决方案与我今天更喜欢和使用的 PhaseListener 一起使用时，您注意到您需要用自己的代码替换一段代码？基本上，您只需要删除作为链接的菜单项的操作，因为它们会导致此问题。菜单项是应该保留的操作。就我而言，我知道 ID 是什么动作或链接，那么您将不得不以某种方式通过 ID 来区分。另外，设置一个断点以确保您的 PhaseListener 已正确注册并且正在拦截执行流程。

# angularjs - 输入自动对焦属性

> ID：14859266
> 
> 赞同：26
> 
> 时间：2013-02-13T17:23:19.987
> 
> 标签：angularjs

我的代码中有这样的地方：

```
<input data-ng-disabled="SOME_SCOPE_VARIABLE" /> 
```

我也希望能够像这样使用它：

```
<input data-ng-autofocus="SOME_SCOPE_VARIABLE" /> 
```

或者更好的是，模仿 ng-style 的完成方式：

```
<input data-ng-attribute="{autofocus: SOME_SCOPE_VARIABLE}" /> 
```

这在当前版本的 AngularJS 中是否存在？我注意到在代码中有一个 BOOLEAN_ATTR 可以获取 AngularJS 支持的所有属性。我不想修改它，因为害怕更改版本并忘记更新。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-02-13T17:41:36.350

**更新**：AngularJS 现在有一个指令来评估焦点*上*[`ngFocus`](http://docs.angularjs.org/api/ng/directive/ngFocus)的表达式，但为了完整起见，我在这里提到它。

 ** * *

当前版本的 AngularJS 没有焦点指令，但它在路线图中。巧合的是，我们昨天在邮件列表上[讨论了这个](https://groups.google.com/d/msg/angular/lczCSTPMup0/qj1uMqYYdloJ)，我想出了这个：

```
angular.module('ng').directive('ngFocus', function($timeout) {
    return {
        link: function ( scope, element, attrs ) {
            scope.$watch( attrs.ngFocus, function ( val ) {
                if ( angular.isDefined( val ) && val ) {
                    $timeout( function () { element[0].focus(); } );
                }
            }, true);

            element.bind('blur', function () {
                if ( angular.isDefined( attrs.ngFocusLost ) ) {
                    scope.$apply( attrs.ngFocusLost );

                }
            });
        }
    };
}); 
```

根据您的要求，它适用于范围变量：

```
<input type="text" ng-focus="isFocused" ng-focus-lost="loseFocus()"> 
```

这是一个小提琴：http: [//jsfiddle.net/ANfJZ/39/](http://jsfiddle.net/ANfJZ/39/)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2015-09-01T23:32:26.537

您可以使用内置的[ngAttr 属性绑定](https://docs.angularjs.org/guide/interpolation#-ngattr-for-binding-to-arbitrary-attributes)来做到这一点。

```
<input ng-attr-autofocus="{{SOME_SCOPE_VARIABLE}}"> 
```

如果定义了 autofocus 属性`SOME_SCOPE_VARIABLE`（即使它是`false`），则会添加，如果是`undefined`. 所以我强迫虚假值是`undefined`.

```
$scope.SOME_SCOPE_VARIABLE = someVar || undefined; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-07-23T09:58:47.083

该指令应该可以解决问题：

```
angular.module('utils.autofocus', [])
.directive('autofocus', ['$timeout', function($timeout) {
  return {
    restrict: 'A',
    scope: {'autofocus':'='}
    link : function($scope, $element) {
      $scope.$watch 'autofocus', function(focus){
        if(focus){
          $timeout(function() {
            $element[0].focus();
          });
        }
      }
    }
  }
}]); 
```

取自这里：[https ://gist.github.com/mlynch/dd407b93ed288d499778](https://gist.github.com/mlynch/dd407b93ed288d499778)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-09-05T12:58:13.470

```
scope.doFocus = function () {
                $timeout(function () {
                        document.getElementById('you_input_id').focus();
                    });
            }; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-09-29T02:33:30.617

创建这样的指令

```
.directive('autoFocus', ['$timeout', function ($timeout) {
        return {
            restrict: 'A',
            link: function ($scope, $element) {
                $timeout(function () {
                    $element[0].focus();
                });
            }
        }

<input type="text" auto-focus class="form-control msd-elastic" placeholder=""> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-11-12T13:16:11.723

我用两个自定义指令做到了，如下所示：

```
(function(angular) {
  'use strict';

  /* @ngInject */
  function myAutoFocus($timeout) {
    return {
      restrict: 'A',
      link: function(scope, element) {
        $timeout(function() {
          element[0].focus();
        }, 300);
      }
    };
  }

  function myFocusable() {
    return {
      restrict: 'A',
      link: function(scope, element, attrs) {
        var focusMethodName = attrs.myFocusable;
        scope[focusMethodName] = function() {
          element[0].focus();
        };
      }
    };
  }

  angular
    .module('myFocusUtils', [])
    .directive('myAutoFocus', myAutoFocus)
    .directive('myFocusable', myFocusable);

}(angular)); 
```

如果`my-auto-focus`为元素添加属性，它将在 300 毫秒后获得焦点。我将值设置为 300 而不是 0，以便在设置焦点之前加载其他异步组件。

该属性`my-focusable`将在当前范围内创建一个函数。此函数将在调用时将焦点设置到元素。当它在范围内创建某些内容时，请小心避免覆盖某些内容。

这样你就不需要在 Angular 的摘要循环 ( `watch`) 中添加一些东西，并且可以完全在视图中完成：

```
<input my-focusable="focusOnInput"></input>        
<button ng-click="focusOnInput()">Click to focus</button> 
```

我创建了一个 JSFiddle 来显示`myFocusable`指令：http: [//jsfiddle.net/8shLj3jc/](http://jsfiddle.net/8shLj3jc/)

出于某种我不知道的原因，该`myAutoFocus`指令在 JSFiddle 中不起作用，但它在我的页面中起作用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-11-13T17:23:06.230

我所做的是对我的输入使用常规自动对焦：`<input autofocus>`

然后当角度准备好时，我将焦点设置在第一个可见输入上，并使用自动对焦：

```
angular.element(document).ready(function() {
  $('input[autofocus]:visible:first').focus();
}); 
```

希望这可以帮助。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-07-30T17:38:01.097

```
<!DOCTYPE html>
<html>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular.min.js"></script>
<body>

<div ng-app="myApp" ng-controller="namesCtrl"> 
  <div ng-repeat="x in names">
     <input ng-attr-focus={{$first}} value="{{x.name + ', ' + x.country }}" />
  </div>
</div>

<script>

        var myApp = angular.module('myApp', []);
        myApp.controller('namesCtrl', function($scope) {
    $scope.names = [
        {name:'x1',country:'y1'},
        {name:'x2',country:'y2'},
        {name:'x3',country:'y3'}
    ];
});

        myApp.directive("focus", function(){
            return {
                restrict: "A",
                link: function link(scope, element, attrs) {

                      if(JSON.parse(attrs.focus)){
                          element[0].focus();
                      }
                }
            };
        });
</script>
</body>
</html> 
```

为我的一个用例创建了上面的自定义指令。

*   始终专注于第一个输入元素。
*   适用于 ajax 数据、浏览器后退/前进按钮。
*   在 chrome 和 firefox 上测试（这里不支持默认自动对焦）

JSON.parse 用于将 html 返回的字符串“true”解析为 JS 中的 boolean true。
另一种将 attrs.focus === "true" 用于 if 条件的方法。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-08-04T13:40:36.787

结合上面提到的其他人：

JS代码：

```
myApp.directive('ngAutofocus', ['$timeout', function ($timeout) {
    var linker = function ($scope, element, attrs) {
        $scope.$watch('pageLoaded', function (pageLoaded) {
            if (pageLoaded) {
                $timeout(function () {
                    element[0].focus();
                });
            }
        });
    };

    return {
        restrict: 'A',
        link: linker
    };
}]); 
```

HTML：

```
 <input type="text" ng-model="myField" class="input-block-level edit-item" ng-autofocus> 
```

从页面获取的初始加载方法将 pageLoaded 设置为 true：

```
 var loadData = function () {
        ..
        return $http.get(url).then(function (requestResponse) {
           $scope.pageLoaded = true;
......
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-06-06T06:32:43.547

所以没有 $timeout 你也可以像这样使用自动对焦 -

```
 <input type="text" ng-show="{{condition}}" class='input-class'></input>
    angular.element(document).ready(function(){
    angular.element('.input-class')[0].focus();
    }); 
```*

# twitter-bootstrap - 更新 data-content 属性时，Twitter bootstrap js popover 内容不会更新

> ID：14859267
> 
> 赞同：8
> 
> 时间：2013-02-13T17:23:21.820
> 
> 标签：twitter-bootstrap

我正在使用弹出窗口来显示一些我在 ajax 请求后更新的信息。基本上，我正在更新触发悬停弹出框的元素的 data-content 属性。我正在检查 dom 并且数据内容肯定在更新，但弹出框的内容保持不变。我一直在尝试我能想到的一切，并且开始觉得我错过了一些简单的东西。有人可以帮我吗。她的一些代码：

```
<ul>
   <li class="player_name_li" rel="popover" data-placement="right"
    data-html="true" data-title="Dude" data-trigger="hover"
    data-content="<div class='custom_content'>Heres some content</div>" 
   data-original-title="" title=""><span class="player_name">Dude</span>
   </li>
</ul> 
```

然后是我的脚本

```
$(document).ready(function(){
$('.player_name_li').popover({
     template: '<div class="popover" style="width:250px;"><div class="arrow"></div><div class="popover-inner"><h3 class="popover-title"></h3><div class="popover-content"><p></p></div></div></div>'});

setInterval(function(){update_scores();}, 6000);

function update_scores()
{
    $.ajax({
        url: HOST_NAME,
        type: 'POST',
        //async: false,
        data: {player_array: my_data_is_generated_from_page)}
    }).done(function(results){
        var obj = $.parseJSON(results);     
        //this reloads the stupid popover data
        $.each(obj.fancy_return, function(index, value){
        $('.player_info_link').each(function(){             
            var huh = $(this).closest('li');
            huh.attr('data-content', value.new_table);
                });
        )};
} 
```

现在就像我说的那样，这一切都像我预期的那样工作，并更新了我通过检查 dom 验证的每个 popover li 的数据内容，但是当我将鼠标悬停在 li 上时，它仍然显示数据内容的旧内容。我浏览了一些帖子，并尝试在我的弹出框实例中按功能设置内容，`content: function(){return $(this).data('content');}`但这没有用。我也尝试过销毁和重新创建每个有效的元素，但由于它在间隔函数中并自动触发，如果你有一个打开的弹出框，它会关闭一个打开的弹出框，这使它看起来有问题。有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-17T18:35:37.740

`content: function(){return someDynamicContent}`正如您所提到的，您是正确的，正确的方法是给予。我看到您可能遇到的唯一问题是您可能没有意识到`$('.player_name_li').data('content')`不会自动与`$('.player_name_li').attr('data-content')`. 您需要确保您在 AJAX 回调中更改的那个与您在定义中引用的那个相同`content`。

如果你定义

```
$('.player_name_li')
  .popover({
    template: '<div class="popover" style="width:250px;"><div class="arrow"></div><div class="popover-inner"><h3 class="popover-title"></h3><div class="popover-content"><p></p></div></div></div>',
    content: function (){return $(this).data('content')}
  }) 
```

然后你需要使用

```
huh.data('content', value.new_table); 
```

如果你这样做，插件将在幕后完成所有重新初始化。

# javascript - 两种可供选择的 D3.js 缩放语法

> ID：14859268
> 
> 赞同：0
> 
> 时间：2013-02-13T17:23:22.143
> 
> 标签：javascript, svg, d3.js

假设我们有一个 y 尺度，它将数据域转换为每个数据元素 20 像素的范围带。

```
var y = d3.scale.ordinal()
    .domain(data)
    .rangeBands([0, 20 * data.length]); 
```

我通常会使用这个比例来以这种方式确定某物的 y 坐标：

```
svg.selectAll("rect")
    .data(data)
    .enter()
    .append("rect")
    .attr("y", y) 
```

但是在一些教程中，我看到了另一种语法。

```
.attr("y", function(d) { return y(d); }) 
```

我不确定这里发生了什么，我想在继续学习 D3 之前了解它。我知道`y`是一个函数，所以`d`括号内将是该函数的一个参数。但是我们已经在 y 函数中指定了数据输入。我很想阅读关于我们实际在做什么的解释`y(d)`。这两种选择的优缺点是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T17:26:52.687

我认为这是一个很小的区别，可能是复制和粘贴`attr`使用匿名函数设置的其他 s （如在第二种情况下）。应该没有理由包装`y`匿名函数。

# tomcat - 在服务器上设置多个 Cognos 实例

> ID：14859269
> 
> 赞同：1
> 
> 时间：2013-02-13T17:23:22.267
> 
> 标签：tomcat, multiple-instances, cognos

我们一直在尝试在 Windows 服务器机器上配置三个 Cognos 实例。出于某种原因，我们一次只能运行一个实例。

我们确实遵循了这些说明：[http ://pic.dhe.ibm.com/infocenter/cbi/v10r1m0/index.jsp?topic=%2Fcom.ibm.swg.im.cognos.inst_cr_winux.10.1.0.doc%2Finst_cr_winux_id5772RunningReportNetandCognosSeries8 .html](http://pic.dhe.ibm.com/infocenter/cbi/v10r1m0/index.jsp?topic=%2Fcom.ibm.swg.im.cognos.inst_cr_winux.10.1.0.doc%2Finst_cr_winux_id5772RunningReportNetandCognosSeries8.html)

我们无法解决这个问题。

任何人都可以提供任何建议吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T16:45:51.847

确保在添加新实例时重新安装产品。把它放在一个新目录中。

在 IIS 中，创建一个新的应用程序池 + 指向新 Cognos WebContent 目录的新虚拟目录

在新的虚拟目录中，创建新应用程序并将其命名为 cgi-bin，指向新 WebContent 目录的 cgi-bin 目录。确保它使用您在上一步中创建的新应用程序池

在 cgi-bin 的映射管理器中，添加一个新的脚本映射以从新的 cgi-bin 目录指向 cognosisapi.dll。

在 Cognos Configuration 中，确保将每个路径更改为放置新安装的位置

将默认端口 9300 更改为其他端口。将其他默认端口更改为唯一且未使用的端口（如果用于此安装，则端口 80 除外）

同样在 Cognos Configuration 中，更改 applications.xml 路径以确保它指向新安装

最后，确保已创建 Content Store、Logging、Audit 等数据库以及新 Cognos 实例使用的所有其他数据库，并且仅用于新实例。

祝你好运！

# javascript - onbeforeunload - 无法更改页面 UI

> ID：14859270
> 
> 赞同：0
> 
> 时间：2013-02-13T17:23:24.830
> 
> 标签：javascript, onbeforeunload

在我的`onbeforeunload`函数中，我们自动断开 ActiveX 控件与服务器的连接。
这个过程大约需要 3 或 4 秒（我们无法控制），所以我想显示一条消息，让用户知道一旦控件断开连接，他们的刷新/导航离开/关闭窗口就会发生。我不想`alert()`弹出一个窗口，只想向用户显示一条“异步”消息。

但是，我似乎无法从`onbeforeunload`. 我无法使用我拥有的 toast 消息类，甚至无法更改“状态” `div`，因为它们似乎没有做任何事情。

这是`onbeforeunload`功能的限制吗？我唯一的选择是使用`alert()`?

**编辑**
代码示例：

```
function handleWindowOnBeforeUnload() {
    //alert('Disconnecting from client...');    //Would rather not use an alert()
    ShowToast('Closing connection...');         //Doesn't show
    $('#statusDiv').html('Auto-disconnect...'); //Neither does this
    //This is what takes ~4 seconds
    acx.stopConnection();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T17:36:53.740

这是`onbeforeunload`功能的限制。

老实说，这种方法是有缺陷的，您应该考虑将您的应用程序更改为不需要`onbeforeunload`功能。

如果您需要断开服务器上的某些内容，您可以通过长轮询或 Web 套接字检测用户断开连接。我很确定这对于 ActiveX 是一样的。

# wordpress - wordpress 主题是否可以在没有 wordpress 的情况下工作？

> ID：14859274
> 
> 赞同：0
> 
> 时间：2013-02-13T17:23:32.717
> 
> 标签：wordpress, themes

我已经购买了这个 Wordpress 主题： [http](http://themeforest.net/item/wp-pro-real-estate-3-responsive-wordpress-theme/1763306?ref=contempoinc) ://themeforest.net/item/wp-pro-real-estate-3-responsive-wordpress-theme/1763306?ref=contempoinc 但我愚蠢到忘记了 Wordpress 需要安装以便对其进行自定义和处理。是否可以在不包含 Wordpress 的情况下在某些服务器上运行它，将其视为“完成”模板？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T17:34:47.127

不，不是以任何实际的方式。主题在 WordPress 中的运行方式与 FireFox 插件在 Firefox 中的运行方式或 Android 应用程序需要 Android 的方式（在较小程度上）一样。

您必须拥有 WordPress 才能使用 WordPress 主题。在没有 WordPress 的情况下运行主题的类和函数依赖项太多。如果没有 WordPress 核心管理事物，甚至加载主题并让所有模板工作几乎是不可能的。

最好从头开始，而不是尝试从 WordPress 主题中编辑“WordPress”。

# rtc - 如何访问以前签入的工作区存储库版本？

> ID：14859277
> 
> 赞同：1
> 
> 时间：2013-02-13T17:23:46.340
> 
> 标签：rtc

如何访问以前签入的工作区存储库版本？

我似乎能够与交付给流的最新更改集进行比较。我还可以查看/比较已签入我的存储库工作区的文件的先前版本吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T17:43:07.503

您可以通过右键单击（“显示历史记录”）来显示签入文件的历史记录。
从那里，在“历史”视图中，您可以右键单击任何版本并选择与任何其他版本（不仅仅是前一个版本）的“比较”。

如[该线程中所述](https://jazz.net/forum/questions/67501/can-i-set-the-file-back-to-a-previous-version)，您可以访问（打开）您想要的任何旧版本的内容，如果您只想恢复一个文件，这使您有机会用所述内容替换当前版本。

回滚将是一个稍微不同的问题：

> 如果创建当前版本的更改集仅包含该版本，则您可以通过丢弃该更改集将当前版本替换为先前版本。
> 
> 但是，如果该变更集修改了多个版本，则您不能只回滚该文件。[工作项 59688](https://jazz.net/jazz/web/projects/Rational%20Team%20Concert#action=com.ibm.team.workitem.viewWorkItem&id=59688)请求能够“拆分”更改集，因此您可以将此更改移动到它自己的单独更改集中（然后您可以将更改回滚到该文件）。

* * *

请注意，默认情况下，历史记录将是在您的 repo 工作区（签入）或流（交付）中完成的给定文件的历史记录。*在组件*
级别 完成的相同“显示历史记录” （当您在“组件”部分中右键单击一个组件并选择“显示存储库文件”时，将提供完整的历史记录（在任何流上完成），但不会t 显示在 repo 工作区 (chekins) 上完成的历史记录。

 *另请注意，只有 RTC4.0 具有[“签入历史”](https://jazz.net/library/article/191/)

> 这本质上是更改集中文件的历史记录。
> 
> 每次将文件签入更改集时，内容都会存储在存储库中。通常，您只能看到更改集中文件的最终版本。但有时你想回去看看文件的中间版本是什么。签入历史是每次将文件签入更改集时对文件所做更改的扩展。*

# jquery - 在 jquery UI 1.10.0 中按名称选择选项卡

> ID：14859281
> 
> 赞同：25
> 
> 时间：2013-02-13T17:23:59.337
> 
> 标签：jquery, jquery-ui

***在*** *jquery UI 1.10.0*之前，我曾经间接选择这样的选项卡：

```
$("#tabs").tabs( "select", 5 ); 
```

或者

```
$("#tabs").tabs( "select", "tab6" ); 
```

现在，使用相同的代码，使用*jquery UI 1.10.0*，您会收到一条错误消息，指出“***标签小部件实例没有这种方法 'select'*** ”。

我将代码更改为使用“选项”“活动”，如下所示：

```
$("#tabs").tabs( "option","active", 5 ); 
```

但是，看起来我只能使用索引。按 ID 选择不再起作用。因此，不要使用这样的 ID（这不起作用）：

```
$("#tabs").tabs( "option","active", "tab6" ); 
```

你必须这样做：

```
var idx = $('#tabs a[href="#tab6"]').parent().index();
$("#tabs").tabs( "option", "active", idx ); 
```

或者，以更短的形式

```
$("#tabs").tabs( "option", "active", $("#tab6").parent().index() ); 
```

我阅读了“更改日志”（[http://jqueryui.com/changelog/1.10.0/](http://jqueryui.com/changelog/1.10.0/)），但没有看到任何有关此更改的信息。

*在jquery UI 1.10.0*中是否有另一种按名称选择选项卡的方法？

我在这里为想要尝试的人创建了一个演示......

[http://jsbin.com/ojufej/1](http://jsbin.com/ojufej/1)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-13T21:51:22.580

jQuery[在 v.1.9 中](http://jqueryui.com/upgrade-guide/1.9/#deprecated-select-method)[弃用了该方法`select`](http://jqueryui.com/upgrade-guide/1.9/#deprecated-select-method)

> 该`select`方法已被弃用，只支持更新活动选项。您应该将所有对该方法的调用替换为对该`select`方法的调用`option`以更改活动选项。

* * *

[在 v.1.10 中，他们完全删除了它](http://jqueryui.com/changelog/1.10.0/)：

> 删除：选择方法。（[#](http://bugs.jqueryui.com/ticket/7156) [7156，7cf2719](http://github.com/jquery/jquery-ui/commit/7cf2719d0c406c7ff17c7e784c0e1e6eb23b562a)）_

* * *

最接近按名称选择选项卡的方法是使用`href`属性选择器和`trigger`方法。

```
$( "[href='#tab6']").trigger( "click" ); 
```

演示：http: [//jsfiddle.net/QRUGM/](http://jsfiddle.net/QRUGM/)

* * *

原始`select`方法做了[类似](https://github.com/jquery/jquery-ui/commit/7cf2719d0c406c7ff17c7e784c0e1e6eb23b562a#L1L1096)的事情：

```
this.anchors.eq( index ).trigger( this.options.event + this.eventNamespace ); 
```

只有他们通过索引而不是名称选择选项卡。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-05-14T19:00:22.937

我最终使用了这个（见例子）：

[http://jsfiddle.net/AzSUS/](http://jsfiddle.net/AzSUS/)

基本上，我添加了这些功能

```
$.fn.tabIndex = function () {
    return $(this).parent().find(this).index() - 1; 
};
$.fn.selectTabByID = function (tabID) {
    $(this).tabs("option", "active", $('#' + tabID).tabIndex());
};
$.fn.selectTabByIndex = function (tabIndex) {
    $(this).tabs("option", "active", tabIndex);
}; 
```

Ans 像这样使用它们：

```
$("#tabs").selectTabByIndex(0);

$("#tabs").selectTabByID('tab2'); 
```

正如您将在我的示例的 HTML 部分中看到的那样...

```
<div id="tabs">
  <ul>
    <li><a href="#tab1">[0] #tab1</a></li>
    <li><a href="#tab2">[1] #tab2</a></li>
    <li><a href="#tab3">[2] #tab3</a></li>
    <li><a href="#tab4">[3] #tab4</a></li>
  </ul> 
  <div id="tab1">Tab 1 Content</div>
  <div id="tab2">Tab 2 Content</div>
  <div id="tab3">Tab 3 Content</div>
  <div id="tab4">Tab 4 Content</div>
</div> 
```

...我有一个非常简单、定义明确的标签结构。

“真实”应用程序包含 3 个级别的选项卡

请参阅此示例，其中包含 2 个级别：

[http://jsfiddle.net/vgaTP/](http://jsfiddle.net/vgaTP/)

我不清楚的另一件事是：我不想触发选项卡上的“单击”，我只想“切换”到该选项卡，而不单击。对我来说，“单击”事件会加载选项卡的内容，我不想每次“选择”选项卡时都加载内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-14T08:17:33.377

如果您已经有大量引用这些已弃用函数的遗留代码，并且迁移是一件令人头疼的事情，请创建一个向后兼容模块来连接旧/新方法。

```
$.extend(true, $.ui.tabs.prototype, {
    select: function (indexOrId) {
        if (typeof indexOrId == "integer")
            this.option("select", indexOrId);
        else
            $("[href='#"+ indexOrId +"']", this.element).click();
    }
    // other methods..
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-09-30T19:44:19.010

真的很容易；

```
$("#tabs").tabs("option", "active", $("#tabs").find("#tab6").index()-1 ); 
```

其中**#tab6**是您要选择的选项卡的ID， # **tabs**是您的选项卡控件的ID。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-11T16:59:52.900

我使用了上面的 $("[href='#tab6']").trigger("click"); 由 Ayman Safadi 发布（谢谢！）连同一个隐藏的字段，它的作品很棒。这篇文章也很重要[http://geekswithblogs.net/dotNETvinz/archive/2010/07/09/jquery-tab-retain-selected-tab-across-postbacks-in-asp.net.aspx](http://geekswithblogs.net/dotNETvinz/archive/2010/07/09/jquery-tab-retain-selected-tab-across-postbacks-in-asp.net.aspx)与 Aymens 结合答案帮助我得到了最终答案:) 谢谢大家

```
 <script type="text/javascript">
    $(function () {

        var currTab = $("#<%= HFCurrTabIndex.ClientID %>").val();

        if (currTab == 0) {
            $("[href='#tab_1_1']").trigger("click");
        }

        if (currTab == 1) {
            $("[href='#tab_1_2']").trigger("click");
        }

        if (currTab == 2) {
            $("[href='#tab_1_3']").trigger("click");
        }

        if (currTab == 3) {
            $("[href='#tab_1_4']").trigger("click");
        }   

    });
</script> 
```

还要注意，下面的代码也可以工作，但由于某种原因将我的标签变成蓝色

```
 $('#tabs').tabs();
                   var currTab = $("#<%= HFCurrTabIndex.ClientID %>").val();
                   $('#tabs').tabs("option", "active", currTab); 
```

# python - 如何从 PDB 中导出变量？

> ID：14859282
> 
> 赞同：10
> 
> 时间：2013-02-13T17:23:59.290
> 
> 标签：python, pdb

想象以下场景：从 IPython shell 启动脚本，并在断点处调用 python 调试器。此时可以使用 PDB 命令分析代码和变量。但事实证明，变量的值通常需要更深入的研究。

是否可以将变量的值导出到 IPython shell？

我的具体用例：我在一个相当大的 numpy 数组中挣扎，它似乎没有正确的值。我知道我可以从 python 调试器运行任何 python 命令，但是将变量的值保存在不同的断点并在 IPython shell 中使用所有这些值会很有帮助。我正在成像类似的东西

```
ipdb> global var1; var1 = var
ipdb> continue
...
ipdb> global var2; var2 = var
ipdb> continue
... 
In [2]: abs(var1 - var2) # do some interesting calculations with IPython 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-13T18:00:20.813

您可以使用全局变量（）：

```
ipdb>__name__
'my_module'
ipdb> get_var = 'a value'
ipdb> globals()['myvar'] = get_var
ipdb> q
In [11]: my_module.myvar
Out[11]: 'a value' 
```

这假设断点已设置`my_module.py`，因此我们正在编辑模块的全局变量`my_module`。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-13T17:41:21.600

不是一个漂亮的解决方案，但工作：

```
ipdb> import cPickle; f=open('/tmp/dump1','w+'); cPickle.dump(var,f); f.close() 
```

...

```
ipdb> import cPickle; f=open('/tmp/dump2','w+'); cPickle.dump(var,f); f.close() 
```

然后

```
In [2]: var1 = cPickle.load(open('/tmp/dump1'))
In [3]: var2 = cPickle.load(open('/tmp/dump2')) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-13T19:37:01.877

你需要区分不同的`globals()`.
例如，假设我们有一个模块：mymodule.py

```
foo = 100
def test():
    bar = 200
    return bar 
```

我们在 的控制下运行它`pdb`。

```
>>> import pdb
>>> import mymodule
>>> foobar = 300
>>> pdb.run('mymodule.test()')
> <string>(1)<module>()
(Pdb) print foobar
300
(Pdb) print foo
*** NameError: name 'foo' is not defined
(Pdb) global foobar2; foobar2 = 301
(Pdb) print foobar2
301 
```

一开始，也就是执行之前`test()`，pdb中的环境就是你当前的`globals()`. 因此`foobar`已定义，而`foo`未定义。
然后我们执行`test()`并在结束时停止`bar = 200`

```
-> bar = 200
(Pdb) print bar
200
(Pdb) print foo
100
(Pdb) print foobar
*** NameError: name 'foobar' is not defined
(Pdb) global foo2; foo2 = 101
(Pdb) print foo2
101
(Pdb) c
>>> 
```

pdb 中的环境已更改。它使用`mymodule`'s `globals()`in `test()`。因此定义了'foobar foo' `is not defined. while`。

我们导出了两个变量`foobar2`和`foo2`. 但他们生活在不同的范围内。

```
>>> foobar2
301
>>> mymodule.foobar2

Traceback (most recent call last):
  File "<pyshell#16>", line 1, in <module>
    mymodule.foobar2
AttributeError: 'module' object has no attribute 'foobar2'
>>> mymodule.foo2
101
>>> foo2

Traceback (most recent call last):
  File "<pyshell#18>", line 1, in <module>
    foo2
NameError: name 'foo2' is not defined 
```

您已经找到了解决方案。但它的工作方式略有不同。

# c++ - 获取指向现有 COM 对象的指针？

> ID：14859287
> 
> 赞同：1
> 
> 时间：2013-02-13T17:24:08.697
> 
> 标签：c++, windows, com, credential-providers

如何获得指向在同一台机器上以不同进程创建的现有 COM 对象的指针？

我有一个[凭据提供程序](http://msdn.microsoft.com/en-us/magazine/cc163489.aspx)，它创建一个继承[ICredentialProvider](http://msdn.microsoft.com/en-us/library/windows/desktop/bb776042%28v=vs.85%29.aspx)的对象。ICredentialProvider 有一个方法[SetSerialization](http://msdn.microsoft.com/en-us/library/windows/desktop/bb776043%28v=vs.85%29.aspx)。

我还有一个服务，我需要从中调用 Credential Provider 的 SetSerialization 方法。问题是，我在 C++ 方面有经验，但我是 COM 的初学者，所以我不知道如何。Microsoft 的[示例“CSampleProvider”的](http://www.microsoft.com/en-us/download/details.aspx?id=5372)评论说要从“远程客户端”调用 SetSerialization 方法，但没有解释如何 - 我假设他们假设您知道 COM。

我整天都在阅读[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/ms694363%28v=vs.85%29.aspx)和各种关于 COM 的[教程，我已经到了可以在服务中](http://www.codeproject.com/Articles/633/Introduction-to-COM-What-It-Is-and-How-to-Use-It)[创建我的凭据提供程序的实例](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686615%28v=vs.85%29.aspx)的地步，但是我需要获取一个指向凭据提供程序对象的指针存在，而不是创建一个新的，我不知道如何。

它是如何完成的？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T09:27:17.223

规范方法是通过[`Running Object Table`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms695276%28v=vs.85%29.aspx). 假设对象有一个“名字对象”，即一个 COM 名称，并且该名字对象已注册。

请注意，ROT 是 IPC 的一种形式，特别是 COM 对象的系统范围目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T08:09:11.137

正如雷蒙德所说，简而言之，你不能——至少不能通过任何内置的 COM 功能。如果必须，它需要通过某种形式的[进程间通信](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365574%28v=vs.85%29.aspx)来传递。

# iphone - 你能解释一下为什么这个 NavigationController 设置有效吗

> ID：14859289
> 
> 赞同：0
> 
> 时间：2013-02-13T17:24:11.107
> 
> 标签：iphone, ios, uiviewcontroller, uinavigationcontroller, modalviewcontroller

我正在尝试了解如何设置 NavigationController。我不明白为什么这段代码同时适用于 pushViewController 和 presentModalViewController。我认为它必须是其中之一。

对于上下文，这是一个创建 UIImagePickerController 的 UIViewController。之后有两个视图控制器，第一个（EditPictureViewController）编辑图像本身，第二个编辑属性。相信我应该使用 presentModalViewController。

...还有一种方法可以不关闭模态视图控制器，这样我就可以在 EditPictureViewController 上有一个重拍图片按钮？

谢谢。

```
- (void)viewDidLoad {

    [super viewDidLoad];
    self.navController = [[UINavigationController alloc] init]; }

- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {

    [self dismissModalViewControllerAnimated:NO];
    EditPictureViewController *viewController = [[EditPictureViewController alloc] initWithImage:image];
    [viewController setModalTransitionStyle:UIModalTransitionStyleCrossDissolve];
    [self.navController setModalTransitionStyle:UIModalTransitionStyleCrossDissolve];
    [self.navController pushViewController:viewController animated:NO];
    [self presentModalViewController:self.navController animated:YES]; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T18:43:41.290

您拥有的设置不是“正常的完成方式。标准范例是在 didFinishPickingMediaWithInfo: 方法中创建导航控制器，并将其根视图控制器设置为 viewController，而不是推送它。您通常会想到“推送”移动到下一个控制器,而您实际上只是以非标准方式设置根视图控制器.此外,您应该使用当前方法来呈现和关闭模态视图控制器-您正在使用的方法使用已贬值。我不确定您是否需要同时设置这两种过渡样式。尝试将其中一种注释掉，看看它是否仍然有效。

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {

    [self dismissViewControllerAnimated:NO completion:nil];
    EditPictureViewController *viewController = [[EditPictureViewController alloc] initWithImage:image];
    self.navController = [[UINavigationController alloc] initWithRootViewController:viewController];
    [viewController setModalTransitionStyle:UIModalTransitionStyleCrossDissolve];
    [self.navController setModalTransitionStyle:UIModalTransitionStyleCrossDissolve];
    [self presentViewController:self.navController animated:YES completion:nil]; 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T17:55:33.027

这会将 EditPictureViewController 推送到 NavigationController 的视图堆栈上。

```
[self.navController pushViewController:viewController animated:NO]; 
```

然后在这里展示 NavigationController：

```
[self presentModalViewController:self.navController animated:YES]; 
```

我的意思是，您所做的只是从视图控制器呈现模态视图，而该模态恰好是 NavigationController。

# matlab - 从 Matlab 将不寻常的单元格数组写入 .csv 文件

> ID：14859294
> 
> 赞同：1
> 
> 时间：2013-02-13T17:24:18.427
> 
> 标签：matlab, csv

因此，我正在探索该主题的论坛，但找不到回答我的问题的相关帖子，所以就到这里。我想从 Matlab 将元胞数组另存为 .csv 文件。我的单元格数组的结构如下（这是给我带来麻烦的部分）

```
>> mycell

mycell = 

  Columns 1 through 8

    [76x1 double]    {76x1 cell}    {76x1 cell}    [76x75 double]    [76x1 double]    [76x1 double]    {76x1 cell}    {76x1 cell}

  Columns 9 through 17

    {76x1 cell}    {76x1 cell}    {76x1 cell}    {76x1 cell}    {76x1 cell}    {76x1 cell}    {76x1 cell}    {76x1 cell}    {76x1 cell}

  Column 18

    {76x1 cell} 
```

所以我一直在尝试自己无济于事的是：

```
>> 
[nrows,ncols]= size(mycell);

filename = output_file;
fid = fopen(filename, 'w');

for row=1:nrows
    fprintf(fid, '%d,%s,%s,%d,%d,%d,%s,%s,%s,%s,%s,%s,%s,%s,%s,%s,%s,%s\n', mycell{row,:});
end

fclose(fid);
??? Error using ==> fprintf
Function is not defined for 'cell' inputs. 
```

任何建议都非常感谢！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T17:46:54.730

元胞数组的不规则结构将使写入 CSV 文件变得困难。前六个索引是矩阵，而其余索引都是元胞数组。我怀疑将它们全部转换为矩阵将解决您的问题。

# linux - 显示哪些程序或库链接到特定的共享库

> ID：14859297
> 
> 赞同：0
> 
> 时间：2013-02-13T17:24:22.303
> 
> 标签：linux, command-line, shared-libraries

我正在尝试查找哪些程序或共享库链接到我系统上的特定共享库。我是 find 命令的新手。我想我应该说我知道 ldd，但我正在寻找自动搜索。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T17:30:24.990

尝试这个：

```
 ldd program 
```

它应该打印出所有必要的共享库

# sql - SQL Server 的案例和输出

> ID：14859300
> 
> 赞同：0
> 
> 时间：2013-02-13T17:24:27.677
> 
> 标签：sql, sql-server-2008

我需要从多个表中选择带有案例的某些记录，并且我需要根据我将创建的某些案例来选择它们。

这是我到目前为止的查询：

```
select distinct top 10  
        QuestionTag =( CASE 
                    WHEN qt.id = 98 THEN 'Save the Sale TP'
                    WHEN qt.id = 99 THEN 'Close the Loop'
                    WHEN qt.id != 98 AND qt.id != 99 THEN ''
                    WHEN qt.id = 98 AND qt.id = 99 THEN 'Save the Sale TP'
                END),
        c.contactid as contactid, c.first, c.last,
        st.datecomplete, st.ownerIdfk, st.finalScore, st.surveyid,
        cc.clientcontactid, cc.leadsource,
        se.eventdate, se.ProcedureName, se.LocationName, se.salesperson, se.SpecialistName, st.surveyname
        from sigweb.dbo.survey_tracking st
        join sigweb.dbo.survey_types_main stm on st.surveyid =  stm.surveyidfk      
        join sigweb.dbo.contact c on st.contactid = c.contactid
        join survey.dbo.client_contacts cc on c.contactid = cc.contactidfk
        join survey.dbo.survey_events se on c.contactid = se.contactidfk 
        join survey.dbo.results r on r.owneridfk = st.owneridfk
        left join survey.dbo.questionsAdmin qa on qa.questionidfk = r.questionidfk
        join survey.dbo.QuestionTags qt on qt.id=qa.tagidfk 
```

这是输出的一部分：

```
QuestionTag             ContactID               First   Last  
-----------             ---------               -----   ----  
                        2012082911569010000001  John    Reardon 
Close the Loop          2012082911569010000001  John    Reardon 
Save the Sale TP        2012082911569010000001  John    Reardon                               
                        2012082911569010000003  Beverly Conley 
Close the Loop          2012082911569010000003  Beverly Conley 
Save the Sale TP        2012082911569010000003  Beverly Conley  
                        2012082911569010000009  Larry   Grigsby     
                        2012082911569010000011  Brenda  Bain    
                        2012082911569010000012  Richard Pecora  
                        2012082911569010000018  Karl    Oliszczak 
```

我需要添加一个“位置”来根据这些情况只选择一个重复记录：

如果一个contactid只有CTL然后选择
如果一个contactid只有STS TP然后选择
如果一个联系人出现不止一次并且它有''并且CTL和STS TP然后只输出STS TP
如果一个联系人没有CL或STS TP 然后根本不输出触点。

我在想我需要在 WHERE 子句中再添加一个案例，但我想知道是否有另一种方法可以节省我的时间和代码编写

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T18:55:49.240

我认为您需要更多类似的东西，除非您的要求与您发布的不同：

```
SELECT
    datecomplete, ownerIdfk, finalScore, surveyid, surveyname, contactid
    CASE WHEN max_questionSort = 98 THEN 'Save the Sale TP' ELSE  'Close the Loop' END AS questionTag,
    c.contactid AS contactid, c.FIRST, c.LAST,
    cc.clientcontactid, cc.leadsource,
    se.eventdate, se.ProcedureName, se.LocationName, se.salesperson, se.SpecialistName
FROM
    (SELECT 
        datecomplete, ownerIdfk, finalScore, surveyid, surveyname, contactid
        MAX(QuestionSort) AS max_questionSort 
    FROM
        (SELECT 
            CASE 
                    WHEN questionidfk = 98 THEN 1
                    WHEN questionidfk = 99 THEN 0
            END AS QuestionSort ,
            datecomplete, st.ownerIdfk, finalScore, surveyid, surveyname, contactid
        FROM 
            sigweb.dbo.survey_tracking st INNER  JOIN 
            survey.dbo.results r ON 
            r.owneridfk = st.owneridfk
         WHERE
            questionidfk IN (98,99)) w 
    GROUP BY
        datecomplete, ownerIdfk, finalScore, surveyid, surveyname, contactid) st INNER JOIN 
        JOIN sigweb.dbo.contact c ON st.contactid = c.contactid
        JOIN survey.dbo.client_contacts cc ON c.contactid = cc.contactidfk
        JOIN survey.dbo.survey_events se ON c.contactid = se.contactidfk 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T17:51:31.180

尝试这个。

```
;with cte as (
 select QuestionTag =( CASE 
                        WHEN qt.id = 98 THEN 'Save the Sale TP'
                        WHEN qt.id = 99 THEN 'Close the Loop'
                        ELSE ''
                      END) ,
                     --Other_List_of_Columns,
                     row_number() over(partition by c.contactid order by 
                       case when qt.id = 98 then 1 
                            when qt.id = 99 then 2
                       else 3 end) rn
  From your_list_of_tables
)
select top (10) * from cte where rn = 1 and QuestionTag <> '' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T19:07:18.390

Create a CTE that provides the question id's for each contact. Then use that in your larger query to pick the appropriate rows.

```
; with ContactQuestions as (
  select ContactId, QuestionId,
    case when qt.id = 98 then 1 else 0 end as STSTP,
    case when qt.id = 99 then 1 else 0 end as CTL
    from many_joined_tables ),
  ...

where case
  -- Only STSTP.
  when STSTP = 1 and not exists ( select 42 from ContactQuestions where ContactId = c.ContactId and CTL = 1 ) then 1
  -- Only CTL.
  when CTL = 1 and not exists ( select 42 from ContactQuestions where ContactId = c.ContactId and STSTP = 1 ) then 1
  -- Multiple rows for a contact and they have CTL and STSTP then output the STSTP row.
  --   Since only CTL or STSTP can be set for a single row this is equivalent to checking for
  --   any CTL row and the current row being STSTP.
  when exists ( select 42 from ContactQuestions where ContactId = c.ContactId and CTL = 1 ) and STSTP = 1 then 1
  else 0
  end = 1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T21:08:22.477

这是我改进的尝试。它做了它应该做的事情，但它有点慢。

```
 select 
        qt.questiontag, qt.id,
        c.contactid as contactid, c.first, c.last,
        st.datecomplete, st.ownerIdfk, st.finalScore, st.surveyid,
        cc.clientcontactid, cc.leadsource,
        se.eventdate, se.ProcedureName, se.LocationName, se.salesperson, se.SpecialistName, st.surveyname
        from sigweb.dbo.survey_tracking st
        join sigweb.dbo.survey_types_main stm on st.surveyid =  stm.surveyidfk      
        join sigweb.dbo.contact c on st.contactid = c.contactid
        join survey.dbo.client_contacts cc on c.contactid = cc.contactidfk
        join survey.dbo.survey_events se on c.contactid = se.contactidfk and st.surveyid = se.surveytypeidfk
        left join survey.dbo.questiontags qt on 
            (select top 1 qa.tagidfk
            from survey.dbo.results r
            join survey.dbo.questionsadmin qa on r.answeridfk = qa.answeridfk and (qa.tagidfk = 98 or qa.tagidfk = 99)
            where st.owneridfk = r.owneridfk
            order by qa.tagidfk ) = qt.id
        where st.datecomplete > '2013-02-01' 
```

# file - 想要将特定字符从 TextFile 更改为其他字符。不想写，只想打印到控制台

> ID：14859302
> 
> 赞同：0
> 
> 时间：2013-02-13T17:24:27.897
> 
> 标签：file, python-3.x, character

我有一个包含大量数据的文本文件。在此文本文件的某些情况下，我尝试替换其中的以下字母：A->G、C->T 等。基本上，我知道我需要阅读该文件。搜索文件的行。找到这些字符的出现然后替换。基本上 --> ACTG 应该是 GTCA 来的。

到目前为止，我的代码如下：

```
f = open("actg.txt", "r")

table = str.maketrans("actgACTG", "gtcagtca")

print(f.read().translate(str.maketrans('ACTGactg','gtcagtca')))

print(table) 
```

这里的输出工作正常。但是，它正在更改整个文件中此类字母的所有实例。

如果我只希望字符在这个特定序列中时像这样改变怎么办？否则，它会更改整个文件中的每个“a”和每个“g”。我想保持正常句子的完整性，并且仅在存在这种特定序列时才进行此更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T17:31:27.127

您可以使用 re lib 同时更改大小写：

```
In [3]: re.sub('[Aa]', 'g', 'HAllat')
Out[3]: 'Hgllgt' 
```

这是[文档](http://docs.python.org/2/library/re.html#re.sub)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T17:29:23.030

您可以`str.translate`与`string.maketrans`(Python 2.x) 或`str.maketrans`(Python 3.x) 结合使用：

Python 2.x：

```
>>> import string
>>> instring = 'ABCD'
>>> instring.translate(string.maketrans('ACac','gtgt'))
'gBtD' 
```

Python 3.x：

```
>>> instring = 'ABCD'
>>> instring.translate(str.maketrans('ACac','gtgt'))
'gBtD' 
```

`translate`需要 256 个字符的映射表。这就是`string.maketrans`创建，将每个字符映射到自身，除了第一个参数字符串中的字符映射到第二个参数字符串中的相应字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T17:30:41.947

蟒蛇2：

```
>>> from string import maketrans
>>> table = maketrans("acgtACGT", "gtcagtca") 
```

蟒蛇 3：

```
>>> table = str.maketrans("acgtACGT", "gtcagtca") 
```

两个都：

```
>>> "acGTagTTcGTAC".translate(table)
'gtcagcaatcagt' 
```

# c# - 使用 Process.Start() 打开多个文档

> ID：14859309
> 
> 赞同：2
> 
> 时间：2013-02-13T17:24:42.787
> 
> 标签：c#, .net

我正在尝试编写一个程序，只需单击一下即可打开多个文档，并为每个单独的文档窗口指定大小和位置。在我尝试打开第二个 Word 或 Excel 文档之前，我在测试打开和定位操作的基本程序方面取得了不错的成功。

```
using System;
using System.Diagnostics;
using System.Runtime.InteropServices;

namespace ConsoleApplication1
{
    class Program
    {
        [DllImport("user32.dll", SetLastError = true)]
        internal static extern bool MoveWindow(IntPtr hWnd, int X, int Y, int nWidth, int nHeight, bool bRepaint);

        static void Main(string[] args)
        {
            Process resize = new Process();

            resize.StartInfo.FileName = "C:\\Users\\Pete\\Desktop\\TEST1.txt";
            resize.Start();
            resize.WaitForInputIdle();
            MoveWindow(resize.MainWindowHandle, 10, 10, 500, 500, true);

            resize.StartInfo.FileName = "C:\\Users\\Pete\\Desktop\\MSWTEST1.docx";
            resize.Start();
            resize.WaitForInputIdle();
            MoveWindow(resize.MainWindowHandle, 20, 20, 500, 500, true);

            resize.StartInfo.FileName = "C:\\Users\\Pete\\Desktop\\MSXTEST1.xlsx";
            resize.Start();
            resize.WaitForInputIdle();
            MoveWindow(resize.MainWindowHandle, 30, 30, 500, 500, true);

            resize.StartInfo.FileName = "C:\\Users\\Pete\\Desktop\\TEST2.txt";
            resize.Start();
            resize.WaitForInputIdle();
            MoveWindow(resize.MainWindowHandle, 40, 40, 500, 500, true);

            resize.StartInfo.FileName = "C:\\Users\\Pete\\Desktop\\MSWTEST2.docx";
            resize.Start();
            resize.WaitForInputIdle();
            MoveWindow(resize.MainWindowHandle, 50, 50, 500, 500, true);

            resize.StartInfo.FileName = "C:\\Users\\Pete\\Desktop\\MSXTEST2.xlsx";
            resize.Start();
            resize.WaitForInputIdle();
            MoveWindow(resize.MainWindowHandle, 60, 60, 500, 500, true);
         }
    }
} 
```

该程序尝试使用记事本打开两个 .txt 文件，使用 MSWord 打开两个 .docx 文件，使用 MSExcel 打开两个 .xlsx 文件。无论我以何种顺序打开程序中的文档，都会在打开第二个 Word 或 Excel 文件后立即在 WaitForInputIdle 行上引发 InvalidOperationException。任何解决此错误的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T17:34:44.783

当您尝试打开 Word 或 Excel 文档时，正在执行的应用程序（取决于版本）只是查找已在运行的相同应用程序，要求它打开一个新的“窗口”并关闭。这意味着您实际运行的应用程序永远不会真正得到消息泵——这会导致`WaitForInputIdle`抛出一个`InvalidOperationException`（如[记录](http://msdn.microsoft.com/en-us/library/windows/desktop/ms687022%28v=vs.85%29.aspx)的）

我建议您只是尝试捕获并忽略该异常-我不确定是否有任何方法可以判断 Word/Excel 是否通过`Process.Start` 更新成功打开了文档：从概念上讲，如果您*确实*遇到了异常，则意味着 Word/Excel 发现另一个正在运行实例并切换到它——所以，大概这是某种程度的“成功”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T17:34:07.237

当您打开第二个 Word 或 Excel 文档时，启动进程检测到 Word/Excel 已启动，并简单地将文档信息发送给其他进程并关闭。

更简单的应用程序（例如记事本）没有这种行为。

这意味着，在这种情况下`Process`，您第二次启动的实例非常值得 zilch 以控制正在打开的文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T17:30:36.077

如何使用多个 Process 对象或尝试像这样的 MS Office INterrop 程序集

[http://www.c-sharpcorner.com/UploadFile/mgold/CreatingandOpeningMicrosoftDocumentfrom.NETUsingCSharp11262005050939AM/CreatingandOpeningMicrosoftDocumentfrom.NETUsingCSharp.aspx](http://www.c-sharpcorner.com/UploadFile/mgold/CreatingandOpeningMicrosoftDocumentfrom.NETUsingCSharp11262005050939AM/CreatingandOpeningMicrosoftDocumentfrom.NETUsingCSharp.aspx)

# django - django 模板列表变量中的最后一个元素

> ID：14859312
> 
> 赞同：38
> 
> 时间：2013-02-13T17:25:01.250
> 
> 标签：django

我想知道如何从上下文对象中过滤掉列表变量的最后一个元素。

```
{% for d in data %}
    {{ d }},
{% endfor %} 
```

我不想`,`在最后一个元素之后。谢谢你。

**注意**：这只是一个假设的例子。我知道我们可以在这里使用连接过滤器来实现同样的事情

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2013-02-13T18:15:22.547

你的意思是 -

```
{% for d in data %}
    {% if forloop.last %}
        {{ d }}
    {% else %}
        {{ d }},
    {% endif %}
{% endfor %} 
```

看看循环模板 上的[django 文档](https://docs.djangoproject.com/en/1.9/ref/templates/builtins/#for)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-02-13T17:26:30.967

使用`{{ data|join:", " }}`，它完全符合您的需要。

[https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#join](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#join)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-11-01T20:17:40.243

或者你也可以试试这个——

```
{% for d in data %}
    {{ d }} {% if not forloop.last %},{% endif %}
{% endfor %} 
```

查看有关循环模板的[文档](https://docs.djangoproject.com/en/1.4/ref/templates/builtins/#for)

# css - CSS3 旋转动画

> ID：14859322
> 
> 赞同：165
> 
> 时间：2013-02-13T17:25:14.120
> 
> 标签：css, css-animations

我已经查看了很多演示，但不知道为什么我不能让 CSS3 spin 发挥作用。我正在使用 Chrome 的最新稳定版本。

小提琴：http: [//jsfiddle.net/9Ryvs/1/](http://jsfiddle.net/9Ryvs/1/)

```
div {
  margin: 20px;
  width: 100px;
  height: 100px;
  background: #f00;
  -webkit-animation-name: spin;
  -webkit-animation-duration: 40000ms;
  -webkit-animation-iteration-count: infinite;
  -webkit-animation-timing-function: linear;
  -moz-animation-name: spin;
  -moz-animation-duration: 40000ms;
  -moz-animation-iteration-count: infinite;
  -moz-animation-timing-function: linear;
  -ms-animation-name: spin;
  -ms-animation-duration: 40000ms;
  -ms-animation-iteration-count: infinite;
  -ms-animation-timing-function: linear;
  -o-transition: rotate(3600deg);
}
```

```
<div></div>
```

* * *

## 回答 #1

> 赞同：323
> 
> 时间：2013-02-13T17:38:07.697

要使用 CSS3 动画，您还必须定义实际的动画关键帧（*您命名`spin`*的）

阅读[https://developer.mozilla.org/en-US/docs/CSS/Tutorials/Using_CSS_animations](https://developer.mozilla.org/en-US/docs/CSS/Tutorials/Using_CSS_animations)了解更多信息

> 配置动画的时间后，您需要定义动画的外观。这是通过使用[`@keyframes`](https://developer.mozilla.org/en-US/docs/CSS/@keyframes)at 规则建立两个或更多关键帧来完成的。每个关键帧都描述了动画元素在动画序列期间的给定时间应如何渲染。

* * *

**演示：**

```
div {
    margin: 20px;
    width: 100px;
    height: 100px;
    background: #f00;
    -webkit-animation-name: spin;
    -webkit-animation-duration: 4000ms;
    -webkit-animation-iteration-count: infinite;
    -webkit-animation-timing-function: linear;
    -moz-animation-name: spin;
    -moz-animation-duration: 4000ms;
    -moz-animation-iteration-count: infinite;
    -moz-animation-timing-function: linear;
    -ms-animation-name: spin;
    -ms-animation-duration: 4000ms;
    -ms-animation-iteration-count: infinite;
    -ms-animation-timing-function: linear;

    animation-name: spin;
    animation-duration: 4000ms;
    animation-iteration-count: infinite;
    animation-timing-function: linear;
}
@-ms-keyframes spin {
    from { -ms-transform: rotate(0deg); }
    to { -ms-transform: rotate(360deg); }
}
@-moz-keyframes spin {
    from { -moz-transform: rotate(0deg); }
    to { -moz-transform: rotate(360deg); }
}
@-webkit-keyframes spin {
    from { -webkit-transform: rotate(0deg); }
    to { -webkit-transform: rotate(360deg); }
}
@keyframes spin {
    from {
        transform:rotate(0deg);
    }
    to {
        transform:rotate(360deg);
    }
}
```

```
<div></div>
```

```
@-moz-keyframes spin {
    from { -moz-transform: rotate(0deg); }
    to { -moz-transform: rotate(360deg); }
}
@-webkit-keyframes spin {
    from { -webkit-transform: rotate(0deg); }
    to { -webkit-transform: rotate(360deg); }
}
@keyframes spin {
    from {transform:rotate(0deg);}
    to {transform:rotate(360deg);}
} 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2013-02-13T17:35:20.440

您尚未指定任何关键帧。[我让它在这里工作](http://jsfiddle.net/9Ryvs/8/)。

```
div {
    margin: 20px;
    width: 100px; 
    height: 100px;    
    background: #f00;
    -webkit-animation: spin 4s infinite linear;
}

@-webkit-keyframes spin {
    0%  {-webkit-transform: rotate(0deg);}
    100% {-webkit-transform: rotate(360deg);}   
} 
```

你实际上可以用这个做很多很酷的事情。[这是我之前做的一个](http://jezenthomas.com/arcify)。

:)

**注意如果您使用**[-prefix-free](http://leaverou.github.com/prefixfree/)，您可以跳过必须写出所有前缀。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2015-07-30T09:56:58.987

从最新的 Chrome/FF 和 IE11 开始，不需要 -ms/-moz/-webkit 前缀。这是一个较短的代码（基于以前的答案）：

```
div {
    margin: 20px;
    width: 100px;
    height: 100px;
    background: #f00;

    /* The animation part: */
    animation-name: spin;
    animation-duration: 4000ms;
    animation-iteration-count: infinite;
    animation-timing-function: linear;
}
@keyframes spin {
    from {transform:rotate(0deg);}
    to {transform:rotate(360deg);}
} 
```

现场演示：http: [//jsfiddle.net/9Ryvs/3057/](http://jsfiddle.net/9Ryvs/3057/)

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2017-06-05T15:00:58.027

带有字体真棒字形的 HTML。

```
<span class="fa fa-spinner spin"></span> 
```

CSS

```
@-moz-keyframes spin {
    to { -moz-transform: rotate(360deg); }
}
@-webkit-keyframes spin {
    to { -webkit-transform: rotate(360deg); }
}
@keyframes spin {
    to {transform:rotate(360deg);}
}

.spin {
    animation: spin 1000ms linear infinite;
} 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2019-08-28T06:39:04.603

给出正确 359 度的唯一答案：

```
@keyframes spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(359deg); }
}

&.active {
  animation: spin 1s linear infinite;
} 
```

这是一个有用的渐变，因此您可以证明它正在旋转（如果它是一个圆圈）：

```
background: linear-gradient(to bottom, #000000 0%,#ffffff 100%); 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-02-13T17:37:31.723

要旋转，您可以使用关键帧和变换。

```
div {
    margin: 20px;
    width: 100px; 
    height: 100px;    
    background: #f00;
    -webkit-animation-name: spin;
    -webkit-animation-duration: 40000ms;
    -webkit-animation-iteration-count: infinite;
    -webkit-animation-timing-function: linear;
    -moz-animation-name: spin;
    -moz-animation-duration: 40000ms;
    -moz-animation-iteration-count: infinite;
    -moz-animation-timing-function: linear;
    -ms-animation-name: spin;
    -ms-animation-duration: 40000ms;
    -ms-animation-iteration-count: infinite;
    -ms-animation-timing-function: linear;
}

@-webkit-keyframes spin {
  from {
    -webkit-transform:rotate(0deg);
  }

  to {
    -webkit-transform:rotate(360deg);
  }
} 
```

[例子](http://jsfiddle.net/axrwkr/J9ySj/)

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2015-12-03T08:02:07.790

为了完整起见，这里有一个真正缩短代码的 Sass / Compass 示例，编译后的 CSS 将包含必要的前缀等。

```
div
  margin: 20px
  width: 100px 
  height: 100px    
  background: #f00
  +animation(spin 40000ms infinite linear)

+keyframes(spin)
  from
    +transform(rotate(0deg))
  to
    +transform(rotate(360deg)) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-11-01T07:55:22.320

```
@keyframes spin {
    from {transform:rotate(0deg);}
    to {transform:rotate(360deg);}
} 
```

这会让你回答这个问题

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-01-20T15:11:31.853

对于仍在搜索一些很酷且简单的微调器的人，我们在 fontawesome 网站上有多个微调器示例：[https ://fontawesome.com/v4.7.0/examples/](https://fontawesome.com/v4.7.0/examples/)

您只需使用调试器检查所需的微调器并复制 css 样式。

# javascript - UIWebView 写入磁盘方法

> ID：14859324
> 
> 赞同：0
> 
> 时间：2013-02-13T17:25:16.597
> 
> 标签：javascript, ios, objective-c, xcode, uiwebview

我正在开发一个 UIWebView 应用程序，并从 javascript 代码中的服务器获取一些信息。我希望将 JSON 文本写入文档目录中的文件。我的 javascript 文件的开头部分是：

```
WW.FS = {
    init: function(animation, back, fn) {
        var me = window.ww ? ww.fs : null;

        if (me != null) {
            PL.tellNative('pl:closeMore');
        }

        if (!me || !back) {
            Ext.Ajax.request({
                url: WW.getBS(),
                method: 'POST',
                params: {ajax: true, source: 'Touch', ID: 'INT'},
                success: function(response) {
                    try {
                        data = JSON.parse(response.responseText); <--- want to write this to the documents directory!!
                    } catch(e) {
                        PL.indicatorOff();
                        return false;
                    } 
```

我需要以某种方式将变量“数据”返回到我从中调用 javascript 文件的 .m 文件，或者将其写入文档目录，以便稍后阅读。有人知道如何将变量写入磁盘吗？我一直在寻找一种将数据写入文档目录的方法，但无济于事。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T18:06:49.920

我知道从 UIWebView 中的 javascript 获取数据返回本机代码的唯一方法是通过 UIWebViewDelegate 方法 webView:shouldStartLoadWithRequest:navigationType。基本上，此调用允许您过滤在 UIWebView 中进行的 URL 加载调用。如果应该继续加载，则覆盖此方法并返回 YES。诀窍是在 URL 中嵌入一些字符串，这会使 URL 无效，并且您知道这意味着您正在尝试传递数据。这是一个例子：

```
- (BOOL)webView:(UIWebView*)webView shouldStartLoadWithRequest:(NSURLRequest*)request navigationType:(UIWebViewNavigationType)navigationType
{
 NSString *requestString = [[[request URL] absoluteString] stringByReplacingPercentEscapesUsingEncoding: NSUTF8StringEncoding];
NSArray *requestArray = [requestString componentsSeparatedByString:@":##key_val##"];

    if ([requestArray count] > 1)
    {
        //...do your custom stuff here, all the values sent from javascript are in 'requestArray'
        return NO;//abort loading since this is an invalid URL anyway
    }
    else
    {
        return YES;
    }
} 
```

在您的 javascript 中添加如下内容：

```
function sendToApp(_key, _val)
{
    var iframe = document.createElement("IFRAME");
    iframe.setAttribute("src", _key + ":##key_val##" + _val);
    document.documentElement.appendChild(iframe);
    iframe.parentNode.removeChild(iframe);
    iframe = null;
} 
```

因此，要将数据从 javascript 发送到本机代码，您可以执行以下操作：

```
sendToApp('state', event.data); 
```

# tfs - git-tf 如何避免在每次签入时指定我的凭据

> ID：14859327
> 
> 赞同：13
> 
> 时间：2013-02-13T17:25:24.870
> 
> 标签：tfs, git-tf

我的问题正是标题。

每次我`git-tf checkin`在连接到 TFS 时在命令提示符中运行该命令时，它都会询问我的用户名和密码。我怎样才能避免这种情况？要么让它以当前用户身份登录，要么将凭据存储在配置文件中的某处。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-14T17:40:36.637

到目前为止，最安全的方法是不存储密码，而是通过 Kerberos 或 NTLM 使用单点登录：

如果您在 Windows 上并登录到与您的 TFS 服务器具有信任关系的域，那么您不需要指定用户名和密码。

如果您在 Windows 上并设置了“影子帐户”，则无需指定用户名和密码。当您与 TFS 服务器没有域信任关系*但*您使用与 TFS 服务器上的帐户相同的用户名和密码登录到本地计算机时，会发生这种情况。

如果您使用的是 Unix 平台，则可以使用 Kerberos 进行单点登录。当您从 Active Directory 服务器本身获得票证时，这很可能是这种情况，例如`kinit activedirectory.domain.name`.

类似地，如果您在 Unix 上并且有一个 Kerberos 票证到与 TFS 服务器（几乎可以肯定是 Active Directory 服务器本身）有信任关系的 KDC，那么您不需要指定用户名和密码。 `git-tf`将使用您的登录凭据进行身份验证。

如果这些都不适用，那么您可以将用户名和密码存储在存储库的 git 配置中：

```
git config git-tf.server.username your-username
git config git-tf.server.password your-password 
```

请注意，您的密码将以纯文本形式存储在 git 配置文件中。请务必根据需要设置 ACL 或文件权限，以阻止人们从配置文件中读取您的密码。或者您可以只存储用户名，并且每次只需要输入您的密码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-19T08:22:21.590

您可以使用 --global 开关阻止 git 将其保存到***项目***的 .gitconfig 中：

```
git config --global git-tf.server.username your-username  
git config --global git-tf.server.password your-password 
```

它仍然会以纯文本形式保存在您的系统上（C:/Users/your-login/.gitconfig），但至少不会保存在项目中的文件中。

# opengl - OpenGL正交投影

> ID：14859329
> 
> 赞同：-1
> 
> 时间：2013-02-13T17:25:27.350
> 
> 标签：opengl, graphics

在 gluOrtho2d 的描述中，他们说它就像 glOrtho，near=-1 和 far=1。

1.  为什么在观众身后附近。
2.  为什么这里描述的矩阵：[http](http://www.opengl.org/sdk/docs/man2/xhtml/glOrtho.xml) ://www.opengl.org/sdk/docs/man2/xhtml/glOrtho.xml有 Z 轴倒置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T17:52:18.883

1) 顾名思义，gluOrtho2d 用于绘制深度坐标并不重要的东西。它已设置为您可以将 2-component verts 发送到 gpu，并且深度默认为 0。在这种情况下，有一个投影是有意义的，其中 0 正好位于近/远平面之间，因此您不必担心它。值得一提的是，在正交投影中，“在”观看者“背后”的想法无论如何都失去了一些意义，因为从观看者到对象的距离对投影没有影响，除了选择是否绘制它。

2) 可能是因为在 OpenGL 空间中，NEGATIVE Z 轴在屏幕上，所以如果 glOrtho 没有否定，你总是必须为近和远传递负值。我猜这会有点奇怪。

# vb.net - 格式化日期删除零

> ID：14859331
> 
> 赞同：0
> 
> 时间：2013-02-13T17:25:31.963
> 
> 标签：vb.net, winforms, date, format

我正在寻找一种方法将零保持在个位数的月份和几天内，但是我现在正在做的当前方式行不通。我正在寻找一些关于可能发生的事情以及我的格式不正确的见解。

目前我只想将日期格式化为特定格式，这是我的代码：

```
dateFormat = Today.ToString("MM/dd/yyyy") 
```

但是这个值不是 02/13/2013 的值，我期望它是 #2/13/2013# 删除所有前导零。这里发生了什么，为什么它给出 # 并删除所有前导零？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T17:59:01.033

相关的问题是：属于什么类型`dateFormat`？如果它是 a `Date`(或`DateTime`)，那么格式化的字符串将被转换回 a`Date`并且格式将丢失。仅当您将格式化结果分配给`String`. 该`Date`类型不存储任何格式。格式化一般只适用于字符串。

```
Dim dateFormat As String
dateFormat = Today.ToString("MM/dd/yyyy") 
```

**注意**：如果你有`Option Strict Off`那么 VB 会自动尝试转换不匹配的类型。在您的代码中，格式化的字符串将自动转换为if`Date`类型。因此是危险的，因为它隐藏了潜在的编程错误。我强烈建议您使用. 您可以按源文件或在.`dateFormat``Date``Option Strict Off``Option Strict On``Compile > Option Strict`

这样做时，您将丢失一些自动转换，您必须明确指定这些转换，但您会提高代码的安全性。

您甚至可以在菜单中将此选项设置为新项目的默认选项`Tools > Options`，然后导航到`Projects and Solutions > VB Defaults`. （至少在 VS 2008 中）。我总是有：

```
    选项显式打开
    选项严格开启
    选项比较二进制
    选项推断

```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T17:33:49.963

将 dateFormat 声明为字符串：

```
Dim dateFormat as string = DateTime.Today.ToString("MM/dd/yyyy") 
```

至于“哈希”。[这个答案](https://stackoverflow.com/a/4274526/799558)解释了它。

> DateTime 本身并不真正包含散列，并且任何普通格式字符串都不会产生散列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T17:32:09.980

您可以使用正确的 VB.NET[日期格式化方式](http://msdn.microsoft.com/en-us/library/59bz1f0h%28v=vs.71%29.aspx)

```
 Dim DateFormat As DateTime = Now
    Console.WriteLine(Format(DateFormat, "Short Date")) 
```

# c#-3.0 - 如何将小数年（比如 1.25 年）转换为天数

> ID：14859332
> 
> 赞同：-4
> 
> 时间：2013-02-13T17:25:31.607
> 
> 标签：c#-3.0

我有一张表格，显示 1 年到 10 年的时间段。我想计算天数（一年大约 365 天，不需要包括闰年）。如果只是几年，则很容易计算天数（例如 2 年 = 2*365 天）。但是如何将 1.5 年或 1.75 年转换为天呢？

如果年份是用小数年指定的，那么计算天数的有效方法是什么。

谢谢纳特

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T17:29:22.463

尝试：

```
float year = 1.5;

int days = Math.Round(year * 365); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-29T13:47:22.557

由于最初的问题是微不足道的，我将回答更有趣的问题，即考虑闰年和其他日期/时间异常。由于一年中的确切天数取决于所讨论的年份，因此唯一明智的方法是相对于给定日期计算它。第一步是`AddYears`接受`double`值的重载：

```
public static DateTime AddYears(this DateTime dateTime, double years)
{
    int roundedYears = (int) Math.Floor(years);
    var roundedDate = dateTime.AddYears(roundedYears);
    var lastYearSpan = roundedDate.AddYears(1) - roundedDate;
    return roundedDate.AddDays((years % 1) * lastYearSpan.TotalDays);
} 
```

现在您可以获得对您有意义的天数，例如：

```
var now = DateTime.UtcNow;
Console.WriteLine((now.AddYears(1.25) - now).TotalDays); 
```

样本测试：

```
public void TestAddYearsDouble()
{
    var date = new DateTime(2000, 1, 15); //middle of the month to keep things simple
    Assert.AreEqual(date.Year + 1, date.AddYears(1.0).Year);
    Assert.AreEqual(date.Month, date.AddYears(1.0).Month);
    Assert.AreEqual(date.Year, date.AddYears(0.0833).Year);
    Assert.AreEqual(date.Month + 1, date.AddYears(0.0833).Month);
    Assert.AreEqual(date.Year + 8, date.AddYears(8.5).Year);
    Assert.AreEqual(date.Month + 6, date.AddYears(8.5).Month);
} 
```

# css - 在布局移动网站时使用 vw、em 或 % 是否有好处？

> ID：14859342
> 
> 赞同：2
> 
> 时间：2013-02-13T17:26:40.360
> 
> 标签：css, mobile, frontend, viewport-units

我正在为智能手机创建下面的布局。iPhone、Android 和黑莓是主要目标。无论是纵向还是横向，布局都将保持不变。对于横向，它将缩放到宽度。无论屏幕方向如何，我想要做的是定位和调整文本的大小。灰色框代表图像。我想知道在这种情况下，任何特定的 css 单位、vw、em 或 % 有什么优势吗？

![线框](../Images/c92e8876e9de8a7c908179a8ec8b4294.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T18:13:19.073

我会用`%`. 它是最容易计算的并且总是相对于外部元素的屏幕（它们的容器所在的位置`<body>`）和相对于它们的内部元素的容器。em 是相对于用户默认字体大小的，其中`1em = 12 pt`. 我不认为 em 会是一个好的选择。但是，如果您希望用户能够在不缩放的情况下阅读移动设备上的内容，那么在您的文本大小上使用 em 将是一个好主意。

我不知道 vw 是什么，但我找到了这个网站：[http](http://snook.ca/archives/html_and_css/vm-vh-units) ://snook.ca/archives/html_and_css/vm-vh-units 。它还提到了 vh 单位。似乎它们是相对于`100vw`当前视口的全宽的视口而言的。我看不出这与`100%`.

在图像和我会考虑使用`max-`或`min-`宽度或高度的东西上。

# c# - C# Loadl List 到文本框 WinForms

> ID：14859343
> 
> 赞同：3
> 
> 时间：2013-02-13T17:26:41.000
> 
> 标签：c#, list, textbox

当我尝试将列表显示到文本框中时遇到问题。它只显示 list.txt 文件的最后一行。我认为对于每个新行，它都会一直覆盖文本框中的第一行？因此只显示文件的最后一行？

我需要考虑什么才能做到正确？

```
private void Form1_Load(object sender, EventArgs e)
        {

            const string f = "list.txt";

            List<string> myList = new List<string>();

            using (StreamReader r = new StreamReader(f))
            {
                string line;
                while ((line = r.ReadLine()) != null)
                {
                    myList.Add(line);
                }
            }

            foreach (string s in myList)
            {

                textBox1.Text = string.Join(Environment.NewLine, s);

            }

        } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T17:38:13.487

而不是这个：

> foreach (myList 中的字符串 s) { textBox1.Text = string.Join(Environment.NewLine, s); }

尝试：

> textBox1.Text = string.Join(Environment.NewLine, myList);

并确保 textbox1 的多行属性设置为 true。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T17:36:54.727

因为每次，您都直接分配给 Text 属性，该属性将删除前一个。这是修复。使文本框的多行为真。

```
private void Form1_Load(object sender, EventArgs e)
        {

            const string f = "list.txt";

            List<string> myList = new List<string>();

            using (StreamReader r = new StreamReader(f))
            {
                string line;
                while ((line = r.ReadLine()) != null)
                {
                    myList.Add(line);
                }
            }

            var listString = new StringBuilder()
            foreach (string s in myList)
            {
                listString.Append(Environment.Newline)
                listString.Append(s);              

            }
             textBox1.Text = listString.ToString();

        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T17:43:19.813

根据我的评论，您可以通过消除 foreach 循环在一个简单的行中做到这一点

```
textBox1.Text = string.Join(Environment.NewLine, myList.ToArray()); 
```

或者只是使用 myList 工作相同

```
textBox1.Text = string.Join(Environment.NewLine, myList); 
```

# regex - 在 bash 中使用正则表达式复制和重命名多个文件

> ID：14859345
> 
> 赞同：12
> 
> 时间：2013-02-13T17:26:49.423
> 
> 标签：regex, bash, copy, rename

我有一个看起来像这样的文件结构：

```
A/
    2098765.1ext
    2098765.2ext
    2098765.3ext
    2098765.4ext
      12345.1ext
      12345.2ext
      12345.3ext
      12345.4ext

B/
    2056789.1ext
    2056789.2ext
    2056789.3ext
    2056789.4ext
      54321.1ext
      54321.2ext
      54321.3ext
      54321.4ext 
```

我需要重命名所有`20`以`10`;开头的文件。即，我需要重命名`B/2022222.1ext`为`B/1022222.1ext`

我已经看到了许多有关重命名多个文件的其他问题，但似乎无法使其适用于我的情况。只是想看看我是否能在我实际尝试进行复制/重命名之前弄清楚我在做什么：

```
for file in "*/20?????.*"; do
    echo "{$file/20/10}";
done 
```

但我得到的只是

```
{*/20?????.*/20/10} 
```

有人可以告诉我如何做到这一点吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-13T17:33:00.667

你只是有一点不正确的语法就是：

```
for file in */20?????.*; do mv $file ${file/20/10}; done 
```

1.  从参数中删除引号`in`。否则，不会发生文件名扩展。
2.  替换中的`$`应该放在括号*之前*

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-13T17:40:17.173

这是使用`find`命令的解决方案：

```
find . -name '20*' | while read oldname; do echo mv "$oldname" "${oldname/20/10}"; done 
```

该命令实际上并不执行您的命令，它仅打印出应该执行的操作。查看输出，如果您满意，请删除该`echo`命令并真正运行它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-25T08:40:43.770

只是想添加到爆炸丸的答案。但是在 OS X 上，你必须说

```
mv "${file}" "${file_expression}" 
```

或者`mv`命令无法识别它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T17:29:06.007

大括号扩展如：

```
{*/20?????.*/20/10} 
```

不能被引号包围。

相反，尝试做（使用 Perl `rename`）：

```
rename 's/^10/^20/' */*.ext 
```

您可以[`rename`](http://search.cpan.org/perldoc?rename)在`shell`提示符下使用 Perl 工具执行此操作。（还有其他同名的工具可能会也可能不会这样做，所以要小心。）

如果您想进行试运行以确保不会破坏任何文件，请将`-n`开关添加到命令中。

## 笔记

如果您运行以下命令 ( `linux`)

```
$ file $(readlink -f $(type -p rename)) 
```

你有一个像

```
.../rename: Perl script, ASCII text executable 
```

那么这似乎是正确的工具=）

这似乎`rename`是`Ubuntu`.

使其成为默认值`Debian`和派生值，例如`Ubuntu`：

```
sudo update-alternatives --set rename /path/to/rename 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-13T17:31:26.630

的 glob 行为`*`在双引号中被抑制。尝试：

```
for file in */20?????.*; do
    echo "${file/20/10}";
done 
```

# c# - 如何使我的应用程序作为 Windows Phone 中的日历数据源？

> ID：14859347
> 
> 赞同：0
> 
> 时间：2013-02-13T17:27:00.300
> 
> 标签：c#, calendar, windows-phone-8, accounts

我正在创建一个拥有自己日历的应用程序。因此，添加到该日历的任何事件也应该显示在 windows phone 8 的原始日历中。如果我们将 facebook 添加到我的手机，就会发生这种情况。Facebook 成为日历的数据源之一。我希望我的应用也能成为来源。怎么做 ？

还有其他可以解决我的问题的技巧吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T17:47:17.520

使用此处描述的 SaveAppointmentTask：

[保存约会任务](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj207038%28v=vs.105%29.aspx)

请注意，Windows Phone 允许与日历应用进行有限交互。您可以插入新约会，但不允许修改或删除现有约会。

# c# - 已签名的应用程序如何使用未签名的程序集（可以在客户站点重新生成）

> ID：14859348
> 
> 赞同：4
> 
> 时间：2013-02-13T17:27:03.340
> 
> 标签：c#

我的 C# .net 可执行文件需要签名才能使用我们的另一个程序集中提供对密码访问的方法之一。

同一个可执行文件需要引用和使用未签名的程序集。它未签名的原因是我们为客户提供了一种在现场重新生成它的方法（它包含对应用程序中建模定制的访问）。

单个可执行文件有什么办法可以同时使用已签名和未签名的程序集？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-13T17:39:36.263

您不能从已签名的程序集中引用未签名的程序集，但您可以使用[Assembly.Load](http://msdn.microsoft.com/en-us/library/3te3zcz1.aspx)方法之一轻松加载。

通常，您在已签名的程序集中提供接口（或基类，如果您愿意），并在整个代码中使用该接口在编译时获取信息。客户的未签名程序集（插件）在一些特别标记的类上实现该接口。然后您的应用程序加载程序集（通过默认位置`Load`或通过指定文件`LoadFile`），查找并构造类，然后使用它在运行时获取信息。

注意：您还可以查看“如何在 C#/.Net 中实现插件”问题的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T17:41:21.377

*我相信您使用无符号*程序集的唯一方法是在运行时使用反射加载它。

如果可执行文件引用了非强命名的内容，则不能将强名称添加到可执行文件中。

# jquery - beforeSend 不会将授权标头添加到我的 jquery ajax 调用（基本授权）

> ID：14859349
> 
> 赞同：3
> 
> 时间：2013-02-13T17:27:05.720
> 
> 标签：jquery, ajax, cors, basic-authentication

我一直在尝试对休息服务进行 $ajax() 调用。我需要使用基本身份验证来进行此调用，因此我将 beforeSend 处理程序添加到我的 ajax 调用中。当我在 Fiddler 中跟踪它时，我没有看到它将授权标头附加到我的请求中。

```
<body>
<div id="Button1" style="border: 2px solid blue; font-family: Cambria;">
    Get CMS Content
</div>
<br />
<div id="error" style="color: Red; font-family: Cambria; font-size: large; display: none;">
</div>
<span style="font-family: Cambria; color: #009933; font-weight: bold">Result:</span>
<div id="result">
</div>
<script src="scripts/jquery-1.8.3.min.js" type="text/javascript"></script>
<script type="text/javascript">
    $(document).ready(function () {
        $('#Button1').click(function () {
            $('#error').fadeOut('slow');
            //var requestParams = { 'format': 'json', 'username': 'administrator', 'password': '' };
            var requestParams = { 'format': 'json' };
            $.ajax({
                beforeSend: function (xhr) {
                    xhr.setRequestHeader("Authorization", "Basic YWRtaW5pc3RyYXRvcjo=");
                },
                url: "http://localhost/KenticoCMS7/rest/cms.country",
                data: requestParams,
                dataType: "text",
                contentType: "application/json;",
                success: function (result) {
                    $('#error').fadeOut('slow');
                    $('#result').text(result);
                },
                error: function (xhr, status, errorThrown) {
                    $('#error').text(JSON.stringify(xhr));
                    $('#error').fadeIn('slow');
                }
            });
        });
    });
</script> 
```

围绕这个的建议会有很大帮助。另外，有人可以评论一下，为什么提琴手将此请求跟踪为 OPTIONS 类型，而它应该是 GET 类型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T19:27:03.470

**OPTIONS**表示这是一个 CORS 请求，它需要一个 PREFLIGHT 请求来确定服务器是否允许该请求方法以及是否允许凭据。通过返回 HTTP/405，服务器表明它不支持 CORS，这会导致后续的 GET 请求（包括其凭据）永远不会被发送。

您是否跨域发送请求？

# jquery - 按钮文本出现在按钮之外

> ID：14859350
> 
> 赞同：0
> 
> 时间：2013-02-13T17:27:09.500
> 
> 标签：jquery, html, jquery-mobile, button

我在这里遇到了一个非常奇怪的 HTML 按钮问题。用于按钮内部的文本也出现在按钮外部。我正在使用页面上按钮的自定义样式表调用这两者`jQuery`和`jQuery Mobile`标题。

这是我用于按钮的 CSS。

```
button {
color:#000;
font-size:18px;
min-width:150px;
padding:10px;
text-align:center;
text-shadow:1px 1px #FFF;
width:150px;

border-radius: 10px;
-moz-border-radius:10px;
-webkit-border-radius: 10px;
} 
```

这是我正在使用的按钮的代码。

```
<button  onclick="try{ login(); }catch(e){ alert(e); }">Log In</button> 
```

这就是输出的实际样子。

![在此处输入图像描述](../Images/2173e505521f3fad0eb9a29ca247880f.png)

这完全让我大吃一惊。关于如何防止文本出现在按钮之外的任何建议？

jsfiddle [http://jsfiddle.net/u7DH2/](http://jsfiddle.net/u7DH2/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T17:52:45.960

这与 jquery-mobile 存在一些冲突……如果您对其发表评论，它可以解决问题。

```
<!--<script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js" type="text/javascript"></script> --> 
```

在这里检查... jsfiddle.net/u7DH2/2

# c++ - 并发环境中的 C++11 std::vector

> ID：14859353
> 
> 赞同：12
> 
> 时间：2013-02-13T17:27:12.790
> 
> 标签：c++, multithreading, concurrency, c++11, segmentation-fault

我在 C++11 中运行多线程代码时遇到问题（段错误）。这是代码：

```
#include <vector>
#include <thread>

std::vector<int> values;
int i;

void values_push_back()
{
    values.push_back(i);
}

int main()
{
    while(true)
    {
        std::vector<std::thread> threads;

        for(i=0; i<10; ++i)
        {
            std::thread t(values_push_back);
            threads.push_back(std::move(t));
        }
        for(i=0; i<10; ++i)
            threads[i].join();
    }

    return 0;
} 
```

这里是 gdb 的回溯：http: [//pastebin.com/5b5TN70c](http://pastebin.com/5b5TN70c)

那有什么问题？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-13T17:29:50.933

这与搬家无关。

多个线程`vector::push_back()`在同一个上执行，`vector`但 `vector::push_back()`不是线程安全的。对`vector`需要同步的修改。

A[`std::mutex`](http://en.cppreference.com/w/cpp/thread/mutex)可用于将调用同步到`push_back()`：

```
std::vector<int> values;
std::mutex values_mutex;

void values_push_back()
{
    values_mutex.lock();
    values.push_back(i);
    values_mutex.unlock();
} 
```

此外，该变量`i`在没有同步的情况下在线程之间共享，这将导致竞争条件（可能的结果是将重复`int`的 s 添加到`vector`）。考虑将`int`值作为参数传递给线程以避免这种情况：

```
std::vector<int> values;
std::mutex values_mutex;

void values_push_back(int i)
{
    values_mutex.lock();
    values.push_back(i);
    values_mutex.unlock();
}

for (int i = 0; i < 10; ++i)
{
    threads.push_back(std::thread(values_push_back, i));
}

for (auto& t: threads) t.join(); 
```

* * *

正如竹子所评论的[那样](https://stackoverflow.com/users/893693/bamboon)，更喜欢[`std::lock_guard`](http://en.cppreference.com/w/cpp/thread/lock_guard)确保在`push_back()`抛出时释放锁（在这种情况下只能是这样，`bad_alloc()`但是如果`vector`更改以保存具有抛出构造函数的更复杂的对象，则变得更加重要）：

```
void values_push_back(int i)
{
    std::lock_guard<std::mutex> lk(values_mutex);
    values.push_back(i);
} 
```

# java - Android - 检查数组中是否存在值

> ID：14859355
> 
> 赞同：53
> 
> 时间：2013-02-13T17:27:24.820
> 
> 标签：java, arrays

我有一个名为“bob”的数组，其中包含值。

```
String[] bob = { "this", "is", "a", "really", "silly", "list" }; 
```

我如何知道名为 bob 的数组中是否存在“愚蠢”值而不遍历它？

* * *

## 回答 #1

> 赞同：143
> 
> 时间：2013-02-13T17:28:36.490

你可以使用[`List#contains`](http://docs.oracle.com/javase/7/docs/api/java/util/List.html#contains%28java.lang.Object%29)方法。为此，您需要将数组转换为列表。您可以使用[`Arrays#asList()`](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#asList%28T...%29)以下方法：

```
String[] bob = { "this", "is", "a", "really", "silly", "list" };

if (Arrays.asList(bob).contains("silly")) {
    // true
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-13T17:28:47.003

使用静态将数组转换为列表`Arrays.asList(T)`并检查`List.contains(Object)`以检查对象是否存在于重新调整的集合中。

```
 String[] bob = { "this", "is", "a", "really", "silly", "list" };
           System.out.println(Arrays.asList(bob).contains("silly")); 
```

然而，传统方法是遍历数组并使用 equals() 检查每个元素。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-13T17:31:55.283

如果您要经常检查它，您可能会发现使用 a 更有效`HashSet`：

```
String[] bob = { "this", "is", "a", "really", "silly", "list" };
Set<String> silly = new HashSet<String>(Arrays.asList(bob));
boolean isSilly = silly.contains("silly"); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-13T17:32:33.350

这是一个简单的方法：

```
 ArrayList list = new ArrayList(Arrays.asList(bob ));
    if (list.contains("silly")) {
                    // my array has silly !
             } 
```

这个想法是将您的 Array 转换为 ListArray 对象。但它会消耗额外的内存，所以在使用它之前确保它是值得的。

**编辑**

如果您追求性能并节省内存，则可以改用二分搜索算法：这样您就不必分配新对象：

```
Arrays.sort(array) 
int value = Arrays.binarySearch(array, "silly");
if (value != -1) {
// my array has silly !
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-05-19T10:19:32.637

上面的代码对我不起作用。我猜不允许原始类型。

必须手动完成：

```
char[] charlist = {'a','b','c','d'}
boolean arraycontains = false;
char tester = 'c';
for (int y=0;y<charlist.length;y++){
        if (charlist[y] == character) {
                arraycontains = true;
                break;
        }
}

if (arraycontains) {
    //true. array contains the tester;
}
else {
    //false. array does not contain the tester;
} 
```

:)

# c# - 当使用 javascript mvc 自动填充文本框时仍然显示所需的红色图标

> ID：14859358
> 
> 赞同：0
> 
> 时间：2013-02-13T17:27:32.467
> 
> 标签：c#, jquery, asp.net-mvc-3, validation

您好有两个文本框和一个带有确定按钮的复选框。当我在第一个文本框中输入名称并按确定时，它显示需要第二个文本框。当我单击复选框时，它会自动将相同的名称从第一个文本框填充到第二个文本框。但它仍然在第二个文本框上显示所需的红色标签。目前我正在使用 jquery 将数据填充到第二个文本框中。如果我手动填写第二个文本框，红色必需的标志就会消失。任何想法？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T18:05:44.060

假设您的第一个输入的 ID 为 firstInput，第二个输入的 ID 为 secondInput，并且您的复选框的 ID 为 myCheckbox，您可以使用：

```
 $('#myCheckbox').click(function () {
         //Toggle the value of the input         
         $('#secondInput').val( $(this).is(':checked')? $('#firstInput').val(): '');

        //Fire validation ONLY on the secondInput field
        $('#secondInput').valid();

        //OR Fire validation on the entire form
        $(this).parents('form').valid();
    }); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-13T17:41:29.867

您可能可以执行以下操作：

```
$("#myCheckbox").click(function(){
  if (this.checked){
    $("#input2").val($("#input1").val());

    $("#input1").triggerHandler("keyup"));
    //OR
    $("#input1").triggerHandler("focus"));
  }
}); 
```

# r - R: lm() 与因子。不明白 ANOVA 表是如何计算“Sum Sq”的

> ID：14859361
> 
> 赞同：0
> 
> 时间：2013-02-13T17:27:39.470
> 
> 标签：r, lm, anova

我正在学习 R 并试图了解如何`lm()`处理因子变量以及如何理解 ANOVA 表。我对统计很陌生，所以请对我温柔一点。

这是烂番茄的一些电影数据。我试图根据 4 组中所有电影的平均分数来模拟每部电影的分数：那些被评为 G、PG、PG-13 和 R 的电影。

```
download.file("http://www.rossmanchance.com/iscam2/data/movies03RT.txt", destfile = "./movies.txt")
movies <- read.table("./movies.txt", sep = "\t", header = T, quote = "")
lm1 <- lm(movies$score ~ as.factor(movies$rating))
anova(lm1) 
```

和方差分析输出：

```
## Analysis of Variance Table
## 
## Response: movies$score
##                           Df Sum Sq Mean Sq F value Pr(>F)
## as.factor(movies$rating)   3    570     190    0.92   0.43
## Residuals                136  28149     207 
```

我了解如何获取此表中的所有数字`Sum Sq`，`Mean Sq`除了`as.factor(movies$rating)`. 有人可以解释一下这`Sum Sq`是如何从我的数据中计算出来的吗？我知道那`Mean Sq`只是`Sum Sq`除以`Df`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T18:09:32.227

There are various ways to get that. One of them is to use the equation:

[http://en.wikipedia.org/wiki/Sum_of_squares_(statistics)](http://en.wikipedia.org/wiki/Sum_of_squares_(statistics))

SS_total = SS_reg + SS_error

So:

```
y = movies$score
sum((y - mean(y))^2) - sum(lm1$residuals^2) 
```

# kohana - Kohana ORM 检查用户是否存在并将消息返回给 View？

> ID：14859362
> 
> 赞同：0
> 
> 时间：2013-02-13T17:27:41.810
> 
> 标签：kohana, kohana-orm, kostache

我在我的项目中使用 Kohana 3.3，我正在尝试让用户注册和登录工作。我正在使用 ORM 的 Auth 和 Kostache 来管理我的布局/模板。

我如何能：

*   检查用户名是否已经存在？如果它确实返回 error_msg.mustache 一条消息“用户已存在”
*   根据我的模型规则检查用户名和电子邮件是否有效？如果不返回错误消息到 error_msg.mustache 指示验证失败

在我的控制器中，我有：

```
class Controller_User extends Controller {

public function action_signup()
    {
        $renderer = Kostache_Layout::factory();
        $this->response->body($renderer->render(new View_FrontEnd_User, 'frontend/signup'));
    }

    public function action_createuser()
    {
        try {
            $user = ORM::factory('User');
            $user->username = $this->request->post('username');
            $user->password = $this->request->post('password');
            $user->email = $this->request->post('email');

            // How do I:
            // Check if Username already exists? If it does return to  error_msg.mustache a message "User already Exists"
            // Check if email is valid? If not return error message to error_msg.mustache indicating "email is not valid"

            $user->save();
        }
        catch (ORM_Validation_Exception $e)
        {
            $errors = $e->errors();
        }
    }
} 
```

在我的模型中：

```
<?php

class Model_User extends Model_Auth_User
{
    public function rules()
    {
        return array(
            'username' => array(
                array('not_empty'),
                array('min_length', array(':value', 4)),
                array('max_length', array(':value', 32)),
                array('regex', array(':value', '/^[-\pL\pN_.]++$/uD')),
            ),
            'email' => array(
                array('not_empty'),
                array('min_length', array(':value', 4)),
                array('max_length', array(':value', 127)),
                array('email'),
            ),
        );
    }
} 
```

提前非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T21:14:37.133

您可以使用验证和已编写的回调来进行唯一性检查。这具有将您的验证逻辑保持在一起并且非常简洁的优点：

```
public function rules()
{
    return array(
        'username' => array(
            array(array($this, 'unique'), array(':field', ':value')),
        // ... 
```

就如此容易！

我最初用自己的解决方案回答了这个问题，这与预卷版本略有不同，但现在我知道了，显然我会用它来代替这个：

```
public function rules()
{
    return array(
        'username' => array(
        // ...
            array('Model_User::unique_field', array(':field', ':value', $this->pk())),
        ),
        // ...
    );
}

public static function unique_field($field, $value, $user_id = NULL)
{
    return (ORM::factory('User')->where($field, '=', $value)->find()->pk() === $user_id);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T17:49:49.130

不幸的是，我无法帮助您使用 Kostache，但是为了检查用户名是否已经存在，您必须实际尝试加载它：

```
$user = ORM::factory('User')->where('username', '=', $this->request->post('username'));

if ($user->loaded())
{
    // The username already exists
} 
```

`try/catch`您可能希望在实际打开块之前执行此操作。

要使用正确的错误消息，您需要在`/application/messages`文件夹中定义它们，如[ORM 验证指南](http://kohanaframework.org/3.3/guide/orm/validation#handling-validation-exceptions)中所述。

# wpf - 跨越多个元素的wpf渐变画笔

> ID：14859365
> 
> 赞同：2
> 
> 时间：2013-02-13T17:27:49.483
> 
> 标签：wpf, background, gradient, radial-gradients

假设有一个形状不规则的元素由任意嵌套的其他元素组成：

```
<Window.Resources>
  <RadialGradientBrush x:Key="brush">
    <GradientStop Color="Black" Offset="0" />
    <GradientStop Color="White" Offset="1" />
  </RadialGradientBrush>
</Window.Resources>

<StackPanel Name="element">
  <StackPanel.Effect>
    <DropShadowEffect ShadowDepth="0" BlurRadius="10" />
  </StackPanel.Effect>
  <Rectangle Name="child1" Height="100" Margin="10" Stroke="Black" Fill="{StaticResource brush}" />
  <Grid>
    <Rectangle Name="child2" Height="100" Margin="10" Stroke="Black" Fill="{StaticResource brush}" />
  </Grid>
</StackPanel> 
```

所有部分都是交互式的（即一个孩子可以是一个真正的控制）。

如何使用跨越所有孩子的单个径向渐变填充孩子的背景（应该看起来好像它的大小为`element`）。

更新： StackPanel 有一个阴影，应该在孩子周围绘制。

![坏的](../Images/c00ed82e388e5f5feebcea4cb60c1531.png)![好的](../Images/7ba58244de9470ed368268239e036969.png)

一种可能的解决方案是通过适当的转换生成 Radius 和 Origin/Center 绑定到`element`'s 和`child`' 属性的渐变，但这种方法会相当复杂和昂贵。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T15:38:32.670

最后，我使用了转换后的渐变路线，除了绑定和转换器之外，我能够通过`Transformation`在`ArrangeOverride`子元素中创建背景并通过依赖属性公开它来优雅地解决它。实际通过搜索具有匹配类型的祖先来`RadialGradientBrush`绑定它。`Transform``BackgroundTransform`

这假设一个人可以修改/包装子类，这在我的情况下是正确的。它可以通过附加的属性和更多的工作变得更加灵活。

实际代码在[这个 gist](https://gist.github.com/mwisnicki/4953452/)中。

# c# - 改造依赖注入和自动化测试：工厂和加载/列表方法混淆

> ID：14859367
> 
> 赞同：0
> 
> 时间：2013-02-13T17:27:54.213
> 
> 标签：c#, asp.net-mvc-4, dependency-injection, inversion-of-control

我正在开发一个 MVC 项目的新阶段。第一阶段相当小，也不是很复杂。下一阶段将非常复杂且规模更大。在第一阶段，我们讨论了然后出于各种原因放弃了进行彻底自动化测试的想法。

在新阶段，我希望我们的团队投资于自动化测试。我认为如果没有依赖注入，我们将无法做任何有用的事情，因为我们希望将数据库工作存根以使我们的测试可控。

我正在努力将依赖注入改造到我的业务层中。我们现有的业务对象具有状态、行为，并负责加载自身的实例（通过静态方法）。例如，我们可能有这个过于简化的例子：

```
public class User
{
    public User(string userName)
    {}

    public bool Authenticate()
    {}

    public static User GetByUserName(string userName)
    {
      //Do some DB querying, and then map the data object to a new instance:
      UserRepository repository = new UserRepository();
      var databaseObject = repository.list(u => u.userName = userName);
      User user = new User();
      user.userName = databaseObject.userName;
      // populate other fields
      return user;
    }
 } 
```

乍一看，我似乎需要：

1.  在构造函数中注入存储库作为依赖项
2.  将 GetByUserName 更改为不再是 User 中的静态方法
3.  做某种工厂以便能够在 GetByUserName 方法中创建 User 的实例

我无法弄清楚如何以合理的方式完成所有这些。#1 是微不足道的，但 #2 和 #3 不那么微不足道。这是我正在考虑如何做＃2：

1.  基本上保持结构不变，只需删除 static 关键字。这意味着为了通过用户名获取用户，您必须创建用户对象的实例，然后调用 GetByUserName 方法。这没有通过我高度复杂的气味测试。
2.  将加载和保存用户的责任转移到某种 UserCollection 对象。这对我来说似乎很可疑，因为这意味着几乎每个业务对象都需要一个底层集合对象，并且因为它会使我的域模型更加贫乏。
3.  直接与存储库交互。现在控制器可能会调用 User.GetByUserName() 来获取用户域对象来做一些工作。相反，控制器会知道存储库并调用 Repository.list()。这对我来说似乎是泄漏的——突然控制器感觉它在做生意。

然后是#3。看起来我的选择是要么使用我的 IOC 容器来注入工厂方法（例如 autofac 工厂委托），要么为每个对象手动创建工厂。使用 autofac 方法似乎有漏洞，因为我必须在我的单元测试中使用 autofac 或者为每个对象存根一个工厂委托。为所有对象创建工厂似乎很麻烦，因为在某些时候，我给开发人员施加了很大的工作量，只是为了能够在不知道我的 IOC 容器的情况下使用 DI。

我已经尽我所能搜索这些主题，但我真的没有看到很多不涉及上述缺点的具体例子。

有哪些技巧可以解决 #2 和 #3 而不会失去“好的设计”或“做太多的工作”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T17:43:05.693

该类`User`不应该知道存储库恕我直言。如果您在存储库中连接，则难以对`User`类进行单元测试，并且如果您决定将存储库放在不同的程序集中，则会创建循环引用。

一个典型的设计是有一个`IUserRepository`接口来定义你的 CRUD 方法（例如`GetUserByUserName`）和一个或多个`UserRepository`指向实际数据源的类。

当您有任何需要使用`UserRepository`（如控制器）的东西时，将其作为`IUserRepository`. 这样您就可以使用模拟/存根存储库对控制器进行单元测试。

您的存储库将了解您的业务类，并且可能（松散地）与其他存储库耦合（例如，`Role`存储库可能会被注入`IUserRepository`一个角色以获取用户。

如果你想从一个所有类的“主”存储库开始，那很好，但是你冒着以后不得不拆分存储库的风险（这可能不是什么大问题）。

所以我会推荐选项 #2 和子选项 #2（将其称为`UserRepository`vs `UserCollection`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T18:48:03.097

您如何实现这一点主要取决于您希望将检索数据库对象`UserRepository`并从中填充`User`实例的逻辑放置在何处。有些人喜欢拥有可以检索自己数据的“智能”模型，但其他人则不喜欢。

听起来你想要一个有点聪明的`User`班级。我认为你可以通过将 注入`UserRepository`到类的构造函数中来实现这一点`User`，而不是创建*另一个* `User`实例，只需使用存储库来填充这个`User`实例。

下面是一个示例实现。我的期望是您使用的是 IoC 容器，并且您将在其中注册 IUserRepository 接口。我假设您需要用户存储库的接口，因为您可能想模拟它以进行单元测试等。

```
public class User
{
    public User(IUserRepository repository, string userName)
    {
      var databaseObject = repository.list(u => u.userName = userName);

      this.userName = databaseObject.userName;
      // populate other fields
    }

    public bool Authenticate()
    {}
 } 
```

现在您应该能够通过 IoC 容器实例化一个用户对象。例如，如果您使用的是 Ninject，那么我认为语法如下：

```
var user = kernel.Get<User>(new ConstructorArgument("userName", "<actual username value>")); 
```

使用 Unity，我相信它会是这样的：

```
container.Resolve<User>(new ParameterOverride("userName", "<actual username value>")) 
```

根据您的 IoC 容器，您可能还需要注册 User 类，即使它没有实现接口并且您并没有真正尝试将其换成任何东西。可能需要将您注册的 IUserRepository 与 User 类的构造函数参数连接起来。

如果您真的想保持您的实例化代码干净，那么您可以保留 User 类上的静态方法并让它执行上面的一行。

免责声明：我没有测试过这段代码。

# java - 为什么读写是InputStream和OutputStream中唯一的抽象方法

> ID：14859368
> 
> 赞同：1
> 
> 时间：2013-02-13T17:27:54.973
> 
> 标签：java, io

**只有** `read()`and`write(int x)`方法`abstract`在[InputStream](http://docs.oracle.com/javase/6/docs/api/java/io/InputStream.html)和[OutputStream](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/OutputStream.html)中？

那么，为什么`read()`和`write(int x)`是**唯一**的抽象方法`InputStream`和`OutputStream`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T17:30:10.853

正如[InputStream 的 Javadoc](http://docs.oracle.com/javase/6/docs/api/java/io/InputStream.html)所说，

> 需要定义 InputStream 子类的应用程序必须始终提供返回下一个输入字节的方法。

所有其他方法（例如读取多个字节）都可以使用简单`read()`的 . 即，如果我提供从新源读取的实现（例如，可能是新的硬件位），我只需要提供读取单个字节的方法。提供了围绕此的`InputStream`所有其他机制。

请注意，其他方法*不是* `final`. 所以子类可以提供更有效的（比如说）读取多个字节的实现，但它们不是*必须*的。

同样适用于`OutputStream`

# c# - 包括空检查以在列表中查找索引

> ID：14859369
> 
> 赞同：2
> 
> 时间：2013-02-13T17:28:02.460
> 
> 标签：c#, linq

我可以在此代码中包含对 null 的检查吗：

```
var index = someList.FindIndex(p => p.Bla1.Id == Dto.Id || p.Bla2.Id == Dto.Id); 
```

Bla1 和 Bla2 都可以为空。谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-13T17:30:51.740

这个怎么样：

```
var index = someList.FindIndex(p => (p.Bla1 != null && p.Bla1.Id == Dto.Id) 
                                 || (p.Bla2 != null && p.Bla2.Id == Dto.Id)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T17:33:27.063

是的，你可以 =)

如果您询问如何执行此操作：

```
var index = someList.FindIndex(p => (p.Bla1 != null && p.Bla1.Id == Dto.Id) || (p.Bla2 != null && p.Bla2.Id == Dto.Id)); 
```

但这一切都取决于您要如何处理空值

# jquery - 自定义时间范围 JQuery FullCalendar

> ID：14859370
> 
> 赞同：0
> 
> 时间：2013-02-13T17:28:04.150
> 
> 标签：jquery, fullcalendar

我使用带有 Fullcalendar 插件的资源视图。小时水平显示。除了我想要自定义时间间隔外，一切都运行良好。我想要 24 小时日历，一天从上午 9.30 开始，到上午 9.30 结束，我已经在文档中看到了“最小时间”和“最大时间”（[http://arshaw.com/fullcalendar/docs/agenda/minTime/](http://arshaw.com/fullcalendar/docs/agenda/minTime/)）但是如果我试试

```
minTime: '9:30',
maxTime: 9:30', 
```

它不起作用。我什至考虑在同一页面上使用 2 个日历，其中一个：9.30am > 9.30pm，另一个 9.30pm > 9.30 am，但我最好有 24 小时日历……</p>

任何人都可以帮助我吗？

[24 小时日历](http://i.stack.imgur.com/vEHTw.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T10:07:13.303

对不起，我不认为这是可能的。

任何视图（议程/基本）都基于特定日期，因此开始时间是 0:00，结束时间是您选择显示的那一天 23:59。

minTime/maxTime 允许您过滤一天中的范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T12:08:47.707

我正在尝试做同样的事情。这就是我正在做的事情，也许它会帮助某人，或者有人会帮助我找到解决方案。

我希望我的日子从早上 7 点开始，到第二天早上 7 点结束。我使用另一个时区“移动”了所有事件（我仍然必须处理夏季/冬季时间），我将使用 jQuery 来更改左栏中显示的“时间”。

这是您正在寻找的解决方案吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-06T13:47:44.787

这是一个老问题，但我自己需要这个功能，所以我在我的 fork 中实现了 dayBreakTime 选项：[https ://github.com/matiaslarsson/fullcalendar](https://github.com/matiaslarsson/fullcalendar)

这将允许您选择日历列在新的一天中断的时间。只需添加选项 dayBreakTime: "09:30" 以使日期列从第二天的 09:30 跨越到 09:30，如下所示；

```
$('#calendar').fullCalendar({
   header: {
      left: 'prev,next today',
      center: 'title',
      right: 'month,agendaWeek,agendaDay'
   },
   defaultView: 'agendaWeek',
   dayBreakTime: "09:30",
   ...
}); 
```

如果您想要 FullCalendar 主分支中的功能，请查看文档并在[https://code.google.com/p/fullcalendar/issues/detail?id=2541上为问题加注星标。](https://code.google.com/p/fullcalendar/issues/detail?id=2541)

# jquery - 获取 jQuery 过滤器以接受整数变量

> ID：14859371
> 
> 赞同：0
> 
> 时间：2013-02-13T17:28:11.983
> 
> 标签：jquery, variables, filter

我正在尝试使用`gt()`jQuery 集的过滤器。我的愿望是清除所有索引高于触发更改事件的元素的选定元素。我确定这与无法`gt()`将变量作为整数接受有关`thisIndex`，并且似乎找不到这样做的语法。

```
$(document).ready(function () {  
    $(".slct").change(function() { // sensitize all slct elements  
        thisIndex = $(".slct").index(this);  
        selGT1 = $(".slct:gt(1)"); // TEST: this correctly selects the elements greater than 1    
        selectsGT = $(".slct:gt(thisIndex)"); // "I WANT thisIndex TO ACT LIKE A INTEGER"    
        $(selectsGT).val(""); // clear elements w/ a index greater than "this"  
    });  
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T17:30:02.990

目前在您的代码中，“thisIndex”被解释为字符串的一部分。您需要将整数与字符串连接起来。所以下面的代码片段应该可以解决问题：

```
selectsGT = $(".slct:gt(" + thisIndex + ")"); 
```

# php - 如何使用关联按时间顺序对 PHP 数组进行排序？

> ID：14859376
> 
> 赞同：-3
> 
> 时间：2013-02-13T17:28:23.633
> 
> 标签：php, arrays, date, sorting, associative

我正在为一家音乐推广公司制作网站。对于每个艺术家，我都有一个包含事件信息的单独数组，如下所示：

```
<?php

$donevents = array();
$donevents[101] = array(
    "date" => "March 18th 2013",
    "artist" => "Don Ross",
    "venue" => "The Half Moon, Putney",
    "link" => "http://www.halfmoon.co.uk",
    "label" => "donross",
    );
$donevents[102] = array(
    "date" => "March 19th 2013",
    "artist" => "Don Ross",
    "venue" => "The Moon Club, Cardiff",
    "link" => "http://www.themoonclub.net/",
    "label" => "donross",
    );
$donevents[103] = array(
    "date" => "March 21st 2013",
    "artist" => "Don Ross and Brooke Miller",
    "venue" => "Round Midnight, London",
    "link" => "http://www.roundmidnightbar.com",
    "label" => "donross",
    );
$donevents[104] = array(
    "date" => "March 21st 2013",
    "artist" => "Don Ross",
    "venue" => "Masterclass at the Swindon Academy of Music",
    "link" => "http://www.academyofmusic.ac.uk/locations/location.php?id=9",
    "label" => "donross",
    );
$donevents[105] = array(
    "date" => "March 23rd 2013",
    "artist" => "Don Ross",
    "venue" => "Berits & Brown, Airdrie",
    "link" => "http://www.intimate-gigs.com",
    "label" => "donross",
    );
$donevents[106] = array(
    "date" => "March 25th 2013",
    "artist" => "Don Ross",
    "venue" => "Masterclass at The Academy of Music, Gateshead",
    "link" => "http://www.guitarbar.co.uk",
    "label" => "donross",
    );

?> 
```

我想使用包含将所有这些单独的数组组合到一个事件页面中，并按时间顺序排列它们。有没有办法用“日期”关联数组来做到这一点？

所以它最终会是这样的：2013 年 3 月 18 日 Don Ross The Half Moon，Putney

2013 年 3 月 20 日 Brooke Miller Hobos，布里真德

2013 年 3 月 29 日 Jimmy Wahlsteen 车库，斯旺西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T17:35:19.077

是的，您需要像这样使用[uasort](http://php.net/manual/en/function.uasort.php)函数：

```
$sortedEvents = $donevents;
uasort($sortedEvents, function($eventA, $eventB){
    $eventDateA = DateTime::createFromFormat('F dS yyyy', $eventA['date']);
    $eventDateB = DateTime::createFromFormat('F dS yyyy', $eventB['date']);

    return $eventA->getTimestamp() < $eventB->getTimestamp() ? -1 : 1;
}); 
```

# ios - 如何将 UIView 固定到屏幕底部？

> ID：14859379
> 
> 赞同：5
> 
> 时间：2013-02-13T17:28:26.160
> 
> 标签：ios, cocoa-touch

我正在开发一个关闭自动布局并默认设置为 Iphone 5 的应用程序。现在我在屏幕底部有一个 UIView，当我在 IB 中的大小选项之间切换时，UIView 正确地向上移动以将自身固定到底部的屏幕。然而，当我在我的 iPhone 4 或模拟器上进行测试时，它并没有向上移动，而是被切断了。

我怎样才能使应用程序底部的 UIView 向上分流到较小的 iPhone 4？

请参阅以下示例

![](../Images/07de45b1a354fa9412d670dd153ad648.png)

![](../Images/70cac4ed2ab54ad0fe94297c3710b3ce.png)

我基本上希望白色盒子向上分流以填补灰色盒子下方的空隙。

***更新***

在视图层次结构方面，有一个包含视图，然后您看到的白色部分是一个简单的 UIView（白色背景），里面有一个滚动视图。该项目相当新，因此设置非常简单，并且没有任何代码可以定位任何 UIView。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-13T17:50:10.557

获取 Y 坐标，获取屏幕高度，减去主视图上方的任何 UI 元素（如状态栏）并减去您放置的 UIView 的高度。例如：

```
float y = [UIScreen mainScreen].bounds.size.height - [UIApplication sharedApplication].statusBarFrame.size.height - myView.frame.size.height;
[myView setFrame:CGRectMake(0, y, myView.frame.size.width, myView.frame.size.height)]; 
```

* * *

这是一个非常典型的完整示例...2013 ...这在顶部带有导航栏的 UITableViewController 中运行良好，并且您**没有**使用自动布局。

[相对于父视图的底部定位 UIView？](https://stackoverflow.com/questions/8258216/position-a-uiview-relative-to-the-bottom-of-the-parent-view/20287309#20287309)

希望它可以帮助某人。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T17:52:11.470

你应该让你的弹簧和支柱（自动调整面具）设置这样的东西......

![在此处输入图像描述](../Images/c9f3c59a9946725691d9013b02830d01.png)

然后视图将保持与屏幕底部的距离。

*更新*

在您的评论中，您说您正确设置了此设置，但视图仍被向下推。但是，您问题中的图像无法进行比较。在 4 英寸版本中，您的视图似乎向上滚动到屏幕顶部上方，而 3.5 英寸版本不是这种情况。我怀疑其中的原因（或者只是 b/c 您必须向上滚动 4 英寸以适应屏幕上的问题？）...您可以检查并使用有关视图层次结构的更多详细信息更新您的问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-13T17:51:35.833

在 AutoLayout 关闭的情况下，您在屏幕上放置视图的位置是一个固定值。要进行此自动调整，您需要一些代码。您将需要使用`autoresizingMask`. 这是使用 autoresizingMask/ 的示例

```
UIView *view = [[UIView alloc] init];
[view setAutoresizingMask:UIViewAutoresizingFlexibleTopMargin]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-10T18:53:43.143

最简单的方法是选择您的视图，然后转到 Editor -> Pin -> Bottom Space to SuperView。无论设备分辨率如何，此选项都会将您的视图固定到容器视图的底部。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-09-03T22:40:50.120

扩展@Joel 的答案，对于 iOS 7，我们不需要减去 statusBar 的高度。

```
float y = [UIScreen mainScreen].bounds.size.height - myView.frame.size.height;
[myView setFrame:CGRectMake(0, y, myView.frame.size.width, myView.frame.size.height)];

```

# .net - .NET 用户控件：如何在不编译的情况下在 VS 设计器中使用？

> ID：14859381
> 
> 赞同：1
> 
> 时间：2013-02-13T17:28:32.663
> 
> 标签：.net, user-controls, designer

我正在尝试创建一些教程项目，以便我可以在项目之间共享其中的一部分，我已经将它的一部分放入用户控件中（作为 .cs 文件包含在项目中，位于一个公共项目中文件夹）。问题是，除非我编译项目，否则我添加用户控件（从工具箱拖放）的表单设计器在我打开它们时（清理项目后）抛出异常：

找不到类型“WindowsFormsApplication4.UserControl1”。请确保引用了包含此类型的程序集。如果此类型是您的开发项目的一部分，请确保已使用当前平台或任何 CPU 的设置成功构建项目。

我试图使该项目易于使用，因此要求用户先编译它才不会。有没有办法让设计人员在设计时渲染用户控件之前对其进行编译？（分发任何编译文件不是一种选择）

或者，我可以将表单设计器配置为在设计时显示不同的对象吗？如果未编译用户控件，将显示的占位符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T17:34:12.300

不，Designer 需要编译any `UserControl`（实际上是 any ），因为它实际上是在运行代码来显示控件。`Control`

您必须在设计器正常运行之前构建项目，或者将其与控件的预构建程序集一起分发。

# android - SherlockFragmentActivity java.lang.NoSuchFieldError 在开始设置内容视图时

> ID：14859385
> 
> 赞同：1
> 
> 时间：2013-02-13T17:28:47.957
> 
> 标签：android, exception, view, actionbarsherlock, layout-inflater

开始活动时，我正在检索以下错误：

```
02-14 09:51:30.898: V/ViolazioniActivity(7510): onCreate before 2130903076
02-14 09:51:30.913: D/dalvikvm(7510): DexOpt: couldn't find static field Lit/helian/violazioni/R$id;.btn1
02-14 09:51:30.913: W/dalvikvm(7510): VFY: unable to resolve static field 6831 (btn1) in Lit/helian/violazioni/R$id;
02-14 09:51:30.913: D/dalvikvm(7510): VFY: replacing opcode 0x60 at 0x0015
02-14 09:51:30.913: D/dalvikvm(7510): DexOpt: couldn't find static field Lit/helian/violazioni/R$id;.btn2
02-14 09:51:30.913: I/dalvikvm(7510): DexOpt: unable to optimize static field ref 0x1ab0 at 0x30 in Lit/helian/violazioni/fe/ui/ViolazioniDashboardFragment;.onCreateView
    02-13 18:14:32.565: E/AndroidRuntime(26290): FATAL EXCEPTION: main
    02-13 18:14:32.565: E/AndroidRuntime(26290): java.lang.NoSuchFieldError: it.helian.violazioni.R$id.btn1
    02-13 18:14:32.565: E/AndroidRuntime(26290):    at it.helian.violazioni.fe.ui.ViolazioniDashboardFragment.onCreateView(ViolazioniDashboardFragment.java:38)
    02-13 18:14:32.565: E/AndroidRuntime(26290):    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:846)
    02-13 18:14:32.565: E/AndroidRuntime(26290):    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1061)
    02-13 18:14:32.565: E/AndroidRuntime(26290):    at android.support.v4.app.FragmentManagerImpl.addFragment(FragmentManager.java:1160)
    02-13 18:14:32.565: E/AndroidRuntime(26290):    at android.support.v4.app.FragmentActivity.onCreateView(FragmentActivity.java:272)
    02-13 18:14:32.565: E/AndroidRuntime(26290):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:669) 
```

主要活动

```
 package it.helian.violazioni.be.activity;

import it.helian.violazioni.R;
import android.os.Bundle;
import android.util.Log;

import com.actionbarsherlock.app.SherlockFragmentActivity;
import com.googlecode.androidannotations.annotations.EActivity;

//@EActivity(resName="activity_violazioni")
@EActivity
public class ViolazioniActivity extends SherlockFragmentActivity {

    public static final String TAG = "ViolazioniActivity";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        Log.v(TAG, "onCreate before " + R.layout.activity_violazioni);
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_violazioni);
        Log.v(TAG, "onCreate after");
    }
} 
```

R.layout.activity_violazioni

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/home_root"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<fragment
    android:id="@+id/fragment_dashboardz"
    android:name="it.helian.violazioni.fe.ui.ViolazioniDashboardFragment"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_weight="1" /> 
```

it.helian.violazioni.fe.ui.ViolazioniDashboardFragment

```
public class ViolazioniDashboardFragment extends SherlockFragment {
        @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        System.out.println("Check 2a");
        View root = inflater.inflate(R.layout.main_menu, container);
        System.out.println("Check 2b");
        btn1 = (MainButton) root.findViewById(R.id.btn1);
        System.out.println("Check 3");
        btn1.setOnClickListener(
                new View.OnClickListener() {
                    public void onClick(View view) {
                        fireTrackerEvent(EVENT_CLICK_CLASSICA);
                    }

                });

        btn2 =(MainButton) root.findViewById(R.id.btn2);
        btn2.setOnClickListener(
                new View.OnClickListener() {
                    public void onClick(View view) {
                        fireTrackerEvent(EVENT_CLICK_CLASSICA_ANPR);
                    }
                });
} 
```

main_menu.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical"
android:padding="1dp"
android:weightSum="101" >

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="0dp"
    android:layout_weight="10" />

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="0dp"
    android:layout_weight="27"
    android:orientation="horizontal"
    android:weightSum="10" >

    <it.helian.violazioni.fe.ui.MainButton
        android:id="@+id/btn1"
        android:layout_width="0dp"
        android:layout_height="fill_parent"
        android:layout_margin="1dp"
        android:layout_weight="5" />

    <it.helian.violazioni.fe.ui.MainButton
        android:id="@+id/btn2"
        android:layout_width="0dp"
        android:layout_height="fill_parent"
        android:layout_margin="1dp"
        android:layout_weight="5" />
</LinearLayout>

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="0dp"
    android:layout_weight="10" /> 
```

如果您需要更多详细信息，请写下来，我会尽力帮助您！

先感谢您

问候，

卢卡

# java - Ant - 设置 ClassPath 不适用于批量测试

> ID：14859391
> 
> 赞同：2
> 
> 时间：2013-02-13T17:29:31.237
> 
> 标签：java, ant, junit

我有这个并且工作正常：

```
<target name="runjunit">
    <junit>
        <classpath>
            <pathelement path="${build}"/>
            <fileset dir="lib">
                <include name="*.jar"/>
            </fileset>
        </classpath> 
        <test name="com.xyzcompany.abcproject.test.junit.CalculatorTest"/>
        <formatter type="brief" usefile="false"/>
    </junit>
</target> 
```

但是，我有多个测试。所以我这样做：

```
<target name="runjunit">
    <junit>
        <classpath>
            <pathelement path="${build}"/> <---- this doesn't seem to work anymore
            <fileset dir="lib">
                <include name="*.jar"/>
            </fileset>
        </classpath> 
        <batchtest>
            <fileset dir="com/xyzcompany/abcproject/test/junit">
                <include name="**/*.*"/>
            </fileset>
        </batchtest>
        <formatter type="brief" usefile="false"/>
    </junit>
</target> 
```

但是，这告诉我该目录不存在：

`C:\Users\me\Desktop\repository\mainproj\trunk\com\xyzcompany\abcproject\test\junit does not exist.`

以上应该是：

`C:\Users\me\Desktop\repository\mainproj\trunk\build\com\xyzcompany\abcproject\test\junit`

如您所见，classpath 中的路径元素将在单个测试中设置trunk/build/com，但在batchtest 中不会。

为了隐私，目录和包名称被混淆。

知道如何更改批处理测试以使类路径中的路径元素真正起作用吗？谢谢！

编辑：

这不起作用：

```
<batchtest>
    <fileset dir="${build}/com/xyzcompany/abcproject/test/junit">
        <include name="**/*.*" />
    </fileset>
</batchtest> 
```

它给了我：

`java.lang.ClassNotFoundException: CalculatorTest`

将其设置为`<fileset dir="${build}/com/xyzcompany/abcproject/test/junit">`没有任何意义，因为该类不知道它正在构建中。因此，设置类路径是正确的选择，但不适用于`<batchtest>`.

编辑2：

现在仔细想一想，这样做还是有道理的`<fileset dir="${build}/com/xyzcompany/abcproject/test/junit">`。但是，当它启动时`java`，`junit`它不会从`${build}`类路径运行 junit。

编辑 3：

```
<batchtest>
    <fileset dir="${build}">
        <include name="com/xyzcopmany/abcproject/test/junit/*"/>
    </fileset>
</batchtest> 
```

最后的答案。Ant 确实应该有更好的文档。这是一个复杂的产品...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T17:39:33.753

放

```
<fileset dir="com/xyzcompany/abcproject/test/junit"> 
```

到

```
<batchtest>
    <fileset dir="${buildTests}">
        <include name="**/*Test*.class"/>
    </fileset>
</batchtest> 
```

不要在 ${buildTests} 中包含 com/xyzcompany/abcproject/test/junit 部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T17:39:24.660

如果您想从目录中获取批处理测试的`${build}`文件，您应该告诉

```
 <batchtest>
        <fileset dir="${build}/com/xyzcompany/abcproject/test/junit">
            <include name="**/*"/>
        </fileset>
    </batchtest> 
```

# jsp - JSP - 范围属性名称与 EL 隐式对象相同

> ID：14859395
> 
> 赞同：0
> 
> 时间：2013-02-13T17:29:45.583
> 
> 标签：jsp, el

你能解释一下我的行为吗？我在 servlet 中设置请求属性并在 JSP 中读取它。

1）调度程序servlet代码：

```
request.setAttribute("someName", someObject); 
```

自然地，我可以在 JSP 中将其读取为`${someName}`

2）但是如果我将属性名称设置为与某些 EL 隐式对象名称相同，例如

```
request.setAttribute("requestScope", someObject); 
```

然后我必须把它读成`${requestScope.requestScope}`！

为什么容器能够直接映射 case#1 中的属性，但如果属性名称本身是 EL 隐式对象名称，我们需要像这样嵌套引用`${requestScope.requestScope}`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T17:54:01.993

EL 将首先检查给定的变量名称是否是保留（隐式）变量名称之一，然后按照规范使用它。如果不是，就像在 中一样`${someName}`，那么 EL 将自动在页面、请求、会话和应用程序范围内分别搜索具有该名称的属性。

您似乎期望这反过来起作用，即首先是属性，然后是隐式对象。这不是真的。否则它将完全破坏隐式 EL 对象的工作。

# mysql - 来自phtml的Magento sql查询

> ID：14859396
> 
> 赞同：0
> 
> 时间：2013-02-13T17:29:47.517
> 
> 标签：mysql, magento, magento-1.7, php

我想知道如何通过 phtml 文件在 magento 中运行 sql 查询。查询本身非常复杂，需要连接。有任何想法吗？

供您参考：

我有具有 3 个自定义属性（城镇、地区、城市）的产品。现在我想要实现的是按字母顺序排列的 AZ 城镇列表。单击该城镇时，它会过滤与该城镇关联的产品。

希望这是有道理的。

任何帮助深表感谢。

朱利安

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-13T17:34:36.787

从技术上讲，phtml 文件只不过是一个普通的 php 文件，因此您可以使用所有模型、资源等。所以你可以选择：

```
$resource = Mage::getSingleton('core/resource'); 
$readConnection = $resource->getConnection('core_read'); 
$query = 'SELECT * FROM ' . $resource->getTableName('catalog/product');
$results = $readConnection->fetchAll($query); 
```

**但是 phtml 文件是一个视图，所以你不应该直接在数据库上工作。而是尝试创建一个模型，在块中使用它，然后从块对象中调用准备好的数据。**

# google-app-engine - GWT 与 Google App Engine - 上传文件

> ID：14859401
> 
> 赞同：1
> 
> 时间：2013-02-13T17:29:57.510
> 
> 标签：google-app-engine, gwt, file-upload, blobstore, gwtupload

如何使用 GWT 和 GAE 上传文件？我找到了 GWTUpload 和[AppEngineUploadAction](http://gwtupload.googlecode.com/svn/site/apidocs/gae/gwtupload/server/gae/AppEngineUploadAction.html)类，但它无法写入文件系统。

谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T22:44:24.473

GAE 运行受限制的 java 环境，并且禁止写入文件系统。

您必须选择一种方式将数据存储在 GAE 中，gwtupload 支持 3 种方式将数据存储在服务器中，它提供 3 个 servlet：

*   `AppEngineUploadAction`它将上传的数据存储在[memcache](https://developers.google.com/appengine/docs/java/memcache/)中。在这种情况下，除非您将其保存在某处，否则数据将丢失。这被认为是处理数据并发送回客户端等的临时存储库。
*   `BlobstoreUploadAction`使用 google [blobstore](https://developers.google.com/appengine/docs/java/blobstore/overview)服务持久化数据。
*   `FilesApiUploadAction`用于在谷歌[云存储中存储数据](https://developers.google.com/appengine/docs/java/googlestorage/)

gwtupload 的客户端部分与所有这些都兼容，但存在一些问题，主要是如果您没有账单帐户，google 可以中断请求。尽管新版本的 gwtupload 计划在 html5 中取得进展，但进展并不顺利。

# c# - Azure 表存储返回 400 Bad Request

> ID：14859405
> 
> 赞同：133
> 
> 时间：2013-02-13T17:30:15.363
> 
> 标签：c#, azure, exception, azure-table-storage

我在调试模式下运行它，并附上一张带有异常详细信息的图像。我怎么知道出了什么问题？我试图在表格中插入数据。azure不能给我更多细节吗？

Obs：存储在 Windows Azure 上，而不是在我的机器上。表已创建，但插入数据时出现此错误

![在此处输入图像描述](../Images/9b9fa17e9b516b023279d77e31669e84.png)

```
// Retrieve the storage account from the connection string.
Microsoft.WindowsAzure.Storage.CloudStorageAccount storageAccount = Microsoft.WindowsAzure.Storage.CloudStorageAccount.Parse("DefaultEndpointsProtocol=https;AccountName=***;AccountKey=***");

// Create the table client.
CloudTableClient tableClient = storageAccount.CreateCloudTableClient();

// Create the table if it doesn't exist.
CloudTable table = tableClient.GetTableReference("EmployeeOnlineHistory");
table.CreateIfNotExists(); 
```

这是插入代码：

```
public static void SetStatus(Employee e, bool value)
{
    try
    {
        // Retrieve the storage account from the connection string.
        Microsoft.WindowsAzure.Storage.CloudStorageAccount storageAccount = Microsoft.WindowsAzure.Storage.CloudStorageAccount.Parse("DefaultEndpointsProtocol=https;AccountName=###;AccountKey=###");

        // Create the table client.
        CloudTableClient tableClient = storageAccount.CreateCloudTableClient();

        // Create the CloudTable object that represents the "people" table.
        CloudTable table = tableClient.GetTableReference("EmployeeOnlineHistory");

        // Create a new customer entity.

        if (value == true)
        {
            EmployeeOnlineHistory empHistory = new EmployeeOnlineHistory(e.Id);
            empHistory.IsOnline = true;
            empHistory.OnlineTimestamp = DateTime.Now;
            TableOperation insertOperation = TableOperation.Insert(empHistory);
            table.Execute(insertOperation);
        }
        else
        {
            TableQuery<EmployeeOnlineHistory> query = new TableQuery<EmployeeOnlineHistory>()
                .Where(TableQuery.GenerateFilterCondition("PartitionKey", QueryComparisons.Equal, e.Id.ToString()));
            EmployeeOnlineHistory entity = table.ExecuteQuery(query).Take(1).FirstOrDefault();

            if ((entity!=null)&&(entity.IsOnline))
            {
                entity.IsOnline = false;
                entity.OfflineTimestamp = DateTime.Now;
                entity.OnlineTime = (entity.OfflineTimestamp - entity.OnlineTimestamp);
                TableOperation updateOperation = TableOperation.Replace(entity);
                table.Execute(updateOperation);
            }
            else
            {
                EmployeeOnlineHistory empHistory = new EmployeeOnlineHistory(e.Id);
                empHistory.IsOnline = false;
                empHistory.OfflineTimestamp = DateTime.Now;
                TableOperation insertOperation = TableOperation.Insert(empHistory);
                table.Execute(insertOperation);
            }
        }
    }
    catch (Exception ex)
    {
        //var details = new System.IO.StreamReader(((Microsoft.WindowsAzure.Storage.StorageException)ex)..Response.GetResponseStream()).ReadToEnd();
        LogFile.Error("EmployeeOnlineHistory.setStatus",ex);
    }
} 
```

* * *

## 回答 #1

> 赞同：174
> 
> 时间：2013-02-14T02:29:23.837

400 错误表示您的某个属性的值有问题。找出答案的一种方法是通过 Fiddler 跟踪请求/响应并查看发送到 Windows Azure 存储的实际数据。

大胆猜测一下，我假设通过快速浏览您的代码，在您的模型中您有一些日期/时间类型属性（OfflineTimestamp、OnlineTimestamp）并观察到在某些情况下，其中一个使用默认值初始化是“ **DateTime.MinValue** ”。请注意，在 Windows Azure [[http://msdn.microsoft.com/en-us/library/windowsazure/dd179338.aspx]中](http://msdn.microsoft.com/en-us/library/windowsazure/dd179338.aspx)**，日期/时间类型属性允许的最小值是 1601 年 1 月 1 日 (UTC)**。请看看是不是这样。如果是这种情况，那么您可以将它们设为可为空的类型字段，这样它们就不会被填充默认值。

看看下面的 Juha Palomäki 的回答......有时在他建议的异常中会有一条更有用的消息 (RequestInformation.ExtendedErrorInformation.ErrorMessage)

* * *

## 回答 #2

> 赞同：144
> 
> 时间：2014-08-20T08:57:39.567

StorageException 还包含有关错误的更详细信息。

签入调试器：StorageException.RequestInformation.ExtendedInformation

![在此处输入图像描述](../Images/55043e40563fec6367e7d64bbe08916e.png)

* * *

## 回答 #3

> 赞同：60
> 
> 时间：2014-03-14T18:05:31.337

**就我而言，它是RowKey**中的正斜杠。

我还收到“OutOfRangeInput - 请求输入之一超出范围”。尝试通过存储模拟器手动添加时出错。

> 关键字段中不允许使用的字符
> 
> **PartitionKey**和**RowKey**属性的值中不允许使用以下字符 ：
> 
> *   正斜杠 ( **/** ) 字符
> *   反斜杠 ( **\** ) 字符
> *   数字符号 ( **#** ) 字符
> *   问号 ( **?** ) 字符
> *   **从U+0000 到 U+001F**的控制字符，包括：
>     *   水平制表符 ( **\t** ) 字符
>     *   换行符 ( **\n** ) 字符
>     *   回车 ( **\r** ) 字符
>     *   从**U+007F 到 U+009F 的控制字符**

[http://msdn.microsoft.com/en-us/library/dd179338.aspx](http://msdn.microsoft.com/en-us/library/dd179338.aspx)

我写了一个扩展方法来为我处理这个。

```
public static string ToAzureKeyString(this string str)
{
    var sb = new StringBuilder();
    foreach (var c in str
        .Where(c => c != '/'
                    && c != '\\'
                    && c != '#'
                    && c != '/'
                    && c != '?'
                    && !char.IsControl(c)))
        sb.Append(c);
    return sb.ToString();
} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-06-10T20:21:28.340

我遇到了同样的问题，但在我的情况下，原因是尺寸。深挖附加异常属性（RequestInformation.ExtendedErrorInformation）后，发现原因：

ErrorCode : PropertyValueTooLarge ErrorMessage: 属性值超过了允许的最大大小 (64KB)。如果属性值为字符串，则为 UTF-16 编码，最大字符数应为 32K 或更少。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2018-05-24T08:10:34.643

好吧，就我而言，我试图这样做：

```
CloudBlobContainer container = blobClient.GetContainerReference("SessionMaterials");
await container.CreateIfNotExistsAsync(); 
```

由于 ContainerName `SessionMaterials`（作为 Pascal Case 和 Camel Case 的习惯写作：D），它导致了 400 个错误请求。所以，我只需要成功`sessionmaterials`。它奏效了。

希望这对某人有所帮助。

PS：- 只需检查异常 http 响应或使用 fiddler 捕获请求和响应。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-06-07T13:07:58.437

有时是因为你的`partitionKey`或是`rowKey``NULL`

（对我来说就是这种情况）

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2017-08-24T20:06:52.620

在我的情况下：容器名称是大写字母。使用字符时有限制。 [![在此处输入图像描述](../Images/636f6056bb9c6bb4cc5450a3aae278e2.png)](https://i.stack.imgur.com/bPUeC.png)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-06-12T09:35:56.760

可以在[此处找到 MS 提供的有关所有表服务错误代码的文档](https://docs.microsoft.com/en-us/rest/api/storageservices/table-service-error-codes)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-02-06T08:26:03.033

当实体未设置属性 DateTime (= DateTime.MinValue) 时，我收到 (400) Bad Request, StatusMessage:Bad Request, ErrorCode:OutOfRangeInput

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2018-06-15T07:26:20.890

我有同样的 BadRequest(400) 错误，最后我手动填写：

[![在此处输入图像描述](../Images/57e6912aebb742f47c545e5008e0899c.png)](https://i.stack.imgur.com/Z7BGE.png)

并为我工作。希望这可以帮助！

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-09-01T19:45:45.043

我也面临同样的问题。在我的情况下，未设置 PartitionKey 值，因此默认情况下 PartitionKey 值为 null，导致`Object reference not set to an instance of an object.`异常

检查您是否为 PartitionKey 或 RowKey 提供了适当的值，您可能会遇到此类问题。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-07-12T22:23:48.260

我修好了我的案子，效果很好

我的案例：

1.  行键格式不正确 (400)。
2.  partitionkey 和 rowkey 的组合不是唯一的 (409)。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-11-06T06:07:28.707

我收到了 400 错误请求，因为我使用的是 ZRS（区域冗余存储），而 Analytics 不适用于这种类型的存储。我不知道我在使用 Analytics。

我删除了存储容器并重新创建为 GRS，现在它工作正常。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-07-29T21:24:10.923

在我的例子中：我包含了带有连字符的标记名称的 blob 元数据。

```
var blob = container.GetBlockBlobReference(filename);
blob.Metadata.Add("added-by", Environment.UserName);
//.. other metadata
blob.UploadFromStream(filestream); 
```

破折号`"added-by"`是问题所在，后来 RTFM 告诉我标签名称必须符合 C# 标识符约定。

参考：[https ://docs.microsoft.com/en-us/azure/storage/blobs/storage-properties-metadata](https://docs.microsoft.com/en-us/azure/storage/blobs/storage-properties-metadata)

下划线工作正常。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2018-11-28T19:31:30.007

就我而言，我不应该在我的实体类中添加 PartitionKey 和 Rowkey。它应该来自基类。下面就可以了。

```
public class TableRunLogMessage:TableEntity
{
      public string status { get; set; }
      public long logged { get; set; }

      public TableRunLogMessage() { }
} 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2019-01-08T18:05:36.733

如果你在使用 NodeJS 并偶然发现这篇文章，你会发现你的错误对象中没有得到那么可爱的详细信息；您可以使用代理来获取这些详细信息。但是，由于这里没有人提到如何使用代理。

NodeJS 最简单的方法是设置两个环境变量：

```
NODE_TLS_REJECT_UNAUTHORIZED=0
This disables SSL checks so you can intercept your own SSL requests. This leaves you open to Man-in-The-Middle attacks and should NEVER make it to production, and I wouldn't even leave it in development for long. However, it will allow you to intercept the HTTP Requests.

HTTP_PROXY=http://127.0.0.1:8888
This sets node to utilize a proxy listening on your localhost at port 8888\. Port 8888 is the default for Fiddler. Many other proxies default to 8080. 
```

如果你真的在使用 C#，就像这篇文章的作者正在做的那样；您可以简单地安装 Fiddler 并将其设置为拦截。默认情况下，它应该拦截请求。您可能还需要信任 Fiddler 的证书，或者执行与 Node 的“NODE_TLS_REJECT_UNAUTHORIZED=0”等效的操作。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2019-04-12T23:43:49.213

我从 Azure 存储帐户表 API 收到 400-BadRequest 响应。异常信息显示“正在访问的帐户不支持http。”。我认为当在存储帐户配置中启用“需要安全传输”时，我们必须在连接字符串中使用 https，如下图所示。[![在此处输入图像描述](../Images/dfd016f922f4fafbd6e6bb5670f468de.png)](https://i.stack.imgur.com/y7yeN.png)

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2019-06-27T09:33:15.400

在我创建“TableBotDataStore”类（MS bot 框架）的新实例的情况下，我们将“tableName”参数与“master-bot”之类的连字符一起传递，而 TableBotDataStore 的表名只能包含字母和数字

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2019-08-20T20:09:37.610

我有同样的问题，该函数正在传递`containerNameKey`as 字符串。下面是给出错误的代码

```
container = blobClient.GetContainerReference(containerNameKey) 
```

我把它改成

```
container = blobClient.GetContainerReference(ConfigurationManager.AppSettings(containerNameKey).ToString()) 
```

有效

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2020-12-31T10:40:29.073

当我尝试将太长的值放入字符串字段时，我得到了 400-BadRequest 响应。

“一个 UTF-16 编码的值。字符串值的大小可能高达 64 KiB。请注意，支持的最大字符数约为 32 K 或更少。”

[https://docs.microsoft.com/en-us/rest/api/storageservices/understanding-the-table-service-data-model](https://docs.microsoft.com/en-us/rest/api/storageservices/understanding-the-table-service-data-model)

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2021-01-20T10:35:06.887

对我来说，我使用了带有破折号的表名示例：tablename:"table-1234"，但是没有破折号的 tablename:"table1234" 有效。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2021-02-26T14:43:50.150

对我来说，我尝试使用包含“#”字符的 PartitionKey/RowKey 将实体插入 Azure 存储表。令人讨厌的是这是不允许的，因为在单表设计中通常使用“#”作为分隔符。

# javascript - V8 shell 和从标准输入读取

> ID：14859408
> 
> 赞同：1
> 
> 时间：2013-02-13T17:30:23.443
> 
> 标签：javascript, v8

我使用 v8-shell 进行研究。我需要从我的 JS 脚本中读取“stdin”。

例如，我将 JS 脚本运行为： cat textfile.txt | ./v8-shell myscript.js

在我的“myscript.js”中，我需要读取传递给标准输入的数据。

是否可以？我怎样才能做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T17:39:17.517

v8 不提供 I/O 库。它基本上只是核心 JavaScript 语言的运行时，提供了一些对象，如 Math、String 和 Array 作为一部分。

缺少I/O 等*重要*模块是因为它们在浏览器环境中没有用处，而 v8 是作为此类环境的一个组件来实现的。为了能够将 v8 用作独立的编程环境，至少需要具有用于基本 I/O 的本机库。在这里，您有两个选择：实现 v8 的 I/O 扩展或使用现有的扩展。前者需要 C++ 知识，因为 v8 是用 C++ 实现的，并提供用于 C++ 扩展的 api。后一种选择更容易。您可以在此类库的许多实现之间进行选择。

一个流行的库是[node.js](http://nodejs.org)，它为 I/O 和网络提供了一个详尽的事件驱动的、主要是异步的 api。如果您可以使用[node.js ，则通过](http://nodejs.org)[process](http://nodejs.org/docs/latest/api/process.html)模块在其中提供对 stdin、stdout 和 stderr 的访问。*快速链接：[process.stdin](http://nodejs.org/docs/latest/api/process.html#process_process_stdin)。*

另一个项目是[CommonJs](http://commonjs.org)，它是一个列表规范和它的大量实现，致力于提供 API（带或不带 I/O）以供在浏览器环境之外使用 JS。[许多实现都在 v8 之上，在http://commonjs.org/impl/](http://commonjs.org/impl/)中列出。

另一个这样的项目是 Gnome 的[Seed](https://live.gnome.org/Seed)，它提供了一个 API，包括 GObjectInstrospection。它还使用自定义 JS 运行时，因此如果您需要坚持使用 v8，这不是您的选择。Seed 还值得注意的是它是用 C 语言实现和扩展的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-23T14:44:42.587

答案是肯定的。您可以使用该`readline()`功能。

我在 ECMAScript 规范中没有看到它，但是 Google [v8](https://github.com/v8/v8/blob/3.29.84/src/d8.cc)、WebKit 的 JavaScriptCore 和 Mozilla [SpiderMonkey](https://developer.mozilla.org/en-US/docs/Mozilla/Projects/SpiderMonkey/Introduction_to_the_JavaScript_shell)都支持它（并且已经支持了很长一段时间）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-15T20:42:42.780

请看一下符合 common.js 并且基于 v8 的[teajs](http://code.google.com/p/teajs/wiki/API) - 这是我知道的唯一一个让您构建 apache 'mod_teajs' 模块的项目（我认为 node.js 服务器尚未准备好生产）它确实有标准的 IO。

```
stdin
system.stdin.read(count) - read count bytes from standard input. The data is returned as an instance of Buffer. If count == 0, all available data is read. 
system.stdin.readLine([count]) - reads a line from standard input. If count is not specified, reads up to 65535 bytes. When no data is available, returns null. 

stdout
system.stdout.write(data) - write data to standard output. Data can be either string or Buffer. 
system.stdout.writeLine(data) - write data followed by a line break to standard output. Data can be either string or Buffer. 
system.stdout.flush() - flushes stdout 

stderr
system.stderr.write(data) - write data to standard error output. Data can be either string or Buffer. 
system.stderr.writeLine(data) - write data followed by a line break to standard error output. Data can be either string or Buffer. 
system.stderr.flush() - flushes stderr 
```

# c# - 无法在 Windows Phone 7 中更新正在播放音乐的磁贴

> ID：14859419
> 
> 赞同：2
> 
> 时间：2013-02-13T17:30:44.880
> 
> 标签：c#, windows-phone-7, audio-player

我正在尝试在 Windows Phone 7 中构建音乐播放器应用程序。将项目添加到 Music+Videos 应用程序的历史记录页面工作正常。但是，当尝试关联“正在播放”磁贴以便在单击它时（或通过音量音乐控件）打开我的应用程序时，它会引发异常。

工作代码（仅历史）：

```
if (currentsong != null)
        {
            MediaHistoryItem historyItem = new MediaHistoryItem();
            historyItem.Title = currentsong.Name;
            historyItem.Source = "";
            historyItem.ImageStream = currentsong.Album.GetAlbumArt();

            if (historyItem.ImageStream == null)
            {
                StreamResourceInfo sri = Application.GetResourceStream(new Uri("noalbum2.png", UriKind.Relative));
                historyItem.ImageStream = sri.Stream;
            }

            MediaHistory mediaHistory = MediaHistory.Instance;
            mediaHistory.WriteRecentPlay(historyItem); //WORKS
            mediaHistory.NowPlaying = historyItem;   //Throws exception
        } 
```

产生的异常是：

> Microsoft.Phone.dll 中出现“System.InvalidOperationException”类型的未处理异常
> 
> 附加信息：部分阅读？

请帮忙。

谢谢， 悉达特

# vba - 将成批的行转置为列

> ID：14859422
> 
> 赞同：0
> 
> 时间：2013-02-13T17:30:47.703
> 
> 标签：vba, rows, transpose

我想知道是否有任何方法可以使用 VBA 转置“批次”行。我有一个包含 1.000 多个“名称 X”条目的大文件。

该文件如下所示：

![在此处输入图像描述](../Images/d7a5d7bf4069f40c9d70ecf29df9434e.png)

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T20:30:20.137

以下是您的代码必须采取的一些步骤：

*   依次找到每个“Name x”单元格

*   找到下面要转置的部分的范围（#rows，#columns）

*   在部分下方插入行数等于区域中的列数

*   复制原件

*   特殊粘贴到新区域（这也允许您粘贴格式）

*   删除旧行

*   重复下一个...

试试看，在编辑后的答案中展示你做了什么，人们会在你遇到困难的地方帮助你......

# wordnet - 将 wordnet 映射到其他本体

> ID：14859425
> 
> 赞同：3
> 
> 时间：2013-02-13T17:30:57.607
> 
> 标签：wordnet

是否有可用于 wordnet 3.0 同义词集到[Cyc](http://www.cyc.com/platform/researchcyc)、[YAGO](http://www.mpi-inf.mpg.de/yago-naga/yago/)和[EuroWordNet（](http://www.illc.uva.nl/EuroWordNet/)如[SUMO](http://www.ontologyportal.org/) ）的其他本体的映射？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T10:32:53.837

Yago[与 Wordnet](http://www.mpi-inf.mpg.de/yago-naga/yago/)和[SUMO](http://www.mpi-inf.mpg.de/~gdemelo/yagosumo/)相关联。请检查链接。

# extjs - 使用 jsonp 的 Extjs 组合框

> ID：14859432
> 
> 赞同：2
> 
> 时间：2013-02-13T17:31:23.673
> 
> 标签：extjs, jsonp

是否可以配置一个 Extjs 组合框，其中远程 queryMode 使用 jsonp 请求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T17:39:03.560

是的，只需让您的商店使用[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.proxy.JsonP](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.proxy.JsonP)

```
Ext.define('User', {
    extend: 'Ext.data.Model',
    fields: ['id', 'name', 'email']
});

var store = Ext.create('Ext.data.Store', {
    model: 'User',
    proxy: {
        type: 'jsonp',
        url : 'http://domainB.com/users'
    }
});

Ext.create('Ext.form.ComboBox', {
    fieldLabel: 'Choose User',
    store: store,
    queryMode: 'remote',
    displayField: 'email',
    valueField: 'id',
    renderTo: Ext.getBody()
}); 
```

将注入以下脚本标签

```
<script src="http://domainB.com/users?callback=callback1"></script> 
```

# perl - 脚本未运行或显示错误

> ID：14859436
> 
> 赞同：0
> 
> 时间：2013-02-13T17:31:35.770
> 
> 标签：perl, terminal

我正在编写一个脚本来查看 access_log 文件，以查看每个搜索引擎被访问了多少次，以及哪个搜索引擎被访问最多。我确信我的某些语法存在问题，但我什至无法判断，因为在运行它时我没有收到任何信息。任何帮助，将不胜感激！

代码：

```
#!/usr/bin/perl

use 5.010;

$googleCount = 0;
$msnCount = 0;
$yahooCount = 0;
$askCount = 0;
$bingCount = 0;

while (<STDIN>)
{
    if (/(google.com)/)
    {
        $googleCount++;
    }

    if (/(msn.com)/)
    {
        $msnCount++;
    }

    if (/yahoo.com/)
    {
        $yahooCount++;
    }

    if (/ask.com/)
    {
        $askCount++;
    }

    if (/bing.com/)
    {
        $bingCount++;
    }
}

print "Google.com was accessed $googleCount times in this log.\n";
print "MSN.com was accessed $msnCount times in this log.\n";
print "Yahoo.com was accessed $yahooCount times in this log.\n";
print "Ask.com was accessed $askCount times in this log.\n";
print "Bing.com was accessed $bingCount times in this log.\n"; 
```

我正在运行 MacOS。在我输入的终端中：

```
perl -w access_scan.pl access_log.1 
```

当我按下回车键时，什么也没有发生。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T17:34:22.817

该脚本正在尝试从 STDIN 读取，但您提供了要从中读取的文件名作为参数。

“什么都没有发生”，因为脚本正在等待输入（由于您没有将任何内容重定向到标准输入，因此它希望您输入）。

更改`<STDIN>`为`<>`或将命令更改为`perl -w access_scan.pl < access_log.1`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T19:47:35.733

除了您的脚本没有按预期工作之外，您的脚本还有一些问题：

在正则表达式中，点`.`匹配任何非换行符。这包括文字句点，但不限于此。要么转义它 ( ) 要么用:`/google\.com/`保护特殊字符。`\Q...\E``/\Qgoogle.com\E/`

有一句编程谚语“三个或更多，使用一个`for`”。循环中的所有条件*都是*相同的，除了正则表达式。您的计数实际上是一个变量。您最后的报告多次出现在同一行。

您可以使用哈希来减轻痛苦：

```
#!/usr/bin/perl
use strict; use warnings; use feature 'say';

my %count;  # a hash is a mapping of strings to scalars (e.g. numbers)
my @sites = qw/google.com msn.com yahoo.com ask.com bing.com/;

# initialize the counts we are interested in:
$count{$_} = 0 foreach @sites;

while (<>) { # accept input from files specified as command line options or STDIN
  foreach my $site (@sites) {
    $count{$site}++ if /\Q$site\E/i; # /i for case insensitive matching
  }
}

foreach my $site (@sites) {
  say "\u$site was accessed $count{$site} times in this log";
} 
```

大写的`\u`下一个字符，这是产生相同输出所必需的。
与`say`完全相同`print`，但附加了一个换行符。它在 perl5 v10 或更高版本中可用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T17:33:54.593

您的脚本正在从标准输入读取，但您将输入作为文件提供。您需要[重定向](http://www.tldp.org/LDP/abs/html/io-redirection.html)：

```
perl -w access_scan.pl < access_log.1 
```

该`< file`构造提供文件的内容作为脚本的标准输入。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T18:07:31.557

该脚本运行良好（我对其进行了测试），但您需要将其与 STDIN 中的日志一起提供：

```
cat access_log.1 | perl -w access_scan.pl 
```

# ajax - 如何手动使彩盒加载 gif 出现？

> ID：14859437
> 
> 赞同：0
> 
> 时间：2013-02-13T17:31:46.203
> 
> 标签：ajax, colorbox

我已经配置了颜色框，并且在窗口加载时会出现加载 gif，但是当我从窗口中调用页面方法时，如何让它出现？

我在 jScript 中调用该方法，它工作得很好，但加载 gif 没有出现，所以在我的用户提示消息出现之前，它让人感觉没有任何事情发生。

无论如何我可以在我的代码中调用加载 gif 吗？

我的 jScript 非常简单：

```
// handler for submit button calling page method
    $addHandler($get('SendEmailPageMethod'), 'click', EmailPageMethod);
});

function EmailPageMethod() {
    var name = $get('name').value;
    var email = $get('email').value;
    var message = $get('message').value;

    PageMethods.SendEmail(name, email, message, SuccessCallback, ErrorCallback);
}

function SuccessCallback(resultString) {
    $('#innerForm').addClass('hidden');
    $('div.successMsg').removeClass('hidden');
    //alert(String(resultString));
}

function ErrorCallback(resultString) {
    alert(String(resultString));
    parent.jQuery.colorbox.close();
} 
```

此 jScript 位于打开颜色框窗口的父页面上：

```
 // handles colorbox for contact form
                $('#contact-form').colorbox({ maxWidth: '75%',
                    close: '',
                    // removes selected class from contact menu item on close
                    onClosed: function () {
                        $('#contact-form').removeClass('selected');
                    }
                }); 
```

这就是我打开颜色框表单并提交它时 jScript 控制台所说的内容。

![在此处输入图像描述](../Images/902181d5fb60ff9a0f1c0aec1c81ee6f.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T07:50:11.777

只需在文档中查询相关元素并更改其显示类型：

```
$('#cboxLoadingOverlay, #cboxLoadingGraphic').show(); 
```

# asp.net - 在第二组数据绑定之后，Repeater 不显示任何内容

> ID：14859448
> 
> 赞同：1
> 
> 时间：2013-02-13T17:32:35.420
> 
> 标签：asp.net, data-binding, webforms, repeater

我在 ASCX 文件中有以下中继器：

```
<asp:Repeater ID="repeater1" runat="server">
            <HeaderTemplate>
                <ul class="formList">
            </HeaderTemplate>
            <ItemTemplate>
                <li><a href="plugins/umbracocontour/editForm.aspx?guid=<%# ((Umbraco.Forms.Core.Form)Container.DataItem).Id %>"
                    class="form">
                    <%# ((Umbraco.Forms.Core.Form)Container.DataItem).Name %></a> <small><a href="plugins/umbracocontour/editForm.aspx?guid=<%# ((Umbraco.Forms.Core.Form)Container.DataItem).Id %>">
                        Open form designer</a> <a href="plugins/umbracocontour/editFormEntries.aspx?guid=<%# ((Umbraco.Forms.Core.Form)Container.DataItem).Id %>">
                            View entries</a> </small></li>
            </ItemTemplate>
            <FooterTemplate>
                </ul>
            </FooterTemplate>
        </asp:Repeater> 
```

它通过名为的方法填充数据`ShowAllForms()`

```
private void ShowAllForms()
{
    using (var formStorage = new FormStorage())
    {
        var list = formStorage.GetAllForms(false).OrderBy(f => f.Name).Where(form => Security.HasAccessToForm(form.Id)).ToList();

        this.repeater1.DataSource = list;
        this.repeater1.DataBind();

        if (list.Count == 0)
        {
            this.paneBrowse.Visible = false;
        }
    }
} 
```

和`搜索表单：

```
private void SearchForms()
{
    var forms =
        this.formRepository.GetFormByFreeText(this.txtFormSearch.Text).Where(form => Security.HasAccessToForm(form.Id)).
            ToList();

    this.repeater1.DataSource = forms;
    this.repeater1.DataBind(); 
} 
```

`ShowAllForms()``Page_Load`如果没有回发，则在“显示所有表单”按钮的单击事件中调用。`SearchForms()`在“搜索表单”按钮的回发中调用。

作为非管理员用户，当我查看表单列表时，我最初会看到一大堆表单。然后我通过它的名称搜索一个不应该返回任何项目的表单。到现在为止还挺好。然后我单击将执行的“显示所有表单”按钮`ShowAllForms()`，这就是首先显示所有表单的方法。

但是，当第二次调用时，`ShowAllForms()`不会在转发器中显示任何表单数据。为了澄清，我可以看到`forms`变量中返回了一些项目，所以集合不是空的，但是这些项目都没有出现在转发器中。

我对这里可能发生的事情感到困惑。

编辑：

页面的 OnLoad 事件：

```
protected void Page_Load(object sender, EventArgs e)
{ 
    if (!this.IsPostBack)
    {
        this.ShowAllForms();    
    }
} 
```

初始化：

```
protected void Page_Init(object sender, EventArgs e)
{
    this.formRepository = TinyIoC.TinyIoCContainer.Current.Resolve<IFormRepository>();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T18:00:37.147

我相信问题出在这里：

```
 if (list.Count == 0)
    {
        this.paneBrowse.Visible = false;
    } 
```

我看不到您`paneBrowse`再次将 's 可见性设置为 true 的位置。

一个快速的解决方法是：

```
 this.paneBrowse.Visible == (list.Count > 0); 
```

# batch-file - 仅列出目录中的文件夹

> ID：14859449
> 
> 赞同：3
> 
> 时间：2013-02-13T17:32:37.000
> 
> 标签：batch-file

我试图让用户输入特定目录中列出的文件夹名称。以下为我提供了列表，但包含可能会使用户感到困惑的完整路径。我的字符串 %officeL% 指的是路径位置，例如 c:\folder1\folder2\

`for /d %%X in (%officeL%*) do echo %%X`

理想情况下，我只想获得一个简单列表，其中仅包含我的字符串中指定的最终位置中的文件夹，例如 client1、client2、client3 ...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T18:17:07.803

您可以使用批处理参数修饰符：

```
for /d %%X in (%officeL%*) do echo %%~nX 
```

请参阅[http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/percent.mspx?mfr=true](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/percent.mspx?mfr=true)或

```
for /? 
```

了解更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T17:53:56.467

以下将为您工作

```
 @Echo OFF
    FOR /F %%G IN ('DIR /b %officeL%') DO CALL :Folders "%%G" 

    EXIT /b

    :Folders
    SET str1=%~1
    Echo %str1% 
```

# java - 重复字符的正则表达式模式

> ID：14859450
> 
> 赞同：2
> 
> 时间：2013-02-13T17:32:39.043
> 
> 标签：java, regex

我正在尝试匹配具有所有正确字母但可能有重复字母的单词。

像 ddddaaammmnn

`[a-z]*([damn])\\1{1,}[a-z]*`不起作用，因为`whhaaaat bananas ddaammn`同时捕获`whaaat`和`ddaammmn`。

`[a-z]*([d])\\1{1,}[a-z]*`将捕获所有 d 的重复。

如何告诉正则表达式以可能重复的特定顺序检查模式或字母？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T17:34:47.560

```
w+h+a+t+ 
```

匹配`what`，`wwwhaaaattt`以及所有其他变体，`what`只要字母顺序正确。

# python - 如何检查numpy矩阵的列中的所有值是否相同？

> ID：14859458
> 
> 赞同：42
> 
> 时间：2013-02-13T17:33:03.957
> 
> 标签：python, matrix, numpy

我想检查 numpy 数组/矩阵的列中的所有值是否相同。我尝试使用`reduce`ufunc [，](http://docs.scipy.org/doc/numpy/reference/ufuncs.html) `equal`但似乎并非在所有情况下都有效：

```
In [55]: a = np.array([[1,1,0],[1,-1,0],[1,0,0],[1,1,0]])

In [56]: a
Out[56]: 
array([[ 1,  1,  0],
       [ 1, -1,  0],
       [ 1,  0,  0],
       [ 1,  1,  0]])

In [57]: np.equal.reduce(a)
Out[57]: array([ True, False,  True], dtype=bool)

In [58]: a = np.array([[1,1,0],[1,0,0],[1,0,0],[1,1,0]])

In [59]: a
Out[59]: 
array([[1, 1, 0],
       [1, 0, 0],
       [1, 0, 0],
       [1, 1, 0]])

In [60]: np.equal.reduce(a)
Out[60]: array([ True,  True,  True], dtype=bool) 
```

为什么第二种情况下的中间列也评估为`True`，而应该是`False`？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2013-02-13T18:55:11.883

```
In [45]: a
Out[45]: 
array([[1, 1, 0],
       [1, 0, 0],
       [1, 0, 0],
       [1, 1, 0]]) 
```

将每个值与第一行中的对应值进行比较：

```
In [46]: a == a[0,:]
Out[46]: 
array([[ True,  True,  True],
       [ True, False,  True],
       [ True, False,  True],
       [ True,  True,  True]], dtype=bool) 
```

如果该列中的所有值都为 True，则该列共享一个公共值：

```
In [47]: np.all(a == a[0,:], axis = 0)
Out[47]: array([ True, False,  True], dtype=bool) 
```

* * *

`np.equal.reduce`可以通过微观分析将其应用于 时发生的情况来看出问题`[1, 0, 0, 1]`：

```
In [49]: np.equal.reduce([1, 0, 0, 1])
Out[50]: True 
```

前两项，`1`并`0`进行相等性测试，结果为`False`：

```
In [51]: np.equal.reduce([False, 0, 1])
Out[51]: True 
```

现在`False`和`0`进行相等性测试，结果是`True`：

```
In [52]: np.equal.reduce([True, 1])
Out[52]: True 
```

但是`True`和 1 相等，所以总结果是`True`，这不是期望的结果。

问题是`reduce`试图在“本地”累积结果，而我们想要一个像`np.all`.

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-01-19T14:51:07.010

鉴于 ubuntu 的精彩解释，您可以使用它`reduce`来解决您的问题，但您必须将其应用于`bitwise_and`and`bitwise_or`而不是`equal`. 因此，这不适用于浮点数组：

```
In [60]: np.bitwise_and.reduce(a) == a[0]
Out[60]: array([ True, False,  True], dtype=bool)

In [61]: np.bitwise_and.reduce(b) == b[0]
Out[61]: array([ True, False,  True], dtype=bool) 
```

基本上，您正在比较列中每个元素的位。相同的位不变。不同的位设置为零。这样，任何具有零而不是一位的数字都会改变减少的值。`bitwise_and`不会捕获引入而不是删除位的情况：

```
In [62]: c = np.array([[1,0,0],[1,0,0],[1,0,0],[1,1,0]])

In [63]: c
Out[63]: 
array([[1, 0, 0],
       [1, 0, 0],
       [1, 0, 0],
       [1, 1, 0]])

In [64]: np.bitwise_and.reduce(c) == c[0]
Out[64]: array([ True,  True,  True], dtype=bool) 
```

第二个显然是错误的。我们需要用来`bitwise_or`捕获新的位：

```
In [66]: np.bitwise_or.reduce(c) == c[0]
Out[66]: array([ True, False,  True], dtype=bool) 
```

**最终答案**

```
In [69]: np.logical_and(np.bitwise_or.reduce(a) == a[0], np.bitwise_and.reduce(a) == a[0])
Out[69]: array([ True, False,  True], dtype=bool)

In [70]: np.logical_and(np.bitwise_or.reduce(b) == b[0], np.bitwise_and.reduce(b) == b[0])
Out[70]: array([ True, False,  True], dtype=boo

In [71]: np.logical_and(np.bitwise_or.reduce(c) == c[0], np.bitwise_and.reduce(c) == c[0])
Out[71]: array([ True, False,  True], dtype=bool) 
```

这种方法比 ubunut 建议的 using 更具限制性且不那么优雅`all`，但如果您的输入很大，它的优点是不会创建大量临时数组。临时数组应该只与矩阵的第一行一样大。

**编辑**

基于此[Q/A](https://stackoverflow.com/questions/21050875/numpy-bitwise-and-reduce-behaving-unexpectedly)和[我使用 numpy 提交的错误](https://github.com/numpy/numpy/issues/7060)，提供的解决方案仅有效，因为您的数组包含零和一。碰巧的是，`bitwise_and.reduce()`显示的操作只能返回零或一，因为`bitwise_and.identity`is `1`， not `-1`。我保留这个答案，希望`numpy`得到修复并且答案变得有效。

**编辑**

看起来实际上很快就会对 numpy 进行更改。当然 to `bitwise_and.identity`，也可能是一个可选参数来减少。

**编辑**

大家好消息。的标识`np.bitwise_and`已设置`-1`为 version `1.12.0`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-05-31T21:49:53.663

不那么优雅，但也可以在上面的示例中使用。

```
a = np.array([[1,1,0],[1,-1,0],[1,0,0],[1,1,0]]) 
```

取每一行与其上一行之间的差异

```
np.diff(a,axis=0)==0 

array([[ True, False,  True],
       [ True, False,  True],
       [ True, False,  True]]) 
```

# iphone - 如何在电子邮件正文中发送图像？

> ID：14859463
> 
> 赞同：2
> 
> 时间：2013-02-13T17:33:35.403
> 
> 标签：iphone, ios6, base64, mfmailcomposeviewcontroller

我正在使用此[链接](https://stackoverflow.com/questions/1527351/how-to-add-an-uiimage-in-mailcomposer-sheet-of-mfmailcomposeviewcontroller-in-ip)在电子邮件正文中发送带有一些文本的图像，我的代码如下所示

```
NSString *urlString = @"url";
NSString *searchingurl = [NSString stringWithFormat:@"%@%@", urlString,idnumber];
NSString *string = [NSString stringWithFormat:@"%@<br><br>Item No :%@<br>Type :%@<br>Size : %@",searchingurl,str123,mytype,itemsize];
NSMutableString *emailBody = [[[NSMutableString alloc] initWithString:@"<html><body>"] retain];
NSData *imageData = UIImageJPEGRepresentation(myImage, 1.0f);
NSString *encodedString = [imageData base64Encoding];
[emailBody appendString:[NSString stringWithFormat:@"<p><b><img src='data:image/png;base64,%@'></b></p>",encodedString]];
[emailBody appendString:string];
[emailBody appendString:@"</body></html>"];
NSLog(@"%@",emailBody);
 MFMailComposeViewController *emailDialog = [[MFMailComposeViewController alloc] init];
emailDialog.mailComposeDelegate = self;
[emailDialog setSubject:@""];
[emailDialog setMessageBody:emailBody isHTML:YES];
[self presentModalViewController:emailDialog animated:YES];
[emailDialog release];
[emailBody release]; 
```

以上代码的屏幕显示

![在此处输入图像描述](../Images/112876bbbe88fb961868f4b644ed6be7.png)

向雅虎发送邮件后，它会在 Mackbook 和 iPhone 设备上显示我的图像和文本，当我向 Gmail 发送邮件并在 iphone 设备中检查它时，它会显示带有文本的图像，但是当我在 Mackbook 中检查 gmail 时，它不会显示我的图像

有人可以指导我为什么我的图片没有显示在 PC 上的 Gmail 中。任何帮助都会得到帮助。谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-13T17:39:56.043

```
MFMailComposeViewController *picker = [[MFMailComposeViewController alloc] init];
    picker.mailComposeDelegate = self;

    [picker setSubject:@"Your subject"];

    // Set up recipients
    NSArray *toRecipients = [NSArray arrayWithObject:@""];
    //NSArray *ccRecipients = [NSArray arrayWithObjects:@"second@example.com", @"third@example.com", nil];
    //NSArray *bccRecipients = [NSArray arrayWithObject:@"fourth@example.com"];

    [picker setToRecipients:toRecipients];
    //[picker setCcRecipients:ccRecipients];
    //[picker setBccRecipients:bccRecipients];

    NSLog(@"Video size >> %d",(videodta.length/1024)/1024);
  [picker addAttachmentData:imageData mimeType:@"image/png" fileName:@"testapp"];

    // Fill out the email body text
    NSString *emailBody = @"Type your message here";
    [picker setMessageBody:emailBody isHTML:NO];

    [self presentModalViewController:picker animated:YES];
    } 
```

# iphone - 无法在 uidatepicker 上选择今天的日期（已预先选择）

> ID：14859467
> 
> 赞同：2
> 
> 时间：2013-02-13T17:33:50.310
> 
> 标签：iphone, ios, ipad, uidatepicker

我在我的 IOS 应用程序中添加了一个 UIDatePicker，默认情况下会加载它并选择今天的日期。

我正在收听选定的事件以更新我的字段，但由于今天已经选择了我今天从来没有得到它是我想要选择的日期（因为它已经被选中）。我需要将至少一列更改为不同的，然后在第二步中选择返回今天的日期。

无论如何要在没有选定日期的情况下显示日期选择器，或者以某种方式收听选择器上的选项卡而不是选择？不想在工具栏中添加“今天”按钮来添加任何外部控件来解决此问题，或者从预先选择的不同日期开始，因为它与预先选择的日期相同。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T13:42:02.823

我不能 100% 确定您是否正在寻找这个。但这对我来说很好。

在 viewcontroller.m

```
- (void)viewDidLoad
 {
  [super viewDidLoad];
  dp.date = [NSDate date];    //dp is datepicker object
  NSDateFormatter *formDay = [[NSDateFormatter alloc] init];
  [formDay setDateFormat:@"dd/MM/yyy HH:mm"];
  NSString *day = [formDay stringFromDate:[dp date]];
  txt.text = day;
 }

-(IBAction)datepick:(id)sender
 {
  NSDateFormatter *formDay = [[NSDateFormatter alloc] init];
  [formDay setDateFormat:@"dd/MM/yyy HH:mm"];
  NSString *day = [formDay stringFromDate:[dp date]];
  txt.text = day; 
 } 
```

将该方法连接到日期选择器的值更改事件并包括`UITextFieldDelegate`

加载视图时，

![页面加载时](../Images/7bcfc557a80ca5e973eaea8fe7734eb7.png)

当日期选择器滚动时

![滚动日期选择器时](../Images/231f3557cfcebd45872008b5b05cffc5.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T19:58:04.253

苹果没有为此实施任何通知。原因是用户将点击、旋转和更改日期选择器，直到找到他们想要的日期。然后他们会点击某种完成或下一步按钮。您不希望用户尝试选择日期并且选择器继续解雇。如果您真的想实现这一点，那么您可以继承`UIDatePicker`或捕获您想要的部分的触摸。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-31T14:33:58.417

尝试继承 UIDatePicker，并覆盖 hitTest:withEvent:

```
-(UIView *)hitTest:(CGPoint)point withEvent:(UIEvent *)event
{
    // intercept the user touching the initially presented date on a datePicker,
    // as this will normally not send an event.
    // here we check if the user has touched the middle section of the picker,
    // then send the UIControlEventValueChanged action

    CGFloat midY = CGRectGetMidY(self.bounds);
    CGFloat dY = fabs(midY - point.y);

    if (dY < 17.0) // the active section is around 36px high
    {
        NSSet *targets = self.allTargets;
        for (id target in targets)
        {
            NSArray *actions = [self actionsForTarget:target forControlEvent:UIControlEventValueChanged];

            for (NSString *action in actions)
            {
                // suppress the leak warning here as we're not returning anything anyway
#pragma clang diagnostic ignored "-Warc-performSelector-leaks"
                [target performSelector:NSSelectorFromString(action) withObject:self];
            }
        }
    }

    return [super hitTest:point withEvent:event];
} 
```

我相信它可以改进，但作为一个起点，它可能会对你有所帮助。

# css - 检测自定义 Twitter 引导设置（CSS、变量和插件）

> ID：14859469
> 
> 赞同：0
> 
> 时间：2013-02-13T17:33:51.007
> 
> 标签：css, twitter-bootstrap, customization

我已经使用 Twitter Bootstrap 建立了一个网站。

当我[自定义我的 Bootstrap 下载](http://twitter.github.com/bootstrap/customize.html)时，我为颜色、装订线宽度等设置了自定义值。

两个月后，我想升级到 Bootstrap 版本 2.3.0，但忘记了我为这些自定义值设置了什么值。

与其遍历我的所有代码并搜索这些值并将它们插入我的新自定义下载包，有没有办法“导入”我当前的 bootstrap.css 文件，检测设置，然后升级到新版本？

我在[jQuery Mobile Themeroller](http://jquerymobile.com/themeroller/index.php)上看到过这样的功能，您可以通过复制和粘贴来导入 CSS，然后网站会为您执行升级。

Twitter Bootstrap 有类似的东西吗？或者有没有办法在不比较数百行代码的情况下做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T17:35:35.253

`git clone`存储库。然后`git checkout <your original version>`，然后将您的更改复制到顶部并进行比较。这将允许您仅查看您对最初使用的版本所做的更改，而不会看到新引导程序版本中的所有更改。然后您可以更新到 HEAD 并继续将您的更改复制到其中。

# sql-server-2008 - 如何删除所有重复记录（包括原始记录）

> ID：14859485
> 
> 赞同：0
> 
> 时间：2013-02-13T17:34:19.790
> 
> 标签：sql-server-2008, tsql

使用 SQL Server 2008 tsql，当一组值再次出现时，我试图删除表中的所有记录。所以如果我的桌子看起来像这样：

`id``col1``col2`
` 1``  A  ``  1  `
` 2``  A  ``  1  `
` 3``  A  ``  2  `
` 4``  B  ``  1  `
` 5``  B  ``  1  `
` 6``  B  ``  2  `

第 1、2、4、5 行都将被删除。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T17:43:18.400

```
;WITH d AS 
(
  SELECT col1, col2, c = COUNT(*) OVER 
    (PARTITION BY col1, col2 ORDER BY col1)
  FROM dbo.yourtable
)
DELETE d WHERE c > 1; 
```

事实上，它可以*稍微*整洁一些：

```
;WITH d AS 
(
  SELECT id, c = COUNT(*) OVER 
    (PARTITION BY col1, col2 ORDER BY col1)
  FROM dbo.yourtable
)
DELETE d WHERE c > 1; 
```

而且我会承认，我在 SQL Server 2012 上测试了上述内容，但是我忘记将小提琴更改为 SQL Server 2008。对于 SQL Server 2012 之前的版本，这是一种变体：

```
;WITH d AS 
(
  SELECT col1, col2
  FROM dbo.yourtable AS t
  GROUP BY col1, col2
  HAVING COUNT(*) > 1
)
DELETE t --*
FROM dbo.yourtable AS t
WHERE EXISTS 
(
  SELECT 1 FROM d 
  WHERE col1 = t.col1 AND col2 = t.col2
); 
```

*   你会认为在这里就足够了，`DELETE d;`但你会得到：

> 消息 4403，级别 16，状态 1，行 2
> 无法更新视图或函数“d”，因为它包含聚合、DISTINCT 或 GROUP BY 子句、PIVOT 或 UNPIVOT 运算符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T17:41:39.947

试试这个：

```
DELETE t
FROM dbo.yourTabe t
JOIN (
  SELECT col1,col2,COUNT(1) cnt
  FROM dbo.YourTable
  GROUP BY col1, col2
  HAVING COUNT(1)>1
) s
ON t.col1 = s.col1
AND t.col2 = s.col2 
```

# java - GhostScript：gswin32c 挂起，但 gswin32 有效

> ID：14859490
> 
> 赞同：0
> 
> 时间：2013-02-13T17:34:42.697
> 
> 标签：java, ghostscript

我们正忙于使用 GhostScript 9.06 使用以下命令将 PDF 文件转换为 TIFF 文件：

`gswin32c -dNOPAUSE -sDEVICE=tiff24nc -r300 -sCompression=lzw -sOutputFile="C:/destination.tif" "C:/source.pdf" -c quit`

这是在运行我们大多数批处理工具的 Windows 服务器上通过 Java 执行的。

这对我们的大部分文件都很有效，但对于某些文件，进程只是挂起，任务管理器显示 gswin32c.exe 进程正在使用 0% 的 CPU。如果 GhostScript 无法响应，我们已经在一分钟后终止了该进程并使用 PDFBox 转换 PDF。

当使用相同的命令但使用该`gswin32`工具时，转换工作完美，减去每次执行命令时打开和关闭 GUI 窗口的事实。因此，使用`gswin32`不是一种选择，因为人们一直在服务器上工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T08:36:04.973

在命令行中添加 -dBATCH 而不是 '-c quit'。除非您的 PDF 文件都是单页，否则您可能还想在输出文件名中添加“%d”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-17T16:27:27.667

这个问题与 Ghostscript 无关。您使用 ProcessBuilder 运行的每个程序都会遇到问题，它将输出发送到标准输出。由于 Windows 仅缓冲有限数量的文本，当您不读取 java 程序中的输出时，被调用的进程将挂起。因此，当您转换为 pdf 只会产生少量状态消息时，您可以成功运行 gswin32c。但是，当您转换具有许多页面的文件时，该过程将挂起。解决方案是在 Java 程序中读取被调用进程的输出。

```
 ProcessBuilder processBuilder = new ProcessBuilder(
    "C:\\Program Files (x86)\\gs\\gs9.10\\bin\\gswin32c.exe", "-sDEVICE=\"pdfwrite\"",
    "-dNOPAUSE", "-dBATCH", "-dSAFER", "-dQUIET", "-sOUTPUTFILE=\"" + fileName + ".pdf\"", "\""
    + fileName + ".ps\"");
processBuilder.redirectErrorStream(true); //Redirect Error Stream to Standard Inputstream so that we have to read only Standard in
Process process = processBuilder.start();
InputStream is = process.getInputStream();
BufferedReader rd = new BufferedReader(new InputStreamReader(is));
String line;
while ((line = rd.readLine()) != null) {
    System.out.println(line);
}
rd.close();
process.waitFor(); 
```

# php - 在 CakePHP 中使用 hmvc

> ID：14859491
> 
> 赞同：3
> 
> 时间：2013-02-13T17:34:42.443
> 
> 标签：php, cakephp, hmvc

所以我将在即将到来的项目中使用 CakePHP。我一直在研究如何将 hMVC 结构应用于 Cake 框架。这是一个大型项目，所以我相信 hMCV 会增加一些价值。关于将 hMVC 应用于蛋糕，似乎可以使用插件创建我自己的 hMVC 设置作为 MVC 的单独模块来实现 hMVC 设置。

这有道理吗？这就是应该在 CakePHP 中处理 hMVC 的方式吗？是否有另一种方法可以解决这个问题，但我在研究中忽略了这一点？

此外，如果需要，我能否让这些插件类扩展我的主要应用程序类。我是否可以创建类似 security_controller 的东西，然后我可能只有 5 个插件中的 3 个继承（即每个中的相应控制器将从 security_controller 继承）？我仍然对插件和主应用程序之间的交互感到困惑。请让我知道是否需要进一步澄清，并感谢您的帮助。

**编辑：**看起来好像 hMVC 在这里可能是不必要的，我可以分别在 AppModel.php 和 AppController.php 中定义我需要的全局功能。我仍然对社区对实现我在问题中谈到的功能类型的最佳方式的看法感兴趣。再次感谢。

# gwt - SmartGWT 展开 Tree 直到一个子节点

> ID：14859492
> 
> 赞同：0
> 
> 时间：2013-02-13T17:34:43.240
> 
> 标签：gwt, tree, smartgwt, treegrid

我使用以下代码创建了一棵树。有没有办法将树扩展到代码中的特定子节点？

```
TreeGrid treeGrid = new TreeGrid();
Tree tree = new Tree();
tree.setRoot(new TreeNode("root", new TreeNode("File",
    new TreeNode("FileChild")), new TreeNode("Edit", new TreeNode(
        "EditChild", new TreeNode("EditGrandChild"))), new TreeNode(
            "Window")));
treeGrid.setData(tree);
treeGrid.draw(); 
```

我想在渲染树时显示“EditGrandChild”节点。我怎么做？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T15:15:59.787

我曾经根据搜索结果打开树形网格的某些部分，我使用了这段代码

```
TreeNode[] tabNode = leTree.getParents(t);
    leTree.openFolders(tabNode); 
```

希望它可以帮助...

# php - 查询无结果

> ID：14859496
> 
> 赞同：-5
> 
> 时间：2013-02-13T17:34:47.887
> 
> 标签：php, mysql

我没有从这个查询中得到任何结果。难道我做错了什么？

```
 $query = mysql_query("SELECT user_url FROM tvb_users WHERE ID = '$currentAuthor->ID'") or die("<b>A fatal MySQL error occured</b>.\n<br />Query: " . $query . "<br />\nError: (" . mysql_errno() . ") " . mysql_error());
        $query2 = $query['user_url'];
        echo "$query2"; 
```

（对于wordpress）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T17:37:42.887

如果您使用的是 wordpress，我建议您使用他们的 WPDB 对象来让您的生活更轻松：[http ://codex.wordpress.org/Class_Reference/wpdb](http://codex.wordpress.org/Class_Reference/wpdb)

# python - 不匹配不是 Python 中的 NoneType 条件

> ID：14859498
> 
> 赞同：2
> 
> 时间：2013-02-13T17:35:03.987
> 
> 标签：python

我对这些代码有问题。

```
if tdinst[0].string in features:
       nameval=tdinst[0].string
       value=tdinst[1].string
       print type(value)
       if type(value) is not None:
               print"it should not come here"
              value=value.replace("\n","")
              value=value.replace("\t","") 
```

我得到**'NoneType'对象没有属性'replace'。**为什么它会进入第二个if条件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-13T17:36:42.973

`NoneType`和之间有区别`None`。

你需要检查

```
if type(value) != NoneType: 
```

或者

```
if value is not None: 
```

但也许以下内容更简单：

```
if tdinst[0].string in features:
    nameval = tdinst[0].string
    value = tdinst[1].string
    if value: # this is also False if value == "" (no need to replace anything)
        value = value.replace("\n","").replace("\t","") 
```

或者，如果`tdinst[1].string` *不是*在`None`大多数情况下，那么异常处理会更快：

```
try:
    value = tdinst[1].string.replace("\n","").replace("\t","")
except TypeError:
    value = None 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-13T17:36:53.843

没有这样的类型`None`。您可能的意思是`NoneType`：

```
if type(value) is not NoneType: 
```

但是你为什么要测试`type`呢？只需检查`value`：

```
if value is not None: 
```

# mysql - 畅销产品的 SQL 查询

> ID：14859499
> 
> 赞同：-1
> 
> 时间：2013-02-13T17:35:05.767
> 
> 标签：mysql, sql

我正在尝试获取过去 7 天的畅销产品（总销售额）的所有产品（限制 5）。

我当前的数据库模式基本上是这样的：

```
- products
 - id
 - name
 - price

- orders
 - id
 - purchased_at

- orders_products
 - id
 - products_id
 - orders_id
 - quantity
 - paid_price 
```

我正在寻找 mysql 语法。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T17:41:07.773

这是一个相对简单的 s 序列，其中包含乘以`INNER JOIN`的聚合：`SUM()``quantity``paid_price`

```
SELECT
  p.name,
  /* aggregate SUM() of orders_products qty * price */
  SUM(op.quantity * op.paid_price) AS total_sale_price
FROM
  products
  /* Join through orders_products (which gives the quantity) */
  INNER JOIN orders_products op ON p.id = op.products_id
  /* ...to orders (which provides the date) */
  INNER JOIN orders o ON op.orders_id = o.id
/* The last week... */
WHERE o.purchased_at >= (CURDATE() - INTERVAL 7 DAY)
GROUP BY p.name
/* In descending order of quantity, only the top 5 */
ORDER BY total_paid_price DESC LIMIT 5 
```

我建议花一些时间查看[聚合函数](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html)。

# haskell - 在 Haskell 中用算术类型函数组合函数

> ID：14859501
> 
> 赞同：3
> 
> 时间：2013-02-13T17:35:14.007
> 
> 标签：haskell, function-composition

我现在正在学习 Haskell，并且正在尝试使用函数组合。

我写了两个函数。

`let func1 x y = x + y`

`let func2 t = t*2`

但是，当我尝试组合这两个函数时， `func2 . func1 1 2`我希望得到 6 个。

相反，我收到此错误：

```
 No instance for (Num (a -> b))
      arising from a use of `func1' at <interactive>:1:8-16
    Possible fix: add an instance declaration for (Num (a -> b))
    In the second argument of `(.)', namely `func1 1 2'
    In the expression: func2 . func1 1 2
    In the definition of `it': it = func2 . func1 1 2 
```

有人可以解释为什么这不起作用吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T17:42:49.757

函数应用程序优先于任何运算符，因此您的组合被解析为`func2 . (func1 1 2)`. 也就是说，您的代码尝试组合`func1 1 2`作为函数结果的数字。请注意，这`(func2 . func1) 1 2`也不起作用，因为`(.)`仅适用于一元函数。

你*可以*使用`(func2 . func1 1) 2`，或者`(.)`以我个人不太习惯的方式多次使用，说实话。但在这种特定情况下，完全不使用组合可能会更好：`func2 $ func1 1 2`用更少的混乱做同样的事情。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T17:50:33.843

由于一个幸运的错误（分配律），你可以这样做`Data.Function.on`

```
import Data.Function

func1 x y = x + y
func2 t = t*2

func3 = func1 `on` func2

-- or just func3 = (+) `on` (2*) 
```

但总的来说，你应该只使用`$`这种东西，因为这就是你正在做的，功能应用程序。这不是真正的作曲工作，所以如果你使用作曲，你会试图将一个方形钉塞进一个圆孔。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T17:43:04.187

您要做的不是功能组合：您正在尝试应用于`func1 1 2`，`func2`这就是`$`运算符的用途。

```
func2 $ func1 1 2 
```

# php - 在 php 会话中存储安全用户数据的最佳方法是什么？

> ID：14859515
> 
> 赞同：3
> 
> 时间：2013-02-13T17:35:45.353
> 
> 标签：php

我正在编写`PHP`用于安全加密通信的私人消息系统。

每次用户注册一个帐户时，我都会创建一个新的 RSA 私钥`phpseclib`，并使用用户的密码对其进行加密，`AES`该密码将安全地存储在数据库中并经过哈希处理和加盐处理。

每次用户使用他的密码登录时，他还应该解锁他的私钥并即时维护它。

该脚本显然只在 SSL 连接下运行。

问题是我需要在用户会话中维护私钥的非加密版本，以确保他能够阅读每条消息并编写新消息，而无需在每次页面刷新时插入密码。

存储在 PHP Session 中并不是一个安全的解决方案，因为 PHP Sessions 仍然存储在服务器上并且可能被破坏。

将其存储在 Cookie 中并不是一个好的解决方案，因为 Cookie 很容易被窃取（但这样我将用户的命运掌握在自己手中）。

是否可以使用 ajax 来维护 PHP 变量（不是 Session）中的密钥并且从不刷新页面但使用 ajax 获取和写入消息？还是有更好的解决方案？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T17:50:30.567

假设您拥有完全控制权并且可以限制对数据库的访问/可见性，您可以将会话数据的存储从文件存储切换到使用数据库作为会话存储。这当然假设您的数据库足够安全以满足您的需求。您可以在此处查看有关如何设置 php 以将会话存储到数据库的详细概述：http: [//www.stanford.edu/dept/its/communications/webservices/wiki/index.php/How_to_use_MySQL-based_sessions](http://www.stanford.edu/dept/its/communications/webservices/wiki/index.php/How_to_use_MySQL-based_sessions)

假设您不需要在数据库重新启动时保留会话数据，您还可以使会话存储表的存储引擎`MEMORY`代替 Innodb 或 MyISAM。这将使它非常活泼，并避免您担心会话数据在磁盘上的 db 文件中处于未加密状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-28T05:20:19.220

如果您将私钥存储在服务器上的任何位置，那么它与您信任任何对该服务器具有 root 访问权限的人一样安全。对于安全的消息传递系统，并非所有用户都希望信任可以访问 root 的人。（是吗？）这表明您希望将私钥存储在用户的机器上。正如您所建议的，这样做是一组完全不同的安全问题。

我假设您的用户正在使用网络浏览器访问您的系统，因为您提到了 cookie。大多数 Web 浏览器还支持本地存储（非 cookie）的想法，这*可能*是一个值得研究的选项；我不是这方面的专家，所以不会进一步评论。

安全是困难和复杂的。警惕任何简单的答案，并注意没有完美的安全措施。祝你好运。

# java - Glassfish 3.1 在哪里缓存 JSP 文件？

> ID：14859517
> 
> 赞同：1
> 
> 时间：2013-02-13T17:35:52.777
> 
> 标签：java, caching, glassfish-3

我尝试全局启用 jsp 缓存，如您可以在此处找到的 Oracle Glassfish 3.1 文档中所示：http: [//docs.oracle.com/cd/E18930_01/html/821-2418/beagu.html#beagw](http://docs.oracle.com/cd/E18930_01/html/821-2418/beagu.html#beagw)

我用通常的方式启动了我的域 domain1：

```
asadmin start-domain domain1 
```

然后使用这个

```
asadmin set server-config.web-container.property.jspCachingEnabled="true" 
```

设置jsp缓存。GF3.1 Server在其主目录下创建了一系列文件夹，分别是：

```
{glassfish_home}/domains/domain1/generated/jsp/my_project/xyz_loader 
```

但我似乎无法在这个“加载器”目录列表中找到我编译的 JSP，有人知道我应该去哪里看吗？

# c# - 模型不会在 foreach 内更新

> ID：14859521
> 
> 赞同：-1
> 
> 时间：2013-02-13T17:36:05.593
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4

我不确定发生了什么。

`docsRelacionadosModel`是具有这种结构的模型：

`docsRelacionadosModel.idDocTipo`那是一个*整数*

并具有这些元素：`[0]:76 , [1]:76, [2]:74`

在这段代码中：

```
int i = 0;
foreach (var m in docsRelacionadosModel)
{
    resultadoDialogModel dialogTemp = new resultadoDialogModel();
    if (i == 0) //FIRST TIME
    {
        idTipoSendoVerificado = m.idDocTipo; //HERE GETS '46'

    }
    else
    {
        // Here, first time is equal ([0]46 == [1]46)
        if (m.idDocTipo == idTipoSendoVerificado)
        {   
            //if there where no more element, but do not get here
            if (i == (docsRelacionadosModel.Count() - 1))
            {
                dialogTemp.tipo = m.idDocTipo;
                dialog.Add(dialogTemp);
            } 
        } 
        else //For the third and also the last time [1]46 != [2]44
        {
            dialogTemp.tipo = idTipoSendoVerificado; //Should be 46
            dialog.Add(dialogTemp); //Save tempModel in model
            idTipoSendoVerificado = m.idDocTipo; //Update id been verified

            if (i == (docsRelacionadosModel.Count() - 1)) // And it is the last index
            {
               dialogTemp.tipo = idTipoSendoVerificado; //Here should be 44
               dialog.Add(dialogTemp); //Save tempModel in model
            }
        }  
        i++;
    }
} 
```

现在当我打印`dialog.tipo`我应该得到的值`[0]:46 / [1]:44` 但我得到`[0]:44 / [1]:44`

我不确定这是否是因为该值作为参考传递，所以当我更改`idTipoSendoVerificado`第三次迭代时，它会更改模型中已保存的值。

如果它令人困惑，请告诉我，我会尝试修复以获得更好的理解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T17:56:21.223

您的 i++ 在外部“else”内，您可能希望它低 1 行，仅在 foreach 内。

您现在将所有项目视为“第一次”。相关线路：

```
int i = 0;
foreach (var m in docsRelacionadosModel)
{     
    if (i == 0) //FIRST TIME
    {
       ...
    }
    else
    {
        ...
        i++;
    }
} 
```

`i`永远都是`0`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T17:57:08.290

我认为问题是`dialogTemp`这是一个对象的引用，当你制作时`dialog.Add(dialogTemp);`（我猜是因为我不知道类型或对话框）你只是引用了这个对象并且你没有制作一个新的对象，你改变了 id`dialogTemp.tipo = idTipoSendoVerificado;`并再次添加对象，`dialog.Add(dialogTemp);`现在您在 [0] 和 [1] 中引用了相同的对象，是同一个对象，因为不是值传递是引用传递，所以，如果您更改对象，则更改对象他所有的参考资料。

你可以创建一个对象的新实例来解决这个问题，你需要创建一个新的 dialogTemp()...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T18:00:24.700

只需添加`var dialogTemp2 = new resultadoDialogModel();`，设置`dialogTemp2.tipo = idTipoSendoVerificado;`然后添加新元素`dialog`：

```
if (i == (docsRelacionadosModel.Count() - 1)) // And it is the last index
{
    var dialogTemp2 = new resultadoDialogModel();
    dialogTemp2.tipo = idTipoSendoVerificado; //Here should be 44
    dialog.Add(dialogTemp2); //Save tempModel in model
} 
```

# actionbarsherlock - 将 ActionBarSherlock 添加到我的项目时，容器“Android Dependencies”引用了不存在的库

> ID：14859524
> 
> 赞同：1
> 
> 时间：2013-02-13T17:36:25.990
> 
> 标签：actionbarsherlock

我正在尝试将 ActionBarSherlock 添加到现有的 Android 项目中。我按照以下视频中的步骤进行操作：

[http://actionbarsherlock.com/faq.html](http://actionbarsherlock.com/faq.html)

我从 Eclipse 中的 ZIP 添加了*库*文件夹，并更新了编译器版本和 Android 支持库。但是当我之后将 ActionBarSherlock 添加到我的项目时，我收到以下错误：

*容器“Android Dependencies”引用了不存在的库“C:\Users\Me\Dropbox\Workspaces\Android\Sherlock\library\bin\sherlockactionbar.jar”*

我不明白他为什么要去找这个明显不存在的罐子……

PS：我的 ActionBarSherlock 项目名称在这里是 SherlockActionBar。

提前致谢。

# sql - SQL Server 导入和导出向导在使用临时表的存储过程中给出无效对象错误

> ID：14859532
> 
> 赞同：4
> 
> 时间：2013-02-13T17:36:43.377
> 
> 标签：sql, sql-server

我创建了一个存储过程，它创建一个临时表，插入，选择然后删除。在 SQL Server Management Studio 中执行存储的过程可以正常工作并给出预期的结果。

```
CREATE PROCEDURE usp_TempTableTest
    -- Add the parameters for the stored procedure here
    @color VARCHAR(10)
AS
BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.
    SET NOCOUNT ON;

    CREATE TABLE #tmptable (
        color VARCHAR(10)
    )

    INSERT INTO #tmptable (color) VALUES (@color)

    SELECT color FROM #tmptable

    DROP TABLE #tmptable

END
GO 
```

但是，在导入/导出工具中创建并使用该存储过程作为数据源时，它给了我错误：

> *无效的对象名称“#tmptable”。*

知道为什么会发生这种情况吗？如果我将它更改为表变量，它似乎可以很好地与导入/导出一起使用，但我不明白为什么它不能与临时表一起使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T20:46:38.430

当我在 SSMS 中运行一个模仿的存储过程时，就像你上面提到的那样，我可以像你在过程中提到的那样得到返回的数据。但是，如果我`#tmptable`像您一样尝试 ，我也会收到相同的错误，因为`DROP TABLE`删除了它。据我所知，导入/导出基本上是一个最终`INSERT`过程。它与表变量一起工作的原因是因为数据仍然存在于最终插入中；在 的情况下`DROP TABLE`，它没有。例如，当我删除 时`DROP TABLE`，它可以工作。

我在这里可能是错的，但在上述过程的情况下，导入或导出的逻辑似乎是

`INSERT`数据

`SELECT`数据

`DROP`数据

`INSERT`（导入/导出）：这会生成“无效的对象名称 tmptable”

使用变量（或 no `DROP`），它是

`INSERT`数据

`SELECT`数据

`INSERT`（进出口）

在第二种情况下，数据仍然存在。在第一种情况下，他们走了。如果您想使用#tmptable，一种解决方法是使用以下代码开始您的代码：

```
IF OBJECT_ID('tempdb..#tmptable') IS NOT NULL DROP TABLE #tmptable 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-22T18:18:42.383

将“设置 FMTONLY 关闭；” 就在“SET NOCOUNT ON”的正上方

[http://msdn.microsoft.com/en-us/library/ms173839.aspx](http://msdn.microsoft.com/en-us/library/ms173839.aspx)

# matlab - Matlab：有条件地选择向量的元素

> ID：14859533
> 
> 赞同：1
> 
> 时间：2013-02-13T17:36:43.470
> 
> 标签：matlab, octave

我想获取目录中所有文件的列表

```
 d=dir(pwd); # get a struct of all elements (including folders) 
```

现在我想选择 d.name 的所有元素，其中 d.isfolder=0

```
 jj=1;
 for ii=1:numel(d)
   if d(ii).isdir==0
     filelist{jj} = d(ii).name;
     jj+1;
   end
 end 
```

这可能没有循环吗？我认为应该通过一种方式来矢量化这个操作

我正在使用 matlab/octave

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T17:42:38.647

无需使用循环，您可以通过索引来做到这一点

```
isDirIdx = [d.isdir];
names = {d.name};
fileNames = names(~isDirIdx); 
```

# php - php重定向到一台服务器到另一台服务器php页面

> ID：14859534
> 
> 赞同：-1
> 
> 时间：2013-02-13T17:36:42.720
> 
> 标签：php, javascript

我有两个服务器 A 和 B 并且两个服务器都是相同的脚本，但是当我登录到服务器 A 登录页面时我想要重定向页面然后该页面自动重定向到服务器 B 登录页面是否可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T20:46:35.193

You really need to provide a bit more information. But, let me see if I can run through some scenarios.

First, let's assume that you login on either server, and you want it to goto an authenticated realm after login. This means you have to find a way to share the session between the two servers. You might consider creating the session store in a database that both servers can access. You'll still have to pass the session token from server A to server B after login.

Otherwise, if you're saying both servers are on the same domain, but each is a subdomain, you can choose to have your session cookie have a domain of the base domain - and all subdomains can access that session then. Still, the session data would either need to be stored in a database both servers had access to - ooorrr - mount a directory that both servers had access to.

Finally, if you want the user to login on either server A or B - but don't care about the authentication after you reach server B, then the solutions the other people provided will help.

My guess is you're trying to do some sort of single sign-on, so check into sharing your session among the servers. Please provide more information if you'd like a more pin-point answer.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T17:40:31.140

使用 php 中可用的标头函数

```
$server_url='http://url-for-server-B';
header('Location: '.$server_url); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T18:19:51.957

```
$yourlogincode ="SELECT WHATEVER FROM WHATEVER"; // do not forget to add your database type in here for example `mysql_query` 

if ($yourlogincode) 
{
//add your session code here
yourloginpagefromsiteB = "";
header('Location: '.$yourloginpagefromsiteB);
exit();
}
else
{
exit();
} 
```

# iphone - iPhone5 中的自动布局问题

> ID：14859538
> 
> 赞同：0
> 
> 时间：2013-02-13T17:36:49.747
> 
> 标签：iphone, xcode4.5, autolayout

我有一个 Xcode 4.5.2 项目我有一个带有四个 UIView 的故事板。自动布局在 StoryBoard 部署中设置为 ON 是 iOS 6

**我希望在 iPhone 5 上运行时信箱出现在顶部和底部，并且在 iPhone5 上运行时不调整视图大小**

当我在 iPhone5 中运行我的应用程序时 - 我没有看到 letterBox - UIViews 会自动拉伸（不正确）

当我在 iPhone 4 上运行应用程序时 - 一切都符合预期。

为什么信箱没有按我的预期显示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T17:57:29.280

如果出于某种原因您希望您的应用程序在 iPhone 5 上的行为方式与旧应用程序一样——由操作系统自动将信箱化为 3.5 英寸的屏幕尺寸，请不要在您的应用程序中包含 Default-568h@2x.png。但是，Apple 希望提交到 App Store 的新应用程序支持 4 英寸屏幕，因此如果您希望以这种方式分发您的应用程序，那么您可能不会在此策略上走得太远。

如果您想“支持”iPhone 5（和 iPod touch 第 5 代）屏幕，但将大部分 UI 保留在旧屏幕尺寸……好吧，您的用户可能不喜欢它（App Store 评论者也可能不喜欢），但可以使用自动布局。问题是窗口（或者更确切地说，视图控制器）视图层次结构中的根视图总是会自动调整大小以适应屏幕 - 但没有人说它必须是实际 UI 内容的主要容器。

1.  在 IB 中，使用 3.5 英寸屏幕模式的编辑器，将新的 UIView 拖放到视图控制器的根视图中。它应该自动调整大小以填充屏幕（460 点高）。

2.  添加一个**Pin > Height**约束，这样无论其父视图如何调整大小，视图都保持 460 点高。

3.  **在 Container**约束中添加一个Align > Vertical Center，以便在其父视图的高度发生变化时视图保持居中。

4.  将你所有的 UI 放在这个视图中。

现在，在 iPhone 5 上，您的 UI 上方和下方会出现白条（如果您愿意，可以更改根视图的颜色）。

请注意，这仅在您的 UI 不旋转到横向时才有效。我不认为你可以只使用一组约束对两个方向进行这种人工信箱，所以如果你想支持旋转，你需要通过以编程方式切换约束来[响应方向变化](http://developer.apple.com/library/ios/featuredarticles/ViewControllerPGforiPhoneOS/RespondingtoDeviceOrientationChanges/RespondingtoDeviceOrientationChanges.html#//apple_ref/doc/uid/TP40007457-CH7-SW9)——引脚高度和纵向居中，大头针宽度居中，横向居中。

# javascript - 我在 javascript 中遇到 CDATA 问题

> ID：14859543
> 
> 赞同：-1
> 
> 时间：2013-02-13T17:36:57.103
> 
> 标签：javascript, html, css

好吧，我是 javascript 新手，我已经完成了 C++ C# VB。但是这本 javascript 书很难理解，它只是练习，没有完整的代码可以看。无论如何，我正在做一个简单的项目，但我不明白我哪里出错了。CDATA 是我认为我出错的地方。这是我的第二个项目，第一个项目很简单，直到我卡住了 CDATA 和 Var。我知道这段代码已经过时了，但我正在按照这本书学习基本的 JS 并逐步提高。继承人的代码：

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Largest Islands</title>
<meta http-equiv="content-type" content="text/html; charset=iso-
8859-1" />
</head>
<body>
<h1>Largest Islands</h1>
<script type="text/javascript">
/* <![CDATA[ */
var island1Name = "Greenland";
var island2Name = "New Guinea";
var island3Name = "Borneo";
var island4Name = "Madagascar";
var island5Name = "Baffin";
var island1Size = 2175600;
var island2Size = 790000;
var island3Size = 737000;
var island4Size = 587000;
var island5Size = 507000;
document.write("<p>The largest island
in the world is " + island1Name
+ " with " + island1Size + " miles.</p>");
document.write("<p>The second largest island
in the world is " + island2Name
+ " with " + island2Size + " miles.</p>");
document.write("<p>The third largest island
in the world is " + island3Name
+ " with " + island3Size + " miles.</p>");
document.write("<p>The fourth largest island
in the world is " + island4Name
+ " with " + island4Size + " miles.</p>");
document.write("<p>The fifth largest island
in the world is " + island5Name
+ " with " + island5Size + " miles.</p>");
/* ]]> */
</script>
</body>
</html> 
```

这是一个非常简单的项目，我只需要一些帮助来弄清楚我哪里出错了。先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T17:40:31.080

在本地运行它，JavaScript 错误控制台非常清楚问题出在哪里。它甚至为您提供行号。

```
document.write("<p>The largest island
in the world is " + island1Name... 
```

JavaScript 字符串中间不能有换行符。

```
document.write("<p>The largest island in the world is " + island1Name... 
```

作品。您需要修复所有这些问题，并开始使用每个主流浏览器中可用的开发工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T17:40:37.660

我认为问题出在断线

代替

```
document.write("<p>The largest island
in the world is " + island1Name 
```

尝试

```
document.write("<p>The largest island" 
+ "in the world is " + island1Name 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T17:40:40.767

您的问题是 JavaScript 中不允许这样的多行字符串：

```
document.write("<p>The second largest island
in the world is " + island2Name 
```

如果你在错误的地方去掉那些新行，代码就可以工作。该行现在看起来像这样：

```
document.write("<p>The second largest island in the world is " + island2Name 
```

示例：http: [//jsbin.com/igowel/1/edit](http://jsbin.com/igowel/1/edit)

要继续使用 JavaScript，请习惯使用控制台和开发人员工具。对于 Chrome，请查看此问答：[如何在 Google Chrome 中使用 JavaScript 控制台？](https://stackoverflow.com/questions/45965/how-do-i-use-the-javascript-console-in-google-chrome)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T17:43:41.857

我认为您的问题是此处的换行符。你的代码：

```
document.write("<p>The largest island
in the world is " + island1Name
+ " with " + island1Size + " miles.</p>"); 
```

应该 ：

```
document.write("<p>The largest island in the world is " + island1Name
+ " with " + island1Size + " miles.</p>"); 
```

如果你在一行中开始一个字符串并且你没有在同一行结束它会导致换行抛出错误。此外，我建议您使用 firefox 和 firebug 进行开发，您可以在其中调试脚本。

# objective-c - 初学者的AES加密/解密

> ID：14859550
> 
> 赞同：4
> 
> 时间：2013-02-13T17:37:18.587
> 
> 标签：objective-c, encryption, aes, rncryptor

我正在尝试在 Objective-C 中将 NSString 加密为 NSString 和 NSData ，所以我开始搜索。

我从[这里](http://robnapier.net/blog/aes-commoncrypto-564)开始，但不幸的是，这超出了我的想象。

然后我发现自己[在这篇文章中](https://stackoverflow.com/questions/1400246/aes-encryption-for-an-nsstring-on-the-iphone)并且觉得它很容易理解，所以我继续尝试找出[实现](http://pastie.org/426530)。在查看了实现之后，我看到了帖子中的第二个答案，看到他有更多适应性强的实现，这让我明白了[他的要点](https://gist.github.com/gonecoding/838614)。根据 gist 自述文件，他`"took down this Gist due to concerns about the security of the encryption/decryption"`. 这使我相信从上面实现的安全性也存在安全缺陷。

然而，从那个要点来看，他提到[了另一种](https://github.com/rnapier/RNCryptor/tree/master/RNCryptor)我可以用于加密的替代方案。查看代码后，我注意到它生成 NSData 与`"a header, encryption salt, HMAC salt, IV, ciphertext, and HMAC"`. 我知道如何处理该问题以再次使用同一个库进行解码，但是鉴于我不太清楚要发送给他的内容，我该如何将其传递给服务器人员？

在这一切的根源，我在我的头上。鉴于我上面所说的并且知道我没有时间为此进行大量学习，除非绝对必要，否则我应该如何最好地处理这个编码/解码过程，给定一个私钥将它运送到不是我设计的服务器的最终目标？（这对于一个句子来说是怎样的！）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T18:15:01.167

也许你应该问服务员？当您在太多方之间进行加密时，您必须就该数据的格式达成某种协议，原始原语不能单独处理，更不用说仅处理原语和仅发送 aes 密文的愿望会导致错误。

[您提到的RNCryptor](https://github.com/rnapier/RNCryptor)是一个高级加密库，它定义了其他人也必须遵守的[简单格式](https://github.com/rnapier/RNCryptor/wiki/Data-Format)，它很简单，因此有助于跨平台，但它具有您需要正确执行 AES 的额外内容。还有其他类似的库（[NaCL](http://nacl.cr.yp.to/)、[GPGME](http://www.gnupg.org/related_software/gpgme/)和[Keyczar](http://code.google.com/p/keyczar/)），它们的格式并不简单，但使用起来很简单，因此您需要能够在两端使用该库，但我会高度如果可以的话，建议您使用类似的东西，而不是自己动手。

Keyczar 专门用于 java、python、c++、c# 和 go，因此，如果您可以在 iOS（或 Mac，您的目标是客户端）上使用 c++ 版本，您可能会在服务器上很好，因为有多种选择.

# c++ - Qt ActiveX dynamicCall：错误的参数计数

> ID：14859552
> 
> 赞同：0
> 
> 时间：2013-02-13T17:37:26.817
> 
> 标签：c++, qt, activex

我正在尝试在我的程序中使用 ActiveX 控件。

```
QAxWidget* mAX = new QAxWidget();
mAX->setControl("{XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX}"); 
```

我知道有一个功能：

```
put_ChannelType(long newValue) 
```

但是当我尝试执行它时：

```
mAX->dynamicCall("put_ChannelType(long)",2);
mAX->dynamicCall("put_ChannelType(int)",2);
mAX->dynamicCall("put_ChannelType(long)",QVariant(2));
mAX->dynamicCall("put_ChannelType(int)",QVariant(2)); 
```

我得到：

```
QAxBase: Error calling IDispatch member put_ChannelType: Bad parameter count 
```

知道出了什么问题吗？

编辑：

奇怪的是如果我打电话

```
mAX->dynamicCall("put_ChannelType()"); 
```

我没有收到任何错误消息...

编辑2：

这也失败了（正如康斯坦丁建议的那样）

```
QList<QVariant> varlist;
varlist << (int)1;
mAX->dynamicCall("put_ChannelType(int)",varlist); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T19:30:42.570

使用该`generateDocumentation()`功能解决了这个问题。

我在另一个应用程序中使用了这个 ActiveX 控件，但它是一个 MFC 应用程序。

似乎我所指的函数名称（在由 VS 创建的机器生成的 IDispatch 包装器类中）与 Qt 列出的函数名称不同。

即 put_ChannelType 实际上是 SetChannelType...

也许这只是一个版本问题？

无论如何，重要的部分是知道它`generateDocumentation()`可以列出你可以调用的所有函数`dynamicCall`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T01:51:37.037

可以吗？mAX->dynamicCall("put_ChannelType(const QVariant &)", (long)2);

# .net - 内联函数 (.NET x64)

> ID：14859555
> 
> 赞同：1
> 
> 时间：2013-02-13T17:37:38.557
> 
> 标签：.net, 64-bit, inline

我正在将 x86 应用程序移动到 x64 并发现编译器没有内联函数。甚至很小（<32 字节 IL 甚至是空的）。即使使用编译器选项`MethodImplOptions.AggressiveInlining`。

而在 x86 中，所有小函数（以及带有编译器选项的简单大函数）都被内联而没有问题。

x64 中有什么方法可以告诉编译器内联它们吗？

例如，以下带有“目标平台”= x86 的代码只是循环，而对于 x64 - 也调用 EmptyFunction() 1 亿次：

```
void LoopFunction()
{
    Stopwatch watch = new Stopwatch();
    watch.Start();
    for (int i = 0; i < 100000000; i++)
    { EmptyFunction(); }
    watch.Stop();
    MessageBox.Show(watch.Elapsed.ToString());
}
[MethodImpl(MethodImplOptions.AggressiveInlining)]
void EmptyFunction() { } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T18:40:31.307

.NET 3.5 jitter 编译为 64 位模式的 for() 循环

```
0000002e  xor         r11d,r11d 
00000031  add         r11d,4 
            for (int i = 0; i < 100000000; i++) { EmptyFunction(); }
00000035  cmp         r11d,5F5E100h 
0000003c  jl          0000000000000031 
```

通过 .NET 4.5 抖动：

```
0000003a  xor         eax,eax 
0000003c  nop         dword ptr [rax] 
00000040  add         eax,4 
            for (int i = 0; i < 100000000; i++) { EmptyFunction(); }
00000043  cmp         eax,5F5E100h 
00000048  jl          0000000000000040 
```

没有电话，只是循环幸存下来，因为它应该。奇怪的 NOP 指令用于对齐分支目标。

请务必使用发布版本并小心使用调试器，因为它会禁用优化器。使用工具 + 选项、调试、常规修复该问题，取消选中“在模块加载时抑制 JIT 优化”选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-07T10:17:43.237

在我的电脑中（.Net 4.5 x64）

如果我使用`AggressiveInlining`，x86（目标所有 cpu 首选 32 位）需要 36 毫秒，x64（目标所有 cpu 取消选中首选 32 位）需要 8 毫秒。

如果我使用`NoInlining`，x86 需要 240 毫秒，x64 需要 270 毫秒。

所以，它肯定是内联的

# ajax - jquery的加载方法无法加载连接的url

> ID：14859559
> 
> 赞同：0
> 
> 时间：2013-02-13T17:37:42.773
> 
> 标签：ajax, jquery, jquery-load

好吧，这是我想要的完美运行的代码

```
 $("#previous").click(function() {
    var month=$("#previous").attr("name");
    var loadurl="include/calendar.php?month=january";
    $("#calendar").load(loadurl);
    return false;
}); 
```

上面的代码只是从 calendar.php 中加载我想要的内容，但是当我将代码修改为我真正需要的内容时，日历 div 只是隐藏不显示任何内容

```
 $("#previous").click(function() {
    var month=$("#previous").attr("name");
    var loadurl="include/calendar.php?month="+month;
    $("#calendar").load(loadurl);
    return false;
}); 
```

这是html，$prev_month 和$next_month 是经过一些计算后获得的，分别是当月（2 月）的 1 月和 3 月

```
 <a href="javascript: void(0)"  class="previous" id="previous" name="<?php echo $prev_month ?> "> </a>
<span class="month">  <?php echo "{$month} {$year}"; ?>  </span>
<a href="javascript: void(0)"  class="next" name="<?php echo $next_month ?>" id="next"> </a> 
```

我似乎找不到问题所在。你能在这里找出错误吗，还请告诉我在哪里可以看到 jquery 错误，以便我可以调试任何未来的问题

# java - BufferedReader 永远不会关闭。有什么后果？

> ID：14859566
> 
> 赞同：2
> 
> 时间：2013-02-13T17:38:05.393
> 
> 标签：java, bufferedreader, try-catch-finally

我试图了解如果 BufferedReader 从未关闭会有什么后果？我刚刚意识到许多静态代码都有一个 BufferedReader 并且它们永远不会用 try...catch..finally 关闭（br.close）

大部分代码如下所示：

```
public static boolean isProcessX24Success(String data) throws Exception
{   
    BufferedReader br = new BufferedReader(new StringReader(data));
    String line = "";
    String result = "";
    while ((line = br.readLine()) != null) 
    {
        if (line.contains("SUCCESS X24"))
            return true;   
    }   

    return false;
} 
```

如您所见，finally 中没有 br.close。这会带来问题吗？如果是这样，那是什么？对该方法的调用（以及其他来自此类性质的方法）是按顺序完成的——而不是由多个线程完成的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T17:49:23.943

没问题，因为您在`StringReader`. 当离开的范围时，`BufferedReder`它将有资格进行垃圾收集。如果您没有关闭例如 a ，这将是一个问题，`FileReader`因为系统资源不会正确关闭，并且在程序结束之前文件上可能存在读锁。

写入时可能会出现问题，因为由于缓冲，数据可能永远不会写入文件。

# php - PHP 注册脚本

> ID：14859568
> 
> 赞同：1
> 
> 时间：2013-02-13T17:38:06.863
> 
> 标签：php, refactoring, registration

所以我正在尝试为我的网站编写这个脚本。它看起来非常混乱和破碎。也许有人可以帮我整理一下并解释可能不正确的地方。另外，有没有办法让它更短，对我来说看起来有点不安全。谢谢你。

```
<?php

class Register
{
    private $username;
    private $password;
    private $password2;
    private $passmd5;
    private $email;
    private $email2;

    private $errors;
    private $rtoken;

    public function __construct()
    {
        $this->errors = array();

        $this->username  = $this->filter($_POST['ruser']);
        $this->password  = $this->filter($_POST['rpass']);
        $this->password2 = $this->filter($_POST['rpass2']);
        $this->email     = $this->filter($_POST['remail']);
        $this->email2    = $this->filter($_POST['remail2']);
        $this->rtoken    = $_POST['rtoken'];

        $this->passmd5 = md5($this->password);
    }

    public function process()
    {
        if ($this->valid_rtoken() && $this->valid_data())
            $this->register();

        return count($this->errors) ? 0 : 1;
    }

    public function filter($var)
    {
        return preg_replace('/[^a-zA-Z0-9@.]/', '', $var);
    }
    public function register()
    {
        mysql_query("INSERT INTO users(username,password,email) VALUES ('{$this->username}','{$this->passmd5}','{$this->email}')");

        if (mysql_affected_rows() < 1)
            $this->errors[] = '<font color="red">Database error</font>';
    }

    public function user_exists()
    {
        $data = mysql_query("SELECT ID FROM users WHERE username = '{$this->username}'");

        return mysql_num_rows($data) ? 1 : 0;
    }

    public function email_exists()
    {
        $data = mysql_query("SELECT ID FROM users WHERE email = '{$this->email}'");

        return mysql_num_rows($data) ? 1 : 0;
    }

    public function show_errors()
    {
        echo "";

        foreach ($this->errors as $key => $value)
            echo $value . "<br>";
    }

    public function valid_data()
    {
        if ($this->user_exists())
            $this->errors[] = '<font color="red">Username Exists</font>';
        if ($this->email_exists())
            $this->errors[] = '<font color="red">email exists</font>';
        if (empty($this->username))
            $this->errors[] = '<font color="red">check your username</font>';
        if (empty($this->password))
            $this->errors[] = '<font color="red">check your password</font>';
        if ($this->password != $this->password2)
            $this->errors[] = '<font color="red">Passwords do not match</font>';
        if (empty($this->email) || !eregi('^[a-zA-Z0-9._-]+@[a-zA-Z0-9._-]+\.[a-zA-Z]{2,4}$', $this->email))
            $this->errors[] = '<font color="red">Check your email</font>';
        if ($this->email != $this->email2)
            $this->errors[] = '<font color="red">Emails do not match</font>';

        return count($this->errors) ? 0 : 1;
    }

    public function valid_rtoken()
    {
        if (!isset($_SESSION['rtoken']) || $this->rtoken != $_SESSION['rtoken'])
            $this->errors[] = '<font color="red">Check</font>';

        return count($this->errors) ? 0 : 1;
    }
}

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T18:19:30.537

Swoosh，总有更好的方法来编写代码。我希望挑战你重新思考为什么你的代码很长，为什么它可能不安全，而不是为你重写你的代码。希望你能通过这种方式学到更多。

首先，使用 MD5 散列密码是完全不安全的。请忘记 MD5 曾经存在过，并且请不要使用 SHA1 来确保任何安全。相反，您应该使用 bcrypt 或 PBKDF2（使用 SHA2 或 Whirlpool 以及 ~2000+ 轮）。我建议您参考我对[Secure Hash and Salt for PHP Passwords](https://stackoverflow.com/questions/401656/secure-hash-and-salt-for-php-passwords/401684#401684)的回答，以获取帮助实现更好的安全性的文章和库的提示和链接。

其次，从 PHP 5.5开始[不推荐使用](http://www.php.net/manual/en/migration55.deprecated.php)mysql_* 函数。使用 MySQLi 可以解决问题，但您应该使用一致的接口（例如[PDO](http://www.php.net/pdo)）来处理连接和查询转义/过滤。虽然您可能不会在 PHP 5.5 中构建您的软件，但您将无法始终控制主机是否决定升级您的 PHP 版本。尽可能优化未来的兼容性。[另外，PDO 有一些在其文档](http://www.php.net/pdo)中解释的漂亮特性。

第三，您不应该使用正则表达式来“过滤”您的查询变量。您可以做的最安全的事情是在任何数字上使用 intval/floatval，并通过您使用的数据库库（例如[mysql_escape_string](http://php.net/mysql_escape_string)（或[mysqli_real_escape_string](http://php.net/mysqli_real_escape_string)）或使用[准备好的语句](http://www.php.net/manual/en/pdo.prepared-statements.php)（它将为您清理变量）转义其余部分）。

第四，您将显示逻辑放入您的对象中。想一想：这个对象实现了什么目的/作用？它是否处理注册逻辑？它是否存储注册数据？[在这里使用单一职责原则](http://www.objectmentor.com/resources/articles/srp.pdf)是个好主意。看起来该对象应该像一个混合模型控制器一样工作，其中包含表示信息。您可以将其扩展为 RegistrationModel 和 RegistrationController 类来处理临时存储数据，甚至决定做其他事情。但请记住，你的班级承担的责任越多，它必须打破的方式就越多。

此外，通过将 Register 的所有属性设为私有，您不能有多种注册方式。如果您想要流程的捷径，例如通过 OAuth（例如 Twitter 或 Facebook）登录，但需要重用 Register 中的一些逻辑，该怎么办？这些属性至少应该受到保护，以便您可以从它们继承，或者甚至是公共的，以便另一个对象可以与它们交互（例如通知用户其注册成功的对象）。

# java - JPA：如何映射以日期为键的地图

> ID：14859569
> 
> 赞同：2
> 
> 时间：2013-02-13T17:38:07.253
> 
> 标签：java, date, jpa, map, persistence

通常，您会将 Date 映射为，`@Temporal(TemporalType.DATE)`并将 Map<> 映射为`@ManyToMany`or `@Lob`。

现在我正在尝试绘制地图。我已经尝试过`@ManyToMany @Temporal(TemporalType.DATE)`，但这似乎不起作用：

```
Exception Description: The type [class java.util.Map] for the attribute [x] on the entity class [y] is not a valid type for a temporal mapping. 
```

所以我的问题是，如何映射包含日期的地图？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T18:17:40.020

你有没有尝试过这样的事情？

```
 @OneToMany
 @MapKeyTemporal(DATE)
 protected java.util.Map<java.util.Date, Employee> employees; 
```

# python - 在 Debian 6.06 中守护 web.py python 应用程序

> ID：14859570
> 
> 赞同：1
> 
> 时间：2013-02-13T17:38:12.113
> 
> 标签：python, jenkins, debian, daemon

我正在尝试在 debian 6.06 中守护 web.py python 应用程序，以便我可以使用 jenkins 启动/停止它。

到目前为止，我取得的最大进展是：

```
root@ip-10-80-227-164:/var/lib/jenkins/workspace/beta# /sbin/start-stop-daemon 
--start --pidfile /var/tmp/betad/betad.pid --user root --group root 
--exec /usr/local/bin/python2.7 /var/lib/jenkins/workspace/beta/app.py --verbose 
```

但这会破坏应用程序内的所有相对路径。我得到一个堆栈跟踪

```
IOError: [Errno 2] No such file or directory: './somefile' 
```

通常我启动服务器，`python app.py`它运行没有问题。

我很想像[pep 3143](http://www.python.org/dev/peps/pep-3143/)一样守护它，但我不知道如何告诉它在守护程序上下文中运行 app.py （应用程序没有包装在我可以调用的函数中）。

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T19:52:13.863

在此之后：[http](http://edvanbeinum.com/how-to-install-and-configure-supervisord) ://edvanbeinum.com/how-to-install-and-configure-supervisord我可以使用 supervisord 轻松完成

# ruby - Ruby 字符串中的自定义 + 方法

> ID：14859571
> 
> 赞同：3
> 
> 时间：2013-02-13T17:38:12.823
> 
> 标签：ruby, string

我正在尝试修改 Ruby String 类，特别是 + 方法。我希望它返回一个特定的字符串，这样

```
 "a" + "b" => "custom_result" 
```

这是我所拥有的：

```
class String

  def +(a)
    "custom_result"
  end

end 
```

当我尝试在 irb 中要求此文件时，“custom_result”出现在我的提示符中，我无法执行任何操作。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T17:41:55.823

好吧，IRb 使用`String`该类来打印结果并解析您输入的内容。如果你搞砸了，IRb 就会中断，这并不奇怪。

# c# - 请求时在 StructureMap 中注册类型

> ID：14859573
> 
> 赞同：1
> 
> 时间：2013-02-13T17:38:15.310
> 
> 标签：c#, structuremap

我们有一个缓存解决方案，它依赖于 StructureMap 为开发人员提供正确的缓存实现。我正在尝试减少所需的 StructureMap 配置数量，但已经卡住了……缓存提供者（例如本地缓存、分布式……）都实现了接口`ICache<T>`，并且针对不同的“缓存配置文件”注册了类型根据跨服务器一致性的需要。然后将配置文件映射到某个缓存提供程序。目前，需要为每个缓存的类型指定如何缓存它，这在初始化时提供了很多这样的行：

```
CacheSetup.CacheType<Foo>.With<LocalMemoryCache>();
CacheSetup.CacheType<Bar>.With<LocalMemoryCache>();
CacheSetup.CacheType<Baz>.With<DistributedCache>(); 
```

这些行中的每一行基本上都获取所请求配置文件的缓存提供程序以及`ICache<T>`该类型的提供程序（的实现）的寄存器。

我想要做的是能够设置一个默认缓存配置文件，该配置文件将用于未明确注册的类型。在上面的示例中，我想设置`LocalMemoryCache`为默认配置文件，然后在`GetInstance<ICache<Foo>>`调用时，它应该由与该配置文件关联的缓存提供程序解析。我一直在广泛阅读文档，尤其是拦截部分，但似乎没有办法在创建实例**之前**进行拦截，这是我需要的。

任何想法如何实现？

# java - 在 JSP 页面中使用 JSTL 生成数字

> ID：14859577
> 
> 赞同：2
> 
> 时间：2013-02-13T17:38:41.360
> 
> 标签：java, jsp, jstl

我想在 JSP 页面的下拉列表中生成年龄

```
<select name="cboAge" id="cboAge">
<%  
  for(int i=20;i<50;i++)
 { %>     
   <option value="<%= i%>"><%= i%></option>
 <% } %>  
</select> 
```

如果我从 jstl 标签库中选择哪个标签是合适的，因为上述方法是非常不鼓励的

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-13T17:41:32.200

使用[JSTL](https://stackoverflow.com/tags/jstl/info) [`<c:forEach>`](http://docs.oracle.com/javaee/5/jstl/1.1/docs/tlddocs/c/forEach.html)。

```
<c:forEach begin="20" end="49" var="i">
    <option value="${i}">${i}</option>
</c:forEach> 
```

请注意，`end`包括在内。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-13T17:45:48.673

为此使用 jquery

```
</script><script type="text/javascript">
$(document).ready(function() {
    var selectAge = $("#selectAge"), i;
    for ( i = 20; i < 50; i++) {
        $(selectAge).append("<option value='" + options[i] + "'>" + i + "</option>");
    }
}); 
```

希望这可以帮助

# python - 如何在python 3中将字节作为流读取

> ID：14859578
> 
> 赞同：39
> 
> 时间：2013-02-13T17:38:43.587
> 
> 标签：python, python-3.x

我正在读取一个二进制文件（ogg vorbis）并提取一些数据包以供以后处理。这些数据包是 python 字节对象，我们是否可以使用“read(n_bytes)”方法读取它们。现在我的代码是这样的：

```
packet = b'abcd'
some_value = packet[0:2]
other_value = packet[2:4] 
```

我想要这样的东西：

```
packet = b'abcd'
some_value = packet.read(2)
other_value = packet.read(2) 
```

如何从字节对象创建可读流？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-02-13T17:41:40.847

您可以使用类似`io.BytesIO`文件的对象

```
>>> import io
>>> file = io.BytesIO(b'this is a byte string')
>>> file.read(2)
b'th'
>>> file.read(2)
b'is' 
```

# c++ - 异常规范或多或少有限制

> ID：14859579
> 
> 赞同：0
> 
> 时间：2013-02-13T17:38:55.310
> 
> 标签：c++

基于[此](http://www.gotw.ca/publications/mill22.htm)

> 顺便说一句，只要目标的异常规范不比源的限制更严格，您就可以对函数的指针进行这种分配

```
class A{};
class B{};
class C{};

void f() throw(A,B,C) {}

void (*pf)() throw(A,B);

int main()
{
    pf = f; // pf is more restrictive than that of f. I expect an error here!
} 
```

最后一条语句不应通过编译器。不过，我试过VS2010和GCC最新版本。他们都没有抱怨。

问题> 为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T18:16:06.640

这看起来像是 GCC 和 VS2010 中的一个错误。Clang 不会编译它，它不应该根据`[except.spec]/5`：

> ...类似的限制适用于函数指针、成员函数指针和函数引用的赋值和初始化：目标实体应至少允许赋值或初始化中源值允许的异常。

该标准还包括以下示例：

```
class A { /*...*/ };
void (*pf1)(); // no exception specification
void (*pf2)() throw(A);
void f() {
    pf1 = pf2; // OK: pf1 is less restrictive
    pf2 = pf1; // error: pf2 is more restrictive
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T18:20:14.883

这是 g++ 中长期存在的错误：[http ://gcc.gnu.org/bugzilla/show_bug.cgi?id=12255](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=12255)

> 根本问题是 G++ 只是忽略了非函数声明的异常规范。我认为这种选择源于关于异常规范是否会成为函数类型的一部分而不是与声明保持关联的不确定性。

如果 VS 在这方面相似，我不会感到惊讶。

# c++ - 同一类型的多个 typedef

> ID：14859582
> 
> 赞同：1
> 
> 时间：2013-02-13T17:39:05.143
> 
> 标签：c++, stl, typedef

下面的代码是 Ubuntu 标准包中提供的类初始化器列表。在这个迭代器和 const_iterator 是相同类型的 typedef。我只是想知道为什么我们要为不同类型的 Iterator 使用相同的 typedef ？理想情况下，Iterator 应该有 typedef _E* 迭代器。

```
// In the class initializer list:
namespace std 
{ 
  /// initializer_list 
  template<class _E> 
    class initializer_list 
    { 
    public: 
      typedef _E                value_type; 
      typedef const _E&         reference; 
      typedef const _E&         const_reference; 
      typedef size_t            size_type; 
      typedef const _E*         iterator; 
      typedef const _E*         const_iterator; 
```

PS：我想不出合适的标题，所以我给了这个标题

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T17:43:09.787

为了满足[Container](http://en.cppreference.com/w/cpp/concept/Container)的要求，这两种类型都必须`iterator`存在`const_iterator`。许多算法和大量代码依赖于具有这两种类型的容器。然而，没有理由该`iterator`类型必须是非`const`（可变）迭代器。在这种情况下，他们决定`iterator`和`const_iterator`都是`const`（不可变的）迭代器。

他们拥有两个迭代器的原因`const`是因为他们显然不希望您能够更改`initializer_list`.

作为另一个例子，看看[`std::set`](http://en.cppreference.com/w/cpp/container/set)who`iterator`和`const_iterator`types 也是常量迭代器。由于`std::set`s 包含有序元素，如果您能够更改 s 的内容，则`std::set`该排序将无效。为了防止这种情况，两种迭代器类型都被设为不可变。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T17:41:54.713

因为任何满足[`Container`](http://en.cppreference.com/w/cpp/concept/Container). 碰巧在 的情况下 `std::initializer_list`， the`iterator`和 the`const_iterator`是相同的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T17:42:26.523

这可能是因为您不想更改存储在初始值设定项列表中的值。它们是要传递给构造函数的临时对象。

C++ 有一个（目前是非正式的）理想，称为适用于泛型类型的概念。Container 概念要求某些类型定义可用于您的对象。由于 std::initializer_list 是一个容器，它需要 ::iterator 和 ::const_iterator 类型定义。但是，与 std::set 一样，您不想让用户修改 initializer_list 中的元素，因此 ::iterator 与 ::const_iterator 相同：它们都是只读的。

# java - Java：基本绘图，绘制点/点/像素

> ID：14859593
> 
> 赞同：6
> 
> 时间：2013-02-13T17:39:42.053
> 
> 标签：java, graphics, plot, drawing, pixel

我只需要一个可以在其中绘制**的面板。**我希望能够**逐个像素地绘制**。

ps：我不需要其他原语的线条/圆圈。pps：图形库无所谓，可以是awt、swing、qt..什么的。我只想拥有通常由 Bufferedimage 或类似设置单个像素颜色然后将其渲染到屏幕的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T18:39:09.263

一种方法的示例：

```
// Create the new image needed
img = new BufferedImage(width, height, BufferedImage.TYPE_INT_RGB );

for ( int rc = 0; rc < height; rc++ ) {
  for ( int cc = 0; cc < width; cc++ ) {
    // Set the pixel colour of the image n.b. x = cc, y = rc
    img.setRGB(cc, rc, Color.BLACK.getRGB() );
  }//for cols
}//for rows 
```

然后从被覆盖的paintComponent(Graphics g)中

```
((Graphics2D)g).drawImage(img, <args>) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T17:51:23.990

> 由 Bufferedimage 表示。

我`BufferedImage`为此建议一个，显示..

> ..或类似的设置单个像素的颜色，然后将其渲染到屏幕上。

..in a-`JLabel`如[this answer](https://stackoverflow.com/a/10055306/418556)所示。

![](../Images/176b6688e02581cb647c578fc11f9f64.png)

当然，一旦我们有了 的实例`BufferedImage`，我们就可以[`setRGB(..)`](http://docs.oracle.com/javase/7/docs/api/java/awt/image/BufferedImage.html#setRGB%28int,%20int,%20int%29).

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-13T17:58:11.673

如果你真的需要逐像素渲染，我已经为我为研究实验室编写的热点可视化软件做了详细的介绍。

你想要的是[BufferedImage.setRGB(..)](http://docs.oracle.com/javase/6/docs/api/java/awt/image/BufferedImage.html#setRGB%28int,%20int,%20int%29) - 如果你是逐个像素地绘制，我假设你已经实现了一个算法，它将渲染每个像素的 RGB 值（就像我们对热图所做的那样） . 这是我们过去在兼容 IE 的旧 Applet 中使用的。像魅力一样工作，并且考虑到它正在做的事情，速度相对较快。

不幸的是，任何时候您直接在 BufferedImage 中操作 RGB 值时，它都会被支持的视频内存取消缓存。

不过从 Java 7 开始，我听说底层 J2D 实现将尝试在操作停止并且一遍又一遍地完成渲染时将图像重新缓存到视频内存中——例如，当你渲染热量时map 它不会加速，但是一旦渲染，当您拖动窗口并使用应用程序时，支持图像数据*可以*重新加速。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-04-03T00:29:42.573

如果您想快速做某事，您可以使用图形方法 setColor 和 drawLine。例如：

```
public void paintComponent(Graphics g) {
    super.paintComponent(g);       

    // Set the colour of pixel (x=1, y=2) to black
    g.setColor(Color.BLACK);
    g.drawLine(1, 2, 1, 2);
} 
```

我已经使用了这种技术，而且速度不是很慢。我没有将它与使用 BufferedImage 对象进行比较。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-27T10:41:07.043

这里有点晚了，但你总是可以像 Java 游戏程序员那样做，有一个`Screen`类：

```
public class Screen {

    private int width, height;  

    public int[] pixels;

    public Screen(int width, int height) {
        this.width = width;
        this.height = height;

        pixels = new int[width * height];
    }

    public void render() {
        for(int y = 0; y < height; y++) {
            for(int x = 0; x < width; x++) {
                pixels[x + y * width] = 0xFFFFFF; //make every pixel white
            }
        }
    }

public void clear() {
            for(int i = 0; i < pixels.length; i++) {
                    pixels[i] = 0; //make every pixel black
            }
    }

} 
```

然后在你的主要课程中：

```
 private Screen screen;

    private BufferedImage image = new BufferedImage(width, height, BufferedImage.TYPE_INT_RGB);
    private int[] pixels = ((DataBufferInt) image.getRaster().getDataBuffer()).getData();

    public void render() {
         BufferStrategy bs = getBufferStrategy();
        if (bs == null) {
            createBufferStrategy(3);
            return;
        }

        screen.clear();
        screen.render();

         for(int i = 0; i < pixels.length; i++) {
            pixels[i] = screen.pixels[i];
         }

        Graphics g = bs.getDrawGraphics();
        g.drawImage(image, 0, 0, getWidth(), getHeight(), null);
        g.dispose();
        bs.show();
} 
```

我认为这应该可行。

# jsf-2 - SessionScoped Bean @PostConstruct 调用了两次

> ID：14859594
> 
> 赞同：0
> 
> 时间：2013-02-13T17:39:42.850
> 
> 标签：jsf-2, ejb, managed-bean, postconstruct

我有一个 SessionScoped bean 来管理用户身份验证。如果用户通过身份验证，主页会显示一些附加文本

```
 <h:outputText value="welcome " rendered="#{loginBean.isLoggedIn}" /> 
```

当页面加载时，我可以看到*@PostConstruct在**START PHASE RENDER_RESPONSE 6*之后被调用（如预期的那样）

 *当用户单击登录时，我加载了一个表单，我可以看到在用户提交登录时调用了登录方法（身份验证也有效）。此后，用户被重定向回原始页面。在*START PHASE RENDER_RESPONSE 6*之后，再次调用 loginBean的*@PostConstruct ！*

```
INFO: START PHASE RESTORE_VIEW 1
INFO: END PHASE RESTORE_VIEW 1
INFO: START PHASE RENDER_RESPONSE 6
INFO: Constructor called 1 times !
INFO: In constructor FROM is greeting.xhtml
INFO: Get is logged in called and value is false
INFO: Get is logged in called and value is false
INFO: END PHASE RENDER_RESPONSE 6
INFO: START PHASE RESTORE_VIEW 1
INFO: END PHASE RESTORE_VIEW 1
INFO: START PHASE APPLY_REQUEST_VALUES 2
INFO: END PHASE APPLY_REQUEST_VALUES 2
INFO: START PHASE PROCESS_VALIDATIONS 3
INFO: END PHASE PROCESS_VALIDATIONS 3
INFO: START PHASE UPDATE_MODEL_VALUES 4
INFO: END PHASE UPDATE_MODEL_VALUES 4
INFO: START PHASE INVOKE_APPLICATION 5
INFO: END PHASE INVOKE_APPLICATION 5
INFO: START PHASE RENDER_RESPONSE 6
INFO: START PHASE RESTORE_VIEW 1
INFO: END PHASE RESTORE_VIEW 1
INFO: START PHASE APPLY_REQUEST_VALUES 2
INFO: END PHASE APPLY_REQUEST_VALUES 2
INFO: START PHASE PROCESS_VALIDATIONS 3
INFO: END PHASE PROCESS_VALIDATIONS 3
INFO: START PHASE UPDATE_MODEL_VALUES 4
INFO: END PHASE UPDATE_MODEL_VALUES 4
INFO: START PHASE INVOKE_APPLICATION 5
INFO: END PHASE INVOKE_APPLICATION 5
INFO: START PHASE RENDER_RESPONSE 6
INFO: END PHASE RENDER_RESPONSE 6
INFO: END PHASE RENDER_RESPONSE 6
INFO: START PHASE RESTORE_VIEW 1
INFO: END PHASE RESTORE_VIEW 1
INFO: START PHASE RENDER_RESPONSE 6
INFO: END PHASE RENDER_RESPONSE 6
INFO: START PHASE RESTORE_VIEW 1
INFO: END PHASE RESTORE_VIEW 1
INFO: START PHASE APPLY_REQUEST_VALUES 2
INFO: END PHASE APPLY_REQUEST_VALUES 2
INFO: START PHASE PROCESS_VALIDATIONS 3
INFO: Getting sendto=<greeting.xhtml>
INFO: END PHASE PROCESS_VALIDATIONS 3
INFO: START PHASE UPDATE_MODEL_VALUES 4
INFO: END PHASE UPDATE_MODEL_VALUES 4
INFO: START PHASE INVOKE_APPLICATION 5
INFO: Session is not null
INFO: login method of the login bean has been called
INFO: login success
INFO: END PHASE INVOKE_APPLICATION 5
INFO: START PHASE RESTORE_VIEW 1
INFO: END PHASE RESTORE_VIEW 1
INFO: START PHASE RENDER_RESPONSE 6
INFO: Constructor called 2 times ! 
```

我检查了导入 import javax.faces.bean.SessionScoped;

我已经阅读了许多关于这个问题的答案，但是仍然不确定如何解决这个问题。有任何想法吗 ？

这是主页

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui" 
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:c="http://java.sun.com/jsp/jstl/core">

    <body>

        <ui:composition template="./newTemplate.xhtml">

            <ui:define name="title">
                Greeting
            </ui:define>

            <ui:define name="top">
                   <div class="menu">
                    <ul id="list-nav">
                        <li><a href="http://localhost:8080/MaxThePuppyCompany-    war/faces/greeting.xhtml">Home</a></li>
                        <li>
                            <p:lightBox name="myLightbox" id="myLightbox">  
                                <h:outputLink value="#">  
                                    <h:outputText value="Video Content"/>  
                                    </h:outputLink>  

                                <f:facet name="inline">  
                                    <p:media value="http://vimeo.com/moogaloop.swf?clip_id=18079550"  width="400" height="225" player="flash"/>  
                                </f:facet>  
                            </p:lightBox>
                        </li>
                        <li>
                           <p:lightBox widgetVar="myPopup" id="mPopup">
                               <h:outputLink value="#" onclick="myPopup.show();">  
                                    <h:outputText value="Products"/>  
                                </h:outputLink>                          
                            <f:facet name="inline">
                                <ui:include src="/popups/products.xhtml"  />
                             </f:facet>                                                                     
                            </p:lightBox>
                        </li>
                        <li>
                           <p:lightBox widgetVar="myLoginPopup" >
                               <h:outputLink value="#" onclick="loadLogin();">  
                                    <h:outputText value="Login"/>  
                                </h:outputLink>           
                               <f:facet name="inline">
                                <div id="mLoginPopup"></div>
                               </f:facet>
                            </p:lightBox>
                        </li>

                        <li>
                            <h:outputText value="#{loginBean.isLoggedIn}"/>
                         </li>

                    </ul>

                 </div>

            </ui:define>

            <ui:define name="left">

            </ui:define>

            <ui:define name="right">
                right
            </ui:define>

            <ui:define name="content">
                content
            </ui:define>

            <ui:define name="bottom">
                bottom
            </ui:define>

        </ui:composition>

    </body>
</html> 
```

这是 SessionScoped Bean

```
import java.io.Serializable;
import java.io.UnsupportedEncodingException;
import java.security.Principal;
import javax.annotation.PostConstruct;
import javax.faces.bean.SessionScoped;
import javax.faces.application.FacesMessage;
import javax.faces.bean.ManagedBean;
import javax.faces.context.ExternalContext;
import javax.faces.context.FacesContext;
import javax.servlet.RequestDispatcher;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpSession;

@ManagedBean(name = "loginBean")
@SessionScoped
public class LoginBean implements Serializable {

    /**
     * 
     */

    private String username;
    private String password;
    private boolean isLoggedIn = false;
    private static int calls;

    //@ManagedProperty(value="#{param.from}")
    private String sendto;
    //private String from;

    private  int nthOccurrence(String str, char c, int n) {
        int pos = str.indexOf(c, 0);
        while (n-- > 0 && pos != -1) {
            pos = str.indexOf(c, pos+1);
        }
        return pos;
    }

    public LoginBean(){
              calls++;
        System.out.println("Constructor called " + calls + " times !");
        //this.sendto =     FacesContext.getCurrentInstance().getExternalContext().getRequestParameterMap().get("from");
                        ExternalContext ec =     FacesContext.getCurrentInstance().getExternalContext();
                        String tmp =  (String)     ec.getRequestMap().get(RequestDispatcher.FORWARD_REQUEST_URI);
                        if(tmp != null) {
                            int index= this.nthOccurrence(tmp, '/', 1);
                            this.sendto = tmp.substring(index);
                        } else {
                            this.sendto = "greeting.xhtml";
                        }
      System.out.println("In constructor FROM is " + this.sendto);
                        HttpSession session = (HttpSession)     FacesContext.getCurrentInstance().getExternalContext().getSession(false);

                        if(session != null){
                               System.out.println("In Constructor Session is " +     session.toString());
                            //session.invalidate();
                        }      
    }

    /**
     * Check to see if the user has been logged in
     * @return
     */
    public boolean getIsLoggedIn() {
                      System.out.println("Get is logged in called and value is " +     this.isLoggedIn);
        return this.isLoggedIn;
    }
    public String getUsername() {
        return username;
    }
    public void setUsername(String username) {
        this.username = username;
    }
    public String getPassword() {
        return password;
    }
    public void setPassword(String password) {
        this.password = password;
    }
    /*
    public String getFrom() {
        return this.from;
    }

    public void setFrom (String from) {
        this.from = from;
    }
    */
    public String getSendto() throws UnsupportedEncodingException {
        //
        //this.sendto = "/admin/aminConsole.xhtml";
        System.out.println("Getting sendto=<" + this.sendto + ">");
        return this.sendto;
    }

    public void setSendto(String sendto) throws UnsupportedEncodingException {
        //this.sendto = sendto;
    }

    public String register() {
        return "Register";
    }

    public String login(){ 
```*

# java - Mockito 在同一个 NavigationSet 上提供无限 while 循环和有限 for 循环

> ID：14859600
> 
> 赞同：1
> 
> 时间：2013-02-13T17:39:53.203
> 
> 标签：java, loops, junit, mockito

*   我在**JUnit 测试中使用****Mockito**。我嘲笑了一个.**`NavigableSet`**
***   在我的单元测试中，我需要循环到 this 中包含的对象`NavigableSet`。*   `NavigableSet`出于测试目的，我计划仅包含 1 个对象。**

 **以下是我使用 Mockito 创建模拟对象的代码：

```
NavigableSet<ObjectToProcess> newMockedSet = new TreeSet<ObjectToProcess>();
ObjectToProcess mockedInnerObject = new ObjectToProcess(); // initialization of this object
newMockedSet.add(mockedInnerObject); // I just added the only 1 object contained in the NavigableSet
Mockito.when(getSetOfObjectToProcess()).thenReturn(newMockedSet); 
```

为什么下面的`while`循环给出了一个`NavigableSet`只包含 1 个对象的无限循环？

```
NavigableSet<ObjectToProcess> anotherSetOfObjects = getSetOfObjectToProcess(); // retrieving the mocked object
while (anotherSetOfObjects.iterator().hasNext())
{
    ObjectToProcess thisPaymentDemand = anotherSetOfObjects.iterator().next();
    // do stuff
} 
```

为什么以下`for`循环的行为与预期一样只循环一次？

```
NavigableSet<ObjectToProcess> anotherSetOfObjects = getSetOfObjectToProcess(); // retrieving the mocked object
for (ObjectToProcess thisMockedInnerObject : anotherSetOfObjects)
{
    ObjectToProcess thisPaymentDemand = thisMockedInnerObject;
    // do stuff
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T19:12:26.707

这不是 Mockito 问题。

在**while**示例中，您在**每次**迭代`anotherSetOfObjects.iterator()`的循环开始时调用。

 **您将获得一个迭代器（对于包含单个项目的 mockedSet），然后检查它是否具有下一个（确实如此），然后进入循环体。主体完成后，您将再次运行条件检查以查看是否循环...通过获取一个**NEW**迭代器，其功能与第一个迭代器完全相同（假设您同时没有修改集合） .

将迭代器存储在循环之外，以便在每次迭代时测试相同的迭代器，而不是获取新的迭代器：

```
Iterator<NavigableSet> iterator = anotherSetOfObjects.iterator();
while (iterator.hasNext())
{
    ObjectToProcess thisPaymentDemand = anotherSetOfObjects.iterator().next();
    // do stuff
} 
```

这样做会使你的 while 循环表现得像你的 for 循环一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T19:14:28.753

从发布的代码中很难理解您的意图。您需要演示某个协作类类型的模拟对象的创建以及您正在测试的类的身份。此外，`when()`调用的参数应该是 Mockito 模拟上的方法调用的形式。换句话说，

```
// setting up test fixture
MyCollaborator x = Mockito.mock(MyCollaborator.class);
when(x.getSetOfObjectToProcess()).thenReturn(newMockedSet);

// and then later in test
NavigableSet<ObjectToProcess> anotherSetOfObjects = x.getSetOfObjectToProcess();
while(anotherSetOfObjects.iterator() ...) {

// or
for (ObjectToProcess thisMockedInnerObject : anotherSetOfObjects) {
... 
```

所以你错过了论点的`x.`一部分。`when()`

不太清楚的是你的意图是什么。如果您尝试`getSetOfObjectToProcess()`在某个类上测试该方法，那么您不应该嘲笑该类。您应该只模拟与您正在测试的类（通常称为“被测系统”或 SUT）交互的协作者类/对象。

您的代码甚至没有显示使用`Mockito.mock()`方法或`@Mock`注释创建 Mockito 模拟对象，并且至少其中一个是使用 Mockito 所必需的。如果`getSetOfObjectToProcess()`是静态方法，那么 Mockito 无论如何都不会为您模拟它。****

# wix - WIX - 在安装过程中找出核心数量

> ID：14859601
> 
> 赞同：0
> 
> 时间：2013-02-13T17:39:53.843
> 
> 标签：wix

在安装我们的产品期间，我们需要知道 CPU 有多少个内核。Wix 有这个功能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T18:16:54.760

Windows Installer 或 WiX 中没有任何本机支持此功能。Windows Installer 具有一组硬件属性，例如 Intel、Intel64 (Itanium) 和 Msix64 (AMD/Intel) 属性，但核心数没有。

您需要一个自定义操作（通常是 c++ 或 C# ）来获取信息并设置属性以供以后在安装程序中使用。确切的细节取决于您选择的语言。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T03:03:40.473

一种可能的非自定义操作解决方案：每个内核都有一个注册表项`HKLM\HARDWARE\DESCRIPTION\System\CentralProcessor\0`、`HKLM\HARDWARE\DESCRIPTION\System\CentralProcessor\1`等。

例如，如果您希望以至少有四个内核为条件，请通过注册表搜索`...\CentralProcessor\3`键中的一个值来设置 MSI 属性（默认注册表值通常为空，因此请使用其他值之一，例如`Identifier`）。

当且仅当至少有 4 个核心时，才会设置该属性。然后，您可以使用此 MSI 属性的存在或不存在来调节取决于具有足够内核的任何操作。

# android - 没有工作数据连接的谷歌云消息传递

> ID：14859604
> 
> 赞同：5
> 
> 时间：2013-02-13T17:40:01.493
> 
> 标签：android, google-cloud-messaging

Google Cloud Messaging 能否向能够接收语音电话和短信但由于某种原因目前没有工作数据连接的手机发送带有“零字节有效负载”的通知？

通过“零字节”，我的意思是手机会知道没有有效负载的 GCM 通知是由特定的发送者发送给它的，并且可以触发一个意图。

真实世界的例子：一个防盗警报被触发，并向房主发送两条推送消息——一条零字节消息，其含义完全从它被发送的事实中暗示，暗示“正在发生不好的事情”，以及即使数据连接被阻止或不可用，也可以（可能）传递，因为它（可能）跨越用于 SMS 的相同传输层，并且在几秒钟后发送更长的推送通知，其中包含有关情况的附加元信息，可能仅如果此时有可用的数据连接，则工作（因此可以通知电话，并在建立常规数据会话后从服务器获取有效负载）。

我读过谷歌的文档，但似乎他们故意向后弯腰，对 GCM 的物理传输层只字不提。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T18:24:29.920

我不得不说“不”，因为 GCM（以及 Google 所做的几乎所有事情）都是基于 TCP/UDP/IP 的，如果您的手机没有活动数据，它就无法传送到您的手机(3G/4G/WiFi) 连接。

由于电话没有 IP 地址，GCM 无法传递消息。

来自[GCM 架构概述](http://developer.android.com/google/gcm/gcm.html "GCM 架构概述")：

*   它使用现有的 Google 服务连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T23:09:59.073

*   不会。如果您使用 GCM，则没有零长度消息。GCM 至少需要包含一些关于什么服务将接收此消息的信息。
*   注意 GCM=> Google CLOUD Message 。如果您未连接，则无法成为云。
*   GCM 是服务器推送。如果服务器无法访问，则服务器无法推送到客户端。

# javascript - 使用 JQuery on 和 off 方法附加和删除选定的事件处理程序

> ID：14859605
> 
> 赞同：2
> 
> 时间：2013-02-13T17:40:01.717
> 
> 标签：javascript, jquery, jquery-events

我正在使用 JQuery`on`方法将事件处理程序附加到窗口对象：

```
$(window).on('resize', function(e){
     /** my functional code goes here **/
     e.stopPropagation();
}); 
```

这是事件处理程序被多次调用：之所以这样是因为事件处理程序位于 JQuery 插件的初始化部分，所以当有人像这样调用插件构造函数时：

```
$('selector').myPlugin({settings_1});
$('selector').myPlugin({settings_2});
$('selector').myPlugin({settings_3}); 
```

事件处理程序被附加 3 次。

我正在寻找一种方法来识别和停用除 3 个事件处理程序中的一个之外的所有事件处理程序（使用`off`方法），以便在调整大小期间，只有其中一个会被触发。

如何识别事件处理程序并删除我想要的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T18:10:12.923

尝试这个：

```
function myHandler(e){
     /** my functional code goes here **/
     e.stopPropagation();
}

$(window).on('resize', function (e){
    $(window).off('resize', myHandler);
    $(window).on('resize', myHandler);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T18:15:28.773

如果您的事件处理程序仅使用 jquery（而不是纯 javascript）附加，请阅读[此问题](https://stackoverflow.com/questions/1236067/test-if-event-handler-is-bound-to-an-element-in-jquery)的答案以检查 DOM 元素是否已经具有事件处理程序，并在您的情况下避免重复它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-13T12:11:53.393

您可以利用一系列`{key, callback}`. 像这样的东西：

```
window.resizeCallbacks = [];

function addResizeCallback(key, callback) {
    window.resizeCallbacks.push({
        key: key,
        callback: callback
    });
}

function removeResizeCallback(key) {
    var index = -1;
    for (var i = 0; i < window.resizeCallbacks.length; i++) {
        if (window.resizeCallbacks[i].key === key) {
            index = i;
        }
    }
    if (index >= 0) {
        window.resizeCallbacks.splice(index, 1);
    }
}

$(function() {
    $(window).resize(function() {
        for (var i = 0; i < window.resizeCallbacks.length; i++) {
            window.resizeCallbacks[i].callback();
        }
    });
}); 
```

# c# - 使用开发人员 API 更新 OneNote 页面

> ID：14859606
> 
> 赞同：0
> 
> 时间：2013-02-13T17:40:03.117
> 
> 标签：c#, xml, onenote

我尝试使用 Microsoft 参考更新 OneNote 中的页面：http: [//msdn.microsoft.com/en-us/library/office/jj680118.aspx](http://msdn.microsoft.com/en-us/library/office/jj680118.aspx)

这是我的问题。当我尝试使用正确的 ID 更新我的页面时，它向我抛出了一条错误消息：HRESULT 异常：0x80042000。

这是我的代码：

```
 static void UpdatePageContent()
  {
        ApplicationClass onApplication = new ApplicationClass();
        String strImportXML;

        strImportXML = @"<?xml version="+"1.0"+" encoding="+"utf-16"+"?>" +
           "   <one:Page xmlns:one="+"http://schemas.microsoft.com/office/onenote/12/2004/onenote\""+"" +
           "ID=\"{5BE09697-903A-45DD-88D4-8AD301A3D91F}{1}{B0}\">" +
           "      <one:PageSettings RTL=\"false\" color=\"automatic\">" +
           "         <one:PageSize>" +
           "            <one:Automatic/>" +
           "         </one:PageSize>" +
           "         <one:RuleLines visible=\"false\"/>" +
           "      </one:PageSettings>" +
           "      <one:Title style=\"font-family:Calibri;" +
           "           font-size:17.0pt\" lang=\"en-US\">" +
           "         <one:OE alignment=\"left\">" +
           "            <one:T>" +
           "               <![CDATA[My Sample Page]]>" +
           "            </one:T>" +
           "         </one:OE>" +
           "      </one:Title>" +
           "      <one:Outline >" +
           "         <one:Position x=\"120\" y=\"160\"/>" +
           "         <one:Size width=\"120\" height=\"15\"/>" +
           "         <one:OEChildren>" +
           "            <one:OE alignment=\"left\">" +
           "               <one:T>" +
           "                  <![CDATA[Sample Text]]>" +
           "               </one:T>" +
           "            </one:OE>" +
           "         </one:OEChildren>" +
           "      </one:Outline>" +
           "   </one:Page>";

        // Update page content
        try
        {
            onApplication.UpdatePageContent(strImportXML, System.DateTime.MinValue);
        }
        catch (COMException e)
        {
            Console.WriteLine("Error Message : " + e.Message);
        }
    } 
```

我真的不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-03T22:35:31.723

您的 XML 对 OneNote 不友好。

这是错误代码列表：http: [//msdn.microsoft.com/en-us/library/office/jj680117.aspx](http://msdn.microsoft.com/en-us/library/office/jj680117.aspx)

你可以去掉第一行，正如@Sebastian 所说的那样，它的格式不正确，我的经验是 OneNote 不需要它。

另外，请记住您不需要发送整个页面。您只需要发送页面的 objId 和任何更新的对象。所以需要添加一个大纲，然后这也应该起作用：

```
"<one:Page xmlns:one=\"http://schemas.microsoft.com/office/onenote/12/2004/onenote\" +
       "ID=\"{5BE09697-903A-45DD-88D4-8AD301A3D91F}{1}{B0}\">" +
       "      <one:Outline >" +
       "         <one:Position x=\"120\" y=\"160\"/>" +
       "         <one:Size width=\"120\" height=\"15\"/>" +
       "         <one:OEChildren>" +
       "            <one:OE alignment=\"left\">" +
       "               <one:T>" +
       "                  <![CDATA[New Text]]>" +
       "               </one:T>" +
       "            </one:OE>" +
       "         </one:OEChildren>" +
       "      </one:Outline>"; 
```

只会添加这个新大纲。

如果您仍然遇到问题（它没有抱怨但内容没有更新）然后检查 UpdatePageContent 的额外参数，当然在 2013 API 中可以发送最后修改日期进行检查，还有一个参数可以强制本地覆盖。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T09:40:30.513

strImportXML 字符串中存在一些问题，导致更新失败。

*   调整 `@"<?xml version="+"1.0"+" encoding="+"utf-16"+"?>"`为`"<?xml version=\"" + "1.0" + "\" encoding=\"" + "utf-16" + "\"?>"`
*   在页面 ID 属性前添加一个空格（`+ " " + "ID`...
    而不是`+ "" + "ID`）
*   确保在您的`onApplication` 层次结构中找到/存在页面 ID
*   确保您使用元素
    中定义的匹配命名空间引用 COM 库（例如 Office 2013/15.0 对象库有另一个命名空间）`one:Page`

# git - 橡胶 capistrano 从 bitbucket 部署到 ec2 获得许可被拒绝

> ID：14859607
> 
> 赞同：1
> 
> 时间：2013-02-13T17:40:08.120
> 
> 标签：git, amazon-ec2, capistrano, bitbucket

我过去曾为其他项目做过几次，并最终让它发挥作用，但每次我似乎都不记得到底该做什么。

我有一个 ec2 ubuntu 服务器，正在使用 capistrano 进行部署，并使用橡胶来设置 evertyhing。

在我的 ec2 服务器上，我生成了 ssh 密钥，添加到 bitbucket（在我的帐户下，ssh 密钥。起初我尝试在项目和部署密钥下，但这也不起作用）。在我的 ec2 服务器上，我可以成功手动 ssh 并直接将我的 repo 克隆到我的家中。我已将密钥添加到 ssh 代理。

如果我不使用 scm 并将 deploy_via 设置为 :copy，我可以很好地部署。我相信这会抓住我的本地项目并进行部署。

我读过这些：[https ://confluence.atlassian.com/display/BITBUCKET/Using+Deployment+Keys](https://confluence.atlassian.com/display/BITBUCKET/Using+Deployment+Keys) [https://confluence.atlassian.com/display/BITBUCKET/Troubleshooting+SSH+Issues](https://confluence.atlassian.com/display/BITBUCKET/Troubleshooting+SSH+Issues) [https://confluence。 atlassian.com/pages/viewpage.action?pageId=270827678](https://confluence.atlassian.com/pages/viewpage.action?pageId=270827678)

这工作正常：

```
ubuntu@production:~$ ssh -T hg@bitbucket.org
conq: logged in as myBitBucketUser.

You can use git or hg to connect to Bitbucket. Shell access is disabled. 
```

这是我在部署期间收到的错误消息：

```
* executing "if [ -d /mnt/myProject-production/shared/cached-copy ]; then cd /mnt/myProject-production/shared/cached-copy && git fetch -q origin && git fetch --tags -q origin && git reset -q --hard f2b5b8b6cd1c7835d020d66fdc09b42b2870561e && git clean -q -d -x -f; else git clone -q git@bitbucket.org:myRepo.git /mnt/myProject-production/shared/cached-copy && cd /mnt/myProject-production/shared/cached-copy && git checkout -q -b deploy f2b5b8b6cd1c7835d020d66fdc09b42b2870561e; fi"
    servers: ["production.myserver.com"]
    [production.myserver.com] executing command
 ** [production.myserver.com :: out] Permission denied (publickey).
 ** fatal: The remote end hung up unexpectedly 
```

这是我的 deploy.rb：

```
set :rails_env, Rubber.env

on :load do
  set :application, rubber_env.app_name
  set :runner,      rubber_env.app_user
  set :deploy_to,   "/mnt/#{application}-#{Rubber.env}"
  set :copy_exclude, [".git/*", ".bundle/*", "log/*", ".rvmrc"]
end

# Use a simple directory tree copy here to make demo easier.
# You probably want to use your own repository for a real app
#set :scm, :none
#set :repository, "."
#set :deploy_via, :copy

ssh_options[:forward_agent] = true # also tried false
set :repository, "git@bitbucket.org:myProject.git"
set :scm, "git"
set :deploy_via, :remote_cache
set :branch, 'master'

# Easier to do system level config as root - probably should do it through
# sudo in the future.  We use ssh keys for access, so no passwd needed
set :user, 'root'
set :password, nil

# Use sudo with user rails for cap deploy:[stop|start|restart]
# This way exposed services (mongrel) aren't running as a privileged user
set :use_sudo, false # also tried true 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T18:05:43.247

我将本地机器中生成的 ssh 密钥用于服务器和 bitbucket 存储库，并使用 capistrano 进行部署。因此，使用它可以解决您的问题。

**我做的方式**

我将本地机器的公钥（id_rsa.pub）用于

*   ec2 实例 -[指导](http://www.microbasecloud.com/developer-documentation/tutorials/system-administration/uploading-your-own-ssh-key-to-amazon-ec2)和
*   位桶[指南](https://confluence.atlassian.com/display/BITBUCKET/How+to+install+a+public+key+on+your+bitbucket+account)。

**部署.rb**

```
ssh_options[:forward_agent] = true 
```

当部署服务器尝试连接到您的 git 服务器时，它将从您的本地计算机转发身份验证。

**您尝试的方式的可能解决方案**

与 ssh git@github.com 不同，ssh git@bitbucket 不会将自身添加到已知主机列表中。所以在bitbucket中做的方式一定是[https://confluence.atlassian.com/display/BITBUCKET/Using+the+SSH+protocol+with+Bitbucket](https://confluence.atlassian.com/display/BITBUCKET/Using+the+SSH+protocol+with+Bitbucket)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T01:10:08.740

我也使用橡胶遇到了这个问题。

如果您有多个实例，则需要为所有实例获取 SSH 密钥，因为 Rubber 会将代码部署到所有实例。还没有找到防止这种情况的方法。

要使用的 ssh 密钥在 ~/.ssh 或 /root/.ssh 下，如果您生成的密钥位于不同的目录或不同的用户下，它们可能不会被识别为使用用户“root”的橡胶部署，那就是从 repo 中获取的用户。

希望这可以帮助。

# php - 如何在 IIS 7.5 中启用短标签

> ID：14859614
> 
> 赞同：3
> 
> 时间：2013-02-13T17:40:21.457
> 
> 标签：php, iis-7, php-shorttags

我已经编辑了 php.ini 文件，但它仍然没有被启用：

```
 short_open_tag
     Default Value: On
;   Development Value: On
;   Production Value: On 
```

说它在 phpinfo 文件中已关闭。

我正在使用 php 5.3

干杯。

这是你修复它的方法：

如果您转到 PHP 管理器，然后进入“PHP 设置”下的“管理所有设置”，您可以通过 UI 启用它。令人沮丧！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-09-01T08:34:02.920

对于 ISS，您需要转到“ **PHP 管理器**”，然后查找“**管理所有设置**”

然后搜索**short_open_tag** 双击它并给出值 On

![在此处输入图像描述](../Images/ea46fad50e07b6b4802fb19d80f060df.png)

按照 gif 文件

重新启动国际空间站，它将工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T18:04:15.103

您不应该取消注释该`Default Value`位。它在 php.ini 中的外观应该是：

```
short_open_tag = On
;   Default Value: On
;   Development Value: On
;   Production Value: On 
```

没有有效分配的事实必须将其设置为关闭。

确保重新启动服务器以应用更改。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-28T03:29:05.803

php.ini 包含这个标签两次；一次在快速参考中，一次在语言选项中。除了令人困惑之外，语言选项副本设置为关闭，因此您对快速参考条目所做的任何更改都将被覆盖。

```
;;;;;;;;;;;;;;;;;;;
; Quick Reference ;
;;;;;;;;;;;;;;;;;;;
...
; short_open_tag
;   Default Value: On
;   Development Value: Off
;   Production Value: Off 
```

并且一旦进入

```
;;;;;;;;;;;;;;;;;;;;
; Language Options ;
;;;;;;;;;;;;;;;;;;;;
...
; Default Value: On
; Development Value: Off
; Production Value: Off
; http://php.net/short-open-tag
short_open_tag = Off 
```

我的建议是将快速参考副本注释掉并将语言选项副本更改为打开。

```
short_open_tag = On 
```

# regex - 密码正则表达式

> ID：14859617
> 
> 赞同：1
> 
> 时间：2013-02-13T17:40:28.257
> 
> 标签：regex, passwords

我需要使用以下标准生成密码正则表达式：

有效密码必须至少包含 8 个字符。它必须至少有一个大写字母、一个小写字母和一个非字母字符。

到目前为止，我创建了这个模式：

```
((?=.*\\d)(?=.*[a-z])(?=.*[A-Z]).{8,50}) 
```

但它仍然采用没有非字母字符的字符串。我怎样才能做到这一点？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T18:01:53.117

你可以试试这个

```
 |->match 8 or more chars
                                         -----
^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[^a-zA-Z]).{8,}$
 ------------ ---------- ---------------
      |           |              |->matches further only if there is atleast 1 non alphabetic char
      |           |->matches further only if there is atleast 1 a-z
      |->matches further only if there is atleast 1 A-Z 
```

# iphone - iOS 开发 - 视图如何实时反映应用内设置

> ID：14859624
> 
> 赞同：4
> 
> 时间：2013-02-13T17:40:39.523
> 
> 标签：iphone, ios, objective-c, xcode, cocoa-touch

我是 ios 开发的新手，并且制作了一个简单的应用程序。

它包含一个根视图控制器（一个表格视图由一个单元格列表组成，单击单元格会导致一个内容视图）和另一个应用内设置视图控制器包含几个简单的 UI 控件，如开关、滑块以保存应用程序相关设置。用户更改某些内容后，应用程序只需写入文件以进行持久化。

我的问题是，如何让其他视图控制器反映设置的变化？

我的想法是当应用程序加载时，我将所有设置初始化为字典并将其保存在内存中。发生更改时，除了写入文件之外，我还会更新该字典。每次我的内容视图显示时，我都会要求它始终加载该设置字典。

例如，如果用户在设置视图中更改字体大小，我希望内容视图控制器得到通知，并在下次向用户显示时立即更改字体大小。

我不知道我是否应该制作我的自定义委托/数据源。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T17:47:11.647

您应该使用[NSUserDefaults](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSUserDefaults_Class/Reference/Reference.html)来存储和检索应用程序设置。这正是它的用途，它会自动将设置保存到磁盘并稍后为您检索它们。

至于在设置更改时更新应用程序的其他部分，您有多种选择。在 iOS 上，一种相当简单的方法是在任何需要了解和响应设置更改的视图控制器中注册 NSUserDefaultsDidChangeNotification。然后，当收到该通知时，更新以反映新设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T18:17:40.300

听起来你正试图在另一个 ViewController 发生变化时向各种 ViewControllers 发送通知。你有两个选择：

1.  **多个 ViewControllers**：您可以使用 NSNotificationCenter 发布通知，并且任何正在观察该特定通知的 ViewController 都会收到通知。更多信息：[https ://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Notifications/Introduction/introNotifications.html#//apple_ref/doc/uid/10000043i](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Notifications/Introduction/introNotifications.html#//apple_ref/doc/uid/10000043i)
2.  **单个 ViewController**：如果只需要通知单个 ViewController，则使用委托来通知 ViewController。更多信息：[https ://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CocoaFundamentals/CommunicatingWithObjects/CommunicateWithObjects.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CocoaFundamentals/CommunicatingWithObjects/CommunicateWithObjects.html)

# java - 需要包含 Swarm.SwarmEnemy.SwarmEnemy1 的封闭实例

> ID：14859625
> 
> 赞同：0
> 
> 时间：2013-02-13T17:40:40.373
> 
> 标签：java

我有这样的代码：

```
public class Swarm {

    public SwarmEnemy getEnemy() {
        return new SwarmEnemy.SwarmEnemy1(SwarmEnemy.NORMAL_SWARM); // <-ERROR
    }

    private class SwarmEnemy extends BeamEnemy {

        public static final int NORMAL_SWARM = 0;

        public SwarmEnemy(int hp, int swarmType) {
            super(0, 0, hp, 0);
            switch (swarmType) {
                case 0:
                    System.out.println("constructor 1");
                    break;
            }
        }

        private class SwarmEnemy1 extends SwarmEnemy {

            public SwarmEnemy1(int swarmType) {
                super(25, swarmType);
            }
        }

        private class SwarmEnemy2 extends SwarmEnemy {

            public SwarmEnemy2(int swarmType) {
                super(25, swarmType);
            }
        }

    }
} 
```

我试图制作工厂装饰器。无论如何 - 这是我得到的错误：**需要一个包含 Swarm.SwarmEnemy.SwarmEnemy1 的封闭实例这是**什么意思，我应该如何重构我的代码才能工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T18:46:40.680

您需要将**SwarmEnemy1**和**SwarmEnemy2移到****SwarmEnemy**类之外。

```
public class Swarm {

    public SwarmEnemy getEnemy() {
        return new SwarmEnemy1(SwarmEnemy.NORMAL_SWARM); // <-ERROR
    }

    private class SwarmEnemy extends BeamEnemy {

        public static final int NORMAL_SWARM = 0;

        public SwarmEnemy(int hp, int swarmType) {
            super(0, 0, hp, 0);
            switch (swarmType) {
                case 0:
                    System.out.println("constructor 1");
                    break;
            }
        }
    }

    private class SwarmEnemy1 extends SwarmEnemy {

        public SwarmEnemy1(int swarmType) {
            super(25, swarmType);
        }
    }

    private class SwarmEnemy2 extends SwarmEnemy {

        public SwarmEnemy2(int swarmType) {
            super(25, swarmType);
        }
    }
} 
```

# c# - 具有自定义数据库的自定义成员资格提供程序

> ID：14859629
> 
> 赞同：0
> 
> 时间：2013-02-13T17:41:04.140
> 
> 标签：c#, asp.net, asp.net-membership

如何创建使用我选择的数据库的会员提供者？

*例如数据库应该有这样的注册表。*

用户（ID、用户名、密码SHA1）

角色（ID、姓名）

# java - 带大括号的 Java 负 bigdecimal 值

> ID：14859631
> 
> 赞同：1
> 
> 时间：2013-02-13T17:41:06.437
> 
> 标签：java

我有一个字符串，我试图将其解析为 BigDecimal。我正在使用以下正则表达式来去除除 -,.()$ 之外的所有非货币符号。一旦它被剥离，我就会尝试用剩余的值创建一个 BigDecimal。当括号中出现负值时，问题就开始了。有人对如何修复此实例有任何建议吗？

```
(1000.00) fails 
```

我假设我必须以某种方式将括号转换为负号。

代码示例。

```
public BigDecimal parseClient(Field field, String clientValue, String message) throws ValidationException {
    if (clientValue == null) {
        return null;
    }

    try {
        clientValue = clientValue.replaceAll( "[^\\d\\-\\.\\(\\)]", "" );
        return new BigDecimal(clientValue.toString());
    } catch (NumberFormatException ex) {
        throw new ValidationException(message);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T17:50:21.410

您将需要自己检测`(`和`)`字符，然后将它们剥离，从字符串的其余部分创建一个 BigDecimal，然后将其取反。

```
if (clientValue.startsWith('(') && clientValue.endsWith(')'))
{
   return new BigDecimal(clientValue.substring(1, clientValue.length() - 1)).negate();
}
else
{
   return new BigDecimal(clientValue);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T17:45:57.903

是什么让您认为括号被正确解释`BigDecimal`？[根据文档](http://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html#BigDecimal%28java.lang.String%29)`(1000.00)`输入不正确。您必须使用符号 ( )。JavaDoc 中严格定义了支持的格式。通常，它是可选符号 ( or )，后跟数字、点 ( ) 和指数。`-``-1000.00``+``-``.`

例如，这是有效的输入：`-1.1e-10`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T19:00:36.487

[DecimalFormat](http://docs.oracle.com/javase/7/docs/api/java/text/DecimalFormat.html)是更适合这项工作的工具：

```
DecimalFormat myFormatter = new DecimalFormat("¤#,##0.00;(¤#,##0.00)");
myFormatter.setParseBigDecimal(true);
BigDecimal result = (BigDecimal) myFormatter.parse("(1000.00)");
System.out.println(result); // -1000.00 for Locale.US
System.out.println(myFormatter.parse("($123,456,789.12)")); // -123456789.12 
```

如您所见，它不仅会处理负面模式，还会处理货币符号、小数和分组分隔符、本地化问题等。

查看[Java 教程：自定义格式](http://docs.oracle.com/javase/tutorial/i18n/format/decimalFormat.html)以获取更多信息。

# c - 在 C 中重新创建 STDIN 重定向

> ID：14859640
> 
> 赞同：1
> 
> 时间：2013-02-13T17:41:38.353
> 
> 标签：c, unix, file-io

我正在尝试创建一个重定向 IO 的 C 程序。我已经输出完成了小菜一碟，但输入似乎更难。也许我只是不太了解这一切，但我正在做这样的事情：

```
 int redFile;

  fflush(stdin);

  myio = dup(0);

  redFile = open(rhs, O_WRONLY, 0644); 

  dup2(redFile, 0);
  close(redFile);

  // Any scanf("%s", &buf) here should read from my redFile (correct?) into some buffer, buf[64] or something

   fflush(stdin);
   dup2(myio, 0);
   close(myio); 
```

所以现在我有一些 buf[64] ，其中包含来自文件 redFile 的字符串，但是如何将其作为 char * lhs 指定的命令的输入（在程序前面设置）。我的整个程序使用 execve() 基本上创建了一个虚拟外壳。

我需要能够处理一些类似的事情：

输入.txt：

```
test1
test2
test3

tac < input.txt > output.txt 
```

输出.txt

```
test3
test2
test1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T18:21:16.987

如果您希望缓冲区的内容成为进程的输入，则需要将该数据写入管道。基本上，您需要创建一个管道然后分叉。子进程将复制其输入以从管道中读取`dup2( pfd[ 0 ], STDIN_FILENO )`，然后执行，而父进程将数据写入管道的另一端。

# c++ - 指向可能存在或不存在的对象的指针向量

> ID：14859643
> 
> 赞同：3
> 
> 时间：2013-02-13T17:41:43.703
> 
> 标签：c++, pointers, vector

问题是：我正在使用 SFML 制作游戏，我想要一个 sf::Drawable* 的向量，所以我可以简单地做 windowManager.add(randomGameSprite)，但我遇到的问题是我希望能够拥有它，这样我就可以删除 randomGameSprite 而无需手动从窗口中删除指针。有没有办法让它在尝试绘制之前检查对象是否存在？

我正在使用 C++11，但是从我的尝试来看，智能指针在这方面并没有太大帮助。我尝试使用 std::shared_ptr，但它使可绘制对象保持活力。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-13T17:43:38.893

你可以存储[`weak_ptr<T>`](http://en.cppreference.com/w/cpp/memory/weak_ptr)在你的向量中。弱指针不会使对象保持活动状态：如果指向对象的所有共享指针都超出范围，则弱指针将自动过期。

# php - Jquery 动画未在移动设备上初始化

> ID：14859651
> 
> 赞同：0
> 
> 时间：2013-02-13T17:42:00.533
> 
> 标签：php, javascript, jquery, mobile, page-refresh

我正在使用 jQuery 悬停功能更改类的不透明度。注意：我没有使用

```
<script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js">
</script> 
```

这是我的代码：

```
<script type="text/javascript">
    $(document).ready(function(){
        $(".thumbnail_image_related_project .transparent_font").css({'opacity' : '0'});
        $(".thumbnail_image_related_project").hover(
            function(){
                $(this).children(".transparent_font").stop().animate({'opacity' : '0.7'}, 300); 
             },
            function(){
                $(this).children(".transparent_font").stop().animate({'opacity' : '0'}, 300); 
           }
        );
    });
</script> 
```

此代码在笔记本电脑上完美运行，但在智能手机上却不行。问题：当我单击元素时，动画正在运行，我将进入下一页。但是，当我返回上一页时，元素的不透明度并未初始化。有人知道为什么吗？

这是我的php代码：

```
<a href="http://192.168.0.11/next-page/" title="blabla">
   <div class="thumbnail_image_related_project">
      <h2 class="transparent_font">Text and the white background</h2>
      <div id="image">
         <img width="300" height="173" src="http://192.168.0.11/blabla.jpg"/>
      </div>
   </div>
</a> 
```

这是我的CSS：

```
 .thumbnail_image_related_project .transparent_font{
    line-height: 1.25em;
    position: absolute;
    top: 0;
    left: 0;
    color: black;
    background-color:white;
    width: 100%;
    height: 100%;
    opacity:0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T17:44:19.513

您使用的是 jQuery 还是 jQuery Mobile？我问的原因是在移动设备上，它可能是一个 touchstart 事件而不是悬停。jQuery Mobile 可能会将 touchstart 转换为悬停。

看看这个：[jQuery hover event on tag on mobile devices](https://stackoverflow.com/questions/9696533/jquery-hover-event-on-a-tag-on-mobile-devices)。

# html - 是否有支持 CSS 旋转但不支持画布的浏览器？

> ID：14859654
> 
> 赞同：0
> 
> 时间：2013-02-13T17:42:17.383
> 
> 标签：html, canvas, html5-canvas

我使用 Canvas 和 Rafaël 库构建了一些东西，我需要旋转元素（路径或图像）。您可以拖动右下角的圆圈，手臂将适当伸展。

[http://wstaw.org/m/2013/02/13/Auswahl_001_1.png](http://wstaw.org/m/2013/02/13/Auswahl_001_1.png)

它应该适用于不支持 Canvas 的旧版浏览器，因此出现了 CSS 旋转。`position: absolute` `img`使用元素、jQuery 和 CSS 旋转作为后备来重建这个 Canvas 东西是否有意义？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T17:47:50.640

您可以在此处查看支持状态：

[http://caniuse.com/#search=transform](http://caniuse.com/#search=transform)

[http://caniuse.com/#search=canvas](http://caniuse.com/#search=canvas)

很快，看起来*画布*比旋转所需的*CSS3 转换更受支持。*所以我认为你的想法可能行不通。

# c# - C#“内存不足异常”返回变量访问器

> ID：14859656
> 
> 赞同：1
> 
> 时间：2013-02-13T17:42:21.970
> 
> 标签：c#, bitmap, garbage-collection, computer-vision

当我尝试新建一个位图并通过“get”访问器返回它时，我遇到了内存不足异常。位图大小为 640x480，深度为 Int32。

我怀疑 C# 垃圾收集器无法删除这些旧位图，因为它们在访问器中返回到我的变量。我有超过 2GB 的可用空间，所以我不会想象这个“小”图像会占用太多内存。不幸的是，由于线程锁定问题，我不得不更新位图（[在线程之间锁定图像时遇到](https://stackoverflow.com/questions/14596429/trouble-with-locking-an-image-between-threads)问题）代码如下：

```
public Bitmap LiveFrame { get { return GetFrame(500); } } 
```

......

```
private Bitmap GetFrame(int timeout)
{
   Bitmap ret = null;
   //CLEyeCameraGetFrame places image data into this._PrivateBitmap
   bool success = CLEyeCameraGetFrame(_Camera, _PtrBmpPixels, timeout);  

   if(success) 
     ret = new Bitmap(this._PrivateBitmap);
    return ret;
} 
```

关于非托管代码的注意事项：CLEyeCameraGetFrame 位于非托管 DLL 中。我在代码前面使用 Marshal.AllocHGlobal 分配 _PtrBmpPixels 并且在关闭应用程序时释放之前不要触摸它。_PtrBmpPixels 通过其接受 IntPtr 参数“scan0”的构造函数用于创建位图 _PrivateBitmap。因此，每当通过 CLEyeCameraGetFrame 更新 _PtrBmpPixels 时，也会更新 _PrivateBitmap。

我试图通过在重用之前处理 PcitureBox 位图来解决这个问题，但这破坏了 PictureBox 的显示。我有两个线程更新两个不同的图片框/图像框：

```
lock (_CameraLocker)
{
  if (_VideoPlaying)
  {
    try{
         if (pbLiveFeed.Image != null)
            pbLiveFeed.Image.Dispose();

         pbLiveFeed.Image = _Camera.LiveFrame;
         pbLiveFeed.Invalidate();
       }catch (Exception ex) { }
} 
```

……

```
lock (_CameraLocker)
{
   try{
        if (ibProcessed.Image != null)
          ibProcessed.Image.Dispose();
        procImage = new Image<Bgra, Int32>(_Camera.LiveFrame);
        procImage.Draw(new Rectangle(10, 20, 20, 15), new Bgra(1.0, 1.0, 1.0, 1.0), 5);

        ibProcessed.Image = procImage;
      }catch (Exception ex) { }
} 
```

垃圾收集会是造成这种情况的原因吗？从 get 访问器返回新对象是否不安全？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T18:58:13.933

您问题中唯一真正的线索是*缺少*什么。您从未说过“并且我确保在使用后处理位图”。这是您在 .NET 编程中很容易忽略的内容，但在使用位图时会引起您的注意。

Bitmap 类是一个非常小的包装类，它围绕由 GDI+ 创建的*非托管资源。*实际的位图像素存储在非托管内存中。这就是该类具有 Dispose() 方法的原因，该方法释放了非托管内存分配。垃圾收集器几乎无法帮助您自动释放这些内存，Bitmap 对象太小而无法经常引发垃圾收集，以跟上程序消耗非托管内存的速度。结果是一个oom-kaboom。

您需要查看其余代码并了解 LiveFrame 属性是如何被使用的。并确保返回的位图得到处理。例如，如果您将其分配给 PictureBox.Image 属性，那么您必须在分配之前处理旧图像。

# android - 静态链接 OpenCV 2.4.3.2

> ID：14859659
> 
> 赞同：0
> 
> 时间：2013-02-13T17:42:27.277
> 
> 标签：android, opencv

我想将 OpenCV(2.4.3.2) 静态链接到我的项目。现在我的 Android.mk 看起来像这样

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)
OPENCV_CAMERA_MODULES:=on
OPENCV_INSTALL_MODULES:=on

include /Users/jamiematthews/Documents/Android-Projects/OpenCV-2.4.3-android-sdk/sdk/native/jni/OpenCV.mk

LOCAL_MODULE    := jni_part
LOCAL_SRC_FILES := jni_part.cpp
LOCAL_LDLIBS +=  -llog -ldl
LOCAL_LDLIBS += -L$(SYSROOT)/usr/lib -llog 
include $(BUILD_SHARED_LIBRARY) 
```

这会引发错误：

```
Android NDK: ERROR:/Users/jamiematthews/Documents/workspace/AuthentiGuard/jni/Android.mk:on: LOCAL_SRC_FILES points to a missing file    
/Users/jamiematthews/Documents/android-ndk-r8d/build/core/prebuilt-library.mk:43: *** Android NDK: Aborting    .  Stop.
Android NDK: Check that /Users/jamiematthews/Documents/Android-Projects/OpenCV-2.4.3-android-sdk/sdk/native/jni/../libs/mips/libon.so exists  or that its path is correct 
```

有人知道“LOCAL_SRC_FILES 指向丢失的文件”是什么意思吗？

PS如果我删除这些行

```
OPENCV_CAMERA_MODULES:=on
OPENCV_INSTALL_MODULES:=on 
```

它编译得很好，但是我不能静态链接

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T20:47:53.223

找到了解决方案。信不信由你，这是 Application.mk 的问题，而不是 Android.mk。我已经设置

```
APP_ABI := all 
```

以前，甚至没有考虑到它会影响这个静态的构建过程。我最终将其更改为

```
APP_ABI := armeabi-v7a 
```

现在，一切正常。请注意，我最终不需要 OPENCV_CAMERA_MODULES:=on，我相信只有当您从 JNI 调用相机时，我才不需要

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T18:07:51.727

LOCAL_SRC_FILES 显示您的本机代码所在的文件。如果您使用本机 OpenCV 代码，则必须在此处添加 cpp 文件的名称。如果您没有本机部件，则应将 OpenCV 库添加到项目的 libs 文件夹中。（在静态初始化的情况下）。请查看[此页面](http://docs.opencv.org/doc/tutorials/introduction/android_binary_package/dev_with_OCV_on_Android.html#application-development-with-static-initialization)了解详情。

# c++ - 在 gmp 库中调用 mpz_import 期间的段错误

> ID：14859671
> 
> 赞同：1
> 
> 时间：2013-02-13T17:43:12.363
> 
> 标签：c++, gmp

我想使用[mpz_import](http://gmplib.org/manual/Integer-Import-and-Export.html#Integer-Import-and-Export)方法将 64 位整数加载到 gmp 中，我知道我可以通过将数字流式传输到字符串然后使用分配运算符来实现这一点，但这肯定是较慢且次优的。

这段代码在我运行 OSX 的 64 位 MacBook 上运行良好，但是在运行 Raspbian、32 位 Ubuntu Server 和 64 位 Linux Mint 的树莓派上因分段错误而失败，在 mpz_import 行上都失败了。

这是使用 gcc 4.7 编译的代码`g++ -std=c++11 -lgmp -lgmpxx main.cpp`

```
#include <iostream>
#include <cstdint>
#include <gmp.h>
#include <gmpxx.h>

using namespace std;

int main()
{
    mpz_t a;
    int64_t b = 4;
    mpz_import(a, 1, 1, sizeof(b), 0, 0, &b); //segfault on this line
    mpz_class c(a);
    cout << c << endl;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T18:47:41.737

在 mpz_import 中使用之前需要 mpz_init a。从[文档](http://gmplib.org/manual/Integer-Import-and-Export.html#Integer-Import-and-Export)中：

```
unsigned long  a[20];
/* Initialize z and a */
mpz_import (z, 20, 1, sizeof(a[0]), 0, 0, a); 
```

# javascript - 谷歌地图显示了一些不当行为

> ID：14859672
> 
> 赞同：0
> 
> 时间：2013-02-13T17:43:13.563
> 
> 标签：javascript, google-maps, google-maps-markers

我设法实现了显示多个标记的 Google Maps Api，但 Maps Div 总是显示一些不当行为，如下图所示（阴影不正确，“vienna”标题下有一个波浪（？！），并且左侧的控制按钮丢失）。

![谷歌地图不当行为](../Images/70ddbb1ebfcaaf929065305909671ce1.png)

我在 mac 上使用 chrome，已经重新启动了我的 mac 几次，它可以在 firefox 和 safari 上重现。

我的代码如下所示：

```
<head>
<script type="text/javascript" src="https://maps.google.com/maps/api/js?v=3&sensor=false"></script>
</head>

<div id="map" style="width:500px;height:500px;"></div>

<script type="text/javascript"> 
                    var locations = [
                      ['Vienna',48.2144203,16.383573,1]
                      ['Test',48.53234,16.32367,2]
                    ];

                    var map = new google.maps.Map(document.getElementById('map'), {
                      zoom: 13,
                      center: new google.maps.LatLng(48.2144203,16.383573),
                      mapTypeId: google.maps.MapTypeId.ROADMAP
                    });

                    var infowindow = new google.maps.InfoWindow();

                    var marker, i;

                    for (i = 0; i < locations.length; i++) {  
                      marker = new google.maps.Marker({
                        position: new google.maps.LatLng(locations[i][1], locations[i][2]),
                        map: map
                      });

                      google.maps.event.addListener(marker, 'click', (function(marker, i) {
                        return function() {
                          infowindow.setContent(locations[i][0]);
                          infowindow.open(map, marker);
                        }
                      })(marker, i));
                    }
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-11T14:27:15.090

这个问题通常来自引导程序。只需使用 max-width:none 在您的 gmaps 页面中添加内联样式；它将被修复。

```
<style>
       img {max-width: none !important;}
</style> 
```

# asp.net-mvc - 评估 AppFabric 并遇到一些新手问题，例如为什么设置 AppFabric 需要数据库或 xml？

> ID：14859675
> 
> 赞同：2
> 
> 时间：2013-02-13T17:43:27.557
> 
> 标签：asp.net-mvc, caching, appfabric, distributed-caching

我是 AppFabric 的新手，我正在评估用于生产环境的分布式缓存解决方案，我在使用 Asp.net MVC 和 WebApi 的 Microsoft 商店，我们没有使用 Windows Azure。

在我的本地计算机上设置 AppFabric 时，有一个步骤是创建数据库或使用 xml，我想了解这里的概念。AppFabri 是否依赖于数据源（db 或 xml 文件）来持久化？如果是这样，这不是潜在的瓶颈吗？

此外，现在在生产服务器上使用 AppFabric 的任何人都可以评论他们的使用体验吗？有什么陷阱或陷阱吗？

谢谢，真的很感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T20:01:11.397

在生产环境中部署 AppFabric 后，我可以向您介绍一年多前的经验。从那以后我就没有跟上它，因为我的经验不是很好。也许他们已经解决了我们遇到的一些问题。

创建数据库或 XML 的步骤只是存储集群的配置信息。

我的笔记（记住这是一年前的内容，所以也许事情已经改变了）：

1.  从 C# 缓存对象时，该对象被转换为 XML 并存储。这是一种冗长的格式，并且使存储/获取速度比应有的速度慢一些。我宁愿将对象序列化为二进制格式 - 或压缩 - 或者只是未压缩的 XML 以外的任何其他格式。我们实际上修改了我们的对象，使其在缓存时具有更短的属性名称，因为它们变成了 XML。这导致一些对象从 1MB 减少到几百 KB。

2.  AppFabric 是通过 Windows 中的 NetTcp 协议进行通信的，这让我们有些伤心。我们有一些没有安装 Windows 服务 (NetTcp) 的服务器，这让人很头疼。我们无法弄清楚为什么 AppFabric 在一台机器上工作而不是在另一台机器上工作。

3.  在集群中的多台机器上分配负载似乎确实做得很好。它似乎也可以快速检索东西，并且过期逻辑总是运行良好。

4.  当时它只是一个相当不成熟的产品。我们在任何地方都找不到任何支持。我记得在与微软通电话时，试图追查我们遇到的一些问题，每次对方都会说：“AppFabric？那是什么？” 当时它周围的社区是不存在的。（这对我们来说*真的很*痛苦。）

如果我必须为需要分布式缓存的 Windows 应用程序，我将不得不重新评估 AppFabric。我的第一次经历并不是最棒的。现在我会按照 Redis、Couchbase、Memcached 的顺序来考虑。

# debugging - 高级 .NET 调试

> ID：14859679
> 
> 赞同：4
> 
> 时间：2013-02-13T17:43:41.193
> 
> 标签：debugging, windbg, sos, memory-dump

我正在阅读 Advanced .NET Debugging 这本书，我非常喜欢它。但是我对这些例子有一些问题。如果有人读过它帮助我，我将不胜感激。

我有两个问题：

1.  与构建示例的 .NET 框架的版本是什么？我无法在 windbg(x86) 下运行它们并且它们在 windbg(x64) 下加载，所以我假设它是 64 位版本的框架。但是哪个框架？2.0、3、3.5、4？

2.  在查看第 2 章中描述的类型句柄（方法表）时，我得到了不同的结果（我的结果和书中显示的内容如下所示）。当然，我不是在谈论地址不同。例如，当我在方法表上 dd 时，我看到 Flags2 字段、NumMethods 字段的不同值。我不知道为什么。在第 56 页作者说对象的大小是 0x14（在我的机器上相同），因为对象有 4 个整数。但是 02TypeSample.cs 的列表只显示了 3 个整数，x、y、z。在我的机器上，dd 在示例中显示 7 时显示 4 个方法。书还说编译器生成了默认 ctor。

    *“首先要记住的是，即使我们没有明确定义任何构造函数，C# 编译器也会自动为我们生成一个默认构造函数。*

    在列出时，您可以看到 TypeSample 的 ctor 将 3 个整数作为参数。要么是我出了问题，要么是书，要么是例子。它是什么？;)

```
Method table from the book:
0:000>dd 002930b0
002930b0 **00040000** 00000014 **00070402** 00000004
002930c0 790fd0f0 00292c3c 002930f8 00291244
002930d0 00000000 00000000 79371278 7936b3b0
002930e0 7936b3d0 793624d0 003400c8 0029c015
002930f0 0034007000000000 00000080 00000000
00293100 00000000 00000000 00000000 00000000
00293110 00000000 00000000 00000000 00000000
00293120 00000000 00000000 00000000 00000000

My method table:
0:000> dd 00223420 
00223420  **00000000** 00000014 **00040011** 00000004
00223430  68b70944 00222fe4 00223458 00221390
00223440  00000000 00000000 68ac6a90 68ac6ab0
00223450  68ac6b20 68b37700 00000080 00000000
00223460  00000000 00000000 00000000 00000000
00223470  00000000 00000000 00000000 00000000
00223480  00000000 00000000 00000000 00000000
00223490  00000000 00000000 00000000 00000000

it shows 4 methods when !dumpmt shows 7

0:000> !dumpmt -md 00223420 
EEClass: 00221390
Module: 00222fe4
Name: Advanced.NET.Debugging.Chapter2.TypeSample
mdToken: 02000002  (F:\Development\Advanced .NET Debugging\adndsrc\Chapter2\TypeSample\TypeSample\bin\Debug\TypeSample.exe)
BaseSize: 0x14
ComponentSize: 0x0
Number of IFaces in IFaceMap: 0
Slots in VTable: 7
--------------------------------------
MethodDesc Table
   Entry MethodDesc      JIT Name
68ac6a90   6894494c   PreJIT System.Object.ToString()
68ac6ab0   68944954   PreJIT System.Object.Equals(System.Object)
68ac6b20   68944984   PreJIT System.Object.GetHashCode()
68b37700   689449a8   PreJIT System.Object.Finalize()
003d00d8   00223398      JIT Advanced.NET.Debugging.Chapter2.TypeSample..ctor(Int32, Int32, Int32)
0022c015   002233a4     NONE Advanced.NET.Debugging.Chapter2.TypeSample.AddCoordinates()
003d0070   002233b0      JIT Advanced.NET.Debugging.Chapter2.TypeSample.Main(System.String[]) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-12T05:52:02.370

要构建 X86 程序集，您可以修改构建 XML。提供的 XML 似乎在 64 位窗口上将程序集构建为 X64。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T04:36:50.350

书的背面说它以 .NET CLR 4.0 为目标。但是，前言的示例代码部分指出所有代码都是使用 C# 和 .NET 2.0 编写的。最后有一章是关于 .NET 4.0 的。

上面命令的输出`!dumpmt`显然是 32 位 (x86)，因为 Entry 列是一个指针。

至于你的第二个问题。您能否指定您所指的示例。

# sql - 使用 MERGE 同步 2 个表

> ID：14859683
> 
> 赞同：2
> 
> 时间：2013-02-13T17:43:43.830
> 
> 标签：sql, sql-server, merge

我的任务是同步 2 个表（两者都是相同的）。它们每个有 60 列。表 A 是最初将被填充的主表。我需要创建一个存储过程（完成），它将合并这两个表并在调用时使用相同的确切数据（更新、插入、删除）填充两者。我将如何使用 SQL 中的 MERGE 函数来实现这一点？我查看了 MSDN 文档和 technet 上的类似文档，但我对入门感到很困惑。我是否需要指定需要合并的每个字段？还是我缺少一个简单的调用来执行此操作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-13T17:57:37.993

这是 MERGE 语句的简单示例的链接：

[http://www.simple-talk.com/sql/learn-sql-server/the-merge-statement-in-sql-server-2008/](http://www.simple-talk.com/sql/learn-sql-server/the-merge-statement-in-sql-server-2008/)

基本语法如下：

```
MERGE table1
USING table2
ON table1.id = table2.id
WHEN MATCHED THEN
--Do an update here
WHEN NOT MATCHED BY TARGET THEN
--Do an insert here (or a delete)
; 
```

你也可以使用`WHEN NOT MATCHED BY SOURCE`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-05-16T10:32:21.423

超过 60 列是一个很大的数字！当我需要同步 2 个相同的表时，我会：

```
;WITH tbl_to_synch as (
    -- Prepare table to update,
    Select *,chk = CHECKSUM(*) from [dbo].[tableA]
)
MERGE tbl_to_synch as [Target]
USING (Select *,chk = CHECKSUM(*) from [dbo].[tableB]) as [source]
ON [Target].key = [source].key
WHEN MATCHED AND [Target].chk <> [source].chk THEN 
-- UPDATE ONLY row that is changed
UPDATE
    SET 
        column01 = [source].[column01]
        ,column02 = [source].[column01]
        -- .... 
        ,column59 = [source].[column59]
        ,column60 = [source].[column59]

WHEN NOT MATCHED BY TARGET THEN
    insert (column01, column02, ...,column59,column60)
    values (column01, column02, ...,column59,column60)
WHEN NOT MATCHED BY SOURCE THEN DELETE
-- Show what is changed
OUTPUT $action, ISNULL(INSERTED.key,DELETED.key); 
```

# c# - 创建 C# 泛型类的实例

> ID：14859686
> 
> 赞同：5
> 
> 时间：2013-02-13T17:43:51.343
> 
> 标签：c#, visual-studio-2010, generics

> 标题可能措辞不正确，所以请告诉我正确的术语。

我有一个名为**DAL_Base**的基类，它接受泛型类型`T`。该类型`T`来自我们业务对象层中的许多类，每个类都有一个对应的数据访问层。

**DAL_Base**接受允许我指定存储过程名称和参数的参数，这些参数用于调用方法来选择、插入和更新记录。

我目前似乎坚持的是，我似乎无法找到一种方法来实例化我的**DAL_Base**的新实例，该实例需要初始化各种变量。

部分清单：

```
public class DAL_Base<T> where T : IDisposable, new() {

  public DAL_Base<T>() { // <= ERROR HERE
    // initialize items that will be used in all derived classes
  }

} 
```

VS2010 给我的错误是：

> 类、结构或接口成员声明中的标记“（”无效

我尝试过创建不带括号的构造函数，但这也没有用。

当我搜索时，我似乎能够返回的只是创建我的泛型类型实例的方法`T`。这很容易找到怎么做！

MSDN 的[An Introduction to C# Generics](http://msdn.microsoft.com/en-us/library/ms379564%28v=vs.80%29.aspx)似乎也没有涵盖这一点。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-13T17:45:56.613

构造函数上不应有尖括号 ( `<`and `>`)。

```
public class DAL_Base<T> where T : IDisposable, new()
{
    public DAL_Base()
    {
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-13T17:46:01.710

您的构造函数中不应包含泛型类型参数：

```
public class DAL_Base<T> where T : IDisposable, new() {

  public DAL_Base() { // <= this should work
    // initialize items that will be used in all derived classes
  }

} 
```

由于您已经使用类型参数修饰了类本身，因此该类型在构造函数中可用：

```
 public DAL_Base() {
     var listOfObjects = new List<T>();
  } 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-13T17:46:34.867

`public DAL_Base() { // <= NO ERROR HERE :)`

类是通用的，构造函数不是。您试图向构造函数添加一个额外的泛型参数，但它不能拥有。

# javascript - Javascript 必须单击两次按钮才能加载和运行动态脚本

> ID：14859688
> 
> 赞同：0
> 
> 时间：2013-02-13T17:44:07.587
> 
> 标签：javascript, button, dynamic, loading

我第一次点击按钮，什么都没有。第二次点击代码运行。我在 chrome 或 IE 中运行页面 test.html，没关系。如何获取加载脚本中的代码以运行第一次单击？我是一个js菜鸟。

```
/* test.html */
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>start</title>
  <script type="text/javascript" src="t01.js">
</script>
</head>
<body>
   <input type="text" id="txt1" />
        <input type="button" id="submit" onclick="getSent(document.getElementById('txt1').value)"
            value=" OK " />
    <div id="reply">reply</div>
</body>
</html>

/* t01.js */
window.onload = function () {
}
function getSent(str) {
    while (1) {

        load_script("relg.js");
        dof();

        reply = "Reached end of loop.";
        break;
    } // end main loop
    document.getElementById("reply").innerHTML = reply;

}
function load_script(filename){
  var fileref=document.createElement('script');
  fileref.setAttribute("type","text/javascript");
  fileref.setAttribute("src", filename);
  if (typeof fileref!="undefined")
    document.getElementsByTagName("head")[0].appendChild(fileref);
}

/* relg.js */
function dof() {
    alert("b");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T18:03:25.723

脚本需要一些时间来加载，试试这样的：

```
function getSent(str) {
    load_script("relg.js");
    return; 
}
function load_script(filename){
    var fileref=document.createElement('script');
    fileref.setAttribute("type","text/javascript");
    fileref.onload = function () {
        dof();
        return;
    }
    fileref.setAttribute("src", filename);
    document.getElementsByTagName("head")[0].appendChild(fileref);
} 
```

另一种选择是创建一个 IIFE（立即调用函数表达式）到`regl.js`，而不是`dof()`在主脚本中调用：

```
(function dof() {
    alert("b");
}()); 
```

现在`dof()`将在解析到页面后立即执行。

# haskell - 带有内置 epsilon 的封装浮点类型

> ID：14859690
> 
> 赞同：3
> 
> 时间：2013-02-13T17:44:10.393
> 
> 标签：haskell, floating-point

我正在做一些几何计算，这需要我比较基于双精度的坐标。我通常通过包含一些人工 epsilon 来处理这种情况下的浮点不准确性。这很常见，并且有很多关于此主题的信息。

[http://floating-point-gui.de/errors/comparison/](http://floating-point-gui.de/errors/comparison/)

[http://www.cygnus-software.com/papers/comparingfloats/comparingfloats.htm](http://www.cygnus-software.com/papers/comparingfloats/comparingfloats.htm)

我的想法是将 Double 包装在一个新类型中，并使用 epsilon 实现 Eq 和 Ord。这似乎是一个如此明显的概念，要么它已经完成并且必须在 Hackage 的库中，要么我还没有想到这个概念明显有问题。所以我的问题是，有谁知道包含类似类型的现有模块（我快速搜索并没有看到任何内容）？或者，这是一个虚假的想法？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T17:55:20.490

这不是一个虚假的想法。一种方法是创建允许您编写浮点表达式的类型，这些表达式为了进行评估需要一段配置数据 - 即 epsilon 的值。这很像 Reader monad。

解决这个问题的一个很好的方法是：

[http://okmij.org/ftp/Haskell/types.html#Prepose](http://okmij.org/ftp/Haskell/types.html#Prepose)

并且可以在反射包中的 hackage 上找到 GHC 的有效实现。

# c# - 使用任务执行长时间运行的过程，如果有异常则显示异常

> ID：14859691
> 
> 赞同：4
> 
> 时间：2013-02-13T17:44:17.553
> 
> 标签：c#, wpf, .net-4.0, task-parallel-library

我正在测试在我的应用程序中使用任务。现在，我已经完成了休耕：

```
var task = Task.Factory.StartNew(() => {
   // long running process
   throw new Exception("test"); // throwing TestException
});
task.ContinueWith(x => MyErrorHandler(task.Exception), TaskContinuationOptions.OnlyOnFaulted);

void MyErrorHandler(Exception error) {
   MessageBox.Show(error.Message);
} 
```

这个想法是，将执行长时间运行的进程，并且用户可以在没有任何 UI 阻塞的情况下继续工作。如果有问题（异常），它将在长时间运行的过程完成后显示（在正常情况下，不会有异常）

这是我使用它的正确方式还是我必须以另一种方式来做？有什么问题，我可以通过这种方式得到，我现在看不到吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-13T17:46:34.027

当您明确检查时，这将起作用，`Task.Exception`这将防止异常未被观察到。

我会在这里提出几个建议。

首先，如果这确实是一项长期运行的任务，您可能需要指定：

```
var task = Task.Factory.StartNew(() => {
   // long running process
   throw new Exception("test"); // throwing TestException
}, TaskCreationOptions.LongRunning); 
```

其次，您不需要关闭`task`：

```
// use x.Exception, since x is the task
task.ContinueWith(x => MyErrorHandler(x.Exception), TaskContinuationOptions.OnlyOnFaulted); 
```

您可能还希望在主线程上运行它，特别是如果您决定要使用更精细的东西（在您的 UI 中）进行报告：

```
// This will work if MyErrorHandler uses a UI control, since it'll marshal back to the current synchronization context
task.ContinueWith(x => MyErrorHandler(x.Exception), 
    CancellationToken.None,
    TaskContinuationOptions.OnlyOnFaulted,
    TaskScheduler.FromCurrentSynchronizationContext()); 
```

（仅当您要在错误处理程序中使用 UI 控件等时才需要这样做。）

另外 - 如果您使用 .NET 4.5 或 .NET 4 的异步目标包，您可以通过使用新的`async`/`await`支持来简化此操作。如果将方法标记为`async`，则可以执行以下操作：

```
try
{
    await Task.Factory.StartNew(() => {
           // long running process
           throw new Exception("test"); // throwing TestException
        }, TaskCreationOptions.LongRunning);
}
catch(Exception error)
{
      MyErrorHandler(error);
} 
```

# javascript - 将 json 加载到选择标签 +js

> ID：14859695
> 
> 赞同：0
> 
> 时间：2013-02-13T17:44:28.243
> 
> 标签：javascript, json

如何将此 json 填充到选择标记中

```
var data = {
"266": "Andy Employee II",
"26": "Annette Oliveira",
"214": "Edwina Umeyor",
"39": "Eva Britton",
"193": "Leigh Otterson",
"68": "Louise Edelston",
"71": "Margaret Williams",
"97": "Simon Harris"
}; 
```

[在线编辑链接在这里。](http://jsfiddle.net/isaacrajaei/5TLbd/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T18:20:44.823

有很多方法可以做到这一点：您可以构建一个 HTML 字符串并将其填充到 DOM 中，您可以创建标签并逐个`select`附加标签，或者您可以使用众多客户端框架之一`option`，其中大多数有办法通过模板来做到这一点。

只是为了好玩，这里是你如何在纯 JS 中做到这一点，没有框架：

```
var data = {
  "266": "Andy Employee II",
  "26": "Annette Oliveira",
  "214": "Edwina Umeyor",
  "39": "Eva Britton",
  "193": "Leigh Otterson",
  "68": "Louise Edelston",
  "71": "Margaret Williams",
  "97": "Simon Harris"
};

// Grab a reference to the element to which 
// which we want to append the select tag, in 
// this case the body.  
var body = document.getElementsByTagName('body')[0];

// Create the select tag
var select = document.createElement('select');

var key, option, text;

// Loop over our data, creating an option tag
// for each and appending it to the select tag.
for (key in data) {
  option = document.createElement('option');
  option.value = key;
  text = document.createTextNode(data[key]);
  option.appendChild(text);
  select.appendChild(option);    
}

// Insert the select tag into the DOM.
body.appendChild(select); 
```

[这是一个在行动中的小提琴](http://jsfiddle.net/2WHEt/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T18:05:46.017

您应该能够使用 jquery.each 遍历 JSON 数组。

```
jQuery.each(json_data, function(index, value) {
    $("#myselect").append("<option value='" + index + "'>" + value + "</option>");
}); 
```

编辑：根据下面的评论——你必须先用 $.parseJSON() 解析 JSON 结构，然后在结果值上运行上面的代码（除非你用 $.getJSON 检索原始数据，在这种情况下它将收到时已经解析。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T12:21:32.660

在这种情况下，我有来自 Ajax 回调的 Json。所以你必须确保 Jsone 不是字符串。

```
data = jQuery.parseJSON(data);    
var select = $('#ShiftUserId'); 
```

进而

```
$.each(data, function(key, val){
var option = $('<option/>');
option.attr('value', key)
      .html(val)
      .appendTo(select);
}); 
```

或者

```
 data = jQuery.parseJSON(data);        
    data = jQuery.parseJSON(data);    
    jQuery.each(data, function(index, value) {
        console.log(index);
        $('#ShiftUserId').append( $('<option></option>').val(index).html(value) );
    }); 
```

或者

下面回答

# eclipse - Eclipse Clover 插件/在编辑器上切换代码覆盖率突出显示

> ID：14859699
> 
> 赞同：0
> 
> 时间：2013-02-13T17:44:43.250
> 
> 标签：eclipse, plugins, junit, code-coverage, clover

我最近一直在为 Eclipse 使用 Clover 插件，它非常有用。也许最有用的部分——代码覆盖突出显示在编写/编写 JUNIT 测试时变得非常烦人。

我只是想知道，有没有一种简单的方法可以通过单击按钮或键盘快捷键来关闭并重新打开突出显示。请注意，我不喜欢在项目中完全关闭和禁用三叶草覆盖。我只需要在编写 JUNIT 时关闭编辑器内代码的绿色/红色突出显示。有什么简单的方法可以做到这一点吗？我自己做了很多研究，找不到一个好的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-05T20:27:19.113

您是否尝试过使用 Coverage Explorer 视图中名为“显示全部/显示未覆盖/不显示”的三个按钮？它们位于此视图的右上角附近。

[https://confluence.atlassian.com/display/CLOVER/2.+Exploration+of+coverage+in+Eclipse](https://confluence.atlassian.com/display/CLOVER/2.+Exploration+of+coverage+in+Eclipse)

# php - strftime 和 setlocale 兼容性

> ID：14859708
> 
> 赞同：0
> 
> 时间：2013-02-13T17:45:28.613
> 
> 标签：php

手册说 strftime 和 setlocale 为 php 4,5。

用户是否需要任何特殊的扩展来使用这些？例如，我看到 php 5.2 json_encode 不起作用，因为它是一个扩展。

我正在开发一个需要在许多 php 5 安装上工作的应用程序。我想确保这些功能能够正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T17:48:10.237

您不需要对这些进行任何扩展，**但**您必须记住，它们非常依赖服务器（您真的不能假设哪些语言环境可用）。

如果您正在为便携性 恕我直言，您应该完全放弃与语言环境相关的功能。

# .net - WPF WebBrowser 是否支持 VLC ActiveX？

> ID：14859709
> 
> 赞同：0
> 
> 时间：2013-02-13T17:45:33.000
> 
> 标签：.net, wpf, browser, activex, vlc

我需要的是打开**任何**已实施的网页`VLC ActiveX under WPF WebBrowser.`

我刚刚做了一个非常简单的页面，在 IE9/10 下完美运行。

但是当我打开它时，没有任何 VLC :(

```
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=9" />
    <meta http-equiv="cache-control" content="max-age=0" />
    <meta http-equiv="cache-control" content="no-cache" />
    <meta http-equiv="expires" content="0" />
    <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
    <meta http-equiv="pragma" content="no-cache" />
    <title></title>

 </head>
<body>
    <object width="720" height="408" id='vlc2' events="True" codebase="http://downloads.videolan.org/pub/videolan/vlc/latest/win32/axvlc.cab"
        classid="clsid:9BE31822-FDAD-461B-AD51-BE1D1C159921">
        <embed type="application/x-vlc-plugin" pluginspage="http://www.videolan.org" version="VideoLAN.VLCPlugin.2"
            width="720" height="408" id="vlc1" />
        <param name="src" value="http://content.bitsontherun.com/videos/bkaovAYt-52qL9xLP.mp4" />
        <param name="ShowDisplay" value="True" />
        <param name="AutoPlay" value="False" />
    </object>
</body>
</html> 
```

就像测试的替代方法一样，尝试在下面打开[此](http://www.vlc.eu.pn/index.php)页面`WPF WebBrowser`，但**没有任何**反应。

*有知道的兄弟姐妹吗？*

*PS [http://msdn.microsoft.com/en-us/library/vstudio/aa970906(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/vstudio/aa970906(v=vs.100).aspx) 没有帮助...*

PS #2 我刚刚测试[了这个](http://www.vlc.eu.pn/index.php)页面以及我的带有 WinForms WebBrowser 控件的页面，但它不起作用:(这是否意味着 MS webBrowser 控件根本不支持 ActiveX 或 VLC ActiveX 控件受到某种限制？

# vb.net - vb2008 从组合框选定项中检索值并显示到多个文本框

> ID：14859711
> 
> 赞同：0
> 
> 时间：2013-02-13T17:45:35.320
> 
> 标签：vb.net, combobox, textbox

我想问如何获取组合框的选定值，然后将其显示到多个文本框。组合框填充了数据库中的疾病。现在，当从组合框中选择一种疾病时，该疾病的症状应该显示在许多文本框中。目前我有 10 个用于症状的文本框。表结构是 id、disease、symbols。这是我的代码：

```
Dim mycmd As New MySqlCommand
Dim dtr As MySqlDataReader
Call Connect()
        Dim str As String
        str = "Select symptoms from diagnose where illness = @ill"
        mycmd.Parameters.AddWithValue("ill", cmbRecord.Text)
        mycmd.CommandText = str
        dtr = mycmd.ExecuteReader
        While dtr.Read()
            symp0.Text = dtr("symptoms")
            symp1.Text = dtr("symptoms")
            symp2.Text = dtr("symptoms")
            symp3.Text = dtr("symptoms")
            symp4.Text = dtr("symptoms")
            symp5.Text = dtr("symptoms")
            symp6.Text = dtr("symptoms")
            symp7.Text = dtr("symptoms")
            symp8.Text = dtr("symptoms")
            symp9.Text = dtr("symptoms")
        End While
myConn.Close() 
```

当从组合框中选择疾病时，症状应显示在这些文本框中。假设选定的疾病在表格中只有 4 个症状，然后文本框`symp0`将`symp3`一一显示症状，其余文本框留空。

The problem is that when an illness is selected, those textboxes displays only the last symptom of that illness stored in the database.

例如：发烧。在表中，它有4个症状：感冒、发热、头痛、头晕。如果选择发烧，则仅从`symp0`到`symp9`文本框显示头晕。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T02:05:20.267

`dtr("symptoms")``"symptoms"`从当前行获取列的值。在分配给文本框 #1 到 #10 之间，您不会将阅读器推进到下一行，这就是您在所有文本框中看到相同值的原因。

现在回答您的问题，为什么它是所有文本框中**的最后一个症状**。通过使用 循环遍历行`dtr.Read()`，您每次都重新分配文本框的值，并且它会一直发生，直到分配最后一个。此时不会进行后续分配，因此最后一个值保留在屏幕上。

您正在寻找的可能是这样的：

```
Dim symptoms As New List(Of String)
While dtr.Read()
  symptoms.Add(dtr("symptoms"))     
End While

'set available symptoms
Dim arrayOfTextboxes() As TextBox = {symp0, ... put all textboxes here..., symp9}
Dim i As Integer = 0
For i = 0 To symptoms.Count - 1
  arrayOfTextboxes(i).Text = symptoms(i)
Next

'clear other textboxes
For j = i to UBound(arrayOfTextboxes)
  arrayOfTextboxes(j).Text = String.Empty
Next 
```

这是假设您要显示的症状少于 10 个。对于任意数量的症状，您可以`ListBox`通过将其设置为`DataSource`来使用 a `symptoms`。您的代码变得更加紧凑：

```
Dim symptoms As New List(Of String)
While dtr.Read()
  symptoms.Add(dtr("symptoms"))     
End While
YourListBoxWithSymptoms.DataSource = symptoms 
```

# iphone - iOS上的信息窗口？

> ID：14859714
> 
> 赞同：0
> 
> 时间：2013-02-13T17:45:46.233
> 
> 标签：iphone, ios, infowindow

我试图在我的代码中实现类似于 info window 的东西，但不完全是。我在这里找到了一个非常好的教程，[iOS 的信息窗口](http://www.touch-code-magazine.com/showing-a-popup-window-in-ios-class-for-download/)，但我想要做的是当我按下按钮时，它下面的空间可以展开并显示我的各种选项。

我的意思是我不想打开另一个窗口，而是像按钮下方的空间一样展开，显示一些东西。`+`也许您已经在应用程序中看到了这一点，它们旁边带有一个按钮来显示更多信息，然后是`-`隐藏它。

这在 iOS 上究竟是如何调用的，是否有关于它的教程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T17:51:02.180

你最好看看 UIView 动画块。这些在未来也很有用。本教程没有做您正在寻找的确切内容，因为它相当具体，但这将告诉您如何使用动画块，并且您应该能够将其变成您正在寻找的内容。知道这也是一件好事。

[http://www.raywenderlich.com/2454/how-to-use-uiview-animation-tutorial](http://www.raywenderlich.com/2454/how-to-use-uiview-animation-tutorial)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T17:53:45.057

听起来您正在寻找一个弹出菜单，这在 iOS 中并没有真正提供。但是您可以查看第三方控件，例如：

[http://www.cocoacontrols.com/platforms/ios/controls/qbpopupmenu](http://www.cocoacontrols.com/platforms/ios/controls/qbpopupmenu)

# matlab - MATLAB：射影变换

> ID：14859721
> 
> 赞同：1
> 
> 时间：2013-02-13T17:46:00.467
> 
> 标签：matlab, transformation, projective-geometry

我有一张图片

![在此处输入图像描述](../Images/a40223c59daa39cb6dd98910a6710fa3.png)

我想通过像这样将其移回来获得投影变换：

![在此处输入图像描述](../Images/1366cdcdb494b45abf3ae42af651a3bf.png)

但我能看到的唯一结果是：

![在此处输入图像描述](../Images/83dd7a453a3b267014abba84802c8d46.png)

我找不到我的错误。我的代码（A - 我要转换的图片）：

```
p=0.25;
a=p*rows(A);

U = @(m, n) ([1 1; 1 m; n 1; n m]);
V = @(m, n) ([1+a 1+a; 1-a m-a; n-a 1+a; n+a m-a]);

D=transform(A, U(rows(A), cols(A)),...
               V(rows(A), cols(A)),...
               'projective');
imshow(D)

function B=transform(A,U,V,type)
[m n] = size(A)
tform = maketform(type,U,V);  
B = imtransform(A,tform,'size',[m n]); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T22:09:20.127

似乎您的轴的“方向”混淆了。试试这个映射：

```
V = @(m, n) ([1+a 1-a; 1+a m+a; n-a 1+a; n-a m-a]); 
```

对于黑色背景，您可以通过设置一些参数/值对来修复它`imtransform`

（可惜我不是用matlab的电脑，所以不能保证映射的正确性，我明天检查一下，如果不对的话更新一下）

# vb.net - 实体框架映射问题

> ID：14859723
> 
> 赞同：0
> 
> 时间：2013-02-13T17:46:08.673
> 
> 标签：vb.net, entity-framework-5

我对 .Net 完全陌生，最多已经在其中工作了一周，所以请放轻松并尽可能详细:)

我有以下 PONO：

```
Public Class WorkOrderEntity

    Private intTrackingNumber As Integer
    Private intDateReceived As Integer
    Private strManufacturer As String

    Public Property TrackingNumber() As Integer
        Get
            Return intTrackingNumber
        End Get

        Set(value As Integer)
            intTrackingNumber = value
        End Set
    End Property

    Public Property DateReceived() As String
        Get
            ' TODO: Convert timestamp to formatted date
            Return intDateReceived
        End Get

        Set(value As String)
            ' TODO: Convert formatted date to timestamp
            intDateReceived = value
        End Set
    End Property

End Class 
```

我面临的问题是如何将日期/时间存储为时间戳（整数），但提供相应格式/转换的公共属性。

我想我可以提供一个额外的 getter()/setter() 但理想情况下我想知道 EF 是否有办法绕过这个“约定”？

另外-我也很好奇是否可以将属性映射到未正确标记的列？

基本上，如果我在现有数据库中工作（EF 自动使用以表字段命名的属性构建我的 PONO），我希望将这些字段命名为更有意义的名称；例如，某些字段可能是尴尬的缩写，但在对象模型中我想要一些更友好的英语？

我似乎记得能够在 Java 中使用 Hibernate 来做到这一点（实际上是 PHP 端口），但 EF 是否支持这样的功能？

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T22:05:43.973

时间戳 SQL Server 至少现在是 RowVersion。在任何一种情况下，它都不是日期时间，而是版本的字节数组，当行更改时会自动更新。您不会将其转换为日期。

关于通过配置而不是约定映射元素，您可以使用属性或流利的语法来指定映射。有关如何使用这些功能的信息，请参阅[http://msdn.microsoft.com/en-US/data/jj200620 。](http://msdn.microsoft.com/en-US/data/jj200620)

# java - 使用 Java (OSX) 设置任何应用程序的焦点？

> ID：14859733
> 
> 赞同：2
> 
> 时间：2013-02-13T17:46:51.487
> 
> 标签：java, macos, focus

如何在 OSX 上从 Java 程序设置任意应用程序（Java 或非 Java）的焦点（例如 cmd+tab）？

在寻找这个问题的答案时，我遇到了[这个问题](https://stackoverflow.com/questions/4782231/using-java-to-set-the-focus-to-a-non-java-application-in-windows)，但这对 OSX 并没有真正的帮助。

**编辑：**一种可能性似乎是使用[Quicksilver](http://qsapp.com/)之类的东西，并[`Robot`](http://docs.oracle.com/javase/6/docs/api/java/awt/Robot.html)使用修饰符向它发送按键。不过，我更喜欢更便携的东西，在编译后需要更少的设置来进行更改....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T18:29:21.713

您应该能够使用[`open`](http://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/open.1.html)OS X 附带的命令重新激活已经运行的应用程序：

```
Runtime.exec("open /path/to/Whichever.app"); 
```

（或该功能的一些等效重载。）如果尚未运行，这也会打开一个应用程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T18:07:46.703

您可以使用 javax.script API 来运行 AppleScripts。因此，您可以按照“告诉应用程序“WhateverApp”激活”的方式编写一个脚本，为您的任意应用程序填写 WhateverApp，它应该执行您想要的操作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-13T18:22:54.823

Chuck 的回答提示我`osascript`，所以我决定直接从命令行试一试。设法让它与[`Runtime.exec()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Runtime.html#exec%28java.lang.String%5B%5D%29)、[`osascript`](http://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/osascript.1.html)和 AppleScript 一起工作。

Java 启动一个 AppleScript 并将应用程序名称传递给它，`osascript`从命令行使用，通过`Runtime.exec()`：

```
try {
    List<String> shellCommandList = new ArrayList<String>();
    shellCommandList.add("osascript");
    shellCommandList.add("activateApplication.scpt");
    shellCommandList.add(appName);

    String[] shellCommand = (String[])shellCommandList.toArray(new String[0]);
    Process p = Runtime.getRuntime().exec(shellCommand);

    // if desired, pipe out the script's output
    BufferedReader in = new BufferedReader(new InputStreamReader(p.getInputStream()));
    String cmdOutStr = "";
    while ((cmdOutStr = in.readLine()) != null) {
        System.out.println(cmdOutStr);
    }

    // if desired, check the script's exit value
    int exitValue = p.waitFor();
    if (exitValue != 0) {
        // TODO: error dialog
        System.err.println("Invalid application name: "+ appName);
    }
} catch (Exception e) {
    e.printStackTrace();
} 
```

AppleScript 使用运行处理程序来捕获传入的参数：

```
on run (arguments)
    set appName to (item 1 of arguments)
    tell application appName to activate
    return 0
end run 
```

# forms - 在横幅中托管 Web 表单有哪些选择？

> ID：14859739
> 
> 赞同：0
> 
> 时间：2013-02-13T17:47:13.407
> 
> 标签：forms, banner-ads

我有一个客户端将运行一个 728x90 的横幅，在翻转时扩展为 728x315。他们希望包含一个处于展开状态的表单，该表单将信息提交到我们的服务器并显示确认页面，而无需导航到单独的站点。我最初的想法是使用 iframe 或 JSONP，但是：

*   使用 iframe，我看不到任何可靠的方法可以将表单提交成功并且横幅可以缩小到正常大小的信息返回到托管页面。由于 javascript 无法以这种方式跨域边界进行通信，因此如果这是一个要求，我认为我不走运。
*   JSONP 仅支持获取请求。此外，还不清楚横幅广告发布商是否允许包含自定义样式表/javascript（很可能不允许）。
*   访问 Web 服务的自定义 Flash 横幅 (YUCK...)

还有其他选择吗？

我已经告诉客户这是一个非标准要求，可能根本不可行，具体取决于广告发布平台和目标网站，但现在我坚持想出创造性的方法来实现它。

# ruby - 通过 Ruby Telnet 发送转义序列

> ID：14859744
> 
> 赞同：1
> 
> 时间：2013-02-13T17:47:32.670
> 
> 标签：ruby, ascii, telnet

我需要通过 ruby​​ 介导的 Telnet 连接发送 esc。我要寄什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T17:58:59.187

`"\x1b"`是转义字符。你试过发送那个吗？

# lotus-notes - 从 iNotes 发送到数据库中的自定义邮件的邮件在编辑和保存时重复

> ID：14859745
> 
> 赞同：2
> 
> 时间：2013-02-13T17:47:45.230
> 
> 标签：lotus-notes, lotus-domino

这是一个非常奇怪的问题。当从 iNotes 客户端向数据库中的邮件发送标准电子邮件时，如果对其进行编辑和保存，它将复制一份完全相同的副本。编辑电子邮件并将其保存到 notes 邮件客户端时，此行为不会出现。发送邮件模板为当前设计，服务器为 8.5.3

有没有人见过这样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T19:26:33.883

检查mail-in 数据库的设计。具体来说，检查 mail-in 数据库中备忘录表单的属性，并查看 Versioning 属性是否设置为“无”以外的任何值。（如果您的代理人将表格从备忘录更改为其他内容，请检查该表格。）

此外，打开 LotusScript 调试器，完成编辑/保存过程，查看执行了哪些脚本。我似乎记得某些版本的标准模板使用脚本来实现版本控制，而不是依赖于表单属性。

# google-app-engine - 请求 App Engine 后端超时

> ID：14859746
> 
> 赞同：1
> 
> 时间：2013-02-13T17:47:48.750
> 
> 标签：google-app-engine, backend

我创建了一个 App Engine 后端来为长时间运行的进程提供 http 请求。当查询引用小尺寸的输入时，后端进程按预期工作，但当输入尺寸大时，后端进程会超时。查询参数是 App Engine BlobStore blob 的 url，它是后端进程的输入数据。我认为使用 App Engine 后端的全部目的是避免 App Engine 前端拥有的超时限制。如何避免超时？

我这样调用后端，将连接超时长度设置为无限：

`HttpURLConnection connection = (HttpURLConnection)(new URL(url + "?" + query).openConnection()); connection.setRequestProperty("Accept-Charset", charset); connection.setRequestMethod("GET"); connection.setConnectTimeout(0); connection.connect(); InputStream in = connection.getInputStream(); int ch; while ((ch = in.read()) != -1) json = json + String.valueOf((char) ch); System.out.println("Response Message is: " + json); connection.disconnect();`

回溯（为匿名而编辑）是：

`Uncaught exception from servlet java.net.SocketTimeoutException: Timeout while fetching URL: http://my-backend.myapp.appspot.com/somemethod?someparameter=AMIfv97IBE43y1pFaLNSKO1hAH1U4cpB45dc756FzVAyifPner8_TCJbg1pPMwMulsGnObJTgiC2I6G6CdWpSrH8TrRBO9x8BG_No26AM9LmGSkcbQZiilhC_-KGLx17mrS6QOLsUm3JFY88h8TnFNer5N6-cl0iKA at com.google.appengine.api.urlfetch.URLFetchServiceImpl.convertApplicationException(URLFetchServiceImpl.java:142) at com.google.appengine.api.urlfetch.URLFetchServiceImpl.fetch(URLFetchServiceImpl.java:43) at com.google.apphosting.utils.security.urlfetch.URLFetchServiceStreamHandler$Connection.fetchResponse(URLFetchServiceStreamHandler.java:417) at com.google.apphosting.utils.security.urlfetch.URLFetchServiceStreamHandler$Connection.getInputStream(URLFetchServiceStreamHandler.java:296) at org.someorg.server.HUDXML3UploadService.doPost(SomeService.java:70) at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)`

如您所见，我没有收到 DeadlineExceededException，所以我认为除了 Google 的限制之外的其他原因导致了超时，并且也使这个问题与关于该主题的类似 stackoverflow 帖子不同。

我谦虚地感谢您的任何见解。

2012 年 2 月 19 日更新：我想我知道发生了什么。我应该能够让客户端无限期地等待使用 GWT [或任何其他类型的客户端异步框架] 异步处理程序来完成任何客户端请求，所以我认为这不是问题。问题是文件上传正在调用 _ah/upload App Engine 系统端点，一旦 blob 存储在 Blobstore 中，该端点就会调用上传服务的 doPost 后端来处理 blob。客户端对 _ah/upload 的请求是超时的，因为后端没有及时返回。为了让这个超时问题消失，我试图让 _ah_upload 服务本身成为一个公共后端，可以通过[http://backend_name.project_name.appspot.com/_ah/upload访问](http://backend_name.project_name.appspot.com/_ah/upload)，但我不认为谷歌允许系统服务（如_ah/upload）作为后端运行。现在我的下一个方法是让 ah_upload 在触发后端处理后立即返回，然后在处理完成后调用另一个服务以获得我想要的原始响应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T14:44:42.707

解决方案是将后端进程作为任务启动并将其添加到任务队列中，然后在等待处理后端任务之前向客户端返回响应（这可能需要很长时间）。如果我可以将 ah_upload 分配给后端，这也将解决问题，因为客户端异步处理程序可以永远等待后端完成，但我认为 Google 不允许将系统 Servlet 分配给后端。正如 Paul C 所提到的，客户端现在必须轮询持久的后端进程响应数据，因为任务无法像普通 servlet 那样响应。

# java - 从外部目录加载属性文件

> ID：14859750
> 
> 赞同：3
> 
> 时间：2013-02-13T17:47:59.720
> 
> 标签：java, properties

目前我正在从资源流中加载属性文件，如下所示 -

```
prop.load(LoadTest.class.getClassLoader().getResourceAsStream("database.properties")); 
```

但我正在寻找的是是否有任何方法可以从任何外部目录加载属性文件。假设我的`database.properties`文件在-

`C:\logging-test\database.properties`

那么如何从该位置加载上述属性文件？有什么想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-13T18:04:18.013

正如@madth3 所述，您可以使用 Properties 对象中 load() 方法的其他重载来传递 InputStream 引用文件系统中的文件：

```
prop.load(new FileInputStream("C:\\logging-test\\database.properties")); 
```

# java - 将 Blob 从 Java 存储到 BD：数据大小大于此类型的最大大小，但显然不是

> ID：14859758
> 
> 赞同：1
> 
> 时间：2013-02-13T17:48:23.563
> 
> 标签：java, oracle, jakarta-ee, oracle11g, blob

好的，我们开始...

我正在尝试调用存储过程 (PL/SQL)，其中一个参数是 blob，但是当我执行 OracleCallableStatement 时出现此错误：

**java.sql.SQLException：数据大小大于此类型的最大大小**

这太令人沮丧了。。

我尝试执行以下操作但失败了...

```
oracleCallableStatement.setBinaryStream(3, new ByteArrayInputStream(someByteArray), someByteArray.length); 
```

我得到同样的错误：

```
oracleCallableStatement.setBytes(3, someByteArray); 
```

我还更改了 oracle 驱动程序，因为我阅读了这样的网页：

[http://www.coderanch.com/t/457770/JDBC/databases/java-sql-sqlexception-data-size](http://www.coderanch.com/t/457770/JDBC/databases/java-sql-sqlexception-data-size)

说有bug，我更新到ojdbc5.jar 来自：[http ://www.oracle.com/technetwork/database/enterprise-edition/jdbc-112010-090769.html](http://www.oracle.com/technetwork/database/enterprise-edition/jdbc-112010-090769.html)

但问题一直存在

数据库是 Oracle 11g JavaEE 是 1.5，在 Glassfish 2.1 中运行

好吧，我想就是这样，我的 someByteArray 不大于 4Gb！它的长度为 38678

编辑：异常在执行之前触发..当我为 OracleCallableStatement 设置属性时触发

堆栈跟踪的一部分：

```
at oracle.jdbc.dbaccess.DBError.throwSqlException(DBError.java:134)
at oracle.jdbc.dbaccess.DBError.throwSqlException(DBError.java:179)
at oracle.jdbc.ttc7.TTCItem.setArrayData(TTCItem.java:103)
at oracle.jdbc.dbaccess.DBDataSetImpl.setBytesBindItem(DBDataSetImpl.java:2484)
at oracle.jdbc.driver.OraclePreparedStatement.setItem(OraclePreparedStatement.java:1224)
at oracle.jdbc.driver.OraclePreparedStatement.setBinaryStream(OraclePreparedStatement.java:2710) 
```

编辑

所以，你好，我要把它放在这里……告诉我我是否做错了，我会删除它……

someByteArray 是从 someString.toByteArray() 获取的数组

该字符串持有以 Base64 编码的（编辑：用于说 jpeg）PNG 图像的表示...

所以，我在 sun.misc.BASE64Decoder 中使用了一个方法从 someString 中获取 someByteArray ... 然后我使用了

```
oracleCallableStatement.setBinaryStream(3, new ByteArrayInputStream(someByteArray), someByteArray.length); 
```

它就像一个魅力..

BUUUT...不建议使用 sun.misc 中的类，请阅读此内容以获取更多信息。

[工作 sun.misc.BASE64Encoder/Decoder 以获取字节 []](https://stackoverflow.com/questions/2267036/work-sun-misc-base64encoder-decoder-for-getting-byte)

但！！！

这并不能解决为什么我无法将第一个字节数组放入参数中的奥秘以及神秘异常“java.sql.SQLException：数据大小大于此类型的最大大小”的奥秘......

编辑：

这个错误再次出现......这次一切都很好，我正确解码了base64，但是“java.sql.SQLException：数据大小大于这种类型的最大大小”一直返回......

编辑：

它是驱动程序，我在服务器和应用程序上更改它，然后我重新部署并且一切正常......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T17:15:13.520

***不是答案***

您不能（正确地）将图像的字节保留在字符串中。您可以首先将`byte[]`使用 Base64 编码为字符串。也许虽然我误解了，但你做得对。*检查您是否记录了每个异常。*

除了已弃用的 sun 版本（并非在每个 JDK 中都可用）之外，还有其他一些 Base64 转换。在 JavaEE 中：

```
import javax.xml.bind.DatatypeConverter;
String data = "...";
byte[] bytes = DatatypeConverter.parseBase64Binary(data);
String data = DatatypeConverter.parseBase64Binary(bytes); 
```

您不能将数据存储为二进制 blob，而不使用 base64 编码吗？至少可以节省空间。

另一个错误可能是重复使用的 ByteArray 或其他一些微不足道的错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T19:00:35.047

原来是驱动程序，正如我在问题中所述，我更改为 ojdbc5.jar，并且我必须确保 Web 服务器选择了正确的驱动程序而不是旧的驱动程序，正如 Alex Poole 所指出的那样，问题解决了。

# android - 导出数据时出现内存不足异常

> ID：14859759
> 
> 赞同：0
> 
> 时间：2013-02-13T17:48:27.050
> 
> 标签：android, web-services, sqlite

我有一个应用程序，它使用 Web 服务从 SQL Server 获取数据并将其导出到平板电脑中的 SQLite 数据库。问题是，该表大约有 25,000 条记录。当我将其限制为 100 条记录时，该代码运行良好。但是在导出所有数据时出现以下错误：

```
02-13 13:36:31.734: E/AndroidRuntime(12821): FATAL EXCEPTION: AsyncTask #1
02-13 13:36:31.734: E/AndroidRuntime(12821): java.lang.RuntimeException: An error occured while executing doInBackground()
02-13 13:36:31.734: E/AndroidRuntime(12821):    at android.os.AsyncTask$3.done(AsyncTask.java:299)
02-13 13:36:31.734: E/AndroidRuntime(12821):    at java.util.concurrent.FutureTask.finishCompletion(FutureTask.java:352)
02-13 13:36:31.734: E/AndroidRuntime(12821):    at java.util.concurrent.FutureTask.setException(FutureTask.java:219)
02-13 13:36:31.734: E/AndroidRuntime(12821):    at java.util.concurrent.FutureTask.run(FutureTask.java:239)
02-13 13:36:31.734: E/AndroidRuntime(12821):    at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
02-13 13:36:31.734: E/AndroidRuntime(12821):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
02-13 13:36:31.734: E/AndroidRuntime(12821):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
02-13 13:36:31.734: E/AndroidRuntime(12821):    at java.lang.Thread.run(Thread.java:856)
02-13 13:36:31.734: E/AndroidRuntime(12821): Caused by: java.lang.OutOfMemoryError
02-13 13:36:31.734: E/AndroidRuntime(12821):    at java.lang.ThreadLocal$Values.initializeTable(ThreadLocal.java:244)
02-13 13:36:31.734: E/AndroidRuntime(12821):    at java.lang.ThreadLocal$Values.rehash(ThreadLocal.java:325)
02-13 13:36:31.734: E/AndroidRuntime(12821):    at java.lang.ThreadLocal$Values.cleanUp(ThreadLocal.java:254)
02-13 13:36:31.734: E/AndroidRuntime(12821):    at java.lang.ThreadLocal$Values.getAfterMiss(ThreadLocal.java:438)
02-13 13:36:31.734: E/AndroidRuntime(12821):    at java.lang.ThreadLocal.get(ThreadLocal.java:65)
02-13 13:36:31.734: E/AndroidRuntime(12821):    at android.database.sqlite.SQLiteDatabase.getThreadSession(SQLiteDatabase.java:359)
02-13 13:36:31.734: E/AndroidRuntime(12821):    at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:58)
02-13 13:36:31.734: E/AndroidRuntime(12821):    at android.database.sqlite.SQLiteStatement.<init>(SQLiteStatement.java:31)
02-13 13:36:31.734: E/AndroidRuntime(12821):    at android.database.sqlite.SQLiteDatabase.compileStatement(SQLiteDatabase.java:992)
02-13 13:36:31.734: E/AndroidRuntime(12821):    at android.database.DatabaseUtils.longForQuery(DatabaseUtils.java:799)
02-13 13:36:31.734: E/AndroidRuntime(12821):    at android.database.sqlite.SQLiteDatabase.getVersion(SQLiteDatabase.java:862)
02-13 13:36:31.734: E/AndroidRuntime(12821):    at android.database.sqlite.SQLiteOpenHelper.getDatabaseLocked(SQLiteOpenHelper.java:242)
02-13 13:36:31.734: E/AndroidRuntime(12821):    at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:164)
02-13 13:36:31.734: E/AndroidRuntime(12821):    at com.example.shvalidation.DatabaseHandler.InsertBook(DatabaseHandler.java:75)
02-13 13:36:31.734: E/AndroidRuntime(12821):    at com.example.shvalidation.MainMenuScreen$TestThread.doInBackground(MainMenuScreen.java:79)
02-13 13:36:31.734: E/AndroidRuntime(12821):    at com.example.shvalidation.MainMenuScreen$TestThread.doInBackground(MainMenuScreen.java:1)
02-13 13:36:31.734: E/AndroidRuntime(12821):    at android.os.AsyncTask$2.call(AsyncTask.java:287)
02-13 13:36:31.734: E/AndroidRuntime(12821):    at java.util.concurrent.FutureTask.run(FutureTask.java:234)
02-13 13:36:31.734: E/AndroidRuntime(12821):    ... 4 more
02-13 13:36:32.804: E/WindowManager(12821): Activity com.example.shvalidation.MainMenuScreen has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView{412636d8 V.E..... R......D 0,0-772,216} that was originally added here
02-13 13:36:32.804: E/WindowManager(12821): android.view.WindowLeaked: Activity com.example.shvalidation.MainMenuScreen has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView{412636d8 V.E..... R......D 0,0-772,216} that was originally added here
02-13 13:36:32.804: E/WindowManager(12821):     at android.view.ViewRootImpl.<init>(ViewRootImpl.java:354)
02-13 13:36:32.804: E/WindowManager(12821):     at android.view.WindowManagerGlobal.addView(WindowManagerGlobal.java:216)
02-13 13:36:32.804: E/WindowManager(12821):     at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:69)
02-13 13:36:32.804: E/WindowManager(12821):     at android.app.Dialog.show(Dialog.java:281)
02-13 13:36:32.804: E/WindowManager(12821):     at android.app.ProgressDialog.show(ProgressDialog.java:116)
02-13 13:36:32.804: E/WindowManager(12821):     at android.app.ProgressDialog.show(ProgressDialog.java:99)
02-13 13:36:32.804: E/WindowManager(12821):     at android.app.ProgressDialog.show(ProgressDialog.java:94)
02-13 13:36:32.804: E/WindowManager(12821):     at com.example.shvalidation.MainMenuScreen$TestThread.onPreExecute(MainMenuScreen.java:49)
02-13 13:36:32.804: E/WindowManager(12821):     at android.os.AsyncTask.executeOnExecutor(AsyncTask.java:586)
02-13 13:36:32.804: E/WindowManager(12821):     at android.os.AsyncTask.execute(AsyncTask.java:534)
02-13 13:36:32.804: E/WindowManager(12821):     at com.example.shvalidation.MainMenuScreen.onCreate(MainMenuScreen.java:30)
02-13 13:36:32.804: E/WindowManager(12821):     at android.app.Activity.performCreate(Activity.java:5104)
02-13 13:36:32.804: E/WindowManager(12821):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
02-13 13:36:32.804: E/WindowManager(12821):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
02-13 13:36:32.804: E/WindowManager(12821):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
02-13 13:36:32.804: E/WindowManager(12821):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
02-13 13:36:32.804: E/WindowManager(12821):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
02-13 13:36:32.804: E/WindowManager(12821):     at android.os.Handler.dispatchMessage(Handler.java:99)
02-13 13:36:32.804: E/WindowManager(12821):     at android.os.Looper.loop(Looper.java:137)
02-13 13:36:32.804: E/WindowManager(12821):     at android.app.ActivityThread.main(ActivityThread.java:5039)
02-13 13:36:32.804: E/WindowManager(12821):     at java.lang.reflect.Method.invokeNative(Native Method)
02-13 13:36:32.804: E/WindowManager(12821):     at java.lang.reflect.Method.invoke(Method.java:511)
02-13 13:36:32.804: E/WindowManager(12821):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
02-13 13:36:32.804: E/WindowManager(12821):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
02-13 13:36:32.804: E/WindowManager(12821):     at dalvik.system.NativeStart.main(Native Method) 
```

我想知道是否有人知道我可以导出这些记录。是的，我知道将超过 25,000 条记录导出到 SQLite 是荒谬的，但不幸的是，这是我被分配的项目。因此，我必须找到一种方法来做到这一点。

编辑：添加使用 Web 服务并保存到 SQLite 的代码。

```
package com.example.shvalidation;

import java.util.ArrayList;
import java.util.List;

import org.apache.http.NameValuePair;
import org.apache.http.message.BasicNameValuePair;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.Activity;
import android.app.ProgressDialog;
import android.content.Intent;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.view.Menu;
import android.view.View;

public class MainMenuScreen extends Activity {
    //JSON Variables
    JSONParser jsonParser = new JSONParser();
    String pid;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main_menu_layout);
        new TestThread().execute();
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main_menu_layout, menu);
        return true;
    }

    public void PlantToDome(View view) {
        Intent intent = new Intent(this, SelectLocationScreen.class);
        startActivity(intent);
    }

    //Código del Web Service
    public class TestThread extends AsyncTask<Void, Void, Void> {
        ProgressDialog dialog;
        protected void onPreExecute() {
            dialog = ProgressDialog.show(MainMenuScreen.this, "Loading", "Loading data, please wait..");
        }

        protected Void doInBackground(Void...args0) {
            int success;
            Book book = new Book();
            DatabaseHandler handler = new DatabaseHandler(MainMenuScreen.this);
            try {
                // Building Parameters
                List<NameValuePair> params = new ArrayList<NameValuePair>();
                params.add(new BasicNameValuePair("pid", pid));

                // getting product details by making HTTP request
                // Note that product details url will use GET request
                JSONObject json = jsonParser.makeHttpRequest(
                        "http://192.168.1.102:8080/WSBook.php", "GET", params);

                // check your log for json response

                // json success tag
                success = json.getInt("success");
                if (success == 1) {
                    // successfully received product details
                    JSONArray productObj = json.getJSONArray("record"); // JSON Array

                    // get first product object from JSON Array
//                    JSONObject product = productObj.getJSONObject(1);
                    for (int i = 0; i < productObj.length(); i++) {
                        JSONObject record = productObj.getJSONObject(i);
                        book.setAoiName(record.getString("aoi_name"));
                        book.setExptName(record.getString("expt_name"));
                        book.setEuID(record.getInt("eu_id"));
                        book.setX(record.getInt("x"));
                        book.setY(record.getInt("y"));
                        book.setZ(record.getInt("z"));
                        book.setRaplo(record.getString("raplo"));
//                      Book book = new Book(record.getString("aoi_name"), record.getString("expt_name"), record.getInt("eu_id"), 
//                              record.getInt("x"), record.getInt("y"), record.getInt("z"), record.getString("raplo"));
                        handler.InsertBook(book);
                    }
                }
            } catch (Exception e) {
                Log.e("error", e.toString());
            }
            return null;
        }

        protected void onPostExecute(Void unused) {
            dialog.dismiss();
        }
    }
} 
```

编辑#2：我的 JSON 解析器类。

```
package com.example.shvalidation;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.UnsupportedEncodingException;
import java.util.List;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.client.utils.URLEncodedUtils;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONException;
import org.json.JSONObject;

import android.util.Log;

public class JSONParser {

    static InputStream is = null;
    static JSONObject jObj = null;
    static String json = "";

    // constructor
    public JSONParser() {

    }

    // function get json from url
    // by making HTTP POST or GET method
    public JSONObject makeHttpRequest(String url, String method,
            List<NameValuePair> params) {

        // Making HTTP request
        try {

            // check for request method
            if(method == "POST"){
                // request method is POST
                // defaultHttpClient
                DefaultHttpClient httpClient = new DefaultHttpClient();
                HttpPost httpPost = new HttpPost(url);
                httpPost.setEntity(new UrlEncodedFormEntity(params));

                HttpResponse httpResponse = httpClient.execute(httpPost);
                HttpEntity httpEntity = httpResponse.getEntity();
                is = httpEntity.getContent();

            }else if(method == "GET"){
                // request method is GET
                DefaultHttpClient httpClient = new DefaultHttpClient();
                String paramString = URLEncodedUtils.format(params, "utf-8");
                url += "?" + paramString;
                HttpGet httpGet = new HttpGet(url);

                HttpResponse httpResponse = httpClient.execute(httpGet);
                HttpEntity httpEntity = httpResponse.getEntity();
                is = httpEntity.getContent();
            }           

        } catch (UnsupportedEncodingException e) {
            Log.e("Unsupported Encoding", Log.getStackTraceString(e));
        } catch (ClientProtocolException e) {
            Log.e("Client Protocol", Log.getStackTraceString(e));
        } catch (IOException e) {
            Log.e("IO Exception", Log.getStackTraceString(e));
        }

        try {
            BufferedReader reader = new BufferedReader(new InputStreamReader(
                    is, "iso-8859-1"), 8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
            is.close();
            json = sb.toString();
        } catch (Exception e) {
            Log.e("Buffer Error", "Error converting result " + e.toString());
        }

        // try parse the string to a JSON object
        try {
            jObj = new JSONObject(json);
        } catch (JSONException e) {
            Log.e("JSON Parser", "Error parsing data " + e.toString());
            Log.e("JSON Parser", json);
        }

        // return JSON String
        return jObj;

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T18:38:43.037

看起来您正在尝试首先将所有 25,000 行的数据拉入内存，然后将它们写入 SQLite（这是一个猜测，因为您没有显示任何代码，但我敢打赌这是一个很好的猜测）。您必须将其限制为一次 100 行。也就是说，从 Web 服务中读取 100 行，然后将它们写入 SQLite，然后再读取 100 行，等等。您可能会更喜欢线程，但这应该会让您走上正确的道路。

**编辑：**感谢您添加代码。看起来罪魁祸首是这一行：

```
JSONObject json = jsonParser.makeHttpRequest(
    "http://192.168.1.102:8080/WSBook.php", "GET", params); 
```

这会尝试从 Web 服务中读取整个表格的文本并将其塞入 JSONObject 中，而您的手机没有足够的内存来处理它。

我看到两个解决方案：

1.  如果您可以将参数添加到定义行范围的 http get 请求，您可以循环获取行 0-99，将它们写入 db、100-199 等，几乎使用您现在拥有的一些代码。
2.  如果您无法定义行范围，或者数据库频繁更改以致您无法依赖它为您提供一致的数据，那么您将不得不将来自 http 请求的响应分成块读取。不幸的是，我并不精通那里的所有 json 库，所以我不能说哪些可能有助于该过程。

# git - 更改 Github repo zip 下载的文件夹结构

> ID：14859761
> 
> 赞同：0
> 
> 时间：2013-02-13T17:48:35.430
> 
> 标签：git, github

目前，如果我要通过任何 github 存储库（例如[https://github.com/Shukaro/TekkitPlus/archive/master.zip](https://github.com/Shukaro/TekkitPlus/archive/master.zip)）上提供的这样的链接下载存储库，文件夹结构最终会是 master.zip /somefolder/repofiles 和文件夹。是否可以以文件夹结构最终为 master.zip/repofilesandfolders 的方式下载 repo？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T20:07:07.400

不，目前不可能。您必须手动解包和重新打包才能获得所需的结构。

# ios - iOS 图像命名约定

> ID：14859763
> 
> 赞同：8
> 
> 时间：2013-02-13T17:48:49.923
> 
> 标签：ios, cocos2d-iphone

我在 iOS 开发方面相对较新。

我目前正在使用 cocos2d 库构建一个应用程序，该库可用于 iPad Retina、iPad、iPhone 5 和 iPhone 4s/4。

我正在设置所有图像，并且正在尝试找出命名约定。

有谁知道可以帮助我的指南吗？

假设我有一个 background.png。

据我了解：

*   background.png -> iPhone（非视网膜/后备）
*   背景-hd.png -> iPhone 4s/4 (视网膜)
*   background-ipad.png -> iPad（非视网膜）
*   背景-ipadhd.png -> iPad（视网膜）

并且所有其他文件都使用相同的命名约定？例如：

*   任意按钮.png -> iPhone（非视网膜/后备）
*   任意Button-hd.png -> iPhone 4s/4 (视网膜)
*   任意Button-ipad.png -> iPad（非视网膜）
*   任意按钮-ipadhd.png -> iPad（视网膜）

我如何命名 iPhone 5 文件？

我搜索了一下，似乎找不到任何有形的指南。

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-13T17:55:29.813

操作系统具有您可以使用的命名约定（并为您强制执行，这意味着您只需将文件引用为`@"fileName"`）。文档[可在此处获得](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/App-RelatedResources/App-RelatedResources.html)。

*   fileName.png -> iPhone（非视网膜/后备）
*   文件名@2x.png -> iPhone 4s/4（视网膜）
*   文件名~ipad.png -> iPad（非视网膜）
*   文件名@2x~ipad.png -> iPad（视网膜）

*注意：~iphone 也存在，并且可以与~ipad 一起使用/代替使用。同时使用 ~ipad 和 ~iphone 可以防止 Apple 可能引入的第三种习语。**咳嗽**电视**咳嗽***

对于 iPhone 5，操作系统不强制执行命名方案。但是，使用与启动图像相同的方案可能是明智的。

*   文件名-568h@2x.png -> iPhone 5

为了在整个应用程序中轻松处理此问题，您可以创建一个类别，并在您知道您将拥有 iPhone 5 友好图像以及常规尺寸图像的地方使用它。可以制作一个简单的版本，如下所示。

**UIImage+iPhone5Image.h**

```
#import <UIKit/UIKit.h>

@interface UIImage (iPhone5Image)

+ (UIImage*)iPhone5ImageNamed:(NSString*)imageName;

@end 
```

**UIImage+iPhone5Image.m**

```
#import "UIImage+iPhone5Image.h"

#define IsIPhone5() ([UIDevice currentDevice].userInterfaceIdiom == UIUserInterfaceIdiomPhone && [UIScreen mainScreen].bounds.size.height == 568)

@implementation UIImage (iPhone5Image)

+ (UIImage*)iPhone5ImageNamed:(NSString*)imageName
{
    if (IsIPhone5()) {
        NSString* newImageName = [NSString stringWithFormat:@"%@-568h", imageName];
        return [UIImage imageNamed:newImageName];
    }
    else {
        return [UIImage imageNamed:imageName];
    }
}

@end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T20:26:37.660

看起来您遵循 cocos2d 命名约定而不是标准 UIKit 版本。它们是不同的，如果您使用 cocos2d，建议您使用 cocos2d 后缀而不是 UIKit 后缀。

它们如下：

*   非视网膜 iPhone（无后缀）
*   视网膜 iPhone`-hd`
*   非视网膜 iPad`-ipad`
*   视网膜 iPad`-ipadhd`
*   iPhone 5`-iphone5`和`-iphone5hd`

使用 cocos2d 方法的设备，你想加载的所有文件都可以像这样后缀。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-12T17:13:54.763

好的，现在cocos2d本身支持iphone5了。

```
-hd.png for iPhone HD 
-ipad.png for iPad 
-ipadhd.png for iPad HD
-wide.png for iphone 5
-widehd.png for iPhone 5 HD 
```

如果您的 Cocos2d 版本较旧，请使用：

```
static inline NSString *i5res(NSString * data)
{
    if(IS_IPHONE5)
    {
        return [data stringByReplacingOccurrencesOfString:@"." withString:@"-whd."];
    }

    return data;
}
//usage
CCSprite *bg = [CCSprite spriteWithFile:i5res(@"bg.png")]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T17:55:18.463

为了让编译器自动选择正确的图像，您需要将标准（非视网膜）图像命名为 image.png 和视网膜图像 image@2x.png。然后在您的代码中仅参考标准代码。编译器将完成其余的工作。因此，如果您正在设置图像，它应该如下所示：

```
UIImage *anImage = [UIImage imageNamed:@"image.png"]; 
```

iPhone 5 没有特定的命名约定，因为该应用程序不会自动为 iPhone 5 选择不同的图像大小，您必须在代码中使用以下代码来执行此操作：

```
CGRect screenRect = [[UIScreen mainScreen] bounds];
CGFloat screenHeight = screenRect.size.height;

if([[UIScreen mainScreen]bounds].size.height == 568){
    UIImage *signUp = [UIImage imageNamed:@"signup-bg-568h.jpg"];
    [signUpImage setImage:signUp];
}
else{
    UIImage *signUp = [UIImage imageNamed:@"signup.jpg"];
    [signUpImage setImage:signUp];
} 
```

# c - strToInt函数将字符列表转换为C中的整数

> ID：14859764
> 
> 赞同：0
> 
> 时间：2013-02-13T17:48:50.240
> 
> 标签：c, string, character

在 C 语言中，我需要一个函数来获取字母数字列表字符`0-9`并将其转换为整数。

代码：

```
int strToInt(char string[])
{
    int i, intValue, result = 0;
    for (i = 0; string[i] > '0' && string[i] <= '9'; ++i)
    {
        intValue = string[i] - '0';
        result = ???
    }
    return result;
} 
```

我在里面放什么？？？让它工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T17:50:25.450

尝试这个：

```
result = result * 10 + intValue; 
```

还：

```
string[i] > '0' 
```

在`for`循环中似乎很讨厌 - 数字可以包含数字 0，对吗？您可能想使用

```
string[i] >= '0' 
```

相反，甚至更好，无需重新发明轮子：

```
#include <ctype.h>

for (i = 0; isdigit(string[i]); ++i) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T17:52:04.470

好吧，您的字符串是十进制的，以 10 为底，字符串中的每个数字代表以 10 为底的系统中的一个位置。即所以你想做

```
 result = result * 10 + intValue; 
```

记住'0'也是一个数字，所以你不想省略那个，使用`string[i] >= '0'`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T18:25:09.717

如果您在谈论 base `10`，您可能还应该包括`0`一个数字，因此

```
string[i] >= '0' 
```

在你的`for`循环中。和通常的位值计算

```
result = result*10 + intValue; 
```

# java - 如何让 notifyDatasetChanged() 与 ListAdapter 一起工作？

> ID：14859766
> 
> 赞同：5
> 
> 时间：2013-02-13T17:48:52.467
> 
> 标签：java, android, listview, android-arrayadapter

现在我使用 setAdapter 来更新我的 ListView，但我认为正确的方法是使用 notifiyDatasetChanged() 并且我无法让它在我的主类中工作（它在适配器中）。这是错误：

未为 ListAdapter 类型定义方法 notifyDatasetChanged()

我猜有更好的方法来做到这一点 - 谁能指出我正确的方向？

这是我的代码的相关部分：

```
public class ScoreList extends SherlockFragmentActivity {

    private ListView listViewScore;

    static List<Score> listScore = new ArrayList<Score>();
    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.score_list);
        ctx = this;
        listScore = dbh.getAllScores();

        listViewScore = (ListView) findViewById(R.id.score_list);

        listViewScore.setAdapter(new ScoreListAdapter(ctx,
                R.layout.score_row_item, listScore));
        listViewScore.getAdapter().notifyDatasetChanged(); //this is where I get the error
    }
} 
```

这是适配器：

```
public class ScoreListAdapter extends ArrayAdapter<Score> {
    private int resource;
    private LayoutInflater inflater;

    public ScoreListAdapter(Context ctx, int resourceId, List<Score> objects) {
        super(ctx, resourceId, objects);
        resource = resourceId;
        inflater = LayoutInflater.from(ctx);
        //context = ctx;
    }

    @Override
    public View getView(final int position, View convertView, ViewGroup parent) {

        convertView = (LinearLayout) inflater.inflate(resource, null);

        Score score = getItem(position);

        TextView txtName = (TextView) convertView.findViewById(R.id.name);
        txtName.setText(score.getName());

        TextView txtScoreChange = (TextView) convertView
                .findViewById(R.id.scoreChange);
        int scoreChange = Integer.parseInt(score.getScoreChange());
        if (scoreChange > 0)
            txtScoreChange.setText("+" + scoreChange);
        else if (scoreChange < 0)
            txtScoreChange.setText("" + scoreChange);
        else
            txtScoreChange.setText("");

        TextView txtScoreTotal = (TextView) convertView
                .findViewById(R.id.scoreTotal);
        txtScoreTotal.setText(score.getScoreTotal());

        final LinearLayout currentRow = (LinearLayout) convertView
                .findViewById(R.id.scoreRowLayout);                 

        notifyDataSetChanged();
        return convertView;
    }   
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T18:12:02.003

创建自定义适配器的实例，以便您可以在任何您喜欢的地方使用它...

```
public class ScoreList extends SherlockFragmentActivity {

private ListView listViewScore;

private ScoreListAdapter adapter;

static List<Score> listScore = new ArrayList<Score>();
@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.score_list);
    ctx = this;
    listScore = dbh.getAllScores();

    listViewScore = (ListView) findViewById(R.id.score_list);

    adapter = new ScoreListAdapter(ctx, R.layout.score_row_item, listScore);
    listViewScore.setAdapter(adapter);
    adapter.notifyDatasetChanged(); 
}
} 
```

顺便说一句，如果您的 listScore 数组已经加载，那么您不需要使用

```
adapter.notifyDatasetChanged(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T18:02:47.137

不要调用 notifyDataSetChanged(); 创建时的方法。

仅当您的 listViewScore 的内容发生更改时才调用它..并在那时使用它-

代替

```
listView.getAdapter().notifyDatasetChanged(); 
```

和

```
((ScoreListAdapter)listView.getAdapter()).notifyDataSetChanged(); 
```

看看魔法……

谢谢。

# asp.net - 将 WebPart 添加到应用程序页面

> ID：14859768
> 
> 赞同：2
> 
> 时间：2013-02-13T17:48:54.757
> 
> 标签：asp.net, sharepoint, web-parts, sharepoint-designer, dataviewwebpart

我有一个从 SharePoint Designer 创建的“数据视图 Web 部件”。我将 Web 部件作为“Web 部件”添加到我的 Visual Studio 项目中。我想知道如何将 Web 部件添加到应用程序页面。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-06T16:03:18.030

嗨，我知道它有点晚了，但是今天我不得不做同样的事情，所以我在 sharepoint.stackexchange.com 上遵循了一个很好的答案。但基本上就像在 APS.NET 页面上添加任何其他 asp.net 控件一样。

首先，您需要为该程序集定义前缀

```
<%@ Register tagprefix="prefix" namespace="NameSpaceOfTheWebPart" assembly="FullAssemblyName" %> 
```

前任：

```
<%@ Register tagprefix="csm" namespace="MySolution.VisualWebPart" assembly="MySolution Version=1.0.0.0, Culture=neutral, PublicKeyToken=335eef5f6f60e56b" %> 
```

然后使用 asp.net 所需的属性（ID 和 runat）将 Web 部件添加到页面（在主占位符上）。

```
<prefix:WebPartClassName ID="ID" runat="server"  /> 
```

唯一的问题是您将无法通过浏览器编辑页面和修改 Web 部件，如果您需要修改 Web 部件的任何其他属性，则必须从 html 或后面的代码中进行。

这是我关注的链接的网址： [https ://sharepoint.stackexchange.com/questions/26508/is-it-possible-to-add-web-parts-to-an-application-page](https://sharepoint.stackexchange.com/questions/26508/is-it-possible-to-add-web-parts-to-an-application-page)

我希望它有帮助。

# c++ - 如何在 C++ 中链接到共享库

> ID：14859770
> 
> 赞同：0
> 
> 时间：2013-02-13T17:49:02.373
> 
> 标签：c++, makefile, shared-libraries, zeromq

有人可以帮我链接到 C++ 中的共享库，特别是 libzmq 吗？

```
all: clean compile                                        

clean:                                                    
    rm bin *.o -f                                         

compile:                                                  
    g++ -g -Wall -I/usr/local/include -L/usr/local/lib main.cpp -lzmq -o bin 
```

我使用以下步骤安装了 libzmq：

```
git clone https://github.com/zeromq/libzmq.git
cd libzmq
./autogen.sh
./configure
make && sudo make install 
```

这是我的 main.cpp

```
#include <iostream>                                                       
#include <string>                                                         

#include <zmq/zmq.h>                                                    

// Required by fork routine                                               
#include <sys/types.h>                                                    
#include <unistd.h>                                                       

// Required by wait routine                                               
#include <sys/wait.h>                                                     

#include <stdlib.h>         // Declaration for exit()                     
#include <cstdio>           // printf                                     
using namespace std;                                                      

int global_variable = 2;                                                  

int main(int argc, char** argv){                                          
    const short int FORK_FAILED = -1;                                     
    const short int FORK_SUCCESS = 0;                                     
    int stack_variable = 20;                                              
    pid_t pid;                                                            
    string status_identifier;                                             
    switch (pid = fork()){                                                
        case FORK_SUCCESS:                                                
            printf("Child changing global and stack variables\n");        
            global_variable++;                                            
            stack_variable++;                                             
            break;                                                        
        case FORK_FAILED:                                                 
            cerr << "Failed!  -- Failed to fork:  " << pid << endl;       
            exit(1);                                                      
        default:                                                          
            printf("Child process (pid=%d) created successfully.\n", pid);
            wait(0);                                                      
            break;                                                        
    }                                                                     
    printf("[pid=%d] Global:  %d\n", pid, global_variable);               
    printf("[pid=%d] Stack:  %d\n", pid, stack_variable);                 
    return 0;                                                             
} 
```

而且，这是错误消息：

```
bitcycle @ ubuntu64vm ~/git/test $ make
rm bin *.o -f
g++ -g -Wall -I/usr/local/include -L/usr/local/lib main.cpp -lzmq -o bin
main.cpp:4:23: fatal error: zmq/zmq.hpp: No such file or directory
compilation terminated.
make: *** [compile] Error 1 
```

错误很简单，但我还没有找到解决方案。有任何想法吗？

我的目标是用多个子进程做这样的事情[。](http://zguide.zeromq.org/cpp%3ahwclient)

**更新** 我只是要在 ubuntu: 系统范围内安装它 `sudo apt-get install libzmq-dev`，这解决了这个问题。它没有教我如何识别磁盘上的共享库和头文件并链接到它......但我想我可以将它移到另一天。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T18:26:44.517

ZeroMQ 的 C++ 包装器 (zmq.hpp) 不再是 ZeroMQ 的一部分。当前的 libzmq master 或最新的稳定版 3.2.x 中没有 zmq.hpp。

# asp.net - 通过 Visual Basic 从网站检索数据

> ID：14859781
> 
> 赞同：5
> 
> 时间：2013-02-13T17:50:07.193
> 
> 标签：asp.net, vb.net, visual-studio-2010

有一个我们从中购买小部件的网站，该网站在其自己的网页上提供了每个部分的详细信息。示例：[http](http://www.digikey.ca/product-search/en?lang=en&site=ca&KeyWords=AE9912-ND) ://www.digikey.ca/product-search/en?lang=en&site=ca&KeyWords=AE9912-ND 。我必须找到他们在我们数据库中的所有零件，并将制造商和制造商零件编号值添加到他们的字段中。

有人告诉我，Visual Basic 有一种方法可以访问网页并提取信息。如果有人能指出我从哪里开始的正确方向，我相信我能弄清楚这一点。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T19:07:12.873

## 如何使用 HTMLAgilityPack (VB.Net) 抓取网站

我同意[htmlagilitypack](http://html-agility-pack.net)是实现这一目标的最简单方法。它比仅使用正则表达式更不容易出错。以下将是我如何处理刮擦。

~~下载 htmlagilitypack*dll 后~~，新建一个应用，通过 nuget 添加*htmlagilitypack*，并引用。如果您可以使用 Chrome，它将允许您检查页面以获取有关您的信息所在位置的信息。右键单击您要捕获的值并查找它所在的表（按照 HTML 向上一点）。

以下示例将从“定价”表中的该页面中提取所有值。我们需要知道表的[XPath](http://www.w3schools.com/xpath/default.asp)值（该值用于指示 htmlagilitypack 要查找的内容），以便我们创建的文档查找我们的特定值。这可以通过找到您的值所在的任何结构并右键单击复制 XPath 来实现。由此我们得到...

```
//*[@id="pricing"] 
```

请注意，有时您从 Chrome 获得的 XPath 可能相当大。您通常可以通过查找您的值所在的表的独特之处来简化它。在这个例子中，它是“id”，但在其他情况下，它很容易是标题或类或其他任何东西。

这个 XPath 值查找 id 等于定价的东西，即我们的表。当我们进一步观察时，我们看到我们的值在 tbody、tr 和 td 标签内。HtmlAgilitypack 不适用于 tbody 所以忽略它。我们的新 XPath 是...

```
//*[@id='pricing']/tr/td 
```

该 XPath 表示在页面中查找定价 ID，然后在其 tr 和 td 标记中查找文本。现在我们添加代码...

```
Dim Web As New HtmlAgilityPack.HtmlWeb
Dim Doc As New HtmlAgilityPack.HtmlDocument
Doc = Web.Load("http://www.digikey.ca/product-search/en?lang=en&site=ca&KeyWords=AE9912-ND")
For Each table As HtmlAgilityPack.HtmlNode In Doc.DocumentNode.SelectNodes("//*[@id='pricing']/tr/td")

Next 
```

要提取值，我们只需引用在循环中创建的表值，它是内部文本成员。

```
Dim Web As New HtmlAgilityPack.HtmlWeb
Dim Doc As New HtmlAgilityPack.HtmlDocument
Doc = Web.Load("http://www.digikey.ca/product-search/en?lang=en&site=ca&KeyWords=AE9912-ND")
For Each table As HtmlAgilityPack.HtmlNode In Doc.DocumentNode.SelectNodes("//*[@id='pricing']/tr/td")
    MsgBox(table.InnerText)
Next 
```

现在我们有弹出值的消息框......您可以切换消息框以填充数组列表或您希望存储值的任何方式。现在只需对您希望获得的任何其他表格执行相同的操作。

请注意，创建的 Doc 变量是可重用的，因此如果您想在同一页面中循环浏览不同的表，则不必重新加载页面。这是一个好主意，特别是如果您提出许多请求，并且不想破坏网站，并且如果您要自动执行大量抓取，则请求之间会留出一些时间。

刮痧真的就是这么简单。这就是基本思想。玩得开心！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T17:53:04.657

[Html Agility Pack](http://htmlagilitypack.codeplex.com/)将成为您的朋友！

> **什么是 Html Agility Pack (HAP)？**
> 
> 这是一个敏捷的 HTML 解析器，它构建了一个读/写 DOM 并支持普通的 XPATH 或 XSLT（你实际上不必了解 XPATH 或 XSLT 就可以使用它，不用担心......）。它是一个 .NET 代码库，允许您解析“网络之外”的 HTML 文件。解析器对“真实世界”格式错误的 HTML 非常宽容。对象模型与 System.Xml 的提议非常相似，但用于 HTML 文档（或流）。

查看您提供的示例页面的源代码，他们在标记中使用 HTML5 微数据。我搜索了更多内容`CodePlex`，发现了一个可能也有帮助的微数据解析器：[MicroData Parser](http://microdata.codeplex.com/)

# vb.net - 如何使用 Exchange Web 服务接受类别并将其添加到 RequiredAttendees 约会

> ID：14859784
> 
> 赞同：4
> 
> 时间：2013-02-13T17:50:18.240
> 
> 标签：vb.net, exchangewebservices, ews-managed-api

我正在使用 ExchangeService(ExchangeVersion.Exchange2010_SP1)

我想接受并将类别添加到RequiredAttendees 约会。为此，我需要找到这些约会。

我在 EWS 中的理解是，在保存具有RequiredAttendees 的约会时，会为每个“必需的与会者”创建一个新的会议请求。

如何访问为“必需的与会者”自动创建的约会？这些在所需的与会者日历中显示为约会，以及会议请求。

我设法对主题进行了粗略的发现（以下步骤）

1.  作为 Organizer 连接到服务器
2.  创建约会
3.  设置主题
4.  添加所需的与会者
5.  保存约会

6.  从步骤 4 连接到服务器作为必需的参加者

7.  在步骤 3 中查找具有主题的约会
8.  在步骤 7 将类别添加到约会
9.  在步骤 7 更新约会
10.  在第 7 步接受预约

这确实有效，但相关用户会更改主题。

我尝试将扩展属性和值添加到由组织者创建的约会中，然后在作为所需参加者连接的约会中为扩展属性值添加 FindItems。这不起作用。

对于我要完成的工作，是否有首选方法？

谢谢

```
Private Shared ReadOnly m_organiserEmailAddress As String = "Organiser@test.com"
Private Shared ReadOnly m_eventIdExtendedPropertyDefinition As New ExtendedPropertyDefinition(DefaultExtendedPropertySet.Meeting, "EventId", MapiPropertyType.Long)

'--> start here
Public Shared Function SaveToOutlookCalendar(eventCalendarItem As EventCalendarItem) As String

    If eventCalendarItem.Id Is Nothing Then
        'new
        Dim newAppointment = EventCalendarItemMapper.SaveNewAppointment(eventCalendarItem)
        'set the Id
        eventCalendarItem.Id = newAppointment.Id.UniqueId.ToString()
        'accept the calendar item on behalf of the Attendee
        EventCalendarItemMapper.AcceptAppointmentAsAttendees(newAppointment)
        Return eventCalendarItem.Id
    Else
        'update existing appointment
        Return EventCalendarItemMapper.UpdateAppointment(eventCalendarItem)
    End If

End Function

Private Shared Sub ConnectToServer(Optional autoUser As String = "")

    If autoUser = "" Then
        _service.Url = New Uri(ExchangeWebServicesUrl)
    Else
        _service.AutodiscoverUrl(autoUser)
    End If

End Sub

Private Shared Sub ImpersonateUser(userEmail As String)

    _service.Credentials = New NetworkCredential(ImpersonatorUsername, ImpersonatorPassword, Domain)
    _service.ImpersonatedUserId = New ImpersonatedUserId(ConnectingIdType.SmtpAddress, userEmail)

End Sub

Private Shared Function SaveNewAppointment(eventCalendarItem As EventCalendarItem) As Appointment

    Try
        ConnectToServer(m_organiserEmailAddress)
        ImpersonateUser(m_organiserEmailAddress)

        Dim appointment As New Appointment(_service) With {
                   .Subject = eventCalendarItem.Subject}

        'add attendees
        For Each attendee In eventCalendarItem.Attendees
            appointment.RequiredAttendees.Add(attendee.Email)
        Next

        'add categories
        For Each category In eventCalendarItem.Categories
            appointment.Categories.Add(Globals.GetEnumDescription(category))
        Next

        'add EventId = 5059 as an extended property of the appointment
        appointment.SetExtendedProperty(m_eventIdExtendedPropertyDefinition, 5059)

        appointment.Save(SendInvitationsMode.SendOnlyToAll)

        Return appointment
    Catch
        Throw New Exception("Can't save appointment")
    End Try

End Function

Private Shared Sub AcceptAppointmentAsAttendees(appointment As Appointment)

    For Each attendee In appointment.RequiredAttendees
        Try
            ConnectToServer(attendee.Address.ToString())
            ImpersonateUser(attendee.Address.ToString())

            For Each a In FindRelatedAppiontments(appointment)
                a.Categories.Add(Globals.GetEnumDescription(CalendarItemCategory.Workshop))
                a.Update(ConflictResolutionMode.AlwaysOverwrite, SendInvitationsOrCancellationsMode.SendToNone)
                a.Accept(True)
            Next

        Catch
            Throw
        End Try
    Next
End Sub

Private Shared Function FindRelatedAppiontments(appointment As Appointment) As List(Of Appointment)

    Dim view As New ItemView(1000)
    Dim foundAppointments As New List(Of Appointment)

    view.PropertySet =
        New PropertySet(New PropertyDefinitionBase() {m_eventIdExtendedPropertyDefinition})

    'Extended Property value = 5059
    Dim searchFilter = New SearchFilter.IsEqualTo(m_eventIdExtendedPropertyDefinition, 5059)

    For Each a In _service.FindItems(WellKnownFolderName.Calendar, searchFilter, view)
        If a.ExtendedProperties.Count > 0 Then
            foundAppointments.Add(appointment.Bind(_service, CType(a.Id, ItemId)))
        End If
    Next

    Return foundAppointments

End Function 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T08:39:26.430

有一件事是肯定的，在 EWS 中没有任何直截了当的东西。老实说，到目前为止，我还没有从内部日历集成到 Exchange 日历，我的经验是相反的，即在交换中得到什么到内部日历。

无论如何，在阅读了您的代码之后，我认为您几乎就在那里。但是，我建议您通过使用[流式通知](http://msdn.microsoft.com/en-us/library/exchange/hh312849%28v=exchg.140%29.aspx)来捕捉与与会者联系的约会，这并不难！所以我会说步骤应该是这样的

1.  创建约会
2.  应用扩展属性的东西（我建议使用 GUID 而不是硬编码的数字）如下

创建一个扩展属性，并为约会放置 guid，除非您从另一个约会中复制它，否则它不会改变（毕竟它只是一个属性）

```
private static readonly PropertyDefinitionBase AppointementIdPropertyDefinition = new ExtendedPropertyDefinition(DefaultExtendedPropertySet.PublicStrings, "AppointmentID", MapiPropertyType.String);
public static PropertySet PropertySet = new PropertySet(BasePropertySet.FirstClassProperties, AppointementIdPropertyDefinition);

//Setting the property for the appointment 
 public static void SetGuidForAppointement(Appointment appointment)
{
    try
    {
        appointment.SetExtendedProperty((ExtendedPropertyDefinition)AppointementIdPropertyDefinition, Guid.NewGuid().ToString());
        appointment.Update(ConflictResolutionMode.AlwaysOverwrite, SendInvitationsOrCancellationsMode.SendToNone);
    }
    catch (Exception ex)
    {
        // logging the exception
    }
}

//Getting the property for the appointment
 public static string GetGuidForAppointement(Appointment appointment)
{
    var result = "";
    try
    {
        appointment.Load(PropertySet);
        foreach (var extendedProperty in appointment.ExtendedProperties)
        {
            if (extendedProperty.PropertyDefinition.Name == "AppointmentID")
            {
                result = extendedProperty.Value.ToString();
            }
        }
    }
    catch (Exception ex)
    {
     // logging the exception
    }
    return result;
} 
```

3.  使用 StreamingNotificationEvent 赶上约会。在我看来，这样做的一个好方法是同时运行 Organizer 和 Attendee，并赶上他们之间的约会。要查看示例，我已经发布了对上一个问题[Multiple impersonation-threads in Exchange Web Service (EWS)](https://stackoverflow.com/questions/14436726/multiple-impersonation-threads-in-exchange-web-service-ews/14455878#14455878)的答案。如果您发现我的答案很有用，请为这两个帖子的答案（这里和那里）投票。

我不想让你害怕，但是一旦你解决了你当前的问题；如果你想继续它会变得更复杂。我可以写下我是如何解决会议问题的，但我根本看不出来，所以如果你自己写可能会更好。

干杯

# python - 芹菜从 task_success 处理程序中关闭工人不起作用

> ID：14859786
> 
> 赞同：2
> 
> 时间：2013-02-13T17:50:24.887
> 
> 标签：python, celery

我试图让一名工作人员一次只运行一项任务，然后关闭。我已经让关闭部分正常工作（这里的一些背景：[celery 通过在 task_postrun 信号中提高 SystemExit 来尝试关闭工作者，但总是挂起并且主进程从不退出](https://stackoverflow.com/questions/13260181/celery-trying-shutdown-worker-by-raising-systemexit-in-task-postrun-signal-but-a)），但是当它关​​闭时，我收到一个错误：

```
[2013-02-13 12:19:05,689: CRITICAL/MainProcess] Couldn't ack 1, reason:AttributeError("'NoneType' object has no attribute 'method_writer'",)
Traceback (most recent call last):
  File "/usr/local/lib/python2.7/site-packages/kombu/transport/base.py", line 104, in ack_log_error
    self.ack()
  File "/usr/local/lib/python2.7/site-packages/kombu/transport/base.py", line 99, in ack
    self.channel.basic_ack(self.delivery_tag)
  File "/usr/local/lib/python2.7/site-packages/amqplib/client_0_8/channel.py", line 1742, in basic_ack
    self._send_method((60, 80), args)
  File "/usr/local/lib/python2.7/site-packages/amqplib/client_0_8/abstract_channel.py", line 75, in _send_method
    self.connection.method_writer.write_method(self.channel_id,
AttributeError: 'NoneType' object has no attribute 'method_writer' 
```

为什么会这样？它不仅不确认，而且还会清除队列中剩余的所有其他任务（大问题）。

我该如何解决？

**更新**

下面是更新了所有内容的堆栈跟踪（pip install -U kombu amqp amqplib celery）：

```
[2013-02-13 11:58:05,357: CRITICAL/MainProcess] Internal error: AttributeError("'NoneType' object has no attribute 'method_writer'",)
Traceback (most recent call last):
  File "/usr/local/lib/python2.7/dist-packages/celery/worker/__init__.py", line 372, in process_task
    req.execute_using_pool(self.pool)
  File "/usr/local/lib/python2.7/dist-packages/celery/worker/job.py", line 219, in execute_using_pool
    timeout=task.time_limit)
  File "/usr/local/lib/python2.7/dist-packages/celery/concurrency/base.py", line 137, in apply_async
    **options)
  File "/usr/local/lib/python2.7/dist-packages/celery/concurrency/base.py", line 27, in apply_target
    callback(target(*args, **kwargs))
  File "/usr/local/lib/python2.7/dist-packages/celery/worker/job.py", line 333, in on_success
    self.acknowledge()
  File "/usr/local/lib/python2.7/dist-packages/celery/worker/job.py", line 439, in acknowledge
    self.on_ack(logger, self.connection_errors)
  File "/usr/local/lib/python2.7/dist-packages/kombu/transport/base.py", line 98, in ack_log_error
    self.ack()
  File "/usr/local/lib/python2.7/dist-packages/kombu/transport/base.py", line 93, in ack
    self.channel.basic_ack(self.delivery_tag)
  File "/usr/local/lib/python2.7/dist-packages/amqp/channel.py", line 1562, in basic_ack
    self._send_method((60, 80), args)
  File "/usr/local/lib/python2.7/dist-packages/amqp/abstract_channel.py", line 57, in _send_method
    self.connection.method_writer.write_method(
AttributeError: 'NoneType' object has no attribute 'method_writer' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T12:57:36.763

不建议在 task_postrun 中退出，因为 task_postrun 在“任务主体”错误处理之外执行。

当任务调用 sys.exit 时发生的确切情况没有明确定义，实际上它取决于正在使用的池。

使用多处理，子进程将简单地被一个新进程替换。在其他池中，worker 将关闭，但这可能会发生变化，以便与多处理行为一致。

在任务主体之外调用 exit 被视为内部错误（崩溃）。

“任务主体”是执行的任何内容`task.__call__()`

我认为可能更好的解决方案是使用自定义执行策略：

```
from celery.worker import strategy
from functools import wraps

@staticmethod
def shutdown_after_strategy(task, app, consumer):

    default_handler = strategy.default(task, app, consumer)

    def _shutdown_to_exit_after(fun):
        @wraps(fun)
        def _inner(*args, **kwargs):
            try:
                return fun(*args, **kwargs)
            finally:
                raise SystemExit()
       return _inner
    return _decorate_to_exit_after(default_handler)

@celery.task(Strategy=shutdown_after_strategy)
def shutdown_after():
    print('will shutdown after this') 
```

这不是很漂亮，但是执行策略是为了优化任务执行而不是容易扩展（工作人员通过缓存 Task.Strategy “预编译”每个任务类型的执行路径）

在 Celery 3.1 中，您可以使用“引导步骤”扩展工作人员和消费者，因此很可能会有一个很好的解决方案。

# android - 操作栏样式的溢出菜单项

> ID：14859794
> 
> 赞同：4
> 
> 时间：2013-02-13T17:50:46.247
> 
> 标签：android, themes, android-actionbar

我需要制作完全自定义的溢出菜单项（不同的背景颜色，如图所示）。

![https://dl.dropbox.com/u/7771649/overflow.png](../Images/b4d90dbe90a77a444e1855d0ddfb180f.png)

可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T18:37:53.853

最后一天我必须实施 Action Bar Sherlock。我的情况和你的一样。我已经为我的导航列表实现了适配器。让我们说：

```
public class MyNavigationAdapter extends BaseAdapter {
    Context mContext = null;
    String[] mTitles;
    LayoutInflater mLayOutInflater = null;

    public MyNavigationAdapter(Context context, String[] titles) {
        this.mContext = context;
        this.mTitles = titles;
        mLayOutInflater = (LayoutInflater) context
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    }

    @Override
    public int getCount() {
        return mTitles.length;
    }

    @Override
    public Object getItem(int arg0) {
        return null;
    }

    @Override
    public long getItemId(int arg0) {
        return 0;
    }

    @Override
    public View getView(int position, View view, ViewGroup parent) {
        if (view == null)
            view = mLayOutInflater.inflate(R.layout.my_list_custom_row, parent,false);
        TextView rowName = (TextView) view.findViewById(R.id.title);
        rowName.setText(mTitles[position]);
        rowName.setBackground(your desire drawle);// yo

u can also set color etc.
//OR

if(position%2==0)
        rowName.setBackgroundColor(Color.RED);
        else
            rowName.setBackgroundColor(Color.BLUE);
        return view;
    }

} 
```

在此之后，您必须在您的 Activity onCreate 方法中编写这行代码。

```
 ActionBar actionBar = getActionBar();
    actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_LIST);
actionBar.setListNavigationCallbacks(mNavigationAdapterObj, mNavigationListner); 
```

欲了解更多信息。请[在此处咨询。](http://developer.android.com/guide/topics/ui/actionbar.html#Dropdown)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T18:42:14.597

这个[https://stackoverflow.com/a/14123377/2069363](https://stackoverflow.com/a/14123377/2069363)对我有用！

> 您可以在菜单项的操作布局中使用 Spinner（或 ActionBarSherlock 的 IcsSpinner）创建此类行为。尽管您必须使用一个小技巧 - 隐藏当前选定的项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T18:01:01.467

您可以为每个 MenuItem 设置自定义视图。

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    menu.add("test").setActionView(R.layout.custom_action_menu_item);
    return super.onCreateOptionsMenu(menu);
} 
```

[http://developer.android.com/reference/android/view/MenuItem.html#setActionView%28int%29](http://developer.android.com/reference/android/view/MenuItem.html#setActionView%28int%29)

# drupal-7 - Drupal 7 内容的每个文件访问控制

> ID：14859799
> 
> 赞同：0
> 
> 时间：2013-02-13T17:50:52.163
> 
> 标签：drupal-7

有没有办法限制内容下载“限制匿名用户下载文件”

现在，一旦用户登录并且他能够获得路径的URL，即使他注销也可以重新下载。

我们尝试了 -Rules Module 和 Content_Access Module 无济于事。

它只支持：每个节点的基本规则

每个内容没有基本规则（即视频）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-07T15:38:20.273

请参阅为每个私有文件调用的hook [hook_file_download() 。](https://api.drupal.org/api/drupal/modules%21system%21system.api.php/function/hook_file_download/7)

> 控制对私有文件下载的访问并指定 HTTP 标头。
> 
> 此挂钩允许在选择私有文件下载方法时在文件下载中执行模块权限。模块还可以提供标头来指定文件名或 MIME 类型等信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-07T22:01:42.860

只有同时满足两个条件，您才能通过 Drupal 控制对文件的访问：

1.  私有模式已打开（请参阅 /admin/config/media/file-system）
2.  下载文件夹在 Web 服务器访问之外，即文件上传文件夹内容无法从 Web 访问。

# c# - 有什么方法可以创建多个用户故事

> ID：14859800
> 
> 赞同：1
> 
> 时间：2013-02-13T17:50:54.660
> 
> 标签：c#, rest, rally

我想使用 .NET REST API 创建多个用户故事，但我只知道如何一个一个地创建。

我的响应也很慢，每次创作平均为 2 秒。

有谁能够帮我？

我正在使用的代码：

```
foreach(RCStoryRecord RecStory in ssStoryList)
{
    StoryObject = new DynamicJsonObject();
    RecStoryResult = new RCStoryResultRecord();  

    CreateResult creationResult = restApi.Create("HierarchicalRequirement", StoryObject);
} 
```

# doctrine-orm - 学说2 DQL子查询1行限制

> ID：14859803
> 
> 赞同：5
> 
> 时间：2013-02-13T17:50:57.790
> 
> 标签：doctrine-orm, subquery, limit, dql

我想做一个 DQL 查询，例如：

```
$dql = "select p
        from AcmeDemoBundle:UserTypeA p 
        where p.UserTypeB = :id
        and (
                 select top 1 r.boolean
                 from AcmeDemoBundle:Registry r
             ) 
        = true"; 
```

但似乎 TOP 1 在教义 2 中不是有效功能。

我不知道如何将子查询的结果限制为一行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T20:31:30.047

DQL 不支持对子查询的限制，也不`LIMIT`支持`OFFSET`.

见[http://www.doctrine-project.org/jira/browse/DDC-885](http://www.doctrine-project.org/jira/browse/DDC-885)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-21T17:00:16.933

尽管 Doctrine 本身并不支持这一点，但您可以实现一个名为的自定义函数`FIRST()`来实现这一点：

```
<?php

use Doctrine\ORM\Query\AST\Functions\FunctionNode;
use Doctrine\ORM\Query\AST\Subselect;
use Doctrine\ORM\Query\Lexer;
use Doctrine\ORM\Query\Parser;
use Doctrine\ORM\Query\SqlWalker;

/**
 * FirstFunction ::=
 *     "FIRST" "(" Subselect ")"
 */
class FirstFunction extends FunctionNode
{
    /**
     * @var Subselect
     */
    private $subselect;

    /**
     * {@inheritdoc}
     */
    public function parse(Parser $parser)
    {
        $parser->match(Lexer::T_IDENTIFIER);
        $parser->match(Lexer::T_OPEN_PARENTHESIS);
        $this->subselect = $parser->Subselect();
        $parser->match(Lexer::T_CLOSE_PARENTHESIS);
    }

    /**
     * {@inheritdoc}
     */
    public function getSql(SqlWalker $sqlWalker)
    {
        return '(' . $this->subselect->dispatch($sqlWalker) . ' LIMIT 1)';
    }
} 
```

（更多详情：[https](https://www.colinodell.com/blog/201703/limiting-subqueries-doctrine-2-dql) ://www.colinodell.com/blog/201703/limiting-subqueries-doctrine-2-dql ）

你真的应该只将它用于只读目的，因为 Doctrine 不会在结果中包含其他相关实体（如果你保存它可能会变得孤立或丢失）。

# java - JXTreeTable 中的可变大小行

> ID：14859809
> 
> 赞同：2
> 
> 时间：2013-02-13T17:51:15.773
> 
> 标签：java, swing, renderer, swingx, jxtreetable

是否可以在 JXTreeTable 中有可变大小的行，如果是，那么如何？，我正在尝试更改 TreeExpansionEvent 上的行高（如下所示）：

```
public void treeExpanded(TreeExpansionEvent e)
{
      for (int i = 0; i < table.getRowCount(); i++) {
            System.out.println("Value of img"+table.getValueAt(i,22));

            if (table.getValueAt(i, 22) != null) {
                table.setRowHeight(i,40);
            table.repaint();
            table.revalidate();

            }
        }
} 
```

在运行代码时，我得到以下异常：

```
Exception in thread "AWT-EventQueue-0" java.lang.UnsupportedOperationException: variable height rows not supported
    at org.jdesktop.swingx.JXTreeTable.setRowHeight(JXTreeTable.java:1321)
    at ims.View.ViewImages.treeExpanded(ViewImages.java:559)
    at org.jdesktop.swingx.event.TreeExpansionBroadcaster.fireTreeExpanded(TreeExpansionBroadcaster.java:85)
    at org.jdesktop.swingx.event.TreeExpansionBroadcaster.treeExpanded(TreeExpansionBroadcaster.java:68)
    at javax.swing.JTree.fireTreeExpanded(JTree.java:2766)
    at javax.swing.JTree.setExpandedState(JTree.java:3616)
    at org.jdesktop.swingx.JXTreeTable$TreeTableCellRenderer.setExpandedState(JXTreeTable.java:2921)
    at javax.swing.JTree.expandPath(JTree.java:2204)
    at javax.swing.plaf.basic.BasicTreeUI.toggleExpandState(BasicTreeUI.java:2266)
    at javax.swing.plaf.basic.BasicTreeUI.handleExpandControlClick(BasicTreeUI.java:2253) 
```

请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T18:23:28.543

`JXTreeTable`不支持可变行高。[setRowHeight()](http://download.java.net/javadesktop/swinglabs/releases/weekly/week-44-2006-10-29/swingx/javadoc/org/jdesktop/swingx/JXTreeTable.html#setRowHeight%28int,%20int%29)的文档说明：

> 抛出 UnsupportedOperationException，因为不支持可变高度行。

另请参阅@kleopatra在此[线程中有关此功能的答案。](http://www.java.net/forum/topic/javadesktop/java-desktop-technologies/swinglabs/jxtreetable-variable-row-height)

# python - 使用 cx_Oracle 插入行并记录失败的行？

> ID：14859812
> 
> 赞同：1
> 
> 时间：2013-02-13T17:51:30.893
> 
> 标签：python, oracle, cx-oracle

我想要做的是使用 cx_Oracle 插入一堆行，如果有错误（即违反约束）记录坏行。

这是我将如何使用执行执行此操作的 sudo 代码，但这似乎不是很有效。

```
for row in rows:
    try:
        cursor.execute("sql", row)
    except InsertError:
        badRecordCSVFile.write(row) 
```

我阅读了[文档](http://cx-oracle.sourceforge.net/html/cursor.html)，起初似乎[executemany](http://cx-oracle.sourceforge.net/html/cursor.html#Cursor.executemany)是我想要的。但是，在阅读了这个[线程](http://en.usenet.digipedia.org/thread/15912/2704/)之后，executemany 似乎只是处理查询直到它失败（不是我想要的）。

所以我的问题是插入行并记录失败的行的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T17:53:47.150

如果你在插入语句中使用 SQL 参数，这就足够高效了；瓶颈将在与 Oracle 的网络通信中。

通过使用 SQL 参数，Oracle 有机会准备一个查询计划，然后在每次插入时重用它。

但是，如果您打算在插入失败时回滚事务，则最好使用`.executemany()`.

# mysql - MySQL：获取具有字段 >= 值的第一行 - 有没有办法加快速度？

> ID：14859816
> 
> 赞同：0
> 
> 时间：2013-02-13T17:51:53.887
> 
> 标签：mysql, optimization, where

这里有张桌子：

```
CREATE TABLE `test` (
  `thing` int(10) unsigned NOT NULL,
  `price` decimal(10,2) unsigned NOT NULL,
  PRIMARY KEY (`thing`,`price`),
  KEY `thing` (`thing`),
  KEY `price` (`price`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
```

以及那里的一些价值观：

```
INSERT INTO test(thing,price)
VALUES
(1,5.00),
(2,7.50),
(3,8.70),
(4,9.00),
(5,9.50),
(6,9.75),
(7,10.00),
(8,10.50),
(9,10.75),
(10,11.00),
(11,11.25); 
```

我想`price`从这张表中得到一个 MINIMAL，比说，更多`9.2`- 那是`(5,9.50)`记录。所以，我这样做： `SELECT thing, price FROM test WHERE price > 9.2 ORDER BY price LIMIT 1`。它的 EXPLAIN 输出表明 MySQL 遍历了超过 9.2 的所有 7 行：

```
id  select_type table   type    possible_keys   key key_len ref rows    Extra
1   SIMPLE  test    range   price   price   5   \N  7   Using where; Using index 
```

有没有办法以某种方式加快速度？这样 MySQL 会给我一个比我的条件多一点的记录吗？

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T18:11:42.363

你希望它有多快？这现在有多慢？这可能是过早优化的情况。请理解，解释计划中的行数只是一个估计值。

但是，如果有什么不同，试试这个（？？）：

```
SELECT thing, min(price) FROM test WHERE price > 9.2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T18:16:59.393

在 上创建索引`price`。您可能不希望主键 on `(thing, price)`，因为这将允许 a`thing`拥有多个`price`。只`thing`做主键。（我假设您不希望某个特定值`thing`具有多个`price`值。）

# sql-server - T-SQL 将计算列格式化为时间

> ID：14859817
> 
> 赞同：5
> 
> 时间：2013-02-13T17:51:56.857
> 
> 标签：sql-server, tsql, datetime

可以在这方面使用大师的帮助。试图计算两个日期时间值之间的时间并在 T-SQL 查询中显示为时间......

```
SELECT arrivalDate - departDate AS timeToComplete 
```

这应始终少于 24 小时。但是谁知道用户实际输入了什么？

我一直在尝试这样的事情，但没有任何结果。

```
SELECT  
   CAST(time(7), 
   CONVERT(datetime, arrivalDate - departDate) AS timeToComplete) AS newTime, 
```

有没有一种方法可以显示结果，而不是`1:23:41`作为示例显示结果：

```
0D, 1H, 23M, 33S. 
```

感谢您对此的任何指导。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T18:30:06.207

您可以在几秒钟内获得总差异，然后继续从中获取最大的部分。即，从天开始，然后是小时、分钟和秒。

```
DECLARE @arrivalDate DATETIME = '2013-01-19 23:59:59'
DECLARE @departDate DATETIME = '2013-01-25 11:52:30'

DECLARE @SecondsDifference INT = DATEDIFF(SECOND, @arrivalDate, @departDate)

DECLARE @DayDifference INT = @SecondsDifference / 86400
DECLARE @HourDifference INT = (@SecondsDifference - (@DayDifference * 86400)) / 3600
DECLARE @MinDifference INT = (@SecondsDifference - (@DayDifference * 86400) - (@HourDifference * 3600)) / 60
DECLARE @SecDifference INT = (@SecondsDifference - (@DayDifference * 86400) - (@HourDifference * 3600) - (@MinDifference * 60)) 
```

为了清楚起见，我在这里使用变量完成了它，但是您可以将它处理成一个查询。DATEDIFF 不适用于较小的差异，直到您删除较大的差异，因为您会得到总数。例如：

```
DATEDIFF(HOUR, @arrivalDate, @departDate) 
```

将返回总小时数，而不是小时数减去一整天。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T18:10:39.473

只是为了与众不同:) 尝试使用这种方法：

声明@date1 日期时间；声明@date2 日期时间；

```
set @date1 = '2012-05-01 12:00:000'
set @date2 = '2012-05-01 18:00:000'

    SELECT 
    STUFF(
        STUFF(
            STUFF(
                RIGHT(CONVERT(NVARCHAR(19), CONVERT(DATETIME, DATEADD(second, DATEDIFF(S, @date1, @date2), '20000101')), 120), 11), 
                3, 1, 'D, '), 
            8, 1, 'H, '), 
        13, 1, 'M, ') + ' S'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T20:30:36.487

终于在这个链接上找到了一个很好的解决方案， [SQL - Seconds to Day, Hour, Minute, Second](https://stackoverflow.com/questions/12379466/sql-seconds-to-day-hour-minute-second) 感谢大家的帮助，它让我进一步了解了这个问题并搜索了正确的信息。

# jsf - p:calendar 上的正则表达式日期验证

> ID：14859823
> 
> 赞同：0
> 
> 时间：2013-02-13T17:52:52.183
> 
> 标签：jsf, primefaces

我的日历有 readOnlyInput="false" ，因此用户可以输入错误的日期，例如 2013 年 13 月 13 日。

如果用户更喜欢键入日期而不是使用 datePicker 弹出窗口，有没有办法 regexValidate 我的日期？

```
<p:calendar id="birthDate" size="22" locale="#{view.locale}"
                            maxdate="#{userCreationBean.maxDate}" navigator="true"
                            yearRange="c-100" readOnlyInput="false"
                            value="#{userCreationBean.user.birthDate}"
                            mindate="01/01/1900" pattern="dd/MM/yyyy"
                            style="left: 194px !important;"

                            >
                        </p:calendar> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T18:09:14.803

[`<f:validateRegex>`](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/f/validateRegex.html)验证器仅适用于输入`String`值，而不适用于`Date`输入值，因此不适合您的目的。

而是使用[`<f:convertDateTime>`](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/f/convertDateTime.html)转换器。

```
<p:calendar ...>
    <f:convertDateTime pattern="dd/MM/yyyy" />
</p:calendar> 
```

默认情况下，它[是非宽松](http://docs.oracle.com/javase/7/docs/api/java/text/DateFormat.html#setLenient%28boolean%29)的，因此在输入无效日期时会引发转换器异常。如有必要，您可以按`converterMessage`输入组件上的属性自定义转换器消息。

# python - Google Drive API - maximumChangeId 未更新

> ID：14859839
> 
> 赞同：0
> 
> 时间：2013-02-13T17:53:36.690
> 
> 标签：python, google-drive-api

我正在用 Python 开发一个与 Google Drive 同步的应用程序。在查找对文件的更改时，我使用了 changes() API 调用。不幸的是，由于某种原因，我每次都得到相同的最大更改 ID，所以我每次都得到相同的更改。我的代码是

```
 changeResults = driveRC.client.changes().list(includeDeleted = True, startChangeId = driveRC.changeID).execute()
    # Do some stuff
    driveRC.changeID= changeResults['largestChangeId'] 
```

最后，changeID 根据调用结果更新，因此下次调用时应该使用新的changeID。但是每次我进行更改调用时，我都会从 Google 收到我在调用中发送的相同 changeId。第一次调用它时使用的是我之前通过空调用获得的更改 ID。任何人都知道这是为什么，或者我做错了什么？

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T18:50:07.633

maximumChangeId 仅在有用户活动/要报告的新更改时更改。如果您在重复调用中获得相同的最大更改 ID，则仅表示没有可用的更改。

按照您的称呼方式，您仍然会获得最新的更改，因为 startChangeId 包含在内。您可能希望向 startChangeId 添加 +1 以避免两次获得最后一次更改。

# python - 继承 numpy.vectorize 函数

> ID：14859840
> 
> 赞同：3
> 
> 时间：2013-02-13T17:53:37.773
> 
> 标签：python, numpy

在寻找一个不起眼的错误时，我偶然发现了这个最小示例最能证明的东西：

```
import numpy as np

class First(object):
    def __init__(self):
        self.vF = np.vectorize(self.F)
        print "First: vF = ", self.vF

    def F(self, x):
        return x**2

class Second(First):
    def __init__(self):
        super(Second, self).__init__()
        print "Second: vF = ", self.vF

    def F(self, x):
        raise RuntimeError("Never be here.")

    def vF(self, x):
        return np.asarray(x)*2 
```

我希望 的实例`Second`有一个明确定义的`vF`方法，但情况似乎并非如此：

```
arg = (1, 2, 3)

f = First()       
print "calling first.vF: ", f.vF(arg)

s = Second()
print "calling second.vF: ", s.vF(arg) 
```

生产

```
First: vF =  <numpy.lib.function_base.vectorize object at 0x23f9310>
calling first.vF:  [1 4 9]
First: vF =  <numpy.lib.function_base.vectorize object at 0x23f93d0>
Second: vF =  <numpy.lib.function_base.vectorize object at 0x23f93d0>
calling second.vF: 
Traceback (most recent call last):
...
RuntimeError: Never be here. 
```

所以看起来`s.vF`和`f.vF`是同一个对象，即使`s.vF == f.vF`是`False`。

这是预期/已知/记​​录的行为，并且`numpy.vectorize`不能很好地继承，还是我在这里遗漏了一些简单的东西？（当然，在这种特殊情况下，问题很容易通过更改`First.vF`为普通的 Python 方法来解决，或者只是不调用`super`的`Second`构造函数。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T18:00:43.347

这与 NumPy 无关。这是完全合理的语言设计决策（以及您决定使用该语言的方式）相互作用的结果：

*   实例属性优先于类属性。我相信你会同意这是合理的。
*   方法是类属性，并没有什么特别之处。我相信您会同意这是合理的（如果您不同意，请查看描述符，特别是允许`self.F`工作的绑定方法）。
*   继承的实例属性附加到同一个对象，而不是一些奇怪的“父代理”对象或其他东西。我相信你会同意这是合理的。

结合起来，如果您不牢记细节而是使用简化的心理模型（例如心理分离方法和“数据”属性），这些完全合理的行为可能会产生意想不到的行为。详细地说，这发生在您的示例中：

*   调用相应的构造函数。这是要么`First.__init__`，要么`Second.__init__`立即调用`First.__init__`。
*   因此，`obj.vF`始终*是*`First.__init__`为 all创建的矢量化函数`obj`。
*   但是，每个对象的矢量化函数都包装`self.F`了相应对象的 。在第二个对象的情况下，这是`RuntimeError`-raise `Second.F`。

您可能应该在这里只使用常规`vF`方法，因为由于属性查找的工作方式，这允许子类轻松覆盖（另请参见：MRO）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T17:58:12.783

`numpy.vectorize`这与或`numpy`一般来说真的无关......

这里发生的是创建实例属性 ( ) 的`Second.__init__`调用（实际上是一个实例方法包装器）并将其存储在实例上。现在，当您查找时，您会得到猴子补丁版本而不是原始实例方法。`First.__init__``vF``self.F``Second.F``vF``vF``Second.vF`

# ruby-on-rails - Rails 在服务器启动时遇到 url 错误：Spree/home#index 中的 ExecJS::RuntimeError

> ID：14859844
> 
> 赞同：0
> 
> 时间：2013-02-13T17:53:52.753
> 
> 标签：ruby-on-rails, ruby-on-rails-3, node.js, ruby-on-rails-3.2, spree

我正在尝试在 mac os 上设置代码。它在 ubuntu 上运行良好。我安装了所有的 gem，当我在打开服务器后点击 url 时，我收到了这个错误。深感沮丧

```
Showing /Users/ayruskrishna/code/krizda/app/views/spree/shared/_header.html.erb where line #13 raised:

FATAL ERROR: CodeRange::GetNextAllocationBlock Allocation failed - process out of memory

  (in /Users/ayruskrishna/.rvm/gems/ruby-1.9.3-p385/gems/spree_core-1.2.0/app/assets/javascripts/store/checkout.js.coffee)
Extracted source (around line #13):

10: <%= favicon_link_tag '/assets/favicon1.ico' %>
11: <%= stylesheet_link_tag 'store/all', :media => 'screen' %>
12: <%= csrf_meta_tags %>
13: <%= javascript_include_tag 'store/all' %>
14: </head>
15: <body>
16:   <div class="wrap">
Trace of template inclusion: app/views/layouts/spree.html.erb

Rails.root: /Users/ayruskrishna/code/krizda 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T03:25:59.337

看来您正在使用 Spree 1.2.0 我建议尝试更新版本（v1.2.4 在同一稳定系列中可用）。我还会查看 Activity Monitor OS X 应用程序。对我来说，狂欢商店通常使用不到 200MB 的 RAM。

您还可以考虑使用替代 Web 服务器... [http://puma.io/](http://puma.io/)声称其内存占用量比某些替代方案小得多。

# episerver - EPISERVER 6 R2 选择/未选择默认值不起作用

> ID：14859845
> 
> 赞同：0
> 
> 时间：2013-02-13T17:53:54.570
> 
> 标签：episerver

我正在尝试在 Episerver>Admin>My page type>Edit 属性中将 Selected/not selected 属性的默认值设置为 true。这应该创建一个复选框，在使用我的页面类型创建新页面时选中该复选框。但是，创建新页面后，该复选框仍未选中。

使用“我的页面”模板的当前页面而非新页面也存在同样的问题。

我尝试在后面的代码中设置 Selected/not selected 属性，这很有效，但是，我想使用内置功能，以便我可以拥有更多控制权。

我会很感激一些建议/帮助。是 Episerver 错误还是我缺少的东西？

ps 我在episerver论坛上发布了同样的问题，但没有得到任何回复

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T23:32:14.043

在 Selected/not selected 属性上将默认值设置为“True”应该可以工作......

![将默认值设置为“真”](../Images/32db21881b3036c6fb7017bad929bece.png)

我在全新安装的 CMS 6 R2 上对此进行了测试，并且运行良好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T08:59:40.527

我尝试使用 Episerver 菜单创建一个新页面，并选中了该复选框。但是，我们确实使用 CreateWritableClone 以编程方式创建了一些页面，并且这些页面基于另一个默认页面，该页面没有选中复选框。这是我的问题的原因。我所要做的就是检查它，一切正常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T20:41:48.533

更改页面类型定义属性强制设置后，现有页面实例不会受到影响。如前所述 - 指定默认值 'True' 应该可以工作。在干净安装上进行了测试。您是手动创建页面类型还是使用 PageTypeBuilder？

# css - CSS3 webkit 动画 2d 问题

> ID：14859846
> 
> 赞同：0
> 
> 时间：2013-02-13T17:53:54.697
> 
> 标签：css, animation, webkit, transform

我正在使用以下 css3 代码进行 2d 360 度动画。它适用于所有浏览器（当然版本 < 10 除外），但我无法使其适用于 webkit。正如您在此处看到的，现场示例[http://www.franksdonuts.gr/mainpage/](http://www.franksdonuts.gr/mainpage/) webkit (chrome, safari) 失败。我的代码如下：

```
@keyframes spinner {
 0% {
 -webkit-transform:rotate(0deg);
 -moz-transform:rotate(0deg);
 -ms-transform:rotate(0deg);
 -o-transform:rotate(0deg);
 transform:rotate(0deg);
}
 100% {
 -webkit-transform:rotate(360deg);
 -moz-transform:rotate(360deg);
 -ms-transform:rotate(360deg);
 -o-transform:rotate(360deg);
 transform:rotate(360deg);
}
}
.spinner {
-webkit-animation: spinner 10s infinite linear;
-moz-animation: spinner 10s infinite linear;
-ms-animation: spinner 10s infinite linear;
-o-animation: spinner 10s infinite linear;
animation: spinner 10s infinite linear;
} 
```

是否有更好的解决方案也可以使用 ie9 实现这种 2d 旋转？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T17:58:19.157

您应该使用专有的关键帧标签。

```
@-moz-keyframes
@-webkit-keyframes
@-o-keyframes 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T17:58:26.870

你看过Greensock JS吗？这真是太棒了，太方便了。

[http://www.greensock.com/get-started-js/](http://www.greensock.com/get-started-js/)

享受！

# cuda - CUDA 寄存器使用

> ID：14859848
> 
> 赞同：4
> 
> 时间：2013-02-13T17:53:57.933
> 
> 标签：cuda, gpu

CUDA 手册指定了每个多处理器的**32 位**寄存器的数量。是不是意味着：

1.  双变量需要两个寄存器？

2.  指针变量需要两个寄存器？- 6 GB 内存的 Fermi 上必须不止一个寄存器，对吧？

3.  如果对问题 2 的回答是肯定的，那么使用更少的指针变量和更多的`int`索引一定会更好。

    例如，这个内核代码：

    ```
    float* p1;               // two regs
    float* p2 = p1 + 1000;   // two regs
    int i;                   // one reg
    for ( i = 0; i < n; i++ )
    {
        CODE THAT USES p1[i] and p2[i]
    } 
    ```

    理论上需要比这个内核代码更多的寄存器：

    ```
    float* p1;               // two regs
    int i;                   // one reg
    int j;                   // one reg
    for ( i = 0, j = 1000; i < n; i++, j++ )
    {
        CODE THAT USES p1[i] and p1[j]
    } 
    ```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-13T18:17:56.197

您的三个问题的简短答案是：

1.  是的。
2.  是的，如果代码是为 64 位主机操作系统编译的。设备指针大小始终与 CUDA 中的主机应用程序指针大小匹配。
3.  不。

为了扩展第 3 点，请考虑以下两个简单的内存复制内核：

```
__global__
void debunk(float *in, float *out, int n)
{
    int i = n * (threadIdx.x + blockIdx.x*blockDim.x);

    for(int j=0; j<n; j++) {
        out[i+j] = in[i+j];
    }
}

__global__
void debunk2(float *in, float *out, int n)
{
    int i = n * (threadIdx.x + blockIdx.x*blockDim.x);
    float *x = in + i;
    float *y = out + i;

    for(int j=0; j<n; j++, x++, y++) {
        *x = *y;
    }
} 
```

根据您的估计，`debunk` *必须*使用较少的寄存器，因为它只有两个局部整数变量，而`debunk2`有两个额外的指针。然而，当我使用 CUDA 5 发布工具链编译它们时：

```
$ nvcc -m64 -arch=sm_20 -c -Xptxas="-v"  pointer_size.cu 
ptxas info    : 0 bytes gmem
ptxas info    : Compiling entry function '_Z6debunkPfS_i' for 'sm_20'
ptxas info    : Function properties for _Z6debunkPfS_i
    0 bytes stack frame, 0 bytes spill stores, 0 bytes spill loads
ptxas info    : Used 8 registers, 52 bytes cmem[0]
ptxas info    : Compiling entry function '_Z7debunk2PfS_i' for 'sm_20'
ptxas info    : Function properties for _Z7debunk2PfS_i
    0 bytes stack frame, 0 bytes spill stores, 0 bytes spill loads
ptxas info    : Used 8 registers, 52 bytes cmem[0] 
```

它们编译为完全相同的寄存器计数。如果你反汇编工具链输出，你会发现除了设置代码之外，最终的指令流几乎是相同的。造成这种情况的原因有很多，但基本上可以归结为两个简单的规则：

1.  试图从 C 代码（甚至 PTX 汇编程序）中确定寄存器计数大多是徒劳的
2.  试图重新猜测一个非常复杂的编译器和汇编器也大多是徒劳的。

# php - Wordpress 内容工作流程

> ID：14859851
> 
> 赞同：0
> 
> 时间：2013-02-13T17:54:05.020
> 
> 标签：php, wordpress, plugins

我正在开发一个简单的内容工作流系统，其中提交一个项目以供审查，并在审查后发布。我不能使用发布状态，因为旧版本必须在新版本处于审核中时可见。

我真的不想创建自己的表来存储这些信息，所以我正在考虑使用修订系统添加一个修订，它的帖子状态标记为审查中。然后我会在审查面板/编辑页面中显示它，但向用户显示的仍然是旧的。一旦审核被成功接受，它将取代旧的。

问题是我找不到任何关于如何将更新的帖子保存为评论的信息；有谁知道如何做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T04:02:50.477

事实证明，这个 cookie 很难破解，但我学到了很多东西，我觉得我应该分享给任何其他想要复制这个功能的人。

首先，您需要指定当前的帖子保存是更新还是发布。Aka 是新的帖子，还是不是？我想到了一个聪明的小技巧来检查这个：

```
$isNewPost = $data['post_date_gmt'] == $data['post_modified_gmt']; 
```

我使用的第一个钩子是`wp_insert_post_data`钩子，它在 post 对象被插入/更新到数据库之前被调用。这个钩子很棒，因为它允许您返回任何取消插入数据库的内容。当然，您并不总是想这样做，如果帖子是新的，那么我们应该将其添加到数据库中，因此在审核时会有一个占位符，但我们不只是添加它，而是将帖子状态设置为草稿。如果它是一个更新，那么我们什么都不传回，只是在那里添加评论。

现在，如果帖子是新的，我们也需要钩入`post_updated`钩子，因为只有这样我们才有实际的数据库记录，我将传入的 ID 保存到`wp_insert_post_data`记录中并使用它来查找正确的`post_saved`事件，然后添加评论帖子。

Wordpress 有点奇怪，每当访问一个新的帖子屏幕时，就会将一个帖子添加到数据库中，类型为自动草稿，然后保存在另一个帖子中的几秒钟编辑，一个修订（如果帖子类型支持它，内置的），这也会触发所有后保存事件。我遇到的另一个问题是保存评论帖子，因为它会触发`post_saved`and`wp_insert_post_data`钩子，导致无限循环。

还有一些其他有趣的问题，如果有人好奇，我会非常乐意提供帮助，遗憾的是代码是专有的，因为我是为一家公司编写的，也许我可以说服他们在某个时候开源它（大多数可能不会，因为我们与客户签订了有关隐私的合同）。

我可能会绘制工作流程，因为我认为它足够复杂以保证它；它可能会帮助其他人，这绝对不是一个小问题。

如果您正在处理帖子元（相信我，他们会希望您这样做，即使他们最初说不用担心），我会给出一个建议）使评论帖子与帖子的帖子类型相同审查，并使其成为一个孩子。将原始父级以及所需的任何其他信息保存在 post meta 中。这样您就不必处理重建编辑页面。

# c# - 动态绑定与类型推断

> ID：14859854
> 
> 赞同：4
> 
> 时间：2013-02-13T17:54:20.797
> 
> 标签：c#, dynamic

在[C# 编程语言中，](https://rads.stackoverflow.com/amzn/click/com/0321741765)比尔瓦格纳说：

> 许多人将动态绑定与类型推断混为一谈。类型推断是静态绑定的。编译器在编译时确定类型。例如：
> 
> ```
> var i = 5;             //i is an int (Compiler performs type inference)
> Console.WriteLine(i);  //Static binding to Console.WriteLine(int) 
> ```
> 
> 编译器推断 i 是一个整数。变量 i 上的所有绑定都使用静态绑定。

现在，鉴于这些信息和我自己编造的动态场景：

```
 dynamic i = 5;       //Compiler punts
        Console.WriteLine(i);//This is now dynamically bound 
```

我们知道类型推断是静态绑定的。这意味着动态变量无法使用类型推断来确定类型。如何在不使用类型推断的情况下解析动态类型？

**更新**
要尝试澄清......在运行时我们必须以某种方式找出我是正确的类型？因为我分配了一个文字`5`，所以运行时可以推断出它`i`是一个`int`. 那不是类型推断而不是动态绑定吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-13T18:02:32.403

> 比尔有什么区别？

比尔所做的区别在于，许多人认为：

```
var x = Whatever();
x.Foo(); 
```

将在运行时根据Whatever在运行时返回的对象类型计算出调用什么方法Foo。这不是真的; 那将是

```
dynamic x = Whatever();
x.Foo(); 
```

只是意味着“在编译时计算`var`出类型并将其替换”，而不是“在运行时计算出来”。

> 所以如果我有
> 
> ```
> dynamic i = 5;
> Console.WriteLine(i); 
> ```
> 
> 发生什么了？

编译器生成的代码在道德上是这样的：

```
object i = (object)5;
DynamicCallSite callSite = new DynamicCallSite(typeof(Console), "WriteLine"));
callSite.Invoke(i); 
```

它比这更复杂一些；一方面，调用站点被缓存。但这给了你它的味道。

调用方法`i`通过询问其类型`GetType`，然后启动可以理解反射对象的特殊版本的 C# 编译器。它对`Console`named的成员进行重载决议`WriteLine`，并确定`Console.WriteLine`将被调用的哪个重载首先`i`被键入为 int。

然后它生成表示该调用的表达式树，将表达式树编译为委托，将其缓存在调用站点中，并调用委托。

第二次执行此操作时，缓存的调用站点在其缓存中查找，并看到最后一次`i`是 int，调用了特定的委托。因此，它第二次跳过创建调用站点并进行重载解析，而只是调用委托。

有关更多信息，请参阅：

[http://ericlippert.com/2012/10/22/a-method-group-of-one/](http://ericlippert.com/2012/10/22/a-method-group-of-one/)

[http://ericlippert.com/2012/11/05/dynamic-contagion-part-one/](http://ericlippert.com/2012/11/05/dynamic-contagion-part-one/)

[http://ericlippert.com/2012/11/09/dynamic-contagion-part-two/](http://ericlippert.com/2012/11/09/dynamic-contagion-part-two/)

可以从 Chris 和 Sam 的博客中获得有关该功能的历史观点：

[http://blogs.msdn.com/b/cburrows/archive/tags/dynamic/](http://blogs.msdn.com/b/cburrows/archive/tags/dynamic/)

[http://blogs.msdn.com/b/samng/archive/tags/dynamic/](http://blogs.msdn.com/b/samng/archive/tags/dynamic/)

他们做了很多实施；然而，其中一些文章反映了过时的设计选择。遗憾的是，我们从未使用过“幻影法”算法。（不是一个伟大的算法，但一个伟大的名字！）

# javascript - IIS 8 并重定向到特定页面

> ID：14859857
> 
> 赞同：1
> 
> 时间：2013-02-13T17:54:26.470
> 
> 标签：javascript, html, iis

IIS 8.0 中有没有办法将对特定文件的请求重定向到另一个文件？例如，如果我在静态 html 页面中有这个相对路径：

```
<script language="JavaScript" src="../res/topframe.js"></script> 
```

topframe.js 文件已损坏-我需要对“topframe.js”的每个请求都提供在更正后的文件“topframefixed.js”中找到的 javascript，该文件可能具有如下网址：

```
<script language="JavaScript" src="http://mywebserver/scripts/topframefixed.js"></script> 
```

我完全控制了 IIS 服务器，但我无法编辑那些静态 html 页面（有 1000 个）。而且我认为损坏的 js 文件的路径是相对的，这会使事情变得复杂——每个静态页面的绝对 url 都不同。所以我真的必须将调用重定向到一个特定的文件名，而不是整个 url。

这可能吗？或者也许是在 IIS 之外完成此任务的另一种方法？我查看了 IIS 管理器中的 HTTP 重定向功能，我认为它不会有帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T19:09:05.357

好的，想通了。可能可以通过 IIS 管理器执行此操作，但我无法找到方法……但我能够使用通配符重定向来执行此操作。我将 IIS 服务器 web.config 编辑为如下所示：

```
<configuration>
<system.webServer>
    <urlCompression doStaticCompression="true" doDynamicCompression="true" />
    <httpRedirect enabled="true" exactDestination="true" httpResponseStatus="Found">
        <add wildcard="*topframe.js" destination="http://mywebserver/scripts/topframefixed.js" />
    </httpRedirect>
</system.webServer> 
```

它奏效了。

# python - 从文件创建对象 Python 3

> ID：14859858
> 
> 赞同：1
> 
> 时间：2013-02-13T17:54:26.787
> 
> 标签：python, haskell, python-3.x, archlinux, aura.js

好吧，我卡住了。我一直在尝试从 Aura 的保存功能中加载一个带有序列化字符串的文件，然后进入一个对象来使用它。

该文件如下所示：

```
 PkgState {timeOf = SimpleTime {yearOf = 2013, monthOf = February, dayOf = 13, hourOf = 15, minuteOf = 38}, pkgsOf = fromList [("a52dec",[0,7,4,6]),("aalib",[1,4,5,9]),("abs",[2,4,4,1]),("acl",[2,2,51,3]),("acsccid",[1,0,4,1]),("alsa-lib",[1,0,26,1]),("alsa-oss",[1,0,25,1]),("alsa-plugins",[1,0,26,1]),("alsa-utils",[1,0,26,1]),("alsaequal",[0,6,7]),("android-sdk-platform-tools",[16,0,1,2]),("android-udev",[1,6,1]),("anki-beta",[2,0,7,1]),("apache",[2,2,23,1]),("apr",[1,4,6,1]),("apr-util",[1,5,1,1]),("archey",[20121216,1]),("archlinux-keyring",[20130127,1]),("archlinux-themes-slim",[1,2,3]),("aria2",[1,16,3,1]),("asciidoc",[8,6,8,1]),("aspell",[0,60,6,1,1]),("aspell-en",[7,1,2]),("at-spi2-atk",[2,6,2,1]),("at-spi2-core",[2,6,3,1]),("atk",[2,6,0,1]),("attr",[2,4,46,2]),("aura",[1,1,3,0,1]),("autoconf",[2,69,1]),("autofs",[5,0,7,1]),("automake",[1,13,1,1]),("avahi",[0,6,31,5]),("babl",[0,1,10,1]),("bash",[4,2,42,3]),("bc",[1,6,8]),("beecrypt",[4,2,1,5]),("binutils",[2,23,1,3]),("bison",[2,7,1]),("blueman",[1,23,5]),("bluez",[4,101,1]),("bridge-utils",[1,5,1]),("bzip2",[1,0,6,4]),("c-ares",[1,9,1,1]),("ca-certificates",[20130119,1]),("ca-certificates-java",[20120608,1]),("cackey",[0,6,8,1]),("cairo",[1,12,12,2]),("cairo-perl",[1,82,2]),("caps",[0,9,6,1]),("cdparanoia",[10,2,4]),("cdrdao",[1,2,3,6]),("cdrkit",[1,1,11,2]),("chromium",[24,0,1312,70,1]),("chromium-pepper-flash",[11,6,602,167,1]),("cifs-utils",[5,9,1]),("cloog",[0,18,0,1])} 
```

这已经被削减了。我可以手动解析它（这可能会很痛苦）。是否有一些直接从这个开始并得到一个对象？

还是因为 Aura 是用 haskell 编写的，我应该只使用 haskell 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T06:39:11.643

我建议最好的办法是将 aura 保存为 JSON 格式，而不是使用`Show`and`Read`实例。这可能并不比在 Python 中制作一次性解析器更容易，但它将是一个更持久的社区变革。编辑：如果不是很明显，我的意见是最好只使用 Haskell，所以你需要做的就是`fmap read (readFile path)`解析，但我习惯于对于许多短时间的程序员来说这不是一个实用的选择-线。

第一步：获取光环代码

```
git clone https://github.com/fosskers/aura.git
cd aura 
```

第 2 步：找到它在哪里 serealize 命名的东西`PkgState`：

```
grep 'writeFile' * -R 
```

`show`第三步：通过 aeson 包修改格式（当前使用的）为使用 JSON：

```
+{-# LANGUAGE OverloadedStrings #-}
+import qualified Data.ByteString.Lazy.Char8 as BL
+ import Data.Aeson
...
- liftIO $ writeFile filename (show state)
+ liftIO $ BL.writeFile filename (encode state) 
```

第 4 步：第 3 步确实没有完成，我们需要`ToJSON`实例才能使调用`encode`生效。

```
+{-# LANGUAGE OverloadedStrings #-}
+ import Data.Aeson
+ instance ToJSON PkgState of
+     toJSON (PkgState t p) = object [ "timeOf" .= t, "pkgsOf" .= p ] 
```

并在`Aura/Time.hs`：

```
+ {-# LANGUAGE OverloadedStrings #-} 
...    
+ import Data.Aeson
...
+ instance ToJSON SimpleTime of
+      toJSON (SimpleTime y m d h n) = object [ "yearOf"   .= y
+                                            , "monthOf"  .= fromEnum m
+                                            , "dayOf"    .= d
+                                            , "hourOf"   .= h
+                                            , "minuteOf" .= n
+                                            ] 
```

第 5 步：要进行此构建，我们需要将 aeson 包添加`build-deps`到`aura.cabal`.

第 6 步：这可能适合您的目的，但最好让 aura 能够加载 JSON 编码的文件：

```
-import Data.Maybe      (mapMaybe)
+import Data.Maybe      (mapMaybe, fromMaybe)
+import Control.Applicative
+import Control.Monad

...

+instance ToJSON PkgState where
+    toJSON (PkgState t p) = object [ "timeOf" .= t, "pkgsOf" .= p ]
+
+instance FromJSON PkgState where
+    parseJSON (Object v) = PkgState <$> v .: "timeOf" <*> v .: "pkgsOf"
+    parseJSON _ = mzero
+

...

-readState name = liftIO (read `liftM` readFile (stateCache </> name))
-
+readState name = liftIO ((fromMaybe err . decode) `liftM` BL.readFile (stateCache </> name))
+  where err = error "Package State unrecognized" 
```

并再次在`Aura/Time.hs`

```
+
+instance FromJSON SimpleTime where
+    parseJSON (Object v) = SimpleTime <$> v .: "yearOf"
+                                      <*> (toEnum `fmap` (v .: "monthOf"))
+                                      <*> v .: "dayOf"
+                                      <*> v .: "hourOf"
+                                      <*> v .: "minuteOf"
+ 
```

我将把这个 JSON 对象的 python 解码留给你。

# ios6 - 使用 GPUImageMovieWriter 录制带音频的视频，在录制开始和结束时没有抖动？

> ID：14859860
> 
> 赞同：2
> 
> 时间：2013-02-13T17:54:31.770
> 
> 标签：ios6, video-capture, audio-recording, gpuimage

我正在使用 GPUImage 框架连续录制多个视频，并使用 GPUImageVideoCamera 和 GPUImageMovieWriter 实时启用各种过滤器。

当我录制视频时，视频以一个混蛋（冻结半秒）开始，也以一个混蛋结束。我知道这背后的原因是我将movieWriter对象传递给VideoCamera的audioEncodingtarget的语句。

因此，在我的情况下，当我一个接一个地录制多个视频（使用不同的 GPUImageMovieWriter 对象）时，视频预览视图会在每次录制的开始和结束时冻结。

如果我删除音频编码目标语句，情况会显着改善，但我当然不会得到音频。

目前我在录制时使用 AVAudioRecorder 来保存音轨，但我相信这不是一个理想的解决方法。

有什么办法可以解决这个问题。

-- 我查看了 Apple 的 RosyWriter 示例，他们的应用程序以几乎恒定的 30 fps 运行几乎相似但流畅。我尝试使用 RosyWriter 代码（在删除添加紫色效果的代码之后）保存所需的视频，同时向用户显示 GPUImageVideoCamera 的过滤视图，但徒劳无功。当应用未修改的 rosywriter 代码时，仅记录两个视频，其余视频失败。我还尝试在 rosywriter 代码中传递来自 GPUImageVideoCamera 的捕获会话，但只获取带有黑框且没有音频的视频。

请帮助我如何在没有这种抖动的情况下录制带有音频的 GPUImage 过滤视频。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-26T07:34:45.270

我遇到了同样的问题，这是我的解决方法。

正如您所指出的，发生此问题是因为 setAudioEncodingTarget 方法在内部调用 addAudioInputsAndOutputs 以将音频输入/输出设置为捕获会话。

为了避免这个问题，我为 VideoCamera 创建了 justSetAudioEncodingTarget 方法，如下所示（在 GPUImageVideoCamera.m 上）

```
// just set
-(void)justSetAudioEncodingTarget:(GPUImageMovieWriter*)newValue {

if( newValue == nil ) {
    return;
}
addedAudioInputsDueToEncodingTarget = YES;

[super setAudioEncodingTarget:newValue];
} 
```

以下步骤是我的方案，我检查它运行顺利。

创建 VideoCamera 后调用 VideoCamera 的 addAudioInputsAndOutputs。这在开始录制之前是不对的。:)

通过我上面制作的 justSetAudioEncodingTarget 将 MovieWriter 设置为 VideoCamera。

# c# - 循环层次结构到根

> ID：14859861
> 
> 赞同：1
> 
> 时间：2013-02-13T17:54:35.530
> 
> 标签：c#, linq, sql-server-2008

我需要将层次结构循环到根。这是我的表格列

1.  ID
2.  父 ID
3.  描述

我想你明白这个问题。ParentId 为 NULL 的项目是根。

例子

*   Id=1 ParentId=NULL 描述=根
*   Id=2 ParentId=1 描述=Id1 的子级

这可以使用 linq 完成吗？或者使用 sql 查询更好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T18:38:38.760

在 Sql Server 上这样的东西可能是解决方案：
4 如果我们想递归地找到 Child1 的根，我们可以使用

```
WITH n(ID, Description) AS 
   (SELECT ID, Description
    FROM yourTable
    WHERE Description = 'Child1'
        UNION ALL
    SELECT nplus1.ID, nplus1.Description
    FROM youTable as nplus1, n
    WHERE n.ID = nplus1.ParentID)
SELECT name FROM n 
```

看看[MSDN](http://msdn.microsoft.com/en-us/library/ms175972%28SQL.90%29.aspx) 4 *WITH*关键字

Oracle 服务器上的相同解决方案将使用

```
SELECT Description 
  FROM yourTable
  START WITH name = 'Child1'
  CONNECT BY PRIOR ID = ParentID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T20:34:23.863

如果可以更改（反转）您的树结构以使节点包含其子节点而不是引用其父节点，如下所示：

```
 class Node
    {
        public Guid Id { get; set; }
        public IEnumerable<Node> Children { get; set; }
        public string Description { get; set; }
    } 
```

然后很容易将树“展平”为具有如下扩展名的 IEnumerable：

```
 public static IEnumerable<T> FlattenedTree<T>(this T node, Func<T, IEnumerable<T>> getter)
    {
        yield return node;
        var children = getter(node);
        if(children != null)
        {
            foreach (T child in children)
            {
                foreach (T relative in FlattenedTree(child, getter))
                {
                    yield return relative;
                }
            }
        }
    } 
```

你可以在这样的 linq 中使用你的树：

```
 var descriptions = MyTreeStructure.FlattenedTree(x => x.Children).Select(x => x.Description); 
```

# php - 用GD合并两个PNG图像和后面的较小图像

> ID：14859863
> 
> 赞同：0
> 
> 时间：2013-02-13T17:54:43.570
> 
> 标签：php, image, image-processing, imagemagick, gd

我试图通过在图像后面放置一个较小的 png 图像来合并两个 png 图像，该图像的中心有一个透明的“洞”。

在这个例子中“前”图像是**$src**在这个例子中“后”图像是**$dest**

![示例 1](../Images/56e2ca4aec2da466a6ce1c72f38b21c0.png)

到目前为止，我已经使用以下代码使其反向工作（通过将 $dest 图像/较小的图像放在前面）：

```
imagecopymerge($src, $dest,  300, 150, 0, 0, 150, 150, 100); 
```

但是，我不确定如何使用较小的图像“在”较大的图像“后面”，以便它完全适合孔。

我是否需要将图像 ($dest) 重新创建为更大的图像 (500 x 500) 以将 $src 图像“粘贴”到偏移量为 0 的顶部？这东西令人困惑：S

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T18:32:47.533

弄清楚了。

首先，我将较小的图像合并到下面与较大图像匹配的空白图像上。

然后，我将带有孔的图像合并到上面创建的新图像上。见如下：

```
// Get size of larger image
$sz = getimagesize("larger.jpg");

// Create resources
$backing = imagecreatetruecolor($sz[0],$sz[1]);
$img1 = imagecreatefrompng("larger.jpg");
$img2 = imagecreatefrompng("smaller.jpg");

// Merge backing
imagecopymerge($backing, $img2,  300, 150, 0, 0, 150, 150, 100);

// Merge main
imagecopymerge($backing,$img1,  0, 0, 0, 0, $sz[0], $sz[1], 100);

// Save new image
imagepng($backing,$save);

// Destroy resources
imagedestroy($backing);
imagedestroy($img1);
imagedestroy($img2); 
```

希望这对某人有帮助！

# c++ - 可变长度数据对象的 libcurl 多部分帖子

> ID：14859865
> 
> 赞同：0
> 
> 时间：2013-02-13T17:54:53.937
> 
> 标签：c++, http, post, libcurl, multipart

我在尝试使 libcurl 适应特定情况时遇到了困难。我所做的实际上是将可变数量的对象加载到内存中，对它们执行各种转换，然后我想将它们（当然是序列化的二进制数据）作为多部分帖子的一部分上传。

我正在苦苦挣扎的部分是，我只想在它们完成此管道时将它们添加为一部分，然后在发布该特定部分后将其删除。

我考虑过可能给它一个读取函数 ptr，并且在回调上可能手动向缓冲区提供部分标题和数据？这种方法似乎是一种 hack。

我已经尝试过常规的多部分方法（使用多句柄），但这似乎需要预先准备好所有数据，或者从文件中读取。我不希望 libcurl 处理。

回顾一下，我想打开一个连接，启动 http multipart post request -> 进入内存缓冲区 -> 添加为 post attatchment (multipart) -> 将其发送出去 -> 等待下一个数据块 -> 重复直到完成。

先谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T21:04:17.700

使用该[`curl_formadd()`](http://curl.haxx.se/libcurl/c/curl_formadd.html)功能准备一个`multipart/form-data`HTTP 帖子，然后使用该[`CURLOPT_HTTPPOST`](http://curl.haxx.se/libcurl/c/curl_easy_setopt.html#CURLOPTHTTPPOST)选项实际发送它。 `curl_formadd()`具有`CURLFORM_STREAM`启用连接`CURLOPT_READFUNCTION`回调的选项，因此您可以自定义流式传输每个多部分的数据。

# java - Twitter4J 验证凭据并捕获错误

> ID：14859866
> 
> 赞同：5
> 
> 时间：2013-02-13T17:54:58.510
> 
> 标签：java, google-app-engine, twitter4j

我在 google appengine 上有以下代码来测试 twitter 凭据是否使用 twitter4j 有效

```
public void doGet(HttpServletRequest req, HttpServletResponse resp) {
    String Test = "Testing Twitter4J";
    try {

        ConfigurationBuilder confbuilder  = new ConfigurationBuilder();
        confbuilder.setOAuthAccessToken("A") 
        .setOAuthAccessTokenSecret("B") 
        .setOAuthConsumerKey("C") 
        .setOAuthConsumerSecret("D"); 
        Twitter twitter = new TwitterFactory(confbuilder.build()).getInstance(); 

        //Status status = twitter.updateStatus("Working lunch today");
        User user = twitter.verifyCredentials();
        Test = "Successfully updated the status to [" + user.getScreenName() + "].";

    } catch (TwitterException e) {
        Test =  "no";
    }
    try {
        resp.getOutputStream().write(Test.getBytes());
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    return;
} 
```

如果凭据有效，它将按预期工作。如果我撤销访问权限导致凭据无效，我会收到应用引擎错误：

```
Uncaught exception from servlet
twitter4j.TwitterRuntimeException: 401:Authentication credentials (https://dev.twitter.com/pages/auth) were missing or incorrect. Ensure that you have set valid consumer key/secret, access token/secret, and the system clock is in sync.
message - Invalid or expired token
code - 89

Relevant discussions can be found on the Internet at:
    http://www.google.co.jp/search?q=93f2523c or
    http://www.google.co.jp/search?q=8b74a4e3
TwitterException{exceptionCode=[93f2523c-8b74a4e3], statusCode=401, message=Invalid or expired token, code=89, retryAfter=-1, rateLimitStatus=null, version=3.0.3} 
```

来自“用户用户 = twitter.verifyCredentials();” 线。我期待从 javadoc 中抛出 TwitterException：http: [//twitter4j.org/javadoc/twitter4j/api/UsersResources.html#verifyCredentials()](http://twitter4j.org/javadoc/twitter4j/api/UsersResources.html#verifyCredentials()) 但似乎我得到了 TwitterRuntimeException。为什么？我在 javadocs 中找不到任何关于 TwitterRuntimeException 的注释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-26T15:04:05.030

对我来说，解决方案如下：

*   转到您的[推特应用程序](https://dev.twitter.com/apps)
*   选择设置选项卡
*   在应用程序类型 - 访问 - 选择最后一个选项**读取、写入和访问直接消息**

如果这不能解决问题，请尝试添加回调 URL。你可以在这里放任何网址就可以了。

# sql-server - Codeigniter 中的参数号无效错误

> ID：14859867
> 
> 赞同：1
> 
> 时间：2013-02-13T17:55:10.343
> 
> 标签：sql-server, image, codeigniter, binary, storage

我正在 Codeigniter 中处理一个过程，以获取用户上传的图像（使用 CI 上传库管理）并将其插入 SQLServer 数据库中的 varbinary(max) 字段。我的控制器和型号代码如下。

```
if($this->upload->do_upload($upload_name)) {
    //get temp image
    $tmpName  = $config['upload_path'] . $config['file_name'];  

    // Read it into $data variable
    $fp      = fopen($tmpName, 'rb');
    $data = fread($fp, filesize($tmpName));
    fclose($fp);

    //insert into DB
    $this->the_model->storeImage($data, $user_id);

    //delete temp image      
    unlink($config['upload_path'] . $config['file_name']);
}

/***** Function from the_model ************/
function storePropertyImage($image_data, $user_id) {
    $my_db = $this->load->database('admin');
    $stmt = "INSERT INTO my_table (UserID, ImageData) VALUES (" . $my_db->escape($user_id) . ", " . $my_db->escape($image_data) . ")";
    $insert = $my_db->query($stmt);
    return $insert;
} 
```

这一切看起来应该没问题，但是当我运行代码时，我得到了错误：

```
Fatal error: Uncaught exception 'PDOException' with message 
'SQLSTATE[HY093]: Invalid parameter number: mixed named and positional parameters' 
in {my app path}\helpers\mssql_helper.php on line 213 
```

我对此错误消息进行了一些谷歌搜索，结果似乎表明这是 $data 值中有一个冒号字符被发送到模型的结果，使数据库认为我正在尝试传递一个命名参数当我不在的时候。但是，我找不到任何与我的特定用例相匹配的报告，或者关于如何更正错误的大量信息。

我会很感激任何关于我可能会绊倒的地方的见解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T18:40:38.190

`$image_data`是一个二进制字符串。 `->escape`可能无法处理它，因为它可能会转义其中的随机字节，从而给您留下损坏的图像。此外，二进制字符串可能包含使您的查询无效的引号字符（或其他字符）。

在插入 MySQL 之前尝试将二进制字符串编码为十六进制。[`bin2hex`](http://php.net/bin2hex)您可以为此使用 PHP 。

```
$escaped_user_id = $my_db->escape($user_id);
$hex_image = bin2hex($image_data);
$stmt = "INSERT INTO my_table (UserID, ImageData) VALUES ({$escaped_user_id}, X'{$hex_image}')"; 
```

其中`X`是`X{$hex_image}`MySQL 如何处理文字十六进制字符串：[http ://dev.mysql.com/doc/refman/5.1/en/hexadecimal-literals.html](http://dev.mysql.com/doc/refman/5.1/en/hexadecimal-literals.html)

如果这不起作用，您也可以尝试[`UNHEX()`](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_unhex).

```
$escaped_user_id = $my_db->escape($user_id);
$hex_image = bin2hex($image_data);
$stmt = "INSERT INTO my_table (UserID, ImageData) VALUES ({$escaped_user_id}, UNHEX('{$hex_image}'))"; 
```

**编辑**：我没有注意到您使用的是 MSSQL 而不是 MySQL。我的错。在 MSSQL 中，您可以使用`0x`.

```
$escaped_user_id = $my_db->escape($user_id);
$hex_image = bin2hex($image_data);
$stmt = "INSERT INTO my_table (UserID, ImageData) VALUES ({$escaped_user_id}, 0x{$hex_image})"; 
```

# c# - 使用 webmail 客户端归档 POP3 电子邮件

> ID：14859870
> 
> 赞同：0
> 
> 时间：2013-02-13T17:55:18.390
> 
> 标签：c#, asp.net, email, client, webmail

请耐心等待这个问题。据我了解，如果电子邮件客户端从 POP3 服务器读取电子邮件，则该电子邮件将从服务器中删除，并且仅存在于电子邮件客户端中。

在尝试开发非常简单的网络邮件客户端时，我设法将脚本放在一起，从给定的服务器读取电子邮件。但是我正在努力寻找一种最简单的方法来在客户端上存档该电子邮件。

这是片段：

```
protected void Read_Emails()
{
    Pop3Client pop3Client;
    if (Session["Pop3Client"] == null)
    {
        pop3Client = new Pop3Client();
        pop3Client.Connect("mail.mail.com", 110, false);
        pop3Client.Authenticate("user@mail.com", "password");
        Session["Pop3Client"] = pop3Client;
    }
    else
    {
        pop3Client = (Pop3Client)Session["Pop3Client"];
    }
    int count = pop3Client.GetMessageCount();
    DataTable dtMessages = new DataTable();
    dtMessages.Columns.Add("Number");
    dtMessages.Columns.Add("MessageNumber");
    dtMessages.Columns.Add("From");
    dtMessages.Columns.Add("Subject");
    dtMessages.Columns.Add("DateSent");

    for (int i = 1; i <= count; i++)
    {
        try
        {
            Message message = pop3Client.GetMessage(i);
            dtMessages.Rows.Add();
            dtMessages.Rows[dtMessages.Rows.Count - 1]["Number"] = i;
            dtMessages.Rows[dtMessages.Rows.Count - 1]["From"] = message.Headers.From;
            dtMessages.Rows[dtMessages.Rows.Count - 1]["Subject"] = message.Headers.Subject;
            dtMessages.Rows[dtMessages.Rows.Count - 1]["DateSent"] = message.Headers.DateSent;
        }catch{}

    }
    gvEmails.DataSource = dtMessages;
    gvEmails.DataBind();

} 
```

和 ASP.NET 部分

```
<%@ Page Title="Home Page" Language="C#" MasterPageFile="~/Site.master" AutoEventWireup="true"
    CodeBehind="Default.aspx.cs" Inherits="MA2._Default" %>

<asp:Content ID="HeaderContent" runat="server" ContentPlaceHolderID="HeadContent">
</asp:Content>
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">

        <asp:GridView ID="gvEmails" runat="server" AutoGenerateColumns = "false">
            <Columns>
            <asp:BoundField HeaderText = "#" DataField = "Number" />
            <asp:BoundField HeaderText = "From" DataField = "From" />
            <asp:HyperLinkField HeaderText = "Subject" DataNavigateUrlFields = "MessageNumber" DataNavigateUrlFormatString = "~/ShowMessageCS.aspx?MessageNumber={0}" DataTextField = "Subject" />
            <asp:BoundField HeaderText = "Date" DataField = "DateSent" />
            </Columns>
        </asp:GridView>

</asp:Content> 
```

我的问题是如何在客户端保存收到的电子邮件？使用数据库或将它们作为文件存储在服务器上？

我到处寻找可以找到的所有示例，但在任何地方都找不到有关在客户端上保留电子邮件的部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T18:01:44.633

好的，所以我或多或少会尝试为您提供一个概念性的答案，因为您还没有尝试过任何东西……这取决于您对存档的定义。您可以将“数据”归档到数据库或通常的 xml 文件中。您正在做的是将电子邮件分解为对象，您所要做的就是将这些对象存储在您可以检索它们的地方。如果你没有数据库，使用xml文件的方式，考虑制作一系列的xml文件，这样一个就不会变得太大然后变慢。另一种方法是使用传统的 Outlook 存档，我只能在此处为您提供路径：

您能够创建/附加到 .pst 二进制文件的唯一方法是通过互操作服务。以下是一些帮助您入门的链接：

[http://www.codeproject.com/Questions/441470/how-to-read-emails-from-outlook-using-csharp](http://www.codeproject.com/Questions/441470/how-to-read-emails-from-outlook-using-csharp)

[http://www.codeproject.com/Questions/461801/Open-Outlook-asp-net](http://www.codeproject.com/Questions/461801/Open-Outlook-asp-net)

[http://forums.asp.net/t/1041781.aspx/1](http://forums.asp.net/t/1041781.aspx/1)

# c++ - C++如何避免浮点运算错误

> ID：14859875
> 
> 赞同：10
> 
> 时间：2013-02-13T17:55:27.290
> 
> 标签：c++, floating-point, floating-point-precision

我正在编写一个以浮点数递增的循环，但我遇到了以下示例中说明的浮点算术问题：

```
for(float value = -2.0; value <= 2.0; value += 0.2)
    std::cout << value << std::endl; 
```

这是输出：

```
-2
-1.8
-1.6
-1.4
-1.2
-1
-0.8
-0.6
-0.4
-0.2
1.46031e-07
0.2
0.4
0.6
0.8
1
1.2
1.4
1.6
1.8 
```

为什么我得到`1.46031e-07`而不是`0`？我知道这与浮点错误有关，但我无法理解为什么会发生这种情况以及我应该做些什么来防止这种情况发生（如果有办法的话）。有人可以解释（或指向我的链接）以帮助我理解吗？任何输入表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-02-13T18:10:23.417

正如其他人所说，这是因为实数是无限且不可数的集合，而浮点表示使用有限数量的位。浮点数只能近似实数，即使在许多简单的情况下也不精确，因为它们的定义。正如您现在所看到的，`0.2`实际上`0.2`不是，而是一个非常接近它的数字。当您将这些添加到 时`value`，您会在每个步骤中累积错误。

作为替代方案，尝试使用`int`s 进行迭代并将结果划分以将其返回到您需要的域中：

```
for (int value = -20; value <= 20; value += 2) {
  std::cout << (value / 10.f) << std::endl;
} 
```

对我来说，这给出了：

```
-2
-1.8
-1.6
-1.4
-1.2
-1
-0.8
-0.6
-0.4
-0.2
0
0.2
0.4
0.6
0.8
1
1.2
1.4
1.6
1.8
2 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-13T17:57:42.657

没有明确的解决方案可以避免浮点精度损失。我建议看一下以下论文：[每个计算机科学家都应该知道的关于浮点运算](https://ece.uwaterloo.ca/~dwharder/NumericalAnalysis/02Numerics/Double/paper.pdf)的知识。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-02-13T17:56:45.913

这是因为浮点数只有一定的离散精度。

0.2 并不是真正的 0.2，而是在内部表示为稍微不同的数字。

这就是为什么你看到了不同。

这在所有浮点计算中都很常见，你真的无法避免。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-02-13T18:18:31.347

让我们做你的循环，但要提高输出精度。

**代码：**

```
for(float value = -2.0; value <= 2.0; value += 0.2)
    std::cout << std::setprecision(100) << value << std::endl; 
```

**输出：**

```
-2
-1.7999999523162841796875
-1.599999904632568359375
-1.3999998569488525390625
-1.19999980926513671875
-0.999999821186065673828125
-0.79999983310699462890625
-0.599999845027923583984375
-0.3999998569488525390625
-0.19999985396862030029296875
1.460313825418779742904007434844970703125e-07
0.20000015199184417724609375
0.400000154972076416015625
0.6000001430511474609375
0.800000131130218505859375
1.00000011920928955078125
1.20000016689300537109375
1.40000021457672119140625
1.60000026226043701171875
1.80000030994415283203125 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-02-13T18:07:06.033

使用整数并除以：

```
for(int value = -20; value <= 20; value += 2)
    std::cout << (value/10.0) << std::endl; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-13T18:04:22.117

通过一些算法书或使用互联网了解浮点表示。那里有很多资源。

就目前而言，您想要的似乎是某种方式在它非常接近于零时获得零。我们都知道我们称这个过程为“四舍五入”。:) 那么为什么在打印这些数字时不使用它。 `printf`函数为这类事物提供了良好的格式化能力。如果您不知道如何使用 printf 进行格式化，请查看以下链接中的表格。（您可以使用格式进行四舍五入和正确显示数字） printf 参考：[http ://www.cplusplus.com/reference/cstdio/printf/?kw=printf](http://www.cplusplus.com/reference/cstdio/printf/?kw=printf)

- 编辑 -

也许你们中的一些人知道根据数学 1.99999999.... 与 2.0 相同。唯一的区别是表示。但是数量是一样的。

您的浮点问题与此**有点**相似。（这只是为了您的澄清。您的问题与 1.9999.... 的事情不一样。）

# android - Java 客户端无法在 Android 上接收来自 Mosquitto 的消息

> ID：14859876
> 
> 赞同：3
> 
> 时间：2013-02-13T17:55:29.043
> 
> 标签：android, push-notification, mq, mqtt

1.  我的操作系统是 Windows 7,32 位。

2.  我安装 mosquitto-1.1.2-install-win32.exe。

3.  我没有更改`mosquitto.conf`文件，所以没有主题前缀设置。

4.  使用 Mosquitto 订阅主题，例如（订阅窗口）：

    ```
    mosquitto_sub.exe -q 2 -t mytopic
    OR mosquitto_sub.exe -q 2 -t # 
    ```

5.  使用 Mosquitto 发布主题，例如（发布窗口）：

    ```
    mosquitto_pub.exe -q 2 -t mytopic -m “hello″ 
    ```

6.  然后在订阅cmd窗口，我可以收到“hello”

7.  我一直在关注 Dale Lane 的博客和“Android MQTT 示例项目”来访问 Mosquitto。

    ```
    java client(MQTTDemo.java): 
    //i use mobile emulator
    editor.putString(“broker”, "10.0.2.2″); 
    editor.putString(“topic”, "mytopic”); 
    //or editor.putString(“topic”, “#”); '#' match any topic 
    ```

8.  我测试`connectToBroker()`了`MQTTService.java`一下，连接正常。

9.  我用 Mosquitto 再次发布主题“mytopic”。

10.  但是，最后我无法在移动模拟器中收到消息。

    有人知道为什么或任何其他方法吗？

    非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T18:06:22.073

有时取决于代理的配置方式。Mosquitto 代理中有多种方法可以在每个通道的基础上指定主题前缀。在其他时候，订阅主题需要指定为通用的。我不确定这两种方法是否适用于您的情况，但有简单的诊断方法，您没有描述使用它们，所以我将它们作为起点。

1.  简单的判断方法就是订阅`#`然后查看您收到的主题字符串。
2.  始终有一个单独的订阅监控代理。例如，对于 WebSphere MQ，我使用 GUI`#`在测试任何发布之前创建订阅。如果我在 GUI 中而不是在应用程序中获得出版物，则它指向的问题集与我根本没有得到任何东西不同。

对问题的更好描述将包括一些这种鉴别诊断。如果有机会，请重新测试并使用结果编辑问题。

# php - 创建哈希以匹配 Oracle DBMS_UTILITY.get_hash_value

> ID：14859880
> 
> 赞同：2
> 
> 时间：2013-02-13T17:55:57.387
> 
> 标签：php, oracle, hash, database

我正在开发一个带有 mysql 后端的 PHP 应用程序，以用 Oracle 数据库替换现有的 Oracle 表单应用程序。

我收到了 Oracle 数据库的转储，并将这些数据加载到 MySQL。其中一张表包含用户名和密码。密码不是以纯文本形式存储的，而是以散列形式存储的。这些哈希是使用 DBMS_UTILITY 包中的 get_hash_value 函数创建的。

这个内部 Oracle 函数使用的算法是什么？

有谁知道 PHP（或任何其他语言）中会创建相同哈希的函数？

我需要在没有 Oracle 的情况下创建哈希，以便能够在新环境（PHP + MySQL）中验证用户密码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T18:47:08.293

我不会尝试找到一种方法来重新创建密码的单个散列。如今，大多数哈希都可以在彩虹表中找到，因此如果您想保护用户的凭据，则在存储密码时使用盐（最好是个人盐 + 系统盐）已成为强制性的。

因此，与其花费数小时来尝试复制哈希，我只需重置所有用户密码并让他们创建一个新的（或相同的）密码，然后您可以使用 php 哈希算法正确存储该密码。我相信用户会理解的，尤其是如果您无论如何都要重建应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T18:29:15.157

我不相信 Oracle 详细说明了实施。但是您不需要在 PHP 中重新创建它，只需在它周围包装一个函数并从 PHP 中调用它：

```
create function digest( p_username in varchar2, p_password in varchar2 ) return varchar2
is
begin
    return ltrim( to_char( dbms_utility.get_hash_value( upper(p_username)||'/'||upper(p_password), 1000000000, power(2,30) ), rpad( 'X',29,'X')||'X' ) );
end digest;

-- digest by calling db function
select digest('UserA','MyPassword') from dual; 
```

当然，请检查您当前的数据库实现，了解原始哈希是如何创建的。但基本上，如果摘要调用的结果与数据库中的结果匹配，则用户在，否则不。

如果您将后端移动到 MySQL，那么您可能希望切换到使用 MD5 哈希或类似的向前移动。

# .net - 确定哪个 .NET 程序集调用非托管代码

> ID：14859882
> 
> 赞同：0
> 
> 时间：2013-02-13T17:56:01.630
> 
> 标签：.net, clr, unmanaged, managed

我有 .NET 程序集，它从用 C 编写的非托管 DLL 调用函数（不支持 CLR）。非托管 DLL 有什么方法可以确定哪个程序集调用它们的代码？我正在寻找在非托管 DLL 中不启用 CLR 支持的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T18:13:49.773

不，您不能在本机代码中安全地执行堆栈遍历。这仅在托管代码中才有可能，它提供了堆栈框架布局保证。垃圾收集器和 CAS 检查需要。C 编译器具有消除此类保证的优化器。他们可以，因为该语言不支持也不需要堆栈行走。

即使您对优化器进行了微调，您仍然会遇到重大障碍，即遍历 pinvoke 编组器的堆栈帧并将即时生成的机器代码的猜测地址映射到程序集。只有 CLR 知道如何做到这一点。你无法完成这项工作。

# asp.net-mvc - 删除具有一对多的实体。（数据库上下文）

> ID：14859884
> 
> 赞同：0
> 
> 时间：2013-02-13T17:56:06.570
> 
> 标签：asp.net-mvc, entity-framework, entity-framework-4

foreach 不会删除任何内容.. 它似乎只是将表中的某些字段设为 NULL.. .. 之后我如何删除主父级我不确定...一直在寻找一个没有运气的简单解决方案..

```
 [HttpPost, ActionName("Delete")]
    public ActionResult DeleteConfirmed(int id)
    {
        tMember mem = db.tMembers.Find(id);

        // find all VoteScores related to the member and delete them
        var voteScores = db.tMemVoteScores.Where(mvs => mvs.MembersID == mem.MembersID).AsEnumerable();

        foreach (var mvs in voteScores)
        {
            var singleMvs = mvs;
            mem.tMemVoteScores.Remove(singleMvs);
        }

        db.SaveChanges();

        //Delete the actual member now... where is the remove method?  
       // mem.remove???

        return RedirectToAction("Index");
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T18:01:40.187

实体框架中的删除调用需要在 DbSet 级别完成，而不是在列表中找到的单个项目上完成。这也需要为父对象本身完成，即：

```
foreach (var mvs in voteScores)
{
  var singleMvs = mvs;
  db.tMemVoteScores.Remove(singleMvs);
}

db.tMembers.Remove(mem);

db.SaveChanges(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T05:48:19.153

```
tMember mem = db.tMembers.Find(id);
db.Entry(mem).State = EntityState.Deleted;
db.SaveChanges(); 
```

这个怎么样？

# java - Spring连接池配置

> ID：14859885
> 
> 赞同：3
> 
> 时间：2013-02-13T17:56:15.070
> 
> 标签：java, spring, connection-pooling, apache-commons-dbcp

我已经在网上搜索了一段时间，但我还没有解决这个问题：

我有以下数据源配置：

```
 <bean id="cpms.prod.ds"  class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
    <property name="driverClassName"><value>com.mysql.jdbc.Driver</value></property>
    <property name="url"><value>jdbc:mysql://localhost/mysql</value></property>
    <property name="username"><value>test</value></property>
    <property name="password"><value>test</value></property>
    <property name="initialSize" value="1" />
    <property name="maxActive" value="2" />
    <property name="maxIdle" value="1"></property>
 </bean> 
```

这应该足以确保在某一点只有 2 个活动连接，并且这些连接是用于池的。

在我的 java 代码中，我`SimpleJdbcTemplate`用来执行三个查询，据我了解，这个对象应该在每个查询结束后将连接返回到池，还应该阻止第三个查询，而其他一个查询结束。

查看我的数据库管理控制台时，我看到出现 3 个连接，然后更改为睡眠状态。如果我再次运行查询，我会看到另外 3 个连接弹出，另外 3 个保持在那里。

我发现关闭连接的唯一方法是设置：

```
<property name="removeAbandoned" value="true"/>
<property name="removeAbandonedTimeout" value="1"/>

<property name="minIdle" value="0"></property>
<property name="timeBetweenEvictionRunsMillis" value="1000"></property>
<property name="minEvictableIdleTimeMillis" value="1000"></property> 
```

这会强制放弃的连接过程运行并清理旧连接。

我不应该干预这些参数，尤其是不要将它们设置得太低，以免出现性能问题。

我还尝试了[此处](https://ashwinrayaprolu.wordpress.com/2010/06/02/spring-poolable-database-connection/)显示的解决方案以达到相同的效果，直到我将`timeBetweenEvictionRunsMillis`and更改`minEvictableIdleTimeMillis`为较低的值。而且它仍然没有将连接限制为 2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-17T17:18:17.843

JdbcTemplate 中的所有连接都是通过[DataSourceUtils.doGetConnection](http://grepcode.com/file/repo1.maven.org/maven2/org.springframework/spring-jdbc/3.0.1.RELEASE/org/springframework/jdbc/datasource/DataSourceUtils.java#DataSourceUtils.doGetConnection%28javax.sql.DataSource%29 "资源")。您所看到的可能是由于[BasicDataSource中的“智能”](http://commons.apache.org/proper/commons-dbcp/apidocs/org/apache/commons/dbcp/BasicDataSource.html#getRemoveAbandoned%28%29)

从 API：

`Abandonded connections are identified and removed when getConnection() is invoked and the following conditions hold`：

*   `getRemoveAbandoned() = true`
*   **getNumActive() > getMaxActive() - 3**
*   `getNumIdle() < 2`

数据源似乎允许比指定的最大活动连接多 3 个活动连接。

# wpf - Apprpriate Timer 对象在 WPF 中运行音频

> ID：14859886
> 
> 赞同：0
> 
> 时间：2013-02-13T17:56:19.347
> 
> 标签：wpf, timer

我有大型 WPF 应用程序，它也使用 MEF。我想在特定条件下触发音频警报并在用户指定的时间内重复它。音频文件可以是 .wav 或 .mp3。

我正在使用 SoundPlayer 播放音频。我不确定重复间隔使用哪个计时器。

我不想在播放音频时阻塞 UI 线程，也希望它是线程安全的。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T05:16:48.103

Why not consider using Event Aggregation, which is an implementation of publisher subscriber pattern. Whenever your application encounters a condition where it wants to play audio, it would publish its intensions via the event aggregator.

There would be a listener who listens for these events and would play the correct audio based on the type of the event. If there are multiple requests, the listener may play them in parallel or in a sequence. You can implement the desired threading model within the listener and standard thread-sleep

This way, you get to keep all you audio configuration and logic tucked behind a single module. All the other modules will just ‘tell’ this module what they want to play (and optionally for how long)

On the other hand, unless your application is large enough the above approach would be an overkill

A good write-up on event aggregation [http://codebetter.com/glennblock/2009/02/23/event-aggregation-with-mef-with-and-without-eventaggregator/](http://codebetter.com/glennblock/2009/02/23/event-aggregation-with-mef-with-and-without-eventaggregator/)

# excel - VBScript：从 Excel 创建具有文件夹结构的文件

> ID：14859889
> 
> 赞同：1
> 
> 时间：2013-02-13T17:56:26.173
> 
> 标签：excel, vbscript, directory, directory-structure

我将以下 VBS 文件拼凑在一起，以读取 Excel 源文件并创建名称基于 Excel A 列和内容基于 B 列（连接）的文件。这一切都有效...

```
Dim xlsFile
Dim objExcel
Dim outFile
Dim path

path = "C:\Documents and Settings\Andy\Desktop\SHORTURLs\JSPs"
xlsFile = path & "\urls.xls"
Set objExcel = WScript.CreateObject("Excel.Application")
objExcel.Workbooks.open(xlsFile)
' Create the File System Object
Set objFSO = CreateObject("Scripting.FileSystemObject")

intRow = 2 'Row 1 contains headings

' Here is the loop that cycles through the cells
Do Until objExcel.Cells(intRow,1).Value = ""
    strFile    = objExcel.Cells(intRow, 1).Value
    strDestURL = objExcel.Cells(intRow, 2).Value

    ' -- The heart of the create file script
    'Set objTextFile = objFSO.CreateTextFile("./" & strFile & ".jsp", True)
    outFile = path & "" & strFile & ".jsp"
    Set objTextFile = objFSO.CreateTextFile(outFile, True)

    ' Prep file contents
    sText = "<%" & vbCrLf
    sText = sText & "//REDIRECT301" & vbCrLf
    sText = sText & "//System.out.println(""<LOGGED> "" + " & strDestURL & ");" & vbCrLf
    sText = sText & "String dest = """ & strDestURL & """;" & vbCrLf
    sText = sText & "response.setStatus(response.SC_MOVED_PERMANENTLY); // response.SC_MOVED_TEMPORARILY [OR] response.SC_MOVED_PERMANENTLY" & vbCrLf
    sText = sText & "response.setHeader(""Location"", dest);" & vbCrLf
    sText = sText & "response.setHeader(""Connection"", ""close"");" & vbCrLf
    sText = sText & "%>"
    ' Write a line.
    objTextFile.Write(sText)

    objTextFile.Close
    intRow = intRow + 1
Loop

objExcel.Quit
WScript.Quit 
```

但是，我现在需要修改 VBS 以在基于 A 列的文件夹结构中创建文件（B 列不受影响）。Excel 架构：

```
+----------------------+----------------------+
|       Column A       |       Column B       |
+----------------------+----------------------+
| /folder/filename.jsp | /url/destination.jsp |
+----------------------+----------------------+
| /folder/filename.jsp | /url/destination.jsp |
+----------------------+----------------------+
| /folder/filename.jsp | /url/destination.jsp |
+----------------------+----------------------+ 
```

我将如何在这些文件夹中创建文件夹和文件？仅供参考：我相信文件夹结构的深度不应超过 1（即`/folder/file.xxx`不`/folder/folder/file.xxx`）。

PS。我知道`response.setHeader()`在 JSP 文件中是不好的做法，但遗憾的是，我们被迫这样做。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T18:09:03.410

使用 FSO。

1.  `.GetParentFolderName()`从文件规范中获取目录
2.  `.BuildPath()`预先添加一个公共路径前缀
3.  `.FolderExists()`检查是否需要创建目录
4.  `.CreateFolder()`如有必要

# layout - SVG 多页

> ID：14859894
> 
> 赞同：3
> 
> 时间：2013-02-13T17:56:48.003
> 
> 标签：layout, web, svg, web-standards

扩展 SVG 标准以支持多页（又名）的状态`pageSet`如何？

几年前我看到 SVG 1.2 和 SVG Print 计划慢慢停止了，所以我想知道是否有人知道有关 SVG 未来功能的最新信息？其他扩展`pageSet`呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-21T04:40:04.520

我最近发现了 Inkscape 的多页扩展。 [http://inkscape-pages.sourceforge.net/](http://inkscape-pages.sourceforge.net/)

现在拿它进行试运行。

马克T

# dns - 主机名无法解析为 IP 地址

> ID：14859895
> 
> 赞同：1
> 
> 时间：2013-02-13T17:56:50.230
> 
> 标签：dns, cpanel, hosts, whm

我最近开始通过 godaddy 运行 VPS，并且我继续收到以下来自 cPanel 的自动生成电子邮件：

```
Your hostname (server.mydomain.com) could not be resolved to an IP
address. This means that /etc/hosts is not set up correctly, and/or
there is no dns entry for server.mydomain.com. Please be sure that
the contents of /etc/hosts are configured correctly, and also that
there is a correct 'A' entry for the domain in the zone file.

Some or all of these problems can be caused by /etc/resolv.conf
being setup incorrectly. Please check that file if you believe
everything else is correct.

You may be able to automatically correct this problem by using the
'Add an A entry for your hostname' option under 'Dns Functions' in
your Web Host Manager. 
```

我已按照电子邮件中的建议添加了一个 A 条目，但仍然收到错误消息。

当我尝试向 server.mydomain.com 添加一个 dns 区域时，WHM 告诉我`Sorry, a DNS entry for server.mydomain.com already exists.`

但是，WHM 中没有列出 DNS 区域供我查看或编辑我的主机名。

我能够通过 server.mydomain.com 连接到服务器，所以在我看来主机名实际上解析正确。此外，IP 和别名在 中正确列出`/etc/hosts`。

为什么我会收到这封电子邮件，我该如何解决这个问题？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-29T19:55:24.267

通常，此错误电子邮件是由未正确设置的私有名称服务器生成的。此外，还有可能丢失、损坏或格式不正确的 DNS 记录。

如果您使用的是私有名称服务器，请检查以下内容：

1.  您是否使用正确的 IP 地址向注册商注册了私有名称服务器？
2.  您的每个私有名称服务器是否都有 A 记录？
3.  使用它们的域的 DNS 区域中是否列出了正确的名称服务器？

# php - 记录对 SQL Server 数据库的更改并将其发送到客户端的最佳方式？

> ID：14859898
> 
> 赞同：4
> 
> 时间：2013-02-13T17:57:03.027
> 
> 标签：php, sql-server, ajax, sql-server-2008

我有一个包含 12 个表的简单 SQL Server 数据库。每个表有 100 到 1000 行。当我的 Web 应用程序加载时，这些表会直接保存到数组中。从那时起，使用数组而不是直接访问表。每当另一个用户更改数据库中的数据时，都需要更新数组。

为此，我计划使用 ajax 每 10 秒轮询一次 PHP 脚本。该脚本检查这 12 个表中的任何一个的更改，并仅将已进行的更改而不是整个表返回给客户端计算机。

问题是，我不知道如何记录对这 12 个表的任何更改，然后以可以在 Javascript 中解释以更新数组的方式将这些更改返回到客户端计算机。

跟踪 SQL Server 中表更改的最佳/最简单方法是什么？

* * *

也许是一种更清晰的方式来问我更广泛适用的问题 - 有哪些方法可以查询或发现 SQL Server 表随时间的变化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T19:21:29.540

您还可以研究变更数据捕获。这听起来正是您所需要的。这是 BOL：http: [//msdn.microsoft.com/en-us/library/bb522489%28v=sql.105%29.aspx](http://msdn.microsoft.com/en-us/library/bb522489%28v=sql.105%29.aspx)。这是 Pinal Dave 的一篇文章：http: [//blog.sqlauthority.com/2009/08/15/sql-server-introduction-to-change-data-capture-cdc-in-sql-server-2008 /](http://blog.sqlauthority.com/2009/08/15/sql-server-introduction-to-change-data-capture-cdc-in-sql-server-2008/)

基本上它记录所有更改（插入、更新和删除）并允许您从系统表中提取信息。不幸的是，除了为您指出正确的方向之外，我自己对此知之甚少。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T18:19:10.047

我相信我乍一看误读了您的问题，但您似乎将数据存储在 javascript 数组中。如果是这样，请在 javascript 中保留“最后更新”时间戳，并在数据库中保留“最后更新”列。正如其中一条评论所说，在这里实际编码有点多，但有一个想法：

initial.php - 在 javascript 变量中加载所有保存在内存中的数据的页面，该页面将轮询 checkforupdates.php?lastUpdate=[最近更新的时间戳]

checkforupdates.php - 使用“WHERE lastUpdate > providedTimestamp”运行 SQL 查询，回显 json_encode($data)

这足以为您指明正确的方向吗？

# c# - 带锁定的 Rx 并发计划

> ID：14859902
> 
> 赞同：1
> 
> 时间：2013-02-13T17:57:15.850
> 
> 标签：c#, unit-testing, system.reactive

我再次与 Rx 作斗争。这次我遇到了 Observable.Interval 的问题。

我的要求是：

*   我需要每 1 秒运行一次数据收集。
*   我需要每 5 秒检查一次参数的更改。
*   在检查更改时，我无法收集数据。
*   如果数据收集或检查更改的时间超过 1 秒，请不要将这些记号排队，只需跳过它们。
*   如果在数据收集过程中发生更改检查，我希望它等待执行。

我已经尝试使用 Observables 作为间隔，并发现默认情况下，Intervals 将排队错过的滴答声！最后，在创建了一个完整的控制台应用程序之后，我找到了一个演示我需要的示例。这个实现似乎只适用于 Scheduler.NewThread。我的新问题是我根本无法测试这个实现，因为测试调度程序似乎是 CurrentThread。

我的控制台应用示例代码：

```
var otherThreadScheduler = Scheduler.NewThread; 
cancel = otherThreadScheduler.Schedule(
    TimeSpan.FromSeconds(1),
    recursive =>
        {
            lock (obj)
            {

                Console.WriteLine(
                    "Processing Data - Thread ID = " + Thread.CurrentThread.ManagedThreadId);

                var t = new Task(
                    () =>
                        {
                            Console.WriteLine(
                                "Hi I'm the task on thread {0}",
                                Thread.CurrentThread.ManagedThreadId);

                            Thread.Sleep(2000);
                        });

                t.Start();

                Console.WriteLine(
                    "Processing Data Waiting for it to finish - Thread ID = "
                    + Thread.CurrentThread.ManagedThreadId);

                t.Wait();
            }
            Console.WriteLine("Processing Data finished - Thread ID = " + Thread.CurrentThread.ManagedThreadId);

            recursive(TimeSpan.FromSeconds(1));
        });

cancel2 = otherThreadScheduler.Schedule(
    TimeSpan.FromSeconds(1),
    recursive =>
        {
            lock (obj)
            {
                Console.WriteLine("Processing Detection - Thread ID = " + Thread.CurrentThread.ManagedThreadId);
                Thread.Sleep(10000);
            }

            recursive(TimeSpan.FromSeconds(5));
        }); 
```

这不可测试的原因是我的真实代码中的任务是可模拟的，所以我模拟它循环，直到我发出信号停止但由于我的代码执行 task.Wait()，我当前的线程阻塞，所以我永远无法向任务发出信号返回。所有这一切的重点是模拟长时间运行的数据收集并验证更改检测不会触发。

所以我的问题是：有没有更优雅的解决方案来满足我的需求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T09:44:43.237

而不是使用`Task.Wait`和阻塞当前线程，

将完成代码编写为延续可能会更好。即，使用`Task.ContinueWith(_ => recursive(...))`.

# c# - 操作集合以生成压缩版本

> ID：14859903
> 
> 赞同：2
> 
> 时间：2013-02-13T17:57:16.937
> 
> 标签：c#, c#-4.0

我目前被一小部分我似乎无法弄清楚的功能所困扰。

首先，我有一个`Stock`如下所示的类：

```
public class Stock
{
    public int Id;
    public int LocationId;
    public int Quantity;
} 
```

`Stock`日志是从数据库返回的，这些日志是由另一个功能产生的。日志表示为一个`List<Stock>`集合 - 但是我需要添加`Quantity`相同`ID`和`LocationID`组合的每个对象的属性，例如：

> 原始数据集：
> 
> 编号：1 地点：1 数量：20
> 
> 编号：1 地点：2 数量：30
> 
> 编号：1 地点：1 数量：30
> 
> 编号：2 地点：2 数量：20
> 
> 编号：1 地点：2 数量：30
> 
> 编号：1 地点：1 数量：100

应该返回：

> 精简数据集：
> 
> 编号：1 地点：1 数量：150
> 
> 编号：1 地点：2 数量：60
> 
> 编号：2 地点：2 数量：20

重申一下：数据集是从数据库动态返回的，不能保证会有每个`ID`&组合，我需要结果数据集在and`LocationID`的复合键上是唯一的。`ID``LocationID`

不确定解决此问题的最有效方法，并且它阻碍了我在项目中的进展，任何建议或方法将不胜感激。我有点认为这确实是一个知识差距，但我无法找到任何合适/符合我要求的东西（我猜这是一个很奇怪的要求）。

非常感谢，

安迪

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T18:13:16.553

最好在数据库上执行此操作，但您也可以使用 GroupBy 来实现完全相同的效果：

```
public class Stock
{
    public int Id;
    public int LocationId;
    public int Quantity;
}

static void Main(string[] args)
{
    var list = new List<Stock>()
        {
            new Stock(){ Id = 1, LocationId = 1, Quantity = 20},
            new Stock(){ Id = 1, LocationId = 2, Quantity = 30},
            new Stock(){ Id = 1, LocationId = 1, Quantity = 30},
            new Stock(){ Id = 2, LocationId = 2, Quantity = 20},
            new Stock(){ Id = 1, LocationId = 2, Quantity = 30},
            new Stock(){ Id = 1, LocationId = 1, Quantity = 100},

        };

    var grouped = list.GroupBy(c => new {Id = c.Id, LocationId = c.LocationId})
            .Select(g => new 
                 { 
                      Id = g.Key.Id, 
                      LocationId = g.Key.LocationId, 
                      Quantity = g.Sum(a => a.Quantity) 
                  });
    foreach(var group in grouped.OrderBy(c => c.Id))
    {
        Console.WriteLine("Id:{0} - LocationId:{1} - Quantity:{2}", group.Id, 
                 group.LocationId, group.Quantity);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T18:05:44.963

用于`GroupBy`执行此操作：

```
var grouped = (from s in stocks
                group s by new { s.Id, s.LocationId }
                    into grp
                    select new Stock()
                    {
                        Id = grp.Key.Id,
                        LocationId = grp.Key.LocationId,
                        Quantity = grp.Sum(x => x.Quantity)
                    }).ToList(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T18:19:46.290

我更喜欢使用这样的 SQL 查询：

```
select id, location, sum(quantity) quant from stocktable group by id, location 
```

这有助于在数据库本身完成计算，从而帮助您提高性能。由于数据库服务器无论如何都会读取所有数据并将其提供给应用层，因此不会降低性能，并且您会在简单性方面获得收益。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T18:03:59.157

您可以使用`Enumerable.GroupBy`来执行分组和`Enumerable.Aggregate`（或者，在这种情况下是专门的`Sum`）来执行聚合。

类似于以下内容：

```
IEnumerable<Tuple<int, int, int>> result =
    stocks.GroupBy(stock => new { id = stock.Id, locationId = stock.LocationId},
                   (key, s) => new { key.id, key.locationId, total = s.Sum(ss => ss.Quantity) });

foreach (var result in results)
{
    Console.WriteLine(result.id);
    Console.WriteLine(result.locationId);
    Console.WriteLine(result.total);
} 
```

# asp.net - 尝试在 EditItemTemplate 内的 DropDownList 中预选选项时出错

> ID：14859916
> 
> 赞同：0
> 
> 时间：2013-02-13T17:57:48.397
> 
> 标签：asp.net, vb.net, drop-down-menu, edit

为什么在尝试从 ASP.net 2.0 vb 中的 DropDownList 中预选值时出现运行时错误？

我试图用 GridView 做同样的事情，我得到了同样的信息。

最初，我试图向用户展示他们提交的申请访问权限的详细信息。单击编辑按钮时，我希望允许用户更改他们提交给我们的详细信息并更新应用程序。我不打算在数据库中进行任何额外的插入。

我想限制用户从下拉列表中选择部门。当用户点击编辑时，我希望他们最初申请的部门被预先选择。当我有线路时：

```
SelectedValue='<%# Bind("department") %>' 
```

我收到运行时错误。如果我删除该行，它不会出错，但不会预先选择任何东西。

有人能帮我理解为什么它不起作用吗？

其他可能有帮助的是我正在使用 Visual Studio 2005，并且当我键入时，类属性会在我键入时显示。当我按下空格键时，我可以看到 DropDownList 的许多属性，但 SelectedValue 不是其中之一，这让我觉得我正在尝试做一些不应该工作的事情。

我的代码：

```
<asp:SqlDataSource ID="UserDetails_Conn" runat="server" 
    ConnectionString="<%$ ConnectionStrings:NormCon %>" 
    SelectCommand="SELECT u.first_name, u.last_name, u.email, d.department FROM mis_userlist AS u INNER JOIN mis_depts AS d ON u.dept_id = d.dept_id WHERE (u.windows_login = @windows_ID)"
    UpdateCommand="UPDATE mis_userlist SET first_name = @first_name, last_name = @last_name, email = @email, dept_id = @dept_id WHERE (windows_login = @windows_ID)"
>
    <SelectParameters>
        <asp:SessionParameter Name="windows_ID" SessionField="username" />
    </SelectParameters>
    <UpdateParameters>
        <asp:Parameter Name="first_name" />
        <asp:Parameter Name="last_name" />
        <asp:Parameter Name="email" />
        <asp:Parameter Name="dept_id" />
        <asp:Parameter Name="windows_ID" />
    </UpdateParameters>

</asp:SqlDataSource>
<asp:DetailsView ID="UserDetailsView" runat="server" Height="50px" Width="125px" AutoGenerateRows="False" DataSourceID="UserDetails_Conn">
    <Fields>
        <asp:BoundField DataField="first_name" HeaderText="first_name" SortExpression="first_name" />
        <asp:BoundField DataField="last_name" HeaderText="last_name" SortExpression="last_name" />
        <asp:BoundField DataField="email" HeaderText="email" SortExpression="email" />
        <asp:TemplateField HeaderText="department" SortExpression="department">
            <EditItemTemplate>
                <asp:SqlDataSource ID="DepartmentList" runat="server" 
                    ConnectionString="<%$ ConnectionStrings:NormCon %>" 
                    SelectCommand="SELECT dept_id, department FROM mis_depts ORDER BY department"
                >
                </asp:SqlDataSource>
                <asp:DropDownList ID="ddlDepartments" runat="server"
                    DataSourceId="DepartmentList"
                    DataTextField="department"
                    DataValueField="dept_id"
                    SelectedValue='<%# Bind("department") %>' > <!-- Errorsome line -->
                </asp:DropDownList>
            </EditItemTemplate>
            <InsertItemTemplate>
                <asp:TextBox ID="TextBox1" runat="server" Text='<%# Bind("department") %>'></asp:TextBox>
            </InsertItemTemplate>
            <ItemTemplate>
                <asp:Label ID="Label1" runat="server" Text='<%# Bind("department") %>'></asp:Label>
            </ItemTemplate>
        </asp:TemplateField>
        <asp:CommandField ShowEditButton="True" />
    </Fields>
</asp:DetailsView> 
```

## **解决方案**

连同 Win 的解决方案，我需要在 SQL 字符串中添加 dept_id 字段。

```
SelectCommand="SELECT u.first_name, u.last_name, u.email, d.department, d.dept_id FROM mis_userlist AS u INNER JOIN mis_depts AS d ON u.dept_id = d.dept_id WHERE (u.windows_login = @windows_ID)" 
```

这允许在此处表示的部门：ddlDepartments.SelectedValue = Department
成为可以与 DropDownList 中的 DataValueField="dept_id" 行链接的值。

感谢胜利。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T18:35:42.220

`SelectedValue`如果您分配列表中不存在的值，将引发异常。

为了避免这种情况，您可以在[DataBound](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.detailsview.dataitem.aspx)中进行验证-

从 aspx 页面中删除`SelectedValue='<%# Bind("department") %>'`，并将数据绑定事件附加到 UserDetailsView`<asp:DetailsView ... OnDataBound="DetailsView_DataBound" ...`

```
Protected Sub DetailsView_DataBound(sender As Object, e As EventArgs)
   Dim detailsView = DirectCast(sender, DetailsView)

   Dim dr = DirectCast(detailsView.DataItem, DataRowView)
   Dim department = dr(4).ToString() ' Column index of department
   *** OR *** Dim department = dr("department").ToString() ' Column by name
   Dim ddlDepartments = TryCast(detailsView.
      FindControl("ddlDepartments"), DropDownList)

   If ddlDepartments IsNot Nothing AndAlso 
      ddlDepartments.Items.FindByValue(department) IsNot Nothing Then
      ddlDepartments.SelectedValue = department
   End If
End Sub 
```

基本上，您正在拦截控件的数据绑定。

**更新**：检查部门列的索引。 ![在此处输入图像描述](../Images/7c2aafb7575e5feb07241f772bb7f94f.png)

# python - 在特定字符数之后，如何在 Python 中拆分字符串？

> ID：14859923
> 
> 赞同：1
> 
> 时间：2013-02-13T17:58:12.587
> 
> 标签：python

如果这是重复的，我深表歉意，但我似乎找不到任何涉及根据字符*数*拆分字符串的内容。例如，假设我有以下字符串：

```
Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed ullamcorper, eros 
sed porta dapibus, nunc nibh iaculis tortor, in rhoncus quam orci sed ante. Sed 
ac dictum nibh. 
```

现在，我可以根据特定字符拆分字符串，但是如何在第 n^个字符之后拆分此字符串，不管它是什么？像这样的东西，只有一个有效的语法是我在想的：

```
max_char = n #where n is the number of characters to split after
MyText = 'User input string. This is usually at least a paragraph long.'
char_count = len(MyText)
if char_count > max_char:
 #split string at max_char, create variables: MyText1 and MyText2 
```

任何帮助，将不胜感激。谢谢！

**更新**

我想发布此更新，因为我的问题只解决了我的问题的一半。感谢Martijin在下面的回答，我轻松地将上面的字符串切分了。但是，由于我正在编辑的字符串是用户提交的，所以我遇到了将单词切成两半的问题。为了解决这个问题，我使用了`rsplit`和的组合`rstrip`来正确地拆分段落。以防万一有人面临与我相同的问题，这是我用来使其工作的代码：

```
line1 = note[:36]
line2 = note[36:]

if not line1.endswith(' ', 1):
 line2_2 = line1.rsplit(' ')[-1]
 line1_1 = line1.rstrip(line2_2)
 line2_2 = line2_2 + line2
 line1 = ''
 line2 = '' 
```

现在，我确信有一种更有效/更优雅的方式来做到这一点，但这仍然有效，所以希望有人能从中受益。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T17:59:14.233

您正在寻找[*切片*](https://stackoverflow.com/questions/509211/the-python-slice-notation)：

```
MyText1, MyText2 = MyText[:max_char], MyText[max_char:] 
```

Python 字符串是序列，要选择第一个`max_char`字符，只需使用切片来选择这些字符，而后半部分则选择从开始`max_char`到结束的所有内容。

这也[包含在 Python 教程](http://docs.python.org/3/tutorial/introduction.html#strings)中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T21:18:23.863

只是为了改进您的最终解决方案：您可以使用`string.find(' ', n)`查找字符 n 之后的第一个空格的索引。如果要在该空格之后拆分（以便 string1 以空格结尾，而不是 string2 以 1 开头），只需向其添加一个：

```
>>> print string
Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed ullamcorper, eros sed porta dapibus, nunc nibh iaculis tortor, in rhoncus quam orci sed ante. Sed
>>> space_location = string.find(' ', 36)+1
>>> print string[:space_location]
Lorem ipsum dolor sit amet, consectetur 
>>> print string[space_location:]
adipiscing elit. Sed ullamcorper, eros sed porta dapibus, nunc nibh iaculis tortor, in rhoncus quam orci sed ante. Sed 
```

# asp.net-mvc - Ajax 提交收到 404 错误但 URL 正确

> ID：14859926
> 
> 赞同：2
> 
> 时间：2013-02-13T17:58:24.327
> 
> 标签：asp.net-mvc, asp.net-ajax, http-status-code-404

我有一个带有提交按钮的 ajax 表单，但是当我单击提交按钮时，我得到一个 404 page not found 错误。

我的部分观点：

```
@using (Ajax.BeginForm("Index", "Maps", null, ajaxOptions, new { @class = "form-search" }))
{
    ...
    ...
    <button type="submit" class="btn">Search</button>
} 
```

ajaxOptions 变量定义如下：

```
var ajaxOptions = new AjaxOptions
{
    InsertionMode = InsertionMode.Replace,
    UpdateTargetId = "filter-results",
    LoadingElementId = "filter-loading",
    LoadingElementDuration = 2000,
    OnFailure = "showAjaxError",
    Url = Url.Action("Index")
}; 
```

这在我的浏览器（Chrome）中呈现如下：

```
<form action="/Maps" class="form-search" data-ajax="true" data-ajax-failure="showAjaxError" data-ajax-loading="#filter-loading" data-ajax-loading-duration="2000" data-ajax-mode="replace" data-ajax-update="#filter-results" data-ajax-url="/Maps" id="form0" method="post">    <div class="well well-small">
        <div class="input-append">
            <input type="text" class="span3">
            <button type="submit" class="btn">Search</button>
        </div>
        <div class="input-prepend pull-right">
            <button type="submit" class="btn">Items Per Page</button>
            <input type="number" name="ItemsPerPage" class="span1" value="10">
        </div>
    </div>
</form> 
```

404 错误说：

```
Requested URL: /Maps 
```

我可以将它粘贴到我的浏览器中，它可以工作：

```
http://localhost:7374/Maps 
```

我想我引用了正确的 javascript 文件 - 查看页面源代码，我看到了这些：

```
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script src="http://ajax.aspnetcdn.com/ajax/mvc/3.0/jquery.unobtrusive-ajax.min.js"></script>
<script src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.11.0/jquery.validate.min.js"></script>
<script src="http://ajax.aspnetcdn.com/ajax/jquery.ui/1.10.0/jquery-ui.min.js"></script> 
```

在我的 Web.config 我有这个：

```
<add key="ClientValidationEnabled" value="true" />
<add key="UnobtrusiveJavaScriptEnabled" value="true" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T22:34:14.237

1.  检查控制器是否`MapsController`仅`Index`接受`HttpGet`。因为你用`POST`方法发送
2.  你需要这个`Url = Url.Action("Index")`吗？
3.  看到[这个问题](https://stackoverflow.com/a/14391905/138071)，jQuery 1.9 版本没有`.live`方法，并且文件`jquery.unobtrusive-ajax.js`使用这个方法。如果你需要使用 jQuery 1.9+，你必须改变它。

第 3 点的西班牙解决方案（[链接](http://geeks.ms/blogs/etomas/archive/2013/01/18/jquery-1-9-y-el-unobtrusive-ajax-de-asp-net-mvc.aspx)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T19:36:41.010

也许您的控制器操作标有 HttpGetAttribute？据我所知，如果您使用 Ajax 助手，您还应该添加对 microsoft ajax 脚本的引用：MicrosoftAjax.js、MicrosoftMvcAjax.js 和 MicrosoftMvcValidation.js

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T21:39:42.213

由于某种原因，这不适用于 jquery **1.9.0**或**1.9.1**，但适用于以前的版本。

作品：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script> 
```

不起作用（404 错误）：

```
<script src="http://code.jquery.com/jquery-latest.js"></script> 
```

和

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script> 
```

和

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script> 
```

# c - 向链表添加元素时为什么不使用指针指针？

> ID：14859930
> 
> 赞同：2
> 
> 时间：2013-02-13T17:58:41.860
> 
> 标签：c, pointers

我看过这个问题：

其中使用以下代码添加元素oa列表：[C链表在末尾插入节点](https://stackoverflow.com/questions/5797548/c-linkedlist-inserting-node-at-the-end)

```
int addNodeBottom(int val, node *head){

    //create new node
    node *newNode = (node*)malloc(sizeof(node));

    if(newNode == NULL){
        fprintf(stderr, "Unable to allocate memory for new node\n");
        exit(-1);
    }

    newNode->value = val;
    newNode->next = NULL;  // Change 1

    //check for first insertion
    if(head->next == NULL){
        head->next = newNode;
        printf("added at beginning\n");
    }

    else
    {
        //else loop through the list and find the last
        //node, insert next to it
        node *current = head;
        while (true) { // Change 2
            if(current->next == NULL)
            {
                current->next = newNode;
                printf("added later\n");
                break; // Change 3
            }
            current = current->next;
        };
    }
    return 0;
} 
```

为什么 head 作为节点传递，`*head`而不是`node **head`我们要在内部更改它并且我们希望将更改传播到函数外部？我在这里想念什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T18:01:27.870

`head`永远不会在此函数中直接修改。只有`head->next`被分配给另一个值。因此，您不需要使用指向指针的指针。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T18:03:36.077

从根本上说，没有理由不能。事实上，这是 Linus Torvalds 指出的表现出对指针的精通的事情之一。相关问题：[使用指针从单链表中删除项目](https://stackoverflow.com/questions/12914917/using-pointers-to-remove-item-from-singly-linked-list)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-04T14:44:18.840

您可能可以使用指向指针的指针使该代码更加优雅，如下所示：

```
int addNodeBottom(int val, node **link){
    node *newNode = ...;
    ...
    if(*link == NULL){
        printf("added at beginning\n");
    }
    else
    {
        while (*link)
            link = &(*link)->next;
        printf("added later\n");
    }
    *link = newNode;
    return 0;
}

...
addNodeBottom(some_val, &head->next); 
```

......有这种效果。虽然不是最大的区别，但可能更好一点。如果列表不使用虚拟节点作为头部并且在添加到列表的开头与结尾时不需要打印出来，则会更简单。在这种情况下，我们可以简单地做：

```
void addNodeBottom(int val, node **link){
    node *newNode = ...;
    ...
    while (*link)
        link = &(*link)->next;
    *link = newNode;
}
...
addNodeBottom(some_val, &head); 
```

...在没有特殊情况需要处理的情况下，它开始看起来好多了。如果绝对需要使用这种虚拟头并打印出插入是否在列表的前面，也许返回一个指向新节点的指针（例如，失败时为空）会有所帮助，例如所以：

```
node* addNodeBottom(int val, node **link){
    node *newNode = ...;
    ...
    while (*link)
        link = &(*link)->next;
    *link = newNode;
    return newNode;
}
...
if (addNodeToBottom(some_val, &head->next) == head->next)
     printf("added at beginning\n");
else
     printf("added later\n"); 
```

> 如果我们要在内部更改 head 并且希望将更改传播到函数外部，为什么 head 作为 node *head 而不是 node **head 传递？

正如其他人指出的那样，这是一种不寻常的链表，其中它`head`是某种虚拟节点或其他东西。它永远不会在该函数中被修改，只有`head->next`，所以更改`head`将传播并导致外部副作用。

我从来不理解那些类型的链表实现在 C 和 C++ 等语言中存储虚拟节点的意义，因为它们不会减少特殊情况。他们只是无缘无故地浪费内存。它们对于不允许多于一级间接的语言可能有意义，但在具有指针的语言中根本没有意义。也许实现该链表的人最初更多来自没有指针的语言背景，例如 Java 或 Python 之类的。在这些语言中，这种带有虚拟节点的链接列表可能并不罕见，作为一种解决方法，可以解决语言不允许指向指针（或引用引用）的指针来避免`if`此处和那里的某些语句这一事实。

# magento - $this->getStoreCategories() 在从 magento 中的类别相关表中删除数据后不返回任何内容

> ID：14859931
> 
> 赞同：0
> 
> 时间：2013-02-13T17:58:41.513
> 
> 标签：magento, navigation, categories

我需要导航菜单方面的帮助。当我在管理面板中添加新类别时，导航菜单未显示任何类别。导航菜单中根本没有显示类别。

这是我对导致问题的数据库所做的。截断表`catalog_category_entity`；截断表`catalog_category_entity_datetime`；截断表`catalog_category_entity_decimal`；截断表`catalog_category_entity_int`；截断表`catalog_category_entity_text`；截断表`catalog_category_entity_varchar`；截断表`catalog_category_product`；截断表`catalog_category_product_index`；

插入`catalog_category_entity`( `entity_id`, `entity_type_id`, `attribute_set_id`, `parent_id`, `created_at`, `updated_at`, `path`, `position`, `level`, `children_count`) 值 (1,3,0,0,'0000-00-00 00:00:00','2009-02-20 00:25:34',' 1',1,0,1),(2,3,3,0,'2009-02-20 00:25:34','2009-02-20 00:25:34','1/2' ,1,1,0); 插入`catalog_category_entity_int`( `value_id`, `entity_type_id`, `attribute_id`, `store_id`, `entity_id`, `value`) 值 (1,3,32,0,2,1),(2,3,32,1,2,1); 插入`catalog_category_entity_varchar`( `value_id`, `entity_type_id`, `attribute_id`, `store_id`, `entity_id`, `value`) 值 (1,3,31,0,1,'Root Catalog'),(2,3,33,0,1,'root-catalog'),(3,3, 31,0,2,'Default Category'),(4,3,39,0,2,'PRODUCTS'),(5,3,33,0,2,'default-category');

运行上述查询后，导航菜单中的所有类别都消失了，即使我在管理面板中添加了更多类别，也没有显示类别。

我检查了 top.phtml 文件，代码 $this->getStoreCategories() 没有返回任何内容。

我怎样才能解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-02T23:41:26.080

该问题已通过运行 Magento 示例数据 sql 文件插入数据来解决。

# javascript - $.getJSON 语法

> ID：14859932
> 
> 赞同：0
> 
> 时间：2013-02-13T17:58:43.833
> 
> 标签：javascript, jquery, asp.net-web-api

我有一个 $.getJSON 调用，它通过进行 Web API 调用来填充集合：

```
$.getJSON("/api/rating", self.ratings); 
```

如果我想添加一些在 $.ajax 中找到的选项，例如 beforeSend、data、success 等，我将如何重写它？

编辑：我已经尝试了这两种方法，但没有一个警报被击中：

```
 $.getJSON("/api/rating")
                .beforeSend(function (xhr) {
                    alert("before");
                    $('#divLoading').addClass('ajaxRefresh');
                    xhr.setRequestHeader('X-Client', 'jQuery');
                })
                .success(function (result) {
                    alert(result);
                    self.ratings = result;
                })
                .complete(function (result) {
                    alert("complete");
                    $('#divLoading').removeClass('ajaxRefresh');;
                })
              .error(function () {
                  alert("error");
              });

$.getJSON("/api/rating", self.ratings)
            .beforeSend(function (xhr) {
                alert("before");
                $('#divLoading').addClass('ajaxRefresh');
                xhr.setRequestHeader('X-Client', 'jQuery');
            })
            .success(function (result) {
                alert(result);
                self.ratings = result;
            })
            .complete(function (result) {
                alert("complete");
                $('#divLoading').removeClass('ajaxRefresh');;
            })
          .error(function () {
              alert("error");
          }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T18:01:43.610

$.getJSON 是以下的简写：

```
$.ajax({
  dataType: "json",
  url: url,
  data: data,
  success: success
}); 
```

所以你的样本可以转化为：

```
$.ajax({
  dataType: "json",
  url: "/api/rating",
  data: self.ratings,
  beforeSend: beforeSend,
  success: function (json) {
      // handle json
  }
}); 
```

等等

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T18:04:32.640

```
$.getJSON(<url>,<data>,<callback>)
 .success(function() {

  })
  .error(function () {
  }); 
```

**编辑：**

`.success()`并且`.error()`已被弃用，因此`.done()`应`.fail()`改为使用。

# php - 在 php 文件中将 javascript 代码显示为字符串

> ID：14859934
> 
> 赞同：3
> 
> 时间：2013-02-13T17:58:54.160
> 
> 标签：php, javascript, html

我正在尝试在 php 中回显 javascript 代码。我想将 java 脚本代码显示为字符串，而不是执行。我在 temp.php 文件中有以下代码：

```
<?php
if (count($_POST) > 0)
{
    $text = $_POST['text'];
    echo $text;
}?>

<html>
<head>
</head>
<body>
    <form action="temp.php" method="post">
        Text : <br /><textarea name="text" rows="3" cols="50"></textarea>
        <br />
        <input type="submit" value="Submit" />
    </form>
</body>
</html> 
```

我正在接受以下输入：

```
<script>alert("hello");</script> 
```

当我提交表单时，浏览器正在执行 javascript 并发出警报消息，但我想将代码打印为字符串。我已经在“firefox”中测试了这段代码。请给我一些参考。谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-13T18:00:58.690

这可以通过使用`htmlspecialchars`（[参考](http://php.net/manual/en/function.htmlspecialchars.php)）来实现。在我的头顶上：

```
$text = htmlspecialchars($_POST['text']);
echo $text; 
```

# ruby-on-rails-3.2 - ActiveAdmin member_action 给出 401 Unauthorized 响应

> ID：14859936
> 
> 赞同：0
> 
> 时间：2013-02-13T17:58:54.583
> 
> 标签：ruby-on-rails-3.2, activeadmin

我正在使用 active_admin 0.5.1 构建一个 Rails 应用程序。

在 app/admin/plays.rb 我定义了一个这样的管理资源：

```
ActiveAdmin.register Play do

  member_action :upload, :method => :post do
    ...
  end

  def index
    ...
  end

end 
```

请注意，我添加了一个非标准的上传操作，如下所述：http: [//activeadmin.info/docs/8-custom-actions.html](http://activeadmin.info/docs/8-custom-actions.html)

现在，每当我调用 index 操作时，一切正常。当我发布到会员操作 :upload 时，我得到 401 响应：

```
Started POST "/admin/plays/1/upload.js" for 127.0.0.1 at 2013-02-13 18:46:36 +0100
Processing by Admin::PlaysController#upload as JS
  Parameters: {...}
WARNING: Can't verify CSRF token authenticity
  AdminUser Load (0.4ms)  SELECT "admin_users".* FROM "admin_users" WHERE "admin_users"."id" = 1 LIMIT 1
   (0.1ms)  begin transaction
   (0.0ms)  commit transaction
Completed 401 Unauthorized in 7ms 
```

此外，在收到此错误后，管理员用户将被注销。

我在这里想念什么？我期待通过 member_action 定义的操作就像标准操作一样工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T13:58:39.627

找到了原因。

`"WARNING: Can't verify CSRF token authenticity"`是一种赠品。

您需要将authenticity_token 作为参数添加到ajax 上传请求以使Devise 满意。

我仍然希望 Devise 能够就详细发生的事情给出更详细的提示。

# javascript - 使用 $.ajax 加载 jquery

> ID：14859939
> 
> 赞同：0
> 
> 时间：2013-02-13T17:59:04.580
> 
> 标签：javascript, jquery, html, ajax, web-services

```
 <script language="javascript" type="text/javascript">
        $(function () {
            /* HTML Menu Example Code */
            $('#GlobalNav')
                .load('http://navservice.intranet.hpr/api/gethtml', function(){               
                  initmenu();
              });                     
         });
    </script> 
```

我如何将它转换成这样的东西？除了数据类型是来自 web 服务的纯 html 吗？

```
 $.ajax({
                url: "Common.asmx/InsertClient",
                type: "POST",
                dataType: "json",
                data: "{BizName:'" + BizName + "'}",
                contentType: "application/json; charset=utf-8",
                success: function(msg) {
                    $('#status').html('Id: '+msg['d']['Id']);

                }
            }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T18:09:58.130

`$.ajax`：

```
$.ajax({
    url: 'http://navservice.intranet.hpr/api/gethtml',
    type: 'GET',
    success: function (html) {
        $("#GlobalNav").html(html);
    }
}); 
```

...或者`$.get`：

```
$.get('http://navservice.intranet.hpr/api/gethtml', function (html) {
    $("#GlobalNav").html(html);
}); 
```

请记住，`.load`回调函数接受从服务器检索到的 HTML，因此您可以继续使用它，具体取决于您要完成的工作。

# c# - Valums 文件上传器找不到我的控制器操作

> ID：14859940
> 
> 赞同：1
> 
> 时间：2013-02-13T17:59:08.853
> 
> 标签：c#, asp.net-mvc, file-upload, valums-file-uploader

在[GitHub 上](https://github.com/valums/file-uploader)有 asp.net mvc 演示。不是完整的项目，而是控制器/类/活页夹。

我下载了他们的代码，有没有依赖演示和 jquery 演示的测试文件夹。

我还在他们的演示中制作了我的控制器/动作。

```
 public partial class UploadController : MyController
{
        [HttpPost]
        public ActionResult UploadFile(FineUpload upload, string extraParam1, int extraParam2)
        {
            // asp.net mvc will set extraParam1 and extraParam2 from the params object passed by Fine-Uploader

            var dir = @"e:\temp\";
            var filePath = Path.Combine(dir, upload.Filename);
            try
            {
                upload.SaveAs(filePath);
            }
            catch (Exception ex)
            {
                return new FineUploaderResult(false, error: ex.Message);
            }

            // the anonymous object in the result below will be convert to json and set back to the browser
            return new FineUploaderResult(true, new { extraInformation = 12345 });
        }
} 
```

在他们的测试演示页面上，我将端点参数更改为

```
 endpoint: "http://localhost:60784/upload/uploadfile" 
```

但是，嘿，我是如何得到异常的

```
A public action method 'uploadfile' was not found on controller     'MaNameSpace.Controllers.UploadController'. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T18:16:09.537

你可以做两件事：

1.  尝试在端点 URL 中添加最后一个斜杠：`http://localhost:60784/upload/uploadfile/`

2.  更改`[HttpPost]`为`[HttpGet]`并查看操作方法是否被命中。

在 Firefox 上使用 Firebug 在 Network 选项卡上打开，您可以查看向服务器发出的请求，并检查 File Upload 插件是否发出 Get 或 Post 请求。

# php - 我正在尝试将一个文件上传到本地主机，但无法正常工作

> ID：14859941
> 
> 赞同：1
> 
> 时间：2013-02-13T17:59:09.557
> 
> 标签：php, mysql

我正在尝试将一个文件上传到本地主机服务器，但它不起作用。我正在尝试使用 chmod 授予文件所在文件夹的权限，但我不明白。该表单在一个名为 index.php 的文件中动态打印，当单击提交时，数据将被接收到名为 recExpediente.php 的同一 php 文件中。

PHP

```
 <? 
ini_set('error_reporting', E_ALL);

    require('conectaDemo.php');   

    if (is_uploaded_file($_FILES['Foto']['tmp_name'])) {
            $cSQL="SELECT NIF FROM CLIENTES WHERE ID_CLIENTE=?";
            $stmt=$oConni->prepare($cSQL) or die($oConni->error);
            $stmt->bind_param('i',$_POST['selDesc2']);
            $stmt->execute();                               
            $stmt->bind_result($DNI);
            if ($stmt->fetch()) {
                chmod('/var/www/pracRemesas/'.$DNI.'/', 0777);
                echo '/var/www/pracRemesas/'.$DNI.'/';
                $uploaddir='/var/www/pracRemesas/'.$DNI.'/';
             }
             $stmt->close();
            $uploadfile = $uploaddir . basename($_FILES['Foto']['name']); 
            move_uploaded_file($_FILES['Foto']['tmp_name'], $uploadfile);
            $cFoto=basename($_FILES['Foto']['name']);
            $xSQL = "INSERT INTO EXPEDIENTES (ID_CLIENTE, DOCUMENTO, 
            OBSERVACIONES) VALUES(?,?,?)";
            $stmt = $oConni->prepare($xSQL);
            $stmt->bind_param('iss', $_POST['selDesc2'], $cFoto, $_POST['observ']);
            $stmt->execute();
            $stmt->close();

}

   if (isset($_POST['newid'])) {  
            $cSQL="SELECT ID_CLIENTE, NOMBRE FROM CLIENTES";
            $stmt=$oConni->prepare($cSQL) or die($oConni->error);
            $stmt->execute();                               
            $stmt->bind_result($ID_CLIENTE, $NOMBRE);
            echo'<form name="nuevoExp" id="frmLogin" action="recExpediente.php" method="POST" enctype="multipart/form-data">';
            echo'<select id="selDesc2" name="selDesc2">';
            echo'<option value=-1>Seleccione cliente</option>';
             while ($stmt->fetch()) {
                echo'<option value="'.$ID_CLIENTE.'">'.$NOMBRE.'</option>';
            }   
            $stmt->close();
            echo'</select><br>'; 
            echo'<input type="file" name="Foto" id="Foto"><br>';
            echo'Observaciones<input type="text" name="observ" id="observ"><br>';
            echo'<input  type="submit" name="butEnv" id="butEnv" value="Enviar"/>';
            echo'</form>';
}?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T18:35:46.867

你的问题是变量范围。您`$uploaddir`在 if 语句中定义它仅适用于该语句。您需要先定义它，然后可以在 if 语句中对其进行修改。

这导致您的代码实际上是

```
$uploadfile = basename($_FILES['Foto']['name']); 
```

我建议对您的代码和故障保险柜进行更多检查。您可以在`if ($stmt->fetch()) {`. 如果您移动`if`声明中的所有内容，则无需针对该`$uploaddir`问题进行任何更改。

# debugging - Intellij Idea调试Maven中指定的依赖jar文件

> ID：14859945
> 
> 赞同：1
> 
> 时间：2013-02-13T17:59:23.347
> 
> 标签：debugging, maven-2, intellij-idea

我想在 Intellij Idea 中调试一个项目。项目依赖项由 Maven 管理，我附上了所有 Maven 依赖项的源代码，并将实际的依赖项项目添加为模块。但是当我在一个依赖项目中有断点时，调试器不起作用。

我错过了什么吗？将源查找添加到模块设置中的依赖 jar 文件后，我尝试刷新缓存。

Intellij Idea 版本 11 和 Maven 版本 2.2。

# dns - 将域指向我的虚拟服务器

> ID：14859947
> 
> 赞同：0
> 
> 时间：2013-02-13T17:59:25.563
> 
> 标签：dns, debian

我的虚拟服务器有问题。我拥有两个域并希望将它们指向我的新虚拟服务器。

现在我想编辑主机文件并为新域创建一个条目。

我更改了“可用站点”条目：

/etc/apache2/sites-available

并用我的配置添加了一个文件：

```
<VirtualHost * >
# Anmerkung: Default Domain muss vorhanden sein
ServerAdmin domainname@me.com
ServerName www.domainname.de
ServerAlias domainname.de
# Anmerkung: Sicherstellung der Erreichbarkeit bei Schreibfehlern; *Domain –&gt; Problem mit Subdomains
DocumentRoot /var/www/
# Pfad zu lokalen Verzeichnis unserer Debian Etch Webseite :-)
<Directory /var/www/>
Order Deny,Allow
Allow from all
Options -Indexes
# option = keine Auflistungvon Verzeichnissen im Browser
</Directory>
</VirtualHost> 
```

我已将文件与 a2ensite 和 restartet apache 链接起来。但是当我在浏览器中输入 www.domainname.de 时，什么也没有发生。

我的主机文件：

```
127.0.0.1       localhost
::1             localhost ip6-localhost ip6-loopback
fe00::0         ip6-localnet
ff00::0         ip6-mcastprefix
ff02::1         ip6-allnodes
ff02::2         ip6-allrouters

# Auto-generated hostname. Please do not remove this comment.
83.169.2.78 lvps83-169-2-78.dedicated.hosteurope.de lvps83-169-2-78 
```

我现在已经搜索了一个星期，到处都是，在每个教程中：只用域名创建一个新文件，链接它，重新启动 apache，就是这样。

我的配置问题出在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T18:05:05.987

您需要将 DNS A 记录指向您的服务器公共 IP 地址。假设您拥有购买域名的公司提供的 DNS 服务，请转到他们的控制面板并查看那里。

# git - git 添加 . 没有将当前文件夹添加到 repo

> ID：14859952
> 
> 赞同：1
> 
> 时间：2013-02-13T17:59:55.197
> 
> 标签：git, appharbor, nopcommerce

我想使用 git 将 NopCommerce 解决方案添加到存储库。
我进入了存储 .sln 文件的文件夹并使用了 .sln 文件`git add . command`。
之后我运行了 git commit --dry-run 并且输出有点奇怪，这是输出：

> 新文件：Nop.Web
> 新文件：Nop.Web.Framework/.gitignore

以某种方式检测到该`nop.web`文件夹​​，但未检测到内容。检测到它的兄弟姐妹，并且它的所有文件都已成功上传。

如果我去`nop.web`文件夹并使用 a`git add .`或任何东西，并且在使用后`git commit --dry-run`我会收到一条“干净的回购”消息。

如果我执行推送，当我尝试在 appharbor 中构建这个项目时，nop.web 文件夹中的文件会丢失。

为什么这个文件夹不见了？如何手动添加？

编辑：来自 AppHarbor 的 .gitignore 常见问题解答：

```
[Bb]in
[Oo]bj
*.suo
*.user 
```

文件夹中有一个 .gitignore ，其中包含一个 .csproj 文件。他们都是一样的

编辑2：

```
D:\nopcommerce\Presentation\Nop.Web>git ls-files --exclude-standard -o

D:\nopcommerce\Presentation\Nop.Web>git diff-index --name-status HEAD
fatal: ambiguous argument 'HEAD': unknown revision or path not in the working tr
ee.
Use '--' to separate paths from revisions 
```

这是我发现的一件有趣的事情：

```
D:\nopcommerce\Presentation\Nop.Web>git add ./Administration
fatal: Path 'Presentation/Nop.Web/Administration' is in submodule 'Presentation/
Nop.Web' 
```

我将尝试查找有关子模块以及如何处理它们的信息

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T18:16:35.197

我看到`.gitignore`在该框架下有一个文件添加到您的存储库中。确保它没有告诉 git 忽略您尝试添加的文件夹中的所有内容。

# vb.net - VB.Net Crystal Reports 部署

> ID：14859953
> 
> 赞同：0
> 
> 时间：2013-02-13T18:00:04.143
> 
> 标签：vb.net, deployment, crystal-reports, prerequisites

我正在尝试将我的 Visual Studio 2010 程序重新分发到客户端计算机。当我发布程序并从我的开发计算机执行它时，一切正常（可能是因为安装了水晶报表）。虽然，当我尝试在客户端计算机上执行设置时，它在尝试安装时遇到错误：

“用于 .Net 4.0 的 SAP Crystal Reports 运行时引擎”

我的先决条件是： Microsoft .NET Framework 4 Client Profile（x86 和 x64） SAP Crystal Reports Runtime Engine for .NET Framework 4.0 Windows Installer 3.1

安装位置是：“从组件供应商的网站下载先决条件”

以下是设置为包含和必需的应用程序文件。

![.dll 文件](../Images/ac7b0bddd695931ec46c2d8d547c0783.png)

没有安装“SAP Crystal Reports Runtime Engine For .Net 4.0”有什么原因吗？我尝试将先决条件之一放在完整的“Microsoft.NET Framework 4”而不是它的客户端配置文件中 - 但那个也不会安装。

这是我收到的警告的屏幕截图： ![错误](../Images/5dce64d7d97975a14709da6cc3619881.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T15:01:28.717

对于那些想知道我做了什么来解决这个问题的人。我从 Crystal Reports 更改为Visual Studio ( *Professional* )中包含的内置**ReportViewer控件。**它是**免费**的，而且基本相同。

 ***从经验来看，Crystal Reports 更容易构建报表，但是在使用 Crystal Reports 部署程序时，我会遇到各种需要永远解决的错误。总而言之，它不如部署部门的 ReportViewer 强大。***

# android - ARM、MIPS、x86 的 Android os.arch 输出？

> ID：14859954
> 
> 赞同：16
> 
> 时间：2013-02-13T18:00:04.777
> 
> 标签：android, arm, mips, android-x86

为了识别 Android 设备的平台，java 系统属性“os.arch”似乎就足够了：

```
Log.i("mytag", "os.arch: " + System.getProperty("os.arch")); 
```

大多数 ARM 设备响应：`os.arch: armv7l`

x86 模拟器响应：`os.arch: i686`

*真正的*英特尔和 MIPS 设备的输出是什么？

x86 Android 设备：??????

mips Android 设备：??????

还有其他平台和变体吗？

编辑谷歌电视：

看起来 Google TV 对构建代码使用了“无”。

Vizio 联合主演：os.arch：armv7l，Build.CPU_ABI/Build.CPU_ABI2：无/未知

罗技 Revue：os.arch：i686，Build.CPU_ABI/Build.CPU_ABI2：无/未知

编辑以澄清意图：

*这里的目标是将真实*设备列表的编译及其输出众包。AOSP 代码的预期输出很有趣，但设备制造商（如上面的旧 Google TV 设备）可能会偏离提供 AOSP 代码的预期输出。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-22T15:11:11.977

根据我在 Android 源代码树中可以找到的`ro.product.cpu.abi`属性（您可以`CPU_ABI`通过[Build 类](http://developer.android.com/reference/android/os/Build.html#CPU_ABI)访问）应该具有以下架构到值的映射：

## 32 位 ABI：

**ARM**：“armeabi-v7a”（如果它是一个非常旧/低端的设备，也可能是“armeabi”）

**x86**：“x86”

**米普斯**：“米普斯”

* * *

## 64 位 ABI：

**ARM**：“arm64-v8a”

**x86**：“x86_64”

**MIPS**：“mips64”

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-09T22:11:47.453

这些值来自 Linux 结构。它们可以通过`cat /proc/cpuinfo`. ARM 在`arch/arm/mm`目录中定义它们。从这个目录，

```
grep cpu_arch_name * | grep string | cut -d \, -f2 | sort | uniq 
```

*   armv4
*   armv4t
*   armv5t
*   armv5te
*   armv5tej
*   armv6
*   armv7

arm7l*表示*“小端”模式，但这是可选的，取决于内核。我认为大多数 ARM 内核将是“小端”，除非它是以网络为中心的产品（如 Android 路由器）。这与`uname -m`. 在 x86 上，它在 PowerPC 上返回“i686”，它返回“ppc”。我没有 MIPS 系统，但我的猜测是“mips”，但它可能是[**cpu-probe.c中的分类**](https://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/tree/arch/mips/kernel/cpu-probe.c)

Linux 中有超过 20 种架构，都有不同的 CPU 版本。对于当前的 Android 端口，答案要少得多。但是，将来可能会使用其中的任何一个。我认为 ARM 是唯一发送*子架构的*。

另请参阅：[`uname()`手册页](http://man7.org/linux/man-pages/man2/uname.2.html)、[维基百科的*Uname*](http://en.wikipedia.org/wiki/Uname)、[服务器故障的 uname 机器](https://serverfault.com/questions/63484/linux-what-are-the-possible-values-returned-by-uname-m-and-uname-p)、[OpenJdk 邮件列表](http://marc.info/?l=openjdk-jdk8-dev&m=135796746534007&w=1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-10T03:59:26.533

这可能会有所帮助

1.  Build.CPU_ABI 本机代码的指令集名称（CPU 类型 + ABI 约定）。
2.  Build.CPU_ABI2 本机代码的第二个指令集（CPU 类型 + ABI 约定）的名称。

更多信息 [Android 构建类](http://developer.android.com/reference/android/os/Build.html#CPU_ABI)

# python - 从 python 脚本中获取特定文件的修订号

> ID：14859956
> 
> 赞同：0
> 
> 时间：2013-02-13T18:00:08.833
> 
> 标签：python, perforce, maya

我正在尝试编写一个 python 脚本，它将在 Maya 加载时运行。脚本应该检查存储在文件中某处的数字，可能只是一个名称对象，并将其与 perforce 中文件的最新版本进行比较。

如果存储在 Maya 中的数字不是最新版本，则应显示警告。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T02:53:53.830

要询问工作站上文件的内容是否与服务器上文件的当前 head 修订的内容相匹配，您可以执行类似 'p4 diff -f //depot/path/to/file#head' 之类的操作。

# javascript - 带有印度字符的正则表达式

> ID：14859957
> 
> 赞同：5
> 
> 时间：2013-02-13T18:00:15.047
> 
> 标签：javascript, regex, character, hindi

我想知道是否可以为印度字符编写正则表达式？我想验证给定的字符是否是印度字母或数字。我发现了这两个问题：

[印地语重音字符的 unicode 范围是多少？](https://stackoverflow.com/questions/9523814/what-are-the-unicode-ranges-for-hindi-accented-characters)

[印度教 - 阿拉伯语（ARABIC-INDIC）数字 utf8 从 0 到 9 的范围是多少](https://stackoverflow.com/questions/14834846/what-is-the-range-for-hinduarabic-arabic-indic-numeral-utf8-from-0-to-9)

所以我尝试了这个：\x{0600}-\x{06ff}

但是，如果我搜索此文本（在 OpenOffice 中）：[http](http://pastebin.com/mDHL69XH) ://pastebin.com/mDHL69XH 与此： \x{0600}-\x{06ff} 什么都找不到...

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-13T18:17:10.440

那么这应该做

```
[\u0900-\u097F]+// \uFFFF format supported by Java,.net 
```

或者

```
[\u{0900}-\u{097F}]+// \u{FFFF} format supported by perl,pcre 
```

或者

```
\p{Devanagari}//not widely supported 
```

# algorithm - 尾递归 Levenshtein 距离

> ID：14859960
> 
> 赞同：7
> 
> 时间：2013-02-13T18:00:24.407
> 
> 标签：algorithm, f#, functional-programming, ocaml, tail-recursion

我在 F# 中以非常标准的方式实现了 Levenshtein Distance 作为练习

```
let lastchar (s:string) = s.Substring(s.Length-1, 1)
let lastchar_substring (s:string) len = s.Substring(len-1, 1)

let rec levdist (sa:string) (sb:string) alen blen = match alen, blen with
    | -1, -1 -> levdist sa sb sa.Length sb.Length
    | 0, 0 -> 0
    | _ , 0 -> alen
    | 0, _  -> blen
    | _ -> List.min [ (* How do I make this tail recursive...? *)
            (levdist sa sb (alen-1) blen) + 1;
            (levdist sa sb alen (blen-1)) + 1;
            (levdist sa sb (alen-1) (blen-1)) + 
                 match (lastchar_substring  sa alen), (lastchar_substring sb blen) with 
                      | x, y when x = y -> 0 
                      | _ -> 1
        ]) 
```

但是，我看不到将 List.min 调用转换为尾递归的简单方法。我们不只是在递归调用之后做一些额外的、独立的计算；相反，我们选择了多次递归调用的结果。

有没有办法优雅地将其转换为尾递归？

（我可以轻松地将 转换`+1`为尾递归）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-13T22:20:57.957

通常，当您想将代码转换为尾递归形式时，您有两种选择：

*   如果你的递归函数只调用*一次*，你可以使用*累加器参数*。
*   如果它多次调用自身，则需要使用*延续*

正如 Jeffrey 所说，延续传递风格看起来有点难看，因为您必须转换所有函数以获取另一个函数并通过调用它返回结果。但是，您可以使它更好一点，因为延续是单子，因此您可以使用*计算表达式*。

如果您定义以下计算构建器：

```
// Computation that uses CPS - when given a continuation
// it does some computation and return the result
type Cont<'T, 'R> = (('T -> 'R) -> 'R)

type ContBuilder() = 
  member x.Return(v) : Cont<'T, 'R> = fun k -> k v
  member x.ReturnFrom(r) = r
  member x.Bind(vf:Cont<'T1, 'R>, f:'T1 -> Cont<'T2, 'R>) : Cont<'T2, 'R> = 
    fun k -> vf (fun v -> f v k)

let cont = ContBuilder() 
```

然后您可以从@gradbot 重写解决方案，如下所示（并摆脱 lambda 函数的显式构造）：

```
let levdist (sa:string) (sb:string) = 
    let rec levdist_cont (sa:string) (sb:string) alen blen = cont {
        match alen, blen with
        | -1, -1 -> return! levdist_cont sa sb sa.Length sb.Length 
        |  0,  0 -> return 0
        |  _,  0 -> return alen
        |  0,  _ -> return blen
        |  _ -> 
            let! l1 = levdist_cont sa sb (alen - 1) (blen    )
            let! l2 = levdist_cont sa sb (alen    ) (blen - 1) 
            let! l3 = levdist_cont sa sb (alen - 1) (blen - 1) 
            let d = if (lastchar_substring sa alen) = (lastchar_substring sb blen) then 0 else 1
            return (min (l1 + 1) (min (l2 + 1) (l3 + d))) }

    levdist_cont sa sb -1 -1 (fun x -> x) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-13T18:21:49.933

如果你想在一组递归调用中取最小值，你不能递归地做这个尾巴。您需要`min`在所有呼叫之后执行操作。

您可以转换任何计算，以便通过转换为延续传递样式来使用尾调用。

连续传递风格通常看起来很复杂（对我来说），但我怀疑一旦你习惯了它，它就会相当简单。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-13T21:30:24.253

延续传递的基本思想是你将未来的工作“隐藏”在一个函数中。

```
let lastchar (s:string) = s.Substring(s.Length-1, 1)
let lastchar_substring (s:string) len = s.Substring(len-1, 1)

let levdist (sa:string) (sb:string) = 
    let rec levdist_cont (sa:string) (sb:string) alen blen cont =
        match alen, blen with
        | -1, -1 -> levdist_cont sa sb sa.Length sb.Length cont
        |  0,  0 -> cont 0
        |  _,  0 -> cont alen
        |  0,  _ -> cont blen
        |  _ -> 
            levdist_cont sa sb (alen - 1) (blen    ) (fun l1 ->
            levdist_cont sa sb (alen    ) (blen - 1) (fun l2 ->
            levdist_cont sa sb (alen - 1) (blen - 1) (fun l3 -> 
                let d = if (lastchar_substring sa alen) = (lastchar_substring sb blen) then 0 else 1
                cont (min (l1 + 1) (min (l2 + 1) (l3 + d)))
                )))

    levdist_cont sa sb -1 -1 (fun x -> x)

levdist "guisuifgh" "sfg"
|> printf "%A" 
```

输出

```
6 
```

# algorithm - 共识算法如何保证一致性？

> ID：14859962
> 
> 赞同：5
> 
> 时间：2013-02-13T18:00:27.220
> 
> 标签：algorithm, distributed-computing, handshake, paxos, consensus

[**当两个将军**](http://en.wikipedia.org/wiki/Two_Generals%27_Problem)证明“设计算法不可能安全地达成一致”时，像[**Paxos**](http://en.wikipedia.org/wiki/Paxos_algorithm)这样的共识算法如何“保证安全（免于不一致） ”？[](http://en.wikipedia.org/wiki/Two_Generals%27_Problem)

 **当我考虑让两台服务器（1）可靠地交换一个号码（即，两台服务器最终都知道对方肯定收到了号码）或（2）两台服务器最终都知道交换失败并且不改变他们的状态，看起来（就像两位将军一样）消息失败总是会以一种不一致的方式发生（即，一个服务器认为另一个完成了交换，但它没有）。

那么 Paxos（或其他任何东西）如何真正保证“免于不一致”？有简单的语言解释吗？演示两台服务器进行有保证的交换或在失败时完全放弃交换的最简单的伪代码是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T18:43:11.947

关键是 Paxos 的这个假设：

Liveness(C;L)：如果已经提出了值 C，那么最终学习者 L 将学习一些值（**如果足够多的处理器保持无故障**）。

两个将军问题的坏情况是信使不断被拦截。“如果足够多的处理器保持无故障”部分消除了这种可能性。

换句话说，如果消息不断被丢弃，那么 Paxos 不需要（也不会）完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T02:19:10.923

Paxos 实际上并没有解决 2 将军问题。正如维基百科文章所引用的：

> 一般来说，一个共识算法可以在使用 2F+1 个处理器的情况下取得进展，尽管任何 F 个处理器同时发生故障。

在 2 将军问题中，处理 1 个节点的故障意味着您需要`2*1 + 1 = 3`节点来处理那么多故障。2个将军的不可能性问题没有推广到N个将军。

人们在现实世界中解决 2 将军问题的一种方法是[击剑](http://en.wikipedia.org/wiki/Fencing_%28computing%29)。**

# python - 如何通过 Django 应用调用 Scrapy Spider

> ID：14859963
> 
> 赞同：6
> 
> 时间：2013-02-13T18:00:33.087
> 
> 标签：python, django, scrapy, web-crawler

我无法在我的 django 视图中调用scrapy spider。我怎样才能做到这一点？我尝试按照本教程[http://tryolabs.com/Blog/2011/09/27/calling-scrapy-python-script/](http://tryolabs.com/Blog/2011/09/27/calling-scrapy-python-script/)但在导入设置中不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-26T20:45:32.273

如果错误来自

```
from scrapy.conf import settings 
```

这可能是因为scrapy 根本找不到它所期望的设置文件。由于在 Django 中习惯于使用`settings`django 自己的配置，因此如果您不使用该术语将是最清楚的。

您可以在 Django 设置中指定您的 scrapy 设置：

```
"""settings.py"""
# stuff

SCRAPY_SETTINGS = {
    ... # put your usual scrapy keys and values here
}

# more stuff 
```

然后，您可以使用以下命令代替导入`scrapy.conf.settings`：

```
from django.conf import settings 
```

在脚本中引用scrapy设置的地方，您应该将 CrawlerProcess 的参数更改为 settings.SCRAPY_SETTINGS

```
self.crawler = CrawlerProcess(settings.SCRAPY_SETTINGS) 
```

如果您还有任何问题，请发布您遇到的完整错误以及您查看的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-12T02:06:19.590

或者，您也可以像这样创建设置对象：

```
from scrapy.settings import Settings
settings = Settings()
settings.setmodule('path.to.scrapy.settings', priority='project') 
```

# android - 将列表视图的项目与其他布局中的项目对齐

> ID：14859965
> 
> 赞同：0
> 
> 时间：2013-02-13T18:00:36.443
> 
> 标签：android, xml, listview, layout, alignment

我有这个布局，里面有一个表格布局和四个项目：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <TableLayout 
        android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:stretchColumns="0,1,2,3,4,5,6,7"
    android:background="#FF3538">

       <TableRow>

    <TextView
        android:id="@+id/o1"
        android:textStyle="bold"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:text="@string/fecha"
         />

    <TextView
        android:id="@+id/o2"
        android:gravity="center"
        android:textStyle="bold"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/Vv"
        />

    <TextView
        android:id="@+id/o3"
        android:gravity="center"
        android:textStyle="bold"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/Dv"
        />

    <TextView
        android:id="@+id/o4"
        android:gravity="center"
        android:textStyle="bold"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/Ht"
        />

 </TableRow>
  </TableLayout>

  <LinearLayout 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <ListView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:id="@+id/listView"></ListView>
  </LinearLayout>

</LinearLayout> 
```

还有这个其他布局（列表视图）

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/celda_cabecera" >

    <TableLayout 
        android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:stretchColumns="0,1,2,3,4,5,6,7"
    >

       <TableRow>

    <TextView
        android:id="@+id/o1"
        android:textStyle="bold"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:gravity="center"

         />

    <TextView
        android:id="@+id/o2"
        android:textStyle="bold"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
         android:gravity="center"

        />

    <ImageView
        android:id="@+id/o3"
        android:contentDescription="@string/dirviento"
        android:textStyle="bold"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"

        />

    <TextView
        android:id="@+id/04"
        android:textStyle="bold"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:gravity="center"
       />
</TableRow>
    </TableLayout>

</RelativeLayout> 
```

我想将列表视图的项目与第一个布局的项目对齐，但我的解决方案不能正常工作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-07T13:50:28.030

嗨@Er_我认为你必须使用重量概念。

只需在`<TableRow>`下面的视图下替换您的所有视图。

例子：

```
<TextView
    android:id="@+id/o1"
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:gravity="center"
    android:text="@string/fecha"
    android:textStyle="bold" /> 
```

因此，对所有子视图给予相同的权重`<TableRow>`

它威胁我替换，

```
 android:layout_width="0dp"
    android:layout_weight="1" 
```

代替

```
 android:layout_width="wrap_content" 
```

# excel - 指向由数组元素表示的单元格的宏

> ID：14859967
> 
> 赞同：0
> 
> 时间：2013-02-13T18:00:37.210
> 
> 标签：excel, vba

我在 excel 表中有 2 列。例如，第一列有一些其他单元格地址 - A 列有内容 F1、F2、F3、F4 和 F5。第二列也有一些其他的单元格地址，例如 - 列 B 的内容为 x1、X13、X17、X72。

现在我想要一个宏，它可以首先将列中提到的单元格的内容（想要复制 F1 ...F5 的内容）复制到第 2 列中提到的单元格中。

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T03:40:28.783

假设 A 列中的每个单元格仅包含一个单元格地址：

```
Sub TransferValues()

Dim rngA As Range
Dim rngB As Range
Dim srcAddress As Range
Dim destAddress As Range
Dim r As Long   'row iterator

Set rngA = Range("A2", Range("A2").End(xlDown))
Set rngB = rngA.Offset(0, 1)

For r = 1 To rngA.Rows.Count
    Set srcAddress = Range(rngA(r).Value)
    Set destAddress = Range(rngB(r).Value)
    destAddress.Value = srcAddress.Value
Next

End Sub 
```

# javascript - 如何在 Android 应用程序的 WebView 中查看 Javascript 错误？

> ID：14859970
> 
> 赞同：43
> 
> 时间：2013-02-13T18:00:49.430
> 
> 标签：javascript, android, webview

我正在尝试在应用程序的 WebView 中运行 javascript。我正在开发 Nexus 7。

html / javascript 在 Chromium 上运行良好，但平板电脑上没有发生某些操作。有没有办法查看平板电脑上是否有任何 javascript 本身失败？一种控制台视图？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2016-11-08T11:02:09.213

您实际上可以从 WebView 接收控制台消息，这将允许您捕获它引发的错误。

为此：

1.  在您的 WebView 上启用 JavaScript
2.  设置[WebChromeClient](https://developer.android.com/reference/android/webkit/WebChromeClient.html)
3.  覆盖[onConsoleMessage](https://developer.android.com/reference/android/webkit/WebChromeClient.html#onConsoleMessage(android.webkit.ConsoleMessage))

例子：

```
 final WebView webView = (WebView) findViewById(R.id.webview_terms_conditions);

    WebSettings webSettings = webView.getSettings();
    webSettings.setJavaScriptEnabled(true);

    webView.setWebChromeClient(new WebChromeClient() {
        @Override
        public boolean onConsoleMessage(ConsoleMessage consoleMessage) {
            Log.d("MyApplication", consoleMessage.message() + " -- From line "
                    + consoleMessage.lineNumber() + " of "
                    + consoleMessage.sourceId());
            return super.onConsoleMessage(consoleMessage);
        }
    });

    webView.loadUrl(getString(R.string.url_terms_conditions)); 
```

[与此处](https://developer.android.com/guide/webapps/debugging.html#WebView)所说的类似，尽管该文档不完整并且使用了已弃用的方法。

* * *

在 Android KitKat 上运行时，还可以[启用远程调试！](https://developers.google.com/web/tools/chrome-devtools/remote-debugging/webviews)

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2018-09-24T04:56:49.203

您可以使用`Remote Debugging WebViews`

[Chrome Devtools 远程调试](https://developers.google.com/web/tools/chrome-devtools/remote-debugging/webviews)

[更多信息](https://developers.google.com/web/tools/chrome-devtools/remote-debugging/)

使用 Chrome 开发者工具在您的原生 Android 应用程序中调试 WebView。

在 Android 4.4 (KitKat) 或更高版本上，使用 DevTools 调试原生 Android 应用程序中的 WebView 内容。

```
if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.KITKAT) {
    WebView.setWebContentsDebuggingEnabled(true);
} 
```

在电脑浏览器中输入 chrome://inspect [![在此处输入图像描述](../Images/8ef09cf01e5da181f12d7a97870a2f11.png)](https://i.stack.imgur.com/ctcbz.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-13T18:03:07.917

您也许可以使用[Firebug lite](http://getfirebug.com/firebuglite)。它只是一个书签，因此您可以在任何页面上打开它。

另外，请搜索还有很多其他类似的问题：

*   [有没有办法在 Android 中为 Safari 启用 JavaScript 错误/调试控制台？](https://stackoverflow.com/questions/468993/is-there-a-way-to-enable-the-javascript-error-debug-console-for-safari-within-an)
*   [在 Android 平板电脑/手机上调试 javascript？](https://stackoverflow.com/questions/5723272/debugging-javascript-on-android-tablets-phones)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-02T12:33:47.190

在 Android Studio“北极狐”中，只需查看 logcat。带有“cromium”标签的消息。

# android - facebook 如何将通知、好友请求和其他更新推送到其 Android 移动应用程序？

> ID：14859975
> 
> 赞同：0
> 
> 时间：2013-02-13T18:01:08.500
> 
> 标签：android, facebook, server-push

Facebook 使用什么轮询机制（实施）将数据推送到其 android 移动应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T18:04:55.030

我相信这是您正在寻找的东西：

```
https://developers.facebook.com/docs/reference/api/realtime/ 
```

希望能帮助到你。

# java - 如何将参数从prototypejs客户端传递给REST Web服务

> ID：14859977
> 
> 赞同：1
> 
> 时间：2013-02-13T18:01:20.863
> 
> 标签：java, javascript, rest, prototypejs

我有一个休息网络服务，比如

```
@Path("/postItem")
@Produces({ MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON })
public Item postItem(@QueryParam("name") String name, @QueryParam("price") String price)
{
  System.out.println(name);
  System.out.println(price);
  return new Item(name , price);
} 
```

我使用prototypejs javascript lib从客户端使用下面的代码片段调用上面的rest web服务。

```
<script>
  new Ajax.Request('/some_url', {
    method:'post',
    parameters: {name: 'apple', price: 12}
    onSuccess: function(transport) {
    var response = transport.responseText || "no response text";
    alert("Success! \n\n" + response);
    },
    onFailure: function() { alert('Something went wrong...'); }
 });
</script> 
```

问题：我无法正确地将参数传递给服务方法的名称和价格。

我在客户端传递了两个参数，但在服务端只有参数“名称”被映射（也有错误的值）。当我打印名称和价格时，我得到以下信息

```
 System.out.println(name);  ==> name='apple'&price=12
 System.out.println(price); == null 
```

我如何从prototypejs客户端将参数传递给服务，以便'name'获取值apple，'price'获取值12。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T18:16:29.177

在“名称”周围加上引号，即

前

```
 parameters: {name: 'apple', price: 12} 
```

后

```
 parameters: {'name': 'apple', 'price': 12} 
```

“名称”很可能是在对象中未正确传递的关键字

**编辑**

更多的东西可以尝试...

*   确保您使用的是最新的 PrototypeJS 版本 1.7.1

*   后面加逗号 `parameters: {name:'apple',price:12},`

*   使用 Chrome 开发工具或 Firebug 仔细检查浏览器是否正确传递参数 - 如果它们被正确传递，请检查您的后端脚本

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T19:59:45.467

您可能想尝试的一些选项：

将参数作为转换为查询字符串的 JS 对象传递：

```
ajaxParameters = Object.toQueryString({ qkey: qValue }); 
```

其中 qkey 和 qValue 是字符串。在作为对象的 Ajax.Request 的第二个参数中，使用生成的 ajaxParameters 作为参数值。

PrototypeJS Hash 对象在大多数情况下也可以正常工作：

```
ajaxParameters = $H({ qKey0: qValue0, qKey1: qValue2 [, ...]  }); 
```

该方法是否为 POST 应该不是问题。有时 POST 方法也可能有一个带有“GET”变量的 ACTION (url)，例如

*~~http://mydomain.net/post.php?id=n&action=z~~ _*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T11:26:48.200

好的，最后它通过修改 url 起作用了。

```
<script>
   new Ajax.Request('/some_url?name=apple&price=12', {
   method:'post',
   onSuccess: function(transport) {
   var response = transport.responseText || "no response text";
   alert("Success! \n\n" + response);
 },
   onFailure: function() { alert('Something went wrong...'); }
});
</script> 
```

# wpf - 确定 xamDataGrid 上的筛选器状态

> ID：14859987
> 
> 赞同：2
> 
> 时间：2013-02-13T18:01:49.670
> 
> 标签：wpf, filter, infragistics, xamdatagrid

在我正在开发的 WPF 应用程序中，我想以编程方式确定 xamDataGrid 是否配置了任何过滤器。

我已经为 Excel 配置了导出功能，并想快速检查以确定过滤器是否处于活动状态，如果过滤器处于活动状态，那么我将向用户展示是否导出过滤行的选项。 .

我找不到任何合适的班级成员。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T21:59:09.870

找到答案男生和女生...

```
 var activeFilterCount = xamDataGrid1.FieldLayouts[0].RecordFilters.Sum(recordFilter => recordFilter.Conditions.Count); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-19T10:56:54.430

A***`XamDataGrid`***可以有**多个字段布局*（分层结构）***。在这种情况下，您需要考虑所有`FieldLayouts`而不仅仅是**第一个**。所以**完整的解决方案**是：

```
 public bool AreFiltersActive()
 {
   int activeFilterCount = 0;
   foreach (FieldLayout f in xamDataGrid.FieldLayouts)
   {
     activeFilterCount+= f.RecordFilters.Sum(recordFilter => recordFilter.Conditions.Count);
     //retrieve filter count per layout
   }        
   return activeFilterCount > 0;
   //If any fieldlayout has any filter active then the sum will be more than 0
 } 
```

> ***`Filters`存储 per `FieldLayout`in是有原因的`XamDataGrid`。***
> 
> 在早期版本中，它们存储`RecordManger` 在`grid`. 所以这是迭代 all 的完整解决方案`FieldLayouts`。

**像下面的网格：`Multiple Layout and Filters can be applied on every Layout/Level`**

[![具有多种布局的 XamDataGrid](../Images/0d5e37737e0dec214f82e08e15f934dd.png)](https://i.stack.imgur.com/dnYPc.jpg)

# smtp - php @mail 不发送邮件

> ID：14859991
> 
> 赞同：1
> 
> 时间：2013-02-13T18:01:54.120
> 
> 标签：smtp, php, whm

我的 php 邮件功能工作正常，发送邮件也很好，但从过去几天开始，它没有发送任何电子邮件。我已经从 whm、php 表单、cpanel webmail 测试了以下内容，这些是我的观察结果

当我使用 cpanel 网络邮件向我的 gmail 帐户发送电子邮件时，它会立即发送

当我使用 php simple form 发送电子邮件时，它没有送达，然后我认为 gmail 垃圾邮件过滤器可能会拒绝邮件，然后我检查了 whatismyipaddress 工具以检查服务器 ip 是否被标记为垃圾邮件，它显示为全绿色。然后我尝试了其他 hotmail 和其他几个 id 但通过 php 表单发送的邮件没有送达。然后我检查了我的 php.ini 文件，它绝对没问题，然后我检查了 whm 邮件传递报告（这里没有显示该电子邮件）和队列管理器（该电子邮件没有出现），甚至邮件疑难解答检查时它是绿色的。

我禁用了 whm 的 spamassis 然后邮件也没有送达

邮件.php

```
 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
     <head>
 <title>Send Anonymous Email</title>
 <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
 </head>

  <body>
<form name="SAE" method="post" action="send.php">
   <br>To Email: </br>
   <br><input name="toemail" type="text" id="toemail" value=""></br>
<br>Subject: </br>
  <br><input name="subject" type="text" id="subject" value=""></br>
  <br>Message:</br>
 <br> <textarea cols="50" rows="7" name="message"></textarea></br>
<br><input name="submit" type="submit" value="Send!"></br>

 </form>
   <p>Powered by <a href="http://asian.sc">Anonymous Email Sender</a></p>
 </body></html> 
```

发送.php

```
 <?php 

  $toemail = $_POST['toemail']; 
  $subject = $_POST['subject']; 
  $message = $_POST['message']; 

  mail($toemail, '$subject (Sent Anonymously)', "Hello, 
   The following is an anonymous email. 

  $message 

   Powered by http://asian.sc - Anonymous Email Sender", 'From: '.$email); 

      echo "Thank you, $name<br>Message sent to $toemail with the following information:</br>Subject: $subject</br>Message: $message</br><p>Powered by <a href=\"http://asian.sc\">Anonymous Email Sender</a></p>";?> 
```

抱歉，我忘了提及我检查了日志文件是否有错误，但该电子邮件不存在

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-27T13:51:31.053

这是 sendmail 尝试停止发送带有自定义 From Headers 的邮件。

一个快速的解决方法是使用 SMTP 服务器发送邮件（我建议使用 GMAIL 帐户，因为它在大多数情况下都被列入白名单。）

通过 SMTP 服务器 [发送电子邮件 使用 GMail SMTP 服务器从 PHP 页面发送电子邮件](https://stackoverflow.com/questions/712392/send-email-using-gmail-smtp-server-from-php-page)

# github - 使用 Github Api V3，我如何获得我有写权限的所有 repos？

> ID：14859992
> 
> 赞同：4
> 
> 时间：2013-02-13T18:01:55.543
> 
> 标签：github

/user/repos 仅返回我拥有的存储库。我想要一份我有写入权限的所有存储库的列表。或者，是否可以获得一个已加星标的存储库列表或属于某个组织的存储库列表？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T19:10:41.143

[已加星标的仓库列表： https](https://api.github.com/users/:user_id/starred) ://api.github.com/users/:user_id/ starred

属于某个组织的 repos 列表： [https ://api.github.com/orgs/:org_id/repos](https://api.github.com/orgs/:org_id/repos)

列出用户存储库（所有存储库，您是所有者或成员）： [https ://api.github.com/users/:user_id/repos](https://api.github.com/users/:user_id/repos)

但是，/user/repos 也应该返回您所有的 repos，而不仅仅是您拥有的那些（我刚刚尝试过）。请注意`type`可用于过滤结果的查询参数：http: [//developer.github.com/v3/repos/#list-your-repositories](http://developer.github.com/v3/repos/#list-your-repositories)

# android - 将测试类/包放在一个测试套件中

> ID：14859993
> 
> 赞同：1
> 
> 时间：2013-02-13T18:02:01.410
> 
> 标签：android, testing

我的测试所在的位置有几个包：

1.  com.example.tests.common - 适用于手机和平板电脑
2.  com.example.tests.phones - 仅限手机
3.  com.example.tests.tablets - 仅限平板电脑

现在要为手机运行测试，我需要运行位于类`common`和`phones`包中的测试——两​​次运行。平板电脑也是如此。

我需要他们一次性运行平板电脑/手机的所有测试。TestSuite的[示例](https://developer.android.com/reference/junit/framework/TestSuite.html)对我不起作用：

```
 Class[] testClasses = { MathTest.class, AnotherTest.class }
 TestSuite suite= new TestSuite(testClasses); 
```

它不适用于错误，没有这样的构造函数`TestSuite`。

所以问题是：1.为什么它不能按照示例工作。

1.  还有其他方法可以将所需的类/包放在一起`suite`吗？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T18:05:47.267

Normally it is better to name test suite packages like `test.com.example.phones`, adding `test.` prefix to the package name. This allows to run, relocate or move all tests very easily in one go. If it is important to care about device-specific tests, another approach would be like `test.phones.com.example` and `test.tablets.com.example`.

While it is also possible to have test suites, these are often redundant. The most frequent test types are running all tests for the package being tested and running all tests available. If the test packages mirror the main packages, such runs can be easily launched from IDE that provides features to run all tests in a folder/package (right click and select "run as Android test" in Eclipse). And during automated builds in the cloud usually all tests must run anyway.

If you have more tests, not a bad idea is to create a separate testing project.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T18:06:57.143

1.  TestSuite(Class[])没有[构造函数](https://developer.android.com/reference/junit/framework/TestSuite.html)。
2.  您可以使用变量参数列表：

    ```
    TestSuite suite = new TestSuite(MathTest.class, AnotherTest.class); 
    ```

3.  或者像你之前做的那样的数组，但你必须用一个字符串来识别它：

    ```
    TestSuite suite = new TestSuite({MathTest.class, AnotherTest.class}, "Example"); 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T18:36:02.810

我真正想要的是一个[TestSuiteBuilder](https://developer.android.com/reference/android/test/suitebuilder/TestSuiteBuilder.html)。

这是我现在拥有的：

```
public class TabletAllTests extends TestSuite {

    public static Test suite() {

        TestSuiteBuilder suiteBuilder = new TestSuiteBuilder(PhoneAllTests.class);
        suiteBuilder.includePackages("<my_package>.test.common");
        suiteBuilder.includePackages("<my_package>.test.tablet");

        return suiteBuilder.build();
    }
} 
```

同样的`PhoneAllTests`

# ios - 如何使用 NSPredicate 过滤数组以使一个属性的值大于另一个？

> ID：14859994
> 
> 赞同：1
> 
> 时间：2013-02-13T18:02:09.733
> 
> 标签：ios, objective-c, nspredicate

我有一个对象数组，其中有两个属性 X 和 Y（两者`NSString`）。我想使用谓词过滤数组，使所有过滤的对象都具有 X > Y。目前，我正在使用：

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"(X > Y"]; 
```

我的程序在这一行崩溃。写这个谓词的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T18:10:05.127

尝试`-[NSPredicate predicateWithBlock:]`：

```
NSPredicate *predicate = [NSPredicate predicateWithBlock:^BOOL(MyClass *object, NSDictionary *bindings) {
        return [object.x compare:object.y] == NSOrderedDescending;
}]; 
```

这是假设`x`并且`y`是您想要按字母顺序排列的字符串。如果不是这种情况，请编辑您的问题以准确指定字符串的 x > y 含义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T18:15:25.060

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"X > Y"]; 
```

或者

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"(X > Y)"]; 
```

应该可以正常工作，我认为您错过了`)`.

查看 Apple 的文档：[Predicate Format String Syntax](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Predicates/Articles/pSyntax.html)了解更多信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T18:10:46.440

这是你有的吗？

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"(X > Y"];
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"(X > Y)"]; 
```

因为这缺少一个')'，你想比较什么？字符串长度 > 字符串长度？还是一个数字@"3" > @"5"？

这是您的[谓词编程指南](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/Predicates/Articles/pCreating.html#//apple_ref/doc/uid/TP40001793-CJBDBHCB)

# css - Opera 中的 SVG 使用带有缩放的 CSS 背景图像

> ID：14859995
> 
> 赞同：5
> 
> 时间：2013-02-13T18:02:11.467
> 
> 标签：css, svg, opera

我正在尝试在背景图像上使用 SVG，例如：

```
.logo
{position: absolute;
width: 300px; height: 300px;
background-image: url(../img/logo.svg);
background-size: 256px 256px;
background-repeat: no-repeat;} 
```

这适用于 Safari、Firefox、Chrome，但不适用于 Opera，我不明白这个问题。

铬 24 示例：

[CHROME]（对不起，我从主机删除了示例）

Opera 12.14 示例：

[OPERA]（很抱歉，我从主持人那里删除了示例）

更新 1：

SVG 文件

```
<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 16.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
 width="100px" height="100px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve">
<g>
    <path fill="#00A99D" d="M41.027,96.075H16.375v-54.84c0-10.062,2.636-18.258,7.91-24.586c3.032-3.647,6.888-6.547,11.568-8.7
    c4.68-2.153,9.48-4.23,14.402-4.23c9.798,0,18.061,4.296,24.784,10.887c6.724,6.591,10.085,14.677,10.085,24.256
    c0,9.316-3.341,17.357-10.019,24.124c-6.68,6.769-14.59,10.151-23.729,10.151c-1.495,0-3.691-0.154-6.591-0.462
    c0,0,15.358-31.682,15.358-34.277c0-2.592-0.945-4.801-2.834-6.625c-1.891-1.823-4.153-2.735-6.79-2.735
    c-6.328,0-9.491,4.373-9.491,13.117V96.075z"/>
</g>
<g>
    <path fill="#003333" d="M67.922,9.087 M56.177,30.83c-1.147-0.565-2.048-1.283-3.411-1.283c-5.88,0-8.821,4.373-8.821,13.117
    v53.411H21.038V41.741c0-17.062,2.45-18.258,7.351-24.586c6.874-8.876,18.079-15.234,29.436-12.2
    c3.438,0.918,6.994,2.387,10.098,4.132"/>
</g>
<polyline fill="#003333" points="15.557,19.809 21.038,47 40,44 40,20 "/>
</svg> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T12:33:57.897

删除 svg 中的`width`and`height`属性使其渲染得很好（在 Opera 12 中测试）。

# java - 在Android上通过蓝牙发送字符？

> ID：14859996
> 
> 赞同：4
> 
> 时间：2013-02-13T18:02:13.150
> 
> 标签：java, android, bluetooth

我知道如何通过调用手机的原生蓝牙设置并让用户选择发送给谁来发送文件。

但假设我想将字符“v”直接发送到配对设备。我知道设备的名称和地址。这样做的最佳方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-13T18:29:26.603

你可以这样做：

```
 private void sendDataToPairedDevice(String message ,BluetoothDevice device){       
           byte[] toSend = message.getBytes();
            try {
                UUID applicationUUID = UUID.fromString("8ce255c0-200a-11e0-ac64-0800200c9a66");
                BluetoothSocket socket = device.createInsecureRfcommSocketToServiceRecord(applicationUUID);
                OutputStream mmOutStream = socket.getOutputStream();
                mmOutStream.write(toSend);
                // Your Data is sent to  BT connected paired device ENJOY.
            } catch (IOException e) {
                Log.e(TAG, "Exception during write", e);
            }
        } 
```

现在调用上面的方法

```
sendDataToPairedDevice("text to send" ,bluetoothDevice); 
```

而已。谢谢，享受哥们。