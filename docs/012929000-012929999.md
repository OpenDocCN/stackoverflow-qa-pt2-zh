# StackOverflow 问答 12929000-12929999

# android - 在我的 apk 中下载 Apk，无需用户交互

> ID：12929000
> 
> 赞同：1
> 
> 时间：2012-10-17T07:12:30.457
> 
> 标签：android, android-package-managers

我在里面制作了一个android应用程序，现在我在“res/raw”文件夹中放置了一个apk文件，当我安装我的apk时我想要的是raw文件夹中的apk也可以安装，而无需再次单击安装按钮。如果可以通过编写我自己的包管理器或包安装程序，请建议我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T07:20:54.173

间谍软件？恶意软件？即使不是，如果您有嵌套的 APK，它也可能会被标记为此类。

除非您具有系统或 root 权限，否则您无法在没有用户交互的情况下安装。这也是一件好事。如果您正在构建自己的固件并分发到有限的设备，您可以使用平台密钥签署您的应用程序并能够直接安装软件包。对此有多个问题，但通常您`installPackage()`使用`PackageManager`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T07:16:00.887

我认为您必须根植您的手机才能执行此操作。

主要问题是您为什么要这样做。

# c# - Java RSA 加密

> ID：12929001
> 
> 赞同：2
> 
> 时间：2012-10-17T07:12:32.923
> 
> 标签：c#, java, encryption, rsa

我在 C# 程序中使用了 RSA 不对称密钥加密算法（我在下面提到过），我必须通过 java 程序加密数据。我希望我的 java 程序生成与 C# 程序的结果相同的加密密钥。

**公钥：**

```
<RSAKeyValue>
<Modulus>zgfXY1oUe4nyndX4qtobP1BMxtJ1/rfKU5csdAcWrSVu6ZaEAX3rL3cWnaSLzX4E1BNjSP9pjge6TH7UoaWqOQ==</Modulus>
<Exponent>AQAB</Exponent>
</RSAKeyValue> 
```

**C#加密程序：**

```
RSACryptoServiceProvider rsa = new RSACryptoServiceProvider();

 rsa.FromXmlString(PublicKey); // read public key XML defined above

byte[] buffer = rsa.Encrypt(Encoding.UTF8.GetBytes(strToEncrypt), false);

string encryptedStr = HttpUtility.UrlEncode(buffer);// byteConverterGetString; 
```

**Java加密程序：**

```
byte[] modulusBytes = Base64.decode("zgfXY1oUe4nyndX4qtobP1BMxtJ1/rfKU5csdAcWrSVu6ZaEAX3rL3cWnaSLzX4E1BNjSP9pjge6TH7UoaWqOQ==");
byte[] exponentBytes = Base64.decode("AQAB");

BigInteger modulus = new BigInteger(1, modulusBytes );               
BigInteger exponent = new BigInteger(1, exponentBytes);

RSAPublicKeySpec rsaPubKey = new RSAPublicKeySpec(modulus, exponent);

KeyFactory fact = KeyFactory.getInstance("RSA");

PublicKey pubKey = fact.generatePublic(rsaPubKey);

Cipher cipher = Cipher.getInstance("RSA/ECB/PKCS1Padding");

cipher.init(Cipher.ENCRYPT_MODE, pubKey);

byte[] plainBytes = new String("Admin123").getBytes("UTF-8");

byte[] cipherData = cipher.doFinal( plainBytes );

String encryptedString = Base64.encodeBytes(cipherData);

System.out.println(URLEncoder.encode(encryptedString)); 
```

我尝试了上面的java程序，但它给了我这样的结果：

> o%2Bgw7%2BXhYxA9ltDV5zERsF4DyXgMTc%2Fgx82wRtT1xfR3suY0XBJLadp7bXjmSX7CplDVdoQyH05Jpqgkd%2B1G4A%3D%3D

和 C# 程序生成类似

> %23E%03%c2%10)%40E%bf%7b%f9%11%87c0%12q%b9w%ba%2c%98%b4%b1%96%bc%ee%c5_%c9t%1e'%e71 %85%b68t%00%3a%b7%d9%fb%a1%18%ba%10%b4%c3c%e1'*%3b%f6D%e2%cc6%82%80%f2%a6

所以任何人都可以帮我纠正我的java程序..谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T07:19:20.010

在我看来，您正在对两种不同的东西进行 URL 编码：

*   在 Java 中，您正在编码一个 Base64 编码的字符串，而
*   在 C# 中，您在字节数组上执行此操作

这两种不同方法的结果不会相同。也许您应该`new String( cipherData )`在 Java 部分进行编码 - 或者只是`byte[]`在编码之前比较两个数组？

干杯，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-28T16:10:56.827

您正在对不同的对象进行 URLencoding，只需尝试以下代码：

```
byte[] modulusBytes = Base64.decode("zgfXY1oUe4nyndX4qtobP1BMxtJ1/rfKU5csdAcWrSVu6ZaEAX3rL3cWnaSLzX4E1BNjSP9pjge6TH7UoaWqOQ==");
byte[] exponentBytes = Base64.decode("AQAB");

BigInteger modulus = new BigInteger(1, modulusBytes );               
BigInteger exponent = new BigInteger(1, exponentBytes);

RSAPublicKeySpec rsaPubKey = new RSAPublicKeySpec(modulus, exponent);

KeyFactory fact = KeyFactory.getInstance("RSA");

PublicKey pubKey = fact.generatePublic(rsaPubKey);

Cipher cipher = Cipher.getInstance("RSA/ECB/PKCS1Padding");

cipher.init(Cipher.ENCRYPT_MODE, pubKey);

byte[] plainBytes = new String("Admin123").getBytes("UTF-8");

byte[] cipherData = cipher.doFinal( plainBytes );

String string = new String(cipherData);

System.out.println(URLEncoder.encode(string,"UTF-8")); 
```

# c++ - C ++模板复制构造函数，编译器说“传递 const 作为这个参数丢弃限定符”

> ID：12929014
> 
> 赞同：4
> 
> 时间：2012-10-17T07:13:42.303
> 
> 标签：c++, templates, compiler-errors, operator-overloading, copy-constructor

我正在尝试创建一个动态矩阵的模板类。以我目前对 C++ 的了解，我设法解决了一些问题，但我陷入了复制构造函数和重载 operator=; 的困境。换句话说，我无法创建我的对象的副本。在我看来，这应该可行，但我的朋友编译器告诉我，我有 1 个错误：错误：将 'const Matrix' 作为 'int Matrix::getElement(int, int) [with T = int 的 'this' 参数传递]' 在此行丢弃限定符 [-fpermissive]：

```
m[i][j] = original.getElement(i, j); 
```

当我想创建一个对象时：

```
Matrix<int> m = Matrix<int>(3, 3); 
```

我的模板类在这里：

```
template<class T>class Matrix
{
 public:

  Matrix<T>(int lines, int columns)
  {
    this->lines = lines;
    this->columns = columns;
    T* aux = new T[this->lines * this->columns];
    m = new T*[lines];
    for (int i = 0; i < this->lines; i++)
    {
      m[i] = aux + (i * this->columns);
    }
    for (int i = 0; i < this->lines; i++)
    {
      for (int j = 0; j < this->columns; j++)
      {
        m[i][j] = 0;
      }
    }
  }

  Matrix<T>(const Matrix<T>& original)
  {
    columns = original.getColumns();
    lines = original.getLines();
    T* aux = new T[this->lines * this->columns];
    m = new T*[lines];
    for (int i = 0; i < lines; i++)
    {
      m[i] = aux + (i * this->columns);
    }
    for (int i = 0; i < lines; i++)
    {
      for (int j = 0; j < columns; j++)
      {
        m[i][j] = original.getElement(i, j);
      }
    }
  }

  virtual ~Matrix<T>()
  {
    /*for (int i = lines - 1; i > 0; i--)
    {
      delete m[i];
    }*/
    delete [] m;
  }

  T** getPointer()
  {
    return m;
  }

  int getLines () const
  {
    return lines;
  }

  int getColumns () const
  {
    return columns;
  }

  int getElement(int line, int column)
  {
    return m[line][column];
  }

  int setElement(int line, int column, T value)
  {
    m[line][column] = value;
  }

  Matrix<T>* getTranspose()
  {
    Matrix<T>* aux = new Matrix<T>(lines, columns);
    for (int i = 0; i < lines; i++)
    {
      for (int j = 0; j < columns; j++)
      {
        aux->setElement(i,j, m[j][i]);
      }
    }
    return aux;
  }

  Matrix<T> operator=(const Matrix<T> original)
  {
    columns = original.getColumns();
    lines = original.getLines();
    T* aux = new T[this->lines * this->columns];
    m = new T*[lines];
    for (int i = 0; i < lines; i++)
    {
      m[i] = aux + (i * this->columns);
    }
    for (int i = 0; i < lines; i++)
    {
      for (int j = 0; j < columns; j++)
      {
        m[i][j] = original.getElement(i, j);
      }
    }
  }

  friend std::ostream& operator<<(std::ostream& out, Matrix<T>& matrix)
  {
    out<<"Matrix:"<<std::endl;
    for (int i = 0; i < matrix.getLines(); i++)
    {
      for (int j = 0; j < matrix.getColumns(); j++)
      {
        out<<matrix.getElement(i, j)<<" ";
      }
      out<<std::endl;
    }
    return out;
  }

  friend std::istream& operator>>(std::istream& in, Matrix<T>& matrix)
  {
    std::cout << "Reading Matrix:\n";
    for (int i = 0; i < matrix.getLines(); i++)
    {
      for (int j = 0; j < matrix.getColumns(); j++)
      {
        std::cout << "Matrix[" << i << "][" << j << "]:";
        in >> matrix.m[i][j];
      }
      std::cout << std::endl;
    }
    return in;
  }

 private:
  T** m;
  int lines;
  int columns;
}; 
```

正如我从该错误中可以看出的那样，我正在创建 2 个引用同一内存块的对象，但我想创建 2 个引用具有相同内容的 2 个不同内存块的对象。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-17T07:16:54.243

在您的复制构造函数中

```
Matrix<T>(const Matrix<T>& original) 
```

`original`被声明为 const 引用，这非常好。但是，这意味着您不能`Matrix<T>`在其上调用任何未声明为`const`函数的方法。

该`getElement`函数未声明，`const`因此您不能在复制构造函数中使用它。通过将其声明为 const 函数来解决此问题：

```
int getElement(int line, int column) const  // <--- Note the 'const'
{
  return m[line][column];
} 
```

这意味着：

1.  可以在`Matrix`const 对象上调用此函数（例如`original`在您的复制构造函数中）

2.  您不能在内部执行任何`getElement`修改当前实例`Matrix`（即修改`*this`）的操作。

前者是我们想要的，后者没有问题，因为`getElement`它只是一个getter方法，所以不需要修改任何东西。

请注意，因此，最好**始终**将成员函数标记为`const`不应修改任何内容。这意味着您可以将它们应用于常量对象，这意味着编译器会告诉您是否错误地将代码放入实际修改某些内容的函数中。

*最后的评论：*正如 Tore Olsen 所指出的，该`getElement`函数可能应该返回一个类型的对象或引用，`T`而不是`int`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T07:24:53.953

正如我常说的，当你开始写作时`const`，你不能停到最后。因为一个 const 对象可以使用 const 方法并且只能使用 const 方法。但是，常量正确性对于 C++ 程序员来说很重要。我曾经读过一篇关于那个的文章，不幸的是它是用法语写的，但我认为用英语很容易找到。它解释了 const 正确性为您的程序带来了安全性。它有助于一些优化，但在这里我无法准确记住作者的观点。

# android - 如何使用android中的aChartEngine在双折线图中设置X和Y轴的标签？

> ID：12929022
> 
> 赞同：8
> 
> 时间：2012-10-17T07:13:48.440
> 
> 标签：android, achartengine, linechart

大家好，我对图表应用程序很陌生。我使用 aChartEngine 为我的 android 应用程序创建了双折线图。我无法在图表中为 y 轴设置标签。

我有这样的图表......

![在此处输入图像描述](../Images/d6a112efb937742fd4135c9dee271d56.png)

我该怎么做有人可以帮助我吗？提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T07:22:23.787

这将帮助您：

```
// hide the default labels
mrenderer.setYLabels(0);
// set the custom labels
mrenderer.addYTextLabel(0, "$0");
mrenderer.addYTextLabel(20000, "$20K");
...
// set the visible range
mrenderer.setYAxisMin(0);
mrenderer.setYAxisMax(140000); 
```

# apache-camel - Camel XSLT 消息路由问题

> ID：12929027
> 
> 赞同：2
> 
> 时间：2012-10-17T07:14:01.207
> 
> 标签：apache-camel

我正在从队列中路由消息-> 使用 xslt 将其转换并将其转发到另一个队列，记录。

我的骆驼配置如下：

```
<camelContext xmlns="http://camel.apache.org/schema/spring"
    streamCache="true">
    <route>
        <from uri="jms:queue:TradeEventsToESBQueue" />
        <multicast>
            <to uri="xslt:com/tpt/esb/tradeevent/confirmation.xsl" />
            <to uri="xslt:com/tpt/esb/tradeevent/valuation.xsl" />
        </multicast>
    </route>

    <route>
        <from uri="xslt:com/tpt/esb/tradeevent/confirmation.xsl" />
        <to uri="log:output?showAll=true" />
    </route>

    <route>
        <from uri="xslt:com/tpt/esb/tradeevent/valuation.xsl" />
        <to uri="jms:queue:TradeValuationStartQueue1?jmsMessageType=Text" />
        <to uri="log:output?showAll=true" />
    </route>
</camelContext> 
```

在运行程序时，我收到以下错误：

> 原因：org.apache.camel.ExpectedBodyTypeException：无法将 IN 消息正文提取为类型：接口 javax.xml.transform.Source 正文为：org.apache.camel.builder.xml.XsltBuilder.getSource（XsltBuilder.java :482)[64:org.apache.camel.camel-core:2.10.1] 在 org.apache.camel.builder.xml.XsltBuilder.process(XsltBuilder.java:125)[64:org.apache.camel.骆驼核心：2.10.1] 在 org.apache.camel.impl.ProcessorPollingConsumer.receive(ProcessorPollingConsumer.java:58)[64:org.apache.camel.camel-core:2.10.1]

任何想法是什么导致了这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T08:13:51.670

您不应该以这种方式使用 XSLT 组件。

您尤其不应尝试将“from”与 XSLT 一起使用，而应将其与任何内部传输组件（直接用于实例）结合使用。我认为以下将做你想要的。

```
<route>
    <from uri="jms:queue:TradeEventsToESBQueue" />
    <multicast>
        <to uri="direct:confirmation"/>
        <to uri="direct:valuation"/>
    </multicast>
</route>

<route>
  <from uri="direct:confirmation"/>
  <to uri="xslt:com/tpt/esb/tradeevent/confirmation.xsl" />
  <to uri="log:output?showAll=true" />
</route>

<route>
  <from uri="direct:valuation"/>
  <to uri="xslt:com/tpt/esb/tradeevent/valuation.xsl" />
  <to uri="jms:queue:TradeValuationStartQueue1?jmsMessageType=Text" />
  <to uri="log:output?showAll=true" />
</route> 
```

# xml - 如何使用显示元素的内容 嗨，我需要一些帮助来提出一个显示元素内容的函数 if (station>='BBC'..tried -xsl:if test=("@station ='BBC'")> with没有面纱。 <chanels><public><programme><station>BBC='BBC'..tried -xsl:if test=("@station ='BBC'")> with没有面纱。 <chanels><public><programme><station>BBC</station> <sports>soccer</sports> <news>local</news> <studio>london</studio> <drama>british Got talent</drama></programme> <programme><station>CNN</station> <sports>soccer</sports> <news>local</news> <studio>new York</studio> <drama>american circus</drama></programme> <programme><station>FOX8</station> <sports>soccer</sports> <news>local</news> <studio>Florida</studio> <drama>ET</drama></programme></public></chanels> '@' 仅用于引用节点的属性。你需要使用这样的东西： <xsl:if test="station='BBC'">...</xsl:if> xmlxslt-2.0 4 2 回答 2 This answer is useful 0 正如@Reinder 在他的回答中指出的那样，@用于引用属性，而不是元素。例如，使用以下 XSL 样式表来生成输入的精确副本，其中仅包含那些<programme>元素，其<station>等于'BBC'： <xsl:transform version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"><xsl:template match="@*|node()"><xsl:copy><xsl:apply-templates select="@*|node()"></xsl:apply-templates></xsl:copy></xsl:template><xsl:template match="programme"><xsl:if test="./station = 'BBC'"><xsl:copy><xsl:apply-templates select="@*|node()"></xsl:apply-templates></xsl:copy></xsl:if></xsl:template></xsl:transform>于 2012-10-17T07:34:59.763 回答 This answer is useful 0 '@' 仅用于引用节点的属性。你需要使用这样的东西： <xsl:if test="station='BBC'">...</xsl:if> 于 2012-10-17T07:26:22.537 回答 Related 2 iphone - 如何在 iOS 中绘制 LaTeX 字体（cmr10.ttf）的特殊字符？ 2 javascript - 在不使用嵌套 for 循环的情况下迭代 JavaScript 数组 1 sql - 不允许复合键时创建散列主键 1 angularjs - 第二次加载控制器时，angularFire() 返回未定义 3 android - 如何在我的广播接收器类中开始活动？ 1 java - Java 2D 旋转和全局坐标？ 1 asp.net-mvc - ASP MVC3 - 下拉列表未设置正确的默认值 2 java - 在tomcat上部署web服务 1 java - 启动附加了 java 代理的 Glassfish 域 3 asp.net - Asp.net MVC3 如何在 javascript 中使用模型 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</station></programme></station></programme></public></chanels>

> ID：12929031
> 
> 赞同：0
> 
> 时间：
> 
> 标签：xml, xslt-2.0

嗨，我需要一些帮助来提出一个显示元素内容的函数 if (station>='BBC'..tried -xsl:if test=("@station ='BBC'")> with没有面纱。

```
<chanels>
      <public>
       <programme>
         <station>BBC</station>
         <sports>soccer</sports>
         <news>local</news>
         <studio>london</studio>
         <drama>british Got talent</drama>
       </programme>
      <programme>
         <station>CNN</station>
         <sports>soccer</sports>
         <news>local</news>
         <studio>new York</studio>
         <drama>american circus</drama>
       </programme>
       <programme>
         <station>FOX8</station>
         <sports>soccer</sports>
         <news>local</news>
         <studio>Florida</studio>
         <drama>ET</drama>
       </programme>
    </public>
    </chanels> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T07:34:59.763

正如@Reinder 在他的回答中指出的那样，`@`用于引用属性，而不是元素。例如，使用以下 XSL 样式表来生成输入的精确副本，其中仅包含那些`<programme />`元素，其`<station />`等于`'BBC'`：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:transform version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:template match="@*|node()">
        <xsl:copy><xsl:apply-templates select="@*|node()" /></xsl:copy>
    </xsl:template>

    <xsl:template match="programme">
        <xsl:if test="./station = 'BBC'">
            <xsl:copy><xsl:apply-templates select="@*|node()" /></xsl:copy>
        </xsl:if>
    </xsl:template>
</xsl:transform> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T07:26:22.537

'@' 仅用于引用节点的属性。你需要使用这样的东西：

```
<xsl:if test="station='BBC'">
...
</xsl:if> 
```

# forms - 表单操作重复 url

> ID：12929039
> 
> 赞同：0
> 
> 时间：2012-10-17T07:15:17.097
> 
> 标签：forms, codeigniter

CI 新手，由于某种原因，表单提交到错误的 url。

结果是：`http://localhost/ci/index.php/subjects/localhost/ci/index.php/do_upload`

并且无法理解为什么。这是html代码：

```
 echo form_open_multipart('do_upload');
    ?>
    <input type="file" name="files[]" id="fileupload" 
 style="position:absolute; top:-200px" multiple /> 
    <input type="submit" id="uploadFile" style="position:absolute; top:-200px" />
    <?php echo form_close(); ?> 
```

有什么帮助吗？

我也尝试`subjects/do_upload`在打开的表单上写，同样的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T12:20:26.503

检查 base_url 和 site_url 的配置

将它们''留空。

# javascript - 用jquery替换div

> ID：12929040
> 
> 赞同：1
> 
> 时间：2012-10-17T07:15:17.753
> 
> 标签：javascript, jquery, html

我想使用`a href`链接和 jquery 将 1 个 div 替换为另一个。这是我的设置。

```
<div id="parent">
<div class="child1">Child 1 Contents</div>
<div class="child2">Child 2 Contents</div>
</div>
<div id="replacepagelinks">
     <a href="#1">Replace Child 1 with Child 2</a>
     <a href="#2">Replace Child 2 with Child 1</a>
</div> 
```

有人知道如何使用 jquery 来完成这个吗？如果可能的话，我也想`<a href=#1"></a>`在它被选中时消失并`<a href="#2"></a>`出现，反之亦然？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T07:21:52.233

如果要根据单击的元素隐藏内容，可以尝试以下操作：

```
$(document).ready(function(){
   $('#replacepagelinks a').click(function(){
       $(this).hide().siblings().show()
       var w = this.hash.replace('#', '');
       $('#parent div.child'+w).show().siblings().hide()
   })
}) 
```

# ruby-on-rails - Rails 3.1 Capybara jQuery 未定义

> ID：12929041
> 
> 赞同：12
> 
> 时间：2012-10-17T07:15:23.610
> 
> 标签：ruby-on-rails, selenium, capybara

我不断收到此错误：

```
 Failure/Error: page.evaluate_script('jQuery.active') == 0
 Selenium::WebDriver::Error::JavascriptError:
   ReferenceError: jQuery is not defined 
```

每当我使用脚本时：

```
wait_until do
  page.evaluate_script('jQuery.active') == 0
end 
```

我已经放入了一个调试器并检查了 jQuery 库。它存在于特定页面上。

我需要配置一些东西才能使它工作吗？

编辑：

Capybara 和 RSpec 的版本是：

rspec-rails-2.11.0 rspec-2.11.0 capybara-1.1.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T13:23:54.493

该错误意味着您的示例确实具有 js:true，但最好在这里发布一个完整的示例。

我发现从默认的 selenium 驱动程序切换到 webkit 为我解决了一些不同的问题，并且示例运行得更快。

本身不是答案，但值得尝试看看它是否能解决您的特定问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-18T16:51:14.627

我遇到了同样的问题。我通过在测试中删除 binding.pry 并停止 selenium 浏览器来解决它。经过检查，我注意到 js 控制台抛出了错误：Selenium 找不到 .js 文件。

问题的根源在于预装了 spring 的过时 rails 测试应用程序。我已经安装了一个 gem (moment-timezone-rails)，但仍在继续使用“spring rspec”运行我的测试，它没有找到 js 文件的正确目录。

重新启动弹簧解决了这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-31T13:51:09.010

我对 FF 41.0.2 和 capybara-webkit 3.4.0 也有同样的问题。将 FF 升级到 53.0.3 后问题消失了

# github - Github 和 assembla：链接问题和票证

> ID：12929042
> 
> 赞同：0
> 
> 时间：2012-10-17T07:15:28.127
> 
> 标签：github, assembla

我们通过汇编管理票证，通过 github.com 管理源代码

当我在提交消息中的票号中提及时，我不想自动关闭票证。但我想要做的是，当我在 github 中单击 assembla 中的票号时，我想被带到 assembla 网站上的相应票号。

更大的问题是我可以在 git 提交消息中包含 URL。我们不介意必须手动复制它们。但是在 github 提交列表上，我们希望能够看到该提交中提到了汇编上的哪个票证

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T20:12:53.517

Assembla 提供您想要的集成类型，而且麻烦少得多。它还包括与您的票证和合并请求的紧密集成。为您提供一个关注票证讨论和代码历史的整个对话的地方。

但是，这不是你的问题。答案是肯定的，你可以在你的 github 提交信息中有链接。所以只要把它们放进去，它们就会渲染得很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T13:41:42.767

只需以正确的方式使用正确的工具。在 Assembla 端选择[“Ticket and Collaboration Tools for Github Repositories”](https://www.assembla.com/catalog/13-ticket-and-collaboration-tools-for-github-repositories-package)作为预配置的空间类型，而不是在 Github 上不相关的 repo 和在 Assembla 上带有票据的空间

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-17T13:39:52.057

在您的提交消息中添加

```
Ticket #<number>. 
```

例如：

```
Ticket #123 
```

请注意，大写 T 是强制性的。然后，当您查看提交时，您会看到如下所示： [![在此处输入图像描述](../Images/e154b5d271ff7ffe1cb61e45e23b52f3.png)](https://i.stack.imgur.com/5mhhv.png)

# vb.net - 字符串未被识别为有效的日期时间

> ID：12929045
> 
> 赞同：-1
> 
> 时间：2012-10-17T07:15:59.013
> 
> 标签：vb.net, datetime

字符串在 vb.net 中未被识别为有效的日期时间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T07:32:01.460

这可能是因为您正在转换一个表示为字符串且不是标准日期格式的日期。前任，

```
Dim _dateString As String = "22-2009-11"
Dim _date As DateTime = = DateTime.Parse(_dateString); 
```

抛出异常，因为`_dateString`是非标准日期格式。你会做的最好的事情是使用**[`DateTime.ParseExact`](http://msdn.microsoft.com/en-us/library/w2sa9yss.aspx)**

```
Dim _dateString As String = "22-2009-11"
Dim _date As DateTime =  DateTime.ParseExact(_dateString,"dd-yyyy-MM",CultureInfo.InvariantCulture); 
```

# zend-framework - zend 框架子查询

> ID：12929047
> 
> 赞同：1
> 
> 时间：2012-10-17T07:16:01.787
> 
> 标签：zend-framework, zend-db-table

我正在使用 zend 框架 1.12。我有以下查询要运行。

```
"SELECT name,(select count(*) from  org_quote_template_items where org_quote_template_items.quote_template_id = org_quote_templates.`id` ) as total_line_item FROM `org_quote_templates`" 
```

在我的模型文件中，我是这样创建的。以下是我的模型文件。

```
 class default_Model_DbTable_QuoteTemplates extends Zend_Db_Table_Abstract
{
    /**
     * Name of the original db table
     *
     * @var string
     */
    protected $_name = 'org_quote_templates';

    public function getAllTemplate($where){
        $select = $this->select();        
        $subquery = " (SELECT COUNT(*) FROM  org_quote_template_items WHERE org_quote_template_items.quote_template_id = org_quote_templates.`id` )";

        $select->from(array($this), array('org_quote_templates.*','total_line_items' => new Zend_Db_Expr($subquery)));

        $select = $select->where('organization_id = ?',$where['org_id']);

        $adapter = new Zend_Paginator_Adapter_DbSelect($select);
        $paginator = new Zend_Paginator($adapter);
        $paginator->setItemCountPerPage(
                Zend_Registry::get('config')->paginator->general);
        pr($adapter);
        exit;
    }
} 
```

运行代码时出现以下错误。" 异常 'Zend_Db_Table_Select_Exception' 带有消息 'Select query cannot join with another table' "

请让我知道我该怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T16:13:01.853

您的请求中有错误。你应该有：

```
 $select = $this->select ();
    $subquery = "(SELECT COUNT(*) FROM  dtempls WHERE order_id = orders.id)";

    $select->from ($this, array (
        'id',
        'total_line_items' => new Zend_Db_Expr ($subquery)
    )); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T09:01:23.663

我认为你必须使用`setIntegrityCheck(false)`来实现这一点。[检查此链接](http://filip.forrez.net/2011/03/03/zend_db_select-select-query-cannot-join-with-another-table/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T13:05:11.583

您可以在zend中尝试这种方式

```
$this->select()
->setIntegrityCheck(false)
->from(array('oqt' => 'org_quote_templates'),array('total_line_item'))
->joinLeft(array('oqti' => 'org_quote_template_items'), 'oqti.quote_template_id = oqt.id', array(count(*) as count)) 
```

# asp.net-mvc - 从数据库中获取随机和特定项目

> ID：12929048
> 
> 赞同：1
> 
> 时间：2012-10-17T07:16:08.727
> 
> 标签：asp.net-mvc, linq

这是应该的。表格将显示总共六个值，其中三个必须是特定的，而其他三个随机的，当然不能匹配。这意味着，如果我创建两个单独的`Currencies`模型实例（这是有问题的），并从一个中挑出三个我需要的特定实例，并使用其他实例来获得随机三个，我将不得不从第二个实例中排除这三个细节. 例子。

```
//instance
DateTime today = DateTime.Now.Date;
var currencies = db.Currencies.Where(c => c.DateCreated.Equals(today));

//first get three separate
currency1 = currencies.Where(c => c.Sign.Equals("EUR"));
currency2 = currencies.Where(c => c.Sign.Equals("USD"));
currency3 = currencies.Where(c => c.Sign.Equals("AUD"));

//second get three randoms
var currencies = db.Currencies.Where(c => c.DateCreated.Equals(today)).OrderBy(d => db.GetNewID()).Take(3); 
```

现在，应该有一种方法（我认为）可以在第二次使用时更改货币，`.Except`但我不确定如何排除三个值。这个怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T07:30:01.273

资料来源：[使用 LINQ to SQL 从表中获取随机记录](http://simon-holman.net/2010/04/getting-random-records-from-a-table-using-linq-to-sql/)

```
var currencies = db.Currencies.Where(c => c.DateCreated.Equals(today))
                                          .OrderBy(q => db.GetNewId())
                                          .Take(6); 
```

参考：
[有没有办法选择随机行？](http://social.msdn.microsoft.com/Forums/en/adodotnetentityframework/thread/62075dfb-dc41-4c3a-beaf-0c97ae416a2d)
[使用 Linq](https://stackoverflow.com/questions/4474053/select-n-random-records-with-linq)
[linq 选择 N 随机记录：随机排序](https://stackoverflow.com/questions/9449452/order-by-random-linq)

希望这有帮助..

# java - Javascript 和 Java 中的参数

> ID：12929049
> 
> 赞同：0
> 
> 时间：2012-10-17T07:16:09.367
> 
> 标签：java, javascript, ajax

我目前正在向 servlet 发送 ajax 请求，并在此过程中丢失了一些信息。我关心的参数（丢失数据）是“评论”参数。下面你可以看到我的最后 4 行 ajax。

```
var params = "name=" + name + "&email=" + email + "&comment=" + comment + "&player_id=" + player_id;    
xmlhttp.open("POST", 'comment', true);
xmlhttp.setRequestHeader('Content-Type','application/x-www-form-urlencoded');
xmlhttp.send(params); 
```

当我在发送之前和声明之后提醒我的参数时，它们看起来像这样：

```
name=Chris&email=email@gmail.com&comment=Hey, check this song out on groovershark http://grooveshark.com/#!/s/Here+feat+Soulive/2YDJIw?src=5&player_id=4 
```

但是，在我的 servlet 中，如果我在得到注释参数后立即为它打印一行，我会得到以下输出：

```
Hey, check this song out on groovershark http://grooveshark.com/#!/s/Here feat Soulive/2YDJIw?src=5 
```

问题是`"+"`标记在从 ajax 到容器的请求中消失了，我不知道为什么。我最终将它缩小到这个问题区域 b/c 我实际上直到在另一个堆栈溢出成员的帮助下一直在数据库连接中才注意到这一点。所以如果有人能让我知道我能做些什么来让我的`"+"`角色回来，我真的很感激！太感谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T07:25:57.837

您应该在发送参数之前对其进行编码，如下所示：

```
encodeURIComponent(params);
xmlhttp.send(params); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T07:20:38.293

您应该对 URI 的参数部分进行百分比编码： [http ://en.wikipedia.org/wiki/Percent-encoding#Types_of_URI_characters](http://en.wikipedia.org/wiki/Percent-encoding#Types_of_URI_characters)

这样 + 变成 %2B 并且可以在服务器端正确解释。

查看 encodeURIComponent() 函数：[http ://www.w3schools.com/jsref/jsref_encodeuricomponent.asp](http://www.w3schools.com/jsref/jsref_encodeuricomponent.asp)

# javascript - 为什么我的 javascript 只验证一个复选框？

> ID：12929052
> 
> 赞同：0
> 
> 时间：2012-10-17T07:16:12.097
> 
> 标签：javascript, validation

这是我的[小提琴](http://www.jsfiddle.net/DrewG85/yYPSS/)

我验证前 3 个文本输入没有问题，但是当我的验证到达复选框和单选按钮时，它只验证一个复选框和一个单选按钮，而不是循环返回并重新检查每个框/按钮。

所以如果我只输入第一个单选按钮和第一个复选框，它允许提交。此外，如果我输入一个复选框并点击提交，没有弹出窗口要求我填写其他复选框，单选按钮也有同样的问题，如果我输入一个单选按钮，它只会提醒我填写复选框并忽略其他单选按钮。

我需要在循环计数器中更改什么？任何帮助表示赞赏，谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T07:29:54.097

问题出在这两行

```
if (inputName.length > 0) if (element.name == inputName) returnValue++;
else returnValue++ 
```

现在是这样执行的

```
if (inputName.length > 0) {
    if (element.name == inputName) { 
        returnValue++;
    } else {
        returnValue++
    }
} 
```

我认为你需要用括号括起来 ifs

```
if (inputName.length > 0) {
    if (element.name == inputName) { 
        returnValue++;
    }
} else {
    returnValue++  // i kept this but don't understand what it means...
} 
```

编辑：

我更新了您的小提琴，并且按预期[工作](http://jsfiddle.net/yYPSS/2/)

# javascript - Fischer Yates 在咖啡脚本中洗牌

> ID：12929058
> 
> 赞同：1
> 
> 时间：2012-10-17T07:16:28.210
> 
> 标签：javascript, coffeescript, shuffle

假设`Math.random()`产生 0 和 1 之间均匀分布的随机数，这是 Fischer Yates shuffle 的正确实现吗？我正在寻找一个非常随机、均匀的分布，其中`arr`可以指定输入数组 ( ) 中的混洗元素的数量 (as `required`)。

```
shuffle = (arr, required)->
  rnd = (int) ->
    r = Math.random() * int
    Math.round r

  len = arr.length-1

  for i in [len..1]
    random = rnd(i)
    temp = arr[random]
    arr[random] = arr[i]
    arr[i] = temp
    break if i < len - (required - 2)

  return arr 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T06:20:44.813

几件事：

*   而不是`Math.round()`，尝试`Math.floor()`；在您的实现`Math.round()`中，第一个元素（在索引 0 处）和最后一个元素比所有其他元素（.5/len vs. 1/len）的机会更少。请注意，在第一次迭代中，您输入`arr.length - 1`元素`arr.length`。
*   如果你有一个`required` 变量，你也可以让它成为可选的，因为它默认为数组的长度：`shuffle = (arr, required=arr.length)`
*   即使您只打乱了最后一个元素，您也会返回整个数组。考虑改为返回`arr[arr.length - required ..]`
*   如果`required`不在范围内`[0,arr.length]`怎么办？

将它们放在一起（并添加一些天赋）：

```
 shuffle = (arr, required=arr.length) ->
      randInt = (n) -> Math.floor n * Math.random()
      required = arr.length if required > arr.length
      return arr[randInt(arr.length)] if required <= 1

      for i in [arr.length - 1 .. arr.length - required]
        index = randInt(i+1)
        # Exchange the last unshuffled element with the 
        # selected element; reduces algorithm to O(n) time
        [arr[index], arr[i]] = [arr[i], arr[index]]

      # returns only the slice that we shuffled
      arr[arr.length - required ..]

    # Let's test how evenly distributed it really is
    counter = [0,0,0,0,0,0]
    permutations = ["1,2,3","1,3,2","2,1,3","2,3,1","3,2,1","3,1,2"]
    for i in [1..12000]
      x = shuffle([1,2,3])
      counter[permutations.indexOf("#{x}")] += 1

    alert counter 
```

# groovy - 使用 StreamingMarkupBuilder 在标签内生成 CDATA

> ID：12929060
> 
> 赞同：3
> 
> 时间：2012-10-17T07:16:41.230
> 
> 标签：groovy, cdata

我需要以下 XML 结构

```
<DCS>
    <bytes length="29235"><![CDATA[....]]></bytes>
</DCS> 
```

并有以下代码

```
DCS {
bytes(length: "${docBytes.size()}",mkp.yieldUnescaped("<![CDATA[${docBytes}]]>"))
} 
```

但它产生

```
 <DCS>
    <![CDATA[[....]]]>
<bytes length='135948'>groovy.xml.streamingmarkupsupport.StreamingMarkupWriter@32adca00</bytes>
    </DCS> 
```

如何生成所需的 xml 结构？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T10:43:59.600

你需要把你`mkp.yieldUnescaped`放在一个闭包中，而不仅仅是`bytes`标签方法的第二个参数，即：

```
import groovy.xml.*

byte[] docBytes = 'Tim Yates'

new StreamingMarkupBuilder().bind {
  DCS {
    bytes( length:docBytes.length ) {
      mkp.yieldUnescaped "<![CDATA[${docBytes.toList().join(' ')}]]>"
    }
  }
} 
```

生成：

```
<DCS><bytes length='9'><![CDATA[84 105 109 32 89 97 116 101 115]]></bytes></DCS> 
```

你可以在这里看到，我已经将每个字节编码成一个用空格分隔的字符串。你怎么做取决于你（我猜这取决于解码字节的内容）;-)

# struts2-jquery - Struts2 中的选项卡式面板验证

> ID：12929061
> 
> 赞同：0
> 
> 时间：2012-10-17T07:16:47.293
> 
> 标签：struts2-jquery

我有一个带有 4 个选项卡的选项卡式面板。在第三个选项卡上，我有 3 个文本字段和提交按钮。如何对此选项卡进行验证。在验证错误时如何返回到同一选项卡（即第 3 个选项卡）。当我尝试使用 XML 验证时，它在验证失败时返回第一个选项卡而不是第三个选项卡（resutl type="input"）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T11:36:07.877

TabbedPanel 使用（或不使用，由您选择）cookie 来记住上次访问的选项卡。

如果我没记错的话，你不能动态使用它：

您可以始终记住上次访问的选项卡，或者您将始终从第一个选项卡开始。

如果要记住当前选项卡，请插入

```
useSelectedTabCookie="true" 
```

属性到

```
<s:tabbedPanel> 
```

标记，结果如果您尝试在 TAB 3 上提交数据并且验证将引发错误，您将返回到 Tab 3 中的页面。

我建议你不要用一个按钮提交多个标签，每个标签都应该有自己的。

# python - 使用 Python 创建 XML 文件

> ID：12929062
> 
> 赞同：-1
> 
> 时间：2012-10-17T07:16:51.503
> 
> 标签：python, xml

> **可能重复：**
> [使用 python 创建一个简单的 XML 文件](https://stackoverflow.com/questions/3605680/creating-a-simple-xml-file-using-python)

我想用 Python 写一个 XML 文件。XML 仅类似于以下格式：

```
<Title rollid="1" mainid="1" teamid="1">
<s name="hello" address"abcdef" "etc"/>
 <s name="" address="" />
</Title> 
```

我用 Python 编写了代码，`lxml`但是`etree`我得到的 XML 文件是这样的：

```
<Title>
<s>rollid=""1" mainid="1"</s>
<s>name="" address=""</s>
<s>name="" address=""</s>
</Title> 
```

请让我知道如何获得所需的格式

我的代码：

```
import os
import sys 
```

从 lxml 导入 etree 导入 lxml.builder 作为 lb

```
#i made a dummy file AddDetail.xml with the root tags

def WriteDetails(rolid,mainid,name,address):
    myhash=dict()   # Declaring a dictionary

    #Storing the data which has to be written to xml in a dictionary
    myhash={'rollid':rolid, 'mainid':mainid,  'name':name, 'opid':opid, 'address':address}

    # Converting the data from dictionary to string for XML and 
    also checking if any valueis 0
    data=' '.join([('%s="%s"')%(key,value) for key,value in myhash.iteritems()if value])

    # Creating the root Element
    root=etree.Element("Title")

    # Making a new Document Tree
    doc=etree.parse('AddDetail.xml')

    # Getting the root tag
    root=doc.getroot()

    # Adding a new Element
     y=lab.E.Title(lb.E.s(data),
    rollid="1" mainid="1" teamid="1")
    print etree.tostring(y,pretty_print=true)

   output i get is

   <Title rollid="1" mainid="1" teamid="1">
   <s>name="hello" address="aaaa"</s>
   </Title>

   I need something like
   <Title rollid="1" mainid="1" teamid="1">
   <s name="hello" address="aaaa"/>
   </Title> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T07:54:36.163

您需要学习如何创建属性：

[http://lxml.de/tutorial.html#elements-carry-attributes](http://lxml.de/tutorial.html#elements-carry-attributes)

```
>>> root = etree.Element("root", interesting="totally")
>>> etree.tostring(root)
b'<root interesting="totally"/>' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T08:09:54.803

使用 lxml.builder，[这里也是](http://lxml.de/tutorial.html#the-e-factory)一个教程。

```
 import lxml.builder as lb
   from lxml import etree

y=lb.E.Title(lb.E.s(name="hello",adress="abcdef"),
             lb.E.s(name="",adress=""),
             rollid="1", mainid="1",teamid="1")

print etree.tostring(y, pretty_print=True)

>>> 
<Title teamid="1" rollid="1" mainid="1">
  <s adress="abcdef" name="hello"/>
  <s adress="" name=""/>
</Title> 
```

# ruby-on-rails - 将 p12 文件安全地存储在 rails 中

> ID：12929065
> 
> 赞同：5
> 
> 时间：2012-10-17T07:16:55.857
> 
> 标签：ruby-on-rails, heroku, sign

如何将我的 p12 文件安全地存储在 rails 中？我的生产网络应用程序将在 Heroku 中。该文件用于动态签署一些文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T22:37:15.890

在 Heroku 上将 p12 内容存储在环境变量中应该足够安全。这样，它至少在您的代码库或数据库中不可用。

您可以像这样设置 Heroku 环境变量：

```
heroku config:add P12_CONTENTS="$(cat /path/to/file.p12)" 
```

# extjs - 单击组合框时出现加载，如何避免它？

> ID：12929066
> 
> 赞同：0
> 
> 时间：2012-10-17T07:16:56.457
> 
> 标签：extjs

我有 2 个组合框，当我单击第二个组合框时，会出现加载并保持在那里，直到我单击列表项。我不想加载出现在第二个组合上。

我有 2 个组合框，当我单击第二个组合框时，会出现加载并保持在那里，直到我单击列表项。我不想加载出现在第二个组合上。

```
var UnitPanel = Ext.create('Ext.panel.Panel', {
                itemId:'dsUnitPanel',
                border:0,
                items:[UnitGrid,{
                xtype:'combobox',
                tpl: '<tpl for="."><div class="x-boundlist-item" >{name} [{freeSize} GB Free] </div></tpl>',
                style:'margin:10px;',
                fieldLabel: 'A Group(*)',
                editable:false,
                bodyStyle:'padding-left:10px;',
                store: dsAStore,
                valueField:'name',
                displayField:'name',
                //forceSelection: true,
                multiSelect: false,
                name: 'txtMode',
                id:'dsVolumeGroupId',
                queryMode: 'local',
                triggerAction: 'all',
                emptyText:'Select A Group', 
                listeners: {                
                    select: function(combo, record, index) {    

                     this.getStore().each(function(r){                  

                         if(combo.getValue() == r.data['name'])
                         {
                            selectedDsVg = combo.getValue();
                            selectedDsVgFreeSize = r.data['freeSize'];                                              
                         }
                     });

                  } ,

                  'focus':function()
                  { 

                     if(selectedDsWizardIndex == null)
                     {
                         Ext.MessageBox.alert('Error', 'Please select at least one Array',function(){
                                enableTabIndexing();
                             });    

                     }
                  }

                }
            },
            {
                xtype:'combobox',
                style:'margin:10px;',
                fieldLabel: 'B Group(*)',
                editable:false,
                bodyStyle:'padding-left:10px;',
                loadMask: false,
                store: BGroupStore,
                valueField:'value',
                displayField:'name',
                multiSelect: false,
                name: 'dsBGroupId',
                id:'dsBGroupId',
                queryMode: 'local',
                triggerAction: 'all',
                //disabled:true,
                emptyText:'Select B Group', 
                listeners: {                
                    select: function(combo, record, index) {    

                        //store.on('load', function () { this.getPicker().setLoading(false); }, this);
                        this.getStore().loadMask.hide();
                     this.getStore().each(function(r){                  

                         if(combo.getValue() == r.data['value'])
                         {
                             alert('Select');
                            bGroupName = r.data['name'];                                                    
                         }
                     });

                  },

                  'focus':function()
                  {           
                     if(selectedDsWizardIndex == null)
                     {
                         Ext.MessageBox.alert('Error', 'Please select at least one',function(){
                                enableTabIndexing();
                             });    

                     }
                  }

                }
            } 
```

请建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-23T08:26:56.563

你应该定义一个 listConfig 像：

`listConfig: { loadingText: null, loadMask: false }`

# c - -mtune=i486 和 -arch=i486 有什么区别

> ID：12929077
> 
> 赞同：5
> 
> 时间：2012-10-17T07:18:13.720
> 
> 标签：c, linux, gcc, compiler-construction

我有一个旧代码需要`-m486`用`GCC`. 但是没有那个标志。然后我发现`-mtune=i486`并且`-arch=i486`
我已经阅读了这个[页面](http://gcc.gnu.org/onlinedocs/gcc-4.7.2/gcc/i386-and-x86_002d64-Options.html#i386-and-x86_002d64-Options)。但是还是不知道哪个最适合`-m486`？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-17T07:41:06.550

该`-march`选项定义了可以使用的指令列表，该`-mtune`选项随后修改优化过程。

您通常会使用它`-march`来指定最低要求，并`-mtune`针对大多数用户的需求进行优化。

例如，IA32 架构定义了各种用于字符串处理和指令重复的指令。在 386 和 486 上，它们比显式汇编代码更快、更小，因为可以跳过指令获取和解码阶段，而在较新的模型上，这些指令阻塞了指令管道，因为每个处理步骤都直接依赖于前一个处理步骤，所以CPU 的并行执行功能被浪费了。

Linux 发行版通常用于`-march=i486 -mtune=i686`确保您仍然可以在 486 上安装和运行，但由于大多数用户拥有现代 CPU，因此重点在于使其以最佳方式运行。

# sql - 如何使用简单查询从表中搜索数据列表并在表中返回不重复的结果？

> ID：12929083
> 
> 赞同：0
> 
> 时间：2012-10-17T07:18:21.820
> 
> 标签：sql, sql-server, sql-server-2008, tsql, cursor

我正在尝试遍历表中的数据，并使用数据进行搜索以在另一个表中返回结果。

如何防止重复添加到表中？请注意，查询结果添加的顺序非常重要。因此，如果结果已经添加，我不希望再次添加它们。请注意，完整搜索类别所做的原始排名具有误导性，我不想使用它。

我正在使用游标，但有人告诉我可以使用简单查询来解决；我怎么做？

下面是代码。

```
 ...

    DECLARE @subQ NVARCHAR(200)
    SET @subQ = ''

    DECLARE cur1 CURSOR FOR
    SELECT combination FROM @Subqueries

    OPEN cur1
    FETCH NEXT FROM cur1 INTO @subQ

    WHILE @@FETCH_STATUS = 0
    BEGIN
        INSERT INTO @Results (app_id, rank, importance)
        SELECT app_id, rank, 1
        FROM CONTAINSTABLE(dbo.Applications, display_name, @subQ) KEY_TBL
        INNER JOIN Applications App
        ON KEY_TBL.[KEY] = App.app_id

        FETCH NEXT FROM cur1 INTO @subQ   
    END   

    CLOSE cur1
    DEALLOCATE cur1

    ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T07:29:50.943

您在 while 循环中使用了 1 = 1。因此它将始终显示真实条件，结果是循环转换为无限循环。

在 while 循环中更改您的条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T07:46:22.857

试试这个while循环

```
DECLARE @subQ NVARCHAR(200)
DECLARE @mn int
DECLARE @mx int
DECLARE @val varchar(100)
SET @subQ = ''

;WITH CTE as(select ROW_NUMBER() over (order by (select 0)) as rn,* from @Subqueries)
select @mn=MIN(rn),@mx=MAX(rn) from CTE

WHILE @mn>=@mx
BEGIN
select @val=somecolm from CTE where rn=@mn
--do here for each value of any column in CTE
SET @mn=@mn+1
END 
```

# ms-access - Access 2007 查询以捕获包含 2 个日期的记录

> ID：12929085
> 
> 赞同：1
> 
> 时间：2012-10-17T07:18:32.333
> 
> 标签：ms-access, date, ms-access-2007

我正在查询以获取基于两个日期（开始日期和结束日期）的记录。

我需要获取的是跨越部分或全部给定期间的记录，换句话说，开始日期可能在参数日期之前但小于结束日期，或者在开始日期之后开始并在结束日期之后结束。

即开始日期 = 12 年 10 月 1 日和 12 年 10 月 31 日结束日期。我想捕获开始日期在 10 月 1 日之前但跨越此期间的记录，无论它是在 11 月还是 10 月中旬结束。以及 2012 年 10 月 1 日至 2012 年 10 月 31 日之间的记录。

实际上，我需要排除这个时期的记录，但首先需要确保我得到这个数据集是正确的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T16:07:59.897

我从存储在 中的这个简单数据集开始`MyTable`，同时使用`start_date`和`end_date`作为日期/时间数据类型。

```
id start_date end_date
 1  9/29/2012 9/30/2012
 2  9/29/2012 10/2/2012
 3  9/29/2012 11/1/2012
 4  10/2/2012 11/1/2012
 5  11/1/2012 11/2/2012 
```

运行下面的查询，并为and参数提供`2012-10-01`和，给我这个输出结果集。`2012-10-31``range_start``range_end`

```
id start_date end_date
 2  9/29/2012 10/2/2012
 3  9/29/2012 11/1/2012
 4  10/2/2012 11/1/2012 
```

如果这与您想要的不相似，请编辑您的问题，向我们展示一组简短的输入数据样本以及您希望从该样本中获得的输出。

另外，请注意 my`start_date`和`end_date`values 的时间部分都是午夜。如果您的对应对象包括一天中的任何其他时间，您将需要修改查询以处理它们。

这是我使用的查询中的 SQL：

```
PARAMETERS range_start DateTime, range_end DateTime;
SELECT m.id, m.start_date, m.end_date
FROM MyTable AS m
WHERE
       m.start_date Between [range_start] And [range_end]
    OR m.end_date Between [range_start] And [range_end]
    OR (m.start_date<[range_start] AND m.end_date>[range_end]); 
```

# python - 解析excel样式公式

> ID：12929086
> 
> 赞同：12
> 
> 时间：2012-10-17T07:18:32.703
> 
> 标签：python

我正在使用 python 从电子表格 xml 构建公式参考图。公式就像

```
=IF(AND(LEN(R[-2]C[-1])>0,R[-1]C),WriteCurve(OFFSET(R16C6, 0,0,R9C7,R10C7),R15C6,R10C3, R8C3),"NONE") 
```

我只对获取 writecurve 函数的第 n 个参数感兴趣。在这里，我提出了非常 C 风格的程序，基本上计算不在括号内的昏迷。有很多嵌套公式

```
def parseArguments(t, func, n):
start=t.find(func)+len(func)+1
bracket = 0
ss = t[start:]
lastcomma = 0
for i, a in enumerate(ss):
    if a=="(":
        bracket +=1
    elif a==")":
        if bracket==0:
            break
        bracket-=1
    elif a == ",":
        if bracket==0 and n==0:
            break
        elif bracket ==0:
            if n-1==0:
                lastcomma = i
            n-=1
if lastcomma == 0:
    return ss[:i]
else:
    return ss[lastcomma+1:i] 
```

有没有这样做的pythonic方式？还是有更好的递归方式来解析整个公式？非常感谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-17T08:06:48.690

我所知道的最好的 Excel 公式解析器是[EW Bachtal's algorithm](http://ewbi.blogs.com/develops/2004/12/excel_formula_p.html)。Robin Macharg 有一个 Python 端口；我知道的最新版本是[pycel 项目](https://github.com/dgorissen/pycel)的一部分，但它可以独立使用 - [ExcelFormula](https://github.com/dgorissen/pycel/blob/3436e958cc7c2f9258f0d69a53ad5bf74cc6a166/src/pycel/excelformula.py#L548)。解析您的公式没有问题：

```
from pycel.excelformula import ExcelFormula, FunctionNode
formula = ExcelFormula('=IF(AND(LEN(R[-2]C[-1])>0,R[-1]C),WriteCurve(OFFSET(R16C6, 0,0,R9C7,R10C7),R15C6,R10C3, R8C3),"NONE")')
>>> formula.ast
FunctionNode<IF> 
```

然后，您可以通过 AST 找到 WriteCurve 节点并检查其参数：

```
write_curve = next(node for node, _ in formula.ast.descendants if isinstance(node, FunctionNode) and node.value.strip('(') == 'WriteCurve')
>>> write_curve.children[2].value
'R10C3' 
```

# session - 如何在 mongodb 集合中创建文档并同时更新另一个集合

> ID：12929087
> 
> 赞同：0
> 
> 时间：2012-10-17T07:18:32.687
> 
> 标签：session, mongodb, mongoose

这是我的问题

我有三个架构

```
var UserSchema = new Schema({
        username:String,
        email:String,
        hashed_password:String,
        salt:String,
        shop_id:{type:Schema.Types.ObjectId,ref:'Shop'},
})

var ShopSchema = new Schema({
       owner_id:{type:Schema.Types.ObjectId,ref:'User'},        
       owner_real_id:String,                                    
       owner_real_name:String,                                  
       owner_real_location:String,                              

       shop_name:String,
       sell_product_ids:[Schema.Types.ObjectId],

})

var ProductSchema = new Schema({

}) 
```

必须注册用户模式才能使用该应用程序，但除非用户想卖一些东西，否则无需注册商店模式。但是，当用户确实注册了 shopschema 时，我需要使用商店的 _id 更新 usersschema，

所以这就是我所做的

1.  在商店集合中创建文档
2.  找到商店_id
3.  更新用户集合

如您所见，我查询了数据库三次，所以我想知道这是否可以在一个查询中完成以节省时间

```
Shop.create(regist_data,function(){
    //update the user collection here
}) 
```

以防万一你想知道我为什么需要这个，因为我使用“护照”登录用户，并且我想通过 req.user 中商店的 _id 访问 ProductShcema，否则每次我想访问我想要的 ProductShcema找到店铺的_id，然后得到属于店铺_id的产品。

无论如何，如果你有更好的解决方案，请告诉我。thanx !!!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T08:32:49.350

抱歉，我想我应该更仔细地阅读猫鼬文档

这是我想出来的

```
Shop.create(regist_data,function(err,shop){
    console.log('shop = '+shop);
    User.findByIdAndUpdate(req.user.id,{ $set: { shop_id: shop._id }},{new:true},function(err,data){
  if(err){
    console.log(err)
  }
  console.log('new user = '+data);
 })
}) 
```

它创建商店文档并更新用户收藏，它适用于我。

# c# - 蕴含运算反映了什么？

> ID：12929088
> 
> 赞同：3
> 
> 时间：2012-10-17T07:18:33.817
> 
> 标签：c#, .net, c#-4.0

我想知道蕴含运算反映了什么？

*蕴涵运算符的真值表：* ![在此处输入图像描述](../Images/0cd537927cb0b1f623b241c1b7e38b22.png)

```
using System;
class Implication
{
    static void Main()
    {
        bool p = false, q = false;
        int i, j;
        for (i = 0; i < 2; i++)
        {
            for (j = 0; j < 2; j++)
            {
                if (i == 0) p = true;
                if (i == 1) p = false;
                if (j == 0) q = true;
                if (j == 1) q = false;
                Console.WriteLine("p is " + p + ", q is " + q);
                if (!p | q) Console.WriteLine(p + " implies " + q +
                 " is " + true);
                Console.WriteLine();
            }
        }
    }
} 
```

我的意思是为什么我们使用隐式操作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T07:29:23.237

“p 蕴含 q”的意思是“如果 p 为真，那么 q 也必须为真”：

```
p       q       p implies q
false   false   true
false   true    true
true    false   false
true    true    true 
```

您可以检查是否`!p | q`具有相同的真值表。

# android - 如何增加控件的触摸区域（ToggleButton）？

> ID：12929089
> 
> 赞同：6
> 
> 时间：2012-10-17T07:18:36.267
> 
> 标签：android, android-layout, android-widget

我有一个`ToggleButton`. 我想有更多的地方点击这个按钮。如果我添加`layout_width`等`layout_height`，图像看起来很糟糕。我也尝试过使用`android:padding`，但对我没有帮助。

为了方便用户，需要它。

![在此处输入图像描述](../Images/706b66d652859ef856178cff964c8322.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T09:28:55.833

用于`TouchDelegate`您的`ToggleButton`as ammar26 已评论您。

或者

试试这个：

制作一个类似于`LinearLayout`或`RelativeLayout`覆盖`ToggleButton`. 现在为该父布局添加边距。

现在，在单击该父布局时，对切换按钮执行操作。

希望它能帮助您增加视图的触摸区域。

快乐编码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T10:56:22.937

简单的解决方案：如果您有按钮的图像，则在其周围创建透明区域（即用于触摸区域）。

灰色区域可以是透明的，以增加触摸区域。

![在此处输入图像描述](../Images/143cdb9533dc53505797508cac9520b7.png)

或使用[TouchDelegate](https://stackoverflow.com/a/1343796/28557)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-02-26T06:43:41.770

您还可以通过设置`touch delegates` [Android 开发者培训博客文章来增加触控区域](http://developer.android.com/training/gestures/viewgroup.html#delegate)

```
public class MainActivity extends Activity {

    @Override 
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        // Get the parent view 
        View parentView = findViewById(R.id.parent_layout);

        parentView.post(new Runnable() {
            // Post in the parent's message queue to make sure the parent 
            // lays out its children before you call getHitRect() 
            @Override 
            public void run() { 
                // The bounds for the delegate view (an ImageButton 
                // in this example) 
                Rect delegateArea = new Rect();
                ImageButton myButton = (ImageButton) findViewById(R.id.button);
                myButton.setEnabled(true);
                myButton.setOnClickListener(new View.OnClickListener() {
                    @Override 
                    public void onClick(View view) {
                        Toast.makeText(MainActivity.this, 
                                "Touch occurred within ImageButton touch region.",  
                                Toast.LENGTH_SHORT).show();
                    } 
                }); 

                // The hit rectangle for the ImageButton 
                myButton.getHitRect(delegateArea);

                // Extend the touch area of the ImageButton beyond its bounds 
                // on the right and bottom. 
                delegateArea.right += 100;
                delegateArea.bottom += 100;

                // Instantiate a TouchDelegate. 
                // "delegateArea" is the bounds in local coordinates of  
                // the containing view to be mapped to the delegate view. 
                // "myButton" is the child view that should receive motion 
                // events. 
                TouchDelegate touchDelegate = new TouchDelegate(delegateArea, 
                        myButton);

                // Sets the TouchDelegate on the parent view, such that touches  
                // within the touch delegate bounds are routed to the child. 
                if (View.class.isInstance(myButton.getParent())) {
                    ((View) myButton.getParent()).setTouchDelegate(touchDelegate);
                } 
            } 
        }); 
    } 
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-17T09:16:26.640

不要将触摸事件放在按钮中，而是将其放在包含唯一按钮的布局中。并根据您的意愿固定布局的大小

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-05-28T09:04:33.433

增加 的值`android:padding`：

```
<SeekBar android:id="@+id/seek" android:layout_width="0dip"
android:layout_height="wrap_content" android:layout_weight="1" 
android:paddingTop="5dp" android:paddingBottom="5dp"
android:progressDrawable="@drawable/green_scrubber_progress_horizontal_holo_ligh‌​t"
android:thumb="@drawable/thumb" /> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-17T07:31:42.923

取你的`margin`(place of `padding`) ，然后对你`Button`的`parent layout``Layout`

```
mLayout.setonTouchListener(View.onTouchListener{
     // here your working code 
}); 
```

# python - 使用 selenium 从网页中捕获文本

> ID：12929095
> 
> 赞同：0
> 
> 时间：2012-10-17T07:18:58.507
> 
> 标签：python, selenium, text-capture

我正在尝试从不断变化的网站中捕获一段文本。看起来像 ：

> 订单编号：XXIO-123344-3456

前缀是不变的，但数字总是会改变。我想捕获这个号码并存储它。我尝试过`storeTextPresent`使用正则表达式模式`regexp:Email.*@.*com`。它确实返回了一个**True**但它没有返回我的值。当然`storeTextPresent`应该只返回**True**或**False**。那么现在我怎样才能捕捉到确切的价值呢？

这是网页部分的屏幕截图。无法显示整个页面，非常抱歉。

![在此处输入图像描述](../Images/3101337ff07a922695d7aacba5b25be1.png)

那么有什么想法吗？

我在录制到 python 遥控器后导出这些测试。所以python特定的代码更受欢迎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T08:25:08.360

`assertText` command with the regular expression `regexp:^XXIO-.+` would resolve the issue. Try this in conjunction with the element id you need to verify.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T17:07:46.413

Python 代码。

```
def get_order_id(driver):
    """ Gets the order id, given an Order Details page. """
    try:
        bFonts = driver.find_element_by_class_name("bFont")
        for element in bFonts:
            if "Order ID" in element.text:
                return element.text.split()[-1]
    except NoSuchElementException:
        return None 
```

这假设类名`bFont`永远不会改变。如果是这样，您可以重写它以搜索`div`标签。它还假设将找到“订单 ID”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T09:38:55.017

感谢您的想法，但我找不到文本的定位器。这是我使用 firebug 捕获的代码。

```
<div class="chkOutBox">
<h2 id="tnq" class="marb10">Order Details</h2>
<div class="ordRevAddressArea">
<div class="ordRevDelSlotArea">
<div class="clear"></div>
<div class="bFont">Order ID:&nbsp; BBO-72262-171012</div>
<div class="scartPgHdr">
<h3 class="catHdr">Fruits &amp; Vegetables</h3> 
```

在这里，我们正在捕获 id 号（第 6 行）......可能有人可以告诉我如何从上面的代码中找出可能的定位器......顺便说一下，我通过捕获具有订单 ID 的页面的 URL。我使用正则表达式来分隔订单 ID，仅此而已.......这只是一个临时解决方案......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T07:34:43.623

刚看了一下说明书。我在[Store Commands 和 Selenium Variables下找到了](http://seleniumhq.org/docs/02_selenium_ide.html#store-commands-and-selenium-variables)[storeText](http://seleniumhq.org/docs/02_selenium_ide.html#storetext) 命令。我的猜测是，如果您使用 storeText 而不是 storeTextPresent。

[此外，您可以尝试使用xpath](http://seleniumhq.org/docs/02_selenium_ide.html#locating-by-xpath)、[DOM](http://seleniumhq.org/docs/02_selenium_ide.html#locating-by-dom)或[CSS](http://seleniumhq.org/docs/02_selenium_ide.html#locating-by-css)定位器，而不是尝试使用正则表达式模式查找文本。

# ios - sqlite3 - iOS - 数据库被锁定

> ID：12929104
> 
> 赞同：3
> 
> 时间：2012-10-17T07:19:40.350
> 
> 标签：ios, xcode, sqlite

我正在为 ipad 开发一个应用程序，我正在使用 sqlite 语句（选择、更新、插入、删除）。

我在每个句子的开头打开（sqlite3_open）数据库并在每个句子的结尾关闭（sqlite3_close）。但有时我收到“数据库已锁定”消息。

我不知道我能做些什么来解决这个问题。

感谢和抱歉这个小信息。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T07:39:34.900

如果我没记错的话，sqllite 的问题是您一次只能访问一次。如果你有多个线程，你可以在这种情况下运行。例子：

在线程 t1 上运行 method1（访问数据库）。x 秒后在线程 t2 上运行方法 2（访问数据库）。

如果 method1 在 x 秒内未完成，则两个方法将同时访问它。而且，正如我所说，我知道 sqllite 不支持这一点。

您应该尝试标记数据库的使用情况，如果您想访问它但它正在使用中，请在 x 秒后重试。像这样：

```
- (void) generalMethodThatUsesDatabses
{
    if(databaseIsUsed)
    {
         [self performSelector:@selector(generalMethodThatUsesDatabses) withObject:nil afterDelay:5];
          return;
    }

    databaseIsUsed = TRUE;   //global bool variable

    //your code here

    databaseIsUsed = FALSE;

} 
```

希望这可以帮助。干杯!

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-30T07:47:33.813

您可能在使用同一个模拟器之前打开了数据库。要结束对数据库的所有操作并释放所有资源，您始终必须使用两个 (!) 语句：

```
sqlite3_finalize(statement);
sqlite3_close(database); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-21T09:50:31.647

解决此问题的一个好方法是将其包装到 C++ 库中。这样，您可以在堆栈上创建库包装器。这意味着当函数超出范围时，您可以在析构函数中关闭连接。

（请注意，我对 Objective-C 使用引用计数）

例如：

```
NSArray* ScoreBoard::getAllScores()
{ 
      ScoreBoard::ensureExistingTable();

      //Stack allocated
      SqliteWrapper sqlite("Scores.sqlite");

     NSArray* result = sqlite.RunQuery("SELECT * FROM Scores ORDER BY ID DESC");

     return result;
     //after this, the sqlite destructor is called
} 
```

Objective-C 编译器允许您合并 C++，这非常好。它可能非常有用。

还

```
 void SqliteWrapper::Close()
 {
     sqlite3_close(db);
 } 
```

正如文森特所指出的，您必须完成声明。如果要保持连接打开，请在每个语句后使用 finalize。在您放弃连接的那一刻关闭连接。

这种方法对我有用。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-12-07T12:30:59.920

它用于三种方法 1.isert 2.update 3.delete。

```
-(NSMutableArray *)resultSet
-(void)insertWithTitle:(NSString *)title Body:(NSString *)body
-(BOOL)updateAtIndex:(int)index Title:(NSString *)title Body:(NSString *)body

NSMutableArray *result = [[[NSMutableArray alloc] initWithCapacity:0] autorelease];

FMResultSet *rs = [db executeQuery:[self SQL:@"SELECT * FROM %@" inTable:TABLE_NAME]];
while ([rs next]) {
    Record *tr = [[Record alloc] initWithIndex:[rs intForColumn:@"id"]
                                         Title:[rs stringForColumn:@"title"]
                                          Body:[rs stringForColumn:@"body"]];
    [result addObject:tr];
    [tr release];
}

[rs close]; 
```

2....

```
return result;
[db executeUpdate:[self SQL:@"INSERT INTO %@ (title, body) VALUES (?,?)" inTable:TABLE_NAME], title, body];
if ([db hadError]) {
    NSLog(@"Err %d: %@", [db lastErrorCode], [db lastErrorMessage]); 
```

删除记录：

```
BOOL success = YES;
[db executeUpdate:[self SQL:@"DELETE FROM %@ WHERE id = ?" inTable:TABLE_NAME], [NSNumber numberWithInt:index]];
if ([db hadError]) {
    NSLog(@"Err %d: %@", [db lastErrorCode], [db lastErrorMessage]);
    success = NO;
}
return success;

} 
```

# android-layout - Android：在没有自定义适配器的情况下更改 ListView 中的文本颜色

> ID：12929105
> 
> 赞同：1
> 
> 时间：2012-10-17T07:19:44.327
> 
> 标签：android-layout

是否可以在不为其定义自定义适配器的情况下更改 ListView 中的 textColor？与在 TextView 中一样，我们可以应用 style = "@style/mystyle"，我们可以在其中定义 textcolor。

```
 <ListView
    android:id="@+id/listview" 
    style="@style/WhiteText"
    /> 
```

在值中，样式定义为：

```
 <resources>
    <style name= "WhiteText">
    <item name ="android:textColor">#FFFFFF </item>
    <item name="android:background">#000000 </item>
    </resources> 
```

我试过了，但它没有给我想要的输出。所以我想问一下，这是一种有效的方式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T09:23:22.887

可能可以定义 ListView 的样式并为其设置 Text 颜色。

请参阅下面的答案：

[第一的](https://stackoverflow.com/questions/8558172/apply-style-to-android-listview)

[第二](https://stackoverflow.com/questions/4051297/how-do-i-style-selected-item-in-android-listview)

希望它会帮助你。如果有任何疑问，请告诉我。

# sorting - SolR - 搜索房间可用性并按结果排序

> ID：12929108
> 
> 赞同：1
> 
> 时间：2012-10-17T07:19:52.270
> 
> 标签：sorting, solr

我正在尝试使用 SolR 和 PHP 实现一种酒店/旅馆搜索。对于任何可用的房间，我都会在我的索引中存储一个新文档，其中包含有关住宿的相关信息和包含 availableFrom 和 availableTill 日期的多值属性。对 SolR 运行查询以在特定时间跨度内获取所有房间应该不难，但在排序时我的大脑搞砸了......

我的目标是不仅显示可用的住宿，而且所有这些都与目的地（国家/城市/地区）上的一般过滤查询匹配，并对这些结果进行排序，以便所有可用房间都排序到列表的开头。

因此，在 2012 年 12 月 1 日至 12 月 5 日期间在慕尼黑搜索房间时，我希望得到如下结果：

*   A室（可用）
*   B室（可用）
*   房间 C（在给定的时期内不完全可用 => 很高兴拥有）
*   D室（完全没有）

目前我正在运行 SolR 3.6，但如有必要可以切换到新的 4.0。

有任何 Solr-Guru 对我有什么建议吗？任何帮助表示赞赏:-)

-编辑-

我认为 Samuele 把我推向了正确的方向。所以现在的问题是，如何创建一个能够按可用性排序的函数查询。也许有更好的方法来存储我的文档，即更改我的 schema.xml？

这是其中的一小段摘录：

```
<field name="recordId" type="string" indexed="true" stored="true" />
<field name="language" type="int" indexed="true" stored="true" />
<field name="name" type="string" indexed="true" stored="false" />
<field name="maxPersons" type="int" indexed="true" stored="false" />
<field name="avgPrice" type="tdouble" indexed="true" stored="false" />
<field name="city" type="freetext" indexed="true" stored="false" />
<field name="district" type="freetext" indexed="true" stored="false" />
<field name="country" type="freetext" indexed="true" stored="false" />      
<field name="availableFrom" type="date" indexed="true" stored="true" multiValued="true" />
<field name="availableTill" type="date" indexed="true" stored="true" multiValued="true" /> 
```

干杯 - 斯文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T07:27:27.527

好吧，您必须根据“房间”字段（或可用性，取决于您）来提升您的查询，并根据值给出不同的分数

快速示例：

让我们给一个可用的房间提升 20，部分可用的提升 10，而不可用的提升 1（只是为了确定）

您的查询（url-wise，我不知道 solr 的 php 接口）需要类似

```
<query>&bq=rooms:avail^20.0&bq=rooms:part-avail^10.0... 
```

建议：如果您使用 dismax 查询处理程序，它会让人上瘾。这意味着您必须添加比这更大的提升（例如 2000 而不是 20），因为它将提升值添加到查询分数

此外，您应该从 solr wiki 检查[此链接](http://wiki.apache.org/solr/SolrRelevancyFAQ#How_can_I_increase_the_score_for_specific_documents)，这比任何解释都要好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T16:03:46.773

好吧，我在这里对整个事情进行了一些研究和测试......针对我的问题的正确且可能最好的解决方案是针对 SolR 执行多个查询。正如 Samuele 所建议的，我分两步向 SolR 查询所有符合给定条件和时间跨度的住宿。

1：获取所有匹配且可用的房间（包括部分可用的房间） 2：获取所有不可用的房间

第二个查询显然只在我们需要显示更多结果'cos的分页时才执行。

之后，对步骤 1 的所有结果进行后处理，以确定它们是否在整个请求的时间跨度内可用。

进一步的“改进”是在模式中引入一个新字段：availableDay。对于每个可预订的日期，该日期都会有一个条目。这会将第一个查询分成两个单独的查询。这只是 SolR 的附加过滤器的问题。

再次感谢您为我指明正确的方向！

# php - 在 CodeIgniter (HMVC & Ion Auth) 中获取登录用户信息

> ID：12929113
> 
> 赞同：1
> 
> 时间：2012-10-17T07:20:16.460
> 
> 标签：php, codeigniter, codeigniter-2

我正在尝试在 CodeIgniter (HMVC & Ion Auth) 中登录用户详细信息

```
$data['user'] = $this->ion_auth->user()->row(); 
```

当我尝试显示时出现错误

```
Undefined variable: user 
```

我不知道如何在用户 ID 或电子邮件中登录。我需要身份证或电子邮件。请帮忙

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T07:42:37.990

如果您试图在视图中显示它，

您是否将 $data 变量传递给视图？

```
$data['user']=$this->ion_auth->user()->row();
$this->load->view("filename",$data); 
```

如果您尝试使用控制器访问它，您可以访问变量，例如

```
$data['user']=$this->ion_auth->user()->row();
$username=$data['user']->username; 
```

请指定您在哪里初始化它以及您在哪里访问它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T07:29:03.660

我会说一个例子。遵循此示例可能会对您有所帮助。

假设您有一个包含电子邮件和密码字段的登录表单。当您提交该表单时，它将检查您是否正确提交了验证错误和所有内容。如果一切正常。它将检查它是否是来自数据库的有效电子邮件和密码匹配。如果这也是真的，那么那些电子邮件和用户名将保存到 MVC 设计模式模型中的会话数据中。成功后，您只需要从控制器中的会话数据中检索用户信息，并且需要在登录后将该数据以数组的形式传递到下一页。

```
$logged_in = $this->session->userdata("logged_in_user"); 
```

# pentaho - Pentaho 无法访问 cde 示例

> ID：12929115
> 
> 赞同：0
> 
> 时间：2012-10-17T07:20:20.880
> 
> 标签：pentaho

我想用 cde 开发仪表板。但是当我想从它开始时，会出现错误，这是错误消息“对象类型 XDashFusionChartComponent 无法映射到有效类”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-19T03:57:10.620

如果您使用的是最新版本的 biserver，例如 4.5 或更高版本，请下载 Pedro Alves 的 ctools-installer 脚本。按照说明进行操作。您可以在任何地方下载脚本（它不必位于特定目录中）。

该脚本将允许您安装每个可用的 CTools，并且要使用 CDE，您必须安装 CDA。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-24T09:06:17.463

看来您还没有安装 CDE 和 CDF 仪表板。

# php - MySQL记住最后一个位置

> ID：12929117
> 
> 赞同：3
> 
> 时间：2012-10-17T07:20:27.770
> 
> 标签：php, mysql, ajax, sql-order-by

我制作了一个小应用程序，其中向用户显示了一个数据表。数据可以按不同的列标题排序，并使用输入进行过滤。

当用户单击一行时，它会打开一个小弹出窗口，其中包含两个箭头，用于转到下一条和上一条记录，其顺序与它们在表中出现的顺序相同。

最初我有（例如“以前的”）：

```
SELECT ed.id
FROM entity_details AS ed, users
WHERE ed.id > ?
AND ed.typeRef = ?
AND ed.ownerRef = users.id
$filter
$SQLOrder LIMIT 1 
```

如果表格按 ed.id 排序，这可以正常工作，但如果按另一列（例如 ed.name）排序，则无法正常工作，因为下一个字母名称可能具有更高或更低的 id。

仅供参考 $filter 可能是这样的：

```
AND branchRef = 2 
```

$SQLOrder 可以是：

```
ORDER BY ed.name DESC 
```

在尊重当前顺序和记录位置的情况下，我需要做什么才能使其正确循环记录？

* * *

所有的排序和过滤参数都来自 AJAX，例如：

```
$JSON->selectedbranch ; 
```

* * *

我得出的结论是，我只需要知道如何从 X 列包含值 Y 的行开始查询，这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T09:10:10.157

我找到了，看到其他人的回答给了我一个想法，但他的回答消失了:(

对于下一个按钮，我有：

```
$result = $dbh->prepare("SELECT ed.id
FROM entity_details AS ed, users
WHERE $WHERE < ?
AND ed.typeRef = ?
AND ed.ownerRef = users.id
$filter
ORDER BY ed.name DESC LIMIT 1") ; 
```

$WHERE 只是列名“ed.name”。

我只需要理清 $where 和 ORDER BY 子句的动态，就可以了。

感谢大家的投入！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T07:24:56.947

您应该存储显示的行号，而不是 ID。然后按照您的应用程序要求在 SQL 中进行排序，然后应用此处包含的知识：

[在 MySQL 中跳过前 n 个结果](https://stackoverflow.com/questions/2827029/mysql-skip-first-10-results)

为了简化工作，并使这个答案可用于未来的 SO 居民：

```
SELECT ed.id 
FROM entity_details AS ed, users 
WHERE ed.typeRef = ? 
AND ed.ownerRef = users.id 
$filter 
$SQLOrder 
LIMIT $currentRowNum,1 
```

然而，这种方案有异味：使用它来导航您的行意味着每个导航操作都有一个 SQL 查询。这可能会对您的响应时间产生不良影响...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T07:46:52.097

PHP 的`mysql_data_seek`功能可能会有所帮助。

[mysql_data_seek](http://php.net/manual/en/function.mysql-data-seek.php)

# iphone - 使用 NSMutableArray 获取对象？

> ID：12929119
> 
> 赞同：1
> 
> 时间：2012-10-17T07:20:32.173
> 
> 标签：iphone, xcode, nsmutablearray

我有这样的 JSON：

```
[{
"username":"bitu","password":"123456", "id":"1"
},
{
"username":"admin","password":"admin", "id":"2"
},
{
"username":"demo","password":"demo", "id":"3"
},
{
"username":"admin","password":"admin", "id":"8"
},
{
"username":"admin","password":"admin", "id":"5"
}] 
```

我想`NSMutableArray`用于 get `"id"`。我该怎么做？请帮帮我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T07:27:50.133

```
NSLog(@"%@",[[yourArray objectAtIndex:index] valueForKey:@"id"]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T07:30:45.917

`objectAtIndex`通过和 `valueForKey`从获取价值`NSMutableArray`

```
NSString *UserName = [[yourArray objectAtIndex:index] valueForKey:@"username"];//if you required
NSString *Password = [[yourArray objectAtIndex:index] valueForKey:@"password"];//if you required
NSString *UID = [[yourArray objectAtIndex:index] valueForKey:@"id"]; 
```

:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T07:32:38.913

```
NSMutableArray *idArray = [[NSMutableArray alloc] init];

    for (NSDictionary *obj in yourJsonArray) {
        [idArray addObject:[obj objectForKey:@"id"]];
    }
NSLog(@"%@",idArray); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T11:15:34.960

让 NSArray *info 数组包含您的数据。在这里，我将检索您的数据并将其保存在 NSMutableArray 名称、密码和 ID 中。

在 viewDidLoad 方法中将这些数组初始化为

```
 NSMutableArray name=[[NSMutableArray alloc] init]; 
   NSMutableArray password=[[NSMutableArray alloc] init]; 
   NSMutableArray id=[[NSMutableArray alloc] init]; 
```

检索 JSON 响应后使用以下代码

```
 NSArray *info;  // this array contains your data
   int counter=[info count];

   for(int i=0;i<counter;i++)
   {
         NSDictionary *currentObject=[info objectAtIndex:i];
         NSString *userName=[currentObject objectForKey:@"username"];
         NSString *userPassword=[currentObject objectForKey:@"password"];
         NSString *userID=[currentObject objectForKey:@"id"];
         [name addObject:userName];
         [password addObject:userPassword];
         [id addObject: userID];
   } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-17T10:27:08.010

例如，数组有字符串对象。

```
Acccess:
NSString.FromHandle(deviceList.ValueAt(i)); 
```

# javascript - 如何使用 Javascript 忽略 Zoom 中的特定元素

> ID：12929123
> 
> 赞同：2
> 
> 时间：2012-10-17T07:20:39.680
> 
> 标签：javascript, jquery, asp.net

我想在我的应用程序页面的特定区域（div）上构建缩放功能。我在下拉列表中有百分比值（200、100、50）列表，我使用下面的代码部分实现了它。

**Javascript函数：**

```
 function ChangeZoom(zoom) {

            var Page = document.getElementById('divGrid');
            Page.style.zoom = zoom;
        } 
```

**ASPX 页面：**

```
<select name="" id="ddzoom" onchange="ChangeZoom(this.options[this.selectedIndex].value);">
                                            <option value="400%">400%</option>
                                            <option value="200%">200%</option>
                                            <option value="100%" selected="selected">100%</option>
                                            <option value="50%">50%</option>
                                        </select> 
```

上面的代码运行良好，它将改变所有元素的缩放级别。现在在我的情况下，在这个 div 中，我有多个图像控件，我不想缩放它，因为我要求它更改它的**src**路径仅用于优化页面

即100%

```
<img id="MainContent_grid_Image1_0" class="device" src="../../Images/Device/100/5.JPG" "> 
```

在 200% 上，我将其更改为**src="../../Images/Device/200/5.JPG**

但是发生了什么，它也会缩放该图像！在这种情况下，我需要使用**style="zoom:50%"**来缩小比例，如下所示。

```
<img id="MainContent_grid_Image1_0" class="device" src="../../Images/Device/200/5.JPG" style="
    zoom: 50%;
"> 
```

我怎样才能忽略 div 缩放级别中的那个元素，或者我怎样才能以另一种简单的方式实现它？

此外，缩放 css 属性仅适用于 chrome。我需要在 IE 和 FF 中运行它吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T11:12:30.157

我自己解决了上述问题，如下所示

只是我已经根据 100% 缩放级别修复了高宽度，所以图像上不会有额外的缩放

```
<img id="MainContent_grid_Image1_0" class="device" src="../../Images/Device/100/5.JPG" height="60" width ="35">. 
```

它在 chrome 中运行良好。

# haskell - 如何在这里避免显式类型签名？

> ID：12929124
> 
> 赞同：6
> 
> 时间：2012-10-17T07:20:41.273
> 
> 标签：haskell, typeclass

```
class Listy a b where
   fromList :: [b] -> a
   toList :: a -> [b]
   lifted :: ([b] -> [b]) -> (a -> a) 
   lifted f = fromList . f . toList

data MyString = MyString { getString :: String } deriving Show

instance Listy MyString Char where
  toList = getString
  fromList = MyString 
```

现在我需要写 eg `lifted (reverse::(String -> String)) (MyString "Foobar")`。是否有避免需要类型签名的技巧？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-17T08:09:15.553

本质上问题是设置类型`a`并不能告诉编译器类型`b`是什么。您可能会*认为*，因为类只有一个实例（其中`a`is`MyString`和`b`is `Char`），但任何人都可以随时添加新实例。*所以现在*只有一个实例这一事实并不能帮助编译器决定你想要什么类型。

对此的解决方案是使用功能依赖项或类型族。后者是较新的解决方案，旨在最终“取代”前者，但目前两者仍然得到完全支持。FD是否会消失还有待观察。无论如何，对于 FD：

```
class Listy a b | a -> b where ... 
```

从本质上讲，这表示“每个类实例只能有一个`a`”。换句话说，一旦你知道了`a`，你总能确定`b`。（但不是相反。）班上的其他人看起来和以前一样。

替代方案是 TF：

```
class Listy a where
  type Element a :: *
  ...

instance Listy MyString where
  type Element MyString = Char
  ... 
```

现在不是调用第二种类型`b`，而是调用它`Element a`。这个词的`Element`作用就像一个类方法，它接受一个列表类型并返回相应的元素类型。然后你可以做

```
instance Listy ByteString where
  type Element ByteString = Word8
  ...

instance Listy [x] where
  type Element [x] = x
  ...

instance Ord x => Listy (Set x) where
  type Element (Set x) = x
  ... 
```

等等。（`Listy`不一定对上述所有类型都有意义；这些只是如何定义类的示例。）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-17T07:32:55.997

你可以试试 -XFunctionalDependencies

```
class Listy a b | a -> b where
   fromList :: [b] -> a
   toList :: a -> [b]
   lifted :: ([b] -> [b]) -> (a -> a) 
   lifted f = fromList . f . toList 
```

# jsf - 提交新请求时primefaces图表不更新

> ID：12929125
> 
> 赞同：2
> 
> 时间：2012-10-17T07:20:44.117
> 
> 标签：jsf, jsf-2, primefaces

我提交数据并显示了一个图表但是当我通过在表单中​​插入新值来提交它时，图表不会自行更新。我看到的另一件事是当我刷新页面时它会更新图表并使用新值获取图表展示。
例如，如果我给出值
**Wheat=40**和**Sugar=60**
并提交，它将显示图表。
现在，当我提交**Wheat=90**和**Sugar=10**时，它只显示页面上仍然存在的旧图表。
现在如果我刷新页面，更新值的图表将可用。
我怎样才能摆脱这个问题:(如果有人有，请提出解决方案。
这是我的代码
**图表代码**

```
<p:barChart id="horizontal"
                        value="#{reportingCharts.categoryModel}" legendPosition="se"
                        style="width:635px;height:500px" title="Horizontal Bar Chart"
                        orientation="horizontal" min="0" max="150" animate="true"
                        zoom="true" barMargin="90"
                        rendered="#{chartsRendering.barCharts}" showDatatip="true" shadow="true" /> 
```

**按钮代码**

```
<h:commandButton id="btnLanguage" action="#{reportingCharts.getGraphValuesOnLanguageBasis}"
                                value="Plot Chart Language">
                                </h:commandButton> 
```

**getGraphValuesOnLanbguageBasis 方法**

```
public void getGraphValuesOnLanguageBasis() {

        categoryModel = null;

            resList = (ArrayList<ChartResult>) serviceObj
                .getChartByLanguage(ranks, language);

        if (chartType.equalsIgnoreCase("bar")
                || chartType.equalsIgnoreCase("line")
                || chartType.equalsIgnoreCase("column")) {

            categoryModel = new CartesianChartModel();

            ChartSeries langChart = null;

            for (int a = 0; a < ranks.length; a++) {

                langChart = new ChartSeries();
                if(a == 0){
                    for(int z=0;z<language.length;z++){

                        langChart.set(languageMap.get(Integer.parseInt(language[z])),0);

                    }
                    }

                String rank = "";
                boolean rankAvailable = false;
                for (int x = 0; x < resList.size(); x++) {

                    if(Integer.parseInt(resList.get(x).getRankId()) == Integer.parseInt(ranks[a])){
                        rank = resList.get(x).getRankName();

                        x = resList.size();
                        rankAvailable = true;

                    }
                }

                if(rankAvailable == false){

                    langChart.setLabel(rankMap.get(Integer.parseInt(ranks[a])));

                }
                else{

                    langChart.setLabel(rank);
                }

                for (int x = 0; x < resList.size(); x++) {

                    if (Integer.parseInt(resList.get(x).getRankId()) == Integer
                            .parseInt(ranks[a]) && rankAvailable == true) {

                                                langChart.set(languageMap.get(Integer.parseInt(resList.get(x).getCriteria())), Integer
                                .parseInt(resList.get(x).getNoOfPersons()));

                    }

                }

                categoryModel.addSeries(langChart);

            }

        } else if (chartType.equalsIgnoreCase("pie")) {

                pieModel = new PieChartModel();

                for (int x = 0; x < resList.size(); x++) {

                        pieModel.set(languageMap.get(Integer.parseInt(resList.get(x).getCriteria())), Integer
                                .parseInt(resList.get(x).getNoOfPersons()));

                }

        }
        ChartsRendering chartRenderer1 = (ChartsRendering) FacesContext
                .getCurrentInstance().getExternalContext().getSessionMap()
                .get("chartsRendering");

        if (chartType.equalsIgnoreCase("bar")) {
            chartRenderer1.showBarChart();

        } else if (chartType.equalsIgnoreCase("line"))
            chartRenderer1.showLineChart();
        else if (chartType.equalsIgnoreCase("column"))
            chartRenderer1.showColumnChart();
        else if (chartType.equalsIgnoreCase("pie"))
            chartRenderer1.showPieChart();

    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T07:31:41.613

更改模型值后图表不会自行更新，但您可以`update`通过 ajax 进行更新。例如，如果您有一个图表：

```
<p:barChart id="myBarChart" value=#{yourChartBean.chartModel} ..../> 
```

和一个将新值发送到您的支持 bean 的 selecteOneMenu，定义一个方法来更新您的支持 bean 中的模型：

```
<p:selectOneMenu id="aMenu" value="#{yourChartBean.menuValue}">
    <p:ajax event="change" update="myBarChart" listener="#{yourChartBean.refreshChart()}"/>
    <f:selectItem itemLabel="This value" itemValue="tv"/>
    <f:selectItem itemLabel="Another value" itemValue="av"/>
</p:selectOneMenu> 
```

在这种情况下，该`refreshChart()`方法旨在更新您的图表模型：

```
public void refreshChart() {
    buildChart();
} 

private void buildChart() {
    chartModel = new CartesianChartModel();

    ChartSeries series1 = new ChartSeries();
    ...

    ChartSeries series2 = new ChartSeries();
    ...

    categoryModel.addSeries(series1);
    categoryModel.addSeries(series2);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-30T02:06:00.077

页面加载时图表应该可见......之后所有 ajax 请求都会正确呈现您的图表。为此，只需在页面加载时提供一个虚拟系列数据，例如系列 1 的 (0,0) 和系列 2 的 (0,0) ，之后一切正常

# android - Android - 更改手机的时区

> ID：12929126
> 
> 赞同：2
> 
> 时间：2012-10-17T07:20:44.503
> 
> 标签：android, datetime

是否可以在android中以编程方式设置手机的时区？我得到了这个代码

```
 Calendar calendar = Calendar.getInstance();       
 SimpleDateFormat sdf = new SimpleDateFormat("dd-MMM-yyyy hh:mm:ss z");
 sdf.setTimeZone(TimeZone.getTimeZone("America/Los_Angeles"));
 System.out.println(sdf.format(calendar.getTime())); 
```

但它不会改变手机的时区。它只显示美国/洛杉矶的时区。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T07:23:45.813

您显示的代码只是定义了一个日历实例，该实例具有要在应用程序中使用的特定格式。无法以编程方式更改手机的时区。

您可以将用户重定向到适当的设置：

```
startActivity(new Intent(android.provider.Settings.ACTION_DATE_SETTINGS)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T07:22:10.167

好吧，这只会改变格式，所以你不能指望它改变手机的时区。不，没有用于更改时间或时区的 API，这是为系统应用程序保留的。

# .net - 如何更改 C++/CLI winform 项目中的应用程序图标？

> ID：12929127
> 
> 赞同：2
> 
> 时间：2012-10-17T07:20:49.637
> 
> 标签：.net, visual-studio-2010, c++-cli

如何更改 Winform C++/CLI 项目中的应用程序（二进制文件）图标？我正在使用 MS VS 2010。

我试图去项目属性，我发现没有`Application`选项卡： ![在此处输入图像描述](../Images/998f05267b26360b42a4659f2fa54c32.png)

和这里的资源选项：

![在此处输入图像描述](../Images/4ea0cad1f20ddce7885ea9997ffbe6a7.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T07:25:24.703

您可以尝试在此 MSDN 页面上发布的方法。它得到了 6 票赞成，所以它似乎奏效了。

链接： [更改 .exe 图标](http://social.msdn.microsoft.com/forums/en-us/vcgeneral/thread/A1EED47A-E347-446F-846B-37803BD7F8AD)

> Windows 选择主可执行文件图标的方式是它在可执行文件的资源部分中查找第一个图标，或者类似的东西。首先，你需要添加一个资源脚本，.rc 文件。这是通过项目->添加新项目或右键单击解决方案资源管理器并转到添加->新项目来完成的。选择 Resource->Resrouce File(.rc) 命名它然后添加它。
> 
> 现在您有了资源文件，然后将图标添加到其中。转到资源视图并右键单击资源文件的名称。在底部你会找到添加资源，选择它然后会弹出一个新窗口。
> 
> 如果您已经单独保存了图标，那么您应该选择导入，然后导入图标。否则选择图标，然后按新建。该图标将被创建和/或添加到资源脚本中，您会发现当您构建项目时，它将成为可执行文件的图标。
> 
> 如果您在一个项目中需要多个图标，请确保首先添加您想要的作为可执行图标的图标，否则您将不得不更改资源标识符并将该图标作为最低 id。

您可以采取的另一种方法是

*   转到您的项目文件夹。
*   使用相同格式的新图标覆盖位于该文件夹中的 app.ico 文件。
*   清洁项目。
*   重建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-13T15:45:36.307

在解决方案资源管理器窗格中，右键单击您的项目名称，然后导航到添加 > 资源。

[![添加资源窗口](../Images/db026b521a3fc4ca8f1b4a617e590635.png)](https://i.stack.imgur.com/x5lCn.png)

在这里，您可以为您的应用程序添加图标和其他元数据。

# eclipse - Eclipse调试无法单步进入（或F5）

> ID：12929128
> 
> 赞同：2
> 
> 时间：2012-10-17T07:20:51.113
> 
> 标签：eclipse, debugging, step-into

```
package com.test;

import java.util.TreeMap;

public class Main {
    public static void main(String[] args) throws Exception {
        TreeMap<String, String> tree = new TreeMap<String, String>();
        tree.put("1", "1");//line a
        tree.put("1", "1");//line b
        System.out.println(tree.size());
    }
} 
```

我想调试**TreeMap put**方法，所以我为行（行 a，行 b）添加了两个断点。Eclipse 调试工具在调试时无法进入 put mentod。

我附上了eclipse的源代码。当我将鼠标放在**put**方法上时，按下`F3`键，它可以转到**TreeMap put**方法源代码。我正在运行 Eclipse SDK 版本：3.2.2

![](../Images/08a945d311088c02a57c01adac6d2763.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T07:32:10.910

从此链接下载源代码：http: [//grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/TreeMap.java](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/TreeMap.java)然后将此源附加到eclipse

# objective-c - 将十六进制值存储到 NSData

> ID：12929131
> 
> 赞同：10
> 
> 时间：2012-10-17T07:21:09.723
> 
> 标签：objective-c, ios, nsdata, hex

我对如何将十六进制值存储到 NSData 感到困惑。我希望我将存储的值是`0x0F`.

请问有人能给我一个例子吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-17T07:25:28.227

您可以创建一个数组来保存您的十六进制值，然后使用它来创建数据：

```
unsigned char bytes[] = {0x0F};
NSData *data = [NSData dataWithBytes:bytes length:1]; 
```

这可以重写为：

```
NSData *data = [NSData dataWithBytes:(unsigned char[]){0x0F} length:1]; 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-17T07:29:18.053

以下是我之前的做法：

```
UInt8 j= 0x0f;
NSData *data = [[[NSData alloc] initWithBytes:&j length:sizeof(j)] autorelease]; 
```

# jquery - Internet Explorer 不显示 Flowplayer-Video

> ID：12929132
> 
> 赞同：5
> 
> 时间：2012-10-17T07:21:14.703
> 
> 标签：jquery, internet-explorer, mp4, flowplayer

我最近切换到 Flowplayer（我之前使用过 VideoJS），但在使用我们心爱的 Internet Explorer 时遇到了另一个问题。

我正在尝试使用 flowplayer 显示 mp4-video (.h264-codec)，它在所有浏览器（chrome、firefox、safari、opera）中都能完美运行，但在 Internet Explorer 中却不行。奇怪的是，在 IE9 中它只显示«视频文件未找到»，而在 IE7-IE8 中它显示«不支持的视频»。

```
<div class="flowplayer">
   <video poster="/videos/poster_bbb.jpg" width="222" height="125" src="/videos/bbb.mp4"></video>
</div> 
```

我还尝试使用标签内的标签，我尝试重新转换视频，我尝试使用视频的绝对路径和网络路径，但都没有结果。

**注意：**由于用户应该能够上传他自己的 .mp4 视频，我不能为 .ogg 或 .webm 使用其他标签

提前致谢！

埃尔维蒂

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T08:49:49.047

我有同样的问题。它在任何地方都可以正常工作，除了 IE。这是因为 IE 使用 flowplayer.swf 所在位置的相对路径查找视频。但是其他浏览器正在使用执行脚本的位置的相对路径。因此，您可以尝试使用绝对路径，或者我现在正在使用此解决方法：

我有以下结构

```
player/flowlayer.swf
movie/data/Video/video.mp4
play.html 
```

比从 play.html 播放电影 - 链接 flowplayer.swf 我正在使用条件评论。

```
<div class="flowplayer" data-engine="flash" data-swf="./player/flowplayer.swf">
<video autoplay>
  <!--[if IE]>
     <source type="video/mp4" src="../movie/data/Video/video.mp4"/>
  <![endif]-->
  <!--[if !IE]><!-->
     <source type="video/mp4" src="movie/data/Video/video.mp4"/>
  <!--<![endif]-->
</video>
</div> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-01T16:52:36.570

Internet Explorer (9 & 10) 的另一种选择是尝试使用源类型 video/flash 而不是 video/mp4，例如：

```
<source type="video/flash" src="..."/> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-19T21:53:17.327

经过大量研究并且无法添加标题标签以强制兼容模式（因为我的视频在模式内）。我通过更改源标签使其适用于 IE9

`<source type="video/mp4" src="video.mp4"></source>`

至

`<source type="text/html" src="video.mp4"></source>`

我看到当视频没有在 IE9 中播放时，mp4 文件被重新渲染为 text/html 而不是 video/mp4 ......所以我只是尝试更改标签并且它有效！

我知道这没有任何意义......但是既然 IE 什么时候有意义？！所以，如果你不能在你的 php 文件 header('X-UA-Compatible: IE=EmulateIE8'); 像我的情况一样，尝试将 mp4 类型设置为 text/html

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-17T07:32:23.747

也许这篇文章可以帮助你

[http://www.warriorforum.com/programming-talk/257997-help-flow-player-does-not-appear-internet-explorer.html](http://www.warriorforum.com/programming-talk/257997-help-flow-player-does-not-appear-internet-explorer.html)

**从帖子**

如果您想在您的网站上嵌入 MP4 视频以在 IE 上显示，那么您需要使用以下代码将 videofilename.mp4 更改为您的视频名称

```
<OBJECT CLASSID="clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B"
CODEBASE="http://www.apple.com/qtactivex/qtplugin.cab" 
WIDTH="320" HEIGHT="256" >
<PARAM NAME="src" VALUE="videofilename.mp4">
<PARAM NAME="autoplay" VALUE="true">
<PARAM NAME="controller" value="true">
<EMBED SRC="QTMimeType.pntg" TYPE="image/x-macpaint"
PLUGINSPAGE="http://www.apple.com/quicktime/download" QTSRC="videofilename.mp4" 
WIDTH="320" HEIGHT="256" AUTOPLAY="true" CONTROLLER="true">
</EMBED>
</OBJECT> 
```

# javascript - 使用 JavaScript 获取 URL 数据（像 php $_GET 一样拆分）

> ID：12929140
> 
> 赞同：0
> 
> 时间：2012-10-17T07:21:40.167
> 
> 标签：javascript, url, iframe, split, window.location

我在 Stack Overflow 上找到了这个脚本：

```
window.params = function(){
    var params = {};
    var param_array = window.location.href.split('?')[1].split('&');
    for(var i in param_array){
        x = param_array[i].split('=');
        params[x[0]] = x[1];
    }
    return params;
}(); 
```

这会将 URL 拆分为数据，就像 PHP 对`$_GET`.

我有另一个函数，它使用它并刷新 iframe。如果其中一些数据存在，我想从 URL 获取数据并添加另一个数据。[Firebug](http://en.wikipedia.org/wiki/Firebug_%28software%29)告诉我，那`search`是没有定义的，但是为什么呢？

```
function RefreshIFrames(MyParameter) {
    var cat = window.params.cat;
    var category = window.params.category;
    var search = window.params.search;

    if (search.length>0 && category.length>0){
        window.location.href="http://siriusradio.hu/kiskunfelegyhaza/video/index.php?search="+search+"&category="+category+"&rendez="+MyParameter;
    }

    if (cat.length>0){
        window.location.href="http://siriusradio.hu/kiskunfelegyhaza/video/index.php?cat="+cat+"&rendez="+MyParameter;
    }

    if (cat.length==0 && category.length==0 && search.length==0){
        window.location.href="http://siriusradio.hu/kiskunfelegyhaza/video/index.php?rendez="+MyParameter;
    }
    alert(window.location);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T07:33:27.933

如果要添加集合点或更改现有集合点，请执行此操作 - 我假设 URL 实际上以[http://siriusradio.hu/kiskunfelegyhaza/video/index.php](http://siriusradio.hu/kiskunfelegyhaza/video/index.php)开头，因此无需创建它。让我知道您是否需要与您提供的 URL 不同的 URL

参数片段不能正常工作（因为 in 不应在普通数组上使用）

这是经过测试的代码

*   [演示](http://jsfiddle.net/mplungjan/4q2EN/)
*   [带下拉菜单的演示](http://jsfiddle.net/mplungjan/77Evd/show/?rendez=xxx&search=bla)

```
function getParams(passedloc){
  var params = {}, loc = passedloc || document.URL;
  loc = loc.split('?')[1];
  if (loc) {
    var param_array = loc.split('&');
    for(var x,i=0,n=param_array.length;i<n; i++) {
      x = param_array[i].split('=');
      params[x[0]] = x[1];
    }
  }
  return params;
};

function RefreshIFrames(MyParameter,passedloc) { // if second parm is specified it will take that 
  var loc = passedloc || document.URL; // 
  window.param = getParams(loc); 
  loc = loc.split("?")[0]+"?"; // will work with our without the ? in the URL
  for (var parm in window.param) {
    if (parm != "rendez") loc += parm +"="+ window.param[parm]+"&";
  }
  // here we have a URL without rendez but with all other parameters if there
  // the URL will have a trailing ? or & depending on existence of parameters
  loc += "rendez="+MyParameter;
  window.console && console.log(loc)
  // the next statement will change the URL
  // change window.location to window.frames[0].location to change an iFrame
  window.location = loc; 
}

// the second parameter is only if you want to change the URL of the page you are in
RefreshIFrames("rendez1","http://siriusradio.hu/kiskunfelegyhaza/video/index.php?cat=cat1&search=search1");
RefreshIFrames("rendez2","http://siriusradio.hu/kiskunfelegyhaza/video/index.php?search=search2");
RefreshIFrames("rendez3","http://siriusradio.hu/kiskunfelegyhaza/video/index.php?rendez=xxx&search=search2");
RefreshIFrames("rendez4","http://siriusradio.hu/kiskunfelegyhaza/video/index.php");

// here is how I expect you want to call it    
RefreshIFrames("rendez5"​); // will add or change rendez=... in the url of the current page 
```

# android - 如何在异步任务中使用首选项？

> ID：12929144
> 
> 赞同：0
> 
> 时间：2012-10-17T07:21:46.167
> 
> 标签：android, android-asynctask, sharedpreferences

我正在从 URL 解析 JSON 并在列表视图中显示它（ofc 使用 Async Task），这工作正常，但现在当我尝试在 Async Task 中添加首选项时，程序会出错。

这是我到目前为止的代码：

```
public class VideoList extends ListActivity {

ArrayAdapter<String> adapter;
ListView lv;
PrefMethods pm= new PrefMethods();;
int vid_id;
public void getJson(){
      new LoadJsonTask().execute();
 }

 private class LoadJsonTask extends AsyncTask<Void, Void, ArrayList<String>>{
      ProgressDialog dialog ;
     protected void onPreExecute (){
          dialog = ProgressDialog.show(VideoList.this ,"Loading....","Retrieving Data,Please Wait !");

     }
      protected ArrayList<String> doInBackground(Void[] params) {

          return populate();
      }

      protected void onPostExecute(ArrayList<String> waveData) {

          adapter=new ArrayAdapter(
                  VideoList.this,android.R.layout.simple_list_item_1,
                    waveData);  
                  lv.setAdapter(adapter);  
                  lv.setTextFilterEnabled(true);
                  dialog.dismiss();
      };

 }

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.parser);
    lv=getListView();

    //vid_id=pm.loadprefs();
    vid_id=0;
    getJson();
}

public ArrayList<String> populate() {
    ArrayList<String> items = new ArrayList<String>();

    try {

        URL urlnew= new URL("www.mydummyjsonlinkhere.com");
        HttpURLConnection urlConnection =
            (HttpURLConnection) urlnew.openConnection();
        urlConnection.setRequestMethod("GET");
        urlConnection.connect();
                    // gets the server json data
        BufferedReader bufferedReader =
            new BufferedReader(new InputStreamReader(
                    urlConnection.getInputStream()));
        String next;
        while ((next = bufferedReader.readLine()) != null){
            JSONArray ja = new JSONArray(next);
            vid_id=pm.loadprefs();// here i load the preferences & error is occured
            int k=ja.length();
            for (int i = 0; i < ja.length(); i++) {

                JSONObject jo = (JSONObject) ja.get(i);
                WaveData waveData = new WaveData(jo.getString("upload"), jo.getInt("id"),jo.getString("link"),jo.getString("custommsg"));
                if(jo.getInt("id")>vid_id){
                    if(i==k-1){
                        pm.saveprefs(jo.getInt("id"));  
                        Toast.makeText(getApplicationContext(), "Saved pref no :"+jo.getInt("id"), 500).show();
                    }else{}
                }else{}

                if(jo.has("id")){
                items.add(jo.getString("custommsg"));
                }

            }

        }

    } catch (MalformedURLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    return items;
}

} 
```

这是我的 Preferences 类的代码：

```
public class PrefMethods extends Activity {
SharedPreferences prefs;
 @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        prefs=getPreferences(MODE_PRIVATE);

 }  

 public void saveprefs(int h){
   SharedPreferences.Editor editor=prefs.edit();
   editor.putInt("id", h);
   editor.commit();
  }
 public void saveprefs(boolean b){
       SharedPreferences.Editor editor=prefs.edit();
       editor.putBoolean("inserted", b);
       editor.commit();
  }

  public int loadprefs(){
int v=prefs.getInt("id",0);
return v;
  }

  public boolean loadprefsboolean(){
    boolean v=prefs.getBoolean("inserted", false);
    return v;
  }

} 
```

我的 Logcat 错误：

[http://pastebin.com/JNy5RmP8](http://pastebin.com/JNy5RmP8)

错误是 PrefMethods 类中以下行的空指针异常：

```
int v=prefs.getInt("id",0); 
```

谁能帮助我并指出我哪里出错了？

谢谢你

编辑：我在 Manifest 中添加了 Internet 权限，并且在没有首选项方法的情况下，JSON 解析得非常好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T07:28:45.610

prefs 没有被设置为任何东西，因为从未调用过 onCreate。

活动子类用于活动而不是首选项。

创建一个 PrefMethods 类，它不扩展 Activity，但在构造函数中采用 Context。

然后 PrefMethods 类应该使用该上下文来访问 Preferences。

像这样的东西

```
 public class PrefMethods {
SharedPreferences prefs;

private Context mContext;

private static final String PREF_NAME = "MyPrefs";

    public PrefMethods( Context c ) 
    {
        prefs= c.getSharedPreferences( PREF_NAME, Context.MODE_PRIVATE);   
    }  

 public void saveprefs(int h){
   SharedPreferences.Editor editor=prefs.edit();
   editor.putInt("id", h);
   editor.commit();
  }
 public void saveprefs(boolean b){
       SharedPreferences.Editor editor=prefs.edit();
       editor.putBoolean("inserted", b);
       editor.commit();
  }

  public int loadprefs(){
int v=prefs.getInt("id",0);
return v;
  }

  public boolean loadprefsboolean(){
    boolean v=prefs.getBoolean("inserted", false);
    return v;
  }

} 
```

# iphone - 无法显示 uiimagepickercontroller

> ID：12929148
> 
> 赞同：0
> 
> 时间：2012-10-17T07:21:57.297
> 
> 标签：iphone, objective-c, ios, cocoa-touch, uiimagepickercontroller

我无法访问在文件`UIImagePickerController`中定义的对象`AppDelegate`。我已经`UIImagePickerController`在`AppDelegate.h`文件中定义了对象也使用了它的委托。这是我的代码。

AppDelegate.m

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions { 

    picker = [[UIImagePickerController alloc] init];  
    picker.delegate = self; 
    picker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;
    picker.wantsFullScreenLayout = YES;
    picker.allowsEditing=NO;

    return YES;
} 
```

我在 viewcontroller 文件中使用操作表并希望执行此操作 -

视图控制器.m

```
- (void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex
{
switch (actionSheet.tag) 
    {
        case 1:
            switch (buttonIndex)
        {
            case 0:
            {
AppDelegate *appDelegate = (AppDelegate*) [[UIApplication sharedApplication] delegate];
                [appDelegate.window.rootViewController presentModalViewController:appDelegate.picker animated:YES];
                    }
           }
     }
} 
```

但图像选择器控制器视图未显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T08:40:38.610

我相信objective c 现在会自动合成您的属性并期待ivar 的_picker。用于表示法来访问您的选择器，例如 self.picker 或 self.delegate.picker

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T12:38:54.040

在你的

```
- (void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex 
```

不要写

```
 [appDelegate.window.rootViewController presentModalViewController:appDelegate.picker animated:YES]; 
```

而是尝试写

```
 [appDelegate.window presentModalViewController:appDelegate.picker animated:YES]; 
```

让我知道它是否有效。！！！快乐编码！！！！

# javascript - 在 OnBeforeUnload 上显示函数“True/false”的返回值

> ID：12929152
> 
> 赞同：2
> 
> 时间：2012-10-17T07:22:07.430
> 
> 标签：javascript, c#, asp.net, dom-events

我在 OnBeforeUnload 上调用一个函数并返回真/假。当我要关闭浏览器时，浏览器会显示消息“您确定要离开此页面吗”，在此下方写为“真/假”。

代码就像： -

```
<body   onbeforeunload="javascript:return unlockOperationon()">
</body> 
```

而 JavaScript 函数是：-

```
function unlockOperationon()
{
    return true;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T08:29:37.373

您需要从 unlockOperationonMain 方法返回“True/False”字符串。的目的`onbeforeunload`是向用户询问有意义的消息，以便该消息的处理程序用于获取该消息。例如，您可以从处理程序返回此字符串：“此页面上所有未保存的更改都将丢失。”

这是[此评论](https://stackoverflow.com/questions/12929152/showing-return-value-of-function-true-false-on-onbeforeunload/12930149#comment17552914_12930149)中提出的想法的实现：

```
<script runat="server" >
     [System.Web.Services.WebMethod]
     public static string GetBeforeUnloadMessage()
     {
          return DateTime.Now.Second < 30 ? "Please, stay with us at least for a few seconds." : null;
     }
</script>
<head runat="server">
     <title></title>
     <script src="Scripts/jquery-1.8.2.min.js" type="text/javascript"></script>
     <script type="text/javascript">
          function checkServerBeforeUnload() {
               var result = null;
               $.ajax({
                    url: location.href + "/GetBeforeUnloadMessage",
                    type: "POST",
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    async: false,
                    success: function (response) {
                         result = response.d;
                    }
               });

               if (result) {
                    return result;
               }
          }
     </script>
</head>
<body onbeforeunload="return checkServerBeforeUnload()">
     <form id="form1" runat="server">
     <div>
          Page rendered at:
          <%= DateTime.Now.ToString("HH:mm:ss") %>
          <asp:Button runat="server" Text="Click Me" />
     </div>
     </form>
</body>
</html> 
```

# java - 安卓登录表单

> ID：12929158
> 
> 赞同：0
> 
> 时间：2012-10-17T07:22:29.657
> 
> 标签：java, android, web-services

我为我的应用程序开发了一个登录表单。该应用程序成功运行。

这是**我目前的 o/p**：

问题是如果我必须输入正确的登录信息意味着它显示的**成功**消息之后转到下一个活动。

如果我必须输入错误信息意味着只显示登录失败消息并重定向到相同的登录页面。

**希望需要**像这样的o/p：

如果我必须输入正确的登录详细信息，则意味着它直接进入下一个活动并且不应该显示成功消息。

但是，如果我必须输入错误的登录详细信息，则应该显示**登录失败消息。**

在这个应用程序中，

我在 WebService 中使用了以下代码：

```
 if(retrievedUserName.equals(userName)&&retrievedPassword.equals(password)&&!(retrievedUserName.equals("") && retrievedPassword.equals(""))){
   status = "Success"; 
```

还在android端写了以下条件：

```
 if(status.equals("Success")) 
```

现在，如果我必须正确输入我的登录用户名和密码，它将显示**成功**消息并转到下一个活动。如果登录失败，这里会显示**登录失败信息。**

但同时我必须在 web 服务端编写代码：

```
if(retrievedUserName.equals(userName)&&retrievedPassword.equals(password)&&!(retrievedUserName.equals("") && retrievedPassword.equals(""))){
   status = ""; 
```

还写了android端的意思

```
if(status.equals("")) 
```

现在，当我正确输入我的登录用户名和密码时，它不应该显示成功消息，也没有发生任何事情。但如果我输入错误的登录详细信息，*登录失败*消息会正确显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T08:23:39.503

假设从数据库中获取 retrievedUserName 和 retrievedPassword，如下更改 Web 服务。

```
if(retrievedUserName.equals(userName)&&retrievedPassword.equals(password)){
   status = "Success"; //login success
} else {
   status = "";  //login failed
} 
```

要从 UI 调用 Web 服务，请使用 AsyncTask 类，如下所示。尽量不要在主 UI 线程中使用网络调用。

```
class BgRunner extends AsyncTask<String, Void, String> {
    @Override
    protected Object doInBackground(String... params) {
      //perform login authentication
      //call webservice method
      return <result of authentication>
    }
    @Override
    protected void onPostExecute(String loginStatus) {
        if(null != loginStatus && loginStatus.equals("Success")) {
            //start new activity                
        } else {
           //login failed
           //print login failed message on UI
        }
    }
} 
```

阅读[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)了解更多详情。

一点建议。保持问题简单明了！您会以这种方式收到及时的回复。

顺便说一句，我认为这个答案会让你继续前进。

# java - wicket DropDownChoice 跳转到某个选择

> ID：12929160
> 
> 赞同：1
> 
> 时间：2012-10-17T07:22:33.530
> 
> 标签：java, wicket, dropdownchoice

我正在使用检票口[`DropDownChoice`](http://wicket.apache.org/apidocs/1.4/org/apache/wicket/markup/html/form/DropDownChoice.html)，我的列表很长，有没有一种方法可以让我单击下拉列表，然后单击一个字符，该列表将跳转到以相同字符开头的第一个选择

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T08:52:20.650

我知道这不是您问题的确切解决方案，但它会解决您的功能问题。如果您的选择列表很长，我建议您通过 Ajax 使用搜索字段逐步加载它。

[wicket-select2](https://github.com/ivaynberg/wicket-select2)就是这样一个（很棒的）wicket 组件，将[select2](http://ivaynberg.github.com/select2/)库集成到 wicket 中，以提供 Ajax 过滤、自定义渲染等。虽然当前的集成没有提供简单地将 select2 行为添加到静态非 ajax DropDownChoice 的方法，使用 wicket-select2 的类作为基础相对容易。对于 wicket-select2 集成，您只需要使用`Select2Choice`（或`Select2MultiChoice`用于多个选择）您传递一个简单的`TextChoiceProvider`

在您开始使用这样的组件之后，您并不想回到普通的旧选择，特别是如果您有很长的选择列表。

注意：使用 1.5.8（和以前的 1.4.x），我的应用程序中的旧选择显示您正在寻找的行为，例如标准 html 行为。但是，据我了解，您没有`<select>`在 DropDownChoice 的标记中使用标签：那么您正在使用什么（这很可能是您的问题的原因）。

# javascript - 我的 $ajax 调用不起作用

> ID：12929162
> 
> 赞同：0
> 
> 时间：2012-10-17T07:22:33.827
> 
> 标签：javascript, jquery, ajax, cross-domain

执行以下代码时：

```
url= "http://192.168.2.171/LoginAuthentication";
$.ajax({
    url: 'url',
    type: 'GET',
    success: function(res) {
        var headline = $(res.responseText).find('a.tsh').text();
        alert(headline);
    }
}); 
```

我收到此错误：

```
Object XMLHttpRequest cannot load 'url'. Origin null is not allowed by Access-Control-Allow-Origin. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T07:28:30.880

浏览器不允许您从另一个域请求资源（图像和脚本文件是该规则的明显例外）。有关详细信息和解决方法，请参阅[此文档](https://developer.mozilla.org/en-US/docs/HTTP_access_control)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T07:25:03.777

```
url="http://192.168.2.171/LoginAuthentication";
$.ajax({
    url: url,
    type: 'GET',
    success: function(res) {
        var headline = $(res.responseText).find('a.tsh').text();
        alert(headline);
    }
}); 
```

但如果您没有向同一个域发出请求，它可能不起作用

# tridion - 在 tridion 中安装联系人同步 (ASP.NET) 时出错

> ID：12929163
> 
> 赞同：6
> 
> 时间：2012-10-17T07:22:41.240
> 
> 标签：tridion, tridion-2011

我已经在 ASP.net 中为联系人设置了同步服务器，但是当尝试浏览 ProfileSync.aspx 页面时，我收到错误消息

```
 "Configured E-mail address is not an existing extended detail field"
 "Creating a Contact object failed, while the database settings seem to be correct. Check the cd_audience_manager_conf.xml configuration file." 
```

cd_audience_manager_conf.xml 配置文件设置：

```
 <ExtendedDetails>
    <!-- Name of extended details field that contains the e-mail address -->
    <EmailAddressFieldName>MAIL</EmailAddressFieldName>
    <!-- Name of extended details field(s) used for Contact identification. -->
    <!-- These are always considered mandatory fields -->
    <ContactIdentification>
        <Field>IDENTIFICATION_KEY</Field>
        <Field>IDENTIFICATION_SOURCE</Field>
    </ContactIdentification>
 </ExtendedDetails> 
```

OutboundEmail.xml 设置为：

```
<ContactDetails>
<ItemTitle format="{NAME} {SURNAME} ({MAIL})" />
<ContactDetail name="IDENTIFICATION_KEY" enableSearch="false" isIdentificationKey="true">
  <Label>Identification key</Label>      
</ContactDetail>
<ContactDetail name="IDENTIFICATION_SOURCE" enableSearch="false" isIdentificationKey="true">
  <Label>Import source</Label>
</ContactDetail>
<ContactDetail name="NAME" enableSearch="true">
  <Label>First name</Label>
</ContactDetail>
<ContactDetail name="SURNAME" enableSearch="true">
  <Label>Last name</Label>
</ContactDetail>
<ContactDetail name="MAIL" enableSearch="true" isEmailAddress="true">
  <Label>xyz@cc.com</Label>
</ContactDetail>
<ContactDetail name="COMPANY" enableSearch="true">
  <Label>Company</Label> 
 </ContactDetail>
</ContactDetails> 
```

请建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T09:25:36.817

显然，您的数据库中没有 MAIL 扩展详细信息字段，即使您的配置文件声明该字段是电子邮件地址字段。

如果您有一个不同于 MAIL 的字段用于您的联系人的电子邮件地址，只需更新 cd_audience_manager_conf.xml 的部分。

如果 MAIL 是要使用的正确字段，您可能仍需要在数据库中[设置扩展详细信息字段](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/concept_F37955E6B98E46BF9EB08CAB2EBAC190)。

（PS OutboundEmail.xml 在这种情况下不相关——它只在 Content Manager 机器上使用）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T09:21:10.963

要创建数据库条目，您可以参考[此链接](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/concept_0AB6D192D7AB4EC18892631F519EF1DD#addHistory=true&filename=ConfiguringContacts_CreatingCustomContactDetails.xml&docid=task_D3B627C67A3849FB839D1B0B4E97BEFB&inner_id=&tid=&query=&scope=&resource=&eventType=lcContent.loadDoctask_D3B627C67A3849FB839D1B0B4E97BEFB&url=http://sdllivecontent.sdl.com:80/LiveContent/web/search.xql?c=t&pub=SDL_Tridion_2011_SPONE&lang=en-US&action=search&query=%253CContactDetail%2520name%253D%2522MAIL%2522&sid=lcSearch.runSearch1350460433584)（需要登录）。我还没有尝试过，但这似乎是一项 DBA 任务。

# android - 如何解析嵌套的xml并在android中检索数据？

> ID：12929164
> 
> 赞同：0
> 
> 时间：2012-10-17T07:22:43.983
> 
> 标签：android, xml-parsing

我正在开发一个应用程序，在该应用程序中使用 rest webservice 从服务器获取 xml。从服务器获取响应（以 xml 格式表示）后，我使用 Dom 解析器将其解析为字符串。以下是我的 xml 响应的示例结构。

```
<appdata>
    <brand name="Lovely Products">
         <product>Hat</product>
         <rating>Gloves</rating>
    </brand>
    <categories>
        <categorie Table >
            <sourseUrl Chair>
              <image available="true" height="400" width="400">
              <serverURL http://abcd.xyzpqr.com/images/pi/89  /da/0c=121017011508&=3> 

              </serverURL> 
           </sourseUrl>
        </categorie>
        <relatedProducts >
             <sometag ........>
                    <childtag1.........> </childtag1>
                    <childtag2.........>
                          <tag1.....>
                          <tag2.....>
                    </childtag2>
            </sometag>
        </relatedProducts>

        ..........
        ..........
        ..........
   </categories> 
```

以下是我通过发出 HTTP 请求获取 XML 内容的代码

```
 DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpContext localContext = new BasicHttpContext();     

        HttpHost proxy = new HttpHost("45.28.19.345", 1234);
        httpClient.getParams().setParameter(ConnRoutePNames.DEFAULT_PROXY, proxy);
        HttpGet httpGet = new HttpGet(url);

        HttpResponse httpResponse = httpClient.execute(httpGet, localContext);
        HttpEntity httpEntity = httpResponse.getEntity();

        xml = getASCIIContentFromEntity(httpEntity);</pre> 
```

通过传递元素节点名称来获取每个 xml 子元素值 public String getValue(Element item, String str) { NodeList n = item.getElementsByTagName(str); 返回 this.getElementValue(n.item(0)); }

```
public final String getElementValue( Node elem ) {
         Node child;
         if( elem != null){
             if (elem.hasChildNodes()){
                 for( child = elem.getFirstChild(); child != null; child = child.getNextSibling() ){
                     if( child.getNodeType() == Node.TEXT_NODE  ){
                         return child.getNodeValue();
                     }
                 }
             }
         }
         return "";
  } 
```

这是检索已解析的 xml 数据的方式。

```
 String newxml = xml.toString();
     Document doc = parser.getDomElement(newxml); // getting DOM element

        NodeList nl = doc.getElementsByTagName(KEY_ITEM);
        // looping through all item nodes <item>
        for (int i = 0; i < nl.getLength(); i++) {
            // creating new HashMap
            HashMap<String, String> map = new HashMap<String, String>();
            for(int k = 0; k < doc.getChildNodes().getLength(); k++) {
                Element e = (Element) nl.item(k);
                // adding each child node to HashMap key => value
                map.put(KEY_ID, parser.getValue(e, KEY_ID));
                map.put(KEY_NAME, parser.getValue(e, KEY_NAME));
                    map.put(KEY_COST, "Rs." + parser.getValue(e, KEY_COST));
                map.put(KEY_DESC, parser.getValue(e, KEY_DESC));

                // adding HashList to ArrayList
                menuItems.add(map);</pre> 
```

getDomElement(String xml) 方法是

```
 Document doc = null;
    DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
    try {

        DocumentBuilder db = dbf.newDocumentBuilder();

        InputSource is = new InputSource();
        if(is != null){
            is.setCharacterStream(new StringReader(xml));
            doc = db.parse(is); 
```

通过使用此逻辑，我能够检索简单的 xml，但不能检索我上面提到的复杂 xml。有人可以给出一个想法来从嵌套的 xml 中获取数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T08:13:32.090

在android中导入org.xml.sax

有关 SAX 的更多信息，请参见[http://www.saxproject.org/apidoc/org/xml/sax/package-summary.html](http://www.saxproject.org/apidoc/org/xml/sax/package-summary.html)。

# sql - 使用 cte 创建 while 循环

> ID：12929165
> 
> 赞同：9
> 
> 时间：2012-10-17T07:22:46.760
> 
> 标签：sql, sql-server, common-table-expression

如何从一个while循环创建sql server cte
我的循环是这样的

```
 declare @ind as int
  declare @code as nvarchar
  set @ind  = 0
   while @ind < 884
  begin
    select @ind  = @ind  + 1
    --here execute Procedure 
        --and set return value to variable 
    set @code = cast (@ind   as nvarchar)
  end 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-17T07:58:24.260

如果您需要表格：

```
;WITH Sec(Number) AS 
(
    SELECT 0 AS Number
    UNION ALL
    SELECT Number + 1
    FROM Sec
    WHERE Number < 884
) 

SELECT * FROM Sec
OPTION(MAXRECURSION 0) 
```

如果你需要一个字符串：

```
;WITH Sec(Number) AS 
(
    SELECT 0 AS Number
    UNION ALL
    SELECT Number + 1
    FROM Sec
    WHERE Number < 884
) 

SELECT STUFF(a.[Str], 1, 1, '')
FROM
(
    SELECT (SELECT ',' + CAST(Number AS NVARCHAR(3)) 
    FROM Sec
    FOR XML PATH(''), TYPE
    ).value('.','varchar(max)') AS [Str] 
) AS a
OPTION(MAXRECURSION 0) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-17T07:45:55.983

下面的查询选择从 0 到 884 的值：

```
;WITH T(Num)AS
(
    SELECT 0 
    UNION ALL
    SELECT Num+1 FROM T WHERE T.Num < 884
)SELECT Num FROM T 
OPTION (MAXRECURSION 0); 
```

# extjs - Sencha Cmd - 执行页面编译时出错循环扩展类 Sample.deadlock 的参考

> ID：12929167
> 
> 赞同：1
> 
> 时间：2012-10-17T07:22:51.473
> 
> 标签：extjs, extjs4, extjs4.1, sencha-cmd

我正在尝试使用**64-bit Linux OS编译基于****Ext JS 4.1.1.a**的应用程序。这是我的应用程序层次结构（*基于 Maven 的 Java Web 应用程序*）：

 ***```
+ src
     +main
         +webapp
             + extjs
             + app
             - app.js
             - index.jsp
             + resources
             + WEB-INF 
```

命令：

```
sencha compile -classpath=extjs/src,js page -yui -in index.jsp -out build/index.jsp 
```

这是一个巨大的项目，所以我想了解如何找到产生错误的类。这是错误堆栈跟踪：

```
[ERROR]     Circular extends reference :
Sample.deadlock.A ->
Sample.deadlock.B ->
Sample.deadlock.E ->
Sample.deadlock.C ->
Sample.deadlock.D ->
Sample.deadlock.A
[ERROR]     Error executing page compilation Circular extends reference for class Sample.deadlock.A
[ERROR]     com.sencha.exceptions.ExCircularReference: Circular extends reference for class Sample.deadlock.A 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T14:15:53.810

[按照本指南](http://docs.sencha.com/ext-js/4-1/#!/guide/command_app_single)，我犯了同样的错误。

我假设`extjs/src`是 extjs 源文件夹。但这是不正确的。

正确的运行命令是：

```
sencha -sdk ../ext-4.1.1a compile -classpath=js page -yui -in index.jsp -out build/index.jsp 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T08:00:23.627

It's an example that shows deadlock detection. That's why the class is prefixed with "Sample". Remove it from your project.***

# joomla - 显示 500 内部服务器错误的组件视图

> ID：12929169
> 
> 赞同：0
> 
> 时间：2012-10-17T07:23:13.943
> 
> 标签：joomla, joomla2.5

我在遵循 Joomla 的组件开发教程时遇到了问题。我遵循的与该问题相关的教程是[this](http://docs.joomla.org/Developing_a_Model-View-Controller_Component/2.5/Adding_backend_actions)和[this](http://docs.joomla.org/Developing_a_Model-View-Controller_Component/2.5/Adding_decorations_to_the_backend)。

我可以正确查看默认视图，但是当我单击`new`或`edit`和`delete`按钮时，或者当我浏览时，`../administrator/index.php?option=com_testimonials&view=testimonial&layout=edit`我得到了那个错误。

我已经重新检查了很多次代码，但我就是找不到哪里出错了。

文件：控制器\testimonial.php

```
class TestimonialsControllerTestimonial extends JControllerForm
{
    //Nothing yet as per the tutorial
} 
```

文件：models\testimonial.php

```
class TestimonialsModelTestimonial extends JModelAdmin {
    public function getTable($type = 'Testimonials', $prefix = 'TestimonialsTable', $config = array()) {
        return JTable::getInstance($type, $prefix, $config);
    }

    public function getForm($data = array(), $loadData = true) {
        // Get the form
        $form = $this -> loadForm('com_testimonials.testimonial', 'testimonial', array('control' => 'jform', 'load_data' => $loadData));
        if(empty($form)) {
            return false;
        }
        return $form;
    }

    protected function loadFormData() {
        // Check the session for previously entered form data
        $data = JFactory::getApplication() -> getUserState('com_testimonials.edit.testimonial.data', array());
        if(empty($data)) {
            $data = $this -> getItem();
        }
        return $data;
    }
} 
```

文件：views\testimonial\view.html.php

```
class TestimonialsViewTestimonial extends JView {

    protected $form = null;

    public function display($tpl = null) { 
        //get the data
        $form = $this -> get('Form');
        $item = $this -> get('Item');

        $this -> form  = $form;
        $this -> item = $item;
        $this -> addToolbar();

        parent::display($tpl);
        $this -> setDocument();

    }

    protected function addToolBar() {
        JRequest::setVar('hidemainmenu', true);
        $isNew = ($this -> item -> id == 0);
        JToolBarHelper::title($isNew ? JText::_('COM_TESTIMONIALS_MANAGER_TESTIMONIAL_NEW') : JText::_('COM_TESTIMONIALS_MANAGER_TESTIMONIAL_EDIT'), 'testimonials');
        JToolBarHelper::save('testimonial.save');
        JToolBarHelper::cancel('testimonial.cancel', $isNew ? 'JTOOLBAR_CANCEL' : 'JTOOLBAR_CLOSE');

    }

    protected function setDocument() {
        $isNew = ($this -> item -> id < 1);
        $document = JFactory::getDocument();        
        $document -> setTitle($isNew ? JText::_('COM_TESTIMONIALS_TESTIMONIAL_CREATING') : JText::_('COM_TESTIMONIALS_TESTIMONIAL_EDITING'));
    }
} 
```

文件： `views\testimonial\tmpl\edit.php`

```
<form action="<?php echo JRoute::_('index.php?option=com_testimonials&layout=edit&id='.(int) $this -> item -> id); ?>" method="post" name="adminForm" id="testimonial-form">
    <fieldset class="adminForm">
        <legend><?php echo JText::_('COM_TESTIMONIALS_TESTIMONIAL_DETAILS'); ?></legend>
        <ul class="adminFormList">
            <?php foreach($this -> form -> getFieldset() as $field): ?>
                <li><?php echo $field -> label; echo $field -> input; ?></li>
            <?php endforeach; ?>
        </ul>
    </fieldset>
    <div>
        <input type="hidden" name="task" value="testimonial.edit" />
        <?php echo JHtml::_('form.token'); ?>
    </div>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T08:15:41.437

问题出在您的视图文件夹名称中。`testimonials folder name to testimonial`按照您指定的 view=testimonial 进行更改。

让我知道它是否不起作用。

更新：正如所讨论的，您的表有命名问题-

```
class TestimonialsTableTestimonial extends JTable 
{ 
public function __construct(&$db) { 
parent::__construct('#__testimonial_table', 'id', $db); 
} 

function bind($array, $ignore = '') 
{ 

return parent::bind($array, $ignore); 
} 

} 
```

# ruby - 自我代表什么？红宝石

> ID：12929171
> 
> 赞同：-1
> 
> 时间：2012-10-17T07:23:28.343
> 
> 标签：ruby

刚刚在 RoR 3.2.8 中遇到以下代码。这是否意味着 self 属于合并函数或类？

```
结果.合并（
        简介：自我）
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T07:39:58.790

Depends on the context. ie. where you found this line of code.

```
class Profile
  def foo
    results.merge(profile: self)
  end
end

p = Profile.new
p.foo 
```

In this case "self" will be referring to the object "p", which is the current object in the context where "self" is used.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T07:33:53.813

它正在合并当前对象 - 配置文件到结果

[http://jimmycuadra.com/posts/self-in-ruby](http://jimmycuadra.com/posts/self-in-ruby)

# c - 提交表单之前组合框选定的值更改

> ID：12929174
> 
> 赞同：0
> 
> 时间：2012-10-17T07:23:43.660
> 
> 标签：c, web, combobox, cgi

我使用 CGI C 并尝试在表单中使用组合框。当我更改所选值并按保存按钮时，在提交表单之前我可以看到所选值更改。它总是变成 7。我不知道为什么。这是我的代码：

```
<form method=POST action="cgi-bin/aa.cgi?aa.xml" name="aform" onsubmit="return checkConForm(document.aform);">
    <table class=conftable>
            <td class=conftabletd>
            <select name="aa" id="aa" >
            <option value=2>2</option><option>1</option><option>3</option><option>4</option><option>5</option><option>6</option><option>7</option>
            </select></td>
        </tr>
    </table><br>
    <a href="javascript:submitform(document.aform)" class="more">save</a>
</form> 
```

js：

```
function checkConfigForm ( form )
{

   var selectLists = document.getElementsByTagName("select");
   for ( var i=0; i<selectLists.length; i++ ) {
       if (selectLists[i].id != null) {
         alert(selectLists[i].id);
         selectOpts(selectLists[i].id);
        }
    }
    return true;
}

function selectOpts( selectId )
{
  var selectList = document.getElementById(selectId);
  var selectListLength = selectList.length;
  if (selectListLength == 0){
    appendOptionLastwValue( selectId, "" );
    selectListLength = 1;
  }
  for (var i = 0; i < selectListLength; i++) {
    selectList.options[i].selected = true;
  }
  return true;
}

function submitform( form )
{
     if(form.onsubmit() == true){
     form.submit();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T11:31:34.010

显然，您在这里一个接一个地将 SELECT 对象的每个选项设置为 TRUE：

```
for (var i = 0; i < selectListLength; i++) {
    selectList.options[i].selected = true;
} 
```

提交表单后，最后一个选项 ( options[6] = 7 ) 被选中作为结果。

# php - 打字时Spry Javascript重复值

> ID：12929180
> 
> 赞同：0
> 
> 时间：2012-10-17T07:24:14.110
> 
> 标签：php, javascript, spry

我需要使用 Spry 验证 PHP 表单，下面是我使用的 javascript。验证规则是：9 位数字后跟文字“v”。验证有效，但输入某些数字时重复。

```
var id_num1 = new Spry.Widget.ValidationTextField(
    "id_num1",
    "custom",
    {
        pattern: "000000000v",
        useCharacterMasking: true,
        validateOn: ["blur"],
        isRequired:true
    }); 
```

如果有人帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T07:41:08.953

Try:

```
var id_num1 = new Spry.Widget.ValidationTextField(
    "id_num1",
    "custom",
    {
        format:"custom",
        pattern: "000000000v",
        useCharacterMasking:true,
        validateOn:["blur"], 
        isRequired:true
    }); 
```

And if it doesn't work, please be more precise in what is happening.

# xml - 如何在 xml-files 目录中找到 xml-attributes？

> ID：12929184
> 
> 赞同：1
> 
> 时间：2012-10-17T07:24:44.500
> 
> 标签：xml, regex, grep

我有一堆 xml 文件，需要找到任何组合属性的出现。

例子：

```
<combobox name="myCombo" label="The combo:" data="apple:Apple|lemon:Lemon" /> 
```

我想知道哪些文件以及我在哪里匹配

```
"<combobox && data" 
```

使用什么 linux/grep 命令？

是否有适用于 Windows 的免费查找工具？

（这些文件不是纯 xml，所以解析不是一个选项）

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T07:29:18.023

您可以使用[jtidy](http://jtidy.sourceforge.net/)来修复您的文件，然后使用[xsltprox+xsl](http://xmlsoft.org/XSLT/xsltproc2.html)来“grep”修复的 xml 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T10:42:58.217

这是使用以下方法搜索多个 xml 文件的一种方法`GNU grep`：

```
grep -H "<combobox" *.xml | grep "data" 
```

`grep`这是通过单个调用执行相同操作的另一种方法：

```
grep -HE "<combobox.*data|data.*<combobox" *.txt 
```

请注意，从技术上讲，您不需要该`-H`选项，因为您正在搜索多个文件。`-H`如果您正在搜索单个文件，您实际上只需要该标志。

# c# - 如何在 Windows (C#) 上监视文件系统访问 - 不仅更改而且访问

> ID：12929188
> 
> 赞同：0
> 
> 时间：2012-10-17T07:24:58.320
> 
> 标签：c#, filesystems, ntfs, audit

我已经尝试过 filesystemwatcher - 但是监视对文件的访问是没有用的。有没有接口可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T07:58:49.153

抓住`UnauthorizedAccessException`，如果被抓住，那么你无权访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T08:57:08.577

对于简单的审计，您可以使用审计策略。如果您想在实际访问发生之前采取行动（或基于一些复杂的逻辑阻止访问）m，那么您需要使用文件系统*过滤器*驱动程序。编写您自己的（内核模式驱动程序编写技能和几个月的工作）或使用我们的 CallbackFilter 产品，该产品提供驱动程序并允许您在包括 .NET 在内的用户模式下编写业务逻辑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T07:29:46.793

您可以阅读有关`FileIOPermission`课程的更多信息。

或使用这样的自定义方法：

```
public static bool HasWritePermissionOnDir(string path)
{
  var writeAllow = false;
  var writeDeny = false;
  var accessControlList = Directory.GetAccessControl(path);
  if(accessControlList == null)
     return false;
  var accessRules = accessControlList.GetAccessRules(true, true, typeof(System.Security.Principal.SecurityIdentifier));
  if(accessRules ==null)
   return false;

  foreach (FileSystemAccessRule rule in accessRules)
  {
      if ((FileSystemRights.Write & rule.FileSystemRights) != FileSystemRights.Write) 
        continue;

      if (rule.AccessControlType == AccessControlType.Allow)
        writeAllow = true;
      else if (rule.AccessControlType == AccessControlType.Deny)
        writeDeny = true;
  }

  return writeAllow && !writeDeny;
} 
```

# tridion - 检测我们在 2012 UI/XM 中进行 CMS 预览与动态预览时的问题

> ID：12929190
> 
> 赞同：4
> 
> 时间：2012-10-17T07:25:06.610
> 
> 标签：tridion, tridion-2011

我有模板代码（2011 SP1），它通过检查来检测是否正在使用 CMS 预览`engine.RenderMode`（应该是`PreviewDynamic`）。然后，这将确保通常由应用服务器为已发布页面添加的内容（如 CSS、JS、导航元素等）被注入到渲染输出中，因此预览在 CMS 中看起来不错。

Tridion 2012 UI/XM 为动态预览创建临时文件，结果在 Publishing these files 中，渲染模式也是`PreviewDynamic`，这给了我一个问题，因为在页面实际发布的情况下，我不想要注入东西（在这种情况下，应用服务器使用 .NET 母版页来处理这个问题）

查看`RenderMode`.NET API 中的可能值，我们有`Publish`、`PreviewStatic`和`PreviewDynamic`.

所以我的问题是：

1.  如何区分模板代码中的 CMS 预览和动态预览
2.  什么时候（如果有的话）是 RenderMode `PreviewStatic`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T08:47:41.540

我有一个部分解决方案（对于第一个问题）。如果您使用 和 的组合，`RenderMode`您`engine.PublishingContext.PublicationTarget`可以检测 CMS 预览、动态预览和正常发布：

*   CMS 预览 - RenderMode: `DynamicPreview`PublicationTarget:null
*   动态预览 - RenderMode: `DynamicPreview`PublicationTarget:not null
*   正常发布 - RenderMode：`Publish`PublicationTarget：not null

仍然不确定何时使用 PreviewStatic...？

# sql - 加入两个sql结果

> ID：12929191
> 
> 赞同：2
> 
> 时间：2012-10-17T07:25:11.640
> 
> 标签：sql

我的第一个结果看起来像这样

```
ID       Name
----------------------------------
1        George
2        Peter
3        San 
```

我的其他结果看起来像这样

```
AnotherID     ID     Note
-----------------------------------
1             1      georgesnote1
2             1      georgesnote2
3             3      sansnote1
4             1      georgesnote3 
```

我希望他们看起来如何：

```
ID       Name        Note
----------------------------------
1        George      georgesnote1
1        George      georgesnote2
1        George      georgesnote3
2        Peter       NULL
3        San         sansnote1 
```

我的 SQL 知识几乎限制了我实现这一目标。我想我需要像 UNION ALL 这样的东西。INNER JOIN 或 LEFT OUTER JOIN 不起作用。我的实际查询大约是 21 行，所以这不是一个初学者问题。我需要的是基于相同的 ID 加入两个结果。请有人指导我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T07:27:39.837

```
SELECT 
  N1.ID, N1.Name, N2.Note 
FROM 
  Names N1
    LEFT JOIN Notes N2 ON N1.ID = N2.ID
ORDER BY
  N1.ID 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T07:27:56.970

你必须使用`left join`：

```
select r1.id, r1.Name, r2.Note 
from result1 r1
left join result2 r2 on r2.id = r1.id
order by 1 
```

但如果您的*结果*来自其他查询，请尝试添加这些查询，如下所示：

```
select r1.id, r1.Name, r2.Note 
from (select id,name from tab1) r1
left join (select id,note from tab2) r2 on r2.id = r1.id
order by 1 
```

[在这里](http://www.w3schools.com/sql/sql_join_left.asp)你可以找到更多关于`left join`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-17T07:34:46.370

你需要一个左连接。

查看[http://www.w3schools.com/sql/sql_join_left.asp](http://www.w3schools.com/sql/sql_join_left.asp)

假设第一个表称为**first**，第二个称为**second**。第一个表上的列 id 将与第二个表上的列**id****匹配**。

```
SELECT first.id, first.name, second.note
FROM first
LEFT JOIN second
ON first.id = second.id
ORDER BY first.id 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-17T07:42:17.787

```
select n.ID, n.Name, t.note 
  from names n 
  left join notes t
  on n.id = t.id 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-17T07:28:01.137

```
Select sur.ID, sur.NAME, not.NOTE 
FROM SURNAME sur
LEFT JOIN NOTES not
ON sur.ID = not.ID 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-17T07:28:10.400

```
select
    T1.ID,
    T1.Name,
    T2.Note
from Table1 as T1.ID
    left outer Table2 as T2 on T2.ID = T1.ID 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-17T07:29:13.990

`LEFT JOIN`是您在这里需要的，因为您想从 table1 中选择所有记录，无论它在 table2 上是否匹配

```
SELECT  a.ID, a.Name, b.Note
FROM    table1 a
        LEFT JOIN table2 b
            ON a.ID = b.ID 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-10-17T07:29:28.603

```
select table1.id,table1.name,table2.note from table1 left  join table2  on table1.id=table2.id 
```

# c++ - 将列表从python传递到C++向量时如何加速Boost::Python::Extract

> ID：12929196
> 
> 赞同：2
> 
> 时间：2012-10-17T07:25:18.207
> 
> 标签：c++, python, performance, list, boost-python

我是 boost.python 的新手，并且制作了一个简单的函数，用于将列表从 python 传递到 C++ 向量：

```
void SetXValues(boost::python::list xl){
    int n = len((xl));
    xvals.resize(n);
    for(unsigned int i=0; i<n; i++){
    xvals[i] = boost::python::extract<double>((xl)[i]);
    }
} 
```

xvals 是一个 C++ STL 向量。这个函数有效，我可以将 python 列表加载到 C++ 中，但它似乎非常慢。

我做的一个小速度测试是用 C++ 和纯 Python 编写一个分箱算法。结果表明，当包含从 Python 传递数据的时间时，C++ 方法的速度仅快 5 倍，但当然单独的分箱算法要快得多（74 倍）。

那么有没有什么办法可以改进上面的功能，让它更有效率呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T11:11:29.560

在性能关键部分，例如您描述的。我通常首先避免将数据存储在 python`list`中。A`list`是在其中存储任意对象的正确数据类型。特别是列表中的每个对象都可以具有不同的类型。但是你已经知道这将是一个“双打列表”。

我建议改用`std::vector<double>`已经在 python 中使用。为此，您可以使用 boost python将其导出`std::vector<double>`为`class_`，我们称之为。`VectorOfDOubles`你可以让它在python中你不会看到和之间的区别`list`，`VectorOfDoubles`主要区别在于你构造它`xl = VectorOfDoubles(55)`而不是`xl = []`。您需要做一些工作才能使 index-acees 正常工作，例如 xl[5] = 4.5，但为此存在 boost 索引套件，我推荐版本 2，以帮助您。

另一种选择是使用 numpy ndarrays 而不是`list`. 存在 boost numpy 库，可帮助您使用 boost python 中的 numpy ndarrays。

但是正如您所说，您是 boost python 的新手，boost numpy 和 boost indexing suite 都可能有点困难。也许您首先想解决创建自己的子类`std::vector<double>`，比如`VectorOfDOubles`定义`double get(int i)`，`void set(int i, double val)`然后将这两个函数（连同 size()，构造函数）导出到 python。这需要对您的 python 代码进行一些更改，但对初学者来说更容易。

# c++ - OpenCV关闭一个形状并填充它

> ID：12929197
> 
> 赞同：13
> 
> 时间：2012-10-17T07:25:21.500
> 
> 标签：c++, opencv, shape, fill, contour

我想输出一个充满蓝色的手，但输出不正确。我在下面包含了输入图片、不正确的输出图片和代码。

我认为下面的代码不会填充整个图像，因为图像尚未在右边界关闭。

如何关闭形状并正确填充蓝色？

![紧密的形状](../Images/0bad1d7d25805efea1fab821deaf539e.png)

```
#include <opencv2/core/core.hpp>
#include <opencv2/highgui/highgui.hpp>
#include <opencv2/imgproc/imgproc.hpp>
#include <iostream>
#include <stdio.h>
#include <stdlib.h>

using namespace cv;
using namespace std;

void drawStuff();
void showInputWindow();
void showCannyWindow();
void showContourWindow();

int thresh = 40;
int max_thresh = 120;
Mat img_rgb,img_gray,img_bw,canny_output,drawing;

int main(){
    img_rgb  = imread("qq.jpg");
    blur( img_rgb, img_rgb, Size(3,3) );
    cvtColor(img_rgb,img_gray,CV_RGB2GRAY);
    showInputWindow();

    drawStuff();
    cv::waitKey(0);
}

void drawStuff(){
    vector<vector<Point> > contours;
    vector<Vec4i> hierarchy;

    Canny( img_gray, canny_output, thresh, thresh*2, 3 );
    cv::dilate(canny_output, canny_output, cv::Mat(), cv::Point(-1,-1));
    showCannyWindow();

    findContours( canny_output, contours, hierarchy, CV_RETR_TREE, CV_CHAIN_APPROX_SIMPLE, Point(0, 0) );
    drawing = Mat::zeros( canny_output.size(), CV_8UC3 );

    vector<Point> approxShape;
    for(size_t i = 0; i < contours.size(); i++){
        approxPolyDP(contours[i], approxShape, arcLength(Mat(contours[i]), true)*0.04, true);
        drawContours(drawing, contours, i, Scalar(255, 0, 0), CV_FILLED);   // fill BLUE
    }

    showContourWindow();
}

void showInputWindow(){
    cv::namedWindow("InputImage");
    cv::imshow("InputImage",img_rgb);
}

void showCannyWindow(){
    cv::namedWindow("Canny");
    cv::imshow("Canny",canny_output);
}
void showContourWindow(){
    cv::namedWindow("Fill");
    cv::imshow("Fill",drawing);
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-08-14T06:56:11.990

要解决您的问题，您应该只检测外部轮廓。这样做你只会得到一个轮廓，你可以用你的颜色填充它。

```
findContours( canny_output, contours, hierarchy, Imgproc.RETR_EXTERNAL, CV_CHAIN_APPROX_SIMPLE, Point(0, 0) ); 
```

# c# - C#中的积分窦

> ID：12929205
> 
> 赞同：0
> 
> 时间：2012-10-17T07:25:48.177
> 
> 标签：c#, integer, trigonometry

我想在 C# 中实现对性能敏感的积分计算。有人告诉我，返回一个介于 -256 和 255 之间的值的函数 int Sin(int angle) 在这种情况下很有用，因为我不需要它是准确的。有没有我可以使用的这种功能的良好实现，或者我可以实现的某种算法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T07:38:16.637

这只是一个查找表。只需在启动时使用内置的 sin 函数创建表，然后编写函数来查找该表。这是一个基本相同的问题，您的函数只需要一个 int 而不是 double：

[使用预先计算的平移数组的快速正弦/余弦](https://stackoverflow.com/questions/2088194/fast-sin-cos-using-a-pre-computed-translation-array)

这个答案还使用不安全代码来获得一些额外的速度，但是如果您不想要不安全代码，则可以使用普通数组

# java - 无法通过 Java servlet 发送电子邮件

> ID：12929207
> 
> 赞同：2
> 
> 时间：2012-10-17T07:25:50.197
> 
> 标签：java, servlets, smtp

我在尝试通过 servlet 中的 gmail smtp 发送电子邮件时遇到此错误，它在测试时可以在本地工作，但不能在 google 引擎内部我在 web-inf/libs [activation.jar-smtp.jar-mailapi.jar - mail. jar] 知道如何修复它！

错误： `javax.servlet.ServletContext log: unavailable java.lang.SecurityException: SHA1 digest` `error for javax/mail/Message.class at com.google.appengine.run`

代码快照：

```
 Properties props = new Properties();
 props.setProperty("mail.transport.protocol", "smtp");
 props.setProperty("mail.host", "smtp.gmail.com");
 props.put("mail.smtp.auth", "true"); 
 props.put("mail.smtp.port", "465"); 
 //props.put("mail.debug", "true");
 props.put("mail.smtp.socketFactory.port", "465");
 props.put("mail.smtp.socketFactory.class","javax.net.ssl.SSLSocketFactory");
 props.put("mail.smtp.socketFactory.fallback", "false");
 javax.mail.Session sess = javax.mail.Session.getInstance(props);
 Transport transport = sess.getTransport(); 
 transport.connect();
 transport.send(message); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T07:33:44.063

您[不能](https://developers.google.com/appengine/docs/java/runtime#no_signed_jars)在 Google 应用引擎上使用签名的 jar 文件。

如网页所示，您应该尝试取消签名，特别是`mail.jar`因为错误指示`javax/mail/Message.class`，请参阅[this question](https://stackoverflow.com/questions/7757083/how-do-i-unsign-a-jar)以获取示例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T07:37:13.783

App Engine 的预编译与签名的 JAR 文件不兼容。如果您的应用程序是预编译的（默认），它不能加载签名的 JAR 文件。如果应用程序尝试加载已签名的 JAR，App Engine 将在运行时生成与您类似的异常。
[没有签名的 JAR 文件](https://developers.google.com/appengine/docs/java/runtime#no_signed_jars)

有两种解决方法。

1.  [剥离 JAR 的签名](https://www.google.com/search?q=java%20unsign%20jar&nfpr=1)
2.  [禁用预编译](https://developers.google.com/appengine/docs/java/config/appconfig#Disabling_Precompilation)

# asp.net - 从asp.net静态方法中找到用户控件

> ID：12929210
> 
> 赞同：2
> 
> 时间：2012-10-17T07:26:01.673
> 
> 标签：asp.net, vb.net

在我的 default.aspx 中，我使用的是 samplectrl.ascx 。现在我想在静态方法中找到**samplectrl.ascx的引用。**

我们应该怎么做

我试过这样

```
 Public Shared Function TestMethod() As Boolean
    Dim WebUserControl1 As samplectrl= DirectCast(FindControl("samplectrlname"), samplectrl)        
End Function 
```

在静态方法中，但它在编译时抛出错误，如下所示

> 如果没有类的显式实例，则无法从共享方法或共享成员初始化程序中引用类的实例成员

我想参考静态方法..我们该怎么做

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T07:27:28.460

您无法以共享方法访问页面控件。

将其更改为

```
Public Function TestMethod() As Boolean
    Dim WebUserControl1 As samplectrl= DirectCast(FindControl("samplectrlname"), samplectrl)        
End Function 
```

# objective-c - 无法从我的核心数据数据库中获取数据

> ID：12929212
> 
> 赞同：0
> 
> 时间：2012-10-17T07:26:16.640
> 
> 标签：objective-c, ios, core-data, nsfetchrequest

我总是以同样的方式从我的网络服务中获取我的数据。它总是有效的。但现在我收到了这个错误。

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException',
reason: '+entityForName: nil is not a legal NSManagedObjectContext parameter
searching for entity name 'Team'' 
```

它在这种方法中崩溃。

```
- (NSMutableArray *)getDoelmannen
{
    NSLog(@"tot hier doelman");
    NSArray *results = [[NSArray alloc]init];
    NSFetchRequest *request = [[NSFetchRequest alloc] init];
    [request setEntity:[NSEntityDescription entityForName:@"Team" 
        inManagedObjectContext:self.genkDatabase.managedObjectContext]];
    request.predicate = [NSPredicate predicateWithFormat:@"position ==[c] %@",
                                                         @"Doelman"];
    NSLog(@"predicate is: %@",request.predicate);
    NSError *error = nil;
    NSLog(@"tot hier");
    results = [self.genkDatabase.managedObjectContext
               executeFetchRequest:request error:&error];

    return [results valueForKey:@"image"] ;

} 
```

为了打开我的数据库，我使用以下方法。

```
-(void)viewWillAppear:(BOOL)animated
{
    if (!self.genkDatabase) {  // we'll create a default database if none is set
        NSURL *url = [[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask] lastObject];
        url = [url URLByAppendingPathComponent:@"Default appGenk Database"];
        self.genkDatabase = [[UIManagedDocument alloc] initWithFileURL:url]; // setter will create this for us on disk
    }

}

- (void)setGenkDatabase:(UIManagedDocument *)genkDatabase
{
    if (_genkDatabase != genkDatabase) {
        _genkDatabase = genkDatabase;
        [self useDocument];
    }
}

- (void)useDocument
{
    if (![[NSFileManager defaultManager] fileExistsAtPath:[self.genkDatabase.fileURL path]]) {
        // does not exist on disk, so create it
        [self.genkDatabase saveToURL:self.genkDatabase.fileURL forSaveOperation:UIDocumentSaveForCreating completionHandler:^(BOOL success) {
            NSLog(@"bestaat niet");
            [self getTeam];

        }];
    } else if (self.genkDatabase.documentState == UIDocumentStateClosed) {
        // exists on disk, but we need to open it
        [self.genkDatabase openWithCompletionHandler:^(BOOL success) {
            NSLog(@"closed");
            [self getTeam];
        }];
    } else if (self.genkDatabase.documentState == UIDocumentStateNormal) {
        // already open and ready to use
        NSLog(@"Normal");
        [self getTeam];
    }

} 
```

有谁能够帮助我？

亲切的问候。

***EDTI***

这很奇怪，因为当我在另一个视图控制器中测试该方法时它可以工作。唯一的区别是在我的 .h 文件中我这样做了。

```
 @interface MultimediaViewController : CoreDataTableViewController 
```

在它不起作用的 viewController 中，它会这样做。

```
@interface MultimediaViewController : NRGridViewController 
```

但我仍然像这样导入它。

```
#import "CoreDataTableViewController.h" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T09:37:36.223

好的，所以我尝试了另一个功能。它奏效了。我认为这可能与我的 managedobjectContext 有关。这是有效的功能。

```
- (NSArray *)getDoelmannen
{
    NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:@"Team"];
    NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"name" ascending:NO];
    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"sortOrder == 1"];
    [request setPredicate:predicate];
    NSArray *sortDescriptors = [[NSArray alloc] initWithObjects:sortDescriptor, nil];
    [request setSortDescriptors:sortDescriptors];

    NSError *error = nil;
    NSArray *mutableFetchResults = [self.genkDatabase.managedObjectContext executeFetchRequest:request error:&error];
    if (mutableFetchResults == nil) {
        //handle error
    }else if ([mutableFetchResults count] == 0){
        NSLog(@"geen resultaten voor doelmannen");
    }else{
        //NSLog(@"Name: %@ , position %@",[mutableFetchResults valueForKey:@"name"],[mutableFetchResults valueForKey:@"position"]);
        return mutableFetchResults;
    }
    return mutableFetchResults;
} 
```

# c# - .click(function) 不适用于 $.getJSON

> ID：12929220
> 
> 赞同：0
> 
> 时间：2012-10-17T07:26:40.953
> 
> 标签：c#, jquery, asp.net-mvc, json, razor

我想在单击按钮时触发控制器操作，并且我尝试实现一些 JQuery 代码来执行此操作，但是单击未正确触发。

我有以下代码：-

```
<script type="text/javascript">

$(document).ready(function () {

    $("#btnLoadData").click(function() {
        var ResXName = $('#ResXName').val();
        var LangID = $('#LangID').val();
        var url = "../Home/LoadResXFile";
        e.preventDefault();  
        $.getJSON(url, { value: ResXName, langID: LangID }, function (data) {
            alert('clicked!');
        });
    });

});

</script>

<div class="main-content">
<input type="button" id="btnLoadData" value="Load Data" />
</div> 
```

当我将警报移动到 $getJSON 上方时，它可以正常工作，因此按钮被正确单击，但是当我在 $getJSON 中移动警报时，我没有收到任何警报，并且控制器操作也没有被触发。

我错过了什么吗？

感谢您的帮助和时间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T09:01:35.097

我的问题实际上不在 aspx 中，而是在控制器内部。我回来了：-

```
return Json(JsonRequestBehavior.AllowGet); 
```

这显然是错误的，因为没有什么可以返回的。我将其更改为：-

```
return Json(new { ViewModel = viewModel }, JsonRequestBehavior.AllowGet); 
```

现在它的工作！

感谢您的所有帮助和时间！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T07:29:10.600

因为 getJson 没有完成。它一定是这样的`var url = "/Home/LoadResXFile";`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T07:30:02.643

在所有情况下都不会调用回调函数，如果您调用的 URL 返回 500 OR 404，则不会调用它。尝试添加一个名为 .error() 的新函数，

```
$.getJson(url,data,function(){
})
.error(){
alert("error");
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T07:33:14.513

getJSON 调用是异步的，警报应在几秒钟内触发。

原因是 getJSON 不起作用，因为 URL 格式错误。

```
var url = "http://someurl/Home/LoadResXFile"; //maybe also extension needed. 
```

[见文档](http://api.jquery.com/jQuery.getJSON/)

还有一个错误：

```
e.preventDefault(); 
```

但是e没有定义：把点击改成这个

```
$("#btnLoadData").click(function(e){ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-17T07:33:35.277

如果您使用 fiddler 或 firebug 之类的工具，您能看到正在发出的 .getJSON HTTP 请求吗？

我的猜测是这个请求失败了，可能是因为 URI 不正确。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-17T12:50:16.783

```
 $(function () {

        $(document).on('click', '#btnLoadData', function () {
            var url = "@Url.Action("Action", "Controller")";
            var postData = ({ value : $("#ResXName").val(), langID : $("#LangID").val()});
            $.getJSON(url, postData , function (data) {
                alert('clicked!');
            });
        });
    }); 
```

这应该有效。

# linux - 重定向 301 /subfolder/old-page-name.html http://domain.com/new-page-name.html 不工作

> ID：12929222
> 
> 赞同：0
> 
> 时间：2012-10-17T07:26:49.193
> 
> 标签：linux, apache, .htaccess, redirect

我是一个完全的新手，但没有看到我做错了什么，对于已更改名称但具有相同内容的页面来说，这似乎是非常简单的逐页重定向。

这是 .htaccess 文件，其中只有一个页面重定向低于规范重定向：

```
Options +FollowSymlinks
RewriteEngine On

RewriteCond %{http_host} ^clarityperformancealliance.com [nc]
RewriteRule ^(.*)$ http://www.clarityperformancealliance.com/$1 [r=301,nc]

Redirect 301 /clarity/[A].html http://www.clarityperformancealliance.com/current-performance.html 
```

我意识到旧页面是一个名称*非常*糟糕的页面（使用方括号），但我不认为方括号是它失败的原因，因为我试图重定向那些没有方括号的更正常名称的页面，它们也失败了。

我在使用我认为是 Apache 服务器的共享网络解决方案 Linux 服务器上。他们以我认为非常典型的方式设置了共享服务器，因为我的根文件夹称为 htdocs，我可以在其中创建任意数量的子文件夹和网站，因此我有一个名为“clarity”的子文件夹特定网站。

非 www 到 www 重定向完美运行。这是所有单独的页面重定向（此处仅显示一个）都不起作用。

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T12:03:10.923

重定向使用的是 %-encoded url，所以我认为`[A].html`应该是`%5BA%5D.html`

现在您的配置似乎正确，除非清晰子文件夹是网站根目录，在这种情况下，重定向中的 url 路径参数不应包含该`/clarity`部分；重定向适用于请求 uri，而不是文件系统路径。

所以可能是：

```
Redirect 302 /%5BA%5D.html http://www.clarityperformancealliance.com/current-performance.html 
```

请注意，我使用的是**302**而不是 301。在规则生效之前，您应该始终使用 302（临时）重定向而不是 301（永久）。使用永久重定向时，如果要对其进行测试，则需要在每次修改之间关闭 Web 浏览器。浏览器在收到 301 后不会重新请求给定的 url。

如果这不起作用，您是否仅在旧域中使用旧 url 或在新域上请求这些旧 url 时尝试重定向问题？

# c - 用 MCU 定时器/中断计算秒数和分钟数？

> ID：12929226
> 
> 赞同：1
> 
> 时间：2012-10-17T07:26:59.610
> 
> 标签：c, embedded, microcontroller

我想弄清楚如何为我的 C8051F020 MCU 创建一个计时器。以下代码使用通过`init_Timer2()`以下公式传递给的值：

65535-(0.1 / (12/2000000)=48868。

我将计时器设置为每次执行时计数，每计数 10 次，计数一秒。这是基于上面的公式。传递给 48868 时`init_Timer2`会产生 0.1 秒的延迟。每秒需要十个。但是，当我测试计时器时，它有点快。在 10 秒时计时器报告 11 秒，在 20 秒时计时器报告 22 秒。我想尽可能接近完美的一秒。

这是我的代码：

```
#include <compiler_defs.h>
#include <C8051F020_defs.h>

void init_Clock(void);
void init_Watchdog(void);
void init_Ports(void);
void init_Timer2(unsigned int counts);
void start_Timer2(void);
void timer2_ISR(void);

unsigned int timer2_Count;
unsigned int seconds;
unsigned int minutes;

int main(void)
{
    init_Clock();
    init_Watchdog();
    init_Ports();
    start_Timer2();

    P5 &= 0xFF;

    while (1);
}

//=============================================================
//Functions
//=============================================================
void init_Clock(void)
{
    OSCICN = 0x04;  //2Mhz
    //OSCICN = 0x07;    //16Mhz
}

void init_Watchdog(void)
{
    //Disable watchdog timer
    WDTCN = 0xDE;
    WDTCN = 0xAD;
}

void init_Ports(void)
{
    XBR0    = 0x00;
    XBR1    = 0x00;
    XBR2    = 0x40;

    P0      = 0x00;
    P0MDOUT = 0x00;
    P5      = 0x00; //Set P5 to 1111
    P74OUT  = 0x08; //Set P5 4 - 7 (LEDs) to push pull (Output)
}

void init_Timer2(unsigned int counts)
{
    CKCON = 0x00;   //Set all timers to system clock divided by 12

    T2CON = 0x00;   //Set timer 2 to timer mode

    RCAP2 = counts; 

    T2 = 0xFFFF;    //655535

    IE |= 0x20;     //Enable timer 2

    T2CON |= 0x04;  //Start timer 2
}

void start_Timer2(void)
{
    EA = 0;

    init_Timer2(48868);

    EA = 1;
}

void timer2_ISR(void) interrupt 5
{    
    T2CON &= ~(0x80);

        P5 ^= 0xF0;

        timer2_Count++;

        if(timer2_Count % 10 == 0)
        {
            seconds++;
        }

        if(seconds % 60 == 0  && seconds != 0)
        {
            minutes++;
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T07:41:05.057

打开此特定微控制器的数据表并查找计时中断。了解如何每 n ms 发出一次中断。通常计算公式取决于时钟速度，并且通常在特定微控制器的数据表/编程指南中进行描述。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T13:28:45.740

您的代码中可能没有任何内容导致问题。

您假设内部振荡器正好是 2Mhz。很可能，您的微信不存在。如果您查看数据表的容差，您会看到配置为 2Mhz 时，指定的最小值为 1.5Mhz，最大值为 2.4Mhz。因此，您可以在预期频率的 75% 到 120% 之间的任何地方运行。（这通常也会随着温度而变化......）

因此，您在计数器中看到的 10% 错误可能只是硬件。

你有第二个微可以将你的代码刷入吗？它的 osc 可能以不同的频率运行，并且可能会给您不同的时间感。

旁注：我建议更改

```
if(seconds % 60 == 0  && seconds != 0)
{
    minutes++;
} 
```

到

```
if(seconds >= 60)
{
    seconds = 0;
    minutes++;
} 
```

相等性检查的周期比模数更便宜，并且在第一分钟后不清除`seconds`您报告的秒数将是不正确的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T16:56:58.320

您正在使用内部振荡器。这是非常不准确的，而不是 2 mhz。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T21:00:04.660

我不能完全回答这个问题。每个人都做出了贡献。我最终使用了 22.1184Mhz 的外部时钟。以下代码片段是已更改以使其工作的原始帖子代码的部分：

```
void init_Clock(void)
{
    OSCXCN = 0x67;  //External 22.1184Mhz

    while ( !(OSCXCN & 0x80) );

    OSCICN = 0x88;
} 
```

和

```
void start_Timer2(void)
{
    EA = 0;

    //External clock
    init_Timer2(47103);

    EA = 1;
} 
```

从我的测试来看，这是非常准确的。

# java - 为什么我的简单 UDPServer 只有在它首先运行时才接收来自 UDPClient 的数据包？

> ID：12929229
> 
> 赞同：0
> 
> 时间：2012-10-17T07:27:12.880
> 
> 标签：java, sockets, udp

我的 UDP 客户端会不断发送“Hello Server！” 每 2 秒发送到 UDP 服务器（只是回显消息，但以大写形式）。他们都会打印收到的内容。

我的问题是我总是必须先运行服务器然后再运行客户端。如果我运行客户端然后服务器，服务器将不会收到任何东西。我希望服务器在他想要的任何时候启动并且仍然从客户端接收数据包。我怎样才能做到这一点？

**UDP客户端：**

```
import java.io.*;
import java.net.*;

class UDPClient
{
   public static void main(String args[]) throws Exception
   {
      while(true) {
         DatagramSocket clientSocket = new DatagramSocket();
         InetAddress IPAddress = InetAddress.getByName("localhost");
         byte[] sendData = new byte[100];
         byte[] receiveData = new byte[100];
         String sentence = "Hello Server!";
         sendData = sentence.getBytes();
         DatagramPacket sendPacket = new DatagramPacket(sendData, sendData.length, IPAddress, 9876);
         clientSocket.send(sendPacket);
         DatagramPacket receivePacket = new DatagramPacket(receiveData, receiveData.length);
         clientSocket.receive(receivePacket);
         String modifiedSentence = new String(receivePacket.getData());
         System.out.println("FROM SERVER:" + modifiedSentence);
         clientSocket.close();
         Thread.sleep(2000);
      }

   }
} 
```

**UDP服务器：**

```
import java.io.*;
import java.net.*;

class UDPServer
{
   public static void main(String args[]) throws Exception
      {
         DatagramSocket serverSocket = new DatagramSocket(9876);
            byte[] receiveData = new byte[100];
            byte[] sendData = new byte[100];
            while(true)
               {
                  DatagramPacket receivePacket = new DatagramPacket(receiveData, receiveData.length);
                  serverSocket.receive(receivePacket);
                  String sentence = new String( receivePacket.getData());
                  System.out.println("RECEIVED: " + sentence);
                  InetAddress IPAddress = receivePacket.getAddress();
                  int port = receivePacket.getPort();
                  String capitalizedSentence = sentence.toUpperCase();
                  sendData = capitalizedSentence.getBytes();
                  DatagramPacket sendPacket =
                  new DatagramPacket(sendData, sendData.length, IPAddress, port);
                  serverSocket.send(sendPacket);
               }
      }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T07:35:15.590

如果您首先运行客户端，当它尝试发送“Hello server！”时 第一次，它会导致`PortUnreachableException`. 因此，根本没有任何东西发送到服务器。将套接字代码包装在 try/catch 中并忽略异常条件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T07:43:12.123

如果您首先运行客户端，它将得到一个异常`PortUnreachableException`并且客户端程序将关闭，为了不发生这种情况，您必须捕获异常以便客户端继续运行。

尝试：

```
import java.io.*;
import java.net.*;

class UDPClient
{
   public static void main(String args[]) throws Exception
   {
      while(true) {
         try{
         DatagramSocket clientSocket = new DatagramSocket();
         InetAddress IPAddress = InetAddress.getByName("localhost");
         byte[] sendData = new byte[100];
         byte[] receiveData = new byte[100];
         String sentence = "Hello Server!";
         sendData = sentence.getBytes();
         DatagramPacket sendPacket = new DatagramPacket(sendData, sendData.length, IPAddress, 9876);
         clientSocket.send(sendPacket);
         DatagramPacket receivePacket = new DatagramPacket(receiveData, receiveData.length);
         clientSocket.receive(receivePacket);
         String modifiedSentence = new String(receivePacket.getData());
         System.out.println("FROM SERVER:" + modifiedSentence);
         clientSocket.close();
         }
         catch (PortUnreachableException pe)
         {
           System.out.println("COULDN'T CONNECT TO SERVER:" + pe.getMessage());
         }
         catch (Exception ex)
         {
           System.out.println("COULDN'T CONNECT TO SERVER:" + ex.getMessage());
         }
         Thread.sleep(2000);
      }

   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T09:33:03.247

你不能。如果您不首先运行服务器，则数据报将被放入位桶中。唯一的缓解方法是客户端首先调用 connect()，在这种情况下，他`PortUnreachableException,`可能会*在下一次*发送时收到一个，告诉他没有人在家。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T18:32:03.657

好的，现在是早上，我又看了一遍。事实上，没有任何异常被抛出。实际的问题是，当您首先启动客户端时，它正在等待服务器响应。但是，它永远不会收到来自服务器的响应，因为服务器没有及时启动以接收请求。

```
 clientSocket.send(sendPacket); //send message which will not be received
     clientSocket.receive(receivePacket); //wait forever for a response to a request that was never heard 
```

一个可行的解决方案是让客户端是多线程的。一个线程将负责发送请求，而另一个线程将负责接收传入的响应。这是一个骇人听闻的解决方案：

```
class UDPClient {
   public static void main(final String args[]) throws Exception {
      final InetAddress IPAddress = InetAddress.getByName("localhost");
      new Thread() {
         @Override
         public void run() {
            while (true) {
               DatagramSocket clientSocket = null;
               try {
                  clientSocket = new DatagramSocket();
                  byte[] sendData = new byte[100];
                  final String sentence = "Hello Server!";
                  sendData = sentence.getBytes();
                  final DatagramPacket sendPacket = new DatagramPacket(sendData, sendData.length, IPAddress, 9876);
                  clientSocket.send(sendPacket);
                  Thread.sleep(2000);
               } catch (final Exception e) {
                  e.printStackTrace();
               } finally {
                  clientSocket.close();
               }
            }
         }
      }.start();
      new Thread() {
         @Override
         public void run() {
            DatagramSocket clientSocket = null;
            try {
               clientSocket = new DatagramSocket();
            } catch (final SocketException e1) {
               e1.printStackTrace();
            }
            while (true) {
               try {
                  final byte[] receiveData = new byte[100];
                  final DatagramPacket receivePacket = new DatagramPacket(receiveData, receiveData.length);
                  clientSocket.receive(receivePacket);
                  final String modifiedSentence = new String(receivePacket.getData());
                  System.out.println("FROM SERVER:" + modifiedSentence);
               } catch (final Exception e) {
                  e.printStackTrace();
               }
            }
         }
      }.start();
   }

} 
```

# python - 没有越狱iOS可以运行python脚本吗？

> ID：12929241
> 
> 赞同：1
> 
> 时间：2012-10-17T07:28:04.360
> 
> 标签：python, ios, jailbreak

我的应用程序是用 Objective C 编写的，但我想让一个模块执行 python 脚本......

[kivy](http://www.kivy.org)似乎做不到这一点。而且我不想越狱...

有人知道如何在 oc 函数调用的 ios 应用程序中运行 python 脚本吗？

[在 ios 中运行一个简单的 python 脚本](https://stackoverflow.com/questions/11276656/run-a-simple-python-script-in-ios)似乎适合我的问题，但我不知道从哪里获得 python.h 和 libpython.a。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T08:47:05.233

是的，您可以在未越狱的设备上运行 python

例如 iPod touch 或 iphone 与

ios的python：http: [//pythonforios.com/](http://pythonforios.com/)（付费）

和 python 数学：[https](https://itunes.apple.com/fr/app/python-math/id429450202?mt=8) ://itunes.apple.com/fr/app/python-math/id429450202?mt=8 （免费）

所以它接缝并非不可能

但是非越狱设备上的应用程序是法兰的，所以这有点慢，如果你添加 python，它可能会在大脚本上崩溃

真正的python越狱当然是最好的方法

如果你想在你的 objec-c 应用程序上添加 python 脚本，我认为苹果不会让你这样做，否则会浪费时间和问题

# javascript - 使用 LimeJS 将图层限制为一个大小并在其中滚动子项

> ID：12929243
> 
> 赞同：0
> 
> 时间：2012-10-17T07:28:09.150
> 
> 标签：javascript, html, limejs

我有一个我希望能够滚动的地图。滚动工作，但现在因为地图在我的菜单下，用于单击菜单中某些内容的 mousedown 事件会触发该侦听器和地图拖动侦听器，因为地图超出它的图层大小并在菜单下。有没有办法限制这个？

代码：

```
//set main namespace
goog.provide('rh.game');

//get requirements
goog.require('lime.Director');
goog.require('lime.Scene');
goog.require('lime.Layer');
goog.require('lime.RoundedRect');
goog.require('lime.Sprite');
goog.require('lime.Label');
goog.require('rh.house');
// entrypoint
rh.start = function(){

var director = new lime.Director(document.body,1024,768).setDisplayFPS(false),
Game = new lime.Scene(),
menulayer = new lime.Layer().setAnchorPoint(0,0).setPosition(0,568),
menubg = new lime.RoundedRect().setAnchorPoint(0,0).setSize(1024,200).setFill('assets/menubg.png'),
houselbl = new lime.Sprite().setPosition(0, 0).setAnchorPoint(0,0).setFill('assets/storage.png');
flayer = new lime.Layer().setAnchorPoint(0,0).setPosition(0,0).setSize(1024,568),
field = new lime.Sprite().setSize(3000,2500).setAnchorPoint(0,0).setFill('assets/fields.jpg'),
selected_ = -1;

menulayer.appendChild(menubg);
menulayer.appendChild(houselbl);
flayer.appendChild(field);

goog.events.listen(flayer,['mousedown'],function(e){
    if(selected_ == 1){
    var house = new rh.house().setPosition(e.position.x, e.position.y);
    flayer.appendChild(house);
    selected_ = -1;
    houselbl.setFill('assets/storage.png');
    }

    e.startDrag(false, new goog.math.Box(-1932, 0, 0, -1976));      
});

goog.events.listen(houselbl,['mousedown'],function(e){
    selected_ = 1
    houselbl.setFill('assets/storages.png');
});

Game.appendChild(flayer);
Game.appendChild(menulayer);

director.replaceScene(Game);
} 
```

感谢您的阅读。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T09:36:46.563

将 e.event.stopPropagation() 添加到侦听器修复它以阻止它访问其他对象，而不是重叠时指向的对象。

例子：

```
goog.events.listen(houselbl,['mousedown'],function(e){
    e.swallow(['mouseup'],function(){

    if (selected_ !== -1) {
        selected_ = -1;
        houselbl.setFill('assets/storage.png');
    }else{
    selected_ = 1
    houselbl.setFill('assets/storages.png');
    }
    });
e.event.stopPropagation()
}); 
```

# javascript - 关于javascript中的模糊

> ID：12929248
> 
> 赞同：0
> 
> 时间：2012-10-17T07:28:33.237
> 
> 标签：javascript, jquery

我的网页中有四个输入。要求是当用户填写 1 输入时，其值应填写 3 输入，并且 3 输入颜色应变为红色，与第二个输入相同。但是当我们填充 1 个输入时，4 个输入颜色变为红色。

这是一个示例[http://jsfiddle.net/SXzyR/](http://jsfiddle.net/SXzyR/)

```
<head>
<script type="text/javascript" src="jquery-1.7.2.js"></script>    
<script type="text/javascript">

$(function(){       
    $('input').blur(function(){         
        txtval()            
        })      
    })
</script>

<script type="text/javascript">    
function txtval(){      
    document.getElementById('myid3').value = document.getElementById('myid1').value;
    document.getElementById('myid4').value = document.getElementById('myid2').value;

    document.getElementById('myid3').style.color="#ff0000"
    document.getElementById('myid4').style.color="#ff0000"
}
</script>
</head>    
<body>
1
<input type="text" id="myid1" value="Enter name"/>
2
<input type="text" id="myid2" value="Enter name"/>
3
<input type="text" id="myid3" value="Enter name"/>
4
<input type="text" id="myid4" value="Enter name"/>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T07:42:25.810

这是一个简单的解决方案。检查事件触发`id`的元素的`blur`，并更新相应的元素`value`和颜色：

```
$('input').blur(function(){
    if (this.id == 'myid1') {
      $('#myid3').css('color', '#FF0000').val(this.value);  
    } else if (this.id == 'myid2') {
      $('#myid4').css('color', '#FF0000').val(this.value);
    }            
}) 
```

[这是一个小提琴](http://jsfiddle.net/SXzyR/6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T07:34:14.983

因为在所有输入模糊事件上都会调用 txtval() 方法，并且您的方法没有处理任何情况以防止突出显示第二个输入。因此，您的方法中的所有 4 行都已执行，因此第 4 个输入也是彩色的！

这是更新的代码：http: [//jsfiddle.net/SXzyR/](http://jsfiddle.net/SXzyR/)

```
$(function(){

$('#myid1').blur(function(){
    $('myid3').value=$(this).value();
    $('#myid3').css('color','#FF0000') 

    });
$('#myid2').blur(function(){
    $('myid3').value=$(this).value();
    $('#myid4').css('color','#FF0000') 
    });

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T07:36:31.783

像这样更改您的html代码：

```
1
<input type="text" id="myid1" value="Enter name" rel="myid3" />
2
<input type="text" id="myid2" value="Enter name" rel="myid4" />
3
<input type="text" id="myid3" value="Enter name"/>
4
<input type="text" id="myid4" value="Enter name"/> 
```

这是js代码

```
$(function(){

    $('input[rel]').each(function(){
       $(this).blur(function(){
           $("#" + $(this).attr("rel")).val($(this).val()).css('color','#FF0000') ;  
       });        
    });

}) 
```

这是示例[http://jsfiddle.net/SXzyR/2/](http://jsfiddle.net/SXzyR/2/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T07:38:23.360

那是因为你已经添加了事件处理程序，`input`应该在任何/所有的事件上调用.. 你可以做的是`$('input')``textval()``blur``inputs`

1) 传递参数来`textval()`指定要变红的那个。2）您可以将事件处理程序附加到特定`input`以指定`input`需要变为红色的另一个...

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-10-17T07:40:04.460

检查这个jsFiddle ...

[http://jsfiddle.net/SXzyR/8/](http://jsfiddle.net/SXzyR/8/)

问题是因为您的模糊功能适用于所有输入元素.....

修改了一些代码，因此您不必更改或添加任何属性..只需要检查条件

# javascript - 用于 youtube 的 Oembed

> ID：12929249
> 
> 赞同：0
> 
> 时间：2012-10-17T07:28:33.817
> 
> 标签：javascript, api, jquery

我是否需要开发人员的密钥才能在我的网站中使用 oembed for youtube？

问题是以下代码不起作用，它不会返回成功

```
 $.ajax({
                    url: "http://www.youtube.com/oembed?url=http://www.youtube.com/watch?v=PVzljDmoPVs",
                    dataType: "jsonp",
                    timeout: 15000,
                    success: function (jo) {
                        if (jo) {
                            setIMg(jo.thumbnail_url);
                            setTitle(jo.title);
                        }
                    }
                }); 
```

但是当我在浏览器中触发 url 时，它给了我 json：

> `{"provider_url": "http:\/\/www.youtube.com\/", "thumbnail_url": "http:\/\/i1.ytimg.com\/vi\/PVzljDmoPVs\/hqdefault.jpg", "title": "David Guetta - She Wolf (Falling To Pieces) ft. Sia", "html": "\u003ciframe width=\"480\" height=\"270\" src=\"http:\/\/www.youtube.com\/embed\/PVzljDmoPVs?fs=1\u0026feature=oembed\" frameborder=\"0\" allowfullscreen\u003e\u003c\/iframe\u003e", "author_name": "davidguettavevo", "height": 270, "thumbnail_width": 480, "width": 480, "version": "1.0", "author_url": "http:\/\/www.youtube.com\/user\/davidguettavevo", "provider_name": "YouTube", "type": "video", "thumbnail_height": 360}`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T22:45:59.847

首先不，您不需要开发人员密钥即可使用 YouTube 的 oembed 端点。

其次，YouTube 在其 oEmbed 端点上不支持 JSONP，这就是您的呼叫失败的原因。为了修复它，您可以使用第三方 oEmbed 提供商，例如[reEmbed.me](http://reEmbed.me)

这是示例代码：

```
var serviceUrl = "http://reembed.me/api/v1/OEmbed?url=";
var url = "http://www.youtube.com/watch?v=PVzljDmoPVs";
$.getJSON(serviceUrl + encodeURIComponent(url) + "&callback=?", null, function (jo) {
    if (jo) {
        setIMg(jo.thumbnail_url);
        setTitle(jo.title);
    }
}); 
```

请注意，传递的链接是实际的视频 url，而不是 oembed 端点链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-03T20:14:41.880

不，我们不需要任何开发人员密钥来使用任何 oEmbed 提供商的 oEmbed 端点。

[oEmbed](http://oembed.com/)规范支持两种格式，一种是json，另一种是xml。oEmbed 提供者将以任何一种格式提供对 oEmbed api 的响应。

没有像`jsonp`规范那样的格式，这就是为什么您无法从像“youtube”这样的 oEmbed 提供者那里得到正确的响应。`type`使用查询参数调用 url`json`应该会产生预期的结果

```
url: "http://www.youtube.com/oembed?type=json&url=http://www.youtube.com/watch?v=PVzljDmoPVs" 
```

您可以在请求中指定`type`值`json`或`xml`在请求中指定值 - 否则提供者将提供者`json`默认响应。

oEmbed 规范没有提到任何关于 JSONP 支持的内容：所以，我猜 youtube 没有提供对 JSONP 的支持。

无论如何，要访问跨站点资源（CORS - 跨源资源共享），响应标头必须包含`Access-Control-Allow-Origin`我们可以使用的集合，否则我们应该使用`jsonp`youtube 不支持的默认标准。

我希望这个[关于 JSONP 的小技巧](https://cameronspear.com/blog/exactly-what-is-jsonp/)可以解决我们的需求。否则，我们可以使用[yuilibrary](http://yuilibrary.com/yui/docs/io/)等外部库。

# ruby-on-rails - 使用会话存储我的购物车

> ID：12929250
> 
> 赞同：1
> 
> 时间：2012-10-17T07:28:35.263
> 
> 标签：ruby-on-rails, session

我有 2 个模型：

```
Store has_many :dishes

Dish belong_to :store 
```

我使用 session 来存储我的购物车：

```
session[:cart] ||= Cart.new

class Cart
  attr_reader :items, :key_items
  def initialize
    @items = Hash.new
    @key_items = Hash.new
  end

  def add_dish(dish)
    #binding.pry
    if @key_items[dish.store_id].nil?
      @items[dish.store_id] = Array.new
      @key_items[dish.store_id] = dish.store
    end

    current_item = @items[dish.store_id].find{|item| item.dish == dish}

    if current_item
       current_item.increment_quantity
    else
      @items[dish.store_id] << CartItem.new(dish)
    end
  end
end 
```

如果`@key_items[dish.store_id] = dish.store`, session[:cart] 转储将崩溃，如下所示：

```
{"cart"=>
  #<Cart:0x007fa8742deeb0
   @items=
    {1=>
      [#<CartItem:0x007fa8742dedc0
        @dish=
         #<Dish id: 1, store_id: 1, name: "meat", count: 30, remaining_count: 30, price_cents: 1100, price_cents_currency: "CNY", image: nil, description: nil, created_at: "2012-10-11 07:38:26", updated_at: "2012-10-11 07:38:26">,
        @new_record=false>]},
   @quantity=1>,
 :@key_items=>
  {1=>
    #<Store id: 1, name: "ITChef", created_at: "2012-10-11 07:38:26", updated_at: "2012-10-11 07:38:26", start_price_cents: 2500, start_price_cents_currency: "CNY", fare_cents: 800, fare_cents_currency: "CNY">}} 
```

如果`@key_items[dish.store_id] = Store.find_by_id(dish.store_id)`，则转储如下所示：

```
{"cart"=>
  #<Cart:0x007f9ffc2dc780
   @items=
    {1=>
      [#<CartItem:0x007f9ffc2dc6b8
        @dish=
         #<Dish id: 1, store_id: 1, name: "meat", count: 30, remaining_count: 30, price_cents: 1100, price_cents_currency: "CNY", image: nil, description: nil, created_at: "2012-10-11 07:38:26", updated_at: "2012-10-11 07:38:26">,
        @quantity=1>]},
   @key_items=
    {1=>
      #<Store id: 1, name: "IT厨房", created_at: "2012-10-11 07:38:26", updated_at: "2012-10-11 07:38:26", start_price_cents: 2500, start_price_cents_currency: "CNY", fare_cents: 800, fare_cents_currency: "CNY">}>,
 :@stale_state=>nil} 
```

为什么？

我一直在跟踪

```
 39: def set_session(env, session_id, new_session, options)
    40:   with_lock(env, false) do
    41:     @pool.set session_id, new_session, options
 => 42:     session_id
    43:   end
    44: end

[1] pry(#<ActionDispatch::Session::RedisStore>)> new_session
=> {"cart"=>
  #<Cart:0x007fce3f09f3c0
   @items=
    {1=>
      [#<CartItem:0x007fce3f0e1338
        @dish=
         #<Dish id: 2, store_id: 1, name: "糖醋里脊", count: 30, remaining_count: 30, price_cents: 2250, image: nil, description: nil, created_at: "2012-10-17 06:36:59", updated_at: "2012-10-17 06:36:59">,
        @quantity=1>]},
   @key_items=
    {1=>
      #<Store id: 1, name: "it厨房", start_price_cents: 3400, fare_price_cents: 1000, average_time: nil, announcement: nil, image: "it.jpg", is_active: true, created_at: "2012-10-17 06:36:59", updated_at: "2012-10-17 06:36:59">}>,
 "_csrf_token"=>"ZEx7qGOrjq7jra/NtXkm96YCj2DrY1CHkzUHqhvqTns="} 
```

和

```
[2] pry(#<ActionDispatch::Session::RedisStore>)> @pool.get session_id
=> {"cart"=>
  #<Cart:0x007fce3f9e92c8
   @items=
    {1=>
      [#<CartItem:0x007fce3f9e94d0
        @dish=
         #<Dish id: 2, store_id: 1, name: "糖醋里脊", count: 30, remaining_count: 30, price_cents: 2250, image: nil, description: nil, created_at: "2012-10-17 06:36:59", updated_at: "2012-10-17 06:36:59">,
        @quantity=:@new_record>]},
   @key_items=false>,
 1=>
  {1=>
    #<Store id: 1, name: "it厨房", start_price_cents: 3400, fare_price_cents: 1000, average_time: nil, announcement: nil, image: "it.jpg", is_active: true, created_at: "2012-10-17 06:36:59", updated_at: "2012-10-17 06:36:59">}} 
```

所以元帅一定是有些不对劲！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T07:42:22.190

你得到了`ActionController::Session::CookieStore::CookieOverflow`吗？

您可以将有限的数据保存到会话中（最大 3KB），所以我建议不要保存所有对象，而是保存它的主键，即`id`

我的意思是储蓄`1`而不是`#<Dish id: 1, store_id: 1, name: "meat", count: 30, remaining_count: 30, price_cents: 1100, price_cents_currency: "CNY", image: nil, description: nil, created_at: "2012-10-11 07:38:26", updated_at: "2012-10-11 07:38:26">`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T08:28:48.720

原因可能是 disc.store 实际上是 Association 的实例，而不是 Store 的实例。`@stale_state`是关联的变量。

但是，`Store.find_by_id(dish.store_id)`返回一个真实的 Store 对象。

无论如何，将这些数据存储在会话中是一种不好的做法。

# ruby-on-rails - 在 Rails 中使用 Unicorn 的正确方法

> ID：12929251
> 
> 赞同：1
> 
> 时间：2012-10-17T07:28:38.173
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, unicorn

我注意到 Rails 3.2.8 生成的默认 Gemfile 已经注释掉了 unicorn。使用它的预期方式是什么？如果我取消注释

```
gem 'unicorn' 
```

那么调用独角兽的预期方式是什么？命令

```
rails server unicorn 
```

给我一个找不到文件的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T09:38:40.677

`bundle exec unicorn -c #{unicorn_conf} -E #{rails_env} -D`

`unicorn_conf`- 独角兽配置路径
`rails_env`- 轨道环境

您必须将 unicorn 与 nginx 等普通服务器一起使用

# encoding - Vb6 用 base64 编码一个数字

> ID：12929253
> 
> 赞同：0
> 
> 时间：2012-10-17T07:28:49.990
> 
> 标签：encoding, vb6, base64

我正在寻找一个`VB6`具有编码/解码 20 位数字的函数的库，例如：

`00001002201200000001`

我需要它来压缩数字。我发现只有对字符串进行编码的函数，但它的数字会生成更多的字符。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T21:21:13.457

您可以编写自己的 RLE（运行长度编码）算法。只有当您的数据有很多重复字符（如样本中的字符）时，它才会对您有所帮助。本质上，您将一段重复字符替换为控制字符或标志、字符重复次数的计数以及字符本身。您的样本将变为 † `ÿ0ÿ02012ÿ0`。可以在[http://www.andreavb.com/tip030023.html](http://www.andreavb.com/tip030023.html)找到完整的示例模块。

† 编码产生了几个不可打印的字符，所以我无法显示确切的编码字符串。

# android - 如何根据长度包装textview？

> ID：12929254
> 
> 赞同：0
> 
> 时间：2012-10-17T07:28:54.817
> 
> 标签：android, textview

我有一个 Textview，它的长度取决于用户的输入。当我按 ok 计算时，textview 在下面一行。我想要做的是包装 textview 以显示在一行上。到目前为止，我已经这样做了： android:ellipsize="none" android:singleLine="true" 但问题是剩余的文本视图没有出现。有没有办法在文本视图长时包装宽度并在短时扩展它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T07:31:34.200

你可以像这样使用 marquee 进行文本视图

```
<TextView
    android:id="@+id/myTextView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:lines="1"
    android:ellipsize="marquee"
    android:fadingEdge="horizontal"
    android:marqueeRepeatLimit="marquee_forever"
    android:scrollHorizontally="true"
    android:textColor="#ff4500"
    android:text="Simple application that shows how to use marquee, with a long text" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T07:32:08.400

除非您使用选取框，否则您不能在**单行**上显示超过手机屏幕宽度的`TextView`所有内容。作为替代方案，将您的**`TextView``HorizontalScrollView`**

# vba - 如何插入文件名

> ID：12929255
> 
> 赞同：0
> 
> 时间：2012-10-17T07:28:55.937
> 
> 标签：vba, excel

以下代码允许我浏览多个不同的 excel 文件并将它们粘贴到彼此下方的单个工作表中。excel 文件具有相同的列名但其中包含不同的数据并且工作正常，我的问题是我需要它时粘贴一个文件，它必须为它粘贴的每个文件写下该文件的名称。我的excel文件的名称称为**Familycar**，其他excel的文件名称为**smartcar**

**例子**

eg1**车名、燃料、颜色**

宝马，汽油，红色

福特，柴油，绿色

马自达,汽油,灰色

eg2**车名、燃料、颜色**

奥斯汀，汽油，蓝色

大众,柴油,白色

奥迪,汽油,黑色

**结果**

**车名、燃油、颜色、文件名**

宝马,汽油,红色,家用车

福特,柴油,绿色,家用车

马自达,汽油,灰色,家庭车

奥斯汀，汽油，蓝色，智能汽车

大众，柴油，白色，智能汽车

奥迪,汽油,黑色,智能车

```
 Sub Button5_Click()
 Dim fileStr As Variant
 Dim wbk1 As Workbook, wbk2 As Workbook
 Dim ws1 As Worksheet

 fileStr = Application.GetOpenFilename(FileFilter:="microsoft excel files (*.xlsx), *.xlsx", Title:="Get File", MultiSelect:=True)
 Set wbk1 = ActiveWorkbook
 Set ws1 = wbk1.Sheets("Sheet3")

 'handling first file seperately
 MsgBox fileStr(1), , GetFileName(CStr(fileStr(1)))
 Set wbk2 = Workbooks.Open(fileStr(1))
 wbk2.Sheets(1).UsedRange.Copy ws1.Cells(ws1.Range("A" & Rows.Count).End(xlUp).Row + 2, 1)

 wbk2.Close

 For i = 2 To UBound(fileStr)
 MsgBox fileStr(i), , GetFileName(CStr(fileStr(i)))

 Set wbk2 = Workbooks.Open(fileStr(i))

 wbk2.Sheets(1).UsedRange.Offset(1, 0).Copy ws1.Cells(ws1.Range("A" & Rows.Count).End(xlUp).Row + 2, 1)

 wbk2.Close
 Next i 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T07:59:42.747

这是您的代码重构以包含此要求

```
Sub Button5_Click()
    Dim fileStr As Variant
    Dim wbk1 As Workbook, wbk2 As Workbook
    Dim ws1 As Worksheet
    Dim rngSource As Range
    Dim rngDest As Range
    Dim rwOffset As Long
    Dim sFileName As String

    Dim i As Long

    fileStr = Application.GetOpenFilename(FileFilter:="microsoft excel files (*.xlsx), *.xlsx", Title:="Get File", MultiSelect:=True)
    Set wbk1 = ActiveWorkbook
    Set ws1 = wbk1.Sheets("Sheet3")

    For i = 1 To UBound(fileStr)
        MsgBox fileStr(i), , GetFileName(CStr(fileStr(i)))

        ' Used to change copy range for first file, without repeating code
        rwOffset = IIf(i = 1, 0, 1)
        Set wbk2 = Workbooks.Open(fileStr(i))

        ' File Name without extension
        sFileName = Left$(wbk2.Name, InStrRev(fileStr(i), ".") - 1)  

        Set rngSource = wbk2.Sheets(1).UsedRange.Offset(rwOffset, 0)
        Set rngDest = ws1.Cells(ws1.Range("A" & ws1.Rows.Count).End(xlUp).Row + 2, 1)

        rngSource.Copy rngDest

        ' Add filename next to pasted data
        rngDest.Offset(0, rngSource.Columns.Count).Resize(rngSource.Rows.Count, 1) = sFileName
        wbk2.Close
    Next i

End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T07:53:23.693

添加到您的代码

```
' ws1 is the result/output worksheet
' wbk2 is the input workbook I assume
Dim fromRow As Long
Dim toRow As Long
Dim colNum As Long 'please defind the column Number to output the workbook's name
' In your example, it would be 4
colNum = 4
fromRow = ws1.Cells(ws.Rows.Count, 1).End(xlUp).Row + 1
wbk2.Sheets(1).UsedRange.Offset(1, 0).Copy ws1.Cells(ws1.Range("A" & Rows.Count).End(xlUp).Row + 2, 1)
toRow = ws1.Cells(ws.Rows.Count, 1).End(xlUp).Row
ws1.Range(ws1.Cells(fromRow, colNum), ws1.Cells(toRow, colNum)).Value = wbk2.Name 
```

# sql-server - 如何获取特定范围时间戳之间的值

> ID：12929256
> 
> 赞同：-1
> 
> 时间：2012-10-17T07:29:01.050
> 
> 标签：sql-server, range, between, timestamp, datetime2

我在 SQL Server 2008 中有一个名为 ,timestamplog `which contains one column of name LogTime of type`INTEGER的表

值是这样的：

```
1350468610,
1350468000,
1350381600,
1350295810 
```

我需要介于`1350468609`和`1350468001`..之间的值

请告诉我如何查询这些值。

我尝试了以下查询

```
select LogTime 
from timestamplog 
where LogTime between 1350468609 and 1350468001

select LogTime 
from timestamplog 
where LogTime >= '1350468610' and  LogTime <= '1350468000'

select LogTime 
from timestamplog 
where LogTime >= convert(decimal, 1350468610) and LogTime <= convert(decimal,1350468000)

select LogTime 
from timestamplog 
where LogTime >= convert(varchar, 12) and LogTime <= convert(varchar, 14) 
```

但是行不来了...

实际上表中的值是存储在表中的时间戳`INTEGER`值`TIMELOG`

IMP 注意：假设如果像 12,13,14 这样的值进入表，上述查询工作正常。但是当我比较长度为 10 的数字时，查询不会检索任何值

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T07:31:33.113

因为 1350468001 小于 1350468609，所以如果您颠倒顺序，您的任何查询都会起作用。我会去...

```
select LogTime from timestamplog where LogTime between 1350468001 and 1350468609 
```

这是一个包含范围。

# google-apps-script - Google App Script 动态定义的自定义函数

> ID：12929258
> 
> 赞同：7
> 
> 时间：2012-10-17T07:29:08.913
> 
> 标签：google-apps-script, dynamically-generated

如何从`onOpen()`函数代码动态定义电子表格的自定义函数？

*   写个代码...

```
function onOpen() {
  //var s = SoapService.wsdl("http://example.com/service.wsdl", "serv");
  //var funcs = s.getServerFunctions();
  var funcs = { "pow2": "function (v) { return v*v};" }
  for(var f in funcs)
  {
     this[f] = eval(funcs[f]) // define server functions as custom google-script functions for spreadsheet using this[function_name] = eval(function_code)
  }
} 
```

*   尝试`=pow2()`从任何单元格调用（“pow2”是函数名）
*   得到一个错误“#NAME” - 未定义的函数

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T10:33:10.460

GAS 不支持从电子表格调用动态函数。正如我在对@Srik 答案的评论中所写的那样，一种解决方案是使用“静态”调度程序函数，它的第一个参数是动态函数名称，从第二个参数开始是动态函数的参数。在电子表格中，它看起来像`=callFunction("pow2", 3)`或`=callFunction("mul", 3, 1)`。

但是还有另一个问题。似乎 GAS 内部在每次调用脚本函数时都会实例化脚本，这意味着在函数中创建的动态函数`onOpen`将在其他函数中不可见。下面的代码演示了它。包含的单元格包含`=pow2static(3)`错误`error: ReferenceError: "pow2" is not defined. (line XX)`文本。

一种解决方法是在函数中下载动态函数源代码`onOpen`，将其存储在中间存储中 - [Cache](https://developers.google.com/apps-script/class_cacheservice)或[ScriptDB](https://developers.google.com/apps-script/class_scriptdb)或更好的组合`Cache`+ `ScriptDB`，通过中间存储中的名称搜索代码并在“静态”调度中执行它功能。

```
function onOpen() {
  var funcs = { "pow2": "function (v) { return v*v};" }
  for(var f in funcs) {
    this[f] = eval(funcs[f]);
  }
}

function pow2static(val) {
  return pow2(val);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T09:57:07.947

您根本不需要 onOpen 。只需编写您的 pow2() 函数并从任何电子表格中调用它

```
=pow2() 
```

无论如何，每次重新打开电子表格时都会重新计算公式。你的 pow2 函数看起来像

```
function pow2(val){
  var ret = parseInt(val) * parseInt(val); 
  return ret;
} 
```

# c# - 有没有一种情况，我们需要有一个扩展方法，其中一个对象的默认值是被扩展的？

> ID：12929260
> 
> 赞同：2
> 
> 时间：2012-10-17T07:29:10.977
> 
> 标签：c#

有没有一种情况，我们需要有一个扩展方法，其中一个对象的默认值是被扩展的？

例如，

```
public static class util
{
  public static string Foo(this string name="Hello world")
  {
     return name;
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T07:31:25.277

我不确定是否会出现这种情况，但你不能那样做。你会得到一个错误：

> 无法为“this”参数指定默认值

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T07:31:46.183

这不会编译 - 您不能为`this`参数指定默认值。

即使你*可以*，它会让你做的只是调用`util.Foo()`并让它按照默认值行事——我想这可能会派上用场。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T07:50:36.960

您可以使用以下代码获得相同的结果：

```
public static string Foo(this string name)
{
   if (String.IsNullOrWhiteSpace(name))
       return "Hello world";

   return name;
} 
```

我相信在某些情况下您可以应用它。例如，当您将可为空的价格转换为字符串时。

# objective-c - Objective C 的统计库

> ID：12929261
> 
> 赞同：0
> 
> 时间：2012-10-17T07:29:13.450
> 
> 标签：objective-c, statistics, correlation

我知道有很多用于统计计算的 java 包，但在这种情况下，我需要一个用于目标 C 的包。我需要计算 Cramer 的 V [http://en.wikipedia.org/wiki/Cram%C3的应用程序范围%A9r%27s_V](http://en.wikipedia.org/wiki/Cram%C3%A9r%27s_V)一些类的标称属性根据它们的属性。我不想重新发明轮子。我还需要找到线性相关和其他基本操作。

是否有任何已知的开源优秀库用于此类目的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T13:55:55.530

查看 C/C++ 库：[wikipedia list](http://en.wikipedia.org/wiki/List_of_numerical_libraries#C)，[SO question](https://stackoverflow.com/questions/746364/best-library-for-statistics-in-c)。

# html - 使用 XSLT 2.0 对 XML 进行反规范化

> ID：12929272
> 
> 赞同：0
> 
> 时间：2012-10-17T07:29:52.657
> 
> 标签：html, xslt-2.0, denormalization

我正在尝试使用 XSLT 2.0 对 XML 进行非规范化。

下面是 XML 和相同的预期输出。如果有人可以提供 XSLT 来实现这一点，将会有很大的帮助。非规范化应该只适用于以“Change”开头的标签，而不适用于其他标签。其他标签应保持原样。

示例输入 XML

```
<p> This is normal text

            <changebold>This is new line</changebold>

            My Name is

            <table>

                        <tr>

                                    <td>FirstName</td>

                                    <td>LastName</td>

                                    <td>Testing for <changebold>Bold <changeitalic>Italic <changeunderline>UnderLine</changeunderline>

                                                            </changeitalic>

                                                </changebold>

                                    </td>

                        </tr>

            </table>

            <changebold>The Test <changeitalic>of Chemistry<changeunderline>is passed</changeunderline>

                        </changeitalic> and for biology <changeunderline>the result</changeunderline> is unknown <changeunderline> and under process.</changeunderline>

                        <changeitalic>The result</changeitalic> of same<changeunderline>will be</changeunderline> displayed on  <changeitalic>noticeboard soon.</changeitalic>

            </changebold>

            <table>table heading <tr>Row <td>Cell1</td>Row End</tr>Table Heading end. </table>

</p> 
```

上述 XML 的预期输出

```
<p> This is normal text

            <changebold>This is new line</changebold>

            My Name is

            <table>

                        <tr>

                                    <td>FirstName</td>

                                    <td>LastName</td>

                                    <td>Testing for <changebold>Bold </changebold>

                                                <changebold>

                                                            <changeitalic>Italic</changeitalic>

                                                </changebold>

                                                <changebold>

                                                            <changeitalic>

                                                                        <changeunderline>UnderLine</changeunderline>

                                                            </changeitalic>

                                                </changebold>

                                    </td>

                        </tr>

            </table>

            <changebold>The Test </changebold>

            <changebold>

                        <changeitalic>of Chemistry</changeitalic>

            </changebold>

            <changebold>

                        <changeitalic>

                                    <changeunderline>is passed</changeunderline>

                        </changeitalic>

            </changebold>

            <changebold> and for biology </changebold>

            <changebold>

                        <changeunderline>the result</changeunderline>

            </changebold>

            <changebold> is unknown </changebold>

            <changebold>

                        <changeunderline> and under process.</changeunderline>

            </changebold>

            <changebold>

                        <changeitalic>The result</changeitalic>

            </changebold>

            <changebold> of same</changebold>

            <changebold>

                        <changeunderline>will be</changeunderline>

            </changebold>

            <changebold> displayed on  </changebold>

            <changebold>

                        <changeitalic>noticeboard soon.</changeitalic>

            </changebold>

            <table>table heading <tr>Row <td>Cell1</td>Row End</tr>Table Heading end. </table>

</p> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T12:57:39.117

看看这个能够产生所需输出的 ​​XSLT：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:xs="http://www.w3.org/2001/XMLSchema">

  <xsl:output indent="yes"/>
  <xsl:strip-space elements="*"/>
  <xsl:template match="node() | @*">
    <xsl:copy>
      <xsl:apply-templates select="(node() | @*)"/>
    </xsl:copy>
  </xsl:template>

  <!--To check if element starts with change and has some child element with the name of change -->
  <xsl:template
    match="*[starts-with(name(self::*), 'change') and child::*[starts-with(name(self::*), 'change')]]">
    <xsl:call-template name="checkNode">
      <xsl:with-param name="element" select="self::*"/>
    </xsl:call-template>
  </xsl:template>

  <!-- This checkNode is producing almost 90% result but it fails when we have <changebold>Bold <changeitalic>Italic <changeunderline>UnderLine</changeunderline>
  it is producing result like:
  <changebold>
    <changeitalic>Italic </changeitalic>
      <changeitalic>
      <changeunderline>UnderLine</changeunderline>
      </changeitalic>
  </changebold>
  -->
  <xsl:template name="checkNode">
    <xsl:param name="element"/>
    <xsl:param name="nesting">
      <xsl:for-each select="$element/node()">
        <xsl:element name="{self::node()/parent::node()/name()}">
          <xsl:apply-templates select="."/>
        </xsl:element>
      </xsl:for-each>
    </xsl:param>
    <xsl:for-each select="$nesting/child::*">
      <xsl:choose>
        <xsl:when test="count(self::*/child::*) gt 1">
          <xsl:call-template name="getChild">
            <xsl:with-param name="element" select="self::*"/>
          </xsl:call-template>
        </xsl:when>
        <xsl:otherwise>
          <xsl:copy-of select="."/>
        </xsl:otherwise>
      </xsl:choose>
    </xsl:for-each>
  </xsl:template>

  <!-- Here, we are iterating again to get the desired result which was not done by previous 'checkNode' template-->
  <xsl:template name="getChild">
    <xsl:param name="element"/>
    <xsl:param name="start" select="xs:integer(1)"/>
    <xsl:param name="countChild" select="count($element/child::*)"/>
    <xsl:choose>
      <xsl:when test="$start le $countChild">
        <xsl:element name="{self::*/name()}">
          <xsl:copy-of select="child::*[$start]"/>
        </xsl:element>
        <xsl:call-template name="getChild">
          <xsl:with-param name="element" select="$element"/>
          <xsl:with-param name="countChild" select="$countChild"/>
          <xsl:with-param name="start" select="$start + 1"/>
        </xsl:call-template>
      </xsl:when>
    </xsl:choose>
  </xsl:template>

</xsl:stylesheet> 
```

# iphone - sqlite 的性能问题

> ID：12929276
> 
> 赞同：0
> 
> 时间：2012-10-17T07:30:01.720
> 
> 标签：iphone, objective-c, ios, ipad, sqlite

我在我的应用程序中使用 sqlite 作为数据库。我得到了 json 响应，我对其进行了解析，从中创建了模式并保存在数据库中。

现在的问题是：我正在获得数十亿的记录。它降低了性能，因为它消耗了一个 for 循环来分配模式中的 json 数据，而另一个循环保存在数据库中。

我想减少性能问题，并希望将值（相对于键）直接添加到数据库中。有人会指导更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T07:44:00.203

您可以使用线程和操作队列来提高应用程序的性能。以下是 URL 连接保存在操作队列中的一些链接。您可以将您的 JSON 解析和加载方法放在操作队列中。希望这有助于提高性能。

[链接 1](http://www.icodeblog.com/2010/03/04/iphone-coding-turbo-charging-your-apps-with-nsoperation/) [链接 2](http://www.cimgf.com/2008/02/16/cocoa-tutorial-nsoperation-and-nsoperationqueue/)

让我知道它是否有效。

# php - 如何测试 PHP 中定义的动态 URL 参数？

> ID：12929278
> 
> 赞同：0
> 
> 时间：2012-10-17T07:30:20.253
> 
> 标签：php, url, parameters, fpdf, defined

我正在`fpdf`通过 URL 调用文件。对于某些调用，我需要提供特定参数，这些参数仅用于特定调用。我无法更新对 FPDF 文件的所有调用，因此我想在文件内部测试是否存在 URL 参数。

我正在尝试这样：

```
<?php
 require('fpdf.php');
 ini_set('display_errors', 1);
 error_reporting(E_ALL);
 import_request_variables("GP", "rvar_");

 if (isset($rvar_store){
 ... set something
 } 
```

因此 URL 参数`store`将在某些 php 调用上传递，而在其他调用上则没有参数。

以上不起作用（我得到一个空白页）。

**问题**：
如何测试 URL 参数？我需要测试它是否已定义？

**编辑：**
我调用的网址将如下所示：

```
 fpdf/item.php?iln="+ilns+"&sprache="+locale+"&bestellkeys="+bestellkeys; 
```

或者当我有我的规格参数时：

```
 fpdf/bestellung.php?iln="+ilns+"&sprache="+locale+"&bestellkeys="+bestellkeys+"&store=true"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T07:36:45.713

只需使用

```
isset($_GET['your_param']) 
```

在你的情况下可能更像

```
if(isset($_GET['iln'])) {
    // .... set something
}
if(isset($_GET['sprache'])) {
    // .... set something else
} 
```

当然，这将适用于像这样的 URL`http://domain.com/script?iln=someValue`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T07:40:29.447

The use `import_request_variables()` is discouraged; in fact, it will be removed in PHP 5.4; PHP will automatically copy request variables in their respective super globals such as `$_GET` (for variables on the query string) and `$_POST` (for posted content).

To test for the existence of `store=true` in the query string:

```
if (isset($_GET['store']) && 'true' == $_GET['store'])) {
    // store is given and contains 'true'
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T07:36:03.987

如果您的脚本在[http://somehost.com/script.php上可用，并且您通过](http://somehost.com/script.php)[http://somehost.com/script.php?param1=value1¶m2=value2](http://somehost.com/script.php?param1=value1&param2=value2) 调用它，您将在脚本内获得`value1`, . 如果您想知道名为 (script.php) 的脚本的名称或调用该脚本的主机（等等），请尝试. 那是你需要的吗？`value2``$_GET``$_POST`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-17T07:36:30.160

尝试这个：

```
if ($_REQUEST['rvar_store']){
 ... set something
 } 
```

# vba - Excel舍入VBA

> ID：12929279
> 
> 赞同：1
> 
> 时间：2012-10-17T07:30:22.703
> 
> 标签：vba, excel, automation, excel-2007, rounding

我编写了一些 vba 代码，从工作簿中选择一个范围并将其复制到另一个工作簿中的单元格。我的雇主希望第二个工作簿能够自动化，这样就不会出现手动输入的问题。我需要将我的数字四舍五入到最接近的千位，例如，我的数字是-2,218,387，我需要它读取-2,218，但目前它显示为-2,218,000。这完全抛弃了自动化工作簿并给我带来了很多问题。下面是复制范围的代码；

```
Public Sub InvoicedInstallments2()

Dim rng1 As range
Dim rng2 As range

Set rng1 = Workbooks("201209TB.xlsm").Worksheets("excel").range("F295")
Set rng2 = Workbooks("201210DB1.xlsm").Worksheets("UK monthly dashboard").range("AD49")
rng2.Value = rng1.Value

End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T07:39:48.410

我假设您的复制代码类似于

```
rngSource.Copy rngDest 
```

而不是这个，尝试

```
rngDest.Value = Round(rngSource.Value / 1000, 0) 
```

请注意，这将仅复制*值*，即不复制格式

# database - 重新加载页面时数据库不存在。需要帮助

> ID：12929281
> 
> 赞同：1
> 
> 时间：2012-10-17T07:30:31.127
> 
> 标签：database, html, reload, indexeddb

使用 HTML5 代码，我创建了以下数据库，能够对数据库进行创建、添加、删除和打印操作。但是，每次我加载 html 页面时都会创建 ObjectStore，并且在我重新加载页面时不存在存储的附加值。代码有什么问题？请帮忙。谢谢。

```
 <html>
    <title>
    IndexedDB</title>
    <script type="text/javascript">
    var indexedDB = window.indexedDB || window.mozIndexedDB || window.webkitIndexedDB;
    var IDBTransaction = window.IDBTransaction || window.webkitIDBTransaction;
    var db;
    //var test;
    var dbVersion = 1;

    (function () {

    var Cust_Data = [{name: "ABC", email: "abc@gmail.com"}, 
                    {name: "XYZ", email: "xyz@gmail.com"}];

    function initializeDB(){
            alert("At initialize DB function");
            var request = indexedDB.open("Customers",dbVersion);

            request.onerror = function(event){
                write("Database cannot be opened:" + event.target.errorCode);
            };

            request.onsuccess = function(event){
                db = event.target.result;
                if (db.setVersion) {
                    if (db.version != dbVersion) {
                        var req = db.setVersion(dbVersion);
                        req.onerror = db.onerror;
                        req.onsuccess = function () {
                            if(db.objectStoreNames.contains("CustDetails")) {
                                alert("CustDetails store already present!");
                            }
                            else{
                            //alert("Initialize else function");
                            var objectStore = db.createObjectStore("CustDetails",{ Keypath: "AadharNumber", autoIncrement: true });
                            objectStore.createIndex("name", "name",{unique: false});
                            objectStore.createIndex("email", "email",{unique: true});

                            for(i in Cust_Data){
                                objectStore.add(Cust_Data[i]);
                            }
                            }
                        };
                    }
                    else{
                        alert("Not created ObjectStore");   
                    }
                }
            };
    }       

    function contentLoaded(){
        alert("At contentLoaded function");
        initializeDB();
        //db = initializeDB();
        //db = test.indexedDB.db;
        alert("Value of db in contentLoaded function is :" + db);
        var btnAdd = document.getElementById("btnAdd");
        var btnDelete = document.getElementById("btnDelete");
        var btnPrint = document.getElementById("btnPrint");

        btnAdd.addEventListener("click", function(){
                alert("At add function");
                //alert("Value of db in add function is :" + db);
                var name = document.getElementById("txtName").value;
                var email = document.getElementById("txtEmail").value;
                var transaction = db.transaction("CustDetails",IDBTransaction.READ_WRITE);
                //alert("Transaction statement passed");
                var objectStore = transaction.objectStore("CustDetails");
                var request = objectStore.add({name: name, email: email});
                request.onsuccess = function(event){
                alert ( "Added to the database");
                document.getElementById("txtName").value = "";
                document.getElementById("txtEmail").value = "";
            };

        },false);

        btnDelete.addEventListener("click", function(){
            //alert("At Delete function");
            //var AadharNumber = document.getElementById("AadharNumber").value;
            var AadharNumber =  parseInt(document.getElementById("AadharNumber").value);
            var transaction = db.transaction("CustDetails",IDBTransaction.READ_WRITE);
            var objectStore = transaction.objectStore("CustDetails");
            var request = objectStore.delete(AadharNumber);
            request.onsuccess = function(event){
                alert( "Aadhar Number: "+ AadharNumber + " deleted from the database");
            };

        },false);

        btnPrint.addEventListener("click", function () {
                        var output = document.getElementById("printOutput");
                        output.textContent = "";
                        var transaction = db.transaction("CustDetails", IDBTransaction.READ_WRITE);
                        var objectStore = transaction.objectStore("CustDetails");
                        var request = objectStore.openCursor();
                        request.onsuccess = function(event) {  
                            var cursor = event.target.result;  
                            if (cursor) {  
                                output.textContent += "Aadhar Number: " + cursor.key + " is " + cursor.value.name + "";
                                cursor.continue();  

                            }  
                            else {  
                                console.log("No more entries!");  
                            }  
                        };  
                    }, false); 
    }

    window.addEventListener("DOMContentLoaded", contentLoaded, false); 
    }
    )();

    </script>
    <body><center>
    <div id="container">
        <label for="txtName">
        Name:
        </label>
        <input type="text" id="txtName" name="txtName" />
        <br />
        <label for="txtEmail">
        Email:
        </label>
        <input type="text" id="txtEmail" name="txtEmail" />
        <br />
        <input type="button" id="btnAdd" value="Add Record" />
        <br />
        <label for="AadharNumber">
        ID:
        </label>
        <input type="text" id="AadharNumber" name="txtAadharNumber" />
        <input type="button" id="btnDelete" value="Delete Record" />
        <br />
        <input type="button" id="btnPrint" value="Print Records" />
        <br />
        <output id="printOutput" > </output>
    </div>  
    </center>
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T09:29:56.403

使用旧版本的规范 (setVersion) 时，数据库的版本是一个字符串值。这就是每次加载时都会创建对象存储的原因。我会建议你把以下内容：

```
if (db.setVersion) {
    if (parseInt(db.version) != dbVersion) {
        // Create the structure
    }
} 
```

请注意，此实现仅适用于较旧的 Firefox 和 chrome 浏览器。在较新版本的浏览器中，open 方法有一个 onupgradeneeded 回调。有关它的更多信息，请查看[此处](http://www.kristofdegrave.be/2012/01/indexed-db-defining-your-structure-new.html)。

```
function initializeDB(){             
   var request = indexedDB.open("Customers",dbVersion);              
   request.onerror = function(event){ }; 
   request.onsuccess = function(event){ };
   request.onupgradeneeded = function (e){
      if(e.newVersion == dbVersion){
         var db = e.result;
         if(!db.objectStoreNames.contains("CustDetails")) {
             var objectStore = db.createObjectStore("CustDetails",{ Keypath: "AadharNumber", autoIncrement: true });                                     
             objectStore.createIndex("name", "name",{unique: false});                                 
             objectStore.createIndex("email", "email",{unique: true});

             // ....    
         }
      }
   }; 
```

# c# - Onchange 下拉列表，绑定复选框列表而无需页面回发（javascript/webservice）

> ID：12929286
> 
> 赞同：0
> 
> 时间：2012-10-17T07:31:05.777
> 
> 标签：c#, asp.net

我的页面上有一个复选框列表和下拉列表，复选框列表的填充取决于下拉列表中的选定值。就我使用下拉菜单的服务器端事件 OnSelectedIndexChange 而言，它工作正常-

```
protected void ddlCtype_OnSelectedIndexChanged(object sender, EventArgs e)
{
    sdsMultipleCategory.DataBind(); //sqldatabase of chklist 
    CheckBoxList chklist = (CheckBoxList)fvCompany.FindControl("chklist");
    chklist.DataBind();
} 
```

问题在于它的服务器端事件它回发我的页面，有没有办法在没有页面回发的情况下执行相同的功能，例如 ajax 中的级联下拉列表。是否可以使用 webservice、pagemethod 或 javascript？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T07:53:45.207

```
> Problem with this is as its server side event it postback my page 
```

这是一个真正的问题吗？如果是这样，请使用 UpdatePanel 仅更新 chklist。

# ios6 - iOS中的方向

> ID：12929289
> 
> 赞同：1
> 
> 时间：2012-10-17T07:31:23.110
> 
> 标签：ios6, frame, orientation-changes, ios5

我是新手。我想知道如何在 iOS 中实现方向。现在iOS5（及以下）和iOS6使用的方法不同。

4种类型（PortraitUpsideDown，Portrait，Landscape left，Landscape right）中所有对象的框架是否应该设置不同？

我试过

```
-(BOOL)shouldAutoRotate
{
return YES;
} 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T12:21:56.473

这是帮助我的代码。感谢你的帮助。

```
- (BOOL) shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
     //Only iOS5 and below
     return YES;
}

- (BOOL)shouldAutorotate {
     //Only iOS6
     return YES;
}

- (NSUInteger)supportedInterfaceOrientations {
     //Only iOS6
     return UIInterfaceOrientationMaskAll;

}

-(void)willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration {

     //iOS6 and below

     if(toInterfaceOrientation == UIInterfaceOrientationLandscapeLeft || toInterfaceOrientation == UIInterfaceOrientationLandscapeRight ) {
          [self landscapeView];

     }
     else {
           [self portraitView];
    }   
}

-(void) portraitView {
//Set the portrait frames here.
}

-(void) landscapeView {
//Set the landscape frames here.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T07:39:06.650

你能更清楚一点吗？您是否要允许某些视图而不是其他视图的方向更改？如果您想在 iOS6 中允许所有旋转，只需在每个 viewController 中为下面的函数返回 yes

```
-(BOOL)shouldAutoRotate
{
return YES;
} 
```

现在 iOS6 中不推荐使用 shouldAutoRotateToInterfaceOrientation 方法。

此外，如果您想在某个方向锁定某些视图控制器，请覆盖下面的方法。

```
-(NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationPortrait;//whichever
} 
```

如果您想在某些视图控制器中允许方向更改，但在其他视图控制器中不允许，您需要在每个基类和继承类中覆盖这些方法。如果您想收到有关方向更改的通知，然后手动触发视图更改，您还可以选择使用 NSNotificationCenter。让我知道您是否想详细了解如何做到这一点。

希望能帮助到你！

# django - 在 django-social-auth 中使用 get_user_details

> ID：12929301
> 
> 赞同：1
> 
> 时间：2012-10-17T07:31:48.740
> 
> 标签：django, django-socialauth

我正在尝试使用 django-social-auth 来允许我的用户使用 Facebook 登录网站。我想保存用户的名字和姓氏以及电子邮件。但是，使用文档中的设置，它会保存用户名、电子邮件和身份验证令牌，但由于某种原因，它不会保存名字和姓氏。查看代码，FacebookBackend 类提供了函数 get_user_details 但我不确定如何使用它。似乎应该有一种简单的方法来获取这些信息。如果没有，总是[可以选择添加额外的管道](http://tryolabs.com/Blog/2012/02/13/get-user-data-using-django-social-auth/)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T08:40:23.337

默认管道已经检索了名字和姓氏。facebook 后端调用[get_user_details](https://github.com/omab/django-social-auth/blob/v0.7.7/social_auth/backends/facebook.py)（第 47 行）来设置名字和姓氏。

默认管道甚至通过在每次成功登录时再次调用该方法来更新这些详细信息。可以通过编写自己的管道来关闭此行为，不包括：

```
'social_auth.backends.pipeline.user.update_user_details' 
```

所以要么你的 facebook 用户没有设置名字和姓氏，要么你的设置可能是错误的，你运行的是哪个版本？

# sql - 有什么方法可以加快这个 CTE？

> ID：12929302
> 
> 赞同：0
> 
> 时间：2012-10-17T07:31:51.413
> 
> 标签：sql, sql-server, sql-server-2008

此查询需要 5 秒：

```
With cte as 
(
    Select  ROW_NUMBER() OVER (Order By dbo.GetLatestStatusDateTime(d.DocumentID)) peta_rn, d.DocumentID, d.IsReEfiled, d.IGroupID, d.ITypeID, d.RecordingDateTime,
        d.IDate, d.InstrumentID, d.DocumentStatusID, u.Username, j.JDAbbreviation, inf.DocumentName,  dbo.GetLatestStatusDateTime(d.DocumentID) as LatestStatusDatetime,
        it.Abbreviation as ITypeAbbreviation, d.DocumentDate, ds.Abbreviation as DocumentStatusAbbreviation 
                From Documents d Left Join IGroupes ig On d.IGroupID = ig.IGroupID 
                Left Join ITypes it On d.ITypeID = it.ITypeID 
                Left Join Users u On u.UserID = d.UserID 
                Left Join DocumentStatuses ds On d.DocumentStatusID = ds.DocumentStatusID 
                Left Join InstrumentFiles inf On d.DocumentID = inf.DocumentID 
                Left Join Jurisdictions j on j.JurisdictionID = d.JurisdictionID Where 1 = 1  And d.JurisdictionID = 1
)
Select  * from cte
                Where 1 = 1 
                And peta_rn>92000 AND peta_rn<=92100 
```

虽然这是一个静态查询，但它是动态的，因为`Order By`in`Row_Number()`将基于用户选择的内容。例如。目前是，`dbo.GetLatestStatusDateTime(d.DocumentID)`但它也可以是其他任何东西。因此，此查询将使用 if 和 then 在代码中生成。无论如何，您能在我的查询中发现任何错误吗？为什么仅仅 100 条记录需要 5 秒？我已经看到 SQL Server 扩展到数百万条记录，这只是百万的 1/10，我正遭受瓶颈:(

**编辑：大幅改进**

将查询更改为：

```
With cte as 
(

        Select  ROW_NUMBER() OVER (Order By d.DocumentID) peta_rn, d.DocumentID
                From Documents d Left Join IGroupes ig On d.IGroupID = ig.IGroupID 
                Left Join ITypes it On d.ITypeID = it.ITypeID 
                Left Join Users u On u.UserID = d.UserID 
                Left Join DocumentStatuses ds On d.DocumentStatusID = ds.DocumentStatusID 
                Left Join InstrumentFiles inf On d.DocumentID = inf.DocumentID 
                Left Join Jurisdictions j on j.JurisdictionID = d.JurisdictionID Where 1 = 1  And d.JurisdictionID = 1
)
Select  d.DocumentID, d.IsReEfiled, d.IGroupID, d.ITypeID, d.RecordingDateTime,
        d.IDate, d.InstrumentID, d.DocumentStatusID, u.Username, j.JDAbbreviation, inf.DocumentName, 
        it.Abbreviation as ITypeAbbreviation, d.DocumentDate, ds.Abbreviation as DocumentStatusAbbreviation 
                From Documents d Left Join IGroupes ig On d.IGroupID = ig.IGroupID 
                Left Join ITypes it On d.ITypeID = it.ITypeID 
                Left Join Users u On u.UserID = d.UserID 
                Left Join DocumentStatuses ds On d.DocumentStatusID = ds.DocumentStatusID 
                Left Join InstrumentFiles inf On d.DocumentID = inf.DocumentID 
                Left Join Jurisdictions j on j.JurisdictionID = d.JurisdictionID
                Inner Join cte On cte.DocumentID = d.DocumentID
                And peta_rn>92000 AND peta_rn<=92100 
```

在 1 秒内执行查询。但我仍然觉得 1 秒对于 100 条记录来说太大了。请问还有其他优化吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T08:57:28.097

试试这个。在不知道表关系并且无法对其进行测试的情况下编辑大量代码。我希望这有帮助。

```
With d as 
(
  Select ROW_NUMBER() OVER (Order By d.DocumentID) peta_rn, 
  DocumentID, IsReEfiled, IGroupID, ITypeID, RecordingDateTime,
  IDate, InstrumentID, DocumentStatusID, JurisdictionID, UserID
  from Documents
)
Select  d.DocumentID, d.IsReEfiled, d.IGroupID, d.ITypeID, d.RecordingDateTime,
d.IDate, d.InstrumentID, d.DocumentStatusID, u.Username, j.JDAbbreviation, inf.DocumentName, 
it.Abbreviation as ITypeAbbreviation, d.DocumentDate, ds.Abbreviation as DocumentStatusAbbreviation 
From d Left Join IGroupes ig On d.IGroupID = ig.IGroupID 
Left Join ITypes it On d.ITypeID = it.ITypeID 
Left Join Users u On u.UserID = d.UserID 
Left Join DocumentStatuses ds On d.DocumentStatusID = ds.DocumentStatusID 
Left Join InstrumentFiles inf On d.DocumentID = inf.DocumentID 
Left Join Jurisdictions j on j.JurisdictionID = d.JurisdictionID
where
d.peta_rn>92000 AND d.peta_rn<=92100 
```

# python - 匹配浮点数的 Python 正则表达式

> ID：12929308
> 
> 赞同：7
> 
> 时间：2012-10-17T07:32:09.773
> 
> 标签：python, regex, floating-point

> **可能重复：**
> [如何使用正则表达式检测浮点数](https://stackoverflow.com/questions/2293780/how-to-detect-a-floating-point-number-using-a-regular-expression)

如何编写匹配浮点数字符串表示的 Python 正则表达式？

`float`表达式应匹配构造函数接受的任何字符串，如`float('3.5')`. 因此表达式应该匹配`'0.'`，`'.0'`但不匹配`'.'`

无需匹配无穷大和 NaN 的字符串表示。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-17T07:32:09.773

```
r'[+-]?(\d+(\.\d*)?|\.\d+)([eE][+-]?\d+)?' 
```

# jquery-mobile - Google Transit API 巴士在路线不可见且地图上已禁用

> ID：12929309
> 
> 赞同：5
> 
> 时间：2012-10-17T07:32:10.020
> 
> 标签：jquery-mobile, google-maps-api-3, google-api

虽然当我进入谷歌地图时城市有公共汽车站，但我无法通过点击公共汽车站获取信息，但我自己实施它是行不通的。他们被禁用。我遇到了与另一篇帖子类似的问题： [在 Google 地图中启用可点击的巴士站图标](https://stackoverflow.com/questions/11920059/enable-bus-stop-icons-clickable-in-google-maps)

此外，当我创建路线时，我的起点和终点之间的停靠点不会出现，这些白点是不可见的，但如果我单击面板中的说明，此窗口将打开并显示所需信息。

我已经尝试过放置传输层，但我的 jQuery Mobile 应用程序中没有出现任何内容。

![在此处输入图像描述](../Images/72b200cd50db990e610ea83962911e04.png)

有什么想法可以完成这项工作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-02T23:12:03.150

您无法从普通 map.google.com 拥有的 API 中获得交互功能。使用运输层可以直观地显示运输系统，但在这个问题上有一个开放的错误票：[https](https://code.google.com/p/gmaps-api-issues/issues/detail?id=145) ://code.google.com/p/gmaps-api-issues/issues/detail?id=145 。

即使在伦敦公交层的官方 Maps api 代码演示中，公交图标也是非交互式的，而在 map.google.com 上它们是可点击的：[https ://developers.google.com/maps/documentation/javascript/示例/层传输](https://developers.google.com/maps/documentation/javascript/examples/layer-transit)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T08:37:20.510

我找到了部分解决方案。我看不到路线中的白点，因为当我创建方向显示时，我正在抑制标记以获取我的自定义标记，而不是通常的谷歌地图标记。但我也在压制我需要的中间点！

而不是这个：

```
 directionsDisplay = new google.maps.DirectionsRenderer({suppressMarkers: true}); 
```

我为此更改了它：

```
 directionsDisplay = new google.maps.DirectionsRenderer(); 
```

所以现在我可以看到这些点： ![在此处输入图像描述](../Images/81eefdc0e16587e3f626babd3da9e938.png)

单击图标时，我仍然无法获取公交车站信息

# freemarker - 在freemarker中

> ID：12929312
> 
> 赞同：12
> 
> 时间：2012-10-17T07:32:19.103
> 
> 标签：freemarker

是否可以在 freemarker 中有 and(&&) 或者我必须使用嵌套的 if？

```
<#if object?exists >

</#if> 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-10-17T07:35:01.457

您可以在 free maker 中使用 && 作为逻辑运算符。请参阅[逻辑运算](http://freemarker.sourceforge.net/docs/dgui_template_exp.html#dgui_template_exp_logicalop)

例如

```
<#if x < 12 && color = "green">
  We have less than 12 things, and they are green.
</#if>
<#if !hot> <#-- here hot must be a boolean -->
  It's not hot.
</#if> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-06-01T10:41:12.317

您可以使用 OR 逻辑运算符

<#if color == "蓝色" || color == "green"> 我们有不到 12 个东西，它们是绿色的。

# html - 使用sed根据多个参数从html中提取整数

> ID：12929316
> 
> 赞同：1
> 
> 时间：2012-10-17T07:32:30.300
> 
> 标签：html, bash, parsing, sed

首先，让我这样说：
我知道 regx'ing html 被认为是一种不好的方法，但是如果chuck norris 可以，为什么我不能呢？;)
我想解析这个 html 页面： http: [//pastebin.com/unAifctF](http://pastebin.com/unAifctF)
基于三个参数。我试过了：（谢谢pixellany）

```
sed -n  '/hebrew/{/DESPiTE/s/downloadsubtitle.php?id=/XXX/1};s/.*XXX\([0-9]*\).*/\1/p' 
```

它返回 228344 而不是 228338
我试过了：（谢谢 doubleDown）

```
sed -nr 's/.*downloadsubtitle.php\?id\=([0-9]+).*hebrew.*DESPiTE.*/\1/p' 
```

返回 228343 而不是 228338 预期结果是 228338 因为它是第一个数字，前面是“downloadsubtitle.php\?id\=”，后面是“hebrew”和“DESPiTE”
我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T10:00:53.183

Perl 解决方案：

```
perl -nE '
    @fields = split /downloadsubtitle\.php\?id=([0-9]+)/;
    for (1 .. $#fields) {
        next unless $_ % 2;
        say $fields[$_] if $fields[$_ + 1] =~ /hebrew.*DESPiTE/;
    }
' unAifctF.html 
```

它是如何工作的？它在 上分割一条线`downloadsubtitle.php?id=XXX`，同时保持中间的数字。然后，它打印一个数字，如果它后面的字符串直到下一个`downloadsubtitle...`包含`hebrew`后跟`DESPiTE`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T13:13:45.663

这可能对您有用（GNU sed）：

```
sed -n '/[\x00\x01\x02]/q1;/hebrew/!b;s//\x01/;/DESPiTE/!b;s//\x02/;/downloadsubtitle.php?id=/!b;s//\x00/;s/.*\x00\([0-9]\+\)[^\x00\x01\x02]*\x01[^\x00\x01\x02]*\x02.*/\1/p' file 
```

解释：

*   `/[\x00\x01\x02]/q1`检查该行是否包含分隔符，如果是，则使用错误代码中止`1`
*   `/hebrew/!b;s//\x01/`检查行是否包含`hebrew`，如果不是 bail out，如果是，则将单词`hebrew`转换为单个字符`\x01`
*   `/DESPiTE/!b;s//\x02/`检查行是否包含`DESPiTE`，如果不是 bail out，如果是，则将单词`DESPiTE`转换为单个字符`\x02`
*   `/downloadsubtitle.php?id=/!b;s//\x00/`检查行是否包含`downloadsubtitle.php?id=`，如果不是 bail out，如果是，则将单词`downloadsubtitle.php?id=`转换为单个字符`\x00`
*   `s/.*\x00\([0-9]\+\)[^\x00\x01\x02]*\x01[^\x00\x01\x02]*\x02.*/\1/p`打印出所需的号码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T11:51:56.820

问题是`*`一个贪婪的运算符，所以它会尽可能多地匹配，导致它不是在第一个可能的匹配上停止，而是在最后一个可能的匹配上停止。因此，您可能应该更改它尝试匹配的内容。问题是您希望它匹配除另一个“downloadsubtitle.php?id=”之外的任何内容，这在`sed`. 您可以创建一个更复杂的 sed 脚本，也可以使用一个简单的解决方法，假设`?`链接和标题之间没有任何 s =)

```
sed -nr 's/.*downloadsubtitle.php\?id\=([0-9]+)[^?]*hebrew[^?]*DESPiTE.*/\1/p' 
```

如果你想要一个合适的脚本：

```
#!/bin/sed -nf

: next
$! { N; b next }
s/\n//g

s/downloadsubtitle\.php?id=\([0-9][0-9]*\)/\
\1/

: loop
s/^[^\n]*\n//

h
s/\([0-9]*\).*/\1/
x

s/downloadsubtitle\.php?id=\([0-9][0-9]*\)/\
\1/
/^[^\n]*hebrew[^\n]*DESPiTE/ { g; p; q }
/^[0-9]*/ b loop 
```

该脚本首先将整个文件加载到模式空间（即工作缓冲区）中。它在前两行中执行此操作。第一行声明了一个`next`用`:`“命令”调用的标签。第二行使用命令将输入​​的下一行附加到模式空间中`N`，然后跳回`next`标签，但这两个命令只有在我们还没有读到最后一行的情况下才会执行。第三行删除所有换行符。

现在，我们将第一次出现的 替换`downloadsubtitle\.php?id=[0-9][0-9]*`为换行符（由反斜杠后跟一个实际的换行符表示）和 ID 号。

创建了一个新标签`loop`，我们在它之后做的第一件事就是删除第一个换行符之前的所有内容（因此我们删除了 id 之前的所有内容）。

现在我们有一系列命令可以提取数字并将其存储到保持空间（辅助缓冲区）中。我们首先使用命令将整个模式空间复制到保持空间中`h`，然后删除数字后面的所有内容，然后将保持和模式空间的内容与`x`. 现在保持空间包含数字，并且模式空间恢复到它的值。

为了防止贪婪搜索，我们将在下一次出现之前放置一个换行符`downloadsubtitle\.php?id=[0-9][0-9]*`。我们也可以只留下 ID 号，因为换行符将表明我们找到了字符串的其余部分。

现在是搜索部分。回顾一下，我们在保持空间中有实际的 ID，模式空间的第一行是我们要搜索文本的地方。因此，我们使用搜索表达式，从缓冲区的开头开始搜索字符串`hebrew`，`DESPiTE`并且这些字符串没有相互分隔，也没有从缓冲区的开头用换行符分隔。因此，我们只搜索了第一行。

如果找到匹配项，我们使用`g`从保留空间中获取 ID，`p`打印它，然后`q`退出。

如果我们没有找到匹配项，我们只需跳回`loop`标签，并搜索下一个出现。跳转前的条件是防止死循环。如果没有什么可搜索的，它就会退出。

希望这会有所帮助=)

# c# - 如何获取数据计数并使用 SQL 对其进行分类？

> ID：12929318
> 
> 赞同：1
> 
> 时间：2012-10-17T07:32:41.860
> 
> 标签：c#, asp.net, sql, visual-studio-2010, gridview

我有一个数据库如下：

> ![在此处输入图像描述](../Images/a664a012c81ef933c60e349b4d70f2ff.png)

现在我想获得`COUNT`分类为小于或大于 5 s 和`GROUP BY` `Name`. 然后我需要在gridview中显示数据。

任何人都可以告诉我 SQL 命令或任何其他方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T07:37:07.023

```
SELECT Name, COUNT(Time) 
FROM MyTable 
GROUP BY Name
HAVING COUNT(Time) > 5 OR COUNT(Time) < 5 
```

或者

```
SELECT Name, COUNT(Time) 
FROM MyTable 
GROUP BY Name    
HAVING COUNT(Time) <> 5 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T07:40:09.927

```
select Name, COUNT(Time) 
FROM Table 
GROUP BY Name 
having  COUNT(Time) <>5 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-17T07:44:25.633

我想你要求的是...

```
SELECT Name, case when time<5 then 'less' else '5 or over' end, COUNT(*)  
FROM yourtable
GROUP BY Name , case when time<5 then 'less' else '5 or over' end 
```

或作为列

```
select name, 
    SUM(case when time<5 then 1 else 0 end) as unders, 
    SUM(case when time>=5 then 1 else 0 end) as overs
from yourtable
group by name 
```

# django - django is_valid() 抛出数据库错误

> ID：12929327
> 
> 赞同：0
> 
> 时间：2012-10-17T07:33:18.683
> 
> 标签：django, django-forms, django-orm

我的 is_valid() 函数引发数据库错误。我正在使用别名数据库（不是默认数据库），因此无法验证我的表单。我的应用程序表在 database2 中。代码：

设置.py

```
DATABASES = {
      default:{
                 database1
       }
      'database2':{
                  database2
       }
} 
```

模型.py

```
class Application(models.Model)
            application_name = models.CharField(max_length=48,primary_key=True )
            application_version = models.DecimalField(max_digits=3,decimal_places=0,blank=False,null=False) 
```

表格.py

```
class Application_form(forms.ModelForm):
    def __init__(self,*args, **kwargs):

        super(Application_form,self).__init__(*args, **kwargs)

class Meta:
    model = Application 
```

视图.py

```
Application_Form=Application_form(request.POST)    
       if Application_Form.is_valid():
           print "true"
       else:
           print "false" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T07:43:56.757

```
class Application_form(forms.ModelForm):
    def __init__(self,*args, **kwargs):

        super(Application_form,self).__init__(*args, **kwargs)
        self.queryset = Application.objects.using('database2')

    class Meta:
        model = Application 
```

[链接到文档](https://docs.djangoproject.com/en/dev/topics/db/multi-db/#manually-selecting-a-database-for-a-queryset)

# c++ - 创建 AVPacket 结构的副本

> ID：12929330
> 
> 赞同：2
> 
> 时间：2012-10-17T07:33:29.087
> 
> 标签：c++, libavcodec

我想制作一个 AVPacket 的副本，以便以后可以在我喜欢的时候对其进行解码。

AVPacket 来自音频流。

av_dup_packet 似乎不起作用。

AVPacket 复制构造函数不起作用。

创建我自己的复制构造函数会导致内存损坏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T07:33:29.087

一种复制 AVPacket 结构的方法：（有效）

```
AVPacket newPacket(oldPacket);
newPacket->data = reinterpret_cast<uint8_t*>(new uint64_t[(oldPacket->size + FF_INPUT_BUFFER_PADDING_SIZE)/sizeof(uint64_t) + 1]);
memcpy(newPacket->data, oldPacket->data, oldPacket->size); 
```

原因是某些解码器使用需要某些字节对齐和填充的优化。简单地分配 oldPacket->size 并没有分配足够的空间，也没有以正确的字节对齐方式分配。

请注意，这可能不适用于所有情况，例如，如果 priv 设置为有趣的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-05-04T13:34:22.757

```
 AVPacket *newpacket = (AVPacket*)malloc(sizeof(struct AVPacket));
        av_init_packet(newpacket);
        av_packet_ref(newpacket, packet);

        av_packet_unref(packet);
        free(packet);
        packet = nil; 
```

由于函数 av_dup_packet 从 2015 年 10 月 [094952](http://ffmpeg.org/pipermail/ffmpeg-cvslog/2015-October/094952.html)起已弃用， 因此最好使用 av_packet_ref / av_packet_unref。新数据包应分配内存并在使用 av_init_packet 启动后

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-06-03T09:05:54.140

我一直在使用这种方法：

```
AVPacket *clonedPacket = av_packet_clone(sourcePacket)
/* use clonedPacket */
av_packet_freee(&clonedPacket) 
```

# java - Java JMX 获取登录用户

> ID：12929335
> 
> 赞同：2
> 
> 时间：2012-10-17T07:33:47.837
> 
> 标签：java, spring, security, jmx

我有一个由 JVM 进程启动的 JMX 服务器，可以选择保护它（现在它不是，所以我准备考虑任何可扩展的方式）。例如，作为一个选项，我查看了[官方教程](http://docs.oracle.com/javase/6/docs/technotes/guides/management/agent.html)，现在可以使用用户/密码身份验证。MBean 通过 spring 部署（使用注释方法）。

现在我想**从**我的 MBean 中获取一些附加操作的用户名。完全可以用 JMX 技术来做吗？如果是怎么办？:)

例子：

```
public class MyMBean {

    public void myOp() {

        String userName = ... ?;  // or whatever object that can bring me the name

        makeSomethingWithUserName ( userName );

        doMyStuffHere();
    }
} 
```

我找到[了本教程](http://www.java.net/node/680707)，但它似乎是 glassfish 特定的，我正在寻找基于 java 的简单解决方案。

非常感谢，祝你有美好的一天

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T08:46:07.303

这应该有效，但只有在用户通过身份验证时才会填写主题。本地 JMX 连接将给出一个空的主题！

```
private String getUserName() {
    AccessControlContext acc = AccessController.getContext();
    Subject subject = Subject.getSubject(acc);
    if (subject != null)  {
    Set<JMXPrincipal> principals = subject.getPrincipals(JMXPrincipal.class);
    JMXPrincipal principal = principals.iterator().next();
    return principal.getName();
    }
    return "";
} 
```

# asp.net - 在组合框的“InvokeCommandAction”类型中找不到属性“命令”

> ID：12929336
> 
> 赞同：0
> 
> 时间：2012-10-17T07:33:50.647
> 
> 标签：asp.net, silverlight, mvvm

我在 silverlight mvvm 中有一个组合框。我需要为组合框名称“SelectionChanged”编写事件。我在下面创建了编码，但它给出了一个错误。“在'InvokeCommandAction'类型中找不到属性'命令'”

注意：我没有使用 Silverlight Light。我正在使用 Silverlight5 及其一个 silverlight 应用程序。

```
<ComboBox x:Name="myComboBox" Width="150" ItemsSource="{Binding Items}" >
                                    <ComboBox.ItemTemplate>
                                        <DataTemplate>
                                            <StackPanel>
                                                <TextBlock Text="{Binding Name}"/>
                                            </StackPanel>
                                        </DataTemplate>
                                    </ComboBox.ItemTemplate>
                                    <i:Interaction.Triggers>
                                        <i:EventTrigger EventName="SelectionChanged">
                                            <i:InvokeCommandAction Command="{Binding LoadCommand}" CommandParameter="{Binding SelectedItem, ElementName=myComboBox}" />
                                        </i:EventTrigger>
                                    </i:Interaction.Triggers>
                                </ComboBox> 
```

这一行错误来了。

```
<i:InvokeCommandAction Command="{Binding LoadCommand}" CommandParameter="{Binding SelectedItem, ElementName=myComboBox}" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T20:52:36.050

似乎为我工作。确保您：

1.  [从此处](http://www.microsoft.com/en-us/download/details.aspx?id=9503)安装适用于 SL5 的 Blend Preview
2.  参考`System.Windows.Interactivity`并`Microsoft.Expression.Interactions`在您的 Silverlight 项目中
3.  在 XAML 中定义正确的命名空间：`xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T04:48:36.673

嗨，最后我找到了解决方案。我在 XAML 页面中包含以下内容：

```
 xmlns:i="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity"
             xmlns:si="clr-namespace:Expression.Samples.Interactivity;assembly=Expression.Samples.Interactivity" 
```

那么组合框的代码是：

```
<ComboBox ItemsSource="{Binding Employees,Mode=TwoWay}"  DisplayMemberPath="Dept" SelectedItem="{Binding Names, Mode=TwoWay}" Margin="130,117,0,0" Height="26" VerticalAlignment="Top" HorizontalAlignment="Left" Width="120">
            <i:Interaction.Triggers>
                <i:EventTrigger EventName="SelectionChanged">
                    <si:CallDataMethod Method="AddEmployee"/>
                    <si:SetProperty TargetName="LayoutRoot" PropertyName="Background" Value="PaleGoldenrod"/>
                </i:EventTrigger>
            </i:Interaction.Triggers>
        </ComboBox> 
```

这里的员工就像一个数据源，用于获取 Observable Collections 中的所有员工。该代码写在 Employee.cs 文件中。

然后我们访问 ComboboxSelected 事件如下。转到 ViewModel 文件夹并编写如下命名的函数，

```
public void AddEmployee()
{
//Your Code....
} 
```

快乐编码...！

# php - 查询取消剩余查询

> ID：12929344
> 
> 赞同：0
> 
> 时间：2012-10-17T07:34:18.413
> 
> 标签：php, mysqli

我在用户个人资料中有一个链接，可将他们带到他们的博客，但在此字符串之后，它不再显示任何其他与 SQL 相关的数据。有谁知道为什么会发生这种情况？

```
 <?php
                $query = "SELECT nicename FROM user WHERE username='$_SESSION[admin_login]'";
$result = mysqli_query($link, $query);
$row = mysqli_fetch_array($result, MYSQLI_ASSOC);
    $link = "<a href='blogs.php?user=" . $row['nicename'] . "'>My Blog</a>";
    echo $link;
mysqli_free_result($result);
      ?> 
```

删除了不需要的 While 和 Posted Next SQL Query。

```
 <?php
$query = "SELECT header FROM pages WHERE name='Index'";
$result = mysqli_query($link, $query);
$row = mysqli_fetch_array($result, MYSQLI_ASSOC);
echo $row['header'];
mysqli_free_result($result);
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T08:02:32.983

```
$link = "<a href='blogs.php?user=" . $row['nicename'] . "'>My Blog</a>";
...
$result = mysqli_query($link, $query); 
```

似乎您正在`$link`使用字符串覆盖，因此在您下次调用时`mysqli_query`将字符串作为第一个参数而不是`mysqli`实例传递。

# eclipse - 无法查看 JRebel 配置中心

> ID：12929363
> 
> 赞同：1
> 
> 时间：2012-10-17T07:35:12.377
> 
> 标签：eclipse, jrebel

我使用 JRebel 和 Eclipse Juno 有一段时间了，但现在它似乎坏了。如果我尝试打开 JRebel 配置中心或与 JRebel 相关的任何其他视图，我只会得到：*“JRebel 配置中心视图只能在 JRebel 配置中心透视图中打开！”*

我不知道这是否相关，但我的许可证上周过时了，几天前我用新的许可证文件替换了旧的许可证文件。我知道它在我更新许可证之前有效，但我不知道它之后是否有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T13:51:36.853

仍然不确定问题是什么。但在第二次从市场上卸载/重新安装后，问题消失了，一切又恢复了正常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T10:23:53.983

您有两种进入配置中心的选择：

*   帮助 -> JRebel 配置中心
*   打开透视图 -> JRebel 配置中心

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T11:25:02.360

请您尝试下面提到的两个选项并让我知道您是否能够查看配置中心？

1] Windows->首选项->JRebel->Jrebel 配置中心

2] Windows->显示视图->其他->Jrebel 配置中心

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-03T12:26:02.090

在收到有问题的错误后，我可以通过将 Jrebel 配置中心重置为默认设置、关闭并再次打开它来取回 Jrebel 配置中心。

# erlang - 从 .ERL 调用函数到 .YAWS 文件

> ID：12929372
> 
> 赞同：6
> 
> 时间：2012-10-17T07:35:46.260
> 
> 标签：erlang, yaws

我对 YAWS 和 ERLANG 很陌生，想从不同的 .erl 文件调用一个函数到 YAWS 页面。

即我有一个名为webpage.yaws 的页面，并有另一个名为utilities.erl 的文件，并且想从webpage.yaws 中的utilities.erl 调用一个函数

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-17T09:15:25.437

非常简单，只需像通常在 Erlang 程序中那样调用函数即可，即`Module:func_name(arguments)`您唯一需要做的就是确保 Yaws 知道在哪里可以找到编译后的 BEAM 文件。在 Yaws 配置文件中添加：

```
ebin_dir = /tmp/ebin 
```

编译你的`utilities.erl`，把 BEAM 文件放进去`/tmp/ebin`，你可以从文件中调用你的实用程序函数`webpage.yaws`。

完整示例：

**网站.yaws**：

```
 <html>
  <erl>
    out(Arg) ->
       D=utilities:get_some_strings(),
       {html, ["Retrieved from utilities: ", D]}.
  </erl>    
 </html> 
```

**实用程序.erl**：

```
-module(utilities).

-export([get_some_strings/0]).

get_some_strings() ->
    "hello world!". 
```

# silverlight - 如何在 prism/mef 中重用视图

> ID：12929373
> 
> 赞同：1
> 
> 时间：2012-10-17T07:35:48.500
> 
> 标签：silverlight, prism, mef

使用 Silverlight 5、Prism 4.1 和 MEF。

我有一个视图，由其界面导出。

样本：

```
[Export(typeof(IUploadListView)), PartCreationPolicy(CreationPolicy.NonShared)]
public partial class UploadListView : RadWindow, IUploadListView
{
} 
```

我有一个模型（比如说一个主菜单模型），它想重复使用这个视图 2 次。视图的每个实例都必须被调用并只显示一次。我更改了底层视图模型上的 UploadType，以便行为会改变。

样本：

```
var view = this.serviceLocator.GetInstance<IUploadListView>();
view.UploadListViewModel.UploadType = UploadType.MyType1;
view.Show(); 
```

和其他菜单选项：

```
var view = this.serviceLocator.GetInstance<IUploadListView>();
view.UploadListViewModel.UploadType = UploadType.MyType2;
view.Show(); 
```

问题是这样的：

*   使用 NonShared 策略时，我确实得到了可显示的唯一实例。问题在于，当用户按下相同的菜单项时，实例会显示两次（或更多次）。
*   使用共享策略时，当显示第一个视图时，第二个菜单项将重用第一个视图，因此只显示一个视图。

我想要的是我必须能够检查是否显示了 IUploadListView 类型的实例，当发生这种情况时，我只需重用该实例并调用 Show()。当没有找到实例时，我希望 MEF 为我创建它（使用服务定位器）。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T08:23:36.893

您应该在您的视图或其视图模型中实现[INavigationAware](http://msdn.microsoft.com/en-us/library/microsoft.practices.prism.regions.inavigationaware%28v=pandp.38%29.aspx)接口并利用该`IsNavigationTarget`方法。

当`RequestNavigate`为区域调用时，`IsNavigationTarget`将调用 以允许视图实例决定是否应该激活它。如果它返回 true，则视图将被激活。否则 Prism 将创建视图的新实例，将其放置在区域中并激活它。

有关详细信息，请参阅[http://msdn.microsoft.com/en-us/library/gg430861(v=pandp.40).aspx 。](http://msdn.microsoft.com/en-us/library/gg430861%28v=pandp.40%29.aspx)

# c++ - ios::app 和 ios::ate 有什么区别？

> ID：12929378
> 
> 赞同：20
> 
> 时间：2012-10-17T07:36:09.567
> 
> 标签：c++, iostream

> **可能重复：**
> [C++ 文件处理：ios:app 和 ios:ate 之间的区别？](https://stackoverflow.com/questions/10359702/c-filehandling-difference-between-iosapp-and-iosate)

这两种文件打开方式有什么区别？

`ios:ate`将 get/put 指针位置设置为文件末尾，因此读/写将从 end 开始，但它与`ios::app`再次以追加模式打开文件有何不同？

当我创建了 a`ofstream`并在 `ios:app 模式下打开它时，put 流指针仍然指向开头，那么追加是如何工作的？

另外，我知道`ifstream`、`ofstream`和`fstream`是管理底层流缓冲区的高级类。

这是否意味着即使在`ios:app`模式下我也可以从文件中读取数据？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-10-17T07:41:56.373

`app`来自 'append' - 所有输出都将被添加（附加）到文件的末尾。换句话说，您不能在文件中的任何其他位置写入，只能在末尾写入。

`ate`来自 'at end' - 当您打开文件时，它将流位置设置在文件的末尾，但您可以随意移动（搜索）并在任何您喜欢的地方写入。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-10-17T08:34:26.403

`ate`打开后只需将您定位在文件的末尾，仅此而已。在 an 上用处不大`ofstream`，至少没有其他标志，因为文件无论如何都会被截断，所以开头就是结尾。（为了避免截断，并且仍然能够在文件中的任何位置写入`ios::in`，即使您不打算阅读，您也需要或 in 。）

`app`防止截断现有文件，并使每次写入都转到文件末尾。原子，如果可能的话；如果其他进程正在写入同一个文件，您的写入仍应结束。但是请注意，这是指实际的系统级写入。但是，如果您正在编写小于缓冲区大小的行，并且您用 终止每一行`std::endl`，那么您可以依靠原子附加的每一行，而不管其他进程可能对该文件执行什么操作。为了有效，您可能还想使用`pubsetbuf`on `filebuf`，以确保最小缓冲区大小。

In practice, I don't think I've ever used either of them, or found them of any use. The buffering issues with `app`, in particular, have generally led me to write my own `streambuf`, with conceptually unlimited buffering (an `std::vector<char>` as buffer), which opens the underlying system file with the equivalent of `app`, but guarantees only writing to it when explicitly flushed (as with `std::endl).

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-10-17T07:41:08.630

如果你看一下[这个参考](http://en.cppreference.com/w/cpp/io/ios_base/openmode)，你会看到：

```
app     seek to the end of stream before each write 
```

和

```
ate     seek to the end of stream immediately after open 
```

这意味着`ios::app`只在最后写入，但`ios::ate`默认情况下在最后读取和写入。但是，with`ios::ate`可以在文件中自由查找，但无论您为写入指针设置的位置如何，`ios::app`都将*始终写入末尾。*

# javascript - 防止函数被直接调用

> ID：12929386
> 
> 赞同：2
> 
> 时间：2012-10-17T07:36:38.430
> 
> 标签：javascript, oop, unobtrusive-javascript

我正在为 HTML5 File(Reader) API 构建一个包装器，并回退到普通文件输入或 swfupload。

我有一个通用功能“上传器”和三个子功能（都在同一范围内）

```
function Uploader() { }

function UploaderAPI() { }

function UploaderSWF() { }

function UploaderHTML() { } 
```

这个想法是您创建一个`var uploader = new Uploader()`并且该函数根据功能支持/配置调用其中一个子函数。

但是，我想知道是否有办法阻止用户直接调用其中一个子函数，而是让它们只对 Uploader() 可用。

在不将它们移动到 Uploader 范围的情况下是否可行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T07:39:06.587

您可以使用[模块模式](http://addyosmani.com/resources/essentialjsdesignpatterns/book/#modulepatternjavascript)并将这些函数定义为*私有*方法（通过闭包），但这会将您的函数移动到另一个范围内。

例如

```
var Uploader = function() {

   var UploaderAPI = function() { alert('uploaderAPI'); };

   var UploaderSWF = function() { alert('uploaderSWF');  };

   var UploaderHTML = function() {  alert('uploaderHTML'); };

   return {

      /* expose public methods here */

      publicMethodAPI : function() {
          alert('public uploaderAPI');
          UploaderAPI();
      }
   };
}; 
```

这样做，您可以选择使一些公共方法与实例一起可用，并在其中使用这些函数，但不直接调用它们，例如

```
var myupl = new Uploader();
myupl.publicMethodAPI(); 
```

示例（工作）小提琴：http: [//jsfiddle.net/ndQFB/](http://jsfiddle.net/ndQFB/)

# joomla - 将 Favicon 添加到我的网站

> ID：12929389
> 
> 赞同：0
> 
> 时间：2012-10-17T07:36:46.230
> 
> 标签：joomla

我是 joomla 的新手，我正在使用 joomla 1.5 和模板 rhuk_milkway 来开发我的网站。我想通过在 index.php 和 /rhuk_milkway 目录中的 favicon.ico 中插入以下代码来插入 Favicon。但是当我刷新页面时，Favicon 没有显示。它显示 Internet Explorer favicon。我尝试清除浏览器中的缓存，但无法正常工作。

```
<link href="/favicon.ico" rel="shortcut icon" type="image/x-icon" /> 
```

谁能帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T07:47:02.950

它应该像

```
<link href="templates/rhuk_milkyway/favicon.ico" rel="shortcut icon" type="image/x-icon" /> 
```

您的模板目录的路径或您的网站图标所在的位置

也可以在您之前没有访问过您的网站的其他浏览器上尝试

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T07:49:50.903

确保您的模板`<jdoc:include type="head" />`在 head 标签之后有这个标签，而不是 joomla 会自动添加

```
<link href="templates/rhuk_milkyway/favicon.ico" rel="shortcut icon" type="image/x-icon" /> 
```

并将当前的 favicon 图标替换为您的图标。清除缓存并尝试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T10:11:00.883

将您的 favicon.ico 放在此路径中：

```
JOOMLAROOT/templates/rhuk_milkway 
```

然后在这个文件夹中打开 templateDetails.xml，在这个标签之间写下这段代码：

```
<file>
<filename>favicon.ico</filename>
....
</file> 
```

你不需要放在`<link href="/favicon.ico" rel="shortcut icon" type="image/x-icon" />`头上。只需将此代码放在您的脑海中：`<jdoc:include type="head" />` joomla 会自己完成！

# linux - 限制 shell 命令

> ID：12929391
> 
> 赞同：3
> 
> 时间：2012-10-17T07:37:01.970
> 
> 标签：linux, bash, shell, rsync

我用 bash shell 创建了一个用户名——一个包含所有可用命令的普通 shell——但我打算将此 shell 用于备份服务，它应该只允许`rsync`命令。因此，我试图限制这个 shell`rsync`只执行命令。我怎么能用 and 做到这`.bash_profile`一点`.bashrc`？

附加信息：此 shell 仅用于备份文件和文件夹。我将另一个外壳连接到`rsync`使用`ssh`密钥。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T07:40:21.157

你不能 - 不只使用这些文件。为什么不给他们另一个外壳，选择更少呢？ [rssh](http://www.pizzashack.org/rssh/)就是为此目的而设计的。

rssh 相对于 authorized_keys 限制的优势（并非所有可能都适用于您或很有趣）：

*   可用于控制多个用户
*   限制是从外部而不是从用户的个人配置中应用的 - 错误的机会更少，允许他们更大的访问权限
*   使 chrooting 用户更容易
*   rssh 不是通用外壳，因此即使配置错误，提供给用户的范围也远小于 bash + authorized_keys 配置错误的情况。

# c# - 更快锁定列表 在迭代或克隆期间

> ID：12929393
> 
> 赞同：1
> 
> 时间：2012-10-17T07:37:05.930
> 
> 标签：c#, locking, gdi+

我目前有一个程序可以拦截一些数据包，根据信息对列表进行一些修改/添加类并将其发送。

我目前正在做的是当我添加一个项目时，我在添加它的同时锁定了我正在添加的列表。但是，我有一个 PictureBox，它每 50 毫秒左右从列表中提取信息。目前我这样做的方式是这样的：

```
Graphics g = e.Graphics;

lock (Core.Collections.SpaceStations)
{
    foreach (Classes.Station station in Core.Collections.SpaceStations)
    {
        Image img;
        switch (station.Company)
        {
            case 1:
                img = Prog.Properties.Resources.mmo_station;
                break;
            case 2:
                img = Prog.Properties.Resources.eic_station;
                break;
            case 3:
                img = Prog.Properties.Resources.vru_station;
                break;
            default:
                img = new Bitmap(50, 50);
                break;
        }
        g.DrawImage(img, (float)((station.Position.x - 750) / Core.CurrentMap.ByX), (float)((station.Position.y - 750) / Core.CurrentMap.ByY), 35, 35);
    }
} 
```

正如你所看到的，它锁定了整个迭代长度，这导致我的数据包处理程序阻塞，直到它完成绘制，并可能导致服务器和客户端延迟（因为我在添加或删除数据包处理程序中的项目之前锁定）。我的问题是将列表中的所有项目复制到锁内的临时列表中，然后从临时列表中将它们全部绘制到锁外会更快吗？主要是我的问题是，遍历列表或复制列表是否更快。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T08:06:11.777

您可以实现自己的列表，允许您在迭代（只读）列表时添加项目。只有当您删除项目时，您才需要锁定列表以防止对其进行迭代。

当然，您的迭代线程在迭代时并不知道新项目。

好处：

*   在列表容量不变的情况下避免复制，如果它改变了读者仍然可以完成阅读。如果它发生变化，您仍然需要在将列表项复制到新数组时锁定列表。
*   允许多个线程迭代
*   允许在迭代时将项目添加到列表

*免责声明：这是非常概念性的，永远不要测试它*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T07:45:23.590

我认为在这里复制列表是更好的选择。

它将毫无疑问地提高性能，但会占用大量内存，可以通过在绘制后正确处理列表来进行扩展。

```
Station[] stations = Core.Collections.SpaceStations.ToArray(); 
```

# java - 如何将eclipse连接到postgresql？

> ID：12929395
> 
> 赞同：2
> 
> 时间：2012-10-17T07:37:12.533
> 
> 标签：java, database, eclipse, postgresql

如何将 eclipse 与 postgresql 连接起来？

我有一台服务器是 tomcat v6.0，但我无法连接到 postgresql。

请帮助我，如果您有示例代码，我只需要它，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T07:41:40.347

I am providing certain link which might help you to connect postgres with eclipse

[http://omgnoes.wordpress.com/2011/04/12/postgres-jdbc-connection-in-eclipse/](http://omgnoes.wordpress.com/2011/04/12/postgres-jdbc-connection-in-eclipse/)

[http://wiki.postgresql.org/wiki/Working_with_Eclipse](http://wiki.postgresql.org/wiki/Working_with_Eclipse)

[http://www.mkyong.com/jdbc/how-do-connect-to-postgresql-with-jdbc-driver-java/](http://www.mkyong.com/jdbc/how-do-connect-to-postgresql-with-jdbc-driver-java/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T07:47:27.430

假设您正在从 Eclipse 启动 Tomcat（用于调试）并且您正在获取`ClassNotFoundException`（您没有提供任何信息，所以我假设最可能的错误）。

你有`JRE`，但你还需要 PostgreSQL`JDBC`驱动程序。这是一个单独的 jar，其名称类似于： http: [//mvnrepository.com/artifact/postgresql/postgresql/9.1-901.jdbc3](http://mvnrepository.com/artifact/postgresql/postgresql/9.1-901.jdbc3)。您必须在**WAR**存档或 Tomcat 共享库目录中拥有该 jar。

在 Eclipse 下，也可以手动添加运行类路径，但我建议你将这个 jar 打包到 war 中，因为无论如何你都必须在“普通”Tomcat 上运行它。

# php - 强制在 symfony 操作中调用 parent::preExecute()

> ID：12929397
> 
> 赞同：1
> 
> 时间：2012-10-17T07:37:14.263
> 
> 标签：php, symfony-1.4, overloading, method-call, enforcement

我有一个类似的结构：

**家长班**

```
abstract class parentActions extends sfActions
{
   // overloaded from sfActions
   public function preExecute()
   {
     // do some stuff before every action
   }

} 
```

**儿童班**

```
class someActions extends parentActions
{
  public function preExecute()
  {
     // do some more stuff
     parent::preExecute();
  }
} 
```

现在我的问题是：如何强制调用`parent::preExecute()`覆盖它的子方法？

在我还不知道的 symfony 中是否有其他方法（另一种不会重载的方法或其他方法）？

需要调用父方法，否则功能会被破坏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T07:46:48.783

没有办法强制执行。决定是否调用父方法是子类的唯一责任。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T07:51:30.897

这正是继承应该做的；孩子在保留前后条件的同时专门化一种方法。这使得用子类替换父类成为可能。

也许您可以在父类中声明在子类中实现的空钩子并添加`final`到`preExecute()`声明中以防止意外覆盖。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-09T08:27:49.567

放在抽象类中`__constructor()`

# row - web2py在表格中添加行

> ID：12929400
> 
> 赞同：0
> 
> 时间：2012-10-17T07:37:20.363
> 
> 标签：row, web2py

我正在构建一个 edifact 翻译器/编辑器。为了显示现有的翻译，我有以下控制器：

```
import shutil
import sys
import fileinput

def edit_datafile():
    #inlees gedeelte van een bestaand datatype
    file = open('/home/wouter/DESADVCB.pcf', 'r')
    datas = []
    data = {}
    row = {}
    j = 1
    for line in file:
        meg = line.strip().split(':', 3)
        if line.startswith('#'):
            c = 1
            unmark = line.strip().split('#')
            datas.append('#')
            datas.append(unmark[1])
            data[j,c] = datas
            datas=[]
            j = j+1
        else:
        if '.' in meg[0]:
                t = meg[0].split('.')
                if '+' in t[0]:
                    a = t[0].split('+')
                    datas.append(a[0])
                    datas.append(a[1])
                else:
                   datas.append(t[0])
                   datas.append(t[1])
               try:
                    t[2]
                    datas.append(t[2])
               except IndexError, e:
                    datas.append('')

        else:
            if '+' in meg[0]:
                a = meg[0].split('+')
                datas.append(a[0])
                datas.append(a[1])
            else:
                datas.append(meg[0])
                datas.append('')
            datas.append('')
            datas.append('')               
        datas.append(meg[1])
        datas.append(meg[2])
        try:
            meg[3]
            if ':' in line:
                reg = meg[3].strip().split(':')
                c = 1
                for teg in reg:
                    seg = teg.split('=')
                    if '.' in seg[0]:
                        t = seg[0].split('.')
                        datas.append(t[0])
                        datas.append(t[1])
                        try:
                            t[2]
                            datas.append(t[2])
                        except IndexError, a:
                            datas.append('')
                        try:
                            t[3]
                            datas.append(t[3])
                        except IndexError, a:
                            datas.append('')
                            s= seg[1].split('.', 3)
                            datas.append(s[0])
                            datas.append(s[1])
                            datas.append(s[2])
                            datas.append(s[3])
                            data[j,c]=datas
                        c = c+1
                    else:
                        datas.append(seg[0])
                        datas.append('')
                        datas.append('')
                        datas.append('')
                        s= seg[1].split('.', 3)
                        datas.append(s[0])
                        datas.append(s[1])
                        datas.append(s[2])
                        datas.append(s[3])
                        data[j,c]=datas
                        c= c+1
                    datas=[]
                j = j+1   
            else:
                seg = meg[3].strip().split('=')
                if '.' in seg[0]:
                    t = seg[0].split('.')
                    datas.append(t[0])
                    datas.append(t[1])
                    try:
                        t[2]
                        datas.append(t[2])
                    except IndexError, a:
                        datas.append('')
                    try:
                        t[3]
                        datas.append(t[3])
                    except IndexError, a:
                        datas.append('')

                else:
                    datas.append(seg[0])
                    datas.append('')
                    datas.append('')
                    datas.append('')
                s= seg[1].split('.', 3)
                datas.append(s[0])
                datas.append(s[1])
                datas.append(s[2])
                datas.append(s[3])
                data[j] = datas
                datas=[]
                j = j+1  
        except IndexError, a:
            c = 1
            datas.append('')
            datas.append('')
            datas.append('')
            datas.append('')
            datas.append('')
            datas.append('')
            datas.append('')
            datas.append('')
            data[j,c] = datas
            datas=[]
            j = j+1 
# form om regels toe te voegen
form_ar = FORM(
            TABLE(THEAD(
                TR(
                    TH('Nieuw:'),
                    TH('Toevoegen:'),
                    TH('Nummer:')
                    )),
                TBODY(TR(
                    TD(SELECT('rij','remark', value='rij',_name='t')),
                    TD(SELECT('voor', 'na', value='na',_name='w')),
                    TD(SELECT([(key,'.',skey) for (key,skey) in sorted(data.iterkeys())],_name='p')),
                    TD(INPUT(_type="submit", _name="make", _value="Maak"))
            ))))

form_er = FORM(
            TABLE(
                THEAD(TR(
                    TH('Line'),
                    TH('Name'),
                    TH('Qualifier'),
                    TH('Field'),
                    TH('Subfield'),
                    TH('Match'),
                    TH('Set'),
                    TH('Field'),
                    TH('Subfield'),
                    TH('Position'),
                    TH('Length'),
                    TH('Position'),
                    TH('Lenght'),
                    TH('Type'),
                    TH('Name')
                )),
                TBODY([TR(
                    TD(key,'.',skey),
                    TD(INPUT(_name='N',_value=data[key,skey][0],_style='width:30px')),
                    TD(INPUT(_name='Q',_value=data[key,skey][1]), _colspan=13,_style='width:450px'), rowid=data[key,skey]
                 )
                 if data[key,skey][0]=='#' else 
                 TR(
                    TD(key,'.',skey),
                    TD(INPUT(_name='N',_value=data[key,skey][0], _style='width:30px')),
                    TD(INPUT(_name='Q',_value=data[key,skey][1], _style='width:30px')),
                    TD(INPUT(_name='IF',_value=data[key,skey][2], _style='width:30px')),
                    TD(INPUT(_name='IS',_value=data[key,skey][3], _style='width:30px')),
                    TD(INPUT(_name='IM',_value=data[key,skey][4], _style='width:30px')),
                    TD(INPUT(_name='IT',_value=data[key,skey][5], _style='width:30px')),
                    TD(INPUT(_name='OF',_value=data[key,skey][6], _style='width:30px')),
                    TD(INPUT(_name='OS',_value=data[key,skey][7], _style='width:30px')),
                    TD(INPUT(_name='IP',_value=data[key,skey][8], _style='width:30px')),
                    TD(INPUT(_name='IL',_value=data[key,skey][9], _style='width:30px')),
                    TD(INPUT(_name='OP',_value=data[key,skey][10], _style='width:30px')),
                    TD(INPUT(_name='OL',_value=data[key,skey][11], _style='width:30px')),
                    TD(INPUT(_name='OT',_value=data[key,skey][12], _style='width:10px')),
                    TD(INPUT(_name='ON',_value=data[key,skey][13])), rowid=data[key,skey]
                ) 
                if skey==1 else 
                TR(
                    TD(key,'.',skey),
                    TD(_maxlength='3',_size='3'),
                    TD(_colspan=5),
                    TD(INPUT(_name='OF',_value=data[key,skey][0], _style='width:30px')),
                    TD(INPUT(_name='OS',_value=data[key,skey][1], _style='width:30px')),
                    TD(INPUT(_name='IP',_value=data[key,skey][2], _style='width:30px')),
                    TD(INPUT(_name='IL',_value=data[key,skey][3], _style='width:30px')),
                    TD(INPUT(_name='OP',_value=data[key,skey][4], _style='width:30px')),
                    TD(INPUT(_name='OL',_value=data[key,skey][5], _style='width:30px')),
                    TD(INPUT(_name='OT',_value=data[key,skey][6], _style='width:10px')),
                    TD(INPUT(_name='ON',_value=data[key,skey][7])), rowid=data[key,skey]
                ) for (key,skey) in sorted(data.iterkeys())]),_id="example",_class="display"),
            INPUT(_type="submit", _name="save", _value="Save Page")
           )
return dict(data=data,form_ar=form_ar, form_er=form_er, f=f) 
```

文件是这样的：

```
BGM+351::1:2=1.8.0.doorlopend nummer CobanaFruchtring
#remark test
DTM+191:::1.3=316.8.D.aankomstdatum (verwacht)
NAD+SU:::2=46.8.0.Lieferantennummer:4.1=54.9..Lieferantenname 
NAD+BY:::2=63.8.0.ontvangernummer:4.1=71.9..ontvangernaam
TDT+20:::8.4=299.17..bootnaam
CPS::2
LIN::3
PIA+5:::3.1=80.34..Hoofdsoort/Varieteit:4.1=216.17..EAN-code:5.1=182.17..Verpakking
PIA+1:::2.1=114.17..Marke:3.1=29.17..Ursprungland  ISO-code:4.1=250.8..Size:5.1=148.17..Qualitaetsbezeichnung
MEA+AAA.2.1:::3.2=423.8.3.nettogewicht per collo
MEA+AAB.2.1:::3.2=439.8.3.brutogewicht per collo
MEA+AAJ.2.1:::3.2=258.4.0.vpp
QTY+21:::1.2=455.8.0.verwachte colli
FTX+PAL:::4.1=182.17..Palettenart
RFF+ON:::1.2.1.7=233.6.0.Partie-Nummer:1.2.8.3=239.3..Partie-pos
RRF+ZZZ:::1.2.1.8=471.8.2.SBX partijnummer:1.2.16.4=479.4..SBX varieteitscode:1.2.20.4=483.4..SBX merkcode:1.2.28.4=487.4..SBX categoriecode:1.2.32.4=490.1..SBX verpakkingscode
LOC+18:::2.4=324.17..Ankunfthafen
PCI+IEN:::2=262.11..Containernummer 
```

我希望能够在表单中添加行，而无需在所需位置提交。我已经查看了 powertable、datatables 和 jQuery 来实现这一点，但我似乎找不到合适的解决方案。

有人能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T20:31:42.333

如果我理解正确，您需要在表格的任何位置动态添加行。

如果是这样，您可以使用 jQuery 方法 before() 或 after()。

例如，要在选定行之前插入行：

```
$('#table tbody tr').live('click',function(event) {
    $(this).before("<tr><td>data1</td></tr>")
}); 
```

# iphone - 从 viewDidLoad 获取 UIButton 引用

> ID：12929404
> 
> 赞同：1
> 
> 时间：2012-10-17T07:37:59.737
> 
> 标签：iphone, objective-c

我对 iPhone 开发非常陌生。我正在尝试禁用已经存在的按钮，但实际上无法获得指向视图中特定元素的指针。例如，我在 viewController 标头中有以下内容

```
- (IBAction)one:(id)sender; 
```

并且实现是

```
- (IBAction)one:(id)sender { 
```

}

这只是事件处理程序。但是，我需要在视图打开时禁用该按钮，并且我对如何获取对事件处理程序之外的元素的引用有点迷茫。

所以换句话说，我的想法是有这样的东西：

```
UIButton* myButton = //something 
```

某事是我不知道该做什么的地方。有任何想法吗？我非常感谢我在这里获得的任何帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T07:41:57.257

You need to create a property for your button in the interface:

```
@property(nonatomic, retain) IBOutlet UIButton * button; 
```

And add this to implementation:

```
@synthesize button; 
```

Then connect the button to it in interface builder. After this you can disable the button by:

```
button.enabled = NO; 
```

Hope I could help!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T08:49:26.953

只需为您的按钮添加标签并使用标签值访问您的按钮。

```
UIButton *btn = (UIButton*)[self.view viewWithTag:1];
[btn setHidden:YES]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T05:18:44.123

```
@property (strong, nonatomic) UIButton *button;
@synthesize button;

// In View Did Load...
self.button = [UIButton buttonWithType:UIButtonTypeCustom]; // button can be of any type. 
[self.button setTag:1]; 
// if you have more buttons initialize it and set its tag. you can get to know which button was pressed using tags.

[button addTarget:self action:@selector(buttonEvent:) forControlEvents:UIControlEventTouchUpInside];

-(void) buttonEvent:(UIButton *) sender
{
   NSLog(@"%d",sender.tag);
    if(sender.tag == 1)
    {
      [self.button setEnabled:NO]; // This makes your button disabled, i.e you can see the button but you cannot click on it.
      [self.button setHidden:YES]; // This makes your button hidden.
     }
} 
```

如果您有更多疑问，请回复我。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T08:10:50.097

**在您的 .h 文件中**

```
#import <UIKit/UIKit.h>

 @interface RpViewController : UIViewController

 @property (retain , nonatomic)IBOutlet UIButton *Btn1;

 @end 
```

**在你的 .m 文件中，在实现中写下这个：**

```
@synthesize Btn1;

Now on interface , click on button.
In button's properties - > Drawings - check   Hidden    checkbox.

Wherever you want to show that button , just write.

 [Btn1 setHidden:FALSE]; 
```

# servicestack - 服务堆栈身份验证

> ID：12929405
> 
> 赞同：0
> 
> 时间：2012-10-17T07:38:02.367
> 
> 标签：servicestack

? - 是否可以在同一个 MVC 4 托管服务堆栈 Web 服务中有多个身份验证提供程序，我们将有多个端点利用需要不同级别/类型的身份验证的内部和外部服务。

我最初需要实现几个自定义提供程序以满足我们的需求，以便根据 URL 使用不同的身份验证提供程序，到目前为止，我只找到了提供单个自定义身份验证提供程序的示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T14:21:35.897

**是的。您可以使用多个提供程序**。然后，您可以**为不同的资源**（url）设置不同的角色来管理您的内部和外部级别。

查看[https://github.com/ServiceStack/SocialBootstrapApi](https://github.com/ServiceStack/SocialBootstrapApi)示例项目。这个例子有很多不同的身份验证提供程序。每个身份验证提供程序解析到路径 /auth/{provider} ，其中提供程序使用自定义提供程序的 IAuthProvider.Provider 属性和内置提供程序进行解析。

您需要注册每个要使用的身份验证提供程序。

```
//Register all Authentication methods you want to enable for this web app.            
Plugins.Add(new AuthFeature(
    () => new CustomUserSession(), //Use your own typed Custom UserSession type
    new IAuthProvider[] {
        new CredentialsAuthProvider(),        
        new TwitterAuthProvider(appSettings),  
        new FacebookAuthProvider(appSettings), 
        new DigestAuthProvider(appSettings),  
        new BasicAuthProvider(),               
        new GoogleOpenIdOAuthProvider(appSettings), 
        new YahooOpenIdOAuthProvider(appSettings),  
        new OpenIdOAuthProvider(appSettings),     
})); 
```

然后您可以通过点击不同的网址登录，例如

*   /身份验证/脸书
*   /身份验证/推特

# java - jmenu中的图像来自java中的jar文件

> ID：12929408
> 
> 赞同：0
> 
> 时间：2012-10-17T07:38:24.227
> 
> 标签：java, swing, jar, awt, jmenu

亲爱的 Stackoverflow 开发人员，我必须将图像作为图标从 jar 加载到 jmenu。我正在使用以下代码。它抛出空指针异常，但是当我在 jframe 中使用 imageicon 类设置图标时，它在框架中显示图标

```
 try
   {

    JMenu menu= new JMenu("");
    Icon im1= new ImageIcon(getClass.getResource("path of the images");

   menu.setIcon(im1);
  }
  catch(Exception ex)
   {

   } 
```

这段代码有什么问题请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T07:50:30.980

*   常见问题是`ImageIcon`，`Icon`不返回任何异常，测试`Null value`

*   `Icon im1= new ImageIcon why???`，那些是不同的`Java Object`，必须测试是否`Icon`是`instanceof` `ImageIcon`

*   阅读有关[Icon](http://docs.oracle.com/javase/tutorial/uiswing/components/icon.html)和[JMenu / JMenuItem的教程](http://docs.oracle.com/javase/tutorial/uiswing/components/menu.html)

*   例如

![在此处输入图像描述](../Images/74f5aa584d20363818fd4a7bfef3d372.png)

代码

```
import java.awt.BorderLayout;
import java.awt.ComponentOrientation;
import java.awt.Dimension;
import java.awt.event.ActionEvent;

import javax.swing.AbstractAction;
import javax.swing.Box;
import javax.swing.Icon;
import javax.swing.JButton;
import javax.swing.JComboBox;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JMenu;
import javax.swing.JMenuBar;
import javax.swing.JMenuItem;
import javax.swing.JPanel;
import javax.swing.JSeparator;
import javax.swing.JTextField;
import javax.swing.JTextPane;
import javax.swing.UIManager;
import javax.swing.border.BevelBorder;

public class MenuExample extends JPanel {

    private static final long serialVersionUID = 1L;
    private JTextPane pane;
    private JMenuBar menuBar;

    public MenuExample() {
        menuBar = new JMenuBar();
        JMenu formatMenu = new JMenu("Justify");
        formatMenu.setMnemonic('J');
        formatMenu.setIcon(UIManager.getIcon("OptionPane.errorIcon"));
        MenuAction leftJustifyAction = new MenuAction("Left", UIManager.getIcon("OptionPane.errorIcon"));
        MenuAction rightJustifyAction = new MenuAction("Right", UIManager.getIcon("OptionPane.informationIcon"));
        MenuAction centerJustifyAction = new MenuAction("Center", UIManager.getIcon("OptionPane.warningIcon"));
        MenuAction fullJustifyAction = new MenuAction("Full", UIManager.getIcon("OptionPane.questionIcon"));
        JMenuItem item;
        item = formatMenu.add(leftJustifyAction);
        item.setMnemonic('L');
        item = formatMenu.add(rightJustifyAction);
        item.setMnemonic('R');
        item = formatMenu.add(centerJustifyAction);
        item.setMnemonic('C');
        item = formatMenu.add(fullJustifyAction);
        item.setMnemonic('F');
        menuBar.add(formatMenu);
        menuBar.add(createMenu("Menu 1"));
        menuBar.add(createMenu("Menu 2"));
        menuBar.add(createMenu("Menu 3"));
        menuBar.add(Box.createHorizontalGlue());
        menuBar.add(new JSeparator());
        menuBar.add(new JButton("   Seach ....  "));
        menuBar.add(new JLabel());
        menuBar.add(new JTextField("   Seach ....  "));
        menuBar.add(new JComboBox(new Object[]{"height", "length", "volume"}));
        menuBar.add(createMenu("About"));
        menuBar.setBorder(new BevelBorder(BevelBorder.RAISED));

    }

    private JMenu createMenu(String title) {
        JMenu m = new JMenu(title);
        m.add("Menu item #1 in " + title);
        m.add("Menu item #2 in " + title);
        m.add("Menu item #3 in " + title);
        if (title.equals("About")) {
            m.setComponentOrientation(ComponentOrientation.RIGHT_TO_LEFT);
        }
        return m;
    }

    class MenuAction extends AbstractAction {

        public MenuAction(String text, Icon icon) {
            super(text, icon);
        }

        public void actionPerformed(ActionEvent e) {
            try {
                pane.getStyledDocument().insertString(0,
                        "Action [" + e.getActionCommand() + "] performed!\n",
                        null);
            } catch (Exception ex) {
                ex.printStackTrace();
            }
        }
    }

    public static void main(String s[]) {
        MenuExample example = new MenuExample();
        example.pane = new JTextPane();
        example.pane.setPreferredSize(new Dimension(250, 250));
        example.pane.setBorder(new BevelBorder(BevelBorder.LOWERED));
        JFrame frame = new JFrame("Menu Example");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setJMenuBar(example.menuBar);
        frame.getContentPane().add(example.pane, BorderLayout.CENTER);
        frame.pack();
        frame.setVisible(true);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T07:46:16.743

> 这段代码有什么问题？

1.  一个空`catch(Exception ex)`块：你应该总是留下异常的痕迹，否则它会让调试变得异常困难。为此目的使用记录器或将堆栈跟踪打印到控制台）
2.  如果看不到图标，很有可能是找不到资源。一般来说，我更喜欢使用资源的绝对路径（否则它是相对于当前类包的）。您需要确保正确嵌入图像文件（它必须位于类路径中的某个位置，无论是在 jar 中还是在目录中）
3.  您应该使用一致的缩进。

# c++ - c++中的密码| 打印后删除字符

> ID：12929410
> 
> 赞同：3
> 
> 时间：2012-10-17T07:38:34.433
> 
> 标签：c++, passwords, stdout, password-protection

当我们在网站上输入密码时，我们会看到 * 或 . 而不是字符。如何用 c++ 实现这一点。假设我试图通过标准输入输入密码，同时我将它存储在一个字符数组中并删除用户输入的字符并输出 *。我想删除字符是这里的技巧。但是我们如何在通过标准输出打印字符后删除它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T07:48:34.367

`_getch()`使用(header )读取密钥`<conio.h>`，保存/处理它，然后打印 '*' 字符而不是它。`<conio.h>`但是，仅在 Windows afaik 上可用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T07:41:41.147

It depends upon the operating system and relevant libraries (the C++ standard does not define anything related to that).

On Linux, you might use `ncurses` or `readline` libraries (on the terminal). And if coding a GUI application, your toolkit (eg Qt) provides a relevant widget.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T07:45:21.380

在控制台中的此页面[C++ 密码中，](http://www.cplusplus.com/forum/general/3570/)您可以找到答案。他们使用`conio.h`库，但在这个页面的中间有一个**更好**的 Windows 解决方案。

# android - 在 Android 中以特定间隔收集 GPS 数据时出现致命异常 timer-0

> ID：12929411
> 
> 赞同：1
> 
> 时间：2012-10-17T07:38:43.950
> 
> 标签：android

我已使用以下链接获取纬度和经度。如果 GPS 或网络无法获取该值，则意味着我在 Timer-0 中遇到了致命异常

[在 Android 上获取用户当前位置的最简单、最可靠的方法是什么？](https://stackoverflow.com/questions/3145089/what-is-the-simplest-and-most-robust-way-to-get-the-users-current-location-in-a?lq=1)

数据不可用时如何处理？

# javascript - 从 javascript 调用 Outlook 并自动发送邮件

> ID：12929412
> 
> 赞同：0
> 
> 时间：2012-10-17T07:38:47.340
> 
> 标签：javascript, outlook

我有一个场景，如果用户单击提交按钮邮件应该通过 Outlook 自动发送而不弹出（要求我们单击发送按钮）。如何做到这一点无论如何都是为了访问 Outlook api 以自动发送邮件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T07:53:12.970

有，但不使用 Javascript。Outlook 有一个允许发送电子邮件的 COM 接口（可能还有 .NET），但它也会显示警告。唯一的方法是实际构建一个可以“从内部”发送电子邮件的 Outlook 插件。

为了帮助您构建它，您可以使用[Outlook Redemption](http://www.dimastr.com/redemption/home.htm)，它提供了可以在没有警告的情况下调用的类似 Outlook 的功能。但据我所知，没有办法从外部控制 Outlook 发送邮件，尤其是不能从 Javascript 发送邮件。

采取此措施是为了防止恶意脚本使用您的 Outlook 发送垃圾邮件。

# vim - 运行用python编写的vim脚本？

> ID：12929419
> 
> 赞同：3
> 
> 时间：2012-10-17T07:39:11.860
> 
> 标签：vim, compiler-construction

这是参考[Paul Biggar](https://stackoverflow.com/users/104021/paul-biggar)所写的[公认答案](https://stackoverflow.com/questions/1240037/recommended-build-system-for-latex)：

> 在考虑了所有这些选项一段时间后，我决定采用以下解决方案。
> 
> *   [将 vim 设置为在我键入时连续写入](https://stackoverflow.com/questions/1313323/vim-write-back-my-file-on-each-key-press)。
> *   在后台运行脚本以持续构建，同时刷新 pdf。latexmk 几乎足够好，除了它是在适当的位置构建的，它会在 okular（我的查看器）中的糟糕时间重新加载。该脚本可在[https://github.com/pbiggar/texbuild](https://github.com/pbiggar/texbuild)获得。
> 
> 使用 Rubber-info 从日志文件中获取错误和警告。上面的脚本将日志文件保存在 t.log 中。在 vim 中：
> 
> ```
>  autocmd FileType tex set makeprg=rubber-info\ t.log
>  autocmd FileType tex set errorformat=%f:%l:\ %m 
> ```

我想执行[他的 github 脚本](https://github.com/pbiggar/texbuild)，以便“持续构建 [LaTeX 文件]，随时刷新 pdf”。鉴于他没有完全提供如何运行它的说明，我认为这是一个相当简单的过程。但是，我对 vim 很陌生，一般对编程/github 知之甚少，所以我真的不知道如何开始。

我搜索了高低，并且取得了零进展。我不确定代码是否应该在 python 中编译，然后作为脚本运行，或者类似的东西。我感谢您的帮助！

*编辑：*根据评论讨论，我已成功使脚本可执行。但我仍然不知道如何运行它..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T15:12:26.827

这

```
#!/usr/bin/env python 
```

在脚本状态的顶部，以及`import vim`在正文中没有明确指出它应该从 shell（或从 vim）运行，使用

```
chmod +x /path/to/texbuild # Needed only once
/path/to/texbuild {script-args} 
```

. 进一步的探索表明，它希望将一个 tex 文件作为其第一个也是唯一的参数（唯一`sys.argv`提到的地方是[第 48 行](https://github.com/pbiggar/texbuild/blob/e9e6369414de30acd2816ae7f0d3b129eb27e585/texbuild#L48)），因此您可能应该使用以下命令来运行它：

```
augroup AutorunTexbuild
    autocmd!
    autocmd FileType tex :if !exists('b:runtexbuild') | call system('/path/to/texbuild '.shellescape(@%)) | let b:runtexbuild=1 | endif
    autocmd VimLeave * :call system('killall -TERM texbuild')
augroup END 
```

. 这假设您一次只在一个 vim 实例中编辑 tex 文件。看起来作者希望您手动运行该脚本。

# android - starting an activity where user left it

> ID：12929420
> 
> 赞同：2
> 
> 时间：2012-10-17T07:39:15.040
> 
> 标签：android, animation

I have the following code:

```
public class SplashScreenActivity extends Activity {

private boolean animated ;

private Handler handler1;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState)
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    if (!isPreviouslyLoggedIn()) {
        setContentView(R.layout.splash);

        final TextView revolution=(TextView) findViewById(R.id.textView1);
        final Button login=(Button) findViewById(R.id.loginButton);
        final Button signUp=(Button) findViewById(R.id.signUpButton);

        login.setOnClickListener(loginListener);
        signUp.setOnClickListener(signUpListener);

        if (!animated) {
            animated = true;
            revolution.setVisibility(View.INVISIBLE);
            login.setVisibility(View.INVISIBLE);
            signUp.setVisibility(View.INVISIBLE);

            ImageView image = (ImageView) findViewById(R.id.image);
            TranslateAnimation slide = new TranslateAnimation(0, 0, 100, 0);   
            slide.setDuration(1000);
            image.startAnimation(slide);

            handler1 = new Handler();

            handler1.postDelayed(new Runnable() {
                @Override
                public void run() {
                    revolution.setVisibility(View.VISIBLE);
                    login.setVisibility(View.VISIBLE);
                    signUp.setVisibility(View.VISIBLE);
                }
            },1200);
        }
    }

    else {
        setContentView(R.layout.home);
        Intent intent = new Intent(getApplicationContext(), PickUpActivity.class);
        startActivity(intent);
    }

} 
```

When the user clicks on one of the buttons, it leads him to a different activity in the same app. However, when the user clicks back from the next activity, the animation is started again. How can I prevent the animation from showing again as i want it to occur only once when user opens the app?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T08:10:36.040

You can set a flag for this, first time keep the flag `true` and when the user clicks on any of the button, set the flag value to `false`.

Now start the animation if the flag value is `true`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T08:11:15.273

You can use `Application` class.Declare a boolean var in it and set it "true" before starting second Activity.In your onCreate() of first Activity check this boolean and do animation only it is false(it means that user has not started second activity yet).For example create class with name `App` in your package:

```
 public class App extends Application{    

    private static boolean animated;

    @Override
    public void onCreate() {
        super.onCreate();
        animated = false;
    }

    public static boolean getAnimated(){
        return animated;
    }

    public static void setAnimated(boolean animated1){
        animated = animated1;
    }

} 
```

Register `App` in `manifest`:

```
<application
        android:icon= ...
        android:label= ...
        android:name="yourpackage.name.App" > 
```

(I suppose that your package name is :"yourpackage.name")

Now change your code like this:

```
if (!App.getAnimated()) {
            App.setAnimated(true);
            revolution.setVisibility(View.INVISIBLE);
            login.setVisibility(View.INVISIBLE);
            signUp.setVisibility(View.INVISIBLE);
            ... 
```

Or you can use `sharedpreferences` and retrieve a boolean from it when you want to start animation.You have to set it's default value "false" and when user start second Activity,you have to set it "true".

# c# - 惰性列表克隆

> ID：12929426
> 
> 赞同：2
> 
> 时间：2012-10-17T07:39:46.120
> 
> 标签：c#, list, copy, clone, lazy-evaluation

我有一个包含大量元素的列表。我需要创建此列表的副本以在不更改原始列表的情况下对其执行操作。但是，这些操作通常只访问列表的一小部分元素，因此当大部分内容都未使用时，复制整个内容是低效的。有没有一种简单的方法来创建一个作为列表克隆的对象，但只在访问元素时克隆它们？我查看了`Lazy<T>`课程，这似乎是我想要的，但我不知道如何在这种情况下应用它。

我希望能够做这样的事情：

```
LazyListCopy<SomeType> lazyCopy = LazyListCopy.Copy(myList); // No elements have been copied at this point
DoSomethingWith(lazyCopy[34]);                               // 35th element has now been copied 
```

还有这个：

```
foreach(SomeType listElement in LazyCopy.Copy(myOtherList))
{
    if (!Check(listElement))   // Object corresponding to listElement has been cloned
        break;
} 
```

我不介意解决方案是否不够通用，无法处理任何类型的列表；我会很好地将它特定于我创建的一两个类。

最好这将是深拷贝而不是浅拷贝，但浅拷贝仍然有用，如果它也更短/更简单，我将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T07:57:26.590

听起来您想以原始列表和稀疏的覆盖集合结束。

为什么不为覆盖创建一个字典，将索引键入原始列表？然后，您可以根据需要从原始列表中手动添加值。

您可以将此功能包装到一个类中，`IList<T>`如果它是您将经常使用的东西，该类将进行包装。

# iphone - ios 5 UIPageViewController changing transition style to scroll

> ID：12929427
> 
> 赞同：4
> 
> 时间：2012-10-17T07:39:47.747
> 
> 标签：iphone, cocoa-touch, ios5, uipageviewcontroller

I am creating ebook application but it has to support from ios5 onwards. I want to do it quickly and efficiently too. I am planning to use UIPageviewController, but for ios5 it supports only curl animation, and i need to support scroll animation as well for page movements, which we get on ios6. So, can i do this with ios5 using pageview controller, the contents which I am showing are images. Ideally i like to use page view controller, as many of things it handle itself, such as page flipping, page movement when tapping on page end area, and its curl animation is better than other available options. Please help, any suggestions are welcome.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-28T15:02:46.773

如果还有人遇到此问题，请查看[R4PageViewController](https://github.com/srdanrasic/R4PageViewController "R4PageViewController")。它支持 iOS 5、6 和 7，并具有类似 iOS 7 的滚动效果（可以禁用）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T10:39:58.020

如果您想要一个快速的解决方案，请使用以下代码段来检测当前的 iOS 版本并相应地使用过渡样式：

```
#define SYSTEM_VERSION_GREATER_THAN_OR_EQUAL_TO(v)  ([[[UIDevice currentDevice] systemVersion] compare:v options:NSNumericSearch] != NSOrderedAscending)

if(SYSTEM_VERSION_GREATER_THAN_OR_EQUAL_TO(@"6.0")){
  //UIPageViewControllerTransitionStyleScroll
}else{
  //UIPageViewControllerTransitionStylePageCurl
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T14:05:24.820

我遇到了类似的问题并找到[了 RAPageViewController](https://github.com/evadne/RAPageViewController)。我用它重新实现了 Apple 的 PhotoScroller 示例，只做了很少的改动。我的仓库是[RAPageScroller](https://github.com/proxi/RAPhotoScroller)。

# php - 如何将 preg_match 的输出附加到现有数组？

> ID：12929429
> 
> 赞同：1
> 
> 时间：2012-10-17T07:39:47.307
> 
> 标签：php, regex, arrays, preg-match

我有两个 preg_match() 调用，我想合并数组而不是替换第一个数组。到目前为止我的代码：

```
$arr = Array();
$string1 = "Article: graphics card";
$string2 = "Price: 300 Euro";
$regex1 = "/Article[\:] (?P<article>.*)/";
$regex2 = "/Price[\:] (?P<price>[0-9]+) Euro/";

preg_match($regex1, $string1, $arr);
//output here:
$arr['article'] = "graphics card"
$arr['price'] = null
preg_match($regex2, $string2, $arr);
//output here:
$arr['article'] = null
$arr['price'] = "300" 
```

我该如何匹配，所以我的输出将是：

```
$arr['article'] = "graphics card"
$arr['price'] = "300" 
```

?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T07:58:07.020

您可以`preg_replace_callback`在回调函数中使用和处理合并。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T08:16:54.477

如果是我，我会这样做，这将允许以后更容易扩展，并避免使用回调函数。它还可以支持通过将数组替换为单个字符串 var 来轻松搜索一个`$strs[$key]`字符串`$strs`。它不会删除数字键，但如果您只是继续访问数组中的关联键，这将永远不会导致问题。

```
$strs = array();
$strs[] = "Article: graphics card";
$strs[] = "Price: 300 Euro";

$regs = array();
$regs[] = "/Article[\:] (?P<article>.*)/";
$regs[] = "/Price[\:] (?P<price>[0-9]+) Euro/";

$a = array();

foreach( $regs as $key => $reg ){
  if ( preg_match($reg, $strs[$key], $b) ) {
    $a += $b;
  }
}

print_r($a);

/*
Array
(
    [0] => Article: graphics card
    [article] => graphics card
    [1] => graphics card
    [price] => 300
)
*/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T07:45:02.673

如果将结果存储在两个不同的数组中，则可以为此使用[array_merge 。](http://php.net/manual/en/function.array-merge.php)但是您上面描述的输出不正确。如果您在字符串中使用 regex1 进行搜索，则没有 $arr['price']，而只有 $arr['article']。同样适用于第二个 preg_match。这意味着如果您将一个结果存储在 $arr 中，将一个结果存储在 $arr2 中，您可以将它们合并到一个数组中。

preg_match 本身不提供功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T07:55:38.653

1.  对第二个 preg_match 使用不同的数组，比如说 `$arr2`
2.  遍历`$arr2`为`$key => $value`。
3.  `$arr[$key]`从和中选择非空值 `$arr2[$key]`，并将该值写入`$arr[$key]`。
4.  `$arr`将需要合并数组。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-17T07:44:18.277

这应该适用于您的示例：

```
array_merge( // selfexplanatory
           array_filter( preg_match($regex1, $string1, $arr)?$arr:array() ), //removes null values
           array_filter( preg_match($regex2, $string2, $arr)?$arr:array() ) 
  ); 
```

# javascript - Tempfolder and its lifetime

> ID：12929430
> 
> 赞同：1
> 
> 时间：2012-10-17T07:39:56.887
> 
> 标签：javascript, windows-8, winjs

I have a little question: in windows 8 we have "tempFolder". How can i set lifetime for files, that i want to store in this folder?

Dev-center says about this: "temporary: Data that could be removed by the system any time the app isn't running" It's mean that, when app suspended(or minimized) they/system can remove files in temp? If "yes", how to force remove after some time?

Working with html5/js...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T16:24:33.440

您只能在应用程序运行时删除文件。临时文件只保存运行之间不需要保留的文件。如果您不希望某个文件在某个时间点之后被使用，那么让您的应用程序将文件存储在它的本地文件夹中。当文件达到其到期日期时，然后在应用程序启动时删除该文件。

# package - How to create Play framework 2.0 debian package?

> ID：12929431
> 
> 赞同：2
> 
> 时间：2012-10-17T07:39:56.837
> 
> 标签：package, debian, playframework-2.0, dpkg

I would need to create a dpkg out of Play 2.0 Java project. It would run stand-alone with MongoDB (or some RDBS). It should be able to shutdown older version and ensure new version starts up cleanly.

Any advice how to create such? Any Play 2.0 related issues to take into account?

Edit: Looks like I will be using [fpm](https://github.com/jordansissel/fpm/wiki)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T18:49:18.267

所有这些包管理器安装基本上都是运行脚本。所以首先我会编写用于卸载、升级和安装的 bash 脚本。您必须考虑在重新安装时可以更换哪些部件，以及如何在数据库、文件复制和启动停止服务上应用迁移。与创建捆绑包相比，这是困难的部分。唯一需要考虑的就是玩！在需要更换某些东西时停止和启动服务器。

[这可能会启发您启动关闭脚本： https](https://gist.github.com/THemming/2173037) ://gist.github.com/THemming/2173037

# ios - Cocoa CoreGraphics: How to fill multiple shapes with a gradient

> ID：12929437
> 
> 赞同：1
> 
> 时间：2012-10-17T07:40:18.523
> 
> 标签：ios, core-graphics, gradient

I have logo text drawn as shapes (closed CGBezierPaths) that I want to fill with a gradient.(Light at the top, moving to dark at the bottom) How can I fill each shape with gradient such that the gradient is the same color for each shape.

The problem is drawing the gradient for each shape, if the letters are different height then the gradient has a different ramp since the distance is smaller. Hope that makes sense.

So basically I want draw a single gradient down the rect and use all the shapes as a clipping mask. Is this possible?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T08:06:51.637

对于渐变绘图 - 看看这个项目：

[https://github.com/wczekalski/CDpieMenu](https://github.com/wczekalski/CDPieMenu)

它以编程方式使用两种颜色创建渐变。

# html - HTML 列表 5 列

> ID：12929442
> 
> 赞同：0
> 
> 时间：2012-10-17T07:40:30.773
> 
> 标签：html, css, html-lists

为什么遵循 CSS-Code 没有填满 100% 的屏幕？我有 5 列，宽度为 20%，向左浮动。

```
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title></title>
    <style type="text/css" media="screen">
        body {
            padding: 0;
            margin: 0;
        }
        #container {
            width: 100%;
            background-color: red;
            height: 42px;
        }

        ul {
            padding: 0;
            margin: 0;
            width: 100%;
            overflow: hidden;
            list-style-type: none;
            float: left;
            white-space: nowrap;
            display: inline;
            height: 42px;
        }

        li {
            float: left;
            width: 20%;
            padding: 0;
            background-color: #000000;
            display: inline;
        }

        a {
            text-decoration: none;
            color: #333;
            text-align: center;
            display: block;
            height: 42px;
            line-height: 42px;
            white-space: nowrap;
            overflow: hidden;
            font-size: 0.9em;
            width: auto;
        }
        a:hover {
            background-color: #ccc;
            color: #FFF;
        }

    </style>
</head>
<body>
    <div id="container">
        <ul>
            <li>
                <a href="#">Home</a>
            </li>
            <li>
                <a href="#">Services</a>
            </li>
            <li>
                <a href="#">Portfolio</a>
            </li>
            <li>
                <a href="#">Clients</a>
            </li>
            <li>
                <a href="#">Articles</a>
            </li>
        </ul>
    </div>

</body> 
```

右侧总是有一个红色区域，但 5*20% = 100% 所以不可能。怎么了？

亲切的问候，PP

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T08:07:08.487

我可以在 Safari 中看到这个问题。它仅在调整浏览器大小时有时会发生。这似乎是 WebKit 浏览器中的一个舍入问题。我发现这个类似的 qwuestion “ [100% width divs not spanning the entire width of the browser in webkit](https://stackoverflow.com/q/6659359/1456376) ” 并带有以下评论：

> 感谢您的建议，不幸的是问题仍然存在。我想我已经将它缩小到 Safari 和 Chrome 将基于百分比的宽度四舍五入到百分比的 1/2（并且没有更多），这会导致剩余空间，除非总宽度是“像素完美”。也许我可以想出一种方法来欺骗浏览器正确计算它，但目前我仍然无法解决这个问题。

也许您可以`display: table-cell`在`<li>`-tags 上使用来避免这个问题，因为这应该会强制浏览器始终使用 100% 宽度。

**示例 HTML**

```
​&lt;div>
    <ul>
        <li><a href="">Value 1</a></li>
        <li><a href="">Value 2</a></li>
        <li><a href="">Value 3</a></li>
        <li><a href="">Value 4</a></li>
        <li><a href="">Value 5</a></li>
    </ul>
</div>​​​​​​​​​​​​​​​​​​​​​​ 
```

**示例 CSS**

```
​ul {
    display: table;
    width: 100%;
    min-width: 400px;
    margin: 0;
    padding: 0;
    background: red;
    list-style: none;
}

li {
    display: table-cell;
    width: 20%;
    margin: 0;
    padding: 0;
    text-align: center;
    background: green;
}

li > a {
    display: block;
    height: 42px;
    line-height: 42px;
    background: #ccc;
} 
```

**先试后买**

[http://jsfiddle.net/Fsjns/](http://jsfiddle.net/Fsjns/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T08:38:32.093

分辨率 1024*(20/100) = 204.8 像素

分辨率 1366*(20/100) = 207.2 像素

我认为屏幕不能显示小于一个像素

# c# - Connection of MVC3 database to azure cloud server

> ID：12929443
> 
> 赞同：0
> 
> 时间：2012-10-17T07:40:36.047
> 
> 标签：c#, asp.net-mvc-3, azure

I have tried connecting my webapp database to the azure cloud server using a connectionstring (provided by azure) from the web.config. But theres always an error that says **"Format of the initialization string does not conform to specification starting at index 0."**

Anyone encountered this error before? Please help.

connection string below :

```
<add name="SQLAzureConnection"
        connectionString="Server=tcp:mnftprvzdk.database.windows.net,1433;Database=mydb;User ID=user;Password=pass;Trusted_Connection=False;Encrypt=True;Connection Timeout=30;"
        providerName="System.Data.SqlClient" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T08:19:51.137

用户名应该是**user@machinename**，（没有完整的 DNS）。

所以在这种情况下**user@mnftprvzdk**。

格式为：

```
Server=tcp:[serverName].database.windows.net;Database=myDataBase;
User ID=[LoginForDb]@[serverName];Password=myPassword;Trusted_Connection=False;Encrypt=True; 
```

# php - Codeigniter 会话库错误

> ID：12929445
> 
> 赞同：0
> 
> 时间：2012-10-17T07:40:57.183
> 
> 标签：php, macos, codeigniter, session, xampp

我收到这个奇怪的错误，有人知道吗？

```
Severity: Notice  --> unserialize() [<a href='function.unserialize'>function.unserialize</a>]: Error at offset 0 of 286 bytes /Applications/XAMPP/xamppfiles/htdocs/login/system/libraries/Session.php 723 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T07:48:58.380

这意味着会话表中的 user_data 字符串可能出现问题。可能是 user_data 的值被编辑了，这会使序列化的字符串“损坏”。

您应该查看 php.net 上有关序列化的文档。关于这个过程是如何工作的。[http://php.net/manual/en/function.serialize.php](http://php.net/manual/en/function.serialize.php)

# android - Which is the best way to implement this graphical design? (Android)

> ID：12929446
> 
> 赞同：4
> 
> 时间：2012-10-17T07:40:58.807
> 
> 标签：android

Hello everyone and thanks for your time.

**Introduction to the problem:** Basically the main problem is that I'm designing an android tablet application and I don't know exactly which is the best way to implement the kind of design I've been thinking about. I've been reading that is possible to use another platforms apart of Android, like OpenGL or HTML, but I don't actually know how to do it and if its necessary.

**What do I attempt to do?** I didn't know how to explain exactly which is my idea using words so I decided to prepare a small image about it, here it is:

![Design about what I attempt to implement](../Images/cf7b52a87b5e50763f70be82678ad879.png)

So, the idea is to drag&drop the buttons to the color square, and detect if they are colliding, if that happens, start an event. Then all the buttons are going to be ordered again by themselves.

**Which is the question then?** I'm new at android, and I have no idea which is the best way to start implementing this, if I should bet for OpenGL or program directly in android. And in both cases, which is the best way **START CREATING** something like this?

**Last things:** I want to make clear something, just in case: This IS NOT any school work that someone asked me to do, I'm doing it by my own. I'm **NOT ASKING PEOPLE TO DO MY WORK** I'm just asking your opinion and asking for help and guidance about how to start managing this. (so I want your professional opinion, not any single line of code) :D

Thank you very much to you all. :)

Martí.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T08:00:25.817

这听起来很容易在 HTML / JavaScript 中使用触摸事件来完成，也许使用拖放事件的[支持库。](https://stackoverflow.com/questions/5796109/jquery-drag-and-drop-on-touch-devices-ipad-android)我不知道这对您是否重要，但该解决方案的好处是它可以很容易地从 Android 移植到其他移动设备。

就像 Quintin 所说，如果性能是一个大问题，您可以优化并使用 OpenGL，但您可能会在一天内用 HTML 敲出一个简单的原型......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T07:55:45.497

Open GL 似乎是您最好的选择。我对 Android OpenGL 没有太多经验，但它将是编写应用程序的最有效方式 - 因为您正在处理碰撞检测和颜色。

Android OpenGL 将是最佳选择，因为它将由 ADK 本地编译，而 HTML 将在运行时进行解释。

至于使用普通乏味的 Android 布局，我不建议这样做，因为这不是使用标准组件的“标准”UI。您正在创建一个非常图形化的完全独特的界面，因此我建议您坚持这一点。

**编辑：**您会发现，通过使用标准布局，您的所有用户界面组件都必须进行自定义，并且您将在 onDraw() 方法中花费大量时间进行碰撞检测。

这样做的一个问题是您需要检查对象是否与另一个对象发生冲突，从而使某些类型的对象相互了解，并且可能会冒循环引用的风险。而如果您使用 OpenGL，您可以拥有一个“Shape”类型列表，然后拥有一个“checkCollision(Shape draggedObject)”方法，该方法遍历形状列表并使用最简单对象的优化碰撞检测来检查碰撞。

第二个问题是在 onDraw() 方法中进行碰撞检测会使您的应用程序滞后，并且在执行拖动时对用户来说似乎很粘。组件越多，问题就越多。

**编辑 2：** 以下是 Android OpenGL 的一些资源：http: [//developer.android.com/guide/topics/graphics/opengl.html](http://developer.android.com/guide/topics/graphics/opengl.html)
[http://www.learnopengles.com/android-lesson-one-getting-started/](http://www.learnopengles.com/android-lesson-one-getting-started/)
[使用 OpenGL 的 2D 示例](https://stackoverflow.com/questions/5220105/2d-example-with-opengl)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T08:10:24.063

在我看来，您不需要任何框架。你可以用安卓来做这一切。我也建议你使用安卓。我不是一个好的设计师，但我的建议是：

2x Framelayout，用于左侧的颜色工具和右侧的颜色工具对于颜色工具，对于每 2 种颜色，您可以使用 LinearLayout。如果您想要精确的背景设计，您可以使用图像软件进行设计，并将其设置在背景中。对于颜色，您可以使用 imageButton。

我还建议您阅读如何设计应用程序的教程，这是一个很好的教程：http: [//mobile.tutsplus.com/tutorials/android/android-layout/](http://mobile.tutsplus.com/tutorials/android/android-layout/)

# servicestack - 为什么压缩在服务堆栈中不起作用

> ID：12929447
> 
> 赞同：0
> 
> 时间：2012-10-17T07:40:59.487
> 
> 标签：servicestack

我无法让压缩与 ServiceStack 一起使用。我从我的服务器返回`.ToOptimizedResult`，我得到一个日志条目，告诉我添加了标头：

```
ServiceStack.WebHost.Endpoints.Extensions.HttpResponseExtensions: 
DEBUG: Setting Custom HTTP Header: Content-Encoding: deflate 
```

但是返回的内容没有被压缩。我已经在 Chrome 中使用 Fiddler 和 Network 检查器进行了检查。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T10:57:04.637

抱歉，似乎我的杀毒软件 (BitDefender) 会解压缩数据以扫描病毒，即使我禁用了 AV。在其他计算机上测试时，输出被压缩。

# tridion - Issues in SDL Tridion User Interface 2012

> ID：12929448
> 
> 赞同：0
> 
> 时间：2012-10-17T07:41:02.733
> 
> 标签：tridion

I have Installed SDL Tridion User Interface 2012 successfully and able to create a pageType and configure Content Types (from Publication’s properties). Now I have below issues/concerns -

1.  As per my understanding whenever a new page will be created using this page type, all the metadata, components etc. should be cloned. But I am not getting any option to select a page type during page creation.

2.  Is it possible to create multiple content types per publication and how I can allow a Content Type on a specified Page Type?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-17T09:30:57.733

内容类型仅在 SiteEdit 中使用——是的，您可以为每个出版物创建多个。您可以在仪表板选项卡上进行配置。

有关更多信息，请查看有关 LiveContent的[文档。](http://sdllivecontent.sdl.com/LiveContent/content/en-US/UIU4SDLT2011SP1/concept_F774D9E710B74D6B9BC16EDB7649397B)

# android - Android HTTP 连接

> ID：12929453
> 
> 赞同：0
> 
> 时间：2012-10-17T07:41:10.533
> 
> 标签：android, apache-httpclient-4.x

[此处](http://android-developers.blogspot.in/2011/09/androids-http-clients.html)的 android 开发者博客解释了在 android 中建立 http 连接的 2 种不同方法。它说[HttpURLConnection](http://developer.android.com/reference/java/net/HttpURLConnection.html)应该用于较新的应用程序。

我想知道的是在 android 2.3(Gingerbread) 及更高版本中使用时[DefaulHttpClient中的错误是什么？](http://developer.android.com/reference/org/apache/http/impl/client/DefaultHttpClient.html)

### 编辑

删除了问题的第二部分。我想主要了解 2.3 及更高版本中 DefaultHttpConnection 的错误，因为我有一个非常小的用例（POST 请求发送和接收 JSON 格式的字符串），如果这个用例没有问题，我不想膨胀我的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T07:45:09.410

您可以使用 Build.VERSION 找出您的应用程序在哪个版本的 Android 上运行，并使用它来决定走哪条路。

[http://developer.android.com/reference/android/os/Build.VERSION.html](http://developer.android.com/reference/android/os/Build.VERSION.html)

# varnish - 清漆缓存 2 台服务器上的 apache 虚拟主机

> ID：12929456
> 
> 赞同：0
> 
> 时间：2012-10-17T07:41:15.170
> 
> 标签：varnish

我们有 2 台 Apache 服务器提供不同的内容并使用虚拟主机。在一台服务器上，我们有一个博客、wiki 和论坛，而在另一台服务器上，我们有一个帮助台和静态页面。我们目前在两者前面的第三台服务器上都有一个 squid 反向代理。

我们正在考虑用 varnish 替换 squid 反向代理。

我一直找不到任何有用的东西，并且[清漆、apache 和具有自己 IP 地址的基于名称的虚拟主机](https://stackoverflow.com/questions/8111317/varnish-apache-and-namebased-virtual-host-with-own-ip-addresses)不起作用。

这是我们正在安装 varnish 的 Centos 6 服务器。

有没有人有任何可能有效的配置？

编辑添加：好的 终于想通了。请在下面找到完整的脚本，以供后代使用。

在 server1 上是：registration.test.co.za oldforum.test.co.za

在 Server2 上是：forum.test.co.za blog.test.co.za

```
 acl internal_net {
        "localhost";
        "192.168.1.0"/24;

}
backend server1 {
  .host = "192.168.1.101";
  .port = "80";
}
backend server2 {
    .host = "192.168.1.102";
    .port = "80";
}

# Respond to incoming requests
sub vcl_recv {
######BACKENDS#####################
#
#SERVER1
#
if (req.http.host == "registration.test.co.za$") {
set req.backend = server1;

} else if (req.http.host ~ "oldforum.test.co.za$") {
        set req.backend = server1;
#
#SERVER2
#
} else if (req.http.host ~ "forum.test.co.za$") {
        set req.backend = server2;

} else if (req.http.host ~ "blog.test.co.za$") {
        set req.backend = server2;
}

        # Allow purge only from internal users
        if (req.request == "PURGE") {
                if (!client.ip ~ internal_net) {
                        error 405 "Not allowed.";
                }
                return (lookup);

}
# Non-RFC2616 or weird requests
        if (req.request != "GET" &&
                req.request != "HEAD" &&
                req.request != "PUT" &&
                req.request != "POST" &&
                req.request != "TRACE" &&
                req.request != "OPTIONS" &&
                req.request != "DELETE") {
                return (pass);
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T10:42:28.040

您提到的“不起作用”的帖子似乎很好。您只需在清漆配置中创建 2 个后端，然后根据请求的主机选择后端。

如果你不能让它工作，你需要发布你的设置和配置的详细信息，以获得进一步的帮助。

# web-services - Liferay protlet 网络服务错误

> ID：12929457
> 
> 赞同：0
> 
> 时间：2012-10-17T07:41:18.483
> 
> 标签：web-services, liferay, portlet

我的liferay portlet 有问题。

我很好地部署了 portlet 并在站点中使用它。

我的 portlet 中有一个 API/Web 服务。几天前它工作正常，但现在我收到了 ClassCastException。

似乎是什么问题？

这是堆栈跟踪：

```
AXIS error

Fault - ; nested exception is: 
    org.apache.axis.ConfigurationException: java.lang.ClassCastException: org.apache.axis.handlers.http.URLMapper cannot be cast to org.apache.axis.Handler
java.lang.ClassCastException: org.apache.axis.handlers.http.URLMapper cannot be cast to org.apache.axis.Handler
    at org.apache.axis.deployment.wsdd.WSDDDeployableItem.makeNewInstance(WSDDDeployableItem.java:302)
    at org.apache.axis.deployment.wsdd.WSDDDeployableItem.getNewInstance(WSDDDeployableItem.java:274)
    at org.apache.axis.deployment.wsdd.WSDDDeployableItem.getInstance(WSDDDeployableItem.java:260)
    at org.apache.axis.deployment.wsdd.WSDDDeployment.getHandler(WSDDDeployment.java:394)
    at org.apache.axis.deployment.wsdd.WSDDDeployableItem.getNewInstance(WSDDDeployableItem.java:276)
    at org.apache.axis.deployment.wsdd.WSDDDeployableItem.getInstance(WSDDDeployableItem.java:260)
    at org.apache.axis.deployment.wsdd.WSDDChain.makeNewInstance(WSDDChain.java:125)
    at org.apache.axis.deployment.wsdd.WSDDDeployableItem.getNewInstance(WSDDDeployableItem.java:274)
    at org.apache.axis.deployment.wsdd.WSDDDeployableItem.getInstance(WSDDDeployableItem.java:260)
    at org.apache.axis.deployment.wsdd.WSDDTargetedChain.makeNewInstance(WSDDTargetedChain.java:151)
    at org.apache.axis.deployment.wsdd.WSDDDeployableItem.getNewInstance(WSDDDeployableItem.java:274)
    at org.apache.axis.deployment.wsdd.WSDDDeployableItem.getInstance(WSDDDeployableItem.java:260)
    at org.apache.axis.deployment.wsdd.WSDDDeployment.getTransport(WSDDDeployment.java:410)
    at org.apache.axis.configuration.FileProvider.getTransport(FileProvider.java:257)
    at org.apache.axis.AxisEngine.getTransport(AxisEngine.java:332)
    at org.apache.axis.server.AxisServer.generateWSDL(AxisServer.java:441)
    at org.apache.axis.transport.http.QSWSDLHandler.invoke(QSWSDLHandler.java:68)
    at sun.reflect.GeneratedMethodAccessor360.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.apache.axis.transport.http.AxisServlet.processQuery(AxisServlet.java:1226)
    at org.apache.axis.transport.http.AxisServlet.doGet(AxisServlet.java:249)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    at org.apache.axis.transport.http.AxisServletBase.service(AxisServletBase.java:327)
    at com.liferay.util.axis.AxisServlet.service(AxisServlet.java:122)
    at com.liferay.portal.servlet.AxisServlet.service(AxisServlet.java:108)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at com.liferay.portal.kernel.servlet.PortalClassLoaderServlet.service(PortalClassLoaderServlet.java:98)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:72)
    at sun.reflect.GeneratedMethodAccessor353.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at com.liferay.portal.kernel.bean.ClassLoaderBeanHandler.invoke(ClassLoaderBeanHandler.java:54)
    at $Proxy1003.doFilter(Unknown Source)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:72)
    at com.liferay.portal.kernel.servlet.BaseFilter.processFilter(BaseFilter.java:121)
    at com.liferay.portal.servlet.filters.secure.SecureFilter.processFilter(SecureFilter.java:201)
    at com.liferay.portal.kernel.servlet.BaseFilter.doFilter(BaseFilter.java:48)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDoFilter(InvokerFilterChain.java:203)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:105)
    at com.liferay.portal.kernel.servlet.PortalClassLoaderFilter.doFilter(PortalClassLoaderFilter.java:69)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDoFilter(InvokerFilterChain.java:203)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:105)
    at sun.reflect.GeneratedMethodAccessor353.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at com.liferay.portal.kernel.bean.ClassLoaderBeanHandler.invoke(ClassLoaderBeanHandler.java:54)
    at $Proxy1003.doFilter(Unknown Source)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:72)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDirectCallFilter(InvokerFilterChain.java:164)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:92)
    at com.liferay.portal.kernel.servlet.PortalClassLoaderFilter.doFilter(PortalClassLoaderFilter.java:69)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDoFilter(InvokerFilterChain.java:203)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:105)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilter.doFilter(InvokerFilter.java:70)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:928)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:539)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:298)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:679)

org.apache.axis.ConfigurationException: java.lang.ClassCastException: org.apache.axis.handlers.http.URLMapper cannot be cast to org.apache.axis.Handler
java.lang.ClassCastException: org.apache.axis.handlers.http.URLMapper cannot be cast to org.apache.axis.Handler
    at org.apache.axis.deployment.wsdd.WSDDDeployableItem.makeNewInstance(WSDDDeployableItem.java:302)
    at org.apache.axis.deployment.wsdd.WSDDDeployableItem.getNewInstance(WSDDDeployableItem.java:274)
    at org.apache.axis.deployment.wsdd.WSDDDeployableItem.getInstance(WSDDDeployableItem.java:260)
    at org.apache.axis.deployment.wsdd.WSDDDeployment.getHandler(WSDDDeployment.java:394)
    at org.apache.axis.deployment.wsdd.WSDDDeployableItem.getNewInstance(WSDDDeployableItem.java:276)
    at org.apache.axis.deployment.wsdd.WSDDDeployableItem.getInstance(WSDDDeployableItem.java:260)
    at org.apache.axis.deployment.wsdd.WSDDChain.makeNewInstance(WSDDChain.java:125)
    at org.apache.axis.deployment.wsdd.WSDDDeployableItem.getNewInstance(WSDDDeployableItem.java:274)
    at org.apache.axis.deployment.wsdd.WSDDDeployableItem.getInstance(WSDDDeployableItem.java:260)
    at org.apache.axis.deployment.wsdd.WSDDTargetedChain.makeNewInstance(WSDDTargetedChain.java:151)
    at org.apache.axis.deployment.wsdd.WSDDDeployableItem.getNewInstance(WSDDDeployableItem.java:274)
    at org.apache.axis.deployment.wsdd.WSDDDeployableItem.getInstance(WSDDDeployableItem.java:260)
    at org.apache.axis.deployment.wsdd.WSDDDeployment.getTransport(WSDDDeployment.java:410)
    at org.apache.axis.configuration.FileProvider.getTransport(FileProvider.java:257)
    at org.apache.axis.AxisEngine.getTransport(AxisEngine.java:332)
    at org.apache.axis.server.AxisServer.generateWSDL(AxisServer.java:441)
    at org.apache.axis.transport.http.QSWSDLHandler.invoke(QSWSDLHandler.java:68)
    at sun.reflect.GeneratedMethodAccessor360.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.apache.axis.transport.http.AxisServlet.processQuery(AxisServlet.java:1226)
    at org.apache.axis.transport.http.AxisServlet.doGet(AxisServlet.java:249)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    at org.apache.axis.transport.http.AxisServletBase.service(AxisServletBase.java:327)
    at com.liferay.util.axis.AxisServlet.service(AxisServlet.java:122)
    at com.liferay.portal.servlet.AxisServlet.service(AxisServlet.java:108)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at com.liferay.portal.kernel.servlet.PortalClassLoaderServlet.service(PortalClassLoaderServlet.java:98)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:72)
    at sun.reflect.GeneratedMethodAccessor353.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at com.liferay.portal.kernel.bean.ClassLoaderBeanHandler.invoke(ClassLoaderBeanHandler.java:54)
    at $Proxy1003.doFilter(Unknown Source)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:72)
    at com.liferay.portal.kernel.servlet.BaseFilter.processFilter(BaseFilter.java:121)
    at com.liferay.portal.servlet.filters.secure.SecureFilter.processFilter(SecureFilter.java:201)
    at com.liferay.portal.kernel.servlet.BaseFilter.doFilter(BaseFilter.java:48)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDoFilter(InvokerFilterChain.java:203)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:105)
    at com.liferay.portal.kernel.servlet.PortalClassLoaderFilter.doFilter(PortalClassLoaderFilter.java:69)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDoFilter(InvokerFilterChain.java:203)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:105)
    at sun.reflect.GeneratedMethodAccessor353.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at com.liferay.portal.kernel.bean.ClassLoaderBeanHandler.invoke(ClassLoaderBeanHandler.java:54)
    at $Proxy1003.doFilter(Unknown Source)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:72)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDirectCallFilter(InvokerFilterChain.java:164)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:92)
    at com.liferay.portal.kernel.servlet.PortalClassLoaderFilter.doFilter(PortalClassLoaderFilter.java:69)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDoFilter(InvokerFilterChain.java:203)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:105)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilter.doFilter(InvokerFilter.java:70)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:928)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:539)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:298)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:679)

    at org.apache.axis.deployment.wsdd.WSDDDeployableItem.makeNewInstance(WSDDDeployableItem.java:304)
    at org.apache.axis.deployment.wsdd.WSDDDeployableItem.getNewInstance(WSDDDeployableItem.java:274)
    at org.apache.axis.deployment.wsdd.WSDDDeployableItem.getInstance(WSDDDeployableItem.java:260)
    at org.apache.axis.deployment.wsdd.WSDDDeployment.getHandler(WSDDDeployment.java:394)
    at org.apache.axis.deployment.wsdd.WSDDDeployableItem.getNewInstance(WSDDDeployableItem.java:276)
    at org.apache.axis.deployment.wsdd.WSDDDeployableItem.getInstance(WSDDDeployableItem.java:260)
    at org.apache.axis.deployment.wsdd.WSDDChain.makeNewInstance(WSDDChain.java:125)
    at org.apache.axis.deployment.wsdd.WSDDDeployableItem.getNewInstance(WSDDDeployableItem.java:274)
    at org.apache.axis.deployment.wsdd.WSDDDeployableItem.getInstance(WSDDDeployableItem.java:260)
    at org.apache.axis.deployment.wsdd.WSDDTargetedChain.makeNewInstance(WSDDTargetedChain.java:151)
    at org.apache.axis.deployment.wsdd.WSDDDeployableItem.getNewInstance(WSDDDeployableItem.java:274)
    at org.apache.axis.deployment.wsdd.WSDDDeployableItem.getInstance(WSDDDeployableItem.java:260)
    at org.apache.axis.deployment.wsdd.WSDDDeployment.getTransport(WSDDDeployment.java:410)
    at org.apache.axis.configuration.FileProvider.getTransport(FileProvider.java:257)
    at org.apache.axis.AxisEngine.getTransport(AxisEngine.java:332)
    at org.apache.axis.server.AxisServer.generateWSDL(AxisServer.java:441)
    at org.apache.axis.transport.http.QSWSDLHandler.invoke(QSWSDLHandler.java:68)
    at sun.reflect.GeneratedMethodAccessor360.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.apache.axis.transport.http.AxisServlet.processQuery(AxisServlet.java:1226)
    at org.apache.axis.transport.http.AxisServlet.doGet(AxisServlet.java:249)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    at org.apache.axis.transport.http.AxisServletBase.service(AxisServletBase.java:327)
    at com.liferay.util.axis.AxisServlet.service(AxisServlet.java:122)
    at com.liferay.portal.servlet.AxisServlet.service(AxisServlet.java:108)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at com.liferay.portal.kernel.servlet.PortalClassLoaderServlet.service(PortalClassLoaderServlet.java:98)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:72)
    at sun.reflect.GeneratedMethodAccessor353.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at com.liferay.portal.kernel.bean.ClassLoaderBeanHandler.invoke(ClassLoaderBeanHandler.java:54)
    at $Proxy1003.doFilter(Unknown Source)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:72)
    at com.liferay.portal.kernel.servlet.BaseFilter.processFilter(BaseFilter.java:121)
    at com.liferay.portal.servlet.filters.secure.SecureFilter.processFilter(SecureFilter.java:201)
    at com.liferay.portal.kernel.servlet.BaseFilter.doFilter(BaseFilter.java:48)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDoFilter(InvokerFilterChain.java:203)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:105)
    at com.liferay.portal.kernel.servlet.PortalClassLoaderFilter.doFilter(PortalClassLoaderFilter.java:69)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDoFilter(InvokerFilterChain.java:203)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:105)
    at sun.reflect.GeneratedMethodAccessor353.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at com.liferay.portal.kernel.bean.ClassLoaderBeanHandler.invoke(ClassLoaderBeanHandler.java:54)
    at $Proxy1003.doFilter(Unknown Source)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:72)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDirectCallFilter(InvokerFilterChain.java:164)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:92)
    at com.liferay.portal.kernel.servlet.PortalClassLoaderFilter.doFilter(PortalClassLoaderFilter.java:69)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDoFilter(InvokerFilterChain.java:203)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:105)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilter.doFilter(InvokerFilter.java:70)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:928)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:539)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:298)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:679) 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T13:25:42.787

看起来您在 portlet 和服务器库中有重复的轴 jar。先检查一下。

liferay-portal-6.1.10-ee-ga1\tomcat-7.0.25\webapps\ROOT\WEB-INF\lib

与您的 portlet 库相比。

# symfony - Symfony PdoSessionStorage Issues After Upgrading to 2.1

> ID：12929458
> 
> 赞同：0
> 
> 时间：2012-10-17T07:41:20.783
> 
> 标签：symfony, symfony-2.1

I'm having some issues with my Symfony application after upgrading from 2.0.X to 2.1\. The application was using PdoSessionStorage just fine before the upgrade. [The docs](http://symfony.com/doc/current/cookbook/configuration/pdo_session_storage.html) say that there are some differences in the config for PdoSessionStorage in 2.1 but I think that I was able to make those changes okay.

The problem that I'm seeing is that there is no data being added to the session_value(db_data_col) column in the session table. It is adding a new record for the current session but it's leaving the data empty.

Has anyone had this problem yet?

My config contains the following:

```
framework:
    session:
        handler_id:     session.handler.pdo
parameters:
    pdo.db_options:
        db_table:    session
        db_id_col:   session_id
        db_data_col: session_value
        db_time_col: session_time
services:
    pdo:
        class: PDO
        arguments:
            dsn:         "mysql:host=%database_host%;port=%database_port%;dbname=%database_name%"
            user:        %database_user%
            password:    %database_password%

    session.handler.pdo:
        class:     Symfony\Component\HttpFoundation\Session\Storage\Handler\PdoSessionHandler
        arguments: [@pdo, %pdo.db_options%] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T00:54:14.527

弄清楚发生了什么。我们发现了一些修改 $_SESSION 的旧代码。S2.1 将它在 $_SESSION 中使用的键从“_symfony2”更改为“ *sf2* *”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T15:12:19.590

我有同样的问题。查看 PdoSessionHandler.php 代码后，我发现代码依赖于 session_id 是 uniq 的事实。如果您像我一样，并且根据[本文](http://symfony.com/doc/current/cookbook/configuration/pdo_session_storage.html)创建了会话表，则情况并非如此。

编辑：实际上是这样。我不知道为什么在我的数据库中不是这样

就我而言，要修复它，我必须清空会话表并使 session_id 字段为 uniq

# database-design - Database table design when an entry has a work flow

> ID：12929460
> 
> 赞同：0
> 
> 时间：2012-10-17T07:41:32.997
> 
> 标签：database-design

There is a table info_table, each row in this table has a work flow, they must passed by step1, step2 ..., every step will save some columns value, there will be too many columns so that hard to read, is there a better way to design it? thank you!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T07:52:56.643

我会为任务的工作流程的每个步骤建议一个包含一行的表格

例如：

```
task    step    details
1       1       blah
1       2       whatever
2       1       etc 
```

# ajax - 部分响应编写器没有与 PPRResponseWriter 集成是什么意思？

> ID：12929467
> 
> 赞同：0
> 
> 时间：2012-10-17T07:41:44.317
> 
> 标签：ajax, jsf, primefaces

我正在尝试使用 JSF、primefaces、Tomcat7 开发应用程序。当我执行 ajax 事件时，我收到以下警告：

```
17-ott-2012 9.26.04 org.apache.myfaces.trinidadinternal.context.PartialViewContextImpl getPartialResponseWriter
AVVERTENZA: getPartialResponseWriter() called during render_reponse. The returned writer is not integrated with PPRResponseWriter 
```

这是什么意思？我该怎么做才能整合它？在我的服务器日志中，在启动时，我发现一些关于未找到某些 Web 上下文参数的消息。可能与之前的警告有关吗？谢谢你的帮助！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T11:00:18.477

此类特定于[MyFaces Trinidad](http://myfaces.apache.org/trinidad)。显然，您将 Trinidad 与 PrimeFaces 混合使用，但效果不佳。由于您在问题中没有提到任何有关特立尼达的信息，因此可能是以前的实验遗留下来的几个组件库。您可能希望在使用 PrimeFaces 之前将其删除。

# php - How to list out latitude and longitude points located between two degrees

> ID：12929474
> 
> 赞同：2
> 
> 时间：2012-10-17T07:42:16.383
> 
> 标签：php, web-services, google-maps, google-maps-api-3, google-search-api

I have a database with list of latitude and longitude points i want to search.

Now, how can i list the latitude and long points which are situated in **between 0 and 45** degrees or in range of **15 to 30 degrees** . Is there any method or api.

The post values are **lat,long and degreeslowerlimit and degreesupperlimit**.

Please help me to achieve this

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T10:31:46.667

假设你的数据库是 MySQL

```
$minLat = $_POST[degreeslowerlimit);//depending on your parameters
$maxLat = $_POST[degreeslowerlimit) ;

$STH = $dbh->prepare('SELECT * FROM table WHERE `latitude` BETWEEN :minLat AND :maxLat')
$STH->bindParam(':minLat', $minLat);
$STH->bindParam(':maxLat', $maxLat);

$STH->execute(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T07:50:27.740

[http://transition.fcc.gov/mb/audio/bickel/DDDMMSS-decimal.html](http://transition.fcc.gov/mb/audio/bickel/DDDMMSS-decimal.html)

检查Javascript。这很简单。

# git - Is there a URL in github that will show exactly the hash of the current HEAD?

> ID：12929475
> 
> 赞同：1
> 
> 时间：2012-10-17T07:42:20.363
> 
> 标签：git, github

I'd like to trigger builds based on whether or not my repository has changed. I was wondering if there were something like

```
https://github.com/my/repository/branch/master/HEAD 
```

which would show just the sha1 of master's most recent commit.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T07:59:52.887

请参阅[https://api.github.com/repos/flevour/symfony/branches/master](https://api.github.com/repos/flevour/symfony/branches/master)，解析 json 并检查 sha 属性。一般来说，[http://developer.github.com/v3/repos/#get-branch](http://developer.github.com/v3/repos/#get-branch)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T08:01:38.117

## 使用服务挂钩

与其轮询某些提要，不如使用[服务挂钩](https://help.github.com/articles/post-receive-hooks)向您的服务器/任何服务器发送请求，以便在您的存储库更新时执行 <anything> 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T07:45:48.027

你也许可以解析 RSS 提要

```
https://github.com/<username>/<repo>/commits/master.atom 
```

# node.js - MongooseArray#indexOf 不适用于对象 ID

> ID：12929476
> 
> 赞同：3
> 
> 时间：2012-10-17T07:42:20.987
> 
> 标签：node.js, mongoose

我正在尝试使用猫鼬内置的 indexOf() 方法来查看 doc 数组中是否存在对象 ID。但它似乎不适用于对象 ID，即使文档说它应该这样做。

```
var UserSchema = new Schema({
  , following : [{ type: Schema.ObjectId, ref: 'User'}]
  , followers : [{ type: Schema.ObjectId, ref: 'User'}]
}); 
```

这给了我-1

```
user1.followers.indexOf(user2._id); 
```

对于以下数据：

```
console.log( user1.followers ) # => [ '505e2f1de888c7d701000001' ]
conosle.log( user2._id ) # => 505e2f1de888c7d701000001
console.log( user1.followers.indexOf( user2._id ) ) # => -1 
```

我也试过只传递 user2 对象，但同样的问题：

```
console.log( user1.followers.indexOf( user2 ) ) # => -1 
```

我应该在最后一个日志中看到 1，而不是 -1。

我究竟做错了什么？

这是猫鼬文档： http: [//mongoosejs.com/docs/api.html#types_array_MongooseArray-indexOf](http://mongoosejs.com/docs/api.html#types_array_MongooseArray-indexOf)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-05-30T14:53:22.497

老问题，但这让我最近有点困惑，所以我将发布我的解决方案，供其他人熬夜：

```
user1.followers.indexOf(user2._id.toString()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T09:33:25.250

我发现了问题。我使用的是存储在会话中的用户，而不是数据库中的用户对象。此外，它实际上必须是传递的对象 id：

```
User.findById(req.session.userid, function(err, user){
  user2.isFollowing = user.following.indexOf(user2._id);
}); 
```

在会话中存储对象是不好的。应该始终从 db 中检索它们，这样它们就不会过时，并且您拥有一个真正的 mongoose doc 对象，而不是来自 redis 存储的 json 对象。

# struts-1 - 如何从struts中的jsp获取动态文本框值的数量？

> ID：12929480
> 
> 赞同：0
> 
> 时间：2012-10-17T07:42:34.263
> 
> 标签：struts-1

我有许多文本框，用户将在其中输入评论。我需要获取所有文本框值并将其传递给操作类。请帮助我前进。

这是我的jsp代码：

```
 <layout:collectionItem  title="Comments">
        <layout:text readonly="true" property="comments"
        ondblclick="javascript:enableText(this);" name="comments"
        layout="false" />
   </layout:collectionItem> 
```

这是我的动作类代码：

```
 DynaActionForm dynaForm = (DynaActionForm) form;
    TablesVo tablesVo = new TablesVo();

    tablesVo.setComments((String) dynaForm.get("comments"));
    System.out.println("Comments:>>>>>>>>>>>>>>>>>>>>>>>"
                + (String) dynaForm.get("comments")); 
```

这是我的 struts 配置代码：

```
 <form-bean name="projectForm" type="org.apache.struts.action.DynaActionForm">

  <action-mappings>

  <action path="/Projects" type="com.rntbci.ptm.client.action.PTMManageAction"
            name="projectForm" scope="session" parameter="reqCode">
            <forward name="display_projects" path="tile.ptm.projects" />
            <forward name="display_columns" path="tile.ptm.columns" /> 
  </action>

  </action-mappings> 
```

在过去的四天里，我一直在努力解决这个问题。请帮我一个忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T09:24:19.137

`name`为所有文本框赋予相同的属性

```
<input type="text" name="comment"/>
<input type="text" name="comment"/>
...
<input type="text" name="comment"/> 
```

现在在您的操作类中，而不是声明一个字符串变量，而是声明一个 List 变量

```
private List<String> comment; //with getter/setter 
```

您现在可以遍历此列表以阅读评论

```
Iterator<String> it = comment.iterator();
while(it.hasNext()){
   System.out.println("\n comment: "+it.next());
} 
```

# ruby-on-rails - url的扩展名与rails中的格式化路由路径和普通路由路径不同

> ID：12929482
> 
> 赞同：2
> 
> 时间：2012-10-17T07:42:37.380
> 
> 标签：ruby-on-rails, web-applications, routes, pdfkit

我使用 ruby​​ 1.8.7 和 Rails 2.3.14。

我知道格式化的路线已被弃用。 [没有更多的格式化路线](http://archives.ryandaigle.com/articles/2008/11/27/what-s-new-in-edge-rails-no-more-formatted-routes)

对于使用 PDFKit 生成 PDF，我需要一个类似 app/foo/bar.pdf 的 url。使用格式化的路线路径，我得到这个网址：

```
link_to('foo', formatted_bar_foo_path(:format => :pdf)) 
```

但是在控制器中我没有遇到 format.pdf 块，而是进入 js 块，因为它是第一个。

```
respond_to do |format|
  format.js { ... }
  format.pdf { ... }
end 
```

通过正常路线，我得到一个没有 .pdf 扩展名的 url ( **app/foo/bar?format=pdf** )，我不需要，但遇到了 format.pdf 块

```
link_to('bar', bar_foo_path(:format => :pdf)) 
```

我该怎么做才能让这个 url **app/foo/bar.pdf**进入 format.pdf 块？

[编辑1]

我的路线是：

```
map.resources :foo, :collection => { :bar => :get } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T07:58:31.253

您需要指定路线

在您的路线文件中

```
resources :bar 
```

在控制器中

```
respond_to do |format|
  format.js { ... }
  format.pdf { ... }
end 
```

然后你可以做类似的事情

```
/bar/1.pdf 
```

# html - 在 Photoshop 中为网页保存的切片页面在 IE 中看起来很糟糕

> ID：12929484
> 
> 赞同：1
> 
> 时间：2012-10-17T07:43:00.407
> 
> 标签：html, css

我通过Photoshop制作网页，将其切片并保存为网络并上传html文件。它在 Firefox 和 Chrome 中看起来还不错，但 IE 则完全不同。任何人都知道如何修复它以及为什么我会得到这个黑色填充？

```
IE: 
```

![IE](../Images/d385d341451b7c3fd82cd175919d2ac5.png)

```
Firefox, Chrome & Safari: 
```

![火狐](../Images/8b065e4ba2730e086f232f23a1962f22.png)

代码：

```
<html>
<head>
<title>Shamir Applications</title>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1255">
</head>
<body bgcolor="#000000" leftmargin="0" topmargin="0" marginwidth="0" marginheight="0">
<!-- Save for Web Slices (Webpage08.psd) -->
<table id="Table_01" width="960" height="720" border="0" cellpadding="0" cellspacing="0"  style="margin-right: auto; margin-left: auto;">
    <tr>
        <td colspan="11">
            <img src="images/Webpage08_01.png" width="960" height="237" alt=""></td>
    </tr>
    <tr>
        <td rowspan="6">
            <img src="images/Webpage08_02.png" width="130" height="483" alt=""></td>
        <td>
            <img src="images/Webpage08_03.png" width="138" height="36" alt=""></td>
        <td rowspan="6">
            <img src="images/Webpage08_04.png" width="142" height="483" alt=""></td>
        <td colspan="3">
            <img src="images/Webpage08_05.png" width="138" height="36" alt=""></td>
        <td rowspan="6">
            <img src="images/Webpage08_06.png" width="140" height="483" alt=""></td>
        <td colspan="3">
            <img src="images/Webpage08_07.png" width="138" height="36" alt=""></td>
        <td rowspan="6">
            <img src="images/Webpage08_08.png" width="134" height="483" alt=""></td>
    </tr>
    <tr>
        <td rowspan="5">
            <img src="images/Webpage08_09.png" width="138" height="447" alt=""></td>
        <td colspan="3">
            <img src="images/Webpage08_10.png" width="138" height="13" alt=""></td>
        <td colspan="3">
            <img src="images/Webpage08_11.png" width="138" height="13" alt=""></td>
    </tr>
    <tr>
        <td rowspan="2">
            <img src="images/Webpage08_12.png" width="14" height="146" alt=""></td>
        <td>
            <img src="images/Webpage08_13.png" width="110" height="110" alt=""></td>
        <td rowspan="2">
            <img src="images/Webpage08_14.png" width="14" height="146" alt=""></td>
        <td rowspan="4">
            <img src="images/Webpage08_15.png" width="16" height="434" alt=""></td>
        <td>
            <img src="images/Webpage08_16.png" width="110" height="110" alt=""></td>
        <td rowspan="4">
            <img src="images/Webpage08_17.png" width="12" height="434" alt=""></td>
    </tr>
    <tr>
        <td>
            <img src="images/Webpage08_18.png" width="110" height="36" alt=""></td>
        <td rowspan="3">
            <img src="images/Webpage08_19.png" width="110" height="324" alt=""></td>
    </tr>
    <tr>
        <td colspan="3">
            <img src="images/Webpage08_20.png" width="138" height="17" alt=""></td>
    </tr>
    <tr>
        <td colspan="3">
            <img src="images/Webpage08_21.png" width="138" height="271" alt=""></td>
    </tr>
</table>
<!-- End Save for Web Slices -->
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T07:53:31.517

尝试将其放入您的 css 文件中

```
img {
   border:0;
   padding:0;
   margin:0;
} 
```

或在头部标签中写

```
<style type="text/css">
    img {
       border:0;
       padding:0;
       margin:0;
    }
</style> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T08:24:00.920

您可以尝试从使用表格模式切换到使用 css 导出吗？

关于 Matei Mihai 的回答，您可能还应该添加以下内容：

```
img {
   border:0;
   padding:0;
   margin:0;
   display:block; /* This often removes extra spacing around images in IE */
} 
```

# php - 如何使用 Xpath 解析 Javascript？

> ID：12929487
> 
> 赞同：0
> 
> 时间：2012-10-17T07:43:17.430
> 
> 标签：php, javascript

我正在尝试使用 php xpath 解析 html 页面，有一些数据通过 javascript 插入到 html 中，例如

```
<script type="text/javascript">     
   var insertName = function() {                
       var firstName = 'Hi SomeUserName';
       $('#welcomeMessage').html(firstName)
   }
</script>
<h1 id="welcomeMessage"></h1> 
```

我想单独提取数据'hi SomeUserName'。

是否可以在 php xpath 中执行此操作？还是有最好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T07:48:31.457

您可以使用[jParser](http://apps.timwhitlock.info/jparser/index.html) - 一个用于 PHP 的 JavaScript 解析库，用于解析标签内的 JavaScript 代码`<script>`。要获取`<script>`标签，可以使用[DOMDocument或任何其他 HTML 解析器。](http://php.net/manual/en/class.domdocument.php)

# java - 试图嵌套 JSF 表达式字符串

> ID：12929488
> 
> 赞同：1
> 
> 时间：2012-10-17T07:43:31.313
> 
> 标签：java, jsf, jsf-2, primefaces, el

我想知道是否可以从问题[nesting-jsf-expression-strings中调整](https://stackoverflow.com/questions/10694311/nesting-jsf-expression-strings)*ExtendedBeanELResolver*以处理这个嵌套的 EL 表达式：

```
#{controllerBean.getBean('userProfileBean', component).street}* 
```

从而*controllerBean.getBean*返回 bean *userProfileBean*。我将使用*ExtenedBeanELResolver*以下异常：

```
SCHWERWIEGEND: javax.el.PropertyNotFoundException: /WEB-INF/templates/modification/userProfile.xhtml @35,196 value="#{controllerBean.getBean('userProfileBean', component).street}": Property 'getBean' not found on type com.something.ControllerBean 
```

如果我插入额外的括号它可以工作，但看起来比现在更难看：

```
#{(controllerBean.getBean('userProfileBean', component)).street}* 
```

没有额外的括号可以吗？

**CycDemo 回答后更新 1：**

奇怪的问题。如果我把

```
<h:inputText value="#{beanOne.getBean('data').title}" /> 
```

**在**页面呈现的表单内，但仅在我提交表单之前。之后将显示相同的错误。

```
WARNUNG: /WEB-INF/templates/home.xhtml @61,66 value="#{beanOne.getBean('data').title}": Property 'getBean' not found on type com.something.BeanOne 
```

如果我将其更改为

```
<p:inputText value="#{beanOne.getBean('data').title}" /> 
```

该页面甚至不会在开始时呈现。我认为问题在于 JSF 在提交表单时尝试调用 setter 但无法正确评估它。

有任何想法吗？

**更新 2**

显然 JSF 正在尝试调用*getGetBean()*因为它正在寻找*BeanOne*上的**属性**（我在 Eclipse 中有一个断点），这是错误的：

 *```
@ManagedBean
@ViewScoped
public class BeanOne {

  private Object bean = new String("something");

  public Object getBean(String name) {
    FacesContext context = FacesContext.getCurrentInstance();
    return context.getApplication().evaluateExpressionGet(context,
        "#{" + name + "}",
        Object.class);
  }

  public Object getGetBean() {
    return bean; // <-- will be called by JSF
  }

  public void setGetBean(Object bean) {
    this.bean = bean;
  }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T07:57:52.253

确保

```
 #{(controllerBean.getBean('userProfileBean', component)).street}
    change to
    #{controllerBean.getBean('userProfileBean', component).street} 
```

当我测试时，它在 JSF 2.0 中工作。

使用`jboss-el`. [在此处](http://ebr.springsource.com/repository/app/bundle/version/detail?name=com.springsource.org.jboss.el&version=2.0.0.GA&searchType=bundlesByName&searchQuery=expression)下载 jar 文件

BeanOne.java 导入 javax.faces.bean.ManagedBean；导入 javax.faces.bean.RequestScoped；

```
@ManagedBean(name="BeanOne")
@RequestScoped
public class BeanOne {
    private Data data;

    public Data getBean(String title) {
        data = new Data(title);
        return data;
    }
    public void show() {
        System.out.println("User Input ==>" + data.getInput());
    }
} 
```

日期.java

```
public class Data {
    private String title;
    private String input;

    public Data(String title) {
        this.title = title;
    }

    public String getInput() {
        return input;
    }

    public void setInput(String input) {
        this.input = input;
    }

    public String getTitle() {
        return title;
    }

    public void setTitle(String title) {
        this.title = title;
    }
} 
```

pageOne.xml

```
<h:form>
    <h:inputText value="#{BeanOne.getBean('Test').input}"/><br/>
    <h:commandButton value="Show" action="#{BeanOne.show}"/>
</h:form> 
```

在 web.xml 中添加如下配置

```
<context-param>     
    <param-name>com.sun.faces.expressionFactory</param-name>
    <param-value>org.jboss.el.ExpressionFactoryImpl</param-value>   
</context-param> 
```*

# android - Android：来电自动接听，播放音频文件

> ID：12929489
> 
> 赞同：25
> 
> 时间：2012-10-17T07:43:40.457
> 
> 标签：android, audio-streaming

在Android中，在来电时，我想接听它。然后，从我的应用程序中，在通话期间自动播放音频文件，对方应该会听到。这可能吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-17T08:05:40.070

你所说的对于android来说是不可能的。Android 无法访问通话中的音频流。

虽然我可以给你一点关于如何做的想法。

首先要拦截来电，您需要注册一个广播接收器，每当收到呼叫时都会调用它

```
public void onReceive(final Context context, Intent intent) 
{
    TelephonyManager telephonyManager = null;
    PhoneStateListener listener = new PhoneStateListener() 
    {
        public void onCallStateChanged(int state, String incomingNumber) 
        {
            switch (state) 
            {
            case TelephonyManager.CALL_STATE_IDLE:
                Toast.makeText(context, "Call Ended..", Toast.LENGTH_LONG).show();
                Log.i("stop", "Call Ended....");
                break;
            case TelephonyManager.CALL_STATE_OFFHOOK:
                Toast.makeText(context, "Call Picked..", Toast.LENGTH_LONG) .show();
                Log.i("received", "Call Picked....");
                break;
            case TelephonyManager.CALL_STATE_RINGING:
                Toast.makeText(context, "Call Ringing.." + incomingNumber,5000).show();
                break;
            }
        }
    };
    // Register the listener with the telephony manager
    telephonyManager.listen(listener, PhoneStateListener.LISTEN_CALL_STATE); 
```

还要改变你的清单，

```
<uses-permission android:name="android.permission.PROCESS_OUTGOING_CALLS" />
    <uses-permission android:name="android.permission.READ_PHONE_STATE"></uses-permission>
    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <receiver android:name="MyReceiver">

            <intent-filter>

                <action android:name="android.intent.action.NEW_OUTGOING_CALL" />

            </intent-filter>
        </receiver>
    </application> 
```

有了这个，你可以拦截来电并接听电话，现在你可以尝试播放一些mp3文件在

```
case TelephonyManager.CALL_STATE_OFFHOOK:
                // Play mp3 file here
                break; 
```

希望能帮助到你。一定要试试这个，告诉我经验。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-17T08:08:37.373

您不能直接向呼叫者播放任何内容。如果你想通过扬声器播放，但这并不是你真正想要的。所以“不”，你不能那样做。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-17T08:06:00.923

尝试使用电话管理器，它包含您正在寻找的事件：

1.  [http://developer.android.com/reference/android/telephony/TelephonyManager.html#ACTION_PHONE_STATE_CHANGED](http://developer.android.com/reference/android/telephony/TelephonyManager.html#ACTION_PHONE_STATE_CHANGED)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-12-25T10:21:14.567

在 android 中，没有选项可以播放实时通话或将音频源切换到默认麦克风以外的其他东西！[以下是在实时通话期间无法播放录音](http://www.ictinnovations.com/using-android-phone-as-gsm-gateway)的详细信息

不过也有一些技巧，

1.  您可以在通话期间从移动扬声器播放所需的录音！麦克风会从那里接它吗？
2.  或者您可以将免提扬声器线连接到其麦克风线
3.  或使用其他设备的蓝牙播放所需的录音

# java - Java：导入父级包

> ID：12929492
> 
> 赞同：0
> 
> 时间：2012-10-17T07:44:07.647
> 
> 标签：java, import, package

二包：
`a.sub.ClassA`,,
`b.ClassB`;

包 a 和包 b 在我的项目中处于同一级别。

如果我想在ClassA中使用ClassB，我在中写`import b.*`了`ClassA`，为什么不能编译？

![这是我的包裹图片：](../Images/ec9c2f21a52977ea1cf260ec70a06741.png)

这是我的代码：
bussinessLogicService/MemberBLService.java

```
package bussinessLogicService;
import java.util.ArrayList;
import po.*;

public interface MemberBLService {
    public String getMemberName();
    public String getMemberID();
    //some methods more
} 
```

业务服务/会员服务.java

```
package bussinessLogic.controller;

import java.util.*;
import bussinessLogicService.MemberBLService;

public class MemberBLService_Stub{

} 
```

这是问题所在： ![看，第 4 行无法编译！](../Images/5c300e2d2a2f1c18fabe23326e30c781.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T07:52:10.893

它可能失败的原因有几个。确保

1.  文件`ClassA.java`位于文件夹中`./a/sub`，文件`ClassB.java`位于文件夹中`./b`
2.  中的第一行`ClassA.java`是`package a.sub;`，另一个文件中的第一行是`package b;`
3.  两个类都声明为`public`（如`public class ClassA`：）
4.  导入语句的写法如下：（`import b.*;`也`import b.ClassB;`应该起作用）
5.  `ClassB`*之前* 编译`ClassA`（编译器需要查看`./b/ClassB.class`）

# android - 从 LocationManager 中移除 LocationListener

> ID：12929494
> 
> 赞同：0
> 
> 时间：2012-10-17T07:44:14.310
> 
> 标签：android

是否可以从 LocationManager 中删除所有 LocationListeners？如果是，如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T07:54:42.623

正如文档所说：

使用给定的 LocationListener 删除当前活动的位置更新的任何当前注册。在此调用之后，此侦听器将不再发生更新。

[removeUpdates（LocationListener 监听器）](http://developer.android.com/reference/android/location/LocationManager.html#removeUpdates%28android.location.LocationListener%29)

# java - JXTreeTable 可编辑示例？

> ID：12929498
> 
> 赞同：3
> 
> 时间：2012-10-17T07:44:22.737
> 
> 标签：java, swing, swingx, jxtreetable

是否有任何可编辑 JxTreeTable 的工作示例。我确实尝试了一些方法。但没有运气......只有第一列是可编辑的。

如何使所有列都可编辑？

对不起大家，

这是我的源代码：

```
/*
* To change this template, choose Tools | Templates
 * and open the template in the editor.
*/
package org;
import java.awt.Color;
import java.awt.Component;
import java.util.EventObject;
import javax.swing.BorderFactory;
import javax.swing.DefaultCellEditor;
import javax.swing.JTable;
import javax.swing.JTextField;
import javax.swing.ListSelectionModel;
import javax.swing.event.CellEditorListener;
import javax.swing.event.TreeModelListener;
import javax.swing.table.TableCellEditor;
import javax.swing.tree.TreePath;
import org.jdesktop.swingx.JXTable;
import org.jdesktop.swingx.JXTreeTable;
import org.jdesktop.swingx.decorator.*;
import org.jdesktop.swingx.decorator.HighlightPredicate.ColumnHighlightPredicate;
import org.jdesktop.swingx.painter.CheckerboardPainter;
import org.jdesktop.swingx.renderer.DefaultTreeRenderer;
import org.jdesktop.swingx.renderer.IconValue;
import org.jdesktop.swingx.renderer.StringValue;
import org.jdesktop.swingx.treetable.*;
public class JTreeTable extends JXTreeTable{
public JTreeTable(){
setTreeTableModel(new RandomTextTreeTableModel(5));
    setRowSelectionAllowed(true);

    setDragEnabled(true);
    setEditable(true);
 setTreeCellRenderer(new DefaultTreeRenderer());
    setSelectionBackground(new Color(176, 197, 227));
    setSelectionForeground(new Color(0, 0, 128));

    BorderHighlighter border = new BorderHighlighter(new ColumnHighlightPredicate(1, 2), BorderFactory.createEmptyBorder(0, 6, 0, 6), false, false);
    addHighlighter(border);

}
@Override
public TableCellEditor getCellEditor(int row, int column){
    System.out.println(column);
    return new TableCellEditor() {

        public Component getTableCellEditorComponent(JTable table, Object value, boolean isSelected, int row, int column) {
            //throw new UnsupportedOperationException("Not supported yet.");
            return new JTextField();
        }

        public Object getCellEditorValue() {
            //throw new UnsupportedOperationException("Not supported yet.");
            return "";
        }

        public boolean isCellEditable(EventObject anEvent) {
            //throw new UnsupportedOperationException("Not supported yet.");
            return true;
        }

        public boolean shouldSelectCell(EventObject anEvent) {
            //throw new UnsupportedOperationException("Not supported yet.");
            return true;
        }

        public boolean stopCellEditing() {
            //throw new UnsupportedOperationException("Not supported yet.");
            return false;
        }

        public void cancelCellEditing() {
            //throw new UnsupportedOperationException("Not supported yet.");

        }

        public void addCellEditorListener(CellEditorListener l) {
            //throw new UnsupportedOperationException("Not supported yet.");
        }

        public void removeCellEditorListener(CellEditorListener l) {
            //throw new UnsupportedOperationException("Not supported yet.");
        }
    };
}
}class RandomTextTreeTableModel extends DefaultTreeTableModel {

DefaultMutableTreeTableNode Root = null;

RandomTextTreeTableModel(int i) {
    Root = new DefaultMutableTreeTableNode();
    this.setRoot(Root);
    for (int x = 0; x < 5; x++) {
        DefaultMutableTreeTableNode node = new DefaultMutableTreeTableNode("HI");
        Root.add(node);
        for (int j = 0; j < i; j++) {
            node.add(new DefaultMutableTreeTableNode(j));
        }
    }
}

@Override
public String getColumnName(int column){
    return "dsdsddds";
}

@Override
public int getColumnCount() {
    return 2;
}

@Override
public Object getValueAt(Object arg0, int arg1) {
    if (arg1 == 1) {
        return new String("hi " + arg0.toString());
    }
    return arg0;
}
} 
```

谢谢....我想编辑所有列。但是此代码仅适用于第一列。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T10:44:15.203

这是一个简单的例子，简单的步骤

*   实现自定义可编辑 TreeTableNode，扩展 AbstractMutableTreeTableNode
*   在 DefaultTreeTableModel 中使用它
*   用模型实例化一个 JXTreeTable

在代码中：

```
/**
 * A custom node implementation.
 */
public static class ArrayNode extends AbstractMutableTreeTableNode {

    public ArrayNode(Object[] data) {
        super(data);
    }

    @Override
    public Object getValueAt(int column) {
        return getUserObject()[column];
    }

    @Override
    public void setValueAt(Object aValue, int column) {
        getUserObject()[column] = aValue;
    }

    @Override
    public int getColumnCount() {
        return 2;
    }

    @Override
    public Object[] getUserObject() {
        return (Object[]) super.getUserObject();
    }

    @Override
    public boolean isEditable(int column) {
        return true;
    }

}

// usage
ArrayNode root = new ArrayNode(new Object[] {"root", ""});
for (int i = 0; i < 5; i++) {
    root.add(new ArrayNode(new Object[]{"child", "" + i}));
}
JXTreeTable table = new JXTreeTable(new DefaultTreeTableModel(root)); 
```

# php - 运行一个内部有函数的循环

> ID：12929501
> 
> 赞同：3
> 
> 时间：2012-10-17T07:44:37.223
> 
> 标签：php, function, for-loop

我在尝试在循环内运行代码时遇到问题，我的循环由一个函数组成。

这是我的编码：

```
$new = array(1,2,3,4);
for($i=0;$i<=3;$i++){
$val = $new[$i];

function myfunction($value) {   
    //Do something
}

echo $val;
} 
```

问题是代码只输出我数组中的第一个值。我很困惑，我不应该在循环内声明一个函数吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-17T07:56:54.577

您的代码最终会出现致命错误，因为在第二次迭代时它会尝试重新声明 function `myfunction`。这就是为什么它只打印数组的第一个值。

为了避免该致命错误，您可以检查该函数是否已使用[`function_exists()`](http://php.net/manual/en/function.function-exists.php)如下函数定义：

```
$new = array(1,2,3,4);
for($i=0;$i<=3;$i++)
{
    $val = $new[$i];
    if(!function_exists('myfunction'))
    {
        function myfunction($value) {
            //Do something
        }
    }
    echo $val;
} 
```

PHP is a scripting language and it is syntactically correct to declare a function inside for loop or inside if statement, but it is a bad practice and can cause a lot of errors afterwards.
The best way is to declare a function outside loop, and, if needed, call it from within a loop like this:

```
<?php
function myfunction($value) {
    //Do something
}

$new = array(1,2,3,4);
for($i=0;$i<=3;$i++)
{
    $val = $new[$i];
    myfunction($value); //may you was intended to pass $val here?
    echo $val;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-17T07:46:07.650

不要在循环内声明函数，在循环之前声明它，然后在循环内调用它`myFunction($value);`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-17T07:46:38.617

该函数应该在一个单独的过程中

```
$new = array(1,2,3,4);
for($i=0;$i<=3;$i++)
{
   $val = $new[$i];
   myfunction($val)
   echo $val;
} 
```

那么这是你的功能

```
function myfunction($value) 
{   
    //Do something
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-17T07:46:17.197

*   在循环外声明函数
*   要么从函数返回一个值，要么让函数输出数据

例如：

```
function myfunction($value) {   
  //Do something
  echo $value;
}

$new = array(1,2,3,4);
for($i=0;$i<=3;$i++) {
  myfunction($new[$i]);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-17T07:47:47.273

这不是正确的做法......首先在循环外声明函数，然后在循环中调用函数

```
function myfunction($value) {   
    //Do something
}

$new = array(1,2,3,4);
for($i=0;$i<=3;$i++){
   $val = $new[$i];
   myfunction( $val);  //call function where u wanted... here (in your  case)
   echo $val;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-17T07:48:55.540

我假设您想打印出数组的前 4 个元素。做这样的事情

```
function myfunction() {   
  $new = array(1,2,3,4);
  for($i=0;$i<=3;$i++){
    $val = $new[$i];
    echo $val;
  }
}

myfunction(); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-17T07:49:14.340

您应该在循环外声明该函数

```
function myfunction($value) {    
    return ($value + 25); // an example
}

$new = array(1,2,3,4); 
for($i = 0; $i < count($new); $i++){
    echo myfunction($new[$i]); 
} 
```

此外，您应该将循环设置为从 0 到数组的末尾，因此如果数组中的条目超过 4 个，则代码应该没问题

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-08-24T03:14:13.470

You can declare an anonymous function instead:

```
for ($i=0; $i<=3; $i++) {
    // code
    $myFunction = function($value) { /* code */ }
    $myFunction($val);
    // code
} 
```

* * *

## 回答 #9

> 赞同：-3
> 
> 时间：2012-10-17T07:49:49.877

你不应该在循环中声明函数......

# r - 在脚本中显式解析部分 R 代码

> ID：12929504
> 
> 赞同：1
> 
> 时间：2012-10-17T07:44:46.200
> 
> 标签：r, parsing, syntax

我的用例如下：

*   显示 GUI 以收集一些 R 表达式
*   生成包含我的模拟框架的单个源文件，与用户提供的 R 表达式混合
*   允许用户生成单个源文件。如果用户指定的任何表达式包含错误（语法或运行时），我想以用户友好的方式显示它们。

简而言之，我想做以下事情：

```
myExpression <- "3 * 5"
myExprParsed <- tryCatch( parse(myExpression), .... ) 
```

我的问题很简单：R 是否有一些类似`\Q \E`正则表达式的结构，从头到尾完全引用文本字符串？myExpression 不太可能包含该`"`字符，从而引入语法错误。我不想将文本内容写入单独的文本文件并使用`source()`.

=示例=

```
myExpression <- " XXXXXXX " 
```

其中 XXXXXX`paste("my random value is ", runif(3))`相当于

```
myExpression <- " paste("my random value is ", runif(3)) " 
```

这会产生语法错误。我想要类似的东西

```
myExpression <- verbatim@   paste("my random value is ", runif(3))   @ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T09:07:46.957

从用户那里获取一些输入——我猜你只是从 GUI 中的文本框中获取值。我将使用`scan`：

```
> dowhat = scan(what="")
1: x="hello world"
3: 
Read 2 items 
```

我们引用了字符串：

```
> dowhat
[1] "x=\"hello" "world\"" 
```

我们可以解析它：

```
> parse(text=dowhat)
expression(x="hello
world") 
```

并且有一个换行符，因为 scan() 按行拆分内容。不是一个真正的问题，如果你在乎，可以修复。

现在让我们实际运行它：

```
> eval(parse(text=dowhat)) 
```

现在我们应该有一个`x`：

```
> x
[1] "hello\nworld"
> 
```

?

# c# - 项目中不存在目标“MSDeployTestConnection”

> ID：12929505
> 
> 赞同：3
> 
> 时间：2012-10-17T07:44:50.100
> 
> 标签：c#, web-services

我正在尝试发布我的 Web 服务，并将 Publish 方法设置为 Web Deploy。服务 URL 是 localhost，站点/应用程序设置为默认网站。当我尝试验证连接时，我收到一条错误消息：“项目中不存在目标“MSDeployTestConnection”。

我在网上没有找到任何关于这个问题的帮助。有谁知道在这里做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T19:45:50.427

我在使用 Visual Studio 2010 (Ultimate) 时遇到了同样的问题。我仍在对错误进行故障排除，并将在可用时分享任何解决方案。

但我确实想指出，在我的 Windows 8 计算机上，相同的 Web 部署过程与 Visual Studio 2012 配合得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T13:02:03.447

我在我的一个项目中遇到了同样的问题。幸运的是，我有另一个正在运行的项目，所以我比较了 .csproj 文件。

有问题的人缺少此条目：

```
<PropertyGroup>
  <VisualStudioVersion Condition="'$(VisualStudioVersion)' == ''">10.0</VisualStudioVersion>
  <VSToolsPath Condition="'$(VSToolsPath)' == ''">$(MSBuildExtensionsPath32)\Microsoft\VisualStudio\v$(VisualStudioVersion)</VSToolsPath>
</PropertyGroup> 
```

因此 Microsoft.WebApplication.targets 的导入由于其状况而未运行

```
<Import Project="$(VSToolsPath)\WebApplications\Microsoft.WebApplication.targets" Condition="'$(VSToolsPath)' != ''" /> 
```

我只是添加了属性组，一切正常。

（请注意，我在 vs2012 中工作，但该项目最初是在 vs2010 中创建的。检查您的 visualstudio 版本和 vstoolpath 路径）

祝你好运

# java - 在java中创建一个简单的gui来运行后台进程

> ID：12929508
> 
> 赞同：1
> 
> 时间：2012-10-17T07:45:07.380
> 
> 标签：java, unix, user-interface, solaris

嗯，这个问题我想了很久。即使我有一个复杂的要求，我会尽可能简单。

我有后台进程，它接受两个参数，我用来从命令行执行。第一个参数可以有三个有效值，第二个参数可以有两个有效值。

我通常在 solaris unix 的命令行上运行该进程。该进程完全用 C++ 编码。

我现在想要的是我希望在 java 中创建一个简单的 gui 来在后台运行进程。我对 Java 的高级概念完全陌生，而且我知道我在大学期间学习的一些核心 Java。

所以，我的问题在这里我该如何开始创建一个 gui？使用java创建一个简单的gui需要什么？我有足够的信心学习 java 中的 gui 编程，因为我是一名 c++ 程序员。

请给我一些正确的方向，让我的思想更加生动，网上提供的任何一些好的材料都会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T07:53:50.573

我会先看看；

*   [使用 Swing 创建 GUI](http://docs.oracle.com/javase/tutorial/uiswing/index.html)
*   [Swing 中的并发性](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)
*   [Java中的并发](http://docs.oracle.com/javase/tutorial/essential/concurrency/)

我也会熟悉[`ProcessBuilder`](http://docs.oracle.com/javase/7/docs/api/java/lang/ProcessBuilder.html)（一个简单的[例子](http://javaevangelist.blogspot.com.au/2011/12/java-tip-of-day-using-processbuilder-to.html)）和[Basic IO](http://docs.oracle.com/javase/tutorial/essential/io/)

MarvinLabs 也提出了一些重要的观点

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T07:49:17.477

您要使用的 Google 搜索是“java swing tutorial”。Swing 是 Java 的 GUI 库。

您还可以查看：[Java GUI 框架。选择什么？Swing、SWT、AWT、SwingX、JGoodies、JavaFX、Apache Pivot？](https://stackoverflow.com/questions/7358775/java-gui-frameworks-what-to-choose-swing-swt-awt-swingx-jgoodies-javafx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T07:50:26.033

你真的只需要一个 JFrame 和一个 JPanel。JFrame 是 gui 所在的物理窗口，而 JPanel 是内容管理器。您将 JComponents（例如 JLabel、JComboBox）放入 JPanel。

Java API：[http ://docs.oracle.com/javase/7/docs/api/](http://docs.oracle.com/javase/7/docs/api/)

使用每个组件的示例：http: [//docs.oracle.com/javase/tutorial/uiswing/components/index.html](http://docs.oracle.com/javase/tutorial/uiswing/components/index.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T08:17:43.593

IMO，您可以尝试使用[JavaFX 2.1](http://fxexperience.com/2012/04/announcing-javafx-2-1/)在 java 中开发您的 GUI。它具有[场景构建器](http://www.oracle.com/technetwork/java/javafx/downloads/devpreview-1429449.html)工具来设计您的应用程序，内置支持类似 css 的[皮肤](http://docs.oracle.com/javafx/2/css_tutorial/jfxpub-css_tutorial.htm)。

[在此处](http://docs.oracle.com/javafx/2/threads/jfxpub-threads.htm)检查 Javafx 2.1 中的并发性。

# sql-server-2008 - 在 sql server 2008 的结果集中返回不同的行

> ID：12929521
> 
> 赞同：-1
> 
> 时间：2012-10-17T07:45:59.297
> 
> 标签：sql-server-2008

如果特定列在 sql server 2008 中多次具有相同的记录并按日期时间排序，如何选​​择不同的行。我在表中有以下列：

1.  ID
2.  用户名
3.  文件ID
4.  约会时间

我尝试使用以下 sql：

```
SELECT DISTINCT(fileid) FROM [DatabaseName].[dbo].[TableName] where usernumber = '015578957' 
```

如何在上面的 sql 中选择其他列并按 datetime 列排序，并返回 fileid 列不同的结果集行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T08:04:16.503

```
select T.*
FROM [DatabaseName].[dbo].[TableName] T
JOIN
(
SELECT min(id) id, fileid
FROM [DatabaseName].[dbo].[TableName] 
group by fileid
)X ON T.id=X.id
where T.usernumber = '015578957' 
```

如果要选择第一个不同的记录，请使用上述查询中的 MIN，如果要检索最后一个记录，请使用 MAX 而不是 MIN。

# c# - 新行添加到富文本框中的文本末尾

> ID：12929522
> 
> 赞同：-1
> 
> 时间：2012-10-17T07:46:02.360
> 
> 标签：c#, richtextbox

我的表单（WinForm）中有一个富文本框。我用它来更新描述列。当我执行更新操作时，它会在末尾引入换行符/换行符。

如何以简单的方式避免这个换行符。是否需要通过代码处理或通过属性管理？

```
public MyDlg(string strXmlFile)
{
    InitializeComponent();

    strInputXmlFile = strXmlFile;

    xmlDoc.Load(@"c:\temp\SBD_Input.xml");
    node = xmlDoc.SelectSingleNode("//SBD/Description");

    // Set the description into the rich text box.
    richTextBox1.AppendText(node.InnerText);
}

private void UpdateBtn_Click(object sender, EventArgs e)
{
    // Put the RTB contents back into node & Import.
    node.InnerText = richTextBox1.Text;
    xmlDoc.ImportNode(node, true);

    // Save the Xml document.
    xmlDoc.Save(@"c:\temp\SBD_Input.xml");

    this.Close();
} 
```

输入 XML 文件如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<SBD>
  <Number> 1234567</Number>
  <Description>EDGES MAY BE BROKEN
  All surfaces are varnished
            --------------------
  Color     |  R  |  G  |  B  |
            -------------------- 

  as dflkjaslödfj lasöj flöaskj flaksjd fölkasjd flöaskjdf 
   askjflj asld fjklöaskjdf laskjfl s falsj flöasjkd f flaskjdf a 
  as djflajs dfl

  </Description>
</SBD> 
```

![在此处输入图像描述](../Images/2423714a3c7737facb7106d8e576b34e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T09:32:34.317

在更新 btn 代码中试试这个：

```
node.InnerText = richTextBox1.Text.TrimEnd( '\r', '\n' ); 
```

# c# - 使用默认成员提供程序或继承它的自定义成员提供程序的内在积极原因是什么？

> ID：12929523
> 
> 赞同：5
> 
> 时间：2012-10-17T07:46:05.163
> 
> 标签：c#, asp.net, asp.net-membership, membership-provider, roleprovider

我大约 8 个月前发布了[这个问题。](https://stackoverflow.com/questions/9204919/custom-membership-role-profile-providers-without-inheriting-the-membershipprovid)接受的答案涉及您因不遵守默认提供商的规则而错过的一些事情。例如，如果您不使用从 RoleProvider 继承的自定义 RoleProvider，您将无法使用快速快捷方式，例如`User.IsInRole()`. 答案将此类事物称为“内置管道”。

我想知道的是在哪里可以找到依赖于这个“内置管道”的东西的完整列表，以及显示他们在幕后调用哪些覆盖方法的东西。

例如，`HttpContext.Current.User.IsInRole()`是（我假设）在我的自定义 RoleProvider 中引用并调用我重写的“IsUserInRole()”方法，但我想查看文档，其中明确说明`HttpContext.Current.User.IsInRole()`实际调用`IsUserInRole()`，对于所有提供者的所有此类方法.

我知道这应该已经很明显了（IsInRole() 和 IsUserInRole() 非常相似），但我提出问题的动机是查看和了解我什至不知道的其他可用的此类快捷方式的。我有一种重新发明轮子的感觉，我什至不知道。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T21:44:35.727

它们并不完全相同，但是您使用的任何角色提供者都可能会填充当前用户的角色集合以包含提供者的所有角色。

`HttpContext.Current.User`是一个`IPrincipal`你可以在这里阅读：http: [//msdn.microsoft.com/en-us/library/system.security.principal.aspx](http://msdn.microsoft.com/en-us/library/system.security.principal.aspx)

这是任何 .NET 应用程序（当然包括 ASP.NET）中身份的 .NET 约定。您可以确定您正在使用的 IPrincipal 的实现是调用 RoleProvider 的相同函数的唯一方法是使用您的提供程序实际附带的一个函数。

角色提供者根据 httpApplication 对象 ( [http://msdn.microsoft.com/en-us/library/8fw7xh74.aspx](http://msdn.microsoft.com/en-us/library/8fw7xh74.aspx) ) 进行实例化，并且可供 Principal 实现使用。

查看这篇 MSDN 文章的备注部分：http: [//msdn.microsoft.com/en-us/library/bb340078.aspx](http://msdn.microsoft.com/en-us/library/bb340078.aspx)`IsUserInRole` Principal对角色提供者的调用`IsInRole`完全取决于您的 Principal 的实现提供者。

# python - Python中的（本地）缓存文件对象

> ID：12929525
> 
> 赞同：0
> 
> 时间：2012-10-17T07:46:09.243
> 
> 标签：python, file, caching, file-io

我经常处理需要通过网络访问的大型数据文件（主要通过 NFS，但有时也通过 CIFS）。出于性能原因，最好将这些文件缓存在本地硬盘上，以尽量减少网络使用。

所以基本上我正在寻找一个自动处理本地缓存的文件对象，类似于以下内容：

```
import CachedFileObject as cfo
cfo.set_local_cache_dir("/tmp")
handle = cfo.open("/nfs/server1/bigdatafile.nc", "r") # copy file to /tmp, open the copy
# do stuff with the filehandle
del handle                                            # delete the local copy 
```

我真的只需要这个来**读取**文件。如果应该有一种简单的方法来获取/实现文件创建（甚至写入），那将是一个奖励。

任何想法都非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T09:13:40.567

有一个简单的解决方案（打开完整副本以进行读取访问，关闭完整副本以进行写入访问）：

```
import os
import shutil

from tempfile import mkstemp

class CachedFileObject(object):

    def __init__(self, cache_dir="/tmp"):
        self.cache_dir = cache_dir
        self.local_file = None
        self.local_path = None
        self.remote_path = None
        self.mode = None

    def open(self, path, mode="r", buffering=-1):
        if self.local_file and not self.local_file.closed:
            raise ValueError("Already open")
        fd, self.local_path = mkstemp(dir=self.cache_dir)
        os.close(fd)
        try:
            if "r" in mode and not os.path.exists(path):
                raise ValueError("No such remote file")
            if os.path.exists(path):
                # have remote file
                self._cache_remote(path, self.local_path)
            self.local_file = open(self.local_path, mode=mode, buffering=buffering)
            self.mode = mode
            self.remote_path = path
        except Exception as e:
            os.unlink(self.local_path)
            raise

        return self

    def close(self):
        self.local_file.close()
        try:
            if set("wa+").intersection(set(self.mode)):
                # have writes, sync file back to remote side
                self._sync_remote(self.remote_path, self.local_path)
        finally:
            os.unlink(self.local_path)

    def _cache_remote(self, remote_path, local_path):
        # simple cp
        shutil.copy(remote_path, local_path)

    def _sync_remote(self, remote_path, local_path):
        shutil.copy(local_path, remote_path)

    def __getattr__(self, attr):
        if self.local_file is not None:
            return getattr(self.local_file, attr)
        else:
            raise ValueError("File is not opened") 
```

创建的对象将作为常规文件运行，并在打开/关闭时复制/同步。

用法：

```
f = CachedFileObject(cache_dir="/your/tmp/dir")
f.open("/path/to/remote/file")
# ..your f.read()'s here..
f.close() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T09:06:11.163

我会使用操作系统进行文件缓存。NFS 挂载可以设置为缓存`-o fsc`，默认情况下 SMB 挂载已经有一些缓存。

# multithreading - 运行循环/多线程/计时器在 iOS6 上的行为是否不同？

> ID：12929526
> 
> 赞同：1
> 
> 时间：2012-10-17T07:46:11.827
> 
> 标签：multithreading, ios6, nstimer, ios5.1, nsrunloop

我刚刚安装了 Xcode 4.5 以开始在 iOS6 设备上测试一些代码。我希望我现有的代码显然可以在 iOS 5 和 iOS 6 上运行。曾经在 Xcode 4.3 上工作的相同代码（如下）停止在 Xcode 4.5 上工作：

```
-(BOOL)readFromRingBuffer
{                
    NSDate *fireDate = [NSDate dateWithTimeIntervalSinceNow:0];
    ringBufferReaderTimer = [[NSTimer alloc] initWithFireDate:fireDate
                                                    interval:0.25
                                                      target:self
                                                     selector:@selector(readRingBufferDataBit)
                                                    userInfo:NULL
                                                     repeats:YES];

    NSRunLoop *runLoop = [NSRunLoop currentRunLoop];
    [runLoop addTimer:ringBufferReaderTimer forMode:NSDefaultRunLoopMode];
} 
```

我必须把这条线放在触发方法上：（`[ringBufferReaderTimer fire];`不必在 XCode 4.3 上这样做）

但随后它会通过该方法一次并且什么都不会发生..一般来说..我看到发生了奇怪的事情..关于iOS6中的线程我需要了解一些我不知道的事情吗？快速谷歌搜索并没有告诉我太多..

# java - 是否可以在“Function.apply”方法中获取列表中当前项的索引？

> ID：12929531
> 
> 赞同：1
> 
> 时间：2012-10-17T07:46:36.573
> 
> 标签：java, transform, guava

我正在尝试将“转换”应用于`List <Map <String, String>>`. 是否可以在“ `Function.apply`”方法中获取列表中当前项的索引？

```
Lists.transform(data, new Function<Map<String, String>, Map<String, String>>() {
        private static int index = 0;

        @Override
        public Map<String, String> apply(Map<String, String> from) {
            from.put(key, value); // need to get index
            return from;
        }
    }); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-17T07:56:31.157

通常在 Java 中，使用循环更简单、更简洁。

```
List<Map<String, String>> data = ...
for(int i = 0; i < data.size(); i++) {
    // i is the index.
    data.get(i).put(key, value);
} 
```

我应该说我赞成使用支持它的语言进行函数式编程。Java 7 不太适合函数式编程，有时您不得不求助于迭代。Java 8 和 9 承诺通过添加闭包对函数式编程更加友好。

恕我直言，Java 甚至不像许多语言那样支持递归。JVM 中缺少[尾调用消除](http://en.wikipedia.org/wiki/Tail_call)是一个缺陷。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T08:03:21.253

如果您`Function.apply`的设计旨在返回 a `Map`，您如何动态更改方法签名？如果不需要做爱因斯坦，请尽量简单。您可以考虑使用 Mr.Peter 建议的循环。另外我觉得你的代码不会编译，因为你的方法返回一个 Map 而你实际上是返回一个字符串。

# c++ - 包含 auto_ptr 的对象的 std::vector 行为异常

> ID：12929533
> 
> 赞同：-1
> 
> 时间：2012-10-17T07:46:38.893
> 
> 标签：c++, qt, vector, auto-ptr

我想使用 Qt 库为我的应用程序创建一个控制面板，为此我创建了 `Controls`类

`Controls`：创建一个滑块并旋转和一个标签，并在水平布局中组织它们。

但是当我想创建`std::vector<Controls>`程序运行时没有错误但现在控件正在创建！那么为什么没有控件。

控件.h

```
class Controls 
{

private:

    QHBoxLayout Layout ;
    string Controlname;
    std::auto_ptr<QLabel> Label ;
    std::auto_ptr<QSlider> Slider ;
    std::auto_ptr<QSpinBox> Spin ;

public:
    Controls();
    Controls(QLayout &Parent , string name , const int &Default_value);
    Controls(const Controls &copy);
    ~Controls();

    QLabel *const Get_Label()const { return Label.get() ; }
    QSlider *const Get_Slider()const { return Slider.get() ; }
    QSpinBox *const Get_Spin()const { return Spin.get() ; }
    QHBoxLayout *const Get_Layout() {return &Layout;}

    void SetValue(const int &newvalue);

    Controls &operator= (const Controls &copy);

}; 
```

控件.cpp

```
Controls &Controls::operator= (const Controls &copy)
{

Label = std::auto_ptr<QLabel> ( new QLabel() ) ;
Slider = std::auto_ptr<QSlider> ( new QSlider() ) ;
Spin = std::auto_ptr<QSpinBox> ( new QSpinBox() ) ;

    this->Controlname = copy.Controlname ;
    this->Slider.get()->setValue( copy.Slider.get()->value() );
    this->Spin.get()->setValue( copy.Spin.get()->value() );

    return *this ;
}
Controls::Controls(const Controls &copy)
{
    this->Controlname = copy.Controlname ;
    this->Slider.get()->setValue( copy.Slider.get()->value() );
    this->Spin.get()->setValue( copy.Spin.get()->value() );

}
Controls::Controls()
{

    Label = std::auto_ptr<QLabel> ( new QLabel() ) ;
    Slider = std::auto_ptr<QSlider> ( new QSlider() ) ;
    Spin = std::auto_ptr<QSpinBox> ( new QSpinBox() ) ;

    Slider->setValue(0);
    Slider->setOrientation(Qt::Horizontal);
    Label->setText(QString ("unamed"));
    Spin->setValue(0);

    Layout.addWidget(Label.get() , 0 , 0);
    Layout.addWidget(Slider.get() , 0 , 0);
    Layout.addWidget(Spin.get() , 0 , 0);

    QObject::connect(Slider.get() , SIGNAL(valueChanged(int) ) , Spin.get() , SLOT(setValue(int)));
    QObject::connect(Spin.get() , SIGNAL(valueChanged(int) ) , Slider.get() , SLOT(setValue(int)));

}
Controls::Controls(QLayout &Parent , string name , const int &Default_value)
{
    Controlname = name ;

    Label = std::auto_ptr<QLabel> ( new QLabel() ) ;
    Slider = std::auto_ptr<QSlider> ( new QSlider() ) ;
    Spin = std::auto_ptr<QSpinBox> ( new QSpinBox() ) ;

    Slider->setValue(Default_value*100);
    Slider->setOrientation(Qt::Horizontal);
    Label->setText(QString (name.c_str()));
    Spin->setValue(Default_value*100);

    Layout.addWidget(Label.get() , 0 , 0);
    Layout.addWidget(Slider.get() , 0 , 0);
    Layout.addWidget(Spin.get() , 0 , 0);

    QObject::connect(Slider.get() , SIGNAL(valueChanged(int) ) , Spin.get() , SLOT(setValue(int)));
    QObject::connect(Spin.get() , SIGNAL(valueChanged(int) ) , Slider.get() , SLOT(setValue(int)));

    Parent.addItem(&Layout);

}

void Controls::SetValue(const int &newvalue)
{
    Slider.get()->setValue(newvalue);
}
Controls::~Controls()
{

} 
```

主文件

```
int main(int argc, char *argv[])
{

    QApplication app (argc , argv );

    QVBoxLayout layout ;
    auto_ptr<QWidget> Panel = auto_ptr<QWidget> (new QWidget()) ;

    vector<Controls> g ;
    g.push_back(Controls(layout , "WHITE_BALANCE_RED_V" , 56 ));

        Panel.get()->setLayout(&layout);
    Panel.get()->show();

        return app.exec();

} 
```

编辑：

我从 ~controls 中删除了 auto_ptr 析构函数，当我再次运行它时，我得到了这个异常

```
pure virtual method called
terminate called without an active exception 
```

*   我初始化了滑块并在复制构造函数中旋转

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T08:36:26.300

这里有两个“奇怪”的东西，都与 auto_ptr 有关。

第一个是成员析构函数在嵌入析构函数的出口之后被自动调用。因此，显式销毁 meber 变量会导致“双重销毁”，这是编译器无法管理的。

（注意：一个变量被称为“指针”的事实不会使它不再是一个变量：如果使用原始指针，并且调用`delete pointer`不会破坏指针，而是指针**d**，auto_ptr 自己做的**事情**）。

 **第二个是`auto_ptr`不可复制的：实际上它使用复制运算符来实现移动语义，但是...容器（如 std::vector）假定复制是...复制（不可移动）。

在大多数`std::vector`（以及 std::list ）实现中，这不是问题，因为实现者关注这一点并避免他们的容器同时生成存在的副本。但是一些突变算法不能始终如一地工作，仅仅是因为它们无意中“移动”到了错误的地方——那个在函数返回后就会被销毁的地方......叹息！）

第二个方面由 C++11 解决，通过实现支持可复制和可移动元素的容器（作为配备 r 值引用的 C++11，复制和移动是很好区分的操作）并弃用`auto_ptr`支持`unique_ptr`，即实现“移动”不是“*高于*副本”而是“*而不是*副本”。

故事的寓意：在 C++11 中使用`unique_ptr`而不是`auto_ptr`.

在 C++03 中，不要`auto_ptr`在容器或必须留在容器中的对象中使用。

使用原始指针并定义适当的（为您的对象）复制语义（通过执行“深度复制”制作指针的副本以指向对象的副本）或共享语义（通过使指针指向相同的对象，并管理引用计数以触发指向元素的破坏。 boost::shared_ptr 是这种“指针”的一个示例）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T08:35:48.377

> 程序运行没有错误，但现在控件正在创建！

这实际上很奇怪，因为`Controls::Controls(const Controls &copy)`您正在调用`this->Slider.get()`which 将返回 0，因为您的成员尚未初始化。

首先，您需要阅读并了解如何使用`auto_ptr`.

其次，您应该忘记`auto_ptr`并且永远不要进一步使用它。Qt 有自己的智能指针，但在您的情况下不需要它们，因为 QObjects 管理其孩子的生命周期。

因此，第三，阅读 Qt 中的内存管理并完全摆脱所有这些智能指针。**

# python - 通过python导航电子表格xml

> ID：12929536
> 
> 赞同：1
> 
> 时间：2012-10-17T07:46:47.597
> 
> 标签：python, lxml

我正在为 XML 电子表格中的给定公式构建参考地图的任务。例如，对于以下行：

```
<row>
    <cell></cell>
    <cell></cell>
    <cell index="5"></cell>
    <cell></cell>
    <cell></cell>
    <cell index="9"></cell>
    <cell></cell>
    ......
</row> 
```

如果我使用`enumerate(row.findall("cell"))`它将返回`a=[1, 2, 3, 4, 5, 6, 7]`。但是，该属性`index`提供特定单元格的信息。也就是说，而不是`a`我应该得到`b=[1, 2, 5, 6, 7, 9, 10]`（注意第三个单元格是*5*，所以它改变了枚举，类似的事情发生在索引为*9*之后）。

我如何从`a`到`b`？我想要一个更 Pythonic 的程序。我现在拥有的类似 C 的语法（我有点厌烦）：

```
testcases = [[1, 2, 5, 4, 5, 9, 8], [5, 4, 5, 9, 8], [1, 2, 5, 4, 5, 9]]

for cells in testcases:
    first = None
    for i, c in enumerate(cells):
        if c>i+1:
            first = c

        if i>0 and c < cells[i-1]:
            cells[i]=cells[i-1]+1
        elif i>0 and c> cells[i-1]+1 and first is None:
            first=c
            for j in range(i)[::-1]:
                cells[j]=c-1
                c=c-1
    print(cells) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T10:04:46.140

我无法完全理解您的问题，但这可能是您需要的起点：

```
matrix = [[1, 2, 5, 4, 5, 9, 8], [5, 4, 5, 9, 8], [1, 2, 5, 4, 5, 9]]

for rowid, cellid, cell in [(rowid, cellid, cell) for rowid, row in enumerate(matrix) for cellid, cell in enumerate(row)]:
    print "matrix[%d, %d]: %s" % (rowid, cellid, cell) 
```

这将遍历整个矩阵，打印所有单元格并让您访问所有行和单元格 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T21:42:04.263

我认为`enumerate`有点偏离你想要解决的问题。您必须考虑 `findall`返回一个 列表`elements`，您可以从中检索它们的属性并使用它们来填充值。

因此，鉴于您提供的 XML 示例和您期望的输出，以下代码段允许您获取考虑索引的单元格列表（只要单元格有它）：

```
from lxml import etree

tag = etree.fromstring('''<row>
                             <cell></cell><cell></cell>
                             <cell index="5">
                             </cell><cell></cell><cell></cell>
                             <cell index="9"></cell>
                             <cell></cell>
                          </row>''')

index = 1
result = []
for cell in tag.findall('cell'):
    index = int(cell.attrib['index']) if cell.attrib.has_key('index') else index
    result.append(index)
    index += 1

print result 
```

结果是：

```
[1, 2, 5, 6, 7, 9, 10] 
```

# cassandra - Cassandra - 在随机分区器上迭代所有行键而不重复

> ID：12929543
> 
> 赞同：1
> 
> 时间：2012-10-17T07:47:40.147
> 
> 标签：cassandra

`get_range_slices`在随机分区器的情况下也遍历所有键。据我了解，此查询的结果不会返回重复的键，因为它会在环上上升。由于键是散列的，Cassandra 需要额外的“索引”才能执行这样的查询——就像每个键都需要保留对下一个键的引用（情况并非如此）。

有人可以给我一些关于 Cassandra 如何在随机分区器的情况下实现对所有键的迭代的提示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T16:19:54.937

结果以随机顺序返回。或者更具体地说，令牌顺序（键的散列值）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T13:31:42.937

编辑：我不确定我是否理解原来的问题，就好像你有 100 个节点，你永远不会从一个节点上运行 get_range_slices。通常，您将使用 cassandra 的适配器在 cassandra 之上安装 hadoop map/reduce，以便您可以并行处理所有密钥。

get_range_slices 通常从不用于获取随机分区器上的“所有”键。相反，使用 map/reduce 是因为将二进制代码发送到每台机器的速度要快得多，并且每台机器并行执行，因此您可以更快地遍历整个数据集。

IE。也许您需要查看 map/reduce 而不是 get_range_slices？

如果您使用 PlayOrm，另一个选项是 PlayOrm 的分区，因为您可以使用 Storm，并且可以让机器处理每个分区。你可以做一个

```
 PARTITIONS(:partitionId) SELECT * FROM Table 
```

获取分区的所有行。

当然，您也可以进行连接等操作，并且它们在并行读取多个磁盘并处理磁盘时速度很快，您希望并行操作可以加快速度。

# iphone - 子类化 UINavigationController 用于视图之间的自定义导航

> ID：12929545
> 
> 赞同：3
> 
> 时间：2012-10-17T07:47:51.970
> 
> 标签：iphone, ios, uinavigationcontroller

我正在使用 UINavigationController 制作一个具有以下视图层次结构的小应用程序：

> 登录 -> 选项 -> 三种不同的视图

问题是我想以下列方式在最后 3 个视图之间导航：

```
1<->2
1<->3
2<->3 
```

即能够从任何其他视图切换到任何视图，这提醒了 UITabViewController 功能。因此，它不是分层的，它是任意图。要在视图之间切换，我将使用导航栏中的按钮。

对我来说最简单的方法是继承 UINavigationController，添加与我的视图相对应的属性并实现在这些视图之间切换的方法（使用 pushViewController 和 popToRootViewController）。这些方法将从视图中调用以进行切换（导航）。

但是参考资料说 UINavigationController 不适合子类化。 [http://developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationController_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationController_Class/Reference/Reference.html)

你建议我做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T08:46:38.763

我将保留`UINavigationController`但不使用通常`pushViewController:`的 switch 视图，如下所示：

```
NSMutableArray *viewControllers = [self.navigationController.viewControllers mutableCopy];
    // from here you can modify the order of controllers as much as you want
[viewControllers addObject:nextViewController];
[viewControllers removeObject:self];

[self.navigationController setViewControllers:viewControllers animated:YES]; 
```

如果您不希望动画效果如何，您可以设置`animated:NO`并将其包含`setViewControllers:`在一个`[UIView animate...]`块中，或者将您自己的自定义添加`CAAnimation`到导航控制器的图层中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T10:20:26.277

使用以下代码将视图控制器添加到导航控制器，

从第一个 -> 第二个导航

```
SecondViewController *secondView = [[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil];
    NSMutableArray *navigationarray = [[NSMutableArray alloc] initWithArray:self.navigationController.viewControllers];
    [navigationarray removeAllObjects];
    [navigationarray addObject:secondView];
    self.navigationController.viewControllers = navigationarray; 
```

从第一个 -> 第三个导航

```
ThirdViewController *thirdView = [[ThirdViewController alloc] initWithNibName:@"ThirdViewController" bundle:nil];
    NSMutableArray *navigationarray = [[NSMutableArray alloc] initWithArray:self.navigationController.viewControllers];
    [navigationarray removeAllObjects];
    [navigationarray addObject:thirdView];
    self.navigationController.viewControllers = navigationarray; 
```

上面的代码将从 Navigation Array 中删除所有 viewControllers 并放置一个新的 View Controller

如果你想去一个特定的视图控制器，然后使用下面的代码......

[self.navigationController popToViewController:[self.navigationController.viewControllers objectAtIndex:1] 动画：YES]

将索引更改为堆栈中的视图控制器。

# c# - SOLID 原则以及如何实际实施它们

> ID：12929547
> 
> 赞同：3
> 
> 时间：2012-10-17T07:48:16.727
> 
> 标签：c#, dependency-injection, solid-principles

最近我一直在修补 TDD 和基于 SOLID 原则的编码。我有一个场景如下：

*   一个可以有`IRecurringProfile`，它会按一定时间间隔（例如按月）执行一系列付款
*   当付款尝试通过但失败时，`IRecurringProfileTransaction`会创建一个链接到`IRecurringProfilePayment`以显示付款未通过。
*   付款失败计数增加。
*   重试付款并发送另一个失败通知（如果付款失败）的日期/时间也会更新。
*   如果支付的失败计数达到最大阈值（例如 3 次失败尝试），`IRecurringProfile`则暂停。
*   此外，每次失败时，都会发送通知通知客户付款未通过，并将再次重试。

下面是我创建的一些示例代码，主要处理将定期付款资料标记为失败的任务。我尝试遵循 SOLID 原则以及构造函数注入。想知道这是否违反了这些原则或任何编程最佳实践，并对代码进行任何形式的审查，以便对其进行改进。该代码还使用 NHibernate 作为 ORM。

```
public class RecurringPaymentMarkAsFailure
{
    private readonly IPaymentFailedNotificationSender paymentFailedNotificationSender;
    private readonly IRecurringProfileFailureNextNotificationDateUpdater failureNotificationDateUpdater;
    private readonly IRecurringProfileSuspender recurringProfileSuspender;

    public RecurringPaymentMarkAsFailure(IPaymentFailedNotificationSender paymentFailedNotificationSender, IRecurringProfileSuspender recurringProfileSuspender,
        IRecurringProfileFailureNextNotificationDateUpdater failureNotificationDateUpdater)
    {
        this.paymentFailedNotificationSender = paymentFailedNotificationSender;
        this.failureNotificationDateUpdater = failureNotificationDateUpdater;

        this.recurringProfileSuspender = recurringProfileSuspender;

    }

    private void checkProfileStatus(IRecurringProfile profile)
    {
        if (profile.Status != Enums.RecurringProfileStatus.Active)
        {
            throw new Exceptions.RecurringProfileException("This cannot be called when the profile is not marked as active");
        }
    }

    private void incrementFailureCount(IRecurringProfilePayment payment)
    {
        payment.FailureCount++;
    }

    public IRecurringProfileTransaction MarkPaymentAsFailed(IRecurringProfilePayment payment, string failureData)
    {
        using (var t = BeginTransaction())
        {
            checkProfileStatus(payment.RecurringProfile);

            IRecurringProfileTransaction transaction = payment.Transactions.CreateNewItem();
            transaction.OtherData = failureData;
            transaction.Status = Enums.RecurringProfileTransactionStatus.Failure;
            paymentFailedNotificationSender.CreateAndQueueNotification(transaction);
            failureNotificationDateUpdater.UpdateNextFailureNotificationDate(payment);
            incrementFailureCount(payment);

            if (payment.FailureCount >= payment.RecurringProfile.MaximumFailedAttempts)
            {
                recurringProfileSuspender.SuspendRecurringProfile(payment.RecurringProfile);
            }
            transaction.Save();
            t.Commit();
            return transaction;
        }

    }

} 
```

--

作为旁注，这个问题补充了我最近关于类似主题的帖子。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T08:45:52.947

在我看来，您违反了单一职责原则，因为您`RecurringPaymentMarkAsFailure`有两个职责。除了将支付视为失败的责任外，它还增加了管理交易的责任（`using (BeginTransaction)`这是一个横切关注点。

您可能会在系统中拥有许多这样的类来处理业务逻辑，并且可能所有（或许多）都具有完全相同的事务代码。相反，考虑通过允许将此行为添加为装饰器来遵守开放/封闭原则。这很有可能，因为事务是此代码中的第一个和最后一个操作。这个装饰器的简单实现可能如下所示：

```
public class TransactionRecurringPaymentMarkAsFailureDecorator
    : RecurringPaymentMarkAsFailure
{
    private RecurringPaymentMarkAsFailure decoratedInstance;

    public RecurringPaymentMarkAsFailure(
        RecurringPaymentMarkAsFailure decoratedInstance)
    {
        this.decoratedInstance = decoratedInstance;
    }

    public override IRecurringProfileTransaction MarkPaymentAsFailed(
        IRecurringProfilePayment payment, string failureData)
    {
        using (var t = BeginTransaction())
        {
            var transaction = this.decoratedInstance
                .MarkPaymentAsFailed(payment, failureData);

            t.Commit();

            return transaction;
        }
    }
} 
```

此装饰器允许您按如下方式包装类：

```
var marker =
    new TransactionRecurringPaymentMarkAsFailureDecorator(
        new RecurringPaymentMarkAsFailure(
            /* dependencies */    
        )); 
```

正如我所说，这个实现有点幼稚，因为你可能会有很多需要包装的类，这意味着每个类都会有自己的装饰器。虽然这完全是 SOLID，但它不是 DRY。

相反，让所有执行用例的类实现一个通用接口，例如`ICommandHandler<TCommand>`. 这允许您创建一个通用`TransactionCommandHandlerDecorator<TCommand>`类来包装所有这些实例。查看这篇文章以了解有关此模型的更多信息：[同时……在我的架构的命令方面](https://cuttingedge.it/blogs/steven/pivot/entry.php?id=91)。

# xml - 来自可变数量的 XML 元素的 XSD

> ID：12929550
> 
> 赞同：0
> 
> 时间：2012-10-17T07:48:22.373
> 
> 标签：xml, xsd, xsd.exe, xsd-validation

我正在根据我的应用程序中的某些条件创建一个 xml 文档。我的 xml 中的元素数量始终是可变的。例如，有一次它可能看起来像：

```
<TransactionTypes>
  <X value="false" text="" />
  <O value="false" text="" />
  <E value="false" text="" />
  <P value="false" text="" />
  <C value="false" text="" />
  <K value="false" text="" />
</TransactionTypes> 
```

还有一次像：

```
 <TransactionTypes>
  <TT value="false" text="" />
  <EP value="false" text="" />
  <PY value="false" text="" />
</TransactionTypes> 
```

因此，TransactionTypes 中的子元素总是在元素名称方面有所不同，但它们始终具有 value 和 text 属性。我怎样才能为此制作XSD？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T23:03:08.213

在 XSD 1.1 中，您可以在 TransactionTypes 元素上定义断言：

```
<xs:assertion test="every $c in * satisfies @value='false' and @text=''"/> 
```

然而，值得指出的是，XSD 并非旨在让您表达对 XML 的任意约束，而是描述您在 XSD 设计者认为设计良好的 XML 中发现的约束类型；而这个 XML 似乎不属于该类别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T08:32:09.327

我认为您不能在通配符上构建 XSD 限制，然后仍然指定通配符元素的属性。

唯一可能的标签可能是“任何”： [http ://www.w3schools.com/schema/schema_complex_any.asp](http://www.w3schools.com/schema/schema_complex_any.asp)

并且无法定义“任何”可能具有的属性。我认为没有其他解决方案。正如您所说的“可以有任何类型的元素”......如果您可以定义所有可能的“TransactionTypes”子元素，您肯定会做得更好。不管有多少。您可以将所有这些子元素映射到相同的 complexType 并定义属性值/文本，然后只需要一次。但是通配符不起作用。

塞巴斯蒂安

# asp.net - 终止 IIS 上的会话

> ID：12929551
> 
> 赞同：1
> 
> 时间：2012-10-17T07:48:26.070
> 
> 标签：asp.net, asp-classic, vbscript

我有一个要求是：-

单击“注销”链接时，弹出消息“这将终止会话并关闭浏览器。你想继续吗？” 是和否按钮。单击“是”后，会话应在 IIS 服务器中终止，并关闭浏览器的当前选项卡。

为了实现这一点，我在下面写了一段代码，但我不知道如何终止 IIS 上的会话

```
 <script language="vbscript">
            Function OnClickLogout() 
                dim Answer, msg
                Msg = "This will terminate the session and close the browser. Do you want to continue?"
                Answer = MsgBox(Msg, vbYesNo + vbCritical, "Error")
                if Answer = vbYes then
                    window.close
                else
                    'Retrun to the previous page
                end if
            End Function
        </script> 
```

谁能建议我如何在 vbscript 中执行此操作。我的网站在 ASP 中，但它是一个遗留应用程序，所以我必须编写代码！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T09:02:51.787

你不能简单地使用 JavaScript 吗？我们在我们的 ASP Classic 项目中一直使用它。像这样开始：

```
 function DeleteProductGroup(){
        var r=confirm("Are you sure you want to delete this product group?");
        if (r==true){//here goes the code if user presses YES
        }
        else{//here goes the code if user presses NO
        }
    } 
```

# c++ - 静态文本颜色

> ID：12929554
> 
> 赞同：4
> 
> 时间：2012-10-17T07:48:45.770
> 
> 标签：c++, winapi, visual-c++

我已经编写了以下代码，它将对一个窗口中的所有静态文本应用颜色，但我想在一个窗口中应用两种**不同****的颜色**，例如另一种颜色在哪里，并且在一个窗口中将是不同的颜色。我怎样才能做到这一点？这是我所做的：**`ID:1234``ID``1234`**

 **```
case WM_CTLCOLORSTATIC:

    SetBkColor( hdc, COLORREF( :: GetSysColor( COLOR_3DFACE) ) );    
    //sets bckcolor of static text same as window color

    if ( ( HWND ) lParam == GetDlgItem( hWnd, IDC_PID) ) 
    {
    SetTextColor( ( HDC ) wParam, RGB( 250, 50, 200));
    return ( BOOL ) CreateSolidBrush ( GetSysColor( COLOR_3DFACE) );
    }

    break; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T18:29:29.760

我不确定我是否理解你的问题。你的代码看起来很不错。值得注意的一点是，您负责清理分配的资源。使用上面的代码，您正在泄漏`HBRUSH`通过调用创建的对象`CreateSolidBrush`。由于您不需要自定义画笔，因此您应该使用[GetSysColorBrush](http://msdn.microsoft.com/en-us/library/windows/desktop/dd144927.aspx "GetSysColorBrush")。

作为一个口味问题，我会使用[GetDlgCtrlID](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645478.aspx "获取DlgCtrlID")过滤控件 ID 而不是它的窗口句柄。合并您的代码应如下所示的更改：

```
case WM_CTLCOLORSTATIC:
    switch ( GetDlgCtrlID( (HWND)lParam ) )
    {
    case IDC_PID:
        //sets bckcolor of static text same as window color
        SetBkColor( (HDC)wParam, COLORREF( GetSysColor( COLOR_3DFACE ) ) );    
        SetTextColor( (HDC)wParam, RGB( 250, 50, 200) );
        return (INT_PTR)GetSysColorBrush( COLOR_3DFACE );

    default:
        // Message wasn't handled -> pass it on to the default handler
        return 0;
    } 
```**

# facebook - 为什么 Facebook 登录需要状态变量

> ID：12929555
> 
> 赞同：2
> 
> 时间：2012-10-17T07:48:47.393
> 
> 标签：facebook, csrf

Facebook 的服务器端登录过程提到[服务器应该在向 Facebook 发出请求期间提供一个“状态”变量](http://developers.facebook.com/docs/howtos/login/server-side-login/#step3)。它就像一个 CSRF 令牌，Facebook 将在其中传递回登录回调页面以供我们的服务器验证。

但是我不确定为什么这是必要的。如果我们确实收到了伪造的登录请求，我们仍然需要使用`?code=`登录请求从 Facebook 获取 access_token。虚假请求将没有正确的`code`，因此无法正常工作。

此外，用户可以通过***Facebook App***的链接访问我们的服务器。Facebook 会自动`?code=`向链接添加一个参数，[以便我们的服务器可以/必须自动登录用户](https://developers.facebook.com/docs/guides/appcenter/#websites)。如果我们要使用`code`这个推荐提供的，我们无论如何都没有`state`参数可以验证，Facebook 似乎也不关心它。

是`state`可选的吗？它真的提供额外的安全性吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-06T08:00:08.157

该`state`参数是可选的。如果*您的*服务可以将一些值得保留的信息放在那里，它可能会提供额外的安全性。通常，该`state`参数用于保存有关当前浏览器窗口会话状态的数据（与处理可以使用 cookie 处理的整个会话的数据相反）。

使用此功能获得额外安全性的示例如下：

1.  用户访问您的网站
2.  您的网站设置了会话 cookie（例如`Set-Cookie: id=xyzrandomstuff`）
3.  用户尝试做一些需要进行 facebook 身份验证的事情
4.  您的站点创建可与会话 ID 一起使用的 CSRF 令牌，`xyzrandonstuff`并将其放入`state`facebook 登录的参数中
5.  用户在 facebook 上完成登录（你看不到这个）
6.  `code`用户带着和`state`参数从 facebook 回来。
7.  `code`您在完成第 3 步开始的操作之前验证登录，*您的*服务器会验证 CSRF 令牌是否与当前会话匹配。

# java - 传递参数时未设置Java类的属性

> ID：12929560
> 
> 赞同：1
> 
> 时间：2012-10-17T07:48:56.823
> 
> 标签：java, pass-by-reference

我有两个课程这里的代码

```
 public class LoginServiceImplementation implements LoginService {
    public boolean validateLogin(Login login)
    {
        LoginDao loginDao=DaoFactory.getLoginDao();
            boolean b=loginDao.validateLogin(login);
       System.out.println("id=="+login.getLoginId()+" uname=="+login.getuName()+" pass== "+login.getPassword());//  values reset to null
return b;
    }
}

    public class LoginDaoImplementation implements LoginDao {

    @Override
    public Login validateLogin(Login login) {   
        Session session= Hibernate.getHibernateSession();
        Query query= session.createQuery("from Login where uName= 'user' and password= 123");
        //query.setParameter("uname", login.getuName());
        //query.setParameter("pwd", login.getPassword());
        //System.out.print(login.getuName());
        //System.out.print(login.getPassword());
        try
        {
            List<Login> logins=query.list();
            System.out.print(logins.size());

            if(logins.size()>0)
            {
                Login l=new Login();
                l=logins.get(0);
                login=l;                
                System.out.println("id=="+login.getLoginId()+" uname=="+login.getuName()+" pass== "+login.getPassword());/// ALL values getting printed
                return login;
            }
            session.close();
            return null;
        }
        catch(HibernateException x)
        {
            x.printStackTrace();
            session.close();
            return null;
        }

    }

} 
```

当从 serviceImplementation 类调用 DaoImplementation 类的 validatemethod 时，DaoImplementation 类设置作为参数传递的登录对象中的值，但在 serviceimplementation 类中，我得到相同的旧对象，所有值都设置为 null。请回复原因和解决方案。谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T07:55:12.143

```
 login=l; 
```

那是行不通的。您只是将一个新对象分配给局部变量`login`。这对先前存储在该变量中的对象没有影响（并且对外界可见）。Java 不支持按引用传递，因此您不能在范围之外重新分配变量。

您需要将所有数据复制到该对象中（使用 setter），或者（我的偏好）从调用者可以使用的方法中返回一个 Login 对象。（不清楚你是否已经这样做了，部分样本似乎返回`boolean`，部分似乎返回一个`Login`对象）。

# web-applications - 为什么这个错误出现在 struts2 org.apache.velocity.exception.ResourceNotFoundException: Unable to find resource 'template.vm'

> ID：12929562
> 
> 赞同：1
> 
> 时间：2012-10-17T07:49:02.947
> 
> 标签：web-applications, struts2, velocity

我正在为我的 Web 应用程序 html 电子邮件实用程序使用 Apache Velocity 模板引擎。

但我面临的主要问题是资源路径。我正在为我的 Web 应用程序（Struts2 maven arch.. 项目）使用 struts2，并且我已经创建了文件夹模板，并且在其中我创建了 email.vm 文件，它是模板，所以我将模板文件夹移动到资源中（所以当战争将被创建它将转到 WEB-INF/classes 文件夹）

＆在我的实用程序类中，我试图获取如下模板：

```
VelocityEngine ve = new VelocityEngine();
            ve.init();
     VelocityContext context = new VelocityContext();
                context.put("petList", list);

                log.info("Context added");

                /*
                 *   get the Template  
                 */
                Template t = ve.getTemplate("email.vm" );
                log.info("Got Template");

                /*
                 *  now render the template into a Writer, here 
                 *  a StringWriter 
                 */
                StringWriter writer = new StringWriter();
                t.merge( context, writer ); 
```

所以我收到错误 org.apache.velocity.exception.ResourceNotFoundException: Unable to find resource 'template.vm'

我在stackoverflow中解决了所有相关问题并应用了解决方案但仍然没有运气所以有人可以告诉我我做错了什么或错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T08:30:56.867

阅读这个[http://velocity.apache.org/engine/releases/velocity-1.5/developer-guide.html#resourceloaders](http://velocity.apache.org/engine/releases/velocity-1.5/developer-guide.html#resourceloaders)和这个[http://tech--help.blogspot.com/2010/02/solved-apache-速度如何加载.html](http://tech--help.blogspot.com/2010/02/solved-apache-velocity-how-to-load.html)。并且下次使用谷歌。

# iphone - 是否可以在 iPhone 设备上访问已安装的应用程序列表

> ID：12929563
> 
> 赞同：1
> 
> 时间：2012-10-17T07:49:04.210
> 
> 标签：iphone, objective-c

> **可能重复：**
> [获取 iphone objective-c 上已安装应用程序的列表](https://stackoverflow.com/questions/8645365/get-list-of-installed-applications-on-iphone-objective-c)

是否可以访问 iPhone 设备上已安装的应用程序列表.. 如果可能，我如何获取 iPhone 中安装的应用程序列表

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T07:52:56.913

不，你不能用公共 api 做到这一点。您可以创建一个 url 方案列表并测试应用程序是否可以打开它们，但某些应用程序没有 url 方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T07:52:56.127

不它不是。因为它是由苹果的私有 api 处理的。无论如何，这可以在越狱设备上尝试。

无论如何，您可以使用 appdelegate 的 canopenurl 方法检查设备上是否安装了特定应用程序。这将采用方法的 URL，如果它在应用程序中，您可以通过您的应用程序打开该应用程序。

希望能帮助到你。

# android - 尝试使用 oauth2 / AccountManagerFuture 向 Google 进行身份验证时出错

> ID：12929569
> 
> 赞同：0
> 
> 时间：2012-10-17T07:49:32.197
> 
> 标签：android, oauth-2.0, accountmanager

我正在开发的一个 android 应用程序使用 Google oauth 对用户进行身份验证（通过 AccountManager）。

直到昨天它一直工作正常，现在每当应用程序尝试进​​行身份验证并获取谷歌身份验证令牌时，我都会收到以下错误：

[http://i.stack.imgur.com/0H8xT.png](http://i.stack.imgur.com/0H8xT.png)

Logcat 显示以下内容（已删除电子邮件）：

```
I/GLSUser ( 1478): GLS error: RATE_LIMIT_EXCEEDED xxx@yyy.com oauth2:https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile
V/GoogleLoginService( 1478): Returning error intent with: ComponentInfo{com.google.android.gsf.login/com.google.android.gsf.login.LoginActivity}
I/ActivityManager(  456): START {flg=0x10000000 cmp=com.google.android.gsf.login/.LoginActivity (has extras) u=0} from pid 3967
I/ActivityManager(  456): START {cmp=com.google.android.gsf.login/.ShowErrorActivity (has extras) u=0} from pid 1478
I/qtaguid ( 1478): Tagging socket 52 with tag dc4e7700000000(14438007) for uid -1 failed errno=-13
I/NetworkManagementSocketTagger( 1478): tagSocketFd(52, 14438007, -1) failed with errno-13
W/GLSActivity( 1478): GAIA ERROR WITH NO RESOURCE STRING Unknown
I/ActivityManager(  456): Displayed com.google.android.gsf.login/.ShowErrorActivity: +69ms (total +92ms) 
```

以前有人见过这个 RATE_LIMIT_EXCEEDED 错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T07:57:42.940

不，但也许您发送的请求太多？有后台服务之类的吗？尝试使用不同的帐户，也许考虑使用 Google Play 服务，它至少可以更好地处理这个问题。

# sql-server - 如何让这个 IF 语句跳到另一个 if 语句？

> ID：12929577
> 
> 赞同：0
> 
> 时间：2012-10-17T07:50:05.443
> 
> 标签：sql-server, stored-procedures

我怎样才能使这个 If 语句跳到下面的 if 语句？我尝试了 else if,then，但它不起作用。无论输入是否传递给变量，我都希望它显示。

```
declare @sql varchar(8000)
declare @sql_where varchar(8000)

declare @ww varchar(10)
declare @plant varchar(10)
declare @plnr_id varchar(10)

set @plant = 'CS58'
set @ww = '201240'  
set @plnr_id = 'G37'

set @sql_where = 'where'
set @sql = 'select * from  rout_sub_doi '

if len(@plant) > 0 
    set @sql_where = @sql_where + ' plant = ''' + @plant + ''' '

if len(@ww) > 0
    set @sql_where = @sql_where + 'AND sys_intel_ww = ''' + @ww + ''' '

if len(@plnr_id) > 0 

    set @sql_where = @sql_where + ' AND plnr_id = ''' + @plnr_id + ''' '

print @sql
print @sql_where

exec (@sql + @sql_where ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T08:18:19.157

处理未知数量条件的常用方法是使第一个条件`WHERE 1=1`或一些良性条件，例如`WHERE id IS NOT NULL`当已知 id 不可为空时。

```
declare @sql varchar(8000)
declare @sql_where varchar(8000)

declare @ww varchar(10)
declare @plant varchar(10)
declare @plnr_id varchar(10)

set @plant = 'CS58'
set @ww = '201240'  
set @plnr_id = 'G37'

set @sql_where = ''
set @sql = 'select * from rout_sub_doi where 1=1 '

if len(@plant) > 0 
    set @sql_where = @sql_where + 'AND plant = ''' + @plant + ''' '

if len(@ww) > 0
    set @sql_where = @sql_where + 'AND sys_intel_ww = ''' + @ww + ''' '

if len(@plnr_id) > 0 
    set @sql_where = @sql_where + 'AND plnr_id = ''' + @plnr_id + ''' '

print @sql
print @sql_where

exec (@sql + @sql_where ) 
```

# vb.net - vb.net每日时间记录

> ID：12929583
> 
> 赞同：0
> 
> 时间：2012-10-17T07:50:35.933
> 
> 标签：vb.net, date, time

我需要一些关于如何正确处理这个问题的想法/建议。我有我的能力

```
表：dtr
-------------------------------------------------- -------------------------------------
id_dtr | dtr_date | 时间_in_am | time_out_am | time_in_pm | time_out_pm | 员工ID
-------------------------------------------------- -------------------------------------
   1 |2012-10-17| 15:20:41 |

```

我想知道我应该如何在这里插入日期。我在 vb.net 中使用 sql 查询。

```
cmd.commandText = "insert into dtr(dtr_date)values(curdate())"
cmd.executenonquery()
cmd.commandText = "update dtr set time_in_am = curTime(),employee_id=@emp_id where id_dtr=last_insert_id()"
cmd.executenonquery() 
```

我的问题是如何填写我的`time_out_am`, `time_in_pm`,字段中的`time_out_pm`字段。所以当我有`time_in_am`下一个`time_out_am`时会被填满等等。我是 vb.net 的新手，因为我们刚刚从 vfp 迁移。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T21:17:34.423

如果我遇到您的问题，也许您可​​以使用检查功能更改更新。像这样的东西： cmd.commandText = "update dtr set " & CurrentValue & " = curTime(),employee_id=@emp_id where id_dtr=last_insert_id()"。CurrentValue 是一个函数，它返回一个字符串，其中包含要填充的当前字段的名称。

# svn - 审查板后审查和“A +”状态文件

> ID：12929586
> 
> 赞同：4
> 
> 时间：2012-10-17T07:50:44.557
> 
> 标签：svn, diff, review-board

从我的 svn 工作路径中的另一个分支合并后，我有一些“A +”状态文件，如下所示：

```
M      .
A  +    protected/extensions/Everyman/neo4jphp.phar
A  +    protected/extensions/Everyman/InitNeo4j.php
A  +    protected/extensions/Everyman/README 
```

当我使用 post-review 提交评论时，上传差异失败：

```
Error uploading diff

Your review request still exists, but the diff is not attached. 
```

和调试日志显示

> > > 得到 API 错误 219（HTTP 代码 400）：指定的差异文件为空

当我尝试使用 svn diff 上传 diff 时，错误一无所获

如何对这些“A +”状态文件发表评论？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T06:44:11.900

那是因为您尝试提交的差异确实是空的。

您可以在包含 A+ 状态文件的文件夹中尝试“svn diff”，这些 A+ 文件将被忽略。

据我所知，没有好办法让“svn diff”注意到 A+ 文件。但是，您可以在此处复制文件并在提交评论之前使用“svn add”，无论如何您最终都会在评论板上获得一些内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T18:43:57.010

我相信您应该以**统一格式创建差异文件 - 请参阅**[此处](http://www.reviewboard.org/docs/manual/1.6/users/review-requests/creating/#review-requests-for-diffs)解释它的评论板文档。

另一方面，[“svn diff”命令](http://www.mediawiki.org/wiki/Subversion)默认情况下应该为您提供统一格式，但在您的情况下它没有。
在这种情况下，我会说值得检查您的 SVN 客户端文档以了解如何获得统一的差异格式。

！

# javascript - 动态加载网页内容

> ID：12929587
> 
> 赞同：0
> 
> 时间：2012-10-17T07:50:51.327
> 
> 标签：javascript, ajax, vbscript, web

我有一个必须即时构建内容的网页。当用户点击网页的某些部分时，它必须从与网页一起放置在服务器上的同一目录中的文件中加载信息到特殊内容`<div>`中。

据我所知，使用 JavaScript，我必须使用 ajax 技术，所以我有一个问题：我应该配置服务器以便他可以专门处理 ajax 请求，还是只是简单的 GET over HTTP 请求，任何网络都应该支持-服务器无论如何？

我的第二个问题 - 如果 ajax 是一种技术，只有在服务器配置正确的情况下才能奏效，我可以通过 JavaScript 的简单 GET 以某种方式完成我需要的事情吗？

另外，如果使用服务器端脚本更容易，VBScript 怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T07:56:32.517

AJAX 请求与通常的 HTTP 请求非常相似。因此，您无需以任何特殊方式配置服务器即可使其正常工作。通常的服务器应该至少已经支持 GET 和 POST 请求。

但是，对您来说可能很重要的一件事是，只要文件没有其他“保护”，每个人都可以直接访问它们。因此，如果 AJAX 加载的内容包含某种用户敏感数据，您应该设置一些访问控制！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T07:56:53.560

AJAX 涉及服务器端脚本，因此说使用服务器端脚本更容易是没有意义的。此外，AJAX 只不过是脚本为您异步执行的 GET 或 POST 请求，允许您在文档中使用服务器响应而无需重新加载整个页面。

AJAX 本身与其说是一种技术，不如说是一种技术。例如，您可以使用 AJAX，而无需使用 javascript 提供的无处不在的 XmlHttpRequest 对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T07:58:24.670

使用 jQuery AJAX 方法，您可以使用 HTTP Get 和 HTTP Post 从远程服务器请求文本、HTML、XML 或 JSON - 您可以将外部数据直接加载到网页的选定 HTML 元素中......

是的，没有正确配置服务器

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T08:00:46.883

我向您建议 jquery 框架（无需服务器配置）（另请参阅 Sirko 答案）

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-17T08:00:55.687

这是帮助您加载动态内容[看到这个](http://www.dynamicdrive.com/dynamicindex17/ajaxcontent.htm)

# android - 搜索小部件调用 OnNewIntent 两次

> ID：12929590
> 
> 赞同：15
> 
> 时间：2012-10-17T07:51:02.180
> 
> 标签：android, xamarin.android, android-search

我有一个要搜索的活动。当我点击搜索时，`OnNewIntent`它被调用了两次......我做错了什么？

我正在像这样创建 Searchview

```
public override bool OnCreateOptionsMenu(IMenu menu) 
{

    searchView = new SearchView(this);
    var searchManager = (SearchManager)GetSystemService(Context.SearchService);
    var searchableInfo = searchManager.GetSearchableInfo(ComponentName);

    searchView.SetSearchableInfo(searchableInfo);
    var search_item = menu.Add(new Java.Lang.String("Search"));
    search_item.SetActionView(searchView);
    search_item.SetShowAsAction(ShowAsAction.IfRoom);        

    var edit = menu.Add(0, insertItemID, 0, "Insert");
    edit.SetShowAsAction(ShowAsAction.IfRoom);
    edit.SetIcon(Android.Resource.Drawable.IcMenuAdd);

    return base.OnCreateOptionsMenu(menu); 
} 
```

日志：

```
10-17 07:45:45.491 I/ActivityManager(  900): START {act=android.intent.action.SEARCH flg=0x10000000 cmp=Intranet.Intranet/intranet.screens.ContactListActivity (has extras)} from pid 2971
10-17 07:45:47.562 W/EGL_emulation( 2971): eglSurfaceAttrib not implemented
10-17 07:45:47.562 I/ActivityManager(  900): START {act=android.intent.action.SEARCH flg=0x10000000 cmp=Intranet.Intranet/intranet.screens.ContactListActivity (has extras)} from pid 2971
10-17 07:45:48.472 D/OpenGLRenderer( 2971): Flushing caches (mode 0)
10-17 07:45:48.481 D/dalvikvm(  900): GC_CONCURRENT freed 559K, 13% free 7991K/9159K, paused 1ms+1ms
10-17 07:45:48.500 W/InputManagerService(  900): Window already focused, ignoring focus gain of: com.android.internal.view.IInputMethodClient$Stub$Proxy@b48b3470
10-17 07:45:48.561 D/dalvikvm(  963): GC_CONCURRENT freed 389K, 41% free 6027K/10183K, paused 0ms+0ms 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-10-15T21:56:39.443

我假设您在处理搜索意图之前已将您的搜索活动设置为单一顶部并覆盖 onNewIntent 以调用 setIntent。如果是这样，这是使用模拟器硬件键盘时 SearchView 中的一个错误。

[http://books.google.com/books?id=OFXJXbCXjTgC&pg=PT771&lpg=PT771&dq=android+search+intent+sent+twice+bug&source=bl&ots=Ora1AJjh4A&sig=9yFBjCwJ1ARbXePHzcPYpG_QdFQ&hl=en&sa=X&ei=bbddUpbZCcLi4AEioCIAwdUpbZCcLi4AEioCIAwedonepage= android%20search%20intent%20sent%20twice%20bug&f=false](http://books.google.com/books?id=OFXJXbCXjTgC&pg=PT771&lpg=PT771&dq=android+search+intent+sent+twice+bug&source=bl&ots=Ora1AJjh4A&sig=9yFBjCwJ1ARbXePHzcPYpG_QdFQ&hl=en&sa=X&ei=bbddUpbZCcLi4AOiioCIAw&ved=0CD8Q6AEwAw#v=onepage&q=android%20search%20intent%20sent%20twice%20bug&f=false)

您可以通过转到设置-> 语言和输入并单击默认来禁用模拟器中的硬件键盘。

如果您使用软键盘，您应该只看到一次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-05T08:31:06.730

我在 DatePickerDialog 上遇到了类似的问题……这似乎是一个 api 错误。它适用于 android 2.2，但不适用于 android 4.0+。我的解决方案是：

```
int timesCalled = 0;
public void yourMethod(){
    timesCalled += 1;
    if ((timesCalled % 2) == 0) {
       //do your stuff here
    }
} 
```

它不是最清晰的解决方案，但它对我有用。希望这能有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-21T12:36:10.760

你为什么不尝试这样的事情......

[https://github.com/antoniolg/LimeApp/blob/master/src/com/limecreativelabs/app/actionbarsearch/ActionBarSearchActivity.java](https://github.com/antoniolg/LimeApp/blob/master/src/com/limecreativelabs/app/actionbarsearch/ActionBarSearchActivity.java)

该项目的示例应用程序在这里....

[https://play.google.com/store/apps/details?id=com.limecreativelabs.app](https://play.google.com/store/apps/details?id=com.limecreativelabs.app)

您可以在此处阅读项目规范...

[https://github.com/antoniolg/LimeApp](https://github.com/antoniolg/LimeApp)

# python - 如何使用不同版本的 Python 运行脚本

> ID：12929592
> 
> 赞同：1
> 
> 时间：2012-10-17T07:51:10.283
> 
> 标签：python

我刚开始在公司学习 Python，我通常键入`python ext.py`运行脚本。默认的 Python 版本是 2.4。但现在我需要在 Python 3 中运行一个新脚本。

公司的 IT 支持在 中安装了 Python 3 `/usr/local/python3.2.3/bin/python3`，但是当我输入`python -V`查看版本时，它仍然显示 Python 2.4。IT 支持人员说他们无法替换旧版本。如何使用 Python 3 运行脚本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T07:57:56.147

您可以修改 PATH 环境变量以首先获取 python3，或者创建一个别名来为您提供运行 python3 的命令。

要修改您的 PATH，请编辑您的 shell 配置文件（例如，如果您使用 BASH，则为 ~/.bashrc）

PATH=/usr/local/python3.2.3/bin:$PATH

要创建 python3 的别名（在同一个文件中），

别名 python3=/usr/local/python3.2.3/bin/python3

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T07:53:03.293

`/usr/local/python3.2.3/bin/python3 -V`
`/usr/local/python3.2.3/bin/python3 ext.py`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T08:22:10.647

`python3`由于py2和 3 有很多不同之处，通常 Python 3 会以`python`.

# python - 如何在python的串口上测试十六进制输出

> ID：12929593
> 
> 赞同：0
> 
> 时间：2012-10-17T07:51:19.710
> 
> 标签：python, serial-port, hex

当我通过串行发送命令时，从机以十六进制序列响应，即：

这个系列：

```
05 06 40 00 02 05 F6 5C 
```

给我

```
05 07 40 05 02 05 71 37 FF 
```

响应总是以 FF 字节结束。所以我想将字节读入缓冲区，直到遇到FF。应该打印缓冲区并且函数应该返回。

```
import serial

s_port = 'COM1'
b_rate = 2400

#method for reading incoming bytes on serial
def read_serial(ser):
    buf = ''
    while True:
        inp = ser.read(size=1) #read a byte
        print inp.encode("hex") #gives me the correct bytes, each on a newline
        buf = buf + inp #accumalate the response
        if 0xff == inp.encode("hex"): #if the incoming byte is 0xff
            print inp.encode("hex") # never here
            break
    return buf   

#open serial
ser = serial.Serial(
    port=s_port,
    baudrate=b_rate,
    timeout=0.1
)

while True:

    command = '\x05\x06\x40\x00\x02\x05\xF6\x5C' #should come from user input
    print "TX: "
    ser.write(command)
    rx = read_serial(ser)
    print "RX: " + str(rx) 
```

给我：

```
TX: 
05
07
40
05
02
05
71
37
ff 
```

为什么条件从未满足？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T07:58:48.543

这是因为你在比较苹果和橘子。 `inp.encode("hex")`返回一个字符串。假设你读了这封信`"A"`。 `"A".encode("hex")`返回字符串`"41"`和`0x41 != "41"`。你应该这样做：

```
if '\xff' == inp:
    .... 
```

或者，`inp`使用 转换为数字`ord()`：

```
if 0xff == ord(inp):
    .... 
```

然后它应该按预期工作。

# javascript - 在 intellij 中为 javascript 核心添加 jsdoc

> ID：12929595
> 
> 赞同：3
> 
> 时间：2012-10-17T07:51:24.177
> 
> 标签：javascript, intellij-idea, jsdoc

我是 IntelliJ Idea 的新手 我想为 JavaScript 核心添加 jsdoc 这意味着，当我在**.getElementsByTagName()**方法等 javascript 元素上按 ctrl+q 短键时，我想查看文档，但没有任何内容！

有什么办法吗？就像在库 jar 文件附近添加文档 jar 文件以显示文档一样。

谢谢莫希

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T15:11:59.173

文档取自`DOMCore.js`不包含很多有用信息的存根文件：

![DomCore.js](../Images/423981a534607eb83f46c2ec99d830f2.png)

如果您知道在哪里可以找到或如何生成具有完整文档的类似存根文件，那么应该可以使用它。

# entity-framework - Entity Framework 5 在 Code First 中内置了 Database Initializers 和 Seed 方法

> ID：12929598
> 
> 赞同：0
> 
> 时间：2012-10-17T07:51:52.317
> 
> 标签：entity-framework, web-config

我正在使用 EF 5 并试图弄清楚内置数据库初始化程序调用 Seed() 方法的不同之处。这些是我的问题：

**1\. 什么是仅在模型更改时才为数据库播种的好的初始化程序？
2.如何在web.config中配置每个db初始化器？**

澄清我的第一个问题：
到目前为止，我知道这些是 EF 5 的内置数据库初始化程序：

*   将数据库迁移到最新版本
*   CreateDatabaseIfNotExists
*   DropCreateDatabaseIfModelChanges
*   DropCreateDatabaseAlways

我的问题是理解何时调用每个初始化程序的 Seed 方法。我查看了 EntityFramework dll 的内部，并检查了每个初始化程序的 InitializeDatabase() 方法的代码，以检查每个方法的调用时间。这是我发现的：

**MigrateDatabaseToLatestVersion**：我无法确定何时调用种子方法，但从我的测试来看，每次应用程序运行时都会调用它，无论模型是否有变化。
**CreateDatabaseIfNotExists**：我发现只有在创建数据库时才调用 Seed 方法。如果存在，则不应做任何种子。
**DropCreateDatabaseIfModelChanges**：似乎 InitializeDatabase 方法每次都会调用 Seed()，无论模型是否更改。该调用在 if(context.Dabase.Exists()) 检查之外。
**DropCreateDatabaseAlways**：很明显，这将始终调用 Seed 方法。

这个对吗？如果是这样，我似乎无法将播种限制在模型更改的情况下，我可能应该编写一个自定义初始化程序。

关于我的第二个问题，我知道如何配置 MigrateDatabaseToLatestVersion 但我发现很难写，因为我不知道这个声明的含义（尤其是 '2 部分 - 它是枚举的值，在这种情况下应该如何我想知道其他初始化程序的相应数量是多少？）：

```
<entityFramework>
<defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework"/>
<contexts>
  <context type="Digidata.MP.Data.ObjectContext, Digidata.MP.Data">
    <databaseInitializer type="System.Data.Entity.MigrateDatabaseToLatestVersion`2[[Digidata.MP.Data.ObjectContext,  Digidata.MP.Data], [Digidata.MP.Data.Migrations.Configuration, Digidata.MP.Data]], EntityFramework"/>
  </context>
</contexts> 
```

我在哪里可以找到有关如何在配置文件中声明内置初始化程序的说明？

# tomcat7 - Tomcat 7 上的 primepush 无法正常工作

> ID：12929606
> 
> 赞同：2
> 
> 时间：2012-10-17T07:53:01.957
> 
> 标签：tomcat7, primepush

我是 primepush 的新手，有一个问题。整个项目基于maven，服务器是Tomcat 7.0.27，所以我在pom.xml文件中添加依赖如下：

```
 <dependency>
         <groupId>org.atmosphere</groupId>
          <artifactId>atmosphere-runtime</artifactId>
           <version>1.0.1</version>
      </dependency>
      <dependency>
         <groupId>org.atmosphere</groupId>
         <artifactId>atmosphere-annotations</artifactId>
         <version>1.0.1</version>
      </dependency> 
```

web.xml 如下所示：

```
<servlet>
    <servlet-name>Push Servlet</servlet-name>
    <servlet-class>org.primefaces.push.PushServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
    <init-param>
        <param-name>org.atmosphere.cpr.broadcasterCacheClass</param-name>
        <param-value>org.atmosphere.cache.HeaderBroadcasterCache</param-value>
    </init-param>
    <init-param>
        <param-name>org.atmosphere.cpr.broadcasterClass</param-name>
        <param-value>org.atmosphere.cpr.DefaultBroadcaster</param-value>
    </init-param>
    <init-param>
        <param-name>org.atmosphere.cpr.broadcastFilterClasses</param-name>
        <param-value>org.atmosphere.client.TrackMessageSizeFilter</param-value>
    </init-param>
    <init-param>
        <param-name>org.atmosphere.cpr.sessionSupport</param-name>
        <param-value>true</param-value>
    </init-param>
    <init-param>
       <param-name>org.atmosphere.useWebSocket</param-name>
    <param-value>false</param-value>
</init-param>
</servlet>
<servlet-mapping>
    <servlet-name>Push Servlet</servlet-name>
    <url-pattern>/primepush/*</url-pattern>
</servlet-mapping> 
```

我从 primefaces 展示中获取了聊天代码，但不知何故总是抛出 AtomsphereFramework 的 IllegalStateException。

```
 09:33:38.322 ERROR o.atmosphere.cpr.AtmosphereFramework - AtmosphereFramework exception
java.lang.IllegalStateException: Not supported.
   at org.apache.catalina.connector.Request.startAsync(Request.java:1609) ~[catalina.jar:7.0.12]
   at org.apache.catalina.connector.RequestFacade.startAsync(RequestFacade.java:1031) ~[catalina.jar:7.0.12]
   at javax.servlet.ServletRequestWrapper.startAsync(ServletRequestWrapper.java:379) ~[servlet-api.jar:3.0.FR]
   at javax.servlet.ServletRequestWrapper.startAsync(ServletRequestWrapper.java:379) ~[servlet-api.jar:3.0.FR]
   at org.atmosphere.cpr.AtmosphereRequest.startAsync(AtmosphereRequest.java:556) ~[atmosphere-runtime-1.0.1.jar:1.0.1]
   at org.atmosphere.container.Servlet30CometSupport.suspend(Servlet30CometSupport.java:137) ~[atmosphere-runtime-1.0.1.jar:1.0.1]
   at org.atmosphere.container.Servlet30CometSupport.service(Servlet30CometSupport.java:103) ~[atmosphere-runtime-1.0.1.jar:1.0.1]
   at org.atmosphere.cpr.AtmosphereFramework.doCometSupport(AtmosphereFramework.java:1293) ~[atmosphere-runtime-1.0.1.jar:1.0.1]
   at org.atmosphere.cpr.AtmosphereServlet.doPost(AtmosphereServlet.java:293) [atmosphere-runtime-1.0.1.jar:1.0.1]
   at org.atmosphere.cpr.AtmosphereServlet.doGet(AtmosphereServlet.java:279) [atmosphere-runtime-1.0.1.jar:1.0.1]
   at javax.servlet.http.HttpServlet.service(HttpServlet.java:621) [servlet-api.jar:na] 
```

我调试了 Atomsphere Framework 的源代码，发现问题是 Servlet30CometSupport.class 中的以下行：

```
AsyncContext asyncContext = req.startAsync(req, res); 
```

之后它会抛出一个 IllegalStateException 。我该如何解决这个问题？谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-03T14:08:35.743

Tomcat 版本 7.0.27 支持 WebSockets。所以 web.xml 中的参数设置应该是

```
<init-param>
    <param-name>org.atmosphere.useWebSocket</param-name>
    <param-value>true</param-value>
</init-param> 
```

或省略整个参数设置，因为默认情况下使用 websockets。

此外，您还需要为大气兼容-tomcat-1.0.1.jar 和大气兼容-tomcat7-1.0.1.jar 添加依赖项

# c# - 如何在 C# 中重置标识列？

> ID：12929610
> 
> 赞同：2
> 
> 时间：2012-10-17T07:53:09.903
> 
> 标签：c#, asp.net-mvc, linq, sql-server-2008, entity-framework-4

我需要在 MVC.net 中以参数方式重置我的身份字段。我正在使用 Linq 和实体框架。

**原因：**我通过导入在表中插入了数千条记录。一段时间后我再次导入记录，所以我的 id 字段值增加了很多

例如。在 100000000 所以我的字段数据类型是 Big int 但对于我的这个值来说是不够的。所以我需要重置我的身份字段。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-17T08:14:13.653

嗨，我已经搜索并找到了我相关问题的答案。

那是 c# 中带有 mvc3 和实体框架的查询

```
 db.ExecuteStoreCommand("DBCC CHECKIDENT('BibContents',RESEED,1);");
 db.SaveChanges(); 
```

# c# - 使用文件名检查目录中文件是否存在的快速方法

> ID：12929616
> 
> 赞同：1
> 
> 时间：2012-10-17T07:53:41.643
> 
> 标签：c#, .net, search, directory, directorysearcher

我有一个物理目录结构：

*根目录 (X) -> 侧根中的许多子目录 (1,2,3,4..) -> 在每个子目录中存在许多文件。*

```
Photos(Root)    
            ----        
               123456789(Child One)
                 ----
                     1234567891_w.jpg (Child two)
                     1234567891_w1.jpg(Child two)
                     1234567891_w2.jpg(Child two)
                     1234567892_w.jpg (Child two)
                     1234567892_w1.jpg(Child two)
                     1234567892_w2.jpg(Child two)
                     1234567893_w.jpg(Child two)
                     1234567893_w1.jpg(Child two)
                     1234567893_w2.jpg(Child two)
                     -----Cont      
              232344343(Child One)      
              323233434(Child One)      
              232323242(Child One)      
              232324242(Child One)      
              ----Cont.. 
```

在数据库中，我有一张表，其中包含大量类型为“1234567891_w.jpg”的名称。

**注意：数据库中的数据数量和照片数量均以 lacs 为单位。**

***我需要一种有效且更快的方法来检查从数据库表到物理目录结构的每个名称是否存在。***

*   例如：照片（根）内的物理文件夹中是否存在任何名称为“1234567891_w.jpg”的文件。*

如果我错过了此处提供的任何信息，请告诉我。

**更新 ：**

我知道如何在目录中找到文件名存在。但我正在寻找一种有效的方法，因为在超过 40 GB 的数据中检查每个文件名（来自记录的 lacs）存在性会消耗太多资源。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T08:05:46.100

您可以尝试根据它们所在的目录对数据库中的数据进行分组。以某种方式对它们进行排序（例如基于文件名），然后获取该目录中的文件数组 `string[] filePaths = Directory.GetFiles(@"c:\MyDir\");`。现在你只需要比较字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T08:15:43.497

如果是这种情况，您可以执行类似的操作，这些文件似乎是唯一命名的

```
var fileNames = GetAllFileNamesFromDb();
var physicalFiles = Directory.GetFiles(rootDir, 
                                        string.Join(",",fileNames),
                                        SearchOptions.AllDirectories)
                                        .Select(f=>Path.GetFileName(f));
var setOfFiles = new Hashset<string>(physicalFiles);
var notPresent = from name in fileNames
                 where setOfFiles.Contains(name)
                 select name; 
```

*   首先从数据库中获取所有文件的名称
*   然后一次搜索所有文件从根目录搜索并包括所有子目录以获取所有物理文件
*   创建一个哈希集以进行快速查找
*   然后将文件名与集合匹配，那些不在集合中的将被选中。

Hashset 基本上只是一个集合。这是一个只能包含一个项目一次的集合（即没有重复项） Hashset 中的相等性基于 HashCode 并且确定项目是否在集合中的查找是 O(1)。

这种方法要求您在内存中存储一​​个可能非常大的 Hashset，并且根据该集合的大小，它可能会在一定程度上影响系统，它不再优化应用程序的速度，而是通过一个最佳值。

与大多数优化一样，它们都是权衡取舍，关键是在应用程序为最终用户产生的价值的背景下找到所有权衡取舍之间的平衡

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T09:05:36.403

这可能听起来很有趣，或者可能是我不清楚或没有提供太多信息。

但是从目录模式中，我得到了一种处理它的好方法：

由于文件名存在的概率仅在一个位置，即：

**根目录/子目录/文件名**

我应该使用：

File.Exists（根/子目录/文件名）；

即 - 照片/123456789/1234567891_w.jpg

我认为这将是**O(1)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T08:25:20.547

不幸的是，它们并不是你可以用来提高表现的灵丹妙药。与往常一样，这将是速度和内存之间的权衡。它们还有两个可能缺乏性能的方面：数据库站点和硬盘驱动器 i/o 速度。

因此，为了提高速度，我将首先提高数据库查询的性能，以确保它可以足够快地返回名称以进行搜索。因此，请确保您的查询速度很快，并且可能使用（im MS SQL case）关键字，例如`READ SEQUENTIAL`在这种情况下，您将在查询仍在运行时检索到第一个结果，您不必等到查询完成并给您大块的名字。

在硬盘的另一端，您可以调用`Directory.GetFiles()`，但此调用会阻塞，直到它遍历所有文件并返回一个包含所有文件名的大数组。这将是内存消耗路径，第一次搜索需要一段时间，但如果您之后只处理该数组，您将获得所有连续搜索的速度改进。另一种方法是调用`Directory.EnumerateFiles()`这将在每次调用时即时搜索驱动器，因此可能会为第一次搜索获得速度，但它们不会为下一次搜索发生任何内存存储，这会提高内存占用但会降低速度，因为它们不是内存中可以搜索的数组。另一方面，如果检测到您一遍又一遍地迭代相同的文件并且某些缓存发生在较低级别，则操作系统也会进行一些缓存。

因此，`Directory.GetFiles()`如果返回的数组不会破坏您的记忆并对此进行所有搜索（`HashSet`如果仅文件名或完整路径取决于您从数据库中获得的内容，则可能将其放入 a 以进一步提高性能）在另一种情况下，使用`Directory.EnumerateFiles()`并希望最好的缓存是操作系统。

### 更新

重新阅读您的问题和评论后，据我了解，您有一个类似的名称`1234567891_w.jpg`，但您不知道名称的哪个部分代表目录部分。因此，在这种情况下，您需要进行显式搜索，因为遍历所有目录只需要很长时间。这是一些示例代码，它应该让您了解如何在第一时间解决这个问题：

```
string rootDir = @"D:\RootDir";

// Iterate over all files reported from the database
foreach (var filename in databaseResults)
{
    var fullPath = Path.Combine(rootDir, filename);

    // Check if the file exists within the root directory
    if (File.Exists(Path.Combine(rootDir, filename)))
    {
        // Report that the file exists.
        DoFileFound(fullPath);
        // Fast exit to continue with next file.
        continue;
    }

    var directoryFound = false;

    // Use the filename as a directory
    var directoryCandidate = Path.GetFileNameWithoutExtension(filename);
    fullPath = Path.Combine(rootDir, directoryCandidate);

    do
    {
        // Check if a directory with the given name exists
        if (Directory.Exists(fullPath))
        {
            // Check if the filename within this directory exists
            if (File.Exists(Path.Combine(fullPath, filename)))
            {
                // Report that the file exists.
                DoFileFound(fullPath);
                directoryFound = true;
            }

            // Fast exit, cause we looked into the directory.
            break;
        }

        // Is it possible that a shorter directory name
        // exists where this file exists??
        // If yes, we have to continue the search ...
        // (Alternative code to the above one)
        ////// Check if a directory with the given name exists
        ////if (Directory.Exists(fullPath))
        ////{
        ////    // Check if the filename within this directory exists
        ////    if (File.Exists(Path.Combine(fullPath, filename)))
        ////    {
        ////        // Report that the file exists.
        ////        DoFileFound(fullPath);

        ////        // Fast exit, cause we found the file.
        ////        directoryFound = true;
        ////        break;
        ////    }
        ////}

        // Shorten the directory name for the next candidate
        directoryCandidate = directoryCandidate.Substring(0, directoryCandidate.Length - 1);
    } while (!directoryFound
              && !String.IsNullOrEmpty(directoryCandidate));

    // We did our best but we found nothing.
    if (!directoryFound)
        DoFileNotAvailable(filename);
} 
```

我能想到的唯一进一步的性能改进是将找到的目录放入 a`HashSet`并在检查之前`Directory.Exists()`使用它来检查现有目录，但也许这不会获得任何好处，因为操作系统已经在目录查找中进行了一些缓存和然后几乎与您的本地缓存一样快。但是对于这些事情，你只需要衡量你的具体问题。

# java - 将短信转换为简单英语的 API？

> ID：12929618
> 
> 赞同：2
> 
> 时间：2012-10-17T07:53:46.353
> 
> 标签：java

我正在开发一个自然语言处理项目，用户可以在其中使用 SMS 语言。所以我只想知道是否有任何 api 可以将 SMS 转换为简单的英语语言？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T08:07:51.830

我会使用 HashMap 将这些 txt 口语转换成真实的作品。例如

```
private Map<String, String> convertMap = new HashMap<>(){{
    put("IMHO", "in my humble opinion");
    put("LOL", "laugh our loud");
}}; 
```

如果您愿意，可以将此映射包装在一个类中，该类具有您可以对其进行编码的接口。该接口将是您的库 API。如果您发现地图变得太大，那么您可以更改实现而不影响您的调用代码

```
public interface TxtConverter {
    String convertToText(String txtSpeak);
} 
```

然后，您扩展它的类可以包含 HashMap。您将被迫实施的 convertToText 方法可以进行搜索、异常处理等。

# razor - @Html.Raw(Url.Action(...)) 在部署服务器上评估为空字符串

> ID：12929622
> 
> 赞同：1
> 
> 时间：2012-10-17T07:53:54.937
> 
> 标签：razor, azure, asp.net-mvc-4

我一直在处理 localhost 和我的 ajax 请求

```
$.ajax({
                url: '@Html.Raw(Url.Action("IdentityProviders", "Account", new { serviceNamespace = "traffictheory", appId = "http://traffictheory.cloudapp.net/" }))', ... 
```

工作得很好。

但在部署服务器（Windows Azure 云服务）上，url 为空：''

我不知道从哪里开始调试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T17:09:07.080

确保您没有丢失该操作的路由所需的任何参数。

另外，请确保您没有忘记`area`在参数中提及 。

```
Url.Action("IdentityProviders", "Account",
    new {
        area = "did you forget the area?",
        serviceNamespace = "traffictheory",
        appId = "http://traffictheory.cloudapp.net/",
        requiredParamThatYouForgot = "missing value"
    }) 
```

# php - 从数据库加载值以根据先前下拉菜单中的选择创建下拉菜单

> ID：12929623
> 
> 赞同：1
> 
> 时间：2012-10-17T07:53:58.660
> 
> 标签：php, mysql, drop-down-menu

我的问题是我尝试根据先前下拉列表中的选择加载下拉列表。我正在从数据库中加载值。但是当我使用时，`$_get['emirate']`我没有得到价值。它说该值未设置。

```
$data = mysql_query("SELECT * FROM emirate") 
        or die(mysql_error()); 

    Print "<table border cellpadding=3>"; 
    print"<tr><th><form method=get action='index.php'><select id=EMIRATE size=1><OPTION value=all>all</option>";
    while($info = mysql_fetch_array( $data )) 
    { 
        Print "<option value=". $info['em_name'] .">".$info['em_name']."</option>"; 
    }
    print"</select></form></th>";
    if(isset($_GET['EMIRATE'])){
        $name=$_GET['EMIRATE'];
        echo $name;

        $data = mysql_query("SELECT a_name FROM areas where em_id=(select em_id from emirate where em_name=\"".$name."\")") 
        or die(mysql_error());
        Print "<th><select name=AREAS size=1>";
        while($info = mysql_fetch_array( $data ))
        {
            Print "<option >".$info['a_name']."</option>";
        }
        print"</select></th>";
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T06:05:36.700

我发现了问题。

> 我没有放置**提交按钮**，因此我的表单没有被提交。因此我没有从 $_GET 中获得任何价值。

[http://php.net/manual/en/reserved.variables.get.php](http://php.net/manual/en/reserved.variables.get.php)

现在我顺利地得到了结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T07:59:39.347

您在上一页的表单上使用哪种方法，发布或获取？

您可以将 $_GET 替换为 $_REQUEST，它从 post 和 get 中检索值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T08:09:47.567

```
<select id=EMIRATE size=1><OPTION value=all>all</option> 
```

请修复 HTML .... 您错过了为您的选择设置**名称**属性...

```
<select id="EMIRATE" size="1" name="EMIRATE">
    <option value="all">all</option>
    .... 
```

# mysql - 分区和更新

> ID：12929624
> 
> 赞同：15
> 
> 时间：2012-10-17T07:54:07.630
> 
> 标签：mysql, performance, partitioning

我对 MySQL 功能的研究越来越深入，下一个我要尝试的是表分区

关于它们基本上只有一个问题，我还找不到明确的答案：

如果更新一行，如果满足另一个分区的分区条件，该行是否会自动移动到另一个分区？（例如，如果分区是按区域划分的，并且区域从区域A变为区域B）

如果这不会自动发生，我需要做什么才能将行从分区 A 移动到分区 B？（这样做会影响性能吗？）

我想做的是将“已删除”（一个标志）信息移动到表的单独分区中，因为这些信息很少被调用。这通常是一个好主意，还是将所有内容都留在同一个（可能有一天会很大 - 数百万行）表中会更好？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-17T08:22:51.153

它必须在更新时移动它们。如果没有它就不会很好地工作。MySQL 基本上必须扫描每个查询的所有分区，因为它不知道记录的存储位置。

我还做了一些测试（在 MySQL 5.6 上，因为这是第一个可以指定要查询的分区的版本）

```
CREATE TABLE test (
  id int
) 
PARTITION BY RANGE (id) (
  PARTITION p1 VALUES LESS THAN (1000),
  PARTITION p2 VALUES LESS THAN MAXVALUE);

INSERT INTO test VALUES (1); -- now on partition p1

SELECT * FROM test PARTITION(p1);
+------+
| id   |
+------+
|    1 |
+------+
1 row in set (0.00 sec)

SELECT * FROM test PARTITION(p2);
Empty set (0.00 sec)

UPDATE test SET id = 1001; -- now on partition p2

SELECT * FROM test PARTITION (p1);
Empty set (0.00 sec)

SELECT * FROM test PARTITION (p2);
+------+
| id   |
+------+
| 1001 |
+------+
1 row in set (0.00 sec) 
```

很明显，它在更新后立即知道该行现在位于分区 p2 上。

# git - 为什么git不合并一些更改？

> ID：12929625
> 
> 赞同：4
> 
> 时间：2012-10-17T07:54:09.033
> 
> 标签：git, git-merge, git-pull, merge-conflict-resolution, automerge

我们遇到了一个奇怪的 git merge 问题。我们有 2 个 repos（下面是简单的）。PublicRepo 是我们进行大部分开发的地方，我们不时将更改拉入/合并到 PrivateRepo。

[https://github.com/suwatch/PublicRepo](https://github.com/suwatch/PublicRepo)

[https://github.com/suwatch/PrivateRepo](https://github.com/suwatch/PrivateRepo)

如果我们克隆 PublicRepo 并通过删除以下行并提交来更改**kudu.web/kudu.web.csproj 。**

```
<Reference Include="Microsoft.Json, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35, processorArchitecture=MSIL">
  <HintPath>..\packages\JsonValue.0.6.0\lib\40\Microsoft.Json.dll</HintPath>
</Reference> 
```

当尝试从 PublicRepo -> PrivateRepo 拉/合并此更改时，自动合并只是**忽略**了此更改并且没有删除任何内容。尝试使用不同的行，它确实有效（正确删除）。我想知道可能是什么问题？从哪里开始调查？我们必须做些什么来纠正这个问题——除了每次我们拉/合并时都必须检查所有自动合并的文件？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T10:30:46.633

你有

```
*.csproj text=auto merge=union 
```

在你的 .gitattributes 文件中。联合合并将连接来自所有参考的行。

# php - 多商店模板 opencart

> ID：12929631
> 
> 赞同：1
> 
> 时间：2012-10-17T07:54:43.107
> 
> 标签：php, mysql, opencart

我正在使用 opencart v. 1.5.4.1，我有一个像 xx.domain.de 这样的子域，其域根与 wwww.domain.de 相同。新商店没有按预期工作。我无法为其分配不同的主题，并且所有链接都指向主商店。之前有人有这个问题[Unable to create Multiple shop with different templates in opencart](https://stackoverflow.com/questions/11099219/unable-to-create-multiple-shop-with-different-templates-in-opencart/12895928#12895928) 谢谢！

# nhibernate - 始终不存在的表之间的析取

> ID：12929632
> 
> 赞同：0
> 
> 时间：2012-10-17T07:54:43.193
> 
> 标签：nhibernate, criteria

我已经将 K 和 Other 映射到父表 Errand 并且它们与真实的 id 相关，事情是 Errand 只有一个 K 或一个 Other 从来没有两者！当我只有这样的一行上有一个 Crieteria 查询时，它可以无缝工作；

```
 public void AddNoteQuery(DetachedCriteria query)
    {
        if (_request.Note != null)
        {
            query
                .CreateAlias("Other", "o")
                .Add(Restrictions.Eq("o.Note", _request.Note));
        }
    } 
```

但是当我尝试进行 K OR Other Criteria Query 时，我没有得到任何结果！

```
 public void AddNoteQuery(DetachedCriteria query)
    {
        if (_request.Note != null)
        {
            query
                .CreateAlias("K", "k")
                .CreateAlias("Other", "o")
                .Add(Restrictions.Or(
                    Restrictions.Eq("k.Note", _request.Note),
                    Restrictions.Eq("o.Note", _request.Note)));
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T08:35:00.747

尝试指定连接类型：

```
query
    .CreateAlias("K", "k", JoinType.LeftOuterJoin)
    .CreateAlias("Other", "o", JoinType.LeftOuterJoin)
    .Add(Restrictions.Or(
        Restrictions.Eq("k.Note", _request.Note),
        Restrictions.Eq("o.Note", _request.Note))); 
```

# z3 - 混合实数和位向量

> ID：12929633
> 
> 赞同：4
> 
> 时间：2012-10-17T07:54:53.170
> 
> 标签：z3

我有两个使用实数的 SMT2-Lib 脚本，它们在道德上是等效的。唯一的区别是一个也使用位向量，而另一个不使用。

这是同时使用实数和位向量的版本：

```
; uses both reals and bit-vectors
(set-option :produce-models true)
(define-fun s2 () Real (root-obj (+ (^ x 2) (- 2)) 2))
(define-fun s3 () Real 0.0)
(define-fun s6 () Real (/ 1.0 1.0))
(declare-fun s0 () (_ BitVec 1))
(declare-fun s1 () (_ BitVec 1))
(assert
   (let ((s4 (- s3 s2)))
   (let ((s5 (ite (= #b1 s1) s2 s4)))
   (let ((s7 (+ s5 s6)))
   (let ((s8 (- s5 s6)))
   (let ((s9 (ite (= #b1 s0) s7 s8)))
   (let ((s10 (ite (>= s9 s3) #b1 #b0)))
   (= s10 #b1))))))))

(check-sat)
(get-model) 
```

这是道德上等效的脚本，使用`Bool`而不是大小为 1 的位向量，否则基本相同：

```
; uses reals only
(set-option :produce-models true)
(define-fun s2 () Real (root-obj (+ (^ x 2) (- 2)) 2))
(define-fun s3 () Real 0.0)
(define-fun s6 () Real (/ 1.0 1.0))
(declare-fun s0 () (Bool))
(declare-fun s1 () (Bool))
(assert
   (let ((s4 (- s3 s2)))
   (let ((s5 (ite s1 s2 s4)))
   (let ((s7 (+ s5 s6)))
   (let ((s8 (- s5 s6)))
   (let ((s9 (ite s0 s7 s8)))
   (let ((s10 (ite (>= s9 s3) #b1 #b0)))
   (= s10 #b1))))))))

(check-sat)
(get-model) 
```

对于前者，我`unknown`从 z3（Mac 上的 v4.1）获得，而后者很好地生产`sat`和模型。

虽然 SMT-Lib2 不允许混合实数和位向量，但我认为 Z3 可以很好地处理这些组合。我弄错了吗？有解决方法吗？

（请注意，这些是生成的脚本，因此仅使用`Bool`而不是`(_ BitVec 1)`相当昂贵，因为它需要在其他地方进行大量更改。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T14:14:14.087

新的[非线性求解器](http://research.microsoft.com/en-us/um/people/leonardo/IJCAR2012.pdf)尚未与其他理论集成。它仅支持实变量和布尔值。实际上，它也允许整数变量，但对它们的支持非常有限。它实际上将非线性整数问题作为真正的问题来解决，最后只是检查每个整数变量是否分配给一个整数值。此外，此求解器是 Z3 中可用的唯一完整的非线性（实数）算术程序。

由于您的第一个问题包含位向量，因此 Z3 不使用非线性求解器。相反，Z3 使用了一个结合了许多理论的通用求解器，但它对于非线性算术来说是不完整的。

话虽如此，我知道这是一个限制，我正在努力解决这个问题。在（不那么近的）未来，Z3 将有一个新的求解器，它集成了非线性算术、数组、位向量等。

最后，位向量理论是一个非常特殊的情况，因为我们可以很容易地将其简化为 Z3 中的命题逻辑。Z3 有`bit-blast`应用这种减少的策略。这种策略可以将任何非线性+位向量问题简化为仅包含实数和布尔值的问题。这是一个示例（[http://rise4fun.com/Z3/0xl](http://rise4fun.com/Z3/0xl)）。

```
; uses both reals and bit-vectors
(set-option :produce-models true)
(define-fun s2 () Real (root-obj (+ (^ x 2) (- 2)) 2))
(define-fun s3 () Real 0.0)
(define-fun s6 () Real (/ 1.0 1.0))
(declare-fun s0 () (_ BitVec 1))
(declare-fun s1 () (_ BitVec 1))
(declare-fun v2 () (_ BitVec 8))
(assert
   (let ((s4 (- s3 s2)))
   (let ((s5 (ite (= #b1 s1) s2 s4)))
   (let ((s7 (+ s5 s6)))
   (let ((s8 (- s5 s6)))
   (let ((s9 (ite (= #b1 s0) s7 s8)))
   (let ((s10 (ite (>= s9 s3) #b1 #b0)))
   (= s10 #b1))))))))

(assert (or (and (not (= v2 #x00)) (not (= v2 #x01))) (bvslt v2 #x00)))
(assert (distinct (bvnot v2) #x00))
(check-sat-using (then simplify bit-blast qfnra))
(get-model) 
```

# c# - 制作后如何从 App.config 加载 EF 连接字符串？

> ID：12929634
> 
> 赞同：-1
> 
> 时间：2012-10-17T07:54:54.370
> 
> 标签：c#, connection-string, app-config, entity-framework-5, dbcontext

我有问题，找不到解决方案。
开始时我有那个`App.config`文件：

```
...
<connectionStrings>
    <add name="IdealsadEntities" connectionString="" providerName="System.Data.EntityClient" />
</connectionStrings>
... 
```

在我的应用程序 ( **WinForm ) 中，我从****xml**文件读取连接到数据库的参数，然后覆盖 App.config 并获得编译文件`AppName.exe.config`。

问题在于创建我的**实体****实例**。我在创建文件后使用了这段代码：

 **```
IdealsadEntities _db = new IdealsadEntities(); 
```

但在第一次运行应用程序`_db.Database.Connection`是**null**。`AppName.exe.config`在第二次运行它从文件中读取并且工作正常。

## 问题：

*   所以我的问题是为什么即使我重写这个文件也要先运行读取空字符串？
*   DbContext 是否更早执行？
*   如何修复它，从重写的文件中获取新的连接字符串？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T07:57:21.207

您的 app.config 仅在应用程序启动时读取。在您重新启动程序之前，不会注意到您在应用程序运行时写入的更改。

但是，您可以使用连接字符串构造实体，如下所示：

```
IdealsadEntities _db = new IdealsadEntities("metadata=res://..."); 
```

将连接字符串中的相应信息替换为从其他文件中读取的数据。**

# php - 存储 Facebook 用户喜欢

> ID：12929642
> 
> 赞同：-1
> 
> 时间：2012-10-17T07:55:59.300
> 
> 标签：php, mysql, facebook

我正在开发一个应用程序，但我想做的是让用户喜欢并将其存储在我的数据库中

但是当我尝试将其保存在数据库中时，它不会将其插入我的数据库中

```
$likes = $facebook->api('/me/likes');

$fblikes = '';

foreach($likes['data'] as $like){

    $fblikes .= $like['name'].', ';

}

$insert = "INSERT INTO users (name, email, gender, liked)
                VALUES (
                '$fbname',
                '$fbemail',
                '$fbgender',
                '$fblikes'
                )";

$add_bericht = mysql_query($insert); 
```

但是每当我从插入 sql 中删除 $fblikes 时，它都会插入到我的数据库中

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T07:58:40.853

我认为您的查询中存在转义问题。您（非常）容易受到 SQL 注入的影响。
请参阅这篇文章以了解如何防止它：[如何防止 PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php)

# objective-c - 如何从按钮objective-c创建动态视图

> ID：12929645
> 
> 赞同：1
> 
> 时间：2012-10-17T07:56:04.327
> 
> 标签：objective-c, xcode, ios6

**嗨** ，我正在做一些objective-c 项目，我想知道是否有办法通过按下按钮来添加视图。我不是突然出现的，我首先尝试用一个视图控制器和两个视图制作一个项目，我可以通过按下按钮在它们之间切换。事实是我已经创建了我的 2 个视图..它可以工作，所以我想我离解决方案不远，但是......有人可以帮我吗？

十分感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T08:13:59.860

如果您想在按下按钮时添加视图，您应该使用：

```
UIView* view = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 100, 100)];
[self.view addSubview:view]; 
```

如果你想推送一个新的视图控制器，你应该使用：

```
UIViewController* vc = [[UIViewController alloc] init];
[self.navigationController pushViewController:vc animated:YES]; 
```

# jsp - 如何使用 Tapastry 停止直接访问页面而不登录

> ID：12929648
> 
> 赞同：0
> 
> 时间：2012-10-17T07:56:11.157
> 
> 标签：jsp, tapestry

**( 1.)** 我在 Tapestry 中有一个`Login`页面和一个页面。`Index`我检查用户名和密码，并使用以下方法将页面引导到索引页面。

```
Object onSuccess(){
       return Index.class;
} 
```

但是，如果我直接使用简单的 URL 来索引页面，它仍然会在那里。如何使其只能通过登录页面访问。

**( 2.)** 如何在页面之间传递参数？如果我可以在寻呼机之间传递`user_id`或生成密钥，那么如果有人在没有该密钥的情况下加载页面，我会给出错误。有什么建议么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T09:27:21.910

您需要进行会话管理。

或者其他解决方案是您可以将参数 user_id 从 Login as 传递给 Index

从登录 onPassivate() 方法传递此参数，并在索引中使用该名称定义参数，并在 onActivate() 中获取此值。

# iphone - sqlite3_exe（）中的错误

> ID：12929649
> 
> 赞同：0
> 
> 时间：2012-10-17T07:56:20.410
> 
> 标签：iphone

先生，我正在使用数据库连接我已经编写了所有代码并且我还导入了头文件。但是它显示了在架构中找不到的 sqlite3_exe 符号行中的错误

帮我清除...!!!!

```
 NSFileManager *filemgr=[NSFileManager defaultManager];
if ([filemgr fileExistsAtPath:databasePath]==NO)
{
    const char *dbpath=[databasePath UTF8String];
    if (sqlite3_open(dbpath, &contactDB)==SQLITE_OK)
    {
        char *errorMsg;
        const char *sql_stmt="CREATE TABLE IF NOT EXISTS CONTACTS (ID INTEGER PRIMARY KEY AUTOINCREMENT,  NAME TEXT, ADDRESS TEXT, PHONE NUMERIC)";
        if (sqlite3_exe(contactDB, sql_stmt, NULL,NULL, &errorMsg)!=SQLITE_OK)
        {
            status.text=@"Failed to crate table";
        }
        sqlite3_close(contactDB);
    }else {
        status.text=@"Faild to open/create database";
    }
} 
```

错误行是

```
if (sqlite3_exe(contactDB, sql_stmt, NULL,NULL, &errorMsg)!=SQLITE_OK) 
```

警告是函数“sqlite3_exe”的隐式声明在 c99 中无效。错误是架构 i386 的未定义符号：

```
 "_sqlite3_exe", referenced from:
  -[DatabaseViewController viewDidLoad] in DatabaseViewController.o 
```

ld：未找到体系结构 i386 的符号 clang：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T08:02:34.813

它是 sqlite3_exec。不是 sqlite3_exe。请检查。exe中缺少“C”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T11:51:50.530

这是相同的示例代码。您可以在此处录制音频。你可以

```
#define DOCUMENTS_FOLDER [NSHomeDirectory() stringByAppendingPathComponent:@"Documents"]

    - (void) startRecording{

    UIBarButtonItem *stopButton = [[UIBarButtonItem alloc] initWithTitle:@"Stop" style:UIBarButtonItemStyleBordered  target:self action:@selector(stopRecording)];
    self.navigationItem.rightBarButtonItem = stopButton;
    [stopButton release];

    AVAudioSession *audioSession = [AVAudioSession sharedInstance];
    NSError *err = nil;
    [audioSession setCategory :AVAudioSessionCategoryPlayAndRecord error:&err];
    if(err){
        NSLog(@"audioSession: %@ %d %@", [err domain], [err code], [[err userInfo] description]);
        return;
    }
    [audioSession setActive:YES error:&err];
    err = nil;
    if(err){
        NSLog(@"audioSession: %@ %d %@", [err domain], [err code], [[err userInfo] description]);
        return;
    }

    recordSetting = [[NSMutableDictionary alloc] init];

    [recordSetting setValue :[NSNumber numberWithInt:kAudioFormatLinearPCM] forKey:AVFormatIDKey];
    [recordSetting setValue:[NSNumber numberWithFloat:44100.0] forKey:AVSampleRateKey]; 
    [recordSetting setValue:[NSNumber numberWithInt: 2] forKey:AVNumberOfChannelsKey];

    [recordSetting setValue :[NSNumber numberWithInt:16] forKey:AVLinearPCMBitDepthKey];
    [recordSetting setValue :[NSNumber numberWithBool:NO] forKey:AVLinearPCMIsBigEndianKey];
    [recordSetting setValue :[NSNumber numberWithBool:NO] forKey:AVLinearPCMIsFloatKey];

    // Create a new dated file
    NSDate *now = [NSDate dateWithTimeIntervalSinceNow:0];
    NSString *caldate = [now description];
    recorderFilePath = [[NSString stringWithFormat:@"%@/%@.caf", DOCUMENTS_FOLDER, caldate] retain];

    NSURL *url = [NSURL fileURLWithPath:recorderFilePath];
    err = nil;
    recorder = [[ AVAudioRecorder alloc] initWithURL:url settings:recordSetting error:&err];
    if(!recorder){
        NSLog(@"recorder: %@ %d %@", [err domain], [err code], [[err userInfo] description]);
        UIAlertView *alert =
        [[UIAlertView alloc] initWithTitle: @"Warning"
                                   message: [err localizedDescription]
                                  delegate: nil
                         cancelButtonTitle:@"OK"
                         otherButtonTitles:nil];
        [alert show];
        [alert release];
        return;
    }

    //prepare to record
    [recorder setDelegate:self];
    [recorder prepareToRecord];
    recorder.meteringEnabled = YES;

    BOOL audioHWAvailable = audioSession.inputIsAvailable;
    if (! audioHWAvailable) {
        UIAlertView *cantRecordAlert =
        [[UIAlertView alloc] initWithTitle: @"Warning"
                                   message: @"Audio input hardware not available"
                                  delegate: nil
                         cancelButtonTitle:@"OK"
                         otherButtonTitles:nil];
        [cantRecordAlert show];
        [cantRecordAlert release]; 
        return;
    }

    // start recording
    [recorder recordForDuration:(NSTimeInterval) 10];

    }

    - (void) stopRecording{

    [recorder stop];

    NSURL *url = [NSURL fileURLWithPath: recorderFilePath];
    NSError *err = nil;
    NSData *audioData = [NSData dataWithContentsOfFile:[url path] options: 0 error:&err];
    if(!audioData)
        NSLog(@"audio data: %@ %d %@", [err domain], [err code], [[err userInfo] description]);
    [editedObject setValue:[NSData dataWithContentsOfURL:url] forKey:editedFieldKey];   

    //[recorder deleteRecording];

    NSFileManager *fm = [NSFileManager defaultManager];

    err = nil;
    [fm removeItemAtPath:[url path] error:&err];
    if(err)
        NSLog(@"File Manager: %@ %d %@", [err domain], [err code], [[err userInfo] description]);

    UIBarButtonItem *startButton = [[UIBarButtonItem alloc] initWithTitle:@"Record" style:UIBarButtonItemStyleBordered  target:self action:@selector(startRecording)];
    self.navigationItem.rightBarButtonItem = startButton;
    [startButton release];

    }

    - (void)audioRecorderDidFinishRecording:(AVAudioRecorder *) aRecorder successfully:(BOOL)flag
    {

    NSLog (@"audioRecorderDidFinishRecording:successfully:");
    // your actions here

    } 
```

对于播放您可以在停止录制方法中使用这些行：

```
NSURL* musicFile = [NSURL fileURLWithPath:[[NSBundle mainBundle] 
                                               pathForResource:@"click"
                                               ofType:@"caf"]];
    AVAudioPlayer *click = [[AVAudioPlayer alloc] initWithContentsOfURL:musicFile error:nil];
    [click play];
    [click release]; 
```

确保将录制的声音路径的正确 URL 传递到应用程序中。这些台词将在音频播放器中为您播放。

# javascript - 如何在硒的 DatePicker 上单击正确的日期？

> ID：12929656
> 
> 赞同：1
> 
> 时间：2012-10-17T07:56:47.477
> 
> 标签：javascript, html, selenium

我遇到了这样的硒测试问题：我有一个带有日期选择器的页面来选择日期。我的测试必须点击正确的日期（例如：14/2/2012）。不幸的是，日期选择器是由 Jquery 创建的，代码如下：

```
<!doctype html>

<html lang="en">
<head>
<meta charset="utf-8" />
<title>jQuery UI Datepicker - Default functionality</title>
<link rel="stylesheet" href="http://code.jquery.com/ui/1.9.0/themes/base/jquery-ui.css" />
<script src="http://code.jquery.com/jquery-1.8.2.js"></script>
<script src="http://code.jquery.com/ui/1.9.0/jquery-ui.js"></script>
<link rel="stylesheet" href="/resources/demos/style.css" />
<script>
$(function() {
    $( "#datepicker" ).datepicker();
});
</script>
</head>
<body>

    <p>Date: <input type="text" id="datepicker" /></p>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T08:03:19.453

只需使用 .SendKeys("") 设置值。它仍然只是引擎盖下的一个文本字段

# elasticsearch - 在 elasticsearch 中进行搜索

> ID：12929659
> 
> 赞同：0
> 
> 时间：2012-10-17T07:57:03.593
> 
> 标签：elasticsearch

我准备查询对象并在弹性搜索中进行搜索。

为了制作查询对象，我给出了键和它们的值。

问题是，当 key 和 value 类似于 "brand":"Men's Wear" 时，在这种情况下，elasticsearch 无法给我相关文档。我认为问题在于逗号或可能是空格。如果我使用其他 json 属性作为键和值，一切都很好（没有空格和逗号，如“优先级”：“高”）

请提供任何帮助！

更新：

没有匹配查询仍然无法正常工作！我在创建搜索查询时发现的另一个问题。我正在使用的查询是：

```
var qryObj1 = {
                       "query" : {
                        "text" : {"name":"Tom"}
                    }
                }; 
```

这将返回所有名为 Tom 的文档。现在我想获取所有名称为 Tom 且职业是开发人员的文档。所以，这里修改了一个：

```
qryObj1 = {
                    "query" : {
                        "text" : {"name":"Tom","profession":"developer"}
                    },"operator" : "and"

                }; 
```

但搜索结果是旧的。任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T05:08:57.460

您需要使用布尔查询 [http://www.elasticsearch.org/guide/reference/query-dsl/bool-query.html](http://www.elasticsearch.org/guide/reference/query-dsl/bool-query.html)

这里可以要求ES对各种查询进行AND或OR

```
"bool" : {
    "must" : [
                    "text" : {"name":"Tom"},
                    "text" : {"profession":"developer"}
    ] 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T20:02:27.317

听起来您正在使用 TermQuery，不是吗？

不分析 TermQuery，因此它们与您分析的内容不匹配。

尝试使用[MatchQuery](http://www.elasticsearch.org/guide/reference/query-dsl/match-query.html)。它应该工作。

# asp.net - 在gridview dataview中打开新的动态窗口？

> ID：12929660
> 
> 赞同：0
> 
> 时间：2012-10-17T07:57:08.327
> 
> 标签：asp.net, gridview

我有一个包含 pdf 链接的 gridview（称为 grdSearchResults）。pdf url 是从数据库返回的，但我不确定如何将 url 添加到 gridview 中的 imagebutton 控件。

这是我的代码隐藏：

> ```
> List<SearchResults> search = _searchRepository.GetFactFileSearchResults(results);
>         grdSearchResults.DataSource = search;
>         grdSearchResults.DataBind(); 
> ```

这是我的 aspx 页面代码：

> ```
> <asp:TemplateField HeaderText="FILE TYPE" ItemStyle-HorizontalAlign="Center">  
>             <ItemTemplate>  
>                 &nbsp;<asp:ImageButton runat="server" ID="_imgbtnPreview" OnClientClick="<%# Container.DataItem("DownloadUrl") %>" ImageUrl="~/images/fileType_pdf.png" /> 
>             </ItemTemplate> 
> ```

但这会引发错误（“服务器标签格式不正确”）知道如何解决这个问题吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T08:05:54.733

我假设你想调用一个 javascript 函数`OnClientClick`。但是你没有向我们展示它，所以很难提供帮助。

您还可以设置`ImageButton's` [`ImageUrl`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.buttonfield.imageurl.aspx)in `RowDataBound`（我通常更喜欢）：

```
protected void grdSearchResults_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        DataRowView rv = (DataRowView) row.DataItem;
        ImageButton imgbtnPreview = (ImageButton)e.Row.FindControl("_imgbtnPreview");
        imgbtnPreview.ImageUrl = rv.Row.Field<String>("DownloadUrl");
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T08:01:01.497

您的 OnClientClick 应该在外部使用单引号

```
OnClientClick='<%# Container.DataItem("DownloadUrl") %>' 
```

而且图像可以

```
<asp:Image runat="server" ID="x" ImageUrl='<%# String.Format("~/{0}", Eval("ImageUrl")) %>' /> 
```

# c# - 当另一个应用程序设置事件时执行函数

> ID：12929665
> 
> 赞同：0
> 
> 时间：2012-10-17T07:57:32.803
> 
> 标签：c#, events

当第二个应用程序完成某些处理时，我需要在一个应用程序中执行任务。为此，我正在使用事件。

我在每个应用程序中创建了具有相同名称的事件。按名称，我的意思是在创建事件时传递的参数。两个应用程序中的代码如下所示：

```
 using System.Threading;

EventWaitHandle Multi_App = new EventWaitHandle(false, EventResetMode.ManualReset, "Process_Done"); 
```

处理后，应用程序“A”通过调用设置此事件

```
Multi_App.Set() 
```

我希望应用程序“B”应该感觉到这个事件是设置并执行一个特定的功能，比如说`App_A_Done()`。到那时它会做一些其他的任务。

我的一个选择是创建一个线程，在那个线程中我将等待事件

```
Multi_App.WaitOne(); 
```

每当它收到事件时，`App_A_Done`都会手动调用 Function 。

有朋友告诉我，我“订阅”了这个事件，只要设置了事件，这个函数就会自动执行。所以不需要线程和所有。

我试过但不知道如何订阅此类事件。

[这篇](http://msdn.microsoft.com/en-us/library/ms366768.aspx)MSDN 文章说我可以写

```
publisher.RaiseCustomEvent += new CustomEventHandler(HandleCustomEvent); 
```

但是我如何将它应用到我的案例中，因为`Mutli_App.Set += new....`它给了我错误。

有什么建议么？

# jquery - 在浏览器中更改屏幕大小会导致我们的应用程序出现问题

> ID：12929667
> 
> 赞同：4
> 
> 时间：2012-10-17T07:57:41.767
> 
> 标签：jquery, html, css, asp.net-mvc-3, jquery-ui

我有一个 MVC Web 应用程序，没有剃须刀代码，即仅使用 HTML 和 javascript 代码构建视图。下面是我的屏幕截图。

现在在 IE8 中我遇到以下问题：

我的屏幕截图：[http ://www.freeimagehosting.net/ixio1](http://www.freeimagehosting.net/ixio1)

1.降低浏览器缩放级别会扭曲屏幕中的元素，即左右面板垂直排列，增加缩放级别可以正常工作。

2.我有一个包含两个部分的标题。即使用户向下滚动，顶部也将始终在屏幕中可见。现在，当我将缩放级别设置回 100% 时，标题底部的按钮隐藏在标题顶部的后面，当我滚动到屏幕底部然后垂直滚动条消失时也会发生这种情况在任何情况下。

带有隐藏标题按钮的屏幕截图：[http ://www.freeimagehosting.net/2eq68](http://www.freeimagehosting.net/2eq68)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T02:56:12.397

使用浏览器缩放通常会破坏您的网站，具体取决于您使用的 CSS 和 HTML。使用特定的像素值甚至 % 有时会导致问题，字体大小和粗细也会导致问题（浏览器没有桌面应用程序通常对字体进行的细粒度控制）。

根据网站设计，您最好的办法是尝试将网站开发为流畅的布局。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T07:43:45.803

Mostly, the width of few areas should be fixed in pixels. This is a user decision where to apply what. If fluid layout is used then most of the areas are fixed in %. However, you will find that very less content appears in this layout. Whereas in fixed layout, the areas are fixed in pixels which are independent of resolution.

Hope, this will clear your ideas.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T12:07:45.613

很难看到，尤其是从屏幕截图中。如果您需要全面帮助，最好链接到示例。

我会说这很可能是一个 CSS 问题，你应该检查你是否使用像素而不是 %。

您可以在 JS fiddle 上放置一个示例，以便人们可以帮助调试，如果不是不可能的话，使用该屏幕截图非常困难。

# javascript - 如何使用带有淘汰赛的日期选择器

> ID：12929669
> 
> 赞同：1
> 
> 时间：2012-10-17T07:57:47.100
> 
> 标签：javascript, jquery, knockout.js

> **可能重复：**
> [使用 Jquery UI 日期选择器淘汰](https://stackoverflow.com/questions/6612705/knockout-with-jquery-ui-datepicker)

我使用 knockout.js 和 jquery datepicker 插件。我的代码：

```
 <form id="editCForm">
            <table class="ui-widget">
                <tbody data-bind="with: selectedCeremony">
                    <tr>
                        <td>
                            <label for="editDate">Date</label>
                        </td>
                        <td>
                            <input type="text" data-bind="value: Date" id="editDate" name="Date" class="uidate" />
                        </td>
                    </tr>
                </tbody>
            </table>
        </form> 
```

**Javascript**

```
$(".uidate").datepicker(); 
```

问题是 datepicker 插件无法处理应用了 knockout.js 绑定的输入文件。我对 knockout.js 完全陌生。请帮我？

# llvm - 什么是 LLVM 中间表示？

> ID：12929670
> 
> 赞同：9
> 
> 时间：2012-10-17T07:57:50.390
> 
> 标签：llvm, intermediate-code

我已经从链接[http://llvm.org/demo/](http://llvm.org/demo/)尝试了 LLVM 演示， 这是什么类型的 IR？HIR、MIR 还是 LIR？我认为，SSA 表示通常用于 MIR。那么，它是 MIR 吗？但它可以存储信息以进行依赖性分析。因此它可以成为 HIR 吗？

什么文件扩展名实际上代表 LLVM IR、.ll 或 .bc？

如何获取 LLVM 中使用的符号表？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-18T12:05:36.193

我不熟悉一个单一的、*严格*的定义来区分一个级别的 IR 与另一个级别，但据我所知，它属于 MIR 类别。

*   它具有 SSA 形式并且没有明确的寄存器，因此我绝对不会将其归类为低级。
*   它没有命名子元素引用或高级流控制结构，因此它也不适合 HIR。

在任何情况下，LLVM IR 通常以 .ll 扩展名的文本文件**或 .bc****扩展**名的二进制文件存储在磁盘上。两者之间的转换是微不足道的，您可以只使用for **bc** -> **ll**和for **ll** -> **bc**。二进制格式更节省内存，而文本格式是人类可读的。**`llvm-dis`****`llvm-as`******

# javascript - HTML 选择选项值

> ID：12929676
> 
> 赞同：2
> 
> 时间：2012-10-17T07:58:20.350
> 
> 标签：javascript, html

我有一个选择选项：

```
<select>
    <option value="select">select</option>
    <option value="audi">Audi</option>
    <option value="bmw">BMW</option>
    <option value="vw">VW</option>
</select> 
```

现在我想要的是，无论我从下拉列表中选择什么选项，选择中的值都应该始终是“选择”。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T07:59:54.003

你可以尝试这样的事情：

```
<select id="yourselect">
    <option value="select">select</option>
    <option value="audi">Audi</option>
    <option value="bmw">BMW</option>
    <option value="vw">VW</option>
</select>

<script>
   var s = document.getElementById('yourselect');
   s.onchange = function() {
      s.selectedIndex = 0;  // on change event always select the first option
   }
</script> 
```

* * *

小提琴示例：http: [//jsfiddle.net/8geek/](http://jsfiddle.net/8geek/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T08:00:35.863

为事件添加事件侦听器`onchange`，在该侦听器中将当前选择的选项设置为`Select`动态

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T08:29:04.100

就像 Jukka 提到的那样，您似乎想要一个所有选择都具有相同效果的选择元素？但是，您至少应该存储选择的选项。

也许这是您正在寻找的东西：http: [//jsfiddle.net/NfRRM/](http://jsfiddle.net/NfRRM/)

# font-face - Webfont (@font-face) 行高问题

> ID：12929684
> 
> 赞同：15
> 
> 时间：2012-10-17T07:58:51.733
> 
> 标签：font-face, webfonts, css

我经常在我开发的网站中嵌入 webfont (@font-face)，直到今天我还没有遇到过重大问题。

其实我觉得line-height有很大的问题，我的英语不是特别好，所以我会尝试用图片来说明它。我已经联系了 fontshop.com（购买字体的地方）的支持，但他们似乎不理解/解决问题。

**我们以前使用标准桌面字体（= 渲染对我们有好处）：**

![](../Images/047a0f7bc78dd2c027f3d458f2f1db44.png)

**我们使用 font-face 的内容（CSS 样式表没有变化）：**

![](../Images/6b0f2bdcef874e72c1a8ce7f69b5d79d.png)

**这是CSS：**

```
#content h1 {
    background:#000000;
    color:#FFFFFF;
    font-family:"DINPro-Bold","Helvetica Neue",Arial,Helvetica,Geneva,sans-serif;
    font-size:35px;
    line-height:30px;
    padding:10px;
    text-transform:uppercase;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-31T16:07:10.213

通常字体网站会在你下载 webfont 包时有办法配置它。我从 myfonts.com 购买我所有的字体，在高级设置下有行高调整选项。如果此选项可用，请尝试使用本机行高调整下载字体。如果没有，请尝试将字体上传到 fontsquirrel 的在线字体生成器并上传新版本。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-09-10T22:41:17.423

那不是同一种字体。O 的形状和 R 上手臂的曲率泄露了它，这意味着正在使用后备字体，可能是由于 @font-face 没有正确加载。如前所述，不同的字体会有不同的默认间距，这也会让你相信这是一个行高问题。

尝试使您的后备字体变得非常明显，例如：

```
font-family:"DINPro-Bold",serif; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-10-27T17:43:58.003

这对我有用：

[在Font Squirrel](https://www.fontsquirrel.com/tools/webfont-generator)生成 webfont 。上传字体后选择“专家”，向下滚动并选中“X 高度匹配”复选框。这会调整高度以匹配 x 高度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-17T18:18:47.763

如果你的 webfont 的行高有问题（特别是如果你的项目中的字体很大）试试这个：在 div 或其他块元素中关闭你的字体并将“溢出”设置为“隐藏”。Div 将具有您字体的精确高度，因此任何额外的空间都将被切断。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-07-18T15:54:44.807

尝试添加“位置：相对；顶部：5px；” 到“h1”标签

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-01-09T18:58:51.530

尝试位置：相对；paddint-top：5px；底部填充：0px；

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2012-10-17T08:28:43.513

根据[维基百科的行高](http://en.wikipedia.org/wiki/Line-height)

> 在排版中，前导（与标题押韵）是指在字体行之间增加的垂直间距。

可以这样实现...

.class{ 行高：1em; }

但是，如果您指的是字母的高度，那么这不是可以调整的。它是您选择使用的字体的一部分。

# java - 没有混合代码警告的签名小程序

> ID：12929690
> 
> 赞同：1
> 
> 时间：2012-10-17T07:59:16.763
> 
> 标签：java, wildcard, apache-commons

我构建了一个签名的小程序来从访问者计算机上传文件，我使用**WildcardFileFilter**类来获取以某些字符串开头的文件......

为了做到这一点，我需要在我的项目中包含 Apachae Common io 2.4 jar 文件作为库，现在我的 Applet 已签名，但是当我运行它时，它会给出混合代码警告，如下所示

```
http://docs.oracle.com/javase/6/docs/technotes/guides/jweb/mixed_code.html
```

现在我按照说明在清单文件中添加了**Trusted-Library: true**然后它没有加载该库并且在运行小程序时出现错误**org/apachae/...../WildcardFileFilter**类未找到。

我签署了这个 common-io_2.4.jar 库文件，然后这个警告消失了但是用户提示两次接受小程序，这也很烦人......

如何使用通配符或其他建议获得受信任的 common-io 文件......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T10:05:02.213

请再次访问此[链接](http://docs.oracle.com/javase/6/docs/technotes/guides/jweb/mixed_code.html)并阅读以下内容：

发出警告是默认行为，但有一些选项可用于管理如何处理这种情况。

 **• 对于用户和系统管理员，可以使用各种保护选项。有关详细信息，请参阅用户的混合代码保护选项。

**• 对于开发人员和部署人员，有两个清单属性可用。有关更多信息，请参阅在没有混合代码警告的情况下安全地部署签名的应用程序和小程序。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-25T17:30:55.423

一种解决方案是在清单文件的类路径属性中包含库的名称 (commons-io)。另一种选择是提取 commons-io 包并将其与您的代码一起 jar，然后对其进行签名。这次您应该只收到一次警告消息。**

# javascript - jquery datepicker，显示选定日期的名称

> ID：12929692
> 
> 赞同：1
> 
> 时间：2012-10-17T07:59:30.580
> 
> 标签：javascript, jquery, datepicker

我尝试从 datepicker 插入选定日期的名称 - 到目前为止没有结果......

我的代码如下所示：

```
$("#date_from, #date_to").datepicker({
    defaultDate: "+1d",
    minDate: "+1d",
    changeMonth: true,
    changeYear: true,
    dateFormat: "dd/mm/yy",
    monthNamesShort: ["Sty", "Lut", "Mar", "Kwi", "Maj", "Cze", "Lip", "Sie", "Wrz", "Paz", "Lis", "Gru"],
    dayNamesMin: ["Nie", "Pon", "Wt", "Śr", "Czw", "Pt", "Sob"],
    numberOfMonths: 1,
    constrainInput: true,
    beforeShowDay: noWeekendsOrHolidays,
    firstDay: 1, // Start with Monday
    onSelect: function (dateText, inst) {
        if (this.id == 'date_from') {
            var dateMin = $('#date_from').datepicker("getDate");
            var dateMax = $('#date_to').datepicker('getDate');
            var rent_date_from = new Date(dateMin.getFullYear(), dateMin.getMonth(), dateMin.getDate() + 1);
            var rent_date_to = new Date(dateMin.getFullYear(), dateMin.getMonth(), dateMin.getDate() + 29);
            $('#date_to').datepicker("option", "minDate", rent_date_from);
            $('#date_to').datepicker("option", "maxDate", rent_date_to);

        }
        $('#day_of_week1').val($.datepicker.formatDate('DD', dateMin));
        $('#day_of_week2').val($.datepicker.formatDate('DD', dateMax));
        compute(); //Add compute
    }

}); 
```

我有两个`input`字段（`#day_of_week1`，`#day_of_week2`）。我得到一个值，但只能从第一个字段（在 中`#day_of_week1`），但我无法从第二个字段中获取值。不知道问题出在哪里？

谢谢你的帮助。

# javascript - 用 Javascript 改变 CSS

> ID：12929700
> 
> 赞同：0
> 
> 时间：2012-10-17T07:59:53.790
> 
> 标签：javascript, jquery, css

我需要`z-index`用 javascript 更改 in css `#content>ul {z-index: 100;}`。

我尝试了这个`$('content ul').css("z-index", 49);`和其他类似的，但没有好的结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T08:01:19.553

jQuery 接受 CSS 选择器就好了：

```
$('#content > ul').css("z-index", 49); 
```

**演示：http: [//jsfiddle.net/hgt9p/1/](http://jsfiddle.net/hgt9p/1/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T08:01:29.907

尝试这个..

```
$('content ul').css("z-index", "49"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T08:07:02.533

要更改 z-index，`position`元素的 需要不是`static`. 这是我能想到你怎么会出错的唯一方法。该属性具有的其他属性`position`是：`absolute, relative, fixed`. 抱歉，如果您已经知道这一点，这是我能想到的唯一可能出错的事情。另外，请确保您包含 jQuery 并且它正在工作，很多时候我被过时的 jQuery 链接所愚弄，或者由于某种原因它不起作用（例如，您没有包括上面的 jQuery 库jQuery 脚本）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T08:48:18.427

```
$('content ul').css("z-index", "49"); 
```

应该与 JQuery 一起使用。但是，您确定内容是标签名称吗？我猜这是一个类名，然后你应该使用 $('.content ul').css("z-index", "49"); 使用检查器检查元素是否正在获取属性。此外，元素需要是绝对的、相对的或固定的，z-index 才能正常工作。

也就是说，使用该 Jquery 选择器对性能不利。你应该看看类似的东西

```
$('.content').find('ul').css("z-index", "49"); 
```

这会给你更好的表现。因为您现在直接映射到 findElementByClassName 和 findElementByTagName。

# windows - windows应用程序显示在vista任务栏后面

> ID：12929701
> 
> 赞同：0
> 
> 时间：2012-10-17T07:59:54.840
> 
> 标签：windows, winapi, visual-c++, mfc, taskbar

我有一个 MFC 应用程序。在我的应用程序中，如果我在 Windows XP 上运行，它工作正常。但如果我在 Windows Vista 中运行，MFC 对话框会隐藏在任务栏后面。

```
bool bHide=true;
CRect rectWorkArea = CRect(0,0,0,0);
CRect rectTaskBar = CRect(0,0,0,0); 

CWnd* pWnd = CWnd::FindWindow("Shell_TrayWnd", ""); 
pWnd->ShowWindow(SW_SHOW);
if( bHide ) 
{  // Code to Hide the System Task Bar  
    SystemParametersInfo(SPI_GETWORKAREA,0,(LPVOID)&rectWorkArea,0);   
    if( pWnd ) 
    {   
        pWnd->GetWindowRect(rectTaskBar);   
    //    rectWorkArea.bottom -= rectTaskBar.Height();  
        rectWorkArea.bottom += rectTaskBar.Height();//-----to hide taskbar
        SystemParametersInfo(SPI_SETWORKAREA,0,(LPVOID)&rectWorkArea,0);    
    //    pWnd->ShowWindow(SW_SHOW);  
        pWnd->ShowWindow(SW_HIDE); //--to hide taskbar
    }
} 
```

我使用了这段代码，但它隐藏了任务栏。但我想在任务栏上方显示应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T10:20:29.910

你不拥有任务栏，所以你不应该隐藏它。顺便说一句，您可以选择自动最小化它。您还有另一种选择，即使用没有任务栏的辅助监视器。

在您的应用程序的主监视器上，您可以找到工作区（从上面提供的代码片段判断）。最好将窗口放置在此区域内，而不会干扰任务栏，无论它是在上面还是在上面。

如果您仍然想通过任务栏让它更像是“谁在最上面”的比赛，您可能想看看`SetWindowPos`API 和窗口 Z-Order。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T10:13:09.620

> 最后我找到了解决方案，我们要做的是我们应该在我们的 oninitdialog 中添加以下代码，

```
SetWindowPos(&this->wndTopMost,0,0,0,0,SWP_NOMOVE|SWP_NOSIZE); 
```

> 上面的行足以在任务栏上方显示 mfc 对话框。但有时对话框的焦点会改变看起来挂起（对话框中没有响应）应用程序。如果发生，请输入以下代码。

```
SetWindowPos(&this->wndBottom,0,0,0,0,SWP_NOMOVE|SWP_NOSIZE); 
```

# ios6 - 初始启动 xcode 4.5 ios 6.0 模拟器时顶部出现黑屏

> ID：12929703
> 
> 赞同：0
> 
> 时间：2012-10-17T08:00:02.240
> 
> 标签：ios6, simulator, xcode4.5

启动时可以看到顶部的黑屏。看来观点下降了。这是一个在 xcode 4.4 中开发的项目，升级到 xcode 4.5 后在顶部显示黑屏，将总视图向下移动。状态栏虽然保持在正确的位置。这是一个iphone模拟器错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T10:18:26.730

应用程序启动时出现的黑屏称为启动屏幕。当用户运行应用程序时，它会在一段时间后显示 splashScreen，它会自动从屏幕上删除。

iPhone 和 iPad 有不同的尺寸和命名约定。

在 iPhone 上，一个 Default.png 文件就足够了，而在 iPad 上，需要预测设备以任何方向启动，包括倒置。

*iPad 启动图像方向*

为了处理各种方向选项，为 iPad 启动图像创建了一个新的命名约定。iPad 的屏幕尺寸为 768×1024，注意在高度之后的尺寸中考虑了 20 像素的状态栏。

文件名、尺寸

Default-Portrait.png * (768w x 1004h)

Default-PortraitUpsideDown.png (768w x 1004h)

Default-Landscape.png ** (1024w x 748h)

Default-LandscapeLeft.png (1024w x 748h)

Default-LandscapeRight.png (1024w x 748h)

Default.png（不推荐）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T09:36:52.090

实际上这是因为隐藏导航栏后发生的

```
[self.window makeKeyAndVisible]; 
[self.navigationController.navigationBar setHidden:YES]; 
```

所以解决方案是

```
[self.navigationController.navigationBar setHidden:YES];
[self.window makeKeyAndVisible]; 
```

我认为这是ios中的一个错误。希望这可以帮助某人..

# android - Android：需要从 listview 中获取 selectitem 的完整信息

> ID：12929704
> 
> 赞同：0
> 
> 时间：2012-10-17T08:00:03.160
> 
> 标签：android, android-listview

我从 WCF Webservice 获得了完整的信息，如国家 ID、国家名称和描述，并且我已成功填充到仅显示国家名称的列表视图中。现在，当我在列表视图中选择一个国家名称进行编辑时，我必须获取所有详细信息，例如国家 ID 和描述，但我设法只获得国家名称。任何人都可以指导我。提前谢谢。

```
 //Populate Country Name in Listview 

        String jsonInput=wcfItems;
    ArrayList<String> listItems = new ArrayList<String>();
    try{ 

    JSONArray jsonArray = new JSONArray(jsonInput);
      int length = jsonArray.length();
      List<String> listContents = new ArrayList<String>(length);
      for (int i = 0; i < length; i++)
      {
          splitItem=jsonArray.getString(i).split(",");
              //splitItem[0].toString().trim() -->is ID
              //splitItem[2].toString().trim() -->is Description
          listContents.add(splitItem[1].toString().trim() ); //Country Name
      }

      ListView myListView = (ListView) findViewById(R.id.listView1);
      myListView.setAdapter(new ArrayAdapter<String>(this,       android.R.layout.simple_list_item_1, listContents)); 
```

* * *

```
 public void onItemSelected(AdapterView<?> parent, View v, int position,
        long id) {
            //Didn't get country_ID
    String country_ID=parent.getItemAtPosition(position).toString();
            //Manage to get country_name only
            String country_Name=parent.getItemAtPosition(position).toString();
            //Didn't get Description
    String country_Description=parent.getItemAtPosition(position).toString();
    getRateItems(country_ID,country_Name); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T08:20:40.430

您可以将 跟踪`jsonArray`为 Activity 成员，因此稍后`onItemSelected()`您可以`splitItem`通过`jsonArray.getString(position)`.

# javascript - 框架集和滚动条

> ID：12929707
> 
> 赞同：1
> 
> 时间：2012-10-17T08:00:11.983
> 
> 标签：javascript, html

我需要为整个页面添加一个滚动条，其中包含一些确切的框架集：

```
if (some condition) {       
   document.writeln('<FRAMESET ROWS="*,' + scratchpad_size +
                    '" FRAMEBORDER="0" FRAMESPACING="2" BORDER="0" onUnload="cancel_window()">');
} else {
   document.writeln('<FRAMESET FRAMESPACING=0 MARGINHEIGHT=0 MARGINWIDTH=0 ROWS="*,' 
       + scratch_size + '" onUnload="cancel_window()">');
}

document.writeln('<FRAMESET COLS="230,*" onLoad="func(...)">');
document.writeln('<FRAME style="border: 1px #8B939A solid;" SRC="empty.html" NAME=menu MARGINHEIGHT=0 MARGINWIDTH=0 FRAMEBORDER=NO SCROLLING="$SESSION.scrolling" title="links"');
document.writeln('<FRAME style="border: 1px #8B939A solid;" SRC="$CAisd/html/empty.html" NAME=page MARGINHEIGHT=0 MARGINWIDTH=0 FRAMEBORDER=NO SCROLLING="$SESSION.scrolling" title="Data">');
document.writeln('</FRAMESET>');
document.writeln('<FRAME style="border: 1px #8B939A solid;" SRC="$cgi?OP=DISPLAY_FORM+SID=$SESSION.SID+FID=1 SCROLLING="auto" MARGINHEIGHT=2 MARGINWIDTH=0 FRAMEBORDER=NO title="scratch">');
document.writeln('</FRAMESET>'); 
```

基本上有一个框架集用两个框架和另一个框架封装另一个框架集，所以对于每个部分都有滚动条，我想要整个页面的滚动条，怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T08:04:16.803

对于任何给定的对象，您可以通过 javascript 或样式表将其溢出 css 属性设置为“滚动”来添加滚动条。

这些信息，连同一些肘部油脂，应该可以解决您的问题。

例如，如果你想在整个页面的一侧有一个滚动条，你可以使用：

```
document.getElementsByTagName('html')[0].style.overflowY="scroll"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T08:04:19.163

框架集不能有滚动条。框架集始终是窗口（或框架，如果它是框架集中的框架集）的大小。

如果您想要一组大于窗口的框架，则需要使用带有`iframe`元素的常规页面。

# sql-server - 检查类别父级是否存在的存储过程

> ID：12929708
> 
> 赞同：0
> 
> 时间：2012-10-17T08:00:12.993
> 
> 标签：sql-server, stored-procedures

我在 ASP.NET 中遇到了 C# MVC 项目的问题。我遇到的问题是类别系统：如果一个类别已添加到公司，那么您应该无法添加任何作为父类别（层次结构中的更高级别）而不是已经添加的类别（因为它已经包含在搜索中）。

现在我已经在 C# 代码中添加了这个：

```
if (companyToUpdate.Category.Any(x => x.Parent.Any(z => z.ID == currentCategoryID))) {
    //already exists
} 
```

现在的问题是我想将此检查添加为 SQL Server 数据库中的存储过程。

我的结构如下所示：

**公司（所有公司）**

```
 ID Title
1   StackOverflow 
```

**类别（所有类别）**

```
 ID Title
1   Website
2   Helpful site
3   Very helpful site 
```

**CategoryDe​​tails（用于了解每个类别的父/子，每个类别与其所有父项都有关系）（网站 -> 有用的站点 -> 非常有用的站点）**

```
Parent_ID   Child_ID
1           2
1           3
2           3 
```

**CompanyCategoryDe​​tails（该公司添加了哪些类别？）**

```
 Company_ID Category_ID
1           3 
```

现在解决问题：当您尝试在 CompanyCategoryDe​​tails 中添加新行 (1, 2) 时，它应该被拒绝，因为您已经向其中添加了 Category_ID 3，这意味着 Category_ID 2 已经包含在 CategoryDe​​tails 中指定桌子。

我开始检查我在哪里 INNERJOIN 表，但在我意识到它不能按照我的想法完成之前并没有走多远。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T08:24:02.883

我认为您要求的支票是这样的：

```
IF EXISTS(
SELECT * 
FROM    CompanyCategoryDetails CCD
JOIN    CategoryDetails CD
        ON  CCD.Category_ID = CD.Child_ID
WHERE   CCD.Company_ID = @Company_ID
AND     (CD.Parent_ID = @Category_ID OR CD.Child_ID = @Category_ID))
BEGIN
    --already exists
END 
```

这将检查尝试添加到公司 (a) 父类别或 (b) 现有类别

# android - 如何在 Android 平台上使用 OpenCV C++ 特定示例？

> ID：12929709
> 
> 赞同：0
> 
> 时间：2012-10-17T08:00:13.830
> 
> 标签：android, opencv, surf

大家好你们好。

我需要在 Android 平台上开发一个对象检测和匹配项目。我将使用 OpenCV。

到目前为止，我遇到了问题。

我发现有用但用 C++ 编写的示例：http: [//docs.opencv.org/doc/tutorials/features2d/feature_flann_matcher/feature_flann_matcher.html#feature-flann-matcher](http://docs.opencv.org/doc/tutorials/features2d/feature_flann_matcher/feature_flann_matcher.html#feature-flann-matcher)

当我打算为此使用 JNI 时，我在 OpenCV4Android 平台 SDK 中找不到示例的某些类。如：SurfFeatureDetector。

我使用 2.4.2 版本，有人说它移至 nonfree 但我在 Android SDK 中找不到 nonfree 。我怀疑 JNI 包含缺少一些文件。

那么，如何在 Android 平台上使用 OpenCV C++ 特定示例呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T16:54:24.957

你在 OpenCV4Android 中找不到 nonfree，因为可供下载的编译包不包含它。您最简单的解决方案是使用更适合移动设备的 ORB 算法，因为它更快。

您提到的示例基本相同，但您将 ORB 更改为 SURF。通过将样本从 SURF 更改为 ORB 会遇到的所有问题，如果您搜索，您很可能会找到答案，因为很多人已经经历过这个过程；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-23T19:14:08.983

按照本[教程](https://sites.google.com/site/wghsite/technical-notes/sift_surf_opencv_android)中的说明，您将解决您的问题。您需要做的是构建非自由模块并在您的项目中使用它。

# php - PHP 登录和会话

> ID：12929711
> 
> 赞同：0
> 
> 时间：2012-10-17T08:00:29.290
> 
> 标签：php, mysql, ajax

我试图在我的网站上重建登录，我继承了该网站，但登录当前是使用 ajax 构建的，并且需要永远登录。

我写了以下内容，允许用户登录......

```
<form name="form1" method="post" action="checklogin.php">
    <input name="myusername" type="text" id="myusername">
    <input name="mypassword" type="text" id="mypassword">
    <input type="submit" name="Submit" value="Login">
</form> 
```

如果登录成功，用户将被重定向...

```
header("location:earn-credits.php"); 
```

我的问题是，当用户被发送到“赚取积分”页面时，会检查用户是否登录，如果他们没有将用户发送回主页......

```
if(!$usersClass->checkLoggedIn()) { 
  header("Location: /index.php");
} 
```

现在我知道我的用户正在使用上述表单登录，因为他们正在被重定向并且我没有收到任何错误消息。

我是 PHP 和 AJAX 的新手，所以我要问的是为什么？我需要设置cookie吗？

下面是我检查用户是否登录的课程...

```
/**
 * check if user is logged in
 */ 
public function checkLoggedIn()
{
    if(isset($_SESSION['loggedIn']))
    {
        if(isset($_SESSION['loggedIn']['id']) && 
            isset($_SESSION['loggedIn']['username']) && 
            isset($_SESSION['loggedIn']['password']) && 
            isset($_SESSION['loggedIn']['credits']) && 
            isset($_SESSION['loggedIn']['active'])) {                   
                return true;
        }
    }

    return false;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T08:03:42.980

前

```
header("location:earn-credits.php"); 
```

您可能应该使用 $usersClass 来设置用户会话数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T08:04:32.613

第一次`session_start()`调用在用户端创建一个**PHPSESSID** cookie，它帮助服务器维护哪个会话变量属于谁。会话旨在为您处理这些事情。

您无需为您的登录系统显式设置另一个 cookie。但是，一定要研究[**会话窃取和防止它的方法**](https://stackoverflow.com/questions/22880/what-is-the-best-way-to-prevent-session-hijacking)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T08:08:38.970

几点建议：

首先，checklogin.php 上的脚本是否正在启动会话？（session_start() 或者可能是 php.ini 中的自动会话启动）？

其次，是 checklogin.php SETTING $_SESSION['loggedIn']['id'], $_SESSION['loggedIn']['username'] 等吗？

第三：您重定向到的页面（earn-credits.php）是否也在开始会话？您需要在每个页面上使用 session_start() ，否则会话将丢失。

第四：我在您的代码中没有看到任何 AJAX。

最后，只是风格问题：第一个 if 语句没有意义。我的意思是：if(isset($_SESSION['loggedIn']))。你已经在检查了。

```
public function checkLoggedIn()
{
    if(isset($_SESSION['loggedIn']))
    {
        if(isset($_SESSION['loggedIn']['id']) && 
            isset($_SESSION['loggedIn']['username']) && 
            isset($_SESSION['loggedIn']['password']) && 
            isset($_SESSION['loggedIn']['credits']) && 
            isset($_SESSION['loggedIn']['active'])) {                   
                return true;
        }
    }

    return false;
} 
```

也可以是：

```
public function checkLoggedIn() {
 return ((isset($_SESSION['loggedIn']['id']) && 
            isset($_SESSION['loggedIn']['username']) && 
            isset($_SESSION['loggedIn']['password']) && 
            isset($_SESSION['loggedIn']['credits']) && 
            isset($_SESSION['loggedIn']['active'])));
} 
```

# java - 为什么服务器抱怨 aspectOf 丢失？

> ID：12929716
> 
> 赞同：7
> 
> 时间：2012-10-17T08:00:44.260
> 
> 标签：java, spring, aop, aspectj

我目前正在尝试在 AspectJ 中注入 Spring bean，如下所示，无论如何我的服务器（WAS Liberty Profile）一直抱怨缺少方法 aspectOf。我可以知道我该如何解决这个问题吗？

**应用程序上下文.xml**

```
<aop:aspectj-autoproxy/>
<import resource="/context-file-A.xml"/> 
```

**上下文文件-A.xml**

```
<bean id="loggingAspect" class="com.huahsin.LoggingAspect" factory-method="aspectOf"> 
```

**JAVA代码**

```
@Aspect
public class LoggingAspect {
   ...
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-19T19:45:50.663

这是连接方面类时的常见错误。这意味着您的方面类在这种情况下`LoggingAspect`尚未转换为可以应用的方面。

将您的类编织到方面的 2 种方法是使用[AJDT Eclipse 插件](http://eclipse.org/ajdt/)或[Maven AspectJ 编译器插件](http://mojo.codehaus.org/aspectj-maven-plugin/compile-mojo.html)。

有 3 种编织方面的方法：

*   **编译时编织**：通过专用的aspectj编译器编译目标源或方面类；
*   **编译后编织**：向已编译的类注入方面指令（可应用于 JAR 文件）
*   **加载时编织**：在类加载期间向字节码注入方面指令，即加载检测类而不是“原始”类；

在一个方面类可以应用到一个类之前，它首先需要被“编织”到一个方面。

编织的方面类将添加[这些静态方法](http://www.eclipse.org/aspectj/doc/next/adk15notebook/ataspectj-aspectof.html)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-08-21T16:51:47.017

AspectJ 需要同时编织——你的切面类和目标类。

### 编织你的方面类

*   aspect 类将注入[aspectOf() 和 hasAspect() 方法](https://eclipse.org/aspectj/doc/released/adk15notebook/ataspectj-aspectof.html)。

### 编织目标类

*   添加对这些方法的调用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-17T21:59:50.487

问题是您的 AspectJ 编织过程不起作用。因此，您是`aspectOf`在普通 Java 类而不是 AspectJ 类上调用该方法。

一个简单的测试方法：

1.  [使用 Eclipse 插件AJDT](http://eclipse.org/ajdt/)之类的工具进行编织
2.  使用 Spring 创建一个简单的 JUnit 测试。
3.  最后让它在 WAS 中工作。

# qt - Qt - 两个信号和模态对话框窗口

> ID：12929718
> 
> 赞同：0
> 
> 时间：2012-10-17T08:00:46.823
> 
> 标签：qt, signals, modal-dialog, slot

我有一个`QDialog`基础课程。

我有一个`QEditLine *editLine`和`QButton *button`。

我使用`clicked()`按钮的信号。和`editingFinished()`editLine的信号。

当我更改 editLine 中的文本并首先按下按钮时，`editingFinished()`会发出信号。在我调用的插槽方法`QMessageBox::question()`中。之后我无法接收`clicked()`到按钮的信号。

我尝试使用`Qt::QueuedConnection`连接方法，但没有帮助。

如何解决我的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T08:21:55.710

我认为问题在于消息框的事件循环阻塞了主事件循环，因此不会发出按钮的信号。但是，如果您打开了一个模态对话框，您打算如何单击该按钮？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T06:37:54.427

我在另一个应用程序中遇到了同样的问题。我使用一些图书馆。我猜这个库使用了QAbstractButton 的pressed() 信号而不是clicked()。当我`QFileDialog::getSaveFileName()`按下按钮后调用时，似乎`mouseReleaseEvent()`也没有调用。所以在关闭对话框按钮后仍然按下，我必须手动发送 MouseButtonRealese 事件。也许我应该用一些特殊参数调用对话框？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T14:00:35.180

这是代码：

```
Window::Window(QWidget *parent)
: QDialog(parent)
{
    setupUi(this);

    appPath = QApplication::applicationDirPath();

    connect(pButton, SIGNAL(clicked()), this, SLOT(build()), Qt::QueuedConnection);

    connect(pLineEdit, SIGNAL(editingFinished()), this, SLOT(pathChanged()), Qt::QueuedConnection);
}

void Window::pathChanged()
{
    QString path = pLineEdit->text();

    if(createPath(path))
        updatePath(path);
}

bool Window::createPath(QString path)
{
    if(!QDir(path).exists())
    {
        QMessageBox::StandardButton reply;
        reply = QMessageBox::question(this, tr("Folder is not exist"), "Folder " + path + " is not exist. Do you want to create it?", QMessageBox::Yes | QMessageBox::No);
        if (reply == QMessageBox::Yes)
        {
             QDir dir;
             dir.mkpath(path);
        }
    }
    return true;
}

class Window : public QDialog, public Ui::GLConverterDialogUI
{
    Q_OBJECT

public:
    Window(QWidget *parent = 0);
    ~Window(void);
    ......
} 
```

# javascript - 使用 Google 图表 api：图表编辑器

> ID：12929720
> 
> 赞同：1
> 
> 时间：2012-10-17T08:00:59.580
> 
> 标签：javascript, google-visualization

我正在使用谷歌图表 API 并在其中使用图表编辑器。我看到很少有示例能够将其添加到我的网页中，但是，数据 url 是硬编码的，我希望用户提供数据 url，我尝试了一些方法，但似乎都不起作用。

> HTML 代码片段

```
<div id="chartData" class="invisible">
    <div id="chartType">
        <div>Data</div>
        <div>Google Spreadsheet Url (Public)</div>
        <div>
            <input type="url" id="googleURL"/>
         </div>
         <div class="alignCenter">Or</div>
         <div>Enter your own data</div>
     </div>
</div>
<div id="googleChart" class="invisible">
   <input type='button' onclick='openEditor()' value='Open Editor'/>
    <div id='visualization' style="width:80%;height:50%;"> </div>
</div> 
```

> Java 脚本代码

```
var wrapper;
function init() {
    wrapper = new google.visualization.ChartWrapper({
        containerId: 'visualization',
        dataSourceUrl: 'https://docs.google.com/spreadsheet/ccc?key=0AivgZyecjo7adDNOVTZEUWRoU1c2YXhuSXpEcVA1a3c#gid=0',
        chartType: 'LineChart'
    });
    wrapper.draw();
}

function openEditor() {
    closeAllDialogs();
    // Handler for the "Open Editor" button.
    var editor = new google.visualization.ChartEditor();
    google.visualization.events.addListener(editor, 'ok',
        function() {
            wrapper = editor.getChartWrapper();
            wrapper.setDataSourceUrl($('googeUrl').val());
            wrapper.draw(document.getElementById('visualization'));
            openGoogleChartDialog();
        });
    editor.openDialog(wrapper);
}
google.setOnLoadCallback(init); 
```

所以在这里我希望 datasourceurl 由 $('#googleURL').val(); 设置
但看起来init函数在页面加载时由google.setOnLoadCallback（init）调用；
无论如何我可以改变它。
在此代码中，我没有进行任何更改，因为我想提供一个工作代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T08:35:48.610

我猜想调用 init() 不是 onLoad 使用谷歌 API，而是在一个必需的事件上有所帮助

# mysql - MAMP mysql损坏的root用户

> ID：12929722
> 
> 赞同：5
> 
> 时间：2012-10-17T08:01:03.967
> 
> 标签：mysql, mamp

我已经阅读了 SO 和其他一些地方的许多线程，并且无法修复我在 MAMP 中的 mysql 安装。

背景。前几天我对我的 root 用户进行了更改，试图让本地服务正确连接。重新启动我的机器后，mamp 中的 phpmyadmin 不再显示我的任何数据库，并显示“无权限”来创建数据库。我尝试了很多方法来恢复我在这里和其他地方阅读的权限，但无济于事。--skip-grant-tables 似乎不起作用。在 shell 中以 root 身份连接我没有 localhost 的权限，但我使用 127.0.0.1 的权限。

```
show grants for root@localhost;
GRANT ALL PRIVILEGES ON *.* TO 'root'@'localhost' WITH GRANT OPTION 
```

我安装了全新安装的 MAMP 并复制到我的数据库中。虽然它有效，但我遇到了数据库未显示所有表的实例。

所以我必须解决两个问题之一。我要么必须修复原始安装，要么让它在我的新 mamp 安装中显示我的 dbs 的所有表。

在这里学到的教训是不要偷懒，不要在本地使用你的 root 用户，只需创建另一个登录名。

更新当我连接为：

```
/Applications/MAMP/Library/bin/mysql -uroot -h127.0.0.1 -p
mysql> SHOW GRANTS FOR 'root'@'localhost';
+------------------------------------------------------------------------+
| Grants for root@localhost                                              |
+------------------------------------------------------------------------+
| GRANT ALL PRIVILEGES ON *.* TO 'root'@'localhost' WITH GRANT OPTION    | 
| GRANT ALL PRIVILEGES ON `db`.* TO 'root'@'localhost' WITH GRANT OPTION | 
+------------------------------------------------------------------------+ 
```

但是当我连接为：

```
/Applications/MAMP/Library/bin/mysql -uroot -hlocalhost -p
mysql> SHOW GRANTS FOR 'root'@'localhost';
ERROR 1044 (42000): Access denied for user ''@'localhost' to database 'mysql'
mysql> SELECT user();
+----------------+
| user()         |
+----------------+
| root@localhost | 
+----------------+
mysql> SELECT current_user();
+----------------+
| current_user() |
+----------------+
| @localhost     | 
+----------------+ 
```

因此，当我通过 IP 或套接字作为 localhost 连接时，我不知何故没有以 root 身份登录。我觉得这很混乱？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-18T22:56:54.667

经过几天的努力，我发现了解决方案。因为 MAMP 安装与标准 mysql 安装有点不同，所以花了一些时间将这些部分组合在一起。我仍然不明白一些细节，但我们开始吧。

即使我以 root 身份登录，但现实是我是上述和 ''@'localhost' 指示的匿名用户。所以显然存在权限错误，它包含三个部分：用户名、密码和主机。所以我的 root 帐户发生了一些变化（我相信是密码），但是整个事情的反应有点不稳定，因为我没有告诉我我的密码和用户名组合不正确，而是在没有权限的情况下登录。我相信我通过运行一些类似下面的命令来加剧这种情况。

```
mysqladmin -u root password 'password' 
```

最后这就是我所做的，我想明确这是在 OS X 上安装 MAMP 的说明，尽管我确信它们可以很容易地适应 Windoz。

非常感谢[这个线程](https://stackoverflow.com/questions/11755214/phpmyadmin-mysql-no-privileges)帮助我了解如何解决这个问题。

1.  打开活动监视器。
2.  关闭 MAMP
3.  确保在活动监视器中关闭 mysql。现在，您可能会看到一个 _mysqld 进程正在运行，它可能是默认的 OSX mysql 运行。
4.  运行以下命令，将端口号替换为您使用的端口号。这将启动 mysql 减去用户权限。

    /Applications/MAMP/Library/libexec/mysqld --skip-grant-tables --port=8889 --socket=/Applications/MAMP/tmp/mysql/mysql.sock

5.  在您的控制台中登录到没有凭据的 mysql。

    > mysql

6.  运行以下命令。

    ```
    FLUSH PRIVILEGES;
    GRANT ALL ON *.* TO 'username'@'localhost' IDENTIFIED BY 'password'; 
    ```

7.  关闭 mysqld 并在不使用 skip-grant-tables 选项的情况下重新启动它

8.  登录到 mysql 以确认一切正常。

9.  您还需要修复您的 phpmyadmin。出于某种原因，我想以此作为开头，我不明白这些更改不会快速传播，而是突然开始工作。

    进入 /Application/MAMP/bin/phpMyAdmin/config.inc.php 并为新创建的登录输入正确的凭据。确保它们准确无误，包括主机。

10.  最后在 phpmyadmin 工作后进入 mysql.user 表，看看哪里出了问题。了解发生了什么问题很重要。

关于上面发生的一些事情，我想澄清一下，比如为什么 MAMP 的 phpmyadmin 凭证更改不能立即生效。

希望这一切都有帮助！

# jquery - Jquery下拉切换问题

> ID：12929729
> 
> 赞同：0
> 
> 时间：2012-10-17T08:01:43.567
> 
> 标签：jquery

[http://jsfiddle.net/dyHD7/](http://jsfiddle.net/dyHD7/)

基本上我试图做到这一点，以便当用户将鼠标悬停在文本上时，它会切换到下拉菜单，当用户选择一个选项或悬停在下拉菜单之外时，它会切换回文本。任何想法如何实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T08:29:44.147

您可以使用 change() 方法，使用更改后的值更新 status_txt。

## HTML

```
 <div class="sudiptaDD">
        <div class="status_txt" style="display: block;">
                <span>Unpaid</span>
        </div>
        <div style="display:none;" class="status_dd">
            <select name="status[]">
                <option selected="" value="0">Unpaid</option> 
                <option value="Paid">Paid</option>
                <option value="Cancelled">Cancelled</option>
                <option value="Void">Void</option>
            </select>
    </div>
</div>​ 
```

## jQuery

```
$(".sudiptaDD").live("mouseenter",function(){
    $(".status_txt",this).slideUp(200);
$(".status_dd",this).slideDown(200);
$('select').change(function(){
        var value = $(this).val();             
        $('.status_txt span').html(value);
    }); 

}).live("mouseleave",function(){
    $(".status_dd",this).slideUp(200);
    $(".status_txt",this).slideDown(200);
 });​ 
```

[小提琴](http://jsfiddle.net/dyHD7/158/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T08:27:15.690

检查这个它不是很顺利，但我认为你想要的工作

[http://jsfiddle.net/dk76h/](http://jsfiddle.net/dk76h/)

单击文本，当下拉菜单出现时，使用键盘箭头键选择值并按 Enter，然后从中删除鼠标。

我知道这很乏味，但如果你能改进它，请给出链接

# soapui - 从soapui社区版中的文件加载值

> ID：12929732
> 
> 赞同：0
> 
> 时间：2012-10-17T08:01:59.723
> 
> 标签：soapui

是否可以从soapui 中的文本文件加载值。我能够加载属性文件，想知道是否可以从文本文件加载值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T10:03:43.700

我添加了 groovy 脚本测试步骤来从文件中加载值，因为社区版中没有数据源选项。

# c - 如何在 C 中为密码的每个输入字符显示 * - 使字符不可见

> ID：12929734
> 
> 赞同：-1
> 
> 时间：2012-10-17T08:02:22.653
> 
> 标签：c

> **可能重复：**
> [隐藏终端上的密码输入](https://stackoverflow.com/questions/6856635/hide-password-input-on-terminal)

我想实现这一点：

```
$Insert Pass:
User types: a (a immediately disappears & '*' takes its position on the shell)
On the Shell    : a
Intermediate O/P: * 

User types: b (b immediately disappears & '*' takes its position on the shell)
On the Shell    : *b
Intermediate O/P: **

User types: c (c immediately disappears & '*' takes its position on the shell)
On the Shell    : **c
Final O/P       : *** 
```

我尝试了以下方法：

```
#include <stdio.h>
#include <string.h>

#define SIZE 20

int main()
{

    char array[SIZE];
    int counter = 0;

    memset(array,'0',SIZE);

    while ((array[counter]!='\n')&&(counter<=SIZE-2))
    {
        array[counter++] = getchar();
        printf("\b\b");
        printf ("*");
    }

    printf("\nPassword: %s\n", array);

    return 0;
} 
```

**但我无法达到预期的输出。**此代码不能使用户键入的字符不可见并立即显示“*”。

有人可以指导我吗？

谢谢。

最好的问候，桑迪普·辛格

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T08:06:39.337

你的方法行不通；即使您可以覆盖字符，我也可以在类似工具中运行您的命令`script(1)`并查看输出。

正确的解决方案是将终端从熟模式切换到生模式并关闭回声。

第一个更改将使您的程序在输入时看到每个字符（否则，shell 将收集一行输入并在用户按下回车*后将其发送到您的进程）。*

第二个更改阻止外壳/终端打印用户键入的内容。

[请参阅这篇文章](http://www.lafn.org/~dave/linux/terminalIO.html)如何做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T08:07:05.190

问题是`getchar()`等到用户按下回车键，然后立即返回整个字符串。您想要的是一种在输入字符后立即返回的方法。虽然没有可移植的方法来做到这一点，但对于 Windows，您可以`#include <conio.h>`在您的应用程序中替换`array[counter++] = getchar()`为`array[counter++] = _getch()`它应该可以工作。

# ruby-on-rails - Ruby/Rails 语法

> ID：12929738
> 
> 赞同：4
> 
> 时间：2012-10-17T08:02:38.653
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

这个语法是如何工作的？

```
before_validation { |user| user.email = email.downcase } 
```

我认为它需要是这样的：

```
before_validation { |user| user.email = user.email.downcase } 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T08:08:39.927

它起作用是因为

```
before_validation { |user| user.email = email.downcase } 
```

如同

```
before_validation { |user| user.email = self.email.downcase } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-17T08:12:26.527

它可以工作，但要保持 Ruby 的 DRY 原则。这会更好：

```
before_validation { |user| user.email.downcase! } 
```

`!`将更改反射回接收对象，它还节省了一些击键。

# perforce - 使用新的变更列表编号重新提交变更列表

> ID：12929742
> 
> 赞同：1
> 
> 时间：2012-10-17T08:03:11.413
> 
> 标签：perforce, configuration-management

我已经在 perforce 中提交了一个文件，其他用户提交的更改在合并中被还原。

变化并不冲突。

是他们的一种方式，我可以取回该用户的更改。表示revert 还原。

另外如何使用新的更改列表编号再次提交更改列表？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T11:49:38.727

为了恢复文件（回退到以前的版本），您只需同步以前的版本并再次提交。对于单个文件，过程如下：

```
# sync file at old revision (#3 in this example)
p4 sync //depot/file#3    

# mark the file for edit
p4 edit //depot/file

# make perforce aware that something has to be merged
p4 sync //depot/file

# resolve (i.e. throw away the head revision changes and save those from #3)
p4 resolve -ay

p4 submit 
```

如果您有一个包含多个文件的更改列表（不仅是编辑，还包括删除和添加），则回滚会更加困难。另请参阅此[问题](https://stackoverflow.com/questions/331758/is-there-an-easy-way-to-revert-an-entire-p4-changelist)。
这是用于此目的的智能[脚本](http://public.perforce.com/wiki/P4rollback.pl)和更多信息。

你问题的第二部分我不明白。使用新的变更列表编号再次提交变更没有意义，因为变更列表包含差异。如果提交一次，则差异已经在仓库中，因此您不能再次提交相同的差异。

# html - 伪元素将高度插入到带有文本的 Div

> ID：12929743
> 
> 赞同：1
> 
> 时间：2012-10-17T08:03:16.417
> 
> 标签：html, css, layout, stylesheet, pseudo-element

我在下面写了一个我遇到问题的例子：

```
<div class="text1">Text 1</div>
<div class="text2">Text 2</div> 
```

链接：http: [//jsfiddle.net/qhoc/SQpdu/5/](http://jsfiddle.net/qhoc/SQpdu/5/)

`Text 1`有伪元素，但高度用伪元素高度调整。

**要求：**

**一种。** 身高与身高`Text 1`相同`Text 2`

**湾。**按钮中间的红色矩形。

**C。**文本周围必须有空格

**d。**一切都必须是`position:relative`，至少不是，`absolute`或者`fixed`因为这只是一个可以放置在任何地方的按钮。

我可以（a）删除`padding: 6px 12px;`并添加`height: 30px;`，但我的文本不会在中间，周围有空格，或者（b）在其中添加另一个内部`div`并`Text 1`使其成为红色矩形，但我宁愿不添加`div`。

有没有办法解决这个问题？

**更新：**我更改了正确的**链接**并阐明了**要求**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T08:25:11.700

我不知道你到底想要什么，但试试这个可能会有所帮助

```
.text1, .text2 {
    width: 200px;
    padding: 8px 12px;
    display:block;
    background-color: gray;
    margin: 5px;
    height:20px;
}
.text1{
    height:28px;
   padding:0px 12px 8px 12px;
}
.text1:before {
    content:"";
    background: red;
    display: block;
    position: relative;
    width: 20px;
    height: 10px;
    left: 110px;
    top: 15px;
}
​ 
```

[演示](http://jsfiddle.net/SQpdu/6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T08:14:34.793

您使用此样式代码

```
.text1, .text2{
  width:120px;
  margin:0 auto;
  height:30px;
} 
```

# iphone - 任何人都帮我解决这个问题 1：signal SIGABRT

> ID：12929747
> 
> 赞同：0
> 
> 时间：2012-10-17T08:03:20.890
> 
> 标签：iphone, ios, xcode, ipad, ios4

我收到一个错误

> 线程 1：信号 SIGABRT

这是代码

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    /* FOR SIMPLE CELL */
    static NSString *MyIdentifier = @"MyCell";

    UITableViewCell *cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:MyIdentifier];

    cell.accessoryType=UITableViewCellAccessoryDisclosureIndicator;
    word *worddc = [Array objectAtIndex:[indexPath row]]; //ERROR thread 1 signal SIGABRT

        cell.textLabel.text = worddc.word_alphabet;

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T08:08:17.650

检查以下列表：

*   检查 Array 是否仍然被分配并且它没有被释放。
*   尝试像这样转换值：

    ```
    word *worddc = (word *)[Array objectAtIndex:[indexPath row]]; 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T08:08:33.000

我评论说你需要解释你的问题，但无论如何我可能有一个想法：

`objectAtIndex:`返回一个*(id)*对象。尝试将结果转换为 word* ：

```
word *worddc = (word*)[Array objectAtIndex:[indexPath row]]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T08:54:12.823

试试这种方式，检查你在 strObj 中得到了什么，它是字符串吗？

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    /* FOR SIMPLE CELL */
    static NSString *MyIdentifier = @"MyCell";

    UITableViewCell *cell=(UITableViewCell*)[tableView dequeueReusableCellWithIdentifier:MyIdentifier];
    if (cell==nil) 
        cell=[[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:MyIdentifier];

    cell.accessoryType=UITableViewCellAccessoryDisclosureIndicator;
    word *worddc = [Array objectAtIndex:[indexPath row]]; //ERROR thread 1 signal SIGABRT
    NSString *strObj=worddc.word_alphabet;
    cell.textLabel.text =strObj;//Here check what you are getting by setting breakpoint.
    strObj=nil;

    return cell;
} 
```

# javascript - Javascript (jQuery) 模块/库加载

> ID：12929748
> 
> 赞同：2
> 
> 时间：2012-10-17T08:03:24.793
> 
> 标签：javascript, jquery, ajax, api, sinemacula

你们中的许多人都知道，Google 提供了一个 API，您可以通过调用一个简单的函数来加载特定的模块/库：

```
<script type="text/javascript" src="//www.google.com/jsapi"></script>
<script type="text/javascript">
    google.load("jquery", "1.7.1");
    google.load("jqueryui", "1.8.2");
</script> 
```

我目前正在开发自己的代码库，我想轻松有效地在我的网站中分发这些代码库，我想不出比上述方法更好的方法。

但是，我不太确定为此编写代码的最佳方法是什么。显然我的库将是一个对象，所以将从这样的开始（我想，如果我错了，请纠正我）：

```
function company(){
    this.load = function(modules){
        // Modules is an array of modules to load
        // Load the separate modules here
        // from external files in their minified format
    }
}

var company = new company;
company.load(['forms']); 
```

上述方法是正确的方法吗？然后如何从单独的文件中加载模块？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T08:06:03.860

您可以使用[CommonJS 模块](http://wiki.commonjs.org/wiki/Modules/1.1)规范。[然后你可以用RequireJS](http://requirejs.org/docs/commonjs.html)加载它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T15:06:28.787

在四处寻找并从其他人那里获得经验之后，我认为以下是最好的方法。*其他人可能不同意，欢迎评论*

```
/**
 * Sine Macula Javascript API
 * The Sine Macula API contains all base functions for use throughout
 * all websites
 * @name class.sinemacula.js
 * @author Ben Carey
 * @version 1.0
 * @date 25/10/2012
 * @copyright (c) 2012 Sine Macula Limited (sinemaculammviii.com)
 */

function SineMacula(){

    // Only proceed if jQuery has been loaded
    if(typeof jQuery=='undefined'){
        // jQuery has not been loaded
        console.log('jQuery has not been loaded');
    }else{

        /**
         * Sine Macula Load
         * Load the Sine Macula Libraries and Plugins
         * into the current document
         *
         * The options:
         * - package: the package of libraries to load
         * - packageURL: a remote source to load the package details from
         * - libraries: any additional libraries to load
         *
         * @param object options The options for the Sine Macula load
         */
        this.load = function(options){
            var url,query,script;
            // Set the defaults for the loader
            var options = $.extend({
                package:    'none', // Do not load any packages by default
                packageURL: false, // Do not retrieve the package details from a URL by default
                libraries:  [] // Do not load any libraries by default
            },options);
            // Build the query based on the parameters supplied
            if(options.packageURL){
                // Build the query to allow for a remote
                // package definition
                query = '?packageURL='+encodeURIComponent(options.packageURL);
            }else if(options.package=='none'){
                query = '?libraries='+encodeURIComponent(options.libraries.join());
            }else{
                query = encodeURIComponent(options.package)+'/?libraries='+encodeURIComponent(options.libraries.join());
            }
            // Complete the url by appending the query
            url = '//libraries.sinemaculammviii.com/'+query;
            // Append the script tag to the end of the document
            script = document.createElement('script');
            script.type = 'text/javascript';
            script.src = url;
            $('head')[0].appendChild(script);
        }
    }
}; 
```

# javascript - JavaScript 中的正则表达式 - 匹配“ABC12”之类的字符串

> ID：12929750
> 
> 赞同：6
> 
> 时间：2012-10-17T08:03:38.470
> 
> 标签：javascript, regex

如何在 JavaScript 中使用正则表达式匹配以下字符串？

1.  共有 5 个字符
2.  前 3 个字符是大写字母
3.  最后 2 个字符只是数字

我有这种模式，`[A-Z]{3}[0-9]{2}`但似乎它仍然缺少一些东西。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-17T08:04:58.137

您还需要[锚点](http://www.regular-expressions.info/anchors.html)：

```
var regexp = /^[A-Z]{3}[0-9]{2}$/ 
```

否则，子字符串也将匹配（如`ABC12`within `xyzABC1234`）。

*   `^`意思是“字符串的开始”
*   `$`意思是“字符串的结尾”

# javascript - 参考错误杀死

> ID：12929751
> 
> 赞同：0
> 
> 时间：2012-10-17T08:03:40.837
> 
> 标签：javascript, events

我目前正在寻找解决问题的方法`onerror`。

我想杀死一个`ReferenceError`事件以保持我的脚本正常工作。

我试过：

```
window.onerror=function(event){alert('called');event.stopPropagation();return true;}; 
```

我收到了警报，但我的事件仍然被调度并停止了我的脚本。

我怎样才能真正阻止这种类型的事件？

# android - Ellipsize 适用于提示，但不适用于文本

> ID：12929753
> 
> 赞同：3
> 
> 时间：2012-10-17T08:03:58.077
> 
> 标签：android

我有一个自定义的编辑文本，但省略号有一些问题。

我的 edittext 是以编程方式构建的，具有以下属性：

```
setSingleline(true);
setInputType(InputType.TYPE_NULL);
setCursorVisible(false);
setEllipsize(TruncateAt.END);
setText(com.telecomIT.digicare.R.string.comment_hint); 
```

但是椭圆形不起作用。奇怪的是，如果我将 setText 更改为 setHint，则会显示 3 个点。

那么，为什么它适用于提示，而不适用于文本？

我已经尝试将输入类型设置为文本，但这也不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-09-25T10:35:05.847

尝试将输入类型更改为 Null 以外的其他类型。

# java - 将变量添加到 Arraylist 并替换所有以前的元素，而变量不是静态的

> ID：12929760
> 
> 赞同：0
> 
> 时间：2012-10-17T08:04:31.520
> 
> 标签：java, arraylist

我的问题与[Add elements to Arraylist 类似，它替换了 Java 中所有以前的元素](https://stackoverflow.com/questions/2447942/add-elements-to-arraylist-and-it-replaces-all-previous-elements-in-java)。虽然我的变量不是静态的。仍然每次我添加一个，其他值将是那个值。

重要代码：

```
int counter = 1;
// Threshold the image to get a binary image
image.threshold(44);
image.showImage();
int[] directionFIRST = new int[2];
// Get the first white pixel on the boundary
int[] pixelFIRST = image.getFirstBoundaryPixel();

image.updatePicture(pixelFIRST[0], pixelFIRST[1]);

directionFIRST = getInitialDirection(image, pixelFIRST);

//Create an array for the output.  It will hold the (x,y) coordinates of
//every pixel around the border of the region to be contour-traced.  The
//directions are also saved for the chain code.
List<int[]> listCONTOUR = new ArrayList<int[]>();
List<int[]> listDIRECTION = new ArrayList<int[]>();

// Create a variable which will be used to tell the algorithm when to stop:
boolean stopCondition = false;
int[][] ROTmatrix90 = new int[][]{{0, 1}, {-1, 0}};
int[][] ROTmatrix180 = new int[][]{{-1, 0}, {0, -1}};

int[] tempPIX = pixelFIRST;
int[] tempDIR = directionFIRST;

while (!stopCondition) {

    //Take the direction opposit the current direction
    tempDIR = multiply(ROTmatrix180, tempDIR);

    tempPIX[0] = tempPIX[0] + tempDIR[0];
    tempPIX[1] = tempPIX[1] + tempDIR[1];
    if (image.get(tempPIX[0], tempPIX[1]) == 1) {
        listCONTOUR.add(tempPIX);
        listDIRECTION.add(tempDIR);
    } else {
        tempDIR = multiply(ROTmatrix90, tempDIR);
        tempPIX[0] = tempPIX[0] + tempDIR[0];
        tempPIX[1] = tempPIX[1] + tempDIR[1];
        if (image.get(tempPIX[0], tempPIX[1]) == 1) {
            listCONTOUR.add(tempPIX);
            listDIRECTION.add(tempDIR);
        } else {
            tempDIR = multiply(ROTmatrix90, tempDIR);
            tempPIX[0] = tempPIX[0] + tempDIR[0];
            tempPIX[1] = tempPIX[1] + tempDIR[1];
            if (image.get(tempPIX[0], tempPIX[1]) == 1) {
                listCONTOUR.add(tempPIX);
                listDIRECTION.add(tempDIR);
            } else {
                tempDIR = multiply(ROTmatrix90, tempDIR);
                tempPIX[0] = tempPIX[0] + tempDIR[0];
                tempPIX[1] = tempPIX[1] + tempDIR[1];
                if (image.get(tempPIX[0], tempPIX[1]) == 1) {
                    listCONTOUR.add(tempPIX);
                    listDIRECTION.add(tempDIR);
                } else {
                    tempDIR = multiply(ROTmatrix90, tempDIR);
                    tempPIX[0] = tempPIX[0] + tempDIR[0];
                    tempPIX[1] = tempPIX[1] + tempDIR[1];
                    if (image.get(tempPIX[0], tempPIX[1]) == 1) {
                        listCONTOUR.add(tempPIX);
                        listDIRECTION.add(tempDIR);
                    }
                }
            }
        }
    }

    counter++;
    image.updatePicture(tempPIX[0], tempPIX[1]);
    System.out.println(tempPIX[0] + " , " + tempPIX[1]);

    if(tempPIX[0]== tempPIX[1]){
        System.out.println("test");
    }

    if ((listCONTOUR.size() > 2) && (tempPIX[0] == listCONTOUR.get(1)[0]) && (tempPIX[0] == listCONTOUR.get(1)[1])) {
        stopCondition = true;
        listCONTOUR.remove(listCONTOUR.get(listCONTOUR.size() - 1));
        listDIRECTION.remove(listDIRECTION.get(listDIRECTION.size() - 1));
    }
} 
```

当我在循环运行 5 次后检查 listCONTOUR 的值时，所有值都相同，这是不可能的。我搜索了一个解决方案，但所有解决方案都指向变量是静态的这一事实。而在我的情况下不是。它只是一个简单的局部变量，在函数中启动并在 1 个函数中使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T08:12:29.927

`tempPIX`是对`int[]`内存中的数组的引用。

每次更新数组并将其添加到列表中时，您只是一遍又一遍地向同一个数组添加相同的引用。

更好的解决方案是在每个循环上创建一个新数组......

```
int[] tmpAry = new int[2];
tmpAry[0] = ntempPIX[0] + tempDIR[0];
tmpAry[1] = tempPIX[1] + tempDIR[1];

tempPIX = tmpAry; // Reassign the reference so the rest of the code doesn't need to be updated 
```

**从评论更新**

好吧，我只能说，我不知道你在做什么......

```
public class TestArrays {

    public static void main(String[] args) {
        List<int[]> listOfValues = new ArrayList<int[]>();
        int[] outter = new int[] {1, 2, 3, 4};

        listOfValues.add(outter);
        dump(outter);
        for (int index = 0; index < 5; index++) {            
            int[] inner = new int[] {
                rand(),
                rand(),
                rand(),
                rand()
            };
            outter = inner;
            dump(outter);
            listOfValues.add(outter);            
        }

        int index = 0;
        for (int[] values : listOfValues) {
            System.out.print("[" + index + "] ");
            dump(values);
            index++;
        }

    }

    public static void dump(int[] values) {
        for (int value : values) {
            System.out.print(value + ", ");
        }
        System.out.println("\b\b"); // Cheeck...;)
    }

    public static int rand() {
        return (int)Math.round(Math.random() * 100);
    }

} 
```

输出类似...

```
1, 2, 3, 4
44, 35, 76, 9
44, 11, 17, 35
99, 24, 39, 23
20, 31, 9, 66
45, 50, 60, 27
[0] 1, 2, 3, 4
[1] 44, 35, 76, 9
[2] 44, 11, 17, 35
[3] 99, 24, 39, 23
[4] 20, 31, 9, 66
[5] 45, 50, 60, 27 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T08:15:52.623

好的，问题是您正在更改相同`array object`的内容并将对它的引用推送到列表中。因此，当数组对象发生变化时，它也会反映在指向它的所有引用中。

```
int[] tempPIX = pixelFIRST; 
```

因此，您已经在 while 循环之外创建了这个数组。在 while 循环中，您正在修改数组并添加到列表中。由于数组对象并非`immutable`如此，因此当您更改内容时不会创建新的数组对象，而更改也会反映在您的列表中。

您可以做的是，在您的 while 循环中创建一个新数组。并复制该数组中的内容。

```
int[] temp = new int[2];
temp[0] = tempPIX[0] + tempDIR[0];
temp[1] = tempPIX[1] + tempDIR[1];

tempPIX = temp; 
```

并将其添加`array`到您的`List`. 您还需要将新数组重新分配给旧数组以反映那里的更改（如第 4 行）

# java - 如何将图像添加到 CSV 文件？

> ID：12929762
> 
> 赞同：2
> 
> 时间：2012-10-17T08:04:33.093
> 
> 标签：java, image, csv

我需要在带有一些数据的 .csv 文件上写入图像。写入数据很简单，但我无法将存储在硬盘上的图像写入其中。我正在使用`FileWriter`类来实现这一点并`.append();`在文件中添加项目。如何将图像添加到 CSV 文件？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-17T08:06:45.113

CSV 是一种基于文本的文件格式，其中图像是二进制数据，两者不能很好地混合。

您最好提供对图像的引用（相对路径和名称）并将它们捆绑在一起。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-03T08:58:56.233

根据您的评论，您最好将条形码的文本表示（以及其他信息，例如产品名称、价格等）存储在 CSV 文件中（而不是嵌入图像或文件名）。

[然后在读取 CSV 文件时，可以使用Barbecue](http://barbecue.sourceforge.net)等开源库来动态生成条码图像。Barbecue 支持多种条形码和图像格式。

# jquery - Jwplayer 无法在 DotNetNuke 上运行

> ID：12929765
> 
> 赞同：0
> 
> 时间：2012-10-17T08:04:42.170
> 
> 标签：jquery, asp.net, video, dotnetnuke, jwplayer

我试图将 jwplayer 实现为

```
<script src="js/jwplayer.js" type="text/javascript"></script><script type="text/javascript">

<script type="text/javascript">
             $(document).ready(function(){
               var divid= document.getElementById("mediaplayerid").getAttribute("id");
               alert(divid);
               jwplayer(divid).setup({
                    flashplayer: '<%= ResolveUrl("Jwplayer/player.swf")%>',
                    provider: "video",
                    file: '<%= ResolveUrl("Videos/2.mp4") %>' ,
                    autostart: true,
                    width: '600',
                    height:'370',
                    });
               });

</script> 
```

我在表格中使用了一个 div 标签作为

```
 <div id="mediaplayerid"></div>
    </td> 
```

jwplayer 无法运行。我已经调试了脚本。它到达 Jwplayer.setup 之后没有输出。可能是错误或任何代码错误。感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T08:24:08.873

问题是您没有以正确的方式引用 jQuery 或 jwplayer，或者视频文件/flashplayer 的路径错误。如果您可以在 Firebug 或类似的工具中调试渲染的代码，您可以检查所有路径是否有效。

我已经复制了你的代码，它似乎工作正常：[DEMO](http://jsfiddle.net/nF7Mw/120/)

您也可以尝试将 更改`ResolveUrl`为此，从项目的根目录（或任何路径）指定视频的位置：

```
<%# ResolveUrl("/~Videos/2.mp4") %> 
```

**编辑**
我假设您的代码中有您的 jQuery 引用，即使您没有粘贴它？

```
<script src="JavaScripts/jquery-1.8.1.js" type="text/javascript"></script> 
```

# sql - 带有连接查询的 SQL 选择有效，但删除无效

> ID：12929767
> 
> 赞同：0
> 
> 时间：2012-10-17T08:05:10.117
> 
> 标签：sql, ms-access

```
I have two tables Table1 and Table2\. I compared thes tables using the query below. SELECT 

Select Table1.ID
     FROM Table1
     LEFT OUTER JOIN Table2 
    ON Table1.ID =Table2.ID
     WHERE Table2.ID IS NULL 
```

并得到 1508 条存在于 Table1 但不存在于 Table2 中的记录。现在我想删除 Table2 中的这些记录。这是我在下面使用的代码

```
 DELETE Table1.*
    FROM Table1
     LEFT OUTER JOIN Table2 
    ON Table1.ID =Table2.ID
     WHERE Table2.ID IS NULL 
```

这是我得到的错误无法从指定的表中删除。我意识到我的sql有问题，但是在哪里。我认为这个 DELETE 是指定一个表而不是表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T08:07:38.437

试试这个：

```
DELETE FROM Table1
WHERE ID NOT IN
(
    SELECT ID
    FROM table2
) 
```

# eclipse - 运行 jibix 绑定生成器时出错

> ID：12929768
> 
> 赞同：1
> 
> 时间：2012-10-17T08:05:16.780
> 
> 标签：eclipse

我在构建项目时收到类似“运行jibix binding builder时出错”的错误。我正在使用eclipse indigo和jdk 1.5

请帮我解决这个问题...

# php - oracle php 锁记录

> ID：12929769
> 
> 赞同：1
> 
> 时间：2012-10-17T08:05:21.263
> 
> 标签：php, oracle

我有这个问题..我正在尝试使用锁定记录进行更新。我正在使用 php，并且我使用 oracle 作为数据库。我没有完全理解，但我设法复制了以前的开发人员代码并使其工作。

它正在使用 odbc_exec()、odbc_fetch_row()。我认为这应该用于微软访问数据库。但我不知道。而且我还使用 jquery 来获取这个 php 文件（使用 jquery post）并附加到当前页面。

但是现在我的上级要求我确定一个人是否正在编辑一条记录。然后另一个不能再编辑它了。他们说关于不关闭连接的事情。php 在加载 1 个页面后不能关闭与数据库的连接（当它使用 jquery 像我的那样获取页面时）？据我所知，如果页面已加载。与数据库的连接已关闭。

我想试试这段代码，但我担心如果我错了，连接会挂起。

现在我的 sql 是这样选择所有公司的。

```
$sqlStr ="select * from company";
$rs  = odbc_exec($GblConnOra , $sqlStr);
while (odbc_fetch_row($rs)){
   $company_name=odbc_result($rs,"company_name");
    $company_id=odbc_result($rs,"company_id");
} 
```

并选择要编辑的公司

```
$sqlStr ="select * from company where company_id='34'";
$rs  = odbc_exec($GblConnOra , $sqlStr);
while (odbc_fetch_row($rs)){
   $company_name=odbc_result($rs,"company_name");
} 
```

更新

```
$sqlStr ="update compay set company_name=? where company_id=?";
$stmt = odbc_prepare($GblConnOra , $sqlStr);
$res = odbc_execute($stmt, array($company_name, $company_id)); 
```

我认为sql会是这样的。锁定记录。

```
$sqlStr ="select * from company for update skip locked";
$rs  = odbc_exec($GblConnOra , $sqlStr);
while (odbc_fetch_row($rs)){
   $company_name=odbc_result($rs,"company_name");
    $company_id=odbc_result($rs,"company_id");
} 
```

我可以这样做吗？我的 sql 用于选择要编辑的行是什么？我的 sql 将用于更新行吗？

据我了解，在调用更新提交或回滚后，此锁将被释放。

# c++ - 插入排序不排序第一个元素？

> ID：12929770
> 
> 赞同：2
> 
> 时间：2012-10-17T08:05:28.147
> 
> 标签：c++, algorithm, insertion-sort

除了对第一个元素进行排序外，我的插入排序实现似乎正在工作。我这里有一个小测试用例。谁能告诉我我的算法有什么问题？

```
#include <iostream>
#include <string>
#include <stdlib.h>
using namespace std;

void Insert(int *S, int k)
{
        int key = S[k];
        int j = k-1;
        while(j>0 && S[j] > key)
        {
                S[j+1] = S[j];
                j--;
        }

        S[j+1] = key;
}

void Insertionsort(int S[], int n)
{
        if(n>1)
                Insertionsort(S,n-1);
        Insert(S,n);

}

int main()
{
        srand ( time(NULL) );
        int S1_8[8];
        for(int i=0; i<8; i++)
                S1_8[i] = rand()%100;

        Insertionsort(S1_8,8);

        for(int i=0; i<8; i++)
        {
                cout << S1_8[i] << endl;
        }

        return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T08:11:31.780

第一次`Insert`调用，就通过了 `int key = S[8];`

`S[8]`不在**数组范围内**。

做那个

```
void Insertionsort(int S[], int n)
{
        if(n>1)
                Insertionsort(S,n-1);
        Insert(S,n-1);

} 
```

此外，在您的 while 条件下，它必须是

```
while(j>=0 && S[j] > key) 
```

**[链接到代码](http://ideone.com/KXHs9)**

# plugins - 通过 HTTP 请求的 Openfire MUC

> ID：12929771
> 
> 赞同：0
> 
> 时间：2012-10-17T08:05:32.290
> 
> 标签：plugins, openfire, http-request

我一直在寻找一个插件，它通过 Openfire 的 HTTP 请求处理 MUC 管理。我查看了[插件](http://www.igniterealtime.org/projects/openfire/plugins.jsp)，甚至查看了[社区](http://community.igniterealtime.org/community/plugins/commplugins?view=documents)页面，但到目前为止我还没有运气。

有这个插件吗？我在哪里可以找到它？

如果没有，除了创建自己的，我还有什么选择？有点像 ejabberd 如何拥有 mod_rest 甚至 ejabberdctl。

如果有人能指出我正确的方向，那就太好了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T02:18:24.073

我最终为 http 请求创建了一个服务并将其链接到 Openfire 的 MySQL 后端。更容易，让我有更多的控制权。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-09T01:09:24.493

Openfire有缓存机制，直接操作Mysql表有问题，用户信息在openfire刷钱前会有延迟。

我是通过 xmpphp 来完成的，还有一种通过 xmpp 协议添加 muc 房间和房间成员的新方法，但每次操作我都需要用户密码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-15T10:06:17.830

如果您再次检查 Openfire 的插件站点，您会发现有一个名为“MUC 服务”的插件。这正是你需要的。

这是文档：[http ://www.igniterealtime.org/projects/openfire/plugins/mucservice/readme.html](http://www.igniterealtime.org/projects/openfire/plugins/mucservice/readme.html)

# magento - Magento 链接不起作用

> ID：12929775
> 
> 赞同：2
> 
> 时间：2012-10-17T08:05:45.670
> 
> 标签：magento

我将我的网站从一台服务器迁移到另一台服务器。我可以访问主网站 (eyaas.com) 上的主页，但除此之外没有任何链接可用，甚至管理员也无法访问

奇怪的是，印度版网站 (eyaas.com/in) 运行良好，所有链接都正常工作。

当我迁移时，我看到一个 500 错误，因此托管服务提供商要求我删除同时自动创建的 .htaccess 文件。然后该网站工作，但现在出现了这个问题。

我应该怎么办。将 .htaccess 文件替换为之前的文件时，出现 500 服务器错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T08:07:00.800

该`.hatccess`文件是重写所必需的。与您的主机交谈并确保它已为 Magento 正确配置。

# java - 当前日期和时间 (Java)

> ID：12929789
> 
> 赞同：0
> 
> 时间：2012-10-17T08:06:38.363
> 
> 标签：java, hibernate

我在数据库中有单独的日期和时间列，并且它们是根据我的 bean 映射的（使用休眠），我想保存格式化的（日期和时间），即分别为 2012 年 17 月 10 日和下午 2 点 47 分。我遇到了如何将格式化的日期和时间放入相应的列中的问题，因为我的数据库列设置为日期和时间类型，但格式化的日期和时间返回一个字符串。代码示例将非常有用。

```
DateFormat dateFormat = new SimpleDateFormat("ddMMyyyy");
        Date date = new Date();
        salesOrder.setOrderDate(dateFormat.format(date));//Error:The method    setOrderDate(Date) in the type SalesOrder is not applicable for the arguments (String) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T08:10:48.503

你不必转换它。只需传递`new Date()`给您的实体。Date 类包含日期和时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T08:18:39.407

Java 告诉您 setDate 和 setTime 都接受 Date 对象，例如您在代码中创建的第一个对象，称为“现在”。但是，您将它们传递到使用 Date 对象创建的 String 对象中。

您可以将变量 'now' 传递到您的方法中，但您在两者之间所做的任何操作都不会对其产生任何影响，因为它都是由 Date 而不是 Date 本身生成的字符串。

# filter - 在 Plone 4.1 中，如何从特定组中获取 LDAP 用户？

> ID：12929793
> 
> 赞同：0
> 
> 时间：2012-10-17T08:06:46.533
> 
> 标签：filter, ldap, plone

我正在尝试将 LDAP 与 Plone 4.1 集成。我已经通过 buildout 成功添加了 plone.app.ldap。我可以获取所有用户。但我想获取一个组的用户而不是全部用户。我在哪里可以为用户设置过滤器？请指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T10:07:23.100

该产品可能对您有所帮助

来自 LDAP 的 PAS 组：http:
[//plone.org/products/pasgroupfromldap](http://plone.org/products/pasgroupfromldap)

# c# - 在不阅读邮件的情况下获取未读邮件标题

> ID：12929795
> 
> 赞同：1
> 
> 时间：2012-10-17T08:06:48.643
> 
> 标签：c#, .net, email, gmail

我使用 MailSystem.NET 库来访问 Gmail。我需要从所有未读电子邮件中获取标题 **而不阅读它们**。我从中阅读标题的电子邮件应该保持未读状态。我可以这样做吗？如果是这样，有谁知道我怎么能做到这一点？

# java - 如何在 zk ce 中实现验证码

> ID：12929796
> 
> 赞同：0
> 
> 时间：2012-10-17T08:06:48.393
> 
> 标签：java, zk

我是 zkoss 框架的新手。我试图实现，但在 zk-ce`captcha`中没有支持。`captcha`有谁知道如何实现对 zk-ce 的验证码支持。

感谢您的帮助和参考链接

谢谢克拉克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T08:26:11.310

我发现在 zul 中讨论验证码的文档可能会有所帮助： [Small Talks/2010/January/Bwcaptcha: Another Implementation of Captcha](http://books.zkoss.org/wiki/Small%20Talks/2010/January/Bwcaptcha:%20Another%20Implementation%20of%20Captcha)

# jquery - 带有淘汰赛的 jQueryUI Spinner 小部件

> ID：12929801
> 
> 赞同：9
> 
> 时间：2012-10-17T08:07:02.143
> 
> 标签：jquery, jquery-ui, knockout.js

如何在 Knockout 绑定输入中使用[jQuery UI Spinner小部件？](http://jqueryui.com/spinner/)

```
 <tbody data-bind="foreach: orders">
        <tr>
            <td data-bind="text: Name"></td>
            <td><input type="number" style="width: 100px;" data-bind="value: Price" /></td>
            <td><input type="number" style="width: 50px;" data-bind="value: VAT" /></td>
            <td><input type="number" style="width: 50px;" data-bind="value: Number" /></td>
            <td data-bind="text: Final()"></td>
            <td><a href="javascript:void(0);" data-bind="click: $root.removeOrder">Remove</a></td>
        </tr>    
    </tbody> 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-17T08:54:16.053

最好的方法是创建`custom binding`绑定`spinner`到输入：

```
ko.bindingHandlers.spinner = {
    init: function(element, valueAccessor, allBindingsAccessor) {
        //initialize spinner with some optional options
        var options = allBindingsAccessor().spinnerOptions || {};
        $(element).spinner(options);

        //handle the field changing
        ko.utils.registerEventHandler(element, "spinchange", function () {
            var observable = valueAccessor();
            observable($(element).spinner("value"));
        });

        //handle disposal (if KO removes by the template binding)
        ko.utils.domNodeDisposal.addDisposeCallback(element, function() {
            $(element).spinner("destroy");
        });

    },
    update: function(element, valueAccessor) {
        var value = ko.utils.unwrapObservable(valueAccessor()),
            current = $(element).spinner("value");

        if (value !== current) {
            $(element).spinner("value", value);
        }
    }
}; 
```

然后只需使用它而不是`value`绑定：

```
<input
    type="number"
    style="width: 100px;"
    data-bind="spinner: Price, spinnerOptions: { min: 0 } " /> 
```

这是工作小提琴：http: [//jsfiddle.net/vyshniakov/SwKGb/](http://jsfiddle.net/vyshniakov/SwKGb/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-28T12:36:30.637

此页面上的答案是正确且有用的。但是，我发现当有人在字段中键入值时，我的行为变得很糟糕。每次按键似乎也会触发“spinstop”事件。此外，按键绕过了字段格式和options.step。幸运的是，我们可以检查传入的事件以了解实际发生的情况。可能有更好的方法，但我想我还是会分享。

```
// Abstract to a function to allow for multiple binding types
function createSpinner(defaultOptions) {
    return {
        init: function (element, valueAccessor, allBindingsAccessor) {
            var options = $.extend(true, {}, allBindingsAccessor().spinnerOptions, defaultOptions);
            var widget = $(element);
            var observable = valueAccessor();

            widget.spinner(options);

            // handle field changes onblur [copies field -> model]
            ko.utils.registerEventHandler(element, "blur", function (event) {
                var inputValue = Number(widget.spinner("value"));
                var modelValue = observable();
                if (inputValue !== modelValue) {
                    // Set the widget (this forces formatting and rounding) - does not fire events
                    widget.spinner("value", inputValue);
                    // Read the value back out (saves us rounding)
                    var numberValue = Number(widget.spinner("value"));
                    // Set the observable
                    observable(numberValue);
                }
            });

            // handle other field changes
            ko.utils.registerEventHandler(element, "spinstop", function (event) {
                // jQuery.spinner spinstop is a bit overzealous with its spinstop event.
                if (event.keyCode !== undefined) {
                    // If it has a keyCode someone is typing... so don't interfere
                } else if (event.originalEvent && event.originalEvent.type === "mouseup") {
                    // This is an *actual* spinstop
                    var numberValue = Number(widget.spinner("value"));
                    observable(numberValue);
                }
            });

            // handle disposal
            ko.utils.domNodeDisposal.addDisposeCallback(element, function () {
                widget.spinner("destroy");
            });
        },
        update: function (element, valueAccessor) {
            // [copies model -> field]
            var widget = $(element);
            var observable = valueAccessor();
            var inputValue = Number(widget.spinner("value"));
            var modelValue = observable();
            if (inputValue !== modelValue) {
                widget.spinner("value", modelValue);
            }
        }
    };
}
ko.bindingHandlers.moneyspin = createSpinner({ numberFormat: 'C0', culture: 'en-GB', min: 0, incremental: true });
ko.bindingHandlers.intspin = createSpinner({ numberFormat: 'n0', culture: 'en-GB' }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-07T03:28:17.210

@Artem Vyshniakov 的回答是正确的。但是，如果您正在寻找 IE polyfill 而不是替换支持它的浏览器中的 html5 数字输入，请尝试以下操作：

```
 ko.bindingHandlers.spinner = {
    init: function (element, valueAccessor, allBindingsAccessor) {
        if (Modernizr.inputtypes.number) {
            ko.bindingHandlers.value.init.apply(null, arguments);
        } else {
            //initialize spinner with some optional options
            var options = allBindingsAccessor().spinnerOptions || {};
            $(element).spinner(options);

            //handle the field changing
            $(element).on("spinstop", function () {
                var observable = valueAccessor();
                observable($(element).spinner("value"));
            });

            //handle disposal
            ko.utils.domNodeDisposal.addDisposeCallback(element, function () {
                $(element).off("spinstop");
                $(element).spinner("destroy");
            });
        }

    },
    update: function (element, valueAccessor, allBindingsAccessor) {
        if (Modernizr.inputtypes.number) {
            ko.bindingHandlers.value.update.apply(null, arguments);
        } else {
            var value = ko.utils.unwrapObservable(valueAccessor());

            var disable = allBindingsAccessor().disable;

            if (typeof disable !== "undefined") {
                $(element).spinner((disable) ? "disable" : "enable");
            }

            var current = $(element).spinner("value");
            if (value !== current) {
                $(element).spinner("value", value);
            }
        }
    }
};

function Order(name, price, vat, number) {
    var self = this;

    self.Name = ko.observable(name);
    self.Price = ko.observable(price);
    self.VAT = ko.observable(vat);
    self.Number = ko.observable(number);

    self.Final = ko.computed(function() {
        return (self.Price() + self.VAT()) * self.Number();
    });
}

function ViewModel() {
    var self = this;

    self.orders = ko.observableArray();

    self.removeOrder = function(item) {
        self.orders.remove(item);
    };

    self.save = function() {
        alert(ko.toJSON(self));
    };
}

var viewModel = new ViewModel();
viewModel.orders.push(new Order("Sugar", 100, 15, 3));
viewModel.orders.push(new Order("Salt", 200, 25, 4));
viewModel.orders.push(new Order("Milk", 200, 35, 1));

ko.applyBindings(viewModel); 
```

在这里完成小提琴：http: [//jsfiddle.net/mberkom/pCJWc/](http://jsfiddle.net/mberkom/pCJWc/)

# .net - 如何添加以 Type 作为参数的自定义属性

> ID：12929806
> 
> 赞同：1
> 
> 时间：2012-10-17T08:07:13.667
> 
> 标签：.net, mono.cecil

我想使用 Mono.Cecil 为方法添加自定义属性。自定义属性的构造函数有一个`System.Type`. 我试图弄清楚如何使用 Mono.Cecil 创建这样的自定义属性以及 System.Type 参数的参数是什么。

我的属性定义如下：

```
public class SampleAttribute : Attribute {
    public SampleAttribute (Type type) {}
} 
```

到目前为止，我已经尝试过：

```
var module = ...;
var method = ...;
var sampleAttributeCtor = ...;

var attribute = new CustomAttribute (sampleAttributeCtor);

attribute.ConstructorArguments.Add (
    new ConstructorArgument (module.TypeSystem.String, module.GetType ("TestType").FullName)); 
```

但这似乎不起作用。任何想法？

我已将代码更新如下

```
var module=targetExe.MainModule;
            var anothermodule=sampleDll.MainModule;
            var custatt = new CustomAttribute(ctorReference);

            var corlib =module .AssemblyResolver.Resolve((AssemblyNameReference)module.TypeSystem.Corlib);
            var systemTypeRef = module.Import(corlib.MainModule .GetType("System.Type"));
            custatt.ConstructorArguments.Add(new CustomAttributeArgument(systemTypeRef, module.Import(anothermodule.GetType("SampleDll.Annotation"))));
            methodDef.CustomAttributes.Add(custatt); 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T10:29:05.800

即使自定义属性中的类型使用它们的全名作为字符串进行编码，Cecil 也会为您抽象出来。

Mono.Cecil 中类型的表示是 a `TypeReference`（或者`TypeDefinition`如果类型来自同一模块，则为 a）。

您只需将其作为参数传递。首先，您需要获取对`System.Type`用作自定义属性参数类型的类型的引用。

```
var corlib = module.AssemblyResolver.Resolve ((AssemblyNameReference) module.TypeSystem.Corlib);
var systemTypeRef = module.Import (corlib.GetType ("System.Type")); 
```

然后根据您想要用作参数的类型，您可以编写：

```
attribute.ConstructorArguments.Add (
    new ConstructorArgument (
        systemTypeRef,
        module.GetType ("TestType"))); 
```

或者如果您感兴趣的类型在另一个模块中，则需要导入引用：

```
attribute.ConstructorArguments.Add (
    new ConstructorArgument (
        systemTypeRef,
        module.Import (anotherModule.GetType ("TestType")))); 
```

# android - 如何在 android 项目中添加 koush/UrlImageViewHelper

> ID：12929810
> 
> 赞同：-1
> 
> 时间：2012-10-17T08:07:36.713
> 
> 标签：android

我想使用这个库[https://github.com/koush/UrlImageViewHelper](https://github.com/koush/UrlImageViewHelper)但我不知道如何添加这个库或将它与我的项目集成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T08:10:21.233

下载为zip，解压到文件夹，将项目导入工作区，在android选项卡中链接项目（右键单击项目，属性，android选项卡，添加库）

# java - JavaEE - 在事务之间共享资源

> ID：12929811
> 
> 赞同：2
> 
> 时间：2012-10-17T08:07:37.957
> 
> 标签：java, jakarta-ee, transactions, java-ee-6

我正在开发一个应用程序，它启动一个事务，注册一些资源，启动另一个事务并根据先前事务注册的资源执行处理。例子是：

登记：

```
@Stateless
@LocalBean
public class Register {
    @Resource TransactionSynchronizationRegistry tsr;
    public void registerResource(String id, Resource r) {
        tsr.putResource(id, r);
    }
} 
```

第一笔交易

```
@Stateless
@LocalBean
public class FirstTransaction {
    @Inject Register r;
    @Inject SecondTransaction st;

    public void doRegistering(Resource r) {
        r.registerResource("key", r);
        st.doProcess();
        // do other operations...
    }
} 
```

第二笔交易

```
@Stateless
@LocalBean
public class SecondTransaction {
    @Resource TransactionSynchronizationRegistry tsr;

    /*
     * start new transaction in order to ensure that
     * there won't be any rollback on any operations
     * performed by this method if its caller fails
     */
    @TransactionAttribute(TransactionAttributeType.REQUIRES_NEW)
    public void doProcess() {
        Resource r = (Resource) tsr.getResource("key");
        // start processing resource...
    }
} 
```

但是，由于在注册资源后创建了一个新事务，我无法再次访问相同的 TransactionSynchronizationRegistry。我知道 TransactionSynchronizationRegistry 仅用于一个事务，所以问题是是否有另一种方法，例如资源注册表，我可以在不同的事务中使用它。

谢谢。

大号

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T09:22:21.493

这是相当多的开销，但您可以让它们从 JMS 消息队列中生成/使用有效负载。

# jquery - 子div和父div类名相同，如何选择父div？

> ID：12929813
> 
> 赞同：1
> 
> 时间：2012-10-17T08:07:42.423
> 
> 标签：jquery, dom, children

HTML：

```
<div class="a" style="width:auto;....">  //I wanna add some inline-style to overwrite some stylesheet here.
  <div class="a">child</div>
  <div class="a">child</div>
</div>

<div class="a">
  <div class="a">child</div>
  <div class="a">child</div>
</div> 
```

正如你在上面看到的，我想抓住与子div具有相同className的父div，我该怎么做？

这是我的代码：

```
 var get_div_a = $('div.a');
 var len = get_div_a.size();
 var arr = [];

 for(var i = 0; i < len ; i++){

  if($(get_div_a[i]).children('div.a')!==0){
     ...no idea ???
  }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T08:11:56.727

如果您只是在过滤具有子节点的节点之后，您可以这样做：

```
$('div.a > div.a').parent() 
```

第一个表达式获取所有子节点；应用后`.parent()`返回父节点集（它们已经被过滤，即没有重复）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T08:12:41.153

```
 var get_div_a = $('div.a');
 var len = get_div_a.size();
 var arr = [];

 for(var i = 0; i < len ; i++){

 if($(get_div_a[i]).children('div.a')!==0){
    $(this) //this is needed div
  }

 } 
```

# php - 将 LIKE 运算符与 % 一起用于使用 PDO 准备语句的关键字搜索

> ID：12929816
> 
> 赞同：5
> 
> 时间：2012-10-17T08:07:52.237
> 
> 标签：php, mysql, pdo, prepared-statement, sql-like

我正在尝试使用 PDO 准备语句编写关键字搜索。理想情况下，我想使用 LIKE 运算符在字段值内搜索子字符串。这是我的代码：

```
$statement = $this->db->prepare("select * from whatever where title like ? or author like ?");
$statement->execute(array("%$titleKeyword%","%$authorKeyword%"));
$rows = $statement->fetchAll(PDO::FETCH_ASSOC); 
```

不幸的是，当我尝试这个时，$rows 总是空的。但是，如果我将 SQL 复制到 phpMyAdmin 中，并用 '%keyword%' 替换每个 ? 符号，它工作正常（当使用的关键字存在时我得到结果）。

我还尝试了以下代码：

```
$statement = $this->db->prepare("select * from whatever where title like :titleKeyword or author like :authorKeyword");
$statement->bindValue(":titleKeyword",  '%'.$titleKeyword.'%',  PDO::PARAM_STR);
$statement->bindValue(":authorKeyword", '%'.$authorKeyword.'%', PDO::PARAM_STR);
$statement->execute();
$rows = $statement->fetchAll(PDO::FETCH_ASSOC); 
```

我在另一个问题中读到，您应该在绑定参数时包含 %，而不是在 SQL 本身（预先准备好的语句）中，但这不起作用。

我可以诉诸将关键字直接插入 SQL（在进行一些清理之后），但我想坚持使用准备好的语句。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T08:12:45.683

这实际上对我有用：

```
$stmt = $pdo->prepare("select * from t where c like ?");
$stmt->execute(array("70%"));
print_r($stmt->fetchAll()); 
```

您使用什么 PHP 版本？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T08:45:40.313

感谢 Steffen 和 Terry 的帮助。

我最终通过切换到 bindParam() 而不是 bindValue() 自己解决了这个问题。我不知道为什么我不能用 bindValue() 来做，但现在我太累了，不在乎。

# iphone - 编辑文本字段时如何显示我们自己的建议？

> ID：12929818
> 
> 赞同：0
> 
> 时间：2012-10-17T08:07:56.750
> 
> 标签：iphone, xcode, uitextfield

我有一个文本字段和一个包含一组单词的数组。当我们编辑文本字段时，它将显示字典中的一些建议文本。我只想显示来自我的数组而不是 Dictionary 的建议。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T08:28:08.207

您可以使用 UITableView 作为建议列表。在文本字段编辑中，您可以过滤数组并再次重新加载表格数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T08:35:12.337

[iOS](http://www.cocoacontrols.com/platforms/ios/controls/autocompletiontableview)的 AutocompletionTableView 是您正在寻找的。

[适用于 iOS 的 WEPopover](http://www.cocoacontrols.com/platforms/ios/controls/wepopover)也同样工作，但看起来不同。

# node.js - 用于开发交互式 CLI 应用程序的 Nodejs 库/模块？

> ID：12929821
> 
> 赞同：12
> 
> 时间：2012-10-17T08:08:09.600
> 
> 标签：node.js, command-line-interface, interactive

一直在谷歌搜索并搜索stackoverflow，但没有遇到任何问题。我想开发一个带有节点的交互式外壳，并想知道最好的方法。有没有人可以推荐使用的图书馆？

我编写了一个库，现在想要一个 CLI 界面与之交互，通过 2 种方法：使用参数运行应用程序，或通过交互式 shell。例如

```
$ node myapp doSomething
App Result: I did something
$ node myapp cli
Entering interactive mode...
myapp>
myapp> doSomething
App Result: I did something
myapp> 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-17T08:34:33.643

我猜 command.js 就是你要找的。

[https://github.com/visionmedia/commander.js](https://github.com/visionmedia/commander.js)

[http://oscar-mejia.com/blog/how-to-create-a-command-line-program-with-nodejs/](http://oscar-mejia.com/blog/how-to-create-a-command-line-program-with-nodejs/)

也看看 REPL [http://nodejs.org/api/repl.html](http://nodejs.org/api/repl.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-09-26T18:01:58.513

[Vorpal](https://github.com/dthree/vorpal)是一个完全符合问题描述的框架，尽管他们称之为“[沉浸式 cli](https://github.com/dthree/vorpal#what-is-an-immersive-cli-app) ”。

```
var vorpal = require('vorpal')();

vorpal
  .command('doSomething')
  .action(function (args, cb){
    this.log('App Result: I did something');
    cb();
  });

vorpal
  .delimiter('myapp>')
  .show(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-03T15:46:31.377

我最近开始了一个增强 REPL 的项目，它提供插件和多语言支持（如 CoffeeScript）：

[http://danielgtaylor.github.com/nesh/](http://danielgtaylor.github.com/nesh/)

在构建交互式应用程序时，它可能对您有用。如果您想查看 Nesh 的任何功能，请告诉我！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-05T12:36:31.430

这个问题有点老了，但我已经对我不久前构建的一个模块给出了一些里程，它将启动一个交互式 shell 式命令提示符：

[https://github.com/mrvisser/node-readcommand](https://github.com/mrvisser/node-readcommand)

与commander之类的主要区别在于它允许您维护shell会话状态并在Node.js内部接受命令，而不是要求每次调用都是使用shell解析的参数进行无状态的重新运行。它有效地包装了节点的内部`readline`模块以提供：

*   输入的类 shell 解析
*   通过转义换行符或引用它来支持多行命令
*   命令历史支持（使用时`readcommand.loop`）
*   基于参数的自动完成（围绕`readline`s 基于文本的自动完成支持

希望别人也觉得它有用。

对于更高级和自以为是的交互式 CLI 框架，我还构建了`node-corporal`：[https](https://github.com/mrvisser/node-corporal) ://github.com/mrvisser/node-corporal 。这可能超出了您的预期，但它提供了一个用于将 CLI 应用程序组合在一起的结构和环境。

# delphi - Delphi IBTable 只读错误

> ID：12929822
> 
> 赞同：1
> 
> 时间：2012-10-17T08:08:10.660
> 
> 标签：delphi, interbase, delphi-xe3

我刚刚安装了最新版本的`Embarcadero Delphi XE3`. 我制作了一个连接到`InterBase`数据库的简单表单。我有`IBDatabase`, `IBTable`,`IBTransaction`和`Grid`其他一些组件。一切正常，它在网格中显示数据。但我希望能够编辑这些数据。因此，在`IBTable`组件中，我将`ReadOnly`属性设置为 false，每次执行此操作时程序都会停止工作，我得到以下信息：

`Dynamic SQL Error SQL error code = - 206 Column unknown IBTable1`

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T08:17:09.907

不推荐使用 IBTable 组件。建议使用 IBDataset 或 IBQuery。[读这个](https://www.google.com.tr/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CCAQFjAA&url=https://forums.embarcadero.com/message.jspa?messageID=500088&ei=pWh-UMrXC9G6hAecwYGICw&usg=AFQjCNFz64wYFVxzfTDoPW_AE_aJ62SxMQ)

# algorithm - 从祖先矩阵创建二叉树

> ID：12929829
> 
> 赞同：1
> 
> 时间：2012-10-17T08:08:42.543
> 
> 标签：algorithm, binary-tree

问题是如何在给定祖先矩阵的情况下创建二叉树。[我在http://www.ritambhara.in/build-binary-tree-from-ancestor-matrics/](http://www.ritambhara.in/build-binary-tree-from-ancestor-matrics/)找到了一个很酷的解决方案。问题是它涉及从矩阵中删除行和列。现在我该怎么做？有人可以为此建议一个伪代码吗？或者，有没有更好的算法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T08:31:14.157

您不必实际删除行和列。您可以在某个附加数组中将它们标记为已删除，也可以将它们全部设为零，我认为这实际上是相同的（实际上，您仍然需要知道它们已被删除，因此您不要选择它们再次在步骤 4.c - 因此，将节点标记为已删除应该足够好）。

以下是页面中对伪代码的修改：

4.b。

```
used[temp] = true;
for (i = 0 to N) 
    Sum[i] -= matrix[i][temp]; (aka decrement sum if temp is a predecessor of i)
    matrix[i][temp] = 0; 
```

4.c。查找 Sum[i] == 0 和 used[i] == false 的所有行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T08:49:20.123

这让我想起了Doanld Knuth 用来实现他的[**算法 X的**](http://en.wikipedia.org/wiki/Algorithm_X)[**Dancing Links**](http://en.wikipedia.org/wiki/Dancing_Links) ， 它基本上是一个循环双向链表结构。~~您可以维护一个单独的~~~~*Sum*~~~~数组并根据需要删除行和列来更新它。~~[](http://en.wikipedia.org/wiki/Algorithm_X)

 ***实际上，您不需要维护单独的*Sum*数组。
**编辑：**

我的意思是-
您可以使用由圆形二维链表组成的结构。节点结构有点像：

```
struct node{
        int val;
        struct node *left;
        struct node *right;
        struct node *down;
}; 
```

Top-most 和 Left-most List 是顶点（二叉树节点值）的标题列表。

如果 vertex`j`是 vertex 的祖先`i`，则构建一个（空）新节点，以便将`j`列的 current`down`分配给这个新节点，并将`i's`current`left`分配给这个新节点。
注意：结构可以通过从左到右扫描祖先矩阵的每一行并插入从0到N的行来轻松构建。（假设`N`这里的顶点数）

![图片1](../Images/9dcab6aae14a91ae265bd69e9d005742.png)

![图4](../Images/842991bca5fb6edfab559f69f157f2bf.png)

[我从Image1](http://sudokugarden.de/de/loesen/dancing-links)和[Image2](http://www.ocf.berkeley.edu/~jchu/publicportal/sudoku/sudoku.paper.html)中借用了这些图像来了解网格。不过，第二张图片缺少最左侧的标题。

如果`N`不是。的顶点。祖先矩阵中可能有更糟糕`O(N^2)`的条目（如果树倾斜）或平均`O(NlogN)`条目。

**搜索当前根：`O(N)`**
假设从一个虚拟节点开始，线性扫描最左边的标题并选择一个节点`node->down->right == node->down`。

**要删除此顶点信息：`O(N)`**
**删除行：`O(1)`** 

```
node->down = node->down->down; 
```

**删除列：`O(N)`** 转到相应的列 - 说（p）：

```
node* q = p;
while(q->down != p){
    q->down->left->right = q->down->right;
    q->down->right->left = q->down->left;
    q = q->down;
} 
```

发现当前 Root 后，您可以将其分配给它的父节点并将它们插入到队列中，以按照该链接建议的方式处理下一个级别。

总时间复杂度：N + (N-1) + (N-2) +.... = `O(N^2)`.
最坏情况空间复杂度`O(N^2)`

尽管与您已有的解决方案相比，渐近运行时间没有大的改进。我认为值得一提，因为这种结构对于存储稀疏矩阵和定义诸如乘法之类的操作特别有用，或者如果您正在使用一些回溯算法，该算法删除行/列，然后回溯并像 Knuth 一样再次添加它算法 X。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-03T08:46:45.857

您不必更新矩阵。只需为当前节点的任何后代递减 sum 数组中的值，并检查它们中的任何一个是否达到零，这意味着当前 noe 是最后一个祖先，例如直接父节点：

```
for (i = 0 to N) 
    if matrix[i][temp]==1:
      Sum[i]=Sum[i]-1
      if Sum[i]==0:
        add i as child of temp
        add i to queue 
```***

# android - Android MediaPlayer 类可以播放哪些文件类型？

> ID：12929830
> 
> 赞同：2
> 
> 时间：2012-10-17T08:08:58.673
> 
> 标签：android, media-player, file-type

我在[这里](http://developer.android.com/reference/android/media/MediaPlayer.html)做了一些 RTFM ，但我仍然不确定 MediaPlayer 可以播放哪些文件。.wav 可以，我知道。.mp3、.ogg、.flac 怎么样？我现在不需要视频文件，但了解它们也很有用。链接到文件类型列表就足够了。谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-17T08:12:20.717

我认为您正在寻找此文档链接：http: [//developer.android.com/guide/appendix/media-formats.html](http://developer.android.com/guide/appendix/media-formats.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T08:15:07.257

它在开发者网站[http://developer.android.com/guide/appendix/media-formats.html上给出](http://developer.android.com/guide/appendix/media-formats.html)

# javascript - 如何以日期时间格式打印秒数？

> ID：12929833
> 
> 赞同：0
> 
> 时间：2012-10-17T08:09:12.530
> 
> 标签：javascript, datetime

我有简单的脚本：

```
function test(time) {
    var dt = new Date( time * 1000 )
    var sec = dt.getSeconds()
    if ( sec < 10 ) sec = "0" + sec
    var min = dt.getMinutes()
    if ( min < 10 ) min = "0" + min
    var hour = dt.getHours()
    if ( hour < 10 ) hour = "0" + hour
    var time = hour + ":" + min + ":" + sec
    return time 
```

预期的结果`(test(1800) ) : 30:00`，但我有`result: 04:30:00`。你能帮我改正这个脚本吗？我的时区 GMT+04

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T08:17:17.553

答案很简单：

object的构造[`Date`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)函数可以接受：

> 整数值，表示自 1970 年 1 月 1 日 00:00:00 UTC（Unix 纪元）以来的毫秒数

而`Date.get*`函数使用本地时区返回。

如果确实需要，请`Date.getUTC*`改用。

```
function test(time) {
    var dt = new Date( time * 1000 );
    var sec = dt.getUTCSeconds();
    if ( sec < 10 ) sec = "0" + sec;
    var min = dt.getUTCMinutes();
    if ( min < 10 ) min = "0" + min;
    var hour = dt.getUTCHours();
    if ( hour < 10 ) hour = "0" + hour;
    var time = hour + ":" + min + ":" + sec;
    return time;
} 
```

# google-plus - plusone.js 有时在 chrome 上“待定”？

> ID：12929836
> 
> 赞同：3
> 
> 时间：2012-10-17T08:09:20.537
> 
> 标签：google-plus

有时，当我尝试使用 Chrome (22.0....) 时：

```
<script src="http://apis.google.com/js/plusone.js" type="text/javascript"></script> 
```

它失败。我的意思是，如果我检查网络控制台，它会显示“Pending...”，并且我的 .load() 事件被卡住了。

为什么？我该如何解决？

还尝试过：

```
<script type="text/javascript">
  (function() {
    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    po.src = 'https://apis.google.com/js/plusone.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
  })();
</script> 
```

但它是一样的......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T18:20:20.263

我没有看到您链接的页面源中任何位置定义的 +1 按钮的 HTML 容器。我看到您在页面上引用的第一个脚本，但您的页面似乎丢失了：

```
<!-- Place this tag where you want the +1 button to render. -->
<div class="g-plusone" data-annotation="inline" data-width="300"></div> 
```

第二个脚本片段用于异步加载（首选），您引用的它也需要您插入相同类型的 HTML 容器。

[您可以使用+1 按钮配置工具](https://developers.google.com/+/plugins/+1button/)生成要包含在页面中的代码。

[更新] g-plusone 元素显然是由 jQuery 动态注入的，它的加载时间与 +1 按钮自己的加载处理程序不同，这解释了为什么有时它可能会显示。在这种情况下，您需要使用 parseTags: 显式选项：

```
<script type="text/javascript" src="https://apis.google.com/js/plusone.js">
  {parsetags: 'explicit'}
</script> 
```

然后在你自己的 JavaScript 注入 g-plusone div 之后，你必须调用：

```
gapi.plusone.go(); 
```

这将在启动时显式呈现页面上的所有 +1 按钮。

# php - 多个数组或一个包含多个数组的数组哪个更高效？

> ID：12929837
> 
> 赞同：1
> 
> 时间：2012-10-17T08:09:38.270
> 
> 标签：php, arrays, performance, maintainability

什么会更有性能和资源更友好？

使用

```
$array1=Array();
$array2=Array();
$array3=Array(); 
```

或者：

```
$arr=Array();
$arr[] = Array();
$arr[] = Array();
$arr[] = Array(); 
```

当需要维护时，在代码中处理什么更好？

我必须处理大约 2800 个不同的数组，所以性能非常重要。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-17T08:16:14.397

可维护性通常取决于您在数组中存储的内容以及访问它们的方式......

如果有逻辑分组/集合，并且您想要遍历数组（`$array1`,`$array2`等...），那么将它们设为嵌套的关联数组。

```
$Config = array(
    'Database' => array(
        'Host'=>"10.0.0.1",
        'user'=>"root"
    ),
    'API' => array(
        'Endpoint'=>"http://example.com/"
    ),
); 
```

如果他们完全不同，那么这真的是一个判断电话

数组数组在内存上可能会*稍微*轻一些，但老实说，使用 PHP 的差异会非常小，在遇到性能瓶颈之前不值得浪费时间担心 - 当你这样做时，我怀疑它赢了不要与你如何声明你的数组

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T08:14:23.153

有点，如果你有 1000 个数组，那么将它们全部放在一个数组中可能会更好，所以使用数组数组更好，然后使用 1000 个变量，每个变量都包含一个数组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T08:16:12.183

第二个会稍微“更好”，因为它不会创建多个变量名。

就我个人而言，我不在乎并选择在您当前情况下最有意义的那个。风格通常比性能更重要，除非你有令人信服的理由专注于性能。（在这种情况下，PHP 可能更好的另一种解决方案。）

# eclipse - 在 Eclipse 插件开发中访问属性文件时缺少 NLS

> ID：12929838
> 
> 赞同：0
> 
> 时间：2012-10-17T08:09:45.693
> 
> 标签：eclipse, plugins, eclipse-plugin

我已经在 /src 文件夹的同一级别编写了我的属性文件，并试图访问我的文件的相同 .ls Bundlename 路径。

错误：

```
NLS missing message: key_one in: org.eclipse.core.utils.messages 
```

代码：

```
public class Messages extends NLS {
  private static final String BUNDLE_NAME = "org.eclipse.core.utils.messages"; //$NON-NLS-1$

  public static String key_one; 
```

我在构建文件中添加了属性文件：

```
source.. = src/
output.. = bin/
bin.includes = plugin.xml,\
               Message.properties,\
               META-INF/,\
               icons/,\
               .,\

  static {
    NLS.initializeMessages(BUNDLE_NAME, Messages.class);
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T14:37:05.317

尝试将 Message.properties 文件移动到适当包下的 src 文件夹。这有望解决问题。

# android - 如何访问 Android 上的所有消息

> ID：12929841
> 
> 赞同：0
> 
> 时间：2012-10-17T08:09:50.957
> 
> 标签：android, accessibility, message

> **可能重复：**
> [如何访问 Android 上的 SMS 存储？](https://stackoverflow.com/questions/4809874/how-to-access-the-sms-storage-on-android)

我正在尝试访问 android 中的所有消息。我有代码，但我只通过此代码访问了最后一条消息。怎么能读完？

```
public void onReceive(Context context, Intent intent) 
{
    //---get the SMS message passed in---
    Bundle bundle = intent.getExtras();        
    SmsMessage[] msgs = null;           
    if (bundle != null)
    {
        String header = "";
        String body = "";

        //---retrieve the SMS message received---
        Object[] pdus = (Object[]) bundle.get("pdus");
        msgs = new SmsMessage[pdus.length];            
        for (int i=0; i<msgs.length; i++)
        {
            msgs[i] = SmsMessage.createFromPdu((byte[])pdus[i]);                
            header = msgs[i].getOriginatingAddress();                     
            body = msgs[i].getMessageBody().toString();       
        }
        //---display the new SMS message---
        Toast.makeText(context,"Mesaj geldi", Toast.LENGTH_SHORT).show();
        Header.add(header);
        Body.add(body);  
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T09:43:10.210

```
Uri allMessage = Uri.parse("content://sms/");
ContentResolver cr = getContentResolver();
Cursor c = cr.query(allMessage, null, null, null, null);
while  (c.moveToNext()) {
   String row = c.getString(1);
} 
```

您可以访问android中的所有消息，您可以在此处获取所有收件箱/发件箱，但尚未对其进行测试

# c# - 请求 URI 太大

> ID：12929844
> 
> 赞同：0
> 
> 时间：2012-10-17T08:09:57.923
> 
> 标签：c#, .net, google-fusion-tables, google-api-client

我使用 OAuth2 授权示例[http://code.google.com/p/google-api-dotnet-client/wiki/OAuth2](http://code.google.com/p/google-api-dotnet-client/wiki/OAuth2)，但我使用 Fusion Tables 服务而不是任务服务。

问题是当我尝试在表中插入新行时出现错误 414 - 请求 URI 太大。

```
const string Geometry = "<Polygon>" + "<outerBoundaryIs>" + "<LinearRing>" + "<coordinates>" +
"-86.8331071413617,33.9491997229225 -86.8207076186559,33.9412000308542 -86.8207076186559,33.9575993995941 -86.7907087734001,33.9531995689566 -86.7919087272103,33.9631991840419 -86.7627098511612,33.9755987067476 -86.7611099127476,33.9955979369182 -86.7415106671804,33.9991977983489 -86.7203114831996,34.0323965204321 -86.707111991287,34.0299966128117 -86.7043120990631,34.0579955350505 -86.6843128688925,34.0543956736198 -86.7047120836665,34.0803946728416 -86.6923125609607,34.0923942109439 -86.6867127765129,34.0795947036348 -86.6687134693594,34.0835945496689 -86.6527140852229,34.107993610477 -86.622715239967,34.1227930408032 -86.6131156094851,34.1135933949248 -86.5995161329691,34.1199931485794 -86.5903164870907,34.1463921324046 -86.5455182115085,34.1855906235389 -86.5555178265938,34.1887905003662 -86.5543178727836,34.2051898691061 -86.5399184270608,34.2255890838801 -86.5235190583209,34.2263890530869 -86.5195192122867,34.2519880677053 -86.4531217681204,34.2591877905667 -86.3035275264443,34.0991939492019 -86.3323264178899,34.0463959815516 -86.3335263717002,33.9819984604022 -86.3703249552141,33.9396000924406 -86.3255266796319,33.940000077044 -86.3487257866298,33.9100012317881 -86.3423260329752,33.8868021247902 -86.4083234925382,33.8340041571398 -86.4303226457259,33.819604711417 -86.4451220760521,33.8260044650716 -86.5219191199072,33.8020053888668 -86.5775169797815,33.8020053888668 -86.5743171029542,33.7652068053529 -86.647914269982,33.7660067745598 -86.7591099897305,33.8408038953978 -86.883905185995,33.8432038030183 -86.9535025069887,33.8152048807794 -86.963502122074,33.8584032179479 -86.9623021682638,33.8676028638264 -86.947902722541,33.8616030947752 -86.9519025685751,33.8716027098605 -86.9203037849055,33.8728026636708 -86.9275035077669,33.8984016782891 -86.9167039234748,33.9156010162358 -86.8867050782189,33.9168009700461 -86.8859051090121,33.9340003079928 -86.8595061251869,33.9292004927519 -86.8331071413617,33.9491997229225" +
"</coordinates>" + "</LinearRing>" + "</outerBoundaryIs>" + "</Polygon>";

var sqlValue = string.Format(
"INSERT INTO {0} (Hash, Geometry, Timestamp) VALUES ('3eb906069dd01a74352a2b1f9e5cec3f', '{1}', '{2}')", 
TableId, Geometry, DateTime.Now);

var sqlresponse = service.Query.Sql(sqlValue).Fetch(); 
```

似乎使用了 GET 请求而不是 POST。有人可以告诉我我的代码有什么问题，或者是否可以插入大量数据？

## 更新

官方 FusionTables API 参考告诉不应提供“sql” api 方法的请求正文。如果我们将尝试使用[https://developers.google.com/apis-explorer/#p/fusiontables/v1/fusiontables.query.sql](https://developers.google.com/apis-explorer/#p/fusiontables/v1/fusiontables.query.sql)用下一个 sql 测试我们的 INSERT 请求：

```
INSERT INTO 1Fyxt7bxFiCaT5jnUHdzv8xoCA6C8ERysS-aXELg (Hash, Geometry, Timestamp) VALUES ('3eb906069dd01a74352a2b1f9e5cec3f', '<Polygon><outerBoundaryIs><LinearRing><coordinates>-86.8331071413617,33.9491997229225 -86.8207076186559,33.9412000308542 -86.8207076186559,33.9575993995941 -86.7907087734001,33.9531995689566 -86.7919087272103,33.9631991840419 -86.7627098511612,33.9755987067476 -86.7611099127476,33.9955979369182 -86.7415106671804,33.9991977983489 -86.7203114831996,34.0323965204321 -86.707111991287,34.0299966128117 -86.7043120990631,34.0579955350505 -86.6843128688925,34.0543956736198 -86.7047120836665,34.0803946728416 -86.6923125609607,34.0923942109439 -86.6867127765129,34.0795947036348 -86.6687134693594,34.0835945496689 -86.6527140852229,34.107993610477 -86.622715239967,34.1227930408032 -86.6131156094851,34.1135933949248 -86.5995161329691,34.1199931485794 -86.5903164870907,34.1463921324046 -86.5455182115085,34.1855906235389 -86.5555178265938,34.1887905003662 -86.5543178727836,34.2051898691061 -86.5399184270608,34.2255890838801 -86.5235190583209,34.2263890530869 -86.5195192122867,34.2519880677053 -86.4531217681204,34.2591877905667 -86.3035275264443,34.0991939492019 -86.3323264178899,34.0463959815516 -86.3335263717002,33.9819984604022 -86.3703249552141,33.9396000924406 -86.3255266796319,33.940000077044 -86.3487257866298,33.9100012317881 -86.3423260329752,33.8868021247902 -86.4083234925382,33.8340041571398 -86.4303226457259,33.819604711417 -86.4451220760521,33.8260044650716 -86.5219191199072,33.8020053888668 -86.5775169797815,33.8020053888668 -86.5743171029542,33.7652068053529 -86.647914269982,33.7660067745598 -86.7591099897305,33.8408038953978 -86.883905185995,33.8432038030183 -86.9535025069887,33.8152048807794 -86.963502122074,33.8584032179479 -86.9623021682638,33.8676028638264 -86.947902722541,33.8616030947752 -86.9519025685751,33.8716027098605 -86.9203037849055,33.8728026636708 -86.9275035077669,33.8984016782891 -86.9167039234748,33.9156010162358 -86.8867050782189,33.9168009700461 -86.8859051090121,33.9340003079928 -86.8595061251869,33.9292004927519 -86.8331071413617,33.9491997229225</coordinates></LinearRing></outerBoundaryIs></Polygon>', '10/17/2012 1:35:07 PM') 
```

然后将使用 POST 请求，但无论如何都会包含 INSERT 语句来查询字符串。

所以，我的问题还是一样：是否可以使用 FusionTables API .NET Client 插入大量数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T09:26:09.610

您的问题是您通过方法连接到服务器`GET`并且查询字符串太长。你必须使用`POST`来解决这个问题。`POST`这是您在插入/更新/删除和`GET`查询数据时应该使用的常见做法。

您可以阅读有关[HTTP 错误 414 请求 URI 太长](http://www.checkupdown.com/status/E414.html)和[GET 与 POST的更多信息](http://www.diffen.com/difference/Get_vs_Post)

# awk - 如何在awk中将浮点数转换为整数

> ID：12929848
> 
> 赞同：24
> 
> 时间：2012-10-17T08:10:09.347
> 
> 标签：awk

我的 awk 代码中有一个变量。在对该变量进行一些算术运算并打印 ( `print $1,$2,variable`) 后，结果如下所示：

**我的结果**

```
Bama     2   5    
Bama     2   5.001
Bama     2   5.002
Bama     2   5.003
Bama     2   5.004
Bama     2   6  
Bama     2   6.003
Bama     2   6.004
Bama     2   4.005 
```

但我只想要变量打印的整数部分

**期望的结果**

```
Bama     2   5    
Bama     2   5
Bama     2   5
Bama     2   5
Bama     2   5
Bama     2   6  
Bama     2   6
Bama     2   6
Bama     2   4 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-10-17T08:19:16.300

`int`使用以下函数截断它：

```
print $1, $2, int( variable ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-08-16T16:35:57.457

为了保持完全相同的间距和一切：

```
awk -F ' ' '{print $1"     "$2"   "int($3)}' data.lst 
```

这个修剪，不圆，所以`4.9`会变成`4`。

一种肮脏的方法是使用点作为字段分隔符：

```
awk -F '.' '{print $1}' data.lst 
```

输入：

```
Bama     2   5
Bama     2   5.001
Bama     2   5.002
Bama     2   5.003
Bama     2   5.004
Bama     2   6
Bama     2   6.003
Bama     2   6.004
Bama     2   4.905 
```

两种情况下的输出：

```
Bama     2   5
Bama     2   5
Bama     2   5
Bama     2   5
Bama     2   5
Bama     2   6
Bama     2   6
Bama     2   6
Bama     2   4 
```

# arrays - 将整数值添加到数组？

> ID：12929856
> 
> 赞同：2
> 
> 时间：2012-10-17T08:10:40.673
> 
> 标签：arrays, assembly, add, mips, mips32

我是 MIPS 的新手，不明白这里发生了什么：

假设字数组A按此顺序存储0,1,2,3,4,5,6,7,8,9。假设 A 的起始地址在 $s0 中。在以下说明之后，这个数组的值是多少？

```
addi $t0, $s0, 32
lw $t1, 0($t0)
sw $t1, 4($t0)

(a) 0,1,2,3,4,5,6,7,8,9
(b) 0,1,2,3,4,5,6,7,9,9  
(c) 0,1,2,3,4,5,6,7,8,8
(d) None of the above. 
```

答案是“c”，但我不明白为什么。这是我的思考过程：

第一行代码：

> 由于这是一个整数数组，因此将地址 $s0 加上 32 并将其赋予 $t0 意味着将 A[8] 的地址赋予 $t0。A[8] 因为每个整数需要 4 个字节，因此将 0 加到 $s0 将得到 A[0] 的地址，将 4 加到 $s0 将得到 A[1] 的地址，依此类推......

第二行代码：

> 0($t0) 引用 $t0 中的第一个元素（我不知道那是什么）并将其加载到寄存器 $t1。

第三行代码：

> $t1 的地址存储在内存中到 $t0 的第一个元素，用 4($t0) 表示。

同样，以上是我的思考过程，很可能是错误的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T12:23:58.697

你的思维过程是正确的，这就是为什么答案 c) 是正确的原因。

第一行，`addi $t0, $s0, 32`分配*$t0 = $s0 + 32*。由于**$s0**包含数组 A 的第一个元素的地址，并且知道该数组的每个元素占用 4 个字节，**$t0**现在将保存数组 A 的第九个元素的地址，A[8]（以0)。所以 *$t0=address_of(A[8])*

因此，第二行将`lw $t1, 0($t0)`加载存储在地址**$t0+0**（即 A[8]）的字，并将该字存储在寄存器**$t1**中。因此，*$t1=8*。

第三行，`sw $t1, 4($t0)`将存储包含在**$t1**中的字在地址**$t0+4**处，即 address_of(A[9])。因此，*A[9]=8*。

# ios - 在 iOS5 设备上测试 flash 应用时模糊效果消失

> ID：12929857
> 
> 赞同：0
> 
> 时间：2012-10-17T08:10:43.527
> 
> 标签：ios, actionscript-3, flash, air, blur

我使用 Flash Professional CS6 构建了一个 iOS 应用程序 (AIR SDK 3.4.0.2710)。这个应用程序具有应用 AS3 代码的模糊效果的 MovieClip。当我在 Flash 模拟器中运行这个应用程序时没有问题。但是，当我直接在设备（iOS5）上测试应用程序时，模糊效果消失了。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T14:38:34.963

我终于解决了：似乎在使用**GPU**渲染模式时，模糊效果（以及任何其他 flash.filters.* 包效果）无法在 iOS 中轻松渲染：

1.  [http://forums.adobe.com/thread/918235](http://forums.adobe.com/thread/918235)
2.  [http://forums.adobe.com/message/3934192#3934192#3934192](http://forums.adobe.com/message/3934192#3934192#3934192)

# java - Maven 正在使用错误的类目录创建战争，或者将编译的类放在错误的位置

> ID：12929860
> 
> 赞同：1
> 
> 时间：2012-10-17T08:10:53.843
> 
> 标签：java, maven, war

```
MyProject > src
          > target
                   > MyProject   > classes (1)
                   > classes (2) 
```

实际新编译的代码被放入 2，但是战争文件是使用 1 创建的。因此我的战争文件根本不是最新的。

我该怎么办？如下所示我的 pom ... 的片段：

```
<build>
        <finalName>MyProject</finalName>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.3.2</version>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-war-plugin</artifactId>
                <configuration>
                    <webXml>src\main\webapp\WEB-INF\web.xml</webXml>
                    <warName>MyProject</warName>

                </configuration>
                <version>2.1.1</version>
            </plugin>
        </plugins>
    </build> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T09:06:29.043

目标/项目不过是爆炸战争。

尝试删除目标目录。从命令行执行 Maven 构建。并检查是否所有的东西都按原样创建。如果是这样，那么 maven 的行为是正确的，因为这两个地方都包含更新的类文件，并且 target/PROJ 目录是爆炸的 war 目录。您可以使用该目录的路径在 tomcat/web 容器中设置上下文。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T08:25:40.970

我对你展示的内容有点怀疑。

通常在战争项目中，目标应该是

```
PROJ
  + target
    + classes
    + PROJ-version
      + WEB-INF
        + classes 
```

我从未`target/PROJ`在 Maven WAR 项目中看到过

如果我展示的是你所看到的，那么这就是 Maven 一直在做的事情。

源代码被编译并放入类中。

在创建WAR的过程中，不同的文件，包括项目的`target/classes`，都会被拷贝到`PROJ-version`构成WAR结构的目录中，用来创建WAR文件。

因此，Maven 在创建 WAR 时使用应该没有问题`target/PROJ-version/WEB-INF/classes`，因为它是在构建时复制的`target/classes`。

如果不是你的情况，我可能会建议你分享你的 POM。您提到的目录对于 WAR 项目似乎不合理。

# install4j - 如何在单个安装程序中为不同的启动器指定两个 JRE？

> ID：12929862
> 
> 赞同：1
> 
> 时间：2012-10-17T08:11:02.377
> 
> 标签：install4j

我有一个 install4j (v4.x) 项目，该项目在应用程序安装时创建了 2 个不同的启动器（用于 2 个不同的任务）。有没有办法为第二个启动器（不是最终媒体文件中指定的那个）指定一个单独的（第二个）JRE？

***有点跑题了，但是...***

为什么我需要那个？实际上，我需要第二个启动器（这是一个更新程序类型的应用程序）的媒体文件中的 JRE 的完整副本，以便它可以更新主应用程序的 JRE。如果更新程序可以在与应用程序相同的 JRE 上工作，它就无法这样做。

也许有一种更好的方法来用我需要的更新应用程序的 JRE？

PS 我知道 install4j 5.x 的新更新功能，但由于几个原因我们没有使用它，所以现在没有问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T07:54:18.430

这个怎么样：

*   在常规设置->Java 版本中，您将环境变量添加`MY_UPDATER_JAVA_HOME` 到搜索序列并将其移至列表顶部。

*   在安装程序中，使用“复制文件和目录”操作将 JRE 复制到其他目录

*   在 Installer->Screens & Actions 上，添加一个空的自定义安装程序应用程序，将其“默认执行模式”属性设置为“无人参与模式”

*   将“运行可执行文件或批处理文件”操作添加到新安装程序应用程序的“启动”节点。通过该操作，您可以调用更新程序启动器。在“特定环境变量”属性中，您设置`MY_UPDATER_JAVA_HOME`为复制的 JRE 的位置。

然后，您将直接调用安装程序应用程序而不是您的更新程序，它将使用复制的 JRE 运行。

如果您不想在安装目录中保留两个 JRE，可以将“默认执行模式”属性更改为“带有进度对话框的无人参与模式”并添加“复制文件和目录”操作以将 JRE 复制到特定的如果临时目录中的目录尚不存在。

# drag-and-drop - Autohotkey用控制lbutton替换alt和lbutton？

> ID：12929863
> 
> 赞同：0
> 
> 时间：2012-10-17T08:11:11.923
> 
> 标签：drag-and-drop, keyboard-shortcuts, autohotkey

如何用**CTRL** + **LBUTTON替换自动热键****ALT** + **LBUTTON**？

 ****我想要的是在按下 ALT + LBUTTON 并拖动时复制所选文本（拖放）（就像我们在 Windows 中使用 CTRL + LBUTTON 并拖动所选文本时所做的那样）

这是当我们释放快捷方式时工作的代码，但我们必须再单击一次选定的文本然后拖动它。

> !LButton:: Lalt::Control

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T20:29:58.160

这是我想出的解决方案：

```
!LButton::
    Send {Ctrl Down}{LButton Down}
    dragging := 1
    return

~*LButton::
    if dragging
        Send {Ctrl Up}{LButton Up}
    dragging := 0
    return 
```

我一开始尝试使用鼠标按钮的GetKeyState()，但我发现它不可靠。

还值得注意的是 !LButton 的行为与 Ctrl 修饰符不同。它们必须同时按下，而不是 Alt 和 LButton。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T07:48:58.850

这是解决方案：

```
 ;CoordMode, Mouse, Screen

~!LButton::
    ;MouseGetPos, begin_x, begin_y
    while GetKeyState("LButton")
    {
        ;MouseGetPos, x, y
        Send {ctrl down}
        ;ToolTip, % begin_x ", " begin_y "`n" Abs(begin_x-x) " x " Abs(begin_y-y)
        Sleep, 10
    }
    ;ToolTip
Send {Ctrl up}
return 
```****

# asp-classic - 如何在经典 asp 中使用 vbscript 下载文件

> ID：12929866
> 
> 赞同：2
> 
> 时间：2012-10-17T08:11:24.167
> 
> 标签：asp-classic, vbscript

我正在使用 VBScript 开发经典 Asp。我正在尝试显示带有下载选项的目录中的文件列表。喜欢，![在此处输入图像描述](../Images/f3161dd9691ecbbb827d0c44db443039.png)

当我单击下载链接时，需要下载相应的文件，因为我使用了以下代码，例如，

```
<html>
<head>
<title> My First ASP Page </title>
</head>
<body>
<%
Dim fso
Dim ObjFolder
Dim ObjOutFile
Dim ObjFiles
Dim ObjFile

'Creating File System Object
Set fso = CreateObject("Scripting.FileSystemObject")

'Getting the Folder Object
Set ObjFolder = fso.GetFolder("F:\karthik")

'Creating an Output File to write the File Names
Set ObjOutFile = fso.CreateTextFile("F:\WindowsFiles.txt")

'Getting the list of Files
Set ObjFiles = ObjFolder.Files

'Writing Name and Path of each File to Output File
Response.Write("<table cellpadding=""4"" cellspacing=""5"" >")
For Each ObjFile In ObjFiles
    Response.Write("<tr><td>"&ObjFile.Name & String(50 - Len(ObjFile.Name), " ")&"</td><td><a href=""#"" language=""VBScript"" onclick=""vbscript:HTTPDownload('"&ObjFile.Path&"','C:\Users\stellent\Downloads\')"">Download</a></td></tr>")
Next
 Response.Write("</table>")
ObjOutFile.Close
%><br>
<script language="vbscript" type="text/vbscript">
Sub HTTPDownload( myURL, myPath )
    ' Standard housekeeping
    Dim i, objFile, objFSO, objHTTP, strFile, strMsg
    Const ForReading = 1, ForWriting = 2, ForAppending = 8

    ' Create a File System Object
    Set objFSO = CreateObject( "Scripting.FileSystemObject" )

    ' Check if the specified target file or folder exists,
    ' and build the fully qualified path of the target file
    If objFSO.FolderExists( myPath ) Then
        strFile = objFSO.BuildPath( myPath, Mid( myURL, InStrRev( myURL, "/" ) + 1 ) )
    ElseIf objFSO.FolderExists( Left( myPath, InStrRev( myPath, "\" ) - 1 ) ) Then
        strFile = myPath
    Else
        WScript.Echo "ERROR: Target folder not found."
        Exit Sub
    End If

    ' Create or open the target file
    Set objFile = objFSO.OpenTextFile( strFile, ForWriting, True )

    ' Create an HTTP object
    Set objHTTP = CreateObject( "WinHttp.WinHttpRequest.5.1" )

    ' Download the specified URL
    objHTTP.Open "GET", myURL, False
    objHTTP.Send

    ' Write the downloaded byte stream to the target file
    For i = 1 To LenB( objHTTP.ResponseBody )
        objFile.Write Chr( AscB( MidB( objHTTP.ResponseBody, i, 1 ) ) )
    Next

    ' Close the target file
    objFile.Close( )
End Sub
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-18T03:42:30.227

您似乎正在尝试使用客户端脚本在服务器端执行此操作。这是一个更好的解决方案，它使用服务器端 ASP 来发送文件。您需要将代码分成两页。

您当前的脚本应替换为：

```
<html> 
<head> 
<title> My First ASP Page </title> 
</head> 
<body> 
<% Dim fso 
Dim ObjFolder 
Dim ObjOutFile 
Dim ObjFiles 
Dim ObjFile 

'Creating File System Object 
Set fso = CreateObject("Scripting.FileSystemObject") 

'Getting the Folder Object 
Set ObjFolder = fso.GetFolder("F:\karthik") 

'Getting the list of Files 
Set ObjFiles = ObjFolder.Files 

'Writing Name and Path of each File to Output File 
Response.Write("<table cellpadding=""4"" cellspacing=""5"" >") 
For Each ObjFile In ObjFiles 
    Response.Write("<tr><td>"&ObjFile.Name & String(50 - Len(ObjFile.Name), " ")&"</td><td><a href=""download.asp?file=" & Server.UrlEncode(ObjFile.Name) & """>Download</a></td></tr>") 
Next 
 Response.Write("</table>") 
%><br> 
</body> 
</html> 
```

然后你需要创建另一个我称之为**download.asp**的脚本来处理下载：

```
<%
Dim objConn, strFile
Dim intCampaignRecipientID

strFile = Request.QueryString("file")

If strFile <> "" Then

    Response.Buffer = False
    Dim objStream
    Set objStream = Server.CreateObject("ADODB.Stream")
    objStream.Type = 1 'adTypeBinary
    objStream.Open
    objStream.LoadFromFile("F:\karthik\" & strFile)
    Response.ContentType = "application/x-unknown"
    Response.Addheader "Content-Disposition", "attachment; filename=" & strFile
    Response.BinaryWrite objStream.Read
    objStream.Close
    Set objStream = Nothing

End If
%> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-25T01:23:49.147

我喜欢这个解决方案，但是用户可以在历史记录中看到下载，或者修改查询字符串。可以通过这种方式修改此解决方案以使用 POST：在页面代码中修改链接： `<a href="#" onclick="getfile(this);">FileName</a>`` 并进一步向下

```
 <form id="frm2dl" action="download.asp" method="post"><input type="hidden" id="file2dl" name="file2dl" value="" /></form> 
```

然后在您的 javascript 文件中获取文件名：

```
 function getfile(obj) {
      var f=obj.innerText;
      $("#frm2dl #file2dl").val(f);
      $("#frm2dl").submit();
    } 
```

或者，您可以使用文件 ID，然后在 download.asp 中具有从 ID 到文件名的查找功能。然后在download.asp 中使用`request.form("file2dl")`request.querystring 代替。

更新：此外，根据服务器版本，您可能会获得 4MB 的限制（我必须在 Intranet 上使用 Microsoft-IIS/7.5）。因此，对于大文件，代码将不起作用。这是我的改进版本：

```
Dim strFileName, strFilePath, objFSO, objStream, objFile, intFileSize
Const lChkSize = 524288 ' 500KB - server typical limit is 4MB 
'If session("loggedIn") = True Then ' insert your logon validation code here. bypassed for testing
    strFileName = request.form("file2dl")
    strFilename = Replace(strFilename,"..","") ' prevent parent path navigation - also ensure uploaded files do not contain this sequence
    strFilename = Replace(strFilename,"/","") ' prevent path navigation
    strFilename = Replace(strFilename,"\","") ' filenames should already be cleaned by a previous process
    strFilePath = server.MapPath("/insert your URL absolute sources filepath here/" & strFilename)
    Set objFSO = Server.CreateObject("Scripting.FileSystemObject")
    If objFSO.FileExists(strFilePath) Then
        Set objFile = objFSO.GetFile(strFilePath)
        intFileSize = objFile.Size
        Set objFile = Nothing
        Response.AddHeader "Content-Disposition","attachment; filename=" & strFileName
        Response.ContentType = "application/x-msdownload"
        Response.AddHeader "Content-Length", intFileSize
        Set objStream = Server.CreateObject("ADODB.Stream")
        objStream.Type = 1 'adTypeBinary
        objStream.Open
        objStream.LoadFromFile strFilePath
        Do While Not objStream.EOS And Response.IsClientConnected
            Response.BinaryWrite objStream.Read(lChkSize)
            Response.Flush()
        Loop
        objStream.Close
        Set objStream = Nothing
    Else
        Response.write "Error finding file: " & request.form("file2dl")
    End if
    Set objFSO = Nothing
'End If 
```

# jquery-mobile - 重新访问时 JQM 页面未刷新

> ID：12929872
> 
> 赞同：1
> 
> 时间：2012-10-17T08:11:58.210
> 
> 标签：jquery-mobile

我总共有四页：Page1、Page2、Page3 和 Page4。Page3 包含选择下拉菜单。以前，当我从 Page3 的下拉列表中选择一个值并移动到 Page4 并返回到 Page3 时，所选值不会被保留并且 Page3 会重置为其默认值。因此，其中一位开发人员建议我在 Page3 上使用 data-dom-cache="true" ，我的问题得到了解决。但它产生了另一个问题。

```
Page1 -> Page2 -> Page3 (No problem)
Page3 -> Page2 (No problem)
Page2 -> Page3 (Problem! No data was displayed except Header, Footer, 
Logos and Select dropdown box) 
```

如果我从 Page3 中删除`data-dom-cache="true"`，则显示数据，但从 Page4 重新访问时，所选值会丢失。

第3页代码：http: [//jsbin.com/owodon/14/edit](http://jsbin.com/owodon/14/edit)

```
//Code for triggering Page3 from Page2
$('.clsChangeLi').live("click", function () {
    var Pg3URL = $(this).attr("data-url");
    if (Pg3URL != null)
        $.mobile.changePage(Pg3URL, {
            transition: "flip",
            reloadPage: true
        });
});

//Code snippet for Page3
$('#CAL').live('pagebeforecreate', function (event) {
    var html = "";
    (AJAX request goes here and data is received in html variable)
    html = "Data returned by AJAX";
    $('#divContentCAL').append(html);
}); 
```

之后我尝试了以下各项，`$('#divContentCAL').append(html);`但没有成功：

```
$('ul').listview('refresh');
$('#divContentCAL').listview('refresh');
$.fn.listview('refresh'); 
```

您的帮助将不胜感激...谢谢。

# c# - jQuery / JSON 和 ASP.NET 读取/序列化表单字段

> ID：12929873
> 
> 赞同：0
> 
> 时间：2012-10-17T08:12:09.083
> 
> 标签：c#, jquery, ajax

我正在使用 jQuery 1.7.1、$.ajax、Javascript、JSON 和 ASP.NET，但遇到了一些问题。将表单提交到 ASP.NET PageMethod 时，并非所有表单域都被序列化或为空。当我调试代码时，没有任何问题，所以也许你可以帮助我。

我在javascript中提交这样的表格

```
function SaveFormData() {

    var fields = $("form").serializeArray();
    var myData = { 'projectId': projectId, 'fields': fields };

    myData = JSON.stringify(myData);

    $.ajax({
        type: "POST",
        url: "/w2/AspNetPage.aspx/SaveForm",
        contentType: "application/json; charset=utf-8",
        timeout: (1000 * 60 * 10),
        data: (myData),
        dataType: "json",
        success: function () {
            alert('done');
        },
        error: function () {
            alert('error');
        }
    });
} 
```

我的 AspNetPage.aspx 包含 webmethod SaveForm：

```
[WebMethod]
public static string SaveForm(int projectId, field[] fields) {
    // do the processing here
} 
```

为了读取和处理表​​单数据，我使用了在 javascript/JSON 和 ASP.NET 之间进行序列化所需的类字段。

```
public class field {
    public string name { get; set; }
    public string value { get; set; }
} 
```

我的问题是，有时并非所有表单域都已发布或为空。我无法通过调试找到问题，所以也许你可以帮助我解决这个问题。请记住，表单可以有数百个表单域。

我还想知道我现在使用的代码是否是线程安全的，也许我必须处理与现在不同的表单数据。

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T08:32:17.217

请确保您的表单**域未被禁用**。

禁用的字段无法发布到服务器

参考

[不提交禁用输入的值？](https://stackoverflow.com/questions/1355728/values-of-disabled-inputs-will-not-be-submited)

[提交禁用字段](https://stackoverflow.com/questions/1284464/submit-disabled-fields)

希望这可能会有所帮助！

# android-intent - 跨 3 个活动的 android 意图

> ID：12929874
> 
> 赞同：0
> 
> 时间：2012-10-17T08:12:10.300
> 
> 标签：android-intent

## 意图问题

这是我的问题：假设我有 3 个活动 A、B 和 C。

我在 A 的拳头，调用 startActivity*ForResult*(..) 跳转到 B。但我希望当 B 返回时，将启动 C 而不是 A。

有可能吗？我该怎么做？

实际上，int A，我调用 startActivity*ForResult*() 来启动 Camera Activity 拍照，并将数据返回给 C。

谢谢你的回答！

```
A extends Activity{
   startActivity();//jump to B
}
B extends Activity{
   takePhoto();//this is a camera program of android system for taking photos
}
C extends Activity{
   getIntent();//i wish photo data would delivered here.
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T08:24:55.457

我想你可以这样做：

```
A extends Activity{
  startActivity();//jump to C
}
B extends Activity{
  takePhoto();//this is a camera program of android system for taking photos
}
C extends Activity{
  onCreate() {
    startActivity(); // jump to B
  }
  startactivityforresult() {
    getIntent();//i wish photo data would delivered here.
  }
} 
```

# cursor - 游标可以保存多少记录

> ID：12929875
> 
> 赞同：0
> 
> 时间：2012-10-17T08:12:10.097
> 
> 标签：cursor, sql-server-2008-r2

我正在使用**SQL Server 2008**。

我想选择一长串记录并将其添加到游标并遍历这些记录以完成某些任务。但我不知道这个游标的局限性。

**问：** 游标可以容纳的最大记录数是否存在。或者它是无限制的，并且使用某种分页技术在内部处理以动态处理记录。

**代码：**

```
 DECLARE cursor CURSOR FOR  
 SELECT C1 
 FROM T1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T17:22:13.717

我的这个问题暂时没有答案。这是我所理解的。我使用游标存储 12000 条记录并对其进行迭代。我工作得很好。所以我现在知道少于 12000 条记录的课程可以正常工作。

如果您对此有更多发现，请留下最佳答案的评论。我会毫不犹豫地将其更改为我的正确答案。

# java - glassfish 中的 Ojdbc14.jar - 找不到

> ID：12929879
> 
> 赞同：2
> 
> 时间：2012-10-17T08:12:22.190
> 
> 标签：java, linux, glassfish, suse

我有 Suse linux 并且我已经安装了 Glassfish 3.1.1 但我无法创建池

```
resource type: javax.sql.ConnectionPoolDataSource 
```

以下错误是：

```
Class name is wrong or classpath is not set for : oracle.jdbc.pool.OracleDataSource Please      enter code here`check the server.log for more details. 
```

我在**glassfish/domains/domain1/lib/Ext**和**glassfish/lib中有 ojdbc14.jar**

我不知道该怎么做，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T09:23:00.990

您将此罐子作为全局资源的位置是错误的。您需要从中删除此 jar`glassfish/domains/domain1/lib/Ext`并将`glassfish/lib`其仅添加到其中`glassfish/domains/domain1/lib`- 这是 glassfish 中用于`JDBC`在全局类路径中找到的库的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T12:46:28.963

如果你在eclipse中安装插件Glassfih，那么你应该把jar放在eclipse里面的Glassfish中。或者您删除 Glassfish 服务器并添加一个新服务器并指向您下载 glassfish 的文件夹，将 jar 放在 /glassfish3/glassfish/lib 中的以下部分中。

# android - 禁用 Android 资源/图像/PNG 优化

> ID：12929884
> 
> 赞同：22
> 
> 时间：2012-10-17T08:12:35.620
> 
> 标签：android, android-image, android-resources, android-build

如何防止 Android“构建过程”优化 .png 图像？

我有一个带有以下 res 目录的 Android 项目：

```
- /res/
- /res/drawable
- /res/drawable-hdpi
- /res/drawable-hdpi-v5
- /res/drawable-ldpi
- /res/drawable-ldpi-v5
- /res/drawable-mdpi
- /res/drawable-mdpi-v5 
```

这些目录**包含许多 .png 文件**。我用PNGOUTWin优化了PNG尺寸，整体尺寸减少了20%以上。当我构建 .apk 文件时，**图像被构建过程“优化”，现在整体大小比初始大小高 10%**，或者比 my/PNGOUTWin 优化大小高 30%。

我的目标是减小 .apk 的大小，即使它会影响最终的性能、内存要求等。**如何防止“构建过程”优化 .png 图像？**

我的目标是 Android 2.2 及更高版本。

PS：我目前正在从 Eclipse 构建我的 Android 项目，但稍后我将切换到自动构建（Ant？）。

**关于 JPG 图像的注意事项：** JPG 不起作用，因为它们没有透明度。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2015-04-23T20:16:04.193

最后有一种官方方法可以使用 Gradle 禁用 PNG 压缩器，这里还没有提到：

1.  编辑 main build.gradle 以要求 gradle 版本 1.1.3（或更高版本）：

    ```
    buildscript {  
        repositories {  
            mavenCentral()  
        }  
        dependencies {  
            classpath 'com.android.tools.build:gradle:1.1.3'  
        }  
    } 
    ```

2.  在各个应用的 build.gradle 部分 android {} 中，插入：

    ```
    aaptOptions {  
        cruncherEnabled = false  
    } 
    ```

参考： [https ://code.google.com/p/android/issues/detail?id=65335](https://code.google.com/p/android/issues/detail?id=65335)

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2017-07-01T04:56:15.723

指定 PNG 处理现在是**BuildType**属性，在调试版本中默认禁用：

```
android {
    …
    buildTypes {
        release {
            crunchPngs false // or true
        }
    }
} 
```

**注意：**它可以从[Android Studio 3.0 Canary 5](https://androidstudio.googleblog.com/2017/06/android-studio-30-canary-5-is-now.html)获得。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-17T09:12:08.633

如Android文档中所述：http: [//developer.android.com/guide/topics/graphics/2d-graphics.html#drawables](http://developer.android.com/guide/topics/graphics/2d-graphics.html#drawables)

> **注意**：放置在 res/drawable/ 中的图像资源可能会在构建过程中通过 aapt 工具通过无损图像压缩自动优化。例如，不需要超过 256 种颜色的真彩色 PNG 可以转换为带有调色板的 8 位 PNG。这将产生相同质量的图像，但需要更少的内存。**因此请注意，放置在此目录中的映像二进制文件*可能会在构建期间更改*。**

*因此，如果您想减小应用程序的大小，您应该减少 PNG 文件的颜色深度（这很有帮助）或尽可能切换到 .JPG 文件。*

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-03-08T17:03:20.797

**Android Studio**：从 G​​radle Android 插件 1.0.0 开始：

```
android {
...
  aaptOptions {
    useNewCruncher false
  }
....
} 
```

**Eclipse**：覆盖在您的 build.xml 中编写此内容的紧缩任务：

```
<target name="-crunch">
   <echo message="This will skip PNG optimization"/>
</target> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-05-11T04:35:54.037

```
 buildTypes {
        release {
            crunchPngs false // or true
        }
    } 
```

在 android 块的行上方添加

在 ionic/Cordova 项目中：root_folder_Of_App/platforms/android/app/build.gradle

在 Android 项目中：app/build.gradle

[![在此处输入图像描述](../Images/ec7001698e02bfcb0b72f221e0740572.png)](https://i.stack.imgur.com/Kn7Us.png)

欲了解更多信息，请访问：[https ://androidstudio.googleblog.com/2017/06/android-studio-30-canary-5-is-now.html](https://androidstudio.googleblog.com/2017/06/android-studio-30-canary-5-is-now.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-03-27T16:53:32.137

Google 最近在 Android SDK 构建工具[的 aapt 0.9.1 中引入了新的 PNG 处理器](http://tools.android.com/tech-docs/new-build-system)，解决了 aapt 优化后 PNG 大小增加的问题。

通过此次更新，Android Studio 和 Gradle 现在可以通过 build.gradle 配置文件中的以下更改在 PNG 处理器之间切换：

```
android {
    ..
    ..

    aaptOptions.useAaptPngCruncher = false
} 
```

通过添加这一行，aapt 使用新的 PNG 处理器检查“优化的”PNG 文件是否小于原始 PNG 文件。我能够在我编译的 APK 中减少 4.8 MB，并且在新的构建配置中没有遇到任何错误/问题。

更新：这已在更高版本的 Android Studio 中被弃用。请参考 ChrisG 提供的答案。

# properties - 我可以在一个循环中生成多个 SystemVerilog 属性吗？

> ID：12929887
> 
> 赞同：4
> 
> 时间：2012-10-17T08:12:42.563
> 
> 标签：properties, verilog, system-verilog, formal-verification, system-verilog-assertions

我有两个打包的信号数组，我需要为该属性创建一个属性和相关的断言，以证明这两个数组在某些条件下是相同的。我正在正式验证，该工具无法证明单个属性中的两个完整数组，因此我需要将其拆分为单个元素。那么有没有一种方法可以使用循环为数组的每个元素生成一个属性？目前，我的代码非常冗长且难以导航。

我的代码目前如下所示：

```
...
property bb_3_4_p; 
  @(posedge clk)
     bb_seq  
     |=>     
     bb_exp [3][4] == bb_rtl [3][4] ;
endproperty

property bb_3_5_p; 
  @(posedge clk)
     bb_seq  
     |=>     
     bb_exp [3][5] == bb_rtl [3][5] ;
endproperty

property bb_3_6_p; 
  @(posedge clk)
     bb_seq  
     |=>     
     bb_exp [3][6] == bb_rtl [3][6] ;
endproperty
...

...
assert_bb_3_4: assert property (bb_3_4_p);
assert_bb_3_5: assert property (bb_3_5_p);
assert_bb_3_6: assert property (bb_3_6_p);
... 
```

这就是我希望我的代码看起来像的样子：

```
for (int i = 0; i < 8; i++) 
  for (int j = 0; j < 8; j++) 
  begin   
     property bb_[i]_[j]_p;
        @(posedge clk)
           bb_seq  
           |=>     
           bb_exp [i][j] == bb_rtl [i][j] ;
     endproperty
     assert_bb_[i]_[j]: assert property (bb_[i]_[j]_p);
  end 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-18T18:11:40.090

您可以尝试使用端口声明该属性，以便可以将其重用于多个断言。然后使用生成循环声明您的断言。

```
module
...
property prop1(signal1,signal2); 
  @(posedge clk)
     bb_seq  
     |=>     
     signal1 == signal2 ;
endproperty
...
generate
for (genvar i = 0; i < 8; i++) 
  for (genvar j = 0; j < 8; j++) 
    begin : assert_array
    assert property (prop1(bb_exp[i][j],bb_rtl[i][j]));
    end
endgenerate
... 
endmodule 
```

您还可以在断言中内联该属性：

```
module
...
generate
for (genvar i = 0; i < 8; i++) 
  for (genvar j = 0; j < 8; j++)
    begin : assert_array
    assert property (@(posedge clk) bb_seq |=> bb_exp[i][j] == bb_rtl[i][j]);
    end
endgenerate
...
endmodule 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-23T12:34:54.320

您也可以使用宏尝试相同的操作。

```
/*Start of macro*/
`define bb_prop(Num1, Num2) \
    property bb_``NUM1``_``NUM2``_p; \
      @(posedge clk) \
      bb_seq |=> bb_exp [``NUM1``` ][``NUM2``] == bb_rtl [``NUM1``` ][``NUM2``]; \
    endproperty \
 bb_prop_``NUM1``_``NUM2``_assert: assert property (bb_``NUM1``_``NUM2``_p) 
/* End of macro*/

`bb_prop(3,4) 
`bb_prop(3,5)
`bb_prop(3,6) 
```

# c# - 两个列表框，javascript中的一个选择

> ID：12929889
> 
> 赞同：5
> 
> 时间：2012-10-17T08:12:51.003
> 
> 标签：c#, javascript, asp.net, listbox

我正在使用 asp.net (C#)，我需要你的帮助。

我有两个列表框，一个是从数据库中获取公司列表（lstCompanies），另一个是供用户过滤该公司（lstFilter）。

当用户从两个列表框中选择并提交时，就会出现问题！所以我需要在 JAVASCRIPT 中执行以下操作：

当用户从 lstCompanies 中选择时，检查是否选择了 lstFilter；我需要为他清除选择。反之亦然！

必须是JS才能避免回发，我被迫在IE中运行这个webapp。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T08:22:03.730

遍历一个循环并取消全选

```
for(i=0; i<document.form1.lstFilter.options.length; i++)
{
    document.form1.lstFilter.options[i].selected = false;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T08:27:49.607

在 lstCompanies 的 change 事件中使用它

```
document.getElementById("lstFilter").selectedIndex = -1; 
```

# r - 在 read.zoo 中使用 Fun 更改日期格式

> ID：12929891
> 
> 赞同：3
> 
> 时间：2012-10-17T08:12:58.990
> 
> 标签：r, csv, for-loop, zoo

我尝试使用此代码通过 read.zoo 读取多个 CSV 文件，但我遇到了问题。方向不同，所以我用`file.path()`. 问题是：原始文件中的 Date.Time 有 Date `format= "%m/%d %HH:%MM:%SS"`，我需要在函数`"%Y/"`之前或内部添加`read.zoo()`。我怎么能这样做？我尝试使用子函数，但我需要一个参数。哪一个？是否有可能绕过这个问题？

```
library(zoo)
for(i in Dir1){
   filepath <- file.path(paste(i,".csv",sep=""))
   #f<-function(x) sub("([[:print:]]{15})$", "2005/\\1",x)
   dat<-read.zoo(filepath,header=TRUE,sep=",",
                 FUN = function(x) sub("([[:print:]]{15})$", "2005/\\1"))
   filenames <- substr(filepath,122,155)
   names <-substr(filenames,1,21)
   assign(names, dat)
}

   Some of my data:
   Date.time,Outdoor Dry Bulb [C],Outdoor Relative Humidity [%],Air Temperature [C],Surface Temperature [C]
   01/01  00:03:00,0.0,50.,23.,16.3588068633603
   01/01  00:06:00,0.0,50.,23.,16.1696661072302
   01/01  00:09:00,0.0,50.,23.,13.8864861630478 
   01/01  00:12:00,0.0,50.,23.,13.006618496734
   01/01  00:15:00,0.0,50.,23.,12.5542552024807 
   01/01  00:18:00,0.0,50.,23.,11.6201669301972 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T12:08:01.293

我认为您想从 R 的角度考虑这一点，并将`paste()`字符串放在一起，而不是使用正则表达式，这在这里有点矫枉过正。例如：：

```
f <- function(x, format) {
    as.POSIXct(paste0("2005/", as.character(x)), format = format)
} 
```

然后调用为：

```
read.zoo(filepath, format = "%Y/%m/%d %H:%M:%S", header=TRUE,
         sep=",", FUN = f) 
```

## 的解释`f()`

为了解释`f()`，请注意`read.zoo()`将从读入的文件中传递`FUN`列`index.column`。这将是一个字符向量或一个包含文件数据的因子（取决于使用的设置）。`as.character(x)`所以我们可以通过(`x`是我们用来引用 ) 中的数据来强制转换字符`index.column`。接下来，我们将字符串粘贴到文件列中的`"2005/"`数据上。我根据需要使用它，这是一种快速的方法。`index.column``x``paste0()``paste(...., sep = "")`

最后阶段是将生成的字符向量转换为适合 R 的 DateTime 类。我`as.POSIXct()`用于此目的。`read.zoo()`确保将`format`参数传递给，`FUN`以便我们可以使用我们的`f()`，并将其传递给函数的`format`参数，`as.POSIXct()`以便它了解我们传递给它的日期时间信息的结构。

## 示例用法

这是一个例子：

```
set.seed(1)
dat <- data.frame(Index = seq(Sys.time(), by = "2 hours", length = 50),
                  Data  = rnorm(50))
dat <- transform(dat, Index = strftime(Index, format = "%m/%d %H:%M:%S"))
head(dat)

> head(dat)
           Index       Data
1 10/17 12:53:35 -0.6264538
2 10/17 14:53:35  0.1836433
3 10/17 16:53:35 -0.8356286
4 10/17 18:53:35  1.5952808
5 10/17 20:53:35  0.3295078
6 10/17 22:53:35 -0.8204684

## write to file
write.csv(dat, file = "mydata.csv", row.names = FALSE) 
```

好的，现在假设这`mydata.csv`是您的数据文件，使用`read.zoo()`上面的函数和用户函数读取它`f`：

```
myzoo <- read.zoo("mydata.csv", format = "%Y/%m/%d %H:%M:%S",
                  header = TRUE, sep = ",", FUN = f)
head(myzoo) 
```

这使：

```
> head(myzoo)
2005-10-17 12:53:35 2005-10-17 14:53:35 2005-10-17 16:53:35 2005-10-17 18:53:35 
         -0.6264538           0.1836433          -0.8356286           1.5952808 
2005-10-17 20:53:35 2005-10-17 22:53:35 
          0.3295078          -0.8204684 
```

# python - Django Facebook 超时

> ID：12929892
> 
> 赞同：0
> 
> 时间：2012-10-17T08:13:04.683
> 
> 标签：python, django, django-facebook

由于我更新到 django facebook 的最新版本，我收到此错误：

```
TypeError at /facebook/connect/
open() got an unexpected keyword argument 'timeout' 
```

这是完整的引用：

```
File "/usr/lib/python2.5/site-packages/django/core/handlers/base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/usr/lib/python2.5/site-packages/django/views/decorators/csrf.py" in wrapped_view
  77\.         return view_func(*args, **kwargs)
File "/usr/lib/python2.5/site-packages/django_facebook/decorators.py" in _wrapped_view
  92\.                 get_persistent_graph(request, redirect_uri=current_uri)
File "/usr/lib/python2.5/site-packages/django_facebook/api.py" in get_persistent_graph
  62\.         graph = get_facebook_graph(request, *args, **kwargs)
File "/usr/lib/python2.5/site-packages/django_facebook/api.py" in get_facebook_graph
  161\.                             code, redirect_uri=redirect_uri)
File "/usr/lib/python2.5/site-packages/open_facebook/api.py" in convert_code
  251\.         response = cls.request('oauth/access_token', **kwargs)
File "/usr/lib/python2.5/site-packages/open_facebook/api.py" in request
  75\.         response = cls._request(url, post_data)
File "/usr/lib/python2.5/site-packages/open_facebook/api.py" in _request
  110\.                                                 timeout=timeout)

Exception Type: TypeError at /facebook/connect/
Exception Value: open() got an unexpected keyword argument 'timeout' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T09:36:39.030

我已经通过从这里删除超时参数来“修复”这个问题：

/usr/lib/python2.5/site-packages/open_facebook/api.py

超时参数就在评论的正下方，说这个参数可以被旧的 python 版本省略。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T09:25:26.687

认为您应该尝试升级您正在使用的 Python 版本（或者更好的是，使用 virtualenv！）

看起来您使用的是相当旧的 Python 2.5，所以您可能会收到该错误，因为该库依赖于可能在 2.6 或 2.7 等中添加的 timeout= 关键字参数。

From `https://github.com/tschellenbach/Django-facebook/blob/master/open_facebook/api.py#L92`, 看起来像它在 urllib2.OpenerDirector 上调用 open()，所以可能在某个时候在那里添加了超时关键字 arg ^

# html - 如何将文本放入选项卡 - Zen Coding

> ID：12929897
> 
> 赞同：11
> 
> 时间：2012-10-17T08:13:22.277
> 
> 标签：html, emmet

随着`ul>li*3`我实现

```
 <ul>
                <li></li>
                <li></li>
                <li></li>
            </ul> 
```

但我想要的是这样的：

```
 <ul>
                <li>Value</li>
                <li>Value</li>
                <li>Value</li>
            </ul> 
```

如何使用 Zen Coding 制作它？还有一件事 - 我可以列出不同的值，使它变成这样：

```
 <ul>
                <li>Value</li>
                <li>Another Value</li>
                <li>Last Value</li>
            </ul> 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-19T19:51:07.860

对于第一种情况，您可以使用此缩写：`ul>li{Value}*3`— 您可以使用花括号将文本插入元素中。

但是，要执行第二种情况，您只能这样做：`ul>li{Value}+li{Another Value}+li{Last Value}`，现在无法仅列出多个元素的值。

但是，如果唯一不同的是数字（如 Joonas 的示例中），您仍然可以轻松实现它：`ul>li{Line $}*3`- 当使用乘数时，您可以`$`在属性或缩写的文本节点中使用它们，它们将转换为元素的计数器.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T08:25:40.813

我不确定我确切地知道你的意思，但你可以写：

```
Line 1
Line 2
Line 3 
```

...然后，您应该首先选择这些行，然后将*'wrap with abbreviation'*与此 zencode: 一起使用`ul>li*`，这将产生：

```
<ul>
    <li>Line 1</li>
    <li>Line 2</li>
    <li>Line 3</li>
</ul> 
```

* * *

Zen 编码维基：

[http://code.google.com/p/zen-coding/wiki/Actions#Wrap_with_Abbreviation](http://code.google.com/p/zen-coding/wiki/Actions#Wrap_with_Abbreviation)

# php - SELECT DISTINCT 返回所有值

> ID：12929899
> 
> 赞同：2
> 
> 时间：2012-10-17T08:13:38.190
> 
> 标签：php, jquery, mysql, sql

我有问题`SQL SELECT DISTINCT`，和 PHP/jQuery。我正在使用自动完成功能，它正在工作，但不像预期的那样。我有一些行的数据库：

```
Lukoil..
Lukoil..
Statoil..
Statoil..
Statoil..
Neste..
Neste.. 
```

我有 SQL 查询：

```
SELECT DISTINCT name FROM poi_example WHERE name LIKE '%$text%' ORDER BY name ASC 
```

但是当我在搜索输入中输入名称时，我没有得到不同的值：

![在此处输入图像描述](../Images/ad7cfe343d5593e0d78d8239d551cb98.png)

所以我需要你的报价怎么办，

数据库输出：

```
INSERT INTO `poi_example` (`id`, `name`, `description`, `lat`, `lon`, `city`, `rajonas`) VALUES
(24, 'Statoil', 'VeiveriÅ³ pl. 49a, Kaunas   tel.: 8-37 39 10 62   DegalinÄ—s darbo laikas VisÄ… parÄ…  PlovyklÅ³ darbo laikas: VisÄ… parÄ…', '54.88111', '23.89360', 'Kaunas', 'Aleksotas'),
(25, 'Statoil', 'Karaliaus Mindaugo pr.34a, Kaunas   tel.: 8-37 42 37 29      DegalinÄ—s darbo laikas VisÄ… parÄ…  PlovyklÅ³ darbo laikas: VisÄ… parÄ…', '54.89398', '23.91332', 'Kaunas', 'Naujamiestis'),
(26, 'Statoil', 'TvirtovÄ—s al. 33A, Kaunas  tel.: 8-37 33 71 53      DegalinÄ—s darbo laikas VisÄ… parÄ…', '54.91333', '   23.92631', 'Kaunas', 'Å½aliakalnis'),
(27, 'Lukoil', 'Darbo laikas: 00-24', '54.77708', '     24.11988', 'Kaunas', 'PetraÅ¡iÅ«nai'),
(28, 'Lukoil', 'Darbo laikas: 06-22', '54.85523', '     24.44175', 'KaiÅ¡iadiorys', 'Autostrada'),
(32, 'Neste', 'Dirba visÄ… parÄ… 24/7', '55.665701', '21.175737', 'KlaipÄ—da', 'KlaipÄ—dos'),
(33, 'Neste', 'Dirba 24/7', '55.948191', '25.588700', 'RokiÅ¡kis', 'RokiÅ¡kio'); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T08:19:03.053

您可以尝试使用聚合函数。

```
SELECT name
FROM poi_example
WHERE name LIKE '%$text%'
GROUP BY name
ORDER BY name ASC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T08:39:11.387

很明显，问题出在您的应用程序上。一个 distinct 不会返回重复值，特别是因为您说该查询适用于您的数据库。

你确定你正在执行那个确切的查询吗？也许如果您发布一些代码，我们可以帮助您

# iphone - 故事板中共享工具包实施期间的错误

> ID：12929901
> 
> 赞同：0
> 
> 时间：2012-10-17T08:13:52.577
> 
> 标签：iphone, objective-c, storyboard

我已经`share kit`在 iPhone 应用程序中实现了次数。但这次我使用`storyboard`概念制作了我的 iPhone 应用程序并添加了共享工具包。Facebook 工作正常，但是当我要点击 twitter 时，它会显示指示器并崩溃并显示以下消息，即

```
-[ViewController modalViewController]: message sent to deallocated instance 0xaa7eb50 
```

我第一次使用情节提要，我对此不太了解。如果有人对此错误有任何想法，请给我一些解决方案。

谢谢大家。

# php - php从一个表循环然后从另一个表循环

> ID：12929904
> 
> 赞同：0
> 
> 时间：2012-10-17T08:14:06.787
> 
> 标签：php, while-loop

我尝试搜索，但没有找到我问题的好答案。我有以下循环代码：

```
<?php
$i=0;
while ($i < $num) {

$f0=mysql_result($sql,$i,"id");
$f1=mysql_result($sql,$i,"title");
$f2=mysql_result($sql,$i,"post");
?>

<p><?php echo $f1; ?></p>
<p><?php echo $f2; ?></p>
<p>Categories:</p>

<?php
$i++;
}
?>

<?php
$i=0;
while ($i < $num1) {
$f3=mysql_result($sql1,$i,"category");
?>

<?php echo $f3; ?>

<a href="edit.php?id=<?php echo $f0; ?>"><button>Edit</button></a>

<?php
$i++;
}
?> 
```

问题是它只循环到`<p>Categories</p>`. 它不会循环类别和编辑部分，即`$f3`变量和编辑按钮。类别表是一个单独的表，因此我设置了一个`$sql1`与帖子表不同的查询 ( )。如何将这些部分包含在循环中，以便它们显示在每个帖子中？我尝试将`$i++`零件移到底部，但这只是无限地向我展示了相同的帖子。感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T08:20:51.023

嵌入式循环

```
<?php
  $i=0;
  while ($i < $num) {

    $f0=mysql_result($sql,$i,"id");
    $f1=mysql_result($sql,$i,"title");
    $f2=mysql_result($sql,$i,"post");
?>

    <p><?php echo $f1; ?></p>
    <p><?php echo $f2; ?></p>
    <p>Categories:</p>

<?php
    $j=0;
    while ($j < $num1) {
      $f3=mysql_result($sql1,$j,"category");
      echo $f3; 
      $j++;
}
?>

<a href="edit.php?id=<?php echo $f0; ?>"><button>Edit</button></a>

<?php
$i++;
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T16:52:54.357

乌丹的回答是正确的，但由于某种原因，我没有为每个帖子循环遍历我的类别。我决定使用不同的循环并让它工作。在这里发帖以防其他人有同样的问题。

```
echo "<h2>Posts</h2>";
$sql = mysql_query("SELECT id, title, post FROM posts") or die(mysql_error());
while ($test = mysql_fetch_array($sql)) {?>
<table><tr><td><input type="hidden" name="id" value="<?php echo $test['id']; ?>" /></td></tr>
<tr><td><?php echo $test['title']; ?></td></tr>
<tr><td><?php echo nl2br($test['post']); ?></td></tr></table>
<?php
echo "Categories:";
$sql1 = mysql_query("SELECT categories.* FROM categories INNER JOIN post_category ON categories.id=post_category.cat WHERE post_category.post='".$test['id']."'") or die(mysql_error());
while ($test1 = mysql_fetch_array($sql1)) {?>
<table><tr><td><?php echo $test1['category']; ?></td></tr></table>
<?php
}
?>
<a href="edit.php?id=<?php echo $test['id']; ?>"><button>Edit</button></a>
<?php
}
?> 
```

# lucene - 保护某些短语以供搜索

> ID：12929905
> 
> 赞同：0
> 
> 时间：2012-10-17T08:14:11.343
> 
> 标签：lucene, elasticsearch

我目前正在尝试改进我的弹性搜索结果的极端情况。一个特别让我头疼的是：“google+”被简单地简化为“google”。省略特殊字符通常很好，但对于这个我想要一个例外。任何想法如何实现这一目标？

我尝试了以下设置：

```
{
  "index": {
    "analysis": {
      "analyzer": {
        "default": {
          "tokenizer": "standard",
          "filter": [
            "synonym",
            "word_delimiter"
          ]
        }
      },
      "filter": {
        "synonym": {
          "type": "synonym",
          "synonyms_path": "analysis/synonym.txt"
        },
        "word_delimiter": {
          "type": "word_delimiter",
          "protected_words_path": "analysis/protected.txt"
        }
      }
    }
  }
} 
```

protected.txt 包含一行 google+

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T09:03:06.613

我猜[标准标记](http://www.elasticsearch.org/guide/reference/index-modules/analysis/standard-tokenizer.html)器正在剥离`+`from `google+`。您可以使用[分析 api](http://www.elasticsearch.org/guide/reference/api/admin-indices-analyze.html)检查它。我会改用[Whitespace 标记](http://www.elasticsearch.org/guide/reference/index-modules/analysis/whitespace-tokenizer.html)器并正确配置您已经在使用的[Word 分隔符标记过滤器。](http://www.elasticsearch.org/guide/reference/index-modules/analysis/word-delimiter-tokenfilter.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T05:11:43.417

我认为模式替换会是一个更好的主意 - [http://www.elasticsearch.org/guide/reference/index-modules/analysis/pattern_replace-tokenfilter.html](http://www.elasticsearch.org/guide/reference/index-modules/analysis/pattern_replace-tokenfilter.html)

# php - 重新加载后如何在帐户页面上保留当前选择的选项？

> ID：12929906
> 
> 赞同：0
> 
> 时间：2012-10-17T08:14:11.250
> 
> 标签：php

我有一个网站，您可以在其中为您的个人资料选择背景，以便每个人都可以看到。

我的代码是：

```
 <li>
      Background:<br />
      <select name="bg">
          <option value="css/halloween.gif">None</option>
          <option value="http://images2.layoutsparks.com/1/165464/baby-dragon-purple-lightning.jpg">Purple Lightning</option>
          <option value="http://c.editingmyspace.com/files/en/backgrounds/valentines.day.backgrounds/valentines_day_background_032.jpg">Valentines</option>
      </select>
  </li> 
```

我知道如何发布它，但我也需要它保持当前选中状态。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T08:17:14.680

您可以在选择更改时将用户选择的背景存储在数据库中，并在用户登录时检索它。要在登录会话期间保留背景，您应该将值存储在会话或 cookie 中并删除 cookie当用户注销时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T08:17:17.130

您必须查看[PHP 会话](http://php.net/manual/en/features.sessions.php)。

# groovy - 如何访问内存数据库中的数据？

> ID：12929908
> 
> 赞同：3
> 
> 时间：2012-10-17T08:14:14.450
> 
> 标签：groovy, h2

我在 groovy中创建了一个`in-memory database`使用。`H2`我也成功地在其中添加了数据。现在，我想在我的程序中某处访问该数据库中的数据，例如在 a 中`service`，但我无法访问。我尝试使用 findAll()、getAll() 方法，但没有返回任何内容，尽管数据库有内容。

我该如何解决这个问题？请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-17T14:45:28.430

如果您在 groovy 中使用 h2 数据库，您可能希望通过[`groovy.sql.Sql`](http://groovy.codehaus.org/api/groovy/sql/Sql.html)接口通过 JDBC 访问它。例如：

```
@GrabConfig(systemClassLoader=true)
@Grab(group='com.h2database', module='h2', version='1.3.168')

import groovy.sql.Sql

def sql = Sql.newInstance("jdbc:h2:mem:db1", "sa", "sa", "org.h2.Driver")
println sql.rows("select * from MY_TABLE") 
```

# testing - fluent webdriver初始化正确吗？

> ID：12929914
> 
> 赞同：0
> 
> 时间：2012-10-17T08:14:37.537
> 
> 标签：testing, selenium, webdriver

[这是我的问题测试偶尔导致错误](https://stackoverflow.com/questions/12911244/test-causing-error-occasionally)的后续行动。我初始化我的驱动程序

```
public class TestSuite {

public static WebDriver driver;

@BeforeClass
public static void setUpClass() {
    driver = new FirefoxDriver();

}

public class FluentDriver extends TestSuite {

public static WebElement fluentWait(final By locator) {
    Wait<WebDriver> wait = new FluentWait<WebDriver>(driver)
            .withTimeout(300, TimeUnit.SECONDS)
            .pollingEvery(50, TimeUnit.SECONDS)
            .ignoring(NoSuchElementException.class);

    WebElement element = wait.until(
            new Function<WebDriver, WebElement>() {

                public WebElement apply(WebDriver driver) {
                    return driver.findElement(locator);
                }
            });
    return element;
} 
```

; }

但这不处理页面上肯定存在的脚本，但我无法访问它的源代码。

```
 FluentDriver.fluentWait(By.id("id")).click();
    FluentDriver.fluentWait(By.xpath("//a[starts-with(@href,'/problematic_url.html')]")).click();
    FluentDriver.fluentWait(By.className("green_true")).click(); 
```

单击“id”会拉出一个子菜单，其中有问题的 url。在网页源 (Ctrl+U) 上，url 一直存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T09:31:19.107

我通过在驱动程序上添加启用 Firefox 配置文件的 Javascript 来完成这项工作。然后我使用 FluentDriver 解决方案。它大部分时间都有效。

# javascript - 为什么JS在表单标签之间不执行？

> ID：12929916
> 
> 赞同：1
> 
> 时间：2012-10-17T08:14:48.453
> 
> 标签：javascript, forms, input, element

```
<script type="text/javascript">
window.onload = init;

function init() { //wait for load and watch for click
    var button = document.getElementById("searchbutton");
    button.onclick = handleButtonClick;
}

function handleButtonClick(e) { //get user input and go to a new url
    var textinput = document.getElementById("searchinput");
    var searchterm = textinput.value;
    window.location.assign("http://google.com/example/" + searchterm)
}
</script>

<form>
    <input type="text" name="search" id="searchinput">  
</form>
<input type="submit" value="Ara" id="searchbutton"> 
```

在此代码块中，它获取用户输入并使用用户输入转到新的 url。

如果我将最后一行移到表单元素中，它将不起作用。但我使用 id 来查找元素。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T08:39:36.647

您可以按照下面的代码片段中的说明指定 OnSubmit，它将起作用。

```
<form method="GET" onsubmit="handleButtonClick(event)"> 
    <input type="text" name="search" id="searchinput">  
</form>

function handleButtonClick(e) { 

    var textinput = document.getElementById("searchinput");
    var searchterm = textinput.value;
    window.location.assign("http://google.com/example/" + searchterm)
    return false;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T08:19:04.290

我怀疑这是因为您的`submit`按钮正在提交表单。

`e.preventDefault();`将和添加`return false;`到您的代码中。

```
function handleButtonClick(e) { //get user input and go to a new url
    e.preventDefault();
    var textinput = document.getElementById("searchinput");
    var searchterm = textinput.value;
    window.location.assign("http://google.com/example/" + searchterm)
    return false;
} 
```

这应该会阻止表单提交跨浏览器。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-17T08:21:39.863

代替

```
<input type="submit" value="Ara" id="searchbutton"> 
```

使用这个（[MDN 文档](https://developer.mozilla.org/en-US/docs/HTML/Element/button)）

```
<button type="button" id="searchbutton">Ara</button> 
```

您的按钮用作表单提交按钮，因此它不仅会执行 JavaScript，还会尝试提交表单，该表单指向脚本本身。通过使用`<button type="button">`，您可以定义一个没有任何提交功能的单纯按钮。

此外：如果你不需要周围的`<form>`元素，为什么不把它从代码中删除呢？

# mongodb - MongoDB 中的默认 Fetch 组 - dataneucleus

> ID：12929918
> 
> 赞同：0
> 
> 时间：2012-10-17T08:14:54.230
> 
> 标签：mongodb, lazy-loading, jdo, datanucleus

我使用 datanucleus 和 MongoDB 来存储我的对象。我检测到延迟加载的问题。

我班上的一个是：

```
 public class Member  implements Serializable{
            private static final long serialVersionUID = 1L;
            @PrimaryKey
            @Persistent(defaultFetchGroup = "true", valueStrategy = IdGeneratorStrategy.IDENTITY)
            private String key;

            private String username; 
            @Persistent(defaultFetchGroup="true",dependent="true")
            private Parameter param = null;
    } 
```

检索此对象的代码是：

```
 Transaction tx = pm.currentTransaction();
    tx.begin();
    Member member = pm.getObjectById(Member.class,"MyID");
    tx.commit();
    //if I check here, the field "param" is null. 
```

当我检查时，“参数”字段为空。但是，我将元数据设置为默认加载参数。也许驱动程序 MongoDB-JDO 不支持元数据“defaultFetchGroup”。

你能告诉我会发生什么吗？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T10:54:11.923

“这里”（事务之外）的情况完全取决于[对象生命周期](http://www.datanucleus.org/products/accessplatform_3_1/jdo/object_lifecycle.html)以及您启用了哪些持久性选项。该链接定义了它。对象可能是空心的，因此字段已被卸载并且您没有设置“datanucleus.RetainValues”

# iphone - 为什么显示此错误消息“Command /Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin/clang failed with exit code 1”

> ID：12929922
> 
> 赞同：1
> 
> 时间：2012-10-17T08:15:16.773
> 
> 标签：iphone, objective-c, xcode

我正在尝试将 tesseract 集成到我的应用程序中。当我运行我的应用程序时，它显示如下。如果我删除 tesseract 文件，则应用程序很好，没有错误。可能是什么问题？

显示的错误是：

> ld：/Lutful Kabir/Project/Business Card Reader/DBZiCardReader/DBZiCardReader/build_dependencies/dependencies/lib/libtesseract_all.a(svpaint.o) 和/Users/foyzulkarim/Library/Developer/Xcode/DerivedData/DBZiCardReader-中的重复符号_main awawphfeoprlwqgcmoohhievukcx/Build/Intermediates/DBZiCardReader.build/Debug-iphonesimulator/DBZiCardReader.build/Objects-normal/i386/main.o for architecture i386 Command /Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin/clang++ 失败并退出代码 1

如何删除此错误消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T08:37:51.527

clang 找到了 2 个 _main 符号。

*   libtesseract_all.a 内的 svpaint.o 中的一个
*   一个在你的 main.m 文件中

libtesseract 要么希望您有一个依赖于它们在 svpaint.o 中的 main 的项目（并且可能有一些关于此效果的说明），或者它希望您不要导入任何会导致 svpaint.o 必须包含在内的东西作为链接的一部分（也许您正在导入像 svpaint.h 之类的 libtesseract 标头……或导入导入它的东西……这仅作为他们使用其库的示例之一……）

# ios - 应用于 UIImagePickerController 的正确 cameraViewTransform 是什么？

> ID：12929929
> 
> 赞同：3
> 
> 时间：2012-10-17T08:16:01.627
> 
> 标签：ios, uiimagepickercontroller, camera-overlay

我正在尝试在`UIImageCameraPickerController`. 为了避免底部的空白，我知道我必须`1.24299`在 Y 轴上应用比例变换。

为什么会有这个值？这个值在 iPhone 5 中是否正确？我可以考虑屏幕高度而不是硬编码来计算该值吗？

谢谢你。

# installation - 在自定义对话框中编辑上下文菜单（选择树）？

> ID：12929930
> 
> 赞同：0
> 
> 时间：2012-10-17T08:16:10.360
> 
> 标签：installation, wix, windows-installer, wix3.5

如何在自定义对话框中编辑上下文菜单（选择树）？

我不想显示“整个功能将安装在本地硬盘上”选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T10:56:09.697

您无法删除此选项。它会在您的功能具有子功能时显示，并允许选择所有子功能进行安装以及当前选择的（父）功能，而无需单击每个子功能。

另请参阅我对[如何隐藏功能选项](https://stackoverflow.com/q/12938627/572834)[的回答](https://stackoverflow.com/a/12987421/572834)。

# java - 如何使用 FTP 协议继续读取 InputStream

> ID：12929931
> 
> 赞同：1
> 
> 时间：2012-10-17T08:16:09.740
> 
> 标签：java, ftp, inputstream, skip, bufferedinputstream

我正在学习 Java OOP。我的程序通过 FTP 下载文件。我想在重新启动时继续下载。这是我的代码：

```
URL urlName = new URL(url);
URLConnection con = urlName.openConnection();
BufferedInputStream in = new BufferedInputStream(con.getInputStream());

int i = 0;
long downloadedSizeKB;
System.out.println("before skip");
long k = in.skip(counter);
System.out.println(k);
byte[] bytesIn = new byte[1024];
while ((i = in.read(bytesIn)) >= 0) {
    if(counter >= alreadyDownloadedBytes) {
        out.write(bytesIn, 0, i);
        downloadedSizeKB = counter/1024;
        downSize.setText(downloadedSizeKB + " KB downloaded...");

        while(isPaused) {
            downSize.setText(downloadedSizeKB + " KB PAUSED");
            Thread.sleep(1000);                     
        }
    }
    counter += i;
}

in.close(); 
```

起初我尝试阅读它与先前下载的文件的长度一样多，然后从那时开始继续读写。在继续下载之前读取文件需要太多时间（100MB 需要 1-2 分钟）。之后我意识到有一个跳过方法，但我猜它做同样的事情，因为它需要几乎相同的时间。

有没有更快的方法从文件的特定字节开始读取文件？还是我应该以另一种方式做到这一点？或者这是唯一的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T08:36:12.307

您可以使用 apache.commons.net.ftp.FTPClient （在 commons-net.jar 库中）。

您有方法：setRestartOffset(yourOffset)，在检索文件之前使用它，文件数据将从指定的偏移量开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T08:25:17.707

I haven't looked up the full details for FTP, but yes, skip on the input stream will just read the bytes already read. What you need to do is tell the server to only send the bytes you don't have yet.

In HTTP and FTP this is the RANGE header. [This question](https://stackoverflow.com/questions/2538613/is-there-anything-in-the-ftp-protocol-like-the-http-range-header) has the details of how to do this for FTP.

# visual-studio - RC 文件中不同语言部分的资源标识符相同，为什么会这样？

> ID：12929934
> 
> 赞同：1
> 
> 时间：2012-10-17T08:16:13.983
> 
> 标签：visual-studio, winapi, mfc, resource-file

我注意到一个 RC 文件可以有重复的资源（即相同的资源标识符），只要它们位于不同的语言部分。

例如，这在我的 rc 文件中编译没有错误：

```
#define IDS_STRING_001 10001

LANGUAGE LANG_ENGLISH, SUBLANG_DEFAULT
STRINGTABLE
BEGIN
    IDS_STRING_001 "English"
END

LANGUAGE LANG_JAPANESE, SUBLANG_DEFAULT
STRINGTABLE
BEGIN
    IDS_STRING_001 "Japanese"
END 
```

为什么这可能？它是否打算用作本地化的替代方式，而不是使用单独的 DLL 来保存本地化资源？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T08:18:27.017

是的，这是为您的应用程序进行本地化的一种方法。从[这个链接](http://msdn.microsoft.com/en-us/goglobal/bb688160.aspx)：

> 这种方法背后的主要思想是从源代码中分离出资源，创建一个仅资源的 DLL，其中包含所有目标语言的所有本地化资源。同一资源 ID 的多个副本在 RC 文件中定义在不同的语言标签下。在下面的示例中，为法语和英语定义了字符串 ID IDS_ENUMSTRTEST。

# c# - DataTable to List 接线通用方法

> ID：12929935
> 
> 赞同：0
> 
> 时间：2012-10-17T08:16:16.880
> 
> 标签：c#, .net, generic-list, generic-collections

```
 public static List<T> DataTable2List(DataTable dt, int index)
 {
            List<T> lst = new List<T>();
            lst = (from row in dt.AsEnumerable() select Convert.ChangeType(row[0], typeof(T))).ToList();
            return lst;
 } 
```

错误 1 ​​无法将类型“System.Collections.Generic.List”隐式转换为“System.Collections.Generic.List”

如何摆脱错误。而且我不想要函数的通用性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T08:20:01.593

尝试

```
public static List<T> DataTable2List<T>(DataTable dt, int index) where T : IConvertible 
{
    List<T> lst = new List<T>();
    lst = (from row in dt.AsEnumerable() select (T)Convert.ChangeType(row[0], typeof(T))).ToList();
    return lst;
} 
```

> 而且我不想要函数的通用性。

嗯？您想使用通用类型`T`而不使用泛型吗？没门。

# sencha-touch-2 - 将项目列表链接到轮播项目

> ID：12929936
> 
> 赞同：1
> 
> 时间：2012-10-17T08:16:24.573
> 
> 标签：sencha-touch-2

我想将列表链接到另一个视图（轮播布局），例如轮播项目编号。2\. 我应该在这个括号里放什么？

```
 onItemDisclosure: function() {
                    [......]
                } 
```

我想实现类似 carousel.setActiveItem(x) 的东西，其中 x 是我的轮播内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T07:11:18.883

我已经解决了你的问题。可能这对你有帮助。

**应用程序.js**

```
 Ext.application({
            name: "FrontApp",

            models: ["mymodel"],
            stores: ["mystore"],
            controllers: ["FrontAppController"],
            views: ["front","carousel"],

            launch: function () {
                var frontView = {
                    xtype: "frontview"
                };
                var Carousel = {
                    xtype: "carousel"
                };

                Ext.Viewport.add([frontView,Carousel]);//views called by x-type

            }
        }); 
```

**前端.js**

```
 Ext.define("FrontApp.view.front", {
    extend: "Ext.Panel",
    alias: "widget.frontview",

        config: {
            layout: {
                type: 'fit'
            },
            fullscreen: true,
            scrollable: true,
            items: [

            {
                    xtype: 'list',
                    itemId: 'myList',
                    scrollable: false,
                    itemTpl: '{firstName}',
                    store: 'mystore51',
                    onItemDisclosure: true,

            }
            ],
            listeners:
            [

                {
                  delegate: "#myList",
                  event: "disclose",
                  fn: "onListDisclose"
                }

            ]
            },

            onListDisclose: function (list, record, target, index, evt, options) {
                console.log("calling carousel..");
                this.fireEvent("carouselCommand", this,record, target, index, evt, options);

            }

    }); 
```

**轮播.js**

```
 Ext.define('FrontApp.view.carousel', {
extend: 'Ext.carousel.Carousel',
xtype: 'carousel',

config: {

    items: [
        {
            xtype: 'panel',
            html: 'hello1'
        },
        {
            xtype: 'panel',
            html: 'hello2'
        },
        {
            xtype: 'panel',
            html: 'hello3'
        }
    ]
}

 }); 
```

**FrontAppController.js**

```
 Ext.define("FrontApp.controller.FrontAppController", {
        extend: "Ext.app.Controller",
            config: {
                refs: {   
                    frontView: "frontview", 
                    carouselView:"carousel"         
                 },
                control: {
                frontView: { 
                        carouselCommand: "onCarouselCommand"
                     }
                 }
            },
            // Transitions
            slideLeftTransition: { type: 'slide', direction: 'left' },
            slideRightTransition: { type: 'slide', direction: 'right' },

             onCarouselCommand: function (list, record, target, index, e, eOpts) {  
                console.log("onCarouselCommand");
                 var a=this.getCarouselView().setActiveItem(index); // setting the carousel item according to list index.
                 Ext.Viewport.animateActiveItem(a, this.slideLeftTransition);
            },
             // Base Class functions.
            launch: function () {
                this.callParent(arguments);
                console.log("launch");

            },
            init: function () {
                this.callParent(arguments);
                console.log("init");
            }
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T10:04:46.030

```
onItemDisclosure: function(list, record, index) { 

//switch the view to carousel (my main content view) 
Ext.ComponentManager.get('comp').setActiveItem(1); 

//set active item for carousel according to chosen list 
Ext.ComponentManager.get('content').setActiveItem(index); 

} 
```

# c# - 视图模型的可见性不起作用

> ID：12929937
> 
> 赞同：1
> 
> 时间：2012-10-17T08:16:29.877
> 
> 标签：c#, wpf, mvvm, mvvm-light

我有一个带有登录视图模型的登录视图，遇到了一个让我发疯的问题。请注意，我使用的是 MVVM Light。

在视图模型中，我有三个可见性属性，它们应该根据视图模型的状态隐藏视图中的元素。

我的属性长这样，都触发了PropertyChangedEvent：

```
public Visibility ErrorPanelVisibility
public Visibility LoginPanelVisibility
public Visibility LoadingPanelVisibility 
```

绑定看起来像这样（省略边距等）：

```
<Border Visibility="{Binding ErrorPanelVisibility}">
<StackPanel Visibility="{Binding LoginPanelVisibility}">
<StackPanel Visibility="{Binding LoadingPanelVisibility}"> 
```

当用户按下登录按钮时，可见性会通过在视图模型中执行此方法的命令来更改：

```
private void ExecuteLogin()
{
    ErrorPanelVisibility = Visibility.Collapsed;
    LoginPanelVisibility = Visibility.Collapsed;
    LoadingPanelVisibility = Visibility.Visible;

    // This method takes a few seconds to complete.
    Login(errorMessage =>
            {
                if (!String.IsNullOrEmpty(errorMessage))
                {
                    ErrorMessage = errorMessage;

                    ErrorPanelVisibility = Visibility.Visible;
                    LoginPanelVisibility = Visibility.Visible;
                    LoadingPanelVisibility = Visibility.Collapsed;
                }
                else
                {
                    DialogResult = true;
                }
            });
} 
```

问题是面板没有被折叠或在视图中更改为可见，更改不会反映在视图中。当我将可见性设置为可见但未折叠时，PropertyChangedEvent 被触发并且 ErrorPanel 正在工作。

编辑：登录方法：

```
private void Login(Action<string> callback)
{           
    string errorMessage = string.Empty;

    if (SelectedServer == null)
    {
        errorMessage = "Select server."; //TODO: Translate
    }
    else if (String.IsNullOrEmpty(Username) || String.IsNullOrEmpty(Password))
    {
        errorMessage = Resources.WrongUsernameOrPassword;
    }
    else
    {
        try
        {
            // Changed name due to customer information
            IWCFClient wcfClient = WCFClient.GetInstance(); 

            LoginObj loginObj = wcfClient.Login(Username, Password);

            // Removed some cases to simplify, they all set the errorMessage.
            switch (loginObj.LoginStatus)
            {
                case LoginObj.LoginState.AlreadyLogedin:
                    errorMessage = Resources.UserAlreadyLoggedOn;
                    break;
                default:
                    errorMessage = Resources.ErrorOccurred;
                    break;    
            }                
        }
        catch (Exception e)
        {
            errorMessage = e.Message;
        }
    }
    callback(errorMessage);
} 
```

**但是**，如果我将代码更改为此，面板**确实可以工作：**

```
bool login = false;
private void ExecuteLogin()
{
    if (login)
    {
        ErrorPanelVisibility = Visibility.Collapsed;
        LoginPanelVisibility = Visibility.Collapsed;
        LoadingPanelVisibility = Visibility.Visible;
    }
    else
    {
        ErrorPanelVisibility = Visibility.Visible;
        LoginPanelVisibility = Visibility.Visible;
        LoadingPanelVisibility = Visibility.Collapsed;
    }

    login = !login;
} 
```

这里有没有明显的错误，或者任何人都可以找出我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T08:21:22.127

还。我建议您避免在 ViewModels 中使用 UI 类型。尝试使用 bool 值并使用 BoolToVisibilityConverter。

PS 确保为您的控件设置 DataContext。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T09:35:45.797

您正在 UI 线程上完成所有工作，并且面板永远没有机会更新。使用 BackgroundWorker 让您的 UI 保持响应：

[http://msdn.microsoft.com/en-us/library/cc221403(v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/cc221403%28v=vs.95%29.aspx "后台工作者")

它应该更像：

1) 更改一些影响 UI 绑定的属性

2）启动一个工作线程

3) 交还 UI 线程的控制权以允许更新

4) 通过更改一些影响 UI 绑定的属性来响应正在完成的工作线程

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T09:21:31.203

1）你错过了[Binding.Mode](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.mode.aspx)。因此，您必须将 Mode 添加到 xaml 绑定，例如`<Border Visibility="{Binding ErrorPanelVisibility, Mode=OneWay}">`.

2) ViewModel 必须实现[`INotifyPropertyChange`](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx)从自身到 View 的提升。

```
public event PropertyChangedEventHandler PropertyChanged;

// Create the OnPropertyChanged method to raise the event 
protected void OnPropertyChanged(string name)
{
    PropertyChangedEventHandler handler = PropertyChanged;
    if (handler != null)
    {
        handler(this, new PropertyChangedEventArgs(name));
    }
}

public Visibility ErrorPanelVisibility 
{
    get { return this._errorPanelVisibility; }
    set
    {
        if (this._errorPanelVisibility == value)
        {
            return;
        }

        this._errorPanelVisibility = value;
        OnPropertyChanged("ErrorPanelVisibility");
    }
} 
```

我也同意 Dima Martovoi 的观点，您不应该将 View 与 ViewModel 混为一谈。至少有两种方法可以做到这一点，第一种是将与视图相关的代码移动到点击事件，或者您可以使用[Messenger](http://blog.galasoft.ch/archive/2009/09/27/mvvm-light-toolkit-messenger-v2-beta.aspx)将消息`ViewModel`从`View`.

# css - 使用@variable @import 另一个LESS 文件

> ID：12929938
> 
> 赞同：6
> 
> 时间：2012-10-17T08:16:37.927
> 
> 标签：css, variables, import, less

我想使用我的@variable (@variable: "file.less") 将 file.less 导入到 main .less。

我试过这样：

```
@var: 'file.less';
@import @var 
```

或者这样：

```
@import "@var" 
```

或者：

```
@import "@{var}" 
```

但它不起作用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T16:45:30.423

@imports 在@variables 之前处理，所以它不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T21:06:23.493

Check out the beta for LESS 1.4.0\. It should be able to handle variables in @import statements.

[https://github.com/cloudhead/less.js/issues/410](https://github.com/cloudhead/less.js/issues/410)

```
// An example from the issue for this feature:
@theme: winter;
@import "@{theme}/theme.less"; 
```

The beta is available for node via:

```
npm install -g less@beta 
```

Or for the browser at [https://github.com/cloudhead/less.js/blob/master/dist/less-1.4.0-beta.js](https://github.com/cloudhead/less.js/blob/master/dist/less-1.4.0-beta.js)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-17T08:58:27.253

关于什么：

```
@import url(@var); 
```

?

* * *

不，这似乎不起作用。

# css - 如何在css中截断段落行

> ID：12929940
> 
> 赞同：0
> 
> 时间：2012-10-17T08:16:46.740
> 
> 标签：css

> **可能重复：**
> [使用 CSS，使用“...”表示溢出的多行块](https://stackoverflow.com/questions/6222616/with-css-use-for-overflowed-block-of-multi-lines)

有没有办法在css中截断段落的行？例如，我有 7 行段落，我希望它们截断为 3 行。我试过这个：p {溢出：隐藏；文本溢出：省略号；空白：nowrap；宽度：100%；} 但它会形成 1 行被截断

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T08:22:32.400

使用 css 代码作为

```
p{
height: 50px; //depends up on whatever you want
width: 100%
// add your css code
} 
```

# java - 导出到jar后的eclipse项目不起作用

> ID：12929946
> 
> 赞同：0
> 
> 时间：2012-10-17T08:17:10.233
> 
> 标签：java, eclipse, tomcat, noclassdeffounderror

我的 Eclipse 工作空间中有 2 个项目。项目 A：Apache Tomcat 的源代码通过一点编辑[并有一些依赖的 jars]。项目B：一个小项目调用一种方法[项目A的方法的一种方法]。

因此，当我在项目 B 中使用项目 A（添加到 BuildPAth 的项目中）或在项目 A 中测试此方法时，该方法有效。但是当项目 B 使用导出的项目 A 的 jar 文件时不起作用（仅从项目 B 的 BuildPath 中删除项目 A 并添加 A 的 jar 文件）。抛出的异常是：

```
 Exception in thread "main" java.lang.NoClassDefFoundError: org/apache/tools/ant/util/FileUtils
    at org.apache.jasper.JspC.resolveFile(JspC.java:1602)
    at org.apache.jasper.JspC.setOutputDir(JspC.java:863)
    at org.apache.jasper.JspC.setArgs(JspC.java:276)
    at org.apache.jasper.JspC.main(JspC.java:241)
    at jspCompiler.pars(jspCompiler.java:65)
    at jspCompiler.main(jspCompiler.java:100)
    at maintst.main(maintst.java:11)
Caused by: java.lang.ClassNotFoundException: org.apache.tools.ant.util.FileUtils
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    ... 7 more 
```

问题出在哪里？

**编辑**

**维护.java**

```
import jspParser.jspCompiler;
public class maintst { 
  public static void main(String[] args) throws Exception { 
    jspCompiler cmp=new jspCompiler();
    cmp.main(new String[]{"F:\\arshad droos\\Thesis\\secureBranch\\personalblog\\build","F:\\arshad droos\\Thesis\\secureBranch"}); 
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T09:00:10.623

浏览[Apache Tomcat](http://svn.apache.org/repos/asf/tomcat/trunk/java/org/apache/)的代码我找不到 find `org.apache.tools.ant.util.FileUtils`。由于从 Eclipse 运行，这可能意味着**项目 A**在包含此文件的构建路径中有一些 jar。找到它，放入**项目 B**的构建路径中，事情应该可以工作了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T14:05:01.183

Eclipse 有一个名为**plugin的****[fatjar](http://sourceforge.net/projects/fjep/)**。将此jar安装到eclipse插件后（将过去的jar文件复制到eclipse的插件目录）在**Export**菜单中选择jar fat。这样导出的 jar 的大小很大但是**Standalone**。

 ******谢谢你。******

# javascript - Internet Explorer 忽略 Javascript

> ID：12929950
> 
> 赞同：0
> 
> 时间：2012-10-17T08:17:20.313
> 
> 标签：javascript, internet-explorer

我最近一直在尝试在我的网站中包含一个名为“EnlargeIt”的 Lightbox-Clone。除了令人惊讶的是，Intenret Explorer 之外，所有浏览器中的一切都运行良好。让我直接从手册中引用：

> 将您的缩略图像这样集成到您的网页中：

```
<a href=”images/fullsize_file.jpg” target=”_blank” onclick=”return false;”&gt;<img 
src="images/thumb_file.jpg" alt="My first picture" onclick="enlarge(this);" 
longdesc="images/fullsize_file.jpg" /></a> 
```

> 属性 longdescis 用于全尺寸图像的限定文件名，这意味着如果文件位于不同的文件夹中，则必须包含正确的路径（在示例中为 images/）。用于图片标题的属性 altis。如果您不定义它或将其留空，则不会为此图片显示标题（标题栏文本）。在图像周围，有一个…元素链接到新窗口中的全尺寸图像（target=”_blank”）。设置属性 onclick=”return false;”非常重要。这样，如果 Javascript 可用，则不会使用该链接。

我已经完全按照本手册中的说明进行了操作，并且在您使用 IE9 尝试之前它工作正常。你点击它，它会……什么都没有。每个其他浏览器都能正确处理它，甚至是旧版本的 IE。它确实在将鼠标悬停在链接上时显示了链接，但我猜“return false”会阻止默认操作？

我的代码：

```
<a href="fileadmin/templates/HTML/main.html" target="_blank" onclick="return false;"/><img src="fileadmin/templates/images/logo_subline_moreInformation.jpg" style="width: 520px; height: 130px; cursor:pointer;border:none;border-width:0px;text-decoration:none;" alt="Alt" id="Image"
  onclick="enlarge(this);" longdesc="ifr::fileadmin/templates/HTML/main.html::800::600"/></a><br> 
```

谢谢！

哦，祝你有美好的一天！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T08:27:45.230

用谷歌搜索...... Doctype问题？ [http://enlargeit.timos-welt.de/forum/viewtopic.php?p=471&sid=4540aa596fcc5870fe02618e27d374dc](http://enlargeit.timos-welt.de/forum/viewtopic.php?p=471&sid=4540aa596fcc5870fe02618e27d374dc)

# iphone - 如何从视图中隐藏iphone中的标题栏（顶栏）

> ID：12929951
> 
> 赞同：2
> 
> 时间：2012-10-17T08:17:21.017
> 
> 标签：iphone, ios, ipad, titlebar

> **可能重复：**
> [在单个视图中隐藏 iPhone 上的状态栏？](https://stackoverflow.com/questions/8326804/hide-the-status-bar-on-iphone-on-a-single-view)

我想从我的第一个欢迎视图和初始屏幕中隐藏 iphone 中的标题栏，我该如何隐藏它（顶部栏，而不是导航栏）。

我看到一个帖子有这个

```
 [[UIApplication sharedApplication] setStatusBarHidden:YES animated:NO]; 
```

但这隐藏了整个应用程序的标题栏。我只想从第一个视图中隐藏它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T10:26:14.013

隐藏状态栏最简单的方法是进入youInfo.plist；右键单击以添加一行并选择状态栏最初隐藏。

这将确保您每次启动应用程序时，状态栏都会被隐藏。

**编辑**

带编程

```
[[UIApplication sharedApplication] setStatusBarHidden:YES withAnimation:UIStatusBarAnimationNone];
self.navigationController.navigationBar.frame = CGRectMake(0, 0, 320, 44); 
```

当你想显示状态栏时，只需使用下面的代码..

```
[[UIApplication sharedApplication] setStatusBarHidden:NO withAnimation:UIStatusBarAnimationNone];
self.navigationController.navigationBar.frame = CGRectMake(0, 45, 320, 44); 
```

我希望这可以帮助你...

:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T08:35:13.153

在 AppDelegate 类**applicationDidFinishLaunching**中，编写以下代码

```
- (void) applicationDidFinishLaunching:(UIApplication *)application
{
    [[UIApplication sharedApplication] setStatusBarHidden:YES animated:NO];
} 
```

所有其他视图（第一个视图除外）当您需要显示状态栏时，在相应的地方编写以下代码 `ViewDidiLoad() / viewWillAppear`，

```
[[UIApplication sharedApplication] setStatusBarHidden:NO animated:NO]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T09:32:46.703

在您的 info.pist 中找到此选项。“**状态栏最初是隐藏的**”并设置为YES。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T08:25:23.477

Depends which version of Xcode you are using.

In 4.5 you can go into the build settings "Summary" tab and set this in the "Status Bar" section.

If you don't have 4.5 then in the build settings "Info" section add a plist entry for "Status Bar Is Initially Hidden" and set it to YES. (Alternatively, download Xcode 4.5 because you should do this anyway).

# ios - 如何使用 ffmpeg/sdl 在 UIView 中播放视频

> ID：12929953
> 
> 赞同：1
> 
> 时间：2012-10-17T08:17:54.960
> 
> 标签：ios, ffmpeg, sdl, sdl-2

我正在尝试制作一个可以使用 ffmpeg 和 sdl2 播放各种视频格式的视频播放器，并且我需要在 UIView 中显示视频帧。在查看了 SDL api 及其示例后，它找不到解决方法。SDL 用于`SDL_Renderer`将图像渲染到 a`SDL_Window`中，其中包含对 a `UIWindow`（应用程序的主 UIWindow）的引用，而不是特定的`UIView`.

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T04:04:30.303

嗯...这里有很多内容要介绍，但我会尝试的。

我怀疑除了我们之外没有多少开发人员做过这件事。

首先，我不知道任何使用 sdl2 的解决方案，但它肯定可以使用 sdl 1.3 。

[https://github.com/mooncatventures-group/RTSPPlay](https://github.com/mooncatventures-group/RTSPPlay)

注意 app delegate ，它创建了一个视图控制器，它创建了一个 sdl 窗口并启动了播放器。

注意文件夹 uikit，uikit 是 sdl 与 sdl 接口的部分。这里的appdelegate是可以修改的，这个是设置为使用两个windows并在它们之间交换，但是我们也使用了下面的方法来交换views。

```
-(void) swapViews {
    UIWindow *windows = [[UIApplication sharedApplication] keyWindow];
    NSLog(@"the app has %d views ",[windows.subviews count]);
    //toggle_pause();
    UIView *view = [window.subviews objectAtIndex:0];
    [view removeFromSuperview];
    [windows addSubview:view];
}

-(void) swapViewsWithTransition {
    UIWindow *windows = [[UIApplication sharedApplication] keyWindow];
    UIView *firstView = [window.subviews objectAtIndex:0];
    UIView *secondView = [window.subviews objectAtIndex:1];       
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:1];
    [UIView setAnimationTransition:([secondView superview] ? UIViewAnimationTransitionFlipFromRight : UIViewAnimationTransitionFlipFromLeft) forView:firstView cache:YES];
    [firstView removeFromSuperview];
    [windows addSubview:firstView];
    [UIView commitAnimations];

} 
```

前段时间，我在此处的 sdl 论坛上写了一个关于此的主题。

[http://forums.libsdl.org/viewtopic.php?t=7352&sid=6b714337317597eaca026ae6be968b3e](http://forums.libsdl.org/viewtopic.php?t=7352&sid=6b714337317597eaca026ae6be968b3e)

使用这些技术有一些注意事项

RTSPPlay 几乎可以播放任何你扔得好的视频，但是 sdl 事件循环不能很好地与苹果的 runloops 一起播放，tableviews 特别麻烦，它们往往会变得迟缓，如果你编写一个像 rtspplay 这样有 sdl 限制的应用程序，你会得到一个不错的视频播放器，但添加到现有应用程序可能会出现问题。

在同一个 git 中有本地应用程序的示例。工作 sdl 有时可能是一种痛苦的经历，祝你好运

# java - 使用“for循环”创建一个按钮数组并使用里面的值来改变一个布尔数组值

> ID：12929954
> 
> 赞同：3
> 
> 时间：2012-10-17T08:17:54.617
> 
> 标签：java, arrays

（**更新**）对不起，如果这越来越像一个指南。我应该在其他任何网站上发布此内容吗？

我正在制作一个 yatzy 游戏，并且正在学习循环。我的方法类似于此问题中的最佳答案： [for循环中的动态按钮onclick事件](https://stackoverflow.com/questions/10146028/dynamic-button-onclick-event-inside-for-loop) 这是我的代码：（是的，我正在混合语言，对不起）

```
package se.balderskolan.yatzy;

    import java.util.Random;
    import android.os.Bundle;
    import android.app.Activity;
    import android.view.View;
    import android.widget.Button;
    import android.widget.ImageButton;

    public class MainActivity extends Activity {

Button btKasta;
Random r = new Random();
int[] tarningar = new int[5];
int[] bilder = new int [6];
ImageButton [] img= new ImageButton[5];
boolean [] bool = new boolean[5];

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    btKasta = (Button)findViewById(R.id.btKasta);

    bilder [0]=R.drawable.b1; //Pictures of the dices
    bilder [1]=R.drawable.b2;
    bilder [2]=R.drawable.b3;
    bilder [3]=R.drawable.b4;
    bilder [4]=R.drawable.b5;
    bilder [5]=R.drawable.b6;

    img [0] = (ImageButton)findViewById(R.id.imgbt1); //The grafical dices
    img [1] = (ImageButton)findViewById(R.id.imgbt2);
    img [2] = (ImageButton)findViewById(R.id.imgbt3);
    img [3] = (ImageButton)findViewById(R.id.imgbt4);
    img [4] = (ImageButton)findViewById(R.id.imgbt5);

    //The die-buttons (save or not)
    img [0].setOnClickListener(
            new View.OnClickListener() {

                @Override
                public void onClick(View v) {
                    if(bool [0] == false) {
                        bool [0] = true;
                    }

                    else{
                        bool [0] = false;
                    }
                }
            }
            );

    img [1].setOnClickListener(
            new View.OnClickListener() {

                @Override
                public void onClick(View v) {
                    if(bool [1] == false) {
                        bool [1] = true;
                    }

                    else{
                        bool [1] = false;
                    }
                }
            }
            );

    img [2].setOnClickListener(
            new View.OnClickListener() {

                @Override
                public void onClick(View v) {
                    if(bool [2] == false) {
                        bool [2] = true;
                    }

                    else{
                        bool [2] = false;
                    }
                }
            }
            );

    img [3].setOnClickListener(
            new View.OnClickListener() {

                @Override
                public void onClick(View v) {
                    if(bool [3] == false) {
                        bool [3] = true;
                    }

                    else{
                        bool [3] = false;
                    }
                }
            }
            );

    img [4].setOnClickListener(
            new View.OnClickListener() {

                @Override
                public void onClick(View v) {
                    if(bool [4] == false) {
                        bool [4] = true;
                    }

                    else{
                        bool [4] = false;
                    }
                }
            }
            );

    /*I want to replace the code above with something like this below

    for(imgbt=0; imgbt<5; imgbt++){
        img [imgbt].setOnClickListener(
                new View.OnClickListener() {

                    @Override
                    public void onClick(View v) {

                        if(bool [imgbt] == false) {
                            bool [imgbt] = true;
                        }
                        else{
                            bool [imgbt] = false;
                        }

                    }
                }
        );

    }
    */

  //The die-throwing button
    btKasta.setOnClickListener(             
        new View.OnClickListener() {

            @Override
            public void onClick(View v) {

                    for(int i=0; i<5; i++){
                        tarningar [i]=r.nextInt(6);

                        if (bool[i]==false){
                            img [i].setImageResource(bilder [tarningar[i]]);}
                        else{}
                    }                   
                }
            }
    );
}

    } 
```

（我可以补充一点，我已经成功地让 bottons 使用没有 for 循环的代码保存了骰子。）

在对我的代码进行一些研究后，我发现了以下有关按钮循环的信息：

*   “imgbt”的值为 5 在行

    ```
    if(bool [imgbt] == false) 
    ```

    这给了我“ArrayIndexOutOfBoundsException”错误。

*   所有按钮总是改变 bool [5] 的 bool 值（这不存在。我通过增加声明中创建的数组的 nuber 发现了这一点）

如果我声明

```
 int imgbt = 0 
```

在 for-loop eclipse 内部给了我错误：

```
 Cannot refer to a non-final variable imgbt inside an inner class defined in a different method 
```

（有人可以解释这个错误吗？）

所以你知道我的问题的任何解决方案，或者解决它的另一种方法，请不要犹豫！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T08:26:56.120

这与Android并没有太大关系，它是基本的Java。简而言之：

*   数组从索引 0 开始
*   对象数组（例如`Boolean`）默认使用`null`s初始化
*   你需要使两个数组大小相同

所以，

*   从 0 开始你的循环
*   在使用前使用`booolean[]`代替`Boolean[]`或初始化它`Boolean.FALSE``
*   使两个数组大小为 6

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T20:32:42.480

所以你真正的问题是你在一个类中定义一个覆盖时使用了一个可变的、非最终的变量。因此，如果您将代码修改为如下所示：

```
for(imgbt=0; imgbt<5; imgbt++){
    public final someInteger = imgbt;
    img [imgbt].setOnClickListener(
           new View.OnClickListener() {
                @Override
                public void onClick(View v) {
                    if(bool [someInteger] == false) {
                        bool [someInteger] = true;
                    }
                    else{
                        bool [someInteger] = false;
                    }
              }
         }
    );
} 
```

它应该工作得很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T08:25:00.690

You need to instantiate the array, like this:

```
Boolean bool[] = new Boolean[]{false, false, false, false, false, false, false}; 
```

# javascript - 有没有一种方法可以加载模块化 HTML 片段而不必触发每个片段的 http 请求？

> ID：12929955
> 
> 赞同：1
> 
> 时间：2012-10-17T08:17:55.710
> 
> 标签：javascript, jquery, websocket, httprequest, requirejs

我正在使用`requireJS`and开发一个应用程序`jquery/jquery-mobile`。现在我正在尝试优化加载和渲染性能。

假设我的应用程序可以分解为 HTML 片段（例如登录表单），它们出现在每个页面上。我的想法是每次请求新页面时都不要加载代码段。相反，我创建了 HTML 片段（增强标记）的模板版本，并通过`requireJS !text`插件将其拉入。

这工作得很好，所以每个片段都需要一次，然后从缓存中提供服务，因为它已经被渲染，所以在第 1 页之后一切都很顺利。

基本上我可以`atomize`把我的页面变成片段，比如

```
page { content { form { input & button }}} 
```

并仅按需提取片段。虽然这会最小化从服务器加载的内容和渲染时间，但我最终得到了一个`ton of http-requests`.

**问题：**
非常通用，但是......在构建这样的应用程序时，有没有一种方法可以减少 http 请求的数量？我想我认为 websockets 可以用于此，但我不太确定。很想知道，如果有一个很好的方法来做到这一点。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T08:34:21.210

因此，让我直截了当地说：-您尝试使页面加载时间更快因此您将 HTML 文件的内容分解为片段。一些片段，例如
`header/footer/login`表单在每个页面上都很常见，这样您只需加载一次并继续从缓存中呈现它们。
但是第一次加载页面时，由于所有这些代码片段都是单独下载的，所以有很多请求。
如果我得到了所有正确的，这就是我的建议。

我建议在第一个页面加载时，您实际上加载了直接从服务器呈现的整个页面。加载后使用 javascript 添加代码片段可能会很慢。
然后在页面加载时，您可以使用元素选择器将所有呈现的片段的值保存到缓存中。并下载其余的片段。这样，当页面加载时，您有一个（或很少）请求。当页面已经加载时，所有额外的请求都在后台完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T08:33:59.453

您可以使用[RequireJS 优化器](http://www.requirejs.org/docs/optimization.html)来缩小您的 Javascript 文件并将其合并到一个文件中。

# java - Java：PrintWriter(OutputStreamWriter(System.out)) 的 checkError()

> ID：12929958
> 
> 赞同：2
> 
> 时间：2012-10-17T08:18:13.990
> 
> 标签：java

试图改变 System.out 的编码，我创建了一个 PrintWriter

```
PrintWriter out = new PrintWriter(new OutputStreamWriter(System.out, ENCODING));
```

所以

```
out.format("一些文本");
```

编码工作得很好。但

```
out.checkError()
```

当输出流关闭时没有返回真，例如通过 Unix 'head' 命令。

我发现 PrintStream 提供了一个带有编码的构造函数

```
PrintStream out = new PrintStream(System.out, true, ENCODING);
```

并且 checkError() 对这个类工作得很好。

我怀疑 PrintWriter 案例是一个错误，还是我遗漏了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-27T22:24:57.917

不，我也认为这不是一个错误，而是源于一个微妙不同的定义/设计`checkError()`及其基础类：

*   [PrintWriter.checkError()](http://docs.oracle.com/javase/8/docs/api/java/io/PrintWriter.html#checkError--)：

    > `public boolean checkError()`*如果流未关闭*，则 刷新流并检查其错误状态。 *返回：`true`如果打印流遇到错误*，无论是在底层输出流上还是在格式转换期间。

*   并来自[PrintStream.checkError()](http://docs.oracle.com/javase/8/docs/api/java/io/PrintStream.html#checkError--)：

    > `public boolean checkError()`刷新流并检查其错误状态。内部错误状态设置为`true`当底层输出流抛出非`IOException`时`InterruptedIOException`以及`setError`调用方法时。如果对底层输出流的操作抛出`InterruptedIOException`，则通过执行`PrintStream`将异常转换回中断： `Thread.currentThread().interrupt();` 或等效项。返回： `true`当且仅当此流遇到`IOException`非`InterruptedIOException`，或`setError`方法已被调用。

如您所见`PrintStream`， 的`checkError()`定义更为严格，失败可能仍然值得调查。

然后很大程度上取决于您的实际输出控制台（以及它支持的编码。），例如在 Windows 中，您**需要**：

```
chcp 65001 
```

..启用（例如）UTF-8 输出。（[https://stackoverflow.com/a/388500/592355](https://stackoverflow.com/a/388500/592355)，[https://stackoverflow.com/a/10148976/592355](https://stackoverflow.com/a/10148976/592355)，...）

# java - ProgressDialog 和 TabGroup

> ID：12929961
> 
> 赞同：1
> 
> 时间：2012-10-17T08:18:25.413
> 
> 标签：java, android, progressdialog

我创建了一个`ProgressDialog`来显示用户单击按钮的时间。

顺便说一句，我的活动是在一个`Tabgroup`

这是我的代码`ProgressDialog`

```
final ProgressDialog myPd_ring=ProgressDialog.show(MainActivity.this, "Please wait", "Loading please wait..", true);
        myPd_ring.setCancelable(false);
        new Thread(new Runnable() {  
              public void run() {
                    // TODO Auto-generated method stub
                    try 
                    { 
                         //Some data binding here....
                    }catch(Exception e){

                    } 
                    myPd_ring.dismiss();
                    Intent edit = new Intent(getDialogContext(), MerchantActivity.class);
                    TabGroupActivity parentsActivity = (TabGroupActivity)getParent();
                    parentsActivity.startChildActivity("MerchantActivity", edit);
              }
        }).start(); 
```

现在一切正常，直到我使用意图。我收到一个错误

这是我的 LogCat：

```
10-17 16:35:21.429: E/AndroidRuntime(11604): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.mobileoptima.perxclub/com.mobileoptima.perxclub.MerchantActivity}: java.lang.RuntimeException: Can't create handler inside thread that has not called Looper.prepare()
10-17 16:35:21.429: E/AndroidRuntime(11604):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1573)
10-17 16:35:21.429: E/AndroidRuntime(11604):    at android.app.ActivityThread.startActivityNow(ActivityThread.java:1491)
10-17 16:35:21.429: E/AndroidRuntime(11604):    at android.app.LocalActivityManager.moveToState(LocalActivityManager.java:127)
10-17 16:35:21.429: E/AndroidRuntime(11604):    at android.app.LocalActivityManager.startActivity(LocalActivityManager.java:339)
10-17 16:35:21.429: E/AndroidRuntime(11604):    at com.mobileoptima.perxclub.TabGroupActivity.startChildActivity(TabGroupActivity.java:55)
10-17 16:35:21.429: E/AndroidRuntime(11604):    at com.mobileoptima.perxclub.CardsActivity$2.run(CardsActivity.java:318)
10-17 16:35:21.429: E/AndroidRuntime(11604):    at java.lang.Thread.run(Thread.java:1019)
10-17 16:35:21.429: E/AndroidRuntime(11604): Caused by: java.lang.RuntimeException: Can't create handler inside thread that has not called Looper.prepare()

10-17 16:35:21.429: E/AndroidRuntime(11604):    at android.os.Handler.<init>(Handler.java:121)
10-17 16:35:21.429: E/AndroidRuntime(11604):    at android.app.Activity.<init>(Activity.java:680)
10-17 16:35:21.429: E/AndroidRuntime(11604):    at com.mobileoptima.perxclub.MerchantActivity.<init>(MerchantActivity.java:63)
10-17 16:35:21.429: E/AndroidRuntime(11604):    at java.lang.Class.newInstanceImpl(Native Method)
10-17 16:35:21.429: E/AndroidRuntime(11604):    at java.lang.Class.newInstance(Class.java:1409)
10-17 16:35:21.429: E/AndroidRuntime(11604):    at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
10-17 16:35:21.429: E/AndroidRuntime(11604):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1565)
10-17 16:35:21.429: E/AndroidRuntime(11604): 
... 6 more 
```

为什么我会收到这个错误？就我而言，我打电话给父母。请帮忙？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T08:31:05.910

尝试`parentsActivity.startChildActivity("MerchantActivity", edit);`在主 UI 线程上运行。像这样的东西：

```
runOnUiThread(new Runnable() {
    public void run() {
        parentsActivity.startChildActivity("MerchantActivity", edit);
    }
}); 
```

顺便说一句，你将不得不声明`TabGroupActivity parentsActivity`，`Intent edit`至于`final`这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T08:31:33.477

没关系，我找到了我正在寻找的答案。我只是添加它就像魅力一样

```
 runOnUiThread(new Runnable() {
                              public void run() {
                               // Toast.makeText(activity, "Hello", Toast.LENGTH_SHORT).show();
                                Intent edit = new Intent(getParent(), MerchantActivity.class);
                                TabGroupActivity parentsActivity = (TabGroupActivity)getParent();
                                parentsActivity.startChildActivity("MerchantActivity", edit);
                              }
                            }); 
```

# mysql - MySQL 列注释和性能

> ID：12929964
> 
> 赞同：2
> 
> 时间：2012-10-17T08:18:31.627
> 
> 标签：mysql, performance

我必须向数据库表中添加新列，但它的名称相对含糊，我认为对该列的评论将得到完美利用，并且将为开发人员提供良好的洞察力。

但问题是，列注释对 SQL 查询及其性能有什么影响吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T08:20:08.310

不，它们只是对表格结构的额外描述。不要担心模棱两可。`ALIAS`在这里为您提供帮助。

# macos - Mac 上的 Emacs - 如何输入括号、管道、@ 等？

> ID：12929965
> 
> 赞同：1
> 
> 时间：2012-10-17T08:18:36.180
> 
> 标签：macos, emacs

我对我的 Mac 上的 Emacs 很陌生，我在输入以下符号时遇到了麻烦：[]|{}@ 等。相反，迷你缓冲区显示`M-5`，`M-6`或向前跳一个字（`M-l`）。

我想我的 Emacs 在这里：[http](http://emacsformacosx.com/) ://emacsformacosx.com/ 并且我确实安装了这个入门工具包：http: [//kieranhealy.org/emacs-starter-kit.html](http://kieranhealy.org/emacs-starter-kit.html) （但我之前遇到过这个问题）

我知道这个答案：[无法在 emacs 中输入大括号和方括号，](https://stackoverflow.com/questions/3376863/unable-to-type-braces-and-square-braces-in-emacs) 但我还不能让它工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T09:25:08.813

我使用以下内容——它将 Emacs 元键放在 Mac CMD 键上，并释放 ALT 键以供正常 Mac 使用：

```
(if (boundp 'ns-command-modifier)
    (setq ns-command-modifier 'meta))

(if (boundp 'ns-option-modifier)
    (setq ns-option-modifier nil)) 
```

# android - 安卓在线资源浏览器

> ID：12929967
> 
> 赞同：0
> 
> 时间：2012-10-17T08:18:40.273
> 
> 标签：android

您知道我可以在哪里浏览 android 库源代码的任何 Web 应用程序吗？我也有兴趣单独下载一个版本（而不是整个版本）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T08:29:32.217

您可以在 grepcode 上浏览源代码 - [http://grepcode.com/project/repository.grepcode.com/java/ext/com.google.android/android](http://grepcode.com/project/repository.grepcode.com/java/ext/com.google.android/android)

android sdk 还可以选择下载 ICS 转发的源。

# java - Java睡眠的最佳实践？

> ID：12929976
> 
> 赞同：4
> 
> 时间：2012-10-17T08:19:19.220
> 
> 标签：java, sleep

背景：我习惯性地将`Thread.sleep()`调用转换为`TimeUnit.XXX.sleep()`调用，每当我需要触摸包含它的代码时。

问题：首先，这样可以吗，还是TimeUnit的睡眠有一些微妙的问题？然后，据我所知，这是在网络（或类似）操作重试之前等待的最佳方式

```
for(int retriesLeft = 3; ;--retriesleft) {
    try {
        doOperation(...);
        break;
    } catch (IOException ex) {
        if (retryCountDown <= 0) throw ex;
        else TimeUnit.SECONDS.sleep(10);
    }
} 
```

在上面睡觉是`TimeUnit.XXXX.sleep(10)`正确的方法，还是有更好的方法？此外，如果有更好的 Java 模式来处理整个网络操作重试逻辑，请随时发表评论......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T08:23:16.833

[TimeUnit#sleep](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/TimeUnit.html#sleep%28long%29)是“一种将时间参数转换为 Thread.sleep 方法所需形式的便捷方法”。因此，它与您的旧代码没有任何不同。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T08:28:01.157

Thread.sleep() 只接受以毫秒为单位的时间。因此引入了一个辅助类 TimeUnit，它将指定像 SEC、HOURs 这样的单位，这比输入毫秒更方便。它还有助于提高代码的可读性。

检查javadoc：[http ://docs.oracle.com/javase/6/docs/api/java/util/concurrent/TimeUnit.html](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/TimeUnit.html)

# delphi - 使用 delphi 使用一个软件通过多个用户发送数据

> ID：12929978
> 
> 赞同：2
> 
> 时间：2012-10-17T08:19:35.103
> 
> 标签：delphi, sockets, networking, network-programming, delphi-xe2

我希望有人可以帮助我。我正在编写一个软件，用户可以将信息填写到数据库中，但我想安装我在多台计算机上创建的相同软件。当其他用户将新信息插入软件并单击保存时，它必须显示在他/她的计算机上，同时显示在网络中的其他 PC 上。

我认为这是一个难以破解的问题，但我希望有人能帮助我。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T09:07:55.133

有很多方法可以解决这个问题。我建议使用从插入应用程序接收通知的服务器端应用程序（例如安装在数据库服务器系统上）。然后，服务器端应用程序将向客户端发送 UDP 广播或使用 TCP 连接来通知它们。

然后客户端只需要在后台线程中监听服务器消息。消息将从服务器“推送”到客户端。

可以用作起点的一个示例是 Indy Telnet 客户端组件，它具有用于服务器消息的侦听器线程。您不必为传入连接打开客户端防火墙以这种方式工作。

也有完整的消息传递解决方案可用，但也许它们会满足您的要求。如果你喜欢，我可以提供一些链接。

我不会推荐

*   数据库轮询（太昂贵且不灵活）
*   数据库事件（在服务器进程中运行，可能会阻塞操作或崩溃）

* * *

可用于此消息传递系统的标准是**WebSocket**。客户端和服务器端有商业和开源的 Delphi 实现。

# c# - 使用键盘选择列表框项目

> ID：12929984
> 
> 赞同：3
> 
> 时间：2012-10-17T08:20:04.960
> 
> 标签：c#

谁能告诉我当有多个以相同字符开头的项目时，我应该以编程方式做什么才能使用键盘选择列表框中的项目。例如，

*   一
*   二
*   三
*   一次
*   橙子

如果我想通过输入 o,n,c 来关注“Once”，我应该怎么做？而不是从一个项目跳到另一个项目，而不是默认行为。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T08:23:16.927

将 KeyPress 事件处理程序添加到 ListBox 并跟踪按下的键。然后将已键入的完整值与 ListBox 中的项目的值进行比较。如果有匹配项，请选择该项目。

**编辑：**

这是我创建的一个有效的解决方案。我还测量了按键之间的时间。这样，如果两次按键之间的时间超过 1.5 秒，则搜索字符串将被清空并用最后一个搜索字符重新填充。之后就像我说的：找到一个匹配项，如果有匹配项，请选择该项目。这两个私有字段是类级别的字段，用于跟踪最后一次按键的时间，字符串用于存储搜索字符串。

```
private DateTime _lastKeyPress;
private string _searchString;

private void ListBox1KeyPress(object sender, KeyPressEventArgs e)
{
    var newDate = DateTime.Now;
    var diff = newDate - _lastKeyPress;

    if (diff.TotalSeconds >= 1.5)
        _searchString = string.Empty;
    _searchString += e.KeyChar;

    for (var i = 0; i < listBox1.Items.Count; i++)
    {
        var item = listBox1.Items[i].ToString();
        if (item.ToLower().StartsWith(_searchString))
        {
            listBox1.SelectedItem = item;
            break;
        }
    }
    _lastKeyPress = newDate;
    e.Handled = true; //REALLY IMPORTANT TO HAVE THIS
} 
```

这是一个使用 LinQ 来匹配搜索项的示例：

```
private void ListBox1KeyPress(object sender, KeyPressEventArgs e)
{
    var newDate = DateTime.Now;
    var diff = newDate - _lastKeyPress;
    if (diff.TotalSeconds >= 1.5)
        _searchString = string.Empty;
    _searchString += e.KeyChar;

    var found = listBox1.Items.Cast<object>().Select(t => t.ToString()).Where(item => item.ToLower().StartsWith(_searchString)).FirstOrDefault();
    if(!String.IsNullOrEmpty(found))
        listBox1.SelectedItem = found;

    _lastKeyPress = newDate;
    e.Handled = true;
} 
```

希望这可以帮助！;)

**编辑2：**

不知道大家有没有注意到评论的重要性`e.Handled`。默认情况下，如果您按下 ListBox 中的某个键，控件将选择第一个找到的具有该键字符的项。但它没有我的代码所具有的功能。因此，如果您远程控制`e.Handled`线路，代码将起作用，但控件也会处理按键，而您不希望这样：项目不会被正确选择！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T13:14:38.337

您想使用`LBS_SORT` [列表框样式](http://msdn.microsoft.com/en-us/library/windows/desktop/bb775149%28v=vs.85%29.aspx)。创建控件后无法应用此样式，因此要添加此样式，您需要覆盖该[`CreateParams`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.createparams.aspx)属性。创建一个`SortedListBox`派生自`ListBox`并覆盖此属性的类（让我们调用它），如下所示

```
public class MyListBox : ListBox
{
    protected override CreateParams CreateParams
    {
        get
        {
            var returnValue = base.CreateParams;
            returnValue.Style |= 0x2; // Add LBS_SORT
            returnValue.Style ^= 128; // Remove LBS_USETABSTOPS (optional)
            return returnValue;
        }
    }
} 
```

这个列表框现在应该对列表中的项目进行排序并支持增量搜索（恐怕你不能关闭排序，如果你需要控制排序顺序，那么你需要自己进行增量搜索，就像 Abbas已建议）

**更新：**如果您另外删除了`LBS_USETABSTOPS`样式，您甚至会得到一个编辑框，显示增量搜索当前匹配的字符

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-13T15:02:27.607

我刚刚为我的案例修改了 Abbas 代码。这是我的桌面程序，并以其中一种具有 ListBox 控件的形式使用。这对我很有用。感谢阿巴斯

```
 private DateTime _lastKeyPress;
    private string _searchString;
    private void lstEmployer_KeyPress(object sender, KeyPressEventArgs e)
    {
        var newDate = DateTime.Now;
        var diff = newDate - _lastKeyPress;

        if (diff.TotalSeconds >= 2)
            _searchString = string.Empty;
        _searchString += e.KeyChar;

        lstEmployer.SelectedIndex = lstEmployer.FindString(_searchString);

        _lastKeyPress = newDate;
        e.Handled = true; //REALLY IMPORTANT TO HAVE THIS
    } 
```

# php - 根据php中返回的4条记录添加图片

> ID：12929986
> 
> 赞同：1
> 
> 时间：2012-10-17T08:20:18.533
> 
> 标签：php, mysql

我需要根据返回的 4 行向我的页面添加一个图像（mysql 中的保存路径 - 服务器上文件中的图像）。从 db 将始终返回 4 行。

我的问题是它在所有 4 个图像持有者中都显示了相同的图像（带有 3 个缩略图的主图像）。我已使用以下内容添加图像...

首先我的php函数-

```
//Get all images within a specific album...
function get_images($vehicleid) {
    //$vehicle_id = (int)$vehicle_id;

    $images = array();

    $image_query = mysql_query("SELECT * FROM `images` WHERE `images`.`vehicle_id`='$vehicleid'");

    $result = $image_query;

    if (!$result){
       echo 'Error in loading vehicle adverts. Please refresh page and try again';
       exit();
    }

    while($images_row = mysql_fetch_assoc($image_query)) {
        $images[] = array(
            'imageid' => $images_row['image_id'],
            'branch' => $images_row['branch'],
            'vehicleid' => $images_row['vehicle_id'],
            'timestamp' => $images_row['timestamp'],
            'ext' => $images_row['ext'],
            'imagenum' => $images_row['imagenum']
        );

        //This returns main image and 3 thumbs, but only image from first record is returned..
                     return $images;
    }
        //return $images;
                    //When runned from here, main image is from 1st, then 2nd, 3rd etc row returned, but it loads each rows image as a main and the thumbs the same image...
} 
```

我用来加载图像的代码如下......

```
<?php
    //Get images...
$images = get_images($vehicleid);

if (empty($images)) {
    ?>

    <table id="thumbnails">
        <tr>
            <td>                                        
                <div>
                <a href="testdrive.php" style="text-decoration:none"><img src="uploads/noimage.jpg" width="600px" height="400px" title="Sorry, No Image Available Yet" /></a>
                </div>                    
            </td>
            <td>
                <table width="350px">
                    <tr height="50px">
                    </tr>
                    <tr>
                        <td>
                            <div id="mainimages" align="center" style="font-size:14px">
                                <?php echo $year, ' ', $manufacturer, ' ', $modelrange, ' ', $modelder, '.', '<br />', '<br />', 'This beautiful ', $colour, ' ',$manufacturer, ' only has ', $mileage, ' kilometres  with a service history and is selling for ', '<strong>ONLY R ', $price, '. </strong>', '<br />', '<br />', 'It features ', $comments, '<br />', '<br />', 'This vehicle is available NOW from our ', '<a href="testdrive.php" style="text-decoration:none">', 'Tata - ', $branch, ' branch.</a>'; ?> 
                            </div>
                        </td>
                    </tr>

                    <tr>
                        <td>
                            <div id="mainimages" align="center" style="font-size:14px">
                                 <?php //MAIN IMAGE HERE FROM RECORD 1 (Note from upload folder, not thumbs as below)...
                                 echo '<a href="delete_image.php?vehicle_id='.$vehicleid.'"><img src="images/delete.png" title="Delete Advert" /></a>'; 
                                 ?>
                            </div>
                        </td>
                    </tr>
                </table>
            </td>
            </tr>
            <tr>
            <td>
                <img src="uploads/thumbs/noimage.jpg" title="Sorry, No Image Available Yet" width="100px" height="100px" /><img src="uploads/thumbs/noimage.jpg" title="Sorry, No Image Available Yet" width="100px" height="100px" /><img src="uploads/thumbs/noimage.jpg" title="Sorry, No Image Available Yet" width="100px" height="100px" />

                <p style="height:10px"></p>
            </td>
        </tr>
    </table>

    <?php
        //echo '<img src="uploads/noimage.jpg" />';
        } else {
            //Display images thumbs...
            foreach ($images as $image) {
    ?>

    <table id="thumbnails">
        <tr>
            <td>
                <?php 
                    //Add image title to the right of main image...
                    echo '<a href="testdrive.php" style="text-decoration:none"><img src="uploads/', $image['vehicleid'], '/', $image['imageid'], '.', $image['ext'], '" title="Uploaded ', date('D M Y / h:i', $image['timestamp']), ' - ', $year, ' ', $manufacturer, ' ', $modelrange, ' ', $modelder, '.', 'This beautiful ', $colour, ' ',$manufacturer, ' only has ', $mileage, ' kilometres and is selling for ', 'ONLY R ', $price, '.', '" width="600px" height="400px" /></a>'; 
                ?>
                </div>
            </td>
            <td>
                <table width="350px">
                    <tr height="50px">
                    </tr>
                    <tr>
                        <td>
                            <div id="mainimages" align="center" style="font-size:14px">
                                <?php 
                                echo $year, ' ', $manufacturer, ' ', $modelrange, ' ', $modelder, '.', '<br />', '<br />', 'This beautiful ', $colour, ' ',$manufacturer, ' only has ', $mileage, ' kilometres with a service history and is selling for ', '<strong>ONLY R ', $price, '. </strong>', '<br />', '<br />', 'It features ', $comments, '<br />', '<br />', 'This vehicle is available NOW from our ', '<a href="testdrive.php" style="text-decoration:none">', 'Tata - ', $branch, ' branch.</a>'; 
                                ?> 
                            </div>
                        </td>
                    </tr>

                    <tr>
                        <td>
                            <div id="mainimages" align="center" style="font-size:14px">
                                 <?php
                                 echo '<a href="delete_image.php?vehicle_id='.$vehicleid.'"><img src="images/delete.png" title="Delete Advert" /></a>'; 
                                 ?>
                            </div>
                        </td>
                    </tr>
                </table>
            </td>
            </tr>
            <tr>
            <td>
                <?php //THIS WHERE I NEED TO START LOADING THE CORRECT IMAGES - THIS SHOULD BE IMAGE RETURNED FROM RECORD 2...
                echo '<a href="testdrive.php" style="text-decoration:none"><img src="uploads/thumbs/', $image['vehicleid'], '/', $image['imageid'], '.', $image['ext'], '" title="Uploaded ', date('D M Y / h:i', $image['timestamp']), ' - ', $year, ' ', $manufacturer, ' ', $modelrange, ' ', $modelder, '.', 'This beautiful ', $colour, ' ',$manufacturer, ' only has ', $mileage, ' kilometres and is selling for ', 'ONLY R ', $price, '.', '" onclick="showImage("uploads/', $image['vehicleid'], '/', $image['imageid'], '.', $image['ext'], '" width="100px" height="100px")" /></a>';

    //THIS SHOULD BE IMAGE RETURNED FROM RECORD 3...
                echo '<a href="testdrive.php" style="text-decoration:none"><img src="uploads/thumbs/', $image['vehicleid'], '/', $image['imageid'], '.', $image['ext'], '" title="Uploaded ', date('D M Y / h:i', $image['timestamp']), ' - ', $year, ' ', $manufacturer, ' ', $modelrange, ' ', $modelder, '.', 'This beautiful ', $colour, ' ',$manufacturer, ' only has ', $mileage, ' kilometres and is selling for ', 'ONLY R ', $price, '.', '" onclick="showImage("uploads/', $image['vehicleid'], '/', $image['imageid'], '.', $image['ext'], '" width="100px" height="100px")" /></a>';

    //THIS SHOULD BE IMAGE RETURNED FROM RECORD 4...
                echo '<a href="testdrive.php" style="text-decoration:none"><img src="uploads/thumbs/', $image['vehicleid'], '/', $image['imageid'], '.', $image['ext'], '" title="Uploaded ', date('D M Y / h:i', $image['timestamp']), ' - ', $year, ' ', $manufacturer, ' ', $modelrange, ' ', $modelder, '.', 'This beautiful ', $colour, ' ',$manufacturer, ' only has ', $mileage, ' kilometres and is selling for ', 'ONLY R ', $price, '.', '" onclick="showImage("uploads/', $image['vehicleid'], '/', $image['imageid'], '.', $image['ext'], '" width="100px" height="100px")" /></a>';
                ?>

                <p style="height:10px"></p>
            </td>
        </tr>
    </table>

    <?php
            }
        }
    }
   ?> 
```

任何人都知道如何将正确的图像返回给他们各自的 html 持有者？

谢谢各位。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T08:28:19.110

`return $images;`必须在 while 之外，否则循环永远不会完成。

我想代码不起作用，因为数据库或数据设计中存在错误。例如，数据库中的“imagenum”是什么意思？你应该使用这个值来检索图像吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T08:43:56.253

我之前的回答不正确，但仍然有效，因为您从不使用“imagenum”。并且返回还必须在一段时间之外。

无论如何，您始终获得相同图像的原因是您始终使用相同的数组元素。

尝试：

```
$i=0;
foreach ($images as $image) {
    If($i=0) { 
?>

<table id="thumbnails">
    <tr>
        <td>
            <?php 
                //Add image title to the right of main image...
                echo '<a href="testdrive.php" style="text-decoration:none"><img src="uploads/', $image['vehicleid'], '/', $image['imageid'], '.', $image['ext'], '" title="Uploaded ', date('D M Y / h:i', $image['timestamp']), ' - ', $year, ' ', $manufacturer, ' ', $modelrange, ' ', $modelder, '.', 'This beautiful ', $colour, ' ',$manufacturer, ' only has ', $mileage, ' kilometres and is selling for ', 'ONLY R ', $price, '.', '" width="600px" height="400px" /></a>'; 
            ?>
            </div>
        </td>
        <td>
            <table width="350px">
                <tr height="50px">
                </tr>
                <tr>
                    <td>
                        <div id="mainimages" align="center" style="font-size:14px">
                            <?php 
                            echo $year, ' ', $manufacturer, ' ', $modelrange, ' ', $modelder, '.', '<br />', '<br />', 'This beautiful ', $colour, ' ',$manufacturer, ' only has ', $mileage, ' kilometres with a service history and is selling for ', '<strong>ONLY R ', $price, '. </strong>', '<br />', '<br />', 'It features ', $comments, '<br />', '<br />', 'This vehicle is available NOW from our ', '<a href="testdrive.php" style="text-decoration:none">', 'Tata - ', $branch, ' branch.</a>'; 
                            ?> 
                        </div>
                    </td>
                </tr>

                <tr>
                    <td>
                        <div id="mainimages" align="center" style="font-size:14px">
                             <?php
                             echo '<a href="delete_image.php?vehicle_id='.$vehicleid.'"><img src="images/delete.png" title="Delete Advert" /></a>'; 
                             ?>
                        </div>
                    </td>
                </tr>
            </table>
        </td>
        </tr>
        <tr>
        <td>
            <?php $i=1; } else {//THIS WHERE I NEED TO START LOADING THE CORRECT IMAGES - THIS SHOULD BE IMAGE RETURNED FROM RECORD 2...
            echo '<a href="testdrive.php" style="text-decoration:none"><img src="uploads/thumbs/', $image['vehicleid'], '/', $image['imageid'], '.', $image['ext'], '" title="Uploaded ', date('D M Y / h:i', $image['timestamp']), ' - ', $year, ' ', $manufacturer, ' ', $modelrange, ' ', $modelder, '.', 'This beautiful ', $colour, ' ',$manufacturer, ' only has ', $mileage, ' kilometres and is selling for ', 'ONLY R ', $price, '.', '" onclick="showImage("uploads/', $image['vehicleid'], '/', $image['imageid'], '.', $image['ext'], '" width="100px" height="100px")" /></a>';

            ?>

<?php
        }
    }
}
?>
            <p style="height:10px"></p>
        </td>
    </tr>
</table> 
```

或类似的东西（在stackoverflow编辑器中编写代码很困难）。

# java - 如何更改菜单项上的文本颜色

> ID：12929987
> 
> 赞同：4
> 
> 时间：2012-10-17T08:20:20.453
> 
> 标签：java, swt, menuitem, system-tray

我正在使用 Java 和 SWT。我已将菜单（右键单击）添加到系统托盘。我想更改菜单项上文本的颜色。可能吗？我找不到任何解决方案。

```
 TrayItem item = new TrayItem(tray, SWT.NONE);
 item.addListener(SWT.MenuDetect, new Listener() {
      public void handleEvent(org.eclipse.swt.widgets.Event event) {
           Menu menu = new Menu(shell, SWT.POP_UP);
           MenuItem item1 = new MenuItem(menu, SWT.NONE);
           item1.setText("Settings");   // **i want to change color of the text**
      }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T08:27:23.133

不，这还不可能。[这里](https://bugs.eclipse.org/bugs/show_bug.cgi?id=168716)有一个错误报告。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-17T08:23:24.320

```
item1.setForeground(Color.red); 
```

你是说这个吗？？

# javascript - 关于dom修改

> ID：12929988
> 
> 赞同：2
> 
> 时间：2012-10-17T08:20:27.833
> 
> 标签：javascript, jquery, dom, css3pie

> **可能重复：**
> [是否有 jQuery DOM 更改侦听器？](https://stackoverflow.com/questions/2844565/is-there-a-jquery-dom-change-listener)

有没有办法在每次修改 dom 时加载 js 函数或调用该函数？我有一个 html 页面，我在该页面上从一个操作按钮展开同一页面中的另一个面板，这样 dom 被修改并且我的 js 函数不再被调用：|

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T10:59:18.067

代码

```
$("#a").bind("DOMSubtreeModified", function() {
     if (window.PIE) {
        $(this).each(function() {
            PIE.attach(this);
        });
    }
    alert("tree changed");
});

$("#add").click(function() {
    $("#a").append("<span>hey there</span>");
});
​ 
```

HTML：

```
<div id="a"></div>
<button id="add">Add to Div</button>​ 
```

工作[小提琴](http://jsfiddle.net/eQErD/404/)

# javascript - jqplot渐变色

> ID：12929989
> 
> 赞同：0
> 
> 时间：2012-10-17T08:20:36.867
> 
> 标签：javascript, jquery, jquery-plugins, gradient, jqplot

我正在使用[jqplot](http://www.jqplot.com/)。有没有办法为我的饼图的每个切片设置自定义渐变颜色？我正在使用 seriescolor 选项：

```
seriesColors: ["#F3CBBF", "#BFDDE5", "#CF3501"], 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T07:38:40.417

确保将 'seriesColors' 选项放置在 'seriesDefaults' 对象中。

一个简单的例子：

```
 var plot1 = $.jqplot('div1', [['a', 8], ['b', 12], ['c', 6]], {
        title: 'Chart 1',

            seriesDefaults:{
                renderer:$.jqplot.PieRenderer,
            rendererOptions:{
                  showDataLabels: true,
                  dataLabels:'percent'
            }
            },
            seriesColors: ["#F3CBBF", "#BFDDE5", "#CF3501"],
            highlighter: {
                show: true
        },
            legend: {
                        show:true,
                        location: 's', 
                        placement: 'outsideGrid'}
        }); 
```

确保包含饼图渲染器 javascript 文件以及 jqplot-css 文件（如果要显示图例）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-21T20:02:24.887

jqPlot 饼图不支持开箱即用的渐变。[API ( http://www.jqplot.com/docs/files/plugins/jqplot-pieRenderer-js.html](http://www.jqplot.com/docs/files/plugins/jqplot-pieRenderer-js.html) )中没有属性设置。您很可能必须在 CSS、HTML 5 和/或 canvas 对象中执行此操作。不幸的是，您还会遇到不同的浏览器以不同的方式处理渐变。jqPlot 气泡图具有渐变属性，尽管我知道这无助于让您知道有一种图表类型可以做到这一点（[http://www.jqplot.com/docs/files/plugins/jqplot-bubbleRenderer -js.html](http://www.jqplot.com/docs/files/plugins/jqplot-bubbleRenderer-js.html) )。

```
seriesDefaults: {
    renderer: $.jqplot.BubbleRenderer,
    rendererOptions: {
        bubbleAlpha: 0.7,
        varyBubbleColors: false,
        bubbleGradients: true
    }
} 
```

# python - Python 3.2.3 运行错误

> ID：12929990
> 
> 赞同：0
> 
> 时间：2012-10-17T08:20:39.440
> 
> 标签：python, python-3.x, urllib

我使用此代码在 IP 地址中获取组织

```
import urllib 
import lxml.html as lh
req= urllib.Request("http://www.ip-address.com/ip_tracer/157.123.22.11", headers={'User-Agent' : "Magic Browser"})
html = urllib.urlopen(req).read()
doc = lh.fromstring(html)
print (''.join(doc.xpath('.//*[@class="odd"]')[-1].text_content().split())) 
```

我的 python 是 3.2.3，它显示

```
 Traceback (most recent call last):
  File "ext.py", line 3, in <module>
  req= urllib.Request("http:// www.ip-address.com/ip_tracer/157.123.22.11", headers={'User-Agent' : "Magic Browser"})
  AttributeError: 'module' object has no attribute 'Request' 
```

如何解决它。谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T08:24:31.637

如果要使用[`urllib.request.Request`](http://docs.python.org/py3k/library/urllib.request.html#urllib.request.Request)，请像这样导入它：

```
import urllib.request

r = urllib.request.Request(...)
html = urllib.request.urlopen(r).read() 
```

如果您不需要任何其他内容`urllib.request`，则只能导入`Request`：

```
from urllib.request import Request

r = Request(...) 
```

# .net - 水晶报表 10 错误：无法打开行集

> ID：12929992
> 
> 赞同：0
> 
> 时间：2012-10-17T08:20:41.747
> 
> 标签：.net, sql, crystal-reports

我正在使用 Crystal Reports 10，在 SQL Server 2008 R2 上运行。后端在服务器中。当我运行报告时，使用我的管理员用户名和密码可以正常工作，但如果我使用客户端用户名和密码登录，我会得到

![错误信息](../Images/4c7f7d5724eaf51634d34c134abbdd10.png)

错误消息：无法打开行集。42000：[Microsoft][ODBC SQL Server 驱动程序][SQL Server]

听起来像“访问冲突或语法错误”。如何在客户端 PC 中运行报告？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T10:50:26.903

我的系统管理员通过右键单击服务器中的用户名-> 属性-> 服务器角色-> 选择选项“sysadmin”（已选择“公共”）来解决问题。然后我创建一个 DNS，现在报告是也在客户端机器上工作。

# android - 使用我的 Android 应用从谷歌播放服务器进行应用内购买（测试产品）期间出错

> ID：12929993
> 
> 赞同：4
> 
> 时间：2012-10-17T08:20:42.667
> 
> 标签：android, google-play

我对这个错误感到困惑。我在我的 Android 应用程序中使用了应用内购买的（测试产品）。当我要购买商品时，接受并订阅后它会返回以下错误：

**从服务器检索信息时出错。[DF-DFERH-01]**

我从许多帖子中发现来自 Google Play 服务器的问题。过段时间就会解决的。但这个问题我从过去 5 天得到。那么这真的是谷歌播放服务器的问题还是我有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T03:55:30.390

我得到了这个问题的解决方案。

如果您将来遇到此类问题，则无需担心。问题说“Google play 服务器正在维护中。当它在您的设备上更新时，您将获得 google play 的更新。用 continue 更新它，您的应用内就可以完美使用了！！！”

就这样

谢谢。

# ios - ios splitviewcontroller 景观失败

> ID：12929995
> 
> 赞同：3
> 
> 时间：2012-10-17T08:20:46.300
> 
> 标签：ios, landscape, landscape-portrait

我有 spliteview 项目并在横向模式下强制它。在我将我的 iOS SDK 升级到 iOS6 之前它工作正常。但是升级后，当我使用 iOS 5.1 Simulator 运行时，它总是以纵向模式显示，并且主视图消失了。

这是我的代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];

    MasterViewController *masterViewController = [[[MasterViewController alloc] initWithNibName:@"MasterViewController" bundle:nil] autorelease];
    UINavigationController *masterNavigationController = [[[UINavigationController alloc] initWithRootViewController:masterViewController] autorelease];

    CustomverDetailViewController *custView = [[[CustomverDetailViewController alloc] initWithNibName:@"CustomverDetailViewController" bundle:nil] autorelease];

    self.splitViewController = [[[UISplitViewController alloc] init] autorelease];
    self.splitViewController.viewControllers = @[masterNavigationController, custView];

    self.window.rootViewController = self.splitViewController;

    [self.window makeKeyAndVisible];
} 
```

## 有任何想法吗？

我尝试为不同的版本提供不同的代码，在 iOS6 中似乎还可以，但在 iOS5.1 中，当我进入这个视图时仍然会改变方向，我想当我分配一个新的 UIWindow 时，它的原始方向是纵向的。

在这里我改变了我的代码：

```
self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];

left = [[[MasterViewController alloc] initWithNibName:@"MasterViewController" bundle:nil] autorelease];
UINavigationController *masterNavigationController = [[[UINavigationController alloc] initWithRootViewController:left] autorelease];

right = [[CustomverDetailViewController alloc] initWithNibName:@"CustomverDetailViewController" bundle:nil];

self.splitViewController = [[[UISplitViewController alloc] init] autorelease];
self.splitViewController.viewControllers = @[masterNavigationController, right];

if (([[[UIDevice currentDevice] systemVersion] floatValue ] < 6.0 )) {

    self.splitViewController.delegate = left;
    [self.splitViewController.view setFrame:CGRectMake(0, 0, 1024.0f, 768.0f)];

    self.window.rootViewController = self.splitViewController;
     [self.window makeKeyAndVisible];

}else{
    self.window.rootViewController = self.splitViewController;
    [self.window makeKeyAndVisible];
}

[right release]; 
```

![在 iOS 6](../Images/fe5256a0bc9238d710fb968c3c18acb4.png) ![在 iOS 5.1 中](../Images/476da213709e10bc4583a7ef3b557a3e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T09:42:49.720

尝试添加在 iOS 6 中添加的新委托方法

```
- (NSUInteger)supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskLandscape;
}

- (void)shouldAutorotate {
    return NO;
} 
```

# ios - 向核心绘图图表添加标签

> ID：12929997
> 
> 赞同：0
> 
> 时间：2012-10-17T08:20:47.880
> 
> 标签：ios, core-plot

我想为核心图散点图添加标签。它应该位于图表左边缘的特定 y 值，如下所示：

![带有标签的图](../Images/247b830d38f3d4d8bd45f787490b8719.png)

我尝试使用注释进行操作，但拖动时遇到问题。当我拖动图表时，注释也被拖动，我希望它始终保持在左边缘。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T13:53:33.813

创建您的标签作为绘图空间注释。使用绘图空间委托来监视对锚点的更改`xRange`并根据需要更新锚点的 x 值。您可以使用绘图空间将所需的 x 位置转换为锚点的相应数据值。

# c# - 如何使用 linq 从 var-source 获取值

> ID：12929999
> 
> 赞同：5
> 
> 时间：2012-10-17T08:20:54.810
> 
> 标签：c#, linq, var

我有一本字典：

```
Dictionary<int, Type> AllDrillTypes = new Dictionary<int, Type>()
{
  {13,typeof(TCHEMISTRY)},
  {14,typeof(TDRILLSPAN)}
}; 
```

其中 TCHEMISTRY 和 TDRILLSPAN 是类。然后我想从其中一个类中获取行，如下所示：

```
Type T = AllDrillTypes[13];
var LC = Activator.CreateInstance( typeof(List<>).MakeGenericType( T ) );
MethodInfo M = T.GetMethod("FindAll", BindingFlags.Public | BindingFlags.Static, null, new Type[] { }, null);    
LC = M.Invoke(null, new object[] { }); 
```

所有这些代码都可以正常工作。之后我需要得到一些这样的行：

```
var LingLC = from obj in LC where obj.RunID == 1001 select obj; 
```

但是这条线会导致错误：

> “找不到源类型'object'的查询模式的实现。找不到'Where'。”

这段代码行有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T08:41:35.753

即使您不能更改类定义，也可以避免使用反射：

```
// Getter dictionary rather than type dictionary.
Dictionary<int, Func<IEnumerable<object>>> DrillTypeGetters =
    new Dictionary<int, Func<IEnumerable<object>>>()   
    {  
        { 13, () => TCHEMISTRY.FindAll().Cast<object>() },
        { 14, () => TDRILLSPAN.FindAll().Cast<object>() }
    };
Dictionary<int, Func<object, int>> IDGetters =
    new Dictionary<int, Func<object, int>>()
    {
        { 13, o => ((TCHEMISTRY)o).RunID },
        { 14, o => ((TDRILLSPAN)o).RunID }
    };

IEnumerable<object> LC = DrillTypeGetters[13]();
IEnumerable<object> LingLC = 
    from obj in LC
    where IDGetters[13](obj) == 1001
    select obj; 
```

或者您甚至可以打开`13`/并为每种类型`14`运行*完全不同的方法。*

```
if (choice == 13)
    IEnumerable<TCHEMISTRY> LingLC =
        TCHEMISTRY.FindAll().Where(tc => tc.RunID == 1001);
else if (choice == 14)
    IEnumerable<TDRILLSPAN> LingLC =
        TDRILLSPAN.FindAll().Where(td => td.RunID == 1001); 
```

基本上，如果这两个类不共享任何共同的层次结构，您就不能编写任何共同的代码来处理它们。如果它们有很多*相似*的属性，您可以像我的第一个示例中那样使用 getter 来提供一种方法来获取您正在处理的任何类型的类的相似属性。如果它们甚至没有相似的属性，请不要尝试编写共享代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T08:37:34.527

也许你可以将你的代码重写成这样的东西，....以获得更安全的解决方案（不使用反射）。

```
void Main()
{
    var driller1 = new DrillerWhichYouCannotChange1();
    var driller2 = new DrillerWhichYouCannotChange2();

    var allDrillTypes = new Dictionary<int, IList<IDriller>>()
    {
        { 13, new List<IDriller>() { new DrillerWhichYouCannotChange1Adapter(driller1) } },
        { 14, new List<IDriller>() { new DrillerWhichYouCannotChange2Adapter(driller2) } },
    };

    Console.WriteLine(allDrillTypes[13][0].SomeCommonProperty); // prints 123
    Console.WriteLine(allDrillTypes[14][0].SomeCommonProperty); // prints 456
}

interface IDriller
{
    int SomeCommonProperty { get; }
}

class DrillerWhichYouCannotChange1Adapter : IDriller
{
    private DrillerWhichYouCannotChange1 inner;

    public DrillerWhichYouCannotChange1Adapter(DrillerWhichYouCannotChange1 inner)
    {
        this.inner = inner;
    }

    public int SomeCommonProperty { get { return this.inner.PropertyX; } }
}

class DrillerWhichYouCannotChange2Adapter : IDriller
{
    private DrillerWhichYouCannotChange2 inner;

    public DrillerWhichYouCannotChange2Adapter(DrillerWhichYouCannotChange2 inner)
    {
        this.inner = inner;
    }

    public int SomeCommonProperty { get { return this.inner.PropertyY; } }
}

class DrillerWhichYouCannotChange1
{
    public int PropertyX { get { return 123; } }
}

class DrillerWhichYouCannotChange2
{
    public int PropertyY { get { return 456; } }
} 
```

**编辑**：如果您无法更改司钻类，您可以使用适配器模式为每个司钻创建一个适配器，实现`IDiller`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T08:50:45.540

尝试

```
IEnumerable returnedObjects = (IEnumerable)M.Invoke(null, new object[] { }) as IEnumerable; 
```

然后遍历你的 ienumerable

```
foreach (object report in returnedObjects)
{
    // Use reflection to read properties or add to a new List<object> if you
    // need an ICollection<object>
} 
```

代替 ：

```
LC = M.Invoke(null, new object[] { }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T08:31:04.953

您需要将 LC 转换为 FindAll 方法的返回类型。类似的东西：

```
var genericList = ((List<TChemistry>) LC);
var LingLC = from obj in genericList where obj.RunID == 1001 select obj; 
```

这是假设 FindAll 返回 TChemistry 的集合。

- 编辑

如果您在运行时不知道类型是 TChemistry 还是 TDrillspan，则必须编写一个 if/else 的 switch 语句来转换为正确的类型。我宁愿让 TChemistry 和 TDrillSpan 扩展一个抽象类或接口，您可以只转换为 List，并且您将始终拥有 RunId 属性。

```
public abstract class TAbstract
{
   public abstract int RunId {get; set;}
}

public class TChemistry : TAbstract
{
    public override int RunId {get; set;}
}

public class TDrillSpan : TAbstract
{
   public override int RunId {get; set;}
}

Type T = AllDrillTypes[13] as TAbstract;
var LC = Activator.CreateInstance( typeof(List<>).MakeGenericType( T ) );
MethodInfo M = T.GetMethod("FindAll", BindingFlags.Public | BindingFlags.Static, null, new Type[] { }, null);    
LC = M.Invoke(null, new object[] { });

var genericList = ((List<TAbstract>) LC);
var LingLC = from obj in genericList where obj.RunID == 1001 select obj; 
```

如果你不能改变类的声明，那么你只剩下丑陋的 if else：

```
var typeInfo = LC.GetType();
IEnumerable<T> genericList;
if (typeInfo == typeof(IEnumerable<TChemistry>)
{
    genericList = (List<TChemistry>) LC;
)
else if (typeInfo == typeof(IEnumerable<TDrillSpan>)
{
    genericList = (List<TDrillSpan>) LC;
}

var LingLC = from obj in genericList where obj.RunID == 1001 select obj; 
```