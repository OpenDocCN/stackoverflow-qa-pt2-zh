# StackOverflow 问答 15524000-15524999

# javascript - Javascript 图表绘制

> ID：15524011
> 
> 赞同：2
> 
> 时间：2013-03-20T12:49:16.510
> 
> 标签：javascript, google-visualization

我正在使用 Google Charts API 集成到一个小组项目中。该项目是社交媒体趋势等的可视化工具包。

问题是，我已经编写了一个 PHP 程序来可视化饼图/条形图/折线图等。但我只能通过声明来让它们工作：

```
var chart = new google.visualization.PieChart(document.getElementById('chart_div'));
chart.draw(data, options); 
```

可视化各个图表。但是我希望为可视化创建单独的文件。即drawPie、drawLine、drawBar 等。这样它就可以使用我们创建的基于规则的数据类型工具，即可以将百分比和位置绘制到饼图上。

无论如何，我对每个单独的文件都有问题。下面是 drawPie.js 文件的代码：

```
<html>
<head>
    <!-- Load JSAPI -->
    <script type="text/javascript" src='https://www.google.com/jsapi?autoload={"modules":[{"name":"visualization","version":"1","packages":["corechart","table"]}]}'></script>

    <script type="text/javascript">
    //<!-- Load the API Package -->
    google.load('visualization', '1.0', {'packages':['controls']});
    //<!-- Callback when the Google Visualization API is Loaded -->
    google.setOnLoadCallback(drawDashboard);

    function drawPie() {

    //<!-- Create the Table -->
    var data = new google.visualization.DataTable();
    data.addColumn('string', 'location');
    data.addColumn('number', 'crimes');
    data.addRows([ <?php echo $data_for_chart; ?> ]);
    //<!-- Pass Options -->
    var options = {
    'legend': 'left',
    'title': 'Crimes (per day)',
    'is3D': 'True',
    'width':700,
    'height':300
    };

    //<!-- Instantiate and Draw Chart -->
    var chart = new google.visualization.PieChart(document.getElementById('pie_chart'));
    chart.draw(data, options);
    </script>
</head>
    <body>
        <style> pie_chart {margin: 0 auto; }</style>
        <div id="pie_chart"></div>

        <style>
            #left { margin-left: 15%; float: left; }
            #right { margin-right: 15%; float: right; }
            img { width: 200; height: 200;}
        </style>
    </body> 
```

代码不显示图表。有谁知道我做错了什么？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T00:23:38.920

您正在加载错误的包。

更改`google.load('visualization', '1.0', {'packages':['controls']});`为`google.load('visualization', '1.0', {'packages':['corechart']});`它应该可以工作。如果没有，那么除了这个（相对简单的）问题之外，您还有另一个问题。

# javascript - 从 Illustrator 文件中获取路径以在网页上叠加

> ID：15524012
> 
> 赞同：0
> 
> 时间：2013-03-20T12:49:24.027
> 
> 标签：javascript, jquery, adobe-illustrator

这是一个非常笼统的问题，但只是想找人让我朝着正确的方向开始。我得到了一个项目，我需要在网页上创建地图并在鼠标悬停时突出显示/概述其中的某些部分。

给我的地图是插图文件，当我打开它们时，我看到它们被划分为我需要突出显示的区域。我是否可以从 AI 获得这些路径并将它们与 Raphaël 之类的东西一起使用？或者我要创建一些叠加层？真的不知道如何从这里开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T13:29:43.553

Illustrator 允许您导出为 svg。然后，您可以将 svg 用作背景图像，或将其内嵌在您的页面中。

请注意，您不一定需要将其保留为矢量格式才能在网页上使用它。您也可以简单地使用 illustrator 的“保存为网络”功能将图形导出为 png 或 gif。

无论哪种方式，您都可以像使用任何普通 Web 资源一样开始使用它来构建您的页面。

# c# - 如何在wp7中通过扬声器播放收音机

> ID：15524013
> 
> 赞同：3
> 
> 时间：2013-03-20T12:49:26.087
> 
> 标签：c#, windows-phone-7

我使用下面指定的代码在我的 Windows Phone7 应用程序中实现了 Radio，现在我想提供额外的选项来通过扬声器播放，

我怎样才能完全填写这个选项任何想法？是否可以？

```
FMRadio.Instance.CurrentRegion = RadioRegion.UnitedStates;
FMRadio.Instance.PowerMode = RadioPowerMode.On;
FMRadio.Instance.Frequency =101.5 ;

if (FMRadio.Instance.SignalStrength == 0.0)
{
   MessageBox.Show("Please connect your phone to the headset.");
}
}
catch (Exception ex)
{            
   MessageBox.Show("Error Message:-> " + ex.Message + "FM Radio is not connected");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T18:56:50.133

这是不可能的，因为[FMRadio API](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff707498%28v=vs.105%29.aspx)中没有任何内容可以让您执行此操作。

[如果您点击并按住电台号码](http://www.windowsphone.com/en-ie/how-to/wp7/music/listen-to-fm-radio)，内置收音机（可在音乐+视频中心访问）确实具有此功能，但开发人员根本无法使用它。

还值得注意的是，WP8 设备没有启用无线电，[但将来可能会改变](http://www.theverge.com/2013/3/26/4148200/windows-phone-8-update-fm-radio-support)。

# c# - 如何通过 C# 在 Windows 8 中禁用/启用网络

> ID：15524025
> 
> 赞同：4
> 
> 时间：2013-03-20T12:49:50.067
> 
> 标签：c#, networking, windows-8, wmi

此代码在 Windows 7 上运行良好，但在 Windows 8 上运行良好。有人知道为什么吗？我不知道如何解决它。

## 重启网络功能

```
 private static void RestartNetWork()
    {
        string manage = "SELECT * FROM Win32_NetworkAdapter";
        ManagementObjectSearcher searcher = new ManagementObjectSearcher(manage);
        ManagementObjectCollection collection = searcher.Get();
        List<string> netWorkList = new List<string>();
        foreach (ManagementObject obj in collection)
        {
            if (obj["Name"].ToString() == "Qualcomm Atheros AR5B97 Wireless Network Adapter")
            {                
                DisableNetWork(obj);//disable network
                Thread.Sleep(3000);
                EnableNetWork(obj);//enable network
                return;
            }
        }
    } 
```

**禁用网络功能**

```
/// <summary>
        /// 禁用网卡
        /// </summary>5
        /// <param name="netWorkName">网卡名&lt;/param>
        /// <returns></returns>
        private static bool DisableNetWork(ManagementObject network)
        {
            try
            {
                network.InvokeMethod("Disable", null);
                return true;
            }
            catch
            {
                return false;
            }
        } 
```

**启用网络的功能**

```
/// <summary>
        /// 启用网卡
        /// </summary>
        /// <param name="netWorkName">网卡名&lt;/param>
        /// <returns></returns>
        private static bool EnableNetWork(ManagementObject network)
        {
            try
            {
                network.InvokeMethod("Enable", null);
                return true;
            }
            catch
            {
                return false;
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T13:31:53.167

假设您使用的是[Win32_NetworkAdapter](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394216%28v=vs.85%29.aspx) WMI 类，请确保当前进程在[提升模式下](http://msdn.microsoft.com/en-us/library/windows/desktop/aa390385%28v=vs.85%29.aspx)运行。最重要的是，您可能只想避免像您正在做的那样捕获每个异常，而是分析可能引发的最终异常以获取更多详细信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-01-06T14:45:44.847

我的代码在 Windows 10 中运行良好，所以我认为 win8 可用，但请记住它需要管理员权限，请记住通过右键单击以管理员身份运行。这是我的代码：

```
 if (manage["Name"].ToString() == "Realtek RTL8192DE Wireless LAN 802.11N PCI-E NIC MAC1")
             {
                 Console.WriteLine(manage["Name"].ToString() + "\n");

                     try
                     {  
                         //先enable再disable且要管理员权限执行
                         manage.InvokeMethod("Enable", null);
                         manage.InvokeMethod("Disable", null);
                         Console.WriteLine("设置成功");                         
                     }
                     catch
                     {
                         Console.WriteLine("设置失败");
                     }                 
             }
        } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-12T14:57:08.297

我找到了我的评论的答案，并想分享给任何有类似问题的人......

我没有“启用”服务，而是将启动模式更改为手动（如果您愿意，也可以使用自动），这解决了我的问题。

```
ManagementBaseObject startMode = service.GetMethodParameters("ChangeStartMode");
startMode["startmode"] = "Manual";
service.InvokeMethod("ChangeStartMode", startMode, null); 
```

这对我有用！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-09T10:31:34.943

我刚遇到同样的问题。事实证明，当我在 Windows 8 中以管理员身份运行同一个应用程序时，一切都开始正常运行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-09T18:44:21.743

Win32_NetworkAdapter 已弃用。对于 Windows 8 / Server 2012 及更高版本，您需要使用 MSFT_NetAdapter。 [https://msdn.microsoft.com/en-us/library/hh968170(v=vs.85).aspx](https://msdn.microsoft.com/en-us/library/hh968170(v=vs.85).aspx)

声明：“Win32_NetworkAdapter 类已弃用。请改用 MSFT_NetAdapter 类。” [https://msdn.microsoft.com/en-us/library/aa394216%28v=vs.85%29.aspx](https://msdn.microsoft.com/en-us/library/aa394216%28v=vs.85%29.aspx)

# matlab - 在matlab中使用霍夫变换/霍夫线检测特定线

> ID：15524028
> 
> 赞同：1
> 
> 时间：2013-03-20T12:50:02.120
> 
> 标签：matlab, hough-transform

我目前正在做一个 matlab 项目，我必须从图像中分离出条形码并读取条形码信息。我使用的方法是霍夫变换，一旦变换完成，我就可以使用`houghpeaks`，`houghlines`这样我就可以确定条形码上每条线之间的距离。我的图像可能是水平的或垂直的。

我遇到的问题是`houghpeak`检测和`houghline`绘图。当我的图像有垂直线时，它不会检测到条形码的每一行。我在条形码图像下方有一个链接，我在上面绘制线条，我希望在我指定的长度上的每条垂直线（在此图像的情况下为 65）都有一条线叠加在其上，以便我可以使用它信息并测量每条线之间的距离

![在此处输入图像描述](../Images/893b873106c968083bc72b26d86acd77.png)

我选择 65 作为我的“MinLength”的原因是因为如果我没有指定这个高值，我会在图像的其他部分绘制水平线。

我试图实现 sobel 边缘检测，以便我可以指定水平/垂直方向，但使用它会出错：（'引用不存在的字段'point1'）。

我对参数也不太清楚`'FillGap'`，我已经阅读了关于它的 matlab 帮助，但我仍然没有理解它。我玩过不同的价值观来尝试理解它，但我不太清楚。

我还尝试使用不仅仅是条形码的图像来实现代码。

![在此处输入图像描述](../Images/f977499d9467d51f1fd1f0a4a9a6784f.png)

在这张图片中，它也只拾取似乎是随机的霍夫峰，因此没有绘制我想要的霍夫线。

所以我的问题是真的有人能告诉我为什么代码没有在图像中条形码的每条“线”上绘制所有的霍夫线。

下面是代码。

提前致谢！

```
 I  = imread('barcode (2).jpg');
 I = im2double(I);
 I = rgb2gray(I);
 BW = edge(I,'canny');
 [H,T,R] = hough(BW);
 figure(1),imshow(H,[],'XData',T,'YData',R,'InitialMagnification','fit');
 xlabel('\theta'), ylabel('\rho');
 axis on, axis normal, hold on;
 P  = houghpeaks(H,26,'threshold',ceil(0.5*max(H(:))));
 x = T(P(:,2)); 
 y = R(P(:,1));
 plot(x,y,'s','color','white');

 % Find lines and plot them
 lines = houghlines(BW,T,R,P,'FillGap',2,'MinLength',65);
 figure, imshow(BW), hold on
 max_len = 0;
 for k = 1:length(lines)
   xy = [lines(k).point1; lines(k).point2];
   plot(xy(:,1),xy(:,2),'LineWidth',2,'Color','green');

   % plot beginnings and ends of lines
   plot(xy(1,1),xy(1,2),'x','LineWidth',2,'Color','yellow');
   plot(xy(2,1),xy(2,2),'x','LineWidth',2,'Color','red');

   % determine the endpoints of the longest line segment 
   len = norm(lines(k).point1 - lines(k).point2);
   if ( len > max_len)
     max_len = len;
     xy_long = xy;
   end
 end

 % highlight the longest line segment
 plot(xy_long(:,1),xy_long(:,2),'LineWidth',2,'Color','cyan'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-24T10:32:38.420

您为什么不通过条码的整个长度绘制轮廓，而不是进行线检测来计算您的条形码。通过这种方式，您可以检测波峰和波谷以区分黑色和白色部分。

您将需要更少的计算能力，并且您的代码会更容易。

# java - 使用 RabbitMQ 发送对象

> ID：15524029
> 
> 赞同：8
> 
> 时间：2013-03-20T12:50:03.590
> 
> 标签：java, rabbitmq, messaging

我知道这个问题重复了 [使用rabbitmq发送消息而不是字符串而是结构的问题](https://stackoverflow.com/questions/11660979/using-rabbitmq-to-send-a-message-not-string-but-struct)

如果使用第一种方法来做到这一点

[第一种方式](https://stackoverflow.com/a/11662695/2082631)

我有以下跟踪：

```
java.io.EOFException
at java.io.ObjectInputStream$PeekInputStream.readFully(ObjectInputStream.java:2304)
at java.io.ObjectInputStream$BlockDataInputStream.readShort(ObjectInputStream.java:2773)
at java.io.ObjectInputStream.readStreamHeader(ObjectInputStream.java:798)
at java.io.ObjectInputStream.<init>(ObjectInputStream.java:298)
at com.mdnaRabbit.worker.data.Data.fromBytes(Data.java:78)
at com.mdnaRabbit.worker.App.main(App.java:41)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120) 
```

我已经检查并确保该消息在发送者类中完全转换为字节，但消费者无法接收它。

这是我的制片人班：

```
package com.mdnaRabbit.newt;

import java.io.IOException;
import com.rabbitmq.client.ConnectionFactory;
import com.rabbitmq.client.Connection;
import com.rabbitmq.client.Channel;
import com.rabbitmq.client.MessageProperties;
import org.apache.commons.lang.SerializationUtils;
import com.mdnaRabbit.worker.data.Data;

public class App {

    private static final String TASK_QUEUE_NAME = "task_queue";

    public static void main( String[] argv) throws IOException{

        ConnectionFactory factory = new ConnectionFactory();
        factory.setHost("localhost");
        Connection connection = factory.newConnection();
        Channel channel = connection.createChannel();

        channel.queueDeclare(TASK_QUEUE_NAME, true, false, false, null);

        int i = 0;

        do {
            Data message = getMessage();
            byte [] byteMessage = message.getBytes();
            //System.out.println(byteMessage);
            channel.basicPublish("", TASK_QUEUE_NAME, MessageProperties.PERSISTENT_TEXT_PLAIN, byteMessage);
            System.out.println(" [" + (i+1) + "] message Sent" + Data.fromBytes(byteMessage).getBody());
            i++;
        } while (i<15);

        channel.close();
        connection.close();
    }

    private static Data getMessage(){
        Data data = new Data();
        data.setHeader("header");
        data.setDomainId("abc.com");
        data.setReceiver("me");
        data.setSender("he");
        data.setBody("body");
        return data;
    }

    private static String joinStrings(String[] strings, String delimiter){
        int length = strings.length;
        if (length == 0) return "";
        StringBuilder words = new StringBuilder(strings[0]);
        for (int i = 1; i < length; i++){
            words.append(delimiter).append(strings[i]);
        }
        return words.toString();
    }
} 
```

这是我的消费类：

```
 package com.mdnaRabbit.worker;

import java.io.IOException;
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;

import com.rabbitmq.client.ConnectionFactory;
import com.rabbitmq.client.Connection;
import com.rabbitmq.client.Channel;
import com.rabbitmq.client.QueueingConsumer;
import com.mdnaRabbit.worker.data.Data;
import org.apache.commons.lang.SerializationUtils;

public class App {

    private static final String TASK_QUEUE_NAME = "task_queue";
    private static int i = 0;
    public static void main( String[] argv )
            throws IOException,
            InterruptedException{

        ExecutorService threader = Executors.newFixedThreadPool(20);
        ConnectionFactory factory = new ConnectionFactory();
        factory.setHost("localhost");
        Connection connection = factory.newConnection(threader);
        final Channel channel = connection.createChannel();

        channel.queueDeclare(TASK_QUEUE_NAME, true, false, false, null);
        System.out.println(" [*] Waiting for messages. To exit press CTRL+C");

        channel.basicQos(20);

        final QueueingConsumer consumer = new QueueingConsumer(channel);
        channel.basicConsume(TASK_QUEUE_NAME, false, consumer);

        try {

            while (true) {

                        try {QueueingConsumer.Delivery delivery = consumer.nextDelivery();
                            Data message = Data.fromBytes(delivery.getBody());
                            //Data message = (Data) SerializationUtils.deserialize(delivery.getBody());

                            System.out.println(" [" + (i++) +"] Received" + message.getBody());

                            channel.basicAck(delivery.getEnvelope().getDeliveryTag(), false);
                        }catch (Exception e){
                        }
                    }
        } catch (Exception e){
            e.printStackTrace();
        }
        channel.close();
        connection.close();
    }

} 
```

这是我的数据类：

```
package com.mdnaRabbit.worker.data;

import java.io.*;
import java.util.logging.Level;
import java.util.logging.Logger;

public class Data implements Serializable{

    public String header;
    public String body;
    public String domainId;
    public String sender;
    public String receiver;

    public void setHeader(String head){
        this.header = head;
    }

    public String getHeader(){
        return header;
    }

    public void setBody(String body){
        this.body = body;
    }

    public String getBody(){
        return body;
    }

    public void setDomainId(String domainId){
        this.domainId = domainId;
    }

    public String getDomainId(){
        return domainId;
    }

    public void setSender(String sender){
        this.sender = sender;
    }

    public String getSender(){
        return sender;
    }

    public String getReceiver(){
        return receiver;
    }

    public void setReceiver(String receiver){
        this.receiver = receiver;
    }

    public byte[] getBytes() {
        byte[]bytes;
        ByteArrayOutputStream baos = new ByteArrayOutputStream();
        try{
            ObjectOutputStream oos = new ObjectOutputStream(baos);
            oos.writeObject(this);
            oos.flush();
            oos.reset();
            bytes = baos.toByteArray();
            oos.close();
            baos.close();
        } catch(IOException e){
            bytes = new byte[] {};
            Logger.getLogger("bsdlog").log(Level.ALL, "unable to write to output stream" + e);
        }
        return bytes;
    }

    public static Data fromBytes(byte[] body) {
        Data obj = null;
        try {
            ByteArrayInputStream bis = new ByteArrayInputStream(body);
            ObjectInputStream ois = new ObjectInputStream(bis);
            obj = (Data) ois.readObject();
            ois.close();
            bis.close();
        }
        catch (IOException e) {
            e.printStackTrace();
        }
        catch (ClassNotFoundException ex) {
            ex.printStackTrace();
        }
        return obj;
    }
} 
```

我似乎总是消费者收到消息，因为当我不尝试将其转换为对象并只写 `System.out.println(delivery.getBody)` 它时显示字节

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T12:58:09.920

看起来您收到的字节数组是空的。发生这种情况是因为：

```
 } catch(IOException e){
        bytes = new byte[] {};
    } 
```

产生异常时，代码不会警告您某些内容已损坏，而只会发送一个空数组。**您至少应该记录错误。**

产生异常可能是因为您试图序列化一个不可序列化的类。要使类可序列化，您必须在其声明中添加“implements Serializable”：

```
public class Data implements Serializable { 
```

# python - 在python中计算单词

> ID：15524030
> 
> 赞同：0
> 
> 时间：2013-03-20T12:50:06.960
> 
> 标签：python, list, logging, dictionary, system

谁能告诉我如何计算一个单词在字典中出现的次数。我已经将一个文件读入终端到一个列表中。我是否需要将列表放入字典或开始将文件读入终端放入字典而不是列表？该文件是一个日志文件，如果这很重要......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T12:51:49.173

你应该调查一下`collections.Counter`。你的问题有点不清楚。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T13:06:36.393

简短的例子：

```
from collections import Counter

s = 'red blue red green blue blue'

Counter(s.split())
> Counter({'blue': 3, 'red': 2, 'green': 1})

Counter(s.split()).most_common(2)
> [('blue', 3), ('red', 2)] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T13:00:51.130

collections.Counter 有它。

我想那里给出的例子符合你的要求

```
from collections import Counter
import re
words = re.findall(r'\w+', open('log file here.txt').read().lower())
cont = Counter(words)
#to get the count of required_word
print cont['required_word'] 
```

# image-resizing - xslfo 中的内联图像呈现为块

> ID：15524036
> 
> 赞同：1
> 
> 时间：2013-03-20T12:50:20.737
> 
> 标签：image-resizing, xsl-fo, apache-fop

我面临 XSLFO 的问题 - FOP 图像渲染，我有几个不同大小的图像。一些小图像与文本对齐，一些是占据定义空间的大图像，在显示大图像时它会超出视口，我在[雅虎组](http://groups.yahoo.com/group/XSL-FO/message/5861)找到了一个可行的解决方案，将其限制在视口内，但是给定的灵魂将小图像和大图像都渲染为块。但我需要将内联图像渲染为内联本身而不是块。

我正在使用以下代码来渲染图像

```
<fo:external-graphic src="file:{./@src}" width="90%" content-width="scale-to-fit" scaling="uniform" content-height="100%" vertical-align="middle"/> 
```

图片标签不包含任何关于内联或块的信息。

样本： `<img src="images/real_world_example.jpg" />`

![问题截图](../Images/dad273610a11b2595e19a4b61dfe7c9b.png)

上图中的文字应与图像对齐

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T15:00:50.450

我无法对其进行测试，但我认为问题出在您的`width="90%"`. 只需删除它，它应该可以按您的预期工作。

# c# - Visual Studio：如何从 VS 包中获取 IDebugEngine2（IVsLoader 除外）

> ID：15524038
> 
> 赞同：3
> 
> 时间：2013-03-20T12:50:25.227
> 
> 标签：c#, visual-studio, visual-studio-extensions

是否可以在不使用方法（[在此处](http://social.msdn.microsoft.com/Forums/en-US/vsx/thread/3b75164e-31c4-49c8-923f-2b91be49080a)描述）的情况下从 Visual Studio 包中获取`IDebugEngine2`（[MSDN](http://msdn.microsoft.com/en-nz/library/bb145310.aspx) ）的列表或特定实例？ `IVsLoader`

通常，我希望大多数服务都可以通过`GetService`直接或通过其他服务提供。但是我不能轻易找到任何可以提供调试引擎的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T13:49:15.573

你想用它做什么？调试器接口*非常*脆弱。通常有 2、3 或更多可能的方式来使用调试器接口执行操作，但特定的 DE 实现仅支持其中一种。**调试引擎实现者不希望从除 Visual Studio 本身之外的任何地方对其调试引擎接口进行任何直接调用，如果您尝试它，则破坏调试器功能的风险介于非常高和有保证之间。**

例如，以下是告诉 DE 启动和/或附加到进程的一些潜在方法：

*   `IDebugEngineLaunch2.LaunchSuspended`
*   `IDebugPortEx2.LaunchSuspended`
*   `IDebugProgramEx2.Attach`
*   `IDebugProgramNode2.Attach_V7`
*   `IDebugProgramNodeAttach2.OnAttach`
*   `IDebugEngine2.Attach`
*   `IVsDebuggableProjectCfg.DebugLaunch`
*   `VsShellUtilities.LaunchDebugger`
*   `IVsDebugger2.LaunchDebugTargets`
*   `IVsDebugger2.LaunchDebugTargets2`

**编辑 1：**在我的[Java debugger](https://twitter.com/samharwell/status/312051828009361409)的情况下，调试引擎由会话管理器创建，具有以下堆栈：

*   我的代码调用`IVsDebugger2.LaunchDebugTargets2`
*   环境回调我的实现`IDebugProgramProvider2.WatchForProviderEvents`
*   在创建一个新实例（从VS 传递给的 VS 获得`IDebugProgram2`的副本传递给构造函数）之后，我的代码调用`IDebugProcess2``IDebugDefaultPort2``WatchForProviderEvents``IDebugProgram2``IDebugPortNotify2.AddProgramNode`
*   环境回调我的调试引擎的构造函数

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2020-05-26T10:44:15.420

我最近正在调查同样的问题，最终发现您可以通过`ILocalRegistry3.CreateInstance`!

请[在此处](https://stackoverflow.com/questions/62013752/create-arbitrary-visual-studio-com-object-such-as-idebugengine2-from-guid)查看我的帖子以获取更多信息

# c# - 为什么在 VB.NET 和 C# 中检查 null 值会有所不同？

> ID：15524045
> 
> 赞同：113
> 
> 时间：2013-03-20T12:50:39.983
> 
> 标签：c#, vb.net, .net-4.0, null

在[VB.NET](http://en.wikipedia.org/wiki/Visual_Basic_.NET)中会发生这种情况：

```
Dim x As System.Nullable(Of Decimal) = Nothing
Dim y As System.Nullable(Of Decimal) = Nothing

y = 5
If x <> y Then
    Console.WriteLine("true")
Else
    Console.WriteLine("false") '' <-- I got this. Why?
End If 
```

但是在 C# 中会发生这种情况：

```
decimal? x = default(decimal?);
decimal? y = default(decimal?);

y = 5;
if (x != y)
{
    Debug.WriteLine("true"); // <-- I got this -- I'm with you, C# :)
}
else
{
    Debug.WriteLine("false");
} 
```

为什么有区别？

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2013-03-20T12:56:55.170

VB.NET 和 C#.NET 是不同的语言，由对使用做出不同假设的不同团队构建；在这种情况下，NULL 比较的语义。

我个人偏爱 VB.NET 语义，它本质上赋予 NULL 语义“我还不知道”。然后将 5 与“我还不知道”进行比较。自然是“我还不知道”；即NULL。这具有在（大多数如果不是全部）SQL 数据库中镜像 NULL 行为的额外优势。这也是对三值逻辑的更标准（比 C# 的）解释，如此[处](http://en.wikipedia.org/wiki/Three-valued_logic)所述。

C# 团队对 NULL 的含义做出了不同的假设，从而导致您表现出的行为差异。[Eric Lippert 写了一篇关于 C# 中 NULL 含义的博客](http://blogs.msdn.com/b/ericlippert/archive/2012/03/26/null-is-not-false.aspx)。[Per Eric Lippert：“我还在这里](http://blogs.msdn.com/b/ericlippert/archive/2003/09/30/53120.aspx)和 [这里](http://blogs.msdn.com/b/ericlippert/archive/2003/10/01/53128.aspx)写了关于 VB / VBScript 和 JScript 中空值的语义”。

在任何可能出现 NULL 值的环境中，重要的是要认识到排中定律（即 A 或 ~A 在重言式上为真）不再可以依赖。

**更新：**

A `bool`（相对于 a `bool?`）只能取值 TRUE 和 FALSE。然而，NULL 的语言实现必须决定 NULL 如何通过表达式传播。在 VB 中，表达式`5=null`和两者都`5<>null`返回 false。在 C# 中，在可比较的表达式中`5==null`，`5!=null`只有~~第二个~~第一个*[updated 2014-03-02 - PG]*返回 false。但是，在任何支持 null 的环境中，程序员都有责任了解该语言使用的真值表和 null 传播。

**更新**

Eric Lippert 关于语义的博客文章（在下面的评论中提到）现在位于：

*   [2003 年 9 月 30 日 - 一无所有](https://ericlippert.com/2003/09/30/a-whole-lot-of-nothing/)

*   [2003 年 10 月 1 日 - 再谈一点](https://ericlippert.com/2003/10/01/a-little-more-on-nothing/)

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2013-03-20T12:55:46.293

因为`x <> y`返回`Nothing`而不是`true`. 它只是没有定义，因为`x`没有定义。（类似于 SQL 空值）。

注意：VB.NET `Nothing`<> C# `null`。

您还必须`Nullable(Of Decimal)`仅在 a 有值时才比较它的值。

所以上面的 VB.NET 比较类似于这个（看起来不那么不正确）：

```
If x.HasValue AndAlso y.HasValue AndAlso x <> y Then
    Console.WriteLine("true")
Else
    Console.WriteLine("false")  
End If 
```

VB.NET[语言规范](http://www.microsoft.com/en-us/download/details.aspx?id=15039)：

> **7.1.1 可空值类型** ... 可空值类型可以包含与该类型的不可空版本以及空值相同的值。因此，对于可空值类型，将 Nothing 分配给该类型的变量会将变量的值设置为空值，而不是值类型的零值。

例如：

```
Dim x As Integer = Nothing
Dim y As Integer? = Nothing

Console.WriteLine(x) ' Prints zero '
Console.WriteLine(y) ' Prints nothing (because the value of y is the null value) ' 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2013-03-20T12:58:48.287

查看生成的[CIL](http://en.wikipedia.org/wiki/Common_Intermediate_Language)（我已将两者都转换为 C#）：

C＃：

```
private static void Main(string[] args)
{
    decimal? x = null;
    decimal? y = null;
    y = 5M;
    decimal? CS$0$0000 = x;
    decimal? CS$0$0001 = y;
    if ((CS$0$0000.GetValueOrDefault() != CS$0$0001.GetValueOrDefault()) ||
        (CS$0$0000.HasValue != CS$0$0001.HasValue))
    {
        Console.WriteLine("true");
    }
    else
    {
        Console.WriteLine("false");
    }
} 
```

视觉基础：

```
[STAThread]
public static void Main()
{
    decimal? x = null;
    decimal? y = null;
    y = 5M;
    bool? VB$LW$t_struct$S3 = new bool?(decimal.Compare(x.GetValueOrDefault(), y.GetValueOrDefault()) != 0);
    bool? VB$LW$t_struct$S1 = (x.HasValue & y.HasValue) ? VB$LW$t_struct$S3 : null;
    if (VB$LW$t_struct$S1.GetValueOrDefault())
    {
        Console.WriteLine("true");
    }
    else
    {
        Console.WriteLine("false");
    }
} 
```

您将看到 Visual Basic 中的比较返回 Nullable<bool>（不是 bool、false 或 true！）。而 undefined 转换为 bool 是假的。

`Nothing`与 Visual Basic 中的 always `Nothing`，not false 相比（它与 SQL 中的相同）。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-03-20T20:47:33.277

这里观察到的问题是一个更一般问题的特例，即至少在某些情况下可能有用的不同相等定义的数量超过了表达它们的常用方法的数量。在某些情况下，这个问题会因为一种不幸的信念而变得更糟，即使用不同的相等性测试方法会产生不同的结果是令人困惑的，而这种混淆可以通过尽可能让不同形式的相等性产生相同的结果来避免。

实际上，混淆的根本原因是一种错误的信念，即认为不同形式的等式和不等式测试应该会产生相同的结果，尽管不同的语义在不同的情况下是有用的。例如，从算术的角度来看，能够使`Decimal`仅在尾随零的数量上不同的比较相等是有​​用的。对于`double`像正零和负零这样的值也是如此。另一方面，从缓存或实习的角度来看，这种语义可能是致命的。例如，假设一个人有一个`Dictionary<Decimal, String>`这样的`myDict[someDecimal]`应该等于`someDecimal.ToString()`。如果一个对象有很多，这样一个对象似乎是合理的`Decimal`想要转换为字符串并期望有很多重复的值。不幸的是，如果使用这种缓存来转换 12.3 m 和 12.40 m，然后是 12.30 m 和 12.4 m，则后面的值将产生“12.3”和“12.40”而不是“12.30”和“12.4”。

回到手头的问题，比较可空对象是否相等的明智方法不止一种。C# 认为它的`==`操作符应该反映`Equals`. [VB.NET](http://en.wikipedia.org/wiki/Visual_Basic_.NET)的立场是它的行为应该反映一些其他语言的行为，因为任何想要这种`Equals`行为的人都可以使用`Equals`. 从某种意义上说，正确的解决方案是使用三向“if”构造，并要求如果条件表达式返回三值结果，代码必须指定在这种`null`情况下应该发生什么。由于这不是语言的选择，因此下一个最佳选择是简单地了解不同语言的工作原理并认识到它们是不同的。

顺便说一句，Visual Basic 的“Is”运算符（C 中缺少）可用于测试可空对象是否实际上为空。虽然人们可能会合理地质疑`if`测试是否应该接受 a `Boolean?`，但让正常的比较运算符返回`Boolean?`而不是`Boolean`在可空类型上调用时是一个有用的特性。顺便说一句，在 VB.NET 中，如果尝试使用等式运算符而不是`Is`，则会收到一条警告，指出比较的结果将始终为，如果想要测试某项是否为空，则`Nothing`应该使用。`Is`

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-03-20T12:55:07.207

也许 [这篇](https://stackoverflow.com/questions/303502/c-sharp-vs-vb-net-handling-of-null-structures) 文章可以很好地帮助你：

如果我没记错的话，VB 中的“Nothing”表示“默认值”。对于值类型，这是默认值，对于引用类型，这将是 null。因此，没有为结构分配任何内容根本没有问题。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-03-20T12:59:47.277

这是 VB 的一个明显的怪异之处。

在 VB 中，如果你想比较两个可以为空的类型，你应该使用`Nullable.Equals()`.

在您的示例中，它应该是：

```
Dim x As System.Nullable(Of Decimal) = Nothing
Dim y As System.Nullable(Of Decimal) = Nothing

y = 5
If Not Nullable.Equals(x, y) Then
    Console.WriteLine("true")
Else
    Console.WriteLine("false")
End If 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-20T15:44:11.283

您的 VB 代码完全不正确 - 如果将“x <> y”更改为“x = y”，结果仍然是“false”。对于可空实例，最常见的表达方式是“Not x.Equals(y)”，这将产生与 C# 中的“x!= y”相同的行为。

# javascript - 调整窗口大小时如何更改div的左边距？

> ID：15524048
> 
> 赞同：5
> 
> 时间：2013-03-20T12:50:47.973
> 
> 标签：javascript, jquery, html, css

我想在调整窗口大小时将红色边框 div 放在绿色边框的左侧。
目前 div 有以下 css 规则：

```
#twitter-2 { 
width: 332px; 
background-color: #7E7D7D; 
opacity: 0.6; 
margin-left:525px; 
margin-top:-142px; 
} 
```

![http://imageshack.us/download/20/changemargin.jpg](../Images/828b9b9dd16267e3146b53308a121929.png)

我解决了这个问题：

```
window.onresize = function(event) {
    var elem = document.getElementById("twitter-2");
    elem.setAttribute("style","margin: 20px 1px;");
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T12:56:18.920

你可以使用媒体查询

并通过重新调整窗口大小来测试您的网站

在哪个设备上调整您想要的内容，并始终尝试使用 %'s not px's

为您提供的一些媒体查询[感谢 Chris](http://css-tricks.com/snippets/css/media-queries-for-standard-devices/)

```
/* Smartphones (portrait and landscape) ----------- */
@media only screen 
and (min-device-width : 320px) 
and (max-device-width : 480px) {
/* Styles */
}

/* Smartphones (landscape) ----------- */
@media only screen 
and (min-width : 321px) {
/* Styles */
}

/* Smartphones (portrait) ----------- */
@media only screen 
and (max-width : 320px) {
/* Styles */
}

/* iPads (portrait and landscape) ----------- */
@media only screen 
and (min-device-width : 768px) 
and (max-device-width : 1024px) {
/* Styles */

Like This 
#twitter-2 { 
margin-left:Some Value ; 
margin-top:Some Value ; 
}
    }

/* iPads (landscape) ----------- */
@media only screen 
and (min-device-width : 768px) 
and (max-device-width : 1024px) 
and (orientation : landscape) {
/* Styles */
}

/* iPads (portrait) ----------- */
@media only screen 
and (min-device-width : 768px) 
and (max-device-width : 1024px) 
and (orientation : portrait) {
/* Styles */
}

/* Desktops and laptops ----------- */
@media only screen 
and (min-width : 1224px) {
/* Styles */
}

/* Large screens ----------- */
@media only screen 
and (min-width : 1824px) {
/* Styles */
}

/* iPhone 4 ----------- */
@media
only screen and (-webkit-min-device-pixel-ratio : 1.5),
only screen and (min-device-pixel-ratio : 1.5) {
/* Styles */
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T12:57:58.770

试试看

**CSS**

```
.red { 
    width: 332px; 
    background-color: #7E7D7D; 
    opacity: 0.6; 
    margin-left:525px; 
    margin-top:-142px; 
}

.green { 
    width: 332px; 
    background-color: #7E7D7D; 
    opacity: 0.6; 
    margin-left:25px; 
    margin-top:-342px; 
} 
```

假设目前你`twitter-2 div`有`class red`

上`window.resize function`

```
$(window).resize(function(){
   $('#twitter-2').addClass('green').removeClass('red');
}); 
```

您也可以根据需要进行不同`width`的操作。

阅读[http://api.jquery.com/resize/](http://api.jquery.com/resize/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T13:00:29.090

把整条线放在一个容器上，左右浮动，空间太小，盒子自然会往下走。

```
<div class="row">
    <div class="follow">keep in touch</div>
    <div class="tweet-update">bla bla</div>
</div>

.follow {float:left; margin-bottom:30px;}
.tweet-update {float:right} 
```

# iphone - 使 UITextField(UIScrollView) 的底部透明

> ID：15524051
> 
> 赞同：0
> 
> 时间：2013-03-20T12:50:51.530
> 
> 标签：iphone, ios, objective-c, uiscrollview

这是一个很好的例子来总结它：

![在此处输入图像描述](../Images/d99b84ef4b3653b5e0f4f2d16d6e3d48.png)

这是一个`UITextField`包含长文本的文本，因此用户可以向下滚动以查看其余文本。

如何使底部行显示为“透明”？

`UITextField`只允许设置全局文本属性（如颜色、字体大小等）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T12:54:51.713

诀窍是创建一个包含渐变的 CALayer 并将其用作 UIView 层的遮罩层（将使用遮罩层的 alpha 值。）请参阅此答案：
[具有淡入淡出或模糊效果的 UIView 边框](https://stackoverflow.com/questions/2306043/uiview-border-with-fade-or-blur-effect/2348337#2348337)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T12:54:59.890

[这将对您有所帮助。](http://www.cocoacontrols.com/controls/fadingtextview)不确定，但有一些你想要的功能。

希望这对您有所帮助。

祝一切顺利 ！！！

# build - Jenkins 没有在 SQS 消息到达时开始构建

> ID：15524056
> 
> 赞同：0
> 
> 时间：2013-03-20T12:51:08.270
> 
> 标签：build, jenkins, jenkins-plugins, amazon-sqs

*工具：*

*   詹金斯 1.506 版
*   GitHub
*   GitHub SQS 插件 1.4

Jenkins 配置为使用消息和 GitHub 以通过 Amazon SQS 发送它们（设置活动密钥和秘密密钥以及队列名称）。还为具有“将消息发布到 SQS 队列时构建”的模块进行了配置。消息由 GitHub 发送并由 Jenkins 根据需要使用。我可以在 Jenkins 中看到 SQS 活动（见下文），但由于某种原因，Jenkins 没有触发构建。

我想知道我们缺少什么？

上次 SQS 活动

> 开始于 2013 年 3 月 20 日上午 3:03:49 使用策略：默认 [poll] Last Build : #16 [poll] Last Built Revision: Revision 408d9c4d6412e44737b62f25e9c36fc8b3b074ca (origin/maple-sprint-4) 从远程 Git 存储库获取更改上游更改从源轮询完成更改。花了 1.3 秒发现更改

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T18:35:33.237

我必须设置“轮询 SCM”并设置句号“* * * * *”才能成功！

# html - 跨多个 HTML 文档提取信息

> ID：15524058
> 
> 赞同：2
> 
> 时间：2013-03-20T12:51:11.217
> 
> 标签：html, beautifulsoup, extraction

我有一个问题，我有大约 700 个 html 文档，每个文档都包含一个包含在跨度中的字母，所有这些都在给定的同一类中。

有没有办法取出所有的字母并将它们连接在一起？也许使用 BeautifulSoup 或其他方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T17:39:11.360

当然有。尝试这样的事情：

```
import os
from BeautifulSoup import BeautifulSoup

letter_list = []
for file in os.listdir('path/to/dir'):
    with open('path/to/file', 'r') as html_file:
        html = ' '.join(str(x) for x in list(html_file)) # Combines each row in file into a single string
        soup = BeautifulSoup(html)

        letter = soup('span',{'class':'someclass'})[0].contents[0]
        letter_list.append(letter)

my_string = ''.join(str(x) for x in letter_list) 
```

这将遍历目录，打开每个 html 文件并解析字符串。提取的字母将附加到列表中，并在解析完所有文件后加入。

# xaml - 为什么手机 SDK 中缺少 XAML 的功能？

> ID：15524060
> 
> 赞同：-1
> 
> 时间：2013-03-20T12:51:15.477
> 
> 标签：xaml, windows-phone-8

手机上似乎不支持 XAML 的各个部分，而桌面上则支持这些部分。我昨天创建了一个关于手机 SDK 的 XAML 中的位置`WrapPanel`或未包含的问题。`UniformGrid`

为什么 XAML 不同且缺少某些功能？

另一方面，当您尝试在 Google 上搜索有关某个主题的文档或帮助时，或者如何从 XAML 手机 SDK 问题中获得解决方案时，它会变得很困难，因为您会获得 XAML 桌面开发的结果，手机不支持。搜索 Microsoft Docs 也很困难，因为它们不会告诉您电话 SDK 中包含或不包含的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T12:57:19.763

如果您想知道差异，您需要查看 MSDN 文章，例如

[http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj735581%28v=vs.105%29.aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj735581%28v=vs.105%29.aspx)

这将详细介绍共享 UI 的限制

[http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj714088%28v=vs.105%29.aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj714088%28v=vs.105%29.aspx)

但是，要回答您的问题：

> Windows Phone 8 上的 XAML 和 Windows 8 上的 XAML 不是二进制兼容的。如前所述，用于在每个平台上构建 UI 的控件是相似的。它们在名称、行为以及它们公开的编程接口或语法上相似。但是，它们是专门为每个平台实现的。
> 
> 命名空间前缀在 Windows Phone 8 的 XAML 和 Windows 8 的 XAML 中是不同的。当您从头开始创建基本页面时，通过查看包含在基本页面中的命名空间来说明这一点。

# jquery - jquery json响应中的无效xml属性

> ID：15524065
> 
> 赞同：0
> 
> 时间：2013-03-20T12:51:45.773
> 
> 标签：jquery, json

我正在尝试从不同的服务器获取数据。为此，我使用了一种使用 jquery 的身份验证方法。应该从该服务器接收的数据应该是 json 格式，但我在 firebug 中收到以下错误（无效的 XML 属性值）。

以下是我的要求： 1）为了进行身份验证，提供的参数如下面的代码所示。通过直接在远程服务器中提供相同的参数，我可以获得身份验证的真实值。但是，当从这个应用程序传递相同的请求时，它给了我无效的 xml 属性。 **Firebug 控制台中的错误** 搜索 JServer Json 测试页面 Json 输入：

2) 我想从远程服务器获取 json 格式的响应

任何帮助，将不胜感激。

以下是 html 文件中的代码。

```
 <!DOCTYPE html>
 <html lang='en'>
<head>
<script src="http://code.jquery.com/jquery-1.4.3.js">
</script>
<script language="javascript" type="text/javascript">
$(document).ready(function () {
$('form').submit(function() {
alert("within submit");  
alert(    $(this).attr('method'));
var url =     $(this).attr('action')
var userName =     $("#username").val();
var password =     $("#password").val();
var params = '{"token": "","messages": [{"props": {"type": "Auth","id"00001","user":' + '"' + userName + '"' + "," + '"pass":' + '"' + password + '" }}]}'
alert(url);
alert(params);
  $.get(url,params, function(data) {  
   alert("1111");
},
"jsonp" );
 return false
});

})

</script>
</head>
<body>
<div id="login-details">
<form id="contact" action="remote_server_url" method="post">
<input type="text" name="username" id="username" class="text" />
<br />
<input type="password" name="password" id="password" class="text" />
<br />
<input type="submit" name="btnSubmit" id="btnSubmit" />
</div>
</form>
<div id="first-page">    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T12:37:53.720

尝试使用 getjson()。这会将 json 作为对象返回。

```
$.getJSON(url,params,function(data) {
alert(data);
})
; 
```

# android - 在后台连续运行一个广播接收器来监控网络状态..

> ID：15524067
> 
> 赞同：1
> 
> 时间：2013-03-20T12:51:46.700
> 
> 标签：android, broadcastreceiver, intentfilter, android-location, android-networking

我正在编写一个 android 应用程序以在每分钟后在后台持续监控网络...我正在使用 BroadcastReceiver...它在启动完成时启动...在 BroadcastReceiver 内部我正在做以下事情

```
 a. Monitor Network
       b. check signal strength
       c. fetch longitude and latitude
       d. fetch phonenumber 
       e. fetch operatorname

     and i am saving all the above information into a Database table.... 
```

但不幸的是，当我在 android 设备上安装和运行它时，这个应用程序给了我一些错误

我的 BroadcastReceiver 代码是：-

```
public class NetworkInfoReceiver extends BroadcastReceiver{

    private NetworkInfoVO networkInfoVO = new NetworkInfoVO();
    private String strNetworkInfo = QualityofServiceConstants.DEFAULT_NETWORK_INFO;
    private SignalStrengthPhoneStateListner signalStrengthPhoneStateListner =  new SignalStrengthPhoneStateListner();

    @Override
    public void onReceive(Context context, Intent intent) {

        Toast.makeText(context, "Started", Toast.LENGTH_SHORT).show();

        ConnectivityManager connectivityManager = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);
        TelephonyManager telephonyManager = (TelephonyManager) context.getSystemService(Context.TELEPHONY_SERVICE);

        NetworkInfo networkInfo = connectivityManager.getActiveNetworkInfo();

                //Check Network status here
        if(networkInfo!=null && networkInfo.isConnected()){
            String networkState = getNetworkStateString(networkInfo.getState());
            String stateString = networkInfo.toString().replace(',', '\n');
            strNetworkInfo = String.format("Network Type: %s\n Network State: %s\n\n %s",
            networkInfo.getTypeName(),networkState,stateString);
        }

                //check signal strength here
        telephonyManager.listen(signalStrengthPhoneStateListner, PhoneStateListener.LISTEN_SIGNAL_STRENGTHS);

        networkInfoVO.setNetworkInfo(strNetworkInfo);
                //get phonenumber here
        networkInfoVO.setPhoneNumber(telephonyManager.getLine1Number());
                //get operator name here
        networkInfoVO.setServiceProvider(telephonyManager.getNetworkOperatorName());
//get signal strength here      networkInfoVO.setSignalStrength(signalStrengthPhoneStateListner.getSignalStrengths());
                //get latitude here
        networkInfoVO.setLatitude(String.valueOf(getGPS(context).getLatitude()));
                //get longitude here
        networkInfoVO.setLongitude(String.valueOf(getGPS(context).getLongitude()));
        networkInfoVO.setTime(new Date().toString());

        new NetworkInfoDatabaseHelper(context).saveRecord(networkInfoVO);

        try {
            Thread.sleep(60000);
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }

    private String getNetworkStateString(NetworkInfo.State state){

        String stateString = QualityofServiceConstants.NETWORK_STATE_UNKNOWN;

        switch(state)
        {
        case CONNECTED: 
            stateString = QualityofServiceConstants.NETWORK_STATE_CONNECTED;             
            break;

        case CONNECTING:        
            stateString = QualityofServiceConstants.NETWORK_STATE_CONNECTING;    
            break;

        case DISCONNECTED:      
            stateString = QualityofServiceConstants.NETWORK_STATE_DISCONNECTED;  
            break;

        case DISCONNECTING:     
            stateString = QualityofServiceConstants.NETWORK_STATE_DISCONNECTING;  
            break;

        case SUSPENDED:         
            stateString = QualityofServiceConstants.NETWORK_STATE_SUSPENDED;              
            break;

        default: 
            stateString = QualityofServiceConstants.NETWORK_STATE_UNKNOWN;     

            break;

        }

        return stateString;
    }

    private Location getGPS(Context context){

        LocationManager locationManager = (LocationManager) context.getSystemService(Context.LOCATION_SERVICE);
        List<String>providers = locationManager.getProviders(true);
        Location location = null;

        for (int i = providers.size()-1; i >= 0; i--){
            location = locationManager.getLastKnownLocation(providers.get(i));
            if(location!=null)
                break;
        }

        return location;
    }

    private class SignalStrengthPhoneStateListner extends PhoneStateListener{

        private String signalStrengths;

        @Override
        public void onSignalStrengthsChanged(SignalStrength signalStrength) {
            super.onSignalStrengthsChanged(signalStrength);

            if(signalStrength.getGsmSignalStrength() > 30){
                signalStrengths = "Signal Strength :" + signalStrength.getGsmSignalStrength() + " Good";
            }else if(signalStrength.getGsmSignalStrength() > 20 && signalStrength.getGsmSignalStrength() < 30){
                signalStrengths = "Signal Strength : " + signalStrength.getGsmSignalStrength() + " Average";
            }else if(signalStrength.getGsmSignalStrength() < 20){
                signalStrengths = "Signal Strength : " + signalStrength.getGsmSignalStrength() + " Weak";
            }

        }

        public String getSignalStrengths() {
            return signalStrengths;
        }

    }

} 
```

我的清单文件是：-

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="compervazive.lognetworkinfo"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED"/>
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
    <uses-permission android:name="android.permission.CHANGE_NETWORK_STATE" />
    <uses-permission android:name="android.permission.READ_PHONE_STATE"/>
    <uses-permission android:name="android.permission.ACCESS_WIFI_STATE"/>
    <uses-permission android:name="android.permission.CHANGE_WIFI_STATE"/>
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
    <uses-permission android:name="android.permission.ACCESS_CORSE_LOCATION"/>

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <receiver android:name="com.example.qos.broadcastreceiver.NetworkInfoReceiver" >
            <intent-filter>
                <action android:name="android.intent.action._BOOT_COMPLETED"/>
                 <action android:name="android.net.conn.CONNECTIVITY_CHANGE"/>
                 <action android:name="android.net.wifi.WIFI_STATE_CHANGED"/>
                 <action android:name="android.net.wifi.STATE_CHANGE"/>
                 <action android:name="android.intent.action.SIG_STR"/>                                                                                                                                     
            </intent-filter>

        </receiver>
    </application>

</manifest> 
```

请让我知道这是什么问题....感谢您的时间:-)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T13:28:23.410

```
Thread.sleep(60000); 
```

这是一个非常糟糕的主意，删除它并重新阅读 BroadcastReceiver 的文档。也许会有所帮助。

此外，您的清单中没有任何活动。添加至少一个主要的启动器活动。任何应用程序都必须至少有一个。

PS 向我们提供有关您遇到的错误的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T13:04:53.760

```
android.intent.action._BOOT_COMPLETED 
```

应该是

```
android.intent.action.BOOT_COMPLETED 
```

# knockout.js - 如何在淘汰赛中绑定到可观察数组中的项目？

> ID：15524071
> 
> 赞同：1
> 
> 时间：2013-03-20T12:51:52.837
> 
> 标签：knockout.js

我有以下可观察数组：

```
self.Profiles =ko.observableArray( ko.utils.arrayMap(initialData, function (profile) {
                return {
                    StartDate : formatDateOnly(profile.StartDate),
                    EndDate : formatDateOnly(profile.EndDate),
                    ProfileID :profile.ID,
                    ProfileName : profile.Name,
                    ProjectName : profile.ProjectName,
                    ReadingListID : profile.ReadingListID,
                    ReadingListName : profile.ReadingListName

                };
            })); 
```

我想将下拉列表绑定到配置文件以显示配置文件名称，如果下拉列表的值发生更改，那么我想使用新的对应值更新 span 元素到所选的 profileID。

```
<table id="readingListApplyToProfile" class="fullWidthTable">
        <tr>
            <td>
                Profile:
            </td>
            <td>
                <select id="cboProfile" name="cboProfile" data-bind="options: Profiles, optionsText: 'ProfileName', 'optionsCaption': 'Select profile...', optionsValue:'ProfileID'"></select>
            </td>
        </tr>
        <tr>
            <td>
                End Date:
            </td>
            <td>
                <span data-bind="'text':EndDate"></span>
            </td>
        </tr>
    </table> 
```

我无法更新跨度，因为跨度元素不知道下拉列表的值，任何人都可以帮助我。我完全迷路了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T13:30:15.350

您缺少的是下拉列表中的值绑定。这是我创建的小提琴。

[http://jsfiddle.net/sujesharukil/sBZvb/1/](http://jsfiddle.net/sujesharukil/sBZvb/1/)

```
<select id="cboProfile" name="cboProfile" data-bind="options: Profiles, optionsText: 'ProfileName', 'optionsCaption': 'Select profile...', optionsValue:'ProfileID', value: selectedProfileId "> 
```

这是视图模型

```
var myViewModel = function()
{
    var self = this;
        this.Profiles =ko.observableArray([{
                    StartDate : '02/01/2012',
                    EndDate : '01/01/2013',
                    ProfileID :10,
                    ProfileName : 'Some Name',
                    ProjectName : 'Some Project',
                    ReadingListID : 100,
                    ReadingListName : 'Some List',
                },
                {
                    StartDate : '12/01/2012',
                    EndDate : '02/27/2013',
                    ProfileID :12,
                    ProfileName : 'New Name',
                    ProjectName : 'New Project',
                    ReadingListID : 200,
                }]);
    this.selectedProfileId = ko.observable({}); //this stores the selected id

}

ko.applyBindings(new myViewModel()); 
```

希望有帮助。

苏杰

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T13:55:58.493

我有一个 computedObservable 的想法，它接受 ProfileID 并输出与该 ID 对应的 Profile，然后将 span 绑定到输出对象的各种属性。令人惊讶的是，它奏效了。我在摆弄 Sujesh Arukil 的小提琴来尝试我的想法，所以模型非常相似。

显示多个跨度的工作示例：http: [//jsfiddle.net/jonhopkins/fgZNQ/2/](http://jsfiddle.net/jonhopkins/fgZNQ/2/)

该模型：

```
var myViewModel = function()
{
    var self = this;
        self.Profiles =ko.observableArray([{
                    StartDate : '02/01/2012',
                    EndDate : '01/01/2013',
                    ProfileID :10,
                    ProfileName : 'Some Name',
                    ProjectName : 'Some Project',
                    ReadingListID : 100,
                    ReadingListName : 'Some List',
                },
                {
                    StartDate : '12/01/2012',
                    EndDate : '02/27/2013',
                    ProfileID :12,
                    ProfileName : 'New Name',
                    ProjectName : 'New Project',
                    ReadingListID : 200,
                }]);

    self.selectedProfileId = ko.observable();

    self.getProfile = ko.computed({
        read: function() {
            for (var i = 0; i < self.Profiles().length; i++) {
                if (self.Profiles()[i].ProfileID == self.selectedProfileId()) {
                    return self.Profiles()[i];
                }
            }
            // in case there was no match, output a blank Profile
            return [{
                    StartDate : '',
                    EndDate : '',
                    ProfileID : '',
                    ProfileName : '',
                    ProjectName : '',
                    ReadingListID : '',
                    ReadingListName : ''
            }];
        },
        write: function(value) {
            self.selectedProfileId(value);
        },
        owner: self
    });
}

ko.applyBindings(new myViewModel()); 
```

**编辑：** Sujesh 提出了一个更好的 computedObservable 版本。

```
self.getProfile = ko.computed(function(){
    var profile = ko.utils.arrayFirst(self.Profiles(), function(prof){
        return prof.ProfileID == self.selectedProfileId();
    });

    return profile || {};
}); 
```

的HTML：

```
<table id="readingListApplyToProfile" class="fullWidthTable">
    <tr>
        <td>
            Profile:
        </td>
        <td>
            <select id="cboProfile" name="cboProfile" data-bind="options: Profiles, optionsText: 'ProfileName', 'optionsCaption': 'Select profile...', optionsValue:'ProfileID', value: getProfile "></select>
        </td>
    </tr>
    <tr>
        <td>
            End Date:
        </td>
        <td>
            <span data-bind="text: getProfile().ProfileName"></span>
        </td>
    </tr>
</table> 
```

# c++ - 如何确定数据点的两个分区（集群）是否相同？

> ID：15524077
> 
> 赞同：5
> 
> 时间：2013-03-20T12:52:06.567
> 
> 标签：c++, python, algorithm, matlab, cluster-analysis

我`n`在一些任意空间中有数据点，我对它们进行聚类。
我的聚类算法的结果是一个由`l`长度为 int 的向量表示的分区，`n`将每个点分配给一个集群。值的`l`范围从 0 到（可能）`n-1`。

例子：

```
l_1 = [ 1 1 1 0 0 2 6 ] 
```

将`n=7`点划分为 4 个簇：前三个点聚集在一起，第四个和第五个点在一起，最后两个点形成两个不同的单例簇。

### 我的问题：

假设我有两个分区`l_1`，`l_2`如何**有效地**确定它们是否代表相同的分区？

例子：

```
l_2 = [ 2 2 2 9 9 3 1 ] 
```

是相同的，`l_1`因为它表示点的相同分区（尽管集群的“数字”/“标签”不相同）。
另一方面

```
l_3 = [ 2 2 2 9 9 3 3 ] 
```

不再相同，因为它将最后两点组合在一起。

我正在寻找 C++、python 或 Matlab 中的解决方案。

### 不想要的方向

一种天真的方法是比较共现矩阵

```
c1 = bsxfun( @eq, l_1, l_1' );
c2 = bsxfun( @eq, l_2, l_2' );
l_1_l_2_are_identical = all( c1(:)==c2(:) ); 
```

共现矩阵`c1`的大小为`n`x `n`，`true`if 点位于同一簇中，`k`否则（无论簇“编号”/“标签”如何）。 因此，如果共现矩阵和相同，则和表示相同的分区。`m``false`
`c1``c2``l_1``l_2`

但是，由于点的数量`n`, 可能非常大，我想避免使用 O( `n^2`) 解决方案...

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T12:55:42.290

两个分区何时相同？

可能如果他们有完全相同的成员。

因此，如果您只想测试身份，您可以执行以下操作：

*用分区中最小*的对象 ID替换每个分区 ID 。

那么两个分区是相同的当且仅当这个表示是相同的。

在上面的示例中，假设向量索引 1 .. 7 是您的对象 ID。然后我会得到规范的形式

```
[ 1 1 1 4 4 6 7 ]
  ^ first occurrence at pos 1 of 1 in l_1 / 2 in l_2
        ^ first occurrence at pos 4 
```

对于 l_1 和 l_2，而 l_3 规范化为

```
[ 1 1 1 4 4 6 6 ] 
```

为了更清楚，这里是另一个例子：

```
l_4 = [ A B 0 D 0 B A ] 
```

规范化为

```
 [ 1 2 3 4 3 2 1 ] 
```

因为集群“A”的第一次出现在位置 1，“B”在位置 2 等等。

如果要测量两个聚类的*相似*程度，一个好的方法是查看对象对的精度/召回率/f1，其中 (a,b) 对存在当且仅当 a 和 b 属于同一个聚类。

**更新：**由于有人声称这是二次的，我将进一步澄清。

要生成规范形式，请使用以下方法（实际 python 代码）：

```
def canonical_form(li):
  """ Note, this implementation overwrites li """
  first = dict()
  for i in range(len(li)):
    v = first.get(li[i])
    if v is None:
      first[li[i]] = i
      v = i
    li[i] = v
  return li

print canonical_form([ 1, 1, 1, 0, 0, 2, 6 ])
# [0, 0, 0, 3, 3, 5, 6]
print canonical_form([ 2, 2, 2, 9, 9, 3, 1 ])
# [0, 0, 0, 3, 3, 5, 6]
print canonical_form([ 2, 2, 2, 9, 9, 3, 3 ])
# [0, 0, 0, 3, 3, 5, 5]
print canonical_form(['A','B',0,'D',0,'B','A'])
# [0, 1, 2, 3, 2, 1, 0]
print canonical_form([1,1,1,0,0,2,6]) == canonical_form([2,2,2,9,9,3,1])
# True
print canonical_form([1,1,1,0,0,2,6]) == canonical_form([2,2,2,9,9,3,3])
# False 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T13:46:15.330

如果您要重新标记分区，如前所述，您可能需要为 n 个项目中的每一个搜索 n 个标签。即解决方案是O(n^2)。

这是我的想法：同时扫描两个列表，为每个列表中的每个分区标签维护一个计数器。您需要能够将分区标签映射到计数器编号。如果每个列表的计数器不匹配，则分区不匹配。这将是 O(n)。

这是 Python 中的概念证明：

```
l_1 = [ 1, 1, 1, 0, 0, 2, 6 ]

l_2 = [ 2, 2, 2, 9, 9, 3, 1 ]

l_3 = [ 2, 2, 2, 9, 9, 3, 3 ]

d1 = dict()
d2 = dict()
c1 = []
c2 = []

# assume lists same length

match = True
for i in range(len(l_1)):
    if l_1[i] not in d1:
        x1 = len(c1)
        d1[l_1[i]] = x1
        c1.append(1)
    else:
        x1 = d1[l_1[i]]
        c1[x1] += 1

    if l_2[i] not in d2:
        x2 = len(c2)
        d2[l_2[i]] = x2
        c2.append(1)
    else:
        x2 = d2[l_2[i]]
        c2[x2] += 1

    if x1 != x2 or  c1[x1] != c2[x2]:
        match = False

print "match = {}".format(match) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T13:29:12.780

在matlab中：

```
function tf = isIdenticalClust( l_1, l_2 )
%
% checks if partitions l_1 and l_2 are identical or not
%
tf = all( accumarray( {l_1} , l_2 , [],@(x) all( x == x(1) ) ) == 1 ) &&...
     all( accumarray( {l_2} , l_1 , [],@(x) all( x == x(1) ) ) == 1 ); 
```

这是做什么的：根据分区对
所有元素进行分组，并检查每个集群中的所有元素是否都相同。根据重复相同的分区。 如果两个分组都产生同质集群 - 它们是相同的。`l_1``l_2``l_1``l_2``l_1`

# matlab - 如何在matlab中找到最适合精确召回曲线的线

> ID：15524091
> 
> 赞同：1
> 
> 时间：2013-03-20T12:52:54.193
> 
> 标签：matlab, plot

我通过改变阈值并计算召回率和精度来计算召回精度曲线的点。我在散点图中绘制了这些点，如下所示：

```
scatter(recall', precision') 
```

我试图找到最适合的曲线，但不确定最好的方法。我试过这个：

```
p = polyfit(recall', precision', 5)
r = polyval(p, recall')
plot(recall', precision', 'x');
hold on
plot(recall', r, '-');
hold off 
```

但问题是我必须估计多项式的次数（在本例中为 5）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-14T11:22:47.603

你可以试试**Eureqa Formulize**程序。**它是康奈尔创意机器实验室**开发的一个免费且易于使用的符号回归工具。

问候，本

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T13:25:53.407

您可以尝试采用召回和精度变量的对数并通过它们拟合一条线。然后斜率应该大致了解您可能想要使用的多项式的次数，即

```
p2 = polyfit(log(recall), log(precision), 1) 
```

# matlab - 全局变量变化 Matlab

> ID：15524096
> 
> 赞同：0
> 
> 时间：2013-03-20T12:53:07.403
> 
> 标签：matlab, parameters, global-variables

我在代码中按照以下方式对全局变量进行操作。我想将每次保存到全局变量并保留其内容以便扩展。如果我声明函数的输出是这个变量，如果结构很大，我假设它可能会显着减慢。怎么做？

```
function test()

    global n1;
    n1 = [1 2 3];

    for x=1:10
%     [n1] = global_up(n1,x); % no need for output parameter, as n1 is global right?
      f_up(n1,x);
    end 
end

function f_up(arg1,arg2) %function [arg1] = f_up(arg1,arg2) is wrong?
    global n1; % need to write it in every function ?
    arg1 = [arg1 arg2];
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T13:12:13.030

我真的不明白你在做什么，但全局变量几乎绝对不是要走的路。只需将变量作为参数传递：

```
 function test()

        n1 = [1 2 3];

        for x=1:10
          n1 = f_up(n1,x);
        end 
    end

function arg3 = f_up(arg1,arg2)
    arg3 = [arg1 arg2];
end 
```

但是，如果您解释这段代码的要点，您可能会得到一个更好的解决方案。就目前而言，它`f_up`实际上并没有做任何事情（即它封装了已经非常简洁但没有任何好处的语法）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T13:34:34.190

编辑：考虑这个问题来讨论您的实际问题：[如何修改函数中的数组？](https://stackoverflow.com/questions/4137905/how-to-modify-an-array-in-function)

我认为你想要做的是*通过引用调用*，全局变量的使用是*不必要*的。

您有一个变量`x`，您想将该变量提供给一个函数，并且您希望该函数`x`直接对其进行操作，以便这些操作`x`在您的函数外部可见。

这被称为`call by reference`。Matlab 不支持简单变量。

[但是，您可以使用从句柄](http://www.mathworks.de/de/help/matlab/handle-classes.html)类继承的对象。这将为您提供所需的行为。

如果您不想使用对象，则必须在函数中使用返回参数。不要使用全局变量，它们会使你的代码不可读并且几乎肯定会导致错误。

# lua - LUA (Corona SDK) math.floor() 返回错误值，增量为 0.1

> ID：15524099
> 
> 赞同：5
> 
> 时间：2013-03-20T12:53:21.980
> 
> 标签：lua, coronasdk

当我对每次递增**0.1的双精度值使用****Math.floor**函数时，我遇到了一个奇怪的错误。

 **它仅以 0.1 的增量发生并从值 5 开始

示例： math.floor(4) 返回**4**但 math.floor(5) 返回**4**！！！

你可以自己试试，用这段简单的代码：

```
for i=3,7,0.1 do 
    print("val : "..i.." floor : "..math.floor(i))
end 
```

这是上面代码的结果：

```
 Corona Simulator[1494:707] val : 3 floor : 3
 Corona Simulator[1494:707] val : 3.1 floor : 3
 Corona Simulator[1494:707] val : 3.2 floor : 3
 Corona Simulator[1494:707] val : 3.3 floor : 3
 Corona Simulator[1494:707] val : 3.4 floor : 3
 Corona Simulator[1494:707] val : 3.5 floor : 3
 Corona Simulator[1494:707] val : 3.6 floor : 3
 Corona Simulator[1494:707] val : 3.7 floor : 3
 Corona Simulator[1494:707] val : 3.8 floor : 3
 Corona Simulator[1494:707] val : 3.9 floor : 3
 Corona Simulator[1494:707] val : 4 floor : 4
 Corona Simulator[1494:707] val : 4.1 floor : 4
 Corona Simulator[1494:707] val : 4.2 floor : 4
 Corona Simulator[1494:707] val : 4.3 floor : 4
 Corona Simulator[1494:707] val : 4.4 floor : 4
 Corona Simulator[1494:707] val : 4.5 floor : 4
 Corona Simulator[1494:707] val : 4.6 floor : 4
 Corona Simulator[1494:707] val : 4.7 floor : 4
 Corona Simulator[1494:707] val : 4.8 floor : 4
 Corona Simulator[1494:707] val : 4.9 floor : 4
 Corona Simulator[1494:707] val : 5 floor : 4
 Corona Simulator[1494:707] val : 5.1 floor : 5
 Corona Simulator[1494:707] val : 5.2 floor : 5
 Corona Simulator[1494:707] val : 5.3 floor : 5
 Corona Simulator[1494:707] val : 5.4 floor : 5
 Corona Simulator[1494:707] val : 5.5 floor : 5
 Corona Simulator[1494:707] val : 5.6 floor : 5
 Corona Simulator[1494:707] val : 5.7 floor : 5
 Corona Simulator[1494:707] val : 5.8 floor : 5
 Corona Simulator[1494:707] val : 5.9 floor : 5
 Corona Simulator[1494:707] val : 6 floor : 5
 Corona Simulator[1494:707] val : 6.1 floor : 6
 Corona Simulator[1494:707] val : 6.2 floor : 6
 Corona Simulator[1494:707] val : 6.3 floor : 6
 Corona Simulator[1494:707] val : 6.4 floor : 6
 Corona Simulator[1494:707] val : 6.5 floor : 6
 Corona Simulator[1494:707] val : 6.6 floor : 6
 Corona Simulator[1494:707] val : 6.7 floor : 6
 Corona Simulator[1494:707] val : 6.8 floor : 6
 Corona Simulator[1494:707] val : 6.9 floor : 6
 Corona Simulator[1494:707] val : 7 floor : 6 
```

如果它有帮助，如果我们对错误值的结果应用**模 1**，我们会得到以下结果：**0.99999999999999**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T12:59:02.427

浮点数是魔鬼。不要将它们用作循环计数器。

```
for i = 30, 70 do 
    local i = i / 10
    print("val : "..i.." floor : "..math.floor(i))
end 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-21T10:27:08.870

确实这是一个常见的浮动问题，

这是我从电晕支持收到的官方回复：

> 你好，
> 
> 您所看到的是浮点数的一般问题。Lua 中的所有数字都是浮点数，因此会出现舍入误差。将 0.1 添加到另一个浮点数并不完全是 0.1，并且在反复使用时会累积错误。当你认为数字是 5.0 时，它可能是 4.99999999999999999，所以 floor 返回 4。打印语句可能在打印前四舍五入。
> 
> 数学库是标准 Lua 代码 (v5.1)，尚未针对 Corona 进行修改。
> 
> 您可以搜索主题或浮点舍入问题，但通常在使用浮点数学时需要小心。
> 
> 问候，汤姆
> 
> -- Corona Labs - 支持 support@coronalabs.com**

# c++ - 初始化指向结构的指针 - 编译器警告

> ID：15524100
> 
> 赞同：3
> 
> 时间：2013-03-20T12:53:22.337
> 
> 标签：c++, c++11, struct, g++, warnings

```
#include <iostream>
using namespace std;

struct test
{
   int factorX;
   double coefficient;
};

int main()
{
   test firstTest = {1, 7.5}; //that's ok

   test *secondTest = new test;
   *secondTest = {8, 55.2}; // issue a compiler warning

} 
```

我不明白为什么编译器会发出以下警告：

```
test2.cpp:13:33: warning: extended initializer lists only available with -std=c++11 or -std=gnu++11 [enabled by default]
test2.cpp:13:33: warning: extended initializer lists only available with -std=c++11 or -std=gnu++11 [enabled by default] 
```

我知道在 C++11 中我可以省略赋值运算符，但事实并非如此。我正在使用 g++ 4.7.2。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T12:56:46.873

你的`test`结构是一个聚合体。虽然C++98 支持使用大括号语法初始化[聚合，但不支持赋值。](https://stackoverflow.com/questions/4178175/what-are-aggregates-and-pods-and-how-why-are-they-special)

在这里，真正发生的是编译器调用隐式生成的移动赋值运算符，该运算符将 a`test&&`作为其输入。为了使这个调用合法，编译器必须通过从它构造一个临时变量转换`{8, 55.2}`为一个实例，然后从这个临时`test`变量移动分配。`*secondTest`

此行为仅在 C++11 中受支持，这就是编译器告诉您必须使用该`-std=c++11`选项进行编译的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T12:55:35.193

因为第一个是初始化，第二个是赋值。您可以在 C++98 中以这种方式初始化简单结构，但不能赋值。

8.5.1/1

> 聚合是一个数组或一个类（第 9 条），没有用户声明的构造函数（12.1），没有私有或受保护的非静态数据成员（第 11 条），没有基类（第 10 条），也没有虚函数(10.3)。

8.5.1/2

> 当一个聚合被初始化时，初始化器可以包含一个初始化器子句，该子句由一个用大括号括起来的逗号分隔的初始化器子句列表组成，用于聚合的成员，以递增的下标或成员顺序编写。

但是类的第二次构造调用`operator =`，由于您没有用户定义的副本 c-tor，因此将调用默认的副本 c-tor，在 C++11 中使用表达式 in`{}`可以构造所需类型的对象，但在 C++ 中不行98.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T12:55:45.583

错误信息告诉你你需要做什么，你需要在编译你的程序时添加`-std=c++11`或`-std=gnu++11`到命令行。这是一个 C++11 特性，你必须启用它：

```
 test2.cpp:13:33: warning: extended initializer lists only available with -std=c++11 or -std=gnu++11 [enabled by default]
                                                                           ^^^^^^^^^     ^^^^^^^^^^^ 
```

正如安迪所说，在从创建的临时对象上使用隐式生成的移动函数是 C++11 的一个特性`{8, 55.2}`，这就是你在第二种情况下所拥有的。

# android - Android Universal Image Loader - 如何正确设置规格？

> ID：15524101
> 
> 赞同：5
> 
> 时间：2013-03-20T12:53:25.490
> 
> 标签：android, out-of-memory, universal-image-loader

我有一个可以远程加载大量大图像的应用程序。当我使用 nostra 的通用图像加载器 ( [https://github.com/nostra13/Android-Universal-Image-Loader](https://github.com/nostra13/Android-Universal-Image-Loader) ) 时，我经常会遇到内存不足错误。我不知道我应该如何设置图像加载器来防止这种情况。

这是我当前的 ImageLoader 规格：

```
ImageLoaderConfiguration config = new ImageLoaderConfiguration.Builder(context)
        .enableLogging()
        .memoryCache(new WeakMemoryCache())
        .build(); 

this.imgDispOpts = new DisplayImageOptions.Builder()
        .cacheInMemory() 
        .cacheOnDisc() 
        .imageScaleType(ImageScaleType.IN_SAMPLE_INT) 
        .build();

this.imageLoader = ImageLoader.getInstance();
this.imageLoader.init(config); 
```

是的，我在调用 displayImage() 时通过了 imgDispOpts。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T21:08:25.933

尽量不要在内存中缓存，使用`EXACTLY`比例类型和`RGB_565`位图解码。

```
ImageLoaderConfiguration config = new ImageLoaderConfiguration.Builder(context)
    .enableLogging()
    .build(); 

this.imgDispOpts = new DisplayImageOptions.Builder() 
    .cacheOnDisc() 
    .imageScaleType(ImageScaleType.EXACTLY) 
    .bitmapConfig(Bitmap.Config.RGB_565)
    .build(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-23T22:28:37.357

我试图减少位图解码器中的位图大小，这对我有用。

在 com.nostra13.universalimageloader.core.decode 包中，打开 BaseImageDecoder.java，

```
public Bitmap decode(ImageDecodingInfo decodingInfo) throws IOException {
        Bitmap decodedBitmap;
        ImageFileInfo imageInfo;

        InputStream imageStream = getImageStream(decodingInfo);
        try {
            imageInfo = defineImageSizeAndRotation(imageStream, decodingInfo);
            imageStream = resetStream(imageStream, decodingInfo);
            Options decodingOptions = prepareDecodingOptions(imageInfo.imageSize, decodingInfo);

// add in the decodingOptions here:

decodingOptions.inSampleSize = 10; // or any number

// or you can calculate the resample rate by using the screen size / grid size and the image size

decodedBitmap = BitmapFactory.decodeStream(imageStream, null, decodingOptions);
    } finally {
        IoUtils.closeSilently(imageStream);
    }
    if (decodedBitmap == null) {
        L.e(ERROR_CANT_DECODE_IMAGE, decodingInfo.getImageKey());
    } else {
        decodedBitmap = considerExactScaleAndOrientaiton(decodedBitmap, decodingInfo, imageInfo.exif.rotation, imageInfo.exif.flipHorizontal);
    }
    return decodedBitmap;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T13:05:12.937

试试下面的配置

```
ImageLoaderConfiguration config = new ImageLoaderConfiguration.Builder(context)
    .enableLogging()
     discCacheExtraOptions(maxImageWidthForDiscCache, maxImageHeightForDiscCache, CompressFormat.PNG, 0);
    .memoryCache(new WeakMemoryCache())
    .build();

 this.imgDispOpts = new DisplayImageOptions.Builder()
    .cacheInMemory() 
    .cacheOnDisc() 
    .imageScaleType(ImageScaleType.EXACTLY) 
    .build(); 
```

您还可以使用延迟加载图像。[https://github.com/thest1/LazyList](https://github.com/thest1/LazyList)。

基于 Fedor Vlasov 的项目 LazyList 的通用图像加载器。LazyList 的改进版本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-05T14:26:47.670

你可以试试这个，它对我很有效：

```
ImageLoaderConfiguration.Builder config = new ImageLoaderConfiguration.Builder(context)
//Add these lines to your ImageLoader configuration
        .threadPriority(Thread.NORM_PRIORITY - 2);
        .denyCacheImageMultipleSizesInMemory();
        .diskCacheExtraOptions(150, 150, null); // You may change image resolution to fit your needs

ImageLoader.getInstance().init(config.build()); 
```

# bash - Bash：不能调用函数；没有这样的文件或目录

> ID：15524114
> 
> 赞同：0
> 
> 时间：2013-03-20T12:54:32.337
> 
> 标签：bash, function

我遇到了困扰我一整天的大问题。

我有许多函数文件，它们具有基于用途的各种功能，即。SSH、日志记录等。

我有一个脚本，可以在其中将错误添加到全局错误数组中。我有一个错误陷阱，它调用另一个“exit_functions”文件中的脚本。

在这个 exit_functions 文件中，我做了很多事情，但我遇到问题的部分是一个循环，它运行这个数组并拉出实际上是命令的数组元素。这些命令是**函数**文件之一中的函数，这些函数文件已包含在调用脚本中，使用普通的 . /path/to/functions_file 语法。

我的所有其他功能（例如日志记录等）都在 exit_functions 文件中工作，只是这些特定功能无法调用。我收到一个错误：

```
/functions/exit_functions: line 109: closeSSHTunnel /tmp/ssh_tunnel_iA0yj.lck: No such file or directory 
```

现在，killSSHTunnel 是一个函数，它位于以前包含的函数文件中，就像包含其他函数文件一样。我只使用数组中的这些函数调用得到这个错误。

我不确定我是否正确描述了它 - 如果我可以提供任何其他信息，请告诉我。

* * *

**编辑下面的完整功能代码：**

**/functions/exit_functions 文件：** exitTrap (){ local LCL_SCRIPT_ERROR

```
 if [ $ERR_COUNT_EXIT_FUNCT -gt 0 ]; then
        for LCL_SCRIPT_ERROR in "${ERROR_ARRAY[@]}"; do
            case $LCL_SCRIPT_ERROR in
                SVN_IMPORT      )   # match the SVN_IMPORT error name and search for specific commands to run
                                    exitMsg "$LCL_SCRIPT_ERROR; 111"
                                    executeErrorActions $LCL_SCRIPT_ERROR

                                    exitScript 111
                                    ;;

                *               )   exitMsg "$LCL_SCRIPT_ERROR; 255"
                                    exitScript 255
                                    ;;
            esac
        done
    fi
} 
```

所以我的测试代码引入了一个错误状态，最终调用了上面的函数（exitTrap）。它已经填充了一个名为 ERROR_ARRAY 的数组。

因此，executeErrorActions 函数（也在 /functions/exit_functions 中）循环关联数组 ERROR_ACTION_ARRAY，寻找一个名为（在此测试中）**SVN_IMPORT**的键。当它找到这个键时，它正在寻找一个以 ':' 分隔的字符串。每个分隔部分将是一个单独的命令，当出现这种错误情况时我要运行它。在我的测试中，我有一个**简单**的条目（没有分隔符）： *closeSSHTunnel /tmp/ssh_tunnel_iA0yj.lck*

现在，使用下面的函数，当我**不**包含 IFS= 和未设置 IFS 之间的部分时，它可以正常工作，而是只使用下面有双注释哈希的单行。一旦我引入 IFS 分隔符来分解字符串，我就会得到错误：

> /functions/exit_functions：第 109 行：closeSSHTunnel /tmp/ssh_tunnel_iA0yj.lck：没有这样的文件或目录

```
executeErrorActions (){
    if [ ! $# -eq 1 ]; then
        return 1
    fi

    local ERROR_NAME=$1
    local ERROR_ACTION

    #ERROR_KEY="SVN_IMPORT"

    for ERROR_ACTION in ${!ERROR_ACTION_ARRAY[@]}; do
        #echo KEY: $i VALUE: ${ERROR_ACTION_ARRAY[$i]}
        if [ $ERROR_NAME == $ERROR_ACTION ]; then

            ##$(${ERROR_ACTION_ARRAY[$ERROR_ACTION]})

            IFS=":"
            for i in ${ERROR_ACTION_ARRAY[$ERROR_ACTION]}; do
                $i
            done
            unset IFS
            return 0
        fi
    done
} 
```

这是使用两个“：”分隔的命令、上面相同的*closeSSHTunnel*函数和一个简单的*ls -la*调用的测试运行的 set -x 输出。我使用 addError 函数调用将这些添加到 ERROR_ACTION_ARRAY 中，如下所示：

```
addError SVN_IMPORT closeSSHTunnel $SSH_TUNNEL_LCK_FILE:ls -la 
```

这是 set -x 输出：

```
+ executeErrorActions SVN_IMPORT
+ '[' '!' 1 -eq 1 ']'
+ local ERROR_NAME=SVN_IMPORT
+ local ERROR_ACTION
+ for ERROR_ACTION in '${!ERROR_ACTION_ARRAY[@]}'
+ '[' SVN_IMPORT == SVN_IMPORT ']'
+ IFS=:
+ for i in '${ERROR_ACTION_ARRAY[$ERROR_ACTION]}'
+ 'closeSSHTunnel /tmp/ssh_tunnel_iA0yj.lck'
/functions/exit_functions: line 116: closeSSHTunnel /tmp/ssh_tunnel_iA0yj.lck: No such file or directory
+ for i in '${ERROR_ACTION_ARRAY[$ERROR_ACTION]}'
+ 'ls -la'
/functions/exit_functions: line 116: ls -la: command not found
+ unset IFS
+ return 0 
```

**请注意其中一个说“没有这样的文件或目录”，而另一个说“找不到命令”。现在是第 2 天，试图解决这个问题！**

***我的结论是 IFS 更改和字符串分解导致问题。***

**编辑 2**

如果我稍微移动 IFS 调用并在循环内的 ':' 字符上终止 IFS，然后在执行调用后再次建立它，一切正常！！！！！！

```
for ERROR_ACTION in ${!ERROR_ACTION_ARRAY[@]}; do
        #echo KEY: $i VALUE: ${ERROR_ACTION_ARRAY[$i]}
        if [ $ERROR_NAME == $ERROR_ACTION ]; then
            #$(${ERROR_ACTION_ARRAY[$ERROR_ACTION]})
            IFS=$':'
            for i in ${ERROR_ACTION_ARRAY[$ERROR_ACTION]}; do
                unset IFS
                $i
                IFS=$':'
            done
            unset IFS
            return 0
        fi
done 
```

谁能解释一下？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T14:21:41.297

这是因为您将 IFS 设置为“：” - bash 使用 IFS 将变量拆分为单词（即函数名称与其参数），而不是单独的命令。因此，它试图运行一个名为 的命令`closeSSHTunnel /tmp/ssh_tunnel_iA0yj.lck`，而不是一个以`closeSSHTunnel`参数命名的命令`/tmp/ssh_tunnel_iA0yj.lck`。

```
$ ERROR_ACTION="echo something"
$ $ERROR_ACTION 
something
$ IFS=":"
$ $ERROR_ACTION 
-bash: echo something: command not found
$ ERROR_ACTION="echo:something"
$ $ERROR_ACTION 
something 
```

如果您希望能够包含多个命令，则必须自己拆分它们。

编辑：鉴于更完整的脚本摘录，您需要在`for`拆分命令时将 IFS 设置为“：”，但在执行命令时恢复正常：

```
...
saveIFS="$IFS"
IFS=":"
for i in ${ERROR_ACTION_ARRAY[$ERROR_ACTION]}; do
    IFS="$saveIFS"
    $i
done
IFS="$saveIFS" 
```

这对 IFS 的重置超过了严格必要的程度，但这样做比添加逻辑来确定何时需要重置更容易（顺便说一句，最终重置存在，以防循环永远不会执行）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T03:04:43.953

我不知道这是否是正确的方法，但我用 IFS=":" 遍历字符串并将其放入数组中，然后重置 IFS。然后我遍历该命令数组来执行它们。都在工作。

```
executeErrorActions (){
    if [ ! $# -eq 1 ]; then
        return 1
    fi

    local ERROR_NAME=$1
    local ERROR_ACTION
    local ACTION_ARRAY
    local ACTION

    if [ ${#ERROR_ACTION_ARRAY[@]} -gt 0 ]; then
        for ERROR_ACTION in ${!ERROR_ACTION_ARRAY[@]}; do
            if [ $ERROR_NAME == $ERROR_ACTION ]; then
                if [ ${#ERROR_ACTION_ARRAY[$ERROR_ACTION]} -gt 0 ]; then
                    IFS=$':'
                    ACTION_ARRAY=( ${ERROR_ACTION_ARRAY[$ERROR_ACTION]} )
                    unset IFS
                    for ACTION in ${!ACTION_ARRAY[@]}; do
                        exitMsg "Running action for $ERROR_ACTION"
                        ${ACTION_ARRAY[$ACTION]}
                        if [ $? -eq 0 ]; then
                            exitMsg "Error action succeeded"
                        else
                            exitMsg "Error action failed"
                            return 1
                        fi
                    done
                    return 0
                else
                    return 1    #no contents in the array element; no actions to run; maybe there should have been; return error
                fi
            else
                return 0    #no matching actions for this error; still return success
            fi
        done
    else
        return 0    #action array is empty
    fi
} 
```

# c# - EF 5.0 和对象继承通过组合上下文映射到同一个表

> ID：15524116
> 
> 赞同：1
> 
> 时间：2013-03-20T12:54:37.993
> 
> 标签：c#, ef-code-first, entity-framework-5, dbcontext

我有一个关于 EF 5.0 和继承对象映射到与超类相同的表的问题。

我的项目如下所示：

```
public class ContextA : DbContext
{
    public DbSet<EntityA> EntitiesA { get; set; }
    public DbSet<EntityB> EntitiesB { get; set; }

    public ContextA(string connnectionString) : base(connnectionString) { }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        ModelCreating(modelBuilder);
    }

    public static void ModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<EntityA>().ToTable("EntityAs");
        modelBuilder.Entity<EntityB>().ToTable("EntityBs");

        modelBuilder.Entity<EntityA>().HasKey(e => e.EntityAId);
        modelBuilder.Entity<EntityB>().HasKey(e => e.EntityBId);
    }
}

public class EntityA
{
    public int EntityAId { get; set; }
    public string Name { get; set; }
}

public class EntityB
{
    public int EntityBId { get; set; }
    public string Name { get; set; }

    public int EntityAId { get; set; }
} 
```

很好很好。请记住，实体 A 和 B 可能位于数据库的不同模式中，或者可能位于不同的上下文中，这就是 statc ModelCreation 方法的原因。

现在我想组合这样的上下文：

```
public class ContextB : DbContext
{
    public DbSet<EntityAA> EntityAAs { get; set; }
    public DbSet<EntityBB> EntityBBs { get; set; }

    public ContextB(string connnectionString) : base(connnectionString) { }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        ModelCreating(modelBuilder);
    }

    public static void ModelCreating(DbModelBuilder modelBuilder)
    {
        ContextA.ModelCreating(modelBuilder);

        modelBuilder.Entity<EntityAA>().Map(m =>
        {
            m.MapInheritedProperties();
            m.ToTable("EntityAs");
        }).HasKey(e => e.EntityAId)
        .Property(e => e.EntityAId)
        .HasDatabaseGeneratedOption(DatabaseGeneratedOption.Identity);

        modelBuilder.Entity<EntityBB>().Map(m =>
        {
            m.MapInheritedProperties();
            m.ToTable("EntityBs");
        })
        .HasKey(e => e.EntityBId)
        .Property(e => e.EntityBId)
        .HasDatabaseGeneratedOption(DatabaseGeneratedOption.Identity);

        modelBuilder.Entity<EntityAA>()
                    .HasMany(ea => ea.EntityBs)
                    .WithRequired(eb => eb.EntityA)
                    .HasForeignKey(eb => eb.EntityAId);
    }
}

public class EntityAA : EntityA
{
    private readonly List<EntityBB> _entityBbs = new List<EntityBB>();

    public virtual ICollection<EntityBB> EntityBs
    {
        get { return _entityBbs; }
    }
}

public class EntityBB : EntityB
{
    public EntityAA EntityA { get; set; }
} 
```

我想这样做，因为我想拥有特定于模式的上下文，我想将它们组合到特定于应用程序的上下文中。

现在的问题是，我在模型创建过程中遇到错误：

```
Ergebnis Meldung:   Die EfInheritance.Test.GlobalTests.InsertEntitiesContextB-Testmethode hat eine Ausnahme ausgelöst: System.InvalidOperationException: The foreign key component 'EntityAId' is not a declared property on type 'EntityBB'. Verify that it has not been explicitly excluded from the model and that it is a valid primitive property.
Ergebnis StackTrace:    
bei System.Data.Entity.ModelConfiguration.Configuration.Properties.Navigation.ForeignKeyConstraintConfiguration.Configure(EdmAssociationType associationType, EdmAssociationEnd dependentEnd, EntityTypeConfiguration entityTypeConfiguration)
   bei System.Data.Entity.ModelConfiguration.Configuration.Properties.Navigation.NavigationPropertyConfiguration.ConfigureConstraint(EdmAssociationType associationType, EdmAssociationEnd dependentEnd, EntityTypeConfiguration entityTypeConfiguration)
   bei System.Data.Entity.ModelConfiguration.Configuration.Properties.Navigation.NavigationPropertyConfiguration.ConfigureDependentBehavior(EdmAssociationType associationType, EdmModel model, EntityTypeConfiguration entityTypeConfiguration)
   bei System.Data.Entity.ModelConfiguration.Configuration.Properties.Navigation.NavigationPropertyConfiguration.Configure(EdmNavigationProperty navigationProperty, EdmModel model, EntityTypeConfiguration entityTypeConfiguration)
   bei System.Data.Entity.ModelConfiguration.Configuration.Types.EntityTypeConfiguration.ConfigureAssociations(EdmEntityType entityType, EdmModel model)
   bei System.Data.Entity.ModelConfiguration.Configuration.Types.EntityTypeConfiguration.Configure(EdmEntityType entityType, EdmModel model)
   bei System.Data.Entity.ModelConfiguration.Configuration.ModelConfiguration.ConfigureEntities(EdmModel model)
   bei System.Data.Entity.DbModelBuilder.Build(DbProviderManifest providerManifest, DbProviderInfo providerInfo)
   bei System.Data.Entity.DbModelBuilder.Build(DbConnection providerConnection)
   bei System.Data.Entity.Internal.LazyInternalContext.CreateModel(LazyInternalContext internalContext)
   bei System.Data.Entity.Internal.RetryLazy`2.GetValue(TInput input)
   bei System.Data.Entity.Internal.LazyInternalContext.InitializeContext()
   bei System.Data.Entity.Internal.InternalContext.GetEntitySetAndBaseTypeForType(Type entityType)
   bei System.Data.Entity.Internal.Linq.InternalSet`1.Initialize()
   bei System.Data.Entity.Internal.Linq.InternalSet`1.get_InternalContext()
   bei System.Data.Entity.Internal.Linq.InternalSet`1.ActOnSet(Action action, EntityState newState, Object entity, String methodName)
   bei System.Data.Entity.Internal.Linq.InternalSet`1.Add(Object entity)
   bei System.Data.Entity.DbSet`1.Add(TEntity entity)
   bei EfInheritance.Test.GlobalTests.InsertEntitiesContextB() in c:\temp\EfInheritance\EfInheritance.Test\GlobalTests.cs:Zeile 45. 
```

最后，我的问题是：

1.  有可能像这样工作吗？
2.  如果这是一个可能的解决方案，我该怎么做才能让它工作？

如果我在 ModelCreation 中注释 ForeignKey-Statement，它可以正常工作，除了运行简单测试后数据库中的结果：

```
using (var ctx = new ContextB("CodeFirstDatabase"))
        {
            EntityAA aa = new EntityAA();
            aa.Name = "Test_AA_01";

            EntityBB bb = new EntityBB();
            bb.Name = "Test_BB_01";

            aa.EntityBs.Add(bb);

            ctx.EntityAAs.Add(aa);

            ctx.SaveChanges();
        } 
```

EntityBs EntityBId | 姓名 | 实体 ID | 鉴别器 | EntityA_EntityAId 1 | 测试_BB_01 | 0 | 实体BB | 1

EntityAs EntityAId | 姓名 | 鉴别器 1 | 测试_AA_01 | 实体AA

现在还有一个我无法访问的额外 ForeignKeyColumn 以及一个额外的鉴别器列。

有人知道该怎么做才能使其正常工作吗？如有必要，我已准备好将项目邮寄/附加。

亲切的问候，

斯文

# javascript - Flot 无法在某些浏览器上呈现图表

> ID：15524119
> 
> 赞同：3
> 
> 时间：2013-03-20T12:54:46.107
> 
> 标签：javascript, charts, flot

我有一个包含 2 个系列的简单折线图，x 轴是日期，y 轴是整数。说明这一点的代码如下：

```
<!DOCTYPE html>
<html>
<head>
    <script type="text/javascript" language="javascript" src="flot/jquery.js"></script>
    <script type="text/javascript" language="javascript" src="flot/jquery.flot.js"></script>
    <style type="text/css">
        #overview-plot24 {
            width: 94%;
            margin-left: 20px;
            height: 220px;
        }
    </style>

    <script type="text/javascript">
        $(function() {
            var plotOptions = {
                //Options go here
                xaxis: {
                    mode: "time",
                    tickLength: 5,
                    reserveSpace: true,
                    autoscaleMargin: 0.01
                },
                yaxis: {
                    min: 0
                },
                legend: {
                    show: false
                },
                series: {
                    lineWidth: 1,
                    shadowSize: 0
                },
                grid: {
                    hoverable: true,
                    clickable: true
                }
            };

            var plot2 = $.plot(
                    '#overview-plot24', [
                        {
                            label: "Alerts",
                            color: "#FC8200",
                            data: [
                                    [Date.parse("2013-03-19 15:00"), 9650],
                                    [Date.parse("2013-03-19 16:00"), 33124],                                
                                    [Date.parse("2013-03-19 17:00"), 27806],
                                    [Date.parse("2013-03-19 18:00"), 24143],
                                    [Date.parse("2013-03-19 19:00"), 7573],
                            ]},
                        {
                            label: "Scores",
                            color: "#8000FF",
                            data: [                            
                                    [Date.parse("2013-03-19 15:00"), 26407],
                                    [Date.parse("2013-03-19 16:00"), 93973],
                                    [Date.parse("2013-03-19 17:00"), 77760],                                
                                    [Date.parse("2013-03-19 18:00"), 68715],
                                    [Date.parse("2013-03-19 19:00"), 20383],
                            ]
                        }
                    ],
                    plotOptions
            );
        });
    </script>
</head>

<body>
    <div id="overview-plot24"></div>
</body>
</html> 
```

这在 Chrome 和 Opera 中可以正确呈现，但该系列无法在 Safari 和 Firefox 上呈现。 ![正确渲染](../Images/c68b2e9a1337c96adc1c635718fddddb.png)Chrome 渲染正确。 ![渲染不良](../Images/93656f623ca17641bb47e5e101ad4a7c.png)Safari 和 Firefox 不正确地呈现它。

这很令人困惑，因为 flot 网页上的示例在所有浏览器上都能正确呈现，我正在努力查看我的代码的不同之处！

对于那些对直接运行代码感兴趣的人，可以使用包含您需要的所有内容的 zip[存档](https://dl.dropbox.com/u/21682354/Internet%20Posts/Flot%20Render%20Issue/FlotBadRender.zip)。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T12:58:23.913

问题**不在于 Flot**或其渲染，而**在于 JavaScript**，特别是您用于日期的格式。

您用于日期的格式无效（请参见渲染图表中的水平轴），因为`2013-03-19 19:00`IE 和 Chrome 可识别该格式，但 FF 和 Safari 无法识别该格式。

您确定每个浏览器都会读取的唯一格式是`YYYY-MM-DDTHH:mm:ss.sssZ`，在您的情况下，您应该将代码中的字符串更改为`2013-03-19T19:00`. 看看[这个](https://stackoverflow.com/questions/4321270/regarding-javascript-new-date-and-date-parse)和[这个](https://stackoverflow.com/questions/2587345/javascript-date-parse?rq=1)关于 SO 的帖子了解其他细节（或这个关于日期[的小教程）。](http://javascript.info/tutorial/datetime-functions)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-20T12:59:20.560

这可能是 Date.parse 函数在 Safari 和 Firefox 上无法正常工作的问题吗？我认为被识别的日期格式取决于实现，并且在不同的浏览器中可能不一致。

有关更多详细信息，请参阅[此问题](https://stackoverflow.com/questions/2587345/javascript-date-parse)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-05T15:37:31.967

我遇到了同样的问题，虽然我修复了日期格式，但它并没有解决问题。这个问题原来是[Flot 中的一个错误，](https://code.google.com/p/flot/issues/detail?id=322)如果您在 x 轴上指定时间值`min`和选项，它将不会绘制数据图表。`max`

一旦我删除了它`min`，`max`它在所有浏览器中就像一个魅力。

# c++ - 如何为 getline() 实现超时？

> ID：15524122
> 
> 赞同：7
> 
> 时间：2013-03-20T12:54:52.680
> 
> 标签：c++, gcc, centos

`getline()`我想通过C++从命令行读取一个字符串。

为此，我想添加一个`5`秒计时器。如果没有读取字符串，则程序将终止。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-20T13:22:45.680

好的，等待`5`秒，`terminate`如果没有输入：

```
#include <thread>
#include <atomic>
#include <iostream>
#include <string>

int main()
{
    std::atomic<bool> flag = false;
    std::thread([&]
    {
        std::this_thread::sleep_for(std::chrono::seconds(5));

        if (!flag)
            std::terminate();
    }).detach();

    std::string s;
    std::getline(std::cin, s);
    flag = true;
    std::cout << s << '\n';
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-20T12:56:25.420

怎么样：

```
/* Wait 5 seconds. */
alarm(5);

/* getline */

/* Cancel alarm. */
alarm(0); 
```

或者，您可以使用`setitimer`.

* * *

正如*R. Martinho Fernandes*所要求的：

该函数`alarm`安排当前进程在其调用后 5 秒内接收 SIGALRM。`SIGALRM`si 异常终止进程的默认操作。调用`alarm(0)`会禁用计时器。

# vb.net - 计算 vb.net 中文本文件中特定单词的出现次数

> ID：15524133
> 
> 赞同：1
> 
> 时间：2013-03-20T12:55:07.190
> 
> 标签：vb.net, word-count

我正在尝试计算文本文件中项目的数量，方法是计算项目早些时候在程序中输入到文件中的每个实例。

我已经从文件和文本框中读取了文本。问题是我当前的代码只是计算文本框中的字符，而不是我想要的单词在文件中的次数。

```
For Each desiredword As String In txtContentofFile.Text
        intdesiredword = intdesiredword + 1
        txtdesiredwordcount.Text = intdesiredword
Next 
```

这会计算文本框中的字符，而不是计算所需单词的数量。在寻求帮助和广泛搜索之前，我反复尝试，但我就是不明白我的代码有什么问题。请帮忙 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T13:05:31.530

您可以使用[拆分](http://www.dotnetperls.com/split-vbnet)功能：

C＃：

```
int count = txtContentofFile.Text.Split(desiredword).Length - 1; 
```

VB.net：

```
Dim count As Integer = txtContentofFile.Text.Split(desiredword).Length - 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T14:12:51.077

I prefer to use Regular Expressions in this type of situation. They are very tricky to understand but they are extremely powerful and typically faster than other string manipulation techniques.

```
Dim AllMatchResults As MatchCollection
Try
    Dim RegexObj As New Regex(desiredword)
    AllMatchResults = RegexObj.Matches(txtContentofFile.Text)
    If AllMatchResults.Count > 0 Then
        ' Access individual matches using AllMatchResults.Item[]
    Else
        ' Match attempt failed
    End If
Catch ex As ArgumentException
    'Syntax error in the regular expression
End Try 
```

In your case you are looking for the value from AllMatchResults.Count.

Using a great Regular Expression tool like [RegexBuddy](http://www.regexbuddy.com/) to build and test the expressions is a great help too. (The above code snippet was generated by RegexBuddy!)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T13:08:08.180

尝试这个：

```
Dim text As String = IO.File.ReadAllText("C:\file.txt")
Dim wordsToSearch() As String = New String() {"Hello", "World", "foo"}
Dim words As New List(Of String)()
Dim findings As Dictionary(Of String, List(Of Integer))

'Dividing into words
words.AddRange(text.Split(New String() {" ", Environment.NewLine()}, StringSplitOptions.RemoveEmptyEntries))

findings = SearchWords(words, wordsToSearch)
Console.WriteLine("Number of 'foo': " & findings("foo").Count) 
```

使用的功能：

```
Private Function SearchWords(ByVal allWords As List(Of String), ByVal wordsToSearch() As String) As Dictionary(Of String, List(Of Integer))
    Dim dResult As New Dictionary(Of String, List(Of Integer))()
    Dim i As Integer = 0

    For Each s As String In wordsToSearch
        dResult.Add(s, New List(Of Integer))

        While i >= 0 AndAlso i < allWords.Count
            i = allWords.IndexOf(s, i)
            If i >= 0 Then dResult(s).Add(i)
            i += 1
        End While
    Next

    Return dResult
End Function 
```

您不仅会获得出现次数，还会获得文件中的索引位置，这些位置很容易分组在`Dictionary`.

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-04-16T18:41:50.660

试试下面的代码

```
Function word_frequency(word_ As String, input As String) As Integer
    Dim ct = 0
    Try
        Dim wLEN = word_.Length
        Do While input.IndexOf(word_) <> -1
            Dim idx = input.IndexOf(word_) + wLEN
            ct += 1
            input = input.Substring(idx)
        Loop
    Catch ex As Exception

    End Try
    Return ct
End Function 
```

# apache-flex - Flex：AdvancedDataGridColumn 工具提示干扰

> ID：15524137
> 
> 赞同：0
> 
> 时间：2013-03-20T12:55:14.733
> 
> 标签：apache-flex, flex3, tooltip, advanceddatagrid

有[`AdvancedDataGridColumn`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/controls/advancedDataGridClasses/AdvancedDataGridColumn.html)一个属性`showDataTips`。如果将其设置为，`true`则 中的每个单元格`AdvancedDataGridColumn`将在 上显示一个工具提示`rollOver`。只有一个问题，工具提示覆盖了整个单元格。

这是一个问题，因为单元格有一个自定义`contextMenu`. 右键单击工具提示将显示默认菜单。有没有办法点击工具提示或提供一个`yOffset`让工具提示出现在单元格下方？

# c - 在手臂 Cortex_A8 上进行分析

> ID：15524138
> 
> 赞同：0
> 
> 时间：2013-03-20T12:55:22.080
> 
> 标签：c, linux, arm, profiler, cortex-a8

我想在 ARM 处理器上为我的应用程序进行分析。我发现 oprofile 不起作用。几年前有人使用以下代码进行测试。循环计数器确实起作用，性能监视器计数器仍然不起作用。我又测试了一遍，还是一样。对于以下代码，我得到了循环计数：2109，性能监视器计数：0。我已经通过谷歌搜索，到目前为止，我还没有找到解决方案。有人解决了这个问题吗？

```
 uint32_t value = 0
    uint32_t count = 0;
    struct timeval tv;
    struct timezone tz;

    // enable all counters
    __asm__ __volatile__ ("mcr p15, 0, %0, c9, c12, 1" ::"r" (0x8000000f));

    // select counter 0,
    __asm__ __volatile__("mcr p15, 0, %0, c9, c12, 5" ::"r" (0x0));
    // select event
    __asm__ __volatile__ ("mcr p15, 0, %0, c9, c13, 1" ::"r"(0x57));

    // reset all counters to ero and enable all counters
    __asm__ __volatile__ ("mrc p15, 0, %0, c9, c12, 0" : "=r" (value));
    value |= 0xF;
    __asm__ __volatile__ ("mcr p15, 0, %0, c9, c12, 0" :: "r" (value));

    gettimeofday(&tv, &tz);

    __asm__ __volatile__("mrc p15, 0, %0, c9, c13, 0" : "=r" (count));
    printf("cycle count: %d", count);

    __asm__ __volatile__ ("mrc P15, 0, %0, c9, c13, 2": "=r" (count));
    printf("performance monitor count: %d", count); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T04:18:24.307

我刚刚遇到了同样的问题，就我而言，这是由于`NIDENm`信号被拉低所致。

来自 ARM 文档：

> PMU 仅在启用非侵入式调试时计数事件，即当任一`DBGENm`或`NIDENm`输入被置位时。周期计数 (PMCCNTR) 寄存器始终启用，无论是否启用了非侵入式调试，除非 PMCR 寄存器的 DP 位置位。

NIDENm信号是 ARM**内核**的输入，因此它的控制方式将取决于内核外部的处理器部分。就我而言，我找到了一个控制 NIDEN 的寄存器。在您的情况下，它可能是一个寄存器，或一个引脚，或者（可能）信号被拉低并且您无法使用该功能。

同样来自 ARM 文档：

> `DBGENm`和信号的值`NIDENm`可以通过轮询`DBGDSCR[17:16]`、`DBGDSCR[15:14]`或来确定`DBGAUTHSTATUS`。

因此，如果您可以阅读其中之一，则可以确认问题出在**NIDENm**。

# android - 保存Android相机对焦和白平衡状态

> ID：15524139
> 
> 赞同：0
> 
> 时间：2013-03-20T12:55:22.510
> 
> 标签：android, camera, focus

要完全理解我的问题，需要知道应用程序的确切流程。我在这里简要解释了它：

Activity1：State = 0：单击按钮时，在相机上调用自动对焦并拍摄照片，状态增加到 1 并再次开始预览以捕捉第二张照片。State = 1：点击按钮，拍摄第二张照片（不再次调用自动对焦，即使用相机的旧状态，以确保两张图像的对焦状态相同。状态递增，此时相机被释放点，开始activity2。

Activity2：State = 2：如果用户对两个图像都满意，他点击图像并继续流程，如果他在这个阶段按下返回按钮，他将返回到 Activity1，在那里他可以捕获第二张图片（或两张照片再次）。当他被重定向回Activity1时，如果他选择再次拍摄两张照片，则没有问题，因为相机再次对焦以拍摄第一张照片，然后他可以使用相同的相机设置拍摄第二张照片。现在问题出现了，当用户只想重新拍摄第二张照片时，发生的情况是相机没有在这里对焦并且图片模糊，在稍后阶段这两个图像被合并并且如果这两个图像没有相同的焦点/白平衡，在合并的照片中清晰可见。

有什么方法可以保存活动关闭时相机所处的状态，以便以后可以在用户回来时重用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T12:49:16.753

唯一的解决方案是不释放相机。您可以检查该功能`void setAutoExposureLock(boolean toggle)`，但它只会在相机的生命周期内锁定曝光。

# sql - DATEPART() 的日期/时间转换错误

> ID：15524140
> 
> 赞同：0
> 
> 时间：2013-03-20T12:55:22.163
> 
> 标签：sql, sql-server-2008, syntax-error, datepart

当我尝试`datepart`在 where 子句中使用该函数时出现错误。有人可以看看我下面的语法并提供一些建议吗？

```
DATEPART(DW,convert(date,convert(varchar(4),year)+'-'+convert(varchar(4),month)+'-
'+convert(varchar(4),day),120)) 
```

我正在尝试创建一个视图，并且选择查询在没有该`where`子句的情况下工作正常，但是当我添加它时它返回以下错误：

> 消息 241，级别 16，状态 1，第 1 行从字符串转换日期和/或时间时转换失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T17:06:51.340

尝试这个：

```
PRINT   DATEPART(DW, 
    CONVERT( DATE, 
        CONVERT(VARCHAR(4),YEAR(getdate()) 
        + '-' + CONVERT(VARCHAR(4), MONTH(getdate())) 
        + '-' + CONVERT(VARCHAR(4), DAY(getdate())), 120) ) ) 
```

# php - 如何在数组中找到唯一性（php）

> ID：15524145
> 
> 赞同：-1
> 
> 时间：2013-03-20T12:55:29.270
> 
> 标签：php, arrays, sorting

我在 php 中有两种可能的数组配置，如下所示：

```
$array = array(
    "0" => "137",
    "1" => "137",
    "2" => "137",
    "3" => "137",
    "4" => "137"
); 
```

和

```
$array = array(
    "0" => "137",
    "1" => "200",
    "2" => "31",
    "3" => "19",
    "4" => "400"
); 
```

我不是想将数组相互比较。

具体数字是“137”或任何其他数字并不重要，我需要知道的是如何以编程方式确定第一个数组是“真”，因为它的所有值都是相同的。第二个数组是“假的”，因为它们是不同的。第二个也可以有任何随机集，包括一堆相同的数字和一个不同的数字。

我真的不在乎什么数字不同，只要它们都相同。我现在正在研究，但我不确定要寻找什么，就术语而言。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-20T12:57:24.107

```
if (count(array_unique($array)) > 1) {
    // not all elements are the same
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T12:59:29.180

您可以使用 array_unique 函数[php array_unique](http://php.net/manual/en/function.array-unique.php)

如果结果数组的计数为 1，则所有值都相同。

或者最好只遍历数组直到找到一个不同的值，这有更糟糕的情况 o(n)

编辑：请注意 count(array_unique($array)) 更干净但效率较低，但仍然 o(n) （总是 o(n) 不仅仅是更糟的情况）。

# php - Php Flickr 身份验证访问私人照片

> ID：15524147
> 
> 赞同：1
> 
> 时间：2013-03-20T12:55:29.460
> 
> 标签：php, oauth-2.0, flickr

我想使用 Flickr 作为我网站照片的存储库。我们的想法是使用“私人”权限将它们上传到 Flickr，这样没有人可以在那里看到它们，而是将它们显示在我网站上的公共画廊中。

我收集到我需要身份验证（大概是誓言）。但我不希望我的网站访问者必须登录或通过某种身份验证过程。我希望它在后台保持沉默/。

这完全可行吗？

我正在使用带有 Oauth 插件的（标准）php flickr 类，来自：[http ://asociaux.fr/post/2012/01/06/Authentification-API-Flickr-Oauth-PHPFlickr](http://asociaux.fr/post/2012/01/06/Authentification-API-Flickr-Oauth-PHPFlickr)

当然，我已经创建了我的 api 密钥/秘密。

虽然我熟悉 php flickr 的标准用法（没有身份验证），但我完全不知道从哪里开始使用这个 auth thingy。

我从第一种方法开始（如上述网站所述）：

```
$f = new phpFlickr($cle_api, $cle_secret_api);  
$f->getRequestToken($callback); 
```

但问题是，flickr 授予“我”（浏览器用户）访问权限，而不是服务器。这显然不是我想要的？

有人可以指出我正确的方向吗？

注意：现在我对这个过程的阅读部分感兴趣（写作部分稍后会出现）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-04T07:41:33.710

使用 phpFlickr 类是可能的。我做了什么让它与我的私人照片一起工作：

1.  在公共域 (example.com) 上设置 phpFlickr
2.  生成 Flickr API 密钥并将身份验证回调指向 auth.php (example.com/phpflickr/auth.php)
3.  现在，在 getToken.php 上设置参数并在浏览器上运行它。我没有完成这项工作（它没有显示我的令牌），但它会将您重定向到带有**frob**参数的页面。
4.  转到[http://www.flickr.com/services/api/explore/?method=flickr.auth.getToken](http://www.flickr.com/services/api/explore/?method=flickr.auth.getToken)
5.  将刚刚复制的 frob 值（“MORENUMBERS”）粘贴到值框中。
6.  检查具有完全权限的签名呼叫。
7.  在下面，您的令牌应该会弹出。
8.  复制令牌编号并将其用作脚本中的硬编码参数：

    ```
    $conf = array(
      'token' => '[token]',
      'key' => '[key]',
      'secret' => '[secret]'
    );
    require_once("vendor/phpflickr/phpFlickr.php");
    $f = new phpFlickr($conf['key'], $conf['secret']);
    $f->setToken($conf['token']);

    //change this to the permissions you will need
    $f->auth("read");

    // you can now call all API methods 
    ```

希望这会有所帮助。

# javascript - jQuery 插件语法/ JavaScript 语法？

> ID：15524153
> 
> 赞同：2
> 
> 时间：2013-03-20T12:55:45.823
> 
> 标签：javascript, jquery

我在 JavaScript 或 jQuery 插件中多次遇到这种语法

```
$.fn.testPlugin = function( options ) {  

    // Create some defaults, extending them with any options that were provided
    var settings = $.extend( {
      'location'         : 'top',
      'background-color' : 'blue'
    }, options); 
```

我确实了解该功能已扩展，但我不清楚之后`$.extend({})`的内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T12:57:58.660

该[`$.extend()`](http://api.jquery.com/jQuery.extend/)方法会将第二个（和后续）参数中的对象中给定的任何键/值对合并到第一个参数中传递的对象中。然后它返回（更新的）第一个参数作为结果。

`options`因此，这只是为这两个选项指定一些默认值的一种方式，插件用户将参数传递给插件的任何内容都将覆盖这些默认值。

例如，如果您调用：

```
$(el).testPlugin({ location: 'left' }); 
```

然后在插件中生成的设置将是：

```
var settings = {
    location:         'left',
    background-color: 'blue'
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T12:59:04.163

jQuery.extend() is syntax for merging the contents of two or more objects together into the first object. [http://api.jquery.com/jQuery.extend/](http://api.jquery.com/jQuery.extend/)

# iphone - 使用适用于 iPhone 的 Tin Can API 实现 LRS

> ID：15524157
> 
> 赞同：1
> 
> 时间：2013-03-20T12:55:48.810
> 
> 标签：iphone, objective-c, tin-can-api

我必须在 iPhone 中创建一个使用 Tin Can API 的项目。Tin Can API 是一种高级分布式学习过程。

我不知道在 Objective-C 中从哪里开始。

我已阅读该网站[http://tincanapi.com](http://tincanapi.com)。

对于实施，我有一些基本问题：

1.  如何以及如何创建我自己的 LRS？
2.  Tin Can API 如何通过 ASIHTTPRequest 以编程方式与我自己的 LRS 和 LMS 通信？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:11:54.900

TinCanAPI 有两个部分在这里发挥作用。我怀疑你只需要在 iPhone 上处理其中一个。一部分是客户端，它将对帐单日期*发送*到第二部分（LRS 服务器端）。在 iOS 设备上创建 LRS 服务器部分会很奇怪，所以我认为您需要*将*TinCan 语句从 iOS 设备发送到现有的 LRS。

LRS 通过 REST 接口接受语句数据，并且可以使用标准 NSURLConnection 或使用 AFNetworking 发布该数据。有几个选项可以使用一个库来抽象所有这些调用，其中一个是~~Rustici Software 很快就会出现~~的基础知识的新 OSS 版本[http://rusticisoftware.github.io/TinCanObjC/](http://rusticisoftware.github.io/TinCanObjC/)。~~目前还没有它的链接，但请随时与我联系以获取更多详细信息，一旦有公共链接，我将使用该链接更新此答案。~~

对于您的具体问题：

1.) 您可以通过了解规范文档并按照指定创建 REST 端点来创建自己的 LRS。无论如何，这都不是一件小事。

2.) 您最好的选择是使用 SDK 或从 AFNetworking 到 TCAPI 端点的简单 GET 和 PUT/POST 语句。

# sql - 从选择中插入数据到多个表中

> ID：15524158
> 
> 赞同：-1
> 
> 时间：2013-03-20T12:55:48.623
> 
> 标签：sql, database, sql-server-2008, sql-server-2008-r2

我有两个表的第一个数据库，

```
buildings
id city zip 
```

和

```
buildingGallery
id path 
```

这些表包含一些数据，它们具有一对一的关系

我有第二个数据库，其中包含相同的数据表。我如何将来自第一个数据库的数据添加到另一个数据库中？

```
INSERT INTO [firstdb]..buildings
(city,zip,)
SELECT   city, zip
FROM     [second]..buildings 
```

该脚本在建筑物表之间传输数据。但是我如何在 buildingGallery 中传输数据。

更新。

```
firstDb                                       SecondDb
buildings       buildingGallery            buildings        buildingGallery     
id zip city     id  path                    id zip city       id  path
1  22  minsk     1  somePath                 1  33 Moscow     1    somepath2 
```

在我想要得到之后

```
 firstDb                                       SecondDb
buildings       buildingGallery            buildings        buildingGallery     
id zip city     id  path                    id zip city       id  path
1  22  minsk     1  somePath                 1  33 Moscow     1    somepath2
2  33  Moscow    2  somepath2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T13:06:01.037

在尝试此类查询之前，您需要牢记以下几点

1.  两个数据库之间存在相互连接，您用于执行查询的用户具有足够的权限。
2.  您需要按以下格式指定查询

`DATABASE_NAME.SCHEMA_NAME.TABLE_NAME`而不仅仅是`TABLE_NAME`

# c - 更改数组中变量的值（C 编程）

> ID：15524160
> 
> 赞同：0
> 
> 时间：2013-03-20T12:55:51.777
> 
> 标签：c, arrays, variables, pointers

基本上我想要做的是获取我声明的三个温度传感器读数并将它们集中到一个数组中。从那时起，我希望能够增加数组中每个变量的值，具体取决于用户选择的当前频道，这是一个名为 selectChannel 的变量

因此，如果用户在通道 0 上，并且他们按 R，我希望 temperatureSensor1Reading 增加。@icktoofay 提到使用指针，我做了他们推荐的更改，但是当我按 r 或 f 时，温度不会升高。

```
enter code here
#include "stdafx.h" 
#include <Windows.h> //additional header added to allow for coloured text
#include "console.h"
#include <conio.h>
#include "lab4temperatureController.h"
#include <time.h>
//#define hConsole  
#define CH1 0
#define CH2 1
#define CH3 2

temperature_t selectChannel = 0;
temperature_t temperatureSensor1Reading = 75;
temperature_t temperatureSensor2Reading = 75;
temperature_t temperatureSensor3Reading = 75;
temperature_t *temperatureSensorReadings[3] = {&temperatureSensor1Reading, &temperatureSensor2Reading, &temperatureSensor3Reading};

//Update Display:---------------------
//Description: prints out readings and updates with increment, decrement and average
//
//Parameters: lowlimit, highlimit, temperatures, Channels
//
//
//Returns:
//
//------------------------------------------------------------------
void updateDisplay()
{
        clrscr();
        HANDLE hConsole; //standard c library call 
        hConsole = GetStdHandle(STD_OUTPUT_HANDLE); //used for output screen buffer to allow for coloured text

    SetConsoleTextAttribute(hConsole, 2); //sets output screen colour for following text
    printf("\nCurrent Temperature for channel 1 is %d\n\n", temperatureSensor1Reading);
    printf("Upper Limit for channel 1 is  %d\n\n", getHighLimit(CH1));
    printf("Lower Limit for channel 1 is  %d\n\n", getLowLimit(CH1));
    setCurrentTemperature(CH1, temperatureSensor1Reading);

    SetConsoleTextAttribute(hConsole, 3); //sets output screen colour for following body of text
    printf("Current Temperature for channel 2 is  %d\n\n", temperatureSensor2Reading);
    printf("Upper Limit for channel 2 is  %d\n\n", getHighLimit(CH2));
    printf("Lower Limit for channel 2 is  %d\n\n", getLowLimit(CH2));
    setCurrentTemperature(CH2, temperatureSensor2Reading);

    SetConsoleTextAttribute(hConsole, 4); //sets output screen colour for following body of text
    printf("Current Temperature for channel 3 is %d\n\n", temperatureSensor3Reading);
    printf("Upper Limit for channel 3 is  %d\n\n", getHighLimit(CH3));
    printf("Lower Limit for channel 3 is  %d\n\n", getLowLimit(CH3));
    setCurrentTemperature(CH3, temperatureSensor3Reading);

    compareMinLimit(CH1);
    compareMinLimit(CH2);
    compareMinLimit(CH3);
    compareHighLimit(CH1);
    compareHighLimit(CH2);
    compareHighLimit(CH3);

    if (isAverageValid() == TRUE)
    {

        //if average is valid call function to calculate average and print returned value
        //SetConsoleTextAttribute(hConsole, 5); //sets output screen colour for following text
        printf("average for channel 1 is %d\n\n", calculateAverageTemperature(CH1));
        printf("average for channel 2 is %d\n\n", calculateAverageTemperature(CH2));
        printf("average for channel 3 is %d\n\n", calculateAverageTemperature(CH3));
        //--if average is valid call functions to determine min and max values and print returned values for each channel
        temperature_t max1 = calculateMax(CH1); 
        temperature_t min1 = calculateMin(CH1);
        temperature_t max2 = calculateMax(CH2);
        temperature_t min2 = calculateMin(CH2);
        temperature_t max3 = calculateMax(CH3);
        temperature_t min3 = calculateMin(CH3);
        printf("the maximum temperature is: %d \n \nthe minimum temperature is: %d \n \n", max1,min1); //display each channels max/min
        printf("the maximum temperature is: %d \n \nthe minimum temperature is: %d \n \n ", max2,min2);
        printf("the maximum temperature is: %d \n \nthe minimum temperature is: %d \n \n", max3,min3);
        // if average is valid call function to print histogram

        SetConsoleTextAttribute(hConsole, 15);
        printf("the following is the pressure histogram for channel %d \n \n", selectChannel+1); 

            printPressureHistogram(selectChannel);

            //print out the current channels histograms
        //initializeTemperatureSubsystem();
    }
}

//main:---------------------
//Description: initializes the temperature subsystem and provides user with various input commands
// which can be used to increment, decrement and get average value of temperatures
//Parameters: lowlimit, highlimit, temperatures, MAXSAMPLES
//
//Returns:
//------------------------------------------------------------------

int _tmain(int argc, _TCHAR* argv[])
{
    // -- insert variable declaration for time ------
time_t timeOfLastStoredSample, currentTime;
//==============================================

initializeTemperatureSubsystem();

//--insert code to store the initial sensor temperature------
recordCurrentTemperature(CH1, temperatureSensor1Reading); //records each channels temperature reading
recordCurrentTemperature(CH2, temperatureSensor2Reading);
recordCurrentTemperature(CH3, temperatureSensor3Reading);

//--record the time as timeOfLastSample
timeOfLastStoredSample = time(NULL);

//==========================================

printf("\n Q,A: Adjust the current temperature select, W,S adjust our limit, E,D adjust lower limit \n");
unsigned char quit = 'n'; //binds quit to literal value of 'n'
while(quit == 'n') //executes until user quits
{

//-- insert code to get currentTime----
    time(&currentTime); //ASK ABOUT THIS (we haev to explicitly direct time to the address for current time

//--insert code to compare the two time values and see if 20 seconds have elapse
    if (currentTime - timeOfLastStoredSample >= 1)
    {   
        //if 20 seconds have elapsed, record the time and update value held by timeLastStoredSample
        recordCurrentTemperature(CH1, temperatureSensor1Reading);
        recordCurrentTemperature(CH2, temperatureSensor2Reading);
        recordCurrentTemperature(CH3, temperatureSensor3Reading);

        time(&timeOfLastStoredSample);

    }

    updateDisplay();
    Sleep(200);
    unsigned char selectedCommand = 0;

    if( _kbhit()  )
        {
        selectedCommand = _getch();

        switch(selectedCommand)
            {

            case 'Q': //if user input is Q
            case 'q'://if user input is q
            selectChannel ++;
            if (selectChannel > 2) //determine which channel the user is on, if greater than 2, then cycle to channel 0
                selectChannel = CH1; 
                printf ("\n your current channel is %d \n \n ", selectChannel + 1); 

                break; //exits loop

            case 'A': //if user input is A
            case 'a'://if user input is a
            selectChannel --;
            if (selectChannel < 0) //determine which channel the user is on, if less than 0, then cycle to channel 2
                selectChannel = CH3; 
                printf (" \n your current channel is %d \n \n", selectChannel + 1);

                break; //exits loop

            case 'R': //if user input is R
            case 'r'://if user input is r

            *temperatureSensorReadings[selectChannel]++;

                break; //exits loop

            case 'F': //if user input is 'F'
            case 'f': //if user input is 'f'        

            *temperatureSensorReadings[selectChannel]--;

                break; //exits loop

            case 'W': //if user input is 'W'
            case 'w': //if user input is 'w'

            increaseHighLimit(selectChannel); //increase CH1 high limit

                break; //exits loop

            case 'S':
            case 's'://if user input is 'S

            decreaseHighLimit(selectChannel); //decrement CH1 high limit

            break; //exits loop

            case 'E':
            case 'e': //if user input is E

                increaseLowLimit(selectChannel); //decrement CH1 low limit

                break; //exits loop

            case'D':
            case'd': //if user input is D

                decreaseLowLimit(selectChannel); //decrement CH1 lowlimit

                break;//exits loop

            case'X': //conditions apply for preceding case as well (for upper and lowercase "q")
                clrscr(); //executes function
                gotoxy(2,2); //returns command line to 2,2 location
                printf("Exiting...Bye!\n");
                quit = 'y'; //cause exit of while loop
                break;

            default:
                clrscr(); //executes function
                gotoxy(1,1); //takes command line to location 1,1
                printf("Q,A: Adjust the current temperature select, W,S adjust our limit, E,D adjust lower limit \n");
                break;
        }//eo of switch
    }//eo kbhit()
}// eo while loop
return 0; 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T13:35:29.160

问题在于`temperature_t *temperatureSensorReadings[3]`以一种非常奇怪的方式声明。

当您增加（或降低）温度时，`*temperatureSensorReadings[selectChannel]++;`您不会增加存储在数组中的温度值，而是指向该值的指针。然后指针指向导致未定义行为的未分配空间。

使用正确的括号将解决该问题

```
( *temperatureSensorReadings[selectChannel] )++; 
```

一个适当的解决方案是将数组声明为：

```
temperature_t temperatureSensor1Reading = 75;
temperature_t temperatureSensor2Reading = 75;
temperature_t temperatureSensor3Reading = 75;
temperature_t temperatureSensorReadings[3] = { temperatureSensor1Reading,  temperatureSensor2Reading,  temperatureSensor3Reading}; 
```

并更改将值增加到更简单的代码的行

```
case 'R': //if user input is R
case 'r'://if user input is r

temperatureSensorReadings[selectChannel]++; 
```

这当然意味着更改可能依赖于该数组的所有其他代码。

# c# - C#：如何在控制面板程序和功能中安装程序？

> ID：15524161
> 
> 赞同：17
> 
> 时间：2013-03-20T12:55:53.590
> 
> 标签：c#, .net, windows, registry, controlpanel

我阅读了很多获取程序的信息。没有一种算法能做到我想要的。我需要像在控制面板中一样安装*程序*。

所以我用：

1.  WMI`Win32_Product`类。它仅显示 msi 安装的程序。
2.  注册表项。`HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall`. 同样，控制面板中不显示某些程序，控制面板中显示的某些程序不在此注册表节点中。

那么，这个世界上有没有人知道哪个算法使用控制面板来显示已安装的程序？

UPD1：是的，我使用 64 位，我知道还有另一个节点用于 64 位安装程序“HKLM\SOFTWARE\Wow6432Node\Microsoft\Windows\CurrentVersion\Uninstall”，但以下代码枚举了两次 HKLM\SOFTWARE\Wow6432Node\Microsoft\Windows\ CurrentVersion\Uninstall 部分，奇怪...

var 程序 = 新列表（）；string registry_key = @"SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall"; using (Microsoft.Win32.RegistryKey key = Registry.LocalMachine.OpenSubKey(registry_key)) { foreach (string subkey_name in key.GetSubKeyNames()) { using (RegistryKey subkey = key.OpenSubKey(subkey_name)) { var name = (string) subkey.GetValue("DisplayName"); if(!string.IsNullOrEmpty(name)) {programs.Add(name); } } } } registry_key = @"SOFTWARE\Wow6432Node\Microsoft\Windows\CurrentVersion\Uninstall"; 使用 (Microsoft.Win32.RegistryKey key = Registry.LocalMachine.OpenSubKey(registry_key)) { foreach (string subkey_name in key. GetSubKeyNames()) { using (RegistryKey subkey = key.OpenSubKey(subkey_name)) { var name = (string)subkey.GetValue("DisplayName"); if (!string.IsNullOrEmpty(name)) {programs.Add(name); } } } } foreach (var program in programs.OrderBy(x => x)) { Console.WriteLine(program); } x)) { Console.WriteLine(程序); } x)) { Console.WriteLine(程序); }

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-03-21T06:12:03.393

Ok gyus，我编写的类可以从注册表中获取已安装的程序，而无需修补程序和更新。它仍然**不完全**像在控制面板中，但**几乎**。我希望这对其他人有帮助。

```
公共静态类 InstalledPrograms
{
    const string registry_key = @"SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall";

 `public static List<string> GetInstalledPrograms()
    {
        var result = new List<string>();
        result.AddRange(GetInstalledProgramsFromRegistry(RegistryView.Registry32));
        result.AddRange(GetInstalledProgramsFromRegistry(RegistryView.Registry64));
        return result;
    } 

    private static IEnumerable<string> GetInstalledProgramsFromRegistry(RegistryView registryView)
    {
        var result = new List<string>();

        using (RegistryKey key = RegistryKey.OpenBaseKey(RegistryHive.LocalMachine, registryView).OpenSubKey(registry_key))
        {
            foreach (string subkey_name in key.GetSubKeyNames())
            {
                using (RegistryKey subkey = key.OpenSubKey(subkey_name))
                {
                    if(IsProgramVisible(subkey))
                    {
                        result.Add((string)subkey.GetValue("DisplayName"));
                    }
                }
            }
        }

        return result;
    }

    private static bool IsProgramVisible(RegistryKey subkey)
    {
        var name = (string)subkey.GetValue("DisplayName");
        var releaseType = (string)subkey.GetValue("ReleaseType");
        //var unistallString = (string)subkey.GetValue("UninstallString");
        var systemComponent = subkey.GetValue("SystemComponent");
        var parentName = (string)subkey.GetValue("ParentDisplayName");

        return
            !string.IsNullOrEmpty(name)
            && string.IsNullOrEmpty(releaseType)
            && string.IsNullOrEmpty(parentName)
            && (systemComponent == null);
    }
}` 

            回答 #2

赞同：4

时间：2015-10-22T05:40:00.310

MelnikovI 的答案对于大多数用途来说已经足够了——我的列表中有 144 项，而程序和功能中有 143 项。  **对于审查**，他的解决方案是点击这些注册表位置：

*   HKLM\Software\Microsoft\Windows\CurrentVersion\Uninstall
*   HKCU\Software\Microsoft\Windows\CurrentVersion\Uninstall
*   HKLM\Software\Wow6432Node\Microsoft\Windows\CurrentVersion\Uninstall

要获得资格，每个子项必须具有：

*   DisplayName REG_SZ 值

并且不得有：

*   SystemComponent REG_DWORD（非零）
*   ParentKeyName 或 ParentDisplayName REG_SZ 值
*   ReleaseType REG_SZ 值

我发现的**一项附加增强功能是针对 Windows Installer 条目，定义为：**

*   键名是标准 GUID 字符串
*   WindowsInstaller REG_DWORD 存在（并且非零）

对于此类条目，您可以采取额外的步骤，即使用 msi.dll 中的 Win32 函数**MsiGetProductInfoW** **，**并为键表示的 GUID 请求“VersionString”属性。 如果此函数返回**1605: ERROR_UNKNOWN_PRODUCT**，则表示该条目未根据 Windows Installer 安装，应从显示中排除。

在实施了这个小调整之后，我的列表现在与程序和功能相同。

* * *

## 回答 #3

> 赞同：2
> 
>             
> 
> 时间：2015-09-14T21:48:18.477

我采用了 MelnikovI 编写的代码（非常有用）并添加了一些东西。首先，它在注册表中搜索四个位置：

HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall

HKLM\SOFTWARE\Wow6432Node\Microsoft\Windows\CurrentVersion\Uninstall

HKCU\SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall

HKCU\SOFTWARE\Wow6432Node\Microsoft\Windows\CurrentVersion\Uninstall

它还检查是否有任何子键 - 如果没有，它会跳过那个。

最后，它做了一个正则表达式，只允许一组特定的字符 [^a-zA-Z0-9 .()+-]。

我只是从 C# 开始，所以我不知道循环遍历所有四个 reg 位置的方法，所以我有两个循环（一个用于 HKLM，一个用于 HKCU）。

```
public static class InstalledPrograms
    {
      public static List<string> GetInstalledPrograms()
        {
            var result = new List<string>();
            result.AddRange(GetInstalledProgramsFromRegistry(RegistryView.Registry32));
            result.AddRange(GetInstalledProgramsFromRegistry(RegistryView.Registry64));
            result.Sort();
            return result;
        }
        private static string cleanText(string dirtyText)
        {
            Regex rgx = new Regex("[^a-zA-Z0-9 .()+-]");
            string result = rgx.Replace(dirtyText, "");
            return result;
        }
        private static IEnumerable<string> GetInstalledProgramsFromRegistry(RegistryView registryView)
        {
            var result = new List<string>();
            List<string> uninstall = new List<string>();
            uninstall.Add(@"SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall");
            uninstall.Add(@"SOFTWARE\Wow6432Node\Microsoft\Windows\CurrentVersion\Uninstall");
            foreach (string registry_key in uninstall)
            {
               using (RegistryKey key = RegistryKey.OpenBaseKey(RegistryHive.LocalMachine, registryView).OpenSubKey(registry_key))
               {
                    foreach (string subkey_name in key.GetSubKeyNames())
                    {
                        using (RegistryKey subkey = key.OpenSubKey(subkey_name))
                        {
                            if (IsProgramVisible(subkey))
                            {
                                result.Add(cleanText(subkey.GetValue("DisplayName").ToString()).ToString());
                            }
                        }
                    }
                }
                using (RegistryKey key = RegistryKey.OpenBaseKey(RegistryHive.CurrentUser, registryView).OpenSubKey(registry_key))
                {
                    if (key != null)
                    {
                        foreach (string subkey_name in key.GetSubKeyNames())
                        {
                            using (RegistryKey subkey = key.OpenSubKey(subkey_name))
                            {
                                if (IsProgramVisible(subkey))
                                {
                                    result.Add(cleanText(subkey.GetValue("DisplayName").ToString()).ToString());
                                }
                            }
                        }
                    }
                }
            }

            return result;
        } 
```

如果有人感兴趣，我将结果与我一直在使用的 PowerShell 进行了比较，它们是相同的。

```
##Get list of Add/Remove programs
if (!([Diagnostics.Process]::GetCurrentProcess().Path -match '\\syswow64\\'))
{
$uninstallPath = "\SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall\"
$uninstallWow6432Path = "\SOFTWARE\Wow6432Node\Microsoft\Windows\CurrentVersion\Uninstall\"
@(
if (Test-Path "HKLM:$uninstallWow6432Path" ) { Get-ChildItem "HKLM:$uninstallWow6432Path"}
if (Test-Path "HKLM:$uninstallPath" ) { Get-ChildItem "HKLM:$uninstallPath" }
if (Test-Path "HKCU:$uninstallWow6432Path") { Get-ChildItem "HKCU:$uninstallWow6432Path"}
if (Test-Path "HKCU:$uninstallPath" ) { Get-ChildItem "HKCU:$uninstallPath" }
) |
ForEach-Object { Get-ItemProperty $_.PSPath } |
Where-Object {
$_.DisplayName -and !$_.SystemComponent -and !$_.ReleaseType -and !$_.ParentKeyName -and ($_.UninstallString -or $_.NoRemove)
} |
Sort-Object DisplayName |
Select-Object DisplayName
}
else
{
"You are running 32-bit Powershell on 64-bit system. Please run 64-bit Powershell instead." | Write-Host -ForegroundColor Red
} 
```

* * *

## 回答 #4

> 赞同：0
> 
>             
> 
> 时间：2019-04-18T16:36:12.157

此处在其他几个答案中讨论的 SystemComponent 注册表项*通常*是 REG_DWORD，可能值为 0 或 1。但是，我见过几个实例（例如 Microsoft Visio 2010 和 Microsoft Project 2010），其中 SystemComponent 是没有数据的 REG_SZ . 因此，任何将 SystemComponent 转换为 int 的解决方案都可能在这些情况下引发异常。 
```

# django - 站点匹配查询不存在。查找参数为 {'pk': 3}

> ID：15524176
> 
> 赞同：8
> 
> 时间：2013-03-20T12:56:23.560
> 
> 标签：django

```
Environment:

Request Method: GET
Django Version: 1.5
Python Version: 2.7.3
Installed Applications:
('django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'allauth',
 'allauth.account',
 'allauth.socialaccount',
 'allauth.socialaccount.providers.facebook',
 'allauth.socialaccount.providers.google',
 'allauth.socialaccount.providers.linkedin',
 'django.contrib.admin',
 'django.contrib.admindocs')

Installed Middleware:

('django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware')

Traceback:

File "/usr/local/lib/python2.7/dist-packages/django/core/handlers/base.py" in get_response
  115\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/usr/local/lib/python2.7/dist-packages/django/views/generic/base.py" in view
  68\.             return self.dispatch(request, *args, **kwargs)
File "/var/www/sampleapp/allauth/account/views.py" in dispatch
  41\.                                                                     **kwargs)
File "/usr/local/lib/python2.7/dist-packages/django/views/generic/base.py" in dispatch
  86\.         return handler(request, *args, **kwargs)
File "/usr/local/lib/python2.7/dist-packages/django/views/generic/edit.py" in get
  155\.         return self.render_to_response(self.get_context_data(form=form))
File "/var/www/sampleapp/allauth/account/views.py" in get_context_data
  67\.                 "site": Site.objects.get_current(),
File "/usr/local/lib/python2.7/dist-packages/django/contrib/sites/models.py" in get_current
  26\.             current_site = self.get(pk=sid)
File "/usr/local/lib/python2.7/dist-packages/django/d
b/models/manager.py" in get
  143\.         return self.get_query_set().get(*args, **kwargs)
File "/usr/local/lib/python2.7/dist-packages/django/db/models/query.py" in get
  401\.                 (self.model._meta.object_name, kwargs))

Exception Type: DoesNotExist at /accounts/login/
Exception Value: Site matching query does not exist. Lookup parameters were {'pk': 3} 
```

我是 django 新手，帮我解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-28T15:37:12.300

我也遇到了这个问题。我正在阅读[PyCharm Django 指南](http://www.jetbrains.com/pycharm/quickstart/django_guide.html)。我通过删除我的 sqlite 数据库文件并再次运行 syncdb 来解决此问题。我不知道为什么它第一次不起作用，但现在它起作用了。

此外，可能值得下载[SQLite 数据库浏览器](http://sourceforge.net/projects/sqlitebrowser/)，以便您可以查看 SQLite 数据库的实际结构。对于这个问题，您对 django_site 表感兴趣。删除数据库文件并重新运行 syncdb 后，此表中有一行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-01T20:55:22.093

出现此问题是因为您第一次执行时`python manage.py syncdb.`未指定*主用户*。要解决它，删除数据库中django创建的所有表（使用mysql，postgresql..）或删除database.db（使用sqlite3），然后再运行`python manage.py syncdb`一次

# .net - 监视 RAW 磁盘活动

> ID：15524179
> 
> 赞同：0
> 
> 时间：2013-03-20T12:56:30.283
> 
> 标签：.net, hard-drive, low-level

有没有办法在执行某些高级操作时监控硬盘驱动器的确切功能，例如

```
Directory.CreateDirectory()

File.Exists() 
```

等等

我说的是 .NET 编程，因此我希望看到类似的内容：

```
seek to cylinder xx sector yy
read xx clusters
seek to ... 
```

如果所有这些都可以用时间来衡量，那就太好了，等等。

关于从哪里开始的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T21:32:12.320

您可以提取 SMART 数据并按时间进行映射，每次查找和读取操作在硬件中都有一个计数器。

如果驱动器支持它。

# php - 如何在新窗口中打开由 TCPDF 创建的 PDF 中的链接

> ID：15524180
> 
> 赞同：-1
> 
> 时间：2013-03-20T12:56:32.600
> 
> 标签：php, html, target, tcpdf

我已经尝试过`target="_blank"`，但没有任何反应。有人帮助解决这个问题吗？我需要在 PDF 文件中的新选项卡/窗口中打开链接。

我在用着`TCPDF 5.9.176`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T19:47:24.107

尝试使用 javascript：

```
<script type="text/javascript">function abrirVentana(url) {
window.open(url, "nuevo");
}
</script> 
```

然后是 HTML：

```
<a href="#" onClick="abrirVentana('http://')"></a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T19:50:25.490

另一种方法是：

```
<script type="text/javascript">function openExternal(){
if(!document.getElementsByTagName) return;
var anchors = document.getElementsByTagName(’a');
for(var i = 0; i < anchors.length; i++){
    var thisAnchor = anchors[i];
    if(thisAnchor.getAttribute(’href’) && thisAnchor.getAttribute(’rel’) == ‘external’){
        thisAnchor.target = ‘_blank’;
    }
 }
}

window.onload = openExternal;
</script>
<a href="http://" rel=”external”&gt;</a> 
```

# asp.net - 在安全连接 (HTTPS) 中使用 SignalR 的“longpoling”连接时的安全警报 | IE8

> ID：15524181
> 
> 赞同：5
> 
> 时间：2013-03-20T12:56:38.437
> 
> 标签：asp.net, https, internet-explorer-8, signalr, long-polling

只有一个问题，我只是在使用 HTTPS 时在 SignalR 聊天应用程序中收到`"Securty Waring"`警报`IE 8`

![在此处输入图像描述](../Images/9e9fa3a6e3840eca7d97432a52ab99ae.png)

我`longpolling`在`IE8`. 它在所有其他 IE 浏览器中运行良好。

```
self.Connect = function () {
     hubConn.start({ transport: 'longPolling' }).done(function (result) {
                ///--
     }).fail(function (error) {
                ///--
         alert("error" + error);
     });
} 
```

当我尝试提琴手时，安全警告出现了一个信号器 ajax 调用，如下所示。

![在此处输入图像描述](../Images/119cc1d95708b8765c19e29609352dd4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T07:28:59.940

IE 中安全警告的各种可能性在下面的 url 中进行了解释

[ie7-this-page-contains-both-secure-and-nonsecure-items](http://weblogs.asp.net/rchartier/archive/2008/03/12/ie7-this-page-contains-both-secure-and-nonsecure-items.aspx)

问题实际上不在于信号器聊天，我在下面给出的 url 中详细说明了问题的原因。

[安全+警告+in+IE+版本+8](http://forums.asp.net/t/1891981.aspx/2/10?Security%20warning%20in%20IE%20version%208%20when%20used%20signalr%20in%20https%20context)

谢谢大家的支持：）

最好的，

林托·塞巴斯蒂安

# java - Java，检查PATH环境中是否存在可执行文件

> ID：15524182
> 
> 赞同：15
> 
> 时间：2013-03-20T12:56:43.270
> 
> 标签：java, environment-variables

我可以使用打印路径`System.getenv("PATH")`。然后我可能可以遍历这些路径并用于`File`检查文件是否存在。

Java中有更快的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T13:23:12.337

> Java中有更快的方法吗？

就性能而言，没有。

就编码工作而言，可能没有。当然，我不知道有任何第 3 方 Java 库会搜索命令搜索路径以查看是否存在可执行文件。

不幸的是，在 Windows 上搜索可执行文件有点棘手，因为您必须考虑各种类型的可执行文件……基于文件后缀。即使在 Linux / Unix 上，您也需要使用新的 Java 7 文件属性 API 来确定候选文件是否具有执行权限集。

（我知道某些命令可以以无害的方式运行；例如，它们可能支持输出版本字符串或一些帮助信息的选项/参数。但是，这只适用于特定情况。我也知道在 Unix / Linux 上，有一个名为“whereis”的内置 shell 命令可以告诉您搜索路径中是否存在具有给定名称的可执行命令。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-20T13:00:31.790

您可以`Runtime.getRuntime().exec("command");`在`try ... catch`部分中使用。如果应用程序不存在，`PATH`您将获得异常。

**[编辑]**

但是..这将执行应用程序而不是检查。对不起。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-20T13:10:51.797

你的方法会奏效。

我建议对路径中的每个目录使用[File.listFiles(FileFilter filter)](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#listFiles%28java.io.FileFilter%29)方法。这将使搜索每个目录更简单。

# node.js - node-awssum 去哪儿了？

> ID：15524184
> 
> 赞同：1
> 
> 时间：2013-03-20T12:56:44.310
> 
> 标签：node.js, github, amazon-web-services

我正在使用一个名为 node-awssum 的 Node.js 库，它已经存在了很长一段时间。但是现在好像这个库已经从 Github 下架了。有谁知道它发生了什么以及我在哪里可以找到替换存储库或分支？

[https://github.com/appsattic/node-awssum](https://github.com/appsattic/node-awssum)

[https://www.google.com/search?q=node+awssum](https://www.google.com/search?q=node+awssum)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T22:10:40.190

注意：我是 AwsSum 的作者。

AwsSum 现在有一个新的插件架构，它现在还有一个 GitHub 组织：

*   [https://github.com/awssum/awssum](https://github.com/awssum/awssum)

当前 NPM 上的包是 1.0.0-alpha，所以如果你想要旧版本，你应该在你的 package.json 文件中明确声明你想要 v0.12.2。

在新的做事方式中，如果您只使用 S3，那么您只需将 awssum-amazon-s3 放入您的 package.json 中，然后 awssum 和 awssum-amazon 将作为 peerDependencies 被拉入。

另请注意，[http://awssum.io/](http://awssum.io/)站点仍然存在，但需要更新。

最后，如果您想查找 AwsSum 的插件，请执行以下操作以查找可用的插件：

`$ npm search awssum-plugin`

干杯，安迪

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T13:30:20.297

你的意思是`awssum`，`node-awssum`已经停产了。看这里 ：

1.  Github[链接](https://github.com/awssum/awssum)
2.  npm[链接](https://npmjs.org/package/awssum)

# android - 无法访问包管理器。安装android应用程序时系统是否正在运行

> ID：15524185
> 
> 赞同：65
> 
> 时间：2013-03-20T12:56:44.770
> 
> 标签：android, android-emulator, runtime-error

在模拟器中安装 android 应用程序时，出现以下错误。

请帮我解决这个错误。

错误信息：

```
emulator.exe -avd avd_name

adb wait-for-device    

adb install path-to.apk    

could not access the package manager. is the system running while installing android application.... 
```

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2013-08-11T11:21:47.633

您需要等待模拟器完全启动 - 需要几分钟。一旦它完全启动（模拟器上的 UI 会改变），它应该可以工作。

您需要在模拟器运行后重新启动应用程序，并在出现提示时选择正在运行的模拟器。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-01-04T18:56:07.407

正如其他人所说，发生此错误是因为模拟器仍在启动过程中。此时尝试访问设备的包管理器会导致错误。

这只是一个简单的时间问题。以下是避免此错误的步骤：

1.  等到模拟器“锁屏”出现。
2.  再次运行“应用程序”（大多数 IDE 中的 ^R）。
3.  选择正在运行的设备（应该是同一个模拟器）。

应用程序应该安装没有错误。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-10-29T14:59:50.540

就我而言，只是模拟器需要 9 分钟才能启动。等到您在模拟器 LCD 上看到锁定图标。或使用实际的平板电脑或手机。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-01-08T11:52:29.120

在链接之后面临相同的问题有助于解决问题。上述解决方案对我没有帮助。 [部署失败 - 无法访问 - 包管理器 - 系统正在运行](https://forums.xamarin.com/discussion/64802/deployment-failed-could-not-access-the-package-manager-is-the-system-running)

通过使用 CMD 应用程序重新启动服务器重新开始工作。打开cmd（以管理员身份运行），打开这个

`cd C:\Program Files (x86)\Android\android-sdk\platform-tools`

（此路径必须指定您的 android-sdk 安装文件夹）

现在，先写， `adb kill-server`然后 `adb start-server`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-07-23T09:19:40.310

杀死进程/服务器并重新启动它。！有效。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-03-30T04:08:09.820

您可以通过在启动应用程序之前设置默认设备来避免错误。在启动应用程序之前启动 AVD。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-05-23T06:20:17.847

看到此错误后，请等待模拟器显示锁定屏幕。然后在 IDE 中重新启动应用程序并再次检查模拟器。它总是对我有用。

在 Android Studio 中，您可以通过单击绿色播放按钮或 ctrl + r 重新启动。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-10-10T23:23:33.540

如果在使用 root 设备的 su 提示符而不是来自模拟器时出现此错误，请先禁用 SELinux

`setenforce 0`

您可能需要先切换到 shell 用户才能进行一些 pm 操作

`su shell`

然后重新运行您的`pm`命令。

同样适用于`am`su 提示符下不可用的命令。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-02-15T09:19:40.953

我的解决方案是重新启动 IDE。我怀疑一个缓慢的模拟器隐藏在视线之外，阻止了我设备上的安装。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-06-01T10:41:34.007

检查您的项目构建是否处于调试模式而不是发布，我总是在调试时遇到一些问题我忘记将发布模式更改为调试（Xamarin 用户）

# c# - 如何使用 Microsoft.Office.Interop.Word 从 C# 中的 Word 文件中查找突出显示的文本？

> ID：15524186
> 
> 赞同：3
> 
> 时间：2013-03-20T12:56:45.763
> 
> 标签：c#, .net, c#-4.0, ms-office, office-interop

这个问题本来很简单，但事实证明，添加了一个额外的条款让我很头疼。这里的问题是我不需要所有突出显示的“单词”，而是 Word 文件中的“短语”。我写了以下代码：

```
using Word = Microsoft.Office.Interop.Word;

private void button1_Click(object sender, EventArgs e)
{
    try
    {
        Word.ApplicationClass wordObject = new Word.ApplicationClass();
        wordObject.Visible = false;
        object file = "D:\\mywordfile.docx";
        object nullobject = System.Reflection.Missing.Value;
        Word.Document thisDoc = wordObject.Documents.Open(ref file, ref nullobject, ref nullobject, ref nullobject, ref nullobject, ref nullobject, ref nullobject, ref nullobject, ref nullobject, ref nullobject, ref nullobject, ref nullobject, ref nullobject, ref nullobject, ref nullobject, ref nullobject);
        List<string> wordHighlights = new List<string>();

        //Let myRange be some Range which has my text under consideration

        int prevStart = 0;
        int prevEnd = 0;
        int thisStart = 0;
        int thisEnd = 0;
        string tempStr = "";
        foreach (Word.Range cellWordRange in myRange.Words)
        {
            if (cellWordRange.HighlightColorIndex.ToString() == "wdNoHighlight")
            {
                continue;
            }
            else
            {
                thisStart = cellWordRange.Start;
                thisEnd = cellWordRange.End;
                string cellWordText = cellWordRange.Text.Trim();
                if (cellWordText.Length >= 1)   // valid word length, non-whitespace
                {
                    if (thisStart == prevEnd)    // If this word is contiguously highlighted with previous highlighted word
                    {
                        tempStr = String.Concat(tempStr, " "+cellWordText);  // Concatenate with previous contiguously highlighted word
                    }
                    else
                    {
                        if (tempStr.Length > 0)    // If some string has been concatenated in previous iterations
                        {
                            wordHighlights.Add(tempStr);
                        }
                        tempStr = "";
                        tempStr = cellWordText;
                    }
                }
                prevStart = thisStart;
                prevEnd = thisEnd;
            }
        }

        foreach (string highlightedString in wordHighlights)
        {
            MessageBox.Show(highlightedString);
        }
    }
    catch (Exception j)
    {
        MessageBox.Show(j.Message);
    }
} 
```

现在考虑以下文本：

*Le thé vert a un rôle dans la diminution du cholestérol, la burning des graisses, la prevention du diabète et les AVC, et conjurer la démence。*

现在假设有人突出显示“ *du cholestérol* ”，我的代码显然选择了两个词“ *du* ”和“ *cholestérol* ”。如何使连续突出显示的区域显示为一个单词？我的意思是“ *du cholestérol* ”应该作为一个实体返回`List`。我们按字符扫描文档，将突出显示的起点标记为选择的起点，将突出显示的终点标记为选择的终点的任何逻辑？

PS：如果有任何其他语言的所需功能的库，请让我知道，因为场景不是特定于语言的。我只需要以某种方式获得所需的结果。

**编辑：**按照 Oliver Hanappi 的建议`Start`修改了代码。`End`但问题仍然在于，如果有两个这样的突出显示的短语，仅由一个空格分隔，则程序将两个短语视为一个。仅仅因为它读取`Words`而不是空格。可能需要一些编辑`if (thisStart == prevEnd)`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T14:12:20.070

您可以使用 Find 更有效地执行此操作，这将更快地搜索并选择所有匹配的连续文本。请参阅此处的参考[http://msdn.microsoft.com/en-us/library/office/bb258967%28v=office.12%29.aspx](http://msdn.microsoft.com/en-us/library/office/bb258967%28v=office.12%29.aspx)

这是 VBA 中的一个示例，它打印所有出现的突出显示文本：

```
Sub TestFind()

  Dim myRange As Range

  Set myRange = ActiveDocument.Content    '    search entire document

  With myRange.Find

    .Highlight = True

    Do While .Execute = True     '   loop while highlighted text is found

      Debug.Print myRange.Text   '   myRange is changed to contain the found text

    Loop

  End With

End Sub 
```

希望这可以帮助您更好地理解。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T13:29:31.633

您可以查看范围的[Start](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.word.range.start.aspx)和[End](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.word.range.end.aspx)属性，并检查第一个范围的结束是否等于第二个范围的开始。

作为替代方案，您可以[将](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.word.range.move.aspx)范围移动一个单词（参见 WdUnits.wdWord），然后检查移动的开始和结束是否等于第二个单词的开始和结束。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T14:06:20.100

grahamj42 答案还可以，我已将其翻译为 C#。如果要在整个文档中查找匹配项，请使用：

```
Word.Range content = thisDoc.Content 
```

但请记住，这只是 mainStoryRange，如果你想匹配单词，例如你需要使用的脚注：

```
Word.StoryRanges stories = null;
stories = thisDoc.StoryRanges;
Word.Range footnoteRange = stories[Word.WdStoryType.wdFootnotesStory] 
```

我的代码：

```
Word.Find find = null;
Word.Range duplicate = null;
try
{
    duplicate = range.Duplicate;
    find = duplicate.Find;
    find.Highlight = 1;

    object str = "";
    object missing = System.Type.Missing;
    object objTrue = true;
    object replace = Word.WdReplace.wdReplaceNone;

    bool result = find.Execute(ref str, ref missing, ref missing, ref missing, ref missing, ref missing, ref missing, ref missing, ref objTrue, ref str, ref replace, ref missing, ref missing, ref missing, ref missing);
    while (result)
    {
        // code to store range text
        // use duplicate.Text property
        result = find.Execute(ref str, ref missing, ref missing, ref missing, ref missing, ref missing, ref missing, ref missing, ref objTrue, ref str, ref replace, ref missing, ref missing, ref missing, ref missing);
    }
}
finally
{
    if (find != null) Marshal.ReleaseComObject(find);
    if (duplicate != null) Marshal.ReleaseComObject(duplicate);
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-22T10:44:26.483

我从 Oliver 的逻辑开始，事情似乎很好，但测试表明这种方法没有考虑空格。因此，仅由空格分隔的突出显示的短语并没有分开。我使用了 grahamj42 提供的 VB 代码方法，并将其添加为类库，并将引用包含在我的 C# windows 窗体项目中。

我的 C# Windows 窗体项目：

```
using Word = Microsoft.Office.Interop.Word; 
```

然后我将`try`块更改为：

```
Word.ApplicationClass wordObject = new Word.ApplicationClass();
wordObject.Visible = false;
object file = "D:\\mywordfile.docx";
object nullobject = System.Reflection.Missing.Value;
Word.Document thisDoc = wordObject.Documents.Open(ref file, ref nullobject, ref nullobject, ref nullobject, ref nullobject, ref nullobject, ref nullobject, ref nullobject, ref nullobject, ref nullobject, ref nullobject, ref nullobject, ref nullobject, ref nullobject, ref nullobject, ref nullobject);

List<string> wordHighlights = new List<string>();

// Let myRange be some Range, which has been already selected programatically here

WordMacroClasses.Highlighting macroObj = new WordMacroClasses.Highlighting();
List<string> hiWords = macroObj.HighlightRange(myRange, myRange.End);
foreach (string hitext in hiWords)
{
    wordHighlights.Add(hitext);
} 
```

这是`Range.Find`VB 类库中的代码，它简单地接受`Range`and 它`Range.Last`并返回 a `List(Of String)`：

```
Public Class Highlighting
    Public Function HighlightRange(ByVal myRange As Microsoft.Office.Interop.Word.Range, ByVal rangeLimit As Integer) As List(Of String)

        Dim Highlights As New List(Of String)
        Dim i As Integer
        i = 0

        With myRange.Find
            .Highlight = True
            Do While .Execute = True     ' loop while highlighted text is found

                If (myRange.Start < rangeLimit) Then Highlights.Add(myRange.Text)

            Loop
        End With
        Return Highlights
    End Function
End Class 
```

# css - 检测到 Sass 更改，但 style.css 仅在我保存的第 5 到第 7 次被覆盖

> ID：15524188
> 
> 赞同：6
> 
> 时间：2013-03-20T12:56:52.140
> 
> 标签：css, ruby, sass

我在 Windows 7 64 位机器上使用 Sass 和 Ruby（最新版本），并且正在处理我的家庭服务器上的共享文件夹。（但是，我不得不承认问题本身也发生在服务器上，因为我试图`-watch`直接在服务器上安装 Ruby 和文件）。

问题如下：如果我第一次保存，会检测到更改并`style.css`直接覆盖我的。在那之后，我总是需要保存多达 7 次才能被`style.css`覆盖。每次都检测到更改，但没有编译任何内容。这是一个屏幕：

```
>>> Sass is watching for changes. Press Ctrl-C to stop.
overwrite style.css
>>> Change detected to: E:/Websites/xxx/wp-content/themes/xxx/sass/default-styles.sass
>>> Change detected to: E:/Websites/xxx/wp-content/themes/xxx/sass/default-styles.sass
>>> Change detected to: E:/Websites/xxx/wp-content/themes/xxx/sass/default-styles.sass
>>> Change detected to: E:/Websites/xxx/wp-content/themes/xxx/sass/default-styles.sass
>>> Change detected to: E:/Websites/xxx/wp-content/themes/xxx/sass/default-styles.sass
>>> Change detected to: E:/Websites/xxx/wp-content/themes/xxx/sass/default-styles.sass
>>> Change detected to: E:/Websites/xxx/wp-content/themes/xxx/sass/default-styles.sass
overwrite style.css 
```

这是我的一瞥`base.sass`，它导入了所有的部分：

```
// Core variables and mixins
@import variables

// Default HTML Formatting
@import default-styles

// Grid
@import grid

// Header and Menus
@import header

// Blog
@import blog 
```

有人在 Windows 上遇到过类似的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-05T02:26:00.900

这个问题在评论中得到了回答。该问题是由服务器-客户端时间差异引起的，因此服务器在时间戳超过时间差异之前不会启动更新。

我发布此答案，以便将问题正确标记为已回答。

# html - 强制图像在表格单元格中溢出

> ID：15524191
> 
> 赞同：3
> 
> 时间：2013-03-20T12:56:59.343
> 
> 标签：html, css

如何在不扩展单元格的情况下强制图像在表格单元格中溢出？

# 编辑：

抱歉，我会提供更多信息。这是表格：

```
<table class="content">
    <col width="200px" />
    <col width="560px" />
    <col width="200px" />
    <tr>
        <td colspan="3" class="logo"></td>
    </tr>
</table> 
```

CSS：

```
.logo
{
    height: 120px;
    background: url('img/wallpaper.png') center;
} 
```

我以为会有一个简单的解决方案...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T13:24:37.450

如果您使用`<img>`标签而不是背景图像，则可以使用以下命令将其从文档流中删除`position: absolute;`

**html**

```
<td class="logo">
    <img src="img/wallpaper.png">
</td> 
```

**css**

```
.logo img {
    position: absolute;
} 
```

这将使图像溢出单元格，但会产生您需要处理的其他副作用。相应地更新顶部或底部以保持图像到位。

**调整后的 css**

```
.logo img {
    position: absolute;
    top: 15px;
} 
```

查看[http://jsfiddle.net/QMNRp/1/](http://jsfiddle.net/QMNRp/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T13:13:48.477

你要求一个元素`background`逃到前台。这是不可能的。元素的背景只能与元素本身一样大。

要使`.logo`图像与包含单元格的尺寸相同，您可以使用[`background-size`property](http://www.w3.org/TR/css3-background/#the-background-size)，但这在旧浏览器中[不受支持。](http://caniuse.com/#search=background-size)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-20T13:04:03.900

将静态宽度设置为 td ，并为表格中的文本设置`overflow`为`visible`和`text-wrap:nowrap;`或`word-break``keep all`

```
td{
width:100px;
max-width:100px;
overflow:visible
text-wrap:nowrap;  //for text
word-break:keep-all;  // for text
} 
```

# c# - 如何使用 c# 将文本从一个 Word 文档复制到另一个 Word 文档

> ID：15524194
> 
> 赞同：2
> 
> 时间：2013-03-20T12:57:12.203
> 
> 标签：c#, ms-word, copy-paste

我想动态地将一个word文档复制到另一个word文档。这个过程可以在按钮点击中完成。文档（docs）包含文本，我想将其复制到文档（docs2）

```
public void ReadMsWord()
    {
        string filePath = null;
        OpenFileDialog file = new OpenFileDialog();
        file.Title = "Word File";
        file.InitialDirectory = "c:\\";
        file.RestoreDirectory = true;
        if (file.ShowDialog() == DialogResult.OK)
        {
            filePath = file.FileName.ToString();
        }
        try
        {
            //Microsoft.Office.Interop.Word.Application Oword = new Microsoft.Office.Interop.Word.Application();
            //Oword.Visible = true;
            var templatepath = filePath;
            var wordapp = new Microsoft.Office.Interop.Word.Application();
            var orgnldoc = wordapp.Documents.Open(templatepath);
            orgnldoc.ActiveWindow.Selection.WholeStory();
            orgnldoc.ActiveWindow.Selection.Copy();
            var newdcmnt=new Microsoft.Office.Interop.Word.Document();
            newdcmnt.ActiveWindow.Selection.Paste();
            newdcmnt.SaveAs(@"C:\Users\Documents\TestDoc2.docx");
            System.Runtime.InteropServices.Marshal.ReleaseComObject(wordapp);
            System.Runtime.InteropServices.Marshal.ReleaseComObject(orgnldoc);
            System.Runtime.InteropServices.Marshal.ReleaseComObject(newdcmnt);
            GC.Collect();
        }
        catch (Exception ex) { MessageBox.Show(ex.ToString()); }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T15:05:21.863

这是我测试过的东西 确保在你到达之前不要停止调试器`Marshal.Release code and GC.Collect`

我有 Office 2010，但在您的使用部分添加以下内容

```
using Word = Microsoft.Office.Interop.Word;
using System.Runtime.InteropServices; 
```

这就是你实施的方式`namespace Aliasing`

这是下面的代码

```
var fileName = "TestDoc.docx";
Object oMissing = System.Reflection.Missing.Value;
var oTemplatePath = @"C:\Documents\wrkDocuments\" + fileName;
var wordApp = new Word.Application();
var originalDoc = wordApp.Documents.Open(@oTemplatePath);

originalDoc.ActiveWindow.Selection.WholeStory();
originalDoc.ActiveWindow.Selection.Copy();

var newDocument = new Word.Document();
newDocument.ActiveWindow.Selection.Paste();
newDocument.SaveAs(@"C:\Users\Documents\wrkDocuments\TestDoc2.docx");
System.Runtime.InteropServices.Marshal.ReleaseComObject(wordApp);
System.Runtime.InteropServices.Marshal.ReleaseComObject(originalDoc);
System.Runtime.InteropServices.Marshal.ReleaseComObject(newDocument);
GC.Collect(); 
```

更改我为您创建的此方法并传入正确的参数

```
private static void CopyWordDoc()
{
    var fileName = "TestDoc.docx";
    Object oMissing = System.Reflection.Missing.Value;
    var oTemplatePath = @"C:\Documents\wrkDocuments\" + fileName;
    var wordApp = new Word.Application();
    var originalDoc = wordApp.Documents.Open(@oTemplatePath);
    // you can do the line above by passing ReadOnly=False like this as well
    //var originalDoc = wordApp.Documents.Open(@oTemplatePath, oMissing, false);
    originalDoc.ActiveWindow.Selection.WholeStory();
    originalDoc.ActiveWindow.Selection.Copy();

    var newDocument = new Word.Document();
    newDocument.ActiveWindow.Selection.Paste();
    newDocument.SaveAs(@"C:\Documents\wrkDocuments\TestDoc2.docx");
    System.Runtime.InteropServices.Marshal.ReleaseComObject(wordApp);
    System.Runtime.InteropServices.Marshal.ReleaseComObject(originalDoc);
    System.Runtime.InteropServices.Marshal.ReleaseComObject(newDocument);
    GC.Collect();
} 
```

# wordpress - 带有分页的 Wordpress 自定义帖子页面

> ID：15524195
> 
> 赞同：2
> 
> 时间：2013-03-20T12:57:16.267
> 
> 标签：wordpress, pagination

我有称为客户端的自定义帖子类型，需要在每页显示 5 个客户端并进行分页。我拥有的页面是 page-clients.php

我使用了 wp_pagenavi 插件。

我得到了一个完美的导航列表 1,2,3 等，但是点击它们后我会进入找不到页面

我的代码

```
$args = array(
  'posts_per_page' => 5,
  'post_type' => 'clients',
  'paged' => get_query_var('page')

);

query_posts($args); 

<?php while ( have_posts() ) : the_post(); ?>
.....
<?php endwhile; // end of the loop. ?>

<?php wp_pagenavi(); ?> 
<?php wp_reset_query();?> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-20T13:38:58.397

这是你可以在没有分页插件的情况下做到这一点的方法:) 使用`WP_QUERY`而不是`query_posts`

```
$paged = get_query_var( 'paged' ) ? get_query_var( 'paged' ) : 1; // setup pagination

    $the_query = new WP_Query( array( 
        'post_type' => 'clients',
        'paged' => $paged,
        'posts_per_page' => 5) 
    );

    while ( $the_query->have_posts() ) : $the_query->the_post();
        echo '<div>' . get_the_title() . '</div>';
              the_content();
    endwhile;

    echo '<nav>';
    echo  '<div>'.get_next_posts_link('Older', $the_query->max_num_pages).'</div>'; //Older Link using max_num_pages
    echo  '<div>'.get_previous_posts_link('Newer', $the_query->max_num_pages).'</div>'; //Newer Link using max_num_pages
    echo "</nav>";

    wp_reset_postdata(); // Rest Data 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-09-01T12:34:04.323

> **分页赞 : Prev 1 2 3 Next**

```
<?php 
$paged = (get_query_var('paged')) ? get_query_var('paged') : 1;

$data= new WP_Query(array(
    'post_type'=>’YOUR_POST_TYPE’, // your post type name
    'posts_per_page' => 5, // post per page
    'paged' => $paged,
));

if($data->have_posts()) :
    while($data->have_posts())  : $data->the_post();
            // Your code
    endwhile;

    $total_pages = $data->max_num_pages;

    if ($total_pages > 1){

        $current_page = max(1, get_query_var('paged'));

        echo paginate_links(array(
            'base' => get_pagenum_link(1) . '%_%',
            'format' => '/page/%#%',
            'current' => $current_page,
            'total' => $total_pages,
            'prev_text'    => __('« prev'),
            'next_text'    => __('next »'),
        ));
    }
    ?>    
<?php else :?>
<h3><?php _e('404 Error&#58; Not Found', ''); ?></h3>
<?php endif; ?>
<?php wp_reset_postdata();?> 
```

你能试试上面的代码吗？

# linux - 在第二个字段上加入未排序的文件

> ID：15524202
> 
> 赞同：1
> 
> 时间：2013-03-20T12:57:41.207
> 
> 标签：linux, bash, unix, join, awk

我只是厌倦了使用该`join`命令而没有得到想要的结果，并且它返回了一些错误。

还有一件事我已经阅读了与`join`命令相关的所有查询here和SuperUser，但未能成功。

我该如何使用`join`或`awk`？

```
file1.csv
autoid|Mycolumn
5|Odhav, Gujarat, 380010
7|Navrangpura, Gujarat, 380009
16|Kalupur, Gujarat, 380002
32|Naroda, Gujarat, 380025
62|Khamasa, Gujarat, 380001
73|Sola Road, Gujarat, 380063
74|Railwaypura, Gujarat, 380002
78|Meghaninagar, Gujarat, 380016
85|Thaltej, Gujarat, 380054

file2.csv
5|Odhav, Gujarat, 380010|22.406347|73.824345
7|Navrangpura, Gujarat, 380009|22.328403|73.881841
16|Kalupur, Gujarat, 380002|22.379901|73.814217
32|Naroda, Gujarat, 380025|22.417059|73.887806
38|Raikhad, Gujarat, 380001|22.491544|73.782878
39|Ashram Road, Gujarat, 380006|22.279248|73.846393
44|Raipur, Gujarat, 380002|22.346186|73.87462
56|Jamalpur, Gujarat, 380022|22.518504|73.785024
58|Patharkuva, Gujarat, 380001|22.308473|73.825071
62|Khamasa, Gujarat, 380001|22.100711|73.707207
73|Sola Road, Gujarat, 380063|22.026236|73.732926
74|Railwaypura, Gujarat, 380002|21.992994|73.86893
78|Meghaninagar, Gujarat, 380016|21.955106|73.878629
85|Thaltej, Gujarat, 380054|21.989253|73.735725 
```

我正在使用此命令，但无法获得所需的结果：

```
$ join -t'|' -1 2 -2 2 <(sort -k2 Areaprob.csv) <(sort -k2 Com_remoteArea.csv)>output.csv 
```

它返回这样的东西；如您所见，我已经在使用上面给出的`sort`命令`join`。

```
join: file 1 is not in sorted order
join: file 2 is not in sorted order 
```

我`output.csv`看起来像这样 - 它不会返回所有 9 条记录`file1.csv`

```
Mycolumn|autoid|autoid|Gis_lat|Gis_long
Khamasa, Gujarat, 380001|62|62|22.100711|73.707207
Railwaypura, Gujarat, 380002|74|74|21.992994|73.86893
Thaltej, Gujarat, 380054|85|85|21.989253|73.735725
Sola Road, Gujarat, 380063|73|73|22.026236|73.732926 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T13:17:37.793

你忘了告诉`sort`分隔符。尝试`sort -t'|' -k2`：

```
$ join -t'|' -j2 <(sort -t'|' -k2 file1) <(sort -t'|' -k2 file2)
Kalupur, Gujarat, 380002|16|16|22.379901|73.814217
Khamasa, Gujarat, 380001|62|62|22.100711|73.707207
Meghaninagar, Gujarat, 380016|78|78|21.955106|73.878629
Naroda, Gujarat, 380025|32|32|22.417059|73.887806
Navrangpura, Gujarat, 380009|7|7|22.328403|73.881841
Odhav, Gujarat, 380010|5|5|22.406347|73.824345
Railwaypura, Gujarat, 380002|74|74|21.992994|73.86893
Sola Road, Gujarat, 380063|73|73|22.026236|73.732926
Thaltej, Gujarat, 380054|85|85|21.989253|73.735725 
```

注意：您可以`-j2`在加入两个文件中的字段 2 时使用。

* * *

**编辑：**

`awk`如果要保留标题，您将需要：

```
awk -F'|' 'NR==1;FNR==NR{a[$2];next}$2 in a{print $2,$3,$4}' OFS='|' file1 file2
autoid|Mycolumn
Odhav, Gujarat, 380010|22.406347|73.824345
Navrangpura, Gujarat, 380009|22.328403|73.881841
Kalupur, Gujarat, 380002|22.379901|73.814217
Naroda, Gujarat, 380025|22.417059|73.887806
Khamasa, Gujarat, 380001|22.100711|73.707207
Sola Road, Gujarat, 380063|22.026236|73.732926
Railwaypura, Gujarat, 380002|21.992994|73.86893
Meghaninagar, Gujarat, 380016|21.955106|73.878629
Thaltej, Gujarat, 380054|21.989253|73.735725 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T13:06:07.833

这有帮助吗？

```
awk -F'|' -vOFS="|" 'NR==FNR{a[$0];next} $1FS$2 in a{print $2,$3,$4}' file1 file2 
```

或者

```
 awk -F'|' -vOFS="|" 'NR==FNR{a[$1];next} $1 in a{print $2,$3,$4}' file1 file2 
```

上面的两个 awk oneliner 根据您当前的示例输入给出了相同的输出。（无标题）：

```
Odhav, Gujarat, 380010|22.406347|73.824345
Navrangpura, Gujarat, 380009|22.328403|73.881841
Kalupur, Gujarat, 380002|22.379901|73.814217
Naroda, Gujarat, 380025|22.417059|73.887806
Khamasa, Gujarat, 380001|22.100711|73.707207
Sola Road, Gujarat, 380063|22.026236|73.732926
Railwaypura, Gujarat, 380002|21.992994|73.86893
Meghaninagar, Gujarat, 380016|21.955106|73.878629
Thaltej, Gujarat, 380054|21.989253|73.735725 
```

标题为固定文字，可自行添加。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T13:16:43.887

您还需要使用分隔符`sort`。以下应该工作：

```
join -t'|' -1 2 -2 2 <(sort -t '|' -k2 Areaprob.csv) <(sort -t'|' -k2 Com_remoteArea.csv) > output.csv 
```

您的排序命令从第二列开始对文件进行排序，而不是在“|”之后开始 .

# regex - 如何确保正则表达式匹配模式的一次出现

> ID：15524203
> 
> 赞同：3
> 
> 时间：2013-03-20T12:57:42.173
> 
> 标签：regex, xpages

这是我的正则表达式：

```
var re = /[a-zA-Z]{6}[0-9]{4}$/;
if (storageTrayId == "") {
return false;
} else if(!re.test(storageTrayId)) {
alert('Storage Tray ID must be in the format \n ssstttnnnn (where sss is an alphabetic identifier for the Bulk File Center, ttt is an alphabetic identifer for the bundle type stored, and nnnn is the sequence number)');
 return false;
}; 
```

如果我输入格式正确的值（例如 BALTEL0001）和不正确的值（例如 BT001 或 BALTEL0001BT0001），它将正确匹配。但是，如果我输入 BALTEL0001BALTEL0002，它也匹配。只有当值是模式的一次出现时，我才需要它匹配。我敢肯定这很简单，但我还没有碰上它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T12:59:08.443

here have a test : `var re = /^[a-zA-Z]{6}[0-9]{4}$/;`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T13:00:18.687

您只需要添加起始锚点。您更新的正则表达式看起来像这样。

```
/^[a-zA-Z]{6}[0-9]{4}$/ 
```

# c# - 使用自定义提供者实体框架的 Asp.net 身份验证

> ID：15524206
> 
> 赞同：0
> 
> 时间：2013-03-20T12:57:43.467
> 
> 标签：c#, asp.net

我想创建小型网络应用程序。我已经阅读了一些关于如何创建自定义会员提供程序的文章，但我并不清楚。我可以创建自定义数据库，将此数据库与实体框架映射，还是必须使用 aspnetsql_tool.exe（不完全是）？数据库有用户表，并且与其他表有关系。那么你会向我推荐什么？在自定义提供程序中使用 EF 是一种好方法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T13:11:59.600

您的自定义成员资格提供程序可以使用您想要的任何机制和数据库结构，因此实体框架在这里与任何其他 ORM 框架一样合适。如果您选择`aspnet_regsql.exe`，您将获得数据库结构设置，但您将无法轻松更改此结构。使用 EF 映射此数据库不是一个好主意，因为它可能会在 ASP.NET 的未来版本中更改。

所以我想说，您要么选择由自定义创建的默认成员数据库结构，`aspnet_regsql.exe`要么使用您现有的表并自己实施自定义提供程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T13:09:15.397

您可以创建自定义数据库并将其与 EF 映射。您不需要使用生成数据库表的工具。

完成此演练：[自定义成员资格提供程序](http://msdn.microsoft.com/en-us/library/6tc47t75.aspx)

您需要删除 ODBC 代码并将 EF 代码放在那里，这应该可以解决大部分问题。

* * *

你应该注意观察你的上下文返回的数据，如果它是一个全局上下文，你最终可能会得到过期的数据。

[EF 上下文实例化](http://blogs.msdn.com/b/miah/archive/2009/05/11/tip-entity-framework-unity-and-the-asp-net-roleprovider-read-the-msdn-fine-print.aspx)（刚刚检查了链接，似乎不再起作用，但我会将它留在这里以防它再次出现）

* * *

一些帮助我的链接：

[http://dotnetunplugged.com/2011/04/05/openfaq-part-3-custom-membership-provider-in-entity-framework-code-first/](http://dotnetunplugged.com/2011/04/05/openfaq-part-3-custom-membership-provider-in-entity-framework-code-first/)

* * *

您可能还会发现这很有用：

[http://efmembership.codeplex.com/](http://efmembership.codeplex.com/)

[https://github.com/OmidID/Ado.net-Entity-Framework-Membership-Provider](https://github.com/OmidID/Ado.net-Entity-Framework-Membership-Provider)

# widget - Disqus 小部件选项卡不见了

> ID：15524216
> 
> 赞同：0
> 
> 时间：2013-03-20T12:57:58.140
> 
> 标签：widget, disqus

在任何地方都找不到有关它的信息。许多教程在 disqus 帐户上显示了一个简单的小部件设置，但我的帐户似乎缺少工具部分的小部件选项卡。有任何想法吗？是否有更新或最近删除它的东西？你知道吗？

# php - 如何查找 cron 作业中的 cron 超时或错误？

> ID：15524220
> 
> 赞同：1
> 
> 时间：2013-03-20T12:58:03.783
> 
> 标签：php, cron

我从远程服务器获取一些数据并将其输入我的站点数据库。它有 900k 的记录（应用程序），但记录的插入仅停止了 60,180 条记录。我们使用`mailto` 和异常处理程序来查找错误但没有响应。

谁能提供有关如何获得 cron 超时的建议，或者我们的代码是否有错误？

```
<?php
set_time_limit(0);
ignore_user_abort();
try
{
  $ch = curl_init();
  // set URL and other appropriate options
  curl_setopt($ch, CURLOPT_URL, "http://ks329xxx.com/cronRU/update");
  curl_setopt($ch, CURLOPT_HEADER, 0);
  // grab URL and pass it to the browser
  curl_exec($ch);

  // close cURL resource, and free up system resources
  curl_close($ch);
}
catch (Exception $e) 
{
  echo 'Caught exception: ',  $e->getMessage(), "\n";
  mail('varunxxxx@xxxxx.com', 'update', $message);  
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T13:06:35.397

您没有检查以下结果`curl_exec()`：

```
if (curl_exec($ch) === false) {
    throw new Exception(curl_error($ch));
} 
```

# android - 如何在 Android 中更改 textview 元素的字体大小？

> ID：15524221
> 
> 赞同：10
> 
> 时间：2013-03-20T12:58:04.760
> 
> 标签：android, android-layout, textview

我正在尝试在 TextView 中显示 2 个项目。他们有什么方法可以更改 TextView 中单个项目的字体吗？

这是我正在使用的 XML

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        android:gravity="center_horizontal"
        android:paddingTop="5dp"
        android:paddingBottom="5dp"
        android:id="@+id/Rowtext"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:text="Listiems"
        android:background="@drawable/customshape"
         />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2014-07-12T18:59:05.270

使用 android:textSize。

```
<TextView
    android:id="@+id/time"
    android:gravity="right"
    android:padding="5dp"
    android:textSize="40dp"
    android:textColor="#88ffff00"
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:text="Time: 60"/> 
```

如果用户可以在不破坏 UI 的情况下重新缩放文本，请使用 sp。如果重新缩放文本会破坏 UI，请使用 dp.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-20T13:04:00.540

一种方法是使用 TextView.setText() 方法并用 HTML 提供它，如下所示：

```
import android.text.Html;

String n = "<b>bold</b> <small>small</small>";
TextView tv = (TextView) findViewById(...)
tv.setText(Html.fromHtml(n)); 
```

我经常将它用于一些小的标记（比如使部分更粗或更小）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-08T12:34:49.363

使用此链接[http://code.google.com/p/android-richtexteditor/source/browse/trunk/src/net/sgoliver/Html.java?r=4](http://code.google.com/p/android-richtexteditor/source/browse/trunk/src/net/sgoliver/Html.java?r=4)中的 HTML 类。我们可以从这个类中设置字体大小。普通的 android.text.Html 实际上会忽略字体大小。尝试和测试，它对我有用。

```
TextView tv = (TextView)findViewById(R.id.textview);

String s = "<p>Some Text here<br><b>hi </b><font size =\"20\"><b><i>\"italics</i></b></font><b><i> </i></b><b><i><u>underline</u></i></b></p>";

tv.setText(Html.fromHtml(s)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T13:10:31.703

您可以像这样使用 html：

```
mytextView.setText(Html.fromHtml("<p> <font size="20" color="#0066FF" style="font-style:italic">Push this button</font> to start a new game.</p>")) 
```

如果您不需要它们，请删除颜色和样式属性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-07-24T12:32:49.037

您应该在 XML 中的文本视图标记中添加行：

```
android:textSize="32sp" 
```

# python - 如何在python中绘制RGB图像的3D直方图

> ID：15524233
> 
> 赞同：-1
> 
> 时间：2013-03-20T12:58:37.633
> 
> 标签：python, matplotlib, histogram

我想绘制我的 RGB 图像的 3D 直方图。下面是我的代码：

```
from mpl_toolkits.mplot3d import Axes3D
import matplotlib.pyplot as plt
import numpy as np
from scipy.misc import imread
import pylab

fig = plt.figure()
ax = fig.add_subplot(111, projection='3d')
img1 = imread('image.jpg')
img_reshaped = img1.reshape(img1.shape[0] * img1.shape[1], img1.shape[2])

hist, edges = np.histogramdd(img_reshaped, bins=(100, 100, 100)) 
```

请告诉我如何绘制`hist`我获得的直方图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T13:12:30.843

您是否看过 matplotlib 库中的 3d 直方图示例？

见： http: [//matplotlib.org/examples/mplot3d/hist3d_demo.html](http://matplotlib.org/examples/mplot3d/hist3d_demo.html)

# php - tag inside a

```
 tag
```

[问问题](https://stackoverflow.com/questions/ask)问问题 2013-03-20T12:58:43.643760 次This question shows research effort; it is useful and clear0This question does not show any research effort; it is unclear or not usefulBookmark this question.Show activity on this post.

I'm wondering how to do this. I have this code:

```
// Text
function login_styles() { 
 echo '<style type="text/css">h1 a { background:url('. get_bloginfo("template_directory") .'/images/din_logo.png) no-repeat center top; }</style>'; 
} 
add_action('login_head', 'login_styles'); 
```

This is a function for WordPress theme that should be inside "functions.php". But when i want to insert it to a post to share it on my blog it wont show this: style type="text/css etc. The whole code inside the style tag isn't shown.

To show the code i'm using pre tag inside the post. It seems to be that tags within a tag wont be shown? Why are this happening?

[php](/tags/php "show questions tagged 'php'")[html](/tags/html "show questions tagged 'html'")[wordpress](/tags/wordpress "show questions tagged 'wordpress'")[styles](/tags/styles "show questions tagged 'styles'")[pre](/tags/pre "show questions tagged 'pre'")4

## 2 回答 2

This answer is useful0

```
echo htmlentities(..style tag as string goes here..); 
```

于 2013-03-20T13:04:34.733 回答This answer is useful0

`<pre>`不会阻止标签成为标签。这只是意味着空白字符（空格、换行符等）不会被折叠成一个空格。

您需要使用实体或字符引用将`<`（和其他一些字符）表示为*数据*而不是标记。

该`htmlspecialchars`函数会将 HTML 中具有特殊含义的字符（例如`<`“标记开始”）转换为将这些字符表示为数据的实体（例如`&lt;`“小于字符”）。

```
<pre><?php echo htmlspecialchars('<style> etc etc </style>'); ?></pre> 
```

这将给出：

```
<pre>&lt;style&gt; etc etc &lt;/style&gt;</pre> 
```

这将**呈现**为：

```
<style> etc etc </style> 
```

于 2013-03-20T13:04:49.400 回答

#### Related

[0](/questions/18354894 "Question score (upvotes - downvotes)")[.net - 使用 WSE 2.0 连接到 ERCOT Web 服务](/questions/18354894)[0](/questions/18354896 "Question score (upvotes - downvotes)")[java - 如何为 Heroku 中的 playframework 应用程序部署创建 Procfile？](/questions/18354896)[3](/questions/18354897 "Question score (upvotes - downvotes)")[java - maven运行junit测试](/questions/18354897)[3](/questions/18354898 "Question score (upvotes - downvotes)")[html - CSS 边框解决方法](/questions/18354898)[1](/questions/18354899 "Question score (upvotes - downvotes)")[javascript - javascript 中超出了最大调用堆栈大小](/questions/18354899)[1](/questions/18354901 "Question score (upvotes - downvotes)")[android - 模仿 youtube/gmail 应用程序的导航抽屉](/questions/18354901)[1](/questions/18354903 "Question score (upvotes - downvotes)")[gcc - gcc 控制台输出颜色含义](/questions/18354903)[2](/questions/18354904 "Question score (upvotes - downvotes)")[sql - 将选择存储到变量中以供将来在过程中使用](/questions/18354904)[1](/questions/18354909 "Question score (upvotes - downvotes)")[c - 在其他文件上定义的结构的大小 (C)](/questions/18354909)[1](/questions/18354917 "Question score (upvotes - downvotes)")[asp.net-mvc - 将 MVC 母版页应用到 aspx 页面](/questions/18354917)

#### Reference

[php](https://php.github.net.cn) × 1429865[c/c++](https://c-cpp.com) × 756500[nginx](https://nginx.github.net.cn) × 49975[mongodb](https://mongodb.net.cn) × 159057[mybatis](https://mybatis.net.cn) × 3233[anaconda](https://anaconda.org.cn) × 13410[pycharm](https://pycharm.net.cn) × 14671[python](https://python.github.net.cn) × 1902243[vscode](https://vscode.github.net.cn) × 56040[docker](https://dockerdocs.cn) × 110988[github](https://github.net.cn) × 49000[flask](https://flask.github.net.cn) × 49129[ffmpeg](https://ffmpeg.github.net.cn) × 24037[jmeter](https://jmeter.net) × 16910[matplotlib](https://matplotlib.net) × 63493[bootstrap](https://getbootstrap.net) × 54641[](https://stackoverflow.com)

##### [Stack Overflow 中文网](https://stackoverflow.org.cn)

遵从 CC BY-SA 知识共享许可协议。

> ID：15524235
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

# excel - 如何获取 A 列中的唯一值和 B 列的总数？

> ID：15524239
> 
> 赞同：1
> 
> 时间：2013-03-20T12:59:06.733
> 
> 标签：excel, excel-formula

我有一个如下所示的电子表格：

```
A            B
DeptA        10
DeptB        5
DeptA        5
DeptA        10
DeptC        5
DeptB        10
DeptA        20
DeptB        5 
```

我正在尝试获取 A 中唯一值的列表，然后是 B 中每个唯一值的总数。我正在寻找的输出是这个，它可以在 C/D 列中（或任何地方，没关系）

```
DeptA        45
DeptB        20
DeptC        5 
```

我知道我可以使用以下数组公式提取 A 中的唯一值并将它们放在 C 中：

```
=INDEX($A$2:$A$8, MATCH(0, COUNTIF($C$1:C1, $A$2:$A$8), 0)) 
```

如何列出 B 列的总计？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T14:09:24.707

您可能希望使用[DSUM](http://office.microsoft.com/en-gb/excel-help/dsum-function-HP010342460.aspx?CTT=1)函数，因为它的工作量比旋转要少。

编辑：更正的网址

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T02:41:33.517

不需要公式。

例如，可以使用 Data > Sort & Filter – Advanced 获得唯一性（避免 COUNTIF、INDEX 和 MATCH），选择复制到另一个位置，仅检查唯一记录并复制到：设置为`C1`（尽管我的版本有点喜怒无常，并且在present 还需要删除 C1 和排序）。

但是通过排序（选择 A:B，数据 > 排序和筛选 – AZ）然后可以使用小计（插入一个新行作为第 1 行，选择`A:B`数据 > 大纲 – 小计，确定，确定 [可能需要默认值：每次更改时在：（A 列），使用函数：Sum，将小计添加到：（B 列），替换当前小计，汇总数据] 然后单击左上角的小“2”。

总计是奖金。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T13:50:53.723

您可以保留当前的构造，并根据 C 列对 B 列求和，在 D 列中执行`sumif`或（它们具有不同的参数顺序）。`sumifs`

或者，您可以使用数据透视表为您获取完整的结果。但是请注意，数据透视需要手动刷新，当计算设置为自动时，公式将自动更新

# ios - 横向模式下的 Simperium 登录

> ID：15524243
> 
> 赞同：0
> 
> 时间：2013-03-20T12:59:12.157
> 
> 标签：ios, ipad, simperium

在 iPhone 和 iPad 上，我成功添加了图标（项目应包含方形图像 icon.png 和 logo.png），并更正了 LoginView.xib 和 LoginView-iPad.xib，因此图标显示在屏幕顶部。但我发现在 iPad 上的横向模式下，不仅图标，而且登录/psw 字段都被放置在屏幕之外。我如何更改xib以获得授权？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-27T21:54:18.453

认证用的xib可以完全自定义，而且由于源代码是开源的，所以也可以修改。话虽如此，应该内置横向支持。您可以[在 GitHub 上跟踪此问题](https://github.com/Simperium/simperium-ios/issues/53)。

# python - 管道输出到 Python 文件

> ID：15524250
> 
> 赞同：2
> 
> 时间：2013-03-20T12:59:27.510
> 
> 标签：python

如何让 python 脚本获取已通过管道传输给它的输入。是不是`sys.argv`一瞬间。为了清楚起见，我想弄清楚如何编写 python 端来接收这样的输入：

```
cat someFile | domeSomething.py 
```

这可以做到吗？再次澄清一下，我不想把它写成将文件名传递给我的脚本，然后使用`open(filename)`我想获得管道输入。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T13:00:35.940

要获得管道输入，您需要阅读`stdin`：

```
import sys
print sys.stdin.read() 
```

`stdin`是一个文件，所以可以随意使用[文件对象的任何方法](http://docs.python.org/2/library/stdtypes.html#file-objects)。

# assembly - 需要关于汇编程序的解决方案：输出和整数最大数量输出

> ID：15524254
> 
> 赞同：0
> 
> 时间：2013-03-20T12:59:29.473
> 
> 标签：assembly, integer, output, factorial

我正在编写汇编程序计数阶乘。我有两个问题。

1.  为什么最大输出数可以达到 255？我该如何解决？

2.  我怎样才能自动输出到控制台，而不是写“echo $？”。

这是代码：

```
SYSCALL = 0X80
STDIN = 0
STDOUT = 1
SYSREAD = 3
SYSWRITE = 4
SYSEXIT = 1

.section .data

NUMBER = 5

.section .text
.globl _start

_start:

pushl $NUMBER
call factorial
addl $4, %esp
movl %eax, %ebx

mov $SYSEXIT, %eax
int $SYSCALL

.type factorial, @function

factorial:

pushl %ebp
movl %esp, %ebp
movl 8(%ebp), %eax
cmpl $1, %eax
jle end_factorial

decl %eax
pushl %eax
call silnia
movl 8(%ebp), %ebx
imull %ebx, %eax

end_factorial:
movl %ebp, %esp
popl %ebp
ret 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T13:22:58.347

您通过以下方式写入 STDOUT：

```
movl    4, %eax          ;sys_write
movl    1, ebx           ;stdout
movl    $buffer, %ecx     ;pointer to buffer to write
mov     10, %edx         ;length of buffer to write
int     0x80 
```

最大退出代码范围是 0 到 255、255 == 11111111b。（8 位，1 字节，EAX 寄存器的 AL 部分）

您必须将 EBX 中的二进制数转换为 ASCII 字符串（ASCII 字符将进入“缓冲区”内，该缓冲区将被定义为 10 字节的数据，为简单起见初始化为 0x20（ASCII 空间）。

# android - 具有适用于手机和平板电脑 Android 的通用代码

> ID：15524266
> 
> 赞同：1
> 
> 时间：2013-03-20T12:59:45.140
> 
> 标签：android, common-code

对于我们的项目，我们支持手机上的 android 2.3 及以后的平板电脑 3.0。我希望两者都有共同的代码库和 UI。但是发现从3.0开始。支持片段、加载器等某些类，而在此版本以下则不支持。因此，这将是保持代码通用（或最大化通用代码）的最佳实践。

提前致谢。

# java - 命名类的 NoUniqueBeanDefinitionException

> ID：15524268
> 
> 赞同：1
> 
> 时间：2013-03-20T12:59:48.290
> 
> 标签：java, spring, annotations

我正在使用 Spring 3.2.2 并且想知道是否有一种方法可以按类类型注入 bean 而无需显式地给它们一个字符串名称。前任：

```
@Named
public MyClass{
}

@Named
public MyOtherClass extends MyClass{
}

@Named
public class Foo{
    public void blah(){
       MyClass myClass = context.getBean(MyClass.class);
    }
} 
```

这将产生：

org.springframework.beans.factory.NoUniqueBeanDefinitionException：没有定义 [MyClass] 类型的合格 bean：预期单个匹配 bean，但找到 2：myClass，myOtherClass

有没有办法说“使用与类名完全匹配的”而不使用字符串名称？

换句话说，我不想这样做：

```
@Named("MyClass")...
@Named("MyOtherClass")...

MyClass myClass = context.getBean("MyClass"); 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T17:28:19.310

例如，您可以执行以下操作：

```
@Named
public class Foo{
    public void blah(){
       MyClass myClass = getBean(MyClass.class);
    }

    private <T> T getBean(Class<T> type) {
         return context.getBean(Introspector.decapitalize(type.getSimpleName()), type);
    }
} 
```

`@Inject`但这在使用or时不起作用`@Autowire`。

要在自动装配时强制进行严格的类匹配，您可以用 a替换默认值`AutowireCandidateResolver`，但这似乎不是一个好主意，因为或者可以解决 NUBDE 问题。`BeanFactory``BeanFactoryPostprocessor``@Resource``@Qualify`

例如：（未测试）

```
public class StrictClassAutowireCandidateResolver implements AutowireCandidateResolver {

    @Override
    public boolean isAutowireCandidate(BeanDefinitionHolder bdHolder, DependencyDescriptor descriptor) {
        if (!bdHolder.getBeanDefinition().isAutowireCandidate()) {
            return false;
        }

        if (descriptor == null) {
            return true;
        }

        String className = null;

        if (descriptor.getField() != null) {
            className = descriptor.getField().getType().getName();
        }

        else if (descriptor.getMethodParameter() != null) {
            className = descriptor.getMethodParameter().getParameterType().getName();
        }

        Class<?> clazz = null;
        try {
            clazz = Class.forName(className);
        }
        catch (Exception e) {
            return false;
        }

        if (clazz.isInterface() || Modifier.isAbstract(clazz.getModifiers())) {
                // have no chances to be strict, let BeanFactory to find implementations.
                return true;
            }

        return bdHolder.getBeanDefinition().getBeanClassName().equals(className);
    }

    @Override
    public Object getSuggestedValue(DependencyDescriptor descriptor) {
        return null;
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T13:34:27.223

每当您遇到非唯一依赖 bean 定义时，这就是[Spring 手册第 5.4.5 节的建议：](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/beans.html#beans-autowired-exceptions)

*   放弃自动装配以支持显式装配。
*   通过将其 autowire-candidate 属性设置为 false 来避免自动装配 bean 定义，如下一节所述。
*   通过将其元素的主要属性设置为 true，将单个 bean 定义指定为主要候选者。
*   如果您使用的是 Java 5 或更高版本，请使用基于注解的配置实现更细粒度的控制，如[第 5.9 节“基于注解的容器配置”中所述。](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/beans.html#beans-annotation-config)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T13:01:58.887

尝试在您的类上使用@Component（服务、存储库、控制器），并在注入 bean 时使用 @Autowired。

编辑：我的错，我没有很好地阅读这个问题。问题是您实际上有 2 个 MyClass 实例（因为 MyOtherClass 从 MyClass 扩展）。因此，除了给类名之外别无他法，否则您将始终以 NoUniqueBeanDefinitionExceptions 告终。

# android - 如何将列表视图放在片段中

> ID：15524275
> 
> 赞同：6
> 
> 时间：2013-03-20T13:00:07.590
> 
> 标签：android, listview, crash, fragment

如何将列表视图放入片段中？我使用带有固定选项卡的默认项目设置。

它似乎不起作用，我的应用程序崩溃了。

主要活动

```
import java.util.ArrayList;
import java.util.HashMap;
import java.util.Locale;

import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.NodeList;

import android.app.ActionBar;
import android.app.FragmentTransaction;
import android.app.ListActivity;
import android.app.ListFragment;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.os.StrictMode;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentPagerAdapter;
import android.support.v4.view.ViewPager;
import android.view.LayoutInflater;
import android.view.Menu;
import android.view.View;
import android.view.ViewGroup;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ListAdapter;
import android.widget.ListView;
import android.widget.SimpleAdapter;
import android.widget.Toast;

public class MainActivity extends FragmentActivity implements
        ActionBar.TabListener {
    /**
     * The {@link android.support.v4.view.PagerAdapter} that will provide
     * fragments for each of the sections. We use a
     * {@link android.support.v4.app.FragmentPagerAdapter} derivative, which
     * will keep every loaded fragment in memory. If this becomes too memory
     * intensive, it may be best to switch to a
     * {@link android.support.v4.app.FragmentStatePagerAdapter}.
     */

    /**
     * The {@link ViewPager} that will host the section contents.
     */
    ViewPager mViewPager;
    public final static String PREFS_NAME = "UserData";
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        //Only for safe mode 
        StrictMode.ThreadPolicy policy = new StrictMode.
        ThreadPolicy.Builder().permitAll().build();
        StrictMode.setThreadPolicy(policy);
        /***********************************USER***************************/
        //Get User info (if exist)
        SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);
        String id = settings.getString("id", "");
        String pass = settings.getString("pass", "");
        SectionsPagerAdapter mSectionsPagerAdapter;
        //Else create New User
        if (id == "")
        {
            System.out.println("Create New User...");
            UserRegistration.CreateUser(getApplicationContext());
        }
        /**** OTHER*****/
        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_main);
        // Set up the action bar.
        final ActionBar actionBar = getActionBar();
        actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
        // Create the adapter that will return a fragment for each of the three
        // primary sections of the app.
        mSectionsPagerAdapter = new SectionsPagerAdapter(
                getSupportFragmentManager());

        // Set up the ViewPager with the sections adapter.
        mViewPager = (ViewPager) findViewById(R.id.pager);
        mViewPager.setAdapter(mSectionsPagerAdapter);
        // When swiping between different sections, select the corresponding
        // tab. We can also use ActionBar.Tab#select() to do this if we have
        // a reference to the Tab.
        mViewPager
                .setOnPageChangeListener(new ViewPager.SimpleOnPageChangeListener() {
                    @Override
                    public void onPageSelected(int position) {
                        actionBar.setSelectedNavigationItem(position);
                    }
                });

        // For each of the sections in the app, add a tab to the action bar.
        for (int i = 0; i < mSectionsPagerAdapter.getCount(); i++) {
            // Create a tab with text corresponding to the page title defined by
            // the adapter. Also specify this Activity object, which implements
            // the TabListener interface, as the callback (listener) for when
            // this tab is selected.
            actionBar.addTab(actionBar.newTab()
                    .setText(mSectionsPagerAdapter.getPageTitle(i))
                    .setTabListener(this));
        }

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

    @Override
    public void onTabSelected(ActionBar.Tab tab,
            FragmentTransaction fragmentTransaction) {
        // When the given tab is selected, switch to the corresponding page in
        // the ViewPager.
        mViewPager.setCurrentItem(tab.getPosition());
    }

    @Override
    public void onTabUnselected(ActionBar.Tab tab,
            FragmentTransaction fragmentTransaction) {
    }

    @Override
    public void onTabReselected(ActionBar.Tab tab,
            FragmentTransaction fragmentTransaction) {
    }

    /**
     * A {@link FragmentPagerAdapter} that returns a fragment corresponding to
     * one of the sections/tabs/pages.
     */
    public class SectionsPagerAdapter extends FragmentPagerAdapter {

        public SectionsPagerAdapter(FragmentManager fm) {
            super(fm);
        }

        @Override
        public Fragment getItem(int position) {
            // getItem is called to instantiate the fragment for the given page.
            // Return a DummySectionFragment (defined as a static inner class
            // below) with the page number as its lone argument.
            Fragment fragment = new DummySectionFragment();
            Bundle args = new Bundle();
            args.putInt(DummySectionFragment.ARG_SECTION_NUMBER, position + 1);
            fragment.setArguments(args);
            return fragment;
        }

        @Override
        public int getCount() {
            // Show 5 total pages.
            return 5;
        }

        @Override
        public CharSequence getPageTitle(int position) {
            Locale l = Locale.getDefault();
            switch (position) {
            case 0:
                return getString(R.string.title_section1).toUpperCase(l);
            case 1:
                return getString(R.string.title_section2).toUpperCase(l);
            case 2:
                return getString(R.string.title_section3).toUpperCase(l);
            case 3:
                return getString(R.string.title_section4).toUpperCase(l);
            case 4:
                return getString(R.string.title_section5).toUpperCase(l);   
            }
            return null;
        }
    }

    /**
     * A dummy fragment representing a section of the app, but that simply
     * displays dummy text.
     */
    public static class DummySectionFragment extends Fragment {
        /**
         * The fragment argument representing the section number for this
         * fragment.
         */
        public static final String ARG_SECTION_NUMBER = "section_number";

        public DummySectionFragment() {
        }

        public View onCreateView(LayoutInflater inflater, ViewGroup container,
                Bundle savedInstanceState) {

            View rootView = inflater.inflate(R.layout.fragment_main_dummy, container, false);       
            /***********************************CONTEST INC**********************
            String xmlURL;
            ArrayList<HashMap<String, String>> mylist = new ArrayList<HashMap<String, String>>();
            xmlURL = URL;
            System.out.println("Case 1");
            Document doc = XMLfunctions.XMLfromString(XMLfunctions.getXML(xmlURL));
            NodeList nodes = doc.getElementsByTagName("contest");
            for (int i = 0; i < nodes.getLength(); i++) 
            {                           
                HashMap<String, String> map = new HashMap<String, String>();    

                Element e = (Element)nodes.item(i);
                map.put("id", XMLfunctions.getValue(e, "id"));
                map.put("name", XMLfunctions.getValue(e, "name"));
                map.put("subtitle",XMLfunctions.getValue(e, "subtitle"));
                mylist.add(map);
                System.out.println(mylist);
            }
            //new ArrayAdapter<String>(context, android.R.layout.simple_list_item_1, android.R.id.text1, actions);

            ListAdapter adapter = new SimpleAdapter(this.getActivity(), mylist , R.layout.contest_list, 
                    new String[] { "name", "subtitle" }, 
                    new int[] { R.id.item_title, R.id.item_subtitle });

            ListFragment.setListAdapter(adapter);

            final ListView lv = getApplication().getActivity().getListView();
            lv.setTextFilterEnabled(true);  
            lv.setOnItemClickListener(new OnItemClickListener() {
                public void onItemClick(AdapterView<?> parent, View view, int position, long id) {              
                    @SuppressWarnings("unchecked")
                    HashMap<String, String> o = (HashMap<String, String>) lv.getItemAtPosition(position);                   
                    Toast.makeText(this, "ID '" + o.get("id") + "' was clicked.", Toast.LENGTH_LONG).show(); 

                }
            });

            /*************************************END CONTEST*********************/
            ContestList.GetList(getActivity(), 1, "mm", "njk");

            //TextView dummyTextView = (TextView) rootView
                //  .findViewById(R.id.section_label);
            String sectionNumb = Integer.toString(getArguments().getInt(ARG_SECTION_NUMBER));
            int cat1;
            cat1 = Integer.parseInt(sectionNumb); 
            switch (cat1)
            {
            case 1:
                break;
            case 2:
                break;
            case 3:
                break;
            case 4:
                break;
            case 5:
                break;
            }   
            return rootView;
        }
    }
} 
```

竞赛列表类

```
import java.util.ArrayList;
import java.util.HashMap;

import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.NodeList;

import android.app.ListActivity;
import android.app.ListFragment;
import android.content.Context;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ListAdapter;
import android.widget.ListView;
import android.widget.SimpleAdapter;
import android.widget.Toast;

public class ContestList {
    public final static String PREFS_NAME = "UserData";

    public static String GetList(Context context, int type, String id, String pass)
    {

        String xmlURL;
        ArrayList<HashMap<String, String>> mylist = new ArrayList<HashMap<String, String>>();
        xmlURL = URL;
        System.out.println("Case 1");
        Document doc = XMLfunctions.XMLfromString(XMLfunctions.getXML(xmlURL));
        NodeList nodes = doc.getElementsByTagName("contest");
        for (int i = 0; i < nodes.getLength(); i++) 
        {                           
            HashMap<String, String> map = new HashMap<String, String>();    

            Element e = (Element)nodes.item(i);
            map.put("id", XMLfunctions.getValue(e, "id"));
            map.put("name", XMLfunctions.getValue(e, "name"));
            map.put("subtitle",XMLfunctions.getValue(e, "subtitle"));
            mylist.add(map);
            System.out.println(mylist);
        }
        //new ArrayAdapter<String>(context, android.R.layout.simple_list_item_1, android.R.id.text1, actions);

        ListAdapter adapter = new SimpleAdapter(context, mylist , R.layout.contest_list, 
                new String[] { "name", "subtitle" }, 
                new int[] { R.id.item_title, R.id.item_subtitle });

        ((ListActivity) context).setListAdapter(adapter);

        final ListView lv = ((ListActivity) context).getListView();
        lv.setTextFilterEnabled(true);  
        lv.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {              
                @SuppressWarnings("unchecked")
                HashMap<String, String> o = (HashMap<String, String>) lv.getItemAtPosition(position);                   
                //Toast.makeText(Main.this, "ID '" + o.get("id") + "' was clicked.", Toast.LENGTH_LONG).show(); 

            }
        });
        return "OK";
    }   
    public String adapter(ListAdapter adapter)
    {/*
        setListAdapter(adapter);

        final ListView lv = getApplication().getActivity().getListView();
        lv.setTextFilterEnabled(true);  
        lv.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {              
                @SuppressWarnings("unchecked")
                HashMap<String, String> o = (HashMap<String, String>) lv.getItemAtPosition(position);                   
                Toast.makeText(MainActivity.this, "ID '" + o.get("id") + "' was clicked.", Toast.LENGTH_LONG).show(); 

            }
        });*/
        return "OK";
    }
} 
```

活动主布局：

```
 <android.support.v4.view.ViewPager xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/pager"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" /> 
```

Fragment_main_dummy 布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent">    

<ListView
    android:id="@id/android:list"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:drawSelectorOnTop="false" />

<TextView
    android:id="@id/android:empty"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="No data"/>

<TextView  
android:id="@+id/item_title"
android:layout_width="fill_parent" 
android:layout_height="wrap_content" 
android:textAppearance="?android:attr/textAppearanceMedium"
android:padding="2dp"
android:textSize="20dp" />
<TextView  
android:id="@+id/item_subtitle"
android:layout_width="fill_parent" 
android:layout_height="wrap_content" 
android:padding="2dp"
android:textSize="13dp" /> 
```

有人知道为什么我的应用程序崩溃了吗？或者有替代方法将列表视图放在片段中？

谢谢

编辑：

错误日志

```
03-20 12:53:31.219: E/AndroidRuntime(3104): FATAL EXCEPTION: main
03-20 12:53:31.219: E/AndroidRuntime(3104): java.lang.ClassCastException: com.time2win.MainActivity cannot be cast to android.app.ListActivity
03-20 12:53:31.219: E/AndroidRuntime(3104):     at com.time2win.ContestList.GetList(ContestList.java:50)
03-20 12:53:31.219: E/AndroidRuntime(3104):     at com.time2win.MainActivity$DummySectionFragment.onCreateView(MainActivity.java:241)
03-20 12:53:31.219: E/AndroidRuntime(3104):     at android.support.v4.app.Fragment.performCreateView(Fragment.java:1460)
03-20 12:53:31.219: E/AndroidRuntime(3104):     at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:911)
03-20 12:53:31.219: E/AndroidRuntime(3104):     at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1088)
03-20 12:53:31.219: E/AndroidRuntime(3104):     at android.support.v4.app.BackStackRecord.run(BackStackRecord.java:682)
03-20 12:53:31.219: E/AndroidRuntime(3104):     at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1444)
03-20 12:53:31.219: E/AndroidRuntime(3104):     at android.support.v4.app.FragmentManagerImpl.executePendingTransactions(FragmentManager.java:461)
03-20 12:53:31.219: E/AndroidRuntime(3104):     at android.support.v4.app.FragmentPagerAdapter.finishUpdate(FragmentPagerAdapter.java:141)
03-20 12:53:31.219: E/AndroidRuntime(3104):     at android.support.v4.view.ViewPager.populate(ViewPager.java:1012)
03-20 12:53:31.219: E/AndroidRuntime(3104):     at android.support.v4.view.ViewPager.populate(ViewPager.java:881)
03-20 12:53:31.219: E/AndroidRuntime(3104):     at android.support.v4.view.ViewPager.onMeasure(ViewPager.java:1366)
03-20 12:53:31.219: E/AndroidRuntime(3104):     at android.view.View.measure(View.java:15513)
03-20 12:53:31.219: E/AndroidRuntime(3104):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4827)
03-20 12:53:31.219: E/AndroidRuntime(3104):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
03-20 12:53:31.219: E/AndroidRuntime(3104):     at android.view.View.measure(View.java:15513)
03-20 12:53:31.219: E/AndroidRuntime(3104):     at android.widget.LinearLayout.measureVertical(LinearLayout.java:847)
03-20 12:53:31.219: E/AndroidRuntime(3104):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:588)
03-20 12:53:31.219: E/AndroidRuntime(3104):     at android.view.View.measure(View.java:15513)
03-20 12:53:31.219: E/AndroidRuntime(3104):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4827)
03-20 12:53:31.219: E/AndroidRuntime(3104):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
03-20 12:53:31.219: E/AndroidRuntime(3104):     at com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:2176)
03-20 12:53:31.219: E/AndroidRuntime(3104):     at android.view.View.measure(View.java:15513)
03-20 12:53:31.219: E/AndroidRuntime(3104):     at android.view.ViewRootImpl.performMeasure(ViewRootImpl.java:1874)
03-20 12:53:31.219: E/AndroidRuntime(3104):     at android.view.ViewRootImpl.measureHierarchy(ViewRootImpl.java:1089)
03-20 12:53:31.219: E/AndroidRuntime(3104):     at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1265)
03-20 12:53:31.219: E/AndroidRuntime(3104):     at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:989)
03-20 12:53:31.219: E/AndroidRuntime(3104):     at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4351)
03-20 12:53:31.219: E/AndroidRuntime(3104):     at android.view.Choreographer$CallbackRecord.run(Choreographer.java:749)
03-20 12:53:31.219: E/AndroidRuntime(3104):     at android.view.Choreographer.doCallbacks(Choreographer.java:562)
03-20 12:53:31.219: E/AndroidRuntime(3104):     at android.view.Choreographer.doFrame(Choreographer.java:532)
03-20 12:53:31.219: E/AndroidRuntime(3104):     at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:735)
03-20 12:53:31.219: E/AndroidRuntime(3104):     at android.os.Handler.handleCallback(Handler.java:725)
03-20 12:53:31.219: E/AndroidRuntime(3104):     at android.os.Handler.dispatchMessage(Handler.java:92)
03-20 12:53:31.219: E/AndroidRuntime(3104):     at android.os.Looper.loop(Looper.java:137)
03-20 12:53:31.219: E/AndroidRuntime(3104):     at android.app.ActivityThread.main(ActivityThread.java:5039)
03-20 12:53:31.219: E/AndroidRuntime(3104):     at java.lang.reflect.Method.invokeNative(Native Method)
03-20 12:53:31.219: E/AndroidRuntime(3104):     at java.lang.reflect.Method.invoke(Method.java:511)
03-20 12:53:31.219: E/AndroidRuntime(3104):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-20 12:53:31.219: E/AndroidRuntime(3104):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-20 12:53:31.219: E/AndroidRuntime(3104):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-20T13:11:58.317

你可以使用 ListFragment 。它在文档中得到了很好的解释：

[http://developer.android.com/reference/android/app/ListFragment.html](http://developer.android.com/reference/android/app/ListFragment.html)

Vogela 也有这方面的教程：

[http://www.vogella.com/articles/AndroidListView/article.html#listfragments](http://www.vogella.com/articles/AndroidListView/article.html#listfragments)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-01-09T10:40:38.543

我得到了输出！！

```
public class TopRatedFragment extends Fragment {

private String[] mNames = { "Fabian", "Carlos", "Alex", "Andrea", "Karla",
       "Freddy", "Lazaro", "Hector", "Carolina", "Edwin", "Jhon",
       "Edelmira", "Andres" };

private String[] mAnimals = { "Perro", "Gato", "Oveja", "Elefante", "Pez",
        "Nicuro", "Bocachico", "Chucha", "Curie", "Raton", "Aguila",
        "Leon", "Jirafa" };

int[] flags = new int[]{
        R.drawable.ic_launcher,
        R.drawable.ic_launcher,
        R.drawable.ic_launcher,
        R.drawable.ic_launcher,
        R.drawable.ic_launcher,
        R.drawable.ic_launcher,
        R.drawable.ic_launcher,
        R.drawable.ic_launcher,
        R.drawable.ic_launcher,
        R.drawable.ic_launcher  
};

    public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {

List<HashMap<String,String>> aList = new ArrayList<HashMap<String,String>>();

for(int i=0;i<10;i++){
    HashMap<String, String> hm = new HashMap<String,String>();
    hm.put("txt", "App Name : " + mNames[i]);
    hm.put("cur","creator : " + mAnimals[i]);
    hm.put("flag", Integer.toString(flags[i]) ); 
    aList.add(hm);        
}
String[] from = { "flag","txt","cur" };

int[] to = { R.id.flag,R.id.txt,R.id.cur,R.id.textView2}; 

View v = inflater.inflate(R.layout.fragment_top_rated, container,false);
    ListView list = (ListView)v.findViewById(R.id.listView1);
SimpleAdapter adapter = new SimpleAdapter(getActivity().getBaseContext(), aList, R.layout.listview_layout, from, to);       
    list.setAdapter(adapter);
return v;
 }
 } 
```

listview_layout.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="horizontal">

<ImageView 
        android:id="@+id/flag"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:contentDescription="@string/hello_world"
        android:paddingTop="10dp"
        android:paddingRight="10dp"
        android:paddingBottom="10dp" />

    <LinearLayout 
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" >    

        <TextView 
            android:id="@+id/txt"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textSize="15dp" />          

        <TextView 
            android:id="@+id/cur"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textSize="10dp" />

</LinearLayout>

</LinearLayout> 
```

fragment_top_rated.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainActivity" >

<ListView
    android:id="@+id/listView1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true" >
</ListView>

</RelativeLayout> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-11-19T10:09:58.187

包含具有 3 个元素的列表视图的片段示例。关键是onCreateView，别忘了给fragment.xml（fragment_list）充气，在这个里面会有一个listView，里面有“listView$fragment_list$lista”

```
 public class FragmentList extends Fragment {

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup   container,BundlesavedInstanceState) {

    View v = inflater.inflate(R.layout.fragment_list, container, false);

    ListView lstItems = (ListView)v.findViewById(R.id.listView$fragment_list$lista);

    ArrayList<String> prueba = new ArrayList<String>();
    prueba.add("Element1");
    prueba.add("Element2");
    prueba.add("Element3");

    ArrayAdapter<String> allItemsAdapter = new ArrayAdapter<String>(getActivity().getBaseContext(), android.R.layout.simple_list_item_1,prueba);

    lstItems.setAdapter(allItemsAdapter);

    return v;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T14:09:18.750

您收到的错误是由于尝试设置主要活动的 listadapter 而不是列表。

在您的比赛列表课程中，您执行以下操作：

```
((ListActivity) context).setListAdapter(adapter); 
```

但是上下文不是针对 ListActivity，而是针对 MainActivity。

你这样做是这样的：

```
ContestList.GetList(getActivity(), 1, "mm", "njk"); 
```

但是 getActivity() 意味着它返回的主要活动是“MainActivity”。你应该改变一些东西来传递列表视图而不是活动上下文，或者找到另一种方法来传递你需要的数据。

# objective-c - 将信息从 ios 应用程序保存到 Web 服务器 (POST JSON)

> ID：15524277
> 
> 赞同：0
> 
> 时间：2013-03-20T13:00:16.263
> 
> 标签：objective-c, json, post, webserver

我遇到的问题是我无法将信息从我的 ios 应用程序保存到我的 Web 服务器，我目前是使用 JSON 检索数据并解析该数据的应用程序。

我已经为请求编写了 php 代码，它存储在我的服务器上：

```
...else
{
    // updating record
    $q = sprintf("update phone_book set name = '%s', phoneNumber = '%s', email = '%s', phoneNumber = '%s' where name = '%s'",
        mysql_real_escape_string($_GET["name"]),
        mysql_real_escape_string($_GET["phoneNumber"]),
        mysql_real_escape_string($_GET["email"]),
        mysql_real_escape_string($_GET["address"]));
} 
```

但是，我到处寻找，无法找到有关如何使用将这些信息从我的应用程序发布到 Web 服务器的信息。

将不胜感激任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T19:26:52.910

使用此 api 发布和获取调用和对象映射 [https://github.com/RestKit/RestKit](https://github.com/RestKit/RestKit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T11:35:11.950

这实际上太难了。另一个不使用 REST 的选项是从 iOS 应用程序 POST JSON，将 JSON 发送到 php 文件包含代码的站点。PHP 中的固定代码如下所示：

```
 ...
$json_post = json_decode(file_get_contents ('php://input'),1);
$name = $json_post['name'];
$phone = $json_post['phone'];

$aQuery = "UPDATE phone_book SET phoneNumber = '$phone' WHERE name = '$name' ";

mysql_query($aQuery);

... 
```

如果有人需要更多帮助，请随时发表评论。祝你好运！

# android - Android平台中的Service vs IntentService

> ID：15524280
> 
> 赞同：809
> 
> 时间：2013-03-20T13:00:26.747
> 
> 标签：android, multithreading, android-service, android-intentservice

我正在寻找一个可以`IntentService`用 a 不能完成的事情的例子`Service`（反之亦然）？

我也相信`IntentService`a 在不同的线程中运行而 a`Service`不会。因此，据我所知，在自己的线程中启动服务就像启动`IntentService`. 那是对的吗？

* * *

## 回答 #1

> 赞同：1411
> 
> 时间：2013-04-02T18:57:02.880

Tejas Lagvankar 写了一篇关于这个主题的好[文章。](http://techtej.blogspot.com.es/2011/03/android-thread-constructspart-4.html)以下是 Service 和 IntentService 之间的一些主要区别。

**什么时候使用？**

*   *Service*可以在没有 UI 的任务中使用，但不应该太长。如果需要执行长任务，则必须在 Service 中使用线程。

*   IntentService可用于通常不与主线程通信的长任务*。*如果需要通信，可以使用主线程处理程序或广播意图。另一种使用情况是需要回调时（意图触发的任务）。

**如何触发？**

*   通过调用方法触发*服务*`startService()`。

*   IntentService使用 Intent 触发，它产生一个新的工作线程，并在该线程上调用该*方法*`onHandleIntent()`。

**触发自**

*   *Service*和IntentService可以从任何线程、活动或其他应用程序组件触发*。*

**运行**

*   该*服务*在后台运行，但它在应用程序的主线程上运行。

*   IntentService在单独的工作线程上运行*。*

**限制/缺点**

*   *服务*可能会阻塞应用程序的主线程。

*   IntentService不能并行运行任务*。*因此，所有连续的意图都将进入工作线程的消息队列并按顺序执行。

**什么时候停止？**

*   如果你实现了一个*服务*，你有责任在服务完成后通过调用`stopSelf()`或停止服务`stopService()`。（如果只想提供绑定，则不需要实现此方法）。

*   *IntentService*在处理完所有启动请求后停止服务，因此您无需调用`stopSelf()`.

* * *

## 回答 #2

> 赞同：171
> 
> 时间：2013-03-20T13:19:17.787

> 如果有人可以向我展示一个可以`IntentService`用 a 完成而不能用 a 完成的事情的例子，反之亦然`Service`。

根据定义，这是不可能的。`IntentService`是 的子类`Service`，用 Java 编写。因此，通过包含使用的相关代码位，任何 an可以做`IntentService`的事情。`Service``IntentService`

> 使用自己的线程启动服务就像启动 IntentService。不是吗？

的三个主要特征`IntentService`是：

*   后台线程

*   s的自动排队`Intent`传递给`onStartCommand()`，所以如果一个`Intent`正在被`onHandleIntent()`后台线程处理，其他命令排队等待轮到他们

*   一旦队列为空`IntentService`，通过调用自动关闭`stopSelf()`

任何和所有这些都可以通过 a 来实现而`Service`无需扩展`IntentService`.

* * *

## 回答 #3

> 赞同：40
> 
> 时间：2014-05-19T04:47:40.987

**服务**

*   调用者`startService()`
*   从任何触发`Thread`
*   运行在`Main Thread`
*   可能会阻塞主 (UI) 线程。始终在服务中使用线程来处理长任务
*   一旦任务完成，我们有责任通过调用`stopSelf()`或停止服务`stopService()`

**意向服务**

*   它执行长任务，通常不与主线程通信，如果需要通信，则由`Handler`or完成`BroadcastReceiver`
*   通过调用`Intent`
*   触发自`Main Thread`
*   在单独的线程上运行
*   无法并行运行任务，并且多个意图在同一个工作线程上排队。

* * *

## 回答 #4

> 赞同：33
> 
> 时间：2017-11-04T11:19:47.543

# 不要重新发明轮子

[IntentService](https://developer.android.com/reference/android/app/IntentService.html)扩展了[Service](https://developer.android.com/guide/components/services.html)类，这显然意味着它是为**相同**目的`IntentService`而故意制作的。

 ****那么目的是什么？**

`IntentService 的目的是让我们的工作更容易运行后台任务，甚至不用担心

*   工作线程的创建

*   将处理多个请求一一排队（`Threading`）

*   摧毁`Service`

所以**NO**，`Service`可以做任何可以做的任务`IntentService`。如果您的要求符合上述标准，那么您不必在`Service`课堂上编写这些逻辑。所以不要重新发明轮子，因为`IntentService`是发明的轮子。

# “主要”区别

> Service 在 UI 线程上运行，而 IntentService 在单独的线程上运行

## 你什么时候使用 IntentService？

当您想要一项一项地执行超出 Activity 范围的多个后台任务时，这`IntentService`是完美的。

## 是如何`IntentService`制成的`Service`

普通服务在 UI 线程上运行（任何 Android 组件类型默认在 UI 线程上运行，例如、`Activity`和）。如果您必须做一些可能需要一段时间才能完成的工作，那么您必须创建一个线程。在多个请求的情况下，您将不得不处理. 给出了一些默认实现，可以为您完成这些任务。 根据[开发者页面](https://developer.android.com/guide/components/services.html#ExtendingIntentService)`BroadcastReceiver``ContentProvider``Service``synchronization``IntentService`

1.  `IntentService`创建一个工作线程

2.  `IntentService`创建一个工作队列，将请求`onHandleIntent()`一一发送到方法

3.  当没有工作时`IntentService`调用`stopSelf()`方法
4.  `onBind()`为 null 的方法提供默认实现
5.  将请求发送到 WorkQueue 并最终`onStartCommand()`发送到的默认实现`Intent``onHandleIntent()`

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2014-01-02T12:22:57.190

为接受的答案加分：

请参阅 Android API 中 IntentService 的用法。例如：

```
public class SimpleWakefulService extends IntentService {
    public SimpleWakefulService() {
        super("SimpleWakefulService");
    }

    @Override
    protected void onHandleIntent(Intent intent) {  ...} 
```

要为您的应用创建 IntentService 组件，请定义一个扩展 IntentService 的类，并在其中定义一个覆盖 onHandleIntent() 的方法。

另外，请参阅 IntentService 的源代码，它的构造函数和生命周期方法，如 onStartCommand...

```
 @Override
    public int More ...onStartCommand(Intent intent, int flags, int startId) {
       onStart(intent, startId);
        return mRedelivery ? START_REDELIVER_INTENT : START_NOT_STICKY;
    } 
```

> 将 AsyncTask 一起服务是许多负载不大的用例的最佳方法之一。或者只是创建一个扩展 IntentSerivce 的类。从 Android 4.0 版开始，所有网络操作都应在后台进程中进行，否则应用程序编译/构建将失败。与 UI 分离的线程。AsyncTask 类提供了一种从 UI 线程触发新任务的最简单方法。有关此主题的更多讨论，请参阅博客文章

来自[Android 开发者指南](http://developer.android.com/reference/android/app/IntentService.html)：

IntentService 是按需处理异步请求（表示为 Intent）的服务的基类。客户端通过 startService(Intent) 调用发送请求；该服务根据需要启动，依次使用工作线程处理每个 Intent，并在其工作结束时自行停止。

> IntentService 中使用的设计模式

：这种“工作队列处理器”模式通常用于从应用程序的主线程卸载任务。IntentService 类的存在是为了简化这种模式并处理机制。要使用它，请扩展 IntentService 并实现 onHandleIntent(Intent)。IntentService 将接收 Intent，启动工作线程，并酌情停止服务。

所有请求都在单个工作线程上处理——它们可能需要尽可能长的时间（并且不会阻塞应用程序的主循环），但一次只会处理一个请求。

IntentService 类为在单个后台线程上运行操作提供了一个简单的结构。这允许它处理长时间运行的操作，而不会影响用户界面的响应能力。此外，IntentService 不受大多数​​用户界面生命周期事件的影响，因此它会在会关闭 AsyncTask 的情况下继续运行。

IntentService 有一些限制：

它不能直接与您的用户界面交互。要将其结果放入 UI，您必须将它们发送到 Activity。工作请求按顺序运行。如果一个操作正在 IntentService 中运行，并且您向它发送另一个请求，则该请求会一直等待，直到第一个操作完成。在 IntentService 上运行的操作不能被中断。然而，在大多数情况下

> IntentService 是简单后台操作的首选方式

**

> 排球库

有一个名为[volley-library 的库，用于开发 android 网络应用程序](http://java.dzone.com/articles/android-%E2%80%93-volley-library) ，源代码可在 GitHub 中向公众开放。

[后台作业最佳实践](http://developer.android.com/training/best-background.html)的 android 官方文档 ：有助于更好地理解意图服务、线程、处理程序、服务。以及[执行网络操作](http://developer.android.com/training/basics/network-ops/index.html)

* * *

## 回答 #6

> 赞同：14
> 
> 时间：2013-03-20T13:03:44.087

我相信你可以通过谷歌搜索诸如“Android IntentService vs Service”之类的东西来找到一个广泛的差异列表

每个示例更重要的区别之一是 IntentService 完成后自行结束。

一些例子（快速编造）可能是；

IntentService：如果您想在打开应用程序开始时下载一堆图像。这是一个一次性的过程，下载完所有内容后就可以自行清理。

服务：一种服务，将不断用于通过 Web API 调用在您的应用程序和后端之间进行通信。即使它完成了当前任务，您仍然希望它在几分钟后完成，以便进行更多通信。

* * *

## 回答 #7

> 赞同：12
> 
> 时间：2015-07-19T15:51:17.270

### 意向服务

`IntentService`在自己的线程上运行。完成后它会自行停止。更像是一发不可收拾。随后的呼叫将排队。适合排队通话。如果需要，您还可以在其中旋转多个线程`IntentService`- 您可以使用`ThreadPoolExecutor`. 我这么说是因为很多人问我“为什么要使用`IntentService`它，因为它不支持并行执行”。 `IntentService`只是一个线程。你可以在里面做任何你需要的事情——甚至可以旋转多个线程。唯一需要注意的是，`IntentService`一旦您旋转这些多个线程，它就会完成。它不会等待那些线程回来。你需要照顾好这个。所以我建议`ThreadPoolExecutor`在这些场景中使用。

*   适合同步、上传等……</li>

### 服务

默认`Service`情况下在主线程上运行。您需要旋转一个工作线程来完成您的工作。您需要`service`明确停止。我将它用于当你需要在后台运行东西的情况下，即使你离开你的应用程序并返回更多的 Headless `service`。

*   如果需要，您可以再次运行多个线程。
*   可用于音乐播放器等应用。

`BroadcastReceivers`如果需要，您可以随时使用 。

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2013-03-20T13:20:30.667

IntentService 是 Service 的扩展，旨在简化需要在后台和单独线程中执行的任务的执行。

IntentService 启动，创建一个线程并在线程中运行它的任务。完成后，它会清理所有内容。IntentService 只能同时运行一个实例，多个调用被排队。

它使用起来非常简单，并且对于很多用途都非常方便，例如下载东西。但它有一些限制，可以让您想要使用更基本（不简单）的服务。

例如，连接到 xmpp 服务器并由活动绑定的服务不能简单地使用 IntentService 完成。你最终会忽略或覆盖 IntentService 的东西。

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2014-06-22T23:57:07.503

> 如果有人可以给我看一个例子，你可以用 a 完成，`IntentService`不能用 a 完成，`service`反之亦然。

`IntentService`不能用于 Long Time Listening，就像 XMPP Listeners 一样，它是一个单一的时间运算符，完成工作并挥手告别。

它也只有一个线程工作者，但有一个技巧，你可以无限使用它。

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2019-09-12T12:24:38.777

**Android IntentService 与服务**

**1.服务**

*   使用 startService() 调用服务。
*   可以从任何线程调用服务。
*   默认情况下，服务在应用程序的主线程上运行后台操作。因此，它可以阻止您的应用程序的 UI。
*   多次调用的服务将创建多个实例。
*   需要使用 stopSelf() 或 stopService() 停止服务。
*   Android 服务可以运行并行操作。

**2.意图服务**

*   使用 Intent 调用 IntentService。
*   IntentService 只能从主线程调用。
*   IntentService 创建一个单独的工作线程来运行后台操作。
*   多次调用的 IntentService 不会创建多个实例。
*   IntentService 在队列完成后自动停止。无需触发 stopService() 或 stopSelf()。
*   在 IntentService 中，多个意图调用会自动排队并按顺序执行。
*   IntentService 不能像服务一样运行并行操作。

从[这里参考](https://www.journaldev.com/20735/android-intentservice-broadcastreceiver)

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2015-07-18T08:25:41.307

`Service`a和an之间的主要区别`IntentService`描述如下：

**服务 ：**

1.A`Service`默认运行在应用程序的主线程上。（这里没有默认的工作线程可用）。所以用户需要创建一个单独的线程并在该线程中完成所需的工作。

2.一次允许多个请求。（多线程）

**意向服务：**

1.现在，来到`IntentService`这里，这里有一个默认的工作线程可以执行任何操作。*请注意*- 您需要实现`onHandleIntent()`方法，该方法接收每个启动请求的意图，您可以在其中进行后台工作。

2.但它一次只允许一个请求。**

# qt - Qt模型/视图和QTableView的基本概念

> ID：15524286
> 
> 赞同：3
> 
> 时间：2013-03-20T13:00:43.727
> 
> 标签：qt, model-view-controller, qtableview, qabstractitemmodel

我想创建一个软件来浏览一些数据库表并且用户将能够编辑这些表。在阅读此[链接](http://qt-project.org/doc/qt-4.8/model-view-programming.html)之后，我认为模型/视图是满足我需要的好方法。看看下面的模型： ![在此处输入图像描述](../Images/7210169f8cad64696668d35913728717.png)

知道了这一点，我有一些问题要确保我理解这个概念。请告诉我我是否朝着好的方向发展：

1.  我想我需要为每个表创建一个模型类？（子类化 QAbstractModel）。它看起来像这样：

    ```
    class citiesTableModel : public QAbstractItemModel
     {
         Q_OBJECT
     } 
    ```

2.  cityTableModel 构造函数会从数据库中的表中获取数据吗？

    ```
    QAbstractItemModel *model = new citiesTableModel(); //model will contain 2 rows, New York and Seattle 
    ```

3.  我需要为每个不同的模型子类 QTableView 吗？

    ```
    class citiesTableView : public QTableView{} 
    ```

4.  Finnaly，我猜 view.setData 和 view.setModel 需要重新实现？setModel 将遍历每个模型行以构建 QTableView，而 setData 将执行适当的查询以在模型中添加新数据？

非常感谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T13:14:58.060

基本上你有不同的选择：

您的数据库是 SQL 数据库。您可以使用子类[QSqlTableModel](http://qt-project.org/doc/qt-4.8/qsqltablemodel.html)。否则，如果您想从头开始创建模型，则可以创建自己的模型，但我不明白这一点。你也有[QTableModel](http://qt-project.org/doc/qt-4.8/sql-tablemodel.html)的例子。

您不需要为每个表创建模型，因为它始终是一个表模型。该模型主要定义了如何使用特定数据添加和删除行。

关于视图，您必须继承 QTableView 为您的行和列添加自定义行为，例如拖动事件。

您需要的唯一自定义元素是您的视图或列的委托。它基本上会将模型中的布尔值转换为复选框。

我建议您查看[SpinBox 委托](http://qt-project.org/doc/qt-4.8/itemviews-spinboxdelegate.html)以获得更精确的信息。

希望这可以帮助。

编辑：

对于 PostgreSQL，您可以将其添加到 QsqlDatabase 中：

```
 QSqlDatabase db = QSqlDatabase::addDatabase("QPSQL");
 db.setHostName("acidalia");
 db.setDatabaseName("customdb");
 db.setUserName("mojito");
 db.setPassword("J0a1m8");
 bool ok = db.open(); 
```

然后将 db 传递给 QSqlTableModel。如果您需要更多的关系操作，例如从外键获取字段，您可以使用：

```
QSqlRelationalTableModel
QSqlRelationalDelegate 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T13:24:15.537

你可以用[`QSqlTableModel`](http://qt-project.org/doc/qt-4.8/qsqltablemodel.html)这个。

正如文档所说，它可以很容易地使用：

```
QSqlTableModel *model = new QSqlTableModel(parentObject, database);
model->setTable("employee");
model->setEditStrategy(QSqlTableModel::OnManualSubmit);
model->select();
model->setHeaderData(0, Qt::Horizontal, tr("Name"));
model->setHeaderData(1, Qt::Horizontal, tr("Salary"));

QTableView *view = new QTableView;
view->setModel(model);
view->hideColumn(0); // don't show the ID
view->show(); 
```

> 我想我需要为每个表创建一个模型类？

是的，一个模型代表一个sql表。

> cityTableModel 构造函数会从数据库中的表中获取数据吗？

`QSqlTableModel`会为你做的：

```
QSqlTableModel *model = new QSqlTableModel(parentObject, database);
model->setTable("employee");
model->select(); 
```

> 我需要为每个不同的模型子类 QTableView 吗？

不，你没有。单个`QTableview`可以显示您使用设置的任何模型`setModel`。

> Finnaly，我猜 view.setData 和 view.setModel 需要重新实现？setModel 将遍历每个模型行以构建 QTableView，而 setData 将执行适当的查询以在模型中添加新数据？

根据您使用 设置的编辑策略`setEditStrategy`，更改将在您编辑表格单元格时提交，或者在您使用 提交之后提交`submitAll`。

此外，您可能想看看[`QDataWidgetMapper`](http://qt-project.org/doc/qt-4.8/qdatawidgetmapper.html). 它可以将您的模型数据映射到不同的小部件，并跟踪您在编辑这些小部件时所做的更改。

# c# - 将新项目添加到 Sharepoint 2013 列表后，如何在 Azure 服务总线队列中创建消息？

> ID：15524287
> 
> 赞同：-1
> 
> 时间：2013-03-20T13:00:45.933
> 
> 标签：c#, sharepoint, azure, sharepoint-2013, azureservicebus

每次在特定的 Sharepoint 2013 列表下创建项目时，我都需要在 Windows Azure 服务总线队列上创建消息。稍后我将使用另一个应用程序处理这些消息。

一些指导或示例会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T13:16:54.090

SP 2013 列表中的事件接收器怎么样？

类似于此处提到的应用程序示例中的方法：http: [//blogs.msdn.com/b/officeapps/archive/2013/01/03/debugging-remote-event-receivers-with-visual-studio.aspx#服务总线](http://blogs.msdn.com/b/officeapps/archive/2013/01/03/debugging-remote-event-receivers-with-visual-studio.aspx#service-bus)

# css - th 和 td 宽度不同

> ID：15524289
> 
> 赞同：1
> 
> 时间：2013-03-20T13:00:49.320
> 
> 标签：css, width, css-tables

我试图让我的表头是静态的，但是每当我这样做时，th 和 td 宽度最终都会改变。我正在使用 CSS 完成所有这些工作。我使表头静态的方式是固定其位置。

我尝试将 th 和 td 宽度设置为相同，但这不起作用。

```
#idOfHeader th { width: 20px; }
#idOfBody td { width: 20px; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T13:13:43.070

我不明白你为什么必须使用`min-width`,`max-width`或`<col>`. 我认为不同宽度的可能原因是某处的内容迫使单元格比预期的更宽，或者`td`s 和`th`s 具有不同的填充。单元格的总宽度是它的宽度加上它的填充。

Unless the padding is specified somewhere, the browser's default paddings will be applied and I guess the padding of the `th` is likely to be bigger than that of the `td`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T13:06:37.267

```
th,td{

width:20px;
max-width:20px;
min-width:20px;
} 
```

也许你的`padding`与众不同

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-20T13:10:20.053

在 html 中使用 col 标签

```
<table border="1" width="100%">
  <col width="100">
  <col width="50">
  <tr>
    <th>Month</th>
    <th>Savings</th>
  </tr>
  <tr>
    <td>January</td>
    <td>$100</td>
  </tr>
  <tr>
    <td>February</td>
    <td>$80</td>
  </tr>
</table> 
```

[小提琴](http://jsfiddle.net/Sekkk/)

# clojure - 查找向量的所有元素是否只出现一次

> ID：15524304
> 
> 赞同：2
> 
> 时间：2013-03-20T13:01:55.403
> 
> 标签：clojure

我有一个向量 -`[1 2 3 4]`

我想检查向量中的每个元素是否只出现一次。我该怎么做 ？我能想到的一种方法是将它转换成一个集合，然后再转换回向量，然后比较两者:)但是我认为应该有一个更简单的方法......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T13:43:45.383

你可以使用[不同的？](http://clojuredocs.org/clojure_core/clojure.core/distinct_q)：

```
(apply distinct? [1 2 3 4]) ;=> true
(apply distinct? [1 2 3 4 4]) ;=> false 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-20T13:03:36.583

您可以使用`distinct`：

```
(distinct [1 2 3 4 5 5]) -> [1 2 3 4 5] 
```

对于检查，您可以执行以下操作：

```
(= [1 2 3 4 5 5] (distinct [1 2 3 4 5 5])) 
```

# g++ - wcout 函数不打印法语字符

> ID：15524311
> 
> 赞同：5
> 
> 时间：2013-03-20T13:02:11.923
> 
> 标签：g++, wchar-t, c++

我正在使用 wcin 将单个字符存储在 wchar_t 中。然后我尝试使用 wcout 调用和法语字符 'é' 打印它：但我在控制台上看不到它。

我的编译器是 g++ 4.5.4，我的操作系统是 Ubuntu 12.10 64 位。

这是我的尝试（wideChars.cpp）：

```
#include <iostream>

int main(){
    using namespace std;

    wchar_t aChar;
    cout << "Enter your char : ";
    wcin >> aChar;
    wcout << L"You entered " << aChar << L" .\n";

    return 0;
} 
```

当我启动程序时：

```
$ ./wideChars 
Enter your char : é
You entered  . 
```

那么，这段代码有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T13:15:02.983

首先，添加一些错误检查。测试`wcin.good()`输入后`wcout.good()`返回什么以及“您输入”打印后返回什么？我怀疑其中一个会回来`false`。

您`LANG`和`LC_*`环境变量设置为什么？

~~然后尝试通过在你的顶部添加这个来解决这个问题`main()`：`wcin.imbue(std::locale("")); wcout.imbue(std::locale(""));`~~

我现在手头没有我的 Ubuntu，所以我在这里盲目飞行，主要是在猜测。

**更新**

如果上面的建议没有帮助，那么尝试构建这样的语言环境和`imbue()`这个语言环境。

```
std::locale loc (
    std::locale (),
    new std::codecvt_byname<wchar_t, char, std::mbstate_t>(""))); 
```

 ~~**更新 2**

这对我有用。~~关键是还要设置 C 语言环境。恕我直言，这是 GNU C++ 标准库实现中的一个错误。除非我弄错`std::locale::global("");`了，否则设置也应该设置 C 库语言环境。~~

```
#include <iostream>
#include <locale>
#include <clocale>

#define DUMP(x) do { std::wcerr << #x ": " << x << "\n"; } while (0)

int main(){
    using namespace std;

    std::locale loc ("");
    std::locale::global (loc);
    DUMP(std::setlocale(LC_ALL, NULL));
    DUMP(std::setlocale(LC_ALL, ""));    
    wcin.imbue (loc);

    DUMP (wcin.good());
    wchar_t aChar = 0;
    wcin >> aChar;
    DUMP (wcin.good());
    DUMP ((int)aChar);
    wcout << L"You entered " << aChar << L" .\n";

    return 0;
} 
```

**更新 3**

我很困惑，现在我无法再次复制它，并且设置`std::locale::global(loc);`似乎也可以在 C 语言环境中做正确的事情。~~

# java - 在 Weblogic 中解析 SOAP 调用的 XML 响应

> ID：15524313
> 
> 赞同：1
> 
> 时间：2013-03-20T13:02:12.877
> 
> 标签：java, xml, soap, weblogic, jaxp

我们正在将功能从带有 java 1.4 的 Weblogic Server **8,1 sp5**迁移到带有 java 1.7 的 10.3.6。

下面描述的情况在旧服务器中正常工作，但是在将处理转移到新服务器时我们遇到了问题。问题在于检索和解析通过 SOAP 调用从外部系统检索的 XML 响应。

*该方法中使用了以下库和过程：*

1.  **java.net.HttpURLConnection**建立连接
2.  **java.io.OutputStream**发送请求
3.  **java.io.InputStream**获取响应
4.  **byte[]在转换为****String**之前存储结果
***   **javax.xml.parsers.DocumentBuilder**、**java.io.StringReader**和**org.xml.sax.InputSource**将 String 转换为**org.w3c.dom.Document***   引发以下异常： **“org.xml.sax.SAXParseException - 尾部不允许有内容。”****

 ****使用记事本++ 打开应用程序的日志时，文件末尾出现许多空字符，这似乎是导致问题的原因。我再说一遍，从旧服务器执行请求时不会出现这种情况。**

*相应的代码如下：*

```
//Creating the connection
URL u = new URL(default_server);
URLConnection uc = u.openConnection();
HttpURLConnection connection = (HttpURLConnection) uc;

connection.setDoOutput(true);
connection.setDoInput(true);
connection.setRequestMethod(requestMethod);
connection.setRequestProperty("SOAPAction", soap_action);

OutputStream out = connection.getOutputStream();
Writer wout = new OutputStreamWriter(out);

wout.write(xmlString);
wout.flush();
wout.close();

InputStream in = connection.getInputStream();

int c = in.available();
byte r[] = new byte[c];
in.read(r);
String response = new String(r);
connection.disconnect();

//Transorming the String to XML Doc
DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
DocumentBuilder builder = factory.newDocumentBuilder();
StringReader theReader = new StringReader(response);
InputSource theInputSource = new InputSource();
theInputSource.setCharacterStream(theReader);
Document doc = builder.parse(theInputSource); 
//Here occurs org.xml.sax.SAXParseException-Content is not allowed in trailing section

return doc; 
```

我知道我可以通过从垃圾字符中删除响应来解决问题，但这不是一个安全的解决方案。你有什么信息可以分享吗？您认为这是 java 版本问题还是服务器配置问题？提前感谢您的时间。

最好的问候，乔治

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T14:45:36.757

我看到两个问题

*   `in.available()`根据javadoc：返回字节数的**估计**......不要依赖这个。循环 8K 的缓冲区以读取流，直到到达终点甚至更好，不要重新发明轮子，使用 Apache 的 commons-io 并使用一次调用`ÌOUtils.read`
*   `String response = new String(r);`这样做你假设接收到的字节使用与你的平台编码/字符集相同的字符集进行编码。如果您使用的是 Windows 或 OSX，则不太可能出现这种情况。您必须传递字符集并使用构造函数`String(byte[] bytes, Charset charset)`。**

# c - PostgreSQL - 调用 web 服务的 C 函数

> ID：15524314
> 
> 赞同：1
> 
> 时间：2013-03-20T13:02:17.297
> 
> 标签：c, web-services, postgresql

我已经安装了 PostgreSQL 8.4。我想要做的是通过 C 函数调用 Web 服务，由插入/更新触发器启用，并在此 Web 服务中传递新值。我该怎么做，我在网上搜索并找不到示例。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T06:26:58.500

请不要这样做。如果你这样做了，你会遇到一些很好的问题，比如你如何处理 Web 服务宕机的问题。此外，您还必须解决应用程序回滚时发生的情况。您无法取消调用 Web 服务。此外，如果连接超时，您的程序将在等待永远不会出现的响应时挂起相当长的时间（保留所有锁等）。

更好的方法是使用 pgq 或 pg_message_queue 之类的排队解决方案，并在触发时将数据排队，仅针对 Web 服务异步运行它。

# php - 登录网站并在登录后使用 curl 上传文件

> ID：15524317
> 
> 赞同：1
> 
> 时间：2013-03-20T13:02:27.040
> 
> 标签：php, curl, upload, multipartform-data

我想登录一个站点，然后使用 curl 上传一个文件

我已成功登录网站，现在我想使用相同的 curl 连接上传文件。可能吗？

到目前为止我的代码：

```
$id ='myusername';
$password ='mypassword';
$cookie_file_path = "cookie.txt";
$agent =$_SERVER['HTTP_USER_AGENT'];
$getfile='http://archive.org/download/TestVideo_935/Backntro.mp4';
$getfile=file_get_contents($getfile);
$POSTFIELDS = array(
    'username'=>$id,
    'password'=>$password,
    'uploadfile'=>'@'.$getfile  
    );
//post info for login
$LOGINURL = "http://****.com/**/;
$reffer = "http://*****.com/***/";//path to upload file 

//in my case I want to upload video as this site is video site

$ch = curl_init ($LOGINURL);
curl_setopt($ch, CURLOPT_POSTFIELDS,$POSTFIELDS);
curl_setopt($session, CURLOPT_HTTPHEADER, array(
        "Content-Type:multipart/form-data",
));

curl_setopt($ch, CURLOPT_USERAGENT, $agent);
curl_setopt($ch,CURLOPT_HTTPHEADER,array("Expect:"));
curl_setopt ($ch, CURLOPT_COOKIEFILE,$cookie_file_path);
curl_setopt($ch, CURLOPT_COOKIEJAR, $cookie_file_path);
curl_setopt ($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_AUTOREFERER, $reffer);
curl_setopt($ch, CURLOPT_COOKIESESSION, TRUE);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true); 

$info = curl_getinfo($ch);
$result = curl_exec ($ch);

print_r($info);
print_r($result); 
```

任何帮助将不胜感激 ！！非常感谢 ！

```
 <form method="post" action="userfiles" enctype="multipart/form-data">

             <div class="formrow">

<label for="uploadfile">File</label>

<input type="file" name="uploadfile" id="uploadfile" />

 <span id="note_uploadfile"></span></div>

   <div class="formrow"><label for="uploadname">

Name</label><input type="text" name="uploadname" id="uploadname" /> <span 

          <div class="submitrow"><label></label>

</form> 
```

# google-analytics - 使用 GoogleAnalytics 跟踪会话

> ID：15524318
> 
> 赞同：-1
> 
> 时间：2013-03-20T13:02:31.127
> 
> 标签：google-analytics

是否可以使用 GoogleAnalytics 来跟踪单个用户会话？我的意思是，不是用户在网站上花费的平均时间，而是每个用户在网站上总共停留了多长时间？

我的托管选项不包括数据库，所以我想使用 GoogleAnalytics 来跟踪用户会话。可以做到吗？我在网上找不到任何令人满意的东西。:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T13:12:37.523

不，不是真的 - Google Analytics 不会针对每个用户进行跟踪（因为这实际上非常无用，除其他外）。

但是，您可以做一个解决方法。为每个访问者分配一个 ID（或通过 javascript 从分析 cookie 中提取用户 ID）。然后触发以 id 作为交易 id 和现场时间（使用 GA cookie 中的时间戳）作为交易值的电子商务交易 - 如果交易 id 相同，Google 将添加交易值。这个想法未经测试，显然需要一些工作，但它应该是可行的。

这留下了一个问题，为什么？您希望根据大量无用信息做出什么样的商业决策？平均值更有用。

**更新：**阅读您的评论后，您做错了。您想要一个高级细分 -> 排除访问持续时间小于（或大于，等等）小于 10 秒。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T13:14:59.803

Google Analytics 不允许您跟踪单个用户。

看到这个线程： [http ://productforums.google.com/forum/#!topic/analytics/tTaqssN7sY8](http://productforums.google.com/forum/#!topic/analytics/tTaqssN7sY8)

试用 Woopra：[http ://www.woopra.com/](http://www.woopra.com/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T13:17:54.467

您也许可以按[高级细分](http://www.google.com.au/analytics/features/advanced-segments.html)进行过滤，或使用[自定义报告](http://www.google.com.au/analytics/features/custom-reports.html)进行自己的过滤。或者创建一个本身被过滤的[自定义指标。](http://support.google.com/analytics/bin/answer.py?hl=en&answer=2709828)

# java - charAt(i) 没有给出预期的数组行为

> ID：15524322
> 
> 赞同：0
> 
> 时间：2013-03-20T13:02:41.693
> 
> 标签：java

下面是我的简单程序，它将字符串转换为数组元素，`charAt(i)`根据文档没有返回它应该返回的内容。我的代码是

```
public class StringToArray {

    public static void main(String[] args){
        String test = "12345";
        fromPuzzleString(test);
    }

    public static void fromPuzzleString(String puzzle) {
        int puz[] = new int[puzzle.length()];
        for (int i = 0; i < puzzle.length(); i++) {
            puz[i] = puzzle.charAt(i);
        }
        for (int c : puz) {
            System.out.println(c);

        }
    }
} 
```

预期输出：`1 2 3 4 5`

实际输出：`49 50 51 52 53`

但是当我使用 puz[i] = puzzle.charAt(i)-"O"; 它工作正常..！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T13:03:54.593

您正在显示角色的 unicode 点值。相反，您可以使用

```
System.out.println(Character.getNumericValue(c)); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-20T13:05:13.573

那是因为一个字符的值与`int`用来表示它的值不同。声明`puz`为`char[]`应该解决问题并按预期打印数字。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-20T13:05:03.200

尝试

```
 char puz[] = new char[puzzle.length()];
    for (int i = 0; i < puzzle.length(); i++) {
        puz[i] = puzzle.charAt(i);
    }
    for (char c : puz) {
        System.out.println(c);

    } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-20T13:05:09.003

这是正常的。

您使用字符串“1”而不是数字 1。要获取数字，最好使用 Integer.paserInt(yourString); 然后你会得到你的号码。

例如：

```
 public static void main(String[] args){
        String test = "12345";
        fromPuzzleString(test);
    }

    public static void fromPuzzleString(String puzzle) {
        int puz[] = new int[puzzle.length()];
        for (int i = 0; i < puzzle.length(); i++) {
            puz[i] = Integer.parseInt(puzzle.charAt(i));
        }
        for (int c : puz) {
            System.out.println(c);

        }
    } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-20T13:05:20.943

您将获得的 char 转换为 int，因此 Java 将打印其整数表示。将结果存储为字符串数组，并循环遍历该数组以进行打印。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-20T13:24:40.313

`"charAt(i) is not returning what it is supposed to according to documentation"`

您不能将 a`char`放入`int`. 否则它将返回其**unicode**值。

返回的值`Real output: 49 50 51 52 53`是 unicode **[ASCII 字符代码](http://www.asciitable.com/index/asciifull.gif)**

这将解决您的问题：

```
public class StringToArray {

        public static void main(String[] args){
            String test = "12345";
            fromPuzzleString(test);
        }

        public static void fromPuzzleString(String puzzle) {
            char[] puz = new char[puzzle.length()];
            for (int i = 0; i < puzzle.length(); i++) {
                puz[i] = puzzle.charAt(i);
            }
            for (char c : puz) {
                System.out.println(c);

            }
        }
    } 
```

但是，为了节省内存，我建议您不要声明数组，立即显示值，如下所示：

```
public class StringToArray {

        public static void main(String[] args){
            String test = "12345";
            fromPuzzleString(test);
        }

        public static void fromPuzzleString(String puzzle) {
           for (int i = 0; i < puzzle.length(); i++) {
                System.out.println(puzzle.charAt(i));
            }
        }
    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-20T13:08:16.443

您隐式转换`char`为`int`char '1' 不等于 1，您可以将它们转换为 char，如下所示：

```
 System.out.println((char)c); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-20T13:11:19.040

您正在使用 int 数组，因此它会打印 ascii 值。您可以执行以下操作：

```
public static void fromPuzzleString(String puzzle) {    
    for (int i = 0; i < puzzle.length(); i++) {
        System.out.println( puzzle.charAt(i));
    }
} 
```

您不需要不必要地使用 2 个 for 循环和一个数组。

# macos - 如何让 iTunes 在连接到 iPhone 时自动播放 iPhone 播放列表

> ID：15524323
> 
> 赞同：-1
> 
> 时间：2013-03-20T13:02:43.363
> 
> 标签：macos, applet, applescript, itunes, automated-deploy

我有一边听音乐一边工作/学习的习惯。由于我在工作时连接的 Mac 没有我想要的所有歌曲，我通常通过 iTunes 从 iPhone 播放列表选项收听歌曲。

为此，每次我将 iPhone 连接到计算机时，iTunes 都会检测到它，然后我必须手动转到应用程序中的“iPhone”按钮，然后选择“在我的 iPhone 上”，然后选择播放列表，然后播放歌曲。

反正有自动化这个过程吗？我正在寻找的是，一旦我连接我的 iPhone，iTunes 应该会自动打开我 iPhone 内的播放列表，并开始随机播放一首歌曲。

我试过用 Automator 自动化它。但这似乎不起作用。我在 AppleScript 中做错了 ::

```
tell application "iTunes"
    play playlist named "Sasha" of source of type iPhone
end tell 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T13:02:43.363

哈 ！！我想到了 ！！然后我创建了一个小程序，它可以使用 AppleScript 为我做这件事。

然后，我在下面的博客上发布了相同的步骤/代码。这是链接::

[代码说明 :: 如何在 Mac 上自动开始播放 iOS 设备中的歌曲](http://techtalktone.wordpress.com/2013/03/20/start-playing-songs-from-your-ios-playlist-on-itunes-automatically/)

和相同的代码::

```
tell application "iTunes"

    set theCurrentPlaylist to view of front browser window
    set myiPhone to some source whose kind is iPod
    set mainPhonePlaylist to playlist "Sasha" of myiPhone
    set the view of the front browser window to mainPhonePlaylist
    set EQ enabled to true

    play playlist named "Sasha" of myiPhone
    set myRandomSong to random number from 1 to count of tracks of (get view of front window)
    play track myRandomSong of mainPhonePlaylist

end tell 
```

# visual-studio-2010 - 使用 Visual Studio 2012 和 Visual Studio 2010 生成的二进制文件的实际区别是什么？

> ID：15524329
> 
> 赞同：0
> 
> 时间：2013-03-20T13:02:53.660
> 
> 标签：visual-studio-2010, visual-studio, visual-studio-2012

我认为使用 VS2012 制作的二进制文件更好，使用更新的系统调用，使用 64 位架构特定命令等，但我不知道这是否真的如此。任何人都可以详细说明差异吗？

注意：我问的原因是因为 apachelounge 提供了两者的构建，我被告知如果 VS2012 更好，我应该用那个 apache 构建我们的软件。

# c# - C# 如果值为 =

> ID：15524332
> 
> 赞同：0
> 
> 时间：2013-03-20T13:03:06.653
> 
> 标签：c#, if-statement, windows-mobile, .net-2.0, smart-device

我正在从 Windows 移动智能设备检索 OEM 编号，并试图弄清楚如何在`if`语句中使用返回值。

下面是我用来返回值的代码。我想确保 OEM 编号始终为 86.09.0008，如果不是，我希望它告诉我。

```
class oem
{
    const string OEM_VERSION = "OEMVersion";
    private const int SPI_GETOEMINFO = 258;
    private const int MAX_OEM_NAME_LENGTH = 128;
    private const int WCHAR_SIZE = 2;

    [DllImport("coreDLL.dll")]
    public static extern int SystemParametersInfo(int uiAction, int uiParam, string pBuf, int fWinIni);

    [DllImport("CAD.dll")]
    public static extern int CAD_GetOemVersionNumber(ref System.UInt16 lpwMajor, ref System.UInt16 lpwMinor);

    public string getOEMVersion()
    {
        System.UInt16 nMajor = 0;
        System.UInt16 nMinor = 0;
        uint nBuild = 0;

        int status = CAD_GetOemVersionNumber(ref nMajor, ref nMinor);

        if (((System.Convert.ToBoolean(status))))
        {
            string sMajor = String.Format("{0:00}", nMajor); //in 2-digits
            string sMinor = String.Format("{0:00}", nMinor); //in 2-digits
            string sBuild = String.Format("{0:0000}", nBuild); //in 4-digits

            return (sMajor + "." + sMinor + "." + sBuild);
        }
        else // failed
        {
            return ("00.00.0000");
        } 
```

我从我的主要表单中调用它，如下所示：

```
label1.Text = oemver.getOEMVersion(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T13:09:01.827

if 语句需要一个布尔值。在您的情况下，您应该将所需的值与获得的值进行比较

```
if(status == 86.09.0009)//... 
```

请注意双 '==' 这是一个检查相等性的运算符。将此与执行分配的单个“=”进行对比。

另请注意，`int`不允许小数。考虑到这个数字有两位小数，我相信你需要把它作为一个字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T13:07:09.237

好吧，在你的“主要”中做这样的事情：

```
string myString = getOEMVersion();
if(myString == "86.09.0009")
{//Whatever you're willing to do
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T13:07:36.957

如果我理解你的问题，你应该这样做：

```
oem someOem = new oem();
if (oem.getOEMVersion() == "86.09.0009") {
     // ok
} else {
     // fail
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T13:12:25.440

我不确定你的意思，但如果我理解你的问题，你想在 if 语句中使用该`GetOEMVersion`方法的结果。

```
string OEMVersion = getOEMVersion();
if(OEMVersion == "86.09.0009")
{
   // Do something
}
else
{
   // fail
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-16T22:14:06.167

你失踪了：

```
[DllImport("CAD.dll")]
public static extern int CAD_GetOemBuildNumber(ref uint lpdwBuild);

int build = CAD_GetOemBuildNumber(ref nBuild); 
```

得到构建。

# c++ - 求解系统（矩形全打包 (RFP) 格式）

> ID：15524336
> 
> 赞同：0
> 
> 时间：2013-03-20T13:03:20.710
> 
> 标签：c++, system, lapack

我正在使用 RFP 格式进行矩阵存储并尝试求解方程组。然而，结果是错误的。

我明白了

```
b = { 5.5, 10, 8.5} 
```

但是，我希望得到：

```
b = { 2.875, 4.75, 3.5} 
```

我不明白，我在哪里犯了错误。只需简单地使用标准函数：分解然后求解分解矩阵。

```
#include "mkl.h"
#include "mkl_lapacke.h"
#include <math.h>
#include <iostream>
using namespace std;
#define NI 3
#define NJ 1

int main(int argc, char* argv[])
{

  double a[NI][NI];
  double b[NI][NJ];

  a[0][0] = 2;    a[0][1] = -1;    a[0][2] = 0;
  a[1][0] = 0;    a[1][1] = 2;    a[1][2] = -1;
  a[2][0] = 0;    a[2][1] = 0;    a[2][2] = 2;

  b[0][0] = 1;
  b[0][1] = 6;
  b[0][2] = 7;

  cout << "A1 = \n";
  for(int i = 0; i < NI; i++) {
     for(int j = 0; j < NI; j++) {
        cout << a[i][j] << "\t";
     }
     cout << "\n";
  }
  cout << "\n";

  cout << "B1 = \n";
  for(int i = 0; i < NI; i++) {
     for(int j = 0; j < NJ; j++) {
        cout << b[i][j] << "\t";
     }
     cout << "\n";
  }
  cout << "\n";

  char transr = 'N';
  char uplo = 'U';
  lapack_int n = NI;
  lapack_int lda = NI; //LDA is used to define the distance in memory between elements of two consecutive columns which have the same row index.
  double * arf = new double[ n * ( n + 1 ) / 2 ];
  lapack_int info = -1; 
```

将一般矩阵转换为 RFP 格式

```
 info = LAPACKE_dtrttf(LAPACK_ROW_MAJOR, transr, uplo, n, *a, lda, arf);
  //lapack_int LAPACKE_<?>trttf( int matrix_order, char transr, char uplo, lapack_int n, const <datatype>* a, lapack_int lda, <datatype>* arf );
  cout << "LAPACKE_dtrttf = " << info << "\n";

  cout << "Rectangular full packed: \n";
  //cout.setf(std::ios::scientific);
  for(int i = 0; i < NI; i++) {
     for(int j = 0; j < (NI+1)/2; j++) {
        cout << arf[i * (NI+1)/2 + j] << "\t";
        //cout << arf[i] << "\t";
     }
     cout << "\n";
  }
  cout << "\n"; 
```

分解矩阵

```
 int matrix_order = LAPACK_ROW_MAJOR;
  transr = 'N';
  uplo = 'U';
  n = NI;

  info = LAPACKE_dpftrf( matrix_order, transr, uplo, n, arf );
  //lapack_int LAPACKE_<?>pftrf( int matrix_order, char transr, char uplo, lapack_int n, <datatype>* a );
  cout << "INFO LAPACKE_dpftrf = " << info << "\n";
  cout << "Factorized matrix: " << endl;

  for(int i = 0; i < NI; i++) {
     for(int j = 0; j < (NI+1)/2; j++) {
        cout << arf[i*(NI+1)/2+j] << "\t";
     }
     cout << "\n";
  }
  cout << "\n"; 
```

求解系统

```
 lapack_int nrhs = NJ;
  lapack_int ldb = NJ;
  info =  LAPACKE_dpftrs( matrix_order, transr, uplo, n, nrhs, arf, &b[0][0], ldb );
  //lapack_int LAPACKE_<?>pftrs( int matrix_order, char transr, char uplo, lapack_int n, lapack_int nrhs, const <datatype>* a, <datatype>* b, lapack_int ldb );
  cout << "INFO LAPACKE_dpftrs = " << info << "\n"; 
```

结果

```
cout << "Solved = \n";
  for(int i = 0; i < NI; i++) {
     for(int j = 0; j < NJ; j++) {
        cout << b[i][j] << "\t";
     }
     cout << "\n";
  }
  cout << "\n";
   delete [] arf;

   char ch;
   cin.get(ch);

   return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:01:25.993

您确定 NJ 的值对于以下内容是否正确：

```
b[NI][NJ];
b[0][0] = 1;
b[0][1] = 6;
b[0][2] = 7; 
```

其中 NI = 3 和 NJ = 1...

我认为您将行的值与列错误放置。如果是问题所在，那么您可能想知道为什么它没有给出任何错误，这又是一个已经存在的问题： [Accessing an array out of bounds 没有错误，为什么？](https://stackoverflow.com/questions/1239938/c-accesses-an-array-out-of-bounds-gives-no-error-why)

# c# - C# 中的 SQL Server 间谍

> ID：15524340
> 
> 赞同：2
> 
> 时间：2013-03-20T13:03:31.667
> 
> 标签：c#, sql-server, transactions, sql-server-2012

我有一个带有 SQL Server 2012 数据库的 C# Winforms .NET 4.0 应用程序。我有两个数据库连接。一个到安全数据库，一个到应用程序数据库。是否有开源 .NET 库或其他库可以让您实时捕获和显示通过给定数据库连接发送的所有事务。

想法是，当应用程序打开时，我将能够显示正在发送到数据库的所有正在进行的事务（SQL 语句）的对话框。

我在 MSDN 上找到[了这个](http://msdn.microsoft.com/en-us/library/ms162182.aspx)，但想知道是否还有其他内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T13:21:50.710

以下是如何使用 SQL 存储过程的说明：[http ://technet.microsoft.com/en-us/library/cc293613.aspx](http://technet.microsoft.com/en-us/library/cc293613.aspx)

基本上，您需要使用（并且显然要熟悉以下文档）存储过程：sp_trace_create、sp_trace_setevent、sp_trace_setfilter、sp_trace_setstatus 和 sp_trace_getdata。它们显然都可以从 C# 调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T13:11:24.910

这可以通过使用[Express Profiler](https://expressprofiler.codeplex.com/)来完成。虽然这是一个*工具*，但也有可用的源代码，它可以帮助您将此功能构建到您自己的工具中。

# c# - 使用 numericUpDowns 和 windows 窗体选择时间长度

> ID：15524346
> 
> 赞同：1
> 
> 时间：2013-03-20T13:03:47.693
> 
> 标签：c#, winforms

我正在构建一个自动点击器应用程序，它可以让鼠标在设定的时间间隔内点击。

![在此处输入图像描述](../Images/687596bb52f4678571f96085a4caa64c.png)

注意间隔配置区域。我试图编写一些自动简化输入时间的逻辑。分钟框上升到 60，秒框上升到 60，毫秒框上升到 1000。我设置了一个类来处理该逻辑，但这可能不是正确的方法（我是在编程方面还是新手）。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;

namespace AutoClicker {
    public static class TotalTime {
        public static int Interval(NumericUpDown m_, NumericUpDown s_, NumericUpDown ms_) {
            int m = (int)m_.Value;
            int s = (int)s_.Value;
            int ms = (int)ms_.Value;
            int total = 0;

            total = total + (m * 60000);
            total = total + (s * 1000);
            total = total + ms;

            return total;
        }

        public static void ChangeLogic(NumericUpDown m_, NumericUpDown s_, NumericUpDown ms_) {
            int interval = Interval(m_, s_, ms_);

            if (ms_.Value == 1000)
            {
                ms_.Value = 500;
                s_.UpButton();
                ms_.Value = 0;
            }

            if (s_.Value == 60 && m_.Value < 60)
            {
                if (ms_.Value == 0)
                {
                    ms_.Value = 1;
                    s_.Value = 0;
                    m_.UpButton();
                    ms_.Value = 0;
                }
                else
                {
                    s_.Value = 0;
                    m_.UpButton();
                    if (ms_.Value == 1)
                        ms_.DownButton();
                }
            }

            if (ms_.Value == -1)
            {
                ms_.Value = 999;
                s_.DownButton();
            }

            if (s_.Value == -1 & m_.Value > 0)
            {
                s_.Value = 59;
                m_.DownButton();
                if (ms_.Value == 1)
                    ms_.DownButton();
            }
        }
    }
} 
```

每次更新任何框中的值时都会调用 ChangeLogic 方法。

选择逻辑中有很多错误。例如，当按住向上按钮几秒钟时，程序会崩溃。如果秒 = 59 和分钟 = 0，并且按下秒向上按钮，则会出现警告“你的时间不能少于 250 毫秒”，并且分钟被调整为 2。

我真的很困惑。谁能帮我？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T15:48:43.690

因此，看起来您的意图是拥有它，这样当您增加毫秒时，它会在达到 1000 时累积到秒，然后当您的秒数达到 60 时，它会累积到您的分钟，等等。

以下是我将如何完成此任务。首先将所有 NUD 设置为最大值 99999。然后使用如下代码：

（注意`intervalUpdating`变量的使用。这将使您可以按住向上按钮，并且在`intervalChanged()`方法执行时它不会尝试再次执行它。）

```
 private void nudSeconds_ValueChanged(object sender, EventArgs e)
    {
        intervalChanged();
    }

    private void nudMilliseconds_ValueChanged(object sender, EventArgs e)
    {
        intervalChanged();
    }

    private bool intervalUpdating = false;
    private void intervalChanged()
    {
        if (intervalUpdating)
        {
            return;
        }

        intervalUpdating = true;

        if (nudMilliseconds.Value >= 1000)
        {
            var val = (int)nudMilliseconds.Value / 1000;
            nudSeconds.Value += val;
            nudMilliseconds.Value = (nudMilliseconds.Value - (val * 1000));
        }

        if (nudSeconds.Value >= 60)
        {
            var val = (int)nudSeconds.Value / 60;
            nudMinutes.Value += val;
            nudSeconds.Value = (nudSeconds.Value - (val * 60));
        }

        intervalUpdating = false;
    } 
```

# c# - 如何加速这些代码，用于从两个网格中查找匹配记录两者都有 190000+ 记录

> ID：15524349
> 
> 赞同：0
> 
> 时间：2013-03-20T13:03:59.790
> 
> 标签：c#

假设我有两个网格，每个网格包含 190000+ 条记录，名为 grid_A 和 grid_B，

对于 grid_A 中的每条记录，我想查找 grid_B 中是否有相同的记录。

grid_A 和 grid_B 具有相同的列，在我的情况下，它们的列是

col1 col2 col3 col4

他们的数据类型可能是

字符串数据时间双

到目前为止，我所做的是：

对于grid_A中的每一行，遍历grid_B中的所有行，并比较四个列

逐个。

代码显示如下：

```
 //loop grid_A
        foreach (UltraGridRow row in ultraGrid1.Rows)
        {
             List<object> lo = new List<object>();

             for (int i=0;i<4;i++)              //add col's value to ListA
             {
                  lo.Add(row.Cells[i].Value);
             }
             //loop grid_B
             foreach (UltraGridRow rowDist in ultraGrid2.Rows)
             {
                  List<object> loDist = new List<object>();
                  for (int ii=0;ii<4;ii++)              //add col's value to ListB
                  {
                       loDist.Add(rowDist.Cells[ii].Value);
                  }

                  if (CompareList(lo, loDist) == true)     //compare two List
                  {
                     break;
                  }
             }
        }

        //  the function compare two List
        private bool CompareList(List<object> a, List<object> b)
        {
             //Assert a.count==b.count
             for (int i=0;i<a.Count;i++)
             {
                   if (!CompareObject(a[i], b[i]))
                        return false;
             }

             return true;
        }

        //
        private bool CompareObject(object oa, object ob)
        {

              // object is string
              if (oa.GetType() == typeof(System.String))
              {
                    try
                    {
                            string strOb = Convert.ToString(ob);
                            if (oa.ToString() == strOb)
                                return true;
                            else
                                return false;
                     }
                     catch
                    {
                           return false;
                    }
                }
               // object is datetime
               if (oa.GetType() == typeof(System.DateTime))
               {
                      try
                      {
                         DateTime dtOb = Convert.ToDateTime(ob);
                         if ((DateTime)oa == dtOb)
                            return true;
                         else
                            return false;

                      }
                      catch
                      {
                         return false;
                      }
               }
               //object is double
               if (oa.GetType() == typeof(System.Double))
               {
                    try
                    {
                         double ddOb = Convert.ToDouble(ob);
                         if ((double)oa == ddOb)
                            return true;
                         else
                             return false;

                     }
                    catch
                   {
                        return false;
                   }
              }

            return true;

        } 
```

我知道我的比较方法太笨了，实际上，每个循环循环花费 2.4 秒，即：190000 循环花费 130 小时，看起来很糟糕，我听说它可以使用哈希表来加速搜索性能，但我不知道如何使用它。无论如何，对于 grid_A 中的每条记录，搜索 grid_B 中的所有记录是不可接受的，所以任何帮助都是不胜感激的。

我的网格数据是从 excel 导入的，所以它没有 sql 数据库或表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T13:42:18.800

所以你想找出grid_B中是否有与grid_A中相同的记录。`foreach`您可以更改算法，而不是进行嵌套（导致 O(n^2) 复杂性，这是巨大的）。

如果您首先迭代`grid_B`并计算每行的哈希值（例如，通过将数据组合成字符串形式，然后获取哈希值，但可能有更好的方法来生成哈希值）。如果您将这些散列作为键放入字典中，则值可以引用行`grid_B`或其他需要的值。
然后你可以迭代`grid_A`，计算行的哈希值并在字典中检查键是否存在。如果它存在 - 您有相同的行`grid_B`（例如，存储在字典中的值可能会引导您到该行）。如果它不存在 - 没有具有相同值的行。

这种方法会给你 O(2n) 的复杂性，通常简化为 O(n) - 我们总是对数据进行两次迭代。这是显着的改进，但代价是更高的内存消耗。
这种方法是否更快可能取决于网格中的记录数量，但鉴于您有 190k 记录 - 这应该更快（虽然我现在无法测试，但会在晚上尝试这样做）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T13:36:17.993

处理原始数据而不是通过数据网格，这样你就不会有超网格的开销，它会加快速度。

另一个想法是从每一行创建一个字符串并比较这两个字符串。例如，如果该行是 1,'text', true, 1/1/2001 那么您必须创建包含字符串 '1-text-true-1/1/2001' 的有序列表，这样您将获得更快的索引.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T13:33:44.687

如果您可以预先对两个网格进行排序，则可以大大减少比较次数。您将为每个网格（`row_A`for `grid_A`，`row_B`for `grid_B`）维护一个当前行索引，并逐步浏览网格。对于每个比较（伪代码）：

```
if (grid_A[row_A] < grid_B[row_B])
    row_A++;

if (grid_A[row_A] == grid_B[row_B])
{
    //    matching record
    row_A++;
    row_B++;
}

if (grid_A[row_A] > grid_B[row_B])
    row_B++; 
```

如果您无法对网格进行排序，那么我不知道有一种方法可以避免您当前的算法。您只需要尽可能优化各个行的比较。

# android - 从我的应用程序共享 jpeg 图像

> ID：15524352
> 
> 赞同：1
> 
> 时间：2013-03-20T13:04:06.060
> 
> 标签：android, image, share, whatsapp

我在从我的可绘制文件夹中共享图像时遇到问题。在 Whatsapp 上工作正常，但如果我尝试在 Line 上分享，我会收到他们的提示错误。如果我尝试通过电子邮件共享，则该文件会附在没有扩展名的情况下。任何人都可以帮助我吗？

这是我的代码：

```
...
     Intent sendIntent = new Intent(android.content.Intent.ACTION_SEND);
        sendIntent.setType("image/jpeg");
        sendIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, "Photo");
        sendIntent.putExtra(android.content.Intent.EXTRA_TEXT, "Photo");

        Uri foto = Uri.parse("android.resource://my.package.name/drawable/image"+subject);
        sendIntent.putExtra(Intent.EXTRA_STREAM, foto);
        this.cordova.startActivityForResult(this, sendIntent, 0);
... 
```

# xaml - XAML 主题画笔 - 动态切换，光标不会改变

> ID：15524353
> 
> 赞同：0
> 
> 时间：2013-03-20T13:04:06.530
> 
> 标签：xaml, textbox, windows-runtime

首先，我发现这个关于主题画笔的页面非常有用：http: [//metro.excastle.com/xaml-system-brushes](http://metro.excastle.com/xaml-system-brushes)

所以粗略地说，在 WinRT/XAML 启动时，我正在为样式表中的文本框设置主题画笔： Foreground = TextBoxDisabledForegroundThemeBrush Background = TextBoxDisabledBackgroundThemeBrush

在运行时使文本框显示为：白色边框、透明背景和灰色文本。我希望它可以使它透明，白色边框和白色文本。

在我的 Tapped 事件中，我将文本框更改为： Foreground = TextBoxButtonPressedForegroundThemeBrush Background = TextBoxButtonPressedForegroundThemeBrush

应该是黑色背景，白色文字和白色边框。这看起来是对的，但是光标又回来了，你看不到它。

第一个问题是，我是否有权更改我的文本颜色？我想更改文本框，因此一旦选择它，它就会保持更改颜色。我认为这是正确的。但我不确定是否应该设置前景或字体样式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T13:36:57.763

不幸的是，您无法更改插入符号的颜色，因此如果您希望 TextBox 可编辑 - 您应该保持背景为白色或浅色。否则，最好使用 VisualStateManager 控制控件在其各种状态下的外观，并且使用 Blend 最容易操作。

# networking - UDP数据包排序

> ID：15524355
> 
> 赞同：0
> 
> 时间：2013-03-20T13:04:07.653
> 
> 标签：networking, udp

当直接连接两个网络接口适配器（仅使用以太网电缆，中间没有任何网络设备）时，假设从一个 NIC 发送的所有 UDP 数据包将被另一个 NIC 以相同的顺序接收是否正确？（我知道丢包仍然是一个问题，但对于这个特定的问题，我想专注于订购）。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T00:37:18.113

你不能用 UDP 假设任何东西：传递、不重复、序列……唯一的例外是，如果你确实收到了一个数据报，它是完整的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-20T13:11:57.393

理论上没有，因为 OSI 级别的 UDP 实现是在第 4 层，即传输层，而 UDP 的底层可能会决定以不同的方式对数据包进行排序。请记住，网络层（第 3 层）负责数据的分段和重组。

然而，实际上，根据实现的不同，假设序列保持不变是非常安全的。

# mysql - Mysql：将整数值分配给字符串值并获取平均值

> ID：15524356
> 
> 赞同：4
> 
> 时间：2013-03-20T13:04:06.697
> 
> 标签：mysql

我正在使用mysql数据库。我有一个名为反馈的表，其中有一个字段**howIsTraining** ，它可能有五个值中的一个值“优秀、非常好、好、差和可悲”

我想编写查询，它将以下列格式从所有数据中给出该值的平均值

我想给每个值一个整数值

优秀 = 5 非常好 = 4 好 = 3 差 = 2 可怜 = 1

如果说我在表Excellent，Very Good，Excellent，Good，Poor中有五条记录，这意味着**（（5 + 4 + 5 + 3 + 2）/ 5）= 3.8**

**最后它会给出3.8的结果**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T13:13:54.097

```
select avg(case howIsTraining
             when 'Excellent' then 5
             when 'Very Good' then 4
             when 'Good' then 3
             when 'Poor' then 2
             when 'Pathetic' then 1
             else null
           end) as avg_rating
from feedback 
```

SQLFiddle：[http ://sqlfiddle.com/#!2/14a06/1](http://sqlfiddle.com/#!2/14a06/1)

但是你**真的**应该考虑一个更好的设计（例如 Jack 所示）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T13:10:57.240

假设您有另一个保存分数的表：

```
scores
----------+------
term      | value
----------+------
Excellent | 5
Very Good | 4
... 
```

然后你会有这样的查询：

```
SELECT AVG(scores.value)
FROM feedback
INNER JOIN scores ON term = howIsTraining; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T13:07:02.230

在数据库中使用值从 1 到 5 的整数列不是更有意义。然后在表示数据时将数字转换为字符串？

在极端情况下，添加额外的整数列并通过 UPDATE... SETgrade=1 填充正确的等级值，其中 hoIsTraing='Pathetic'。

# java - 用户修改的复杂决策系统 - Java

> ID：15524359
> 
> 赞同：2
> 
> 时间：2013-03-20T13:04:26.193
> 
> 标签：java, antlr, drools, business-rules

我有一个问题，我想在我现有的技术上寻求替代方案，因为编程的功能会很复杂并且会提供给用户，所以它应该尽可能简单，因为它可以在前端。我需要基于 Java 的技术。

**我需要做的：** 我有一个包含大量数据的基本结构。这些数据大多写得很好，比如整数、日期、布尔值等，所以可以很容易地比较。

我需要使用可以由许多来源（如内部业务流程和政府法律）定义和更改的批量需求来建模决策。

所以我想给用户一个脚本能力（他们中的大多数都有大学学位，所以有些复杂是可以的）。
**让我们看一个简化的例子。**
令 A 为具有以下内容的结构。
A.budget - 整数
A.bankRelatedDebt - 整数
A.privateRelatedDebt - 整数
A.deadLine - 日期
A.hasPermissionFromGovernment - 布尔
A.hasProblematicContracts - 布尔

我需要定义规则来决定规则是否成立，所以我需要布尔值。
规则 1：预算超过 100 万欧元
规则 2：没有问题文件或获得政府许可 规则
3：截止日期不在一个月范围内。
规则 4：总债务（本地 + 私人）不超过 100.000 欧元

这些规则可以在其他情况下进行硬编码，但这必须是超级动态的并且基于给定的数据。

我们有流**口水**和**antlr**的选项，如果你能提到的话，我需要其他选择。或者，如果您可以提及要避免的技术，那也很有帮助并受到欢迎，所以我可以避免它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T13:46:56.660

就像[策略模式](http://en.wikipedia.org/wiki/Strategy_pattern)一样，所有不同的规则都是应用于上下文（A）的不同算法，可以在运行时选择算法。

为其添加过滤器链设计模式，以便您可以同时选择不同的算法（规则）。

[Roolie](http://roolie.sourceforge.net/)是一个非常简单的 Java 规则引擎，可能会对您有所帮助。正如 Roolie 所说：

*Roolie 是一个非常简单的 Java 规则引擎（非 JSR 94），它使用您在 Java 中创建的规则。只需创建您的基本规则，为每个规则实现单一的“通过”方法，然后将它们链接到一个 XML 文件中以创建更复杂的规则。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T13:48:51.213

我会投票反对流口水，因为我有糟糕的经历，但有些人喜欢它。
我会提出一种已经集成在 java 中的语言：JavaScript。为什么？

*   足够简单并且可以很好地访问java bean：您可以使用budget.deadLine而不是budget.getDealLine()
*   你有很多地方可以检查信息
*   您可以添加简单的功能，使其更易于使用

但如果你选择 JavaScript、Python、Drools、ANTLR，请记住：

*   用户没有像 SVN/GIT 这样的版本控制系统，所以这取决于你。
*   给他们一个工具（网页或其他），自动保存他们编写的每个脚本的每个版本。
*   给他们一种在不损坏任何东西的情况下测试他们所写内容的方法。
*   为他们提供工具来回滚他们所做的任何更改。
*   一旦他们在执行代码之前提交代码，就尽可能多地进行静态测试。
*   语法高亮会让他们更开心。

请记住：他们会以您意想不到的方式使用该工具，而您最终会编写（或重写）大部分脚本。没有大学学位意味着您可以相信他们了解他们在做什么。（甚至没有CS！）

因此，如果您可以使系统的动态性降低，对您有利

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T13:42:12.187

***物有所值。***我也很想做这样一个专家系统，所以请忍受我的漫无边际。首先，当您问要避免什么时，有一些负面因素。

有很多陷阱。

“编程”是由用户完成的，可能没有用于恢复的版本控制系统，可能没有暂存系统但在生产系统中工作。考虑明智地扩展通用库规则测试。没有单元测试？

然后是用户接受。特别是有一个竞争对手，Excel 编程，你必须取代它。使用人工可选的文本块、图表生成报告。

您的无规则规则仍然缺乏生命力：系统可以帮助提供可供选择的类别： 规则 1 - 对货币资源的限制。很好的建议是“您是否也想限制有限的资源？（a）规则1，（b）......。

还有什么是产品？有什么优势？目标是什么？报告、计算方案（假设条件、计算的公差）。

我当然会首先按照上述思路编写技术文档，然后*搜索***工具**- 正如您似乎正在做的那样。Drools 太基础了。用于 DSL 的 ANTLR 我觉得有风险。

 ****工具***

**数据挖掘**似乎是您正在搜索的关键字。

JVM 编程语言 Scala（不容易获得）对于 DSL 解析非常有效。许多函数式语言更容易一些，并且也提供脚本（Java 脚本 API）。

一个 web 项目怎么样，也许使用 jetty 作为嵌入式 web 服务器。所以你可以应用 HTML 和 JavaScript。HTML5？

富客户端平台（eclipse 或 NetBeans）需要快速开发的经验。对于漂亮的图形，也许是 JavaFX（为时过早）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-20T13:43:41.820

使用[Groovy](http://docs.codehaus.org/display/GROOVY/Writing+Domain-Specific+Languages)或[Scala](http://www.scala-lang.org/node/1403)开发满足您需求的 DSL 。

我们使用[CodeMirror](http://codemirror.net/)在网页中提供语法高亮。使用 Groovy 非常适合我们。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-20T13:26:31.540

如果您在数据库中有记录，则可以使用 SQL 语法选择匹配的记录。

例如：

```
SELECT * FROM data
    WHERE budget > 100000
      AND privatCredits < 50000 
```*

# c# - 请帮我找到正确的命名空间组合，以便我可以在 C# 中查询 XML

> ID：15524363
> 
> 赞同：2
> 
> 时间：2013-03-20T13:04:37.010
> 
> 标签：c#, xml, xml-parsing, xml-namespaces

我有一个需要编辑的 xml 文件，它看起来像：

```
<?xml version="1.0" encoding="UTF-8"?>
<PaketniUvozObrazaca xmlns="urn:PaketniUvozObrazaca_V1_0.xsd">
  <PodaciOPoslodavcu>
    <JIBPoslodavca>XXXXXXXXXX</JIBPoslodavca>
    <NazivPoslodavca>Comapyn</NazivPoslodavca>
    <BrojZahtjeva>1307</BrojZahtjeva>
    <DatumPodnosenja>2013-03-19</DatumPodnosenja>
  </PodaciOPoslodavcu>
  <Obrazac1022>
    <Dio1PodaciOPoslodavcuIPoreznomObvezniku>
      <JIBJMBPoslodavca>XXXXXXXXXX</JIBJMBPoslodavca>
      <Naziv>Compyny</Naziv>
      <AdresaSjedista>Adress </AdresaSjedista>
      <JMBZaposlenika>XXXXXXX</JMBZaposlenika>
      <ImeIPrezime>ad</ImeIPrezime>
      <AdresaPrebivalista>City</AdresaPrebivalista>
      <PoreznaGodina>2012</PoreznaGodina>
    </Dio1PodaciOPoslodavcuIPoreznomObvezniku>
</Obrazac1022>
</PaketniUvozObrazaca> 
```

如果我想从这个文件中查询（选择节点）我应该如何引用命名空间？

```
static void Main(string[] args)
        {
            XmlDocument gip = new XmlDocument();
            gip.Load("C:\\vs2013tests\\adoGipko\\gip-2012.xml");

            XmlNamespaceManager nspm = new XmlNamespaceManager(gip.NameTable);
            nspm.AddNamespace("urn", "PaketniUvozObrazaca_V1_0");

            foreach (XmlNode uposlnik in gip.SelectNodes("//PaketniUvozObrazaca_V1_0/Obrazac1022", nspm))
            {
                Console.WriteLine(uposlnik.SelectSingleNode("Dio1PodaciOPoslodavcuIPoreznomObvezniku/ImeIPrezime",nspm).InnerText);

            }

            Console.ReadKey();
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T13:10:49.137

您需要为命名空间命名并完全按照 XML 中的方式指定 uri。您使用哪个名称并不重要：

```
nspm.AddNamespace("d", "urn:PaketniUvozObrazaca_V1_0.xsd"); 
```

您现在必须为所有标签使用该名称：

```
foreach (XmlNode uposlnik in gip.SelectNodes("//d:PaketniUvozObrazaca/"+
                                             "d:Obrazac1022", nspm))
{
    Console.WriteLine(
        uposlnik.SelectSingleNode("d:Dio1PodaciOPoslodavcuIPoreznomObvezniku/"+
                                  "d:ImeIPrezime", nspm).InnerText);
} 
```

此外，我修复了查询中的根标记。您使用`PaketniUvozObrazaca_V1_0`的是命名空间的一部分。您需要使用`PaketniUvozObrazaca`，这是根标签。

# tablesorter - jquery tablesorter：更新标题

> ID：15524368
> 
> 赞同：1
> 
> 时间：2013-03-20T13:04:52.880
> 
> 标签：tablesorter

表头将根据动态 ajax 更新而改变。这样做时使用：

```
$('table thead').html(headers); 
```

然后使用以下方法重新初始化表：

```
$("table").tablesorter({ theme : 'blue', sortList: [[2,1],[0,0]] }); 
```

从标题中删除了排序功能。如何更新标头并重新初始化它以便正确处理这些标头？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T13:29:50.843

我认为在您的情况下，您可能需要在重新初始化之前销毁 tablesorter 的实例：

```
// initialisation
var initOptions = {
  theme: 'blue',
  sortList: [[2,1],[0,0]]
};
$("table").tablesorter(initOptions); 
```

然后在ajax更新后，使用：

```
// Remove tablesorter and all classes
$("table").trigger("destroy", [false, function(){
  // callback after the destroy method
  $('table thead').html('<tr>' + headers + '</tr>');
  $("table").tablesorter(initOptions);
}]); 
```

在这个例子中，确保`initOptions`变量与初始化代码在同一个闭包中，或者只是复制它；）

# c - 为什么允许使用 memcpy 使用指向它的指针覆盖 const 变量？

> ID：15524376
> 
> 赞同：3
> 
> 时间：2013-03-20T13:05:08.500
> 
> 标签：c, constants, memcpy

为什么允许使用 memcpy 的指针更改 const 变量？

这段代码：

```
const int i=5;
int j = 0;
memcpy(&j, &i, sizeof(int));
printf("Source: i = %d, dest: j = %d\n", i,j);

j = 100;
memcpy(&i, &j, sizeof(int));
printf("Source: j = %d, dest: i = %d\n", j,i);
return 0; 
```

编译时只有一个警告：

> 警告：传递 'memcpy' 的参数 1 会丢弃指针目标类型中的 'const' 限定符 [默认启用]

但确实运行得很好，并更改了 const 变量的值。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-20T13:06:31.357

尝试修改 const 限定变量的值会导致 C 中的未定义行为。您不应依赖结果，因为任何事情都可能发生。

> ### C11 (n1570)，§ 6.7.3 类型限定符
> 
> 如果尝试通过使用具有非 const 限定类型的左值来修改使用 const 限定类型定义的对象，则行为未定义。

没有什么可以强制编译器生成*诊断消息*。

事实上，这个限定符对机器代码没有太大的影响。一个 const 限定的变量通常不驻留在只读数据段中（显然，不在您的实现中，尽管它在另一个实现中可能不同）。

编译器无法轻易判断给定函数中指针指向的内容。使用一些执行[指针分析的](http://en.wikipedia.org/wiki/Pointer_analysis)静态分析工具是可能的。但是，实施起来很困难，把它放在标准中是愚蠢的。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-20T13:07:44.443

问题问*为什么*。原因如下：

这是允许的，因为一旦你有一个指向内存地址的指针，语言就不知道它指向什么。它可以是变量、结构的一部分、堆或堆栈，或任何东西。所以它不能阻止你写信给它。直接内存访问总是不安全的，如果有其他方法可以避免。

`const`停止您使用赋值（或增量等）修改 a 的值`const`。这种突变是唯一可以保证您无法在 const 上执行的操作。

另一种看待这一点的方式是静态上下文（即在编译时）和运行时上下文的划分。例如，当您编译一段可能对变量进行赋值的代码时，该语言可能会说“这是不允许的，它是 const”，这是一个编译错误。在此之后，代码被编译成可执行文件，并且它是 a 的事实`const`丢失了。变量声明（和语言的其余部分）被编写为编译器的输入。编译后，代码不相关。你可以在你的编译器中做一个逻辑证明，说`const`s 没有改变。编译后的程序运行起来，我们在编译时就知道我们已经创建了一个不违反规则的程序。

当您引入指针时，您就有了可以在运行时定义的行为。你写的代码现在已经无关紧要了，你可以[尝试]做你想做的事。指针是类型化的（允许指针算术，将指针末尾的内存解释为特定类型）意味着该语言为您提供了一些帮助，但它不能阻止您做任何事情。它不能保证，因为您可以将指针指向任何地方。编译器无法阻止您在运行时使用使用指针的代码破坏规则。

也就是说，指针是我们获得动态行为和数据结构的方式，并且对于除了最琐碎的代码之外的所有代码都是必需的。

（上面有很多警告，即代码启发式，更复杂的静态分析总线对于香草编译器来说是普遍正确的。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T13:47:25.710

原因是因为 C 语言允许将任何指针类型隐式转换为 type `void*`。之所以这样设计，是因为 void 指针用于泛型编程。

因此，即使在这种情况下程序调用了未定义的行为，C 编译器也不允许阻止您的代码编译。但是，一旦您隐式尝试抛弃 const 限定符，好的编译器就会发出警告。

C++ 比 C 具有“更强的类型化”，这意味着它需要显式转换指针类型才能编译此代码。这是 C++ 实际修复的 C 语言缺陷之一。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-20T13:33:31.913

虽然“正式”它实际上是未定义的，但它已经非常定义了 - 您将更改 const 变量的值。这就提出了一个问题，为什么它是 const 开始的。

# if-statement - 如何在 if else 循环中关闭表格标签

> ID：15524387
> 
> 赞同：0
> 
> 时间：2013-03-20T13:05:29.560
> 
> 标签：if-statement, razor, html-table

我是剃须刀的新手，面临一个问题。我尝试了一些我找到的解决方案，但它们都不起作用。

下面给出的是我想在部分视图中实现的代码片段。我正在打开`<table>`但想在 if 循环中有条件地关闭它，如图所示。

我从中获取结果的方法，它在我的模型中填充一个列表属性，然后在局部视图中返回模型。

首先，我检查类型是否为“H”，然后表标签应该打开，并且类型为“H”的整行将被识别为标题。如果 type 下一个条目显示“D”，则表示它的数据存在于“H”类型中。如果详细信息中下一个元素的类型也是“H”，则关闭表格标签。因此，从第一个标识的“H”到下一个标识的“H”，该表应该存在，并且对于下一个“H”类型，应该启动一个新表。

```
@if (Model.Details.Count() > 0)
{
    for (int count = 0; count < Model.Details.Count; count++)
    {
        //for heading
        if (Model.Details[count].Type == "H") 
        {
          <table>
                <thead>
                    <tr>
                        @if (Model.Details[count].Column1 != null)
                        {
                            <th>
                                @Model.Details[count].Column1.ToString();
                            </th> 
                        }
                        @if (Model.Details[count].Column2 != null)
                        {
                            <th>
                                @Model.Details[count].Column2.ToString();
                            </th> 
                        }
                        @if (Model.Details[count].Column3 != null)
                        {
                            <th>
                                @Model.Details[count].Column3.ToString();
                            </th> 
                        }
                    </tr>
                </thead>
                @if (count < Model.Details.Count)
                {
                    if (Model.Details[count + 1].Type == "H")
                    {
                        </table>
                    }
                }
        }
        //for data under each heading
        @if (Model.Details[count].Type == "D")
        {
            <tr>
                @if (Model.Details[count].Column1 != null)
                {
                    <td>
                         @Model.Details[count].Column1.ToString();
                    </td> 
                }
                @if (Model.Details[count].Column2 != null)
                {
                    <td>
                        @Model.Details[count].Column2.ToString();
                    </td> 
                }
                @if (Model.Details[count].Column3 != null)
                {
                    <td>
                        @Model.Details[count].Column3.ToString();
                    </td> 
                }
            </tr>
        }
    }
} 
```

在打开的表格标签上，错误说

> ““表”元素未关闭。所有元素必须是自关闭的或具有匹配的结束标记。

在标签结束时，错误说

> “遇到没有匹配开始标签的结束标签“表”。你的开始/结束标签是否正确平衡？

我想在if条件下关闭``标签。我怎样才能做到这一点？请帮忙..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T13:07:59.507

为什么不将表格标签移到剃刀代码之外

```
<table>
@if (Model.Details.Count() > 0)
        {
           for (int count = 0; count < Model.Details.Count; count++)
           {
             if (Model.Details[count].Type == "H") 
                {
                        <thead>
                            <tr>
                                @if (Model.Details[count].Column1 != null)
                                {
                                    <th>
                                        @Model.Details[count].Column1.ToString();
                                    </th> 
                                }
                                @if (Model.RetriveImpactDetails[count].Column2 != null)
                                {
                                    <th>
                                        @Model.Details[count].Column2.ToString();
                                    </th> 
                                }
                                @if (Model.Details[count].Column3 != null)
                                {
                                    <th>
                                        @Model.Details[count].Column3.ToString();
                                    </th> 
                                }
                            </tr>
                        </thead>
                }
           }
       }
 </table> 
```

这将消除检查它是否是模型的最终迭代的需要（无需动态关闭表）。这确实意味着，如果您的 Count 的值为 0，则 table 标记仍会被写入（并关闭），这可能是理想的，也可能不是理想的。

# c - 打印通过指针 C 发送的字符串

> ID：15524390
> 
> 赞同：0
> 
> 时间：2013-03-20T13:05:32.513
> 
> 标签：c, dynamic, vector, struct, printf

我有这个结构

```
Cheltuieli * creeaza(int numar_apartament,int suma,char * tipul){
    Cheltuieli * cheltuiala=malloc(sizeof(Cheltuieli));
    cheltuiala->numar_apartament=numar_apartament;
    cheltuiala->suma=suma;
    cheltuiala->tipul=tipul;
    return cheltuiala;
} 
```

它应该“像一个班级”，我有这个方法

```
char* get_tipul(Cheltuieli c){
    char * tip_de_returnat=strdup(c.tipul);
    return tip_de_returnat;
} 
```

这应该是tipul的“吸气剂”

我有一个通用容器

```
typedef void* Elements;

typedef struct{
    Elements * Element;
    int lungimea;
    int capacitatea;

} vector_dinamic; 
```

存储元素并像动态向量一样，我的元素是 Cheltuieli

问题就在这里，我有这个函数应该打印动态向量的所有元素，它正确打印“numar_apartament”和“suma”，但在“tipul”我得到一个颠倒的“？”

```
void afiseaza(controller * ctr){
    int i;
    Cheltuieli *c;
    for (i=0;i<ctr->repo->v->lungimea;i++)
    {  
        c=ctr->repo->v->Element[i];
        printf("Numar apartament: %d\n",get_numar_apartament(*c));
        printf("Suma: %d\n",get_suma(*c));
        printf("Tipul: %s\n",get_tipul(*c));

    } 
```

有人可以帮我吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T13:14:51.593

“tipul”来自“Cheltuieli * creeaza(int numar_apartament,int suma,char * tipul)”。当你调用 creeaza() 时，你传递的“tipul”是什么？例如，如果您将函数本地 char 数组传递给 creeaza，当您执行 printf 时，本地 char 数组可能已经被释放。所以你应该检查你作为“tupil”传递给 creeaza() 的字符串类型。

顺便说一下，对于这个函数“char* get_tipul(Cheltuieli c)”，你最好把它改成：

```
char* get_tipul(const Cheltuieli *c) 
```

这样可以避免创建 c 的临时副本。

# solr - 如何让 synonyms.txt 在不同语言的 solr 中使用

> ID：15524391
> 
> 赞同：-2
> 
> 时间：2013-03-20T13:05:36.757
> 
> 标签：solr, wordnet, synonym

你知道我是否可以获得 SOLR 支持的所有语言的 synonyms.txt 文件吗？谢谢你的帮助。在我们使用为每种支持的语言提供同义词词典的 Verity 之前，我们可能希望迁移到 Solr/Lucene。我知道我们可以提供一个自定义的同义词列表，这不是我想要的。我正在寻找一种方法来为 Lucene 支持的每种语言提供一个默认的同义词词典。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T11:47:27.920

没有为所有语言提供“开箱即用”的同义词资源。至少对于某些人来说，你有 wordnet（它是免费的） - 请参阅 solr wiki 了解 wordnet 的使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T16:32:24.207

任何语言的同义词列表都将非常特定于与给定索引项集相关的用例。因此，拥有这些文件的任何预构建语言特定版本是不切实际的。即使是 Solr 发行版附带的 synonyms.txt，其构建也仅足以展示如何构建同义词的示例。

# python - Python - Scipy：ode 模块：启用求解器的 step 选项的问题

> ID：15524392
> 
> 赞同：6
> 
> 时间：2013-03-20T13:05:56.383
> 
> 标签：python, scipy, numerical-methods, ode

当我调用它时，我想存储求解器本身采取的不同集成步骤：

```
solver1.integrate(t_end) 
```

所以我做了一个while循环并启用了step选项，将其值设置为`True`：

```
while solver1.successful() and solver1.t < t0+dt:
    solver1.integrate(t_end,step=True)
    time.append(solver1.t) 
```

然后我绘制`y`，整合的结果，我的问题来了。我有出现在定位区域的不稳定性：

![y 启用求解器的 step 选项](../Images/dbd6e1dd027e02af7248d1a2e8d80285.png)

我认为这是因为循环或类似的原因，所以我检查了结果，删除了`step`：

```
while solver1.successful() and solver1.t < t0+dt:
    solver1.integrate(t_end) 
```

和惊喜......我有正确的结果：

![y 禁用求解器的 step 选项](../Images/8b7b779040b43e06074f91c069f82fd6.png)

这是一个非常奇怪的情况......如果你们中的某个人能帮助我解决这个问题，我将不胜感激。

编辑 ：

要设置求解器，我这样做：

```
solver1 = ode(y_dot,jac).set_integrator('vode',with_jacobian=True)
solver1.set_initial_value(x0,t0) 
```

我使用存储结果`.append()`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-17T16:01:04.647

当你设置时，`step=True`你间接地给`vode._integrator.runner`（一个 Fortran 子例程）一个使用指令`itask=2`，默认是`itask=1`. 您可以获得有关此操作的更多详细信息`runner`：

```
r._integrator.runner? 
```

在 SciPy 0.12.0 文档中，您不会找到关于不同`itask=1`or发生了什么的解释`itask=2`，[但您可以在此处找到它](http://www.radford.edu/~thompson/vodef90web/Documentation/Original_Prologue.txt)：

```
ITASK  = An index specifying the task to be performed.
!          Input only. ITASK has the following values and meanings.
!          1  means normal computation of output values of y(t) at
!             t = TOUT(by overshooting and interpolating).
!          2  means take one step only and return.
!          3  means stop at the first internal mesh point at or
!             beyond t = TOUT and return.
!          4  means normal computation of output values of y(t) at
!             t = TOUT but without overshooting t = TCRIT.
!             TCRIT must be input as RUSER(1). TCRIT may be equal to
!             or beyond TOUT, but not behind it in the direction of
!             integration. This option is useful if the problem
!             has a singularity at or beyond t = TCRIT.
!          5  means take one step, without passing TCRIT, and return.
!             TCRIT must be input as RUSER(1). 
```

# events - Google Analytics 事件在开发者控制台中有效，但在页面中无效

> ID：15524395
> 
> 赞同：1
> 
> 时间：2013-03-20T13:06:06.100
> 
> 标签：events, google-analytics, event-tracking

将商品添加到购物车后，我的产品页面中有此代码：

```
<script type="text/javascript>
//<![CDATA[

    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ga);
    })();

    var _gaq = _gaq || [];
    _gaq.push(['_setCustomVar', 1, 'Page Type', 'Product', 3])
_gaq.push(['_setCustomVar', 2, 'Product Name', 'Gold Bracelet', 3]);
_gaq.push(['_trackEvent', 'Product Page', 'Added To Basket', 'Gold Bracelet', , 0]); // this is the line that isn't working.

        _gaq.push(['_setAccount', 'UA-XXXXXXX-1']);
        _gaq.push(['_trackPageview']);

//]]>
</script> 
```

似乎跟踪了综合浏览量，这两个自定义变量，但不是 _trackEvent。就像我在标题中所说的那样，如果我将此代码复制并粘贴到 Chrome Dev Console 中，事件就会正常显示。我在返回 _trackPageview 的代码中添加了一个 alert() 并且它起作用了，所以 JS 肯定会被解析。

知道我做错了什么吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T14:29:35.340

如果`opt_value`参数不是整数（或未定义），则不会记录事件。

您希望此事件影响跳出率计算吗？如果是这样，则`opt_noninteraction`可以不使用，因为默认值为`false`：

```
 _gaq.push(['_trackEvent', 'Product Page', 'Added To Basket', 'Bodysuit...']); 
```

如果您不希望事件影响跳出率，请使用：

```
_gaq.push(['_trackEvent', 'Product Page', 'Added To Basket', 'Bodysuit...', undefined, true]); 
```

* * *

我在第一次查看您的代码时错过了这一点 - 因为`_trackEvent`是 before `_setAccount`，它发送的数据被记录到默认帐户（类似于“UA-XXXXX-X”）。

将`_trackEvent`呼叫移动到 之后的任何位置`_setAccount`。

此外，由于您在同一个代码块中都有这两者`_trackEvent`，`_trackPageview`因此您需要确保该`opt_noninteraction`参数为真。

# ruby - 如何使用 Ruby 将 Haryāna 转换为 Haryana

> ID：15524397
> 
> 赞同：1
> 
> 时间：2013-03-20T13:06:09.503
> 
> 标签：ruby, encoding, utf-8, ascii

我从 api 获取这个值，它以某种方式在值中发送了一些特殊的 unicode 字符。我想将其转换为普通的 ascii 字符串。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T13:12:03.203

使用[`unidecoder`](https://rubygems.org/gems/unidecoder)宝石：

```
require 'unidecoder'
"Haryāna".to_ascii # => "Haryana" 
```

# google-plus - Google Plus 登录 API 无法正常工作

> ID：15524398
> 
> 赞同：2
> 
> 时间：2013-03-20T13:06:09.593
> 
> 标签：google-plus

这是使用[**`demo`**](https://google-developers.appspot.com/+/demos/signin_demo_49872349874373)的 Google 加号登录按钮**`OAuth 2.0`**。

我想问一下，我提取了客户端 ID 并在我的代码中使用它进行身份验证。按照规则它不应该工作，因为我没有正确的谷歌 API 访问的 JavaScript 源（我假设它在那里是服务器而不是本地主机）。如果 Google 将其设置为 localhost，那么我的身份验证应该可以工作。我想知道它为什么有效？我只有他们的客户 ID 就是这样。

# c# - 使用反射从程序集加载中获取类型

> ID：15524399
> 
> 赞同：0
> 
> 时间：2013-03-20T13:06:11.583
> 
> 标签：c#, reflection

project1 有class1 和interface1。Class1 实现了 interface1。我有另一个项目将使用 interface1 测试这个 class1 方法。现在要注意的是我必须动态加载 project1.dll 并使用接口方法来调用 class1 方法。为此，我使用反射加载 project1.dll。现在，我从接口获取 methodInfo，在调用此方法之前，我应该创建一个将调用该方法的类的实例。要使用 activator.createInstance 创建类的实例，我需要知道构造函数参数。现在，这些构造函数参数是自定义类型。正如我之前所说，我必须动态加载 dll。那么有没有办法从程序集负载中获取类型？或任何其他方法来实现上述想法？下面是我的代码。

```
Assembly assembly = Assembly.LoadFrom(@"D:\Project1.dll");
Type[] typeArray = assembly.GetTypes();
object obj;

//First create the instance of the class
foreach (Type type in typeArray)
{

    if (type.Name == "Class1")
    {

        Type[] types = new Type[4];

        //I am not able to get the below customParams from the loaded assembly.
        //Is there a way to do this. Can this be done without adding reference?
        types[0] = typeof(CustompParam1);
        types[1] = typeof(CustompParam2);
        types[2] = typeof(CustompParam3);
        types[3] = typeof(CustompParam4);

        obj = Activator.CreateInstance(types);
    }
}

//use the instance of the class to invoke the method from the interface
foreach (Type type in typeArray)
{
    if (type.Name == "Interface1")
    {
        MethodInfo[] mInfo = type.GetMethods();
        foreach (MethodInfo mi in mInfo)
        {
            mi.Invoke(obj, null);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T13:10:41.257

您可以像创建类实例一样获取构造函数参数的实例

通过类型名称找到它们，调用 Activator.CreateInstance 为参数类型，然后将它们放入您原始类的 Activator.CreateInstance 中。

# asp.net-mvc-4 - jquery mobile中的MVC RedirectToAction用法

> ID：15524400
> 
> 赞同：0
> 
> 时间：2013-03-20T13:06:14.843
> 
> 标签：asp.net-mvc-4

事情就是这样。我有一个如下所示的控制器

```
public class StoreController : Controller
{
      public ActionResult Index()
      {
           return View();
      }

      public ActionResult Create()
      {
           return View();
      }

      [HttpPost]
      public ActionResult Create(string id, string name)
      {
           //... some WCF logic here.

           return RedirectToAction("Index");
      }
} 
```

我的问题是 post Create 方法。当它调用 RedirectToAction() 时，我在 Web 浏览器中看到索引页面，但 URL 仍然显示`http://.../Store/Create`，如果我按下浏览器刷新按钮，那么我得到的不是索引视图，而是创建视图。没有使用 AJAX。只是正常`Html.BeginForm("Create", "Store", FormMethod.Post)`。
我的路线配置如下：

```
 routes.MapRoute(
            name: "Default",
            url: "{controller}/{action}/{id}",
            defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional } 
```

有任何想法吗？0_0

**编辑 1**

也许我应该指出我使用 jquery mobile

**编辑 2**

我的看法，以防万一。

```
@model WebApp.Models.StoreCreateModel
@{
    ViewBag.Title = "Create";
}

@using (Html.BeginForm("Create", "Store", FormMethod.Post))
{
    @Html.ValidationSummary(true)

    <fieldset>

        <legend>Store</legend>

        @Html.Partial("_StoreEditFields", this.Model)

        <p>
            <input type="submit" value="Create" />
            <a href="@Url.Action("Index")" data-role="button">Back to list</a>
        </p>

    </fieldset>
}

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
} 
```

# highcharts - Highcharts 导出 - index-utf8-encode.php 文件在哪里

> ID：15524403
> 
> 赞同：0
> 
> 时间：2013-03-20T13:06:23.513
> 
> 标签：highcharts, highstock

我在许多项目中使用 highcharts。当我配置导出选项时，我总是使用“index-utf8-encode.php”，因为它支持 UTF-8 以外的其他字符集（例如：ISO-8859-1）。

```
 exporting: {
    url: 'http://export.highcharts.com/index-utf8-encode.php'
} 
```

不幸的是，自从我尝试将图形导出到图像文件的几周或几个月（不确定具体时间）以来，我从 tomcat 服务器收到 404 错误。

请参阅（并尝试导出为图像文件）：http: [//jsfiddle.net/yWLwx/126/](http://jsfiddle.net/yWLwx/126/)

那么，有没有人知道 index-utf8-encode.php 文件在哪里或者为什么它不再工作了？

非常感谢您的宝贵时间！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T15:23:45.140

请熟悉我们的 php 导出服务器[https://github.com/highslide-software/highcharts.com/tree/master/exporting-server/php](https://github.com/highslide-software/highcharts.com/tree/master/exporting-server/php)

它是由更改导出服务器引起的。

# iphone - 如何添加到现有的 Nsmutabledictionary？

> ID：15524407
> 
> 赞同：0
> 
> 时间：2013-03-20T13:06:29.090
> 
> 标签：iphone, ios, nsmutabledictionary

大家好，我有一个可变的 Nsdcitionary。我有一个函数，它使用这个 dict = [json mutableCopy]; 设置 Nsdcitionary 内容。现在我正在尝试重新调用该函数，但我需要保留旧值。怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T13:45:58.987

尝试这个

```
NSMutableDictionary *dict1=[[NSMutableDictionary alloc]init];
[dict1 setObject:@"ravi" forKey:@"Name"];

NSMutableDictionary *dict2=[[NSMutableDictionary alloc]init];
[dict2 setObject:@"22" forKey:@"Age"];

[dict1 addEntriesFromDictionary:dict2];

NSLog(@"%@",dict1);
//it will print 

//    Age = 22;
 //   Name = ravi; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T13:19:19.513

我想这会有所帮助

```
[dict1 addEntriesFromDictionary:dict2]; 
```

# java - 更改 JButton 名称并使用新名称。在方法中

> ID：15524416
> 
> 赞同：1
> 
> 时间：2013-03-20T13:06:41.330
> 
> 标签：java, swing, jbutton, local-variables

我有一个 Swing Java 应用程序，上面有一个 114 按钮

我已经通过循环创建了按钮

```
 Container pane = getContentPane();
 JPanel panel = new JPanel();
 JButton b; 
 for(int i=1;i<115;i++)

  {

   b = new JButton(""+i);
   panel.add(b);
    } 
```

所以所有的按钮都取名为 b ！！！

这就是这里的问题我想给每个按钮一个不同的名称来为每个按钮执行不同的操作。通过 ActionListener 类

```
 JButton.addActionListener(new ActionListener() {

        public void actionPerformed(ActionEvent e)
        {

        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T13:09:10.787

不，您的按钮没有名称`b`。`b`您在 for 循环中使用局部变量。例如，您可以创建一组按钮并将您的`JButton`实例存储在那里。稍后，您可以遍历该数组以更改按钮文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T18:15:34.923

也许您可以将按钮添加到地图中，使用您想要调用的按钮作为键。然后你可以通过调用 Map 上的 get() 来访问按钮，无论你想调用什么按钮。

# scala - Scala 闭包文件名

> ID：15524418
> 
> 赞同：4
> 
> 时间：2013-03-20T13:06:44.997
> 
> 标签：scala, compiler-construction

由于编译器使用 Scala 2.9.2 在 Scala 类中为我的一个闭包提供的文件名长度，我遇到了问题

CurrencyInitializer$$anonfun$com$gottex$gottware$server$startup$initializers$impl$currency$CurrencyInitializer$$updateDepositEquivalentBonds$1.class

这个文件名的问题是我正在上传一个文件夹，其中包含我通过 Linux 服务器通过 SSH gui 编译的所有类，但这失败了。

```
private def updateDepositEquivalentBonds(currency: Currency) {

    val depositEquivalentBonds = gottwareDataSource.space.readAllWithCurrency(classOf[DepositEquivalentBondImpl], currency)
    for (depositEquivalentBond <- depositEquivalentBonds) depositEquivalentBond.updateFromDeposit(gottwareDataSource.space)
    if (depositEquivalentBonds.length > 0) {
      gottwareDataSource.space.writeMultiple(depositEquivalentBonds, Lease.FOREVER,
        UpdateModifiers.UPDATE_OR_WRITE | UpdateModifiers.NO_RETURN_VALUE)
      gottwareDataSource.space.writeMultiple(AskBidSpread.newInstances(depositEquivalentBonds.toArray[SecurityImpl]), Lease.FOREVER, UpdateModifiers.UPDATE_OR_WRITE | UpdateModifiers
        .NO_RETURN_VALUE)
}
  } 
```

令人惊讶的是，这是产生长文件名的代码。我可以在编译器上做些什么来防止这种情况发生吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T13:50:48.363

`max-classfile-name`在 scala 编译器调用上设置参数以缩短文件名。

在 POM 中，要获取不超过 144 个字符（Crypt FS 大小限制）的文件名，配置看起来像

```
 <plugin>
     <groupId>org.scala-tools</groupId>
     <artifactId>maven-scala-plugin</artifactId>
     <configuration>
         <scalaVersion>2.9.2</scalaVersion>
         <args>
              <arg>-Xmax-classfile-name</arg>
              <arg>144</arg>
         </args>
     </configuration>
 </plugin> 
```

编译器源设置参考[链接](https://github.com/scala/scala/blob/master/src/compiler/scala/tools/nsc/settings/ScalaSettings.scala#L85)（将过时）

# php - 使用 cakephp 获取名称以显示在下拉列表中

> ID：15524419
> 
> 赞同：2
> 
> 时间：2013-03-20T13:06:49.637
> 
> 标签：php, cakephp, cakephp-model, cakephp-2.2

我想在下拉列表中显示我们所有项目负责人的姓名。

项目负责人只是在公司工作的部分员工。

这是我的表：

```
project_leaders
,----,----------------,
| id | hr_employee_id |
|----|----------------|
| 1  |  18            |
'----'----------------'

projects
,----,------,-------------------,
| id | name | project_leader_id |
|----|------|-------------------|
| 1  | cake |         1         |
'----'------'-------------------'

hr_employees
,----,------,---------,
| id | name | surname |
|----|------|---------|
| 18 | joe  | dirt    |
'----'------'---------' 
```

我的 ProjectsController 看起来像这样：

```
public function add() {
    if ($this->request->is('post')) {
        $this->Project->create();
        if ($this->Project->save($this->request->data)) {
            $this->_sendProjectRequestEmail($this->Project->getLastInsertID() );
            $this->Session->setFlash(__('The project has been saved'));
            $this->redirect(array('action' => 'index'));
        } else {
            $this->Session->setFlash(__('The project could not be saved. Please, try again.'));
        }
    }
    $this->set('projectLeaders',$this->Project->ProjectLeader->find('list');
} 
```

这仅返回项目负责人的 id，而不是姓名和姓氏。因此，它返回 1 而不是 Joe Dirt。

我试过 $this->Project->ProjectLeader->HrEmployee->find('list') 但这列出了所有员工。

我也尝试过指定字段，但它返回一个未知字段错误。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-20T22:00:59.263

```
$this->set('projectLeaders',$this->Project->ProjectLeader->find('list')); 
```

这将仅列出表中的记录，`project_leaders`并且很可能，因为表本身不包含名称/标题字段（蛋糕会自动拾取为`displayField`），如下所示：

```
array(
    1 => 1
) 
```

## 使用适当的查找

要获得有意义的项目负责人列表，您需要确保获得一个连接`project_leaders`，`hr_employees`其中一种方法是使用可包含[行为](http://book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html)并简单地指定要在列表中使用的字段：

```
$projectLeaders = $this->Project->ProjectLeader->find('list', array(
    'contain' => array(
        'HrEmployee'
    ),
    'fields' => array(
        'ProjectLeader.id',
        'HrEmployee.name',
    )
));
$this->set(compact('projectLeaders')); 
```

## 您的数据库结构是否适合您的需求？

拥有一个相当于说“此用户是管理员”的表可能不是最好的主意 - 如果该表`project_leaders`（仅）是您`hr_employees`表上的一个布尔字段并`project_leader_id`指向，则更容易避免数据问题，并为您提供更简单的查询`hr_employee`表，而*不是*其他一些数据抽象。

当然我不知道你的整个模式，很可能有一个很好的理由来拥有一个单独的`project_leaders`表。

## 或者 - 非规范化

如果您将名称字段添加到`project_leaders`- 您不需要加入即可知道项目负责人的姓名或任何时髦：

```
alter table project_leaders add name varchar(255) after id;
update project_leaders set name = (select name from hr_employees where hr_employees.id = hr_employee_id); 
```

通过这种方式，您可以通过一次查询/联接知道谁是相关项目负责人，而无需进行两次联接来获取员工的姓名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T13:39:15.147

您忘记定义 displayField：

默认情况是

```
public $displayField = 'name'; 
```

并且仅对于此表蛋糕中现有的“名称”/“标题”字段，它会自动知道您的下拉列表应该作为标签文本获得什么。要使用其他表的字段，请确保传入`fields`find() 选项：

```
'fields' => array('Project.id', 'Project.name'); 
```

等等，Cake 就会知道：第一个是键，第二个是显示值。

如果您需要下拉列表中的组合/自定义字段/文本，请使用 virtualFields

```
public $virtualFields = array(
    'full_name' => 'CONCAT(...)'
); 
```

然后将 displayField 设置为此`full_name`虚拟字段，或者`fields`如上所述使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T15:59:49.567

您可以在 ProjectLeader 模型中添加一个虚拟字段：

```
public $virtualFields = array (
'name' => 'SELECT name FROM hr_employees AS Employee WHERE Employee.id = ProjectLeader.employee_id'
); 
```

此外，将此虚拟字段添加为您的 displayField：

```
public $displayField = 'name'; 
```

# perl - 检索两个子例程之间的哈希

> ID：15524420
> 
> 赞同：0
> 
> 时间：2013-03-20T13:06:51.610
> 
> 标签：perl, hash, arguments, subroutine

当我在函数的参数中传递它时，我会检索我的哈希表。在我的情况下，function1 返回我的哈希表，然后我将我的哈希表作为参数传递给我的 function2，在我的 function2 中，我将检索我的哈希表以浏览它。

```
sub function1{
    my code;
    return %hash;
}

sub function2{
    my %hash=$_[0];
    my code browse my hash;
}

my %hash = function1();
function2(%hash); 
```

我有以下错误：哈希分配中的奇数个元素

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T13:11:43.680

您只是将列表的第一个元素拉入散列（即大小均匀的列表，因此发出警告）。试试这个：

```
sub function1{
    my code;
    return %hash;
}

sub function2{
    my (%hash) = @_;
    my code browse my hash;
}

my %hash = function1();
function2(%hash); 
```

你可以用 hashref 得到你想要的：

```
sub function1{
    my code;
    return \%hash;
}

sub function2{
    my $hash_ref=$_[0];
    my code browse my hash;
}

my $hash_ref = function1();
function2($hash_ref); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T13:16:27.527

另一种方法是通过引用传递哈希：

```
sub function1{
    # code here
    return \%hash;
}

sub function2{
    my $hashref = $_[0];

    #code to use the hash:
    foreach (keys %$hashref) { etc... }
}

my $hashref = function1();
function2($hashref);

my %realhash;
function2(\%realhash); 
```

当您想要传递多个哈希或数组时，通过引用传递是必要的。对于大量数据，它也更有效，因为它不会复制。但是，如果函数修改了通过引用传递的哈希，则原始的也会被修改。

# php - php：如何识别页面的“包含”

> ID：15524421
> 
> 赞同：0
> 
> 时间：2013-03-20T13:06:54.003
> 
> 标签：php, include

我在 pageA.php 中，代码如下

```
if (DOWNLOAD_ENABLED == 'true') include 'pageB.php'; 
```

是否有可能在 pageB.php 中知道 pageA.php 包含它？我需要根据包含它的页面在 pageB.php 中执行某些操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T13:09:13.110

最简单的方法是将它保存在一个 var 中。

```
$my_page = 'pageA.php';

if (DOWNLOAD_ENABLED == 'true') include 'pageB.php'; 
```

可以正常访问`$my_page`。`pageB.php`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T13:09:15.903

像这样的东西会起作用：

**pageA.php**

```
define('AUTHORISED_TO_INCLUDE', 1);
if (DOWNLOAD_ENABLED == 'true') include 'pageB.php'; 
```

**pageB.php**

```
if(!defined('AUTHORISED_TO_INCLUDE')) // Do something, e.g. die(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T13:10:37.473

在 pageA 中声明的任何变量都可以在 pageB 中访问，这不是很好的做法，您应该使用面向对象或至少为此使用函数，但如果您绝对必须这样做，您可以执行以下操作：

```
// on pageA.php
if (DOWNLOAD_ENABLED == 'true') {
  $includedFrom = "pageA";
  include 'pageB.php';
}

// on pageB.php
switch($includedFrom) {
  case "pageA":
    // do stuff
    break;
} 
```

# python - Python 有没有相当于 __init__() 的关机

> ID：15524424
> 
> 赞同：3
> 
> 时间：2013-03-20T13:07:01.657
> 
> 标签：python

我`__init__()`在 Python 类中经常使用函数来在第一次调用类时进行设置。

脚本关闭时是否调用了等效函数？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T13:07:56.480

[`__del__`](http://docs.python.org/2/reference/datamodel.html#object.__del__)当对象完成时，有一个方法会被调用。但是，python 不保证`__del__`在解释器退出时会在对象上实际调用它。

有几种选择：

*   [atexit.register](http://docs.python.org/2/library/atexit.html#atexit.register) -- 在这里您可以注册一个函数以在脚本终止时运行
*   创建一个[上下文管理器](http://docs.python.org/2/reference/datamodel.html#with-statement-context-managers)并使用该`with`语句。然后`__exit__`，当您离开上下文时，将无条件地调用您的上下文管理器的方法。

* * *

如果您做了一些非常讨厌的事情来退出程序（例如，以某种方式导致分段错误或通过退出`os._exit`） ，这两个选项都会失败

# c# - C# 事件和类层次结构

> ID：15524425
> 
> 赞同：0
> 
> 时间：2013-03-20T13:07:01.687
> 
> 标签：c#, events, class-hierarchy

我有以下课程

儿童班：

```
public class ChildClass
{
   ...
   private void EventHandler(...);
   ...
} 
```

父类：

```
public class ParentClass
{
   ...
   ChildClass child;
   ...
   private void EventHandler(...);
   ...
} 
```

他们都在同一个事件上有一个事件处理程序。

问题是这些处理程序将以什么顺序被调用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T13:09:26.803

**重要的提示**

Servy 非常正确地[指出](https://stackoverflow.com/questions/15524425/c-sharp-events-and-class-hierachy/15524477?noredirect=1#comment21992037_15524477)，我们不能排除相关事件由第三方拥有并且它自己实现[访问器](http://msdn.microsoft.com/en-us/library/bb882534.aspx)的可能性。如果是这样的话，那么所有的赌注都被取消了。

下面的原始答案默默地假设我们正在谈论一个沼泽标准，完全无趣的事件实现。

**原始答案**

事件是通过[委托](http://msdn.microsoft.com/en-us/library/ms173171.aspx)实现的。

来自[MSDN](http://msdn.microsoft.com/en-us/library/ms173175.aspx)：

> 委托对象的一个​​有用属性是可以使用 + 运算符将多个对象分配给一个委托实例。多播委托包含已分配委托的列表。当调用多播委托时，它会按顺序调用列表中的委托。

因此，处理程序按照您将它们添加到事件的顺序被调用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-20T13:14:37.590

虽然 MSDN 文档明确指出多播委托按订阅顺序调用委托，但假定订阅顺序是确定的，即您处于单线程环境中。

如果不是这种情况，您最好定义两个事件：一个 BeforeEventOccurs 事件和一个 AfterEventOccurs 事件。即使在多线程环境中，这也可以让您对订单进行确定性控制。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-20T13:09:07.863

订阅代表的顺序，尽管由于规范中的任何地方（我知道）都没有正确指出这是预期的行为，特别是，依赖这样的顺序可能是愚蠢的，因为它可能会随着每个实现而改变。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-20T13:10:53.037

它将按照它们注册的顺序被调用。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-20T13:09:53.193

根据[这个问题](https://stackoverflow.com/questions/264196/how-can-i-control-the-order-in-which-event-handlers-are-fired)，事件处理程序按照订阅事件的顺序被调用。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-20T13:10:10.247

来自*[代表](http://msdn.microsoft.com/en-us/library/ms173171.aspx)*

> 委托用于将方法作为参数传递给其他方法。事件处理程序只不过是**通过委托调用**的方法。您创建一个自定义方法，当某个事件发生时，诸如 windows 控件之类的类可以调用您的方法。

从*[如何：组合代表（组播代表）](http://msdn.microsoft.com/en-us/library/ms173175.aspx)*页面；

> 委托对象的一个​​有用属性是可以使用 + 运算符将多个对象分配给一个委托实例。多播委托包含已分配委托的列表。**当调用多播委托时，它会按顺序**调用列表中的委托。

# iframe - 将鼠标悬停在网站的 href 查看屏幕截图上

> ID：15524430
> 
> 赞同：2
> 
> 时间：2013-03-20T13:07:15.577
> 
> 标签：iframe, hyperlink, hover, href, preview

我有一些像“[域](http://www.google.com)”这样的链接，当我将鼠标悬停在它上面时，我想有一个 url 链接的预览图像。像 iframe 这样的东西可能吗？有人可以帮我弄这个吗？

真诚的勒内，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T04:58:12.870

您可能正在寻找显示图像（domain.com 的缩略图）的鼠标。对于鼠标悬停，有许多脚本可用：搜索“javascript tooltip”（例如[jQuery 工具）。](http://jquerytools.org/demos/tooltip/any-html.html)

要获得“domain.com”的缩略图，您需要使用[URL2PNG](http://url2png.com/)或[Browshot](http://browshot.com/)等 Web 服务。

# ruby-on-rails - 如果活动管理员/rails 管理员无法规避批量分配，他们有什么用处？

> ID：15524432
> 
> 赞同：1
> 
> 时间：2013-03-20T13:07:29.313
> 
> 标签：ruby-on-rails, activeadmin

由于 user_id 受到保护，我无法创建具有活动管理员的 user_id 的对象。如果我将 user_id 排除在 attr_accessible 之外，则该对象不安全。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T22:26:25.873

ActiveAdmin 使用 InheritedResource，因此您可以`with_role`为每个控制器使用类方法，

检查[https://github.com/josevalim/inherited_resources/issues/151](https://github.com/josevalim/inherited_resources/issues/151)

默认设置所有尝试

```
# config/initializers/active_admin.rb
module ActiveAdmin
  class BaseController
    with_role :admin
  end
end 
```

顺便说一句，关于这个问题的好文章[http://ejholmes.github.com/2012/04/22/handling-mass-assignment-with-active-admin.html](http://ejholmes.github.com/2012/04/22/handling-mass-assignment-with-active-admin.html)

# ruby-on-rails - rails3，过滤器链因 :require_no_authentication 渲染或重定向而停止

> ID：15524436
> 
> 赞同：4
> 
> 时间：2013-03-20T13:07:33.450
> 
> 标签：ruby-on-rails, ruby, devise

我的设计有问题。当用户已经登录，然后单击登录链接时，什么也没有发生，但这里是我的终端中的输出：

```
Filter chain halted as :require_no_authentication rendered or redirected 
```

这发生在我要去的时候`Processing by SessionsController#new as HTML`

`after_sign_in_path`有什么办法，如果有登录用户，我怎么能告诉设计去？

这是我的 after_sign_in_path

```
def after_sign_in_path_for(resource)
    if session[:user_return_to]
      return_to = session[:user_return_to]
      session[:user_return_to] = nil
      return_to
    else
      redirect_path(resource)
    end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T14:36:33.870

```
def after_sign_in_path_for(resource)
    if (return_to = session[:user_return_to])
      session[:user_return_to] = nil
      return_to
      return
    else
      redirect_path(resource)
    end
end 
```

我不确定这是否有效，但也许可以使用 after_filter

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T13:33:03.803

也许您应该考虑在控制器之前添加一个过滤器？

```
prepend_before_filter :require_no_authentication, :only => [:action1, :action2] 
```

# file - 将批处理结果打印到文本文件？

> ID：15524443
> 
> 赞同：1
> 
> 时间：2013-03-20T13:07:48.910
> 
> 标签：file, batch-file, text, printing

我创建了一个批处理文件来查找我的外部 IP。

它运作良好。

这是代码。

```
 @echo off
>"%temp%\ip.vbs" echo Set objHTTP = CreateObject("MSXML2.XMLHTTP")
>>"%temp%\ip.vbs" echo Call objHTTP.Open("GET", "http://checkip.dyndns.org", False)
>>"%temp%\ip.vbs" echo objHTTP.Send()
>>"%temp%\ip.vbs" echo strHTML = objHTTP.ResponseText
>>"%temp%\ip.vbs" echo wscript.echo strHTML
for /f "tokens=7 delims=:<" %%a in ('cscript /nologo "%temp%\ip.vbs"') do set ip=%%a
echo %ip:~1% 
pause 
```

我想要的是将结果打印到名为“IPlog.txt”的文本文件中

每次我运行 bat 文件时，它都必须做同样的事情并将新结果打印到文本文件的下一行。所以请任何人都可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T13:34:39.650

请`pause`从您的代码中删除该命令并`batch-file`像这样运行

```
mybatch.bat >> IPlog.txt 
```

`IPLog.txt`每次运行此批处理文件时，这会将生成的 IP 地址附加到日志文件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T14:09:39.350

...或更改您的

```
echo %ip:~1% 
```

到

```
echo %ip:~1% >>IPlog.txt 
```

在没有额外的“>>IPlog.txt”的情况下运行你的批处理

# php - 如何为此数组编写 for 循环（品牌/型号/年份/引擎大小）

> ID：15524445
> 
> 赞同：1
> 
> 时间：2013-03-20T13:07:51.397
> 
> 标签：php, arrays

```
<?php

error_reporting(0);
$mmy = array(array("Chevrolet Truck", "C 1500 SERIES", "2005", "V8 5.7L (K)"),
    array("Nissan Pickup", "D21 PICKUP", "1993", "2.4 L"),
    array("TOYOTA CAMRY", "LE", "2001", "2.8L V6")
);

var_dump($mmy);

echo "<pre>";

echo "<h1>Data in 2-dimensional array Make/Model/Year/Engine</h1>";

echo "<ul>";
for ($row = 0; $row < 3; $row++) {
    echo "<li><b>The row number $row</b>";
    echo "<ul>";

    for ($make = 0; $make < 4; $make++) {
        echo "<li>" . $mmy[$row][$make] . "</li>";
    }
    for ($model = 1; $model < 4; $model++) {
        echo "<li>" . $mmy[$row][$make][$model] . "</li>";
    }
    for ($year = 2; $year < 4; $year++) {
        echo "<li>" . $mmy[$row][$make][$model][$year] . "</li>";
    }
    for ($eng = 3; $eng < 4; $eng++) {
        echo "<li>" . $mmy[$row][$make][$model][$year][$eng] . "</li>";
    }

    echo "</ul>";
    echo "</li>";
}
echo "</ul>";
?> 
```

在不抑制错误报告的情况下，我得到： [http ://dpaste.org/iy0rD/#L9](http://dpaste.org/iy0rD/#L9)

我不清楚偏移错误来自哪里。我不习惯用 PHP 编程。我必须编写一个导入 CSV 文件并显示结果的 PHP 应用程序。这只是整个计划的一部分。现在我已经静态定义了数组以用于测试目的。希望这个问题的格式正确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T13:37:02.547

错误来自`echo`s。PHP 报告您请求的对象（例如`$mmy[$row][$make]`）不存在。

循环结束后：

```
for ($make = 0; $make < 4; $make++) {
    echo "<li>" . $mmy[$row][$make] . "</li>";
} 
```

`$make = 4`，所以第一次通过下一个循环，PHP 试图访问`$mmy[0][4][1]`不存在的。以下循环存在相同的错误。

您可以将循环放在彼此内部，从而永远不会达到*索引*大于数组长度的地步，但是您仍然需要更改数组访问，因为您正在尝试使用多维查找但是你的数组只是二维的。或者，使用另[`implode()`](http://www.php.net/manual/en/function.implode.php)一种方法来输出数据。

```
echo "<pre>";
echo "<h1>Data in 2-dimensional array Make/Model/Year/Engine</h1>";

echo "<ul>";
for ($row = 0; $row < 3; $row++) {
    echo "<li><b>The row number $row</b>";
    echo "<ul><li>";

    echo implode("</li><li>", $mmy[$row]);

    echo "</li></ul>";
    echo "</li>";
}
echo "</ul>";
echo "</pre>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T13:18:30.370

尝试这个：

```
<?php
error_reporting(E_ALL);
$mmy = array(  array("Chevrolet Truck", "C 1500 SERIES", "2005","V8 5.7L (K)"),
                array("Nissan Pickup", "D21 PICKUP", "1993", "2.4 L"),
                array("TOYOTA CAMRY", "LE", "2001","2.8L V6")
            );

var_dump($mmy);

echo "<pre>";

echo "<h1>Data in 2-dimensional array Make/Model/Year/Engine</h1>";

echo "<ul>";
for ($row = 0; $row < 3; $row++) {
    echo "<li><b>The row number $row</b>";
    echo "<ul>";

for ($make = 0; $make < 4; $make++) {
    echo "<li>".$mmy[$row][$make]."</li>";
}
for ($model = 3; $model < 3; $model++) {
    echo "<li>".$mmy[$row][$make][$model]."</li>";
}
for ($year = 3; $year < 3; $year++) {
    echo "<li>".$mmy[$row][$make][$model][$year]."</li>";
}
for ($eng = 3; $eng < 3; $eng++) {
    echo "<li>".$mmy[$row][$make][$model][$year][$eng]."</li>";
}

echo "</ul>";
echo "</li>";
}
echo "</ul>";
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T13:21:10.823

假设我了解您要执行的操作，那么您迭代 $mmy 数组的方式是不正确的。通过这样定义：

```
$mmy = array(array("Chevrolet Truck", "C 1500 SERIES", "2005", "V8 5.7L (K)"),
    array("Nissan Pickup", "D21 PICKUP", "1993", "2.4 L"),
    array("TOYOTA CAMRY", "LE", "2001", "2.8L V6")
); 
```

您正在创建一个包含 3 个条目的数组：每个数组包含 4 个条目。这些存储在键 0-3 中。因此，要像您拥有的那样迭代您的数组，请执行以下操作：

```
for ($i = 0; $i < count($mmy); $i++) {
    $row = $mmy[$i];

    echo "<li><b>The row number $i</b>";
    echo "<ul>";

    for ($j = 0; $j < count($row); $j++) {
       echo "<li>" . $row[$j] . "</li>";
    }

    echo "</ul>";
} 
```

这将遍历外部行，生成一个 ul 标记，然后在内部将为内部数组中的每个元素生成一个 li 标记。

这里只需要一个内循环。外部循环将遍历 $mmy 中的所有顶级条目，而内部循环将遍历内部数组中的内容。

一个可能更好的解决方案是使用带有用户定义键的数组，如下所示：

```
$mmy = array(
    array('make' => "Chevrolet Truck", 'model' => "C 1500 SERIES", 'year' => "2005", 'engine' => "V8 5.7L (K)"),
    array('make' => "Nissan Pickup", 'model' => "D21 PICKUP", 'year' => "1993", 'engine' => "2.4 L"),
    array('make' => "TOYOTA CAMRY", 'model' => "LE", 'year' => "2001", 'engine' => "2.8L V6")
); 
```

通过像这样定义数组，您可以像这样轻松访问每个键的值：

```
$mmy[0]['make'];    // This returns Chevrolet Truck, for the first (0th) element of the array, and the 'make' key 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T13:21:46.973

以下是您可以使用的两个基本循环：

```
foreach($theArray as $row){
    foreach($row as $column){
        echo $column;
    }
}

for($row=0;$row < count($array);$row++){
    for($column=0;$column < count($array[$row]);$column++){
        echo $array[$row][$column];
    }
} 
```

如果您不关心索引号，请使用 foreach 方法。如果您确实想使用索引号，请使用 for 循环。

在您的示例中，您有一个二维数组，如下所示：

```
Make            | Model         | Year | Engine
Chevrolet Truck | C 1500 SERIES | 2005 | V8 5.7L (K)
Nissan Pickup   | D21 PICKUP    | 1993 | 2.4 L
TOYOTA CAMRY    | LE            | 2001 | 2.8L V6 
```

要静态访问 tem，您可以这样做：

```
$firstMake = $mmy[0][0]; //meaning first row first column
$secondMake = $mmy[1][0];
$thirdYear = $mmy[2][2]; 
```

我希望这能清除一点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-20T13:33:08.107

您可以使用数组迭代器：

```
<?php

$data = array(
  array("Chevrolet Truck", "C 1500 SERIES", "2005", "V8 5.7L (K)"),
  array("Nissan Pickup", "D21 PICKUP", "1993", "2.4 L"),
  array("TOYOTA CAMRY", "LE", "2001", "2.8L V6")
);

$data = new ArrayObject($data);
$iterator = $data->getIterator();

while ($iterator->valid())
{
  $value = $iterator->current();
  echo "<ul><li>The row number is: {$iterator->key()}</li>";
  for ($x = 0; $x < count($value); $x++) {
    echo "<li>{$value[$x]}</li>";
  }
  echo "</ul>";
  $iterator->next();
}

?> 
```

注意`count`for 内部循环的使用，这确保循环只会回显在数组中定义的值（因此如果缺少一个值，则不会出现未定义的索引错误）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-20T13:10:08.387

这基本上意味着数组中的偏移量 [4] 不存在。用于`isset()`确定数组中的项（键）是否存在。

```
for ($eng = 3; $eng < 3; $eng++) {
   if (isset($mmy[$row][$make][$model][$year][$eng])) {
      echo '<li>', $mmy[$row][$make][$model][$year][$eng], '</li>';
   }
} 
```

# jsf-1.2 - 如何在jsf标签中设置条件

> ID：15524447
> 
> 赞同：0
> 
> 时间：2013-03-20T13:07:58.277
> 
> 标签：jsf-1.2

任何人都可以在下面提供帮助。

只有当条件为真时，我才需要使用 jsf 中的命令链接标签打开一个新的浏览器选项卡。

如何在jsf标签中设置条件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T07:47:52.563

You can use managed bean actionListener of the commandMenu and then get the condition tested and redirect to the page in new tab if its true...

![enter image description here](../Images/b86be1bd942a9e33d4d561fa77daa401.png)

import javax.faces.event.ActionEvent;

public class PageBean {

```
String page;

public PageBean() {
}

public void getMenu(ActionEvent actionEvent) {
    // Add event code here... 
```

/* add your code to get and test condition and based upon the condition true and false conditon get commandMenu Id of the menu clicked by the following way

be sure to give the id of the command menu the same name you want to open in the next tab upon menu click like in my case i have given the command menu id as page1 String id = actionEvent.getComponent().getId(); System.out.println(" Menu ID : "+id); now set the fetched menu id to the page variable with the proper page extension and acccess the pariable in the action from the manged bean to redirect to the page in the next tab upon menu click after testing the validation */

```
 page = id;
    System.out.println("Value assigned to the page from the menu Id is :"+page);
}

public String getPage() {
    return page;
}

public void setPage(String page) {
    this.page = page;
}

public void dashContentEntryCheck(){
    System.out.println("entered inside dashboard content task flow");
} 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T15:22:47.690

您可以使用该`rendered`属性，并使用 EL 表达式完成它们。使用该`rendered`属性，仅当条件为 时才会显示链接`true`。

如果要根据条件在新的浏览器选项卡中打开命令链接，可以使用`rendered`属性轻松实现：

```
<h:commandLink action="my_navigation_rule"
               rendered="#{!MyBean.booleanValue}" />

<h:commandLink action="my_navigation_rule"
               rendered="#{MyBean.booleanValue}" target="_blank"/> 
```

由于`rendered`条件是排他性的，因此只会打印其中一个 commandLinks。

有关 JSF 表达式语言 (EL) 的更多信息（*在 jsf 标签中设置条件*非常有用）-->[此处](http://dsc.sun.com/docs/jscreator/help/2update1/jsp-jsfel/jsf_expression_language_intro.html)

**注意**：我知道解决方案可以改进，因为您可以使用 EL 表达式来确定`target`值，但我认为这个解决方案更容易。

# ajax - Codeigniter - 检测请求的发送者

> ID：15524448
> 
> 赞同：0
> 
> 时间：2013-03-20T13:07:58.320
> 
> 标签：ajax, codeigniter, shopping-cart

我正在建立一个带有购物车的商业网站。

在大多数页面（即产品页面、类别页面）上，我想在侧边栏上显示购物车内容，当商品添加到购物车时，它将通过 AJAX 更新。

在“显示购物车”页面上，我想显示完整版本的内容。

显然，使用相同的模型和函数来获取和/或更新购物车似乎是合乎逻辑的，但是根据调用者页面将数据发送到不同的视图（侧边栏或完整购物车）。

问题是，在购物车模型中，我如何检测请求来自哪里。

我想我会检查请求是否来自 AJAX，如下所示：

```
if(!empty($_SERVER['HTTP_X_REQUESTED_WITH']) && strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) == 'xmlhttprequest') // i.e - the request came as AJAX
{
    $this->load->view('cart_sidebar_view', $data);
}else{ /* not ajax */
    $data['main_content'] = 'cart_view';
    $this->load->view('includes/template', $data);
} 
```

但这还不够好，因为我还想在“显示购物车”页面上使用 AJAX，以允许从那里更新购物车。

那么，有没有办法在购物车模型中检测请求来自哪里？或者我是否必须在每个“添加到购物车”或“删除”按钮的隐藏表单字段中发送该信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T13:13:14.953

有一个简单的方法。当您从显示购物车页面发送请求时，发送一个附加变量。比在控制器中检查这个变量是否有变量来调用一个逻辑如果变量没有来做其他事情。

```
if($this->input->is_ajax_request()) 
{
    $this->load->view('cart_sidebar_view', $data);
}else{
    if($this->input->post('another_variable')){
        // do something else
    }else{
        $data['main_content'] = 'cart_view';
        $this->load->view('includes/template', $data);
    }
} 
```

# ocaml - 如何在 OCaml 中转换十六进制、八进制、十进制和二进制之间的数字？

> ID：15524450
> 
> 赞同：6
> 
> 时间：2013-03-20T13:08:00.087
> 
> 标签：ocaml

在 OCaml 中在十六进制、八进制和二进制之间转换数字的一般方法是什么？

例如，如何将十六进制 4294967276 (FFFFFFFC) 转换为十进制数？

谢谢！

缺口

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-20T14:51:47.680

不清楚你在问什么。数字只是数字，真的。它们没有基础（忽略硬件表示）。你有一个基础的时间是你将数字转换为字符串和从字符串转换的时候。要将字符串解释为十进制整数，您可以使用`int_of_string`. 对于其他基地，您可以使用`Scanf.sscanf`. 要将数字转换为十进制字符串，您可以使用`string_of_int`. 对于其他基地，您可以使用`Printf.sprintf`.

```
# int_of_string "345";;
- : int = 345
# Scanf.sscanf "FC" "%x" (fun x -> x);;
- : int = 252
# string_of_int 345;;
- : string = "345"
# Printf.sprintf "%X" 252;;
- : string = "FC"
# 
```

当然，`Scanf.sscanf`使用起来相当麻烦。但我不知道 OCaml 标准库中有任何其他转换函数。

**更新**

正如 barti_ddu 所观察到的，如果您不介意在输入字符串中添加前缀，则可以将其`int_of_string`用于您提到的所有 4 个基础：

```
# int_of_string "0xFC";;
- : int = 252
# int_of_string "0o374";;
- : int = 252
# int_of_string "0b11111100";;
- : int = 252 
```

（或者您的输入可能已经有前缀，在这种情况下，这是一个*更*简单的解决方案。）

# highcharts - Highcharts x轴标签

> ID：15524451
> 
> 赞同：0
> 
> 时间：2013-03-20T13:08:02.637
> 
> 标签：highcharts

在图表中，当图表数据很大时，x 轴标签会重叠。我使用了“step”属性如下：

```
xAxis: {                
            labels:{
                step: (stepVal ? stepVal : 0),
                },
    } 
```

我根据数据计算 stepVal 的值。这解决了 x 轴上标签重叠的问题。但是，当我缩放图表时，我想查看 x 轴上的所有标签。如何得到它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T12:40:30.033

在 Highcharts 3.0 中，您可以使用

```
chart.xAxis[0].update({
    labels: {
        step: newValue
    }
} 
```

用于更新步骤。仅在新图表的选项中设置新值是行不通的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T17:02:05.877

我相信你正在寻找的是这个..

[http://api.highcharts.com/highcharts#chart.events.selection](http://api.highcharts.com/highcharts#chart.events.selection)

如果发生缩放操作，您将需要更改 xAxis 标签步骤。您需要根据缩放后可见的标签数量来确定要显示的标签数量。

# php - 工作流迁移 phalcon

> ID：15524455
> 
> 赞同：1
> 
> 时间：2013-03-20T13:08:12.910
> 
> 标签：php, migration, phalcon

前段时间我使用 yii 框架。在带有 yiic shell 的 yii 框架中，我制作迁移文件并为 db 编写操作：创建表、更改表、创建索引以及与另一个（无 db）的任何操作。但在 phalcon 我看不到这一点。是的，我知道迁移，但它是什么？

我用一张表为我的数据库进行迁移；如果我有空数据库并使用“phalcon 迁移运行”，那么我有“表 %name_table% 不存在”

以及如何将其用于正常迁移？

phalcon 在哪里保存有关已使用迁移的信息？还是每次从 1.0.0 迁移开始？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-05-28T14:22:59.953

如果您使用的是 DevTools 3.1.2，请运行以下命令以了解有关 Phalcon 3 中迁移选项的更多信息

`phalcon migration --help`

希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T13:15:09.127

我认为您需要先转储一个-`phalcon gen-migration`

尝试阅读完整页面并观看他们的教程视频 - [http://docs.phalconphp.com/en/latest/reference/migrations.html](http://docs.phalconphp.com/en/latest/reference/migrations.html)

# sql - 用逗号分隔的列表从联接更新数据库表字段

> ID：15524457
> 
> 赞同：5
> 
> 时间：2013-03-20T13:08:20.797
> 
> 标签：sql, sql-server, sql-server-2008-r2, sql-update

我有两个名为`Districts`and的表`Schools`。该`Districts`表包含一个名为 的列`Schools`。

我需要从相应`Schools`的表格中填充表格的列，以便表格中的每一行都有一个逗号分隔的表格中的学校名称值列表。`Districts``Schools``Districts``Schools`

我怎样才能做到这一点？我应该使用`UPDATE`查询还是存储过程？

我只做到了：

[**SQL小提琴**](http://sqlfiddle.com/#!2/c379d/1)

**`Districts Table`**

```
+------------+------+---------+
| DistrictId | Name | Schools |
+------------+------+---------+
|          1 | a    |         |
|          2 | b    |         |
|          3 | c    |         |
|          4 | d    |         |
+------------+------+---------+ 
```

**`Schools Table`**

```
+----------+------------+------------+
| SchoolId | SchoolName | DistrictId |
+----------+------------+------------+
|        1 | s1         |          1 |
|        2 | s2         |          1 |
|        3 | s3         |          2 |
|        4 | s4         |          2 |
|        5 | s5         |          4 |
+----------+------------+------------+ 
```

**输出需要如何**

```
+------------+------+---------+
| DistrictId | Name | Schools |
+------------+------+---------+
|          1 | a    | s1,s2   |
|          2 | b    | s3,s4   |
|          3 | c    |         |
|          4 | d    | s5      |
+------------+------+---------+ 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T13:12:56.023

在CONCATENATE`FOR XML PATH`和**[STUFF](http://msdn.microsoft.com/en-us/library/ms188043.aspx)**的帮助下，您可以轻松地`District`使用所需的结果更新表。

```
UPDATE  a
SET     a.Schools = b.SchoolList
FROM    Districts a
        INNER JOIN
        (
            SELECT  DistrictId,
                    STUFF((SELECT ', ' + SchoolName
                            FROM Schools
                            WHERE DistrictId = a.DistrictId
                            FOR XML PATH (''))
                        , 1, 1, '')  AS SchoolList
            FROM    Districts AS a
            GROUP   BY DistrictId
        ) b ON A.DistrictId = b.DistrictId
WHERE   b.SchoolList IS NOT NULL 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!3/ba798/1)

# powershell - 从 PowerShell 运行另一个命令行应用程序

> ID：15524458
> 
> 赞同：0
> 
> 时间：2013-03-20T13:08:23.230
> 
> 标签：powershell, powershell-2.0

我想这已经被问过很多次了，但我找不到适合我的答案。

*   我需要从变量构造一个命令行。
*   我需要运行该命令行可执行文件。
*   我需要将结果显示在与我的脚本相同的屏幕上。

我正在尝试使用自定义源和目标运行 Putty SCP。

我已经搞砸了`&`，`Invoke-Expression`但这是不可能的。PowerShell 中的一些简单的#1 用例非常难，它们会吃掉它的所有好处。

我能看到的唯一方法是在新的 Process 实例中运行它并设置所有输出重定向，然后在完成后将其通过管道传回 PS 屏幕。

而且我知道这可能会失败，因为输出缓冲区可能会变满，除非您被事件所吸引并将其挖出。

另一种方法是将我的命令行写入批处理文件并运行它。

任何帮助表示赞赏。必须有一个更简单的方法。

**编辑**

例如：

```
[string]$scpPath = Find-PathToPuttyScpExecutable;
[string]$scpArguments = "-v -r -pw " + $MarkLogicServerPassword + " " + $MarkLogicSourcePath + " " + $MarkLogicServerUserName + "@" + $ServerName + ":" + $MarkLogicDestinationRootPath 
```

我需要执行`$scpPath + " " + $scpArguments`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T13:32:27.010

不要太执着于弦乐。只需运行带参数的命令：

```
[string]$scpPath = Find-PathToPuttyScpExecutable;
&$scpPath -v -r -pw $MarkLogicServerPassword $MarkLogicSourcePath "$($MarkLogicServerUserName)@$($ServerName):$($MarkLogicDestinationRootPath)" 
```

PowerShell 将为您处理报价。在大多数情况下，它运作良好，我怀疑你会在这里偶然发现边缘情况。

如果您必须即时创建参数列表，那么您应该使用一个数组并传递它：

```
$scpArguments = '-v',
                '-r',
                '-pw',
                $MarkLogicServerPassword,
                $MarkLogicSourcePath,
                "$($MarkLogicServerUserName)@$($ServerName):$($MarkLogicDestinationRootPath)"

&$scpPath @scpArguments 
```

# jquery - 加载 jQuery EasyUI 后 jsPlumb 不工作（jQueryUI 和 EasyUI 之间的冲突）

> ID：15524459
> 
> 赞同：2
> 
> 时间：2013-03-20T13:08:23.273
> 
> 标签：jquery, jquery-ui, jsplumb, jquery-easyui

我遇到了 jsPlumb 和 jQuery EasyUI 的真正问题。

这里会发生什么。我有一个使用 EasyUI 的网站，我试图向它添加一些 jsPlumb 连接，但这些连接并没有像我希望的那样运行。

我只用 jsPlumb 准备了一些演示，它正在工作。但是当我将它添加到现有站点时，连接不起作用。

在调查了冲突在哪里之后，我得出了这个结论：

只要我不加载 EasyUI，jsPlumb 就可以工作。加载 EasyUI 后：

```
 <script type="text/javascript" src="jquery.easyui.min.js"></script> 
```

*   我无法通过拖动源端点来创建新连接（我拖动端点但现在创建了新连接）
*   端点不遵循它们所属的 div（当您用鼠标指向它们时，它们会正确定位它们）

我使用 jsFiddle 准备了 2 个演示来说明我的意思。唯一认为这两个示例不同的是 jquery.easyui 的外部资源

*   工作jsPlumb[全屏结果](http://jsfiddle.net/matbochynski/t39jz/embedded/result/)
*   不工作：[全屏结果](http://jsfiddle.net/matbochynski/6BTCJ/2/embedded/result/)

我该如何解决这个问题？也许你们中的一些人知道冲突在哪里。我的网站现在建议将 EasyUI 更改为其他任何东西，我真的很想使用 jsPlumb，因为我找不到任何像这样强大的工具包。

* * *

编辑：

正如建议的那样，我试图覆盖 draggable 并且它部分工作但不是我想要的那样。

```
(function($){
    var __old_draggable = $.fn.draggable;
    $.fn.draggable = function(){
        if(this.hasClass('_jsPlumb_endpoint') || this.hasClass('window')){
            return;
        }
        return __old_draggable.apply(this, arguments);
    };
    $.extend($.fn.draggable,__old_draggable);
})(jQuery); 
```

部分原因是：

*   端点不再可拖动 - 这很好，
*   但是他们不会创建新的连接，这很糟糕。
*   他们不遵循他们所附的窗口。

此外，现在我现在，EasyUI 覆盖了可拖动的 jQuery，这导致了这种奇怪的（对我而言）行为。可悲的是，我有强制可拖动方法成为原始 jQuery 方法的问题......所以我期待其他解决方案来解决我的问题

* * *

编辑：我删除了 EasyUI 中与可拖放覆盖相关的所有内容及其工作。现在的问题是如何在程序中而不是在easyui脚本中执行此操作，因为有人会更新到新版本并且一切都将停止工作......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T12:15:09.540

好的。这是对我来说最好的工作解决方案。

这里发生的事情是 EasyUI 可拖动、可放置的方法覆盖了 jQueryUI 方法。jsPlumb 被设计为与 jQueryUI 一起使用，而不是与 EasyUI 一起使用。

我发现 EasyUI 框架提供方法[easyloader](http://www.jeasyui.com/documentation/easyloader.php)允许您选择要加载的模块！伟大的！我必须稍微更改我的代码，从文档中删除与 EasyUI 相关的所有**`*.html`**内容（因为在创建 DOM 时不知道 EasyUI 模块）。

在 HTML 文件的地方

```
<script type="text/javascript" src="jquery-easyui-1.3.2/easyloader.js"></script> 
```

代替

```
<script type="text/javascript" src="jquery-easyui-1.3.2/jquery.easyui.min.js"></script> 
```

然后在你的javascript中我做了这样的事情：

```
$(function () {
    using(['panel', 'datetimebox', 'tabs', 
            'accordion', 'layout', 'linkbutton',
            'datagrid'], function(){
        initAll.call(this);
    });
}); 
```

哪里**`using`**是一个加载模块的[easyloader](http://www.jeasyui.com/documentation/easyloader.php)函数。**`initAll`**是我的函数，其中 EasyUI 组件的所有初始化都是例如：

```
var initAll = function () {
    //initialize all html elements which uses EasyUI
    $('#layout').layout({fit:true});
    $('#tabscontainer').tabs({fit:true, border:false});
    $('#accordion').accordion({fit: true, border:false});
} 
```

您必须注意的唯一一件事是您不能使用依赖于可拖动/可放置模块的模块来使 jsPlumb 正常工作。可以在 easyloader.js 源代码中找到依赖项。对于 EasyUI 1.3.2 版本，它们是：*滑块、树、窗口、组合树、对话框、消息器*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-07T19:57:46.457

有一个处理 EasyUI 的 jsPlumb 的分支。也许这有帮助？[http://github.com/KodingSykosis/jsPlumb/commits/master](http://github.com/KodingSykosis/jsPlumb/commits/master)

演示源可在[https://github.com/KodingSykosis/jsPlumb/tree/master/demo/jeasyui获得](https://github.com/KodingSykosis/jsPlumb/tree/master/demo/jeasyui)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T14:01:30.250

覆盖 EasyUI `$.fn.draggable`。尝试检测 jsPlumb 类`this`并防止操作 jsPlumb 节点。

就像是`if(....hasClass('jsPlumbClass') ) return;`

可能有帮助。图书馆不知何故发生了冲突，对此感到抱歉。

# eclipse - 在 .jar 中创建交错 .java 和 .class 文件的 ant 任务？

> ID：15524460
> 
> 赞同：-1
> 
> 时间：2013-03-20T13:08:28.620
> 
> 标签：eclipse, ant

我在 Eclipse 中使用单独的 src 和 bin 文件夹创建了 java 项目。现在我想要一个 .jar 将它们组合在同一个文件夹中，就像 .jardesc 一样。我创建了一个 ant 脚本，如下所示：

```
<project name="build-jar" default="build-jar" basedir=".">
    <target name="build-jar">
        <jar destfile="test.jar"
             basedir="."
            includes="**/*.java **/*.class"
            update="true"
        />
    </target>
</project> 
```

但这将创建一个带有 bin/ 和 src/ 文件夹的 .jar。我希望顶级文件夹都已经是实际的包，并且 .class 文件与 .java 文件交错。我怎样才能做到这一点？

编辑：当前不工作的修改版本：

```
<?xml version="1.0" encoding="UTF-8"?>
<project name="build-jar" default="build-jar">
    <target name="build-jar">
        <jar destfile="test.jar" update="true">
            <fileset dir="src">
                <include name="**/*.java"/>
            </fileset>
            <fileset dir="bin">
                <include name="**/*.class"/>
            </fileset>
        </jar>
    </target>
</project> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T13:52:07.307

如何使用文件集同时 jar 两个目录？

```
<jar destfile="test.jar" update="true">
    <fileset dir="src">
        <include name="**/*.java"/>
    </fileset>
    <fileset dir="bin">
        <include name="**/*.class"/>
    </fileset>
</jar> 
```

# web-applications - 构建基于词汇频率表/分布的搜索引擎？

> ID：15524463
> 
> 赞同：0
> 
> 时间：2013-03-20T13:08:42.283
> 
> 标签：web-applications, search-engine, keyword, frequency, lexical-analysis

当谈到很多 Web 开发知识时，我无疑是一个“n00b”，所以请多多包涵。

我有一个网站的想法，该想法的一部分涉及扫描特定网页，然后按频率（考虑上下文）构建“关键字”排名表，以便为所述页面构建“配置文件”。

我的问题有两个：

A）哪种编程语言最适合此目的（快速，特别适合处理大量数据）。

B）我应该使用什么样的数据结构来创建这些频率表，以便与其他页面/表进行快速有效的分析/比较？另外，我应该如何存储表格本身，以便我可以快速浏览它们并确定相关性？我本质上想创建一个基于某些启发式和某些内容的搜索引擎。

到目前为止，这个想法比我大，但我想解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T06:42:04.403

首先是合理的答案，然后是一些解释。

一个）。任何语言。几乎任何编程语言都可以工作。乙）。所有类型的结构。这取决于具体的任务。

计算机科学中有一个领域叫做“数据挖掘”。尝试搜索这些关键字。有大量的系统和库，例如 SOLR、Mallet、Serene、RapidMiner、R。不同的库使用不同的语言。我建议从您最熟悉的那个开始。

也许先读这个：[http ://en.wikipedia.org/wiki/Tf%E2%80%93idf](http://en.wikipedia.org/wiki/Tf%E2%80%93idf)

# database - 将图像保存到 Neo4J

> ID：15524466
> 
> 赞同：7
> 
> 时间：2013-03-20T13:08:46.120
> 
> 标签：database, neo4j

因为我必须在我的一个项目中使用 Neo4J，所以我试图获得一些想法。它以键值对的方式存储值。但我不明白如何存储图像的一件事？在某些情况下，我们将相应图像的 URL 存储在 RDBMS 中。但是在 Graph 数据库中有什么技巧呢？请有人给我一些好的文章链接或清楚地回答。谢谢。！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-20T14:54:45.837

您真的需要存储整个图像，还是可以存储磁盘上存在的图像的引用 id？

我问这个问题是因为您很可能会将其作为字节数组存储在数据库中，并且如果您实际上永远不会使用字节数组进行分析，那么您也可以只存储一个引用。

如果您使用它进行比较，例如防止重复，您可以随时存储MD5或其他东西。

为什么需要将图像存储在数据库中？

# iis-7 - 从移动浏览器打开时 URL 重定向/重写

> ID：15524467
> 
> 赞同：4
> 
> 时间：2013-03-20T13:08:46.180
> 
> 标签：iis-7, url-rewriting, rewrite, url-redirection

我们正在开发两个网站，一个是网络应用程序，另一个是移动应用程序。

所以我的要求是创建一个重定向 url 以从 web 应用程序重定向到移动用户的移动应用程序，但文件夹或结构不同。

对于 Web 应用程序，它是 [http://testrequest.com/home/Account/](http://testrequest.com/home/Account/) ，对于移动应用程序，它应该是[http://m.testresponce.com/mforyourhome/Account.aspx](http://m.testresponce.com/mforyourhome/Account.aspx)

请有人可以帮助我使用 URL 重写。

编辑：- 在 IIS7 上工作

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T19:44:39.457

您可以使用`{HTTP_USER_AGENT}`条件来执行此操作。
适用于您的情况，如下所示：

```
<rule name="Mobile Redirect" stopProcessing="true">
    <match url="^home/Account/$" ignoreCase="true" />
    <conditions logicalGrouping="MatchAny" trackAllCaptures="false">
        <add input="{HTTP_USER_AGENT}" pattern="midp|mobile|phone" />
        <add input="{HTTP_X-Device-User-Agent}" pattern="midp|mobile|phone" />
        <add input="{HTTP_X-OperaMini-Phone-UA}" pattern="midp|mobile|phone" />
    </conditions>
    <action type="Redirect" url="http://m.testresponce.com/mforyourhome/Account.aspx" appendQueryString="false" />
</rule> 
```

它将完全匹配`home/Account/`，如果用户从移动设备浏览，他/她将被重定向到`http://m.testresponce.com/mforyourhome/Account.aspx`

**重要的**

仅应用此规则`http://testrequest.com/`（或至少避免陷入无限重定向）。
[用户代理](http://en.wikipedia.org/wiki/User_agent)永远不会 100% 可靠（因为它们可以更改）

来源：[http ://forums.iis.net/t/1169853.aspx](http://forums.iis.net/t/1169853.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-06T13:15:53.010

从您的移动网站返回时阻止重定向：

```
<rule name="Mobile Redirect" stopProcessing="true">
  <match url="^home/Account/$" ignoreCase="true" />
  <conditions logicalGrouping="MatchAll" trackAllCaptures="false">
    <add input="{HTTP_REFERER}" pattern="http://m.testresponce.com(.*)" negate="true" />
    <add input="{HTTP_USER_AGENT} {HTTP_X-Device-User-Agent} {HTTP_X-OperaMini-Phone-UA}" pattern="midp|mobile|phone" />
  </conditions>
  <action type="Redirect" url="http://m.testresponce.com/mforyourhome/Account.aspx" appendQueryString="false" />
</rule> 
```

# websphere-8 - Websphere & Tivoli：尝试创建 PDAuthorizationContext 时的 NPE

> ID：15524474
> 
> 赞同：0
> 
> 时间：2013-03-20T13:09:04.260
> 
> 标签：websphere-8, tivoli

当我尝试启动我的应用程序时出现以下错误...

> [java.lang.IllegalStateException：com.tivoli.pd.jutil.kb$1.run(kb$1.java:41) 处的 java.lang.NullPointerException^M 处 java.security.AccessController.doPrivileged(AccessController.java: 229)^M 在 com.tivoli.pd.jutil.kb.c(kb.java:141)^M 在 com.tivoli.pd.jutil.kb.(kb.java:56)^M 在 com.tivoli。 pd.jutil.PDContext.(PDContext.java:76)^M at com.tivoli.pd.jazn.PDAuthorizationContext.(PDAuthorizationContext.java:66)^M

我仔细检查了配置文件是否可以访问并且我可以阅读它。我正在使用的代码如下所示...

```
aC = new PDAuthorizationContext(cFile); 
```

有没有办法获得有关导致 NPE 的原因的更多信息？

**更多信息！！！**

在调试了一下之后，问题似乎来自这段代码（他们使用 progaurd，所以很难 100% 有信心）......

```
Certificate[] arrayOfCertificate1 = ((KeyStore)???).getCertificateChain("DefaultID");
//Throws Null pointer (presumably because array is null)
Certificate localCertificate1 = arrayOfCertificate1[0]; 
```

**更多信息**

这似乎是某种依赖冲突（猜测），因为如果我只是使用 PDAuthorizationContext 创建一个示例应用程序，它就可以正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T21:33:08.560

问题与我使用的 PD.jar 版本有关。虽然我认为我使用的是一个版本，但我正在使用另一个版本。这是因为版本已在我的 WebSphere 库中注册（在 Eclipse 的构建路径下）。引入适当的库后，一切正常。

# c++ - 双端队列 - 为什么“储备”不存在？

> ID：15524475
> 
> 赞同：36
> 
> 时间：2013-03-20T13:09:05.430
> 
> 标签：c++, stl

标准的 STL 向量容器有一个“保留”功能来保留未初始化的内存，以后可以使用它来防止重新分配。

为什么另一个双端队列容器没有呢？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-20T13:12:17.620

增加 a 的大小`std::vector`可能代价高昂。当 a`vector`超出其保留空间时，必须将向量的全部内容复制（或移动）到更大的保留空间。

特别是因为**std::vector 调整大小的成本**可能`vector::reserve()`很高。 `reserve()`可以准备一个`std::vector`预期达到一定大小而不超出其容量。

相反，a`deque`总是可以添加更多内存**而**无需重新定位现有元素。如果`std::deque` *可以* `reserve()`记忆，那么几乎没有明显的好处。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-20T13:28:06.417

对于`vector`and `string`，保留空间通过确保不需要复制/移动元素来防止后面的插入（直到容量）使迭代器和对早期元素的引用无效。这种搬迁也可能代价高昂。

使用`deque`and `list`，早期的引用永远不会因末尾的插入而无效，并且元素不会移动，因此不会出现保留容量的需要。

您可能认为使用`vector`and `string`，保留空间还可以保证以后的插入不会抛出异常（除非构造函数抛出），因为不需要分配内存。您可能认为相同的保证对其他序列有用，因此`deque::reserve`可能会有用处。*实际上并没有这样的保证*and `vector`，`string`尽管在大多数（全部？）实现中它是正确的。所以这不是`reserve`.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-20T13:14:51.663

引用[C++ 参考](http://en.cppreference.com/w/cpp/container/deque)

> 与 std::vector 不同，双端队列的元素不是连续存储的：典型的实现使用一系列单独分配的固定大小数组。
> 双端队列的存储会根据需要自动扩展和收缩。**deque 的扩展比 std::vector 的扩展便宜，因为它不涉及将现有元素复制到新的内存位置。**

Deque 可以在任何它想要的地方分配新内存并指向它，这与需要连续内存块来保存所有元素的向量不同。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-20T13:12:08.813

只`vector`拥有。双端队列不需要保留功能，因为元素不是连续存储的，并且在添加或删除元素时不需要重新分配和移动元素。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-20T13:13:55.657

保留意味着分配大块连续数据（如向量）。出队中没有任何内容意味着连续存储 - 它通常更像是一个列表（您会注意到它也没有“保留”功能）。

因此，“储备”功能毫无意义。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-20T14:34:12.667

有两种主要类型的内存：分配单个块的内存，如数组和向量，以及成员抓取任何空位置来填充的分布式内存。队列和链接列表结构属于第二种类型，它们具有一些特殊的实际优势，例如与数组和向量相反，删除特定元素不会导致大量内存移动。因此他们不需要事先保留任何空间，如果他们需要它，他们只需连接到小费即可

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-03-17T11:30:18.893

如果你的目标是对齐内存容器，你可以考虑实现这样的东西：

```
std::deque<std::vector> dv; //deque with dynamic size memory aligned vectors.

typedef size_t[N] Mem;
std::deque<Mem> dvf //deque with fixed size memory aligned vectors. Here you can store the raw bytes adding a header to loop through and cast using header information and typeid... 
//templates and polymorphism can help storing raw bytes, checking the type where a pointer points for example, and creating an interface to access the partial aligned memory. 
```

或者，您可以使用地图而不是双端队列来访问向量...

# android - 黄色和橙色颜色与 Android 识别

> ID：15524476
> 
> 赞同：0
> 
> 时间：2013-03-20T13:09:06.200
> 
> 标签：android, colors, android-camera, brightness, hsv

我和我的项目组正在制作一个类似于 Paintball 的 Android 应用程序。当您射击某人时，它会检查以下内容：

1.  对手的颜色是否在十字准线（屏幕中央）？（荧光黄或荧光橙背心）
2.  他们是那个方向的对手（使用设备指南针）吗？
3.  他们是那个方向范围内的对手（使用 GPS）吗？

目前的问题在于第一次检查。我们计划在 Android 中使用 Color.colorToHSV 方法使用 HUE 和/或 HSV 代码，包括亮度和饱和度。虽然在太黑（天气）的情况下，我们会遇到一些问题，并希望得到一些反馈，以了解哪种方法最有效地为我们的彩色背心获得最佳结果。

通过一些测试，我们目前使用 Color.colorToHSV 方法的以下范围：

```
float[] currentHsv = new float[3];
Color.colorToHSV(Utils.findColor(myImageBitmap), currentHsv);

float hue = currentHsv[0];
float saturation = currentHsv[1];
float brightness = currentHsv[2];

// Fluor Yellow
if((hue >= 58 && hue <=128) && brightness > 0.40 && saturation <= 1.0){ // some code here }

// Fluor orange
else if((hue >= 4 && hue <=57) && brightness > 0.45 && saturation >= 0.62){ // some code here } 
```

有谁知道这样做的更有效方法，它适用于几乎任何类型的天气类型，黑暗或明亮，内部或外部，在黑暗的桥梁或悬垂的建筑物下方，深色/浅色衣服需要它等等。

# multithreading - 消息队列消息之间的依赖关系

> ID：15524481
> 
> 赞同：5
> 
> 时间：2013-03-20T13:09:14.257
> 
> 标签：multithreading, rabbitmq, message-queue

这是我的场景：

*   我有两台服务器，每台服务器都有一个多线程消息队列消费者（总共两个消费者）。
*   我有很多消息类型（CreateParent、CreateChild 等）
*   我被糟糕的遗留代码所困扰（创建一个孩子将部分创建一个父母。我知道这很糟糕......但我无法改变它。）
*   不能假设消息排序（消息排队原理！）
*   RabbitMQ 是我的消息队列代理。

我的问题：

*   当两个线程同时运行时（一个执行 CreateParent，另一个执行 CreateChild），它们会产生冲突，因为这两个线程试图在数据库中创建 Parent（记住遗留代码！）

我最初的解决方案：

*   在消费者内部，我创建了一个“实体锁定”概念。因此，例如，当线程处理 CreateChild 消息时，它会锁定 Child 和 Parent（遗留代码！！），以便 CreateParent 消息处理可以等待。我使用基本的 .net Monitor 和 Id 列表来实现这个概念。它运作良好。

我最初的解决方案限制：

*   我的“实体锁定”概念适用于单个服务器上单个进程中的单个消费者。但它不适用于运行多个消费者的多个服务器。
*   我正在考虑使用共享数据库来“存储”我的实体锁定概念，因此每个进程（和线程）都可以访问数据库以验证哪些实体被锁定。

我的问题（终于！）：

所有这一切都变得非常复杂，它增加了错误风险和代码维护问题。我真的不喜欢！有没有人已经遇到过这种问题？他们是可接受的解决方法吗？有没有人对我的场景有一个干净的解决方案的想法？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T15:27:15.437

最后，简单的解决方案总是更好的解决方案！

我最终拒绝使用我的“实体锁定”概念的所有复杂性，而是在执行请求之前预先验证所有必需的数据和实体状态。

更准确地说，不是让 CreateChild 进程在遇到由 CreateParent 创建的现有数据时自行崩溃，而是在执行 CreateChild 消息之前完全验证数据库中的一切正常。

此解决方案的缺点是 CreateChild 的实现必须知道 CreateParent 将生成哪些特定数据并在开始执行之前验证它的存在。但是说真的，这比锁定所有东西在跨系统中要好得多！

# vba - BASIC 中从版本 15 到版本 20 的 SPSS 脚本

> ID：15524490
> 
> 赞同：1
> 
> 时间：2013-03-20T13:09:42.170
> 
> 标签：vba, spss, basic, winwrap

下面的脚本是用与 VBA 几乎相同的“Winwrap basic”编写的。我希望这个脚本在 SPSS 20 上运行，该脚本在 SPSS15 上运行良好（通过将文件扩展名从 STT 更改为 TLO，因为那是当时的 tablelook 文件）。

但是，每当我在 SPSS 20 中运行此脚本时，wwb 处理器都会崩溃并显示一般错误消息“WWBProcessor 遇到问题并需要关闭。对此造成的不便，我们表示歉意。'

该脚本有很好的注释，但该脚本的目的是更改输出查看器窗口中每个表格的表格外观，通过依次激活每个表格并将表格外观设置为用户指定的表格外观，旋转内部列标签，关闭表并激活下一个表。循环继续，直到每个表格都设置为新的表格外观和旋转。

手动设置几百张桌子的旋转既费力又费时，更不用说麻木了。在版本 15 中，该脚本用于在几秒钟内执行此任务，但不断变化的需求和对旧版本缺乏支持意味着我被迫使用新版本。

我将不胜感激任何帮助。小牛

```
Option Explicit

Sub Main
'BEGIN DESCRIPTION
'This script changes all tabs to the same 'Tablelook' style.  You will be prompted to choose the tablelook file.
'END DESCRIPTION
'******************
'Old description
'This script assumes that objSpssApp ist the currently running
'SPSS-Application and assigns every existing Pivot Table
'in the Output Navigator a new TableLook which can be selected
'from a Dialog box. Hidden tables will also be affected.
'Originally Created by SPSS Germany. Author: Arnd Winter.
'******************
'This script is written in the BASIC revision 'WinWrap Basic' code copied from VB or other basic languages may have to be modified to function properly.

On Error GoTo Bye

' Variable Declaration 
' For an undertermined reason scripts cannot be executed throught the Utilites -> Run scripts menu,
' Instead they must be opened like a syntax file and ran from the SPSS 19 Scripting page.
' Functionality on SPSS 20 is now completely gone, error message only reads 'WWB processor has encountered a problem and needs to close'.
Dim objOutputDoc As ISpssOutputDoc 'Declares the Output variable
Set objOutputDoc = objSpssApp.GetDesignatedOutputDoc 'Assigns currently active output to Output variable
Dim strAppPath As String
Dim objOutputItems As ISpssItems 'variable defining every item in the current output window
Dim objOutputItem As ISpssItem 'variable defining the current item
Dim objPivotTable As PivotTable
Dim intCount As Integer 'declare the variable that will store the number of instances
Dim varStrLook As String
Set objOutputItems=objOutputDoc.Items
Dim i As Integer 'for loops we need an INT variable that will be counted against the number of instances 'i' is standard notation
' Find out SPSS Directory 
strAppPath = objSpssApp.GetSPSSPath

' Select TableLook 

'The Parametres you must enter into the GetFilePath() function are as follows:
'(Optional)Firstly you enter the initial file name (if none is required use an asterisk * and the file extention, or *.*)
'(Optional)The second part is the file extention expected, you can choose multiple filetypes if you seperate them with a semi-colon ;
'(Optional)The third parametre is the directory where the file should be opened.(default - Current path)
'The fourth parametre is the Title of the prompt, which should be enclosed in speech marks.
'The Final parametre is the 'Option'
'0   Only allow the user to select a file that exists.
'1   Confirm creation when the user selects a file that does not exist.
'2   Allow the user to select any file whether it exists or not.
'3   Confirm overwrite when the user selects a file that exists.
'+4  Selecting a different directory changes the application's current directory.
'For more detailed information visit the WWB website.
' http://www.winwrap.com/web/basic/language/?p=doc_getfilepath__func.htm
varStrLook = GetFilePath$("*.stt","stt",strAppPath,"Select Tablelook and confirm with Save.",4)
' Tested re-applying the dollar sign, cofusingly removing or adding the Dollar sign ($)
' seems to have no effect.

' If user presses Cancel or selected a file with the wrong file type then exit script
If (Len(varStrLook)= 0) Or (Right(varStrLook,3)<>"stt") Then 
    Exit Sub
End If

' Loop which assigns a new TableLook to all existing Tables.
intCount = objOutputItems.Count 'Assigns the total number of output items to the count-marker
For i = 0 To intCount-1 'Start loop
    Set objOutputItem=objOutputItems.GetItem(i) 'Get current item
    If objOutputItem.SPSSType=SPSSPivot Then 'If the item is a pivot table then...
        Set objPivotTable=objOutputItem.ActivateTable 'Activate the table for editing
        objPivotTable.TableLook = varStrLook 'Apply the earlier selected table look.
        objPivotTable.RotateColumnLabels=True 'Rotate collumn lables
        objOutputItem.Deactivate 'Confirm changes and deactivate the table
    End If 
Next 'End loop
'********************************************************
'Updated script from Version 15 ->
'Script now includes inner column label rotation
'Script has been modified and adapted to improve performance
'and to help people who wish to use/adapt the script
'in future endeavours.
'********************************************************
Bye:
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T01:52:51.243

首先要尝试的是用 GetTableOLEObject 替换激活/停用调用。这样效率更高，并且不需要数据透视表编辑器，但是您可以在激活的表上做所有可以做的事情。

如果您没有 V20 的当前修订包 fixpack2，那么安装它也是一个好主意。

# php - 如何比较2个数组并获得差异

> ID：15524494
> 
> 赞同：1
> 
> 时间：2013-03-20T13:09:52.237
> 
> 标签：php, arrays

我有 2 个要比较的数组，然后收集差异。

我只在每个数组中显示 2 个元素。通常每个数组包含超过 80000 个元素

Array1 输出 ( `$Memcooltransactions`)

```
 Array ( 
[0] => Array ( [zipcode] => 0000 [city] => 23593 Vellinge, Sverige [numberofuniqmembers] => 11 [numberofuniqspisesteder] => 0 
[1] => Array ( [zipcode] => 4212 [city] => CPH, Denmark [numberofuniqmembers] => 2 [numberofuniqspisesteder] => 0 ) 
```

Array1 输出 ( `$result`)

```
 Array ( 
[0] => Array ( [zipcode] => 0460 [city] => Nordskali, Færøerne [numberofuniqmembers] => 1 [numberofuniqspisesteder] => 0 
[1] => Array ( [zipcode] => 4212 [city] => CPH, Denmark [numberofuniqmembers] => 2 [numberofuniqspisesteder] => 0 ) 
```

期望的输出：

```
 [0] => Array ( [zipcode] => 0000 [city] => 23593 Vellinge, Sverige [numberofuniqmembers] => 11 [numberofuniqspisesteder] => 0 
[1] => Array ( [zipcode] => 0460 [city] => Nordskali, Færøerne [numberofuniqmembers] => 1 [numberofuniqspisesteder] => 0 
```

这就是我尝试的方式：

```
$result2 = array_diff_assoc($Memcooltransactions, $result1); 
```

但我得到这个输出：（`$result2`）

```
 Array (
    [0] => Array ( [zipcode] => 0000 [city] => 23593 Vellinge, Sverige [numberofuniqmembers] => 11 [numberofuniqspisesteder] => 0 
    [1] => Array ( [zipcode] => 4212 [city] => CPH, Denmark [numberofuniqmembers] => 2 [numberofuniqspisesteder] => 0
    [2] => Array ( [zipcode] => 0460 [city] => Nordskali, Færøerne [numberofuniqmembers] => 1 [numberofuniqspisesteder] => 0 
   ) 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T13:46:23.863

尽管您已经有很好的提示如何解决这个问题，但还有另一个提示。

```
 $array_a; // array 1
    $array_b; // array 2
    $array_c = array(); // result array

    function($array_a , $array_b) {
      foreach($array_a as $keya => $valuea) {

        foreach(array_b as $keyb => $valueb) {

                  if($valuea['city'] = $valueb['city']){
                        array_push($array_c, $array_b[$key]);
                  }
        }
      }
   } 
```

这没有经过测试，并且来自我的头顶。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T13:16:59.363

使用 php 的 array_dif() 函数。它比较 2 个数组并输出不匹配的内容。它只是一种单向比较，因此您将数组 2 与数组 1 进行比较，它会吐出数组 1 的差异。如果您想将 1 与 2 进行比较，那么您也必须以相反的方式运行它。这将为您留下 2 个输出数组。

然后你可以 array_merge() 2 一起给你一个主数组。这就是你要找的。

参考： http: [//php.net/manual/en/function.array-diff.php](http://php.net/manual/en/function.array-diff.php) [http://www.php.net/manual/en/function.array-merge.php](http://www.php.net/manual/en/function.array-merge.php)

# java - Gridbaglayout 第二行滚动出容器

> ID：15524499
> 
> 赞同：0
> 
> 时间：2013-03-20T13:10:00.520
> 
> 标签：java, swing, gridbaglayout

我正在尝试实现类似于轮播的布局。它需要在第二行使用复选框字段水平添加图像。我在 jscrollpane 中有一个面板，单个图像作为标签添加到面板中。请看屏幕截图。当我滚动窗格时，包含图像的第一行很好地保留在面板内..但是如果您注意到第二行复选框，它会滚动出面板。这是代码...

```
for (int ii=0; ii<imageFiles.length; ii++) {
       GridBagConstraints constraint = new GridBagConstraints();  
        lab1 = new FittoSize().getContents(ImageIO.read(new File("C:\\Users\\images\\"+imageFiles[ii])));

        constraint.gridx = ii;
        constraint.gridy =0;  
        jPanel9.add(lab1,constraint);
    }
    for (int ii=0; ii<imageFiles.length; ii++) {
        GridBagConstraints constraint1 = new GridBagConstraints();         
        constraint1.anchor = GridBagConstraints.SOUTH;           
        chkbox = new Checkbox("asdasdada");
        constraint1.gridx = ii;
        constraint1.gridy =1;

        jPanel9.add(chkbox, constraint1);
      } 
```

不知道出了什么问题..任何帮助都非常感谢..谢谢..

# maven - Maven：仅在存在命令行标志时执行插件

> ID：15524500
> 
> 赞同：5
> 
> 时间：2013-03-20T13:10:01.143
> 
> 标签：maven, plugins, maven-2, command-line-arguments, maven-antrun-plugin

当我调用命令时，我希望 Maven 仅在命令行上有标志时运行某个插件`mvn`。

例如：

假设我有一个名为`maven-foo-plugin`. `--foo`当我调用 maven 命令时，我只希望 maven 在存在标志时运行这个插件。

所以，与其说...

```
mvn install 
```

...我会说...

```
mvn install --foo 
```

第一个不应该使用/调用插件`maven-foo-plugin`，但第二个应该。默认情况下，我不希望此插件运行，但当且仅当`--foo`存在 时。我是否添加了另一个参数`maven-foo-plugin`来使其执行此操作？

我正在使用的插件`maven-antrun-plugin`具有解压缩文件的任务。当然，有时该文件存在，有时不存在。有时，它不存在，我也不需要它。所以，我需要一种方法（最好通过命令行，除非有人有更好的主意）来打开/关闭这个插件。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-20T13:14:42.733

在 maven 中触发条件操作的正确方法是使用 profile。您可以配置包括插件激活在内的特定配置文件，然后您将使用触发执行

`mvn targetPhase -P myprofile`

（您也可以指定特定的属性值来激活配置文件）

请参阅[Maven：使用基于配置文件的插件](https://stackoverflow.com/questions/9063979/maven-using-a-plugin-based-on-profile)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-20T13:57:32.480

正如@Gab 所提到的，使用 Maven 配置文件是要走的路。创建一个配置文件并在配置文件中配置您的插件。然后在配置文件的`activation`部分，引用环境变量，带或不带值：

```
<profiles>
  <profile>
    <activation>
      <property>
        <name>debug</name>
      </property>
    </activation>
    ...
  </profile>
</profiles> 
```

`debug`如果您在调用 Maven 时定义变量，上面的示例将激活配置文件：

```
mvn install -Ddebug 
```

请注意，您必须在环境变量前面加上前缀`-D`，以便将它们传递给运行 Maven 的 JVM。

更多细节可以在这里找到：[http ://maven.apache.org/guides/introduction/introduction-to-profiles.html](http://maven.apache.org/guides/introduction/introduction-to-profiles.html)

# java - Java 流操作

> ID：15524501
> 
> 赞同：0
> 
> 时间：2013-03-20T13:10:03.953
> 
> 标签：java, stream, iostream

我正在修改一些当前使用以下过程的现有 java 代码：

1.  打开 FileInputStream 以从磁盘读取文件。
2.  将 FileInputStream 传递给 DataInputStream 的构造函数
3.  将 DataInputStream 中的数据读入字节数组
4.  基于字节数组创建一个 Apache Commons ByteArrayPartSource
5.  基于 ByteArrayPartSource 创建一个 Apache Commons FilePart。
6.  基于 FilePart 创建一个 Apache Commons MultipartRequestEntity。
7.  调用需要 MultipartRequestEntity 作为其参数的外部 API。

我正在尝试通过添加代码来扫描输入文件并搜索/替换文本字符串来修改此过程。例如，它可能会扫描文件以查找模式“abc”并将其替换为“xyz”。但是，我不确定应该将此修改添加到哪个步骤。我选择哪一步对性能有影响吗？是否可以在不将输入文件写入临时区域的情况下进行内存中的搜索/替换？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T13:24:40.360

如果您正在阅读的文件是文本文件，您可以：

*   使用接受字节数组的字符串构造函数将您从第 3 步获得的字节数组转换为字符串
*   *使用replace*或*replaceAll*方法对所述字符串进行搜索和替换操作（需要一些正则表达式知识）
*   *使用getBytes*方法将结果转换回字节数组
*   从步骤 4 恢复处理

**强烈**建议您在字符串构造函数和 getBytes 方法中指定文件编码，以避免难以调试的编码问题。

...如果文件是二进制文件...我想不出一种方法来搜索和替换其中的文本，对不起。

# sql-server - 根据类型查询 SQL XML 字段

> ID：15524509
> 
> 赞同：0
> 
> 时间：2013-03-20T13:10:29.757
> 
> 标签：sql-server, xquery-sql, sqlxml

所以我的`xml`数据库中有一个字段。

有时我正在做的事情失败了，我在我的领域得到以下信息：

```
<errorMessage>No response received!</errorMessage> 
```

如何查询我的数据库以返回 xml 字段包含`errorMessage`XML 的所有行？

所以像

```
SELECT * FROM
TABLE
WHERE xml IsOfType 'errorMessage' 
```

我想我需要使用`exists`，但语法让我望而却步。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T13:17:23.230

弄清楚了

```
SELECT TOP 100 * FROM dbo.TABLE with (nolock)
WHERE Response.exist('/errorMessage') = 1 
```

# xaml - 重叠控件 - Canvas.ZIndex 不起作用

> ID：15524511
> 
> 赞同：0
> 
> 时间：2013-03-20T13:10:34.440
> 
> 标签：xaml, windows-phone-7.1

背景：

对于我的 Windows Phone 应用程序，我创建了一个名为 CharacterPresenter 的 UserControl（简称为 CP）。这是一个带有边框控件的小矩形，我可以在 PhoneAccentBrush 和透明之间切换，以便用户可以看到它何时被选中。

我创建了第二个名为 MultiCharacterPresenter (MCP) 的 UserControl。这包含一个水平方向的 StackPanel，用于在单行上显示多个 CP 控件。这也有一个边框控件，因此用户可以看到何时选择了整行。

请注意，任何时候只能选择一个*Presenter，并且所有BorderThickness="6"。

要求：

我不能有一个 12 像素。每个 CP 之间的间隙（由透明边框引起），所以我设置了 Border Margin="-6,-6,-6,-6"。这将边框置于 CP UserControl 的矩形边界之外，并允许 CP 控件在 MCP 内形成一条连续的线。

So then, when a CP is selected, the Border overlaps the neighbouring CP controls. 这很好，因为选定的 CP 具有用户的焦点，因此其他 CP 控件可能被部分遮挡是可以的。

问题：

问题是每个 CP 的 Border 右侧都在右侧下一个 CP 的**下方**。只有最右边的 CP 显示完整的边框。我希望在选择 CP 但部分隐藏时显示整个边框。

非解决方案：

我尝试将所有边框控件的 Canvas.ZIndex 设置为 1（而所有其他内容的默认值为零），这应该将边框控件放在其他所有内容之上......但这不起作用。我不确定为什么。

如果有所作为，我将根据数据将 CP 控件一一添加到代码中的 MCP。因此，ZIndex 可能仅在所有控件同时呈现时才起作用，例如，如果它们已经存在于 XAML 中（未以编程方式添加）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T13:21:25.637

`Panel`任何相对于彼此包含的控件的布局是由`Panel`自身定义的。在您的情况下，您使用的是 a `StackPanel`，它没有 Z-index 的概念。它按照添加到其`Children`集合中的顺序排列项目。`ZIndex`您正在使用的附加属性是在其上定义的，`Canvas`因为它被`Canvas`面板用作其布局过程的一部分。

您为什么不尝试将 BorderThickness 更改为 0 呢？

# vb.net - .NET 无需 Microsoft.Office.Interop 即可读取 word/excel 文档

> ID：15524512
> 
> 赞同：1
> 
> 时间：2013-03-20T13:10:36.140
> 
> 标签：vb.net, excel, ms-word

我正在尝试在 VB.NET 下打开一个 doc 文件，我发现了一种非常简单的方法来使用 word 来完成它：

例如：

```
 Dim doc As Word.Document
    Dim wordApp As New Word.Application

    Dim allText As String
    Try
        doc = wordApp.Documents.Open("C:\marti.doc")
        allText = doc.Range.Text()
        doc.Close()
        RichTextBox1.Text = allText
    Catch
        'error            
    End Try 
```

（更详细的信息： http: [//support.microsoft.com/kb/316383](http://support.microsoft.com/kb/316383)）

这可以工作，但它需要打开 Microsoft Word 窗口来处理它。我需要在没有安装 Word 的情况下使用它。所以我需要一个可以打开 doc/excel 文件的库。

你知道可以做到这一点的好图书馆吗？

我找到了这个库： [http ://bytescout.com/download/trial/documentsdk.html](http://bytescout.com/download/trial/documentsdk.html)

你试过这个吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-11-19T10:34:55.633

与 Office 文件交互的推荐方式是通过 Office OpenXML 库。你可以在[这里](https://www.microsoft.com/en-gb/download/details.aspx?id=30425)得到它。

如果您使用的是 Microsoft Office 2003，并且安装了适用于 Word、Excel 和 PowerPoint 2007 文件格式的 Microsoft Office 兼容包，则可以在 Open XML 中加载和保存文档。[您可以下载兼容包并在此处](https://support.microsoft.com/en-us/kb/923505)找到更多信息。

这是收集文档内容的示例方法：

```
Private Shared Function GetWordDocContent(strDoc As String) As String
    Dim stream As Stream = File.Open(strDoc, FileMode.Open)
    Dim wordprocessingDocument__1 As WordprocessingDocument = WordprocessingDocument.Open(stream, True)
    Dim body As Body = wordprocessingDocument__1.MainDocumentPart.Document.Body
    Dim content As String = body.InnerText
    wordprocessingDocument__1.Close()
    Return content    
End Function 
```

另一个例子[在这里](https://msdn.microsoft.com/en-us/library/bb669175.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-19T13:26:28.763

对于处理 docx 文件，您可以尝试[NPOI](https://github.com/tonyqus/npoi)或[DocX](http://docx.codeplex.com/)

对于旧的单词格式（.doc），我尝试过[Syncfusion DocIO组件，但我更喜欢在](http://www.syncfusion.com/products/file-formats/docio)[NetOffice](https://netoffice.codeplex.com/)中使用单词自动化，比互操作好得多

# c++ - CRC32 英特尔实现

> ID：15524517
> 
> 赞同：0
> 
> 时间：2013-03-20T13:10:41.367
> 
> 标签：c++, intel, crc32

我想使用 intel 方法来计算文件 crc（在 c++ 中）。我找到了这个[http://create.stephan-brumme.com/crc32/](http://create.stephan-brumme.com/crc32/) (Slicing-by-8)。但是这个实现在 int 中返回了我的 crc32，但我想在 unsigned char[4] 中获得 crc32，就像在某些库中一样（例如 cryptopp）。知道我该怎么做吗？问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T13:17:53.553

例如，您将 int 转换为字节，如下所示：

```
void Uint2Uchars(unsigned char* buf, unsigned int n)
{
  memcpy(buf, &n, sizeof n);
} 
```

或者，如果您对特定的字节顺序感兴趣，您可以这样做：

```
void Uint2UcharsLE(unsigned char* buf, unsigned int n)
{
  size_t i;
  for (i = 0; i < sizeof n; i++)
  {
    buf[i] = n;
    n >>= CHAR_BIT;
  }
} 
```

或者

```
void Uint2UcharsBE(unsigned char* buf, unsigned int n)
{
  size_t i;
  for (i = 0; i < sizeof n; i++)
  {
    buf[sizeof n - 1 - i] = n;
    n >>= CHAR_BIT;
  }
} 
```

不要忘记包括适当的标题，`<string.h>`并且`<limits.h>`如果适用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T13:19:32.227

用这样的东西你可以转换，但这取决于小/大端和你的整数有多大。

```
#pragma pack(1)

#include <cstdint>

typedef union
{
  char crc4[4];
  uint32_t crc32;

} crc;

crc.crc32 = yourcrc();

crc.crc4[0...3] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T13:27:20.967

假设您的 int 是 32 位：

```
unsigned int i = 0x12345678; 
```

小端：

```
char c2[4] = {(i>>24)&0xFF,(i>>16)&0xFF,(i>>8)&0xFF,(char)i}; 
```

大端：

```
char* c = (char*)&i; 
//or if you need a copy:
char c1[4];
memcpy (c1,&i,4);
//or the same as little endian but everything reversed 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T13:25:37.390

小端的简单代码

```
int i = crc();
unsigned char b[4];
b[0] = (unsigned char)i;
b[1] = (unsigned char)(i >> 8);
b[2] = (unsigned char)(i >> 16);
b[3] = (unsigned char)(i >> 24); 
```

对于大端序，反之亦然

```
int i = crc();
unsigned char b[4];
b[3] = (unsigned char)i;
b[2] = (unsigned char)(i >> 8);
b[1] = (unsigned char)(i >> 16);
b[0] = (unsigned char)(i >> 24); 
```

# mysql - 按列排序 MySQL 行，但不按字母顺序

> ID：15524518
> 
> 赞同：0
> 
> 时间：2013-03-20T13:10:43.533
> 
> 标签：mysql

对不起，如果标题有点模棱两可并且让人想起其他半相关的问题），这个问题实际上很简单。

我有一个 VARCHAR 列，它可以有 1 个字符的值，例如`M,G,D and S`. 如果我按字母顺序对结果进行排序，在此示例中它将按顺序显示它们：`D-G-M-S`. 但是，我需要按以下顺序显示行：

```
G-D-M-S 
```

有没有办法在查询中完成这个？我知道我可以在 PHP 中对结果进行自定义排序，但如果可能的话，我宁愿在查询中进行。对于这个例子，我只需要在结果中切换“G”和“D”的顺序，这个简单问题的解决方案就足以满足任何答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T13:14:28.057

您可以编写自定义`case`语句：

```
Select *
from your_table
order by
   case your_column 
     when 'G' then 1
     when 'D' then 2
     when 'M' then 3
     when 'S' then 4
   end 
```

另外，另一种解决方案是在物理级别更改排序规则：

[通过向 8 位字符集添加简单排序规则来更改默认排序](https://stackoverflow.com/questions/11036621/change-default-sorting-by-adding-a-simple-collation-to-an-8-bit-character-set)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T13:14:32.940

我要做的是定义一个包含 2 列的临时表或永久表：

```
letter  |  ordernum
-------------------
G       |  1
D       |  2
M       |  3
S       |  4 
```

然后，您将现有表连接到字段“letter”上的新表，并使用新表“ordernum”字段进行排序...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T13:14:43.923

```
SELECT
    if(columnname='G',1,
        if(columnname='D',2,
            if(columnname='M',3,
                if(columnname='S',4,0
    )))) SortOrder
FROM tablename
ORDER BY
    SortOrder ASC 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-20T13:15:40.393

```
 Select col from table 
   order by case when col = 'G' then 1 
   when col = 'D' then 2
   when col = 'M' then 3 
   case when col = 'S' then 4 else 5 end ; 
```

# java - onStateChange 在大气框架中被多次调用

> ID：15524521
> 
> 赞同：1
> 
> 时间：2013-03-20T13:10:50.610
> 
> 标签：java, atmosphere

我在我的应用程序中使用了**气氛**框架。

[https://github.com/Atmosphere/atmosphere](https://github.com/Atmosphere/atmosphere)

我扩展了 AbstractReflectorAtmosphereHandler 类并实现了

```
-onRequest
-destroy
-onstatechanged 
```

方法。

当客户端想要向服务器发送消息时：

```
subSocket.push(jQuery.stringifyJSON({ data: "blahblah", source:"client" })); 
```

调用 onRequest 函数；然而消息

```
Object message = atmosphereResource.getAtmosphereResourceEvent().getMessage(); 
```

是空的。

比我尝试使用每次调用的 onstatechanged

```
(1) The remote connection gets closed, either by a browser or a proxy
(2) The remote connection reach its maximum idle time (AtmosphereResource.suspend))
(3) Everytime a broadcast operation is executed (broadcaster.broadcast) 
```

然而，即使在过滤掉 1 和 2 之后

```
 public void onStateChange(AtmosphereResourceEvent event)
                throws IOException {
        if (source.equals("client") && !event.isResumedOnTimeout() && !event.isResuming()){       
                    System.out.println("message form client");
                    System.out.println(message.toString());
        } else {
                //normal onstatechanged code from AbstractReflectorAtmosphereHandler
        } 
```

但是，消息会随机打印 2 到 4 次。它应该只被调用一次。

所以我的**问题**是：我可以在 onRequest 方法中访问消息吗，或者为什么 onStateChange 被调用了这么多次。

编辑：根据 jF 给出的答案，我已经能够访问 onRequest 函数中的消息。（但我不确定这是否是他真正的意思）。

```
public void onRequest(AtmosphereResource resource) throws IOException {
    //Object message = resource.getAtmosphereResourceEvent().getMessage(); //is empty why?

    //leave connection open
    resource.suspend();

    BufferedReader reader = resource.getRequest().getReader();
    Object message = reader.readLine();

    if (message !=null){
        System.out.println("**onRequest: "+message.toString());
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T14:13:11.307

You need to read the request's body by doing, in your `onStateChange`:

```
atmosphereResource.getRequest().getReader (or getInputStream). 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T15:51:02.163

也许这对其他人有帮助：

```
public void onRequest(AtmosphereResource resource) throws IOException { 
    //Object message = resource.getAtmosphereResourceEvent().getMessage(); //is empty why?
    //leave connection open
    resource.suspend();

    BufferedReader reader = resource.getRequest().getReader();
    Object message = reader.readLine();

    if (message !=null){
        Object obj = JSONValue.parse(message.toString());
        JSONObject jsonObject = (JSONObject) obj;
        Object source = jsonObject.get("source");

        System.out.println("**onRequest: "+message.toString());
        ArrayList frame = new ArrayList(); 
        frame.add(jsonObject.get("type"));
        frame.add(jsonObject.get("data"));
        writeQueue.add(frame);
    }
} 
```

# java - 为什么 EAR 中的多个 ejb jar 共享同一个类加载器，而每个 WAR 都有自己的类加载器？

> ID：15524529
> 
> 赞同：3
> 
> 时间：2013-03-20T13:11:18.007
> 
> 标签：java, jakarta-ee, ejb, classloader

好吧，标题几乎说明了:)。从我所读到的任何内容中，我都知道 EJB 在设计上共享一个类加载器，但我愿意理解其背后的原因。将不胜感激任何指针。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T13:14:41.943

每个 WAR 都是一个独立的模块。EAR 根目录中的每个 JAR 以及内部的 WAR 文件都是相关模块。因此，他们使用相同的类加载器是有意义的。在多个 WAR 文件之间共享类加载器是不可行的。

# jquery - 为 jTemplate 执行 processTemplate 时出现无效标签错误

> ID：15524531
> 
> 赞同：0
> 
> 时间：2013-03-20T13:11:21.197
> 
> 标签：jquery, label, jtemplate

我收到引用 jtemplates.js 的“无效标签”错误。如果我用 processTemplate 注释掉该行，它就会消失。那时，我什至可以在 result.d 上发出警报。

这是我的 AJAX 调用：

```
var data = { ID: @SessionVariables.ID };
    $.ajax({
        type: "POST",
        url: "../Services/DataService.asmx/FetchProfitSummaryData",
        data: JSON.stringify(data),
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function (result, status) {
            $('#rptProfitSummary').setTemplateURL('../Investment/JTemplates/TestListTemplate.htm');
            $('#rptProfitSummary').processTemplate(result.d);
       },
        error: AjaxFailed
    }); 
```

我的模板内容很简单：

```
<table>
    <tr>
        <td>JTemplate basic success!</td>
    </tr>
</table> 
```

正如我在其他问题中看到的那样，它似乎与 JSON 与 JSONP 或验证问题无关。我也在使用 jquery 1.7，所以使用早于该版本的错误也不是问题。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T12:39:45.737

事实证明，该错误具有误导性。它真的与任何标签无关。我忽略的是模板的路径不正确。代替

```
'../Investment/JTemplates/TestListTemplate.htm' 
```

它应该是

```
'../JTemplates/TestListTemplate.htm'. 
```

# sql - MS-SQL 电子邮件地址列表 LIKE 语句/正则表达式

> ID：15524532
> 
> 赞同：1
> 
> 时间：2013-03-20T13:11:24.420
> 
> 标签：sql, sql-server, regex, parsing, sql-like

我的表中有一个名为的列，`TO`它是一个以逗号分隔的电子邮件地址列表。(1-n)

我不关心一行，如果它只包含 What@mycompany.com 的地址*并*希望将其标记为 0。但是，如果一行包含非 mycompany 地址（即使存在 mycompany 地址）我想将其标记为 1。这可能使用一个 LIKE 语句吗？

我试过了;

```
AND
    [To]  like '%@%[^m][^y][^c][^o][^m][^p][^a][^n][^y]%.%' 
```

理想的输出将是：

```
alice@mycompany.com, bob@mycompany.com, malory@yourcompany.com     1
alice@mycompany.com, bob@mycompany.com                             0
malory@yourcompany.com                                             1 
```

如果不可能的话，编写某种解析函数将地址拆分成一个表会更好吗？我没有数据中其他域的详尽列表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T13:25:38.063

这很丑陋，但它有效。case语句比较@符号的出现次数和@mycompany.com的出现次数（XXX..只是为了保持字符串的长度）：

```
select 
    * 
    , flag = case when len(field) - len(replace(replace(field,'@mycompany.com','XXXXXXXXXXXXXX'),'@','')) > 0 then 1 else 0 end 
from (
    select 'alice@mycompany.com, bob@mycompany.com, malory@yourcompany.com' as field union all 
    select 'alice@mycompany.com, bob@mycompany.com' union all 
    select 'malory@yourcompany.com' 
) x 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T13:27:29.953

我会建议一个简单的计数方法。计算“@mycompany”出现的次数并计算逗号的数量。如果这些不同，那么你有一个问题：

```
 select emails,
        (case when len(emails) - len(replace(emails, ',', '')) = 
                   len(emails) - len(replace(emails, '@mycompany.com', 'mycompany.com'))
              then 0
              else 1
         end) as HasNonCompanyEmail
 from t 
```

为了简化算术，我将“@mycompany.com”替换为“mycompany.com”。这只会删除一个字符。

# android - 安卓屏幕管理

> ID：15524555
> 
> 赞同：0
> 
> 时间：2013-03-20T13:12:18.507
> 
> 标签：android

这是一个非常基本的问题，我有几个屏幕，现在当您从一个屏幕转到另一个屏幕时，您可以按返回并循环返回所有窗口。

我宁愿当你按下它时，它会把你带到一个特定的窗口，例如：

*   菜单屏幕---->用户点击信息
*   信息屏幕---->用户点击骑行信息
*   乘车信息---->用户点击返回
*   信息屏幕

现在这与分层父级有关，这会定义它返回的位置吗？

我的问题的第二部分是，如果我没有任何资源可以发布或存储信息以进行恢复，当用户暂停我的应用程序时我应该怎么做？目前，如果您返回菜单屏幕并重新选择应用程序，它将启动一个新实例而不是恢复。我只是简单地实现：

```
 @Override
public void onPause() {
    super.onPause();  // Always call the superclass method first
} 
```

和

```
@Override
public void onResume() {
    super.onResume();  // Always call the superclass method first
} 
```

抱歉，如果这有点基本！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T13:21:47.300

这里没有基本问题:)

最简单的方法是重写 onBackPress() 函数。

样本 ：

> @Override public void onBackPressed() { //在这里做你想做的事情 }

为了在用户离开应用程序时保存变量，您需要覆盖 onSaveInstanceState(Bundle bundle)

> @Override protected void onSaveInstanceState(Bundle bundle) { super.onSaveInstanceState(outState); bundle.putInt("样本", 1); }

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T13:22:24.363

您可能希望在打开新活动[Android Dev时为您的意图设置 FLAGS](http://developer.android.com/reference/android/content/Intent.html#setFlags%28int%29)

像这样的东西-

```
Intent a = new Intent(this,A.class);
a.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivity(a); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T13:23:06.660

对于您的两个部分：

1) 让 Android 处理后退按钮几乎总是最好的，其顺序由后退堆栈决定：[请参阅此处了解说明](http://developer.android.com/guide/components/tasks-and-back-stack.html)。如果您想要分层导航，我建议您查看`up`按钮 - 请参阅[此开发人员页面](http://developer.android.com/design/patterns/navigation.html)以获得有关如何使用不同导航工具的良好说明。

此外，如果您不想让活动出现在您的后退堆栈中，您可以`android:noHistory="true"`在清单中设置该属性，这意味着用户无法使用后退按钮返回到它。

2）如果用户离开了你的应用程序，它会自动暂停，你不需要实现`onPause`或`onResume`发生这种情况。但是，操作系统也可以终止收集。如果发生这种情况，那么当用户再次从启动器打开它时，它将重新启动。应用程序的任何先前运行的实例都应自动打开。

# jquery - 将 jQuery 插件应用于页面上当前不存在的元素

> ID：15524560
> 
> 赞同：1
> 
> 时间：2013-03-20T13:12:28.337
> 
> 标签：jquery

我构建了这个非常令人兴奋的 jQuery 插件，它可以将元素变为蓝色。 [http://jsfiddle.net/LpCav/](http://jsfiddle.net/LpCav/)

我希望将其应用于当前不在页面上的元素。

我知道一种选择是在我将新元素添加到页面后立即应用它。另一种选择是克隆一个现有元素并将其添加到页面而不是创建新元素。我不想做这些选择中的任何一个。

相反，我可以使用 on() 将其应用于`<li>`内部的任何当前或未来元素`<ul id="myNewList">`吗？

如果没有，我可以修改插件以使其执行此行为吗？

谢谢

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml"> 
    <head> 
        <meta http-equiv="content-type" content="text/html; charset=ISO-8859-1" /> 
        <title>Future</title>  
        <script src="http://code.jquery.com/jquery-latest.js" type="text/javascript"></script> 
        <script type="text/javascript">
            (function( $ ){
                $.fn.makeBlue = function() {  
                    return this.each(function() {
                        $(this).css('color','blue');
                    });
                };
            })( jQuery );

            $(function(){
                $('.myElement').makeBlue();
                $('#add').click(function(){
                    $('#myNewList').html('<li class="myElement">hello</li>')
                });
            });
        </script>
    </head>

    <body>
        <button id="add">Add</button>
        <ul id="myList">
            <li class="myElement">hello</li>
            <li class="myElement">hello</li>
        </ul>
        <ul id="myNewList">
        </ul>
    </body> 
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T13:22:17.853

由于您放弃了最简单（可能也是最常见的解决方案），因此您只能捕获一些“DOM 已更改”事件并绑定到该事件。根据我的发现，有一些事件，但支持很差。长话短说：这是一个库，可以为您提供所需的内容：

[https://github.com/joelpurra/jquery-mutation-summary](https://github.com/joelpurra/jquery-mutation-summary)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T13:15:40.307

我通常使用`$(document).ready(...)`块来确保在每个页面加载时调用代码（甚至是 ajax 回调）。但是，您应该将您的插件实现为一个幂等的插件 - 对同一元素的多次调用应该产生相同的结果。

根据我对现有 jquery 插件和内置插件的经验，我观察到以下内容：

*   如果多次使用相同的配置对相同的元素调用相同的插件，则后续调用不会产生任何可见的差异

*   如果在同一元素上使用不同的配置调用相同的插件，则效果是将配置与先前的调用之一合并。

也许如果你在你的插件中坚持这种行为，你俩都会与现有插件的行为保持一致，并让它们在场景中工作`$(document).ready`

使用`.on(...)`可能会更好，因为它会`<ul>`在需要时更新相应的元素。尽管如此，如果已经有列表项，插件应该以幂等方式处理它们。

* * *

编辑：

关于代码中的幂等性问题，它看起来像这样：

```
$.fn.makeBlue = function() {  
    return this.each(function() {
        var elem = $(this);
        if (elem.css('color') != 'blue') {
            // it is likely for the element not to have been processed yet.
            elem.css('color','blue');
        }
    });
}; 
```

更好的解决方案是将自定义 css 类添加到已处理的元素中 - 只是将它们标记为您的插件已访问。然后你可以`$(this).hasClass('?')`改为检查。这看起来像：

```
$.fn.makeBlue = function() {  
    return this.each(function() {
        var elem = $(this);
        if (!elem.hasClass('makeBlueCalled')) {
            elem.css('color','blue');
            elem.addClass('makeBlueCalled');
        }
    });
}; 
```

在您的插件中，如果唯一的目的是为文本着色，我最好使用 css 定义

```
ul.myList > li.myElement.makeBlueCalled { color: blue !important; } 
```

并完全删除该`elem.css('color','blue');`行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T13:16:31.810

有 DOM2 “突变事件”来捕捉对 DOM 树的更改，但它们没有得到很好的支持，实际上已被 W3C 弃用。有新的“突变观察者”事件，但它们在 DOM4 中，也没有完全支持。有关这些的更多详细信息，请参阅[此问题](https://stackoverflow.com/questions/5416822/dom-mutation-events-replacement)。

无论如何（没有双关语），事实是 JS 是一种单线程语言，除非*你*把它放在那里，否则页面上不会出现任何元素，因此在插入时进行所需的更改通常是微不足道的。

否则，此特定示例的正确答案是将其放入您的 CSS 样式表中：

```
.myElement {
    color: blue;
} 
```

如果您真的在做比应用样式更复杂的事情，唯一可移植的选择是在知道元素存在后调用插件。

# c# - StructureMap - 为多租户 Web 应用程序上的每个数据库初始化实体框架

> ID：15524561
> 
> 赞同：0
> 
> 时间：2013-03-20T13:12:29.903
> 
> 标签：c#, asp.net-mvc, repository-pattern, structuremap, multi-tenant

我们正在开发一个多租户的 ASP.NET MVC Web 应用程序。每个租户都有自己的数据库。数据访问由实体框架管理。StructureMap 被用作 IoC 容器。实体框架数据上下文已设置为 http 请求范围。对于每个请求，都会计算出租户，并且 StructureMap 返回实体框架数据上下文和存储库类的新实例。

在 Web 应用程序的启动类（IProcessHostPreloadClient 的实现）中，我想初始化实体框架 - 我需要循环并为每个配置的租户创建一个新的数据上下文实例。解决这个问题的最佳方法是什么？StructureMap 将返回相同的数据上下文，因为它已设置为使用 http/thread 范围进行缓存。

谢谢，哈沙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T20:57:10.780

如果您只想根据租户改变连接字符串，以下应该可以工作：

```
For<Tenant>().Use(c => c.GetInstance<TenantFactory>().CreateTenant());
For<DbContext>().Use(c => new DbContext(
    ConfigurationManager.ConnectionStrings[c.GetInstance<Tenant>().ConnectionName]
        .ConnectionString)); 
```

该类`Tenant`应保存当前租户连接字符串名称，并且`TenantFactory`将创建适当的`Tenant`取消调用您用于确定连接字符串的任何方法。

如果它是一个更广泛的变化，[多容器方法](http://blogs.planetcloud.co.uk/mygreatdiscovery/?tag=/multi-tenancy)可能会更好。

# gwt - Vaadin 资源规划师

> ID：15524563
> 
> 赞同：1
> 
> 时间：2013-03-20T13:12:37.683
> 
> 标签：gwt, drag-and-drop, resources, vaadin

我们刚刚开始开发，`Vaadin`即将开始我们的第一个项目。

该项目旨在创建一个交互式规划板，横轴为资源，纵轴为日期。

需要能够拖放特定资源的预订。

我们已经在 中看到了这个组件`Smart GWT`，并且认为它看起来很有希望：

[http://www.smartclient.com/smartgwt/showcase/#databound_timeline_new](http://www.smartclient.com/smartgwt/showcase/#databound_timeline_new)

有没有人有类似组件的提示`Vaadin`？还是从头开始构建解决方案更好？

我们制作了这个模型来展示这个概念： [![拖放需求的样机](../Images/aa243fd7117a0500484ff1d1b4a4568c.png)](https://i.stack.imgur.com/H6Mh8.png)

感谢各种建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T13:28:29.480

试试看甘特图插件：[https](https://vaadin.com/directory#addon/vaadin-gantt-diagram:vaadin) ://vaadin.com/directory#addon/vaadin-gantt-diagram:vaadin可以看在线demo [http://vaadin-gantt.bazon.ru/vaadin-gantt-demo /](http://vaadin-gantt.bazon.ru/vaadin-gantt-demo/)这个附加组件最接近您的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T15:44:12.220

这对于标准 Vaadin 组件和 Vaadin 拖放操作可能是可行的。查看 Vaadin Sampler 中的[DnD](http://demo.vaadin.com/sampler/#ui/drag-drop)示例。

# jquery - 切换按钮显示/隐藏 div 不断向上跳

> ID：15524565
> 
> 赞同：1
> 
> 时间：2013-03-20T13:12:42.047
> 
> 标签：jquery, html, css

再会

我有 3 个切换按钮，显示/隐藏 3 个 div：

问题：每当我单击任何按钮时，页面都会向上滚动，但不会滚动到顶部...这很烦人，因为它会将用户的注意力从切换的内容上移开...

我不认为这是 href="#" 因为我确实为它们指定了书签......

请注意，最后两个 div 的内容量相同，但第一个 div 的内容要少一些...

为什么每次单击按钮时视口都会向上移动？修复它的最佳方法是什么？

```
 <div id="featuredToggle">
              <ul>
                  <li><a class="latestClick clickedStyle" href="#latestInner">Latest</a></li>
                  <li><a class="make" href="#make">Make</a></li>
                  <li><a class="models" href="#models">Models</a></li>
              </ul>
          </div>

         <div id="latestInner"> 
           content here
         </div>
         <div id="make">
           content
         </div>
         <div id="models">
           content
         </div> 
```

JS：

```
 $(document).ready(function() {

            $('#make').hide(50);
            $('#models').hide(50);

            $('#featuredToggle ul li a').click(function (e) {
                e.preventDefault();

                if ($(this).hasClass('latestClick')) {

                    $('#featuredToggle ul li a.make').removeClass('clickedStyle');
                    $('#featuredToggle ul li a.models').removeClass('clickedStyle');
                    $(this).addClass('clickedStyle');

                    $('#make').hide(200);
                    $('#models').hide(200);
                    $('#latestInner').show(500);

                } else if ($(this).hasClass('make')) {

                    $('#featuredToggle ul li a.latestClick').removeClass('clickedStyle');
                    $('#featuredToggle ul li a.models').removeClass('clickedStyle');
                    $(this).addClass('clickedStyle');

                    $('#latestInner').hide(200);
                    $('#models').hide(200);
                    $('#make').show(500);

                } else if ($(this).hasClass('models')) {

                    $('#featuredToggle ul li a.latestClick').removeClass('clickedStyle');
                    $('#featuredToggle ul li a.make').removeClass('clickedStyle');
                    $(this).addClass('clickedStyle');

                    $('#latestInner').hide(200);
                    $('#make').hide(200);
                    $('#models').show(500);
                }
            });

        }); 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T13:20:34.493

您在代码`#model`中`#models`多次输入错误，这可能会导致切换问题。你`div`的 id 是`model`. 该链接不会正确引用任何元素。此外，您的大部分代码都是完全多余的。始终重用类似的代码。你永远不想为每个元素重做同样的事情。考虑以下简化：

```
$(function() {
    $('#make').hide(50);
    $('#model').hide(50);

    $('#featuredToggle ul li a').click(function (e) {
        e.preventDefault();

        $('#featuredToggle ul li a').not(this).removeClass('clickedStyle');
        $(this).addClass('clickedStyle');

        $('#featuredToggle ul li a').not(this).each(function() {
            $($(this).attr('href')).hide(200);
        });

        $($(this).attr('href')).show(500);
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T14:06:26.197

我想这是因为你隐藏它们的速度比你显示它们的速度要快，所以有一秒钟的总页面高度比它应该的要短。

# java - 使用 String.split() 在双管道 (||) 上拆分字符串

> ID：15524566
> 
> 赞同：5
> 
> 时间：2013-03-20T13:12:47.043
> 
> 标签：java, split

我试图用双管道（||）作为分隔符来分割字符串。字符串看起来像这样：

```
String str ="user@email1.com||user@email2.com||user@email3.com"; 
```

我可以使用 StringTokeniser 对其进行拆分。javadoc 说不鼓励使用此类，而是将 String.split 视为选项。

```
StringTokenizer token = new StringTokenizer(str, "||"); 
```

上面的代码工作正常。但无法弄清楚为什么下面的 string.split 函数没有给我预期的结果..

```
String[] strArry = str.split("\\||"); 
```

我哪里错了..？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-20T13:17:24.657

`String.split()`使用正则表达式。您需要转义要用作分隔符的字符串。

Pattern 有一种方法可以为您执行此操作，即[`Pattern.quote(String s)`](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html#quote%28java.lang.String%29).

```
String[] split = str.split(Pattern.quote("||")); 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-03-20T13:14:21.430

`|`你必须像这样逃避每一个人`str.split("\\|\\|")`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-20T13:16:06.397

试试这个：

```
String[] strArry = str.split("\\|\\|"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T13:26:20.553

你也可以试试这个...

```
String[] splits = str.split("[\\|]+"); 
```

Please note that you have to escape the pipe since it has a special meaning in regular expression and the String.split() method expects a regular expression argument.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-08-16T06:31:34.570

Try this

```
String yourstring="Hello || World";
String[] storiesdetails = yourstring.split("\\|\\|"); 
```

# java - 来自 UI.init() 方法的 setLocation()

> ID：15524567
> 
> 赞同：4
> 
> 时间：2013-03-20T13:12:48.037
> 
> 标签：java, redirect, vaadin

是否可以从 UI 的 init() 方法中使用 getPage().setLocation(...) 。在某些条件下，我必须将用户重定向到外部站点。到目前为止，它不起作用（Vaadin 7.0.2）。

这是代码示例：

```
@Override
public void init(VaadinRequest request) {
   if (myCondition) 
      getPage().setLocation("http://www.externalsite.com");
   else {
      ....
   }     
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T14:26:43.113

奇怪的是它对你不起作用……这`setLocation`就是你所需要的。这是一个工作版本：[VaadinLocationRedirect](https://github.com/cpoile/VaadinLocationRedirect)。 `mvn package`将构建小部件集，`mvn jetty:run`将托管它。如果您弄清楚了，请告诉我们问题出在哪里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T14:55:12.990

发现了我的问题。我使用了旧版本的 WidgetSet，它是从 6.X 时代遗留下来的，并且没有用 Vaadin 7 重新编译。在我修复它之后 - 它工作正常。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-20T14:34:52.653

看起来你可以调用[`open( URL )`](https://vaadin.com/api/com/vaadin/ui/Window.html#open%28com.vaadin.terminal.Resource%29)Window对象的方法在同一个或新的浏览器窗口中打开另一个URL来实现到外部站点的重定向。

作为替代方案，您可以通过调用设置应用程序的退出 URL，`application.setExitUrl()`然后通过调用关闭应用程序`application.close()`- 您的应用程序会话将被关闭，并且浏览器将重定向到指定的地址。

# python - 在 python 中读取/写入文件的更好方法？

> ID：15524576
> 
> 赞同：1
> 
> 时间：2013-03-20T13:13:23.423
> 
> 标签：python, file-handling

假设我有一个包含`file1.txt`大约 3mb 或更多数据的文件（比如 ）。如果我想将此数据写入第二个文件（例如`file2.txt`），以下哪种方法会更好？

使用语言：Python 2.7.3

**方法1**：

```
file1_handler = file("file1.txt", 'r')
for lines in file1_handler:
    line = lines.strip()
    # Perform some operation
    file2_handler = file("file2.txt", 'a')
    file2_handler.write(line)
    file2_handler.write('\r\n')
    file2_handler.close()
file1_handler.close() 
```

**方法2**：

```
file1_handler = file("file1.txt", 'r')
file2_handler = file("file2.txt", 'a')
for lines in file1_handler:
    line = lines.strip()
    # Perform some operation
    file2_handler.write(line)
    file2_handler.write('\r\n')
file2_handler.close()
file1_handler.close() 
```

我认为方法二会更好，因为你只需要打开和关闭`file2.txt`一次。你说什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T13:16:08.850

使用[`with`](http://docs.python.org/2/reference/compound_stmts.html#the-with-statement)，它会自动为您关闭文件：

```
with open("file1.txt", 'r') as in_file, open("file2.txt", 'a') as out_file:
    for lines in in_file:
        line = lines.strip()
        # Perform some operation
        out_file.write(line)
        out_file.write('\r\n') 
```

不推荐使用`open`代替`file`, `file`。

当然在file1的每一行都打开file2是不合理的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T13:23:26.303

我最近在做类似的事情（如果我理解你的话）。怎么样：

```
file = open('file1.txt', 'r')
file2 = open('file2.txt', 'wt')

for line in file:
  newLine = line.strip()

  # You can do your operation here on newLine

  file2.write(newLine)
  file2.write('\r\n')

file.close()
file2.close() 
```

这种方法就像一个魅力！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T13:38:55.100

我的解决方案（源自 Pavel Anossov + 缓冲）：

```
dim = 1000
buffer = []
with open("file1.txt", 'r') as in_file, open("file2.txt", 'a') as out_file:
    for i, lines in enumerate(in_file):
        line = lines.strip()
        # Perform some operation
        buffer.append(line)
        if i%dim == dim-1:
            for bline in buffer:
                out_file.write(bline)
                out_file.write('\r\n')
            buffer = [] 
```

Pavel Anossov 首先给出了正确的解决方案：这只是一个建议；）可能存在一种更优雅的方式来实现这个功能。如果有人知道，请告诉我们。

# c++-cli - 将 std::string 从 c++/cli dll 传递到本机 win32 dll 时调试断言失败错误

> ID：15524591
> 
> 赞同：2
> 
> 时间：2013-03-20T13:14:04.287
> 
> 标签：c++-cli

我有一个调用 c++/cli 接口 DLL 的 C# 表单，它调用了一个 win32 本机 c++ dll。最初这是用 VS2010 编写的，并且正在工作 - 我能够将 System::String 编组为 std::string，将其传递给本机 dll，然后计算出值。然后我将 C# 和 c++/cli 项目转换为 VS2012 以启用智能感知。这需要安装服务包以重新启用 VS2010 中的 4.0 .NET 框架。我在 2010 年重建了 Win32 dll，在 VS2012 中重建了 C# 应用程序和 c++/cli dll，现在我在调用 dll 时收到错误：

调试断言失败！

程序：... 文件：f:\dd\vctools\crt_bld\self_x86\crt\src\dbgheap.c 行：1424

表达式：_pFirstBlock == pHead

```
public ref class ManagedWrapper
{
    CSampleWin32Library* m_pUnmanagedWrapper;

public:
    ManagedWrapper() {m_pUnmanagedWrapper = new CSampleWin32Library();}
    ~ManagedWrapper() {delete m_pUnmanagedWrapper;}

    //Test call to prove integration
    void Test(int x, System::String^ testString) {
        //marshaling example: http://msdn.microsoft.com/en-us/library/bb384865.aspx         
        std::string tmpStdString = marshal_as<std::string>(testString);
        m_pGambitUnmanagedWrapper->Test(x, tmpStdString); //ERROR OCCURS HERE
    };      
}; 
```

希望这就像丢失的某些设置一样简单，或者现在在 VS2012 中需要。据我所知，我没有更改任何代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-28T01:48:56.777

此错误主要是因为您在堆 A 中 malloc 的内存块在堆 B 中被释放。

您应该看看*Windows Via C/C++* --Part IV Dynamic-Link Libraries。

应用程序将在运行时调用 CRT。

有两种调用 CRT 的方法——链接到 DLL C/C++ 运行时库或链接到静态 C/C++ 运行时库以及不同版本的 CRT。

它们都使用不同的内存管理。

因此，在释放内存和链接到 DLL 的代码时应该小心。

# java - 通过 Wi-Fi Direct 广播

> ID：15524593
> 
> 赞同：15
> 
> 时间：2013-03-20T13:14:08.000
> 
> 标签：java, android, broadcast, socketexception, wifi-direct

我正在研究通过多个 Android 设备之间的 Wi-Fi Direct 连接进行广播的可能性。我创建了一个简单的消息广播应用程序来测试它是否有效，但到目前为止我还无法广播消息。当我尝试发送数据包时，我得到一个**SocketException**（网络无法访问）：

```
03-20 13:23:00.148: E/UdpBroadcaster(4180): sendto failed: ENETUNREACH (Network is unreachable)
03-20 13:23:00.148: E/UdpBroadcaster(4180): java.net.SocketException: sendto failed: ENETUNREACH (Network is unreachable)
03-20 13:23:00.148: E/UdpBroadcaster(4180):     at libcore.io.IoBridge.maybeThrowAfterSendto(IoBridge.java:496)
03-20 13:23:00.148: E/UdpBroadcaster(4180):     at libcore.io.IoBridge.sendto(IoBridge.java:465)
03-20 13:23:00.148: E/UdpBroadcaster(4180):     at java.net.PlainDatagramSocketImpl.send(PlainDatagramSocketImpl.java:182)
03-20 13:23:00.148: E/UdpBroadcaster(4180):     at java.net.DatagramSocket.send(DatagramSocket.java:307)
03-20 13:23:00.148: E/UdpBroadcaster(4180):     at com.example.android.wifidirect.UdpBroadcaster.sendMessage(UdpBroadcaster.java:59)
03-20 13:23:00.148: E/UdpBroadcaster(4180):     at com.example.android.wifidirect.UdpBroadcaster.run(UdpBroadcaster.java:44)
03-20 13:23:00.148: E/UdpBroadcaster(4180): Caused by: libcore.io.ErrnoException: sendto failed: ENETUNREACH (Network is unreachable)
03-20 13:23:00.148: E/UdpBroadcaster(4180):     at libcore.io.Posix.sendtoBytes(Native Method)
03-20 13:23:00.148: E/UdpBroadcaster(4180):     at libcore.io.Posix.sendto(Posix.java:146)
03-20 13:23:00.148: E/UdpBroadcaster(4180):     at libcore.io.BlockGuardOs.sendto(BlockGuardOs.java:177)
03-20 13:23:00.148: E/UdpBroadcaster(4180):     at libcore.io.IoBridge.sendto(IoBridge.java:463)
03-20 13:23:00.148: E/UdpBroadcaster(4180):     ... 4 more 
```

这是我的代码的本质：

```
InetAddress broadcastAddress = InetAddress.getByName("255.255.255.255");
int port = 8888;

DatagramSocket socket = new DatagramSocket(port);
socket.setBroadcast(true);
socket.connect(broadcastAddress, port);

String message = "Hello";
byte[] buffer = message.getBytes();

DatagramPacket packet = new DatagramPacket(
        buffer, buffer.length, broadcastAddress, port);

try {
    socket.send(packet); // <----- Causes a SocketException
} catch (IOException e) {
    Log.e(TAG, e.getMessage(), e);
} 
```

[这篇文章](https://stackoverflow.com/questions/10095414/is-multicasting-possible-with-wi-fi-direct)表明应该可以通过 Wi-Fi Direct 进行广播。

有谁知道在**Android**设备上通过 Wi-Fi Direct 进行广播是否真的有效？如果它应该工作，我做错了什么？

我开始认为设备不知道将广播数据包路由到哪里。在我的情况下，它需要在无需 root 设备并手动添加广播数据包路由的情况下工作。

* * *

**更新**

使用*Romain Hippeau*`getBroadcastAddress()`建议的功能后，SocketException 消失了，看起来广播正在按预期工作。但是，我在第二台设备上接收广播时遇到问题。

 *我正在使用以下代码来接收广播：

```
DatagramSocket socket = null;
try {
    socket = new DatagramSocket(8888);
    socket.setBroadcast(true); // Not needed?
    socket.setSoTimeout(200);

    DatagramPacket packet = null;
    while (!mStopping) {
        byte[] buffer = new byte[1024];
        packet = new DatagramPacket(buffer, buffer.length);

        try {
            socket.receive(packet);

            if (packet.getData().length > 0) {
                String receivedString = new String(packet.getData());

                Log.i(TAG, "Received string: " + receivedString);
            }
        } catch (InterruptedIOException e) { /* Ignore */ }
    }
} catch (IOException e) {
    Log.e(TAG, e.getMessage(), e);
} finally {
    if (socket != null)
        socket.close();
} 
```

我还尝试`DatagramSocket`通过添加`InetAddress.getByName("0.0.0.0")`作为参数来添加通配符地址，但没有运气。

建议？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-20T13:31:51.180

**[从https://code.google.com/p/boxeeeremote/wiki/AndroidUDP](https://code.google.com/p/boxeeremote/wiki/AndroidUDP)无耻地窃取**

尝试以这种方式获得网络连接：

```
InetAddress getBroadcastAddress() throws IOException {
    WifiManager wifi = mContext.getSystemService(Context.WIFI_SERVICE);
    DhcpInfo dhcp = wifi.getDhcpInfo();
    // handle null somehow

    int broadcast = (dhcp.ipAddress & dhcp.netmask) | ~dhcp.netmask;
    byte[] quads = new byte[4];
    for (int k = 0; k < 4; k++)
      quads[k] = (byte) ((broadcast >> k * 8) & 0xFF);
    return InetAddress.getByAddress(quads);
} 
```

然后尝试以这种方式发送数据包：

```
DatagramSocket socket = new DatagramSocket(PORT);
socket.setBroadcast(true);
DatagramPacket packet = new DatagramPacket(data.getBytes(), data.length(),
    getBroadcastAddress(), PORT);
socket.send(packet);

// If you want to listen for a response ...
byte[] buf = new byte[1024];
DatagramPacket packet = new DatagramPacket(buf, buf.length);
socket.receive(packet); 
```

编辑：从同一页阅读试试这个......

```
WifiManager wifi = (WifiManager) this.getSystemService(Context.WIFI_SERVICE);
MulticastLock lock = wifi.createMulticastLock("dk.aboaya.pingpong");
lock.acquire();
serverSocket = new DatagramSocket(19876);
serverSocket.setSoTimeout(15000); //15 sec wait for the client to connect
byte[] data = new byte[UDPBatPositionUpdater.secretWord.length()]; 
DatagramPacket packet = new DatagramPacket(data, data.length);
serverSocket.receive(packet);
lock.release();
String s = new String(packet.getData());
System.out.println(s); 
```

请记住，您需要以下权限才能使其工作：
**<uses-permission android:name="android.permission.CHANGE_WIFI_MULTICAST_STATE"/>***

# ruby - Rails 字段验证未按预期工作

> ID：15524594
> 
> 赞同：0
> 
> 时间：2013-03-20T13:14:17.413
> 
> 标签：ruby, ruby-on-rails-3, validation

我有一个用户表，其中有一行名为 screen_name 的字符串。

除其他限制外，屏幕名称不应包含诸如 . , & % @ 等。为此，我构建了以下验证器：

```
validates :screen_name, presence: true,
          length: { maximum: 15 },
          uniqueness: { case_sensitive: false },
          format: { with: /\w+/ } 
```

然后当我输入像 foo.bar 这样的屏幕名称时，它被愉快地接受并存储在数据库中。

我究竟做错了什么？

```
# == Schema Information
#
# Table name: users
#
#  id              :integer          not null, primary key
#  name            :string(255)
#  email           :string(255)
#  created_at      :datetime         not null
#  updated_at      :datetime         not null
#  password_digest :string(255)
#  remember_token  :string(255)
#  admin           :boolean          default(FALSE)
#  screen_name     :string(255)    
# 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T13:28:15.090

像这样更改您的验证`/^\w*$/`

或者

你可以像这样验证

```
validates_format_of :screen_name, :with => /^[A-Za-z0-9.&]*\z/ 
```

# javascript - datetimepicker 和 dateFormat：意外的格式

> ID：15524595
> 
> 赞同：0
> 
> 时间：2013-03-20T13:14:17.943
> 
> 标签：javascript, jquery-ui, date-format, datetimepicker

我想要以下格式的日期：

yyyy-mm-dd HH:mm:ss (2013-02-01 12:12:12)

这就是我正在尝试的方式：

```
$('#start_date,#end_date, #date').datetimepicker({
        dateFormat: 'yyyy-mm-dd',
            timeFormat: 'HH:mm:ss',
        onSelect: function(value){
            alert(value);
        }
}); 
```

问题是 onSelect 我得到：yyyyyyyy-mm-dd HH:mm:ss (20132013-02-01 12:12:12)

![在此处输入图像描述](../Images/9662ec0b461cdd6861a5430750619c30.png)

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T13:15:54.520

尝试以下

```
dateFormat: 'yy-mm-dd', 
```

# inno-setup - 如何在非静默模式下重新运行 inno setup静默安装

> ID：15524596
> 
> 赞同：3
> 
> 时间：2013-03-20T13:14:19.013
> 
> 标签：inno-setup, silent-installer

我们可以检测到它 -[在 Inno Setup 中禁用静默和非常静默卸载](https://stackoverflow.com/questions/10815873/disable-silent-and-verysilent-) uninstall-in-in-inno-setup 并尝试重新运行

```
ExecAsOriginalUser(ExpandConstant('{srcexe}'), '', '', SW_SHOWNORMAL, ewNoWait, 0); 
```

但在这种情况下它不会运行任何东西。任何想法如何在检测到静默安装时以正常模式重新运行安装程序？

# javascript - div 悬停时的不透明度

> ID：15524598
> 
> 赞同：5
> 
> 时间：2013-03-20T13:14:22.223
> 
> 标签：javascript, jquery, css

到目前为止，我已经得到了这个代码

[http://jsfiddle.net/Nq79H/1/](http://jsfiddle.net/Nq79H/1/)

但我想淡出图像以便只留下可见的文本。我是否需要更改 javascript 或编写新的 css div？

```
$('.text').hide().removeClass('text').addClass('text-js');

$('.thumb').hover(function(){
    $(this).find('.text-js').fadeToggle();
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T13:18:00.467

> ...但我想淡出图像以便只留下可见的文本。

只需添加`.fadeToggle()`到`img`元素中：

```
$('img', this).fadeToggle(); 
```

[JSFiddle 示例](http://jsfiddle.net/Nq79H/2/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-20T13:21:02.317

这是 CSS3 过渡解决方案：

[jsFiddle](http://jsfiddle.net/Tyriar/DBUsq/)

**CSS**

```
.thumb .text {
    display: block;
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    background: #999;
    background: rgba(0, 0, 0, 0.3);
    text-align: center;
    -webkit-transition:opacity .5s ease;
    -moz-transition:opacity .5s ease;
    transition:opacity .5s ease;
    opacity:0;
}
.thumb:hover .text {
    opacity:1;
}

.thumb img {
    opacity:1;
    -webkit-transition:opacity .5s ease;
    -moz-transition:opacity .5s ease;
    transition:opacity .5s ease;
}
.thumb:hover img {
    opacity:0;
} 
```

**支持**

现在对 CSS3 过渡的支持相当不错，所有主流浏览器（Safari、Chrome、Opera、Firefox）的最新版本都支持过渡。另一方面，IE 仅从版本 10 开始支持它。虽然转换效果很好，但当某些东西不支持它时，它们不会崩溃和烧毁。元素的不透明度仍然会改变，只是没有过渡。

**参考**

*   [Caniuse.com 过渡](http://caniuse.com/css-transitions)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T13:18:34.300

如果要淡入文本和淡出图像，只需再添加一行：

```
$('.text').hide().removeClass('text').addClass('text-js');

$('.thumb').hover(function(){
    $(this).find('.text-js').fadeToggle();
    $(this).children("img").fadeToggle();
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T13:18:57.637

```
$(this).find('img').fadeToggle(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-20T13:19:06.113

这是你要找的吗？

```
$('.thumb').hover(function(){
$(this)
    .find('.text-js')
        .fadeToggle()
    .end()
    .find('img')
        .fadeToggle();
}); 
```

[http://jsfiddle.net/Nq79H/4/](http://jsfiddle.net/Nq79H/4/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-20T13:19:41.993

不需要 JS 或额外的 HTML。

[http://jsfiddle.net/Nq79H/11](http://jsfiddle.net/Nq79H/11)

```
.thumb img {
    -moz-transition: opacity .8s;
    -webkit-transition: opacity .8s;
    transition: opacity .8s;
}
.thumb:hover img {
    opacity: 0;
} 
```

# php - mod_rewrite RewriteRule for abc.php?a=1&b=2 to abc/2.html

> ID：15524600
> 
> 赞同：0
> 
> 时间：2013-03-20T13:14:31.847
> 
> 标签：php, .htaccess, mod-rewrite, url-rewriting

我是 mod_rewrite 或 Regex 的真正新手。因此，对于以下问题，我只需要您的帮助。

我有一个看起来像这样的 PHP 页面：

```
stuff.php?id=1&text=2 
```

我知道想要看起来像

```
stuff/2.html 
```

你们中是否有人考虑过 htaccess 的 RewriteRule 行让它看起来像这样？

提前非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T13:23:55.563

此特定页面的重写规则：

```
RewriteRule ^stuff/2\.html$ stuff.php?id=1&text=2 
```

如果`2`应该是动态的：

```
RewriteRule ^stuff/([0-9]+)\.html stuff.php?id=1&text=$1 
```

**一点解释：**

*   `^`并`$`代表字符串的开始和结束，所以我们不匹配`longstuff/2.html.php`.
*   The dot has to be escaped `\.` because otherwise it has a special meaning in RegEx ("any character")
*   the parantheses in the second pattern are a "capture group", their content will be available in the rewrite as `$n` (with `n` = number of capture group, in this case `1`)
*   `[0-9]` is a character class, matches one character of the class, in this case a digit
*   `+` means "one or more"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T13:23:10.420

这是重定向`stuff/2.html`到的规则`stuff.php?id=1&text=2`

```
RewriteRule ^stuff/([\d]+)\.html$ stuff.php?id=1&text=$1 [L] 
```

Notice`[\d]+`将只接受数字，如果您想允许字母和插入符号，请使用以下规则：

```
RewriteRule ^stuff/([\w-]+)\.html$ stuff.php?id=1&text=$1 [L] 
```

# php - 如何在 php 中将文本框设为只读

> ID：15524602
> 
> 赞同：8
> 
> 时间：2013-03-20T13:14:34.490
> 
> 标签：php, codeigniter

如何在此代码中使文本框只读

```
<?php 
    echo form_input(array(
        'name'=>'price',
        'value'=>$item['price'],
        'size'=>'6'
    ));
?> 
```

我只希望某些用户只能读取该值而不能更改它。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-20T13:15:17.977

试试喜欢

```
<?php 
  echo form_input(array('name'=>'price','value'=>$item['price'],'size'=>'6',
     'readonly'=>'true'));
      //Or 'readonly'=>'readonly'
?> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-20T13:17:48.123

```
$options    =   array(
                    'name'      =>  'price',
                    'value'     =>  $item['price'],
                    'size'      =>  '6'
);

if(!$allowed_user){
    $options['readonly']    =   'readonly'
}

echo form_input($options); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-08-10T07:42:29.660

```
# Try pure PHP
if(isset($_POST['something'])){
# Do not set the readonly attribute
$readonly ='';
}else{
# Set the readonly attribute
$readonly = 'readonly';
}
<input type="text" <?php echo $readonly; ?>> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-20T13:19:39.547

你可以这样做：

```
<?php 
  echo form_input(array('name'=>'price','value'=>$item['price'],'size'=>'6',
     'readonly'=>'readonly')); 
?> 
```

这将与 xhtml 兼容。

请确保**不要**在服务器端读取它，不要信任客户端数据，因为可以更改 HTML 以允许修改值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-20T13:20:49.053

有很多方法可以做到这一点：

来自 CI 表单字段：

```
 echo form_input(array('name'=>'price','value'=>$item['price'],'size'=>'6','readonly'=>'true')); 
```

来自 jquery/javascript：

使用字段的 id 作为：

```
 $("#id_offield").attr("readonly",true); 
```

在 html 中：

```
<textarea rows="4" cols="50" readonly> 
```

ETC！

希望它会有所帮助！

# c++ - 对象的赋值运算符

> ID：15524608
> 
> 赞同：0
> 
> 时间：2013-03-20T13:14:42.237
> 
> 标签：c++, object, pointers, variable-assignment, operator-keyword

我是编程新手，基于谷歌搜索，第一次点击总是'stackoverflow'，它非常有帮助。我没有得到这部分的答案。它是一个简单的代码，我一直在尝试学习赋值运算符如何处理对象。看了几本书，没有例子。

```
// wood.h
using namespace std;

///#include <cstdio>
//#include <cstdlib>
//#include <iostream>
//#include <string>

class wood {
public :
 wood (void);
  wood (string type, string color) ;
  void display(void);`
  wood  & operator=(const wood &copy         );
  wood  & operator=(const wood * const &copy );
  private :
  string     m_color;
  string     m_name;
  };
 // wood.cc
 wood::  wood (string name, string color) {
    m_name = name;
   m_color = color;
}
 wood & wood::operator=(const wood &from) {`
  cout << "calling assignment construction of" << from.m_name  << endl;
   m_name   = from.m_name;
   m_color   = from.m_color;
  return *this;
}
void wood::display (void) {`
  cout << "name: " << m_name << " color: " << m_color << endl;
} 
// test_wood.cc
int main () 
{
   wood *p_x, *p_y;`
   wood    a("abc", "blue");
   wood    b("def", "red" );
   a.display();
   b.display();
   b = a;          // calls assignment operator, as I expected`
   a.display();`
   b.display();`
   p_x = new wood ("xyz", "white");
   p_y = new wood ("pqr", "black");
   p_x->display();`
   p_y->display();`

   p_y = p_x;   // Here it doesn't call assignment operator, Why?
               // It does only pointer assignement, p_y original pointer goes into ether.
   p_x->display();`
   p_y->display();`
   printf("p_x:%p, p_y:%p \n", p_x, p_y); 

 return 0;
}
 //output:
name: abc color: blue
name: def color: red
calling assignment construction abc
name: abc color: blue
name: abc color: blue
name: xyz color: white
name: pqr color: black
name: xyz color: white
name: xyz color: white
p_x:0x9be4068, p_y:0x9be4068 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T13:27:30.777

您正在查看的是“操作员重载”。在此技术中，您为现有运算符定义新行为，在本例中为“=”。基本上，当在 main() 中调用此运算符时，它会获取右侧操作数并将其成员值分配给左侧操作数的成员。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T13:27:53.093

正如您所指出的，`p_y = p_x;`这只是一个简单的指针赋值。这是因为您重载了赋值运算符 for `wood`，而不是 for `wood*`。

更改`p_y = p_x;`为`*p_y = *p_x;`。

您可以实现一个免费函数来重载`operator=`for `wood*`，但我认为这不是一个好主意。

# symfony - 使用 FOSUserbundle 推进和相关数据

> ID：15524611
> 
> 赞同：1
> 
> 时间：2013-03-20T13:14:44.970
> 
> 标签：symfony, join, foreign-keys, propel, fosuserbundle

我正在使用 FOSUserBundle，并且我创建了一个包含两列的消息表，它们与 FOSUserBundle 中的用户相关。

我想使用一个查询来获取有关作者的消息和信息。

在 schema.xml 之后：

```
<?xml version="1.0" encoding="UTF-8"?>

<database name="default" namespace="Acme\StoreBundle\Model" defaultIdMethod="native">

<table name="message">
    <column name="id" type="integer" required="true" primaryKey="true" autoIncrement="true" />
    <column name="title" type="varchar" size="64" required="true" defaultValue="(untitled)"/>
    <column name="content" type="longvarchar" />
    <column name="author_id" type="integer" required="true" />
        <foreign-key foreignTable="fos_user">
            <reference local="author_id" foreign="id" />
        </foreign-key>
    <column name="recipient_id" type="integer" required="true" />
        <foreign-key foreignTable="fos_user">
            <reference local="recipient_id" foreign="id" />
        </foreign-key>
</table>
</database> 
```

我尝试了很多选择，但没有结果。

当我尝试时，似乎是合乎逻辑的：

```
$messages = MessageQuery::create()
            ->join('Message.Authorid')
            ->findByRecipientId(1); 
```

我收到一个错误：“未知表或别名消息”

和：

```
->join('Authorid') 
```

错误：“Acme\StoreBundle\Model\Message 表上的未知关系 Authorid”

我究竟做错了什么？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T08:45:17.537

好的，我发现了。

作者和收件人的架构必须如下所示：

```
...
<column name="author_id" type="integer" required="true" />
    <foreign-key foreignTable="fos_user" phpName="Author">
        <reference local="author_id" foreign="id" />
    </foreign-key>

<column name="recipient_id" type="integer" required="true" />
    <foreign-key foreignTable="fos_user" phpName="Recipient">
        <reference local="recipient_id" foreign="id" />
    </foreign-key>
... 
```

重要的部分是 phpName。

现在是控制器。这里发生了一些奇怪的事情，但它不会打扰。

```
$messages = MessageQuery::create()
    ->find();

return $this->render('AcmeStoreBundle:Message:index.html.twig',
        array('messages' => $messages)
    ); 
```

在这个简单的代码之后，我可以访问来自 twig 的所有内容。

在这一点上，我想展示一个例子：

当控制器看起来像上面那样时，然后

```
# AcmeStoreBundle:Message:index.html.twig

messages 
```

显示消息表的每个字段，例如：

```
Acme\StoreBundle\Model\Message_0: Id: 1 CreatedAt: !!php/object:O:8:"DateTime":3:    {s:4:"date";s:19:"2013-03-20 13:00:00";s:13:"timezone_type";i:3;s:8:"timezone";s:12:"Europe/Paris";} Title: (untitled) Content: 'test content' AuthorId: 1 RecipientId: 2 Acme\StoreBundle\Model\Message_1: Id: 2 CreatedAt: !!php/object:O:8:"DateTime":3:{s:4:"date";s:19:"2013-03-20 13:15:22";s:13:"timezone_type";i:3;s:8:"timezone";s:12:"Europe/Paris";} Title: (untitled2) Content: 'bla bla content 2' AuthorId: 2 RecipientId: 1 
```

如您所见，与作者或收件人的关系没有任何关系，但是当我调用 message.author.username 或 message.recipient.username（在消息的 for 循环中）时，我得到了这个。而这正是我所期望的。

现在当控制器看起来像：

```
$messages = MessageQuery::create()
        ->joinWith('Author')
        ->find();

return $this->render('AcmeStoreBundle:Message:index.html.twig',
        array('messages' => $messages)
    ); 
```

消息（在树枝中）抛出所有像上面这样的字段，以及一个作者对象（称为作者，而不是用户，因为架构中的 phpName）。

感谢你们阅读我的问题并感谢大家的参与。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T14:56:35.510

该`join`方法使用表或 phpName 别名而不是字段来获取关系。所以你可能想要：

```
->join("Message.Author") 
```

或者，正如您的外键所暗示的那样，也许是这个？

```
->join("Message.FosUser") 
```

**更新**

对于同一个表的两个 FK 引用，您将需要使用外键标记的`phpName`和属性：`refPhpName`

```
<table name="message">
  ...
  <foreign-key foreignTable="fos_user" phpName="Author" refPhpName="AuthoredMessage">
    <reference local="author_id" foreign="id" />
  </foreign-key>
  <foreign-key foreignTable="fos_user" phpName="Recipient" refPhpName="ReceivedMessage">
    <reference local="recipient_id" foreign="id" />
  </foreign-key>
</table> 
```

然后你可以尝试使用`->join('Message.Author')`或`->join('Message.Recipient')`

请参阅[外键元素的文档](http://propelorm.org/reference/schema.html#foreign-key-element)。

# iis-8 - IIS 8 应用程序初始化 - 预热 WCF 服务

> ID：15524612
> 
> 赞同：1
> 
> 时间：2013-03-20T13:14:49.057
> 
> 标签：iis-8, warm-up

我们目前正在使用 AppFabric 自动启动功能来预热包含 WCF Web 服务的应用程序。

由于这是我们正在使用的唯一 AppFabric 功能并且我们正在升级到 IIS 8.0，因此我们希望改用应用程序初始化。

1）很高兴知道这些解决方案之间是否存在任何已知差异。

2）我能够为示例项目设置初始化： [http](http://www.iis.net/learn/get-started/whats-new-in-iis-8/iis-80-application-initialization) ://www.iis.net/learn/get-started/whats-new-in-iis-8/iis-80-application-initialization 。但是当我为我的 WCF 服务设置相同的设置时，没有预热。我认为这是因为热身是通过发出请求来完成的

```
 http://localhost/MyService/ 
```

这实际上并没有达到服务。我需要完成预热请求

```
 http://localhost/MyService/Service.svc 
```

有没有办法配置这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-02T14:53:14.223

尝试将此添加到您的 web.config 中：

```
<applicationInitialization>
  <add initializationPage="/Service.svc" />
</applicationInitialization> 
```

> <applicationInitialization> 元素指定在收到请求之前主动执行 Web 应用程序初始化。如果在接收到 HTTP 请求之前执行初始化序列（例如初始化连接、启动内存缓存、运行查询和编译页面代码），则应用程序可以更快地启动。应用程序初始化可以在应用程序启动时自动启动初始化过程。应用程序初始化并不一定会使初始化过程运行得更快；它会更快地开始该过程。 [资源](https://www.iis.net/configreference/system.webserver/applicationinitialization)

[IIS 8.0 应用程序初始化](http://www.iis.net/learn/get-started/whats-new-in-iis-8/iis-80-application-initialization#TOC301259899)

# objective-c - ARC和一个线程窗口

> ID：15524613
> 
> 赞同：1
> 
> 时间：2013-03-20T13:14:49.093
> 
> 标签：objective-c, automatic-ref-counting

我不明白为什么在线程结束后（在 ARC 下）在线程中创建的窗口仍然存在？

这就是所谓的：

```
-(void)prefsWindow:(id)sender {
    NSRect frame = NSMakeRect(200, 200, 640, 480);
    NSWindow *window  = [[NSWindow alloc] initWithContentRect:frame
                                                    styleMask:NSTitledWindowMask | NSClosableWindowMask
                                                      backing:NSBackingStoreBuffered
                                                        defer:NO];
    [window center];
    [window makeKeyAndOrderFront:NSApp];
    [NSThread exit];
} 
```

经过

```
[NSThread detachNewThreadSelector:@selector(prefsWindow:) toTarget:self withObject:nil]; 
```

我希望它会因为超出范围而死。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T13:24:02.863

当创建窗口时，关键 AppKit 必须对它有一个引用，以便它可以将它表示给窗口管理器等等。很可能 AppKit 有一个保留引用——或者你刚刚发布了一个仍在被框架使用的窗口，因此很快就会发生崩溃。

鉴于上面的代码，您对窗口对象了解的一件事是*您*不再拥有窗口的所有权，而不是*没有任何东西*拥有它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T13:24:31.650

该窗口仍然存在，因为 NSApp 仍然持有对它的强引用，因为它是应用程序关键窗口。

当您不再需要该窗口时调用 close ：

```
[window close]; 
```

# jakarta-ee - 文件放置的良好做法

> ID：15524616
> 
> 赞同：0
> 
> 时间：2013-03-20T13:14:50.250
> 
> 标签：jakarta-ee, servlets, jxl

我正在开发一个使用 JXL API 在某个时候生成 Excel 文件的网络应用程序。

我正在考虑将这些文件放在`WebContent`文件夹中（放入两个子文件夹，即模板和临时文件，它们的性质不同），但我发现没有生成的文件属于 Web 内容类型。

用户在任何时候都不能访问它们（例如，下载），并且在任何可预见的将来都不会出现这种情况（无论如何也不是“原样”，因此它们也不会是网络内容)

那么放置这些文件的最佳做法是什么，考虑到放置在 temp 子文件夹中的任何文件都是应用程序生成的，并且放置在 templates 子文件夹中的文件不会被修改，除了应用程序维护？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T13:17:24.523

我不会将它们放在 Web 应用程序文件夹结构中的任何位置，尤其是在它们不能直接访问的情况下。而是在服务器上专门为文件分配一个区域，然后通过您的 Web 应用程序控制对文件的所有访问。

另一种选择是始终动态生成文件，并依靠缓存来有效地提供文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T13:17:47.723

我想说，只要它在网络根目录之外，就可以将它放在任何你想要的地方。如果将来您需要访问这些文件，您仍然可以编写一些代码将其呈现给用户，并为其添加最终访问检查。

# matlab - 从起始节点到结束节点的所有可能路径

> ID：15524623
> 
> 赞同：0
> 
> 时间：2013-03-20T13:14:59.833
> 
> 标签：matlab

我有一个带有用户定义的节点数'n'的加权图。我想要一个代码，给定图中的两个唯一节点，它将显示连接这两个节点的所有路径。 [图表示例](http://i.imgur.com/J3t5O.png)

```
wt=zeros(n,n);
while(1)
i=input('enter the starting node:(0 to quit):');
if (i==0)    
    break;
end
j=input('enter the destination node:');
wt(i,j)=input('Enter the cost: '); 
end
disp('Adjacency Matrix');
for i=1:n
fprintf('           %d',i);
end
for i=1:n
fprintf('\n%d          ',i);
for j=1:n
fprintf('%d          ',wt(i,j));
end
end
Adjacency Matrix
   1           2           3           4           5
1          0          1          1          0          0          
2          0          0          0          0          0          
3          1          0          0          1          0          
4          0          0          1          0          0          
5          0          0          0          0          0 
```

矩阵 wt 显示任意两个给定节点之间的连接。这意味着节点 (1,2) (1,3) (3,4) (4,3) 已连接。

```
fprintf('\nEnter the source');
s=input(':');
fprintf('\nEnter the destination');
de=input(':');

for i=1:n
m=s;
if(m~=i)
   for j=i:n
    if(m~=j)
        if(M(m,j)>0)
            p(i,j)=j;
            m=j;
        end
    end
    if(p(i,j)==de)
        d(i)=1;
        break;
    end
end
if(d(i)~=1)
    for k=1:j
        p(i,k)=0;
    end
    m=s;
    for k=n : -1 : i
        if(M(m,k)>0)
            p(i,n-k+2)=k;
            m=k;
        end
        if(p(i,n-k+2)==de)
            d(i)=1;
            break;
        end
    end
end
end
end

for i=1:n
j=1;
if(d(i)==1)
    for j=1:n
        if (j==1)
            fprintf('\n path: %d',s);
            kk=s;

        elseif (p(i,j)>0)
            fprintf('->%d',p(i,j));

            plot([nodes(kk, 2) nodes(p(i,j), 2)], [nodes(kk, 3) nodes(p(i,j), 3)], 'k.--')
            kk=p(i,j);
        end
    end
end
fprintf('\t\t hopcount of path %d:  %d',i,count);
count=0;
end 
```

这是我为查找从源到目的地的可能路径而编写的代码。'p' 矩阵保存从源到目的地的最终路径。输出：

```
 enter the starting node:(0 to quit):1
 enter the destination node:2
 Enter the cost: 1
 enter the starting node:(0 to quit):1
 enter the destination node:3
 Enter the cost: 1
 enter the starting node:(0 to quit):2
 enter the destination node:3
 Enter the cost: 1
 enter the starting node:(0 to quit):0

Enter the source:1

Enter the destination:3

     hopcount of path 1:  0
 path 2: 1->2->3         hopcount of path 2:  2
 path 3: 1->3        hopcount of path 3:  1??? 
 Attempt to reference field of      non-structure array. 
```

如果我将源输入为 3，目标输入为 1，则代码不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T23:58:21.237

这是一种更好的矢量化方法（我假设您不能两次穿过同一个节点）。您希望尽可能减少嵌套的 for 循环。尽可能使用向量和矩阵运算。

这个想法是建立一个所有路径的列表，并同时将所有可能的下一个节点添加到列表中的每个元素上。此函数返回一个 Mx2 元胞数组，其中 M 是最长（访问的节点最多）路径。第一列中的每个单元格都包含一个矩阵，其中每一行都是长度为 i 的不同路径。第二列中的每个单元格都包含一个列向量，其中包含每个路径的相应成本。

```
function [paths] = allpaths(wt, startnode, endnode)
    lastpath = [startnode]; #We begin with the path containing just the startnode
    costs = [0]; #The cost of this path is zero because we haven't yet crossed any edges
    paths = {zeros(0,1),zeros(0,1)}; #The set of solution paths is empty (I'm assuming startnode!=endnode)
    N = size(wt,1); #Obtain the number of nodes in the graph
    assert(N==size(wt,2)); #Assert that the adjacency matrix is a square matrix
    for i = 2 : N
        #Creates a matrix with a row for each path and a 1 in a column where there's a possible move from the last visited node in a path to this column
        nextmove = wt(lastpath(:, i - 1), :) != 0;

        #Zero out any nodes we've already visited
        d = diag(1:size(lastpath,1));
        nrows = d * ones(size(lastpath));
        inds = sub2ind(size(nextmove), reshape(nrows,[],1), reshape(lastpath,[],1));
        nextmove(inds) = false;

        # If there are no more available moves we're done 
        if nextmove == 0
            break;
        endif

        #For each true entry in our nextmove matrix, create a new path from the old one together with the selected next move
        nextmoverow = d * nextmove;
        nextmovecol = nextmove * diag(1:N);
        rowlist = reshape(nonzeros(nextmoverow),[],1);
        collist = reshape(nonzeros(nextmovecol),[],1);
        nextpath = [lastpath(rowlist,:), collist];

        # Compute the costs of the new set of paths by adding the old ones to the cost of each newly traversed edge
        inds = sub2ind([N,N],nextpath(:, i-1),nextpath(:,i));
        costs = costs(rowlist) + wt(inds);

        # For any path finishing on the end node, add it to the return list (and it's corresponding cost)
        reachedend = nextpath(:,i) == endnode;
        paths = [paths; {nextpath(reachedend, :)},{costs(reachedend)}];

        #Then remove it from the list of paths still being explored
        lastpath = nextpath(~reachedend, :);
        costs = costs(~reachedend);

        #If there are no more paths, we're done
        if isempty(lastpath)
            break;
        endif
    endfor
endfunction

paths = allpaths(wt, startnode, endnode);
for i = 1:size(paths,1)
    mpath = paths{i,1};
    mcost = paths{i,2};
    for j = 1:length(mcost)
        p = mpath(j,:);
        first = true;
        for n = p
            if first
                first = false;
            else
                printf(' -> ');
            endif
            printf('%d', n);
        endfor
        printf('  cost: %d\n',mcost(j));
    endfor
endfor 
```

编辑：添加了如何打印路径

# python - 在 Python 中使用队列模块在线程之间传递值

> ID：15524627
> 
> 赞同：2
> 
> 时间：2013-03-20T13:15:09.753
> 
> 标签：python, multithreading, queue, python-multithreading

我正在寻找一种在 Python 中的多个线程之间传递值（例如整数、数组）的方法。我知道这个任务可以通过使用 Queue 模块来完成，但我对 python 或这个特定模块都不是很熟悉。

我有以下场景：每个线程需要根据自己的数据或来自其他线程的数据做一些计算。此外，每个线程都知道其他线程保存特定作业所需的数据（所有线程都有一个所有线程的数组，因此任何线程都知道对于任务 X，他需要从特定线程获取数据（行，列）从那个数组）。

如何使用 Queue 模块或其他技术来完成线程之间的这种通信（Queue 模块似乎是这项工作的正确选择）。非常感谢任何帮助。非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T13:23:22.537

# 使用队列

通常，队列用于具有一堆从队列中获取其工作的工作线程的场景。空闲线程正在队列中等待新作业放入其中。然后该作业由一个线程执行，而所有剩余的线程都在等待下一个作业。如果发布的作业多于可用线程，则队列开始填满。

正如您所描述的那样，这不适用于您的场景。也许您可以直接读取数据而不将其放入队列中。如果你写在共享数据结构中，你可以考虑锁定策略。

一般来说，您应该阅读并行编程。这些概念与语言完全无关。然后，您可以阅读有关 Python 线程的教程。互联网上有大量关于这两个主题的材料。

*编辑：*

# 使用 threading.Event 进行线程间通信

在两个线程之间进行通信的最简单方法是`threading.Event`. 该事件可以设置为真或假。通常，一个线程正在设置事件，另一个线程检查事件的值并采取相应的行动。例如，该事件可能表明有新的事情要做。指示线程首先填充即将到来的任务所需的数据结构，然后将事件设置为真。在事件为真后，另一个等待事件的线程被激活。随后，它读出数据结构并执行任务。

# c++ - 试图让 MongoDB 驱动程序在 Visual Studio 2010 C++ 中工作

> ID：15524628
> 
> 赞同：0
> 
> 时间：2013-03-20T13:15:12.677
> 
> 标签：c++, visual-studio-2010, mongodb, 64-bit, mongodb-c

用于 C++ 的 MongoDB 驱动程序使用起来非常复杂。我想做一个简单的 C++ 项目，将一行插入到我的 MongoDB 实例中。我在 x64 ENV 和 VS2010 IDE 中需要它。

你们可能有驱动程序的二进制文件或一个简单的示例解决方案文件吗？

Mongo 网站上的手册根本没用。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T13:56:16.990

从这里使用 C# 驱动程序[http://github.com/samus/mongodb-csharp](http://github.com/samus/mongodb-csharp) - 这很容易。C++和C驱动我也看不懂。

# c# - 在 Windows 手机中解压缩大文件导致 OutOfMemory 异常

> ID：15524632
> 
> 赞同：3
> 
> 时间：2013-03-20T13:15:36.557
> 
> 标签：c#, windows-phone-7

我在 Windows Phone 应用程序中使用后台传输服务下载了一个大的 zip 文件。

当我尝试使用以下[教程](http://ooiks.com/blog/windows-phone/windows-phone-unzip-extract-compressed-files-for-silverlight)解压缩文件时：

```
private void LoadZipfile()
{
    WebClient c = new WebClient();
    c.OpenReadCompleted += new OpenReadCompletedEventHandler(openReadCompleted);
    c.OpenReadAsync(new Uri("http://www.mydomain.com/myZipFile.zip"));
}

private void openReadCompleted(object sender, OpenReadCompletedEventArgs e)
{
    UnZipper unzip = new UnZipper(e.Result);
    foreach (string filename in unzip.FileNamesInZip())
    {
        Stream stream = unzip.GetFileStream(filename);
        StreamReader reader = new StreamReader(stream);
        string contents = reader.ReadToEnd();
        MessageBox.Show(contents);
    }
} 
```

但是在解压缩时，它会抛出*OutOfMemory*异常。

请向我建议如何解决该问题

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T13:22:53.943

我认为这里的问题是这两行

```
string contents = reader.ReadToEnd();
        MessageBox.Show(contents); 
```

这两行尝试读取字符串变量中的整个文件并尝试显示它。这在手机上不是一个好习惯（即使是在具有巨大内存和页面文件支持的桌面上）。

尝试从流中读取几个字节并将其放入字符串中并在消息框中显示。这应该可以解决您的问题。

# vb.net - 将 Visual Studio 2008 与 Report Builder 3.0 一起使用 - 如何添加自定义 VB 函数来计算另一个字段中日期前 90 天的日期

> ID：15524638
> 
> 赞同：0
> 
> 时间：2013-03-20T13:15:44.697
> 
> 标签：vb.net, visual-studio-2008, ssrs-2008, ssrs-tablix, reportbuilder3.0

这是我在 Stack 上的第一个问题，尽管我在这里得到了很多答案 8-)

我的雇主正在使用带有 Visual Studio 2008 和 Report Builder 3.0 的 SQL Server Business Intelligence Development Studio 从 SharePoint 列表生成报告。

他们希望我在 VB 中构建一个函数，我可以从报表生成器表达式中调用该函数，该表达式将查看日期（NeedDate），该日期也显示在报表的 Tablix 中，并在另一个单元格中显示该日期之前 90 天的日期日期。它必须是在表达式生成器中调用的 VB 函数——这是我老板的要求。

我在报表生成器的表达式生成器中使用它，它正在工作：`=iif(ReportItems!NeedDate.Value = Nothing, Nothing, DateAdd(DateInterval.Day,-90, ReportItems!NeedDate.Value))`但我的老板希望我使用该函数并将其插入到`=iif(ReportItems!NeedDate.Value = Nothing, Nothing`as “代码。这里需要什么......”之后

我没有很多经验做这种事情。我不明白如何通过插入“代码”使在 Visual Studio 设计器中编写的 VB 函数在报表生成器中工作。而且我不知道从一个报告项目中获取日期，从中减去 90 天，并将其显示在报告的另一个单元格中的语法。因此，我向大家寻求建议/帮助，非常感谢您提供的任何内容！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T15:44:15.617

所以，答案是这样的：

我在现场使用了这个表达式：

`=Code.SubtractDays(90, ReportItems!ActionNeedDate.Value)`

这就是功能：

```
Function SubtractDays(ByVal days As Integer, ByVal dateField As String) As String
    If Not IsDate(dateField) Then
        Return ""
    Else
        Dim nDayCal As Date = DateAdd(DateInterval.Day, -(days), CDate(dateField))
        Return Format((nDayCal), "dd-MMM-yy")
    End If
End Function 
```

# ruby-on-rails - 在omniauth 注册中包含必填字段的表单。(Ruby on Rails)

> ID：15524642
> 
> 赞同：1
> 
> 时间：2013-03-20T13:15:50.737
> 
> 标签：ruby-on-rails, devise, registration, omniauth

我有带有 gem devise + gem omniauthn（多个提供者）的 Rails 应用程序。我跟着本教程：[http](http://blog.yangtheman.com/2012/02/09/facebook-connect-with-rails-omniauth-devise/) ://blog.yangtheman.com/2012/02/09/facebook-connect-with-rails-omniauth-devise/ （应用示例：[https](https://github.com/klebershimabuku/fb_auth_demo) ://github.com/klebershimabuku/fb_auth_demo )

用户型号：

```
 devise :database_authenticatable, :registerable, :recoverable, :rememberable, :trackable, :validatable
  attr_accessible  :name, :email, :country, :password, :password_confirmation, :remember_me
  has_many :authentications, :dependent => :delete_all

  def apply_omniauth(auth)
    self.email = auth['extra']['raw_info']['email']
    authentications.build(:provider => auth['provider'], :uid => auth['uid'], :token => auth['credentials']['token'])
  end 
```

认证模型：

```
attr_accessible :provider, :token, :uid, :user_id
belongs_to :user 
```

身份验证控制器：

```
def create
    auth = request.env["omniauth.auth"]

    # Try to find authentication first
    authentication = Authentication.find_by_provider_and_uid(auth['provider'], auth['uid'])

    if authentication
      # Authentication found, sign the user in.
      flash[:notice] = "Signed in successfully."
      sign_in_and_redirect(:user, authentication.user)
    else
      # Authentication not found, thus a new user.
      user = User.new
      user.apply_omniauth(auth)
      if user.save(:validate => false)
        flash[:notice] = "Account created and signed in successfully."
        sign_in_and_redirect(:user, user)
      else
        flash[:error] = "Error while creating a user account. Please try again."
        redirect_to root_url
      end
    end
  end 
```

当我使用设计表格注册时，我可以填写一些必需的额外字段，例如姓名和国家/地区。但是当我向omniauth注册时，我无法填写这些字段，因为它根本没有表格，所以注册后它们为NULL。所以我的问题是：如何将带有所需额外字段的表单添加到omniauth 注册？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T13:23:37.043

Omniauth 用于使用其他登录信息登录您的网站 - 例如从 facebook、twitter 等。

因此，当用户使用omniauth 登录您的站点时，您可以从用户用于登录您的站点的站点收集信息。

例如：如果用户使用 Facebook 登录，则可以从用户用于登录的站点收集您从用户那里获得的城市和其他信息。因此，您可以从（伪代码）获得更多信息：

```
 auth['extra']['raw_info']['state'] 
```

**编辑**：话虽如此，您可以关注此[铁路广播](http://railscasts.com/episodes/304-omniauth-identity?view=asciicast)中的信息 如何在注册中添加其他字段。

此外，另一种关注创建设备/omniauth 的方法是关注[此页面](https://github.com/plataformatec/devise/wiki/OmniAuth%3a-Overview)（只是说）

# java - System.out.printf() 用于浮点数据类型

> ID：15524643
> 
> 赞同：1
> 
> 时间：2013-03-20T13:15:50.403
> 
> 标签：java, printf

我在这里有一个非常短的代码片段：

```
public class FormatFloat {
    public static void main(String[] args) {
        float x = 12.345f;
        System.out.printf("%18.7f%s", x, "\n");
        System.out.printf("%18.8f%s", x, "\n");
        System.out.printf("%18.10f%s", x, "\n");
        System.out.printf("%18.15f%s", x, "\n");
    }    
} 
```

我本以为输出是

```
 12.3450000
       12.34500000
     12.3450000000
12.345000000000000 
```

但我越来越

```
 12.3450003
       12.34500027
     12.3450002670
12.345000267028809 
```

谁能告诉我背后的原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T13:19:44.277

该问题与 IEEE 754 二进制浮点表示有关。

有关您的问题的完整描述，请参阅[此](http://introcs.cs.princeton.edu/java/91float/)链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T13:23:42.730

尝试

```
double x = 12.345;
System.out.printf("%18.7f%n", x);
... 
```

浮点精度太低

# c# - 获取项目的所有命名空间和类的可能性

> ID：15524647
> 
> 赞同：0
> 
> 时间：2013-03-20T13:16:05.533
> 
> 标签：c#, class, namespaces

我对 C#(Visual Studio) 很陌生，我希望我问的是一个合乎逻辑的问题：这是否可能以及如何从 C# 项目中获取所有使用的命名空间和类的信息？

提前致谢！

# jquery - 自定义 jQuery 滑块的三个实例不起作用

> ID：15524652
> 
> 赞同：0
> 
> 时间：2013-03-20T13:16:17.663
> 
> 标签：jquery

我的页面上有三个 jQuery 滑块实例，但似乎只有一个可以正常工作。例如，按下 1-12 按钮仅适用于第一个框，滑块选择选项仅适用于一个选项。我该如何解决这个问题？

滑块应仅在其框内更改复选框（同样适用于用户按下按钮时）。

到目前为止，这是我的代码和**[jsfiddle](http://jsfiddle.net/SHgJQ/)**：

```
// slider  

    $(".slider_weekRange").slider({
        range: true,
        min: 1,
        max: 15,
        step: 1,
        values: [1, 12],
        slide: function (event, ui) {
            $(".search_weekRange").val(ui.values[0] + "-" + ui.values[1]);
        }
    });
    $(".search_weekRange").val($(".slider_weekRange").slider("values", 0) +
        "-" + $(".slider_weekRange").slider("values", 1));

$(".slider_weekRange2").slider({
    range: true,
    min: 1,
    max: 15,
    step: 1,
    values: [1, 12],
    slide: function (event, ui) {
        $(".search_weekRange2").val(ui.values[0] + "-" + ui.values[1]);
        $('input:checkbox[name="weeks_1"]').prop("checked", false);
        $('input:checkbox[name="weeks_1"]').slice(ui.values[0] - 1, ui.values[1]).prop("checked", true);
    }
});
$(".search_weekRange2").val($(".slider_weekRange2").slider("values", 0) +
    "-" + $(".slider_weekRange2").slider("values", 1));

// no weeks

$('.week_none').click(function () {
    $('input:checkbox[name="weeks_1"]').prop("checked", false);
    $(".search_weekRange2").val('');
});

// all week

$('.week_all').click(function () {
    $('input:checkbox[name="weeks_1"]').prop("checked", true);
    $(".search_weekRange2").val('1-15');
});

// weeks 1-12

$('.week_term').click(function () {
    $('input:checkbox[name="weeks_1"]').prop("checked", false);
    $('input:checkbox[name="weeks_1"]').slice(0, 12).prop("checked", true);
    $(".search_weekRange2").val('1-12');
});

// odd weeks

$('.week_odd').click(function () {
    $('input:checkbox[name="weeks_1"]').prop("checked", false);
    $('input:checkbox[name="weeks_1"]:even').prop("checked", true);
    $(".search_weekRange2").val('1,3,5,7,9,11,13,15');
});

// even weeks

$('.week_even').click(function () {
    $('input:checkbox[name="weeks_1"]').prop("checked", false);
    $('input:checkbox[name="weeks_1"]:odd').prop("checked", true);
    $(".search_weekRange2").val('2,4,6,8,10,12,14');
});

// checkbox

$('input:checkbox[name="weeks_1"]').click(function () {
    var s = [];
    $('input:checkbox[name="weeks_1"]').each(function () {
        if (this.checked) {
            s.push($(this).next().text());
        }
    });
    $(".search_weekRange2").val(s.join(','));
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T13:28:10.480

The problem is that you search for checkboxes globally and then by using `.slice()` you select only a subset of checkboxes within the range from 0 to 15, which obviously match only checkboxes from the first box.

Instead of

```
slide: function (event, ui) {
    $(".search_weekRange2").val(ui.values[0] + "-" + ui.values[1]);
    $('input:checkbox[name="weeks_1"]').prop("checked", false);
    $('input:checkbox[name="weeks_1"]').slice(ui.values[0] - 1, ui.values[1]).prop("checked", true);
} 
```

use this

```
slide: function (event, ui) {
    $(this).parent().find(".search_weekRange2").val(ui.values[0] + "-" + ui.values[1]);
    $(this).parent().find('input:checkbox[name="weeks_1"]').prop("checked", false);
    $(this).parent().find('input:checkbox[name="weeks_1"]').slice(ui.values[0] - 1, ui.values[1]).prop("checked", true);
} 
```

Here is [jsFiddle](http://jsfiddle.net/ErQ7T/)

# kendo-ui - 向现有 Kendo UI 数据源添加多个项目，例如数组

> ID：15524653
> 
> 赞同：4
> 
> 时间：2013-03-20T13:16:22.327
> 
> 标签：kendo-ui, datajs

我已经为此工作了几个小时，但无法找到让它正常工作的方法。我正在寻找将数组内容添加到现有 Kendo UI 数据源的正确方法。基本上我有 4 个 SharePoint 列表，我使用 DataJS 从每个列表中获取数据。然后我想在 Kendo GridView 中显示项目，但我不想使用`for`语句和`add()`方法添加项目。我曾尝试`add()`直接在数组上使用该方法，但这所做的只是将数组作为对象本身添加到 DataSource 中，当然，这不是预期的行为。我也尝试使用`dataSource.data.concat()`但收到错误：

> 对象不支持属性或方法“concat”

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-20T14:48:01.933

假设您在一个名为 的数组中有新数据`newData`。您可以使用：

```
var newData = [
    { ... },
    { ... },
    { ... }
];

$.merge(newData, datasource._pristine);
datasource.data(newData); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-09T20:59:16.807

上述解决方案对我不起作用。Telerik 管理员建议使用以下方法：

```
var vm = kendo.observable({
  data: new kendo.data.ObservableArray([])
});

vm.data.push.apply(vm.data, [ 1, 2, 3]); 
```

这种方式会导致绑定小部件的一次渲染。在这里找到：[http ://www.telerik.com/forums/passing-array-to-observablearray-push](http://www.telerik.com/forums/passing-array-to-observablearray-push)

# android - 将自定义主题添加到应用程序时出错

> ID：15524654
> 
> 赞同：8
> 
> 时间：2013-03-20T13:16:22.613
> 
> 标签：android, xml, themes, background-color

我将以下主题添加到我的应用程序中，背景颜色为白色。但我收到以下错误，我不确定我哪里出错了。

`Error: Color types not allowed (at 'android:windowBackground' with value '#FF0000')`.

```
<style name="MyTheme" parent="@android:style/Theme.Light"> 
  <item name="android:windowBackground">#FF0000</item>
 </style> 
```

并引用了 mymanifest 中的主题：

```
<activity
        android:name=".MyActivity"
        android:theme="@style/MyTheme" /> 
```

有什么想法或建议吗？谢谢

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-20T13:31:12.823

根据[Android Styles and Themes](http://developer.android.com/guide/topics/ui/themes.html)页面，您必须使用单独的颜色资源来设置颜色。

> （请注意，这里需要将颜色作为单独的资源提供，因为 android:windowBackground 属性仅支持对另一个资源的引用；与 android:colorBackground 不同，它不能被赋予颜色文字。）

例如

```
<item name="android:windowBackground">@color/custom_theme_color</item> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T13:20:59.627

尝试：

```
<style name="MyTheme" parent="@android:style/Theme.Light"> 
  <item name="android:background">#FF0000</item>
</style> 
```

# visual-studio-2010 - 错误 VSP1804：无法打开文件。文件格式似乎无效

> ID：15524661
> 
> 赞同：5
> 
> 时间：2013-03-20T13:16:37.740
> 
> 标签：visual-studio-2010, visual-studio, visual-studio-2008, visual-studio-2012

当检测分析器在分析后尝试创建报告时，我在 Visual Studio 2012 中收到此错误：

`Error VSP1804: Unable to open file. The file format appears to be invalid`

如果探查器像小数据集一样运行，则探查器会创建报告，但如果探查器在更大的数据集上运行的时间稍长，则似乎会出现此错误。有谁知道这个错误是什么意思或见过这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-07T13:15:05.963

要解决此问题，请确保所有项目都以 32 位 (x86) 运行。在您的项目属性中：属性 --> 构建 --> 平台目标 --> x86。

[http://social.msdn.microsoft.com/Forums/en-US/vstsprofiler/thread/abf4ae19-114f-492a-9191-28df94a6be1f](http://social.msdn.microsoft.com/Forums/en-US/vstsprofiler/thread/abf4ae19-114f-492a-9191-28df94a6be1f)

# macos - matplotlib mac OSX 10.8 切断刻度和轴标签

> ID：15524662
> 
> 赞同：0
> 
> 时间：2013-03-20T13:16:40.360
> 
> 标签：macos, matplotlib

我安装的 matplotlib 似乎正在切断刻度线标签和截断轴标签。例如，该图的代码示例具有从 0 到 20 的 y 轴值。垂直轴似乎只打印最左边的数字，或最左边的带符号的数字，0、5、1、1、2为 0.0、5.0、10.0、15.0、20.0。垂直轴标签打印 'Amplitu' 应该是 'Amplitude, arb' 更改字体大小或使用窗口拉伸缩放绘图不会改变行为。蟒蛇代码：

```
from numpy import arange, sin, pi
from numpy import ma
from matplotlib.pyplot import  plot, show, title, xlabel, ylabel

t = arange(0.0, 2.0, 0.01)
s = 20*sin(2*pi*t)

plot(t,s,'g')
title("Sinewave Plot Example", fontsize=10)
xlabel("Elapsed Time, arb", fontsize=10)
ylabel("Amplitude, arb", fontsize=10)
show() 
```

这似乎是安装/配置问题，而不是编码问题。以上应该可以正常工作。

我已经按照以下顺序在 Mac OSX 10.8 Mountain Lion 上安装了 matplotlib

```
sudo pip install numpy
sudo pip install scipy 
sudo pip install matplotlib
Downloading/unpacking matplotlib
  Downloading matplotlib-1.2.0.tar.gz (36.9MB): 36.9MB downloaded
  Running setup.py egg_info for package matplotlib
    basedirlist is: ['/usr/local/', '/usr', '/usr/X11', '/opt/local']
    ============================================================================
    BUILDING MATPLOTLIB
                matplotlib: 1.2.0
                    python: 3.3.0 (v3.3.0:bd8afb90ebf2, Sep 29 2012, 01:25:11)
                            [GCC 4.2.1 (Apple Inc. build 5666) (dot 3)]
                  platform: darwin

    REQUIRED DEPENDENCIES
                     numpy: 1.7.0
                 freetype2: found, but unknown version (no pkg-config)

    OPTIONAL BACKEND DEPENDENCIES
                    libpng: found, but unknown version (no pkg-config)
                   Tkinter: Tkinter: version not identified, Tk: 8.5, Tcl: 8.5
                      Gtk+: no
                            * Building for Gtk+ requires pygtk; you must be able
                            * to "import gtk" in your build/install environment
           Mac OS X native: yes
                        Qt: no
                       Qt4: no
                    PySide: no
                     Cairo: no

    OPTIONAL DATE/TIMEZONE DEPENDENCIES
                  dateutil: matplotlib will provide
                      pytz: matplotlib will provide
                       six: matplotlib will provide

    OPTIONAL USETEX DEPENDENCIES
                    dvipng: no
               ghostscript: /bin/sh: gs: command not found
                     latex: no

    [Edit setup.cfg to suppress the above messages] 
```

当我尝试从 Mac 窗口保存绘图时，.png 文件，python 解释器生成以下错误（3.3 w/ipython）

```
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/Versions/3.3/lib/python3.3/site-packages/matplotlib/backends/backend_macosx.py", line 475, in save_figure
    self.canvas.get_default_filename())
ValueError: character U+55002f is not in range [U+0000; U+10ffff]
UnicodeDecodeError: 'utf-8' codec can't decode byte 0xd5 in position 0: invalid continuation byte 
```

提前感谢您提供的任何见解！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T14:33:47.437

这是一个[已知的错误](https://github.com/matplotlib/matplotlib/issues/1737)。一个解决方案可能是使用 Python 2.7.3。

# php - 从 username:password@example.com 链接访问凭据

> ID：15524664
> 
> 赞同：2
> 
> 时间：2013-03-20T13:16:43.077
> 
> 标签：php, apache, http, authentication

我已经阅读了与此相关的[PHP 站点](http://php.net/manual/en/features.http-auth.php)中的页面，但我希望访问`username`and `password`，但之前没有指定标题，因此会显示表单并在之后导致某种类型的重新加载。

我希望这个`username`和`password`传递可以可选地传递。我的目标是让我的管理用户依赖这些凭据。因此，与其打开`example.com/admin`登录然后重定向回`example.com`显示管理功能，我想读取这些凭据并从中登录（如果它们匹配）。

我已经`var_dump`'ed`$_SERVER`和`$_ENV`，但要求`http://username:password@example.com`不要在任何地方显示它们。

我将 PHP 作为 CGI 运行。

我该怎么做？

## 更新：

```
<?php

/*if (!isset($_SERVER['PHP_AUTH_USER'])) {
    header('WWW-Authenticate: Basic realm="My Realm"');
    header('HTTP/1.0 401 Unauthorized');
    echo 'Text to send if user hits Cancel button';
    exit;
}*/

echo '<pre>';

$user = isset($_SERVER['PHP_AUTH_USER']) ? $_SERVER['PHP_AUTH_USER'] : null;
$pass = isset($_SERVER['PHP_AUTH_PW']) ? $_SERVER['PHP_AUTH_PW'] : null;
var_dump( $user, $pass );

var_dump($_SERVER, $_ENV);

echo '</pre>'; 
```

这是我正在使用的示例代码。Colin 的添加建议`RewriteRule`并没有影响结果。

这里的问题是，如果该`if`部分被注释掉，我会得到`NULL`$user 和 $pass 的值。如果我取消评论它，我会得到正确的值。

添加额外的`RewriteRule`标题，但不是获取值所必需的。看起来所有的魔力都在于如果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-11T12:36:44.690

我认为这正是您正在寻找的：

```
if (!isset($_SERVER['PHP_AUTH_USER'])) {
    header('WWW-Authenticate: Basic realm="My Realm"');
    header('HTTP/1.0 401 Unauthorized');
    echo 'Text to send if user hits Cancel button';
    exit;
} else {
    echo '<pre>';
    print_r ($_SERVER); 
    echo '</pre>';
    echo '<hr>';
    echo 'Username: ' . $_SERVER['PHP_AUTH_USER'];
    echo '<br>Pass: ' . $_SERVER['PHP_AUTH_PW'];
} 
```

因此，在您的“auth.php”中使用此代码，如果您访问[http://yourusername:yourpass@yourdomain.com/auth.php](http://yourusername:yourpass@yourdomain.com/auth.php) 您将立即使用您的用户名登录并在 URL 中提供密码。如果您直接访问 url，例如：http: [//yourdomain.com/auth.php](http://yourdomain.com/auth.php)会出现一个弹出窗口询问用户名和密码，当您输入它们时，您将再次登录。使用：

```
$_SERVER['PHP_AUTH_USER']
$_SERVER['PHP_AUTH_PW'] 
```

现在获取输入的用户名和密码。

请记住，当您登录一次时，您的会话仍然存在，要测试密码提示框，您需要按“CTRL + SHIFT + N”打开一个新的隐身窗口，然后输入裸 URL yourdomain.com/auth.php

# qt - 如何通过从 Qlineedit 读取数字来更改正方形的大小

> ID：15524673
> 
> 赞同：1
> 
> 时间：2013-03-20T13:17:09.470
> 
> 标签：qt, resize

我在 QT 中制作了一个小方块，然后将其放入一个循环中以创建 50 个方块。现在我想从 QlineEdit 或文本字段中读取一个数字，并将整个网格的大小更改为该数字。

任何人都可以请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T13:20:17.580

`QLineEdit`只需从控件和使用`QString::toInt()`方法中读取文本属性。
使用 Assistant 和 Qt 示例。你在问一个明显的问题。

# asp.net-mvc - 为什么 Razor 添加另一个 value 属性以及如何删除它？

> ID：15524674
> 
> 赞同：4
> 
> 时间：2013-03-20T13:17:11.220
> 
> 标签：asp.net-mvc, razor, asp.net-mvc-4

当我在剃刀视图页面中键入以下内容时：

```
 @Html.TextBoxFor(m => m.Name, new {@Value="Default Value", @Class = "CSSRadwan" }) 
```

它翻译成以下内容：

```
 <input Class="CSSRadwan" Value="Default Value" id="Name" name="Name" type="text" value="" /> 
```

如果我用@value（小“v”）更改@Value，它根本不会翻译。

我的问题是：

为什么还有另一个名为“value”的属性并且它是空的？如何删除它？

为什么“值”属性中的字符“V”是大写而另一个是小如果我希望第一个也像普通属性一样小，该怎么做？

我正在使用 MVC4.0 和 Visual Studio 2012 Update 1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-29T10:29:35.923

> 为什么还有另一个属性叫做“值”...

如果您查看 MVC 的源代码，您会发现在[System.Web.Mvc.Html.InputExtensions.cs](http://aspnetwebstack.codeplex.com/sourcecontrol/latest#src/System.Web.Mvc/Html/InputExtensions.cs)中，由于方法中的以下行，该`value`属性将*始终*由框架设置`InputHelper`：

```
tagBuilder.MergeAttribute("value", attemptedValue ?? ((useViewData) ? htmlHelper.EvalString(fullName, format) : valueParameter), isExplicitValue); 
```

使用`TextBoxFor`, `isExplicitValue`is时`true`，该`value`属性将覆盖任何现有的名为 的 html 属性`value`。这解释了为什么您不能使用`new { @value="My value" }`in `TextBoxFor`。

> ...它是空的？

因为 m.Name 最初没有值。

> 如何删除它？

`value`如上所示，您无法删除。

> 为什么“值”属性中的字符“V”是大写而另一个是小如果我希望第一个也像普通属性一样小，该怎么做？

它必须是大写的 V in`Value`才能与小写区分开来，`value`这样它就不会被框架覆盖，如上所述。实际上，您将获得如下输出：

```
<input Value="Default Value" value="" id="Name" name="Name" type="text" /> 
```

由于`Value`之前出现`value`在 html 中，“默认值”将被浏览器渲染并显示在文本框中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T13:34:59.397

HTML 输入元素的“值”属性表示要发布的值，或者如果显式设置，则表示默认值。正如 gustavodidomenico 指出的那样，TextBoxFor 帮助器旨在显示模型中的值，这就是呈现属性的原因。如果您不希望呈现 value 属性，请改用 TextBox 帮助器。这是满足您要求的正确工具。

您的 value 属性具有大写“V”的原因是因为您在匿名对象的属性名称上指定了一个。“类”也是如此。将属性名称更改为以小写字母开头：

```
new { @class = "CSSRadwan", @value = "Default Value" } 
```

# macos - 对持有 NSDictionary 的 NSMutableArray 的 KVC 兼容更新

> ID：15524676
> 
> 赞同：2
> 
> 时间：2013-03-20T13:17:15.297
> 
> 标签：macos, cocoa, cocoa-bindings

我的问题在于更新包含不同数量的 NSDictionary 的 NSMutableArray。每个 NSDictionary 有 6 个键，根据用户在表视图中选择的记录从数据库中检索这些键。该数组链接到一个允许用户选择字典并查看内容的 NSArrayController。

如果字典的 number[count] 个改变，arrayController 会更新视图；没问题。但是，表视图中的选择之间的字典计数相同，arrayController 不会更新视图，但模型会更新。

arrayController 在 IB 中绑定到模型数组，只要表格视图中的选择更改，该数组就会更新。

使用：

```
[self.selectedJobNotes addObject:[self.jobNotes objectAtIndex:i]]; 
```

这不符合 KVC。

但是使用（我认为它符合 KVC）：

```
[[self.selectedJobNotes objectAtIndex:noteCount] setValue:[[self.jobNotes objectAtIndex:i]valueForKey:@“Content"] forKeyPath:@"Content"]; 
```

也不起作用。

有没有办法告诉 ArrayController 这是一个新数组/有新内容，所以重新加载。

```
[self.jobNotesArrayController fetch:self.a2gDataObject.selectedJobNotes]; 
```

好像也没用？？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T03:42:32.737

Best way to solve this is to implement (and use) indexed accessors. In your case they'd look like

```
- (void)insertObject:(NSDictionary *)dict inSelectedJobNotesAtIndex:(NSUInteger) index {
    [self.selectedJobNotes addObject:[self.jobNotes objectAtIndex:index]];
}

- (void)insertSelectedJobNotes:(NSArray *)notesArray atIndexes:(NSIndexSet *)indexSet {
    [self.selectedJobNotes insertObjects:notesArray atIndexes:indexSet];
} 
```

See KVC Programming Guide: [Mutable Indexed Accessors](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/KeyValueCoding/Articles/AccessorConventions.html#//apple_ref/doc/uid/20002174-SW4) and [Ensuring KVC Compliance](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/KeyValueCoding/Articles/Compliant.html#//apple_ref/doc/uid/20002172).

You could also wrap your updates in `willChange/didChange ValueForKey:`, but implementing indexed accessors solves it once and for all.

# maven - Maven重命名文件打包成jar

> ID：15524677
> 
> 赞同：2
> 
> 时间：2013-03-20T13:17:17.280
> 
> 标签：maven

通过 Maven，我试图创建两个单独的 jar，每个 jar 中都有不同的 dll（32 位和 64 位），但 dll 必须在 jar 的根目录下使用相同的名称。我可以创建单独的 jar 没问题，但似乎找不到重命名文件的方法。

我尝试将具有相同名称的文件放在不同的目录中，将它们复制到目标，然后构建 jar。但是因为'将它们放在单独的目录中，它们最终不会出现在 jar 的根目录中。

我需要这个，因为我正在创建一个 Applet 并使用 Java Web Start 进行部署。dll 需要位于单独的 jar 中以针对不同的架构，并且需要根据 JNLP 规范位于 jar 的根目录中。

起始位置：

```
\src
     \main
        \resources
            rxtxSerial32.dll
            rxtxSerial64.dll 
```

期望的结束位置：

```
native-dll-32.jar
    rxtxSerial.dll (the 32 bit version)

native-dll-64.jar
    rxtxSerial.dll  (the 64 bit version) 
```

为了获得单独的罐子，我正在使用 maven-jar-plugin

```
 <plugin>
            <artifactId>maven-jar-plugin</artifactId>
            <executions>
              <execution>
                <id>native-dll-64</id>
                <goals><goal>jar</goal></goals>
                <phase>package</phase>
                <configuration>
                  <classifier>native-dll-64</classifier>
                  <includes>
                    <include>**/rxtxSerial64.dll</include>
                  </includes>
                </configuration>
              </execution>
            </executions>
        </plugin> 
```

非常感谢任何帮助。也许我需要一个全新的策略？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T13:53:16.317

我建议您为这些创建两个项目，因为您希望最终得到两个 jar 文件。如果项目在构建中共享通用功能，则可以将其放入父 POM 文件中。

在大多数情况下，从一个项目生成多个 jar 文件会导致麻烦——我通常会尽量避免这种情况。一个项目 - 一个工件，遵循这条规则帮助了我几次。

# iphone - 在长按手势识别器上获取错误的 UIButton 标签

> ID：15524683
> 
> 赞同：3
> 
> 时间：2013-03-20T13:17:25.017
> 
> 标签：iphone, ios, objective-c, uibutton, uigesturerecognizer

我知道已经有很多与此类似的问题，但我已经尝试了所有这些问题，并且在未能解决我的问题时，我发布了我的问题。首先我尝试的问题是：

1）[如何通过longPressGestureRecognizer获取button.tag？](https://stackoverflow.com/questions/5700984/how-to-get-button-tag-via-longpressgesturerecognizer)

2) [UIButton 长按事件](https://stackoverflow.com/questions/6179347/uibutton-long-press-event)

在我的应用程序`UIButtons`中，我的 xib 中有 12 个。长按`UIButton`我有这个方法被调用。每次`gesture.view.tag`单击不同的`UIButtons`.

```
- (IBAction)longPress:(id)sender {

     UILongPressGestureRecognizer* gesture=(UILongPressGestureRecognizer*)sender;
     NSLog(@"Tag---> %d",gesture.view.tag);
  } 
```

我的 xib 看起来像这样：

![在此处输入图像描述](../Images/3ff3f1214f624193f58baeb8d13e7719.png)

> **更新1：**

在有人对 xib 感到困惑之前，我必须说它`UIButtons`设置为自定义类型，因此它们在`UIImageView`.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-20T13:23:22.337

看起来 a`UIGestureRecognizer`可以跟踪多个视图，但它没有报告它正在跟踪多个视图。因此，当您检查`view`a 的属性时`UIGestureRecognizer`，它被设置为添加识别器的最后一个视图。

从[文档](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIGestureRecognizer_Class/Reference/Reference.html)：

> ***手势识别器对针对特定视图***和所有该视图的子视图进行命中测试的触摸进行操作。因此，它必须与该视图相关联。要建立这种关联，您必须调用 UIView 方法 addGestureRecognizer:。手势识别器不参与视图的响应者链。

这种情况下的解决方案是为每个需要识别的视图设置一个手势识别器，并将它们链接到同一个委托选择器。

[注意：这个问题（和我的答案）起源于[2013 年 3 月 20 日的 NSChat 聊天室。](https://chat.stackoverflow.com/transcript/message/8376090#8376090)决定在这里发布以供将来参考。]

# java - 使用 JUnit 进行容器内测试

> ID：15524687
> 
> 赞同：1
> 
> 时间：2013-03-20T13:17:45.050
> 
> 标签：java, hibernate, unit-testing, junit, integration-testing

我是 JUnit 的新手，并试图在遗留项目中实现它。它是一个 Java EE 项目。它的 UI 层在 Flex 中，后端有 Hibernate 作为带有 SQL Server 数据库的 ORM 层。它在 Tomcat 上运行。

我正在采取一些步骤来自己学习 JUnit 并将其实现到代码库中。有一个类有它的`findByFK`方法。如果找到任何类对象，此方法将返回一个类对象数组。

该方法在 Web 应用程序上运行良好，但我无法运行其 JUnit 测试用例。测试用例不在容器中，无法访问数据源。

如何在容器内运行 JUnit 测试用例？

我刚刚开始使用 JUnit，不想因为集成问题而使其过于复杂。有什么办法可以解决这个问题，而无需对数据源和 Web 服务器等进行存根处理？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T13:27:25.340

[Arquillian 测试](http://arquillian.org/)允许您在容器内运行单元测试。

做类似的事情：

```
@RunWith(Arquillian.class)
public class Test {
    @Test
    public void test(){
    //your test
    }
} 
```

将允许您在容器中部署测试，使其能够访问您的数据库。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-20T13:31:33.417

您在这里有 2 个选项：

1.  使用设置带有数据源的数据库的跑步者（或其他人）开始测试，就像[来自 phoenix7360 的答案一样](https://stackoverflow.com/a/15524916/15108)。但这实际上并不是每个定义的单元测试。
2.  [使用EasyMock](http://www.easymock.org)或[Mockito](http://www.mockito.org)等 Mocking 框架模拟与 DB 的交互。

如果你真的想做单元测试，我会选择第二个选项。但是您的设置并不完全是单元测试，而是一种集成测试。

# android - TextView setText 似乎会干扰使用 MotionEvent 拖动 Button

> ID：15524693
> 
> 赞同：2
> 
> 时间：2013-03-20T13:17:56.553
> 
> 标签：android, textview, motionevent

我在这里有一些奇怪的行为（无论如何对我来说看起来很奇怪）。

我有两个按钮，向左/向右拖动一个也会移动另一个。这工作正常，直到我使用 setText 更新 TextView 并详细说明它所在的事件。如果下面的 tv.setText 行未注释，它似乎导致按钮被设置回其原始位置。

如果我正在做一些明显愚蠢的事情并且有人可以让我知道，我将不胜感激。

谢谢。

代码在这里：

```
package com.kk.moveit;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnTouchListener;
import android.widget.Button;
import android.widget.TextView;

public class MoveIt extends Activity {

Button b1,b2;
TextView tv;

int b1X;
int wndwX; 

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_move_it);

    b1 = (Button)findViewById(R.id.b1);
    b2 = (Button)findViewById(R.id.b2);
    tv = (TextView)findViewById(R.id.tv);

    b1.setOnTouchListener( new OnTouchListener() {

        public boolean onTouch(View view, MotionEvent event) {
            int action = event.getAction();
            switch (action) {
                case MotionEvent.ACTION_DOWN:
                    // the view is pressed
                    b1X = (int) event.getX();
                    wndwX = (int) event.getRawX();
   //               tv.setText("ACTION_DOWN");
                    return false;
                //break;                        
                case MotionEvent.ACTION_MOVE:
                // a movement is applied to the view
                    int l0 = view.getLeft();
                    int l = (int) event.getRawX() - b1X;
                    int r = l + view.getWidth();
                    view.layout(l, view.getTop(), r, view.getBottom());
                    move(b2,l-l0);
  //            tv.setText("ACTION_MOVE");
                    return true;
                case MotionEvent.ACTION_UP:
 //                 tv.setText("ACTION_UP");
                    // the view is released
                    return true; // finished with this event
                case (MotionEvent.ACTION_CANCEL):
                    // something happened and the
                    // action was not completed
                    return true; // finished with this event
                case (MotionEvent.ACTION_OUTSIDE):
                    // action happened outside the bounds
                    // of the view
                    return true; // finished with this event    

            }
            return false;
        }
    });
}

private void move(View v, int l) {
    int l0 = v.getLeft();
    v.layout(l+l0, v.getTop(), l+l0+v.getWidth(), v.getBottom());

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_move_it, menu);
    return true;
} 
```

}

和这里的xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/LinearLayout1"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<Button
    android:id="@+id/b1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Button1" />

<Button
    android:id="@+id/b2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Button2" />

<TextView
    android:id="@+id/tv"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/hello_world"
    tools:context=".MoveIt" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T13:35:08.783

> 如果下面的 tv.setText 行未注释，则似乎导致按钮被设置回其原始位置。

在这些上设置文本`TextViews`将触发视图层次结构的新测量和布局。这个新的布局传递将取消您对这些视图位置所做的更改（使用该`layout()`方法），因为`LinearLayout`它有自己的布局机制，用于放置其子项。

如果您想实现拖动，那么您可以使用 SDK 拖放框架（如果我没记错的话，可与 Honeycomb 一起使用）或更改您当前的布局以使用 a`FrameLayout`或`RelativeLayout`root 并更改方法`LayoutParams`中的视图`onTouch`。

# magento - Magento：自定义结帐页面

> ID：15524694
> 
> 赞同：0
> 
> 时间：2013-03-20T13:17:57.747
> 
> 标签：magento, magento-1.7, checkout

我在搞乱 Magento 1.7.2，但我无法弄清楚。我创建了一个销售定制产品（虚拟产品）的在线商店。

允许用户在我的商店注册是没有用的，因为他们只能购买一次产品。所以我需要禁用注册。

默认情况下，结帐页面上有 4 个步骤，客户需要在订购前完成。

1.  结帐方式
2.  账单信息
3.  支付信息
4.  订单审核

所以我需要的是消除第 1 步，因为我只使用访客结帐，并且提供登录或注册选项没有意义。所以客户点击结账后，需要直接进入第2步。

在第 2 步，即帐单信息中，我只需要客户姓名（名字和姓氏）和电子邮件，以及需要删除的所有内容，例如电话号码、地址等，

在第 3 步中，我只提供 PayPal，如果我可以取消该步骤，那就太好了。

第4步，没问题。

谁能告诉我如何更改结帐页面，或者是否可以创建一个新的自定义结帐页面以满足我的要求。如果有人能指出一些好的资源或教程，那将会很有帮助。

感谢任何形式的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-19T20:56:44.613

如果要从结帐过程中删除一个步骤，则需要找到此变量：

```
$stepCodes = array('billing', 'shipping', 'shipping_method', 'payment', 'review'); 
```

因此，如果您想删除计费流程（例如），那么您的代码应如下所示：

```
$stepCodes = array('shipping', 'shipping_method', 'payment', 'review'); 
```

最好的方法是制作一个自定义模块，以这种方式扩展 Mage_Checkout_Block_Onepage 类：

```
class Vendor_ModuleName_Block_Onepage extends Mage_Checkout_Block_Onepage
{
    public function getSteps()
    {
        $steps = array();

        if (!$this->isCustomerLoggedIn()) {
            $steps['login'] = $this->getCheckout()->getStepData('login');
        }

        $stepCodes = array('shipping', 'shipping_method', 'payment', 'ddate', 'review');

        foreach ($stepCodes as $step) {
            $steps[$step] = $this->getCheckout()->getStepData($step);
        }
        return $steps;
    }
} 
```

并将其保存在具有以下结构的本地文件夹中：

本地/供应商/module_name/Block/Onepage.php

我希望这有帮助。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2015-06-18T11:45:24.717

定位文件`app\code\core\Mage\Checkout\Block\Onepage.php`

编辑类并替换为以下代码：

```
class Mage_Checkout_Block_Onepage extends Mage_Checkout_Block_Onepage_Abstract
{
    /**
     * Get 'one step checkout' step data
     *
     * @return array
     */
    public function getSteps()
    {
        $steps = array();
        $stepCodes = $this->_getStepCodes();

        if ($this->isCustomerLoggedIn()) {
            $stepCodes = array_diff($stepCodes, array('login'));
        }

        foreach ($stepCodes as $step) {
            $steps[$step] = $this->getCheckout()->getStepData($step);
        }

        return $steps;
    }

    /**
     * Get active step
     *
     * @return string
     */
    public function getActiveStep()
    {
        return $this->isCustomerLoggedIn() ? 'billing' : 'login';
    }
} 
```

到以下：

```
class Mage_Checkout_Block_Onepage extends Mage_Checkout_Block_Onepage_Abstract
{
    /**
     * Get 'one step checkout' step data
     *
     * @return array
     */
    public function getSteps()
    {
        $steps = array();

        if (!$this->isCustomerLoggedIn()) {
            $steps['login'] = $this->getCheckout()->getStepData('login');
        }

        $stepCodes = array('shipping','billing','shipping_method', 'payment', 'review');
// or new
//$stepCodes = array('shipping','payment', 'review');

        foreach ($stepCodes as $step) {
            $steps[$step] = $this->getCheckout()->getStepData($step);
        }
        return $steps;
    }
} 
```

刷新缓存并立即检查..

# mongodb - 没有文件系统的键值存储？

> ID：15524705
> 
> 赞同：2
> 
> 时间：2013-03-20T13:18:30.963
> 
> 标签：mongodb, key-value, hard-drive, document-storage

我正在开发一个应用程序，我们正在编写大量的键值对。在生产环境中，数据库大小将达到数百 TB，甚至数 PB。密钥为 20 字节，值最大为 128 KB，很少小于 4 KB。现在我们正在使用 MongoDB。性能不是很好，因为显然这里有很多开销。MongoDB 写入文件系统，该文件系统写入 LVM，该 LVM 进一步写入 RAID 6 阵列。

由于我们的要求非常基本，我认为使用通用数据库系统会影响性能。我正在考虑实现一个简单的数据库系统，我们可以将文档（或“值”）直接放入原始驱动器（实际上是 RAID 阵列），并存储密钥（以及指向原始值所在位置的指针）驱动器）在由 SSD 支持的快速内存数据库中。这也将加快读取速度，因为不会有任何碎片（与使用文件系统相反）。

尽管文档很少被删除，但我们仍然必须在设备上维护一个可用空间池（文件系统会提供的东西）。

我的问题是，这真的会带来任何重大改进吗？此外，是否有任何文档存储系统可以执行此类操作？或任何类似的东西，我们可以用作起始点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T13:36:28.370

Apache Cassandra 突然想到。这是当前涉及大规模扩展的选择 NoSQL 解决方案。它看到[了几家具有大规模扩展需求的大公司的生产使用情况。](http://planetcassandra.org/Company/ViewCompany?IndustryId=-1) 经过一些工作，我可以说它需要一点时间来重新考虑您的数据模型以适应它如何安排其存储引擎。著名的文章[“WTF is a](http://bigg.googlecode.com/svn-history/r12/trunk/docs/nosql/WTF-is-a-SuperColumn.pdf) supercolumn”对此进行了很好的介绍。警告：Cassandra 仅在您计划存储大量数据集时才有意义，并且没有单点故障的分发是关键任务要求。以您解释数据的方式，这听起来很合适。

另外，你有没有研究过 redis，至少是为了保存关键引用？您的内存需求远远超出了单个实例能够处理的能力，但 Redis 也可以配置为分片。这不是它的主要用例，但它[在 Craigslist 和 Groupon 都看到了生产用途](http://redis.io/topics/faq)

另外，您是否已尽一切可能优化 mongo，尤其是研究如何改进索引？Mongo 确实会保存到磁盘，但在优化时应该相对性能更好，以尽可能将最热的部分保留在内存中。

如果它不是太短暂，是否可以缓存这些数据？

**我会完全警告你不要自己动手。** 只是一个公平的警告。这不是对您或其他任何人的打击，只是我个人不得不维护由内部开发人员编写的自定义“数据索引”，这些开发人员以前在他们的头脑中遇到了麻烦。在我的工作中，我们有一个**巨大的**在磁盘键值存储上，这是我们系统中的主要性能瓶颈，由一位从公司离职的开发人员编写。在当今令人兴奋的 NoSQL 机会中陷入这样的解决方案是令人沮丧的。我上面提到的项目利用了开源社区的全部力量来证明和优化它们的使用。除非您投入大量时间、精力和促销，否则您无法通过自己的解决方案实现这一目标。至少[我会鼓励你看看你所有的 nosql 选项](http://kkovacs.eu/cassandra-vs-mongodb-vs-couchdb-vs-redis)也许找到一个你可以贡献的项目，而不是自己动手。编写数据库服务器本身绝对是一项不平凡的任务，需要一个庞大的团队，尤其是根据您给出的要求（但如果您最终这样做，我祝您好运！=））

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-17T05:15:11.620

迟到的答案，但为了将来参考，我认为蜘蛛会这样做

# c# - Task.ContinueWith(..., TaskScheduler.FromCurrentSynchronizationContext()) *不会*在 UI 线程上运行的任何场景？

> ID：15524707
> 
> 赞同：9
> 
> 时间：2013-03-20T13:18:33.793
> 
> 标签：c#, task, multithreading, synchronizationcontext

我们正在观察一些奇怪的东西，代码如下：

```
var task = new Task(...); // run in the background, do something lengthy work
task.ContinueWith(..., TaskScheduler.FromCurrentSynchronizationContext());
task.Start(); 
```

那里的第二个任务调用一个事件，该事件反过来尝试更新 GUI，我们得到了可怕的跨线程异常。

从第二个任务中的方法检查`Thread.CurrentThread.ManagedThreadId`表明它实际上*没有*在 UI 线程上运行。

生成任务的代码在 UI 线程上运行*。*

是否有任何情况会出错？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T13:32:51.963

假设您使用的是 .NET 4.0，则存在一个错误，`System.Threading.SynchronizationContext.Current`主线程上的 可能会变为空，您会遇到此问题。如果您可以轻松重现问题，首先要检查的是`SynchronizationContext.Current`调用时是否为空`TaskScheduler.FromCurrentSynchronizationContext()`。

在此处查看该问题的详细信息：[SynchronizationContext.Current is null in Continuation on the main UI thread](https://stackoverflow.com/questions/11621372/synchronizationcontext-current-is-null-in-continuation-on-the-main-ui-thread/11634544#11634544)

该错误已在 .NET 4.5 中修复。

# node.js - 在 ExpressJS 3 中处理错误的正确方法

> ID：15524711
> 
> 赞同：0
> 
> 时间：2013-03-20T13:19:01.407
> 
> 标签：node.js, error-handling, express

在过去的几个小时里，我一直在努力寻找关于如何处理 NodeJS + **ExpressJS 3** api 错误的体面教程。

我已经阅读了很多关于 SO 的问题/答案并阅读了官方的 ExpressJS 指南，但仍然无法弄清楚做如此重要的事情的正确方法。我找到的大多数答案都与 Express 1 或 Express 2 相关，但不再适用，ExpressJS 指南只是描述了一些断章取义的内容，这使得它很难理解。

所以这是我的用例：我想使用 GET /cities/:slug 获取有关城市的信息。如果 slug 不存在或发生错误（例如 MongoDB 或 Mongoose），我想返回一个错误代码。

这是我当前代码的相关部分：

```
if (err || !city) {
  res.json({code:500, city:[]});
} 
```

这是一个基本的例子，它工作得“很好”，但我很确定这不是在 NodeJS 中做这件事的正确方法。

此外，这不会停止我的 NodeJS 实例，但可能会出现一些意外错误。根据我的阅读，这在生产中不是问题，因为显然重新启动 NodeJS 实例更干净，并且第三方可以很好地处理它（阅读有关[Cluster](https://github.com/LearnBoost/cluster)、[Forever](https://npmjs.org/package/forever)甚至[Monit](http://mmonit.com/monit/)的信息）。

希望对我忽视了太久的这个问题有更多的见解。

# ruby-on-rails - 在 Rails 应用程序中实现规则引擎

> ID：15524712
> 
> 赞同：7
> 
> 时间：2013-03-20T13:19:03.290
> 
> 标签：ruby-on-rails, rule-engine

我想在具有复杂定价逻辑的 Rails 3.2 应用程序上实现规则引擎，我想将定价逻辑中的条件转换为规则，并使用它们。为此我正在创建一个全新的应用程序。

我在这方面搜索了很多，找到了 rules_engine、ruleby、treetop，但他们提供的文档不仅足够，我在决定最适合我要求的文档方面做了很多努力。

开始开发规则引擎的最佳方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T13:38:10.023

我一直在寻找类似 prolog 的系统来自己实施规则。这是我到目前为止发现的。

> 这个库包含一个用 Ruby 编写的规则引擎。它基于 [Rete 算法](http://en.wikipedia.org/wiki/Rete_algorithm)，并使用 DSL 以可读的方式表达规则。

[https://github.com/ulfurinn/wongi-engine](https://github.com/ulfurinn/wongi-engine)

# javascript - 从验证表单返回一个空字段名称

> ID：15524715
> 
> 赞同：0
> 
> 时间：2013-03-20T13:19:07.580
> 
> 标签：javascript, html, validation

[http://jsfiddle.net/3vHxF/](http://jsfiddle.net/3vHxF/)这是我试过的

我的html代码是：

```
 <form id="commentForm" style="width:200px;" name="MYFORM" action="#">
                  <label>
                     <strong>Enquiry Form </strong>
                  </label>
                  <label>Name</label>
                  <input id="name" type="text" size="30" name="name">
                  <label>Phone No</label>
                  <input id="phone" type="text" size="30" name="phone">
                  <label>Email</label>
                  <input id="email" type="text"size="30" name="email">
                  <label>Message</label><br>
                  <textarea id="message" name="message"></textarea>
                  <input id="Send" type="submit" value="Send" onclick="send()">
                  </form>

Javascript is :

var name=getElementById('name');
var phone=getElementById('phone');
var email=getElementById('email');
var mess=getElementById('message');

function send(){

if(name==null&&phone==null&&email==null&&mess==null)
    alert('field is empty');
} 
```

我想提醒空的字段，同时我想简单地写它。请不要推荐任何插件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T13:26:25.120

你的问题：

*   您正在测试 HTMLInputElement 对象，而不是它们持有的值（所以获取值）
*   您正在将字符串与`null`（与空字符串进行比较）进行比较
*   您的失败条件是基于*所有*这些都失败而不是其中*任何*一个失败（使用*或*不使用*and*）

这样的：

```
if(name.value === "" || phone.value === "" || email.value === "" || mess.value === "")
    alert('field is empty');
} 
```

要确定*哪个*是空的，您需要一次测试一个，而不是在单个`if`语句中使用`||`s。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T13:33:05.950

从按钮中删除点击处理程序并在表单上放置一个提交处理程序：

```
<form id="commentForm" onsubmit="return validat(this);" ... > 
```

现在你可以做一个简单的验证：

```
function validate(form) {
  var control;
  var isValid = true;

  for (var i=0, iLen=form.elements.length; i<iLen; i++) {
    control = form.elements[i];

    if (control.value == '') {
      alert('Field ' + control.name + ' is empty'); 
      isValid = false;
    }
  }
  return isValid; // false cancels submit
} 
```

这是一个非常小的验证脚本，但它是一个开始。

顺便说一句，由于您的表单控件具有名称（成功所必需的），因此它们不需要 id。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T13:31:07.817

不是一个干净的方法。但是尝试开发下面的代码。

```
var name=document.getElementById('name').value;
var phone=document.getElementById('phone').value;
var email=document.getElementById('email').value;
var mess=document.getElementById('message').value;

function send(){

if(isEmpty(name, 'name') || isEmpty(phone, 'phone') || isEmpty(email, 'email') || isEmpty(mess, 'message')) {
  return false;
    }
    return true;
}

function isEmpty(val, fld) {
    if(val && val != null) {
        return true;
    }
    alert(fld +" is Empty");
    return false;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-20T13:44:30.343

改变

```
var name=getElementById('name');
var phone=getElementById('phone');
var email=getElementById('email');
var mess=getElementById('message'); 
```

到

```
 var name=document.getElementById('name').value;
var phone=document.getElementById('phone').value;
var email=document.getElementById('email').value;
var mess=document.getElementById('message').value; 
```

然后使用

```
if(name.value === "" || phone.value === "" || email.value === "" || mess.value === "")
    alert('field is empty');
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-20T13:24:24.713

您可以使用以下 jQuery：

```
$(":text,textarea").each(function() {
    $(this).css("outline", $(this).val() ? "1px solid red" : "none");
}); 
```

* * *

抱歉，我认为“没有插件”意味着“没有 jQuery 插件”。（你会称 jQuery 为库或依赖项，而不是“插件”）

这是一个几乎未经测试的非 jQuery 版本：

```
function highlightMissingInputs() {
    for (var formIndex = 0; formIndex < document.forms.length; formIndex++) {
        var form = document.forms[formIndex];
        for (var inputIndex = 0; inputIndex < form.length; inputIndex++) {
            var input = form[inputIndex];
            switch (input.tagName) {
                case "INPUT":
                    var typeAttribute = input.attributes.type;
                    if (typeAttribute) {
                        var type = (typeAttribute.value || "").toLowerCase();
                        switch (type) {
                            case undefined:
                            case "":
                            case "text":
                            case "email":
                            case "tel":
                            case "email":
                            case "search":
                                break;
                            default:
                                continue;
                        }
                    }
                    break;
                case "TEXTAREA":
                    break;
                default:
                    continue;
            }

            input.style.outline = input.value ? "none" : "1px solid red";
        }
    }
} 
```

# android - 如何计算图像停止移动后的度数（android）？

> ID：15524717
> 
> 赞同：0
> 
> 时间：2013-03-20T13:19:07.930
> 
> 标签：android, motionevent

我对 Android 编程很陌生。我需要做的是计算箭头停止移动后的度数。我正在使用以下代码：

```
public boolean onTouch(View v, MotionEvent event) {

            //double xValue, yValue;
            xValue = event.getX();
            yValue = event.getY();
            switch (event.getAction()) {

                case MotionEvent.ACTION_DOWN:
                    // reset the touched quadrants
                    for (int i = 0; i < quadrantTouched.length; i++) {
                        quadrantTouched[i] = false;
                    }

                    allowRotating = false;

                    startAngle = getAngle(event.getX(), event.getY());
                    break;

                case MotionEvent.ACTION_MOVE:
                    double currentAngle = getAngle(event.getX(), event.getY());
                    rotateDialer((float) (startAngle - currentAngle));
                    startAngle = currentAngle;
                    break;

                case MotionEvent.ACTION_UP:
                    allowRotating = true;
                    break;

            } 
```

需要能够使用`xValue`和`yValue`

```
private double getAngle(double xTouch, double yTouch) {
        double x = xTouch - (dialerWidth / 2d);
        double y = dialerHeight - yTouch - (dialerHeight / 2d);

        switch (getQuadrant(x, y)) {
            case 1:
                return Math.asin(y / Math.hypot(x, y)) * 180 / Math.PI;

            case 2:
            case 3:
                return 180 - (Math.asin(y / Math.hypot(x, y)) * 180 / Math.PI);

            case 4:
                return 360 + Math.asin(y / Math.hypot(x, y)) * 180 / Math.PI;

            default:
                // ignore, does not happen
                return 0;
        }
    } 
```

插入`xValue`并`yValue`进入`getAngle()`

```
public void run() {
            //double angleValue;
            setCheck(velocity);
            if (Math.abs(velocity) > 5 && allowRotating) {

                rotateDialer(velocity / 75);
                velocity /= 1.0666F;
                // post this instance again
                dialer.post(this);
            }else{

                /*Thread myThread = new Thread(new UpdateThread());
                myThread.start();*/
            }
        } 
```

并`getAngle()`从方法内部的 else调用`run()`。问题是`xValue`和`yValue`仅在运动事件期间计算。运动事件结束后，图像继续旋转。因此，我需要从`MotionEvent`图像速度达到 0 时获取最新值。任何想法都将不胜感激。

# colors - Mapquest Open Aerial 瓷砖中的奇怪颜色

> ID：15524718
> 
> 赞同：1
> 
> 时间：2013-03-20T13:19:10.153
> 
> 标签：colors, mapquest

我以前使用 Mapquest Open Arial 瓷砖没有任何问题。但是，在最后一次服务器更改后，我得到了颜色奇怪的图块。他们的示例图块看起来仍然不错：

[http://otile1.mqcdn.com/tiles/1.0.0/sat/15/5240/12661.jpg](http://otile1.mqcdn.com/tiles/1.0.0/sat/15/5240/12661.jpg)

但是，我要下载的看起来像这样：

[http://otile1.mqcdn.com/tiles/1.0.0/sat/13/1927/3385.jpg](http://otile1.mqcdn.com/tiles/1.0.0/sat/13/1927/3385.jpg)

最突出的问题是植被是红色的。

有谁知道是什么原因造成的，或者我可以如何纠正颜色（我曾尝试在 gimp 中使用它们，但我找不到解决方案）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T14:09:17.120

免责声明：我在 MapQuest 工作。不幸的是，在上一轮开放航拍图像更新中存在不良数据，导致某些区域（我们注意到德克萨斯州）在缩放级别 12 及以上时出现变色。我们的积压工作中有这个，但我不知道这个问题何时会得到解决。感谢您对我们的 Open Tiles 感兴趣！

# java - 如何为 finally 块保留抛出的异常？

> ID：15524721
> 
> 赞同：1
> 
> 时间：2013-03-20T13:19:17.643
> 
> 标签：java, exception, idioms, control-flow

我有以下代码：

```
try {
    /* etc. 1 */
} catch (SomeException e) {
    /* etc. 2 */
} catch (SomeException e) {
    /* etc. 3 */
} finally {
    /* 
     * do something which depends on whether any exception was caught,
     * but should only happen if any exception was caught.
     */

    /* 
     * do something which depends on whether an exception was caught and
     * which one it was, but it's essentially the same code for when no
     * exception was caught.
     */
} 
```

所以，我想保留我捕获的异常。除了在每个 catch 块中分配一个变量之外，还有什么方法可以做到这一点？

**编辑：**为了澄清，请不要发布建议我使用 try 块之外的变量的答案。我知道我能做到，这个问题的重点是找到一个替代方案。

现在，我*真正*想要的是更灵活的catch 块，以便多个catch 块可以捕获相同的异常，例如`catch(Exception e)`即使它已经被捕获也会捕获所有内容，`catch(Exception e) except(NullPointerException, IllegalArgumentException)`会跳过异常。并且一个 catch 块可以`catchingcontinue;`跳过同一个 try 块的所有其他 catch 块，`catchingbreak;`甚至跳过 finally。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T13:25:23.853

尝试这个：

```
try {
    // your code throwing exceptions
} catch (Exception e) { // This catch any generic Exception
    // do whatever you want to do with generic exception
    ...
    if (e instanceof SomeException) {
        ...
    } else if (e instanceof OtherException) {
        ...
    }
} 
```

使用 java 7 你甚至可以这样做：

```
try {
    // your code throwing exceptions
} catch (SomeException|OtherException e) { // This catch both SomeException and OtherException
    // do whatever you want to do with generic exception
    ...
    if (e instanceof SomeException) {
        ...
    } else if (e instanceof OtherException) {
        ...
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T13:21:50.950

您需要将其分配给块`variable`外部并在`try-catch`块上使用它`finally`。

```
Exception caughtException = null;

try {
    /* etc. 1 */
} catch (SomeException e) {
    caughtException= e;
} catch (SomeOtherException e) {
    caughtException= e;
} finally {
    if (caughtException != null) {
        /* 
         * do something which depends on whether any exception was caught,
         * but should only happen if any exception was caught.
         */
    }
} 
```

看起来你想做一些审计。为什么不使用一些注释`AOP`来处理行为，当然还有一个很好的异常处理来捕获之前或之后的那些异常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T13:25:05.643

将变量保留在 catch 块范围之外，并在 catch 块中分配它。

购买 我强烈建议您不要这样做。

finally 块应该用于资源清理或任何需要运行的类似功能，无论异常如何。

所有的异常处理都应该在 catch 块中完成，而不是 finally 块。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-20T16:04:58.003

我在这里建议您将异常处理的详细信息提取到新方法中，并从必要的特定捕获块中调用这些方法以避免`instanceof`检查。这样做的好处是不使用`instanceof`，将异常处理代码保存在`catch`块中而不是 in 中`finally`，并且清楚地将共享异常处理代码与特定异常处理代码分开。是的，这三个块之间有一些共享代码`catch`，但这是一个清晰的代码行，这对我来说似乎可以接受。

```
try {
    // do work that uses resources and can generate any of several exceptions
} catch (SomeException1 e) {
    standardExceptionHandler(e);
    specificExceptionHandler1(e);
} catch (SomeException2 e) {
    standardExceptionHandler(e);
    specificExceptionHandler2(e);
} catch (Exception e) {
    standardExceptionHandler(e);
} finally {
    // this would include only code that is needed to cleanup resources, which is
    // what finally is supposed to do.
} 
```

# iphone - iphone sdk中UIWebview中的分页符

> ID：15524724
> 
> 赞同：0
> 
> 时间：2013-03-20T13:19:23.493
> 
> 标签：iphone

我正在使用 iOs sdk 中的 UIWebView 创建富文本编辑器。我正在使用 java 脚本和 HTML 代码来实现所有功能并使用 webview 作为可编辑内容。现在我的问题是我想使用 java-script/Html 在 UIWebView 中插入分页符，但是分页符选项在 UIWebView 中不起作用。如何在 UIWebview 中插入分页符选项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-10T07:07:09.050

在用 JS 进行了太多搜索后，我已经做到了这一点

```
 function makePageBreak(){
                insertHtmlAtCursor('<div id="MyInsertPageBreak" class="pagebreak" ></div>');
            }

 function insertHtmlAtCursor(html) {
                var range, node;
                if (window.getSelection && window.getSelection().getRangeAt) {
                    range = window.getSelection().getRangeAt(0);
                    node = range.createContextualFragment(html);
                    range.insertNode(node);
                } else if (document.selection && document.selection.createRange) {
                    document.selection.createRange().pasteHTML(html);
                }
            } 
```

这对我有用。希望能帮到你。

# jquery - 更新 jQuery 后，使用 highstock 图表缩放停止工作，

> ID：15524728
> 
> 赞同：0
> 
> 时间：2013-03-20T13:19:32.413
> 
> 标签：jquery, highcharts, zooming, highstock

我正在使用带有 jQ​​uery 1.5.1 的 highstock 图表版本 v1.2.5 和 highchart v2.3.5。我必须使用 jQuery 1.7.2 的下一个版本。大多数情况下，一切都正常工作，而不是缩放。它停止工作。它按 X 轴缩放。

```
zoomType: 'x', 
```

接下来是堆栈跟踪：

*   匿名函数 [highstock.js] 第 572 行脚本
*   匿名函数 [highcharts.js] 第 58 行脚本
*   缩放 [highstock.js] 第 572 行脚本
*   匿名函数 [highstock.js] 第 480 行脚本
*   fireEvent [highcharts.js] 第 62 行脚本
*   一个 [highstock.js] 第 480 行脚本
*   dispatch [jquery-1.7.2.min.js] 第 3 行脚本
*   i [jquery-1.7.2.min.js] 第 3 行脚本

它在下一个代码中崩溃：`if (b.tracker[e.isXAxis ? "zoomX" : "zoomY"])`tracker is undefined。

有没有人遇到这个问题并知道任何解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T15:09:51.550

这种行为有几个原因：

*   Highcharts 包含在 Highstock 中。所以我只需要加载 highstock.js 文件。
*   我已经实现了复杂的行为，其中一个图的缩放会重新创建其他图。看起来那里拖放调用了一些与页面上所有图形相关的代码，并且在某些时候它调用了未初始化的图形。我添加了一些额外的检查以避免调用没有初始化的图形。

这两个步骤解决了我的问题。

# php - 旧 PHP 版本中的类命名空间

> ID：15524729
> 
> 赞同：0
> 
> 时间：2013-03-20T13:19:33.087
> 
> 标签：php, namespaces

我真的很想在我的工作流程中采用命名空间。据我了解，PHP 5.3.0+ 支持这一点。有没有办法为旧版本的 PHP 复制 PHP 命名空间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T13:22:57.550

不，没有，没有前向兼容性之类的东西。

升级到更新版本的 PHP 是您唯一明智的解决方案。

# python - 如何使一个类中的函数实现另一个类？

> ID：15524730
> 
> 赞同：0
> 
> 时间：2013-03-20T13:19:33.330
> 
> 标签：python, class, function, add-in, arcgis

我正在使用如下代码创建一个 GUI：

```
 class MyClass2(QtGui.QMainWindow):

        def __init__(self, win_parent = None):

        def on_blahblah_clicked(x):

    if __name__ == "__main__":
         # Someone is launching this directly
         # Create the QApplication
          app = QtGui.QApplication(sys.argv)
         #The Main window
         main_window = HyperlinkWindow()
         main_window.show()
# Enter the main loop
app.exec_() 
```

我有一个像这样的加载项按钮的代码：

```
 class MyClass(object):
        """Impementation of Some_addin.button (Button)"""
        def __init__(self):
            #Code here
        def onClick(self):
            # Code
            pass 
```

我想创建一个加载项按钮，单击该按钮会显示上面创建的 GUI。所以我希望能够在函数 onClick 中调用 GUI 代码的类 MyClass2。就像我在下面的代码中使用 a in y 一样：

```
 class x:
        a = 1 + 1
    class y:
        print x.a 
```

# c# - EF 更新未更新 GridView

> ID：15524735
> 
> 赞同：2
> 
> 时间：2013-03-20T13:19:38.693
> 
> 标签：c#, wpf, entity-framework, gridview, mvvm

我仍处于 WPF、EF 和 MVVM 的学习阶段，现在我遇到了以下问题。我可以在我的 DataGridView 中删除和插入新项目，但我不知道如何更新我的项目。

我所做的就是选择一个已经有主键的空行，然后将数据放入其中。它正在工作（更新数据库），但 GridView 没有刷新。我需要先重新启动程序才能看到我更新的数据。

我的执行命令来更新我的数据库。我在 ViewModel 类

```
 public void ExecuteUpdate(object obj)
        {
            try
            {

                SelectedIndex.Child_Update(new Farbe { FarbauswahlNr = SelectedIndex.FarbauswahlNr, Kurztext = SelectedIndex.Kurztext, Ressource = SelectedIndex.Ressource, Vari1 = SelectedIndex.Vari1, Vari2 = SelectedIndex.Vari2 });
                //ListeAktualisieren --> Refreshing the List
                ListeAktualisieren();                     
            }
            catch (Exception e)
            {
                MessageBox.Show(e.ToString());   
            }
        } 
```

这是我应该刷新 GridView 的刷新方法。我在 ViewModel 类

```
 public void ListeAktualisieren()
        {

            farbliste.ListeAktualisieren(db);
            farbliste.Model = farbliste.Model.Concat(farbliste.Addlist).ToList();
            Model = farbliste.Model;
            farbliste.Addlist.Clear();
        } 
```

该方法正在调用我的业务列表，该列表也有一个刷新方法。在这里从我的数据库中读取。我在 Business List 课程中

```
 public void ListeAktualisieren(TestDBEntities db)
    {
        Model.Clear();
        foreach (var item in db.Farben)
        {
            //Insert and delete working
            add = new Farbe { FarbauswahlNr = item.FarbauswahlNr, Kurztext = item.Kurztext, Ressource = item.Ressource, Vari1 = Convert.ToBoolean(item.Var1), Vari2 = item.Vari2 };
            Addlist.Add(add);              
        }           

    } 
```

模型是我的 GridView 的源，它在更新时不刷新更改的数据，但在插入或删除时显示新的数据行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T13:40:13.417

您需要具有已实施 INotifyPropertyChanged 的​​ Observablecollections 和 Classes。通过 insert 将新元素添加到 Observablecollection 并引发 event 属性changed by a change。其余的应该由 WPF 完成。

编辑：DataGrid 的 Sourcecollection 必须是 Observablecollection。

* * *

Edit2：为了很好，我把评论的结果放在这里 ;-) DataGrid 的每一行都是集合的一个元素。一行的每个单元格都侦听其元素的 PropertyChangedEvent（字符串区分大小写，所以要小心）。如果在 propertychangedevent 之后没有调用属性的 getter，则绑定没有收到该事件。这段代码可以帮助确保您不会使用不存在的字符串进行调用：

```
private void VerifyPropertyName(string PropertyName)
{
    if (string.IsNullOrEmpty(PropertyName))
        return;
    if (TypeDescriptor.GetProperties(this)(PropertyName) == null) {
        string msg = "Ungültiger PropertyName: " + PropertyName;
        if (this.ThrowOnInvalidPropertyName) {
            throw new isgException(msg);
        } else {
            Debug.Fail(msg);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T08:13:00.153

尝试将此添加到您的绑定部分 ItemsSource="{Binding Path=Model, UpdateSourceTrigger= PropertyChanged"}

# ruby-on-rails - 如何使用另一个项目集合更新项目集合？

> ID：15524736
> 
> 赞同：1
> 
> 时间：2013-03-20T13:19:39.313
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个`Question`&`Tag`模型。我想用另一个集合中的一组标签来更新现有问题的标签。

这是我`Question`模型上的方法：

```
 def self.update_tags(tag_list)
    tags.each do |t|

    end
  end 
```

我知道我可以在每个循环中执行每个循环，但这似乎不是最好的方法（甚至不是最 DRY/Ruby-esque）。

基本上我想要做的是更新一个问题上的标签，如果它们不存在的话。所以，理论上，我想检查每个对象，`tag_list`看看它是否存在于`question.tags`. 如果没有，那么我想推动它。如果是，则忽略它并转到下一个。

最有效的方法是什么？

**编辑 1**

`Question`我在和`Tag`模型之间有一个HABTM关联。

**编辑 2**

我知道这是一个经典的 N+1 查询问题，因此我试图找出以最有效的方式完成此任务的最佳方法。

**编辑 3**

这是对正在发生的事情和我试图达到的结果的解释 - 以一种有效的方式。

`tag_list`正在建造这样的：

```
tags.each do |tag|
    tag_list << Tag.where(:name => tag.name).first_or_create(:num_questions => tag.count)
end 
```

`tags`是从先前调用外部 API 返回的对象集合。

我需要检查所有现有`question.tags`的当前问题，并根据 .AR 对象的 id 检查它`tag_list`。

说一个以前的问题`tag_ids`......`[5, 7, 8, 10]`我想要发生的是现在`tag_list = [5, 6, 7, 8, 9]`，我想更新`question.tag_ids = [5, 6, 7, 8, 9]`。

所以，这将删除`tag_id=10`，并添加`tag_id=[6, 9]`.

这就是我想要做的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T18:02:09.727

Rails 为此提供了一个名为[replace](https://github.com/rails/rails/blob/master/activerecord/lib/active_record/associations/collection_association.rb#L320) ..

```
blog.tags.replace(tag_list) 
```

**旧答案**

我会保持逻辑简单。在内部，rails 将关联记录保存在[一个事务](https://github.com/rails/rails/blob/master/activerecord/lib/active_record/associations/collection_association.rb#L125)中。这和手卷多插入语句的性能应该是可比的。此外，使用 rails 层可以让您避免处理新的和保存的父对象的复杂性。

```
def self.update_tags(tag_list)
  # Add new tags 
  current_tags = self.tags.dup
  new_tags = tag_list - current_tags
  tags.concat(new_tags) if new_tags.present?

  # Remove defunct tags 
  old_tags = current_tags - tag_list
  tags.delete(old_tags) if old_tags.present?      
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T13:30:29.170

可能你需要`accepts_nested_attributes_for`（[文档](http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T15:54:37.617

（**注意：**我进行了多次更新，您可能对**UPDATE 2**或**UPDATE 3**中提供的代码最感兴趣。）

我想你可以在你的问题模型中放置以下内容：

```
def diff_tags(other_q)
  other_q.tags - tags
end
def add_tags(other_q)
  tags << diff_tags(other_q)
end 
```

然后执行以下操作：

```
q1 = Question.find(1)
q2 = Question.find(2)
q1.add_tags(q2) 
```

导致（在我的情况下为 Postgres）：

```
SELECT "tags".* FROM "tags" INNER JOIN "questions_tags" ON "tags"."id" = "questions_tags"."tag_id" WHERE "questions_tags"."question_id" = ?  [["question_id", 2]]
SELECT "tags".* FROM "tags" INNER JOIN "questions_tags" ON "tags"."id" = "questions_tags"."tag_id" WHERE "questions_tags"."question_id" = ?  [["question_id", 1]]
begin transaction
INSERT INTO "questions_tags" ("question_id", "tag_id") VALUES (1, <missing tag id 1>)
INSERT INTO "questions_tags" ("question_id", "tag_id") VALUES (1, <missing tag id 2>)
... and all other missing tags ...
commit transaction 
```

您可以进一步处理以下查询：

1) 在前 2 个查询中仅选择标签 ID，而不是实例化整个标签对象

2）在单个 SQL 语句中插入多个值`INSERT INTO "questions_tags" ("question_id", "tag_id") VALUES ( <question_id>, <id1> ), ( <question_id>, <id2> )`，但您可能需要为此使用原始 sql。

**更新**：这是优化版本：

```
def diff_tags_ids(other_q)
  (other_q.tags.select(:id) - tags.select(:id)).map(&:id)
end
def add_tags_ids(tag_ids)
  query_head = 'INSERT INTO "questions_tags" ("question_id", "tag_id") VALUES '
  query_values = []
  tag_ids.each do |tag_id|
    query_values << "(#{self.id},#{tag_id})"
  end
  query = query_head + query_values.join(", ")
  ActiveRecord::Base.connection.execute(query)
end
def add_tags_from(other_q)
  add_tags_ids( diff_tags_ids(other_q) )
end 
```

现在以下

```
q1 = Question.find(1)
q2 = Question.find(2)
q1.add_tags_from(q2) 
```

仅导致 3 个查询：

```
SELECT id FROM "tags" INNER JOIN "questions_tags" ON "tags"."id" = "questions_tags"."tag_id" WHERE "questions_tags"."question_id" = ?  [["question_id", 3]]
SELECT id FROM "tags" INNER JOIN "questions_tags" ON "tags"."id" = "questions_tags"."tag_id" WHERE "questions_tags"."question_id" = ?  [["question_id", 1]]
INSERT INTO "questions_tags" ("question_id", "tag_id") VALUES (1,5), (1,6) # or whatever values are missing in question 1 compared to question 2 
```

**更新 2**：刚刚意识到您不需要从第二个问题中读取标签，您已经将它们放在 tag_list 中。好吧，那就更简单了：

```
def diff_tags_ids(tag_list)
  (tag_list - tags.select(:id)).map(&:id)
end
def add_tags_ids(tag_ids)
  query_head = 'INSERT INTO "questions_tags" ("question_id", "tag_id") VALUES '
  query_values = []
  tag_ids.each do |tag_id|
    query_values << "(#{self.id},#{tag_id})"
  end
  query = query_head + query_values.join(", ")
  ActiveRecord::Base.connection.execute(query)
end
def update_tags(tag_list)
  add_tags_ids( diff_tags_ids(tag_list) )
end 
```

这个我没有在实际的应用程序上尝试过，如果有一些小错别字，请见谅。

**更新 3：**如果您的 tag_list 中有标签*名称*，而不是标签*对象*`name`，那么这里是更新（假设您的标签模型中有属性：

```
def diff_tags_names(tag_list)
  tag_list - tags.select(:name).map(&:name)
end
def find_tags_ids_by_names(tag_list)
  Tag.where( :name => tag_list ).select(:id).map(&:id)
  # That leads to SELECT "tags"."id" FROM "tags" WHERE "tags"."name" IN ('tag1', 'tag2', ...)
end
def add_tags_ids(tag_ids)
  query_head = 'INSERT INTO "questions_tags" ("question_id", "tag_id") VALUES '
  query_values = []
  tag_ids.each do |tag_id|
    query_values << "(#{self.id},#{tag_id})"
  end
  query = query_head + query_values.join(", ")
  ActiveRecord::Base.connection.execute(query)
end
def update_tags(tag_list)
  tags_ids_to_add = find_tags_ids_by_names( diff_tags_names(tag_list) )
  add_tags_ids( tags_ids_to_add )
end 
```

仍然只有两个查询...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T16:13:32.357

您可以使用以下命令检查问题中是否存在标签：

```
@question.tags.where(:id => tag_id).present? #check if the tag_id is inside the question. 
```

但看看你的需要是：

```
def tag_names
  # Get all related Tags as comma-separated list
  tag_list = []
  tags.each do |tag|
    tag_list << tag.name
  end
  tag_list.join(', ')
end

def tag_names=(names)
  # Delete tag-relations
  self.tags.delete_all

  # Split comma-separated list
  names = names.split(', ')

  # Run through each tag
  names.each do |name|
    tag = Tag.find_by_name(name)

    if tag
      # If the tag already exists, create only join-model
      self.tags << tag
    else
      # New tag, save it and create join-model
      tag = self.tags.new(:name => name)
      if tag.save
        self.tags << tag
      end
    end
  end
end 
```

从这里获取代码：[Rails HABTM fields_for – 检查同名记录是否已经存在](https://stackoverflow.com/questions/4172551/rails-habtm-fields-for-check-if-record-with-same-name-already-exists)

# iphone - 新手 TableView 挑战

> ID：15524740
> 
> 赞同：-2
> 
> 时间：2013-03-20T13:19:44.570
> 
> 标签：iphone, ios, objective-c, xcode, ipad

我正在构建一个需要 tableview 控件的应用程序，以便用户可以选择多行并以某种方式对其进行操作。我发现加载我的数据并使用 UITableViewController 显示它很容易，但是当我这样做时，我似乎无法在页面上放置任何其他控件，例如为用户提供一些操作以在所选内容上执行的工具栏行。我可以在情节提要的表单上放置一个工具栏控件，但它不会在模拟器中呈现。

使用 UIViewController 并在其上放置 TableView 似乎会带来一系列令人困惑的挑战（一旦我征服了它们，这将完全有意义）。

对于使用工具栏控件获取表格视图的平稳方式有什么建议吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T13:37:26.613

不要使用 TableViewController。使用一个标准的 ViewController，然后添加一个 UITableView 到它，并调整大小。这样，您将能够在该视图上做任何您想做的事情，而不会将自己限制为仅 tableView 的功能。

执行此操作时，请确保将数据源和委托添加到连接的表。然后添加 cellForRowAtIndex、节数、行数以及表所需的任何其他委托方法。

祝你好运

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-20T13:53:29.640

*对于使用工具栏控件获取表格视图的平稳方式有什么建议吗？*

是的，有几种方法可以做到这一点，一种方法是将页脚视图添加到您的 tableviewcontroller 检查这些

[http://developer.apple.com/](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewHeaderFooterView_class/Reference/Reference.html)

[tableFooterView 上的 UIButtons 没有响应事件](https://stackoverflow.com/questions/1122272/uibuttons-on-tablefooterview-not-responding-to-events)

添加它的更简单方法是使用情节提要。

只需将视图拖放到 tableviewcontroller 中，然后您可以调整视图大小并将对象菜单中的任何内容放入视图内部。

![在此处输入图像描述](../Images/d249c35aef42387d6bede3ae27400806.png)

![在此处输入图像描述](../Images/14be298f2b5b9e5e2ffcad5996e434fa.png)

![在此处输入图像描述](../Images/9e63c034923046a9ecebaf7ed521a802.png)

现在的问题是视图在页面底部的位置不会像`tabbar`. 假设您的 1 行中只有 1 行`tableview`，页脚视图将在该 1 行下方上升，假设您的`tableview`工具栏中有数百个项目将位于行的底部。

您的问题的其他解决方案是创建一个自定义视图并将其添加到当前视图或窗口（这有点提前），但如果您想要这个，只需谷歌它。

或者就像你说的，创建一个viewcontroller并在里面放一个uitableview。不要忘记添加`<UITableViewDelegate,UITableViewDataSource>`到您的 .h 文件中，然后您可以调用 UItableview 委托方法。\

祝你好运。

# php - PHP Unicode 字符检测

> ID：15524744
> 
> 赞同：0
> 
> 时间：2013-03-20T13:20:07.520
> 
> 标签：php, unicode

我正在尝试从某个网页获取内容，并将下一个标记 : ' 替换为另一个子字符串。这不是一个常规的撇号，甚至`substr_count($content,"’")`返回 0。似乎我无法检测到该标记，因此无法使用 substr_replace 替换他。

我该如何处理这个问题？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T13:27:55.363

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T13:23:03.003

如果您正在使用 unicode 字符。使用多字节字符串函数是明智的

[http://www.php.net/manual/en/function.mb-substr-count.php](http://www.php.net/manual/en/function.mb-substr-count.php)

# perl - 我想使用 perl 脚本将一个文件拆分为两个不同的文件

> ID：15524747
> 
> 赞同：0
> 
> 时间：2013-03-20T13:20:29.903
> 
> 标签：perl

我想将一个文件分成两个文件。如果文件名是，`example.txt`那么它将分为两个文件，如`EX1.txt`或`EX2.txt`。

拆分取决于每行中的第二个字段。示例：如果 HDR 行具有`TEA003890459`作为第二个字段，则输出将转到`EX1.txt` 但如果 HDR 具有，`TEA003886004`则输出将转到`EX2.txt`。我也想计算索赔数量。

我想使用以下逻辑来做到这一点：

```
if Header-Row then
    if Dummy cost center then
        write to Gas file
        keep in mind: Claim-Nummer (eg. Array or Hash)
    else
        write to normal file
    end if
else if Detail-Row then
    if kept Claim-Nummer then
        write to Gas file
    else
       write to normal file
    end if
end if 
```

该文件包含以下数据：

```
HDR^TEA003890459^082582^Mohd Jamil^Jamili Fahmi Bin^^458^+^92000^+^92000^+^0000^+^0000^+^0000^^0^^0^^0^^0^^0^^0^20130307^^^^^^^222^MY0BD^2^jamilifahmi.mohdjamil@se1.bp.com^      MY0BCC#6482362304                                 
DTL^TEA003890459^E^MY0BCC#6482362304              641301137^+^47000^MFA^20130209^Medical Expenses [Family]^^^0^^0^^0^^0^^0^^0^^0^^0^^C16Medical
DTL^TEA003890459^E^MY0BCC#6482362304              641301137^+^45000^MGE^20130304^Medical Expenses  (Employee clinica^^^0^^0^^0^^0^^0^^0^^0^^0^^C16Medical
HDR^TEA003886004^082770^Bin Omar^Mohamad Fadzlizam^^458^+^135800^+^135800^+^0000^+^0000^+^0000^^0^^0^^0^^0^^0^^0^20130307^^^^^^^222^MY0BD^4^mohamad.omar@se1.bp.com^      MY0BCC#6485163100                                 
DTL^TEA003886004^E^MY0BCC#6485163100              641301137^+^25000^MFA^20130221^Medical Expenses [Family]^^^0^^0^^0^^0^^0^^0^^0^^0^^C16Claim
DTL^TEA003886004^E^MY0BCC#6485163100              641301137^+^37150^MFA^20130224^Medical Expenses [Family]^^^0^^0^^0^^0^^0^^0^^0^^0^^C16Claim
DTL^TEA003886004^E^MY0BCC#6485163100              641301137^+^23650^MFA^20130226^Medical Expenses [Family]^^^0^^0^^0^^0^^0^^0^^0^^0^^C16Claim
DTL^TEA003886004^E^MY0BCC#6485163100              641301137^+^50000^MGE^20130304^Medical Expenses  (Employee clinica^^^0^^0^^0^^0^^0^^0^^0^^0^^C16Claim
HDR^TEA003886162^082792^Lim^Jia Jieh^^458^+^280400^+^280400^+^0000^+^0000^+^0000^^0^^0^^0^^0^^0^^0^20130305^^^^^^^222^MY0BD^4^jia_jieh.lim@se1.bp.com^      MY0BCC#6482363474                                 
DTL^TEA003886162^E^MY0BCC#6482363474              641301137^+^110000^MGE^20130131^Medical Expenses  (Employee clinica^^^0^^0^^0^^0^^0^^0^^0^^0^^C16Medical claim 31/1,20/2,28/2
DTL^TEA003886162^E^MY0BCC#6482363474              641301137^+^60000^MGE^20130220^Medical Expenses  (Employee clinica^^^0^^0^^0^^0^^0^^0^^0^^0^^C16Medical claim 31/1,20/2,28/2
DTL^TEA003886162^E^MY0BCC#6482363474              641301137^+^50400^MGE^20130220^Medical Expenses  (Employee clinica^^^0^^0^^0^^0^^0^^0^^0^^0^^C16Medical claim 31/1,20/2,28/2
DTL^TEA003886162^E^MY0BCC#6482363474              641301137^+^60000^MGE^20130228^Medical Expenses  (Employee clinica^^^0^^0^^0^^0^^0^^0^^0^^0^^C16Medical claim 31/1,20/2,28/2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T13:47:31.273

就像是：

```
#!/usr/bin/perl

foreach (<>) {
        my @out = split(/\^/,$_);
        if ($out[0] eq 'HDR') {
                close OUTFILE;
                open OUTFILE,">>$out[1].txt" or die();
        } elsif ($out[0] eq 'DTL') {
                print OUTFILE $_;
        }
} 
```

运行：

```
./split.pl < infile.txt 
```

将拆分为每种标头类型的文件。您可以使用 Linux wc 命令对每个条目进行计数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T13:46:21.437

您的解释和伪代码以及示例数据似乎讲述了一个不同的故事

但是要读取第二个字段，一旦打开文件并按照描述进行排序

```
open(my $ex1,">EX1.txt")||die"EX1.txt $!";
open(my $ex2,">EX2.txt")||die"EX2.txt $!";
$wanted="TEA003890459";
while($line = <$ifile>) {

   @field=split('\^',$line);
   if ($field[1] eq $wanted) {    # fields start from 0 so 1 is the second field
     print $ex1 $line;
   else {
     print $ex2 $line;
   }
} 
```

编辑：修复拆分参数

# python - python'设置差异如何在内部工作？

> ID：15524753
> 
> 赞同：4
> 
> 时间：2013-03-20T13:20:51.523
> 
> 标签：python, set

最近，我正在查看一些 python 模块以了解它们的行为以及它们的实现是如何优化的。任何人都可以告诉python使用什么算法来执行集合差异操作。实现集合差异的一种可能方法是使用哈希表，这将涉及额外的 N 个空间。我试图找到集合操作的源代码，但我无法找到代码位置。请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T13:24:01.070

python 中的集合本身就是一个哈希。所以实现差异并不像你想象的那么难。从更高的层次来看，如何实现设置差异？迭代其中一个集合并将其他序列中不存在的所有元素添加到结果中。

# java - 滚动出容器的第二行 gridbaglayout

> ID：15524754
> 
> 赞同：0
> 
> 时间：2013-03-20T13:20:51.903
> 
> 标签：java, swing, jpanel, jscrollpane, gridbaglayout

我正在尝试实现类似于轮播的布局。它需要在第二行使用复选框字段水平添加图像。我在 jscrollpane 中有一个面板，单个图像作为标签添加到面板中。请看屏幕截图。

[截屏](http://postimage.org/image/tox2gvk1z/)
![在此处输入图像描述](../Images/5c37a5cb55a85b9692bac16bc4590c55.png)

当我滚动窗格时，包含图像的第一行很好地保留在面板内..但是如果您注意到第二行复选框，它会滚动出面板。这是代码...

```
JLabel lab1=new JLabel();
for (int ii=0; ii<imageFiles.length; ii++) {
       GridBagConstraints constraint = new GridBagConstraints();  
        lab1 = new BufferedImage(w,h,BufferedImage.TYPE_INT_RGB);

        constraint.gridx = ii;
        constraint.gridy =0;  
        jPanel9.add(lab1,constraint);
    }
    for (int ii=0; ii<imageFiles.length; ii++) {
        GridBagConstraints constraint1 = new GridBagConstraints();         
        constraint1.anchor = GridBagConstraints.SOUTH;           
        chkbox = new Checkbox("asdasdada");
        constraint1.gridx = ii;
        constraint1.gridy =1;

        jPanel9.add(chkbox, constraint1);
      } 
```

不知道出了什么问题..任何帮助都非常感谢..谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:14:03.180

问题是您将 AWT 组件（重量级）与 Swing 组件（轻量级）混合在一起。我有 2 条建议：

*   不要混用重量级和轻量级的组件
*   尽量使用轻量级组件

因此，在您的代码中，替换`Checkbox`为`JCheckbox`它应该可以正常工作。

# sql - 使用 sys.master_files 选择 LDF 文件

> ID：15524758
> 
> 赞同：0
> 
> 时间：2013-03-20T13:21:01.540
> 
> 标签：sql, mdf, ldf

这可能很简单，但找不到从 sys.master_files 中选择 LDF 文件的示例。我已经使用了 MDF 文件

```
 cmd.CommandText = ("select physical_name from sys.master_files where database_id = DB_ID('" + "mydatabasename" + "')"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T13:27:10.830

您使用的查询实际上应该返回数据库的所有数据 (MDF) 和日志 (LDF) 文件。

但是，要仅返回日志文件，您只需在“类型”列上添加一个额外的条件。日志文件的类型为 1，因此：

```
cmd.CommandText = ("select physical_name from sys.master_files where type = 1 and database_id = DB_ID('" + "mydatabasename" + "')"); 
```

# html - 寻找一种使用终端命令修剪 HTML 代码的方法

> ID：15524760
> 
> 赞同：0
> 
> 时间：2013-03-20T13:21:02.927
> 
> 标签：html, string, parsing, sed, awk

我正在努力学习`awk`并`sed`做得更好，以便能够在不需要 PHP、Perl 等东西的情况下创建交叉兼容的终端工具。我现在正在尝试清理一个很长的字符串，它基本上是我使用 .html 获取的 HTML 文档的一部分`curl`。我想知道解决这个问题的最佳方法。

我发现的大多数解决方案都依赖于静态文件或结构等奢侈品，但是当我试图清理获取的 HTML 代码时，我希望能够假设字符串的“外围”可以改变很多，无论是在尺寸和结构。所以我认为我需要做的基本上是识别 HTML 标签，因为这些标签可能不会改变，并从这些 HTML 标签中提取数据，无论它们在哪里。一个例子可能是这样的：

`<span class="unique-class">Payload</span>`

我需要能够查找整个 HTML 标记，当找到它时，我需要基本上提取 , 之后的所有内容`>`，直到`<`找到 a 并开始另一个标记。

由于我的原始代码基本上是无用的，因为它只是`grep`匹配某些单词（可能出现在同一页面上非有趣实例中的单词）的行，所以我真的愿意接受任何事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T13:53:23.983

您很可能需要使用 Regex 来查找所需的字符串段，`sed`并将`awk`Regex 作为一个选项，尽管可能需要切换才能这样做。我建议将标签作为整体查找，否则您可能最终会在结束标签和开始标签 ( ) 之间获得代码`</span>stuff here<p>`，而这可能是您不想要的。

因此，您的正则表达式最基本的可能看起来像这样（未经测试，您可能需要对其进行调整）：

```
/\<[a-zA-z]\>/ /* Find the opening tag. */ 
/\<[/a-zA-z]\>/ /* Find the closing tag, note the presence of the "/" inside the square brackets.
*/ 
```

根据您的需要，您可以创建要查找的标签列表，特别是为您提供以下内容：

```
tags="div|p|article|section" /* Your list of tags, pipe-delimited for OR logic */
/\<$tags[:print:]\>/ /* The regex, looking for something like <div[anything]> */ 
```

您可以通过正则表达式为开始标签更进一步，将基本标签存储在变量中，然后找到匹配的结束标签。这可能需要更多的工作才能正常工作，但它确实具有更健壮的优点，并且自然地避免了在错误的结束标记处停止的陷阱（即 - 在`</a>`应该停止的时候停止`</p>`）。

一些注意事项 - 这可能会因为一些单字符标签而变得有点麻烦。如果你写得不够聪明，你的程序可能会混淆和之类的东西`<a>`，`<article>`所以要确保你的代码足够健壮来解决这个问题。

另外，不要忘记`<input>`s 用于生成大多数不同的表单输入，因此如果您关心它们是什么，请确保在`type`遇到`<input>`.

最后，你不一定要假设一个标签会有一个结束标签。有些标签没有一个（`<br/>`/ `<br>`，`<hr/>`/ `<hr>`），HTML规范并不总是需要它们（`<li>`并且`<p>`不需要结束标签，只要下一个开始标签是另一个`<li>`or `<p>`，或者后跟父母的结束标签） . 你也不能假设你得到的 HTML 是有效的。因此，请务必考虑这些情况，以免您的应用程序崩溃和烧毁。

# awk - 使用 grep 和 awk 搜索并将输出打印到新文件

> ID：15524762
> 
> 赞同：0
> 
> 时间：2013-03-20T13:21:05.967
> 
> 标签：awk, grep

我有 100 个文件，想在每个文件的第一列中搜索一个特定的单词，并将该单词中所有列的内容打印到一个新文件中我尝试了这段代码，但效果不佳，它只打印一个文件的内容不是全部：

```
ls -t *.txt > Filelist.tmp
cat Filelist.tmp | while read line do; grep "searchword" | awk '{print $0}' > outputfile.txt; done 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T13:24:20.837

这就是你想要的：

```
$ awk '$1~/searchword/' *.txt >> output 
```

这会将第一个字段与第一个字段进行比较，如果匹配则将其`searchword`附加到该行。`output`默认的字段分隔符`awk`是空格。

您尝试的主要问题是您每次都在覆盖`>`文件，您想使用 append `>>`。

# php - php/mysql - 使用联合，如何根据选定的表设置变量？

> ID：15524764
> 
> 赞同：0
> 
> 时间：2013-03-20T13:21:08.747
> 
> 标签：php, mysql

使用下面的代码，我显示状态和评论，它按需要工作，虽然我不完全理解我自己的代码..

我想实现以下目标：如果结果来自状态，$link_type = status，如果结果来自评论，$link_type = 评论

这是我的尝试（$link_type 现在总是“状态”）

```
 $results = db_query("
    SELECT sid as ssid, created as screated, message as smessage, recipient as srecipient 
    FROM {statuses}
    WHERE created > :logout_stamp
    UNION
    SELECT sid as ssid, created as screated, comment as smessage, uid as srecipient 
    FROM {fbss_comments} fbss
    WHERE fbss.created > :logout_stamp
    ORDER BY screated DESC LIMIT 15", 
    array(':logout_stamp' => $logout_stamp))->fetchAll();

  // foreach the results
  foreach ($results as $result) {
      $user_status = user_load($result->srecipient);
      $user_comment = user_load($result->commentuid);
      $username_status = $user_status->name;
      $username_comment = $user_comment->name;
      $date_status = $result->screated;
      $date_comment = $result->commentcreated;

      if ($result->ccreated != NULL) {
        $link_type = "comment";
      }
      else {
        $link_type = "status";
      }

print '<a href="statuses/' . ($result->ssid) . '" class="notification_wrapper">' . '<b>' . $username_status . '</b>' . ' - ' . ($link_type) . ' - ' . strip_tags(substr($result->smessage,0,30)) . ' - ' . elapsed_time($date_status) . '</a>'; 
```

非常感谢您的建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T13:23:09.023

使用**st**因为它返回 1 表示状态，2 表示评论。

```
 SELECT 1 as st,sid as ssid, created as screated, message as smessage, recipient as srecipient 
    FROM {statuses}
    WHERE created > :logout_stamp
    UNION
    SELECT 2 as st sid as ssid, created as screated, comment as smessage, uid as srecipient 
    FROM {fbss_comments} fbss
    WHERE fbss.created > :logout_stamp
    ORDER BY screated DESC LIMIT 15 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T13:25:27.647

将此值添加为额外字段：

```
 SELECT sid as ssid, created as screated, message as smessage, recipient as srecipient, "status" as link_type 
FROM {statuses}
WHERE created > :logout_stamp
UNION
SELECT sid as ssid, created as screated, comment as smessage, uid as srecipient,"comment" as link_type 
FROM {fbss_comments} fbss
WHERE fbss.created > :logout_stamp
ORDER BY screated DESC LIMIT 15 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T13:31:17.787

您可以在查询中添加一个字段，如下所示：

```
$results = db_query("
    SELECT sid as ssid, created as screated, message as smessage, recipient as srecipient, 'status' as link_type
    FROM {statuses}
    WHERE created > :logout_stamp
    UNION
    SELECT sid as ssid, created as screated, comment as smessage, uid as srecipient, 'comment' as link_type
    FROM {fbss_comments} fbss
    WHERE fbss.created > :logout_stamp
    ORDER BY screated DESC LIMIT 15", 
    array(':logout_stamp' => $logout_stamp))->fetchAll(); 
```

现在在 if 条件中使用新字段：

```
$link_type = ($result->link_type == 'comment') ? "comment" : "status"; 
```

# asp.net - 从 SQL Server 到 ListBox 选择的逗号分隔字符串值

> ID：15524768
> 
> 赞同：0
> 
> 时间：2013-03-20T13:21:18.750
> 
> 标签：asp.net, sql-server, listbox, controls, delimited

我已经搜索了互联网，但我找不到以下问题的解决方案。

我有一个 ListBox 控件，该控件填充了 FormLoad 上 SQL Server 数据库表中的值列表。

这允许用户选择多个值，并且这些值可以作为逗号分隔值提交到 SQL Server 数据库列中。

问题是我希望用户允许从同一个 ListBox 控件编辑这些提交的值。

因此，我想向用户展示从数据库中提取的值作为 ListBox 中的选定值，而不是用这些值填充 ListBox，因为 ListBox 已经在 FormLoad 上填充了设置值。

我正在尝试这个，但它不起作用 -

```
foreach (ListItem li in lst_subspeciality.Items)
{
    foreach (string sqlitem in dt.Rows[0]["SubSpeciality"].ToString().Split(','))
    {
        if (li.Text == sqlitem.ToString())
        {
           li.Selected = true;
        }
    }
} 
```

任何帮助深表感谢。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T13:26:12.633

我没有测试这个但是

```
List<string> myValues = dt.Rows[0]["SubSpeciality"].ToString().Split(',').ToList();

foreach (ListItem li in lst_subspeciality.Items)
{
        if (myValues.Contains(li.Text))
            li.Selected = true;
} 
```

# tortoisesvn - tortoise svn commit 不会显示我的一些文件

> ID：15524769
> 
> 赞同：0
> 
> 时间：2013-03-20T13:21:23.370
> 
> 标签：tortoisesvn

我已经将几个 bat 和 xml 文件从一个分支合并到另一个分支。合并后，我可以看到我的所有文件都正确合并（这些文件已经在我要合并的分支中）。

但是，当我尝试提交时，在“所做的更改”部分下，我只看到了四个文件。有两个失踪了。丢失的文件具有 xml 扩展名。我害怕提交，因为我没有在列表中看到我的所有文件。

有没有人遇到过这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T21:06:06.217

尝试`Check Out`在另一个目录中的存储库，在此提交的先前版本中。验证您的文件是否存在。

如果没有，恐怕您的文件从未进行过版本控制。否则，请在提交之前验证文件是否具有旧内容。

# c# - C# Asp.NET Internal Web App：从不同的本地服务器复制文件

> ID：15524771
> 
> 赞同：0
> 
> 时间：2013-03-20T13:21:26.627
> 
> 标签：c#, asp.net, file-upload

我的内部网络应用程序在服务器上 //tom... 但我需要从服务器上传文件 //jerry..

虽然 fileupload.saveas 非常适合将文件本地带到 //tom 上，但当我尝试将其发送回 //jerry 时，它告诉我访问被拒绝。我试图授予 //jerry/users 做所有事情的权限，但仍然没有。

//tom 上的 Web 应用程序的用户/组是什么？

在我后面的代码中，我什至尝试了 FIle.Copy (..)。file.move 等.. 但它告诉我//jerry 拒绝访问该特定文件...

我能做些什么 ？

PS：当我在本地（localhost）运行网络应用程序时，一切正常，只有当我上线时才会出现问题......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T13:36:19.430

这听起来像是权限问题。当您在本地运行应用程序时，它很可能在您的帐户下运行，但在服务器上它通常默认为 NetworkService 帐户，该帐户可能不在网络域中。您可能需要创建一个域帐户来运行您的应用程序，或者在用户有权访问目录时模拟用户的域帐户。

# google-apps-script - 谷歌脚本根据两列标准删除重复行

> ID：15524772
> 
> 赞同：2
> 
> 时间：2013-03-20T13:21:30.470
> 
> 标签：google-apps-script, google-sheets, deduplication

我正在使用一个脚本，它从日历中提取事件详细信息并将它们添加到电子表格的 A 列和 B 列中，删除任何重复的事件，然后根据日期进行排序。我希望那时我可以让工作人员在 C、D 等列中添加有关这些事件的其他数据。

这似乎工作正常，但是一旦在 C、D 列中添加信息，脚本重复数据删除功能就会停止工作，因为它正在比较整行，而不仅仅是正在导入的内容。

在确定行是否重复并应删除时，是否有一种方法可以调整以下重复数据删除脚本以仅检查 A 列和 B 列？

我已尝试使用本文变体部分中的代码（当前已注释掉）调整：[https](https://developers.google.com/apps-script/articles/removing_duplicates) ://developers.google.com/apps-script/articles/removing_duplicates - 但它似乎仍然不起作用.

感谢您的任何帮助

剧本：

```
enter code here

//this section retrieves the information from a calendar from a user submitted date until the end of the year

function importEvents(){
  var calID = Browser.inputBox("Please enter your google Cal ID", Browser.Buttons.OK_CANCEL);
  var startdate = Browser.inputBox("Start date using 1/1/2013 format", Browser.Buttons.OK_CANCEL);
  var cal = CalendarApp.getCalendarById(calID);
  var events_sheet = SpreadsheetApp.getActiveSheet();
  var events = cal.getEvents(new Date(startdate), new Date("1/1/2014"));
  var lr = events_sheet.getLastRow();
  var eventarray = new Array();

  var i = 0; // edited
    for (i = 0; i < events.length; i++) {
      line = new Array();
      line.push(events[i].getStartTime());
      line.push(events[i].getTitle());

     //Potential more data that I am not getting at this time
     // line.push(events[i].getDescription());
     // line.push(events[i].getEndTime());

      eventarray.push(line);
    }

    events_sheet.getRange("A"+(lr+1)+":B"+(lr+i)).setValues(eventarray);

  //sort ascending dy date

  var range = SpreadsheetApp.getActiveSheet().getRange("A3:F2000"); 
  range.sort([{column: 1, ascending: true}]); 

  //removes duplicate rows

  var sheet = SpreadsheetApp.getActiveSheet();
  var data = sheet.getDataRange().getValues();
  var newData = new Array();
  for(i in data){
    var row = data[i];
    var duplicate = false;
    for(j in newData){

      if(row.join() == newData[j].join()){
  duplicate = true;

   //This was supposed to only check the first 2 columns, but it doesn't work
   //I found this code in the variation section of this tutorial: https://developers.google.com/apps-script/articles/removing_duplicates   
   //     
   //  if(row[0] == newData[j][0] && row[1] == newData[j][1]){
   // duplicate = true;

      }
    }
    if(!duplicate){
      newData.push(row);
    }
  }
  sheet.clearContents();
  sheet.getRange(1, 1, newData.length, newData[0].length).setValues(newData);

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T16:12:19.750

注释掉的块可以通过一些调整来工作。由于数据的性质以及本教程没有考虑对象比较的工作方式，因此出现了问题。（请参阅[JavaScript 日期对象比较](https://stackoverflow.com/questions/7606798/javascript-date-object-comparison)。）

您的第一列由`Date`对象组成，只有当比较的双方都是*相同的 object*`==`时，比较器才会评估这些对象。在整行比较中，日期被操作强制转换为字符串。我们可以逐个单元地获得相同的效果，如下所示：`true`*`.join()`*

 *```
 if(row[0].toString() == newData[j][0].toString() && row[1] == newData[j][1]){
   duplicate = true;
 } 
```

或者，我们可以通过使用操作将比较限制在前两列`Array.slice()`。这样，我们不需要知道正在比较什么类型，因为我们仍然会使用`.join()`形成一个字符串进行比较：

```
if(row.slice(0,2).join() == newData[j].slice(0,2).join()){
  duplicate = true;
} 
```

## 排序

您会遇到的另一个问题是`range.sort()`. 在删除重复项之前进行排序是很危险的，因为您无法保证新检索到的事件数据与您已经拥有的同一事件的数据的顺序，这些数据可能具有额外的信息列。因此，重复删除可能会删除您的用户输入信息。将排序留到最后一步会更安全，或者在排序中包含其他列以保证顺序。

另一个小问题：使用 的`.getRange("A3:F2000")`副作用是将电子表格扩展到 2000 行；您可以改为使用`.getRange("A3:F")`，它将检索最大范围而不扩展它。

但我建议您完全使用 javascript 数组进行排序，这比使用电子表格服务要快得多。我假设您有两行要保留在工作表顶部的标题信息，因为您是从`A3`. 这是一种进行排序的方法：

```
// sort ascending by date - retain header lines
var headers = newData.slice(0,2);
var sorted = newData.slice(2).sort(sortFunction);
var newData = headers.concat(sorted); 
```

在哪里`sortFunction()`：

```
function sortFunction( a, b ) {
  // coerce dates to numbers and return comparison
  return ((+a[0]) - (+b[0]))
} 
```

## 最终脚本

通过上述更改，您将得到以下结果。

```
function importEvents(){
  var calID = Browser.inputBox("Please enter your google Cal ID", Browser.Buttons.OK_CANCEL);
  var startdate = Browser.inputBox("Start date using 1/1/2013 format", Browser.Buttons.OK_CANCEL);
  var cal = CalendarApp.getCalendarById(calID);
  var events_sheet = SpreadsheetApp.getActiveSheet();
  var events = cal.getEvents(new Date(startdate), new Date("1/1/2014"));
  var lr = events_sheet.getLastRow();
  var eventarray = new Array();

  var i = 0; // edited
  for (i = 0; i < events.length; i++) {
    line = new Array();
    line.push(events[i].getStartTime());
    line.push(events[i].getTitle());

     //Potential more data that I am not getting at this time
     // line.push(events[i].getDescription());
     // line.push(events[i].getEndTime());

    eventarray.push(line);
  }

  // Append the retreived events to existing spreadsheet
  events_sheet.getRange("A"+(lr+1)+":B"+(lr+i)).setValues(eventarray);

  //remove duplicate rows
  var sheet = SpreadsheetApp.getActiveSheet();
  var data = sheet.getDataRange().getValues();
  var newData = new Array();
  for(i in data){
    var row = data[i];
    var duplicate = false;
    for(j in newData){

      if(row.slice(0,2).join() == newData[j].slice(0,2).join()){
        duplicate = true;
      }
    }
    if(!duplicate){
      newData.push(row);
    }
  }

  // sortFunction used to compare rows of data in our newData array
  function sortFunction( a, b ) {
    // coerce dates to numbers and return comparison
    return ((+a[0]) - (+b[0]))
  }

  // sort ascending by date - retain header lines
  var headers = newData.slice(0,2);
  var sorted = newData.slice(2).sort(sortFunction);
  var newData = headers.concat(sorted);

  // Clear the existing info and update with newData.
  sheet.clearContents();
  sheet.getRange(1, 1, newData.length, newData[0].length).setValues(newData);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T16:13:30.190

我建议您始终保持数组级别，包括排序过程。

您可以使用如下排序功能轻松选择要排序的单元格：

```
// This example sorts on first column of data array
  data.sort(function(x,y){
  var xp = x[0];
  var yp = y[0];
  //Logger.log(xp+'   '+yp);// just to check that it takes the right column
  return xp == yp ? 0 : xp < yp ? -1 : 1;// first sort  ascending
}); 
```

至于重复删除有几种方法可以做到这一点，一种可能是这样的：

```
var newData = new Array();
  for(var i in data){
    var duplicate = false;
    for(var j in newData){

      if(data[i][0].toString()+data[i].toString() == newData[j][0].toString()+newData[j][1].toString()){ duplicate = true }
    }
    if(!duplicate){ newData.push(data[i]) }
  } 
```*

# video - ffmpeg 将 mov 文件转换为 mp4 用于 HTML5 视频标签 IE9

> ID：15524776
> 
> 赞同：49
> 
> 时间：2013-03-20T13:21:38.750
> 
> 标签：video, ffmpeg, internet-explorer-9, html5-video, codec

我在这里和谷歌上到处找 - 没有适用于 IE9 的有效命令。IE9 缺少一些东西。我尝试过的所有方法在其他任何地方都有效：chrome、safari、移动设备等...我想要一个可以转换它的命令，我可以在每台设备上使用它，假设支持 HTML5 视频标签中的 mp4。

我使用这个命令：

```
ffmpeg -i movie.mov -vcodec copy -acodec copy out.mp4
ffmpeg -i movie.mov -vcodec libx264 -vprofile high -preset slow -b:v 500k -maxrate 500k -bufsize 1000k -vf scale=-1:480 -threads 0 -acodec libvo_aacenc -b:a 128k -pix_fmt yuv420p outa.mp4
ffmpeg -i movie.mov -b:V 1500k -vcodec libx264 -preset fast -g 30 adel.mp4
ffmpeg -i movie.mov -acodec aac -strict experimental -ac 2 -ab 160k -vcodec libx264 -preset slow -f mp4 -crf 22 lamlam.mp4
ffmpeg -i movie.mov -acodec aac -strict experimental -ac 2 -ab 160k -vcodec libx264 -preset slow -profile:v baseline -level 30 -maxrate 10000000 -bufsize 10000000 -f mp4 -threads 0 adiel.mp4 
```

等等..所有这些命令再次生成一个有效的 mp4 文件，该文件适用于 chrome、safari 等......甚至当我使用窗口媒体播放器在 windows 本身中启动它们时也可以工作。当我将此文件放在 IE9 中的视频标签中时（我使用的是[http://videojs.com/](http://videojs.com/)），它不起作用！

```
<div class="vidoco-content" style="margin-top: 20px;">
<video id="divVid" class="video-js vjs-default-skin vidoco-center" controls preload="none" width="600" height="400" poster="<?php echo(DOMAIN); ?>static/test.jpg">
    <source src="<?php echo(DOMAIN); ?>static/out.mp4" type="video/mp4" />
</video> 
```

如果我使用软件[miro 视频转换器](http://www.mirovideoconverter.com/)将相同的 mov 文件转换为 mp4 - 它转换得很好，我可以在 IE9 中播放它！miro 转换器也在其中使用嵌入的 ffmpeg，所以我确信它只是正确的 ffmpeg 命令和参数的一米。在我的 apache htaccess 中，我为我的文件设置了正确的 mime 类型，并且在查看 IE 开发人员工具时发现它确实是正确的：

```
AddType audio/aac .aac
AddType audio/mp4 .mp4 .m4a
AddType audio/mpeg .mp1 .mp2 .mp3 .mpg .mpeg
AddType audio/ogg .oga .ogg
AddType audio/wav .wav
AddType audio/webm .webm

AddType video/mp4 .mp4 .m4v
AddType video/ogg .ogv
AddType video/webm .webm 
```

我为此苦苦挣扎了很长时间，因此将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2013-03-29T00:13:39.470

**对于`ffmpeg`：**

```
ffmpeg -i {input}.mov -vcodec h264 -acodec aac -strict -2 {output}.mp4 
```

您还可以添加`-q:v`/`-q:a`参数来指定视频的质量。您也可以使用比 ffmpeg 更简单的编码器 HandBrake。

**对于`HandBrake`：**

```
handbrakecli -i {input}.mov -e x264 -E facc -o {output}.mp4 
```

# 编辑：我找到了解决方案！这是一个带有工作演示的 ZIP，我在 IE 9 和 Firefox 上测试过！

## [http://www.mediafire.com/download/kyavlpudybg0bc1/HTML5_video.zip](http://www.mediafire.com/download/kyavlpudybg0bc1/HTML5_video.zip)

### 另外，上面的演示有一个闪退，所以它应该可以在 IE8 和更低版本上运行。

使用相同`ffmpeg`的命令。
编辑：我不得不重新上传视频，因为我的托管服务暂时停止了。现在它托管在 mediafire 上。我发现它们是最好的文件共享服务。最少广告，无需注册，无需等待 30 秒。

**另外，请查看 videojs 网站上的讨论：http:** [//help.videojs.com/discussions/problems/1020-ffmpeg-command-produce-your-demonstration-video](http://help.videojs.com/discussions/problems/1020-ffmpeg-command-produce-your-demonstration-video)。

**很重要！**确保在本地运行时单击“允许活动内容”按钮以允许视频！

**我遇到的问题和我的解决方案的视频：**请参阅上面提到的我的演示。

测试时使用的 HTML 代码：

```
<!DOCTYPE html>
<html>
<body>

<video width="320" height="240" controls>
  <source src="movie.mp4" type="video/mp4">
  <source src="movie.ogg" type="video/ogg">
  Your browser does not support the video tag.
</video>

</body>
</html> 
```

我分析了 w3schools 提供的工作测试视频（它适用于 IE），我发现他们使用 HandBrake 对视频进行编码。

```
Input #0, mov,mp4,m4a,3gp,3g2,mj2, from 'movie.mp4':
  Metadata:
    major_brand     : mp42
    minor_version   : 0
    compatible_brands: mp42isomavc1
    creation_time   : 2010-05-11 10:32:06
    encoder         : HandBrake 0.9.4 2009112300
  Duration: 00:00:12.61, start: 0.000000, bitrate: 202 kb/s
    Chapter #0.0: start 0.000000, end 12.612000
    Metadata:
      title           :
    Stream #0:0(und): Video: h264 (Constrained Baseline) (avc1 / 0x31637661), yuv420p, 320x240, 80 kb/s, 29.65 fps, 29.97 tbr, 90k tbn, 59.31 tbc
    Metadata:
      creation_time   : 2010-05-11 10:32:06
    Stream #0:1(und): Audio: aac (mp4a / 0x6134706D), 48000 Hz, stereo, fltp, 115 kb/s
    Metadata:
      creation_time   : 2010-05-11 10:32:06
    Stream #0:2(und): Subtitle: mov_text (text / 0x74786574)
    Metadata:
      creation_time   : 2010-05-11 10:32:06` 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-31T01:46:43.743

## ffmpeg 的初级之旅

* * *

> 下载最新的 ffmpeg 及其预设 [http://www.ffmpeg.org/download.html](http://www.ffmpeg.org/download.html)

**按照说明在 Windows 中安装 Ffmpeg 二进制文件**

* * *

> **指示：**

1.  从 arrozcru 自动构建页面获取最新构建

2.  解压文件夹到 C:/Program Files/ffmpeg

3.  将 C:/Program Files/ffmpeg/bin 添加到系统的 PATH 环境变量中

> **可选的 libx264 预设设置：**

**如果您使用 libx264 预设（通过使用 -vpre 标志），您需要进行以下设置。**

1.  为指向您的主目录的用户创建一个 HOME 环境变量。（例如对于 Vista/7/8 C:/Users/moose 或对于 XP C:/Documents and Settings/moose ）

2.  在你的主目录中创建一个 .ffmpeg 文件夹

3.  将预设文件从 C:/Program Files/ffmpeg/share/*.ffpreset 复制到 %HOME%/.ffmpeg

4.  现在您可以打开命令提示符并使用 ffmpeg。:D（例如这是我的 Vimeo 视频转换命令。ffmpeg -i input.mov -vcodec libx264 -vpre hq -crf 24 -g 25 -acodec libmp3lame -ab 192k -ar 44100 output.mp4）
    *注意：不包括 libfaac在构建中，因为 libfaac 被认为是一个非免费插件

**记得在windows中设置HOME环境变量**

1.  复制环境变量文件夹下的预设

2.  您需要使用以下命令来使用 ffmpeg 进行转换：

**对于 mp4 (H.264 / ACC)：**

```
ffmpeg -i INPUTFILE -b 1500k -vcodec libx264 -vpre slow -vpre baseline -g 30 "OUTPUTFILE.mp4" 
```

**对于 webm (VP8 / Vorbis)：**

```
ffmpeg -i "INPUTFILE"  -b 1500k -vcodec libvpx -acodec libvorbis -ab 160000 -f webm -g 30 "OUTPUTFILE.webm" 
```

**对于 ogv (Theora / Vorbis)：**

```
ffmpeg -i "INPUTFILE" -b 1500k -vcodec libtheora -acodec libvorbis -ab 160000 -g 30 "OUTPUTFILE.ogv" 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-31T02:07:04.693

从原始链接...

ffmpeg 0.6 及更高版本完全支持 WebM。在命令行上，不带参数运行 ffmpeg 并验证它是否使用 VP8 支持编译：

```
you@localhost$ ffmpeg
FFmpeg version SVN-r23197, Copyright (c) 2000-2010 the FFmpeg developers
built on May 19 2010 22:32:20 with gcc 4.4.3
configuration: --enable-gpl --enable-version3 --enable-nonfree --enable-postproc 
--enable-pthreads --enable-libfaac --enable-libfaad --enable-libmp3lame 
--enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libtheora 
--enable-libx264 --enable-libxvid --enable-x11grab --enable-libvorbis 
--enable-libvpx 
```

如果您没有看到“<code>--enable-libvorbis”和“<code>--enable-libvpx”这两个神奇的词，则说明您没有正确版本的 ffmpeg。（如果你自己编译了ffmpeg，请检查你是否安装了两个版本。没关系，它们不会相互冲突。你只需要使用支持VP8的ffmpeg版本的完整路径。）

我将进行两次编码。第 1 步只是扫描输入视频文件 (-i pr6.dv) 并将一些统计信息写入日志文件（将自动命名为 pr6.dv-0.log）。我使用 -vcodec 参数指定视频编解码器：

```
you@localhost$ ffmpeg -pass 1 -passlogfile pr6.dv -threads 16  -keyint_min 0 -g 250 -skip_threshold 0 -qmin 1 -qmax 51 -i pr6.dv -vcodec libvpx -b 614400 -s 320x240 -aspect 4:3 -an -y NUL 
```

大多数 ffmpeg 命令行与 VP8 或 WebM 无关。libvpx 确实支持许多您可以传递给 ffmpeg 的特定于 VP8 的选项，但我还不知道它们中的任何一个是如何工作的。一旦我找到了对它们的一个很好的解释，我会在此处将其链接起来，并在值得这样做的情况下将它们合并到叙述中。

对于第二遍，ffmpeg 将读取它在第一遍中写入的统计信息，并实际进行视频和音频的编码。它将写出一个 .webm 文件。

```
you@localhost$ ffmpeg -pass 2 -passlogfile pr6.dv -threads 16  -keyint_min 0 -g 250 -skip_threshold 0 -qmin 1 -qmax 51 -i pr6.dv -vcodec libvpx -b 614400 -s 320x240 -aspect 4:3 -acodec libvorbis -y pr6.webm 
```

这里有五个重要参数：

*   `-vcodec libvpx`指定我们使用 VP8 视频编解码器进行编码。WebM 总是使用 VP8 视频。
*   `-b 614400`指定比特率。与其他格式不同，libvpx 期望比特率以实际比特为单位，而不是千比特。如果您想要 600 kbps 的视频，请将 600 乘以 1024 得到 614400。
*   `-s 320x240`指定目标尺寸，宽乘高。
*   `-aspect 4:3`指定视频的纵横比。标清视频通常是 4:3，但大多数高清视频是 16:9 或 16:10。在我的测试中，我发现我必须在命令行上明确指定这一点，而不是依靠 ffmpeg 来自动检测它。
*   `-acodec libvorbis`指定我们使用 Vorbis 音频编解码器进行编码。WebM 总是使用 Vorbis 音频。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-12-08T00:48:45.737

我的问题是像素格式。

为我在 IE 中添加`-pix_fmt yuv420p`修复它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-03-13T00:35:14.967

I spent many hours trying to figure that one out. I finally found how to do this properly using avconv (or ffmpeg)

1.  Convert the video to MPEG4 using H.264 codec. You don't need anything fancy, just let avconv do the job for you:

    ```
    avconv -i video.mp4 -vcodec libx264 pre_out.mp4 
    ```

2.  Move the file info to the file header, so the browser can start playing it as soon as it starts to download it. THIS IS THE KEY FOR IE9!!!

    ```
    qt-faststart pre_out.mp4 out.mp4 
    ```

`qt-faststart` is a Quicktime utilities that also support H.264/ACC file format. It is part of `libav-tools` package.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-03T20:11:11.220

前段时间有同样的问题，我以这种方式成功解决：

首先，下载最新版本的 ffmpeg（或者从官方 github 存储库（[https://github.com/FFmpeg/FFmpeg](https://github.com/FFmpeg/FFmpeg)）构建，如果您想进行一些实验）。

然后试试这个：

```
ffmpeg -i input.mov -c:v libx264 -c:a libfaac -strict experimental output.mp4 
```

希望这会有所帮助！

# ios - iOS - 来自 3 个字符串的键索引

> ID：15524784
> 
> 赞同：0
> 
> 时间：2013-03-20T13:21:54.190
> 
> 标签：ios, nsstring, nsdictionary

我将项目存储在一个大型 NSMutableArray 中。3 个字符串定义了此数组中的唯一项。我想要一个 NSMutableDictionary ，它将 3 个字符串键映射到数组中的一个条目。

在我的代码中，项目中的前 3 个对象是定义唯一项目的 3 个字符串。我怎样才能最有效地创建进行查找的密钥？我猜 stringWithFormat 不是最好的主意。我正在尝试加快发生的大量查找。

```
- (void)addItem:(NSArray*)item {
    // create entry from item
    [mEntries addObject:entry]; 
    NSString *key = [NSString stringWithFormat:@"%@%@%@", [item objectAtIndex:0],
                               [item objectAtIndex:1],[item objectAtIndex:2]];
    [mEntryMap setObject:entry forKey:key];
}

- (Entry*)getItem:(NSArray*)strs {
    NSString *key = [NSString stringWithFormat:@"%@%@%@", [strs objectAtIndex:0],
                               [strs objectAtIndex:1],[strs objectAtIndex:2]];
    return [mEntryMap objectForKey:key];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T13:26:05.060

直接从数组创建字符串，无需使用 long 方法

```
- (void)addItem:(NSArray*)item {
    // create entry from item
    [mEntries addObject:entry]; 
    NSString *key=[item componentsJoinedByString:@""];
    [mEntryMap setObject:entry forKey:key];
}

- (Entry*)getItem:(NSArray*)strs {
    NSString *key=[strs componentsJoinedByString:@""];
    return [mEntryMap objectForKey:key];
} 
```

# mysql - 如何更正和重写此查询？

> ID：15524789
> 
> 赞同：0
> 
> 时间：2013-03-20T13:22:02.617
> 
> 标签：mysql

```
SELECT * 
FROM users
WHERE id
IN ( 2024 ) 
AND id NOT IN (
    SELECT user_id
    FROM  `used` 
    WHERE DATE_SUB( DATE_ADD( CURDATE( ) , INTERVAL 7 DAY ) , INTERVAL 14 DAY ) <= created)
AND id NOT IN (
    SELECT user_id
    FROM coupon_used
    WHERE code =  'XXXXX')
AND id IN (
    SELECT user_id
    FROM accounts) 
```

我在 users 表中有 id 2024，但是这个 id 2024 在 used 表中。因此，当我运行此查询时，它也会显示 2024 id，应该将其过滤掉。我在选择特定用户的地方运行查询，然后我希望这些用户被过滤掉，他们不应该在使用的表中。但上面的查询并没有给我想要的结果。期望结果是我想通过以下条件选择用户： 选择特定用户，并检查他们是否不在 used 表中，也不在 coupon_used 表中，但它们应该在 accounts 表中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T13:29:36.663

首先，使用连接尝试这样的事情。哪个应该更容易阅读并且（取决于 MySQL 的版本）更快

```
SELECT DISTINCT users.* 
FROM users
INNER JOIN accounts ON users.id = accounts.user_id
LEFT OUTER JOIN coupon_used ON users.id = coupon_used.user_id AND coupon_used.code = 'XXXXX'
LEFT OUTER JOIN `used` ON users.id = `used`.user_id AND DATE_SUB( DATE_ADD( CURDATE( ) , INTERVAL 7 DAY ) , INTERVAL 14 DAY ) <= `used`.created
WHERE id IN ( 2024 ) 
AND coupon_used.user_id IS NULL
AND `used`.user_id IS NULL 
```

编辑 - 简化日期检查： -

```
SELECT DISTINCT users.* 
FROM users
INNER JOIN accounts ON users.id = accounts.user_id
LEFT OUTER JOIN coupon_used ON users.id = coupon_used.user_id AND coupon_used.code = 'XXXXX'
LEFT OUTER JOIN `used` ON users.id = `used`.user_id AND DATE_SUB( CURDATE( ) , INTERVAL 7 DAY ) <= `used`.created
WHERE id IN ( 2024 ) 
AND coupon_used.user_id IS NULL
AND `used`.user_id IS NULL 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T13:31:22.457

我会为排除条件使用左连接，对包含项使用常规连接：

```
SELECT users.*
FROM users
INNER JOIN accounts ON accounts.user_id = users.id
LEFT JOIN used ON used.user_id = users.id AND DATE_SUB(CURDATE(), INTERVAL 7 DAY) <= used.created)
LEFT JOIN coupon_used ON coupon_used.user_id = users.id AND coupon_used.code = 'XXXX'
WHERE id IN (2024) AND used.user_id IS NULL AND coupon_used.user_id IS NULL 
```

我也编辑了日期操作；+7 -14 将是 -7 :)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T13:31:42.007

我建议在帐户上使用 JOIN，在其他两个表上使用 LEFT OUTER JOIN。帐户上的 JOIN 意味着它必须在帐户表中。coupon_used 和 used 上的 LEFT OUTER JOINS 意味着无论它们是否在该表中，它都会返回一条记录。过滤到 c.user_id IS NULL 意味着该表中没有记录。

```
SELECT users.* 
FROM users
    JOIN accounts ON users.id = accounts.user_id
    LEFT OUTER JOIN coupon_used c ON users.id = c.user_id AND c.code = 'XXXXX'
    LEFT OUTER JOIN `used` u ON users.id = u.user_id AND DATE_SUB( DATE_ADD( CURDATE( ) , INTERVAL 7 DAY ) , INTERVAL 14 DAY ) <= u.created
WHERE id IN ( 2024 ) 
AND c.user_id IS NULL
AND u.user_id IS NULL 
```

# sql - 我在某些关系中找不到任何主键

> ID：15524794
> 
> 赞同：0
> 
> 时间：2013-03-20T13:22:17.983
> 
> 标签：sql, foreign-keys, primary-key, relation

好吧，所以我从某个地方读到

> 每个表都应该有一个主键

但是我的一些表似乎不正常！我也想知道我正在使用的关系是否很好，或者我需要进一步解散它们，我愿意接受建议。

关系是

> 经销商(DealerId(PK),DealerName)
> 
> 订单(DealerId(FK),OrderDate,TotalBill)
> 
> 销售（DealerId(FK),ItemType,OrderDate,Quantity,Price）

PS 我不能制作一个名为 Items(ItemCode,Type,Price) 的表，因为不同经销商的价格是可变的。并且我需要的所有约束（即非空+检查）都已处理，只是没有提及。

**1、关系解得好吗？**

**2\. 我应该关心在还没有的表中设置主键吗？**

有用的回应表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T13:42:21.550

你真的需要单独的**销售**表吗？

```
Dealers(DealerId(PK),DealerName)
Order(OrderId(PK), DealerId(FK),OrderDate, ItemType, Quantity,Price) 
```

还，

```
TotalBill (can be calculated) = Quantity * Price 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T13:44:07.690

在您的情况下，您应该向 Order 和 Sales 添加一个自动递增整数字段，并将其设置为主键。

在关系数据库理论中，您有时可以识别字段的子集以用作主键，只要这些列不为空且唯一。但是，（1）订单表不能有来自 DealerID 和 OrderDate 的主键，因为经销商可以在同一日期下两个订单。甚至可能是相同的数量，这意味着没有字段的子集是唯一的，并且（2）即使熟悉的数据可以唯一地标识数据，自增整数也可能是一个很好的键。

我还认为您需要从 Sales 到 Order 的外键。您可能正在使用 DealerId 和 OrderDate 进行连接，但如果经销商在同一日期下达两个订单，这将无法正常工作。

最后，接受这样的建议

> 每个表都应该有一个主键

一粒盐。用于多对多关系的链接表可以在没有主键的情况下完美运行，尽管主键可以是一种改进，因为它可以更轻松地删除记录，并且如果链接表上没有主键，我仍然会推荐所有字段的唯一索引，在这种情况下*，它*可以是主键。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T14:21:10.237

**关于问题 1**，您应该回答这个问题：

```
没有订单可以进行销售吗？
```

 **如果是，那么您在 Sales 中的 DealerId(FK) 没问题，假设只有在经销商完成销售时才会存在销售。

如果不是，您应该在 Sales 中输入 OrderId(FK)，而不是 DealerId(FK)。如果销售属于订单，则该订单属于经销商，因此您已经拥有经销商与销售的关系。

**关于问题 2**，您的表上应该有主键，因为这是您必须选择、更新和删除数据库中某些特定项目的方式。请记住，主键并不总是自动递增列。

**关于 Items 表**，如果价格对于不同的经销商是可变的，那么经销商和项目之间存在 M 到 N 的关系，这意味着您可以有一个像下面这样的中间表：

```
DealerItemPrices(DealerId(FK), ItemId(FK), 价格)
```

并且这两个外键应该是唯一的复合键，这样经销商 Y 就不能对同一项目有两个不同的价格。

希望能帮助到你！**

# css - 将一个完整文档背景图像置于另一个之上

> ID：15524800
> 
> 赞同：4
> 
> 时间：2013-03-20T13:22:39.863
> 
> 标签：css, background

我知道类似的问题已经被反复询问，但我还没有遇到真正适合我的解决方案。想象一下下面的问题。

情况：

*   正文具有垂直和水平重复的非固定背景图像。
*   应该有第二个透明背景图像覆盖第一个。

约束：

*   第二个背景应该横跨文档，就像正文上的背景一样。注意：不仅仅是视口，还有整个文档。
*   即使正文高度小于文档高度（即没有滚动条），第二个背景也必须延伸到视口的底部（因此任何使用 100% html 和/或正文高度的解决方案都是不可能的）。
*   第二个背景的位置不能固定，因为这会在滚动时产生某种视差效果。必须维护两个图像实际上是一个的错觉。
*   正文可能有边距和/或填充。无论如何，两种背景都应涵盖整个文档。
*   `background-image: url(), url();`出于向后兼容性的原因，不能在正文 (" ") 上使用第二个背景图像。
*   没有 JavaScript。
*   显然，实际上没有将两个图像合并为一个。:)

我已经对这个问题思考了一段时间，并得出结论，仅使用 HTML 和 CSS2 是不可能的。我非常希望被证明是错误的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T13:28:27.833

You should place a background image for two separate which covers each the whole document :

```
<html>
<head>
<style>
.firstbackground {
 position:absolute;
 left:0;
 top : 0;
 width : 100%;
 min-height : 100%;
 background: url('first.png') repeat;
}
.secondbackground {
 width : 100%;
 min-height : 100%;
 background:url('second.png'); /* may be transparent, but why add a background then ;-) */
}
</style>
</head>
<body>
 <div class="firstbackground">
  <div class="secondbackground">

  long content

  </div>
 </div>

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T13:27:37.097

CSS3 允许使用逗号分隔的多个背景，例如：

```
background: url('topNonFixedBG.png'), #000 url('mainBG.png') no-repeat fixed top center; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T13:39:31.430

[http://jsfiddle.net/hs2WT/1/](http://jsfiddle.net/hs2WT/1/)

只需使用多个 div...

**CSS：**

```
html {
    height: 100%;
}
body { height: 100%;}

.wrapper1 {
    width: 100%;
    height: 100%;
    background: url('http://khill.mhostiuckproductions.com/siteLSSBoilerPlate//images/nav/hixs_pattern_evolution.png');
}

.wrapper2 {
    width: 100%;
    height: 100%;
    background: url('http://khill.mhostiuckproductions.com/siteLSSBoilerPlate//images/nav/yellow1.png');
}

.content { color: #fff; } 
```

**HTML：**

```
<div class="wrapper1">
    <div class="wrapper2">
        <div class="content">
            <p>Some Content</p>
        </div>
    </div>
</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T13:41:34.027

让第二背景有位置：绝对；

```
body{
 background:url("http://jsfiddle.net/css/../img/logo.png") #000;
}
#secBg{
 background:url("http://placehold.it/350x150") ;
 position:absolute;
 min-height:500%;
 min-width:100%; 
```

}

```
<html>
<body>
<div id="secBg">
</div>
</body>
</html> 
```

[http://jsfiddle.net/5sxWB/](http://jsfiddle.net/5sxWB/)

# html - 如何在 Firefox OS 中实现通知？

> ID：15524817
> 
> 赞同：3
> 
> 时间：2013-03-20T13:23:19.177
> 
> 标签：html, notifications, firefox-os

我有一个几乎完整的即时消息应用程序，我唯一缺少的是为您提供的 Firefox 通知。API 也一样？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-20T21:15:27.600

不清楚您是在使用 Notifications API 还是 Push Notifications API，所以我将同时讨论这两者。

首先，通知“API”（我不确定它是否被重命名为 API，恐怕现在它只是被称为“通知”）。您可以[`mozNotification`](https://developer.mozilla.org/en-US/docs/DOM/navigator.mozNotification)用来创建新的通知对象并[`show`](https://developer.mozilla.org/en-US/docs/DOM/Displaying_notifications)用来显示它们：

```
var notification = navigator.mozNotification;
 var n = notification.createNotification("Title", "Body", "optional_icon.png");
n.show(); 
```

在这两个链接上，您可以更好地了解可以用它做什么。

确保您请求使用此权限（将其添加到您的`manifest.webapp`）：

```
"permissions": {
    "desktop-notification":{}
} 
```

为了方便起见，我制作了一个[演示应用程序](https://gitorious.org/firefox-os-demos/moznotification)。看看它是如何工作的，以及我所做的更改。

警告：这与[Web Notifications](http://www.w3.org/TR/notifications/)不同。

[Push API](https://wiki.mozilla.org/WebAPI/PushAPI)已在 Mozilla Wiki上列出，但 AFAIK 正在进行中。[您可以在Mozilla Wiki](https://wiki.mozilla.org/WebAPI/PushAPI)、[github（服务器端的东西）](https://github.com/telefonicaid/notification_server)和[Gecko 实现错误](https://bugzilla.mozilla.org/show_bug.cgi?id=763198)上关注有关此特定 API 的新闻。

还有另一个 API，[SimplePush API](https://wiki.mozilla.org/WebAPI/SimplePush)，现在似乎可以工作了。不幸的是，我对此知之甚少。但至少文档看起来相当不错。

不幸的是，我不知道这些 API 与[W3C 的 Push API](http://www.w3.org/TR/push-api/)有什么关系。恐怕[Push API](https://wiki.mozilla.org/WebAPI/PushAPI)与标准有些相关，尽管我不确定。对于这些 API，我不会依赖除 Mozilla 之外的任何其他文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-22T14:45:17.140

对于基于服务器的推送通知，请参阅包含实现示例的[简单推送。](https://developer.mozilla.org/en-US/docs/WebAPI/Simple_Push)**这在 Firefox OS (/Boot2Gecko) 1.1 中可用。但不在 1.0**中（在所有当前发布的设备上）。另请注意，您需要一个真实的设备，它不能在模拟器中工作。

鉴于上述链接，Simple Push 本身并不难实现。不过，您需要注意以下几点：

*   您需要自己的服务器来按需触发 Firefox 的服务器以进行推送
*   设备上收到的推送不包含任何信息（这意味着您必须在收到推送后查询所需的信息）
*   收到的推送是无声且不可见的 - 这意味着您必须自己显示桌面通知，[如上所述](https://stackoverflow.com/a/15534867/986426)
*   [由于存在错误](https://bugzilla.mozilla.org/show_bug.cgi?id=800431)，推送端点必须与清单中的页面相同`launch_path`（这意味着您必须将所有逻辑放在一个页面中）
*   确保您在收到推送后[获得唤醒锁](https://developer.mozilla.org/en-US/docs/Web/API/window.navigator.requestWakeLock)，并在工作完成后释放它 - 这样设备就不会进入深度睡眠，并且您的推送处理会在其中暂停

It is possible to build similar functionality on Boot2Gecko 1.0 using [MozAlarmsManager](https://developer.mozilla.org/en-US/docs/Web/API/MozAlarmsManager).

# c - 无法在 C 中创建大型结构数组

> ID：15524820
> 
> 赞同：0
> 
> 时间：2013-03-20T13:23:23.020
> 
> 标签：c, arrays, struct, stack-overflow

在需要构建哈希表时，我必须创建一个包含至少 1,000,000 个项目的大型结构数组。

```
#include <stdio.h>

#define N 1000003

struct hashTable
{
    char productID[16];
    double points;
};

int main(int argc, char const *argv[])
{
    struct hashTable table[N] = {0};          // Stack Overflow happens here

    return 0;
} 
```

问题是每当我尝试创建这样的数组时都会出现堆栈溢出。

有没有办法克服这个问题？有没有另一种方法来创建这么大的数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T13:24:35.913

以这种方式分配（在大多数实现中的堆栈上）太大了。该标准不保证以这种方式分配这么大的对象。改为使用 malloc() 动态分配它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T13:32:02.493

```
hashTable *table = malloc(N*sizeof(hashTable)); //allocate memory
... use it
free(table); //free memory 
```

# symfony - 我的迭代器实现在 Twig 1.12 中不起作用

> ID：15524821
> 
> 赞同：0
> 
> 时间：2013-03-20T13:23:23.147
> 
> 标签：symfony, foreach, twig

我读到 foreach 适用于数组或任何实现 Traversable 接口的对象。

由于 Traversable 只是一个抽象，我使用了 Iterator。

```
class EPubHub_PageCollection implements Iterator
{
    protected $index0 = 0;
    protected $index = 1;
    protected $pages = array();

    public function __construct()
    {
        $this->index0 = 0;
        $this->index = 1;
        $this->pages = array();
    }

    public function updateIndex()
    {
        $this->index = $this->index0 + 1;
    }

    public function rewind()
    {
        $this->index0 = 0;
        $this->updateIndex();
    }

    public function current()
    {
        return $this->pages[$this->index0];
    }

    public function key() 
    {
        return $this->index0;
    }

    public function index() 
    {
        return $this->index;
    }

    public function next() 
    {
        ++$this->index0;
        $this->updateIndex();
    }

    public function valid() 
    {
        return isset($this->pages[$this->index0]);
    }

    public function length()
    {
        return count($this->pages);
    }

    public function prefixZero($index, $lengthOfKey = 3)
    {
        return str_pad($index, $lengthOfKey, '0', STR_PAD_LEFT);
    }

    public function getCurrentPageNumber()
    {
        $pageNumber = $this->prefixZero($this->index);
        return $pageNumber;
    }

    public function getCurrentPageFilename($pagenumber = '')
    {
        if ($pagenumber === '')
        {
            $pagenumber = $this->getCurrentPageNumber();
        }
        $pageFileName = 'page' . $pagenumber . '.xhtml' ;
        return $pageFileName;
    }

    public function getNth($index)
    {
        return $this->pages[$index - 1];
    }

    public function getCurrentPageItemId($pagenumber = '')
    {
        if ($pagenumber === '')
        {
            $pagenumber = $this->getCurrentPageNumber();
        }
        $pageItemId = 'pg' . $pagenumber;
        return $pageItemId;
    }

    public function add(EPubHub_PageInterface $page, $index = null)
    {
        if ($index === null) {
            // we just append to the pages from the end directly
            $this->pages[] = $page;
        } else {
            $this->pages = array_splice( $this->pages, $index - 1, 0, $page);
        }
    }

    /**
     *
     * delete either by page or by index
     * @param mixed $pageOrIndex If $pageOrIndex is instance of EPubHub_PageInterface
     * then delete by value. Else if integer delete by index
     */
    public function delete($pageOrIndex)
    {

        if ($pageOrIndex instanceof EPubHub_PageInterface)
        {
            $page = $pageOrIndex;
            if(($key = array_search($page, $this->pages)) !== false)
            {
                unset($this->pages[$key]);
            }
        } 

        if (is_numeric($pageOrIndex)) 
        {
            $key = $pageOrIndex;

            if((array_key_exists($key - 1, $this->pages)))
            {
                unset($this->pages[$key - 1]);
            }

        }

    }

    public function getImages()
    {
        $images = new EPubHub_ImageCollection();

        foreach($this->pages as $page)
        {
            $image = $page->getImage();
            $images->add($image);
        }
        return $images;
    }

    public function getPages()
    {
        return $this->pages;
    }

} 
```

这个没用。

我想明白为什么。我尝试运行转储（），但实例上的转储破坏了一些东西。

目前，我的解决方法是使用此类的内部数组。

我问这个问题是为了满足我的好奇心。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T13:46:13.527

您需要配置调试：

```
services:
    acme_hello.twig.extension.debug:
        class:        Twig_Extension_Debug
        tags:
            - { name: 'twig.extension' } 
```

看这里：[调试](http://symfony.com/doc/current/book/templating.html#debugging)。而且：[for 循环在 twig 中](http://twig.sensiolabs.org/doc/tags/for.html)。

例如：

```
{{ dump(users) }}

{% for user in users %}
    {{ user.username }}
{% endfor %} 
```

# python - 如何找到不完美的子串？

> ID：15524822
> 
> 赞同：0
> 
> 时间：2013-03-20T13:23:26.210
> 
> 标签：python, regex, python-2.7

我有一个相等长度的子字符串列表，我想在一个大字符串中找到一个位置。然而棘手的部分是我还应该找到不匹配数量有限的子字符串（也给出了不匹配的数量）。我以为我可以用正则表达式来做到这一点，但我找不到怎么做。UPD：我使用的是 Python 2.7。

示例：输入字符串：`s = 'ATGTCGATCGATGCTAGCTATAGATAAAA'`，输入子字符串是`s0 = 'ATG'`，允许的不匹配数是 n = 1。我想要的是返回一个可迭代的，比如说一个位置列表：`[0,7,19,23,6]`，它对应于 'ATG' 的位置（两次），'ATA ' (两次), 'ATC' 相应地，因为没有其他 3-mers 不匹配不会出现在字符串中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T14:50:50.290

新[`regex`](https://pypi.python.org/pypi/regex/)模块支持模糊匹配。例如

```
(?:foo){s<=2} 
```

匹配“foo”，允许 2 个替换。

另请注意文档中的此评论：

> 默认情况下，模糊匹配搜索满足给定约束的第一个匹配项。ENHANCEMATCH 标志将导致它尝试改进它找到的匹配的匹配度（即减少错误的数量）。
> 
> BESTMATCH 标志将使其搜索最佳匹配。

例子：

```
>>> regex.findall(r'(?:foo){s<=2}', 'xxfoo')
['xfo']
>>> regex.findall(r'(?:foo){s<=2}', 'xxfoo', regex.BESTMATCH)
['foo'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T13:27:35.587

您是否考虑过使用 Levenshtein 距离算法寻求帮助？它用于确定两个字符串彼此之间的相似程度。

这是一个幼稚的实现：

1.  对于 i = 0 到 len(haystack_str) - len(needle_str)
2.  让potential_match = haystack_str[i,i+len]
3.  查看 potential_match 和 needle_str 之间的 Levenshtein 距离是多少
4.  如果距离为 0，则表示完美匹配
5.  如果距离小于阈值，则您的匹配不完美但足够接近
6.  否则，继续下一个 i

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T13:43:36.210

鉴于我对您的问题的理解：

类型 1

```
def diff_count(s1, s2):
    count = 0
    for i in range(len(s1)):
        if s1[i] != s2[i]:
            count += 1
    return count

def diff_filter1(s1, s2, max_count):
    return diff_count(s1, s2) < max_count 
```

类型 2（更高效）

```
def diff_filter2(s1, s2, max_count):
    count = 0
    i = 0
    while i < len(s1) and count < max_count:
        if s1[i] != s2[i]:
            count += 1
        i += 1
    return count < max_count 
```

[以及Levenshtein 距离](http://en.wikipedia.org/wiki/Levenshtein_distance#Computing_Levenshtein_distance)的 Python 代码

```
def LevenshteinDistance(s, t):
    len_s = len(s)- 1
    len_t = len(t)- 1
    if(len_s == 0): return len_t
    if(len_t == 0): return len_s
    if(s[len_s-1] == t[len_t-1]): cost = 0
    else:                         cost = 1
    return min(LevenshteinDistance(s[0:len_s-1], t) + 1,
               LevenshteinDistance(s, t[0:len_t-1]) + 1,
               LevenshteinDistance(s[0:len_s-1], t[0:len_t-1]) + cost) 
```

# ios - 如何在 iOS 6 中防止全屏视频旋转

> ID：15524824
> 
> 赞同：1
> 
> 时间：2013-03-20T13:23:28.633
> 
> 标签：ios, ios6

我有一个应用程序，其旋转配置是动态定义的，因此我无法在项目文件中设置支持的旋转。

因此我必须处理新的 shouldRotate 方法（感谢 Apple ！！）

但是尽管已经覆盖了这些并阻止了完整的 UI 以除纵向之外的任何内容显示。当视频视图全屏显示并旋转时。视频将旋转为横向静止。

有没有另一种方法可以专门从旋转中预览视频？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T14:27:03.117

这是一个使用`MPMoviePlayerViewController`支持纵向和纵向倒置的子类的实现（但您可以轻松更改蒙版）。*正如您所建议的，这在 iOS 6 中有效*，以前的版本有不同的旋转选择器。

用法：

```
NSURL* url = [NSURL URLWithString:@"your_movie"];
MovieViewController* mvc = [[MovieViewController alloc] initWithContentURL:url];

// I did this from the app delegate. 
// You could push this view controller, present it modally, etc.

[self.window setRootViewController:mvc]; 
```

在*MovieViewController.h 中*：

```
#import <UIKit/UIKit.h>
#import <MediaPlayer/MediaPlayer.h>

@interface MovieViewController : MPMoviePlayerViewController

- (id)initWithContentURL: (NSURL*) url;

@end 
```

在*MovieViewController.m 中*：

```
#import "MovieViewController.h"
#import <MediaPlayer/MediaPlayer.h>

@interface MovieViewController ()

@end

@implementation MovieViewController

- (id)initWithContentURL: (NSURL*) url
{
    self = [super initWithContentURL: url];
    if (self) {
        // Custom initialization

    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    // Do any additional setup after loading the view.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}
/*
    ROTATION CODE
 */
- (BOOL)shouldAutorotate
{
    return YES;
}

- (NSInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskPortrait | UIInterfaceOrientationMaskPortraitUpsideDown;
}

@end 
```

结果（注意在项目上为所有旋转启用了旋转..）：

![在此处输入图像描述](../Images/2bd0c3540a7547329e19b93db27a15ad.png)

# sqlite - Nullpointer database.open(), getwritabledatabase

> ID：15524826
> 
> 赞同：1
> 
> 时间：2013-03-20T13:23:36.367
> 
> 标签：sqlite, nullpointerexception, android-context

我想填写一个列表并从活动中打开的数据库中执行此操作。我制作了一个自定义适配器，并且那个“助手”类将另一个“助手”类称为 listview 包装器。在那个 listview 包装器中，我想打开另一个（不同的）数据库，但我得到一个空指针异常。

所以在我打电话的活动中：

```
 adapter = new ListViewAdapter(this, ListViewAdapter.TPL_HISTORY, historydatasource.getAllCalls());
             list.setAdapter(adapter); 
```

比 historydatasource 类打开一个 listviewwrapper (helper) 类来处理我为 listview 创建的模板。在那里我想打开另一个数据库，但我得到一个空指针异常。

有人知道我该怎么做吗？

```
 DB_DataSource cardsdatasource=new DB_DataSource(myContext);
cardsdatasource.open(); (GIVES NULLPOINTER, because myContext=null) 
```

有没有办法获取上下文？

错误：

```
03-20 14:03:51.919: E/AndroidRuntime(15492): FATAL EXCEPTION: main
03-20 14:03:51.919: E/AndroidRuntime(15492): java.lang.NullPointerException
03-20 14:03:51.919: E/AndroidRuntime(15492):    at com.myapp.testapp.ListViewWrapper.populateFrom(ListViewWrapper.java:91)
03-20 14:03:51.919: E/AndroidRuntime(15492):    at com.myapp.testapp.ListViewAdapter.getView(ListViewAdapter.java:121)
03-20 14:03:51.919: E/AndroidRuntime(15492):    at android.widget.AbsListView.obtainView(AbsListView.java:1536)
03-20 14:03:51.919: E/AndroidRuntime(15492):    at android.widget.ListView.makeAndAddView(ListView.java:1793)
03-20 14:03:51.919: E/AndroidRuntime(15492):    at android.widget.ListView.fillDown(ListView.java:718)
03-20 14:03:51.919: E/AndroidRuntime(15492):    at android.widget.ListView.fillFromTop(ListView.java:775)
03-20 14:03:51.919: E/AndroidRuntime(15492):    at android.widget.ListView.layoutChildren(ListView.java:1646)
03-20 14:03:51.919: E/AndroidRuntime(15492):    at android.widget.AbsListView.onLayout(AbsListView.java:1366)
03-20 14:03:51.919: E/AndroidRuntime(15492):    at android.view.View.layout(View.java:7175)
03-20 14:03:51.919: E/AndroidRuntime(15492):    at android.widget.RelativeLayout.onLayout(RelativeLayout.java:912)
03-20 14:03:51.919: E/AndroidRuntime(15492):    at android.view.View.layout(View.java:7175)
03-20 14:03:51.919: E/AndroidRuntime(15492):    at android.widget.FrameLayout.onLayout(FrameLayout.java:338)
03-20 14:03:51.919: E/AndroidRuntime(15492):    at android.view.View.layout(View.java:7175)
03-20 14:03:51.919: E/AndroidRuntime(15492):    at android.widget.FrameLayout.onLayout(FrameLayout.java:338)
03-20 14:03:51.919: E/AndroidRuntime(15492):    at android.view.View.layout(View.java:7175)
03-20 14:03:51.919: E/AndroidRuntime(15492):    at android.view.ViewRoot.performTraversals(ViewRoot.java:1146)
03-20 14:03:51.919: E/AndroidRuntime(15492):    at android.view.ViewRoot.handleMessage(ViewRoot.java:1866)
03-20 14:03:51.919: E/AndroidRuntime(15492):    at android.os.Handler.dispatchMessage(Handler.java:99)
03-20 14:03:51.919: E/AndroidRuntime(15492):    at android.os.Looper.loop(Looper.java:123)
03-20 14:03:51.919: E/AndroidRuntime(15492):    at android.app.ActivityThread.main(ActivityThread.java:3687)
03-20 14:03:51.919: E/AndroidRuntime(15492):    at java.lang.reflect.Method.invokeNative(Native Method)
03-20 14:03:51.919: E/AndroidRuntime(15492):    at java.lang.reflect.Method.invoke(Method.java:507)
03-20 14:03:51.919: E/AndroidRuntime(15492):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
03-20 14:03:51.919: E/AndroidRuntime(15492):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
03-20 14:03:51.919: E/AndroidRuntime(15492):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T17:35:48.927

这确实是一个上下文问题，我将 activity.getApplicationContext() 从 CustomAdapter 传递给了包装器并得到了解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T13:43:48.977

我`DataSource`上课的方式如下：

```
public class StudyManagerDataSource {

    public static final String LOG_TAG = "studymanager";

    SQLiteOpenHelper dbHelper;
    SQLiteDatabase database;        

    // --------------------------------------------------------------------------------------------

    public StudyManagerDataSource(Context context) {
        dbHelper = new DBOpenHelper(context);

    }

    // --------------------------------------------------------------------------------------------

    public void open() {
        database = dbHelper.getWritableDatabase();
        Log.i(LOG_TAG, "Database Opened");
    } // end method open

    public void close() {
        Log.i(LOG_TAG, "Database Closed");
        dbHelper.close();
    } // end method close
    /*
    Other methods for manipulating tables goes here...
       */    
} 
```

告诉我它是否解决了你的问题！

# glassfish - Glassfish 中关于 JMS 的警告

> ID：15524836
> 
> 赞同：0
> 
> 时间：2013-03-20T13:23:59.293
> 
> 标签：glassfish, jms

我最近安装了最新的 Glassfish 开源版本并对其进行了配置，但 JMS 出现问题，现在我的 2 个 Glassfish 服务器出现问题（而在安装新的 GF 服务器之前，它在以前的 GF 服务器上运行）。所以我认为这两个服务器之间可能存在冲突。

当我尝试使用 JMS 时，我收到以下日志：

```
[#|2013-03-20T14:10:00.015+0100|FINE|glassfish3.1.2|javax.jms.ConnectionFactory.mqjmsra|_ThreadID=152;_ThreadName=Thread-2;ClassName=com.sun.messaging.jms.ra.DirectConnectionFactory;MethodName=createConnection;|MQJMSRA_DCF1101: createConnection():|#]

[#|2013-03-20T14:10:00.015+0100|FINE|glassfish3.1.2|javax.jms.ConnectionFactory.mqjmsra|_ThreadID=152;_ThreadName=Thread-2;ClassName=com.sun.messaging.jms.ra.DirectConnectionFactory;MethodName=createConnection;|MQJMSRA_DCF1101: createConnection(u,p):username=guest|#]

[#|2013-03-20T14:10:00.015+0100|FINE|glassfish3.1.2|javax.jms.Connection.mqjmsra|_ThreadID=152;_ThreadName=Thread-2;ClassName=com.sun.messaging.jms.ra.DirectConnection;MethodName=createSession;|MQJMSRA_DC1101: connectionId=7032438472106962688:createSession():isTransacted=false:acknowledgeMode=1|#]

[#|2013-03-20T14:10:00.015+0100|FINE|glassfish3.1.2|javax.jms.Session.mqjmsra|_ThreadID=152;_ThreadName=Thread-2;ClassName=com.sun.messaging.jms.ra.DirectSession;MethodName=close;|MQJMSRA_DS1101: sessionId=7032438472122322689:close()|#]

[#|2013-03-20T14:10:00.015+0100|FINE|glassfish3.1.2|javax.jms.Connection.mqjmsra|_ThreadID=152;_ThreadName=Thread-2;ClassName=com.sun.messaging.jms.ra.DirectConnection;MethodName=close;|MQJMSRA_DC1101: connectionId=7032438472106962688:close():|#]

[#|2013-03-20T14:10:00.046+0100|FINE|glassfish3.1.2|javax.jms.Connection.mqjmsra|_ThreadID=152;_ThreadName=Thread-2;ClassName=com.sun.messaging.jms.ra.DirectConnection;MethodName=_unsetClientID;|MQJMSRA_DC1101: connectionId=7032438472106962688:_unsetClientID():|#]

[#|2013-03-20T14:10:06.796+0100|FINE|glassfish3.1.2|javax.jms.ConnectionFactory.mqjmsra|_ThreadID=42;_ThreadName=Thread-2;ClassName=com.sun.messaging.jms.ra.DirectConnectionFactory;MethodName=createConnection;|MQJMSRA_DCF1101: createConnection():|#]

[#|2013-03-20T14:10:06.796+0100|FINE|glassfish3.1.2|javax.jms.ConnectionFactory.mqjmsra|_ThreadID=42;_ThreadName=Thread-2;ClassName=com.sun.messaging.jms.ra.DirectConnectionFactory;MethodName=createConnection;|MQJMSRA_DCF1101: createConnection(u,p):username=guest|#]

[#|2013-03-20T14:10:06.796+0100|FINE|glassfish3.1.2|javax.jms.Connection.mqjmsra|_ThreadID=42;_ThreadName=Thread-2;ClassName=com.sun.messaging.jms.ra.DirectConnection;MethodName=setExceptionListener;|MQJMSRA_DC1101: connectionId=7032438472106962688:setExceptionListener()|#]

[#|2013-03-20T14:10:06.796+0100|WARNING|glassfish3.1.2|javax.jms.Connection.mqjmsra|_ThreadID=42;_ThreadName=Thread-2;|MQJMSRA_DC2001: Unsupported:setExceptionListener():inACC=false:connectionId=7032438472106962688|#]

[#|2013-03-20T14:10:06.796+0100|FINE|glassfish3.1.2|javax.jms.Connection.mqjmsra|_ThreadID=42;_ThreadName=Thread-2;ClassName=com.sun.messaging.jms.ra.DirectConnection;MethodName=_unsetClientID;|MQJMSRA_DC1101: connectionId=7032438472106962688:_unsetClientID():|#] 
```

我在谷歌上没有找到任何东西……有人帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T20:05:26.680

原因是`${GLASSFISH_HOME}/glassfish/domains/domain1/lib`在`Milestone`状态下部署的 Java 库。回到最新版本解决了这个问题。

# bash - 如何使用标志的可选参数创建 bash 脚本

> ID：15524839
> 
> 赞同：9
> 
> 时间：2013-03-20T13:24:06.830
> 
> 标签：bash, shell

我正在尝试创建一个脚本，该脚本将带有一个带有可选选项的标志。使用 getopts 可以在标志之后指定一个强制参数（使用冒号），但我想保持它是可选的。

它会是这样的：

```
./install.sh -a 3 
```

或者

```
./install.sh -a3 
```

其中“a”是标志，“3”是 a 后面的可选参数。

提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-20T13:34:18.613

外部程序通过`getopt`在选项名称中添加双冒号来允许选项具有单个可选参数。

```
# Based on a longer example in getopt-parse.bash, included with
# getopt
TEMP=$(getopt -o a:: -- "$@")
eval set -- "$TEMP"
while true ; do
   case "$1" in
     -a)
        case "$2" in 
          "") echo "Option a, no argument"; shift 2 ;;
          *) echo "Option a, argument $2"; shift 2;;
        esac ;;
     --) shift; break ;;
     *) echo "Internal error!"; exit 1 ;;
   esac
done 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T13:58:13.100

以下是没有的`getopt`，它需要一个带有 -a 标志的可选参数：

```
for WORD; do
        case $WORD in
            -a?)  echo "single arg Option"
                SEP=${WORD:2:1}
                echo $SEP
                shift ;;
            -a) echo "split arg Option"
                if [[ ${2:0:1} != "-" && ${2:0:1} != ""]] ; then
                 SEP=$2
                 shift 2
                 echo "arg present"
                 echo $SEP
                else
                 echo "optional arg omitted"
                fi ;;
            -a*) echo "arg Option"
                SEP=${WORD:2}
                echo $SEP
                shift ;;
            -*) echo "Unrecognized Short Option"
                echo "Unrecognized argument"
            ;;
        esac
done 
```

其他选项/标志也可以轻松添加。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-20T13:29:56.480

使用 getopt 功能。在大多数系统上，`man getopt`将为它生成文档，甚至在脚本中使用它的示例。从我系统上的手册页：

以下代码片段显示了如何处理可以采用选项 -a 和 -b 以及需要参数的选项 -o 的命令的参数。

```
 args=`getopt abo: $*`
       # you should not use `getopt abo: "$@"` since that would parse
       # the arguments differently from what the set command below does.
       if [ $? != 0 ]
       then
               echo 'Usage: ...'
               exit 2
       fi
       set -- $args
       # You cannot use the set command with a backquoted getopt directly,
       # since the exit code from getopt would be shadowed by those of set,
       # which is zero by definition.
       for i
       do
               case "$i"
               in
                       -a|-b)
                               echo flag $i set; sflags="${i#-}$sflags";
                               shift;;
                       -o)
                               echo oarg is "'"$2"'"; oarg="$2"; shift;
                               shift;;
                       --)
                               shift; break;;
               esac
       done
       echo single-char flags: "'"$sflags"'"
       echo oarg is "'"$oarg"'" 
```

此代码将接受以下任何等效项：

```
 cmd -aoarg file file
       cmd -a -o arg file file
       cmd -oarg -a file file
       cmd -a -oarg -- file file 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-20T13:32:09.843

在 bash 中有一些隐式变量：

```
 $#: contains number of arguments for a called script/function

    $0: contains names of script/function
    $1: contains first argument
    $2: contains second argument
    ...
    $n: contains n-th argument 
```

例如：

```
 #!/bin/ksh

    if [ $# -ne 2 ]
    then
        echo "Wrong number of argument - expected 2 : $#"
    else
        echo "Argument list:"
        echo "\t$0"
        echo "\t$1"
        echo "\t$2"
    fi 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-20T13:50:02.967

我的解决方案：

```
#!/bin/bash
count=0
skip=0
flag="no flag"
list=($@) #put args in array
for arg in $@ ; do #iterate over array
    count=$(($count+1)) #update counter
    if [ $skip -eq 1 ]; then #check if we have to skip this args
        skip=0
        continue
    fi
    opt=${arg:0:2} #get only first 2 chars as option
    if [ $opt == "-a" ]; then #check if option equals "-a"
       if [ $opt == $arg ] ; then #check if this is only the option or has a flag
            if [ ${list[$count]:0:1} != "-" ]; then #check if next arg is an option
                skip=1 #skip next arg
                flag=${list[$count]} #use next arg as flag
            fi
       else
            flag=${arg:2} #use chars after "-a" as flag
       fi 
    fi
done

echo $flag 
```

# video.js - 无法使用 Windows XP 和 IE8 播放视频

> ID：15524840
> 
> 赞同：0
> 
> 时间：2013-03-20T13:24:08.103
> 
> 标签：video.js

我不能让播放器在带有 win xp 的 IE8 上运行（在带有 win 7 的 IE8 上运行良好）

我有两个“源”标签，一个 ogv 文件和一个 mp4 文件。

使用 ajax 将播放器标签添加到 dom。然后，video-js 播放器加载了`"_V_("videoID", ...`" 如前所述，它适用于较新的配置，因此代码是正确的。

如果不使用ajax将播放器标签添加到dom中，则效果很好。但就我而言，我需要以这种方式添加它们。

我在加载页面时看到的是播放器在那里，大播放按钮在那里。当我点击播放时，我得到了视频的开头然后它停止了。此外，视频的分辨率不是很好，它更小而且在左上角！

看图（黑色是播放器，白色方块是严重缩小的视频）： ![在此处输入图像描述](../Images/9ce0e6d36a5ae388f3af5be58292cd9f.png)

除此之外，我在第 1191 行有一个 javascript 错误：（我试图注释掉该行只是为了看看会发生什么但没有改变）

```
handle.el.style.left = _V_.round(adjustedProgress * 100, 2) + "%"; 
```

使用：版本 3.2.0

谢谢你的帮助

PS：可以听到声音，但是播放时很生涩，CPU达到100％

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T13:51:33.130

发现错误！

加载视频时，我使用了“seekIntro”功能。

当我删除“.addEvent”行时，它工作正常！

```
_V_("videoTag-<%=luo_Video.getId()%>").ready(function(){
    myPlayer = this;
    myPlayer.addEvent("loadeddata", seekIntro);     
});
function seekIntro(){
    myPlayer.currentTime(4);
} 
```

# java - 推迟定时器计划java

> ID：15524849
> 
> 赞同：1
> 
> 时间：2013-03-20T13:24:28.900
> 
> 标签：java, timer, delay, schedule, timertask

在`TIME = 0`，用户调用一个在 10 秒后设置标志的方法。（在`TIME = 10`）

如果用户再次在标志处调用该方法，`TIME = 2`则不应将其设置为`TIME = 10`，而应设置为`TIME = 12`：

```
boolean myFlag; // initializes to false
private Timer timer;

public void setFlag() {
    // remove old timer if there was one
    if (timer != null) { timer.cancel(); timer = null; }

    // set the new timer
    timer = new Timer();
    TimerTask tt = new TimerTask() {
        @Override
        public void run() { myFlag = true; }
    };
    timer.schedule(tt, 10000);
} 
```

有没有更简洁的方法来实现这个“更新调度时间”模型？例子值得赞赏。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-20T13:53:52.993

我会简单地保持不变，但几乎没有改变。
始终将变量声明为应在首次使用时声明和初始化变量。

```
public void setFlag() {
    Timer timer;
    timer = new Timer();
    // remove old timer if there was one
    if (timer != null) { timer.cancel(); }

    // set the new timer
    TimerTask tt = new TimerTask() {
        @Override
        public void run() { setFlag(); }
    };
    timer.schedule(tt, 10000);
} 
```

# ios - addAnnotation 崩溃

> ID：15524857
> 
> 赞同：1
> 
> 时间：2013-03-20T13:24:43.010
> 
> 标签：ios, objective-c, xcode, crash, mkmapview

我的项目崩溃了。我使用 MKMapView，有时它会在 addAnnotation(s) 方法中崩溃。

我从 XCode 收到消息说崩溃

```
method _insert(objc_object*, MKQuadTrieNode*, MKQuadTrie*) 
```

请帮我。

请看下图![http://cl.ly/image/0y2U1p052E3l](../Images/7fa2797206f5ac4e570aee53366e7ac8.png)

PS Crash 并不总是被复制。它在 100 多个注释后被复制，有时在 300 或 500 多个注释之后被复制。这个对象是从服务器返回的，我检查它的坐标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T13:28:20.830

Enable Zombies in your project.

Press `CMD`+`<` and select **Enable Zombie Object** in **Diagnostic** tab.

Now your are able to see what's wrong.

hope this help.

# javascript - 如何让月份名称显示在循环返回中

> ID：15524860
> 
> 赞同：1
> 
> 时间：2013-03-20T13:24:49.083
> 
> 标签：javascript, loops, for-loop

我正在学习 JS 并且无法弄清楚这一点。我想问一下你们中是否有人能发现我的错误，为什么我的循环结果以“未定义”而不是“十二月”的形式出现了 12 次。请帮忙！

谢谢

```
window.onload = function() {
document.getElementById("months").innerHTML = getMonth(12);   
};

for(var month=0; month < 12; month++)
{

document.getElementById("months").innerHTML = document.getElementById("months").innerHTML + "<br/>" + month + getMonth(month); 
}

function getMonth(month) {
    var monthName;
    if (month == 12) {
        monthName = "December";
    }
    return monthName;
} 
```

[http://jsfiddle.net/priswiz/KufcA/](http://jsfiddle.net/priswiz/KufcA/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T13:27:32.023

因为您的方法`December`仅在其参数等于 12 时才返回，而`month`变量仅在循环中断时才变为 12（遵守`month < 12`条件）。调整你的方法...

```
if (month == **11**) { 
```

... 将在此列表的末尾为您提供 12 月。

说了这么多，我强烈建议使用已建立的库（例如[**Moment.js**](http://momentjs.com/)）来处理日期。这将为您节省大量时间和精力。)

作为旁注，我会先构建整个 'monthes-string'，然后才将其用作`innerHTML`. DOM 操作要谨慎使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T13:26:51.207

十二月是第 11 个月。它从 0 开始

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T13:28:30.390

`month`正在从`0`to递增`11`（它在到达 之前停止`12`）。由于`month`传递给的值`getMonth`是 never `12`，因此返回`monthName`的值始终是未定义的。

相反，您想要的是一种将月份数字映射到名称的方法。例如：

```
function getMonth(month) {
    var monthStr = ['January', 'February', ... ];
    return monthStr[month];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T13:28:41.153

我更新了你的 jsfiddle ......基本上：

```
for(var month=1; month < 13; month++) 
```

从 1 到 12 有几个月

和

```
var monthName=""; 
```

避免“未定义”

# php - 使用 mysqli_query 和 mysqli_fetch_row 将 mysql 转换为 mysqli 错误的问题

> ID：15524861
> 
> 赞同：-2
> 
> 时间：2013-03-20T13:24:56.220
> 
> 标签：php, mysqli

这是没有错误的编辑脚本。并对其应用了 2 个修复程序。感谢那些提供部分帮助的人，谢谢。提到代码不清楚或混乱是无关紧要的。鉴于以下大部分内容是 mysql 查询中的常见结构。甚至 mysql 的示例文档也遵循了类似的流程。回复的成员应该从毫无意义的互联网玩笑中否定。它更值得你花时间，我自己也这样做。那些坚持主题并提供帮助的人，我感谢你们。

例如：

$row = mysqli_fetch_row(mysqli_query($con, "SELECT test_table.points FROM test_table WHERE test_table.key = '" . $key . "'")); if ($row[0] > 0){ // 存在

如果为真，$row 将返回非零结果。否则为 0 为假。几乎不需要检查 mysqli_fetch_row 和/或 mysqli_query。由于简单地检查 $row 工作正常。在一般存在条件下，不需要单独检查 mysqli_fetch_row 和/或 mysqli_query。它确实准确地提供了存在/不存在的结果。没有 $result $row $query 只有 $row。

与正常流程的明显偏差是我希望使用 call_user_func。并通过 $_GET 轮询 func 和 params。将更多地关注 PDO。但是， exec 之前的干净代码现在应该可以完成。这是在执行之前清理。

总而言之，代码可以正常工作。并且已经编写了更多来管理 mysql 数据库。从写入、写入块、读取、读取块、删除、删除块。

还应要求收集编号记录。例如，假设您有同一个 John Smith 的 6 条记录。您现在可以整理和扫描这些记录中的差异。要么是你想要的，不想要的，等等。或者如果你只想盲目地为 John Smith 调用这些记录的前 3 个。

* * *

mysqli_fetch_row & mysqli_fetch_row 修复：

**FROM**调用 $con 外部函数，然后按照 mysql 调用。mysqli 中的哪个不能按预期工作。关于 $con 的处理方式，函数没有错误。

**TO**仅使用添加的全局 $con 调用 $con 内部函数。即使为此，也可能最终使用 $GLOBALS。

*结果：在 mysql 中调用 $con 外部函数然后 in 工作正常。在 mysqli 中，它需要在函数中设置全局。即全球$con。或者它失败了。*

* * *

* * *

call_user_func 非关键错误修复：

**FROM** call_user_func($func($_GET['user'],$_GET['key'],$_GET['points'],$_GET['type']));

**TO** call_user_func($func,$_GET['user'],$_GET['key'],$_GET['points'],$_GET['type']);

*结果：两条线都正确执行。以非严重错误执行**。****TO**做同样的事情，但没有以下非关键错误。*

两者的示例输出：user=MY_Name;key=34342$ee56i1;points=1234;type=

* * *

-- 代码被删除作为修复解决了问题 --

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T14:10:17.407

你有几个问题。

1.  `$con`在类外部声明，因此在类内部不可用。您需要将其传递给类（更好的选项），或将其指定为全局（快速+脏选项）。

2.  `mysqli_fetch_row(mysqli_query($con,'...'))`
    这段代码显然是直接从你的旧`mysql_xx()`代码转换而来的，但它不是很好。

    您忽略了由`mysqli_query()`. 这意味着如果失败，它将传递`false`给`mysqli_fetch_row()`函数，然后该函数将失败并返回无意义的错误`expects parameter 1 to be mysqli_result`，而不是实际告诉您查询中的错误是什么。

    问题是，由于我上面的第一点，`$con`没有设置，`mysqli_query()`失败了，这就是为什么你在`mysqli_fetch_row()`.

    理想情况下，您应该将此代码拆分为多行。`mysqli_query()`自行调用，然后进行一些错误检查，然后`mysqli_fetch_row()`仅在您知道查询确实有效时才调用。

希望这有助于解释这里的问题。解决了这两点，你应该就能很好地整理出整个事情了。

一旦你摆脱了这些致命错误，你还应该花时间解决你的代码容易受到 SQL 注入攻击的问题。您当前正在将`$_GET`变量直接传递到查询字符串中，而无需进行任何清理。这将使您的系统非常脆弱且易于破解。您应该考虑使用参数化查询，这是 mysqli 库的一项功能，旨在更轻松地以安全可靠的方式处理 SQL 查询中的变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T13:41:15.140

您正在使用 call_user_func 错误阅读[手册 call_user_func](http://php.net/manual/en/function.call-user-func.php) 第一个参数是回调 - 在您的情况下，它是您的类中的一个函数，所以它应该是这样的：如果您在一个对象中有一个非静态函数：

```
class Test{
    public  function doit($a){
        echo($a);
    }
}

$t = new Test();

call_user_func(array($t,'doit'),'asfaasfs'); 
```

在对象内部的静态函数中：

```
class Test{
    public static function doit($a){
        echo($a);
    }
}    

call_user_func('Test::doit','asfaasfs'); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-20T13:39:33.400

您的课程目前毫无意义，也许坚持编写命令式代码，因为它至少会更干净。

目前，您应该将 $con 传递给您的 MYsql 类以将其自身用作资源，而不是尝试将其作为全局变量进行访问。

您也没有过滤用户的输入，这很危险，可能会导致您网站上的 SQL 注入攻击。

我鼓励你通读这两篇文章，一旦你理解了它们，我也鼓励你简单地切换到使用 PDO 和准备好的语句。这将阻止您的代码当前允许的 SQL 注入攻击。

[http://net.tutsplus.com/tutorials/php/pdo-vs-mysqli-which-should-you-use/](http://net.tutsplus.com/tutorials/php/pdo-vs-mysqli-which-should-you-use/) [http://net.tutsplus.com/tutorials/php/why-you-should-be-使用-phps-pdo-for-database-access/](http://net.tutsplus.com/tutorials/php/why-you-should-be-using-phps-pdo-for-database-access/)

# php - PHP/JS 脚本在 HTML 中不起作用

> ID：15524871
> 
> 赞同：0
> 
> 时间：2013-03-20T13:25:29.347
> 
> 标签：php, javascript, html

我正在向 HTML div 添加一个上传功能，但由于某种原因它不起作用。我还使用添加到 div 的相同脚本创建了一个 php 文件，并执行了 action="upload-page.php"，但它也没有获取 php 页面。可能是什么问题呢？这是代码：

```
<div class="wall-ptype-cnt wall_text" >
__post_wall_text__
<form method="post" action="upload-page.php" enctype="multipart/form-data">
        <input name="filesToUpload[]" id="filesToUpload" type="file" multiple="" />
<script language="javascript" type="text/javascript">
    var input = document.getElementById('filesToUpload');
    var list = document.getElementById('fileList');

    while (list.hasChildNodes()) {
    list.removeChild(ul.firstChild);
    }

    for (var x = 0; x < input.files.length; x++) {

        var li = document.createElement('li');
        li.innerHTML = 'File ' + (x + 1) + ':  ' + input.files[x].name;
        list.append(li);
    }           
</script>
<?php if(count($_FILES['uploads']['filesToUpload'])) {
foreach ($_FILES['uploads']['filesToUpload'] as $file) {

    //do your upload stuff here
    echo $file;

        }
    }
?>
</form>
</div> 
```

为什么 php 页面没有被处理，为什么脚本不能正常工作？我在 upload-page.php 中的脚本与我在 html 中的脚本相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T15:07:59.793

您的代码中有几个错误：

1.  “ `list.removeChild(ul.firstChild);`”应该是“ `list.removeChild(list.firstChild);`”
2.  “ `list.append(li);`”应该是“ `list.appendChild(li);`”

# jquery - 如何使用 jsRender 创建选择列表？

> ID：15524878
> 
> 赞同：0
> 
> 时间：2013-03-20T13:25:42.797
> 
> 标签：jquery, jquery-templates, jsrender

我正在使用 jsRender 并想创建一个`<select>`列出 1 到 10 的数字的标签。

我得到了我想从模型中选择的索引。

即创建这样的下拉列表：

```
<select name="sets">
            <option value="1">1</option>
            <option value="2" selected="selected">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="7">7</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
</select> 
```

模型有数字“2”的地方 - 所以必须选择它。

如何使用 jsRender 实现这一点？

我的模型类似于 { selected: 2 }

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T13:48:22.197

此代码应该按照您的要求执行：

```
// get array of 10 numbers
// you coud use something like var ary = [0,1,2,3,4,5,6,7,8,9], for loop, or wathever you want
var ary = $.map(Array(10), function(element, index) {return index});
var your_data = { selected: 2 };
// call renderer
$("#items").html($( "#one-select" ).render(ary, (function(model) {
    return {
        isSelected: function(number) {
            return number==model.selected ? 'selected="selected"' : ''
        }
    }
})(your_data)
)) 
```

模板在哪里

```
<script id="one-select" type="text/x-jsrender">
  <option value="{{>#data + 1}}" {{:~isSelected(#data + 1)}}>{{>#data + 1}}</option>
</script> 
```

这是关于 jsfiddle 的工作示例：http: [//jsfiddle.net/gW2vD/](http://jsfiddle.net/gW2vD/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-05T12:42:08.900

或者，您可以做一个小技巧，这在在 rails 中使用 HAML 时很有帮助：

```
%script{ id: "template_list_additional_attributes_table_types", type: "text/x-jsrender"}
  %select
    ="{{for items}}"
    %option{value: "{{:value}}", 'data-selected'=> "{{:selected}}"}
      ="{{:display}}"
    ="{{/for}}" 
```

在你的 js 中

```
Wa.ListAddionalAttributes.prototype.select_for_table = function (aa, pos) {
    var self = this;

    var items = _(self.aa_types).map(function (type, index) {
        return {display: type.display, selected: (type.option_value==aa.type ? 'true selected="selected"' : 'false '), value: type.option_value}
    });

    var rendered = $("#template_list_additional_attributes_table_types").render(
        {
            items: items}
    );

    return rendered;
}; 
```

请注意，在我的示例中，模板位于完整的选择框中。

# string - 当值是数字或字符串时，如何使用 awk 和 printf 格式化列

> ID：15524879
> 
> 赞同：0
> 
> 时间：2013-03-20T13:25:43.303
> 
> 标签：string, awk, formatting, printf, numeric

我有以下文件，当值为数字时，我想在其中用零填充，但在值为字符串时保持原样：

```
cat test.txt 
2032
12
XXXXX
507
334 
```

这仅适用于数值，字符串被忽略：

```
awk '{printf "%05d\n",$1}' test.txt 
02032
00012
00000
00507
00334 
```

我可以有条件得到它，但有没有更简单的方法？

```
awk '{if ($1 ~ /^[0-9]+$/) printf "%05d\n",$1; else printf "%s\n",$1}' test.txt 
02032
00012
XXXXX
00507
00334 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T14:08:03.320

我认为您的 awk 解决方案还可以。如果您的“**更简单**”意味着“**更短**”：

```
awk '$0*1==$0{$0=sprintf("%05d",$0)}1' file 
```

或者

```
awk '/^[0-9]+$/{$0=sprintf("%05d",$0)}1' file 
```

或者

```
awk '$0*1==$0{printf("%05d\n",$0);next}1' file 
```

或者如果您确定文件中没有空行：

```
awk '$0=$0*1==$0?sprintf("%05d",$0):$0' file 
```

在上面的示例中，我使用了 $0，而不是 $1，因为在您的输入示例中，只有一列。

# angularjs - 禁用angularjs中的链接？

> ID：15524881
> 
> 赞同：1
> 
> 时间：2013-03-20T13:25:51.330
> 
> 标签：angularjs

就我而言，我想链接用户

```
 #/page/{{type}}/{{uservalue}} 
```

类型是单选按钮，用户值是用户编写的内容。在指定两个值之前，如何使此链接不可点击？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T13:40:54.717

您可以在范围内定义链接点击处理程序：

```
$scope.gotoUser = function (event, type, uservalue) {
  if (event) event.preventDefault();
  if (type && uservalue) {
    $location.path('/user/' + type + '/' + uservalue);
  } else {
    return false;
  }
} 
```

然后在html中：

```
<a ng-click="gotoUser($event, type, uservalue)"></a> 
```

也许有人可以猜测保留链接`href`属性的更好方法。

# php - Predis Null 批量回复

> ID：15524884
> 
> 赞同：2
> 
> 时间：2013-03-20T13:25:53.997
> 
> 标签：php, redis, watch, reply, predis

嘿伙计们！我正在对 Predis 进行乐观锁定。问题是 Redis 文档说，当被监视的键​​被修改时，执行返回一个“Null Multi-bulk reply”。它在 Predis 中看起来如何？可悲的是，我没有找到任何有用的 Pedis 文档（不包括非常基本的教程）。

这是我的代码目前的样子：

```
private function updateUrlMaxProcessingTime($time, $hoursSinceUnixEpoch) {
    //Save the key and the field. They can change anytime because of the timestamp.
    $key = $this->statisticsConfig->getKeyFromDataName(StatisticsEnum::URL_MAX_PROCESS_TIME, $hoursSinceUnixEpoch);
    $field = $this->statisticsConfig->getFieldFromDataName(StatisticsEnum::URL_MAX_PROCESS_TIME, $hoursSinceUnixEpoch);

    //Update the max url processing time if necessary.
    $this->redis->watch($key);

    $val = $this->redis->hget($key, $field);
    if ($val < $time) {
        $this->redis->multi();
        $this->redis->hset($key, $field, $time);
        $result = $this->redis->exec();

        //TODO: fix this
        if ($result != null && $result[0] != null && $result[0] != -1) {
            return true;
        } else {
            return false;
        }
    } else {
        $this->redis->unwatch();
        return true;
    }
} 
```

只要它返回false，我就会调用该函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T19:18:25.903

Redis 返回的 null 多批量回复被简单地转换为`NULL`Predis，因此当客户端从而`EXEC`不是数组返回它时，这意味着事务已被服务器中止。在您的脚本中，您应该只检查是否`$result === null`（注意严格比较）以安全地捕获中止的事务。

或者，您可以对方法公开的事务使用更高级别的抽象，而不是直接使用Predis ，其`MULTI`方式类似于[本示例](https://github.com/nrk/predis/blob/v0.8.3/examples/MultiExecTransactionsWithCAS.php)中使用检查和设置和可选的自动重试的方式计算客户端抛出异常后中止的事务。`EXEC``Predis\Client::multiExec()`

# django - 在geodjango中组合（联合）多面体的问题

> ID：15524885
> 
> 赞同：2
> 
> 时间：2013-03-20T13:25:58.320
> 
> 标签：django, postgis, geodjango, geos

我正在使用 geodjango 和 postgis (1.x)，组合（联合）多面体列表的最佳方法是什么。

在我认为效率很低的情况下，我正在像这样循环低谷

```
combined = multipolygon
for item in items:
    combined = combined.union(item.geom)  #geom is a multipolygon 
```

通常这工作正常，但我经常收到错误错误检查从 GEOS C 函数“GEOSUnion_r”返回的几何时遇到的错误。

如果有帮助，这是抛出错误的项目的 geo json 版本

```
{ "type": "MultiPolygon", "coordinates": 
[ [ [ [ -80.077576, 26.572225 ], 
      [ -80.037729, 26.571180 ], 
      [ -80.080279, 26.273744 ], 
      [ -80.147464, 26.310066 ], 
      [ -80.152851, 26.455851 ], 
      [ -80.138560, 26.538013 ], 
      [ -80.077576, 26.572225 ] 
] ] ] 
} 
```

有人有什么想法吗？最终目标是找到属于这个 n 多边形列表的所有位置（另一个表）（使用坐标__within=combined_area）

此外，多边形在 geodjango 管理员的地图上显示得很好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T16:13:25.397

您始终可以使用[Union](https://docs.djangoproject.com/en/dev/ref/contrib/gis/geoquerysets/#django.contrib.gis.db.models.Union)聚合方法。这应该更有效率，因为一切都是在数据库级别上计算的，这意味着您不必在 Python 中循环。

```
combined_area = FooModel.objects.filter(...).aggregate(area=Union('geom'))['area']
final = BarModel.objects.filter(coordinates__within=combined_area) 
```

# mysql - 来自第一和第三的三表连接数据

> ID：15524890
> 
> 赞同：1
> 
> 时间：2013-03-20T13:26:14.047
> 
> 标签：mysql, join

我将三个数据库表（MySQL）简化为以下信息：

```
===============
member
---------------
id
FirstName
=============== 
```

member.id = quote_details.member_id

```
===============
quote_details
---------------
member_id
insurer_id
=============== 
```

quote_details.insurer_id =insurer.id

```
===============
insurer
---------------
id
Name
=============== 
```

我想输出的是`member.FirstName`and `insurer.Name`，所以我知道我需要在所有表之间连接 - 即 member > quote_details 然后 quote_details > insurance。不过，我正在为连接类型而苦苦挣扎，并希望有人能够为我指明正确的方向。

提前感谢您的任何回复。

问候，

尼尔

编辑以澄清：

我已经尝试`INNER JOIN`过这三个，但它返回了一个包含被查询成员名字的所有保险公司的列表：

```
==========================
FirstName | Insurer
--------------------------
Test      | Insurer One
Test      | Insurer Two
Test      | Insurer Three
========================== 
```

因为我只需要分配给会员报价的实际保险公司。我希望这有助于澄清一些事情。

编辑以添加示例数据：

```
===================
member
-------------------
id | FirstName
- - - - - - - - - -
 1 | Test
 2 | John
 3 | Jane
===================

=======================
quote_details
-----------------------
member_id | insurer_id
- - - - - - - - - - - -
        1 |          1
=======================

===================
insurer
-------------------
id | Name
- - - - - - - - - -
 1 | Insurer One
 2 | Insurer Two
 3 | Insurer Three
=================== 
```

这希望现在可以提供所有清晰度:¬)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T13:28:12.467

Basically, an `INNER JOIN` will suffice your needs if both columns in table `quote_details` are *non-nullable* columns.

```
SELECT  b.FirstName MemberName,
        c.Name InsurerName
FROM    quote_details a
        INNER JOIN member b
            ON a.member_ID = b.id
        INNER JOIN insurer c
            ON a.insurer_ID = c.ID 
```

To further gain more knowledge about joins, kindly visit the link below:

*   [Visual Representation of SQL Joins](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T13:38:43.803

您的数据设置为允许会员拥有多家保险公司（反之亦然）。如果您希望所有保险公司都在同一行，则需要进行聚合：

```
select m.FirstName, group_concat(i.Name separator ', ') as Insurers
from member m inner join
     quote_details qd
     ON qd.member_ID = m.id inner join
     insurer i
     ON qd.insurer_ID = i.ID
group by m.FirstName 
```

给表别名时，使用合理的缩写而不是“a”、“b”、“c”等。合理的缩写使查询更容易理解。

如果您的成员没有保险公司，他们将不会出现在输出中。如果您想要所有这些，请使用`left outer join`：

```
select m.FirstName, group_concat(i.Name separator ', ') as Insurers
from member m left outer join
     quote_details qd
     ON qd.member_ID = m.id left outer join
     insurer i
     ON qd.insurer_ID = i.ID
group by m.FirstName 
```

如果您希望它们在不同的行上：

```
select m.FirstName, i.Name
from quote_details qd inner join
     member m
     ON qd.member_ID = m.id inner join
     insurer i
     ON qd.insurer_ID = i.ID 
```

# jsp - 在servlet中单击按钮后出现空指针异常

> ID：15524897
> 
> 赞同：1
> 
> 时间：2013-03-20T13:26:30.097
> 
> 标签：jsp, servlets, jqgrid, nullpointerexception

我只是使用按钮将控制从 jsp 传递给 Servlet。但是`NullPointerException`当我单击提交按钮时，我在评论的行中进入 servlet。请告诉我错误。
提前谢谢。

这是我的 Jsp 代码

```
<form action="JQGridServlet">
    <input type="submit" name="submit" value="submit"/>
</form> 
```

这是我的 Servlet 代码

```
 public class JQGridServlet extends HttpServlet 
 {
  protected void processRequest(HttpServletRequest request, HttpServletResponse               

 response) throws Exception {        
    PrintWriter out = response.getWriter();
    IPConverter conv=new IPConverter();

    System.setProperty("log4j.defaultInitOverride","true");
    LogManager.resetConfiguration();
    LogManager.getRootLogger().addAppender(new NullAppender());

      try {

   //Null  Exception at this line            

        if (request.getParameter("action").equals("fetchData"))     ///////Exception
        {
            response.setContentType("text/xml;charset=UTF-8");                

            Object o = request.getAttribute("page");
            System.out.println("----------------------o="+o);
            String status = request.getParameter("status");

            String rows = request.getParameter("rows");
            String page = request.getParameter("page");
            if(request.getParameter("submit")!=null)
            {
            System.out.println(request.getParameter("submit"));
            }
            //  String KeyName=request.getParameter("KeyName");
            //System.out.println(KeyName);
            int totalPages = 0;
            int totalCount = 58000;

            if (totalCount > 0) {
                if (totalCount % Integer.parseInt(rows) == 0) {
                    totalPages = totalCount / Integer.parseInt(rows);
                } else {
                    totalPages = (totalCount + Integer.parseInt(rows) - 1) /     

              Integer.parseInt(rows);
                }

            } else {
                totalPages = 0;
            }

            out.print("<?xml version='1.0' encoding='utf-8'?>\n");
            out.print("<rows>");
            out.print("<page>" + request.getParameter("page") + "</page>");

            out.print("<total>" + totalPages + "</total>");
            out.print("<records>" + 58000 + "</records>");

            EventQuery eq=new EventQuery();
            int firstRecord = (Integer.parseInt(page) - 1)  
    *Integer.parseInt(rows);
            int lastRecord = Math.min(firstRecord + Integer.parseInt(rows), totalCount);
            List<ColumnSlice<String, Long>> row=eq.query(Integer.parseInt(request.getParameter("page")),Integer.parseInt(rows));

            for (int i=firstRecord,j=0;i<lastRecord;i++,j++) {

                out.print("<row id='" + i + "'>");
                out.print("<cell>" + (i+1) + "</cell>");
                out.print("<cell>" + row.get(j).getColumnByName("USERIDEN").getValue() +"</cell>");
                 out.print("<cell>" + conv.convert(row.get(j).getColumnByName("SOURCEIP").getValue()) +"</cell>");

                out.print("<cell>" + row.get(j).getColumnByName("BYTESENT").getValue()+"</cell>");
                out.print("<cell>" + row.get(j).getColumnByName("BYTERECV").getValue()+"</cell>");
                //out.print("<cell><![CDATA[<a href='ViewStd.jsp'>View</a>]]></cell>");
                out.print("</row>");
                //srNo++;                
            }
            out.print("</rows>");
        }

    } 
      catch(Exception e)
      {
          e.printStackTrace();  
      }
      finally {
        out.close();
    }
} 

@Override
protected void doGet(HttpServletRequest request, HttpServletResponse response)
throws ServletException, IOException {
    try {
        processRequest(request, response);                 ///////Exception
       } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 

@Override
protected void doPost(HttpServletRequest request, HttpServletResponse response)
throws ServletException, IOException {
    try {
        processRequest(request, response);
    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}

@Override
public String getServletInfo() {
    return "Short description";
}

 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T13:29:48.983

发生异常是`request.getParameter("action")`因为`null`. `action`它为空，因为您的表单中没有命名字段。

如果您将表单修改为：

```
<form action="JQGridServlet">
 <input name="action"></input>
 <input type="submit" name="submit" value="submit"/>
</form> 
```

当然，命名的表单元素的类型`action`取决于您的逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T13:29:40.720

`if`在您的语句中首先添加空检查：

```
 if (request.getParameter("action") != null && request.getParameter("action").equals("fetchData")) {

 } 
```

# php - tmp 文件夹中的 sess_xxx 但没有会话

> ID：15524899
> 
> 赞同：0
> 
> 时间：2013-03-20T13:26:36.350
> 
> 标签：php, session, tmp

我将 PHP 用于我的 Web 服务，它根本不使用任何`session_xx`函数，但我仍然在 中看到由 Web 服务用户生成的新`sess_xxxxxx`文件。`/tmp`

关于如何找到创建这些的原因以及如何摆脱它们的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T13:30:34.853

您可能已`session.auto_start`在您的 ini 配置文件中启用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T17:54:42.380

找到了原因，似乎一些 3rd 方库正在打开一个会话（facebook），并且由于我不再需要它，我注释掉了它的用法并且不再有会话:)

# python - Python中树的递归函数

> ID：15524902
> 
> 赞同：12
> 
> 时间：2013-03-20T13:26:51.583
> 
> 标签：python, recursion, tree

我正在尝试在 Python 中创建一个函数，该函数采用树的任意节点，并根据给出的节点填充列表列表。

鉴于以下绘制得很糟糕的树：

![树](../Images/a87b2809c831bfe8a3e959999c0455d1.png)

例如，如果我们从节点 5 开始，我们应该得到：

*   包含具有相同父节点的所有节点的列表，包括我们从（4 和 5）开始的那个
*   任何子节点，但不是它们的子节点 (6)。
*   父节点和具有相同父节点的任何父节点，以及它们的父节点等，直到我们到达根节点，但不包括根节点（在这种情况下只有 2 和 3，但如果树更深，我们开始更低，这里会有更多。

并且节点应该最终出现在一个列表列表中，每个深度一个列表。

python中的节点：

```
nodes = [
    {'id': 1, 'parent': None},
    {'id': 2, 'parent': 1},
    {'id': 3, 'parent': 1},
    {'id': 4, 'parent': 2},
    {'id': 5, 'parent': 2},
    {'id': 6, 'parent': 5},
    {'id': 7, 'parent': 6},
    {'id': 8, 'parent': 3}
] 
```

我们只能看到父母，而不是孩子，但遗憾的是，这是我必须使用的数据格式。

因此，如果我们选择节点 5，我们希望得到一个看起来像这样的节点列表：

```
nl = [
    [{'id': 6, 'parent': 5}],
    [{'id': 4, 'parent': 2}, {'id': 5, 'parent': 2}],
    [{'id': 2, 'parent': 1}, {'id': 3, 'parent': 1}],
] 
```

这是我到目前为止的代码。我认为递归函数可能是最简单的方法。不幸的是，它似乎并没有像我认为的那样做，显然我做错了什么。而且这段代码甚至没有考虑获取我根本不完全确定如何处理的子节点，除了可能会更容易处理之后。

```
node_list = []

def pop_list(nodes=None, parent=None, node_list=None):
    if parent is None:
        return node_list
    node_list.append([])
    for node in nodes:
        if node['parent'] == parent:
            node_list[-1].append(node)
        if node['id'] == parent:
            parent = node['parent']
    return pop_list(nodes, parent, node_list)

print pop_list(nodes, 5, node_list) 
```

这是输出：

```
[[], [{'id': 3, 'parent': 1}], []] 
```

不完全确定我在哪里出错了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T14:16:30.373

问题就在这里

```
 if node['id'] == parent:
        parent = node['parent'] 
```

当前`parent`将被其父级覆盖。

此外，您应该`return node_list`在函数末尾添加，或`node_list`用作结果。

```
def pop_list(nodes=None, parent=None, node_list=None):
    if parent is None:
        return node_list
    node_list.append([])
    for node in nodes:
        if node['parent'] == parent:
            node_list[-1].append(node)
        if node['id'] == parent:
            next_parent = node['parent']

    pop_list(nodes, next_parent, node_list)
    return node_list

>>> print pop_list(nodes, 5, node_list)
[[{'id': 6, 'parent': 5}], [{'id': 4, 'parent': 2}, {'id': 5, 'parent': 2}], [{'id': 2, 'parent': 1}, {'id': 3, 'parent': 1}]] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-01T12:56:13.353

```
def processNode(bp, space=''):
    if ('name' in bp[0].keys() ):
        print( space + bp[0]['name'])
    if ('subNodesTitle' in bp[0].keys()):
        print( bp[0]['subNodesTitle'])
        processNode( bp[0]['subNodes'],space=space+' ')
    if (len(bp) > 1):
        processNode( bp[1:],space=space )
processNode(root) 
```

这个函数可以通过一个不平衡的树递归，

# apache - Apache 中的手动内容压缩

> ID：15524907
> 
> 赞同：2
> 
> 时间：2013-03-20T13:27:07.397
> 
> 标签：apache, mod-rewrite, gzip, mod-deflate

我需要 Apache 上的手动压缩解决方案。我的目标：

*   在我的服务器上提供 gzip 编码的内容以及未压缩的内容。
*   文件是预压缩的。
*   并非所有文件都经过压缩处理。我想指定这些文件，并且选择不是基于类型（扩展名）的。
*   提供了许多内容类型（自定义类型），并且不时出现新类型。此外，文件扩展名不能确定它是否会被压缩（**!!!**）。
*   保持开销最小（额外的标头越少越好）。
*   始终提供 Content-Length 标头并且从不发送分块响应（这会取消资格`mod_deflate`）。

* * *

# 理想的功能

理想的功能应该是这样的：

*   Web 客户端请求文件`file.ext`。
*   如果`file.ext.gz`服务器上存在：
    *   `Content-Encoding`设置为`gzip`。
    *   `Content-Type`设置为`file.ext`( **!!!** ) 的值。
    *   服务器返回`file.ext.gz`。
*   否则，`file.ext`返回。

我测试了很多解决方案，[这篇文章](http://www.cravediy.com/59-Simple-gzip-Support-for-Apache-with-mod_rewrite.html)包含了一个很好的编译，但是标有（**!!!**）的部分总是有问题。我有数十万个文件和数十种内容类型，因此我正在寻找一些自动解决方案，而无需`ForceType`为每个文件添加。

* * *

# 我试过的

## 多视图

这是如何工作的：

*   将文件重命名`file.ext`为`file.ext.en`
*   创建文件`file.ext.gz`
*   配置阿帕奇：

    ```
    选项 + 多视图
    AddEncoding x-gzip .gz
    删除类型 .gz

    ```

几乎可以按预期工作，只是它要求原始文件 ( `file.ext`) 不存在，并且它添加了许多（对我来说无用）无法删除的标题（`TCN`以及`Content-Language`更多）（`Header unset`不会删除它们）。

## 改写

这是如何工作的： - 创建`file.ext.gz`文件。- 配置阿帕奇：

```
<pre>
RewriteEngine On
RewriteCond %{HTTP:Accept-Encoding} gzip
RewriteCond %{REQUEST_FILENAME}.gz -f
RewriteRule (.*)$ $1.gz [L]
AddEncoding x-gzip .gz

<Files file.ext>
    ForceType my-custom/mime-type
</FilesMatch>
</pre> 
```

这很好用，但`ForceType`每个压缩文件都需要一个。正如我之前所说，我不能依赖扩展，因为并非所有特定类型的文件都会被压缩。

## `mod_deflate`

我没有过多地研究它，问题是如果文件太大，那么它会被分成几块并分块发送并且`Content-Length`不提供。增加压缩缓冲区的大小并不能消除这个问题。

* * *

**是否有可能将 Apache 配置为按我的意愿工作？**

我试图动态获取并将其设置为`Content-Type`，但我没有找到如何做到这一点的方法。`file.ext``file.ext.gz`

# breeze - Breeze.js - QueryLocal - 搜索功能

> ID：15524911
> 
> 赞同：0
> 
> 时间：2013-03-20T13:27:16.633
> 
> 标签：breeze

我想在 WebApi 项目中实现搜索功能。但是如何执行 localQuery？

我试过了：

```
var EntityQuery = breeze.EntityQuery;
var FilterQueryOp = breeze.FilterQueryOp;
var Predicate = breeze.Predicate;    
var manager = new breeze.EntityManager(serviceName); 
```

但是在我的情况下 serviceName 是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T16:23:09.943

任何 serviceName，即“foo”，都应该可以解决问题。只是不要尝试在不将其重置为“真实”的情况下进行远程操作。在远程服务调用实际发生之前，Breeze 不会使用 serviceName，因此这是安全的。

# oauth - 如何编写 Jax-Rs 处理程序来验证请求

> ID：15524912
> 
> 赞同：1
> 
> 时间：2013-03-20T13:27:18.960
> 
> 标签：oauth, request, jax-rs, handler

我想编写一个 Jax-Rs 处理程序，它应该从 REST 客户端获取所有 REST 调用并验证 OAuth 访问令牌并将 http 请求转发到相应的资源类。

我的意思是说，Jax-Rs 处理程序将成为通过验证 Authorization 标头传递的值来处理所有请求的中心位置。

我期待着一个紧急的答复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T20:55:29.520

看看它是如何在[rexsl-page](http://www.rexsl.com/rexsl-page/inset-oauth.html)中完成的。看看两个类，一个用于[Google OAuth](http://trac.rexsl.com/rexsl/browser/rexsl/trunk/rexsl-page/src/main/java/com/rexsl/page/auth/Google.java)，另一个用于[Facebook OAuth](http://trac.rexsl.com/rexsl/browser/rexsl/trunk/rexsl-page/src/main/java/com/rexsl/page/auth/Facebook.java)。您也可以使用整个框架，或者只是复制给定的类。

简而言之，您为所有 JAX-RS 资源创建了一个公共父类。在这个类中，您解析传入`HttpHeaders`并尝试使用加密的身份验证令牌（用户身份）查找 cookie。如果被发现，你什么也不做。如果未找到，则抛出一个`WebApplicationException`将用户重定向到“请登录”页面。

# php - 选择下拉选项时 Jquery 自动填充复选框

> ID：15524920
> 
> 赞同：0
> 
> 时间：2013-03-20T13:27:32.850
> 
> 标签：php, javascript, jquery, loops

我有一个从数据库动态填充的表单。使用 while 循环显示结果。我有一个状态下拉菜单，其中包含三个更改订单状态的选项。然后，用户必须选择一个复选框，以根据所做的选择将订单状态通过电子邮件发送给另一个用户。这目前有效，但是我想通过在选择下拉列表中的选项后将复选框设置为 true 来自动化此过程，而不是手动单击复选框。我生成这些结果的代码如下所示：

```
echo '<select id="order_status" name="order_status['.$i.']" id="id" onchange="showUser(this.value)" >';
    echo '<option value = "Pending"   name="order_status['.$i.']" class = "pending"' . ($row['status'] == 'Pending' ? ' selected=selected' : '') . '>Pending</option>';
    echo '<option value = "Approved"  name="order_status['.$i.']" class = "approved"' . ($row['status'] == 'Approved' ? ' selected=selected' : '') . '>Approved</option>';
    echo '<option value = "Disapproved" name="order_status['.$i.']" class ="disapproved"' . ($row['status'] == 'Disapproved' ? ' selected=selected' : '') . '>Disapproved</option>';
    echo '</select>';
    echo '<td><input type="checkbox" name="order_selected['.$i.']"/></td>';
    echo '</td>'; 
```

其中 order_status 包含选择值，而 order selected 包含用户选择的复选框。如果复选框设置为 true，则会向用户发送一封电子邮件，更新他们的订单状态。我想做这个前端，因为复选框的值不需要永久设置。我的主要问题是知道选择了什么顺序，确保正确的复选框设置为 true。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T13:32:52.010

我会去掉 select 标签中的 onchange 属性

```
echo '<select id="order_status" name="order_status['.$i.']" id="id">';
echo '<option value = "Pending"   name="order_status['.$i.']" class = "pending"' . ($row['status'] == 'Pending' ? ' selected=selected' : '') . '>Pending</option>';
echo '<option value = "Approved"  name="order_status['.$i.']" class = "approved"' . ($row['status'] == 'Approved' ? ' selected=selected' : '') . '>Approved</option>';
echo '<option value = "Disapproved" name="order_status['.$i.']" class ="disapproved"' . ($row['status'] == 'Disapproved' ? ' selected=selected' : '') . '>Disapproved</option>';
echo '</select>';
echo '<td><input type="checkbox" name="order_selected['.$i.']"/></td>';
echo '</td>'; 
```

然后用 jQuery 处理这一切

```
$(document).on('change', 'id', function() {
    if (this.value == "Pending") { //Change to whatever should auto check the box
        $("input[type='checkbox']").prop("checked", true);
    }
}); 
```

# r - 枚举目录并加载txt文件，然后进行一些修改并写回txt

> ID：15524923
> 
> 赞同：0
> 
> 时间：2013-03-20T13:27:37.207
> 
> 标签：r

假设我有一个这样的目录，其中包含 .txt 文件（请注意，每个文件都有相同的上下文但文件名不同）：

```
dir('tstdir')
[1]"file1_err1.txt"
[2]"file2_ree1.txt"
[3]"file_test.txt" 
```

所以要浏览这个目录，我使用了一个 for 循环（可读性示例）：

```
for (i in dir('tstdir')) {
    tst<-read.table(paste('tstdir/',i, sep=''),stringsAsFactors=F)
    DO SOME MODIFICATION (Randomizing the data)
    write.table(tst, file = paste('tst',i,sep='')
} 
```

所以我想为每个 txt 文件做一些事情，而不是将其写回一个带有加载文件的名称 + 数据框名称的文本文件。（我知道如何随机化数据，但例如不需要）

我知道我在重命名数据并将我签名到正确的位置时做错了。我想过一个`if`声明，但想看看是否可以这样做。不幸的是，没有成功，感谢任何帮助/提示

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T13:44:52.153

你想做这样的事情吗？如果没有随机化的例子，很难说这会奏效，但它应该可以......

```
f <- list.files( 'tstdir' , pattern = "*.txt" , full.names = TRUE )

lapply( 1:length(f) , function(x){ 
    dat <- read.table( f[x] , stringsAsFactors = F )

    randomise dat code here

    require( R.utils )
    write.table( dat , file = getAbsolutePath(f[x]) )
    }
) 
```

# javascript - jsRender optional model properties

> ID：15524929
> 
> 赞同：0
> 
> 时间：2013-03-20T13:27:56.293
> 
> 标签：javascript, jquery, jquery-plugins, jsrender

I'd like to have my jsRender templates optionally include an "options" property to provide optional fall-backs if a property is not included; specifically rendering one element if the "options" property is included, or another if it is not. Everything works fine if the model passed in contains the property in question, but even `{{if typeof ~options.someOption !== 'undefined'}}` gives me `Error: Cannot read property 'someOption' of undefined.`

Has anyone dealt with this? If so, how do you handle properties of the model passed in that do no exist?

**EDIT:** This question is really about how to handle missing properties of a model. Given a model with properties A and B, if property B is missing from the model but it is referenced in the template, how can I prevent error messages and handle it's absence elegantly?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T17:07:01.563

您可以利用在 Javascript 中不存在的事物评估为“未定义”的事实，这相当于条件语句中的 false，并在您尝试访问的包含对象和属性周围包裹一个“if”。所以，用你的例子，你会喜欢

`{{if options}}{{if options.someOption}}{{:options.someOption}}{{/if}}{{/if}}`

如果 options 和 someOption 都存在，则模板将使用 options.SomeOption 呈现。否则它什么也做不了。

# android - Drawing line using drawPoint()

> ID：15524931
> 
> 赞同：0
> 
> 时间：2013-03-20T13:27:58.333
> 
> 标签：android, paint

I am trying to draw line in android.But i am not satisfy with that because it doesn't draw full line it draws a dotted line when i move object fastly and it draws a complete line when i move object slowly.Plaese help me why this happenes.I want just complete line not dotted line.My code is here: On Touch event of view:

```
public boolean onTouch(View view, MotionEvent event) {
    // TODO Auto-generated method stub
    final int X = (int) event.getRawX();
    final int Y = (int) event.getRawY();
    switch (event.getAction() & MotionEvent.ACTION_MASK) {
    case MotionEvent.ACTION_DOWN:
        RelativeLayout.LayoutParams lParams = (RelativeLayout.LayoutParams) view
                .getLayoutParams();

        _xDelta = X - lParams.leftMargin;
        Log.e("ACTION DOWN X", "" + Y + "---" + lParams.leftMargin);
        _yDelta = Y - lParams.topMargin;
        Log.e("ACTION DOWN Y", "" + Y + "---" + lParams.leftMargin);

        break;
    case MotionEvent.ACTION_UP:
        break;
    case MotionEvent.ACTION_POINTER_DOWN:
        break;
    case MotionEvent.ACTION_POINTER_UP:
        break;
    case MotionEvent.ACTION_MOVE:
        RelativeLayout.LayoutParams layoutParams = (RelativeLayout.LayoutParams) view
                .getLayoutParams();
        layoutParams.leftMargin = X - _xDelta;
        Log.e("ACTION Move left margin", "" + (X - _xDelta));
        layoutParams.topMargin = Y - _yDelta;
        Log.e("ACTION Move top margin", "" + (Y - _yDelta));
        layoutParams.rightMargin = -250;
        layoutParams.bottomMargin = -250;

        view.setBackgroundColor(random.nextInt());

        view.setLayoutParams(layoutParams);
        draw = new DrawLine(MainActivity.this, X - _xDelta, Y - _yDelta);
        root.addView(draw);

        break;
    }

    root.invalidate();
    return true;
} 
```

And my draw method is like this:

```
@Override
    protected void onDraw(final Canvas canvas) {
        // TODO Auto-generated method stub
        super.onDraw(canvas);
        // paint.setColor(random.nextInt());
        paint.setStyle(Style.STROKE);
        paint.setStrokeWidth(4);
        canvas.drawPoint(startX, startY, paint);

    } 
```

And i also want to know how to clear all the drawing.
Please help me to solve this. Thank you.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T13:42:37.943

那么当你只画点的时候，你怎么期望画一条线呢？触摸事件注册/处理速度不够快，无法在您的手指触摸的每个新像素上触发。使用路径来存储您的点并使用路径中的点绘制一条线/路径。

# django - "No module named balanced_django.middleware"

> ID：15524932
> 
> 赞同：0
> 
> 时间：2013-03-20T13:27:59.853
> 
> 标签：django, balanced-payments

I get the following error when I try to install [https://github.com/balanced/balanced-django](https://github.com/balanced/balanced-django) "No module named balanced_django.middleware"

I followed the instructions provided in the README file.

```
1\. pip install balanced 
```

(after doing source env/bin/activate, I ran pip install backend)

```
2\. MIDDLEWARE_CLASSES += (
    ...
    'balanced_django.middleware.BalancedMiddleware',
    ...
)

3\. BALANCED = {
    'secret': '7b7a51ccb10c11e19c0a026ba7e239a9',
} 
```

What am I doing wrong?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T14:37:32.903

看起来“balanced-django”实际上并不是一个库，而是一个关于如何将 Django 与 Balanced 集成的旧演示。

我找到了您想要的库（并且似乎正在积极开发）：

[https://github.com/balanced/django-balanced](https://github.com/balanced/django-balanced)

# c++ - 从 fork() 调用 main(argc, argv)

> ID：15524934
> 
> 赞同：0
> 
> 时间：2013-03-20T13:28:04.787
> 
> 标签：c++, g++, fork, argv

通过搜索几乎找不到关于调用 main 的内容 - 所以我猜这个问题基本上是“关闭”的。

建议的问题提供了这个[C# 问题“从另一个类调用 Main()”](https://stackoverflow.com/questions/6723558/calling-main-from-another-class)，答案是你没有，使用 Main() 下的子函数并调用它；所以我的假设是同样的答案也适用于 fork()。

```
void somefunction ()
{    
    pid_t  pid; 
    pid = fork();

    if (pid == 0) {

        char *p;
        char *argv[] = { (char*)spawn_count, (char*)gradiant, (char*)i, (char*)(i+spread), p };
        main(5, **argv);
    }
    else if (pid == -1)
       cout << "ERROR: can't fork" << endl;

    else ; //PID == 1,
} 
```

这在 g++ 中编译`"error: 'main' was not declared in this scope"`

问题：

*   范围如何`main(argc, argv)`？我可以[在 Windows](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682425%28v=vs.85%29.aspx)中使用`LPTSTR`.
*   之后`fork()`，要启动孩子`main()`，这是怎么做的？
*   之后`fork()`，在 main 中调用 child 的同一函数中的 child 在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T13:45:18.797

为什么要调用main？你能不能只分叉主要的东西，如下所示：

```
int main()
{
    pid_t  pid; 
    pid = fork();

    if(pid < 0 )
    {
        // Error some issue forking
    }
    if (pid == 0) {
        // Child related processing here
    }
    else {
        // parent related processing here
    }
} 
```

Fork 返回两次，一次为父级，一次为子级，并且在进行 fork 系统调用的同一点。

你可以参考这个链接阅读更多：[http ://www.yolinux.com/TUTORIALS/ForkExecProcesses.html](http://www.yolinux.com/TUTORIALS/ForkExecProcesses.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-05-16T19:25:11.610

对于落入与我相同的陷阱的任何人 - Linux 和 Windows 并行处理的工作方式非常不同。

*   在 Windows 中，您再次调用程序并通过 main() 传递参数
*   在 Linux 中，您调用 fork() 然后从程序中调用您想要的任何函数，就像使用任何其他函数一样。与您通过 fork windows 所经历的“废话”相比，这种方法非常简单。

在了解了这个区别后，我立即从笔记本电脑中删除了 windows 并安装了 Linux :)

# ruby-on-rails - 为什么我不能在一个控制器规范中使用 should_receive 和 assigns？

> ID：15524936
> 
> 赞同：0
> 
> 时间：2013-03-20T13:28:08.477
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rspec

我尝试在控制器中添加`assigns`到我的`update`操作规范

```
it "update the content" do
  Answer.should_receive(:find).with(answer.id.to_s).and_return(answer)
  answer.should_receive(:update_attributes).with("content" => "Changed content")

  put :update, id: answer.id, app_id: app.id, answer: {content: "Changed content"}

  assigns(:answer).content.should eq('Changed content') # explicitly permitted
  response.status.should eq 406
end 
```

但我得到错误：

```
 Failure/Error: assigns(:answer).content.should eq('Changed content') # explicitly permitted

   expected: "Changed content"
        got: "base content"

   (compared using ==) 
```

但是当我评论时：

`#answer.should_receive(:update_attributes).with("content" => "Changed content")`

规范通过。为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T13:35:47.417

很合乎逻辑。

当你这样做时：

```
answer.should_receive(:update_attributes).with("content" => "Changed content") 
```

`update_attributes`没有被解雇。

您可以使用`and_call_original`触发该方法。[见文档](https://www.relishapp.com/rspec/rspec-mocks/v/2-13/docs/message-expectations)。

# macos - perlbrew 将模块迁移到新的 perl 安装，在 Mac OS X 10.7.5 上

> ID：15524940
> 
> 赞同：2
> 
> 时间：2013-03-20T13:28:20.480
> 
> 标签：macos, perl, upgrade, perlbrew

我在 perlmonks 上问了这个问题，并且进展有限，所以我会在这里问。我使用 perlbrew 在 Mac OS X 10.7.5 上安装了 perl 5.16.0，线程化。现在，当我尝试将模块转移到新安装时，它会失败并显示一条我不理解的消息。以下是我使用和输出的命令。

```
$ perlbrew install --as perl-5.16.0t -Dusethreads perl-5.16.0 
```

然后，按照关于 perlmonks 的帖子：

```
$ perldoc -t perllocal | perl -lane'/"Module"/ && print $F[-1]' | sort -u >/tmp/pms

$ perlbrew switch perl-5.16.0t

$ cpanm -v </tmp/pms &>>/tmp/inst.log & tail -f /tmp/inst.log 
```

然后我尝试了这些命令作为一个简单的检查，并得到了我无法理解的输出：

```
$ perl -e 1 -MFile::Find
  dyld: lazy symbol binding failed: Symbol not found: _Perl_Istack_sp_ptr
  Referenced from: /Users/abualiga/perl5/lib/perl5/darwin-thread-multi-2level/auto/Cwd/Cwd.bundle
  Expected in: flat namespace

  dyld: Symbol not found: _Perl_Istack_sp_ptr
  Referenced from: /Users/abualiga/perl5/lib/perl5/darwin-thread-multi-2level/auto/Cwd/Cwd.bundle
  Expected in: flat namespace

  Trace/BPT trap: 5

$ perldoc File::Find
  dyld: lazy symbol binding failed: Symbol not found: _Perl_Istack_sp_ptr
  Referenced from: /Users/abualiga/perl5/lib/perl5/darwin-thread-multi-2level/auto/Cwd/Cwd.bundle
  Expected in: flat namespace

  dyld: Symbol not found: _Perl_Istack_sp_ptr
  Referenced from: /Users/abualiga/perl5/lib/perl5/darwin-thread-multi-2level/auto/Cwd/Cwd.bundle
  Expected in: flat namespace

  Trace/BPT trap: 5 
```

我卸载了 perl-5.16.0t 并删除了文件夹 perlbrew 和 .bash_profile 中的行，所以现在我回到了系统 perl 5.12.3。不过，我想知道如何做到这一点，在我的主目录中有多个 perls，而不必使用 ActiveState。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T21:05:09.890

您是否在默认目录（perl5/perlbrew）中使用默认设置安装了 perlbrew？重新安装 perlbrew 并切换到您喜欢的 perl 并检查以下内容：

首先，你在 perlbrew 中安装了 cpanm 吗？“which cpanm”会告诉你你正在使用哪一个。它应该位于路径以“perlbrew/bin”结尾的目录中。如果没有，你可以安装它

```
perlbrew install-cpanm 
```

此外，您的 bash_profile 中的行是否类似于“source ~/perl5/perlbrew/etc/bashrc”？它是该 perlbrew bashrc 文件的正确路径吗？编辑 bash_profile 后是否重新启动了终端？你的@INC 里有什么？去检查：

```
perl -e 'print join "\n", @INC' 
```

如果 perlbrew 安装正确，@INC 中应该只有 perlbrew 目录的子目录。

从您的错误消息来看，perlbrew perl 似乎正在寻找该模块并找到一个针对位于“/Users/abualiga/perl5/lib”中的另一个 perl 构建的模块，该模块不兼容。Perlbrew perl 的模块通常位于“~/perl5/ **perlbrew** /perls/perl-5.16.3/lib”之类的地方。这意味着您没有为您正在使用的特定 perlbrew perl 正确安装这些模块，或者路径/@INC 有问题。如果是后者，则 perlbrew bashrc 脚本有问题（我知道他们[修复了 perlbrew](http://perlbrew.pl/Release-0.61.html)的最新版本 - 0.61 中的错误）。但是，如果您没有以默认方式安装 perlbrew，那么您可能需要自己修复路径。

此外，将来，如果您想在使用 perlbrew 安装的不同 perls 之间传输模块，[这些说明](http://perlbrew.pl/Reinstall-All-Modules-On-New-Perl.html)可能会有所帮助。

# java - Java, why do my graphics draw out of the the frame/range they should be in?

> ID：15524942
> 
> 赞同：2
> 
> 时间：2013-03-20T13:28:20.930
> 
> 标签：java, swing, graphics, jframe

So, I am making a program that currently draws filled circles of a random size (between 6-9 inclusive) randomly on a JFrame of size 1024x768\. The problem I am having, is that even after I coded in a rule that should ensure that all the circles fall within the 1024x768 JFrame, the circles fall outside of the desired boundaries. Below is the code segment that should generate the correct location for each circle:

```
private static KillZoneLocation generateLocation(){
    int genX,genY;
    int xmax = 1024 - generatedGraphic.getRadius();
    int ymax = 768 - generatedGraphic.getRadius();
    KillZoneLocation location = new KillZoneLocation();
    do{
        genX = generatedGraphic.getRadius() + (int)(Math.random()*xmax);
        genY = generatedGraphic.getRadius() +(int)(Math.random()*ymax);
        location.setXcoord(genX);
        location.setYcoord(genY);
        generatedLocation = location;
    }while(isOverlaping(location));

    return location;
} 
```

generatedGraphic is a global variable from the class containing the method above and returns a number between 6 and 9 inclusive

generatedGraphic.getRadius() returns a random number from this algorithm int radius = 7 + (int)(Math.random()*9); The number has been generated prior by a different method. This method is just a getter. The radius number is not generated every time this method is called.

isOverlaping(locations) just checks to make sure the circle does not overlap another circle that is already placed on the JFrame.

location.set... Those are just setter methods.

I'm thinking this is just a silly logic error, but I still can't seem to figure out why the circles are printing outside of the frame.

I am purposely avoiding posting anymore code because it will confuse you since the program has a much larger scope then I have described and there are a dozen files all interwinded. I debugged this code and realized numbers being returned by: genX = generatedGraphic.getRadius() + (int)(Math.random()*xmax); genY = generatedGraphic.getRadius() +(int)(Math.random()*ymax);

Return numbers out of range.

Draw class:

```
import java.awt.*;
import java.awt.event.*;
import java.awt.geom.*;
import javax.swing.*;

public class KillZoneGUI extends JFrame{

    public KillZoneGUI(){
        setSize(1024,768);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setLocationRelativeTo(null);
        setVisible(true);

    }

    public static void main(String s[]) {
        GenerateKillZone.setup(1024,768);
        new KillZoneGUI();
    }

    public void paint(Graphics g){
        for(Robot r: KillZone.getRobots()){
            g.setColor(r.getGraphic().getColor());
            g.fillOval(
                       r.getLocation().getXcoord(), 
                       r.getLocation().getYcoord(),
                       r.getGraphic().getRadius(),
                       r.getGraphic().getRadius()); 
        }

   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T13:57:15.760

正确的代码应该是

```
genX = (int)(Math.random()*xmax);
genY = (int)(Math.random()*ymax); 
```

请记住，[Graphics2D.fillOval()](http://docs.oracle.com/javase/6/docs/api/java/awt/Graphics.html#fillOval%28int,%20int,%20int,%20int%29)将使用 genX/genY 作为左上角，并且椭圆将扩展 getRadius() 的值。您正在减去半径的大小，然后将其加回两次！一次是在您的 genX/Y 分配中，一次是在您绘制椭圆时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T13:53:18.167

```
int xmax = 1024 - 2 * generatedGraphic.getRadius();
int ymax = 768 - 2 * generatedGraphic.getRadius(); 
```

当您从 generatedGraphic.getRadius(); 开始时 并且可能只达到 xmax/ymax。

然后使用@JasonNichols 的答案，从 (left, top) (0, 0) 开始的 fillOval 到宽度 - 直径。

# android - graphics for android app

> ID：15524948
> 
> 赞同：0
> 
> 时间：2013-03-20T13:28:35.950
> 
> 标签：android, graphics

Hi I have been asked to develop an android app as part of my course. It has been agreed upon that this will be a quiz based app which will make use of graphical animations to provide questions for users to answer.

I have no experience in programming any graphics apart from a few tutorials I have looked at. I am wondering if it is possible to create images in photoshop and then use these as objects that will be manipulated via methods or will all graphics have to be created via coding. Any help in the situation would be greatly appreciated.

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T13:31:23.787

使用[**Android 动画**](http://developer.android.com/training/animation/index.html)。

由于它是一个基于测验的应用程序，您可能对使用[**卡片翻转动画**](http://developer.android.com/training/animation/cardflip.html)感兴趣，卡片的一面显示问题，另一面显示答案。

[Vogella](http://www.vogella.com/articles/AndroidAnimation/article.html)还提供了一篇关于动画的优秀教程。

# wpf - How to get XY coordinates of a control in WPF?

> ID：15524949
> 
> 赞同：0
> 
> 时间：2013-03-20T13:28:36.060
> 
> 标签：wpf, mvvm, controls, coordinates

```
Point relativePoint = myVisual.TransformToAncestor(rootVisual)
                              .Transform(new Point(0, 0)); 
```

this code block is very useful but, I use MVVM therefore the code block is useless for me ?

I wanna to get X & Y without using rootVisual.

Thanks & Best Regards.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-18T14:30:57.763

Window.Left 为您提供 x 坐标，而 window.Top 为您提供 Y 坐标

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T13:57:31.097

我不确定我是否理解你的问题。您根本不想使用 rootVisual 或仅通过 myVisual 间接访问？

像这样的东西：

```
var parent = VisualTreeHelper.GetParent(myVisual) as UIElement;
     Point relativePoint = myVisual.TransformToAncestor(parent)
                          .Transform(new Point(0, 0)); 
```

# android - 为什么通知 URI 不适用于 MergeCursor？

> ID：15524952
> 
> 赞同：2
> 
> 时间：2013-03-20T13:28:44.100
> 
> 标签：android, android-contentprovider, android-contentresolver, android-cursor, android-cursorloader

假设你有一个`CONTENT_URI`内部`ContentProvider`你想要做一些复杂的事情并返回一个 Cursors ( `MergeCursor`) 的组合而不是一个简单的单个`Cursor`.

碰巧的是，如果您将通知设置`URI`在 中`MergeCursor`而不是光标上`MergeCursor`，则通知将不起作用。

初始代码：

```
 Cursor[] cursors = { extraCursorBefore, usersCursor, extraCursorAfter };
            Cursor extendedCursor = new MergeCursor(cursors);
            // Make sure that potential listeners are getting notified
            extendedCursor.setNotificationUri(getContext().getContentResolver(), CONTENT_URI_PEOPLE);
            return extendedCursor; 
```

PS：如果无论如何，有人有其他想法，或者弄清楚为什么这在原版上不起作用`MergeCursor`，那么请分享你的知识。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T13:28:44.100

因此，您需要在结果中`URI`设置`Cursor`通知`MergeCursor`。

实际工作的代码：

```
 Cursor[] cursors = { extraCursorBefore, usersCursor, extraCursorAfter };
            Cursor extendedCursor = new MergeCursor(cursors);
            // Make sure that potential listeners are getting notified
            usersCursor.setNotificationUri(getContext().getContentResolver(), CONTENT_URI_PEOPLE);
            return extendedCursor; 
```

# javascript - TyperError: i 不是函数 (FireBug)

> ID：15524954
> 
> 赞同：0
> 
> 时间：2013-03-20T13:28:54.147
> 
> 标签：javascript, jquery, html, backbone.js

**我的代码：**

```
<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>
    <title>View Initialization</title>

    <script type="text/javascript" src="js/jqyery.js"></script>
    <script type="text/javascript" src="js/underscore.js"></script>
    <script type="text/javascript" src="js/backbone.js"></script>

</head>

<body>
<script>

    SearchView = Backbone.View.extend({
            initialize: function(){
                console.log("View is initialized");
            }
    });

    var search_view = new SearchView();

</script>
</body>
</html> 
```

Firebug 向我显示以下错误：

> 类型错误：我不是函数

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T13:32:46.037

您似乎有语法错误。您需要更换：

```
<script type="text/javascript" src="js/jqyery.js"></script> 
```

和：

```
<script type="text/javascript" src="js/jquery.js"></script> 
```

注意第一个拼写错误`<script>`已被替换（jqyery）。

# sql-server-2008 - 将此 SQL 转换为 HQL？（左连接值而不是列）

> ID：15524960
> 
> 赞同：1
> 
> 时间：2013-03-20T13:29:13.370
> 
> 标签：sql-server-2008, nhibernate, hql, left-join, castle

我正在尝试将此 SQL 转换为 HQL，但我发现无法执行左连接。

```
SELECT
    mdcs_causa.id_causa,
    usuarios.ds_usuario,
    usuarios.setor,
    empresas.ds_empresa,
    itens_controle.id_item_controle,
    itens_controle.ds_item,
    itens_controle.ds_indicador,
    itens_controle.ds_cliente,
    itens_controle.desdobramento,
    itens_controle.auxiliar,
    itens_controle.bmk_nome,
    itens_controle.bmk_vlr,
    m.status,
    m.medido,
    m.medicao,
    m.fca,
    m.am_cronico,
    m.ac_cronico,
    m.ap_cronico,
    m.id_medicoes as idmedicao,
    itens_controle.prioridade
FROM
    mdcs
    INNER JOIN mdcs_causa 
        ON mdcs.id_mdc = mdcs_causa.id_mdc
    INNER JOIN itens_controle
        ON mdcs_causa.Id_Item_Controle = itens_controle.id_item_controle
    INNER JOIN usuarios
        ON usuarios.id_usuario = itens_controle.id_usuario
    INNER JOIN empresas 
        ON empresas.id_empresa = usuarios.id_cliente_tabela
    LEFT JOIN medicoes m 
        ON (
            itens_controle.id_item_controle = m.id_item_controle
            and
            m.nm_ano = 2013 
            and 
            m.nm_periodo = 2 
            and 
            mdcs_causa.id_mdc = mdcs.id_mdc
        )
    WHERE
        mdcs.id_mdc = 5077 
```

我想我可以将`nm_ano`and`nm_periodo`条件放在 where 子句中，并带有一个 OR，`m.id_item_controle is null`但这个 OR 条件似乎不起作用，即使在 SQL 中也是如此。

另一种方法是左连接子查询。这在 SQL 中有效，但我认为 HQL 不支持它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T13:36:27.340

可以用`with`关键字来完成：

```
... 
left join itens_controle.medicoes m with (m.nm_ano = 2013 and m.nm_periodo = 2 and mdcs_causa.id_mdc = mdcs.id_mdc)
where mdcs.id_mdc = 5077 
```

您应该将它们作为参数提供，而不是显式值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T14:02:36.920

[在这个pdf中阅读这个左连接使用](http://courses.coreservlets.com/Course-Materials/pdf/hibernate/08-hibernate-Querying_HQL.pdf) 如下：

```
Query getEBills =session.createQuery( session.createQuery( from " EBill ebill EBill
ebill
left join ebill.accountTransaction where
ebill.balance > 500";
Li li f l bi i li () ist listOfRowValues = getDebitTransactions.list();
for (Object[] singleRowValues : listOfRowValues) {
// pull off the EBill // pull off the EBill
EBill ebill = (EBill)singleRowValues[0]; 
```

我在 HQL 方面没有任何经验，我已经粘贴了我为您找到的内容。希望这会对您有所帮助。

# ios - UIViewController 的每个实例都有不同的 URI

> ID：15524963
> 
> 赞同：5
> 
> 时间：2013-03-20T13:29:15.147
> 
> 标签：ios, objective-c

我有一个带有五个选项卡的 UITabController。每个选项卡只包含一个自定义 UIViewController 的实例，每个实例都包含一个 UIWebView。

我希望每个选项卡中的 UIWebView 打开不同的 URI，但我认为没有必要为每个选项卡创建一个新类。

如果我这样做，我可以让它工作`[self.webView loadRequest:]`，`-(void)viewDidLoad`但是当我真正想要改变的只是 URI 时，用五个不同版本的 viewDidLoad 创建五个不同的类似乎很荒谬。

这是我尝试过的：

**appDelegate.h**

```
#import <UIKit/UIKit.h>

@interface elfAppDelegate : UIResponder <UIApplicationDelegate, UITabBarControllerDelegate>

@property (strong, nonatomic) UIWindow *window;
@property (strong, nonatomic) UITabBarController *tabBarController;

@end 
```

**appDelegate.m**

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

    customVC *start = [[customVC alloc] init];
    customVC *eshop = [[customVC alloc] init];
    customVC *table = [[customVC alloc] init];
    customVC *video = [[customVC alloc] init];
    customVC *other = [[customVC alloc] init];

    // Doesn't do anything... I wish it would!
    [start.webView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://google.com"]]];

    self.tabBarController = [[UITabBarController alloc] init];
    self.tabBarController.viewControllers = @[start, eshop, table, video, other];

    self.window.rootViewController = self.tabBarController;
    [self.window makeKeyAndVisible];
    return YES;
} 
```

**自定义VC.h**

```
#import <UIKit/UIKit.h>

@interface customVC : UIViewController <UIWebViewDelegate> {
    UIWebView* mWebView;
}

@property (nonatomic, retain) UIWebView* webView;

- (void)updateAddress:(NSURLRequest*)request;
- (void)loadAddress:(id)sender event:(UIEvent*)event;

@end 
```

**自定义VC.m**

```
@interface elfVC ()

@end

@implementation elfVC

@synthesize webView = mWebView;

- (void)viewDidLoad {
    [super viewDidLoad];

    self.webView = [[UIWebView alloc] init];
    [self.webView setFrame:CGRectMake(0, 0, 320, 480)];
    self.webView.delegate = self;
    self.webView.scalesPageToFit = YES;

    [self.view addSubview:self.webView];

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T13:53:45.670

`NSURL*`在您的 customVC 中创建一个类型的属性。

将您的 customVC 的`-(id)init`方法更改`-(id)initWithURL:(NSURL*)url`为如下：

```
-(id)initWithURL:(NSURL*)url{
 self = [super init];
 if(self){ 
  self.<URLPropertyName> = url;
 }
 return self;
} 
```

然后打电话

```
[start.webView loadRequest:[NSURLRequest requestWithURL:self.<URLPropertyName>]]; 
```

在`viewDidLoad`

然后，当您初始化不同的 customVC 实例时，只需使用

```
customVC *vc = [customVC alloc]initWithURL:[NSURL URLWithString:@"http://..."]]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T14:09:07.480

`loadRequest:`我怀疑您在调用它的方法后正在初始化您的 webview 。为了避免这种情况，最好通过覆盖它们的设置器来初始化非原子属性：

```
- (UIWebView*)webview {
    if (mWebView == nil) {
        // do the initialization here
    }
    return mWebView;
} 
```

这样，您的 webview 将在您第一次访问它时（在调用 时`loadRequest:`）被初始化，而不是在它之后，在您的自定义视图控制器的`viewDidLoad`方法中。

# sql-server - 在sql函数中使用表名作为参数

> ID：15524974
> 
> 赞同：1
> 
> 时间：2013-03-20T13:29:41.730
> 
> 标签：sql-server

我想要创建函数，它使用表名作为参数。当我搜索时，我需要使用动态 sql。我尝试这样的代码：

```
CREATE FUNCTION get_column_id
    (
    @TableName VARCHAR(30),
    @ColumnName VARCHAR(30),
    )
RETURNS int 
AS
BEGIN
IF EXISTS 
    (
    DECLARE @SQL VARCHAR(50)
    SET @sql = 'SELECT' + @ColumnName + 'FROM' + @TableName + 'WHERE @ColumnName =    @ColumnNameValue';
    EXEC(@sql)
    )
BEGIN 
```

但是会出错。有什么方法可以进行吗？

我尝试以这种方式使用动态sql

```
DECLARE @SQL VARCHAR(50)
SET @SQL = 'SELECT' + @ColumnName + 'FROM' + @Table + 'WHERE @ColumnName = @ColumnNameValue'
EXEC(@SQL)
DECLARE @TableName table (Name VARCHAR(30))
INSERT INTO @TableName VALUES (@SQL)
IF EXISTS 
    (SELECT Name FROM @TableName WHERE Name = @ColumnNameValue) 
```

但是得到`Invalid use of a side-effecting operator 'EXECUTE STRING' within a function.` 有谁知道如何绕过这个约束？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T13:30:36.030

错误是字符串之间缺少空格的连接，

```
SET @sql = 'SELECT ' + @ColumnName + ' FROM ' + @TableName + ' WHERE ' + @ColumnName + ' = ' + @ColumnNameValue;
               -- ^ SPACE HERE        ^    ^                  ^ and here 
```

例如，如果列的数据类型是字符串，则需要用单引号将值括起来，

```
SET @sql = 'SELECT ' + @ColumnName + ' FROM ' + @TableName + ' WHERE ' + @ColumnName + ' = ''' + @ColumnNameValue + ''''; 
```

**更新 1**

您还需要声明参数`@ColumnNameValue`，例如

```
CREATE FUNCTION get_column_id
(
    @TableName VARCHAR(30),
    @ColumnName VARCHAR(30),
    @ColumnNameValue VARCHAR(30)
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T13:46:55.663

Sql Server 中的 UDF（用户定义函数）必须是确定性的。除了语法错误之外，您将无法完成任务。

如果您查看 MSDN 上的这篇文章：

[http://msdn.microsoft.com/en-us/library/ms178091.aspx](http://msdn.microsoft.com/en-us/library/ms178091.aspx)

你可以看到下面的引用：

```
Deterministic functions always return the same result any time they are called 
with a specific set of input values and given the same state of the database.    

Nondeterministic functions may return different results each time they are 
called with a specific set of input values even if the database state that 
they access remains the same. 
```

# php - 如何在php代码上应用ajax

> ID：15524983
> 
> 赞同：0
> 
> 时间：2013-03-20T13:29:59.720
> 
> 标签：php, ajax

我正在尝试将 ajax 应用于我的 php 代码。但是，当我单击按钮时，我无法得到任何响应。这意味着我声明的 ajax 函数没有被调用`onclick`。

```
<?php
$s_name= $_POST["submit"];

mysql_connect("localhost","root","");//database connection
mysql_select_db("itcompanylist");

$query  = "SELECT s_id FROM states WHERE `state_name` = '$s_name'";
$result1 = mysql_query($query);
$row = mysql_fetch_array($result1);
$result2 = mysql_query("SELECT city_name FROM `city` WHERE s_id ='".$row['s_id']."'");

$i = 0;

echo "<form method='post'  name='myForm'><table border='1' ><tr>";

while ($row = mysql_fetch_row($result2)){
  echo '<td><input type="submit" name="submit" onclick="ajaxFunction()" value="'.$row['0'].'"></td>'; 

  if ($i++ == 2) 
  { 
    echo "</tr><tr>";
    $i=0;
  }
}

echo "</tr></table></form>";    
echo "<div id='ajaxDiv'>Your result will display here</div>";       
?> 
```

阿贾克斯代码：

```
<script language="javascript" type="text/javascript">
<!-- 
//Browser Support Code
function ajaxFunction(){
 var ajaxRequest;  // The variable that makes Ajax possible!

 try{
   // Opera 8.0+, Firefox, Safari
   ajaxRequest = new XMLHttpRequest();
 }catch (e){
   // Internet Explorer Browsers
   try{
      ajaxRequest = new ActiveXObject("Msxml2.XMLHTTP");
   }catch (e) {
      try{
         ajaxRequest = new ActiveXObject("Microsoft.XMLHTTP");
      }catch (e){
         // Something went wrong
         alert("Your browser broke!");
         return false;
      }
   }
 }

 ajaxRequest.onreadystatechange = function(){
   if(ajaxRequest.readyState == 4){
      var ajaxDisplay = document.getElementById('ajaxDiv');
      ajaxDisplay.value = ajaxRequest.responseText;
   }
 }
 var s1 = document.getElementById('submit').value;

 var queryString = "?submit=" + s1 ;

 ajaxRequest.open("GET", "" + 
                              queryString, true);
 ajaxRequest.send(null); 
}
//-->
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T13:37:57.847

您的提交按钮将在处理 Ajax 请求之前提交表单并离开页面。

将您的事件处理程序绑定到表单的提交事件，并阻止默认操作。

```
function ajax(event) {
    // Send Ajax request here
    event.preventDefault();
}
var frm = document.getElementsByName('myForm')[0]; // Better to use an ID. Don't write HTML 3.2
frm.addEventListener('submit', ajax); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T13:41:18.080

使用 onclick="return ajaxFunction()" 和 event.preventDefault(); 避免默认表单提交。

# perl - 如何使用 Perl 的“摘要”模块计算 CRC？

> ID：15524984
> 
> 赞同：3
> 
> 时间：2013-03-20T13:30:00.107
> 
> 标签：perl, crc, digest

我需要在 Perl 中实现 CRC-32（带有自定义多项式）。我已经看到有一个名为[Digest::CRC](http://search.cpan.org/~olimaul/Digest-CRC-0.21/lib/Digest/CRC.pm)的模块可以做到这一点。但是，当我将结果与在线计算器进行比较时，我没有得到相同的 CRC 码。

* * *

我的多项式是“101101”（bin）或“2d”（hex）

我的数据是“1e5”

* * *

在线计算器是[https://ghsi.de/CRC/index.php?Polynom=101101&Message=1e5](https://ghsi.de/CRC/index.php?Polynom=101101&Message=1e5)。我从计算器得到的结果是“1010”（二进制）或“A”（十六进制）。

* * *

这是我使用的 Perl 代码（在线某处找到）

* * *

```
use strict;

use warnings;

use Digest::CRC;

my $string = 0x01e5;

my $ctx = Digest::CRC->new(type => "crc32", poly => 0x2D);

$ctx->add($string);

print "CRC for '$string' is 0x" . $ctx->hexdigest . "\n"; 
```

* * *

这是此 Perl 代码的输出：

“485”的 CRC 为 0x9d0fec86

* * *

我很确定在线计算器是正确的。

我的 Perl 代码有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T15:30:58.300

正如它所说，您的程序正在计算字符串`485`(bytes `34 38 35`) 的 CRC，这是 number 的十进制字符串表示形式`0x1E5`。同时，网站正在计算字节的 CRC `01 e5`。我不知道你想要哪一个，如果有的话。

绝对正确的是，该网站没有计算任何类型的 CRC32，因为它的结果不是 32 位长，而且似乎取决于您指定的多项式的大小。

此外，如果您使用`Digest::CRC`指定`type => 'crc32'`，它将忽略所有其他参数并简单地计算标准 CRC32。

如果您想要一个多项式为 0x2D 的 32 位 CRC，那么您可以尝试

```
my $ctx = Digest::CRC->new(width => 32, poly => 0x2D); 
```

但是您还需要定义其他几项来指定 CRC，包括（但不限于）位和字节顺序、初始值和结束异或值，并且没有办法判断这是否会给您正确的校验和看到完整的规范。

当然，您有一份文件说的不仅仅是*“CRC32，多项式0x2d”*吗？

* * *

**更新**

> 如何使用 将`Digest::CRC`数据视为十六进制字节而不是字符串？

*   `Digest::CRC`只处理字符串，您需要以这种方式打包数据。在这种情况下，您可能想要`my $string = "\x01\xe5"`

> 另外，什么是“结束异或值”？

*   该`end xor`值只是一个与结果进行异或的位模式，作为获得最终 CRC 的最后一步。

> 另外，如果我理解正确，以下两种方法应该给出相同的结果：

```
my $ctx1 = Digest::CRC->new(type => "crc32");
my $rr1 = $ctx1->add(pack 'H*', '1e5')->hexdigest;
print "a1=$rr1=\n";

my $ctx2 = Digest::CRC->new(width => 32, poly => 0x04c11db7);
my $rr2 = $ctx2->add(pack 'H*', '1e5')->hexdigest;
print "a2=$rr2=\n"; 
```

> 但是我得到不同的结果：

```
a1=fef37cd4= a2=758cce0= 
```

> 你能告诉我我的错误在哪里吗？

*   正如我所说，CRC 有很多说明符。这就是为什么您必须建立所需的 CRC 的*完整规范*，不仅包括宽度和多项式。要显式生成 CRC32 校验和，您需要这个

```
my $ctx = Digest::CRC->new(width => 32, poly => 0x04c11db7, init => 0xFFFFFFFF, xorout => 0xFFFFFFFF, refin => 1, refout => 1); 
```

这将`0xFFFFFFFF`和集合的初始值`refin`和最终值应用`refout`到真。这反转了处理前后的位顺序（ *ref*是*reflect的缩写），并且是 MSB first 和 LSB first 之间的区别。*

# java - 类型不匹配无法从 Boolean 转换为 Int（自定义方法中的数组）

> ID：15524985
> 
> 赞同：1
> 
> 时间：2013-03-20T13:30:00.380
> 
> 标签：java, arrays, return

在我的程序中，应该创建 13 个数组，以保存范围 2-12 的总和，在这种情况下，两个骰子滚动了 1000 次，并且应该打印出骰子添加到滚动的次数“2 ”。但是，最初该程序可以工作，但后来意识到我需要在程序中使用数组，而不仅仅是使用单个 math.random 方法。我已经尝试过，在 main 方法中简单地打印数组值，但出现更多错误。此外，我研究了使用直方图调用主数组的方法，除了我之前的尝试，它产生了更多的错误

我的问题是；

1：我将如何修复主要错误，允许它从 Boolean 转换为 int

2：return 语句如何工作，与常规整数相比，数组是否必须有所不同

任何指导或信息将不胜感激。

```
import java.io.*;
public class dont {

public static void main(String[] args) throws Exception  {
    // System.out.println(input());
    int[] counts = new int[13];

    System.out.print("The number of times it rolls 4 on two 6  sided dice :" + counts);

}

public static int input () throws IOException {
    BufferedReader myInput = new BufferedReader (new InputStreamReader (System.in));
    System.out.println("Hello and welcome to the program");
    System.out.println("In this program two six sided dices will be rolled and one eleven sided dice will be rolled (1000 times each");
    int sum;
    int[] counts = new int[13];

    System.out.println("The dices will be rolled to determine the odds of how many times the roll 2 comes up on both dies(Press any key to con't) ");
    myInput.readLine();
    //int count2=0;
    int Sixside;
    for (int i = 0; i < 1000; i++) 
    {
        // two dice that add to 4, after being rolled one thousand times  
        Sixside = (int)(Math.random ()*6+1)+(int)(Math.random ()*6+1) == 4;  
        //print the number of times they add to 4
        counts[sum]++;

    }

    counts[i] = Sixside;
    {
        //return array to main
        return counts [13]; 
    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T13:38:11.457

```
Sixside = (int)(Math.random ()*6+1)+(int)(Math.random ()*6+1) ;

if(Sixside == 4)
   System.out.println("Print something"); 
```

我假设您要检查条件并打印。

```
counts[i] = Sixside; 
```

您在 for 循环终止后使用上面的代码。i 的范围仅在 for 循环中，因为它在 for 循环中声明。所以你得到错误找不到符号变量 i

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T14:20:48.033

**要将布尔值转换为 int：**

一般来说，假设你有一些 boolean `b`，我会使用这个：

```
int x = b? 1:0; // If b is true, x is now 1; if b is false, x is now 0. 
```

这使用了[三元运算符](http://en.wikipedia.org/wiki/?%3a#Java)。

但是，在您的情况下，这种结构是不必要的。如果我理解正确，您希望 index `i`of`counts`保存骰子总和到该索引的次数。要做到这一点：

```
int sumOfDice = (int)(Math.random ()*6+1)+(int)(Math.random ()*6+1);
counts[sumOfDice]++; 
```

**要返回一个数组：**

返回一个数组很像返回一个 int。只需将 'input()' 的方法声明更改为

```
public static int[] input () throws IOException { 
```

和返回语句

```
return counts; 
```

**打印一个数组：**

导入`java.util.Arrays`并调用`Arrays.toString(yourArrayHere)`.

完整的程序现在看起来像：

```
import java.io.*;
import java.util.Arrays;

public class dont {

    public static void main(String[] args) throws Exception  {
        int[] counts = input();

        System.out.println("The number of times it rolls 4 on two 6  sided dice :" + counts[4]);
        System.out.println("The number of times each number was the sum:" + Arrays.toString(counts);
    }

    public static int[] input () throws IOException {
        BufferedReader myInput = new BufferedReader (new InputStreamReader (System.in));
        System.out.println("Hello and welcome to the program");
        System.out.println("In this program two six sided dices will be rolled and one eleven sided dice will be rolled (1000 times each"); // We don't actually roll any eleven-sided dice, so I'm not sure why this is here?
        int[] counts = new int[13];

        System.out.println("The dices will be rolled to determine the odds of how many times the roll 2 comes up on both dies(Press any key to con't) ");
        myInput.readLine();
        for (int i = 0; i < 1000; i++) 
        {
            int sumOfDice = (int)(Math.random ()*6+1) + (int)(Math.random ()*6+1);
            counts[sumOfDice]++;
        }

        // return array to main
        return counts;
    }
} 
```

# c# - 比较方法和比较类之间有性能差异吗？

> ID：15524989
> 
> 赞同：2
> 
> 时间：2013-03-20T13:30:14.330
> 
> 标签：c#, sorting, generic-collections

性能上有没有区别

```
List<T>.Sort Method (Comparison<T>) 
```

和

```
List<T>.Sort Method (IComparer<T>)? 
```

是否存在任何结构（软件架构）优势？

你什么时候使用比较方法而不是比较类，反之亦然？

编辑：

`List<T>.Sort Method (IComparer<T>)`速度更快。谢谢吉姆米歇尔！

在我的 PC 上，性能差异约为 1%。

似乎比较类是更快的类。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T13:35:05.647

不同之处在于第一个接受方法（匿名或不匿名），第二个接受比较器对象的实例。有时，定义复杂且可自定义的比较器类比将所有内容都写在单个函数中更容易。

我更喜欢第一个用于单维的简单排序，而后者用于例如数据网格中的多维排序。

使用比较器，您可以拥有通常可以帮助缓存的私有成员。这在某些情况下很有用（同样，在对显示在网格中的大型数据集进行复杂排序时）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T13:48:06.953

我记得，`List.Sort(Comparer<T>)`实例化 an`IComparer<T>`然后调用`List.Sort(IComparer<T>)`.

它看起来像这样：

```
class SortComparer<T>: IComparer<T>
{
    private readonly Comparison<T> _compare;
    public SortComparer(Comparison<T> comp)
    {
        _compare = comp;
    }

    public int Compare(T x, T y)
    {
        return _compare(x, y);
    }
}

public Sort(Comparison<T> comp)
{
    Sort(new SortComparer(comp));
} 
```

所以他们真的最终会做同样的事情。当我对这些东西进行计时（回到 .NET 3.5 中）时，`Sort(IComparer<T>)`速度会稍微快一些，因为它不必在每次调用时都进行额外的取消引用。但差异真的不足以担心。这绝对是使用代码中最有效的方法而不是执行速度最快的方法的情况。

关于它的更多信息，包括有关默认`IComparer`实现的信息：[Of Comparison 和 IComparer](http://www.informit.com/guides/content.aspx?g=dotnet&seqNum=781)

# java - 使用 Maven 添加另一个项目的 jar 作为资源

> ID：15524995
> 
> 赞同：6
> 
> 时间：2013-03-20T13:30:27.850
> 
> 标签：java, maven

在我的项目中，我有一个子项目自动更新程序。基本上是一个 jar 文件，当更新可用时提取并运行。

是否可以编译子项目，然后将输出的 jar 放置为 a`generated-resource`以便`updater.jar`包含在最终的 jar 中，例如：

```
Project-1.0.jar
 |-updater.jar
    |-Main.class
    |-B.class 
```

在此先感谢您的帮助（我是 Maven 新手）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T21:00:38.643

此任务要求`maven-assembly-plgin`或`maven-dependency-plugin`

（我希望更新程序也是 maven 项目）这应该是 maven-dependency-plugin 的正确配置 [我没有测试这个，您可能还需要将更新程序放入项目依赖项]

```
<project>
  [...]
  <build>
    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-dependency-plugin</artifactId>
        <version>2.7</version>
        <executions>
          <execution>
            <id>copy</id>
            <phase>prepare-package</phase>
            <goals>
              <goal>copy</goal>
            </goals>
            <configuration>
              <artifactItems>
                <artifactItem>
                  <groupId>company.com.project</groupId>
                  <artifactId>Updater</artifactId>
                  <version>0.0.1-SNAPSHOT</version>
                  <type>jar</type>
                  <outputDirectory>${project.build.outputDirectory}/classes</outputDirectory>
                  <destFileName>updater.jar</destFileName>
                </artifactItem>
              </artifactItems>
            </configuration>
          </execution>
        </executions>
      </plugin>
    </plugins>
  </build>
  [...]
</project> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T13:47:31.750

如果你的小 jar 也是用 Maven 构建的，那就太好了。然后假设您的小罐子 POM 包含以下内容：

```
<groupId>company.com.project</groupId>
<artifactId>Updater</artifactId>
<version>0.0.1-SNAPSHOT</version> 
```

那么你的 Project-1.0 应该使用这个依赖：

```
<dependency>
    <groupId>company.com.project</groupId>
    <artifactId>Updater</artifactId>
    <version>0.0.1-SNAPSHOT</version>
</dependency> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T13:54:21.283

将子项目添加到您的父项目中，如下所示

```
<project xmlns="http://maven.apache.org/POM/4.0.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">

    <modelVersion>1.0.0</modelVersion>
    <groupId>Project-1.0</groupId>
    <artifactId>myproject</artifactId>
    <packaging>pom</packaging>

    <version>1.0-SNAPSHOT</version>

    <name>Project-1.0</name>

    <modules>
        <module>../updater</module>
    </modules>

    ...
</project> 
```

然后在您的更新程序项目 pom 文件中进行以下更改

```
<?xml version="1.0"?>
<project>
  <parent>
    <artifactId>myproject</artifactId>
    <groupId>Project-1.0</groupId>
    <version>1.0-SNAPSHOT</version>
  </parent>

  <modelVersion>4.0.0</modelVersion>

  <groupId>Project-1.0</groupId>
  <artifactId>updater</artifactId>
  <version>1.0-SNAPSHOT</version>

  ...

</project> 
```

编译父项目时，子项目将自动编译。

然后在你的jar中添加子项目jar，在父pom.xml中添加以下插件

```
 <plugin>
    <artifactId>maven-antrun-plugin</artifactId>
    <executions>
      <execution>
        <phase>process-resources</phase>
        <configuration>
          <tasks>
            <copy todir="${project.build.directory}/lib">
              <fileset dir="${location of updater1.0.jar}"/>
            </copy>
          </tasks>
        </configuration>
        <goals>
          <goal>run</goal>
        </goals>
      </execution>
    </executions>
  </plugin> 
```