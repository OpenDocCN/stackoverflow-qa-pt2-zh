# StackOverflow 问答 13322000-13322999

# ios - UIEventSubtypeRemoteControl*“切换”公平游戏是否可用于非媒体应用程序？

> ID：13322000
> 
> 赞同：2
> 
> 时间：2012-11-10T12:20:40.927
> 
> 标签：ios, appstore-approval

应用商店审查指南指出...

> 改变标准开关功能的应用程序，例如音量增大/减小和响铃/静音开关，将被拒绝

但是 Apple 已将以下开关作为 UIEvents 开放（特别是不包括 Volume 事件或 Ring/Silent 事件）。隐含地，这些似乎不是“标准开关”，尽管它们显示为“正在播放”控件、耳塞式麦克风控件或 AVRCP 开关。

UIEventSubtypeRemoteControlPlay UIEventSubtypeRemoteControlPause UIEventSubtypeRemoteControlStop UIEventSubtypeRemoteControlTogglePlayPause UIEventSubtypeRemoteControlNextTrack UIEventSubtypeRemoteControlPreviousTrack UIEventSubtypeRemoteControlBeginSeekingBackward UIEventSubtypeRemoteControlEndSeekingBackward UIEventSubtypeRemoteControlBeginSeekingForward UIEventSubtypeRemoteControlEndSeekingForward

开发人员是否可以自由地（如避免应用商店拒绝）来新颖地使用这些事件，例如，在实际播放或暂停媒体内容的上下文之外使用 TogglePlayPause 事件？这里有没有人有过因为这些远程控制事件的非传统使用而被拒绝的应用程序的经验？

# java - 如何制作我的背景图片？

> ID：13322009
> 
> 赞同：-1
> 
> 时间：2012-11-10T12:21:31.567
> 
> 标签：java, android, eclipse

在 Android 应用程序（Eclipse）中，如何将图像作为视图的背景？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T12:26:53.493

**-**我假设你想制作一个`Activity`.

**-**设置`android:background`属性。

**例如：**

`android:background="@drawable/my_picture"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T13:30:04.443

以编程方式，您可以使用以下方法向视图添加背景：

```
View view = yourView;
view.setBackgroundDrawable(yourDrawable);
//or with
view.setBackgroundResource(resid); 
```

# java - 从地图图块构建级别包文件以在 libGDX 中使用

> ID：13322010
> 
> 赞同：3
> 
> 时间：2012-11-10T12:21:40.817
> 
> 标签：java, android, libgdx

我想使用平铺来绘制我的地图。为了在 libgdx 中使用此地图，我必须构建一个关卡包文件，但我无法构建它。我使用这些方式来构建它，但它们都在执行时出错......这是我的方式：[Source for this way](http://www.gamefromscratch.com/post/2014/04/16/LibGDX-Tutorial-11-Tiled-Maps-Part-1-Simple-Orthogonal-Maps.aspx)

```
java -jar TexturePacker.java inputdirectory outputdirectory level 
```

对于这个，我总是从 TexturePacker 类中得到一个 jar 导出，然后在它上面打开一个命令窗口（它的文件夹）然后这样写：

```
java -jar TexturePacker.jar c:\MySideScrollGame\data\world\level1 c:\ level.tmx 
```

等等......还有这个：[这种方式的来源](http://code.google.com/p/libgdx/wiki/GraphicsTileMaps)

```
java -classpath libs/gdx.jar:libs/gdx-tools.jar:libs/gdx-tiled-preprocessor.jar
 com.badlogic.gdx.tiledmappacker.TiledMapPacker
 mygame/maps
 mygame-android/assets/maps
 --strip-unused 
```

我的方式：

```
java -classpath libs\gdx.jar;libs\gdx-tools.jar;libs\gdx-tiled-preprocessor.jar com.badlogic.gdx.tiledmappacker.TiledMapPacker c:\MySideScrollGame\data\packer c:\MySideScrollGame\data\packer 
```

但这对也是如此。错误。所以请告诉我，如果有人知道我的问题出在哪里或谁以前做过，请告诉我。多谢。

编辑 ：

```
Exception in thread "Thread-2" javax.media.opengl.GLException: com.badlogic.gdx.utils.GdxRuntimeException: File not found: data\packer\input\level_1 packfile (Internal)
at javax.media.opengl.Threading.invokeOnOpenGLThread(Threading.java:271)
at javax.media.opengl.GLCanvas.maybeDoSingleThreadedWorkaround(GLCanvas.java:410)
at javax.media.opengl.GLCanvas.display(GLCanvas.java:244)
at com.badlogic.gdx.backends.jogl.JoglAnimator.display(JoglAnimator.java:137)
at com.badlogic.gdx.backends.jogl.JoglAnimator$MainLoop.run(JoglAnimator.java:174)
at java.lang.Thread.run(Unknown Source)
 Caused by: com.badlogic.gdx.utils.GdxRuntimeException: File not found: data\packer\input\level_1 packfile (Internal)
at com.badlogic.gdx.files.FileHandle.read(FileHandle.java:108)
at com.badlogic.gdx.graphics.g2d.TextureAtlas$TextureAtlasData.<init>(TextureAtlas.java:99)
at com.badlogic.gdx.graphics.g2d.TextureAtlas.<init>(TextureAtlas.java:215)
at com.badlogic.gdx.graphics.g2d.tiled.TileAtlas.<init>(TileAtlas.java:49)
at com.example.jumpertutorial.TiledMapHelper.loadMap(TiledMapHelper.java:111)
at com.example.jumpertutorial.JumperTutorial.create(JumperTutorial.java:78)
at com.badlogic.gdx.backends.jogl.JoglGraphics.init(JoglGraphics.java:87)
at com.sun.opengl.impl.GLDrawableHelper.init(GLDrawableHelper.java:72)
at javax.media.opengl.GLCanvas$InitAction.run(GLCanvas.java:418)
at com.sun.opengl.impl.GLDrawableHelper.invokeGL(GLDrawableHelper.java:189)
at javax.media.opengl.GLCanvas$DisplayOnEventDispatchThreadAction.run(GLCanvas.java:452)
at java.awt.event.InvocationEvent.dispatch(Unknown Source)
at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
at java.awt.EventQueue.access$000(Unknown Source)
at java.awt.EventQueue$3.run(Unknown Source)
at java.awt.EventQueue$3.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
at java.awt.EventQueue.dispatchEvent(Unknown Source)
at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T13:55:42.500

我认为你不应该使用`TexturePacker`. 我曾经也使用过它，但我认为它有问题，因为我一直无法让它工作。

我找到了其他工具来执行此操作，但您必须执行其他一些操作。我建议您看一下我对与所有内容相同的问题[的答案之一。](https://stackoverflow.com/questions/11737426/libgdx-application-crashes-when-call-tiledmaprenderer-render/11747244#11747244)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-10T08:57:19.257

错误很明显：

```
File not found: data\packer\input\level_1 packfile 
```

没有同名的文件。

这个

```
java -jar TexturePacker.java inputdirectory outputdirectory level 
```

让我觉得文件被称为：**level.pack**

# c# - 我们如何使用 WPF/XAML 以样式编写多个条件

> ID：13322018
> 
> 赞同：0
> 
> 时间：2012-11-10T12:23:23.450
> 
> 标签：c#, wpf

假设我在主窗口表单中有一个数据网格。我想根据单元格值条件为不同的列应用类似背景的单元格样式。

这可能吗？任何例子..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T15:37:05.893

您必须使用[MultiDataTrigger](http://msdn.microsoft.com/en-us/library/system.windows.multidatatrigger.aspx)类。

例子：

```
<Style TargetType="TextBox">
   <Style.Triggers>
      <MultiDataTrigger>
           <MultiDataTrigger.Conditions>
               <Condition Binding="{Binding XXXX}" Value="YYYY"/>
               <Condition Binding="{Binding WWWW}" Value="ZZZZ"/>
           </MultiDataTrigger.Conditions>
           <Setter Property="Background" Value="Red"/>
      </MultiDataTrigger>
   </Style.Triggers>
</Style> 
```

# apache - Crontab -e 将忽略我的编辑

> ID：13322019
> 
> 赞同：1
> 
> 时间：2012-11-10T12:23:49.433
> 
> 标签：apache, ssh, cron, crontab

通过 SSH，我输入：`crontab -e`

然后 GNU nano 编辑器打开文档，我尝试了文件的不同内容：

```
5,10,15,20,25,30,35,40,45,50,55    *    *    *    *    /usr/bin/lynx -source http://mywebsite.com/includes/boot.php 
```

--

```
5,10,15,20,25,30,35,40,45,50,55    *    *    *    *    http://mywebsite.com/includes/boot.php 
```

--

```
5,10,15,20,25,30,35,40,45,50,55    *    *    *    *    home/myuser/includes/boot.php 
```

保存文件后，我得到：

> 7953401631:~# crontab -e
> crontab: 安装新的 crontab
> 你在 /var/mail/root 中有新邮件

但它们似乎都不起作用

我错过了什么？顺便说一句，我在 CentOS 下运行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T12:27:59.750

您需要指定解释器。因此，您需要类似的东西

```
15 * * * * /path/to/php /path/to/script

```

如果 cron 正在运行，还要检查您的系统日志。尝试

```
哪个php 

```

获取当前的 php 和路径

# php - 发送带有自定义标题的电子邮件时出现问题

> ID：13322020
> 
> 赞同：0
> 
> 时间：2012-11-10T12:23:53.747
> 
> 标签：php, email, email-headers

我在理解如何使用 php`mail()`函数发送自定义标头时遇到了一些问题。

这段代码有什么问题？

```
<?php 
function send_email($name, $lastname, $from, $subject, $message){
    $to = 'to_adress@gmail.com';
    $headers = 'To: ' . $to . 
      '\r\nFrom: ' . $from .
      '\r\nSubject:' . $subject;

    mail($to, $subject, $message, $headers);
    print 'Email sent';

  }

  send_email('jhon', 'doe', 'from_adress@gmail.com', 'subject', 'message');

 ?> 
```

它没有给我任何 php 错误，并且电子邮件没有到达。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T13:02:12.887

`'\r\n'`不一样`"\r\n"`。尝试这样的事情：

```
$headers = 'To: ' . $to . "\r\n"
         . 'From: ' . $from . "\r\n"
         . 'Subject: ' . $subject; 
```

但是，您不需要重复`To:`and`Subject:`标头，因此只需使用它即可：

```
$headers = 'From: ' . $from; 
```

# r - 赋值函数文档失败 R CMD CHECK

> ID：13322021
> 
> 赞同：7
> 
> 时间：2012-11-10T12:24:18.317
> 
> 标签：r, roxygen2

我在`check`使用 Roxygen 分配函数时遇到问题。

这是一个相当简单的例子：

```
#' Get sp feature IDs
#' @aliases IDs IDs.default IDs.SpatialPolygonsDataFrame IDs<- IDs<-.SpatialPolygonsDataFrame
#' @param x The object to get the IDs from or assign to
#' @param value The character vector to assign to the IDs
#' @param \dots Pass-alongs
#' @author Ari B. Friedman
#' @rdname IDs
IDs <- function(x,...) {
  UseMethod("IDs",x)
}
#' @method IDs default
#' @S3method IDs default
#' @rdname IDs
IDs.default <- function(x,...) {
  stop("Currently only SpatialPolygonsDataFrames are supported.")
}
#' @method IDs SpatialPolygonsDataFrame
#' @S3method IDs SpatialPolygonsDataFrame
#' @rdname IDs
IDs.SpatialPolygonsDataFrame <- function(x,...) {
  vapply(slot(x, "polygons"), function(x) slot(x, "ID"), "")
}

#' Assign sp feature IDs
#' @rdname IDs
"IDs<-" <- function( x, value ) {
  UseMethod("IDs<-",x)
}
#' @method IDs<- SpatialPolygonsDataFrame
#' @S3method IDs<- SpatialPolygonsDataFrame
#' @rdname IDs
"IDs<-.SpatialPolygonsDataFrame" <- function( x, value) {
  spChFIDs(x,value)
} 
```

当我运行时`check`：

```
* checking for code/documentation mismatches ... WARNING
Codoc mismatches from documentation object 'IDs':
IDs<-
  Code: function(x, value)
  Docs: function(x, value, value)
IDs<-.SpatialPolygonsDataFrame
  Code: function(x, value)
  Docs: function(x, value, value) 
```

我不明白第二个`value`来自哪里。我已经尝试消除`@param value`关于 Roxygen 可能会自动为赋值函数创建一个条目的理论，但这并没有消除`(x,value,value)`定义并产生一个新的警告，抱怨我没有定义`value`。

这是生成的相关部分`.Rd`：

```
\usage{
  IDs(x, ...)

  \method{IDs}{default} (x, ...)

  \method{IDs}{SpatialPolygonsDataFrame} (x, ...)

  IDs(x, value) <- value

  \method{IDs}{SpatialPolygonsDataFrame} (x, value) <-
    value
} 
```

我没有看到声称存在的`(x, value, value)`签名。`check`

这是一个 S3 函数，但它在 S4 对象上运行。我认为这仍应使其成为 S3。但如果不是，那可能是我的使用`@S3method`问题。

帮助？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T18:42:26.543

这是一种相当骇人听闻的方法，但似乎 roxygen 处理这个问题的方式暂时仍然被打破（[LINK](https://github.com/klutometis/roxygen/issues/38)）。但是您可以直接手动将使用部分添加到您的 roxygen 评论中。

```
#' Assign sp feature IDs
#' @rdname IDs
#' @usage IDs(x) <- value
"IDs<-" <- function( x, value ) {
    UseMethod("IDs<-",x)
}

#' @method IDs<- SpatialPolygonsDataFrame
#' @S3method IDs<- SpatialPolygonsDataFrame
#' @rdname IDs
#' @usage IDs(x) <- value
"IDs<-.SpatialPolygonsDataFrame" <- function( x, value) {
    spChFIDs(x,value)
} 
```

# php - 无法使用 RabbitMQ 和 Symfony2 发送 Swift_Message

> ID：13322024
> 
> 赞同：2
> 
> 时间：2012-11-10T12:24:18.950
> 
> 标签：php, symfony, rabbitmq, swiftmailer

我正在使用[RabbitMQBundle](https://github.com/videlalvaro/RabbitMqBundle)将 RabbitMQ 集成到我的 symfony2 项目中。一切正常（我可以生成和使用消息）。但是，每当我尝试使用来自消费者的 Swift_Message 发送电子邮件时，我都不会收到电子邮件。不过，从消费者那里使用`mail('foo@bar.com', 'subject', 'message');`确实有效。

这是我用来发送 Swift_Message 的代码：

```
 $message = \Swift_Message::newInstance()
    ->setSubject($subject)
    ->setFrom('noreply@bar.com')
    ->setTo('foo@bar.com')
    ->setBody('Foo Bar');

  $this->container->get('mailer')->send($message); 
```

此代码在“普通”控制器或服务中工作。但是，当 RabbitMQ 在消费者中触发时，它不起作用。

有人有线索吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-10T16:36:45.113

您应该禁用 swiftmailer 的假脱机功能：删除`spool`swiftmailer 捆绑配置的。

从获得

```
swiftmailer:
    # ...
    spool: { type: memory } 
```

到

```
swiftmailer:
    # ... 
```

[您可以在此处](http://symfony.com/doc/current/cookbook/email/spool.html)阅读有关此功能的更多信息。

# android - 等待操作，直到创建 Fragment 的视图

> ID：13322026
> 
> 赞同：9
> 
> 时间：2012-11-10T12:24:20.187
> 
> 标签：android, transactions, android-fragments, android-service

我正在编写音乐播放器，音乐在后台播放`Service`。当用户杀死`Activity`which hosts 3 `Fragments`，然后再次重新启动时，我从`Activity`发送一个包含有关当前播放歌曲的信息以及用户添加到其会话的歌曲列表的信息。`Broadcast``Service`

问题是，每次我想将最后的信息设置为什么都`Fragments`没有发生，因为它们的创建时间太长，并且`Broadcast`没有得到应有的处理。

我怎样才能让`Service`或`Broadcast`等到创建片段以便适当处理它们？

以下是相关的代码片段：

```
//When the activity binds to the service, refresh the fragments
private ServiceConnection conn = new ServiceConnection() {
    public void onServiceConnected(ComponentName className, IBinder service) {
        LocalBinder binder = (LocalBinder) service;
        myService = binder.getService();
        myService.setBound(true);
        if(myService.startedOnce) {
            myService.refreshFragments();
        }
        myService.startedOnce = true;
    }
}

//This is the broadcast receiver of the Fragment
//it receives the broadcast too soon, and I can't set the
//Views so they are always empty.
public void onReceive(Context context, Intent intent) {
    String action = intent.getAction();
    if (action.equals(MusicService.REFRESH_ALL)) {
        Song current = intent.getParcelableExtra("song");
        setCurrentSong(current);
    }
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-12T14:44:11.833

最简单的做法就是保留信息，直到 Fragment 准备好显示它。使用 Fragment 的`setArguments()`方法将信息附加到 Fragment 中。

```
@Override
public void onReceive() {
   String action = intent.getAction();
   if(action.equals(MusicService.REFRESH_ALL)) {
      // Creating a new Bundle so the Fragment can control its own object
      Bundle args = new Bundle(intent.getExtras()); 
      Fragment fr = getUsingFragment();
      fr.setArguments(fr);
   }
} 
```

然后，在 Fragment 中，`onCreateView()`只需从中提取参数`getArguments()`并使用这些值构建视图。

```
@Override
public void onCreateView (LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
   Bundle args = getArguments();
   if(args != null) {
      // code to set values if arguments are set
   } else {
      // code to set values if arguments are not set
   }
} 
```

另一种方法是使用 setter 方法，其中 Fragment 本身将值放入 Bundle for `setArguments()`. 这样，当 Fragment 的视图被销毁并且必须重新创建时，您可以在创建视图时更新视图，并为可能的事件设置参数。

注意：您只能`setArguments()`在 Fragment 附加到 Activity 之前调用。`setArguments`但是，您可以通过从中检索对它的引用来更新您传入的 Bundle `getArguments()`，然后只需输入值。`setArguments()`因此，不要从您的接收器呼叫，而是执行以下操作：

```
public void setCurrentSong(Song extra) {
   Bundle args = getArguments();
   args.putParcable(KEY_MAP, extra);
   if(/* Views are created */) {
      // update and invalidate the views
   }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T16:36:31.150

## 我是如何解决这个问题的

当我使用媒体播放服务时，我想从服务中调出最后收听的歌曲，以便直接播放。这是旧逻辑，但我实际上围绕它构建了我的代码。直到到目前为止我碰到了它。

### 这正在发生

*   `FragmentActivity`被建造
*   `Service`开始并绑定到
*   同时`Fragments`get异步创建
*   一`Service`开始，它就会发出一个`Broadcast`带有最新信息的
*   因为 the`Service`和`Fragment`Creation 都是异步的，广播将从服务发送，但因为`BroadcastReceivers`in`Fragments`甚至还没有初始化，所以他们不会收到`Intent`.

### 我做了什么来解决它

我不知何故不得不使用一个回调来确保

*   服务已创建并绑定到
*   创建的片段和视图已设置

所以我使用了`ServiceConnection`and 准确地说，这个`onServiceConnected()`方法。在那里，我得到了保存最后一首歌曲的偏好，然后发送`Broadcast`和`Fragments`接收它，`Views`并适当地设置了。这也适用于方向变化。

### 编码

```
//This is the code in the FragmentActivity
private ServiceConnection conn = new ServiceConnection() {
    public void onServiceConnected(ComponentName className, IBinder service) {
        LocalBinder binder = (LocalBinder) service;
        myService = binder.getService();
        myService.setBound(true);
        if (myService.startedOnce) {
            myService.refreshFragments();
        } else {
            sendLastSavedSong();
        }
        myService.startedOnce = true;
    }

    public void onServiceDisconnected(ComponentName className) {
        myService.setBound(false);
    }
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T13:13:39.543

你不能在片段中做一些事情吗？

```
Song current=null;
public void onReceive(Context context, Intent intent) {
    String action = intent.getAction();
    if (action.equals(MusicService.REFRESH_ALL)) {
        current = intent.getParcelableExtra("song");
    }
}

@Override
public void onResume()
{
    if(current!=null) setCurrentSong(current);
    super.onResume();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-29T03:00:24.857

我的解决方案只是创建自己的回调接口。在你的片段的 onCreateView 方法的最后调用你的回调方法，它告诉你的 mainactivity 创建已经完成。

它对我有用，希望对你也有帮助。

# gwt - 如何将 GWT 项目编译为 jar 文件并将其添加到另一个 GWT 项目中？

> ID：13322028
> 
> 赞同：0
> 
> 时间：2012-11-10T12:24:37.503
> 
> 标签：gwt

我有三个 GWT 项目。2 个常见的 GWT(Bootstrap & Data Transfer Objects) 项目，它不包含任何 UI 部分。所以，我想编译这两个项目并创建 jar 并希望将它包含在第三个 GWT 项目中。我在 Eclipse[Project->Export->Jar 文件] 中完成了。它工作正常。我想做命令行或通过 ant build.xml。请如果你认识任何人，你能帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T12:34:02.670

我们有一个类似的案例，这里是我们用来为我们的任务引擎构建一个外部 jar 的目标。这将从命令行为您构建一个 jar，该 jar 可以包含在其他项目中。在我们的例子中，我们有一个包含所有域对象和一些服务的大型项目。我们想将其包含在我们的任务引擎中。

```
 <target name="taskengine-jar" depends="enhance">
    <mkdir dir="build" />
    <mkdir dir="build/META-INF"/>

    <copy todir="build/META-INF">
      <fileset dir="src/META-INF">
        <include name="persistence.xml" />
        <include name="server.properties" />
        <include name="crypto.properties" />
        <include name="sqlDrivers.xml" />
      </fileset>
    </copy>
    <jar destfile="taskengine-jobs.jar">
      <fileset dir="war/WEB-INF/classes">
        <include name="com/hp/vf/server/**" />
        <include name="com/hp/vf/shared/**" />
      </fileset>
      <fileset dir="build">
        <include name="META-INF/**" />
      </fileset>
      <zipgroupfileset dir="war/WEB-INF/lib">
        <include name="axis2.jar" />
        <include name="javamail-1.4.4.jar" />
        <include name="commons-pool-1.6.jar" />
        <include name="openjpa-all-2.2.0.jar" />
        <include name="commons-logging-adapters-1.1.1.jar" />
        <include name="commons-logging-api-1.1.1.jar" />
        <include name="commons-vfs2-2.0.jar" />
        <include name="postgresql-9.0-801.jdbc4.jar" />
        <include name="poi-3.8-beta5-20111217.jar"/>
        <include name="poi-ooxml-schemas-3.8-beta5-20111217.jar"/>
        <include name="poi-ooxml-3.8-beta5-20111217.jar"/>
        <include name="itext-2.1.7.jar"/>
        <include name="REngine.jar" />
        <include name="Rserve.jar" />
        <include name="jsoup-1.6.1.jar" />
        <include name="jfreechart-1.0.13.jar" />
        <include name="jcommon-1.0.16.jar" />
      </zipgroupfileset>
      <fileset dir="war/WEB-INF/lib">
        <include name="addressing-1.1.1.mar" />
        <include name="rampart-1.1.mar" />
      </fileset>

    </jar>
    <delete dir="build" />
  </target> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T13:18:55.153

我认为，最简单灵活的方法是使用 Maven。每个项目代表存储在本地存储库中的单独 Maven 工件。在你的主项目中你应该做的只有一件事是在你的**POM**文件中添加几个依赖项。而已。我使用这个模式很长时间了。

# android - 以 ViewFlipper 为背景将小部件固定到屏幕

> ID：13322029
> 
> 赞同：3
> 
> 时间：2012-11-10T12:24:41.647
> 
> 标签：android

我在 Android 中的布局有一些问题。目前我有一个带有 ViewFlipper 的布局，它允许我更改背景图像和屏幕底部的几个按钮（在我的脚蹼内）。

当我在图像之间滑动时，有什么办法可以让我最宽的部分固定在屏幕的那个确切部分？

# c++ - 实例化结构时出现分段错误 - C++

> ID：13322030
> 
> 赞同：1
> 
> 时间：2012-11-10T12:24:47.423
> 
> 标签：c++, pointers, struct, segmentation-fault, fault

我在尝试从波前文件加载 3d 对象并将其保存到我预定义的结构中时遇到问题。我收到分段错误错误，我假设我的指针在某个地方出错了。以下是结构：

```
struct vertex
{
    float x,y,z;
};

// the idea is to split each object into groups in order to animate
// them seperately
struct group
{
    float xpos, ypos, zpos;
    float xrot, yrot, zrot;

    int numVertices;
    int numFaces;

    //all verteces
    vertex vertices[MAX_NUM];

    //faces-- a face is made up of one vertex from each of these arrays
    vertex vertexOne[MAX_NUM];
    vertex vertexTwo[MAX_NUM];
    vertex vertexThree[MAX_NUM];
};

struct object
{
    float xpos, ypos, zpos;
    float xrot, yrot, zrot;

    int numGroups;
    group * groups[MAX_NUM];
}; 
```

这是应该加载对象的函数：

```
object * loadObject(char * path)
{
object * obj;
obj = new object;

char str[1];
obj->numGroups = 0;
FILE * file = fopen(path, "r");

while(fscanf(file, "%s", str) != EOF)
{
    if(str[0] == 'o')
    {
        obj->numGroups++;
        obj->groups[obj->numGroups-1] = new group;

        obj->groups[obj->numGroups-1]->numVertices = 0;
        obj->groups[obj->numGroups-1]->numFaces = 0;
    }
    else if(str[0] == 'v' && str[1] == ' ')
    {
        obj->groups[obj->numGroups-1]->numVertices++;
        sscanf(str, "v %f %f %f",
        &(obj->groups[obj->numGroups-1]->vertices[obj->groups[obj->numGroups-1]->numVertices-1].x),
        &(obj->groups[obj->numGroups-1]->vertices[obj->groups[obj->numGroups-1]->numVertices-1].y),
        &(obj->groups[obj->numGroups-1]->vertices[obj->groups[obj->numGroups-1]->numVertices-1].z));
    }
    else if(str[0] == 'f')
    {
        int one, two, three;
        obj->groups[obj->numGroups-1]->numFaces++;
        sscanf(str, "f %i/%*i/%*i %i/%*i/%*i %i/%*i/%*i", &one, &two, &three);

        obj->groups[obj->numGroups-1]->vertexOne[obj->groups[obj->numGroups-1]->numFaces-1] = obj->groups[obj->numGroups-1]->vertices[one-1];
        obj->groups[obj->numGroups-1]->vertexTwo[obj->groups[obj->numGroups-1]->numFaces-1] = obj->groups[obj->numGroups-1]->vertices[two-1];
        obj->groups[obj->numGroups-1]->vertexThree[obj->groups[obj->numGroups-1]->numFaces-1] = obj->groups[obj->numGroups-1]->vertices[three-1];
    }
}

fclose(file);
return obj;
} 
```

我已经尝试了很长时间才能找到问题，但我根本没有得到有关错误的信息。我知道我分配顶点和面的方式有点乏味，非常欢迎任何关于更整洁代码的建议。如果需要任何其他信息，请告诉我，非常感谢您提前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T12:31:05.940

首先你做

```
obj->numGroups = 0; 
```

然后在某些情况下你会

```
obj->groups[obj->numGroups-1] 
```

*不*增加`obj->numGroups`，这意味着您可以越界访问数组。您也不会检查数组条目是否已分配。

* * *

另一个问题是`str`只有一个字符，并且您`fscanf`会扫描一个字符串，该字符串将*至少*将两个字符放入字符串中：您想要的实际字符*，然后*是字符串终止符。您还可以`str[1]`稍后在循环中访问，这是超出范围的。所有这些都是*未定义的行为*，并可能导致崩溃。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T12:45:03.217

如果我是你，我会远离用于处理输入的各种`fscanf()`,`sscanf()`等函数。它们使用起来可能很冒险。请参阅此[fscanf 手册页](http://www.cplusplus.com/reference/clibrary/cstdio/fscanf/)，因为我认为您假设 fscanf() 中有一个完整的字符串，而您可能没有得到它。

我将采取的方法是以下步骤：（1）使用从文件中读取完整的字符串`fgets()`和（2）使用[递归下降解析器](http://en.wikipedia.org/wiki/Recursive_descent_parser)（另请参见[关于递归下降解析的另一篇文章](http://www.cs.engr.uky.edu/~lewis/essays/compilers/rec-des.html)）将构建对象的字符串解析为我去。

# python - Python OpenCV - 重置图像并寻找新圆圈

> ID：13322033
> 
> 赞同：0
> 
> 时间：2012-11-10T12:25:03.767
> 
> 标签：python, opencv, image-recognition

我想检测射击目标的圆圈。所以目标可能已经有圆圈了，但我只是在寻找新的弹孔。

我的想法是从目标开始，有点知道圆圈在哪里，目标没有被射击。然后，一旦你有了它，它几乎就像绿屏当前的圈子，这样它们就不会被再次检测到。然后我会从那里只拾取弹孔。

这将如何完成？这是最好的方法吗？

# ruby-on-rails-3 - Activerecord 迭代/在某个位置追加异常

> ID：13322037
> 
> 赞同：0
> 
> 时间：2012-11-10T12:25:27.690
> 
> 标签：ruby-on-rails-3, activerecord, iteration

我正在寻找一种在迭代内的某个位置包含特定元素的方法

没有足够的经验来使用正确的模式（因此在这里使用正确的关键字搜索堆栈溢出，害怕得到一些重复的问题）......但基本想法如下：

```
<% Post.all.each do |post| %>
    <% if Post.all.index(post) == 5 # or any position %>
        # render some html element (some kind of exception)
    <% else %>
        <%= post.title %>
    <% end %>
<% end %> 
```

但只是没有跳过我的帖子数组中的任何记录

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T12:36:00.003

我不确定我是否完全理解您的要求。[`each_with_index`](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-each_with_index)可能会对您有所帮助，如果您不使用`else`，则不会跳过任何记录：

```
<% Post.all.each_with_index do |post, index| %>
  <% if index == 5 # or any position %>
    # render some html element (some kind of exception)
  <% end %>
  <%= post.title %>      
<% end %> 
```

# java - 如何从 python 脚本设置系统属性以在 Java 代码中使用它？

> ID：13322039
> 
> 赞同：3
> 
> 时间：2012-11-10T12:25:52.943
> 
> 标签：java, python, properties, system

我想要一个 Java 代码中的字符串，其值在 python 脚本中设置。我可以将其设置为脚本中的系统属性，以便将其与 System.getProperty() 方法一起使用。有没有办法实现这一点或使用其他方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T12:37:04.940

您可以像这样在命令行上设置 Java 属性：

```
java -D<propertyName1>=<propertyVal1> -D<propertyName2>=<propertyVal2> ... 
```

System.getProperty("propertyName1") 将返回“propertyVal1”。

例子：

```
java -Dfile.encoding=utf-8 -jar MyJar.jar 
```

这将在 bash 脚本中工作。我从未在 Python 中尝试过，但我想这个[答案](https://stackoverflow.com/questions/89228/calling-an-external-command-in-python "回答")可能会帮助您实现这一目标。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-09-07T09:58:06.193

如果您使用的是 pyspark，您可以使用 SparkContext 的 setSystemProperty() 方法，例如

```
import pyspark
sc=pyspark.SparkContext()
sc.setSystemProperty("com.amazonaws.services.s3.enableV4", "true") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-31T07:57:17.217

如果您使用的是 Jython，您可以导入 java.lang.System 类并调用 System.setProperty() 方法来设置您想要设置的任何系统属性：

代码片段：

```
from java.lang import System
System.setProperty('app.env', 'DEV')

from yourpackage import YourMainClass
args = ['Your','Args']
YourMainClass.main(args)
```

# c++ - 在 dll 中使用类

> ID：13322041
> 
> 赞同：0
> 
> 时间：2012-11-10T12:26:10.203
> 
> 标签：c++, visual-studio, class, dll, export

我想在另一个项目中使用的 dll 中有一个类。我阅读了有关如何执行此操作的[教程，我的伪代码如下所示](http://www.codeproject.com/Articles/28969/HowTo-Export-C-classes-from-a-DLL)

**接口.h**

```
#ifdef  EXPORT
#define SOMEAPI __declspec(dllexport)
#else
#define SOMEAPI __declspec(dllimport)
#endif

struct ISomeInterface
{
  virtual void SomeMethod()=0;
};

typedef ISomeInterface* SOMEHANDLE;

#define EXTERN_C     extern "C"

EXTERN_C SOMEAPI SOMEHANDLE WINAPI CreateSomething(VOID); 
```

然后我有`SomeDLL.dll`哪些工具`ISomeInterface`和`CreateSomething`.
当我尝试在我的客户端中使用它时，我收到链接器错误。客户端如下所示：
**Client.cpp**

```
#include "interface.h"
SOMEHANDLE h = ::CreateSomething();  // Linker error here: Unresolved external 
```

我可以通过将 dll 项目添加为 VC++ 中客户端项目的依赖项来解决这个问题。然后一切都很好。
问题是如果我想使用这个独立的 dll（现在就是这种情况）怎么办？那我该如何摆脱链接器错误呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T16:06:00.437

> 我可以通过将 dll 项目添加为客户端项目的依赖项来解决这个问题

是的，这会自动完成您在独立项目中必须手动完成的一件事。项目 + 属性、链接器、输入、附加依赖项设置。添加由 DLL 项目生成的 .lib 文件。导入库，它告诉链接器有关 DLL 导出的函数。

# wpf - 有没有像 WPF 一样支持数据绑定的跨平台 GUI 框架？

> ID：13322042
> 
> 赞同：4
> 
> 时间：2012-11-10T12:26:29.037
> 
> 标签：wpf, user-interface, data-binding, cross-platform

最近在做一个游戏项目，需要开发一些编辑器供设计师使用。当其他程序员都在 Windows 上工作时，我在 Mac OS X 上工作。我熟悉 WPF 和 Windows 窗体开发，我正在寻找一些支持类似于 WPF 或 Windows 窗体开发的数据绑定的 GUI 框架。

GUI 框架应该满足这些：

*   跨平台
*   支持数据绑定到对象（如 WPF 或 Windows 窗体）
*   最好支持 XML 序列化，因为 XML 是我们的数据格式

顺便说一句，我不关心编程语言，欢迎基于任何编程语言的 GUI 框架。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T12:46:49.240

取决于您要支持的平台，但您可以看看 Moonlight，它是 silverlight 的单端口。看看这个页面的替代部分： [http ://www.mono-project.com/WPF](http://www.mono-project.com/WPF)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T12:54:01.353

Silverlight 在 MacOS 上运行。

它也会用完浏览器，因此您可以创建一个不需要运行浏览器的应用程序，因此看起来像一个普通的桌面应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T15:36:36.453

Knockout.js 据说不错。我的同事更喜欢它而不是 Wpf 和 Silverlight 绑定。例如，如果你有一个 fullname prop，它是 firstname 和 lastname 的结果，你必须在 Wpf 中使用 propertychanged 进行麻烦，在 Knockout.js 中你将它定义为 observable 并且运行时让它正确地通知它的观察者。它还支持验证。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-10T21:47:52.197

尽管它没有像 WPF 或 Windows 窗体那样的数据绑定，但[Real Studio](http://www.realsoftware.com)确实非常适合创建跨平台应用程序。当然，还支持 XML。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-13T06:22:50.270

试试 JavaFx，它比 Java Swing 更支持绑定。样式也是基于 CSS 而不是 Microsoft 专有的样式逻辑。

WPF 和 JavaFX 都将针对 GPU 以实现超快渲染；它们是可比的和竞争对手的技术。但是 JavaFX 是跨平台的，考虑到微软的业绩记录，不太可能被放弃。

[http://www.oracle.com/technetwork/java/javase/overview/javafx-overview-2158620.html](http://www.oracle.com/technetwork/java/javase/overview/javafx-overview-2158620.html)

此外，这里的其他答案说 Silverlight，但微软已经放弃了这一点。

# objective-c - 将 iOS UIView 导出为 svg 的字体大小

> ID：13322045
> 
> 赞同：1
> 
> 时间：2012-11-10T12:26:47.860
> 
> 标签：objective-c, ios, cocoa, svg

在 ipad 上开发绘图应用程序。我正在尝试导出我在画布上绘制的任何内容（覆盖 UIView drawRect）。除文本外，一切正常。问题在于字体大小。

我正在使用 systemFontOfSize:size 创建字体以在画布上绘图，并且在导出时，我使用与 pt 相同的大小。例如，如果大小为 15，则在导出的 svg 中，添加 text 标签的样式属性为

样式=“字体大小：15pt；”

Apple 文档说 systemFontOfSize 采用 fontSize 为单位。所以我在画布上绘制的任何内容都应该与 svg 中的文本大小相同（由 firefox、Inkscape 渲染）

但是 svg 渲染的文本的大小似乎更大。我在画布上有其他绘图，例如矩形，相对于矩形的文本大小在 svg 中大于 ipad 屏幕上显示的大小。我还在 UIView 和 svg 上使用点单元绘制矩形。

有什么我想念的吗？我在两个地方都使用点单元，所以 DPI 应该没关系..

# android - 如何以编程方式逐行读取我的 Logcat

> ID：13322051
> 
> 赞同：0
> 
> 时间：2012-11-10T12:27:37.337
> 
> 标签：android, logcat

我想使用我的应用程序本身逐行阅读我的 Log cat。这是我放在下面的代码

```
 try {
        Process process = Runtime.getRuntime().exec("logcat -v time");//logcat -v time//logcat -d
        BufferedReader bufferedReader = new BufferedReader(
        new InputStreamReader(process.getInputStream()));

        StringBuilder log=new StringBuilder();
        String line = "";
        while ((line = bufferedReader.readLine()) != null) {
          log.append(line);
        }
        TextView tv = (TextView)findViewById(R.id.textView1);
        System.out.println("logas = "+log);
        tv.setText(log.toString());

      } catch (IOException e) {
      } 
```

所以基本上我想调整这段代码来读取日志猫，直到使用停止它。所以我应该开始使用 asyncTask 还是有其他解决方案？

# javascript - 活动元素的样式父级

> ID：13322052
> 
> 赞同：0
> 
> 时间：2012-11-10T12:27:57.970
> 
> 标签：javascript, html, css

我的 HTML 如下所示：

```
<div>
    <span> content </span>
</div> 
```

当我点击 时`span`，我得到一个`:active`伪类，以便我可以设置它的样式。我的问题是我想`div`在孩子是`:active`.

有没有办法使用 CSS（我不这么认为）或 JavaScript 来做到这一点？

回答前需要注意两点：

1.  这个问题与此类似，只是这里的类不是普通`.active`类，而是伪类`:active`。
2.  提供的 HTML 只是示例 HTML，我正在寻找一个通用解决方案，该解决方案适用于页面中的所有元素及其活动时的父元素，而不仅仅是这些特定项目。所以像一个天真的`$('span').click()`处理程序这样的解决方案`.parent()`不会很理想地工作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T12:46:44.463

您可以使用 document.activeElement：

```
document.addEventListener("mousedown",function(){
    document.activeElement.parentElement.style.backgroundColor="red";
}); 
```

我注意到您没有包含 jQuery 标记，因此这是一种原生 JS 方法。

编辑：有趣的是，这不起作用。出于您的目的，您可以简单地使用：

```
document.addEventListener("mousedown",function(e){
    e.target.parentElement.style.backgroundColor="red";
});

document.addEventListener("mouseup",function(e){
    e.target.parentElement.style.backgroundColor="";
}); 
```

[在此处](http://jsfiddle.net/CEsGH/1/)查看演示。我要问一个关于这个的问题，然后回复你为什么前者不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T12:32:10.833

这会找到页面中的所有跨度，并创建一个 onclick 事件，将焦点放在其父节点上

```
var allSpans = document.getElementsByTagName('span');

for(var x = 0; x < allSpans.length; x++) {
    allSpans[x].parentNode.setAttribute('tabIndex',0); // this might not be required
    allSpans[x].onclick = function() {
        this.parentNode.focus();
    }
} 
```

[在此处](http://pastebin.com/s5jnMY09)检查示例实现

# javascript - javascript中的模块化设计

> ID：13322056
> 
> 赞同：0
> 
> 时间：2012-11-10T12:28:06.847
> 
> 标签：javascript, node.js, design-patterns

我正在尝试扩展 node.js 模块以进行降价到 HTML 的转换。目前，我这样做是为了预处理降价字符串`data`：

```
md = require('marked');

/**
 * Preprocesses a markdown string before it gets parsed by the 'marked' module
 **/
exports.markdownToHTML = function(data) {
  data = data.replace(/(\[youtube\]\(.*\))/gi, youtubeProcessor);
  data = md.parse(data);
  return data;
};

/**
 * Looks for substring [youtube](videoid) and returns the iframe tag
 **/
exports.youtubeProcessor = function(match) {
  var regexp = /\[youtube\]\((.*)\)/;
  var id = regexp.exec(match)[1];
  var youtube = "<iframe width='420' height='315' src='http://www.youtube.com/embed/_{id}' frameborder='0' allowfullscreen></iframe>";
  youtube = youtube.replace("{id}",id);
  return youtube;
} 
```

这不是经过深思熟虑的，而且很丑陋。设计可扩展的模块化预处理器的最佳方式是什么？我是函数式编程和 javascript 的新手，因此正在寻找设计模式。

在我看来，您将如何实现`markdownToHtml`具有可扩展性的方法（进一步的“处理器”）？

**编辑：**`this`从源代码中删除。

# ios - 无法向数据库 SQLite iPhone 插入新行

> ID：13322058
> 
> 赞同：-1
> 
> 时间：2012-11-10T12:28:11.370
> 
> 标签：ios, sqlite

我无法在数据库中插入新行。我究竟做错了什么？

```
-(void)InsertRecords{
    fileMgr = [NSFileManager defaultManager];
    sqlite3_stmt *stmt;
    sqlite3 *cruddb;

    const char *sql = "Insert into AllDictionary(id, DeleteFlag, TitleBD, Description, PathToDB, ImageURL) VALUES('565','asasf2','asfas2ff','fggaga2hah','b2bb','aa2aa')";
    NSString *cruddatabase = [self.GetDocumentDirectory stringByAppendingPathComponent:@"MainDb.sqlite"];

    if(!(sqlite3_open([cruddatabase UTF8String], &cruddb)==SQLITE_OK))
    {
        NSLog(@"An error has occured: %s",sqlite3_errmsg(cruddb));
    }
    if (sqlite3_prepare(cruddb, sql, -1, &stmt, NULL)!=SQLITE_OK) {
        NSLog(@"Problem with prepare statement: %s", sqlite3_errmsg(cruddb));
    } else {
        sqlite3_step(stmt);
    }
    sqlite3_finalize(stmt);
    sqlite3_close(cruddb);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T12:41:17.657

您的 ID 类型是 int。所以问题出在查询上，

```
const char *sql = "Insert into AllDictionary(id, DeleteFlag, TitleBD, Description, PathToDB, ImageURL) VALUES('565','asasf2','asfas2ff','fggaga2hah','b2bb','aa2aa')"; 
```

不要对整数值使用引号，而是对字符串值使用引号。将查询更改为：

```
const char *sql = "Insert into AllDictionary(id, DeleteFlag, TitleBD, Description, PathToDB, ImageURL) VALUES(565,'asasf2','asfas2ff','fggaga2hah','b2bb','aa2aa')"; 
```

而且你的方法有很多错误，比如如果数据库没有打开，prepare语句总是会执行。无论是否执行准备语句，Finalize 语句都将始终有效。所以像这样重写它：

```
-(void)InsertRecords
{
    fileMgr = [NSFileManager defaultManager];
    NSString *cruddatabase = [self.GetDocumentDirectory stringByAppendingPathComponent:@"MainDb.sqlite"];
    sqlite3_stmt *stmt;
    sqlite3 *cruddb;

    const char *sql = "Insert into AllDictionary(id, DeleteFlag, TitleBD, Description, PathToDB, ImageURL) VALUES(565,'asasf2','asfas2ff','fggaga2hah','b2bb','aa2aa')";

    if((sqlite3_open([cruddatabase UTF8String], &cruddb)==SQLITE_OK))
    {
        if (sqlite3_prepare(cruddb, sql, -1, &stmt, NULL) ==SQLITE_OK)
        {
            sqlite3_step(stmt);
            sqlite3_finalize(stmt);
        }
        else 
        {
            NSLog(@"Problem with prepare statement: %s", sqlite3_errmsg(cruddb));
        }
        sqlite3_close(cruddb);
    }
    else
    {
       NSLog(@"An error has occured: %s",sqlite3_errmsg(cruddb));
    }
} 
```

# javascript - jquery - onclick 内容向下滑动

> ID：13322065
> 
> 赞同：1
> 
> 时间：2012-11-10T12:29:30.233
> 
> 标签：javascript, jquery, navigation

我的javascript有问题（我处于真正的初学者状态，对此感到抱歉）

我有一个这样的菜单：

```
<ul class="menu">
   <li><a href="#">Home</a></li>    
   <li class="shownav"><a href="#">Services</a></li>    
   <li><a href="#">Projects</a></li>    
</ul> 
```

而我的内容与此类似：

```
<div id="contentwrapper">
     <div id="content">
          <!--Content here-->
     </div>
</div> 
```

我想要实现的是，当您单击 li.shownav 时，#contentwrapper 将向下滑动 30 像素并显示第二个导航栏

有什么方法可以触发 div 下降 30 像素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T12:39:27.510

```
$(document).ready(function() {
    $('.menu li.shownav').click(function() {
        //will auto slide down content below it for it to fit
        $('#navigationBar').slideDown();
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T13:00:59.767

你应该：

首先旨在使菜单仅在 CSS 中工作（否则非 js 浏览器将根本无法导航）

这是一个简单的 css 水平菜单，带有一级子菜单下拉菜单

css 使用 :hover

```
.menu>li{float:left;display:block;padding:10px;position:relative;}
.menu>li.nav>ul,.menu>li.shownav>ul{display:none;position:absolute;top:2em}
.menu>li.nav:hover>ul{display:block;} 
```

Html（作者稍作修改：

```
<ul class="menu">    
  <li><a href="#">Home</a></li>        
    <li class="nav"><a href="#">Services</a>
    <ul>
        <li><a href="#">Submenu</a></li>
    </ul>
  </li>        
  <li><a href="#">Projects</a></li>     
</ul> 
```

[不依赖 javascript 的一级 cssmenu](http://jsfiddle.net/axZDB/8/)

然后开始添加js（jquery或其他）。这是上面的一个简单版本，包括一个 slideToggle 动画 onclick

.js

```
$(document).ready(function() {
    $('li.nav').attr('class', 'shownav');//this removes the css class that is targetted by the rules so .js will now take over
    $('.menu li.shownav').click(function() {
        //will auto slide down content below it for it to fit
        $('ul', this).slideToggle();
    });
}); 
```

[点击完成 jquery+css 后备菜单](http://jsfiddle.net/axZDB/24/)

# html - 如何在保留 inline-block 显示的同时实现 float:right 效果？

> ID：13322070
> 
> 赞同：36
> 
> 时间：2012-11-10T12:30:22.117
> 
> 标签：html, css

考虑以下 jsFiddle：http: [//jsfiddle.net/mark69_fnd/yqdJG/1/](http://jsfiddle.net/mark69_fnd/yqdJG/1/)

### HTML：

```
<div id="container">
    <div class="char">
        AAA
    </div>
    <div class="char stickToRight">
        BBB
    </div>
</div>​ 
```

### CSS：

```
#container {
    border:solid 2px green
}
.char { 
    display: inline-block;
    border: solid 2px red;
}
.stickToRight {
    float: right
}​ 
```

有没有另一种方法`.stickToRight`可以正确对齐*而不浮动？*

我需要保留它，`display:inline-block`以便我可以使其垂直对齐与其他`.char`元素保持一致。

如何`float:right`在保持元素的同时实现右对齐效果`display:inline-block`？（请注意，我不知道容器元素的宽度。）

如果有的话，我想要纯粹的 CSS 解决方案。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2015-08-09T16:39:04.893

我遇到了同样的问题，发现`direction: rtl;`在容器上使用是最好的解决方案。[https://css-tricks.com/almanac/properties/d/direction/](https://css-tricks.com/almanac/properties/d/direction/)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-11-10T14:16:23.560

一个元素不能`inline-block`同时浮动。

当元素设置为 时`inline-block`，它与`display:inline`元素的不同之处在于它可以指定宽度和高度。然而，它仍然是内联布局流程的一部分——它的水平位置由它的源顺序和`text-align`它的块级父级的属性决定，它与行的垂直位置由`vertical-align`属性决定。

当一个元素浮动时，它不再是内联布局流程的一部分。它的水平位置取决于它是浮动的`left`还是，以及在它之前是否有其他浮动元素，它的垂直位置取决于一组相当复杂的规则，Eric Meyer 在*CSS*`right`中很好地描述了这些规则：权威指南，但基本上归结为“如果它没有浮动，它会出现在其中的内联框的顶部”。

 *当您说您希望元素同时浮动时，我仍然不太确定您在想象什么视觉效果`inline-block`，但是浮动布局在水平和垂直位置方面与布局不同`inline-block`，并且没有t 任何方式来组合它们。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2017-09-12T10:33:17.737

既然`inline`元素不能`float`，我们就不能构建一些复杂的布局。然后引入了[flexbox](https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Flexible_Box_Layout/Using_CSS_flexible_boxes)，现在我们有了一个强大的技术可以解决大多数布局问题。要达到您的预期结果，只需这样做：

```
#container {
  border: solid 2px green;
  display: flex;
}

.char {
  border: solid 2px red;
  ;
}

.float-right {
  margin-left: auto;
}
```

```
<div id="container">
  <div class="char ">
    AAA
  </div>
  <div class="char float-right">
    BBB
  </div>
</div>
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2018-01-13T21:05:02.410

应用于`text-align: right`父 div

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-01-27T15:26:27.117

如果您想在不使用浮动的情况下使其父元素的右侧对齐，您可以使用 CSS3 box-flex 属性。这是一篇关于如何使用它的示例的帖子： [如何在右侧对齐 inline-block 元素？](https://stackoverflow.com/questions/9202607/how-to-align-on-the-right-an-inline-block-element)

标记它是 CSS3 解决方案，因此不兼容所有浏览器（指向 IE9-）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-05-04T03:59:23.663

我个人会不惜一切代价避免`float: right`和展示，但这是我的偏好。除了诉诸绝对定位这一必要的邪恶之外，我还没有找到更好的方法来做到这一点。尽管出于此目的，它可能`display: inline-block`毫无用处，但通常在这些情况下会产生预期的效果。一个例子是（使用您的代码作为指导）一个标题，其标志定位为“浮动”左侧，`ul`定位为“浮动”右侧。

```
 <div class="container">
        <h1>Logo</h1>
        <ul>
          <li> Link 1 </li>
          <li> Link 2 </li>
        </ul>
      </div> 
```

基本的 CSS 是：

```
 .container {
     max-width: 1200px;
     width: 100%;
     margin: 0 auto;
     position: relative;
     padding: 0 15px;
     box-sizing: border-box;
   }
   .container h1 {
     display: inline-block;
   }
   .container ul {
      padding: 0;
      margin: 0;
      display: inline-block;
      position: absolute;
      right: 15px; /* I use 15px to replicate the 15px padding on the container*/
   }
   .container ul li {
      display: inline-block;
   } 
```

这是我最常使用此代码的场景。在大多数情况下，在内容中，我的容器都有百分比宽度，从而消除了（大部分时间）定位的需要。IE：

```
 <div class="container">
          <div class="left"></div>
          <div class="right"></div>
       </div>

       .container {
           max-width: 1200px;
           width: 100%;
           margin: 0 auto;
        }
        .left {
           display: inline-block;
           width: 60%;
           margin-right: -4px; /* I use this because I've noticed a 4px spacing when using inline block sometimes */
        }
        .right {
          display: inline-block;
          width: 40%;
          margin-right: -4px;
        } 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2014-10-29T19:57:13.093

帮助解决这个问题可能为时已晚，但以防万一有人偶然发现，给你。Paul D. Waite，回答了您问题的根源。我想我知道你想要达到的目标。我做了一些“错误”的事情来做到这一点，以防万一你绝望并且想要避免使用 Flexbox。保持你的最后一个元素内联块，并浮动：对。并将其添加到其中。.last-element-in-your-row

```
{
display: inline-block;
float: right;
/*add this to stick that guy on the right*/
position: relative;
right: 0;
top: 0;} 
```

同样，这不是正确的方法，但它有效......*

# java - 渲染多层瓷砖

> ID：13322075
> 
> 赞同：1
> 
> 时间：2012-11-10T12:31:05.767
> 
> 标签：java, tiles, slick2d

我有一个小问题，当我尝试在游戏中绘制多层瓷砖时，只显示顶层。例如，我有一个 for 循环来绘制空气砖，在它下面我有另一个来绘制石砖。只有空气砖会绘制，无论我做什么，石砖都不会。这是我的地图类：

```
public class Map {

public static final int CLEAR = 0;
public static final int STONE = 1;
public static final int GRASS = 2;
public static final int DIRT = 3;

public static final int WIDTH = 32;
public static final int HEIGHT = 24;

public static final int TILE_SIZE = 25;

static ArrayList<ArrayList<Integer>> map = new ArrayList<ArrayList<Integer>>(WIDTH * HEIGHT);

Image air, grass, stone, dirt;

public Map() {

    for (int x = 0; x < WIDTH; x++) {
        ArrayList<Integer> yaxis = new ArrayList<Integer>();
        for (int y = 0; y < HEIGHT; y++) {
            yaxis.add(CLEAR);
        }
        map.add(yaxis);
    }

    for (int x = 0; x < WIDTH; x++) {
        ArrayList<Integer> yaxis = new ArrayList<Integer>();
        for (int y = 0; y < HEIGHT; y++) {
            yaxis.add(STONE);
        }
        map.add(yaxis);
    }

    try {
        init(null, null);
    } catch (SlickException e) {
        e.printStackTrace();
    }
    render(null, null, null);

}

public void init(GameContainer gc, StateBasedGame sbg) throws SlickException {
    air = new Image("res/air.png");
    grass = new Image("res/grass.png");
    stone = new Image("res/stone.png");
    dirt = new Image("res/dirt.png");
}

public void render(GameContainer gc, StateBasedGame sbg, Graphics g) {

    for (int x = 0; x < map.size(); x++) {
        for (int y = 0; y < map.get(x).size(); y++) {
            switch (map.get(x).get(y)) {
            case CLEAR:
                air.draw(x * TILE_SIZE, y * TILE_SIZE, TILE_SIZE, TILE_SIZE);
                break;
            case STONE:
                stone.draw(x * TILE_SIZE, y * TILE_SIZE, TILE_SIZE, TILE_SIZE);
                break;
            case GRASS:
                grass.draw(x * TILE_SIZE, y * TILE_SIZE, TILE_SIZE, TILE_SIZE);
                break;
            case DIRT:
                dirt.draw(x * TILE_SIZE, y * TILE_SIZE, TILE_SIZE, TILE_SIZE);
                break;
            }
        }
    }
} 
```

}

如果有人可以提供帮助，那就太棒了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T12:51:42.587

您要添加空气行，然后在此处添加石行：

```
for (int x = 0; x < WIDTH; x++) {
    ArrayList<Integer> yaxis = new ArrayList<Integer>();
    for (int y = 0; y < HEIGHT; y++) {
        yaxis.add(CLEAR);
    }
    map.add(yaxis);
}

for (int x = 0; x < WIDTH; x++) {
    ArrayList<Integer> yaxis = new ArrayList<Integer>();
    for (int y = 0; y < HEIGHT; y++) {
        yaxis.add(STONE);
    }
    map.add(yaxis);
} 
```

问题是石块超出了预期的地图大小 (32 x 24)，因为您添加的行数是您认为的两倍。

尝试用数组替换列表列表，您会发现您超出了范围。

编辑：这是使用随机数据初始化地图的正确方法：

```
java.util.Random random = new java.util.Random();

for (int x = 0; x < WIDTH; x++) {
    ArrayList<Integer> yaxis = new ArrayList<Integer>();
    map.add(yaxis);
    for (int y = 0; y < HEIGHT; y++) {
        yaxis.add(random.nextInt(4));
    }
} 
```

请注意，之后您将不会添加图块，只需更改值，例如。

```
map.get(10).set(5, CLEAR); 
```

# jquery - 如何处理 Backbone.js 收集请求中的 204 响应

> ID：13322079
> 
> 赞同：5
> 
> 时间：2012-11-10T12:31:30.180
> 
> 标签：jquery, ajax, backbone.js

在我的基于 Backbone.js 的应用程序中，我正在与我的 API 交谈，该 API 以 204 状态和一个空正文响应，以防请求的集合尚不包含任何数据。在我看来，这就是 RESTful API 在这种情况下应该如何响应。

现在在我的应用程序中，我遇到了问题，显然在收到 204 响应后没有触发任何事件。我试图绑定`reset`并`all`喜欢：

```
 FoosCollectionView.prototype.initialize = function() {
    this.collection = new FoosCollection;
    this.collection.bind('reset', this.render, this);
    this.collection.bind('all', this.render, this);
    return this.collection.fetch();
  }; 
```

但这些事件永远不会发生。所以我试图给 fetch 一些回调：

```
 FoosCollectionView.prototype.initialize = function() {
    this.collection = new FoosCollection();
    return this.collection.fetch({
      success: function(a, b, c) {
        debugger;
      },
      error: function(a, b, c) {
        debugger;
      },
      complete: function(a, b) {
        debugger;
      }
    });
  }; 
```

相同的行为。如果响应是 204，则不会到达任何调试语句。那么我该如何处理 204 响应呢？我是否必须深入研究`sync`并在那里为 204 添加额外的处理，或者 Backbone 中是否有一些我根本不知道的东西？

谢谢菲利克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T11:32:26.673

该解决方案似乎同时非常先进和尴尬：

我只是`parse`在我的集合中定义该方法，以便它检查传递的响应对象是否为空。只有发生 204 时才会出现这种情况。然后在里面`parse`我设置`this.collection.models = []`触发`reset`事件。集合视图绑定到该事件，运行一个可以查看内部的函数`this.collection.models`。如果没有给出模型，则可以呈现“无内容”模板而不是标准模板。

如果有人有更好的方法，我会很感激！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-22T20:37:17.660

Backbone.js 将此类响应包装到空集合中。我正在使用它作为解决方法。

```
render: function(){
   if (this.collection.length == 0) {
       console.log('empty response');
       // initialize with default values
       this.collection.reset(data);
   }
   // do usual stuff
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-08T15:45:39.767

今天也出现了同样的问题，从结论上说，我的代码是错误的。修改代码后，`success()`当服务器响应时调用回调`204 No Content`。

主干：1.2.3
jQuery：2.1.4

**错误代码：**

```
FooCollection = Backbone.Collection.extend({
  url: '/foo',

  model: FooModel,

  fetch: function (options) {

    // do something.

    // Actually, you should call `Backbone.Collection.prototype.fetch()`.
    return Backbone.Model.prototype.fetch.call(this, options);
  }
}); 
```

所以，如果你遇到这个问题，你应该检查代码中是否有任何错误。无论如何，如果要处理`204 No Content`响应，则有以下方法。**（不建议）**

```
 initialize: function() {
    this.collection = new FooCollection();

    var _this = this;
    this.collection.fetch({
      success: function (collection, response, options) {
      },
      error: function (collection, response, options) {
      }
    }).done(function (data, textStatus, jqXHR) {
      if (jqXHR.status === 204) {
        // do something.
        // e.g. _this.collection.reset();
      }
    });
  } 
```

# ruby - 更改 Ruby 中的每个字符串项

> ID：13322085
> 
> 赞同：1
> 
> 时间：2012-11-10T12:32:19.790
> 
> 标签：ruby

是）我有的

```
"path1/path2/path3" 
```

我想要的是

```
"my_namespace:path1/my_namespace:path2/my_namespace:path3" 
```

我做到了：

```
a = "path1/path2/path3"
b = a.split("/").map{ |item| "my_namespace:"+ item}
puts b.join("/") 
```

当然，它有效。但我很好奇是否还有其他更好的方法可以做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T12:44:56.963

```
a.gsub(/(?<=^|\/)/, "my_namespace:")
# => "my_namespace:path1/my_namespace:path2/my_namespace:path3" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T12:36:56.627

似乎是一个很好的用例`String#gsub`：

```
a = "path1/path2/path3".gsub(%r{[^/]+/?}) { |m| "mynamespace:#{m}" }
p a #=> "mynamespace:path1/mynamespace:path2/mynamespace:path3" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T12:43:04.130

也许您的路径意味着不同的名称空间。如果是这样，那么您可以使用 zip

```
"path1/path2/path3".split('/').zip(['namespace1','namespace2','namespace3']).
  map { |p,n| n + ':' + p }.join('/')

=> "namespace1:path1/namespace2:path2/namespace3:path3" 
```

# ios - 估计 UIWebView 的高度

> ID：13322087
> 
> 赞同：2
> 
> 时间：2012-11-10T12:32:41.133
> 
> 标签：ios, cocoa-touch, uiwebview

我喜欢估计 UIWebView 将采用的大小，因为我在表格中使用 webview，如果我知道估计的高度，我可以立即将表格单元的大小调整为正确的高度。

因此，当我获得 HTML 时，我计划触发低优先级背景威胁来创建 WebView，计算大小，并将其与 HTML 一起存储在数据库中。然后当用户打开文章时，高度可用。

但是当我这样做时，我得到以下错误：

> bool _WebTryThreadLock(bool), 0xb59b610: 试图从主线程或web线程以外的线程获取web lock。这可能是从辅助线程调用 UIKit 的结果。现在崩溃...

有没有办法在不引起这个问题的情况下确定 HTML 的高度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T12:42:05.360

您可以使 UIWebView 不可见，但它必须在主线程上。

尝试：

```
webView.layer.zPosition = -1.0;
webView.userInteractionEnabled = NO; 
```

# javascript - 自动调整 DIV 中的内容宽度

> ID：13322091
> 
> 赞同：1
> 
> 时间：2012-11-10T12:32:59.333
> 
> 标签：javascript, css

我对 css 和 javascript 完全陌生，需要一些帮助来构建条形图。除其他外，我的问题是我需要在盒子 DIV 内自动调整条形 DIV 的宽度。因此，如果“元素”列表中有 2 个值，那么它们应该拉伸并填充 DIV，但如果有 10 个，它们需要收缩。

Javascript

```
var element = [ 189, 128, 28, 88];
var _body = document.getElementsByTagName("body")[0];
var _div = document.createElement("div");
_div.id = "box";
_body.appendChild(_div);

var mainbox = document.getElementById("box");

for (var i=0; i <= element.length; i++){
var bars = document.createElement("div");
bars.setAttribute("class", "bar");
bars.id = "bar";
bars.style.height = element[i]+"px";
mainbox.appendChild(bars);
}

var text = document.createElement("div");
text.setAttribute("class", "text");
text.innerHTML="Mitt stapeldiagram";
mainbox.appendChild(text); 
```

CSS 我已将“宽度”值设置为 100%，但我不知道这是否正确？

```
.text{
font-family:"Times New Roman", Times, Sans-serif;
font-size:28px;
font-weight:bold;
color:gray;
text-align:center;
margin-top:370px;
overflow:hidden;
}

#box{
overflow:hidden;
width: 500px;
height: 400px;
margin-top:50px;
margin-left:50px;
padding:10px;
background-color:lightgray;
border-top:3px solid black;
border-right:3px solid black;
box-shadow: 10px 10px 5px #888;
}

.bar{
float:left;
position:relative;
width:100%;
margin:3px;
background-color:blue;
box-shadow: 5px 2px 5px #888;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T12:55:51.100

试试这个

```
var element = [189, 128, 28, 88];

        var _body = document.getElementsByTagName("body")[0];
        var _div = document.createElement("div");
        _div.id = "box";
        _body.appendChild(_div);

        var mainbox = document.getElementById("box");

        // set total box height
        var mainboxHeight = 400;
        // get total
        var total = 0;
        for (var i = 0; i < element.length; i++)
            total += parseInt(element[i]);

        for (var i = 0; i <= element.length; i++) {
            // change elements to percentage
            var elementPerc = Math.round((element[i] / total) * 100);

            var bars = document.createElement("div");
            bars.setAttribute("class", "bar");
            bars.id = "bar";

            var heightPerc = Math.round((elementPerc / 100) * mainboxHeight);

            bars.style.height = heightPerc + "px";
            mainbox.appendChild(bars);
        }

        var text = document.createElement("div");
        text.setAttribute("class", "text");
        text.innerHTML = "Mitt stapeldiagram";
        mainbox.appendChild(text); 
```

查看这些现场演示

[http://jsfiddle.net/Y3ZzT/](http://jsfiddle.net/Y3ZzT/)

[http://jsfiddle.net/dWjGr/](http://jsfiddle.net/dWjGr/)

# matlab - Matlab刻度线外（不是内）轴框

> ID：13322092
> 
> 赞同：9
> 
> 时间：2012-11-10T12:33:11.693
> 
> 标签：matlab, plot

有没有办法将刻度线扩展到轴的外部，或者通常将它们显示在轴的外侧。在我的直方图中

![在此处输入图像描述](../Images/7a90dd3a7b303abcb096ba348ff493be.png)

由于条形的边缘颜色，您无法真正注意到 X 轴上的刻度线。这就是为什么我想将它们扩展到下面的数字。

我知道应该可以在轴的顶部画一些额外的线，但是有没有更快的方法呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-10T13:17:02.823

您可以使用`set(gca, 'TickDir', 'out')`. 可以在[此处](http://www.mathworks.com/help/matlab/ref/axes_props.html)找到轴属性的完整参考。

***编辑。*** 没有直接的方法可以将刻度方向仅应用于一个轴。这是一个使用两个轴对象的半破解，每个轴一个：

```
plot([1 2 3], [1 2 3]);
h1 = gca;
h2 = copyobj(h1, gcf);
set(h1, 'TickDir', 'out', 'YTick', []);
set(h2, 'XTick', []); 
```

# django - 尝试从 Tastypie 中的一个端点返回相关模型的数据，但相关数据始终为空

> ID：13322096
> 
> 赞同：0
> 
> 时间：2012-11-10T12:33:59.023
> 
> 标签：django, tastypie

我是 Django 的 Tastypie 包的新用户，我的 API 已经启动并运行。我有一个端点试图返回一个模型及其相关模型的数据。即使我没有收到任何错误，相关模型的数据也始终为空（请参见以下示例）：

```
{
    "collection": [],
    "first_name": "Bob",
    "last_login": "2012-11-10T20:00:25",
    "last_name": "Schliffman",
    "resource_uri": "/api/v1/user/2/",
    "username": "flip"
} 
```

模型中有相应的数据（在管理控制台中验证），但只是没有出现。以下是 中的相关资源定义`api.py`：

```
class UserResource(ModelResource):
    collection = fields.ToManyField('maps.api.resources.CollectionResource', \
        attribute='collections', full=True, null=True)

    class Meta:
        queryset = User.objects.all()
        resource_name = 'user'
        fields = ['username', 'first_name', 'last_name', 'last_login']
        allowed_methods = ['get']

class CollectionResource(ModelResource):
    user = fields.ToOneField(UserResource, 'user')

    class Meta:
        queryset = Collection.objects.all()
        resource_name = 'collection'
        allowed_methods = ['get', 'post'] 
```

关于我需要做什么才能让该`collection`属性填充相关数据的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T13:04:05.130

这条线很关键：

```
collection = fields.ToManyField('maps.api.resources.CollectionResource', \
                 attribute='collections', full=True, null=True) 
```

它的意思是在模型中寻找`collections`属性`User`，然后使用`CollectionResource`. 换句话说，您应该确保您的`User`模型具有`collections`属性。为此，您的`Collection`模型必须有一个外键`related_name`：

```
from django.contrib.auth.models import User
def Collection(models.Model):
    ...
    user = models.ForeignKey(User, related_name='collections') 
```

如果你有，Tastypie 应该能够获取这些集合并将它们显示在你的`UserResource`.

# python - Pymongo - 如何将状态作为代表集的 python 字典

> ID：13322100
> 
> 赞同：7
> 
> 时间：2012-11-10T12:34:41.363
> 
> 标签：python, mongodb, pymongo

我是 mongo 的新手，我正在使用 pymongo。我发现 pymongo 的文档到处都是。

1）我有一个代表集。从 mongo shell，如果我运行下面的命令，我会得到我需要的东西。

```
sudo mongo 111.111.111.111 --eval "printjson(rs.status())"
MongoDB shell version: 2.2.1
connecting to: 111.111.111.111/test
{
    "set" : "hey",
    "date" : ISODate("2012-11-10T11:47:58Z"),
    "myState" : 1,
    "members" : [
        {
            "_id" : 0,
            "name" : "111.111.111.111:27017",
            "health" : 1,
            "state" : 1,
            "stateStr" : "PRIMARY",
            "uptime" : 69189,
            "optime" : Timestamp(1352478921000, 1),
            "optimeDate" : ISODate("2012-11-09T16:35:21Z"),
            "self" : true
        }
    ],
    "ok" : 1
} 
```

我需要从 pymongo 获取该信息。

1）我连接到主节点。我得到`none`但根据上述节点是主要的：

```
c = ReplicaSetConnection("111.111.111.111:27017", replicaSet='heythat')
print c.primary
None 
```

2) 我想运行`c.command("status")`，但不支持该操作。

那么，我如何使用 pymongo 来返回主目录并以 Python 字典的形式返回状态？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-12T12:52:27.790

`rs.status()`调用'replSetGetStatus'管理命令，在python中你可以这样做：

```
conn = ReplicaSetConnection("111.111.111.111:27017", replicaSet='heythat')
conn.admin.command('replSetGetStatus') 
```

Protip：如果你想知道 shell 助手调用什么命令，那么把括号从函数中去掉以查看代码，例如：

```
heythat:PRIMARY> rs.status
function () {
    return db._adminCommand("replSetGetStatus");
} 
```

# ios5 - 如何在 IOS 中通过滑动手势打开和关闭我的 UIToolbar？

> ID：13322104
> 
> 赞同：1
> 
> 时间：2012-11-10T12:34:59.363
> 
> 标签：ios5, uitoolbar, uiswipegesturerecognizer

我是IOS应用程序开发的新手，所以请帮助我。我的应用程序中有一个工具栏，我在其中添加了一些按钮，我希望这个工具栏作为按钮出现在左下角，当我在其上滑动（向右）时，工具栏应该打开并且当我向相反方向滑动时（左）在工具栏上，工具栏应该关闭并带有一些动画，例如向左/向右平移。

我已经创建了工具栏，但我不知道如何继续，感谢任何帮助。提前致谢。

# c# - 输入文本框的关键事件

> ID：13322105
> 
> 赞同：0
> 
> 时间：2012-11-10T12:35:05.857
> 
> 标签：c#, asp.net, c#-4.0, keypress

我是 asp.net 的新手。在这里，我正在尝试创建一个聊天应用程序。在我的项目中有一个标签和一个文本框。每当用户在 TextBox 中输入任何内容并按下`enter`时，文本将显示在`Label`. 我尝试了以下代码：

**文本框的OnEnterKeyPress**（.aspx.cs 文件）

```
 HttpRequest request = base.Request;           
        Ping p = new Ping();
        PingReply r;
        String s = request.UserHostAddress;  //using own IP address for understanding purpose.
        r = p.Send(s);
        Response.Buffer = false;
        if (r.Status == IPStatus.Success)
        {
            Label1.Text = TextBox1.Text;
        } 
```

我不知道如何保持输入事件。（TextBox 属性中没有事件，因为它在 C# 中）

在问这里之前，我检查了许多链接，例如[Link1](https://stackoverflow.com/questions/13158752/fire-event-on-enter-key-press-for-a-asp-net-textbox) [Link2](https://stackoverflow.com/questions/13158752/fire-event-on-enter-key-press-for-a-asp-net-textbox) [Link3](https://stackoverflow.com/q/4254576/1577396)但没有用。我本可以使用简单的 Javascript，但主要代码在 C# 文件中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T12:46:15.077

如果表单中只有一个按钮要启用“输入”，则可以将其设置为默认值

```
protected void Page_Load(object sender, EventArgs e)
{
    this.Form.DefaultButton = myTextBox.UniqueID;
} 
```

对于任何按钮，您都需要使用 Javascript。您仍然可以使用 C# 添加属性。（从[这里](http://yrbyogi.wordpress.com/2009/10/27/text-box-enter-key-in-asp-net/)）

```
myTextBox.Attributes.Add("onkeydown", "if(event.which || event.keyCode)
                  {if ((event.which == 13) || (event.keyCode == 13)) 
                      {document.getElementById('"+Button1.UniqueID+"').click();
                                         return false;}} else {return true};"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T12:58:00.770

您需要将其放在自己的形式中并使用 javascript，因为它将位于具有其他控件的页面中。您不想在他们每次输入内容时都“提交”页面。

```
<form action="javascript:chat()">
put label and textbox here
</form> 
```

这将使“输入”对文本框起作用。对于聊天功能，为了使其更具交互性，您可以使用[http://signalr.net/实现](http://signalr.net/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T12:45:30.833

您在这里可能面临的问题是事件将在服务器端处理（在 post 之后）。按下回车键后，您可能仍需要 javascript 来发布帖子。

我也不确定 OnEnterKeyPressed 是否是有效事件。

# ruby-on-rails - Rails：使用链接传递 POST 参数

> ID：13322106
> 
> 赞同：0
> 
> 时间：2012-11-10T12:35:14.543
> 
> 标签：ruby-on-rails, ruby-on-rails-3

```
 <%= link_to "Follow", { :controller => "friendship", :action => "follow",:id=> friend.id} , :remote => true, :class => "follow_user" %> 
```

1.  如何使用“链接”将参数“id”作为 POST 变量而不是 URL 中的参数传递？
2.  然后，如何在“friendship”控制器中进行“follow”操作仅接受 POST 变量，以便没有人可以在 URL 中使用“http://localhost:3000/friendship/follow?id=8”来执行操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T12:54:32.310

尝试 `<%= button_to "Follow", { controller: "friendship", action: "follow", id: friend.id}, remote: true, class: "follow_user", method: :post %>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T12:46:16.583

1.  添加`method: :post`到您的`link_to`选项中。
2.  在你的路由上使用一个约束，或者检查`request.post?`你的控制器中的请求是否是 POST 。

# jquery - 动态元素上的 Z-index

> ID：13322107
> 
> 赞同：0
> 
> 时间：2012-11-10T12:35:14.873
> 
> 标签：jquery, css, z-index

希望我能够在没有例子的情况下很好地解释这一点......

我有两个不稳定的 z-index 实例。让我解释一下：

1）我有一个带有下拉菜单的导航栏，使用 css3 幻灯片转换和 jquery 定位移动到位。我将导航栏的 z-index 设置为 100，将下拉菜单的 z-index 设置为 90。导航栏有一个阴影，我想浏览下拉菜单，但目前不会。此外，下拉菜单在导航栏上向下滑动，而它应该在下方。

2）我有一个与上述问题基本相同的页脚，只是倒置了。没有阴影重叠。尚未实施过渡，但我相信它会做同样的事情。

在您回答显而易见的问题之前，所有有问题的元素都已定位。

我希望能够在不举出例子的情况下解决这个问题，因为这是一个有很多很多部分的大项目的一部分。由于没有例子，我不希望答案很简单，但也许你可以指出我正确的方向？

如果您有任何问题，请告诉我。非常感谢！

**编辑**

我做了一个快速示例，发布在评论中。过渡不起作用，但导航的阴影没有覆盖下拉菜单

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T07:00:50.467

这不会起作用，因为您的元素是嵌套的并且 z-index 是一个继承的属性。在更改任何 z-index 之前，您必须将它们分开，以便它们处于相同的 dom 级别（而不是父级或子级）。

我给你一个例子，但我在我的手机上。当我到达电脑病态更新。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T08:01:26.027

卡利，

抱歉花了这么长时间才回来。我们停电了，我才刚刚重新上线。

我更改了您的 JSFIDDLE 的 HTML 以包含“navBack” div：

```
<nav><div class="navBack"></div> 
```

.... ETC...

和你的 CSS 替换第一行：

```
.nav { 
```

和

```
.navBack { 
```

瞧——它起作用了，影子就是你想要的地方。

# razor - MVC 布局 VS MVC 母版页

> ID：13322108
> 
> 赞同：19
> 
> 时间：2012-11-10T12:35:22.997
> 
> 标签：razor, asp.net-mvc-4, master-pages

我开始学习MVC4。我遇到了基于 Razor 模板或母版页创建视图的两种可能性。

*我想了解两者之间的实际差异*。

现在，我可以看到，如果我使用母版页创建视图，我可以覆盖多个部分。例如，如果我的 Master 定义了一个“左列”占位符和一个“正文”占位符，我不仅可以为特定视图定义正文，而且还可以在“左列”部分中呈现内容，例如显示控件绑定到页面所在的上下文（从搜索框到股票报价查看器）。此外，不能通过使用 Razor 模板来定义母版页，这些模板比其他语法要简洁得多（部分错误：[有人](http://www.hanselman.com/blog/MixingRazorViewsAndWebFormsMasterPagesWithASPNETMVC3.aspx)设法破解了这方面的内容）。

使用 Razor 布局，我只能定义**一个**可以被特定视图覆盖的连续页面块，并且我应该使用多个布局（打破 DRY）来对页面的其他部分进行少量更改。**我之前的陈述是正确的**还是我遗漏了什么？

显然我可以通过充分利用 jQuery 在页面的任何部分呈现内容，但那是另一回事

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-11-10T13:07:36.370

您可以将部分与 Razor 一起使用。Scott Gu 在这里写了关于它们的博客：[http ://weblogs.asp.net/scottgu/archive/2010/12/30/asp-net-mvc-3-layouts-and-sections-with-razor.aspx](http://weblogs.asp.net/scottgu/archive/2010/12/30/asp-net-mvc-3-layouts-and-sections-with-razor.aspx)

在您的布局中，您可以根据需要定义任意数量的部分：

```
<div id="leftMenu">
    @RenderSection("LeftMenu", required: false)
</div> 
```

您可以在视图中覆盖它：

```
@section LeftMenu {
    <div>... here comes the left menu for this view ...</div>
} 
```

您还可以测试是否在视图中定义了一个部分，如果没有提供一些默认内容：

```
@if (IsSectionDefined("LeftMenu")) { 
    @RenderSection("LeftMenu")
}
else { 
    <div>Some default left menu</div>
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-17T00:40:17.587

从 MVC3 开始，引入了剃刀视图引擎。在高层次上，视图引擎基本上就是获取视图并呈现必要的 HTML。Razor 使用 _layout.cshtml 文件和它自己的模板系统，类似于母版页。但是，MVC3 和 4 有另一个称为 WebForms View Engine 的视图引擎，它确实使用母版页。如果您分别查看 MVC1 和 MVC2 教程，您将看到母版页。在 MVC3 之前，只有 WebForms 视图引擎。

现在就功能而言，两者都是相似的。母版页允许您定义内容占位符，而 Razor 允许您定义部分。两者之间的一个主要区别在于页面的呈现方式。母版页在外渲染页面，这意味着首先是母版页，然后是内容占位符。Razor，我相信，是递归的，从最里面的部分开始，然后往回走。

查看此博客文章以获取有关剃刀布局的更多信息： [http://weblogs.asp.net/scottgu/archive/2010/12/30/asp-net-mvc-3-layouts-and-sections-with-razor。 aspx](http://weblogs.asp.net/scottgu/archive/2010/12/30/asp-net-mvc-3-layouts-and-sections-with-razor.aspx)

至于哪一个是首选，两种视图引擎都存在；但是如果你想使用剃刀语法——我强烈推荐——那么你必须使用布局系统。Razor 不允许您使用母版页。

# android - Google 应用内计费无法 恢复某些已购买的商品详细信息

> ID：13322110
> 
> 赞同：0
> 
> 时间：2012-11-10T12:35:34.670
> 
> 标签：android, in-app-purchase, in-app-billing

我已经实施了应用内计费。我的应用中有 11 件商品可供购买。购买物品工作正常。最初所有物品都处于锁定状态，购买后我将解锁它。每件商品的采购工作都很好。当我卸载我的应用程序并重新安装它时，在启动屏幕上我请求购买的项目列表，除了 2 个特定项目之外，我得到了所有购买项目的详细信息，因此它在应用程序中显示为解锁。当我尝试购买时再次，我得到了已经购买的响应。我检查了我的钱包帐户，因为它显示这两个项目已购买。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T08:27:13.343

我找到了解决方案。当我将我的 Inapp 产品添加到 Google Play 中时，我将购买类型指定为非托管这两个项目。因此，它显示为未购买。我删除了这两个项目并将这些项目添加为新产品，并将购买类型作为托管 y 用户帐户，现在它工作正常。

# actionscript-3 - 删除 flash builder lib 路径中不必要的 swc

> ID：13322115
> 
> 赞同：0
> 
> 时间：2012-11-10T12:36:21.587
> 
> 标签：actionscript-3, flash-builder

我正在使用欢迎使用 Adob​​e® Flash® Builder™ 4.6。

我不希望那些灵活的东西出现在内容辅助类列表中，我根本没有使用它们。这很没有意义。无论项目是否包含它们，这些类似乎出现在任何地方。

![我最喜欢的内容辅助课程列表面板](../Images/bf614ce77846fd80a9e9b57ad3141991.png)

然后我检查了lib路径并做了一些实验，但我不知道我是否删除了太多我将来会遇到麻烦。因为我不知道每个 swc 包的确切用法。到目前为止，我只知道 playerglobal.swc 无法删除，否则编译器将无法工作。

如果您知道这些软件包的详细信息，请告诉我，以便我决定可以删除哪些文件

![Actionscript 项目默认库 swcs](../Images/bb40e599c1b36b37e35d31c56b25ad7b.png)

![默认 Flex 库项目的 lib 路径](../Images/2d16bdd328c3a79dd331a386fb9c6c1c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T13:41:16.120

如果您在 Flash Builder 中选择“新建 Actionscript 项目”，您将不会在库路径中获得所有这些 Flex 库（只有在第二个屏幕截图中显示的那些）。那些不包含`mx.`包裹，所以你应该没问题。

# c# - 使用json格式时，嵌套模型的属性为空

> ID：13322116
> 
> 赞同：1
> 
> 时间：2012-11-10T12:36:25.723
> 
> 标签：c#, asp.net-mvc, json

我正在使用 jquery 向我的 ASP MVC4 控制器发送 ajax 发布请求，并且嵌套对象为空。

当我使用 jquery.Post 以 URL 编码格式发布数据模型时，会按预期填充数据模型，但是当我尝试使用 jquery.ajax 使用 json 格式执行相同操作时，收到的模型会填充除嵌套属性之外的所有属性。

这些是通过 fiddler 捕获的请求数据。

使用帖子

```
Code=dfs&Name=sdf&Country.Code=PKR&Remarks=dfsdf 
```

使用 json

```
{"Code":"dsf","Name":"sdf","Country.Code":"PKR","Remarks":"dfsdf"} 
```

谢谢

编辑

```
public class City : IKeyed<int>{
    public virtual int Id { get; protected set; }
    public virtual string Code { get; set; }
    public virtual string Name { get; set; }
    public virtual Country Country { get; set; }
    public virtual string Remarks { get; set; }
    public virtual bool IsActive { get; set; }
}

public class Country : IKeyed<int> {
    public virtual int Id { get; protected set; }
    public virtual string Name { get; set; }
    public virtual string Code { get; set; }
}

$.ajax({
                url: url,
                type: method,
                dataType: 'json',
                data: data,
                contentType: 'application/json; charset=utf-8' 
```

});

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T12:43:39.603

写作

```
"Country.Code":"PKR" 
```

实际上是说您有一个***Country***对象，该对象具有***Code***属性。像这样写属性

```
"CountryCode":"PKR" 
```

据我所知，这是您尝试发布的 json 的唯一问题；

或者，像这样使***Code成为******Country***对象的实际属性

```
"Country" : { "Code" : PKR" } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T12:47:00.177

URL 编码的表单绑定和 JSON 绑定非常不同 - 实际上 JSON 只是被反序列化为对象，而不是通过键值对等名称映射。要绑定嵌套属性，您需要在 JSON 中嵌套对象：

```
{"Code":"dsf","Name":"sdf","Country":{"Code":"PKR"},"Remarks":"dfsdf"} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T12:58:02.550

不要手动在 json 中构造你的对象。[利用JSON.stringify](https://stackoverflow.com/questions/191881/serializing-to-json-in-jquery)的优势：

```
var obj = new Object();
obj.Code = "dsf";
obj.Name = "sdf";
obj.Country = new Object();
obj.Country.Code = "PKR";
obj.Remarks = "dfsdf"; 

JSON.stringify(obj) // gives you the object serialized to json format 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-15T21:49:04.807

正确的做法是将传统设置为 false (traditional:false) 的 post 请求。jQuery 默认有传统的 false 。要传递嵌套或复杂的 JSON 对象，jQuery 需要实体主体。如果是 GET 请求，则没有正文，因此 jQuery 将 JSON 转换为 JSON 字符串并附加到 URL。这就是为什么您的嵌套属性为 null 请参阅此[链接](https://api.jquery.com/jQuery.Ajax/#jQuery-ajax-settings)以供参考。如果您无法使用 POST 请求并且您的控制器实现了 Web API，则使用 [FromUri] 属性作为参数来强制 C# 从 URI 转换复杂类型。例如：

```
public HttpResponseMessage GetMethod([FromUri] City city) 
```

# xcode - TableViewStyle 不会随 Core Data 改变（有时）

> ID：13322117
> 
> 赞同：0
> 
> 时间：2012-11-10T12:36:32.827
> 
> 标签：xcode, core-data, uitableview

我正在开发一个包含核心数据的应用程序。用户可以添加类别，然后用户可以将单元格添加到类别中。如果单元格是`done`，则用户将单元格设置为完成。如果该类别被调用，则视图会检查所有单元格是否为`done`. 如果所有单元格都在 Core Data 中完成，它会将类别设置为`done`（带有`NSString:@"catisdone"`）。这一切正常。我用以下代码更改了 CellStyle：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
NSLog(@"(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath called");

static NSString *notDoneCellIdentifier = @"NotDoneCatCell";
static NSString *doneCellIdentifier = @"DoneCatCell";

LWCats *currentCat = [self.cat objectAtIndex:indexPath.row];

NSString *cellIdentifier;
if ([currentCat.donecat isEqualToString:@"catisdone"]) {
    cellIdentifier = doneCellIdentifier;
} else {
    cellIdentifier = notDoneCellIdentifier;
}

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];

if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:cellIdentifier];
}

// Configure the cell...

cell.textLabel.text = currentCat.namecat;
cell.detailTextLabel.text = currentCat.rewardcat;

return cell; } 
```

这在大多数情况下都可以正常工作。如果 tableView 中有一个类别，则调用它（当然）。如果我添加一个类别，效果**不好**，然后我转到该类别并添加一个单元格，将此单元格设置为`done`，保存并关闭应用程序。如果我再次打开应用程序，类别**不会**更改为`done`，当我转到类别并返回时，类别设置为`done`。我已经尝试了很多事情（包括在 AppDelegate（和）中调用 viewWillAppear（检查是否所有单元格都已完成并设置`NSString`为`done`或））。`not done``didFinishLaunchingWithOptions``applicationWillEnterForeground``applicationDidBecomeActive`

我希望有一个人可以帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T16:10:00.207

我通过设置单元格（使用 if 语句）检查类别来解决问题。

# c++ - 从 const 成员函数返回 'this' 作为非常量

> ID：13322118
> 
> 赞同：1
> 
> 时间：2012-11-10T12:36:34.120
> 
> 标签：c++, method-chaining

我想在下面的类上做方法链接`Point`。

```
#include <iostream>

class Point {
  public:
    Point(int x, int y): _x(x), _y(y) {}

    Point& moveX(int x);
    Point& moveY(int y);
    Point& print() const;

  ...
};

...

Point& Point::print() const {
  std::cout << "(" << _x << "," << _y << ")" << std::endl;
  return *this;  // Compile fails
} 
```

`print()`我认为标记为成员函数是有意义的，`const`因为它只是打印内部成员。但是，我想在非常量和常量函数之间进行方法链接，如下所示。

```
int main() {
  Point p(1,1);
  p.moveX(10).print().moveY(11); // method chaining
} 
```

所以我必须以非常量返回`this`，但编译失败，因为据我了解，成员被标记为`const`包含`this`在 const 成员函数中。

在这种情况下有没有办法进行方法链接？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-10T13:10:22.820

您可以提供两个成员函数，一个`const`和一个非`const`. 将`const`在 a上调​​用一个`Point const`，在 a 上调​​用非`const`一个`Point`。

```
class Point {
public:
    Point(int x, int y): _x(x), _y(y) {}

    Point& moveX(int x);
    Point& moveY(int y);
    Point& print();
    Point const& print() const;

    ...
}; 
```

* * *

作为侧节点，最好重载`std::ostream& operator<<(std::ostream&, Point const&)`，因此您可以将它与任何输出流一起使用，而不仅仅是`std::cout`：

```
class Point {
    ...
private:
    friend std::ostream& operator<<(std::ostream& stream, Point const& point) {
        stream << "(" << point._x << "," << point._y << ")";
        return stream;
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-10T12:50:18.763

IMO，您没有正确理解 const 方法可以做什么。如果 const 方法返回对您的对象的非常量引用，则它不是常量方法。

因此，在您的情况下，您可以简单地从 print 方法返回任何内容，并在链接结束时使用它，例如 `p.moveX(10).moveY(11).print();`.

UPD。或者，`const Point&`如果您有可能向您的类添加一些新的 const 方法，您可以返回。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T13:10:27.260

您可以`const_cast`在返回时使用（即`return const_cast<Point&>(*this)`） - 这将确保您的方法无法修改对象，但调用者将能够修改它。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-10T13:11:29.973

失败的原因是在`const`成员函数内部，`this`实际上是 a `const Point*`，而不是 a `Point*`。因此，您正在尝试从指针初始化非`const`引用。`const`并不是编译器不相信你，你只是一次要求两个不兼容的东西。

在我看来，这是*极少数*有效的用途之一。`const_cast`通常，使用`const_cast`几乎总是设计错误的标志，或者更糟糕的是编程错误。
在这里，函数是真的`const`并且应该是`const`，但是没有理由你不能在非`const`之后链接一些东西，所以做这样的事情可以说是合法的。

Do note, however, although the function is strictly `const` (in respect to the object, not so much in its use of IO functions!), one thing you should consider is that in some (rare) cases, it may result in code that doesn't do what you want. The compiler is allowed to cache the result of a `const` function and omit another call to the same `const` function (since you promised that it won't change anything). Therefore, it is allowable to optimize `some_point.Print().Print();` into `some_point.Print()`. This is probably not a problem for you (why would you want to print the same values twice), just something to be *generally* aware of.

# c - 如何使 linux 中的脚本使用我的 interpteter 并工作？（#！）

> ID：13322119
> 
> 赞同：8
> 
> 时间：2012-11-10T12:36:40.123
> 
> 标签：c, linux, shell

我为linux制作了一个简单的shell。它使用 getline() 逐行读取，直到将 ctrl+d (eof/-1) 输入到标准输入中。

在像这样逐行输入标准输入时：

```
ls -al &
ls -a -l 
```

我的外壳工作得很好。

我试图通过我的 shell 运行脚本，但它不起作用。当我执行脚本时，我的 shell 会自动执行（第一行），但 shell 不会解释其他行。

```
#!/home/arbuz/Patryk/projekt/a.out
ls -al &
ls -a -l 
```

什么可能导致它？我不得不说我是 linuxes 的初学者，老师没有对所有这些东西说任何话。只是一个家庭作业。我做了一些研究，但这就是我发现的全部。

这是我的Shell的代码。我已将 shell 路径添加到 etc/shells 但它仍然无法正常工作

```
#include <fcntl.h>
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <stdbool.h>

int main()
{

    ssize_t bufer_size = 0;
    char* line = NULL;
    int line_size;

    while ((line_size = getline(&line, &bufer_size, stdin)) != -1) // while end of file
    {
        char** words_array;
        words_array = (char**)malloc(200 * sizeof(char*));

        int words_count = 0;
        int i;
        int j = 0;
        int words_length = 0;
        char word[100];
        for (i = 0; i < line_size; i++)
        {
            if (line[i] == ' ' || line[i] == '\n')
            {
                words_array[words_count] = (char*)malloc(words_length * sizeof(char));
                int b;
                for (b = 0; b < words_length; b++)
                {
                    words_array[words_count][b] = word[b];
                }
                j = 0;
                words_count++;
                words_length = 0;
            }
            else
            {
                word[j] = line[i];
                j++;
                words_length++;
            }
        }

        bool run_in_background = false;

        if (words_array[words_count - 1][0] == '&')
        {
            run_in_background = true;
            words_array[words_count - 1] = NULL;
        }

        int a = fork();

        if (a == 0) // child process
        {
            execvp(words_array[0], words_array);
        }
        else       // parent process
        {
            if (run_in_background == true)
            {
                printf("\n ---- running in background. \n");
            }
            else
            {
                printf("\n ---- running normal \n");
                wait(NULL);
            }
        }
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-10T13:09:08.673

您的 shell 必须接受命令行参数。在这种情况下，您的程序将被这样调用：

```
/home/arbuz/Patryk/projekt/a.out your_script
```

所以你需要一个`main()`这样的签名：

```
int main(int argc, char* argv[]) 
```

然后解析参数。`argc`包含参数的数量。脚本的文件名传入`argv[1]`. 您需要打开它（使用`fopen()`）并从中读取命令，而不是`stdin`. 如果文件的第一行以`#`.

如果在没有绝对路径（不以 a 开头的路径）的情况下调用脚本`/`，则文件名是相对于当前目录的。您可以从环境或以编程方式使用`getcwd()`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-10T13:08:35.807

问题是您的 shell 从标准输入读取，而 she-bang`#!`导致脚本作为命令行参数传递。所以你的外壳被称为

```
/home/arbuz/Patryk/projekt/a.out <script> 
```

... 忽略命令行参数并等待标准输入上的命令。您必须从`argv[1]`.

# iphone - iPhone iOS 的图像调整大小以实现最低内存使用解决方案

> ID：13322122
> 
> 赞同：3
> 
> 时间：2012-11-10T12:37:07.567
> 
> 标签：iphone, ios, memory, resize

我从大约 8MP 的原始分辨率图像调整图像大小，我的输出分辨率约为 2MP。有时，它会显示 iPhone4S 设备的内存警告，我在 memorywarning 中做了一些释放，但它有时会使我的程序因 alassetlibrary 使用问题而崩溃。这是我的问题，我想在调整 fullReoslutionImage 大小时防止出现内存警告。

我尝试了许多调整图像大小的方法。我目前的方法是峰值内存使用量增加约 44MB。它似乎太大了......对于整个系统来说，它会有一个 57 MB 的峰值......我尝试了 CGImageSourceCreateThumbnailAtIndex，但它比我目前的方法引入了更多的内存增加。

这是我的解决方案，但有时仍会引入内存警告。你有其他方法吗？你可以帮帮我吗？一些想法，1.其他iOS API？2\. JPEG 解码器动态调整大小的原生库？3\. YUV422调整大小而不是RGBA。4.......我不知道......

```
UIImage *image=[self oriImageThumbnailAtIndex:asset];
        CGInterpolationQuality interpolationQuality=kCGInterpolationMedium;            
        CGSize newSize=[self sizeDown:image.size];            
        image2 =makeResizedImageRotate(image, newSize, interpolationQuality,[defaultRep orientation]);

-(UIImage *) oriImageThumbnailAtIndex:(ALAsset *)asset
{
int times=0;
ALAssetRepresentation* assetRepresentation=asset.defaultRepresentation;
long long imageDataSize = [assetRepresentation size];    
uint8_t* imageDataBytes = (uint8_t*) malloc(imageDataSize);
[assetRepresentation getBytes:imageDataBytes fromOffset:0 length:imageDataSize error:nil];
NSData *data = [NSData dataWithBytesNoCopy:imageDataBytes length:imageDataSize freeWhenDone:YES];
UIImage *image2=nil;  
CGImageSourceRef src = CGImageSourceCreateWithData((__bridge CFDataRef) data, NULL);        
CGImageRef thumbnail;
if (src)
{
    float _maxSize=RESIZE_IMAGE_BIG_SIDE;
    thumbnail = CGImageSourceCreateImageAtIndex(src, 0, NULL); // Create scaled image
    image2 = [UIImage imageWithCGImage:thumbnail];        
    CGImageRelease(thumbnail);        
}else{
    NSLog(@"resizeImage:(ALAsset *)asset error!!!");        
}

return image2;
}

UIImage* makeResizedImageRotate(UIImage *inimage,CGSize newSize,CGInterpolationQuality interpolationQuality,UIImageOrientation orient) {
CGRect newRect = CGRectIntegral(CGRectMake(0, 0, newSize.width, newSize.height));
CGImageRef imageRef = inimage.CGImage;

// Compute the bytes per row of the new image
size_t bytesPerRow = CGImageGetBitsPerPixel(imageRef) / CGImageGetBitsPerComponent(imageRef) * newRect.size.width;
bytesPerRow = (bytesPerRow + 15) & ~15;  // Make it 16-byte aligned
  CGBitmapInfo cgbmpinfo=CGImageGetBitmapInfo(imageRef);
CGContextRef bitmap = CGBitmapContextCreate(NULL,
                                            newRect.size.width,
                                            newRect.size.height,
                                            CGImageGetBitsPerComponent(imageRef),
                                            bytesPerRow,
                                            CGImageGetColorSpace(imageRef),
                                            cgbmpinfo);
if(bitmap!=nil)
    CGContextSetInterpolationQuality(bitmap, interpolationQuality);
else
    NSLog(@"bitmap==nil");

// Draw into the context; this scales the image
CGContextDrawImage(bitmap, newRect, imageRef);

// Get the resized image from the context and a UIImage
CGImageRef resizedImageRef = CGBitmapContextCreateImage(bitmap);
UIImage *resizedImage = [UIImage imageWithCGImage:resizedImageRef];
CGContextRelease(bitmap);
CGImageRelease(resizedImageRef);
resizedImage=rotateImage( resizedImage, orient);
// Clean up

// [resizedImage autorelease]; will introduce BAD_ADDRESS
return resizedImage; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T02:16:51.160

我发现当我使用 3rd 方 JPEG 解码库（libjpeg-turbo）在 2048x2048 UIImage 下对其进行解码和调整大小时，它减少了很多。（即使总内存也没有减少太多。）所以内存 wanring 经常发生可能是由创建 UIImage 引起的大于 2Kx2K。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T12:53:35.993

我正在使用下面的代码

```
-(UIImage*) generateThumbnailFromImage:(UIImage*)mainImage
{
    UIImage * thumbnail;

    CGSize destinationSize = CGSizeMake(thumbnail image width,thumbnail image height);

    UIGraphicsBeginImageContext(destinationSize);
    [mainImage drawInRect:CGRectMake(0,0,destinationSize.width, destinationSize.height)];
    thumbnail = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    return thumbnail;
} 
```

我从来没有遇到过内存警告，尝试一下它如何与你的代码一起工作。

# android - 安卓相机代码

> ID：13322128
> 
> 赞同：3
> 
> 时间：2012-11-10T12:37:45.217
> 
> 标签：android

我正在尝试制作一个使用相机的 android 应用程序。但不知何故，这段代码不起作用。任何帮助将不胜感激。提前致谢。

这是我的应用程序的代码。

aractivity.java 包 com.tanuj.myarapp；

```
import android.location.Location;
import android.location.LocationListener;  
import android.location.LocationManager;
 import android.os.Bundle;
import android.app.Activity;
import android.hardware.Camera;
import android.hardware.Sensor;
import android.hardware.SensorEvent;
import android.hardware.SensorEventListener;
import android.hardware.SensorManager;
 import android.util.Log;
import android.view.Menu;
import android.view.MenuItem;
import android.view.SurfaceHolder;
import android.view.SurfaceView;
import android.support.v4.app.NavUtils;

public class Aractivity extends Activity {

SurfaceView cameraPreview;
SurfaceHolder previewHolder;
Camera camera;
boolean inPreview;
final static String TAG = "PAAR";
SensorManager sensorManager;
int orientationSensor;
int accelerometerSensor;
float headingAngle;
float pitchAngle;
float rollAngle;
float xAxis;
float yAxis;
float zAxis;
LocationManager locationManager;
double latitude;
double longitude;
double altitude;

    final SensorEventListener sensorEventListener = new SensorEventListener() {
        public void onSensorChanged(SensorEvent sensorEvent) {
        if (sensorEvent.sensor.getType() == Sensor.TYPE_ORIENTATION)
        {
        headingAngle = sensorEvent.values[0];
        pitchAngle = sensorEvent.values[1];
        rollAngle = sensorEvent.values[2];
        Log.d(TAG, "Heading: " + String.valueOf(headingAngle));
        Log.d(TAG, "Pitch: " + String.valueOf(pitchAngle));
        Log.d(TAG, "Roll: " + String.valueOf(rollAngle));
        }
        else if (sensorEvent.sensor.getType() == Sensor.TYPE_ACCELEROMETER)
        {
        xAxis = sensorEvent.values[0];
        yAxis = sensorEvent.values[1];
        zAxis = sensorEvent.values[2];
        Log.d(TAG, "X Axis: " + String.valueOf(xAxis));
        Log.d(TAG, "Y Axis: " + String.valueOf(yAxis));
        Log.d(TAG, "Z Axis: " + String.valueOf(zAxis));
        }
        }
    public void onAccuracyChanged (Sensor senor, int accuracy) {
    //Not used
    }
    };
    LocationListener locationListener = new LocationListener() {
        public void onLocationChanged(Location location) {
        latitude = location.getLatitude();
        longitude = location.getLongitude();
        altitude = location.getAltitude();
        Log.d(TAG, "Latitude: " + String.valueOf(latitude));
        Log.d(TAG, "Longitude: " + String.valueOf(longitude));
        Log.d(TAG, "Altitude: " + String.valueOf(altitude));
        }
        public void onProviderDisabled(String arg0) {
        // TODO Auto-generated method stub
        }
        public void onProviderEnabled(String arg0) {
        // TODO Auto-generated method stub
        }
        public void onStatusChanged(String arg0, int arg1, Bundle arg2) {
        // TODO Auto-generated method stub
        }
        };
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_aractivity);
     inPreview = false;
    cameraPreview = (SurfaceView)findViewById(R.id.cameraPreview);
    previewHolder = cameraPreview.getHolder();
    previewHolder.addCallback(surfaceCallback);
    previewHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
    sensorManager = (SensorManager) getSystemService(SENSOR_SERVICE);
    orientationSensor = Sensor.TYPE_ORIENTATION;
    accelerometerSensor = Sensor.TYPE_ACCELEROMETER;

        sensorManager.registerListener(sensorEventListener,
                sensorManager.getDefaultSensor(orientationSensor),
                SensorManager.SENSOR_DELAY_NORMAL);
        sensorManager.registerListener(sensorEventListener, sensorManager
                .getDefaultSensor(accelerometerSensor), SensorManager.SENSOR_DELAY_NORMAL);
        locationManager = (LocationManager) getSystemService(LOCATION_SERVICE);
        locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 2000, 2,
        locationListener);

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_aractivity, menu);
    return true;
}
@Override
public void onResume() {
super.onResume();
locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 2000,
        2, locationListener);
sensorManager.registerListener(sensorEventListener, sensorManager
        .getDefaultSensor(orientationSensor), SensorManager.SENSOR_DELAY_NORMAL);
sensorManager.registerListener(sensorEventListener, sensorManager
        .getDefaultSensor(accelerometerSensor), SensorManager.SENSOR_DELAY_NORMAL);
camera=Camera.open();
}
@Override
public void onPause() {
if (inPreview) {
camera.stopPreview();
}
locationManager.removeUpdates(locationListener);
sensorManager.unregisterListener(sensorEventListener);

camera.release();
camera=null;
inPreview=false;
super.onPause();
}
SurfaceHolder.Callback surfaceCallback=new SurfaceHolder.Callback() {
    public void surfaceCreated(SurfaceHolder holder) {
    try {
    camera.setPreviewDisplay(previewHolder);
    }
    catch (Throwable t) {
    Log.e("ProAndroidAR2Activity", "Exception i");
    }
    }
    public void surfaceChanged(SurfaceHolder holder, int format, int width, int
            height) {
            Camera.Parameters parameters=camera.getParameters();
            Camera.Size size=getBestPreviewSize(width, height, parameters);
            if (size!=null) {
            parameters.setPreviewSize(size.width, size.height);
            camera.setParameters(parameters);
            camera.startPreview();
            inPreview=true;     
            }
    }
    public void surfaceDestroyed(SurfaceHolder holder) {
        /*camera.stopPreview();
        camera.release();
        camera=null;
        */
        }
};
private   Camera.Size getBestPreviewSize(int width, int height,
        Camera.Parameters parameters) {
        Camera.Size result=null;
        for (Camera.Size size : parameters.getSupportedPreviewSizes()) {
        if (size.width<=width && size.height<=height) {
        if (result==null) {
        result=size;
        }
        else {
        int resultArea=result.width*result.height;
        int newArea=size.width*size.height;
        if (newArea>resultArea) {
        result=size;
        }
        }
        }
        }
        return(result);
        }

           } 
```

清单文件 <清单 xmlns:android="http://schemas.android.com/apk/res/android" package="com.tanuj.myarapp" android:versionCode="1" android:versionName="1.0" >

```
 <uses-sdk
       android:minSdkVersion="8"
       android:targetSdkVersion="15" />

    <application
      android:icon="@drawable/ic_launcher"
      android:label="@string/app_name"
     android:theme="@style/AppTheme" >
       <activity
        android:name=".Aractivity"
        android:label="@string/title_activity_aractivity" 
        android:screenOrientation = "landscape"
        android:configChanges = "keyboardHidden|orientation"
        >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>
<uses-feature android:name="android.hardware.camera" />
<uses-permission android:name="android.permission.CAMERA" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />

 </manifest> 
```

activity_aractivity.xml（布局）

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
     xmlns:tools="http://schemas.android.com/tools"
     android:layout_width="match_parent"
     android:layout_height="match_parent"
     >

       <android.view.SurfaceView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/cameraPreview"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >
        </android.view.SurfaceView>
    </RelativeLayout>

output of logcat
      '11-10 17:56:04.153: W/IInputConnectionWrapper(386): showStatusIcon on inactive         InputConnection
       11-10 17:56:16.732: D/er(386): in open()
       11-10 17:56:17.442: D/er(386): inOnresune' 
```

# php - 水平响应式布局

> ID：13322131
> 
> 赞同：0
> 
> 时间：2012-11-10T12:38:02.033
> 
> 标签：php, jquery, html, css, responsive-design

我试图在这里[http://ragzor.com/neutron](http://ragzor.com/neutron)实现一个水平响应式布局大约5 个小时，现在大声笑，我可以使用 jquery 来做到这一点，但我相信那是使用螺丝刀来完成锤子的工作 :) 使用浮点数就可以了什么也不做，我也尝试使用绝对位置和相对位置，绝对会破坏幻灯片，因为它们使用的是最大宽度（我想这是不确定的原因！）

那么最好的方法是什么？

多谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T02:16:07.587

@Dinesh 是对的。你应该从一些关于响应式设计的教程开始。这些几乎都保证包含 CSS3 媒体查询。您可以在此处找到响应式设计教程的汇总：http: [//www.hongkiat.com/blog/responsive-web-tutorials/](http://www.hongkiat.com/blog/responsive-web-tutorials/)。`floats`当需要大量响应式设计时，使用可能会很棘手/危险，因为浮动元素会将它们从文档流中移除。希望这可以帮助！

# python - 如何确定 GAE 上多模型实体的子模型？

> ID：13322134
> 
> 赞同：3
> 
> 时间：2012-11-10T12:38:26.713
> 
> 标签：python, google-app-engine, google-cloud-datastore, data-modeling

这就是我查询联系人的方式：

```
contacts = Contact.all() 
```

那么，如何判断一个Contact是Person还是Company，结构如下？

```
class Contact(polymodel.PolyModel):
    phone_number = db.PhoneNumberProperty()
    address = db.PostalAddressProperty()

class Person(Contact):
    first_name = db.StringProperty()
    last_name = db.StringProperty()
    mobile_number = db.PhoneNumberProperty()

class Company(Contact):
    name = db.StringProperty()
    fax_number = db.PhoneNumberProperty() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T17:30:52.507

您可以通过不同的方式获取种类和类名

`instance._class`将返回`['Contact', 'Person']`

`instance.class_name()`返回`Person`

`instance.kind()`返回`Contact`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T18:05:55.660

您可以使用`PolyModel`类方法`class_name()`。引用 App Engine 文档：

> PolyModel.class_name()
> 
> 返回类的名称。如果 Python 类的名称发生更改，类可以覆盖此方法，但实体应继续使用原始类名。

在您的代码中，如果您插入两个对象，如下所示：

```
p = Person(first_name='John',
           last_name='Doe',
           mobile_number='1-111-111-1111')
p.put()

c = Company(name='My company',
            fax_number='1-222-222-2222')
c.put() 
```

然后通过执行获取所有对象并打印类名：

```
for c in Contact.all():
    logging.info('Class Name: ' + c.class_name()) 
```

**输出：**

班级名称：人

班级名称：公司

有关 PolyModel 类的信息，请查看[PolyModel 类](https://developers.google.com/appengine/docs/python/datastore/polymodelclass)

# ios - UIView 没有显示在两个标题视图中

> ID：13322143
> 
> 赞同：0
> 
> 时间：2012-11-10T12:39:39.810
> 
> 标签：ios, ipad, uiview, tableview

我正在开发一个`iPad`应用程序。由于某些原因，我需要`two tableviews`在同一个视图控制器中显示一个。我在 a 中创建了`UIView`一个`xib`并将 a 连接`outlet`到那个`view controller`。我需要在这两个表视图中将该视图显示为`tableHeaderView`. 当我尝试将该视图分配给 时`both header views`，它仅在 中显示`second tableview`。我希望该视图有一个实例。所以它只显示在我最后分配的视图中。我怎么能克服这个？任何帮助，将不胜感激。

这是我的代码。

```
[energyTableView setTableHeaderView:tableHeader];
[maintenanceTableView setTableHeaderView:tableHeader]; 
```

@CodeBySteveZ

正如他所说，我创建了一个xib并尝试了。我仍然无法得到解决方案。我做错了什么吗？这就是我尝试的方式。

```
NSArray *topLevelObjects = [[NSBundle mainBundle]loadNibNamed:@"tableHeaderCell" owner:nil options:nil];

[energyTableView setTableHeaderView:[topLevelObjects objectAtIndex:0]];
[maintenanceTableView setTableHeaderView:[topLevelObjects objectAtIndex:0]]; 
```

我想这也和我以前做的一样。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T13:25:41.020

您必须创建 tableHeader 的另一个实例。UIView 一次只能存在于一个可视子树中。使用 IB，您可以复制元素并创建它的 2 个实例。或者，如果您使用该元素创建一个单独的 xib，您可以通过代码加载该特定 xib 两次，每个表头加载一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T16:07:44.460

@RA我知道以编程方式去很乏味，但你可以试试这个

```
 UIView *headerView = [[UIView alloc] initWithFrame:CGRectMake(XXX, YYY, XXX, YYY)];
 UILabel *labelView = [[UILabel alloc] initWithFrame:CGRectMake(XXX, YYY, XXX, YYY)];
 [headerView addSubview:labelView];
 energyTableView.tableHeaderView = headerView; 
```

同样添加到其他tableview 一个den 释放它。

```
 [labelView release];
 [headerView release]; 
```

希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T20:19:20.813

一个视图不能出现在两个地方....说简化的一个视图==一个超视图

# sublimetext2 - 保存项目的 Sublime 配置文件的最佳位置是什么？

> ID：13322146
> 
> 赞同：1
> 
> 时间：2012-11-10T12:40:05.287
> 
> 标签：sublimetext2

当我创建一个新项目时，会生成两个文件：

*   my_project.sublime-项目
*   my_project.sublime-工作区

目前，我有大约 8 个项目，所以这些文件都放在一个文件夹中。我不知道是否应该将 *.sublime-project 放在我的项目文件夹中（使用 git）。

我想这是保持文件井井有条的最佳方法:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T20:12:16.670

这有点取决于您是否与其他人共享您的存储库。例如，这是我的项目文件之一：

```
{
    "folders":
    [
            {
                    "path": "corpus"
            }
    ]
} 
```

其他人可能将该项目签出到与“语料库”不同的目录中。但是工作场所文件会变得更加复杂，这些文件保存在同一目录中。那些通常有完整的路径到你的盒子非常特别的东西。

所以我的建议是将它们放在你的 git repo 之外的某个地方，或者将它们添加到你的 .gitignore 文件中。

# html - PHP - 创建 HTML + 上传表单

> ID：13322148
> 
> 赞同：1
> 
> 时间：2012-11-10T12:40:21.760
> 
> 标签：html, upload

我正在处理我的投资组合页面，对于我的画廊，我使用同位素来过滤图像。这是我想要实现的目标：

我想以某种方式实现一个管理员用户，每次我连接到它时，一个上传表单都应该出现在图库部分。在上传正确大小的图片、提供标题等之后，PHP 应该在该页面上附加一个 HTML 代码来设置新图片。

我不得不提到我不能使用 mySQL，所以一个 XML 文件或一个简单的文本文件应该为用户完成这项工作。

谁能指出我正确的方向？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T12:45:22.007

一个很好的基础将是开始习惯简单的 xml，这是一种高效且最少的数据存储技术。您可以掌握它使用的方法，然后您就可以按照您提到的那样保存数据。这里有几个链接会有所帮助：

[简单的 XML - PHP 手册](http://php.net/manual/en/book.simplexml.php)

[基本的简单 XML 用法 - PHP 手册](http://www.php.net/manual/en/simplexml.examples-basic.php)

[查询简单的 XML 数据 - PHP 手册](http://www.php.net/manual/en/simplexmlelement.xpath.php)

希望这可以帮助！

# wpf - 停止在 Window 的自定义边框上绘制对象

> ID：13322150
> 
> 赞同：0
> 
> 时间：2012-11-10T12:40:58.330
> 
> 标签：wpf, vb.net, xaml, border

我目前有一个带有自定义标题栏、按钮和边框的自定义 WPF 窗口。我还有一个故事板动画如下：

```
 <Storyboard x:Key="SlideLeftToRight"  
                TargetProperty="RenderTransform.(TranslateTransform.X)"
                AccelerationRatio=".5"
                DecelerationRatio=".5">
        <DoubleAnimation Storyboard.TargetName="PageViewer" Duration="0:0:0.8" From="{Binding Width, ElementName=PrimaryWindow}" To="0"/>
        <DoubleAnimation Storyboard.TargetName="BorderVisual" Duration="0:0:0.8" From="0" To="-1252"/>
    </Storyboard>

    <Storyboard x:Key="SlideRightToLeft" 
                TargetProperty="RenderTransform.(TranslateTransform.X)"
                AccelerationRatio=".5"
                DecelerationRatio=".5">
        <DoubleAnimation Storyboard.TargetName="PageViewer" Duration="0:0:0.8" From="-1252" To="0"/>
        <DoubleAnimation Storyboard.TargetName="BorderVisual" Duration="0:0:0.8" From="0" To="{Binding Width, ElementName=PrimaryWindow}"/>
    </Storyboard> 
```

唯一的问题是这些动画显示在窗口边框上，从而覆盖了阴影效果。有没有办法让自定义边框被视为不可绘制？这是我的窗口的完整 XAML，以防万一。

```
<Window x:Name="PrimaryWindow"
 x:Class="MainWindow"
 xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
 xmlns:local="clr-namespace:Metro_Test"
 Title="MainWindow"
 Height="800"
 Width="1280"
 IsTabStop="False"
 AllowsTransparency="True"
 Background="Transparent"
 BorderBrush="#FF3F3F3F"
 SnapsToDevicePixels="True"
 TextOptions.TextFormattingMode="Display"
 TextOptions.TextRenderingMode="ClearType"
 WindowStyle="None"
 WindowStartupLocation="CenterScreen" AllowDrop="True" ResizeMode="CanResizeWithGrip">

<Window.Resources>
    <Style x:Key="NoChromeButton" TargetType="{x:Type Button}">
        <Setter Property="Background" Value="Transparent"/>
        <Setter Property="BorderThickness" Value="1"/>
        <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}"/>
        <Setter Property="HorizontalContentAlignment" Value="Center"/>
        <Setter Property="VerticalContentAlignment" Value="Center"/>
        <Setter Property="Padding" Value="1"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type Button}">
                    <Grid x:Name="Chrome" Background="{TemplateBinding Background}" SnapsToDevicePixels="true">
                        <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" Margin="{TemplateBinding Padding}" RecognizesAccessKey="True" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                    </Grid>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsEnabled" Value="false">
                            <Setter Property="Foreground" Value="#ADADAD"/>
                            <Setter Property="Opacity" TargetName="Chrome" Value="0.5"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <Image x:Key="WhiteClose" Source="Images\White\Close.png" Height="24" Width="24"/>
    <Image x:Key="WhiteAdd" Source="Images\White\Add.png" Height="24" Width="24"/>
    <Image x:Key="WhiteMinus" Source="Images\White\Minus.png" Height="24" Width="24"/>
    <Image x:Key="GrayClose" Source="Images\Gray\Close.png" Height="24" Width="24"/>
    <Image x:Key="GrayAdd" Source="Images\Gray\Add.png" Height="24" Width="24"/>
    <Image x:Key="GrayMinus" Source="Images\Gray\Minus.png" Height="24" Width="24"/>
    <XmlDataProvider x:Key="PageViews">
        <x:XData>
            <Views xmlns="">
                <View Title="View1">
                    <Page Source="MainPage.xaml"/>
                </View>
                <View Title="View2">
                    <Page Source="AddReferencePage.xaml"/>
                </View>
                <View Title="View3">
                    <Page Source="ReferenceManagementPage.xaml"/>
                </View>
            </Views>
        </x:XData>
    </XmlDataProvider>

    <Storyboard x:Key="SlideLeftToRight"  
                TargetProperty="RenderTransform.(TranslateTransform.X)"
                AccelerationRatio=".5"
                DecelerationRatio=".5">
        <DoubleAnimation Storyboard.TargetName="PageViewer" Duration="0:0:0.8" From="{Binding Width, ElementName=PrimaryWindow}" To="0"/>
        <DoubleAnimation Storyboard.TargetName="BorderVisual" Duration="0:0:0.8" From="0" To="-1252"/>
    </Storyboard>

    <Storyboard x:Key="SlideRightToLeft" 
                TargetProperty="RenderTransform.(TranslateTransform.X)"
                AccelerationRatio=".5"
                DecelerationRatio=".5">
        <DoubleAnimation Storyboard.TargetName="PageViewer" Duration="0:0:0.8" From="-1252" To="0"/>
        <DoubleAnimation Storyboard.TargetName="BorderVisual" Duration="0:0:0.8" From="0" To="{Binding Width, ElementName=PrimaryWindow}"/>
    </Storyboard>

    <VisualBrush x:Key="VisualBrush1" Visual="{Binding ElementName=PageViewer}"/>
</Window.Resources>

<Border
    x:Name="m_edgeBorder"
    Margin="14"
    Background="White">

    <Border.Effect>
        <DropShadowEffect
        Opacity="0.999"
        BlurRadius="14"
        ShadowDepth="0"/>
    </Border.Effect>

    <Grid x:Name="MainGrid">

        <Rectangle
            x:Name="TitleBar"
            Height="28"
            Fill="Blue"
            VerticalAlignment="Top"
            AllowDrop="False"
            PreviewMouseLeftButtonDown="FormMouseDown"
            PreviewMouseMove="FormMouseMove"/>

        <Button x:Name="CloseButton" Style="{DynamicResource NoChromeButton}" Click="HandleCloseClick" MouseEnter="HandleMouseEnter" MouseLeave="HandleMouseLeave" ClickMode="Release" HorizontalAlignment="Right" Margin="500,2,2,0" VerticalAlignment="Top" Width="24" Height="24">
            <DynamicResource ResourceKey="GrayClose"/>
        </Button>

        <Button x:Name="MaximiseButton" Style="{DynamicResource NoChromeButton}" Click="HandleMaximiseClick" MouseEnter="HandleMouseEnter" MouseLeave="HandleMouseLeave" ClickMode="Release" HorizontalAlignment="Right" Margin="500,2,28,0" VerticalAlignment="Top" Width="24" Height="24">
            <DynamicResource ResourceKey="GrayAdd"/>
        </Button>

        <Button x:Name="MinimiseButton" Style="{DynamicResource NoChromeButton}" Click="HandleMinimiseClick" MouseEnter="HandleMouseEnter" MouseLeave="HandleMouseLeave" ClickMode="Release" HorizontalAlignment="Right" Margin="500,2,54,0" VerticalAlignment="Top" Width="24" Height="24">
            <DynamicResource ResourceKey="GrayMinus"/>
        </Button>

        <TextBlock Text="Metro Form" FontSize="18" FontFamily="Segoe Light" Margin="0,5" HorizontalAlignment="Center" Foreground="White"/>

        <StackPanel>
            <StackPanel Orientation="Vertical" Margin="28,28,0,0">
                <ListBox x:Name="ViewList" Height="20" Width="300" SelectedIndex="0"
                ItemsSource="{Binding Source={StaticResource PageViews}, XPath=Views/View}"
                DisplayMemberPath="@Title"                    
                SelectionChanged="ChangedSlideSelection">
                    <ListBox.ItemsPanel>
                        <ItemsPanelTemplate>
                            <StackPanel Orientation="Horizontal"/>
                        </ItemsPanelTemplate>
                    </ListBox.ItemsPanel>
                </ListBox>
            </StackPanel>

            <Grid VerticalAlignment="Stretch" HorizontalAlignment="Stretch">

                <Border x:Name="BorderVisual" HorizontalAlignment="Stretch">
                    <Rectangle x:Name="RectangleVisual"/>
                    <Border.RenderTransform>
                        <TranslateTransform/>
                    </Border.RenderTransform>
                </Border>

                <ItemsControl x:Name="PageViewer" DataContext="{Binding Path=SelectedItem, ElementName=ViewList}"
                    ItemsSource="{Binding XPath=Page}" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <Frame x:Name="frame" Source="{Binding XPath=@Source}"/>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                    <ItemsControl.RenderTransform>
                        <TranslateTransform/>
                    </ItemsControl.RenderTransform>
                </ItemsControl>
            </Grid>
        </StackPanel>
    </Grid>
</Border>
</Window> 
```

谢谢！可能直到明天才能回复/投票/标记为已回答......现在真的很困：D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T02:20:43.587

我解决了这个问题。只需更改动画父对象的 ClipToBounds 属性即可停止动画离开父对象。

```
<Grid ClipToBounds="True">
     ...
</Grid> 
```

# database - Rhomobile 中的数据库迁移

> ID：13322151
> 
> 赞同：0
> 
> 时间：2012-11-10T12:41:10.267
> 
> 标签：database, sqlite, rhomobile, propertybag

您如何使用 Property bag 模型将数据库中的数据迁移到您在 Rho-mobile 中构建的应用程序。

为了说明这一点，让我有一个应用程序，其中我有一个模型产品和三个属性名称、品牌和 SDK。在产品模型处于开发阶段并在模拟器上运行时，我已将一些值插入到它中。但是在构建应用程序之后，我看不到我在设备上运行时插入的数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T18:48:29.880

尝试将信息预填充到应用程序的数据库中时有几个警告（例如旧 Android 版本中的文件大小等），但如果您确定，这是如何执行此操作的文档的链接：
[http ://docs.rhomobile.com/faq#how-to-pre-populate-client-database](http://docs.rhomobile.com/faq#how-to-pre-populate-client-database)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-10T22:23:58.180

万一文档再次移动，我将在此处复制它：

* * *

## 如何预填充客户端数据库

在目标模拟器上运行应用程序，将对象插入数据库（本地或从服务器获取数据）将模拟器上“db”文件夹中的所有文件复制到“/platform\shared\db\res\db”。以下是如何找到“db”模拟器文件夹：

*   ***iPhone***：查看日志以查找带有 guid 的路径——这是应用程序在模拟器上存储文件的位置。或者从磁盘根目录运行“syncdbuser.sqlite”搜索
*   **Android**：很难，因为模拟器是虚拟机，文件存储在模拟器中。使用 adb 命令行查找应用程序包的路径
*   **Windows Mobile**：从 ActiveSync 或“移动设备中心”打开设备资源管理器，导航到“程序文件//rho/db”
*   **黑莓**：在电脑文件系统上打开-'/components/simulator/sdcard/Rho//db 构建应用程序，现在所有db文件都在应用程序包中

* * *

根据我自己使用 Android 的经验，当应用程序的实例在 AVD 上运行时，在 Eclipse 中打开 DDMS 透视图是最简单的。在文件资源管理器选项卡中，导航到 /data/data/your.packagename.app/rhodata/db，您将找到要复制到目标目录的数据库文件。

# tfs - 我可以在不登录的情况下运行 tfs 吗？

> ID：13322154
> 
> 赞同：0
> 
> 时间：2012-11-10T12:41:51.087
> 
> 标签：tfs

我有一个使用服务器上的管理员帐户的 tfs 实例。当我想在不登录服务器的情况下连接时出现问题：如果管理员未登录，则服务不会运行。我该如何解决这个问题？我希望该服务在计算机启动时运行（不是用户登录）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T04:08:43.797

当你说“连接到”时，你能澄清一下吗？Tfs 要求创建一个运行相关 tfs 服务的服务帐户。如果 tfs 安装正确且 tfs 服务设置为自动，则无需登录 tfs 服务器即可执行正常的 tfs 操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T05:01:25.943

听起来您的服务器没有正确安装。请参阅您的 TFS 版本的安装指南：

*   [TFS 2012](http://www.microsoft.com/en-us/download/details.aspx?id=29035)
*   [TFS 2010](http://www.microsoft.com/en-us/download/details.aspx?id=24337)
*   [TFS 2008](http://www.microsoft.com/en-us/download/details.aspx?id=15743)

在所有版本中，TFS 的服务帐户不应**是**管理员。

# git - 如何获取JGIT中即将提交的文件列表？

> ID：13322158
> 
> 赞同：1
> 
> 时间：2012-11-10T12:42:47.980
> 
> 标签：git, pre-commit-hook, jgit

我需要为 GIT 编写一个 precommit 钩子，在其中检查即将提交的文件以查看它们是否根据特定的 eclipse 格式化程序进行了格式化。为此，我需要获取尚未提交的文件列表及其内容。这可以使用 JGIT 完成吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T15:19:28.770

AFAIK，提交挂钩尚未在 JGit 中实现。见[https://bugs.eclipse.org/bugs/show_bug.cgi?id=299315](https://bugs.eclipse.org/bugs/show_bug.cgi?id=299315)

但是，为了检查索引，您可以使用`DirCache`该类。DirCache.read(Repository) 返回给定存储库的索引。然后，您可以使用 a`TreeWalk`迭代条目或使用 getEntryCount() 和 getEntry()。
您可能还想查看单元测试以获取有关如何使用 API 的进一步指示。

# c# - 我们如何从动态创建的表中找到控件？

> ID：13322160
> 
> 赞同：0
> 
> 时间：2012-11-10T12:43:03.050
> 
> 标签：c#, asp.net, drop-down-menu, dynamic-data

我进行的方式如下：

表名：tbltt

1.我从源代码中添加了一个表格

2.cs页面创建行和列

3.Data会在运行时被绑定

4.我想保存表值，为此想在其中找到控件（每行和每列都有下拉菜单）

下面的表

```
public void createdynamictable()
    {
        string[] p = { "flag", "campusid", "ttid" };
        string[] v = { "3", campusID.ToString(), ddlTimetable.SelectedValue };
        DataTable dtt2 = bl.SelectDataTableUsingSp("SP_timetablefinal", p, v);
        if (dtt2.Rows.Count > 0)
        {
            DataTable dtTimeTable = new DataTable();
            dTable1 = new DataTable();

            ArrayList freeHours = new ArrayList();
            ArrayList PeriodCount = new ArrayList();
            ArrayList PeriodCount1 = new ArrayList();
            ArrayList PeriodDate = new ArrayList();
            int period = 0;
            period = dtt2.Rows.Count;
            HtmlTableRow tableRowhead = new HtmlTableRow();
            HtmlTableCell tableCellhead = new HtmlTableCell();
            // tableCellhead.ColSpan = period + 2;

            Label lblHead = new Label();
            lblHead.ForeColor = System.Drawing.Color.Red;
            tableCellhead.Controls.Add(lblHead);

            tableRowhead.Controls.Add(tableCellhead);
            tbltt.Controls.Add(tableRowhead);
            HtmlTableRow tableRow = new HtmlTableRow();
            tableRow.BgColor = "#0272A8";
            tableRow.Height = "32";
            HtmlTableCell tableCell1 = new HtmlTableCell();
            tableCell1.Width = "75px";
            Label lbl = new Label();
            lbl.Text = " Date";
            lbl.Font.Size = 12;
            lbl.Font.Bold = true;
            lbl.ForeColor = System.Drawing.Color.White;
            tableCell1.Controls.Add(lbl);
            tableRow.Controls.Add(tableCell1);
            dtTimeTable.Columns.Add();
            dtTimeTable.Rows.Add();

            for (int k = 0; k <= dtt2.Rows.Count; k++)
            {
                HtmlTableCell tableCell = new HtmlTableCell();
                Label lblPeriodHead = new Label();
                if (k < dtt2.Rows.Count)
                    lblPeriodHead.Text = dtt2.Rows[k][0].ToString();
                lblPeriodHead.Font.Size = 12;
                tableCell.Width = "85px";
                lblPeriodHead.ForeColor = System.Drawing.Color.White;
                lblPeriodHead.Font.Bold = true;
                tableCell.Controls.Add(lblPeriodHead);
                tableRow.Controls.Add(tableCell);
                dtTimeTable.Columns.Add();
                dtTimeTable.Rows[0][k] = lblPeriodHead.Text;

            }
            //done
            string[] p2 = { "flag", "campusid", "ttid" };
            string[] v2 = { "2", campusID.ToString(), ddlTimetable.SelectedValue };
            dt = bl.SelectDataTableUsingSp("SP_timetablefinal", p2, v2);
            if (dt.Rows.Count > 0)
            {
                tbltt.Controls.Add(tableRow);
                for (int m = 0; m < dt.Rows.Count; m++)
                {
                    HtmlTableRow tableRowday = new HtmlTableRow();
                    HtmlTableCell tableCellday = new HtmlTableCell();

                    //----------------------------------
                    HtmlTableCell tableCelldate = new HtmlTableCell();
                    Label lbldate = new Label();
                    lbldate.Text = dt.Rows[m][0].ToString();
                    lbldate.Font.Size = 9;
                    lbldate.Height = Unit.Pixel(20);
                    tableCelldate.Width = "85px";
                    lbldate.Height = Unit.Pixel(20);
                    tableCelldate.Controls.Add(lbldate);
                    dtTimeTable.Rows.Add();
                    dtTimeTable.Rows[m + 1][0] = lbldate.Text;
                    tableCelldate.BorderColor = "Grey";

                    tableRowday.Controls.Add(tableCelldate);
                    int pds = 0;

                    for (int j = 1; j <= period; j++)
                    {
                        HtmlTableCell tableCells = new HtmlTableCell();

                        string datet = lbldate.Text;

                        string[] p22 = { "flag", "ttid", "campusid" };
                        string[] v22 = { "3", ddlTimetable.SelectedValue, campusID.ToString() };
                        DataTable dtss = bl.SelectDataTableUsingSp("SP_timetablefinal", p22, v22);
                        if (dtss.Rows.Count > 0)
                        {
                            DataTable ddt = new DataTable();

                            string[] pp = { "flag", "classid", "campusid" };
                            string[] vv = { "4", ddlclass.SelectedValue, campusID.ToString() };
                            ddt = bl.SelectDataTableUsingSp("SP_timetablefinal", pp, vv);
                            int count = 0;
                            if (ddt.Rows.Count > 0)//fill subjects
                            {
                                pds = pds + 1;
                                DateTime dat = Convert.ToDateTime(bl.SplitDate(datet));
                                DropDownList ddlsubjects = new DropDownList();
                                //ddlsubjects.CssClass = "dropdownMedium";

                                //ddlsubjects.Attributes.Add("style", "font-style:italic;color: #FF3399; font-size: 10px; border: thin groove #000000;width:300px");     
                                //ddlsubjects.Style = "color: #FF3399; font-size: 10px; border: thin groove #000000 ";
                                tableCells.BorderColor = "Grey";
                                //lbtnPeriodHead1.Text = "";
                                ddlsubjects.Font.Size = 8;
                                ddlsubjects.ForeColor = System.Drawing.Color.SlateGray;
                                ddlsubjects.Height = Unit.Pixel(20);
                                tableCells.Controls.Add(ddlsubjects);
                                tableRowday.Controls.Add(tableCells);
                                // DropDownList ddlsubjects = (DropDownList)childItem.FindControl("ddlsubjects");
                                if (count < ddt.Rows.Count)
                                {
                                    string[] p5 = { "flag", "classid", "pdsno", "date", "campusid" };
                                    string[] v5 = { "1", ddlclass.SelectedValue, pds.ToString(), dat.ToString(), campusID.ToString() };
                                    DataTable dtb = bl.SelectDataTableUsingSp("[SP_timetablefinalsub]", p5, v5);
                                    if (dtb.Rows.Count > 0)
                                    {
                                        ddlsubjects.DataValueField = "SubjectClassid";
                                        ddlsubjects.DataTextField = "papername";
                                        ddlsubjects.DataSource = dtb;
                                        ddlsubjects.DataBind();
                                        ddlsubjects.Items.Insert(0, new ListItem("Select One", "0"));
                                        count++;

                                        //fill datas in DB
                                        DateTime datt = dat;
                                        string[] p3 = { "flag", "ttid", "date", "campusid", "pdnum" };
                                        string[] v3 = { "6", ddlTimetable.SelectedValue, datt.ToString(), campusID.ToString(), pds.ToString() };
                                        DataTable d3 = bl.SelectDataTableUsingSp("SP_timetablefinal", p3, v3);
                                        if (d3.Rows.Count > 0)
                                        {
                                            if (d3.Rows[0][0].ToString()!= "0")
                                            {
                                                ddlsubjects.SelectedValue = d3.Rows[0][0].ToString();
                                            }   
                                        }
                                        //same group in any other class
                                        string[] p1 = { "flag", "classid", "fromdate", "todate" };
                                        string[] v1 = { "10", ddlclass.SelectedValue, bl.SplitDate(txtfrmdate.Text), bl.SplitDate(txttodate.Text) };
                                        DataTable dti = bl.SelectDataTableUsingSp("SP_timetablefinal", p1, v1);
                                        if (dti.Rows.Count > 0)
                                        {
                                            for (int s = 0; s < dti.Rows.Count; s++)
                                            {
                                                if (Convert.ToDateTime(dti.Rows[s]["date"]) == dat)
                                                {
                                                    if (Convert.ToInt16(dti.Rows[s]["periodnum"]) == pds)
                                                    {
                                                        int sss = Convert.ToInt16(dti.Rows[s]["opgroupid"]);
                                                        ddlsubjects.SelectedValue = sss.ToString();
                                                        ddlsubjects.Enabled = false;
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }

                    tbltt.Controls.Add(tableRowday);
                }
            }
        }
    } 
```

我想要一种动态获取控件**“ddlsubjects”**的方法。那就是我想要获取它的值。请给我一个适当的方法来得到这个。任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T01:04:34.453

如果为每个控件（ID 属性）分配唯一的 ID，则可以使用 FindControl 来获取所需的内容：http: [//msdn.microsoft.com/it-it/library/486wc64h.aspx](http://msdn.microsoft.com/it-it/library/486wc64h.aspx)

FindControl 按 ID 名称查找与其嵌套级别无关，因此：

```
<control id="name1">
  <control id="name1_1"></control>
  <control id="name1_2"></control>
  <control id="name1_3">
    <control id="name1_3_1">value</control>
  </control>
</control> 
```

使用以下命令查找“name1_3_1”：

```
name1.FindControl("name1_3_1"); //Assuming they are all server-side controls, so runat="server" marked. 
```

会给你“name1_3_1”，如果存在，否则为空。

# vim - 在显示搜索结果之前，终端 vim 中的确认会闪烁其输出。如何阻止它？

> ID：13322161
> 
> 赞同：12
> 
> 时间：2012-11-10T12:43:07.713
> 
> 标签：vim, ack

我在 Ubuntu 12.04 的 gnome-terminal 和 MacOS 的终端中使用 vim。我使用 ack.vim 插件来执行项目范围的文本搜索，它工作正常，但有一个不舒服和分散注意力的错误：

当您执行搜索时，整个 vim 屏幕会返回到终端并在运行时显示 ack 的输出。当它停止运行时，屏幕返回 vim 并正确显示搜索结果。此外，当您退出 vim 时，所有 ack 的输出都将在终端中。

我知道这个问题[https://github.com/mileszs/ack.vim/issues/18](https://github.com/mileszs/ack.vim/issues/18)但我想把它贴在这里看看我是否能得到关于如何解决它的想法。

在 ack.vim 中，我可以看到`silent execute a:cmd . " " . l:grepargs`我认为实际运行 ack 命令的行。静音选项已经存在，这就是我的 vim-fu 带给我的。:S

有人对如何解决这个问题有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-10T13:13:28.113

这是 vim 自己的`:grep*`命令如何工作的问题，而不是`ack.vim`问题。您不能阻止使用终端，但设置`shellpipe`为`>`, `&>`or`2>/dev/null>`将阻止命令将输出复制到终端（默认情况下，此选项是`2>&1|tee`和`&>`或`2>&1>`值最接近当前所做的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-13T13:09:18.417

建议的解决方案有效，但现在按 ctrl-z 后 vim 屏幕在输出中。

# ios - 不支持的媒体类型错误 - 从 iPhone 应用程序发布 json

> ID：13322163
> 
> 赞同：0
> 
> 时间：2012-11-10T12:43:22.863
> 
> 标签：ios, json, asiformdatarequest, media-type

我正在尝试以以下形式生成 json 并将其发布到服务器：

```
{
"items":  [
 {
  "id": "3",
  "quantity": 0.5,
  "unit": "2"
 } ]
} 
```

我正在使用`ASIFormDataRequest`. 我已经转义了 json 字符串，以便将其作为请求参数发送到 url

```
NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"http://api.esha.com/analysis?items=%@&apikey=%@",encodeJson,ApiKey]];
//here i have send escaped json (do I really need to do this thing?)

_request = [ASIFormDataRequest requestWithURL:url];
[_request setPostValue:jsonString forKey:@"items"]; //original json string
[_request setPostValue:ApiKey forKey:@"apikey"];
[_request setRequestMethod:@"POST"];
[_request addRequestHeader:@"Content-Type" value:@"application/json"];
[_request setDelegate:self];
_request.timeOutSeconds = 60.0; 
[_request startSynchronous]; 
```

作为回应，我收到 HTML 格式的“不支持的媒体类型”错误：

```
<body>
<h1>HTTP Status 415 - Unsupported Media Type</h1>
<HR size="1" noshade="noshade"><p><b>type</b>
Status report</p><p><b>message</b>
<u>Unsupported Media Type</u></p>
<p><b>description</b> <u>The server refused this request because the request entity is in a format not supported by the requested resource for the requested method (Unsupported Media Type).</u></p><HR size="1" noshade="noshade"><h3>Apache Tomcat/7.0.23</h3>
</body> 
```

我会犯什么错误？谁能引导我走向正确的道路？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T16:26:14.397

最后我自己解决了。我的错误是我试图在请求的 URL 中发布 json（编码或什么），而服务器可能没有任何方法来支持这样的请求。我也试过**ASIHTTPRequest**，不知道为什么 ASIFormRequest 不起作用。现在我得到了回应。

所以我将上面的代码更改为：

```
NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"http://api.esha.com/analysis?apikey=%@",ApiKey]];

ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:url];
[request addRequestHeader:@"Content-Type" value:@"application/json"];
[request setPostBody:(NSMutableData *)[jsonString dataUsingEncoding:NSUTF8StringEncoding]];
[request setDelegate:self];
[request startSynchronous]; 
```

# c++ - 逻辑运算符及其在 C/C++ 中的优先级

> ID：13322167
> 
> 赞同：5
> 
> 时间：2012-11-10T12:43:49.727
> 
> 标签：c++, c, operators, logical-operators

我最近遇到了一段代码

// 克服被零除的程序

```
int a=0;
int b=100;

int c= a==0 || b/a ;

printf("Hello"); 
```

//输出：你好

我的理论：根据优先级，运算符/的优先级高于||。所以 b/a 必须首先执行，我们应该得到一个运行时错误。

我假设正在发生的事情是：

短路运算符 || , 评估 LHS a==0，这是真的，因此不执行 b/a。

我的理论错了吗？我很确定这是非常简单的事情，我现在无法弄清楚

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-10T12:46:31.437

优先级并不意味着评估顺序，只是分组（括号）。

在计算 的第一个操作数之后有一个序列点（旧用语）`||`，因此`||`无论这些操作数是什么，都必须在第二个操作数之前计算 的第一个操作数。由于在这种情况下，表达式的整体结果`a == 0 || b/a`是由第一个操作数确定的，因此根本不计算第二个操作数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-10T12:47:39.053

`/`over的较高优先级`||`意味着表达式被计算为：

```
int c= (a==0) || (b/a) ; 
```

并不是

```
int c= (a==0 || b)/a ; 
```

但是，由于逻辑评估是短路的，`b/a`只会在`a!=0`.

# java - 模型输入/输出作为端口

> ID：13322169
> 
> 赞同：0
> 
> 时间：2012-11-10T12:44:01.477
> 
> 标签：java, fractals

我有一个学校作业，要使用分形模拟一个简单的方程计算器。作业有两个部分。1\. 作为可重用的 COTS 组件 2\. 作为架构组件（由它们的输入和输出端口描述）

我设法完成了作业的第一部分，但我不知道如何用输入/输出作为端口来建模一个类。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T12:59:09.600

您必须按照以下条款处理合同：

*   提供的操作
*   所需操作
*   属性（参数化）

操作可以是事件（发送/接收）、服务（客户端/服务器）或数据（读取/写入）。

您可能会从[OMG CCM](http://www.omg.org/spec/CCM/)阅读更多有关组件的信息，但仅限于概念，而不是实现（重）。

# android - 没有得到 KML 文件作为响应

> ID：13322178
> 
> 赞同：-3
> 
> 时间：2012-11-10T12:46:09.693
> 
> 标签：android, google-maps, mobile, kml, map-directions

我正在创建一个应用程序，我必须在其中发布到此 url：[Url to get KML](https://maps.google.com/maps?saddr=22.583375060000,88.434077990000&daddr=22.491368100000,88.348189300000&ie=UTF8&0&om=0&output=kml)

根据本教程，该 url 应该返回一个 KML 文件：

[教程链接](http://blog.synyx.de/2010/06/routing-driving-directions-on-android-part-1-get-the-route/)

但是当我点击 url 时，我会得到一个**HTML**文件作为响应，这很难解析并且没用。

**我的源代码是：**

```
//Calling function to get the response KML
  getKmlFromUrl("https://maps.google.com/maps?saddr=22.583375060000,88.434077990000&daddr=22.491368100000,88.348189300000&ie=UTF8&0&om=0&output=kml"); 
```

//这是获取KML文件并显示在logcat中的函数 void getKmlFromUrl(String urlString) { String kml = null;

```
 try {
                // defaultHttpClient
                DefaultHttpClient httpClient = new DefaultHttpClient();
                makeAToast("URL:"+urlString);
                HttpPost httpPost = new HttpPost(urlString);

                HttpResponse httpResponse = httpClient.execute(httpPost);
                HttpEntity httpEntity = httpResponse.getEntity();
                kml = EntityUtils.toString(httpEntity);

               System.out.println("KML: "+kml);

            } catch (UnsupportedEncodingException e) {
                e.printStackTrace();
            } catch (ClientProtocolException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }
//          // return XML
//         // return xml;

        } 
```

完成所有这些操作后，我没有收到**KML**响应，而是收到了**HTML**响应。响应（在 logcat 中）在这里：

[日志输出](http://justpaste.it/1ido)

我哪里错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T12:54:32.310

不再使用 KML 响应，谷歌返回 JSON 或 XML，查看以下链接： [https ://developers.google.com/places/documentation/](https://developers.google.com/places/documentation/)

# c# - 通过 web.config 删除查询字符串

> ID：13322179
> 
> 赞同：1
> 
> 时间：2012-11-10T12:46:11.520
> 
> 标签：c#, asp.net, iis, web-config, url-rewrite-module

在我的网站上，我的 URL 有时会得到一个查询字符串参数，该参数由我们的外部系统附加。

因此，它看起来不像这样：`http://www.domain.com?myquery=blah`or `http://www.domain.com`，它有 url `http`: `http://www.domain.com?myquery=blah&theirpara=blah`or `http://www.domain.com?theirpara=blah`。

当用户使用“theirpara”参数访问时，我想在没有它的情况下将 301 重定向到 URL。

我试过使用 URL 重写模块，但没有真正到达任何地方。如果可能的话，最好在 IIS/web.config 级别而不是 Response.RedirectPermanent 上执行此操作。

我认为使用规则（URL 写入模块）进行设置会很好，但老实说，我不知道如何解决这个问题。我正在使用以下规则来删除尾部斜杠，但不确定如何根据需要对其进行修改。

```
<!--To always remove trailing slash from the URL-->
<rule name="Remove trailing slash" stopProcessing="true">
  <match url="(.*)/$" />
  <conditions>
    <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
    <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
  </conditions>
  <action type="Redirect" redirectType="Permanent" url="{R:1}" />
</rule> 
```

关于如何设置它的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T13:28:44.413

如果您正在寻找一个非常通用的规则来删除`theirpara`但保留任何其他查询字符串参数，那么您将不得不处理以下情况

1.  它是单独的：`?theirpara=123`->`/`
2.  它是第一个：`?theirpara=123&ourparams=456`->`?ourparams=456`
3.  它在中间：`?our1=123&theirpara=456&our2=789`->`?our1=123&our2=789`
4.  这是最后一个：`?ourparams=123&theirpara=456`->`?ourparams=123`

我写了一个规则来处理这些情况，但如果 4 留下一个尾随 & 符号，我希望它足以让你开始。

```
<rule name="Redirect on theirpara" stopProcessing="true">
    <match url="^(.*)$" />
        <conditions>
            <add input="{QUERY_STRING}" pattern="^(.*)theirpara=([^=&amp;]+)&amp;?(.*)$" />
        </conditions>
    <action type="Redirect" url="/{R:0}?{C:1}{C:3}" appendQueryString="false" />
</rule> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T13:28:12.793

我手头没有 IIS，但以下应该可以工作：

将匹配更改为

```
<match url="(.*)&theirpara=blah(.*)" /> 
```

并重定向到

```
<action type="Redirect" redirectType="Permanent" url="{R:1}{R:2}" /> 
```

如果您希望它不仅在普通域上工作，您应该相应地删除条件。

# c# - 无法在 FlipView 内的 WebView 中加载网站

> ID：13322183
> 
> 赞同：0
> 
> 时间：2012-11-10T12:46:29.333
> 
> 标签：c#, .net, xaml

我正在尝试在 Windows Store 应用程序的 FlipView 控件中打开一个网站。这是我的代码：

```
protected override async void LoadState(Object navigationParameter, Dictionary<String, Object> pageState)
{
    var template = flipView.ItemTemplate;
    var grid = (Grid)template.LoadContent();
    var webView = (WebView)grid.Children[0];

    webView.Navigate(new Uri("http://www.google.com"));
}

private void contentView_LoadCompleted_1(object sender, NavigationEventArgs e)
{
    var template = flipView.ItemTemplate;
    var grid = (Grid)template.LoadContent();
    var webView = (WebView)grid.Children[0];
    webView.Visibility = Windows.UI.Xaml.Visibility.Visible;
} 
```

和 XAML：

```
 <FlipView
        x:Name="flipView"
        AutomationProperties.AutomationId="ItemsFlipView"
        AutomationProperties.Name="Item Details"
        TabIndex="1"
        Grid.RowSpan="2"
        ItemsSource="{Binding Source={StaticResource itemsViewSource}}">

        <FlipView.ItemContainerStyle>
            <Style TargetType="FlipViewItem">
                <Setter Property="Margin" Value="0,137,0,0"/>
            </Style>
        </FlipView.ItemContainerStyle>

        <FlipView.ItemTemplate>
            <DataTemplate>
                <Grid x:Name="Output">
                            <WebView x:Name="WebView1" Visibility="Collapsed" LoadCompleted="contentView_LoadCompleted_1"/>
                            <Rectangle x:Name="BlockingRect"/>
                </Grid>
            </DataTemplate>
        </FlipView.ItemTemplate>
    </FlipView> 
```

也许有人早些时候遇到过这个问题？解决方案是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T20:01:17.427

callisto WebViewExtension [https://github.com/timheuer/callisto/wiki/WebViewExtension](https://github.com/timheuer/callisto/wiki/WebViewExtension)是我发现将 WebView 内容绑定到 FlipView 的最佳方式。

在默认用法中，WebView 项中的一些触摸（特别是点击）交互仍然存在问题，因为 FlipView 正在处理这些交互，而不是让它们落入 WebView。从而导致无法与 WebView 中的链接进行交互。使用鼠标时这不是问题，尽管点击会落入 WebView。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T13:58:20.930

首先为您的框架控件提供唯一名称 ，而`x:Name="ItemDetailPageWebView"` 不是复制并粘贴在代码后面的代码后面 ı Wright Down 下面

XAML：

```
 <FlipView x:Name="flipView"
       AutomationProperties.AutomationId="ItemsFlipView"
       AutomationProperties.Name="Item Details"
       TabIndex="1" Grid.Row="1"
       ItemsSource="{Binding Source={StaticResource itemsViewSource}}"   
       Loaded="ItemDetailPageflipView_Loaded">
              <FlipView.ItemTemplate>
                  <DataTemplate>
                     <Grid>       
                        <ScrollViewer Margin="0,0,0,0" Style="{StaticResource HorizontalScrollViewerStyle}" >
                            <StackPanel  Orientation="Horizontal" Height="628" Width="2755">
                                  <WebView x:Name="ItemDetailPageWebView" Height="443" Margin="53,82,0,0" VerticalAlignment="Top" Width="435" />
                            </StackPanel>
                      </ScrollViewer>
                 </Grid>
            </DataTemplate>
        </FlipView.ItemTemplate>
    </FlipView> 
```

C＃ ：

```
//-----------------------------------------------------------------------------------
            public static T FindVisualChildByName<T>(DependencyObject parent, string name) where T : DependencyObject
            {
                for (int i = 0; i < VisualTreeHelper.GetChildrenCount(parent); i++)
                {
                    var child = VisualTreeHelper.GetChild(parent, i);
                    string controlName = child.GetValue(Control.NameProperty) as string;
                    if (controlName == name)
                    {
                        return child as T;
                    }
                    else
                    {
                        T result = FindVisualChildByName<T>(child, name);
                        if (result != null)
                            return result;
                    }
                }
                return null;
            }

            //Here FlipView Loaded Event 
            private void ItemDetailPageflipView_Loaded(object sender, RoutedEventArgs e)
            {
                WebView ItemDetailPageWebView = FindVisualChildByName<WebView>(this.flipView, "ItemDetailPageWebView");
                ItemDetailPageWebView.Navigate(new Uri("http://www.google.com"));
            }

        //----------------------------------------------------------------------------------- 
```

如果我有帮助，请给我一个 +，然后单击答案。快乐编码；）

# c - openssl-rsa c 库

> ID：13322185
> 
> 赞同：1
> 
> 时间：2012-11-10T12:46:39.913
> 
> 标签：c, openssl

JKJS

```
RSA_print_fp(stdout,rsa,1); 
```

此函数在模数中添加 0x00。所以公钥大小变为 129 字节而不是 128 字节。为什么要添加 0x00？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T14:26:39.143

模数是一个整数，而不是一串字节。整数可以是负数也可以是正数。尽管 RSA 中的模数不使用负整数，但处理整数的函数在 OpenSSL 中是通用的。

负数的最高有效位设置为 1。为了区分负整数和恰好将最高有效字节的第 7 位设置为 1 的正整数，正整数以 0x00 为前缀。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T18:45:31.820

它是模数的 ASN.1 DER 编码。整数以二进制补码形式、大端顺序和最小字节数表示。

根据该规则，`FF`是 -1（十进制）和`00 FF`255（十进制）。

在 RSA 中，所有整数都是正数。因此，从不设置最左边字节的 MSB 位。

# bash - 从 bash 脚本调用 grunt.js 时出现问题

> ID：13322193
> 
> 赞同：1
> 
> 时间：2012-11-10T12:48:18.017
> 
> 标签：bash, node.js, gruntjs

当我从与 grunt.js 相同的目录中调用 grunt（https://github.com/gruntjs/grunt）时，它工作正常。

但是，如果我尝试制作名为“build.sh”的 bash 脚本：

```
#!/bin/bash
`grunt grunt.js` 
```

当我调用 ./build.sh 时，它会出现以下错误：

> ./build.sh：第 2 行：运行：找不到命令

我尝试指定 grunt 的完整路径，也尝试使用配置指定 grunt.js 文件的完整路径，但它不想工作:(

我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T15:20:47.893

您不需要 ` 标记，因为这意味着“替换命令的输出”。你想要的只是

```
#!/bin/bash
grunt grunt.js 
```

或者，`exec grunt grunt.js`。

# actionscript-3 - AS3：将多个对象旋转到它们的随机点

> ID：13322194
> 
> 赞同：0
> 
> 时间：2012-11-10T12:48:21.593
> 
> 标签：actionscript-3

Taurayi先生，您提供的解决方案真是太棒了。但我不想在进入框架中这样做。我只是补间对象以旋转到随机位置。所以让我知道轮换的条件。我的意思是对象应该向随机点旋转。例如。如果（dx < 0）{

```
 dx += 360;
                    dy += 360; 
                    angl = Math.atan(dy/dx) + deg2rad(90)
                    InsectsVector[i].rotation = angl;
                }

                if(dx >= 360){

                    dx  -=  360;
                    dy  -=  360;
                    angl = Math.atan(dy/dx) + deg2rad(90)
                    InsectsVector[i].rotation = angl;
                }

                if ( dy > 180 )
                {
                    dx -= 360;
                    dy -= 360
                    angl = Math.atan(dy/dx) + deg2rad(-90);
                    InsectsVector[i].rotation = angl;
                }

                if ( dx < -180 )
                {
                    dx += 360;
                    dy += 360;
                    angl = Math.atan(dy/dx) + deg2rad(90)
                    InsectsVector[i].rotation = angl;
                } 
```

上面的这种情况在下面的编码中不能正常工作。所以请让我知道这一点。

```
 Please its very urgent dudes. And thanks in advance for replying. 
  private function InsectsRandPos():void{

        randNum_1 = uint(Math.random()*50);
        for (var i:uint=0; i < InsectsVector.length; i++){
            while(InsecNode.indexOf(randNum_1) != -1){
                randNum_1 = uint(Math.random()*50);
            }
            InsecNode[i] = randNum_1;
            randPointForInsec = nodeContainer.getNodePostion(InsecNode[i]);

            if(spNode != InsecNode[i]){ 
                InsectsVector[i].visible = true;
                nodeContainer.addChild(InsectsVector[i]);

                var dx:Number =  randPointForInsec.x - InsectsVector[i].x ;
                var dy:Number =  randPointForInsec.y - InsectsVector[i].y ;
                var angl:Number   = Math.atan(dy/dx) + deg2rad(90);
                InsectsVector[i].rotation = angl; //  (angl*-1)+180;

                if( dx < 0){

                    dx += 360;
                    dy += 360; 
                    angl = Math.atan(dy/dx) + deg2rad(90)
                    InsectsVector[i].rotation = angl;
                }

                if(dx >= 360){

                    dx  -=  360;
                    dy  -=  360;
                    angl = Math.atan(dy/dx) + deg2rad(90)
                    InsectsVector[i].rotation = angl;
                }

                if ( dy > 180 )
                {
                    dx -= 360;
                    dy -= 360
                    angl = Math.atan(dy/dx) + deg2rad(-90);
                    InsectsVector[i].rotation = angl;
                }

                if ( dx < -180 )
                {
                    dx += 360;
                    dy += 360;
                    angl = Math.atan(dy/dx) + deg2rad(90)
                    InsectsVector[i].rotation = angl;
                }

                var InsectTwee:Tween = new Tween(InsectsVector[i], 5, Transitions.LINEAR );
                InsectTwee.animate("x", randPointForInsec.x);      
                InsectTwee.animate("y", randPointForInsec.y);
                Starling.juggler.add(InsectTwee);

            }

            else if(spNode == InsecNode[i]){
                var obj:Object = new Object(); 
                obj = InsectsVector[i];
                obj.visible = false;
                trace("obj  .name ..."+obj + "   InsectsVector[i] :"+InsectsVector[i])
            }
        }   
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T19:44:06.027

有点难以理解你的问题。我根据我对您所要求的内容的理解举了一个例子：

**[更新]**

```
package 
{
    import flash.display.Sprite;
    import flash.events.Event;
    import flash.events.TimerEvent;
    import flash.geom.Point;
    import flash.utils.Timer;

    /**
     * ...
     * @author 
     */
    public class Main extends Sprite 
    {
        public function Main():void 
        {
            if (stage) init();
            else addEventListener(Event.ADDED_TO_STAGE, init);

        }// end function

        private function init(e:Event = null):void 
        {
            removeEventListener(Event.ADDED_TO_STAGE, init);

            for (var i:int = 0; i < 20; i++) {

                var npc:NPC = new NPC();
                npc.addEventListener(NPC.MOVE_COMPLETE, onMoveComplete);
                npc.setDelay(5000);
                npc.setPoints(getRandomPoint(), getRandomPoint());
                npc.updateRotation();
                npc.move();

                addChild(npc);

            }// end for

        }// end function

        private function onMoveComplete(e:Event):void {

            var npc:NPC = e.target as NPC;
            npc.removeEventListener(NPC.MOVE_COMPLETE, onMoveComplete);
            npc.setPoints(npc.getPoint(), getRandomPoint());
            npc.addEventListener(NPC.ROTATION_COMPLETE, onRotationComplete);
            npc.rotate();

        }// end function

        private function onRotationComplete(e:Event):void {

            var npc:NPC = e.target as NPC;
            npc.removeEventListener(NPC.ROTATION_COMPLETE, onRotationComplete);
            npc.addEventListener(NPC.MOVE_COMPLETE, onMoveComplete);
            npc.move();

        }// end function

        private function getRandomPoint():Point {

            var randomX:Number = Math.random() * stage.stageWidth;
            var randomY:Number = Math.random() * stage.stageHeight;

            return new Point(randomX, randomY);

        }// end function

    }// end class

}// end package

import flash.display.Sprite;
import flash.display.Shape;
import flash.events.Event;
import flash.geom.Point;
import flash.utils.Timer;
import flash.events.TimerEvent;
class NPC extends Sprite {

    public static const MOVE_COMPLETE:String = "moveComplete";
    public static const ROTATION_COMPLETE:String = "rotationComplete";
    private var _to:Point;
    private var _from:Point;
    private var _timer:Timer;
    private var _delay:Number;

    public function get from():Point { 

        return _from; 

    }// end function

    public function get to():Point {

        return _to; 

    }// end function

    public function NPC() {

        addShape();

    }// end function

    public function setDelay(delay:Number):void {

        _delay = delay;

    }// end function

    public function setPoints(from:Point, to:Point):void {

        this._from = from;
        this._to = to;

        this.x = from.x;
        this.y = from.y;

    }// end function

    public function move():void {

        if (!this._to || !this._from)
            throw new Error("to and from points must be set");

        if (!_delay)
            throw new Error("delay must be set");

        addTimer();

    }// end function

        public function rotate():void {

            this.addEventListener(Event.ENTER_FRAME, onRotationEnterFrame);

        }// end function

        private function onRotationEnterFrame(e:Event):void
        {
            var dAngle:int = (getAngle() - this.rotation) % 360;

            if (dAngle < -180) {

                dAngle += 360;

            }
            else if (dAngle > 180) {

                dAngle -= 360;

            }// end if

            if (dAngle < 0) {

                --this.rotation;

            } else { 

                ++this.rotation;

            }// end if

            if (dAngle == 0) {

                removeEventListener(Event.ENTER_FRAME, onRotationEnterFrame);
                dispatchEvent(new Event(NPC.ROTATION_COMPLETE));

            }// end if

        }// end function

    private function addShape():void {

        var shape:Shape = new Shape();
        shape.graphics.lineStyle(1, 0x000000);
        shape.graphics.drawRect(-10, -10, 20, 20);
        shape.graphics.endFill();
        shape.graphics.beginFill(0x000000);
        shape.graphics.moveTo(-10, -10);
        shape.graphics.lineTo(0,-10);
        shape.graphics.lineTo(-10, 0);
        shape.graphics.lineTo( -10, -10);
        shape.rotation = 45;
        addChild(shape);

    }// end function

    private function addTimer():void {

        this.addEventListener(Event.ENTER_FRAME, onEnterFrame);

        _timer = new Timer(_delay, 1);
        _timer.addEventListener(TimerEvent.TIMER, onTimer);
        _timer.start();

    }// end function

    private function onTimer(e:Event):void {

        removeTimer();

    }// end function

    private function removeTimer():void {

        _timer.removeEventListener(TimerEvent.TIMER, onTimer);
        removeEventListener(Event.ENTER_FRAME, onEnterFrame);

        dispatchEvent(new Event(NPC.MOVE_COMPLETE));

    }// end function

    private function onEnterFrame(e:Event):void {

        var dPoint:Point = getDPoint();
        this.x += dPoint.x;
        this.y += dPoint.y;

        if (_to.equals(getPoint())) {

            removeTimer();

        }// end if

    }// end function

    private function getDPoint():Point {

        var point:Point = _to.subtract(_from);
        point.normalize(1);
        return point;

    }// end function

    public function getPoint():Point {

        return new Point(this.x, this.y);

    }// end function

    public function updateRotation():void {

        this.rotation = getAngle();

    }// end function

    public function getAngle():Number {

        var dPoint:Point = getDPoint();
        return Math.atan2(dPoint.y, dPoint.x) * (180 / Math.PI) + 90;

    }// end function

}// end class 
```

尝试运行它，看看它是否符合您的需要。如果是这样，我将逐步解释该示例。

这是示例应用程序运行的屏幕截图：

![在此处输入图像描述](../Images/b07228ca59a3c88dc24b394cc7d00c3d.png)

**[更新]**

@Siva 我刚刚添加了公共`rotate()`方法和私有`onRotationEnterframe`事件处理程序。

该`rotate()`方法只是向对象添加一个`Event.ENTER_FRAME`侦听器。`NPC`

```
public function rotate():void {

    this.addEventListener(Event.ENTER_FRAME, onRotationEnterFrame);

}// end function 
```

调用事件处理程序时`onRotationEnterFrame()`，第一条语句获取`NPC`对象将旋转到的角度与`NPC`对象当前角度之间的差值。

```
var dAngle:int = (getAngle() - this.rotation) % 360; 
```

根据角度是小于 -180 度还是大于 180 度，我们加或减 360 度。

```
 if (dAngle < -180) {

            dAngle += 360;

        }
        else if (dAngle > 180) {

            dAngle -= 360;

        }// end if 
```

然后我们使用改变的角度来计算我们是顺时针旋转还是逆时针旋转。

```
 if (dAngle < 0) {

            --this.rotation;

        } else { 

            ++this.rotation;

        }// end if 
```

当角度达到 0 时，我们移除`onRotationEnterFrame`事件侦听器并发送`NPC.ROTATION_COMPLETE`事件。

```
 if (dAngle == 0) {

            removeEventListener(Event.ENTER_FRAME, onRotationEnterFrame);
            dispatchEvent(new Event(NPC.ROTATION_COMPLETE));

        }// end if 
```

最后在客户端，我们`onMoveComplete()`通过添加一个监听`NPC.ROTATION_COMPLETE`. 我们为`NPC`对象将遵循的新线设置新点，然后调用`NPC`对象的`rotate()`.

# .net - 为构建服务器上的 Windows 应用商店单元测试自动获取开发人员许可证

> ID：13322197
> 
> 赞同：13
> 
> 时间：2012-11-10T12:49:03.450
> 
> 标签：.net, unit-testing, windows-8, windows-store-apps

对于 Windows 应用商店应用程序，需要开发人员许可证才能运行单元测试，这对于个人开发人员在其个人计算机上来说很好。

但是对于构建服务器上的持续集成过程，我们确实需要自动获取许可证的能力。

Microsoft 提供了一个命令行工具，但它仍然会创建一个交互式窗口，这会中断该过程。

```
TailoredDeploy.exe AcquireDeveloperLicense 
```

那么有人知道自动获得开发者许可证的任何其他方式吗？如果需要手动设置，生成新的构建节点将是地狱。他们每个人的VPN。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T17:16:54.677

有人建议我使用[UI Automation](http://msdn.microsoft.com/en-us/library/ms747327.aspx)，这是我到目前为止所想到的：

```
using System.Diagnostics;
using System.Threading;
using System.Windows.Automation;

class Program
{
    static void Main(string[] args)
    {
        var processStartInfo = new ProcessStartInfo(@"C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\TailoredDeploy.exe", "AcquireDeveloperLicense");

        var process = Process.Start(processStartInfo);
        process.WaitForInputIdle();

        Thread.Sleep(1000);

        var agreementWindow = AutomationElement.RootElement.FindFirst(TreeScope.Children,
            new PropertyCondition(AutomationElement.ProcessIdProperty, process.Id));

        var iAgreeButton = agreementWindow.FindAll(TreeScope.Children, Condition.TrueCondition)[0]
                                          .FindAll(TreeScope.Children, Condition.TrueCondition)[2];

        var buttonPattern = iAgreeButton.GetCurrentPattern(AutomationPattern.LookupById(InvokePattern.Pattern.Id)) as InvokePattern;
        buttonPattern.Invoke();

        Thread.Sleep(10000);

        var processes = Process.GetProcessesByName("dllhost");

        var credentialsWindows = AutomationElement.RootElement.FindAll(TreeScope.Children,
            new PropertyCondition(AutomationElement.ProcessIdProperty, processes[0].Id));

        if (credentialsWindows[0].Current.Name == "Developer License")
        {
            var credentialsPane = credentialsWindows[0].FindAll(TreeScope.Children, Condition.TrueCondition)[0]
                                                       .FindAll(TreeScope.Children, Condition.TrueCondition)[0]
                                                       .FindAll(TreeScope.Children, Condition.TrueCondition)[0]
                                                       .FindAll(TreeScope.Children, Condition.TrueCondition)[0]
                                                       .FindAll(TreeScope.Children, Condition.TrueCondition);

            var usernameTextBox = credentialsPane[3].GetCurrentPattern(AutomationPattern.LookupById(ValuePattern.Pattern.Id)) as ValuePattern;
            usernameTextBox.SetValue("username@outlook.com");

            var passwordTextBox = credentialsPane[5].GetCurrentPattern(AutomationPattern.LookupById(ValuePattern.Pattern.Id)) as ValuePattern;
            passwordTextBox.SetValue("password");

            var loginButton = credentialsPane[8].GetCurrentPattern(AutomationPattern.LookupById(InvokePattern.Pattern.Id)) as InvokePattern;
            loginButton.Invoke();

            Thread.Sleep(10000);

            var finishUpProcesses = Process.GetProcessesByName("TailoredDeploy");

            var finishWindow = AutomationElement.RootElement.FindFirst(TreeScope.Children,
                new PropertyCondition(AutomationElement.ProcessIdProperty, finishUpProcesses[0].Id));

            var lastItems = finishWindow.FindAll(TreeScope.Children, Condition.TrueCondition)[0]
                                        .FindAll(TreeScope.Children, Condition.TrueCondition);

            var closeButton = lastItems[3].GetCurrentPattern(AutomationPattern.LookupById(InvokePattern.Pattern.Id)) as InvokePattern;
            closeButton.Invoke();
        }
    }
} 
```

要使用它，`app.manifest`需要 a 在提升模式下运行：

```
<?xml version="1.0" encoding="utf-8"?>
<asmv1:assembly manifestVersion="1.0" xmlns="urn:schemas-microsoft-com:asm.v1" xmlns:asmv1="urn:schemas-microsoft-com:asm.v1" xmlns:asmv2="urn:schemas-microsoft-com:asm.v2" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <assemblyIdentity version="1.0.0.0" name="MyApplication.app"/>
  <trustInfo xmlns="urn:schemas-microsoft-com:asm.v2">
    <security>
      <requestedPrivileges xmlns="urn:schemas-microsoft-com:asm.v3">
        <requestedExecutionLevel  level="requireAdministrator" uiAccess="false" />
      </requestedPrivileges>
    </security>
  </trustInfo>
  <compatibility xmlns="urn:schemas-microsoft-com:compatibility.v1">
    <application>
    </application>
  </compatibility>
</asmv1:assembly> 
```

# c# - Entity Framework 4.0 批量操作的性能

> ID：13322198
> 
> 赞同：1
> 
> 时间：2012-11-10T12:49:41.950
> 
> 标签：c#, sql, entity-framework-4

我目前正在改进使用实体框架（并且有 4.0 版本）的现有 c# 项目的性能。应用程序中有两种类型的批量操作：

1.  批量插入
2.  批量删除

目前它们是使用纯 SQL 语句（“INSERT INTO...”、“DELETE FROM...”）完成的（插入语句本身目前不是批量插入语句，而是“普通”插入语句）。

由于我对 C# 还很陌生，所以我的第一步是看看如果我使用实体框架进行更新和删除，性能会如何。

我的问题是三个折叠：

1.  如果我尝试使用实体框架进行批量插入，它确实对每个插入的数据行使用 1 个插入，这是真的吗？（因此每个插入都有一个往返）。因此性能低于使用 SQL“插入”？
2.  这对删除语句也适用吗？
3.  这里的最佳做法是什么？使用 SQL 语句？还是使用实体框架，或者完全是别的什么？

（对于数据行，我说的是每个 2k-200k 的大小）。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T13:22:59.617

如果您真的想插入批量数据，您可能想要使用`SqlBulkCopy`. 您可以在 EF 上下文使用的同一事务中使用它。

EF 不适用于批量操作，您可能会发现它的单行每语句 DML 方法对于大型集合来说过于严格。它强制执行大量往返、大量每个语句的开销，并阻止 SQL Server 一次优化多行的查询计划，这几乎总是比许多小查询更有效（例如 SQL Server 将正确排序所有行，因此索引可以按顺序更新）。

通过使用 EF 进行批量 DML，您基本上可以强制 SQL Server 使用每行 DML 计划。

批量删除可以通过将键批量插入临时表，然后执行连接到该表的删除语句来处理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-10T13:17:42.720

我的问题是三个折叠：

> 如果我尝试使用实体框架进行批量插入，它确实对每个插入的数据行使用 1 个插入，这是真的吗？（因此每个插入都有一个往返）。因此性能低于使用 SQL“插入”？

是的。如果要使用 EF，请将以下属性设置为 false 以获得更快的性能：

```
MyContext.Configuration.AutoDetectChangesEnabled = false;
MyContext.Configuration.ValidateOnSaveEnabled = false; 
```

> 这对删除语句也适用吗？

是的。您也可以在数据库上定义**On Delete Cascade**，然后数据库将删除引用的实体，因此无需使用 EF 执行此操作。

> 这里的最佳做法是什么？使用 SQL 语句？还是使用实体框架，或者完全是别的什么？

您可以使用存储过程，在您的 Context 上调用 Query

```
MyContext.ExecuteStoreQuery("your query") 
```

或者

```
MyContext.Database.SqlCommand("your query"); 
```

另一种方法是`SaveChanges()`在一批（100、200 个标记为已添加或已删除的实体）之后调用，然后释放上下文，以便实体不再附加。然后创建一个新的上下文进行批处理并`SaveChanges()`再次调用。

**更新**

我没有使用这种方法，但您可以尝试一下。

[用于通用列表的 SqlBulkCopy（对实体框架和 NHibernate 很有用）](http://elegantcode.com/2012/01/26/sqlbulkcopy-for-generic-listt-useful-for-entity-framework-nhibernate/)

> 下面的可重用通用版本，在 2.4 秒内产生 15k 插入或每秒 +- 6200 行。我在 39 秒内将它增加到 4 个目录，224392 行，速度为 +- 5750 rps（在 4 个文件之间切换）。

# functional-programming - 实践中的 Lambda 演算

> ID：13322204
> 
> 赞同：0
> 
> 时间：2012-11-10T12:50:50.837
> 
> 标签：functional-programming, lambda-calculus, proof, reduction

如何选择语言，实际计算的一个 lambda 项 (λx.y)((λx.xxx)(λx.xxx))？换句话说，需要一种语言对正常的顺序归约和弱类型系统。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T13:56:31.707

你搜索了什么，到目前为止你发现了什么？

我想说没有满足这个要求的标准语言，因为在大多数语言中，你总是有不同的类型，而不仅仅是无类型的术语。您可能需要一个纯 lambda 演算解释器（实现一个是一个很好的练习）。

# richfaces - Richface 选项列表值不会从数据库填充到右侧

> ID：13322205
> 
> 赞同：1
> 
> 时间：2012-11-10T12:50:56.863
> 
> 标签：richfaces

我正在使用richfaces 3.3.3。我已经制作了选择列表，其中包含来自数据库的选择值。但它没有在选择列表的右侧显示这些值。这是我的代码

```
<rich:pickList  sourceListWidth="250" targetListWidth="250"
value="#{users.selectedValues}" >
   <f:selectItems value="#{users.availableValues}" />
</rich:pickList> 
```

选定值是对象类型列表，可用值是选定项列表。请任何人帮助我谢谢阿西姆萨蒂

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-28T10:16:20.913

```
<rich:pickList value= expression should return List/array you want to get on the RIGHT side (selected items)

<f:selectItems value= expression shall return WHOLE List/array (that is, both selected and unselected items) 
```

这个对我有用

# ruby-on-rails - 在保存具有 has_and_belong_to_many 关系的对象时找不到 id=0 的课程

> ID：13322206
> 
> 赞同：0
> 
> 时间：2012-11-10T12:51:03.120
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1, has-and-belongs-to-many

我有两个对象 - 材料 - 课

每种材料都可以拥有并属于课程；每节课都可以拥有和属于材料。

当我尝试创建时在 material_controller 中

```
@material = Material.new(params[:material])

class Material < ActiveRecord::Base
   has_and_belongs_to_many :lessons

   attr_accessible :content_type, :user_id, :lesson_ids 
```

这是参数

```
"material"=>{"content_type"=>"2",
"detail_content"=>"",
"user_id"=>"5",
"lesson_ids"=>"[]"},

create_table "lessons", :force => true do |t|
t.string   "title"
t.string   "description"
t.integer  "course_id"
t.integer  "sequence"
t.datetime "created_at",  :null => false
t.datetime "updated_at",  :null => false
end

create_table "lessons_materials", :force => true do |t|
t.integer "lesson_id"
t.integer "material_id"
end

create_table "materials", :force => true do |t|
t.integer  "content_type"
t.text     "detail_content"
t.text     "embedded_content"
t.string   "stored_file_name"
t.string   "stored_content_type"
t.integer  "stored_file_size"
t.datetime "stored_updated_at"
t.datetime "created_at",          :null => false
t.datetime "updated_at",          :null => false
t.integer  "user_id"
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T13:17:19.680

我认为`lesson_ids`当你没有相关的课程时你的参数应该是 nil ，而不是一个数组。

# android - Android中带有Json参数的HTTP GET url

> ID：13322209
> 
> 赞同：0
> 
> 时间：2012-11-10T12:51:14.180
> 
> 标签：android, json, http

我有以下 API 调用：

`http://rollout.gr/api/?query={%22search%22:%22places%22,%22page%22:1}`

此 API 调用在我的浏览器中正确执行。但是当我`DefaultHttpClient`在我的 Android 应用程序中使用 a 来执行这个 url 时，我得到一个空响应。

我想问题是 HTTP url 中的 JSON 数据。因此，我想问一下在 Android 应用程序中处理此类 url 的正确方法是什么？

提前非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T15:23:03.007

荣誉不是有效的 URL 字符。浏览器足够用户友好，可以自动对它们进行 URL 编码，但 DefaultHttpClient 不是。从代码中使用的正确行是：

```
http://rollout.gr/api/?query=http://rollout.gr/api/?query=%7b%22search%22:%22places%22,%22page%22:1%7d 
```

请注意荣誉 ( `%7b`, `%7d`) 的编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T13:39:14.923

您的问题可能是这里的严格模式。我建议在线程或异步任务中执行 http 请求。严格模式不允许应用程序在 uithread 中执行 http reauest。也许您的控制台显示警告，因此您从 http 响应中得到 null 。

这个项目可能会解决您的问题：

[http://loopj.com/android-async-http/](http://loopj.com/android-async-http/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T14:11:21.537

不知道您的特定 HTTP 初始化代码，我将假设您没有提供明确的 JSON 接受标头。许多 REST 端点都需要这个。

```
httpget.setHeader("Accept", "application/json"); 
```

# android - Android Jenkins 构建

> ID：13322210
> 
> 赞同：0
> 
> 时间：2012-11-10T12:51:27.863
> 
> 标签：android, jenkins

我正在 Windows 平台上开发 Android 应用程序。我可以在本地机器上使用命令行工具成功地创建和构建 android 应用程序而不会出现问题。

我决定使用 Jenkins 远程构建应用程序。我可以成功地创建了一个 Windows 从站并使用命令行工具创建了一个测试应用程序。但是我不能用这个来远程模拟它：

```
C:\Dev\workspace\com.this.test\cordova\cordova.bat 
```

这条线在本地工作，但如果我在 Jenkins 上使用它，它会产生这个错误。

```
c:\Dev\jenkins\workspace\buildtest>C:\Dev\workspace\com.this.test\cordova\cordova.bat emulate 
Microsoft (R) Windows Script Host Version 5.8
Copyright (C) Microsoft Corporation. All rights reserved.

You don't have any Android Virtual Devices. Please create at least one AVD.
android
Build step 'Execute Windows batch command' marked build as failure 
```

**编辑：** 如果我在本地运行以下命令，

```
%comspec% /c android.bat list avd 
```

它列出了如下所示的 AVD。

```
Available Android Virtual Devices:
    Name: ap16
    Path: C:\Users\tt\.android\avd\ap16.avd
  Target: Android 4.1.2 (API level 16)
     ABI: armeabi-v7a
    Skin: WVGA800 
```

但是，如果我通过 Jenkins 发送它，它只会说：

```
Available Android Virtual Devices: 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T16:49:01.777

您是否在远程计算机上创建了模拟器？即通过`android create avd`命令行，或使用SDK Manager 工具。

更简单地说，您还可以安装[Android Emulator Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Android+Emulator+Plugin)来自动处理模拟器的创建。

* * *

**编辑，在提供更多信息后：**

创建的模拟器是每个用户的——它们不是在一台机器的所有用户之间共享的。

假设您正在以不同的用户身份运行 Jenkins，例如通过将 Jenkins 作为 Windows 服务运行的系统用户。因此，当您登录到您的帐户时，它会看到一组不同的模拟器。

我仍然建议使用[emulator plugin](https://wiki.jenkins-ci.org/display/JENKINS/Android+Emulator+Plugin)，以便 Jenkins 可以在需要时创建自己的模拟器（尽管请注意关于作为 Windows 系统帐户运行的“已知问题”）。或者，您可以手动创建模拟器作为 Jenkins 帐户，或将 Jenkins 服务更改为“以”普通用户身份运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-06T08:47:20.367

尝试安装 Android Emulator 插件，但我也遇到了这个插件的最新版本的问题，并且没有降级的选项。我尝试在 Jenkins 中创建虚拟设备，还尝试使用现有的虚拟设备 - 两种情况下都有错误......

# encryption - 如何在java中加密图像

> ID：13322214
> 
> 赞同：0
> 
> 时间：2012-11-10T12:51:53.727
> 
> 标签：encryption

需要这方面的建议，因为我仍然无法在 java 中成功加密/解密图像。对于用户解密图像，用户必须单击图像并输入图像密码，类似于受密码保护的文本文件或pdf文件。

下面是java中加密图像的函数

```
public static void ImgEncrypt()throws Exception{

           // Scanner to read the user's password. The Java cryptography
           // architecture points out that strong passwords in strings is a
           // bad idea, but we'll let it go for this assignment.
           Scanner scanner = new Scanner(System.in);
           // Arbitrary salt data, used to make guessing attacks against the
           // password more difficult to pull off.
           byte[] salt = { (byte) 0xc7, (byte) 0x73, (byte) 0x21, (byte) 0x8c,
                   (byte) 0x7e, (byte) 0xc8, (byte) 0xee, (byte) 0x99 };

           {
      File inputFile = new File("C:/rose.jpg");
              BufferedImage input = ImageIO.read(inputFile);
              Cipher cipher = Cipher.getInstance("AES/CBC/PKCS5Padding");
              SecretKeyFactory keyFac = SecretKeyFactory.getInstance("PBEWithMD5AndDES");
             // Get a password from the user.
             System.out.print("Password: ");
             System.out.flush();
             PBEKeySpec pbeKeySpec = new PBEKeySpec(scanner.nextLine().toCharArray());          
             // Set up other parameters to be used by the password-based
             // encryption.
             PBEParameterSpec pbeParamSpec = new PBEParameterSpec(salt, 20);
             SecretKey pbeKey = keyFac.generateSecret(pbeKeySpec);
             // Make a PBE Cyhper object and initialize it to encrypt using
             // the given password.
             Cipher pbeCipher = Cipher.getInstance("PBEWithMD5AndDES");
             pbeCipher.init(Cipher.ENCRYPT_MODE, pbeKey, pbeParamSpec);
             FileOutputStream output = new FileOutputStream("C:/output.jpg");
             CipherOutputStream cos = new CipherOutputStream(
                    output, pbeCipher);
               //File outputFile = new File("image.png");
                 ImageIO.write(input,"JPG",cos);
              cos.close();    

    }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T10:41:35.523

打开文件时可以解密的唯一方法是当它是自解密文件 - 操作系统可以运行的可执行文件，或者当关联的应用程序包含解密协议时。您不能只单击自己加密的文件并期望它能够工作。

# nhibernate - 如何将多于一层的子类映射到休眠实体（使用 bycode）？

> ID：13322216
> 
> 赞同：1
> 
> 时间：2012-11-10T12:52:09.717
> 
> 标签：nhibernate, inheritance, mapping-by-code

我正在尝试设置一些映射并收到此异常：

> 无法扩展未映射的类：CommonEntity
> 
> [MappingException：无法扩展未映射的类：CommonEntity]
> NHibernate.Cfg.XmlHbmBinding.ClassBinder.GetSuperclass（String extendsName）+217
> NHibernate.Cfg.XmlHbmBinding.MappingRootBinder.AddEntitiesMappings（HbmMapping mappingSchema，IDictionary`2 inheritMetas）+352
> NHibernate.Cfg.XmlHbmBinding .MappingRootBinder.Bind(HbmMapping mappingSchema) +85
> NHibernate.Cfg.Configuration.AddDeserializedMapping(HbmMapping mappingDocument, String documentFileName) +156

我有3节课。实体、通用实体和用户。没有实体或公共实体表，只有一个用户表。User 继承自 CommonEntity，CommonEntity 继承自 Entity。Entity 和 CommonEntity 是抽象的。

我已经定义了这个映射：

```
public class Mapping : ConventionModelMapper
{
    public Mapping()
    {
        IsRootEntity((type, declared) =>
        {
            return typeof(Entity<Guid>) == type.BaseType;
        });

        IsEntity((x,y) => typeof(Entity<Guid>).IsAssignableFrom(x) && !x.IsAbstract && !x.IsInterface);

        Class<Entity<Guid>>(x =>
                                {
                                    x.Id(c => c.Id, m=>m.Generator(Generators.GuidComb));
                                    x.Version(c=>c.Version, (vm) => { });
                                });
    }
} 
```

这是这样使用的：

```
 var types = typeof(Mapping).Assembly.GetExportedTypes().Where(t => typeof(Entity<Guid>).IsAssignableFrom(t));
        var mapping = new Mapping().CompileMappingFor(types);
        configuration.AddMapping(mapping); 
```

User 和 CommonEntity 都在“types”数组中。我也尝试为 CommonEntity 添加映射，但没有任何区别。

```
 Class<CommonEntity>(x =>
        {
            x.Property(c => c.DateCreated, m => m.Type<UtcDateTimeType>());
            x.Property(c => c.DateModified, m => m.Type<UtcDateTimeType>());
        }); 
```

还尝试调用子类而不是类。如果我直接从实体继承用户，一切正常。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T13:31:54.113

问题似乎是 CommonEntity 满足 IsRootEntity 的要求。我像这样修改了它，现在似乎一切正常。

```
 IsRootEntity((type, declared) =>
                         {
                             return !type.IsAbstract &&
                                    new[] {typeof (Entity<Guid>), typeof (CommonEntity)}.Contains(type.BaseType);
                         }); 
```

# xcode - 在 Xcode 和使用 Git 的多个开发人员中自动增加内部版本号

> ID：13322220
> 
> 赞同：3
> 
> 时间：2012-11-10T12:53:09.250
> 
> 标签：xcode, git, auto-increment

我正在启动一个新项目，该项目将有多个开发人员使用 Git 在 Xcode 中工作。我想设置自动递增的内部版本号，并且我找到了一些关于如何做到这一点的好答案，但我担心的是多个开发人员和 Git。

我知道在 Xcode 中有一些文件，比如项目文件，非常敏感且难以合并。我见过的自动递增内部版本号的最佳技术很容易受到相同的多个 Git 合并问题的影响。

这里有没有关于如何使用自动增量构建技术并且仍然将合并问题保持在最低限度的指导？也许答案是没有好的答案，但我想了解其他人在做什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T01:03:57.093

所以首先感谢 harald 的回答和评论，这帮助我更好地思考我真正想要完成的事情。

让我总结一下我的想法，我意识到我想做什么，以及我是如何做到的。

我想要一种以自动方式填充内部版本号（CFBundleVersion）的方法。该值存储在源代码控制的主项目 -Info.plist 文件中。我担心遵循指南通过“构建阶段”脚本自动执行此操作，因为它会为可能的多个开发人员修改此文件，并导致需要不断合并的情况。

我想要这个的原因是我可以很容易地跟踪特定构建的代码。虽然当然可以通过标记和适当的文档手动执行此操作，但我想要一种更自动化和更灵活的方式，因为我认为我将对 TestFlight 进行大量构建。

我最初的想法是为这个值使用一个简单的增量内部版本号，但这确实会给合并带来麻烦。Harald 关于在 Git repo 上使用提交 SHA 的建议引发了我更好的思路。

所以我的解决方案的第一部分是使用提交 SHA 的前 9 个字符（SHA 太长）。我使用前 9 个字符，因为我正在运行 GitLab HQ（顺便说一下，这是一个很棒的开源项目），并且他们在显示提交的运行流时使用了前 9 个字符。得到我的命令如下：

```
/usr/bin/git rev-parse --short=9 HEAD 
```

为了避免出现 Git 合并问题，我想到了首先更改项目 -Info.plist 文件中的构建号 (CFBundleVersion) 值，允许构建运行，然后在最后一步将值更改回默认值1 这样它就不会在源代码管理中出现更改。我尝试了使用“运行脚本”在“构建阶段”流程中执行此操作的所有方法，但似乎即使在最后一步中放入代码以恢复值，它也会影响正在运行的应用程序。

在深入挖掘之后，我发现了模式以及前置动作和后置动作。这似乎是我的路线。

因此，在架构中，对于“构建”计划，我创建了一个前置操作，将 CFBundleVersion 值设置为我当前的提交 ID（9 个字符），并且在后置操作中我会将这个值恢复为默认值(1)。这似乎可以按我的需要工作。

这是我的预操作代码：

```
buildPlist="$SRCROOT/$INFOPLIST_FILE"
echo "The build plist file $buildPlist"

CFBundleVersion="$(cd $SRCROOT;/usr/bin/git rev-parse --short=9 HEAD)"
/usr/libexec/PlistBuddy -c "Set :CFBundleVersion $CFBundleVersion" $buildPlist 
```

这是我的事后代码：

```
buildPlist=$"$SRCROOT/$INFOPLIST_FILE"
CFBundleVersion=1
/usr/libexec/PlistBuddy -c "Set :CFBundleVersion $CFBundleVersion" $buildPlist 
```

这段代码与我在“构建阶段”脚本中使用的代码不同，需要注意的是需要使用 $SRCROOT 来设置目录。最初我的印象是您会获得与“构建阶段”中相同的构建设置，但您似乎没有。“运行脚本”窗口中有一个名为“从：提供构建设置”的选项，它允许您选择一个目标。也许这是正确的，无论给定预先操作，您都必须设置完整的目录路径。我花了一点时间才弄清楚这一点，所以我想我会提到它。

* * *

总之，我很欣赏我收到的信息，它帮助我思考我想要做什么并最终达到我想要的目标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T16:25:42.480

虽然我并没有真正看到线性递增构建编号试图跟踪像 git 这样的非线性开发模型的意义，但有一些方法可以实现它。这取决于你所追求的。如果您只想要“官方”构建的构建号，您可以在构建时通过构建脚本简单地生成它。然后让构建脚本标记使用生成的编号构建的提交。像这样的东西：

```
git checkout build-branch
generate_build_num > buildnum.txt
make
git tag `cat buildnum.txt` 
```

生成唯一的、递增的内部版本号的责任在于`generate_build_num`脚本，您始终可以通过使用标签找到相应的提交。

另一方面，如果您希望 git 树中的每个提交都对应一个线性内部版本号，那么您需要做更多的工作。

在我看来，与直接使用 sha1 相比，这并没有什么好处。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-09-09T15:35:37.957

我使用稍微不同的方法来避免与在每个构建中触摸 Info.plist 相关的合并冲突。它类似于 magnusMTB 临时设置（然后重置）内部版本号的策略，但我没有使用前置和后置操作，而是在项目的 Info.plist 中留下一个占位符值，然后添加一个“运行脚本”构建阶段只修改*产品的内部*版本号而不触及 Xcode 项目的副本。

脚本如下所示：

```
# Grab some environment variables from Xcode
BUILD_NUMBER_FILE="${SOURCE_ROOT}/BuildNumber"
PLIST_FILE="${TARGET_BUILD_DIR}/${CONTENTS_FOLDER_PATH}/Info.plist"

# Create a build string
# Anything goes, but this uses my employer's App_vX_YYMMDD.HHMM format
majorVersion=`/usr/libexec/PlistBuddy -c "PRINT:CFBundleShortVersionString" "$PLIST_FILE"`
dateTime=`date "+%y%m%d.%H%M"`
buildNumber=App\_v$majorVersion\_$dateTime

# Write the build string to a local file under version control
echo $buildNumber > $BUILD_NUMBER_FILE

# Set the build number in the product's plist (Not the Xcode project's plist)
echo Writing generated build number \"$buildNumber\" to \"$PLIST_FILE\"
/usr/libexec/PlistBuddy -c "Set :CFBundleVersion $buildNumber" "$PLIST_FILE" 
```

这样，版本控制下的 Info.plist 保持不变，但用于测试或部署的应用程序内部的内部版本号是“正确的”动态生成的值。内部版本号通过与 Info.plist 分开的单个干净合并文件保留在版本控制中。

警告：我不确定内部版本号是否被烘焙到 Info.plist 之外的二进制文件中。这可能会产生问题。但是，对于它的价值，我正在测试的应用程序会从其捆绑包中的 Info.plist 中自我报告正确的（脚本生成的）内部版本号。

# knockout.js - 反应值改变

> ID：13322221
> 
> 赞同：2
> 
> 时间：2012-11-10T12:53:13.897
> 
> 标签：knockout.js, kolite

可以说我有`name = ko.observable('John')`绑定到`input`as 值。`<button>Save</button>`如果`name`更改，我需要显示（之前隐藏） 。因此，如果我编辑名称`John`，`Jack`然后保存按钮应该出现，如果编辑回`John`它应该再次隐藏。你有什么想法可以在这里应用什么样的绑定/扩展？
太谢谢了！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T13:05:08.853

您需要的称为脏跟踪。

有一个名为[KoLite的 ko 插件，其中包含一个脏标志实现（您可以在](https://github.com/CodeSeven/KoLite)[本文](http://www.knockmeout.net/2011/05/creating-smart-dirty-flag-in-knockoutjs.html)中了解它的工作原理）：

用法非常简单，您只需要将 obserables 传递给`ko.DirtyFlag`（这将返回计算的 observable）方法：

```
var ViewModel = function() {
    var self = this;
    self.name = ko.observable('John');
    self.dirtyFlag = new ko.DirtyFlag(self.name);
} 
```

在您看来，您可以绑定到您的`isDirty`属性`dirtyFlag`：

```
<input type="text" data-bind="value: name, valueUpdate: 'keyup'"/>
<div data-bind="if: dirtyFlag().isDirty">
    <button>Save</button>
</div>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

[演示小提琴。](http://jsfiddle.net/nemesv/6dz7g/)

# c++ - 选择第一个定义类型的模板表达式

> ID：13322227
> 
> 赞同：3
> 
> 时间：2012-11-10T12:53:54.403
> 
> 标签：c++, template-meta-programming

如果定义了第一个参数，我需要一个模板表达式来选择第一个参数类型，否则选择第二个参数类型。

```
select<int, float>::type               // type evaluates to int
select<an_undefined_type, float>::type // type evaluates to float 
```

...并且该解决方案必须适用于 C++03 和 Boost 1.33.1 :(

我的目标是同时接受`int`和`boost::optional<int>`作为函数模板参数`T`，因此我可以执行以下操作：

```
template<typename T>
void fn(T& t)
{
    int x = std::numeric_limits<select<T::value_type, T>::type>::digits;
} 
```

因为`boost::optional<int>::value_type`是定义的。

C++11 解决方案也受到赞赏。

我没有看到通过模板专业化来做到这一点的方法，因为我试图不专注于类型而是专注于概念。基本上，我需要一种与概念匹配的`any_integer`专业和一种与`boost::optional<any_integer>`概念匹配的专业。

我想使用 C++11 我可以通过以下方式实现这个特定目标：

```
std::conditional<std::is_integral<T>::value, T, T::value_type>::value 
```

但我没有 C++11，我想要更通用的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T13:50:47.297

I don't think you can achieve the exact notation you are looking for. However, I think you can use a slightly different notation to achieve what you are semantically after. The problem with your current notation

```
int x = std::numeric_limits<select<T::value_type, T>::type>::digits; 
```

is that `select<T0, T1>` expects two types, i.e., the requirement for the types to be present isn't on the `select<T0, T1>` template but on the function calling it. The way I would change this is to use

```
int x = std::numeric_limits<select<typename get_value_type<T>::type, T>::type>::digits; 
```

Now all what needs to happen is to have a `get_value_type<T>` which yields the nested type if present and some type `select<T0, T1>` is going to ignore if arrives there, e.g., `void` (or a custom marker type). The `get_value_type<T>` template should be fairly simple (I saw [Dirk Holsopple's answer](https://stackoverflow.com/a/11816999/1120273) but I couldn't get it work):

```
template <typename T>
struct has_value_type
{
    typedef char (&true_type)[1];
    typedef char (&false_type)[2];
    template <typename D> static true_type test(typename D::value_type*);
    template <typename D> static false_type test(...);

    enum { value = sizeof(test<T>(0)) == 1 };
};

template <typename T, bool = has_value_type<T>::value >
struct get_value_type
{
    typedef T type; // EDIT
};

template <typename T>
struct get_value_type<T, true>
{
    typedef typename T::value_type type;
}; 
```

Obviously, you might want to define your type-traits slightly different so you can use something like

```
int x = std::numeric_limits<typename get_type<T>::type>::digits; 
```

This would return the nested type if there is a `value_type` and a type `T` otherwise.

# c# - .NET 的 JSON 框架，可以在运行时调整对象内容

> ID：13322236
> 
> 赞同：1
> 
> 时间：2012-11-10T12:55:17.900
> 
> 标签：c#, json, rest

现在，我正在使用 JavaScript 序列化器从多个 REST 服务返回 JSON，并拥有“JsonObject”的动态实现，我可以：

```
dynamic json = new JsonObject();
json.SomeThing = GetSomeThing();
json.AString = "Hello World";
json.Person = new Person{Name="Erik", LastName="Hansen", Age=35}; 
```

等等......它在我调用“ToString()”时处理转换，而不是预先处理，但这是一个小细节。我不确定我是否需要... JavascriptSerializer 出现在上面填充的复杂对象的图片中。（喜欢人）

**澄清...以上是我已经拥有的实现...如果可以的话，我想摆脱我自己在这方面的实现...但是能够保留那个“界面”**

我正在寻找的是可能支持上述内容的东西，但它可能不需要，因为我可以保留我当前的 JsonObject，但很明显摆脱它会很好......

更重要的是，支持这里描述的场景的东西......举一个下面的例子，我们可以想象有一个人休息服务......我希望能够返回部分人对象，如下面的例子所示：

```
class Person
{
  string Name;
  string LastName;
  int Age;
  Address Addr;
}

/rest/person/5
Json = { Name: "some name" }

/rest/person/5?Expand=LastName, Age
Json = { Name: "some name", LastName: "Some Last Name", Age: 35 }

/rest/person/5?Expand=Address
Json = { Name: "some name", Address: { ... } }

Nested stuff
/rest/person/5?Expand=Address, Address.Street
Json = { Name: "some name", Address: { Street: "bla" } } 
```

显然，我不是在寻找直接从那些“REST”调用形成 JSON 的框架，我只需要能够控制序列化过程（在上下文中），这样我就可以返回像上面这样的人。Person 也可能不是根对象，它可能是人员列表或引用人员的对象......

所以一般在客户端我希望能够类似的东西：

```
Expand: "Age, LastName"... 
Include: "/rest/address"... 
```

语法现在不重要了...

我可以继续扩展我自己的框架，但我宁愿专注于实际任务，然后找到一个适合我需要的 JSON 框架......我只是还没有，或者我只是没有知道如何在该特定框架中实现我所需要的...

我已经可以使用“JavaScript”序列化程序和我的 JsonObject 以某种方式使用自定义类型解析器正确地做到这一点，但我想寻找可能比这更容易使用的可能性......

另外我注意到 JSON.NET 和其他的性能比 JavaScript 序列化器等更好，所以为什么不看看他们是否可以支持这个场景。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T15:41:14.060

Json.NET 有一个支持动态对象生成的命名空间 Newtonsoft.Json.Linq，并且能够从匿名和复杂类型生成

[http://james.newtonking.com/projects/json/help/index.html?topic=html/LINQtoJSON.htm](http://james.newtonking.com/projects/json/help/index.html?topic=html/LINQtoJSON.htm)

# android - 是否可以从 Activity 文件中为 LinearLayout 设置背景？

> ID：13322237
> 
> 赞同：1
> 
> 时间：2012-11-10T12:55:26.187
> 
> 标签：android, android-layout

这是我的 xml 代码：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent" 
android:background="@color/blue"
android:gravity="center"> 
```

可以从我的活动文件中设置颜色吗？

例如，我可以为按钮执行此操作：

```
ImageButton x = (ImageButton) this.findViewById(R.id.btn1);
x.setBackgroundColor(color); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T13:02:51.060

是的，您可以通过

```
public class MainActivity {
   private LinearLayout ll;

    @Override
    public void onCreate(...) {
      super.onCreate(...);
      setContentView(R.layout.your_layout_name);
      ll = (LinearLayout) findViewById(R.id.linear_layout_id);

      // You can set Background Color for your Linear Layout
      ll.setBackgroundColor(Color.RED);
      // You can set Image Also
      ll.setBackgroundResource(R.drawable.imagename);
 }
} 
```

在 XML 文件中：

```
 <LinearLayout 
            android:id="+@id/linear_layout_id"
            android:width = "fill_parent"
            android:height = "fill_parent"
            android:orientation = "vertical"
    /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T13:13:57.100

就像您为按钮所做的那样，您也可以为 LinearLayout 做同样的事情。给你 Linearlayout 一个 id 并设置颜色：-

```
((LinearLayout)findViewById(R.id.ll_test)).setBackgroundColor(Color.BLUE); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-10T13:00:54.247

嗯，LinearLayout 也有设置器

```
setBackgroundColor() 
```

继承自 View 类

# java - JTable 中复选框的侦听器

> ID：13322238
> 
> 赞同：2
> 
> 时间：2012-11-10T12:55:27.040
> 
> 标签：java, swing, jtable, jcheckbox, itemlistener

我正在向 JTable 中的 JCheckBox 添加一个侦听器。我对以下代码有疑问，

```
public class CheckBoxEditor extends DefaultCellEditor implements ItemListener {

private static final long serialVersionUID = 1L;
private JCheckBox checkBox;

private int row;
private int column;

public CheckBoxEditor(JCheckBox checkBox) {
    super(checkBox);
    this.checkBox = checkBox;
    this.checkBox.addItemListener(this);
}

@Override
public Component getTableCellEditorComponent(JTable table, Object value,
        boolean isSelected, int row, int column) {
    this.row = row;
    this.column = column;
    checkBox.setSelected((Boolean) value);
    return super.getTableCellEditorComponent(table, value, isSelected, row, column);
}

public void itemStateChanged(ItemEvent e) {
    this.fireEditingStopped();
    System.out.println("Item Changed " + row + " value is: " + checkBox.isSelected());
}

} 
```

在我使用上面的类时，

```
tableA.getColumnModel().getColumn(4).setCellEditor(new CheckBoxEditor(new JCheckBox())); 
```

每当我单击列中的复选框时，我都会到达 itemStateChanged 方法。问题是，在选择复选框时，我的 itemStateChanged 方法调用了两次，有时只调用一次。

**这是示例输出。**（我有 5 行。当我把所有复选框都设置为真的时，我得到了这个双 syso 打印。）

```
Item Changed 0 value is: true

Item Changed 1 value is: false

Item Changed 1 value is: true

Item Changed 2 value is: false

Item Changed 2 value is: true

Item Changed 3 value is: false

Item Changed 3 value is: true

Item Changed 4 value is: false

Item Changed 4 value is: true 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T12:58:23.113

当您单击复选框时会触发您的侦听器，而且当通过 API 更改选定状态时也会触发您的侦听器。

由于编辑器总是重复使用同一个复选框，因此它会不断更新选定的值。

主要问题是......为什么需要给它附加一个监听器？

# php - 在从 MySQL COUNT() 创建的 JSON 对象上使用 $.each

> ID：13322239
> 
> 赞同：2
> 
> 时间：2012-11-10T12:55:39.717
> 
> 标签：php, javascript, jquery, mysql, json

我在很多地方都在使用我的 MySQL 数据库中用 PHP 编码的 JSON 对象，没有任何问题。我现在正在尝试在语法中使用 COUNT(column) 从结果集中创建一个，我认为它导致了问题，但我不知道如何解决它。

我的JS看起来像这样......

```
createTeacherStatsTab = function(){
    $('#main').append('<div id="teacherStatsTab></div>"');
    $.getJSON("php/countMarkingPerTeacher.php", function(data) {
        $.each(data, function(key, val) {
            $('#teacherStatsTab').append(val.teacher + ' : ' + val.count(teacher));
        });
    });
} 
```

我的PHP看起来像这样......

```
$result = mysql_query("
SELECT teacher, COUNT(teacher) 
FROM Assessment
GROUP BY teacher
ORDER BY COUNT(teacher) DESC
");

$rows = array();
while($r = mysql_fetch_assoc($result)) {
$rows[] = $r;
}
print json_encode($rows); 
```

回来的数据是这样的……

```
[
{
teacher: "SDe",
COUNT(teacher): "413"
},
{
teacher: "OJe",
COUNT(teacher): "297"
},
{
teacher: "AMi",
COUNT(teacher): "257"
},
{
teacher: "ASt",
COUNT(teacher): "218"
},
{
teacher: "VJa",
COUNT(teacher): "194"
},
{
teacher: "SLa",
COUNT(teacher): "125"
},
{
teacher: "MCr",
COUNT(teacher): "99"
}
] 
```

感觉这可能与 GROUP BY 剥离 ID 或其他什么有关？

有人可以帮忙吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T13:07:54.363

我认为该对象不允许在其属性上加上括号，因此当您调用时，`val.count(teacher)`您会尝试调用该对象的不存在`count`方法`val`。尝试调用`val["count(teacher)"]`，或者只是更改属性名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-10T13:58:31.310

总体而言，问题在于`json_encode`似乎返回了无效的 JSON。您的对象键包含`(`和`)`哪些是对象键的无效字符（除非它们包含在如下示例中的字符串中）。

```
[{
    "teacher": "SDe",
    "COUNT(teacher)": "413"
}, {
    "teacher": "OJe",
    "COUNT(teacher)": "297"
}, {
    "teacher": "AMi",
    "COUNT(teacher)": "257"
}, {
    "teacher": "ASt",
    "COUNT(teacher)": "218"
}, {
    "teacher": "VJa",
    "COUNT(teacher)": "194"
}, {
    "teacher": "SLa",
    "COUNT(teacher)": "125"
}, {
    "teacher": "MCr",
    "COUNT(teacher)": "99"
}] 
```

最简单的解决方法是为您的`COUNT(teacher)`列设置别名：

```
$result = mysql_query("
SELECT teacher, COUNT(teacher) AS count
FROM Assessment
GROUP BY teacher
ORDER BY COUNT(teacher) DESC
"); 
```

这应该将您的 JSON 呈现为

```
[{
    teacher: "SDe",
    count: "413"
}, {
    teacher: "OJe",
    count: "297"
}, {
    teacher: "AMi",
    count: "257"
}, {
    teacher: "ASt",
    count: "218"
}, {
    teacher: "VJa",
    count: "194"
}, {
    teacher: "SLa",
    count: "125"
}, {
    teacher: "MCr",
    count: "99"
}] 
```

这是有效的 JSON（无需对键进行字符串化），并且您现有的功能应该可以正常工作（更改`val.count(teacher)`为之后`val.count`）：

```
createTeacherStatsTab = function () {
    $('#main').append('<div id="teacherStatsTab></div>"');
    $.getJSON("php/countMarkingPerTeacher.php", function (data) {
        $.each(data, function (key, val) {
            $('#teacherStatsTab').append(val.teacher + ' : ' + val.count);
        });
    });
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-10T13:15:33.767

这是因为 JS 将您的属性访问解释为一个函数调用，因为括号：

```
val.count(teacher) 
```

我猜最简单的解决方案是给你的`COUNT()`结果一个别名：

```
$result = mysql_query("
SELECT 
  teacher, 
  COUNT(teacher) AS teacher_count
FROM Assessment
GROUP BY teacher
ORDER BY COUNT(teacher) DESC
"); 
```

并像这样访问它：

```
$('#teacherStatsTab').append(val.teacher + ' : ' + val.teacher_count); 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-11-10T13:05:50.130

你得到 json.so 的数组，所以你必须得到第零个元素，而不是你必须迭代它，所以你必须这样做

```
$.getJSON("php/countMarkingPerTeacher.php", function(data) {
    var myData = data[0];
    $.each(myData, function(key, val) {
        $('#teacherStatsTab').append(val.teacher + ' : ' + val.count(teacher));
    });
}); 
```

如果您的 json 采用这种格式，那么您的代码就会起作用

```
{
teacher: "SDe",
COUNT(teacher): "413"
},
{
teacher: "OJe",
COUNT(teacher): "297"
},
{
teacher: "AMi",
COUNT(teacher): "257"
},
{
teacher: "ASt",
COUNT(teacher): "218"
},
{
teacher: "VJa",
COUNT(teacher): "194"
} 
```

# riak - 在不知道密钥的情况下从 riak 的存储桶中获取对象

> ID：13322240
> 
> 赞同：1
> 
> 时间：2012-11-10T12:55:41.933
> 
> 标签：riak

我正在使用 riak 存储桶来存储消息列表，使用 UUID 作为键，使用 json 消息作为值。这工作正常。

我需要的是一种**在不知道其 key 的情况下从存储桶中获取单个消息**的有效方法，至少在以下两种情况之一中：

1.  获取最后插入的对象（这是我的首选方法）。
2.  从桶中获取一个随机对象（如果第一个替代方案不可行）。

有没有有效的方法来实现这一目标？

我认为另一种选择可能是检索存储桶中的密钥，然后获取第一个。但这意味着对 riak 进行两次调用，一次获取所有键（仅丢弃除一个之外的所有键），第二次获取对象。它似乎效率不高。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T08:47:13.790

由于 Riak 是键值存储，因此检索数据的最有效方法是通过键。列出或检索存储桶中的所有键，即使您最终只使用第一个返回的键，也是您可以执行的效率最低的操作之一，因为它会导致 Riak 扫描系统中的所有键（不仅仅是存储桶），并且通常建议不要在生产系统上使用它。

获取最后插入的对象的最有效方法可能是将 id 存储在不同存储桶中的单独已知记录中。但是，这将要求您在每次插入时执行两次写入，每次读取时执行两次读取，但会以最有效的方式执行。您可以在包含消息的存储桶上实现一个提交后挂钩（必须在 Erlang 中，因为目前无法使用 JavaScript 函数写入记录），以使系统为您执行更新，这将删除需要最后一次写入。

如果您将大量数据写入包含消息的存储桶，您可能需要调整单独的存储桶，使其不允许多个值并且最后一个值获胜。这样，您将降低由于在系统中频繁更新此单个记录而创建大量同级的风险。这将始终为您提供最后写入的记录之一，但不一定是最后一条（尤其是如果您经常向数据库写入消息），因为 Riak 不支持任何类型的原子性并且是最终一致的数据库。

如果您使用 leveldb 后端，您还可以创建一个或多个二级索引，并使用它来将您的扫描限制为仅最近的记录，这比扫描所有键更有效。然后，您可以通过 mapreduce 选择最新的密钥或随机密钥，但这比前面描述的方法效率低得多。

我想不出任何有效的方法来从 Riak 检索存储桶中的随机记录，除非您知道您插入的密钥范围并且可以随机决定客户端获取哪个密钥。一种方法是按顺序生成所有键，而不是使用 UUID，但这在高度并发的分布式系统中自然不是一个好主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-21T12:12:41.233

我想出了同样的场景。在我的场景中，我必须保存用户。为此，我需要一个自动增量 ID。所以我所做的是，我将最后插入的密钥放在单独的存储桶中，如“Christian Dahlqvist”所述，每次我想插入新记录时，我都会从该密钥存储桶中获取最后插入的密钥。在这里，我们在该桶中只有一个值，其键为“LastKey”，我们始终知道。我根据获取的密钥增加了密钥，并再次更新了密钥桶。因此，密钥桶中始终包含最新的密钥。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T20:13:40.607

第一个任务很容易实现：

*   添加[提交后挂钩](http://docs.basho.com/riak/latest/references/appendices/concepts/Commit-Hooks/#Post-Commit-Hooks)，将最后插入的密钥写入某个预定义的密钥/存储桶位置
*   从该预定义的密钥/存储桶中获取密钥并使用它们发出获取查询

它仍然是两个操作，但两者都只是快速获取。加上挂钩上的额外开销，但也没有太重。

第二种情况也很简单，但实际使用效率太低：

*   获取所有密钥（极其昂贵的操作）
*   随机选择
*   问题得到

# python - 如何从命令行获取 linux 屏幕标题

> ID：13322244
> 
> 赞同：7
> 
> 时间：2012-11-10T12:55:51.407
> 
> 标签：python, gnu-screen

如何`screen`从命令行获取会话的标题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T18:09:03.387

我想出了一个非常小而简单的python脚本`pexpect`来做这件事。

在保留某些主机并且用户将状态写入屏幕标题的多用户环境中，它很方便。它对我有用，请随时使它变得更好。为了获取特定的会话标题，您需要修改脚本并调用正确的会话。

如果您通过远程连接作为本地脚本运行它（例如通过 SSH），请记住`export TERM=xterm`在执行前设置。

```
try:
    import pexpect
    import sys
    child=pexpect.spawn('screen -x')
    child.sendcontrol('a');
    child.send('A');
    i = child.expect('Set window.*')
    child.sendcontrol('c');
    child.sendcontrol('a');
    child.send('d');
    TITLE=str(child.after)
    TITLE_P=TITLE.split('7m')
    if str(TITLE_P[-1]) == '':
        print 'Title not found'
    else:
        print str(TITLE_P[-1])
except:
    print 'Could not check screen Title' 
```

# javascript - 计算字符串中 2 个指定单词之间的字符

> ID：13322245
> 
> 赞同：2
> 
> 时间：2012-11-10T12:55:52.647
> 
> 标签：javascript, character

这是我的文本字符串：

```
0000> hello world <0000 
```

我想计算“0000>”和“<0000”之间的字符。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T13:00:45.217

这将起作用：

```
s = "0000> hello my name is james, whats yours? <0000";
s.match(/0000>(.*?)<0000/)[1].length // returns 38; 
```

但是话又说回来，这也会:-)

```
s.length - 10; // returns 38 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T13:00:27.537

好吧，这样的事情会计算 0000> 和 <0000 之间的所有内容（包括空格）：

```
'0000> hello my name is james, whats yours? <0000'
  .split(/0000>|<0000/g)[1].length; //=> 38 
```

或者

```
'0000> hello my name is james, whats yours? <0000'
     .replace(/0000>|<0000/g,'').length; //=> 38 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-10T13:02:28.190

这将做：

```
function count(string) {
  var match = /0000>(.*)<0000/g.exec(string);

  if (match.length > 1) {
    return match[1].trim().length;
  } else {
    return null;
  }
}

alert (count("0000> hello my name is james, whats yours? <0000")); 
```

以及 jsfiddle 演示：http: [//jsfiddle.net/pSJGk/1/](http://jsfiddle.net/pSJGk/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-10T13:05:02.977

```
function getLengthBetween(str,startStr,stopStr) {
  var startPos = str.indexOf(startStr);
  if(startPos == -1) {
    return 0;
  }
  var startOffset = startPos+startStr.length;
  var stopPos  = str.indexOf(stopStr,startOffset);
  if(stopPos == -1) {
    stopPos = str.length;
  }
  return stopPos-startOffset;
} 
```

用法：

```
getLengthBetween("0000> hello my name is james, whats yours? <0000","0000>","<0000"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-10T13:02:24.650

我建议：

```
var str = " 0000> hello my name is james, whats yours? <0000",
    start = "0000>",
    end = "<0000",
    between = str.substring(str.indexOf(start) + start.length, str.indexOf(end)).length;

console.log(between);​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/ZdByu/1/)。

但是，这不会从第一个匹配之后或第二个匹配之前修剪空白。当然，这可以通过简单地更改变量来更改以匹配任何给定的字符串分隔符。

参考：

*   [`indexOf()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/indexOf).
*   [`length`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/length).
*   [`substring()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/substring).

# google-chrome - 要在按钮上执行功能，请单击 chrome 扩展

> ID：13322246
> 
> 赞同：0
> 
> 时间：2012-11-10T12:56:31.813
> 
> 标签：google-chrome, google-chrome-extension, google-chrome-devtools

![在此处输入图像描述](../Images/086f338d0afe66b6108d6fe5faea8535.png)

在上面的屏幕截图中，您将看到一个面板，其中包含三个按钮，即隐藏、关闭和清除。我想在单击这些按钮时执行特定操作。你能建议我一些方法来实现它吗？

实际上，下面创建的面板只不过是一个 div 容器，我已将其附加到当前网页的正文中。因此，我尝试了一种方法，将我自己的脚本注入到该特定网页中，并对这些按钮单击执行特定操作。但这对我不起作用。

你能建议我一些其他的方法吗？

这是我的清单文件：-

```
 {
        "name": "Demo Extension",
        "version": "1.0.0",
        "manifest_version": 2,
        "browser_action": {
        "default_icon": "icon.png"
    },

    "background": {
    "scripts": ["jquery-1.7.2.js","code.js"]
    },

    "content_scripts": [
        {
            "matches": ["*://*/*"],
            "js": ["jquery-1.7.2.js","content.js"],
            "css": ["panel.css"],
            "run_at": "document_end"
        }
    ],

        "permissions": [
        "webRequest",
        "tabs",
        "http://*/*",
        "https://*/*",
    ]
} 
```

我的 content.js 文件如下：

```
var data_div = $("<div class='panel'></div>");

data_div.css("position","fixed");
data_div.css("bottom","0px");
data_div.css("height","300px");
data_div.css("display","block");
data_div.css("width","100%");
data_div.css("overflow","scroll");
data_div.css("z-index","1004");
data_div.css("background-color","#C0C0C0");

$("body").append(data_div);

data_div.html("One big data set here"); 
```

# php - 检索 sql 数据并将其打印到表单字段中

> ID：13322259
> 
> 赞同：2
> 
> 时间：2012-11-10T12:58:39.257
> 
> 标签：php, ajax

这是一个例子，如果我输入 id 那么它将从数据库中检索数据并在表单字段中打印它。我的数据库只有三列 - id、name 和 number。这是我的 index.html 文件：

```
 <html>

<head>

    <script>

        function showData(str)
        {
            if (str=="")
            {
                document.getElementById("ajax-content").innerHTML="";
                return;
            } 

            // Code for IE7+, Firefox, Chrome, Opera, Safari
            if (window.XMLHttpRequest)
            {
                xmlhttp=new XMLHttpRequest();
            }

            // Code for IE6, IE5
            else
            {
                xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
            }

            xmlhttp.onreadystatechange=function()
            {
                if (xmlhttp.readyState==4 && xmlhttp.status==200)
                {
                    document.getElementById("ajax-content").innerHTML=xmlhttp.responseText;
                }
            }

            xmlhttp.open("GET","showData.php?id="+str,true);

            xmlhttp.send();

        }
        return true;

    </script>

</head>

<body>

    <p>Please Enter Your Staff ID:</p>
    <div><input onkeyup="if (event.keyCode == 13) showData(this.value); return false;" /></div>

<div id="ajax-content"></div>

</body>
</html> 
```

这是我的 showData.php 文件：

```
 <?php

    // Receive variable from URI
    $id=$_GET["id"];

    // Connect to your database
    $con = mysql_connect('localhost', 'root', '');
    if (!$con)
    {
        die('Could not connect: ' . mysql_error());
    }

    // Select your database
    mysql_select_db("test_01", $con);

    // Select all fields from your table
    $sql="SELECT * FROM staffdetails WHERE id = '".$id."'";

    $result = mysql_query($sql);

    while($row = mysql_fetch_array($result))
    {

        echo "Staff Name:" . "<input type='text' value='" . $row['name'] . "'>";
        echo "</br>";
        echo "Contact No.:" . "<input type='text' value='" . $row['number'] . "'>";
    }

    // Close the connection
    mysql_close($con);

?> 
```

现在我要做的是，在给定的表单字段中显示数据，而不是使用表单字段打印数据。这意味着，姓名和号码输入字段将已经在带有 id 字段的表单中。当我输入 id 时，它将拉回数据并将其显示在给定的表单字段中。有人可以帮忙吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T15:25:58.447

您的 index.html 页面中存在 javascript 错误。该`return true`语句应在函数括号内。

还可以尝试在 index.html 页面顶部添加**文档类型**和**内容类型**以显示文本字段而不是打印它。

希望这将有助于解决您的问题。

# c++ - 使用 wxwidget 在 while 循环下移动多个文件

> ID：13322261
> 
> 赞同：0
> 
> 时间：2012-11-10T12:59:06.417
> 
> 标签：c++, wxwidgets

我一直在为自己编写一个 c++ 代码，它在一个目录中迭代并将文件移动到与文件同名的目录中

```
 \\\\
           void foldersFrame::OnButton2Click(wxCommandEvent& event)
            {
                wxFileName mkr;
                StaticText1->SetLabel(_("0"));
                wxString fn;
                wxString newf;
                wxDir *dir=new wxDir(TextCtrl1->GetLabel());
                bool cont = dir->GetFirst(&fn);
                while (cont)
                {
                    int mm=fn.Find('.',true);
                    newf=fn.Mid(0,mm);
                    if(! mkr.DirExists(dir->GetName()+_("\\")+fn)){
                        StaticText2->SetLabel(_("copying  ")+fn);
                        if (! mkr.DirExists(dir->GetName()+_("\\")+newf)){
                            mkr.Mkdir(dir->GetName()+_("\\")+newf);
                            if (wxCopyFile(dir->GetName()+_("\\")+fn,dir->GetName()+_("\\")+newf+_("\\")+fn)){
                                wxRemoveFile(dir->GetName()+_("\\")+fn);
                            }
                            newf=StaticText1->GetLabel();
                            long d1;
                            if(!newf.ToLong(&d1));
                            d1+=1;
                            StaticText1->SetLabel(wxString::Format(wxT("%i"),d1));
                        }
                    }
                    cont = dir->GetNext(&fn);
                }
                wxSafeShowMessage(_("Message"),_("Finished"));
            } 
```

但是我写的代码似乎效率很低。移动文件需要很多时间，并且复制时窗口没有响应。请有人帮我重写它..!!!!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T17:01:35.210

要使应用程序窗口保持响应，但又不会在单独的线程中进行文件复制的额外麻烦，请尝试使用 Yield。需要照顾！

wxApp::产量

布尔收益率（布尔 onlyIfNeeded = false）

将控制权交给窗口系统中的待处理消息。例如，当一个耗时的进程写入文本窗口时，这可能很有用。如果没有偶然的收益，文本窗口将无法正确更新，并且在具有协作多任务处理的系统上，例如 Windows 3.1，其他进程将不会响应。

但是，应谨慎行事，因为让步可能允许用户执行与当前任务不兼容的操作。在处理过程中禁用菜单项或整个菜单可以避免不必要的代码重入：请参阅 ::wxSafeYield 以获得更好的功能。

请注意， Yield() 不会刷新消息日志。这是故意的，因为调用 Yield() 通常是为了快速更新屏幕，并且可能不希望弹出消息框对话框。如果您确实希望立即刷新日志消息（否则它将在下一次空闲循环迭代期间完成），请调用 wxLog::FlushActive。

递归调用 Yield() 通常是一个错误，如果检测到这种情况，则会在调试构建中引发断言失败。但是，如果 onlyIfNeeded 参数为 true，则该方法将默默地返回 false。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T12:55:00.493

您有两种标准方法来实现长时间运行的任务。

First one, and by far the best, is to perform this task in a separate background thread. You can update the state of the GUI controls in the main thread by posting `wxThreadEvent` containing the progress data to the main window easily. The only complication -- but a pretty important one -- in this case is to handle closing the window/application termination/thread exit correctly.

Second one, which could do in a pinch, is to do the task in `wxEVT_IDLE` handler piece by piece and call `wxIdleEvent::RequestMore()` after each step. This is not as responsive as using a separate thread because you still block the event handling during the handler execution and the code needs to be rewritten in a different way to be able to resume from where it left off.

Using `wxYield()` is a pretty bad idea and should be avoided unless no other solution can be implemented.

# c# - 当我按下按钮时，如何理解哪些列的值？

> ID：13322262
> 
> 赞同：0
> 
> 时间：2012-11-10T12:59:08.210
> 
> 标签：c#, asp.net, gridview

我尝试在 aspx 中编写数据网格。在我的数据库中有一个名为“PROJECT_NAME”的列。我想要这些列在我的数据网格中，然后我添加第二列（编辑框）来为每个项目添加值。这一切都在网格视图中，我在表单中添加了按钮。当我按下按钮时，我如何了解哪些列值属于哪个项目？

我的意思是，例如

1.  行值：A 项目 2 列值：50
2.  行值：B 项目 2 列值：60
3.  行值：C 项目 2 列值：70

我想知道当我按下按钮 1 时。项目值 50 我怎么能理解这个？

这是我的 aspx 代码：

```
 <%@ Page Language="C#" AutoEventWireup="true" CodeFile="Default.aspx.cs" Inherits="_Default" %>

    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

    <html xmlns="http://www.w3.org/1999/xhtml">
    <head runat="server">
        <title></title>
        <style type="text/css">
            .style1
            {
                width: 78px;
            }
            .style2
            {
            width: 426px;
        }
    </style>
</head>

<body>
    <form id="form1" runat="server">
    <div style="height: 561px">

        <table style="width: 100%; height: 556px;">
            <tr>
                <td>
                    &nbsp;</td>
                <td>

                    <table style="width:100%;">
                        <tr>
                            <td class="style1">
                                Ay</td>
                            <td>
                                <asp:TextBox ID="ay" runat="server"></asp:TextBox>
                            </td>
                            <td>
                                &nbsp;</td>
                        </tr>
                        <tr>
                            <td class="style1">
                                Yıl</td>
                            <td>
                                <asp:TextBox ID="yil" runat="server"></asp:TextBox>
                            </td>
                            <td>
                                &nbsp;</td>
                        </tr>
                        <tr>
                            <td class="style1">
                                &nbsp;</td>
                            <td>
                                &nbsp;</td>
                            <td>
                                &nbsp;</td>
                        </tr>
                    </table>
                </td>

                <td>
                    &nbsp;</td>
            </tr>
            <tr>
                <td>
                    &nbsp;</td>
                <td>
                   <asp:GridView ID="portföy" runat="server" 
                    CellPadding="3" GridLines="Horizontal" 
                    AutoGenerateColumns="False"      
                    DataKeyNames="PRJ_PROJECT_NAME" BackColor="White" BorderColor="#E7E7FF" 
                    BorderStyle="None" BorderWidth="1px" Font-Bold="False" Font-Names="Verdana" 
                    Font-Overline="False" Font-Size="Smaller" Width="1000px"  
                    >
                    <RowStyle BackColor="#E7E7FF" ForeColor="#4A3C8C" />
            <Columns> 
            <asp:TemplateField HeaderText="PRJ_PROJECT_NAME"  HeaderStyle-HorizontalAlign="Left"> 

                <ItemTemplate> 
                    <asp:Label ID="lblProjeTT" runat="server" Text='<%# Bind("PRJ_PROJECT_NAME") %>'></asp:Label> 
                </ItemTemplate> 
                <HeaderStyle HorizontalAlign="Left"></HeaderStyle>
            </asp:TemplateField> 

            <asp:TemplateField HeaderText="Miktar (a/g)" HeaderStyle-HorizontalAlign="Center"> 

                <ItemTemplate> 
               <asp:TextBox runat="server" id="txtField1" Text='<%# Bind("TAMAMLANMA_YUZDESI") %>'/>
                </ItemTemplate>  
                <EditItemTemplate>
                 <asp:TextBox runat="server" id="txtField1" Text='<%# Bind("TAMAMLANMA_YUZDESI") %>'/>
                </EditItemTemplate>

                <HeaderStyle HorizontalAlign="Center"></HeaderStyle>
            </asp:TemplateField>             
            <asp:TemplateField HeaderText="" ShowHeader="False" HeaderStyle-HorizontalAlign="Center"> 

                <HeaderStyle HorizontalAlign="Center"></HeaderStyle>
            </asp:TemplateField> 
        </Columns> 
                    <FooterStyle BackColor="#B5C7DE" ForeColor="#4A3C8C" />
                    <PagerStyle BackColor="#E7E7FF" ForeColor="#4A3C8C" HorizontalAlign="Right" />
                    <SelectedRowStyle BackColor="#738A9C" Font-Bold="True" ForeColor="#F7F7F7" />
                    <HeaderStyle BackColor="#4A3C8C" Font-Bold="True" ForeColor="#F7F7F7" />
                    <EditRowStyle BackColor="#FFFFA8" ForeColor="Black" />
                    <AlternatingRowStyle BackColor="#F7F7F7" />
                </asp:GridView>

                    <table style="width:100%;">
                        <tr>
                            <td class="style2">
                                &nbsp;</td>
                            <td>
                                &nbsp;</td>
                            <td>
                                &nbsp;</td>
                        </tr>
                        <tr>
                            <td class="style2">
                                &nbsp;</td>
                            <td>
                                <asp:Button ID="Button1" runat="server" onclick="Button1_Click" Text="Button" 
                                    Width="149px" />
                            </td>
                            <td>
                                &nbsp;</td>
                        </tr>
                        <tr>
                            <td class="style2">
                                &nbsp;</td>
                            <td>
                                &nbsp;</td>
                            <td>
                                &nbsp;</td>
                        </tr>
                    </table>

                </td>
                <td>
                    &nbsp;</td>
            </tr>
            <tr>
                <td>
                    &nbsp;</td>
                <td>
                    &nbsp;</td>
                <td>
                    &nbsp;</td>
            </tr>
        </table>

    </div>
    </form>
</body>
</html> 
```

这是我的代码：

```
 using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Data.OleDb;
using System.Data;
using System.Configuration;

public partial class _Default : System.Web.UI.Page
{
    csOra cOra;
    string oraTns = ConfigurationManager.AppSettings["TNS"];
    string oraUserName = ConfigurationManager.AppSettings["OraUserName"];
    string oraPassword = ConfigurationManager.AppSettings["OraPassword"];

    protected void Page_Load(object sender, EventArgs e)

    {

          cOra = new csOra(oraTns, oraUserName, oraPassword);
        if (cOra.OraCnn.State != ConnectionState.Open)
        {
            MessageBox.Show("Oracle ile bağlantı kurulamadı...");
            return;
        }
        try
        {
            if (!IsPostBack)
            { 

                setGrid();
            }

        }
        catch (OleDbException ex)
        {
            Response.Write(@"Oracle Error:" + ex.Message);
            return;
        }
        catch (Exception ex)
        {
            Response.Write(@"Error:" + ex.Message);
            return;
        }

    }

    void setGrid()
    {
        string sSQL = @"SELECT PRJ_PROJECT_NAME,TAMAMLANMA_YUZDESI
                        FROM  PPIGANTT.KOKTEYL_TABLE_3
                        WHERE PRJ_PROJECT_NAME like '%d%' 
                        ORDER BY Request_id";
        try
        {
            OleDbDataAdapter oDa = new OleDbDataAdapter(sSQL, cOra.OraCnn);
            DataTable portföy_ = new DataTable("KOKTEYL_TABLE_3");
            oDa.Fill(portföy_);

            if (portföy_.Rows.Count > 0)
            {
                portföy.DataSource = portföy_;
                portföy.DataBind();
            }
            else
            {
                portföy_.Rows.Add(portföy_.NewRow());
                portföy.DataSource = portföy_;
                portföy.DataBind();

                int TotalColumns = portföy.Rows[0].Cells.Count;
                portföy.Rows[0].Cells.Clear();
                portföy.Rows[0].Cells.Add(new TableCell());
                portföy.Rows[0].Cells[0].ColumnSpan = TotalColumns;
                portföy.Rows[0].Cells[0].Text = "No Record Found";
            }
        }
        catch (OleDbException ex)
        {
            Response.Write(@"Oracle Error:" + ex.Message);
            return;
        }
        catch (Exception ex)
        {
            Response.Write(@"Error:" + ex.Message);
            return;
        }
    }
    void UpdatePortföy(string Portföy, int bütçe    )
    {
        string sSQL = @"BEGIN UPDATE PPIGANTT.KOKTEYL_TABLE_3
                           SET TAMAMLANMA_YUZDESI = " + bütçe + @"WHERE PRJ_PROJECT_NAME ='"
                                         + Portföy + @"' ; COMMIT; END;";
        string sErr = "";
        try
        {
            cOra.ExecNonQuery(sSQL, out sErr);
        }
        //setGrid();
        catch (OleDbException ex)
        {
            Response.Write(@"Oracle Error:" + ex.Message);
            return;
        }
        catch (Exception ex)
        {
            Response.Write(@"Error:" + ex.Message);
            return;
        }
    }

    protected void Button1_Click(object sender, EventArgs e)
    {
       /*  what can I write here to understand whic column value ?*/
    } 
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T15:35:11.007

在 Button1_Click 内部，您需要遍历 GridView 中的所有行并在每一行上执行 FindControl 以获取标签和文本框。从中您可以确定文本框中的 PRJ_PROJECT_NAME 和值是什么。

这是一个例子：

默认.aspx

```
<asp:GridView ID="gvData" runat="server" AutoGenerateColumns="false">
  <Columns>
    <asp:TemplateField>
      <ItemTemplate>
        <asp:Label ID="lblLabel" runat="server" Text='<%# Bind("Number") %>' />
      </ItemTemplate>          
    </asp:TemplateField>
    <asp:TemplateField>
      <ItemTemplate>
        <asp:TextBox ID="txtData" runat="server" Text='<%# Bind("Value") %>' />
      </ItemTemplate>
    </asp:TemplateField>
  </Columns>
</asp:GridView>
<asp:Button ID="btnSubmit" runat="server" OnClick="btnSubmit_Click" Text="Submit" /> 
```

默认.aspx.cs

```
protected void Page_Load(object sender, EventArgs e)
{
  if (!IsPostBack)
  {
    // Create some fake data and bind it to the gridview
    var data = new List<TheData>();

    foreach(var num in Enumerable.Range(1, 4))
    {
      var newData = new TheData();

      newData.Number = num.ToString();
      newData.Value = num;

      data.Add(newData);
    }

    gvData.DataSource = data;
    gvData.DataBind();
  }
}

protected void btnSubmit_Click(object sender, EventArgs e)
{
  for (var index = 0; index < gvData.Rows.Count; ++index)
  {
    var row = gvData.Rows[index];
    var lblLabel = row.FindControl("lblLabel") as Label;
    var txtData = row.FindControl("txtData") as TextBox;

    //Here is where the values are grabbed, at this point you can do what you need to.
    var number = lblLabel.Text;
    var value = txtData.Text;
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T15:54:28.757

我之前使用的一种解决方案利用了按钮的 CommandArgument 属性。您可以设置 CommandArgument='<% Eval("ColumnValueYouWant") %>' 并且每个按钮都将获取其所在行中列的值。然后，在单击事件中，您可以将对象发送方解析回 Button 并访问 CommandArgument 值。

# c++ - fgets 中的向量类型

> ID：13322273
> 
> 赞同：0
> 
> 时间：2012-11-10T13:01:37.990
> 
> 标签：c++, c, file, vector, dynamic-arrays

我有这个理论，我可以使用 fseek 和 ftell 获取文件大小并构建一个动态数组作为缓冲区。然后使用 fgets() 的缓冲区。我目前无法想出办法来做到这一点。

我的理论基于不知道第一个文件的大小（以字节为单位）。所以，我不知道要建立多大的缓冲区。如果文件超过 2 个演出怎么办？我希望能够构建一个缓冲区，该缓冲区将更改并识别我放入 SearchInFile() 的任何文件的文件大小。

这是我到目前为止所拥有的：

```
int SearchInFile(char *fname, char *fname2)
{
    FILE *pFile, *pFile2;
    int szFile, szFile2;

    // Open first file
    if( (fopen_s(&pFile, fname, "r")) != NULL )
    {
        return(-1);
    }

    // Open second file
    if( (fopen_s(&pFile2, fname2, "r")) != NULL )
    {
        return(-1);
    }

    // Find file size 
    fseek(pFile, 0L, SEEK_END);
    szFile = ftell(pFile);
    // Readjust File Pointer
    fseek(pFile, 0L, SEEK_SET);

    std::vector <char> buff;
    //char buff[szFile];

    while(fgets(buff.push_back(), szFile, pFile))
    {

    } 
```

任何想法或例子都会很棒。过去几个小时我一直在网上搜索。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T13:13:56.063

矢量可以增长，因此您不必事先知道大小。以下四行可以满足您的需求。

```
std::vector<char> buff;
int ch;
while ((ch = fgetc(pFile)) != EOF)
    buff.push_back(ch); 
```

`fgetc`是一个读取单个字符的函数，比使用`fgets`.

如果您事先知道文件大小，那么您可以`buff.reserve(szFile)`在循环之前调用。这将使循环更有效率。

# php - 对来自简单 xml 的结果进行分组

> ID：13322275
> 
> 赞同：2
> 
> 时间：2012-11-10T13:01:49.440
> 
> 标签：php, xml

我有以下一段代码，它得到以下结果。

```
$file = 'http://mywebsite.com/test.xml?apikey=*******&API=TEST&limit=30';  
if(!$xml = simplexml_load_file($file))
   exit('Failed to open '.$file);   
$count = 0;
$max = 2;
foreach($xml->computer as $computer){       
   $count++;
   echo '<td class="">'. "<a href='computer.php?cgid=".$computer['group_id'].
      "'>".$computer['name']."</a>";'</td>';
   if($count >= $max){
      $count = 0;
      echo '</tr><tr>';
   }
} 
```

结果

```
<computers>
<results totalPages="1" currentPage="1" totalResults="241"/>
   <computer id="14590" group_id="232" model_group="acer" name="Acer 1 GB" />
   <computer id="308382" group_id="232" model_group="acer" name="Acer 2 GB" />
   <computer id="308383" group_id="232" model_group="acer" name="Acer 3 GB" />
   <computer id="302719" group_id="232" model_group="acer" name="Acer 4 GB"/>
   <computer id="308384" group_id="232" model_group="acer" name="Acer 6 GB" />
   <computer id="308385" group_id="232" model_group="acer" name="Acer 8 GB" />
   <computer id="302720" group_id="232" model_group="acer" name="Acer 16 GB" />
   <computer id="308386" group_id="232" model_group="acer" name="Acer 32 GB" />
   <computer id="302715" group_id="232" model_group="acer" name="Acer 48 GB" /> 
```

我想要做的是对结果进行分组，目前我在多个按钮中重复了名称 acer，当我拉出结果时，我想要做的是只为该组 id 中的所有项目显示名称 Acer 一次？，几乎就像在 MYSQl 查询中不同。

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T13:10:23.110

我建议使用关联数组作为中间变量：

```
groups[groupName][] = item; 
```

因此，项目将被添加到由 groupname 索引的列表的末尾，即您的示例中的“Acer”。

代码要清楚：

```
$file = 'http://mywebsite.com/test.xml?apikey=*******&API=TEST&limit=30';
if( !$xml = simplexml_load_file( $file )) {
   exit( "Failed to open '$file'" );
}
foreach( $xml->computer as $computer ){
   $index = $computer['model_group'];
   $computerGroups[$index]   = array();
   $computerGroups[$index][] = $computer;
}
foreach( $computerGroups as $groupname => $computers ){       
   foreach( $computer as $computers ){       
      ...
   }
} 
```

# android - 如何通过服务器响应在列表视图中设置 RatingBar

> ID：13322277
> 
> 赞同：0
> 
> 时间：2012-11-10T13:02:05.167
> 
> 标签：android, ratingbar

我在 android 中玩耍，现在我在列表视图中添加了评分栏，实际评分来自服务器响应，然后存储到 arraylist 中，然后应该使用 dataadapter 将其发送到列表视图。问题是我不知道如何通过给出的响应来增加运行时的评分栏，想法？这是我的代码：

```
/**
 * After completing background task Dismiss the progress dialog
 * **/

protected void onPostExecute(String file_url) {
    // dismiss the dialog after getting all score
    pDialog.dismiss();
    // updating UI from Background Thread
    runOnUiThread(new Runnable() {
       public void run() {

          /**
          * Updating parsed JSON data into ListView
          * */

          ListAdapter adapter = new SimpleAdapter( 
               BusinessActivity.this, businessArrayList,
               R.layout.business_list_item, new String[] { TAG_NAME, TAG_EMAIL, TAG_SCORE },
               new int[] { R.id.player_name, R.id.player_email, R.id.player_rating });

               // updating listview
               setListAdapter(adapter);
               }
          });

      }     
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T19:07:51.327

通过将值传递给方法 setRating() 可以轻松设置 RatingBar 值

```
RatingBar rb=(RatingBar)findViewById(R.id.ratingBar);
/*
*After you get response from server, assuming String serverResponse contains the value.
*/
rb.setRating(Float.parseFloat(serverResponse)); 
```

# javascript - Fancybox - 如何更改 iframe 的内容？

> ID：13322281
> 
> 赞同：1
> 
> 时间：2012-11-10T13:02:28.313
> 
> 标签：javascript, jquery, iframe, fancybox, frame

我需要在**iframe fancybox 窗口**中设置或更新自定义 HTML 代码。那我该怎么做？！“内容”选项不起作用！在本地主机上测试。

```
 $("test").fancybox({
  'width'    : 300,
  'height'   : 300,
        'autoScale'      : false,
        'type' : 'iframe',
        'content' : '<H5> It`s does not work</h5>'
 }); 
```

如果无法更改跨域 iframe 的内容（如我的情况），那么，请告诉我如何在同一个域上进行操作。例如，我们在**http://localhost/page1.html**和 iframe 链接到**http://localhost/page2.html**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T14:15:24.637

当 fancybox-iframe 已经打开时，您可以使用`$('.fancybox-iframe')`.

如果 iframe 中的文档位于同一个域中，您可以使用 jQuery 更改内容：

```
$('body',$('.fancybox-iframe').contents()).html('new content'); 
```

当 fancybox-iframe 还没有打开时，你可以在 afterLoad-callback 中做同样的事情：

```
$("test").fancybox({
  'width'    : 300,
  'height'   : 300,
        'autoScale'      : false,
        'type' : 'iframe',
        'href':'page2.html',
        afterLoad:function(){$('body',$('.fancybox-iframe').contents())
                              .html('new content');}
 }); 
```

**是的：不可能更改跨域 iframe 的内容（在这种情况下，您只能将一个全新的文档加载到 iframe 中）。**

# java - 适配器与工厂模式

> ID：13322284
> 
> 赞同：4
> 
> 时间：2012-11-10T13:03:15.320
> 
> 标签：java, design-patterns, adapter, factory

我正在使用适配器来隐藏外部 API：

```
DocumentTreeNodeAdapter   DocumentTreeNode
          |                       |
          |                       |   
  CommonTreeAdapter  ----> CommonTreeNode  ----> CommonTree (foreign) 
```

CommonTreeAdapter 有一个返回 CommonTreeNode 的 adapt() 方法。我只想分发接口。客户端代码将对 DocumentTreeNode 和 DocumentTreeNodeAdapter 接口进行操作。

因为我想进一步简化Adapter的创建，所以应该有一个Factory：

```
DocumentTreeNodeAdapterFactoryImpl 
```

我的问题是关于那个工厂：

我倾向于使它通用，它会提供方法：

```
register(Class<? extends DocumentTreeNodeAdapter, Class<?> target); 
```

检索某个适配器：

```
getAdapterFrom(Class<?> target); 
```

例如

```
getAdapterFrom(CommonTree.class); 
```

但是我应该把适配器的注册放在哪里？事实上，目前只有一个适配器，可以在工厂进行硬编码，但为了可扩展性，我真的很喜欢 register(...) 方法。

稍后我将使用 Guice 将东西连接在一起。我应该在模块中初始化工厂还是 Guice 提供了一种简单的方法来做到这一点？我还没有使用 Guice 的经验。

在此先感谢，我相信有人知道这是如何完成的，因为它被广泛使用，但我找不到一些样本。

亲切的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T14:44:25.460

`DocumentTreeNodeAdapter`是一个接口

`SimpleDocumentTreeNodeAdapter`扩展`DocumentTreeNodeAdapter`并包含一个`CommonTreeAdapter` （适配器）

```
public void register(DocumentTreeNodeAdapter documentTreeNodeAdapter , Class targetClass);
public DocumentTreeNodeAdapter getAdapterFrom(Class aClass); 
```

前任：

```
DocumentTreeNodeAdapter adapter = new SimpleDocumentTreeNodeAdapter(commonTreeAdapter);
documentTreeNodeAdapterFactoryImpl.register(adapter , CommonTree.class);
documentTreeNodeAdapterFactoryImpl.getAdapterFrom(CommonTree.class); 
```

第一反应：

只是一个建议

```
register(Class<? extends DocumentTreeNodeAdapter, Class<?> target); 
```

会成为

```
public void register(DocumentTreeNodeAdapter documentTreeNodeAdapter); 
```

或者如果目标不是您要注册的适配器的类

```
public void register(DocumentTreeNodeAdapter documentTreeNodeAdapter , Class targetClass); 
```

DocumentTreeNodeAdapter 将是一个接口，并且

```
getAdapterFrom(Class<?> target) 
```

会成为

```
public DocumentTreeNodeAdapter getAdapterFrom(Class aClass); 
```

如果 CommonTree 实现 DocumentTreeNodeAdapter 下一行仍然有效

```
getAdapterFrom(CommonTree.class); 
```

但对于 Guice 部分，我帮不了你

# knockout.js - 无法在订阅方法中读取可观察值

> ID：13322286
> 
> 赞同：0
> 
> 时间：2012-11-10T13:03:45.940
> 
> 标签：knockout.js

我试图在它的 subscribe 方法中读取 observable 的值，它总是返回一个对象而不是应该是什么值（真或假）。

查看小提琴或下面的代码：http: [//jsfiddle.net/StrandedPirate/WP3s9/](http://jsfiddle.net/StrandedPirate/WP3s9/)

我想要的只是 observableArray 中的一个项目一次将其*isSelected*属性设置为 true。如果有另一种方法可以在没有循环或订阅的情况下做到这一点，请告诉我，但这是我最终的结果。

```
var menuViewModel = (function () {
    function _constructor(error, details) {
        var self = this;
        self.items = ko.observableArray();

        // add the menu items
        self.items.push(new menuItemModel("Dashboard"));
        self.items.push(new menuItemModel("Content Management"));

        self.handleIsSelectedChange = function (item) {
            // issue: item.isSelected() returns [object Object] instead of true/false
            console.log("inside subscription function: " + item.title() + ", isSelected: " + item.isSelected());

            // this fails because it doesn't return true/false it returns returns [object Object]
            if (item.isSelected() === true) {
                console.log("subscription fired: " + item.title());
                // de-select all other items
                ko.utils.arrayForEach(self.items(), function (subItem) {
                    if (subItem.title() !== item.title()) {
                        console.log("deselecting: " + subItem.title());
                        subItem.isSelected(false);
                    }
                });
            }
        };

        self.subscribeToItems = function () {
            console.log("subscribeToItems called");
            ko.utils.arrayForEach(self.items(), function (item) {
                console.log("title: " + item.title() + ", isSelected: " + item.isSelected());
                item.isSelected.subscribe(function (currentItem) {
                    self.handleIsSelectedChange(currentItem);
                });
            });
        };
    };

    return _constructor;
})();

var menuItemModel = (function () {
    function _constructor(title, icon) {
        var self = this;
        self.title = ko.observable(title || "");
        self.icon = ko.observable(icon || "");
        self.isSelected = ko.observable(false);
    };
    return _constructor;
})();

var menuVM = new menuViewModel();
menuVM.subscribeToItems();
ko.applyBindings(menuVM, $(".mainMenu").get(0)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T13:46:20.250

当您绑定时`click: isSelected`，这将调用您的函数，将当前数据项作为第一个参数传递。

因为，`isSelected`是一个可观察的，传递第一个项目会将其设置为该值。因此，`isSelected`成为对象本身。

您可能希望`toggleSelected`在您的项目上创建一个功能`this.isSelected(!this.isSelected())`。

订阅传递了新值，因此在您的情况下为 true/false，但看起来您想要对项目本身进行操作。

这是一个示例，当订阅被触发时，我们仍然将项目传递给您的处理程序。

[http://jsfiddle.net/rniemeyer/WP3s9/31/](http://jsfiddle.net/rniemeyer/WP3s9/31/)

另一种选择可能是将处理程序的上下文设置为您的项目并`this`在处理程序中使用。像：http: [//jsfiddle.net/rniemeyer/WP3s9/32/](http://jsfiddle.net/rniemeyer/WP3s9/32/)

# google-drive-api - Google Drive API：如何插入权限以使文档公开可读？

> ID：13322287
> 
> 赞同：0
> 
> 时间：2012-11-10T13:04:02.433
> 
> 标签：google-drive-api, user-permissions

我知道要向特定用户添加权限，您可以像这样格式化权限资源：

```
new_permission = {
    'value': 'me@gmail.com',
    'type': 'user',
    'role': 'reader'
} 
```

但是，如果我想授予任何人只读访问权限怎么办？我想，像：

```
new_permission = {
    'type': 'anyone',
    'role': 'reader',
    'value': ???!
} 
```

我把什么作为“价值”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T13:30:03.447

好吧，事实证明“值”不是 type=anyone 的必需参数。

```
new_permission = {
    'type': 'anyone',
    'role': 'reader'
} 
```

工作得很好。

# css - ie9 webfonts没有加载

> ID：13322289
> 
> 赞同：0
> 
> 时间：2012-11-10T13:04:21.087
> 
> 标签：css, fonts, internet-explorer-9, font-face, webfonts

我已经尝试了这里和其他地方提供的所有其他解决方案，但我仍然遇到在 ie9 中加载 webfonts 的问题。

对 .htaccess 文件实施了修复：

```
<FilesMatch "\.(ttf|otf|eot|woff)$">
    <IfModule mod_headers.c>
        Header set Access-Control-Allow-Origin "*"
    </IfModule>
</FilesMatch> 
```

在 ie 开发者控制台中没有收到任何 css3 错误消息。

事情是当初始页面加载时，字体不会加载，但是当我导航到网站上的任何其他页面时，字体就会加载。如果我回到初始页面，字体现在也会加载。

感觉就像我已经尝试了我能在网上找到的所有东西。

这是我的CSS：

```
/** FONTS **/

@font-face {
    font-family: 'UniversUltraCondensedRegular';
    src: url('../fonts/univers-ultracondensed-webfont.eot'); /* IE9 Compat Modes */
    src: url('../fonts/univers-ultracondensed-webfont.eot?#iefix') format('embedded-opentype'), /* IE6-IE8 */
         url('../fonts/univers-ultracondensed-webfont.woff') format('woff'), /* Modern Browsers */
         url('../fonts/univers-ultracondensed-webfont.ttf')  format('truetype'), /* Safari, Android, iOS */
         url('../fonts/univers-ultracondensed-webfont.svg#UniversUltraCondensedRegular') format('svg'); /* Legacy iOS */
         font-weight: normal;
         font-style: normal;
    }

@font-face {
    font-family: 'WebSymbolsRegular';
    src: url('../fonts/websymbols-regular-webfont.eot'); /* IE9 Compat Modes */
    src: url('../fonts/websymbols-regular-webfont.eot?#iefix') format('embedded-  opentype'), /* IE6-IE8 */
         url('../fonts/websymbols-regular-webfont.woff') format('woff'), /* Modern Browsers */
         url('../fonts/websymbols-regular-webfont.ttf')  format('truetype'), /* Safari, Android, iOS */
         url('../fonts/websymbols-regular-webfont.svg#WebSymbolsRegular') format('svg'); /* Legacy iOS */
         font-weight: normal;
         font-style: normal;
    } 
```

[**这是**](http://lisicreations.com/)网站的链接！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-12T10:48:58.640

尝试使用绝对 URL

```
@font-face { font-family: 'UniversUltraCondensedRegular'; src: url('../fonts/univers-ultracondensed-webfont.eot'); 
```

变成

```
@font-face { font-family: 'UniversUltraCondensedRegular'; src: url('http://www.yourdomain.com/fonts/univers-ultracondensed-webfont.eot'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-24T19:35:49.830

理论上，您提供的 CSS 应该可以工作。很可能，您的问题是由于使用了错误的路径或对字体文件具有错误的文件权限引起的。

## 如何解决这个问题：

首先，如果您使用绝对路径（如[**zaba**](https://stackoverflow.com/users/2772310/zaba)建议的那样），请测试一切是否正常。

*   如果这确实有效，则意味着您的路径不正确。在这种情况下，请确保路径**相对于包含该`@font-face`语句的 CSS 文件。**

*   如果这不起作用，那么您的问题可能与`pathname`. 在这种情况下，请检查您的字体文件及其所在文件夹的文件权限是否正常。

# c++ - 使用（无）指针向基数和向后转换

> ID：13322292
> 
> 赞同：0
> 
> 时间：2012-11-10T13:04:43.150
> 
> 标签：c++, inheritance, casting

我对基类复制构造函数有点困惑。

让我们坐下来，我有这个代码：

```
struct object
{
    object() {}
    object(const object& value)
    void function() { }

    template <class any> operator any() const
    {
        return any(*this);
    }
};

template <class any> struct primitive
{
    any& _value;
    primitive(any& value) : _value(value) {}
    primitive(const object& value);
    operator any() const;

}; 
```

是否可以像这样使用这些类？

将 int 转换为对象：

```
(object)primitive<int>(x); 
```

通过调用复制构造函数复制对象：

```
object y = (object)primitive<int>(x); 
```

并且仍然能够将对象转换回 int：

```
int z = (int)(primitive<int>)y; 
```

而这又是如何实现的呢？我不要求完整的代码，只要求正确的方向。

或者更好的方法是一个名为 object 的包装器，围绕派生类的基指针？

希望有人能给我一些信息！

# methods - 如何在android中调用非静态方法

> ID：13322295
> 
> 赞同：1
> 
> 时间：2012-11-10T13:04:52.117
> 
> 标签：methods, non-static

如何在android中调用非静态方法？我已经尽我所能，但没有。我在java中尝试过这段代码并成功运行，但为什么在android中总是出错。这是主要活动的代码。

```
public class Main extends Activity{
private Coba mstatus;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }
    public void onClick(View v) 
        {
        switch (v.getId()){
        case R.id.download:
                    ....

                    break;

        case R.id.resume:
            mstatus.resume();
            break;

        }
} 
```

这是第二课。

```
public abstract class Coba implements runnable{

....

public void resume(){
download();
}
public void download() {
mThread = new Thread(this);
mThread.start();
}    

} 
```

我想调用`resume()`方法。在我的源代码中没有任何警告和错误，但是当我尝试调用此方法时，它总是强制关闭。还有另一种方法可以从另一个类调用非静态方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T15:53:05.720

这是一个Java问题而不是Android问题：

首先 Coba 是抽象的，所以你应该使用一个非抽象类，让我们称这个类为 CobaImpl 或使 Coba 成为一个非抽象类（你选择）。

其次，您应该创建类的实例以使用非静态方法（例如 mstatus = new CobaImpl(...) 在其他地方您只能使用静态方法。

# liferay - 通过 keyProperty 的多个 PK 值搜索容器行

> ID：13322298
> 
> 赞同：1
> 
> 时间：2012-11-10T13:05:19.993
> 
> 标签：liferay, portlet, portal

我有一个portlet，它在service.xml 中有多个PK 字段。
我已经更改了一些类和 JSP 以设置和获取 PK 值并保存和加载记录，但是我无法在页面上查看已注册的记录，因为`view.jsp`我无法设置. 我的带有名称的 portlet 具有具有构造函数的类。 如何设置属性以查看记录？`keyProperty``search-container-row`
`AppB``AppBPK``AppBPK(long ID1, long ID2)`
`keyProperty`

# c - 使用 POSIX API 读取文件

> ID：13322299
> 
> 赞同：6
> 
> 时间：2012-11-10T13:05:21.457
> 
> 标签：c, linux, string, file-io, posix

考虑以下用于将文件内容读入缓冲区的代码

```
#include <stdio.h>
#include <sys/types.h>
#include <sys/stat.h>
#include <fcntl.h>
#include <unistd.h>
#define BLOCK_SIZE 4096

int main()
{
   int fd=-1;
   ssize_t bytes_read=-1;
   int i=0;
   char buff[50];
   //Arbitary size for the buffer?? How to optimise.
   //Dynamic allocation is a choice but what is the
   //right way to relate the file size to bufffer size.

   fd=open("./file-to-buff.txt",O_RDONLY);
   if(-1 == fd)
   {
      perror("Open Failed");
      return 1;
   }

   while((bytes_read=read(fd,buff,BLOCK_SIZE))>0)
   {
      printf("bytes_read=%d\n",bytes_read);
   }

   //Test to characters read from the file to buffer.The file contains "Hello"
   while(buff[i]!='\0')
   {
      printf("buff[%d]=%d\n",i,buff[i]);
      i++;
      //buff[5]=\n-How?
   }
   //buff[6]=`\0`-How?
   close(fd);
   return 0;
} 
```

**代码说明：**

*   输入文件包含一个字符串“Hello”
*   需要将此内容复制到缓冲区中。
*   目标是通过POSIX API 实现的`open`。`read`
*   读取 API 使用指向 **任意大小** 的缓冲区的指针来复制数据。

**问题：**

*   动态分配是必须用来优化缓冲区大小的方法。从输入文件大小关联/导出缓冲区大小的正确程序是什么？
*   我看到在操作结束时，除了字符**"Hello"**`read`之外，读取还复制了 a`new line character`和一个字符。请详细说明这种读取行为。`NULL`

 ****样本输出**

> > bytes_read=6
> > 
> > buff[0]=H
> > 
> > buff[1]=e
> > 
> > buff[2]=l
> > 
> > buff[3]=l
> > 
> > buff[4]=o
> > 
> > buff[5]=

PS：输入文件是用户创建的文件，不是由程序创建的（使用`write`API）。只是在这里提一下，以防万一。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-10T13:58:25.217

由于您要读取整个文件，因此最好的方法是使缓冲区与文件大小一样大。在你去的时候调整缓冲区的大小是没有意义的。这只会在没有充分理由的情况下损害性能。

您可以通过多种方式获取文件大小。快速而肮脏的方法是到`lseek()`文件的末尾：

```
// Get size.
off_t size = lseek(fd, 0, SEEK_END); // You should check for an error return in real code
// Seek back to the beginning.
lseek(fd, 0, SEEK_SET);
// Allocate enough to hold the whole contents plus a '\0' char.
char *buff = malloc(size + 1); 
```

另一种方法是使用以下方式获取信息`fstat()`：

```
struct stat fileStat;
fstat(fd, &fileStat); // Don't forget to check for an error return in real code
// Allocate enough to hold the whole contents plus a '\0' char.
char *buff = malloc(fileStat.st_size + 1); 
```

要获取所有需要的类型和函数原型，请确保包含所需的标头：

```
#include <sys/stat.h> // For fstat()
#include <unistd.h>   // For lseek() 
```

请注意，`read()`不会使用 自动终止数据`\0`。您需要手动执行此操作，这就是我们为缓冲区分配一个额外字符 (size+1) 的原因。在你的情况下已经有一个角色的原因`\0`是纯粹的随机机会。

当然，既然`buf`现在是一个动态分配的数组，当你不再需要它的时候别忘了再释放它：

```
free(buff); 
```

但请注意，分配与您要读入的文件一样大的缓冲区可能很危险。想象一下，如果（错误地或故意地，无关紧要）文件有几 GB 大。对于这种情况，最好设置一个最大允许大小。但是，如果您不想要任何此类限制，那么您应该切换到另一种读取文件的方法：`mmap()`. 使用`mmap()`，您可以将文件的一部分映射到内存。这样，文件有多大并不重要，因为您一次只能处理其中的一部分，从而控制内存使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-10T15:42:33.983

1、你可以用stat(filename, &stat)得到文件大小，但是把缓冲区定义为页面大小就可以了

2、首先，“Hello”后面没有NULL字符，一定是你分配的栈区在你的代码执行前是0，请参考APUE 7.6章节。事实上，你必须在使用它之前初始化局部变量。

我尝试使用 vim、emacs 和 echo -n Hello > file-to-buff.txt 生成文本文件，只有 vim 自动添加换行符

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-10T13:15:57.903

您可以考虑通过首先创建一个固定大小的缓冲区来动态分配缓冲区，然后在填充它时将大小`malloc`加倍（使用）。`realloc`这将具有良好的时间复杂度和空间折衷。

目前你反复读入同一个缓冲区。您应该在每次读取后增加缓冲区中的点，否则您将使用文件的下一部分覆盖缓冲区内容。

您提供的代码为缓冲区分配 50 个字节，但您将 4096 作为大小传递给`read`. 这可能导致大小超过 50 字节的任何文件的缓冲区溢出。

至于'\n'和'\0'。换行符可能在文件中，而 '\0' 已经在缓冲区中。缓冲区在代码中的堆栈上分配，如果堆栈的该部分尚未使用，它可能包含零，在加载程序时由操作系统放置在那里。

操作系统不会尝试终止从文件中读取的数据，它可能是二进制数据或它不理解的字符集。如果需要，终止字符串由您决定。

其他一些更与风格有关的观点：

*   您可以考虑在最后打印输出使用`for (i = 0; buff[i]; ++i)`循环而不是一段时间。这样，如果有人弄乱了索引变量`i`，您将不受影响。
*   您可以在完成读取文件后提前关闭文件，以避免文件长时间打开（如果发生某种错误，可能会忘记关闭它）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-10T13:40:26.100

对于第二个问题，`read`不要自动添加 character `'\0'`。如果您认为您的文件是文本文件，则必须`'\0'`在调用后添加一个`read`，用于指示字符串的结尾。

在 C 中，字符串的结尾由这个字符表示。如果`read`设置了 4 个字符，`printf`将读取这 4 个字符，并测试第 5 个：如果不是`'\0'`，则继续打印直到下一个`'\0'`。它也是缓冲区溢出的来源

对于`'\n'`，它可能在输入文件中。**

# sql - 为vb6中的每个控件创建sql更新

> ID：13322305
> 
> 赞同：0
> 
> 时间：2012-11-10T13:06:40.987
> 
> 标签：sql, vb6, foreach, controls

所以我让这段代码循环遍历表单中的每个控件，并根据它们的名称和值、文本或标题创建和更新 sql。

```
Dim sql as String
Dim ctr as Control

sql = "update table set "
For Each ctr In Me.Controls
    If TypeOf ctr Is TextBox Then
        If ctr.Container = "Carton Config data input" Then
            sql = sql & ctr.name & " = " & "'" & ctr.Text & "',"
        End If
    ElseIf TypeOf ctr Is OptionButton Then
        If ctr.Value = True Then
            sql = sql & " status = '" & ctr.Caption & "',"
        End If
    ElseIf TypeOf ctr Is CheckBox Then
        If ctr.Value = 1 Then
            sql = sql & ctr.name = "'OK',"
        ElseIf ctr.Value = 0 Then
            sql = sql & ctr.name = "'',"
        End If
    End If
Next 
```

之后，我当然添加了 where 条件，但现在没关系了。问题是当它到达一个复选框时，sql 的值将是“False”，我不知道为什么。字符串的长度应该没有问题，第一个复选框是第 4 个对象，所以字符串不会太长。此外，没有复选框部分，它就像一个魅力。那么有人可以帮助我吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T13:34:49.553

我发现了问题，所以我会为可能需要它的人回答它。这是一个简单的语法错误：

刚刚换了：

```
If ctr.Value = 1 Then
   sql = sql & ctr.name = "'OK',"
ElseIf ctr.Value = 0 Then
   sql = sql & ctr.name = "'',"
End If 
```

和：

```
If ctr.Value = 1 Then
    sql = sql & ctr.name & " = 'OK',"
ElseIf ctr.Value = 0 Then
    sql = sql & ctr.name & " = '',"
End If 
```

# java - 将标题设置为 JFrame

> ID：13322306
> 
> 赞同：4
> 
> 时间：2012-11-10T13:07:05.877
> 
> 标签：java, eclipse, swing, jframe, super

我是 Java 新手。我的问题是我有一个类名 MyClassExp。我已经从 JFrame 扩展了它。在该类中，我启动了另一个名为 TabbedFrame 的类的对象。TabbedFrame 还扩展了一个类 DemoFrame 。在 DemoFrame 中，我使用关键字“super”设置了页面标题，例如：

```
super("Some Title"); 
```

现在，当我运行 MyClassExp，即使在创建 JFrame 之后：

```
new JFrame("New Title"); 
```

我仍然得到相同的标题，即一些标题。有没有办法解决这个问题？我已经尝试了很多解决它但失败了:'(

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-10T13:10:34.030

使用 API 方法 `public void setTitle(String title)`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-10T13:11:53.873

**-**在**MyClassExp**类的`constructor`use`this.setTitle(String title)`方法中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-24T20:26:25.157

只需使用 setTitle("yourTitleName");

例如：

```
setTitle("Currency Converter");
textField.addKeyListener(this);
combo.addItemListener(this);
label.addMouseListener(this);
setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE); 
```

# java - Java，代码有效，但仍然抛出异常

> ID：13322308
> 
> 赞同：1
> 
> 时间：2012-11-10T13:07:23.630
> 
> 标签：java, sql, exception

我正在创建一个简单的注册框架，将记录添加到数据库中。每次运行在数据库中添加记录的 SQL 查询时，它都会给我一条错误消息，但它仍然会添加它们，但正因为如此，我的程序会停止，而不是打开另一个窗口。

这是代码的那一部分：

```
regButton.addActionListener(new ActionListener() {

@Override public void actionPerformed( ActionEvent e ) {
   //Execute when button is pressed
   if(   uNameField.getText().equals("")
      || new String(newPassField.getPassword()).equals("")
      || new String(repeatPassField.getPassword()).equals("") ) {
      errorLabel.setForeground(Color.red);
      errorLabel.setText("Some fields are left blank");
   }
   else if( new String(newPassField.getPassword()).equals(
            new String(repeatPassField.getPassword()))){
      Statement stmt;
      ResultSet res;
      try
      {
         //SET USERNAME AND PASSWORD FROM FIELDS TO UPPER CASE
         String username = uNameField.getText().toUpperCase();
         String password = new String(newPassField.getPassword()).toUpperCase();
         //SQL INSERT QUERY
         String sql;
         sql = "INSERT INTO Employees VALUES ('" +username +"','" +password +"');";
         stmt = con.createStatement();
         res = stmt.executeQuery(sql);
         System.out.println("Added to database!");
         con.close();
      }
      catch(SQLException exe) {
         System.out.println("Error creating or running statement: " + e.toString());
         try {
            con.close();
         }
         catch(Exception eex){}
      }
   }
   else {
      errorLabel.setForeground(Color.red);
      errorLabel.setText("Password missmatch");
   }
} 
```

每次注册新员工（用户）时，它都会显示此“错误创建或运行语句：.....”虽然，我可以在员工列表中找到新添加的员工。

什么可能导致这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T13:11:01.757

在我们解决您的具体问题之前，一些一般性建议：

```
Connection con = ...
try {
    // your stuff
}
catch (Exception e) {
  e.printStackTrace();
}
finally {
  try {
    con.close();
  } catch (Exception e) {
   e.printStackTrace();
  }
} 
```

你现在这样做的方式不仅吞下了异常，而且还避免打印它的堆栈跟踪。并且`close`必须执行一次且只执行一次，无论是否有异常。

如果您使用的是 Java 7，这会容易得多：

```
try (Connetion con = ...) {
  // stuff to do
}
catch (Exception e) {
  e.printStackTrace();
} 
```

a 中的关闭`finally`现在是自动完成的。

特别是关于您的异常，您通过调用执行 INSERT `executeQuery`。此方法将语句发送到 DB，后者会正确执行它，但它对 JDBC 的响应不是 ResultSet。这就是它爆炸的地方，**在记录已经插入之后**。由于您处于自动提交模式，因此没有要回滚的事务。教训：**总是使用事务**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-10T13:10:31.600

您需要对 SQL INSERT使用[executeUpdate](http://docs.oracle.com/javase/7/docs/api/java/sql/Statement.html#executeUpdate%28java.lang.String%29)

```
int rowCount = stmt.executeUpdate(sql); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-10T13:15:57.997

我讨厌看到这样写的代码。你没有问这个，我的评论不会解决你的问题，但我认为有必要说一下。

通过将持久性代码放入 Swing 侦听器方法，您正在为自己制造维护噩梦。

一个更好的想法是以赋予它们单一职责的方式来考虑对象。

获取您的持久性代码并将其移动到一个单独的类中，您可以自行开发和测试。一旦它开始工作，给需要它的类一个引用。

您的代码将更加模块化，更容易测试，更可重用，并且更容易理解。

Bob Martin 叔叔对这个和其他值得记住的想法有一个简洁的记忆：[SOLID](http://en.wikipedia.org/wiki/SOLID_%28object-oriented_design%29)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-10T16:27:13.190

你为什么不试试 PreparedStatement

```
try{
    //SET USERNAME AND PASSWORD FROM FIELDS TO UPPER CASE
     String username = uNameField.getText().toUpperCase();
     String password = new String(newPassField.getPassword()).toUpperCase();
     //SQL INSERT QUERY
     PreparedStatement pstmt = con.prepareStatement("insert into Employees values(?,?)");
     pstmt.setString(1,username);
     pstmt.setString(2,password);

     if(!pstmt.execute())
     {
       //means your code worked correctly
        System.out.println("Inserted successfully");
     }
     else
     {
           System.out.println("Unsuccessfull");
     }
   }
   catch(Exception ex)
   {
      ex.printStackTrace();
   } 
```

# magento - Magento 1.4.1.1 存储在cookie中的类别排序顺序

> ID：13322314
> 
> 赞同：0
> 
> 时间：2012-11-10T13:07:56.790
> 
> 标签：magento

Magento 类别排序顺序接缝存储在 cookie 中。假设默认排序顺序是按名称升序。如果用户将其更改为降序，则所有下一页也将具有此排序顺序。

如何更改此设置，以便用户在下一个类别中看到默认排序顺序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-01T18:53:39.560

这是一个老问题，但作为“Magento 按 cookie 排序”的第一个 Google 结果出现。所以，本着 SO 的精神，让我们来回答吧！

首先，我们必须进行一些调查，但首先我们需要知道我们的假设是什么。

**假设**

*   按状态排序存储在 cookie 中
*   更改选择排序时更新 Cookie

**从哪儿开始？**

如果在 Magento 中遇到这种情况有疑问，请从可以查看输出的前端开始。

如果我们看`\app\design\frontend\<your_package>\<your_theme>\template\catalog\product\list\toolbar.phtml`

我们看到，当“排序依据”选择框发生更改时，以下处理了 javascript 操作。

```
<div class="sort-by">
    <label><?php echo $this->__('Sort By') ?></label>
    <select onchange="setLocation(this.value)">
    <?php foreach($this->getAvailableOrders() as $_key=>$_order): ?>
        <option value="<?php echo $this->getOrderUrl($_key, 'asc') ?>"<?php if($this->isOrderCurrent($_key)): ?> selected="selected"<?php endif; ?>>
            <?php echo $this->__($_order) ?>
        </option>
    <?php endforeach; ?>
    </select>
    <?php if($this->getCurrentDirection() == 'desc'): ?>
        <a href="<?php echo $this->getOrderUrl(null, 'asc') ?>"><img src="<?php echo $this->getSkinUrl('images/sort_desc_arrow.gif') ?>" alt="<?php echo $this->__('Set Ascending Direction') ?>" class="v-middle" /></a>
    <?php else: ?>
        <a href="<?php echo $this->getOrderUrl(null, 'desc') ?>"><img src="<?php echo $this->getSkinUrl('images/sort_asc_arrow.gif') ?>" alt="<?php echo $this->__('Set Descending Direction') ?>" class="v-middle" /></a>
    <?php endif; ?>
</div> 
```

特别是，我们对这`<select onchange="setLocation(this.value)">`部分感兴趣。那么当这个方法被调用时会发生什么呢？

我们去更深的洞！在第 30 行左右`setLocation`定义。`\js\varien\js.js`

```
function setLocation(url){
    window.location.href = url;
} 
```

所以这很简单，它只是您基本的 Javascript 新位置指令。

`<select>`更改后，我们将被发送到带有*一些参数*的新 URL 。这是 cookie 设置的最可能位置。

同样，我们特别对 url 参数感兴趣`?dir=<asc OR desc>&order=<whatever_metric_you_are_sorting_by>`。让我们试一试，猜测该`order`参数导致“setCookie”方法或类似的东西被调用。

我们在哪里可以找到这个？嗯，这很简单：请求上的所有 Magento 操作都可以从`index.php`最终的前端渲染开始，所以它必须在此过程中的某个地方发生！您可以使用此方法追踪 Magento 中的任何操作。

但是，为了节省您和我一些时间，我们还可以假设在任何给定的 Web 框架中可能不会经常*设置cookie。*`grep`在 Magento 目录上运行 a以`('core/cookie')`返回 14 个文件中的 23 个命中。这缩小了范围，非常臭！

在 23 次点击中，只有 4 次使用了该`('core/cookie')->set()`方法。4个使用`set()`方法：

`\app\code\core\Mage\Persistent\Model\Observer\Session.php - line 79` `\app\code\core\Mage\Sales\Helper\Guest.php - line 100` `\app\code\core\Mage\XmlConnect\controllers\ConfigurationController.php - line 112` `\app\code\core\Mage\XmlConnect\controllers\Adminhtml\Connect\ConfigController.php - line 101`

在这 4 个中，只有 2 个将直接与您的最终用户打交道，即`Session.php`和`Guest.php`。由于`Guest.php`是`Sales`Magento 中模块的一部分和`loadValidOrder()`方法的一部分，它不太可能处理产品列表排序。这给我们留下了 1 个选项，那就是：

`\app\code\core\Mage\Persistent\Model\Observer\Session.php - line 79`

检查这段代码告诉我们什么？

```
// Set new cookie
if ($sessionModel->getId()) {
    Mage::getSingleton('core/cookie')->set(
        Mage_Persistent_Model_Session::COOKIE_NAME,
        $sessionModel->getKey(),
        $persistentLifeTime
    );
} 
```

所有 cookie 都存储的是服务器的会话 ID！这几乎就像是现代 Web 框架的*标准做法或其他东西！*;)。我们的一个基本假设是不正确的！

**TL;DR 答案**

按偏好排序保存在该客户端的 Magento 服务器端会话中，并在用户返回 cookie 中存储的 ID 时调用。

为了使 Magento 不保存它，我们必须执行以下操作：

[Magento 'Sort By' - 如何让 Magento 忘记选择了哪个选项](https://stackoverflow.com/questions/8621273/magento-sort-by-how-to-make-magento-forget-which-option-was-selected)

我想不是仅仅将答案联系起来，我会解释如何从你的思路到答案，这更有价值，因为现在你明白了为什么答案是正确的。享受和快乐的编码。

**更新**

由于我链接接受的答案的 SO 线程并没有真正遵循 Magento XML 协议，但是对答案的评论*确实如此*，我将把它贴在这里，感谢评论的作者：

您需要使用以下 xml 为您希望 Magento “忘记”排序顺序的页面应用布局更新：

```
<reference name="product_list_toolbar">
  <action method="disableParamsMemorizing" />
</reference> 
```

*   由 SO 用户[Giel Berkers](https://stackoverflow.com/users/1471590/giel-berkers)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-10T13:21:59.920

我不认为你可以。如果用户试图改善只影响他们的体验，那么 cookie 会更新，并且在此 cookie 过期之前，排序顺序将始终显示为他们选择的内容。

您可以在每次单击分页时清除 cookie，但如果用户登录，这可能会导致其他问题。

它不仅会删除可能已添加到他们购物篮中的产品。

我建议接受用户对他们希望查看列表的责任，或者简单地删除选项“排序顺序是按名称升序”，例如，他们无法选择它。

# jquery - jquery-1.8.2.js 和 jquery-1.8.2.min.js 有什么区别

> ID：13322315
> 
> 赞同：-1
> 
> 时间：2012-11-10T13:08:14.680
> 
> 标签：jquery, jquery-ui

我找到了一个关于 jquery-1.8.2.js 和 jquery-1.8.2.min.js 之间区别的话题

```
 1\. jquery-1.8.2.min.js for  (compressed, for production) 
 2\. jquery-1.8.2.js for (uncompressed, for debugging) 
```

但我在我的应用程序中使用了 jquery-1.8.2.min.js，但出现错误：`$ is not a function`

如果我同时使用 jquery-1.8.2.min.js*和*jquery-1.8.2.js 我的应用程序正在工作。为什么？

[我从http://blog.jquery.com/](http://blog.jquery.com/)下载了 .js

这是包含我页面上的脚本的 HTML：

```
<script language="javascript" type="text/javascript" src="../../jquery.ui/jquery-1.8.2.min.js" ></script>
<script language="javascript" type="text/javascript" src="../../jquery.ui/jquery-1.8.2.js" ></script>
<script language="javascript" type="text/javascript" src="../../jquery.ui/jquery.ui.widget.js" ></script>
<script language="javascript" type="text/javascript" src="../../jquery.ui/jquery.ui.core.js" ></script>
<script language="javascript" type="text/javascript" src="../../jquery.ui/jquery.ui.menu.js" ></script>
<script language="javascript" type="text/javascript" src="../../jquery.ui/jquery.ui.mouse.js" ></script>
<script language="javascript" type="text/javascript" src="../../jquery.ui/jquery.ui.position.js" ></script>
<script language="javascript" type="text/javascript" src="../../jquery.ui/jquery.ui.datepicker.js" ></script>
<script language="javascript" type="text/javascript" src="../../jquery.ui/jquery.ui.slider.js" ></script>
<script language="javascript" type="text/javascript" src="../../jquery.ui/jquery.ui.autocomplete.js" ></script>

<script language="javascript" type="text/javascript" src="../../jquery/details.js"></script> 
```

在 details.js 我使用下面的代码我得到错误

```
$('#results_holder').load('test.asp', function() {}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T13:09:06.320

它本质上是同一个文件：`jquery-some-numbers-min-js`是`jquery-some-numbers-js`. 显然，两次包含它是没有意义的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-10T13:17:24.387

理论上它们是相同的，一个更易于阅读，另一个被压缩以节省加载时间和带宽使用。

如果您正在执行两个包含并且它有效，例如：

```
<script language="javascript" type="text/javascript" src="../../jquery.ui/jquery-1.8.2.min.js"></script>
<script language="javascript" type="text/javascript" src="../../jquery.ui/jquery-1.8.2.js"></script> 
```

然后我认为只包含第二个（非缩小）会起作用，因为它会覆盖第一个包含。

缩小版本中可能存在错误，您的应用程序发现了它。

# android - Android Facebook 登录问题

> ID：13322317
> 
> 赞同：1
> 
> 时间：2012-11-10T13:08:28.703
> 
> 标签：android, facebook, login

在我的应用程序中，用户可以登录 facebook 并分享我的应用程序详细信息。它的工作很好。但是当用户有一个官方的 facebook 应用程序并且如果用户通过该官方应用程序登录或者在没有注销或启动我的应用程序之后，当单击该 facebook 登录时，用户可以自动登录到该 facebook 登录 ID 和密码。但我需要在我的应用程序用户中再次输入用户名和密码。我怎样才能做到这一点。请帮助我。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T13:26:18.517

*简短的回答：*

你不能。

*长答案：*

Facebook 创建 SSO（单点登录）的明确原因是让第三方应用程序用户的身份验证更容易。更不用说，保持实际身份验证的安全。

要让用户从第三方应用程序向 Facebook 进行身份验证，有 3 种方法。从技术上讲，有两种方法，但第三种方法是禁用 SSO 并强制使用基于浏览器的应用程序。

1.  如果用户**没有**在他的设备上安装 Facebook 应用程序，则网页将执行身份验证职责。
2.  如果用户**在**设备上安装了 Facebook 应用程序，则身份验证将通过 SSO 完成。
3.  最后一个被一些开发人员使用。这是通过使用`FORCE_DIALOG_AUTH`DEFAULT_AUTH_ACTIVITY_CODE 来实现的，您在应用程序中执行身份验证部分。但**不建议**这样做，因为它**可能会向恶意应用程序打开您的应用程序，这些应用程序可以窃取您用户的 Facebook 凭据**（来源：*Jesse Chen*的回答，他在 Facebook 工作[。https://stackoverflow.com/a/12433933/450534](https://stackoverflow.com/a/12433933/450534)。如果你仍然想使用它

底线是，您**不能**让用户从您的应用程序进行身份验证。您将需要使用 Facebook 方式进行操作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-10T13:46:26.250

在 Facebook 身份验证方法中使用它

```
private void authenticate() {
    mFacebook.authorize(this, permissions, Facebook.FORCE_DIALOG_AUTH,
        new DialogListener(){ 
```

这将对您有所帮助。

# c# - C# 工厂设计模式

> ID：13322321
> 
> 赞同：3
> 
> 时间：2012-11-10T13:08:59.610
> 
> 标签：c#, design-patterns

在C#...工厂设计模式中，为什么所有的“工厂类”都应该继承自“抽象工厂类”？？

无需继承，我们也可以实现相同的功能。我们不能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T13:17:44.640

从抽象工厂类继承的工厂这样做是为了遵循抽象工厂模式。当您想从整组对象类型中创建策略时，抽象工厂模式很有用。出于这个原因，它也被称为“套件”模式。

通常，工厂在没有抽象的情况下是完全可行的。如果你现在不需要，别管它。如果需要，您可以随时创建抽象工厂。

更多阅读：

[http://en.wikipedia.org/wiki/Abstract_factory_pattern](http://en.wikipedia.org/wiki/Abstract_factory_pattern)

# c# - numericupdown 自动重置为 100

> ID：13322325
> 
> 赞同：0
> 
> 时间：2012-11-10T13:09:20.480
> 
> 标签：c#, .net, winforms

我的表单中有一个 numericupdown 并将其最大值设置为 2000，尽管每当我输入一个大于 100 的数字并将其值自动重置为 100 时？我尝试使用此代码进行更正，但行为不正确。

```
private void answer_Enter(object sender, EventArgs e)
{
    // Select the whole answer in the NumericUpDown control.
    NumericUpDown answerBox = sender as NumericUpDown;

    if (answerBox != null)
    {
        int lengthOfAnswer = answerBox.Value.ToString().Length;
        answerBox.Select(0, lengthOfAnswer);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T14:49:28.470

`NumericUpDown`此代码选择控件旋转框中的所有文本。为什么？因为当您使用`Tab`通过控件导航到 时`NumericUpDown`，不会选择文本并且输入将从第一个位置开始。因此，如果您已经拥有 value`5`和 type `6`，那么您将获得`65`. 如果将选择所有文本，则所选值`5`将替换为新值`6`。

将值重置为最大值是默认`NumericUpDown`控制行为。如果输入的数字超过允许的最大值，那么当您离开`NumericUpDown`控制时，它的值将被替换为允许的最大值。

*请记住*，`NumericUpDown`只有当您离开控制或使用箭头键更改值时，才会更改实际值。当您输入文本时，值不会改变，直到焦点离开旋转框。

**验证您为哪个控件设置了最大值，** `NumericUpDown`仅当输入的值超过`Maximum`或*该特定实例*`Minimum`的值时才会自动更改其值。因此，很明显您的控件已设置为. 可能您更改了其他一些控件的最大值。*`Maximum``100`*

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-08T13:46:08.583

我还没有对此进行全面分析，但是在使用此代码时遇到了类似的问题：

```
<wf:NumericUpDown x:Name="NumericKernalSize"  Width="50" Height="22" Visible="True" ValueChanged="NumericKernalSize_ValueChanged" BorderStyle="FixedSingle" Value="201" Minimum="0" Maximum="1000" /> 
```

发生的情况是，在最大值设置为所需的最大值 1000 之前，值 = 201 似乎超过了默认最大值 100。

如果您在值之前设置最大值，则不会出现问题，例如以下对我有用：-

```
<wf:NumericUpDown x:Name="NumericKernalSize"  Width="50" Height="22" Visible="True" ValueChanged="NumericKernalSize_ValueChanged" BorderStyle="FixedSingle" Minimum="0" Maximum="1000" Value="201"/> 
```

希望这对某人有所帮助，因为解决这个问题很棘手......

干杯...*

# dart - 将 4 字节转换为有符号整数

> ID：13322327
> 
> 赞同：6
> 
> 时间：2012-11-10T13:09:42.383
> 
> 标签：dart

我正在尝试在浏览器中解析二进制文件。我有 4 个字节代表一个 32 位有**符号**整数。
有没有一种直接的方法可以将它转换为 dart int，还是我必须手动计算二进制补码的倒数？

谢谢

编辑：使用它进行手动转换：

```
 int readSignedInt() {
    int value = readUnsignedInt();
    if ((value & 0x80000000) > 0) {
      // This is a negative number.  Invert the bits and add 1
      value = (~value & 0xFFFFFFFF) + 1;

      // Add a negative sign
      value = -value;
    }
    return value;
  } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-10T16:01:04.583

您可以使用库中的[ByteArray](https://api.dartlang.org/apidocs/channels/be/dartdoc-viewer/dart:typed_data.Int8List)`typed_data`。

```
import 'dart:typed_data';

int fromBytesToInt32(int b3, int b2, int b1, int b0) {
  final int8List = new Int8List(4)
    ..[3] = b3
    ..[2] = b2
    ..[1] = b1
    ..[0] = b0;
  return int8List.asByteArray().getInt32(0);
}

void main() {
  assert(fromBytesToInt32(0x00, 0x00, 0x00, 0x00) == 0);
  assert(fromBytesToInt32(0x00, 0x00, 0x00, 0x01) == 1);
  assert(fromBytesToInt32(0xF0, 0x00, 0x00, 0x00) == -268435456);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-10T15:54:58.430

将 4 个字节放入 ByteArray 并像这样提取 Int32：

```
import 'dart:scalarlist';

void main() {
  Int8List list = new Int8List(4);
  list[0] = b0;
  list[1] = b1;
  list[2] = b2;
  list[3] = b3;
  int number = list.asByteArray().getInt32(0);
} 
```

约翰

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-10T14:53:10.877

我不确定你想要什么，但也许这个代码示例可能会给你一些想法：

```
int bytesToInteger(List<int> bytes) {
  var value = 0;

  for (var i = 0, length = bytes.length; i < length; i++) {
    value += bytes[i] * pow(256, i);
  }

  return value;
} 
```

因此，假设我们有`[50, 100, 150, 250]`“4 个字节”，最终结果是一个 32 位无符号整数。我有一种感觉，这不是您正在寻找的东西，但它可能会对您有所帮助。

# c# - 使用 curl 创建一个机器人以从 C# 中的网站订购商品

> ID：13322329
> 
> 赞同：0
> 
> 时间：2012-11-10T13:09:56.810
> 
> 标签：c#, curl, httpwebrequest, bots

有一个网站，我需要从中购买物品。基本上我必须经过 3 个步骤才能购买该商品：

1.  登录
2.  将商品添加到购物车
3.  填写详细信息并结帐

我正在尝试使用 CURL 或 HTTPWEBREQUESTS 来做到这一点，但它不想工作。我用来使它工作的步骤没有：

1.  使用 POST 数据 [用户名和密码] 创建了一个带有 CURL 的 POST 请求到登录链接
2.  还使用 CURL 将商品添加到购物车
3.  使用 CURL 签出

无论如何，这一切都没有奏效。那么我应该采取任何步骤或考虑吗？我还想从 CURL 读取 HTTP 响应来读取源代码，看看我在哪里卡住了。

无论如何，这是我的 CURL 请求代码，它可能会有所帮助：

```
 static private void POST_DATA(string url, string data)
    {
        Curl.GlobalInit((int)CURLinitFlag.CURL_GLOBAL_ALL);

        Easy e = new Easy();
        Easy.WriteFunction wf = MyWriteFunction;

        string[] header = { "HTTP/1.1 200 OK Date: Tue, 06 Mar 2012 22:28:24 GMT Server: Apache Expires: Thu, 19 Nov 1981 08:52:00 GMT Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0 Pragma: no-cache Set-Cookie: PHPSESSID=cq1viovgm2nvov3ovdftsfjg67; path=/ Vary: Accept-Encoding Cache-Control: max-age=600, private, must-revalidate Content-Length: 14161 Content-Type: text/html; charset=UTF-8", "content-type plain/text" };

        e.SetOpt(CURLoption.CURLOPT_HEADER, true);
        e.SetOpt(CURLoption.CURLOPT_HTTPHEADER, header);
        e.SetOpt(CURLoption.CURLOPT_USERAGENT, "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.64 Safari/537.11");
        e.SetOpt(CURLoption.CURLOPT_URL, url);
        e.SetOpt(CURLoption.CURLOPT_POSTFIELDS, data);
        e.SetOpt(CURLoption.CURLOPT_WRITEFUNCTION, wf);
        //e.SetOpt(CURLoption.re)
        e.Perform();
        e.Cleanup();
    } 
```

# java - 自动生成默认和字段构造函数的 eclipse 快捷方式是什么？

> ID：13322330
> 
> 赞同：62
> 
> 时间：2012-11-10T13:09:59.867
> 
> 标签：java, eclipse, keyboard-shortcuts

我看了一下：[Eclipse-Shortcuts](https://docs.google.com/viewer?a=v&q=cache:ONIuWQuH0d0J:eclipse-tools.sourceforge.net/Keyboard_shortcuts_%283.0%29.pdf%20&hl=de&gl=at&pid=bl&srcid=ADGEESiJV5Ksth5keyMfZN72Ww-q1vo728GvYYqXRA5RBS88qV_3y922qUrIKnmvOmRLcr2kkSXgcdFTo5F0xhpe9R39QuRLwDoPXDcHBGhb-T1-_NCgfbujHWiUIoxTosyXyZCGeMvj&sig=AHIEtbR2POLLbNTjEJnxR7oS5S_mL7m-Qw)，但我没有发现生成构造函数的内容。

生成标准构造函数的快捷方式是什么？

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2012-11-10T13:14:25.977

键入您班级的第一个字母，然后按`Ctrl`+ `Space`，Eclipse 将在组合框中列出建议。最重要的建议是默认构造函数。按`Enter`，就搞定了。（我正在使用 Eclipse Juno，它可以工作。）

* * *

## 回答 #2

> 赞同：78
> 
> 时间：2012-11-10T13:18:43.477

`Alt`++`Shift`然后`s`打开对话框`o`。`Generate Constructor using Fields`

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-11-10T13:20:41.630

`Goto Source ---> Generate constructor using Fields`

在 Source Title 栏下，选择 Generate constructor using Fields 选项。

**或者**

`Ctrl+Space`它显示了可能的各种建议，从那里您可以选择默认的构造函数。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2015-10-09T06:15:15.407

生成**默认构造函数**的方法-
1) 按**Ctl + Space**

生成**字段构造函数**的方法 -
1) 按**Alt + Shift + S + O**
2)**右键单击**​​ -> 源 -> 使用字段生成构造函数
3) 转到**源菜单**-> 使用字段生成构造函数
4) 转到**Windows 菜单**-> 首选项-> 常规 -> 键（使用文本字段上的字段编写生成构造函数）

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-11-10T13:15:04.367

当你`CTRL-SPACE`进入你的类定义时，你会看到一个下拉菜单。第一个选择是您的构造函数。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-01-24T12:59:44.067

对于 Mac 用户来说

Option + Command(⌘) + S**或**

Command(⌘) + Option + S 将打开弹出窗口。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-09-13T14:26:40.607

或者你可以键入 Ctrl + 3 并键入 GCUF，这是什么意思。使用字段生成构造函数。生成 getter 和 setter 的方法几乎相同：键入 Ctrl + 3 并键入 GGAS，什么意思，生成 Getter 和 Setter

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-12-09T11:32:17.133

您可以遵循多种方法。

1.  最简单：- 将光标放在类内，然后单击`Ctrl`+ （因为 ctrl+ 空格给出的列表的第一个选项是构造函数）`Space``Enter`
2.  `Ctrl`+`3`输入“constr”。打`Enter`。你会得到生成构造函数的对话框。在这里您可以选择是否需要该参数。选择并点击`Enter`
3.  点击`Alt`+ `Shift`+`s` 然后点击`o` 你将得到与上面（2）中提到的相同的对话框。做你的选择。打`Enter`

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-11-26T01:50:27.463

我认为生成构造函数的快捷键已经过时了。 `Alt+Shift+s`然后`press A`打开`Generate Constructor using Fields`对话框

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-08-16T14:38:59.593

我认为 CTRL + 3 很棒。

GCFS - 从超类生成构造函数。GCUF - 使用字段生成构造函数。GGAS - 生成 getter 和 setter。

# iphone - Objective-C/XCode：我描述的是什么类实例化？

> ID：13322331
> 
> 赞同：0
> 
> 时间：2012-11-10T13:10:10.060
> 
> 标签：iphone, objective-c, ios, xcode

当用户按下其中一个硬件音量控件时，此 UIElement 就会出现……UI 元素是一个带圆角的黑色半透明正方形。在 iPhone 版 Twitter 应用程序的旧版本中，这个元素曾经在用户关注、取消关注、转发等时出现。我真的很想在我的应用程序中使用这个元素，谁能告诉我它是哪个元素？

最好的...SL

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T13:27:05.197

这是一个弹出窗口。有一些开源项目将使实施更容易：

*   [https://github.com/samvermette/SVProgressHUD](https://github.com/samvermette/SVProgressHUD)
*   [https://github.com/matej/MBProgressHUD](https://github.com/matej/MBProgressHUD)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T13:31:44.133

该 UIElement 是一个简单的透明元素`UIView`，其中包含动画。动画就像“淡入，显示给定时间，淡出”。

# database - 如何成功将用户名登录详细信息移动到另一个数据库

> ID：13322341
> 
> 赞同：0
> 
> 时间：2012-11-10T13:11:32.660
> 
> 标签：database, passwords, phpmyadmin, password-encryption

我继承了一个拥有 3000 个用户的网站。我想将所有这些用户导入一个基于 Doplphin (Bonex) 的新站点数据库。

我试图导入数据。用户数据导入成功，但密码不成功。

所有密码均已加密。

在旧数据库中，我不确定使用了什么类型的加密，我猜我认为它们不是 MD5。

这是当前存储在旧数据库中的密码之一的格式。

```
$2a$10$M/HQVUTyxrdbiwNjokJoUOIbUAK71yvYXKPe1YdFgS2I3Pw6Ojlju
```

导入新数据库时，如何使这些密码正常工作？

关于将密码导入在不同框架内工作的新数据库，我需要知道什么方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T13:16:39.610

该密码是`BCrypt`散列的。（我可以从`$2a$10$...`）

希望您的平台具有：

```
BCrypt.CheckPassword(savedHash, enteredPassword); 
```

功能。

* * *

从[我在这里的回答](https://stackoverflow.com/a/10933491/12597)：

BCrypt 哈希***字符串***如下所示：

```
$2a$10$M/HQVUTyxrdbiwNjokJoUOIbUAK71yvYXKPe1YdFgS2I3Pw6Ojlju
$==$==$======================------------------------------- 
```

在哪里

*   `2a`: 算法标识符 (BCrypt)
*   `10`：成本因素（1,024 发）
*   `M/HQVUTyxrdbiwNjokJoUO`：OpenBSD-Base64 编码盐（22 个字符，16 个字节）
*   `IbUAK71yvYXKPe1YdFgS2I3Pw6Ojlju`: OpenBSD-Base64 编码散列（31 个字符，24 个字节）

> **编辑**：我只是注意到这些词完全吻合。我不得不分享：
> 
> ```
> $2a$10$TwentytwocharactersaltThirtyonecharacterspasswordhash
> $==$==$======================------------------------------- 
> ```

* * *

但是**BCrypt**是由从事 OpenBSD 工作的人创建的。**OpenBSD**已经为他们的密码文件定义了一种格式：

**$** `[HashAlgorithmIdentifier]`**$**`[AlgorithmSpecificData]`

这意味着*“bcrypt 规范”*与 OpenBSD 密码文件格式密不可分。每当有人创建*“bcrypt hash”*时，他们*总是*将其转换为格式为 ISO-8859-1 的字符串：

**$** `2a`**$** `[Cost]`**$**`[Base64Salt][Base64Hash]`

几个重要的点：

*   `2a`是算法标识符
    *   `1`: MD5
    *   `2`: 早期的 bcrypt，对哪些编码密码存在混淆（已过时）
    *   `2a`：当前 bcrypt，将密码指定为 UTF-8 编码
*   *成本*是计算哈希时使用的成本因素。“当前”值为 10，表示内部密钥设置经过 1,024 轮
    *   **10: 2 ^(10) = 1,024 次迭代**
    *   11: 2 ^(11) = 2,048 次迭代
    *   12：2 ^(12) = 4,096 次迭代
*   OpenBSD 密码文件使用的 base64 算法与**其他人**使用的 Base64 编码不同；他们有自己的：

    ```
    Regular Base64 Alphabet: ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/
        BSD Base64 Alphabet: ./ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789 
    ```

    所以 bcrypt 的任何实现都不能使用任何内置的或标准的 base64 库

* * *

有了这些知识，您现在可以`correctbatteryhorsestapler`根据保存的哈希验证密码：

```
$2a$12$mACnM5lzNigHMaf7O1py1O3vlf6.BA8k8x3IoJ.Tq3IB/2e7g61Km 
```

# knockout.js - 淘汰赛 - 绑定到单个集合项

> ID：13322342
> 
> 赞同：2
> 
> 时间：2012-11-10T13:11:44.123
> 
> 标签：knockout.js

我有一个可观察到的文化特定对象的集合。需要与主编辑屏幕分开编辑/显示不变项目。

问题是 - 我可以通过两种方式绑定到集合中的单个项目。

这个小提琴提供了一个更复杂的 UI/Viemodel 的简化版本：

[http://jsfiddle.net/Lu2y8/8/](http://jsfiddle.net/Lu2y8/8/)

我在我的视图模型中尝试了计算的可写属性，但它没有检测到集合中的不变项何时更改

您的意见将不胜感激。代码如下：

```
var ItemDescription = function () {
    var me = this;

    me.CultureInvariantId = ko.observable(0);
    me.CultureFormat = ko.observable('');
    me.Description = ko.observable('');
    me.IsInvariant = ko.observable(false);
};

function viewModel()
    {
      var me = this;
      me.Name = ko.observableArray();   
      me.InvariantName = ko.observable('');  

}
    function Initialize()
{
   var model = new viewModel();

     var invItemDescription = new ItemDescription();
      invItemDescription.Description('Invariant description');
      invItemDescription.CultureFormat ('');
      invItemDescription.IsInvariant  = true;

       model.Name.push(invItemDescription);

     var usItemDescription = new ItemDescription();
      usItemDescription.Description('USA description');
      usItemDescription.CultureFormat ('en-US');
      usItemDescription.IsInvariant  = false;

    model.Name.push(usItemDescription);

    return model;   

}

      ko.applyBindings(new Initialize()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T13:53:37.833

如果我了解您要做什么，那么我认为一个不错的选择是创建一个表示不变`ItemDescription`对象的计算 observable。然后，您可以使用`with`绑定将编辑器绑定到其属性。

就像是：

```
function viewModel()
    {
      var me = this;
      me.Name = ko.observableArray();  

      me.SelectedName = ko.observable();

      me.InvariantName = ko.computed(function() {
          return ko.utils.arrayFirst(me.Name(), function(name) {
              return name.IsInvariant; 
          });
      });
} 
```

使用如下标记：

```
<select data-bind="options: Name, optionsText: 'Description', value: SelectedName">
</select>
<div data-bind="with: SelectedName">
   <textarea data-bind="value: Description"> </textarea>    
</div>

Edit Invariant:
<div data-bind="with: InvariantName">
    <input type="input" data-bind="value: Description" />
</div> 
```

示例：http: [//jsfiddle.net/rniemeyer/3cH8T/](http://jsfiddle.net/rniemeyer/3cH8T/)

# c++ - 指针数组和指向指针数组的指针

> ID：13322345
> 
> 赞同：1
> 
> 时间：2012-11-10T13:12:21.563
> 
> 标签：c++, c, pointers

我不太明白错误在哪里：

```
int *parr[22];  // Array of int* pointers
parr[0] = ptr1;
parr[1] = ptr2;
//... 

int *(*pparr)[22]; // A pointer to a int* array[22]
pparr = parr; // ERROR 
```

错误告诉我`error C2440: '=' : cannot convert from 'int *[22]' to 'int *(*)[22]'`

为什么类型不相等？数组的名称应该等于对数组第一个元素的引用，例如

```
parr => &parr[0] 
```

所以这条线对我来说似乎是正确的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T13:17:50.330

An`int*[22]`可以衰减为`int**`，但您不能将 an 分配`int**`给`int*(*)[22]`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T13:17:50.730

照`pparr`原样`A pointer to a int* array[22]`你需要写

```
pparr = &parr; 
```

您需要将地址存储在指针中，而不是指针本身。

就像你有

```
int a=3;
int *b;
b=&a; 
```

您将 a 的地址存储在 b 中，同样您需要将地址存储`parr`在`pparr`

编辑：澄清OP的评论

您不能分配第一个元素的地址，而是指向第一个元素的指针的地址。（因此`pparr = &parr;`）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T13:22:19.187

```
int *(*pparr)[22];  //This one is an array of function-pointers returning an int pointer. 

int **pptr;  //Points to an array of pointer 
```

所以你可以写

```
pptr = parr; 
```

# c# - 如何在 C# 中欺骗 tcp/http 响应

> ID：13322346
> 
> 赞同：1
> 
> 时间：2012-11-10T13:12:25.760
> 
> 标签：c#, http, networking, tcp

我有一个应用程序向服务器发出请求并获得身份验证。我想知道是否可以编写一个侦听器来侦听请求，并且如果任何请求与该特定请求匹配，则侦听器会发回一条消息，而实际上它没有到达服务器。

本质上，我想制作应用程序。认为它已经过身份验证，但实际上还没有。

这就是 WireShack 上的 tcp 流的样子。突出显示的响应正是我希望我的代码响应的内容。

这可能吗？

![在此处输入图像描述](../Images/f17bc4255860c2d1897cd59ddbd0ac07.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T13:14:47.783

是的。它被称为“代理”，您可以在 C# 中使用`System.Net.Sockets`命名空间来执行此操作。或者，您可以使用[Fiddler](http://www.fiddler2.com)而完全忘记编程。:)（顺便说一句 - AFAIK Fiddler 也是用 C# 编写的）

# android - 在 Android 模拟器上显示 Tifinagh 字母

> ID：13322347
> 
> 赞同：4
> 
> 时间：2012-11-10T13:12:30.003
> 
> 标签：android, unicode, android-emulator

为了在 Android 模拟器上显示 Tifinagh 字符，我尝试了以下方法：

```
TextView tv=(TextView)findViewById(R.id.font);
Typeface face=Typeface.createFromAsset(getAssets(),"fonts/MZTIFIYU.TTF");
tv.setTypeface(face); 
```

然而它没有用。我仍然看到框而不是字符。

有没有其他方法可以解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-27T16:43:28.223

Azul :) 我可以看到使用这种字体的 Tifinagh 字符：[t_ircam-webfont.ttf](https://code.google.com/p/asughl/source/browse/tags/1.1/css/t_ircam-webfont.ttf?r=8)

您还可以查看[此答案](https://stackoverflow.com/questions/19053719/tifinagh-caracter-not-displayed-on-android-emulator)以获得更多帮助。

# iphone - sqlite 3 开放问题

> ID：13322349
> 
> 赞同：3
> 
> 时间：2012-11-10T13:12:49.707
> 
> 标签：iphone, ios, xcode, sqlite

我正在使用几种类似的方法从 sqlite3 文件中获取我的数据，如下代码所示：

```
-(NSMutableArray *) getCountersByID:(NSString *) championID{

    NSMutableArray *arrayOfCounters;
    arrayOfCounters = [[NSMutableArray alloc] init];

    @try {
        NSFileManager *fileManager = [NSFileManager defaultManager];
        NSString *databasePath = [[[NSBundle mainBundle] resourcePath ]stringByAppendingPathComponent:@"DatabaseCounters.sqlite"];
        BOOL success = [fileManager fileExistsAtPath:databasePath];

        if (!success) {
            NSLog(@"cannot connect to Database! at filepath %@",databasePath);
        }
        else{
            NSLog (@"SUCCESS getCountersByID!!");
        }
        if(sqlite3_open([databasePath UTF8String], &database) == SQLITE_OK){

            NSString *tempString = [NSString stringWithFormat:@"SELECT COUNTER_ID FROM COUNTERS WHERE CHAMPION_ID = %@",championID];
            const char *sql = [tempString cStringUsingEncoding:NSASCIIStringEncoding];
            sqlite3_stmt *sqlStatement;

            int ret = sqlite3_prepare(database, sql, -1, &sqlStatement, NULL);

            if (ret != SQLITE_OK) {
                NSLog(@"Error calling sqlite3_prepare: %d", ret);
            }
            if(sqlite3_prepare_v2(database, sql, -1, &sqlStatement, NULL) == SQLITE_OK){

                while (sqlite3_step(sqlStatement)==SQLITE_ROW) {
                    counterList *CounterList = [[counterList alloc]init];
                    CounterList.counterID = [NSString stringWithUTF8String:(char *) sqlite3_column_text(sqlStatement,0)];
                    [arrayOfCounters addObject:CounterList];
                }
            }
            else{
                NSLog(@"problem with database prepare");
            }
            sqlite3_finalize(sqlStatement);
        }
        else{
            NSLog(@"problem with database openning %s",sqlite3_errmsg(database));
        }   
    }
    @catch (NSException *exception){
        NSLog(@"An exception occured: %@", [exception reason]);
    }
    @finally{
        sqlite3_close(database);
        return arrayOfCounters;
    }
    //end
} 
```

然后我可以使用此代码行和其他类似代码行访问数据：

```
myCounterList *MyCounterList = [[myCounterList alloc] init];
countersTempArray = [MyCounterList getCountersByID:"2"];

[countersArray addObject:[NSString stringWithFormat:@"%@",(((counterList *) [countersTempArray objectAtIndex:i]).counterID)]]; 
```

我得到了很多数据，比如图像名称并显示它们的组合，这取决于用户使用此类代码输入的内容：

```
UIImage *tempImage = [UIImage imageNamed:[NSString stringWithFormat:@"%@_0.jpg",[countersArray objectAtIndex:0]]];

[championSelection setBackgroundImage:tempImage forState:UIControlStateNormal]; 
```

* * *

**我的问题：**

当我运行我的应用程序一段时间并获取大量数据时，它会引发错误：“数据库打开问题无法打开数据库文件 - **错误 = 24（打开的文件过多）** ”

我的猜测是，每次调用 getCountersByID 但不关闭它时，我都会打开我的数据库。

**我的问题：**

我是否使用正确的方法来打开和关闭我使用的数据库？

* * *

没有帮助我解决这个问题的类似问题：

1.  [无法打开数据库](https://stackoverflow.com/questions/3377488/unable-to-open-database)
2.  [Sqlite 打开错误：无法打开数据库](https://stackoverflow.com/questions/4030114/sqlite-opening-error-unable-to-open-database)

* * *

**更新**：

我假设错误正在出现，因为我使用这行代码太多：

```
NSFileManager *fileManager = [NSFileManager defaultManager];
NSString *databasePath = [[[NSBundle mainBundle] resourcePath ]stringByAppendingPathComponent:@"DatabaseCounters.sqlite"];
BOOL success = [fileManager fileExistsAtPath:databasePath]; 
```

并以错误 24 结束。

所以我将它们设为全局但**sqlite3_errmsg**显示相同的错误 24，但应用程序现在运行得更快

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T13:36:06.573

`DB`基本上，当您处于灵态时，您应该只打开一次，`initialization`而不是在您向`DB`. 您的代码不应该失败，因为您似乎在每次请求后打开然后关闭数据库。通过记录这些事件或通过代码进行调试来确保发生这种情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T13:42:39.093

您显示的代码确实关闭了数据库，因此您很可能忘记在其他地方关闭它，或者其他文件被重复打开但从未关闭。

# c# - 定期向 DataGridView 添加一行，但同时添加所有行

> ID：13322355
> 
> 赞同：1
> 
> 时间：2012-11-10T13:13:37.257
> 
> 标签：c#, winforms, datagridview, ping

所以我有这个代码：

```
Ping ping = new Ping();
for(int i = 0; i<= number_of_pings; i++)
{
    PingReply pingReply = ping.Send(address_to_send);
    dataGridView1.Rows.Add(address_to_send, pingReply.Address, pingReply.RoundtripTime, pingReply.Status);         
} 
```

出于某种原因，当它被泵入 a`dataGridView1`时，`dataGridview1`有五个（或我指定的 ping 数量）一次泵入它的数据字段。我正在尝试做的是`dataGridView1`定期填充。例如，在每个 ping 完成后，它的输出到`dataGridView1`下一个 ping 开始，依此类推。

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T13:24:06.293

BackgroundWorker 是满足您需求的最佳解决方案之一。在您的类中定义一个空的 DataTable 并将 Ping 代码放入 BackgroundWorker_DoWork 方法中。然后将结果添加到 DataTable。当此方法完成时，BackgroundWorker_WorkerComplete 已触发。您应该再次运行 DoWork 方法以进行下一次 ping。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T13:21:02.917

你可以在每添加一行之后调用datagridview的update方法：

```
dataGridView1.Update(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T13:34:45.733

```
Ping ping = new Ping();

for(int i = 0; i<= number_of_pings; i++)
{
    PingReply pingReply = ping.Send(address_to_send);

    dataGridView1.Rows.Add(address_to_send, pingReply.Address, pingReply.RoundtripTime, pingReply.Status);
    dataGridView1.PerformLayout();
    Application.DoEvents();
} 
```

# android - Android 从互联网获取数据 (android.os.NetworkOnMainThreadException)

> ID：13322363
> 
> 赞同：0
> 
> 时间：2012-11-10T13:15:10.407
> 
> 标签：android, json, connect

好的，我在 StackOverflow 上阅读了很多问题，但我仍然无法理解，所以我要提出一个新问题。

我创建了一个函数连接到互联网并将json作为字符串获取的类。它在普通的 Java 应用程序中运行良好，但我无法在我的 android 项目中运行。

我收到下一个错误：android.os.NetworkOnMainThreadException

所以据我了解，我必须使用 AsyncTask 但我不知道如何将我的函数包装到其中。

函数如下所示：

```
public static String get(String url){
  //connect and get data to string
  // return string
} 
```

就像我说的那样，它在普通的 JavaApplication 中运行良好，但在 android 项目中却不行。

谢谢帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T13:20:44.393

据我了解，您使用`AndroidHttpClient`->因此您甚至不能尝试在 UI 线程中执行网络操作->因此为此目的创建单独的线程。您可以使用`AsynchTask`,`Thread + Handler`或`HandlerThread`为此目的，或者您可以尝试在此处使用 package.json 进行试验`java.util.concurrent`。

```
NetworkOnMainThreadException | Android Developers
developer.android.com/... - 
Class Overview. The exception that is thrown when an application attempts to perform a networking operation on its main thread. This is only thrown for ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T13:22:57.967

[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html) 看样例

```
 private class DownloadFilesTask extends AsyncTask<URL, Integer, Long> {
} 
```

您的“get”函数必须在此类中拆分为 2 个单独的函数

你想得到什么，放进去

```
doInBackground 
```

以及您想对收到的数据做什么

```
onPostExecute 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T13:23:21.960

您可以创建扩展 AsyncTask 的线程方法（如您正确理解的那样），并使用`.execute()`.

具体如何设置取决于您。这是有关旋转这些线程的教程的链接： [http ://www.vogella.com/articles/AndroidPerformance/article.html#concurrency_threads](http://www.vogella.com/articles/AndroidPerformance/article.html#concurrency_threads)

# android - 如何在 Android 上禁用 Chrome 放大功能？

> ID：13322364
> 
> 赞同：16
> 
> 时间：2012-11-10T13:15:32.337
> 
> 标签：android, html, ios, google-chrome, safari

试图阻止在 Android 上的 Chrome 中缩放页面，并且它不想表现出来。我正在使用下面的代码，它在普通的 Android 浏览器和 iOS 上的 Safari 上运行良好。有什么想法吗？

```
<meta content='width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=no;' name='viewport' />

    <meta name="viewport" content="width=device-width" /> 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-10T13:28:50.250

尝试添加`minimum-scale=1`到您的`viewport`元标记 - 如果这没有帮助，很可能 Android 版 Chrome 不支持禁用缩放（例如，HTC 的专有浏览器故意不允许您禁用缩放）

更新：我刚刚检查过，看起来 Chrome*确实*支持禁用缩放，但是您的代码中有两个视口标签？第二个可能会覆盖第一个。删除第二个。

有关详细信息和禁用跨多个浏览器缩放的好建议，请参阅此[移动浏览器支持列表以禁用缩放。](https://stackoverflow.com/a/12270403/1658527)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-19T14:51:10.050

我正在使用皮带和大括号方法，配置所有可用的视口设置，根据[developer.android.com](http://developer.android.com/)的[来自 Web 应用程序的目标屏幕](http://developer.android.com/guide/webapps/targeting.html)

> 以下语法显示了所有受支持的视口属性以及每个属性接受的一般值类型：

```
<meta name="viewport"
  content="
    height = [pixel_value | device-height] ,
    width = [pixel_value | device-width ] ,
    initial-scale = float_value ,
    minimum-scale = float_value ,
    maximum-scale = float_value ,
    user-scalable = [yes | no] ,
    target-densitydpi = [dpi_value | 
     device-dpi | high-dpi | medium-dpi | low-dpi]
    " /> 
```

**为无缩放配置的元标记：**

```
<meta name="viewport"
  content="
    height = device-height,
    width = device-width,
    initial-scale = 1.0,
    minimum-scale = 1.0,
    maximum-scale = 1.0,
    user-scalable = no,
    target-densitydpi = device-dpi
    " /> 
```

**作为一个班轮：**

```
<meta name="viewport" content="height=device-height, width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, target-densitydpi=device-dpi" /> 
```

# grammar - SQL JOIN 子句：用一个 Enum 代替一堆标志

> ID：13322366
> 
> 赞同：1
> 
> 时间：2012-11-10T13:15:37.080
> 
> 标签：grammar, xtext

我正在尝试实现一个包含 SQL`SELECT`查询某些部分的 DSL。

`JOIN`两个表之间的语法是这样指定的（例如对于[PostgreSQL](http://www.postgresql.org/docs/current/interactive/sql-select.html#SQL-FROM)）：

```
// one of theese:
[ INNER ] JOIN
LEFT [ OUTER ] JOIN
RIGHT [ OUTER ] JOIN
FULL [ OUTER ] JOIN
CROSS JOIN 
```

注意可选关键字。

以下 Xtext 语法有效（有点）：

```
Join:
    'INNER'? inner?='JOIN'
|   left?='LEFT' 'OUTER'? 'JOIN'
|   right?='RIGHT' 'OUTER'? 'JOIN'
|   full?='FULL' 'OUTER'? 'JOIN'
|   cross?='CROSS' 'JOIN'
; 
```

模型推断当然会创建一堆以后不能很好处理的标志。

我**真正**想要的是这样的枚举：

```
enum JoinType: INNER_JOIN | LEFT_JOIN | RIGHT_JOIN | FULL_JOIN | CROSS_JOIN; 
```

我想要一个枚举，因为：

*   发电机等。可以用一个简单的`switch`语句。
*   可选关键字和嵌入空格的处理是语法工作。

有什么合理的方法可以将该枚举与语法的其余部分联系起来吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T09:21:14.163

您可以单独定义它们，尽管它是一种解决方法，但它可能不如 enum 优雅；

```
Join:
 (joins += JoinType)+ // or however you wish
;
JoinTypes:
 INNER_JOIN | LEFT_JOIN | RIGHT_JOIN | FULL_JOIN | CROSS_JOIN
; 
```

然后定义它们中的每一个以及你想要的。

```
 INNER_JOIN:
 // whatever you want, optional keywords etc.
;
 LEFT_JOIN:
... 
```

# html - 水平菜单 - IE 中的空白

> ID：13322373
> 
> 赞同：2
> 
> 时间：2012-11-10T13:16:47.550
> 
> 标签：html, css, internet-explorer, menu

我正在开发一个 940 像素宽的小型个人网站。我想建立一个包含 6 个元素的菜单，该菜单是网站的全宽。我已经设法使 Firefox、Chrome 和 Opera 中的菜单完美，但在 IE 中，我在最后一个元素的末尾有一点（4-5px）间隙。任何想法如何删除该空间？

这是菜单的CSS：

```
#menu ul {
     list-style: none;
     width: 100%;
}

#menu li {
    display: inline-block;
    *display: inline;
    text-align: center;
    padding: 30px 0 30px 0;
}

#menu a {
    text-decoration: none;
    font-size: 16px;
    border-right: 1px solid #C1BEBA;
    padding: 10px 56px 10px 56px;
} 
```

和 HTML

```
<ul id="menu">
    <li><a href="#">Menu 1</a></li>
    <li><a href="#">Menu 2</a></li>
    <li><a href="#">Menu 3</a></li>
    <li><a href="#">Menu 4</a></li>
    <li><a href="#">Menu 5</a></li>
    <li><a href="#">Menu 6</a></li>
</ul> 
```

**[现场演示](http://jsfiddle.net/tmn3Q/)**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T04:21:02.273

您的代码和计划存在一些问题。

1.  你真的需要决定：你想要菜单项之间的任何空间。如果您不这样做，并且您希望它们相互接触，并接触 940 像素宽页面的两侧，那么您当前的计划将不起作用，因为 940/6=156.666 重复出现。这不是像素完美的，看起来很糟糕。如果您想要菜单项之间的空间，那么您需要为所有菜单项设置宽度。如果你只使用 padding，当你输入太多或太少的文本时，页面布局就会中断，或者会不均匀，除非你使用更多的 CSS。

2.  您的代码在某些地方有错误，例如#menu ul。它应该是 ul#menu。这就是为什么您的某些代码不起作用的原因。

3.  如果您想让 IE 看​​起来与其他浏览器中的一样，您需要使用 CSS 重置。我在下面的代码中使用了简单的重置，但我建议您使用 Google IE CSS 重置并选择最适合您的重置。

4.  这是我放在一起的示例代码。我已经改变了你的很多，但希望它会有所帮助。我为 li 标签添加了右边距，然后为 a 标签添加了负边距，以确保文本在边框之间很好地居中。如果您希望菜单项具有不同的背景颜色，这将会改变，并且您只需要对 CSS 宽度和边距进行数学计算。

您可以在以下位置查看此代码的完整示例： [http ://code.bengrunfeld.com/iewithhorizo​​ntalmenu.html](http://code.bengrunfeld.com/iewithhorizontalmenu.html)

```
html, body, div, span, applet, object, iframe,
h1, h2, h3, h4, h5, h6, p, blockquote, pre,
a, abbr, acronym, address, big, cite, code,
del, dfn, em, font, img, ins, kbd, q, s, samp,
small, strike, strong, sub, sup, tt, var,
dl, dt, dd, ol, ul, li,
fieldset, form, label, legend,
table, caption, tbody, tfoot, thead, tr, th, td {
    margin: 0;
    padding: 0;
    border: 0;
    outline: 0;
    font-weight: inherit;
    font-style: inherit;
    font-size: 100%;
    font-family: inherit;
    vertical-align: baseline;
}

body {
    background:#aaa;
    width:940px;
}

ul#menu {
    background:#fff;
    list-style: none;
    width:940px;
    height:80px;    
}

#menu li {
    width:145px;
    display:inline-block;       
    padding: 30px 0;
    margin-right:13px;
    float:left;
    border-right: 1px solid #C1BEBA;
}

#last {
    margin-right:0px !important;
    border-right:none !important;
}

#menu a {
    width:158px;
    text-decoration: none;
    font-size: 16px;
    text-align:center;
    margin-left:-13px;  
    display:block;
}

<ul id="menu">
    <li><a href="#">Menu 1</a></li>
    <li><a href="#">Menu 2</a></li>
    <li><a href="#">Menu 3</a></li>
    <li><a href="#">Menu 4</a></li>
    <li><a href="#">Menu 5</a></li>
    <li id="last"><a href="#">Menu 6</a></li>
</ul> 
```

# c - fork() 和 wait() / 父/子改变的值

> ID：13322378
> 
> 赞同：0
> 
> 时间：2012-11-10T13:17:31.020
> 
> 标签：c, fork, process, wait

如果我有以下代码（来自 Silberschatz，操作系统），为什么 P 行中的 value = 0？我以为父进程等到子进程完成，子进程设置 value = 5。

有人可以向我解释一下吗？

```
int value = 0;
void *runner(void *param);

int main(int argc, char *argv[])
{
    int pid;
    pthread_t tid;
    pthread_attr_t attr;
    pid = fork();

    if (pid == 0) {
        pthread_attr_init(&attr);
        pthread_create(&tid,&attr,runner,NULL);
        pthread_join(tid,NULL);
        printf("CHILD: value= %d \n",value); /* LINE C */
    }
    else if (pid > 0) {
        wait(NULL);
        printf("PARENT: value= %d \n",value); /* LINE P */
    }
}

void *runner(void *param) {
    value = 5;
    pthread_exit (0);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T13:21:22.363

当你 fork 时，你创建了一个全新的进程，其中包含来自父进程的内存*副本*。（操作系统可能会使用一些技巧来加快速度，但语义仍然存在。）

父级看不到对子级变量所做的更改-它们是具有独立内存的独立进程。

另一方面，线程共享相同的内存区域。因此，运行的线程中的更改`runner`对子主线程是可见的。

# android - 如何让传感器定期工作？

> ID：13322379
> 
> 赞同：2
> 
> 时间：2012-11-10T13:17:31.710
> 
> 标签：android

我目前正在 Android 中开发一个应用程序，它将在固定的时间长度内记录几个周期的传感器数据。比如我打算记录数据10秒，然后停下，让手机休息10秒，然后重新开始记录，……以这种模式工作1小时。我的问题是，如何让手机自动执行这个计划？我目前正在使用以下代码（来自[Android：如何在固定时间段内收集传感器值？](https://stackoverflow.com/questions/10119297/android-how-to-collect-sensor-values-for-a-fixed-period-of-time)），但它仅适用于一个周期，我必须在确定前一个周期完成后手动启动新周期。

```
public void onResume() {
mSensorManager.registerListener(mListener, mSensorAcceleration, SensorManager.SENSOR_DELAY_GAME);
mSensorManager.registerListener(mListener, mSensorMagnetic, SensorManager.SENSOR_DELAY_GAME);
Handler h = new Handler();
h.postDelayed(new Runnable() {

    @Override
    public void run() {
    //    do stuff with sensor values
        mSensorManager.unregisterListener(mListener);               
    }
}, 10000); 
```

...

任何帮助将不胜感激！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T22:24:25.923

我认为有更好，更正确的方法来实现这一点。具体来说，我认为让`Activity`实施是错误的`Runnable`。它在其公共接口中泄漏了应该保持私有（和隐藏）的逻辑。即，任何人都不应该`run()`在活动之外调用。我建议按如下方式实现它：

```
public class PostDelayedDemo extends Activity {
  // Declaration of sensor-related fields.

  private static final int PERIOD = 10000;
  private Handler handler;
  private final Runnable processSensors =
      new Runnable() {
         @Override
         public void run() {
           mSensorManager.registerListener(mListener, mSensorAcceleration, SensorManager.SENSOR_DELAY_GAME);
           mSensorManager.registerListener(mListener, mSensorMagnetic, SensorManager.SENSOR_DELAY_GAME);

           // Do work with the sensor values.

           mSensorManager.unregisterListener(mListener);

           // The Runnable is posted to run again here:
           handler.postDelayed(this, PERIOD);
         }
      };

  @Override
  protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    handler = new Handler();
  }

  @Override
  public void onResume() {
    super.onResume();

    handler.post(processSensors);
  }

  @Override
  public void onPause() {
    handler.removeCallbacks(processSensors);

    super.onPause();
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T13:32:05.813

步骤#1：让您的活动实现`Runnable`，而不是使用匿名内部类，移动您的`run()`方法以在活动上实现。

第 2 步：在您的`run()`方法中，使用`postDelayed()`. 这加上您对 的现有调用`postDelayed()`，将有效地设置对 的定期调用`run()`。

第 3 步：跟踪您是处于“传感器开启”还是“传感器关闭”模式，并且在 中`run()`，根据需要注册或取消注册侦听器。

第 4 步：在`onPause()`中，呼吁`removeCallbacks()`您`Handler`停止对 的定期调用`run()`。

[您将在此示例项目](https://github.com/commonsguy/cw-omnibus/tree/master/Threads/PostDelayed)中看到这种自行安排再次运行逻辑的示例。这是活动：

```
package com.commonsware.android.post;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.Toast;

public class PostDelayedDemo extends Activity implements Runnable {
  private static final int PERIOD=5000;
  private View root=null;

  @Override
  protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    root=findViewById(android.R.id.content);
  }

  @Override
  public void onResume() {
    super.onResume();

    run();
  }

  @Override
  public void onPause() {
    root.removeCallbacks(this);

    super.onPause();
  }

  @Override
  public void run() {
    Toast.makeText(PostDelayedDemo.this, "Who-hoo!", Toast.LENGTH_SHORT)
         .show();
    root.postDelayed(this, PERIOD);
  }
} 
```

# asp.net - 禁用特定 IP 的表单身份验证

> ID：13322385
> 
> 赞同：1
> 
> 时间：2012-11-10T13:18:08.833
> 
> 标签：asp.net, forms-authentication

截至目前，我对一些 asp.net 应用程序进行了表单身份验证。如果 IP 是本地的，即 192.168.1.X，我不想执行身份验证。是否可以以这种方式设置表单身份验证？这还会带来哪些安全问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T13:55:24.867

您可以在您的身份验证页面中检查请求是否来自 IP - 192.168.1.X。如果请求来自 IP - 192.168.1.X，则设置表单身份验证 cookie 并重定向到您的默认页面。

# ipad - 与用户行为相关的响应式 Web 应用程序设计

> ID：13322391
> 
> 赞同：0
> 
> 时间：2012-11-10T13:19:25.090
> 
> 标签：ipad, user-interface

我们构建了一个 webapp。我们不知道谁会真正使用该应用程序。有些人会在电脑上使用它，有些人会在 iPad 上使用它。此外，一位用户将登录并花费一些时间来完成所有给定的任务。在 iPad 上，有经验的用户显然会期待缩放和擦除效果，而没有经验的用户会更喜欢与桌面类似的行为。我想我会尝试实现一种算法来检测用户的经验，并将用户分类到相关的配置文件中。

我在哪里可以阅读有关此主题的信息？在此先感谢您提供一些指向相关文章的链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T16:49:38.683

好的，我做了一些研究，“用户建模”似乎是一个好的开始。

# flash - Actionscript 3，执行打印作业后文件更改

> ID：13322393
> 
> 赞同：2
> 
> 时间：2012-11-10T13:20:08.223
> 
> 标签：flash, actionscript, printing, sprite, stage

我有一个按钮，这个按钮的相关功能是打印舞台的某些部分。问题是，在打印后，该特定部分作为图像出现在舞台顶部。我已经使用 removechild 从舞台上删除了精灵，但我认为问题出在其他地方。如果有人可以帮助我，我将不胜感激。

```
var printJob:PrintJob = new PrintJob();
var options:PrintJobOptions = new PrintJobOptions();
options.printAsBitmap = false;

printJob.start();
var bitmapData:BitmapData = new BitmapData(stage.stageWidth,stage.stageHeight);
bitmapData.draw(stage);
var bitmapDataA:BitmapData = new BitmapData(700,460);
bitmapDataA.copyPixels(bitmapData, new Rectangle(0, 270, 700, 800), new Point(0, 0));

//convert bitmapdata to bitmap to sprite
var screenShot:Bitmap = new Bitmap(bitmapDataA);
addChild(screenShot);
var axSprite:Sprite = new Sprite();
axSprite = (bitmapToSprite(screenShot));

//========== printjob bug fix - prevent blank pages: ==========
axSprite.x = 2000;//keep it hidden to the side of the stage
//axSprite.y = 2000;
stage.addChild(axSprite);
//add to stage - prevents blank pages;
//=============================================================

var myScale:Number;
myScale = Math.min(printJob.pageWidth/axSprite.width, printJob.pageHeight/axSprite.height);
axSprite.scaleX = axSprite.scaleY = myScale;
var printArea:Rectangle = new Rectangle(0,0, printJob.pageWidth/myScale, printJob.pageHeight/myScale);

printJob.addPage(axSprite, printArea, options);
printJob.send();

stage.removeChild(axSprite);
axSprite = null;
printJob = null; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T21:18:07.840

您正在将`screenShot`实例添加到`displayList`此处：

```
//convert bitmapdata to bitmap to sprite
var screenShot:Bitmap = new Bitmap(bitmapDataA);
addChild(screenShot);
var axSprite:Sprite = new Sprite();
axSprite = (bitmapToSprite(screenShot)); 
```

我不确定你为什么需要这样做，但如果你这样做，请确保稍后再次删除它：

```
stage.removeChild(axSprite);
removeChild(screenShot);
axSprite = null;
printJob = null; 
```

# eclipse - 无法在 Eclipse (Mac OS X) 中启动 Tomcat - java.net.BindException：无法分配请求的地址

> ID：13322394
> 
> 赞同：2
> 
> 时间：2012-11-10T13:20:17.457
> 
> 标签：eclipse, macos, tomcat

我在 Mac OS X 10.8.2 上的 Eclipse 上使用 Tomcat v.7.0 时遇到问题。我认为问题是我在同一个笔记本上运行了另一个旧版本的 Tomcat。但我无法找到它并关闭它/杀死它。

当我尝试在 Eclipse 上启动 Tomcat 时，出现以下错误：

```
 Nov 10, 2012 2:45:45 PM org.apache.catalina.core.StandardServer await
    SEVERE: StandardServer.await: create[localhost:8005]: 
    java.net.BindException: Can't assign requested address
        at java.net.PlainSocketImpl.socketBind(Native Method)
        at java.net.PlainSocketImpl.bind(PlainSocketImpl.java:383)
        at java.net.ServerSocket.bind(ServerSocket.java:328)
        at java.net.ServerSocket.<init>(ServerSocket.java:194)
        at org.apache.catalina.core.StandardServer.await(StandardServer.java:427)
        at org.apache.catalina.startup.Catalina.await(Catalina.java:766)
        at org.apache.catalina.startup.Catalina.start(Catalina.java:712)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:322)
        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:451) 
```

完整日志如下。

我尝试使用聚光灯和程序 Find Any File ( [http://apps.tempel.org/FindAnyFile/index.php](http://apps.tempel.org/FindAnyFile/index.php) ) 来查找我的 Tomcat 安装位置。我寻找关键字“catalina.sh”并删除了这些发现的所有父文件夹。我还删除了我的 eclipse 工作区并重新安装了 eclipse。启动我的笔记本。没有帮助。

当我进行端口扫描时，它没有显示任何内容。看截图：

![在此处输入图像描述](../Images/7cc306e51c2a57518f5f96abdb2d5ac1.png)

请告知我应该如何找出 Tomcat 的问题以及如何删除它。

（我是 Java EE 和 Mac OSX 的新手）

```
 Nov 10, 2012 2:45:44 PM org.apache.catalina.core.AprLifecycleListener init
    INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: .:/Library/Java/Extensions:/System/Library/Java/Extensions:/usr/lib/java
    Nov 10, 2012 2:45:44 PM org.apache.coyote.AbstractProtocol init
    INFO: Initializing ProtocolHandler ["http-bio-8080"]
    Nov 10, 2012 2:45:44 PM org.apache.coyote.AbstractProtocol init
    INFO: Initializing ProtocolHandler ["ajp-bio-8009"]
    Nov 10, 2012 2:45:44 PM org.apache.catalina.startup.Catalina load
    INFO: Initialization processed in 1553 ms
    Nov 10, 2012 2:45:44 PM org.apache.catalina.core.StandardService startInternal
    INFO: Starting service Catalina
    Nov 10, 2012 2:45:44 PM org.apache.catalina.core.StandardEngine startInternal
    INFO: Starting Servlet Engine: Apache Tomcat/7.0.32
    Nov 10, 2012 2:45:45 PM org.apache.coyote.AbstractProtocol start
    INFO: Starting ProtocolHandler ["http-bio-8080"]
    Nov 10, 2012 2:45:45 PM org.apache.coyote.AbstractProtocol start
    INFO: Starting ProtocolHandler ["ajp-bio-8009"]
    Nov 10, 2012 2:45:45 PM org.apache.catalina.startup.Catalina start
    INFO: Server startup in 719 ms
    Nov 10, 2012 2:45:45 PM org.apache.catalina.core.StandardServer await
    SEVERE: StandardServer.await: create[localhost:8005]: 
    java.net.BindException: Can't assign requested address
        at java.net.PlainSocketImpl.socketBind(Native Method)
        at java.net.PlainSocketImpl.bind(PlainSocketImpl.java:383)
        at java.net.ServerSocket.bind(ServerSocket.java:328)
        at java.net.ServerSocket.<init>(ServerSocket.java:194)
        at org.apache.catalina.core.StandardServer.await(StandardServer.java:427)
        at org.apache.catalina.startup.Catalina.await(Catalina.java:766)
        at org.apache.catalina.startup.Catalina.start(Catalina.java:712)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:322)
        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:451)
    Nov 10, 2012 2:45:45 PM org.apache.coyote.AbstractProtocol pause
    INFO: Pausing ProtocolHandler ["http-bio-8080"]
    Nov 10, 2012 2:45:47 PM org.apache.coyote.AbstractProtocol pause
    INFO: Pausing ProtocolHandler ["ajp-bio-8009"]
    Nov 10, 2012 2:45:49 PM org.apache.catalina.core.StandardService stopInternal
    INFO: Stopping service Catalina
    Nov 10, 2012 2:45:49 PM org.apache.coyote.AbstractProtocol stop
    INFO: Stopping ProtocolHandler ["http-bio-8080"]
    Nov 10, 2012 2:45:51 PM org.apache.coyote.AbstractProtocol stop
    INFO: Stopping ProtocolHandler ["ajp-bio-8009"]
    Nov 10, 2012 2:45:53 PM org.apache.coyote.AbstractProtocol destroy
    INFO: Destroying ProtocolHandler ["http-bio-8080"]
    Nov 10, 2012 2:45:53 PM org.apache.coyote.AbstractProtocol destroy
    INFO: Destroying ProtocolHandler ["ajp-bio-8009"] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-07-12T12:46:25.033

我通过指定解决了这个问题

`<Server address="0.0.0.0" port="8005" shutdown="SHUTDOWN">`

在 conf/server.xml。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T10:41:58.593

您已经在尝试启动 Tomcat 的同一端口上运行了一些东西。

```
 sudo lsof -i :8080 # checks port 80 
```

默认值为 8080，它在 Tomcat conf 目录的 server.xml 中设置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-01T19:07:00.707

添加

```
-Djava.net.preferIPv4Stack=true 
```

我为我`CATALINA_OPTS`解决了这个问题。显然 localhost 没有在 IPv6 上设置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-11T10:27:37.963

FAF的作者在这里:)

我不是 Tomcat 专家，但我建议您订阅 lists.apple.com 上的“Macos-x-server”列表并在那里寻求帮助。

另外，Tomcat 曾经在那个系统上运行过吗？如果没有，也许你配置了一个非法端口。尝试将端口号更改为 1024 以上的一个，看看是否有帮助。

最后，我认为您在错误的网站上提问。这是针对编程问题的。在 SO 旁边还有其他 OSX/Server 特定站点可能更好地询问这个问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-18T12:05:46.543

检查您是否只有一台网络设备在运行。一旦我将 WiFi 连接切换为仅在工作时使用以太网连接，我的问题就得到了解决。在家里，WiFi 工作正常，因为这是我在那里唯一的连接。

不知道为什么会发生这种情况，我猜是 Tomcat 对设备感到困惑并错误地分配了端口。

# javascript - Youtube iframe api检查视频是否存在

> ID：13322397
> 
> 赞同：1
> 
> 时间：2012-11-10T13:20:54.563
> 
> 标签：javascript, jquery, youtube, youtube-api

我正在处理一个简单的页面，该页面有一个文本输入，用户可以在其中添加他们想要插入页面的 youtube 视频的 ID，然后我调用 youtube 的 iframe api 来加载视频。但是，如果用户添加了一个不存在的 id，我会得到一个黑屏。

我希望有人知道在加载视频之前检查视频是否存在的方法。

这是我的代码：

```
$(document).ready(function() {
  $('#loadVid').click(function() {
     var player;
     var urlVid = $('#urlVid').val(); //GET THE VIDEO CODE FROM THE TEXT INPUT

     player = new YT.Player('player', {
          height: '390',
          width: '640',
          videoId: urlVid,
          events: {
            'onReady': onPlayerReady,
            'onStateChange': onPlayerStateChange
          }
     });
  });
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-10T13:31:00.777

根据[文档](https://developers.google.com/youtube/iframe_api_reference?hl=en#Events)*onError*应该给你这样的信息

> **100** – 未找到请求的视频。当视频已被删除（出于任何原因）或被标记为私有时，会发生此错误。

将 onError 事件处理程序添加到事件对象

```
events: {
  'onReady': onPlayerReady,
  'onStateChange': onPlayerStateChange,
  'onError': function(errEvent) {
      var errCode = errEvent.data;
      if(errCode == 100) {
          alert('Video Not Found');
      }
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T10:13:00.963

> 这里 $videoId 包含 yuotube url 的视频 id

```
public function checkVideoExists() {
        $headers = get_headers('http://gdata.youtube.com/feeds/api/videos/' . $videoId);
        if (!strpos($headers[0], '200')) {
            echo "The YouTube video you entered does not exist";
            return false;
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T13:32:36.047

只需在打开播放器之前触发对 URL 的测试 Ajax 请求。如果 Youtube 页面视频不存在，它会返回 404 标头（我刚刚使用不存在的视频 URL 对此进行了测试）。

如果你使用 $.ajax 方法，你可以在成功回调中插入播放器加载函数，并在错误回调中触发错误警报（如果响应头是 4xx 或 5xx 则应该调用它）

# apache-flex - 尝试将 arrayList 分配给 List 组件数据源时出现“术语未定义”错误

> ID：13322400
> 
> 赞同：0
> 
> 时间：2012-11-10T13:21:08.260
> 
> 标签：apache-flex, actionscript, datasource, runtime-error

我正在创建一个在线游戏，人们登录然后显示当前玩家列表。当用户进入“房间”时，它会调度一个 SFSEvent，其中包含一个 Room 对象，其中用户列表作为该房间中的 User 对象。作为该事件的回调函数，我获取当前用户列表，它是一个数组，切换 View Stack 子索引，然后将用户列表数组包装在 ArrayList 中，然后将其分配给 MXML Spark List 组件的数据源。这是我的代码：

我的 Actionscript 代码部分（PreGame.as）：

```
private function onRoomJoin(event:SFSEvent):void
{
    const room:Room = this._sfs.getRoomByName(PREGAME_ROOM);

    this.selectedChild = waitingRoom;

    /** I know I should be using event listeners
     *  but this is a temporary fix, otherwise
     *  I keep getting null object errors
     *  do to the li_users list not being
     *  created in time for the dataProvider assignment **/
    setTimeout(function ():void {
        const userList:ArrayList = new ArrayList(room.userList);
        this.li_users.dataProvider = userList;  // This is where the error gets thrown
    },1000);
} 
```

我的 MXML 代码：

```
<?xml version="1.0" encoding="utf-8"?>
    <mx:ViewStack xmlns:fx="http://ns.adobe.com/mxml/2009" 
        xmlns:s="library://ns.adobe.com/flex/spark" 
        xmlns:mx="library://ns.adobe.com/flex/mx"
        initialize="preGame_initializeHandler(event)"
        >

        <fx:Script source="PreGame.as"/>

        <s:NavigatorContent id="nc_loginScreen">

            /** Login Screen Code **/

        </s:NavigatorContent>

        /** Start of Waiting Room code **/
        <s:NavigatorContent id="waitingRoom">
            <s:Panel id="pn_users"
                     width="400" height="400"
                     title="Users">

                /** This is the List in question **/
                <s:List id="li_users"
                        width="100%" height="100%"/>

            </s:Panel>
        </s:NavigatorContent>
    </mx:ViewStack> 
```

但是，我不断收到此错误：

```
TypeError: Error #1010: A term is undefined and has no properties 
```

任何想法我做错了什么？arrayList 有数据，所以我知道它不是空的/null。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T22:55:30.900

使用数据绑定解决时序问题：

```
<s:List id="li_users" dataProvider="{users}" width="100%" height="100%"/> 
```

然后在你的脚本中：

```
[Bindable]
public var users:ArrayList;

private function onRoomJoin(event:SFSEvent):void
{
    public room:Room = this._sfs.getRoomByName(PREGAME_ROOM);
    this.selectedChild = waitingRoom;
    users = new ArrayList(room.userList);
} 
```

# c++ - 将语法与匿名模板类型混淆？

> ID：13322405
> 
> 赞同：5
> 
> 时间：2012-11-10T13:21:46.100
> 
> 标签：c++, c++11

```
template <class T, class U> decltype(*(T*)(0) * *(U*)(0)) mul(T x, U y) {
   return x * y;
} 
```

这段代码取自 Stroustrup 的[C++11 FAQ](http://www.stroustrup.com/C++11FAQ.html#suffix-return)。我理解它的作用，就是将两个不同类型的对象相乘。令我困惑的是模板参数和函数定义之间的语法。里面发生了什么`decltype`？我认为它正在取消引用`T`初始化为 0 的未命名指针，并将其乘以`U`以相同方式取消引用和初始化的未命名指针。我对吗？

好吧，如果这是正在发生的事情，那么使用指针、取消引用和额外的括号不是多余的吗？我不能在保持预期效果的同时初始化这样的类型吗？：

```
template <class T, class U> decltype(T(0) * U(0)) mul(T x, U y) {
   return x * y;
} 
```

这对我来说看起来更干净，并且在将两个数字相乘时*确实*具有相同的效果，就像第一个一样......

```
mul(4, 3); // 12 
```

那么为什么 Stroustrup 坚持使用复杂的指针、解引用和初始化语法呢？当然，这是在他介绍新`auto`语法之前。但无论如何，**我的问题是**：上述两种类型初始化形式有什么区别吗？他在哪里使用指针并立即取消引用它们，而不是简单地做我所做的，即初始化没有指针或取消引用的类型？任何回应表示赞赏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-10T14:05:00.553

你的版本*不*等价。

1.  您的版本假设两者都`T`可以`U`从`0`. 从矩阵中期望这一点显然是错误的，但它们可以相乘。
2.  `T(0)`产生一个临时对象（可能绑定到`T&&`），同时`*(T*(0))`产生对现有对象（即`T&`）的引用，因此可能会选择不同的运算符。

然而，Stroustrup 的版本和您的版本都没有最终*在实践*中使用。在编译器实现的等效级别，可以使用：

```
template <typename T, typename U>
decltype(std::declval<T>() * std::declval<U>()) mul(T x, U y); 
```

但它未能利用**后期返回类型**规范，该规范旨在允许在函数的参数声明*之后*`auto f(int, int) -> int`推迟返回类型的声明： . 一旦声明了参数，就可以*使用*它们，这对`decltype`!

```
template <typename T, typename U>
auto mul(T x, U y) -> decltype(x * y); 
```

后一种形式保证选择与函数体相同的运算符重载，但代价是重复（不幸的是）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-10T13:26:36.603

您的代码版本假设 T 和 U 具有默认构造函数。Stroustrup 版本没有，它通过取消引用空指针来创建一个虚拟对象。这当然无关紧要，因为该代码并不是要执行的，它只是要被解析以知道结果类型。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-10T13:27:10.323

`decltype`内容是未评估的上下文；那里有什么并不重要，只要它有一个类型。想一想`T`这样定义：

```
struct T
{
    int operator*(const U &) { return 2; }
}; 
```

它没有构造函数`int`或任何`int`可转换为的类型；因此，`T(0)`即使在 的未评估上下文中，也不会产生对象`decltype`。因此，使用未评估的空引用可能是获得正确类型的最简单方法。

底线：你不知道构造函数做什么`T`和`U`有什么，所以你应该使用引用正确类型的虚拟对象的空引用。

# ruby-on-rails - 将 2 个动作定向到同一个视图，Ruby on Rails

> ID：13322407
> 
> 赞同：2
> 
> 时间：2012-11-10T13:21:58.120
> 
> 标签：ruby-on-rails

我设置了两个操作来从数据库中获取特定项目，如下所示：

路线.rb

```
match 'bibles' => 'documents#bibles'
match 'postcards' => 'documents#postcards' 
```

文档控制器.rb

```
 def bibles
   @pagetitle = "Browse all Bibles"
   @documents = Document.where(:document_type_id => 1).paginate(:page =>params[:page], :order =>'id desc', :per_page =>50)
 end

def postcards
  @pagetitle = "Browse all Postcards"
  @documents = Document.where(:document_type_id => 3).paginate(:page =>params[:page], :order =>'id desc', :per_page =>50)
end 
```

它们呈现一个特定的视图，两者都包含相同的代码，`bibles.html.erb`并且`postcards.html.erb`. 我需要这个指向相同的观点。是否有要添加到路由的参数来执行此操作，或者我的路由是否不正确？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T13:26:32.997

只需添加 `render "documents"`到您的操作中，并命名您的视图`documents.html.erb`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-10T13:28:53.547

在每个方法的末尾添加：

```
render "documents/index" 
```

然后创建视图`app/views/documents/index.html.erb`，您就可以开始了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-10T13:35:59.810

使用`render`您可以指定要渲染的部分。[在api 文档](http://api.rubyonrails.org/classes/ActionView/PartialRenderer.html)中阅读更多信息

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-10T16:20:48.723

供我自己参考 - 另一种方式：

```
respond_to do |format|
  format.text {render :template=>"app/views/documents/index.html.erb" }
end 
```

# android - 获取附近所有可用WIFI网络的密码

> ID：13322409
> 
> 赞同：0
> 
> 时间：2012-11-10T13:22:00.327
> 
> 标签：android, wifi

我正在开发 Android TV 应用程序。有人能告诉我如何获取附近位置所有可用 WIFI 网络的密码吗？当用户输入密码时，我需要在将 WIFI 连接到设备之前检查 wifi 密码是否正确（由用户输入）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-10T13:27:11.640

> 有人可以告诉我如何获取附近位置所有可用 WIFI 网络的密码。

你没有。

> 在用户输入密码时，我需要在将 WIFI 连接到设备之前检查 wifi 密码是否正确（由用户输入）。

您可以通过尝试连接并查看它是否有效来做到这一点。

# c# - 在 ravendb 中更改数组名称？

> ID：13322421
> 
> 赞同：1
> 
> 时间：2012-11-10T13:23:48.650
> 
> 标签：c#, ravendb

我有 3 个实体，它们的关系是这样的：

```
public class Student
{
    public int Id { get; set; }

    public string FirstName { get; set; }

    public string Description { get; set; }

    public IList<StuInfo> StudentInfos { get; set; }
}

public class StuInfo
{
    public int Id { get; set; }

    public string BirthCityName { get; set; }

    public string NationalNo { get; set; }

    public IList<Country> Countries { get; set; }
}

public class Country
{
    public int CountryId { get; set; }

    public string CountryName { get; set; }
} 
```

在 raven db 数据中，您可以看到此架构：

```
{
  "Name": "Hassan",
  "Description": "mike smith",
  "StudentInfos": [
    {
      "Id": 1,
      "BirthCityName": "berlin",
      "NationalNo": "0064501256",
      "Countries": [
        {
          "CountryId": 1,
          "CountryName": "germany"
        },
        {
          "CountryId": 2,
          "CountryName": "Ghana"
        }
      ]
    }
  ]
} 
```

现在我想将国家数组重命名为 countryList 例如，它是一个数组

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T01:05:23.233

您可以重命名您的属性：

```
public IList<Country> countryList { get; set; } 
```

或使用属性标记您的`JsonProperty`属性：

```
[JsonProperty(PropertyName = "countryList")]
public IList<Country> Countries { get; set; } 
```

有关更多示例，请参阅[文档](http://ravendb.net/docs/client-api/advanced/custom-serialization)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T05:44:00.523

[http://ayende.com/blog/66563/ravenb-migrations-rolling-updates](http://ayende.com/blog/66563/ravendb-migrations-rolling-updates)

我在ayende 的网站上找到了一个帖子，但我不知道如何在代码中使用它，也不知道它在这种情况下是否有效？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-11T09:19:23.990

您想使用此功能： [http ://ayende.com/blog/157185/awesome-ravenb-feature-of-the-day-evil-patching](http://ayende.com/blog/157185/awesome-ravendb-feature-of-the-day-evil-patching)

请注意，您可以从工作室做到这一点：http: [//blog.hibernatingrhinos.com/12705/new-option-in-the-ravendb-studiondash-patching](http://blog.hibernatingrhinos.com/12705/new-option-in-the-ravendb-studiondash-patching)

# c - C 处理错误状态

> ID：13322424
> 
> 赞同：3
> 
> 时间：2012-11-10T13:24:21.210
> 
> 标签：c, error-handling

我正在用 C 编写程序，并且有`handleError(int errcode)`可用的功能。它所做的只是取消分配所有内存空间并调用`exit(errcode)`.

在程序中，我有 2 个选项。

1.  让所有函数向调用者返回错误代码。对返回的错误代码进行完整的处理链`main`并在此处进行处理。

2.  每当发生错误并且必须停止程序时，让大多数函数返回`void`并调用。`handleError`

什么是更具可读性、可管理性和性能明智的选择？

我们的团队在这件事上并不团结，我需要一些外界的看法。

编辑：

我要补充一些信息。错误将很少见，并且以这种方式检测到的任何错误都无法恢复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T13:35:41.417

我刚刚发布了一个[相关的问题](https://stackoverflow.com/questions/13322137/c-library-for-logging-warnings-error-reporting)。我只是想提一下[UDI](http://www.project-udi.org/)处理错误的方式：

*   分配一个错误结构，将其传递给您调用的函数
*   如果出现错误/警告，**每个**函数都会将自己的错误添加到结构中

通过这种方式，您可以跟踪错误并查看对该错误作出反应的各种组件。

底线：1。

# datagridview - 在 vb.net windows 窗体应用程序的 datagridview 中将布尔值解析为是/否

> ID：13322430
> 
> 赞同：0
> 
> 时间：2012-11-10T13:24:55.323
> 
> 标签：datagridview, vb.net-2010

我的 Windows 窗体应用程序的表单上有一个网格视图。它从数据源中获取价值。数据源包含一个字段“IsNew”。这在我的数据网格视图的列中显示“真”或“假”。我想为 True 显示“是”，为 False 显示“否”。是否可以？请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T18:43:55.283

如果你有一个 SELECT 语句，也许你可以尝试一个 DECODE；对于 MS SQL，它应该是：

SELECT CASE WHEN FieldA = 'A' THEN 'myA' ELSE 'myB' FROM myTable。

# javascript - 为什么 Chrome 和 FireFox 控制台打印“未定义”？

> ID：13322435
> 
> 赞同：3
> 
> 时间：2012-11-10T13:25:32.250
> 
> 标签：javascript, ecmascript-5

获取这个简单的 Test 对象并将其粘贴到控制台中。你会看到它说`undefined`。该对象正在工作，因为它也打印`123`，但它是`undefined`关于什么的？

**测试：**

```
var Test = new (function(){
    return {
        get testing(){
            return "123";
        }
    }
});

console.log(Test.testing); 
```

**控制台输出：**

```
123
undefined 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T13:29:03.803

那就是 的返回值`console.log`。

尝试

```
console.log(1); 
```

这使

```
1
undefined 
```

但是，如果您只键入

```
Test.testing 
```

那只给

```
"123" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T13:28:33.110

`undefined`是`console.log`调用的返回值。

# android - Android：将多层视频合成为一个新视频

> ID：13322449
> 
> 赞同：4
> 
> 时间：2012-11-10T13:27:19.253
> 
> 标签：android, video, buffer, layer, compositing

我在 Android 中使用 SurfaceViews、mediarecorder、VideoView 等对视频和图像有一些基本经验。但是我想做的是合成多层视频（通常顶层有一个 alpha 通道来暴露它后面的层）在缓冲区中并将结果保存到新的视频文件中。同样有用的是能够执行诸如“屏幕”、“乘法”或“叠加”之类的合成功能。

任何想法如何做到这一点？

# sql - 如何在 SQL Server 中正确地将日期转换为 ISO-8601 周数格式？

> ID：13322453
> 
> 赞同：2
> 
> 时间：2012-11-10T13:27:51.310
> 
> 标签：sql, sql-server, datepart

ISO-8601 规定周数的格式应为`YYYY-W##`- 请注意周数应为两位数，如 01、02、...

```
 SELECT cast(DATEPART(YYYY, CreationDate) as varchar) + '-W' + 
       cast(DATEPART(ISO_WEEK, GETDATE())` 

```

问题是这将周数设为 1、2、...

提取2020-W01的正确方法是什么，...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-11-16T13:20:41.343

原始问题文本与 ISO_WEEK 编号的简单格式问题有关，但我觉得这里有一个更大的问题，即年份部分的连接。简单地连接 DatePart YYYY 和 ISO_WEEK 将在第 1 周和/或第 53 周产生不正确（或至少是意外）的结果。值得注意的是，像 2014-12-31 这样的日期是第 1 周的一部分，但不是 2014-W01。它是 2015-W01 的一部分。同样，2016-01-01 将是 2015-W53 的一部分，而不是 2016-W53。为了确定 Iso Year-Week，必须更正年份以考虑到这一点：

```
With
    Dates (Date) As (
            Select Convert( date, N'2014-12-31' )
Union All   Select Convert( date, N'2015-01-01' )
Union All   Select Convert( date, N'2015-12-31' )
Union All   Select Convert( date, N'2016-01-01' )
    )
Select
    src.Date
,   Concat( Case
        When DatePart( Month, src.Date ) = 12 And DatePart( ISO_WEEK, src.Date ) = 1 Then DatePart( Year, src.Date ) + 1
        When DatePart( Month, src.Date ) = 1 And DatePart( ISO_WEEK, src.Date ) > 50 Then DatePart( Year, src.Date ) - 1
        Else DatePart( Year, src.Date )
    End, N'-W', Right( Concat( N'00', DatePart( ISO_WEEK, src.Date ) ), 2 ) ) As IsoYearWeek
From
    Dates src
; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-10T13:54:07.443

```
SELECT cast(DATEPART(YYYY, CreationDate) as varchar) + '-W' + Right('0'+cast(DATEPART(ISO_WEEK,CreationDate) as Varchar),2) 
```

# objective-c - AVAudioPlayer 导致 ARC 下的泄漏

> ID：13322465
> 
> 赞同：1
> 
> 时间：2012-11-10T13:29:37.150
> 
> 标签：objective-c, memory-leaks, automatic-ref-counting, avaudioplayer

我有一个类提供音乐播放器，在 ARC 下编译。这是初始化代码：

```
- (id) init{
  self = [super init];
  runningVolumeNotification = FALSE;

  MPMusicPlayerController *musicPlayer = [MPMusicPlayerController iPodMusicPlayer];
  systemVolume = musicPlayer.volume;

  NSString *myExamplePath = [[NSBundle mainBundle] pathForResource:@"servo" ofType:@"mp3"];
  AVAudioPlayer* p = [[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:myExamplePath] error:NULL];
  [[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryAmbient error:nil];
  [p prepareToPlay];
  [p stop];

  return self; 
```

}

Instruments 报告线路 100% 泄漏：

```
AVAudioPlayer* p = [[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:myExamplePath] error:NULL]; 
```

![在此处输入图像描述](../Images/f78fdef85718e678115540c7ab4cf012.png)

我不知道问题出在哪里！

# c++ - 如何正确使用 CFileDialog

> ID：13322466
> 
> 赞同：4
> 
> 时间：2012-11-10T13:30:00.127
> 
> 标签：c++, com, visual-studio-2012, sdl

我正在开发一个 SDL 应用程序，使用 VS2012，针对 Windows。

我想做以下事情： - 有一个文件打开对话框 - 有一个文件另存为对话框

为此，我实现了一些这样的功能：

```
#include <afxdlgs.h>
/// This function gets a path to save a file to from the user
/// \return             true if function succeeds, false otherwise
/// \param  pPath       String to save path in
/// \param  name        default file name
/// \param  extensions  default file extensions separated by |
///                     "Text File (*.txt)|*.txt|Document File (*.doc)|*.doc|All Files(*.*)|*.*||"
bool Prompt::fileOpen( std::string * pPath, const std::string & defaultName, const std::string & defaultExtension, const std::string & extensions )
{
    //return false;

    CFileDialog dlg(
        true,                                   // true for File Open dialog box
        defaultExtension.c_str(),               // The default file name extension
        defaultName.c_str(),                    // The default file name
        OFN_FILEMUSTEXIST | OFN_NOCHANGEDIR,    // bunch of flags http://msdn.microsoft.com/en-us/library/wh5hz49d.aspx
        extensions.c_str()
        );

    auto result = dlg.DoModal();
    if(result != IDOK) return false; // failed
    pPath->assign(dlg.GetPathName());
    return true;
} 
```

现在不幸的是，这会导致调试时出现编译问题：使用 /MD[d]（CRT dll 版本）构建 MFC 应用程序需要 MFC 共享 dll 版本。请#define _AFXDLL 或不要使用 /MD[d]

因此，在配置 > 常规 > 使用 MFC 下，我将其设置为“在共享 DLL 中使用 MFC”

现在它可以编译，但不能按预期工作。

我得到一个运行时异常：

App.exe 中 0x51A9A072 (mfc110d.dll) 处的未处理异常：0xC0000005：访问冲突读取位置 0x00000000。

winmain.cpp 第 28 行

```
if (!pThread->InitInstance()) 
```

基本上 pThread 是一个 nullptr

请注意，如果我删除包含

```
#include <afxdlgs.h> 
```

我的应用程序的 fileOpen 函数按预期工作。

我不知道如何解决这个问题，任何帮助都会很好。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T14:34:34.680

听起来您没有在程序的其余部分使用 MFC，那么为什么从这里开始呢？您可能应该改用[GetOpenFileName](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646927%28v=vs.85%29.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T13:57:36.670

问题是，你的 winmain-initialisation 没有运行，因为 stl 有它自己的 main-function。您可以在适当的地方调用 winmain 来设置事件循环和所有其他东西，或者拥有自己的 winmain，如那里所述： http://forums.libsdl.org/viewtopic.php?t=1513&sid= [be1738a196fe7ca5d72ea7a894ddc5b7](http://forums.libsdl.org/viewtopic.php?t=1513&sid=be1738a196fe7ca5d72ea7a894ddc5b7)

# java - 写入属性文件不起作用

> ID：13322472
> 
> 赞同：6
> 
> 时间：2012-11-10T13:30:26.690
> 
> 标签：java, eclipse, file, properties

我想写入 *.properties 文件。这就是我的代码我如何做到这一点：

```
 properties = loadProperties("user.properties");//loads the properties file
    properties.setProperty(username, password);
        try {
                properties.store(new FileOutputStream("user.properties"), null);
                System.out.println("Wrote to propteries file!" + username + " " + password); 
```

我没有得到异常，但我也没有将输出写入文件。

这也是我的文件结构：

![在此处输入图像描述](../Images/9047bed6aa03e48a72ba356a55246a53.png)

我很感谢你的回答！！！

**更新**

我加载我的属性文件：

```
 InputStream in = ClassLoader.getSystemResourceAsStream(filename); 
```

我的问题是，如何从特定路径加载它？

这是我的“新”文件结构：

![在此处输入图像描述](../Images/0c421b177c0cf7e7644e9349990fe82f.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T14:11:31.740

这是我的测试代码：

```
@Test
public void fileTest() throws FileNotFoundException, IOException {

    File file = null;

    Properties props = new Properties();

    props.setProperty("Hello", "World");

    URL url = Thread.currentThread().getContextClassLoader()
            .getResource("exceptions/user.properties");

    try {
        file = new File(url.toURI().getPath());

        assertTrue(file.exists());
    } catch (URISyntaxException e) {

        e.printStackTrace();
    }

    props.store(new FileOutputStream(file), "OMG, It werks!");

} 
```

它确实在我的 target/classes/exceptions 目录（在 maven/eclipse proyect 中）中创建并重写了一个文件，所以我猜它确实有效，但当然这没有在 JAR 文件中进行测试。

这是文件：

```
#OMG, It werks!
#Sat Nov 10 08:32:44 CST 2012
Hello=World 
```

另外，检查这个问题：[我如何将文件保存到类路径](https://stackoverflow.com/questions/4714645/how-can-i-save-a-file-to-the-class-path)

所以也许你想做的事情永远不会奏效。

# javascript - 有没有办法避免由于达到 Ext JS 应用程序的内存限制而导致 chrome 崩溃

> ID：13322474
> 
> 赞同：1
> 
> 时间：2012-11-10T13:30:41.073
> 
> 标签：javascript, google-chrome, extjs, memory-leaks

我正在尝试构建使用 websockets 的 Ext JS 应用程序。应用程序主要用于在 chrome 中运行，我注意到内存占用超过 200+ MB 并且 chrome 开始冻结。我使用 chrome://memory 来检查内存使用情况并进行一些配置。

但是，有什么方法可以让我以编程方式检测这种情况并避免浏览器崩溃。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T05:26:22.573

它会在 ExtJS 加载后立即冻结，还是当它冻结时您实际上正在为您的应用程序执行功能？可能是您的应用程序将过多的数据拉入客户端，在这种情况下，罪魁祸首不是 ExtJS。如果您正在执行客户端大小的数据缓存或分页，请确保您没有加载太多数据。

# wpf - 很多绑定，真的很慢，即使附加的 UIElement 不可见，绑定是否处于活动状态？

> ID：13322476
> 
> 赞同：2
> 
> 时间：2012-11-10T13:31:05.030
> 
> 标签：wpf, performance, data-binding, uielement

我正在开发一个严重依赖 DataBinding 的 WPF 应用程序。

基本上，该应用程序有几个选项卡表，每个选项卡表都有大约 50 个使用 DataBinding 到我的 ViewModel 的元素。一些绑定有点复杂，数据触发器和转换器根据绑定结果显示图像等等。

启动应用程序时性能很好，但是当我浏览每个选项卡时，它变得越来越慢（并且 CPU 使用率增加）。在我浏览了 10 个选项卡之后，应用程序几乎无法使用，每次绑定源触发 de PropertyChanged 事件时都会挂起几秒钟。

似乎针对不可见的视觉元素的绑定（因为它们位于与当前不同的选项卡表中）仍在处理、运行转换器和更新视觉控件。

有什么办法可以禁用它吗？实现我自己的 TabControl 将是一个选项，它禁用不可见选项卡的每个绑定，但还没有找到如何做到这一点。

任何其他建议将不胜感激！

附带说明一下，这可能很重要：每个绑定源每隔约 5 秒就会引发自己的 PropertyChanged，这是我们从视图模型中的设备读取值的时间。因此，每 5 秒左右，大约 300 个实现 INotifyPropertyChanged 的​​对象同时引发 PropertyChanged 事件，此时是应用程序冻结几秒钟的时间。

由于应用程序的性质，不能将更新速度减慢到 5 秒以上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T14:12:57.747

我不是 MVVM，但我认为在 MVVM 中只呈现了活动选项卡。

在非 MVVM 中，我为每个属性做的是检测它是否是活动选项卡，如果不是活动选项卡，那么我让它什么都不返回或返回一个默认值。 `TabControl`有财产`SelectedIndex`。

# asp.net - 将请求重定向到我的域

> ID：13322477
> 
> 赞同：0
> 
> 时间：2012-11-10T13:31:07.033
> 
> 标签：asp.net, dns, azure-web-app-service

我们将我们的 asp.net 网站发布到域 www.domainname.com。

如果他们试图打开 www.domainname.co.Uk 或 www.domainname.net，我们必须将用户重定向到我们的网站。

我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T13:27:50.293

在检查请求中的域后，您需要像 Enes 一样进行操作。

即搜索 HttpContext.Current.Request.Url 返回的字符串，看看你要的域名是否在这里，然后重定向到你想要的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T15:57:39.657

创建一个 asp.net 文件并`Response.Redirect("http://www.domainname.com");`到 page_load 或[看这里](http://www.networking4all.com/en/support/domain+names/domain+redirects/)

# time - Rust 中的基准测试程序

> ID：13322479
> 
> 赞同：94
> 
> 时间：2012-11-10T13:31:24.517
> 
> 标签：time, benchmarking, rust

如何在 Rust 中对程序进行基准测试？例如，我如何以秒为单位获得程序的执行时间？

* * *

## 回答 #1

> 赞同：119
> 
> 时间：2014-10-09T19:57:52.593

两年后可能值得注意（以帮助任何偶然发现此页面的未来 Rust 程序员）现在有一些工具可以将 Rust 代码作为测试套件的一部分进行基准测试。

（来自下面的指南链接）使用该`#[bench]`属性，可以使用标准的 Rust 工具对其代码中的方法进行基准测试。

```
extern crate test;
use test::Bencher;

#[bench]
fn bench_xor_1000_ints(b: &mut Bencher) {
    b.iter(|| {
        // Use `test::black_box` to prevent compiler optimizations from disregarding
        // Unused values
        test::black_box(range(0u, 1000).fold(0, |old, new| old ^ new));
    });
} 
```

对于命令`cargo bench`，它会输出如下内容：

```
running 1 test
test bench_xor_1000_ints ... bench:       375 ns/iter (+/- 148)

test result: ok. 0 passed; 0 failed; 0 ignored; 1 measured 
```

链接：

*   [Rust Book（关于基准测试的部分）](https://doc.rust-lang.org/1.4.0/book/benchmark-tests.html)
*   [“夜书”（关于`test`箱子的部分）](https://doc.rust-lang.org/nightly/unstable-book/library-features/test.html)
*   [测试::基准文档](https://doc.rust-lang.org/1.1.0/test/struct.Bencher.html)

* * *

## 回答 #2

> 赞同：58
> 
> 时间：2016-12-03T23:52:40.270

要在不添加第三方依赖项的情况下测量时间，您可以使用[`std::time::Instant`](https://doc.rust-lang.org/std/time/struct.Instant.html)：

```
fn main() {
    use std::time::Instant;
    let now = Instant::now();

    // Code block to measure.
    {
        my_function_to_measure();
    }

    let elapsed = now.elapsed();
    println!("Elapsed: {:.2?}", elapsed);
} 
```

* * *

## 回答 #3

> 赞同：53
> 
> 时间：2015-03-30T10:24:00.447

如果你只是想为一段代码计时，你可以使用[`time`](https://docs.rs/time/0.1.40/time/)crate。[不过time 同时被弃用](https://github.com/rust-lang-deprecated/time/issues/136)了。后续箱子是[`chrono`](https://crates.io/crates/chrono).

添加`time = "*"`到您的`Cargo.toml`.

添加

```
extern crate time;
use time::PreciseTime; 
```

在你的主要功能和

```
let start = PreciseTime::now();
// whatever you want to do
let end = PreciseTime::now();
println!("{} seconds for whatever you did.", start.to(end)); 
```

## 完整示例

### 货运.toml

```
[package]
name = "hello_world" # the name of the package
version = "0.0.1"    # the current version, obeying semver
authors = [ "you@example.com" ]
[[bin]]
name = "rust"
path = "rust.rs"
[dependencies]
rand = "*" # Or a specific version
time = "*" 
```

### 锈.rs

```
extern crate rand;
extern crate time;

use rand::Rng;
use time::PreciseTime;

fn main() {
    // Creates an array of 10000000 random integers in the range 0 - 1000000000
    //let mut array: [i32; 10000000] = [0; 10000000];
    let n = 10000000;
    let mut array = Vec::new();

    // Fill the array
    let mut rng = rand::thread_rng();
    for _ in 0..n {
        //array[i] = rng.gen::<i32>();
        array.push(rng.gen::<i32>());
    }

    // Sort
    let start = PreciseTime::now();
    array.sort();
    let end = PreciseTime::now();

    println!("{} seconds for sorting {} integers.", start.to(end), n);
} 
```

* * *

## 回答 #4

> 赞同：44
> 
> 时间：2019-08-03T19:49:27.940

有*几种方法*可以对你的 Rust 程序进行基准测试。对于大多数真正的基准测试，您应该使用适当的基准测试框架，因为它们有助于解决一些容易搞砸的事情（包括统计分析）。另请阅读最底部的“为什么编写基准测试很难”部分！

# 快速简单：`Instant`来自`Duration`标准库

要快速检查一段代码运行了多长时间，您可以使用[`std::time`](https://doc.rust-lang.org/stable/std/time/index.html). 该模块相当小，但它适用于简单的时间测量。您应该使用[`Instant`](https://doc.rust-lang.org/stable/std/time/struct.Instant.html)代替，[`SystemTime`](https://doc.rust-lang.org/stable/std/time/struct.SystemTime.html)因为前者是单调递增的时钟，而后者不是。示例（[**游乐场**](https://play.rust-lang.org/?version=stable&mode=release&edition=2018&gist=e6465b246529f2d6b4c93f4ea797edd3)）：

```
use std::time::Instant;

let before = Instant::now();
workload();
println!("Elapsed time: {:.2?}", before.elapsed()); 
```

[文档](https://doc.rust-lang.org/stable/std/time/struct.Instant.html#underlying-system-calls)`Instant`中指定了标准的底层平台特定实现。简而言之：目前（并且可能永远）您可以假设它使用平台可以提供的最佳精度（或非常接近它的东西）。根据我的测量和经验，这通常约为 20 ns。

如果`std::time`没有为您的案例提供足够的功能，您可以查看[`chrono`](https://crates.io/crates/chrono). 但是，为了测量持续时间，您不太可能需要那个外部板条箱。

# 使用基准测试框架

使用框架通常是一个好主意，因为它们试图防止你犯常见的错误。

### Rust 的内置基准测试框架（仅限每晚）

Rust 有一个方便的内置基准测试功能，遗憾的是截至 2019-07 仍然不稳定。您必须将`#[bench]`属性添加到您的函数并使其接受一个`&mut test::Bencher`参数：

```
#![feature(test)]

extern crate test;
use test::Bencher;

#[bench]
fn bench_workload(b: &mut Bencher) {
    b.iter(|| workload());
} 
```

执行`cargo bench`将打印：

```
running 1 test
test bench_workload ... bench:      78,534 ns/iter (+/- 3,606)

test result: ok. 0 passed; 0 failed; 0 ignored; 1 measured; 0 filtered out 
```

### 标准

crate[`criterion`](https://crates.io/crates/criterion)是一个在 stable 上运行的框架，但它比内置解决方案要复杂一些。它进行更复杂的统计分析，提供更丰富的 API，生成更多信息，甚至可以自动生成图表。

有关如何使用 Criterion 的更多信息，请参阅[“快速入门”部分。](https://github.com/bheisler/criterion.rs#Quickstart)

# 为什么编写基准测试很难

编写基准测试时有很多陷阱。一个错误可能会使您的基准测试结果毫无意义。以下是重要但通常被遗忘的要点的列表：

*   **使用优化编译**：`rustc -O3`或`cargo build --release`。当您使用 执行基准测试时`cargo bench`，Cargo 将自动启用优化。这一步很重要，因为优化和未优化的 Rust 代码之间通常存在很大的性能差异。

*   **重复工作负载**：只运行一次工作负载几乎总是无用的。有很多因素会影响您的时间安排：整体系统负载、操作系统运行情况、CPU 节流、文件系统缓存等等。所以尽可能多地重复你的工作量。例如，Criterion 运行每个基准测试至少 5 秒（即使工作负载只需要几纳秒）。然后可以分析所有测量的时间，平均值和标准偏差是标准工具。

*   **确保您的基准没有完全删除**：基准本质上是非常人为的。通常，您的工作量结果不会被检查，因为您只想测量持续时间。然而，这意味着一个好的优化器可以删除你的整个基准，因为它没有副作用（嗯，除了时间的流逝）。所以为了欺骗优化器，你必须以某种方式使用你的结果值，这样你的工作量就不会被删除。一个简单的方法是打印结果。更好的解决方案是类似[`black_box`](https://doc.rust-lang.org/stable/test/fn.black_box.html). 这个函数基本上对 LLVM 隐藏了一个值，因为[LLVM](https://en.wikipedia.org/wiki/LLVM)无法知道该值会发生什么。什么都没有发生，但 LLVM 不知道。这就是我想说的。

    好的基准测试框架在几种情况下使用块框。例如，给`iter`方法的闭包（对于内置方法和 Criterion 方法`Bencher`）可以返回一个值。该值会自动传递到`black_box`.

*   **注意常量值**：类似于上面的一点，如果您在基准测试中指定常量值，优化器可能会专门为该值生成代码。在极端情况下，您的整个工作负载可能会被常量折叠成一个常量，这意味着您的基准测试毫无用处。传递所有常量值`black_box`以避免 LLVM 优化过于激进。

*   **注意测量开销**：测量持续时间本身需要时间。这通常只有几十纳秒，但会影响您的测量时间。因此，对于所有快于几十纳秒的工作负载，您不应单独测量每个执行时间。您可以执行 100 次工作负载并测量所有 100 次执行所用的时间。将其除以 100 即可得出平均单次时间。上面提到的基准测试框架也使用了这个技巧。Criterion 也有一些方法可以测量具有副作用的非常短的工作负载（比如改变某些东西）。

*   **许多其他事情**：遗憾的是，我无法在这里列出所有困难。如果您想编写严肃的基准测试，请阅读更多在线资源。

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2012-11-10T22:04:49.723

> **这个答案已经过时了！**在基准测试方面，`time`板条箱没有任何优势`std::time`。请参阅下面的答案以获取最新信息。

* * *

[您可以尝试使用time crate](https://docs.rs/time/)对程序中的各个组件进行计时。

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2012-11-10T14:11:00.387

无论实现语言如何，找出程序执行时间的一种快速方法是`time prog`在命令行上运行。例如：

```
~$ time sleep 4

real    0m4.002s
user    0m0.000s
sys     0m0.000s 
```

最有趣的测量通常是`user`，它测量程序完成的实际工作量，而不管系统中发生了什么（这`sleep`是一个非常无聊的基准程序）。`real`测量经过的实际时间，并`sys`测量操作系统代表程序完成的工作量。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2012-11-11T10:55:48.110

目前，以下任何 Linux 功能都没有接口：

*   `clock_gettime(CLOCK_PROCESS_CPUTIME_ID, &ts)`
*   `getrusage`
*   `times`（手册页`man 2 times`：）

在 Linux 上测量 Rust 程序的 CPU 时间和热点的可用方法有：

*   `/usr/bin/time program`
*   `perf stat program`
*   `perf record --freq 100000 program; perf report`
*   `valgrind --tool=callgrind program; kcachegrind callgrind.out.*`

`perf report`和的输出`valgrind`取决于程序中调试信息的可用性。它可能不起作用。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-06-25T21:04:47.707

我为此创建了一个小箱子（[measure_time](https://crates.io/crates/measure_time)），它记录或打印直到范围结束的时间。

```
#[macro_use]
extern crate measure_time;
fn main() {
    print_time!("measure function");
    do_stuff();
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-12-29T13:35:03.673

测量执行时间的另一种解决方案是创建自定义类型，例如，`Drop`为它创建一个结构和实现特征。

例如：

```
struct Elapsed(&'static str, std::time::SystemTime);

impl Drop for Elapsed {
    fn drop(&mut self) {
        println!(
            "operation {} finished for {} ms",
            self.0,
            self.1.elapsed().unwrap_or_default().as_millis()
        );
    }
}

impl Elapsed {
    pub fn start(op: &'static str) -> Elapsed {
        let now = std::time::SystemTime::now();

        Elapsed(op, now)
    }
} 
```

并在某些功能中使用它：

```
fn some_heavy_work() {
  let _exec_time = Elapsed::start("some_heavy_work_fn");

  // Here's some code. 
} 
```

`_exec_time`当函数结束时，将调用drop 方法并打印消息。

# javascript - 在包含克隆的 dom 元素的数组上使用 jquery 选择器

> ID：13322481
> 
> 赞同：1
> 
> 时间：2012-11-10T13:31:49.337
> 
> 标签：javascript, jquery, jquery-selectors

如何在一组克隆的 dom 元素上使用 jQuery 选择器：

假设我创建了这样的数组：

```
var refDom = $(".items").clone(true, true); 
```

是否可以通过选择器返回一些元素，或者至少获取数组索引？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T13:35:24.663

当然，只需执行以下操作：

```
refDom.find('.somelement'); 
```

要通过索引访问元素，您可以执行以下操作：

```
refDom.eq(2).whatever(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T13:34:57.057

您可以使用常规选择器：

```
refDom.find(".your-selector") 
```

# java - 无法将 jar 添加到 OSGi 包

> ID：13322483
> 
> 赞同：1
> 
> 时间：2012-11-10T13:31:58.310
> 
> 标签：java, jar, jersey, osgi, classpath

又是一个愚蠢的问题。我相信这很容易，但这已经花了我很多时间而且我没有让它工作;(

我编写了一个工作原型来对服务器进行休息调用。为此，我使用“jersey-client-1.14.jar”。通过将其添加到 eclipse 项目类路径中效果很好。

现在我试图在 OSGi 包中做同样的事情。这些是我做的步骤：

1.  我在我的 OSGi 捆绑项目中创建了一个 /lib 文件夹。
2.  在该文件夹中添加了 jersey-client-1.14.jar。
3.  在类路径中的 MANIFEST.MF 中添加了 jar：Bundle-ClassPath: ., lib/jersey-client-1.14.jar
4.  检查它是否也正确添加到项目类路径中。
5.  在 Eclipse 工作区中，我没有编译错误。

在运行时，使用 Client.create(); 创建球衣客户端时出现 classdef not found 异常的现象；

```
!ENTRY org.eclipse.equinox.event 4 0 2012-11-08 23:14:43.975

将事件 org.osgi.service.event.Event [topic=openhab/command/Hue_Bulb_2] 调度到处理程序 org.openhab.binding.hue.internal.HueBinding@70f5f42b 时出现 !MESSAGE 异常

!堆栈 0

java.lang.NoClassDefFoundError：无法初始化类 com.sun.jersey.spi.service.ServiceFinder

在 com.sun.jersey.api.client.Client.init(Client.java:213)

在 com.sun.jersey.api.client.Client.access$000(Client.java:118)

在 com.sun.jersey.api.client.Client$1.f(Client.java:191)

在 com.sun.jersey.api.client.Client$1.f(Client.java:187)

在 com.sun.jersey.spi.inject.Errors.processWithErrors(Errors.java:193)

在 com.sun.jersey.api.client.Client.(Client.java:187)

在 com.sun.jersey.api.client.Client.(Client.java:159)

在 com.sun.jersey.api.client.Client.create(Client.java:669)

在 org.openhab.binding.hue.internal.bridge.HueBridge.getSettingsJson(HueBridge.java:64)

在 org.openhab.binding.hue.internal.bridge.HueBridge.pairBridgeIfNecessary(HueBridge.java:19)

在 org.openhab.binding.hue.internal.HueBinding.receiveCommand(HueBinding.java:37)

在 org.openhab.core.events.AbstractEventSubscriber.handleEvent(AbstractEventSubscriber.java:62)

在 org.eclipse.equinox.internal.event.EventHandlerWrapper.handleEvent(EventHandlerWrapper.java:197)

在 org.eclipse.equinox.internal.event.EventHandlerTracker.dispatchEvent(EventHandlerTracker.java:197)

在 org.eclipse.equinox.internal.event.EventHandlerTracker.dispatchEvent(EventHandlerTracker.java:1)

在 org.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent(EventManager.java:230)

在 org.eclipse.osgi.framework.eventmgr.ListenerQueue.dispatchEventSynchronous（ListenerQueue.java:148）

在 org.eclipse.equinox.internal.event.EventAdminImpl.dispatchEvent(EventAdminImpl.java:135)

在 org.eclipse.equinox.internal.event.EventAdminImpl.sendEvent(EventAdminImpl.java:78)

在 org.eclipse.equinox.internal.event.EventComponent.sendEvent(EventComponent.java:39)

在 org.openhab.core.internal.events.EventPublisherImpl.sendCommand(EventPublisherImpl.java:76)

在 org.openhab.ui.webapp.internal.servlet.CmdServlet.service(CmdServlet.java:115)

在 org.eclipse.equinox.http.servlet.internal.ServletRegistration.service(ServletRegistration.java:61)

在 org.eclipse.equinox.http.servlet.internal.ProxyServlet.processAlias(ProxyServlet.java:128)

在 org.eclipse.equinox.http.servlet.internal.ProxyServlet.service(ProxyServlet.java:60)

在 javax.servlet.http.HttpServlet.service(HttpServlet.java:848)

在 org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:598)

在 org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:486)

在 org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:231)

在 org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1065)

在 org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:413)

在 org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:192)

在 org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:999)

在 org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:117)

在 org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:250)

在 org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:149)

在 org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:111)

在 org.eclipse.jetty.server.Server.handle(Server.java:350)

在 org.eclipse.jetty.server.AbstractHttpConnection.handleRequest(AbstractHttpConnection.java:454)

在 org.eclipse.jetty.server.AbstractHttpConnection.headerComplete(AbstractHttpConnection.java:890)

在 org.eclipse.jetty.server.AbstractHttpConnection$RequestHandler.headerComplete(AbstractHttpConnection.java:944)

在 org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:630)

在 org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:230)

在 org.eclipse.jetty.server.AsyncHttpConnection.handle(AsyncHttpConnection.java:77)

在 org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:606)

在 org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:46)

在 org.eclipse.jetty.util.thread.QueuedThreadPool.runJob（QueuedThreadPool.java:603）

在 org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:538)

在 java.lang.Thread.run(Thread.java:680)

23:14:43.992 错误 OSGi[:98] - 将事件 org.osgi.service.event.Event [topic=openhab/command/Hue_Bulb_2] 调度到处理程序 org.openhab.binding.hue.internal.HueBinding@70f5f42b 时出现异常

java.lang.NoClassDefFoundError：无法初始化类 com.sun.jersey.spi.service.ServiceFinder

在 com.sun.jersey.api.client.Client.init(Client.java:213)

在 com.sun.jersey.api.client.Client.access$000(Client.java:118)

在 com.sun.jersey.api.client.Client$1.f(Client.java:191)

在 com.sun.jersey.api.client.Client$1.f(Client.java:187)

在 com.sun.jersey.spi.inject.Errors.processWithErrors(Errors.java:193)

在 com.sun.jersey.api.client.Client.(Client.java:187)

在 com.sun.jersey.api.client.Client.(Client.java:159)

在 com.sun.jersey.api.client.Client.create(Client.java:669)

在 org.openhab.binding.hue.internal.bridge.HueBridge.getSettingsJson(HueBridge.java:64)

在 org.openhab.binding.hue.internal.bridge.HueBridge.pairBridgeIfNecessary(HueBridge.java:19)

在 org.openhab.binding.hue.internal.HueBinding.receiveCommand(HueBinding.java:37)

```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T12:43:53.753

您还需要将 jersey-core 添加到捆绑包的类路径中，因为 jersey-client 将其作为依赖项。

如果需要，您可能还必须添加其他依赖项。如果不愉快，这个过程相当容易：

1.  添加一个罐子
2.  运行应用程序
3.  查看没有找到什么类，找到那个类所在的jar，添加到bundle classpath，回到2

不过有一件事：Jersey jars 是 OSGi 就绪的，所以您不妨将 jersey-client.jar 和 jersey-core.jar 添加到您的 taget 平台并导入所需的包。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T07:48:46.663

查看您的辅助查询，我想您只想知道发生了什么:-)

OSGi*围着*JAR 来创建模块。默认情况下，栅栏是不可穿透的，包（jar）之外的任何类对内部的类都是可见的（能够从中加载类），并且外人看不到包内的任何东西。优势应该是显而易见的：你可以改变内心，让内心愉悦，因为外面一无所知。

但是，在现实生活中，您需要在栅栏上打一些洞才能与他人合作。在您的情况下，捆绑包尝试加载 com.sun.jersey.spi.service.ServiceFinder 但由于没有合适的孔而遇到围栏。

OSGi 中的“漏洞”是包，它们是共享原子。您在清单中列出这些包。Import-Package 标头指示您需要从外部世界看到的包，而 Export-Package 标头定义了哪些包（以及在什么版本下）这些包对其他包可见。

显然您不想手动计算导入，因为这些已经在您的类文件中，因此有一个工具 bnd（我是作者）可以从 maven、ant、gradle 等中使用。它需要一个配方并使用适当的元数据计算生成的捆绑包。此工具得到 bndtools Eclipse 插件的广泛支持，这是一个非常好的环境，可以了解更多有关 OSGi 和这些问题的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T14:21:04.993

先生，在 Eclipse 中，您已经添加了不同的包，例如。com.sun.jersey.spi.service.ServiceFinder 。要启动您的服务，您必须启动其他服务。你捆绑的依赖。就像我有一个 jar，它依赖于 rxtxcomm_api-2.1.7.jar。我必须初始化它，或者你可以说它是 intiat。在我服务之前。请检查一下。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-11T09:04:31.267

在 OSGi 中嵌入 jars 是一种不好的风格。通常，只有在没有其他方法的情况下才应该这样做。嵌入 jar 很容易导致类路径问题，因为包可能来自不同的包。你想嵌入罐子有什么特殊原因吗？Jersey 从 1.2 版开始就完全支持 OSGi。有关如何使用它[的示例](http://jersey.java.net/nonav/documentation/latest/osgi.html)，请参阅文档。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-11T09:44:09.520

大多数 OSGi 容器都带有开箱即用的 JAX-RS 实现——比如 Jersey 或其他。例如，我们正在使用 Apache ServiceMix，它可以方便地提供 Apache CXF。

*   你用的是什么容器？
*   您真的必须将 Jersey 与您的应用程序捆绑在一起吗？

如果您出于某种原因需要捆绑 Jersey，请提供清单文件的示例。

*   您是否考虑过使用 Maven-Bundle-Plugin？

# bash - 如何在 Linux 和 OS X 上获取本地机器的主 IP 地址？

> ID：13322485
> 
> 赞同：388
> 
> 时间：2012-11-10T13:32:11.317
> 
> 标签：bash, unix, ip, ifconfig

我正在寻找一个命令行解决方案，它将返回本地主机的主要（第一个）IP 地址，而不是 127.0.0.1

该解决方案至少适用于 Linux（Debian 和 RedHat）和 OS X 10.7+

我知道`ifconfig`两者都可用，但其输出在这些平台之间并不一致。

* * *

## 回答 #1

> 赞同：542
> 
> 时间：2012-11-10T13:39:13.090

用于`grep`过滤 IP 地址`ifconfig`：

`ifconfig | grep -Eo 'inet (addr:)?([0-9]*\.){3}[0-9]*' | grep -Eo '([0-9]*\.){3}[0-9]*' | grep -v '127.0.0.1'`

或与`sed`：

`ifconfig | sed -En 's/127.0.0.1//;s/.*inet (addr:)?(([0-9]*\.){3}[0-9]*).*/\2/p'`

如果您只对某些接口、wlan0、eth0 等感兴趣，那么：

`ifconfig wlan0 | ...`

您可以在您的命令中使用别名`.bashrc`来*创建*您自己的命令`myip`，例如。

`alias myip="ifconfig | sed -En 's/127.0.0.1//;s/.*inet (addr:)?(([0-9]*\.){3}[0-9]*).*/\2/p'"`

一个更简单的方法是`hostname -I`（`hostname -i`对于旧版本，`hostname`但请参阅评论）。但是，这仅适用于 Linux。

* * *

## 回答 #2

> 赞同：268
> 
> 时间：2014-09-15T15:08:03.123

以下将适用于 Linux，但不适用于 OSX。

这根本不依赖 DNS，即使`/etc/hosts`设置不正确也可以工作（`1`是 的简写`1.0.0.0`）：

```
ip route get 1 | awk '{print $NF;exit}' 
```

或避免`awk`和使用谷歌的公共 DNS`8.8.8.8`为明显：

```
ip route get 8.8.8.8 | head -1 | cut -d' ' -f8 
```

一种不太可靠的方法：（见下面的评论）

```
hostname -I | cut -d' ' -f1 
```

* * *

## 回答 #3

> 赞同：250
> 
> 时间：2013-09-19T21:58:53.260

对于 linux 机器（不是 OS X）：

```
hostname --ip-address 
```

* * *

## 回答 #4

> 赞同：82
> 
> 时间：2017-10-04T12:40:42.097

在 Linux 上

```
hostname -I 
```

在 macOS 上

```
ipconfig getifaddr en0 
```

* * *

`hostname -I`[可以以不可靠的`hostname`](https://manpages.debian.org/hostname/hostname.1.en.html)顺序返回多个地址（参见[手册页](https://manpages.debian.org/hostname/hostname.1.en.html)），但对我来说它只是返回`192.168.1.X`，这就是你想要的。

* * *

## 回答 #5

> 赞同：79
> 
> 时间：2018-03-29T09:43:01.363

## 解决方案

```
$ ip -o route get to 8.8.8.8 | sed -n 's/.*src \([0-9.]\+\).*/\1/p'
192.168.8.16 
```

## 解释

查询网络信息的*正确*方法是使用`ip`：

*   `-o`单线输出
*   `route get to`获取到目的地的实际内核路由
*   `8.8.8.8`谷歌IP，但可以使用你想达到的真实IP

例如`ip`输出：

```
8.8.8.8 via 192.168.8.254 dev enp0s25 src 192.168.8.16 uid 1000 \   cache 
```

要提取`src`ip，`sed`是最轻便且与正则表达式支持最兼容的：

*   `-n`默认不输出
*   `'s/pattern/replacement/p'`仅匹配模式和打印替换
*   `.*src \([0-9.]\+\).*`匹配内核使用的src IP，达到`8.8.8.8`

例如最终输出：

```
192.168.8.16 
```

## 其他答案

我认为前面的答案对我来说都不够好，因为它们不能在最近的机器上工作（Gentoo 2018）。

我在前面的答案中发现的问题：

*   在命令输出中使用位置列；
*   不推荐使用`ifconfig`，例如，不要列出多个 IP；
*   用于`awk`sed 可以更好地处理的简单任务；
*   `ip route get 1`不清楚，实际上是`ip route get to 1.0.0.0`
*   使用`hostname`命令，在所有设备中都没有`-I`选项，`127.0.0.1`在我的情况下返回。

* * *

## 回答 #6

> 赞同：38
> 
> 时间：2012-11-10T13:57:49.887

## 已编辑 ( ~~2014-06-01~~ 2018-01-09 2021-07-25)

从前一段时间，我使用现在*更新* `ip`的工具。但是在[bash](/questions/tagged/bash "显示标记为“bash”的问题")下，我会简单地做：

```
read -r _{,} gateway _ iface _ ip _ < <(ip r g 1.0.0.0) 
```

然后

```
printf '%-12s %s\n'  gateway $gateway iface $iface ip $ip
gateway      192.168.1.1
iface        eth0
ip           192.168.1.37 
```

从那里，面具是：

```
while IFS=$' /\t\r\n' read lne lip lmask _;do
    [ "$lne" = "inet" ] && [ "$lip" = "$ip" ] && mask=$lmask
done < <(ip a s dev $iface)

echo Mask is $mask bits.
Mask is 24 bits. 
```

然后，如果您想将掩码视为 IP：

```
printf -v msk '%*s' $mask ''
printf -v msk %-32s ${msk// /1}
echo $((msk=2#${msk// /0},msk>>24)).$((msk>>16&255)).$((msk>>8&255)).$((msk&255))
255.255.255.0 
```

## 已编辑 ( ~~2014-06-01~~ 2018-01-09)

为了更强大的配置，在每个接口上配置了许多接口和许多 IP，我编写了一个*纯 bash*脚本（不基于*`127.0.0.1`*）来查找正确的接口**和**ip，基于*`default route`*. 我将此脚本发布在此答案的最底部。

### 介绍

由于两个操作系统都默认安装了[bash](/questions/tagged/bash "显示标记为“bash”的问题")，因此 Mac 和 Linux 都有一个 bash 提示：

使用以下方法可以防止语言环境问题`LANG=C`：

```
myip=
while IFS=$': \t' read -a line ;do
    [ -z "${line%inet}" ] && ip=${line[${#line[1]}>4?1:2]} &&
        [ "${ip#127.0.0.1}" ] && myip=$ip
  done< <(LANG=C /sbin/ifconfig)
echo $myip 
```

### 把它放到一个函数中：

最小：

```
getMyIP() {
    local _ip _line
    while IFS=$': \t' read -a _line ;do
        [ -z "${_line%inet}" ] &&
           _ip=${_line[${#_line[1]}>4?1:2]} &&
           [ "${_ip#127.0.0.1}" ] && echo $_ip && return 0
      done< <(LANG=C /sbin/ifconfig)
} 
```

简单使用：

```
getMyIP
192.168.1.37 
```

### 花式整洁：

```
getMyIP() {
    local _ip _myip _line _nl=$'\n'
    while IFS=$': \t' read -a _line ;do
        [ -z "${_line%inet}" ] &&
           _ip=${_line[${#_line[1]}>4?1:2]} &&
           [ "${_ip#127.0.0.1}" ] && _myip=$_ip
      done< <(LANG=C /sbin/ifconfig)
    printf ${1+-v} $1 "%s${_nl:0:$[${#1}>0?0:1]}" $_myip
} 
```

用法：

```
getMyIP
192.168.1.37 
```

或者，运行相同的函数，但带有一个参数：

```
getMyIP varHostIP
echo $varHostIP
192.168.1.37
set | grep ^varHostIP
varHostIP=192.168.1.37 
```

**注意：**不带参数，此函数在 STDOUT 上输出 IP 和*换行符*，带参数时不打印任何内容，但会创建一个名为参数的变量并包含不带*换行符*的 IP 。

**注意 2：**这是在 Debian、LaCie hacked nas 和 MaxOs 上测试的。如果这在您的环境下不起作用，我将对反馈非常感兴趣！

## 此答案的旧版本

（未删除，因为基于`sed`，不是`bash`。）

**警告：语言环境存在问题！**

又快又小：

```
myIP=$(ip a s|sed -ne '/127.0.0.1/!{s/^[ \t]*inet[ \t]*\([0-9.]\+\)\/.*$/\1/p}') 
```

爆炸（也可以工作；）

```
myIP=$(
    ip a s |
    sed -ne '
        /127.0.0.1/!{
            s/^[ \t]*inet[ \t]*\([0-9.]\+\)\/.*$/\1/p
        }
    '
) 
```

**编辑：**

如何！这似乎不适用于*Mac OS* ...

好的，这在*Mac OS*和我的*Linux*上似乎完全一样：

```
myIP=$(LANG=C /sbin/ifconfig  | sed -ne $'/127.0.0.1/ ! { s/^[ \t]*inet[ \t]\\{1,99\\}\\(addr:\\)\\{0,1\\}\\([0-9.]*\\)[ \t\/].*$/\\2/p; }') 
```

分裂：

```
myIP=$(
    LANG=C /sbin/ifconfig  |
        sed -ne $'/127.0.0.1/ ! {
            s/^[ \t]*inet[ \t]\\{1,99\\}\\(addr:\\)\\{0,1\\}\\([0-9.]*\\)[ \t\/].*$/\\2/p;
        }') 
```

# 我的脚本（2018 年 1 月）：

该脚本将首先找到您使用的*默认路由*和*接口*，然后搜索本地 ip 匹配*网关*网络并填充变量。最后两行只是打印，类似于：

```
Interface   : en0
Local Ip    : 10.2.5.3
Gateway     : 10.2.4.204
Net mask    : 255.255.252.0
Run on mac  : true 
```

或者

```
Interface   : eth2
Local Ip    : 192.168.1.31
Gateway     : 192.168.1.1
Net mask    : 255.255.255.0
Run on mac  : false 
```

嗯，就是这样：

```
#!/bin/bash
runOnMac=false
int2ip() { printf ${2+-v} $2 "%d.%d.%d.%d" \
        $(($1>>24)) $(($1>>16&255)) $(($1>>8&255)) $(($1&255)) ;}
ip2int() { local _a=(${1//./ }) ; printf ${2+-v} $2 "%u" $(( _a<<24 |
                  ${_a[1]} << 16 | ${_a[2]} << 8 | ${_a[3]} )) ;}
while IFS=$' :\t\r\n' read a b c d; do
    [ "$a" = "usage" ] && [ "$b" = "route" ] && runOnMac=true
    if $runOnMac ;then
        case $a in 
            gateway )    gWay=$b  ;;
            interface )  iFace=$b ;;
        esac
    else
        [ "$a" = "0.0.0.0" ] && [ "$c" = "$a" ] && iFace=${d##* } gWay=$b
    fi
done < <(/sbin/route -n 2>&1 || /sbin/route -n get 0.0.0.0/0)
ip2int $gWay gw
while read lhs rhs; do
    [ "$lhs" ] && { 
        [ -z "${lhs#*:}" ] && iface=${lhs%:}
        [ "$lhs" = "inet" ] && [ "$iface" = "$iFace" ] && {
            mask=${rhs#*netmask }
            mask=${mask%% *}
            [ "$mask" ] && [ -z "${mask%0x*}" ] &&
                printf -v mask %u $mask ||
                ip2int $mask mask
            ip2int ${rhs%% *} ip
            (( ( ip & mask ) == ( gw & mask ) )) &&
                int2ip $ip myIp && int2ip $mask netMask
        }
    }
done < <(/sbin/ifconfig)
printf "%-12s: %s\n" Interface $iFace Local\ Ip $myIp \
       Gateway $gWay Net\ mask $netMask Run\ on\ mac $runOnMac 
```

* * *

## 回答 #7

> 赞同：30
> 
> 时间：2014-01-08T13:45:56.307

仅特定于 Ubuntu 的某些版本。虽然它可能只是告诉你`127.0.0.1`：

```
hostname  -i 
```

或者

```
hostname -I 
```

* * *

## 回答 #8

> 赞同：25
> 
> 时间：2014-03-25T11:12:12.137

您还可以在 linux 中使用此命令获取 eth0 的 IP 版本 4 地址

```
/sbin/ip -4 -o addr show dev eth0| awk '{split($4,a,"/");print a[1]}' 
```

输出将是这样的

```
[root@localhost Sathish]# /sbin/ip -4 -o addr show dev eth0| awk '{split($4,a,"/");print a[1]}'
192.168.1.22 
```

* * *

## 回答 #9

> 赞同：14
> 
> 时间：2015-11-05T16:54:40.437

# 这适用于 Linux 和 OSX

这将获得与默认路由关联的接口

```
NET_IF=`netstat -rn | awk '/^0.0.0.0/ {thif=substr($0,74,10); print thif;} /^default.*UG/ {thif=substr($0,65,10); print thif;}'` 
```

使用上面发现的接口，获取 IP 地址。

```
NET_IP=`ifconfig ${NET_IF} | grep -Eo 'inet (addr:)?([0-9]*\.){3}[0-9]*' | grep -Eo '([0-9]*\.){3}[0-9]*' | grep -v '127.0.0.1'` 
```

## 操作系统

```
uname -a 
```

达尔文笔记本电脑 14.4.0 达尔文内核版本 14.4.0：2015 年 5 月 28 日星期四 11:35:04 PDT；根：xnu-2782.30.5~1/RELEASE_X86_64 x86_64

```
echo $NET_IF 
```

en5

```
echo $NET_IP 
```

192.168.0.130

## CentOS Linux

```
uname -a 
```

Linux dev-cil.medfx.local 2.6.18-164.el5xen 1 SMP Thu Sep 3 04:03:03 EDT 2009 x86_64 x86_64 x86_64 GNU/Linux

```
echo $NET_IF 
```

eth0

```
echo $NET_IP 
```

192.168.46.10

* * *

## 回答 #10

> 赞同：14
> 
> 时间：2017-03-03T12:58:16.553

使用其他一些方法 您可能会在系统上定义多个 IP 地址时遇到冲突。此行始终获取默认使用的 IP 地址。

```
ip route get 8.8.8.8 | head -1 | awk '{print $7}' 
```

* * *

## 回答 #11

> 赞同：12
> 
> 时间：2018-07-05T02:43:16.207

```
ifconfig | grep 'inet ' | grep -v '127.0.0.1' | awk '{print $2}' 
```

* * *

## 回答 #12

> 赞同：10
> 
> 时间：2018-08-09T12:59:42.380

我提取我对这个答案的评论：

```
ip route get 1 | sed -n 's/^.*src \([0-9.]*\) .*$/\1/p' 
```

它基于@CollinAnderson 的答案，这在我的情况下不起作用。

* * *

## 回答 #13

> 赞同：7
> 
> 时间：2017-07-11T06:20:40.837

假设您需要从世界其他地方看到的主要**公共IP，请尝试以下任何一种：**

```
wget http://ipecho.net/plain -O - -q
curl http://icanhazip.com
curl http://ifconfig.me/ip 
```

* * *

## 回答 #14

> 赞同：7
> 
> 时间：2019-02-24T10:11:03.493

在作为默认网关的网络中查找此计算机的 IP 地址（例如，排除所有虚拟网络、docker 网桥），例如。互联网网关，wifi网关，以太网

```
ip route| grep $(ip route |grep default | awk '{ print $5 }') | grep -v "default" | awk '/scope/ { print $9 }' 
```

在 Linux 上工作。

测试：

```
➜  ~ ip route| grep $(ip route |grep default | awk '{ print $5 }') | grep -v "default" | awk '/scope/ { print $9 }'
192.168.0.114

➜  reverse-networking git:(feature/type-local) ✗ ifconfig wlp2s0
wlp2s0: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet 192.168.0.114  netmask 255.255.255.0  broadcast 192.168.0.255
        inet6 fe80::d3b9:8e6e:caee:444  prefixlen 64  scopeid 0x20<link>
        ether ac:x:y:z  txqueuelen 1000  (Ethernet)
        RX packets 25883684  bytes 27620415278 (25.7 GiB)
        RX errors 0  dropped 27  overruns 0  frame 0
        TX packets 7511319  bytes 1077539831 (1.0 GiB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0 
```

* * *

## 回答 #15

> 赞同：6
> 
> 时间：2014-10-05T06:37:32.627

在 linux 系统上获取本地 ipv4 地址的最短方法：

```
hostname -I | awk '{print $1}' 
```

* * *

## 回答 #16

> 赞同：6
> 
> 时间：2018-01-18T10:53:02.813

我必须在 Collin Andersons 的回答中补充一点，如果您有两个接口并且它们都显示为 up，则此方法还考虑到了这一点。

```
ip route get 1 | awk '{print $NF;exit}' 
```

我一直在使用 Raspberry Pi 开发一个应用程序，并且需要实际使用的 IP 地址，而不仅仅是它是否启动。大多数其他答案将返回两个 IP 地址，这不一定有帮助 - 无论如何对于我的场景。

* * *

## 回答 #17

> 赞同：5
> 
> 时间：2015-03-13T19:24:10.737

主网络接口 IP

```
ifconfig `ip route | grep default | head -1 | sed 's/\(.*dev \)\([a-z0-9]*\)\(.*\)/\2/g'` | grep -oE "\b([0-9]{1,3}\.){3}[0-9]{1,3}\b" | head -1 
```

* * *

## 回答 #18

> 赞同：4
> 
> 时间：2014-02-13T04:08:55.867

```
ip addr show | grep -E '^\s*inet' | grep -m1 global | awk '{ print $2 }' | sed 's|/.*||' 
```

* * *

## 回答 #19

> 赞同：4
> 
> 时间：2016-07-19T14:00:43.103

另一个`ifconfig`适用于 Linux 和 OSX 的变体：

```
ifconfig | grep "inet " | cut -f2 -d' ' 
```

* * *

## 回答 #20

> 赞同：3
> 
> 时间：2016-10-21T18:52:43.817

我浏览了很多链接（StackExchange、AskUbuntu、StackOverflow 等），并决定将所有最佳解决方案组合到一个 shell 脚本中。

在我看来，这两个质量保证是最好的：

如何在 shell 脚本中获取我的外部 IP 地址？ [https://unix.stackexchange.com/q/22615](https://unix.stackexchange.com/q/22615)

如何找到我的内部 IP 地址？ [https://askubuntu.com/a/604691](https://askubuntu.com/a/604691)

这是我的解决方案，基于 rsp 在他的存储库 ( [https://github.com/rsp/scripts/](https://github.com/rsp/scripts/) ) 中共享的一些想法。

你们中的一些人可能会说这个脚本对于如此简单的任务来说非常庞大，但我想让它在使用上尽可能简单和灵活。它支持简单的配置文件，允许重新定义默认值。

它在 Cygwin、MINGW 和 Linux (Red Hat) 下成功测试。

显示内部 IP 地址

```
myip -i 
```

显示外部 IP 地址

```
myip -e 
```

源代码，也可通过以下链接获得：[https](https://github.com/ildar-shaimordanov/tea-set/blob/master/home/bin/myip) ://github.com/ildar-shaimordanov/tea-set/blob/master/home/bin/myip 。配置文件的示例在主脚本旁边。

```
#!/bin/bash

# =========================================================================
#
# Getting both internal and external IP addresses used for outgoing 
# Internet connections.
#
# Internal IP address is the IP address of your computer network interface 
# that would be used to connect to Internet.
#
# External IP address is the IP address that is visible by external 
# servers that you connect to over Internet.
#
# Copyright (C) 2016 Ildar Shaimordanov
#
# =========================================================================

# Details of the actual implementation are based on the following QA:
#
# How can I get my external IP address in a shell script?
# https://unix.stackexchange.com/q/22615
#
# How do I find my internal ip address?
# https://askubuntu.com/a/604691

# =========================================================================

for f in \
    "$( dirname "$0" )/myip.conf" \
    ~/.myip.conf \
    /etc/myip.conf
do
    [ -f "$f" ] && {
        . "$f"
        break
    }
done

# =========================================================================

show_usage() {
    cat - <<HELP
USAGE
  $( basename "$0" ) [OPTIONS]

DESCRIPTION
  Display the internal and external IP addresses

OPTIONS
  -i  Display the internal IP address
  -e  Display the external IP address
  -v  Turn on verbosity
  -h  Print this help and exit
HELP
    exit
}

die() {
    echo "$( basename "$0" ): $@" >&2
    exit 2
}

# =========================================================================

show_internal=""
show_external=""
show_verbose=""

while getopts ":ievh" opt
do
    case "$opt" in
    i )
        show_internal=1
        ;;
    e )
        show_external=1
        ;;
    v )
        show_verbose=1
        ;;
    h )
        show_usage
        ;;
    \? )
        die "Illegal option: $OPTARG"
        ;;
    esac
done

if [ -z "$show_internal" -a -z "$show_external" ]
then
    show_internal=1
    show_external=1
fi

# =========================================================================

# Use Google's public DNS to resolve the internal IP address
[ -n "$TARGETADDR" ] || TARGETADDR="8.8.8.8"

# Query the specific URL to resolve the external IP address
[ -n "$IPURL" ] || IPURL="ipecho.net/plain"

# Define explicitly $IPCMD to gather $IPURL using another tool
[ -n "$IPCMD" ] || {
    if   which curl >/dev/null 2>&1
    then
        IPCMD="curl -s"
    elif which wget >/dev/null 2>&1
    then
        IPCMD="wget -qO -"
    else
        die "Neither curl nor wget installed"
    fi
}

# =========================================================================

resolveip() {
    {
        gethostip -d "$1" && return
        getent ahostsv4 "$1" \
        | grep RAW \
        | awk '{ print $1; exit }' 
    } 2>/dev/null
}

internalip() {
    [ -n "$show_verbose" ] && printf "Internal: "

    case "$( uname | tr '[:upper:]' '[:lower:]' )" in
    cygwin* | mingw* | msys* )
        netstat -rn \
        | grep -w '0.0.0.0' \
        | awk '{ print $4 }'
        return
        ;;
    esac

    local t="$( resolveip "$TARGETADDR" )"
    [ -n "$t" ] || die "Cannot resolve $TARGETADDR"
    ip route get "$t" \
    | awk '{ print $NF; exit }'
}

externalip() {
    [ -n "$show_verbose" ] && printf "External: "

    eval $IPCMD "$IPURL" $IPOPEN
}

# =========================================================================

[ -n "$show_internal" ] && internalip
[ -n "$show_external" ] && externalip

# =========================================================================

# EOF 
```

* * *

## 回答 #21

> 赞同：3
> 
> 时间：2016-11-11T03:24:30.283

我只是使用[Network Interface Names](https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Networking_Guide/ch-Consistent_Network_Device_Naming.html#sec-Naming_Schemes_Hierarchy)，我的自定义命令是

```
[[ $(ip addr | grep enp0s25) != '' ]] && ip addr show dev enp0s25 | sed -n -r 's@.*inet (.*)/.*brd.*@\1@p' || ip addr show dev eth0 | sed -n -r 's@.*inet (.*)/.*brd.*@\1@p' 
```

在我自己的笔记本上

```
[flying@lempstacker ~]$ cat /etc/redhat-release 
CentOS Linux release 7.2.1511 (Core) 
[flying@lempstacker ~]$ [[ $(ip addr | grep enp0s25) != '' ]] && ip addr show dev enp0s25 | sed -n -r 's@.*inet (.*)/.*brd.*@\1@p' || ip addr show dev eth0 | sed -n -r 's@.*inet (.*)/.*brd.*@\1@p'
192.168.2.221
[flying@lempstacker ~]$ 
```

但如果网络接口拥有至少一个 ip，那么它将显示所有 ip 属于它

**例如**

Ubuntu 16.10

```
root@yakkety:~# sed -r -n 's@"@@g;s@^VERSION=(.*)@\1@p' /etc/os-release
16.04.1 LTS (Xenial Xerus)
root@yakkety:~# [[ $(ip addr | grep enp0s25) != '' ]] && ip addr show dev enp0s25 | sed -n -r 's@.*inet (.*)/.*brd.*@\1@p' || ip addr show dev eth0 | sed -n -r 's@.*inet (.*)/.*brd.*@\1@p'
178.62.236.250
root@yakkety:~# 
```

Debian 杰西

```
root@jessie:~# sed -r -n 's@"@@g;s@^PRETTY_NAME=(.*)@\1@p' /etc/os-release
Debian GNU/Linux 8 (jessie)
root@jessie:~# [[ $(ip addr | grep enp0s25) != '' ]] && ip addr show dev enp0s25 | sed -n -r 's@.*inet (.*)/.*brd.*@\1@p' || ip addr show dev eth0 | sed -n -r 's@.*inet (.*)/.*brd.*@\1@p'
192.81.222.54
root@jessie:~# 
```

CentOS 6.8

```
[root@centos68 ~]# cat /etc/redhat-release 
CentOS release 6.8 (Final)
[root@centos68 ~]# [[ $(ip addr | grep enp0s25) != '' ]] && ip addr show dev enp0s25 | sed -n -r 's@.*inet (.*)/.*brd.*@\1@p' || ip addr show dev eth0 | sed -n -r 's@.*inet (.*)/.*brd.*@\1@p'
162.243.17.224
10.13.0.5
[root@centos68 ~]# ip route get 1 | awk '{print $NF;exit}'
162.243.17.224
[root@centos68 ~]# 
```

软呢帽 24

```
[root@fedora24 ~]# cat /etc/redhat-release 
Fedora release 24 (Twenty Four)
[root@fedora24 ~]# [[ $(ip addr | grep enp0s25) != '' ]] && ip addr show dev enp0s25 | sed -n -r 's@.*inet (.*)/.*brd.*@\1@p' || ip addr show dev eth0 | sed -n -r 's@.*inet (.*)/.*brd.*@\1@p'
104.131.54.185
10.17.0.5
[root@fedora24 ~]# ip route get 1 | awk '{print $NF;exit}'
104.131.54.185
[root@fedora24 ~]# 
```

看起来[link](https://stackoverflow.com/questions/13322485/how-to-i-get-the-primary-ip-address-of-the-local-machine-on-linux-and-os-x#answer-25851186)`ip route get 1 | awk '{print $NF;exit}'`提供的命令更准确，而且更短。

* * *

## 回答 #22

> 赞同：2
> 
> 时间：2013-08-27T20:59:17.787

不确定这是否适用于所有操作系统，请尝试一下。

```
ifconfig | awk -F"[ :]+" '/inet addr/ && !/127.0/ {print $4}' 
```

* * *

## 回答 #23

> 赞同：2
> 
> 时间：2018-06-03T22:10:12.027

一切都有一个节点包。它是跨平台的且易于使用。

```
$ npm install --global internal-ip-cli

$ internal-ip
fe80::1

$ internal-ip --ipv4
192.168.0.3 
```

这是一种有争议的方法，但是无论喜欢与否，使用 npm 作为工具都变得越来越流行。

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2013-09-21T12:32:49.993

```
ifconfig | grep "inet addr:" | grep -v "127.0.0.1" | grep -Eo '[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}'  | head -1 
```

* * *

## 回答 #25

> 赞同：1
> 
> 时间：2015-02-19T20:26:08.437

如果您知道网络接口（eth0、wlan、tun0 等）：

```
ifconfig eth0 | grep addr: | awk '{ print $2 }' | cut -d: -f2 
```

* * *

## 回答 #26

> 赞同：1
> 
> 时间：2016-09-23T15:44:41.370

```
ifconfig $(netstat -rn | grep -E "^default|^0.0.0.0" | head -1 | awk '{print $NF}') | grep 'inet ' | awk '{print $2}' | grep -Eo '([0-9]*\.){3}[0-9]*' 
```

* * *

## 回答 #27

> 赞同：1
> 
> 时间：2017-05-02T14:54:11.777

适用于 Mac、Linux 和 Docker 容器内部：

`$ hostname --ip-address 2> /dev/null || (ifconfig | sed -En 's/127.0.0.1//;s/.*inet (addr:)?(([0-9]*\.){3}[0-9]*).*/\2/p' | awk '{print`1美元；出口}'）

也适用于`Makefile`：

`LOCAL_HOST := ${shell hostname --ip-address 2> /dev/null || (ifconfig | sed -En 's/127.0.0.1//;s/.*inet (addr:)?(([0-9]*\.){3}[0-9]*).*/\2/p' | awk '{print $1; exit}')}`

* * *

## 回答 #28

> 赞同：1
> 
> 时间：2017-07-24T07:29:08.847

对于 linux，你需要的是这个命令：

```
ifconfig $1|sed -n 2p|awk '{ print $2 }'|awk -F : '{ print $2 }' 
```

在你的shell中输入这个，你就会知道你的ip。

* * *

## 回答 #29

> 赞同：1
> 
> 时间：2017-09-11T17:20:03.273

这更容易阅读： `ifconfig | grep 'inet addr:' |/usr/bin/awk '{print $2}' | tr -d addr:`

* * *

## 回答 #30

> 赞同：1
> 
> 时间：2017-10-26T10:29:32.553

如果您已安装`npm`并`node`安装：`npm install -g ip && node -e "const ip = require('ip'); console.log(ip.address())"`

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2014-12-08T19:17:24.600

在 Mac 上，请考虑以下事项：

```
scutil --nwi | grep -Eo '[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}' 
```

# image - 使用 AppleScript 调整图像大小

> ID：13322486
> 
> 赞同：1
> 
> 时间：2012-11-10T13:32:18.933
> 
> 标签：image, resize, applescript, geektool

当我想修改 ApplScript 时遇到了一个小问题，我用它来将当前的 iTunes Cover 转换为我通过 GeekTool 在桌面上显示的图像文件。现在我也想调整这个图像的大小，因为有些图像有点小......

我在网上找到了一些解决方案，但没有一个有效……而且由于我对 AppleScript 不太感兴趣，所以我自己也无法处理。

这是我当前的代码：

```
set the_artwork_file to ((path to home folder) as string) & "Music:iTunes:CurrentArtwork.png"
tell application "System Events"
if ("iTunes" is in name of processes) then
    tell application "iTunes"
        if (player state is not stopped) 
            and (player state is not paused) 
            and (artworks of current track exists) 
            then
            set theArt to front artwork of current track
            set pic to (raw data of theArt)
            try
                set RefNum to (open for access the_artwork_file with write permission)
                write (pic) to RefNum
                close access RefNum
                return
            end try
        end if
    end tell
end if
end tell
do shell script "rm -f " & (POSIX path of the_artwork_file) 
```

好吧，没关系，我终于设法解决了。我生成的代码基本上是正确的，但我不得不把它放到一个单独的脚本文件中。在 GeekTool 中，我必须一个接一个地直接调用它们，它工作得很好！

这是我现在使用的代码：

```
tell application "Image Events"
    set this_image to open ((path to home folder) as string) & "Music:iTunes:CurrentArtwork.png"
    scale this_image to size 1080
    save this_image in ((path to home folder) as string) & "Music:iTunes:CurrentArtwork.png"
    close this_image
end tell 
```

# mysql - 从 call_log 获取最大并发电话数

> ID：13322489
> 
> 赞同：2
> 
> 时间：2012-11-10T01:33:01.883
> 
> 标签：mysql, sql

我需要帮助在 MySQL 5.0.77 中制作一个查询，根据下面显示的数据（办公室一天的通话量）返回并发电话呼叫的峰值数量。我只是想知道在一天中的任何特定时间同时打电话的人数最多是多少。

首先，这是 MySQL 表：

```
CREATE TABLE `call_log` (
`call_id` int(11) NOT NULL auto_increment,
`call_datetime` datetime default NULL,
`call_length` time default NULL,
PRIMARY KEY  (`call_id`)
) 
```

我使用以下命令将数据加载到表中：

```
LOAD DATA LOCAL INFILE 'call_log_import.csv' INTO TABLE call_log FIELDS TERMINATED BY ',' LINE TERMINATED BY '\n' (call_datetime, call_length); 
```

这是 CSV 格式的实际行数据：

```
2012-11-07 5:28:00,0:00:20
2012-11-07 7:04:00,0:00:20
2012-11-07 7:04:00,0:00:30
2012-11-07 7:04:00,0:00:30
2012-11-07 7:25:00,0:00:34
2012-11-07 7:25:00,0:00:37
2012-11-07 7:25:00,0:00:38
2012-11-07 7:30:00,0:00:16
2012-11-07 7:49:00,0:01:29
2012-11-07 7:55:00,0:00:43
2012-11-07 7:55:00,0:00:46
2012-11-07 7:55:00,0:00:46
2012-11-07 8:00:00,0:25:01
2012-11-07 8:00:00,0:00:35
2012-11-07 8:01:00,0:00:35
2012-11-07 8:01:00,0:00:35
2012-11-07 8:02:00,0:00:36
2012-11-07 8:02:00,0:03:03
2012-11-07 8:07:00,0:00:07
2012-11-07 8:08:00,0:00:08
2012-11-07 8:12:00,0:00:34
2012-11-07 8:12:00,0:00:44
2012-11-07 8:18:00,0:01:05
2012-11-07 8:28:00,0:01:05
2012-11-07 8:29:00,0:00:18
2012-11-07 8:31:00,0:00:05
2012-11-07 8:31:00,0:00:00
2012-11-07 8:31:00,0:00:11
2012-11-07 8:32:00,0:00:01
2012-11-07 8:32:00,0:27:26
2012-11-07 8:32:00,0:00:00
2012-11-07 8:32:00,0:00:00
2012-11-07 8:32:00,0:00:00
2012-11-07 8:32:00,0:00:38
2012-11-07 8:33:00,0:00:35
2012-11-07 8:33:00,0:00:04
2012-11-07 8:34:00,0:01:10
2012-11-07 8:35:00,0:09:44
2012-11-07 8:35:00,0:22:21
2012-11-07 8:35:00,0:00:17
2012-11-07 8:35:00,0:21:42
2012-11-07 8:35:00,0:21:46
2012-11-07 8:35:00,0:21:46
2012-11-07 8:37:00,0:00:29
2012-11-07 8:38:00,0:00:29
2012-11-07 8:39:00,0:06:50
2012-11-07 8:39:00,0:08:23
2012-11-07 8:53:00,0:05:01
2012-11-07 8:53:00,0:05:05
2012-11-07 8:53:00,0:05:05
2012-11-07 8:57:00,0:01:04
2012-11-07 9:00:00,0:29:40
2012-11-07 9:01:00,0:00:20
2012-11-07 9:01:00,0:01:27
2012-11-07 9:02:00,0:27:00
2012-11-07 9:03:00,0:26:18
2012-11-07 9:03:00,0:00:18
2012-11-07 9:09:00,0:01:16
2012-11-07 9:12:00,0:02:53
2012-11-07 9:12:00,0:01:09
2012-11-07 9:12:00,0:27:27
2012-11-07 9:14:00,0:07:13
2012-11-07 9:14:00,0:07:18
2012-11-07 9:14:00,0:07:18
2012-11-07 9:18:00,0:11:39
2012-11-07 9:18:00,0:11:55
2012-11-07 9:18:00,0:00:16
2012-11-07 9:17:00,0:12:15
2012-11-07 9:18:00,0:00:48
2012-11-07 9:18:00,0:00:52
2012-11-07 9:18:00,0:00:52
2012-11-07 9:19:00,0:01:12
2012-11-07 9:21:00,0:00:03
2012-11-07 9:22:00,0:02:41
2012-11-07 9:22:00,0:02:36
2012-11-07 9:22:00,0:02:49
2012-11-07 9:24:00,0:01:34
2012-11-07 9:25:00,0:06:10
2012-11-07 9:25:00,0:06:14
2012-11-07 9:25:00,0:06:14
2012-11-07 9:31:00,0:00:43
2012-11-07 9:33:00,0:00:03
2012-11-07 9:33:00,0:00:03
2012-11-07 9:33:00,0:00:03
2012-11-07 9:33:00,0:00:03
2012-11-07 9:33:00,0:00:03
2012-11-07 9:33:00,0:05:57
2012-11-07 9:32:00,0:00:30
2012-11-07 9:32:00,0:00:30
2012-11-07 9:32:00,0:06:28
2012-11-07 9:32:00,0:06:53
2012-11-07 9:32:00,0:00:35
2012-11-07 9:32:00,0:00:20
2012-11-07 9:32:00,0:01:04
2012-11-07 9:32:00,0:01:04
2012-11-07 9:32:00,0:00:41
2012-11-07 9:36:00,0:00:27
2012-11-07 9:37:00,0:23:53
2012-11-07 9:38:00,0:01:51
2012-11-07 9:40:00,0:06:40
2012-11-07 9:40:00,0:06:44
2012-11-07 9:40:00,0:06:44
2012-11-07 9:44:00,0:01:19
2012-11-07 9:46:00,0:00:55
2012-11-07 9:46:00,0:02:01
2012-11-07 9:47:00,0:20:00
2012-11-07 9:47:00,0:02:22
2012-11-07 9:47:00,0:07:12
2012-11-07 9:47:00,0:02:22
2012-11-07 9:47:00,0:00:13
2012-11-07 9:48:00,0:00:41
2012-11-07 9:48:00,0:01:25
2012-11-07 9:50:00,0:01:24
2012-11-07 9:52:00,0:00:06
2012-11-07 9:54:00,0:00:06
2012-11-07 9:57:00,0:00:28
2012-11-07 9:57:00,0:00:20
2012-11-07 9:57:00,0:00:48
2012-11-07 9:58:00,0:00:06
2012-11-07 9:58:00,0:00:06
2012-11-07 9:58:00,0:00:06
2012-11-07 9:58:00,0:00:06
2012-11-07 9:58:00,0:00:06
2012-11-07 9:58:00,0:06:49
2012-11-07 9:58:00,0:07:19
2012-11-07 9:58:00,0:00:30
2012-11-07 9:58:00,0:00:30
2012-11-07 9:58:00,0:07:38
2012-11-07 9:58:00,0:01:36
2012-11-07 9:59:00,0:00:59
2012-11-07 9:59:00,0:01:00
2012-11-07 10:00:00,0:17:43
2012-11-07 10:00:00,0:00:21
2012-11-07 10:00:00,1:02:29
2012-11-07 10:01:00,0:00:03
2012-11-07 10:01:00,0:00:03
2012-11-07 10:01:00,0:00:52
2012-11-07 10:01:00,0:20:23
2012-11-07 10:01:00,0:01:09
2012-11-07 10:01:00,0:00:20
2012-11-07 10:01:00,0:01:15
2012-11-07 10:02:00,0:00:01
2012-11-07 10:02:00,0:00:36
2012-11-07 10:02:00,0:00:48
2012-11-07 10:02:00,0:21:49
2012-11-07 10:03:00,0:40:24
2012-11-07 10:04:00,0:00:02
2012-11-07 10:04:00,0:00:02
2012-11-07 10:04:00,0:00:02
2012-11-07 10:04:00,0:05:59
2012-11-07 10:04:00,0:00:02
2012-11-07 10:04:00,0:00:02
2012-11-07 10:04:00,0:05:59
2012-11-07 10:03:00,0:06:20
2012-11-07 10:03:00,0:00:22
2012-11-07 10:06:00,0:20:35
2012-11-07 10:07:00,0:02:44
2012-11-07 10:08:00,0:00:01
2012-11-07 10:09:00,0:00:29
2012-11-07 10:09:00,0:01:17
2012-11-07 10:10:00,0:00:02
2012-11-07 10:11:00,0:00:02
2012-11-07 10:12:00,0:01:43
2012-11-07 10:12:00,0:24:01
2012-11-07 10:12:00,0:24:04
2012-11-07 10:12:00,0:24:04
2012-11-07 10:12:00,0:01:23
2012-11-07 10:13:00,0:03:51
2012-11-07 10:13:00,0:03:40
2012-11-07 10:14:00,0:09:52
2012-11-07 10:16:00,0:13:33
2012-11-07 10:16:00,0:13:37
2012-11-07 10:16:00,0:13:37
2012-11-07 10:21:00,0:00:20
2012-11-07 10:21:00,0:01:18
2012-11-07 10:21:00,0:01:18
2012-11-07 10:22:00,0:00:21
2012-11-07 10:22:00,0:00:32
2012-11-07 10:22:00,0:00:32
2012-11-07 10:22:00,0:04:31
2012-11-07 10:22:00,0:00:57
2012-11-07 10:23:00,0:10:23
2012-11-07 10:24:00,0:01:20
2012-11-07 10:24:00,0:01:24
2012-11-07 10:24:00,0:01:24
2012-11-07 10:25:00,0:27:34
2012-11-07 10:28:00,0:00:49
2012-11-07 10:30:00,0:01:46
2012-11-07 10:30:00,0:01:51
2012-11-07 10:30:00,0:01:51
2012-11-07 10:30:00,0:01:01
2012-11-07 10:31:00,0:00:43
2012-11-07 10:31:00,0:15:08
2012-11-07 10:33:00,0:02:37
2012-11-07 10:35:00,0:00:21
2012-11-07 10:35:00,0:01:24
2012-11-07 10:35:00,0:01:24
2012-11-07 10:37:00,0:02:07
2012-11-07 10:37:00,0:00:08
2012-11-07 10:38:00,0:00:10
2012-11-07 10:39:00,0:01:37
2012-11-07 10:39:00,0:00:21
2012-11-07 10:39:00,0:01:53
2012-11-07 10:39:00,0:00:03
2012-11-07 10:40:00,0:00:34
2012-11-07 10:41:00,0:00:00
2012-11-07 10:41:00,0:00:00
2012-11-07 10:41:00,0:00:00
2012-11-07 10:41:00,0:02:20
2012-11-07 10:45:00,0:07:57
2012-11-07 10:51:00,0:00:20
2012-11-07 10:51:00,0:00:56
2012-11-07 10:50:00,0:01:12
2012-11-07 10:50:00,0:00:04
2012-11-07 10:50:00,0:00:04
2012-11-07 10:50:00,0:00:04
2012-11-07 10:50:00,0:00:04
2012-11-07 10:50:00,0:00:04
2012-11-07 10:50:00,0:01:44
2012-11-07 10:50:00,0:00:31
2012-11-07 10:50:00,0:00:31
2012-11-07 10:49:00,0:03:05
2012-11-07 10:54:00,0:00:20
2012-11-07 10:54:00,0:01:02
2012-11-07 10:54:00,0:01:02
2012-11-07 10:55:00,0:02:08
2012-11-07 10:56:00,0:00:33
2012-11-07 10:56:00,0:00:05
2012-11-07 10:59:00,0:24:33
2012-11-07 10:59:00,0:24:37
2012-11-07 10:59:00,0:24:37
2012-11-07 11:00:00,0:29:41
2012-11-07 11:00:00,0:07:38
2012-11-07 11:00:00,0:00:51
2012-11-07 11:01:00,0:00:33
2012-11-07 11:02:00,0:28:12
2012-11-07 11:02:00,0:35:02
2012-11-07 11:02:00,0:35:05
2012-11-07 11:02:00,0:35:05
2012-11-07 11:02:00,0:21:29
2012-11-07 11:03:00,0:02:24
2012-11-07 11:03:00,0:02:28
2012-11-07 11:03:00,0:02:28
2012-11-07 11:03:00,0:00:03
2012-11-07 11:04:00,0:34:28
2012-11-07 11:04:00,0:08:20
2012-11-07 11:04:00,0:01:01
2012-11-07 11:06:00,0:16:09
2012-11-07 11:08:00,0:00:50
2012-11-07 11:11:00,0:02:08
2012-11-07 11:14:00,0:01:22
2012-11-07 11:14:00,0:01:26
2012-11-07 11:14:00,0:01:26
2012-11-07 11:14:00,0:00:20
2012-11-07 11:14:00,0:00:57
2012-11-07 11:14:00,0:00:57
2012-11-07 11:15:00,0:09:48
2012-11-07 11:15:00,0:11:10
2012-11-07 11:16:00,0:00:55
2012-11-07 11:18:00,0:00:48
2012-11-07 11:22:00,0:00:51
2012-11-07 11:22:00,0:00:51
2012-11-07 11:22:00,0:00:51
2012-11-07 11:22:00,0:01:16
2012-11-07 11:28:00,0:03:36
2012-11-07 11:29:00,0:13:18
2012-11-07 11:30:00,0:03:47
2012-11-07 11:30:00,0:20:44
2012-11-07 11:30:00,0:01:29
2012-11-07 11:32:00,0:00:39
2012-11-07 11:32:00,0:07:04
2012-11-07 11:35:00,0:02:04
2012-11-07 11:35:00,0:00:20
2012-11-07 11:35:00,0:00:32
2012-11-07 11:35:00,0:00:32
2012-11-07 11:37:00,0:18:14
2012-11-07 11:37:00,0:18:14
2012-11-07 11:37:00,0:00:17
2012-11-07 11:37:00,0:00:18
2012-11-07 11:37:00,0:00:18
2012-11-07 11:36:00,0:18:57
2012-11-07 11:37:00,0:24:10
2012-11-07 11:38:00,0:00:19
2012-11-07 11:38:00,0:00:02
2012-11-07 11:38:00,0:00:02
2012-11-07 11:38:00,0:01:29
2012-11-07 11:41:00,0:00:02
2012-11-07 11:41:00,0:00:02
2012-11-07 11:41:00,0:00:02
2012-11-07 11:41:00,0:04:48
2012-11-07 11:41:00,0:00:02
2012-11-07 11:41:00,0:00:02
2012-11-07 11:41:00,0:04:48
2012-11-07 11:40:00,0:05:09
2012-11-07 11:41:00,0:01:41
2012-11-07 11:42:00,0:15:24
2012-11-07 11:42:00,0:15:30
2012-11-07 11:42:00,0:15:30
2012-11-07 11:59:00,0:00:20
2012-11-07 11:59:00,0:00:31
2012-11-07 11:59:00,0:00:31
2012-11-07 12:00:00,0:08:56
2012-11-07 12:01:00,0:22:31
2012-11-07 12:02:00,0:00:26
2012-11-07 12:02:00,0:33:20
2012-11-07 12:03:00,0:33:45
2012-11-07 12:06:00,0:00:56
2012-11-07 12:18:00,0:00:55
2012-11-07 12:18:00,0:00:55
2012-11-07 12:18:00,0:01:04
2012-11-07 12:24:00,0:00:02
2012-11-07 12:24:00,0:00:02
2012-11-07 12:24:00,0:00:25
2012-11-07 12:25:00,0:00:21
2012-11-07 12:25:00,0:01:08
2012-11-07 12:25:00,0:01:08
2012-11-07 12:26:00,0:00:20
2012-11-07 12:26:00,0:00:54
2012-11-07 12:26:00,0:00:54
2012-11-07 12:29:00,0:00:11
2012-11-07 12:31:00,0:02:10
2012-11-07 12:31:00,0:12:35
2012-11-07 12:31:00,0:06:26
2012-11-07 12:46:00,0:00:34
2012-11-07 12:47:00,0:01:01
2012-11-07 12:47:00,0:01:24
2012-11-07 12:48:00,0:00:15
2012-11-07 12:48:00,0:00:20
2012-11-07 12:48:00,0:00:20
2012-11-07 12:48:00,0:00:18
2012-11-07 12:50:00,0:00:20
2012-11-07 12:50:00,0:00:32
2012-11-07 12:50:00,0:00:32
2012-11-07 12:55:00,0:01:30
2012-11-07 12:55:00,0:01:31
2012-11-07 12:55:00,0:00:17
2012-11-07 12:55:00,0:00:17
2012-11-07 12:55:00,0:00:18
2012-11-07 12:54:00,0:02:13
2012-11-07 12:59:00,0:36:03
2012-11-07 13:00:00,0:09:42
2012-11-07 13:00:00,0:13:35
2012-11-07 13:01:00,0:18:08
2012-11-07 13:01:00,0:28:37
2012-11-07 13:02:00,0:01:26
2012-11-07 13:02:00,0:00:01
2012-11-07 13:02:00,0:09:42
2012-11-07 13:03:00,0:04:53
2012-11-07 13:04:00,0:00:35
2012-11-07 13:12:00,0:14:28
2012-11-07 13:12:00,0:14:28
2012-11-07 13:12:00,0:14:42
2012-11-07 13:13:00,0:00:45
2012-11-07 13:14:00,0:01:27
2012-11-07 13:15:00,0:13:04
2012-11-07 13:14:00,0:13:08
2012-11-07 13:14:00,0:13:08
2012-11-07 13:14:00,0:15:32
2012-11-07 13:15:00,0:00:20
2012-11-07 13:15:00,0:00:30
2012-11-07 13:15:00,0:00:30
2012-11-07 13:16:00,0:00:42
2012-11-07 13:16:00,0:01:04
2012-11-07 13:17:00,0:02:01
2012-11-07 13:22:00,0:00:12
2012-11-07 13:24:00,0:00:02
2012-11-07 13:24:00,0:00:05
2012-11-07 13:24:00,0:00:05
2012-11-07 13:26:00,0:03:07
2012-11-07 13:27:00,0:00:41
2012-11-07 13:29:00,0:02:00
2012-11-07 13:30:00,0:00:17
2012-11-07 13:32:00,0:09:24
2012-11-07 13:32:00,0:25:47
2012-11-07 13:32:00,0:25:50
2012-11-07 13:32:00,0:25:50
2012-11-07 13:33:00,0:03:53
2012-11-07 13:38:00,0:00:01
2012-11-07 13:38:00,0:00:01
2012-11-07 13:39:00,0:27:03
2012-11-07 13:39:00,0:00:20
2012-11-07 13:39:00,0:01:02
2012-11-07 13:39:00,0:01:02
2012-11-07 13:40:00,0:00:00
2012-11-07 13:42:00,0:06:23
2012-11-07 13:42:00,0:00:15
2012-11-07 13:42:00,0:00:15
2012-11-07 13:42:00,0:06:55
2012-11-07 13:41:00,0:07:15
2012-11-07 13:45:00,0:00:33
2012-11-07 13:45:00,0:00:35
2012-11-07 13:46:00,0:01:12
2012-11-07 13:51:00,0:01:55
2012-11-07 13:53:00,0:02:02
2012-11-07 13:55:00,0:00:08
2012-11-07 13:55:00,0:03:42
2012-11-07 13:56:00,0:01:32
2012-11-07 14:01:00,0:00:54
2012-11-07 14:01:00,0:09:24
2012-11-07 14:01:00,0:09:27
2012-11-07 14:01:00,0:09:27
2012-11-07 14:02:00,0:35:17
2012-11-07 14:02:00,0:00:30
2012-11-07 14:02:00,0:35:48
2012-11-07 14:02:00,0:35:48
2012-11-07 14:02:00,0:01:00
2012-11-07 14:04:00,0:34:37
2012-11-07 14:04:00,0:34:37
2012-11-07 14:04:00,0:34:37
2012-11-07 14:05:00,0:04:38
2012-11-07 14:05:00,0:04:38
2012-11-07 14:05:00,0:04:43
2012-11-07 14:06:00,0:00:31
2012-11-07 14:08:00,0:13:06
2012-11-07 14:08:00,0:13:06
2012-11-07 14:06:00,0:01:15
2012-11-07 14:06:00,0:00:03
2012-11-07 14:06:00,0:00:03
2012-11-07 14:06:00,0:01:16
2012-11-07 14:06:00,0:00:03
2012-11-07 14:06:00,0:00:03
2012-11-07 14:06:00,0:00:03
2012-11-07 14:06:00,0:14:39
2012-11-07 14:06:00,0:00:34
2012-11-07 14:06:00,0:00:17
2012-11-07 14:06:00,0:00:21
2012-11-07 14:06:00,0:00:21
2012-11-07 14:07:00,0:11:06
2012-11-07 14:15:00,0:01:37
2012-11-07 14:15:00,0:01:53
2012-11-07 14:15:00,0:00:16
2012-11-07 14:14:00,0:02:19
2012-11-07 14:16:00,0:01:10
2012-11-07 14:19:00,0:04:45
2012-11-07 14:19:00,0:11:31
2012-11-07 14:21:00,0:00:04
2012-11-07 14:21:00,0:00:04
2012-11-07 14:21:00,0:00:00
2012-11-07 14:21:00,0:01:13
2012-11-07 14:21:00,0:00:04
2012-11-07 14:21:00,0:00:04
2012-11-07 14:21:00,0:01:13
2012-11-07 14:21:00,0:01:30
2012-11-07 14:21:00,0:01:43
2012-11-07 14:22:00,0:00:34
2012-11-07 14:23:00,0:03:41
2012-11-07 14:26:00,0:00:20
2012-11-07 14:26:00,0:00:45
2012-11-07 14:26:00,0:00:45
2012-11-07 14:26:00,0:15:39
2012-11-07 14:28:00,0:00:20
2012-11-07 14:28:00,0:02:04
2012-11-07 14:28:00,0:02:04
2012-11-07 14:30:00,0:08:36
2012-11-07 14:31:00,0:10:26
2012-11-07 14:43:00,0:01:16
2012-11-07 14:43:00,0:00:21
2012-11-07 14:43:00,0:01:41
2012-11-07 14:57:00,0:00:21
2012-11-07 14:58:00,0:03:41
2012-11-07 14:58:00,0:00:04
2012-11-07 14:58:00,0:00:04
2012-11-07 14:58:00,0:00:04
2012-11-07 14:58:00,0:00:04
2012-11-07 14:58:00,0:03:42
2012-11-07 14:58:00,0:00:04
2012-11-07 14:57:00,0:04:02
2012-11-07 14:58:00,0:00:20
2012-11-07 14:58:00,0:01:50
2012-11-07 14:58:00,0:01:50
2012-11-07 14:59:00,0:01:42
2012-11-07 14:59:00,0:01:46
2012-11-07 14:59:00,0:01:46
2012-11-07 14:59:00,0:19:45
2012-11-07 15:01:00,0:00:55
2012-11-07 15:02:00,0:00:10
2012-11-07 15:03:00,0:01:13
2012-11-07 15:04:00,0:42:23
2012-11-07 15:05:00,0:02:24
2012-11-07 15:05:00,0:00:36
2012-11-07 15:06:00,0:00:08
2012-11-07 15:06:00,0:00:41
2012-11-07 15:06:00,0:10:57
2012-11-07 15:06:00,0:11:00
2012-11-07 15:06:00,0:11:01
2012-11-07 15:13:00,0:01:42
2012-11-07 15:13:00,0:01:42
2012-11-07 15:13:00,0:00:22
2012-11-07 15:13:00,0:00:23
2012-11-07 15:13:00,0:00:23
2012-11-07 15:12:00,0:02:29
2012-11-07 15:15:00,0:00:19
2012-11-07 15:15:00,0:00:23
2012-11-07 15:15:00,0:00:23
2012-11-07 15:19:00,0:06:07
2012-11-07 15:22:00,0:00:20
2012-11-07 15:21:00,0:01:00
2012-11-07 15:21:00,0:01:00
2012-11-07 15:27:00,0:00:00
2012-11-07 15:27:00,0:00:00
2012-11-07 15:27:00,0:00:01
2012-11-07 15:27:00,0:00:01
2012-11-07 15:27:00,0:00:01
2012-11-07 15:28:00,0:00:01
2012-11-07 15:28:00,0:00:01
2012-11-07 15:28:00,0:01:13
2012-11-07 15:30:00,0:00:20
2012-11-07 15:30:00,0:00:33
2012-11-07 15:30:00,0:00:33
2012-11-07 15:30:00,0:13:31
2012-11-07 15:31:00,0:05:40
2012-11-07 15:31:00,0:05:43
2012-11-07 15:31:00,0:05:43
2012-11-07 15:35:00,0:18:18
2012-11-07 15:35:00,0:18:18
2012-11-07 15:35:00,0:18:18
2012-11-07 15:40:00,0:08:56
2012-11-07 15:40:00,0:08:59
2012-11-07 15:40:00,0:08:59
2012-11-07 15:46:00,0:18:07
2012-11-07 15:49:00,0:01:39
2012-11-07 15:49:00,0:01:40
2012-11-07 15:49:00,0:01:40
2012-11-07 15:48:00,0:01:59
2012-11-07 15:48:00,0:00:02
2012-11-07 15:50:00,0:00:03
2012-11-07 15:50:00,0:00:24
2012-11-07 15:50:00,0:01:17
2012-11-07 15:52:00,0:00:01
2012-11-07 15:52:00,0:01:24
2012-11-07 15:52:00,0:01:24
2012-11-07 15:52:00,0:01:43
2012-11-07 16:01:00,0:00:03
2012-11-07 16:01:00,0:00:02
2012-11-07 16:01:00,0:00:02
2012-11-07 16:02:00,0:00:34
2012-11-07 16:03:00,0:00:42
2012-11-07 16:05:00,0:00:20
2012-11-07 16:05:00,0:00:27
2012-11-07 16:05:00,0:00:27
2012-11-07 16:05:00,0:00:37
2012-11-07 16:14:00,0:00:55
2012-11-07 16:14:00,0:00:56
2012-11-07 16:14:00,0:00:17
2012-11-07 16:14:00,0:00:17
2012-11-07 16:14:00,0:00:17
2012-11-07 16:13:00,0:01:37
2012-11-07 16:16:00,0:01:01
2012-11-07 16:16:00,0:01:05
2012-11-07 16:16:00,0:01:05
2012-11-07 16:18:00,0:00:20
2012-11-07 16:18:00,0:00:30
2012-11-07 16:18:00,0:00:18
2012-11-07 16:18:00,0:00:18
2012-11-07 16:18:00,0:00:19
2012-11-07 16:17:00,0:00:52
2012-11-07 16:20:00,0:00:20
2012-11-07 16:20:00,0:01:41
2012-11-07 16:20:00,0:01:41
2012-11-07 16:41:00,0:25:43
2012-11-07 16:41:00,0:25:44
2012-11-07 16:41:00,0:00:16
2012-11-07 16:41:00,0:00:16
2012-11-07 16:41:00,0:00:17
2012-11-07 16:41:00,0:26:16
2012-11-07 16:50:00,0:00:36
2012-11-07 16:50:00,0:23:05
2012-11-07 16:54:00,0:01:07
2012-11-07 16:55:00,0:00:02
2012-11-07 16:55:00,0:00:02
2012-11-07 16:55:00,0:00:18
2012-11-07 16:59:00,0:01:08
2012-11-07 16:58:00,0:00:05
2012-11-07 16:58:00,0:00:51
2012-11-07 16:58:00,0:00:05
2012-11-07 16:58:00,0:00:05
2012-11-07 16:58:00,0:00:05
2012-11-07 16:58:00,0:00:05
2012-11-07 16:57:00,0:00:30
2012-11-07 16:57:00,0:00:30
2012-11-07 16:57:00,0:01:22
2012-11-07 16:57:00,0:02:55
2012-11-07 17:07:00,0:00:06
2012-11-07 17:07:00,0:02:47
2012-11-07 17:12:00,0:00:09
2012-11-07 17:12:00,0:00:10
2012-11-07 17:12:00,0:00:10
2012-11-07 17:12:00,0:00:28
2012-11-07 17:13:00,0:00:43
2012-11-07 17:14:00,0:02:13
2012-11-07 17:22:00,0:05:11
2012-11-07 17:23:00,0:00:27
2012-11-07 17:28:00,0:00:07
2012-11-07 17:38:00,0:01:25
2012-11-07 17:46:00,0:01:19
2012-11-07 20:34:00,0:00:20
2012-11-07 20:34:00,0:00:36
2012-11-07 20:34:00,0:00:37
2012-11-07 22:49:00,0:00:20
2012-11-07 22:49:00,0:00:29
2012-11-07 22:49:00,0:00:30 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T16:04:41.613

对于日志中的每个呼叫，计算在该 call_datetime 处于活动状态的呼叫，然后找到最大值：

```
SELECT MAX(calls) FROM
(SELECT cl1.call_datetime, COUNT(*) AS calls
 FROM call_log cl1
 INNER JOIN call_log cl2
 ON cl1.call_datetime
 BETWEEN cl2.call_datetime  AND ADDTIME(cl2.call_datetime, cl2.call_length)
 GROUP BY cl1.call_id) AS counts; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T21:03:02.047

[**SQL 小提琴演示**](http://sqlfiddle.com/#!2/628fb/24)

Demo 不包括您的所有数据（因为 sqlfiddle 上不允许使用超过 8000 个字符），但有一些示例数据

它显示了并发调用的最大计数

```
SELECT MAX(cnt) FROM
(SELECT cl1.b, COUNT(*) AS cnt
 FROM calls cl1
 INNER JOIN calls cl2
 ON cl1.b
 BETWEEN cl2.b  AND ADDTIME(cl2.b, cl2.c)
 GROUP BY cl1.a) AS counts; 
```

和所有可能的计数。

```
SELECT cnt FROM
(SELECT cl1.b, COUNT(*) AS cnt
 FROM calls cl1
 INNER JOIN calls cl2
 ON cl1.b
 BETWEEN cl2.b  AND ADDTIME(cl2.b, cl2.c)
 GROUP BY cl1.a) AS counts; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T13:36:16.900

```
select * from   
(
   select count(*), time(call_datetime) t0 from call_log    
   group by time(call_datetime)   
)  as q0 order by q0.t0 desc; 
```

更改`group by`使用`date, time, hour, min, sec`等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-27T13:29:16.390

尝试为每个通话开始添加 +1，为每个结束添加 -1，然后只需获取该 +1/-1 列的累积总和
***如果需要，请转换通话日期或使用您的格式：

```
set @from:='2015-02-01';
set @to:='2015-03-01';
set @csum:=0;
SELECT DT,CallCount, (@csum := @csum + CallCount) as cumulative_sum
FROM 
(select calldate AS DT, 1 AS CallCount
 from cdr
 where calldate between @from and @to

 union all

 select ADDDATE(calldate,INTERVAL duration SECOND) AS DT, -1 AS CallCount
 from cdr 
 where calldate between @from and @to
  ) Calls
ORDER BY 1 asc; 
```

我在[这里给出了一个答案](https://stackoverflow.com/questions/21420744/mysql-query-peak-concurrent-calls-cdr-data)

# javascript - 将 CSS Matrix3d 变换转换为欧拉角

> ID：13322492
> 
> 赞同：1
> 
> 时间：2012-11-10T13:33:16.263
> 
> 标签：javascript, css, matrix, angle

我不确定这是否可能，因为应用的顺序旋转会影响旋转矩阵的形式；但我想从 CSS matrix3d 变换中获得欧拉角。我发现缺乏关于 matrix3d 格式以及如何应用转换的文档。到目前为止，这是我的代码：

```
getRotation: function (el) {
    var matrix = Esprit.getTransform(el);
    // 2d matrix
    if (matrix.length === 6) {
        return {
            x: 0,
            y: 0,
            z: Math.round(Math.atan2(matrix[1], matrix[0]) * (180 / Math.PI))
        };
    }
    // 3d matrix
    else {
        // incorrect calculations
        // only work for a single rotation
        // return {
        //      x: Math.round(Math.atan2(matrix[6], matrix[5]) * (180/Math.PI)),
        //      y: Math.round(Math.atan2(-matrix[2], matrix[0]) * (180/Math.PI)),
        //      z: Math.round(Math.atan2(matrix[1], matrix[0]) * (180/Math.PI))
        // };

        // convert from string to number
        // for (var i = 0, len = matrix.length; i < len; i++) {
        //      matrix[i] = Number(matrix[i]);
        // }

        // gimball lock for positive 90 degrees
        if (matrix[2] === 1) {
            return {
                x: Esprit.toDegrees(Math.atan2(matrix[0], matrix[1])),
                y: Esprit.toDegrees(Math.PI / 2),
                z: 0
            }
        }
        // gimball lock for negative 90 degrees
        else if (matrix[2] === -1) {
            return {
                x: Esprit.toDegrees(-Math.atan2(matrix[0], matrix[1])),
                y: Esprit.toDegrees(-Math.PI / 2),
                z: 0
            }
        }
        // no gimball lock
        else {
            return {
                x: Esprit.toDegrees(Math.atan2(matrix[6], matrix[10])),
                y: Esprit.toDegrees(Math.asin(matrix[2])),
                z: Esprit.toDegrees(Math.atan2(-matrix[1], matrix[0]))
            }
        }

    }
},

getTransform: function (el) {
    var transform = getComputedStyle(el).webkitTransform;
    return transform !== 'none' ? transform.split('(')[1].split(')')[0].split(',') : Esprit.create3dMatrix();
},

toDegrees: function (radians) {
    return Math.round(radians * 180 / Math.PI);
} 
```

任何帮助或想法将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T16:51:50.713

John Schulz ( [@jfsiii](http://twitter.com/jfsiii) ) 发表了以下回复：

[https://gist.github.com/4119165](https://gist.github.com/4119165)

# plugins - 如何从 NPObject JS 包装类中获取 NPObject

> ID：13322494
> 
> 赞同：2
> 
> 时间：2012-11-10T13:33:28.817
> 
> 标签：plugins, npapi

NP API 插件中的函数创建 NPObject 并返回到 javascript。然后将带有返回 NPObject 的 javascript 变量用作插件其他功能的参数。例如

var obj = plugin.GetObject()

plugin.UseObject( 对象 )

但是在第二个函数（UseObject）中，参数的值不是原始的 NPObject 而是 NPObject JS 包装类。有没有办法从 NPObject JS 包装类的实例中获取原始 NPObject？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T20:22:59.920

**简短的回答：**你不能。

**更复杂的答案：**一些浏览器会给你原始对象，但现在大多数都不会，并且没有办法取消引用它们不透明的 NPObject 接口以返回底层对象。

**替代解决方案：**不要尝试以这种方式获取它，而是向您的 NPObject 添加一个唯一的 id 并将一个全局映射添加到指针。然后当你得到一个你认为可能是对象的 NPObject 时，调用一个方法（或获取一个属性）来获取唯一 ID，然后你可以查找指针。

这是我发现的唯一一种在所有浏览器中都能始终如一地工作的方法。

# java - CPU 使用率飙升

> ID：13322495
> 
> 赞同：1
> 
> 时间：2012-11-10T13:33:37.963
> 
> 标签：java, multithreading, cpu

我的程序一直以最大 1% 的 CPU 使用率运行，但有时由于程序内部的某些事件，我无法确定，它每 15 秒有 5-10 秒的 100% 使用率。它看起来像一个导致使用高峰的线程，但我无法确定它的来源（有 8000 个类，所以这很难）。很难测试问题是否仍然存在（例如在使某些代码“死”之后），因为该问题有时会在虚拟机生命周期的几个小时后开始存在。

您知道什么可以帮助我找到问题的根源吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-10T13:35:54.140

如果没有更多信息，甚至无法尝试猜测问题的原因。

我建议使用诸如[VisualVM](http://visualvm.java.net/)之类的分析器来确定导致问题的线程以及发生问题时可能的确切情况。

例如，使用分析器会告诉您：

*   哪些线程处于活动状态并占用 CPU 资源
*   无论是 VM 还是应用程序线程
*   在垃圾收集操作上花费了多少时间 - GC 通常是 CPU 使用率峰值和延迟的来源，尽管我相信最近的 JVM 在这方面有所改进。
*   是否存在锁定问题
*   ...

# windows - 从后台程序打开前台程序

> ID：13322501
> 
> 赞同：3
> 
> 时间：2012-11-10T13:34:02.600
> 
> 标签：windows, vb.net, visual-studio-2012

我有一个只在后台运行的小程序（没有任何窗口）。它监视按键，当满足某些要求时，它会打开特定程序。问题是程序的窗口没有在前台打开 - 它在当前活动的窗口后面打开。如何强制它在前台打开？

我正在使用 Visual Basic .NET (.NET framework 4.5)，这是我当前的代码：

```
Dim temp As New Process
temp = Process.Start("C:\cygwin\bin\mintty.exe", "-")
temp.WaitForInputIdle(10000) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-10T13:52:04.120

试试这个（它在 C# 中）：取自[这个站点](http://www.dotnetthoughts.net/setting-an-application-on-top-other-windows-using-c/)。

```
internal class Program
{
    [DllImport("user32.dll", SetLastError = true)]
    [return: MarshalAs(UnmanagedType.Bool)]
    private static extern bool SetWindowPos(IntPtr hWnd,
        int hWndInsertAfter, int x, int y, int cx, int cy, int uFlags);

    private const int HWND_TOPMOST = -1;
    private const int SWP_NOMOVE = 0x0002;
    private const int SWP_NOSIZE = 0x0001;

    public static void Main()
    {
        Process process = Process.Start(@"notepad.exe", "");

        if (null != process)
        {
            SetWindowPos(process.MainWindowHandle, HWND_TOPMOST, 0, 0, 0, 0, SWP_NOMOVE | SWP_NOSIZE);
        }
    }
} 
```

# android - 如何在 ANDROID 中获取表格布局单元格的位置

> ID：13322502
> 
> 赞同：1
> 
> 时间：2012-11-10T13:34:07.020
> 
> 标签：android, tablelayout

我在表格布局中添加带有 textview 的动态行，我还想要那个 textview 的 xy 坐标。为此，我使用了`view.getLocationOnScreen(loc)`方法。

但是只显示最后一个项目坐标，我想显示所有项目坐标。

这是我的源代码，请帮助我。

谢谢。

```
public class MainActivity extends Activity {
TextView tv1, tv2;
TableRow row;
TextView txt;
TableLayout tl;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    tl = (TableLayout) findViewById(R.id.tableLayout1);
    for (int i = 0; i <= 15; i++) {
        row = new TableRow(this);
        txt = new TextView(this);

        tl.addView(row);
        row.addView(txt);
        readLocation();
    }
}

@Override
public void onWindowFocusChanged(boolean hasFocus) {
    // TODO Auto-generated method stub
    super.onWindowFocusChanged(hasFocus);
    readLocation();
}

private void readLocation() {
    int[] locationOnScreen = new int[2];
    txt.getLocationOnScreen(locationOnScreen);
    txt.setText(locationOnScreen[0] + " : " + locationOnScreen[1]);
}

} 
```

和我的以下 xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<ScrollView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <TableLayout
        android:id="@+id/tableLayout1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >
    </TableLayout>
</ScrollView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T22:38:14.780

您不应该尝试以`onCreate`这种方式在方法中获取这些坐标，因为此时布局过程尚未完成。

这是基于您的代码的一些修改的演示：

```
public class MainActivity extends Activity {

ArrayList<TextView> txt = new ArrayList<TextView>();
TableLayout tl;

Handler _h = new Handler();

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    tl = (TableLayout) findViewById(R.id.tableLayout1);
    for (Integer i = 0; i <= 15; i++) {
        TableRow therow = new TableRow(this);
        TextView thetxt = new TextView(this);

        therow.addView(thetxt);
        tl.addView(therow);

        txt.add(thetxt);

        thetxt.setText("stub");
    }

    tl.requestLayout();
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

@Override
protected void onResume() {
    super.onResume();
    _h.postDelayed(new Runnable() {

        @Override
        public void run() {

            for (Integer i = 0; i <= 15; i++) {

                TextView thetxt = txt.get(i);

                int[] locationOnScreen = new int[2];
                thetxt.getLocationOnScreen(locationOnScreen);
                thetxt.setText(locationOnScreen[0] + " : " + locationOnScreen[1]);
            }        

        }
    }, 1000);

} 
```

}

关键`postDelayed`在于`onResume`让系统正确定位所有视图。

# jquery - jQuery记忆游戏

> ID：13322510
> 
> 赞同：0
> 
> 时间：2012-11-10T13:34:52.980
> 
> 标签：jquery

我遇到了这个 jQuery 记忆游戏[http://jsbin.com/ozidig/1/](http://jsbin.com/ozidig/1/) 但我希望它有两个不同的图像。此外，对于每个匹配，都会出现不同的消息。

我想我应该为匹配的两个图像和一个 id 创建一个数组，然后我将检查匹配。如果存在匹配，则会出现带有匹配 id 的消息。

但是我在创建数组时遇到了困难……有人知道添加这个功能很热吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T14:35:27.263

我不确定你到底想要什么。

在 jQuery 中，您可以像这样存储图像的 id：

```
var imageIds = new Array();

$("img").each(function(index){
    imageIds[index] = $(this).attr("id"); 
}) 
```

# css - 网页布局结构

> ID：13322513
> 
> 赞同：0
> 
> 时间：2012-11-10T13:35:18.947
> 
> 标签：css, html, layout, webpage

我正在尝试将我的基本网页布局放在一起，但遇到了一些问题。有人可以帮我解决它。我对 CSS 的理解并不高明。

代码：http: [//jsfiddle.net/HJLzt/](http://jsfiddle.net/HJLzt/)

1.  粘性页脚正在工作，我希望在页眉和页脚之间有一个页面左右的列。我不确定我这样做的方式是否正确。

2.  在左右列和页眉和页脚之间我想放置内容。我该如何居中。我找不到合适的方法，因为总是有溢出，我希望它只在左右列之间移动，没有什么可以切断的。

谢谢您的帮助！

编辑：我已经更新了我的布局并使用了一些 jquery 来提供帮助。我知道我应该尝试让一切都在 css 中运行，但这似乎是不可能的。

也许我应该补充一点，我想要一个白板作为主题。我想要一个木制框架，所以侧边栏总是必须连接到页眉和页脚，因为顶部和底部框架穿过那里。

如果有人可以看看并告诉我这是否可以。

```
* { margin:0; padding:0; }

html, body, #wrap { height: 100%; }

body > #wrap {height: auto; min-height: 100%;}

#main { padding-bottom: 150px; }  /* must be same height as the footer */

#main header{
    height: 100px;
    width: 100%;
    background-color: #5d3be6;
}

footer{
    position: relative;
    margin-top: -150px; /* negative value of footer height */
    height: 150px;
    clear:both;
    background-color: #afeba4; 
}

/* CLEAR FIX*/
.clearfix:after {content: ".";
    display: block;
    height: 0;
    clear: both;
    visibility: hidden;}
.clearfix {display: inline-block;}
/* Hides from IE-mac \*/
* html .clearfix { height: 1%;}
.clearfix {display: block;}
/* End hide from IE-mac */

#layout_left{
    float: left;
    width: 100px;
    min-height: 100%;
    height: 100%;
    background-color: #f21ce7;
}

#layout_right{

    float: right;
    width: 100px;
    min-height: 100%;
    height: 100%;   
    background-color: #f21ce7;
}

#content_layout{
    border-left: 100px solid #e4f662;
    border-right: 100px solid #e4f662;
    width: auto;
    height: auto;
    background-color: #c36161;
}

#content{
    margin: auto;
    width: 96%;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T15:33:07.980

正如您所说，您是 CSS 新手，但我强烈建议您不要使用您的布局，这似乎是 10 年前的标准。（当然没有冒犯的意思，你是新手，你还不知道该做什么和不该做什么）。

使用谷歌搜索在线投资组合示例！

回答你的问题：

我认识你的粘性页脚代码，我也没有为我工作，也不完全。

它效果不佳，我建议： [http ://css-tricks.com/snippets/css/sticky-footer/](http://css-tricks.com/snippets/css/sticky-footer/)

我会亲自告诉你，但该教程写得很好，易于理解和实施。

对于居中容器使用：

```
margin: 0 auto; 
```

您可以使用的居中文本：

```
text-align: center; 
```

希望有帮助。

# android - Android 服务 - 数据连接丢失且无法恢复

> ID：13322515
> 
> 赞同：1
> 
> 时间：2012-11-10T13:35:31.317
> 
> 标签：android, service, httpclient

我的服务的背景：它实现了 LocationListener 并在 LocationManager 实例 (locManager) 中注册更新：

```
manager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, this); 
```

在 onLocationChanged 方法中，它使用当前位置调用名为 recordTrace 的方法，然后调用 getHttpResponse 将位置坐标发送到服务器。后一种方法如下：

```
 public InputStream getHttpResponse(String url, ArrayList<NameValuePair> params, int timeout) throws Exception {
    DefaultHttpClient httpClient = new DefaultHttpClient();
    HttpParams httpParams = new BasicHttpParams();
    HttpConnectionParams.setConnectionTimeout(httpParams, timeout);
    httpClient.setParams(httpParams);
    HttpPost post = new HttpPost(url);
    if(params != null && !params.isEmpty()) {
        try {
            post.setEntity(new UrlEncodedFormEntity(params));
        } catch (UnsupportedEncodingException e) {
            Log.e(TAG, "HttpPost.setEntity Error: " + e.getMessage());
            lastError = "błąd HTTP";
        }
    }
    CookieStore store = new BasicCookieStore();
    if(localCookies != null && localCookies.size() > 0) {
        for(int i = 0; i < localCookies.size(); i++) {
            store.addCookie(localCookies.get(i));
        }
    }
    HttpContext context = new BasicHttpContext();
    context.setAttribute(ClientContext.COOKIE_STORE, store);
    HttpResponse response = null;
    HttpEntity entity = null;
    InputStream content = null;
    try {
        response = httpClient.execute(post, context);
        store = (CookieStore) context.getAttribute(ClientContext.COOKIE_STORE);
        List<Cookie> cookies = store.getCookies();
        if(cookies != null && cookies.size() > 0) {
            localCookies = new ArrayList<BasicClientCookie>();
            for(Cookie cookie : cookies) {
                localCookies.add((BasicClientCookie) cookie);
            }
        }
        entity = response.getEntity();
        content = entity.getContent();
        return content;
    } catch (ClientProtocolException e) {
        throw e;
    } catch (IOException e) {
        throw e;
    } catch (Exception e) {
        throw e;
    }
} 
```

params 是带有准备好的数据的 NameValuePair，超时设置为 5000（5 秒）。ArrayList localCookies 保存成功登录之前保存的cookie（以保持会话）。

问题是：当我失去移动信号时（即当我去地铁时）并恢复它，我得到IOException，除非我重新启动手机，否则它是不可恢复的。

任何帮助，将不胜感激。我疯了，秃头了！

谢谢，彼得。

**编辑** 我做了一些研究。方法`getHttpResponse`调用后，我利用了它返回的InputStream，但毕竟没有关闭它。你觉得这可能是问题吗？这是否可能是操作员断开连接然后建立一个新连接，而我`InputStream`以某种方式“保持”以前的连接并产生数据传输问题？

我添加了一个`finally`块，现在 InputSTream 已关闭。但是，由于很难按需引起问题（它不会经常发生），我无法检查关闭流是否解决了它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T13:43:47.750

经过几天的测试，我似乎找到了解决方案。调用 2 个方法可以解决问题：

1.  关闭`InputStream`返回的`httpResponse.getEntity()`

2.  通过执行关闭连接`httpClient.getConnectionManager().shutdown()`

完整请求和响应处理的代码片段：

```
String url = "www.someurl.com";
ArrayList<NameValuePair> params = new ArrayList<NameValuePair>();
params.add(new BasicNameValuePair("login", "mylogin"));
params.add(new BasicNameValuePair("password", "mypassword"));
HttpClient httpClient = new DefaultHttpClient();
HttpPost httpPost = new HttpPost(url);
try {
    httpPost.setEntity(new UrlEncodedFormEntity(params));
    HttpResponse httpResponse = httpClient.execute(httpPost);
    HttpEntity httpEntity = httpResponse.getEntity();
    InputStream content = httpEntity.getContent();
    /*
     * utilize content here...
     */
    content.close();    // here's the point
    httpClient.getConnectionManager().shutdown();   // the second important thing
}
catch (UnsupportedEncodingException e) {}
catch (ClientProtocolException e) {}
catch (IOException e) {} 
```

我正在回答我自己的问题，因为我花了很多时间来搜索导致问题的原因，我认为我可以节省别人的时间。几天后，应用程序仍在工作并且不会中断连接。

问候，

彼得。

# ios - 替换不推荐使用的方法后使用未声明的标识符

> ID：13322523
> 
> 赞同：0
> 
> 时间：2012-11-10T13:36:05.200
> 
> 标签：ios, objective-c, uitableview

代码如下：

```
- (id)initWithFrame:(CGRect)frame reuseIdentifier:(NSString *)reuseIdentifier {
    if (self = [super initWithFrame:frame reuseIdentifier:reuseIdentifier]) {
    // STUFF CONFIGURED HERE
}
return self;
} 
```

问题：因为`initWithFrame:(CGRect)frame reuseIdentifier:(NSString *)reuseIdentifier`已弃用

我用 -`(id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier`代替

然后，编译器报告错误“使用未声明的标识符'frame'”

谁能告诉我如何处理“框架”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T14:43:32.090

```
-(id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier 
```

不提供 frame 参数（与之前的参数不同），但您的实现引用了一个名为 的变量`frame`，因此您会收到错误`Use of undeclared identifier 'frame'`

框架可以通过其`.frame`属性进行更改，因此调用者有责任`initWithStyle...`设置框架。对于 a `UITableViewCell`，您通常不需要设置任何框架，因为表格视图将管理它。

可能值得看看`init`文档：http: [//developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewCell_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewCell_Class/Reference/Reference.html)

# c++ - C++ 全局结构创建名称冲突

> ID：13322530
> 
> 赞同：4
> 
> 时间：2012-11-10T13:37:17.197
> 
> 标签：c++, conflict, naming

我编写了一个非常广泛的框架，可以在物理模拟中驱动角色。尽管每个人都警告我不要这样做，但我还是使用了一个全局公共数据结构来存储信息，并将其称为 State。它也不在命名空间中。我通过声明外部状态状态使其在全球范围内可访问；。我这样做的原因是因为应用程序中的任何地方都需要这种结构，我发现只包含我的 State.h 然后在任何地方写入 state.var 并在任何地方读取 state.var 非常方便。框架也在迅速变化，当引入新组件时，我也不必关心传递数据、同步等，这让我感到很舒服。

无论如何，现在s***击中了粉丝。我想使用 Qt 的 GUI 类之一，它已经有自己的成员，称为 State 类型的 State。它们的状态至少在一个命名空间中，但这似乎并不重要，因为在类内部我已经在使用该命名空间。

我现在能做什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-10T13:43:29.577

你唯一的选择是撕掉你的全局并用理智的东西代替它。这是非常痛苦的，但你真的别无选择。这就是为什么人们首先建议不要使用一个。

简而言之，恭喜你学到了手头的课程——不要使用全局变量。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-10T17:21:06.907

我可能不明白这个问题，但什么阻止你做

```
::state.var 
```

?

Plain`::`表示全局命名空间，虽然使用全局符号有众所周知的问题，并且全局变量也有自己的一组问题（通常在 C++ 代码中，使用单例代替），但在全局中使用全局变量并没有什么神奇的坏处命名空间。`::errno`是与类 Unix 平台上几乎所有 C 和 C++ 应用程序相关联的此类变量的示例。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-10T14:22:31.553

好吧，有一个简单的替代方案：

```
extern State state;
State& mystate = state;

namespace qt {
    class State;

    class Gui {
    public:
        void foo() {
            mystate.var = 3;
        }

    private:
        State* state;
    };
} 
```

...但也有一种叫做[Technical Debt](http://en.wikipedia.org/wiki/Technical_debt)的东西，你正在借钱。

# php - 多个文件的 RewriteCond

> ID：13322532
> 
> 赞同：0
> 
> 时间：2012-11-10T13:37:33.420
> 
> 标签：php, apache, .htaccess

在 htaccess 文件中，一个文件的 RewriteCond`bla.php`可以这样写吗？

```
 RewriteCond %{REQUEST_FILENAME} !bla.php 
```

问题：如何为多个文件编写 RewriteCond？例如对于 3 个文件：`bla.php`, `bla1.php`, `bla2.php` ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T13:41:09.767

使用正则表达式：

```
RewriteCond %{REQUEST_FILENAME} !bla[0-9]*\.php 
```

如果只是有限数量的文件，您可以直接引用名称：

```
RewriteCond %{REQUEST_FILENAME} !(asd|dh6|some_some)\.php 
```

尽管使用单独的条件并将它们组合起来更优雅：

```
RewriteCond %{REQUEST_FILENAME} !asd\.php
RewriteCond %{REQUEST_FILENAME} !dh6\.php
RewriteCond %{REQUEST_FILENAME} !some_some\.php 
```

# java - 为什么java的main方法不应该有返回值？

> ID：13322533
> 
> 赞同：2
> 
> 时间：2012-11-10T13:37:34.943
> 
> 标签：java

> **可能重复：**
> [JVM 在哪里以及为什么检查入口方法 main(String args[]) 的返回类型是否为 void 而不是其他任何东西？](https://stackoverflow.com/questions/2431123/where-and-why-jvm-checks-that-the-return-type-of-entry-method-mainstring-args)
> [java中main的返回类型](https://stackoverflow.com/questions/2441036/return-type-of-main-in-java)

咨询了这两个问题后[，int main()的返回值是什么意思，如何显示？](https://stackoverflow.com/questions/13205941/whats-the-meaning-of-the-return-value-of-int-main-and-how-to-display-it)&[在 C 和 C++ 中 main() 应该返回什么？](https://stackoverflow.com/questions/204476/what-should-main-return-in-c-c)，我想出了另一个问题：

**为什么Java程序的main方法应该返回void，而C/C++程序的main函数应该返回int？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T13:38:28.043

Java规范：

> 方法 main 必须声明为`public`、`static`和`void`。它必须接受一个作为字符串数组的参数。

并进一步：

> 当发生以下两种情况之一时，程序会终止其所有活动并退出：
> 
> *   所有不是守护线程的线程都会终止。
> *   某些线程调用类`Runtime`或类的退出方法，`System`退出操作未被安全管理器禁止。

如您所见，由于其他线程的退出，主返回类型可能毫无意义。

# ruby-on-rails-3 - 视图中的日期格式返回意外格式；控制台中的正确格式

> ID：13322535
> 
> 赞同：0
> 
> 时间：2012-11-10T13:37:39.370
> 
> 标签：ruby-on-rails-3, date

我正在尝试以 YYYY-MMM-DD 方式格式化我的日期。我有一个指定的 en.yml 文件。

```
formats:
  default: ! '%Y-%b-%d' 
```

我还在我的初始化程序文件夹中创建了一个 date_time_formats.rb。

```
Date::DATE_FORMATS[:default] = '%Y-%b-%d'
Time::DATE_FORMATS[:db]= '%Y-%b-%d' 
```

我也尝试将相同的代码直接放在我的`environments.rb`文件中。如果我在控制台中测试默认值，`Date.now.to_s`那么我会得到我期望的回报，“2012-Nov-10”，但在我看来，我总是看到“2012-11-10”。

我尝试使用 and 将其保存在控制器中`Date.now`，`Date.now.to_s`但我仍然得到相同的结果。

我必须缺少一些简单的东西，所以任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T14:07:46.327

我找到了我的问题的答案，虽然我不明白为什么。[这是一个堆栈答案，在这里](https://stackoverflow.com/questions/5303495/change-date-format-in-the-view-to-dd-mm-yyyy?lq=1)解释它

基本上我将这两行代码添加到了我的 environment.rb 中。

```
Time::DATE_FORMATS.merge!({:db => '%m/%d/%Y', :uk_format => '%m/%d/%Y'})
Date::DATE_FORMATS.merge!({:db => '%m/%d/%Y', :uk_format => '%m/%d/%Y'}) 
```

现在一切都按计划进行。我查找了有关合并功能的文档以获得更好的理解，但没有任何运气。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T19:31:41.000

您还可以尝试在视图中本地化您的日期：

```
<%= l(Model.created_at) %> 
```

# nlp - 如何将文本修剪成一定长度的完整句子？

> ID：13322536
> 
> 赞同：0
> 
> 时间：2012-11-10T13:37:44.083
> 
> 标签：nlp, truncate, linguistics, text-manipulation, sentence

我正在寻找一种将未知文本修剪到一定长度的解决方案。只保留完整的句子。

所以像这样的文字

```
"Were you born 1\. 3\. 1987 in Prague? Štěpán Jr. lives there for 3 years now! " 
```

应该变成

```
"Were you born 1\. 3\. 1987 in Prague? " 
```

字符限制为 50、40（和 20 与 --find-next-sentence-ending）。

我读过很多 SO question - 大多数答案都是

```
substr($text, 0, strrpos('.', $text) + 1); 
```

但这显然不适用于上述句子和其他类似句子。其他人建议使用斯坦福文本解析器或 OpenNLP。它们真的很酷，但不适用于典型应用。您不会在 Ruby/PHP 服务器上安装 Java，只是为了修剪文本，对吧。所以我正在寻找一些 80/20 的解决方案，它与语言无关，并且能够处理出现的典型案例。

我想不出比这更有问题的句子（在下一个句子的开头包含日期、非点句结尾和非 ascii 字符，以及“限制”句中间的非结尾点）。

我还创建了一个 GIST (https://gist.github.com/4051035) 供您分叉和玩 - 分叉确保用户可以点击此问题的不同解决方案，所以请使用它;) 我想提出这个问题comunity-wiki，但它似乎不适用于问题 - 仅用于答案。因此，请在评论中添加任何建议/相关的 SO 问题。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T14:23:55.720

如果它足以让您获得 80% 的精度，那么您可以应用简单的规则：

*   每个 '？' 和 '！' 标记句尾
*   当您找到点时，检查下一个单词是否以大写字母开头但不是全部大写（记住它仅适用于 80/20 规则）

如果您需要更好的东西，那么恐怕您需要 nlp 库。如果您有 php/ruby 托管，那么您应该能够使用[NLTK](http://nltk.org)。它是用 python 编写的并且有很大的支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T13:39:32.770

我解决这个问题的粗略想法是检查最后一个句子分隔符（即点空间），检查该位置周围是否有点空间分隔的数字或已知模式，如果有，怯懦地选择前一个句子。也许计算下一个非数字点空间位置，如果它处于某个软限制（比如 $limit+10），则选择当前句子。

# android - AsyncTask.onPostExecute() 不工作

> ID：13322539
> 
> 赞同：2
> 
> 时间：2012-11-10T13:38:06.997
> 
> 标签：android, android-asynctask

我编写了一些代码来从 Google 新闻中读取 RSS 新闻，并更新`ProgressBar`. 我的 RSS 阅读器工作正常，更新完成，但`onPostExecute()`没有被调用，谁能解释为什么？

```
public class loadNews extends AsyncTask<Void, Integer, Void> {

        ArrayList<News> news = new ArrayList<News>();
        ArrayList<ArrayList<News>> allData = new ArrayList<ArrayList<News>>();

        @Override
        protected Void doInBackground(Void... params) {
            // TODO Auto-generated method stub

            // links to get news
            String[] types = { "World", "Bussiness", "Science and Technology",
                    "Entertainment", "Sport", "Health" };
            String[] links = {
                    // World
                    "https://news.google.com.eg/news/feeds?pz=1&cf=all&ned=ar_me&hl=ar&topic=w&output=rss",
                    // Business
                    "https://news.google.com.eg/news/feeds?pz=1&cf=all&ned=ar_me&hl=ar&topic=b&output=rss",
                    // science and technology
                    "https://news.google.com.eg/news/feeds?pz=1&cf=all&ned=ar_me&hl=ar&topic=t&output=rss",
                    // Entertainment
                    "https://news.google.com.eg/news/feeds?pz=1&cf=all&ned=ar_me&hl=ar&topic=e&output=rss",
                    // Sport
                    "https://news.google.com.eg/news/feeds?pz=1&cf=all&ned=ar_me&hl=ar&topic=s&output=rss",
                    // Health
                    "https://news.google.com.eg/news/feeds?pz=1&cf=all&ned=ar_me&hl=ar&topic=m&output=rss" };
            URL url = null;

            for (int j = 0; j < links.length; j++) {

                try {
                    url = new URL(links[j]);
                } catch (MalformedURLException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                DocumentBuilder builder = null;
                try {
                    builder = DocumentBuilderFactory.newInstance()
                            .newDocumentBuilder();
                } catch (ParserConfigurationException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                Document doc = null;
                try {
                    doc = builder.parse(url.openStream());
                } catch (SAXException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                NodeList nodes = doc.getElementsByTagName("item");

                for (int i = 0; i < nodes.getLength(); i++) {
                    Node node = nodes.item(i);
                    Element element = (Element) node;
                    NodeList Ti = element.getElementsByTagName("title");
                    Element el = (Element) Ti.item(0);
                    NodeList temp = el.getChildNodes();
                    String Title = temp.item(0).getNodeValue();
                    Ti = element.getElementsByTagName("link");
                    el = (Element) Ti.item(0);
                    temp = el.getChildNodes();
                    String Link = temp.item(0).getNodeValue();
                    // setting news into arraylist
                    News _news = new News();
                    _news.title = Title;
                    Log.i("this is title of news" + i, _news.title);
                    _news.link = Link;
                    news.add(_news);
                }
                allData.add(news);
                news.clear();
                publishProgress(16);
            }
            publishProgress(4);
            Log.i("end of do in background", "ending");
            return null;
        }

        protected void onProgressUpdate(Integer... progress) {

            pb.incrementProgressBy(progress[0]);
        }

        protected void onPostExcute(String result) {

            Log.i("we in postexcute", "onpostexcute");
            tv.setText("done");

        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T14:53:15.027

我看到了您的代码，并且在您的帖子执行中没有使用字符串结果，您只想在某些文本视图中设置文本，因此如果不需要，请按以下方式更改您的代码并尝试

```
public class LoadNews extends AsyncTask<Void, Void, Void> {

//your variables and other methods..,.

@Override
protected Void doInBackground(Void... params) {
    //your code
    return null;
}

@Override
protected void onPostExecute(Void s)
{
     //your code
     System.out.println("Just for test, remove it");
} 
```

# java - ConcurrentModificationException 具有全局变量，但不是局部变量

> ID：13322540
> 
> 赞同：-1
> 
> 时间：2012-11-10T13:38:11.227
> 
> 标签：java, global-variables, local-variables, concurrentmodification

在下面的函数中，我声明了局部变量`allPeopel`和`itr`（它们是覆盖全局变量）。如果我注释掉局部变量（在下面的 Astrixes 之间），则会引发 ConcurrentModificationError。但是，如果我使用局部变量而不是全局变量，那么代码可以正常工作。我不明白为什么会这样？类中还有许多其他函数，因此我尝试使用全局变量来获得更高效的代码。

```
 public void removeAPerson(){
        int id;
        Scanner sc = new Scanner(System.in);
        System.out.print("Enter ID of person to delete > ");
        id = sc.nextInt();
        sc.nextLine();
        System.out.println();

        /*************************************/
        ArrayList<Person> allPeople;
        allPeople = Person.getAllPeople();
        Iterator itr = allPeople.iterator();
        /*************************************/

        while(itr.hasNext()){
            Person obj = (Person) itr.next();
            int ID = obj.getID2();
            if(ID == id){
                itr.remove();
                break;
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T13:57:30.773

这是您可能拥有的草图：

```
public class MyClass {
  List<Person> persons = new ArrayList<>();
  Iterator<Person> iter = strs.iterator();

  public void addPerson(Person p) {
    persons.add(p);
  }

  public void removePerson() {
    ... your posted code ...
  }

  public static void main(String... args) {
    MyClass c = new MyClass();
    c.addPerson(new Person());
    c.removePerson();
  } 
```

发生的情况是您只实例化迭代器一次，然后将一些内容添加到列表中，然后使用迭代器。像这样重用迭代器的全局实例是没有意义的。具体来说，在实例化它之后，除了通过迭代器本身之外，您不得更改列表。

使用全局**变量**是一回事，但使用迭代器的全局**实例**是另一回事。两者都是错误的，但后者是致命的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T13:55:57.613

使用局部变量，每次线程调用您的方法时，都会创建这些变量的新实例，这些变量对任何其他线程都不可用（除非您特别允许传递引用）。因此，没有其他线程可以修改您的对象。

使用全局（我认为您的意思是`instance`变量、属性），所有有权访问您的对象的线程都可以访问对象的这些属性（让它直接访问，让它通过运行您的对象方法）并且可以修改它们同时您的另一个线程正在运行迭代。由于`iterator`可以检测到`Collection`被迭代的对象何时被修改，当发生这种情况时它会抛出异常（这意味着“我正在迭代集合的所有对象但这些对象不再相同，所以这也是令人困惑，我失败了”。

# wpf - 如何让 WPF DataGrid 显示最新的内容？

> ID：13322554
> 
> 赞同：0
> 
> 时间：2012-11-10T13:40:10.753
> 
> 标签：wpf, database, binding, datagrid

现在我有一个 WPF `DataGrid`，它显示从 LINQ to Entity 查询获得的列表。然而，这并不意味着如果我从数据库中删除某些内容，它将立即从`DataGrid`. 我试过`myGrid.Items.Refresh()`了，但它只刷新了一个单元格。

我知道`ObservableCollection`可以以某种方式解决问题，但我不知道在哪里创建这样的集合和适当的方法，以便每当我创建/添加/修改数据库时，集合也会被修改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T14:06:39.203

DataGrid 包含运行查询时的数据。
如果您想要新数据，则需要重新运行查询。

[SQL Server 中的查询通知](http://msdn.microsoft.com/en-us/library/t9x04ed2.aspx)

如果您不使用 MSSQL，请告诉我，我将删除答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T14:13:26.617

您不需要通过代码与 DataGrid 进行交互。相反，将 DataGrid 的 ItemsSource 绑定到 ObservableCollection 并操作集合。DataGrid 将自动更新。

看看这里：[Bind ObservableCollection to a DataGrid after assignment new value](https://stackoverflow.com/questions/4998255/bind-observablecollection-to-a-datagrid-after-assigning-new-value)

事实上，您会意识到在很多情况下（在我的情况下，这是 95% 的情况），您不想为您的 WPF 控件命名。如果您的代码不了解您的 UI，那么从长远来看，维护起来会更容易。让您的 UI 知道通过数据绑定从何处获取其信息。并查看 INotifyPropertyChanged 或 Dependency Properties 和 DataContext。

```
<DataGrid ItemsSource="{Binding MyCollection}" />

public MainWindow()
    {
        InitializeComponent();
        DataContext = this;
    }

    ObservableCollection<object> myCollection = new ObservableCollection<object>();
    public ObservableCollection<object> MyCollection
    {
    get
    {
        return myCollection;
    }
    set
    {
        myCollection = value;
        // Call the Notification here. Using linq and reflection you could get it to look like this:
        // NotifyPropertyChanged(() => MyCollection);
    }
} 
```

如果您实际上并未更改 myCollection 值，则无需提供更改通知。ObservableCollection 实际上在您修改集合时提供了自己的更改。

# html - 与浮动属性有间隙的 CSS 问题

> ID：13322555
> 
> 赞同：1
> 
> 时间：2012-11-10T13:40:19.143
> 
> 标签：html, css, css-float

我对 CSS 和属性组合还很陌生，我遇到了一个问题，即出现了我不想要的间隙。在玩弄了这些属性并观看了一些 youtube 视频后，我仍然遇到问题。从欢迎磁贴底部到示例标题的间距应为 10 像素。

我正在尝试制作类似于 Windows Metro 或任何他们所称的瓷砖的瓷砖。我已经创建了锚点 ID，并且 ID 的 CSS 创建了图块。

此图显示了问题：

![在此处输入图像描述](../Images/00574db4d16e54dbb8af056a1016a825.png)

```
.header {   
    background:url(../images/header2.png) no-repeat;
    width:384px;    
    height:69px; 
}

#content {  
    position:relative;  
    width:384px;    
    height:646px;   
    margin-top:30px;    
    overflow:hidden;    
    border:none;
    background-color:#CCC; 
}

.welcomeTile {  
    background:url(../images/welcomeTile.jpg) no-repeat;    
    float:left;
    width:180px;    
    height:280px;   
    margin-left:7px; 
}

.aboutTile{     
    background:url(../images/aboutTile.jpg) no-repeat;
    float:left;     
    width:180px;    
    height:105px;   
    margin-left:10px; 
}

.galleryTile{       
    background:url(../images/galleryTile.jpg) no-repeat;
    float:left;     
    width:180px;    
    height:105px;   
    margin-left:10px;
    margin-top:10px; 
}

.examplesTile{      
    background:url(../images/examplesTile.jpg) no-repeat;
    float:left;     
    width:180px;    
    height:105px;   
    margin-left:7px;
    clear:left; 
}

.contactTile{       
    background:url(../images/contactTile.jpg) no-repeat;
    float:left;     
    width:180px;    
    height:105px;   
    margin-top:10px;
    margin-left:7px;    
    clear:left; 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T13:53:45.403

问题似乎是糟糕的数学计算..

和`.aboutTile`两者之间`.galleryTile`都有`105px`高度和`10px`边距。
那是一共`220px`但`.welcomeTile`有`280px`高度。

这留下了 60 多个像素到底部。

如果您希望距离 10 像素，`.examplesTile`则应将 设置`.welcomeTile`为 have `230px`。
或者更好的是有`220px`高度和`10px`底部边距。

**演示在** [http://jsfiddle.net/mCB25/](http://jsfiddle.net/mCB25/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T13:53:56.147

使用 CSS 样式表时，如果您有两个以上的图块堆叠在三个堆栈中的最低两个或两个太多，三个的右侧将跟随第一个，，您将不得不使用负数进行调整你的身高上的数字，所有其他瓷砖将跟随第一个..如果你移动第一个在顶部，所有将跟随它，，现在相反，如果你移动一个中间的顶部也会移动，如果你移动底部或最左边的一个，中间的也会移动，，，所以你用你的高度上的负数来补偿。如果这有帮助，，大声笑很难解释。

# xcode4 - 如何在 Xcode 的弹出窗口中提交构建设置

> ID：13322563
> 
> 赞同：0
> 
> 时间：2012-11-10T13:42:19.623
> 
> 标签：xcode4

在 Xcode 4.3.1 中，每当我尝试更改诸如“其他链接器标志”之类的构建设置时都会遇到极大的困难。

如果我双击，一个弹出窗口会显示表面上允许您添加/删除值。但是，没有“完成”按钮，并且我尝试过的所有组合键（输入/命令输入/等...）都无法提交我输入的值。

可以通过/slow/-双击（WTF，Apple？！？）编辑行来输入一个没有弹出窗口的值。这行得通，但是当它似乎完全没用、误导和烦人时，为什么会弹出默认的双击结果？！？！

一个类似的问题是[在 xcode 4 中编辑构建设置，](https://stackoverflow.com/questions/10321507/editing-build-settings-in-xcode-4)但 bugloaf 关于没有“完成按钮”时该怎么做的问题仍未得到解答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T14:21:37.547

这更多地与如何与 OS X 中的弹出框交互有关。“瞬态”弹出框迫使您在它们外部*单击*以关闭。无论您在其中所做的任何更改都应始终在弹出框被解除时“提交”。这是标准的 Mac 行为。

因此，要回答未回答的问题：单击弹出框外部以关闭/提交。

正如您所建议的，您可以缓慢双击（一次选择，暂停，一次开始编辑单元格）以在没有弹出框的情况下内联编辑文本单元格。这也是标准的 Mac 行为。

双击动作是次要效果，可以理解为“给我一个更大的编辑器”——这似乎只是 Xcode 的行为。如果您认为应该有更好的机制，请提交错误报告。准备好描述一个更好的机制。

# c# - 更改 WSDL 文件以在生成的 C# 类中添加命名空间

> ID：13322567
> 
> 赞同：0
> 
> 时间：2012-11-10T13:42:40.780
> 
> 标签：c#, xml, wsdl, wsdl2code

我使用 .wsdl 文件和 svcutil.exe 生成相关的 .cs 文件，生成的 .cs 文件如下：

```
 public partial class mytargettype {

    [System.ServiceModel.MessageBodyMemberAttribute(Namespace = "", Order = 0)]
    [System.Xml.Serialization.XmlArrayAttribute()]
    [System.Xml.Serialization.XmlArrayItemAttribute("item", Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public string[] prop1;

    [System.ServiceModel.MessageBodyMemberAttribute(Namespace = "", Order = 1)]
    [System.Xml.Serialization.XmlArrayAttribute()]
    [System.Xml.Serialization.XmlArrayItemAttribute("item", Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public string[] prop1;

    [System.ServiceModel.MessageBodyMemberAttribute(Namespace = "", Order = 2)]
    [System.Xml.Serialization.XmlArrayAttribute()]
    [System.Xml.Serialization.XmlArrayItemAttribute("item", Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public string[] prop3;

    [System.ServiceModel.MessageBodyMemberAttribute(Namespace = "", Order = 3)]
    [System.Xml.Serialization.XmlArrayAttribute()]
    [System.Xml.Serialization.XmlArrayItemAttribute("item", Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public System.Nullable<int>[] prop4;

} 
```

.wsdl 文件的相关部分是：

```
 <wsdl:message name="mytargettype">
    <wsdl:part name="prop1" type="ns1:stringArray" />
    <wsdl:part name="prop2" type="ns1:stringArray" />
    <wsdl:part name="prop3" type="ns1:stringArray" />
    <wsdl:part name="prop4" type="ns1:intArray" />
  </wsdl:message> 
```

所以，我需要生成的 .cs 文件如下：

```
 [System.ServiceModel.MessageBodyMemberAttribute(Namespace = "", Order = 2)]
 [System.Xml.Serialization.XmlArrayAttribute(Namespace = "http://jaxb.dev.java.net/array")]
 [System.Xml.Serialization.XmlArrayItemAttribute("item", Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
 public string[] prop3; 
```

如您所见，我需要`XmlArrayAttribute`有命名空间参数，

什么更改需要添加到 .WSDL 文件导致 .cs 文件像上面那样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T16:10:37.987

我认为在你的 WSDL 的某个地方你有这样的部分：

```
<xs:complexType name="stringArray" final="#all">
    <xs:sequence>
        <xs:element minOccurs="0" maxOccurs="unbounded" name="item" nillable="true" type="xs:string" />
    </xs:sequence>
</xs:complexType> 
```

将其更改为以下内容可能会解决您的问题：

```
<xs:complexType name="stringArray" wsdl:arrayType="xs:string" mixed="true">
    <xs:sequence>
        <xs:element minOccurs="0" maxOccurs="unbounded" name="item" nillable="true" type="xs:string" />
    </xs:sequence>
</xs:complexType> 
```

# php - fopen 适用于本地服务器，但不适用于网络服务器

> ID：13322568
> 
> 赞同：2
> 
> 时间：2012-11-10T13:42:51.747
> 
> 标签：php, fopen

我`fopen`用来创建一个新文件。在我的本地服务器上它工作正常，但是在我的网络服务器（与 goDaddy 的 linux 共享主机）上，我得到：

> 警告：fopen（invoices/qbImport519.iif）[function.fopen]：无法打开流：第 97 行的 /home/content/c/h/i/chisled/html/tracking_admin/qbInvoices.php 中没有此类文件或目录

认为这是网络服务器上的设置，我联系了 GoDaddy，他回答说我的帐户上的所有设置都正确设置，以使其正常工作。有任何想法吗？

这是我的代码：

```
 $qbFile = fopen("invoices/qbImport".$Hits.".iif","ab");
  if (is_writable("invoices/qbImport".$Hits.".iif")){
    if (fwrite($qbFile,$iifWrite)){
      echo'<a href="invoices/qbImport'.$Hits.'.iif">Download Your File</a><br/>';
      else {
        echo "<p>Cannot add your entry</p>";
      }
    }
    else {
      echo "<p>The file is not writeable</p>";
    }
  fclose($qbFile); 
```

我已经尝试过路径`/home/content/c/h/i/chiseled/html/tracking_admin/invoices`和`invoices/`.

该文件不存在，因为它基于`$hits`每次递增的变量。所以由于某种原因，它无法创建新文件。我也尝试过`a`这种`fopen`模式。

任何帮助都会很棒。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T13:58:08.140

我已将目录创建为“发票”而不是“发票”。直到凌晨 4 点才开始编码！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-15T14:26:41.143

这是因为 Godaddy 不支持 fwrite。godaddy 有很多限制。最好选择其他好的主机，例如 bluehost、ipage。Godaddy 在域名方面可能不错，但托管很差。甚至 wordpress 也无法在 godaddy 中完美运行。

wordpress 的创建者 Matt Mullenweg 说 [http://wordpress.org/support/topic/more-godaddy-installation-problems](http://wordpress.org/support/topic/more-godaddy-installation-problems)

# iphone - 捕获帧时的 AVCaptureSession 确切时间戳

> ID：13322569
> 
> 赞同：6
> 
> 时间：2012-11-10T13:42:58.367
> 
> 标签：iphone, ios, ipad, avcapturesession

我在 AVCaptureSession 内部，我需要知道被捕获的帧数。

当捕获开始时，我会将帧数计数器重置为零。因此，第一帧的时间戳将为零。后续帧将具有这样的捕获时间戳，例如：

```
0
0.033
0.066
0.099
etc 
```

但这些不是确切的数字，因为可能会丢弃帧并且可能会发生细微的差异。我需要知道捕获帧的确切时间。

我有这个方法，每次抓取一帧时都会调用它......

```
- (void)captureOutput:(AVCaptureOutput *)captureOutput didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer fromConnection:(AVCaptureConnection *)connection 
```

在此方法中，我可以获得帧的 CMTime 并将其打印到控制台，使用：

```
CMTime timestamp = CMSampleBufferGetPresentationTimeStamp( sampleBuffer );
NSLog(@"%lld", timestamp.value); 
```

但这会给我疯狂的数字

```
156317265588132
156317307247388
156317348909678
156317390573453
156317432230603 
```

一个数字和下一个数字之间的差异约为 41,659,256，这似乎并不代表抓取帧时带小数位的秒数。

如果我将这个数字除以时间刻度，使用

```
NSLog(@"%lld", timestamp.value/timestamp.timescale); 
```

25 帧的数字将相同，并且仅在达到一整秒时才会改变。

抓取帧时，如何以秒为单位获得带小数位的确切时间戳？谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-10T13:47:22.137

> 如果我将此数字除以时间刻度，则 25 帧的数字将相同，并且仅在达到一整秒时才会改变。

因为整数除法会截断。怎么样

```
NSLog(@"%f", (float)timestamp.value / timestamp.timescale); 
```

# batch-file - 使用用户输入的值在文本文件中更新特定行号的批处理脚本

> ID：13322573
> 
> 赞同：0
> 
> 时间：2012-11-10T13:43:35.223
> 
> 标签：batch-file

我正在编写批处理脚本，我需要从中更新特定行中的文本文件。例如：在文本文件第 30 行中显示“080-22368865 Ware house”，脚本只需要更改“080-22368865”而不是仓库，因为用户在运行脚本后在命令提示符中输入“022- 26986528”然后在文本文件中的第 30 行应该显示“022-26986528 ware-house”。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T17:15:55.113

您的问题遗漏了几个细节，因此下面的批处理文件只是一个起点。行号在第一个参数中给出。

```
@echo off
setlocal EnableDelayedExpansion
call :editLine %1 < input.txt > output.txt
goto :EOF

:editLine num
set /A skipLines=%1-1
if %skipLines% gtr 0 (
   rem Copy lines before the target
   for /L %%i in (1,1,%skipLines%) do (
      set line=
      set /P line=
      echo(!line!
   )
)
rem Edit the target line
set line=
set /P line=
echo Line %1: "!line!"
for /F "tokens=1*" %%a in ("!line!") do (
   set /P firstToken=Enter new value for "%%a": 
   echo !firstToken! %%b
)
rem Copy the rest of lines
:nextLine
   set line=
   set /P line=
   if not defined line exit /B
   echo !line!
goto nextLine 
```

如果目标行之后有空行，则先前的程序将失败：复制过程在该点停止。正如我之前所说，这个和其他细节可以修复......

# android - Android：将数据添加到 ArrayAdapter 时可见的 ListView 图像闪烁

> ID：13322575
> 
> 赞同：9
> 
> 时间：2012-11-10T13:43:56.377
> 
> 标签：android, android-listview, android-asynctask, android-adapter, cwac-endless

我有一个扩展 ArrayAdapter 的自定义适配器，它实现了视图持有者模式以显示来自 Web 服务的数据（文本 + 图像）。

对于图像的延迟加载，我使用了 Android 开发者网站高级培训中的异步任务模式，

我还使用磁盘 + ram 位图缓存。

当要检索其他数据时，我添加一个页脚视图，单击它会从 Web 服务检索其他数据并将其添加到适配器。

问题是，当添加这些新数据时，一些可见图像正在发生变化并立即变回，从而导致奇怪的闪烁。

除此之外一切正常，滚动流畅。

据我了解，这些图像更改是在添加新数据时刷新可见视图时发生的。

有没有办法绕过这种不需要的行为？

这是下载和管理异步任务的类

```
public class ImageDownloader {
private ImageCache mCache;
private int reqWidth;
private int reqHeight;

public void download(String url, ImageView imageView, ImageCache imageCache, int reqHeight, int reqWidth) {
    mCache = imageCache;
    this.reqHeight = reqHeight;
    this.reqWidth = reqWidth;

    if (cancelPotentialDownload(url, imageView)) {
        BitmapDownloaderTask task = new BitmapDownloaderTask(imageView);

        DownloadedDrawable downloadedDrawable = new DownloadedDrawable(task);
        imageView.setImageDrawable(downloadedDrawable);
        task.execute(url);
    }
}

private class BitmapDownloaderTask extends AsyncTask<String, Void, Bitmap> {
    private String url;
    private WeakReference<ImageView> imageViewReference;

    public BitmapDownloaderTask(ImageView imageView) {
        imageViewReference = new WeakReference<ImageView>(imageView);
    }

    @Override
    protected Bitmap doInBackground(String... strings) {
        Bitmap bitmap = null;
        try {
            bitmap =  mCache.getBitmapFromURL(strings[0], reqWidth, reqHeight);
        } catch (IOException e) {
        }

        return bitmap;
    }

    @Override
    protected void onPostExecute(Bitmap bitmap) {
        if (isCancelled()) bitmap = null;

        if (imageViewReference != null) {
            ImageView imageView = imageViewReference.get();
            BitmapDownloaderTask bitmapDownloaderTask = getBitmapDownloaderTask(imageView);

            if (imageView != null) {
                imageView.setImageBitmap(bitmap);
            }
        }
    }
}

private static class DownloadedDrawable extends ColorDrawable {
    private WeakReference<BitmapDownloaderTask> bitmapDownloaderTaskReference;

    public DownloadedDrawable(BitmapDownloaderTask bitmapDownloaderTask) {
        bitmapDownloaderTaskReference = new WeakReference<BitmapDownloaderTask>(bitmapDownloaderTask);
    }

    public BitmapDownloaderTask getBitmapDownloaderTask() {
        return bitmapDownloaderTaskReference.get();
    }
}

private static BitmapDownloaderTask getBitmapDownloaderTask(ImageView imageView) {
    if (imageView != null) {
        Drawable drawable = imageView.getDrawable();
        if (drawable instanceof DownloadedDrawable) {
            DownloadedDrawable downloadedDrawable = (DownloadedDrawable)drawable;
            return downloadedDrawable.getBitmapDownloaderTask();
        }
    }
    return null;
}

private static boolean cancelPotentialDownload(String url, ImageView imageView) {
    BitmapDownloaderTask bitmapDownloaderTask = getBitmapDownloaderTask(imageView);

    if (bitmapDownloaderTask != null) {
        String bitmapUrl = bitmapDownloaderTask.url;
        if ((bitmapUrl == null) || (!bitmapUrl.equals(url))) {
            bitmapDownloaderTask.cancel(true);
        } else {
            return false;
        }
    }
    return true;
} 
```

}

这是适配器：

私有类 PlaceAdapter 扩展 ArrayAdapter { final int viewResourceId;

```
 public PlaceAdapter(Context context, int textViewResourceId, List<PlaceModel> objects) {
        super(context, textViewResourceId, objects);
        viewResourceId = textViewResourceId;
    }

    @Override
    public View getView(final int position, View convertView, ViewGroup parent) {
        ViewHolder holder;

        if (convertView == null) {
            LayoutInflater inflater = getLayoutInflater();
            convertView = inflater.inflate(viewResourceId, null);

            holder = new ViewHolder(convertView);
            convertView.setTag(holder);
        } else {
            holder = (ViewHolder) convertView.getTag();
        }

        PlaceModel place = getItem(position);

        holder.name.setText(place.getName());
        holder.address.setText(place.getVicinity());
        holder.position = position;

        if (place.getIcon() != null) {
            String url = mImageViewUrls.get(holder.image);
            if (url == null || (url != null && !url.equals(place.getIcon()))) {
                mDownloader.download(place.getIcon(), holder.image, mCache, 100, 100);
                mImageViewUrls.put(holder.image, place.getIcon());
            }
        } else {
            holder.image.setImageBitmap(null);
            mImageViewUrls.remove(holder.image);
        }

        return convertView;
    }
}

private class ViewHolder {
    public final ImageView image;
    public final TextView name;
    public final TextView address;
    public int position;

    public ViewHolder(View row) {
        image = (ImageView) row.findViewById(R.id.placeRow_imageView);
        name = (TextView) row.findViewById(R.id.placeRow_placeName);
        address = (TextView) row.findViewById(R.id.placeRow_placeAddress);
    }
} 
```

`mImageViewUrls`是`WeakHashMap<ImageView, String>`在 an 和 url 之间映射的`ImageView`一个，因此可以通过检查是否`ImageView`已经显示所需的图像来减少冗余的异步任务调用。如果没有这个实现，数据变化时所有可见图像都会发生闪烁。有了这个，它只发生在一些图像上。

编辑：我试图消除这个问题的可能原因，首先我试图完全绕过缓存实现并从网络下载每个位图，然后我尝试用 CommonsWare 的 Endless 适配器包装我的适配器，我得到了相同的结果.. 所以这仅留下 ImageDownloader 类和我的适配器作为可能的原因。我对此完全迷失了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-05-22T10:55:00.160

这种闪烁的原因是，在 listview 列表项被重用。重新使用时，列表项中的图像视图会保留最先显示的旧图像引用。稍后，一旦下载了新图像，它就会开始显示。这会导致闪烁行为。为避免此闪烁问题，请在重用时始终从 imageview 中清除旧图像引用。

在您的情况下，添加**holder.image.setImageBitmap(null);** 在 **holder = (ViewHolder) convertView.getTag();**

因此，您的 getView() 方法将如下所示：

```
@Override
public View getView(final int position, View convertView, ViewGroup parent) {

    ...

    if (convertView == null) {
        LayoutInflater inflater = getLayoutInflater();
        convertView = inflater.inflate(viewResourceId, null);

        holder = new ViewHolder(convertView);
        convertView.setTag(holder);
    } else {
        holder = (ViewHolder) convertView.getTag();
        holder.image.setImageBitmap(null)
    }

    ...

    return convertView;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T20:30:07.243

编辑：我有类似的问题，图像曾经迅速变化。发生这种情况是因为

List 适配器的 getView() 方法被多次调用。每次调用 getView() 时，您都会尝试下载并设置行上的图像。到从网络下载图像时，列表中请求该图像的行可能已移出屏幕的可见部分，但适配器尝试重用该行，这导致在该位置的新行上设置先前请求的图像（以前请求的行位置）。

在适配器中尝试这种方法，使用 setTag 在 ImageView 上设置请求的 URL：

```
if(item.get_referenceImage().length()!=0){
     //with view, hold the url. This is used to verify that right image is loaded on download completion  
     holder.refImageView.setTag(item.get_referenceImage());
     imageManager.loadImage(new MetaItem(item.get_referenceImage(), holder.refImageView));
 }else{
     //no image, set default
     Log.d(TAG, "No images found for the view setting default image");
     holder.refImageView.setTag(null); //this is req, otherwise image cache will retain previous image
     holder.refImageView.setImageResource(R.drawable.blank_96_1382x);
} 
```

在缓存中，在加载位图之前，检查是否加载了正确的图像：

```
 String url = (String) m_imageViewRef.get().getTag();
  if(url != null && url.compareTo(m_metaItem.m_url) == 0 ){ 
        m_metaItem.m_imageViewRef.get().setImageBitmap(result);
  } 
```

PS：MetaItem 只是一个 POJO，用于保存对 imageView 和图像 URL 的引用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-17T12:47:52.217

解决方案是在图像未更改时不重新加载图像。

在你的适配器 getView() 做：

```
// schedule rendering:
final String path = ... (set path here);
if (holder.lastImageUrl == null || !holder.lastImageUrl.equals(path)
                || holder.headerImageView.getDrawable() == null) {
    // refresh image
    imageLoader.displayImage(imageUri, imageAware);
} else {
    // do nothing, image did not change and does not need to be updated
} 
```

成功时（添加 ImageLoadingListener）设置 holder.lastImageUrl = path，失败并取消设置 holder.lastImageUrl 为 null，以便下次重新加载。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-24T07:13:47.913

您可能正在调用`adapter.notifyDatasetChanged()`which 导致`listview`重新加载其列表项。尝试不调用`adapter.notifyDatasetChanged()` 您的列表视图应在您滚动时自动更新。但这可能会`ArrayIndexOutOfBounds`在滚动时导致异常。

# c# - ServiceStack 中的 BasicAuthProvider

> ID：13322576
> 
> 赞同：1
> 
> 时间：2012-11-10T13:44:03.613
> 
> 标签：c#, url, basic-authentication, servicestack

我在 ServiceStack 中遇到了 BasicAuthProvider 的问题。发布到 CredentialsAuthProvider (/auth/credentials) 工作正常。

问题是当 GET-ing（在 Chrome 中）时： `http://foo:pwd@localhost:81/tag/string/list`

以下是结果

> 未找到请求的处理程序：
> 
> Request.HttpMethod: GET Request.HttpMethod: GET Request.PathInfo: /login Request.QueryString: System.Collections.Specialized.NameValueCollection Request.RawUrl: /login?redirect=http%3a%2f%2flocalhost%3a81%2ftag%2fstring% 2flist

这告诉我它把我重定向到 /login 而不是服务 /tag/... 请求。

这是我的 AppHost 的完整代码：

```
public class AppHost : AppHostHttpListenerBase, IMessageSubscriber
{
    private ITagProvider myTagProvider;
    private IMessageSender mySender;

    private const string UserName = "foo";
    private const string Password = "pwd";

    public AppHost( TagConfig config, IMessageSender sender )
        : base( "BM App Host", typeof( AppHost ).Assembly )
    {
        myTagProvider = new TagProvider( config );
        mySender = sender;
    }

    public class CustomUserSession : AuthUserSession
    {
        public override void OnAuthenticated( IServiceBase authService, IAuthSession session, IOAuthTokens tokens, System.Collections.Generic.Dictionary<string, string> authInfo )
        {
            authService.RequestContext.Get<IHttpRequest>().SaveSession( session );
        }
    }

    public override void Configure( Funq.Container container )
    {
        Plugins.Add( new MetadataFeature() );

        container.Register<BeyondMeasure.WebAPI.Services.Tags.ITagProvider>( myTagProvider );
        container.Register<IMessageSender>( mySender );

        Plugins.Add( new AuthFeature( () => new CustomUserSession(),
                new AuthProvider[] {
                    new CredentialsAuthProvider(), //HTML Form post of UserName/Password credentials
                    new BasicAuthProvider(), //Sign-in with Basic Auth
                } ) );

        container.Register<ICacheClient>( new MemoryCacheClient() );
        var userRep = new InMemoryAuthRepository();
        container.Register<IUserAuthRepository>( userRep );

        string hash;
        string salt;
        new SaltedHash().GetHashAndSaltString( Password, out hash, out salt );
        // Create test user
        userRep.CreateUserAuth( new UserAuth
        {
            Id = 1,
            DisplayName = "DisplayName",
            Email = "as@if.com",
            UserName = UserName,
            FirstName = "FirstName",
            LastName = "LastName",
            PasswordHash = hash,
            Salt = salt,
        }, Password );
    }
} 
```

有人可以告诉我我在 SS 配置或我如何调用服务方面做错了什么，即为什么它不接受提供的用户/密码？

**更新 1：仅使用 BasicAuthProvider 时在 Fiddler2 中捕获的请求/响应**。**请求中没有发送 Auth 标头，但响应中也没有 Auth 标头。**

 **```
GET /tag/string/AAA HTTP/1.1
Host: localhost:81
Connection: keep-alive
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.11 (KHTML, like Gecko)        Chrome/23.0.1271.64 Safari/537.11
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Encoding: gzip,deflate,sdch
Accept-Language: en-US,en;q=0.8,sv;q=0.6
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3
Cookie: ss-pid=Hu2zuD/T8USgvC8FinMC9Q==; X-UAId=1; ss-id=1HTqSQI9IUqRAGxM8vKlPA==

HTTP/1.1 302 Found
Location: /login?redirect=http%3a%2f%2flocalhost%3a81%2ftag%2fstring%2fAAA
Server: Microsoft-HTTPAPI/2.0
X-Powered-By: ServiceStack/3,926 Win32NT/.NET
Date: Sat, 10 Nov 2012 22:41:51 GMT
Content-Length: 0 
```

**Update2**请求/响应与 HtmlRedirect = null 。SS 现在使用 Auth 标头进行回答，Chrome 然后发出第二个请求并且身份验证成功

```
GET http://localhost:81/tag/string/Abc HTTP/1.1
Host: localhost:81
Connection: keep-alive
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.64 Safari/537.11
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Encoding: gzip,deflate,sdch
Accept-Language: en-US,en;q=0.8,sv;q=0.6
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3
Cookie: ss-pid=Hu2zuD/T8USgvC8FinMC9Q==; X-UAId=1; ss-id=1HTqSQI9IUqRAGxM8vKlPA==

HTTP/1.1 401 Unauthorized
Transfer-Encoding: chunked
Server: Microsoft-HTTPAPI/2.0
X-Powered-By: ServiceStack/3,926 Win32NT/.NET
WWW-Authenticate: basic realm="/auth/basic"
Date: Sat, 10 Nov 2012 22:49:19 GMT

0

GET http://localhost:81/tag/string/Abc HTTP/1.1
Host: localhost:81
Connection: keep-alive
Authorization: Basic Zm9vOnB3ZA==
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.64 Safari/537.11
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Encoding: gzip,deflate,sdch
Accept-Language: en-US,en;q=0.8,sv;q=0.6
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3
Cookie: ss-pid=Hu2zuD/T8USgvC8FinMC9Q==; X-UAId=1; ss-id=1HTqSQI9IUqRAGxM8vKlPA== 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T18:49:23.907

`foo:pwd@`像这样的 url前缀：

```
http://foo:pwd@localhost:81/tag/string/list 
```

不是您使用 HTTP 进行 BasicAuth 的方式，例如[维基百科页面](http://en.wikipedia.org/wiki/Basic_access_authentication)：

### 使用 HTTP 客户端发送 BasicAuth 请求

当用户代理想要发送服务器身份验证凭据时，它可以使用 Authorization 标头。

Authorization 标头的构造如下：

1.  用户名和密码组合成一个字符串**“用户名：密码”**
2.  然后使用**Base64对生成的字符串文字进行编码**
3.  然后将**授权**方法和一个空格（即**“Basic”**）放在编码字符串之前。

例如，如果用户代理使用**“Aladin”**作为用户名，使用**“sesam open”**作为密码，那么头部的格式如下：

```
Authorization: Basic QWxhZGluOnNlc2FtIG9wZW4= 
```**

# oracle - Oracle 忽略 Hibernate UserType

> ID：13322577
> 
> 赞同：1
> 
> 时间：2012-11-10T13:44:07.437
> 
> 标签：oracle, hibernate, usertype

我正在用 Hibernate 编写一个应用程序（目前使用 Hibernate 3），它应该是独立于数据库的；目前我正在使用 Derby 和 Oracle（版本 10g Enterprise Edition Release 10.2.0.4.0）。

我的几个数据库列包含布尔值。很久以前就决定将它们存储为“Y”或“N”，然后使用 UserType 将它们映射到 Java 布尔值。有大量用于单元测试的数据文件依赖于这个配置，所以我不想改变它。

当应用程序使用 Derby 数据库使用 Session.load() 构造包含这些列之一的对象时，一切正常；特别是，对每个布尔列执行 UserType 代码。

但是，当连接到 Oracle 时，永远不会调用 nullSafeGet 的 UserType 代码。这会导致抛出异常: `org.hibernate.util.JDBCExceptionReporter SEVERE: Fail to convert to internal representation`，并带有以下堆栈跟踪：

```
at oracle.jdbc.driver.CharCommonAccessor.getBoolean(CharCommonAccessor.java:185)
at oracle.jdbc.driver.T4CCharAccessor.getBoolean(T4CCharAccessor.java:699)
at oracle.jdbc.driver.OracleResultSetImpl.getBoolean(OracleResultSetImpl.java:626)
at oracle.jdbc.driver.OracleResultSet.getBoolean(OracleResultSet.java:386)
at org.hibernate.type.descriptor.sql.BitTypeDescriptor$2.doExtract(BitTypeDescriptor.java:64)
at org.hibernate.type.descriptor.sql.BasicExtractor.extract(BasicExtractor.java:64)
at org.hibernate.type.AbstractStandardBasicType.nullSafeGet(AbstractStandardBasicType.java:253)
at org.hibernate.type.AbstractStandardBasicType.nullSafeGet(AbstractStandardBasicType.java:249)
at org.hibernate.type.AbstractStandardBasicType.nullSafeGet(AbstractStandardBasicType.java:229)
... 
```

代码位于 AbstractStandardBasicType.nullSafeGet 而不是我的用户类型的 nullSafeGet 的事实似乎表明我的代码没有被调用；在调试器中设置断点可以确认这一点。

我已将 hibernate.dialect 属性设置为`org.hibernate.dialect.Oracle10gDialect`并`oracle.jdbc.OracleDriver`用作 JDBC 驱动程序。

# c# - 如何根据 ASP.NET 中的内容更改 ListView 中图像的 CSS 类 // C#

> ID：13322580
> 
> 赞同：0
> 
> 时间：2012-11-10T13:44:50.320
> 
> 标签：c#, asp.net, css, listview, dataset

我有一个`ListView`从`DataSet`MySql 数据库加载出来的数据。显示`ListView`了一个文本模块列表，以便稍后创建一个 word 文件。这是`ListView`定义：

```
<asp:ListView ID="addTextModuleList" runat="server" OnItemCommand="addTextModuleList_OnItemCommand" DataKeyNames="ID" >           
    <ItemTemplate>
        <asp:LinkButton ID="addTextModuleButton" runat="server" CssClass="insertTextModuleButtonFade" CommandName="insertTextModule"></asp:LinkButton>
        <div id="listViewId" runat="server" style="float:left; width:24px; height:16px; margin:2px 15px 5px 0px; text-align:right;"><%# Eval("ID") %></div>
        <div style="float:left; width:200px; height:25px; margin:2px 10px 5px 0px; text-align:left; font-weight:bold;"><%# Eval("shortName") %>:</div>
        <div style="float:left; width:700px; margin:5px;"><%# Eval("fullName") %></div>
        <div class="clear"></div>
    </ItemTemplate>        
</asp:ListView> 
```

我想通过单击图标将 textModules 添加到确认中。这就是我的问题。该图标必须以不同的颜色显示，具体取决于是否已添加文本模块。该图标被加载为一个`asp:Linkbutton`，我有一个以绿色显示的图标的 CSS 类和另一个以淡灰色显示的相同图标的 CSS 类。

我可以`CssClass`通过单击来更改图标的 ，但我不知道如何`CssClass`在加载`Page`或 时更改图标的`ListView`。有任何想法吗？

这是我的代码隐藏`DataSet`：

```
protected void executeTemplateSelection()
    {
        // connect to database
        MySqlConnection con = new MySqlConnection();
        con.ConnectionString = Helper.CONNECTION_STRING;
        MySqlCommand cmd = null;

        // load customer textModules
        con.Open();
        cmd = new MySqlCommand();
        cmd.Connection = con;
        cmd.CommandText = "SELECT * FROM textmodule WHERE ID IN " + Session["loadTextModuleTemplates"].ToString();
        MySqlDataAdapter sda = new MySqlDataAdapter(cmd);
        DataSet ds = new DataSet();        
        sda.Fill(ds);
        addTextModuleList.DataSource = ds;
        addTextModuleList.DataBind();
        con.Close();

        cmd = new MySqlCommand();
        con.Open();
        cmd.Connection = con;
        cmd.CommandText = "SELECT * FROM linktextmodule WHERE confirmationId = " + Session["currentConfirmationId"].ToString();
        MySqlDataReader mdr = cmd.ExecuteReader();
        ds.Tables[0].Columns.Add("alreadyAdded");

        while (mdr.Read())
        {            

            for (int i = 0; i <= ds.Tables[0].Rows.Count - 1; i++)
            {
                if (mdr["textModule"].Equals(ds.Tables[0].Rows[i]["ID"]))
                {
                    ds.Tables[0].Rows[i]["alreadyAdded"] = "yes";                    
                }
            }

        }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T16:08:01.893

您可以实现 ListView.ItemDataBound 事件（请参阅[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listview.itemdatabound%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listview.itemdatabound%28v=vs.100%29.aspx)），其中将允许您在绑定时更改每个项目的控件属性。我以前使用过这种方法。

您也可以尝试直接在 CssClass 属性中使用数据绑定语法 ( <%# %> )，但我不确定它是否在 CssClass 属性中像在其他一些属性中一样有效。您已经在 div 中执行此操作，但请参见例如[http://support.microsoft.com/kb/307860](http://support.microsoft.com/kb/307860)，其中他们在属性中给出了示例。

# javascript - 从 jquery 元素返回最大/最高的对象

> ID：13322582
> 
> 赞同：0
> 
> 时间：2012-11-10T13:45:05.017
> 
> 标签：javascript, jquery, size, height

你好！

让我们看一下下面的 jQuery 函数：

```
$.fn.getMax = function() {
    return this.height(Math.max.apply(this, $(this).map(function(i, e) {
        return $(e).height();
    }).get()));
}; 
```

它返回并设置所有选择器的最高高度。但是，如果您想返回`object`具有最高值的（而不是高度）呢？

所以如果你这样调用函数：

```
$(selector).getMax().css({backgroundColor: "indigo"}); 
```

...高度最高的元素如何获得`backgroundColor`？

**更新**

`$.makeArray`正如[Amareswar](https://stackoverflow.com/questions/13322582/return-biggest-heighest-object-from-jquery-elements#comment18174292_13322582)所说，我现在已经用 管理它了。

```
$.fn.getMax = function(prop) {
    var max = $.makeArray($(this)).sort(function(a, b) {
        return (parseInt($(b).css(prop), 10) || 1) - (parseInt($(a).css(prop), 10) || 1);
    }).shift();
    return $(max);
}; 
```

干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T14:21:51.917

尝试这个：

```
$.fn.getMax = function() {
     /* create array of heights*/
    var heights = $(this).map(function(i, e) {
        return $(e).height();
    }).get();
    /* get max height*/
    var max = Math.max.apply(this, heights);
    /* get index of max in array*/
    var pos = $.inArray(max, heights)
    /* return element with proper index*/
    return this.eq(pos);
}; 
```

演示：http: [//jsfiddle.net/tTuE7/](http://jsfiddle.net/tTuE7/)

编辑：假设您只希望返回一个元素

# oop - 使用什么设计模式？

> ID：13322583
> 
> 赞同：4
> 
> 时间：2012-11-10T13:45:12.570
> 
> 标签：oop, design-patterns, func

我想为我的游戏设计一个易于扩展的项目系统，我不需要对现有代码进行太多修改。我想即时添加具有新效果的项目。

我的物品的共同点：

名称，描述，npc售价，是否可以装备，所需等级，是否可在战斗中使用，是否可在战斗外使用，冷却时间

所以我可以把它封装到一个类中。但是现在有物品效果。

示例：治疗 x 点生命值，治疗 x 点法力值，移除减益 x，添加增益 x，装备时给予 x 属性点，装备时有 x% 几率产生其他效果等。

这些可以组合起来，例如：治疗 x 生命值和法力值。前四个是可用物品可以具有的效果的示例，而后两个是可装备物品可以具有的效果的示例。

它背后的想法是我在数据库中也有这个结构，我可以在我的数据库中添加一个具有新效果组合的新项目，然后我的代码读取它并将它一起构建成一个新的花哨项目，而无需我修改很多。我唯一需要修改代码的时候是明显添加新效果的时候。

您将如何将其放在设计模式中？

我想到了装饰师。是否有不同的、更好的设计模式，或者甚至是多种设计模式的组合？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T13:49:56.547

You can use [Decorator Pattern](http://en.wikipedia.org/wiki/Decorator_pattern) to decorate your objects with additional functionality without modifying them.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-10T13:50:54.890

It seems a decorator pattern is good for your needs. Think of a pizza with different tops. You can warp the basic pizza with many tops and at the end you call a function to sum the prize or whatever. It's a kind of wrapper and you pass the object to the next class. Hence you need only a basic class and can add new (top)-class when you need it.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T13:55:37.487

这不是对您问题的直接回答，尽管我认为它需要更多的词而不是评论：

为一大段代码选择一个设计模式不是你通常会预先做的事情（如果你这样做，准备好在你看到它工作后改变它）；在您已经有一些工作代码并希望对其进行重构之后，您更有可能这样做。- 一旦您开始编写代码，您现在做出的任何决定都有可能受到许多（当前）未知因素的影响。

我建议您更多地考虑您想要创建的特性、行为和功能，然后开始编写代码以查看哪些有效并进一步发展您的想法。试图通过围绕“工厂”、“装饰者”、“访客”等流行词预先设计来解决问题，很可能不会让你找到解决方案——设计在很大程度上是一个不断改进、改变和不断迭代的过程。细化。

顺便说一句，特别是在 OO 设计方面，在编写代码时要仔细考虑 SOLID 原则；当您进行重构时，它们应该可以帮助您做出决定

[http://www.blackwasp.co.uk/SOLIDPrinciples.aspx](http://www.blackwasp.co.uk/SOLIDPrinciples.aspx)

[http://butunclebob.com/ArticleS.UncleBob.PrinciplesOfOod](http://butunclebob.com/ArticleS.UncleBob.PrinciplesOfOod)

# android - 如何在android电子邮件中附加多个文件？

> ID：13322588
> 
> 赞同：1
> 
> 时间：2012-11-10T13:46:39.187
> 
> 标签：android

我正在尝试使用意图附加多个文件。

在我的代码下方。

```
 Intent mSendIntent = new Intent(android.content.Intent.ACTION_SEND);
        mSendIntent.setType("plain/text");
        mSendIntent.putExtra(android.content.Intent.EXTRA_EMAIL,
                new String[] { "" });
        mSendIntent.putExtra(android.content.Intent.EXTRA_CC, "");
        mSendIntent.putExtra(android.content.Intent.EXTRA_BCC, "");
        mSendIntent.putExtra(android.content.Intent.EXTRA_SUBJECT,
                "InfoMe Profile Request");
        ArrayList<String> yList = new ArrayList<String>();
        yList.add(path+filename);
        yList.add(path+"save.ime");
        ArrayList<Uri> y = new ArrayList<Uri>();
        for(String a:yList){
            y.add(Uri.fromFile(new File(a)));
        }
        mSendIntent.putParcelableArrayListExtra(Intent.EXTRA_STREAM,
                y);
        mSendIntent.putExtra(android.content.Intent.EXTRA_TEXT,
                Html.fromHtml(bodypart));
        context.startActivity(Intent.createChooser(mSendIntent,
                "Send mail...")); 
```

但是当我发送它时，没有找到附件。请帮助我提前谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T14:02:58.023

这是一个关于如何通过附件发送多个图像的好教程：[http ://android-er.blogspot.hk/2012/10/start-activity-to-send-multi-images.html](http://android-er.blogspot.hk/2012/10/start-activity-to-send-multi-images.html)

仅供参考，`ACTION_SEND`适用于单个附件。对于多个文件，您需要`ACTION_SEND_MULTIPLE`

它的要点是，当您单击按钮调用`Intent`发送电子邮件时，您需要这样的东西：

```
intent.setAction(Intent.ACTION_SEND_MULTIPLE);
intent.putParcelableArrayListExtra(Intent.EXTRA_STREAM, arrayUri);
intent.setType("image/*");
startActivity(Intent.createChooser(intent, "Choice App to send email:")); 
```

这里`arrayUri`声明如下：`ArrayList<Uri> arrayUri = new ArrayList<Uri>();`

按照教程获取完整的功能示例。他们还可以下载整个项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T14:01:53.670

在此之前，您的代码是干净的

```
 Intent mailIntent = new Intent(Intent.ACTION_SEND_MULTIPLE); 
```

# javascript - 接受更多参数的回调函数

> ID：13322590
> 
> 赞同：0
> 
> 时间：2012-11-10T13:47:03.557
> 
> 标签：javascript, callback

我将以下方法添加到对象中：

```
loadAPIServiceData : function(service, format, term, callback) {
        return $.when($.ajax({
            url: service + ((term) ? term : '') + '?format=' + format
        })).done(function(result) {
            return callback.apply(result, [ result ]);
        });
    }, 
```

回调函数被传递了一个参数，当我加载数据时，我需要在链中进一步向下传递（`result`显然得到了我从 AJAX 调用返回的任何内容）。我需要的是能够在调用回调函数时向回调函数添加更多参数，并且仍然`result`在其中:)

更明确地说，这就是我说“*我需要能够在回调函数被调用时向回调函数添加更多参数，并且仍然`result`在那里*”时的意思：

```
var test = loadAPIServiceData('some_service', 'json', 'some_term', function(result, another_parameter, ...) {

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T14:22:05.643

您可以将[bind](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)用于应用参数，而无需修改`loadAPIServiceData`：

```
function myCallback(arg1, arg2, result) {
    //
}

loadAPIServiceData(service, format, term, myCallback.bind(this, arg1, arg2)); 
```

如果您更喜欢保持`result`在第一个 arg 位置，则此代码使用[arguments 对象](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/arguments)将所有附加参数发送到回调：

```
loadAPIServiceData : function(service, format, term, callback) {
    var add_args = Array.prototype.slice.call(arguments, 4);

    return $.when($.ajax({
        url: service + ((term) ? term : '') + '?format=' + format
    })).done(function(result) {
        return callback.apply(this, result, [ result].concat(add_args));
    });
},

function myCallback(result, arg1, arg2) {
    //
}

loadAPIServiceData(service, format, term, myCallback, "arg1", "arg2"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T13:52:48.300

Not sure if I understood your question correctly but does this make sense?

```
function addOptionalParams(result) {
    var params = [];
    params.push(result);

    // do logic to decide if you need more params
    // if you need more params, push them to the params array
    if(weNeedMoreParams) {
        params.push('foo');
        params.push('bar');
    }

    return params;
}

loadAPIServiceData : function(service, format, term, callback) {
    return $.when($.ajax({
        url: service + ((term) ? term : '') + '?format=' + format
    })).done(function(result) {
        var callbackArgs = addOptionalParams(result);

        return callback.apply(this, callbackArgs);
    });
}, 
```

It is the 'done' function which determines which parameters it will invoke the callback with.

# emacs - 自动完成自动完成或基于模式的预测

> ID：13322595
> 
> 赞同：1
> 
> 时间：2012-11-10T13:47:27.743
> 
> 标签：emacs, autocomplete, latex, auctex

我`emacs-snapshot`在 Xubuntu 12.10 上使用 (24.2.50)。为了完成我目前正在使用`auto-complete`（v1.4）。

我有一个非常好的`auto-complete`各种来源设置，包括`semantic`我的 c++ 编程的代码完成源。但是，我想切换到`predictive-mode`完成 LaTeX 文档（我正在使用`AUCTeX`所有与 LaTeX 相关的东西）。

我当前的`auto-complete`配置（对于 LaTeX；我省略了所有非 LaTeX 配置）如下所示：

```
(require 'auto-complete-latex)
(require 'ac-math)
(add-to-list 'ac-modes 'latex-mode) ; make auto-complete aware of {{{latex-mode}}}
(defun ac-latex-mode-setup ()       ; add ac-sources to default ac-sources
  (setq ac-sources
     (append '(ac-source-math-latex ac-source-latex-commands)
           ac-sources))
)
(add-hook 'LaTeX-mode-hook 'ac-latex-mode-setup) 
```

在添加并执行[此处](http://www.dr-qubit.org/predictive/predictive-user-manual/html/Obtaining-and-Installing.html)描述的内容后`predictive`，我尝试通过交换上述代码依次禁用和启用：`load-path``auto-load``auto-complete``LaTeX-mode``predictive-mode`

```
(defun ele/latex-mode-completion-setup ()
  (auto-complete-mode -1)
  (predictive-mode 1)
  )
(add-hook 'LaTeX-mode-hook 'ele/latex-mode-completion-setup) 
```

不幸的是，这不能按预期工作：`auto-complete`实际上已禁用**但未** `predictive-mode`启用**，**而不是使用`AUCTeX`内置`tex-mode`。

我在[这里](http://pastebin.com/fVnGyhRw)上传了所有与 LaTeX 相关的配置。请注意，这是在上述完成设置*之后*`auto-complete`加载的，但基于旧的设置也是如此。另请注意，据我所知，交换该订单并没有什么不同。此外，我发现简单地评论`auto-complete`配置（我发布的第一个片段）会导致相同的行为：`tex-mode`is used 而不是`AUCTeX`.

我不想切换到`predictive-mode`所有模式，但我真的很喜欢它在进行 LaTeX 编辑时提供的许多功能。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T19:00:40.310

（拆钩

可能会清除钩子，而不是运行不需要的东西 - 确实只是一个建议

# java - 如何使用 java 将时间戳插入 Ms-Access？

> ID：13322597
> 
> 赞同：0
> 
> 时间：2012-11-10T13:48:09.403
> 
> 标签：java, ms-access, timestamp

我想将 java Timestamp 插入 msaccess 数据库，但我收到下面列出的错误。ms-access 字段已设置为日期数据类型。任何建议将不胜感激。谢谢

这是我的 DAO 类方法：

```
public void addSale(String saleDetails, String saleTotal, Timestamp saleTimestamp) 
                        throws ClassNotFoundException, SQLException {

     Statement myStatement = getConnection();
     String sql = "INSERT INTO Sale (SaleDetails, SaleTotal, SaleTimestamp)"
                + " VALUES ('"+saleDetails+"','"+saleTotal+"','"+saleTimestamp+")";

     myStatement.executeUpdate(sql);
     closeConnection(); 
```

我的 DTO 方法：

```
public void storeSale(String saleDetails, String saleTotal, Timestamp saleTimestamp){
        DAO dao = DAO.getDAO();
         try {
          dao.addSale(saleDetails, saleTotal, saleTimestamp);
        } catch (ClassNotFoundException | SQLException ex) {
            Logger.getLogger(Sale.class.getName()).log(Level.SEVERE, null, ex);
        }
    } 
```

我的时间戳方法：

```
 public Timestamp addTimestamp(){ 
        java.util.Date date= new java.util.Date();
    return new Timestamp(date.getTime());
    } 
```

和错误：

java.sql.SQLException：[Microsoft][ODBC Microsoft Access Driver] 查询表达式“2012-11-10 09:30:57.174)”中的字符串语法错误。在 sun.jdbc.odbc.JdbcOdbc.createSQLException(JdbcOdbc.java:6956) 在 sun.jdbc.odbc.JdbcOdbc.standardError(JdbcOdbc.java:7113) 在 sun.jdbc.odbc.JdbcOdbc.SQLExecDirect(JdbcOdbc.java:3109) ) 在 sun.jdbc.odbc.JdbcOdbcStatement.execute(JdbcOdbcStatement.java:337) 在 sun.jdbc.odbc.JdbcOdbcStatement.executeUpdate(JdbcOdbcStatement.java:287)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T13:52:16.353

您的查询中有语法错误。试着把你的单引号放在末尾`saletimestamp`

```
String sql = "INSERT INTO Sale (SaleDetails, SaleTotal, SaleTimestamp)"
                + " VALUES ('"+saleDetails+"','"+saleTotal+"','"+saleTimestamp+"')"; 
```

# c# - Ms 访问密码 存储

> ID：13322599
> 
> 赞同：2
> 
> 时间：2012-11-10T13:48:16.310
> 
> 标签：c#, ms-access

我正在使用 MS Access 作为学校项目的数据库。以下是我的查询：

```
public static string qry4 = "update INTERNETSETTINGS set password =  @password , url = @url , databasename = @databasename , port = @port , username = @username"; 
```

它给了我以下错误：`Syntax Error in Update Statement`

```
Command.Parameters.AddWithValue("@url", urlBox.Text.ToString());
Command.Parameters.AddWithValue("@databasename", databaseBox.Text.ToString());
Command.Parameters.AddWithValue("@port", portBox.Text.ToString());
Command.Parameters.AddWithValue("@username", userBox.Text.ToString());
Command.Parameters.AddWithValue("@password", passwordBox.Text.ToString()); 
```

这让我很生气，因为每件事都正常且正确，但我仍然收到错误，但是当我从查询中删除密码时它工作正常。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T13:57:06.890

最有可能`password`的是保留关键字。把它放在牙套里...

```
update INTERNETSETTINGS set [password] = @password... 
```

# javascript - When exactly does the :active pseudo class get applied

> ID：13322601
> 
> 赞同：5
> 
> 时间：2012-11-10T13:48:34.353
> 
> 标签：javascript, css, css-selectors, dom-events, pseudo-class

I was trying to use `querySelector` to find active elements in a page. I assumed that a handler bound to a mousedown event on the document would trigger *after* the event had bubbled its way back from the target, which means the `:active` pseudoclass should already be applied.

```
document.addEventListener("mousedown",function(e){

    console.log(document.querySelector("*:active"));// logs null

    // expected value was the target of the mousedown event, that is,
    console.log(e.target);

}); 
```

My question is: at what point exactly does the the `:active` pseudo-class apply? Note that when I log the value, the `mousedown` event has already triggered on the target.

See [http://jsfiddle.net/tK67w/2/](http://jsfiddle.net/tK67w/2/) for an example. An interesting thing to note here is that if you set a breakpoint within the handler, you can see the css rule I defined for `a:active` already applying, although `querySelector` is returning *null*

EDIT:

Credit goes to TJ for coming up with a much better [demonstration](http://jsfiddle.net/tK67w/7/). The problem still stands though: in browsers other than IE and Chrome, how can I get an HTMLCollection of all active elements as they become active?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T13:58:08.467

我相信问题在于，当您使用`querySelector`时，您只会获得第*一个*活动元素。但是你的锚在树的下方更远。

**更新**：有趣的是，我没有使用 Firefox 或 Opera，但我使用的是 Chrome。以下是 Chrome 结果。请参阅下面的更多内容。

考虑（[实时副本](http://jsfiddle.net/tK67w/3/)）：

```
document.addEventListener("mousedown", handler, false);
function handler(e){
    console.log(
        "event " + e.type + ": " +
        Array.prototype.join.call(document.querySelectorAll("*:active")));
}​ 
```

当我单击锚点时，我会在控制台中看到：

```
事件 mousedown: [object HTMLHtmlElement],[object HTMLBodyElement],[object HTMLDivElement],http://fiddle.jshell.net/_display/#
```

请注意末尾的 URL，这是实例的默认`toString`值，由.`HTMLAnchroElement``join`

由于[`querySelectorAll`](http://www.w3.org/TR/selectors-api/#queryselectorall)需要按文档顺序返回元素，因此如果您想要最具体的活动元素，您将使用最后一个。示例（[实时副本](http://jsfiddle.net/tK67w/4/)）：

```
(function() {
    document.addEventListener("mousedown",handler, false);

    function handler(e){
        var active = document.querySelectorAll("*:active");
        var specific = active && active.length && active[active.length-1];
        display("Most specific active element: " +
                (specific ? specific.tagName : "(none)"));
    }

    function display(msg) {
        var p = document.createElement('p');
        p.innerHTML = String(msg);
        document.body.appendChild(p);
    }
})();
​ 
```

在我的情况下（使用 Chrome），我看到了最具体元素的标签名称（如果我单击链接，则为锚点等）。

* * *

似乎 Chrome 正在遵循规范，而 Firefox 和 Opera 却没有。从CSS3 选择器规范的[第 6.6.1.2 节：](http://www.w3.org/TR/css3-selectors/#the-user-action-pseudo-classes-hover-act)

> `:active`伪类在用户激活元素时应用。例如，在用户按下鼠标按钮并释放它的时间之间。

因此，在我看来，这`:active`应该适用于上述情况。如果我们使用这个 CSS，这个断言就会被备份：

```
*:active {
    background-color: red;
} 
```

...使用此 JavaScript：

```
(function() {
    document.addEventListener("mousedown", mouseDown, false);
    document.addEventListener("mouseup", mouseUp, false);

    function mouseDown(){
        var active = document.querySelectorAll("*:active");
        var specific = active && active.length && active[active.length-1];
        display("Mouse down: Most specific active element: " +
                (specific ? specific.tagName : "(none)"));
    }

    function mouseUp() {
        display("Mouse up");
    }

    function display(msg) {
        var p = document.createElement('p');
        p.innerHTML = String(msg);
        document.body.appendChild(p);
    }
})(); 
```

[实时复制](http://jsfiddle.net/tK67w/7/)

在我尝试过的所有三种浏览器（Chrome、Firefox、Opera）中，当鼠标按下时元素会变成红色背景，当我释放它时又会变成白色；但`mousedown`处理程序在 Firefox 或 Opera 中看不到该`:active`元素，只有 Chrome。

但我不是 CSS 规范律师。:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-02T21:53:23.653

似乎是在帧被渲染之后设置的，或者可能是在当前执行队列之后设置的，至少 Firefox 是这样。

立即使用得到结果`setTimeout`（`requestAnimationFrame`也可以使用）：

```
document.addEventListener('mousedown', e => {

  setTimeout(_ => console.log(document.querySelectorAll(':active')));

}); 
```

# android - Hiding the soft keyboard when typing in EditText in Android 4

> ID：13322602
> 
> 赞同：3
> 
> 时间：2012-11-10T13:49:12.287
> 
> 标签：android, android-edittext, calculator, virtual-keyboard

I am writing a calculator for Android, for inputting expression I use EditText. As I create my buttons - I do not need a software keyboard, but I want to change the cursor position, text selection, copy, paste. In a word - everything as it is, only the virtual keyboard is not displayed. In version 2.3 I could write:

```
EditText.setInputType (InputType.TYPE_NULL); 
```

and it worked perfectly. In version 4 of the cursor is not displayed, the menu does not work, etc. Tried a bunch of ways - you can not move the cursor, the keyboard is displayed, and it was never really explained.

```
InputMethodManager imm = (InputMethodManager)getSystemService(
    Context.INPUT_METHOD_SERVICE);
imm.hideSoftInputFromWindow(myEditText.getWindowToken(), 0); //cursor not showing
------------------------------------------------------------------------
getWindow().setSoftInputMode(
    WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN); //not working 
```

I want to make it as in Panecal, MobiCalc Free, Scientific Calculator. I would be happy with any helpful suggestions on this. P.S. Sorry for my English.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T13:51:52.157

From the link posted below, here is an example to consume on touch for an Edittext

```
editText_input_field.setOnTouchListener(otl);

private OnTouchListener otl = new OnTouchListener() {
    public boolean onTouch (View v, MotionEvent event) {
            return true; // the listener has consumed the event
    }
 }; 
```

Here is another example from the same website. This claims to work but seems like a bad idea since your EditBox is NULL it will be no longer an editor:

```
MyEditor.setOnTouchListener(new OnTouchListener(){ 
    @Override
    public boolean onTouch(View v, MotionEvent event) {
        int inType = MyEditor.getInputType(); // backup the input type
        MyEditor.setInputType(InputType.TYPE_NULL); // disable soft input
        MyEditor.onTouchEvent(event); // call native handler
        MyEditor.setInputType(inType); // restore input type
        return true; // consume touch even
   }
}); 
```

Hope this points you in the right direction

The above answer was taken from - [how to block virtual keyboard while clicking on edittext in android?](https://stackoverflow.com/questions/1845285/how-to-block-virtual-keyboard-while-clicking-on-edittext-in-android/1845307#1845307)

This might work too `getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_HIDDEN);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-14T20:59:24.330

`textIsSelectable`对此的确切解决方案是将EditText 中的标志设置为**true**。这将保留光标，您将能够使用基本的选择/复制/剪切/粘贴等功能。您可以在 xml 布局中设置它，如下所示：

您可以像这样以编程方式设置它：

```
EditText edit_text = (EditText) findViewById(R.id.editText);
edit_text.setTextIsSelectable(true); 
```

或者在您的 XML 布局中：

```
<EditText
    ...
    android:textIsSelectable="true"
/> 
```

对于使用 API 10 及以下版本的任何人，此处提供了 hack：[https ://stackoverflow.com/a/20173020/7550472](https://stackoverflow.com/a/20173020/7550472)

# macos - Load default database in CoreData document based application

> ID：13322603
> 
> 赞同：0
> 
> 时间：2012-11-10T13:49:39.890
> 
> 标签：macos, core-data, nsfilemanager, nsdocument

I have an application based on the documents and I would like that when you create a new file the tableview are pre-populated with default data. I did the following:

1.  I launched my application and I populated the tables, then I saved the file `Untitled.sqlite`
2.  I imported the file `Untitled.sqlite` between the resources of my application
3.  I inserted the following code in the following file

MyApplicationDocumente.m:

```
- (id)init {
self = [super init];
if (self) {
    // Add your subclass-specific initialization here.
    NSFileManager *fileManager = [NSFileManager defaultManager];
    if (![fileManager fileExistsAtPath:@"/Users/andreabollini/Library/Developer/Xcode/DerivedData/Preventivi-euqsrtroavapbwfjvljrxamywbvf/Build/Products/Debug/Preventivi.app/Contents/Resources/en.lproj"]) {
        NSString *defaultStorePath = [[NSBundle mainBundle]
                                      pathForResource:@"Untitled" ofType:@"sqlite"];

        if (defaultStorePath) {
            [fileManager copyItemAtPath:defaultStorePath toPath:@"/Users/andreabollini/Library/Developer/Xcode/DerivedData/Preventivi-euqsrtroavapbwfjvljrxamywbvf/Build/Products/Debug/Preventivi.app/Contents/Resources/en.lproj" error:NULL];
            [tabella1 reloadData];
            [tabella2 reloadData];
        }
    }
}
return self;} 
```

There are no errors, but it does not work. When I open the application, the tableview remains empty and nothing happens. What's wrong?

# php - php静态函数运行两次

> ID：13322604
> 
> 赞同：0
> 
> 时间：2012-11-10T13:49:52.407
> 
> 标签：php, static-functions

我是学习新手，`php static function`我想构建一个函数，从某个 url 卷曲一些内容，然后处理 php regex 以获得我需要的东西。这是我的代码，但 curl 部分运行了两次。如何修改它以缩短运行时间？

```
$url = 'www.php.net/archive/2012.php';
if (!$url){
    exit;
}
echo TestClass::getTitle1($url);
echo '<hr />';
echo TestClass::getTitle2($url);
class TestClass
{
    static function getTitle1($url)
    {
        $data = self::getHtml($url);// run in first time
        preg_match("/(<h1.*>)(.*)(<\/h1>)/",$data,$h1tags); 
        $h1 =  $h1tags[0];
        if (!$h1) return false;
        return $h1;
    }
    static function getTitle2($url)
    {
        $data = self::getHtml($url);// run in second time
        preg_match("/(<h2.*>)(.*)(<\/h2>)/",$data,$h2tags); 
        $h2 =  $h2tags[0];
        if (!$h2) return false;
        return $h2;
    }
    static function getHtml($url){
        $ch = curl_init();
        curl_setopt($ch, CURLOPT_URL, $url);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
        $htmls = curl_exec($ch);
        curl_close($ch);
        if (!$htmls) return false;
        return $htmls;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T14:01:47.207

就像评论一样，将 h1/h2 作为参数传递给您的函数并重写您的替换函数。或者在外面运行 curl 并将结果传递给您的替换函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T14:34:25.610

就像其他人告诉你的那样，不要重复自己并使用参数。

但是如果您需要将来可能使用的另一个类的方法（在多个不同的函数中使用一次性调用的数据），我已经为您编辑了它

```
<?php
class TestClass{
    protected static $data;

    static function getTitle1($url){
        //check if $data is set or not
        $data = self::$data ? self::$data : self::getHtml($url);

        //do your code here
        preg_match("/(<h1.*>)(.*)(<\/h1>)/",$data,$h1tags); 
        $h1 =  $h1tags[0];
        if (!$h1) return false;
        return $h1;
    }
    static function getTitle2($url){
        //check if $data is set or not
        $data = self::$data ? self::$data : self::getHtml($url);

        //do your code here
        preg_match("/(<h1.*>)(.*)(<\/h1>)/",$data,$h1tags); 
        $h1 =  $h1tags[0];
        if (!$h1) return false;
        return $h1;
    }
    static function getHtml($url){        
        $ch = curl_init();
        curl_setopt($ch, CURLOPT_URL, $url);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
        $htmls = curl_exec($ch);
        curl_close($ch);
        if (!$htmls) return false;

        //ADD THIS LINE TO YOUR CODE AS WELL
        self::$data = $htmls;
        return $htmls;
    }
}
$url = 'www.php.net/archive/2012.php';
$class = new TestClass();
echo $class->getTitle1($url);
echo '<hr />';
echo $class->getTitle2($url);
?> 
```

# javascript - lightbox and ajax form inside

> ID：13322607
> 
> 赞同：0
> 
> 时间：2012-11-10T13:50:05.217
> 
> 标签：javascript, jquery, lightbox

I have problem when using my ajax form inside the lightbox div .

the form worked outside the lightbox .

after submit the form , I cannot recieve the variable from the form , I see it empty .

I am using lightbox from here: [http://www.aerowebstudio.net/codecanyon/jquery.lightbox/](http://www.aerowebstudio.net/codecanyon/jquery.lightbox/)

the html example "

```
<html>
<head>

<script type="text/javascript">
            function send_ajax_data() {
                var reg_user = document.getElementById('reg_user').value;
                reg_user2 = document.getElementById('reg_user2').value;
                reg_pass = document.getElementById('reg_pass').value;
                reg_pass2 = document.getElementById('reg_pass2').value;
                reg_email = document.getElementById('reg_email').value;
                alert(reg_user);
            }
        </script>
        <script type="text/javascript">
            $(document).ready(function(){
                $('div.lightbox').lightbox();
            });
        </script>

</head>
<body>

<div id="signup" style="width:756px; margin-right:auto;margin-left:auto;">
        <div class="light-box">

        <div class="center">
        <div class="welcome">
        <h1>Hello</h1>

        </div>

        <div id="reg_stats"></div>
        <div class="login-form">
        <div class="form-container">
            <label class="label">xxx</label>
            <input id="reg_user" type="text" />
            <label class="label">xxx</label>
            <input id="reg_user2" type="text" />
            <label class="label">xxx</label>
            <input id="reg_email" type="text" />
            <label class="label">xxx</label>
            <input id="reg_pass" type="text" />
            <label class="label">xxx</label>
            <input id="reg_pass2"  type="text" />
            <input type="submit" onclick="send_ajax_data();" class="login-btn" value="Done" />
        </div>
        </div>

        </div>
    </div>
</div>
<a href="#signup" class="lightbox">new user</a>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T16:07:19.163

尝试添加表单标签？

如果没有包含输入的表单，就没有什么可以提交的。

# java - Looking for a java code generation library

> ID：13322609
> 
> 赞同：6
> 
> 时间：2012-11-10T13:50:17.310
> 
> 标签：java, code-generation

What is/are "good" java code generation libs? I found a generation part in JaxMe, but it's poor and old. I like to generate java code through java code. So basically use a lib to tell that it has to generate a certain concrete class or interface with X fields, Y methods, etc.. that are then written to the file system.. I know that frameworks use them, but can't find a standalone lib.. - Ed

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T16:24:24.023

有几个库具有各种功能和易用性：

*   [Javassist](https://www.javassist.org/)
*   [阿帕奇BCEL](http://commons.apache.org/bcel/)
*   [ASM](http://asm.ow2.org/)
*   [cglib](http://cglib.sourceforge.net/)

您可能需要查看每个 API 以确定哪个更适合您的目的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T13:52:27.973

Maybe you should be interested in [cglib](http://cglib.sourceforge.net/)?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T16:37:37.163

不久前我也对此进行了研究，并且很难找到任何有用的东西。我发现的最有前途的候选者实际上是内置在编译器中的：

[Java 注释处理 (APT)](http://docs.oracle.com/javase/1.5.0/docs/guide/apt/GettingStarted.html)

他们最近在 javac 中包含了 APT，因此它始终可用。

我还没有太多时间来研究它，但乍一看，它似乎功能无限（生成/修改源代码或字节码，抛出错误，警告，......）但它可能有点复杂把你的头包起来。那里可能有一些很好的教程，但我目前没有具体的链接供您使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-10T16:32:19.287

我最喜欢[ASM](http://asm.ow2.org/)。它使用了访问者模式，当您生成代码时，起初可能会有些混乱；但是一旦你掌握了它，它真的很干净和容易。

# iphone - iphone iOS memoryWarning handle for navigationController and ALAssetlibrary

> ID：13322611
> 
> 赞同：0
> 
> 时间：2012-11-10T13:50:22.017
> 
> 标签：iphone, ios, memory

I do resizing for FullReoslutionImage, so it may introduce memorywarning from iOS. When I recieved memorywarning, it sometimes unload my ALassetlibrary for album, and it introduce crash when users choose image. How could I prevent this kind of problem, how to unload my other resources and other viewController? On other hand, when viewcontroller is unloaded, when I go back to this view , it seems introduce crash. How to prevent it ? Thank you very much!!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T01:27:54.760

我发现当我使用 3rd 方 JPEG 解码库在 2048x2048 UIImage 下对其进行解码和调整大小时，它减少了很多。所以经常发生内存不足可能是由于创建大于 2Kx2K 的 UIImage 造成的。希望这可以帮助。

# c++ - How to use a vector within a class

> ID：13322614
> 
> 赞同：1
> 
> 时间：2012-11-10T13:50:38.460
> 
> 标签：c++, class, vector

I used the Fireworks init function to store a particle into the particles vector class. And when I try to retrieve the count of the particles vector in the update() function, the particles vector is empty. Why?

Fireworks.cpp class:

```
void Fireworks::init(){
    float x = randf();
    float y = - 1 * randf(); //Going UP
    float z = randf();

    Particle part(position,Vector3f(x,y,z), color, randInt(1,50));
    particles.push_back(part);
}

bool Fireworks::update(){
    Particle particle;
    int count = particles.size(); //Total num of particles in system
    cout << particles.size() << " ";
}

class Fireworks: public ParticleSystem {
private:
  void init();

public:

  Fireworks(Vector3f pos, Vector3f col) {
    position = pos;
    color = col;
    init();
  }

  virtual bool update();
}; 
```

particlesystem.h

```
class ParticleSystem {
protected:
  vector<Particle> particles;

public:
  //virtual Particle generateParticle();
  virtual bool update(){return false;};
}; 
```

main.cpp

```
ParticleSystem *PS;
int main( int argc, char *argv[] ) {
  PS = &Fireworks(Vector3f(0,0,0), Vector3f(200,0,255));
  glutIdleFunc(move);
}

void move()
{
   PS->update();       
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T14:21:10.747

```
PS = &Fireworks(Vector3f(0,0,0), Vector3f(200,0,255)); 
```

这引入了未定义的行为。右侧创建一个临时的，将在完整的表达式结束后立即删除（即在 之后`;`）。`PS`将在该行之后指向已删除的对象 - 对其进行任何操作都是未定义的行为。

使用`new`.

```
PS = new Fireworks(Vector3f(0,0,0), Vector3f(200,0,255)); 
```

此外，您*必须*从所有声明为返回某些东西（非 void）的函数返回。它们是否是虚拟的并不重要。

# python - how to find the height of a node in binary tree recursively

> ID：13322616
> 
> 赞同：9
> 
> 时间：2012-11-10T13:50:46.707
> 
> 标签：python, algorithm, binary-tree

```
path = 0 # the lenght of the path
    while self.right != None or self.left != None:
        while self.right != None:
            self = self.right
            path = path +1 
        while self.left != None:
            self = self.left
            path = path +1
    return path 
```

this is my sample code for find the Height, is defined as the length of the longest path by number of nodes from self to a leaf. The height of a leaf node is 1.

it doesn't work.

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-10T14:05:26.697

您正在做的不是递归的，而是迭代的。递归将类似于：

```
def height(node):
    if node is None:
        return 0
    else:
        return max(height(node.left), height(node.right)) + 1 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-10T14:35:47.483

mata 为您提供了解决方案，但我建议您也查看您的代码并了解它在做什么：

```
 while self.right != None:
        self = self.right
        path = path +1 
```

这会做什么？它会找到正确的孩子，然后是它的正确孩子，依此类推。所以这只检查“最右边”叶子的一条路径。

这对左侧也是如此：

```
 while self.left != None:
        self = self.left
        path = path +1 
```

递归的想法是，对于每个子问题，您使用与所有其他子问题完全相同的配方来解决它。因此，如果您仅将算法应用于子树或叶子，它仍然可以工作。

此外，递归定义会调用自身（尽管您可以使用循环来实现它，但这超出了这里的范围）。

记住定义：

递归：参见递归的定义。

;)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-03-10T07:20:19.847

```
def height(node):
    if node is None:
        return 0
    else:
        if node.left==None and node.right==None:
            return max(height(node.left), height(node.right))+0
        else:
            return max(height(node.left), height(node.right))+1 
```

如果您认为每个增加的边缘都是高度。通过hackerrank测试用例

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-06-24T05:18:48.510

```
def getHeight(self, root):
    if root == None:
        return -1
    else:
        return 1 + max( self.getHeight(root.left), self.getHeight(root.right) ) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-01-12T13:56:20.897

这是Python中的完整程序::

```
class Node :
    def __init__(self, data):
        self.data = data
        self.left = None
        self.right = None

def maxDepth(node):
    if node is None :
        return 0
    else :
        ldepth = maxDepth(node.left)
        rdepth = maxDepth(node.right)

        if (ldepth>rdepth):
            return ldepth +1
        else :
            return rdepth +1

root = Node(1)
root.left = Node(2)
root.right = Node(3)
root.left.left = Node(4)
root.left.right = Node(5)

print "Height of tree is %d" %(maxDepth(root)) 
```

来源：[这里](https://www.geeksforgeeks.org/write-a-c-program-to-find-the-maximum-depth-or-height-of-a-tree/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-11-06T14:00:01.390

```
def height(self):
    if self.root !=None:
        return self._height(self.root,0)
    else:
        return 0

def _height(self,cur_node,cur_height):
    if cur_node==None : 
         return cur_height
    left_height = self._height(cur_node.left_child,cur_height+1)
    right_height = self._height(cur_node.right_child,cur_height+1)
    return max(left_height,right_height) 
```

# verilog - How do I simplify ugly nested if else statements?

> ID：13322619
> 
> 赞同：2
> 
> 时间：2012-11-10T13:51:08.743
> 
> 标签：verilog, if-statement, simplify

I am new to programming in general and I find myself depending too much on conditional statements. I find them similar to my train of thought when coding which makes them easy to implement.

Below I have a small code snippet in Verilog which controls a digital clock display. The entire code is pretty much laid out in this way. The code works and is pretty readable. However, I find it to be inelegant. Is it possible to simplify the code while at the same time improving readability?

```
 if (cnt >= clkspeed) begin
        cnt = 0;
        out0 <= out0 + 4'h1;

        // LED0 > 9 -> LED1 += 1
        if (out0 == 4'h9) begin
            out0 <= 4'h0;
            out1 <= out1 + 4'h1;

            // LED1 > 5 -> LED2 += 1
            if (out1 == 4'h5) begin
                out1 <= 4'h0;
                out2 <= out2 + 4'h1;

                // LED2 > 9 -> LED3 += 1
                if (out2 == 4'h9) begin
                    out2 <= 4'h0;
                    out3 <= out3 + 4'h1;

                    // LED3 > 5 -> LED3 = 0
                    if (out3 == 4'h5) begin
                        out3 <= 4'h0;
                    end                     
                end
            end
        end
    end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T15:12:26.823

您的问题是您执行相同的操作四次，因为您将数据存储在标量变量中。这种情况的解决方案是将数字存储在一个数组中，然后循环遍历它们。这个的伪代码是这样的：

```
array<int> digits;
int position = digits.length();
while (position >= 0) {
    digits[position] = (digits[position] + 1) % 10;
    if (digits[position]>0) break; // if there is no carry, just break
    position--;
} 
```

此代码假定每个数字最多为 9。因此您仍然必须添加处理 LED1 和 LED3 的逻辑......（通过使用另一个数组，或者如果您有 OOP 创建一个可以存储实际数字的 LED 对象和LED的限制...）

# performance - Improve the performance of this code

> ID：13322622
> 
> 赞同：1
> 
> 时间：2012-11-10T13:51:34.877
> 
> 标签：performance, matlab

Suppose I have a matrix called A:

```
3 0 3 3
0 0 4 0 
```

And I have this function:

```
while(1)
  if all(A(:,i) == 0)
    i = i + 1;
  else
    i = i + 1
    break;
  end
end 
```

How can I improve the performance of this code?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T14:01:44.153

非常简单地：

```
i = sum(all(A==0,1),2) 
```

# python - Python奇怪的int行为

> ID：13322632
> 
> 赞同：9
> 
> 时间：2012-11-10T13:53:16.077
> 
> 标签：python, int

看看这个：

```
print 41063625 ** (1.0/3)  # cube-root(41063625) = 345
print int(345.0)
print int(41063625 ** (1.0/3)) 
```

它输出：

```
345.0
345
344 
```

我期望最后一行是`345`，因为我期望`int(41063625 ** (1.0/3))`equal `int(345.0)`to 反过来 equal `345`，正如其他两个输出所暗示的那样。然而，显然情况并非如此。谁能告诉我这里发生了什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-10T13:55:44.597

Print（或者更确切地说`float.__str__`）正在舍入输出。

```
In [22]: str( 41063625 ** (1.0/3) )
Out[22]: '345.0' 
```

的浮点表示 `41063625 ** (1.0/3)`小于 345，所以当你取`int`它时，你得到的是 344 而不是 345。

```
In [15]: 41063625 ** (1.0/3)
Out[15]: 344.9999999999999

In [16]: int(345.0)
Out[16]: 345

In [17]: int(41063625 ** (1.0/3))
Out[17]: 344 
```

如果你想要最接近的 int，你可以使用 round：

```
In [18]: round(41063625 ** (1.0/3))
Out[18]: 345.0 
```

或者，得到一个`int`：

```
In [19]: int(round(41063625 ** (1.0/3)))
Out[19]: 345 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T13:56:51.650

因为`41063625 ** (1.0/3)`不是 345.0：

```
In [7]: 41063625 ** (1.0/3)
Out[7]: 344.9999999999999

In [8]: int(344.9999999999999)
Out[8]: 344 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T13:59:25.653

好吧，我从计算中得到的是这样的：

```
>>> 41063625 ** (1.0/3)
344.9999999999999
>>> int(345.0)
345
>>> int(41063625 ** (1.0/3))
344 
```

所以得到 344 是绝对正确的。浮点数的内部表示缺乏一定的准确性，因此转换为`int`总是会给出下限值。

您可以使用该[`round()`](http://docs.python.org/2/library/functions.html#round)函数来获得更合理的值。

# java - 线程 ArrayIndex 中的异常

> ID：13322637
> 
> 赞同：0
> 
> 时间：2012-11-10T13:54:04.383
> 
> 标签：java, arrays

我正在用系列和输入做一些初学者编程，但我经常遇到同样的问题。找不到解决方案。基本上我现在想让我的程序做什么，我输入了一个数字列表并将它们打印出来。我得到了同样的错误一遍又一遍地我在程序中所做的任何更改。这是我的代码。

```
import java.util.Scanner;
public class Test437 {  
public static void main(String[] args) {

  int limit = 25;
  int cnt; 
  int addtion; 
  double dbt; //Devided by two % 2

  Scanner input = new Scanner(System.in);     
  int [] ya = new int[8]; 

  for(cnt = 0;cnt < ya.length;cnt++)
  {

      System.out.print("ya[" + cnt + "]= ");
      ya[cnt] = input.nextInt();

  }

      System.out.println(ya[cnt]);

  }
  } 
```

我收到此错误：线程“main”中的异常 java.lang.ArrayIndexOutOfBoundsException: 8 at Test437.main(Test437.java:22)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T13:55:24.813

`System.out.println(ya[cnt]);`这条线在循环之外。`Cnt`等于数组大小，因此不能以这种方式使用它，因为数组中没有具有这种索引的元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T13:56:39.077

cnt 退出循环的条件是超过长度，因此您进入 indexoutofbounds

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T13:58:06.907

这条线

```
 System.out.println(ya[cnt]); 
```

正在尝试访问不存在的 ya.Length 索引处的元素。

在您的示例中， ya[8] 包含位置从 0 到 7 的元素（ya[0] ya[1] ... ya[7] 并且您正在尝试访问 ya[8] bacuase cnt 变量在 for 之后为 8声明结束。

因此编译器会抛出 indexOutOfBounds 异常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-10T13:59:40.373

该行：

```
System.out.println(ya[cnt]); 
```

接受后需要再次循环打印出所有数组值：

```
for (cnt = 0;cnt < ya.length;cnt++) {
   System.out.println(ya[cnt]);
} 
```

或者，您可以这样做：

```
System.out.println(Arrays.toString(ya)); 
```

# ruby - Ruby 中不违反访问规则的函数指针

> ID：13322639
> 
> 赞同：0
> 
> 时间：2012-11-10T13:54:12.357
> 
> 标签：ruby, function-pointers, member-function-pointers

在 C++ 中，我可以这样做：

```
(condition ? sin : cos)(0.5); 
```

或者

```
typedef std::deque<int> T;
(T().*(condition ? &T::push_back : &T::push_front))(1); 
```

在 Ruby 中，这相当于什么？

我知道我可以使用`send`or `method`，但它们允许我调用`private`方法。

```
# String#puts and String#print are private
("".method condition ? :puts : :print).call 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T14:10:22.007

`send`是使用 Ruby 的方式。如果您不喜欢它，因为它允许调用私有方法，请[`public_send`](http://ruby-doc.org/core-1.9.3/Object.html#method-i-public_send)改用：

```
Math.public_send(condition ? :sin : :cos, 0.5) 
```

# actionscript-3 - AS3：如何查询net组中的已连接用户数？

> ID：13322641
> 
> 赞同：0
> 
> 时间：2012-11-10T13:54:36.240
> 
> 标签：actionscript-3, p2p, adobe-cirrus

我想获得连接到我的网络组的用户数。不仅是我的同龄人/邻居，还有集团内的所有客户。Cirrus 是否提供这样的功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T16:17:50.210

您可以阅读一个属性：

```
NetGroup.estimatedMemberCount 
```

那个告诉你 NetGroup 中所有连接的估计值。这只是基于您连接到的邻居的估计......并且它们连接到..邻居密度......等等。

# ruby-on-rails - 如何关闭 HTTParty 帖子正文中的 URI 编码？

> ID：13322647
> 
> 赞同：2
> 
> 时间：2012-11-10T13:55:47.297
> 
> 标签：ruby-on-rails, paypal, httparty

我正在尝试向 Paypal 发送帖子，他们不希望对任何内容进行 URI 编码。但是 HTTParty 似乎默认情况下会这样做，这对我来说很糟糕。举个简单的例子，当我尝试这段代码时：

```
HTTParty.post("http://google.com/", body: {foo: "http://example.com/bar"}) 
```

我看到帖子正文实际上是

```
foo=http%3A%2F%2Fexample.com%2Fbar 
```

是否可以让 HTTParty 不执行 URI 编码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T10:40:51.533

有可能的。使用不进行任何 URI 编码的 proc 运行类方法 query_string_normalizer。这对我有用。

```
query_string_normalizer proc { |query|
    query.map do |key, value|
        "#{key}=#{value}"
    end.join('&')
} 
```

# authentication - 在同一个域的多个站点上单点登录

> ID：13322651
> 
> 赞同：3
> 
> 时间：2012-11-10T13:56:20.897
> 
> 标签：authentication, cross-platform, single-sign-on, subdomain

我的组织希望能够创建多个站点，即具有不同子域但在同一个域上，即 foo.organization.com、bar.organization.com 等。最好用户只需登录一个站点，然后登录到其他站点。可能有不同的服务器端平台用于实现这些子域站点（一些 ASP.NET MVC，可能是 Django，可能是 Ruby 等），所以这个解决方案最好是跨平台的。这些子域之一将托管主数据库的 API，最好它应该支持服务器到服务器的身份验证以及从客户端代码使用 API。

有什么建议我们应该走哪条路？

问候，丹尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T13:47:36.857

您正在寻找的是单点登录。有几个很好的解决方案可以解决您所描述的需求。您可以研究 SAML、CAS、OpenID 等。

我个人会推荐[RubyCAS——](http://code.google.com/p/rubycas-server/)它是[Jasig 的 CAS 协议](http://www.jasig.org/cas/protocol)在 Ruby 中的实现。我发现设置起来更容易，尽管两者都工作得很好。

任何基于 Web 的应用程序（甚至非基于 Web 的应用程序）都可以将其身份验证委托给它。它的工作方式类似于您向谷歌应用程序进行身份验证的方式。如果您正在访问的特定站点上没有打开会话，您将被重定向到 CAS 服务器上的登录表单，然后如果您能够进行身份验证，则将其与票证一起发回。然后在后端验证票证以确保其有效。

有大量适用于各种平台的 CAS 客户端。我可以亲自担保[ruby​​cas 客户端](http://code.google.com/p/rubycas-client/)和[phpCAS](https://wiki.jasig.org/display/CASC/phpCAS)。看起来有[一些用于 Django](https://bitbucket.org/cpcc/django-cas/overview)，对于遗留 apache 服务的应用程序，您可以使用[mod_auth_cas](https://github.com/Jasig/mod_auth_cas)，它基本上是 CASsified HTTP 基本身份验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T14:05:43.280

很有意思 ！我想知道这与 wamp 或 Lamp 服务器的功能不同。我现在有 44 个网站在 Localhost/each_sites_name/index.php 名​​称空间下的一台 Lamp-server 上运行。要进行 subs，您必须创建一个 site_name 并将其他的放置在其下一级。

主站点 站点 1 站点 2 站点 3 站点 4 等。

# php - PHP 游戏平铺地图图像

> ID：13322653
> 
> 赞同：0
> 
> 时间：2012-11-10T13:56:32.307
> 
> 标签：php, map, tile

我有基于瓷砖的地图

```
$map = '<table border="1">';
for($i = 0; $i < 4; $i++){
    $map .= '<tr>';
    for($i = 0; $i < 4; $i++){
        $map .='<td width="50" height="50"'.$bgcolor.' align="center" valign="center">
        <div id="move_'.$Tx.':'.$Ty.'">('.$Tx.','.$Ty.')</div>
        </td>'; 
    }
    $map .= '</tr>';
}
$map .= '</table>';

echo $map; 
```

每个单元格都有不同的 10x10 像素图像。

```
 _ _ _ _
|_|_|_|_|
|_|_|_|_|
|_|_|_|_|
|_|_|_|_| 
```

我需要每 4 个单元格后出现新图像，因为我的图像是 40x40 像素。但

```
 1.image X|2\. image X 
            _ _ _ _ _ _ _ _
           |_|_|_|_|_|_|_|_|
1.image Y  |_|_|_|_|_|_|_|_|
           |_|_|_|_|_|_|_|_|
           |_|_|_|_|_|_|_|_|
           |_|_|_|_|_|_|_|_|
2.image Y  |_|_|_|_|_|_|_|_|
           |_|_|_|_|_|_|_|_|
           |_|_|_|_|_|_|_|_| 
```

我希望你能理解我，我的英语很糟糕 Omerimuni

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T20:19:06.443

他试图通过将 40px 的图像覆盖到 4x 10px 的表格单元格上来使用 HTML 表格进行 tilemap。

这真的不是做你想做的事情的最佳方式，因为它会创造。主要原因是 HTML 不喜欢将图片堆叠在表格上，并且元素不会正确分层。

尝试使用 HTML5 的`canvas`. 你真的根本不需要 HTML 表格，最终它只会让你的生活更艰难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T21:32:15.777

或者，如果它永远不会改变，则使用图像`<map>`和 1 个大图像。

# javascript - 点击选择所有值并复制到剪贴板（跨浏览器支持）

> ID：13322660
> 
> 赞同：0
> 
> 时间：2012-11-10T13:57:18.780
> 
> 标签：javascript, jquery, copy, clipboard, selectall

当用户单击具有跨浏览器支持的输入本身时，我想全选并将输入值复制到剪贴板。

例子：

点击这个：

```
<input value="Generated Value: www.google.com" /> 
```

它将 SelectAll 并将**Generated Value: www.google.com**复制到剪贴板

*我已经尝试了一些 jquery 现成的脚本，但我无法让它们以这种方式工作，因为它们只有在用户单击按钮或 href 链接时才能工作。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T14:26:54.773

`ZeroClipboard`检查[davidwalsh.name/clipboard](http://davidwalsh.name/clipboard)上的 javascript 库

我希望它会帮助你:-)

# entity-framework - 延迟加载中的异常（实体框架）

> ID：13322661
> 
> 赞同：2
> 
> 时间：2012-11-10T13:57:23.863
> 
> 标签：entity-framework, exception, orm, lazy-loading, dispose

我在我的项目中使用*实体框架。*这个问题是众所周知的，但假设的解决方案（例如[this](http://www.codewrecks.com/blog/index.php/2009/01/08/entity-framework-first-steps/)和[this](https://stackoverflow.com/questions/5360372/the-objectcontext-instance-has-been-disposed-and-can-no-longer-be-used-for-opera)）对我不起作用。

```
/// <summary>
/// Returns complete list of lecturers from DB.
/// </summary>
public IEnumerable<Lecturer> GetAllLecturers()
{
    IList<Lecturer> query;
    using (var dbb = new AcademicTimetableDbContext())
    {
        query = (from b in dbb.Lecturers select b).ToList();
    }
    Debug.WriteLine(query[0].AcademicDegree); // Exception (***)
    return query;
} 
```

例外 （***）：

> ObjectContext 实例已被释放，不能再用于需要连接的操作。

```
public class Lecturer
{
    public Lecturer()
    {
        this.Timetables = new List<Timetable>();
        this.Courses = new List<Course>();
    }

    public int Id_Lecturer { get; set; }
    public string Name { get; set; }
    public string Surname { get; set; }
    public string Phone_Number { get; set; }
    public Nullable<int> Academic_Degree_Id { get; set; }
    public virtual AcademicDegree AcademicDegree { get; set; }
    public virtual ICollection<Timetable> Timetables { get; set; }
    public virtual ICollection<Course> Courses { get; set; }
} 
```

怎么了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T14:03:35.853

延迟加载一直有效`DbContext`。

随着`using`您的处置`DbContext`，当您尝试访问块外的导航属性时，EF 将引发异常`using`。

您可以通过移动不会引发异常`Debug.WriteLine`的块内部来测试它：`using`

```
using (var dbb = new AcademicTimetableDbContext())
{
    query = (from b in dbb.Lecturers select b).ToList();
    Debug.WriteLine(query[0].AcademicDegree);
} 
```

解决方案是告诉 EF使用 using方法[急切加载导航属性](http://msdn.microsoft.com/en-US/data/jj574232)`Include`：

```
using (var dbb = new AcademicTimetableDbContext())
{
    query = (from b in dbb.Lecturers.Include(l => l.AcademicDegree) select b)
      .ToList();

}
Debug.WriteLine(query[0].AcademicDegree); 
```

# node.js - 在 redis / heroko / node.js 上捕获身份验证错误

> ID：13322665
> 
> 赞同：0
> 
> 时间：2012-11-10T13:57:41.127
> 
> 标签：node.js, heroku, redis

我正在运行一个 redis / node.js 服务器并且有一个

```
[Error: Auth error: Error: ERR max number of clients reached] 
```

我当前的设置是，我有一个连接管理器，它添加连接，直到达到我的 heroku 应用程序的最大并发连接数（256，或每个测功机 128）。如果是这样，它只是提供一个已经存在的连接。它速度超快，并且正在工作。

但是，昨天晚上我收到了这个错误，我无法重现它。这可能是一个罕见的错误，我知道它就在那里，我睡得不好。因为：一旦引发错误，我的应用程序将无法再访问。

所以我的问题是：

*   这种连接管理器是个好主意吗？

*   使用该管理器等待调用“空闲”并关闭连接会更好吗，这意味着每次请求启动时我都必须重新建立连接（这是我想要避免的）

*   如何阻止我的应用程序关闭？每当发生错误时，我是否应该刷新连接池？

您处理具有给定最大值的多个并发连接的一般策略是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T10:20:05.430

如果有人正在阅读：

该错误是由我部署的一个混乱的 redis 0.8.x 引起的：

[https://github.com/mranney/node_redis/issues/251](https://github.com/mranney/node_redis/issues/251)

我足够聪明，可以从连接池中删除失败的连接，但忘记在其上调用“.quit()”，因此连接在野外但仍然是连接。

# android - 运行模式下的Android片段空指针，调试中正常

> ID：13322666
> 
> 赞同：0
> 
> 时间：2012-11-10T13:57:43.597
> 
> 标签：android, robotium

如果我在模拟器上以调试模式 Eclipse 运行我的单元测试，它将运行良好且完整，没有错误。但是，如果我在运行模式下执行它，它会崩溃。这是我的片段代码

```
public class TextAnswerButton extends Fragment
{
...
    @Override
    public View onCreateView(final LayoutInflater inflater,
            final ViewGroup container, final Bundle savedInstanceState)
    {
        final View layout = inflater.inflate(R.layout.textanswer, container,
                false);

        answer = (TextAnswer) getArguments().getSerializable("answer");

        final Button button = (Button) layout.findViewById(R.id.button_answer);
        button.setText(answer.getAnswerText());

        button.setOnClickListener(new OnClickListener()
        {
            @Override
            public void onClick(View view)
            {
                callback.answerQuestion(answer);
            }
        });
        return layout;
    }
} 
```

问题是

```
answer = (TextAnswer) getArguments().getSerializable("answer"); 
```

答案在运行模式下将为空。可能导致它为空的时间是什么。它不能足够快地反序列化它吗？

这是我的 Robotium 完整性测试，简单的创建活动并单击按钮。

```
 public void testSelectQuiz() throws Exception {
    SOLO.assertCurrentActivity("Expected QuizListActivity", QuestionActivity.class);
    SOLO.clickOnButton("One");
    //q0.getAnswers().
    //SOLO.cli
} 
```

# python - 在 Reddit 上查找低投票的帖子

> ID：13322677
> 
> 赞同：0
> 
> 时间：2012-11-10T13:58:49.473
> 
> 标签：python, analytics, reddit, data-analysis

[Reddit API](http://www.reddit.com/dev/api)提供任何给定帖子的分数信息，包括赞成票数、反对票数和总分。我想使用这些信息对故事标题进行一些分析，并最终分析故事链接到的内容（自我帖子、博客文章等），以尝试预测哪些帖子会受欢迎，哪些帖子会失败。

Reddit 的 API 提供了从任何给定的 subreddit（包括 r/all）轻松访问得分最高的帖子的方法，但没有一种简单的方法可以找到低分的帖子，特别是考虑到有不同类型的低分。

例如，您可能有一个新的故事，它有 0 次上涨、0 次下跌和 0 分。这个故事是失败的吗？不必要。这只是新的。然而，由于 Reddit 的工作方式，一个故事可能有 0 次上涨、50 次下跌和 0 分。这篇文章很可能是可恶的、垃圾邮件或其他旨在攻击的内容。我认为我需要区分这两种类型的故事以获得更准确的表示。

我希望前 10% 和最低 10% 的故事得分明智，所以如果你知道一种方法来查找提交给 subreddit 的故事总数，我很想听听！

寻找得分低的故事的最佳方法是什么？我是否应该从头版开始并使用蛮力算法，检查每个故事的起伏和得分，直到我有足够的数据？我还需要考虑哪些其他变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T14:29:46.100

> 寻找得分低的故事的最佳方法是什么？

reddit的[搜索功能](http://www.reddit.com/help/search)很可能是您通过 subreddit 或一组 subreddit 查找低分提交的最佳选择。不幸的是，指数中似乎既没有得分，也没有投票数（上升或下降）。也许如果你在[/r/redditdev上问这个问题，你可能会从](http://www.reddit.com/r/redditdev/)[/u/kemitche](http://www.reddit.com/user/kemitche)得到一个有利的答案。

> 我是否应该从头版开始并使用蛮力算法，检查每个故事的起伏和得分，直到我有足够的数据？

您可能还想联系[/u/Deimorz](http://www.reddit.com/user/Deimorz)，因为 Deimorz 已经这样做了 [ [1](http://www.reddit.com/r/TheoryOfReddit/comments/12tm30/introducing_the_stattit_subreddit_time_machine/) , [2](http://www.reddit.com/r/TheoryOfReddit/comments/zcd40/im_in_the_process_of_scraping_every_submission/) ] 并且可能能够为您提供问题的答案。

> 我希望前 10% 和最低 10% 的故事得分明智，所以如果你知道一种方法来查找提交给 subreddit 的故事总数，我很想听听！

不幸的是，如果没有随着时间的推移监控所有提交到 subreddit 的提交，或者追溯尝试爬取 reddit 的所有提交（正如 Deimorz 所做的那样），唯一可能的方法是直接询问 reddit 管理员。

# jquery - 使用 d3 对整个（变化的）对象求和

> ID：13322682
> 
> 赞同：1
> 
> 时间：2012-11-10T13:59:44.813
> 
> 标签：jquery, d3.js

如果我有一个包含 20 个键和 3000 多个条目的对象，有没有办法使用 d3 对整个对象求和？

例如，如果我有：

```
Country: Germany, val2007:9.3, val2008:8.6
Country: Germany,val2007:3.4, val2008:1.0
Country: Austria, val2007:23.0, val2008:9.2
Country: Austria, val2007:1.2, val2007:3.2 
```

我可以生成如下数组吗？

```
Country: Germany,val2007:12.7, val2008:9.6
Country: Austria, val2007:24.2, val2008:12.4 
```

请记住，我不会一直知道键名，并且“val”字段可以是从 val2007 和 val2008 到 val1997 -> val2017 的任何内容

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T17:13:15.290

D3 没有提供一种简单的方法来做到这一点，但它提供了几个有用的工具。第一个是`d3.nest`（[docs](https://github.com/mbostock/d3/wiki/Arrays#wiki-d3_nest)），它可以对特定键上的行进行分组。在那之后，你需要弄清楚如何自己对行求和，比如德国 - 我在这里使用`Array#reduce`，我认为这对这类问题很有效：

```
function rollup(rows) {
    return rows.reduce(function(agg, row) {
        // you could pre-calculate this if all rows had the same keys
        d3.keys(row)
            .filter(function(k) { return k !== 'Country' })
            .forEach(function(k) {
                if (!(k in agg)) agg[k] = 0;
                agg[k] += row[k];
            });
        return agg
    }, {});
}

data = d3.nest()
    .key(function(d) { return d.Country; })
    .rollup(rollup)
    .entries(data)
    .map(function(entry) {
        entry.values.Country = entry.key;
        return entry.values;
    }); 
```

你可以在这里看到工作小提琴：http: [//jsfiddle.net/nrabinowitz/MB3yz/](http://jsfiddle.net/nrabinowitz/MB3yz/)

# c++ - 本机使用程序集引用

> ID：13322685
> 
> 赞同：0
> 
> 时间：2012-11-10T14:00:50.987
> 
> 标签：c++, .net, c

我可以在本地使用 .NET 环境的程序集引用吗？例如，我可以`System.dll`在不存在 .NET Framework 的情况下使用本机 C 或 C++ 的引用吗？我不是指 C++/CLI。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T17:43:56.577

看看[http://social.msdn.microsoft.com/Forums/en-US/vcgeneral/thread/0a0342e4-caec-42d0-bfe5-e0930883f141](http://social.msdn.microsoft.com/Forums/en-US/vcgeneral/thread/0a0342e4-caec-42d0-bfe5-e0930883f141)。如果要调用 system.dll，最简单的可能是托管 CLR。

# javascript - 对于标题背景，Javascript 渲染是否比直接图像更快？

> ID：13322687
> 
> 赞同：0
> 
> 时间：2012-11-10T14:01:17.800
> 
> 标签：javascript, css

我有一个 10 像素高的标题和浏览器窗口的宽度。它具有条纹图案，可在 x 轴上重复。

目前我正在使用[Patternizer](http://info.patternizer.com/)使用 Javascript 和一些基本的条带规则来填充标题。

但是，在渲染之前访问过该站点的浏览器会比使用已经存储在缓存中的 CSS 在 x 轴上重复渲染 20KB 图像更快吗？

作为参考，我说的是[Markpond](http://markpond.com)上的标题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T17:09:33.573

老实说，对于 10px 的 Header-image，重复的 background-image 就可以了（除非您想要动态模式或计划对其进行大量更改）。由于 Patternizr 使用画布元素，它在某些浏览器上会“更慢”（计算），而在移动设备上肯定会“更慢”（计算）。旧 IE 版本也存在兼容性问题，但我不确定细节。

但我们在这里谈论的是微优化。不会有任何大的区别，我不确定你为什么还要问这个问题。

我建议：现在对您的页面进行截图，加载图像并启动 patternizr。

# jquery - jQuery UI 1.9 对话框默认值

> ID：13322689
> 
> 赞同：1
> 
> 时间：2012-11-10T14:01:34.777
> 
> 标签：jquery, jquery-ui, dialog, jquery-ui-dialog

如何在 jQuery UI 1.9.x 中为 jQuery UI 对话框设置默认选项？使用旧的方法

```
$.extend(jQuery.ui.dialog.prototype.options,{
  ...new options...
}); 
```

[正如您在此演示](http://jsbin.com/idugak/3/edit)中看到的那样，似乎不起作用。谢谢你的帮助！

# python - 包含非英文字符、标点符号等特殊字符或单词开头或中间的数字的单词数

> ID：13322691
> 
> 赞同：2
> 
> 时间：2012-11-10T14:01:44.637
> 
> 标签：python, regex, python-3.x

我需要计算包含非英文字符、标点符号等特殊字符或单词开头或中间的数字的单词。我试图用它来做`re`，现在看起来像

```
begin_searcher = re.compile(r'[0-9]+[\w\-]')
middle_searcher = re.compile(r'[\w\-]+[0-9]+[\w\-]')
both_searcher = re.compile(r'[0-9]+[\w\-]+[0-9]+[\w\-]') 
```

但它完全错误。哪位知道`re`我的好，请帮忙。

我需要计算这个：

```
'asfas1254asffas'
'125safasffa'
'asd!asfg'
'asff#dasf'
'sex!!!!'
'safщовфау' 
```

ETC

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T19:53:51.023

如果它可以帮助：

```
def find_alphabetic_words(self, text):
                    letters = ascii_letters
                    letters_nd_term = letters + "?!,."
                    return not any([set(text[:-1]).difference(letters),text[-1] not in letters_nd_term]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T14:25:11.567

由于您提到了“非英语”字符，我建议使用[regex](http://pypi.python.org/pypi/regex/)而不是 stock `re`，因为后者对 unicode 的支持较弱。除非我误解了这个问题，否则您正在寻找类似的东西：

```
regex.match(ur'^\p{L}*[\p{P}\p{Nd}]*\p{L}+$', s) # 
```

where`s`应该是一个 unicode 对象。这匹配`u"123щовßß"`和`u"щов456ßß"`拒绝`u"щовßß!!!"`。

# xcode - UIButton 调整大小以适应文本长度

> ID：13322695
> 
> 赞同：1
> 
> 时间：2012-11-10T14:02:38.943
> 
> 标签：xcode, uibutton

Stack上有很多关于这个主题的帖子，但我无法工作。

我有一个 Button，它的文本文字由一个长度可以改变的变量提供。我希望按钮足够长，以便文本可读，而不是在中间与“.....”连接。

如果我使用类似的东西

```
CGSize stringsize = [myString sizeWithFont:[UIFont systemFontOfSize:15]];
NSLog(@"Width = %f", stringsize.width);
[myButton setFrame:CGRectMake(20,0,stringsize.width, stringsize.height)]; 
```

同样，我也无法获得类似工作的命令。

```
[self myButton sizeToFit]; 
```

有没有人有有效的解决方案？

我正在尝试从 viewDidLoad 实现这些。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-14T22:30:19.273

你在用故事板吗？如果是这样，请转到情节提要中的文件检查器，看看您是否选中了“使用自动布局”。据我所知，在选中此选项时，uibuttons 不会响应帧更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-22T06:48:50.067

**Xcode 7.2 的答案**

单击需要匹配的视图（不是来自左侧面板的视图列表，而是在舞台本身中）

现在点击`Editor`菜单，然后`Size to Fit Content`

**瞧！！**

*您可以使用快捷键* `command`+`=`

# mysql - 分组并首先选择非“空”字段

> ID：13322701
> 
> 赞同：3
> 
> 时间：2012-11-10T14:03:07.827
> 
> 标签：mysql

在未规范化的表结构中，我需要为每个邮政编码选择第一个非空（长度！= 0 且非空）列。

表格布局（两列均为`text`）：

```
| ZIP   | Contact | ...
| 69123 |         | 
| 69123 | WS      | 
| 54516 | null    | 
| 54516 | CS      | 
| 72226 | RH      | 
| 72226 | PH      | 
```

结果应如下所示：

```
| ZIP   | Contact | ...
| 69123 | WS      | 
| 54516 | CS      | 
| 72226 | RH      | 
```

像这样的东西：

```
SELECT ZIP, fristNotEmpty(Contact) 
FROM masterdata GROUP BY ZIP 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T14:08:02.750

```
SELECT ZIP, 
       min(Contact)
FROM masterdata
where Contact is not null and length(Contact) > 0
GROUP BY ZIP 
```

# mysql - 连接 2 个表的 Sql 查询

> ID：13322704
> 
> 赞同：1
> 
> 时间：2012-11-10T14:03:33.940
> 
> 标签：mysql, sql, sqlite

我有 2 张桌子，书和 temp_table。book : 中有 2 列`book_id and tag_id`，而 temp_table ( `tag_id`) 中只有 1 列。

我需要使用以下规则进行选择：

*   如果 book 具有 temp_table 中的所有标签，它将在结果中。

例如，有 3 本书。

```
 First one has tag_id: 1,2,3,4.
   Second - 1,3,4
   Third - 1,2,3,5 
```

并且 temp_table 包含 tag_id: `1,3,4`。

需要的选择必须包含第一和第二本书。3d 书不能在结果集中，因为它的 tag_id = 5，而 temp_table 中没有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T14:05:18.873

```
select book_id
from book b
inner join temp_table t on t.tag_id = tag_id
group by book_id
having count(distinct tag_id) = (select count(distinct tag_id) from temp_table) 
```

# css - 液体布局，中心有 100% 高度的 div 溢出，以及围绕它的可调整大小的 div

> ID：13322706
> 
> 赞同：0
> 
> 时间：2012-11-10T14:03:38.350
> 
> 标签：css, height, overflow, liquid-layout

所以这里是相关的标记，使其更清晰（我也把它放入[jsFiddle](http://jsfiddle.net/holf/uJuwy/20/)）：

**HTML**

```
<div id="header">
    Header
</div>

<div id="container">
    <div id="tableWrapper">
        <div id="tableRowWrapper">
            <div id="nav">
                Navigation
            </div>
            <div id="main">
                <div id="details">
                    Details
                </div>
                <div>
                    Button1 Button2 Button3 Button4 Button5 Button6 Button7
                </div>
                <div id="editor">
                    <div class="paragraph">
                        Vestibulum ante ipsum primis in faucibus orci
                    </div>
                    <div class="paragraph">
                        Vestibulum ante ipsum primis in faucibus orci
                    </div>
                    <div class="paragraph">
                        Vestibulum ante ipsum primis in faucibus orci
                    </div>
                    <div class="paragraph">
                        Vestibulum ante ipsum primis in faucibus orci
                    </div>
                    <div class="paragraph">
                        Vestibulum ante ipsum primis in faucibus orci
                    </div>
                </div>
            </div>
        </div>            
    </div>
</div>

<div id="footer">
    Footer
</div>​ 
```

**CSS**

```
#header{
    position: fixed;
    top: 0px;
    height: 30px;
}

#footer{
    position: fixed;
    bottom: 0px;
    height: 30px;
}

#container{
    position:fixed;
    top:30px;
    bottom:30px;
    left:0;
    right:0;
    overflow:hidden;
    z-index:-1;
    background-color: #dddddd;
}

#tableWrapper
{
    display: table;
    width: 100%;   
    height: 100%;
}

#tableRowWrapper
{
    display: table-row;
}

#nav
{
    display: table-cell;
    background-color: #ccffff;
    resize: horizontal;
    overflow: auto;
    width: 100px;    
}

#main
{
    display: table-cell;
    background-color: #ffffcc;            
}

#details
{
    background-color: #faccfa;
    resize: vertical;
    overflow: auto;
    height: 40px;

}

#editor
{
    background-color: #fddfaf;   
    height: 100%;
    overflow-y: auto;
}

.paragraph
{
    min-height: 150px;
} 
```

这里有几个关键点：

*   我很幸运，只能在 Windows 上定位 Google Chrome，所以我不必担心 IE8 等。
*   中央“编辑器” div 设置了溢出，以便在内容变得太大时垂直滚动条应该发挥作用。
*   左侧的 'nav' div 是可调整大小的，因为您可以抓住它右下角的手柄并使用它来水平调整它的大小。
*   靠近顶部的“详细信息”div 也可以调整大小；你可以抓住它右下角的手柄来垂直调整它的大小。
*   我不想给“详细信息”和“工具栏”div 一个固定的高度。

我遇到的问题是中央“编辑器”div 太大，即使它已`overflow-y : scroll`设置。尽管滚动条确实出现了，但它的底部范围超出了页脚，实际上超出了页面的边缘。

如果我降低整体页面高度（例如通过调整 jsFiddle 中的水平分割器），我可以看到中央“编辑器”div 的大小确实减小了（滚动条相应地增长）。但是，它的整体高度太大。

向左增加“导航”div 的宽度（使用调整大小手柄）也会导致中央“编辑器”div 的滚动条相应增长，这很棒。除了这样一个事实之外，它的整体结果高度也太大了。

'details' 和 'toolbar' div 的内容应该换行。例如，如果你将'nav' div 的宽度增加得足够多（使用resize-handle），你会看到'Button1 / Button2 / etc' 内容开始换行，并且'editor' div 相应地向下移位。“编辑器” div 的高度也需要考虑到这一点。

最后，如果我增加“详细”div 的高度（再次使用调整大小手柄），我发现它根本不会影响中央“编辑器”div 的高度；它只是被推到页面边缘之外，滚动条高度不会改变。

我认为发生这种情况是因为`height: 100%`我在“编辑器”div 上设置的内容是使用其祖先元素中不正确的东西的高度，可能是 body 元素。但我不知道该怎么办。

理想情况下，我会使用纯 CSS 解决方案，因为如果我使用 JavaScript，我可能必须处理许多不同的事件，例如调整导航和详细 div 的大小、调整屏幕大小、页面加载等。但我会如果 JavaScript 解决方案很简单，请对它持开放态度。

确实，简单是我在这里最追求的。

我已经孤立地看到了针对各个方面的不同解决方案，但没有任何东西可以将它们结合在一起。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T18:57:17.453

在 JQueryUI 和 Knockout 的帮助下，我提出了一个 JavaScript 解决方案。

我意识到我希望所做的任何调整都能在页面刷新时保持不变。一旦状态进入它，像 Knockout 支持的 MVVM 方法似乎是一个不错的选择。这也意味着我可以为相关值订阅 JQueryUI Resizable 事件，并相应地重新计算“编辑器”div 的高度。

导航宽度可以更改，细节高度也可以更改。编辑器 div 高度会相应调整。它也适用于首页加载和窗口大小调整。最后，这些调整在页面刷新后仍然存在（我将它们存储在 cookie 中）。

HTML 和 CSS 已被大大简化。

结果在这个[jsFiddle](http://jsfiddle.net/holf/uJuwy/55/)中，也在这里：

**HTML**

```
<div id="header">
    Header
</div>
<div id="container">
    <div id="nav" data-bind="jqResizableWidth: navWidth, jqOptions: { handles: 'e', minWidth: 5 } ">
            Navigation
        </div>
        <div id="main">
            <div id="details" data-bind="jqResizableHeight: detailsHeight, jqOptions: { handles: 's', minHeight: 10 }">
                Details
            </div>
            <div id="toolbar">
                Button1 Button2 Button3 Button4 Button5 Button6 Button7
            </div>
            <div id="editor">
                <div class="paragraph">
                    Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Etiam quam sapien, volutpat ac iaculis ut, malesuada quis massa. Quisque quis risus eu tellus mattis sagittis vulputate at nisl. Donec at nibh non neque facilisis adipiscing. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Donec at condimentum est. Fusce gravida diam vel odio venenatis vitae cursus lorem cursus. Ut tristique, libero quis scelerisque semper, arcu velit faucibus dui, eu imperdiet nisl arcu id enim. Nullam eget placerat risus.
                </div>
                <div class="paragraph">
                    Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Etiam quam sapien, volutpat ac iaculis ut, malesuada quis massa. Quisque quis risus eu tellus mattis sagittis vulputate at nisl. Donec at nibh non neque facilisis adipiscing. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Donec at condimentum est. Fusce gravida diam vel odio venenatis vitae cursus lorem cursus. Ut tristique, libero quis scelerisque semper, arcu velit faucibus dui, eu imperdiet nisl arcu id enim. Nullam eget placerat risus.
                </div>
                <div class="paragraph">
                    Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Etiam quam sapien, volutpat ac iaculis ut, malesuada quis massa. Quisque quis risus eu tellus mattis sagittis vulputate at nisl. Donec at nibh non neque facilisis adipiscing. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Donec at condimentum est. Fusce gravida diam vel odio venenatis vitae cursus lorem cursus. Ut tristique, libero quis scelerisque semper, arcu velit faucibus dui, eu imperdiet nisl arcu id enim. Nullam eget placerat risus.
                </div>
                <div class="paragraph">
                    Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Etiam quam sapien, volutpat ac iaculis ut, malesuada quis massa. Quisque quis risus eu tellus mattis sagittis vulputate at nisl. Donec at nibh non neque facilisis adipiscing. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Donec at condimentum est. Fusce gravida diam vel odio venenatis vitae cursus lorem cursus. Ut tristique, libero quis scelerisque semper, arcu velit faucibus dui, eu imperdiet nisl arcu id enim. Nullam eget placerat risus.
                </div>
                <div class="paragraph">
                    Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Etiam quam sapien, volutpat ac iaculis ut, malesuada quis massa. Quisque quis risus eu tellus mattis sagittis vulputate at nisl. Donec at nibh non neque facilisis adipiscing. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Donec at condimentum est. Fusce gravida diam vel odio venenatis vitae cursus lorem cursus. Ut tristique, libero quis scelerisque semper, arcu velit faucibus dui, eu imperdiet nisl arcu id enim. Nullam eget placerat risus.
                </div>
            </div>
        </div>
</div>

<div id="footer">
    Footer
</div> 
```

**CSS**

```
#header{
    position: fixed;
    top: 0px;
    height: 30px;
}

#footer{
    position: fixed;
    bottom: 0px;
    height: 30px;
}

#container{
    position:fixed;
    top:30px;
    bottom:30px;
    left:0;
    right:0;
    overflow:hidden;
    z-index:-1;
    background-color: #dddddd;
}

#nav
{
    display: table-cell;
    background-color: #ccffff;
}

#nav .ui-resizable-e {
    background: #cccccc;
    width:5px;
    height: 100%;    
}

#main
{
    display: table-cell;
    background-color: #ffffcc;            
}

#details
{
    padding-left: 5px;
    background-color: #faccfa;
    width: 100%;
}

#details .ui-resizable-s {
    background: #cccccc;
    width:100%;
    height: 5px;    
}

#toolbar
{
    padding-top: 5px;
    padding-left: 5px;    
}

#editor
{
    padding-left: 5px;
    background-color: #fddfaf;   
    overflow-y: scroll;
}

.paragraph
{
    min-height: 150px;
} 
```

**JavaScript**

```
ko.bindingHandlers.jqResizableWidth = {
    init: function(element, valueAccessor, allBindingsAccessor) {
        var value = ko.utils.unwrapObservable(valueAccessor());
        $(element).width(value);

        var options = allBindingsAccessor().jqOptions || {};
        $(element).resizable(options);

        ko.utils.registerEventHandler(element, "resize", function(event, ui) {
            var observable = valueAccessor();
            var value = ui.size.width;
            observable(value);

            // Have to include the next line because otherwise JQueryUI Resizable
            // fixes the height to the currently resolved height.
            $(element).height('100%');
        });
    }
};

function adjustEditor() {

    // Extra 5px added because of 5px 
    var height = $(window).height() - $('#header').height() - $('#details').height() - $('#toolbar').height() - $('#details .ui-resizable-s').height() - $('#footer').height();

    $('#editor').height(height); 
}

ko.bindingHandlers.jqResizableHeight = {
    init: function(element, valueAccessor, allBindingsAccessor) {
        var value = ko.utils.unwrapObservable(valueAccessor());
        $(element).height(value);

        var options = allBindingsAccessor().jqOptions || {};
        $(element).resizable(options);

        ko.utils.registerEventHandler(element, "resize", function(event, ui) {
            var observable = valueAccessor();
            var value = ui.size.height;
            observable(value);

            // Have to include the next line because otherwise JQueryUI Resizable
            // fixes the width to the currently resolved width.
            $(element).width('100%');
        });
    }
};

var viewModel = function(navWidth, detailsHeight) {

    var self = this;

    self.navWidth = ko.observable(navWidth); 
    self.detailsHeight = ko.observable(detailsHeight);

    self.navWidth.subscribe(function(newValue) {
        $.cookie('navWidth', newValue, {
            expires: 7,
            path: '/'
        });

        adjustEditor();
    });

    self.detailsHeight.subscribe(function(newValue) {
        $.cookie('detailsHeight', newValue, {
            expires: 7,
            path: '/'
        });

        adjustEditor();
    });

};

var navWidth = $.cookie('navWidth') || 80;
var detailsHeight = $.cookie('detailsHeight') || 50;

ko.applyBindings(new viewModel(navWidth, detailsHeight));

$(window).resize(function() {adjustEditor();});
$(window).resize();​ 
```

# java - 想在java中改变我的笔的颜色

> ID：13322708
> 
> 赞同：1
> 
> 时间：2012-11-10T14:04:22.077
> 
> 标签：java, colors

我使用 Java 创建了一个 Etch A Sketch 类程序。现在我想改变我画的形状和线条的颜色。我正在努力解决如何做到这一点。这是我目前所获得的任何帮助将不胜感激。

```
 else if (String1.equalsIgnoreCase("red"))
        {

            set.PenColor(Color.RED);    

        } 
```

有了这段代码，我得到了；放。无法解决且方法 setColor 未定义 提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T14:41:53.327

如果您使用的是普通 awt - Graphics 类有一个方法 (setColor) 来设置要使用的颜色。

[图形的 JavaDoc](http://docs.oracle.com/javase/6/docs/api/java/awt/Graphics.html#setColor%28java.awt.Color%29)。

这个图形对象应该在绘画方法中使用。

# c - 使用未声明的标识符“真”

> ID：13322709
> 
> 赞同：37
> 
> 时间：2012-11-10T14:04:23.113
> 
> 标签：c, compiler-errors

为什么我会收到此错误：

```
infinite.c:5:12: error: use of undeclared identifier 'true'
    while (true) {

1 error generated.
make: *** [infinite] Error 1 
```

...当我尝试为无限循环编译这个简单的代码时？

```
#include <stdio.h>

int main(void) {
    int x = 0;
    while (true) {
        printf("%i\n", x);
    }
} 
```

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-11-10T14:39:22.267

`true`默认情况下不声明标识符。要使用它，有两种解决方案：

1.  在 C99 中编译并包含`<stdbool.h>`.
2.  自己定义这个标识符。

但是，无限循环`for (;;)`通常被认为是更好的样式。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-11-10T14:05:16.970

C 没有内置的布尔类型。所以它不知道是什么`true`。您必须以这种方式自行声明它：

```
#define TRUE 1
#define FALSE 0

[...]
while (TRUE) {
     [...]
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-10T14:09:00.300

包含 stdbool.h 以使用 C99 布尔值。
如果您想坚持使用 C89，请自行定义：

```
typedef enum
{
    true=1, false=0
}bool; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-03T05:36:33.590

您收到此错误是因为您尚未在 C 中定义 true 和 false 的值。您可以通过在代码中添加几行简单的代码来做到这一点，如下所示：

```
#define FALSE 0
#define TRUE 1 // Option 1
#define TRUE !FALSE // Option 2 
```

# sql - 当对象可能为 Nil 时求和

> ID：13322712
> 
> 赞同：0
> 
> 时间：2012-11-10T14:04:29.267
> 
> 标签：sql, ruby-on-rails, activerecord, join, sum

我有以下代码行：

```
@ranking_array  = User.joins(:bets, :choices).select("users.id, sum(bets.profitloss + choices.profitloss) as total_pl").group("users.id").order("total_pl DESC").map(&:id) 
```

这给了我一个用户排名的数组——比如用户 X 排在第 25 位，依此类推。

但问题是，如果用户没有对任何选择下注，结果将不包括该用户。

那么如何修复代码，即使选择的任何一个赌注都是零，它也会总结利润损失。

解决方案：

好吧..看来我必须结合你的两个答案才能使它起作用:)

我需要`LEFT JOIN`with`COALESCE`所以我得到了以下似乎有效的代码..

```
@ranking_array  = User.find(:all,
                  :joins =>  "LEFT JOIN `bets` ON bets.user_id = users.id LEFT JOIN `choices`ON choices.user_id = users.id",
                  :select => "users.id, sum(COALESCE(bets.profitloss, 0) + COALESCE(choices.profitloss, 0)) as total_pl",
                  :group =>  "users.id",
                  :order =>  "total_pl DESC").map(&:id) 
```

非常感谢..我已经用了一整天的时间来解决这个问题..

问题是现在谁得到答案是两者的结合？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T14:46:44.380

有一天我也不得不使用这个，比如查看 COALESCE(something, 0) ，它将返回一个或另一个。地狱，我认为您可以在 0 之前添加更多选项，因为它将一直持续到 0。

```
@ranking_array  = User.joins(:bets, :choices).select("users.id, sum(COALESCE(bets.profitloss, 0) + COALESCE(choices.profitloss, 0)) as total_pl").group("users.id").order("total_pl DESC").map(&:id)
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T17:09:15.273

我自己不使用 Ruby，但您说您为没有进行任何“下注”的用户“缺少”行。听起来您的实际查询正在生成一个`INNER JOIN`并且您需要一个`LEFT JOIN`. 看看[这个 SO 答案是否有帮助](https://stackoverflow.com/a/1509814/1275871)。

# struct - 在结构中分配结构？

> ID：13322715
> 
> 赞同：1
> 
> 时间：2012-11-10T14:04:48.300
> 
> 标签：struct, malloc

我决定在这个程序中使用结构来保持它的组织性，所以我现在有一个结构链。我的问题是我是否必须 malloc 一个位于另一个结构中的结构。例如：

```
typedef struct OnlineS {
struct BBSIS *bbsi;
struct BBVIS *bbvi;
struct VBVIS *vbvi;
} *OnlineP;

typedef struct BBSIS{
struct FirstFitS *ff;
struct BestFitS *bf;
struct NextFitS *nf;
int itemNum;
int binNum;
int binMin;
int binMax;
int *items;
}*BBSIP; 
```

依此类推，我的声明和 malloc 会是什么样子？

```
OnlineP on = malloc(sizeof (struct OnlineS));
on->bbsi = malloc(sizeof (struct BBSIS));
on->bbsi->bf = malloc(sizeof (struct BestFitS));
on->bbsi->nf = malloc(sizeof (struct NextFitS));
on->bbsi->ff = malloc(sizeof (struct FirstFitS));
on->bbvi = malloc(sizeof (struct BBVIS));
on->bbvi->bf = malloc(sizeof (struct BestFitS));
//ETC 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T14:11:10.447

如果在结构中使用指向结构的指针，则还必须为此管理内存。（malloc/免费）

如果您在结构中使用结构，则您无需管理内部结构的内存。由于它们是外部结构的一部分，因此没有必要。

您在外部结构中使用指向结构的指针，因此您必须使用 malloc 和 free。

首先为外部结构分配内存，然后将所有指向内部结构的指针设置为 null 或为其分配内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T14:12:22.293

您的结构中没有结构。

您的结构中有一个*指针*，并且已分配指针的内存。

考虑以下构造：

```
typedef struct node {
   struct node* next;
} 
```

（这很常见——链表）

它应该分配多少个节点？

# image-processing - 在空白的扫描申请表中查找数据输入点

> ID：13322719
> 
> 赞同：4
> 
> 时间：2012-11-10T14:05:08.907
> 
> 标签：image-processing, opencv, computer-vision

我是图像处理的新手，这就是我面临的问题 - 假设我有一个申请表的图像，如下所示：![在此处输入图像描述](../Images/488422a5de59b8ef1295ee8e18752ded.png)

现在我想检测要输入数据的所有位置的位置。在这种情况下，将矩形划分为多个框，如下所示（并非所有字段都标记）：

![在此处输入图像描述](../Images/09662ce6179247964cd2c6845ec90a40.png)

我可以忍受照片框也被检测到。我已经尝试在 OpenCV 源代码中运行 squares.cpp 示例，但这并不能完全满足我的需求。[我还在这里](https://stackoverflow.com/questions/10581451/detection-of-rectangular-bright-area-in-a-image-using-opencv)尝试了修改后的版本- 结果更糟（我的用例肯定与那个问题中的 OP 非常不同）。

此外，在有/没有模糊阈值的情况下，霍夫变换并不能真正起作用，因为扫描图像中的噪声会导致多余的线条，而且阈值处理会带走部分梳子（小方块），因此线路检测不达标。

请注意，此表单**不是**打印表单的扫描副本，但真正的输入很可能是打印表单的嘈杂扫描图像。

虽然我确信这是可能的（至少允许一些容忍度）并且我正在尝试解决问题，但如果我从其他可能尝试过这样的事情的人那里获得见解和想法，那将非常有帮助/enjoy 破解 CV 问题。此外，如果答案能解释为什么要完成特定操作（例如，扩张以尝试填补阈值留下的任何漏洞等），那就太好了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T15:07:05.023

表格是否一致？所有表格上的“这样的盒子”的大小是否相同？如果您可以依靠一致的大小，例如上面表格中的字符框，则可以使用模板匹配。

否则，问题似乎是：找到图像上的任何/所有矩形（通过后处理步骤过滤掉任何具有大量标记的矩形，或合并相邻的矩形）。

您越能利用表格之间的一致性，问题就越容易。使用您可以获得的任何上下文。

**编辑**

使用梯度（通过在 x 和 y 方向上使用 Sobel 核计算）可以消除大量噪声。

使用两者，您可以找到渐变的方向（可以在此处找到方程式：en.wikipedia.org/wiki/Sobel_operator）。假设我们将框的判别特征定义为垂直或水平梯度。如果像素的渐变具有水平或垂直方向，请保留它，将其他所有设置为白色。

为了使其对噪声更加稳健，您可以使用滑动窗口 (3x3) 来计算中值方向。如果窗口的中值（或平均）方向是垂直或水平的，则保留当前（窗口的中间）像素，否则将其设置为白色。

您可以使用 OpenCV 进行梯度计算，也可能使用方向/相位计算，但您可能需要编写代码来执行实际的滑动窗口代码。我对 OpenCV 不是很熟悉

# ios - 是否可以在 viewDidLoad/viewWillAppear 之外更改导航栏标题？

> ID：13322723
> 
> 赞同：2
> 
> 时间：2012-11-10T14:05:20.843
> 
> 标签：ios, uinavigationbar, uinavigationitem

我正在尝试使用以下语句更改导航栏标题：

```
[[self navigationItem] setTitle:myTitle]; 
```

它在 viewDidLoad 和 viewWillAppear 中运行良好，但在其他任何地方都不起作用。我正在尝试做的事情可能吗？这是我正在使用的视图控制器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T16:25:47.703

有一种非常简单的方法可以更改当前视图控制器的标题。

```
self.title = @"New Title"; 
```

在导航控制器中的视图控制器上调用此方法将导致导航栏中显示的标题被更新为新标题。

这可以在显示视图控制器时随时调用。

无需深入研究视图控制器`navigationItem`来设置标题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-05-01T17:49:16.893

我知道这很旧，但我想为未来的用户回答这个问题。我认为大多数答案没有涵盖的主要问题是从主线程设置标题很重要，否则在少数情况下它不会立即设置。对于 Swift 3.0，您可以使用如下代码：

```
 DispatchQueue.main.async {
        self.title = "Example string"
 } 
```

从主线程进行所有 UI 更新很重要。我不确定原始用户是否通过异步关闭设置标题，但这应该可以帮助任何有困难的人。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-10T16:32:48.203

实际上，navigationItem 将使用视图控制器的 title 属性。上面的答案是在导航栏中更改标题的最简单正确的方法。

如果您需要自定义导航栏，您可以在 UIViewController 子类中覆盖它，而不是在 viewDidAppear: 或任何其他 viewWill/Did 方法中更改它

```
- (UINavigationItem*)navigationItem
{
  UINavigationItem *navigationItem = [super navigationItem];

  // customize it further than the default

  return navigationItem;
} 
```

此外，您可以使用 KVO 更新自定义 titleView 的标题更改。你监听 UIViewController 的 title 属性的变化并更新你的 navigationItem 的 titleView 属性。看一下这个：

```
static void *kObjectStateObservingContext = &kObjectStateObservingContext;  // outside your @implementation bit

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // other init stuff here...

        [self addObserver: self forKeyPath:@"title" options:NSKeyValueObservingOptionNew context: kObjectStateObservingContext];
    }
    return self;
} 
```

不要忘记删除观察者：

```
- (void)dealloc
{
    [self removeObserver: self forKeyPath:@"title"];
} 
```

现在我们再次访问 navigationItem，您可以在其中创建一个自定义 UILabel，它会在我们更改标题时更新，之后我们必须为标题更改时提供处理程序实现：

```
- (UINavigationItem*)navigationItem
{
    UINavigationItem *navigationItem = [super navigationItem];

    UILabel *titleLabel = [[UILabel alloc] initWithFrame:CGRectMake(roundf((320 - 230)/2), 0, 230, 44)];
    titleLabel.font = [UIFont systemFontOfSize: 18];
    titleLabel.textColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"topnav-background-text-gradient.png"]];  // you can even draw the font with a gradient!
    titleLabel.shadowColor = [UIColor colorWithWhite: 1.0 alpha:0.59];
    titleLabel.shadowOffset = CGSizeMake(0, 1.0);
    titleLabel.text = self.title;
    titleLabel.backgroundColor = [UIColor clearColor];
    titleLabel.textAlignment = UITextAlignmentCenter;

    navigationItem.titleView = titleLabel;

    return navigationItem;
} 
```

最后，当 self.title 实际发生变化时该怎么办：

```
- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context {
    if ( context == kObjectStateObservingContext ) {
        // here we update the text of the titleView
        if ([self.navigationItem.titleView isKindOfClass:[UILabel class]]) {
            [(UILabel*)self.navigationItem.titleView setText: self.title];
        }
    }
    else {
        [super observeValueForKeyPath:keyPath ofObject:object change:change context:context];
    }
} 
```

你去吧！显然代码比你想象的要多一些，所以如果你现在没有，我建议任何构建 iOS 应用程序的人，你总是为你的应用程序创建一个基类视图控制器，（MyBaseViewController : UIViewController）然后为任何其他的子类在您的应用中查看控制器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-10T15:30:15.163

@reid55 你也可以在下面的方法中设置导航标题：

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
  self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
  if (self) {
   [[self navigationItem] setTitle:myTitle];
}
return self;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-10T14:11:47.857

您可以在 中设置标题`viewDidLoad`，因为该视图尚不可见但已激活。同样的故事`viewWillAppear`。可见后`UIElement`，您无法更改没有`redraw`.

# php - 使用 phpunit 和 Silex 处理异常

> ID：13322729
> 
> 赞同：1
> 
> 时间：2012-11-10T14:05:50.223
> 
> 标签：php, phpunit, functional-testing, silex

我正在使用 Silex 中的路由从数据库中删除对象。如果对象不存在，则应抛出 404 错误。这在浏览器中工作正常，并相应地收到响应。

这是我的来源：

```
$app->delete("/{entity}/{id}", function(\Silex\Application $app, HttpFoundation\Request $request, $entity, $id) {
    // some prep code is here
    $deleteObject = $this->em->getRepository($entityClass)->find($id);
    if (empty($deleteObject))
        $app->abort(404, "$ucEntity with ID $id not found");
    // other code comes here...
} 
```

这是我的测试用例：

```
// deleting the same object again should not work
$client->request("DELETE", "/ccrud/channel/$id");
$this->assertTrue($response->getStatusCode() == 404); 
```

现在 phpunit 失败并出现以下错误： 1) CrudEntityTest::testDelete Symfony\Component\HttpKernel\Exception\HttpException: Channel with ID 93 not found

我可以从消息中看到 404 被抛出，但我无法按计划测试响应对象。我知道理论上我可以断言异常本身，但这不是我想要做的，我想获得响应（就像浏览器一样）并测试状态代码本身。

有人知道如何达到这个目标，或者是否有更好的方法来测试这个？

谢谢，丹尼尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T17:08:43.453

这就是在 Silex 本身的测试中的完成方式（[请参见此处](https://github.com/fabpot/Silex/blob/master/tests/Silex/Tests/ErrorHandlerTest.php#L58)）：

```
public function testErrorHandlerNotFoundNoDebug()
{
    $app = new Application();
    $app['debug'] = false;

    $request = Request::create('/foo');
    $response = $app->handle($request);
    $this->assertContains('<title>Sorry, the page you are looking for could not be found.</title>', $response->getContent());
    $this->assertEquals(404, $response->getStatusCode());
} 
```

# android - 如何将 AChartEngine 与 SQLite DB 中的数据集成？

> ID：13322732
> 
> 赞同：1
> 
> 时间：2012-11-10T14:05:57.613
> 
> 标签：android, sqlite, achartengine

你好 AChartEngine 对我来说很新，所以欢迎任何帮助。我想要做的是从我的数据库中显示 2 个数据，它们是 BMI 结果和用户保存他/她的 BMI 结果的日期。我现在不知道该怎么办。但是我所拥有的是：

我的代码：公共类 ViewBMIData 扩展了 Activity{

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.viewbmidata);

    //TextView tv1 = (TextView) findViewById (R.id.tvBMIData);
    //TextView tv2 = (TextView) findViewById ( R.id.tvBMIDate );

    BMICalculatorDB info = new BMICalculatorDB(this);
    info.open();

    String data1 = info.getBMIDataData();
    String data2 = info.getBMIDateData();
    for (int i = 1; data1 == null; i++) {

        double x = Double.parseDouble( data1 );
        double y = Double.parseDouble( data2 );

        }
        info.close();

    //tv1.setText( data1 );
    //tv2.setText( data2 );

} 
```

这段代码是我从教程中找到的，但不知道如何做到这一点：

```
 public Intent getIntent( Context context ){

            // Bar 1
            int[] y = { 124, 135, 443, 456, 234, 123, 342, 134, 123, 643, 234, 274 };
            CategorySeries series = new CategorySeries("BMI");
            for (int i = 0; i < y.length; i++) {
                series.add("Bar " + (i+1), y[i]);
            }

            // Bar 2
            int[] y2 = { 224, 235, 243, 256, 234, 223, 242, 234, 223, 243, 234, 274 };
            CategorySeries series2 = new CategorySeries( "BMR" );
            for ( int i = 0; i < y.length; i++ ) {
                series2.add( "Bar " + (i+1), y2[i] );
            }

            XYMultipleSeriesDataset dataset = new XYMultipleSeriesDataset();
            dataset.addSeries( series.toXYSeries() );
            dataset.addSeries( series2.toXYSeries() );

            // This is how the "Graph" itself will look like
            XYMultipleSeriesRenderer mRenderer = new XYMultipleSeriesRenderer();
            mRenderer.setChartTitle( "BMI and BMR Statistics" );
            mRenderer.setXTitle( "DATE" );
            mRenderer.setYTitle( "BMI" );
            mRenderer.setAxesColor( Color.GREEN );
            mRenderer.setLabelsColor( Color.RED );

            // Customize bar 1
            XYSeriesRenderer renderer = new XYSeriesRenderer();
            renderer.setDisplayChartValues( true );
            renderer.setChartValuesSpacing( ( float ) 0.5 );
            mRenderer.addSeriesRenderer( renderer );

            // Customize bar 2
            XYSeriesRenderer renderer2 = new XYSeriesRenderer();
            renderer.setColor( Color.CYAN );
            renderer.setDisplayChartValues( true );
            renderer.setChartValuesSpacing( ( float ) 0.5 );
            mRenderer.addSeriesRenderer( renderer2 );

            Intent intent = ChartFactory.getBarChartIntent( context, dataset,mRenderer, Type.DEFAULT );
            return intent;

}  */ 
```

请指导我这样做。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T14:33:42.087

There is no better help than the tutorials and the demo program available from the AChartEngine downloads.

# javascript - 检查数组的深度

> ID：13322738
> 
> 赞同：2
> 
> 时间：2012-11-10T14:07:10.220
> 
> 标签：javascript, jquery, html, xml, json

我使用with从[GMail API](https://mail.google.com/mail/feed/atom/)接收数据，然后将其放入[jQuery 插件](http://www.thomasfrank.se/xml_to_json.html)中。问题是（正如页面上的演示具有讽刺意味的那样）当我输入这样的内容时：`$.ajax()``dataType: "xml"``$.xml2json`

```
<animals>
     <dog>
          <name>Rufus</name>
          <breed>labrador</breed>
     </dog>
     <dog>
          <name>Marty</name>
          <breed>whippet</breed>
     </dog>
     <cat name="Matilda"/>
</animals> 
```

我明白了：

```
{
    animals: {
        dog: [
            {
                name: 'Rufus',
                breed: 'labrador'
            }, {
                name: 'Marty',
                breed: 'whippet'
            }
        ],
        cat: {
            name: 'Matilda'
        }
    }
} 
```

无论如何，如您所见，`<animals>`其中有两个`<dog>`s 并且只有一个`<cat>`；因此，`animals["cat"]`是一个对象，而`animals["dog"]`是一个对象数组。`<entry>`同样，当GMail只返回一个时，`feed["entry"]`它是一个包含其中内容的数组，但是当有多个标签时，`feed["entry"]`是一个条目数组，而这些条目又是它们内部内容的数组。

我想要做的是做不同的事情，这取决于我是否有 1 个或多个条目，使用条件语句；为此，我需要一个布尔值，它告诉我有多少条目。我该怎么做呢？欢迎使用 JQuery。

编辑：我想另一个可能的答案是编辑插件本身的源代码并使其提供某种方式来知道它是一个单独的标签（一个类似数组的对象）还是有很多标签（一个“真”数组）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T14:20:47.660

我认为您可以在这里做的最好的事情就是`concat`将对象/数组简单地转换为一个空数组：

```
var obj = {a:"hello"};
[].concat(obj); // [{a:"hello"}]

var arr = [{a:"hello"}];
[].concat(arr); // identical results 
```

所以要修复你的对象：

```
for ( var prop in obj ) {
    obj[prop] = [].concat(obj[prop])
} 
```

这样，您将始终获得一个数组，而不必担心您拥有哪个数组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-10T14:19:10.077

```
var json = {
    animals: {
        dog: [
            {
                name: 'Rufus',
                breed: 'labrador'
            }, {
                name: 'Marty',
                breed: 'whippet'
            }
        ],
        cat: {
            name: 'Matilda'
        }
    }
};

for ( var i in json ) {
    if ( json.hasOwnProperty( i ) ) {
        if ( json[i] instanceof Array ) {
            // you have an array, do as you please
        } else {
            // you have an object, do as you please
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-10T14:20:32.960

这是 xml2json 中的一个错误，更普遍的是将 XML 转换为 JSON 的问题——没有像 XSLT 或 XSD 这样的描述文档，就无法告诉序列化程序某些东西应该是一个集合。您可能想研究这样[的](http://code.google.com/p/xml2json-xslt/)方法，以更正式的方式将 XML 转换为 JSON。

同时，这里有一种方法可以强制变量不是数组，如果是则保持不变：

```
x = [].concat(x); 
```

*注意：这是事后编辑的，以使用@Asad 在他的回答中的优越方法*

正如您所观察到的，这对于多维数组开始失败，因此听起来您最好开始使用 XSLT 来描述哪些元素始终是集合。

## 并且不要使用`instanceof`

`instanceof`有一个失败的边缘情况。`instanceof`使用 like的运算符`x instanceof Array`测试特定构造函数（在本例中`window.Array`）是否存在于原型链中。**但是当变量来自另一个窗口时，这会失败**，例如弹出窗口或存在于同一域中的 iframe，并且可以将对象直接传递给其父级。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-10T16:17:46.607

您可以使用 jQuery`type()`方法来简化您的代码并利用完全跨浏览器兼容的测试

API 参考：http: [//api.jquery.com/jQuery.type/](http://api.jquery.com/jQuery.type/)

```
$.each(data, function(i, item) {

    switch($.type(item)) {
      case 'string':
        /* string code*/
        break;

      case 'array':
        /* aray code*/
        break;

        /* ....etc*/
    }
}); 
```

# c# - PageLoad滚动到页面顶部onItemCommand asp.net c#

> ID：13322739
> 
> 赞同：0
> 
> 时间：2012-11-10T14:07:29.227
> 
> 标签：c#, asp.net, listview, pageload

我有一个列表视图和一些带有“OnItemCommand”命令的代码隐藏，在我的网络应用程序上执行一些操作。我想通过单击 ListView 中的图标将 ListView 中的条目添加到 MySql 数据库。

Listview 并没有那么小，有时您必须向下滚动才能找到正确的条目。如果我单击其中一个按钮，页面会重新加载并滚动到页面顶部。但我希望页面保持不变。我不想在每次点击后向下滚动以找到我之前的位置。

任何人有一些想法如何做到这一点？

这是我的 ListView_OnItemCommand 代码隐藏：

```
protected void addTextModuleList_OnItemCommand(object sender, ListViewCommandEventArgs e)
    {
        // read the ticket ID from e
        ListViewDataItem dataItem = (ListViewDataItem)e.Item;

        if (String.Equals(e.CommandName, "insertTextModule"))
        {
            //connect to database
            MySqlConnection con = new MySqlConnection();
            con.ConnectionString = Helper.CONNECTION_STRING;
            MySqlCommand cmd = null;

            // insert new entrys for customer            
            cmd = new MySqlCommand();
            con.Open();
            cmd.Parameters.AddWithValue("@customer", Session["currentCustomerId"]);
            int id = Convert.ToInt16(addTextModuleList.DataKeys[dataItem.DisplayIndex].Value.ToString());
            cmd.Parameters.AddWithValue("@textModule", id);
            cmd.Parameters.AddWithValue("@confirmationId", Session["currentConfirmationId"].ToString());
            cmd.CommandText = "INSERT INTO linktextmodule (customer, textModule, confirmationID) " + "VALUES(@customer, @textModule, @confirmationId)";
            cmd.Connection = con;
            cmd.ExecuteNonQuery();
            con.Close();

            //change the cssClass of the linkButton
            LinkButton addTextModuleButton = e.Item.FindControl("addTextModuleButton") as LinkButton;
            addTextModuleButton.CssClass = "insertTextModuleButton";
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T06:14:38.897

您可以使用这两种方法在回发时保持页面位置

在页面声明中

```
<%@ Page MaintainScrollPositionOnPostback="true" %> 
```

或者在**web.config**文件中。

```
<pages maintainScrollPositionOnPostBack="true" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-10T08:55:39.840

使用ajax工具包的更新面板控件

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-12T04:38:16.000

使用 Page.SmartNavigation 属性为 true。欲了解更多信息，请参阅下面的链接

[http://msdn.microsoft.com/en-us/library/system.web.ui.page.smartnavigation(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.page.smartnavigation(v=vs.90).aspx)

# php - 现在的 C++ CGI

> ID：13322741
> 
> 赞同：5
> 
> 时间：2012-11-10T14:07:51.930
> 
> 标签：php, c++, cgi, fastcgi

[![在此处输入图像描述](../Images/af841c78267c922b733eff1609d1bfab.png)](https://i.stack.imgur.com/yK8Jc.jpg)
[（来源：[atmel.com](http://www.atmel.com/Images/compiler.jpg)）]

**背景**

我有 5 年的 PHP 背景，上个月我一直在忙着寻找一种用 C++ 做 Web 的方法（即使我知道这是幼稚和愚蠢的，我觉得 C++ 是唯一真正的编程语言，我有这种对它的宗教信仰让我爱它并且只爱它）。

**我的 CGI 之旅**

我遇到了几篇博客文章（主要是从 2000 年到 2003 年），讨论并在这里进行了一些聊天讨论。这是我收集的：

*   PHP 是为 Web 设计的，而 C++ 是一种通用语言。
*   PHP 不一致，在网络上有很多仇恨
*   PHP 是目前最常见和受支持的脚本语言
*   CGI 是一种非常古老且*常见*的技术，在 PHP 之前使用（PHP1 实际上是 C 的 CGI 库）
*   在 CGI（vs PHP）中，我们`fork-exec`遇到了每个进程的执行问题，这会减慢一切
*   ^ 这就是 FastCGI 的用途
*   对于一些常见的数学运算，C++ 比 PHP 快 200 倍（因为 PHP 是一种解释性语言）
*   需要性能的大型网站不使用纯 PHP（Facebook 使用与 C++ 相关的 HipHop，在 Google 上有几个关于它是用 Perl、C++、C 或除 PHP 之外的其他语言编写的谣言）
*   PHP 学习和编写速度更快
*   C++ 有非常糟糕的字符串操作方法
*   有一些很好的（主观的）C++ CGI 库，比如 wT（机智）。
*   有些人只是告诉我尽可能远离 PHP

**真实问题**

今天我必须决定使用 PHP 还是 CGI。我问你：

1.  CGI在2013年死了吗？（是的，我知道以前有人[问过](https://stackoverflow.com/questions/1464652/is-cgi-dead)）
2.  由于每个人都需要性能，并且考虑到我花了大约 1 年的时间为网络构建一个可靠的 C++ 库，而且我不喜欢简单的东西，现在使用 CGI（或 FCGI）有什么缺点（相比之下新技术）
3.  有没有更有效的方法来用 C++ 构建网站
4.  FastCGI 的真正意义是什么？
5.  FastCGI 是否得到广泛支持？
6.  考虑到我必须围绕单个网站/服务器/数据库构建 Web 工具、Web 应用程序、iphone 应用程序、pc 应用程序和 mac 应用程序的项目，我实际上可以为我的应用程序重用 C++ 网站中的一些代码吗？（例如数据库交互）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-10T14:13:12.683

1.  几乎只用于非常特殊的情况
2.  不要构建一个使用一个：CppCMS*
3.  是的，C++ Web 框架
4.  因为很久以前就死了
5.  它取代了 CGI 使其非常高效
6.  是 - 所有主要（和次要）网络服务器都支持它

`* Full-disclosure: I am the author`

# c - 之字形树打印

> ID：13322743
> 
> 赞同：2
> 
> 时间：2012-11-10T14:08:24.590
> 
> 标签：c, algorithm, data-structures

我想以之字形顺序打印树。这是我的代码，但它没有运行。有人可以指出错误吗？我创建了两个堆栈来做同样的事情，当其中两个为空时，我的算法终止，如果其中任何一个包含一些节点，则打印这些节点并将其子节点推入另一个堆栈。这个过程一直持续到两个堆栈都变空。

```
#include<stdio.h>
#define MAX_SIZE 100

struct TreeNode{
      int value;
      struct TreeNode *left;
      struct TreeNode *right;
};

struct TreeNode stackA[MAX_SIZE]; 
struct TreeNode stackB[MAX_SIZE];

int topA = 0;
int topB = 0;

void push(struct TreeNode stack[], struct TreeNode *node, int *top){
     if(*top > MAX_SIZE){
             printf("stack is full\n");
     }
     else{
          stack[*top] = *node;
          *top = *top +1;
     }
     return;
}

struct TreeNode* pop(struct TreeNode stack[], int *top){
     if(*top == 0){
             printf("stack is empty\n");
               return NULL;
     }
     else{
          struct TreeNode *tmp = stack + *top;
          *top = *top - 1;
          return tmp;
     }

}

int isEmpty(int *top){
        if(*top == 0){
                return 1;
        }

        return 0;
}
void printZigZag(struct TreeNode* root){
     push(stackA,  root,&topA);
     printf("%d\n", topA);
     while(!isEmpty(&topA) || !isEmpty(&topB)){
        while(!isEmpty(&topA)){
           struct TreeNode* temp = pop(stackA,&topA);
           printf("%d", temp->value);
           if(temp->left) push(stackB,temp->left,&topB);
           if(temp->right) push(stackB,temp->right,&topB);
           printf("%d %d",topA,topB);
           return;
       }
       while(!isEmpty(&topB)){
           struct TreeNode *temp = pop(stackB,&topB);
           printf("%d", temp->value);
           if(temp->right) push(stackA,temp->right,&topA);
           if(temp->left) push(stackA,temp->left,&topB);
      }
   }
}

int main(){
    struct TreeNode* root = (struct TreeNode *)malloc(sizeof(struct TreeNode));
    root->value = 5;
    root->left = NULL;
    root->right = NULL;

    struct TreeNode* first = (struct TreeNode *)malloc(sizeof(struct TreeNode));
    first->value = 15;
    first->left = NULL;
    first->right = NULL;
    root->left = first;

    struct TreeNode* second = (struct TreeNode *)malloc(sizeof(struct TreeNode));
    second->value = 235;
    second->left = NULL;
    second->right = NULL;
    root->right = second;

    struct TreeNode *third = (struct TreeNode *)malloc(sizeof(struct TreeNode));
    third->value = 45;
    third->left = NULL;
    third->right = NULL;
    first->left = third;

    struct TreeNode *fourth = (struct TreeNode *)malloc(sizeof(struct TreeNode));
    fourth->value = 55;
    fourth->left = NULL;
    fourth->right = NULL;
    first->right = fourth;

    printZigZag(root);

    system("pause");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T18:23:09.747

我检查了你的代码。你犯的最大错误是**Pop**函数是错误实现的。***pop**的值应该在你得到栈顶值之前减少。另一个错误是***if(temp->left) push(stackA,temp->left,&topB)***应该改为***if(temp->left) push(stackA,temp->left,&topA* )**。下面是代码的工作原理，我更改了一些小地方以适应 c++。

```
#include<cstdio>
#define MAX_SIZE 100

struct TreeNode{
      int value;
      struct TreeNode *left;
      struct TreeNode *right;
};

struct TreeNode stackA[MAX_SIZE]; 
struct TreeNode stackB[MAX_SIZE];

int topA = 0;
int topB = 0;

void push(struct TreeNode stack[], struct TreeNode *node, int *top){
     if(*top > MAX_SIZE){
             printf("stack is full\n");
     }
     else{
          stack[*top] = *node;
          *top = *top +1;
     }
     return;
}

struct TreeNode* pop(struct TreeNode stack[], int *top){
     if(*top == 0){
             printf("stack is empty\n");
               return NULL;
     }
     else{
          *top = *top - 1; 
         struct TreeNode *tmp = stack +*top;         
          return tmp;
     }

}

int isEmpty(int *top){
        if(*top == 0){
                return 1;
        }

        return 0;
}
void printZigZag(struct TreeNode* root){
     push(stackA,  root,&topA);
     while(!isEmpty(&topA) || !isEmpty(&topB)){
        while(!isEmpty(&topA)){
           struct TreeNode* temp = pop(stackA,&topA);
           printf("%d\n", temp->value);
           if(temp->left) push(stackB,temp->left,&topB);
           if(temp->right) push(stackB,temp->right,&topB);
       }
       while(!isEmpty(&topB)){
           struct TreeNode *temp = pop(stackB,&topB);
           printf("%d\n", temp->value);
           if(temp->right) push(stackA,temp->right,&topA);
           if(temp->left) push(stackA,temp->left,&topA);
      }
   }
}

int main(){
    struct TreeNode* root = new TreeNode();
    root->value = 5;
    root->left = NULL;
    root->right = NULL;

    struct TreeNode* first =new TreeNode();
    first->value = 15;
    first->left = NULL;
    first->right = NULL;
    root->left = first;

    struct TreeNode* second = new TreeNode();
    second->value = 235;
    second->left = NULL;
    second->right = NULL;
    root->right = second;

    struct TreeNode *third = new TreeNode();
    third->value = 45;
    third->left = NULL;
    third->right = NULL;
    first->left = third;

    struct TreeNode *fourth = new TreeNode();
    fourth->value = 55;
    fourth->left = NULL;
    fourth->right = NULL;
    first->right = fourth;

    printZigZag(root);
    return 0;
} 
```

希望能帮助到你！

# node.js - 从 node.js 在 mongolab mongodb 数据库中创建集合模式

> ID：13322744
> 
> 赞同：11
> 
> 时间：2012-11-10T14:08:33.967
> 
> 标签：node.js, mongodb, mongoose, mlab

我是 node.js 和 mongodb 的新手。

我正在尝试使用以下代码从 node.js 应用程序中为 mongolab mongodb 数据库中的用户集合创建模式。代码似乎没有失败（至少，我没有收到错误消息），但我也没有看到任何成功的迹象。也就是说，当我去 mongolab 并查看我的数据库时，我没有看到创建了任何模式 - [https://dzwonsemrish7.cloudfront.net/items/01263Y1c312s233V0R17/mongodb-schema.png?v=7fdc20e3](https://dzwonsemrish7.cloudfront.net/items/01263Y1c312s233V0R17/mongodb-schema.png?v=7fdc20e3)。

有人可以解释我可能做错了什么，或者我如何验证我的代码是否成功并且实际上是为我的集合创建了一个模式？

```
// file: app.js

var express = require('express'),
    http = require('http'),
    mongoose = require('mongoose');

var app = express(),
    port = 3000;

// Connect to database in the cloud (mongolab)
mongoose.connect('mongodb://username:password@ds041344.mongolab.com:41344/stockmarket');

// Create a schema for User collection
mongoose.connection.on('open', function () {
    console.log(">>> Connected!");

    var UserSchema = new mongoose.Schema({
        username: {type: String, unique: true},
        password: String
    });

    var UserModel = mongoose.model('User', UserSchema);
});

app.get('/', function(req, res){
  res.writeHead(200, {'Content-Type': 'text/plain'});
  res.end('Hello, World!\n');
});

http.createServer(app).listen(port, function(){
  console.log("Express server listening on port " + port + " ...");
}); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-10T15:54:45.800

您必须先插入文档。模式在 mongodb 中没有明确定义。插入文档后，将自动创建集合，您将在 mongolab 控制台中看到它。

[来自http://mongoosejs.com/](http://mongoosejs.com/)的示例

```
var mongoose = require('mongoose');
var db = mongoose.createConnection('localhost', 'test');

var schema = mongoose.Schema({ name: 'string' });
var Cat = db.model('Cat', schema);

var kitty = new Cat({ name: 'Zildjian' });
kitty.save(function (err) {
  if (err) // ...
  console.log('meow');
}); 
```

在上面的保存调用之后，将创建集合

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-30T12:54:53.480

MongoDB 中的数据具有灵活的模式。同一集合中的文档不需要具有相同的字段集或结构，集合文档中的公共字段可能包含不同类型的数据。

# android - 访问数据库中的列

> ID：13322745
> 
> 赞同：0
> 
> 时间：2012-11-10T14:08:42.900
> 
> 标签：android, database, cursor

现在我想从数据库中访问整个列，然后将其与我存储的一些文本进行比较......但我不知道如何做到这一点......所以有人可以帮助我......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T14:14:32.133

整列？
您的意思是所有记录中给定列的所有值？
您应该迭代获得的 ResultSet 并开始比较值
（例如 - 如果您使用 ResultSet 的“rs”对象进行迭代，您应该比较：

```
String valueFromDB =  rs.getString("myColumn");
String someTextStored = .... //the text being stored
if (valueFromDB != null) {
   if (someTextStored.equals(valueFromDB) {
   //Comparison succeeded - implement some logic here for handling success
   }
} 
```

上面的代码应该在一个循环代码中，它遍历 ResultSet 并使用“next”方法获取下一条记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T14:20:47.550

希望这可以帮助你

```
public ArrayList<String> getValues(){
  Cursor cursor = null;
  SQLiteDatabase db = getReadableDatabase();
  Log.v("done","getting rows ");

   cursor = db.rawQuery("SELECT YourColumnName FROM "+TABLE_NAME, null);
   if(!cursor.moveToFirst()){

   }
   else{
       do {
   list_values.add(cursor.getString(0));

   } while (cursor.moveToNext());

   }
   db.close();
   cursor.close();
  return list_values;
 } 
```

现在您拥有特定列的所有值，您可以从此数组列表中对其进行比较。

# php - FuelPHP的简单文件上传

> ID：13322749
> 
> 赞同：2
> 
> 时间：2012-11-10T14:09:00.153
> 
> 标签：php, file-upload, upload, fuelphp

有没有人有使用 FuelPHP 将一系列文件上传到 Web 服务器的经验？

我当前的设置将内容从表单添加到数据库，但我现在也想处理图像 - 所以基本上在提交表单时将它们移动到我的网络服务器。

这做起来简单吗？

我的控制器中有我的 'action_add()' 方法，但不确定如何更新它以循环遍历我的所有文件字段并移动文件。

```
public function action_add()
    {
        $val = Model_Article::validate('add_article');

        if ($val->run())
        {
            $status = (Input::post('save_draft') ? 0 : 1);

            if ( ! $val->input('category_id'))
            {
                $category_id = null;
            }
            else
            {
                $category_id = $val->validated('category_id');
            }

            $article = new Model_Article(array(
                'user_id' => $this->user_id,
                'category_id' => $category_id,
                'title' => $val->validated('title'),
                'body' => $val->validated('body'),
                'published' => $status,
            ));

            if ($article->save())
            {
                Session::set_flash('success', 'Article successfully added.');
            }
            else
            {
                Session::set_flash('error', 'Something went wrong, '.
                    'please try again!');
            }

            Response::redirect('articles/add');
        }

        $this->template->title = 'Add Article';
        $this->template->content = View::forge('articles/add')
            ->set('categories', Model_Category::find('all'), false)
            ->set('val', Validation::instance('add_article'), false);
    } 
```

我的表格：

```
<h2>Add an Article</h2>
<p>Publish a new article by filling the form below.</p>

<div class="options">
    <div class="option">
            <?php echo Html::anchor('articles', 'View Articles'); ?>
    </div>
    <div class="option">
        <?php echo Html::anchor('categories/add', 'Add a Category'); ?>
    </div>
</div>

<?php echo $val->show_errors(); ?>
<?php echo Form::open(array('enctype' => 'multipart/form-data')); ?>

<?php $select_categories = array(null => 'Uncategorized'); ?>
<?php foreach ($categories as $category): ?>
<?php $select_categories[$category->id] = $category->name; ?>
<?php endforeach; ?>

<div class="input select">
    <?php echo Form::label('Category', 'category_id'); ?>
    <?php echo Form::select('category_id', e($val->input('category_id')), 
        $select_categories); ?>
</div>

<div class="input text required">
    <?php echo Form::label('Title', 'title'); ?>
    <?php echo Form::input('title', e($val->input('title')), 
        array('size' => '30')); ?>
</div>

<div class="input textarea required">
    <?php echo Form::label('Body', 'body'); ?>
    <?php echo Form::textarea('body', e($val->input('body')), 
        array('rows' => 4, 'cols' => 40)); ?>
</div>

<div class="input textarea required">
    <?php echo FORM::file('filename'); ?> 
</div>

<div class="input submit">
    <?php echo Form::submit('add_article', 'Publish'); ?>
    <?php echo Form::submit('save_draft', 'Save Draft'); ?>
</div>

<?php echo Form::close(); ?> 
```

非常感谢您的任何指点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-10T16:33:37.040

好的，我可以给你一些指导。

首先[fuelphp上传文档](http://fuelphp.com/docs/classes/upload/usage.html)

如果有错别字，希望对您有所帮助

```
public function action_add()
{
$val = Model_Article::validate('add_article'); //<-- maybe its just me but I never saw any similar to this in fuelphp sorry about this if I'm wrong

// if your form validation is okay than continue with everyhing else
if ($val->run())
{
    $article = Model_Article::forge();
    // Custom configuration for this upload
    $config = array(
        'path' => DOCROOT.DS.'foldername/tomove/your/images',
        'randomize' => true,
        'ext_whitelist' => array('img', 'jpg', 'jpeg', 'gif', 'png'),
    );

    Upload::process($config);

    // if a valid file is passed than the function will save, or if its not empty
    if (Upload::is_valid())
    {
        // save them according to the config
        Upload::save();

       //if you want to save to tha database lets grab the file name
        $value = Upload::get_files();  
        $article->your_file_input_name = $value[0]['saved_as'];
     } 

    $status = (Input::post('save_draft') ? 0 : 1);

    if ( ! $val->input('category_id'))
    {
        $category_id = null;
    }
    else
    {
        $category_id = $val->validated('category_id');
    }

         $article->user_id = $this->user_id;
         $article->category_i = $category_id;
         $article->title = $val->validated('title');
         $article->body = $val->validated('body');
         $article->published = $status;

    if ($article->save())
    {
        Session::set_flash('success', 'Article successfully added.');
    }
    else
    {
        Session::set_flash('error', 'Something went wrong, '.
            'please try again!');
    }

    Response::redirect('articles/add');
}

$this->template->title = 'Add Article';
$this->template->content = View::forge('articles/add')
    ->set('categories', Model_Category::find('all'), false)
    ->set('val', Validation::instance('add_article'), false);
} 
```

# haskell - 在 Haskell 中调用数据构造函数的问题

> ID：13322752
> 
> 赞同：1
> 
> 时间：2012-11-10T14:09:28.593
> 
> 标签：haskell, constructor, functional-programming, declarative, hugs

我正在尝试编写自己的多态列表类型 List a 来充当默认库列表。我相信代码是正确的，但是我似乎无法在 Hugs98 中成功调用它。使用 List a 类型调用函数并计算非空列表长度的正确方法是什么？

```
My Haskell Code is:
data List a = Nil | Cons a (List a)

len :: List a -> Int
len Nil = 0
len (Cons _ xs) = 1 + len xs 
```

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T16:40:11.510

我假设您已将该代码保存在名为 Lists.hs 的文件中

这是`len`在 Hugs 中调用函数的方法。

```
Main> :l Lists
Main> len Nil
0
Main> len (Cons 1 Nil)
1
Main> len (Cons 'a' Nil)
1
Main> len (Cons 'a' (Cons 'b' Nil))
2
Main> len (Cons 'a' (Cons 'b' (Cons 'c' Nil)))
3 
```

不过，括号有点难看。这是一种使它变得更好的方法：

```
infixr 5 :.
data List a = Nil | a :. (List a) 
    deriving Show 
```

该`infixr`行告诉 Hugs 构造函数`:.`应该关联到右侧，因此右侧有隐式括号，这意味着

```
'a' :. 'b' :. Nil  =  'a' :. ('b' :. Nil) 
```

如果你不放这个，Hugs 会假设`:.`联想到左边，所以它会认为

```
'a' :. 'b' :. Nil  =  ('a' :. 'b') :. Nil 
```

这没有意义 - 你会得到

```
Main> 'a' :. 'b' :. Nil
ERROR - Type error in application
*** Expression     : 'a' :. 'b'
*** Term           : 'b'
*** Type           : Char
*** Does not match : List a 
```

或者更令人困惑的是，如果是数字，它会尝试从列表中生成一个数字：

```
Main> 1 :. 2 :. Nil
ERROR - Cannot infer instance
*** Instance   : Num (List a)
*** Expression : 1 :. 2 :. Nil 
```

无论如何，我们做了这`infixr 5 :.`件事，所以这不会发生。我选择了 5 的优先级，因为这是`:`标准前奏中的内容。现在我们可以编辑`len`以应对新定义：

```
len :: List a -> Int
len Nil = 0
len (_ :. xs) = 1 + len xs 
```

让你得到

```
Main> len (4 :. 5 :. 6:. Nil)
3 
```

或者，如果您愿意，

```
Main> len $ 4 :. 5 :. 6:. Nil
3 
```

（你本来可以

```
infixr 5 `Cons` 
```

相反，但我不认为那很好。）

# cordova - 使用 phonegap 应用程序执行持久后台操作

> ID：13322756
> 
> 赞同：0
> 
> 时间：2012-11-10T14:10:15.417
> 
> 标签：cordova, service

我想构建一个移动应用程序并听说过PhoneGap框架，即使我的应用程序没有运行（如服务），我也需要在后台执行操作。

我想知道 PhoneGap 是否可行，或者即使我可以将本机构建的服务附加到我的 PhoneGap 应用程序。

谢谢你。

# android - 为什么Android中的EditText多行

> ID：13322758
> 
> 赞同：1
> 
> 时间：2012-11-10T14:10:25.860
> 
> 标签：android

我很惊讶为什么 EditText 在 android 中是多行的，即当我们按下返回键时它会转到新行，我还想问一下，我们可以在 EditText 中工作时在按下返回键时添加一个事件侦听器而不是去在新线上。请帮忙！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T14:12:35.030

您可以使用**[`android:SingleLine`](http://developer.android.com/reference/android/widget/TextView.html#attr_android:singleLine)**

```
<EditText
    android:singleLine="true"
    ...
    ... 
```

可以使用检测 Enter 键 `edittext.setOnKeyListener(new OnKeyListener() { ... });`。（**[参考](http://developer.android.com/reference/android/view/View.OnKeyListener.html)**）

另外，请参阅[**此答案**](https://stackoverflow.com/questions/1489852/android-handle-enter-in-an-edittext)以获取更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T15:04:33.873

```
edit.addTextChangedListener(new TextWatcher() {

    @Override
    public void onTextChanged(CharSequence s, int start, int before, int count) {
    }

    @Override
    public void beforeTextChanged(CharSequence s, int start, int count, int after) {
    }

    @Override
    public void afterTextChanged(Editable s) {
        for (int i = s.length(); i > 0; i--) {
            if (s.subSequence(i - 1, i).toString().equals("\n"))
                s.replace(i - 1, i, "");
        }
    }
}); 
```

# javascript - 从图像路径的 json 数组显示图像

> ID：13322762
> 
> 赞同：0
> 
> 时间：2012-11-10T14:10:51.410
> 
> 标签：javascript, jquery, css

所以我从 php 中获取数组，如下所示：

```
<?php
$images = glob('../images/intro/*.{png,jpg,jpeg}',GLOB_BRACE);
//Encode Javascript Object Notation
echo json_encode($images);
?> 
```

然后使用 jquery 我得到数组并对其进行解码：

```
$.ajax({

   url: 'ajax/intro.php',

   success: function(data){

   //Decode the received array                    
   data = JSON.parse(data);
   //read each image path from the array
   $.each(data, function(index, value) {
      setTimeout(function() {
         $('.container').fadeIn(500, function() {
            $(this).delay(500).fadeIn(500, function(){
               alert(value);
               //Want to display each image inside the div with class container!
               //The tag img doens't exist I belive I should do something like:
               $('.conatiner').append('<img src=\"'+value+'\" />');
            });
         })
      }, index * 1500);
    });
   }

}); 
```

这是可行的，但我想在警报消息之后立即显示图像（警报消息仅用于测试目的），我该如何实现？

此外，在显示图像后想要淡出......我很感激这里的一些帮助。谢谢你，联邦通信委员会。

# iphone - 如何使用子类函数将文本分配给 MainClass 中的 UILabel？

> ID：13322766
> 
> 赞同：-1
> 
> 时间：2012-11-10T14:11:13.320
> 
> 标签：iphone, xcode, uitableview, uilabel, subclass

我在 Mainclass 中有一个 UILabel，现在我想通过 Subclass 函数为其分配文本。我的问题详细代码可在此处[链接](https://stackoverflow.com/questions/13312739/how-uitableview-show-two-different-arrays-one-at-a-time)现在我希望当我单击 UITableview 的任何单元格（这是我的子类）时，其文本分配给 Mainview 中的 UILabel。我的代码低于我尝试过的代码

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
UITableViewCell *selectedCell = [tableView cellForRowAtIndexPath:indexPath];
NSString *cellText = selectedCell.textLabel.text;
NSLog(@"MY row Text:%@",cellText);

// Now here I don't know how we can pass this text to UILabel which is in my mainclass

} 
```

我的下图也有助于理解我的问题

![在此处输入图像描述](../Images/6a0cb82b2e503ef688a224931a32767b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T15:20:52.247

将标签的引用传递给子类。然后子类可以简单地设置标签的文本。

在表视图控制器中添加属性 UILabel *mainLabel。然后将此属性设置为来自主类的标签引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T15:24:40.213

您可以在创建子视图类时将标签传递给它。

在主视图类中声明：

```
@property (nonatomic, strong) UILabel *mainLabel;
// or if no ARC
// @property (nonatomic, retain) UILabel *mainLabel; 
```

然后在子视图的 .h 上，声明：

```
@property (nonatomic, weak) UILabel *myAccessToMainLabel;
// or if no ARC
// @property (nonatomic, assign) UILabel *myAccessToMainLabel; 
```

创建子视图时，将主视图的标签分配给子视图的 myAccessToMainLabel。然后在子视图代码中分配标签。你总是可以在 Objective-c 中传递属性。

编辑：当您创建子视图时，将 mainLabel 从创建它的代码中分配给子视图的引用 iVar。例如，如果主创建子视图，则：

```
MySubViewClass *mySubView = [[MySubViewClass alloc] initWithNib:@"MySubViewClass" ...];
// or any variety of init
mySubview.myAccessToMainLabel = mainLabel; 
```

# jquery - SyntaxError：标识符在数字文字之后立即开始

> ID：13322768
> 
> 赞同：1
> 
> 时间：2012-11-10T14:11:31.130
> 
> 标签：jquery, jsonp

我在 jquery 中使用 $.ajax 函数。

我写了以下代码：

```
 <script>

$(document).ready(function() {

        var id =%%GLOBAL_ProductId%%;

                   var AllData="" ;
        $.ajax({

            url: "http://xtremeinspection.com/new2you4kids/app/android/get_product_size.php?productID=48",

            dataType: "jsonp",
            type: "POST",
            async: false,
            cache: true,
            contentType: "application/json; charset=utf-8",
            success: (function(data) {

                 AllData = html.fromhtml(data.d);

                 $("#home%%GLOBAL_ProductId%%").html(AllData);

            })
        });

});

</script> 
```

我收到这样的错误：SyntaxError：标识符在数字文字之后立即开始

你能告诉我为什么我会收到这种类型的错误吗？

# javascript - loadStrings 达到文件限制 - processing.js（java 脚本）中 bufferedreader 的时间？

> ID：13322770
> 
> 赞同：2
> 
> 时间：2012-11-10T14:11:32.493
> 
> 标签：javascript, html, processing.js

processing.js（javascript 版本）支持 loadStrings()，除了大小为 50,000 行的大文件（可能更早达到限制）外，它的效果很好。我原以为 bufferedReader 将是可行的方法，但尝试并环顾四周意味着它尚不受支持，因为 loadStrings() 在那里。

问题：有没有办法从调用 java .pde 程序的 html javascript 锚文件中增加 loadStrings 支持的大小？

还是我只需要重写来管理许多较小的文件？

注意：具有 50000 行的同一个大文件可以在标准处理中使用 loadStrings 文件。

由于我是处理Java脚本的新手，非常感谢任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T18:35:56.263

它不是“java script”（即Java的脚本版本），而是“JavaScript”（一种完全不同的编程语言，实际上与java几乎没有共同之处。它的正式名称实际上是“ECMAScript”，但出于历史原因我们一直称它为 JavaScript）

JS 中没有 StringBuffer，Processing.js 只是通过使用同步的“ajax”调用来检索您的数据，因此数据限制是浏览器连接数据限制。这几乎应该是“无论你的 RAM 适合什么”。

但是，您更有可能遇到的是 loadStrings() 是一个同步操作：如果您调用它，其他所有操作都会停止，您的页面以及其中的所有脚本都必须等待加载操作完成。浏览器认为这非常糟糕，因此它们通常会在某些时候切断脚本。

如果你正在加载巨大的数据文件，最好不要使用 loadStrings()，而是在你开始你的草图之前进行数据加载，使用带有回调的异步 ajax 调用，表明你的数据已经准备好你的草图可以被加载。

# c - C中的动态代码

> ID：13322775
> 
> 赞同：5
> 
> 时间：2012-11-10T14:12:28.230
> 
> 标签：c, dynamic

我有以下用于德语动词练习的代码块：

```
if (strcmp(*option, "sein") == 0)
    *option = linie.sein;

if (strcmp(*option, "haben") == 0)
    *option = linie.haben;

if (strcmp(*option, "possessiv") == 0)
    *option = linie.possessiv;

if (strcmp(*option, "reflexiv") == 0)
    *option = linie.reflexiv;

if (strcmp(*option, "accusativ") == 0)
    *option = linie.accusativ;

if (strcmp(*option, "dativ") == 0)
    *option = linie.dativ; 
```

但是，我想将其浓缩为：

```
*option = linie.(*option); 
```

也许：

```
*option = linie.(*option)(); 
```

不幸的是，这些都不起作用。有任何想法吗？

编辑@dasblinkenlight：

```
typedef struct
{
    char subjekt[20];
    char sein[20];
    char haben[20];
    char possessiv[20];
    char reflexiv[20];
    char accusativ[20];
    char dativ[20];
} satz;

satz linie =
{
    .subjekt = "",
    .sein = "",
    .haben = "",
    .possessiv = "",
    .reflexiv = "",
    .accusativ = "",
    .dativ = ""
};

char *option = argv[1]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-10T15:53:00.180

基里连科的答案是一个很好的答案，适用于像你这样的短结构。但是，对于较长的结构，维护所有 strcmp 调用可能很麻烦。为了解决这个问题，您可以定义您尝试匹配的关键字与结构中相应元素的偏移量之间的关系。

```
struct relation
{
    char keyword[20];
    int offset;
}; 
```

然后，您可以使用 offsetof 宏（在 stddef.h 中）将关键字链接到它在结构中的位置。

```
#define REL_LEN (7)

struct relation rel[REL_LEN] = {
    {"subjekt", offsetof(satz, subjekt) },
    {"sein", offsetof(satz, sein) },
    {"haben", offsetof(satz, haben) },
    {"possessiv", offsetof(satz, possessiv) },
    {"reflexiv", offsetof(satz, reflexiv) },
    {"accusativ", offsetof(satz, accusativ) },
    {"dativ", offsetof(satz, dativ) }
}; 
```

最后，使用上面的映射检索字符串的函数可能看起来像这样。

```
char *lookup_keyword(const satz *linie, const char *option, 
                     const struct relation *rel, size_t rel_size)
{
    int i;
    char *pchar = (char *)linie;

    for (i=0; i<rel_size; i++)
    {
        if (strcmp(option, rel->keyword) == 0)
        {
            pchar += rel->offset;
            return pchar;
        }
        rel++;
    }
    printf("Error: no mapping found matching %s!\n", option);
    return "";
} 
```

你可以像这样调用它

```
char *option = argv[1];

printf("Result for %s: %s\n", option, 
       lookup_keyword(&linie, option, rel, REL_LEN)); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-10T14:31:50.067

您正在混合编译时和运行时选项。在 C 中，您不能直接从运行时获得的字符串中使用标识符。但是，您可以将您的比较带入一个不透明的函数中。

```
char *f(const satz *linie, const char *option)
{
    if (strcmp(option, "sein") == 0)
        return linie->sein;
    else if (strcmp(option, "haben") == 0)
        return linie->haben;
    else if (strcmp(option, "possessiv") == 0)
        return linie->possessiv;
    else if (strcmp(option, "reflexiv") == 0)
            return linie->reflexiv;
    else if (strcmp(option, "accusativ") == 0)
        return linie->accusativ;
    else if (strcmp(option, "dativ") == 0)
        return linie->dativ;
    else
        return NULL;
}

*option = f(&linie, *option); 
```

# php - 如果设置，将 PHP 代码放入 PHP

> ID：13322778
> 
> 赞同：0
> 
> 时间：2012-11-10T14:13:03.407
> 
> 标签：php, html

我正在处理我添加的同一页面中的呼叫竞争的 php 页面

```
<?php if (isset($cpID)) {   echo ' '; } 
```

我在两个 '' 中添加了一些运行良好的代码，但这段代码有一些小问题：

```
onClick="location.href='waiting.php?picID='.$cpID.''" 
```

它给了我语法错误，如果设置了我不知道如何将它放在 PHP 中，请帮助我？谢谢炖

**完整代码：**

```
<?php
if (isset($cpID)) {
    echo '</p><button class="btn btn-large btn-block btn-success" onClick="location.href='waiting.php?picID='.$cpID.''"  type="button">Click here to upload this Cover to your Facebook Profile</button></p>';
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T14:18:56.910

您似乎有太多 " 和 ' 引号的问题。您可以做一些事情。我确信我正确理解了您的代码，但您可以尝试：

```
$myEcho = (isset($cpID)) ? "" : "location.href='waiting.php?picID=$cpID'";
echo $myEcho; 
```

我自己现在没有尝试，所以我希望我现在没有通过拼写错误添加语法错误:=)

如果它不起作用，请发布有关您收到的错误的更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T14:20:13.663

### 问题：

```
echo '
</p><button class="btn btn-large btn-block btn-success" onClick="location.href='waiting.php?picID='.$cpID.''"  type="button">Click here to upload this Cover to your Facebook Profile</button></p>
';
} 
```

问题是您的**回声**`location.href='`单引号被您需要转义单引号旁边的单引号关闭。

* * *

### 解决方案：

```
echo '
</p><button class="btn btn-large btn-block btn-success" onClick="location.href=\'waiting.php?picID='.$cpID.'\'"  type="button">Click here to upload this Cover to your Facebook Profile</button></p>
'; 
```

请注意，我**已经**用`\'`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T14:34:17.753

尝试不要将您的 picId 设置为 var，然后尝试此操作。如果它在表单输入标签中，则为 id="picID"

echo "onclick='location.href=waiting.php?picID="+document.getElementById('picID').value, true); <>

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-10T14:40:24.513

我认为第一个问题是 PHP 标签没有到位。我认为这应该有效

```
<?php
if (isset($cpID)) {
$cpID = $cpID.' ';
echo '
</p><button class="btn btn-large btn-block btn-success" onClick="location.href='waiting.php?picID='.$cpID.'"  type="button">Click here to upload this Cover to your Facebook Profile</button></p>
';
}
?> 
```

# java - 如何避免多线程代码中的 ConcurrentModificationException

> ID：13322787
> 
> 赞同：8
> 
> 时间：2012-11-10T14:14:05.597
> 
> 标签：java, collections, concurrency

每当我们使用 java.util Collection 类时，如果一个线程更改了一个集合，而另一个线程正在使用迭代器遍历它，那么任何对`iterator.hasNext()`或的调用`iterator.next()`都会抛出`ConcurrentModificationException`。即使是`synchronized`集合包装类`SynchronizedMap`，`SynchronizedList`也只是有条件的线程安全，这意味着所有单独的操作都是线程安全的，但是控制流取决于先前操作结果的复合操作可能会受到线程问题的影响。问题是：如何在不影响性能的情况下避免这个问题。注意：我知道`CopyOnWriteArrayList`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T14:19:46.520

您可以使用上面提到`CopyOnWriteArrayList`的`ConcurrentHashMap`等，也可以使用`Atomic*`与 CAS 一起使用的类。

如果您不知道`Atomic*`课程，他们绝对值得一看！你可以看看[这个](https://stackoverflow.com/questions/2664172/java-concurrency-cas-vs-locking)问题。

因此，要回答您的问题，您必须为任务选择正确的工具。由于您不与我们分享上下文，我只能猜测。在某些情况下，CAS 会在其他情况下表现更好，而并发 Collections 会。

如果有不清楚的地方，您可以随时查看官方的 Oracle Trails：[课程：并发](http://docs.oracle.com/javase/tutorial/essential/concurrency/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T14:19:13.447

这是因为“标准”Java 集合不是线程安全的，因为它们不同步。当使用多个线程访问您的集合时，您应该查看[java.util.concurrent](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/package-summary.html)包。

如果没有这个包，在 Java 5 之前，必须执行手动同步：

```
synchronized(list) {
   Iterator i = list.iterator(); // Must be in synchronized block
   while (i.hasNext())
       foo(i.next());
} 
```

或使用

```
Collections.synchronizedList(arrayList); 
```

但两者都不能真正提供完整的线程安全功能。

使用这个包，对集合的所有访问都是原子的，并且某些类`provide a snapshot of the state of the list when the iterator was constructed`（请参阅[`CopyOnWriteArrayList`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/CopyOnWriteArrayList.html#iterator%28%29)。`CopyOnWriteArrayList`读取速度很快，但如果您执行许多写入操作，这可能会影响性能。

因此，如果`CopyOnWriteArrayList`不需要，请查看[`ConcurrentLinkedQueue`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ConcurrentLinkedQueue.html)哪些优惠`a "weakly consistent" iterator that will never throw ConcurrentModificationException, and guarantees to traverse elements as they existed upon construction of the iterator`。这在所有方面都很有效，除非您必须更频繁地访问特定索引处的元素而不是遍历整个集合。

另一种选择是[`ConcurrentSkipListSet`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ConcurrentSkipListSet.html)which`provides expected average log(n) time cost for the contains, add, and remove operations and their variants. Insertion, removal, and access operations safely execute concurrently by multiple threads`和`iterators are weakly consistent`as well。

哪些并发（线程安全）集合取决于您执行最多的操作类型。由于它们都是 Java Collection 框架的一部分，因此您可以将它们交换到您需要的任何位置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-10T14:25:46.117

我认为你提出了一个有趣的问题。
例如，我尝试考虑其他人建议的 ConcurrentHashMap 是否可以提供帮助，但我不确定锁是基于段的。
在这种情况下，我会做的，我希望我能很好地理解你的问题，就是使用[ReaderWriterLock 锁定对你的集合的访问。](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/locks/ReentrantReadWriteLock.html)
我选择这个锁的原因是因为我确实觉得这需要锁定（正如你所解释的 - 迭代由几个操作组成），
而且因为在读取线程的情况下，如果没有写入线程正在处理集合，我不希望他们等待 lock 。感谢@Adam Arold，我注意到您建议使用“同步装饰器” - 但我觉得这个装饰器对于您的需求来说“太强大了”，因为它使用同步并且不会区分 N 读者和 M 作家的情况。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-13T12:42:46.947

如果您有一个非线程安全类的未封装[对象](https://stackoverflow.com/questions/602636/why-is-a-concurrentmodificationexception-thrown)`Collection`，则无法防止误用`Collection`，从而防止.[`ConcurrentModificationException`](https://stackoverflow.com/questions/602636/why-is-a-concurrentmodificationexception-thrown)

其他答案建议使用线程安全`Collection`类，例如`java.util.concurrent`. 但是，您应该[考虑封装`Collection`对象](https://stackoverflow.com/a/55141359/545127)：让对象 be ，并让您的类提供代表调用者操纵 的`private`更高级别的抽象（例如`addPerson`和） ，并且没有任何返回对 . 的引用的 getter 方法。然后在封装的数据上强制执行不变量（例如“每个人都有一个非空名称”）*并*使用.`removePerson``Collection``Collection`*`synchronized`*

# html - 显示 100% 的 div 宽度和边距

> ID：13322789
> 
> 赞同：62
> 
> 时间：2012-11-10T14:14:51.797
> 
> 标签：html, css

我想显示一个带边距的可扩展`div`( `width: 100%`) ...

```
#page {
  background: red;
  float: left;
  width: 100%;
  height: 300px;
}

#margin {
  background: green;
  float: left;
  width: 100%;
  height: 300px;
  margin: 10px;
}
```

```
<div id="page">
  <div id="margin">
    "some content here"
  </div>
</div>
```

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2012-11-10T14:23:14.610

您可以使用`calc()`css 功能（[浏览器支持](http://caniuse.com/#feat=calc)）。

```
#page {
  background: red;
  float: left;
  width: 100%;
  height: 300px;
}

#margin {
  background: green;
  float: left;
  width: -moz-calc(100% - 10px);
  width: -webkit-calc(100% - 10px);
  width: -o-calc(100% - 10px);
  width: calc(100% - 10px);
  height: 300px;
  margin: 10px;
}​ 
```

或者，尝试使用填充而不是边距和`box-sizing: border-box`（[浏览器支持](http://caniuse.com/#feat=css3-boxsizing)）：

```
#page {
    background: red;
    width: 100%;
    height: 300px;
    padding: 10px;
}

#margin {
    box-sizing: border-box;
    background: green;
    width: 100%;
    height: 300px;
} 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-11-10T14:23:21.007

有时最好做相反的事情并给父`div`填充：

**[现场演示](http://jsfiddle.net/AVSnd/8/)**

我所做的是将CSS更改`#page`为：

```
#page {
    padding: 3%;
    width: 94%; /* 94% + 3% +3% = 100% */

    /* keep the rest of your css */
    /* ... */
} 
```

然后删除`margin`来自`#margin`

注意：这也增加了顶部和底部的 3%（所以高度增加了 6%），这使得它比 300px 高一点 - 所以如果你需要正好 300px，你可以做类似`padding:10px 3%;`的事情并改变`height:280px;`300px .

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-11-10T14:26:45.903

您可以使用以下 CSS 来实现所需的结果：

```
#page {
   background: red;
   overflow: auto;
}

#margin {
   background: green;
   height: 280px;
   margin: 10px
} 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2017-07-13T13:12:59.263

按标准实现这一目标的正确方法是：

```
#margin {
   background: green;
   height: 280px;
   margin: 10px;
   width: auto;
   display: block;
} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-06-11T15:18:18.117

**仅适用于 LESS 用户：**

使用 Vukašin Manojlović 的好解决方案不能开箱即用，因为 LESS 在 LESS 编译期间执行 + 或 - 操作。一种解决方案是转义 LESS，使其不执行操作。

[禁用 LESS-CSS 覆盖 calc()](https://stackoverflow.com/questions/17904088/disable-less-css-overwriting-calc)

```
@someMarginVariable = 15px;

margin: @someMarginVariable;
width: calc(~"100% - "@someMarginVariable*2);
width: -moz-calc(~"100% - "@someMarginVariable*2);
width: -webkit-calc(~"100% - "@someMarginVariable*2);
width: -o-calc(~"100% - "@someMarginVariable*2); 
```

或者可以使用类似的mixin：

```
.fullWidthMinusMarginPaddingMixin(@marginSize,@paddingSize) {
  @minusValue: (@marginSize+@paddingSize)*2;
  padding: @paddingSize;
  margin: @marginSize;
  width: calc(~"100% - "@minusValue);
  width: -moz-calc(~"100% - "@minusValue);
  width: -webkit-calc(~"100% - "@minusValue);
  width: -o-calc(~"100% - "@minusValue);
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-11-15T15:58:48.170

如果可能，请尝试在 #page 元素上使用带有 box-sizing 的填充

```
#page {
    padding: 10px;
    box-sizing: border-box;
    background: red;
    float: left;
    width: 100%;
    height: 300px;
}
#margin {
    background: green;
    float: left;
    width: 100%;
    height: 100%;
} 
```

# php - PHP - 更新/细化 _GET 值

> ID：13322793
> 
> 赞同：-1
> 
> 时间：2012-11-10T14:15:44.393
> 
> 标签：php, get

假设我在这个页面中：

```
search.php?cat=1&powerf=0&powert=0&kilometragef=10&kilometraget=50&yearf=2009&.... 
```

我有所有那些 powerf、kmetraget 等输入字段和选择框。如何通过单击链接或按钮来更新选定的条件？我想返回相同的 _GET 表单但替换项目（如果选择/输入）。有任何想法吗？

最终变体：

```
if (isset($_POST['update'])) {

$get = $_GET;
foreach ($_POST as $key => $value) {
if ($key != "update") {
$get[$key] = $value;
}
}

$link = 'search.php?';
$link.= http_build_query($get);

header("Location: http://www.url/$link");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T14:21:58.093

你可以尝试这样的事情：

```
$get = $_GET;
$get['powerf'] = 'something-else';

$link = 'search.php'
$link.= http_build_query($get);

echo '<a href="', $link, '">Click</a>'; 
```

# c# - 正则表达式的命名空间不起作用

> ID：13322798
> 
> 赞同：2
> 
> 时间：2012-11-10T14:16:28.643
> 
> 标签：c#, .net

我翻新了一些曾经在 .NET Framework 3.5 上工作的旧代码，使其能够使用 C# 在 .NET Framework 4 上工作。

以下正则表达式曾经在 3.5 版中正常工作，但由于某些奇怪的原因不再工作。

```
public static readonly Regex ChatColorRegex = new Regex("\\|c[A-Za-z0-9]{6,8}"),
                                 ChatLinkRegex = new Regex("\\|H.*?\\|h"); 
```

我在文件顶部添加了“使用 System.Text.RegularExpressions”，但出现以下错误：“命名空间 System.Text 中不存在类型或命名空间 RegularExpressions。

我已经用谷歌搜索过，并读到您必须在 Visual Studio 中添加对 System.Text.RegularExpressions 的引用。但是，当我这样做时，我在可以添加的参考列表中找不到 System.Text.RegularExpressions。

我正在使用 Visual Studio 2012。

谁能告诉我我做错了什么，或者忘记阅读？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-10T14:27:31.667

Regex 类仍在 System.Text.RegularExpression 命名空间中。该类位于 System 程序集中。

如果您在解决方案资源管理器中检查项目引用，您应该会看到对系统程序集的引用。检查该引用的属性以查看系统程序集引用使用的 .NET Framework 版本。它应该与您在项目属性（应用程序选项卡）中为“目标框架”选择的 .NET Framework 版本相匹配。

**编辑：Regex 类位于 System.Text.RegularExpressions 命名空间中，而不是 System.Text。**

# jquery - jQuery：如何从选定的数据列表（html5）选项中获取特定数据属性的值？

> ID：13322802
> 
> 赞同：5
> 
> 时间：2012-11-10T14:17:04.797
> 
> 标签：jquery, jquery-selectors

html:

```
<input list="items" id="item">

<datalist id="items">
  <option value="A item"  data-xyz = "1" >
  <option value="aa item" data-xyz = "2" >
  <option value="C item"  data-xyz = "3" >
  <option value="D item"  data-xyz = "4" >
  <option value="E item"  data-xyz = "5" >
</datalist> 

<input type="button" id="button" value="Get xyz" /> 
```

js：

```
$("#button").click(function(){
       alert($("#items option:selected").attr('data-xyz'));
}); 
```

[链接到 jsbin](http://jsbin.com/emibeh/1/edit)

**询问：**

> 我只需要在单击“#button”或任何事件时从选定的数据列表选项中访问“data-xyz”的值。
> 
> *jQuery 版本：1.7.2*
> 
> **谢谢。**

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-10T15:47:23.947

`datalist`只是一个用于自动完成的存储。由于它可以用于页面中的多个元素，因此它不会具有选定的属性。

您将需要自己找到适用的选项，例如以下

```
$("#button").click(function() {
    var val = $('#item').val()
    var xyz = $('#items option').filter(function() {
        return this.value == val;
    }).data('xyz');
    /* if value doesn't match an option, xyz will be undefined*/
    var msg = xyz ? 'xyz=' + xyz : 'No Match';
    alert(msg)

}) 
```

演示：http: [//jsfiddle.net/shcRJ/](http://jsfiddle.net/shcRJ/)

# javascript - Unable to parse bindings js error using ko.mapping.fromJSON with parse exists view model

> ID：13322804
> 
> 赞同：5
> 
> 时间：2012-11-10T14:17:09.600
> 
> 标签：javascript, json, knockout.js

我想以 JSON 格式将视图模型保存在隐藏字段中。一切正常。

但是当我尝试得到它时 - 我得到错误：

> 未捕获的错误：无法解析绑定。消息：ReferenceError：selectAll 未定义；绑定值：选中：AllCheck，单击：selectAll

[提琴手](http://jsfiddle.net/skiff/GfMvX/)

**视图模型**

```
function AppViewModel() {

//Week
this.AllCheck = ko.observable(false);
this.DaysOfWeekResult = ko.observableArray();

this.selectAll = function () {
    if (this.AllCheck()) {
        viewModel.DaysOfWeekResult.removeAll();

        viewModel.DaysOfWeekResult.push("Mo");
        viewModel.DaysOfWeekResult.push("Tu");
        viewModel.DaysOfWeekResult.push("We");
        viewModel.DaysOfWeekResult.push("Th");
        viewModel.DaysOfWeekResult.push("Fr");
        viewModel.DaysOfWeekResult.push("Sa");
        viewModel.DaysOfWeekResult.push("Su");
    }

    return true;
};

    this.dayClicked = function () {
    checkDays();
    return true;
}; 
```

}

**初始化代码**

```
var viewModel;    
$().ready(function (){
        viewModel = new AppViewModel();
var viewModelDeserialized = ko.mapping.fromJSON(serializedJsonString, viewModel);

        ko.applyBindings(viewModel);
}); 

function checkDays() {
    viewModel.AllCheck(viewModel.DaysOfWeekResult().length == 7);   
} 
```

**序列化模型**

```
var serializedJsonString = '"AllCheck":false,"DaysOfWeekResult":[]}'; 
```

**标记**

```
<div class="check-block">
                <input name="AllWeek" id="AllWeek" type="checkbox" value="AllWeek" data-bind="checked: AllCheck, click: selectAll" />
                <label for="AllWeek">All Week</label>
            </div>
            <div class="holder">
                <span>
                    <input name="Monday" id="Monday" type="checkbox" value="Mo" data-day="true" data-bind="checked: DaysOfWeekResult, click: dayClicked" />
                    <label for="Monday">Mo</label>
                </span><span>
                    <input name="Tuesday" id="Tuesday" type="checkbox" value="Tu" data-day="true" data-bind="checked: DaysOfWeekResult, click: dayClicked" />
                    <label for="Tuesday">Tu</label>
                </span><span>
                    <input name="Wednesday" id="Wednesday" type="checkbox" value="We" data-day="true" data-bind="checked: DaysOfWeekResult, click: dayClicked" />
                    <label for="Wednesday">We</label>
                </span>               
                <span>
                    <input name="Thursday" id="Thursday" type="checkbox" value="Th" data-day="true" data-bind="checked: DaysOfWeekResult, click: dayClicked" />
                    <label for="Thursday">Th</label>
                </span><span>
                    <input name="Friday" id="Friday" type="checkbox" value="Fr" data-day="true" data-bind="checked: DaysOfWeekResult, click: dayClicked" />
                    <label for="Friday">Fr</label>
                </span><span>
                    <input name="Saturday" id="Saturday" type="checkbox" value="Sa" data-day="true" data-bind="checked: DaysOfWeekResult, click: dayClicked" />
                    <label for="Saturday">Sa</label>
                </span><span>
                    <input name="Sunday" id="Sunday" type="checkbox" value="Su" data-day="true" data-bind="checked: DaysOfWeekResult, click: dayClicked" />
                    <label for="Sunday">Su</label>
                </span>
            </div> 
```

​</p>

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-10T17:15:35.083

您正在`ko.mapping.fromJSON`使用错误的参数调用。

在您的情况下，正确的用法如下：

```
var viewModelDeserialized = 
    ko.mapping.fromJSON(serializedJsonString, {} /* empty options */, viewModel); 
```

[演示小提琴。](http://jsfiddle.net/nemesv/GfMvX/1/)（没有绑定错误）

该`ko.mapping.fromJSON`方法的使用有点棘手：

*   你可以用**一个参数**调用它：只提供数据，例如`var viewModel = ko.mapping.fromJSON(data)` 在这种情况下它将返回创建的 viewModel

*   您可以使用**两个参数调用**：

    *   如果第二个参数是一个 ko 映射创建的视图模型，那么它被视为映射目标`ko.mapping.fromJSON(data, koMappingCreatedViewModel)`
    *   否则第二个参数被视为映射选项（这发生在你的情况下）`var viewModel = ko.mapping.fromJSON(data, options)`
*   您可以使用明确指定数据、映射和目标的**三个参数调用它：**`ko.mapping.fromJSON(data, options, target)`

# winforms - 使用 System.Drawing.Image 进行图像缩放

> ID：13322805
> 
> 赞同：0
> 
> 时间：2012-11-10T14:17:18.523
> 
> 标签：winforms, visual-c++

我使用以下代码从此链接旋转[图像](http://msdn.microsoft.com/en-us/library/txebzd3d%28v=vs.80%29.aspx)。为了在我的测试应用程序中使用这段代码，我首先制作了一个 win32 C++ 控制台应用程序。然后我将以下程序放入我的 .cpp 文件中。我下载了 system.drawing.dll 并将这个 dll 放在创建我的应用程序的文件夹中。

```
#include "stdafx.h"
#include "stdio.h"

#using <system.drawing.dll>

using namespace System;
using namespace System::Drawing;

int main()
{
Image^ image = Image::FromFile("SampleImage.jpg");
image->RotateFlip( RotateFlipType::Rotate90FlipNone );
image->Save("SampleImage_rotated.jpg");
return 0;
} 
```

当我构建应用程序时（在 MSVC 2010、Windows 7、32 位上），它按预期工作，我得到一个新的 90 度旋转图像。

我非常喜欢这段代码，因为它是我找到的用于旋转图像的最短代码。

我的问题是：

1- 我可以在使用 winform 用 C++ 编写的应用程序中使用相同的代码吗？还是我必须进行某种转换？

2- 使用相同的类，即 System.Drawing.Image 我如何实现图像的缩放或缩放？

非常感谢您宝贵的时间回复我的询问。

# mysql - mysql尝试具有多个条件的选择

> ID：13322806
> 
> 赞同：1
> 
> 时间：2012-11-10T14:17:29.300
> 
> 标签：mysql, sql, date, select

我有 2 个表，其值如下：

**tbl_users**

```
user_ID      name     
1          somename1   
2          somename2   
3          somename3 
```

**tbl_interviews**

```
int_ID     user_ID      answer          date      
 1            1         sometextaba   2012-11-04 
 2            2         sometextxcec  2012-10-05
 3            1         sometextabs   2011-06-04
 4            3         sometextxcfc  2012-11-04
 5            3         sometextxcdn  2012-11-04 
```

我怎么能问mysql告诉我谁是上表中唯一一个今年接受采访但前几年又接受过采访的用户？唯一一个是 id = 1 的用户（因为他今年接受了采访（int_id 1），但第一次采访是在 2011 年（int-id 3）。）不幸的是，我什至无法选择它们。 .

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T14:40:17.617

通过将表格与自身连接起来，其中连接的一侧仅包括今年的采访，而另一侧仅包括前几年的采访，结果`INNER JOIN`将是用户同时拥有两者。

因为它不需要依赖任何聚合或子查询，所以这种方法应该非常高效。特别是如果该`date`列有索引。

```
SELECT
  DISTINCT
  thisyear.user_ID,
  name
FROM
  /* Left side of join retrieces only this year (year=2012) */
  tbl_interviews thisyear
  /* Right side retrieves year < 2012 */
  /* The combined result will elmininate any users who don't exist on both sides of the join */
  INNER JOIN tbl_interviews previous_years ON thisyear.user_ID = previous_years.user_ID
  /* and JOIN in the user table to get a name */
  INNER JOIN tbl_users ON tbl_users.user_ID = thisyear.user_ID
WHERE
  YEAR(thisyear.date) = 2012
  AND YEAR(previous_years.date) < 2012 
```

### [这是关于 SQLFiddle 的演示](http://sqlfiddle.com/#!2/ccbbb/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T14:48:25.407

一种简单的方法，可能效率低于`JOIN`s

```
SELECT DISTINCT user_ID
FROM   tbl_interviews
WHERE  user_ID IN (
                   SELECT   user_ID
                   FROM     tbl_interviews 
                   WHERE    date < 2012-01-01
                  ) 
   AND user_ID IN (
                   SELECT   user_ID
                   FROM     tbl_interviews 
                   WHERE    date > 2012-01-01
                  ) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-10T17:03:09.687

以下为您提供当年接受采访的用户，只有那些也出现在上一年的用户

```
SELECT Distinct tc.user_ID  FROM  tbl_interviews tc
INNER JOIN tbl_interviews tp ON tc.user_ID = tp.user_ID
WHERE YEAR(tc.date) = Year(curDate())  AND YEAR(tp.date) < Year(curDate()); 
```

[**SqlFiddle 演示**](http://sqlfiddle.com/#!2/93d34/6)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-10T14:49:16.797

这是一个没有连接的版本，只有一个子选择。

```
SELECT user_id
FROM (
    SELECT user_id,
           MAX(date) AS last_interview,
           COUNT(int_id) AS interviews
    FROM tbl_interviews
    GROUP BY user_id) AS t
WHERE YEAR(last_interview) = 2012 AND interviews > 1 
```

您可以按分组`tbl_interviews`来`user_id`计算每个用户的采访次数，然后筛选出接受过一次以上采访的用户（除了今年接受采访外）。根据您的具体需求，这个主题有很多变化，所以如果需要调整，请告诉我。

例如，这也应该有效。

```
SELECT user_id
FROM (
    SELECT user_id,
           BIT_OR(YEAR(date) = 2012) AS this_year,
           BIT_OR(YEAR(date) < 2012) AS other_year
    FROM tbl_interviews
    GROUP BY user_id) AS t
WHERE this_year AND other_year 
```

# mysql - mysql插入连接一个常量值

> ID：13322807
> 
> 赞同：1
> 
> 时间：2012-11-10T14:17:57.880
> 
> 标签：mysql

我想插入一个名为 TUC 的常量，并将其与表的 FirstName 和 LastName id 的首字母连接起来。

id - 1
fname - James
lname - 邦德

id - 2
fname - Daniel
lname - Edgar

例如。TUCJB001, TUCDE002,....

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T14:26:23.343

像这样的东西

```
update tab 
SET newid=CONCAT('TUC', LEFT(fname, 1), LEFT(lname, 1), LPAD(id,03, '0')); 
```

## [演示](http://sqlfiddle.com/#!2/f0127/1)

注意如果您想要 4 位数字，您需要按照下面突出显示的方式进行更改。

```
update tab 
SET newid=CONCAT('TUC', LEFT(fname, 1), LEFT(lname, 1), LPAD(id,digit_range, '0'));
                                                                ^^^^^^^^^^^ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-10T14:24:27.727

您可以使用这样的方法来获取值：

```
select 
  concat('TUC', left(firstname, 1), left(lastname, 1), '00', cast(id as char)) newValue
from yourtable 
```

然后更新：

```
update yourtable
set yourColumn =  concat('TUC', left(firstname, 1), left(lastname, 1), '00', cast(id as char)) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/7b5ea/14)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T14:24:20.410

`UPDATE [table] SET [columnname] = CONCAT( UPPER(LEFT(fname, 1)), UPPER(LEFT(lname, 1)), LPAD(CONVERT(id, VARCHAR), 3, '0') );`

# mysql - 使用 SQL 返回与使用连接表的数组中的所有项目匹配的结果

> ID：13322816
> 
> 赞同：2
> 
> 时间：2012-11-10T14:19:16.117
> 
> 标签：mysql, join, count, having

我对 SQL 查询感到困惑，需要您的帮助。简单地说，**我需要退回所有提供包含我选择的所有项目的套餐的酒店**。

涉及的表格有：

*   **酒店**（hotel_id，hotel_name）
*   **包**（package_id、hotel_id、package_name）
*   **项目**（item_id、package_id、item_name）
*   **package_items** (package_id, item_id)

**样本数据**

为了帮助解释我的问题，让我们看一下这个示例数据以更清楚地说明它。

*酒店表*

```
----------------------
hotel_id | 酒店名称
----------------------
1 | 希尔顿
2 | 威斯汀
----------------------

```

*包表*

```
-----------------------------------------
package_id | hotel_id | 包裹名字
-----------------------------------------
1 | 1 | 黄金套餐
2 | 1 | 银包
3 | 2 | 明星套餐
4 | 2 | 终极套餐
-----------------------------------------

```

*项目表*

```
-------------------------------------------
item_id | 项目名称
-------------------------------------------
1 | 免费客房升级
2 | 含晚餐
3 | 水疗中心
4 | 免费论文
-------------------------------------------

```

*包裹项目表*

```
---------------------
package_id | item_id
---------------------
1 | 2
1 | 3
1 | 4
2 | 2
2 | 3
3 | 4
4 | 1
4 | 2
4 | 3
4 | 4
---------------------

```

因此，使用此数据您可以看到，例如，希尔顿的黄金套餐包含晚餐、水疗中心和免费文件。

我正在我们的前端构建一个功能，让用户过滤这些不同的包项目。每个项目的复选框，单击该复选框应过滤结果以仅显示提供包含用户选择的所有项目的套餐的酒店。

为此，我对 SQL 有点困惑。到目前为止，我的研究已经将我带到了以下示例代码（在这里找到：[PostgreSQL where all in array](https://stackoverflow.com/questions/11468572/postgresql-where-all-in-array)）：

```
SELECT conversation_id FROM conversations_users

 WHERE user_id IN (1,2)

 GROUP BY conversation_id HAVING COUNT(*) = 2 
```

在此示例查询中，查询的关键部分是 HAVING COUNT( *) = 2 部分。有了这个，我希望强制查询以确保必须匹配所有选定的项目，而不仅仅是一个，这是没有 HAVING COUNT(* ) = 2 部分的查询的默认行为。

使用这种方法和上面的表格结构，我已经调整了这个代码以满足我们自己的要求，包括各种 JOIN 查询等。在下面的示例中，我选择了包含晚餐、水疗中心和免费论文。我希望能回到希尔顿和威斯汀酒店，因为这两家酒店都提供包含所有这些项目的套餐。在希尔顿的情况下，他们的黄金套餐提供了我选择的内容，而在威斯汀的情况下，他们的终极套餐提供了我选择的内容。

**请记住，我正在尝试查找提供包含我正在搜索的所有项目的套餐的酒店。**

这是我到目前为止所得到的：

```
SELECT h.hotel_id, h.hotel_name FROM hotels h

  JOIN packages p       ON h.hotel_id   = p.hotel_id
  JOIN package_items pi ON p.package_id = pi.package_id
  JOIN items i          ON pi.item_id   = i.item_id

 WHERE i.item_id IN (2,3,4)

 GROUP BY h.hotel_id HAVING COUNT (*) = 3; 
```

不幸的是，我在这里没有得到准确的结果，我不知道如何解决它。对任何可以为我解决这个问题的人表示深深的敬意。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T14:56:19.330

将您的最后一个查询更新为：

```
 SELECT h.hotel_id, h.hotel_name FROM hotels h
     JOIN packages p       ON h.hotel_id   = p.hotel_id
     JOIN package_items pi ON p.package_id = pi.package_id
     JOIN items i          ON pi.item_id   = i.item_id
     WHERE i.item_id IN (2,3,4)
     GROUP BY h.hotel_id 
     HAVING COUNT (DISTINCT i.item_id) = 3; 
```

这将为您返回包含 3 种不同项目的酒店。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T16:20:13.430

将 package_name 添加到分组中...如下所示，将其放在初始 SELECT 中以显示它的工作原理

```
SELECT h.hotel_id, h.hotel_name, p.package_name FROM hotels h
  JOIN packages p       ON h.hotel_id   = p.hotel_id
  JOIN package_items pi ON p.package_id = pi.package_id
  JOIN items i          ON pi.item_id   = i.item_id
 WHERE i.item_id IN (2,3,4)
 GROUP BY h.hotel_name, p.package_name  HAVING COUNT(*) = 3;

+----------+------------+------------------+
| hotel_id | hotel_name | package_name     |
+----------+------------+------------------+
|        1 | Hilton     | Gold Package     |
|        2 | Weston     | Ultimate Package |
+----------+------------+------------------+ 
```

# python - 我在 python 函数中做错了什么？

> ID：13322821
> 
> 赞同：-5
> 
> 时间：2012-11-10T14:20:09.327
> 
> 标签：python, python-3.x

```
def make_str_from_row(board, row_index):

    ''' (list of list of str, int) -> str

    Return the characters from the row of the board with index row_index
    as a single string.

    >>> make_str_from_row([['A', 'N', 'T', 'T'], ['X', 'S', 'O', 'B']], 0)
    'ANTT'
    '''
    for i in range(len(board)):
        i = row_index
        print(board[i]) 
```

这打印`['A', 'N', 'T', 'T']`

我该如何打印它`'ANTT'`呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T14:22:26.453

你可以通过使用来简化很多

```
>>> def make_str_from_row(board, row_index):
...     print repr(''.join(board[row_index]))
... 
>>> make_str_from_row([['A', 'N', 'T', 'T'], ['X', 'S', 'O', 'B']], 0)
'ANTT' 
```

你得到这个输出的原因是你打印了一个列表，因为 board 的元素是列表。通过使用`join`，你得到一个字符串。

另外，如果要更改循环遍历的索引，我不明白为什么要使用循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T14:23:29.213

好吧，你得到了你告诉打印的东西！

`board`是`str`s 的列表，所以`board[i]`必须是`str`s 的列表，当你写 时`print(board[i])`，你得到一个列表！

你可能需要这样写：

```
print(''.join(board[i])) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T14:23:47.340

我认为这就是你想要做的：

```
def make_str_from_row(board, row_index):
    ''' (list of list of str, int) -> str

    Return the characters from the row of the board with index row_index
    as a single string.

    >>> make_str_from_row([['A', 'N', 'T', 'T'], ['X', 'S', 'O', 'B']], 0)
    'ANTT'
    '''
    for cell in board[row_index]:
        print cell, 
```

# opengl - 管理外部资源（类似于 C++ 中的 RAII？）

> ID：13322823
> 
> 赞同：10
> 
> 时间：2012-11-10T14:20:20.373
> 
> 标签：opengl, common-lisp

在 common lisp 中，管理外部资源（套接字、文件系统句柄等）的首选方法是什么？

我正在尝试用 common lisp 制作一个简单的 opengl 2d 平台游戏。问题是我不太确定如何跟踪 OpenGL 纹理（`glDeleteTextures`在不再需要它们时必须删除）。

在 C++ 中，我更喜欢使用以下方案：

1.  制作纹理类
2.  为该纹理类制作智能/弱指针
3.  将纹理存储在将文件名映射到指向纹理的弱指针的映射（字典/哈希表）中。
4.  当请求新的纹理时，查看地图，看看是否有可用的非空 (nil) 弱指针。如果可用，则返回现有对象，否则加载新纹理。

但是，我不太确定如何将此方案移植到 common lisp，因为：

1.  没有析构函数。
2.  有垃圾收集器，而且我的实现（Windows 平台上的 clozureCL）似乎支持终结器，但据我所知，不建议在 common lisp 中使用终结器，因为它们不是确定性的。
3.  使用管理资源的首选方式在`(with-*`那里看起来不合适，因为资源可以共享，并在函数调用中间加载/卸载。

据我所知，有几种方法可用：

1.  放弃自动资源管理，手动进行。
2.  使用宏实现类似于 C++ RAII、weakpointer 和 smartpointer 的东西（此代码可能不起作用）：

    ```
    (defclass destructible () ())

    (defmethod destroy ((obj destructible)) (print (format nil "destroy: ~A" obj)))

    (defparameter *destructible-classes-list* nil)

    (defmethod initialize-instance :after ((obj destructible) &key)
      (progn
          (push *destructible-classes-list* obj)
          (print (format nil "init-instance: ~A" obj))))

    (defmacro with-cleanup (&rest body)
      `(let ((*destructible-classes-list* nil))
        (progn ,@body (mapcar (lambda (x) (destroy x)) *destructible-classes-list*))))

    (defclass refdata (destructible)
      ((value :accessor refdata-value :initform nil)
       (ref :accessor refdata-ref :initform 0)
       (weakrefcount :accessor refdata-weakref :initform 0)))

    (defmethod incref ((ref refdata))
      (if ref (incf (refdata-ref ref))))

    (defmethod decref ((ref refdata))
      (if ref
        (progn (decf (refdata-ref ref))
         (if (<= (refdata-ref ref) 0) 
           (progn (destroy (refdata-value ref))
              (setf (refdata-value ref) nil))))))

    (defmethod incweakref ((ref refdata))
      (if ref (incf (refdata-weakref ref))))

    (defmethod decweakref ((ref refdata))
      (if ref (decf (refdata-weakref ref))))

    (defclass refbase (destructible) ((data :accessor refbase-data :initform nil)))

    (defmethod deref ((ref refbase))
      (if (and (refbase-data ref) (refdata-value (refbase-data ref)))
        (refdata-value (refbase-data ref))
        nil))

    (defclass strongref (refbase) ())

    (defclass weakref (refbase) ())

    (defmethod destroy :before ((obj strongref))
      (decref (refbase-data obj)))

    (defmethod destroy :before ((obj weakref))
      (decweakref (refbase-data obj)))

    (defmethod initialize-instance :after ((obj strongref) &key)
      (incref (refbase-data obj)))

    (defmethod initialize-instance :after ((obj weakref) &key)
      (incweakref (refbase-data obj))) 
    ```

有更好的方法吗？

**C++ 概念说明：** [什么是智能指针，什么时候应该使用它？](https://stackoverflow.com/questions/106508/what-is-a-smart-pointer-and-when-should-i-use-one)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-10T20:58:23.033

如果要处理动态范围范围，请使用[UNWIND-PROTECT](http://www.lispworks.com/documentation/HyperSpec/Body/s_unwind.htm#unwind-protect)。如果程序离开该范围 - 正常或出错 - 将调用清理表单。只需在那里解除分配或做任何你想做的事情。

有时 Lisps 使用某种“资源”机制来跟踪使用和未使用的对象。这样的库提供了从池中快速分配、分配、初始化、解除分配、资源对象的映射。CLIM 定义了一个原始版本：[Resources](http://www.lispworks.com/documentation/lw61/CLIM/html/climuser-334.htm#pgfId-44509)。CCL 有一个类似的原始版本。

在带有“计时器”的 Lisp 中，您可以定期运行一个函数来查找要释放的“对象”。在 CCL 中，您可以使用休眠一段时间的线程`PROCESS-WAIT`。

关于您的编码风格的一些信息：

*   `FORMAT`可以直接输出到流，不需要 PRINT
*   `(defmethod foo ((e bar)) (if e ...))`:`IF`没有意义。`e`将永远是一个对象。
*   许多`PROGN`是不需要的。在需要时，可以在`IF`替换为 时将其删除`WHEN`。

# java - 如何从根目录加载属性文件？

> ID：13322828
> 
> 赞同：1
> 
> 时间：2012-11-10T14:20:48.173
> 
> 标签：java, windows, eclipse, file, properties

我目前正在加载这样的属性文件：

```
private Properties loadProperties(String filename) throws IOException{
        InputStream in = ClassLoader.getSystemResourceAsStream(filename);
        if (in == null) {
            throw new FileNotFoundException(filename + " file not found");
        }
        Properties props = new Properties();
        props.load(in);
        in.close();
        return props;
    } 
```

但是，目前我的文件位于 scr\user.properties 路径。

但是当我想写入属性文件时：

```
properties.setProperty(username, decryptMD5(password));
        try {
            properties.store(new FileOutputStream("user.properties"), null);
            System.out.println("Wrote to propteries file!" + username + " " + password); 
```

那段代码在我的项目的根文件夹级别生成了一个新文件。

但我想要一个文件来写\读。

因此如何做到这一点？

PS.：当我想指定路径时，我得到“不允许修改文件...”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T14:52:51.700

创建新文件的原因是您在编写时尝试创建新文件。您应该首先获取要作为 File 对象写入的 user.properties 的句柄，然后尝试写入它。

代码看起来类似于

```
properties.setProperty(username, decryptMD5(password));
try{
    //get the filename from url class
    URL url = ClassLoader.getSystemResource("user.properties");
    String fileName = url.getFile();

    //write to the file
    props.store(new FileWriter(fileName),null);
    properties.store();
}catch(Exception e){
    e.printStacktrace();
} 
```

# wpf - 协助设计 WPF 控件模板

> ID：13322836
> 
> 赞同：0
> 
> 时间：2012-11-10T14:21:48.123
> 
> 标签：wpf, wpf-controls, controltemplate

我正在尝试设计一个与 Bing 地图一起使用的模板。我从基本模板开始，撕掉了一些，又添加了一些，但我把它弄得有点乱！

我想要实现的是一个图钉，它的每一面都有一个工具提示，我可以在其中插入更多信息（尽管这些实际上不是工具提示；它们基于绑定属性永久显示）。就像是...

![到目前为止我所拥有的](../Images/5753c3757c78897a73c5ca0c516cce53.png)

正如你所看到的，我不是一个艺术家，也没有真正走多远！

有人可以帮忙吗？我想要的是引脚两侧的橙色条能够包含基于绑定的文本（如果需要，条应该会增长）；同时还能够根据绑定隐藏一个或两个栏（例如 IsLeftTextVisible/IsRightTextVisible，名称无关紧要，我可以稍后更改），或者即使绑定字段不包含文本。

我也真的希望橙色条更好一点；但是，如果有人可以帮助我达到可以显示文本的地步，我（希望）应该能够从那里获取它。

这是产生我所拥有的代码...

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:m="clr-namespace:Microsoft.Maps.MapControl.WPF;assembly=Microsoft.Maps.MapControl.WPF">

  <ControlTemplate x:Key="PushpinTemplate" 
    TargetType="{x:Type m:Pushpin}">

    <Grid Grid.Name="LayoutRoot"
      FrameworkElement.Height="{TemplateBinding FrameworkElement.Height}"
      FrameworkElement.Width="{TemplateBinding FrameworkElement.Width}">

      <Canvas FrameworkElement.Height="35"
        FrameworkElement.HorizontalAlignment="Left"
        FrameworkElement.VerticalAlignment="Top"
        FrameworkElement.Width="34">

        <Path x:Name="CollectionTextPath"
          Fill="{TemplateBinding Background}"
          Data="M 0,20 H100 V-20 H-0"
          Canvas.Left="20"
          Stretch="Fill"
          Width="100"
          Height="18.905"
          Canvas.Top="3.19"
          RenderTransformOrigin="0.5,0.5" >

          <Path.RenderTransform>
            <TransformGroup>
              <ScaleTransform ScaleX="1"/>
              <SkewTransform/>
              <RotateTransform/>
              <TranslateTransform/>
            </TransformGroup>
          </Path.RenderTransform>

        </Path>

        <Path x:Name="DeliveryTextPath"
          Fill="{TemplateBinding Background}"
          Data="M 0,20 H100 V-20 H-0"
          Canvas.Left="-81"
          Stretch="Fill"
          Width="100"
          Height="18.905"
          Canvas.Top="4.19"
          RenderTransformOrigin="0.5,0.5" >

          <Path.RenderTransform>
            <TransformGroup>
              <ScaleTransform ScaleX="-1"/>
              <SkewTransform/>
              <RotateTransform/>
              <TranslateTransform/>
            </TransformGroup>
          </Path.RenderTransform>

        </Path>

        <Path x:Name="Path_0"
          Stretch="Fill"
          StrokeLineJoin="Round"
          Stroke="#FF333333"
          Fill="#FFFFFFFF"
          Data="F1M13.25,0.50001502C20.2917,0.50001502 26,6.2083602 26,13.25 26,17.817347 23.598524,21.823648 19.989363,24.075348 18.67861,25.105957 17.863953,27.531982 17.863953,27.531982L13.21736,39.595642 8.6221838,27.528591C8.6221838,27.528591 7.8198605,25.084908 6.6245556,24.145586 2.952121,21.907652 0.5,17.865215 0.5,13.25 0.5,6.2083602 6.2083402,0.50001502 13.25,0.50001502z"
          UseLayoutRounding="False"
          Height="39.694"
          Width="26"
          Canvas.Left="8.282"
          Canvas.Top="0.001" />

        <Ellipse Height="21"
          Width="21"
          Fill="{TemplateBinding Background}"
          Canvas.Top="2.434"
          HorizontalAlignment="Center"
          VerticalAlignment="Center"
          Canvas.Left="10.806"
          Stroke="{x:Null}" />

        <Ellipse Height="18.905"
          Width="18.905"
          Canvas.Top="3.19"
          Canvas.Left="11.911"
          Stroke="{x:Null}">

          <Ellipse.Fill>
            <LinearGradientBrush EndPoint="0.5,1"
              StartPoint="0.5,0">
              <GradientStop Color="#00FFFFFF"
                Offset="0.438" />
              <GradientStop Color="#6EFFFFFF"
                Offset="0.987" />
            </LinearGradientBrush>
          </Ellipse.Fill>

        </Ellipse>

        <UIElement.RenderTransform>
          <TransformGroup>
            <TranslateTransform TranslateTransform.X="-4" />
          </TransformGroup>
        </UIElement.RenderTransform>

      </Canvas>

      <Grid FrameworkElement.HorizontalAlignment="Center"
        FrameworkElement.VerticalAlignment="Top"
        FrameworkElement.Margin="0,2,0,0"
        FrameworkElement.Height="22"
        FrameworkElement.Width="21">

        <ContentPresenter ContentPresenter.Content="{TemplateBinding ContentControl.Content}"
          FrameworkElement.HorizontalAlignment="Center"
          FrameworkElement.VerticalAlignment="Center" />

      </Grid>

    </Grid>

  </ControlTemplate>

  <Style x:Key="{x:Type m:Pushpin}"
    TargetType="{x:Type m:Pushpin}">
    <Setter Property="Template"
      Value="{StaticResource PushpinTemplate}" />
  </Style>

</ResourceDictionary> 
```

正如您可能收集到的，画布、网格和椭圆（看起来不错的位）来自原始模板。然后我添加了两个路径，但我现在不知道如何在其中放置文本（如果我有地方可以放置文本，我可能会毫无问题地绑定文本）。

我知道这有点问；但是有没有人有点图形化并且可以让我前进一点。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T13:20:43.707

我已经充分扩展了布局。

# java - 仿真的 GUI 渲染

> ID：13322839
> 
> 赞同：0
> 
> 时间：2012-11-10T14:21:55.800
> 
> 标签：java, multithreading, swing, simulation

我目前正在研究树搜索的模拟，我正在尝试设计一个 gui 来显示构建的搜索树。我正在使用观察者设计模式，但似乎遇到了问题，因为 gui 是不同的执行线程，所以搜索似乎在 gui 绘制以说明模拟之前完成。无论如何，搜索和显示搜索的 gui 是否可以同步，以便 gui 在绘制时反映搜索的状态。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T01:28:09.770

首先你应该注意到人类很慢:)我会说一步一步的方法更适合，所以你需要提供以下功能：

1.  向前一步
2.  后退一步
3.  开始/停止执行
4.  灵活的模拟速度

让我们以一些动画图像为例（[source](http://www.rci.rutgers.edu/~cfs/472_html/AI_SEARCH/SearchAnimations.html)）：

![在此处输入图像描述](../Images/131e0109eada2b68c09333ceaab0ac80.png)

这个例子很简单，但是你可能会注意到你无法控制执行的事实有点烦人。无论如何，为了提供良好的可视化，您必须从处理循环设计开始。这似乎很简单：

1.  更新树
2.  渲染它
3.  等待一段时间让用户注意到差异

对你来说，它看起来像一个简单的游戏循环吗？

![在此处输入图像描述](../Images/4ca7597d4320a4fbee58a4984daab45d.png)

另请[在此处查看一些详细信息](http://entropyinteractive.com/2011/02/game-engine-design-the-game-loop/)

我建议如下：

1.  定义一个模型来保存一个树状态
2.  [使用命令模式](http://en.wikipedia.org/wiki/Command_pattern)实现更新模型（树）的逻辑
3.  实现命令队列和命令执行器
4.  让视图接收模型更新事件

![在此处输入图像描述](../Images/5102684a4404a4b694a5c658d1215f87.png)

因此，每次用户按下 Next 时，您都会创建一个命令（或多个命令）并将其提交给模型。执行完所有命令后，模型应该刷新视图。用户将有足够的时间来了解更改。自动化模式也是可能的（您将生成具有指定延迟的命令）

# mysql - 存储用户并传入单个表或单独的表

> ID：13322841
> 
> 赞同：10
> 
> 时间：2012-11-10T14:22:00.543
> 
> 标签：mysql, sql, sql-server, database, database-design

我想为我的网站创建一个用户管理系统，

什么对安全性和性能更好。

类型 1：

```
table_user : user_id , user_name , user_email , user_password . user_phone ... 
```

或者

类型 2：

```
table_user : user_id , user_name , user_email ...
table_pass : user_id , user_password .
table_phone: user_id , user_phone . 
```

哪一个更好 ？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-10T21:21:51.137

理想情况下：

*   根本不存储密码（即使是加密的）。存储从密码派生的**哈希值。**
*   [对密码加盐](http://en.wikipedia.org/wiki/Salt_%28cryptography%29)以防止[彩虹攻击](http://en.wikipedia.org/wiki/Rainbow_attack)。
*   将散列放在一个单独的数据库服务器上，在它自己的防火墙和它自己定义良好的 API ¹后面。这个 API 应该只做三件事：
    1.  对于给定的用户名，检索相应的密码哈希。
    2.  对于给定的用户名，设置新的哈希（以支持重置密码）。
    3.  删除给定的用户名及其哈希（以支持用户注销）。
*   对盐做同样的事情：把它们放在自己的服务器上，放在自己的防火墙和 API 后面。这个 API 应该只做三件事：
    1.  对于给定的用户名，检索相应的盐。
    2.  对于给定的用户名，将新盐设置为随机值（以支持重置密码）。
    3.  删除给定的用户名及其盐（以支持用户注销）。
*   哈希服务器和盐服务器都应该与世界（以及彼此）切断，并且只能从运行您的 Web 应用程序的服务器（即 PHP 或 ASP.NET 或其他...）访问。

当用户尝试通过输入用户名和密码登录时：

*   确保这是通过 HTTPS 完成的，以便输入的数据安全地到达您的服务器。
*   调用检索用户名密码哈希的 API。
*   调用为用户名检索盐的 API。
*   对用户输入的密码进行加盐和哈希处理，并将其与检索到的哈希值进行比较。
*   如果它们匹配，则授予用户访问权限。

就其本质而言，哈希是不可逆的——除了用户之外，没有人，甚至你，都不知道确切的密码。如果用户忘记密码，您不能将密码发送给他们，但您可以允许他们重置密码，前提是他们通过了一些额外的验证（即可以访问特定的电子邮件地址和/或回答秘密）问题）。

顺便说一句，登录是一种*相对*罕见的操作，因此除非您完全忽略正确的索引，否则它不太可能造成性能瓶颈。

* * *

*¹例如，实现一个 Web 服务，然后只打开该 Web 服务所需的端口，不打开其他任何东西。*

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-10T14:46:17.437

## 我会选择选项 1。

想想有成千上万的用户。因此，要获取用户数据，您将不得不处理 n 个表而不是 1 个表，这显然会在服务器上添加 LOAD，最后您将获得 BAD PERFORMANCE。

所以，我会选择选项1。

对于电话。number，将字段添加为landline_number，mobile_number，alternate_number 作为在表中添加字段不会产生太大的区别，然后为字段添加表。

是的，根据史蒂夫的评论，使用安全散列机制存储密码。

**那么你会选择什么选项呢？**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-10T14:38:05.950

首先，正如@Steve 评论的那样，您应该使用安全的散列机制存储密码——存储纯文本密码是不负责任的——这意味着任何可以侵入你系统的人都知道他们可能在其他网站上重复使用的用户密码。

其次，这两种设计都没有内在的安全性或性能优势 - 从安全性的角度来看，您必须假设可以访问您的数据库的攻击者可以运行查询，并且在这两种设计中检索数据都非常容易计划。从性能的角度来看，如果您有主/外键索引，则选项 2 中的连接成本不太重要。

如果您需要在一段时间后重新设置密码，并且您需要存储密码历史记录以防止人们重复使用密码（例如，这是 Windows 支持的功能），您需要有一个“UserPassword”表，带有 valid_from 和 valid_until 列。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-10T14:25:27.943

这取决于。如果您想保留密码历史记录并且如果用户可以拥有许多电话号码，那么您可以为密码和电话创建额外的表格。在其他情况下，一张桌子就足够了。

# python - 指示 3 个或更多重复字符的二进制特征

> ID：13322847
> 
> 赞同：0
> 
> 时间：2012-11-10T14:22:38.840
> 
> 标签：python, python-3.x

我`str`喜欢`"Buy new XXX sex bla-bla-bla"`，我需要找出是否`str`有`XXX`or`ZZZ`或任何 3 个或更多重复字符。当然我可以做一些阵列并走错路，但也许这里有一些`trick`？谢谢你。

PS。谷歌没有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T14:25:57.850

```
import re

if re.search(r'(.)\1\1', mystr):
   print "Has triple letters" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T14:31:27.677

像这样的东西：

```
In [14]: for x,y,z in zip(strs,strs[1:],strs[2:]):
   ....:     if x==y==z and x:
   ....:         print x+y+z
   ....:         
XXX 
```

# jquery - jquery 打开包含 li class="active" 的 div

> ID：13322850
> 
> 赞同：1
> 
> 时间：2012-11-10T14:23:04.190
> 
> 标签：jquery

我正在使用此脚本在我的网站上切换/手风琴 div：

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 
<script type="text/javascript" src="http://www.xyz/js/jquery.smooth-scroll.min.js"></script> 
<script type="text/javascript">
(function($) {

    $('#navigation a').smoothScroll({
            easing: 'swing'
        });

    $('.project > .title').click(function(){
        /* Close */
        $(this).parent().siblings().children('.info').slideUp(400);
        $(this).parent().siblings().children('.title').removeClass('flip');
        $(this).parent().siblings('.project').removeClass('open');

        /* Open */
        $(this).toggleClass('flip');
        $(this).parent('.project').toggleClass('open');
        $(this).next('.info').slideToggle(400, function(){
                var project = $(this).parent('.project');
                $.smoothScroll({
                scrollTarget: project,
                easing: 'swing',
                speed: 400
                });
        });
    });

})(jQuery);

</script> 
```

用于控制此 HTML 标记：

```
<!-- .project -->
<div class="project padding group">
    <div class="title group limiter"><h3>START</h3></div>

    <div class="info group limiter">
        <div class="left">
        <ul>
        <li><a href="aktuell.html" title="AKTUELL" >AKTUELL</a></li>
        <li class="active"><a href="jobs.html" title="JOBS" >JOBS</a></li>
        <li><a href="presse.html" title="PRESSE" >PRESSE</a></li>
        <li><a href="projekte.html" title="PROJEKTE" >Projekte</a></li>
        <li><a href="archiv.html" title="ARCHIV" >Archiv</a></li>
        </ul>
        </div>

        <div class="right">123</div>
    </div>
</div>

<!-- .project -->
<div class="project padding group">
    <div class="title group limiter"><h3>COMPANY</h3></div>

    <div class="info group limiter">
        <div class="left">
        <ul>
        <li><a href="1.html" title="1" >1</a></li>
        <li><a href="2.html" title="2" >2</a></li>
        <li><a href="3.html" title="3" >3</a></li>
        <li><a href="4.html" title="4" >4</a></li>
        <li><a href="5.html" title="5" >5</a></li>
        </ul>
        </div>

        <div class="right">123</div>
    </div>
</div> 
```

您可以看到在第一个 div 中有一个**li class="active"**。我想实现在页面加载时打开包含**li class="active"的****div 类“项目填充组” 。**

 **关于如何使这成为可能的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T14:51:45.950

更清洁的方法怎么样？

[**小提琴**](http://jsfiddle.net/videsignz/72bBJ/)

```
$(document).ready(function(){

$('#navigation a').smoothScroll({
    easing: 'swing'
});

$('.title').click(function() {
    $('.info').slideUp(400);
    $(this).parent('div').find('.info').slideDown(400);
});

$('li.active').closest('.info').slideDown(400);

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T15:09:18.783

使用以下选择器：

```
$( 'li.active' ).closest( 'div.project.padding.group' ) 
```**

# cassandra - 如何将数组存储在列族中

> ID：13322851
> 
> 赞同：0
> 
> 时间：2012-11-10T14:23:11.553
> 
> 标签：cassandra

我有一些相互关联的特定数据集。我需要将它们存储在列中。

如何为存储数组或集合创建列族？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T20:49:31.983

如果您将 PlayOrm 用于 cassandra，您只需

```
 @NoSqlEmbedded
 private List<String> stuff; 
```

它为你做到了。

如果您自己做，只需将其转换为字节并存储即可。不过要小心。在某些情况下，服务器 1 和服务器 2 读取值 a、b、c 并且服务器 1 添加 d 并且服务器 2 添加 e。如果你不做 PlayOrm 为你做的事情并且两个服务器都回写，你最终会得到 a,b,c,d OR a,b,c,e。使用 PlayOrm 中的上述内容，当两个服务器都回写时，您最终会得到 a,b,c,d,e。

如果你想和 PlayOrm 做同样的事情，最好将每个元素存储在它自己的列中，这样写入是独立的，不会互相影响，但也许你可以接受？

编辑：PlayOrm 采用 a、b、c、d 的 List 并将其视为 Set，因此每个都是独一无二的。现在，假设两台服务器使用 PlayOrm 进行写入。

一台服务器写出 stuff:a=null, stuff:b=null, stuff:c=null

第二台服务器写出 stuff:a=null, stuff:b=null, stuff:d=null

如果您重新阅读以上内容，您最终会得到 a、b、c、d。如果您这样做并写入 ONE 列，则最后一个服务器获胜，但在此策略中，结果被合并。这称为复合列名，我们将值存储在列名而不是值字段中。

如果您有兴趣，请提供更多信息.....在 PlayOrm 中，您可以像这样创建一个实体

```
 @NoSqlEntity
 public class Entity {
    @NoSqlId
    private String id;
    @NoSqlEmbedded
    private List<String> stuff = new ArrayList<String>();
 } 
```

然后你可以像这样保存它

```
 NoSqlEntityManager mgr = ...
 mgr.put(someEntity);
 mgr.put(otherEntity);
 mgr.flush();  //here it is all actually written together 
```

刷新也很好，因为如果您的任何代码中有异常，则没有编写任何代码来保护您免受 nosql 存储中的数据损坏。

因此，PlayOrm 基本上会将您的实体的每个实例转换为 noSql 存储中的一行。您可以在此处查看 playorm 功能列表

[https://github.com/deanhiller/playorm#playorm-feature-list](https://github.com/deanhiller/playorm#playorm-feature-list)

基本上，它不能真正成为 JPA，因为它利用了 JPA 所没有的许多新的 noSql 模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T01:47:04.030

为什么不为每个列表元素创建一列？

例如数组 = [a, b, c, d]

```
col name   col value
---------------------
array:0  | a
array:1  | b
array:2  | c
array:3  | d 
```

# web - IIS 7.5：可以从局域网浏览网站，但不能从外部浏览

> ID：13322857
> 
> 赞同：0
> 
> 时间：2012-11-10T14:23:48.667
> 
> 标签：web, iis-7.5, localhost, portforwarding

我在 IIS 7.5 中设置了一个 MVC4 网站。当我从网络中的计算机上使用计算机的 IP 地址浏览网站时，它可以正常工作。但是从网络外部访问时，该网站不会加载。

我有一个路由器并在端口 80 上设置端口转发（也与其他人一起尝试过，但我会坚持这个问题），以转发到我的 PC 的 IP 地址。还允许在我的防火墙中的端口 80 上传入 TCP 请求。

在 IIS 7.5 中，我使用具有默认绑定的默认网站，其中包括端口 80 的绑定、所有未分配的 IP 地址和没有主机名。

在本地，我可以使用以下地址浏览我的网站：

```
Local PC IP -xxx.xxx.x.xxx/LBSPrototype1 
```

我不应该能够使用以下方式从网络外部访问我的网站：

```
Router IP - xxx.xxx.x.x/LBSPrototype1 
```

因为我将端口 80 转发到我的本地 PC？或者，如果我使用不同的端口：

```
Router IP - xxx.xxx.x.x:PORT/LBSPrototype1 
```

我不知道我做错了什么，关于我可能遗漏的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T14:28:21.097

尝试禁用防火墙？也许某些防火墙规则阻止了您

# php - PHP - 跟踪用户来自推荐人还是直接用户？

> ID：13322859
> 
> 赞同：-2
> 
> 时间：2012-11-10T14:24:05.077
> 
> 标签：php, tracking

> **可能重复：**
> [获取引荐来源网址 - 来自 Paypal (HTTPS) 的访问者](https://stackoverflow.com/questions/10430704/get-referrer-url-visitors-coming-from-paypal-https)

我正在尝试跟踪我的访客，我正在使用 with `$_SERVER[HTTP_REFERER]`，

我有一些问题，当用户来自**https**引用时， `$_SERVER[HTTP_REFERER]`iOS 6 中的消失。

在这种情况下，我怎么知道用户是来自推荐人还是直接来的，还有其他方法可以知道用户是直接来的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T14:26:46.490

如果客户端不发送引用标头，则无法知道他来自哪里。

但是，您可以通过设置一个包含时间戳的 cookie 并检查该 cookie 是否已经存在以及其中的时间戳有多旧来确定用户之前是否在您的站点上。

# rotation - OpenGL ES 2.0 每个顶点的着色器旋转

> ID：13322869
> 
> 赞同：0
> 
> 时间：2012-11-10T14:25:28.163
> 
> 标签：rotation, opengl-es-2.0, vertex-shader

这个问题实际上是关于剥皮的。假设我们有一个带有顶点组（骨骼）作为浮动缓冲区的模型，我们将它传递给着色器。有没有办法部分旋转顶点组？缓冲区是 x,y,z,u,v,n1,n2,n3,boneid,rotfactor 。（rotfactor 是一个浮点数，表示我们要应用于此顶点的旋转百分比）。因此，如果使用角度 = 45 的旋转矩阵旋转组，有没有办法将每个顶点旋转 45 * rotfactor？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T19:03:54.510

这非常详细地描述了您正在尝试做的事情：

[http://www.opengl.org/wiki/Skeletal_Animation](http://www.opengl.org/wiki/Skeletal_Animation)

注意这一行：

```
uniform mat4 Bone[10];  //Array of bones that you compute (animate) on the CPU and you upload to the shader 
```

正如它所暗示的，您需要为每个骨骼计算一个矩阵。您将在 CPU 端的应用程序代码中执行此操作，即*不在*着色器中。然后，您会将这些矩阵传递给统一变量`Bone`。

# sql - 数据库文件组 - 仅在新服务器上恢复 1 个文件组

> ID：13322875
> 
> 赞同：1
> 
> 时间：2012-11-10T14:26:01.237
> 
> 标签：sql, database, restore

有没有办法备份 SQL 数据库中的某些表？我知道我可以将某些表移动到不同的文件组中并在这些文件组上执行备份。唯一的问题是我相信您需要备份所有文件组和事务日志才能在不同的服务器上恢复数据库。

我需要在不同的服务器上恢复备份的原因是这些是客户数据库的备份。例如，我们可能有一个远程客户，需要获取他们 4GB 数据库的副本。这个空间的 90% 被两个表占用，我们不需要这些表，因为它们只存储图像。目前我们必须获取数据库的副本并将其上传到 FTP 站点……对于较大的数据库，这可能需要很多时间，我们需要减小数据库大小。

我能想到的另一种方法是对数据库进行完整备份并将其还原到客户端 SQL 服务器上。然后连接到新的临时数据库并删除这两个表。完成此操作后，我们可以备份数据库。此解决方案的唯一问题是它在运行查询时可能会使用大量系统还原，因此不太理想。

所以我的想法是使用两个文件组。主文件组将托管所有表，除了将在第二个文件组中的两个表。然后，当我们需要数据库的副本时，我们只需备份主文件组。我已经进行了一些测试，但无法使其正常工作。有什么建议么？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T11:38:12.967

基本上，您使用 2 个文件组的方法似乎是合理的。

我想您在两端都在使用 SQL Server，但是您应该澄清每个是否确实如此，以及哪些版本（企业版、标准版、快递版等），以及 2000 年、2005 年、2008 年发布的版本， （2012 年？）。

SQL Server 中的表备份在[这里](https://stackoverflow.com/questions/680552/table-level-backup, "这里")是一匹死马，仍然时不时地得到很好的鞭打。基本上，这不是内置备份功能集中的功能。正如您正确指出的那样，部分备份功能可以用作解决方法。此外，如果您只想将快照从表的子集传输到另一台服务器，则可以使用 ftp 尝试使用上述链接帖子中的答案之一或导出/导入数据向导中建议的 bcp 实用程序。为了完善 SQL Server 的表备份解决方案和解决方法列表，有这个（可能还有其他？）第三方软件声称允许单独恢复表对象，但不幸的是似乎不提供单独的对象备份，[“对象级恢复本机“红门”](http://www.red-gate.com/products/dba/sql-olr-native/). （我没有使用此特定工具的从属关系或经验）。

根据您对从部分数据库备份恢复的更具体的关注：

> 我相信您需要备份所有文件组和事务日志才能在不同的服务器上恢复数据库

1) 您第一次尝试使其工作时可能会遇到一些困难，但您可以从 SQL Server 2000 的部分备份执行恢复，（作为参考，请参见[此处](http://msdn.microsoft.com/en-us/library/ms177425%28v=sql.90%29.aspx)

2) 从 2005 年起，您可以选择今天部分恢复，如果需要，您可以稍后恢复数据库的其余部分。您不需要包括所有文件组 - 您始终包括主文件组，如果您的数据库是简单恢复模式，您需要添加所有读写文件组。

3) 仅当您的数据库处于批量或完全恢复模式并且您正在将更改还原到自上次还原后已变为读写的只读文件组时，您才需要应用日志备份。由于您期望对这些表进行更改，您可能不会关心只读文件组，因此不必关心传送和应用日志备份

您还可以调查一段时间，是否有任何其他 SQL Server 功能、合并复制或上面提到的那些（bcp、导入/导出向导）可以提供更简单或更充分满足您的需求的解决方案。

# javascript - Node.js Express 应用程序处理启动错误

> ID：13322876
> 
> 赞同：33
> 
> 时间：2012-11-10T14:26:08.710
> 
> 标签：javascript, node.js, error-handling, coffeescript, express

我在 Node.js 和 Express 中有应用程序。我需要为它编写测试。我在处理 Express 应用程序错误时遇到问题。我发现了这个[How do I catch node.js/express server errors like EADDRINUSE?](https://stackoverflow.com/questions/9544479/how-do-i-catch-node-js-express-server-errors-like-eaddrinuse) ，但它对我不起作用，我不知道为什么。我想处理在 expressApp.listen() 执行时可能发生的错误（EADDRINUSE、EACCES 等）。

```
express = require('express')
listener = express()

#doesn't work for me
listener.on('uncaughtException', (err) ->
  #do something
)

#doesn't work too
listener.on("error", (err) ->
  #do something
)

#this works, but it caughts all errors in process, I want only in listener
process.on('uncaughtException', (err) ->
  #do something
)

listener.listen(80) #for example 80 to get error 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2014-11-20T13:08:58.560

这应该可以解决问题：

```
listener.listen(80).on('error', function(err) { }); 
```

实际做`listener.listen`的是创建一个 HTTP 服务器并在其上调用监听：

```
app.listen = function(){
  var server = http.createServer(this);
  return server.listen.apply(server, arguments);
}; 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-11-10T22:41:41.750

首先，expressJS 不会抛出`uncaughtException`事件，进程会，所以你的代码不起作用也就不足为奇了。

所以使用：`process.on('uncaughtException',handler)`代替。

接下来，expressJS 已经提供了一种标准的错误处理方法，即使用它为此目的提供的中间件函数，如下所示：

```
app.configure(function(){
    app.use(express.errorHandler({ dumpExceptions: true, showStack: true }));
}); 
```

此函数向客户端返回一条错误消息，带有可选的堆栈跟踪，并记录在[connectJS errorHandler](http://www.senchalabs.org/connect/errorHandler.html)中。

（请注意，errorHandler 实际上是 connectJS 的一部分，仅由 expressJS 公开。）

如果现有的 errorHandler 提供的行为不足以满足您的需求，它的来源位于[connectJS 的`errorHandler`中间件](https://github.com/senchalabs/connect/blob/master/lib/middleware/errorHandler.js)，可以轻松修改以满足您的需求。

当然，与其直接修改这个函数，“正确”的做法是创建自己的errorHandler，使用connectJS版本作为起点，如：

```
var myErrorHandler = function(err, req, res, next){
    ...
    // note, using the typical middleware pattern, we'd call next() here, but 
    // since this handler is a "provider", i.e. it terminates the request, we 
    // do not.
}; 
```

并将其安装到 expressJS 中：

```
app.configure(function(){
    app.use(myErrorHandler);
}); 
```

参见[Just Connect it, Already](http://howtonode.org/connect-it)以获得对 connectJS 的中间件思想的解释，以及`filter`How [To Write Middleware for Connect/Express](http://www.hacksparrow.com/how-to-write-midddleware-for-connect-express-js.html)以获得编写良好的教程。`provider`

这些对你也可能有用：

*   [如何处理 node.js 中的代码异常？](https://stackoverflow.com/questions/10390658/how-to-handle-code-exceptions-in-node-js)

*   [从 Node.JS 中的未捕获异常中恢复](https://stackoverflow.com/questions/8114977/recover-from-uncaught-exception-in-node-js)

最后，可以在[其自己的测试中找到有关测试 expressJS 的极好信息来源。](https://github.com/visionmedia/express/tree/master/test)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2018-11-01T23:29:23.123

提及：**Marius Tibeica**的回答是完整而伟大的，**david_p**评论也是如此。Rob Raisch 的回答也是如此（有趣的探索）。 [https://stackoverflow.com/a/27040451/7668448](https://stackoverflow.com/a/27040451/7668448)
[https://stackoverflow.com/a/13326769/7668448](https://stackoverflow.com/a/13326769/7668448)

# 注意

第一种方法不好！我把它留作参考！请参阅更新部分！为了好版本！并解释为什么！

##  坏版本

对于那些觉得这很有用的人，这里有一个实现繁忙端口处理的函数（如果端口繁忙，它将尝试下一个端口，直到找到一个不繁忙的端口）

```
app.portNumber = 4000;
function listen(port) {
    app.portNumber = port;
    app.listen(port, () => {
        console.log("server is running on port :" + app.portNumber);
    }).on('error', function (err) {
        if(err.errno === 'EADDRINUSE') {
            console.log(`----- Port ${port} is busy, trying with port ${port + 1} -----`);
            listen(port + 1)
        } else {
            console.log(err);
        }
    });
}

listen(app.portNumber); 
```

函数listen递归调用自己。在端口繁忙错误的情况下。每次增加端口号。

# 更新完全重做

##  回调完整版

首先，这个版本是遵循与 nodejs`http.Server.listen()`方法相同的签名的版本！

```
function listen(server) {
    const args = Array.from(arguments);
    // __________________________________ overriding the callback method (closure to pass port)
    const lastArgIndex = arguments.length - 1;
    let port = args[1];
    if (typeof args[lastArgIndex] === 'function') {
        const callback = args[lastArgIndex];

        args[lastArgIndex] = function () {
            callback(port);
        }
    }

    const serverInstance = server.listen.apply(server, args.slice(1))
        .on('error', function (err) {
            if(err.errno === 'EADDRINUSE') {
                console.log(`----- Port ${port} is busy, trying with port ${port + 1} -----`);
                port += 1;
                serverInstance.listen.apply(serverInstance, [port].concat(args.slice(2, lastArgIndex)));
            } else {
                console.log(err);
            }
        });

    return serverInstance;
} 
```

### 签名：

> 听（服务器或ExpressApp，[端口[，主机[，积压]]][，回调]）

就像按照

[https://nodejs.org/api/net.html#net_server_listen_port_host_backlog_callback](https://nodejs.org/api/net.html#net_server_listen_port_host_backlog_callback)

回调签名更改为

> （端口）=> 无效

###  用法：

```
const server = listen(app, 3000, (port) => {
    console.log("server is running on port :" + port);
});

// _____________ another example port and host
const server = listen(app, 3000, 'localhost', (port) => {
    console.log("server is running on port :" + port);
}); 
```

###  解释

与老例子相反！此方法不会调用自身！

关键要素：

*   app.listen() 第一次调用会返回一个 net.Server 实例
*   绑定一次事件后，再次调用 listen 到同一个 net.Server 实例将尝试重新连接！
*   错误事件监听器始终存在！
*   每次发生错误时，我们都会重新尝试。
*   端口变量播放关闭回调！当回调将被调用时，将传递正确的值。

重要的

```
serverInstance.listen.apply(serverInstance, [port].concat(args.slice(2, lastArgIndex))); 
```

为什么我们在这里跳过回调！？

回调一旦添加！它保存在阵列内部的服务器实例中！如果我们再添加一个！我们将有多个触发器！关于（尝试次数+ 1）的次数。所以我们只在第一次尝试中包含它！

这样我们就可以直接返回服务器实例！并继续使用它来尝试！而且做得很干净！

## 仅简单版本端口

这也有助于一目了然地更好地理解

```
function listen(server, port, callback) {
    const serverInstance = server.listen(port, () => { callback(port) })
        .on('error', function (err) {
            if(err.errno === 'EADDRINUSE') {
                console.log(`----- Port ${port} is busy, trying with port ${port + 1} -----`);
                port += 1;
                serverInstance.listen(port);
            } else {
                console.log(err);
            }
        });

    return serverInstance;
} 
```

这里的参数端口变量玩就关闭了！

## ES6 完整版

```
function listen(server, ...args) {
    // __________________________________ overriding the callback method (closure to pass port)
    const lastArgIndex = args.length - 1;
    let port = args[0];
    if (typeof args[lastArgIndex] === 'function') {
        const callback = args[lastArgIndex];

        args[lastArgIndex] = function () {
            callback(port);
        }
    }

    const serverInstance = server.listen(server, ...args)
        .on('error', function (err) {
            if(err.errno === 'EADDRINUSE') {
                console.log(`----- Port ${port} is busy, trying with port ${port + 1} -----`);
                port += 1;
                serverInstance.listen(...[port, ...args.slice(1, lastArgIndex)])
            } else {
                console.log(err);
            }
        });

    return serverInstance;
} 
```

## 为什么旧版本不好

说对了，还真不是！但是第一个版本！我们在每次失败时调用函数本身！并且每次它都会创建一个新实例！垃圾收集器会动一些肌肉！

没关系，因为这个函数只在开始时执行一次！

旧版本没有返回服务器实例！

## 额外（对于@sakib11）

你可以看看@sakib11 的评论，看看他遇到了什么问题！可以深思熟虑！

同样在评论中我提到了承诺版本和闭包吸气剂模式！我不认为他们有趣！上面的方式只是尊重与nodejs相同的签名！而且回调就好了！而且我们正在将我们的服务器参考写掉！带有承诺版本！一个承诺得到回报，我们通过了所有的元素！服务器实例+端口！

如果你想知道闭包吸气剂模式！（这里不好）

在我们的方法中，我们创建了一个引用服务器实例的 ref！如果我们不能像我们正在做的那样返回服务器实例（想象这是不可能的！所以每次创建一个新实例！该模式包括创建一个闭包（在该范围内的方法）并返回它！

所以为了使用

```
const getServer = listen(port, () => {
   console.log('Server running at port ' + getServer().address().port);
   const io = socketIo(getServer(), {});
}); 
```

但这只是开销，特别是我们需要等待服务器完成！除非我们以使用回调的方式设置它！或回报承诺！

它只是过于复杂了！而且一点都不好！

只是因为我提到过！

上面的方法可以调整！添加尝试次数限制！并添加一些事件或钩子！不过好！通常我们只需要一个简单的函数来尝试并实现它！对我来说，以上就足够了！

## 好的链接

*   [https://nodejs.org/api/http.html#http_http_createserver_options_requestlistener](https://nodejs.org/api/http.html#http_http_createserver_options_requestlistener)

*   [https://nodejs.org/api/http.html#http_class_http_server](https://nodejs.org/api/http.html#http_class_http_server)

*   [https://expressjs.com/en/4x/api.html#app.listen](https://expressjs.com/en/4x/api.html#app.listen)

从文档

> app.listen() 方法返回一个 http.Server 对象，并且（对于 HTTP）是以下的便捷方法：

```
app.listen = function () {
  var server = http.createServer(this)
  return server.listen.apply(server, arguments)
} 
```

# json - 为 Bubble Cloud d3.js 使用动态 JSON 页面

> ID：13322878
> 
> 赞同：1
> 
> 时间：2012-11-10T14:26:11.427
> 
> 标签：json, csv, d3.js

我正在使用 Github 中的这些示例代码创建气泡云。[https://github.com/vlandham/bubble_cloud](https://github.com/vlandham/bubble_cloud)

这些代码在数据文件夹中使用 .csv。但我想创建一个显示动态数据的页面。现在我有了动态 JSON 页面的链接。

如何使用 JSON 页面实现使气泡云动态化的代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T19:12:44.193

你只是在寻找像 d3.json 函数这样的东西吗？d3 内置了一堆请求函数。[在这里](https://github.com/mbostock/d3/wiki/Requests)检查

# php - 使用 PHP 创建菜单？

> ID：13322891
> 
> 赞同：0
> 
> 时间：2012-11-10T14:27:55.340
> 
> 标签：php

我有一个没有数据库的简单站点。每个页面都在站点的根目录中，并且页面值设置如下：

```
<?php    
$page_title = "My Page Title";
$description = "Page Description";
$current_page = "home";
//Load header  
include_once('includes/header.php');
?> 
```

如何使用 PHP 生成指向每个页面的链接列表（用于导航菜单），使用其中一个值作为锚文本并将活动类添加到当前页面？

由于页面与其他文件位于根目录中，因此需要有一种方法来指定哪些页面出现在菜单中，哪些页面不出现并排除其他文件，例如 robots.txt .htaccess

非常感谢任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T14:38:49.243

最好将导航存储在带有 url 和菜单标志的数据库中，以确定它是否应该在菜单中。

然后，您可以按照您喜欢的任何顺序从数据库中获取菜单项，然后您还可以使用`$_SERVER['PHP_SELF']`全局变量自动确定当前页面。例如。

```
<?php 
    $query = "SELECT * FROM menu WHERE inMenu = 1;";
    $result = mysql_query($query);
    echo "<ul>";
    while($row = mysql_fetch_assoc($result)) {
        $class = "";
        if ($_SERVER['PHP_SELF'] == "/" . $row['pageName']) {
             $class = "currentPage";
        }

        echo "<li {$class}>";
        echo "<a href='{$row['pageUrl']}'>{$row['pageName']}</a>";
        echo "</li>";
    }
    echo "</ul>";
?> 
```

或者有什么影响。我希望这有帮助。

# arduino - 没有实际转发到该页面的 href

> ID：13322892
> 
> 赞同：0
> 
> 时间：2012-11-10T14:28:02.243
> 
> 标签：arduino, href, forward

我目前正在做一个 Arduino 项目。在这一点上，我得到了一个网页，它会告诉 Arduino 开灯或关灯。为了打开或关闭灯，我必须输入一个链接。到目前为止，我只是简单地这样做了：

```
<a href="http://babla.com/turnlighton=1">Button tekst over here</a> 
```

现场查看： http: [//geertvandelangenberg.nl/innolab/](http://geertvandelangenberg.nl/innolab/)

现在我的问题是，一旦我点击这些超链接之一，我将被转发到一个页面，该页面将显示请求是否已成功完成。

有没有办法制作一个只发送[URL](http://en.wikipedia.org/wiki/Uniform_Resource_Locator)的超链接，而无需实际将自己转发到该 URL？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T14:36:58.103

只需使用异步[JavaScript](http://en.wikipedia.org/wiki/JavaScript)请求 ( [AKA](http://en.wiktionary.org/wiki/AKA) [Ajax](http://www.w3schools.com/ajax/default.asp) )。

例如，您可以使用[jQuery](http://en.wikipedia.org/wiki/JQuery)，`.ajax`方法是： http: [//api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T14:40:09.613

您可以将链接定位到隐藏框架，将框架添加到您的页面：

```
<iframe name='loader' style='display:none;'/> 
```

并使用“目标”属性将您的链接指向它：

```
<a href="http://babla.com/turnlighton=1" target='loader'>Button tekst over here</a> 
```

如果您关心`turnlighton`操作的结果，请选择[Ajax](http://en.wikipedia.org/wiki/Ajax_%28programming%29)解决方案。

# php - 使用 cURL 和 phpQuery 错误

> ID：13322897
> 
> 赞同：0
> 
> 时间：2012-11-10T14:28:31.720
> 
> 标签：php, phpquery

这是我的代码：

```
 <?php 

require('phpQuery.php');

function download($url)
{
    $curl = curl_init();
    curl_setopt_array($curl, array
    (
        CURLOPT_URL => $url,
        CURLOPT_USERAGENT => 'Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/22.0.1207.1 Safari/537.1',
        CURLOPT_RETURNTRANSFER => true,
        CURLOPT_CONNECTTIMEOUT => 120,
        CURLOPT_FOLLOWLOCATION => true,
        CURLOPT_HEADER => false
    ));

    $data = curl_exec($curl);
    curl_close($curl);

    return $data;
}

$pagina1 = phpQuery::newDocument(download('http://google.com'));

$logosrc = pq('img#hplogo').attr('src');
echo $logosrc;

?> 
```

错误：

> 致命错误：在第 26 行调用 C:\xampp\htdocs\projects\new\extract.php 中未定义的函数 attr()

谁知道问题出在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T14:32:13.920

改变

```
$logosrc = pq('img#hplogo').attr('src'); 
```

成为

```
$logosrc = pq('img#hplogo')->attr('src'); 
```

我想，但我没有测试过。

[在这里查看更多信息](http://code.google.com/p/phpquery/wiki/Attributes)

# forms - Symfony2 - 能够将多个实体的数据添加到数据库但没有添加外键

> ID：13322898
> 
> 赞同：0
> 
> 时间：2012-11-10T14:28:35.323
> 
> 标签：forms, symfony, doctrine-orm, foreign-keys, persistence

我有 2 个用外键连接的表（user_id 在表中）。我可以通过执行 1 个表单将数据添加到两个表中。但在执行时，我希望外键会在人员表中自动生成。

这是我的实体

### 用户

```
namespace Geo\CityTroopersBundle\Entity;

use Doctrine\ORM\Mapping as ORM;

/**
 * Geo\CityTroopersBundle\Entity\Users
 *
 * @ORM\Table(name="users")
 * @ORM\Entity
 */
class Users
{

    //Vanaf hier bijgevoegd
    protected $adress;
    protected $person;
    //Einde zelf toegevoegde properties

    /**
     * @var integer $userId
     *
     * @ORM\Column(name="user_id", type="integer", nullable=false)
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="IDENTITY")
     */
    private $userId;

    /**
     * @var string $user 
     *
     * @ORM\Column(name="user_password", type="string", length=128, nullable=true)
     */
    private $userPassword;

    /**
     * @var string $userEmail
     *
     * @ORM\Column(name="user_email", type="string", length=128, nullable=true)
     */
    private $userEmail;

    /**
     * @var string $userImage
     *
     * @ORM\Column(name="user_image", type="string", length=128, nullable=true)
     */
    private $userImage;

    /**
     * @var string $userQuestion
     *
     * @ORM\Column(name="user_question", type="string", length=128, nullable=true)
     */
    private $userQuestion;

    /**
     * @var string $userAnswer
     *
     * @ORM\Column(name="user_answer", type="string", length=128, nullable=true)
     */
    private $userAnswer;

    /**
     * @var \DateTime $userCreateddate
     *
     * @ORM\Column(name="user_createddate", type="datetime", nullable=true)
     */

    /**
     * Get userId
     *
     * @return integer 
     */
    public function getUserId()
    {
        return $this->userId;
    }

    /**
     * Set userPassword
     *
     * @param string $userPassword
     * @return Users
     */
    public function setUserPassword($userPassword)
    {
        $this->userPassword = $userPassword;

        return $this;
    }

    /**
     * Get userPassword
     *
     * @return string 
     */
    public function getUserPassword()
    {
        return $this->userPassword;
    }

    /**
     * Set userEmail
     *
     * @param string $userEmail
     * @return Users
     */
    public function setUserEmail($userEmail)
    {
        $this->userEmail = $userEmail;

        return $this;
    }

    /**
     * Get userEmail
     *
     * @return string 
     */
    public function getUserEmail()
    {
        return $this->userEmail;
    }

    /**
     * Set userImage
     *
     * @param string $userImage
     * @return Users
     */
    public function setUserImage($userImage)
    {
        $this->userImage = $userImage;

        return $this;
    }

    /**
     * Get userImage
     *
     * @return string 
     */
    public function getUserImage()
    {
        return $this->userImage;
    }

    /**
     * Set userQuestion
     *
     * @param string $userQuestion
     * @return Users
     */
    public function setUserQuestion($userQuestion)
    {
        $this->userQuestion = $userQuestion;

        return $this;
    }

    /**
     * Get userQuestion
     *
     * @return string 
     */
    public function getUserQuestion()
    {
        return $this->userQuestion;
    }

    /**
     * Set userAnswer
     *
     * @param string $userAnswer
     * @return Users
     */
    public function setUserAnswer($userAnswer)
    {
        $this->userAnswer = $userAnswer;

        return $this;
    }

    /**
     * Get userAnswer
     *
     * @return string 
     */
    public function getUserAnswer()
    {
        return $this->userAnswer;
    }

    //Zelf toegevoegde getters & setters

     public function getPerson()
    {
        return $this->person;
    }

    public function setPerson(Persons $person = null)
    {
        $this->person = $person;
    }   

    public function getAdress()
    {
        return $this->adress;
    }

    public function setAdress(Adresses $adress = null)
    {
        $this->adress = $adress;
    }  
} 
```

### 人员

```
namespace Geo\CityTroopersBundle\Entity;

use Doctrine\ORM\Mapping as ORM;

/**
 * Geo\CityTroopersBundle\Entity\Persons
 *
 * @ORM\Table(name="persons")
 * @ORM\Entity
 */
class Persons
{
    /**
     * @var integer $personId
     *
     * @ORM\Column(name="person_id", type="integer", nullable=false)
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="IDENTITY")
     */
    private $personId;

    /**
     * @var integer $adressId
     *
     * @ORM\Column(name="adress_id", type="integer", nullable=false)
     */
    private $adressId;

    /**
     * @var string $personFamilyname
     *
     * @ORM\Column(name="person_familyname", type="string", length=64, nullable=false)
     */
    private $personFamilyname;

    /**
     * @var string $personFirstname
     *
     * @ORM\Column(name="person_firstname", type="string", length=64, nullable=false)
     */
    private $personFirstname;

    /**
     * @var boolean $personGender
     *
     * @ORM\Column(name="person_gender", type="boolean", nullable=false)
     */
    private $personGender;

    /**
     * @var string $personNationality
     *
     * @ORM\Column(name="person_nationality", type="string", length=45, nullable=false)
     */
    private $personNationality;

    /**
     * @var Users
     *
     * @ORM\ManyToOne(targetEntity="Users")
     * @ORM\JoinColumns({
     *   @ORM\JoinColumn(name="user_id", referencedColumnName="user_id")
     * })
     */
    private $user;

    /**
     * Get personId
     *
     * @return integer 
     */
    public function getPersonId()
    {
        return $this->personId;
    }

    /**
     * Set adressId
     *
     * @param integer $adressId
     * @return Persons
     */
    public function setAdressId($adressId)
    {
        $this->adressId = $adressId;

        return $this;
    }

    /**
     * Get adressId
     *
     * @return integer 
     */
    public function getAdressId()
    {
        return $this->adressId;
    }

    /**
     * Set personFamilyname
     *
     * @param string $personFamilyname
     * @return Persons
     */
    public function setPersonFamilyname($personFamilyname)
    {
        $this->personFamilyname = $personFamilyname;

        return $this;
    }

    /**
     * Get personFamilyname
     *
     * @return string 
     */
    public function getPersonFamilyname()
    {
        return $this->personFamilyname;
    }

    /**
     * Set personFirstname
     *
     * @param string $personFirstname
     * @return Persons
     */
    public function setPersonFirstname($personFirstname)
    {
        $this->personFirstname = $personFirstname;

        return $this;
    }

    /**
     * Get personFirstname
     *
     * @return string 
     */
    public function getPersonFirstname()
    {
        return $this->personFirstname;
    }

    /**
     * Set personGender
     *
     * @param boolean $personGender
     * @return Persons
     */
    public function setPersonGender($personGender)
    {
        $this->personGender = $personGender;

        return $this;
    }

    /**
     * Get personGender
     *
     * @return boolean 
     */
    public function getPersonGender()
    {
        return $this->personGender;
    }

    /**
     * Set personNationality
     *
     * @param string $personNationality
     * @return Persons
     */
    public function setPersonNationality($personNationality)
    {
        $this->personNationality = $personNationality;

        return $this;
    }

    /**
     * Get personNationality
     *
     * @return string 
     */
    public function getPersonNationality()
    {
        return $this->personNationality;
    }

    /**
     * Set user
     *
     * @param Geo\CityTroopersBundle\Entity\Users $user
     * @return Persons
     */
    public function setUser(\Geo\CityTroopersBundle\Entity\Users $user = null)
    {
        $this->user = $user;

        return $this;
    }

    /**
     * Get user
     *
     * @return Geo\CityTroopersBundle\Entity\Users 
     */
    public function getUser()
    {
        return $this->user;
    }
} 
```

### 控制器

```
class UserController extends Controller
{
    public function registerAction(Request $request)
    {
    $user = new Users();
    $person = new Persons();
    //$adress = new Adresses();

    $form = $this->createForm(new UserType(), $user);

    if ($request->getMethod() == 'POST'){
            $form->bindRequest($request);

            if($form->isValid()){
                $person = $form->getData();
                //$adress = $form->getData();

                $em = $this->getDoctrine()->getEntityManager();
                $em->persist($user);
                $em->persist($user->getPerson());
                //$em->persist($user->getAdress());

                $em->flush();
                return $this->redirect($this->generateUrl('indexpage'));
            }
        }

        return $this->render('GeoCityTroopersBundle:User:register.html.twig', array(
            'form' => $form->createView(),
            ));
    }
} 
```

### 用户类型

```
class UserType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {   
        $builder->add('person', new PersonType());
        $builder->add('userEmail');
        $builder->add('userPassword', 'password');
        $builder->add('userImage');
        $builder->add('userQuestion');
        $builder->add('userAnswer');
        //$builder->add('adress', new AdressType());
    }

    public function getName()
    {
        return 'user';
    }
} 
```

### 人型

```
class PersonType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder->add('personFamilyname');
        $builder->add('personFirstname');
        $builder->add('personNationality');
        $builder->add('personGender');
        //$builder->add('adressId');
    }

    public function getDefaultOptions(array $options)
    {
        return array(
            'data_class' => 'Geo\CityTroopersBundle\Entity\Persons',
        );
    }

    public function getName()
    {
        return 'person';
    }
} 
```

我试图在用户的注释中添加以下内容：

```
/**
* Bidirectional (INVERSE SIDE)
* @ORM\OneToOne(targetEntity="Persons",cascade={"persist"})
*
*/ 
```

但这也没有奏效。我感觉我的数据库设置有问题，人和用户之间的关系是一对一的。

更新：删除不必要的

提前致谢

# jasper-reports - 如何将 JasperReport 子报告嵌入到 jar 中

> ID：13322899
> 
> 赞同：5
> 
> 时间：2012-11-10T14:28:40.160
> 
> 标签：jasper-reports, embed

我有一个嵌入 jar 的碧玉（主）报告。该报告来自 java 输入流。jasper 报告由 iReport 3.7.0 制作

在这个主报告中，有一些子报告。目前我必须使用

子报表表达式：$P{SUBREPORT_DIR} + "\\SubReport.jasper"

表达式类：java.lang.String

在 iReport 中使其工作。这意味着我将 subReport.jasper 存储在 SUBREPORT_DIR 文件夹中。

我的问题是，如何像主报告一样将这些子报告嵌入到 jar 中？什么应该填写“默认值表达式”？（如果需要）

到目前为止我看到的最接近的问题和答案在这里

[如何使用 Jasper 加载子报表资源？](https://stackoverflow.com/questions/4825726/how-to-load-subreport-resources-with-jasper)

然而，答案对我来说不足以编译主报告。编译时有一条错误消息说缺少子报告（这就是为什么我认为可能需要默认值表达式？）

非常感谢你！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T10:42:59.950

例如：我有报告和子报告，位于一些 *.jar 文件中。调用子报表我设置子报表表达式

```
getClass().getResource("/path/to/my/report/in/a/jar/subreport.jasper").openStream() 
```

并选择子报表表达式类`java.io.InputStream`

这是工作！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T07:21:28.713

我在另一个问题的[答案中描述了一种可能的解决方案。](https://stackoverflow.com/questions/10598958/jasper-sub-report-error/10600015#10600015)问题并不相同，但解决方案也解决了这个问题。

该解决方案使用弹簧，但用弹簧替换特定部件（FileSystemResourceLoader） `Class.getResourceAsStream()`应该不是太大的问题。

# php - 缩小大型处理作业

> ID：13322901
> 
> 赞同：4
> 
> 时间：2012-11-10T14:28:56.920
> 
> 标签：php, zend-framework, recursion, iteration

这是我在寻找解决方案时使用的代码。

```
 public function indexAction()
    {
        //id3 options
        $options = array("version" => 3.0, "encoding" => Zend_Media_Id3_Encoding::ISO88591, "compat" => true);
        //path to collection
        $path = APPLICATION_PATH . '/../public/Media/Music/';//Currently Approx 2000 files
        //inner iterator
        $dir = new RecursiveDirectoryIterator($path, RecursiveDirectoryIterator::SKIP_DOTS);
        //iterator
        $iterator = new RecursiveIteratorIterator($dir, RecursiveIteratorIterator::SELF_FIRST);
        foreach ($iterator as $file) {
            if (!$file->isDir() && $file->getExtension() === 'mp3') {
                //real path to mp3 file
                $filePath = $file->getRealPath();
                Zend_Debug::dump($filePath);//current results: accepted path no errors
                $id3 = new Zend_Media_Id3v2($filePath, $options);
                foreach ($id3->getFramesByIdentifier("T*") as $frame) {
                    $data[$frame->identifier] = $frame->text;
                }
                Zend_Debug::dump($data);//currently can scan the whole collection without timing out, but APIC data not being processed.
            }
        }
    } 
```

***问题：***处理多个目录中的 mp3 文件的文件系统。将 id3 标签数据提取到数据库（3 个表），并将封面图像从标签中提取到单独的文件中。

我可以处理实际的提取和数据处理。我的问题是输出。

使用 Zend Framework 1.x 处理输出缓冲的方式，输出文件正在处理的指示器是很困难的。在旧式 PHP 脚本中，没有输出缓冲，您可以在循环的每次迭代中打印出一些 html，并获得一些进度指示。

我希望能够处理每张专辑的目录，输出结果，然后继续到下一张专辑的目录。只需要用户干预某些错误。

任何帮助，将不胜感激。

Javascript 不是我正在寻找的解决方案。我觉得这在 PHP 和 ZF 1 MVC 的构造中应该是可能的。

*我这样做主要是为了自己的启蒙，这似乎是学习一些重要概念的好方法。*

**[编辑]**
好的，关于如何将其分解成更小的块的一些想法怎么样。处理一个块，提交，处理下一个块，诸如此类。进出采埃孚。

**[编辑]**
我开始看到我正在努力完成的问题。似乎输出缓冲不仅仅发生在 ZF 中，它无处不在，从 ZF 一直到浏览器。嗯……

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-15T08:06:26.163

## 介绍

**这是你不应该做**的典型例子，因为

*   您正在尝试`ID3 tag`使用速度很慢的 PHP 进行解析，并且尝试一次拥有多个解析文件肯定会使它变得更慢

*   `RecursiveDirectoryIterator`会从我看到的没有限制的情况下加载文件夹和子文件夹中的所有文件..`2,000`今天可以是`100,000`第二天吗？总处理时间是不可预测的，在某些情况下这肯定需要几个小时

*   对单个文件系统的高度依赖，在您当前的架构下，文件存储在本地系统中，因此很难拆分文件并进行适当的负载平衡

*   您没有检查文件信息是否已经被提取过并且这个结果`Loop and extraction Duplication`

*   `No locking system`.. 这意味着这个过程可以同时启动，导致服务器性能普遍下降

## 解决方案 1：使用当前架构

我的建议是不要批量使用`loop`或 `RecursiveDirectoryIterator`处理文件。

**将文件上传**或**传输**到服务器后立即定位文件。这样，您**一次只能处理一个文件，**这样可以分散处理时间。

## 解决方案 2：作业队列（建议的解决方案）

您的问题正是**Job Queue 的设计目的，**您也不限于使用 `PHP`.. 实现解析，您可以利用 `C`或`C++`提高性能

**优势**

*   将作业转移到更适合完成工作的其他机器或流程
*   它允许您并行工作，以进行负载平衡处理
*   通过异步运行耗时的任务来减少大容量 Web 应用程序中页面查看的延迟
*   `PHP`服务器中的多语言客户端`C`

**示例已测试**

*   [ZemoMQ](http://www.zeromq.org)
*   [齿轮人](http://gearman.org/)
*   [豆茎](http://kr.github.com/beanstalkd/)

**预期流程客户**

*   连接到作业队列，例如德语
*   连接到数据库，例如 MongoDB 或 Redis
*   使用文件夹路径循环
*   检查文件扩展名
*   如果文件是 mp3 ，则生成文件哈希，例如。sha1_file
*   检查文件是否已发送进行处理
*   发送哈希，文件到作业服务器

**预期的进程服务器**

*   连接到作业队列，例如德语
*   连接到数据库，例如 MongoDB 或 Redis
*   接收哈希/文件
*   提取 ID3 标签；
*   使用 ID3 标签信息更新数据库

最后，这个处理可以在多台服务器上并行完成

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T16:03:06.517

一种解决方案是使用作业队列，例如 Gearman。Gearman 是此类问题的出色解决方案，并且可以轻松与 Zend Framework 集成 (http://blog.digitalstruct.com/2010/10/17/integrating-gearman-into-zend-framework/)

它将允许您创建一个工作人员来处理每个“卡盘”，允许您的进程在处理作业时继续畅通无阻，对于长时间运行的进程非常方便，例如音乐/图像处理等[http://gearman.org/index。 php?id=getting_started](http://gearman.org/index.php?id=getting_started)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T05:54:47.607

我不熟悉 Zend Framework 的工作原理。我会给你一个一般性的建议。在处理执行如此多迭代且可能需要很长时间的进程时，通常建议将长进程移至后台进程。或者，在与网络相关的方面，进入 cron 工作。

如果您要使用的过程是针对单个站点的，您可以在您的 cronjob 中实现类似的东西（注意：粗略的伪代码）：

```
<?php

$targetdir = "/path/to/mp3";
$logdir = "/path/to/log/";

//check if current state is exists. If it does, then previous cronjob is still running
//we should stop this process so that it doesn't do duplicated process which might have introduced random bugs
if(file_exists($logdir."current-state")){
    exit;
}

//start process, write state to logdir
file_put_contents($logdir."current-log", "process started at ".date("Y-m-d H:i:s"));
file_put_contents($logdir."current-state", "started\t".date("Y-m-d H:i:s"));
$dirh = opendir($targetdir);
while($file = readdir($dirh)){
    //lets ignore current and parent dir
    if(in_array($file, array('.', '..'))) continue;

    //do whatever process you want to do here:

    //you might want to write another log, too:
    file_put_contents($logdir."current-log", "processing file {$file}", FILE_APPEND);

}
closedir($dirh);
file_put_contents($logdir."current-log", "process finished at ".date("Y-m-d H:i:s"));

//process is finished, delete current-state:
unlink($logdir."current-state"); 
```

接下来，在 web 的 php 文件中，您可以将代码片段添加到管理页面、页脚或任何您想要的页面，以查看进度：

```
<?php

if(file_exists($logdir."current-state")){
    echo "<strong>there are background process running.</strong>";
} else {
    echo "<strong>no background process running.</strong>";
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-13T19:51:25.783

我应该建议使用插件。

```
class Postpone extends Zend_Controller_Plugin_Abstract
{

    private $tail;

    private $callback;

    function __construct ($callback = array())
    {
        $this->callback = $callback;
    }

    public function setRequest (Zend_Controller_Request_Abstract $request)
    {
        /*
         * We use layout, which essentially contains some html and a placeholder for action output.
         * We put the marker into this placeholder in order to figure out "the tail" -- the part of layout that goes after placeholder.
         */
        $mark = '---cut-here--';
        $layout = $this->getLayout ();

        $layout->content = $mark;

        /*
         * Now we have it.
         */
        $this->tail = preg_replace ("/.*$mark/s", '', $layout->render ());
    }

    public function postDispatch (Zend_Controller_Request_Abstract $request)
    {
        $response = $this->getResponse ();

        $response->sendHeaders ();

        /*
         * The layout generates its output to the default section of the response.
         * This output inludes "the tail".
         * We don't need this tail shown right now, because we have callback to do.
         * So we remove it here for a while, but we'll show it later.
         */
        echo substr ($this->getResponse ()
            ->getBody ('default'), 0, - strlen ($this->tail));

        /*
         * Since we have just echoed the result, we don't need it in the response. Do we?
         */
            Zend_Controller_Front::getInstance ()->returnResponse(true);
        $response->clearBody ();

        /*
         * Now to business.
         * We execute that calculation intensive callback.
         */
        if (! empty ($this->callback) && is_callable ($this->callback))
        {
            call_user_func ($this->callback);
        }

        /*
         * We sure don't want to leave behind the tail.
         * Output it so html looks consistent.
         */
        echo $this->tail;
    }

    /**
     * Returns layout object
     */
    function getLayout ()
    {
        $layout_plugin = Zend_Controller_Front::getInstance ()->getPlugin ('Zend_Layout_Controller_Plugin_Layout');
        return $layout = $layout_plugin->getLayout ();
    }
}

class IndexController extends Zend_Controller_Action
{

    /*
     * This is a calculation intensive action
     */
    public function indexAction ()
    {
        /*
         * Zend_Layout in its current implementation accumulates whole action output inside itself.
         * This fact hampers out intention to gradually output the result.
         * What we do here is we defer execution of our intensive calculation in form of callback into the Postpone plugin.
         * The scenario is:
         * 1\. Application started
         * 2\. Layout is started
         * 3\. Action gets executed (except callback) and its output is collected by layout.
         * 4\. Layout output goes to response.
         * 5\. Postpone::postDispatch outputs first part of the response (without the tail).
         * 6\. Postpone::postDispatch calls the callback. Its output goes stright to browser.
         * 7\. Postpone::postDispatch prints the tail.
         */
        $this->getFrontController ()
            ->registerPlugin (new Postpone (function  ()
        {
            /*
             * A calculation immigration
             * Put your actual calculations here.
             */
        echo str_repeat(" ", 5000);
        foreach (range (1, 500) as $x)
        {
            echo "<p>$x</p><br />\n";
            usleep(61500);
            flush();
        }
        }), 1000);
    }
} 
```

# ruby-on-rails - Rails - 成功调用 ActiveRecord.save 后，id 仍然 = 0

> ID：13322902
> 
> 赞同：0
> 
> 时间：2012-11-10T14:29:02.400
> 
> 标签：ruby-on-rails, activerecord, save

我有一个 ActiveRecord 实体。当我调用`entity.save`它时，returns和`true`returns`entity.new_record?`是0。在entities 表中，新行仍以正确的递增id 插入。这很奇怪。`false``entity.id`

我的rails版本是3.2.8，数据库是Mysql，使用gem mysql2（0.3.11）。我已经为此苦苦挣扎了一整天...

添加的代码：json 是来自前端的字符串。

```
 o = JSON.parse(CGI.unescape(json))
        if o.has_key?('cls') then
            @r = o['cls']
            cls = o['cls']
            #create
            if o['action'] == 0 then
                entity = Object.const_get(cls).new
                o.each_pair do |k,v|
                    # entity.respond_to?  check method exist
                    if defined? entity[k] then
                        entity[k] = v
                    end
                end

                r = entity.save! 
```

和模型（由 rails g 模型生成）：

```
class Node < ActiveRecord::Base
  attr_accessible :iNodeId, :level, :name, :pNodeId, :stationId, :type
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T15:27:34.183

通过改变工作

```
if defined? entity[k] then 
```

对此

```
if defined? entity[k] and k != 'id' then 
```

# php - 如何修复该ajax安全性？

> ID：13322903
> 
> 赞同：0
> 
> 时间：2012-11-10T14:29:05.570
> 
> 标签：php, javascript, ajax, security

有没有办法通过 ajax 注入代码或伪造信息？

喜欢将 Ajax 从我的网站发送到另一个使用 ajax 的网站？

如果是这样，我怎样才能防止我只能从我的网站发送 ajax？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T14:44:24.150

您可能正在寻找 CSRF（跨站点请求伪造）保护。问题是您的站点不知道 AJAX 请求来自何处。普遍接受的解决方案是创建一个从您的站点发送的令牌，该令牌需要与 AJAX 请求一起发送。

此令牌对于用户会话是唯一的，并在您页面的 HTML 中的某处输出。这使得其他站点难以捕获此令牌。

为了给你基本的想法，你会做这样的事情：

```
$_SESSION['csrf_token'] = md5(uniqid(rand(), TRUE)); 
```

然后，例如，您可以将其输出为 JavaScript 变量

```
<script>
window.CSRF_TOKEN = '<?php echo $_SESSION['csrf_token']; ?>';
</script> 
```

如果您碰巧使用的是 jQuery，则可以使用`ajaxSend()`将令牌添加到每个请求

```
$.ajaxSend(e, jqXHR, settings) {
  if (!settings.data) settings.data = {};
  settings.data['csrf_token'] = window.CSRF_TOKEN;
} 
```

最后，在后端，您将检查`$_REQUEST['csrf_token'] ==`$_SESSION['csrf_token']` 以验证请求。如果可能的话，一次性使用这些令牌通常是一个好主意。存储生成令牌的时间并确保在合理的时间范围内使用它也是一个好主意。

# jquery - 在页面加载时添加页面标题作为正文类

> ID：13322904
> 
> 赞同：1
> 
> 时间：2012-11-10T14:29:23.607
> 
> 标签：jquery

我对 jQuery 和 javascript 还很陌生。我在尝试着

1.  加载页面时获取页面标题和
2.  将该页面标题分配给正文标记。

我正在尝试为每个页面加载不同的背景图像和颜色。我已经成功地使用 css 作为页面背景，但背景在我的页脚底部停止。body 标签控制着页脚下方的背景，由于每个页面都有不同的背景，我需要 body 来获取加载页面的背景颜色。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T14:33:28.380

Raw JS:

```
document.body.setAttribute('title', document.title); 
```

In jQuery:

```
$(document.body).attr('title', $('head title').html()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T14:33:58.113

Regarding your first two points, you can do:

```
title = $('title').html();
$('<h1>'+title+'</h1>').appendTo('body'); 
```

this will get the page title to a variable to later insert it in a `<h1>` element at the top of the page body.

# java - 三叉树实现中出现空指针异常

> ID：13322905
> 
> 赞同：2
> 
> 时间：2012-11-10T14:29:29.113
> 
> 标签：java

我正在尝试在 java 中实现三叉树。但我的代码中出现空指针异常

```
Exception in thread "main" java.lang.NullPointerException
at TreeStructure.printNode(TreeStructure.java:67)
at TreeStructure.printNode(TreeStructure.java:64)
at TreeStructure.runTree(TreeStructure.java:95)
at TreeStructure.main(TreeStructure.java:109) 
```

我的主要树代码是

```
public class TreeStructure 
{

  public Node root;

    /**
     * @param args
     */
    public void insert(Node node, String value)
    {
        if(value.compareTo(node.value)<0)
        {
            if (node.left!=null)
            {
                insert(node.left,value);
            }
            else
            {
                System.out.println("Inserted"+value+"to left of"+ node.value);
                node.left=new Node(value);
                node.left.parent=node;
            }

        }
        else if(value.compareTo(node.value)>0)
        {
            if(node.right!=null)
            {
                insert(node.left,value);
            }
            else
            {
                System.out.println("Inserted"+value+"to right of "+node.value);
                node.right=new Node(value);
                node.right.parent=node;
            }
        }
        else if(value==node.value)
        {
            if(node.middle==null)
            {
                insert(node.middle,value);
            }
            else
            {
                System.out.println("Inserted"+value+"to middle of"+node.value);
                node.middle=new Node(value);
                node.middle.parent=node;
            }

        }

    }

    public void printNode(Node node)
    {
        if(node!=null)
        {
            printNode(node.left);
            System.out.println("Tree traversal"+node.value);
        }
        if(node.parent!=null)
        {
            System.out.println("parent is"+node.parent.value);
        }
        else
        {
            System.out.println("");
            printNode(node.middle);
            printNode(node.right);
        }
        ///need to add some code here
    }
    public void TestInsert(Node start)
    {
        System.out.println("Testcase Insert");
        insert (root,"Astana");
        insert(root,"Asgrad");
        insert(root,"Lychs");
        insert (root,"Brac");
        insert(root,"London");
        insert(root,"Arad");
        insert(root,"Kathmundu");
        printNode(start);
    }
    public void runTree()
    {
         root=new Node("Asgrad");
         System.out.println("Tree build with"+ root.value);
         printNode(root);
         TestInsert(root);

    }

    public static void main(String[] args) 
    {

        // TODO Auto-generated method stub
        TreeStructure  tree=new TreeStructure();
        tree.runTree();

    }

} 
```

我的节点类是

```
 public class Node 
{
    Node parent;
    Node left;
    Node right;
    Node middle;
    String value;
    public  Node(String value)
    {
        this.parent=null;
        this.left=null;
        this.right=null;
        this.middle=null;
        this.value=value;

    }

} 
```

我正在尝试解决这个问题，但我无法找出错误。如果有人帮我找到问题，那就太好了......提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T14:32:53.617

You have a few problems, but just focusing on your current exception . . . you need to change this:

```
if(node.parent!=null) 
```

to this:

```
if(node != null && node.parent != null) 
```

and you need to learn how to read a stack-trace. :-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T14:33:39.003

Look here:

```
 if(node.parent !=null) // node might be null, exception might be thrown
    {
       [..]
    }
    else // node might be null
    {
        System.out.println("");
        // here node might be null and the exception can be thrown
        printNode(node.middle);
        printNode(node.right);
    } 
```

# session - 强制 Vim 的 mksession 使用相对路径？

> ID：13322908
> 
> 赞同：6
> 
> 时间：2012-11-10T14:29:56.263
> 
> 标签：session, vim, relative-path, absolute-path

我正在尝试使用打开文件的相对路径将我的会话保存在 Vim 中。使用`cur_dir`in `sessionoptions`，文件的路径将是相对的 wrt。当前目录，但会话文件包含`cd /path/to/base/directory`命令：

```
...
cd /path/to/base
badd +0 relpath1/file
badd +0 relpath2/file
... 
```

如果我忽略`curdir`sessionoptions，`cd`命令会消失，但文件路径将是绝对的：

```
badd +0 /path/to/base/relpath1/file
badd +0 /path/to/base/relpath2/file 
```

有没有办法*只有*相对路径wrt。到创建会话时的当前目录 - 没有插件或编写脚本？这样会话文件将只有：

```
badd +0 relpath1/file
badd +0 relpath2/file 
```

我的最终目标是拥有一个可以复制的会话文件，例如从 SVN 结帐到另一个。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-10T15:17:53.260

如果不为其设置包装函数，AFAIK，您将无法做到这一点。

例如：

```
function! MakeSession()
  let b:sessiondir = getcwd()
  let b:filename = b:sessiondir . '/session.vim'
  exe "mksession! " . b:filename
  exe "edit! " . b:filename
  exe "g:^cd :d"
  exe "x" 
endfunction 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-25T20:57:38.593

我用额外的一行修改了 Botykai 的答案，以全局删除绝对路径。

```
function! MakeSession()
  let b:sessiondir = getcwd()
  let b:filename = b:sessiondir . '/_vimsession'
  exe "mksession! " . b:filename
  exe "edit! " . b:filename
  " Delete the line start with 'cd ...'
  exe "g:^cd :d"
  " Vim complains about b:sessiondir being undefined. So I use getcwd() directly
  " exe "%s:" . b:sessiondir . "::g". Use ':' to avoid path escape
  exe "%s:" . getcwd() . "/::g"
  " Save with 'x'
  exe "x"
endfunction 
```

如果有人可以改进上述功能以将行缩小到仅以 开头的行`badd`，那就更好了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-13T23:28:16.570

我遇到了同样的问题，我用下面受[Zsolt Botykai](https://stackoverflow.com/a/13323266/9249152)的解决方案和[John Chain](https://stackoverflow.com/a/54874549/9249152)的解决方案启发的函数来解决它。另外，我定义了一个宏来用更少的按键来执行这个功能。

```
function! MakeSession() 
    let cwd = getcwd()
    let filename = cwd . '/.vim'
    exe "mksession! " . filename
    exe "tabedit! " . filename
    exe "silent g:^cd :d"
    exe "silent g:^lcd :d"
    "exe "silent %s:\V" . cwd . "/::ge"
    " ^ Don’t work because getcwd() expand the ~ while mksession does not !
    exe "silent %s?\\v \\~=/.+/? ?g"
    " ^ backslash need to be protected
    exe "x"
endfunction

nnoremap <leader>mks :call MakeSession()<cr> 
```

主要区别是删除完整路径的正则表达式。它是必需的，因为它会`getcwd`扩展`~`主目录，但`mksession`不需要（在 Mac OS 上）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-09T23:37:06.973

使用`curdir`代替`sesdir`（参见）时，解决方案更简单，因为绝对路径在会话文件（ ）`:help sessionoptions`中只出现一次。`cd path`因此，`MakeSession`函数更小（我称为会话文件`.vim`）：

```
function! MakeSession()
    exe "mksession! .vim"
    exe "tabedit! .vim"
    exe "silent g:^cd :d"
    exe "x"
endfunction

nnoremap <leader>mks :call MakeSession()<cr> 
```

要选择会话文件的名称（执行：）`:call MakeNamedSession('foo')`：

```
function! MakeNamedSession(arg)
    let radical = a:arg
    exe "mksession! " . radical . ".vim"
    exe "tabedit! " . radical . ".vim"
    exe "silent g:^cd :d"
    exe "x"
endfunction 
```

# python - pix[x, y] 在 Python 中是什么意思

> ID：13322909
> 
> 赞同：8
> 
> 时间：2012-11-10T14:29:58.283
> 
> 标签：python, syntax, tuples

我在阅读[PIL 文档](http://www.pythonware.com/library/pil/handbook/image.htm)时发现了一个奇怪的说法。

> 在 1.1.6 及更高版本中，load 返回可用于读取和修改像素的像素访问对象。访问对象的行为类似于二维数组，因此您可以执行以下操作：
> 
> ```
> pix = im.load()
> print pix[x, y]
> pix[x, y] = value 
> ```

这里是什么`pix[x, y]`意思？它不是切片语法，因为`,`used 而不是`:`.

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-10T14:33:07.587

```
pix[x, y] 
```

是相同的

```
t = x, y
pix[t] 
```

或者

```
t = (x, y)
pix[t] 
```

或者

```
pix[(x, y)] 
```

您看到的是获取项目表达式中的元组文字，就像我可以嵌套其他表达式一样，例如`l[1 if skip else 0]`

# caching - Twemcache 超出最大内存设置

> ID：13322911
> 
> 赞同：1
> 
> 时间：2012-11-10T14:30:22.457
> 
> 标签：caching, memory, memory-leaks, memcached

我用“twemcache -d -m 20”启动了twemcache。它应该消耗不超过 20 MB。但是根据测试，它会不断消耗更多的内存，“set”然后“get”。

```
 import memcache
    mc = memcache.Client(['localhost:11211'])
    i = 0
    while True:
      i+=1
      key = value = str(i)
      mc.set(key, value)
      mc.get(key) 
```

我发现这个是因为我有一个带有 -m 4000 的服务并且超过了上限，最后被 os. 有谁知道我该如何避免？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T07:06:00.760

这是 twemcache 的一个错误，在 2.5.3 版本中修复。 [https://github.com/twitter/twemcache/issues/17](https://github.com/twitter/twemcache/issues/17)

# http - Header Accept in HTTP

> ID：13322912
> 
> 赞同：2
> 
> 时间：2012-11-10T14:30:25.460
> 
> 标签：http, network-programming, http-headers, protocols

I have a problem with "Accept" header in http. I've writen a http client, and when I set "Accept: image/png" I can still read any file (like txt, html, etc). I think it shouldn't be possible when header "Accept" is set like above.

I tried to check how my Firefox behaves. I wrote "about:config" and I set "network.http.accept.default" as "image/png", and I can surf the net as usually.

Am I misunderstanding meaning of this header? I think that I should only be able to open files *.png.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T06:15:56.780

接受不是强制性的；服务器可以（并且经常这样做）要么不实现它，要么决定返回其他东西。

> 如果请求中存在 [Accept] 标头字段，并且响应的所有可用表示都没有被列为可接受的媒体类型，则源服务器可以通过发送 406（不可接受）响应来尊重标头字段或通过将响应视为不受内容协商的方式来忽略标头字段。

[**来源 - RFC 7231 5.3.2。接受**](https://www.rfc-editor.org/rfc/rfc7231#section-5.3.2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-21T17:33:24.270

其实，前一种行为是正常的。让我给你举个例子。

如果给定的 URL 指向 PDF 文件并且 Accept 标头仅接受 docx，则服务器将盲目地忽略它并发送 PDF 文件，因为服务器未设置为在 PDF 和其他文档之间做出决定。

如果有多种格式可用，则服务器将考虑“Accept”标头并尝试相应地发送响应，如果没有，则它将忽略“Accept”标头。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T14:48:35.843

如您所想，设置 Accept 意味着您不能接受除这些指定之外的其他媒体，并且服务器应返回 406 响应代码。它实践，服务器没有正确实现，并且总是发送响应。

[RFC 2616](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html)中提供了所有详细信息

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-10T14:42:14.590

接受标头在浏览器中实现不佳，并且在爬虫也发出请求的公共站点上使用时会导致奇怪的错误。

这就是为什么大多数时候像[Rail 框架](https://github.com/rails/rails/commit/2f4aaed7b3feb3be787a316fab3144c06bb21a27)一样忽略接受标头。

# javascript - Using onkeypress to detect up arrow being pressed (HTML and Javascript)

> ID：13322917
> 
> 赞同：0
> 
> 时间：2012-11-10T14:31:05.553
> 
> 标签：javascript, html, javascript-events

I've been trying to program a pingpong game without Jquery (challenge from Software Design teacher), and am planning on using onkeypress to move the paddles. However, I'm not sure how to attach a specific key to the function specified in the event handler.

It's not terribly relevant, but here's my code:

HTML:

```
<div id="Paddle1" class="paddle" onkeypress="PaddleMovement1(event)"></div>
<div id="Paddle2" class="paddle" onkeypress="PaddleMovement3(event)"></div> 
```

Javascript:

```
var PaddleMovement1 = function(){
    document.getElementById('Paddle1Up').style.animationPlayState="running";
    setTimeout(Paddle1Stop1, 25)
    var Paddle1Stop1 = function(){
        document.getElementById('Paddle1Up').style.animationPlayState="paused";
    };
};

var PaddleMovement2 = function(){
    document.getElementById('Paddle1Down').style.animationPlayState="running";
    setTimeout(Paddle1Stop2, 25)
    var Paddle1Stop2 = function(){
        document.getElementById('Paddle1Down').style.animationPlayState="paused";
    };
};

var PaddleMovement3 = function(){
    document.getElementById('Paddle2Up').style.animationPlayState="running";
    setTimeout(Paddle2Stop1, 25)
    var Paddle2Stop1 = function(){
        document.getElementById('Paddle2Up').style.animationPlayState="paused";
    };
};

var PaddleMovement4 = function(){
    document.getElementById('Paddle2Down').style.animationPlayState="running";
    setTimeout(Paddle2Stop2, 25)
    var Paddle2Stop2 = function(){
        document.getElementById('Paddle2Down').style.animationPlayState="paused";
    };
}; 
```

Finally, the complete thing can be found in this jsfiddle:

[http://jsfiddle.net/2RfzF/2/](http://jsfiddle.net/2RfzF/2/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T14:33:08.663

`keypress` is only fired for keypresses that result in typeable *characters*, not other keys. To detect other keys, use `keydown` and `keyup`. This should be fairly clear from [the specification](http://www.w3.org/TR/DOM-Level-3-Events/#event-type-keypress):

> A user agent must dispatch this event when a key is pressed down, if and only if that key normally produces a character value.

[This page](http://unixpapa.com/js/key.html) is a handy guide to the madness that is keyboard events in JavaScript across browsers...

Separately, for your purposes I'd probably trap the events on `document` rather than on a specific element (`keydown` and `keyup` bubble, so that works).

For example:

```
(function() {
    if (document.addEventListener) {
        document.addEventListener("keydown", keyDownHandler, false);
        document.addEventListener("keydown", keyUpHandler, false);
    }
    else if (document.attachEvent) {
        document.attachEvent("onkeydown", function() {
            keyDownHandler(window.event);
        });
        document.attachEvent("onkeydown", function() {
            keyUpHandler(window.event);
        });
    }
    else {
        // If you want to support TRULY antiquated browsers
        document.onkeydown = function(event) {
            keyDownHandler(event || window.event);
        };
        document.onkeyup   = function(event) {
            keyUpHandler(event || window.event);
        };
    }

    function keyDownHandler(e) {
        var key = e.which || e.keyCode;
        display("keydown: " + key);
    }

    function keyDownHandler(e) {
        var key = e.which || e.keyCode;
        display("keyup: " + key);
    }

    function display(msg) {
        var p = document.createElement('p');
        p.innerHTML = String(msg);
        document.body.appendChild(p);
    }
})(); 
```

[Live Copy](http://jsbin.com/opupac/1) | [Source](http://jsbin.com/opupac/1/edit)

# java - 在 Windows 7 中运行 Jar 时出现“违反执行保护”

> ID：13322921
> 
> 赞同：4
> 
> 时间：2012-11-10T14:32:02.433
> 
> 标签：java, windows, libgdx

我正在尝试导出用 LibGDX、Java 和 Flixel-Android 编写的游戏。该游戏是在 Mac 上开发的，并以 Jar 形式在其他 Mac 系统上运行。在 Windows 7 机器上运行它时，它会在完全启动之前退出，我得到这个转储：

> Java 运行时环境检测到一个致命错误：
> 
> EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=0x04a2b400, pid=5824, tid=5912
> 
> JRE 版本：7.0_09-b05 Java VM：Java HotSpot(TM) 客户端 VM（23.5-b02 混合模式，共享 windows-x86） 有问题的框架：C 0x04a2b400
> 
> 无法写入核心转储。默认情况下，在 Windows 的客户端版本上不启用小型转储
> 
> 如果您想提交错误报告，请访问：
> [http](http://bugreport.sun.com/bugreport/crash.jsp) ://bugreport.sun.com/bugreport/crash.jsp 崩溃发生在 Java 虚拟机之外的本地代码中。请参阅有问题的框架以了解报告错误的位置。

控制台窗口还会在显示此内容之前不久打印“执行保护违规”，然后将上述内容也转储到文本文件中。文本文件包含一个很长很长的转储，除非人们认为有必要，否则我不会在这里发布。

我不知道是什么原因造成的，而且我没有太多时间来解决这个问题！有人有线索吗？

编辑 - 我已将其缩小到从 LibGDX 的商店加载文件的一段代码。这是本机库问题吗？

编辑 - 它在某种程度上与改变 Flixel-Android 中一段文本的大小有关。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T15:31:04.023

我会假设本机库在 Windows 和/或 Java 7 上无法正常工作（我知道，这很明显）。

请记住，Android 的 java 与 java 1.5 兼容，因此我可以看到该库在 java 7 上中断。我将验证该库网站上支持哪些 java 版本。

* * *

### 编辑

看起来 java 7 是罪魁祸首：[http](http://code.google.com/p/libgdx/issues/detail?id=824) ://code.google.com/p/libgdx/issues/detail?id=824 。我想我是专家谷歌用户......

# ruby - 使用 ruby 从模板写入文件

> ID：13322924
> 
> 赞同：2
> 
> 时间：2012-11-10T14:32:18.140
> 
> 标签：ruby

我正在制作一些 ruby​​ 脚本来编写 nginx 配置文件。

我有两个文件：一个是带有几个占位符的模板，第二个存储了一个包含所有我需要的信息的序列化哈希。

该信息由应用程序的通用名称、url、要使用的端口数和第一个端口组成。

我会做一个简短的例子来说明清楚。这是我的模板：

**模板文件：**

```
upstream thin {
    {upstream}
}
server {
    listen 80;
    server_name .{url};
    root /var/www/{name};
} 
```

这或多或少是信息如何使用 ruby​​ 代码存储在第二个文件中的方式：

**保存信息的 Ruby 脚本：**

```
apps = Hash.new { |h, k| h[k] = Hash.new }
apps["foo"] = {"url" => "foo.co.uk", "ports" => 3, "first" => 3000 }
apps["bar"] = {"url" => "bar.com", "ports" => 2, "first" => 3003 }

serialisedApps = Marshal.dump(apps)
File.open('/home/deploy/data/apps', 'w') {|f| f.write(serialisedApps) } 
```

现在我可以像这样加载这些信息：

```
apps = Marshal.load File.read('/home/deploy/data/apps') 
```

我可以遍历我的哈希并打印 foo（3000、3001 和 3002）和 bar（3003 和 3004）的端口。

```
apps.each {|key, value|
  pn = value["ports"]
  fp = value["first"]

  pn.times do |i|
    currPort = fp + i
    puts "#{key} in port #{currPort}"
  end
} 
```

现在，我需要获取该模板并复制 2 个文件（用于“foo”和“bar”），如下所示：

```
upstream thin {
    server 127.0.0.1:3000;
    server 127.0.0.1:3001;
    server 127.0.0.1:3002;
}
server {
    listen 80;
    server_name .foo.co.uk;
    root /var/www/foo;
} 
```

现在我只需要加载模板，替换占位符并将其保存在其他地方。我设法用 bash 脚本做到了这一点，但我想避免它并只使用 ruby​​。有没有一种简单的方法可以做到这一点？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T17:17:19.403

研究使用 ERB。[https://ruby-doc.org/stdlib/libdoc/erb/rdoc/ERB.html](https://ruby-doc.org/stdlib/libdoc/erb/rdoc/ERB.html)

它内置在 Ruby 的标准库中，并且完全符合您的要求。

# delphi - What is the CCHAR type equivalent in Delphi?

> ID：13322927
> 
> 赞同：3
> 
> 时间：2012-11-10T14:32:45.850
> 
> 标签：delphi

The **`ShortNameLength`** member of [FILE_BOTH_DIR_INFORMATION](http://msdn.microsoft.com/en-us/library/windows/hardware/ff540235%28v=vs.85%29.aspx) structure is declared as follows:

```
typedef struct FILE_BOTH_DIR_INFORMATION {
  ...
  CCHAR  ShortNameLength;
  ...
}; 
```

From [the explanation of `CCHAR` type](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383751%28v=vs.85%29.aspx#CCHAR), `CCHAR` is *a 8-bit Windows (ANSI) character*. So, it is equivalent to **`AnsiChar`** in Delphi, right? However, the description of [ShortNameLength](http://msdn.microsoft.com/en-us/library/windows/hardware/ff540235%28v=vs.85%29.aspx) member of `FILE_BOTH_DIR_INFORMATION` structure says,

> ***“`ShortNameLength` specifies the length, in bytes, of the short file name string.”***

The statement makes me think that the **`CCHAR`** equivalent is **`Byte`** in Delphi. Another example is the **`NumberOfProcessors`** member of `SYSTEM_BASIC_INFORMATION` which is declared in `winternl.h` as follows:

```
typedef struct _SYSTEM_BASIC_INFORMATION {
  BYTE Reserved1[24];
  PVOID Reserved2[4];
  CCHAR NumberOfProcessors;
} 
```

Once again, the `CCHAR` type seems to be used in a `Byte` context, rather than `AnsiChar` context.

Now, I confuse, whether to use `AnsiChar` or `Byte` as a `CCHAR` equivalent in Delphi.

### Note

`JwaWinType.pas` of [JEDI Windows API](http://sourceforge.net/projects/jedi-apilib/) declares `CCHAR` as `AnsiChar`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-10T14:39:26.620

它是一个字节，或者至少，它被用作一个 1 字节整数。在 C 中，字符可用于此目的。在 Delphi 中，如果不进行类型转换，您将无法做到这一点。所以你可以使用`Char`，但是你需要给它一个值`'A'`或`Chr(65)`指示一个 65 个字符的字符串。现在，那将是愚蠢的。:-)

为了能够将它传递给 API，它必须具有相同的大小。除此之外，被调用者甚至不知道它是如何声明的，因此将其声明为 Delphi 字节是最合乎逻辑的解决方案。您找到的另一个声明支持的选择。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-10T14:40:54.653

我相信 的解释`CCHAR`是错误的。`C`前缀表示这是字符**数**，因此这可能是 Microsoft 在编写说明时所做的简单复制粘贴错误。

它存储在一个字节中，用于计算一串字符的字节数。这些字符可能是宽字符，但该`CCHAR`值仍然计算用于存储字符的字节数。

这种类型的自然翻译是`Byte`. 如果您将其编组为字符类型`AnsiChar`，则必须在使用之前将字符转换为整数值（例如字节）。

# php - Creating a Auto Updating When Information Was Pasted on Mysql

> ID：13322929
> 
> 赞同：1
> 
> 时间：2012-11-10T14:32:57.627
> 
> 标签：php, html, posts

It's my first day here, I thought you guys could help me. So, I'm working on this kind of chatting service for a friend. I want it to auto update anything inside the div tags that has an id of messages. I tried adding some javascript and stuff from other posts, but they just made it worse. So, if anyone could fix it and comment, or give me suggestions. I want it as soon as someone posted something, it updates the posts in the div tags with the id of messages.

```
<?php

session_start();

if(!isset($_SESSION['username']))
{

header("Location: /index.php");

}

?>
<html>

<head>

<title>
House Email System
</title>

<style>

body
{
background: #383838;
font-family: Arial;
color: #444444;
position: absolute;
top: 50%;
left: 50%;
margin-top: -75px;
margin-left: -150px;
}

form
{
background: #ffffff;
width: 270px;
border-radius: 15px;
box-shadow: 3px 3px 6px 1px #303030;
}

input
{
margin-left: 15px;
}

p
{
margin-left: 15px;
}

error
{
padding:2px 4px;
margin:0px;
border:solid 1px #FBD3C6;
background:#FDE4E1;
color:#CB4721;
font-size:14px;
font-weight:bold;
}

div
{
background: #f0f0f0;
}

hr
{
color: #d0d0d0;
background-color: #d0d0d0;
height: 3px;
border: 0px;
}

username
{
margin-left: 5px;
}

message
{
margin-left: 10px;
}

</style>

</head>

<body>

<?php

$connect = mysql_connect("localhost", "root", "*******");
mysql_select_db("*******");

$username = $_SESSION['username'];
$message = $_POST['message'];
$submit = $_POST['submit'];

if($submit)
{

if($message)
{

mysql_query("INSERT INTO messages VALUES('', '$username', '$message')");

}
else
{

?>

<center>

<error>Please enter a message to send.</error> <br />

</center>

<br />

<?php

}

}

?>

<form action="active.php" method="POST">

<br />

<p>Message</p>
<input type="text" name="message" /> <br />

<br />

<input type="submit" name="submit" value="Submit" /> <br />

<br />

<?php

$query = mysql_query("SELECT * FROM messages ORDER BY id DESC");
$num_rows = mysql_num_rows($query);

if($num_rows > 0)
{

while($row = mysql_fetch_assoc($query))
{

$username = $row['username'];
$message = $row['message'];

?>

<div id="messages">

<br /> <username><b><?php echo $username; ?></b></username>

<hr />

<message><?php echo $message; ?></message> <br />

<br /> </div> <br />

<?php

}

}
else
{

?>

<center>

<error>There are no messages to display.</error> <br />

</center>

<br />

<?php

}

?>

</form>

</body>

</html> 
```

I hope you guys can help me, thank you.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T14:51:32.163

```
I want it as soon as someone posted something, it updates the posts in the div tags with the id of messages. 
```

您将不得不为该部分使用 javacript。其他一切都可以用 PHP 和 MySQL 完成。

前几天我看了很棒的 youtube 教程，了解如何做到这一点。它是一个“快速而肮脏”的解决方案，但应该可以为您提供一些基础。[http://www.youtube.com/watch?v=FyXeOX-uYMc](http://www.youtube.com/watch?v=FyXeOX-uYMc)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T15:22:20.897

首先创建一个页面 message.php 为：

```
 <?php
session_start();
?>
<html>

<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"     type="text/javascript"></script>

<script type="text/javascript">
        $(document).ready(function()
        {
            $('#submit').click(function()
            {
            //alert("hello");
           // ss=document.getElementById("message").value;

                $.ajax({
                      type : 'POST',
                      url : 'active.php',

                     data: {
                     messages :$('#message').val()
                       },
                      success : function(data){

                         $('#messages').html(data);
}

                });

            });
        });
    </script>

<title>
House Email System
</title>

<style>

body
{
background: #383838;
font-family: Arial;
color: #444444;
position: absolute;
top: 50%;
left: 50%;
margin-top: -75px;
margin-left: -150px;
}

form
{
background: #ffffff;
width: 270px;
border-radius: 15px;
box-shadow: 3px 3px 6px 1px #303030;
}

input
{
margin-left: 15px;
}

p
{
margin-left: 15px;
}

error
{
padding:2px 4px;
margin:0px;
border:solid 1px #FBD3C6;
background:#FDE4E1;
color:#CB4721;
font-size:14px;
font-weight:bold;
}

div
{
background: #f0f0f0;
}

hr
{
color: #d0d0d0;
background-color: #d0d0d0;
height: 3px;
border: 0px;
}

username
{
margin-left: 5px;
}

message
{
margin-left: 10px;
}

</style>

</head>

<body>

<center>

<error>Please enter a message to send.</error> <br />

</center>

<br />

<form action="active.php" method="POST">

<br />

<p>Message</p>
<input type="text" name="message" id="message" /> <br />

<br />

<input type="button" id="submit" name="submit" value="Submit" /> <br />
</form>
<br />

<div id="messages">

</div>

</body>

</html>

<script language="JavaScript"><!--
// v3 compatible:
function doSomething() {
   // do something here...
   $.ajax({
                      type : 'POST',
                      url : 'active.php',

                     data: {
                     messages :$('#message').val()
                       },
                      success : function(data){

                         $('#messages').html(data);
}

                });
   setTimeout('doSomething()',3000);
}
setInterval('doSomething()',3000);
//--></script> 
```

然后创建一个页面 active.php 作为

```
<?php
session_start();
$connect = mysql_connect("localhost", "root", "");
mysql_select_db("test");

$username=$_SESSION['username'];
$message=$_POST['messages'];

if($message!="")
{
mysql_query("INSERT INTO messages VALUES('', '$username', '$message')");
}

$query = mysql_query("SELECT * FROM messages ORDER BY id DESC limit 1,0");
$num_rows = mysql_num_rows($query);

if($num_rows > 0)
{

while($row = mysql_fetch_assoc($query))
{

$username = $row['username'];
$message = $row['message'];

?>

<div>

<br /> <username><b><?php echo $username; ?></b></username>

<hr />

<message><?php echo $message; ?></message> <br />

<br /> </div>

<br />

<?php

}

}
else
{

echo"No message to show";
}
?> 
```

**这是很一般的聊天。现在你需要根据你的要求来改变它。**

# scala - How to define and invoke a partially applied function with varargs?

> ID：13322930
> 
> 赞同：8
> 
> 时间：2012-11-10T14:32:57.163
> 
> 标签：scala

Stack Over Flow:

Hi all.

I would like to define a partially applied function which has varargs.

To confirm, I prepared several functions i.e. Functions._. The functions except func have a varargs argument.

How to define and invoke a partially applied function with varargs? (e.g. gunc1 with varargs.)

java version "1.7.0_07" Scala code runner version 2.9.1.final

```
object Functions {
    def func(x: Int, y: Int) = x + y
    def gunc(x: Int*) = x.sum
    def hunc(x: Int, y: Int*) = x + y.sum
    def iunc(x: Int)(y: Int*) = x + y.sum // curried
    def junk(x: String, y: Int*) = x + y.sum
}

object PartiallyApplied extends App {
    import Functions._

    val func0 = func(1, _: Int) // I can.
    println("result: " + func0(2))

    val gunc0 = gunc(1, _: Int) // I can invoke if I specify the varargs.size. But gunc0 no longer has varargs...
    println("result: " + gunc0(2))

//    val gunc1 = gunc(1, _: Int*) => compile error: ')' expected but identifier found.
//    val gunc1 = gunc(1, _: Seq[Int]) => compile error: type mismatch | found: Seq[Int] | required: Int
    val gunc1 = gunc(1, _: Int) // I can invoke if I specify the varargs.size. But gunc1 no longer has varargs...
    println("result: " + gunc1(2))

//    val hunc0 = hunc(1)_ => compile error: _ must follow method; cannot follow Int
//    val hunc0 = hunc(1, _: Int*) => compile error: ')' expected but identifier found.
//    val hunc0 = hunc(1, _: Seq[Int]) => compile error: type mismatch | found: Seq[Int] | required: Int
    val hunc0 = hunc(1, _: Int) // I can invoke if I specify the varargs.size. But hunc0 no longer has varargs...
    println("result: " + hunc0(2))
//    println("result: " + hunc0(2, 3)) => compile error: too many arguments for method apply: (v1: Int)Int in trait Function1
//    println("result: " + hunc0((2, 3): _*)) => compile error: type mismatch | found: (Int, Int) | required: Seq[Int]
//    println("result: " + hunc0(Seq(2, 3))) => compile error: type mismatch | found: Seq[Int] | required: Int
//    println("result: " + hunc0(Seq(2, 3): _*)) => compile error: no `: _*' annotation allowed here (such annotations are only allowed in arguments to *-parameters)

    val hunc1 = hunc(1, _: Int, _: Int) // I can invoke if I specify the varargs.size. But hunc1 no longer has varargs...
    println("result: " + hunc1(2, 3))

    val hunc2 = hunc(1, _: Int, _: Int, _:Int) // I can invoke if I specify the varargs.size. But hunc2 no longer has varargs...
    val hunc3 = hunc2(2, _: Int, _: Int)
    val hunc4 = hunc3(3, _: Int)
    println("result: " + hunc4(4))

    println("result: " + hunc5(2, 3))

//    val iunc0 = iunc(1)(_: Int*) => compile error: ')' expected but identifier found.
//    val iunc0 = iunc(1)(_: Seq[Int]) => compile error: type mismatch | found: Seq[Int] | required: Int
    val iunc0 = iunc(1)(_: Int)
    println("result: " + iunc0(2))

    val iunc1 = iunc(1)(_: Int, _: Int)
    println("result: " + iunc1(2, 3))
}

object NotPartiallyApplied extends App {
    import Functions._

    println("result: " + gunc(1))
    println("result: " + gunc(1, 2, 3))
    println("result: " + gunc(Seq(1, 2, 3): _*))

    println("result: " + hunc(1))
    println("result: " + hunc(1, 2, 3))
    println("result: " + hunc(1, Seq(2, 3): _*))

    println("result: " + iunc(1)(2, 3))
    println("result: " + iunc(1)(Seq(2, 3): _*))

    println("result: " + junk("x"))
    println("result: " + junk("x", 2, 3))
    println("result: " + junk("x", Seq(2, 3): _*))
} 
```

[Edit after Rex Kerr's comment]

I want the partially applied function like guncN below:

```
val guncN = gunc(1, _: Int*)
println("result: " + guncN(2)) // => 3
println("result: " + guncN(2, 3)) // => 6
println("result: " + guncN(2, 3, 4, 5, 100)) // => 115 
```

But it is prohibited by scalac.

I think guncN should be evaluated each time, at time (2), (2, 3), and (2, 3, 4, 5, 100) are given. We don't need guncM below:

```
val guncM = guncN(2, _: Int*)
println("result: " + guncM(3, 4)) // => 10 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-10T15:15:04.523

如果你只想要可变参数，你可以在 2.9 中：

```
Welcome to Scala version 2.9.1.final
(Java HotSpot(TM) 64-Bit Server VM, Java 1.6.0_31).
...
scala>     def sum(xs: Int*) = xs.sum
sum: (xs: Int*)Int

scala>     val summer = sum _
summer: Int* => Int = <function1>

scala> summer(1,2,3)
res0: Int = 6 
```

但不是现在的 2.10，也没有明显的计划来改变这一点：[https ://issues.scala-lang.org/browse/SI-4176](https://issues.scala-lang.org/browse/SI-4176)

```
Welcome to Scala version 2.10.0-RC2
(Java HotSpot(TM) 64-Bit Server VM, Java 1.6.0_31).
...

scala> def sum(xs: Int*) = xs.sum
sum: (xs: Int*)Int

scala> val summer = sum _
summer: Seq[Int] => Int = <function1>

scala> summer(1,2,3)
<console>:10: error: too many arguments for method apply:
(v1: Seq[Int])Int in trait Function1
              summer(1,2,3) 
```

如果你有 2.9，那么你可以

```
scala> def temp(early: Int*)(rest: Int*) = sum((early ++ rest): _*)
temp: (i: Int, j: Int)(rest: Int*)Int

scala> val presummed = temp(1,2) _
presummed: Int* => Int = <function1>

scala> presummed(4,5)
res1: Int = 12 
```

但也许你不应该指望拥有可变参数函数，因为它似乎已被弃用（或者至少移动到`-Yeta-expand-keeps-star`标志后面，作为一个`-Y`选项可能无法工作或随时被删除）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-10T15:06:03.060

我找到的解决方案是组合函数：

```
Welcome to Scala version 2.10.0-RC1 (Java HotSpot(TM) 64-Bit Server VM, Java 1.6.0_37).
...
scala> 1 :: (_:Int) :: Nil : Seq[Int]
res42: Int => Seq[Int] = <function1>

scala> gunc _
res43: Seq[Int] => Int = <function1>

scala> res42 andThen res43
res54: Int => Int = <function1>

scala> res54(5)
res56: Int = 6 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-26T07:39:18.053

> 也许您不应该指望拥有可变参数函数，因为它似乎已被弃用（或至少移到了`-Yeta-expand-keeps-star`标志后面）

[SI-6816](https://issues.scala-lang.org/browse/SI-6816)确认了弃用，并且在 Scala 2.12.x，2016 年 12 月的[PR 5558](https://github.com/scala/scala/pull/5558)中，该标志已明确消失（[在此处讨论](https://groups.google.com/forum/#!msg/scala-internals/03Is9E42sRg/Nr4eG_FVCWIJ)）。

> `args.size`我想要一个我们事先不知道的部分函数

这似乎仍然不可能（在 Scala 2.12.x 中，2016 年 12 月）

# signalr - 从服务器调用客户端脚本 - SignalR

> ID：13322931
> 
> 赞同：0
> 
> 时间：2012-11-10T14:33:04.570
> 
> 标签：signalr

我在我的 mvc4 Web 应用程序中使用 SignalR。我有一个继承自 HUB 的类

```
[HubName("Chat")]
public class ChatHub : Hub ,IDisconnect  
{
      private void CallMessage(string message)
      {
               Clients.MessagesRecieved(message);
      }
      .... 
```

在我的客户端 js 文件中，我写了 $(function () { globalChatHub = $.connection.chat;

```
$.extend(globalChatHub, { MessagesRecieved: function (data) {
    alert(data);
}
}); 
```

问题是，是否可以从我的 HomeController.cs 中的代码调用客户端脚本“MessagesRecieved 函数”

让我们这样说：

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        // this is a test
        ChatHub  h = new ChatHub();
        h.CallMessage("hellow");

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T14:43:40.280

当然，您可以像调用客户端代码一样调用它：

```
//Define the client method:
globalChatHub.hello = function {alert('hello');} 
```

在服务器代码中只写：

```
ChatHub  h = new ChatHub();
        h.Client.hello(); 
```

方法的名称区分大小写。

此链接中的更多信息[SignalR 快速入门](https://github.com/SignalR/SignalR/wiki/QuickStart-Hubs)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T15:43:24.673

您可以使用以下代码`Hub`为您提供上下文：`ChatHub`

```
var context = GlobalHost.ConnectionManager.GetHubContext<ChatHub>(); 
```

然后你可以调用你想要的任何方法，`ChatHub`或者你可以直接调用客户端方法。例如：

```
context.Clients.All.MessagesRecieved("test"); 
```

试试看。希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-23T06:19:22.130

在 mvc 控制器中，我使用以下代码调用集线器中的方法

```
DefaultHubManager hd = new DefaultHubManager(GlobalHost.DependencyResolver);
var hub = hd.ResolveHub("ChatHub") as ChatHub;
hub.Echo(HttpContext.Session.SessionID, "Hello Echo"); 
```

在集线器实现中，我更喜欢在集线器中保持调用客户端的实现，以使代码具有内聚性。

```
public void Echo(string sessionId, dynamic data)
{
    var context = GlobalHost.ConnectionManager.GetHubContext<ChatHub>();
    context.Clients.All.ClientSideMethod(..)
} 
```

# java - How to convert Java TimeStamp into ms access Date?

> ID：13322934
> 
> 赞同：1
> 
> 时间：2012-11-10T14:33:12.933
> 
> 标签：java, ms-access, timestamp

I would like to insert a java Timestamp into an msaccess database but I am getting an error which is listed below. The ms-access field has been set to a DATE datatype. Any advise would be deeply appreciated. Thanks

Here's my DAO class method:

```
public void addSale(String saleDetails, String saleTotal, Timestamp saleTimestamp) 
                    throws ClassNotFoundException, SQLException {

Statement myStatement = getConnection();
String sql = "INSERT INTO Sale (SaleDetails, SaleTotal, SaleTimestamp)"
            + " VALUES ('"+saleDetails+"','"+saleTotal+"','"+saleTimestamp+"')";

myStatement.executeUpdate(sql);
closeConnection(); 
```

My DTO method:

```
public void storeSale(String saleDetails, String saleTotal, Timestamp saleTimestamp){
   DAO dao = DAO.getDAO();
   try {
      dao.addSale(saleDetails, saleTotal, saleTimestamp);
    } catch (ClassNotFoundException | SQLException ex) {
        Logger.getLogger(Sale.class.getName()).log(Level.SEVERE, null, ex);
    } 
```

My Timestamp method:

```
public Timestamp addTimestamp(){ 
    java.util.Date date= new java.util.Date();
return new Timestamp(date.getTime());
} 
```

Error: [Microsoft][ODBC Microsoft Access Driver] Data type mismatch in criteria expression.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T14:35:04.500

您需要将您转换`java.util.Data`为 a`java.sql.Date`或者如果您需要将`java.sql.Timestamp`数据库类型更改为的精度`TIMESTAMP`

一些代码来创建`java.sql.Date`：

```
 java.util.Date today = new java.util.Date();
 long t = today.getTime();
 java.sql.Date dt = new java.sql.Date(t); 
```

然后，您可以将 java.sql.Date 放入您的数据库中，这对我一直有效。

信息：

*   [`java.sql.Date`](http://java.sun.com/javase/6/docs/api/java/sql/Date.html)对应于 SQL `DATE`，它存储*年、月和日*，而忽略*小时、分钟、秒和毫秒。*此外`sql.Date`，与时区无关。
*   [`java.sql.Time`](http://java.sun.com/javase/6/docs/api/java/sql/Time.html)对应 SQL`TIME`并且只包含有关*小时、分钟、秒和毫秒*的信息。
*   [`java.sql.Timestamp`](http://java.sun.com/javase/6/docs/api/java/sql/Timestamp.html)对应的 SQL`TIMESTAMP`是纳秒的日期（*注意`util.Date`只支持毫秒！*）。

# java - org.hibernate.MappingException: Repeated column in mapping for entity

> ID：13322935
> 
> 赞同：7
> 
> 时间：2012-11-10T14:33:14.773
> 
> 标签：java, hibernate

I am using Hibernate 3.2.5\. I am getting the above exception while using many-to-one mapping. The training table is having a many to one relation with Department table, i.e. One Depatement is capable of taking more than one training.

The exception is asking me to add `insert="false" update="false"` in my hbm file. If I add this bit in hbm file, then the code works fine.

Here is the hbm file:

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN" "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping>

  <class name="com.infy.model.Training" table="training">
  <id name="Id" type="integer" column="ID">
      <generator class="assigned"></generator>
  </id>      
  <property name="trainerName">
      <column name="TRAINER_NAME"></column>
  </property>
  <property name="deptId">
      <column name="DEPT_ID"></column>
  </property>
  <property name="trainingSubject">
      <column name="TRAINING_SUBJECT"></column>
  </property>
  <many-to-one name="departmentDetails" column="DEPT_ID"></many-to-one>
  </class>
</hibernate-mapping> 
```

If I change this line to:

```
<many-to-one name="departmentDetails" column="DEPT_ID" insert="false" update="false"></many-to-one> 
```

Then the code works. I want to know what is the exact reason for adding this.

Regards,

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-10T15:07:02.653

您已经映射了 DEPT_ID 列两次，这里：

```
 <property name="deptId">
      <column name="DEPT_ID"></column>
  </property> 
```

和这里：

```
 <many-to-one name="departmentDetails" column="DEPT_ID"></many-to-one> 
```

执行 select 语句时，Hibernate 可以很好地从同一列填充对象的两个属性，但是在执行插入或更新时，它无法决定将哪个属性保留在数据库中。

为什么首先需要将两个属性映射到同一列？如果您需要访问 deptId，您可以删除 deptId 属性并改为

```
training.getDepartmentDetails().getId() 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-10T15:05:42.390

这个场景的错误信息很清楚（你没有放在这里，但我已经看过几次了）。问题是您已将该列映射`DEPT_ID`到班级中的两个不同字段。

首先，您已将其映射到属性`deptId`，然后映射到`departmentDetails`. 正如您所发现的，只有当其中一个映射配置为`insert="false" update="false"`.

原因很简单。如果要更改`deptId`为另一个 id，则 hibernate 需要更改映射到的类`departmentDetails`，这非常复杂。

如果您需要获取 deptId，您可以在`Training`该返回上添加一个 getDeptId 方法`departmentDetails.getId()`。并且不提供`setDeptId`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-10T22:23:37.873

如果您在映射文件中两次使用相同的列名。可能是你得到映射异常

```
Initial SessionFactory creation failed.org.hibernate.MappingException: 
```

另外，如果您标记 insert=flase 和 update=false 。

如果您尝试更新或插入表或其他遗留系统中的记录，请尝试更新这些列值。它不会更新或插入该文件。

请检查以下链接。它将帮助您找到解决方案。

[http://www.techienjoy.com/hibernate-insert-update-control.php](http://www.techienjoy.com/hibernate-insert-update-control.php)

谢谢桑迪普 G。

# sqlite - Can SQLite be accessed from another machine?

> ID：13322936
> 
> 赞同：0
> 
> 时间：2012-11-10T14:33:19.060
> 
> 标签：sqlite, windows-store-apps, windows-phone-8

Is it possible to access a SQLite database running on a WP8 app from a Windows 8/Store/"Metro" app?

If yes, how - is there any trick to it? Is it easy, tricky, or impossible?

If impossible, is it possible with any other DB? AFAIK, SQLite is the only DB that can be used with the new Windows Store style sandboxed apps.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T15:12:29.277

看看[这篇文章](http://www.silverlightshow.net/items/Connecting-Windows-8-applications-with-services-Part-1-Using-services-to-get-data-in-our-Windows-8-applications.aspx)。它解释说：

*   sqlite 仅用于在本地存储数据（即缓存来自远程数据源的内容）
*   您无法连接到远程数据库，因为这涉及将您的数据库连接字符串（即用户名和密码）分发给潜在的数百万用户
*   向您的应用程序提供数据的正确方法是通过某种服务。想想现在主要网站有哪些不同的 API。

所以回答你的问题：不，这是一个坏主意。

# asp.net - HTTP Error 503, the service is unavailable

> ID：13322937
> 
> 赞同：449
> 
> 时间：2012-11-10T14:33:24.083
> 
> 标签：asp.net, iis, http-error

I'm really new to setting up web servers in general. I've got IIS 8 on Windows 8, and I'm trying to set up a little site locally, while doing some development. In IIS I choose Add Site, give a name, points to a location where I have a index.html file (I've tried different locations, latest in a *c:\inetpub\wwwroot\test* -folder) and otherwise use all default settings. However, when I try to browse to localhost I get

> HTTP Error 503\. The service is unavailable.

I've verified the pool is started, and I've given **IIS_IUSRS** Full Control on the target folder

I've search around but not found anything that solved my issue, and there's nothing helpfull in the EventLog or in the *C:\Windows\System32\LogFiles\HTTPERR* folder

Could anyone tell me what's wrong?

* * *

## 回答 #1

> 赞同：500
> 
> 时间：2013-10-30T13:02:25.227

可能是用户身份已过时，尤其是当您尝试启动已停止的应用程序池并且下一个请求再次失败时。

在 IIS 中，转到服务器下的应用程序池，然后为您的网站找到正确的应用程序池，然后单击它。在右侧的高级设置菜单上，选择身份并更改它并输入新用户和密码。再次单击您的应用程序池，然后选择回收以重新启动它。

您还可以尝试在事件查看器中的 Windows 日志、应用程序、详细信息选项卡下查看错误消息。

* * *

## 回答 #2

> 赞同：105
> 
> 时间：2015-01-16T14:11:52.417

其他答案都很好。但就我而言，我正在使用一个 Windows 机器，它已经在运行一些旧的 IIS、IISExpress 或任何其他网站。发生的事情是在系统中以某种方式保留的 urls ACL。所以，你可能想检查一下。

这是转储所有 URL acl 的控制台命令：

```
netsh http show urlacl 
```

检查此处返回的内容，如果有任何内容与您正在测试的 url 匹配，这里是删除一个 URL acl 的命令（例如）：

```
netsh http delete urlacl url=http://localhost:2018/ 
```

（请注意仔细注意您在此处所做的操作，以防与原始问题无关）

* * *

## 回答 #3

> 赞同：98
> 
> 时间：2014-04-18T16:54:35.933

就我而言，问题是 DefaultAppPool。我将“加载用户配置文件”更改为 false，现在它可以工作了。但是，我不知道这是否有副作用。 ![在此处输入图像描述](../Images/c555d12159398a7eee1f6788d01ee08e.png)

* * *

## 回答 #4

> 赞同：53
> 
> 时间：2013-10-25T10:20:15.463

Check your application's respective Application Framework Pool - it could be stopped. If it is, start it and check again.

If you're still experiencing issues you can also check out Event Viewer to find the cause of that error in order to troubleshoot more.

* * *

## 回答 #5

> 赞同：34
> 
> 时间：2016-06-03T17:08:01.027

如果它可以帮助任何人，这可能是可笑的，但对我来说并不明显，是应用程序池没有启动。我只是假设启动网站或创建应用程序池，它会启动。事实上，我什至不知道你必须启动应用程序池......

* * *

## 回答 #6

> 赞同：27
> 
> 时间：2016-06-25T07:24:25.340

[![应用程序池已停止](../Images/028763d3b8a00749cc3f54926a88366a.png)](https://i.stack.imgur.com/i75HL.png)

**就我而言，应用程序池已停止。启动它解决了问题。**

我的网站托管在 Arvixe 上。发生错误问题可能是因为我有基于会员的应用程序，并且在上传文件时发生了一些不好的事情。

* * *

## 回答 #7

> 赞同：26
> 
> 时间：2013-08-16T15:17:10.723

如果应用程序池在某个用户身份下运行，那么再次进入更新用户名密码的高级设置，它对我有用。

* * *

## 回答 #8

> 赞同：18
> 
> 时间：2017-11-27T15:33:19.177

如果应用程序池在您启动后立即停止并且您的事件日志显示：

> 应用程序池“APP_POOL_NAME”的工作进程遇到错误“无法读取配置文件”尝试从文件“\?\”读取配置数据，行号“0”。数据字段包含错误代码。

...您可能会遇到明显在 Windows 10 Fall Creators Update 和/或 .Net Framework v4.7.1 中引入的错误。它可以通过以下解决方法步骤来解决，这些步骤来自相关问题的[答案](https://stackoverflow.com/a/47309481/704808)[Cannot read configuration file ' trying to read configuration data from file '\\?\<EMPTY>', line number '0'](https://stackoverflow.com/questions/47309480/cannot-read-configuration-file-trying-to-read-configuration-data-from-file)。

> 1.  转到安装 IIS 的驱动器，例如。`C:\inetpub\temp\appPools\`
> 2.  删除与您的应用程序池同名的目录（或虚拟目录）。
> 3.  再次回收/启动您的应用程序池。

我已通过在 dotnet GitHub 存储库上创建以下问题向 Microsoft 报告了此错误：[安装 4.7.1 后，IIS AppPool 停止并显示“无法读取配置文件”](https://github.com/Microsoft/dotnet/issues/572)。

**编辑**

微软回应称，这是 Fall Creators Update 的 Windows 设置过程的一个已知问题，并记录在[KB 4050891 中，*Web 应用程序在 Windows 10 版本 1709 (Fall Creators Update) 上返回 HTTP 错误 503 和 WAS 事件 5189*](https://support.microsoft.com/en-us/help/4050891/error-http-503-and-was-event-5189-from-web-applications-on-windows-10)。该文章提供了以下解决方法过程，与上述类似。但是，请注意，无论它们是否受到问题的影响，它都会回收所有应用程序池。

> 1.  使用“以管理员身份运行”选项打开 Windows PowerShell 窗口。
> 2.  运行以下命令：
>     *   `Stop-Service -Force WAS`
>     *   `Remove-Item -Recurse -Force C:\inetpub\temp\appPools\*`
>     *   `Start-Service W3SVC`

* * *

## 回答 #9

> 赞同：12
> 
> 时间：2015-03-18T18:53:21.003

我通过删除与 IIS 中的应用程序目录匹配的 URL 保留解决了此问题。我遇到了与本文中概述的类似（绝对不一样）的问题：

[503 服务不可用的不太常见的根本原因](http://blogs.msdn.com/b/webtopics/archive/2010/02/17/a-not-so-common-root-cause-for-503-service-unavailable.aspx)

* * *

## 回答 #10

> 赞同：12
> 
> 时间：2013-03-22T15:36:44.577

首先查看系统或应用程序日志下的事件查看器。

就我而言，问题是无法为应用程序池启动任何工作进程，因为无法读取其配置文件 - 我包含了一个额外的“。” 在其名称的末尾。

* * *

## 回答 #11

> 赞同：11
> 
> 时间：2018-12-29T16:53:25.470

对于 Windows Server 2012 R2，我这样做了：IIS > App.. Pools >（有黑色“停止”方块）>右键单击它>开始

* * *

## 回答 #12

> 赞同：9
> 
> 时间：2013-01-30T14:56:19.513

您的域可能要求用于运行 AppPool 的帐户具有批量登录权限。在这种情况下，您将看到同样的错误消息。您可以通过查看事件查看器中的系统事件来判断是否是这种情况。应该有一个事件表明与应用程序池一起使用的帐户“密码错误或没有批量登录权限”。

这就是为什么开发人员经常在他们的开发机器上使用 IIS Express，因为它绕过了批量登录权限问题。

* * *

## 回答 #13

> 赞同：9
> 
> 时间：2015-10-15T14:50:37.090

或者，如果当前的解决方案都不起作用，请在您网站的目录中查找名为`app_offline.htm`. 这基本上告诉 IIS 您的站点不可用并改为显示此页面。

要修复它，请将其删除或重命名为`app_offline.htm.bak`.

就我而言，我在向同事展示如何使用它来暂时阻止网站流量时添加了它，然后忘记了我在我的盒子上做了那个。叹。

* * *

## 回答 #14

> 赞同：8
> 
> 时间：2014-08-20T11:05:09.637

在我的情况下，池使用自定义身份（帐户和密码）。密码过期并重新加载后，出现错误。我只是在身份中更正密码

* * *

## 回答 #15

> 赞同：7
> 
> 时间：2013-10-17T20:31:32.817

我遇到了同样的问题，但这是`IIS`.

为您的站点/应用程序选择`Advanced Settings...`，然后查看`Enabled Protocols`值。无论出于何种原因，我的网站的值都是空白的，并导致以下错误：

> http错误503服务不可用。

解决方法是添加`http`并选择`OK`. 然后该站点再次正常运行。

* * *

## 回答 #16

> 赞同：7
> 
> 时间：2015-10-22T08:48:58.077

就我而言，我创建了一个新的应用程序池，只是忘了启动它。

* * *

## 回答 #17

> 赞同：5
> 
> 时间：2014-11-10T19:25:35.100

检查事件查看器 - Windows - 应用程序。*如果IIS-W3SVC-WP*出现红色错误行并且消息类似于*模块 DLL C:\Windows\system32\inetsrv\rewrite.dll 加载失败。数据是错误的。*那么您缺少一些 Windows 安装程序功能。

在 Windows Server 2012 中，转到服务器管理器、添加角色和功能、Web 服务器 (IIS) 并添加匹配功能。通常，大部分应用程序开发部分都已安装。以下是帮助诊断的[IIS 功能及其相关 DLL](http://technet.microsoft.com/en-us/library/cc627313.aspx)的完整列表。

在经历了几次迭代之后，我结束了上面关于“rewrite.dll”的错误消息。这导致[直接下载和安装 Microsoft URL Rewrite 工具](http://www.iis.net/downloads/microsoft/url-rewrite)。最后，所有网站都栩栩如生。

* * *

## 回答 #18

> 赞同：5
> 
> 时间：2020-03-04T20:08:46.953

我遇到同样问题的时间最长，我认为我的代码有问题。事实证明，在 IIS 服务器中，我用于该特定项目的应用程序池已停止。我重新打开它并解决了这个问题。错误 503 很可能与应用程序池有关

* * *

## 回答 #19

> 赞同：5
> 
> 时间：2017-02-27T17:05:27.813

我们的服务器在周日下午用完了磁盘空间，导致应用程序突然失败并返回 HTTP 错误 502。日志是空的，所以它必须是在 IIS 甚至没有做任何事情之前发生的事情。

快速查看事件查看器（`WIN+R > eventvwr`）暴露了这个问题。 [![在此处输入图像描述](../Images/0b06157dd0d5565614e60d32e78a8349.png)](https://i.stack.imgur.com/KP9s0.png)

*将系统和应用程序窗口的输出过滤到 WAS 是一个好主意，因为它可能会变得非常冗长。*

该应用程序依赖于另一个被禁用的应用程序。因此请记住，如果一个应用程序的依赖进程之一出现故障，它可能会间接停机。我们只是重新启用了 .NET 应用程序池，我们的其他应用程序又开始正常运行。

* * *

## 回答 #20

> 赞同：4
> 
> 时间：2014-05-02T22:11:19.370

我按照上面的***解决 HTTP 错误 503***链接。就我而言，每次右键单击我的 svc 文件并选择“浏览”时，我的应用程序池都会停止。

我按照以下步骤解决应用程序池停止的问题

我正在使用 Windows Server 2008 R2。

在我的 IIS 管理器应用程序池中，我右键单击我感兴趣的应用程序池，然后单击高级设置。这将打开高级设置弹出窗口。

在“流程模型”部分下，单击“身份”并单击“应用程序池身份”弹出窗口中的“设置”按钮。这将打开设置凭据弹出窗口，我在其中提供了用户名、密码和确认密码，然后单击确定。

现在，当我右键单击我的 svc 文件时，它会在 IE 浏览器中打开。

* * *

## 回答 #21

> 赞同：4
> 
> 时间：2021-04-19T06:00:24.723

我遇到了 503 错误并在 IIS 中检查了该站点的相关应用程序池。应用程序池处于“停止”模式。所以我刚刚启动了应用程序池。然后我的网站开始工作。

* * *

## 回答 #22

> 赞同：4
> 
> 时间：2019-10-14T07:27:32.603

我在安装 url 重写模块后看到此错误我尝试从以下位置安装它的以前版本： [https](https://www.microsoft.com/en-us/download/details.aspx?id=7435) ://www.microsoft.com/en-us/download/details.aspx?id=7435 它修复了我的错误

* * *

## 回答 #23

> 赞同：4
> 
> 时间：2018-06-22T14:54:44.957

对于我的情况，我的默认应用程序池处于脱机状态，为了解决问题，我检查了位于 C:\Windows\System32\LogFile\HTTPERR 中的 IIS 日志 向下滚动到最新的错误日志，这将向您显示 IIS 的问题，如果任何我的错误是“503 1 AppOffline DefaultPool”

解决方案 打开 IIS 管理器，单击应用程序池，这会在您的右侧列出所有应用程序池。-检查托管您的 api 或站点的应用程序池是否有停止标志，如果有，请右键单击应用程序池并单击开始。_再次尝试从客户端访问您的服务这对我有用。向@kombsh 大声喊叫

* * *

## 回答 #24

> 赞同：4
> 
> 时间：2016-04-25T11:23:44.173

如果您安装了 IIS URL 重写，则可能与此有关。我在 Windows 10 更新后遇到了问题。

[这篇 StackOverflow 帖子帮助了我。](https://stackoverflow.com/questions/18714709/windows-8-1-windows-10-breaks-my-asp-net-iis-service-unavailable)

转到`Windows Control Panel`> `Programs and Features`> `IIS URL Rewrite Module 2`> `Repair`。

* * *

## 回答 #25

> 赞同：3
> 
> 时间：2014-12-28T15:01:49.007

如果您有 McAfee HIPS，并且在事件查看器应用程序日志中看到以下错误：

> 模块 DLL C:\Windows\System32\inetsrv\HipIISEngineStub.dll 无法加载。
> 数据是错误的。

然后[McAfee.com 上的这个解决方法](https://kc.mcafee.com/corporate/index?page=content&id=KB72677&actp=LIST)解决了我的问题。

从页面引用：

> 1.  单击开始，运行，键入资源管理器，然后单击确定。
> 2.  导航到：%windir%\system32\inetsrv\config
> 3.  以管理员身份打开文件 applicationHost.config 以在记事本中进行编辑。
> 4.  编辑 <globalModules> 部分并删除以下行：
>     <add name="MfeEngine" image="%windir%\System32\inetsrv\HipIISEngineStub.dll" />
>     
>     
> 5.  编辑 <modules> 部分并删除以下行：
>     <add name="MfeEngine" />
>     
>     
> 6.  编辑完 applicationHost.config 文件后，保存文件，然后使用 iisreset 或通过重新启动系统重新启动 IIS 服务器。

* * *

## 回答 #26

> 赞同：3
> 
> 时间：2016-03-25T21:23:56.023

就我而言，问题是另一个应用程序正在使用我绑定到我的网站的端口。

我通过从命令行运行以下命令找到了它，该命令列出了所有侦听端口和所涉及的可执行文件：

```
netstat -b 
```

* * *

## 回答 #27

> 赞同：3
> 
> 时间：2018-08-30T14:58:59.010

实际上，在我的情况下[https://localhost](https://localhost)正在工作，但[http://localhost](http://localhost)给出了 HTTP 503 内部服务器错误。更改 IIS 中默认网站的绑定以使用主机名 localhost 而不是空白主机名。

[![HTTP 的 IIS 站点绑定](../Images/6f3f761590517e0c23c8e21bcd4ae0e7.png)](https://i.stack.imgur.com/abv5Q.png)http绑定的tname

* * *

## 回答 #28

> 赞同：2
> 
> 时间：2015-10-15T10:28:07.147

经过一些尝试和错误，我发现应用程序池被配置为使用我的域帐户作为身份，我记得我之前更改了域帐户的密码。重置应用程序池的身份（使用我的新密码）解决了问题，并且可以重新启动应用程序池而不会出现任何问题。

* * *

## 回答 #29

> 赞同：2
> 
> 时间：2019-08-01T05:22:24.860

我将端口从 80 更改为 8080，这就是发生此错误的原因。我在搜索栏中写 localhost/ 然后发生此错误。我的问题通过在搜索中写入 localhost:8080/ 然后打开本地主机来解决。

* * *

## 回答 #30

> 赞同：2
> 
> 时间：2016-01-05T08:59:19.247

我今天有同样的错误。问题是我最近更改了域密码，因此我必须在每个应用程序池中的高级设置 > 进程模型 > 身份凭据中更新它。

* * *

## 回答 #31

> 赞同：2
> 
> 时间：2016-07-22T11:14:22.253

将 Windows 7 升级到 Windows 10 后与 IIS Express 10.0 相同。解决方案：转到 IIS 并启用所有禁用的网站并重新安装 ASP.NET Core。

* * *

## 回答 #32

> 赞同：2
> 
> 时间：2015-12-03T21:15:45.973

还要检查地址栏并确保页面位于正确的位置。

可以返回此错误而不是 404（找不到页面）。就我而言，这是页面上没有包含子文件夹的错误链接。

* * *

## 回答 #33

> 赞同：1
> 
> 时间：2016-03-31T15:59:55.487

如果最近使用 .NET 框架和/或 ASP.NET 进行了任何安装或更新，也可能发生这种情况。如果您不确定最近发生了什么并且您的所有应用程序都使用 ASP.NET 版本 4，您可以尝试通过在管理员模式下在命令提示符下运行以下命令来重置它们。

```
cd C:\Windows\Microsoft.NET\Framework64\v4.0.30319
aspnet_regiis -i 
```

这确保安装或重新安装 ASP.NET 4 并更新现有应用程序以使用 ASP.NET 4 版本的应用程序池。它更新 IIS 元数据库中的 IIS 经典和集成模式处理程序和脚本映射。它还重新创建 ASP.NET v4.0 和 ASP.NET v4.0 经典应用程序池，并将 .NET 框架 4 设置为 DefaultAppPool 和经典 .NET 应用程序池。

* * *

## 回答 #34

> 赞同：1
> 
> 时间：2019-12-02T10:23:40.103

我在开发机器上清理我的 IIS 时遇到了这个问题，并且我以某种方式为我无法清除的实际开发 Web 的子文件夹创建了一个虚拟文件夹，并且正在创建冲突。

为了清除它，我不得不使用

```
C:\Windows\System32\inetsrv\appcmd.exe list vdir 
```

然后使用单独删除问题虚拟目录

```
C:\Windows\System32\inetsrv\appcmd.exe delete app /app.name:"Default Web Site"/{name of virtual directory} 
```

* * *

## 回答 #35

> 赞同：1
> 
> 时间：2020-11-10T15:44:44.123

[![在此处输入图像描述](../Images/6198824477a734edb15cd517b62f111d.png)](https://i.stack.imgur.com/XbpgFm.png)

对我来说，解决方案是将 Enable 32-bit Applications 更改为 False

* * *

没有一个答案对我有用。所以我想分享我在研究数小时后发现的东西。

继续从事件日志中看到此消息：`The Module DLL C:\Windows\system32\RpcProxy\RpcProxy.dll failed to load. The data is the error.`原来 dll 是 64 位的，无法加载到 32 位进程中。

* * *

## 回答 #36

> 赞同：1
> 
> 时间：2016-01-20T15:41:49.927

这发生在我们内部网的服务器上。浏览博客文章和 Windows 日志后，发现在 2015 年圣诞节前几天（与 Windows 更新有关？）我的网站应用程序池想要在文件夹**c:\inetpub\temp\appPools**中创建一个配置文件，但是对该文件夹的访问受到限制。这导致应用程序池被禁用。

在此临时文件夹上向所有人添加完全控制后，我重新启动了**Windows 进程激活服务**，一切都再次上线。

如果我更优雅一点，可能足以授予 AppPool 用户对文件夹的完全控制权，但我似乎永远不记得应用程序池名称和应用程序池用户如何相互关联......

* * *

## 回答 #37

> 赞同：1
> 
> 时间：2021-02-19T09:57:33.853

您也可以尝试以下方法。

右键单击该站点并“基本设置...”单击“连接为...”单击特定用户并提供新凭据。

现在它应该可以工作了。

* * *

## 回答 #38

> 赞同：0
> 
> 时间：2014-02-27T12:34:08.590

这可能是因为与数据库的连接数。我有这样的情况，所以写了一个解构函数并杀死了 db open connection 并解决了。

* * *

## 回答 #39

> 赞同：0
> 
> 时间：2014-08-16T01:09:42.500

我知道这是以不同的方式回答的，但就我而言，我注意到应用程序池即使在手动重启后也会自动停止。而且它但是当我更改所用帐户的密码并在几天前更改时，它可以正常工作而无需任何其他更改。尝试相同。

* * *

## 回答 #40

> 赞同：0
> 
> 时间：2014-08-15T16:57:40.520

对我来说，DefaultAppPool 无法启动，事件日志告诉我`C:\Windows\System32\inetsrv\redirect.dll`无法加载。

文件丢失。其原因是未安装 Windows 功能“HTTP 重定向”。检查该功能是否在`Internet Information Services\World Wide Web Services\Common HTTP Features\HTTP Redirection`. 如果您现在才安装它，则不需要重新启动。

* * *

## 回答 #41

> 赞同：0
> 
> 时间：2014-06-05T13:29:39.793

我有同样的问题，发现它是由在 C:\Users 中创建用户配置文件的权限问题引起的。我授予 ApplicationPoolIdentity 对 C:\Users 文件夹的完全权限，启动了站点并且一切正常，配置文件必须已正确创建，并且我的站点正常运行。然后我从 ApplicationPoolIdentity 中删除了对 C:\Users 的访问权限。

[站点不会使用 ApplicationPoolIdentity 在本地启动，仅在使用 NetworkService 时：“HTTP 错误 503。服务不可用。”](https://stackoverflow.com/questions/23992590/site-wont-start-on-local-using-applicationpoolidentity-only-when-using-networks/)

* * *

## 回答 #42

> 赞同：0
> 
> 时间：2017-10-24T07:14:19.570

由于服务器计算机上没有足够的内存，我遇到了同样的问题。
实际上有 1/16 gb 的可用内存，但 IIS 在卸载几个未使用的应用程序后自动开始正常工作（它们不拥有端口 80）。

* * *

## 回答 #43

> 赞同：0
> 
> 时间：2016-07-04T14:58:44.807

就我而言，与域关联的应用程序池与与各个站点/应用程序关联的应用程序池不匹配。我不确定这是怎么发生的，但是一旦域应用程序池得到纠正，问题就解决了。

* * *

## 回答 #44

> 赞同：0
> 
> 时间：2016-12-14T08:00:07.470

安装 Skype 时出现此错误。因为我的站点使用端口 80，而 Skype 也使用相同的端口。

请看[这个](https://serverpress.com/resolving-the-port-80-conflict-on-windows-systems-running-skype/)。

* * *

## 回答 #45

> 赞同：0
> 
> 时间：2021-04-07T08:40:14.417

就我而言，由于公司政策，我不得不更改我的网络用户密码。因此，您需要编辑您的 AppPool：单击 Application Pools。选择您的池，“高级设置...”转到“流程模型”，单击“身份”，然后单击“特定用户”并提供新凭据。

* * *

## 回答 #46

> 赞同：0
> 
> 时间：2016-09-08T08:44:40.307

在 IIS 中，转到服务器下的应用程序池，然后为您的网站找到正确的应用程序池，然后单击它。在右侧的高级设置菜单的常规下，使“启用 32 位应用程序”= true。

这对我有用！

* * *

## 回答 #47

> 赞同：0
> 
> 时间：2017-01-10T16:52:49.377

我在使用 Kentico 作为卫星 CMS 的 .Net MVC 应用程序中遇到了这个错误。问题是我的应用所在的 URL 需要适当的许可证。它基本上停止了应用程序并导致 IIS 只返回此 503 - 服务不可用消息。我最终在 Kentico 的事件日志中找到了错误详细信息（作为警告）。[您可以在 Kentico 的客户端门户 - https://client.kentico.com/](https://client.kentico.com/)中创建新许可证或查找许可证详细信息。

* * *

## 回答 #48

> 赞同：0
> 
> 时间：2017-04-12T20:21:51.990

在我们的例子中，没有记录任何内容（除了 503 的 HTTP 错误日志条目），但是 IIS 中 Web 应用程序的 Enabled Protocols 值有错字！而不是 http，https 在协议之间有一个时期：http.https

* * *

## 回答 #49

> 赞同：-1
> 
> 时间：2021-08-07T10:35:31.860

[ **2021 年 7 月 - 更新**] 我已经尝试了上述所有这些答案，但它不起作用，然后我在程序和功能中重新安装 IIS，它就可以工作了。

**我知道所有设置都消失了，但它可以工作。（请阅读这个）**

1.  按 Windows + X
2.  选择“应用程序和功能”
3.  选择“程序和功能”
4.  选择“打开或关闭 Windows 功能”
5.  取消选中“Internet 信息服务”复选框
6.  重启电脑
7.  重新安装（再次选中“Internet 信息服务”复选框）
8.  然后测试新的！

或者您可以：通过 RUN 输入“appwiz.cpl”打开“程序和功能”，然后按 Enter。

# android - Menu button on newer android devices

> ID：13322940
> 
> 赞同：3
> 
> 时间：2012-11-10T14:33:28.780
> 
> 标签：android, menu, android-4.0-ice-cream-sandwich

I'm creating an Android app for version 2.3.3 and higher (using the same SDK version) and I have used a legacy menu button.

I also have used a custom ActionBar library that doesn't have the menu overflow (?) capability. So is there any way for me to display the menu on newer Android devices without the physical menu button? Preferably without having to change the ActionBar to use another library or without having to use Android's newer SDKs?

Thanks.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T14:35:00.790

> 我已经**实现**了一个旧的菜单按钮

做什么的？如果您的应用程序是旧版应用程序，Android 将自行处理此问题，它会在 Honeycomb 及上方添加屏幕菜单按钮，因此您无需费心。

见这篇文章：[告别菜单按钮](http://android-developers.blogspot.com/2012/01/say-goodbye-to-menu-button.html)

> 如果您的应用在没有专用菜单按钮的设备上运行，系统会根据您在清单元素中声明支持的 API 级别来决定是否将操作溢出添加到导航栏。逻辑归结为：
> 
> 如果将 minSdkVersion 或 targetSdkVersion 设置为 11 或更高，系统将不会添加旧版溢出按钮。
> 
> 否则，系统会在 Android 3.0 或更高版本上运行时添加旧版溢出按钮。
> 
> 唯一的例外是，如果您将 minSdkVersion 设置为 10 或更低，将 targetSdkVersion 设置为 11、12 或 13，并且您不使用 ActionBar，则在 Android 4.0 或更高。

旧版应用程序的软菜单键如下所示：

![在此处输入图像描述](../Images/47c1e4b949e72ea20b6c298d7fdec0c2.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T14:51:00.573

您也可以查看我过去几天的一些答案。这两个问题都是针对[ActionBarSherlock](http://actionbarsherlock.com/)

[答案 1](https://stackoverflow.com/a/13180285/450534)

[答案 2](https://stackoverflow.com/a/13307583/450534)

**注意：**正如这两个答案中也提到的，我想重申一下。这只是为仍然想强制使用 OverFlow 菜单的*开发人员提供一个选项。*

# architecture - Where is it better to validate owner of some document?

> ID：13322947
> 
> 赞同：0
> 
> 时间：2012-11-10T14:34:28.077
> 
> 标签：architecture, application-design

We have a WCF-service with a method that, for example, cancels an order by given id. This method can be called from the web by any user of our site.

Somewhere inside this method we have to check that order with given id belongs to the user that is currently logged in (we read authorization cookies).

*Where is it better to perform this check?*

In WCF method we start business process and somewhere inside it we ask a repository to load an order by id.

We can have a number of such opened-to-web operations. And I want to make the possibility to forget to make such an ownership check as low as possible - I want to implement such a check in some narrow place which every code branch will go though.

I can make such a check in the very repository, but I'm now sure that this kind of validation is of its responsibility. Also I can implement some kind of declarative validation by applying a behavior attribute to the service or its operations, but I'm not sure this is the right place, because we would have to load an order at least twice - first when performing an ownership test, and then in the business-process.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T12:14:55.247

每个服务都有责任作为*安全边界*。因此，服务方法应在调用必要的业务逻辑之前对其输入参数执行验证调用。最重要的是，您应该始终快速失败——如果方法调用无论如何都会失败，请确保它尽快失败（另请参阅[http://en.wikipedia.org/wiki/Fail-fast](http://en.wikipedia.org/wiki/Fail-fast)）。

因此，让您的服务方法调用验证方法（为每个服务方法编写一个验证器类），并且该方法可以在不允许操作时抛出验证异常，或返回状态代码。异常通常是首选，因为它们会停止执行并强制调用堆栈对其进行操作。

验证方法如何工作是另一回事。它可能会调用存储库并询问交易的所有者是谁。无论您如何实现它，其工作原理都隐藏在验证器类中。

# iphone - 在 UISearchDisplayController 期间作用于 didSelectRowAtIndexPath

> ID：13322954
> 
> 赞同：1
> 
> 时间：2012-11-10T14:35:09.510
> 
> 标签：iphone, uisearchdisplaycontroller, didselectrowatindexpath

我有一个包含 UIImageView 和 UISearchDisplayController 的 UIScrollView。当用户点击图像时，会出现搜索显示控制器。我正在根据搜索文本过滤列表，并且与 UISearchDisplayController 关联的表已正确更新。当用户点击表格中的一行时，我收到了 didSelectRowAtIndexPath。这*就是*工作。（我使用[本教程](http://ygamretuta.me/2011/08/10/ios-implementing-a-basic-search-uisearchdisplaycontroller-and-interface-builder/)来帮助我实现 UISearchDisplayController。）

但是，我不知道如何 (a) 从 didSelectRowAtIndexPath 中删除 UISearchDisplayController（即搜索框和表格），以及 (b) 如何将有关所选行的信息传递给 UIScrollView。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T22:28:25.870

A）您应该能够通过以下方式关闭 UISearchDisplay 控制器：

```
[searchDisplayController setActive:NO animated:YES]; 
```

B）我假设您正在启动一个新的视图控制器来显示有关所选行的信息？如果是这样，请执行以下操作：

```
MyViewController *viewController = [[MyViewController alloc] initWithNibName:@"myNibName" bundle:nil];
MyObject *object = [allObjects objectAtIndex:indexPath.row];

// pass object to view controller's "object" property
viewController.object = object;

[self.navigationController pushViewController:viewController animated:YES]; 
```

抱歉，如果有任何语法错误，请不要输入 xcode。

# c# - 如何 - 将 Linq.DataQuery 转换为 Generic.List

> ID：13322960
> 
> 赞同：0
> 
> 时间：2012-11-10T14:36:34.690
> 
> 标签：c#, linq

你们中的任何人都可以帮我解决这个问题吗？将“carsList”变量转换为“_vehicleList”时出现此错误

**无法将类型为“System.Data.Linq.DataQuery”的对象转换为类型“System.Collections.Generic.List`1[VehicleDAOModel]”。**

Linq.DataQuery 是否必须与 VehicleDAOModel 中的属性匹配？

我的代码：

```
public class VehicleDAOModel
{
    [Display(Name = "Id")]
    public int _Id { get; set; }

    [Required]
    [Display(Name = "Year")]
    public string _year { get; set; }

    [Required]
    [Display(Name = "Make")]
    public string _make { get; set; }

    [Required]
    [Display(Name = "Model")]
    public string _model { get; set; }

    [Required]
    [Display(Name = "Trim")]
    public string _trim { get; set; }
}
        // LINQ TO SQL CODE

       var dataContext = new VehicleModelL2SQLDataContext();
        var carsList = from v in dataContext.Vehicles
                       select v;
        _vehicleList = (List<VehicleDAOModel>)carsList;

       public List<VehicleDAOModel> _vehicleList = new List<VehicleDAOModel>(); 
```

尝试了以下但没有奏效：carsList.ToList(); (X) carsList.AsEnumerable().LoList(); （X）

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T15:15:11.060

假设您的车辆实体类未命名为“VehicleDAOModel”，您需要*投影* `carsList`到`VehicleDAOModel`对象列表。

```
_vehicleList = carsList.Select( c =>
                   new VehicleDAOModel {
                       Id = c.Id,
                       Year = c.Year,
                       ...
                       }); 
```

我强烈建议为此使用[Automapper](http://automapper.org/)：

```
Mapper.Map<Vehicle, VehicleDAOModel>();
_vehicleList = carsList.Project.To<VehicleDAOModel>(); 
```

（假设两个类之间存在 1:1 的属性名称映射。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T14:40:34.300

`.ToList()`就做一个`carsList`。

```
_vehicleList = carsList.ToList(); 
```

该carsList 是一个查询，一旦读取就会被执行。.ToList() 读取完整的查询结果并将其作为`List<T>`.

但这确实希望查询返回`VehicleDAOModel`s。如果没有，那么您将需要使用 .Select() 并自己进行转换。

# javascript - nodejs使用knox上传到s3？

> ID：13322961
> 
> 赞同：10
> 
> 时间：2012-11-10T14:36:38.640
> 
> 标签：javascript, node.js

例如：

诺克斯.js：

```
knox.putFile("local.jpeg", "upload.jpeg", {
          "Content-Type": "image/jpeg"
        }, function(err, result) {
          if (err != null) {
            return console.log(err);
          } else {
            return console.log("Uploaded to amazon S3"); 
```

我在与 knox.js 相同的目录中有两个图像，local.jpeg 和 local2.jpeg，我可以将 local.jpeg 上传到 s3，但不能上传 local2.jpeg，这两个文件具有相同的权限。我在这里错过了什么吗？谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-10-31T12:48:53.827

我的实现没有在语言环境中存储。与`express`, `knox`, `mime`, `fs`.

```
var knox = require('knox').createClient({
    key: S3_KEY,
    secret: S3_SECRET,
    bucket: S3_BUCKET
});

exports.upload = function uploadToAmazon(req, res, next) {
    var file = req.files.file;
    var stream = fs.createReadStream(file.path)
    var mimetype = mime.lookup(file.path);
    var req;

    if (mimetype.localeCompare('image/jpeg')
        || mimetype.localeCompare('image/pjpeg')
        || mimetype.localeCompare('image/png')
        || mimetype.localeCompare('image/gif')) {

        req = knox.putStream(stream, file.name,
            {
                'Content-Type': mimetype,
                'Cache-Control': 'max-age=604800',
                'x-amz-acl': 'public-read',
                'Content-Length': file.size
            },
            function(err, result) {
                console.log(result);
            }
       );
       } else {
        next(new HttpError(HTTPStatus.BAD_REQUEST))
       }

       req.on('response', function(res){
           if (res.statusCode == HTTPStatus.OK) {
               res.json('url: ' + req.url)
           } else {
               next(new HttpError(res.statusCode))
           }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T15:59:49.437

那是因为您的代码没有上传 local2.jpeg！

您的代码只会推送名为`local.jpeg`. 您应该为每个文件调用该`knox.put()`方法。我还建议您使用一些辅助函数来执行一些字符串格式化以重命名为 s3 上上传的文件（或者保持原样:)）

```
var files = ["local.jpeg", "local1.jpeg"];
for (file in files){
  var upload_name = "upload_"+ file; // or whatever you want it to be called

  knox.putFile(file, upload_name, {
         "Content-Type": "image/jpeg"
     }, function (err, result) {
         if (err != null) {
             return console.log(err);
         } else {
             return console.log("Uploaded to amazon S3");
         }
     });
} 
```

# java - 如何将 MD5 哈希转换为字符串？

> ID：13322967
> 
> 赞同：2
> 
> 时间：2012-11-10T14:37:57.557
> 
> 标签：java, eclipse, algorithm, md5

我想将 MD5 哈希转换为字符串：

```
public String MD5ToString(String plain) {
    try {
        MessageDigest md = MessageDigest.getInstance("MD5");
        md.reset();
        md.update(plain.getBytes());
        byte[] digest = md.digest();
        BigInteger bigInt = new BigInteger(1,digest);
        String hashtext = bigInt.toString(16);
        // Now we need to zero pad it if you actually want the full 32 chars.
        while(hashtext.length() < 32 ){
            hashtext = "0"+hashtext;
        }
        return plain;
    } catch (Exception e) {
        System.out.println("Cannot encrypt String to Hash");
        e.printStackTrace();
    }
    return null;
} 
```

但是我只是把 Md5 拿回来了？什么是 ms 错误？

**更新：**

我将返回类型更改为 hashtext，但是当我想将哈希转换为字符串时，我只是得到另一个返回：

```
String: test
Hash: 098f6bcd4621d373cade4e832627b4f6
String: fb469d7ef430b0baf0cab6c436e70375 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-10T14:40:19.273

我没有仔细分析代码，但是您返回了`plain`没有更改的对象。`hashText`如果要从方法返回 MD5 字符串，则应返回object。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-10T14:40:07.603

要获得可以轻松发送或存储的可用字符串，通常的解决方案是将其编码为 base64（它比 hexa 短约 33%）。

这是您可以通过 Google 找到的众多教程之一：[http ://www.javatips.net/blog/2011/08/how-to-encode-and-decode-in-base64-using-java](http://www.javatips.net/blog/2011/08/how-to-encode-and-decode-in-base64-using-java)

在您的确切情况下，您似乎想要六边形表示，也许您只是想改变

```
return plain; 
```

到

```
return hashtext; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-10T23:52:59.257

> 我将返回类型更改为 hashtext，但是当我想将散列转换为字符串时，我只会得到另一个散列。

您似乎误解了哈希是什么。

*   一般来说，散列是一种不可逆的变换。您将散列转回原始字符串/对象/任何内容的副本...因为原始的大部分/大部分信息内容已被**丢弃**。事实上，有无数个可能的输入字符串散列到给定的散列值，并且没有办法知道哪一个是正确的。（他们都*很好*。）

*   对于像 MD5 这样的加密哈希函数，情况更糟。这些函数专门设计为不可逆的。或者更准确地说，它们的设计使得对于给定的哈希，恢复*可能输入*的问题在计算上是难以处理的。

现在碰巧MD5很弱......如果你有大量（但技术上可行）的计算资源和时间，就有可能反转散列。但是，这并没有解决第一个要点。

* * *

底线是，如果您希望能够恢复原始字符串，则需要对其进行加密而不是对其进行哈希处理。

# c# - 在 DLL“FreeImageNET”中找不到名为“FreeImage_GetFileTypeU”的入口点

> ID：13322969
> 
> 赞同：1
> 
> 时间：2012-11-10T14:38:19.350
> 
> 标签：c#, dllimport, freeimage

我刚刚下载了 FreeImage 3.15.4 Win32，我正在尝试浏览他们的 C# 示例。我有一台装有 Visual Studio Express 2010 的 64 位 Windows 7 机器，因此我将示例重新编译为 64 位，如此处所述（[http://www.sambeauvois.be/blog/2010/05/freeimage-and-x64-projects -是的，你可以](http://www.sambeauvois.be/blog/2010/05/freeimage-and-x64-projects-yes-you-can)/）。为了启动示例应用程序，我还必须更改 FreeImageStaticImports.cs 中“FreeImageLibrary”字符串的名称（生成的 DLL 被命名为 FreeImageNet，而不是像预期的那样为 FreeImage）。

但是，当我运行示例时，我收到“无法在 DLL 'FreeImageNET' 中找到名为 'FreeImage_GetFileTypeU' 的入口点”。每当我调用 FreeImage 函数时都会出错。这些示例引用了包含 DLLImport 语句的库，所以我不太确定这里出了什么问题。有没有人有 FreeImage 和 C# 的经验可以提供一些建议？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T17:47:42.580

> 我还必须更改“FreeImageLibrary”字符串的名称

你就是这样陷入困境的。这里涉及**两个**DLL。FreeImage.dll 是本*机*DLL，它包含 FreeImage_GetFileTypeU 导出。FreeImageNET.dll 是*托管*类库，其中包含本机 DLL 的包装器，它没有异常消息告诉您的导出。

您应该做的是从源代码重建本机 DLL，以便获得 64 位版本的 FreeImage.dll。那篇博客文章告诉你如何做到这一点。并提供下载，ymmv。

它还必须复制到构建输出文件夹中，以便在运行时可以找到它。一种简单的方法是使用 Project + Add Existing Item 将其添加到您的项目中，并将其“复制到输出目录”属性设置为“如果较新则复制”。

# iphone - 目标C的奇怪行为

> ID：13322974
> 
> 赞同：3
> 
> 时间：2012-11-10T14:39:01.783
> 
> 标签：iphone, objective-c, ios, ios5

实际上我来自java背景，我正在学习目标c我对目标C的奇怪行为感到非常困惑。“请阅读第三个问题，它很重要。”

问题是按顺序提供的，所以请按我和其他人可以理解的顺序给出答案。

**问题 1**
我有两个类派生自`NSObject`:`A`和`B`:

```
@interface A : NSObject 
@end                               

@interface B : NSobject
-(void)display; // It displays "I am class B"
@end 
```

现在，如果我这样做：

```
A *a = [[B alloc]init]; // Show warning not error (it must be illegal)
[a display];            // prints "I am class B" 
```

它调用了B类的显示方法。我认为它不应该发生，因为：

1.  `A`没有方法`display`。通过多态性。

2.  这可能是一个安全威胁，因为我正在创建任何类的引用并传递任何另一个类的对象并通过它访问数据。

3.  `Dog`当类实例获取类的对象时可能存在设计问题`Printer`，现在我正在实例上调用`print`方法。`Dog`

4.  我已经引用`NSArray`并传递了对象，`NSMutableArray`现在我`NSMutableArray`在这个实例上调用方法。

    [nsarr addObject:@:abc]; //看起来很奇怪

**问题 2**
如果我有`Foo`协议并且如果任何课程没有确认它。不应允许在协议引用中获取该类的对象。

```
@protocol Foo
@required
-(void)abc;
@end 
```

如果我打电话：

```
id<Foo> obj= [[B alloc]init]; // Shows warning ignore it for now as it must be illegal also
[obj display];                // It will call display method which should be illegal 
```

1.  它不应该发生，因为`B`不符合协议`Foo`并且`obj`正在获取`B`对象并调用`B`实例方法。由于多态性和安全性，我认为它非常糟糕

**问题 3**
如果我的类有一个类方法返回该类的未自动释放的对象，编译器会显示警告。如果我将该类（不符合协议）方法返回的对象传递给协议的引用。（它应该是一个错误）。

```
id<Foo> obj = [Abc aClassMethodReturnsObjectWhichNotAutoreleased]; //show warning 
```

它显示了一个很好的警告。 `Abc`不符合协议`Foo`

但

```
id<Foo> obj = [NSArray arrayWithObjects:@"abc",@"def",nil]; // It does **not** show a warning as it will return autorelease object. NSArray doesn't conform protocol Foo 
```

为什么上述对`NSArray`类的分配没有像上一个示例中显示的那样显示警告。

提前致谢。

**编辑**

**回答第三个问题：* *由于 NSArray 返回 id 对象，这将允许传入“id obj”，但在“aClassMethodReturnsObjectWhichNotAutoreleased”情况下，该方法返回“ABC *”指针，这就是编译器在这种情况下发出警告的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T14:48:31.560

正如您所发现的，Objective-C 和 Java 有非常不同的类型规则。

Java 是*严格静态类型*的，这意味着类型必须匹配，并且您永远不能进行类型转换规则不允许的赋值。

Objective-C使用*可选的静态类型进行**动态类型化*。您可以随时跳出类型系统。在某些情况下，编译器会发出警告，但仍然允许。

 *这就是您看到这种行为的原因。Objective-C 并没有被破坏，它只是与你从 Java 中知道的规则不同。

Apple 有很多关于特定规则的文档，也许您想阅读[启用静态行为](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/Chapters/ocStaticBehavior.html)。

这里有更多关于动态与静态类型的资源：

[动态类型语言与静态类型语言](https://stackoverflow.com/questions/125367/dynamic-type-languages-versus-static-type-languages)以及[人们发现动态语言有什么吸引人的地方？](https://stackoverflow.com/questions/42934/what-do-people-find-so-appealing-about-dynamic-languages)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-10T15:58:14.800

**问题一：**

```
A *a = [[B alloc]init]; //Show warning not error (it must be illegal)
[a display];  //prints "I am class B" 
```

`A`在这里，您为名为 的变量使用静态类型`a`。然后，您将不同类型的对象 ( `B`) 分配给变量。

与 java 不同，Objective-C 不**强制执行**静态类型要求，但是它会在编译时**警告**您，因为编译器检测到声明的类型和对象的实际类型之间的差异。它很高兴地将 B 对象填充到您的变量中，因此`a`现在指向`B`您创建的对象。一旦程序被编译并运行（在运行时），`A *a`被视为与`id a`.

Objective-C 的另一个特点是您可以随时向任何对象发送任何消息。这是 Objective-C 动态特性的一部分。显然，在某些情况下，向对象发送错误消息会导致*坏事*(tm) 发生，因此您需要确保只发送适当的消息。有各种函数可以在运行时测试对象的类，甚至可以在发送之前测试它是否能够处理特定消息，以防止出现*坏事*。如果您使用的是静态类型（如本例所示），那么编译器会发出**警告**，告诉您您可能犯了错误，应该检查代码。

**问题2：**

这实际上与问题 1 非常相似。编译器警告您，您正在为变量分配看似不正确的值，但是在运行时您可以向任何对象发送任何消息，因此它将适用于实际对象而不是类型声明中的“预期”对象。

**问题 3：**

好问题。我原以为你也会在那里收到警告。也许其他人可以在这方面提供帮助。我的第一个想法是这是一个错误，应该这样报告，但可能有一个我不知道的原因......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-10T14:48:11.390

> ```
> A *a = [[B alloc]init]; //Show warning not error (it must be illegal)
> [a display];  //prints "I am class B" 
> ```

因为您从具有显示属性的 B 类初始化变量。这是正确的*

# javascript - Javascript For循环问题

> ID：13322979
> 
> 赞同：1
> 
> 时间：2012-11-10T14:39:30.487
> 
> 标签：javascript, asynchronous, for-loop

我试图以 200 毫秒的间隔单击每个项目，我编写了以下脚本，但是 For 循环似乎存在问题。有人请告诉我你认为它有什么问题。

```
function clickLink(elm) {
    var evt = document.createEvent('MouseEvents');
    evt.initMouseEvent('click', true, false, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);
    elm.dispatchEvent(evt);
}

function sel() {
    elms = document.getElementsByClassName('uItem');
    var inputs= elms;
    var howbig= elms.length;
    console.log(howbig);

    for (var i=250;i<elms.length;i++)
    {
        setTimeout(clickLink(inputs[i]),200)
    }; 
```

页面上有 1400 个 uItem 。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T15:16:57.403

最干净的解决方案就是让你的`clickLink`函数返回一个函数。

```
function clickLink(elm) {
    return function() {
        var evt = document.createEvent('MouseEvents');
        evt.initMouseEvent('click', true, false, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);
        elm.dispatchEvent(evt);
    };
} 
```

如果需要间隔，则错开计时器：

```
var start = 250
for (var i=start;i<elms.length;i++) {
    setTimeout(clickLink(elms[i]), 200 * (i - start))
} 
```

或放弃循环，并使用`setInterval`：

```
var i = 250,
    len = inputs.length;
var itvl = setInterval(function() {
    clickLink(elms[i++]);
    if (i >= len)
        clearInterval(itvl);
}, 200); 
```

并回到你原来的`clickLink`功能

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-10T15:13:53.263

```
function sel() {
  var elems = document.getElementsByClassName('uItem');
  for (var i = 0; i < elems.length; i += 1) {
    setTimeout(function (el) {
      return function () {
        clickLink(el);
      };
    }(elems[i]), i * 1000);   
  };
} 
```

演示：http: [//jsfiddle.net/4hYWy/](http://jsfiddle.net/4hYWy/)

* * *

*小提示*：我不喜欢这些结构（计算示例中的延迟）。但它非常接近原始代码，我选择的解决方案可能会使其过于复杂。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-10T14:58:52.030

如果您使用的是最新版本的 JavaScript，最简单的方法是使用[bind](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)。这将创建一个函数对象，其中绑定了参数，这些参数在`bind`调用时计算，而不是稍后计算。因此，您想要的行是：

```
setTimeout( clickLink.bind( null, inputs[i] ),  /* delay expression here */ ) 
```

您可以显式地创建绑定函数，但这很丑陋，并且只有在强烈要求支持旧的 JavaScript 解释器时才应该这样做。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-10T14:59:56.890

的范围存在问题`ì`，延迟需要相应地增加以具有 200 毫秒的间隔，以及期望函数作为参数`i`的事实。`setTimeout`

```
 for (var i=250;i<elms.length;i++)
    {
        setTimeout((function() {
            var j = i // keep i as j in this closure
            return function() { // return the right function
                clickLink(inputs[j])
            }
        })(),200 * i) // set the delay depending on i
    }; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-10T15:30:20.893

此代码等待 200 毫秒，执行回调并准备 200 毫秒后执行的新回调。第二个回调在调用 400ms 后执行`sel`，以此类推。

```
 var callback = function(i) {
        return function() {
            if (i < elms.length) {
                clickLink(inputs[i]);
                setTimeout(callback(i + 1), 200);
            }
        };
    };
    setTimeout(callback(250), 200); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-10T14:54:26.717

你这样做的方式不会让你每 200 毫秒点击一次，你将几乎同时注册所有点击（循环最后一次迭代 1000 个项目的时间，几乎是立即）所以你基本上会得到你的 1000+ aprox。单击事件几乎同时触发，我认为这可能会导致问题，因此要确保它们在大约 200 毫秒内执行一次。做这个：

```
window.i=250;
for (var i=250;i<elms.length;i++)
{
setTimeout(function() {
   clickLink(inputs[window.i]);
   window.i++;
},200 * (i-249)); //Here we make sure events are spaciated 200ms each approx.
}; 
```

**更新：** ~~更新了要传递的匿名函数，`i`以避免注释中提到的关闭问题。~~

**更新 2**：`window.i`在匿名函数中添加了解决`i`范围问题

**更新 3**：更新了我上面的代码以修复触发每个点击事件的时间间隔，我们正在使用`200 * i`但只有`i`从零开始才是正确的，这里它从 250 开始，所以正确的形式是`200 * (i-249)`

尽管有一些评论，但`i`它已解决的范围问题`window.i`，请参阅此处的测试[https://tinker.io/98fd4/1](https://tinker.io/98fd4/1)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-11-10T15:29:46.097

没有范围问题或计算正确的间隔。

```
function sel() {
    var elms = document.getElementsByClassName('uItem'),
        i = -1,
        I = elms.length,

        rec = function () {
            if ( i++ < I ) {
                clickLinks(elms[i]);
                setTimeout(rec, 200);
            }
        };

    rec();
} 
```

[http://jsfiddle.net/joplomacedo/cqfxH/](http://jsfiddle.net/joplomacedo/cqfxH/)

# java - Java - 查找用于生成特定行的 IN 子句的参数

> ID：13322980
> 
> 赞同：1
> 
> 时间：2012-11-10T14:39:41.890
> 
> 标签：java, sql, jdbc

从 XML 文件中获取查询后，我正在触发查询。该查询有一个 IN 子句，我将从另一个表中获取的数百个参数传递给该子句。现在我检索了数千条记录。想知道是否有办法找出用于检索特定行的特定 IN 子句参数。

对于 EXP - 假设我触发查询“从 d IN (p,q,r) 的表中选择 a、b、c”

PS - 上面的查询是一个示例查询，用于清除我的问题，而不是我在程序中使用的查询。正如我已经提到的，我正在使用的查询要复杂得多，并且是从 XML 文件中动态获取的。

现在可以说，我得到三行 Row1、Row2、Row3。想知道使用哪个 IN 参数（p、q 或 r）生成 Row1。至于第 2 行和第 3 行。

希望我的问题很清楚:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T22:10:26.300

我想对于大多数数据库来说，没有直接的方法可以找到它。但是，您可以使用`CASE`语句来模拟它。我认为 syntak 取决于供应商。

```
Select a,b,c,
  CASE
    WHEN d = p THEN 'p'
    WHEN d = q THEN 'q'
    WHEN d = r THEN 'r'
  END as selcol
from Table where d IN (p,q,r)' 
```

您可以编写一个功能相同的函数。

# arrays - 使用扫描仪将文本文件读入数组：空指针异常

> ID：13322982
> 
> 赞同：0
> 
> 时间：2012-11-10T14:39:49.560
> 
> 标签：arrays, file, text, java.util.scanner

我试图读取存档文件并将其传递给数组，但是当我尝试访问数组 [0] 时，我不断收到空指针异常。当我要求 java 打印数组 [0] 时，它显示为空。这是我阅读文本文件的方式：

```
int lines= 0;
while(s1.hasNext()) {String line=s1.next(); lines ++; } // The number of lines

int i= 0;

char [][] array= new char [lines][]; 
if (f.exists()) {
while (s1.hasNext()) {
String line= s1.next(); 

int m = line.length();

    for (int j = 0; j < m; j++) {
        array[i][j]=line.charAt(j);
    }

  i++;

} 

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T14:45:25.757

`array[0]`必须是`null`，因为您没有为此分配内存。

还有一些问题：

第二个`while(s1.hasNext())`循环永远不会执行，因为第一个循环将读取整个文件，当它结束时，`s1.hasNext()`将返回`false`. 所以第二个循环永远不会运行。

`array``lines`以数组数量启动`char`，但没有一个数组被初始化。所以他们都是`null`。当您尝试访问其中任何一个时，您肯定会得到一个`NullPointerException`!

# maven - 在 webapp 中部署和运行嵌入式 mule（Mule twitter 集成）

> ID：13322986
> 
> 赞同：0
> 
> 时间：2012-11-10T14:40:18.553
> 
> 标签：maven, twitter, esb, mule

嗨，我是 Mule 的新手！我想运行这个简单的应用程序（从 url 接收输入并使用 twitter 连接器发布到我的 twitter 帐户）。我尝试首先将它部署在 CloudHub 上，它可以工作[http://twitterconnector.cloudhub.io/addtweet?mymessage=firsttweet](http://twitterconnector.cloudhub.io/addtweet?mymessage=firsttweet) 之后我想尝试在 Tomcat 上部署，所以我使用 maven 创建了简单的 webapp，并将 Mule 的所有必需依赖项放在 pom 中.xml，设置 web.xml 和 mule-config.xml 文件，当我转到 localhost:8181/easymule-test/services/addtweet?mymessage=firsttweet 它不工作！

有人可以帮助/解释问题所在吗？比你提前！！这是流程：

```
 <flow name="twitterconnectorFlow1" doc:name="twitterconnectorFlow1">
  <servlet:inbound-endpoint path="addtweet" responseTimeout="10000" doc:name="Servlet"/>
   <twitter:update-status config-ref="test_ECAccount" status="#[header:INBOUND:mymessage]" doc:name="Twitter Connector"/>
   <expression-transformer evaluator = "groovy" expression="payload.toString()" returnSourceIfNull="true" doc:name="Expression"/>
    </flow> 
```

**编辑：** web.xml 配置片段

```
 <web-app>
  <display-name>easymule-test</display-name>
  <context-param>
    <param-name>org.mule.config</param-name>
    <param-value>/WEB-INF/muleconfig.xml</param-value>
</context-param>

   <listener>
        <listener-class>org.mule.config.builders.MuleXmlBuilderContextListener</listener-class>
    </listener>

    <servlet>
        <servlet-name>ajax</servlet-name>
        <servlet-class>org.mule.transport.ajax.container.MuleAjaxServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet>
        <servlet-name>muleServlet</servlet-name>
        <servlet-class>org.mule.transport.servlet.MuleReceiverServlet</servlet-class>
        <load-on-startup>2</load-on-startup>
    </servlet>

    <servlet>
        <servlet-name>muleResources</servlet-name>
        <servlet-class>org.mule.transport.ajax.MuleJarResourcesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>muleServlet</servlet-name>
        <url-pattern>/services/*</url-pattern>
    </servlet-mapping>

    <servlet-mapping>
        <servlet-name>muleResources</servlet-name>
        <url-pattern>/mule-resource/*</url-pattern>
    </servlet-mapping>

    <servlet-mapping>
        <servlet-name>ajax</servlet-name>
        <url-pattern>/ajax/*</url-pattern>
    </servlet-mapping>
</web-app> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T23:37:01.283

servlet 端点路径是路径而不是地址，因此请使用：

```
<servlet:inbound-endpoint path="sendtweet" ... 
```

假设：

*   您的网络应用程序部署在`/easymule-test`上下文中，
*   并在端口上运行`8181`
*   并且`org.mule.transport.servlet.MuleReceiverServlet`绑定到`services`路径

然后您将访问上述端点`http://localhost:8181/easymule-test/services/sendtweet`。

# ssl - 具有多个域的通配符 SSL

> ID：13322987
> 
> 赞同：1
> 
> 时间：2012-11-10T14:40:18.710
> 
> 标签：ssl, openssl, apache, mod-ssl

我有一个 CentOS/Apache+OpenSSL 服务器。我托管两个带有通配符子域的域名（应用程序逻辑显示正确的站点），例如

https://*.testing1.com

https://*.testing2.com

它在 HTTP 上运行良好：-

```
 <VirtualHost *:80>
  # Admin email, Server Name (domain name) and any aliases
  ServerAdmin webmaster@testing1.com
  ServerName  testing1.com
  ServerName  testing2.com

  ServerAlias *.testing1.com *.testing2.com

  # Index file and Document Root (where the public files are located)
  DirectoryIndex index.html index.php
  DocumentRoot /home/app/public_html/public

</VirtualHost> 
```

我已经为 testing1.com 和 testing2.com 购买了两个通配符 SSL 证书，但我不确定如何在这个结构中设置它：-

```
 <VirtualHost *.testing1.com:443>
     SSLEngine On
     SSLCertificateFile /etc/httpd/ssl/*.testing1.com.crt
     SSLCertificateKeyFile /etc/httpd/ssl/*.testing1.com.key
     SSLCACertificateFile /etc/httpd/ssl/geotrust.cer

     ServerAdmin john@testing1.com
     ServerName testing1.com
     ServerAlias *.testing1.com

        DirectoryIndex index.html index.php
        DocumentRoot /home/app/public_html/public

  </VirtualHost>

   <VirtualHost *.testing2.com:443>
     SSLEngine On
     SSLCertificateFile /etc/httpd/ssl/*.testing2.com.crt
     SSLCertificateKeyFile /etc/httpd/ssl/*.testing2.com.key
     SSLCACertificateFile /etc/httpd/ssl/geotrust.cer

     ServerAdmin john@testing2.com
     ServerName testing2.com
     ServerAlias *.testing2.com

        DirectoryIndex index.html index.php
        DocumentRoot /home/app/public_html/public

  </VirtualHost> 
```

SSL 的上述内容不适用于 *.testing1.com 定义，也不适用于 testing1.com。

我还需要为 testing2.com 重复此操作

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T22:32:28.800

基于名称的虚拟主机和 SSL 仅在所有虚拟主机都在同一个域中并且您拥有该域的通配符 SSL 证书时才有效。

但是您有 2 个不同的域。

在这种情况下，只有为每个启用 SSL 的虚拟主机提供它自己的 IP 地址，它才会起作用。所以你应该使用基于 IP 的虚拟主机，而不是基于名称的。

说明：所请求的 ServerName 包含在 HTTP 请求标头中，但在此之前必须已设置 SSL 加密。因此，ServerName 仅在设置加密后可用。因此，Apache 永远无法知道您提供了哪个 SSL 证书，而只会使用该特定 IP 地址上可用的第一个证书。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-09T04:52:28.130

使用单个专用 IP，我们可以在 centos + apache2.2 服务器中配置基于域的通配符 SSL。

希望下面的配置对大家有帮助！！

```
NameVirtualHost IP:80
NameVirtualHost IP:443 
```

**域 1**

```
<VirtualHost IP:80>
        ServerName      abc.domain1.com
        DocumentRoot    /var/www/html/domain1
</VirtualHost>
<VirtualHost IP:443>
        ServerName      *.domain1.com
        DocumentRoot    /var/www/html/domain1
        SSLEngine       On
        SSLCipherSuite ALL:!ADH:RC4+RSA:+HIGH:+MEDIUM:+LOW:+SSLv2:+EXP:+eNULL
        SSLCertificateFile      /var/www/html/domain1/cert/5465456.crt
        SSLCertificateKeyFile   /var/www/html/domain1/cert/domain1.com.key
        SSLCertificateChainFile /var/www/html/domain1/cert/g2-g1.crt
</VirtualHost> 
```

**域 2**

```
<VirtualHost IP:80>
        ServerName      abc.domain2.com
        DocumentRoot    /var/www/html/domain2
</VirtualHost>
<VirtualHost IP:443>
        ServerName      abc.domain2.com
        DocumentRoot    /var/www/html/domain2
        SSLEngine       On
        SSLCipherSuite ALL:!ADH:RC4+RSA:+HIGH:+MEDIUM:+LOW:+SSLv2:+EXP:+eNULL
        SSLCertificateFile      /var/www/html/domain2/cert/5465456.crt
        SSLCertificateKeyFile   /var/www/html/domain2/cert/domain1.com.key
        SSLCertificateChainFile /var/www/html/domain2/cert/g2-g1.crt
</VirtualHost> 
```

# asp.net - 将 SSL 应用于已构建的网站是否容易？

> ID：13322989
> 
> 赞同：1
> 
> 时间：2012-11-10T14:40:24.217
> 
> 标签：asp.net, ssl

我正在用 ASP.NET 构建一个网站，我希望它有用户，所以我正在创建一个登录页面、数据库、aspx 页面等。

但我也想稍后实施 SSL 以提高安全性，但我不知道这是否会是一个困难或烦人，我从来没有为网站实施 SSL。所以我想知道，在我的网站已经建成之后，将 SSL 应用到我的网站是“容易”还是“困难”？

我是否必须从一开始就考虑使用 SSL 来构建我的网站，还是我可以事后了解它然后应用它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T15:43:05.233

您可以在部署网站后配置 SSL。在构建您的网站时无需采取额外措施，当然它很容易实现。SSL 配置用于加密与您的网站的连接。您可以购买或使用自签名证书来加密连接。尝试这些链接以获取更多信息：

[http://www.iis.net/learn/manage/configuring-security/how-to-set-up-ssl-on-iis](http://www.iis.net/learn/manage/configuring-security/how-to-set-up-ssl-on-iis)

[http://support.godaddy.com/help/article/4801/installing-an-ssl-certificate-in-microsoft-iis-7](http://support.godaddy.com/help/article/4801/installing-an-ssl-certificate-in-microsoft-iis-7)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-10T14:57:23.347

是的，您可以轻松地将其添加到现有站点。只需获取证书，在 IIS 中设置它，就可以了：

[如何将 HTTPS 添加到我的 asp.net 网站以进行帐户登录？](https://stackoverflow.com/questions/5921908/how-do-i-add-https-to-my-asp-net-website-for-account-login)

[使用 ASP.NET 设置 SSL - 第 1 部分（共 3 部分）](http://www.youtube.com/watch?v=Q_gVxaXHM7U)

# asp.net-mvc - MVC4 WebAPI + JSON 认证

> ID：13322992
> 
> 赞同：2
> 
> 时间：2012-11-10T14:40:43.030
> 
> 标签：asp.net-mvc, json, post, forms-authentication

我创建了一个新的 MVC4 Web 项目，并且它在用户登录等情况下都能正常工作。

我在上面添加了一个 WebAPI，它将从实体框架返回数据。

我希望能够从移动应用程序登录，能够调用 API 并根据登录的用户返回结果。

我向 Account/Login 发送了一个 POST 请求，内容类型为 application/json；charset=utf-8，但是我不断收到以下错误消息：

>

> 所需的防伪 cookie“__RequestVerificationToken”不存在。说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.Web.Mvc.HttpAntiForgeryException：所需的防伪 cookie“__RequestVerificationToken”不存在。

我将如何解决这个问题？或生成防伪cookie？

我在网上看过，但这些涉及基于 asp.net 的解决方案 - 我将从 iOS / Android 发出这些请求..

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T03:59:03.743

听起来您实际上并没有解决问题。WCF 身份验证服务与防伪令牌无关。防伪令牌是一种用于阻止称为**跨站点请求伪造 (CSRF)**的技术。在[Steve Sanderson 的博客](http://blog.stevensanderson.com/2008/09/01/prevent-cross-site-request-forgery-csrf-using-aspnet-mvcs-antiforgerytoken-helper/)上有一个很好的解释。实现的基础是您在视图中有一个标签（请参见代码片段），然后`[ValidateAntiForgeryToken]`是您希望 MVC 在其上“强制”存在令牌的操作的属性：

```
<% using(Html.Form("UserProfile", "SubmitUpdate")) { %>
    <%= Html.AntiForgeryToken() %>
    <!-- rest of form goes here -->
<% } %> 
```

您看到该异常的原因是您在不包括防伪令牌的情况下发布到帐户/登录。如果您尝试通过 Web API 方法处理登录/身份验证，您仍然可以使用防伪令牌。只需确保将[其传递给您的视图](http://feetens.wordpress.com/2012/07/31/anti-forgery-with-web-api-in-asp-net-mvc-4-rc/)以 POST 回 API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T00:11:07.380

解决了：

我改用 WCF 身份验证服务：

[http://msdn.microsoft.com/en-us/library/bb398990(VS.100).aspx](http://msdn.microsoft.com/en-us/library/bb398990(VS.100).aspx)

# c - 扩展正则表达式是否支持反向引用？

> ID：13322996
> 
> 赞同：8
> 
> 时间：2012-11-10T14:41:29.577
> 
> 标签：c, regex, posix

维基百科[说](http://en.wikipedia.org/wiki/Regular_expression)扩展的正则表达式“放弃了对反向引用的支持”，因此必须使用“基本”正则表达式模式来启用这些。但是，似乎许多实现*确实*支持扩展正则表达式的反向引用。例如，对于 Ubuntu Precise 上的 gcc 4.6，它们是受支持的。FreeBSD 实现[似乎](http://www.manpagez.com/man/7/re_format/)只在基本模式下支持它们。

[Boost 说](http://www.boost.org/doc/libs/1_52_0/libs/regex/doc/html/boost_regex/syntax/basic_extended.html)（并且似乎与 Wikipedia 一致）扩展的正则表达式不支持反向引用，但 Boost::Regex 将它们作为扩展添加。

这只是标准中定义不明确的部分，每个实现都有不同的解释吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-13T06:19:08.243

正如其他人已经指出的那样，很明显 POSIX ERE 不支持反向引用。

OpenGroup *Base Specifications Issue 7*中给出的不向 ERE 添加反向引用的理由如下：

> 有人建议，除了区间表达式之外，还应将反向引用 ( '\n' ) 添加到 ERE。这被标准开发人员拒绝，因为这可能会降低共识。

引自：[基本原理：基本定义：扩展正则表达式](http://pubs.opengroup.org/onlinepubs/9699919799/xrat/V4_xbd_chap09.html)

此限制的主要原因是允许将 POSIX ERE 转换为确定性有限自动机 (DFA)，实际上，在 Unix 中 ERE 的原始实现是作为 DFA 完成的。使用 DFA 可以保证实现的性能。与（无限数量的）反向引用的模式匹配是一个 NP 难题，甚至可能是一个 NP 完全问题。如果为 ERE 提议反向引用，那么 POSIX 标准委员会将永远无法达成共识，因为这将迫使所有使用原始 Unix 实现的公司将其代码更改为非确定性实现并放弃其性能保证，并且一些这些公司中有委员会成员。

还注意到，RE 中的反向引用对于用户或实施者来说都不是直观的，而且实际上它们比现在更经常引起极度混乱。[例如，参见RE-Interpretation: The Dark Corners](http://public.research.att.com/~gsf/testregex/re-interpretation.html#The%20Dark%20Corners)中给出的示例

**注意：** RE 中的反向引用与 sed 等工具中替换文本中对子模式的引用不同。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-12T15:53:12.547

根据[IEEE/Open Group 标准](http://pubs.opengroup.org/onlinepubs/009695399/basedefs/xbd_chap09.html#tag_09_04)，扩展正则表达式不支持反向引用（第 9.5.1 节），尽管有几个现实世界的实现支持。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T15:57:51.313

根据[POSIX.1-2008 标准](http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap09.html)，只有基本正则表达式支持反向引用。 [第 9.3.6 节](http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap09.html#tag_09_03_06)描述了它们如何在 BRE 中工作。扩展正则表达式部分根本没有提到它们，第 9.5.1 节中的[语法词汇约定](http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap09.html#tag_09_05_01)说反向引用标记仅适用于 BRE。

# c++ - 如何在 Scintilla 中隐藏换行符？

> ID：13322997
> 
> 赞同：1
> 
> 时间：2012-11-10T14:41:29.630
> 
> 标签：c++, scintilla

我正在为基于 Scintilla 的编辑器创建一个深色主题。我已经成功地定义了所有我想要的样式，除了行尾。换句话说，尽管我的编辑器中的所有文本都显示在深色背景上，但在每一行的末尾都有一个白色填充的小矩形。

我相信这个矩形与换行符有关，因为即使是空行也有它。但没有显示其他控制字符。

那么，我怎样才能摆脱这个白色矩形呢？

我尝试将 ControlCharSymbol 更改为其他值（低于或高于 0x20）但没有得到任何结果。

注意：我刚刚注意到，如果将空格和制表符设置为不可见，也会发生同样的情况。如果它们设置为可见，则 Scintilla 将它们显示为“.”。和 '--->' 使用我定义的颜色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T17:31:01.033

如果您已经为词法分析器定义的所有样式设置了背景，您也可以尝试为[STYLE_DEFAULT](http://www.scintilla.org/ScintillaDoc.html#StyleDefinition)[设置背景](http://www.scintilla.org/ScintillaDoc.html#SCI_STYLESETBACK)。

如果这不起作用，可以使用[SCI_SETWHITESPACEBACK](http://www.scintilla.org/ScintillaDoc.html#SCI_SETWHITESPACEBACK)为所有空白全局设置背景。