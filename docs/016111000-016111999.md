# StackOverflow 问答 16111000-16111999

# asp.net-mvc - MVC Code First Entity Frame Work 从主对象引用相同的对象两次

> ID：16111001
> 
> 赞同：1
> 
> 时间：2013-04-19T18:12:01.370
> 
> 标签：asp.net-mvc, entity-framework-5, code-first

有一个代码优先的 MVC4 模型，需要外键查找同一个表。即我的项目表有两列（BaseFiscalId 和IMITApprovalCycleId），它们引用同一个表，即FiscalYears。我如何在代码中定义它。

目前我有以下内容：

```
public class Project
{
    [Required]
    public int Id { get; set; }

    [Required]
    public int InitiativeId { get; set; }

    [Required]
    public String ProjectName { get; set; }

    [Required]
    public int SubPortFolioId { get; set; }

    [Required]
    public String Description { get; set; }

    [Required]
    public int ProjectTypeId { get; set; }

    [Required]
    public int FundingSourceId { get; set; }

    [Required]
    public int FundingPhaseAId { get; set; }

    [Required]
    public int ApprovalStatusId { get; set; }

    [Required]
    public int IMITApprovalProcessId { get; set; }

    [Required]
    public int IMITApprovalCycleId { get; set; }

    [Required]
    public int AccountableExecutiveId { get; set; }

    [Required]
    public int LeadMinistryId { get; set; }

    [Required]
    public int BaseFiscalId { get; set; }

    [Required]
    public int TotalSpentToBase { get; set; }

    //Navigation Properties --Child Projects
    public ICollection<Spend> Spends { get; set; }

    public SubPortfolio SubPortfolio { get; set; }
    public ProjectType ProjectType { get; set; }
    public FundingPhase FundingPhase { get; set; }
    public FundingSource FundingSource { get; set; }
    public ApprovalStatus ApprovalStatus { get; set; }
    public IMITApprovalProcess IMITApprovalProcess { get; set; }
    public FiscalYear IMITApprovalCycle { get; set; }
    public FiscalYear BaseFiscal { get; set; }
    public Portfolio Portfolio { get; set; }
    public Executive AccountableExecutive { get; set; }
    public Ministry LeadMinistry { get; set; }
    public Initiative Initiative { get; set; }

} 
```

会计年度类

```
public class FiscalYear
{
    [ScaffoldColumn(false)]
    public int Id { get; set; }
    [Required]
    public String FiscalYearName { get; set; }
} 
```

这将产生以下 SQL：

```
CREATE TABLE [dbo].[Projects] (
       [Id]                     INT            NOT NULL,
       [InitiativeId]           INT            NOT NULL,
       [ProjectName]            NVARCHAR (MAX) NOT NULL,
       [SubPortFolioId]         INT            NOT NULL,
       [Description]            NVARCHAR (MAX) NOT NULL,
       [ProjectTypeId]          INT            NOT NULL,
       [FundingSourceId]        INT            NOT NULL,
       [FundingPhaseAId]        INT            NOT NULL,
       [ApprovalStatusId]       INT            NOT NULL,
       [IMITApprovalProcessId]  INT            NOT NULL,
       [IMITApprovalCycleId]    INT            NOT NULL,
       [AccountableExecutiveId] INT            NOT NULL,
       [LeadMinistryId]         INT            NOT NULL,
       [BaseFiscalId]           INT            NOT NULL,
       [TotalSpentToBase]       INT            NOT NULL,
       [FundingPhase_Id]        INT            NULL,
       [Portfolio_Id]           INT            NULL,
       [Initiative_Id]          INT            NULL,
       CONSTRAINT [PK_dbo.Projects] PRIMARY KEY CLUSTERED ([Id] ASC),
       CONSTRAINT [FK_dbo.Projects_dbo.SubPortfolios_SubPortFolioId] FOREIGN KEY ([SubPortFolioId]) REFERENCES [dbo].[SubPortfolios] ([Id]) ON DELETE CASCADE,
       CONSTRAINT [FK_dbo.Projects_dbo.ProjectTypes_ProjectTypeId] FOREIGN KEY ([ProjectTypeId]) REFERENCES [dbo].[ProjectTypes] ([Id]) ON DELETE CASCADE,
       CONSTRAINT [FK_dbo.Projects_dbo.FundingPhases_FundingPhase_Id] FOREIGN KEY ([FundingPhase_Id]) REFERENCES [dbo].[FundingPhases] ([Id]),
       CONSTRAINT [FK_dbo.Projects_dbo.FundingSources_FundingSourceId] FOREIGN KEY ([FundingSourceId]) REFERENCES [dbo].[FundingSources] ([Id]) ON DELETE CASCADE,
       CONSTRAINT [FK_dbo.Projects_dbo.ApprovalStatus_ApprovalStatusId] FOREIGN KEY ([ApprovalStatusId]) REFERENCES [dbo].[ApprovalStatus] ([Id]) ON DELETE CASCADE,
       CONSTRAINT [FK_dbo.Projects_dbo.IMITApprovalProcesses_IMITApprovalProcessId] FOREIGN KEY ([IMITApprovalProcessId]) REFERENCES [dbo].[IMITApprovalProcesses] ([Id]) ON DELETE CASCADE,
       **CONSTRAINT [FK_dbo.Projects_dbo.FiscalYears_Id] FOREIGN KEY ([Id]) REFERENCES [dbo].[FiscalYears] ([Id])**,
       CONSTRAINT [FK_dbo.Projects_dbo.Portfolios_Portfolio_Id] FOREIGN KEY ([Portfolio_Id]) REFERENCES [dbo].[Portfolios] ([Id]),
       CONSTRAINT [FK_dbo.Projects_dbo.Executives_AccountableExecutiveId] FOREIGN KEY ([AccountableExecutiveId]) REFERENCES [dbo].[Executives] ([Id]) ON DELETE CASCADE,
       CONSTRAINT [FK_dbo.Projects_dbo.Ministries_LeadMinistryId] FOREIGN KEY ([LeadMinistryId]) REFERENCES [dbo].[Ministries] ([Id]) ON DELETE CASCADE,
       CONSTRAINT [FK_dbo.Projects_dbo.Initiatives_Initiative_Id] FOREIGN KEY ([Initiative_Id]) REFERENCES [dbo].[Initiatives] ([Id]) 
```

请注意，不是为 FiscalYears 创建两个 FK 关系，而是为 BaseFiscal 和 IMITApprovalCycle 分别创建一个，它仅在项目表中不存在的 Fiscal_Id 上创建。

谢谢

克雷格

# c# - (C#) 读取一行的一部分

> ID：16111009
> 
> 赞同：0
> 
> 时间：2013-04-19T18:12:30.570
> 
> 标签：c#, text, line, streamreader

我有一个文本文件，在其中，它看起来像：

```
xxxx:value 
```

我想读的是值，我试图操纵：

```
using System;
using System.IO;

class Test
{
    public static void Main()
    {
        try
        {
            using (StreamReader sr = new StreamReader("TestFile.txt"))
            {
                String line = sr.ReadToEnd();
                Console.WriteLine(line);
            }
        }
        catch (Exception e)
        {
            Console.WriteLine("The file could not be read:");
            Console.WriteLine(e.Message);
        }
    }
} 
```

但是我这样做的运气并不好，任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T18:21:05.370

您需要遍历每一行并拆分每一行......可能应该检查每一行是否为空并且它确实包含一个冒号......但这可能是不必要的，具体取决于您的数据......

```
using System;
using System.IO;

class Test
{
    public static void Main()
    {
            try
            {
                using (StreamReader sr = new StreamReader("TestFile.txt"))
                {
                    while (!sr.EndOfStream)
                    {
                        String line = sr.ReadLine();
                        if (line != null && line.Contains(":"))
                            Console.WriteLine(line.Split(':')[1]);
                    }
                }
            }
            catch (Exception e)
            {
                Console.WriteLine("The file could not be read:");
                Console.WriteLine(e.Message);
            }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T18:16:26.183

```
 using System;
    using System.IO;

    class Test
    {
        public static void Main()
        {
            try
            {
                using (StreamReader sr = new StreamReader("TestFile.txt"))
                {
                    String line = sr.ReadToEnd();
                    string[] array = line.Split(':');                    
                    Console.WriteLine(array[1]);
                }
            }
            catch (Exception e)
            {
                Console.WriteLine("The file could not be read:");
                Console.WriteLine(e.Message);
            }
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T18:16:56.840

尝试使用`string.Split()`：

```
Console.WriteLine(line.Split(':')[1]); 
```

# selenium - 在reportNG中显示路径而不是图片

> ID：16111010
> 
> 赞同：0
> 
> 时间：2013-04-19T18:12:31.790
> 
> 标签：selenium, webdriver, reportng

在使用 myeventlistner 测试用例失败后，我能够截取屏幕截图，但在 reportNG 我得到的是路径而不是图片。

请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-01T22:06:41.333

您是否尝试在 ReportNG 报告中插入一些 HTML 片段以显示图片？

默认情况下，ReportNG 将转义日志条目以避免标记问题。但是，如果您确定这是您想要做的并且它不会在其他地方引起问题，那么您可以通过将`org.uncommons.reportng.escape-output`属性设置为`false`.

# android - 为线性布局内的文本视图编写 onClick 事件

> ID：16111014
> 
> 赞同：0
> 
> 时间：2013-04-19T18:12:52.670
> 
> 标签：android, android-widget, textview, onclicklistener

我在 relativelayout 中有两个线性布局。每个线性布局包含三个文本视图。我想为两种线性布局中存在的所有文本视图编写 onclick 事件。请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T18:19:40.697

在所有 TextView 中添加以下属性

```
android:onClick="onClick" 
```

不要忘记将 id 设置为所有 TextView

然后从你的代码

```
public void onClick(View v){
      switch (v.getId()) {
          case R.id.tv1:
             // do somethong
                   break;
                 default:
                   break
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-30T14:42:00.713

所有文本视图都有一个通用的点击监听器。通过文本视图的 ID 从公共点击侦听器处理所有文本视图的点击事件。

样品 FYR。

```
findViewById(R.id.textview1_id).setOnClickListener(commonClickListener);
findViewById(R.id.textview2_id).setOnClickListener(commonClickListener);
findViewById(R.id.textview3_id).setOnClickListener(commonClickListener);

private OnClickListener commonClickListener = new OnClickListener() {
    @Override
    public void onClick(View v) {
        int selectedItemId = v.getId();
        switch (selectedItemId) {
        case R.id.textview1_id:
            // implement your code here.
            break;
        case R.id.textview2_id:
            // implement your code here.
            break;
        case textview3_id:
            // implement your code here.
            break;

        }
    }` 
```

# c++ - Opencv c++Template/Pattern Matching Scale and Rotation invariant

> ID：16111015
> 
> 赞同：1
> 
> 时间：2013-04-19T18:13:01.123
> 
> 标签：c++, opencv, scaling, template-matching

我想查看使用 openCv 和 c++ 的图像中是否存在模板。然而，由于拍摄图像的距离不同以及图像的位置不同，匹配不会正确发生。

这是我的代码：

```
IplImage* image    = cvLoadImage("C:/images/Photo0734.jpg", 1);
IplImage* templat  = cvLoadImage("C:/images/templatecoin.jpg", 1);
int percent =25;// declare a destination IplImage object with correct size, 
depth and  channels
IplImage* image3 = cvCreateImage( cvSize((int)((image->width*percent)/100) , 
(int)((image->height*percent)/100) ),image->depth, image->nChannels );

//use cvResize to resize source to a destination image
cvResize(image, image3);
IplImage* image2   = cvCreateImage(cvSize(image3->width, image3->height), 
IPL_DEPTH_8U,   1);
IplImage* templat2 = cvCreateImage(cvSize(templat->width, 
templat->height),   IPL_DEPTH_8U, 1); 

cvCvtColor(image3, image2, CV_BGR2GRAY);
cvCvtColor(templat, templat2, CV_BGR2GRAY);

int w = image3->width - templat->width + 1;
int h = image3->height - templat->height + 1;
result = cvCreateImage(cvSize(w, h), IPL_DEPTH_32F, 1);
cvMatchTemplate(image2, templat2, result, CV_TM_CCORR_NORMED);

double min_val, max_val;
CvPoint min_loc, max_loc;
cvMinMaxLoc(result, &min_val, &max_val, &min_loc, &max_loc);

cvRectangle(image3, max_loc, cvPoint(max_loc.x+templat->width, 
max_loc.y+templat->height), cvScalar(0,1,1), 1);

cvShowImage("src", image3);
//cvShowImage("result image", result);
cvWaitKey(0); 
```

请注意，我无法使用“垫子”。是否可以使用 IplImage* 并使代码对缩放和旋转保持不变？帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T18:18:28.353

让我们看看：

[SIFT 维基](http://en.wikipedia.org/wiki/Scale-invariant_feature_transform)

[筛选示例](https://stackoverflow.com/questions/5461148/sift-implementation-with-opencv-2-2)

[OpenCV SIFT 文档](http://docs.opencv.org/modules/nonfree/doc/feature_detection.html)

我认为这对你很有用。

# java - 迷宫java中的BFS算法

> ID：16111017
> 
> 赞同：-4
> 
> 时间：2013-04-19T18:13:04.633
> 
> 标签：java, breadth-first-search, maze

在输入中，我们有迷宫的长度和宽度，迷宫看起来像

```
A..#
##.#
#B.#
#### 
```

其中“#” - 是墙，A - 起点，B - 终点。在输出中，我们应该看到迷宫中最短路径的长度。我正在阅读很多代码示例，但我不理解它，因为在java中我只看到一个示例，它有队列，我不久前开始学习java并且我没有知道它。你能告诉我没有队列的例子吗？非常感谢 ：）

如果 BFS 不能在没有 Queque 的情况下工作，你能给我展示 DFS 算法的例子吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T18:38:40.773

如果您打算找到最短路径，则最好使用 BFS 而不是 DFS。

这与您正在使用的 Java 或 C 或其他语言无关。是概念。但在进行任何编码之前，@John 说，您最好先看看队列、最小队列、堆栈、列表和类似的东西（简称“数据结构”）。这些是编程的主要概念。

如果您有兴趣，请查看[Dijkstra 算法](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm)或[Bellman FordAlgorithm](http://en.wikipedia.org/wiki/Bellman_Ford)以了解众所周知的最短路径算法。

# c++ - C++ xml（我应该使用 msxml6 吗？我安装了 msxml6 但看不到它在哪里）

> ID：16111023
> 
> 赞同：1
> 
> 时间：2013-04-19T18:13:13.763
> 
> 标签：c++, xml, msxml6

我有几个关于 c++ xml 的问题。我正在使用 Visual Studio 2010。

1.  我应该使用 msxml6.dll 进行 c++ xml 解析吗？

2.  我已经安装了 msxml6.dll，但是我找不到它的安装位置。应该在 C:\Program Files (x86)\ 或 C:\Program Files\ 下看到一个名为 MSXML 6.0 的新目录？但我什么也没看到。但是，我在 C:\Windows\System32 中看到了 msxml6.dll。

3.  如何在我的 c++ 项目中添加对 msxml6.dll 的引用？

谢谢，ZAJ，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T21:11:26.483

我建议你使用更轻量级的 XML 库[——tinyXML](http://www.grinninglizard.com/tinyxml/)

MSXML 是一个 COM 服务器。您可以使用[import 指令](http://msdn.microsoft.com/en-us/library/8etzzkb6%28v=vs.71%29.aspx)包含它。您还可以使用 MSXML SDK 中必须包含的 MSXML.h 文件。要使用任何 COM 服务器，您应该调用两个函数：[CoInitialize](http://msdn.microsoft.com/en-us/library/windows/desktop/ms678543%28v=vs.85%29.aspx)和[CoCreateInstance](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686615%28v=vs.85%29.aspx)

# php - 文件上传在 IE8、IE9 中不起作用

> ID：16111028
> 
> 赞同：0
> 
> 时间：2013-04-19T18:13:32.933
> 
> 标签：php, internet-explorer

我正在尝试解决这个问题，但到目前为止我还没有运气。

我的文件上传适用于 Chrome、Mozilla、Safari，但不适用于 IE 8 或 9。它只是挂在 Internet Explorer 中，直到超时。代码工作如下。

在这里我正在寻找错误代码“ `0`”，这意味着它是成功的。如果用户做了任何事情，但选择了文档，它会执行下面的代码..如果它是一个文档，它会转到代码的 else 部分。

对于第一部分..我在我的变量中设置了新的文件路径。检查是否没有上传，如果没有，则向用户发送消息。如果成功，则将一些值插入表中。然后我使用我的函数 move_uploaded_file 将临时文件移动到我的目录。如果它是一个文档，那么我在 else 部分下面执行代码。我在哪里错了？任何想法都是有帮助的。

这是我的代码。

```
if ($_FILES['image']['error'] == 0) {

    if ($_POST['type'] != 'document') {

        $newFile = "/var/www/localhost/htdocs/digital-materials/images/products/".basename($_FILES['image']['name']);

        if (!move_uploaded_file($_FILES['image']['tmp_name'],$newFile)) {
            echo "<h1>Error uploading file ".$_FILES['image']['name']."</h1>$newFile<br />\n";
        } else {
            error_reporting(E_ALL);
            $escapedPost = array_map('mysql_real_escape_string', $_POST);
            extract($escapedPost);
            $sql = "INSERT INTO digital_materials (`itemName`,`itemDesc`,`imageURL`,`language`,`category`,`size`,`flagDesc`,`type`,`description`,`fileURL`) VALUES ('$itemName','$itemDesc','".basename($_FILES['image']['name'])."','$language','$category','".basename($_FILES['image']['size'])."','$itemDesc','$category','$itemDesc','".basename($_FILES['image']['name'])."')";
            $res = mysql_query($sql);
            move_uploaded_file($_FILES['image']['tmp_name'],$newFile);
            echo "<h1>File has been uploaded</h1><br />\n";
        }

    } else {

        print_r($_FILES);
        $newFile = "/var/www/localhost/htdocs/digital-materials/documents/".basename($_FILES['image']['name']);
        $file = $_FILES['image']['tmp_name'];
        move_uploaded_file($file,$newFile);

    }
} 
```

表单代码如下

```
<form method='post' action='digital-materials-admin.php' enctype='multipart/form-data'>
            <input type='hidden' name='newItem' value='1' />
            <div class='add-new-input'>
                <div>Item Name:</div><input type='text' name='itemName' />
            </div>
            <div class='add-new-input'>
                <div>File:</div><input type='file' name='image' />
            </div>
            <div class='add-new-input'>
                <div>Type:</div>
                    <select name='type'>
                        <option value='default'>Please Select a Type</option>
                        <option value='image'>Image</option>
                        <option value='Photos'>Photo</option>
                        <option value='Logos'>Logo</option>
                        <option value='document'>Document</option>
                    </select>
            </div>
            <div id='typeSelect'></div>
            <div class='add-new-input'>
            <div>Category</div>
                <select name='category'>
                    <option value='default'>Please Select a Category</option>
                    <option value='Logos'>Logos</option>
                    <option value='Presentations'>Presentations</option>
                    <option value='Photos'>Photos</option>
                    <option value='PDF'>PDF</option>
                    <option value='CAD'>Cad Drawing</option>
                    <option value='Word'>Word Documents</option>
                    <option value='Spreadsheets'>Spreadsheets</option>
                </select>
            </div>
            <div id='categorySelect'></div>
            <div class='add-new-input'>
                <div>Item Description:</div><textarea rows='3' cols='40' name='itemDesc'></textarea>
            </div>
            <div class='add-new-input'>
                <div>Language:</div><input type='text' name='language' id='language' />
            </div>
            <div class='add-new-input'>
                <div>Flag Text:</div><input type='text' name='flagDesc' />
            </div>
            <div class='add-new-input'>
                <input type='submit' value='Add Item' id='submit-button' />
            </div>
        </form> 
```

CSS代码

```
#imageWarn {
    width: 300px;
    position: relative;
    left: 200px;
    color: red;
    font-size: 12px;
    padding-bottom: 15px;
}

.add-new-input {
    vertical-align:top;
    padding-bottom:10px;
}
.add-new-input input, textarea, select {
    width:300px;
}
.add-new-input div {
    width:200px;
    font-size:12pt;
    clear:none;
    display:inline-block;
    vertical-align:top;
}
#submit-button {
    width:100px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T18:23:17.087

尝试将此添加到您的表单中

```
<input type="hidden" name="MAX_FILE_SIZE" value="MaxFileSizeInBytes"> 
```

# html - 如何在导航菜单中输入图标并使其悬停在子菜单中？

> ID：16111029
> 
> 赞同：0
> 
> 时间：2013-04-19T18:13:38.573
> 
> 标签：html, css, navigation, icons, nav

我想知道是否有人可以告诉我如何在导航菜单中实现图标，找不到合适的教程。我正在尝试做类似的事情 -

[1] [http://i.imgur.com/Lp4aLyr.jpg?1](http://i.imgur.com/Lp4aLyr.jpg?1) “导航示例（悬停之前和之后）”

如何放置带有文本的图标（或完整的图像图标）而不是普通的 li 文本？

欣赏它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T18:15:39.043

这是一个很好的教程给你。

[http://www.ehousestudio.com/blog/view/css_sprite_navigation_tutorial](http://www.ehousestudio.com/blog/view/css_sprite_navigation_tutorial)

# regex - 需要 PCRE 正则表达式多行匹配帮助

> ID：16111031
> 
> 赞同：1
> 
> 时间：2013-04-19T18:13:40.063
> 
> 标签：regex, pcre, multiline

每当短语被分成多行时，我都无法匹配模式“无法运行此程序”，例如：

```
This program cannot be run

T
his program cannot be run

Thi
s program cannot be run

.
.

This pr
ogram cannot be run 
```

图案可以在任意点分割成两条线。我尝试过使用 /m 和 /s 以及锚点和边界，但我无法让它工作。我对自己做错了什么感到茫然。我什至尝试在每个字符后使用 \s ，即使那样也不匹配！模式必须是 PCRE 格式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T18:25:21.120

`s`并且`m`不会在这里帮助你。它们仅分别改变`.`和锚的行为。锚点和边界也无济于事，因为它们只会断言某物位于某个位置。

所有这些方法的问题在于，换行符会在字符串中引入一两个新字符（或`\n`，具体取决于您的系统）。因此，如果您需要仅正则表达式的解决方案，则必须在任何可能的点允许换行：`\r``\r\n`

```
/T[\r\n]*h[\r\n]*i[\r\n]*s[\r\n]* [\r\n]*p[\r\n]*.../ 
```

等等。

如果您可以修改输入，则通过替换首先删除换行符会更容易

```
/[\r\n]+/ 
```

使用空字符串，然后运行您已有的模式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T18:25:14.210

如果换行符可以出现在所寻找的子字符串中的任何位置，则需要添加相应的字符以匹配正则表达式中的换行符。

假设换行符总是`\n`

```
T\n?h\n?i\n?s\n? \n?p\n?r\n?o\n?g\n?r\n?a\n?m\n? \n?c\n?a\n?n\n?n\n?o\n?t\n? \n?b\n?e\n? \n?r\n?u\n?n 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T18:25:51.690

所以它看起来很可怕，也许有人可以提供更好的解决方案，这里是在 python 中使用 re.S 标志

```
>>> a = """
... This pr
... ogram cannot be run"""
>>> re.search("T[\n]*h[\n]*i[\n]*s[\n]* [\n]*p[\n]*r[\n]*o[\n]*",a,re.S)
<_sre.SRE_Match object at 0x7f9d746e9e68> 
```

如果您的字符串发生变化，制作正则表达式的简单方法

```
>>> a = "This program cannot be run"
>>> b = list(a)
>>> r = '[\r\n]*'.join(b) 
```

# sql - ORA - 00933 与内部连接和“as”混淆

> ID：16111034
> 
> 赞同：2
> 
> 时间：2013-04-19T18:13:51.883
> 
> 标签：sql, oracle, join, table-alias

我有这个使用 ，从两个表中获取数据的查询`inner join`，但是我`SQL command not properly ended`在“as”下得到了一个带有星号的错误：

```
select P.carrier_id, O.order_id, O.aircraft_id, O.quantity

from orderline AS O

inner join purchaseorder AS P

on O.order_id = P.carrier_id;

the error:

from orderline AS O ( with an asterix under AS)

Error at line 2
Ora-00933: SQL command not properly ended. 
```

关于这一点，我认为这`AS`不是问题，因为它只是引用了一个别名，但我很困惑为什么会出现这种情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T18:19:24.287

只需删除`AS`关键字

```
select 
   P.carrier_id, 
   O.order_id, 
   O.aircraft_id, 
   O.quantity
from 
   orderline O
inner join purchaseorder P
   on O.order_id = P.carrier_id; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T18:16:03.030

不允许`as`在表名与其别名之间插入关键字。

# python - 如何将 .pcm 文件转换为 .wav 文件（脚本）

> ID：16111038
> 
> 赞同：6
> 
> 时间：2013-04-19T18:14:12.273
> 
> 标签：python, linux, windows, audio, scripting

我想在 Python 脚本中使用诸如 SOX 之类的工具将 .pcm 文件转换为 .wav 文件。该工具需要跨平台兼容（Windows 和 Linux）。有什么建议么？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-19T18:23:13.113

您实际上并不需要为此使用工具。Python 标准库附带了[`wave`](http://docs.python.org/2/library/wave.html)用于编写 .wav 文件的模块，当然原始 .pcm 文件可以作为普通二进制文件打开，如果您需要进行任何简单的转换，这些转换对于列表理解来说并不重要，它们'是微不足道的[`audioop`](http://docs.python.org/2/library/audioop.html)。

例如，这是一个将立体声 16 位 little-endian 44.1k PCM 文件转换为 WAV 文件的完整程序：

```
import sys
import wave

for arg in sys.argv[1:]:
    with open(arg, 'rb') as pcmfile:
        pcmdata = pcmfile.read()
    with wave.open(arg+'.wav', 'wb') as wavfile:
        wavfile.setparams((2, 2, 44100, 0, 'NONE', 'NONE'))
        wavfile.writeframes(pcmdata) 
```

在旧版本的 Python 中，您可能必须使用`with contextlib.closing(wave.open(…))`（或显式的`open`and`close`而不是`with`语句）。

# python - django-haystack - 使用令牌自动完成

> ID：16111039
> 
> 赞同：0
> 
> 时间：2013-04-19T18:14:31.477
> 
> 标签：python, django, search, django-haystack

我正在使用 django-haystack 创建一些搜索功能。我想使用常用标记自动完成搜索输入。我怎样才能做到这一点？

例子：

如果我在索引 3 文件中有：

```
 only one 
   only me 
   only you 
```

而且我想将自动完成设置为“开”，我想显示“仅”和“一个”，最好按此顺序显示。

我怎样才能做到这一点？

# ms-access - 使用表单显示以前的条目并添加新条目

> ID：16111043
> 
> 赞同：1
> 
> 时间：2013-04-19T18:14:56.463
> 
> 标签：ms-access, vba

我正在尝试设计一个简单的野生动物追踪数据库，这样当我或我的同事发现动物时，我们可以通过表格输入它的耳标号码。这将向我们显示之前观察到该动物的日期/位置的列表，或者如果它不在数据库中，则允许我们输入新的动物和位置。

我有两个主要数据表： dt_Animal - 存储有关该独特动物的耳标信息、物种和其他信息 dt_Sightings - 存储有关何时/何地看到动物的信息（以一对多关系链接到 dt_Animal，课程）

我想要的是当你打开表格时，你会得到一个框（文本或组合）来输入动物的耳标 ID。

*   如果该 ID*已经存在*于数据库中，它会显示该动物的所有信息及其以前的目击记录 - 可选择填写任何缺失的信息并（当然）添加新的目击记录 - 它不会添加新的记录到 dt_Animal - 只记录到 dt_Sightings
*   如果数据库*中不存在*ID ，它会在 dt_Animal 中创建一条新记录，并允许您输入任何/所有其他信息

我遇到的问题是我不希望 dt_Animal 中有重复的记录——每只动物都是独一无二的。

到目前为止，我已经知道，如果您输入的 eartagID 值已经存在于 dt_Animal 中，而不仅仅是弹出警告，该表单将在“Sightings”子表单中显示相关数据，因此您可以查看动物以前的位置并添加您的新目击。

任何帮助，将不胜感激！我一直在另一个论坛上获得一些帮助，直到帮助我的人在另一个线程上因争吵而被禁止...！ [http://www.access-programmers.co.uk/forums/showthread.php?p=1249087](http://www.access-programmers.co.uk/forums/showthread.php?p=1249087)

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T18:56:45.437

如果您还没有尝试过，我建议您使用`Form`for Animals 使用标准文本框、组合框等来显示/编辑动物的详细信息**，并**使用链接`Subform control`来一次显示/编辑它们的目击，像这样：

![子窗体示例.png](https://i.stack.imgur.com/3T2T0.png)

主表单绑定到 [dt_Animal]，因此如果 [eartagID] 是主键（应该是），则不会冒在该表中创建重复项的风险。“Sightings”*子表单*绑定到 [dt_Sightings] 并通过 [eartagID]*链接*到 [dt_Animal]，所以

*   它只显示当前动物的目击记录

*   如果您添加一个新的瞄准，它会自动将该瞄准链接到当前动物（即，自动插入正确的 [dt_Sightings].[eartagID]）。

## 编辑

为了使搜索/添加动物更加“无缝”，一种方法是在表单标题中添加一个文本框`txtAddSearch`和一个命令按钮`cmdAddSearch`，并在表单后面使用以下代码：

```
Option Compare Database
Option Explicit

Private Sub cmdAddSearch_Click()
    Dim rst As DAO.Recordset

    If Not IsNull(Me.txtAddSearch.Value) Then
        Set rst = Me.RecordsetClone
        rst.FindFirst "eartagID=" & Me.txtAddSearch.Value
        If rst.NoMatch Then
            DoCmd.GoToRecord acDataForm, Me.Name, acNewRec
            Me.eartagID.SetFocus
            Me.eartagID.Text = Me.txtAddSearch.Value
            Me.species.SetFocus
        Else
            Me.Bookmark = rst.Bookmark
        End If
        Set rst = Nothing
    End If
End Sub

Private Sub Form_Load()
    Me.cmdAddSearch.Default = True
    Me.txtAddSearch.SetFocus
End Sub 
```

当表单首次加载时，您正在查看第一个数据记录，但`txtAddSearch`具有焦点：

![OnLoad.png](https://i.stack.imgur.com/X0CBc.png)

您输入一个 EarTagID 并按 [Enter]。如果记录已经存在，那么您将被带到它...

![杀手兔.png](https://i.stack.imgur.com/Bmsq4.png)

...如果 EarTagID 尚不存在，您将被带到新记录（已填写该 EarTagID），因此您可以添加详细信息：

![新记录.png](https://i.stack.imgur.com/l2cwR.png)

# android - 错误：无法执行 dex

> ID：16111048
> 
> 赞同：9
> 
> 时间：2013-04-19T18:15:37.583
> 
> 标签：android, eclipse

当我尝试启动我的 AVD 时，我收到此错误，我搜索互联网并且这个论坛没有任何工作。有谁能够帮我？

```
[2013-04-19 19:09:02 - Dex Loader] Unable to execute dex: Multiple dex files define Landroid/support/v4/accessibilityservice/AccessibilityServiceInfoCompat$AccessibilityServiceInfoVersionImpl;
[2013-04-19 19:09:02 - ScaryFairgroundRideApp] Conversion to Dalvik format failed: Unable to execute dex: Multiple dex files define Landroid/support/v4/accessibilityservice/AccessibilityServiceInfoCompat$AccessibilityServiceInfoVersionImpl; 
```

-----错误的解决方法----------

我从项目的 libs 文件夹中删除了 android-support-v4，一切正常。@dymmeh 的解决方案

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-21T14:56:53.213

我从项目的 libs 文件夹中删除了 android-support-v4，一切正常。@dymmeh 的解决方案

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-12-30T04:58:42.087

从构建路径中删除了 android-support-v4 几乎适用于..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-13T17:17:45.830

For me, it was the Maven Dependencies, I just removed the dependency tag for Android Support Library from `pom.xml`

# javascript - 浏览器（等）是否**内部优化**它们对 javascript 对象属性的检索？

> ID：16111052
> 
> 赞同：1
> 
> 时间：2013-04-19T18:15:48.020
> 
> 标签：javascript, object

附加说明：

我确实检查了这个先前的答案，并希望得到一个更新的答案，而不是 Chrome 特定的答案：[JavaScript 对象中键查找的性能](https://stackoverflow.com/questions/7700987/performance-of-key-lookup-in-javascript-object)

假设一个标准的 javascript“字典”对象具有如下属性：

```
var myObject = {
   Key1: ”Value1”,
   Key2: ”Value2”,
   Key3: ”Value3”,
   …
   Key500: ”Value500”
} 
```

有谁知道浏览器（等）是否在**内部优化**了它们对这些属性的检索？

一个很好的例子可能是自动排序 + 二分搜索。

一个不太好的情况可能是简单的线性搜索。

EcmaScript 标准规定浏览器可以按照自己的意愿进行内部操作：

> [浏览器等] 可以支持具有任何依赖于实现的行为的 [对象的] 内部属性，只要它符合本文档中所述的特定主机对象限制。

和

> 枚举属性的机制和顺序……没有指定。

我真的不需要知道具体的优化，我只想知道他们是否试图优化超越简单的线性搜索。

那么，有人有“内部”知识吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T18:29:23.483

这取决于浏览器和 JavaScript 引擎。Google 的 V8 动态创建*隐藏类*而不是动态查找，以减少用于访问属性的时间。使用隐藏类还具有使用基于类的优化（例如内联缓存）的额外好处。

[在“快速属性访问](https://developers.google.com/v8/design)”部分下有更多信息。这个想法基本上来自这篇论文：[An Efficient Implementation of Self, a Dynamically-Typed Object-Oriented Language Based on Prototypes](http://selflanguage.org/_static/published/implementation.pdf)。

Internet Explorer 有一个“快速类型系统”来优化属性访问。[此演示文稿中的](http://channel9.msdn.com/Events/Build/2012/4-000)更多详细信息。

Mozilla 的 SpiderMonkey 引擎使用[属性缓存](https://developer.mozilla.org/en-US/docs/SpiderMonkey/Internals/Property_cache)（警告：细节有些过时，但它基本上仍然使用属性缓存）。

新的 IonMonkey 引擎使用内联属性缓存，但目前为止细节似乎很少。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T18:46:16.150

Yes. The specification does not require such optimications, as you have already noted, but it can be observed empirically. I tested how quickly keys are grabbed from objects that contain up to 500,000 elements. ([test here](http://jsfiddle.net/bE6GR/2/), be warned that it will freeze your browser for a little while).

The key retrieval time does not increase with the size of the object, which means that it has `O(1)` time complexity for search.

# android - 为什么 Android JFC 中的 SparseArray 不兼容？

> ID：16111054
> 
> 赞同：2
> 
> 时间：2013-04-19T18:15:59.983
> 
> 标签：android, collections, sparse-array

所以，为了性能，我应该[使用 SparseArray 而不是 HashMap ：](http://www.programmingmobile.com/2012/07/android-performance-tweaking-parsearray.html)

但是，[`SparseArray`](http://developer.android.com/reference/android/util/SparseArray.html)不是[JCF](http://docs.oracle.com/javase/tutorial/collections/)的一部分，也没有实现[`Collection`](http://docs.oracle.com/javase/6/docs/api/java/util/Collection.html)nor 。，另一方面，实现并提供了在需要与[JCF](http://docs.oracle.com/javase/tutorial/collections/)兼容的行为时可以使用的功能。例如，在各种自定义排序中使用它（对于值）。[`List`](http://docs.oracle.com/javase/6/docs/api/java/util/List.html)[`Map`](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html)[`HashMap`](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html)[`Map`](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html)[`values()`](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html#values%28%29)[`ArrayAdapter`](http://developer.android.com/reference/android/widget/ArrayAdapter.html)

我的问题是三个方面：

1.  为什么不[`SparseArray`](http://developer.android.com/reference/android/util/SparseArray.html)实现[JCF](http://docs.oracle.com/javase/tutorial/collections/)接口？我的意思是，鉴于大多数方法已经存在，不实现这些接口的动机是什么？
2.  是否有[`SparseArray`](http://developer.android.com/reference/android/util/SparseArray.html)实现[JCF](http://docs.oracle.com/javase/tutorial/collections/)接口的替代方案或可以轻松转换并保持[`SparseArray`](http://developer.android.com/reference/android/util/SparseArray.html)性能？
3.  [`HashMap`](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html)有几百个元素的 s 真的那么慢吗？我的用户真的会注意到吗？

我正在寻找有深度的答案，我更喜欢参考权威网站。如果您认为您知道为什么[`SparseArray`](http://developer.android.com/reference/android/util/SparseArray.html)没有使用 JCF 接口实现，请提供一些支持，帮助我理解。如果您认为我应该使用[`SparseArray`](http://developer.android.com/reference/android/util/SparseArray.html)，请向我展示如何将其与[`ArrayAdapter`](http://developer.android.com/reference/android/widget/ArrayAdapter.html)自定义排序一起使用（首选[Comparator](http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html) -esque 解决方案）。如果有更好的选择，API 文档、库或教程的链接会很有帮助。如果您认为我应该坚持使用[`HashMap`](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html)s，请解释为什么[`SparseArray`](http://developer.android.com/reference/android/util/SparseArray.html)接口的需求超过了性能优势。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T17:12:26.210

SparseArray.java 的第一个版本是在 2006 年 5 月编写的。在某些方面，它早于您所指的各种集合接口（在 Android 中，而不是 Java 中）。我的感觉是它不支持各种 JCF 接口，因为它们在编写代码时并不存在，并且从那以后没有人找到添加它们的理由。（它甚至直到 2007 年初才使用泛型。）

如果您发现增强的 SparseArray 有用，则始终欢迎使用高质量的补丁。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T18:22:38.007

也许是因为它是 Map < Object, Object > 但 SparseArray 有原始键。

替代方案是以前的地图

对于 3，一般来说，是的，但应该衡量一下，看看他的情况是否属实

# delphi - 如何将 OleVariant 转换为派生的 IDispatch？

> ID：16111060
> 
> 赞同：1
> 
> 时间：2013-04-19T18:16:22.383
> 
> 标签：delphi, interface, ole

今天我带来了另一个让我头疼的问题，

我确实将一个 DAO 3.6 类型库导入到我的 delphi 7 中，并且我开始看到许多有趣的接口，所以我面临着一个有趣的问题。

每次Fields类出现在另一个类的属性上时，它们都有正确的定义，我的意思是，他被定义为Fields，但是在Index类中，在他描述其结构的所有字段参与者的部分中，属性字段出现不作为字段，但作为 OleVariant。

查看与 TableDefs 的区别，它具有 Fields 属性并与 Index 定义进行比较：

```
_TableDef = interface(_DAO)
...
property Fields: Fields read Get_Fields;
...
end;

_Index = interface(_DAO)
...
property Fields: OleVariant read Get_Fields write Set_Fields;
...
end; 
```

问题是，有没有办法将看起来像 OleVariant 类型的字段转换为字段接口类型？

我非常感谢 StackOverflow 的所有帮助

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T20:03:13.393

如果我正确理解您的问题，您是在问如何将变体转换为`IDispatch`. 这样做：

```
IDispatch(V) 
```

在您的情况下，我认为您有另一种类型，`Fields`它源自`IDispatch`. 你可以像这样抓住它：

```
IDispatch(V) as Fields 
```

# php - 防止服务器行为：执行没有扩展名的脚本

> ID：16111065
> 
> 赞同：1
> 
> 时间：2013-04-19T18:16:39.447
> 
> 标签：php, apache2.2

我正在使用即使我不添加 .php 也倾向于执行脚本的服务器所以假设我的页面是活动.php 然后我可以执行我的脚本：

```
www.example.com/activities.php
www.example.com/activities
and even www.example.com/activities/ 
```

我试图绕过类似的问题：

```
if ($_SERVER['REQUEST_URI'] != $_SERVER['SCRIPT_NAME'])  header('Location: '. $_SERVER['SCRIPT_NAME']); 
```

效果很好，直到我需要发布一些数据。我的 htaccess 文件中没有任何内容可以解释这种行为（没有 mod_rewrite 的东西或任何东西）。我怎样才能关闭它？

服务器信息：

```
Linux Linux1 3.2.0-24-generic #39-Ubuntu SMP Mon May 21 16:52:17 UTC 2012 x86_64 
Apache Version  Apache/2.2.22 (Ubuntu)
Apache API Version  20051115 
```

提前致谢

编辑：.htaccess 文件

```
php_flag display_errors on
Options +FollowSymLinks
RewriteEngine On
RewriteCond %{HTTP_Host} ^domain.be [NC]
RewriteRule ^(.*)$ http://www.domain.be/$1 [L,R=301] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T18:50:38.367

您的服务器可能启用了[MultiViews](http://httpd.apache.org/docs/2.2/content-negotiation.html#multiviews)（Apache 内容协商）；当它被启用并且找不到文件时，apache 将查找相同的文件但具有任何扩展名。要禁用此功能，您可以添加`-MultiViews`到选项（如果您的主机允许）...

```
Options +FollowSymLinks -MultiViews 
```

我会质疑为什么这对你来说是个问题，如果你没有链接到你的任何脚本，`.php`那么人们将如何找到它们？只有当存在指向这些其他页面的链接时，规范 URL 才是真正的问题。

此外，您可以改进基于 php 的重定向以检查当前请求方法，而不是重定向 POST 请求，方法是检查`$_SERVER['REQUEST_METHOD']`...

```
if ($_SERVER['REQUEST_URI'] != $_SERVER['SCRIPT_NAME'] and $_SERVER['REQUEST_METHOD'] != 'POST')  header('Location: '. $_SERVER['SCRIPT_NAME']); 
```

# php - 在函数中传递的第二个值 - 它是什么？

> ID：16111074
> 
> 赞同：-2
> 
> 时间：2013-04-19T18:17:13.573
> 
> 标签：php, function, array-merge

我试过浏览其他地方，但似乎找不到答案。我知道一个函数可以有多个值传递给它，因为函数本身可以容纳这两个值。在下面的这个函数中，我可以看到`$required_fields`它将被传递到出现“”的每个场合`$field_length_array`，但是这`$_POST`对我有什么用呢？

非常感谢熊兄弟。

```
function check_max_field_lengths($field_length_array) {
$field_errors = array();
foreach($field_length_array as $fieldname => $maxlength ) {
    if (strlen(trim(mysql_prep($_POST[$fieldname]))) > $maxlength) { $field_errors[] = $fieldname; }
}
return $field_errors;
}

function check_max_field_lengths($field_length_array) {
$field_errors = array();
foreach($field_length_array as $fieldname => $maxlength ) {
    if (strlen(trim(mysql_prep($_POST[$fieldname]))) > $maxlength) { $field_errors[] = $fieldname; }
}
return $field_errors;
}

$required_fields = array('username', 'password');
$errors= array_merge($errors, check_required_fields($required_fields, $_POST));

$fields_with_lengths = array('username' => 30, 'password' => 30);
$errors = array_merge($errors, check_max_field_lengths($fields_with_lengths, $_POST)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T18:21:21.860

在这种情况下， $_POST 什么都不做，因为它在函数内部没有用作第二个参数。您可以发送多个参数，但是在函数内部您应该会看到它的用法`func_get_args()`- 该函数确实使用了 $_POST - 但不是作为函数参数，而是作为 php web 范围的全局对象。

# uml - 我可以在 UML 中拥有哪些类型的约束以及何时使用它们？

> ID：16111075
> 
> 赞同：1
> 
> 时间：2013-04-19T18:17:21.020
> 
> 标签：uml

我遇到了 EA Sparx 中的默认约束，我想知道我还有哪些其他约束，例如假设以及何时使用它们？

[http://www.sparxsystems.com/enterprise_architect_user_guide/modeling_fundamentals/constrainttypes.html](http://www.sparxsystems.com/enterprise_architect_user_guide/modeling_fundamentals/constrainttypes.html)

例如，我将如何定义无法收集日志或存在单点故障

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T15:24:29.400

模型中的约束不是标准 UML 的一部分。它们通常使用[对象约束语言](http://en.wikipedia.org/wiki/Object_Constraint_Language)（您可以对其运行测试）或纯文本创建。

OCL 是 UML 的附加组件。然而，根据我的经验，当代 CASE 工具（如 EA 或 MagicDraw）中的 OCL 支持相当基本。[OCL 规范](http://www.omg.org/spec/OCL/2.3.1/PDF/)定义了各种可能的约束（参见第 175 页 ff.）。因此，您可以使用约束来为您假设在运行时满足的模型元素注释条件。

# coldfusion - 替换额外的零冷融合 Cfset

> ID：16111080
> 
> 赞同：2
> 
> 时间：2013-04-19T18:17:37.857
> 
> 标签：coldfusion

我对 Coldfusion 很陌生，不确定正确使用此功能的格式应该是什么。

我想将 0000411111 转换为 0411111 摆脱前三个零

```
<cfset origValue = "#query.column#"> 
<cfset newValue = ReReplace(origValue, "0+", "", "all")>
<cfoutput>#newValue#</cfoutput> 
```

无论如何，这将删除所有零以保留一个零。只是好奇。

预先感谢您的协助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T18:51:02.903

如果字符串始终为 7 个字符，您可以使用

```
<cfset newValue = numberFormat(000411111,'0000000')> 
```

如果您不知道长度并且总是想删除前导 0 并在开头留下一个，您可以这样做

```
<cfset newValue = '0' & int(000411111)> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T18:26:40.500

如果你总是想删除前三个字符，你可以使用`right()`函数：

```
<cfset newValue = right(query.column, len(query.column)-3> 
```

这将返回字符串右侧的所有字符，不包括前三个字符。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-19T18:27:17.443

你可以用两种不同的方式做到这一点：

```
<Cfset newvalue=right(origvalue,len(origvalue)-3> 
```

此方法返回没有最左边 3 个字符的字符串

或者

```
<Cfset newvalue=mid(origvalue,4,len(origvalue)-3> 
```

此方法从位置 4 开始并抓取字符串的其余部分。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-19T21:07:28.763

我认为`numberFormat()`答案是最好的，但其他人一直在建议使用`mid()`，`right()`我认为 - 虽然这些方法有效 - 比你需要做的更麻烦。如果您只是想删除字符串的前三个字符，则有一个[`removeChars()`](http://help.adobe.com/en_US/ColdFusion/10.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-6e3e.html)函数。从您的问题中不清楚这是否真的达到了您想要的效果：如果只有当数字左填充有太多零时您想要这样做，那么该`numberFormat()`方法是最好的。如果是*任意三个字符*，那么这种方法会更好。

```
newValue = removeChars(origValue, 1, 3); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-21T14:44:21.823

您正在寻找的正则表达式字符串实际上是在字符串的开头匹配 2 个或多个 0，并将它们替换为简单的单个 0。

这给出了正则表达式`^0+0`

`^`匹配字符串的开头，`0+`匹配 1 个或多个 0，`0`匹配第二个零。这意味着如果只有 1 个前导零，那么它不需要做任何事情。最后，您只需要执行一次，因为您只替换字符串开头的那些。这带来了 CF 代码

`newValue = ReReplace(origValue, "^0+0", "0", "one")`

这应该用一个 1 替换多个前导零，而不是在没有任何开头的地方添加零。

最后一点，玩正则表达式的好地方是[http://gskinner.com/RegExr/](http://gskinner.com/RegExr/)

# c# - 使用动画将网格移动到我单击的位置

> ID：16111082
> 
> 赞同：1
> 
> 时间：2013-04-19T18:17:39.223
> 
> 标签：c#, wpf

我正在尝试将一组选项卡移动到我在画布上单击的位置。我设法让它使用固定值，但不能让它通过鼠标左键单击来工作。

这是我的代码：

```
public partial class MainWindow : Window
{
    User Player = new User();
    ThicknessConverter perimeter = new ThicknessConverter();
    Inventory Inventory = new Inventory();
    BreadCrumb Crumb = new BreadCrumb();
    Locations Locations = new Locations();
    PointAnimation myPointAnimation = new PointAnimation();
    ThicknessAnimation myThicknessAnimation = new ThicknessAnimation();
    DoubleAnimation da = new DoubleAnimation();
    Point p = new Point();

    private void Hansel_MouseLeftButtonDown(object sender, MouseButtonEventArgs e)
    {
        da.From = Canvas.GetLeft(Hansel);
        da.From = Canvas.GetTop(Hansel);
        p.X = Mouse.GetPosition(PlayArea);

        da.To = p.X; //Convert.ToDouble(PointToScreen(Mouse.GetPosition(this.)));
        da.Duration = new Duration(TimeSpan.FromSeconds(2));
        Hansel.BeginAnimation(Canvas.LeftProperty, da);
    }
} 
```

那么，我将如何获取鼠标位置并将这些点转换为双坐标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T18:23:51.447

```
<Window x:Class="MiscSamples.ClickToMove"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="ClickToMove" Height="300" Width="300">
    <ItemsControl ItemsSource="{Binding}" PreviewMouseDown="ItemsControl_PreviewMouseDown"
                  Background="#05FFFFFF">
        <ItemsControl.ItemsPanel>
            <ItemsPanelTemplate>
                <Canvas IsItemsHost="True"/>
            </ItemsPanelTemplate>
        </ItemsControl.ItemsPanel>
        <ItemsControl.ItemContainerStyle>
            <Style TargetType="ContentPresenter">
                <Setter Property="Canvas.Left" Value="{Binding X}"/>
                <Setter Property="Canvas.Top" Value="{Binding Y}"/>
            </Style>
        </ItemsControl.ItemContainerStyle>
        <ItemsControl.ItemTemplate>
            <DataTemplate>
                <Rectangle Stroke="Black" StrokeThickness="2" Fill="Blue"
                           Height="20" Width="20"/>
            </DataTemplate>
        </ItemsControl.ItemTemplate>
    </ItemsControl>
</Window> 
```

代码背后：

```
 public partial class ClickToMove : Window
    {
        public List<MovableObject> Objects { get; set; } 

        public ClickToMove()
        {
            InitializeComponent();

            Objects = new List<MovableObject>
                {
                    new MovableObject() {X = 100, Y = 100}
                };

            DataContext = Objects;
        }

        private void ItemsControl_PreviewMouseDown(object sender, MouseButtonEventArgs e)
        {
            var position = e.GetPosition(this);
            Objects.First().MoveToPosition(position.X, position.Y);
        }
    } 
```

视图模型：

```
 public class MovableObject: INotifyPropertyChanged
    {
        private double _x;
        public double X
        {
            get { return _x; }
            set
            {
                _x = value;
                OnPropertyChanged("X");
            }
        }

        private double _y;
        public double Y
        {
            get { return _y; }
            set
            {
                _y = value;
                OnPropertyChanged("Y");
            }
        }

        private System.Threading.Timer MoveTimer;

        private double DestinationX;
        private double DestinationY;

        public void MoveToPosition(double x, double y)
        {
            DestinationX = x;
            DestinationY = y;

            if (MoveTimer != null)
                MoveTimer.Dispose();

            MoveTimer = new Timer(o => MoveStep(), null, 0, 10);
        }

        private void MoveStep()
        {
            if (Math.Abs(X - DestinationX) > 5)
            {
                if (X < DestinationX)
                    X = X+5;
                else if (X > DestinationX)
                    X = X-5;    
            }

            if (Math.Abs(Y - DestinationY) > 5)
            {
                if (Y < DestinationY)
                    Y = Y + 5;
                else if (Y > DestinationY)
                    Y = Y - 5;    
            }
        }

        public event PropertyChangedEventHandler PropertyChanged;

        protected virtual void OnPropertyChanged(string propertyName)
        {
            Application.Current.Dispatcher.BeginInvoke((Action)(() =>
                {
                    PropertyChangedEventHandler handler = PropertyChanged;
                    if (handler != null) handler(this, new PropertyChangedEventArgs(propertyName));        
                }));

        }
    } 
```

# gwt - 如何在不上传 GXT 的情况下浏览文件？

> ID：16111087
> 
> 赞同：-2
> 
> 时间：2013-04-19T18:17:52.300
> 
> 标签：gwt, gxt

我是 GXT 的初学者，我想知道是否有一种方法可以解析文件并提取一些信息而无需上传。

我创建了一个包含 uploadFile 表单的表单面板，但我不知道下一步，如何获取文件的完整路径，以便我可以使用 java io 读/写或如何检索文件，或者是否有替代解决方案，谢谢你。

最好的祝福。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T19:30:19.273

您可以在一些现代浏览器中使用最先进的 HTML5 api 来执行此操作，您需要使用 GWT JSNI 代码。GWT 团队没有原样的 api。

## HTML5 文件阅读器

FileReader 包括四个用于异步读取文件的选项：

```
FileReader.readAsBinaryString(Blob|File) - The result property will contain the file/blob's data as a binary string.
FileReader.readAsText(Blob|File, opt_encoding) - The result property will contain the file/blob's data as a text string. 
FileReader.readAsDataURL(Blob|File) - The result property will contain the file/blob's data encoded as a data URL.
FileReader.readAsArrayBuffer(Blob|File) - The result property will contain the file/blob's data as an ArrayBuffer object. 
```

**这些 GWT 包装器的示例 -** [https://github.com/bradrydzewski/gwt-filesystem](https://github.com/bradrydzewski/gwt-filesystem)

您可以从这里了解更多信息 -[如何从 GWT FileUpload 组件中检索文件？](https://stackoverflow.com/questions/14053937/how-to-retrieve-file-from-gwt-fileupload-component)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-19T18:36:07.743

*恕我直言* **，您无法阅读它。**

由于安全原因`javascript`(gwt) 无权访问*系统驱动器文件*。

[http://en.wikipedia.org/wiki/JavaScript#Security](http://en.wikipedia.org/wiki/JavaScript#Security)

请参阅[在 javascript 中打开本地文件系统中的文件](https://stackoverflow.com/questions/5534297/opening-a-file-in-local-file-system-in-javascript)

为了获取文件，您需要进行服务器调用。

相反，您可以在服务器端进行验证并向用户发送正确的消息。

PS：我没有考虑现代浏览器的概念。如果有人在所谓的现代浏览器之外打开会发生什么？程序会运行相同吗？做服务器端验证总是更好..

# mercurial - 如何在 Mercurial Queues 中只推送一个特定补丁？

> ID：16111090
> 
> 赞同：1
> 
> 时间：2013-04-19T18:18:00.623
> 
> 标签：mercurial, patch, mercurial-queue

这就是我所做的：

```
hg init
hg qnew -m "p1" p1.patch
; some changes
hg qrefresh
hg qpop
hg qnew -m "p2" p2.patch
; some changes
hg qrefresh
hg qpop 
```

现在这两个补丁是独立的功能，彼此无关。他们需要彼此独立。

现在我做了（因为我只想要第一个功能）

```
hg qpush p1.patch 
```

它说 ：

```
applying p2.patch
applying p1.patch 
```

它给了我我所做**的**改变！

难道我做错了什么？

当我告诉它推送特定补丁时，它也会推送其他补丁。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T22:54:34.890

你忘了一件事：一组 MQ 补丁是**队列**（FIFO 队列）。即，如果您可以在 中看到多个补丁`hg qseries`，则必须记住 - qpush|qpop 将应用|取消应用补丁，而不是按随机顺序，而是按顺序：从下到上推送，以相反的顺序弹出

`--move`qpush可以选择随机访问（以及更改系列中补丁的顺序作为副作用） 。在您的情况下（一次只使用一个补丁）和补丁名称

*   `hg qpop -a`
*   `hg qpush --move p1.patch`
*   `hg qpop -a`
*   `hg qpush --move p2.patch`

为了避免错误，您可以在别名部分重新定义 qpush（对于此存储库）以始终使用`--move`选项

# mongodb - 如何 JSON 将日期转换为 BSONDateTime？

> ID：16111091
> 
> 赞同：2
> 
> 时间：2013-04-19T18:18:01.627
> 
> 标签：mongodb, scala, playframework, playframework-2.1

我有一个接收 JSON 正文的控制器。其中一个字段是表单的日期`yyyy-mm-dd`。我想做的是将此字段转换为适合 BSONDateTime 的格式并让 ReactiveMongo 执行插入。

我认为是这样的：

```
((__ \ 'myDate).json.pickBranch(Reads.of[JsString] andKeep toDateFormat)) 
```

我该如何进行这种转变？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T18:00:33.043

迈向进步的一步......我相信我可以执行以下操作将日期字符串转换为 JsNumber，然后反应式 mongo 可以处理：

```
((__ \ 'myDate).json.update(Reads.of[DateTime].map{ x => JsNumber(x.getMillis)}) ) 
```

事实证明，Play 有一些隐式来处理 Reads 类中的 Date 和 DateTime 对象。所以 Reads.of[DateTime] 有效。

更新：

要使其与[Play-ReactiveMongo](https://github.com/zenexity/Play-ReactiveMongo)隐式 BSON 转换器一起使用，您需要使用“$date”键创建一个 JsObject，如下所示：

```
((__ \ 'tripDate).json.pickBranch(Reads.of[DateTime].map{ x => Json.obj("$date"->JsNumber(x.getMillis))}) ) 
```

# azure - SMTP 服务从 Azure 到公司网络的访问规则

> ID：16111107
> 
> 赞同：2
> 
> 时间：2013-04-19T18:18:35.130
> 
> 标签：azure, azure-web-roles

我想将我的内部交换服务器用于来自 azure Web 角色的电子邮件通知。角色设置在美国西部地区。我需要允许这个角色通过多个实例访问我的公司 smtp 服务器的端口 25。是否有适当的 IP 范围可以在我的公司防火墙上打开，或者是否有更安全的选项。

我们有在 Azure 和 VPN 网关中设置网络的经验，我不确定这是否会成为解决方案的一部分，因为我的理解还不够广泛，无法了解如何实施一些允许安全访问公司网络的东西，同时继续公开可用。

任何帮助或方向将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T03:26:19.020

您的 Web 角色将成为 Azure 云服务的一部分。Azure 为该云服务分配了一个静态公共 IP 地址。无论您在服务中添加/删除多少角色，公共 IP 都将保持不变。您可以将 SMTP 服务器设置为仅允许来自该 IP 地址的请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T07:40:14.237

您的 Web 角色有一个负载均衡器的单个（且相当静态的）IP 地址，但这对您没有用，因为传出数据的源 IP 地址将是特定实例的 IP 地址。您可以获取此地址，但并不容易，而且它可能会发生变化——每次实例回收或添加时，IP 地址都会发生变化（尽管负载均衡器的传入 IP 地址保持静态）。因此，您无法为公司防火墙提供实例公共 IP 地址范围。

如果您熟悉 Azure 上的 VPN 和专用网络，那么这将是您最简单的选择。您的工作人员角色 IP 地址仍会更改，但范围更容易预测，并且由您的子网配置定义。专用网络 (VPN) 上的工作角色将同时具有公共和专用 IP 地址，因此可以公开访问，但将通过网关发送到 VPN IP 地址。

另一种选择是在 Azure 中的 VM 或托管托管服务上进行某种 smtp 中继，其中 ip 地址更加静态。这将需要设置、维护和运行机器，但很可能可以在超小的 linux 虚拟机上轻松完成。

# ruby-on-rails-3.2 - 使用 ransack 的默认属性选择和谓词选择

> ID：16111110
> 
> 赞同：0
> 
> 时间：2013-04-19T18:18:45.923
> 
> 标签：ruby-on-rails-3.2, ransack

我在 Rails 中使用 Ransack gem，并希望显示一个默认属性选择（例如，下拉菜单中预选的“名称”）和一个默认谓词（例如“包含”）。这个想法是允许用户通过输入用户名来快速查询用户模型，而无需每次都选择“名称”和“包含”。

下面的代码片段非常标准，显示了我的洗劫视图设置。

```
<%= f.attribute_fields do |a| %>    
  <%= a.attribute_select %>
<% end %>
<%= f.predicate_select compounds: false%>
<%= f.value_fields do |v| %>    
  <%= v.text_field :value, :class => "page_filter_value_field" %>
<% end %> 
```

任何帮助将非常感激 ...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-30T10:38:15.137

刚刚重温了这个。在 Ransack 方面找不到任何东西，也许我错过了一些东西。一个快速讨厌的解决方案是使用 jquery 更改选择：

```
$(function(){
  $("#q_c_0_a_0_name option[value=unit_title]").attr("selected","selected") ;
  $("#q_c_0_p option[value=cont]").attr("selected","selected") ;
}); 
```

`q_c_0_a_0_name`是 attribute_select 下拉列表的 id，我将值设置为选项值，并且`q_c_0_p`是 predicate_select 下拉列表。

这只会为过滤器的第一个实例设置默认值，因此，当您添加更多过滤器字段时，它们是空白的

# linux - 在字段中获取 iwconfig 输出

> ID：16111112
> 
> 赞同：1
> 
> 时间：2013-04-19T18:18:48.287
> 
> 标签：linux, wireless, iwconfig

我刚刚做了一个`iwconfig 2>/dev/null | hd`和一个`echo $(iwconfig 2>/dev/null) | hd`

两个输出都没有明确区分字段和内部字段空间……*都是空格*-.^

手册页没有提供任何设置 iwconfig 字段分隔符的方法，所以我阅读了源代码，但没有，所有这些都是通过连接 sprintf 来完成的。我已经看到了一个脚本，它冻结地狱将一些 awk 只是为了获取一些值，并且期望访问点位于`iwconfig | awk 'Access point:/ {print $6}'`并且因为我必须为我的系统更改它，所以我`$4`想知道是否收集所有信息，将其填充到一个笨拙的输出中，解析那个逐行和通过行进行正则表达式确实是正确的方法……是否有替代 iwconfig 的方法可以产生与带有有用分隔字段、名称和值的散列相同的信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-21T04:31:55.423

在 shell 中，awk 或 sed 可能是唯一的解决方案。但是，如果您使用 C 编写程序，则可以使用 iwconfig 实际使用的 ioctl 命令来打印您看到的信息。

您可能还想尝试一下。iwconifg 正在被 iw 取代。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-07T17:54:43.767

您可以通过以下方式获取接入点 MAC 地址

```
iwconfig 2>&1 | sed -n -e 's/^.*Access Point: //p' 
```

# java - 我需要一些指导来了解 ActionListener 和 actionPerformed(ActionEvent) 如何工作

> ID：16111113
> 
> 赞同：2
> 
> 时间：2013-04-19T18:18:49.097
> 
> 标签：java, swing, jbutton, actionlistener

我正在自学 Java 的 Swing 组件，并且遇到了一些概念上的障碍。我确定我的某些特定术语有误，但希望我能很好地传达我的困难以获得一两个答案。

为了简洁起见，我有以下代码：

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;
//
public class CreateButtonSel {
    public static void main(String[] args) {
        ButtonSel thisButtonSel = new ButtonSel();
        final int WIDTH = 250;
        final int HEIGHT = 250;
        thisButtonSel.setSize(WIDTH,HEIGHT);
        thisButtonSel.setVisible(true);
    }
} 
```

当我添加`implements ActionListener`（在下面注释掉）时，我收到一个错误`ButtonSel is not abstract and does not override abstract method actionPerformed(ActionEvent)`。根据我在 javadocs 和各个站点上阅读的内容，我收集到该错误是由于尚未在方法中定义操作造成的。就像是

```
public void actionPerformed(ActionEvent clickButton) {
     do stuff;
     { 
```

但是，我不清楚该方法需要在哪里使用。我猜它`ButtonSel`与构造函数一起存在于类中——因为这是我定义按钮对象的地方。但是，我也可以将其视为类中的方法，并作为参数`CreateButtonSel`传递给它。`ButtonSel`那么问题来了，这些按钮动作特性是如何传递给构造函数的，或者是否传递给构造函数呢？或者如果它们在`CreateButtonSel`类中，它们是否会自动附加到构造函数创建的按钮对象？

有人可以解释一下程序流程应该如何工作以及什么时候调用哪个方法吗？

```
//    public class ButtonSel extends JFrame implements ActionListener {
public class ButtonSel extends JFrame {
    JButton approveButton = new JButton("Go");
    JPanel buttonPanel = new JPanel();
 //
    public ButtonSel() {
        super("ButtonTest");
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setLayout(new FlowLayout());
        add(approveButton);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T18:23:43.167

有关示例，请参见[如何编写 ActionListener](http://docs.oracle.com/javase/tutorial/uiswing/events/actionlistener.html)。您还可以在论坛中搜索其他工作示例。

# jquery - jQuery，单击时添加和删除类

> ID：16111114
> 
> 赞同：0
> 
> 时间：2013-04-19T18:18:50.850
> 
> 标签：jquery

到目前为止，这是我的代码：

```
$('.faq dd').hide();
$('.faq dt').click(function(){
    $(this).next().slideToggle('normal');
}); 
```

我希望 DT 在有人单击它时包含一个“活动”类，然后在有人再次单击它时包含一个“非活动”类。

这怎么可能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T18:19:57.747

使用 .toggleClass，您可以切换一个类。你为什么要玩2个班？

```
$('.faq dd').hide();
$('.faq dt').click(function(){
    $(this).toggleClass('active').next().slideToggle('normal');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T18:20:40.203

您可以使用[toggleClass](http://api.jquery.com/toggleClass/)，首先将非活动类分配给 dt 元素并在切换类中赋予活动。它将在 dt 的非活动活动类之间切换。

```
$('.faq dd').hide();
  $('.faq dt').click(function(){
     $(this).toggleClass('active');  
     $(this).next().slideToggle('normal');
}); 
```

# asp.net-mvc - Modelstate.Isvalid 显示为 false

> ID：16111119
> 
> 赞同：-1
> 
> 时间：2013-04-19T18:19:11.723
> 
> 标签：asp.net-mvc, validation, razor, custom-attributes

我在 MVC Razor 中制作了一个 Web 应用程序。当我发布/提交页面数据注释验证时，这些字段也被隐藏/或未向用户显示。由于 dataannodation [必需] 验证也放在隐藏属性上，我在 ModelState.IsValid 上得到 False 值。而且由于该项目即将完成，我们无法更改或重新制作模型类。

请有人建议我如何实现这一目标。如果我的问题不清楚，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T12:08:32.147

您可以使用

```
ModelState.Remove("FieldName"); 
```

删除模型状态中与隐藏字段相关的条目。

请至少确保系统的安全性不会因使用`[Bind(Exclude = "Property names")]`属性禁用字段绑定而受到损害，这些字段不应从表单发送。

# javascript - 使用 Google Maps API V3 计算当前位置与不同位置之间的距离

> ID：16111124
> 
> 赞同：3
> 
> 时间：2013-04-19T18:19:30.337
> 
> 标签：javascript, html, google-maps-api-3, geolocation

我正在尝试计算我的位置与不同位置之间的距离，但我得到的只是 NaN。我很确定我将代码放在脚本中的错误位置。有人可以帮我解决这个问题吗？

```
<!DOCTYPE html>
<html>
<head>
    <script src="http://maps.google.com/maps/api/js?sensor=false&v=3&libraries=geometry"></script>
</head>
<body>
    <p id="demo"></p>
    <button onclick="getLocation()" id="demo">get current location</button>
    <button onclick="console.log(distance)">get ditance from current location to other location</button>

    <script>
        var lat;
        var longt;
        var latLngA = new google.maps.LatLng(lat, longt);
        var latLngB = new google.maps.LatLng(40.778721618334295, -73.96648406982422);
        var distance = google.maps.geometry.spherical.computeDistanceBetween(latLngA, latLngB);

        var x=document.getElementById("demo");

        function getLocation(){
            if (navigator.geolocation){
                navigator.geolocation.getCurrentPosition(showPosition);
            }
            else{
                x.innerHTML="Geolocation is not supported by this browser.";}
            }

        function showPosition(position){
            lat = position.coords.latitude;
            longt = position.coords.longitude;
            x.innerHTML="Latitude: " + lat + "<br>Longitude: " + longt; 
        }
    </script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-19T19:06:00.860

[使用library=geometry](https://developers.google.com/maps/documentation/javascript/geometry)的简化脚本

```
function getLocation() {
  navigator.geolocation.getCurrentPosition(
            function(position) {
                var latLngA = new google.maps.LatLng(position.coords.latitude,position.coords.longitude);
                var latLngB = new google.maps.LatLng(40.778721618334295, -73.96648406982422);
                var distance = google.maps.geometry.spherical.computeDistanceBetween(latLngA, latLngB);
                alert(distance);//In metres
            },
            function() {
                alert("geolocation not supported!!");
            }
    );
} 
```

# php - 为什么我在使用 PHP 执行 SQL 查询时收到超时错误？

> ID：16111127
> 
> 赞同：0
> 
> 时间：2013-04-19T18:19:46.403
> 
> 标签：php, mysql, prestashop

我正在编写一个模块，该模块从我们的分销商网站下载产品数据，然后根据我定义的设置对其进行分类。下`SQL`表定义了类别映射：

![在此处输入图像描述](https://i.stack.imgur.com/VST8r.png)

这些函数是从一个`foreach`也下载数据的循环中调用的。在编写查询上述数据库并根据从我们的经销商处收到的字符串值保存类别的函数之前，我没有收到任何错误。这是我调用该函数的行：

```
//Get PS category based on mapped values
$PsCategory = getPsCategory($category1); 
```

调用此函数后，我开始收到以下错误：

`Fatal error: Maximum execution time of 30 seconds exceeded in C:\xampp\htdocs\prestaprep1-5-3-1\modules\stlimportmodule\model\database.php on line 7`

相关功能如下：

```
function getMappedData(){
include('C:/xampp/htdocs/prestaprep1-5-3-1/modules/stlimportmodule/model/database.php');
$query='SELECT * FROM category_maps';
$statement = $db->prepare($query);
$statement -> execute();
$fetchedData = $statement ->fetchAll();
$statement -> closeCursor();

return $fetchedData;
}

function getPsCategory($stlCategory){
$fetchedData = getMappedData();
//    print_r($fetchedData);
foreach ($fetchedData as $mappedSTLvalues) {

    if($stlCategory == $mappedSTLvalues[0]){
        $psCategoryValue = $mappedSTLvalues['ps_category'];
    }else{
        $psCategoryValue = 2;
    }
}
return $psCategoryValue;
} 
```

您可能会注意到，我将其分为两个功能，一个作为控件，一个仅用于`SQL`查询。最初，它们都在同一个功能中，但我已将其分开以帮助进行故障排除。我的数据库文件如下：

```
$dsn = 'mysql:host=localhost;dbname=ps_development';
$username = 'root';
$password = '';

try {
    $db = new PDO($dsn, $username, $password);
} catch (PDOException $e) {
    $error_message = $e->getMessage();
    include('database_error.php');
    exit();
}
//DEBUG:    echo "database.php is referenced" 
```

第 7 行在这里：

```
$db = new PDO($dsn, $username, $password); 
```

据我所知，我似乎在代码的某处进入了无限循环。使用此 db 文件时，没有其他函数有任何错误，而且我的查询语法中看不到任何错误。数据库不是太大，因为它只包含 9 条记录。

如果有人能指出我错过的东西，我将不胜感激。

* * *

当我执行 print_r 时，我得到以下输出：

```
 Array ( [0] => Array ( [stl_category] => Christian Living [0] => Christian Living [ps_category] => 38 [1] => 38 [id] => 3 [2] => 3 ) [1] => Array ( [stl_category] => Inspirational Motivation [0] => Inspirational Motivation [ps_category] => 230 [1] => 230 [id] => 4 [2] => 4 ) [2] => Array ( [stl_category] => Love and Marriage [0] => Love and Marriage [ps_category] => 231 [1] => 231 [id] => 5 [2] => 5 ) ) Array ( [0] => Array ( [stl_category] => Christian Living [0] => Christian Living [ps_category] => 38 [1] => 38 [id] => 3 [2] => 3 ) [1] => Array ( [stl_category] => Inspirational Motivation [0] => Inspirational Motivation [ps_category] => 230 [1] => 230 [id] => 4 [2] => 4 ) [2] => Array ( [stl_category] => Love and Marriage [0] => Love and Marriage [ps_category] => 231 [1] => 231 [id] => 5 [2] => 5 ) ) Array ( [0] => Array ( [stl_category] => Christian Living [0] => Christian Living [ps_category] => 38 [1] => 38 [id] => 3 [2] => 3 ) [1] => Array ( [stl_category] => Inspirational Motivation [0] => Inspirational Motivation [ps_category] => 230 [1] => 230 [id] => 4 [2] => 4 ) [2] => Array ( [stl_category] => Love and Marriage [0] => Love and Marriage [ps_category] => 231 [1] => 231 [id] => 5 [2] => 5 ) ) Array ( [0] => Array ( [stl_category] => Christian Living [0] => Christian Living [ps_category] => 38 [1] => 38 [id] => 3 [2] => 3 ) [1] => Array ( [stl_category] => Inspirational Motivation [0] => Inspirational Motivation [ps_category] => 230 [1] => 230 [id] => 4 [2] => 4 ) [2] => Array ( [stl_category] => Love and Marriage [0] => Love and Marriage [ps_category] => 231 [1] => 231 [id] => 5 [2] => 5 ) ) Array ( [0] => Array ( [stl_category] => Christian Living [0] => Christian Living [ps_category] => 38 [1] => 38 [id] => 3 [2] => 3 ) [1] => Array ( [stl_category] => Inspirational Motivation [0] => Inspirational Motivation [ps_category] => 230 [1] => 230 [id] => 4 [2] => 4 ) [2] => Array ( [stl_category] => Love and Marriage [0] => Love and Marriage [ps_category] => 231 [1] => 231 [id] => 5 [2] => 5 ) ) Array ( [0] => Array ( [stl_category] => Christian Living [0] => Christian Living [ps_category] => 38 [1] => 38 [id] => 3 [2] => 3 ) [1] => Array ( [stl_category] => Inspirational Motivation [0] => Inspirational Motivation [ps_category] => 230 [1] => 230 [id] => 4 [2] => 4 ) [2] => Array ( [stl_category] => Love and Marriage [0] => Love and Marriage [ps_category] => 231 [1] => 231 [id] => 5 [2] => 5 ) ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T18:32:04.120

似乎连接到您的数据库需要很长时间。这以前有效吗？

您可以尝试以下方法来延长脚本可以运行的时间：

```
ini_set('max_execution_time', 600); //600 seconds = 10 minutes 
```

似乎连接的时间太长了。您使用 ODBC，对吗？

**更新：**

我看到你的包括

```
include('C:/xampp/htdocs/prestaprep1-5-3-1/modules/stlimportmodule/model/database.php'); 
```

一个函数内。这意味着，如果您有 for 循环，您可能会创建许多 $db 对象并导致冻结。您需要将包含移出函数，并使用全局 $db 变量。

# geany - 如何禁用 Geany 中的重新加载对话框？

> ID：16111129
> 
> 赞同：11
> 
> 时间：2013-04-19T18:19:49.153
> 
> 标签：geany

如果在 geany 中打开的文件被另一个程序修改，然后将 geany 带到前面，则 geany 将显示如下模式对话框。

```
The file 'stuff.txt' on the disk is more recent than
the current buffer.

Do you want to reload it? 
```

如果通过运行命令行工具不断地重新生成文件，则会显示此对话框，阻止任何类型的工作流程。如何更改此行为以使对话框不出现，并且 geany 会自动重新加载任何此类文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2021-02-24T15:31:54.790

在不同的编辑器中打开 geany.conf 并设置 reload_clean_doc_on_file_change=true

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T21:41:33.993

关闭 Geany（否则您的更改将被覆盖），然后在不同的编辑器中打开 geany.conf。找到 disk_check_timeout 并将其设置为 0。保存它，然后重新打开 Geany。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-28T01:15:12.730

该对话框不能被禁用并且不支持自动重新加载（这可能很糟糕，具体取决于您是否对文档进行了更改）。

话虽如此，我已经开始使用 GtkInfoBar 开发一种更好的方法，就像 Gedit 使用的那样，它不会阻止您工作，但仍会通知您更改。不幸的是，我没有太多时间或兴趣将其推送到主分支。如果您想尝试使用它（在当前过期/不完整状态下不推荐）或继续使用它，[分支就在这里](https://github.com/geany/geany/tree/document-messages)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-08T19:36:42.940

您可以使用键盘快捷键！

[https://wiki.geany.org/howtos/sorted_keyboard_shortcuts](https://wiki.geany.org/howtos/sorted_keyboard_shortcuts)

Ctrl-R (C) 重新加载文件 重新加载当前文件。所有未保存的更改都将丢失。

# apache-flex - Flex - URLLoader - 我可以在加载事件后添加 eventListener 吗？（似乎工作）

> ID：16111135
> 
> 赞同：0
> 
> 时间：2013-04-19T18:20:12.163
> 
> 标签：apache-flex, urlloader

我正在执行以下代码

```
var myXMLURL:URLRequest = new URLRequest("config.xml"); 
    myLoader = new URLLoader(myXMLURL);  // implicitly calls the load method here
    myLoader.addEventListener(Event.COMPLETE, xmlLoaded); 
    myLoader.addEventListener(IOErrorEvent.IO_ERROR, errorHandler); 
```

URLloader 在您使用 URLRequest 创建后立即执行。
我的问题是我在该语句之后添加了一个事件监听器，它当前捕获 Event.Complete 事件，这将在未来继续工作吗？还是应该在调用加载之前添加 eventListeners？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T00:39:54.237

如果您担心这一点，请不要在构造函数中加载。构造函数中的`URLRequest`是可选的。

所以这样做：

```
var myXMLURL:URLRequest = new URLRequest("config.xml"); 
myLoader = new URLLoader();
myLoader.addEventListener(Event.COMPLETE, xmlLoaded); 
myLoader.addEventListener(IOErrorEvent.IO_ERROR, errorHandler);
myLoader.load( myXMLURL ); 
```

这是我处理所有`URLLoader`s 的方式。我喜欢完全控制我的代码，所以不在构造函数中设置 URLRequest 让我可以自由地`load()`在我选择时调用它，并让我可以选择在加载开始之前添加事件侦听器。老实说，URLLoader 允许在构造函数中自动加载的事实一直让我感到困惑。这完全违背了 Adob​​e 在整个 SDK 中处理构造函数的方式。

# javascript - 如何使 Animate jQuery 方法在 div 末尾停止？

> ID：16111142
> 
> 赞同：0
> 
> 时间：2013-04-19T18:20:33.353
> 
> 标签：javascript, jquery, css

我正在尝试创建一个定制的轮播，它已经具有以下功能：

1.  您可以使用鼠标左右移动，也可以在手机/平板电脑上滑动。
2.  您可以使用按钮向左或向右移动。

但是，问题在于，一旦到达 div 的末尾，按钮就不会停用。相反，一切都在不断变化。见下图：

![在此处输入图像描述](https://i.stack.imgur.com/SNIWg.jpg)

看看jsFiddle：http: [//jsfiddle.net/vnkRw/2/](http://jsfiddle.net/vnkRw/2/)

```
$("#left").click(function() {
    $(".wrapper").stop(true, true).animate({left: "-=125px"}, 500);
});
$("#right").click(function() {
    $(".wrapper").stop(true, true).animate({left: "+=125px"}, 500);
}); 
```

到达终点后如何停用按钮？例如，当在这里：

![在此处输入图像描述](https://i.stack.imgur.com/dcxql.jpg)

左按钮应该停用，因为没有更多的 div 可以显示。

当然，右边也一样：

![在此处输入图像描述](https://i.stack.imgur.com/XF4Pj.jpg)

**目标：到达终点时停用按钮。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T18:39:51.733

就像是

```
 pos=slides=$(".wrapper > div").length;

   $("#left").click(function() {
    if(pos>3){$(".wrapper").stop(true, true).animate({left: "-=125px"}, 500);pos--;}
   });

   $("#right").click(function() {
    if(pos<slides){$(".wrapper").stop(true, true).animate({left: "+=125px"}, 500);pos++;}
   });

   $('.carousel').kinetic(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T18:39:53.827

做轮播时有一些事情需要考虑，我会带你开始。

1.  所有项目的宽度是否相同
2.  所有项目是否具有相同的边距
3.  上面的东西会变吗

我们假设上面所有的东西都是静态的，如果左边的位置是 ，这个想法是不会发生向右滚动`wrapper`的`0`。这是最容易的部分。对于另一个方向，您必须获取所有项目的数量，减去可见项目的数量（在您的情况下为 3），将其乘以它们的宽度（包括边距），所有这些都提供所有项目的宽度和边距相同..最后你必须乘以-1，因为你`wrapper`的`left`位置变成负数。最后，如果`wrapper`到达那个位置，你不应该滚动它。
上述迷你文本墙的可视化：

[http://jsfiddle.net/vnkRw/4/](http://jsfiddle.net/vnkRw/4/)

# c# - 如果在 Form1 上按下按钮，如何在 Form2 上运行另一段代码？

> ID：16111143
> 
> 赞同：0
> 
> 时间：2013-04-19T18:20:34.323
> 
> 标签：c#

很难提供代码来显示正在尝试做的事情，但这是失败的：

我在 Form1 上有一个按钮，上面写着“锁定”，并且在 Form2 中有一个语句，它在按下“锁定”之前从 Form1 读取数据（就像加载所有表单时一样）。如果按下“锁定”，我希望 Form1 读取数据，而不是在它之前。

有没有办法做到这一点？

如果按下它，这就是我想要运行的：

```
private void FOne_Reader_Tick(object sender, EventArgs e)
    {
        //Reads fruit information

        //if lock on is pressed, do this:
        FOne_Reader.Enabled = true;
        Fruit fruity = new Fruit();
        string FileToRead = "../../../DLL/XML/Fruit_Event.xml";
        XmlSerializer serializer = new XmlSerializer(typeof(Fruit));
        fruity = (Fruit)XMLHandler.READXML(FileToRead, serializer);

        //if not
      ... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T18:38:53.820

尝试使用事件：

表格1代码：

```
public partial class Form1 : Form
{
    public event Action PressLock;
    public Form1()
    {
        InitializeComponent();
    }

    protected override void OnLoad(EventArgs e)
    {
        base.OnLoad(e);

        Form2 dlg=new Form2();
        dlg.OtherFrom=this;            
        dlg.Show();
    }

    private void lockOnButton_Click(object sender, EventArgs e)
    {
        if(this.PressLock!=null)
        {
            this.PressLock();
        }
    }
} 
```

表格2代码：

```
public partial class Form2 : Form
{
    public Form2()
    {
        InitializeComponent();
    }
    Form1 form;
    public Form1 OtherFrom
    {
        get { return form; }
        set
        {
            this.form=value;
            this.form.PressLock += new Action(ReadFromForm1);
        }
    }

    public void ReadFromForm1()
    {
        // xml reading here
    }
} 
```

# sql-server - MVC 应用程序的体系结构，用于在 2 个数据库服务器上运行有关数据的 Web 报告

> ID：16111144
> 
> 赞同：0
> 
> 时间：2013-04-19T18:20:38.807
> 
> 标签：sql-server, asp.net-mvc-4, multiple-databases

我有一个 ASP.NET MVC 4 应用程序，它使用美国或加拿大的数据库，具体取决于您所在的网站。

该程序允许您在各种过滤器上过滤作业数据，并将条件转换为具有大量表连接的 SQL 查询。数据被过滤然后分组/聚合。

但是，现在我有一个新要求：对加拿大服务器和美国服务器中的数据进行查询并进行一些分组和聚合（平均工资）。

现在，查找表在两个数据库服务器上都是重复的。

这是我想的方法：

在美国服务器上运行查询，在加拿大服务器上再次运行查询，然后合并内存中的数据。

这是一个用例：按平均工资对公司进行排名。在逻辑上，我只是过滤和查询一个工作表，并按公司和平均工资对结果进行分组。

还有其他方法可以做到这一点吗？我正在考虑使用夜间作业填充报告视图表并针对该报告表运行查询。老实说，查询本身并没有那么快。运行时，再次对加拿大数据库进行查询似乎会使网站速度变慢。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T07:29:38.200

这里有很多变量。如果您没有太多数据，那么只要您让数据库完成尽可能多的工作（即分组、平均等），就可以对每个数据库进行查询和合并。

其他选项包括链接您的数据库并执行单个查询，但这有一些缺点，包括

*   必须链接数据库
*   与链接数据库相关的安全性
*   单个查询将要求两个数据库都在线，而您很可能可以通过两个查询来解决这个问题

预定的预建表有一些优点和缺点，但可能与您拥有 2 个数据库的根本问题并不真正相关，而您可能应该拥有一个（也许，也许不是）。

如果查询速度很慢并且被多次调用，那么如果快照“在”时间的数据与您的业务需求相关且有用，则单个快照一次可以为您节省一些资源。

混合是创建一个“索引视图”，它可以让数据库为您创建一个运行平均值。这应该可以快速查询并且相对不显眼以保持最新状态。

希望其中一些有所帮助。

# c# - 如何将缩短的 html 字符串转换为标签中的实际 html 链接

> ID：16111148
> 
> 赞同：0
> 
> 时间：2013-04-19T18:20:45.267
> 
> 标签：c#, asp.net, html

嘿伙计们，我正在尝试将来自 API 的响应列表打印到标签中，我遇到的一个问题是响应（来自 JSON）是一个带有缩短链接的字符串。当我将该字符串放入标签时，该链接不会被识别为链接，浏览器只会认为它是 HTML，因此没有下划线或指针。我该如何解决这个问题？我已经尝试过 HtmlEncode 它并没有帮助。

这是我想要做的。

```
lblResponse.InnerHtml += "<strong>created_at:</strong> " + item.created_at 
                    + "<strong>&nbsp text:</strong> " + HttpUtility.HtmlEncode(item.text) + "<br />"; 
```

这会将其返回到标签中。尽管在我的浏览器中，缩短的链接未被识别为链接。建议？

created_at：2013 年 4 月 16 日星期二 20:30:32 +0000 文本：这是本周的一些社交媒体新闻... [http://t.co/RR5DKvqUjd](http://t.co/RR5DKvqUjd)

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T18:24:52.523

```
var date = "Tue Apr 16 20:30:32 +0000 2013";
var text = "Here is some social media news for the week... http://t.co/RR5DKvqUjd";
var textwithanchor = Regex.Replace(text, @"\(?\bhttp://[-A-Za-z0-9+&@#/%?=~_()|!:,.;]*[-A-Za-z0-9+&@#/%=~_()|]", delegate(Match match)
    {
        return string.Format("<a href='{0}'>{0}</a>", match.ToString());
    });
var html = "<strong>created_at:</strong> " + date + "<strong>&nbsp text:</strong> " + textwithanchor + "<br />"; 
```

正则表达式从这里优雅地借用：http: [//www.codinghorror.com/blog/2008/10/the-problem-with-urls.html](http://www.codinghorror.com/blog/2008/10/the-problem-with-urls.html)但请注意注意事项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T18:34:06.107

尝试这样的事情：

```
lblResponse.InnerHtml += "<strong>created_at:</strong> " + 
                         item.created_at + 
                         "<strong>&nbsp text:</strong> " + 
                         "<a href=\"" + item.text + "\"" + 
                         HttpUtility.HtmlEncode(item.text) + 
                         "</a><br />"; 
```

# php - PHP重建一个大数组

> ID：16111151
> 
> 赞同：0
> 
> 时间：2013-04-19T18:20:54.140
> 
> 标签：php, arrays

```
array (size=10)
  'image' => 
    array (size=3)
      0 => string 'BlackLingerie(42).jpg' (length=21)
      1 => string 'BlackLingerie(43).jpg' (length=21)
      2 => string 'BlackLingerie(44).jpg' (length=21)
  'text' => 
    array (size=3)
      0 => string '' (length=0)
      1 => string '' (length=0)
      2 => string '' (length=0)
  'author' => 
    array (size=3)
      0 => string '' (length=0)
      1 => string '' (length=0)
      2 => string '' (length=0)
  'date' => 
    array (size=3)
      0 => string '' (length=0)
      1 => string '' (length=0)
      2 => string '' (length=0)
  'verImage' => 
    array (size=3)
      0 => string 'upload' (length=6)
      1 => string 'upload' (length=6)
      2 => string 'upload' (length=6)
  'imagePicsPath' => 
    array (size=3)
      0 => string 'http://127.0.0.1/develop/mvc/public/images/pics/BlackLingerie(42).jpg'/' (length=77)
      1 => string 'http://127.0.0.1/develop/mvc/public/images/pics/BlackLingerie(43).jpg'/' (length=77)
      2 => string 'http://127.0.0.1/develop/mvc/public/images/pics/BlackLingerie(44).jpg'/' (length=77)
  'imageThumbPath' => 
    array (size=3)
      0 => string 'http://127.0.0.1/develop/mvc/public/images/thumbs/BlackLingerie(42).jpg'/' (length=79)
      1 => string 'http://127.0.0.1/develop/mvc/public/images/thumbs/BlackLingerie(43).jpg'/' (length=79)
      2 => string 'http://127.0.0.1/develop/mvc/public/images/thumbs/BlackLingerie(44).jpg'/' (length=79)
  'imagePath' => 
    array (size=3)
      0 => string 'http://127.0.0.1/develop/mvc/public/images/pics/BlackLingerie(42).jpg'/' (length=77)
      1 => string 'http://127.0.0.1/develop/mvc/public/images/pics/BlackLingerie(43).jpg'/' (length=77)
      2 => string 'http://127.0.0.1/develop/mvc/public/images/pics/BlackLingerie(44).jpg'/' (length=77)
  'imageID' => 
    array (size=3)
      0 => string '0' (length=1)
      1 => string '1' (length=1)
      2 => string '2' (length=1)
  'submitUploadImages' => string 'Ladda upp bilder till databas' (length=29) 
```

想将此数组重建为更有用的数组。像这样

```
array
   ( [image0] (
       'name' => 
       'text' => 
       'author' => 
       'date' => 
       'verImage' => 
       'imagePicsPath' => 
       'imageThumbPath' => 
       'imagePath' => 
       'imageID' => 
      )
      [image1] (
       'name' => 
       'text' => 
       'author' => 
       'date' => 
       'verImage' => 
       'imagePicsPath' => 
       'imageThumbPath' => 
       'imagePath' => 
       'imageID' => 
      ) 
```

依此类推，取决于有多少张图片，图像数组中的键保存每个图像的值。比如名字，路径等等。传入的数组是一个 $_POST ，它包含多个表单输入数据。需要一些帮助来破解这个家伙。需要遍历 $_POST 数组，获取内容并转换为新数组？

在使用数据库做我的事情之前，我想要唯一的图像数组来保存图像信息 =)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T18:37:23.027

尝试

```
foreach( $array as $1st_level_key => $1st_level_value ) {
    foreach ( $1st_level_value as $2nd_level_key => $2nd_level_value ) {
        $new_array['image'.$2nd_level_key][$1st_level_key] = $2nd_level_value;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T18:33:41.973

我没有对此进行测试，但它应该可以工作：

```
$incomingArray = $_POST['array'];
$sortedArray = array();

for($i = 0; $i < count($incomingArray); $i++){
    foreach($incomingArray as $key => $value){
        $sortedArray["image".$i][$key] = $value[i];
    }
} 
```

这样做意味着您不必`$sortedArray["image".$i]['NAME'] = $incomingArray['NAME'][$i]`为每个图像值（名称、测试、作者等）编写。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T18:29:58.660

简短的回答是的，差不多是这样的：

```
for($i = 0; $i < count($YourArray); $i++)
{
    $NewArray["image".$i]["name"] = $YourArray["name"][$i];
    ...
} 
```

# javascript - 网站在 android 上有问题

> ID：16111152
> 
> 赞同：0
> 
> 时间：2013-04-19T18:20:54.470
> 
> 标签：javascript, android, ajax, jquery

我有[http://strutmymutt.com/](http://strutmymutt.com/)正常注册和 facebook 登录在 Android 手机上不起作用。在初始页面[http://strutmymutt.com/](http://strutmymutt.com/)上，有 2 个按钮“与 facebook 连接”和“使用标准注册”，但这些按钮在任何地方都可以正常工作，但在 Android 上却不行

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T20:35:29.867

在我的 4.2.2 Android 手机上运行良好。你在用模拟器吗？您是否在模拟器或设备上安装了 facebook 以及可以访问它的帐户？

# c++ - 通过c ++在qml中交换QString

> ID：16111155
> 
> 赞同：2
> 
> 时间：2013-04-19T18:21:00.827
> 
> 标签：c++, qml

此示例应该从 TextInput 读取字符串并在单击鼠标时将其显示在另一个 Rectangle 中。但是，事实并非如此。为什么？

```
//mainwindow.h
#ifndef MAINWINDOW_H
#define MAINWINDOW_H

#include <QDeclarativeView>
#include <QDeclarativeContext>
#include <QObject>
#include <QString>

class MainWindow : public QDeclarativeView
{
    Q_OBJECT

public:
    MainWindow(QWidget *parent = 0);
    ~MainWindow();
};

class Data : public QObject
{
    Q_OBJECT
    Q_PROPERTY(QString teamName READ getTeamName WRITE setTeamName NOTIFY nameChanged)

public:
    Data(QObject *parent = 0);
    ~Data();

public:
    QString getTeamName();
    void setTeamName(QString &);

signals:
    void nameChanged();

private:
    QString n_teamName;
};

#endif // MAINWINDOW_H

//mainwindow.cpp
#include "mainwindow.h"
#include <QDeclarativeView>
#include <QDeclarativeContext>
#include <QString>
#include <QObject>

MainWindow::MainWindow(QWidget *parent)
    : QDeclarativeView(parent)
{

}

MainWindow::~MainWindow()
{

}

Data::Data(QObject *parent) : QObject(parent)
{
    //n_teamName = "Ahoj";
}

Data::~Data(){

}

QString Data::getTeamName(){
    return n_teamName;
}

void Data::setTeamName(QString &newName){
    if(newName != n_teamName){
        n_teamName = newName;
        emit nameChanged();
    }
}

//main.cpp
#include "mainwindow.h"
#include <qdeclarative.h>
#include <QApplication>
#include <QDeclarativeView>
#include <QDeclarativeContext>

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);
    MainWindow w;
    Data d;
    qmlRegisterType<Data>("NData", 1, 0, "Data");
    w.rootContext()->setContextProperty("data", &d);
    w.setSource(QUrl::fromLocalFile("../klik/Main.qml"));

    w.show();

    return a.exec();
}

//main.qml
// import QtQuick 1.0 // to target S60 5th Edition or Maemo 5
import QtQuick 1.1
import NData 1.0
Rectangle {
    id: root
    width: 600
    height: 400
    Rectangle{
        id: text
    ...
        TextInput{
            anchors.fill: text
            anchors.margins: 3
            focus: true
         }
    }
    Rectangle{
    ...
        Text{
            id: copyText
            anchors.centerIn: copy
            text: data.setTeamName()
        }
    }
    Rectangle{
        id: klik
        ...
        MouseArea{
        ...
            onClicked: {
                copyText.text = data.teamName
            }
        }
    }
} 
```

它发出错误：TypeError：表达式'data.setTeamName'[undefined]的结果不是函数。Main.qml:51：错误：无法将 [未定义] 分配给 QString

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T15:42:45.323

我相信您的实际异常是由于以下行

```
text: data.setTeamName() 
```

setTeamName 是数据对象上的私有函数，它不作为插槽公开，因此在调用并分配给文本时未定义。不要介意在执行任务时调用集合是没有意义的。我假设这应该是 data.getTeamName()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T19:06:18.170

`teamName`是 的一个属性`data`，所以只需使用赋值运算符，如`data.teamName = 'some text';`

可能您应该在喜欢的地方添加`id`字段`TextInput`

```
TextInput{
    id: textInput
    anchors.fill: text
    anchors.margins: 3
    focus: true
} 
```

改变`onClicked`，所以

```
MouseArea{
   ...
    onClicked: {
        data.teamName = textInput.text
        copyText.text = data.teamName // copyText.text = textInput.text is fine too
    }
} 
```

# xpath - 无法使用 xpath 查询来查询节点

> ID：16111157
> 
> 赞同：0
> 
> 时间：2013-04-19T18:21:07.440
> 
> 标签：xpath

我在查询 xml 文档中的节点时遇到了一些困难。该文件是[http://ods.od.nih.gov/api/index.aspx?resourcename=BotanicalBackground&readinglevel=Health%20Professional](http://ods.od.nih.gov/api/index.aspx?resourcename=BotanicalBackground&readinglevel=Health%20Professional)

我正在尝试获取第一个节点的文本。

我已经尝试过这些查询，但它们似乎都不起作用。

```
*[name()='ImageURL']
//captionedimage[1]
//Factsheet/RelatedImages/captionedimage[1]/ImageURL/text()
//RelatedImages/*[1] 
```

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T21:36:57.037

您的最后三个 XPATH 似乎正在工作（您可以在[http://www.xpathtester.com/test](http://www.xpathtester.com/test)或[http://www.freeformatter.com/xpath-tester.html](http://www.freeformatter.com/xpath-tester.html)快速查看）。问题应该与您使用的环境有关。

当我在scrapy上尝试它们时，大写的XPATH什么也没得到，只是`//factsheet/relatedimages/captionedimage[1]/imageurl/text()`似乎在工作。可悲的是，这种行为让我感到惊讶，我不知道为什么会这样。但是您绝对应该尝试收集有关您正在使用的环境的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T22:40:42.253

尝试这个...

./Factsheet/RelatedImages/ *[local-name() = 'captionedimage' 和 position()=1]/* [local-name() = 'ImageURL']

# ios - 如何忽略 UIGestureRecognizer 触摸？

> ID：16111160
> 
> 赞同：6
> 
> 时间：2013-04-19T18:21:25.987
> 
> 标签：ios, objective-c, uigesturerecognizer

我`UIGestureRecognizer`用来捕捉水龙头......如果我不想处理特定的水龙头，手册说：

> “如果手势识别器检测到它确定不是其手势的一部分的触摸，它可以将触摸直接传递给它的视图。为此，手势识别器在其自身上调用 ignoreTouch:forEvent:，传入触摸对象。”

不幸的是，我找不到任何使用它的例子。这是我在`UIGestureRecognizer`处理程序中的代码：

```
- (void)singleFingerTap:(UITapGestureRecognizer*)gesture {

    CGPoint pt = [gesture locationInView:self.view];
    CGRect dataRect = CGRectMake(117.0,416.0,670.0,1450);
    CGPoint dataPoint = CGPointMake(pt.x, pt.y);

    //  check to see if point is within the rectangle
    if(!CGRectContainsPoint(dataRect, dataPoint))  {
        NSLog(@"\n\nNOT within subViewData (x: %f  y: %f",dataPoint.x, dataPoint.y);
        [self.view ignoreTouch:gesture];
    }
    else  {
        NSLog(@"\n\nIS within subViewData(x: %f  y: %f",dataPoint.x, dataPoint.y);
    }
} 
```

我不断收到错误消息：

> “UIView”没有可见的@interface 声明选择器“ignoreTouch：”

我已经阅读了应用程序文档，他们有我引用的内容；SO或Google上没有任何东西可以回答这个问题。非常感谢帮助（像往常一样）。:D

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-19T18:26:20.967

如果您想完全阻止识别器接收触摸，可以使用`UIGestureRecognizerDelegate`一种方法：`gestureRecognizer:shouldReceiveTouch:`

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch {
    if (/* some logic here*/) {
        return NO;
    }

    return YES;
} 
```

如果您有多个识别器在使用，您应该`gestureRecognizer`在执行测试逻辑之前检查它是否是您的点击识别器。

* * *

如果您必须处理所有触摸，看起来您需要`ignoreTouch:forEvent:`使用两个参数进行调用：

```
 [recognizer ignoreTouch:someTouch withEvent:someEvent]; 
```

这个方法似乎只供`UIGestureRecognizer`子类使用，所以我建议创建一个子类`UITapGestureRecognizer`来实现你自己的自定义逻辑来确定水龙头的有效性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T18:28:55.383

你说的过程是什么？触摸就在那里，你用它做什么，取决于你。如果您不想对它做任何事情，那就不要做，否则做某事。想要忽略的想法取决于你的逻辑......

我偶然发现了这个问题，但要么你用错误的术语提出了这个问题，要么你想要别的东西：[UIGestureRecognizer blocks subview for handling touch events](https://stackoverflow.com/questions/5222998/uigesturerecognizer-blocks-subview-for-handling-touch-events)

**编辑1：**

> 我的意思是我想忽略水龙头，因为它是另一个 UIView

然后你在错误的地方添加了点击手势`UIView`。

# c# - 尝试使用 Interop 添加到 Word 应用程序对象时，文档为空

> ID：16111161
> 
> 赞同：0
> 
> 时间：2013-04-19T18:21:30.700
> 
> 标签：c#, ms-word, interop

此代码在 Visual Studio 中调试时工作正常，但一旦发布到 IIS，文档始终为空。

```
templatePath = __templatePathParameter;

object objTrue = true;

wordApplication= new Word.Application();

document = wordAplication.Documents.Add(ref templatePath, ref objEmpty, ref objEmpty, ref objTrue); 
```

有任何想法吗？谢谢！

# android - Android 升级数据库文件并保留数据

> ID：16111165
> 
> 赞同：0
> 
> 时间：2013-04-19T18:21:44.130
> 
> 标签：android, database, persistence, upgrade

如何升级存储在原始目录中的数据库并保留数据？我使用以下代码创建数据库：

```
public class DataBaseManager extends SQLiteOpenHelper {

// The Android's default system path of your application database.
//data/data/ and /databases remain the same always. The one that must be changed is com.example which represents
//the MAIN package of your project
private static String DB_PATH = "/data/data/com.example/databases/";

//the name of your database
private static String DB_NAME = "database";

private static SQLiteDatabase mDataBase;

private static DataBaseManager sInstance = null;
// database version    
private static final int DATABASE_VERSION = 1;

/**
 * Constructor Takes and keeps a reference of the passed context in order to
 * access to the application assets and resources.
 */
private DataBaseManager() {
    super(ApplicationContextProvider.getContext(), DB_NAME, null, DATABASE_VERSION);

    try {
        createDataBase();
        openDataBase();
    } catch (IOException e) {
        e.printStackTrace();
    }

}

/**
 * Singleton for DataBase
 *
 * @return singleton instance
 */
public static DataBaseManager instance() {

    if (sInstance == null) {
        sInstance = new DataBaseManager();
    }
    return sInstance;
}

/**
 * Creates a empty database on the system and rewrites it with your own
 * database.
 *
 * @throws java.io.IOException io exception
 */
private void createDataBase() throws IOException {

    boolean dbExist = checkDataBase();

    if (dbExist) {
        // do nothing - database already exist
    } else {

        // By calling this method an empty database will be created into
        // the default system path
        // of your application so we are gonna be able to overwrite that
        // database with our database.
        this.getReadableDatabase();

        try {

            copyDataBase();

        } catch (IOException e) {

            throw new Error("Error copying database");
        }
    }
}

/**
 * Check if the database already exist to avoid re-copying the file each
 * time you open the application.
 *
 * @return true if it exists, false if it doesn't
 */
private boolean checkDataBase() {

    SQLiteDatabase checkDB = null;

    try {
        String myPath = DB_PATH + DB_NAME;
        checkDB = SQLiteDatabase.openDatabase(myPath, null,
                SQLiteDatabase.OPEN_READONLY);

    } catch (SQLiteException e) {

        // database doesn't exist yet.

    }

    if (checkDB != null) {

        checkDB.close();

    }

    return checkDB != null;
}

/**
 * Copies your database from your local assets-folder to the just created
 * empty database in the system folder, from where it can be accessed and
 * handled. This is done by transfering bytestream.
 *
 * @throws java.io.IOException io exception
 */
public void copyDataBase() throws IOException {

    // Open your local db as the input stream
    InputStream myInput = ApplicationContextProvider.getContext().getAssets().open(DB_NAME);

    // Path to the just created empty db
    String outFileName = DB_PATH + DB_NAME;

    // Open the empty db as the output stream
    OutputStream myOutput = new FileOutputStream(outFileName);

    // transfer bytes from the inputfile to the outputfile
    byte[] buffer = new byte[1024];
    int length;
    while ((length = myInput.read(buffer)) > 0) {
        myOutput.write(buffer, 0, length);
    }

    // Close the streams
    myOutput.flush();
    myOutput.close();
    myInput.close();

}

private void openDataBase() throws SQLException {

    // Open the database
    String myPath = DB_PATH + DB_NAME;
    mDataBase = SQLiteDatabase.openDatabase(myPath, null,
            SQLiteDatabase.OPEN_READWRITE);
}

/**
 * Select method
 *
 * @param query select query
 * @return - Cursor with the results
 * @throws android.database.SQLException sql exception
 */
public Cursor select(String query) throws SQLException {
    return mDataBase.rawQuery(query, null);
}

/**
 * Insert method
 *
 * @param table  - name of the table
 * @param values values to insert
 * @throws android.database.SQLException sql exception
 */
public void insert(String table, ContentValues values) throws SQLException {
    mDataBase.insert(table, null, values);
}

/**
 * Delete method
 *
 * @param table - table name
 * @param where WHERE clause, if pass null, all the rows will be deleted
 * @throws android.database.SQLException sql exception
 */
public void delete(String table, String where) throws SQLException {

    mDataBase.delete(table, where, null);

}

/**
 * Update method
 *
 * @param table  - table name
 * @param values - values to update
 * @param where  - WHERE clause, if pass null, all rows will be updated
 */
public void update(String table, ContentValues values, String where) {

    mDataBase.update(table, values, where, null);

}

/**
 * Let you make a raw query
 *
 * @param command - the sql comand you want to run
 */
public void sqlCommand(String command) {
    mDataBase.execSQL(command);
}

@Override
public synchronized void close() {

    if (mDataBase != null)
        mDataBase.close();

    super.close();

}

@Override
public void onCreate(SQLiteDatabase db) {

}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

} 
```

}

我设法升级了数据库，但我没有成功地将数据保存在其中。这种数据库可以吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T20:30:30.607

无需进行原始复制，只需使用 SQLite 创建/更改新的数据库实体。创建一个包含数据库更改的字符串：

```
private static final String ALTER_TABLE3 =
    "ALTER TABLE exercises ADD COLUMN exscore REAL DEFAULT 0.0"; 
```

然后，当用户启动应用程序时，

```
 @Override
 public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
     Log.w(TAG, "Upgrading database from version " + oldVersion + " to "
            + newVersion + ". NO data will be destroyed");

     if (oldVersion == version_that_needs_alter_table3) {
         db.execSQL(ALTER_TABLE3);
         // any other work here, such as copying data, manipulating, etc on SQLite
         // data - NOT file data.
        }
     <snip>
 } 
```

# asp.net-mvc - Telerik MVC 对 KendoUI 的 MVC 扩展

> ID：16111173
> 
> 赞同：0
> 
> 时间：2013-04-19T18:22:08.883
> 
> 标签：asp.net-mvc, kendo-ui, telerik

我需要将我的网格代码从 MVC Extensions 迁移到 KendoUI。是否有任何工具或迁移列表可以帮助我快速迁移此类内容？

```
 <div id="divChargesGrid" style="overflow: hidden; height: auto">
         @(Html.Telerik().Grid<SAM.Framework.Utilities.CloneClasses.vxChargeBO>(Model.VXChargeBOs)
        .Name("ChargesGrid")
        .DataKeys(keys => keys.Add(c => c.ChargeID))

        .Columns(columns =>
        {

          columns.Bound(c => c.ChargeID).Hidden(true);
          columns.Bound(c => c.ChargeNo)
           .ClientTemplate("<a href='/Billing/Charge/Edit/<#= ChargeID #>?yz=<#= AgencyObfuscated #>'> <#= ChargeNo #> </a>")
              .Width(85).Title("Charge No.");
          columns.Bound(c => c.ChargeStatusType).Title("Status").Width(75);
          columns.Bound(c => c.ServiceDate).Format("{0:MM/dd/yyyy}").Width(100).Title("Date of Service");
          columns.Bound(c => c.ChargeCodeDescription).Title("Description").Width(100);
          columns.Bound(c => c.PatientNo).Title("Patient No.").Width(85);

          columns.Bound(c => c.Mileage).Title("Mileage").Width(75);
          columns.Bound(c => c.Active).Width(75);
          columns.Bound(c => c.UpdatedDate).Width(100).Format("{0:d}").Title("Updated Date");
          columns.Bound(c => c.UpdatedBy).Width(100).Title("Updated By");
          columns.Bound(c => c.CreatedDate).Width(100).Format("{0:d}").Title("Created Date");
          columns.Bound(c => c.CreatedBy).Width(100).Title("Created By");

          columns.Bound(c => c.Agency).Hidden(true);
          columns.Bound(c => c.PatientID).Hidden(true);
          columns.Bound(c => c.AdmissionID).Hidden(true);
          columns.Bound(c => c.AdmissionNo).Hidden(true);
          columns.Bound(c => c.BatchNo).Hidden(true);
          columns.Bound(c => c.EpisodeID).Hidden(true);
          columns.Bound(c => c.ChargeStatusTypeID).Hidden(true);
          columns.Bound(c => c.UnitCode).Hidden(true);

        })
        .ClientEvents(events => events.OnDataBinding("onChargesGridDataBinding").OnDataBound("onChargesGridDataBound"))
  .DataBinding(dataBinding => dataBinding.Ajax().Select("GridChargeIndexSelect", "Charge", new { @Agency = Model.AgencyProfile.Agency
      , @startDate = Model.FromDate, @endDate = Model.ToDate, @employeeSearchText = Model.EmployeeSearchText, @patientSearchText = Model.PatientSearchText
      , @whichSearch = Model.WhichSearch, @ShowPosted = Model.ShowPosted, @ShowNotPosted = Model.ShowNotPosted, @ShowResults = Model.ShowResults }))
        .Sortable(sorting => sorting.Enabled(true))
        .Pageable(paging => paging.Enabled(true).PageSize(15))
        .Filterable()
        .Scrollable(scrolling => scrolling.Height(400))
        .Resizable(resizing => resizing.Columns(true))
        .HtmlAttributes(new { style = "width:99.8%;" })
    ) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T18:25:44.353

没有工具，但文档有一些说明：

[http://docs.kendoui.c​​om/getting-started/using-kendo-with/aspnet-mvc/migration/migrating-from-telerik-extensions-for-aspnet-mvc](http://docs.kendoui.com/getting-started/using-kendo-with/aspnet-mvc/migration/migrating-from-telerik-extensions-for-aspnet-mvc)

[http://docs.kendoui.c​​om/getting-started/using-kendo-with/aspnet-mvc/migration/widgets/grid](http://docs.kendoui.com/getting-started/using-kendo-with/aspnet-mvc/migration/widgets/grid)

# ios - Cydia 包 preinst/postinst 无法重新加载启动守护进程

> ID：16111175
> 
> 赞同：1
> 
> 时间：2013-04-19T18:22:21.383
> 
> 标签：ios, debian, jailbreak, cydia, launch-daemon

我正在为越狱的 iOS 编写一个应用程序，其中包括一个 UI 应用程序和一个启动守护程序。我将启动守护程序设置为 UI 应用程序项目的子项目。

一切正常，除了我无法卸载包，然后将启动守护程序作为安装过程的一部分重新加载，或者`chown`将启动守护程序 plist 文件重新加载到`root:wheel`.

在`mainproject/subproject/layout/DEBIAN/preinst`我有以下代码：

```
#!/bin/sh
chown root:wheel /Library/LaunchDaemons/com.plistname.plist
launchctl unload /Library/LaunchDaemons/com.plistname.plist 2>&1 > /dev/null 
```

并在`mainproject/subproject/layout/DEBIAN/postinst`：

```
#!/bin/sh
chown root /Library/LaunchDaemons/com.plistname.plist
launchctl load /Library/LaunchDaemons/com.plistname.plist 
```

如果`502:staff`我卸载该软件包并重新安装它，则会创建 plist，但它归.`syslog``launchctl unload``launchctl load`

知道有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T22:26:43.867

原来我的问题是子项目中的`preinst`和`postinst`脚本没有运行。我不知道这是否是 debian 软件包应该运行的方式，或者它只是 theos 处理子项目方式中的一个错误，但我能够通过简单地将这些命令移动到主项目的`preinst`和脚本来解决它。`postinst`

这并不理想，因为从逻辑上讲，它们属于子项目，但它确实有效。

# javascript - javascript值出现空不知道如何处理它

> ID：16111181
> 
> 赞同：0
> 
> 时间：2013-04-19T18:22:50.157
> 
> 标签：javascript

```
function updategeneral() {
    //tmp = "fine_" + tmp + "_";
    var actual = doc.findItem("1speed").value;
    var posted = doc.findItem("2speed").value;
    amt = "";
    if (1speed != "" && 2speed != "") {
        var a = 1 * 1speed;
        var b = 1 * 2speed;
        if (a - b <= 9) {
            alert(amt);
            amt = doc.getDefault("general_spb_1_to_15");
        } else if (a - b <= 15) {
            amt = doc.getDefault("general_spb_16_to_25");
        } else if (a - b <= 25) {
            amt = doc.getDefault("general_spb_15_to_19");
        } else if (a - b <= 29) {
            amt = doc.getDefault("general_spb_26+");
        }
        doc.findItem("mcare_amount").value = amt;
        alert(doc.findItem("mcare_amount").value = amt);
    }
} 
```

默认值为：

```
general_spb_1_to_15=30.00 || general_spb_16_to_25=40.00 || general_spb_26+=50.00 
```

我的问题是当 amt 为空或 0 时，它总是会出现`general_spb_1_to_15=30.00`。我不知道如何解决这个问题 - 有人可以帮忙吗？我使用的值`1speed = 20`是`2speed = 25`负数或空值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T18:30:34.790

假设您的浏览器引擎将`1speed`and解释`2speed`为变量（有些会，有些不会 - 变量名不应该以数字开头，所以用`speed1`and替换它们可能是明智的`speed2`）......

但是假设，那么您描述的情况是在处理您的 if 语句时看到`a - b`=的值`-5`，这意味着它被

```
if (a - b <= 9) {
   alert(amt);
   amt = doc.getDefault("general_spb_1_to_15");
} 
```

要更改您得到的结果，您应该在`if`语句结构中添加另一个选项。也许：

```
if (b > a)
{
     //do something for this special case
} else if (a - b <= 9) {
     alert(amt);
     amt = doc.getDefault("general_spb_1_to_15");
} else if ... 
```

您可能还希望专门处理其中一个或两个`speed1`/`speed2`为空的情况，作为外部`if`块上的 else。

# javascript - 当标签为空时显示 Primefaces selectOneMenu

> ID：16111183
> 
> 赞同：2
> 
> 时间：2013-04-19T18:22:55.740
> 
> 标签：javascript, primefaces

`&nbsp;`出于某种原因，在选择带有空标签的选项时会显示 selectOneMenu 。

首次加载页面时，它工作正常，但如果我在列表中选择空白选项，它会显示`&nbsp;`

```
<p:selectOneMenu id="eyeColor" editable="true" value="#{model.eyeColor}">
    <f:selectItem itemLabel=" " value="#{null}"/>
    <f:selectItems value="#{selectionList.getSelectList(SelectListDefinition.SELECT_EYE_COLOR)}" />
</p:selectOneMenu> 
```

知道是什么原因造成的吗？

以及如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-19T12:38:37.780

Primefaces 团队已经解决了该问题（实际上，该错误似乎已被修复并在以后的版本中重新出现）：

[官方错误说明](http://code.google.com/p/primefaces/issues/detail?id=5624)

从 3.5.9 版开始，Primefaces Elite 用户已经可以使用该修复程序（按月付费的订阅服务），并且应该在 4.0 版发布时普遍可用（这将是免费和开源的）：

[Primefaces 下载](http://www.primefaces.org/downloads.html)

[在Primefaces 论坛](http://forum.primefaces.org/viewtopic.php?f=3&t=28834)上也有关于这个的小讨论。

*编辑：自 2013 年 10 月 3 日起，此修复程序作为社区版本 4.0 免费提供：[Primefaces 博客](http://blog.primefaces.org/?p=2918)*

# c++ - 在 qt 中从 necessitas 显示当前窗口上方的窗口

> ID：16111186
> 
> 赞同：1
> 
> 时间：2013-04-19T18:23:05.800
> 
> 标签：c++, qt, qt-creator

我正在使用 Necessitas 在 Android 上编译和运行我的 QT 应用程序。如果我想在 Main Wondow 上显示另一个窗口，我会从 QT Creator 创建一个 UI 文件，它也会创建一个类。然后，我将创建该类的实例，最后调用`exec()`成员函数。

但是，在 Necessitas QT Creator 中，编译器告诉我 memeber 函数`exec()`不存在。如果我尝试使用`show()`成员函数，什么都不会发生。另外，如果我隐藏主窗口，程序就会退出。

那么，我该怎么做才能显示我用 QT Creator 创建的另一个窗口呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T19:46:12.750

[http://qt-project.org/doc/qt-4.8/qstackedwidget.html](http://qt-project.org/doc/qt-4.8/qstackedwidget.html)

这本质上是一种布局，其行为类似于选项卡式/分页小部件，但它不显示任何选项卡。这应该可以得到你想要的。

# java - testng 框架中每个测试方法后的清理

> ID：16111192
> 
> 赞同：3
> 
> 时间：2013-04-19T18:23:34.517
> 
> 标签：java, testing, testng

我有 100 种测试方法。每次测试后，我需要执行一些操作（数据清理）。这 100 个测试中的每一个都有不同的操作。这 100 个测试不在一个包或类中。它们是分布式的。

我怎样才能做到这一点？

现在，如果测试通过，清理就会发生，因为它是测试的一部分。但是，如果测试失败，则不会进行清理。我怎样才能使这项工作？

任何指针都会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T13:44:55.723

如果测试没有任何共同的清理，您可以确保使用 try/finally 块从测试方法中清理测试，例如：

```
try {
   // do test
}
finally {
   // do cleanup
} 
```

如果测试方法之间有任何共同的清理，您可以用来`@AfterMethod`进行清理。

在您的情况下，听起来好像没有太多常见的清理，所以第一个可能对您更有效。如果您需要 100 种不同的清理方法，或者是否有任何常见的设置/清理，也可能值得考虑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T07:24:49.010

@AfterMethod 意味着您需要每个类都获取此方法。所以你需要去编辑每个类/方法。@AfterGroups 也一样。

我建议的是实现[IInvokedMethodListener](http://testng.org/javadocs/org/testng/IInvokedMethodListener.html)。这将为您提供 beforeInvocation 和 afterInvocation 方法。在 afterInvocation 方法中，实现您的清理代码。创建一个包含所有需要此清理的测试的套件文件并指定此侦听器。

希望能帮助到你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-14T15:37:35.707

听起来您可能已经在使用 @AfterMethod 在测试后进行清理。要在失败后使 @AfterMethod 工作，您需要使用：

```
@AfterMethod(alwaysRun=true) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-20T13:12:07.253

您可以使用组并在某处运行@AfterGroups。还有一个@BeforeGroups。使用构建工具设置它有点乏味，并且与 IDE 也有一些交互。我相信还有一个 BeforeSuite 和 AfterSuite。

另一种方法是使用 Spring 并在所有测试中使用相同的 spring 上下文（spring 上下文以这种方式被重用）。然后，您可以在测试后销毁上下文时做一些事情。

# php - 使用 phpmailer 发送到虚假电子邮件地址

> ID：16111193
> 
> 赞同：0
> 
> 时间：2013-04-19T18:23:35.660
> 
> 标签：php, email, smtp, phpmailer, amazon-ses

我正在为一个项目开发一个批量电子邮件类，并通过 phpmailer 使用亚马逊的 SES smtp。我正在尝试找出一种方法来测试发送多封电子邮件而不会被主机列入黑名单、垃圾邮件阻止或阻止。理想情况下，我希望测试 10,000 到 40,000 次单独的发送。理想情况下，我会将测试提交发送到虚拟地址。

我知道有[http://tempinbox.com/](http://tempinbox.com/) 或 [http://www.fakeinbox.com/等服务](http://www.fakeinbox.com/)

但我想要的是一个可靠的、值得信赖的服务，可以在不使用我自己的个人电子邮件地址的情况下测试批量邮件。

有人对这个有经验么？如果是这样，请您指出正确的方向。或者让我知道这个问题是否可以更好地发布在其他地方。提前致谢。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T20:55:51.060

如果是我，我会设置一个新域（或使用现有域），并设置一个[包罗万象的帐户](http://en.wikipedia.org/wiki/Catch-all)。这样您就可以向 test1@mydomain.com、test2@mydomain.com、test3@mydomain.com 等发送电子邮件，而不必实际设置所有这些电子邮件帐户。

实际上，我使用我拥有的一个域来执行此操作，但更多的是 200-300 个单独的帐户，而不是 40000 个。

使用此方法，所有电子邮件都将被定向到一个邮箱。

如果我对 AWS-SES 没记错的话，你很可能不得不将输出速度限制为 5/秒（或者 AWS 会为你做这件事，而不是优雅地做）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T19:22:40.377

在您的电子邮件地址后面使用 gmail 地址和加号 (+) 以及额外的标识符。例如，如果您的 gmail 帐户是

```
spamtester@gmail.com 
```

将您的测试电子邮件发送至

```
spamtester+1@gmail.com
spamtester+2@gmail.com
spamtester+3@gmail.com
...etc 
```

它们可能最终都会出现在您的垃圾邮件文件夹中，但您可以将它们列入白名单，或者只在垃圾邮件中查看它们。

*   布赖恩

参考： http: [//gmailblog.blogspot.com/2008/03/2-hidden-ways-to-get-more-from-your.html](http://gmailblog.blogspot.com/2008/03/2-hidden-ways-to-get-more-from-your.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T19:09:29.640

我相信有很多公司提供这样的服务。原则是，您的邮件队列将发送到服务公司的主服务器，然后从那里分发到公司在其云中的许多邮件服务器上，然后从那里进行物理发送。这可以确保您的电子邮件被传递，并且发送它们的服务器不会因为分发而被列入黑名单。不幸的是我没有链接，但谷歌叔叔肯定会有一些答案。希望这个对你有帮助。干杯。

# time - 在 Cygwin 中计算时间或 cpu 点击次数

> ID：16111200
> 
> 赞同：1
> 
> 时间：2013-04-19T18:24:06.930
> 
> 标签：time, cygwin, cpu, time.h

我无法计算 cygwin 中 cpu 处理的时间？这是为什么呢？我需要一个特殊的命令吗？计算 cpu 中的点击次数是由包含 time.h 后的时钟功能完成的！

不过，在我在 Visual Studio 中完成之后，我就无法在 cygwin 上运行？这是为什么！

这是代码。

```
#include <iostream>
#include <time.h>
using namespace std;
int main()
{

    clock_t t1,t2;

    int x=0;
    int num;
    cout << "0 to get out of program, else, number of iterations" << endl;
    cin>>num;

    if(num==0)
    system(0);
    t1=clock();
    while (x!=num)
        {
        cout << "Number "<<x<<" e"<< endl;
        if(x%2==0)
            cout << "Even" << endl;
        else
            cout << "Odd" << endl;
        x=x+1;
        }

    t2=clock();
    float diff ((float)t2-(float)t1);
    cout<<diff<<endl;
    float seconds = diff / CLOCKS_PER_SEC;
    cout<<seconds<<endl;
    system ("pause");
    return 0;
} 
```

抱歉英语不好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T19:50:42.653

看起来 clock() 函数对于 Windows 和 POSIX（以及因此 Cygwin）的定义不同。MSDN 说 Windows clock() 返回“自进程启动以来经过的挂钟时间”，而 POSIX 版本返回“实现对进程使用的处理器时间的最佳近似值”。在您的示例中，该过程将花费几乎全部时间等待终端的输出完成，这不计入处理时间。

# javascript - 如何避免丢失样式表导致性能下降？

> ID：16111201
> 
> 赞同：0
> 
> 时间：2013-04-19T18:24:13.143
> 
> 标签：javascript, html, ios, css

我正在为带有 uiwebview 的 iOS 应用程序提供静态 .html 页面，大约 50% 的时间，iOS 应用程序包中会有一个本地 .css 文件，它在视觉上增强了所服务的 .html 文件的内容。然而，另外约 50% 的时间，这个 .css 文件根本就不存在。

我担心的是，这会延迟整个 .html 页面的加载和显示，因为它会搜索头部中引用的（缺失的）.css 文件，如下所示：

```
<link rel=stylesheet href=whatever.css> 
```

有什么技术可以用来解决这个问题吗？也许与 javascript onerror 相关的东西会很有用，只是告诉页面不要浪费太多时间寻找，因为如果文件在那里，它将是本地的，并且可以立即使用。

谢谢！

# c# - 在页面重新加载时，所有对象都被销毁？

> ID：16111205
> 
> 赞同：3
> 
> 时间：2013-04-19T18:24:31.240
> 
> 标签：c#, asp.net, webforms

如何在 c# / asp.net 中创建在页面重新加载/回发后仍然存在的对象 X 的持久列表？这在 c# 中从来都不是问题，但在 asp.net 中，回发会清除所有内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T18:25:41.543

Asp.net 是为[无状态的](http://en.wikipedia.org/wiki/Stateless_protocol)[HTTP](http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol)协议构建的，因此您无法在回发时找到对象。您可以改用视图状态。

## 视图状态

> 简而言之，Microsoft® ASP.NET 视图状态是 ASP.NET 网页使用的一种技术，用于在回发期间保持对 Web 窗体状态的更改。

## 视图状态的作用

> 视图状态在生活中的目的很简单：它可以在回发中保持状态。（对于 ASP.NET 网页，它的状态是构成其控件层次结构的控件的属性值。）这就引出了一个问题，“需要保持什么样的状态？” 为了回答这个问题，让我们首先看看哪些状态不需要在回发中持久化。回想一下，在页面生命周期的实例化阶段，会创建控件层次结构并分配声明性语法中指定的那些属性。由于在构造控件层次结构时，这些声明性属性会在每次回发时自动重新分配，因此无需将这些属性值存储在视图状态中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T18:25:42.437

您可以随时将您的项目保存到当前会话。

例如：

```
Session["var1"] = // whatever you want 
```

并且您的 Session 对象将一直存在，直到当前会话过期，而不管 PostBacks。

# opengl - GLSL - 基于噪声的凹凸映射

> ID：16111206
> 
> 赞同：2
> 
> 时间：2013-04-19T18:24:31.380
> 
> 标签：opengl, glsl, bump-mapping

我正在尝试在 GLSL 片段和顶点着色器中创建类似于下图的灰泥纹理。

![在此处输入图像描述](https://i.stack.imgur.com/RLp46.jpg)

我知道有多种方法可以做到这一点。但是，我想专注于根据我从噪声函数接收到的值来扰乱片段着色器中的表面法线。

我的思考过程如下..

1.  将噪声函数发送到我当前位置按某个标量缩放。
2.  一旦我有了噪声，我就可以扰动表面法线并将其与我的 Phong 着色模型一起使用。

但是，我不确定我从那里去哪里。

这是我到目前为止所拥有的。

顶点着色器 - 计算切线是基于对象范数构建切线向量的辅助方法。

```
#version 120
varying vec3 LightDir;
varying vec3 EyeDir;
varying vec3 MCPoint;

main(){
 MCPoint = gl_Vertex.xyz;

 EyeDir = vec3(gl_ModelViewMatrix * gl_Vertex);
 vec3 LightPosition = gl_LightSource[0].position.xyz;
 vec3 tangent = calculateTangent(gl_Normal);

 // Building the Tangent matrix
 vec3 n = normalize(gl_NormalMatrix * gl_Normal);
 vec3 t = normalize(gl_NormalMatrix * tangent);
 vec3 b = cross(n, t);

 vec3 v;
 v.x = dot(LightPosition, t);
 v.y = dot(LightPosition, b);
 v.z = dot(LightPosition, n);
 LightDir = normalize(v);

 v.x = dot(gl_vertex.xyz, t);
 v.y = dot(gl_Vertex.xyz, b);
 v.z = dot(gl_Vertex.xyz, n);
 EyeDir = normalize(v);

 gl_Position = ftransform();
} 
```

片段着色器 - 到目前为止...

```
#version 120
varying vec3 LightDir;
varying vec3 EyeDir;
varying vec3 MCPoint;

main(){

  vec2 _noisexy = noise2(MCPoint.xy * 1.65);

  // offset normal

  // Calculate phong shading based on LightDir, EyeDir, & Newly distorted Normal

 gl_FragColor= intensity * vec4(my_surface_color, 1.0);
} 
```

现在，我的实际问题。

1.  我抵消什么正常？我会正常偏移物体吗？我一直在读到凹凸映射应该发生在对象空间中。

2.  将偏移量应用于法线的最佳方法是什么？

一些系统信息：Mac OSX - OpenGL 3.2 - 着色器必须能够在不支持新 3.2 的旧 Mac 上工作。

# gridview - 如何将下拉列表动态添加到 Gridview 数据行中

> ID：16111207
> 
> 赞同：0
> 
> 时间：2013-04-19T18:24:32.613
> 
> 标签：gridview, dynamic

我需要做的是，当用户从下拉列表中选择一个值时，它将在 gridview 的行内生成动态标签和动态下拉列表。标签的数量与 DDL 的数量相同，其数量取决于用户的选择。我成功地显示了标签，但没有显示 DDL。

ASPX：

```
 <div id="dvCoverages" class="TD">
                <asp:Literal ID="litCoverages" Text="Coverages" runat="server" /></div>
            <div class="MAD">
                <asp:GridView ID="gvCoverages" runat="server" AllowSorting="True" AutoGenerateColumns="False"
                    GridLines="None">
                    <Columns>
                        <asp:BoundField DataField="LeftLabel"></asp:BoundField>
                        <asp:TemplateField></asp:TemplateField>
                        <asp:BoundField DataField="RightLabel"></asp:BoundField>
                        <asp:TemplateField></asp:TemplateField>
                    </Columns>
                </asp:GridView>
            </div> 
```

C＃：

```
public void SetCoveragesDDL(EndososWS.CoveragesInfo[] objCoveragesInfo)
    {
        DataTable dt = new DataTable();
        dt.Columns.Add("LeftLabel");
        dt.Columns.Add(new DataColumn("LeftDDL", typeof(string)));
        dt.Columns.Add("RightLabel");
        dt.Columns.Add(new DataColumn("RightDDL", typeof(string)));

        List<Label> labels = new List<Label>();
        List<DropDownList> DDLs = new List<DropDownList>();
        int numberOfCoverages = objCoveragesInfo.Length;
        if (numberOfCoverages != 0)
        {
            for (int i = 1; i <= numberOfCoverages; i++)
            {
                DataRow dr = dt.NewRow();
                var tempLabel = new Label();
                var tempDDL = new DropDownList();

                tempLabel.ID = "label" + i;
                tempLabel.Text = objCoveragesInfo[i - 1].CoverageName;
                tempDDL.ID = "textBox" + i;
                tempDDL.Attributes.Add(">> Select <<", "");

                if (i % 2 == 0)
                {
                    dr["RightLabel"] = tempLabel.Text + ": ";

                    labels.Add(tempLabel);
                    DDLs.Add(tempDDL);
                }
                else
                {
                    dr["LeftLabel"] = tempLabel.Text + ": " + tempDDL.SelectedIndex;
                    dr["LeftDDL"] = tempDDL;

                    labels.Add(tempLabel);
                    DDLs.Add(tempDDL);
                    if (i + 1 <= numberOfCoverages)
                    {
                        i++;
                        tempLabel.ID = "label" + i;
                        tempLabel.Text = objCoveragesInfo[i - 1].CoverageName;
                        tempDDL.ID = "textBox" + i;
                        tempDDL.Attributes.Add(">> Select <<", "");

                        dr["RightLabel"] = tempLabel.Text + ": ";

                        labels.Add(tempLabel);
                        DDLs.Add(tempDDL);
                    }
                }

                dt.Rows.Add(dr);
            }

            gvCoverages.DataSource = dt;
            gvCoverages.DataBind();
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T18:47:30.873

尝试做这样的事情

```
tempDDL.Insert(0, new ListItem(">> Select <<", string.Empty)); 
```

代替

```
tempDDL.Attributes.Add(">> Select <<", ""); 
```

# soap - Zend Framework 2 SOAP 服务器 WSDL 加载失败

> ID：16111209
> 
> 赞同：1
> 
> 时间：2013-04-19T18:24:40.387
> 
> 标签：soap, wsdl, zend-framework2

我无法让 SOAP 服务器在 Zend Framework 2 模块中工作。我不完全确定，但我相信问题出在 WSDL 文件上。我尝试通过 Zend Framework 提供的 Autodiscover 创建 WSDL 文件。这是错误日志：

```
[Fri Apr 19 20:39:29 2013] [error] [client 172.23.31.109] PHP Warning:  SoapServer::SoapServer(): I/O warning : failed to load external entity "http-LINK/services?wsdl" in /PATH/public_html/vendor/zendframework/zendframework/library/Zend/Soap/Server.php on line 749
[Fri Apr 19 20:39:29 2013] [error] [client 172.23.31.109] PHP Fatal error:  SOAP-ERROR: Parsing WSDL: Couldn't load from 'http-LINK/services?wsdl' : failed to load external entity "http-LINK/services?wsdl"\n in /PATH/public_html/vendor/zendframework/zendframework/library/Zend/Soap/Server.php on line 749 
```

我为此服务测试添加了一个自己的模块，这是结构，模块称为“服务”：

```
-Services
--config
---module.config.php
--src
---Services
----API
-----1.0
------servicesAPI.php
---Controller
----ServicesController.php
--view
---services
----serivces
-Module.php
-autoload_classmap.php 
```

这是我的文件“servicesAPI.php”

```
class servicesAPI {
    /**
     * This method takes a value and gives back the md5 hash of the value
     * 
     * @param String $value
     * @return String
     */
    public function md5Value($value) {
        return md5($value);
    }

} 
```

这是 ServicesController.php：

```
namespace Services\Controller;

ini_set("soap.wsdl_cache_enabled", 0);

use Zend\Mvc\Controller\AbstractActionController;
use Zend\Soap\AutoDiscover;
use Zend\Soap\Server;

require_once __DIR__ . '/../API/1.0/servicesAPI.php';

class ServicesController extends AbstractActionController {

    private $_options;
    private $_URI = "http-LINK/services";
    private $_WSDL_URI = "http-LINK/services?wsdl";

    public function indexAction() {
        if (isset($_GET['wsdl'])) {
            $this->handleWSDL();
        } else {
            $this->handleSOAP();
        }
    }

    private function handleWSDL() {

        $autodiscover = new AutoDiscover();
        $autodiscover->setClass('servicesAPI')
                ->setUri($this->_URI);
        $autodiscover->handle();
    }

    private function handleSOAP() {

        $soap = new Server($this->_WSDL_URI);
        $soap->setClass('servicesAPI');
        $soap->handle();
    }

} 
```

因此，当我部署它并在浏览器中打开 http-LINK/services 时，它给了我以下信息：

```
<?xml version="1.0" encoding="UTF-8"?>
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">
        <SOAP-ENV:Body>
                <SOAP-ENV:Fault>
                        <faultcode>WSDL</faultcode>
                        <faultstring>
SOAP-ERROR: Parsing WSDL: Couldn't load from 'http-LINK/services?wsdl' : failed to load external entity "http-LINK/services?wsdl"
</faultstring>
                        <detail/>
                </SOAP-ENV:Fault>
        </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

在此调用中，还写入了 PHP 错误输出！如果我尝试在浏览器中打开 services?wsdl，它会显示这个（chrome 和 safari）：

```
This page contains the following errors:

error on line 3 at column 1: Extra content at the end of the document
Below is a rendering of the page up to the first error.

This method takes a value and gives back the md5 hash of the value 
```

但如果我检查元素，它看起来完全没问题：

```
<?xml version="1.0" encoding="utf-8"?>
<definitions xmlns="http://schemas.xmlsoap.org/wsdl/" xmlns:tns="http-LINK/services" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:soap12="http://schemas.xmlsoap.org/wsdl/soap12/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap-enc="http://schemas.xmlsoap.org/soap/encoding/" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" name="servicesAPI" targetNamespace="http-LINK/services"><types><xsd:schema targetNamespace="http-LINK/services"/></types><portType name="servicesAPIPort"><operation name="md5Value"><documentation>This method takes a value and gives back the md5 hash of the value</documentation><input message="tns:md5ValueIn"/><output message="tns:md5ValueOut"/></operation></portType><binding name="servicesAPIBinding" type="tns:servicesAPIPort"><soap:binding style="rpc" transport="http://schemas.xmlsoap.org/soap/http"/><operation name="md5Value"><soap:operation soapAction="http-LINK/services#md5Value"/><input><soap:body use="encoded" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="http-LINK/services"/></input><output><soap:body use="encoded" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="http-LINK/services"/></output></operation></binding><service name="servicesAPIService"><port name="servicesAPIPort" binding="tns:servicesAPIBinding"><soap:address location="http-LINK/services"/></port></service><message name="md5ValueIn"><part name="value" type="xsd:string"/></message><message name="md5ValueOut"><part name="return" type="xsd:string"/></message></definitions> 
```

我可以使用任何 xml 验证器来验证这个 xml，它似乎是有效的。

我在 stackoverflow 上阅读了所有与此相关的帖子，搜索了谷歌，但没有一个解决方案对我有帮助。这是我尝试过的其他内容的简短列表：

*   据此：[https://bugs.php.net/bug.php?id=48216](https://bugs.php.net/bug.php?id=48216)我试图将 wsdl xml 保存到一个文件中，并在启动肥皂服务器时从该文件中打开它，失败
*   我尝试使用 try/catch 运行 autodiscover 和 soapserver 语句来捕获任何异常，没有出现
*   我尝试通过 toXML() 和其他输出回显，失败
*   使用 XMLReader::open 和 isValid 来确保 xml 是有效的（它是）

更多信息：

*   PHP 版本 5.3.23
*   Ubuntu 服务器 11.04
*   php-soap 模块已加载
*   Zend 框架版本 2.1.4

任何帮助或提示表示赞赏。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-18T13:37:54.357

尝试以这种方式实例化 Soap Server 类：

```
...
private function handleSOAP() {
    $soap = new Server(
        null, array(,
            'wsdl' => http-LINK/services?wsdl,
        )
    );
    $soap->setClass('servicesAPI');
    $soap->handle();
}
.... 
```

此外，您应该将此行添加到 indexAction() 的末尾

```
return $this->getResponse(); 
```

..它禁用布局。

# html - RTMP链接查询

> ID：16111210
> 
> 赞同：1
> 
> 时间：2013-04-19T18:24:42.183
> 
> 标签：html, flash, rtmp

我在 html 代码中找到了一个指向实时视频源的链接，如下所示：

```
<embed height="500" width="650" flashvars="file=foxmovies&amp;streamer=rtmp://198.7.58.79/edge&amp;rtmp.subscribe=true&amp;quality=best&amp;controlbar=bottom&amp;rtmp.tunneling=false&amp;frontcolor=#fff&amp;backcolor=#000&amp;stretching=exactfit&amp;autostart=true" wmode="transparent" allowfullscreen="true" allowscriptaccess="always" quality="high" src="http://s.zuuk.net/ply.swf" type="application/x-shockwave-flash"> 
```

我想知道 RTMP 流的实际链接是什么。我对“文件”、“edge&”和 flashvars 感到困惑。

谢谢

**编辑1**

```
<script type="text/javascript">
jwplayer("dplayer").setup({
    id: 'dplayer',
       flashplayer: "http://player.ilive.to/player.swf",
    provider: "rtmp",
       streamer: "rtmp://redirect.isearch.to/edge",
    file: "2tag4dzgwof5ma2.flv",
    autostart: "true",
       plugins: {
           "http://player.ilive.to/ova/ova-jw.swf": {
              "ads": {
                 "schedule": [
                     {
                        "position": "pre-roll",
                        "tag": "http://ad4.liverail.com/?LR_PUBLISHER_ID=1912&LR_PARTNERS=718594&LR_SCHEMA=vast2-vpaid&LR_AUTOPLAY=1&LR_CONTENT=6&LR_VERTICALS=[entertainment]&LR_TITLE=[Disney_channel]&LR_VIDEO_ID=[38804]&LR_URL=[http://www.ilive.to/channels/38804/Disney_channel]"
                     }
                 ]
              },

              "debug": {
                  "levels": "fatal, config, vast_template, vpaid, http_calls, playlist, api"
              }
           } 
       },
       height: '100%',
       width: '100%'
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T18:52:19.850

flashvars 是传递到 Flash 电影中的键/值对。

“&” 是键/值之间的分隔符（它实际上只是“&”，但可能已经在某处被 html 化了）。

因此，在您的情况下，传入的值是：

文件 = 福克斯电影

流媒体 = rtmp://198.7.58.79/edge

rtmp.subscribe = true

质量=最好

控制栏 = 底部

rtmp.tunneling=false

正面颜色=#fff

背景颜色=#000

拉伸=精确

自动启动=真

Flash 电影如何解释它们以生成流 URL 取决于 Flash 电影中的代码。

# matlab - 我的模拟模型中的统一随机数块

> ID：16111211
> 
> 赞同：0
> 
> 时间：2013-04-19T18:24:47.663
> 
> 标签：matlab, random, simulink

我在我的模拟模型中使用了 2 个统一随机数块，但每次我运行程序时，它们都会生成最后一个数字（完全相同）。我需要用新生成的数字测试模型。我应该怎么办？

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T18:28:40.127

随机数生成器“从一开始”就生成相同的随机数这一事实是一个特性，而不是一个错误。它允许进行可重复的测试。您需要使用“随机种子”初始化随机数生成器，以便每次都给出不同的结果 - 例如，您可以使用当前时间。当您这样做时，建议您存储使用的种子 - 这意味着您可以返回并再次运行完全相同的代码。

要初始化随机种子，您可以使用[此较早答案中给出的方法](https://stackoverflow.com/questions/4682080/how-to-set-custom-seed-for-pseudo-random-number-generator)

在那个答案中，他们正在播种`0`-这与您尝试做的相反。您将要生成一个非随机数（如日期），并使用它。可以在[这里](http://www.mathworks.com/help/matlab/math/controlling-random-number-generation.html)找到一篇非常有用的文章。去引用：

> 如果您在新的 MATLAB 会话中查看 rand、randi 或 randn 的输出，您会注意到每次重新启动 MATLAB 时它们都会返回相同的数字序列。能够将随机数生成器重置为该启动状态通常很有用，而无需实际重新启动 MATLAB。例如，您可能希望重复涉及随机数的计算，并获得相同的结果。

他们推荐命令

```
rng shuffle 
```

生成一个新的随机种子。您可以访问使用的种子

```
rng.seed 
```

并将其存储以备将来使用。所以如果你合作

```
rng shuffle
seedStore = rng.seed; 
```

然后下次你想重现结果时，你设置

```
rng(seedStore); 
```

# coldfusion - 阻止旧版本 CF 的新代码的任何方法

> ID：16111214
> 
> 赞同：0
> 
> 时间：2013-04-19T18:24:54.427
> 
> 标签：coldfusion

我已经编写了一个包含一些安全补丁的库。在那个库中有许多 CF8 和 up 函数、属性等。

我真的真的不想削减功能，因为 adobe 无法将它组合在一起并将这个基本功能放入 CF7，所以我希望在每个函数中编写单独的行。问题是当 CF 最初读取代码时，如果它发现它无法识别的东西，无论它是否会被调用，它都会出错。

例如在cfdirectory CF7 不支持'type' 属性。当存在“类型”属性时，我有一个查找目录功能在 CF7 中失败，将其取出会使搜索时间增加 10 倍。

```
<cftry> 
<cfdirectory action="list" directory="#arguments.start#" name="LOCAL.dirquery" type="dir" /><!---//GET QUERY OF DIRECTORIES IN START DIRECTORY--->
<cfcatch>
    <cfsetting requesttimeout="600">
    <cfdirectory action="list" directory="#arguments.start#" name="LOCAL.dirquery" /><!---//GET QUERY OF DIRECTORIES IN START DIRECTORY--->
</cfcatch> 
```

此代码不起作用，条件块也不起作用。我猜读者无法将 thsi 解析为任何语言，因此失败了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T18:34:04.463

代码可能在编译时失败，而不是在运行时（需要查看您收到的错误才能确定）。如果它是编译器错误，您需要将 CF7 函数与 CF8+ 函数分开在不同的组件中。然后在运行时检查 CF 版本以确定调用哪个组件/函数。

这里有一些伪代码，您可以在应用程序启动时将正确的版本函数加载到内存中。这样，您就可以在代码中的任何位置调用函数的一致接口。

伪代码：

```
onApplicationStart(){

    if (server.coldfusion.productversion == 7){
        application.cffunctions = CF7FunctionsComponent;
    } else {
        application.cffunctions = CF8FunctionsComponent;
    }

} 
```

在其他任何地方，无论当前运行的 CF 版本如何，您都调用相同的函数：

```
application.cffunctions.doSomething(); 
```

# javascript - 为什么 jQuery 不向该元素添加数据属性？

> ID：16111215
> 
> 赞同：3
> 
> 时间：2013-04-19T18:24:54.633
> 
> 标签：javascript, jquery

我的页面上有一个隐藏的模式框，通过调用这个 create.js 文件来呈现。

除了向元素添加 data-meal_id 属性外，其他一切都运行良好。

这是jQuery：

```
var $modal, $modal_close, $modal_container, $meal_id;
$modal = $('#modal');
$modal_close = $modal.find('.close');
$modal_container = $('#modal-container');
$meal_id = <%= @meal_id %>

$modal
  .data('meal_id', $meal_id)
  .prepend($modal_close)
  .css('top', $(window)
  .scrollTop() + 100)
  .show();

$modal_container.show();

$(document).on('click', '#modal .close', function() {
  $modal_container.hide();
  $modal.hide();
  return false;
}); 
```

以下是触发上述代码之前的元素：

```
<div id="modal-container"></div>
<div id="modal"> 
```

触发后...

```
<div id="modal-container" style="display: block;"></div>
<div id="modal" style="top: 100px; display: block;"><a href="#" class="close">cancel</a> 
```

完全跳过数据属性？？！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-19T18:32:19.540

`.data()`如果要设置必须使用的元素的数据属性，该方法不会修改 dom`attr()`

```
$modal
  .attr('data-meal_id', $meal_id) 
```

# ios - iOS S3 SDK：如何将对象设置为世界可读

> ID：16111216
> 
> 赞同：1
> 
> 时间：2013-04-19T18:24:55.307
> 
> 标签：ios, amazon-s3

使用适用于 iOS 的 AWS 开发工具包，我可以将文件上传到存储桶，如下所示：

```
S3PutObjectRequest *por = [[S3PutObjectRequest alloc] initWithKey:key inBucket:bucket];
NSInputStream *stream = [NSInputStream inputStreamWithData:file];
por.contentLength = file.length;
por.stream = stream;
[s3 putObject:por]; 
```

这工作正常，但文件被标记为读/写所有者。我希望文件是 Read World, Write Owner。将对象放入 S3 时如何指定对象的读取权限？

谢谢！

# android - 即时解密音频/视频到 MediaPlayer

> ID：16111224
> 
> 赞同：6
> 
> 时间：2013-04-19T18:25:47.543
> 
> 标签：android, audio, video, encryption, media-player

我一直在四处寻找几天，但无法得到关于如何做到这一点的明确答案。

我的 sdcard 上有一些加密的音频/视频文件，我想播放这些文件，它将发送到 MediaPlayer，并在解密的同时开始播放。它最初会创建一个缓冲区，当它有足够的初始数据开始播放时，MediaPlayer 将开始播放，并在后台解密并继续发送数据。

我环顾四周，大多数解决方案似乎都指向拥有一个本地httpserver，然后将文件发送到服务器，当它返回时，它将开始像直播一样播放音频/视频。我不知道的是解密代码是从哪里来的？在服务器端？如果有，在哪一部分？

我也看过这个[http://libeasy.alwaysdata.net/](http://libeasy.alwaysdata.net/)解决方案，它可能能够解决它，但我似乎无法理解它是如何工作的。我知道它创建了一个本地服务器，但在密码部分，我自己的解密如何发挥作用？

```
private void myPlay(String path) {
    mServer = new LocalSingleHttpServer();
    mServer.setCipher(myGetCipher());
    mServer.start();
    path = mServer.getURL(path);
    mVideoView.setVideoPath(path);
    mVideoView.start();
}
public void onCompletion(MediaPlayer mp) { // MediaPlayer.OnCompletionListener interface
    mServer.stop();
} 
```

由于我对 Android 开发还很陌生，所以如果我不清楚或有什么，请多多包涵。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T15:33:16.800

如果您提供密码，则解密由 http 服务器完成。
编写类似这样的代码（您必须在某处添加异常捕获）：

```
import javax.crypto.Cipher;
private Cipher myGetCipher() {
    Cipher c = Cipher.getInstance("RC4");
    c.init(Cipher.DECRYPT_MODE, new SecretKeySpec("myPassword".getBytes(), "RC4"));
    return c
} 
```

# xml - 如何使用 Xquery 在评论中查找内容

> ID：16111228
> 
> 赞同：2
> 
> 时间：2013-04-19T18:26:10.733
> 
> 标签：xml, comments, xquery

我正在寻找一种使用 Xquery 在 XML 文件中查找评论内容的方法，我对它很陌生，所以如果有任何问题，请告诉我。

例如我们有

```
<!-- comment_for_testing_xquery --> 
```

我怎么能写 xquery 来找到结果

```
comment_for_testing_xquery 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T18:41:39.367

该函数`comment()`匹配任何评论节点。

```
let $xml :=
<somexml>
  <a><!-- first comment --></a>
  <b><!-- second comment --></b>
</somexml>
for $c in $xml//comment()
return element comment { $c }
=>    
<comment><!-- first comment --></comment>
<comment><!-- second comment --></comment> 
```

有关更多信息，请参阅[规范中的节点测试说明和示例](http://www.w3.org/TR/xquery/#dt-node-test)。

# android-fragments - 按下后退按钮后恢复 FragmentActivity 中的数据

> ID：16111235
> 
> 赞同：0
> 
> 时间：2013-04-19T18:26:27.927
> 
> 标签：android-fragments, bundle, android-fragmentactivity, data-retrieval

我已经阅读了很多关于在 FragmentActivity 中恢复数据的内容，但在我的情况下没有任何效果。我尝试了很多方法来做到这一点，但它从来没有奏效。

我有一个包含 6 或 7 个片段的 ViewPager 的 FragmentActivity。这些片段中的每一个都包含一个 ListView。这些 ListView 中的数据是从 web 检索到的。

我可以在片段中选择 ListView 的一个项目以打开一个显示所选项目详细信息的新活动。

当我回到我的 FragmentActivity 时，我不想从网络上检索新的时间数据，而是从捆绑包或任何允许我立即显示数据的东西中获取它。

我尝试了 getLast(Custom)NonconfigurationInstance() 但仅在更改实际配置（例如屏幕方向）时才调用它。我还在 FragmentActivity 中尝试了 onSavedInstanceState，在 Fragment 中，没有调用超级方法......我总是在我的 onCreate/onCreateView 中得到一个空的 savedInstanceState 包。

我没有给你的代码，因为我回到零。

请问有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T10:56:38.603

好的，我找到了解决方案，但我讨厌它！反正...

当我在我的片段列表中选择一个项目时，我将我想要恢复的数据放入 ActivityA 中，并使用实现 Serializable 的自定义类，然后关闭 ActivityA。ActivityB 正在启动。当我关闭 ActivityB 时，我将要恢复的数据放在 ActivityA 中。我检查我的数据是否不为空（如果我不是来自 ActivityB，它可以为空），如果不是，我可以在没有网络连接的情况下填充我的片段和列表。

这是解决我的问题的一种非常糟糕的方法，但我真的不知道为什么“savedInstanceState”方法在这种情况下不起作用。

# jsf - 丰富：组件编辑后的日历更新支持 bean

> ID：16111236
> 
> 赞同：0
> 
> 时间：2013-04-19T18:26:36.203
> 
> 标签：jsf, richfaces, seam

我在数据表中有一个丰富的日历组件：

```
 <rich:column id="last_#{row.index}" >
   <rich:calendar id="lcal_#{row.index}"
     value="#{_obj.list[row.index].lastTaught}">
     <a4j:support event="onchanged"
       action="#{_obj.list[row.index].setBooleanDateHasBeenChanged}"
       ajaxSingle="true" reRender="last_#{row.index}" /> 
   </rich:calendar>
 </rich:column> 
```

当用户更改日期时，我需要将字段设置为 true（我需要知道稍后为 db update 更改了哪些行，我想一次更新一堆行）：

```
 /**
 * when someone changes the last taught field, set has been edited to true
 */
public void resetHasBeenEdited(){
    this.hasBeenEdited = true;
} 
```

当我更改调用 setBooleanDateHasBeenChanged 方法的日期并在支持 bean 中更新 _obj.list 时，但是当我在重新渲染后检查 _obj 时，hasBeenEdited 字段不反映更改。

我尝试使用 valueChangeListener （更改方法签名以匹配）：

```
 <rich:column id="last_#{row.index}" >
   <rich:calendar id="lcal_#{row.index}"
     value="#{_obj.list[row.index].lastTaught}"
         valueChangeListener="#{_obj.list[row.index].setBooleanDateHasBeenChanged}">
     <a4j:support event="onchanged"
       ajaxSingle="true" reRender="last_#{row.index}" /> 
   </rich:calendar>
 </rich:column> 
```

但随后 setBooleanDateHasBeenChanged 甚至没有运行。如何获得更新支持 bean 并在重新呈现的 JSF 模型中反映该更改的操作？我正在使用 JSF1.2、RF3.3 和 Seam2.2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T15:15:54.027

我尝试了一堆不同的配置，但最终奏效的是摆脱了 ajaxSingle 和 reRender：

```
 <rich:column id="last_#{status.index}"     
      <rich:calendar value="#{_obj.list[row.index].lastTaught}" >
      <a4j:support event="onchange"
         actionListener="#{_obj.list[row.index].resetTaughtHasBeenEdited()}"/>
    </rich:calendar>
 </rich:column> 
```

reRender 操作只会将显示的值重置为其先前的设置，而 ajaxSingle 不会更新模型。

# r - 在不平衡面板数据集中生成每个 ID 的所有先前观察值的滚动平均值

> ID：16111242
> 
> 赞同：5
> 
> 时间：2013-04-19T18:26:48.843
> 
> 标签：r, plyr, zoo

我正在尝试计算不平衡数据集的滚动平均值。为了说明我的观点，我制作了这个数据的玩具示例：

```
ID  year  Var   RollingAvg(Var)
1   2000  2     NA
1   2001  3     2
1   2002  4     2.5
1   2003  2     3
2   2001  2     NA
2   2002  5     2
2   2003  4     3.5 
```

该专栏`RollingAvg(Var)`是我想要的，但无法获得。换句话说，我正在寻找`Var`每个之前所有观察的滚动平均值`ID`。我已经尝试在and包中使用`rollapply`and ，但我看不到如何设置滚动窗口长度以使用每个 ID 的所有先前观察。也许我应该改用 plm 包？任何帮助表示赞赏。`ddply``zoo``plyr`

我在 BALANCED 面板数据集上看到了有关滚动方式的其他帖子，但我似乎无法推断他们对不平衡数据的答案。

谢谢，

米

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-19T19:09:48.407

使用`data.table`：

```
library(data.table)
d = data.table(your_df)

d[, RollingAvg := {avg = cumsum(Var)/seq_len(.N);
                   c(NA, avg[-length(avg)])},
    by = ID] 
```

（甚至简化）

```
d[, RollingAvg := c(NA, head(cumsum(Var)/(seq_len(.N)), -1)), by = ID] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T19:37:31.263

假设年份在每个 ID 中是连续的（在示例数据中是这种情况）并且`DF`是输入数据帧，这里是一个仅使用基数 R 的解决方案。 `cumRoll`是一个函数，它对一个 ID 执行所需的操作，`ave`然后按 ID 执行它：

```
cumRoll <- function(x) c(NA, head(cumsum(x) / seq_along(x), -1))
DF$Roll <- ave(DF$Var, DF$ID, FUN = cumRoll) 
```

结果是：

```
> DF
  ID year Var Roll
1  1 2000   2   NA
2  1 2001   3  2.0
3  1 2002   4  2.5
4  1 2003   2  3.0
5  2 2001   2   NA
6  2 2002   5  2.0
7  2 2003   4  3.5 
```

# apache - 禁止在 wamp 上访问 index.php

> ID：16111247
> 
> 赞同：0
> 
> 时间：2013-04-19T18:27:10.980
> 
> 标签：apache, wamp, wampserver

Wamp 安装在本地服务器上。

如何禁止用户打开

```
 http://<server-ip>:<port-no>/index.php 
```

但我应该能够登录服务器并打开 index.php

基本上，我试图限制用户查看 wamp 上已部署的应用程序列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T09:32:49.533

使用`.htaccess`文件或修改您的 apache 配置来拒绝用户访问，只允许您自己的 IP 地址（可能是 127.0.0.1）。

请参阅此页面以获得良好的入门指南：[http ://www.htaccess-guide.com/deny-visitors-by-ip-address/](http://www.htaccess-guide.com/deny-visitors-by-ip-address/)

# ruby-on-rails - 创建 Rails 初始化程序

> ID：16111249
> 
> 赞同：0
> 
> 时间：2013-04-19T18:27:15.520
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

我正在考虑使用 Gibbon gem 进行 Mailchimp 集成，我想在其中添加我的 API 详细信息`config/initializers/gibbon.rb`

gem 包含一些东西：API KEY、超时等。

我想知道将它从我的控制器中提取到初始化器的最佳方法。

```
# config/initializer/gibbon.rb

Gibbon.api_key = "my-api-key"
Gibbon.timeout = 15
Gibbon.throws_expection = false 
```

以上失败并出现错误：`gibbon.rb:38:in 'merge': can't convert false into Hash (TypeError)`

我想知道 Rails 3.2.x 中的最佳实践是什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T18:45:44.423

You've got a typo.

It's

```
 Gibbon.throws_exceptions = false 
```

Not what you've got. exceptions, not expection.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T18:42:54.040

~~好吧，看看你得到的错误：~~

 ~~```
gibbon.rb:38:in 'merge': can't convert false into Hash (TypeError) 
```~~ 

那么，初始化程序的第 38 行是什么？你只向我们展示了几行。看起来在第 38 行，您正在传递`false`一个期望散列的参数。

如果您的问题中有三行，并且只有这三行，保存在`config/initializers/gibbon.rb`其中应该可以满足您的期望。

~~如果您想将整个初始化程序文件粘贴到您的问题中，我会回来再次检查，如果有明显错误，我会添加到这个答案中。~~

正如爱德华指出的那样，你只是打错了:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T18:32:04.140

我根本不明白你的问题，但尝试类似：

```
# config/initializer/gibbon.rb
module Gibbon
     Gibbon.api_key = "my-api-key"
     Gibbon.timeout = 15
     Gibbon.throws_expection = false
end 
```

# sharepoint - 类似于 SiteUserInfoList 但适用于所有共享点用户

> ID：16111255
> 
> 赞同：3
> 
> 时间：2013-04-19T18:27:33.020
> 
> 标签：sharepoint, sharepoint-2013

我正在尝试在 sharepoint 2013 提供商托管的应用程序中构建类似人员选择器的工具。最初，我使用的是`Utility.ResolvePrincipal`，它可以让我访问 sharepoint 中的任何用户，但它一次只能给我一个用户（这不是我想要的）。然后，我尝试使用`Utility.SearchPrincipals`，但这从来没有给我任何结果。所以我尝试使用`Web.SiteUserInfoList`，但这只能让我访问我网站的用户，而不是所有的 sharepoint。有什么我可以使用的类似于`SiteUserInfoList`但返回sharepoint中的任何用户的东西，而不仅仅是我的网站？这是我使用的`SiteUserInfoList`：

```
var camlQuery = new CamlQuery();
    camlQuery.ViewXml = @"<View>
                            <Query>
                                <Where>
                                    <Contains>
                                        <FieldRef Name='Title'/>
                                        <Value Type='Text'>" + nameStart + @"</Value>
                                    </Contains>
                                </Where>
                            </Query>
                        </View>";
    var users = _clientContext.Web.SiteUserInfoList.GetItems(camlQuery);
    _clientContext.Load(users, u => u.Include(item => item["Title"], item => item["Name"], item => item.DisplayName));
    _clientContext.ExecuteQuery(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-13T12:35:29.183

您可以尝试使用 REST 搜索您的用户。

您的 URL 看起来像这样：

```
var url = string.Format("http://yoursite/_api/search/query?querytext='AccountName:{0}*'&sourceid='B09A7990-05EA-4AF9-81EF-EDFAB16C4E31'&selectproperties='PictureURL,AccountName'", nameStart); 
```

（sourceid='B09A7990-05EA-4AF9-81EF-EDFAB16C4E31' 指向内容类：STSPeople）

# android - CSS 过渡或动画在 phonegap 中不起作用

> ID：16111261
> 
> 赞同：5
> 
> 时间：2013-04-19T18:28:02.547
> 
> 标签：android, css, cordova, cordova-2.0.0

我需要为`<div>`. 尝试使用@keyframes 和过渡。这是一个代码：

过渡

```
#menu{
...
width:70%;
-webkit-transition: width 5s;
..
} 
```

关键帧

```
#menu{
    ...
    width:70%;
    animation: menuEffect 3s;
    ..
    }
@keyframes menuEffect
{
from {width:0%;}
to {width:70%;}
} 
```

我正在使用 cordova/phonegap 2.0.0 并针对 android 4.0 及更高版本。我没有看到这个工作。过渡和动画不支持phonegap吗？请协助。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-09-29T16:19:53.487

只是不要忘记添加`-webkit-`到 css 属性。它为我解决了所有问题。

此代码适用于我的情况：

```
/* Animation element id */
#animate {
  position: absolute;
  top: 100px;
  left: 100px;
  -webkit-animation: move 1s ease infinite;
}

@-webkit-keyframes move {
    50% {
        -webkit-transform: translate(100px, 100px);
    }
} 
```

您也可以使用“从，到”，它会正常工作。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-07-02T16:43:13.943

使用Phonegap，您需要使用属性的前缀版本，因为它只是Webkit。

`-webkit-animation: menuEffect 3s linear`

```
@-webkit-keyframes menuEffect
{
    from {
        width:0%;
    }
    to {
        width:70%;
    }
} 
```

# iphone - iOS - 检查以前的捆绑包版本

> ID：16111270
> 
> 赞同：0
> 
> 时间：2013-04-19T18:28:49.653
> 
> 标签：iphone, ios, nsbundle

是否可以以编程方式检查以前安装的应用程序版本的捆绑版本？我知道如何获取当前版本

```
[[[NSBundle mainBundle] infoDictionary] objectForKey:@"CFBundleVersion"]; 
```

我问的原因是因为在将我的应用程序从版本 A 更新到 C 而不是 B 到 C 时存在错误。我希望能够检查以前的版本是否是版本 A，如果是，则相应地处理错误.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T18:33:02.593

将版本保存在 NSUserDefault

每次应用关闭或版本检查后

```
NSString *version = [[[NSBundle mainBundle] infoDictionary] objectForKey:@"CFBundleVersion"];

[[NSUserDefaults standardUserDefaults] setObject:version  forKey:@"version"]; 
```

在应用程序运行开始时检查它

```
NSString *newVersion = [[[NSBundle mainBundle] infoDictionary] objectForKey:@"CFBundleVersion"];

NSString *oldVersion =  [[NSUserDefaults standardUserDefaults] objectForKey:@"version"]; 
```

比较新版本和旧版本

# django - NGINX 配置中的 proxy_pass 选项有什么作用？

> ID：16111271
> 
> 赞同：3
> 
> 时间：2013-04-19T18:28:50.760
> 
> 标签：django, nginx, amazon-ec2, gunicorn

NGINX proxy_pass 配置有什么作用？例如，假设我有一个托管在 Amazon 的 EC2 服务上的 Django 应用程序。

在 EC2 上，假设我在 2 个 nginx 服务器前面有 1 个负载均衡器。nginx 服务器指向 4 个使用 Gunicorn 作为 WSGI 服务器的 django 应用服务器：

```
upstream my-upstream {
 server 12.34.45.65:8000;
 server 13.43.54.56:8000;
 server 13.46.56.52:8000;
 server 14.46.58.51:8000;
}

location / {
proxy_pass http://my-upstream;
} 
```

proxy_pass 是什么？在这种情况下，它会是负载均衡器的 URL 吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-19T19:54:43.543

看一下[nginx 的 HttpProxyModule](http://wiki.nginx.org/HttpProxyModule)，这就是 proxy_pass 的来源。[proxy_pass 文档](http://wiki.nginx.org/HttpProxyModule#proxy_pass)说：

> 该指令设置代理服务器的地址和位置将映射到的 URI。

因此，当您告诉 Nginx 时`proxy_pass`，您是在说“将此请求传递到此代理 URL”。

还有关于[上游](http://wiki.nginx.org/HttpUpstreamModule#upstream)可用的文档：

> 该指令描述了一组服务器，它们可以在指令 proxy_pass 和 fastcgi_pass 中作为单个实体使用。

因此，您将 upstream 用于 proxy_pass 的原因是因为 proxy_pass 需要一个 URL，但您希望传递多个 URL（因此您使用上游）。

如果您的负载均衡器在您的 nginx 前面，那么您的负载均衡器 URL 将不在此配置中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T06:51:43.583

应该是：proxy_pass http://my-upstream;

nginx 将对您的 4 个 djano+gunicorn 实例（您的 my-upstream）上的所有请求进行负载平衡。负载均衡器将指向 nginx 服务器。

# c++ - OpenCV 中的 Python C++ 绑定

> ID：16111274
> 
> 赞同：0
> 
> 时间：2013-04-19T18:28:56.610
> 
> 标签：c++, python, opencv, binding, intellisense

OpenCV2.0 中的 Python 绑定使用什么技术/库？

我知道有许多用于 C++/Python 绑定的[库](https://stackoverflow.com/questions/1492755/python-c-binding-library-comparison)，并且以前版本的 OpenCV 使用的是[SWING 库](http://opencv.willowgarage.com/documentation/python/index.html)。

我正在[为 Visual Studio 的 Python 工具中](http://pytools.codeplex.com/)测试 Python，它内置了代码完成（智能感知）。但是，对于当前的 OpenCV Python 绑定，它仅在交互式窗口中显示函数名称。在编辑器中，它甚至不显示函数名称。

是否可以让智能感知在 C++ Python 绑定的参数级别上工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T18:55:31.297

**OpenCV2.0 中的 Python 绑定使用什么技术/库？**

[OpenCV 的核心开发者之一Vadim Pisarevsky](https://stackoverflow.com/users/1878302/vadim-pisarevsky)在这里对这个问题给出了简短的回答：[Python API 是如何生成的？](http://answers.opencv.org/question/6618/how-python-api-is-generated/). 他说：

> 我们不使用 SWIG 或任何其他标准包装器生成工具。我们没有找到可以产生令人满意结果的工具。
> 
> 相反，我们使用自己的纯 Python 解决方案来解析 OpenCV 标头
> 
> 解析器位于 opencv/modules/python/src2/hdr_parser.py
> 
> 在提取所有 API 之后，我们使用更多的 Python 代码（opencv/modules/python/src2/gen2.py）来生成 Python 包装器。

# sql - 关于连接、过滤器和 ORDER BY 的 SQL 索引设计

> ID：16111277
> 
> 赞同：0
> 
> 时间：2013-04-19T18:29:10.317
> 
> 标签：sql, join, indexing, db2, sql-order-by

我正在优化 DB2 LUW 数据库的一些查询，并且我将重组一些现有的索引。但是，我有一些关于似乎没有明确定义的主题的问题，至少从我能够找到的内容来看。对于初学者，这里是查询本身的概要：

```
SELECT 
--About a dozen fields from TABLE A--
--A few fields from joined tables--
FROM
TABLE A
--A few inner join/left joins, mostly on A.ID1 and A.ID2, BIGINT generated keys--
WHERE
A.ONE = :x
AND A.TWO IN (:y)
AND A.THREE IN (--uncorrelated suquery--)
AND A.FOUR IS NULL
AND (A.FIVE BETWEEN :date1 AND :date2
OR
A.SIX = 'STUFF')
ORDER BY A.SEVEN 
```

有几点需要注意：

*   仅 A.ID1 和 A.ID2 上就有一个索引，可能是聚集索引，因为这是主键
*   A.SEVEN 上有一个索引
*   我正在修改 WHERE 子句中其余字段的索引

所以所有的连接/过滤/排序列都被索引了。问题是：它们应该全部组合成一个索引还是分开？如果我将 A.SEVEN 放入同一个索引中，我是否仍想根据选择性放置它，或者这是否无关紧要，因为它没有过滤，只有排序？

编辑：我发现自己使用 OR 子句的通常更快的替代方法，至少在我正在使用的查询中：

```
CASE WHEN (first statement) THEN 1 
WHEN (second statement) THEN 1 
ELSE 0 
END = 1 
```

这对某些查询非常有效，但与 OR 子句相比，我不确定它是否/如何影响索引的使用。此外，是否最好按照选择性顺序组织 ONE 到 FOUR，即如果 FOUR 只有 12 个不同的值而 ONE 有 10k，那么最好将 ONE 放在索引的前面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T18:38:48.773

我对 DB2 对索引的特定处理并不十分熟悉。但是假设它像其他数据库一样，我认为您将无法使用索引进行最终排序。

基于该`where`子句的查询的一个好的索引是`A(one, two, three, four)`. 之后，由于这种情况，您被困在`five`和之间。您可以将其中任何一个放入索引中。把两者都放进去可能不会有什么不同——只有第一个会被使用，第二个会通过扫描索引的那个部分来解决，以找到满足另一个条件的行。`six``or`

换句话说，索引的效用在你到达之前就已经结束了`seven`。

如果 DB2 真的很复杂，它可能能够利用两个索引， `A(one, two, three, four, five)`并且 `A(one, two, three, four, six)`. 再一次，由于`or`条件的原因，索引对`order by`.

由于相等条件，`one`、`two`、`three`和`four`和 在索引中按任意顺序排列。有一个警告。我不知道 db2 如何`in`使用子查询处理条件。我倾向于在`A(one, two, four, three)`.

# c# - MathNet 数值统计直方图

> ID：16111282
> 
> 赞同：1
> 
> 时间：2013-04-19T18:29:31.923
> 
> 标签：c#, wpf, math.net

我正在使用 MathNet 库来计算一些统计数据，例如。中位数、最小值、最大值 我使用以下代码计算了一些直方图数据：

```
var histogram = new Histogram(data, numberOfBuckets); 
```

桶号是什么意思？它是一个可以获取的概率吗？如何`histogram`处理包含桶的输出以绘制直方图？我认为这个输出真的是专门用于绘制图表的，例如在`zedgraph`. Buckets in`histogram`包含如下所示的 buckets 向量：`[1;1,4]=1`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-19T08:45:13.010

numberOfBuckets 参数表示应该分割数据范围的多少个相同大小的间隔。然后直方图计算数据中有多少数字落入每个桶中。

尝试：

```
 var v = DenseVector.Create(10, i => i+1);
        Console.WriteLine(new Histogram(v, 5)); 
```

也许您想要一个自然数的直方图，其中每个桶包含特定数字的出现次数（有些桶可能是空的）？然后将 numberOfBuckets 设置为 max-min+1。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-06-06T21:15:50.207

Histogram 类实现了一个索引器，可让您访问内部存储桶。因此，您可以遍历存储桶以提取每个存储桶的统计信息。

```
Histogram h = new Histogram(myRandomSamples, numBuckets);

//Get data from 5th histogram bucket
double lb = h[5].LowerBound; //get the bucket low bound
double ub = h[5].UpperBound; //get the bucket upper bound
double count = h[5].Count;   //get number of samples in that histogram bucket 
```

# c++ - 如何在 C++11 中将匿名函数作为参数传递和执行？

> ID：16111285
> 
> 赞同：43
> 
> 时间：2013-04-19T18:29:47.597
> 
> 标签：c++, c++11, visual-c++

我正在寻找的代码如下所示。

```
bool Func1(int Arg1, C++11LambdaFunc Arg2){
    if(Arg1 > 0){
        return Arg2(Arg1);
    }
} 
```

稍后我将使用此代码。

```
Func1(12, [](int D) -> bool { ... } ); 
```

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-04-19T18:32:06.337

基本版本，用于头文件：

```
template<typename Lambda>
bool Func1(int Arg1, Lambda Arg2){ // or Lambda&&, which is usually better
  if(Arg1 > 0){
    return Arg2(Arg1);
  } else {
    return false; // remember, all control paths must return a value
  }
} 
```

更复杂的版本，如果你想从你的实现中分离你的接口（它有运行时间成本）：

```
bool Func1(int Arg1, std::function<bool(int)> Arg2){
  if(Arg1 > 0){
    return Arg2(Arg1);
  } else {
    return false; // remember, all control paths must return a value
  }
} 
```

`std::function``pImpl`使用类型擦除围绕您的 lambda 创建一个自定义创建的包装器，然后公开一个使用该模式将其转发到自定义创建的包装器的非虚拟接口。¹

或者，用不太专业的术语来说，`std::function<bool(int)>`是一个类，它可以包装几乎任何你可以像函数一样调用的东西，传递一个与传递 a 兼容的参数，`int`它返回与返回 a 兼容的东西`bool`。

通过 a 调用`std::function`的运行时间成本大致等于`virtual`函数调用（由上述类型擦除引起），并且当您创建它时，它必须复制传入的函数对象（又名函子）的状态（这可能很便宜-- 无状态 lambdas，或通过引用捕获参数的 lambdas -- 或在某些其他情况下昂贵）并将其存储（通常在免费存储或堆上，这是有成本的），而纯模板版本可以“内联”在调用点（即，不仅成本低于函数调用，编译器甚至可以优化函数调用和返回边界！）

如果您想在没有所有运行时成本的情况下拆分接口/实现`std::function`，您可以滚动自己的 function_ref （在[c++17](/questions/tagged/c%2b%2b17 "显示标记为“c++17”的问题")中，因为这减少了一些样板文件）：

```
template<class Sig>
struct function_ref;

template<class R, class...Args>
struct function_ref<R(Args...)> {
  R operator()(Args...args) const {
    return pf(state, std::forward<Args>(args)...);
  }
  function_ref()=default;
  function_ref(function_ref const&)=default;
  function_ref& operator=(function_ref const&)=default;
  explicit operator bool()const{ return pf!=nullptr; }

  // this overload reduces indirection by 1 step
  // and allows function_ref<Sig> to resolve overloads
  // on an overload set sometimes.
  function_ref( R(*f)(Args...) ):
    pf([](State const& state, Args&&...args)->R{
      return reinterpret_cast<R(*)(Args...)>(state.pfunstate)(std::forward<Args>(args)...);
    })
  {
    state.pfunstate = reinterpret_cast<void(*)()>(f);
  }

  // this grabs anything callable (that isn't this own type)
  // and stores a pointer to it to call later.
  template<class F>
  requires (
    std::is_convertible_v<
      std::invoke_result_t< std::remove_reference_t<F>, Args... >, R
    >
    && !std::is_same_v< std::decay_t<F>, function_ref >
  )
  function_ref( F&& f ):
    pf([](State const& state, Args&&...args)->R{
      return (*(std::remove_reference_t<F>*)state.pstate)(std::forward<Args>(args)...);
    })
  {
    state.pstate = std::addressof(f);
  }
private:
  union State {
    void* pstate = nullptr;
    void(*pfunstate)();
  };
  State state;
  R(*pf)(State const&, Args&&...) = nullptr;
};
// a deduction guide permitting function_ref{foo} to work
// if foo is a non-overloaded function name.
template<class R, class...Args>
function_ref( R(*)(Args...) )->function_ref<R(Args...)>; 
```

[活生生的例子](https://godbolt.org/z/oGModK)。

`std::function`这消除了通过从中删除所有权语义并仅进行类型擦除调用来进行任何分配的需要。

第一个示例的精美版本，它还可以更好地处理一些极端情况：（也必须在头文件中实现，或者在使用的同一翻译单元中实现）

```
template<typename Lambda>
bool Func1(int Arg1, Lambda&& Arg2){
  if(Arg1 > 0){
    return std::forward<Lambda>(Arg2)(Arg1);
  } else {
    return false; // remember, all control paths must return a value
  }
} 
```

它使用一种称为“完美转发”的技术。对于某些函子，这会产生与#1 稍有不同的行为（通常是更正确的行为）。

大多数改进来自`&&`参数列表中的使用：这意味着传入函子的引用（而不是副本），节省一些成本，并允许传入一个`const`或非`const`函子。

如果有人使用了一个相对较新的 C++ 特性，该特性允许方法（包括）覆盖指针的右值/左值状态，这种`std::forward<Lambda>(...)`变化只会导致行为发生变化。从理论上讲，这可能很有用，但是我看到的基于右值状态实际覆盖的函子数量是is 。当我正在编写严肃的库代码（tm）时，我会为此烦恼，但很少会这样做。`operator()``this``this``0`

还有一件可能的事情需要考虑。假设您想要获取返回`bool`的函数或返回的函数`void`，并且如果函数返回`void`，您希望将其视为返回`true`。例如，您正在使用一个在迭代某个集合时被调用的函数，并且您希望有选择地支持提前停止。该函数`false`在它想提前停止时返回，`true`或者`void`以其他方式返回。

或者，在更一般的情况下，如果您对一个函数有多个覆盖，其中一个采用一个函数，而另一些在同一位置采用其他类型。

这是可能的，这就是我将要介绍的内容（使用智能适配器或通过 SFINAE 技术）。但是，您最好只创建两个不同的命名函数，因为所需的技术太重了。

* * *

¹从技术上讲`std::function`，可以使用魔法仙尘来做它所做的事情，因为它的行为是由标准描述的，而不是它的实现。我正在描述一个简单的实现，它近似于`std::function`我与之交互的实现的行为。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-04-19T18:32:02.200

**第一个解决方案：**

您可以使您的`Func1()`功能成为功能*模板*：

```
template<typename T>
bool Func1(int Arg1, T&& Arg2){
    if(Arg1 > 0){
        return Arg2(Arg1);
    }

    return false; // <== DO NOT FORGET A return STATEMENT IN A VALUE-RETURNING
                  //     FUNCTION, OR YOU WILL GET UNDEFINED BEHAVIOR IF FLOWING
                  //     OFF THE END OF THE FUNCTION WITHOUT RETURNING ANYTHING
} 
```

然后，您可以根据需要调用它：

```
int main()
{
    Func1(12, [](int D) -> bool { return D < 0; } );
} 
```

**第二种解决方案：**

如果您不想使用模板，另一种方法（会带来一些运行时开销）是使用[`std::function`](http://en.cppreference.com/w/cpp/utility/functional/function)：

```
#include <functional>

bool Func1(int Arg1, std::function<bool(int)> Arg2){
    if(Arg1 > 0){
        return Arg2(Arg1);
    }

    return false;
} 
```

再一次，这将允许您以您想要`Func1()`的方式调用：

```
int main()
{
    Func1(12, [](int D) -> bool { return D < 0; } );
} 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-04-19T18:36:29.797

对于那些口味更传统的人，请注意非捕获 lambda 可以转换为函数指针。因此，您可以将上面的函数编写为：

```
bool Func1(int Arg1, bool (*Arg2)(int)) { ... } 
```

它适用于传统函数**和**lambdas。

# android - 无法在 onCreate 方法之外隐藏 Android 标题栏

> ID：16111288
> 
> 赞同：1
> 
> 时间：2013-04-19T18:29:49.033
> 
> 标签：android, eclipse, android-titlebar

我正在实现一个始终全屏运行且没有标题栏的应用程序。存在用户单击按钮并使用语音识别功能 API 的情况。调用一个 android 原生窗口来分析用户的声音。但随后，标题栏再次可见。问题是我无法再次隐藏它，因为隐藏它的方法只适用于 onCreate 方法。

这是我调用语音 API 的方法，标题栏再次可见。

```
public void VoiceCaptureButtonClick(View v) {

       //- The title bar is properly hidden at this point.

       //Code for calling the voice recognition API: 
       Intent intent = new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH);
       intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL, RecognizerIntent.LANGUAGE_MODEL_FREE_FORM);
       intent.putExtra(RecognizerIntent.EXTRA_PROMPT, "Voice recognition Demo...");
       startActivityForResult(intent, REQUEST_CODE);

      //- Now the title bar is visible again, and I don't manage to hide it anymore.
      // if I use the method requestWindowFeature(Window.FEATURE_NO_TITLE);
      // I run into a exception : "requestFeature() must be called before adding content"

    } 
```

**编辑：**

这是我用来隐藏标题栏并使应用程序全屏显示的代码，它运行良好，直到我调用上面的方法。

```
<application
 ...
 android:theme="@android:style/Theme.NoTitleBar.Fullscreen"
 ...
</application> 
```

我正在使用 android 2.3.3 和 Eclipse。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T16:08:12.017

添加`android:theme="@android:style/Theme.NoTitleBar."`到`<activity>`清单中以完全删除标题栏。就像是：

```
<activity
      android:name=".Foo"   
      android:label="@string/foo" 
      android:theme="@android:style/Theme.NoTitleBar."> 
```

编辑：

我现在明白了。当您调用 时`startActivityForResult()`，您的应用程序不再受控制，因为您已经启动了语音识别活动。因此，您的样式（隐藏标题栏等）不再起作用，Android 将再次显示所有这些。

您不能`requestFeature()`在此处使用，因为 Android 只能在扩展您的布局之前进行这些更改。

似乎没有解决方案，因为您的应用程序在`startActivityForResult()`被调用时无法控制。

# arraylist - GridWorld getAdjacentLocation() 返回 NullPointerException？

> ID：16111289
> 
> 赞同：0
> 
> 时间：2013-04-19T18:29:52.520
> 
> 标签：arraylist, nullpointerexception, gridworld

我的代码可以在这里找到：http: [//pastebin.com/tmzGGHzi](http://pastebin.com/tmzGgHzi)

基本上，我的小动物所做的是它选择一个随机位置并移动到该位置，吃掉它路径上的所有演员。但是，第二次单击“step”时，它会在第 67 行引发 NullPointerException。这是 getAdjacentLocation() 方法引用空对象的问题，但我无法弄清楚，我的 AP 老师也无法弄清楚。

任何帮助是极大的赞赏！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-01T00:37:13.297

getLocation() 方法返回 null。

```
Location loc = this.getLocation();
//Loc is now null, so the following call will result in a null pointer exception
Location newLoc = loc.getAdjacentLocation(getDirection()); 
```

这是因为它正在将自己从网格中移除/它正在吃掉自己

```
public ArrayList<Actor> getActors(){

    ArrayList<Actor> list = new ArrayList<Actor>();
    Grid<Actor> gr = getGrid();
    Location loc = getLocation();

    atLocation = atRandomLocation();

    if(!atLocation){

        setDirection(loc.getDirectionToward(randomLocation));

        //THIS RETURNS THE CRITTER'S CURRENT LOCATION!
        Actor a = gr.get(getLocation());

        if(a != null)
        //This critter is not going to be null, so it adds it to the list
            list.add(a);

    }else
        getRandomLocation();

    //This list contains all actors to be eaten
    return list;
} 
```

*您的方法所做的是检查它是否在该位置，将自身添加到列表中，然后自行吃掉！*

```
public void processActors(ArrayList<Actor> actors){

    for(Actor a : actors)
        //This list only contains the critter
        a.removeSelfFromGrid();
} 
```

您需要做的是找到它应该移动到的下一个位置，吃掉该空间中的任何演员，然后移动。

PS 显然，如果 Critter 是唯一的演员，它会默认吃掉自己。

# php - 为什么我无法在android中获取json？

> ID：16111290
> 
> 赞同：0
> 
> 时间：2013-04-19T18:29:54.123
> 
> 标签：php, android, json

我在获取一维时遇到问题， `JSON`请指导我问题出`JSON`在我的代码中还是我的代码中？

JSON：

```
{
    "data": {
        "id": "S000010",
        "name": "ZS Solutions",
        "email": "zswebs@gmail.com",
        "phone": "051-1234567",
        "address": "p.o.box 123",
        "about": "im the company\r\nHAhahhaa"
    }
} 
```

Android活动`JSON`检索代码：

```
ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
// TODO Auto-generated method stub
try {
    HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost("abc.php?Id="+id+"");

    httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
    HttpResponse hresponse = httpclient.execute(httppost);
    HttpEntity entity = hresponse.getEntity();
    is = entity.getContent();
    String result=co(is);
    JSONObject json=new JSONObject(result);

    JSONArray a=  json.getJSONArray(data);
    for (int i = 0; i <= a.length(); i++) {

        json = a.getJSONObject(i);
        String  cname=json.getString("name");
        String  cemail=json.getString("email");
        String  cphone=json.getString("phone");
        String  caddress=json.getString("address");
        String  cabout=json.getString("about");
        Log.w("DATA  ","NAME  "+cname+"E-mail  "+cemail+"Phone "+cphone+"ADDRESS"+caddress+"ABOUT"+cabout);
    }

}
catch(Exception e){} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T18:33:05.937

`JSONArray a= json.getJSONArray(data);` < - 这导致异常为

data 不是一个 json 数组，而是一个`JSONObject`

你的代码应该是

```
 JSONObject json=new JSONObject(result);

       JSONObject jsonobj=json.getJSONObject("data");

        String  cname=jsonobj.getString("name");
        String  cemail=jsonobj.getString("email");
        String  cphone=jsonobj.getString("phone");
        String  caddress=jsonobj.getString("address");
        String  cabout=jsonobj.getString("about"); 
```

# java - 使用 OpenCSV 将 CSV 解析为多个/嵌套的 bean 类型？

> ID：16111296
> 
> 赞同：8
> 
> 时间：2013-04-19T18:30:15.633
> 
> 标签：java, opencsv, supercsv

我有各种 CSV，其中包含一些标准列和一些完全随机的字段：

```
firstname, lastname, dog_name, fav_hat, fav_color
bill,smith,fido,porkpie,blue
james,smith,rover,bowler,purple

firstname, lastname, car_type, floor_number
tom, collins, ford, 14
jim, jones, toyota, 120 
```

所以我试图将它们解析为包含名字和姓氏的 Person.class bean，然后我有第二个名为 PersonAttribute.class 的类来保存......其他任何东西。

两个类的基本大纲：

```
class Person {
 public String firstname;
 public String lastname;
 public List<PersonAttribute> attribs;
}

class PersonAttribute {
 public Person p;
 public String key; // header name, ex. 'car_type'
 public String value; // column value, ex. 'ford'
} 
```

我一直在 opencsv 中使用 CsvToBean 函数：

```
public static List<Person> parseToBeans(File csvFile, HashMap<String, String> mapStrategy, Class beanClass) throws IOException {
    CSVReader reader = null;
    try {
        reader = new CSVReader(new BufferedReader(new FileReader(csvFile)));

        HeaderColumnNameTranslateMappingStrategy<Person> strategy = new HeaderColumnNameTranslateMappingStrategy<>();
        strategy.setType(beanClass);
        strategy.setColumnMapping(mapStrategy);

        final CsvToBean<Person> csv = new CsvToBean<Person>() {
            @Override
            protected Object convertValue(String value, PropertyDescriptor prop) throws InstantiationException, IllegalAccessException {
                value = value.trim().replaceAll(" +", " ");
                return super.convertValue(value, prop);
            }
        };
        return csv.parse(strategy, reader);
    }
... 
```

但是，当我为 Person.class bean 解析 csv 时，我不确定如何处理创建 PersonAttribute.class bean。我遇到了[这篇文章](https://stackoverflow.com/a/13523698/1107232)，想知道是否需要切换到 supercsv 来轻松处理我想要做的事情？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T12:04:11.587

您当然可以使用 Super CSV 实现这一目标。

您可以使用

*   `CsvBeanReader`- 它不支持索引映射，因此您需要在 bean 中创建一个辅助方法才能使用它

*   `CsvDozerBeanReader`- 支持开箱即用的索引映射，因此可以完全按照您的意愿行事（需要最近发布的 Super CSV 2.1.0）

## 使用 CsvBeanReader

如果您不想使用 Dozer 并且能够修改您的 bean 类，最简单的选择是在您的 bean 上添加一个虚拟设置器，`CsvBeanReader`用于填充属性。我假设您的`Person`和`PersonAttribute`bean 有一个公共的无参数构造函数和为每个字段定义的 getter/setter（这是必需的）。

将以下虚拟设置器添加到您的`Person`bean：

```
public void setAddAttribute(PersonAttribute attribute){
    if (attribs == null){
        attribs = new ArrayList<PersonAttribute>();
    }
    attribs.add(attribute);
} 
```

创建一个自定义[单元处理器](http://supercsv.sourceforge.net/cell_processors.html)，它将`PersonAttribute`使用 CSV 标题中的适当键和 CSV 列中的值填充 a。

```
package org.supercsv.example;

import org.supercsv.cellprocessor.CellProcessorAdaptor;
import org.supercsv.util.CsvContext;

/**
 * Creates a PersonAttribute using the corresponding header as the key.
 */
public class ParsePersonAttribute extends CellProcessorAdaptor {

    private final String[] header;

    public ParsePersonAttribute(final String[] header) {
        this.header = header;
    }

    public Object execute(Object value, CsvContext context) {

        if( value == null ) {
            return null;
        }

        PersonAttribute attribute = new PersonAttribute();
        // columns start at 1
        attribute.setKey(header[context.getColumnNumber() - 1]);
        attribute.setValue((String) value);
        return attribute;
    }

} 
```

我认为以下示例主要说明了问题，但我应该指出以下几点：

*   我必须使用自定义首选项，因为您的 CSV 包含不属于数据的空格

*   我必须动态组装字段映射和单元处理器数组，因为您的数据具有未知数量的属性（此设置通常不那么复杂）

*   属性使用的所有字段映射`addAttribute`，对应于`setAddAttribute()`我们添加到您的 bean 的方法

*   我已经使用我们的自定义单元处理器`PersonAttribute`为每个属性列创建了一个 bean

这是代码：

```
package org.supercsv.example;

import java.io.IOException;
import java.io.Reader;
import java.io.StringReader;

import org.supercsv.cellprocessor.Optional;
import org.supercsv.cellprocessor.constraint.NotNull;
import org.supercsv.cellprocessor.ift.CellProcessor;
import org.supercsv.io.CsvBeanReader;
import org.supercsv.io.ICsvBeanReader;
import org.supercsv.prefs.CsvPreference;

public class ReadWithCsvBeanReader {

    private static final String CSV = 
            "firstname, lastname, dog_name, fav_hat, fav_color\n"
            + "bill,smith,fido,porkpie,blue\n"
            + "james,smith,rover,bowler,purple";

    private static final String CSV2 = 
            "firstname, lastname, car_type, floor_number\n"
            + "tom, collins, ford, 14\n" + "jim, jones, toyota, 120";

    // attributes start at element 2 of the header array
    private static final int ATT_START_INDEX = 2;

    // custom preferences required because CSV contains 
    spaces that aren't part of the data
    private static final CsvPreference PREFS = 
        new CsvPreference.Builder(
            CsvPreference.STANDARD_PREFERENCE)
            .surroundingSpacesNeedQuotes(true).build();

    public static void main(String[] args) throws IOException {
        System.out.println("CsvBeanReader with first CSV input:");
        readWithCsvBeanReader(new StringReader(CSV));
        System.out.println("CsvBeanReader with second CSV input:");
        readWithCsvBeanReader(new StringReader(CSV2));
    }

    private static void readWithCsvBeanReader(final Reader reader)
            throws IOException {
        ICsvBeanReader beanReader = null;
        try {
            beanReader = new CsvBeanReader(reader, PREFS);

            final String[] header = beanReader.getHeader(true);

            // set up the field mapping and processors dynamically
            final String[] fieldMapping = new String[header.length];
            final CellProcessor[] processors = 
                    new CellProcessor[header.length];
            for (int i = 0; i < header.length; i++) {
                if (i < ATT_START_INDEX) {
                    // normal mappings
                    fieldMapping[i] = header[i];
                    processors[i] = new NotNull();
                } else {
                    // attribute mappings
                    fieldMapping[i] = "addAttribute";
                    processors[i] = 
                            new Optional(new ParsePersonAttribute(header));
                }
            }

            Person person;
            while ((person = beanReader.read(Person.class, fieldMapping,
                    processors)) != null) {
                System.out.println(String.format(
                        "lineNo=%s, rowNo=%s, person=%s",
                        beanReader.getLineNumber(), beanReader.getRowNumber(),
                        person));
            }

        } finally {
            if (beanReader != null) {
                beanReader.close();
            }
        }
    }

} 
```

输出（我`toString()`在你的 bean 中添加了方法）：

```
CsvBeanReader with first CSV input:
lineNo=2, rowNo=2, person=Person [firstname=bill, lastname=smith, attribs=[PersonAttribute [key=dog_name, value=fido], PersonAttribute [key=fav_hat, value=porkpie], PersonAttribute [key=fav_color, value=blue]]]
lineNo=3, rowNo=3, person=Person [firstname=james, lastname=smith, attribs=[PersonAttribute [key=dog_name, value=rover], PersonAttribute [key=fav_hat, value=bowler], PersonAttribute [key=fav_color, value=purple]]]
CsvBeanReader with second CSV input:
lineNo=2, rowNo=2, person=Person [firstname=tom, lastname=collins, attribs=[PersonAttribute [key=car_type, value=ford], PersonAttribute [key=floor_number, value=14]]]
lineNo=3, rowNo=3, person=Person [firstname=jim, lastname=jones, attribs=[PersonAttribute [key=car_type, value=toyota], PersonAttribute [key=floor_number, value=120]]] 
```

## 使用 CsvDozerBeanReader

如果您不能或不想修改您的 bean，那么我建议`CsvDozerBeanReader`在[Super CSV Dozer Extension](http://supercsv.sourceforge.net/dozer.html)项目中使用，因为它支持嵌套和索引字段映射。看看[这里](http://supercsv.sourceforge.net/examples_dozer.html)使用的一些例子。

下面是一个使用`CsvDozerBeanReader`. 您会注意到它与`CsvBeanReader`示例几乎相同，但是：

*   它使用不同的阅读器（呃！）

*   它使用索引映射，例如`attribs[0]`

*   它通过调用来设置映射`configureBeanMapping()`（而不是在方法上接受字符串数组，`read()`例如`CsvBeanReader`

*   它还设置了一些提示（更多内容见下文）

代码：

```
package org.supercsv.example;

import java.io.IOException;
import java.io.Reader;
import java.io.StringReader;

import org.supercsv.cellprocessor.Optional;
import org.supercsv.cellprocessor.constraint.NotNull;
import org.supercsv.cellprocessor.ift.CellProcessor;
import org.supercsv.io.dozer.CsvDozerBeanReader;
import org.supercsv.io.dozer.ICsvDozerBeanReader;
import org.supercsv.prefs.CsvPreference;

public class ReadWithCsvDozerBeanReader {

    private static final String CSV = 
            "firstname, lastname, dog_name, fav_hat, fav_color\n"
            + "bill,smith,fido,porkpie,blue\n" 
            + "james,smith,rover,bowler,purple";

    private static final String CSV2 = 
            "firstname, lastname, car_type, floor_number\n" 
            + "tom, collins, ford, 14\n"
            + "jim, jones, toyota, 120";

    // attributes start at element 2 of the header array
    private static final int ATT_START_INDEX = 2;

    // custom preferences required because CSV contains spaces that aren't part of the data
    private static final CsvPreference PREFS = new CsvPreference.Builder(CsvPreference.STANDARD_PREFERENCE)
        .surroundingSpacesNeedQuotes(true).build();

    public static void main(String[] args) throws IOException {
        System.out.println("CsvDozerBeanReader with first CSV input:");
        readWithCsvDozerBeanReader(new StringReader(CSV));
        System.out.println("CsvDozerBeanReader with second CSV input:");
        readWithCsvDozerBeanReader(new StringReader(CSV2));
    }

    private static void readWithCsvDozerBeanReader(final Reader reader) throws IOException {
        ICsvDozerBeanReader beanReader = null;
        try {
            beanReader = new CsvDozerBeanReader(reader, PREFS);

            final String[] header = beanReader.getHeader(true);

            // set up the field mapping, processors and hints dynamically
            final String[] fieldMapping = new String[header.length];
            final CellProcessor[] processors = new CellProcessor[header.length];
            final Class<?>[] hintTypes = new Class<?>[header.length];
            for( int i = 0; i < header.length; i++ ) {
                if( i < ATT_START_INDEX ) {
                    // normal mappings
                    fieldMapping[i] = header[i];
                    processors[i] = new NotNull();
                } else {
                    // attribute mappings
                    fieldMapping[i] = String.format("attribs[%d]", i - ATT_START_INDEX);
                    processors[i] = new Optional(new ParsePersonAttribute(header));
                    hintTypes[i] = PersonAttribute.class;
                }
            }

            beanReader.configureBeanMapping(Person.class, fieldMapping, hintTypes);

            Person person;
            while( (person = beanReader.read(Person.class, processors)) != null ) {
                System.out.println(String.format("lineNo=%s, rowNo=%s, person=%s", 
                    beanReader.getLineNumber(),
                    beanReader.getRowNumber(), person));
            }

        }
        finally {
            if( beanReader != null ) {
                beanReader.close();
            }
        }
    }

} 
```

输出：

```
CsvDozerBeanReader with first CSV input:
lineNo=2, rowNo=2, person=Person [firstname=bill, lastname=smith, attribs=[PersonAttribute [key=dog_name, value=fido], PersonAttribute [key=fav_hat, value=porkpie], PersonAttribute [key=fav_color, value=blue]]]
lineNo=3, rowNo=3, person=Person [firstname=james, lastname=smith, attribs=[PersonAttribute [key=dog_name, value=rover], PersonAttribute [key=fav_hat, value=bowler], PersonAttribute [key=fav_color, value=purple]]]
CsvDozerBeanReader with second CSV input:
lineNo=2, rowNo=2, person=Person [firstname=tom, lastname=collins, attribs=[PersonAttribute [key=car_type, value=ford], PersonAttribute [key=floor_number, value=14]]]
lineNo=3, rowNo=3, person=Person [firstname=jim, lastname=jones, attribs=[PersonAttribute [key=car_type, value=toyota], PersonAttribute [key=floor_number, value=120]]] 
```

在整理这个示例时，我`CsvDozerBeanReader`在 Super CSV 2.0.1 中发现了一个错误，当您将[单元处理器](http://supercsv.sourceforge.net/cell_processors.html)（例如我在上面示例中创建的用于解析每个人属性键/值的处理器）与索引映射相结合时，例如：

```
"firstname","lastname","attribs[0]","attribs[1]" 
```

我刚刚发布了修复此问题的 Super CSV 2.1.0。事实证明，Dozer 需要为索引映射配置一个提示才能正常工作。我不是 100% 确定为什么，因为`PersonAttribute`当您摆脱自定义单元处理器并使用以下（深度）映射时，它非常有能力创建每个并将其添加到正确的索引中：

```
"firstname","lastname","attribs[0].value","attribs[1].value" 
```

我希望这有帮助 ：）

# c# - 如何删除所有文件但保持目录结构不变？

> ID：16111303
> 
> 赞同：0
> 
> 时间：2013-04-19T18:31:13.553
> 
> 标签：c#

我想删除文件夹中的所有文件，并删除其所有子文件夹和子子文件夹等中的所有文件，但我不想删除文件夹本身。

最简单的方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-19T18:34:06.397

```
foreach (var file in Directory.EnumerateFiles("path", "*", System.IO.SearchOption.AllDirectories))
{
    //TODO consider error handling
    File.Delete(file);
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-19T18:32:38.540

```
 static void DirSearch(string sDir)
   {
       try
       {
           foreach (string d in Directory.GetDirectories(sDir))
           {
               foreach (string f in Directory.GetFiles(d))
               {
                   //Delete files, but not directories
                   File.Delete(f);
               }
               //Recursively call this method, so that each directory
               //in the structure is wiped
               DirSearch(d);
           }
       }
       catch (System.Exception excpt)
       {
           Console.WriteLine(excpt.Message);
       }
   } 
```

# asp.net - asp.net 切换中的引导手风琴根本不起作用

> ID：16111305
> 
> 赞同：2
> 
> 时间：2013-04-19T18:31:17.770
> 
> 标签：asp.net, twitter-bootstrap

抱歉，这是另一个引导问题，但在与此作斗争 1 1/2 天后，我希望也许有人可以帮助我解决这个问题。

我有一个带有引导菜单和选项卡的 asp.net 4.5 网络表单（它们工作得很好！）在移动视图中，我想显示一个手风琴而不是选项卡。

我创建了一个新部分并按照引导示例中的代码进行操作，但无法切换。当我点击一个链接时，什么也没有发生。

我将其中一个手风琴部分更改为手风琴体折叠，以便打开一个部分，希望它可能对他们有用。

没运气。它在第一次打开时是打开的，但是一旦您单击另一个手风琴标题，打开的标题就会关闭，并且什么都不会打开。

```
 <section class="hidden-desktop visible-tablet visible-phone">
        <div id="accordion2" class="accordion">

            <div class="accordion-group">
                <div class="accordion-heading">
                    <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#acServ">Services
                    </a>
                </div>

                <div id="acServ" class="accordion-body collapse in">
                    <div class="accordion-inner">
                        <div>
                            Services
                        </div>
                    </div>
                </div>
            </div>
            <div class="accordion-group">
                <div class="accordion-heading">
                    <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#acSched">Scheduling
                    </a>
                </div>

                <div id="acSched" class="accordion-body collapse">
                    <div class="accordion-inner">
                        <div>
                            Scheduling
                        </div>
                    </div>
                </div>
            </div>

            <div class="accordion-group">
                <div class="accordion-heading">
                    <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#acClient">Clients
                    </a>
                </div>

                <div id="acClient" class="accordion-body collapse">
                    <div class="accordion-inner">
                        <div>
                            Clients
                        </div>
                    </div>
                </div>
            </div>
            <div class="accordion-group">
                <div class="accordion-heading">
                    <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#acForm">Formulas
                    </a>
                </div>

                <div id="acForm" class="accordion-body collapse">
                    <div class="accordion-inner">

                        <div>
                            Formulas
                        </div>
                    </div>
                </div>
            </div>
            <div class="accordion-group">
                <div class="accordion-heading">
                    <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#acProd">Products
                    </a>
                </div>

                <div id="acProd" class="accordion-body collapse">
                    <div class="accordion-inner">

                        <div>
                            Products
                        </div>
                    </div>
                </div>
            </div>
            <div class="accordion-group">
                <div class="accordion-heading">
                    <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#acAbout">About
                    </a>
                </div>

                <div id="acAbout" class="accordion-body collapse">
                    <div class="accordion-inner">

                        <div>
                            About
                        </div>
                    </div>
                </div>
            </div>
            <div class="accordion-group">
                <div class="accordion-heading">
                    <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#acStart">Get Started
                    </a>
                </div>

                <div id="acStart" class="accordion-body collapse">
                    <div class="accordion-inner">

                        <div>
                            Get Started
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section> 
```

有人对发生的事情有任何想法吗？

哦，是的，脚本的顺序如下......

```
<script src="Scripts/jquery-1.9.1.min.js"></script>
<script src="Scripts/bootstrap.min.js"></script>
<script src="Scripts/bootstrap-collapse.js"></script>
<script src="Scripts/bootstrap-transition.js"></script> 
```

而css就像......

```
<link href="Content/bootstrap.css" rel="stylesheet" />
<link href="Content/bootstrap-responsive.min.css" rel="stylesheet" />
<link href="Content/Site.css" rel="stylesheet" /> 
```

Site.css 是我对 bootstrap.css 选项卡所做的一些简单更改（即颜色）。

# python - 添加到常规 numpy ndarray 时调用 scipy.sparse __add__ 方法？

> ID：16111309
> 
> 赞同：2
> 
> 时间：2013-04-19T18:31:40.183
> 
> 标签：python, numpy, scipy, ipython, sparse-matrix

我正在计算 scipy.sparse 矩阵（CSC）和 numpy ndarray 向量之间的点积：

```
>>> print type(np_vector), np_vector.shape
<type 'numpy.ndarray'> (200,)
>>> print type(sp_matrix), sparse.isspmatrix(sp_matrix), sp_matrix.shape
<class 'scipy.sparse.csc.csc_matrix'> True (200, 200)
>>> dot_vector = dot(np_vector, sp_matrix) 
```

结果似乎是一个新的 ndarray 向量，正如我所期待的：

```
>>> print type(dot_vector), dot_vector.shape
<type 'numpy.ndarray'> (200,) 
```

但是，当我尝试向该向量添加标量时，我收到异常：

```
>>> scalar = 3.0
>>> print dot_vector + scalar 
C:\Python27\lib\site-packages\scipy\sparse\compressed.pyc in __add__(self, other)
    173                 return self.copy()
    174             else: # Now we would add this scalar to every element.
--> 175                 raise NotImplementedError('adding a nonzero scalar to a '
    176                                           'sparse matrix is not supported')
    177         elif isspmatrix(other):

NotImplementedError: adding a nonzero scalar to a sparse matrix is not supported 
```

好像结果`dot_vector`又是一个稀疏矩阵。

具体来说，好像我有一个 ndarray 但`__add__`为运算符调用了稀疏矩阵`+`。

这是我希望被调用的方法：

```
>>> print dot_vector.__add__
<method-wrapper '__add__' of numpy.ndarray object at 0x05250690> 
```

我在这里遗漏了什么或者这真的看起来很奇怪吗？
是什么决定了操作员调用哪种方法`+`？
我在 IPython Notebook ( `ipython notebook --pylab inline`) 中运行此代码。会不会是 IPython --pylab 或笔记本内核搞砸了？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-19T19:43:57.043

如果您执行以下操作，您的呼叫`np.dot`所做的与您得到的并没有太大不同：

```
>>> np.dot([1, 2, 3], 4)
array([ 4,  8, 12]) 
```

因为`np.dot`不了解稀疏矩阵，所以在您的情况下，返回再次是向量的每个元素与原始稀疏矩阵的乘积。这可能是调用`__rmul__`稀疏矩阵的方法来执行的，所以你得到的是一个 200 项的数组，每个数组本身就是一个稀疏矩阵。当您尝试将标量添加到该向量时，它会被广播，并且当您尝试将标量添加到每个矩阵时，会弹出错误。

这样做的正确方法是调用`.dot`稀疏矩阵的方法。预乘一个行向量：

```
>>> aa = sps.csc_matrix(np.arange(9).reshape(3, 3))
>>> bb = np.arange(3)
>>> aa.T.dot(bb)
array([15, 18, 21]) 
```

并乘以列向量：

```
>>> aa.dot(bb)
array([ 5, 14, 23]) 
```

这当然完全等同于您对数组的操作：

```
>>> aaa = np.arange(9).reshape(3,3)
>>> aaa.dot(bb)
array([ 5, 14, 23])
>>> bb.dot(aaa)
array([15, 18, 21]) 
```

# php - PHP 5：按嵌套值或有条件的第二个嵌套值对多维数组进行排序

> ID：16111310
> 
> 赞同：1
> 
> 时间：2013-04-19T18:31:49.460
> 
> 标签：php, arrays, multidimensional-array, sorting

我认为这很简单，我只是在试图组织如何在脑海中完成这件事时感到困惑。

问题的一般形式如下：

```
<?php 
$array_to_sort(
           0 => array(
                     'element1' => array(),
                     'PrimarySortKey' => int
                     'element2' => array(
                                        'SecondarySortKey' => int
                                         )
                     )
           1 => array(
                     'element1' => array(),
                     'PrimarySortKey' => int
                     'element2' => array(
                                        'SecondarySortKey' => int
                                         )
                     )

           n => array(
                     'element1' => array(),
                     'PrimarySortKey' => int
                     'element2' => array(
                                        'SecondarySortKey' => int
                                         )
                     )
           );
?> 
```

如果从该模型中不明显，则目标是按 排序`PrimarySortKey`，除非它们证明相等，在这种情况下按 排序`SecondarySortKey`。

阅读 PHP 手册给我的印象是这要么是一个复杂的实例，`array_multisort()`要么是一个`array_walk()`函数，但我永远无法弄清楚这种事情。：/

我没有要求任何人为我编写函数，但我会感谢有关该方法的帮助。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T18:38:48.370

使用的实现[`usort()`](http://php.net/manual/en/function.usort.php)如下：

```
function cmp($a, $b) {
    if ($a['PrimarySortKey'] == $b['PrimarySortKey']) {
        if ($a['element2']['SecondarySortKey'] == $b['element2']['SecondarySortKey']) {
           return 0;
        }
        return ($a['element2']['SecondarySortKey'] < $b['element2']['SecondarySortKey']) ? -1 : 1;
    }
    return ($a['PrimarySortKey'] < $b['PrimarySortKey']) ? -1 : 1;
}

usort($array_to_sort, 'cmp'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T18:33:50.623

所以看函数[PHP usort](http://php.net/manual/en/function.usort.php)

工作示例：

```
$arr = array(
        array('PrimarySortKey'=>30,'SecondarySortKey'=>3),
        array('PrimarySortKey'=>1,'SecondarySortKey'=>1),
        array('PrimarySortKey'=>30,'SecondarySortKey'=>9)
    );

    print_r($arr);

    usort($arr,function($a,$b){
       $key_a = $a['PrimarySortKey'];
       $key_b = $b['PrimarySortKey'];
        if($key_a == $key_b){
            $s_key_a = $a['SecondarySortKey'];   
            $s_key_b = $b['SecondarySortKey'];   

            return ($s_key_a < $s_key_b) ? -1 : 1;      
        }
        else{
            return ($key_a < $key_b) ? -1 : 1;      
        }

    });

    print_r($arr); 
```

印刷：

```
Array
(
    [0] => Array
        (
            [PrimarySortKey] => 30
            [SecondarySortKey] => 3
        )

    [1] => Array
        (
            [PrimarySortKey] => 1
            [SecondarySortKey] => 1
        )

    [2] => Array
        (
            [PrimarySortKey] => 30
            [SecondarySortKey] => 9
        )

)
Array
(
    [0] => Array
        (
            [PrimarySortKey] => 1
            [SecondarySortKey] => 1
        )

    [1] => Array
        (
            [PrimarySortKey] => 30
            [SecondarySortKey] => 3
        )

    [2] => Array
        (
            [PrimarySortKey] => 30
            [SecondarySortKey] => 9
        )

) 
```

# ruby - 如何向 Ruby 字符串添加计数（SiriProxy）

> ID：16111313
> 
> 赞同：0
> 
> 时间：2013-04-19T18:31:58.027
> 
> 标签：ruby, raspberry-pi, siri

我用 The Three Little Piggies 制作了一个 SiriProxy，我玩弄了它，现在我可以用 Siri 控制我的房间和车库门了。我决定每次车库门打开或关闭时让我的 pi 向我发送一条推文，我在插件文件中使用此命令

```
system("sudo twidge update \"@idoodler The garage door was just opened the XXX time\"")` 
```

而不是 XXX 我喜欢有开口数。我需要这个，因为 twitter 不允许重复。我不需要开场号，我只需要一种方法让每条推文都独一无二。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T18:43:50.667

你为什么不只是添加一个时间戳或其他东西来区分：

```
tweet = Time.now.strftime("@idoodler The door was opened at %Y-%m-%d %H:%M:%S") 
```

# asp.net-mvc-4 - 是什么导致浏览器 URL 行被 MVC4 asp.net 中的 Route 填充

> ID：16111318
> 
> 赞同：3
> 
> 时间：2013-04-19T18:32:08.653
> 
> 标签：asp.net-mvc-4, asp.net-routing

当我进入我的主页时

```
http://localhost:5119/ 
```

它重定向到

```
http://localhost:5119/Home 
```

（这就是在我的浏览器 url 栏中显示的内容，我希望它不显示 /Home）

我知道这是我的默认路由所在，但我不知道是什么导致我的 URL 行在浏览器中被重写。当您转到基本 URL 时，Visual Studio 2012 中的默认示例不存在此问题。我附上了我的路线调试的图片（这似乎对我没有帮助，但可能有一些价值）。

谢谢，-彼得

之后添加这个。它是路线代码的相关部分

```
 // HOME
        int currentYearInt;
        Int32.TryParse(currentYear, out currentYearInt);
        routes.MapRoute("HomeRouteAll", "Home/{yearInt}",
                  new
                  {
                      /* Your default route */
                      controller = "Home",
                      action = "Index"
                  });

        // DEFAULT ROUTE
        routes.MapRoute(
            name: "Default",
            url: "{controller}/{action}/{id}",
            defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
            ); 
```

![在此处输入图像描述](https://i.stack.imgur.com/jP13G.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T20:50:13.077

您之所以看到这一点，是因为`Home/{year}`默认路由上方的路由具有`{year}`参数的默认值。

路由引擎做出以下决定：

1.  从路线列表顶部开始
2.  寻找与您的路线值相匹配的东西（controller = "Home", Action="Index"）。
3.  在第一次匹配时，返回，这就是你的 URL。

由于您有一个匹配的控制器 (Home) 和操作 (Index) 以及*year 参数的默认值*，因此路由引擎与路由匹配`Home/{year}`，因此给出了 url `http://domain.com/Home`。

快速修复将是 a) 使 year 没有默认值 ( `Home/2013`)，b) 将所有内容移至不同的控制器 ( `NewName/{year}`)，c) 将其移至不同的操作 ( `NewIndex/{year}`) 或 d) 将您的默认路由更新为使用年份参数而不是 id

```
routes.MapRoute(
                "Default",
                "{controller}/{year}/{action}",
                new {controller = "Home", action = "Index", year = 2013}); 
```

**编辑**

我不确定您在路由定义中的 tryParse 内容，但在我的测试中，这似乎完成了您想要做的事情：

```
routes.MapRoute(
                name: "Test",
                url: "Home/{year}",
                defaults: new { controller = "Home", action = "Index"}, 
//this line causes the year to be an integer
constraints: new { year = @"\d+" }
                );

            routes.MapRoute(
                name: "Default",
                url: "{controller}/{action}/{id}",
                defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
            ); 
```

行为：

[http://domain.com/](http://domain.com/) -> 调用 Home 控制器，索引操作，年份参数为空值（不重定向到 Home/2013）

[http://domain.com/Home/2010](http://domain.com/Home/2010) -> 调用 Home Controller，使用 2010 作为 year 参数的 Index 操作

[http://domain.com/Home/](http://domain.com/Home/) -> 调用 Home Controller，索引操作，年份为 null。

如果您在两个路由中的第一个中定义默认年份，那么转到[http://domain.com/Home](http://domain.com/Home)将调用 Home 控制器，该年份的索引操作为 2013，并且重定向仍然不会发生。

最后，我怀疑您的 Home/Index 操作看起来像这样：

```
public ActionResult Index(int year){...} 
```

如果当您点击 Home/Index 操作时，您希望自动填充 2013，然后将您的 int 更改为可为空的参数并在那里执行而不是路由。

```
public ActionResult Index(int? year){
    if(!year.hasValue){
        year = 2013;
    } 
```

通过在此处执行此逻辑而不是路由，您应该防止重定向到 Home/，因为您没有匹配的`{year}`参数。

# css - 布局问题，列下降到底部

> ID：16111320
> 
> 赞同：0
> 
> 时间：2013-04-19T18:32:12.093
> 
> 标签：css, twitter-bootstrap

我对 twitter bootstrap 很陌生，我尝试做 2 列布局
这是我的代码：

```
<div class="container">
    <div class="row">
        <div class="span3 well">Content</div>
        <div class="span9 well">Content</div>
    </div>
<div> 
```

不幸的是，第二列已被推到第一列的底部

[提琴手](http://jsfiddle.net/uAs6k/301/)

使列的容器`row-fluid`似乎可以解决问题，但是根据引导手册，您需要一个具有该类的 div 容器`container-fluid`

我想修复布局，所以我不想让容器表现得像流体容器。
有没有办法来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T18:51:52.227

如果您使用的是行，则需要将井放置在 span3 和 span9 div 内。

```
<div class="container">
    <div class="row">
        <div class="span3">
            <div class="well">Content</div>
        </div>
        <div class="span9">
            <div class="well">Content</div>
        </div>
    </div>
<div> 
```

由于它们在正常行中使用时具有固定宽度，因此向跨度 div 添加任何填充或边框将导致它们换行。

或者，您可能希望修改引导 css 本身，或者通过考虑边框并相应地减少边距，或者根据[Twitter Bootstrap-borders](https://stackoverflow.com/questions/8793876/twitter-bootstrap-borders)更改 box-sizing 属性。请记住，box-sizing 不适用于某些浏览器，例如 IE7。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T18:52:38.903

在 Twitter Bootstrap 中，`.well`类有填充，这为 span 类的内容提供了额外的宽度。

解决方案是：

```
.well {
    box-sizing: border-box;
    -moz-box-sizing: border-box;
    -webkit-box-sizing: border-box;    
} 
```

[http://jsfiddle.net/uAs6k/305/](http://jsfiddle.net/uAs6k/305/)

# php - Symfony 防火墙在做什么需要这么长时间？

> ID：16111324
> 
> 赞同：61
> 
> 时间：2013-04-19T18:32:22.183
> 
> 标签：php, symfony, symfony-2.2

我的 Symfony 页面并不算太慢（加载时间约为 400 毫秒），但考虑到它只是一个简单的带有基本身份验证的 hello world 页面，加载时间应该不到 100 毫秒。当我进入分析器时，我看到了这个：

![探查器时间线](https://i.stack.imgur.com/LIklu.png)

请注意，它只显示 250 毫秒的“防火墙”。我认为防火墙只是负责让用户远离页面的某些区域 - 我无法想象花费超过几毫秒的时间加上从数据库中获取用户信息所需的时间（在这种情况下是61 毫秒）。

有人可以解释防火墙的实际作用吗？如果您对如何提高防火墙性能有任何一般性的指导，我们将不胜感激。

* * *

**注意**：我当然已经用谷歌搜索过了，我想预先指定我通过 IP 地址而不是主机名连接到 MySQL 数据库。这似乎是我能找到的所有其他慢速 Symfony 防火墙的问题。

* * *

我的项目中可能相关的一些资源：

*   [安全.yaml](http://pastebin.com/sZG4whqD)
*   [路由.yaml](http://pastebin.com/YUEqrmCc)
*   [Astrups/SpectacleBundle/Entity/User.php](http://pastebin.com/wZHSy9Lq)
*   [Astrups/SpectacleBundle/Service/Sha1Salted.php](http://pastebin.com/Wt5yFHhc)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-24T06:52:08.200

我做了一些谷歌搜索，我看到[这个人](http://12wiki.blogspot.com/2012/11/why-does-symfony-2-firewall-take-so.html)，似乎有你问题的答案。

> 经过 15 分钟的研究，我最终发现这是由于 PHP PDO 构造函数造成的（我的防火墙是第一个连接到数据库的，因为我使用实体作为用户）。有了这些知识，很快就发现了问题（[[1]](https://stackoverflow.com/questions/9800577/why-is-constructing-pdo-connection-slow)，[[2]](http://drupal.org/node/1064342)）：事实证明，使用 DNS 名称（如“localhost”）而不是 IP（如“127.0.0.1”）会导致此问题。
> 
> 对 parameters.yml 文件的简单编辑（将 localhost 更改为 127.0.0.1）可以将防火墙加载时间减少到最低限度。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-25T20:19:29.990

唉，事实证明*Rawdreeg*[部分](https://stackoverflow.com/users/2305403/rawdreeg)正确。我制作了一个 20 行的 PHP 脚本来分析连接到我的 MySQL 服务器所需的时间：

 *```
<?php

$time = microtime(true);

$con = new PDO(...);

$connect_time = microtime(true);

$result = $con->query('SHOW TABLES');

$query_time = microtime(true);

var_dump($result->fetchAll(PDO::FETCH_ASSOC));

$time_con = ($connect_time - $time) * 1000;
$time_query = ($query_time - $connect_time) * 1000;

echo "Connection took $time_con ms\n";
echo "Query took $time_query ms\n"; 
```

输出是：

```
连接耗时 230.18503189087 毫秒
查询耗时 64.532995223999 毫秒
```

*这完美地*填补了 Symfony profiler 的空白。好消息是，当我的应用程序上线时，它将通过套接字本地连接到 MySQL 服务器，所以它可能会非常快！但是，除了在本地镜像 MySQL 服务器之外，我对开发过程中的速度几乎无能为力。

所以总结一下答案；Symfony 防火墙最初创建与 MySQL 数据库的连接，在我的情况下，该连接非常慢。就我而言，MySQL 连接时间占防火墙分析时间的 80% 以上。

* * *

**注意：**我已经通过 IP 地址连接到 MySQL 服务器，并且我已经添加`skip-name-resolve`到 MySQL 配置中无济于事。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T14:30:48.613

您的 MySQL 服务器可能是问题所在。尝试添加`skip-name-resolve`到文件的`[mysqld]`部分`my.cnf`。这会阻止 MySQL 对传入连接的 IP 地址进行反向 DNS 查找。*

# javascript - Twitter Bootstrap 工具提示连续显示/隐藏

> ID：16111326
> 
> 赞同：3
> 
> 时间：2013-04-19T18:32:37.580
> 
> 标签：javascript, jquery, twitter-bootstrap

通过连续显示和隐藏工具提示，我遇到了问题。

看看这个片段：http: [//jsfiddle.net/r7GCJ/](http://jsfiddle.net/r7GCJ/)

```
the input-field shows an tooltip if the number in the tooltip is even. 
```

如果您快速三次单击退格键（这意味着“6”是最后一个字符），即使数字是偶数，您也不会看到引导工具提示。（也许你需要一两次尝试）

任何人都知道如何解决这个问题，或者是什么问题？

PS：在我的“真实代码”中，如果数字已经在数据库中，我必须通过 AJAX 查找，如果是，我会显示工具提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T19:55:06.433

这是一个奇怪的问题。我找到了一个解决方案，尽管我承认它有点笨拙。我没有隐藏它，而是销毁它并在我想展示它的时候重新创建它。我无法再重现小提琴中的问题了。

```
$('#fooInput').keyup(function (e) {
    var $foo = $(e.target);
    if (parseInt($foo.val()) % 2 === 0) {
        // create the tooltip
        $foo.tooltip({
            trigger: 'manual',
            title: 'gerade Zahl!',
            placement: 'bottom'
        });
        $foo.tooltip('show');
    } else {
        $foo.tooltip('destroy');
    }
}); 
```

[小提琴](http://jsfiddle.net/r7GCJ/8/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T19:12:11.383

非常有趣的事情：D。我不知道为什么，但这是不常见的情况。您可以通过编写`<input id="fooInput" type="text" />`而不是具有初始值的代码来解决此问题。您可以添加另一个工具提示来说明只允许使用数字。

# sql-server - 已售产品的计数和分组依据

> ID：16111329
> 
> 赞同：1
> 
> 时间：2013-04-19T18:32:44.470
> 
> 标签：sql-server, sql-server-2008, tsql, sql-server-2005

我有一个表交易和一个表产品，如下所示。每个交易都有多个产品。

```
 ProductId Name
      1      ABC
      2      DEF
      3      GHI 
```

每笔交易可以销售多个产品。

```
TransactionId ProductSoldInDept1 ProductSoldinDept2 ProductSoldinDept3
        1         1                       null         null
        2         1                        2           null
        3         3                        1           null
        4         2                        3             1 
```

我打算生成一份报告，我想得到这样的结果：

这显示了按 Id 分组的每个部门销售的产品数量

**预期结果 ：**

```
ProductID Department1ProdCount Department2ProdCount Department3ProdCount 
  1           2                           1             1                    
  2           1                           1             0
  3           1                           1             0 
```

我可以到这里，这是一个查询，用于获取一个特定产品的计数，它是 productid：1 我想知道如何在这里使用一个组：

```
select Count(CASE WHEN ProductSoldInDept1 = 1 THEN 1 END) ,
    Count(CASE WHEN ProductSoldInDept2 = 1 THEN 1 END) ,
      Count(CASE WHEN ProductSoldInDept3 = 1 THEN 1 END)
from   Table1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T18:50:36.970

```
SELECT
  p.ProductID,
  Dept1ProdCount = COUNT(CASE WHEN t.ProductSoldInDept1 = p.ProductID THEN 1 END),
  Dept2ProdCount = COUNT(CASE WHEN t.ProductSoldInDept2 = p.ProductID THEN 1 END),
  Dept3ProdCount = COUNT(CASE WHEN t.ProductSoldInDept3 = p.ProductID THEN 1 END)
FROM dbo.Product AS p
LEFT OUTER JOIN dbo.[Transaction] AS t
ON p.ProductID IN  
  (t.ProductSoldInDept1, t.ProductSoldinDept2, t.ProductSoldinDept3)
GROUP BY p.ProductID; 
```

**结果**

```
| 产品ID | DEPT1PRODCOUNT | DEPT2PRODCOUNT | DEPT3PRODCOUNT |
-------------------------------------------------- --------------
| 1 | 2 | 1 | 1 |
| 2 | 1 | 1 | 0 |
| 3 | 1 | 1 | 0 |
```

[查看演示](http://sqlfiddle.com/#!3/feb6a/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T18:48:55.270

尝试这个

```
select ProductID, 
v.Department1ProdCount, v.Department2ProdCount, v.Department3ProdCount
from product a
cross apply 
(
 select Count(CASE WHEN ProductSoldInDept1 = a.ProductID THEN 1 END) Department1ProdCount,
 Count(CASE WHEN ProductSoldInDept2 = a.ProductID THEN 1 END) Department2ProdCount,
 Count(CASE WHEN ProductSoldInDept3 = a.ProductID THEN 1 END) Department3ProdCount
 from  Table1
) v 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T18:53:54.743

这个：

```
 TransactionId ProductSoldInDept1 ProductSoldinDept2 ProductSoldinDept3
    1         1                       null         null
    2         1                        2           null
    3         3                        1           null
    4         2                        3             1 
```

可能更好的结构是这样的：

```
transid   prodsold    deptid
1         1           1
2         1           1
2         2           2
3         3           1
3         1           2
4         2           1
4         3           2
4         1           3 
```

我认为这将使您的查询更容易编写。

# java - 为什么我不能在 Spring 中使用 JavaConfig 创建我的数据源？

> ID：16111331
> 
> 赞同：1
> 
> 时间：2013-04-19T18:32:54.853
> 
> 标签：java, mysql, spring, maven, spring-mvc

有人可以告诉我我缺少什么我想在 Spring MVC 项目中使用 JavaConfig 来设置以下数据库，但我无法设置驱动程序类、用户、密码等？

有人可以告诉我为什么

```
@Bean
public DataSource dataSource() {

    DataSource ds = new DriverManagerDataSource();
    try {
        ds.setDriverClass("com.mysql.jdbc.Driver");
        ds.setUser("jboss");
        ds.setPassword("xoJ4u0Hs");
        ds.setJdbcUrl("jdbc:mysql://6dhdbm01/jboss1");
    } catch (Exception e) {
        logger.error(e.getMessage());
    }
    return ds;
} 
```

我修复了它：我必须将代码更改为：

```
@Bean
    public DataSource dataSource() {

         // com.mchange.v2.c3p0.ComboPooledDataSource ds = new com.mchange.v2.c3p0.ComboPooledDataSource();

        BasicDataSource ds = new BasicDataSource();

        try {

            /*

            This was old code for using C3P0 Database pooling
            ds.setDriverClass("com.mysql.jdbc.Driver");
            ds.setUser("jboss");
            ds.setPassword("xoJ4u0Hs");
            ds.setJdbcUrl("jdbc:mysql://6dhdbm01/jboss1");
            */

            ds.setDriverClassName("com.mysql.jdbc.Driver");
            ds.setUsername("jboss");
            ds.setPassword("xoJ4u0Hs");
            ds.setUrl("jdbc:mysql://6dhdbm01/jboss1");

        } catch (Exception e) {
            logger.error(e.getMessage());
        }
        return ds;
    } 
```

但是我收到了这个错误。我在 maven pom.xml 中遗漏了什么

```
java.lang.ClassNotFoundException: org.apache.commons.pool.impl.GenericObjectPool 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T18:37:01.363

我的猜测：

*   您正在导入 javax.activation.DataSource 而不是 javax.sql.DataSource
*   com.mysql.jdbc.Driver 不在类路径中
*   URL / 凭据错误

但真的没有太多可做的，第一个猜测是编译时间问题，第二个是部署时间问题。

编辑：找不到什么符号？我的猜测是 DriverManagerDataSource 因为它不是核心的一部分，它是 spring-jdbc 的一部分。此外，不会真正推荐 DataSource 实现，因为它不是连接池，它每次都会创建一个新连接，请查看`commons-dbcp`

# magento - Magento - 删除所有特价

> ID：16111335
> 
> 赞同：1
> 
> 时间：2013-04-19T18:33:27.737
> 
> 标签：magento

我需要删除我的 magento 商店中的所有特价商品，当我查看 phpMyAdmin 时，我对 magento 的数据库结构一无所知。

有人可以指导我吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-05-22T13:52:17.553

有一种简单的方法可以从所有产品中删除所有特价。您实际上不需要运行任何脚本。只需转到`administration -> catalog -> manage products`并单击`select all`网格视图左上角的 。然后，在`actions`右上角的下拉列表中，选择`Update Attributes`并按下`Submit`。

请看下面的截图：

![屏幕 1](https://i.stack.imgur.com/rXNlL.png)

现在，在更新属性屏幕中，向下滚动到`Special Price`字段，然后选中`Change`复选框。不要在文本框中放任何东西。点击保存。

请参阅下面的屏幕截图。

![屏幕 2](https://i.stack.imgur.com/OiQln.png)

如果您有很多产品，这可能需要一段时间，但它会在不干扰数据库的情况下工作。完成后，转到索引管理并重新索引所有内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T21:55:30.530

您有两种解决方法：

1) 更多地查看 Magento 数据库，它使用多个表来映射价格等。如果您启用了它，还可以使用单个平面表。要更新所有价格，您需要在 varchar 表中查找特殊价格值，获取该 ID 并更新其父级。

2) 创建一个 PHP 脚本，它将加载所有产品并循环并更新您想要的值。基本代码是：

```
// inside a loop
$product->setSpecialPrice(0);
$product->save(); 
```

调试所需 SQL 的一种简单方法是启用 MySQL 日志记录、保存产品并查看正在写入哪些表。或者甚至在产品目录保存事件中添加一个回显到保存后的实体以打印出生成的 SQL。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-01-13T05:19:41.503

直接来自数据库。

在执行以下查询导出并保留备份“catalog_product_entity_decimal”表之前。

执行以下查询。

> DELETE from `catalog_product_entity_decimal`where attribute_id in ( select attribute_id from eav_attribute where attribute_code = 'special_price');

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-03-02T07:07:31.817

如果要删除特价，请创建 csv 文件以进行导入，并使用 SKU 添加空白的 valspecial 价格字段并导入该 csv。它删除所有特价。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-03-01T14:41:55.557

您只需选择空白字段并保存更改，然后所有特价将被删除。 [附在此处的图片](https://i.stack.imgur.com/vSTFV.png)

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2013-04-20T23:17:14.060

问题是为什么你需要删除它们？您也可以使用 CSS 隐藏它们，快速简单，但再一次……您应该评估这种需求和解决方案！希望能帮助到你！

# javascript - 表格清除按钮功能无法正常工作

> ID：16111336
> 
> 赞同：2
> 
> 时间：2013-04-19T18:33:29.973
> 
> 标签：javascript, jquery

我有一个具有提交按钮和清除按钮的表单。最初清除按钮工作正常，没有问题，但在我提交表单后，如果没有找到结果，表单保持填充状态，清除按钮不起作用。即使我刷新页面表单仍然填写。但是在提交之前，如果我输入任何内容并按清除一切正常。我在控制台中没有收到任何错误。非常混乱。帮助！

查询：

```
function resetHandler(){
$('#type').find('option[value=ALL]').attr("selected",true);
$('#forecastIsc').find('option[value=ALL]').attr("selected",true);
$('#labelNbr').val("");
$('#senderSel').find('option[value=equal]').attr("selected",true);
$('#sender').val("");
$('#recipientSel').find('option[value=equal]').attr("selected",true);
$('#recipient').val("");
$('#divIscCode').hide();
$('#loadDates').hide();
$('#error').hide();
} 
```

形式：

```
<td width="5%"><input type="reset" id="reset" value="Clear"/><br> 
```

控制器：

```
if(hasError){
        model.addObject("hasError", true);
        model.addObject("errorMessage", errorMessage);
formbean = (SelectionParams)request.getSession().getAttribute("sessionBean");
        //test
        System.err.println("here for testing from viewAnalysisSelection");
        System.err.println("Type is: " + formbean.getType());
        System.err.println("IscCode is: " + formbean.getForecastIsc());
        System.err.println("ActualIscCode is: " + formbean.getActualIsc());
        System.err.println("labelNbr is: " + formbean.getLabelNbr());
        System.err.println("senderOp is: " + formbean.getSenderOp());       
    System.err.println("senderLastName is: " + formbean.getSenderLastName());
        System.err.println("receiverOp is: " + formbean.getReceiverOp());
System.err.println("receiverLastName is: " + formbean.getReceiverLastName());
        model.addObject("parcel", formbean);
        model.addObject("defaultType", formbean.getType());
    }

    model.addObject("noBackTag", true); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T18:35:49.777

问题是`id`，如果您输入类型`reset`将其更改为 myreset 之类的其他内容，那么它将起作用。我不知道为什么我们不能重置 id 但我已经完成了。

*html*

```
<td width="5%"><input type="reset" id="myreset" value="Clear"/><br> 
```

*Javascript*

```
$('#myreset').click(function(){
  $('form')[0].reset();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T14:44:53.547

通过将类型更改为按钮而不是重置对我有用！

# c++ - 使用自定义比较器在 C++ 中声明 priority_queue

> ID：16111337
> 
> 赞同：122
> 
> 时间：2013-04-19T18:33:32.020
> 
> 标签：c++, std, priority-queue

我正在尝试声明一个`priority_queue of nodes`,`bool Compare(Node a, Node b)`用作比较器函数（它在节点类之外）。

我目前拥有的是：

```
priority_queue<Node, vector<Node>, Compare> openSet; 
```

出于某种原因，我得到`Error: "Compare" is not a type name`

将声明更改为`priority_queue <Node, vector<Node>, bool Compare>`

给我`Error: expected a '>'`

我也试过：

```
priority_queue<Node, vector<Node>, Compare()> openSet;
priority_queue<Node, vector<Node>, bool Compare()> openSet;
priority_queue<Node, vector<Node>, Compare<Node, Node>> openSet; 
```

我应该如何正确声明我的`priority_queue`？

* * *

## 回答 #1

> 赞同：152
> 
> 时间：2013-04-19T18:38:06.797

*注意 - 您可能还想查看其他答案，尤其是带有 decltype 和 lambda 的答案*

* * *

您应该像这样声明一个类`Compare`并为其重载`operator()`：

```
class Foo
{

};

class Compare
{
public:
    bool operator() (Foo, Foo)
    {
        return true;
    }
};

int main()
{
    std::priority_queue<Foo, std::vector<Foo>, Compare> pq;
    return 0;
} 
```

或者，如果您由于某些原因无法将其作为课程，您可以使用`std::function`它：

```
class Foo
{

};

bool Compare(Foo, Foo)
{
    return true;
}

int main()
{
    std::priority_queue<Foo, std::vector<Foo>, std::function<bool(Foo, Foo)>> pq(Compare);
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：84
> 
> 时间：2018-02-02T17:15:18.160

接受的答案显示了如何使用类或 a`std::function`作为比较器。我们也可以传递一个函数指针，正如[cute_ptr's answer](https://stackoverflow.com/a/40573224/7328782)已经显示的那样。但是，这样做的语法比那里显示的要简单得多：

```
class Node;
bool Compare(Node a, Node b);

std::priority_queue<Node, std::vector<Node>, decltype(&Compare)> openSet(Compare); 
```

也就是说，不需要显式编码函数的类型，您可以让编译器使用`decltype`.

如果比较器是 lambda，这将非常有用。除了使用之外，您不能以任何其他方式指定 lambda 的类型`decltype`。例如：

```
auto compare = [](Node a, Node b) { return a.foo < b.foo; }
std::priority_queue<Node, std::vector<Node>, decltype(compare)> openSet(compare); 
```

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2013-04-19T18:46:18.397

The third template parameter must be a class who has `operator()(Node,Node)` overloaded. So you will have to create a class this way:

```
class ComparisonClass {
public:
    bool operator() (Node, Node) {
        //comparison code here
    }
}; 
```

And then you will use this class as the third template parameter like this:

```
priority_queue<Node, vector<Node>, ComparisonClass> q; 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2016-11-13T11:19:57.353

直接回答你的问题：

> 我正在尝试声明一个`priority_queue`节点，使用`bool Compare(Node a, Node b) as the comparator function`
> 
> 我目前拥有的是：
> 
> ```
> priority_queue<Node, vector<Node>, Compare> openSet; 
> ```
> 
> 出于某种原因，我收到错误：
> 
> ```
> "Compare" is not a type name 
> ```

编译器准确地告诉你哪里出了问题：`Compare`不是类型名称，而是一个函数的实例，它接受两个`Nodes`并返回一个`bool`.
您需要指定函数指针类型：
`std::priority_queue<Node, std::vector<Node>, bool (*)(Node, Node)> openSet(Compare)`

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2020-09-17T21:39:00.090

您必须先定义比较。有 3 种方法可以做到这一点：

1.  使用类
2.  使用结构（与类相同）
3.  使用 lambda 函数。

使用类/结构很容易，因为很容易声明，只需在执行代码上方写下这行代码

```
struct compare{
  public:
  bool operator()(Node& a,Node& b) // overloading both operators 
  {
      return a.w < b.w: // if you want increasing order;(i.e increasing for minPQ)
      return a.w > b.w // if you want reverse of default order;(i.e decreasing for minPQ)
   }
}; 
```

调用代码：

```
priority_queue<Node,vector<Node>,compare> pq; 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2019-04-13T12:10:35.097

也可以使用 lambda 函数。

```
auto Compare = [](Node &a, Node &b) { //compare };
std::priority_queue<Node, std::vector<Node>, decltype(Compare)> openset(Compare); 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2020-07-17T13:46:55.897

如果这对任何人都有帮助：

```
static bool myFunction(Node& p1, Node& p2) {}
priority_queue <Node, vector<Node>, function<bool(Node&, Node&)>> pq1(myFunction); 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2021-09-16T04:39:07.857

在优先级队列中，有一个预定义的布尔函数“operator<()”，请尝试根据您的要求重载该函数。

```
bool operator<(const Node& x,const Node& y){
    return x.data>y.data;
}

priority_queue<Node> min_heap; 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-04-05T13:02:38.970

使用最新的 c++ 标准，您实际上可以为比较器声明一个 lambda 函数，这将使代码更加简洁。这是一个示例代码：

```
#include <queue>

class Foo
{
    public:
        int i;
};

int main()
{
    auto comparator = [](const Foo& a, const Foo& b) {
        return a.i > b.i;
    };

    std::priority_queue<Foo, std::vector<Foo>, decltype(comparator)>  pq(comparator);
    return 0;
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-11-23T17:58:59.747

更喜欢 struct，这就是 std::greater 所做的

```
struct Compare {
  bool operator()(Node const&, Node &) {}
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-09-23T18:40:39.823

借助`struct`也我们可以做到这一点。代码将如下所示。

```
struct myCompare{
    bool operator()(Node &a, Node &b){
        // Your own custom logic to compare the two nodes and return a boolean value.
    }
}

priority_queue<Node, vector<Node>, myCompare> openSet; 
```

# matlab - 如何在MATLAB中的数组中存储超过4个小数位

> ID：16111341
> 
> 赞同：2
> 
> 时间：2013-04-19T18:33:42.567
> 
> 标签：matlab, floating-point, number-formatting

我想将 6 个十进制数字存储到一个数组中，但是当我将它存储到数组中时，它最多只能存储 4 个十进制数字而不是 6 个。如何将最多 6 个数字存储到一个数组中？

例如，如果

```
 e=0.059995;
 W(l,i)=e; 
```

但是 W(l,i) 给我的结果是小数点后 4 位

```
 disp(W(l,i))
  0.0600 
```

如何将 6 个十进制数字存储到一个数组中，即当我打印数组时它会打印 6 个小数位？

```
 disp(W(l,i))
   0.059995 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-19T18:38:20.227

Matlab 默认设置最多可存储 15 位数字。它只是您的显示格式。看看[`format`](http://www.mathworks.com/help/matlab/ref/format.html)命令。

或者直接在 Matlab 命令提示符下输入：

```
format long 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T18:42:01.297

如果你知道你只有 6 位数字，你可以使用

```
 sprintf('%0.6f', W(l,i)) 
```

代替`disp`

# c# - 如何将 DataGridView 绑定到双精度列表

> ID：16111345
> 
> 赞同：0
> 
> 时间：2013-04-19T18:33:53.583
> 
> 标签：c#, winforms, list, data-binding

如何将 DataGridView 绑定到双精度列表？

我所做的是：

```
 private List<double> x_axis_values = new List<double>();

    public main()
    {
        InitializeComponent();
        var source = new BindingSource();
        source.DataSource = this.x_axis_values;
        this.dataGridViewX.DataSource = source;
    } 
```

但是当我更新列表时，DataGridView 仍然为空。抱歉，使用 DataGridView 的第一天...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T18:46:42.883

```
private List<double> x_axis_values = new List<double>();
private BindingSource bindingSource = new BindingSource();;
    public main()
    {
        InitializeComponent();   
        bindingSource.DataSource =  this.x_axis_values.Select(x => new { Value = x }).ToList();
        dataGridViewX.DataSource = bindingSource;        
    } 
```

# c# - 使用包含 2 个参数的方法进行多线程以返回字典

> ID：16111346
> 
> 赞同：0
> 
> 时间：2013-04-19T18:33:54.670
> 
> 标签：c#, multithreading, return-type

我编写了一个方法，它遍历文件列表并从每个文件中提取值并将它们存储到字典中并返回字典。此方法遍历大量文件，因此我收到 ContextSwitchDeadLock 错误。我已经调查了这个错误，我需要使用一个线程来修复这个错误。我是线程的新手，希望得到线程方面的帮助。

我创建了一个新线程并使用委托将参数字典和文件名传递到方法 getValuesNew()。我想知道如何返回字典。我附上了我想调用的方法以及创建新线程的主程序中的代码。任何改进我的代码的建议将不胜感激！

```
 //dictionary and fileNames are manipulated a bit before use in thread
            Dictionary<string, List<double>> dictionary = new Dictionary<string, List<double>>();
            List<string> fileNames = new List<string>();

            ...

            Thread thread = new Thread(delegate()
            {
                 getValuesNEW(dictionary, fileNames);
            });

            thread.Start();

   //This is the method that I am calling
   public Dictionary<string, List<double>> getValuesNEW(Dictionary<string, List<double>> dictionary, List<string> fileNames)
    {
        foreach (string name in fileNames)
        {
            XmlReader reader = XmlReader.Create(name);
            var collectValues = false;
            string ertNumber = null;
            while (reader.Read())
            {
                if ((reader.NodeType == XmlNodeType.Element))
                {
                    if (reader.Name == "ChannelID" && reader.HasAttributes)
                    {
                        if (dictionary.ContainsKey(sep(reader.GetAttribute("EndPointChannelID"))))
                        {
                            //collectValues = sep(reader.GetAttribute("EndPointChannelID")) == ertNumber;
                            collectValues = true;
                            ertNumber = sep(reader.GetAttribute("EndPointChannelID"));
                        }

                        else
                        {
                            collectValues = false;
                        }
                    }
                    else if (collectValues && reader.Name == "Reading" && reader.HasAttributes)
                    {
                        dictionary[ertNumber].Add(Convert.ToDouble(reader.GetAttribute("Value")));
                    }

                }
            }
        }
        return dictionary;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T18:47:06.557

其他人已经解释了为什么当前的方法无法让您有所作为。如果您使用的是 .NET 4，则可以使用`ConcurrentDictionary`and`Parallel.ForEach`

```
private List<double> GetValuesFromFile(string fileName)
{
      //TBD
}

private void RetrieveAllFileValues()
{
     IEnumerable<string> files = ...;
     ConcurrentDictionary<int, List<double>> dict = new ConcurrentDictionary<int, List<double>>();
     Parallel.ForEach(files, file =>
           {
               var values = GetValuesFromFile(file);
               dict.Add(file, values);
           });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T18:42:26.803

您不需要返回字典：主线程已经引用了它，它会看到您的线程所做的更改。主线程所要做的就是等到委托线程完成（例如使用`thread.Wait()`）。

但是，以这种方式做事，您不会从多线程中受益，因为没有任何事情是并行完成的。您可以做的是拥有多个线程和多个字典（每个线程一个）。当每个人都完成后，主线程可以将所有这些字典放在一起。

您不希望多个线程访问同一个字典的原因是 Dictionary 类不是线程安全的：如果多个线程同时使用它，它的行为是未定义的。但是你可以使用 a `ConcurrentDictionary`，这个是线程安全的。这意味着每次读取或写入 时`ConcurrentDictionary`，它都会使用锁来确保等到没有其他人同时使用字典。

这两种技术中哪一种更快取决于您的线程访问共享字典的频率：如果它们很少访问它，那么 a`ConcurrentDictionary`将运行良好。如果他们经常访问它，那么最好使用多个字典并最终合并。在您的情况下，由于涉及文件 I/O，我怀疑这种`ConcurrentDictionary`方法效果最好。

因此，简而言之，将 getValuesNEW 更改为：

```
//This is the method that I am calling
public void getValuesNEW(ConcurrentDictionary<string, List<double>> dictionary, List<string> fileNames)
 {
     foreach (string name in fileNames)
     {
         // (code in there is unchanged)
     }
     // no need to return the dictionary
     //return dictionary;
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T18:43:10.900

如果你想等待你的线程完成，那么你可以使用`Thread.Join`after`Thread.Start`来获取你的线程的结果，创建一个类变量或者你的主程序和你的线程都可以使用的东西，但是，我不明白这一点这里是一个线程，除非您想并行处理所有文件。

# php - 检查 PHP 数组中的匿名函数？

> ID：16111347
> 
> 赞同：0
> 
> 时间：2013-04-19T18:33:58.270
> 
> 标签：php, anonymous-function, method-chaining, magic-methods

我们如何检查 PHP 数组中的匿名函数？

例子：

```
$array = array('callback' => function() {
    die('calls back');
}); 
```

然后我们可以简单地使用`in_array`, 和这样的东西：

```
if( in_array(function() {}, $array) ) {
    // Yes! There is an anonymous function inside my elements.
} else {
    // Nop! There are no anonymous function inside of me.
} 
```

我正在尝试方法链接和 PHP 的魔术方法，我已经到了匿名提供一些函数的地步，只是想检查它们是否已定义，但我不希望循环遍历对象，也不使用`gettype`，或任何类似的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T18:54:08.537

您可以通过检查值是否为以下实例来过滤数组`Closure`：

```
$array = array( 'callback' => function() { die( 'callback'); });
$anon_fns = array_filter( $array, function( $el) { return $el instanceof Closure; });
if( count( $anon_fns) == 0) { // Assumes count( $array) > 0
    echo 'No anonymous functions in the array';
} else {
    echo 'Anonymous functions exist in the array';
} 
```

差不多，只需检查数组的元素是否是`Closure`. 如果是，你有一个可调用的类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T19:08:51.860

Nickb 的答案非常适合确定它是否是匿名函数，但您也可以使用 is_callable 来确定它是否是任何类型的函数（假设可能更安全）

例如

```
$x = function() { die(); }
$response = action( array( $x ) );
...
public function action( $array ){
    foreach( $array as $element )
        if( is_callable( $element ) ) 
           ....
} 
```

# ruby-on-rails - 如何在 Slim 文件中有多个 `yield`s/`content_for`s？

> ID：16111354
> 
> 赞同：3
> 
> 时间：2013-04-19T18:34:21.100
> 
> 标签：ruby-on-rails, ruby-on-rails-3, slim-lang

这是我的基本 Slim 文件：

```
doctype html
html lang="en"
  head
    meta charset="utf-8"
    title= "#{yield(:title) || 'Home'} | #{app_config.app_name} "
    = csrf_meta_tags

    /! Le HTML5 shim, for IE6-8 support of HTML elements
    /[if lt IE 9]
      = javascript_include_tag "http://html5shim.googlecode.com/svn/trunk/html5.js"
    /! Le styles
    = stylesheet_link_tag :application
    css:
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the bottom of the topbar */
      }

  body
    = render "layouts/navigation"

    .container-fluid
      = render "layouts/messages"

      - if show_title?
        h1= yield(:title)
        br

      .span2.sidebar
        - content_for :sidebar
      .span10
        = yield

    .container
        footer
        hr
        p Made by Awesoham with Rails and win.

    = javascript_include_tag :application 
```

这是某个控制器的特定 Slim 文件：

```
- title "All Known NEOs"
- unless @neos.empty?
    table
        - for neo in @neos
            tr
                td.name = neo.name
                td.ra = neo.ra_str
                td.dec = neo.dec_str

- content_for :sidebar do \
    | test 
```

使用它会给我“语法错误，意外';'”。

基本上，我的问题是，如何`yield`在一个 Slim 文件中有两个 s？像这样：

```
 .span2.sidebar
    < yield the sidebar here >
  .span10
    < yield other content here > 
```

# performance - LINQ 字符串在 where 子句中无法按预期工作

> ID：16111358
> 
> 赞同：0
> 
> 时间：2013-04-19T18:34:28.180
> 
> 标签：performance, linq, entity-framework, linq-to-sql

如果我用产品 ID 替换产品名称，则查询工作正常。当我选择一个等于“PC”的产品名称时，它什么也不返回。我知道 PC 是正确的，因为在 SQL 中它工作正常。我在 Where 子句中使用了其他字符串，它们都可以正常工作

```
var query = (from c in Consumer
                    join t in Transactions on c.Con_ID equals t.Con_ID
                    join s in Supplier on t.Supp_ID equals s.Supp_ID
                    join p in Product on t.Prod_ID equals p.Prod_ID
                     where p.Name == "PC" && c.City == "Wausau" && s.City == "Madison"
                        select new { SupplierName = s.Name }).Distinct(); 
```

我在这里使用实体参考模型。是否有可能产品上的名称字段映射不正确，或者我错过了一些明显的东西？

# scala - 如何将简单的单个 Scala 文件打包为独立的 jar（无 sbt）？

> ID：16111359
> 
> 赞同：3
> 
> 时间：2013-04-19T18:34:31.563
> 
> 标签：scala, jar, package

我有一个非常简单的 Scala 文件，我需要将其发送给某人以便在没有 Scala（仅 Java）的机器上执行。它只是一个文件，对 jar 有一个依赖项（除了 scala 本身）。

我正在努力正确包装它。我没有使用 sbt 或任何东西。最简单的打包方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T20:07:50.430

假设你有一个文件 Test.scala

```
object Test {
  def main(args: Array[String]){
    println("Hello world!")     
  }
} 
```

用 scalac 编译

```
scalac Test.scala 
```

使用以下内容创建文件 Manifest.txt：

```
Manifest-Version: 1.0
Created-By: 1.6.0_31 (Sun Microsystems Inc.)
Main-Class: Test 
```

将 scala 库从您的发行版复制到当前文件夹并解压缩：

```
unzip scala-library.jar 
```

执行命令：

```
jar cvfm Hello.jar Manifest.txt *.class library.properties scala/ 
```

将其发送给您的收件人。他/她将不得不执行

```
java -cp Hello.jar 
```

# objective-c - 应用程序未运行时的 OS X 停靠菜单

> ID：16111361
> 
> 赞同：1
> 
> 时间：2013-04-19T18:34:35.180
> 
> 标签：objective-c, macos, cocoa, dock

我正在寻找一种方法来在所述应用程序未运行时修改应用程序的持久停靠菜单，或者至少试图找出这是否可能？
我在 Mac OS X 版本 >= 10.5 中使用 Xcode 和 Cocoa 在此
先感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T19:18:11.480

如果您的应用不在 App Store 中并且不使用沙盒，您可以实现[NSDockTilePlugIn](https://developer.apple.com/documentation/appkit/nsdocktileplugin?language=objc)

# html - 移动一个 点击“前”，最好的方法是什么？

> ID：16111362
> 
> 赞同：0
> 
> 时间：2013-04-19T18:34:42.907
> 
> 标签：html, z-index

我对网站布局有一个很好的想法，但还在尝试如何做到这一点..

好吧，我们就这么说吧：你有一堆纸，但它们并没有完美地叠放在一起，但是每张纸都有 20% 的可见度，只有最上面的那张是 100% 可见的。如果你想在中间放一张纸，你把它拉出来放在上面，盖住上面的纸。

我想在网站上这样做。5 互相覆盖，除了最上面的那个，谁躺在上面。假设您要将中间的拉到顶部，将旧的覆盖在顶部，最好的方法是什么？

我在考虑一个 .click 事件，它将当前顶部的 Z-index 更改为比需要顶部的值更低的值。让我们说，他们交换。

也许很难问，但你会建议自己作为一个解决方案吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T18:49:02.443

有很多方法可以解决这个问题。我脑海中浮现的那些是这样的：

变量顶部 = 40; // z-index 值 var topPageTop = 20; // 顶部页面顶部偏移量 var topPageLeft = 40; // 顶部页面左偏移

```
$('.page').click(function(){
    $(this).css('z-index', top);
    $(this).css('top', topPageTop);
    $(this).css('left', topPageLeft);
    shufflePages(yourDOMContainer)
});

function shufflePages(yourDOMContainer){

    for(pageElement in yourDOMContainer){
         iterate top and left back by a set value for each page, skip the top page
         maybe even inclue an animation function?
    }
} 
```

因此，在我的实现中，每个页面都是某个父容器的子元素，它可以是 ul/li 事物或多个 div。有几种方法可以解决这个问题。

显然，shuffle pages 函数是伪代码，但您正在寻找一个起点——而不是最终产品。让我知道这是否有帮助或以任何方式不清楚。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T18:51:47.383

听起来你们在同一条轨道上。我可能会按如下方式处理这个问题：

我不一定会“交换”他们的 z 索引。我要做的是找到“纸叠” div 的最高 z-index，然后简单地为刚刚点击的纸张分配一个高于我们刚刚检测到的最高 z-index 的值。说得通？

还要记住，z-index 属性只有在 DOM 元素具有“位置”时才会生效。换句话说，确保将 div 设置为 position: relative 或 position: absolute。

像这样：

```
// assign this click function to all divs in the paper stack
$(".paper-stack-divs").click(function() {

    var index_highest = 0;  // initialize the highest index value to 0 

    // loop through all of the paper stack divs

    $(".paper-stack-divs").each(function() {

        // get the z-index value for current paper stack div
        var index_current = parseInt($(this).css("z-index"));

        // check the z-index of the current paper stack div against what we
        // currently know to be the highest z-index.
        // if the current z-index is higher than the last known highest z-index, then
        // set the current z-index as our new highest 

        if(index_current > index_highest) 
             index_highest = index_current;  
    });

    // once the loop is finished and we have the highest z-index, give the paper stack
    // div that was just clicked a z-index of our highest z-index, plus 1, which would        
    // make our clicked div now have the highest z-index value and will go to the top of 
    // the stack

    $(this).css("z-index", parseInt(index_highest+1));

 }); 
```

# javascript - 按钮通过单击按钮一直滚动到顶部

> ID：16111363
> 
> 赞同：0
> 
> 时间：2013-04-19T18:34:47.823
> 
> 标签：javascript, jquery

我有这个javascript，所以当用户在页面上滚动时，侧面会有一个小图标，它将一直滚动到页面上，而不是手动滚动。该按钮显示正常，但是当我单击它时，它并没有一直到顶部。

**html**

```
<a href="#" class="scrollup">Scroll</a> 
```

**脚本**

```
$(document).ready(function () {

        $('#main').scroll(function () {
            if ($(this).scrollTop() > 100) {
                $('.scrollup').fadeIn();
            } else {
                $('.scrollup').fadeOut();
            }
        });

        $('.scrollup').click(function () {
            $("html, body, main_container, main").animate({ scrollTop: 0 }, 600);
            return false;
        });

    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T18:39:49.487

问题出在选择器中，您缺少`#`id 选择器或`.`类选择器，对我来说似乎是 id：

改变这个：

```
$("html, body, main_container, main") 
```

对此，看看它是否有帮助：

```
$("html, body, #main_container, #main")
//-------------^----------------^--------these selector notations 
```

# c# - 如何使用 c# 从 Microsoft Access 表中删除一行

> ID：16111366
> 
> 赞同：2
> 
> 时间：2013-04-19T18:35:07.277
> 
> 标签：c#, visual-studio, ms-access, visual-studio-2012

我试过这段代码：

```
string sql = " DELETE FROM HotelCustomers WHERE [Room Number] =" +  textBox1.Text;
OleDbConnection My_Connection = new OleDbConnection("Provider=Microsoft.Jet.OLEDB.4.0;Data Source= c:\\Users\\Documents\\HotelCustomersOld.mdb");

My_Connection.Open();

OleDbCommand My_Command = new OleDbCommand(sql, My_Connection);
My_Command.ExecuteNonQuery(); 
```

> 错误：条件表达式中的数据类型不匹配，位于以下行：My_Command.ExecuteNonQuery();

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T18:38:38.680

使用参数化查询来避免各种错误

```
 string sql = " DELETE FROM HotelCustomers WHERE [Room Number] =?";
   using(OleDbConnection My_Connection = new OleDbConnection("Provider=Microsoft.Jet.OLEDB.4.0;Data Source= c:\\Users\\Documents\\HotelCustomersOld.mdb"))
   {
        My_Connection.Open();
        OleDbCommand My_Command = new OleDbCommand(sql, My_Connection);
        My_Command.Parameters.Add("@p1",  textBox1.Text);
        My_Command.ExecuteNonQuery();
   } 
```

在您的情况下，Room NUMber 字段是 Text 类型，因此您需要将值括在单引号中，但这确实是错误的。您将代码暴露给用户在文本框中编写的恶意文本。这里有一个非常简单[有趣的例子](https://stackoverflow.com/questions/332365/how-does-the-sql-injection-from-the-bobby-tables-xkcd-comic-work)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T18:40:06.533

您的 [房间号] 列是哪种类型？如果它是一个字符串，那么你必须用引号或引号写入值（我不确定在 Access 中使用了哪一个）。

```
string sql = " DELETE FROM HotelCustomers WHERE [Room Number] = '" +  textBox1.Text + "'"; 
```

为避免 SQL 注入，您应该使用参数而不是字符串操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-07T09:16:42.893

```
public static void DeleteLine(string kv)
{
    OleDbConnection myConnection = GetConnection();
    string myQuery = "DELETE FROM Cloth WHERE [ClothName] = '" + kv + "'";
    OleDbCommand myCommand = new OleDbCommand(myQuery, myConnection);

    try
    {
        myConnection.Open();
        myCommand.ExecuteNonQuery();
    }
    catch (Exception ex)
    {
        Console.WriteLine("Exception in DBHandler", ex);
    }
    finally
    {
        myConnection.Close();
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-02T11:35:05.747

尝试

```
 {
        OleDbConnection con = new OleDbConnection("provider = microsoft.ace.oledb.12.0;data source = E:\\Sohkidatabase\\Sohki.accdb");
        con.Open();
        str = "select * from compny_info where id=" + comboBox1.Text.Trim() + "";
        com = new OleDbCommand(str, con);
        OleDbDataReader reader = com.ExecuteReader();
            if (reader.Read())
            {
                textBox1.Text = reader["regis_no"].ToString();
                textBox2.Text = reader["comp_oner"].ToString();
                textBox3.Text = reader["comp_name"].ToString();
                textBox4.Text = reader["comp_add"].ToString();
                textBox5.Text = reader["tin_no"].ToString();
                textBox6.Text = reader["email"].ToString();
             }

            con.Close();
            reader.Close();
        }
        catch(Exception ex)
        {
            MessageBox.Show(ex.Message);
        } 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-04-07T09:20:30.170

```
 public static void DeleteLine(string kv) {
      OleDbConnection myConnection = GetConnection();
      string myQuery = "DELETE FROM Cloth WHERE [ClothName] = '" + kv + "'" ;
 } 
```

# python - 获取图网络中的前 n 条边

> ID：16111368
> 
> 赞同：2
> 
> 时间：2013-04-19T18:35:08.557
> 
> 标签：python, networkx

我有一个带权重的有向多重图。边缘添加看起来像

```
 g.add_edge(source_a,source_b, weight= some_Weight) 
```

构建图表时，我希望仅在基于权重的节点之间的顶部节点之间有边。所以如果我的图表是这样的

```
 1,2,0.5
 1,2,0.6
 1,2,0.4
 1,3,0.5
 ... 
```

我只想看到每个节点之间的前 2 条边。我所说的顶部是指权重最高的边缘。所以输出将类似于

```
1,2,0.6
1,2,0.5
1,3,0.5 
```

我正在删除其余的边缘。如何使用 python/networkx 执行此操作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T19:37:36.577

您可以简单地遍历具有特定属性的边缘：

```
import networkx as nx

G = nx.MultiGraph()
G.add_edge(1,2,weight=.5)
G.add_edge(1,2,weight=.6)
G.add_edge(1,2,weight=.4)
G.add_edge(1,3,weight=.5)

cutoff = .45

top = [edge for edge in G.edges_iter(data=True) 
       if edge[2]['weight'] > cutoff]

print top 
```

这给出了：

```
[(1, 2, {'weight': 0.5}), (1, 2, {'weight': 0.6}), (1, 3, {'weight': 0.5})] 
```

从这里可以很容易地创建一个只有这些边的新图。

```
G2 = nx.MultiGraph(top) 
```

# ios - 远程 IO AudioBufferList 崩溃

> ID：16111369
> 
> 赞同：0
> 
> 时间：2013-04-19T18:35:23.090
> 
> 标签：ios, pointers, crash, remoteio

为什么下面的粗体线会崩溃？？？有什么建议么？

```
static OSStatus AudioInputCallback(void *inRefCon,
                               AudioUnitRenderActionFlags *ioActionFlags,
                               const AudioTimeStamp *inTimeStamp,
                               UInt32 inBusNumber,
                               UInt32 inNumberFrames,
                               AudioBufferList *ioData) {

AudioUnitRender(audioUnitIn, ioActionFlags, inTimeStamp, 
inBusNumber, inNumberFrames, inputBufferList);

AudioSampleType is a signed short
**AudioSampleType (pointer)data = inputBufferList->mBuffers[0].mData;** 
```

# zend-framework - 理解 Zend_Controller_Request_Abstract 和其他核心 Zend 类

> ID：16111372
> 
> 赞同：0
> 
> 时间：2013-04-19T18:35:57.530
> 
> 标签：zend-framework, abstract-class, subclass, overriding

我正在深入研究 Zend 框架，此时我有点困惑。我特别检查了 Zend_Controller_Action (*_Action)、Zend_Controller_Request_HTTP(*_HTTP) 和 Zend_Controller_Request_Abstract (*_Abstract)。

顾名思义，*_Abstract 类是一个抽象类，因此无法实例化，并且主要提供方法存根以及一些最终实现。实际实现在 *_HTTP 和 *_Simple 类中，它们是 *_Abstract 的子类。很公平。

现在我正在查看 *_Action 类，就在这里：[http ://framework.zend.com/apidoc/1.0/Zend_Controller/Zend_Controller_Action.html](http://framework.zend.com/apidoc/1.0/Zend_Controller/Zend_Controller_Action.html)

查看 $_request 变量，它声明它是 *_Abstract 类型的实例。在这一点上，我很困惑，因为我不知道为什么它应该是 *_Abstract 而不是 *_Http 类型，因为从技术上讲，不能拥有抽象类的实例。

所以我的问题：

1.  为什么在这里声明一个抽象类的实例。

继续前进，我想覆盖 $_request 类的 getParams() 方法，因为这是我们的应用程序检索所有参数的方式，我想在这里对我们的所有输入应用一些常见的清理和黑名单规则。

不幸的是，当在我的 BaseController（由所有其他控制器子类化的主控制器）中时，我声明了以下内容：

```
$_request = new RequestClass(); //RequestClass subclasses Zend_Controller_Request_Http and overrides getParams() 
```

我的应用程序没有按应有的方式启动（我得到一个空白屏幕）。

对于那些更好奇的人， RequestClass() getParams() 没有什么花哨的，但是：

```
getParams()
{
  $params = parent::getParams();
  //sanitization rules over $params;
  return $params;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T19:42:12.253

有效的类型提示`Zend_Controller_Request_Abstract`意味着请求必须是扩展类的实例`Zend_Controller_Request_Abstract`。

除非您故意不使用 ZF 的路由，否则最好通过路由对参数进行清理。否则，如果您得到一个空白屏幕，则表示`display_errors`已关闭，而是记录了 PHP 错误或异常。检查您的 Web 服务器错误日志以了解实际问题是什么。

# c++ - 以 C++ 方式格式化文本

> ID：16111375
> 
> 赞同：1
> 
> 时间：2013-04-19T18:36:08.783
> 
> 标签：c++

我正在尝试制作一个可以像这样格式化我的文本输出的 c++ 函数：

#0 编号：80

#1 编号：80

#2 编号：80

#3 编号：80

ETC...

并在函数中有一个名为**max**的参数来限制输出量，例如：

如果 max 参数设置为 10，则最多只打印/输出 10 次：

#0 编号：80

#1 编号：80

#2 编号：80

#3 编号：80

#4 编号：80

#5 编号：80

#6 编号：80

#7 编号：80

#8 编号：80

#9 编号：80

#10 编号：80

我试图做的是下面的这段代码，但它没有按我的意愿工作：

```
void format_text(int max){

char Buffer[100];

static int amount;

for (int x = 0; x <= max; x++){

amount ++;

if (max > amount){

length += sprintf(Buffer+length,"#%d id: %d\n", amount, 80);

printf("%s", Buffer);

} 
```

请帮助我完成我为您描述的功能

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T18:52:27.020

也许您所追求的是`ostringstream`：

```
std::string Buffer;
std::ostringstream oss;

//...
    oss << "#" << amount << " id: " << 80 << "\n";
//...

Buffer = oss.str(); 
```

# android - ViewFlipper 内布局上的 setBackgroundColor 不会填满整个屏幕

> ID：16111381
> 
> 赞同：1
> 
> 时间：2013-04-19T18:36:35.737
> 
> 标签：android, android-layout, background-color

我正在尝试设置 ViewFlipper 内的绝对布局的背景。我得到的显示在这张图片上。蓝色部分没有填满整个屏幕，它在右侧和底部有一个白色部分。我把这个白色部分变成黄色，这样它更明显。

![在此处输入图像描述](https://i.stack.imgur.com/jEtue.png)

当我对不在 ViewFlipper 内的布局使用相同的代码时，它可以正常工作。

XML 代码：

```
<ViewFlipper xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/view_flipper_id"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:layout_margin="6dip" >

<AbsoluteLayout
    android:id="@+id/main_layout_id"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

</AbsoluteLayout>

<AbsoluteLayout
    android:id="@+id/secondary_layout_id"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >
</AbsoluteLayout>

</ViewFlipper> 
```

我在哪里更改背景颜色：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    ViewFlipper viewFlipper= (ViewFlipper)findViewById(R.id.view_flipper_id);
    AbsoluteLayout mainLayout=(AbsoluteLayout)viewFlipper.getChildAt(0);

     mainLayout.setBackgroundColor(Color.rgb(0, 0, 255));
} 
```

感谢您提前提供任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T18:50:48.920

您将边距设置为`ViewFlipper`6dp，这意味着内部布局将为父 View 留下 6 个像素。这意味着为内部布局设置背景不会影响这 6 个像素。

只需删除此行：

```
android:layout_margin="6dip" 
```

# java - 将字符串写入大文件

> ID：16111382
> 
> 赞同：0
> 
> 时间：2013-04-19T18:36:39.140
> 
> 标签：java, io

我知道关于这个问题有几个线程，但我认为我的问题由于大小而有点不同。

在我的示例中，我想将 170 万行写入文本文件。在最坏的情况下，可能会更多。这些行是为 sql loader 创建的，用于将快速数据加载到表中，因此文件可能非常大，因为 sql loader 可以处理它。

现在我想尽可能快地编写大文件。这是我的实际方法：

```
BufferedWriter bw = new BufferedWriter(new FileWriter("out.txt"),40000);
int u=profils.size()-1;
for(int z=0; z<u;z++){
  for(int b=0;b<z;b++){
    p = getValue();
    if(!Double.isNaN(p) & p > 0.55){
      bw.write(map.get(z) + ";" + map.get(b) + ";" + p + "\n");
    }
  }
}
bw.close(); 
```

对于我的 170 万行，我需要大约 20 分钟。我可以用我不知道的任何方法更快地处理它吗？

文件频道：

```
File out = new File("out.txt");
FileOutputStream fileOutputStream = new FileOutputStream(out, true);
FileChannel fileChannel = fileOutputStream.getChannel();
ByteBuffer byteBuffer = null;

int u=profils.size()-1;
for(int z=0; z<u;z++){
  for(int b=0;b<z;b++){
   p = getValue();
     if(!Double.isNaN(p) & p > 0.55){
        String str = indexToSubstID.get(z) + ";" + indexToSubstID.get(b) + ";" + p + "\n";
        byteBuffer = ByteBuffer.wrap(str.getBytes(Charset.forName("ISO-8859-1")));
        fileChannel.write(byteBuffer);
      }
   }
 }
fileOutputStream.close(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T18:41:11.623

FileChannel 是您的必经之路。它用于大量写入。[在此处](http://docs.oracle.com/javase/6/docs/api/java/nio/channels/FileChannel.html)阅读 api 文档

# python - 从类和实例调用方法

> ID：16111384
> 
> 赞同：0
> 
> 时间：2013-04-19T18:36:44.770
> 
> 标签：python, class, instantiation

我不明白为什么这些脚本的行为不同：

```
class A:
  x=3
  y=5
  __z=8
  def __init__(self):
    print "Hi, I am an instance object of A class!"
    print "I have two components: x i y"
    print "Component x =", self.x
    print "Component y =", self.y
    print 'Component z=', self.__z, 'but z is private'
  def fun1(self):
    return self.x+self.y
class B(A):
  pass 
i=B()
print i.x, i.y, i.fun1() 
```

如果我删除`i=B()`line 并将最后一行更改为`print B().x, B().y, B().fun1()`，`__init__`则打印字符串 3 次，因为每次调用其方法时都会创建类 A。为什么当我创建“i”实例时不会发生同样的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T18:41:51.537

您只创建了一个实例`B`：

```
i=B() 
```

所以`__init__`只调用一次。在您的另一个示例中，您创建了`B`3 次的新实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T18:41:37.307

因为`__init__`每个创建的实例只运行一次（在这种情况之外，这种情况非常罕见，以至于被认为是“从不”，它被显式调用）。创建 1 个实例，运行`__init__`一次，创建 3 个实例，运行`__init__`3 次。每次调用时`B()`，都会创建一个新实例。

另外，请注意您的类属性`x`,`y`和`__z`, 属于类本身，而不是它的实例；在你做的时候引用它们`self`是另一个问题，这是由于你对类和实例之间的区别的明显误解而引起的，这会导致你出现问题。

一个类可以被认为是一个对象的定义。当你调用一个类 ( `B()`) 时，你创建了它的一个实例。类属性属于定义本身，而实例属性属于对象。

把一个类想象成冲压机的模具。想象一下，你有一个制造汽车挡泥板的模具。每个挡泥板都是一个对象实例。每个挡泥板都有一个颜色，这是一个实例属性。但是，骰子本身也可以有颜色，这将是一个类属性。每个保险杠可以有不同的颜色，您可以更改任何挡泥板的颜色，而无需更改任何其他挡泥板或模具的颜色，但是无论创建多少挡泥板，都只有一个模具，并且只能有一个颜色。

```
>>> class Fender(object):
...     color = 'red'
...     def __init__(self):
...         self.color = None
...
>>> fenders = [Fender(), Fender()]
>>> Fender.color
'red'
>>> fenders[0].color = 'blue'
>>> fenders[1].color = 'grey'
>>> fenders[0].color
'blue'
>>> fenders[1].color
'grey'
>>> Fender.color
'red'
>>> fenders[0].__class__.color
'red'
>>> Fender.color = 'black'
>>> fenders[0].color
'blue'
>>> fenders[1].color
'grey'
>>> Fender.color
'black'
>>> fenders[0].__class__.color
'black' 
```

# java - 二叉搜索树节点删除的问题

> ID：16111385
> 
> 赞同：0
> 
> 时间：2013-04-19T18:36:47.820
> 
> 标签：java, binary-search-tree, circular-reference

我正在编写一个二叉搜索树，并且快完成了。我在删除节点时遇到问题。

每个节点都有一个对其左、右和父节点的引用（给根节点一个虚拟父节点）、一个数据元素和一个整数计数（称为副本）。当一个人输入一个已经存在的元素时，节点只会增加它的副本，当他们调用 decrementCopies() 时，该方法会减少副本数，如果副本数低于 1，则返回 false。 setLeft() 和 setRight () 方法将给定节点的父节点设置为被调用节点（即，node1.setLeft(node2) 将节点2 的父节点设置为节点1）。

下面是删除方法：

```
public void remove(T target) {
    if (target == null)
        throw new IllegalArgumentException();

    // cont is container, the node containing the
    // desired element.
    boolean rootRemoval;
    boolean contIsLeft;
    CountingNode<T> cont;
    CountingNode<T> parent;
    CountingNode<T> left;
    CountingNode<T> right;
    CountingNode<T> grad;

            assert root != null;
    if (root == null) {
        return;
    }
    else {
        cont = root.getNodeFor(target);
    }

    assert cont != null;
    if (cont == null) {
        return;
    }
    else if (cont.decrementCopies()) {
        words -= 1;
        return;
    }

    words -= 1;
    nodes -= 1;

    parent = cont.getParent();
    left = cont.getLeft();
    contIsLeft = parent.getLeft() == cont;
    rootRemoval = cont == root;

    if (cont.getNumChildren() < 2) {
        parent.setChild(cont.getOnlyChild(), contIsLeft);

        if (rootRemoval) {
            root = dummyParent.getOnlyChild();
        }

        return;
    }

    right = cont.getRight();
    grad = left.getRightMostNode();

    grad.getParent().setRight(grad.getLeft());

    if (grad != left) 
        grad.setLeft(left);
    else 
        grad.setLeft(null);

    grad.setRight(right);
    parent.setChild(grad, contIsLeft);

    if (rootRemoval) {
        root = dummyParent.getOnlyChild();
    }

    return;

} 
```

它适用于大多数输入，但偶尔当我转储大量单词然后按顺序删除相同的单词时，我会遇到循环引用和丢失节点的问题。我一直在试图找出问题出在哪里，但我似乎无法在较小的范围内复制错误条件（我必须转储相当大的文件以使其发生以进行调试），我也看不到任何东西显然错了。

希望有人可以帮助我阐明一些观点。谢谢

# javascript - 错误：找不到模块 html

> ID：16111386
> 
> 赞同：44
> 
> 时间：2013-04-19T18:36:48.437
> 
> 标签：javascript, node.js, express

很久没用过Node.js，也没用过express。当我开始我的应用程序时，它刚刚返回：

```
Error: Cannot find module 'html'
  at Function.Module._resolveFilename (module.js:338:15)
  at Function.Module._load (module.js:280:25)
  at Module.require (module.js:364:17)
  at require (module.js:380:17)
  at new View (C:\Users\fr\node_modules\express\lib\view.js:42:49)
  at Function.app.render (C:\Users\fr\node_modules\express\lib\application.js:483:12)
  at ServerResponse.res.render (C:\Users\fr\node_modules\express\lib\response.js:755:7)
  at allClients (C:\Users\fr\node_modules\apps\chat.js:13:7)
  at callbacks (C:\Users\fr\node_modules\express\lib\router\index.js:161:37)
  at param (C:\Users\fr\node_modules\express\lib\router\index.js:135:11) 
```

我启动 test.html 时发生错误。这是代码：

```
var io = require('socket.io');
var express = require('express');

var app = express(),
http = require('http'),
server = http.createServer(app),
socket = require('socket.io').listen(server);

app.configure(function(){
    app.use(express.static(__dirname));
});
app.get('/', function(req, res, next){
    res.render('./test.html');
});

server.listen(8333); 
```

我自己的路 ：

```
node_modules/
    express/
    socket.io/
    apps/
        chat.js
        test.html 
```

为什么 ？

**编辑 ：**

**这是我的新 app.configure ：**

```
app.configure(function(){
    app.use(express.static(path.join(__dirname, 'public')));
}); 
```

**但它返回：**

```
 path is not defined 
```

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2013-04-19T18:42:53.263

我假设 test.html 是一个静态文件。要呈现静态文件，请像这样[使用](http://expressjs.com/api.html)静态中间件。

```
app.use(express.static(path.join(__dirname, 'public'))); 
```

这告诉 express 在应用程序的公共目录中查找静态文件。

一旦你指定了这个，只需将你的浏览器指向文件的位置，它就会显示出来。

但是，如果您想渲染视图，那么您必须使用适当的渲染器。渲染列表在[consolidate](https://github.com/tj/consolidate.js)中定义。一旦您决定使用哪个库，只需安装它。我使用 mustache，所以这是我的片段配置文件

```
var engines = require('consolidate');

app.set('views', __dirname + '/views');
app.engine('html', engines.mustache);
app.set('view engine', 'html'); 
```

这是告诉快递

*   在视图目录中查找要渲染的文件

*   使用 mustache 渲染文件

*   文件的扩展名为 .html（你也可以使用 .mustache）

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2014-06-10T12:26:13.010

简单的方法是使用 EJS 模板引擎来提供 .html 文件。将此行放在您的视图引擎设置旁边：

```
app.engine('html', require('ejs').renderFile); 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2020-06-27T14:42:39.813

如果不是，请安装 ejs。

```
npm install ejs 
```

然后在您的主文件中粘贴以下两行之后。**（如 app.js、main.js）**

```
app.set('view engine', 'html');

app.engine('html', require('ejs').renderFile); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-06-13T05:39:15.587

这就是我为渲染 html 文件所做的。它解决了错误。通过在项目文件夹中执行以下命令来安装**consolidate**和**mustache 。**

```
$ sudo npm install consolidate mustache --save 
```

**并对您的app.js**文件进行以下更改

```
var engine = require('consolidate');

app.set('views', __dirname + '/views');
app.engine('html', engine.mustache);
app.set('view engine', 'html'); 
```

现在 html 页面将正确呈现。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-19T18:43:38.810

我认为您可能需要声明一个视图引擎。

如果您想使用视图/模板引擎：

`app.set('view engine', 'ejs');`

或者

`app.set('view engine', 'jade');`

但是要渲染纯 HTML，请参阅这篇文章：[渲染基本 HTML 视图？](https://stackoverflow.com/questions/4529586/render-basic-html-view-in-node-js-express).

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-12-30T02:41:50.233

Use

`res.sendFile()`

instead of

`res.render()`.

What your trying to do is send a whole file.

This worked for me.

# javascript - print() 基于其 id 的元素

> ID：16111392
> 
> 赞同：0
> 
> 时间：2013-04-19T18:37:21.367
> 
> 标签：javascript, jquery

我只想从 id 为的网页打印一张表格`"test1"`

```
function printPage() { 
  $var = document.getElementById('test1');
  print($var); 
} 
```

在打印预览中，显示的是整个文档而不是表格。很可能会打印整个页面，而我只想打印我的表格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T18:41:24.287

那是行不通的。您需要定义一个`@media=print`样式表，该样式表隐藏除您要打印的内容之外的所有内容。或将该节点克隆到一个中`<iframe>`，然后调用该 iframe 的`print()`.

# haskell - 是否可以让用户在haskell中定义矩阵的字段？

> ID：16111396
> 
> 赞同：0
> 
> 时间：2013-04-19T18:37:44.137
> 
> 标签：haskell, matrix, field

大家好，我一直想知道如何让用户在haskell中定义矩阵的字段（行，列）。

例如，用户应该为该字段输入一个值，然后用户应该输入一个矩阵。如果用户输入更多的值，那么他在字段中定义的值比程序应该显示异常。

（例如`maxIndex=3 matrix [[1,2,3],[4,3,5],[3,7,8],[5,6,8]] -> Exception:Out of range`）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T19:28:13.023

定义一个自己的行为方式？

```
data Matrix = Matrix [[Int]] Int {-rows-} Int {-columns-}

-- constructor / accessor functions that do bounds checking 
```

顺便说一句，链表对于表示矩阵非常糟糕。如果你真的需要这样的东西，你应该看看现有的包，比如[hmatrix](http://hackage.haskell.org/package/hmatrix)。

# c++ - 使用递归解决 C++ 中的迷宫？

> ID：16111398
> 
> 赞同：3
> 
> 时间：2013-04-19T18:37:44.663
> 
> 标签：c++, recursion, maze

我正在尝试创建一个可以通过递归解决迷宫的程序。我的代码基于可以在网上找到的几个步骤，特别是：

1.  如果 (x,y 在迷宫外) 返回 false
2.  如果 (x,y 是目标) 返回 true
3.  如果 (x,y 未打开) 返回 false
4.  将 x,y 标记为解决方案路径的一部分
5.  if (FIND-PATH(x,y 以北) == true) 返回 true
6.  if (FIND-PATH(x,y 以东) == true) 返回 true
7.  if (FIND-PATH(x,y 以南) == true) 返回 true
8.  if (FIND-PATH(West of x,y) == true) 返回 true
9.  取消将 x,y 标记为解决方案路径的一部分
10.  返回假

我已经看到至少有两个关于这个算法的其他问题，但我很确定这些问题并不完全相同。

```
bool path (string maze[], int x, int y){
    values val;
    bool check;
    //for (int k=0; k<val.xDim; k++) cout<<maze[k]<<endl;
    cout<<x<<":"<<y<<endl;
    if (x>val.xDim || y>val.yDim || x<0 || y<0) {cout<<"end\n"; return false;  }
    if (maze[x][y]=='x') return true;                           //If exit is reached
    if (maze[x][y]=='%' || maze[x][y]=='+') return false;       //If space is filled
    maze[x][y]='+';
    if (path(maze, x-1, y)==true) return true;
    cout<<"endtwo\n";
    if (check=path(maze, x, y+1)==true) return true;
    if (path(maze, x+1, y)==true) return true;
    if (path(maze, x, y-1)==true) return true;
    maze[x][y]='.';
    return false;
}

int main(){
    if (path(maze, val.startX-1, val.startY)==true) {
        for (int k=0; k<val.xDim; k++) cout<<maze[k]<<endl;
    } else cout<<"No solution found.\n";
} 
```

示例迷宫是（其中 e 是入口，x 是出口）：

```
%e%%%%%%%%%
%...%.%...%
%.%.%.%.%%%
%.%.......%
%.%%%%.%%.%
%.%.....%.%
%%%%%%%%%x% 
```

输出：

```
-1:1
end
No solution found. 
```

据我所知，路径方法应该从检查入口正上方的空间开始，该空间位于迷宫外（返回 false）。在此之后，它应该检查东（等等）。但是，当我运行它时，该函数返回 false 并且无法继续执行以下 if 语句。这可以通过打印“end”而没有打印“endtwo”（在北检查后找到）这一事实来证明。我不确定我的递归逻辑或递归实现是否存在某种形式的问题，所以我希望对此有所澄清。

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T18:52:41.267

您的第一次签入`bool path(...)`发现 x<0，因为 x==-1，因此函数返回`false`并退出，主程序`false`从调用中获取结果`path`，打印他必须执行的内容并退出。

你应该从一个有效的位置开始你的检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T19:11:02.690

你是从一个无效的位置开始的，所以不要这样`if (path(maze, val.startX-1, val.startY)==true) {`，试试这个`if (path(maze, val.startX, val.startY)==true) {`。实际的递归部分对我来说似乎没问题，前提是您不介意`'e'`用`'.'`.

# windows-phone-7 - 如何禁用 Windows Phone 8 键盘按钮？

> ID：16111405
> 
> 赞同：2
> 
> 时间：2013-04-19T18:38:13.757
> 
> 标签：windows-phone-7, windows-phone-8

我正在使用 windows phone 8 文本框，我只是将文本框的输入范围更改为数字/数字。问题是文本框中没有使用点（小数点）按钮，所以我想禁用点按钮，或者当用户单击该按钮时，它不会反映在文本框中，我只需要输入数字。所以请帮我解决这个问题，因为我是初学者。非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T20:25:49.163

You can just attach to the `TextBox.KeyDown` event and set it to `Handled = true` when a `.` is inputed, like this:

```
private void MyTextBox_OnKeyDown(object sender, KeyEventArgs e)
{
    if (e.PlatformKeyCode == 190)
    {
        e.Handled = true;
    }
} 
```

The code for `.` is 190

# symfony - FOSUserBundle：覆盖 Twig 模板：添加 HTML 元素

> ID：16111411
> 
> 赞同：1
> 
> 时间：2013-04-19T18:38:45.663
> 
> 标签：symfony, twig, fosuserbundle

我正在使用**FOSUserBundle**，我想在注册表单中添加一些 HTML 元素。实际上，我做到了，我可以在我的表单中看到添加到 User 类的属性。问题是我希望这些字段（名字、姓氏、出生日期等）能够获得我的 CSS 模板（引导程序）的**外观**。我通过覆盖登录页面成功地做到了这一点，因为 HTML 是显式声明的。我想对注册页面做同样的事情，但是我觉得很困惑，因为这里的内容是：

*   **register.html.twig**

    {% 扩展“FOSUserBundle::layout.html.twig”%}

    {% block fos_user_content %} {% include "FOSUserBundle:Registration:register_content.html.twig" %} {% endblock fos_user_content %}

*   **register_content.html.twig**

    {% trans_default_domain 'FOSUserBundle' %}

    {{ form_widget(form) }}

如何通过此代码访问我在页面中看到的元素？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-09-03T13:58:12.567

尝试这个

```
<div class="form-group {% if form.plainPassword.first.vars.errors %}has-error{% endif %}">
  <label class="col-lg-2 control-label">Password:</label>
  <div class="col-lg-5">
    {{ form_widget(form.plainPassword.first, {'attr': {'class': 'form-control input-lg', 'placeholder': 'Enter password', 'required': 'required'}}) }}
    {% for errorItem in form.plainPassword.first.vars.errors %}
      <label class="control-label has-error" for="{{ form.plainPassword.vars.id }}">{{ errorItem.message }}</label>
    {% endfor %}
  </div>
  <div class="col-lg-5">
    {{ form_widget(form.plainPassword.second, {'attr': {'class': 'form-control input-lg', 'placeholder': 'Enter password again', 'required': 'required'}}) }}
  </div>
</div> 
```

这个对我有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T01:17:39.560

replace `form_widget(form)` with something like:

```
form_widget(form.username)
form_widget(form.email)
form_widget(form.plainPassword)
form_widget(form.myField)
form_rest(form) 
```

in your custom `RegistrationFormType` class, you could add a class to the username field with:

```
 $builder
        ->add('username', null, array('label' => 'form.username', 'translation_domain' => 'FOSUserBundle', 'attr' => array('class'=>'myClass'))) 
```

also see form docs on rendering fields by hand: [http://symfony.com/doc/current/book/forms.html#rendering-a-form-in-a-template](http://symfony.com/doc/current/book/forms.html#rendering-a-form-in-a-template)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-19T18:52:49.630

请在此处查看官方文档：“[覆盖表单](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Resources/doc/overriding_forms.md "覆盖表单")”。您将需要创建一个自定义注册表单类型类，将其声明为服务，并告诉 FOSUserBundle 使用它。

要自定义模板，请参阅“[覆盖模板](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Resources/doc/overriding_templates.md "覆盖模板")”。在您的情况下，您可以创建`app/Resources/FOSUserBundle/views/Registration/register.html.twig`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-07-26T13:09:50.507

以下是我使用 FOSUserBundle、PUGXMultiUserBundle 和 BraincraftedBoostrapBundle 解决此问题的方法：

根据 FOSUserBundle 文档，将 UserBundle 添加为 FOSUser 的子项。创建一个`RegistrationFormType`包含以下内容的自定义，其中仅添加`attr`和`label_attr`数组：

```
$builder
        ->add('email', 'email', array(
            'label' => 'form.email',
            'translation_domain' => 'FOSUserBundle',
            'attr' => array(
                'placeholder' => 'E-mail',
            ),
            'label_attr' => array(
                'class' => 'sr-only',
    )))
        ->add('username', null, array(
            'label' => 'form.username',
            'translation_domain' => 'FOSUserBundle',
            'attr' => array(
                'placeholder' => 'Username',
            ),
            'label_attr' => array(
                'class' => 'sr-only',
    )))
        ->add('plainPassword', 'repeated', array(
            'type' => 'password',
            'options' => array('translation_domain' => 'FOSUserBundle'),
            'first_options' => array('label' => 'form.password',
                'attr' => array(
                    'placeholder' => 'Password',
                ),
                'label_attr' => array(
                    'class' => 'sr-only',
                )),
            'second_options' => array('label' => 'form.password_confirmation',
                'attr' => array(
                    'placeholder' => 'Confirm password',
                ),
                'label_attr' => array(
                    'class' => 'sr-only',
                )),
            'invalid_message' => 'fos_user.password.mismatch',
        ))
; 
```

注册表单模板如下所示：

```
<form action="{{ path('volunteer_registration') }}" method="POST" class="form-inline">
    {{ bootstrap_set_style('form-inline') }}
    {{ form_row(form.firstName) }}
    {{ form_row(form.lastName) }}
    {{ form_row(form.username) }}
    {{ form_row(form.email) }}
    <br/>
    {{ form_row(form.plainPassword) }}
    {{ form_row(form.plainPassword.second) }}
    {{ bootstrap_set_style('') }} 
```

# ruby-on-rails - Rails Rolify 如何测试多个角色

> ID：16111415
> 
> 赞同：3
> 
> 时间：2013-04-19T18:38:57.937
> 
> 标签：ruby-on-rails, rolify

我想使用 rolify 测试多个角色。

我试过这个，但没有奏效：

```
<% if current_user.has_role? [:technician, :admin] %> 
```

谢谢您的帮助！

更新1

我正在尝试测试 :technician 或 :admin - 这可行，但似乎应该有更短的方法：

```
if current_user.has_role? :technician or current_user.has_role? :admin 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-05-07T18:24:38.160

我建议您测试类似的东西`current_user.has_any_role? :technician, :admin`，它应该返回您期望的布尔值:)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-19T18:47:04.063

查看[Rolify 文档](https://github.com/EppO/rolify/wiki/Usage#multiple-role-checking)：

多角色检查 检查用户是否具有所有指定的角色

```
 user = User.find(1)
  user.add_role :admin # sets a global role
  user.add_role :moderator, Forum.first # sets a role scoped to a resource instance
  user.add_role :visitor, Forum # sets a role scoped to a resource class
  user.has_all_roles? :admin, { :name => :moderator, :resource => Forum.first }, { :name => :visitor, :resource => Forum }
  => true
  user.has_all_roles? :admin, { :name => :moderator, :resource => Forum.last }
  => false
  user.has_all_roles? :god, { :name => :visitor, :resource => Forum }
  => false 
```

检查用户是否具有任何指定的角色

```
 user = User.find(1)
  user.add_role :admin # sets a global role
  user.add_role :moderator, Forum.first # sets a role scoped to a resource
  user.add_role :visitor, Forum # set a role scoped to a resource class
  user.has_any_role? :admin, { :name => :moderator, :resource => Forum.first }, { :name => :visitor, :resource => Forum }
  => true
  user.has_any_role? :admin, { :name => :moderator, :resource => Forum.last }
  => true
  user.has_any_role? :god, { :name => :visitor, :resource => Forum }
  => true 
```

所以它看起来像你想使用的情况：

```
user.has_all_roles? :technician, {:name => :admin} 
```

# java - 读取文本文件并将每个换行符拆分为字符串数组

> ID：16111417
> 
> 赞同：1
> 
> 时间：2013-04-19T18:39:01.087
> 
> 标签：java, arrays, string, readline

所以基本上我正在阅读一个包含一堆行的文本文件。我需要从文本文件中提取某些行并将这些特定行添加到字符串数组中。我一直在尝试将每个新行拆分为：“\n”、“\r”。这没有用。我也不断收到此错误：

线程“main”中的异常 java.lang.ArrayIndexOutOfBoundsException: 1 at A19010.main(A19010.java:47)

这是代码：

```
Path objPath = Paths.get("dirsize.txt");
    if (Files.exists(objPath)){

     File objFile = objPath.toFile();
     try(BufferedReader in = new BufferedReader(
                             new FileReader(objFile))){
          String line = in.readLine();

           while(line != null){

            String[] linesFile = line.split("\n");
            String line0 = linesFile[0];
            String line1 = linesFile[1];
            String line2 = linesFile[2];

            System.out.println(line0 + "" + line1);
            line = in.readLine();
           }

        }
         catch(IOException e){

             System.out.println(e);
         }

    }
    else
    {
      System.out.println(
              objPath.toAbsolutePath() + " doesn't exist");
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T18:44:25.897

```
String[] linesFile = new String[] {line}; // this array is initialized with a single element
String line0 = linesFile[0]; // fine
String line1 = linesFile[1]; // not fine, the array has size 1, so no element at second index
String line2 = linesFile[2]; 
```

You're creating a `String[] linesFile` with one element, `line`, but then trying to access elements at index 1 and 2\. This will give you an `ArrayIndexOutOfBoundsException`

You're not actually splitting anything here. `in.readLine();`, as the method says, reads a full line from the file.

**Edit:** You can add lines (Strings) dynamically to a list instead of an array, since you don't know the size.

```
List<String> lines = new LinkedList<String>(); // create a new list
String line = in.readLine(); // read a line at a time
while(line != null){ // loop till you have no more lines
    lines.add(line) // add the line to your list
    line = in.readLine(); // try to read another line
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T18:46:10.953

`readLine()` method reads a entire line from the input but **removes the newLine characters** from it. When you split the line on `\n` character, you will not find one in the String. Hence, you get the exception.

Please, refer the answer in this [link for more clarity.](https://stackoverflow.com/questions/4758525/carriage-return-and-new-line-with-java-and-readline)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T18:44:35.143

You are initializing your String array with 1 element, namely line. linesFile[0] is therefore line and the rest of your array is out of bounds.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T18:46:52.557

尝试这个：

```
String[] linesFile = line.split("SPLIT-CHAR-HERE");
if(linesFile.length >= 3)
{
            String line0 = linesFile[0];
            String line1 = linesFile[1];
            String line2 = linesFile[2];
// further logic here
}else
{
//handle invalid lines here
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-19T18:50:27.277

您正在使用数组来存储字符串。而是`ArrayList`从 Java 中使用，因为 ArrayList 是动态增长的。在您的阅读操作完成后将其转换为数组。

```
 String line = in.readLine();
      ArrayList<String> str_list = new ArrayList<String>();
      String[] strArr = new String[str_list.size()];

           while(line != null){
             str_list.add(line);  
             line = in.readLine();
           }
    // at the end of the operation convert Arraylist to array
return   str_list.toArray(strArr); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-19T18:54:20.450

`String`这里的问题是，每次解析器读取新行时，您都在创建一个新数组。然后，您只使用正在读入的元素填充该`String`数组中的第一个元素：`line`

```
String[] linesFile = new String[] {line}; 
```

`String[]`由于每次`while`循环从顶部运行时都会使用一个元素创建一个新元素，因此您会丢失它从上一次迭代中存储的值。

解决方案是`new String[];`在进入 while 循环之前使用。如果您不知道如何使用`ArrayList`，那么我建议您使用这样的 while 循环：

```
int numberOfLine = 0;
while (in.readLine() != null)
{
    numberOfLine++;
}
String linesFile = new String[numberOfLine]; 
```

这将让您避免使用动态调整大小`ArrayList`，因为您从上面的 while 循环中知道文件包含多少行。然后，您将保留一个额外的计数器（或重新`numberOfLine`使用，因为我们不再使用它），以便您可以填充此数组：

```
numberOfLine = 0;
in = new BufferedReader(new FileReader(objFile)); // reset the buffer
while ((String line = in.readLine()) != null)
{
    linesFile[numberOfLine] = line;
    numberOfLine++;
} 
```

此时`linesFile`应该使用文件中的行正确填充，以便`linesFile[i]`可用于访问文件中的第 i 行。

# mongodb - Mongo 数据库非常慢，直到我重新启动

> ID：16111418
> 
> 赞同：0
> 
> 时间：2013-04-19T18:39:04.687
> 
> 标签：mongodb

我刚刚从另一个开发人员那里继承了一个应用程序，我被要求修复一些用户遇到的延迟问题。问题是任何对 mongo 进行 db 调用的页面都需要几分钟才能在浏览器中加载。

但是，当我重新启动 mongo 时，一切都会再次加速，并且应用程序运行正常。我看到一整天都在运行几个 cron 作业，我相信其中之一可能会导致 mongo 变慢。

不幸的是，我没有使用 mongo 的经验（只有 mysql），而且我真的不知道我在寻找什么可能使 mongo 运行如此缓慢的东西。

无论如何，我希望有人可以提出一些可能导致延迟的潜在问题，以便我可以更好地解决这个问题。我查看了 mongo 日志，我看到的唯一可能值得关注的是一条消息：

```
warning: can't find plugin [asc] 
```

我知道这可能指向索引问题，但是我应该调查其他明显的事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T21:08:26.690

根据我在[https://groups.google.com/forum/?fromgroups=#!topic/mongodb-user/pqPvMq7cSBw](https://groups.google.com/forum/?fromgroups=#!topic/mongodb-user/pqPvMq7cSBw)上阅读的内容，您的查询之一似乎已声明

```
db.a2.find().sort({a:"asc"}) 
```

而不是

```
db.a2.find().sort({a:1}) 
```

在 MongoDB 中，您需要使用**1 或 -1**声明排序，排序没有**asc 或 desc**常量。因此，我建议您检查是否有任何查询运行不正确。您可以通过日志文件检查正在运行的查询（使用正确的分析设置）[http://docs.mongodb.org/manual/tutorial/manage-the-database-profiler/](http://docs.mongodb.org/manual/tutorial/manage-the-database-profiler/)。您也可以使用 mongotop ( [http://docs.mongodb.org/manual/reference/mongotop/](http://docs.mongodb.org/manual/reference/mongotop/) ) 来查看您的集合中读取/写入数据的时间最多的地方。

# regex - htaccess 正则表达式匹配路径，其中包含没有 'bar' 的 'foo'

> ID：16111419
> 
> 赞同：0
> 
> 时间：2013-04-19T18:39:08.677
> 
> 标签：regex, .htaccess, redirect

我正在尝试通过`.htaccess`带有`RedirectMatch 403`.

仅当不在 URL 中时，`YES`才应匹配包含的任何内容。`NO`是否匹配 URL 的一些示例：

*   /dir/ `YES`/ -> 是的
*   //file.ext `YES`-> 是
*   /dir/ `NO`/dir/ `YES`/file.ext -> 否
*   / `NO`/目录/目录/`YES` /file.ext -> 没有

还有一个未知数量的`dir`介于`/YES`和之间`/NO`。

我尝试了各种*后视*和模式，例如：

*   `(?<!themes/)(vendor)`
*   `(?<=[^themes])(/vendor)`
*   `(?<![themes/])(/|/[^themes]+/)vendor(/|$)`

但是我正在努力让任何工作正常进行，并想知道这是否真的是一个好主意。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T18:50:41.153

将它与特定的 RewriteCond 一起使用，如下所示：

```
RewriteCond %{REQUEST_URI} !/NO/ [NC]
RewriteRule (^|/)YES(/.*|)$ - [F,L,NC] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T18:52:45.167

为什么你的模式不起作用：

```
(?<!themes/)(vendor) 
```

`themes/`仅当紧靠 左侧时才会丢弃匹配项`vendor`。Lookbehinds 不会自动遍历整个字符串。

```
(?<=[^themes])(/vendor) 
```

字符类不是这样工作的。匹配不属于、、或的`[^themes]`单个字符。`e``h``m``s``t`

您想要的是`(?<!themes.*/)(vendor)`，但只有 .NET 允许任意长度的lookbehinds。

诀窍是从头开始，并确保没有使用前瞻`NO`的方式：`YES`

```
^(?!.*NO).*(YES) 
```

或者

```
^(?!.*themes).*(vendor) 
```

因为前瞻可以是可变长度。如果`NO`允许出现**在 之后** `YES`，您必须在前往的途中检查每个字符`YES`：

```
^((?!NO).)*(YES)
^((?!themes).)*(vendor) 
```

**编辑：** anubhava 的解决方案实际上要整洁得多。如果您需要一个单一的正则表达式解决方案，您可以使用我的作为参考。

# python - 获取变量问题

> ID：16111420
> 
> 赞同：0
> 
> 时间：2013-04-19T18:39:26.837
> 
> 标签：python, python-3.x, pygame

代码：

```
import pygame, sys

x = 640
y = 480
screen = pygame.display.set_mode([x,y], pygame.RESIZABLE | pygame.OPENGL)

while True:
    x, y = pygame.Surface.get_size()
    for event in pygame.event.get():
        if event.type == pygame.QUIT or event.type == pygame.K_ESCAPE:
            pygame.quit()
            sys.exit() 
```

错误

```
Traceback (most recent call last):
  File "C:/Users/Mendel/My programs/game Project/test.py", line 8, in <module>
    x, y = pygame.Surface.get_size()
TypeError: descriptor 'get_size' of 'pygame.Surface' object needs an argument 
```

当我查找文档时，它说我应该没有错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T18:47:51.053

您需要改用`screen`对象：

```
x, y = screen.get_size() 
```

根据文档，它返回一个 Surface 对象

```
pygame.display.set_mode()
Initialize a window or screen for display
set_mode(resolution=(0,0), flags=0, depth=0) -> Surface 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T18:55:35.960

您不能在类上调用常规实例方法，而必须在该类的*实例*上调用它。*

那么，如何获得一个类的实例呢？好吧，一般来说，你要么通过做类似的事情来构造一个实例`my_instance = MyClass(my_params)`，要么你调用一些帮助函数来为你做这件事。

对于与`pygame`……相关的细节，您确实需要完成`pygame`教程。表面可以是任何东西，从屏幕或窗口的主“绘图画布”到加载的图像。目前尚不清楚您要在这里使用什么表面，所以我无法告诉您如何获得。

您可能想从[pygame 新手指南](http://pygame.org/docs/tut/newbieguide.html)开始，然后继续[阅读官方教程](http://pygame.org/docs/)。

* * *

* 这并不完全正确。您*可以*在类而不是实例上调用方法，但是您必须将实例作为第一个 ( `self`) 参数显式传递，而且您很少想要这样做。无论如何，这就是为什么你会收到一条有点误导性的错误消息，说它“需要一个参数”。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-19T18:53:52.780

您的语法错误；您在 Surface 上调用 get_size，而不是变量。您的代码应如下所示：

```
variable = pygame.Surface(variable.get_size()) 
```

所以你会在你的屏幕变量上调用它。我格式化这个的方式是如果你的变量是一个 pygame 变量而不是 Surface（就像你的屏幕变量）。要查看根据变量的不同格式化代码的方式，请查看[pygame 的示例](http://nullege.com/codes/search?cq=pygame.Surface.get_size)

# javascript - 纯 Javascript 数组，使用几个显示数组的 html 按钮获取值

> ID：16111421
> 
> 赞同：1
> 
> 时间：2013-04-19T18:39:31.673
> 
> 标签：javascript, html

我是 JavaScript 新手，我正在尝试使用纯 JavaScript 和 HTML 创建一组硬编码专辑，每个专辑都有一个`title`, `category`, `artist`, `tracks[]`. 现在我被卡住的地方是试图显示我的按钮数组`onclick`，并根据按下的按钮以不同的方式显示。我有三个按钮：

1.  获取所有专辑
2.  按艺术家获取所有专辑
3.  按类别获取所有。

当我单击全部时，我会在项目符号列表中按名称获取所有专辑。按艺术家我只能按艺术家获得所有专辑。这是我的代码。我正在使用外部 JavaScript 文件。非常感谢任何帮助，但请不要使用 JQuery 我想在纯 JavaScript 中执行此操作。

[这是我到目前为止所拥有的 jsbin](http://jsbin.com/ufanep/121/edit)

[这里](http://jsbin.com/ufanep/121/edit)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T19:38:13.427

这有帮助吗

```
<button id="b1" type="button">Get All Albums</button>
<button id="b2" type="button">Get All Albums By Artist</button>
<button id="b3" type="button">Get All By Category</button>
<table border="1">
    <thead>
        <tr>
            <th>Title</th>
            <th>Category</th>
            <th>Artist</th>
            <th>Tracks</th>
        </tr>
    </thead>
    <tbody id="albums"></tbody>
</table>

var b1 = document.getElementById("b1"),
    b2 = document.getElementById("b2"),
    b3 = document.getElementById("b3"),
    results = document.getElementById("albums"),
    albums = [];

function compareTitle(a, b) {
    if (a.title < b.title) {
        return -1;
    }

    if (a.title > b.title) {
        return 1;
    }

    return 0;
}

function compareArtist(a, b) {
    if (a.artist < b.artist) {
        return -1;
    }

    if (a.artist > b.artist) {
        return 1;
    }

    return 0;
}

function compareCategory(a, b) {
    if (a.category < b.category) {
        return -1;
    }

    if (a.category > b.category) {
        return 1;
    }

    return 0;
}

function addAlbum(title, category, artist, tracks) {
    var album = {
        "title": title,
            "category": category,
            "artist": artist,
            "tracks": tracks
    };

    albums.push(album);
}

addAlbum("d", "z", "s", [1, 2, 3]);
addAlbum("c", "y", "s", [1, 2, 3]);
addAlbum("b", "x", "t", [1, 2, 3]);
addAlbum("a", "x", "u", [1, 2, 3]);

function displayAll() {
    results.innerHTML = "";
    albums.sort(compareTitle);

    albums.forEach(function (album) {
        var tr = document.createElement("tr"),
            td1 = document.createElement("td"),
            td2 = document.createElement("td"),
            td3 = document.createElement("td"),
            td4 = document.createElement("td");

        td1.textContent = album.title;
        td2.textContent = album.category;
        td3.textContent = album.artist;
        td4.textContent = album.tracks.toString();

        tr.appendChild(td1);
        tr.appendChild(td2);
        tr.appendChild(td3);
        tr.appendChild(td4);
        results.appendChild(tr);
    });
}

function displayArtist() {
    results.innerHTML = "";
    albums.sort(compareArtist);

    albums.forEach(function (album) {
        var tr = document.createElement("tr"),
            td1 = document.createElement("td"),
            td2 = document.createElement("td"),
            td3 = document.createElement("td"),
            td4 = document.createElement("td");

        td1.textContent = album.title;
        td2.textContent = album.category;
        td3.textContent = album.artist;
        td4.textContent = album.tracks.toString();

        tr.appendChild(td1);
        tr.appendChild(td2);
        tr.appendChild(td3);
        tr.appendChild(td4);
        results.appendChild(tr);
    });
}

function displayCategory() {
    results.innerHTML = "";
    albums.sort(compareCategory);

    albums.forEach(function (album) {
        var tr = document.createElement("tr"),
            td1 = document.createElement("td"),
            td2 = document.createElement("td"),
            td3 = document.createElement("td"),
            td4 = document.createElement("td");

        td1.textContent = album.title;
        td2.textContent = album.category;
        td3.textContent = album.artist;
        td4.textContent = album.tracks.toString();

        tr.appendChild(td1);
        tr.appendChild(td2);
        tr.appendChild(td3);
        tr.appendChild(td4);
        results.appendChild(tr);
    });
}

b1.addEventListener("click", displayAll, false);
b2.addEventListener("click", displayArtist, false);
b3.addEventListener("click", displayCategory, false); 
```

在[jsfiddle 上](http://jsfiddle.net/Xotic750/FfbVp/)

# uml - 您如何捕捉需要在 UML 中回答的问题？

> ID：16111424
> 
> 赞同：1
> 
> 时间：2013-04-19T18:39:36.063
> 
> 标签：uml

无论使用何种工具，例如 EA Sparx、Visual Paradigm 等，您如何捕捉分析或建模过程中提出的问题？

您只是使用注释还是有标准方法？例如，我如何捕获“是否需要将数据备份到外部或内部供应商？”的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T19:25:29.700

有关于这些主题的整本书（尤其是 Robertson& Robertson，Mastering the Requirements Process，ISBN-13：978-0321815743）所以我严重怀疑这里会有一个简短的答案来广泛涵盖您的问题。

（在第 1 条评论后在此处删除文本）

“需要在 UML 中回答的问题”是什么意思？当然，在某些场景中 UML 符号非常有用。但它仍然是众多建模语言中的一种，不仅在工具方面，而且在符号方面都有替代方案。

## 编辑

对于开放式问题，您可能最好按照自己的建议使用图表注释。但那是一个 UML 内部视图。我会使用像 Atlassian Jira 这样的问题跟踪器来获得更好的概览和各种更好的可用性。然后，您可以使用[加载项](http://www.deiser.com/subject/portfolio/plugins/ea_jira/)与 EA 同步。

通常，您的问题将来自需求。您可以将未解决的问题放入需求元素的“注释”字段中。UML 不提供任何图表类型来捕获需求，因此您必须依赖建模非 UML 需求元素。

Sparx EA 中的需求元素不是（！）标准化的，而是 Sparx 的专有解决方案。它们有点类似于 OMG SysML（系统建模语言）中的需求图。两个价格最高的 EA 版本也提供 SysML 支持，您可以使用正确的 SysML 语法显式创建此类需求图。SysML 是 UML 的扩展，因此它们可以很好地协同工作。您还可以创建`<<trace>>`关系。对于其他版本的 EA，有一个 SysML 插件。MagicDraw 也是如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T19:21:59.710

我找到了一种可以使用 EA Sparx 捕获文档的方法。希望它在未来对某人有所帮助 -[需求收集](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CC8QFjAA&url=http://www.sparxsystems.com/downloads/whitepapers/Requirements_Management_in_Enterprise_Architect.pdf&ei=CJRxUbj-D-ftiAe56IC4Aw&usg=AFQjCNFe4QUQyE7J1T7ACfILhqsPdIM3uA&sig2=kwLnzoI5wM6RPV-4039_fQ&bvm=bv.45373924,d.aGc)

# android - “加载地图失败。无法联系 Google 服务器。”

> ID：16111427
> 
> 赞同：3
> 
> 时间：2013-04-19T18:39:42.550
> 
> 标签：android, maps

我已经查看了关于此错误的几乎所有问题，但仍然无法找到它。

这是我的清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.cs2110_final"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="16" />

    <permission
        android:name="com.example.cs2110_final.TheHunt.permission.MAPS_RECEIVE"
        android:protectionLevel="signature" />

    <uses-permission android:name="com.example.cs2110_final.permission.MAPS_RECEIVE" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-feature
        android:glEsVersion="0x00020000"
        android:required="true"/>

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.cs2110_final.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name="com.example.cs2110_final.TheHunt"
            android:label="@string/title_activity_the_hunt" >
        </activity>

        <meta-data
            android:name="com.google.android.maps.v2.API_KEY"
            android:value="(API key edited out)" />
    </application>

</manifest> 
```

这是我的活动代码：

```
mMap = ((MapFragment) getFragmentManager().findFragmentById(R.id.map)).getMap();
mMap.setMapType(GoogleMap.MAP_TYPE_HYBRID); 
```

这是对 Map 的 XML 引用：

```
 <fragment
        android:id="@+id/map"
        android:name="com.google.android.gms.maps.MapFragment"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_alignParentBottom="true"
        android:layout_alignParentRight="true" /> 
```

我现在已经完成了整个 API 流程三遍，但没有运气。据我所知，需要在清单中添加的每个权限都已经存在（甚至是偷偷摸摸的 GPS_Services 权限）。有任何想法吗？提前感谢您的帮助！

编辑：这是 LogCat 输出。就是这样，接着是“加载地图失败……”的多次重复

```
04-19 13:59:03.108: D/dalvikvm(26070): GC_CONCURRENT freed 252K, 6% free 7534K/7940K, paused 4ms+7ms, total 29ms
04-19 13:59:03.138: D/libEGL(26070): loaded /system/lib/egl/libEGL_tegra.so
04-19 13:59:03.148: D/libEGL(26070): loaded /system/lib/egl/libGLESv1_CM_tegra.so
04-19 13:59:03.168: D/libEGL(26070): loaded /system/lib/egl/libGLESv2_tegra.so
04-19 13:59:03.198: D/OpenGLRenderer(26070): Enabling debug mode 0
04-19 13:59:05.968: D/dalvikvm(26070): GC_CONCURRENT freed 301K, 6% free 7654K/8108K, paused 3ms+3ms, total 21ms
04-19 13:59:06.048: D/dalvikvm(26070): GC_CONCURRENT freed 216K, 5% free 7877K/8248K, paused 3ms+2ms, total 29ms
04-19 13:59:06.128: D/dalvikvm(26070): GC_CONCURRENT freed 309K, 6% free 8079K/8540K, paused 3ms+3ms, total 26ms
04-19 13:59:06.128: D/dalvikvm(26070): WAIT_FOR_CONCURRENT_GC blocked 5ms
04-19 13:59:06.128: D/dalvikvm(26070): WAIT_FOR_CONCURRENT_GC blocked 5ms
04-19 13:59:06.128: D/dalvikvm(26070): WAIT_FOR_CONCURRENT_GC blocked 6ms
04-19 13:59:06.128: D/dalvikvm(26070): WAIT_FOR_CONCURRENT_GC blocked 6ms
04-19 13:59:06.198: D/dalvikvm(26070): GC_CONCURRENT freed 250K, 5% free 8330K/8736K, paused 2ms+2ms, total 24ms
04-19 13:59:06.198: D/dalvikvm(26070): WAIT_FOR_CONCURRENT_GC blocked 8ms
04-19 13:59:06.258: D/dalvikvm(26070): GC_CONCURRENT freed 317K, 6% free 8527K/8996K, paused 2ms+3ms, total 25ms
04-19 13:59:06.258: D/dalvikvm(26070): WAIT_FOR_CONCURRENT_GC blocked 10ms
04-19 13:59:06.258: D/dalvikvm(26070): WAIT_FOR_CONCURRENT_GC blocked 10ms
04-19 13:59:06.378: D/dalvikvm(26070): GC_CONCURRENT freed 271K, 5% free 8689K/9128K, paused 2ms+6ms, total 31ms
04-19 13:59:06.378: D/dalvikvm(26070): WAIT_FOR_CONCURRENT_GC blocked 13ms
04-19 13:59:06.398: D/dalvikvm(26070): GC_FOR_ALLOC freed 283K, 8% free 8558K/9260K, paused 23ms, total 23ms
04-19 13:59:06.438: D/dalvikvm(26070): GC_FOR_ALLOC freed 303K, 8% free 8566K/9260K, paused 26ms, total 26ms
04-19 13:59:06.478: D/dalvikvm(26070): GC_FOR_ALLOC freed 325K, 8% free 8567K/9260K, paused 25ms, total 25ms
04-19 13:59:06.518: D/dalvikvm(26070): GC_FOR_ALLOC freed 304K, 8% free 8568K/9260K, paused 25ms, total 25ms
04-19 13:59:06.538: E/Google Maps Android API(26070): Failed to load map.  Could not contact Google servers.
04-19 13:59:06.598: D/dalvikvm(26070): GC_CONCURRENT freed 381K, 8% free 8579K/9260K, paused 6ms+4ms, total 51ms 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T13:13:03.507

看起来你的问题是这两个权限：

```
 <permission
    android:name="com.example.cs2110_final.TheHunt.permission.MAPS_RECEIVE"
    android:protectionLevel="signature" />

<uses-permission android:name="com.example.cs2110_final.permission.MAPS_RECEIVE" /> 
```

从您的包名称来看，这应该是相同的，这意味着如果您在其中写道：

```
com.example.cs2110_final 
```

这是你的包名，那么第二个应该是一样的，像这样：

```
 <permission
    android:name="com.example.cs2110_final.permission.MAPS_RECEIVE"
    android:protectionLevel="signature" />

<uses-permission android:name="com.example.cs2110_final.permission.MAPS_RECEIVE" /> 
```

此外，请确保您遵循生成 API 密钥的所有步骤，您可以遵循我在此主题上编写的本指南：

[谷歌地图 API V2 密钥](https://blog-emildesign.rhcloud.com/?p=403)

我在您的代码中看到的另一个问题是您的目标 API 版本 8 ( `android:minSdkVersion="8"`)，因此您应该像现在一样使用`SupportMapFragment`and`FragmentActivity`而不是`MapFragment`and a simple 。`Activity`但据我所知，这与您现在遇到的问题没有任何关系。

你仍然必须改变它，你可以按照我写的这个指南来做：

[谷歌地图 API V2](https://blog-emildesign.rhcloud.com/?p=435)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-13T13:08:34.883

您检查是否启用了正确的服务？一旦我遇到类似的问题，我的问题是我不小心启用`Google Maps API v2`了`Google Maps Android API v2`.

请检查您是否为 android 启用了正确的 Google 地图 API 服务，即`Google Maps Android API v2`.

# jquery - 选择标签 JQuery 并取消选择

> ID：16111434
> 
> 赞同：0
> 
> 时间：2013-04-19T18:39:54.857
> 
> 标签：jquery, events, triggers, tabs

我会尽量具体解决我的问题：

当我在我的网页中时，我已经选择了一个选项卡，所以我试图验证如果我的实际选项卡没有经过验证或处理（例如表单捕获），用户不会从一个选项卡更改。因此，如果单击其他选项卡，我将插入以下代码：

```
$("#aTab0").click(function() {
    if(!validation){
        var $tabs=$(".tabs").tabs(); 
        $tabs.tabs('select', 0);
        return;
    }               
}); 
```

没关系，它再次更改为实际选项卡，但单击的选项卡的样式已更改..我希望它保持未单击状态..

我想要的一个想法是，如果我可以停止单击其他选项卡的事件..

请帮忙！我需要一个人.. =P

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T18:42:14.990

更改“返回；” “返回错误；”，应该这样做。在事件处理函数中返回“false”应该停止处理事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-07T04:40:02.237

```
$(".tabs").tabs("option", "selected", 0); 
```

# scala - 斯卡拉：折叠与折叠左

> ID：16111440
> 
> 赞同：50
> 
> 时间：2013-04-19T18:40:39.100
> 
> 标签：scala, reduce, fold

我试图了解 fold 和 foldLeft 以及各自的 reduce 和 reduceLeft 是如何工作的。我用 fold 和 foldLeft 作为我的例子

```
scala> val r = List((ArrayBuffer(1, 2, 3, 4),10))
scala> r.foldLeft(ArrayBuffer(1,2,4,5))((x,y) => x -- y._1)

scala> res28: scala.collection.mutable.ArrayBuffer[Int] = ArrayBuffer(5)

scala> r.fold(ArrayBuffer(1,2,4,5))((x,y) => x -- y._1)
<console>:11: error: value _1 is not a member of Serializable with Equals
              r.fold(ArrayBuffer(1,2,4,5))((x,y) => x -- y._1) 
```

为什么`fold`不工作`foldLeft`？是什么`Serializable with Equals`？我了解 fold 和 foldLeft 在参数泛型类型方面的 API 签名略有不同。请指教。谢谢。

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2013-04-19T20:59:35.670

该方法`fold`（最初是为并行计算添加的）不如`foldLeft`它可以应用的类型强大。它的签名是：

```
def fold[A1 >: A](z: A1)(op: (A1, A1) => A1): A1 
```

这意味着完成折叠的类型必须是集合元素类型的超类型。

```
def foldLeft[B](z: B)(op: (B, A) => B): B 
```

原因是`fold`可以并行实现，而`foldLeft`不能。这不仅是因为这`*Left`部分意味着`foldLeft`从左到右依次进行，还因为运算符`op`无法合并并行计算的结果——它只定义了聚合类型`B`与元素类型`A`的组合方式，而不是如何组合两个类型的聚合`B`。`fold`反过来，该方法确实定义了这一点，因为聚合类型`A1`必须是元素类型的超类型`A`，即`A1 >: A`. 这种超类型关系允许同时折叠聚合和元素，以及组合聚合——两者都使用单个运算符。

但是，聚合和元素类型之间的这种超类型关系也意味着`A1`您示例中的聚合类型应该是`(ArrayBuffer[Int], Int)`. 由于聚合的零元素属于`ArrayBuffer(1, 2, 4, 5)`type `ArrayBuffer[Int]`，因此聚合类型被推断为这两者的超类型——即`Serializable with Equals`tuple 和数组缓冲区的唯一最小上限。

一般来说，如果你想允许对任意类型进行并行折叠（这是无序的），你必须使用`aggregate`需要定义两个聚合如何组合的方法。在你的情况下：

```
r.aggregate(ArrayBuffer(1, 2, 4, 5))({ (x, y) => x -- y._1 }, (x, y) => x intersect y) 
```

顺便说一句，尝试使用`reduce`/编写示例`reduceLeft`- 因为这两种方法都具有元素类型和聚合类型之间的超类型关系，您会发现它会导致与您描述的错误类似的错误。

# asp-classic - ASP 中年份的缩写

> ID：16111448
> 
> 赞同：0
> 
> 时间：2013-04-19T18:41:34.573
> 
> 标签：asp-classic, vbscript

我正在开发一个日历应用程序，我想显示日期，例如：`mm/dd/yy`. 这是因为在移动设备上，我的一些日期在`mm/dd/yyyy`. 我找不到 VBScript 函数来完成此操作，因此我使用以下代码进行了尝试：

```
listyear = Year(strlistdate)
listyearabbr = Right(listyear, 2)
strlistdate = Replace(strlistdate, listyear, listyearabbr) 
```

其中 strlistdate 是从数据库返回的初始日期。然后我使用显示日期`Response.write("<td>" &FormatDateTime(strlistdate,2)&"</td>")`

这不起作用，我想知道是否有人可以给我一些关于如何实现这一目标的指示。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T19:12:23.633

我认为这不是一个好方法，因为您最终会为所有语言环境返回相同的日期格式，但您可以这样做：

```
response.write(Month(strlistdate) & "/" & Day(strlistdate) & "/" & Right(Year(strlistdate),2)) 
```

每当您使用 FormatDateTime 时，它​​都会根据存储在服务器上的定义创建一年。如果服务器可以设置为 mm/dd/yy，那么您无需执行上述任何操作即可获得您想要的输出。

另外，查看格式功能。你应该可以这样做： response.write(Format(strlistdate, "m/dd/y")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T08:19:32.570

你可以试试这个想法。我已经多年没有使用日期格式了。相反，我像这样构建日期字段......

```
strDay = Day(Date)
strMonth = Month(Date)
strYear = Year(Date)
strHours = Hour(Now)
strMins = Minute(Now)
strSecs = Second(Now())
    if len(strMonth) = 1 then
        strMonth = "0" & strMonth
    end if
    if len(strDay) = 1 then
        strDay = "0" & strDay
    end if
    if len(strHours) = 1 then
        strHours = "0" & strHours
    end if
    if len(strMins) = 1 then
        strMins = "0" & strMins
    end if
    if len(strSecs) = 1 then
        strSecs = "0" & strSecs
    end if

strDateAdded = strYear & "-" & strMonth & "-" & strDay
strDateAddedTime = strDateAdded & " " & strHours & ":" & strMins 
```

使用这种方法，您可以完全控制顺序，即使在不同时区运行 Web 应用程序时，您仍然可以保持 DD/MM 格式……或任何您想要的顺序，例如 MM-DD-YY（通过重新排序和修剪年）。我个人更喜欢 YYYY-MM-DD 因为按 ASC 和 DESC 排序更容易使用，即：更容易阅读，因为所有行都具有相同数量的字符，例如：

```
2013-04-01 03:15
2013-04-09 10:15
2013-04-22 07:15
2013-04-23 10:15
2013-04-23 10:60
2013-10-25 12:01
2013-10-25 12:59 
```

代替：

```
2013-4-1 3:15
2013-4-9 10:15
2013-4-22 7:15
2013-4-23 10:15
2013-4-23 10:60
2013-10-25 12:1
2013-1-25 12:59 
```

# r - 使用内联和 Rcpp 调用 R 函数仍然与原始 R 代码一样慢

> ID：16111449
> 
> 赞同：3
> 
> 时间：2013-04-19T18:41:36.413
> 
> 标签：r, inline, rcpp

我需要评估一个需要长循环的函数（后验分布）。显然我不想在 R 本身中这样做，所以我使用“inline”和“Rcpp”来实现 C++。但是，我发现在每个循环使用 R 函数的情况下，cxx 函数的运行速度与运行 R 代码一样慢（参见下面的代码和输出）。特别是，我需要在每个循环中使用多元正态累积分布函数，因此我使用 mvtnorm 包中的 pmvnorm()。

如何在 cxxfunction 中使用这个 R 函数并加快速度？我想了解为什么会发生这种情况，以便将来可以在 cxxfunction 中使用其他 R 函数。

谢谢你。

```
test <- cxxfunction(
  signature(Num="integer",MU="numeric",Sigma="numeric"),
  body='
  RNGScope scope;

  Environment stats("package:mvtnorm");
  Function pmvnorm = stats["pmvnorm"];

  int num = Rcpp::as<int>(Num);
  NumericVector Ret(1);
  NumericMatrix sigma(Sigma);
  NumericVector mu(MU);
  NumericVector zeros(2);

for(int i = 0; i < num; i++)
{
  Ret = pmvnorm(Named("upper",zeros),Named("mean",MU),Named("sigma",sigma));
}
return Ret;
',plugin="Rcpp"
)

system.time(
test(10000,c(1,2),diag(2))
)
    user  system elapsed 
    5.64    0.00    5.75 

system.time(
for(i in 1:10000){
pmvnorm(upper=c(0,0),mean=c(1,2),sigma=diag(2))
}
)
   user  system elapsed 
   5.46    0.00    5.57 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-19T18:48:07.663

您正在从 Rcpp 调用*R 函数。*

这不能比直接调用 R 函数更快。

您的绑定约束*是您调用的函数，*而不是您如何调用它。Rcpp 不是某种神奇的 R-to-C++ 编译器。

# zsh - 如何执行但保持相同的 argv0

> ID：16111455
> 
> 赞同：2
> 
> 时间：2013-04-19T18:42:01.003
> 
> 标签：zsh

来自 zshbuiltins 手册，

> ```
>  exec [ -cl ] [ -a argv0 ] simple command
>           Replace  the  current shell with an external command rather than forking.  With -c clear the environment; with -l prepend - to the argv[0] string of the command executed (to simulate a login shell); 
>    with -a argv0 set the argv[0] string  of  the  command executed.  See the section `Precommand Modifiers'. 
> ```

我尝试使用`-a` 一个简单的脚本，但它似乎不起作用

```
[balakrishnan@mylap scripts]$ cat printer.sh;echo "-----";cat wrapper.sh
#!/bin/sh
echo $0 $1 $2 $3 $4
-----
#!/bin/zsh
argv0="$0"
exec -a "$argv0" printer.sh
[balakrishnan@mylap scripts]$ wrapper.sh 
printer.sh
[balakrishnan@mylap scripts]$ 
```

由于我设置`wrapper.sh`为`argv0`，我希望在`printer.sh`echos时打印它`$0`。但它仍然打印`printer.sh`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T18:50:41.190

`zsh`设置`argv[0]`正确，但是当`/bin/sh`运行解释脚本时，它设置`$0`为正在运行的脚本的名称，忽略`argv[0]`.

`zsh`手册页没有明确描述这种行为，但手册页`bash`确实：

> ### 论据
> 
> 如果在选项处理之后参数仍然存在，并且既没有提供 the`-c`也没有 `-s` 提供选项，则假定第一个参数是包含 shell 命令的文件的名称。If`bash`以这种方式调用， **`$0`设置为文件名**，位置参数设置为其余参数。

* * *

您可以通过运行一个小型 C 程序而不是 shell 脚本来看到它`argv[0]`被正确设置：

```
#include <stdio.h>

int main(int argc, char** argv) {
    printf("%s\n", argv[0]);
    return 0;
} 
```

# linux - 裸 Git 仓库无法添加文件或提交文件

> ID：16111459
> 
> 赞同：0
> 
> 时间：2013-04-19T18:42:08.043
> 
> 标签：linux, git, permissions, centos

所以我一直被这个奇怪的 git 问题所困扰，我自己和其他一些开发人员都无法解决。这里是：

我创建了一个裸仓库，用于在测试服务器上使用 git 管理网站更改。对于这个例子，repo 在这里：/home/website/website.git 网站公共根目录在这里：/home/website

我通过执行以下命令创建了 repo：git repo 目录“website.git”中的 git init --bare

接下来，我在其他地方的机器上拥有我的本地仓库。这是一个标准的 git 仓库。我建立了网站，准备好部署。准备好后，我将其推送到裸仓库。来自我的本地仓库。有一个接收后挂钩可以将最新的文件树检出到网站的公共根目录中。因此，当我在本地 repo 上更改内容并在 localhost 环境中对其进行测试时，一旦满意，我就可以将它们推送到实时服务器。

这是我面临的问题：我可以很好地推动。没有问题。一切都按预期工作。代码被检出到公共根目录。每个人都很开心，继续他们的生活。

但是！！！：该站点是一个CMS站点。用户登录并上传内容。文件在网站的公共根目录上创建，即 GIT_WORK_TREE。

所以NBD对吧？！我可以时不时地从实时的裸仓库中提交文件，然后像以前一样将它们拉回我的本地环境。所以我在服务器上登录 SSH。导航到 /home/website/website.git 然后运行这个命令：GIT_WORK_TREE=/home/website/ git add ../

我得到了这个烂摊子：

```
error: unable to create temporary sha1 filename ./objects/cb: No such file or directory
error: error_log: failed to insert into database
error: unable to index file error_log
fatal: adding files failed 
```

我以前在其他服务器上做过这个，据我记得它工作得很好。所以我就像WTF一样，这台服务器上一定有什么奇怪的东西。我去了另一台服务器，并复制了完全相同的步骤。得到了完全相同的问题。所以现在我担心我正在失去理智，也许这些以前的 git 经验都是在我的脑海中编造的...... *好吧，让我们不要走那么远...... :)

也许有人可以在这里帮助我。我已经使用了很多 git，但似乎无法破解这个。

哦，其他一些可能有用的规范：运行 CENTOS 6.2

我仔细检查了所有权限。我什至尝试以递归方式将所有内容更改为 777，以确保我不会以某种方式丢失它。确保所有文件都归正确的用户所有。递归地chown。我还尝试了这里描述的这个问题的标准解决方案：[https ://answers.atlassian.com/questions/132671/git-commit-fails-with-sourcetree-error-unable-to-create-temporary-sha1-文件名-git-objects-d8-file-exists](https://answers.atlassian.com/questions/132671/git-commit-fails-with-sourcetree-error-unable-to-create-temporary-sha1-filename-git-objects-d8-file-exists) 那也没用。不知道从这里去哪里。

请帮我！！！！我觉得 Linus 现在正在对我玩残酷的把戏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T00:33:21.497

您在 /home/website/website.git 中有一个裸 git 存储库，它位于 /home/website 的 git 存储库中？然后你试图欺骗裸 git 存储库使用`GIT_WORK_TREE`?

也许值得了解此设置，但前提是您打算成为`git`开发人员。由于您是专注于提供网站功能的用户，我建议使用标准`git`设置。

将裸 git 存储库移至别处：

```
$ mkdir /home/repo
$ mv /home/website/website.git /home/repo/website.git
$ cd /home/website
$ git remote set-url origin /home/repo/website.git 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T13:20:08.190

我得到了解决方案。就是这个。我正在从 git repo 运行上述命令。

原来该命令应该从工作树运行并更改为如下所示：

```
GIT_WORK_TREE=/home/website/  git --git-dir="./website.git/"  add ./ 
```

# magento - Magento Go product_attribute.addOption

> ID：16111463
> 
> 赞同：1
> 
> 时间：2013-04-19T18:42:27.273
> 
> 标签：magento, soap, magento-go

我正在使用 Magento API 的 SOAP v1，我正在尝试向属性添加一个选项。

我的代码：

```
$attributeCode = "feltColor";
$optionToAdd = array(
    "Label" => array(
        array(
            "store_id" => 1,
            "value" => "Green"
        )
    ),
    "order" => 0,
    "is_default" => 0
); 
```

但我不断收到以下错误：

致命错误：未捕获的 SoapFault 异常：[108] 未定义默认选项值

不能让它工作......有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-18T21:36:46.240

您需要为 store_id = 0 指定一个标签（代替或除了为 store_id = 1 定义一个标签之外）。

这来自 product_attribute.create 的[文档](http://www.magentocommerce.com/api/soap/catalog/catalogProductAttribute/product_attribute.create.html)，但也适用于 product_attribute.addOption：

> 注意：必须指定设置为 0 的“store_id”值的“label”值。如果不指定 store_id=0 的标签，则无法创建属性。

如果为 store_id = 0 定义标签，则为默认值，因此无需为其他商店视图定义它，除非您想覆盖默认值：

```
$attributeCode = "feltColor";
$optionToAdd = array(
    "Label" => array(
        array(
            "store_id" => 0,
            "value" => "Green"
        )
    ),
    "order" => 0,
    "is_default" => 0
); 
```

# wordpress - 更改帖子作者的头像

> ID：16111464
> 
> 赞同：0
> 
> 时间：2013-04-19T18:42:32.990
> 
> 标签：wordpress, avatar, author

当有人编辑其他人创建的帖子并更改帖子的作者时，整个站点中为该帖子显示的头像是否可以更改以反映新指定的作者？

似乎 Wordpress 总是希望显示创建帖子的用户的头像，无论作者在事后可能已更改为谁。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T18:52:22.033

最后一位作者保存在（隐藏的）帖子元字段中`_edit_last`，因此您可以执行以下操作：

```
$last_id = get_post_meta( get_queried_object_id(), '_edit_last', true );
$last_user = get_userdata( $last_id );
echo get_avatar( $last_user->user_email ); 
```

# wordpress - Wordpress 媒体上传：错误 500

> ID：16111465
> 
> 赞同：1
> 
> 时间：2013-04-19T18:42:33.093
> 
> 标签：wordpress, image-uploading, internal-server-error, http-error, server-configuration

当我尝试通过 Flash 上传器在特定服务器上托管的多个 WP 网站上上传图像时，我收到一个红色的**HTTP 错误。**

我知道这是一个常见问题，但常见的解决方案对我不起作用。这就是为什么我尝试将其作为一个新问题提出。

这是我到目前为止所尝试的：

*   新鲜的 WP 副本
*   wp-content/uploads 和 .htaccess 的文件夹/文件权限
*   删除 .htaccess
*   切换到常规上传程序，当我尝试上传文件时会导致 Internet 服务器错误 500
*   切换主题
*   禁用所有插件
*   mod_security 修复
*   在我的本地服务器上测试了该站点，**它确实可以正常工作，**但我不知道为什么。

谢谢！

# c# - Word 的 XSLT 转换

> ID：16111466
> 
> 赞同：0
> 
> 时间：2013-04-19T18:42:34.843
> 
> 标签：c#, xslt, ms-word

我正在用 .NET C# 编写一个 Web 服务，它接收一个对象，将其转换为 xml，应用一个 XSLT 模板，运行转换，并返回一个 MS 工作文件。

这是该函数的代码：

```
public static HttpResponseMessage Transform(object data)
{
    var response = new HttpResponseMessage(HttpStatusCode.OK);

    StringWriter stringWriter = new StringWriter();
    XmlWriter xmlWriter = XmlWriter.Create(stringWriter);

    var applicationDirectory = AppDomain.CurrentDomain.BaseDirectory;
    var xsltPath = applicationDirectory + @"\Reporting\Files\Template.xslt";
    var templatePath = applicationDirectory + @"\Reporting\Files\Template.docx";

    var xmlObject = new System.Xml.Serialization.XmlSerializer(data.GetType());
    MemoryStream stream;
    using (stream = new MemoryStream())
    {
        var sw = new StreamWriter(stream);
        xmlObject.Serialize(stream, data);
        stream.Position = 0;

        XslCompiledTransform transform = new XslCompiledTransform();
        transform.Load(xsltPath);

        using (XmlReader xmlReader = XmlReader.Create(stream))
        {
            transform.Transform(xmlReader, xmlWriter);

            XmlDocument newWordContent = new XmlDocument();
            newWordContent.LoadXml(stringWriter.ToString());

            var outputPath = applicationDirectory + @"\Reporting\Temp\temp.docx";

            System.IO.File.Copy(templatePath, outputPath, true);

            using (WordprocessingDocument output = WordprocessingDocument.Open(outputPath, true))
            {
                Body updatedBodyContent = new Body(newWordContent.DocumentElement.InnerXml);

                output.MainDocumentPart.Document.Body = updatedBodyContent;

                output.MainDocumentPart.Document.Save();
            }

            response.Content = new StreamContent(new FileStream(outputPath, FileMode.Open, FileAccess.Read));
            response.Content.Headers.ContentDisposition = new System.Net.Http.Headers.ContentDispositionHeaderValue("attachment");
            response.Content.Headers.ContentDisposition.FileName = outputPath;
        }
    }
    return response;
} 
```

当我提出请求时，它会给我一个没有数据的 word 文件。

我在使用 (XmlReader xmlReader = XmlReader.Create(stream)) 处设置了一个断点。运行该行后，xmlReader 的值为 {None}。

我还试图避免为提高效率而创建 XML 文件（因此是 MemoryStream）。

知道为什么这不起作用吗？有没有更好的方法来实现这一点？

谢谢，格尔森

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T06:56:44.923

如果你改变这个会发生什么：

```
 Body updatedBodyContent = new Body(newWordContent.DocumentElement.InnerXml); 
```

对此：

```
 Body updatedBodyContent = new Body(newWordContent.InnerXml); 
```

或这个：

```
 Body updatedBodyContent = new Body(newWordContent.DocumentElement.OuterXml); 
```

你在那里的方式会导致转换后的 XML 的外部元素被省略，我怀疑这就是你想要的（虽然不能肯定地说，因为你没有向我们展示输入 XML 或 XSLT。

# file - PDF 文件中的隐写术

> ID：16111471
> 
> 赞同：7
> 
> 时间：2013-04-19T18:43:04.643
> 
> 标签：file, pdf, file-format, steganography

有人可以告诉我，在哪里可以将一些数据隐藏到 PDF 文件中？换句话说，PDF 文件中的隐写术。有什么算法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T18:55:27.567

有很多方法可以做到这一点，包括

*   使用传统的图像隐写工具将信息嵌入到图像中，然后将图像嵌入到 PDF 中
*   将文本颜色设置为白色，并确保您没有使用彩色背景
*   在文本上叠加一个白色矩形。
*   使用适当的低级工具，创建您的秘密文本的文本对象，然后将这些对象标记为已删除。只要没有人尝试压缩您的 PDF（Pitstop 就是这样一种压缩/清理工具），您的数据就会存在。
*   如果您真的感到乐观，请开始阅读[PDF 规范](http://www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/pdf_reference_1-7.pdf)（我不确定这是否是最新的，已经有几年了）。存在/曾经有一个交叉引用表，其中列出了“当前正在使用”的文件部分。添加几个孔就很容易了。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-19T19:00:35.497

最容易隐藏信息的地方是文件开头的`%PDF`. Acrobat 将允许最多大约 1024 字节的任意数据（只要它不包含 %PDF）并且仍然可以正确呈现文件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-19T19:00:57.030

[深入了解Dan Pichelman 回答](https://stackoverflow.com/a/16111670/501196)的最后一点，您可以将流对象包含到任何 PDF 文件中，并在交叉引用表中添加对它们的引用。流对象可以被压缩或加密，如果它没有从文件的任何其他对象中引用，那么 PDF 阅读器将安全而无声地忽略它。

# jquery - 不区分大小写字符串的搜索元素

> ID：16111472
> 
> 赞同：2
> 
> 时间：2013-04-19T18:43:05.763
> 
> 标签：jquery, string, lowercase

假设我有这些跨度：

```
<span>c2alerts</span>
<span>C2alerts</span>
<span>c2Alerts</span>
<span>c2aLerts</span>
<span>c2alErts</span>
<span>c2aleRts</span>
<span>c2alerTs</span>
<span>c2alertS</span> 
```

我想找到我熟悉的每个“c2alerts”来搜索特定的字符串：

```
$("span:contains('c2alerts')").addClass('yellow'); 
```

但是我如何在不重复编码的情况下搜索所有这些？我知道我可以使用 toLowerCase() 函数，但我不确定我会在哪里应用它......

我想保持跨度的原始格式，因此将它们转换为小写然后搜索将不是一个可行的选择。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T18:44:24.110

你必须使用`.filter()`：

```
$('span').filter(function() {
    return $(this).text().toLowerCase().indexOf('c2alerts') !== -1;
}).addClass('yellow'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T18:46:19.187

`contains`您可以使用自定义行为推出自己的

```
jQuery.expr[":"].contains_ignoreCase = jQuery.expr.createPseudo(function(arg) {
  return function( elem ) {
     return jQuery(elem).text().toLowerCase().indexOf(arg.toLowerCase()) >= 0;
  };
});

$("span:contains_ignoreCase('c2alerts')").addClass('yellow'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T18:53:11.147

我认为最简单的方法是：

```
$("span").each(function(){
    if($(this).text().toLowerCase() == "c2alerts") {
        $(this).addClass("yellow");
    }
}); 
```

# c# - 如何从另一种形式启用一种形式的按钮？

> ID：16111478
> 
> 赞同：-5
> 
> 时间：2013-04-19T18:43:18.960
> 
> 标签：c#

我正在制作一个迷宫，我希望在玩家完成第 1 级（在表单 1 中）时启用我的“第 2 级”按钮（在主表单中）。所以我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T18:46:24.167

Create a new event on the LevelForm, such as:

```
public event Action LevelCompleted; 
```

Fire that event when the level is completed:

```
//run this code as soon as you know the level is completed
if(LevelCompleted != null)
    LevelCompleted(); 
```

Then have the main form subscribe to that event and do...whatever, when the level is completed:

```
level1Form.LevelCompleted += () => level2Button.Enabled = true; 
```

# windows - 为 QT 编译 opencv 时出错

> ID：16111479
> 
> 赞同：2
> 
> 时间：2013-04-19T18:43:19.937
> 
> 标签：windows, opencv, compilation, cmake, qt5

我想用`opencv`in `QT`，所以我必须用`mingw`. 当我想用`CMake 2.8.10.2`它编译它时出现以下错误

```
The CXX compiler identification is GNU 4.7.2
The C compiler identification is GNU 4.7.2
Check for working CXX compiler: C:/Qt/Qt5.0.1/Tools/MinGW/bin/g++.exe
Check for working CXX compiler: C:/Qt/Qt5.0.1/Tools/MinGW/bin/g++.exe -- broken
CMake Error at C:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/CMakeTestCXXCompiler.cmake:54 (message):
      The C++ compiler "C:/Qt/Qt5.0.1/Tools/MinGW/bin/g++.exe" is not able to
      compile a simple test program.

      It fails with the following output:

       Change Dir: C:/opencv_bin/CMakeFiles/CMakeTmp

      Run Build Command:C:/Qt/Qt5.0.1/Tools/MinGW/bin/mingw32-make.exe
      "cmTryCompileExec2270185098/fast"

      C:/Qt/Qt5.0.1/Tools/MinGW/bin/mingw32-make.exe -f
      CMakeFiles\cmTryCompileExec2270185098.dir\build.make
      CMakeFiles/cmTryCompileExec2270185098.dir/build

      mingw32-make.exe[1]: Entering directory
      'C:/opencv_bin/CMakeFiles/CMakeTmp'

      "C:\Program Files (x86)\CMake 2.8\bin\cmake.exe" -E cmake_progress_report
      C:\opencv_bin\CMakeFiles\CMakeTmp\CMakeFiles 1

      'C:\Users\' is not recognized as an internal or external command,

      operable program or batch file.

      CMakeFiles\cmTryCompileExec2270185098.dir\build.make:59: recipe for target
      'CMakeFiles/cmTryCompileExec2270185098.dir/testCXXCompiler.cxx.obj' failed

      mingw32-make.exe[1]: ***
      [CMakeFiles/cmTryCompileExec2270185098.dir/testCXXCompiler.cxx.obj] Error
      1

      mingw32-make.exe[1]: Leaving directory 'C:/opencv_bin/CMakeFiles/CMakeTmp'

      makefile:116: recipe for target 'cmTryCompileExec2270185098/fast' failed

      mingw32-make.exe: *** [cmTryCompileExec2270185098/fast] Error 2

      CMake will not be able to correctly generate this project.
    Call Stack (most recent call first):
      CMakeLists.txt:61 (project)

    Configuring incomplete, errors occurred! 
```

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T09:02:36.893

我有一个较新的版本，但在我的情况下，您应该尝试在文件夹 QtSDK/minGW/bin 而不是 Qt 文件夹中。

# javascript - 应用/触发未传递正确的参数

> ID：16111481
> 
> 赞同：0
> 
> 时间：2013-04-19T18:43:25.000
> 
> 标签：javascript, jquery, events, publish-subscribe

我的 jQuery 代码遇到了一个奇怪的问题。我有[如下](http://pastebin.com/CbGndMDU)设置：

```
(function($) {
    var o = $({});

    $.subscribe = function() { o.on.apply(o, arguments); };
    $.publish = function() { o.trigger.apply(o, arguments); };
}(jQuery));

(function($) {

    var CarrierView = {
        subscriptions: function() {
            $.subscribe( 'reporting.carrier.model.changed', this.renderModel );
        },
        renderModel: function( e, data ) {
            var self = CarrierView;
        }
    };

    var CarrierModel = {
        subscriptions: function() {
            $.subscribe( 'reporting.carrier.model.update', this.updateModel );
        },
        updateModel: function( value ) {
            $.getJSON('carriers', function( data ) {
                $.publish( 'reporting.carrier.model.changed', data );
            });
        }
    };

    window.CarrierView = CarrierView.init();
    window.CarrierModel = CarrierModel.init();
})(jQuery); 
```

运行一个非常基本的发布/订阅。我的问题如下：

点击事件触发该`CarrierModel.updateModel`方法，该方法调用`$.getJSON`. `data`返回的是一个，`Array[99]`然后被`publish`编辑。当`CarrierView.renderModel`被调用时，`data`有 的第一个元素`Array[99]`，一个`Array[5]`。我做错了什么？如何将整组传递`data`给视图？

# javascript - 尝试使用 JavaScript 定位表单

> ID：16111482
> 
> 赞同：0
> 
> 时间：2013-04-19T18:43:28.827
> 
> 标签：javascript, html, dom

我正在尝试使用 JavaScript 创建一个表单并定位它。我使用以下代码。

```
var f = document.createElement("form");
f.setAttribute('method',"post");
f.setAttribute('action',"submit.php");

// Position form
f.setAttribute('offsetTop',offsetTop);
f.setAttribute('offsetLeft',parseInt(offsetLeft)+parseInt(imageWidth));

document.getElementsByTagName('body')[0].appendChild(f); 
```

但是，当我使用 Firebug 检查 DOM 时，表单的位置与我根本没有使用表单定位调用一样。也就是说，它位于作为图像的最后一个元素的下方。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T18:45:27.267

试试这个。

```
var f = document.createElement("form");
f.setAttribute('method',"post");
f.setAttribute('action',"submit.php");

// Position form
f.style.position = "absolute";
f.style.top = offsetTop +"px";
f.style.left = (parseInt(offsetLeft)+parseInt(imageWidth)) +"px"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T18:45:50.243

offsetTop 和 offsetLeft 不是 CSS 属性。而且您需要使用非静态位置。使用“风格”：

```
f.style.position = "absolute";//or relative, fixed
f.style.top = offsetTop+"px";//set css top 
```

# r - R按其值填充列表

> ID：16111485
> 
> 赞同：0
> 
> 时间：2013-04-19T18:43:48.883
> 
> 标签：r, list, for-loop, sapply

假设我有一个清单：

```
> fs
[[1]]
NULL

[[2]]
NULL

[[3]]
NULL

[[4]]
[1] 61.90298 58.29699 54.90104 51.70293 48.69110 
```

我想通过使用它的值来“反向填充”列表的其余部分。例子：

`[[3]]`应该有`[[4]]`pairs的函数值：

```
c( myFunction(fs[[4]][1], fs[[4]][2]), myFunction(fs[[4]][2], fs[[4]][3]), .... ) 
```

`[[2]]`应该有`myFunction`等值`[[3]]`...

我希望这很清楚。正确的方法是什么？对于循环？*适用？我的最后一次尝试，结果为`1-3`空：

```
n = length(fs)
for (i in rev(1:(n-1)))
  child_fs = fs[[i+1]]
  res = c()
  for (j in 1:(i+1))
    up = v(child_fs[j])
    do = v(child_fs[j+1])
    this_f = myFunction(up, do)
    res[j] = this_f
  fs[[i]] = res 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T18:59:14.033

轻松`fs`重现

```
fs <- list(NULL, NULL, NULL, c(61.90298, 58.29699, 54.90104, 51.70293, 48.69110)) 
```

为了能够展示一个例子，做一个微不足道的`myFunction`

```
myFunction <- function(a, b) {a + b} 
```

您可以遍历除最后一个位置之外的所有位置`fs`（以相反的顺序），并计算每个位置。只需调用`myFunciton`向量，这些向量是下一个较高位置的向量，没有最后一个元素，也没有第一个元素。

```
for (i in rev(seq_along(fs))[-1]) {
  fs[[i]] <- myFunction(head(fs[[i+1]], -1), tail(fs[[i+1]], -1))
} 
```

假设`myFunction`是向量化的（给定输入向量，将给出输出向量）。如果不是，您可以轻松制作一个版本。

```
myFunction <- function(a, b) {a[[1]] + b[[1]]}

for (i in rev(seq_along(fs))[-1]) {
  fs[[i]] <- Vectorize(myFunction)(head(fs[[i+1]], -1), tail(fs[[i+1]], -1))
} 
```

在任何一种情况下，你都会得到

```
> fs
[[1]]
[1] 453.2 426.8

[[2]]
[1] 233.398 219.802 206.998

[[3]]
[1] 120.200 113.198 106.604 100.394

[[4]]
[1] 61.90298 58.29699 54.90104 51.70293 48.69110 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T19:31:24.027

真的，你所拥有的是一个起点

```
start <- c(61.90298, 58.29699, 54.90104, 51.70293, 48.69110) 
```

你想应用的一个函数（我做了这个，它在所有地方添加 1 并删除最后一个元素）

```
myFunction <- function(x) head(x + 1, -1L) 
```

以及您想要应用该功能的次数（递归）：

```
n <- 3L 
```

`n`所以我会编写一个函数来递归地应用函数时间，然后反转输出列表：

```
apply.n.times <- function(fun, n, x)
   if (n == 0L) list(x) else c(list(x), Recall(fun, n - 1L, fun(x)))

rev(apply.n.times(myFunction, n, start))

# [[1]]
# [1] 64.90298 61.29699
# 
# [[2]]
# [1] 63.90298 60.29699 56.90104
# 
# [[3]]
# [1] 62.90298 59.29699 55.90104 52.70293
# 
# [[4]]
# [1] 61.90298 58.29699 54.90104 51.70293 48.69110 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T20:43:35.847

这是一个单行解决方案（如果 myFunction 可以替换为 sum 之类的东西，或者在本例中为 rowSums）：

```
Reduce( function(x,y) rowSums( embed(y,2) ), fs, right=TRUE, accumulate=TRUE ) 
```

如果 myFunction 需要接受 2 个值并对其进行处理，则可以将其扩展为：

```
Reduce( function(x,y) apply( embed(y,2), 1, function(z) myFunction(z[1],z[2]) ), 
    fs, right=TRUE, accumulate=TRUE ) 
```

# php - 如何在更改的 PHP 变量上更改 jQuery 进度条状态？

> ID：16111486
> 
> 赞同：0
> 
> 时间：2013-04-19T18:43:48.900
> 
> 标签：php, jquery-ui, progress-bar

想法是在 PHP 变量更改时更新进度条值：

```
 <script>
    $(function() {
       $( "#progressbar" ).progressbar({
          value: <?php echo $_SESSION['value'] ?>
       });
    });
 </script> 
```

我试过了：

```
 <?php 
        $_SESSION['value'] = 10; 
            sleep(2);
        $_SESSION['value'] = 30;
            sleep(2);
        $_SESSION['value'] = 50;
            sleep(2);
        $_SESSION['value'] = 70;
            sleep(2);
        $_SESSION['value'] = 90;        
    ?> 
```

但进度条仅设置为最后一个变量`90`。我希望它随着变量值的变化而连续更新五次。

可以用 jQuery 和 PHP 做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T18:54:14.497

这是可能的，但仅使用 AJAX，因为 javascript 无权访问 PHP 会话。

javascript 仅在 PHP 文件完成执行后运行，这就是为什么您只看到它使用最后一个值更新的原因。

JS：

```
setInterval(function() {
    $.get("currentProgress.php", function(data) {
        $("#progressbar").progressbar({
          value: data
        });
    });
}, 1000); // updates every second 
```

PHP 文件：

```
<?php
    // work out the current progress of whatever you're checking on
    echo $value;
?> 
```

**更新：**也许这更符合您的要求：[http](http://w3shaman.com/article/php-progress-bar-script) ://w3shaman.com/article/php-progress-bar-script - 可以轻松修改它以包含 jQuery 进度条。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T18:50:50.650

`$_SESSION`仅存在于服务器端，因此在您的浏览器收到响应之前，它会经历所有五个阶段。将传输的值为`90`。

如果您想监控服务器端进程，您将不得不使用不同的方法，例如通过 ajax。

# javascript - 将文本放入数字输入不会触发更改事件？

> ID：16111491
> 
> 赞同：5
> 
> 时间：2013-04-19T18:44:11.767
> 
> 标签：javascript, jquery, html

# [例子](http://jsfiddle.net/mnpenner/w7bLu/)

似乎输入文本`<input type="number"/>`不会触发更改事件。我想要一个更改事件，以便我可以警告用户修复他们的输入。如何为此获取更改事件，*并获取当前值*以便验证错误输入？

我一直在 Chrome 中进行测试。

```
$('input').on('change', function() {
    alert('change');
});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
put letters in me and press tab: <input type="number"/>
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-19T18:46:47.247

然后尝试使用其他键盘事件。例如，我刚刚添加

```
$("input").on('keyup', function() {
    alert('keyup' + $(this).val());
}) 
```

对于您的 JSFiddle 示例，在文本框中`alert`按下后会出现。`a``number`

注意：检查`$(this).val()`不会返回无效字符（至少在 Chrome 中）。它在返回结果之前去除无效值（例如，`1a`变为空白）。这也是为什么当`change`事件的值实际上没有改变时事件似乎没有被触发，因为输入都是无效的。要捕获无效字符，您必须改为检查事件的`keyCode`：

```
$("input").on('keyup', function(e) {
    if (e.keyCode < 48 || e.keyCode > 57) {
        // not 0-9 (note: ignores -)
        alert('error!');
    }
}); 
```

在[搞砸了一点](http://jsfiddle.net/AwhWf/6/)之后，我注意到 Chrome 和 IE10 的行为相似，但 IE10 的剥离似乎有一个错误：

如果您`number`以非数字开始输入，那么 IE10（也可能是 9）将认为输入的其余部分是有效数字，无论后面跟着什么字符（例如，在 IE 眼中`1a2`一样有效） `12`. 但是，在 Chrome 中，如果你输入了一个非数字，那么它会立即忽略该输入并声明它是无效的；在 IE10 中，如果以非数字开头，则行为相同。

行为上的一大区别是 IE10 将在 之后清除无效的数字字段`blur`，但同样，如果该字段以非数字开头（例如，`a1`），他们才会认为它无效。 `-`可以在数字之前，但不能超过其中一个。

在这两种浏览器中，如果`number`被认为是无效的，那么`this.value`（因此`$(this).val()`）将返回空白。`number`在 IE10 中，如果以数字 ( ) 开头，您可以获得原始的无效值`0-9`。两个浏览器只会`change`在它们认为输入实际发生变化时触发事件，并且在 IE10 的情况下，这意味着如果用户输入`abcd`然后`blur`输入，那么 IE10 将清除该字段并*在*它有一个有效的情况下触发一个`change`事件更改前的值。在 Chrome 中，无论输入是否有效，都会发生变化；如果它无效，则将其更改为空白值。

 *这意味着您可以处理有效和无效的数字输入，但您无法可靠地获取用户在文本框中键入的实际值。

HTML

```
put letters in me and press tab:
<br />
<input type="number"/>
<br />
<p id="event" />
<p id="text" /> 
```

JavaScript

```
function checkValid(e) {
    var $this = $(this);
    $("#event").text(e.type);
    $("#text").html("this.value: " +
                    this.value +
                    "<br />$(this).val(): " +
                    $this.val() + "<br />$(this).is(:valid): " +
                    $this.is(":valid") +
                    "<br />$.isNumeric(this.value): " +
                    $.isNumeric(this.value)); // <- helps check
}

$('input[type="number"]').on('change', checkValid).on("keyup", checkValid); 
```

您可以通过检查来检查它是否是有效数字`$.isNumeric`。和伪类在 IE10 中不起作用，`:valid`除非该字段被标记为（在 IE9 中根本没有），但它们都在 Chrome 中起作用而没有将其标记为.`:invalid``number``required``required`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-21T01:15:13.270

正如[pickypg](https://stackoverflow.com/users/706724/pickypg)所指出的，如果用户在元素中键入“ **abcd** ” `<input type='number'>`，则无法`'abcd'`通过`$(this).val()`. （警告：我只在 Chrome 中测试过。）

`myDOMelement.checkValidity()`但是，您可以通过调用或查看对象的各个属性来确定 HTML5 输入有效性约束是否满足（有效）`myDOMelement.validity`。这至少可以让您区分空白字段（有效）和包含“ **abcd** ”（无效）的字段。[在这里](http://www.html5rocks.com/en/tutorials/forms/constraintvalidation/)查看更多关于 HTML5 有效性的信息。

至少在 Chrome 中，相当令人困惑的是，如果一个`<input type='number'>`元素最初是空白的，然后您输入“ **abcd** ”，则该`'change'`事件***不会***在模糊时触发。同样，当您从字段中删除“ **abcd** ”时，该字段变为空白。

一种解决方法是测试模糊时 HTML5 有效性的变化。这是一个[jsFiddle](http://jsfiddle.net/Martin_ATS/qyKkY/)来说明该技术。请注意，您仍然无法判断用户是否已将“ **abcd** ”更改为“ **efgh** ”，因为它们都无效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T18:48:12.197

事件更改在失去焦点时触发，它按预期工作，您可能需要使用`keyup`.

**[现场演示](http://jsfiddle.net/rajaadil/w7bLu/1/)**

```
$('input').on('keyup', function() {
    alert('change');
}); 
```*

# java - Java - 如何将我的 ArrayList 写入文件，并将该文件读取（加载）到原始 ArrayList？

> ID：16111496
> 
> 赞同：28
> 
> 时间：2013-04-19T18:44:27.067
> 
> 标签：java, arraylist, text-files, inputstream, outputstream

我正在用 Java 编写一个程序，它显示了一系列课后俱乐部（例如足球、曲棍球 - 由用户输入）。俱乐部被添加到以下内容中`ArrayList`：

```
private ArrayList<Club> clubs = new ArrayList<Club>(); 
```

通过以下方法：

```
public void addClub(String clubName) {
    Club club = findClub(clubName);
    if (club == null)
        clubs.add(new Club(clubName));
} 
```

'Club' 是一个带有构造函数的类 - 名称：

```
public class Club {

    private String name;

    public Club(String name) {
        this.name = name;
    }

    //There are more methods in my program but don't affect my query..
} 
```

我的程序正在运行 - 它让我可以在我的数组列表中添加一个新的俱乐部对象，我可以查看数组列表，我可以删除任何我想要的等等。

但是，我现在想将该 arrayList (clubs) 保存到一个文件中，然后我希望能够稍后加载该文件并且相同的 arraylist 再次存在。

我有两种方法（见下文），并且一直试图让它工作但没有任何运气，任何帮助或建议将不胜感激。

保存方法（文件名由用户选择）

```
public void save(String fileName) throws FileNotFoundException {
    String tmp = clubs.toString();
    PrintWriter pw = new PrintWriter(new FileOutputStream(fileName));
    pw.write(tmp);
    pw.close();
} 
```

加载方法（当前代码不会运行 - 文件是字符串但需要是俱乐部？

```
public void load(String fileName) throws FileNotFoundException {
    FileInputStream fileIn = new FileInputStream(fileName);
    Scanner scan = new Scanner(fileIn);
    String loadedClubs = scan.next();
    clubs.add(loadedClubs);
} 
```

我还使用 GUI 来运行应用程序，此时，我可以单击“保存”按钮，然后我可以输入名称和位置并保存它。该文件出现并且可以在记事本中打开，但显示为 Club@c5d8jdj （对于我列表中的每个俱乐部）

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2013-04-19T19:04:42.697

您应该使用 Java 的内置序列化机制。要使用它，您需要执行以下操作：

1.  将类声明`Club`为实现`Serializable`：

    ```
    public class Club implements Serializable {
        ...
    } 
    ```

    这告诉 JVM 可以将类序列化为流。您不必实现任何方法，因为这是一个标记接口。

2.  要将列表写入文件，请执行以下操作：

    ```
    FileOutputStream fos = new FileOutputStream("t.tmp");
    ObjectOutputStream oos = new ObjectOutputStream(fos);
    oos.writeObject(clubs);
    oos.close(); 
    ```

3.  要从文件中读取列表，请执行以下操作：

    ```
    FileInputStream fis = new FileInputStream("t.tmp");
    ObjectInputStream ois = new ObjectInputStream(fis);
    List<Club> clubs = (List<Club>) ois.readObject();
    ois.close(); 
    ```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-04-19T18:55:25.757

作为练习，我建议执行以下操作：

```
public void save(String fileName) throws FileNotFoundException {
    PrintWriter pw = new PrintWriter(new FileOutputStream(fileName));
    for (Club club : clubs)
        pw.println(club.getName());
    pw.close();
} 
```

这会将每个俱乐部的名称写在文件的新行上。

> ```
> Soccer
> Chess
> Football
> Volleyball
> ... 
> ```

我会把负载留给你。**提示**：你一次写一行，然后你可以一次读一行。

Java 中的每个类都扩展了`Object`该类。因此，您可以覆盖其方法。在这种情况下，您应该对该`toString()`方法感兴趣。在您的`Club`班级中，您可以覆盖它，以您想要的任何格式打印有关班级的一些消息。

```
public String toString() {
    return "Club:" + name;
} 
```

然后，您可以将上面的代码更改为：

```
public void save(String fileName) throws FileNotFoundException {
    PrintWriter pw = new PrintWriter(new FileOutputStream(fileName));
    for (Club club : clubs)
         pw.println(club); // call toString() on club, like club.toString()
    pw.close();
} 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2016-05-03T16:01:42.453

在 Java 8 中，您可以使用带两个参数的[Files.write()](https://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#write(java.nio.file.Path,%20java.lang.Iterable,%20java.nio.charset.Charset,%20java.nio.file.OpenOption...))`Path`方法：和`List<String>`，如下所示：

```
List<String> clubNames = clubs.stream()
    .map(Club::getName)
    .collect(Collectors.toList())

try {
    Files.write(Paths.get(fileName), clubNames);
} catch (IOException e) {
    log.error("Unable to write out names", e);
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-19T19:04:28.117

这可能对你有用

```
public void save(String fileName) throws FileNotFoundException {
FileOutputStream fout= new FileOutputStream (fileName);
ObjectOutputStream oos = new ObjectOutputStream(fout);
oos.writeObject(clubs);
fout.close();
} 
```

要回读，您可以拥有

```
public void read(String fileName) throws FileNotFoundException {
FileInputStream fin= new FileInputStream (fileName);
ObjectInputStream ois = new ObjectInputStream(fin);
clubs= (ArrayList<Clubs>)ois.readObject();
fin.close();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-19T18:55:50.117

```
ObjectOutputStream.writeObject(clubs)
ObjectInputStream.readObject(); 
```

此外，您的“添加”逻辑在逻辑上等同于使用 Set 而不是 List。列表可以有重复项，而集合则不能。你应该考虑使用一套。毕竟，你真的可以在同一所学校拥有2个国际象棋俱乐部吗？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-04-27T19:22:46.993

保存和加载一个公共静态ArrayList data = new ArrayList();

我曾经（写）...

```
static void saveDatabase() {
try {

        FileOutputStream fos = new FileOutputStream("mydb.fil");
        ObjectOutputStream oos = new ObjectOutputStream(fos);
        oos.writeObject(data);
        oos.close();
        databaseIsSaved = true;         

    }
catch (IOException e) {
        e.printStackTrace();
}

} // End of saveDatabase 
```

并用于（阅读）...

```
static void loadDatabase() {

try {           
        FileInputStream fis = new FileInputStream("mydb.fil");
        ObjectInputStream ois = new ObjectInputStream(fis);         
        data = (ArrayList<User>)ois.readObject();
        ois.close();            
    }       
catch (IOException e) {
        System.out.println("***catch ERROR***");
        e.printStackTrace();

    }       
catch (ClassNotFoundException e) {
        System.out.println("***catch ERROR***");
        e.printStackTrace();
    }   
} // End of loadDatabase 
```

# maven - 安装 Tomcat 后安装 Jetty

> ID：16111497
> 
> 赞同：0
> 
> 时间：2013-04-19T18:44:27.640
> 
> 标签：maven, tomcat, jetty

我一直在使用与 Eclipse 集成的 Tomcat，现在我想在没有 Eclipse 的情况下尝试使用 maven 的 Jetty（我现在不使用 m2Eclipse）。我知道 Jetty 正在使用 tomcat 作为容器，并且端口仍然是默认的 8080。在做任何鲁莽的事情并搞砸我的设置之前，我想知道是否会出现任何冲突，以及需要注意的事项。如果我只是将 jetty-plugin 放在单独的项目中的 pom.xml 中，那会影响我在 Eclipse 上构建的其他项目吗？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T20:28:12.813

如果你想运行 jetty 并且已经在端口 8080 上运行了 tomcat，那么这将不起作用，只有一个或另一个可以使用单个端口。解决方案很简单，要么在 jetty-maven-plugin 配置（8090？）中设置不同的端口，要么不设置端口，并且在运行的插件的输出中将有一行关于 SelectChannelConnector 或 ServerConnector 从端口 ## 开始#. 只需在浏览器中使用该端口即可。

[编辑] 我还要注意，如果您在 8080 上运行 tomcat，并且您启动 jetty 并尝试使用 8080，则*jetty*进程将失败并且 tomcat 进程将完全不受影响。就好像我们的角色互换了一样。

# ruby-on-rails - Cloud Foundry Rails - Multi-tenancy based on subdomain

> ID：16111506
> 
> 赞同：0
> 
> 时间：2013-04-19T18:45:10.673
> 
> 标签：ruby-on-rails, subdomain, cloud-foundry

My rails application currently works as follows:

In the database, there are tenants, also known as 'companies'. Everything in the database belongs to one of these companies, and so have a company_id attribute in order to separate them.

My application determines which company to use based on the subdomain in the link inputted by the user, so for example:

apple.myapplicationsnamehere.com

Should look at the companies in my database, and find out which one is called "apple", then separate all of the data by apples ID.

This works fine on the localhost (if you're wondering how this is possible, I used a redirect to my localhost that I found online - [http://apple.lvh.me:3000/](http://apple.lvh.me:3000/))

However, this does not work on Cloud Foundry.

I have tried to use vmc's map function to create the Url: apple.myapplicationsnamehere.cloudfoundry.com, but this does not work, and simply appending a subdomain to my application doesn't work either.

Does anyone know of any way around this? Or perhaps I'm missing something? The database was seeded with caldecott already, so the companies certainly exist in the database.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-11T14:55:54.490

您应该能够运行：

vmc 映射 myapplicationnamehere apple.myapplicationsnamehere.com

vmc 映射 myapplicationnamehere orange.myapplicationsnamehere.com

vmc 映射 myapplicationnamehere pear.myapplicationsnamehere.com

虽然我不相信您可以设置通配符匹配，但每次将新公司添加到您的环境中时，您都需要运行 vmc 命令。

# c# - 将 Object 序列化为 byte[]，然后加密 byte[]

> ID：16111507
> 
> 赞同：-1
> 
> 时间：2013-04-19T18:45:12.913
> 
> 标签：c#, .net, encryption

我遇到了一种情况，我需要加密一个对象才能通过 .NET Remoting 连接发送它以进行传递。我已经在我们的代码中实现了字符串加密，所以我使用了类似的设计来加密对象：

```
public static byte[] Encrypt(object obj)
    {
        byte[] bytes = ToByteArray(toEncrypt); // code below
        using (SymmetricAlgorithm algo = SymmetricAlgorithm.Create())
        {
           using (System.IO.MemoryStream ms = new System.IO.MemoryStream())
           {
              byte[] key = Encoding.ASCII.GetBytes(KEY);
              byte[] iv = Encoding.ASCII.GetBytes(IV);
              using (CryptoStream cs = new CryptoStream(ms, algo.CreateEncryptor(key, iv), CryptoStreamMode.Write))
              {
                 cs.Write(bytes, 0, bytes.Length);
                 cs.Close();
                 return ms.ToArray();
              }
           }
        }
    }

private static byte[] ToByteArray(object obj)
      {
         byte[] bytes = null;
         if (obj != null)
         {
            using (System.IO.MemoryStream ms = new System.IO.MemoryStream())
            {
               BinaryFormatter bf = new BinaryFormatter();
               bf.Serialize(ms, obj);
               bytes = ms.ToArray();
            }
         }
         return bytes;
      } 
```

通过以这种方式序列化和加密对象，我需要注意什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T20:08:14.350

这里的目标到底是什么？如果您只对在线数据的安全性感兴趣，那么既然您使用的是支持透明加密的 .NET 远程处理，为什么不使用它，而不是自己去实现它呢？

如果您确实坚持执行自己的加密，那么值得注意的是您似乎使用的是常量 IV，这是不正确的。IV 应该是一个随机字节数组，并且对于每个加密消息都不同。这通常在传输之前添加到加密消息以用于解密过程。

进一步说明，由于您的密钥和 IV 都是使用 Encoding.ASCII.GetBytes 从字符串转换而来的，它适用于 7 位 ASCII 输入，因此您正在显着减少有效密钥空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T18:52:46.843

我唯一能想到的是，通常在加密数据后，您应该使用 NULL 覆盖纯文本数组。这样就无法在内存中恢复纯文本，并且如果将其以页面文件或交换的形式写入磁盘，恶意程序/用户将无法恢复。如果数据的敏感性不是问题，这可能没有必要，但这是一个好习惯。

编辑：

然而，话虽如此，如果你不需要（你很少这样做），就不要*自己动手。**除非您真的*知道自己在做什么，否则很有可能您会搞砸它并使其容易受到攻击。如果您不了解或不喜欢内置 API，[Bouncy Castle](http://www.bouncycastle.org/csharp/)的绅士们在创建供您使用的库方面做得非常出色，并且使用了许多不同的语言。

# filepicker.io - Filepicker.io rendered images don't thumbnail in Twitter

> ID：16111518
> 
> 赞同：0
> 
> 时间：2013-04-19T18:46:12.293
> 
> 标签：filepicker.io

We're just starting to use Filepicker.io in a project and had a question about rendering thumbnails. Our [first test image](https://www.filepicker.io/api/file/1S7rGZDSRX2OF3x9bxb1) does not appear to be recognized by Twitter as an image. This means that all the user will see is a link instead of the thumbnail.

Is there any way around this behaviour, perhaps with some sort of custom URL or optional parameter?

**UPDATE**

Here's the code I'm using:

```
<div class="upload-image">Drop files here</div>

// init filepicker plugin
filepicker.makeDropPane($('.upload-image'), {
    multiple: true,
    dragEnter: function() {
        $(".upload-image").html("Drop to upload").css({
            'backgroundColor': "#E0E0E0",
            'border': "1px solid #000"
        });
        console.log('enter');
    },
    dragLeave: function() {
        $(".upload-image").html("Drop files here").css({
            'backgroundColor': "#F6F6F6",
            'border': "1px dashed #666"
        });
    },
    onSuccess: function(fpfiles) {
        $(".upload-image").text("Done, see result below");
        $.sticky('Your file was uploaded successfully.');
        console.log(JSON.stringify(fpfiles));
    },
    onError: function(type, message) {
        // $("#localDropResult").text('('+type+') '+ message);
        $.sticky('Your file was uploaded successfully.');
    },
    onProgress: function(percentage) {
        $(".upload-image").text("Uploading ("+percentage+"%)");
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T01:38:33.433

如果 twitter（或实际上任何其他服务）正在执行简单的正则表达式、基于 url 的文件是否是图像的确定，您可以做的一件事是在图像的末尾附加一个 +filename.jpg。例如：

[https://www.filepicker.io/api/file/JhJKMtnRDW9uLYcnkRKW](https://www.filepicker.io/api/file/JhJKMtnRDW9uLYcnkRKW)和 [https://www.filepicker.io/api/file/JhJKMtnRDW9uLYcnkRKW+fry.png](https://www.filepicker.io/api/file/JhJKMtnRDW9uLYcnkRKW+fry.png)

两者都指向相同的内容，但 twitter 可能更喜欢第二个。

# java - Foursquare 多请求收到 400 个错误请求

> ID：16111522
> 
> 赞同：0
> 
> 时间：2013-04-19T18:46:20.907
> 
> 标签：java, geolocation, foursquare

我正在向foursquare api调用一个多请求，如下所示：

```
 https://api.foursquare.com/v2/multi?%2Fvenues%2Fsearch%3Fll%3D33.859868%2C-117.886133%26query%3DTarget,%2Fvenues%2Fsearch%3Fll%3D33.859868%2C-117.886133%26query%3DNordstrom&intent=browse&radius=16093&oauth_token=WS10PQFRUXACDDIJMN3JEEIHFOPA1UTMRZP0E41MWAF0HHJL&v=20130419 
```

oAuth 令牌是向公众开放的通用使用令牌

我正在使用以下 java 代码创建 url：

```
 String baseUrl  = "https://api.foursquare.com/v2";
    String action = "/multi?";
    String request1 = "/venues/search?ll=33.859868,-117.886133&query=Target";
    String requestEnc1 = URLEncoder.encode(request1);
    String request2 = "/venues/search?ll=33.859868,-117.886133&query=Nordstrom";
    String requestEnc2 = URLEncoder.encode(request2);
    String commonParams = "&intent=browse&radius=16093&oauth_token=WS10PQFRUXACDDIJMN3JEEIHFOPA1UTMRZP0E41MWAF0HHJL&v=20130419"; 
```

我收到了 400 个错误请求。但是，这看起来类似于此处文档中的示例：

```
 https://developer.foursquare.com/docs/multi/multi 
```

url的构造方式有问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T18:55:28.890

如果您在浏览器中打开该 URL，您会看到 Foursquare 返回的错误消息是`errorDetail: "Must provide parameter requests"`. 您没有正确构建调用：[https ://developer.foursquare.com/docs/multi/multi](https://developer.foursquare.com/docs/multi/multi)

# javascript - Add description to lightbox image

> ID：16111523
> 
> 赞同：0
> 
> 时间：2013-04-19T18:46:22.543
> 
> 标签：javascript, jquery, image, lightbox

I'm using this lightbox plugin: [http://s.codepen.io/schadeck/pen/gjbqr](http://s.codepen.io/schadeck/pen/gjbqr)

I would like to know if there is any way to add a simple description attribute in my current code.

What I want to achieve is a description text on the bottom of the image in the lightbox. I've looked for a solution, but nothing seems to apply for the lightbox.js script I'm using.

Here is the code:

```
jQuery(document).ready(function($) {

  // global variables for script
  var current, size;

  $('.lightboxTrigger').click(function(e) {

    // prevent default click event
    e.preventDefault();

    // grab href from clicked element
    var image_href = $(this).attr("href");  

    // determine the index of clicked trigger
    var slideNum = $('.lightboxTrigger').index(this);

    // find out if #lightbox exists
    if ($('#lightbox').length > 0) {        
      // #lightbox exists
      $('#lightbox').fadeIn(300);
      // #lightbox does not exist - create and insert (runs 1st time only)
    } else {                                
      // create HTML markup for lightbox window
      var lightbox =
          '<div id="lightbox">' +
          '<p>Clique para fechar</p>' +
          '<div id="slideshow">' +
          '<ul></ul>' +        
          '<div class="nav">' +
          '<a href="#prev" class="prev slide-nav">Anterior</a>' +
          '<a href="#next" class="next slide-nav">Proxima</a>' +
          '</div>' +
          '</div>' +
          '</div>';

      //insert lightbox HTML into page
      $('body').append(lightbox);

      // fill lightbox with .lightboxTrigger hrefs in #imageSet
      $('#imageSet').find('.lightboxTrigger').each(function() {
        var $href = $(this).attr('href');
        $('#slideshow ul').append(
          '<li>' +
          '<img src="' + $href + '">' +
          '</li>'
        );
      });

    }

    // setting size based on number of objects in slideshow
    size = $('#slideshow ul > li').length;

    // hide all slide, then show the selected slide
    $('#slideshow ul > li').hide();
    $('#slideshow ul > li:eq(' + slideNum + ')').show();

    // set current to selected slide
    current = slideNum;
  });

  //Click anywhere on the page to get rid of lightbox window
  $('body').on('click', '#lightbox', function() { // using .on() instead of .live(). more modern, and fixes event bubbling issues
    $('#lightbox').fadeOut(300);
  });

  // show/hide navigation when hovering over #slideshow
  $('body').on(
    { mouseenter: function() {
      $('.nav').fadeIn(300);
    }, mouseleave: function() {
      $('.nav').fadeOut(300);
    }
    },'#slideshow');

  // navigation prev/next
  $('body').on('click', '.slide-nav', function(e) {

    // prevent default click event, and prevent event bubbling to prevent lightbox from closing
    e.preventDefault();
    e.stopPropagation();

    var $this = $(this);
    var dest;

    // looking for .prev
    if ($this.hasClass('prev')) {
      dest = current - 1;
      if (dest < 0) {
        dest = size - 1;
      }
    } else {
      // in absence of .prev, assume .next
      dest = current + 1;
      if (dest > size - 1) {
        dest = 0;
      }
    }

    // fadeOut curent slide, FadeIn next/prev slide
    $('#slideshow ul > li:eq(' + current + ')').fadeOut(750);
    $('#slideshow ul > li:eq(' + dest + ')').fadeIn(750);

    // update current slide
    current = dest;
  });

}); 
```

HTML:

```
<ul id="imageSet">
<li><a href="" class="lightboxTrigger"><img src="" title=""></a></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T18:57:33.133

我没有看过脚本，但你可以试试这个：

```
 var desc = ['some description title', 'another description title', 'etc'];

  $('body').append(lightbox);

  // fill lightbox with .lightboxTrigger hrefs in #imageSet
  $('#imageSet').find('.lightboxTrigger').each(function(index) {
    var $href = $(this).attr('href');
    $('#slideshow ul').append(
      '<li>' +
      '<img src="' + $href + '">' +
      '<span>' + desc[index] + '</span>' +
      '</li>'
    );
  }); 
```

# java - 如何在 Java 中重置/清除 JRadioButton

> ID：16111525
> 
> 赞同：0
> 
> 时间：2013-04-19T18:46:24.983
> 
> 标签：java, swing, jradiobutton

你如何重置/清除 a `JRadiobutton`？清除 a 和清除 a`TextField`一样简单，`surenameField.setText("");`有没有类似的方法`RadioButton`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T19:05:34.687

你的意思是

```
radioButton.setSelected(false); 
```

?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T19:05:33.327

如果你想清除一个`JRadioButton`命名的文本`radio`，你会调用`radio.setText("")`. 如果要取消选择该按钮，请调用`radio.setSelected(false)`。请注意，这实际上不会触发事件，因此如果您注册了一个侦听器以响应取消选择事件，则不会通知该侦听器。

有关更多信息，您可以阅读`JRadioButton`此处的官方文档

[JRadioButton API](http://docs.oracle.com/javase/6/docs/api/javax/swing/JRadioButton.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T19:06:06.160

你能具体说明“重置”是什么意思吗？

以下情况是可能的：

*   从程序中删除按钮：您可以通过从其容器中调用 remove 方法来完成此操作（`[container].remove([radioButton]`例如`myPanel.remove(myRadioButton)`.
*   从按钮中删除文本：您可以通过执行您设置的操作来做到这一点：`myRadioButton.setText("")`

# python - Matplotlib monitor - plot values from table every X seconds

> ID：16111529
> 
> 赞同：1
> 
> 时间：2013-04-19T18:46:42.673
> 
> 标签：python, matplotlib

I'm new to python and matplotlib and need a few pointers. I'm trying to write a monitor that queries a table and plots the results. from the table I can extract a timestamp I'd like to use for the X axis and a #of seconds I'd like to use for the Y value (number of packets sent). I'm not sure where "i" is populated for the animate function. My plot comes up but is empty. I'm not sure what ax.set_xlim should be set to and finally how do I get the date/timestamp to show up on the x-axis? Im trying to modify the following example:

```
import numpy as np
from matplotlib import pyplot as plt
from matplotlib import animation

fig = plt.figure()
ax = plt.axes(ylim=(0, 45))
line, = ax.plot([], [], lw=5)

def init():
    line.set_data([], [])
    return line,

def animate(i):
    x,y,dk=getData()
    line.set_data(x, y)
    return line,

def Execute():
    #anim = animation.FuncAnimation(fig, animate, init_func=init, frames=200, interval=200, blit=True)
    anim = animation.FuncAnimation(fig, animate, init_func=init, frames=200, interval=2000)
    plt.show()
    return(anim)

def getDataSql(sql):
    ... run sql
    return(rl)

def getData():
    ...format return for getDataSql 
    ...return X ex(2013-04-12 18:18:24) and Y ex(7.357) (both are lists)
    return(X,Y,xy)

x=Execute() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T19:39:14.630

```
def Execute():
    anim = animation.FuncAnimation(fig, animate, init_func=init, frames=200, interval=2000, blit=True)
    plt.show() 
    return anim

anim = Execute() 
```

如果您不返回其中的`anim`对象（其中包含所有计时器等），它会在`Execute`返回时被垃圾收集，这会删除所有这些对象，因此您的动画不会运行。

您也可以使用 进行测试`blit=False`，它有点慢（这不是问题，因为您正在更新每 2 秒），但要正常工作有点不那么麻烦。

也试试

```
ax.get_xaxis().set_major_locator(matplotlib.dates.AutoDateLocator())
ax.get_xaxis().set_major_formatter(matplotlib.dates.AutoDateFormatter()) 
```

在你运行任何东西之前。

# ruby-on-rails - 通过标头或 URL 参数传递语言环境不会更改 rails 默认语言环境

> ID：16111533
> 
> 赞同：0
> 
> 时间：2013-04-19T18:46:57.970
> 
> 标签：ruby-on-rails, ruby, internationalization

当我尝试通过参数语言环境发出请求时，i18n 不会更改默认语言环境

应用控制器

```
before_filter :set_locale
respond_to :json

def set_locale
  I18n.locale = params[:locale] || I18n.default_locale
end 
```

我的模特

```
class FoodType < ActiveRecord::Base

  default_scope where(locale: I18n.locale) 
```

FoodTypesController

```
def index   
  render json: FoodType.all
end 
```

但在控制台中，查询不会改变。仍然通过先前请求的语言环境

```
passing locale = pt-BR 

FoodType Load (0.4ms)  SELECT "food_types".* FROM "food_types" WHERE "food_types"."locale" = 'en' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T18:50:48.060

在加载 FoodType 类时评估您的范围。这意味着它将始终具有相同的（初始）值。您需要对这样的范围使用 lambda，这些范围因某些外部变量而异（时间是另一个示例）：

```
default_scope, lambda { where(locale: I18n.locale) } 
```

# c - Delphi 记录：我们可以做聚合赋值吗？

> ID：16111535
> 
> 赞同：0
> 
> 时间：2013-04-19T18:47:03.377
> 
> 标签：c, delphi, records

有没有办法像我们在 C 和 C++ 中那样对 Delphi 记录执行聚合分配？即是否有以下等效语法：

```
struct silly { int x; int y; };
// ...
silly s = { 4, 5 }; 
```

德尔福？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T18:51:47.797

不，没有确切的等价物。但是，您可以做一些类似的事情。

例如，如果

```
type
  TTestRecord = record
    A, B, C: integer;
    D, E, F: boolean;
  end; 
```

和

```
var
  R1, R2: TTestRecord; 
```

那么你可以做

```
R1 := R2; 
```

因此，您可以按值将一条记录分配给另一条记录。但是您不能在代码中指定“记录文字”。然而，相当接近它的东西很常见：如果你这样做

```
function TestRecord(A, B, C: integer; D, E, F: boolean): TTestRecord;
begin
  result.A := A;
  result.B := B;
  result.C := C;
  result.D := D;
  result.E := E;
  result.F := F;
end; 
```

然后你可以写

```
R1 := TestRecord(1, 2, 3, true, false, true) 
```

例如，这就是您如何处理`TRect`和`TPoint`. 有辅助函数`Rect`和`Point`在`Classes.pas`.

**顺便说一句：**在*常量*声明中，您可以做更多事情：

```
const
  R: TTestRecord = (A: 1; B: 2; C: 3; D: true; E: false; F: true); 
```

# foreach - 在 Erlang 中理解和使用 foreach

> ID：16111542
> 
> 赞同：5
> 
> 时间：2013-04-19T18:47:36.620
> 
> 标签：foreach, erlang

我的任务是用 7 种语言完成凯撒密码。我目前正在努力完成它 Erlang。我之前接触过函数式语言，所以我大致了解我需要做什么。我特别难以理解 Erlang 中 foreach 函数的用法。我知道当你对副作用感兴趣时会使用它，所以我很确定这是做我想做的事情的“正确”方式。我在这里阅读[了Erlang 语言参考中的](http://www.erlang.org/doc/man/lists.html#foreach-2)[这个答案](https://stackoverflow.com/questions/14443059/iterate-through-each-file-in-a-directory/14449469#14449469)和 foreach 的定义。但是，我仍然有点困惑并且无法正确使用语法。

```
-module(caesar).
-export([main/2]).  

enc(Char,Key) when (Char >= $A) and (Char =< $Z) or
               (Char >= $a) and (Char =< $z) -> 
Offset = $A + Char band 32, N = Char - Offset,
Offset + (N + Key) rem 26;

enc(Char, _Key) ->  Char.

encMsg(Msg, Key) ->
   lists:map(fun(Char) -> enc(Char, Key) end, Msg).

main(Message, Key) -> 

Encode = (Key), 
Decode = (-Key),
Range = lists:seq(1,26),

io:format("Message: : ~s~n", [Message]),
Encrypted = encMsg(Message, Encode),
Decrypted = encMsg(Encrypted, Decode),

io:format("Encrypted:  ~s~n", [Encrypted]), 
io:format("Decrypted: ~s~n", [Decrypted]),
io:format("Solution: ").
    %% Foreach belongs here, should execute Encrypted = encMsg(Message, N) where
    %% N is the value in Range for each value in the list, and then print Encrypted. 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-19T19:07:40.303

语法类似于您已经编写的列表：映射。这需要一个乐趣和清单。乐趣应该有一个论点。它将被称为传递列表中的每个值。

```
lists:foreach(fun(N) ->
                      Encr = encMsg(Message, N),
                      io:format("Key:~p Encrypted: ~p",[N,Encr])
              end, Range). 
```

# python - 每次输入字符时，如何让 Tkinter 输入框重复一个功能？

> ID：16111544
> 
> 赞同：2
> 
> 时间：2013-04-19T18:47:47.960
> 
> 标签：python, tkinter

我正在尝试创建一个基本的电子邮件客户端来娱乐。我认为如果密码框显示随机字符会很有趣。我已经有一个创建随机字符的功能：

```
import string
import random

def random_char():

    ascii = string.ascii_letters
    total = len(string.ascii_letters)
    char_select = random.randrange(total)

    char_choice = char_set[char_select]

    return char_choice 
```

但问题是这只运行一次，然后程序无限期地重复该字符。

```
 self.Password = Entry (self, show = lambda: random_char())
    self.Password.grid(row = 1, column = 1) 
```

**每次输入字符时，如何让 Entry 小部件重新运行该功能？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T05:31:56.047

Unfortunately, the `show` attribute of the `Entry` widget doesn't work that way: as you've noticed, it simply specifies a single character to show instead of what characters were typed.

To get the effect you want, you'll need to intercept key presses on the `Entry` widget, and translate them, then. You have to be careful, though, to only mutate keys you really want, and leave others (notably, Return, Delete, arrow keys, etc). We can do this by binding a callback to all key press events on the Entry box:

```
self.Password.bind("<Key>", callback) 
```

where `callback()` is defined to call your random function if it's an ascii letter (which means numbers pass through unmodified), insert the random character, and then return the special `break` string constant to indicate that no more processing of this event is to happen):

```
def callback(event):
    if event.char in string.ascii_letters:
        event.widget.insert(END, random_char())
        return "break" 
```

# apache - 使用 RewriteEngine 直接离开被拒绝的目录

> ID：16111545
> 
> 赞同：0
> 
> 时间：2013-04-19T18:47:49.157
> 
> 标签：apache, mod-rewrite, permissions

## 设置

*   根/

    *   .htaccess：

        ```
        Deny from All
        RewriteEngine On
        RewriteRule secret.txt /root/public/welcome.txt 
        ```

    *   秘密.txt

    *   上市/

        *   .htaccess：

            ```
            Allow from All 
            ```

        *   欢迎.txt

## 问题

请求`/root/secret.txt`导致 403（禁止）响应告诉我我无权访问`/root/secret.txt`. （允许直接请求`/root/public/welcome.txt`。）

因此，在我看来，对指令拒绝的请求`RewriteEngine` *没有任何作用。*`Deny from All`

## 问题

如果有人知道一种获得预期`/root/public/welcome.txt`服务的方法，那就太好了。但是，如果有人可以帮助我实现我的最终目标，那就更好了。

## 目标

我决定写下我的最终目标，因为也许我只是在寻找错误的方向。

我想`Deny from All`在根目录中，并让子目录决定何时用`Allow`. 然后我还希望 Apache 将所有*会导致 403 或 404 的*请求重写为单个特定文件。到目前为止，我打算用一个`!-U`标志来做这件事，但我无法解决我最初的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T05:29:13.380

你可以在根目录下的 .htaccess 文件中试试这个：

```
Deny from All

ErrorDocument 404 /Error403_404.php
ErrorDocument 403 /Error403_404.php 
```

“Error403_404.php”就是一个例子。替换为 403 和 404 错误处理程序脚本。

# sql - 简单的 sqlplus 脚本似乎不起作用

> ID：16111547
> 
> 赞同：0
> 
> 时间：2013-04-19T18:47:55.413
> 
> 标签：sql, plsql, sqlplus

当我输入：

```
C:\>sqlplus user/pass@OMP1 @CheckRowCount.sql 
```

它连接但我没有看到任何结果，在 .sql 文件中我有这个：

```
SELECT COUNT(*) as "rowcount" FROM dmsn.ds3r_1xrtt_voice_trigger; 
```

我也试过这个

```
C:\>sqlplus user/pass@OMP1 SELECT COUNT(*) as "rowcount" FROM dmsn.ds3r_1xrtt_voice_trigger; 
```

但我得到的只是在 CMD 窗口中使用的 sql*plus 命令

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T19:03:46.623

You don't get anything in this way, if you want result from a script you must add a spool command to you script.

`spo result.txt;`

`SELECT COUNT(*) as "rowcount" FROM dmsn.ds3r_1xrtt_voice_trigger;`

`spo off;`

Then execute `C:\>sqlplus user/pass@OMP1 @CheckRowCount.sql` and open `result.txt` to see result.

Anyway for single script like this above just put it in sql> prompt and see what happens.

# linux - 如何将 GNU Screen 复制缓冲区复制到剪贴板？

> ID：16111548
> 
> 赞同：76
> 
> 时间：2013-04-19T18:48:02.240
> 
> 标签：linux, terminal, copy-paste, gnu-screen, gnome-terminal

使用**GNU Screen**时，我们可以使用命令使用**回滚缓冲区**，也称为**“复制模式”**`Ctrl+a+[`。

在那里，我们可以通过按下选择文本并再次按下来将文本复制到**复制缓冲区。**`space``space`

**有没有办法将此文本从屏幕复制缓冲区复制到 X 剪贴板？**

在我的例子中，我使用 Ubuntu 12.04 和 gnome 和 Xorg。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-04-29T19:25:36.280

您可以使用 CLI 剪贴板工具（如[`xsel`](http://linux.die.net/man/1/xsel)or ）[`pbpaste`](https://developer.apple.com/library/mac/documentation/Darwin/Reference/ManPages/man1/pbpaste.1.html)和`cat`实用程序从 STDIN 中获取内容。Linux 上的步骤`xsel`如下：

1.  将屏幕会话中的文本复制到 GNU 屏幕的复制缓冲区中。
2.  在屏幕中运行此命令：`cat | xsel -b`
3.  如果`xsel`没有报告任何错误，现在将屏幕的复制缓冲区转储到 STDIN：`Ctrl+a+]`
4.  发送 EOF`cat`以终止它：`Ctrl+d`

此时，屏幕复制缓冲区的内容应该在剪贴板中。

编辑：与所有 X 程序一样，`xsel`需要知道如何联系 X 服务器才能访问剪贴板。您应该`DISPLAY`适当地设置环境变量。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2017-05-08T10:27:14.490

此答案仅适用于您的最终目标是立即粘贴复制的缓冲区内容的情况。

最简单的方法是将屏幕分成两个区域。你可以通过点击`CTRL`+`a`然后`|`^(*'这不是一个i来做到这一点。这是键盘上的 PIPE 标志'*)

点击`CTRL`+`a`然后`TAB`切换到第二个区域，然后点击`CTRL`+在第二个区域中创建一个新会话。`a``c`

如果要从 nano 复制并粘贴到终端，请在左侧区域的 nano 中打开文件，点击`CTRL`+`a`然后`ESC`，滚动到复制位置的起点并点击`SPACE`，通过滚动到终点选择文本并点击`SPACE`再次标记副本。

现在，您所要做的就是点击`CTRL`+ `a`then`TAB`切换到您右侧的区域并点击`CTRL`+ `a`then `]`。

您的文本将被写入命令行。请注意，如果您想直接写入文件，也可以检查硬拷贝选项。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2014-08-18T17:32:11.757

这个答案适用于 OS X。

[使用复制模式](http://web.mit.edu/gnu/doc/html/screen_11.html)将所需文本复制到 GNU Screen 粘贴缓冲区后，请执行以下操作：

1.  在任何屏幕窗口中，键入`pbcopy <enter>`.
2.  [然后使用 GNU Screen paste 命令](http://web.mit.edu/gnu/doc/html/screen_11.html#SEC70)将您的文本粘贴到终端中（`Ctrl-a ]`除非您更改了转义键）。
3.  如果文本没有以换行符结尾，请按`<enter>`插入一个。
4.  最后，按`Ctrl-d`将`pbcopy`文本推送到系统剪贴板。

`Command-v`然后，您可以像往常一样使用或等效的菜单选项将文本粘贴到 OS X 的其他位置。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2016-12-10T00:18:02.227

有一种更简单、更少手动的方法可以做到这一点。在您的屏幕 .rc 文件中，添加以下行：

```
bindkey -m ' ' eval 'stuff \040' 'writebuf' 'exec sh -c "/usr/bin/pbcopy < /tmp/screen-exchange"' 
```

如何使用复制功能：

1.  `screen -c path/to/screen/config.rc`
2.  按 Ctrl+A 然后 Esc 进入复制模式。
3.  向上滚动文本缓冲区并找到要保留开始标记以进行复制的位置，然后点击空格。
4.  向下滚动并选择要复制的文本。完成后，再次点击空格。
5.  文本现在将在您的剪贴板中。

编辑：在没有 pbcopy 但有 clipit 的 Linux 上，您可以使用如下：

bindkey -m ' ' eval 'stuff \040' 'writebuf' 'exec sh -c "/bin/cat /tmp/screen-exchange | /bin/clipit"'

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2020-04-01T01:12:16.857

由于似乎没有人直接回答这个问题：

将所需的输出复制到缓冲区后，您需要

1.  使用新文件打开文本编辑器，即`vim somefile.txt`
2.  进入编辑模式，即`i`在 vim 中
3.  按下`Ctrl + a`然后`]`将您刚刚填充的缓冲区的内容转储到文本编辑器中

达达！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-03-07T04:52:11.123

如果您当前连接到服务器，请退出您的 ssh 终端会话。

如果您在 Mac OS 上使用 XQuartz，在服务器上使用 xsel。您应该通过在 xQuartz 应用程序菜单中选择 Preferences 来更新 XQuartz 粘贴板设置。

# XQuartz 设置：

[![在此处输入图像描述](https://i.stack.imgur.com/NCsje.png)](https://i.stack.imgur.com/NCsje.png)

ssh 进入远程机器并尝试运行：

```
xsel -p <<<"THIS IS A TEST". 
```

按 cmd + v 并应输出“这是一个测试”。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-05-25T17:18:34.733

我想要一种类似于@kungfuspider 的方式以编程方式执行此操作，并调整了他们的解决方案以适用于在 Windows 上运行的 Ubuntu WSL。

设置：

1.  下载[win32yank 可执行文件](https://github.com/equalsraf/win32yank/releases)并将其`win32yank.exe`放在有用的地方（我在其中创建了一个符号`/usr/bin`链接`ln -s <path to exe> /usr/bin/win32yank`）
2.  将以下内容放入`~/.screenrc`（来自@kungfuspider）。您可能需要修改命令以指向正确的`cat`位置`win32yank`。

> bindkey -m ' ' eval 'stuff \040' 'writebuf' 'exec sh -c "cat /tmp/screen-exchange | win32yank -i --crlf"'

3.  通过执行重新加载`~/.screenrc`而不杀死您的会话`CTRL+a` `:` `source ~/.screenrc`

如何使用：

1.  进入复制模式`CTRL+a` `[`
2.  使用 vim 风格的键移动或箭头键四处移动
3.  通过点击开始选择文本`space`
4.  通过再次点击突出显示所需的文本并完成复制`space`，文本现在应该在您的 Windows 剪贴板中，并且可以通过右键单击将其粘贴回 Ubuntu。

注意：使用 a 完成复制非常重要，`space`因为这是该`bindkey`命令用于映射的内容`win32yank`

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-04-19T19:46:57.310

如果您想要复制的只是一点点信息，只需用鼠标突出显示它，然后将其粘贴到您想要的位置。

如果您尝试获取大量信息，则可以将屏幕会话记录到文件中，然后您可以从文件中复制或清理一下，并将其用于操作说明

* * *

## 回答 #9

> 赞同：-4
> 
> 时间：2015-01-28T09:08:31.487

今天终于找到了一个鼠标解决方案：

按住**Ctrl**并用鼠标**右键单击**。显示复制/粘贴上下文菜单。

[https://michalzuber.wordpress.com/2015/01/28/gnu-screen-copy-paste-with-mouse/](https://michalzuber.wordpress.com/2015/01/28/gnu-screen-copy-paste-with-mouse/)上的一些屏幕

# jquery - 使用 jQuery 汇总相似的输入名称

> ID：16111550
> 
> 赞同：1
> 
> 时间：2013-04-19T18:48:11.080
> 
> 标签：jquery

我有一些动态创建的输入，其名称/ID 会增加。我想要：

1.  查找所有空白输入并用零填充它们
2.  将所有输入的数字加起来
3.  将该总数放入不同的输入中

我正在使用 jQuery 1.9.1。

像这样的行：

```
<input type="text" name="Amount1" id="Amount1" value="0" class="Amount">
<input type="text" name="Amount2" id="Amount2" value="" class="Amount">
<input type="text" name="Amount3" id="Amount3" value="10" class="Amount">
<input type="text" name="Amount4" id="Amount4" value="150" class="Amount"> 
```

并将总数放入：

```
<input type="text" name="Totals" id="Totals" value="" class="Totals"> 
```

这就是我认为可能有效，但甚至不接近的方法：

```
$('input[name^="Amount"]').each(function(){
    var emptyTextBoxes = $('input:text').filter(function() { return this.value == ""; });
    emptyTextBoxes.each(function() {
        //total up numbers
          ???
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T18:51:17.613

当然，这可以更容易地完成；第一条语句已经选择了您需要的所有输入字段：

```
var total = 0;

$('input[name^="Amount"]').each(function() {
    total += parseInt(this.value, 10) || 0;
});

$('#Totals').val(total); 
```

*`parseInt()`空值将返回`NaN`，因此我使用`|| 0`构造来有效地跳过它们（即添加`0`到总数中）。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T18:50:43.573

你可以总结一下：

```
var total = 0;

emptyTextBoxes.each(function() {
    total += parseInt(this.value, 10);
}); 
```

或者`.map()`在较新的浏览器上：

```
var total = emptyTextBoxes.map(function() {
    return parseInt(this.value, 10);
}).get().reduce(function(a, b) {
    return a + b;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T18:51:19.030

```
var total = 0;
$(".Amount").each(function() {
    if (this.value == '') { this.value = 0; }
    total += parseInt(this.value);
});
$('.Totals').val(total); 
```

[http://jsfiddle.net/jfGbq/](http://jsfiddle.net/jfGbq/)

# powershell - 使用 Export-CSV 将 sqlplus 查询结果导出到 CSV

> ID：16111554
> 
> 赞同：1
> 
> 时间：2013-04-19T18:48:25.467
> 
> 标签：powershell, sqlplus

我在 Powershell 2.0 中的 SQLPLUS 中运行一些查询

我想使用 Export-CSV 将表的内容输出到 csv。它看起来像这样。

```
$query = "set hea off`n"

$date1 = "ADD_MONTHS(TRUNC(SYSDATE, 'MM'),-3))"

$query += "DROP TABLE CHRIS_TEMP;CREATE TABLE CHRIS_TEMP AS SELECT FIELDS FROM TABLES;
exit;"

$sqlexec = ($query | sqlplus -s login/pass@db)

$sqlexec

$export= ("set wrap off 
set linesize 30000
select * from CHRIS_TEMP;" | sqlplus -s login/pass@db ) 
$export | Export-Csv   c:\users\*****\test.csv -notypeinformation 
```

但是输出都是一个字段。任何人都可以帮助解决这个问题吗？我不希望在 sqlplus 中输出 CSV。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T17:15:16.497

问题在于没有分隔符 Powershell 不知道您的数据是如何构成的。一旦添加了逗号，它就变得非常容易处理。

否则，您将返回尝试解析数据，因为空白列与尾随空格看起来并没有太大不同。

与使用 SQL plus 相比，使用与数据库的直接连接将为您提供更大的灵活性。您的数据将保存在结构化记录中，您可以随心所欲地进行操作。

当我**在**powershell 脚本中使用 SQLPlus 时，我使用文件片段以编程方式编写 SQL 脚本以简化代码，并将其发送到 sqlplus，而不是将 SQL 本身通过管道传输到 SQLPLUS。这使得添加 colsep 等命令和其他格式化命令变得容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T22:19:06.813

现在无法对此进行测试，但请尝试将您的 $export 管道传输到 Select-Object：

```
$export | 
    Select-Object Column1, Column2, etc | 
    Export-Csv   c:\users\*****\test.csv -notypeinformation 
```

# c# - 如何订阅双击？

> ID：16111555
> 
> 赞同：2
> 
> 时间：2013-04-19T18:48:53.130
> 
> 标签：c#, xna, double-click

我正在尝试找到一种方法来订阅 XNA 中的双击事件，并且谷歌搜索让我获得了与 winforms 相关的东西，但事实并非如此，我不能使用它。

在 PC 上使用`Timespan`和猜测双击的超时时间不是很可靠。

默认的 XNA 输入系统也有这个小缺陷：有时按键或鼠标点击在更新之间会丢失，这会破坏游戏高负载时刻双击的可靠性。

如何在 .net 中订阅双击事件？

* * *

删除了“不使用`Control`类事件”，因为实际上有一种使用该类的方法（请参阅我的答案）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T19:07:45.880

[您可以按照本文](http://xboxforums.create.msdn.com/forums/p/51389/310663.aspx)所述创建自己的双击检查器。

```
double ClickTimer;
const double TimerDelay = 500;

public override void Update(GameTime gameTime)
{
     ClickTimer += gameTime.ElapsedGameTime.TotalMilliseconds;
     if(Mouse.GetState().LeftButton == ButtonState.Pressed)
     {
          if(ClickTimer < TimerDelay)
              //this is a double click
          else
              //this is a normal click

          ClickTimer = 0;
     }
} 
```

在该代码中，`500`设置为用户必须双击的最长时间（以毫秒为单位）。要获取用户设置为其系统的最大双击时间的毫秒数（而不仅仅是将其设置为任意值`500`），您可以导入`Windows.Forms`程序集并读取[SystemInformation.DoubleClickTime](http://msdn.microsoft.com/en-us/library/system.windows.forms.systeminformation.doubleclicktime.aspx)属性，或者，如果您不想导入程序集，您可以 P/Invoke`GetDoubleClickTime`方法。

```
[DllImport("user32.dll", CharSet = CharSet.Auto, ExactSpelling = true)]
public static extern int GetDoubleClickTime(); 
```

所以在XNA代码中加入上面的方法，就可以像这样得到用户默认的双击时间

```
const double TimerDelay = (double)GetDoubleClickTime(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T19:14:15.003

我只是想出了这个：

```
using wf = System.Windows.Forms;

wf.Form form = (wf.Form)wf.Control.FromHandle(this.Window.Handle);
form.MouseDoubleClick += new wf.MouseEventHandler(form_MouseDoubleClick); 
```

所以确实有一种方法可以在 XNA 中使用`Control`类 :)

# python - Python len() 函数再增加 1 个

> ID：16111563
> 
> 赞同：1
> 
> 时间：2013-04-19T18:49:44.877
> 
> 标签：python, python-3.x

我试过用谷歌搜索没有成功，但我试图读入一个文件并找到每个字符串的长度。每个字符串都是一组数字（即 012345）。我使用 len() 函数并且它可以工作，但是除了最后一行之外，它每行都增加了 1 个。我假设它正在计算 eol/return 字符。我该如何解决？谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-19T18:52:02.460

您可以去除空格：

```
len(line.strip()) 
```

例子：

```
$ echo 'One
Two' | python -c 'for line in __import__("sys").stdin: print(len(line))'
4
4
$ echo 'One
Two' | python -c 'for line in __import__("sys").stdin: print(len(line.strip()))'
3
3 
```

[`str.strip`文档](http://docs.python.org/3/library/stdtypes.html#str.strip)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T18:56:02.987

您可以从阅读的每一行中修剪空白。为此，您可以使用 strip（从左侧和右侧去除多余的空白）或 rstrip 函数（从右侧去除空白）。

```
"My file line.\n".rstrip() 
```

rstrip() 函数也可以接受参数，如果你想去掉，比如说，只删除换行符。

```
"My file line.\n".rstrip('\n') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T18:54:53.160

您是否尝试过使用 Python 的字符串替换功能？它会是这样的：

```
len(yourString.replace('\n', '')); 
```

# ruby-on-rails-3 - 使用液体和rails3在布局中渲染模板

> ID：16111564
> 
> 赞同：1
> 
> 时间：2013-04-19T18:49:52.137
> 
> 标签：ruby-on-rails-3, liquid

嗨，我正在构建一个应用程序，让用户可以在其中编辑他们的模板和布局。我将模板存储在数据库中。

我有一个名为 Theme and Template 的模型，其中 Theme has_many 模板。

每个模板的液态代码和 HTML 都存储在 content 属性中（template.content）

主模板称为“主题”，另一个称为“页面”。所以我想启用方法 include 以便我可以将 {{ include page }} 放在布局模板中。

到目前为止我有这个

```
<% if current_site.theme %>
<% @site = current_site %>
<% @theme = current_site.theme %>
<% @template = @theme.templates.find_by_name("theme") %>
<% Liquid::Template.file_system = Liquid::LocalFileSystem.new(@template) %>
<% liquid = Liquid::Template.parse(@template.content) %>
<%= raw liquid.render('site' => @site)  %>
<% end %> 
```

但我得到这个错误

```
Liquid error: can't convert Template into String 
```

我怎样才能渲染这个？

谢谢！

# django - 模型字符串表示中的 Django OneToOne 字段

> ID：16111568
> 
> 赞同：1
> 
> 时间：2013-04-19T18:50:09.917
> 
> 标签：django, django-models

我尝试扩展 django 的身份验证模型，并通过 OneToOneField 向用户添加一些特殊字段。

```
from django.db import models
from django.contrib.auth.models import User

class GastroCustomer(models.Model):
    user = models.OneToOneField(User)
    barcode = models.IntegerField()
    balance = models.IntegerField()

    def __unicode__(self):
        return self.user 
```

这在管理模块之外工作正常。但是，如果我现在开始`GastroCustomer`通过管理界面添加一个新的，我会收到： `'User' object has no attribute '__getitem__'`

如果我换成`__unicode__(self)`简单的东西，例如

```
def __unicode__(self):
    return "foo" 
```

不会发生此错误。有没有办法确定这个用户字段何时处于某种无效状态并更改这种情况下的字符串表示？有人能想象为什么`__unicode__(self)`在记录“正确”之前被调用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T19:03:09.570

Your model is actually returning a model object in `__unicode__` method instead it should return unicode string, you can do this:

```
def __unicode__(self):
    return unicode(self.user) 
```

This will call `User.__unicode__` which will return `user.username`. Thanks to `Nathan Villaescusa` on his [answer](https://stackoverflow.com/questions/13074331/typeerror-x-object-has-no-attribute-getitem).

Alternatively you can directly return the username of user in `__unicode__` method:

```
def __unicode__(self):
    return self.user.username 
```

# javascript - 为什么是 DOM 树 oder preorder，深度优先遍历？

> ID：16111571
> 
> 赞同：6
> 
> 时间：2013-04-19T18:50:18.107
> 
> 标签：javascript, algorithm, dom, graph-algorithm

为什么是 DOM 树oder `preorder`，？`depth-first traversal`

与 BFT 等其他遍历相比，这种设计选择有哪些优势？

我只是在研究[DOM 标准](http://www.w3.org/TR/dom/#concept-tree-order)，发现了 before 和 following 的定义：

> 如果 A 和 B 在同一棵树中并且 A 在树顺序中位于 B 之前，则对象 A 在对象 B 之前。
> 
> 如果 A 和 B 在同一棵树中并且 A 按树顺序在 B 之后，则对象 A 跟随对象 B。
> 
> 就像大多数编程范例一样，Web 平台具有有限的层次树结构，简称为树。树顺序是前序，深度优先遍历。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-19T21:48:03.043

深度优先遍历通常是最简单的遍历方式，因为您可以递归或使用显式堆栈进行；广度优先需要一个队列，从某种意义上说，它是一种更复杂的数据结构。但我认为有一个比传统或简单更简单的答案：（X）HTML 树的深度搜索遍历导致文本节点按表示顺序遍历。

考虑这个*相对*简单的[HTML](http://en.wikipedia.org/wiki/HTML)子树。

或者，以原始形式：

```
<p>Consider this <emph>relatively</emph> simple <a href="...">HTML</a> subtree</p> 
```

作为一棵树（省略空格和属性）：

```
 <P>
                       |
      +-----------+----+----+-----+------+               
______|______   __|___   ___|__  _|_  ___|___
Consider this   <EMPH>   simple  <A>  subtree
                  |               |
              ____|_____        __|__
              relatively         HTML 
```

深度优先遍历：

```
<P>, Consider this, <EMPH>, relatively, simple, <A>, HTML, subtree 
```

广度优先遍历：

```
<P>, Consider this, <EMPH>, simple, <A>, subtree, relatively, HTML 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T20:55:36.253

深度优先搜索需要树的高度顺序的内存，但广度优先搜索需要树顶点的基数顺序的内存。换句话说，与深度优先搜索相比，广度优先搜索是一种内存消耗。

# windows - 向用户显示弹出窗口时停用桌面背景

> ID：16111573
> 
> 赞同：0
> 
> 时间：2013-04-19T18:50:33.807
> 
> 标签：windows, winapi, win32gui

我有一个启动时全屏运行的 win32 应用程序。该应用程序有一些按钮可以调用弹出对话框。

有没有办法让整个桌面（除了弹出窗口）变成透明的黑色，除非弹出窗口被用户关闭？我所说的类似于 Windows 7 UAC 弹出窗口及其导致的背景。

是否可以为全屏窗口应用程序做类似的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T23:59:15.320

有可能这样做……有点。也许我应该说，你可以*模拟*这种效果。它实际上不会像 UAC 对话框那样，因为用户仍然能够与其他正在运行的应用程序进行交互。应用程序没有“系统模式”这样的概念。当然，这是设计使然。但是您当然可以显示一个“灯箱”，使桌面的其余部分变暗并强制将注意力集中在应用程序的对话框上。

我这样做的方法是创建一个巨大的[分层窗口](http://msdn.microsoft.com/en-us/library/ms997507.aspx)，它位于所有其他窗口的顶部并覆盖整个屏幕，用黑色填充它，并根据需要设置不透明度。然后，在显示模式对话框之前（通过调用 MessageBox 函数或使用 DialogBox 函数显示您自己的自定义对话框之一），显示您的灯箱窗口。最后，在用户关闭模态对话框后，您将销毁灯箱窗口。

这是一些示例代码。为简洁起见，省略了错误检查。其他好的风格也是如此，例如将这种混乱包装在一个或多个类中。

```
INT_PTR ShowLightBoxedDialog(HINSTANCE hInstance,
                             LPCTSTR pDlgTemplate,
                             HWND hwndParent,
                             DLGPROC pDlgProc,
                             BYTE opacityLevel)
{
   const TCHAR szLightBoxClass[] = TEXT("LightBoxWndClass");

   // Register the light box window class.
   static bool lightBoxRegistered = false;
   if (!lightBoxRegistered)
   {
      WNDCLASSEX wcex;
      wcex.cbSize          = sizeof(wcex);
      wcex.style           = CS_NOCLOSE | CS_SAVEBITS;
      wcex.lpfnWndProc     = LightBoxWndProc;
      wcex.cbClsExtra      = 0;
      wcex.cbWndExtra      = 0;
      wcex.hInstance       = hInstance;
      wcex.hIcon           = NULL;
      wcex.hIconSm         = NULL;
      wcex.hCursor         = LoadCursor(NULL, IDC_ARROW);
      wcex.hbrBackground   = NULL;
      wcex.lpszMenuName    = NULL;
      wcex.lpszClassName   = szLightBoxClass;
      RegisterClassEx(&wcex);
      lightBoxRegistered = true;
   }

   // Create and display the light box window.
   HWND hwndLightBox = CreateWindowEx(WS_EX_NOACTIVATE | WS_EX_LAYERED,
                                      szLightBoxClass,
                                      NULL,
                                      WS_POPUPWINDOW,
                                      0, 0, 0, 0,
                                      hwndParent,
                                      NULL,
                                      hInstance,
                                      NULL);
   SetLayeredWindowAttributes(hwndLightBox, 0, opacityLevel, LWA_ALPHA);
   SetWindowPos(hwndLightBox,
                HWND_TOP,
                GetSystemMetrics(SM_XVIRTUALSCREEN),
                GetSystemMetrics(SM_YVIRTUALSCREEN),
                GetSystemMetrics(SM_CXVIRTUALSCREEN),
                GetSystemMetrics(SM_CYVIRTUALSCREEN),
                SWP_SHOWWINDOW);

   // Display the modal dialog box (as you normally would).
   // NOTE: The dialog box won't appear centered on the screen.
   // For that, you will need to write centering code in response
   // to the WM_INITDIALOG message in the dialog procedure.
   INT_PTR result = DialogBox(hInstance, pDlgTemplate, hwndLightBox, pDlgProc);
   // 
   // For demonstration purposes, I used the following code:
   // INT_PTR result = MessageBox(hwndLightBox,
   //                             TEXT("OH NOEZ!\n\nYour system is kaput! Abandon þe all hope."),
   //                             NULL,
   //                             MB_ABORTRETRYIGNORE | MB_ICONERROR);

   // Destroy the light box window.
   DestroyWindow(hwndLightBox);

   // Return the result of the modal dialog box.
   return result;
} 
```

您会注意到，基本上我所做的是围绕[DialogBox 函数](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645452.aspx)创建了一个包装器，只要您想要一个具有“灯箱”效果的对话框，就可以使用它。它采用所有相同的参数（前 4 个），然后在末尾添加一个额外的参数，允许您指定用于“灯箱”效果的不透明度级别。150-200 范围内的东西可能是好的。当然，您可以选择一些东西并对其进行硬编码，但我对硬编码值严重过敏。无论如何，从任何地方调用这个函数都非常容易：

```
ShowLightBoxedDialog(hInstance,                   /* your application instance */
                     MAKEINTRESOURCE(IDD_SAMPLE), /* your dialog template      */
                     hWnd,                        /* parent window for dialog  */
                     SampleWndProc,               /* ptr to dialog procedure   */
                     175);                        /* light box opacity level   */ 
```

![](https://i.stack.imgur.com/XxWcJ.png "它甚至可以在多台显示器上正常工作！")

因为代码利用了 Windows 中模式对话框的工作原理，所以用户在关闭对话框之前将无法与应用程序的任何其他部分进行交互。而且因为“灯箱”窗口位于其他所有内容之上，它会吃掉所有鼠标点击并阻止将焦点设置到任何其他应用程序。`Alt`但是使用+之类的东西是微不足道的`Tab`。
**所以这*不是*一个安全功能！这只是一种视觉效果！**

而且因为它只是一种愚蠢的视觉效果，它可能会让你的用户感到沮丧。我实际上不建议使用它。但现在你知道该怎么做了。负责任地行使这种权力，等等。

# android - Android - 如何知道 TextView 中的长按文本？

> ID：16111575
> 
> 赞同：0
> 
> 时间：2013-04-19T18:50:37.220
> 
> 标签：android, textview, long-press

正如标题所说，我想知道如何知道 TextView 中的长按文本。

```
caption.setOnLongClickListener(new OnLongClickListener() {

    @Override
    public boolean onLongClick(View v) {
        Log.d("log", "caption clicked");
        String text = ((TextView)v).getText().toString();
        Log.d("log", "1: " + text);
        int start = ((TextView)v).getSelectionStart();
        Log.d("log", "2: " + start);
        int end = ((TextView)v).getSelectionEnd();
        Log.d("log", "3: " + end);
        Log.d("log", "selection: " + text.substring(start, end));

        return true;
    }
}); 
```

在这里，开始和结束变量都得到 -1。它不应该返回我长按的文本索引吗？有没有其他方法可以知道textView中的长按文本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T19:05:23.920

您可以继承`EditText`并覆盖其[onSelectionChanged()](http://developer.android.com/reference/android/widget/TextView.html#onSelectionChanged%28int,%20int%29)方法。

# javascript - JQuery“点击”不触发功能

> ID：16111583
> 
> 赞同：0
> 
> 时间：2013-04-19T18:50:49.520
> 
> 标签：javascript, jquery, html, web

当您单击 div（我也尝试将其设为按钮）时，我试图触发 JQuery 函数，但无济于事。Google Chrome Inspector 甚至无法识别在幕后创建的事件处理程序。

```
<!DOCTYPE>
<html>
    <head>
        <meta charset="UTF-8">;
        <script type = "text/javascript" src = "http://code.jquery.com/jquery-1.9.1.js"></script>
    </head>
    <body>
        <div id = "main" style = "width: 500px; height: 500px; background-color: black; color: white;">
            Lorem ipsum dolor sit amet, consectetur adipisicing elit. Eius aliquam nobis optio ut ratione a eligendi excepturi cumque est commodi? Sed, odit, culpa deserunt distinctio at commodi modi architecto aliquam.
        </div>
        <button class = "button" href="#" style = "width: 50px; height: 50px; background-color: black;"></button>
        <script type = "text/javacsript">
            $(document).ready(function(){
                $(".button").click(function(){
                    $("main").val("IT WORKED");
                });
            };
        </script>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T18:51:27.297

您忘记使用`#`id 选择器，也使用`text()`or`html()`代替 val() for`div`并且您还错过了`document.ready`.

**[现场演示](http://jsfiddle.net/rajaadil/HEAbC/)**

```
 $(document).ready(function(){
     $(".button").click(function(){
           $("#main").text("IT WORKED");
     });
  }); 
```

# java - Android：获取过去的移动数据统计信息

> ID：16111585
> 
> 赞同：0
> 
> 时间：2013-04-19T18:50:51.027
> 
> 标签：java, android, mobile, statistics, wifi

我正在尝试获取过去一段时间在 Android（也是 WiFi）中的数据统计信息。我知道有[TrafficStats](http://developer.android.com/reference/android/net/TrafficStats.html)类，但它似乎只提供有关当前连接的信息。我想获得一些关于：“获取上个月收到的数据”的信息。有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T19:35:52.413

Android SDK 中没有任何可用的数据，除非您自己通过`TrafficStats`.

# magento-1.7 - 编辑网关错误

> ID：16111590
> 
> 赞同：0
> 
> 时间：2013-04-19T18:51:11.803
> 
> 标签：magento-1.7, authorize.net

当客户的信用卡被拒绝时，您如何自定义弹出的网关错误。

例如“付款交易失败。原因网关错误：处理过程中发生错误。请重试。”

如果这有所作为，我们将使用 Authorize.net。澄清一下，我们并不是要摆脱它们，只是修改它们中的语言。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-20T16:36:52.727

将文件 app/code/core/Mage/Paygate/Model/Authorizenet.php 复制到本地。然后找到这个（第 1334 行）：

```
protected function _wrapGatewayError($text)
{
    return Mage::helper('paygate')->__('Gateway error: %s', $text);
} 
```

并替换为：

```
 protected function _wrapGatewayError($text)
{
    if($text == 'This transaction has been declined.') {
        $text = 'Custom message here.';
    }       
    return Mage::helper('paygate')->__('Gateway error: %s', $text);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-25T22:28:18.440

我知道这是一个老问题，但如果有人遇到这个问题，我会把它留在这里。

该`_wrapGatewayError()`方法已经使用助手来输出消息，那么为什么不直接翻译消息呢？

1.  **创建（或编辑）**您的本地化/翻译文件`app/design/frontend/{package_name}/{theme_name}/locale/en_US/translate.csv`。您可以检查活动`package_name`和`theme_name`系统/配置/设计（在“常规”下）。

2.  **以这种格式将要更改的消息添加**到该文件中：“旧文本 - 要更改的消息”、“新消息”。

在您的情况下，它将是这样的：“付款交易失败。原因网关错误：处理过程中发生错误。请重试。”，“您的自定义消息”

**工作原理：**每当使用助手输出“付款翻译失败......”时，系统将找到翻译文件（translate.csv）并将消息更改为您的自定义文件。

**请不要修改核心文件**。它会造成混乱，干扰补丁，并使调试更加困难。如果需要，您可以扩展它们。请参阅[覆盖 Magento 块、模型、助手和控制器](https://inchoo.net/magento/overriding-magento-blocks-models-helpers-and-controllers/)

# mysql - 我如何修改或操作此触发器

> ID：16111591
> 
> 赞同：0
> 
> 时间：2013-04-19T18:51:15.437
> 
> 标签：mysql, triggers

我正在尝试创建一个触发器，它将捕获当我在更新之前和之后更新表中的任何列时将发生的任何事件，假设我有 4 列：

```
first_name  address  city  country 
```

假设我编辑了 `first_name`让我们说`Jack to Henk`。它应该在另一个表中插入命令`(i.e. update) ,time , description`，但在我希望它写的描述中，当前用户将 Jack 更改为 John `(i.e using the current-user () function)`，如果它是一个从 Mechinkova 更新为 Tostov 的城市，它应该对其他列执行相同的操作。

我知道我想必须在触发器中添加 concat 函数，我希望它是这样的，例如：

```
DROP TRIGGER IF EXISTS adminpanel.soft//
CREATE TRIGGER adminpanel.soft BEFORE UPDATE ON adminpanel.aggrement
FOR EACH ROW
BEGIN
INSERT INTO adminpanel.aggretrigger(cmd, time, cmd_user, last_name, city) VALUES("INSERT", NOW(), CURRENT_USER(), new.last_name, new.city);
END
// 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T20:01:01.250

您要求的是审核触发器。这很容易实现。

让我们首先稍微修改您的主表。让我们添加一个数据类型的字段`id`作为`integer`表的主键，这样您的表将如下所示：

```
tablename
( id            integer PK
, first_name    varchar
, address       varchar
, city          varchar
, country       varchar
) 
```

现在，您将需要一个表，例如`UNIVERSAL_AUDIT_ENTRY`存储对架构中数据所做的更改的表。

根据我的经验，我建议您按如下方式创建此表：

```
universal_audit_entry
( universal_audit_entryid integer PK
, table_name              varchar -- captures the name of the table
, column_name             varchar -- captures the name of the column
, entry_type              varchar -- captures the event, e.g., 'INSERT' or 'UPDATE'
, primary_key_value       integer -- captures, e.g., the value in tblename.id
, from_str                varchar -- captures the value that was present before
, to_str                  varchar -- captures the value that was changed into
, timestamp               datetime -- captures the timestamp of the event
, username                varchar -- captures the name of user
) 
```

现在`universal_audit_entry`表格准备好了，您的触发器应该看起来像：

```
CREATE TRIGGER adminpanel.soft
BEFORE UPDATE ON adminpanel.aggrement
FOR EACH ROW
BEGIN
  IF UPDATING(first_name) THEN
    INSERT INTO universal_audit_entry VALUES
    ( 123 -- example for universal_audit_entryid
    , 'TABLENAME'
    , 'FIRST_NAME'
    , 'UPDATE'
    , new.id
    , old.first_name
    , new.first_name
    , current_timestamp()
    , current_user);
 END IF;
END;
// 
```

您可以使用类似的逻辑来审计同一个表和其他表中的更多列。

**笔记：**

1.  此代码未经测试。我在这里添加它只是为了说明目的。不应直接使用此触发器代码。

2.  `new`并且`old`是在更新语句期间生成的伪记录。这些记录对应于正在更新的行。`:new`表示更新语句运行之后的行，表示更新语句运行`:old`之前的行。这适用于甲骨文。请确保它是否也适用于 MySQL。

* * *

**编辑**

[您可以在此处](http://dev.mysql.com/doc/refman/5.0/en/triggers.html)阅读有关 MySQL 触发器的更多信息。[在此处](http://www.codeproject.com/Articles/105768/Audit-Trail-Tracing-Data-Changes-in-Database)阅读有关审计跟踪和[此 SO 问题](https://stackoverflow.com/questions/201527/best-design-for-a-changelog-auditing-database-table)的更多信息。

# android - 在android中杀死一个警报检查器

> ID：16111592
> 
> 赞同：0
> 
> 时间：2013-04-19T18:51:16.297
> 
> 标签：android, android-service, android-alarms

我的活动（Groups.java）中有一个警报检查器，每隔几秒钟就启动一项服务：

```
public void lookForGroups()
    {
        int seconds = 40;

           Intent myIntent = new Intent(Groups.this, GroupsTaskAlarmChecker.class);
           pendingIntent = PendingIntent.getService(Groups.this, 0, myIntent, 0);

           AlarmManager alarmManager = (AlarmManager)getSystemService(ALARM_SERVICE);

           Calendar calendar = Calendar.getInstance();
           calendar.setTimeInMillis(System.currentTimeMillis());
           calendar.add(Calendar.SECOND, 10);
           alarmManager.setRepeating(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(), seconds * 1000, pendingIntent);

    } 
```

还取决于 sharedPreferences 变量，我在重新启动设备时启动此服务。

是否可以根据变量的值“杀死”或启动该警报检查器？例如自动或手动同步我的应用程序。

非常感谢你，对不起我的英语；）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T20:20:37.150

不确定我是否理解这一点...但是您创建了一个警报检查器并希望在它已经运行时将其杀死？

```
alarmManager.cancel(pendingIntent) 
```

应该这样做。根据[参考资料](http://developer.android.com/reference/android/app/AlarmManager.html)，它将取消任何具有匹配意图的警报。

# c# - 如何正确确定 Aero 的非客户区大小？

> ID：16111595
> 
> 赞同：3
> 
> 时间：2013-04-19T18:51:18.443
> 
> 标签：c#, .net, vb.net, aero, nonclient-area

为 COMPILED 应用程序激活 Aero 时，如何使用 VBNET 或 C# 代码正确确定非客户区大小？（是的，***这个问题只发生在运行编译的应用程序时，而不是从 IDE 启动应用程序时***）

当我调整表单大小或执行与表单的高度/宽度相关的任何操作时，我永远不会得到预期的结果。

例如这是一个简单的两种形式的对接代码的一部分：

**VB-NET：**

```
Me.Location = New Point((form1.Location.X + form1.Width), form1.Location.Y) 
```

**C＃：**

```
this.Location = new Point((form1.Location.X + form1.Width), form1.Location.Y); 
```

举个例子，我将展示我的一个程序。

上面的代码在 Aero 未激活时运行完美：

![在此处输入图像描述](https://i.stack.imgur.com/LwSQ5.jpg)

...但是如果 Aero 被激活，那么结果如下：

![在此处输入图像描述](https://i.stack.imgur.com/npK34.jpg)

请注意右侧的表单如何位于左侧表单的非客户端边框下方。

...或者这是左侧表单位于右侧表单的非客户端边框下方的其他图像：

![在此处输入图像描述](https://i.stack.imgur.com/dHVdK.jpg)

我的问题是**解决这个问题的方法是什么？**

> **更新：**

扩展框架解决方案不起作用。

表格1：

```
Imports System.Runtime.InteropServices

Public Class Form1
    Public Moving_From_Secondary_Form As Boolean = False

    <DllImport("dwmapi.dll")> _
    Private Shared Function DwmExtendFrameIntoClientArea(ByVal hwnd As IntPtr, ByRef margins As MARGINS) As Integer
    End Function

    <StructLayout(LayoutKind.Sequential)> _
    Public Structure MARGINS
        Public leftWidth As Integer
        Public rightWidth As Integer
        Public topHeight As Integer
        Public bottomHeight As Integer
    End Structure

    Private Sub Form1_Load(sender As Object, e As EventArgs) Handles MyBase.Load
        Dim margins As New MARGINS()
        margins.leftWidth = -1
        margins.rightWidth = -1
        margins.topHeight = -1
        margins.bottomHeight = -1
        DwmExtendFrameIntoClientArea(Me.Handle, margins)
        Form2.Show()
    End Sub

    Private Sub Form1_Move(ByVal sender As Object, ByVal e As System.EventArgs) Handles MyBase.Move
        If Not Moving_From_Secondary_Form Then Form2.Location = New Point(Me.Right, Me.Top)
    End Sub

End Class 
```

表格2：

```
Public Class Form2

    Private Sub Form2_Move(ByVal sender As Object, ByVal e As System.EventArgs) Handles MyBase.Move
        Form1.Moving_From_Secondary_Form = True
        Form1.Location = New Point(Me.Left - Form1.Width, Me.Top)
        Form1.Moving_From_Secondary_Form = False
    End Sub

End Class 
```

结果：

[![在此处输入图像描述](https://i.stack.imgur.com/HdGoP.jpg)](https://i.stack.imgur.com/HdGoP.jpg)

另外我想记住： ***这个问题只发生在运行编译的应用程序时，而不是从 IDE 启动应用程序时***

**

> 更新：

**

测试了 GetWindowRect 解决方案，总是返回一个 0，对我不起作用，也许我做错了什么：

```
Imports System.Runtime.InteropServices

Public Class Form1

    Private Declare Function GetWindowRect Lib "user32" (ByVal Handle As IntPtr, Rect As RECT) As Long
    Private Declare Function CopyRect Lib "user32" (DestRect As RECT, SourceRect As RECT) As Long

    <StructLayout(LayoutKind.Sequential)> _
    Structure RECT
        Public Left As Int32
        Public Top As Int32
        Public Right As Int32
        Public Bottom As Int32
    End Structure

    Private Sub Form1_Load(sender As Object, e As EventArgs) Handles MyBase.Load
        Form2.Show()
    End Sub

    Private Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click
        Dim rectWindow As RECT, rectCopy As RECT

        'Get the bounding rectangle of this window
        GetWindowRect(Me.Handle, rectWindow)
        'Copy the rectangle
        CopyRect(rectCopy, rectWindow)

        MsgBox("This form's width:" & (rectCopy.Right - rectCopy.Left).ToString & " pixels")
        Form2.Location = New Point(rectCopy.Right, rectCopy.Top)
    End Sub

End Class 
```

**

> 更新：

**

再次尝试使用 GetWindowRect，这次代码正确编写但没有解决问题：

```
Imports System.Runtime.InteropServices

Public Class Form1
    <StructLayout(LayoutKind.Sequential)> _
    Private Structure RECT
        Public Left As Int32
        Public Top As Int32
        Public Right As Int32
        Public Bottom As Int32
    End Structure

    Private Declare Function GetWindowRect Lib "user32" (ByVal HWND As Integer, ByRef lpRect As RECT) As Integer

    Private Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click
        Dim rc As RECT
        GetWindowRect(MyBase.Handle, rc)
        Dim width As Integer = rc.Right - rc.Left
        Form2.Show()
        Form2.Location = New Point(rc.Right, rc.Top)
    End Sub

End Class 
```

![在此处输入图像描述](https://i.stack.imgur.com/LJMem.jpg)

**我要记住：这个问题只发生在win7/Vista上运行编译的应用程序时，而不是从IDE启动应用程序时**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T21:10:12.807

我对 vb.net 没有太多经验，但通常我会使用 GetWindowRect() 来获取窗口的完整外边框。它似乎在 vb.net 中可用

[http://www.pinvoke.net/default.aspx/user32/getwindowrect.html](http://www.pinvoke.net/default.aspx/user32/getwindowrect.html)

现在我从 6.0 版开始就没有使用过 vb，但您可能必须将该矩形从像素转换为缇。

**编辑：**

这段代码对我有用：

```
Imports System.Runtime.InteropServices

Public Class Form1
    <StructLayout(LayoutKind.Sequential)> _
    Private Structure RECT
        Public Left As Int32
        Public Top As Int32
        Public Right As Int32
        Public Bottom As Int32
    End Structure

    Private Declare Function GetWindowRect Lib "user32" (ByVal HWND As Integer, ByRef lpRect As RECT) As Integer

    Private Sub Form1_Load(sender As Object, e As EventArgs) Handles MyBase.Load
        Dim rc As RECT
        GetWindowRect(MyBase.Handle.ToInt32, rc)

        Dim width As Integer = rc.Right - rc.Left
        MessageBox.Show(width.ToString)

    End Sub
End Class 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T16:42:22.513

虽然我没有亲自测试过，但您可以使用 DwmExtendFrameIntoClientArea 并传递 -1 将框架扩展到客户区域。

从理论上讲，这应该意味着您指定的尺寸/位置将包括框架。

**C# 签名**

```
[DllImport("dwmapi.dll", PreserveSig = true)]
static extern int DwmExtendFrameIntoClientArea(IntPtr hwnd, ref MARGINS margins);

[DllImport("dwmapi.dll", PreserveSig = false)]
static extern void DwmExtendFrameIntoClientArea(IntPtr hwnd, ref MARGINS margins); 
```

**VB.NET 签名：**

```
<DllImport("dwmapi.dll")> _
Private Shared Function DwmExtendFrameIntoClientArea(ByVal hwnd As IntPtr, ByRef margins As MARGINS) As Integer
End Sub 
```

**更新**

您是否考虑过将表单边框样式设置为无，然后使用按钮来控制关闭/最小化？还有其他选择也可能让你得到你想要的结果 -`FixedSingle`和`FixedToolWindow`

[![边框样式](https://i.stack.imgur.com/7zHAA.jpg)](https://i.stack.imgur.com/7zHAA.jpg)

**更新 2**

我设法重新创建您的问题并使用以下代码解决它。调试时窗口位置偏斜，但运行编译后的 exe 时窗口位置正确。

```
Dim BorderWidth = (Me.Width - Me.ClientSize.Width)
Me.Location = New Point((Form1.Location.X + (Form1.Width + BorderWidth)), Form1.Location.Y) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-27T00:42:36.040

最后，我做了这个片段，用于将辅助窗体停靠在主窗体的右侧，即使启用了 Aero 并且如果我们没有运行 APP fom 调试，现在我的应用程序可以停靠在虚拟机上启用 AERO 和所有（航空）Windows：D。

```
 ' Instructions :
  ' Change Manually the "StartPosition" property of "Form2" to "Manual", don't change it with code.

    Public Moving_From_Secondary_Form As Boolean = False

    ' Move Event Main Form
    Private Sub Form1_Move(ByVal sender As Object, ByVal e As System.EventArgs) Handles MyBase.Move
        If Not Moving_From_Secondary_Form Then
            If Debugger.IsAttached Then
                Form2.Location = New Point(Me.Right, Me.Top)
            Else
                Form2.Location = New Point((Me.Location.X + (Me.Width + (Me.Width - Me.ClientSize.Width))), Me.Location.Y)
            End If
        End If
    End Sub

    ' Move Event Secondary Form
    Private Sub Form2_Move(ByVal sender As Object, ByVal e As System.EventArgs) Handles MyBase.Move
        Form1.Moving_From_Secondary_Form = True
        If Debugger.IsAttached Then
            Form1.Location = New Point(Me.Left - Form1.Width, Me.Top)
        Else
            Form1.Location = New Point((Me.Location.X - (Form1.Width + (Form1.Width - Form1.ClientSize.Width))), Me.Location.Y)
        End If
        Form1.Moving_From_Secondary_Form = False
    End Sub 
```

...还有这个功能：

```
#Region " Get Non-Client Area Width "

    ' [ Get Non-Client Area Width Function ]
    '
    ' Examples :
    ' MsgBox(Get_NonClientArea_Width(Form1))
    ' Me.Location = New Point((Form1.Location.X + (Form1.Width + Get_NonClientArea_Width(Form1))), Form1.Location.Y) 

    Public Function Get_NonClientArea_Width(ByVal Form Form) As Int32
        Return (Form.Width - Form.ClientSize.Width)
    End Function

#End Region 
```

# c# - 检测 TextBlock 在 StackPanel 中是否可见

> ID：16111599
> 
> 赞同：2
> 
> 时间：2013-04-19T18:51:28.303
> 
> 标签：c#, windows-8, winrt-xaml, textblock, stackpanel

我有一个 StackPanel，其高度基于可用的屏幕高度/分辨率，我需要用数据填充它。棘手的部分是我的数据非常动态，并且具有不同边距的标题/区域，因此执行简单的 show x items 是不可靠的。

有没有办法检测 TextBlock 在 StackPanel 中是否完全可见？如果可能的话，我不想显示一半被切断的项目。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T20:10:39.503

所以这比你可能考虑的要复杂。那是因为要确定物品前面是否有东西需要做很多工作。然而，在最简单的情况下，要确定一个项目是否在屏幕上可见，您可以使用此技术。

使用此 XAML：

```
<ScrollViewer HorizontalScrollBarVisibility="Visible" VerticalScrollBarVisibility="Visible">
    <Grid x:Name="MyGrid">
        <StackPanel x:Name="MyStackPanel" Orientation="Horizontal" Background="Gray">
            <Rectangle Height="200" Width="200" Margin="50" Fill="Black" />
            <Rectangle Height="200" Width="200" Margin="50" Fill="Black" />
            <Rectangle Height="200" Width="200" Margin="50" Fill="Black" />
            <Rectangle Height="200" Width="200" Margin="50" Fill="Black" />
            <Rectangle Height="200" Width="200" Margin="50" Fill="Black" />
            <Rectangle Height="200" Width="200" Margin="50" Fill="Black" />
            <Rectangle Height="200" Width="200" Margin="50" Fill="Black" />
            <Rectangle Height="200" Width="200" Margin="50" Fill="Black" />
            <Rectangle Height="200" Width="200" Margin="50" Fill="Black" />
            <Rectangle Height="200" Width="200" Margin="50" Fill="Black" />
        </StackPanel>
    </Grid>
</ScrollViewer> 
```

在后面使用此代码：

```
void MainPage_Loaded(object sender, RoutedEventArgs e)
{
    foreach (var item in MyStackPanel.Children.OfType<Windows.UI.Xaml.Shapes.Rectangle>())
    {
        // the box around the child
        var _ItemBounds = item.TransformToVisual(null).TransformBounds(new Rect(0, 0, item.ActualWidth, item.ActualHeight));

        // the box around the screen 
        var _Intersection = Window.Current.Bounds;

        _Intersection.Intersect(_ItemBounds);
        if (_Intersection.Equals(_ItemBounds))
            // full
            item.Fill = new SolidColorBrush(Windows.UI.Colors.Green);
        else if (_Intersection.Equals(Rect.Empty))
            // none
            item.Fill = new SolidColorBrush(Windows.UI.Colors.Red);
        else
            // partial
            item.Fill = new SolidColorBrush(Windows.UI.Colors.Orange);
    }
} 
```

希望这是有道理的。我总是更喜欢解释的例子。运行此程序时，可见框为绿色，部分为橙色，超出范围的项目为红色。很简单。

相关：[https ://stackoverflow.com/a/1517794/265706](https://stackoverflow.com/a/1517794/265706)

# node.js - IntelliJ Idea 12 无法解析 Express 方法

> ID：16111602
> 
> 赞同：1
> 
> 时间：2013-04-19T18:51:43.363
> 
> 标签：node.js, intellij-idea, express, code-completion

出于某种奇怪的原因，我似乎无法在我的 node.js 项目中使用“express”对象完成代码。这是它的屏幕。

![在此处输入图像描述](https://i.stack.imgur.com/zVjXo.png)

我的操作系统是 Windows 8，我使用的是 IntelliJ Idea 12.11。也许我需要做一些额外的设置？请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-28T13:46:01.893

@CrazyCoder 没看错，这确实是一个 intellij 错误，目前还没有打补丁，估计我们得等一下 =( URL 是[http://youtrack.jetbrains.com/issue/WEB-6667](http://youtrack.jetbrains.com/issue/WEB-6667)。同时，我我想我将不得不忍受它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-02T22:33:31.513

如果您使用的是 IDEA 13，则在使用 express typescript 存根之前，您仍然无法获得 Express 方法

转到 Javascript Libraries > Downloads 并将顶部的组合框切换到 Typescript 社区存根，然后键入 express

你应该看到存根，它也在这里： [https ://github.com/borisyankov/DefinitelyTyped/blob/master/express/express.d.ts](https://github.com/borisyankov/DefinitelyTyped/blob/master/express/express.d.ts)

如果您使用的是 Java 1.7 并且尚未禁用 SNI 支持，您将收到握手警报并且下载将失败，请转到您的 IDEA.exe 所在的目录，然后将以下行添加到 idea.exe.vmoptions：

```
-Djsse.enableSNIExtension=false 
```

# visual-studio - Visual Studio 中的微风js angularjs ToDo SPA 模板

> ID：16111610
> 
> 赞同：1
> 
> 时间：2013-04-19T18:52:03.177
> 
> 标签：visual-studio, angularjs, breeze, single-page-application

我有一个关于设计的问题。我刚刚浏览了 Visual Studio 的 ToDo 模板的代码，用于使用 BreezejS 和 AngularJS 构建 SPA。

有一个 todo.model.js 文件可以进行各种初始化。一件有趣的事情是，它通过一些附加功能 (addToDo) 扩展了 TodoList 实体。

这样做有什么好处，而不是在 todo.controller 中使用 addToDo 函数并将其添加到 $scope ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T05:45:34.347

您可以为将所有`TodoList`级别持久性操作移出 TodoList 并移入其他组件提供一个很好的案例。控制器是潜在的候选人。

这些操作存在的主要原因`TodoList`是......因为原始 ASP.NET 模板的作者将它们放在了那里！

“*社区模板*”的设计目标之一是让所有“TodoList”应用程序尽可能地相似。通过保持设计不变，我们让读者更容易比较不同框架的效果：Knockout、Breeze、Backbone、Ember。如果他们中的任何一个重新定位这些操作，您将不知道该更改是由目标框架强加的，还是仅仅是实施者的偏好。我们希望摆脱自我，让您专注于所涉及的技术。

**不要将这些模板视为福音**。在某些方面，它们是不现实的；我无法想象每次单个对象的单个属性更改时都会保存。

向他们学习。以健康的怀疑态度看待他们。一直问这样的问题。拿对你有意义的东西。丢弃其余的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T22:58:43.593

我相信这只是让实体为列表中的项目处理自己的保存/删除功能。控制器似乎只处理添加新列表。我不确定除了保持控制器清洁之外还有什么好处。

# java - 重复组合框的选择

> ID：16111614
> 
> 赞同：0
> 
> 时间：2013-04-19T18:52:23.057
> 
> 标签：java, xpages, lotus-notes

我有一个视图，其中包含我想要回答的有关采购订单的各种问题的文档。

使用重复，我列出所有问题。有几种不同类型的问题，所以我只根据 FieldType 列值呈现我需要的答案字段。我想从问题文档的 DialogChoices 字段中提取组合框的选项。

我目前在空组合框之后的下一行中将选择显示为纯文本，而不是作为 selectItems。我的代码哪里出错了？

```
<xp:comboBox id="comboBox1">
    <xp:this.rendered><![CDATA[#{javascript:rowData.getColumnValue("FieldType") == "Dialog Box"; }]]></xp:this.rendered>
    <xp:selectItems>
        <xp:this.value><![CDATA[#{javascript:var doc:NotesDocument = rowData.getDocument();
            var choicesVector:java.util.Vector= doc.getItemValue("DialogChoices");
            var choices = [];
            // loop through the vector, doing push into the array
            for (i=0; i<choicesVector.size(); i++) {
                choices.push (choicesVector.elementAt(i))   
            };
        return choices;}]]>
        </xp:this.value>
    </xp:selectItems>
</xp:comboBox> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T19:44:42.773

奇怪，但是上面代码的测试数据库似乎并没有给我奇怪的结果。也许是因为数据实际上不是一个向量，而只是一个字符串？

这里有一些提示：

您可以在代码中更改的第一件事是从您的字段中获取所有数据的循环。由于组合框的 value 属性已经需要一个数组或向量，您可以将代码更改为：

```
 <xp:this.value><![CDATA[#{javascript:var doc:NotesDocument = rowData.getDocument();
           return  doc.getItemValue("DialogChoices");
            }]]>
        </xp:this.value> 
```

但完全删除 getDocument 调用会更好。如果可能，您可以在视图中添加一列，用于重复的数据源。在此列中，您从字段目录中获取数据。通过这种方式，您可以使用 viewentry 的 getColumnValue() ，这是一种性能优化。就像是：

```
<xp:selectItems>
        <xp:this.value><![CDATA[#{try{
return rowData.getColumnValue("DialogChoices");
           }catch(e){// do something }]]>
        </xp:this.value>
    </xp:selectItems> 
```

# facebook - 当用户同意并授予我的 Facebook 应用权限时？

> ID：16111617
> 
> 赞同：0
> 
> 时间：2013-04-19T18:52:32.817
> 
> 标签：facebook, facebook-php-sdk, facebook-apps

我开发了一个 Facebook 应用程序并使用 PHP-sdk 我使用[官方文档](https://developers.facebook.com/docs/reference/php/facebook-api/)中描述的算法来允许用户加入我的应用程序，然后我将他/她的 user_id 存储在数据库中。我的应用程序使用 publish_stream 权限，因此它会自动将帖子发布到用户的时间线。

我发现该应用程序始终无法为数据库中的某些注册用户（不是全部）发布帖子。我考虑到这一点，因为他们可能会在批准所需权限之前将其注册到数据库中。以下是我在 Facebook api 官方文档中使用的*代码的***蓝图：**

 *```
<?php  
  require_once('php-sdk/facebook.php');
  $config = array(
    'appId' => 'YOUR_APP_ID',
    'secret' => 'YOUR_APP_SECRET',
  );
  $facebook = new Facebook($config);
  $user_id = $facebook->getUser();
?>
<html>
  <head></head>
  <body>

  <?php
    if($user_id) {
      try {
       /* $user_profile = $facebook->api('/me','GET');
        echo "Name: " . $user_profile['name'];*/
     //Here I run the code to save.
         saveTheUserIdToRecordInTheDB($user_id);
       //hypothetical function to save

      } catch(FacebookApiException $e) {
        // If the user is logged out, you can have a 
        // user ID even though the access token is invalid.
        // In this case, we'll get an exception, so we'll
        // just ask the user to login again here.
        $login_url = $facebook->getLoginUrl(); 
        echo 'Please <a href="' . $login_url . '">login.</a>';
        error_log($e->getType());
        error_log($e->getMessage());
      }   
    } else {

      // No user, print a link for the user to login
      $login_url = $facebook->getLoginUrl();
      echo 'Please <a href="' . $login_url . '">login.</a>';

    }

  ?>

  </body>
</html> 
```

**我的主要问题是**：如果用户点击了登录链接，然后他/她由于任何原因没有继续（失去互联网连接，拒绝授予应用程序权限等），是否有可能实现假设功能*saveTheUserIdToRecordInTheDB()*运行并将该用户的 Facebook ID 保存到数据库？

**或者**有些用户无法发布帖子的解释是什么？*

# android - 如何在 AIR for Android 中进行应用内购买？

> ID：16111619
> 
> 赞同：0
> 
> 时间：2013-04-19T18:52:38.317
> 
> 标签：android, air, in-app-purchase

有没有办法在 Android 应用中进行应用内购买？具体来说，我的应用程序有一个标志，一个应用程序变量值，它将它与免费和付费区分开来。因此，当他们进行应用内购买时，我想让我的免费应用与付费应用相同。我在市场上也有付费版本。

如果设置了标志，则付费功能可以在免费应用程序中使用。如何在适用于 Android 的 AIR 应用程序中启用此功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T20:21:13.480

您应该使用**AIR Native Extension**以便能够在您的 AIR 应用程序中使用 Android IAB。[在这里](http://www.adobe.com/devnet/air/native-extensions-for-air.edu.html)，您可以找到提供多个扩展的商业/免费 ANE 列表，以及有关该主题的教程和文档的一些有趣链接（例如：[Using the In-App Billing Adob​​e AIR native extension for Android](http://www.adobe.com/devnet/air/articles/android-billing-ane.edu.html)）

另一个有价值的资源是[ExtensionsOfAir.com](http://extensionsforair.com/)，它提供了一组由社区开发和维护的 ANE。

# google-maps - 为什么有些街景图片的角度不对？

> ID：16111626
> 
> 赞同：9
> 
> 时间：2013-04-19T18:52:54.580
> 
> 标签：google-maps, google-street-view

我正在使用 Google Street View Image API 来显示地址的图像。尽管大多数图像都非常准确，但我注意到有一些是从错误的角度拍摄的，比如拐角处的房子，图像来自小街，而不是前街。当我检查谷歌地图时，左侧面板顶部显示的图像是正确的。

例子; 下面是使用[API 说明](https://developers.google.com/maps/documentation/streetview/)中的 URL 参数的图像； [http://maps.googleapis.com/maps/api/streetview?size=300x200&location=39.408751,-104.917738&sensor=false](http://maps.googleapis.com/maps/api/streetview?size=300x200&location=39.408751,-104.917738&sensor=false)

![在此处输入图像描述](https://i.stack.imgur.com/mpjYm.jpg)

下面是显示在 Google 地图左侧面板中的同一位置的图像，

[https://cbks0.google.com/cbk?output=thumbnail&cb_client=maps_sv&thumb=2&thumbfov=60&ll=39.408554,-104.917506&yaw=317.7&thumbpegman=1&w=300&h=118](https://cbks0.google.com/cbk?output=thumbnail&cb_client=maps_sv&thumb=2&thumbfov=60&ll=39.408554,-104.917506&yaw=317.7&thumbpegman=1&w=300&h=118)

![在此处输入图像描述](https://i.stack.imgur.com/qZY6U.jpg)

有没有办法使用 API 获得“更好”的角度？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-11T00:35:31.307

如果您知道地址，并且 ROOFTOP 地理编码器结果可用，您可以找到道路上最近的位置，然后使用它来请求街景：

[http://www.geocodezip.com/v3_Streetview_lookAtB.html?snaptoroad=5175%20Buena%20Vista%20Boulevard,%20Castle%20Rock,%20CO%2080109,%20USA](http://www.geocodezip.com/v3_Streetview_lookAtB.html?snaptoroad=5175%20Buena%20Vista%20Boulevard,%20Castle%20Rock,%20CO%2080109,%20USA)

（如果您不知道地址，您可以像我在这里所做的那样对位置进行反向地理编码以获取它）

这个问题的工作示例：[Using google street view with a marker, how do I point the POV at a marker？](https://stackoverflow.com/questions/3198415/using-google-street-view-with-a-marker-how-do-i-point-the-pov-at-a-marker)

[工作小提琴](http://jsfiddle.net/geocodezip/fscbtja2/9/)

工作代码片段：

```
var geocoder = new google.maps.Geocoder();
var myStreetView = null;
var marker = null;

function geocodeAddress() {
  var address = document.getElementById('address').value;
  geocoder.geocode({
    'address': address
  }, function(results, status) {
    //alert (results);
    if (status == google.maps.GeocoderStatus.OK) {
      //alert(results[0].geometry.location);
      myStreetView = new google.maps.StreetViewPanorama(document.getElementById("map_canvas"));
      myStreetView.setPosition(results[0].geometry.location);
      google.maps.event.addListenerOnce(myStreetView, 'status_changed', function() {
        var SVstatus = myStreetView.getStatus()
        document.getElementById('info').innerHTML = "Street View Status="+SVstatus;
        var heading = google.maps.geometry.spherical.computeHeading(myStreetView.getLocation().latLng, results[0].geometry.location);
        myStreetView.setPov({
          heading: heading,
          pitch: 0
        });
        setTimeout(function() {
          marker = new google.maps.Marker({
            position: results[0].geometry.location,
            map: myStreetView,
            title: address
          });
          if (marker && marker.setMap) marker.setMap(myStreetView);
        }, 500);
      });

    } else {
      alert("Geocode was not successful for the following reason: " + status);
    }
  });
  google.maps.event.addDomListener(document.getElementById('geoBtn'), 'click', geocodeAddress);
}
google.maps.event.addDomListener(window, 'load', geocodeAddress);
```

```
html,
body,
#map_canvas {
  height: 100%;
  width: 100%;
}
```

```
<script src="http://maps.google.com/maps/api/js?libraries=geometry"></script>
<input id="address" type="text" value="5175 Buena Vista Boulevard, Castle Rock, CO 80109, USA" />
<input id="geoBtn" type="button" value="Go" />
<div id="info"></div>
<div id="map_canvas"></div>
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-07-12T18:28:04.393

我也注意到，谷歌似乎正在使用不同的算法在其网站上显示该图像（在左侧面板中），并且它更准确，因为它位于该位置的正面。

没有直接的方法可以通过他们的“街景图像 API”获得该角度，但您可以使用 javascript API 计算该角度并将其传递给图像 API。

这里的问题是我们怎么知道哪个是建筑物的前面？，前面通常是街道入口的位置。因此，您可以使用 DirectionService 获取最近的交通开始位置，通常是建筑物入口处的道路，使用此位置您现在可以使用其几何实用程序方法轻松计算航向并将其传递给您的 Image API。

# iphone - RootViewController 在 IOS 6 中导致方向问题

> ID：16111628
> 
> 赞同：0
> 
> 时间：2013-04-19T18:53:01.380
> 
> 标签：iphone, ios6

在我的应用程序的某些页面上更改我的方向时遇到问题。该`shouldAutoRotate`功能不会在任何一页上触发。我做了一些挖掘，希望有人能告诉我这段代码是否正确。

我有一个窗口、一个名为 homepageController 的导航控制器和一个名为 mainController 的标签栏控制器。该应用程序的工作方式如下。我提供 homepageController 供用户登录。输入正确的登录密钥后，我从窗口中删除 homepageController 视图并添加 mainController 视图。这是代码

```
[UIView beginAnimations:nil context:nil];
[UIView setAnimationDuration:0.6];
[UIView setAnimationDelegate:self];

[UIView setAnimationTransition:UIViewAnimationTransitionCurlUp forView:appDel.homePageController.view.superview cache:NO];

[appDel.homePageController.view removeFromSuperview];

[UIView commitAnimations];

[appDel.window addSubview:appDel.mainController.view];
[appDel.mainController setSelectedIndex:0];
[appDel.window bringSubviewToFront:appDel.mainController.view]; 
```

我转到标签栏上的第一页并尝试旋转它，并在 上设置断点`shouldAutoRotate`，但它永远不会触发。

我再次进行了一些挖掘，发现我`shouldAutoRotate`在 homepageController 的 .m 文件中的方法会在我改变方向时被触发。我查看了我的 xib 文件，这就是我所拥有的。

![在此处输入图像描述](https://i.stack.imgur.com/0GFfk.png)

我看到我的 homepageController 是 rootViewController 并且在 mainController 上从选项卡切换到选项卡时，我正在使用此代码。

```
-(void)tabBarController:(UITabBarController *)tabBarController didSelectViewController:(UIViewController *)viewController{

    UINavigationController *nav = (UINavigationController *) viewController;
    [nav popToRootViewControllerAnimated:NO];

} 
```

所以看到我的 homepageController 是 rootViewController 这就是为什么`shouldAutoRotate`总是在那里被调用。

我想知道是否有更好的解决方案。我不认为我这样做是对的，所以任何指导都会很棒。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T19:16:18.183

我认为`shouldAutoRotate`没有打电话是因为你正在使用`addSubView:`like

```
[appDel.window addSubView: appDel.mainController] 
```

将您的 viewcontrollers 设置为 rootviewControllers 您在窗口中用作 addSubview 的任何地方。

所以使用

```
 appDel.window.rootViewController= appDel.mainController; 
```

可能是现在`shouldAutoRotate`会火的事件。

希望对你有效。

# android - jsoup.connect 和 jsoup.parse 有什么区别？

> ID：16111633
> 
> 赞同：0
> 
> 时间：2013-04-19T18:53:23.023
> 
> 标签：android, jsoup

`jsoup.connect`和有什么区别`jsoup.parse`？似乎两者都做同样的工作`Jsoup.connect(URL);`并且`Jsoup.parse(Html);`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T18:56:04.510

正如您刚刚在问题中所写，`connect()`需要一个**URL**。
然后它发送一个 HTTP 请求并解析结果。

`parse()`接受一串原始 HTML，并且不涉及网络。

# javascript - 允许元素水平漂浮在屏幕外

> ID：16111635
> 
> 赞同：4
> 
> 时间：2013-04-19T18:53:26.227
> 
> 标签：javascript, css, html

我在这里有点麻烦，我有 6 个`<li>`元素集`<ul>`。[这是一个演示](http://jsbin.com/ixibed/1/edit)。我的目标是让元素从页面右侧溢出，稍后我将使用 javascript 循环浏览它们。出于某种原因，无论我尝试什么，它都会将其他元素向下推。我努力了：

```
float:left;

display:inline-block; 
```

实际上，每种显示方式，也尝试过`clear:both;`我也尝试过将列表设置在 div 中并将宽度设置为荒谬的像素宽度，并希望将其正确地推离边缘，但它什么也没做。

有任何想法吗？

我想尽量避免使用 javascript 解决方案，但欢迎一切。

注意：最终这些将超过 20% 的宽度，每个都`<li>`将跨越屏幕宽度并在 jquery 这么说时移入

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T19:02:15.017

您需要将 li 宽度设置为固定宽度而不是 20%，如果您将其作为百分比，那么无论您的容器有多大，li 始终是该宽度的 20%。

还要确保 li 容器有足够大的宽度来容纳你的 li

像这样的东西

[http://jsbin.com/eyemaf/1/edit](http://jsbin.com/eyemaf/1/edit) 希望这个链接有效 我通常不使用 jsbin

```
.bodynavs{
    width:200px;
    min-height:100px;
    border:1px solid green;
}

#slideimages{
    list-style-type:none;
    padding:0;
    margin:0;
    overflow:hidden;
    width: 2000%;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-19T19:04:28.777

您需要尝试更改`white-space`CSS 属性：

```
white-space: nowrap; 
```

这将导致您的列表元素全部在一行上，按预期离开屏幕，并根据需要滚动。

# sql - 在同一列中求和 MAX 和 MIN 值

> ID：16111637
> 
> 赞同：0
> 
> 时间：2013-04-19T18:53:34.950
> 
> 标签：sql, sum, max, min

我正在尝试提取工资单数据，并且需要在 [PAYRATE] 列中添加最大值和最小值以得出平均费率。该表可以有多个具有相同工资率的工资单行，因此 AVG[PAYRATE] 将不起作用。我尝试了下面的代码，但失败了。这可以做到吗？

```
(SELECT SUM((MAX(payrate))+(MIN(payrate)))
FROM    PAYCHECKS
WHERE PAYROLCD in ('01', '02') 
AND PYRLRTYP = 1 
AND EMPLOYID = A.EMPLOYID 
AND PYADNMBR = A.PYADNMBR) AS PAYRATE 
```

无法对包含聚合或子查询的表达式执行聚合函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T18:54:19.647

删除外部`sum`：

```
SELECT (MAX(payrate)+MIN(payrate))/2 AS PAYRATE
FROM    PAYCHECKS
WHERE PAYROLCD in ('01', '02') 
AND PYRLRTYP = 1 
AND EMPLOYID = A.EMPLOYID 
AND PYADNMBR = A.PYADNMBR 
```

我加了一个`/2`平均值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T19:10:39.583

您需要对最小值和最大值进行平均。此外，您需要除以小数 2 以获得准确的结果，否则如果仅除以 2，小数结果将被截断。您可以根据需要在下面更改比例和精度。

```
SELECT ((MIN(payrate)+MAX(payrate))/CAST(2 AS DECIMAL (9,2)) AS PAYRATE
FROM    PAYCHECKS
WHERE PAYROLCD in ('01', '02') 
AND PYRLRTYP = 1 
AND EMPLOYID = A.EMPLOYID 
AND PYADNMBR = A.PYADNMBR 
```

# iphone - iOS 通用应用程序中的自定义头文件

> ID：16111638
> 
> 赞同：0
> 
> 时间：2013-04-19T18:53:35.607
> 
> 标签：iphone, ios, ipad, user-interface, universal

我可以做一些简单的事情吗：

**myHeaderFile~iphone.h**

**myHeaderFile~iPad.h**

然后：#import "myHeaderFile.h"

?

我假设没有，但你明白了。有小费吗？

如果我尝试使用宏，它不起作用，因为在解析宏时，应用程序已经在运行。我只需要为不同的屏幕分辨率加载不同的定义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T20:14:08.393

像这样的东西怎么样？

```
#ifdef UI_USER_INTERFACE_IDIOM()
  #define IS_IPAD() (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
#else
  #define IS_IPAD() (false)
#endif 
```

然后您可以有选择地构建代码，例如：

```
if (IS_IPAD()){
// do something for iPad
}
else {
// do something for iPhone/iPod
} 
```

# javascript - 为什么javascript中的数组不是固定长度的？

> ID：16111641
> 
> 赞同：-1
> 
> 时间：2013-04-19T18:53:43.430
> 
> 标签：javascript, arrays

在 JAVA 中，数组的长度总是固定的。如果我们想要一个动态数组，我们使用 ArrayList。但似乎在 javascript 中，数组可以使用`push()`and动态递增和递减`pop()`。数组在javascript中的处理方式不同有什么原因吗？原因是不是这样：固定长度的数组是可有可无的......即没有动态数组无法覆盖的情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T18:55:31.893

> *“在 JAVA 中，数组始终是固定长度的......有没有理由在 javascript 中以不同方式处理数组？”*

当然。这是一种完全不同的语言。数组是对象，对象没有长度的概念。

# vba - 整数的 FILTER 函数 - VBA

> ID：16111643
> 
> 赞同：1
> 
> 时间：2013-04-19T18:53:46.667
> 
> 标签：vba

我搜索了该网站，但没有成功，并尝试对此进行一些研究，但面临“类型不匹配”错误。

我将数组声明为整数类型，但 FILTER 函数似乎只适用于 STRING。你能告诉我如何使用 FILTER 函数处理整数吗？

`If UBound(Filter(CntArr(), count)) > 0 Then msgbox "found"`

`End If`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T19:15:55.483

据我了解，您需要知道数组中是否存在指定的计数。你可以使用`for loop`它：

```
Dim found as Boolean
found = False
For i = 0 To UBound (CntArr())
   If CntArr(i) = count Then
      found = True
      Exit For
   End If
Next i
If found Then msgbox "found" End If 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-03-07T08:45:38.107

下面我创建了返回布尔值的 IsIntegerInArray() 函数。跟随两个 Subs 以获取整数数组声明的示例。将数组声明为 Integer 还应该防止隐式数据转换引起的一些不必要的错误。

```
Sub test_int_array()
    Dim a() As Integer

    ReDim a(3)
    a(0) = 2
    a(1) = 15
    a(2) = 16
    a(3) = 8

    '''   expected result: 1 row for each integer in the array
    Call test_printing_array(a)
End Sub

Sub test_printing_array(arr() As Integer)
    Dim i As Integer

    For i = 1 To 20
        If IsIntegerInArray(i, arr) Then
            Debug.Print i & " is in array."
        End If
    Next i
End Sub

Function IsIntegerInArray(integerToBeFound As Integer, arr() As Integer) As Boolean
    Dim i As Integer

    '''   incorrect approach:
    '''   IsIntegerInArray = (UBound(Filter(arr, integerToBeFound)) > -1)   ' this approach searches for string, e.g. it matches "1" in "12"

    '''   correct approach:
    IsIntegerInArray = False
    For i = LBound(arr) To UBound(arr)
        If arr(i) = integerToBeFound Then
            IsIntegerInArray = True
            Exit Function
        End If
    Next i
End Function 
```

# android - 用于多个 EditText 的 TextWatcher

> ID：16111644
> 
> 赞同：1
> 
> 时间：2013-04-19T18:53:52.030
> 
> 标签：android, android-edittext, textwatcher

我希望能够根据 2 of 3 中的输入来计算一些东西`EditText`。例如：我在 ET 1 和 2 中进行输入 -> 我在 ET 3 中进行计算。ET 1 和 3 -> 在 ET 2 中进行计算...等等。

我让它与 2 一起工作，`EditText`但与 3 我得到一个 StackOverFlowError。

```
private class GenericTextWatcher implements TextWatcher {

    private View view;

    private GenericTextWatcher(View view) {
        this.view = view;
    }

    public void beforeTextChanged(CharSequence charSequence, int i, int i1,
            int i2) {
    }

    public void onTextChanged(CharSequence charSequence, int i, int i1,
            int i2) {
    }

    public void afterTextChanged(Editable editable) {
        switch (view.getId()) {
        case R.id.liter_input:
            try {
                if (amount_widget.getText().toString().equals(" ") == false
                        || literPrice_widget.getText().toString()
                                .equals(" ") == false
                        || price_widget.getText().toString().equals(" ") == false) {
                    double editTextCalc = Double.parseDouble(amount_widget
                            .getText().toString())
                            * Double.parseDouble(literPrice_widget
                                    .getText().toString());
                    editTextCalc = Math.round(editTextCalc * 100) / 100.0;
                    price_widget.setText(String.valueOf(decimalFormat
                            .format(editTextCalc)));
                }

            } catch (Exception e) {
                // TODO: handle exception
            }
            break;
        case R.id.literprice_input:
            try {
                if (amount_widget.getText().toString().equals(" ") == false
                        || literPrice_widget.getText().toString()
                                .equals(" ") == false
                        || price_widget.getText().toString().equals(" ") == false) {
                    double editTextCalc = Double.parseDouble(amount_widget
                            .getText().toString())
                            * Double.parseDouble(literPrice_widget
                                    .getText().toString());
                    editTextCalc = Math.round(editTextCalc * 100) / 100.0;
                    price_widget.setText(String.valueOf(decimalFormat
                            .format(editTextCalc)));
                }

            } catch (Exception e) {
                // TODO: handle exception
            }
            break;
        case R.id.price_input:
            try {
                if (amount_widget.getText().toString().equals(" ") == false
                        || literPrice_widget.getText().toString()
                                .equals(" ") == false
                        || price_widget.getText().toString().equals(" ") == false) {
                    double editTextCalc = Double.parseDouble(amount_widget
                            .getText().toString())
                            / Double.parseDouble(price_widget.getText()
                                    .toString());
                    editTextCalc = Math.round(editTextCalc * 100) / 100.0;
                    literPrice_widget.setText(String.valueOf(decimalFormat
                            .format(editTextCalc)));
                }

            } catch (Exception e) {
                // TODO: handle exception
            }
            break;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-04T17:53:35.977

好的，我刚刚开始再次查看我的代码。为什么没有人找到答案？这真的没那么难。

所以我只是`if-statements`在每个 try 块中用另一个`if-statement`看起来像这样的块包围：

```
if(edittext.isFocused()){
   try-catch block
} 
```

现在一切正常。没有`StackOverflowException`了，因为`textwatcher`唯一开始它的工作`edittext`是专注的。文本更改不再触发无限循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T19:00:56.853

您应该检查 an 中的更改是否`EditText`由于 other 中的更改而发生`EditText`。在类中创建一个`boolean`字段并使用以下命令对其进行初始化`false`：

```
private boolean mIsChanging = false; 
```

检查`afterTextChanged()`此字段是否存在`false`或退出：

```
public void afterTextChanged(Editable editable) {
    if (mIsChanging) {
        return;
    }

    mIsChanging = true;

    // Then do what you did previously...

    mIsChanging = false;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-17T16:02:18.440

使用 Editable 是可能的，您需要使用 hashCodeFunction

```
@Override
public void afterTextChanged(Editable s) {
    if (editText.getText().hashCode() == s.hashCode()) {
        // some
    }
} 
```

# powershell - 如何将字符串与powershell中包含空格的链接连接起来

> ID：16111648
> 
> 赞同：2
> 
> 时间：2013-04-19T18:54:02.657
> 
> 标签：powershell, hyperlink, concatenation, string-concatenation

这是我的代码，用于检查用户密码何时到期，如果密码将在 14 天内到期，则通过电子邮件发送给他们。由于电子邮件正文中的链接中有空格，因此该链接不包含整个文件名。

```
#Add the Quest PowerShell snapin
Add-PsSnapIn Quest.ActiveRoles.ADManagement -ErrorAction SilentlyContinue

#Clear the placeholder log file
Clear-Content O:\logs\network\passwordchangeemails.txt

#Set Email Variables
$today = Get-Date
$logdate = Get-Date -format yyyyMMdd
$emailFrom = "my.name@mycompany.com"
$body = "Good Morning, `n`n"
$body += "As a courtesy reminder, your Company password will be expiring soon. `n`n"
$body += "If you allow your password to expire, you will be unable to access our network, mail or QAD until you recieve assistance from the Helpdesk. `n`n"
**$body += "To avoid this, please change your network password as soon as possible. (Remote users, please follow the password change procedure for remote users. Click Here -> " + "\\mydfsshare.net\share\helpdesk\guides\Passwords - Change procedure for remote users.pdf ) `n`n"**
$body += "Feel free to contact the Help Desk by phone at 555-555-5555 or by email at Helpdesk@mycompany.com `n"
$body += "Thanks!"

#Get Active Directory Information
Get-QADUser -SizeLimit 0 | Select-Object samAccountName,mail,PasswordStatus | 
Where-Object {$_.PasswordStatus -ne "Password never expires" -and $_.PasswordStatus -ne "Expired" -and $_.PasswordStatus -ne "User must change password at next logon." -and $_.mail -ne $null} | 

#For each user, get variables
ForEach-Object {  
  $samaccountname = $_.samAccountName
  $mail = $_.mail 
  $passwordstatus = $_.PasswordStatus
  $passwordexpiry = $passwordstatus.Replace("Expires at: ","")
  $passwordexpirydate = Get-Date $passwordexpiry
  $daystoexpiry = ($passwordexpirydate - $today).Days

      #If days to expire is lessthan 14 days, send email to user
    if ($daystoexpiry -lt 14) {
    $emailTo = "$mail"
    $subject = "Company IT Notification: Your Network password will expire in $daystoexpiry day(s). "    
    Send-MailMessage -To $emailTo -From $emailFrom -Subject $subject -Body $body -SmtpServer 192.168.1.191
    Write-Host "Email was sent to $mail on $today"
    Add-Content O:\logs\network\passwordchangeemails.txt  "Email was sent to $mail on $today"
  }
}
$recipients = "my.name@mycompany.com"
#Copy contents of log file to email and send to IT Department
$content = [IO.File]::ReadAllText("O:\logs\network\passwordchangeemails.txt")
Send-MailMessage -To $recipients -From "my.name@mycompany.com" -Subject "Password change log for $today" -Body "This is the log from $today, $content" -SmtpServer 111.111.111.111 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T20:10:07.960

抱歉，我现在无法对此进行测试，但如果可以使用 HTML，请尝试按如下方式包装链接...

```
"<a href=""file://///mydfsshare.net/share/helpdesk/guides/Passwords - Change procedure for remote users.pdf"">Text you want the users to see goes here</a><br>`n 
```

然后在 Send-Mailmessage 上设置 -BodyAsHtml：

```
Send-MailMessage -To $emailTo -From $emailFrom -Subject $subject -Body $body -SmtpServer 192.168.1.191 -BodyAsHtml 
```

# sql - 如果行数不能被 15 整除，如何将空白行添加到存储过程

> ID：16111654
> 
> 赞同：0
> 
> 时间：2013-04-19T18:54:31.763
> 
> 标签：sql, sql-server-2008

我有一个存储过程，我想输出一个可被 15 整除的行数。例如，我有一个输出 33 行但每页恰好包含 15 行的存储过程。在只有 3 行的最后一页上，间距搞砸了。因为行数始终是动态的，所以我认为将行数设置为可被 15 整除的数字会更容易。所以在这种情况下，它将添加 12 个空白行以保持间距正确。

这是我的代码：

```
SELECT  ROW_NUMBER() OVER ( ORDER BY YEAR(rce.Ecodate) ) AS Row ,
        rce.ReportRunCaseId AS CaseId ,
        YEAR(rce.EcoDate) AS EcoYear ,
        SUM(rce.NetInv) AS NetInvSum ,
        SUM(rce.NDCash) AS NDCashSum ,
        SUM(rce.DiscCash) AS DiscCashSum ,
        SUM(rce.GrossGas) AS GrossGasSum ,
        SUM(rce.GrossOil) AS GrossOilSum ,
        SUM(rce.NetProdTax) AS NetProdTaxSum ,
        SUM(rce.NetOpCost) AS NetOpCostSum ,
        SUM(rce.WellCost) AS WellCostSum ,
        SUM(rce.NetOil) AS NetOilSum ,
        SUM(rce.CoNetRevOil) AS CoNetRevOilSum ,
        SUM(rce.CoNetRevGas) AS CoNetRevGasSum ,
        SUM(rce.NetGas) AS NetGasSum ,
        rce.WellCount ,
        rcl.SortId
FROM    PhdRpt.ReportCaseList AS rcl
        INNER JOIN PhdRpt.RptCaseEco AS rce ON rce.ReportId = rcl.ReportId
                                               AND rce.ReportRunCaseId = rcl.ReportRunCaseId
GROUP BY rcl.SortId ,
        rce.ReportId ,
        rce.ReportRunCaseId ,
        YEAR(rce.EcoDate) ,
        rce.WellCount 
```

我读过我可以使用 INSERT INTO 向表中添加行。我应该使用这样的东西：

```
INSERT  INTO rce
        SELECT  num - 1
        FROM    T1
        WHERE   ( num % 15 ) = 0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T18:59:23.303

*   将您在示例中选择的记录插入到临时表中。
*   然后为要添加的空白行再次插入临时表。
*   然后从临时表中选择记录作为存储过程的返回值。

# ios - 使用 CameraUI 拍摄照片和视频：MediaPromise.file 在 iOS 上为空

> ID：16111656
> 
> 赞同：1
> 
> 时间：2013-04-19T18:54:35.097
> 
> 标签：ios, actionscript-3, air, camera

我正在开发一个 AIR 应用程序，它要求用户拍摄照片或视频并将其上传到服务器。
Android 一切正常，但我发现`MediaPromise.file`在`null`iOS 上一切正常。

我根本不需要/不想操作图像/视频，我只需要获取这个`File`/`FileReference`并将其上传到服务器。

我的问题是，由于 iOS 没有给我一个`File`from `MediaPromise`，我没有任何东西要上传。

谷歌搜索我发现了如何`Loader.loadFilePromise()`从承诺中异步加载数据（使用 ），但我不知道如何在调用时将其编码为视频（`camera.launch(MediaType.VIDEO);`实例在哪里）。`camera``CameraUI`

我已经很好地处理了这个`camera.launch(MediaType.IMAGE);`调用，但我真的想直接从操作系统获取文件，如果可能的话，所以我不需要自己编码。

综上所述，我需要`CameraUI`在 iOS 上上传用户刚刚使用 API 拍摄的照片/视频。我怎样才能做到这一点？

**注意**：如果需要，我可以提供一些代码...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-03T16:21:27.610

这似乎是您正在寻找的... [AIR for iOS - 拍摄和上传照片](http://www.fizixstudios.com/labs/do/view/id/air-ios-camera-and-uploading-photos)

# c++ - 我必须使用原子吗 对于“退出”布尔变量？

> ID：16111663
> 
> 赞同：38
> 
> 时间：2013-04-19T18:55:07.103
> 
> 标签：c++, c++11, atomic

我需要为另一个线程设置一个标志才能退出。那个其他线程不时检查退出标志。我是否必须使用 atomic 作为标志，或者只是一个普通的 bool 就足够了，为什么（举例说明如果我使用普通的 bool 可能会出现什么问题）？

```
#include <future>
bool exit = false;
void thread_fn()
{
    while(!exit)
    {
        //do stuff
        if(exit) break;
        //do stuff
    }
}
int main()
{
    auto f = std::async(std::launch::async, thread_fn);
    //do stuff
    exit = true;
    f.get();
} 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-04-19T18:58:31.863

> 我必须对“退出”布尔变量使用原子吗？

**是**的。

要么使用`atomic<bool>`，要么通过（例如）使用手动同步`std::mutex`. 您的程序当前包含*数据竞争*，一个线程可能读取一个变量，而另一个线程正在写入它。这是未定义的行为。

根据 C++11 标准的第 1.10/21 段：

> **如果程序的执行包含不同线程中的两个冲突**操作，则该程序的执行包含数据竞争，其中至少一个不是原子的，并且两者都不会在另一个之前发生。任何此类数据竞争都会导致 **未定义的行为**。

第 1.10/4 段给出了“*冲突*”的定义：

> 如果其中一个修改了内存位置 (1.7) 而另一个访问或修改了相同的内存位置，则两个表达式求值会*发生冲突。*

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-04-19T19:06:53.560

是的，你**必须**有一些同步。正如您所说，最简单的方法是使用`atomic<bool>`.

正式地，正如@AndyProwl 所说，语言定义说在这里不使用原子会产生未定义的行为。这是有充分理由的。

首先，变量的读取或写入可以通过线程切换中途中断；另一个线程可能会看到部分写入的值，或者如果它修改了该值，则原始线程将看到一个混合值。第二，当两个线程运行在不同的核上时，它们有独立的缓存；写入一个值会将其存储在缓存中，但不会更新其他缓存，因此一个线程可能看不到另一个线程写入的值。第三，编译器可以根据看到的内容重新组织代码；在示例代码中，如果循环内没有改变 的值`exit`，编译器没有任何理由怀疑该值会改变；它可以把循环变成`while(1)`.

Atomics 解决了所有这三个问题。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2015-04-15T08:10:07.287

实际上，在这个特定示例中，纯 bool 没有任何问题。唯一的注意是将 bool 退出变量声明为 volatile 以将其保存在内存中。CISC 和 RISC 架构都将 bool 读/写实现为严格的原子处理器指令。现代多核处理器也具有先进的智能缓存实现。因此，不需要任何内存屏障。标准引用不适用于这种特殊情况，因为它处理唯一的一次写入和唯一一个线程的读取。

# apache-camel - Apache Camel：测试端点是否启动

> ID：16111664
> 
> 赞同：2
> 
> 时间：2013-04-19T18:55:09.113
> 
> 标签：apache-camel

Camel 是否提供任何开箱即用的东西来告诉它是否能够连接所有端点？这些端点可以是 MQ、webservice 等。
如果不是，那么我必须编写一个 servlet，它将测试请求发送到所有端点。我将使用`multicast`or`splitter`来实现这个实现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-28T10:55:43.490

根据我的经验，如果 from() 端点不可用，Camel 只会提供警告日志，因为它会不断尝试从中读取。在交换尝试使用该端点之前，不会访问其他所有端点。如果您的目标是测试各种资源是否存在，我相信您需要创建自己的测试程序。我不认为这将作为一项功能实现，因为如果资源关闭并定义适当的行为，通常应用程序会构建错误处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-27T14:51:12.097

如果我们谈论的是制片人，那么不会。例如，如果您的路由正在向一个`amq`或`http4`端点发送消息，camel 不会自动在这些连接上发送 TCP 数据包以进行监控。处理外部端点故障的常用方法是使用“断路器”。看看[https://camel.apache.org/load-balancer.html](https://camel.apache.org/load-balancer.html)。恕我直言，一个更强大的替代方案是 Netflix 的[Hystrix](https://github.com/Netflix/Hystrix/wiki/How-it-Works "海斯特里克斯")。

如果你有一个轮询消费者，比如 a ，`from:ftp://..`那么轮询消费者将每隔 n 毫秒轮询一次消息，如果连接中断，你会收到错误消息。

# hibernate - Hibernate JPA外键无父

> ID：16111665
> 
> 赞同：0
> 
> 时间：2013-04-19T18:55:11.440
> 
> 标签：hibernate, jpa, hibernate-mapping

在测试我的实体时，我得到错误外键没有父；FKF7EC361BFEA0E826 表：DEVICE_DEVICE_PRESETS
我正在通过在我的设备类构造函数中创建实体进行测试，当我没有创建存储的预设实体并将其添加到我的设备预设实体时会发生错误。如果我创建存储的预设实体并将其添加到我的设备实体中，则代码运行良好。
(1)-当存储的预设实体通过如下所示的显式外键列链接时会发生错误 (stored_preset_num)
(2)- 当实体共享相同的主键值时不会发生错误

有人可以帮我理解为什么当仅通过外键链接时它会强制实体存在而不是仅仅强制关系？为什么我需要使用 (1) 而不是 (2) 创建存储的预设实体

```
DEVICE

@OneToMany(cascade=CascadeType.ALL)
@JoinColumns({
    @JoinColumn(name="device_id",referencedColumnName="device_id"),
    @JoinColumn(name="node_id",referencedColumnName="node_id"),
    @JoinColumn(name="instance_id",referencedColumnName="instance_id")
})
@LazyCollection(LazyCollectionOption.FALSE)
   private List<DevicePreset> devicePresets; 
```

```
DEVICE PRESETS
@ManyToOne
private Device device;
@OneToOne(cascade=CascadeType.ALL)
@JoinColumns({   @JoinColumn(name="stored_preset_num",referencedColumnName=" stored_preset_num",insertable=false,updatable=false)
 })
private StoredPreset storedPreset; 
```

存储的预设

```
@OneToOne
private DevicePreset devicePreset; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T22:19:53.383

我们重新来过吧。你的映射是错误的。在双向关联中，一侧是所有者侧，并且包含映射（或选择使用默认映射，不使用任何 JoinTable 或 JoinColun 注释），另一侧必须标记为另一侧的相反侧，使用`mappedBy`属性。所以映射应该是：

在双向一对多关联中，您别无选择：多方必须是所有者方。

所以映射应该是：

设备：

```
@OneToMany(cascade=CascadeType.ALL, mappedBy = "device")
@LazyCollection(LazyCollectionOption.FALSE)
private List<DevicePreset> devicePresets; 
```

设备预设：

```
@ManyToOne
@JoinColumns({
    @JoinColumn(name="device_id",referencedColumnName="device_id"),
    @JoinColumn(name="node_id",referencedColumnName="node_id"),
    @JoinColumn(name="instance_id",referencedColumnName="instance_id")
})
private Device device;

@OneToOne(cascade=CascadeType.ALL)
@JoinColumn(name="stored_preset_num",referencedColumnName=" stored_preset_num")
private StoredPreset storedPreset; 
```

存储的预设

```
@OneToOne(mappedBy = "storedPreset")
private DevicePreset devicePreset; 
```

# delphi - 在 Delphi XE3 上使用 TIBDatabase 连接到 Firebird 2.1 数据库

> ID：16111666
> 
> 赞同：2
> 
> 时间：2013-04-19T18:55:12.317
> 
> 标签：delphi, firebird

是否可以使用 Interbase 组件连接到 Firebird 2.1 数据库？

我正在将我的软件从 delphi 7 迁移到 XE3，并且我使用了在我看来可以更新到 XE3 上的 Interbase 组件的 IBX 组件，但是发生了一些尴尬的错误。

我开始了一个新项目来隔离问题，并尝试连接到我的软件数据库。结果如下。

1 - 我可以正常使用 TIBDatabase 连接到数据库

2 - TIBTable 可以正常列出数据库表

3 - TIBTable 可以正常获取字段信息

*4 - 当我尝试激活 TIBTable 时，我收到错误消息：“动态 SQL 错误。SQL 错误代码 -206。未知列。IBTable1。在第 1 行，第 8 列”。IBTable1 是 IBTable 组件名称 (???)

*5 - 当我尝试使用 TIBSQL 时，我将它链接到数据库，当我尝试编辑 SQL 查询时，Delphi 死了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T09:12:54.667

不久前我遇到了类似的问题，虽然有解决办法，但最好的办法是经历痛苦并迁移到其他地方。即使你解决了这个问题，你也会一直遇到小问题，直到你做出改变

# testng - 如何实现并行运行的多个测试与在 testNG 中运行的最终测试之间的依赖关系？

> ID：16111668
> 
> 赞同：0
> 
> 时间：2013-04-19T18:55:17.557
> 
> 标签：testng

完成所有测试后，我需要将 testNG 结果移动到结果文件夹中。我所有的测试都是并行运行的。这使我无法在 testng.xml 中所有测试的底部添加单独的测试来复制结果……因为该测试将并行运行，而不是在所有其他测试完成后运行。

我目前的解决方案是在 testng.xml 文件中创建 2 个套件。一个用于并行运行我的所有测试，另一个用于复制结果。

这是正确的解决方案还是有更好的方法？

目前我的解决方案如下。

```
<?xml version="1.0" encoding="UTF-8"?>

<suite name="Suite 1">
<suite-files>
 <suite-file path="./SmokesQA.xml" />
 <suite-file path="./CopyResults.xml" />
 </suite-files>
</suite> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T05:43:39.250

通过testng，由于没有保证监听器的顺序，可能是监听器运行时没有生成reports文件夹。
所以，我不认为 testng 是寻找解决方案的正确地方。

我能想到的其他一些方法是让 jenkins 作业运行您的测试，并作为后期构建步骤执行一批复制到文件夹。

或轮询和复制报告的服务...

# sencha-touch-2 - 数组存储 Sencha Touch 2

> ID：16111683
> 
> 赞同：1
> 
> 时间：2013-04-19T18:56:10.460
> 
> 标签：sencha-touch-2

在使用 sencha touch 2 构建我的第一个移动应用程序时，我遇到了一些问题，我似乎找不到他们的答案。

1.  应用程序配置应该存储在哪里（主题、语言、字体大小）。我正在考虑计算来自商店的数据，如果大于 0 则处理该数据，否则添加数据（这只会在第一次打开应用程序或清除本地存储时发生..）。这种事情还有其他选择（比如当用户与应用程序交互时将更改的数组之类的东西）？

2.  我需要在我的应用程序中使用大约 100 张图像。我不知道我在这里有哪些选项可以将图像嵌入到应用程序中。看到很多从外部服务器加载图像的示例，但不确定是否有将它们与应用程序打包的选项。

3.  如果我有一个带有名称（键）和图像 url（值）的数组，这个数组应该在哪里？在一个json文件中，每次需要一个名字时都使用ajax加载？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T06:25:50.150

让我建议几个选项：

1- 应用程序配置：如果应用程序配置类似于一组不会因用户交互而改变的常量值，您可以创建一个文件（例如 properties.js）并在应用程序加载时加载它。

```
 Properties = {
      SERVICE_URL : 'http://mycompany.com/api',
      PAGE_SIZE : 20
  } 
```

并加载它你只需要编辑 app.json

```
"js": [
    {
        "path": "touch/sencha-touch.js",
        "x-bootstrap": true
    },
    {
        "path": "resources/data/properties.js"
    }
] 
```

如果您想控制这些值，则可以将其保存在您的服务器上，并将其 URL 作为 app.json 中的“路径”

2-总是可以选择将图像打包到您的应用程序中，就像所有图标和启动图像都已打包一样，但不建议这样做，因为它会增加可部署的大小，并且互联网连接速度慢和低端设备的人可能会跳过安装它如果大小它太大了。

3-无需每次需要时都加载JSON文件，您可以在第一次加载后将数据缓存在全局变量中，并在需要时继续引用数组。现在在哪里定义全局变量是另一个有趣的讨论，人们提出了很多建议，但我更喜欢有一个可以保留所有全局函数和变量的单例类。请参阅此线程以了解如何：[如果在执行 Ext.application() 之前需要全局辅助函数，我应该将它们放在哪里？](https://stackoverflow.com/questions/15761593/where-do-i-put-my-global-helper-functions-if-they-are-needed-before-ext-applicat/15765171#15765171)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T04:26:36.247

对于文本，我们可以这样尝试

```
 var A_address=Ext.getCmp('address').getValue();  //get the value
    localStorage.setItem("Adult1_select1",A_select1); // assign localstore

     var web_arrayTotalPAssengers=[];
      web_arrayTotalPAssengers.push(localStorage.getItem("web_TotalPassengers"));
     console.log(web_arrayTotalPAssengers); 
```

// 压入数组中的值...

```
 Ext.Ajax.request({
                                        url:'http:/...........',
                                        method:'POST',
                                        disableCaching: false,
                                        headers: {
                                            'Accept': 'application/json',
                                            'Content-Type': 'application/json'
                                        },
                                        jsonData: {

                            origin:Ext.decode(web_arrayTotalPAssengers), //decode and send

                              }

      success:function(response)
                                        {
                                                    console.log(response);
                                            console.log("Success");
                                        },
                                            failure : function(response) 
                                        {
                                            console.log("Failed");
                                        } 
```

# actionscript-3 - 如何更快地更新 as3 代码？

> ID：16111684
> 
> 赞同：0
> 
> 时间：2013-04-19T18:56:15.807
> 
> 标签：actionscript-3, events, frame, updates

是否有可能每帧更新我的代码（as3）超过 1 次？它不需要做任何视觉上的事情。我在 event.ENTER_FRAME 之前使用过。如果有办法这样做，有人可以解释或提供如何做到这一点的链接。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T18:57:43.110

如果您的应用程序以 30fps 运行，您可以将其设置为以 60fps 运行，那么 ENTER_FRAME 将被调用两倍，或者如果您使用计时器更新，您可以将其延迟减少一半。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T19:11:47.337

您可以使用计时器以您想要的任何速率执行代码：

```
 // first parameter for Timer is duration in milliseconds 1000ms = 1 second.
var timer:Timer = new Timer(10,0); 
timer.addEventListener(TimerEvent.TIMER, timerHandler);
timer.start();

function timerHandler(e:TimerEvent):void
{
    // do something;
} 
```

但是，我会质疑您为什么要这样做并确定它是否真的需要。

# javascript - Jquery ajaxSubmit 插件表单输入文件

> ID：16111685
> 
> 赞同：0
> 
> 时间：2013-04-19T18:56:17.400
> 
> 标签：javascript, jquery, html, forms, plugins

在我的网站中，我有一个包含多个文件输入字段的表单。第一个是：

```
<input type="file" name="questionimages[]" multiple /> 
```

我用这个来上传多张图片。接下来是：

```
<input type="file" name="optionimages1" />
<input type="file" name="optionimages2" />
<input type="file" name="optionimages3" />
...
<input type="file" name="optionimagesn" /> 
```

这些输入字段的数量取决于用户输入。除了第一个输入字段之外的所有内容都是由用户动态插入的，我基本上使用 jquery 并使用该`html`方法在用户每次单击按钮时插入一个新的输入字段，并且输入字段的名称通过添加和递增的值而改变输入文件名称的结尾，这样我就可以将其与其他文件区分开来。

我正在使用 Jquery 表单插件通过 ajax 使用该`ajaxSubmit`功能上传图像。

问题是，当用户单击相应按钮以插入新输入时，该新输入字段的名称属性等于`questionimages[]`第一个输入字段的名称，无论用户输入如何，该名称始终存在。即使我写了类似的东西：

```
$('#someID').html('<input type="file" name="optionimages1" />'); 
```

输入字段获取名称`questionimages[]`而不是名称`optionimages1`。这是什么原因造成的？Jquery 表单插件会自动覆盖新插入的输入标签的名称值吗？

注意：我想从动态添加的字段中添加图像，以便我可以将它们与通过 PHP 的第一个输入字段上传的图像区分开来，这就是为什么我不使用第一个输入字段来上传所有图像。如果需要，第一个输入字段可以添加多个图像，但是通过其他输入字段添加的图像是我需要用于其他目的的图像，因此我需要将它们与通过第一个输入字段上传的图像区分开来。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T19:03:05.267

我认为问题在于您添加字段的方式。但是，如果您想手动设置字段的名称，您可以随时使用：

```
$("#newfield").attr("name","theNameIWant"); 
```

更改输入字段的属性“名称”。您还可以像这样选择最后一个输入字段：

```
$(".container input:last") 
```

这样您就可以只更改新添加的字段而无需设置 ID

# git - 如果您的主机不允许 git，您如何从 bitbucket 部署？

> ID：16111688
> 
> 赞同：0
> 
> 时间：2013-04-19T18:56:26.180
> 
> 标签：git, bitbucket

我正在与某人在使用 bitbucket 管理的 repo 上合作，并且希望能够部署到一个开发服务器，不幸的是它不允许 git (lightningbase)。

我希望至少能够以一种方式将 repo 推送到服务器，并遇到 deploybutton.com 作为这样做的一种方式——但它不起作用，而且他们不提供支持。

它可以（通过 SSH）连接到服务器，然后获得连接到 bitbucket 的权限，但是在实际部署时它失败了。我收到一条消息，上面写着有关 bitbucket 密钥的信息，在我有机会阅读之前它就消失了。

任何人都对 deploybutton 有任何经验，或者知道我在服务器上没有 git 的情况下从 bitbucket 推送的另一种方式吗？

正如您可能已经猜到的那样，我是这个版本控制的新手......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T19:07:02.563

好的，我不确定您要问的是哪一个，但我会尝试解决这两个问题。首先，如果您想在没有 GIT 的情况下将 GIT 部署到服务器，请创建一个 git commit 挂钩并使用命令行复制您要部署的文件。[你可以在 git book http://git-scm.com/book](http://git-scm.com/book)中找到关于 git hooks 的大量信息。至于通过 ssh 传输文件，这很可能会更好地处理它自己的帖子。

其次，我快速浏览了 deploybutton，我认为它需要您的 sshkey，这样它就可以在没有密码的情况下部署到远程服务器。您必须生成一个 sshkey 并将其放在您的服务器上并将其上传到 deploybutton。

我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T19:09:22.747

我不确定您的部署过程涉及到什么——有时这可能是一件复杂的事情。

但是，如果您只想复制文件，那么好的旧 SFTP 有什么问题？

它会是这样的：

*   从本地计算机上的 bitbucket 获取最新信息
*   SFTP 到闪电基地
*   复制文件

一些 SFTP 程序（例如：[WinSCP](http://winscp.net/eng/docs/task_synchronize_full)）具有“同步”目录的选项 - 删除本地不存在的文件，并添加存在的文件。一个简单的副本无法处理这个问题。

我特别不熟悉 ligtningbase 或 deploybutton，但上面是简单的东西的一个非常常见的过程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T19:21:31.190

您可以尝试[http://ftploy.com](http://ftploy.com)以便从 git/bitbucket 轻松部署到您的服务器

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-07-30T10:53:19.577

[DeployHQ](https://www.deployhq.com)是一个很棒的工具，用于从 Bitbucket 部署到不支持 Git 的服务器。

# mysql - 将 Spring 数据源代码移至 JavaConfig，现在得到 ClassNotFoundException

> ID：16111690
> 
> 赞同：0
> 
> 时间：2013-04-19T18:56:56.997
> 
> 标签：mysql, spring, maven, spring-mvc

我正在开发一个 Spring、Maven 项目，并将 Spring 数据源代码移至 JavaConfig，现在得到 ClassNotFoundException。

这是错误：

```
Caused by: java.lang.ClassNotFoundException: org.apache.commons.pool.impl.GenericObjectPool 
```

这是 JacaConfig Bean 代码：

```
@Bean
public DataSource dataSource() {

    BasicDataSource ds = new BasicDataSource();

    try {
        ds.setDriverClassName("com.mysql.jdbc.Driver");
        ds.setUsername("jboss");
        ds.setPassword("xoJ4u0Hs");
        ds.setUrl("jdbc:mysql://6dhdbm01/jboss1");

    } catch (Exception e) {
        logger.error(e.getMessage());
    }
    return ds;
} 
```

这是我的 pom.xml 文件：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>

  <groupId>org.xxx.core</groupId>
  <artifactId>Core</artifactId>
  <version>1.0-SNAPSHOT</version>
  <packaging>jar</packaging>

  <name>Core</name>
  <url>http://maven.apache.org</url>

    <properties>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
        <java-version>1.7</java-version>
        <springframework-version>3.1.3.RELEASE</springframework-version>
        <springwebflow-version>2.3.1.RELEASE</springwebflow-version>
        <springsecurity-version>3.1.3.RELEASE</springsecurity-version>
        <org.slf4j-version>1.6.6</org.slf4j-version>
        <hibernate.version>4.1.1.Final</hibernate.version>
    </properties>

    <dependencies>
        <!-- Spring -->

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-orm</artifactId>
            <version>${springframework-version}</version>
            <!-- will come with all needed Spring dependencies such as spring-core
                and spring-beans -->
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-aop</artifactId>
            <version>${springframework-version}</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-jdbc</artifactId>
            <version>${springframework-version}</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-test</artifactId>
            <version>${springframework-version}</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-aspects</artifactId>
            <version>${springframework-version}</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-webmvc</artifactId>
            <version>${springframework-version}</version>
            <exclusions>
                <exclusion>
                    <groupId>commons-logging</groupId>
                    <artifactId>commons-logging</artifactId>
                </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>org.springframework.webflow</groupId>
            <artifactId>spring-faces</artifactId>
            <version>${springwebflow-version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-core</artifactId>
            <version>${springsecurity-version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-config</artifactId>
            <version>${springsecurity-version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-web</artifactId>
            <version>${springsecurity-version}</version>
        </dependency>

        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-ldap</artifactId>
            <version>${springsecurity-version}</version>
        </dependency>

        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-cas</artifactId>
            <version>${springsecurity-version}</version>
        </dependency>

        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-cas-client</artifactId>
            <version>3.0.7.RELEASE</version>
            <exclusions>
                <exclusion>
                    <artifactId>cas-client-core</artifactId>
                    <groupId>org.jasig.cas</groupId>
                </exclusion>
            </exclusions>
        </dependency>

        <dependency>
            <groupId>javax.transaction</groupId>
            <artifactId>jta</artifactId>
            <version>1.1</version>
        </dependency>

        <dependency>
            <groupId>javax.mail</groupId>
            <artifactId>mail</artifactId>
            <version>1.4.5</version>
        </dependency>

        <dependency>
            <groupId>cglib</groupId>
            <artifactId>cglib</artifactId>
            <version>2.2.2</version>
        </dependency>

        <dependency>
            <groupId>mysql</groupId>
            <artifactId>mysql-connector-java</artifactId>
            <version>5.1.21</version>
        </dependency>

        <dependency>
            <groupId>c3p0</groupId>
            <artifactId>c3p0</artifactId>
            <version>0.9.1.2</version>
        </dependency>

        <dependency>
            <groupId>net.sf.jt400</groupId>
            <artifactId>jt400-full</artifactId>
            <version>4.7.0</version>
        </dependency>

        <dependency>
            <groupId>org.apache.httpcomponents</groupId>
            <artifactId>httpcore</artifactId>
            <version>4.2.1</version>
        </dependency>

        <dependency>
            <groupId>org.apache.httpcomponents</groupId>
            <artifactId>httpclient</artifactId>
            <version>4.2.1</version>
            <exclusions>
                <exclusion>
                    <artifactId>commons-logging</artifactId>
                    <groupId>commons-logging</groupId>
                </exclusion>
            </exclusions>
        </dependency>

        <dependency>
            <groupId>org.aspectj</groupId>
            <artifactId>aspectjtools</artifactId>
            <version>1.6.2</version>
        </dependency>

        <dependency>
            <groupId>jstl</groupId>
            <artifactId>jstl</artifactId>
            <version>1.2</version>
        </dependency>

        <!-- Logging -->

        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-ext</artifactId>
            <version>${org.slf4j-version}</version>
        </dependency>

        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-log4j12</artifactId>
            <version>${org.slf4j-version}</version>
        </dependency>

        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-api</artifactId>
            <version>${org.slf4j-version}</version>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>jcl-over-slf4j</artifactId>
            <version>${org.slf4j-version}</version>
        </dependency>
        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.16</version>

        </dependency>
        <!-- JSF-303 Dependency Injection -->
        <dependency>
            <groupId>javax.inject</groupId>
            <artifactId>javax.inject</artifactId>
            <version>1</version>
        </dependency>
        <!-- Servlet -->
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>servlet-api</artifactId>
            <version>2.5</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>javax.servlet.jsp</groupId>
            <artifactId>jsp-api</artifactId>
            <version>2.1</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>jstl</artifactId>
            <version>1.2</version>
        </dependency>
        <!-- Sun Mojarra JSF 2 runtime -->
        <dependency>
            <groupId>com.sun.faces</groupId>
            <artifactId>jsf-api</artifactId>
            <version>2.1.7</version>
        </dependency>
        <dependency>
            <groupId>com.sun.faces</groupId>
            <artifactId>jsf-impl</artifactId>
            <version>2.1.7</version>
        </dependency>

        <!-- JSR 303 validation -->
        <dependency>
            <groupId>javax.validation</groupId>
            <artifactId>validation-api</artifactId>
            <version>1.0.0.GA</version>
        </dependency>

        <!-- **********************************************************************
            ** HIBERNATE DEPENDENCIES ** ********************************************************************** -->

        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-entitymanager</artifactId>
            <version>${hibernate.version}</version>
        </dependency>

        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-validator</artifactId>
            <version>4.0.2.GA</version>
        </dependency>

        <!-- Test -->
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.7</version>
            <scope>test</scope>
        </dependency>

        <dependency>
            <groupId>commons-dbcp</groupId>
            <artifactId>commons-dbcp</artifactId>
            <version>20030825.184428</version>
        </dependency>

    </dependencies>

    <reporting>
        <plugins>
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>cobertura-maven-plugin</artifactId>
                <version>2.5.2</version>
            </plugin>
        </plugins>
    </reporting>

        <build>
            <plugins>
                <plugin>
                    <groupId>org.codehaus.mojo</groupId>
                    <artifactId>sql-maven-plugin</artifactId>
                    <version>1.5</version>

                    <!-- JDBC Driver -->
                    <dependencies>
                        <dependency>
                            <groupId>mysql</groupId>
                            <artifactId>mysql-connector-java</artifactId>
                            <version>5.0.5</version>
                        </dependency>
                    </dependencies>

                    <configuration>
                        <driver>com.mysql.jdbc.Driver</driver>
                        <url>jdbc:mysql://6dhdbm01.uftwf.dev/jboss1</url>
                        <username>jboss</username>
                        <password>xoJ4u0Hs</password>
                        <autocommit>true</autocommit>
                        <srcFiles>
                            <srcFile>src/test/sql/certificate_state_tables.sql</srcFile>
                        </srcFiles>
                    </configuration>
                    <executions>
                        <execution>
                            <id>execute-sql</id>
                            <phase>process-test-resources</phase>
                            <goals>
                                <goal>execute</goal>
                            </goals>
                        </execution>
                    </executions>
                </plugin>
            </plugins>
            <finalName>Core</finalName>
        </build>

</project> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T18:54:00.550

这是pom文件`commons-dbcp:commons-dbcp:20030825.184428`

```
<project>
    <modelVersion>4.0.0</modelVersion>
    <groupId>commons-dbcp</groupId>
    <artifactId>commons-dbcp</artifactId>
    <version>20030825.184428</version>
</project> 
```

显然，它没有声明和依赖（更不用说common-pool）

将 commons-dbcp 版本更改为 1.4，或声明对 commons-pool 的依赖

# c# - 如何检查程序集是否包含单元测试而不加载它？

> ID：16111693
> 
> 赞同：2
> 
> 时间：2013-04-19T18:57:10.807
> 
> 标签：c#, unit-testing, .net-assembly

我目前正在使用以下方法来检查测试程序集：

```
private bool IsTestAssembly(string path)
{
    var assembly = Assembly.LoadFrom(path);
    foreach (var type in assembly.GetTypes())
    {
        var a = type.GetCustomAttributes(true).Select(x => x.ToString());
        if (a.Contains("Microsoft.VisualStudio.TestTools.UnitTesting.TestClassAttribute"))
            return true;
    }
    return false;
} 
```

但是我想在不将程序集加载到内存中的情况下进行检查，因为我需要能够在之后删除它以防验证失败。

我希望我可以简单地卸载程序集，但我很快发现，根据[MSDN](http://msdn.microsoft.com/en-us/library/ms173101%28v=vs.80%29.aspx)：

> 如果不卸载包含它的所有应用程序域，就无法卸载单个程序集。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T17:26:40.437

[我按照TheGreatCO](https://stackoverflow.com/users/1120092/pete-garafano)的建议制定了一个简短的解决方案，即将程序集加载到新的`AppDomain`：

1) 用法：

```
// assemblies are unloaded on disposal
using (var analyser = new AssemblyAnalyser())
{
    var path = "my.unit.tests.dll";
    var b = analyser.IsTestAssembly(path);
    Assert.IsTrue(b);
} 
```

2）实施：

```
public class AssemblyAnalyser : MarshalByRefObject, IDisposable
{
    public AssemblyAnalyser()
    {
        var evidence = new Evidence(AppDomain.CurrentDomain.Evidence);
        var appSetup = new AppDomainSetup()
        {
            ApplicationBase = Path.GetDirectoryName(Assembly.GetExecutingAssembly().Location)
        };
        appDomain = AppDomain.CreateDomain(otherDomainFriendlyName, evidence, appSetup); 
    }

    public bool IsTestAssembly(string assemblyPath)
    {
        if (AppDomain.CurrentDomain.FriendlyName != otherDomainFriendlyName)
        {
            var analyser = appDomain.CreateInstanceAndUnwrap(Assembly.GetExecutingAssembly().FullName, GetType().FullName);
            return ((AssemblyAnalyser)analyser).IsTestAssembly(assemblyPath);
        }
        else
        {
            var assembly = Assembly.LoadFrom(assemblyPath);
            return ContainsTestClasses(assembly);
        }
    }

    public void Dispose()
    {
        if (AppDomain.CurrentDomain.FriendlyName != otherDomainFriendlyName)
        {
            AppDomain.Unload(appDomain);
            GC.SuppressFinalize(this);
        }
    }

    ~AssemblyAnalyser()
    {
        Dispose();
    }

    private bool ContainsTestClasses(Assembly assembly)
    {
        foreach (var type in assembly.GetTypes())
        {
            var attr = type.GetCustomAttributes(true).Select(x => x.ToString());
            if (attr.Contains("Microsoft.VisualStudio.TestTools.UnitTesting.TestClassAttribute"))
                return true;
        }
        return false;
    }

    private const string otherDomainFriendlyName = "AssemblyAnalyser";

    private AppDomain appDomain;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T19:04:09.310

使用[Mono.Cecil](https://github.com/jbevain/cecil)检查程序集。Cecil 不需要加载程序集来检查它。

# c# - 将复选框列表绑定到数据模型中的字典

> ID：16111694
> 
> 赞同：3
> 
> 时间：2013-04-19T18:57:12.403
> 
> 标签：c#, asp.net-mvc-3, data-binding, checkbox, model

我是 MVC3 的新手，我不明白如何使用复选框。在我的模型中，我有一个服务列表和一个可用服务列表。这个想法是显示所有可用的服务，并让用户选择使用哪个服务，只需选中相应的复选框。

```
public Activity()
        {
            .....
            this.Services = new List<Service>();
            this.ServicesChecklist = new Dictionary<Service, bool>();
        }

        public virtual ICollection<Service> Services { get; set; }
        public Dictionary<Service, bool> ServicesChecklist { get; set; } 
```

我能够使用控制器私有字典AssignServiceToActivity（活动活动）的私有方法正确加载服务表

```
 List<Service> s = new List<Service>(db.Services);
            Dictionary<Service, bool> ServicesChecklist = new Dictionary<Service, bool>();
            bool found;

            foreach (var ser in s)
            {
                found = false;
                foreach (var currService in activity.Services)
                {
                    if (ser.id == currService.id)
                    {
                        ServicesChecklist.Add(ser, true);
                        found = true;
                        break;
                    }
                }
                if (!found)
                    ServicesChecklist.Add(ser, false);
            }
            return ServicesChecklist;
        }

in my view I am trying to bind the checkboxes to the ServicesChecklist dictionary

<div id="tabs-2">
         <table style="width:100%">
            <tr>
               <th>
                  Service
               </th>
               <th>
                  Type
               </th>
               <th>
                  Contact
               </th>
               <th>
                  Phone
               </th>
            </tr>
            @foreach (var s in @Model.ServicesChecklist)
            {
            <tr>
               <td>

                  @Html.CheckBox(s.Key.name, s.Key.id) 
                  @Html.DisplayFor(modelItem => s.Key.name)                  
                </td>
               <td>
                  @Html.DisplayFor(modelItem => s.Key.ServiceType.name)
               </td>
               <td>
                  @Html.DisplayFor(modelItem => s.Key.contact_name)
               </td>
               <td>
                  @Html.DisplayFor(modelItem => s.Key.contact_phone)
               </td>

            </tr>
            }
         </table>
      </div> 
```

当页面加载但用户选择未保存在模型中时它工作正常

```
![enter image description here][1]

  [1]: http://i.stack.imgur.com/Buklf.png 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T21:04:14.410

您需要使用带有提交按钮的表单将更改提交回服务器，或者在更改事件发生时使用 JavaScript 提交三个更改。

# sql - LINQ 或 SQL 以获取每个帐户每天最接近特定时间的记录

> ID：16111700
> 
> 赞同：1
> 
> 时间：2013-04-19T18:57:48.327
> 
> 标签：sql, linq

1 表 History with Date (date) 1 table AccountCategories with Account (nvarchar(50)) 1 table Balance with Account(nvarchar(50)), Date(datetime), Balance(float)

我需要一个 LINQ 或 SQL Server 查询来从 Balance 中获取以下信息：

（日期，帐户，余额）历史记录中的每个日期，AccountInfo 中的每个帐户，该日期下午 4:10:00 之前的最后一条记录的余额

下面的我的 SQL 返回下午 4:10:00 之前的所有记录，但我只想要每个帐户的最后一个：

```
select [Date],Account,Balance from Balance where Account in (select Account from AccountCategories) and DATEADD(dd, 0, DATEDIFF(dd, 0, [Date])) in (select DATEADD(dd, 0, DATEDIFF(dd, 0, [Date])) from History) and [Date] <= DATEADD(mi,970,DATEADD(dd, DATEDIFF(dd, 0, [Date]), 0)) order by [Date] desc,Account 
```

这个 LINQ 也不能完全得到我想要的，因为 LINQ to Entities 不支持指定类型成员 'Date'。仅支持初始化程序、实体成员和实体导航属性。'：

```
TimeSpan ts = new TimeSpan(16, 10, 0);
var accts = AccountCategories.Select(u => u.Account);
var pastDates = Histories.Select(u => u.Date);
var dailyBalance = (from dailyBal in Balances where accts.Contains(dailyBal.Account) group dailyBal by dailyBal.Account into a select a.OrderByDescending(t => t.Date).Where(u => u.Date <= (u.Date.Date + ts)).FirstOrDefault()); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T19:04:53.293

这里的一个很大的挑战是您将“日”边界从午夜更改为下午 4:10。我的方法创建了一个新变量，称为`WorkingDay`在此时结束。它通过从 [日期] 中减去 (16*60+10) 分钟然后再增加一天（以获得正确的相应日历日期）来实现这一点。

下一步是用于`row_number()`选择每个工作日的最后一个值：

```
select WorkingDay, account, balance
from (select h.*,
             ROW_NUMBER() over (partition by account, WorkingDay order by [date] desc) as seqnum
      from (select h.*,
                   cast([date]+1-(16*60+10)/(24*60.0) as DATE) as WorkingDay
            from history h
           ) h
     ) h
where seqnum = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T19:54:11.547

这是一个解决方案，它为下午 4:10 之前的记录计算给定日期的 row_number，然后仅返回下午 4:10 之前的余额记录

```
SELECT [date], 
       account, 
       balance 
FROM   (SELECT [date], 
           account, 
           balance, 
           Row_number() 
             OVER ( 
               partition BY CONVERT(DATE, [date]), account 
               ORDER BY [date] DESC) AS seqnum 
    FROM   balance 
    WHERE  CONVERT(DATE, [date]) IN (SELECT CONVERT(DATE, [date]) 
                                     FROM   history) 
           AND account IN (SELECT account 
                           FROM   accountcategories) 
           AND [date] <= Dateadd(mi, 970, CONVERT(DATETIME, 
                                          CONVERT(DATE, [date]))) 
   ) t1 
WHERE  seqnum = 1 
```

# ios - 更改模态视图的演示类型？

> ID：16111701
> 
> 赞同：3
> 
> 时间：2013-04-19T18:57:58.533
> 
> 标签：ios, objective-c, modal-dialog, segue

在情节提要中，当您将 Segue 绘制到模态视图控制器时，您可以选择演示文稿、全屏、页面表、表单等的类型。

我正在展示来自 XIB 的模态视图控制器，并且它以全屏方式展示它。如何以编程方式将其更改为页面表或表单表？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-19T19:07:09.930

在`UIViewController`（代码）中，您可以设置新的`UIViewController`呈现方式。您可以访问的属性：

```
@property(nonatomic, assign) UIModalTransitionStyle modalTransitionStyle 
```

以及不同的类型：

```
typedef enum {
   UIModalPresentationFullScreen = 0,
   UIModalPresentationPageSheet,
   UIModalPresentationFormSheet,
   UIModalPresentationCurrentContext,
} UIModalPresentationStyle; 
```

在代码中：

```
MyViewController *controllerThatWillBePresented = ...
controllerThatWillBePresented.modalTransitionStyle = // The one you want
[self presentModalViewController:controllerThatWillBePresented animated:YES]; 
```

# ios - 如何判断 MoviePlayerController 是否播放过？

> ID：16111703
> 
> 赞同：0
> 
> 时间：2013-04-19T18:58:11.027
> 
> 标签：ios, objective-c, mpmovieplayercontroller

我想阻止用户执行操作，直到他们至少按下 MoviePlayerController 上的播放。了解他们是否一直观看视频或观看了多远也会很有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T19:19:40.130

在某些时候注册播放通知，如下所示：

```
[[NSNotificationCenter defaultCenter] addObserver:self 
    selector:@selector(playbackStateChanged) 
    name:MPMoviePlayerPlaybackStateDidChangeNotification object:nil]; 
```

然后，在playbackStateChanged 中，您可以用一些BOOL 表示您已经播放了视频：

```
 - (void) playbackStateChanged {

   if(moviePlayerController.playbackState == MPMoviePlaybackStatePlaying){
     hasPlayed = YES; //BOOL value
   }// reading the playback

 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T19:25:00.497

您还可以以持久的方式保存状态，因此用户不必在每个应用程序会话中查看视频：

```
[[NSUserDefaults standardUserDefaults] setBool:YES forKey:@"videoViewed"]; 
```

和程序中的其他地方：

```
if ([[NSUserDefaults standardUserDefaults] boolForKey:@"videoViewed"]) {
  do stuff
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T19:12:41.480

您可以设置一个名为 countOfTimesButtons 的变量。您可以在播放按钮上有一个 IBAction，当它被点击时，您可以增加按下的 countOfTimesButtons。如果 countOfTimesButtons 大于 0，您可以根据自己的情况做一些事情。

希望这可以帮助...

# java - 带有 * 的电话号码的正则表达式

> ID：16111705
> 
> 赞同：0
> 
> 时间：2013-04-19T18:58:19.880
> 
> 标签：java, regex

我为电话号码创建了一个正则表达式，如下所示`\\d+ ?\\w{0,9} ?\\d+`。现在我有一个问题，它只接受数字。有时我收到的电话号码是星号，所以它可能是 011***1334。我怎样才能将星星部分合并到上面的正则表达式中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T19:01:20.473

我无法让你的正则表达式首先工作，没有星星，

但无论如何......你可以通过逃避它来代表明星。

`\*`

所以你应该把你所有的都`\d`变成`[\d\*]`，或者`[\\d\\*]`如果你必须`\`在你的java中转义第一个。

一些正则表达式引擎不需要你转义所有特殊字符，`[]`所以如果它一开始不起作用，我会注意这种行为

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T19:01:06.373

任何你用的地方`\\d`，把它变成`[\\d\\*]`

```
[\\d\\*]+ ?\\w{0,9} ?[\\d\\*]+ 
```

不过，我同意山姆的观点；原来看起来很奇怪。如果您只需要数字和星号，应该这样做（转义 Java 风格）：

```
[\\d\\*]{7,10} 
```

# xcode - 在 xcode 中更改应用程序名称会出错

> ID：16111706
> 
> 赞同：1
> 
> 时间：2013-04-19T18:58:21.473
> 
> 标签：xcode

我只尝试更改应用程序的名称，并且在左上角大小的 xcode 中有应用程序名称，我已重命名它，并且在尝试运行它时我得到这个：

```
Could not change executable permissions on the application. 
```

**我已经**尝试过 [了，](https://stackoverflow.com/questions/12848712/changed-project-name-in-xcode-causing-naming-error) 但没有运气，即使我已经更改了所有具有以前名称的行。

现在我不知道该怎么办。请帮忙 。

# java - 如何使用 android Memo App 创建私人笔记

> ID：16111707
> 
> 赞同：1
> 
> 时间：2013-04-19T18:58:26.990
> 
> 标签：java, android

我正在构建一个 android 应用程序，它提供了创建笔记的能力。

为此，我开始下一个活动：

```
Intent notepad = new Intent(Intent.ACTION_MAIN);
notepad.addCategory(Intent.CATEGORY_LAUNCHER);
notepad.setPackage("com.sec.android.app.memo");

// Verify it resolves
PackageManager packageManager = getPackageManager();
List<ResolveInfo> activities = packageManager.queryIntentActivities(notepad, PackageManager.GET_INTENT_FILTERS);
boolean isIntentSafe = activities.size() > 0;

// Start Notepad if it's safe
if (isIntentSafe)
{
    startActivity(notepad);
} 
```

代码工作正常，原生**备忘录** *应用程序*成功启动。

但是，当我从桌面启动**备忘录** *应用程序*时，我在我的应用程序中的备忘录中写的笔记是可见的，我希望这些笔记是私密的，并且只能从我的应用程序中看到。

此功能（创建私人笔记）可通过 NoteViewController 类用于 iPhone 应用程序。

有谁知道这是否适用于android App？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T19:03:21.743

No, the app has to be written with this usecase in mind. Memo wasn't. Also, memo is not available on all phones- many phones replace it with other apps with similar purpose. Some don't have a memo app at all. In fact most don't- the sec in your package name is Samasung Electronics Corp, that app will only appear on Samsung phones (and not all of them).

# javascript - 如何使用javascript正则表达式替换为单词的子字符串

> ID：16111709
> 
> 赞同：1
> 
> 时间：2013-04-19T18:58:33.390
> 
> 标签：javascript, regex, replace, substring

我正在尝试用一个新词替换所有出现的正则表达式模式。目前我只能替换以空格“”分隔的单个单词的共同保险，但即使它们位于单词中间，我也想全部替换。这是一个例子：

对于字符串：abc:target12 target12 cdtarget23 target

我想用“ok”替换所有出现的target[0-9]{2}，所以替换后，新字符串就像：abc:ok ok cdok target

谢谢！</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T19:03:39.303

Use replace like this:

```
var repl = str.replace(/target\d{2}/g, 'ok'); 
```

### Live Demo: [http://ideone.com/hew6oa](http://ideone.com/hew6oa)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T19:03:00.767

[我认为您在正则表达式（演示](http://jsfiddle.net/4G3m8/)）末尾缺少`g`（[Global](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions?redirectlocale=en-US&redirectslug=Core_JavaScript_1.5_Guide/Regular_Expressions#Advanced_Searching_With_Flags)）：

```
alert("abc:target12 target12 cdtarget23 target".replace(/target[0-9]{2}/g, 'ok')) 
```

# ios - Scroll & PageCurl 的 UIPageViewController 行为不同

> ID：16111710
> 
> 赞同：5
> 
> 时间：2013-04-19T18:58:47.773
> 
> 标签：ios, uipageviewcontroller

我看到`UIPageViewController`using`Scroll`转换与`PageCurl`. PageCurl 以我期望的方式工作，但是在使用 Scroll-ing 时，我有时会看到额外的（无意义的）调用`viewControllerBeforeViewController:`，`viewControllerAfterViewController:` 是否有人认识到这种额外数据源调用的模式？

我正在显示一系列图像，我可以从序列中的任何位置开始。当使用 Scroll 转换而不是 PageCurl 时，如果我移动到“右侧”，则在显示初始页面后，我会收到 3 个 DataSource 调用，而不是我期望的单个调用。对于下面运行的示例，我从索引值 3 开始。当我滑动移动到“下一个”图像时，我希望`viewControllerAfterViewController:`对索引 3 进行一次调用以到达索引 4。如果我运行测试，我会得到两个额外的调用：一个用于索引 3 之前（即 2），一个用于索引 4 之后（即 5）。输出是：

```
2013-04-19 12:37:33.964 Clouds[496:907] Page 3 - viewControllerAfterViewController called on this index
2013-04-19 12:37:33.988 Clouds[496:907] Page 3 - viewControllerBeforeViewController called on this index
2013-04-19 12:37:34.010 Clouds[496:907] willTransitionToViewControllers to indices
2013-04-19 12:37:34.014 Clouds[496:907] Page 4
2013-04-19 12:37:34.461 Clouds[496:907] Page 4 - viewControllerAfterViewController called on this index 
```

在这一切之后显示的视图确实是索引 4 的视图。在第一次转换之后， UIPageViewController 的行为似乎符合我的预期。当我使用 PageCurl 转换时，它总是按照我期望的方式运行，并且我没有收到任何这些无关的调用。

实际产生输出的代码是：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    self.pageViewController = [[UIPageViewController alloc] initWithTransitionStyle:UIPageViewControllerTransitionStyleScroll navigationOrientation:UIPageViewControllerNavigationOrientationHorizontal options:nil];
    self.pageViewController.delegate = self;
    self.pageViewController.dataSource = self;

    CloudImageVC *startingViewController = [self viewControllerAtIndex:self.currentPage storyboard:self.storyboard];
    NSArray *viewControllers = @[startingViewController];
    [self.pageViewController setViewControllers:viewControllers direction:UIPageViewControllerNavigationDirectionForward animated:NO completion:NULL];

    [self addChildViewController:self.pageViewController];
    [self.view addSubview:self.pageViewController.view];

    CGRect pageViewRect = self.view.bounds;
    self.pageViewController.view.frame = pageViewRect;

    [self.pageViewController didMoveToParentViewController:self];

    // Add the page view controller's gesture recognizers to the book view controller's view so that the gestures are started more easily.
    self.view.gestureRecognizers = self.pageViewController.gestureRecognizers;
}

- (CloudImageVC *)viewControllerAtIndex:(NSUInteger)index storyboard:(UIStoryboard *)storyboard {
    // Return the data view controller for the given index.
    if (index >= [self.imageNames count]) {
        return nil;
    }
    self.dataViewController = [self makeDataViewControllerAtIndex:index storyboard:storyboard];
    return self.dataViewController;
 }

- (CloudImageVC *) makeDataViewControllerAtIndex:(NSUInteger)index storyboard:(UIStoryboard *)storyboard {
    // Make and return the data view controller for the given index.
    if (index >= [self.imageNames count]) {
        return nil;
    }
    // Create a new view controller and pass suitable data.
    self.dataViewController = [storyboard instantiateViewControllerWithIdentifier:@"CloudImageVC"];
    self.dataViewController.imageIndex = index;
    //self.dataViewController.cloudImage = nil;
    return self.dataViewController;
}

- (NSUInteger)indexOfViewController:(CloudImageVC *)viewController
{
    // Return the index of the given data view controller.
    // For simplicity, we store the index value in the view controller.
    return viewController.imageIndex;
}

#pragma mark - Page View Controller Data Source

- (UIViewController *)pageViewController:(UIPageViewController *)pageViewController viewControllerBeforeViewController:(UIViewController *)viewController {
    NSUInteger index = [self indexOfViewController:(CloudImageVC *)viewController];
    NSLog(@"Page %d - viewControllerBeforeViewController called on this index", index);
    if ((index == 0) || (index == NSNotFound)) {
        return nil;
    }
    index--;
    return [self viewControllerAtIndex:index storyboard:viewController.storyboard];
}

- (UIViewController *)pageViewController:(UIPageViewController *)pageViewController viewControllerAfterViewController:(UIViewController *)viewController {
    NSUInteger index = [self indexOfViewController:(CloudImageVC *)viewController];
    NSLog(@"Page %d - viewControllerAfterViewController called on this index", index);
    if (index == NSNotFound) {
        return nil;
    }

    index++;
    if (index == self.imageNames.count) {
        return nil;
    }
    return [self viewControllerAtIndex:index storyboard:viewController.storyboard];
}

#pragma mark - Protocol UI PageViewController Delegate

- (void) pageViewController:(UIPageViewController *)pageViewController willTransitionToViewControllers:(NSArray *)pendingViewControllers {
    NSLog(@"willTransitionToViewControllers to indices");
    for (CloudImageVC *vc in pendingViewControllers) {
        NSLog(@"Page %d",vc.imageIndex);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-06T01:21:39.397

答案在 rdelmar 的评论中。

# sitecore - 需要从 Sitecore 搜索索引查看器中排除字段值不起作用

> ID：16111712
> 
> 赞同：0
> 
> 时间：2013-04-19T18:59:02.827
> 
> 标签：sitecore, sitecore-workflow

我需要消除/排除配置中的字段 id/值。这是我的配置中的内容，但它仍然没有消除我的字段 ID。我需要帮助来消除/排除 Sitecore 中的字段值。

```
<include hint="list:ExcludeField">             
<fieldId>{A0CB3965-8884-4C7A-8815-B6B2E5CED162}</fieldId> </include> 
```

我需要帮助排除字段值并为图像中的字段查找字段 ID。

详细地说，如何从索引搜索中排除所有突出显示的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T14:11:35.837

要查找字段指南，请转到模板管理器并选择包含您的字段的模板。然后展开树找到 FieldItem 并从 FieldItem 的快速信息部分获取 Field Guid。

# entity-framework - 实体框架实体上的部分类属性在微风中没有元数据

> ID：16111713
> 
> 赞同：2
> 
> 时间：2013-04-19T18:59:08.787
> 
> 标签：entity-framework, breeze, asp.net-web-api

我的“联系人”实体有一个属性：

```
public partial class Contact
{
    public string FullName { get { return this.FirstName + this.LastName; } set { } }
} 
```

然后我使用微风从返回联系人的 Web API 函数中获取联系人数据。从我的 Web API 调用返回的数据具有“FullName”属性和向下传递给客户端的正确值，但我的“元数据”在其中的任何地方都没有“FullName”属性。我需要做什么才能获取元数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-20T20:29:48.293

我没有找到从服务器向元数据添加部分类项的明智解决方案。我的观点是，这应该被视为服务器 Breeze 元数据功能的错误。但是，扩展项目数据确实从服务器获得。
因此，如果您在客户端元数据存储中手动添加扩展属性，一切都应该没问题。这是您如何在 javascript 客户端代码中执行此操作的示例：

```
var man = new breeze.EntityManager(myServiceName);
man.metadataStore.registerEntityTypeCtor('Contact', function () { this.FullName = ''; }); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-21T03:54:29.523

您真的不希望那些计算属性通过网络传输，是吗？为什么你有一个二传手？这是一个只读属性。如果这是一个 EF Code First 类，你是如何让 EF 不相信它`FullName`被映射到“Contact”表中的“FullName”列的？

我将假设您实际上并不希望“FullName”通过网络传输。您想使用自定义`EntityType`构造函数或初始化程序来扩展类型。我认为在这种情况下您需要一个初始化程序。

看一看“[扩展实体](http://www.breezejs.com/documentation/extending-entities#add-computed-to-initializer)”，它恰好用`fullName`属性说明了推荐的技术。

# javascript - 使用嵌入在 iFrame 中的脚本获取未定义错误

> ID：16111715
> 
> 赞同：1
> 
> 时间：2013-04-19T18:59:21.040
> 
> 标签：javascript, html, iframe

我有我工作的知识库。我正在尝试在 iFrame 实例中获取带有脚本设置的完整 html。

下面是我的设置的 Chrome 扩展。当我单击 中的按钮时`div/iframe`，出现`Uncaught ReferenceError: test is not defined`错误。

想法？

![在此处输入图像描述](https://i.stack.imgur.com/PmgOM.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T20:30:16.547

[http://bytes.com/topic/javascript/answers/153274-script-iframe-can-not-call-functions-defined-parent-document](http://bytes.com/topic/javascript/answers/153274-script-iframe-can-not-call-functions-defined-parent-document)

每个链接：函数不是文档的属性，而是窗口的属性。尝试 `parent.foo();` 或 `top.foo();`

`<button onclick='parent.test();'>test</button>` **现在可以使用...**也**`top.test()`可以使用，**但是**，我想要一种使其正常化的方法。它不是很直观。**

 **有没有办法不必前缀`top.`or `parent.`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T19:06:34.733

`<head>`确保在您的部分中的任何其他脚本之前调用 jQuery 库。

大多数时候我得到这个错误，我只是改变了页面上调用脚本的顺序（总是在 jQuery 下），它解决了这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-09T16:31:05.660

这是一个迟到的答案，但我会分享我的解决方案。

我需要一个 iframe 作为预览容器。所以 parent.something 会很麻烦。

这似乎有效：

```
<iframe id='iframe' sandbox="allow-same-origin allow-scripts"></iframe> 
```

并用它填充它（使用 jquery 的示例）：

```
$(function() {

    let $iframe = $('#iframe');
    $iframe.ready(function() {

       let ifhead = `
       <meta charset="UTF-8"><script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"><\/script>`;
       let ifbody = `<h1>My Body</h1>`;
       let ifscript = `$(function() { $('h1').css('color', 'blue')})`;
       let html = `<html><head>${ifhead}</head><body>${ifbody}<script>${ifscript}<\/script></body></html>`; 

       document.getElementById("iframe").contentWindow.document.open();
       document.getElementById("iframe").contentWindow.document.write(html);
       document.getElementById("iframe").contentWindow.document.close();

    });

}); 
```

现在 iframe 充当独立页面。**

# gradle - 基于 Gradle 的属性

> ID：16111720
> 
> 赞同：25
> 
> 时间：2013-04-19T18:59:41.847
> 
> 标签：gradle

gradle 中是否有 ANT 等效的 basedir 属性？

```
${basedir} 
```

我正在尝试获取构建脚本所在目录的名称。

先感谢您！

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-04-20T03:04:57.640

根据您的确切需求，您可以使用`buildFile.parent`或`projectDir`。（构建文件路径默认为`"$projectDir/build.gradle"`并且可以在 中重新配置`settings.gradle`。）请参阅[Gradle 构建语言参考](http://gradle.org/docs/current/dsl/index.html)，了解哪些属性和方法可用于`Project`和其他类。

# mysql - 如何找到所有表的表名和行数？

> ID：16111721
> 
> 赞同：-2
> 
> 时间：2013-04-19T18:59:42.430
> 
> 标签：mysql, postgresql

我想通过使用查询来查找 mysql 和 pgsql 中数据库中所有表的表名和行数。有什么查询可以找到这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T05:28:08.297

The [SQL-standard `INFORMATION_SCHEMA` provides information about the structure of your database](http://www.postgresql.org/docs/current/static/information-schema.html) - which tables it has, etc. It does not, however, contain row counts.

At least for PostgreSQL you have at least two options for getting row counts:

*   Use an external program or a PL/PgSQL function that generates dynamic SQL using `EXECUTE` to do a `SELECT count(*) FROM tablename` for each table found in the `INFORMATION_SCHEMA` (excluding system tables); or

*   Run `ANALYZE` then get the *approximate* rowcounts from the PostgreSQL statistics tables. This approach is a lot faster, but is only getting an approximate table rowcount based on statistical sampling and estimation.

This has been discussed in detail for PostgreSQL [here](https://stackoverflow.com/q/2596670/398670).

The approach of querying `INFORMATION_SCHEMA` for a table list and then looping over the tables doing `count` should be portable across all databases. Other approaches will likely require various degrees of database-specific code.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-12T22:13:28.050

对于 postgresql：

```
SELECT 
nspname AS schema,relname table_name,reltuples::int rows_count

FROM pg_class C
LEFT JOIN pg_namespace N ON (N.oid = C.relnamespace)

WHERE 

  nspname NOT IN ('pg_catalog', 'information_schema') AND
  relkind='r'  and reltuples>0
ORDER BY relname  ; 
```

# biztalk - 更改存储过程时是否必须重新启动主机实例？

> ID：16111722
> 
> 赞同：3
> 
> 时间：2013-04-19T18:59:47.010
> 
> 标签：biztalk

在 BizTalk 2010 中，我使用 SQL 适配器轮询表以创建消息并启动编排过程。

我已经修改了存储过程而不更改架构。但是我在修改它后开始出现错误，并且没有发生 SQL 轮询。所以我重新启动了主机实例并开始工作。

所以这里我的问题是更改存储过程后是否必须重新启动主机实例？

错误是“适配器“WCF-Custom”引发错误消息。详细信息“Microsoft.ServiceModel.Channels.Common.AdapterException：作为类型化存储过程或类型化轮询调用的一部分返回的 ResultSet 与可用的元数据不匹配。如果此存储过程或轮询语句可以返回可变数量的结果集，请考虑改用无类型存储过程或无类型轮询操作。”

任何人都可以请建议可能是根本原因吗？

谢谢， Sasikumar.S

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T01:41:41.020

是的，您需要重新启动为 WCF-SQL 处理程序配置的主机的主机实例。

在后台，第一次调用特定的存储过程时，WCF-SQL 适配器首先使用 SET FMTONLY ON 执行它；旗帜。这会导致 Sql Server 只返回预期数据的数据类型，而不是执行存储过程本身。适配器在主机进程的生命周期内缓存这些数据类型。

如果更改了存储过程返回的数据，下次执行时就会不同步，无法强制转换成预期的类型。因此，需要重新启动主机实例。

TL;DR - 如果更改存储过程，则需要重新启动 WCF-SQL 主机实例。

# objective-c - Xcode：尝试子类化 NSWindowController 期间未加载基于文档的应用程序窗口

> ID：16111723
> 
> 赞同：0
> 
> 时间：2013-04-19T18:59:49.237
> 
> 标签：objective-c, xcode, macos

我真的没有做太多，我已经被困住了。

到目前为止，我已经完成了：

*   添加 **NSWindowController**子类 ( **MikesWindowController.h** & .m)

*   从**MikesDocument.m**中删除了**windowNibName**（因为我正在实现我自己的 WindowController 子类。）

我试过了：

*   测试 NSLog 是否会在**init**、**windowControllerDidLoadNib**、**applicationDidFinishLaunching**处返回。仅打印初始化时的 NSLog。

*   并且，在编译我的 Document 应用程序后测试了**Main Menu** -> **File** -> **New 。**

我是否正确执行此操作？谢谢。任何建议都会很棒！在**MikesDocument.m下**

```
-(void)makeWindowControllers{
    MikesController *controller = [[MikesWindowController alloc]init];
    [self addWindowController:controller];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T20:56:05.567

经过深思熟虑，我找到了答案。呜呼。享受未来。

*   从我的 NSWindowController 子类中删除了**initWithWindow**
*   在我的 NSWindowController 子类中实现了**initWithWindowNibName**，所以现在无论何时我初始化我都*必须*指定窗口 nibName。

下面我在我的 NSWindowController 子类中实现了**initWithWindowNibName ，如下所示：**

**MikesWindowController.m**

```
-(id) initWithWindowNibName:(NSString *)windowNibName{
    self = [super initWithWindowNibName:windowNibName];
    return self;
} 
```

（下）再次回到主文档，我更正了**makeWindowController**方法并使用“ **MikesDocument”**（对于 MikesDocument.xib）实例化了我的控制器并添加了它。

**MikesDocument.m**

```
-(void)makeWindowControllers{  
    MikesWindowController *controller = 
        // must tell controller which nib file to use. 
        [[MikesWindowController alloc]initWithWindowNibName:@"MikesDocument"];  
        [self addWindowController:controller]; 

   } 
```

成功！甚至不必费心调用 init 或实现 init，因为它随时会返回错误。

# full-text-search - SQL Server：带连接的全文搜索

> ID：16111726
> 
> 赞同：0
> 
> 时间：2013-04-19T18:59:58.057
> 
> 标签：full-text-search, full-text-indexing

```
<groveling> 
```

这可能是非常基本的事情。我是全文索引和搜索的新手，我一直在努力让它工作几个小时，所以请放轻松:)

```
</groveling> 
```

假设我有一张人名表，姓氏，地址，出生日期等......

```
create table mypeople
(
  id int identity(1,1) primary key,
  firstname varchar(100) not null,
  lastname varchar(100) not null,
  address varchar(100) not null
) 
```

我有另一个表格，其中包含有关我不想与之做生意的人、已知的国际犯罪分子、曾经欺诈过我公司的人等的信息。

```
create table badguys
(
   id int identity(1,1) primary key,
   firstname varchar(100) null,
   lastname varchar(100) null,
   alias varchar(max) null,
   address varchar(max) null
) 
```

我的 badguy 表上有名、姓、别名、地址的全文索引。我需要做的是查看 mypeople 表中的所有名字，看看它们是否在 badguys 表中。几个小时以来，我一直在处理不同的查询，但没有任何对我有用的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T21:05:42.577

您可以通过多种方式实现词库匹配。
请参考此链接：http:
[//msdn.microsoft.com/en-us/library/ms142491.aspx](http://msdn.microsoft.com/en-us/library/ms142491.aspx)

要查找与全文索引匹配的内容，请使用以下内容：

```
SELECT FirstName, LastName
FROM MyPeople AS a
WHERE NOT EXISTS(
    SELECT FirstName, LastName      
      FROM [MTPS].[dbo].[BadGuys]
      WHERE  CONTAINS((FirstName,LastName), @searchExpr)
) 
```

# jquery - 重置一个jQuery函数？

> ID：16111729
> 
> 赞同：0
> 
> 时间：2013-04-19T19:00:13.120
> 
> 标签：jquery, callback, css-reset

我有 jQuery 动画一个 div，其中嵌入了 YouTube 视频。

我已经设置好了，当你关闭视频时，div 隐藏并且电影停止。但是，如果我想找回电影，我不能。

我想知道是否有可以重置事件链的回调？

这是我正在使用的 jQuery：

```
$("#trigger2").click(function () {
    $( "#movie" ).animate({bottom: 0}, {duration:1000});
    $(".close").delay(1500).fadeIn('slow')
});
$(".close").click(function () {
    $("#movie").hide();
    var $player = $("#movie").detach();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T19:05:23.617

`$("#movie").detach();`正在`#movie`从 DOM 中删除，因此您无法再次显示它。如果您无法以其他方式停止视频播放器，请保留`detach`并附加它以显示它。

jQuery：

```
$("#trigger2").click(function () {
    var movdiv = "<div id='movie'><p>movie box</p><a class='close'>Close</a></div>";
    $(movdiv).appendTo("body").animate({bottom: 0}, {duration:1000});
    $(".close").delay(1500).fadeIn('slow');
    $(".close").click(function () { $("#movie").detach(); });
}); 
```

小提琴：http: [//jsfiddle.net/D4rXa/](http://jsfiddle.net/D4rXa/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T19:05:23.423

你不能，恢复它的唯一方法是按照你首先初始化它的方式重新初始化你的 div( *with video* )。

您可以尝试以这种方式附加播放器 - （*分离后*） - [.detach()](http://api.jquery.com/detach/)

```
 var p;
 $(".close").click(function () {
        $("#movie").hide();
         p = $("#movie").detach();
 }); 
```

再次将播放器附加到 DOM

```
p.appendTo('body'); 
```

# android - Google Play 开发者控制台是否以 UTC 或本地时间显示 APK 上传？

> ID：16111731
> 
> 赞同：2
> 
> 时间：2013-04-19T19:00:30.983
> 
> 标签：android, apk, google-play, google-play-services

我正在尝试在 Google Play 开发者控制台上确定 APK 上传的确切日期，并将其与我的 git 日志中的特定提交相关联，但似乎存在日期差异。任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T19:08:41.683

好像是山景城（谷歌总公司）UTC-08:00的时间

# c# - RijndaelManaged 不加密

> ID：16111735
> 
> 赞同：0
> 
> 时间：2013-04-19T19:00:45.133
> 
> 标签：c#, cryptography, rijndaelmanaged

我正在尝试使用 RijndaelManaged 类加密缓冲区，但没有成功。它总是返回字节[0]。这是代码：

```
 public byte[] Encrypt(byte[] data, byte[] key)
    {
        using (var ms = new MemoryStream())
        {
            using (var aes = RijndaelManaged.Create())
            {
                aes.Key = _checksumProvider.CalculateChecksum(key);
                aes.IV = _checksumProvider.CalculateChecksum(key);
                var stream = new CryptoStream(ms, aes.CreateEncryptor(aes.Key, aes.IV), CryptoStreamMode.Write);
                stream.Write(data, 0, data.Length);
                return ms.ToArray();
            }
        }
    } 
```

Key 和 IV 已正确分配。知道代码有什么问题吗？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T19:01:25.157

你需要打电话[`stream.FlushFinalBlock()`](http://msdn.microsoft.com/en-us/library/system.security.cryptography.cryptostream.flushfinalblock.aspx)。

这将执行加密中的任何最后步骤，并将 CryptoStream 的内部缓冲区刷新到底层内存流中。

# mysql - Display different results on different page/profiles

> ID：16111742
> 
> 赞同：0
> 
> 时间：2013-04-19T19:01:11.420
> 
> 标签：mysql, sql, pdo

I dont know if I lost the information in my brain, or if I never had it, but I have created a tweet so a user can follow other users.

The problem now is that every user display the same information. I Was trying to add WHERE `$_SESSION['uid']` to my query but that doesn't help do the trick.

Still shows the same info. Any tips ?

```
<?php 
    foreach(fetch_follotweets() as $tweet){ 
        echo $tweet['firstname']; 
        echo $tweet['lastname'];
        echo $tweet['username'];
        echo $tweet['date'];
        echo $tweet['profile_img'];
        $tweet['message'];
    }

    function fetch_follotweets(){
        global $db;
        $query = $db->query("   SELECT
                                  user.email,
                                  user.username,
                                  tweets.message,
                                  tweets.date,
                                  userdetails.profile_img,
                                  userdetails.firstname,
                                  userdetails.lastname,
                                  following.id,
                                  following.user_id,
                                  following.follow_id
                                FROM user
                                  JOIN userdetails
                                    ON user.id = userdetails.user_id
                                  JOIN tweets
                                    ON userdetails.user_id = tweets.user_id
                                  JOIN following
                                    ON following.follow_id
                                WHERE following.follow_id = tweets.user_id AND
                                user.id='{$_SESSION['uid']}
                                ORDER BY tweets.date DESC");
            $tweet = array();
        while(($row = $query->fetch(PDO::FETCH_ASSOC)) !==FALSE) { 
            $tweet[] = $row;
        }
        return $tweet;
    }
    ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T19:09:40.467

Without the `WHERE` clause, the `SQL` would get the details of all the users

Also, I think that the `JOIN` on `tweets` & `following` should be a `LEFT JOIN` ( to get the `records` even if none of them is present )

```
SELECT
  user.email,
  user.username,
  tweets.message,
  tweets.date,
  userdetails.profile_img,
  userdetails.firstname,
  userdetails.lastname,
  t.ids_of_users_followed
FROM 
  user
  JOIN userdetails
    ON user.id = userdetails.user_id
  LEFT JOIN (
      SELECT
        GROUP_CONCAT( following.follow_id ) AS ids_of_users_followed
        following.user_id
      FROM
        following
      GROUP BY
        following.user_id
    ) as t ON ( t.user_id = user.id )
  JOIN tweets
    ON ( userdetails.user_id = tweets.user_id OR FIND_IN_SET( tweets.user_id, t.ids_of_users_followed ) )
WHERE 
  user.id = :?    => Make sure to add the logged in user_id here
ORDER BY 
  tweets.date DESC 
```

# java - 借助 log4j 输出 hadoop 程序的变量

> ID：16111746
> 
> 赞同：0
> 
> 时间：2013-04-19T19:01:29.900
> 
> 标签：java, linux, hadoop, log4j, mapreduce

我用 log4j 编写了 hadoop 程序（只有 Map 步骤，该操作没有满足我的等待）

```
package org.myorg;

import java.io.*;
import java.util.*;
import org.apache.hadoop.fs.*;
import org.apache.hadoop.conf.*;
import org.apache.hadoop.io.*;
import org.apache.hadoop.mapred.*;
import org.apache.hadoop.util.*;
import org.apache.log4j.Logger;
import org.apache.log4j.LogManager;
import org.apache.log4j.xml.DOMConfigurator;

public class ParallelIndexation {
    public static class Map extends MapReduceBase implements
            Mapper<LongWritable, Text, Text, LongWritable> {
        private final static LongWritable zero = new LongWritable(0);
        private Text word = new Text();
        private static final Logger logger = LogManager.getLogger(Map.class.getName());
        public void map(LongWritable key, Text value,
                OutputCollector<Text, LongWritable> output, Reporter reporter)
                throws IOException {
            DOMConfigurator.configure("/folder/log4j.xml");
            Configuration conf = new Configuration();
            FileSystem fs = FileSystem.get(conf);
            Path localPath = new Path("/export/hadoop-1.0.1/bin/input/paths.txt");
            Path hdfsPath=new Path("hdfs://192.168.1.8:7000/user/hadoop/paths.txt");
            Path localPath1 = new Path("/usr/countcomputers.txt");                
            Path hdfsPath1=new Path("hdfs://192.168.1.8:7000/user/hadoop/countcomputers.txt");
            if (!fs.exists(hdfsPath))
            {
                fs.copyFromLocalFile(localPath, hdfsPath);
            };
            if (!fs.exists(hdfsPath1))
            {
                fs.copyFromLocalFile(localPath1, hdfsPath1);
            };          
            FSDataInputStream in = fs.open(hdfsPath);
            BufferedReader br = new BufferedReader(new InputStreamReader(in));
            String line = br.readLine();
            BufferedReader br1=new BufferedReader(new InputStreamReader(fs.open(hdfsPath1)));
            int CountComputers;
            String result=br1.readLine();
            CountComputers=Integer.parseInt(result);
            ArrayList<String> paths = new ArrayList<String>();
            StringTokenizer tokenizer = new StringTokenizer(line, "|");
            while (tokenizer.hasMoreTokens()) {
                paths.add(tokenizer.nextToken());
            }
            for (int i=0; i<paths.size(); i++)
                {
                    logger.debug("paths[i]=" + paths.get(i) + "\n");    
                }
            logger.debug("CountComputers=" + CountComputers + "\n"); 
```

我提供 /folder/log4j.xml 文件

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE log4j:configuration SYSTEM "log4j.dtd">

<log4j:configuration debug="true" xmlns:log4j="http://jakarta.apache.org/log4j/">

    <appender name="ConsoleAppender" class="org.apache.log4j.ConsoleAppender">
        <param name="Encoding" value="UTF-8"/>
        <layout class="org.apache.log4j.PatternLayout">
            <param name="ConversionPattern" value="%d{ISO8601} [%-5p][%-16.16t][%32.32c] - %m%n" />
        </layout>
    </appender>

    <root>
        <priority value="DEBUG"/>
        <appender-ref ref="ConsoleAppender" />
    </root>

</log4j:configuration> 
```

但是尽管在日志中有输出，但由于命令执行

```
./hadoop jar /export/hadoop-1.0.1/bin/ParallelIndexation.jar org.myorg.ParallelIndexation /export/hadoop-1.0.1/bin/input /export/hadoop-1.0.1/bin/output -D mapred.map.tasks=1 1> resultofexecute.txt 2>&1 
```

在 resultofexecute.txt 文件中没有适当变量的输出。帮助删除必要的变量。@ChrisWhite 我提供`hadoop-hadoop-tasktracker-myhost2.log`和`hadoop-hadoop-takstacker-myhost3.log`文件

`hadoop-hadoop-tasktracker-myhost2.log`

```
2013-04-20 12:35:43,465 INFO org.apache.hadoop.metrics2.impl.MetricsConfig: loaded properties from hadoop-metrics2.properties
2013-04-20 12:35:43,583 INFO org.apache.hadoop.metrics2.impl.MetricsSourceAdapter: MBean for source MetricsSystem,sub=Stats registered.
2013-04-20 12:35:43,584 INFO org.apache.hadoop.metrics2.impl.MetricsSystemImpl: Scheduled snapshot period at 10 second(s).
2013-04-20 12:35:43,584 INFO org.apache.hadoop.metrics2.impl.MetricsSystemImpl: TaskTracker metrics system started
2013-04-20 12:35:43,971 INFO org.apache.hadoop.metrics2.impl.MetricsSourceAdapter: MBean for source ugi registered.
2013-04-20 12:35:43,979 WARN org.apache.hadoop.metrics2.impl.MetricsSystemImpl: Source name ugi already exists!
2013-04-20 12:35:44,168 INFO org.mortbay.log: Logging to org.slf4j.impl.Log4jLoggerAdapter(org.mortbay.log) via org.mortbay.log.Slf4jLog
2013-04-20 12:35:44,251 INFO org.apache.hadoop.http.HttpServer: Added global filtersafety (class=org.apache.hadoop.http.HttpServer$QuotingInputFilter)
2013-04-20 12:35:44,280 INFO org.apache.hadoop.mapred.TaskLogsTruncater: Initializing logs' truncater with mapRetainSize=-1 and reduceRetainSize=-1
2013-04-20 12:35:44,287 INFO org.apache.hadoop.mapred.TaskTracker: Starting tasktracker with owner as hadoop
2013-04-20 12:35:44,288 INFO org.apache.hadoop.mapred.TaskTracker: Good mapred local directories are: /tmp/hadoop-hadoop/mapred/local
2013-04-20 12:35:44,302 WARN org.apache.hadoop.util.NativeCodeLoader: Unable to load native-hadoop library for your platform... using builtin-java classes where applicable
2013-04-20 12:35:44,312 INFO org.apache.hadoop.metrics2.impl.MetricsSourceAdapter: MBean for source jvm registered.
2013-04-20 12:35:44,312 INFO org.apache.hadoop.metrics2.impl.MetricsSourceAdapter: MBean for source TaskTrackerMetrics registered.
2013-04-20 12:35:49,332 INFO org.apache.hadoop.metrics2.impl.MetricsSourceAdapter: MBean for source RpcDetailedActivityForPort51172 registered.
2013-04-20 12:35:49,332 INFO org.apache.hadoop.metrics2.impl.MetricsSourceAdapter: MBean for source RpcActivityForPort51172 registered.
2013-04-20 12:35:49,335 INFO org.apache.hadoop.mapred.TaskTracker: TaskTracker up at: localhost/127.0.0.1:51172
2013-04-20 12:35:49,335 INFO org.apache.hadoop.mapred.TaskTracker: Starting tracker tracker_myhost2:localhost/127.0.0.1:51172
2013-04-20 12:35:49,356 INFO org.apache.hadoop.ipc.Server: Starting SocketReader
2013-04-20 12:35:49,357 INFO org.apache.hadoop.ipc.Server: IPC Server Responder: starting
2013-04-20 12:35:49,357 INFO org.apache.hadoop.ipc.Server: IPC Server listener on 51172: starting
2013-04-20 12:35:49,358 INFO org.apache.hadoop.ipc.Server: IPC Server handler 0 on 51172: starting
2013-04-20 12:35:49,358 INFO org.apache.hadoop.ipc.Server: IPC Server handler 1 on 51172: starting
2013-04-20 12:35:49,358 INFO org.apache.hadoop.ipc.Server: IPC Server handler 2 on 51172: starting
2013-04-20 12:35:49,358 INFO org.apache.hadoop.ipc.Server: IPC Server handler 3 on 51172: starting
2013-04-20 12:35:50,372 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: 192.168.1.8/192.168.1.8:7001\. Already tried 0 time(s).
2013-04-20 12:35:51,372 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: 192.168.1.8/192.168.1.8:7001\. Already tried 1 time(s).
2013-04-20 12:35:52,375 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: 192.168.1.8/192.168.1.8:7001\. Already tried 2 time(s).
2013-04-20 12:35:53,376 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: 192.168.1.8/192.168.1.8:7001\. Already tried 3 time(s).
2013-04-20 12:35:54,377 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: 192.168.1.8/192.168.1.8:7001\. Already tried 4 time(s).
2013-04-20 12:35:55,377 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: 192.168.1.8/192.168.1.8:7001\. Already tried 5 time(s).
2013-04-20 12:35:56,379 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: 192.168.1.8/192.168.1.8:7001\. Already tried 6 time(s).
2013-04-20 12:35:57,380 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: 192.168.1.8/192.168.1.8:7001\. Already tried 7 time(s).
2013-04-20 12:35:58,381 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: 192.168.1.8/192.168.1.8:7001\. Already tried 8 time(s).
2013-04-20 12:35:59,381 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: 192.168.1.8/192.168.1.8:7001\. Already tried 9 time(s).
2013-04-20 12:35:59,385 INFO org.apache.hadoop.ipc.RPC: Server at 192.168.1.8/192.168.1.8:7001 not available yet, Zzzzz...
2013-04-20 12:36:01,387 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: 192.168.1.8/192.168.1.8:7001\. Already tried 0 time(s).
2013-04-20 12:36:02,387 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: 192.168.1.8/192.168.1.8:7001\. Already tried 1 time(s).
2013-04-20 12:36:03,388 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: 192.168.1.8/192.168.1.8:7001\. Already tried 2 time(s).
2013-04-20 12:36:04,388 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: 192.168.1.8/192.168.1.8:7001\. Already tried 3 time(s).
2013-04-20 12:36:05,388 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: 192.168.1.8/192.168.1.8:7001\. Already tried 4 time(s).
2013-04-20 12:36:06,388 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: 192.168.1.8/192.168.1.8:7001\. Already tried 5 time(s).
2013-04-20 12:36:07,390 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: 192.168.1.8/192.168.1.8:7001\. Already tried 6 time(s).
2013-04-20 12:36:08,390 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: 192.168.1.8/192.168.1.8:7001\. Already tried 7 time(s).
2013-04-20 12:36:09,391 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: 192.168.1.8/192.168.1.8:7001\. Already tried 8 time(s).
2013-04-20 12:36:10,392 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: 192.168.1.8/192.168.1.8:7001\. Already tried 9 time(s).
2013-04-20 12:36:10,393 INFO org.apache.hadoop.ipc.RPC: Server at 192.168.1.8/192.168.1.8:7001 not available yet, Zzzzz...
2013-04-20 12:36:12,393 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: 192.168.1.8/192.168.1.8:7001\. Already tried 0 time(s).
2013-04-20 12:36:43,011 INFO org.apache.hadoop.mapred.TaskTracker:  Using ResourceCalculatorPlugin : null
2013-04-20 12:36:43,030 INFO org.apache.hadoop.mapred.TaskTracker: Starting thread: Map-events fetcher for all reduce tasks on tracker_myhost2:localhost/127.0.0.1:51172
2013-04-20 12:36:43,031 WARN org.apache.hadoop.util.ProcessTree: setsid is not available on this machine. So not using it.
2013-04-20 12:36:43,031 INFO org.apache.hadoop.util.ProcessTree: setsid exited with exit code 0
2013-04-20 12:36:43,182 INFO org.apache.hadoop.util.ProcfsBasedProcessTree: ProcfsBasedProcessTree currently is supported only on Linux.
2013-04-20 12:36:43,182 INFO org.apache.hadoop.mapred.TaskTracker: ProcessTree implementation is missing on this system. TaskMemoryManager is disabled.
2013-04-20 12:36:43,206 INFO org.apache.hadoop.mapred.IndexCache: IndexCache created with max memory = 10485760
2013-04-20 12:36:43,214 INFO org.apache.hadoop.metrics2.impl.MetricsSourceAdapter: MBean for source ShuffleServerMetrics registered.
2013-04-20 12:36:43,217 INFO org.apache.hadoop.http.HttpServer: Port returned by webServer.getConnectors()[0].getLocalPort() before open() is -1\. Opening the listener on 50060
2013-04-20 12:36:43,218 INFO org.apache.hadoop.http.HttpServer: listener.getLocalPort() returned 50060 webServer.getConnectors()[0].getLocalPort() returned 50060
2013-04-20 12:36:43,218 INFO org.apache.hadoop.http.HttpServer: Jetty bound to port 50060
2013-04-20 12:36:43,218 INFO org.mortbay.log: jetty-6.1.26
2013-04-20 12:36:43,611 INFO org.mortbay.log: Started SelectChannelConnector@0.0.0.0:50060
2013-04-20 12:36:43,611 INFO org.apache.hadoop.mapred.TaskTracker: FILE_CACHE_SIZE for mapOutputServlet set to : 2000
2013-04-20 12:36:43,635 INFO org.apache.hadoop.mapred.UserLogCleaner: Adding job_201304112319_0001 for user-log deletion with retainTimeStamp:1366573003186
2013-04-20 12:36:43,635 INFO org.apache.hadoop.mapred.UserLogCleaner: Adding job_201304070459_0003 for user-log deletion with retainTimeStamp:1366573003186
2013-04-20 12:36:43,635 INFO org.apache.hadoop.mapred.UserLogCleaner: Adding job_201304070459_0001 for user-log deletion with retainTimeStamp:1366573003186
2013-04-20 12:36:43,635 INFO org.apache.hadoop.mapred.UserLogCleaner: Adding job_201304112319_0007 for user-log deletion with retainTimeStamp:1366573003186
2013-04-20 12:36:43,635 INFO org.apache.hadoop.mapred.UserLogCleaner: Adding job_201304070413_0001 for user-log deletion with retainTimeStamp:1366573003186
2013-04-20 12:36:43,635 INFO org.apache.hadoop.mapred.UserLogCleaner: Adding job_201304121018_0001 for user-log deletion with retainTimeStamp:1366573003186
2013-04-20 12:36:43,635 INFO org.apache.hadoop.mapred.UserLogCleaner: Adding job_201304192207_0003 for user-log deletion with retainTimeStamp:1366573003186
2013-04-20 12:49:24,662 INFO org.apache.hadoop.mapred.TaskTracker: LaunchTaskAction (registerTask): attempt_201304201135_0001_m_000001_0 task's state:UNASSIGNED
2013-04-20 12:49:24,665 INFO org.apache.hadoop.mapred.TaskTracker: Trying to launch : attempt_201304201135_0001_m_000001_0 which needs 1 slots
2013-04-20 12:49:24,665 INFO org.apache.hadoop.mapred.TaskTracker: In TaskLauncher, current free slots : 2 and trying to launch attempt_201304201135_0001_m_000001_0 which needs 1 slots
2013-04-20 12:49:25,006 INFO org.apache.hadoop.mapred.JobLocalizer: Initializing user hadoop on this TT.
2013-04-20 12:49:25,377 INFO org.apache.hadoop.mapred.JvmManager: In JvmRunner constructed JVM ID: jvm_201304201135_0001_m_-1899194781
2013-04-20 12:49:25,378 INFO org.apache.hadoop.mapred.JvmManager: JVM Runner jvm_201304201135_0001_m_-1899194781 spawned.
2013-04-20 12:49:25,381 INFO org.apache.hadoop.mapred.TaskController: Writing commands to /tmp/hadoop-hadoop/mapred/local/ttprivate/taskTracker/hadoop/jobcache/job_201304201135_0001/attempt_201304201135_0001_m_000001_0/taskjvm.sh
2013-04-20 12:49:26,284 INFO org.apache.hadoop.mapred.TaskTracker: JVM with ID: jvm_201304201135_0001_m_-1899194781 given task: attempt_201304201135_0001_m_000001_0
2013-04-20 12:49:29,803 INFO org.apache.hadoop.mapred.TaskTracker: attempt_201304201135_0001_m_000001_0 0.0% setup
2013-04-20 12:49:29,806 INFO org.apache.hadoop.mapred.TaskTracker: Task attempt_201304201135_0001_m_000001_0 is done.
2013-04-20 12:49:29,807 INFO org.apache.hadoop.mapred.TaskTracker: reported output size for attempt_201304201135_0001_m_000001_0  was -1
2013-04-20 12:49:29,809 INFO org.apache.hadoop.mapred.TaskTracker: addFreeSlot : current free slots : 2
2013-04-20 12:49:29,947 INFO org.apache.hadoop.mapred.JvmManager: JVM : jvm_201304201135_0001_m_-1899194781 exited with exit code 0\. Number of tasks it ran: 1
2013-04-20 12:49:30,719 INFO org.apache.hadoop.mapred.TaskTracker: LaunchTaskAction (registerTask): attempt_201304201135_0001_r_000000_0 task's state:UNASSIGNED
2013-04-20 12:49:30,719 INFO org.apache.hadoop.mapred.TaskTracker: Trying to launch : attempt_201304201135_0001_r_000000_0 which needs 1 slots
2013-04-20 12:49:30,719 INFO org.apache.hadoop.mapred.TaskTracker: In TaskLauncher, current free slots : 2 and trying to launch attempt_201304201135_0001_r_000000_0 which needs 1 slots
2013-04-20 12:49:30,719 INFO org.apache.hadoop.mapred.TaskTracker: Received KillTaskAction for task: attempt_201304201135_0001_m_000001_0
2013-04-20 12:49:30,719 INFO org.apache.hadoop.mapred.TaskTracker: About to purge task: attempt_201304201135_0001_m_000001_0
2013-04-20 12:49:30,720 INFO org.apache.hadoop.mapred.IndexCache: Map ID attempt_201304201135_0001_m_000001_0 not found in cache
2013-04-20 12:49:30,742 INFO org.apache.hadoop.mapred.JvmManager: In JvmRunner constructed JVM ID: jvm_201304201135_0001_r_-1899194781
2013-04-20 12:49:30,742 INFO org.apache.hadoop.mapred.JvmManager: JVM Runner jvm_201304201135_0001_r_-1899194781 spawned.
2013-04-20 12:49:30,745 INFO org.apache.hadoop.mapred.TaskController: Writing commands to /tmp/hadoop-hadoop/mapred/local/ttprivate/taskTracker/hadoop/jobcache/job_201304201135_0001/attempt_201304201135_0001_r_000000_0/taskjvm.sh
2013-04-20 12:49:31,611 INFO org.apache.hadoop.mapred.TaskTracker: JVM with ID: jvm_201304201135_0001_r_-1899194781 given task: attempt_201304201135_0001_r_000000_0
2013-04-20 12:49:33,219 INFO org.apache.hadoop.mapred.TaskTracker: attempt_201304201135_0001_r_000000_0 0.0% 
2013-04-20 12:49:33,226 INFO org.apache.hadoop.mapred.TaskTracker: attempt_201304201135_0001_r_000000_0 0.0% 
2013-04-20 12:49:33,296 INFO org.apache.hadoop.mapred.TaskTracker: Task attempt_201304201135_0001_r_000000_0 is in commit-pending, task state:COMMIT_PENDING
2013-04-20 12:49:33,297 INFO org.apache.hadoop.mapred.TaskTracker: attempt_201304201135_0001_r_000000_0 0.0% 
2013-04-20 12:49:33,731 INFO org.apache.hadoop.mapred.TaskTracker: Received commit task action for attempt_201304201135_0001_r_000000_0
2013-04-20 12:49:35,143 INFO org.apache.hadoop.mapred.TaskTracker: attempt_201304201135_0001_r_000000_0 1.0% reduce > reduce
2013-04-20 12:49:35,147 INFO org.apache.hadoop.mapred.TaskTracker: Task attempt_201304201135_0001_r_000000_0 is done.
2013-04-20 12:49:35,147 INFO org.apache.hadoop.mapred.TaskTracker: reported output size for attempt_201304201135_0001_r_000000_0  was -1
2013-04-20 12:49:35,155 INFO org.apache.hadoop.mapred.TaskTracker: addFreeSlot : current free slots : 2
2013-04-20 12:49:35,272 INFO org.apache.hadoop.mapred.JvmManager: JVM : jvm_201304201135_0001_r_-1899194781 exited with exit code 0\. Number of tasks it ran: 1
2013-04-20 12:49:36,775 INFO org.apache.hadoop.mapred.TaskTracker: LaunchTaskAction (registerTask): attempt_201304201135_0001_m_000000_0 task's state:UNASSIGNED
2013-04-20 12:49:36,783 INFO org.apache.hadoop.mapred.TaskTracker: Trying to launch : attempt_201304201135_0001_m_000000_0 which needs 1 slots
2013-04-20 12:49:36,783 INFO org.apache.hadoop.mapred.TaskTracker: In TaskLauncher, current free slots : 2 and trying to launch attempt_201304201135_0001_m_000000_0 which needs 1 slots
2013-04-20 12:49:36,783 INFO org.apache.hadoop.mapred.TaskTracker: Received KillTaskAction for task: attempt_201304201135_0001_r_000000_0
2013-04-20 12:49:36,784 INFO org.apache.hadoop.mapred.TaskTracker: About to purge task: attempt_201304201135_0001_r_000000_0
2013-04-20 12:49:36,812 INFO org.apache.hadoop.mapred.JvmManager: In JvmRunner constructed JVM ID: jvm_201304201135_0001_m_-653215379
2013-04-20 12:49:36,812 INFO org.apache.hadoop.mapred.JvmManager: JVM Runner jvm_201304201135_0001_m_-653215379 spawned.
2013-04-20 12:49:36,814 INFO org.apache.hadoop.mapred.TaskController: Writing commands to /tmp/hadoop-hadoop/mapred/local/ttprivate/taskTracker/hadoop/jobcache/job_201304201135_0001/attempt_201304201135_0001_m_000000_0/taskjvm.sh
2013-04-20 12:49:37,718 INFO org.apache.hadoop.mapred.TaskTracker: JVM with ID: jvm_201304201135_0001_m_-653215379 given task: attempt_201304201135_0001_m_000000_0
2013-04-20 12:49:38,227 INFO org.apache.hadoop.mapred.TaskTracker: attempt_201304201135_0001_m_000000_0 0.0% 
2013-04-20 12:49:41,232 INFO org.apache.hadoop.mapred.TaskTracker: attempt_201304201135_0001_m_000000_0 0.0% cleanup
2013-04-20 12:49:41,238 INFO org.apache.hadoop.mapred.TaskTracker: attempt_201304201135_0001_m_000000_0 0.0% cleanup
2013-04-20 12:49:41,243 INFO org.apache.hadoop.mapred.TaskTracker: Task attempt_201304201135_0001_m_000000_0 is done.
2013-04-20 12:49:41,243 INFO org.apache.hadoop.mapred.TaskTracker: reported output size for attempt_201304201135_0001_m_000000_0  was -1
2013-04-20 12:49:41,245 INFO org.apache.hadoop.mapred.TaskTracker: addFreeSlot : current free slots : 2
2013-04-20 12:49:41,378 INFO org.apache.hadoop.mapred.JvmManager: JVM : jvm_201304201135_0001_m_-653215379 exited with exit code 0\. Number of tasks it ran: 1
2013-04-20 12:49:42,821 INFO org.apache.hadoop.mapred.TaskTracker: Received 'KillJobAction' for job: job_201304201135_0001
2013-04-20 12:49:42,822 INFO org.apache.hadoop.mapred.IndexCache: Map ID attempt_201304201135_0001_m_000000_0 not found in cache
2013-04-20 12:49:42,826 INFO org.apache.hadoop.mapred.UserLogCleaner: Adding job_201304201135_0001 for user-log deletion with retainTimeStamp:1366573782822 
```

`hadoop-hadoop-tasktracker-myhost3.log`

```
2013-04-20 12:35:43,798 INFO org.apache.hadoop.metrics2.impl.MetricsSystemImpl: TaskTracker metrics system started
2013-04-20 12:35:44,200 INFO org.apache.hadoop.metrics2.impl.MetricsSourceAdapter: MBean for source ugi registered.
2013-04-20 12:35:44,207 WARN org.apache.hadoop.metrics2.impl.MetricsSystemImpl: Source name ugi already exists!
2013-04-20 12:35:44,382 INFO org.mortbay.log: Logging to org.slf4j.impl.Log4jLoggerAdapter(org.mortbay.log) via org.mortbay.log.Slf4jLog
2013-04-20 12:35:44,467 INFO org.apache.hadoop.http.HttpServer: Added global filtersafety (class=org.apache.hadoop.http.HttpServer$QuotingInputFilter)
2013-04-20 12:35:44,496 INFO org.apache.hadoop.mapred.TaskLogsTruncater: Initializing logs' truncater with mapRetainSize=-1 and reduceRetainSize=-1
2013-04-20 12:35:44,500 INFO org.apache.hadoop.mapred.TaskTracker: Starting tasktracker with owner as hadoop
2013-04-20 12:35:44,501 INFO org.apache.hadoop.mapred.TaskTracker: Good mapred local directories are: /tmp/hadoop-hadoop/mapred/local
2013-04-20 12:35:44,506 WARN org.apache.hadoop.util.NativeCodeLoader: Unable to load native-hadoop library for your platform... using builtin-java classes where applicable
2013-04-20 12:35:44,520 INFO org.apache.hadoop.metrics2.impl.MetricsSourceAdapter: MBean for source jvm registered.
2013-04-20 12:35:44,521 INFO org.apache.hadoop.metrics2.impl.MetricsSourceAdapter: MBean for source TaskTrackerMetrics registered.
2013-04-20 12:35:49,567 INFO org.apache.hadoop.metrics2.impl.MetricsSourceAdapter: MBean for source RpcDetailedActivityForPort39327 registered.
2013-04-20 12:35:49,568 INFO org.apache.hadoop.metrics2.impl.MetricsSourceAdapter: MBean for source RpcActivityForPort39327 registered.
2013-04-20 12:35:49,575 INFO org.apache.hadoop.mapred.TaskTracker: TaskTracker up at: localhost/127.0.0.1:39327
2013-04-20 12:35:49,575 INFO org.apache.hadoop.mapred.TaskTracker: Starting tracker tracker_myhost3:localhost/127.0.0.1:39327
2013-04-20 12:35:49,586 INFO org.apache.hadoop.ipc.Server: Starting SocketReader
2013-04-20 12:35:49,587 INFO org.apache.hadoop.ipc.Server: IPC Server Responder: starting
2013-04-20 12:35:49,587 INFO org.apache.hadoop.ipc.Server: IPC Server listener on 39327: starting
2013-04-20 12:35:49,587 INFO org.apache.hadoop.ipc.Server: IPC Server handler 0 on 39327: starting
2013-04-20 12:35:49,587 INFO org.apache.hadoop.ipc.Server: IPC Server handler 1 on 39327: starting
2013-04-20 12:35:49,587 INFO org.apache.hadoop.ipc.Server: IPC Server handler 2 on 39327: starting
2013-04-20 12:35:49,587 INFO org.apache.hadoop.ipc.Server: IPC Server handler 3 on 39327: starting
2013-04-20 12:35:50,617 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: 192.168.1.8/192.168.1.8:7001\. Already tried 0 time(s).
2013-04-20 12:35:51,617 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: 192.168.1.8/192.168.1.8:7001\. Already tried 1 time(s).
2013-04-20 12:35:52,618 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: 192.168.1.8/192.168.1.8:7001\. Already tried 2 time(s).
2013-04-20 12:35:53,618 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: 192.168.1.8/192.168.1.8:7001\. Already tried 3 time(s).
2013-04-20 12:35:54,619 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: 192.168.1.8/192.168.1.8:7001\. Already tried 4 time(s).
2013-04-20 12:35:55,619 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: 192.168.1.8/192.168.1.8:7001\. Already tried 5 time(s).
2013-04-20 12:35:56,620 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: 192.168.1.8/192.168.1.8:7001\. Already tried 6 time(s).
2013-04-20 12:35:57,620 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: 192.168.1.8/192.168.1.8:7001\. Already tried 7 time(s).
2013-04-20 12:35:58,621 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: 192.168.1.8/192.168.1.8:7001\. Already tried 8 time(s).
2013-04-20 12:35:59,622 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: 192.168.1.8/192.168.1.8:7001\. Already tried 9 time(s).
2013-04-20 12:35:59,625 INFO org.apache.hadoop.ipc.RPC: Server at 192.168.1.8/192.168.1.8:7001 not available yet, Zzzzz...
2013-04-20 12:36:01,624 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: 192.168.1.8/192.168.1.8:7001\. Already tried 0 time(s).
2013-04-20 12:36:02,625 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: 192.168.1.8/192.168.1.8:7001\. Already tried 1 time(s).
2013-04-20 12:36:03,624 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: 192.168.1.8/192.168.1.8:7001\. Already tried 2 time(s).
2013-04-20 12:36:04,625 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: 192.168.1.8/192.168.1.8:7001\. Already tried 3 time(s).
2013-04-20 12:36:05,624 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: 192.168.1.8/192.168.1.8:7001\. Already tried 4 time(s).
2013-04-20 12:36:06,625 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: 192.168.1.8/192.168.1.8:7001\. Already tried 5 time(s).
2013-04-20 12:36:07,627 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: 192.168.1.8/192.168.1.8:7001\. Already tried 6 time(s).
2013-04-20 12:36:08,627 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: 192.168.1.8/192.168.1.8:7001\. Already tried 7 time(s).
2013-04-20 12:36:09,627 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: 192.168.1.8/192.168.1.8:7001\. Already tried 8 time(s).
2013-04-20 12:36:10,628 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: 192.168.1.8/192.168.1.8:7001\. Already tried 9 time(s).
2013-04-20 12:36:10,629 INFO org.apache.hadoop.ipc.RPC: Server at 192.168.1.8/192.168.1.8:7001 not available yet, Zzzzz...
2013-04-20 12:36:12,629 INFO org.apache.hadoop.ipc.Client: Retrying connect to server: 192.168.1.8/192.168.1.8:7001\. Already tried 0 time(s).
2013-04-20 12:36:42,982 INFO org.apache.hadoop.mapred.TaskTracker:  Using ResourceCalculatorPlugin : null
2013-04-20 12:36:43,000 INFO org.apache.hadoop.mapred.TaskTracker: Starting thread: Map-events fetcher for all reduce tasks on tracker_myhost3:localhost/127.0.0.1:39327
2013-04-20 12:36:43,002 WARN org.apache.hadoop.util.ProcessTree: setsid is not available on this machine. So not using it.
2013-04-20 12:36:43,002 INFO org.apache.hadoop.util.ProcessTree: setsid exited with exit code 0
2013-04-20 12:36:43,157 INFO org.apache.hadoop.util.ProcfsBasedProcessTree: ProcfsBasedProcessTree currently is supported only on Linux.
2013-04-20 12:36:43,157 INFO org.apache.hadoop.mapred.TaskTracker: ProcessTree implementation is missing on this system. TaskMemoryManager is disabled.
2013-04-20 12:36:43,165 INFO org.apache.hadoop.mapred.IndexCache: IndexCache created with max memory = 10485760
2013-04-20 12:36:43,173 INFO org.apache.hadoop.metrics2.impl.MetricsSourceAdapter: MBean for source ShuffleServerMetrics registered.
2013-04-20 12:36:43,176 INFO org.apache.hadoop.http.HttpServer: Port returned by webServer.getConnectors()[0].getLocalPort() before open() is -1\. Opening the listener on 50060
2013-04-20 12:36:43,176 INFO org.apache.hadoop.http.HttpServer: listener.getLocalPort() returned 50060 webServer.getConnectors()[0].getLocalPort() returned 50060
2013-04-20 12:36:43,176 INFO org.apache.hadoop.http.HttpServer: Jetty bound to port 50060
2013-04-20 12:36:43,176 INFO org.mortbay.log: jetty-6.1.26
2013-04-20 12:36:43,567 INFO org.mortbay.log: Started SelectChannelConnector@0.0.0.0:50060
2013-04-20 12:36:43,567 INFO org.apache.hadoop.mapred.TaskTracker: FILE_CACHE_SIZE for mapOutputServlet set to : 2000
2013-04-20 12:36:43,576 INFO org.apache.hadoop.mapred.UserLogCleaner: Adding job_201304060623_0002 for user-log deletion with retainTimeStamp:1366573003161
2013-04-20 12:36:43,576 INFO org.apache.hadoop.mapred.UserLogCleaner: Adding job_201304060623_0005 for user-log deletion with retainTimeStamp:1366573003161
2013-04-20 12:36:43,576 INFO org.apache.hadoop.mapred.UserLogCleaner: Adding job_201304070459_0001 for user-log deletion with retainTimeStamp:1366573003161
2013-04-20 12:36:43,576 INFO org.apache.hadoop.mapred.UserLogCleaner: Adding job_201304030513_0001 for user-log deletion with retainTimeStamp:1366573003161
2013-04-20 12:36:43,576 INFO org.apache.hadoop.mapred.UserLogCleaner: Adding job_201304070413_0001 for user-log deletion with retainTimeStamp:1366573003161
2013-04-20 12:36:43,576 INFO org.apache.hadoop.mapred.UserLogCleaner: Adding job_201304012201_0015 for user-log deletion with retainTimeStamp:1366573003161
2013-04-20 12:36:43,576 INFO org.apache.hadoop.mapred.UserLogCleaner: Adding job_201304192207_0001 for user-log deletion with retainTimeStamp:1366573003161
2013-04-20 12:36:43,576 INFO org.apache.hadoop.mapred.UserLogCleaner: Adding job_201304121018_0003 for user-log deletion with retainTimeStamp:1366573003161
2013-04-20 12:36:43,576 INFO org.apache.hadoop.mapred.UserLogCleaner: Adding job_201304112319_0001 for user-log deletion with retainTimeStamp:1366573003161
2013-04-20 12:36:43,577 INFO org.apache.hadoop.mapred.UserLogCleaner: Adding job_201304112319_0005 for user-log deletion with retainTimeStamp:1366573003161
2013-04-20 12:36:43,577 INFO org.apache.hadoop.mapred.UserLogCleaner: Adding job_201304070459_0003 for user-log deletion with retainTimeStamp:1366573003161
2013-04-20 12:49:45,627 INFO org.apache.hadoop.mapred.TaskTracker: Received 'KillJobAction' for job: job_201304201135_0001
2013-04-20 12:49:45,628 WARN org.apache.hadoop.mapred.TaskTracker: Unknown job job_201304201135_0001 being deleted. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T21:06:47.807

Log4j 输出将写入每个 map/reduce 任务的任务日志 - 这不会返回到作业客户端 stdout/err，除非 map/reduce 任务以某种方式失败。

您需要通过作业跟踪器找到任务实例，然后查看特定 map/reduce 任务实例的日志。

# nhibernate - NHiberntate Persistence API “没有名为“”的 EntityManager 的持久性提供程序的问题

> ID：16111748
> 
> 赞同：0
> 
> 时间：2013-04-19T19:01:36.127
> 
> 标签：nhibernate, appharbor

我使用 NHibernate 的 JPA (NPA) 实现并嵌入了`persistence.xml`配置文件，但我在 AppHarbor 上的应用程序显示：

> “没有名为 persistenceUnit 的 EntityManager 的持久性提供程序”

它在我的本地机器上运行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T22:24:56.477

您是否确认相关文件包含在您的构建输出中？尝试从 AppHarbor 下载构建输出并检查所有内容是否都在其应有的位置。（如果没有，您可能需要将相关文件的“构建操作”设置为“内容”。

# ruby-on-rails - HABTM 添加新的关联来加入表

> ID：16111749
> 
> 赞同：1
> 
> 时间：2013-04-19T19:01:46.093
> 
> 标签：ruby-on-rails, has-and-belongs-to-many

如何`has_and_belongs_to_many`在两个模型之间的表中添加多条记录？

到目前为止，我所能做的就是创建一条记录，然后更新该记录。我想将多条记录添加到联接表中。

现在我有一个collection_select，但更新方法只允许我更新记录，而不是添加新记录。

我最好的猜测是在组控制器的更新方法中添加类似的东西`@group.workouts << workout_id`，但我不知道如何让它工作。

我在正确的轨道上吗？

我正在尝试将锻炼添加到组和组到锻炼。

谢谢您的帮助！

编辑1：

我有一个`collection_select`允许我向连接表添加一条记录，但我试图弄清楚如何向连接表添加第二条、第三条等记录。我`collection_select`的是：

```
<div class="field">
    <%= f.collection_select 'workout_ids', Workout.all, :id, :name, { :include_blank => ""} %>
</div> 
```

很简单，我想在一个小组中添加一个锻炼，我可以做到。然后我想在同一组中添加另一个锻炼，然后是另一个，等等。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T23:44:55.960

编辑：

[本要点](https://gist.github.com/arelenglish/6110438)中详细说明了正确执行此操作的实际方法

~~所以这个问题的答案是在控制器中编辑更新操作：~~

```
workout_id = params[:group].delete(:workout_ids)

    # Adding a workout
    if workout_id
      workout = Workout.find(workout_id)
      @group.workouts << workout
    end 
```

上面的代码创建了一个局部变量，该变量`workout_id`接受参数`:group`，并`:workout_id`从方法中删除第二个参数，以在您更改组名称时更新实际组，例如。`:group``.delete`

然后我们只需将一个新的锻炼推送到@group.workouts，每次我们从集合选择中向组中添加一个新的锻炼时，都会在连接表中创建一个新记录。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T19:10:25.853

在控制台中，您可以按照您的猜测进行操作：

```
group.workouts << workout 
```

或者

```
workout.groups += [group_a, group_b, group_c] 
```

在我的脑海中，我认为你会想要传递实际的对象，而不仅仅是 ID，但它可能会双向工作。

在表单构建器中应该能够`collection_select`用于此：

```
= form_for @workout do |f|
  = f.collection_select :group_id, Group.all, :id, :name, :prompt => true 
```

其他工具如[Simple Form](https://github.com/plataformatec/simple_form)的关联方法使这更容易。

# c - 在代码中使用 turboboost 测量 CPU 频率

> ID：16111750
> 
> 赞同：4
> 
> 时间：2013-04-19T19:01:52.893
> 
> 标签：c, linux, performance, cpu, intel

我正在以三种不同的频率在三台不同的计算机上分析一些代码。我需要频率来测量 GFLOPs/s。我有一些代码可以做到这一点，但它不考虑 Turboboost。例如，在我的 2600k CPU 上，它报告为 3.4 GHz，但是当我运行 CPUz 时，我可以看到我的 CPU 以 4.3 GHz（超频）运行，因为我的代码使用了所有内核。

```
#include "stdint.h"
#include "stdio.h"
#include "omp.h"
int main() {
    int64_t cycles = rdtsc(); double dtime = omp_get_wtime();
    //run some code which uses all cores for a while (few ms)   
    dtime = omp_get_wtime() - dtime;
    cycles = rdtsc() - cycles;
    double freq = (double)cycles/dtime*1E-9;
    printf("freq %.2f GHz\n", freq);
}
__int64 rdtsc() {
#ifdef _WIN32
    return __rdtsc();
#else
  uint64_t t;
  asm volatile ("rdtsc" : "=A"(t));
  return t;
#endif
} 
```

我知道这个问题已经被问过很多次，有不同的答案，但我仍然不清楚这是否可以做到。我不在乎黑客试图更改计时器。此代码仅供我自己使用。是否有可能在代码中获得实际频率？这是如何在 Linux 上完成的？我在 linux 上找到的每个示例都给出了基本频率（或者可能是最大值），但没有像 CPUz 那样给出负载下的工作频率。

编辑：我找到了一个用于 Linux 的程序 Powertop，它似乎显示了实际的运行频率。由于源代码可用，也许可以弄清楚如何在我自己的代码中获得实际频率。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-21T08:20:50.003

我终于解决了这个问题。无需设备驱动程序或读取特殊计数器即可测量代码中的实际工作频率。

基本上，您为具有携带循环依赖性的操作计时一个循环，该循环依赖性总是需要相同的延迟。例如

```
for(int i=0; i<spinCount; i++) {
    x = _mm_add_ps(x,_mm_set1_ps(1.0f));
} 
```

您在绑定到每个物理核心（非逻辑）核心的线程中运行此循环。要求系统中没有其他线程然后这些线程占用任何大量的 CPU 时间，因此这种方法并不总是给出正确的答案，但在我的情况下它工作得很好。在单插槽系统和多插槽系统上，我得到的结果与 Nahalem、Ivy Bridge 和 Haswell 上的一个线程和多个线程的正确涡轮频率偏差小于 0.5%。我在[how-can-i-programmatically-find-the-cpu-frequency-with-c](https://stackoverflow.com/questions/11706563/how-can-i-programmatically-find-the-cpu-frequency-with-c/25400230#25400230)中描述了这个细节，所以我不会在这里重复所有细节。

# java - 自动呼叫拒绝 Android

> ID：16111753
> 
> 赞同：0
> 
> 时间：2013-04-19T19:02:07.453
> 
> 标签：java, android, call, telephonymanager

在我的应用程序中，如果手机处于充电状态，我想拒绝来电。

请任何人都可以查看我的代码并指出我做错了什么？尤其是拒绝功能。

我试图实施这个几天，但它只是不工作！

我有以下代码：

**`MyPhoneStateListener.java`：**

```
import java.lang.reflect.Method;
import com.android.internal.telephony.ITelephony;
import android.app.Activity;
import android.app.AlertDialog;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.media.AudioManager;
import android.os.BatteryManager;
import android.telephony.PhoneStateListener;
import android.telephony.SmsManager;
import android.telephony.TelephonyManager;
import android.util.Log;
import android.widget.Toast;

public class MyPhoneStateListener extends PhoneStateListener {
private Context contextMember;
private String strRegisterNumber1 = "";
private String strRegisterNumber2 = "";
public  FileManager fileManager;
 // private ITelephony telephonyService;

public MyPhoneStateListener(Context context) {
    super();
    // TODO Auto-generated constructor stub
    contextMember = context;
}

public void onCallStateChanged(int state, String incomingNumber)
{
    fileManager = new FileManager(contextMember);

    strRegisterNumber1 = fileManager.getItems(0);
    strRegisterNumber2 = fileManager.getItems(1);

    switch (state)
    {
    case TelephonyManager.CALL_STATE_IDLE:
        Log.i("DEBUG", "idle");
        break;
    case TelephonyManager.CALL_STATE_OFFHOOK:
        AudioManager audioManager = (AudioManager) contextMember.getSystemService(Context.AUDIO_SERVICE);
        audioManager.setSpeakerphoneOn(true);
        audioManager.setStreamVolume(AudioManager.STREAM_MUSIC, audioManager.getStreamMaxVolume(AudioManager.STREAM_MUSIC), 0);         
        break;
    case TelephonyManager.CALL_STATE_RINGING:
        if (incomingNumber == strRegisterNumber1 || incomingNumber == strRegisterNumber2) // register phone caller
        {
            if (isCharging())
            {
                reject();
                sendSMS(incomingNumber);
            } else
            {
                return;
            }
        } else
        {
            reject();
        }
        break;
    }
}

public void reject() // phone call reject
{
    TelephonyManager telephony = (TelephonyManager)contextMember.getSystemService(Context.TELEPHONY_SERVICE);
    try {
        Class c = Class.forName(telephony.getClass().getName());
        Method m = c.getDeclaredMethod("getITelephony");
        m.setAccessible(true);
        ITelephony telephonyService = (ITelephony) m.invoke(telephony);
        telephonyService.silenceRinger();
        telephonyService.endCall();

        AlertDialog.Builder builder = new AlertDialog.Builder(contextMember);
        builder.setTitle("reject status");
        builder.setMessage("reject sucess").setCancelable(false).setPositiveButton("OK", null);
        AlertDialog alert = builder.create();
        alert.show();

    } catch(Exception e)
    {
        e.printStackTrace();
    }
}

public boolean isCharging()
{
    IntentFilter ifilter = new IntentFilter(Intent.ACTION_BATTERY_CHANGED);
    Intent batteryStatus = contextMember.registerReceiver(null, ifilter);
    int status = batteryStatus.getIntExtra(BatteryManager.EXTRA_STATUS, -1);
    boolean bCharging = status == BatteryManager.BATTERY_STATUS_CHARGING ||
                         status == BatteryManager.BATTERY_STATUS_FULL;
    return bCharging;
}

public void sendSMS(String phoneNumber)
{
    String message = "I am at home";

    try {
        SmsManager smsManager = SmsManager.getDefault();
        smsManager.sendTextMessage(phoneNumber, null, message, null, null);
        Toast.makeText(contextMember.getApplicationContext(), "SMS Sent", Toast.LENGTH_LONG).show();
    } catch (Exception e)
    {
        Toast.makeText(contextMember.getApplicationContext(), "SMS faild, please try again later!", Toast.LENGTH_LONG).show();
        e.printStackTrace();
    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T19:03:44.570

我在这里看到的一个问题是：

```
 if (incomingNumber == strRegisterNumber1 || incomingNumber == strRegisterNumber2) 
```

应该

```
 if (incomingNumber.equals( strRegisterNumber1) || incomingNumber.equals( strRegisterNumber2)) 
```

字符串比较应该使用`equals()`而不是`==`

注意：确保`incomingNumber`不是`null`.

# php - Go 和 PHP 中的 SHA256 给出不同的结果

> ID：16111754
> 
> 赞同：6
> 
> 时间：2013-04-19T19:02:12.270
> 
> 标签：php, go, sha, sha256

我正在尝试通过 HTTP 将 SHA256 散列字符串发送到服务器，我想通过执行 SHA256 散列并验证两者匹配来进行身份验证。出于测试目的，我使用相同的字符串，但是我的结果不匹配。这可能是我的 base64_encode 调用的默认编码方案吗？谢谢。

在 PHP 中，我正在做：

```
$sha = hash("sha256", $url, true);
$sha = base64_encode(urlencode($sha)); 
```

在围棋中我正在做

```
//convert string to byte slice
converted := []byte(to_hash)

//hash the byte slice and return the resulting string
hasher := sha256.New()
hasher.Write(converted)
return (base64.URLEncoding.EncodeToString(hasher.Sum(nil))) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T21:12:24.737

一段时间后我能够弄清楚。我将两者都标准化为十六进制编码。为此，我将代码更改如下：

PHP：

```
$sha = hash("sha256", $url, false); //false is default and returns hex
//$sha = base64_encode(urlencode($sha)); //removed 
```

去：

```
//convert string to byte slice
converted := []byte(to_hash)

//hash the byte slice and return the resulting string
hasher := sha256.New()
hasher.Write(converted)
return (hex.EncodeToString(hasher.Sum(nil))) //changed to hex and removed URLEncoding 
```

# php - 仅用于一个函数的未定义变量

> ID：16111756
> 
> 赞同：-4
> 
> 时间：2013-04-19T19:02:20.080
> 
> 标签：php

我写了很多函数，大约 10 个左右，而且我对所有函数都使用相同的格式，除了这个之外，一切似乎都可以工作。

```
<?php

function eugpwlogic($x)
{
   if($x <=- "1.9")
   { 
      echo $p=("0.20");
   }
   elseif($x <-"1.8" )
   { 
    echo $p=("0.90");
   }
   return $p;
}

?> 
```

我不断收到相同的警告通知

```
Notice: Undefined variable: p in C:\xampp\htdocs\xampp\Testing\final\add.php on line 13 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T19:04:14.667

```
function eugpwlogic($x)
{

   $p = null; //define $p !!
   if($x <=- "1.9")
   { 
      echo $p=("0.20");
   }
   elseif ($x <-"1.8" )
   { 
      echo $p=("0.90");
   }

   return $p;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T19:06:39.777

你可以试试

```
function eugpwlogic($x) {
    $p = 0;
    if ($x <= - 1.9) {
        $p = 0.20;
    } elseif ($x < - 1.8) {
        $p = 0.90;
    }
    return $p;
}

echo eugpwlogic(-2.5); 
```

# c - C-将结构数组设置为空

> ID：16111758
> 
> 赞同：4
> 
> 时间：2013-04-19T19:02:35.263
> 
> 标签：c, arrays, multidimensional-array, struct

很抱歉，如果我有点困惑。

我正在尝试使用从输入文件中读取的值填充结构数组。我从文件中读取值没有问题。但是当文件很小并且没有完全填充数组时，剩余的结构中有随机值，我想将这些结构完全设置为NULL。我正在尝试这样做，因为我想遍历这个填充的结构数组并打印它的值，并且我需要查看哪些数组值是合法的来自文件。

到目前为止，这是我的代码

```
struct function {
    char name[20];
    int parameterNumer;

};

int main(int argc, const char * argv[])
{
    struct function functionList[10];
    int i =0, j;
    int portNumber;
    char *configFile = argv[1];
    FILE *fp;

    fp = fopen(configFile, "r");
    if(fp == NULL) {
        perror("File not found");
        exit(1);
    }

    fscanf(fp, "%d", &portNumber);
    while(fscanf(fp, "%s %d", functionList[i].name, &functionList[i].parameterNumer) == 2) {
        i++;
    }
    functionList[i] = NULL; //getting an error here

    for(j = 0; functionList[j] != NULL; j++) {  //and here
        printf("%s %d", functionList[j].name, &functionList[j].parameterNumer);
    }

    return 0;

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T19:04:01.680

初始化数组：

```
/* Remaining elements zero-d. */
struct function functionList[10] = { { "", 0 } }; 
```

如果空字符串或零表示数组中未填充的条目，则使用空字符串或零`int`来终止`for`：

```
for(j = 0; strlen(functionList[j].name); j++) {

for(j = 0; functionList[j].parameterNumber; j++) { 
```

`functionList`此外，防止在中的越界访问`while`：

```
while(i < 10 && fscanf(fp,
                       "%s %d",
                       functionList[i].name,
                       &functionList[i].parameterNumer) == 2)
{
    i++;
} 
```

请注意，`i`after this的值`while`也将为后续`for`循环提供终止条件：

```
for (j = 0; j < i; j++) { 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T19:06:34.033

您还可以使用[`memset`](http://www.cplusplus.com/reference/cstring/memset/)：

```
memset(functionList, 0, sizeof(functionList)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-19T19:09:34.667

您可以使用创建数组`calloc()`

```
struct function* functionList = calloc(sizeof(struct function), 10); 
```

并更改为引用数组的指针，这样创建的结构中全为零。

# html - XSLT 在 chrome 上生成格式错误的路径

> ID：16111759
> 
> 赞同：0
> 
> 时间：2013-04-19T19:02:35.317
> 
> 标签：html, xml, google-chrome, xslt, web

我正在尝试使用 XSLT 从 XML 生成一些 HTML。我有这个标签子集：

```
<IMG>
    <path>
        img/path.jpg
    </path>
...
</IMG> 
```

图像的路径，一旦在 index.html 文件中生成，包括换行和缩进选项卡！（例如：src="img/pathToImg.jpg%0A%09%09%09"）这似乎发生在 chrome 中。它在 Firefox 和 IE 中运行良好。会是什么呢？先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T03:07:55.837

您还没有向我们展示您的 XSLT，但通常您可以使用 XSLT 去除空格`normalize-space()`：

```
 <img src="{normalize-space(path)}" /> 
```

# html - 使用 CSS 定位 Wordpress 标题

> ID：16111760
> 
> 赞同：0
> 
> 时间：2013-04-19T19:02:36.603
> 
> 标签：html, css, wordpress

我正在将某人的静态 HTML 设计转换为 Wordpress，但在处理标题时遇到了问题。

情况是标题向下扩展，这意味着当一个标题变成多行时，其他标题也会向上跳跃，即使它们只有一行。

这就是发生的事情 ![这就是发生的事情](https://i.stack.imgur.com/3J4iK.png)

这就是我想要的 ![在此处输入图像描述](https://i.stack.imgur.com/HRScl.jpg)

这是我用来定位标题的 CSS，因此标题的底部会碰到图像的底部：

```
.single_title {
    font-family:Novecent_norm, arial, helvetica, sans serif;
    font-size: 18px;
    width: 240px;
    color: white;
    background-color: purple;
    margin-top: -86px;
    position: fixed;
} 
```

所以问题是：是否有一个 CSS 属性可以解决这个问题，所以在标题的顶部而不是在它的底部添加额外的文本行？

根据要求，HTML：

```
<?php get_header(); ?>

<?php if (have_posts()) : ?>
<?php while (have_posts()) : the_post(); ?>
<div class="content_container">
    <div class="thumb_art">
    <h2><a href="<?php the_permalink() ?>" rel="bookmark" title="Permanent Link to <?php the_title(); ?>">
            <div class="thumb_img" style="z-index: 0;">
            <?php
            if (has_post_thumbnail()) {
                the_post_thumbnail();
            }?>
            </div>
            </a></h2>

        <h2><a href="<?php the_permalink() ?>" rel="bookmark" title="Permanent Link to <?php the_title(); ?>">
        <div class="single_title">

                <?php the_title();?>

            </div></a></h2>
    </div>
</div>
    <?php endwhile; else: ?>
    <p><?php _e('Sorry, no posts matched your criteria.'); ?></p>
<?php endif; ?>
<div class="navigation">  <div class="alignleft"><?php previous_posts_link('&laquo; Next Entries') ?></div>  <div class="alignright"><?php next_posts_link('Previous Entries &raquo;') ?></div></div>
<?php get_footer(); ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T20:03:54.950

使 thumb_art 位置相对，然后在 single_title 上将底部设置为 0 以使其始终粘在底部

**css**

```
.single_title {
    font-family:Novecent_norm, arial, helvetica, sans serif;
    font-size: 18px;
    width: 240px;
    color: white;
    background-color: purple;
    bottom:0;
    position: fixed;
} 
```

*如果还没有设置为相对添加这个*

```
.thumb_art{
   position:relative;//actually any positioning would do
} 
```

仍然不完全确定我是否正确理解了您的问题，如果我缺少某些东西，请告诉。

**编辑：**

如果你使用了我的方法，这就是它的样子

[http://jsfiddle.net/nhewu/](http://jsfiddle.net/nhewu/)

# javascript - 使用 jQuery 删除链接图像和其他 div ID

> ID：16111762
> 
> 赞同：0
> 
> 时间：2013-04-19T19:02:37.300
> 
> 标签：javascript, jquery

这是我的代码：

```
jQuery("#test").after("<a id='clearall' href='#' onclick='jQuery(this).remove(); jQuery('.clearselection').remove;'><img src='clearselection.gif'></a>"); 
```

当我尝试这个时，我得到一个语法错误：

```
jQuery(this).remove(); jQuery(<--- 
```

当我单击链接时，我需要删除链接图像并删除该类 .clearselection 的所有实例。我尝试转义单引号，但这没有用。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T19:06:57.987

而不是定义点击处理程序内联使用 jquery 来处理：

```
$(document).on("click", "#clearall", function()
{
   jQuery(this).remove(); 
   jQuery('#clearselection').remove(); //btw you were missing the parens here
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T19:07:43.570

替换这个：

```
onclick='jQuery(this).remove(); jQuery(\'.clearselection\').remove();' 
```

# c# - 验证两个控件 (CustomValidator)

> ID：16111763
> 
> 赞同：4
> 
> 时间：2013-04-19T19:02:42.413
> 
> 标签：c#, asp.net, vb.net

在提交表单之前，我需要测试总和（txtA + txtB）是否大于 100。是否可以使用 a 来执行此操作`CustomValidator`，因为我不知道是否可以在 controltovalidate 中选择 2 文本框

```
<asp:TextBox ID="txtA" runat="server"></asp:TextBox>
<asp:TextBox ID="txtB" runat="server"></asp:TextBox>
<asp:CustomValidator ID="CustomValidator2" 
                     runat="server" 
                     ErrorMessage="CustomValidator" />

<asp:Button ID="Button1" runat="server" Text="Button" /> 
```

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-19T19:10:17.407

你可以这样做：

```
<asp:TextBox ID="txtA" runat="server" /> 
<asp:TextBox ID="txtB" runat="server" />
<asp:CustomValidator ID="CV1"runat="server" 
    OnServerValidate="ServerValidation" 
    ErrorMessage="Sum is less than 100" /> 
```

代码隐藏：

```
protected void ServerValidation(object source, ServerValidateEventArgs args)
{
    args.IsValid = int.Parse(txtA.Text)+ int.Parse(txtB.Text) >100;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-29T15:59:55.353

当您在页面中放置自定义验证时，您可以将验证器链接到一个控件，但是如果您想对多个控件执行多个验证，则需要包含以下属性

```
 OnServerValidate="MyMethodOnServerSide" 
```

并在服务器端定义该方法

```
protected void MyMethodOnServerSide(object source, ServerValidateEventArgs args)
{
     if (string.IsNullOrEmpty(mytxt1.Text) &&
            string.IsNullOrEmpty(mytxt2.Text))
            {
                args.IsValid = false;
                return;
            }

            args.IsValid = true;
} 
```

只需将`args.IsValid`属性分配给您需要的值。另一方面，验证是在您加载页面之前完成的，因此如果您单击一个按钮，该按钮执行一个操作，例如从数据库读取值以防万一一切正确，则在该操作上您需要包括以下检查。

```
protected void cmdSearch_Click(object sender, EventArgs e)
{
    if (Page.IsValid)
    {
          LoadDataFromDB();
    }
} 
```

什么时候`args.IsValid`是假的，那么`Page.IsValid`也是假的。希望这可以帮助

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-19T19:14:23.420

您需要添加另一个控件，`<asp:HiddenField>`然后利用`jQuery`来设置该控件的值。它可能看起来像这样：

# 标记

```
<asp:HiddenField ID="SumOfValues" />
<asp:CustomValidator ID="CustomValidator2"
    runat="server"
    ErrorMessage="CustomValidator"
    ControlToValidate="SumOfValues" /> 
```

# 查询

```
$(document).ready(function() {
    $('#txtA').change(sumValues);
    $('#txtB').change(sumValues);
});

function sumValues() {
    var val1 = $('txtA').value();
    if (val1 === undefined) { val1 = 0; }

    var val2 = $('txtB').value();
    if (val2 === undefined) { val2 = 0; }

    $('#SumOfValues').value(val1 + val2);
} 
```

这应该允许您验证隐藏的控件。但是，您需要确保对所有三个控件执行的一件事是利用`ClientIDMode`并将其设置为，`Static`以便名称与您在到达页面时在标记中指定的名称完全相同。

# javascript - Xstream 为 List 生成 json 响应 I am using Xstream to generate JSON for my application.I want to use JSON for ajax support. When i try xstream.alias(classAlias, jsonModel.getClass()); //Note classAlias="records" re 问问题 问问题 2013-04-19T19:02:59.613 253 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I am using Xstream to generate JSON for my application.I want to use JSON for ajax support. When i try xstream.alias(classAlias, jsonModel.getClass()); //Note classAlias="records" responseStream.println(xstream.toXML(jsonModel)); where jsonModel is actually a List of entity objects.Entity class name is Person which is in "beans" package so full qualified name would be beans.Person. OK Person class has properties like id,name,age etc. Generated JSON is {"records":[{"beans.Person":[{"id":21,"name":"Name21","username":"Username21","password":"password21","age":41,"sex":true},{"id":22,"name":"Name22","username":"Username22","password":"password22","age":42,"sex":true},{"id":23,"name":"Name23","username":"Username23","password":"password23","age":43,"sex":true},{"id":24,"name":"Name24","username":"Username24","password":"password24","age":44,"sex":true},{"id":25,"name":"Name25","username":"Username25","password":"password25","age":45,"sex":true},{"id":26,"name":"Name26","username":"Username26","password":"password26","age":46,"sex":true},{"id":27,"name":"Name27","username":"Username27","password":"password27","age":47,"sex":true},{"id":28,"name":"Name28","username":"Username28","password":"password28","age":48,"sex":true},{"id":29,"name":"Name29","username":"Username29","password":"password29","age":49,"sex":true},{"id":30,"name":"Name30","username":"Username30","password":"password30","age":50,"sex":true}]}]} I used $.getJSON of jquery to get this response on button click event. I checked the status which is "success" every time so this is working well.Problem occurs when i try to access first records i.e. person's information like id,username etc. I write statements in Javascript as <script> $(document).ready(function() { $("input").click(function(){ $.getJSON("http://mylocalhost:8080/Paging/paging/records?page=3",function(data,status){ alert(status); alert(data.records[0].beans.Person[0].id); }); }); }); </script> First alert works but second doesn't. Then javascript stops working as it does whenever encounters an error.What i can guess is that in records array Person object is followed by package name.This could be the reason because browser may look for beans object in records array which is not there because beans.Person is a single, atomic name in this case as shown in above. But not sure? If this is actually problem then how can i stop/control XStream to name an object's name as just classname(person) instead of package.classname(beans.person) as it is being named by default. or If everything is OK in produced JSON object then why can't i see the expected result? Why simple second alert statement is not working. I think you are missing the g (Global) at the end of your regex (demo): alert("abc:target12 target12 cdtarget23 target".replace(/target[0-9]{2}/g, 'ok')) javascriptjqueryajaxjsonxstream 4 1 回答 1 This answer is useful 0 我得到了我要使用的答案 alert(data.records[0]["beans.Person"][0].id); 代替 alert(data.records[0].beans.Person[0].id); 一个有用的链接 http://www.javascripttoolbox.com/bestpractices/#squarebracket 于 2013-04-20T07:36:44.587 回答 Related 0 javascript - 在 Javascript d3 中更新 svg:line 0 directshow - Win7/Vista 上的视频播放 [dshow, dmo] 5 jquery - 不透明度的过渡需要预先设置的显示块 1 iis - 如何限制对我的游戏客户端源的访问 1 android - Android API 8 , 10 ContactsContract.Data.HAS_PHONE_NUMBER 没有这样的列 2 c++ - 为什么 int 数组在 C++ 中未初始化为零？ 2 python - 是否有一个能够在 128mb 内存上正常运行的 python 网络框架？ 3 android - 不确定如何在 2 列中动态添加复选框 2 jquery - jQuery：为 Django 设置 CSRF 令牌不起作用 1 .net - 如何仅为当前用户注册类型库？ Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：16111767
> 
> 赞同：0
> 
> 时间：
> 
> 标签：javascript, jquery, ajax, json, xstream

I am using Xstream to generate JSON for my application.I want to use JSON for ajax support. When i try

```
 xstream.alias(classAlias, jsonModel.getClass()); //Note classAlias="records"
responseStream.println(xstream.toXML(jsonModel)); 
```

where jsonModel is actually a List of entity objects.Entity class name is **Person** which is in "**beans**" package so full qualified name would be **beans.Person**. OK Person class has properties like id,name,age etc.

Generated JSON is

```
 {"records":[{"beans.Person":[{"id":21,"name":"Name21","username":"Username21","password":"password21","age":41,"sex":true},{"id":22,"name":"Name22","username":"Username22","password":"password22","age":42,"sex":true},{"id":23,"name":"Name23","username":"Username23","password":"password23","age":43,"sex":true},{"id":24,"name":"Name24","username":"Username24","password":"password24","age":44,"sex":true},{"id":25,"name":"Name25","username":"Username25","password":"password25","age":45,"sex":true},{"id":26,"name":"Name26","username":"Username26","password":"password26","age":46,"sex":true},{"id":27,"name":"Name27","username":"Username27","password":"password27","age":47,"sex":true},{"id":28,"name":"Name28","username":"Username28","password":"password28","age":48,"sex":true},{"id":29,"name":"Name29","username":"Username29","password":"password29","age":49,"sex":true},{"id":30,"name":"Name30","username":"Username30","password":"password30","age":50,"sex":true}]}]} 
```

I used $.getJSON of jquery to get this response on button click event. I checked the status which is "**success**" every time so this is working well.Problem occurs when i try to access first records i.e. person's information like id,username etc.

I write statements in Javascript as

```
<script>
        $(document).ready(function() {
            $("input").click(function(){
                $.getJSON("http://mylocalhost:8080/Paging/paging/records?page=3",function(data,status){

                    alert(status);
                    alert(data.records[0].beans.Person[0].id);
                });
            });
        });

    </script> 
```

First alert works but second doesn't.

Then javascript stops working as it does whenever encounters an error.What i can guess is that in records array Person object is followed by package name.This could be the reason because browser may look for beans object in records array which is not there because beans.Person is a single, atomic name in this case as shown in above. But not sure?

If this is actually problem then how can i stop/control XStream to name an object's name as just **classname**(person) instead of **package.classname**(beans.person) as it is being named by default.

or If everything is OK in produced JSON object then why can't i see the expected result? Why simple second alert statement is not working.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T07:36:44.587

我得到了我要使用的答案

```
 alert(data.records[0]["beans.Person"][0].id); 
```

代替

```
 alert(data.records[0].beans.Person[0].id); 
```

一个有用的链接

[http://www.javascripttoolbox.com/bestpractices/#squarebracket](http://www.javascripttoolbox.com/bestpractices/#squarebracket)

# sugarcrm - SugarCRM 按当前用户帐户中的自定义字段过滤搜索结果

> ID：16111777
> 
> 赞同：1
> 
> 时间：2013-04-19T19:03:45.507
> 
> 标签：sugarcrm

我在“User”和“CustomModule”中都有自定义字段“country_id_c”，我需要限制用户只能看到他所在地区的行（按 country_id_c 过滤）。有两种搜索形式：

1.  当您从菜单中看到 CustomModule 的搜索结果时

2.  当您使用选择器（弹出窗口）将 CustomModule 添加为与其他模块的关系时。

我发现如何使用硬编码值过滤 1 种情况下的结果：

文件：custom/modules/CustomModule/metadata/SearchFields.php

```
$searchFields['CustomModule'] = array (
...
'country_id_c' =>
array (
  'query_type' => 'format',
  'operator' => '=',
  'value' => 'Argentina',
  'db_field'=>array('country_id_c',)
),
... 
```

我在这里缺少的是如何获取当前登录用户的 country_id_c。以及如何对 (2) 搜索表单执行相同操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T05:25:28.427

您可以通过添加以下内容来访问该值：

```
globals $current_user;
$current_user->country_id_c 
```

# c++ - 更改 Teamcity 的配置属性

> ID：16111784
> 
> 赞同：0
> 
> 时间：2013-04-19T19:04:03.947
> 
> 标签：c++, teamcity

我对 teamcity 7.1 相当陌生，但是我安装了 teamcity，然后发现由于 ldap.h 文件，我需要安装从 6.0A 到 7.1 的新版本的 Windows SDK。当我为我们的 C++ 应用程序运行 msbuild 时，我得到了 ldap not found 错误。

我相信这与需要更新的 SDK 有关。无论如何，我注意到 WindowsSDKv6.0A v6.0A WindowsSDKv6.0A_Path C:\Program Files\Microsoft SDKs\Windows\v6.0A 的代理属性

我应该只添加 7.1 吗？或者有没有办法一起替换这个配置属性？

buildAgent.properties 文件没有列出任何存在的配置属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T07:43:32.477

Teamcity 代理会自动检测现有的配置属性。

根据 Teamcity 的文档[PredefinedBuildParameters-AgentProperties](http://confluence.jetbrains.com/display/TCD7/Predefined+Build+Parameters#PredefinedBuildParameters-AgentProperties)：

> TeamCity 自动检测许多应用程序，包括 .NET Framework、Visual Studio 的存在，并添加相应的系统属性和环境变量

在同一页面的表格中，它显示：

> **WindowsSDK**如果安装了相应版本的 Windows SDK，则定义该属性。（支持的版本有 6.0、6.0A、7.0、7.0A、7.1）

所以尝试重新启动 Teamcity 代理，看看它是否可以自动拾取新安装的 SDK。

如果不能，请尝试在**buildAgent.properties**文件中添加 7.1 属性，然后重新启动构建代理。

并告诉 msbuild 使用正确的 SDK：

> *   转到“**开始**”菜单并搜索“ **Windows SDK 7.1 命令提示符**”
> *   在提示符下，键入“ **cd setup** ”
> *   在提示符中，键入“ **WindowsSdkVer.exe -version:v7.1** ”

# android - ProgressDialog 中的扩展 AsyncTask

> ID：16111785
> 
> 赞同：0
> 
> 时间：2013-04-19T19:04:05.353
> 
> 标签：android, progressdialog

我需要在扩展 AsyncTask 中显示 ProgressDialog ...但是...

```
public class TareaAsincrona extends AsyncTask<Void, Void, Void> { 
    protected void onPreExecute() 
    { 
        pdialog = new ProgressDialog(Principal.this); 
        pdialog.setMessage("Wolas"); 
        pdialog.setIndeterminate(true); 
        pdialog.setCancelable(false); 
        pdialog.show(); 
        } 
    protected void onPostExecute() 
    { pdialog.dismiss(); } 

    protected Void doInBackground(Void... params) { .... .... } //// //// } 
} 
```

日志猫

```
04-19 14:59:40.844: E/dalvikvm(21264): Unable to open stack trace file '/data/anr/traces.txt': Permission denied
04-19 14:59:41.434: E/WindowManager(21264): Activity dsm.transporte_ordtra.Principal has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@4165d0a0 that was originally added here
04-19 14:59:41.434: E/WindowManager(21264): android.view.WindowLeaked: Activity dsm.transporte_ordtra.Principal has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@4165d0a0 that was originally added here
04-19 14:59:41.434: E/WindowManager(21264):     at android.view.ViewRootImpl.<init>(ViewRootImpl.java:344)
04-19 14:59:41.434: E/WindowManager(21264):     at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:267)
04-19 14:59:41.434: E/WindowManager(21264):     at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:215)
04-19 14:59:41.434: E/WindowManager(21264):     at android.view.WindowManagerImpl$CompatModeWrapper.addView(WindowManagerImpl.java:140)
04-19 14:59:41.434: E/WindowManager(21264):     at android.view.Window$LocalWindowManager.addView(Window.java:537)
04-19 14:59:41.434: E/WindowManager(21264):     at android.app.Dialog.show(Dialog.java:278)
04-19 14:59:41.434: E/WindowManager(21264):     at dsm.transporte_ordtra.Principal$TareaAsincrona.onPreExecute(Principal.java:211)
04-19 14:59:41.434: E/WindowManager(21264):     at android.os.AsyncTask.executeOnExecutor(AsyncTask.java:561)
04-19 14:59:41.434: E/WindowManager(21264):     at android.os.AsyncTask.execute(AsyncTask.java:511)
04-19 14:59:41.434: E/WindowManager(21264):     at dsm.transporte_ordtra.Principal$3.onClick(Principal.java:145)
04-19 14:59:41.434: E/WindowManager(21264):     at android.view.View.performClick(View.java:3511)
04-19 14:59:41.434: E/WindowManager(21264):     at android.view.View$PerformClick.run(View.java:14105)
04-19 14:59:41.434: E/WindowManager(21264):     at android.os.Handler.handleCallback(Handler.java:605)
04-19 14:59:41.434: E/WindowManager(21264):     at android.os.Handler.dispatchMessage(Handler.java:92)
04-19 14:59:41.434: E/WindowManager(21264):     at android.os.Looper.loop(Looper.java:137)
04-19 14:59:41.434: E/WindowManager(21264):     at android.app.ActivityThread.main(ActivityThread.java:4424)
04-19 14:59:41.434: E/WindowManager(21264):     at java.lang.reflect.Method.invokeNative(Native Method)
04-19 14:59:41.434: E/WindowManager(21264):     at java.lang.reflect.Method.invoke(Method.java:511)
04-19 14:59:41.434: E/WindowManager(21264):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
04-19 14:59:41.434: E/WindowManager(21264):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
04-19 14:59:41.434: E/WindowManager(21264):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T19:10:58.020

您正在这里预执行访问您的活动

```
pdialog = new ProgressDialog(Principal.this); 
```

例如，您可以在您的类中声明 pdialog 并在已经初始化的内部使用它。

```
class TareaAsincrona{
    ProgressDialog instancedProgressDialog;

    public TareaAsincrona (ProgressDialog  instancedProgressDialog){
       myProgressDialog = instancedProgressDialog;
    }
    //Your code continues here....

} 
```

.

# pyephem - 使用 PyEphem 中的观察点为 Equinox/Solstice 设置太阳升起/设置方位角

> ID：16111789
> 
> 赞同：3
> 
> 时间：2013-04-19T19:04:22.253
> 
> 标签：pyephem

基本上我想做的是：

*   取一个观察点（使用纬度/经度）
*   在给定开始日期的情况下计算下一个春分和至日的日期
*   找到每个日落方位角
*   找到每个日出方位角

*请注意，我在 ArcGIS 中工作，所以我的一些值是从外部表格中提取的

这是我所拥有的：

```
sun = ephem.Sun()
final = ephem.Observer()
final.lon = row[1]
final.lat = row[2]
final.elevation = row[3]

equinoxDate = ephem.next_equinox('0001/01/01')
equinoxSetDate = final.next_setting(ephem.Sun(), start=equinoxDate, use_center=True)
final.date = equinoxSetDate
sun.compute(final)

print sun.az 
```

我一直在挂断“下一个设置”部分。我得到 NeverUpError... 如果我将其切换到 previous_setting、next_rising、previous_rising... 没关系。我总是收到 NeverUpError 或 AlwaysUpError。

如果有人可以帮我找到春分日落的方位角（在任何日期），那么我可以确定其余的。

如果有不清楚的地方，请告诉我。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-08T20:35:26.583

我想到了。我收到错误是因为：final.lon、final.lat 被 pyephem 视为字符串。所以我通过说 final.lon = str(row[1]) 来切换它并从那里开始。现在效果很好！布兰登，你的价值观是正确的。

```
sun = ephem.Sun()
final = ephem.Observer()
final.lon = str(row[1])
final.lat = str(row[2])
final.elevation = row[3]

equinoxDate = ephem.next_equinox('0001/01/01')
equinoxSetDate = final.next_setting(ephem.Sun(), start=equinoxDate, use_center=True)
final.date = equinoxSetDate
sun.compute(final)

print sun.az 
```

# .net - 在创建窗口句柄之前，不能对控件调用 Invoke 或 BeginInvoke

> ID：16111792
> 
> 赞同：-1
> 
> 时间：2013-04-19T19:04:28.260
> 
> 标签：.net, vb.net, multithreading, winforms, invoke

我正在执行以下代码：

```
grid.Invoke(New MethodInvoker(AddressOf RefreshDataSource)) 
```

得到`InvalidOperationException`异常。

消息：在创建窗口句柄之前，无法在控件上调用 Invoke 或 BeginInvoke。

堆栈跟踪：

```
 at System.Windows.Forms.Control.MarshaledInvoke(Control caller, Delegate method, Object[] args, Boolean synchronous)
   at System.Windows.Forms.Control.Invoke(Delegate method, Object[] args)
   at System.Windows.Forms.Control.Invoke(Delegate method)
   at DataForm.BindData() in D:\Proj\DataForm.vb:line 380
   at System.Runtime.Remoting.Messaging.StackBuilderSink._PrivateProcessMessage(IntPtr md, Object[] args, Object server, Int32 methodPtr, Boolean fExecuteInContext, Object[]& outArgs)
   at System.Runtime.Remoting.Messaging.StackBuilderSink.PrivateProcessMessage(RuntimeMethodHandle md, Object[] args, Object server, Int32 methodPtr, Boolean fExecuteInContext, Object[]& outArgs)
   at System.Runtime.Remoting.Messaging.StackBuilderSink.AsyncProcessMessage(IMessage msg, IMessageSink replySink) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T10:13:56.633

将调用从 load 事件更改为 form.shown 事件，以确保首先创建了控件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-30T20:49:21.170

```
if (!this.IsHandleCreated)
    this.CreateControl();

this.Invoke((MethodInvoker)delegate
    {
       //do so      
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-18T15:47:49.013

在调用调用方法之前添加它 `while (!this.IsHandleCreated) System.Threading.Thread.Sleep(100)`

# build - 当 python 未安装在 /usr 中时，为 python3 构建 numpy

> ID：16111795
> 
> 赞同：0
> 
> 时间：2013-04-19T19:04:36.260
> 
> 标签：build, numpy, python-3.x, installation, file-not-found

Fedora 18，x86_64。可以，然后呢：

我已经安装了 python3，`~/utils/src/python3/Python-3.3.0/` 这样它就可以在 NFS 上使用，而且我不必在实验室的每台机器上重新安装它。

我想安装numpy。我得到了来源，它在`~/utils/src/python3/numpy-1.7.0/` 当我运行时`python3 ./setup.py`，我得到：

```
file "~/utils/src/python3/Python-3.3.0/Lib/distutils/text_file.py", line 115, in open
self.file=io.open(self.filename, 'r', errors=self.errors)
FileNotFoundError: [Errno 2] No such file or directory: 
'/usr/local/lib/python3.3/config-3.3m/Makefile' 
```

上堆栈，我到达 sysconfig.py，第 435 行，它似乎通过调用 get_makefile_filename 生成路径名，它位于 sysconfig.py，第 251 行。它访问全局变量（python_build、_sys_home 和其他一堆） ，我不确定它们是如何配置的。

我尝试传递`--prefix=~/utils/src/python3/Python-3.3.0`给 setup.py，但无处可去。（而且我不确定到底是`--prefix`做什么的）

有没有人幸运地安装了非标准 python3 安装包？

谢谢，

查尔斯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T19:39:46.117

好的，事情是这样的： distutils.sysconfig 使用`sys.executable`，这是 python 可执行文件的位置。如果此文件在 python 构建目录中，那么它将尝试将所有内容放在 /lib 中。这发生在我身上，因为我有一个从 ~/utils/bin/python3 到 ~/utils/src/python3/Python-3.3.0/python 的符号链接。sys.executable 返回 ~/utils/bin/python3，它不在 python 的构建目录中。

调用命令`~/utils/src/python3/Python-3.3.0/python setup.py`使其工作。

I picked an arbitrary prefix (actually /dev/shm) and then copied everything that belonged in site-packages to ~/utils/src/python3/Python-3.3.0/Lib/site-packages/numpy, and it seems to work for now.

# html5-canvas - 将图像数据缩放到更大的尺寸

> ID：16111796
> 
> 赞同：0
> 
> 时间：2013-04-19T19:04:36.540
> 
> 标签：html5-canvas

首先我有一个画布区域，

我从它的图像数据中裁剪了一些部分，然后我想显示裁剪的部分拉伸到完整的画布比例。

喜欢。

我有一块面积为 400,400 的画布，

然后我将图像数据从（20,100）裁剪到（200,300），这意味着 180（宽度）和 200（高度）

然后我希望将裁剪的部分显示在拉伸到全宽和全高的同一画布上。

是否可以通过 javascript 部分实现，或者我们是否需要为此创建自己的函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T20:17:26.543

您可以使用 toDataURL 将当前画布捕获为 URL

```
var dataURL=canvas.toDataURL(); 
```

然后您可以使用 drawImage 裁剪和缩放图像并将其粘贴回画布

```
context.drawImage(theImage,CropatX,CropatY,WidthToCrop,HeightToCrop,
        pasteatX,pastatY,scaledWidth,scaledHeight) 
```

这是代码和小提琴：http: [//jsfiddle.net/m1erickson/Ap3Hd/](http://jsfiddle.net/m1erickson/Ap3Hd/)

```
<!doctype html>
<html>
<head>
<link rel="stylesheet" type="text/css" media="all" href="css/reset.css" /> <!-- reset css -->
<script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>

<style>
    body{ background-color: ivory; padding:20px; }
    canvas{border:1px solid black;}
</style>

<script>
$(function(){

    var canvas=document.getElementById("canvas");
    var ctx=canvas.getContext("2d");

    ctx.beginPath();
    ctx.fillStyle="green";
    ctx.strokeStyle="blue";
    ctx.lineWidth=10;
    ctx.arc(125,100,65,0,2*Math.PI,false);
    ctx.fill();
    ctx.stroke();
    ctx.beginPath();
    ctx.fillStyle="purple";
    ctx.strokeStyle="yellow";
    ctx.rect(100,0,50,300);
    ctx.fill();
    ctx.stroke();
    ctx.beginPath();
    ctx.strokeStyle="red";
    ctx.lineWidth=3;
    ctx.rect(20,100,180,200);
    ctx.stroke();

    // 
    $("#crop").click(function(){
        // save the current canvas as an imageURL
        var dataURL=canvas.toDataURL();
        // clear the canvas
        ctx.clearRect(0,0,canvas.width,canvas.height);
        // create a new image object using the canvas dataURL
        var img=new Image();
        img.onload=function(){
            // fill the canvas with the cropped and scaled image
            // drawImage takes these parameters
            // img is the image to draw on the canvas
            // 20,100 are the XY of where to start cropping
            // 180,200 are the width,height to be cropped
            // 0,0 are the canvas coordinates where the
            //        cropped image will start to draw
            // canvas.width,canvas.height are the scaled
            //        width/height to be drawn
            ctx.drawImage(img,20,100,180,200,0,0,canvas.width,canvas.height);
        }
        img.src=dataURL;
    });

}); // end $(function(){});
</script>

</head>

<body>
    <p>Red rectangle indicates cropping area</p>
    <canvas id="canvas" width=300 height=300></canvas><br/>
    <button id="crop">Crop the red area and scale it to fill the canvas</button>
</body>
</html> 
```

# wpf - 是否可以在真实世界的、独立于设备的单元中显示 WPF 控件？例如，毫米？

> ID：16111800
> 
> 赞同：1
> 
> 时间：2013-04-19T19:04:50.467
> 
> 标签：wpf, layout, screen-resolution

我正在 WPF 中设计一个产品模拟器。我们公司销售一种手持式电子医疗设备，我们想尝试使用“虚拟”、蒙皮（某种）GUI 来表示按钮和 LED 的用户交互。

有没有办法“强制”WPF 在屏幕上显示具有真实世界尺寸的东西（通过获取监视器 dpi 信息或类似的东西）？

再举一个例子，假设我可以使用 WPF 控件（DockPanels、Labels、Canvases 等）来布置一张塑料的、标准尺寸的信用卡，我能否在不同的台式机/笔记本电脑上以真实信用卡的尺寸一致地显示它？

更新：

`ViewBox`通过使用 a作为窗口的 LayoutRoot，我找到了一种巧妙的方法来设计“真正的毫米”。内部任何东西的大小都可以“以毫米为单位设计”，并且将以物理大小显示，前提是我可以获得 ViewBox 的正确像素大小。这仍然是一个谜：

*   我桌面上的像素和毫米之间的关系似乎是 3.5（这个数字是从哪里来的？
*   如何实现代码隐藏的 DataBound 属性或 ValueConverter，以便我可以定义缩放级别（通过滑块或硬编码）以在需要时显示设备的缩放（更大）版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T20:56:07.240

我“有点”用以下策略解决了这个问题：

*   我的 MainWindow 有一个 ViweBox 作为 LayoutRoot，它的 Child 是一些代表物理对象的容器控件（在本例中为边框）；
*   ViewBox 和其中的所有内容都被定义为 WPF 单位是毫米。因此，如果产品的物理宽度为 68mm，则容器控件的 Width 属性为 78。嵌套在其中的所有其他内容都被视为 WPF 单位是实际的毫米；
*   ViewBox 的 Width 和 Height 使用乘以 (96/25.4) 的 ValueConverter 绑定到容器控件的 Height 和 Width；
*   由于视图框内的所有内容都被缩放以适应（ViewBox.Stretch=Uniform），因此值转换器只是调整了视图框的大小，其余的布局调整由 ViewBox 嵌入式渲染转换实现（我认为它足够高效）。

我的 XAML：

```
<Window.Resources>
    <local:PixelsToMilimeters x:Key="SizeConverter"/>       
</Window.Resources>

<Viewbox x:Name="LayoutRoot" Stretch="Uniform"
    Width="{Binding Width, ElementName=Case, Converter={StaticResource SizeConverter}}"
    Height="{Binding Height, ElementName=Case, Converter={StaticResource SizeConverter}}">
    <Border x:Name="Case" Width="108" Height="68">
    (...) 
```

我的代码隐藏：

```
 (...)
    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        return (double)value * (96/25.4);
    }
    (...) 
```

当然是“我怎么能确定 DPI 实际上是 96？” 没有解决，但可以封装，最终结果与预期的结果足够接近，就我的目的而言。

# javafx-2 - 如何对 TextFieldTableCell 进行每次击键验证？

> ID：16111803
> 
> 赞同：1
> 
> 时间：2013-04-19T19:05:16.600
> 
> 标签：javafx-2, javafx, tableview

我正在尝试在 JavaFX 中进行每次击键验证，`TextFieldTableCell`但我不知道如何从嵌入式控件中**捕获文本更改事件。**`TextField`

如果有问题的对象只是 a `TextField`，那么`textField.textProperty().addListener(myChangeListener)`就可以了。 `TextFieldTableCell`也暴露`textProperty()`了，但是这个属性在`TextFieldTableCell`. 它不会在每次击键的基础上生成更改事件。相反，当第一次显示时我会看到很多事件`TableView`，并且每次我开始在单元格中编辑时都会看到一个事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T20:07:59.150

首先，关于 textProperty()。

看这里看看：

[http://docs.oracle.com/javafx/2/api/index.html](http://docs.oracle.com/javafx/2/api/index.html)

TextProperty() 是标记父类的属性，你不会从中学到任何东西，因为它没有被使用。这是一件棘手的事情：单元格 - 标记控件的继承者。您看到的TextField，当开始编辑时，它是单元格的图形节点（graphicProperty（））（据我记得文档）。

而且，该图形节点仅在编辑开始时由文本字段分配。

AFAIK，无法直接访问可编辑节点。

解决问题的方法 - 自己实现可编辑单元格。

让我与开发人员交谈，以了解更多...

假设你有一个包含String的DataItem类，并且假设TableView封装了数据类型DataItem，并且唯一的列具有相同的封装数据类型，你可以使用这个实现作为基础：

```
 public class TextFieldTableCell extends TableCell<DataItem, DataItem> {

        private TextField textField;

        public TextFieldTableCell() {
        }

        @Override
        public void startEdit() {
            super.startEdit();
            if (isEmpty()) {
                return;
            }

            if (textField == null) {
                createTextBox();
            } else {
                textField.setText(new CellCustomStringConverter().toString(getItem()));
            }

            setGraphic(textField);
            setContentDisplay(ContentDisplay.GRAPHIC_ONLY);

            textField.requestFocus();
            textField.selectAll();
        }

        @Override
        public void cancelEdit() {
            super.cancelEdit();
            setContentDisplay(ContentDisplay.TEXT_ONLY);
        }

        @Override
        public void updateItem(DataItem item, boolean empty) {
            super.updateItem(item, empty);
            if (!isEmpty()) {
                if (textField != null) {
                    textField.setText(new CellCustomStringConverter().toString(item));
                }
                setText(item.toString());
            }
        }

        private void createTextBox() {
            textField = new TextField(new CellCustomStringConverter().toString(getItem()));
            textField.setId(TABLE_EDIT_ID);
            textField.setOnKeyReleased(new EventHandler<KeyEvent>() {
                @Override
                public void handle(KeyEvent t) {
                    if (t.getCode() == KeyCode.ENTER) {
                        commitEdit(new DataItem(textField.getText()));
                    } else if (t.getCode() == KeyCode.ESCAPE) {
                        cancelEdit();
                    }
                }
            });
        }
    } 
```

# css - 带有指南针的径向渐变在Firefox中指定大小

> ID：16111812
> 
> 赞同：0
> 
> 时间：2013-04-19T19:05:41.157
> 
> 标签：css, firefox, sass, compass-sass

我正在尝试使用指南针和径向渐变来制作背景发光效果，当我输入渐变的大小时，它在 chrome 中可以正常工作，但在 Firefox 中没有渲染任何内容。

我为在 chrome 中工作的示例制作了一个 codepen

[http://codepen.io/anon/pen/LmkEu](http://codepen.io/anon/pen/LmkEu)

我正在使用的 sass 是

```
@include background-image(
    radial-gradient(top center, 700px 300px, lighten(red, 20) 40%, red 80%)
    ); 
```

有没有办法让它在 Firefox 中工作？如果我将 700px 300px 替换为圆形，但它不是我想要的形状。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T21:29:46.387

我参考了这篇[文章](http://www.colorzilla.com/gradient-editor/)，这里是[codepen的链接](http://codepen.io/anon/pen/ArEuI)

```
 @include background(radial-gradient(circle 700px 300px at top center , lighten(red, 20) 40%, red 80%) repeat scroll 0 0 transparent); 
```

# javascript - 在 Javascript 中遍历 JSON 响应

> ID：16111815
> 
> 赞同：0
> 
> 时间：2013-04-19T19:05:47.983
> 
> 标签：javascript, json, parsing, loops, responsetext

这是我试图遍历的响应字符串：

```
{
"page": 1,
"results": [
    {
        "adult": false,
        "backdrop_path": "/8uO0gUM8aNqYLs1OsTBQiXu0fEv.jpg",
        "id": 550,
        "original_title": "Fight Club",
        "release_date": "1999-10-15",
        "poster_path": "/2lECpi35Hnbpa4y46JX0aY3AWTy.jpg",
        "popularity": 61151.745000000003,
        "title": "Fight Club",
        "vote_average": 9.0999999999999996,
        "vote_count": 174
    },
    {
        "adult": false,
        "backdrop_path": "/5Z0FScA1bB6EbdGmZCUBeUk32eV.jpg",
        "id": 14476,
        "original_title": "Clubbed",
        "release_date": "2008-10-02",
        "poster_path": "/bl6PEQtmohEP1zP9srNZY6bXyHg.jpg",
        "popularity": 1.7290000000000001,
        "title": "Clubbed",
        "vote_average": 7.7999999999999998,
        "vote_count": 3
    },
    {
        "adult": false,
        "backdrop_path": "/qw2Qb42xtyE1B449JoTgb1mVCe1.jpg",
        "id": 51021,
        "original_title": "Lure: Teen Fight Club",
        "release_date": "2010-11-16",
        "poster_path": "/aRTX5Y52yGbVL6TGnyI4E8jjtz4.jpg",
        "popularity": 0.26600000000000001,
        "title": "Lure: Teen Fight Club",
        "vote_average": 0.0,
        "vote_count": 0
    },
    {
        "adult": false,
        "backdrop_path": "/tcoAGvTo96R7Y9ZGVCCz7BZvrvb.jpg",
        "id": 104782,
        "original_title": "Florence Fight Club",
        "release_date": "2010-01-01",
        "poster_path": "/eQqqu0srTYcclWqylvgpLyU87hV.jpg",
        "popularity": 0.085000000000000006,
        "title": "Florence Fight Club",
        "vote_average": 0.0,
        "vote_count": 0
    },
    {
        "adult": false,
        "backdrop_path": null,
        "id": 115584,
        "original_title": "Fight Club – The “I am Jack’s Laryngitis” Edit",
        "release_date": null,
        "poster_path": null,
        "popularity": 0.059999999999999998,
        "title": "Fight Club – The “I am Jack’s Laryngitis” Edit",
        "vote_average": 0.0,
        "vote_count": 0
    }
],
"total_pages": 1,
"total_results": 5
} 
```

我想遍历结果并提取一些属性，例如 original_title、release_date 等。我尝试使用以下代码（以及其他代码）尝试打印一行但无济于事：

```
var data = JSON.parse(this.responseText);
alert(data.page[0].results[0].original_title); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T19:07:15.867

该`page`属性不是您要检索的预期结果集的一部分。试试这个：

```
alert(data.results[0].original_title); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T19:06:59.783

删除`.page[0]`：

```
alert(data.results[0].original_title); 
```

# c++ - 对使用 C++ 的快速 GUI 开发工具的建议？

> ID：16111817
> 
> 赞同：0
> 
> 时间：2013-04-19T19:05:54.407
> 
> 标签：c++, ide, c++builder

我正在寻找一个 RAD C++ 开发工具，它可以让我非常快速地组合一个不太复杂的 GUI 项目（用于视频处理和显示）。我会在 GUI 中使用 Active Control，并调用一些 C++ 库。我正在研究这些选项：

1.  视觉 C++。它实际上不是 RAD 工具，而且从我过去的经验来看，MFC 确实已经过时并且使用起来很痛苦。我真的不想再碰它了。
2.  QT 创造者。它现代、优雅，但仍不是 RAD 环境。我想在两周内完成我的应用程序。我不认为我可以用 QT 生态系统做到这一点。
3.  C++ 生成器。这看起来是理想的选择。死容易开发。大量 VCL 控件可轻松扩展 GUI 功能。但是这些天来它似乎变得默默无闻（出于我尚未理解的原因）。

您认为 C++ 快速 GUI 开发工具的最佳选择是什么？

（请尽快回答，因为这个问题可能很快就会被“Off Topic”杀死）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T19:34:46.647

您可以使用 Windows 窗体，通过大量帮助和示例代码非常容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T19:09:34.560

Glade 是一个 RAD 工具，可以快速轻松地开发 GTK+ 工具包和 GNOME 桌面环境的用户界面。

# java - 如何将我的 IP 地址输出为字符串？

> ID：16111819
> 
> 赞同：0
> 
> 时间：2013-04-19T19:05:59.480
> 
> 标签：java, string, ip-address

我一直在使用 InetAddress.getLocalHost().getHostAddress()，如何将其作为字符串获取？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T19:07:55.800

要将 ip 作为字符串输出，来自 Justin Waugh 的[回答](https://stackoverflow.com/questions/5571744/java-convert-a-string-representing-an-ip-to-inetaddress/5571816#5571816)：

> 只需调用`InetAddress.getByName(String host)`传入您的文本 IP 地址即可。
> 
> 来自 javadoc：主机名可以是机器名，例如“java.sun.com”，也可以是其 IP 地址的文本表示。
> 
> [网络地址 javadoc](http://download.oracle.com/javase/1.5.0/docs/api/java/net/InetAddress.html#getByName%28java.lang.String%29)

或者`InetAddress.getHostAddress()`按照 Nambari 的建议使用。

# android - Facebook 样式滑块

> ID：16111822
> 
> 赞同：3
> 
> 时间：2013-04-19T19:06:06.300
> 
> 标签：android, android-layout, android-viewpager

新的 facebook 应用程序在帖子中有一个图像滑块，其中包含多个图像。它看起来像这样：

![在此处输入图像描述](https://i.stack.imgur.com/QpPaHl.png)

需要注意的一件事是，相邻的图像会略微显示当前图像的焦点。

我知道我可以使用 viewpager 实现一个滑块。但是，在 viewpager 中，当前片段占据了整个视图。只有相邻视图的标题可见，内容本身不可见。

任何人都可以给我一个方向来实现这一点。或者有没有为此的开源库？

谢谢

# node.js - Mongoose 双向模型/多对多关系

> ID：16111824
> 
> 赞同：2
> 
> 时间：2013-04-19T19:06:12.137
> 
> 标签：node.js, mongodb, express, mongoose, database

对猫鼬来说相当新，所以我正在寻找最好的方法来做到这一点。我有两个模型：`Users`和`Companies`. 一个用户可以有很多公司，一个公司可以有很多用户。

现在我的公司架构如下所示：

```
CompanySchema = new Schema
  name:
    type: String
    unique: true
  slug:
    type: String
  users: [
    type: Schema.Types.ObjectId
    ref: 'User'
  ] 
```

然后我可以`.populate('users')`用来获取关联用户的列表。那里没问题。

我想知道的是，让所有人`companies`与 a 相关联的最有效/最好的方法是`user`什么？我不想做与上面相同的事情，因为列表可能会不同步。当我更新公司的用户时，有没有办法让用户的公司也更新？

理想情况下，我可以做`User.find().populate('companies')`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-19T19:40:20.643

我还没有找到一种方法来填充两种方式。

通常我们最终会做这样的事情

```
/**
 * Load the categories for this account
 * @method categories
 * @memberof Account
 * @instance
 * @param {Function} done 
 */
AccountSchema.methods.categories = function (done) {
  var Category = this.model('Category');

  return Category.find({account: this}, done);
}; 
```

# jquery - 使用 jQuery 将 z-index 降序应用于 li

> ID：16111828
> 
> 赞同：4
> 
> 时间：2013-04-19T19:06:31.507
> 
> 标签：jquery, z-index

我需要计算 li，然后以相反的顺序添加 z-index，如下所示：

```
<li style="z-index:3;"></li>
<li style="z-index:2;"></li>
<li style="z-index:1;"></li> 
```

我不希望任何 z 索引上的 0 或负数，并且它需要以相反的顺序排列。我想使用 jQuery，因为我不知道这个列表中有多少 li。

这是我到目前为止所拥有的：

```
 var numIndex = $("ul.progress li").length + 1;
    $("ul.progress li").each(
      function(numIndex) {
        $(this).css("z-index", numIndex*-1);
    }); 
```

如果您知道我缺少什么，请告知。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T19:17:44.127

您知道可以[将回调参数传递给`.css()`](http://api.jquery.com/css/#css-propertyName-functionindex--value)吗？

```
var c = $('#list li').length;
$('#list li').css('z-index', function(i) {
    return c - i;
}); 
```

[http://jsfiddle.net/mblase75/XuSX8/](http://jsfiddle.net/mblase75/XuSX8/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T19:11:21.813

尝试这样的事情：

```
$(function(){
    var numIndex = $("ul.progress li").length;

    $("ul.progress li").each(function(i){
        $(this).css("z-index", numIndex-i);
    });
}); 
```

演示：http: [//jsfiddle.net/dirtyd77/F39WC/](http://jsfiddle.net/dirtyd77/F39WC/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T19:15:03.880

您必须取出`.each()`函数参数：

```
var numIndex = $("ul.progress li").length;
$("ul.progress li").each(function () {
   $(this).css("z-index", numIndex--);
}); 
```

# javascript - 如何使用 KnockoutJS 在 foreach 循环中指定不同的点击绑定

> ID：16111832
> 
> 赞同：1
> 
> 时间：2013-04-19T19:06:51.003
> 
> 标签：javascript, knockout.js

我有一个形式的淘汰赛可观察数组：

```
this.controls = ko.observableArray([
        { 
            name: 'Previous',
            action: '$root.previous'
        },
        { 
            name: 'Next'          ,     
            action: '$root.next'
        },
        { 
            name: 'Save',
            action: '$root.save'
        }
]); 
```

在我看来，我想做以下事情：

```
<div class="controls navigation">
    <ul data-bind="foreach: $root.controls">
        <li>
            <span data-bind="text: name, click: action"></span>
        </li>
    </ul>
</div> 
```

该视图创建了三个独立的跨度，它们本质上是按钮。我的目标是在每次用户单击特定跨度时调用视图模型中的相应操作。

但是，这不起作用。

我该如何遍历数组并为每个项目指定不同的单击绑定操作？

我可以轻松地写出每个跨度个体（在这种特定情况下，因为数组中只有 3 个项目），但我很好奇如何使用数组完成此操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T19:52:47.683

你很亲密。假设您已经像这样定义了上一个、下一个和保存

```
this.previous = function() { ... }; 
```

假设你这样定义 self

```
self = this; 
```

然后你所要做的就是像这样更新你的数组：

```
this.controls = ko.observableArray([
    { 
        name: 'Previous',
        action: self.previous
    },
    { 
        name: 'Next',     
        action: self.next
    },
    { 
        name: 'Save',
        action: self.save
    }
]); 
```

请注意 action 不再是字符串，而是对函数的引用。

[http://jsfiddle.net/tlarson/Dwwft/](http://jsfiddle.net/tlarson/Dwwft/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T19:35:43.990

也许你可以像这样重构它

```
this.controls = ko.observableArray([
        { 
            name: 'Previous'
        },
        { 
            name: 'Next'     
        },
        { 
            name: 'Save'
        }
]);
this.myAction = function (value, event) {
    if(value == 'Previous')
    {
       // do stuff
    }
    else if(value == 'Next')
    {
       // do stuff
    }
    else if(value == 'Save')
    {
       // do stuff
    }
    return true;
} 
```

然后

```
<div class="controls navigation">
    <ul data-bind="foreach: $root.controls">
        <li>
            <span data-bind="text: name, click: myAction"></span>
        </li>
    </ul>
</div> 
```

# heroku - 使用 Unicorn 的 Heroku 零停机部署

> ID：16111844
> 
> 赞同：3
> 
> 时间：2013-04-19T19:07:26.910
> 
> 标签：heroku, unicorn

我想知道 Heroku 是否有可能实现零停机部署策略。我在当前的 Heroku 文档中发现，在推送应用程序时，重新加载应用程序大约需要 1 分钟，这使其无法使用。他们文档中的独角兽代码确实预加载了应用程序，所以我很困惑为什么会这样。有什么我可以做的吗？

[https://devcenter.heroku.com/articles/rails-unicorn](https://devcenter.heroku.com/articles/rails-unicorn)

我有用于弹性搜索的新遗物插件和盆景。

这是我的 unicorn.rb 初始化程序：

```
# config/unicorn.rb
worker_processes Integer(ENV["WEB_CONCURRENCY"] || 3)
timeout 15
preload_app true

before_fork do |server, worker|

 Signal.trap 'TERM' do
   puts 'Unicorn master intercepting TERM and sending myself QUIT instead'
   Process.kill 'QUIT', Process.pid
 end

 defined?(ActiveRecord::Base) and
   ActiveRecord::Base.connection.disconnect!
end 

after_fork do |server, worker|

 Signal.trap 'TERM' do
   puts 'Unicorn worker intercepting TERM and doing nothing. Wait for master to send QUIT'
 end

 defined?(ActiveRecord::Base) and
   ActiveRecord::Base.establish_connection
end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T21:36:55.830

**2014 年 11 月 14 日更新：**

预启动现在普遍可用（感谢@camJackson 的支持）。

变更日志条目：

*   [https://devcenter.heroku.com/changelog-items/544](https://devcenter.heroku.com/changelog-items/544)

新的（ish）开发中心文章：

*   [https://devcenter.heroku.com/changelog-items/544](https://devcenter.heroku.com/changelog-items/544)

* * *

*原始回复*

当前唯一的方法是使用预引导实验室功能：

*   [Heroku Labs：预启动](https://devcenter.heroku.com/articles/labs-preboot/)

预引导是一项**正在进行**的工作。

请注意，使用 Unicorn 在这里没有任何影响。该上下文中的预加载是主进程在派生工作者之前预加载 Rails 应用程序；这发生在新的测功机旋转并循环出去之后。

# c++ - 使用 for 循环和 rand 生成 100 个随机数并打印出最小的和最大的

> ID：16111845
> 
> 赞同：0
> 
> 时间：2013-04-19T19:07:32.487
> 
> 标签：c++, random

使用 for 循环和 rand 生成 100 个随机数并打印出最小的和最大的。如果我朝着正确的方向前进，任何指导。

```
int main()
{
    int x = rand();
    for( x = 0; x < 100; x++)
    {
        if( x < x )
        {
            cout << "Small numbers: " << endl;
            cout << x << endl;
        }
        if ( x > x )
        {
            cout << "Big numbers: " << endl;
            cout << x << endl;
        }
    }
    system("pause");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T19:09:56.437

```
if( x < x ) 
```

和

```
if (x > x) 
```

永远不会是真的。你的逻辑不对。

您可以执行以下操作：

```
int main()
{
    //set up seed
    srand(time(NULL));

    double min = 1000; //you can also use numeric limits
    double max = -1000;
    for (int i = 0; i < 100; ++i)
    {
       double r = rand(); //you can also generate rand in given range
       if (r > max)
       {
          max = r;
       }
       if (r < min)
       {
          min = r;
       }
    }
    cout << min  << " " << max <<endl;
    cin.get(); //don't use system pause
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T19:16:29.047

```
#include <iostream>
#include <cstdlib>

using namespace std;

int main()
{

   int smallest = INT_MAX;
   int largest = 0;

   for( int x = 0; x < 100; x++)
   {
      int randomNumber = rand() % 100 + 1; 
      cout << "Next number: " << randomNumber ;
      if( randomNumber > largest )
      {
        largest = randomNumber ;
      }

      if ( randomNumber  < smallest )
      {
        smallest = randomNumber ;
      }
    }

    cout << "Smallest number: " << smallest;
    cout << "Largest number:"<< largest;
    system("pause");

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T19:16:58.537

第一件事是，每次越过循环时都必须生成新的随机整数，所以你想要这样的东西：

```
#include <iostream>
#include <cstdlib>
#include <limits>

using namespace std;

int main()
{

int x = rand();
int min=RAND_MAX;
int max=0;

for( int i = 0; i < 100; i++)
{
    x = rand();

    if( x < min )
    {
        cout << "Small numbers: " << endl;
        cout << x << endl;
        min=x;
    }

    if ( x > max )
    {
        cout << "Big numbers: " << endl;
        cout << x << endl;
        max=x;
    }
}

system("pause");

 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T19:11:01.817

您的代码不会做任何事情，因为您正在比较同一个变量。

您需要设置一个列表或数组以进行排序，然后比较元素，相应地重新排列，然后遍历列表并按顺序显示。

C++ 标准库可以帮助这个过程：

[种类](http://www.cplusplus.com/reference/algorithm/sort/)

# android - 从 linux 终端使用 gdb for android

> ID：16111846
> 
> 赞同：2
> 
> 时间：2013-04-19T19:07:32.707
> 
> 标签：android, debugging, terminal

我有一个适用于 android 的 C++ 程序，我想通过逐行运行（单步执行）来调试，就像我可以从终端在 Linux 上使用 gdb 一样，并让它在每一步打印出所有当前变量及其值. 这可能吗？我将如何做到这一点？请注意，c++ 程序不是从任何 IDE 构建的，只是使用终端命令。我看到列出了很多东西，例如 ndk-gdb，但我不确定从哪里开始。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T19:17:44.203

请尝试本[手册](http://www.kandroid.org/online-pdk/guide/debugging_gdb.html)中列出的说明。它们似乎针对命令行使用。

更新：由于 kandroid.org 已删除有关使用 gdb 进行调试的信息，因此我挖出了[这篇](https://github.com/mapbox/mapbox-gl-native/wiki/Android-debugging-with-remote-GDB)文章。希望它会坚持更长时间。

# c# - 无法在 C# 中访问布尔变量

> ID：16111851
> 
> 赞同：1
> 
> 时间：2013-04-19T19:07:45.870
> 
> 标签：c#, visual-studio-2012, boolean

这段代码中说`if (bar = true)`找不到我在`if (foo == "True")`or中创建的变量“bar”的部分`if (foo == "False")`。

代码：

```
string foo = Console.ReadLine();

if (foo == "True") {
    bool bar = true;
}
if (foo == "False") {
    bool bar = false;
}

if (bar = true) {
    Console.WriteLine("This is true");
}
else {
    Console.WriteLine("This is false");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T19:09:50.860

您`bar`在每个`if`块内声明一个新的，因此它不是该范围之外的有效标识符。你需要在你的`if`块之外声明它，像这样

```
bool bar = false;
if (foo == "True")
{
    bar = true;
}
if (foo == "False")
{
    bar = false;
}

if (bar == true)
{
    Console.WriteLine("This is true");
}
else
{
    Console.WriteLine("This is false");
} 
```

或者就此而言，这也可以：

```
bool bar = (foo == "True");

if (bar == true)
{
    Console.WriteLine("This is true");
}
else
{
    Console.WriteLine("This is false");
} 
```

甚至：

```
Console.WriteLine("This is {0}", foo == "True"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T19:11:25.507

更好的解析方式：

```
string foo = Console.ReadLine();
bool bar;
if (!bool.TryParse(foo, out bar))
    // inform the user, maybe have them try again

Console.WriteLine("This is {0}", bar); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T19:09:59.843

你搞乱了变量的范围。

`bar``if`只存在于您的陈述范围内。

在第一个语句之外声明它`if`。

另外，这不是比较：`if (bar = true)`

这是：`if (bar == true)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-19T19:11:23.770

您在 2 个不同的 if 语句中创建 bar 。它们的范围仅限于那些 if。当执行离开 ifs 时，两个栏都不可见（因此它们不会相互冲突）。尝试更多类似的东西：

```
bool bar = false;
if (foo == "True")
{
    bar = true;
}
if (foo == "False")
{
    bar = false;
}

if (bar == true)
{
    Console.WriteLine("This is true");
}
else
{
    Console.WriteLine("This is false");
} 
```

或者为了更好的代码：

```
bool bar = foo == "True";
Console.WriteLine("This is " + bar); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-19T19:10:21.407

`bar`变量应声明超出`if`/`else`语句的范围

```
bool bar;
if (foo == "True")
{
    bar = true;
}
else
{
    bar = false;
} 
```

ps您也可以使用`bool.Parse`方法分配布尔值。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-19T19:10:30.480

在这些 if 的范围之外声明 bar。当声明它们的块关闭时，它们会被遗忘。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-19T19:11:28.007

两件事情：

首先，您`bar`在每个`if`-block 内部定义。它在相应的块之外是不可见的`if`。据说它们具有局部**[作用域](http://www.blackwasp.co.uk/CSharpVariableScopes.aspx)**。

其次，您必须使用`bar == true`而不是`bar = true`. `=`是赋值运算符，`==`是相等运算符。

以下将起作用：

```
string foo = Console.ReadLine();
bool bar;

if (foo == "True")
    bar = true;

if (foo == "False")
    bar = false;

if (bar == true)
    Console.WriteLine("This is true");
else
    Console.WriteLine("This is false"); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-19T19:18:45.783

Bar 是代码中的局部变量。您需要将其取出 if 语句块

# valgrind - Valgrind - 由于什么原因仍然可以访问块？

> ID：16111854
> 
> 赞同：0
> 
> 时间：2013-04-19T19:07:57.083
> 
> 标签：valgrind, memory-leaks

我试图弄清楚是什么导致 Valgrind 警告一些“仍然可以到达”的块。我查看了我的代码，找不到任何 free() 丢失。我尝试使用 --leak-check=yes --show-reachable=yes 选项运行，这是输出示例：

```
==2999== 616 bytes in 7 blocks are still reachable in loss record 8 of 9
==2999==    at 0xD9C3: calloc (vg_replace_malloc.c:597)
==2999==    by 0x3188FA: _xpc_calloc (in /usr/lib/system/libxpc.dylib)
==2999==    by 0x3191D4: _xpc_base_create (in /usr/lib/system/libxpc.dylib)
==2999==    by 0x31FBEA: xpc_string_create (in /usr/lib/system/libxpc.dylib)
==2999==    by 0x31EDFD: xpc_dictionary_set_string (in /usr/lib/system/libxpc.dylib)
==2999==    by 0x320E8C: _libxpc_initializer (in /usr/lib/system/libxpc.dylib)
==2999==    by 0x1BE7D: libSystem_initializer (in /usr/lib/libSystem.B.dylib)
==2999==    by 0x7FFF5FC0FDA5: ImageLoaderMachO::doModInitFunctions(ImageLoader::LinkContext const&) (in /usr/lib/dyld)
==2999==    by 0x7FFF5FC0FAF1: ImageLoaderMachO::doInitialization(ImageLoader::LinkContext const&) (in /usr/lib/dyld)
==2999==    by 0x7FFF5FC0D2E3: ImageLoader::recursiveInitialization(ImageLoader::LinkContext const&, unsigned int, ImageLoader::InitializerTimingList&) (in /usr/lib/dyld)
==2999==    by 0x7FFF5FC0D27C: ImageLoader::recursiveInitialization(ImageLoader::LinkContext const&, unsigned int, ImageLoader::InitializerTimingList&) (in /usr/lib/dyld)
==2999==    by 0x7FFF5FC0E0B6: ImageLoader::runInitializers(ImageLoader::LinkContext const&, ImageLoader::InitializerTimingList&) (in /usr/lib/dyld)

==2999== 4,096 bytes in 1 blocks are still reachable in loss record 9 of 9
==2999==    at 0xC713: malloc (vg_replace_malloc.c:274)
==2999==    by 0x17F3F7: __smakebuf (in /usr/lib/system/libsystem_c.dylib)
==2999==    by 0x175D19: __swsetup (in /usr/lib/system/libsystem_c.dylib)
==2999==    by 0x1766C3: __vfprintf (in /usr/lib/system/libsystem_c.dylib)
==2999==    by 0x17618D: vfprintf_l (in /usr/lib/system/libsystem_c.dylib)
==2999==    by 0x17F2CF: printf (in /usr/lib/system/libsystem_c.dylib)
==2999==    by 0x100003D21: printEstBasica (mod_dados.c:100)
==2999==    by 0x100001635: main (mod_main.c:179) 
```

我所理解的行要么是指“打印”功能（如 printEstBasica），在其上我只使用 printf 或 fprintf ......其他的我不知道它们是什么......我在其他帖子上读到人们说它可能指的是编译器使用的附加信息..但我不确定。有一件事让我想到：我在不同的数据集（由程序处理）上运行了 valgrind，具有不同的大小，并且仍然可以访问的字节数总是相同的。

提前致谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-21T20:04:48.873

> 我试图弄清楚是什么导致 Valgrind 警告一些“仍然可以到达”的块。

你*让*Valgrind 用`--show-reachable=yes`旗帜告诉你他们的情况。如果您不想看到它们，请不要使用该标志。

现在，您*真正的*问题可能是“什么是可到达的块，我应该关心什么？”。

答案是：不是。仍然可到达的块意味着程序*可以根据需要*释放它们（它仍然可以找到 == 到达它们），它只是*不在乎*这样做。

下面是一个会生成“仍然可达”的程序示例：

```
int DoSomething()
{
  // Heap-allocated so as not to exhaust stack.
  // Allocated only once.
  static char *const error_buf = malloc(10000);
  return DoSomethingWithErrorBuf(error_buf);
}

int main()
{
  return DoSomething();
} 
```

# list - 在 Haskell 中扫描

> ID：16111855
> 
> 赞同：0
> 
> 时间：2013-04-19T19:07:58.427
> 
> 标签：list, haskell

```
scanl (\exp y -> scanl (\x -> if (isLetter x) then update exp (Literal x) "" else 
                    if x=='+' then update exp Epsilon "+" else
                    if x=='*' then update exp Epsilon "*" else
                    update exp Epsilon "|") y) Epsilon q 
```

我有一个 [Char] 列表，我想将它们转换为我的数据类型，但我遇到了一些问题。我有类似 ["a+b","c*d"] 的东西，我希望保留在 "a+b" 上应用 scanl 时的结果，以便我可以将它用于第二个列表。有人能帮我吗 ？

我的数据类型是：

```
data Reg = Epsilon | Literal Char | Or Reg Reg |  Then Reg Reg |  Star Reg  deriving Eq 
```

和

```
update:: Reg -> Reg -> [Char] -> Reg 
update a b "" = (a `Then` b)
update a b "|"= (a `Or` b) 
update a b "*" = (Star a) 
update a b "+" = (plus a)
update a b "?" = (opt a) 
```

我正在尝试将这样的 ["a|","bc"] 转换为 (Then a (Or bc))

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-04T22:28:00.817

作为记录，`scanl`它不擅长传递状态，尤其是在这里，您根本不希望结果成为列表，而只是最终结果。更通用的方法是使用 a`fold`代替。

# selenium - Selenium 2 phpunit 移动 jquery ui 滑块

> ID：16111864
> 
> 赞同：2
> 
> 时间：2013-04-19T19:08:46.447
> 
> 标签：selenium, phpunit

如何使用 PHPunit selenium 2 移动 jQuery UI 滑块？我无法通过使用 dragandrop 功能来做到这一点。

# ruby-on-rails - 用于呈现部分或显示表单错误的 AJAX

> ID：16111865
> 
> 赞同：1
> 
> 时间：2013-04-19T19:08:51.200
> 
> 标签：ruby-on-rails, ajax, forms, devise, partial

我在使用 Rails 以 AJAX 方式解决表单处理时遇到了困难。我将尝试解释我所拥有的不同部分，以及我有疑问的地方：

这是我的**new.html.erb**的样子：

```
<%= simple_form_for(resource, :as => resource_name, :url => registration_path(resource_name), :remote => true) do |f| %>
  <%= f.input :email, :label => false, :placeholder => 'Enter Email' %>
  <%= f.submit "Step inside", :id => 'invitation_button' %>
<% end %>

<div id="request_invite">
</div> 
```

如您所见，我有一个`:remote => true`，所以提交是通过 AJAX 完成的。另外，我有一个空容器（#request_invite），其中将填充一个部分，以防提交成功。

这是我的**registrations_controller.rb （创建方法）**的样子：

```
def create
    build_resource

    if resource.save
      if resource.active_for_authentication?
        sign_in(resource_name, resource)
        respond_with resource, :location => after_sign_up_path_for(resource)
      else
        expire_session_data_after_sign_in!
        respond_with resource, :location => after_inactive_sign_up_path_for(resource)
      end
    else
      clean_up_passwords resource
      respond_with resource
    end
  end 
```

我的疑惑就在这里。我应该写什么才能让JS知道提交成功与否。如果成功，我想将调用的部分渲染`_thank_you.html.erb`到#request_invite 容器中。如果不成功，我想在表单中显示错误。

这是我处理 AJAX 响应的 Javascript 文件：

```
$('document').ready(function() {
  $("#new_user").on('ajax:success', function(data, status, xhr)
  {
    alert("test");
  })
}); 
```

现在 alert("test") 总是出现，因为我没有办法知道是否成功。

非常感谢，我希望我能很好地解释自己。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T10:57:42.280

如果您进行了手动 ajax 调用，并在提交表单时使用成功和失败回调（而不是使用 remote: true）。我累了，不确定我是否完全按照您要对控制器操作执行的操作。

```
 $('#form_name').submit (e) ->
    e.preventDefault()
    $.ajax
      type: "POST"
      url: "/whatever_the_path_is"
      data: { 'email': $(@).val() }
      success: (result) ->
        $('#request_invite').html(result)
      failure: ->
        $('#request_invite').html("<h1>Request Failed</h1>") 
```

您的控制器可能如下所示：

```
def create
      build_resource

      if resource.save
        if resource.active_for_authentication?
          sign_in(resource_name, resource)
          # respond_with resource, :location => after_sign_up_path_for(resource)
          render partial: '/partials_folder/thank_you'
        else
          expire_session_data_after_sign_in!
          # respond_with resource, :location => after_inactive_sign_up_path_for(resource)
          render partial: '/partials_folder/there_was_an_error'
        end
      else
        clean_up_passwords resource
        respond_with resource
      end
    end 
```

希望这能让你走上正确的道路。

# python - 如何查看基础数据

> ID：16111877
> 
> 赞同：0
> 
> 时间：2013-04-19T19:09:42.657
> 
> 标签：python, python-2.7

关于以下问题，请多多包涵，全部在 Python 中。

假设您有一个名为 filter 的函数，该过滤器函数接收一些数据并根据数据返回过滤器选项。假设数据是 10 个值的列表。

问题是，当过滤器获取数据 [：4] 时，它将使用这四个值...应该如何设置或合并过滤器函数以使其从整个数据列表中过滤掉，而不仅仅是给它的东西，假设它被给了 data[:4]

对不起，这个问题更抽象，我将尝试处理一些示例代码以使其更清晰。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T19:14:34.143

如果不从根本上违反语言，这是不可能的。

当一个函数被传递给列表的一个子集时，它所知道的只是这些项目。解决这个问题的唯一方法是编写语言的自定义扩展，改变其结构以违反封装（[它仍然是 Python 吗？](http://en.wikipedia.org/wiki/Ship_of_Theseus)）。

# css - 如何在css可配置按钮中转换图像按钮

> ID：16111882
> 
> 赞同：1
> 
> 时间：2013-04-19T19:09:55.567
> 
> 标签：css, image, button, magento-1.7, configurable

如何转换此图像按钮，使其成为 CSS 可配置按钮？在下面的代码中，图像提交按钮和 css 提交按钮都存在。图像发送按钮是原始按钮并且正在工作。我的目标是将此按钮转换为一个工作的css按钮......目前css按钮可见但不工作。imagebutton 用作发送按钮....我怎样才能做到这一点？谢谢！

```
</div>
<?php endif; ?>
    <div class="fieldset">
        <h2 class="legend"><?php echo $this->__('Login Information') ?></h2>
        <ul class="form-list">
            <li class="fields">
                <div class="field">
                    <label for="password" class="required"><em>*</em><?php echo $this->__('Password') ?></label>
                    <div class="input-box">
                        <input type="password" name="password" id="password" title="<?php echo $this->__('Password') ?>" class="input-text required-entry validate-password" />
                    </div>
                </div>
                <div class="field">
                    <label for="confirmation" class="required"><em>*</em><?php echo $this->__('Confirm Password') ?></label>
                    <div class="input-box">
                        <input type="password" name="confirmation" title="<?php echo $this->__('Confirm Password') ?>" id="confirmation" class="input-text required-entry validate-cpassword" />
                    </div>
                </div>
            </li>
            <?php echo $this->getChildHtml('form.additional.info'); ?>
            <?php echo $this->getChildHtml('persistent.remember.me'); ?>
        </ul>
        <?php echo $this->getChildHtml('persistent.remember.me.tooltip'); ?>
    </div>
    <div class="buttons-set">
        <p class="required"><?php echo $this->__('* Required Fields') ?></p>
        <p class="back-link"><a href="<?php echo $this->escapeUrl($this->getBackUrl()) ?>" class="back-link"><small>&laquo; </small><?php echo $this->__('Back') ?></a></p>
        <button type="submit" title="<?php echo $this->__('Submit') ?>" class="button"><span><span><?php echo $this->__('Submit') ?></span></span></button>
        <button class="form-button-alt submit" onclick="setsubmit('<?php echo $this->__('Submit') ?>" type="button"><span><?php echo $this->__('Submit') ?></span></button>
    </div> 
```

# c# - Role.IsUserInRole

> ID：16111886
> 
> 赞同：3
> 
> 时间：2013-04-19T19:10:05.783
> 
> 标签：c#, asp.net, roles

我将用户添加到角色如下（请注意，我在我的机器上运行下面显示的代码）：

```
 Roles.AddUserToRole(oMU.UserName, "Role1"); 
```

使用以下代码，我检查用户是否在角色中：

```
 if (Roles.IsUserInRole(txtUserName.Text.Trim(), "Role1")) 
```

并且用户确实在角色中。

我运行以下命令来检查当前登录的用户是否在 Role1 中，但它无法输入 if 语句 - 为什么？：

```
 if (User.IsUserInRole("Role1"))
     {
       // does not enter this code 
     } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T19:27:10.087

你不能打电话`Roles.IsUserInRole("Role1")`

一旦用户被分配到这样的角色 -

```
Roles.AddUserToRole(oMU.UserName, "Role1"); 
```

## 为什么？

**IPrincipal 对象**仅注入到`HttpContext.Current.User`on `Application_AuthenticateRequest`。

因此，您必须等待下一个请求才能访问`Roles.IsUserInRole("Role1")`.

## 更新

确保`cacheRolesInCookie`设置为 false，因为它有一些问题。

```
<roleManager enabled="true" cacheRolesInCookie="false" 
   defaultProvider="DefaultRoleProvider">
      ....
</roleManager> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T19:13:41.267

我认为它应该`User.IsInRole`代替`Roles.IsUserInRole`，或者通过传递专门指定用户名作为参数`Roles.IsUserInRole(User.Identity.Name,"Role1")`

Roles.IsUserInRole 使用一个参数调用 GetCurrentUser() 获取用户名，该用户名将从 CurrentPrincipal 中提取。听起来您当前登录的用户与当前主体上的用户不同。

# javascript - 在视图中显示的结果表中以不同颜色为所有偶数项着色

> ID：16111894
> 
> 赞同：0
> 
> 时间：2013-04-19T19:10:39.063
> 
> 标签：javascript, css, asp.net-mvc

我正在构建一个 MVC 应用程序，其中项目显示在表格中。

这是视图中包含的表的示例：

```
<table id="itemsID">
    <tr>
        <th>Obj Name</th>
        <th>Number</th>
        <th>Amount</th>
        <th>Size</th>
        <th>Prize</th>
    </tr>
    @for (int i = 0; i < Model.Count; i++)
    {
        <tr>
            <td>
                @Html.DisplayFor(model => model[i].m_ObjName)
            </td>
            <td>
                @Html.DisplayFor(model => model[i].m_Number)
            </td>
            <td>
                @Html.DisplayFor(model => model[i].m_Amount)
            </td>
            <td>
                @Html.DisplayFor(model => model[i].m_Size)
            </td>
            <td>
                @Html.DisplayFor(model => model[i].m_Prize)
            </td>
            <td>
                @Html.ActionLink("Edit", "Edit", new { id = Model[i].m_ObjID}) |
                @Html.ActionLink("Details", "Details", new { id = Model[i].m_ObjID}) |
                @Html.ActionLink("Delete", "Delete", new { id = Model[i].m_ObjID })
            </td>
        </tr>
    }
</table> 
```

我要做的是为for循环中的每个项目着色，其中数字是偶数/奇数。到目前为止，我已经编写了一个部分有效的简短 javascript：

```
$("#results tr:even").css("background-color", "#FFFFFF");; 
```

很简单，但显然它会影响页面中的所有项目，而不是 for 循环中显示的项目。如何专门针对这些项目？

**编辑**

基于大家的善意解释，我对上面的代码进行了修改。现在结果列表中的所有 event tr 都受到影响，包括`<tr>`右下的第一个`<table>`，但我希望它被忽略，我该怎么做？我试图将 ID 仅放在`<tr>`for 循环中，但它不起作用......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T19:14:25.003

# CSS3

css3 可以帮助你。前往 w3schools 并阅读有关[":nth-of-type" 伪选择器的信息，或在](http://www.w3schools.com/cssref/sel_nth-of-type.asp)[此处](http://www.w3schools.com/cssref/tryit.asp?filename=trycss3_nth-of-type_odd_even)查看它的实际应用

我会推荐解决方案 1，因为我认为这是一种更好的做法。

**注意**：两种解决方案都假定“itemID”始终不一样，因此我们必须根据其他标准选择元素。这就是我将“item-table”类添加到`<table>`标签的原因。

**两种解决方案的 HTML**

```
<table id="itemsID" class="item-table">
  <tr>
    <!-- header field names go here  -->
  </tr>
  @for (int i = 0; i < Item.Count; i++)
  {
    <tr>
        <!-- each item's properties go here -->
    </tr>
  } 
```

## 解决方案 1：在样式表上执行（推荐）

```
.item-table tr + tr:nth-of-type(even) {
    /* styles for the even rows */
}
.item-table tr + tr:nth-of-type(odd) {
    /* styles for the odd rows */
} 
```

**注意**：`tr + tr`选择`<tr>`第一个标签之后的所有标签。这对于跳过标题并对其应用其他样式很有用。有关更多信息[，请参阅元素 + 元素参考](http://www.w3schools.com/cssref/sel_element_pluss.asp)。

**提示**：您也可以使用[:first-child 伪选择器](http://www.w3schools.com/cssref/sel_firstchild.asp)仅将样式应用于标题，如下所示：

```
.item-table tr:first-child {
    /* styles for the header row */
} 
```

## 解决方案 2：修改 jQuery 查询上的选择器

```
$('table.item-table tr:even').css({ /* some styles here */ }) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T19:14:36.663

像这样更改您的 jQuery 选择器：

```
$("#itemsID tr:even").css("background-color", "#FFFFFF"); 
```

或者只是把它放在你的 CSS 中：

```
#itemsID tr:nth-child(even) { background-color: #FFFFFF; } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T19:15:34.413

给循环的 TRs 一个特定的类。

```
<tr class="my_special_row">
    <td></td>... etc
</tr> 
```

然后你可以这样定位：

```
$("tr.my_special_row:even").css("background-color", "#FFFFFF"); 
```

特异性是你的朋友。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-19T19:38:19.957

有几种不同的方法。使用纯 CSS，它将是（我会推荐）：

```
#itemsID tr:nth-child(even)
{
    background-color: #eee;
} 
```

或者您可以将一个类应用于 for 循环中的偶数行：

```
@for (int i = 0; i < Model.Count; i++)
{
    var className = i % 2 == 0 ? "even" : "odd";

    <tr class="@className">
        ...
    </tr>
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-19T19:12:35.277

`i`只需在是否配对时设置不同的颜色：

```
color = i % 2 == 0 ? color_1 : color_2 
```

# php - SQL 注入攻击的预防

> ID：16111900
> 
> 赞同：0
> 
> 时间：2013-04-19T19:10:55.770
> 
> 标签：php, html, sql, mysqli

大家好，我正在试验并开始创建一个将实施论坛的网站。我已经开始研究可能影响网站的安全问题。跨站脚本和sql注入攻击等领域。

从研究中剥离所有 html 标签将阻止 XSS。这与剥离 SQL 特殊字符一起是否足以防止 sql 注入攻击？

```
<?php
require "dbconn.php";

$mnam = strip_tags($_GET['blogentername']);
$mcom = strip_tags($_GET['blogmessage']);
$approve = 'N';
$dte = gmdate("d-M-Y H:i:s");

$mnam = mysql_real_escape_string($user);
$mcom = mysql_real_escape_string($mcom);

$query = "INSERT INTO blogentry VALUES  ('".$mnam."','".$dte."','".$mcom."','".$approve."','','')";

$results = mysql_query($query)
           or die(mysql_error());

header('Location:messages.php?messagesent=1');

?> 
```

谢谢大家的时间安迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T19:12:38.140

你不应该剥离标签。将它们原始保存在数据库中，然后在将它们`htmlspecialchars`输出到浏览器时使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T19:14:03.860

对于给出的代码 - 是的，它非常安全且难以穿透。

但是，您防御 SQL 注入的想法通常是非常错误的。

您的代码中没有“删除 SQL 特殊字符”。而且这种剥离根本没有意义。
说到 SQL*字符串，如果**格式*正确，它们是相当安全的。但对于所有其他 SQL 文字，你称之为“剥离”的东西实际上不会剥离任何东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T19:29:53.663

作为最佳实践，切勿使用字符串连接来构建 SQL 命令。

使用参数化查询。它们本质上更安全，并且可以通过数据库引擎进行优化，以便在多次执行相同类型的语句时提供更好的性能。

此处包含示例的更多信息： [如何防止 PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

# ajax - ajax 联系表单 ID，被窃听

> ID：16111905
> 
> 赞同：0
> 
> 时间：2013-04-19T19:11:18.553
> 
> 标签：ajax, forms, contact

我在[http://daniloportal.com/NPC2/contact.html上有一个联系表](http://daniloportal.com/NPC2/contact.html)

现在这个 ajax 脚本工作得很好，但我有其他联系表格，我想使用相同的脚本。因此，当我尝试创建脚本的多个实例时，我注意到它停止工作，因为 ID 名称不是专门的 ajax-contact-form。看一下代码：

```
<form id="ajax-contact-form" action="">
  <input type="text" name="name" value="Name *" title="Name *" />
  <input type="text" name="email" value="Email " title="Email *" />
  <input type="text" name="email" value="Email *" title="Email *" />
  <textarea name="message" id="message" title="Message *">Message *</textarea>
    <div class="clear"></div>
  <input type="reset" class="btn btn_clear" value="Clear form" />
  <input type="submit" class="btn btn_blue btn_send" value="Send message!" />
<div class="clear"></div>
   </form> 
```

继承人的JS

```
$("#ajax-contact-form").submit(function() {
    var str = $(this).serialize();      
    $.ajax({
        type: "POST",
        url: "contact_form/contact_process.php",
        data: str,
        success: function(msg) {
            // Message Sent - Show the 'Thank You' message and hide the    form
            if(msg == 'OK') {
                result = '<div class="notification_ok">Your message has been sent. Thank you!</div>';
                $("#fields").hide();
            } else {
                result = msg;
            }
            $('#note').html(result);
        }
    });
    return false;
}); 
```

现在，如果我要在两者上切换该 ID 名称并匹配它们，则脚本将停止工作-理论上它应该可以工作-不确定这有什么问题。

一如既往地感谢任何帮助，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T19:17:42.423

如果您尝试使用 jQuery 访问具有相同 id 的两个元素 - 什么都不会发生。每个元素必须有一个唯一的标识符，否则你应该使用类。

但是，你能给我们另一种形式的标记吗？

# javascript - 碰撞不适用于 JavaScript（包括屏幕截图和碰撞功能）

> ID：16111908
> 
> 赞同：1
> 
> 时间：2013-04-19T19:11:25.443
> 
> 标签：javascript, collision-detection

我在碰撞检测方面遇到了一些问题；

我用来检查一个矩形是否与另一个矩形相交的函数是：

```
function box_col(ax1, ay1, ax2, ay2, bx1, by1, bx2, by2) {
    return !((ax2 < bx1)||(ax1 > bx2)||(ay1 > by2)||(ay2 < by1));
    } 
```

出于某种原因，每当我站在栅栏的边缘时，我就不能再动了。但是，如果我走到栅栏的顶部，我可以向后移动，但不能向左或向右移动。

当我击中左侧、右侧和底部时也是如此。一旦我分别到了它的边缘，我就不能再沿着它移动了。

[http://i.stack.imgur.com/jzcp8](http://i.stack.imgur.com/jzcp8.png) .​​png - 截图

（红色块代表碰撞区域，因为我使用视图变量绘制到画布中）

我知道传递给 box_col 的所有 x,y 坐标都是正确的。

你可以看到我在栅栏的顶部，但它不会让我向左或向右移动。只是备份。另外，当我在栅栏的左侧时，我根本无法移动；它甚至不会让我向右移动。

我已经在网上搜索了很多，并花了几个小时试图找到正确的碰撞算法，但我显然仍然不明白......

任何帮助表示赞赏，谢谢。

# c - 终止在 shell 中激活进程的线程

> ID：16111911
> 
> 赞同：0
> 
> 时间：2013-04-19T19:11:30.553
> 
> 标签：c, shell, pthreads

使用 pthreads，我创建了一个通过 shell 进行音频录制的线程：

```
void *thread_function(void *arg) {

system("arecord data.wav");

} 
```

但是，当我调用`pthread_cancel(&thread_ID);`终止线程时，录音机仍然可以自己工作（当然，直到我终止整个 C 程序）。

如何停止执行系统调用的 pthread？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T20:01:49.343

您的线程启动函数应该执行以下操作：

```
pid_t pid;
int status;
posix_spawnp(&pid, "arecord", 0, 0, (char *[]){"arecord", "data.wav", 0}, environ);
pthread_cleanup_push(cleanup, &pid);
while (waitpid(pid, &status, 0)<0 && errno==EINTR);
pthread_cleanup_pop(0); 
```

具有清理功能，例如：

```
static void cleanup(void *p)
{
    pid_t pid = *(pid_t *)p;
    kill(pid, SIGTERM);
    while (waitpid(pid, &status, 0)<0 && errno==EINTR);
} 
```

然后取消线程`pthread_cancel`将杀死子进程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T19:23:28.697

```
system("arecord data.wav"); 
```

它将在您的系统中创建一个单独的进程（不是程序中的线程），并且终止该线程不会影响该进程。您应该通过另一个系统调用终止该进程。

但是，在非等待模式下使用[spawn*](http://en.wikipedia.org/wiki/Spawn_%28computing%29)函数制作过程比您的方式要好一些，在这种情况下，您不需要额外的线程。

```
spawnl(P_NOWAIT, "arecord data.wav", .... ); 
```

但是，杀死创建的进程是丑陋的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T19:29:25.223

您可以使用`pthread_kill`将信号发送到特定线程。线程取消的问题是它会被延迟，直到程序到达取消点（[见这个答案](https://stackoverflow.com/questions/4760687/cancelling-a-thread-using-pthread-cancel-good-practice-or-bad)）。

如果您确实使用`pthread_kill`，那么您可以选择发送哪个信号。我认为应该可以用终止信号结束线程，然后终止由系统生成的子进程，尽管我对此不确定。

# batch-file - 带有 sqlplus 的 cmd 脚本不返回任何结果

> ID：16111916
> 
> 赞同：0
> 
> 时间：2013-04-19T19:11:56.007
> 
> 标签：batch-file, cmd, sqlplus

我现在看起来像这样的 cmd 脚本：

```
for /f "delims=" %%a in ('sqlplus user/pass@OMP1 @CheckRowCount.SQL') do set rowcount=%%a
if %ROWCOUNT% GTR 0 (
c:\Autobatch\Spotfire.Dxp.Automation.ClientJobSender.exe     http://server/spotfireautomation/JobExecutor.asmx c:\AutoBatch\backup\Trigger_Test.xml
)EXIT 
```

我知道

```
'sqlplus user/pass@omp1 @checkrowcount.sql' 
```

有效，因为当我单独运行它时，我确实在 sqlplus 中得到了一个行数。

这

```
c:\Autobatch\Spotfire.Dxp.Automation.ClientJobSender.exe     http://server/spotfireautomation/JobExecutor.asmx c:\AutoBatch\backup\Trigger_Test.xml 
```

在 CMD 中单独运行时也可以正常工作。

我想要做的是，如果 sqlplus 命令返回 > 0 的行数，则运行另一个命令。否则退出...似乎无法将它们串在一起工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T05:37:26.313

从代码片段中添加最上面的两行，然后查看 %rowcount% 的设置。

```
echo "%ROWCOUNT%"
pause
if %ROWCOUNT% GTR 0 ( 
```

您可能会发现您的 sqlplus 命令在末尾返回一个空行，并且 rowcount 被设置为空。在这种情况下，这应该工作：

```
for /f "delims=" %%a in ('sqlplus user/pass@OMP1 @CheckRowCount.SQL ^|findstr "[0-9]" ') do set rowcount=%%a 
```

# python - 根据值对二维字典进行反向排序

> ID：16111920
> 
> 赞同：2
> 
> 时间：2013-04-19T19:12:07.243
> 
> 标签：python

我有一个 2d 字典，其中我的数据如下所示：

```
k1,k2, value
 1,2,0.8
 1,3,0.7
 1,5,0.9
 2,1,0.8

  and so on 
```

所以可以说我在二维字典中有这些数据..

```
d[1][2] --> gives 0.8 
```

我想要的是根据值对每个 k1 的 k2 进行反向排序

所以对于上面..我希望在这个操作之后得到的是：

```
1,5,0.9
1,2,0.8
1,3,0.7
2,1,0.8 
```

等等..

我如何在python中实现上述目标

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T19:19:00.927

`k2`这对 each 进行反向排序`k1`，这是您的问题所要求的：

```
for k1, subdict in maindict.items():
    for k2, value in sorted(subdict.items(), reverse=True):
        print(k1, k2, value) 
```

如果您还想向前排序`k1`：

```
for k1, subdict in sorted(maindict.items()):
    for k2, value in sorted(subdict.items(), reverse=True):
        print(k1, k2, value) 
```

如果你想反向排序`value`而不是`k2`（正如你的标题所要求的那样）：

```
for k1, subdict in maindict.items():
    for k2, value in sorted(subdict.items(), key=lambda (k, v): v, reverse=True):
        print(k1, k2, value) 
```

一些解释：

您可以调用[`sorted`](http://docs.python.org/3/library/functions.html#sorted)任何序列来获取它的排序版本。您可以传递`reverse=True`给几乎任何与排序相关的函数以对其进行反向排序，并`key`指定一个从每个值生成排序键的函数。有关详细信息，请参阅[排序](http://docs.python.org/3/howto/sorting.html)方法。

（`lambda`上面给出的函数仅适用于 Python 2.x。在 3.x 中，您可以使用`lambda kv: kv[1]`。或者您可以只使用`operator.itemgetter(1)`。）

[`items`](http://docs.python.org/3/library/stdtypes.html#dict.items)您可以通过调用其方法从任何映射中获取一系列键值对。在 Python 3.x 中，这为您提供了一个很好的高效视图；在 2.x 中，它将对复制到`list`.

最后，请记住 a`dict`没有固有的顺序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T19:51:27.860

dict 的要点是它是无序的。如果你想从你的字典中创建一个新的值列表，并对这些值进行排序，那是另一回事。但是你不会得到一个已经排序的字典（除非你让自己成为一个排序的字典，这实际上并不难）。

# ruby-on-rails - 是否可以只要求 ActiveRecord 关联中的某些列？

> ID：16111930
> 
> 赞同：6
> 
> 时间：2013-04-19T19:12:42.810
> 
> 标签：ruby-on-rails, ruby, activerecord, associations

考虑

```
def Foo
  has_one :user
end 
```

假设我只想要一个`Foo`'s`User`的名字，而不是任何其他列。所以我想要

```
SELECT name FROM "users" WHERE "prices"."id" = 123 
```

但做`foo.user.name`会给我

```
SELECT * FROM "users" WHERE "prices"."id" = 123 
```

是否有任何巧妙的方法可以使用关联来仅获取一列？如果没有，那么我必须这样做：

```
User.where(id: foo.user_id).pluck(:name).first 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T19:15:14.210

通常，您可以使用 .select 方法指定要选择的列，例如：

```
User.select(:name).where(...) 
```

这将只返回名称列中的值。您可以将其链接到关联上，但不能链接到实例上。因此，正如 meagar 通过否决其他答案（包括 Mori 已删除的答案）非常激进地指出的那样，在`has_one`关系中，您不能将其链接到关联上（因为在这种情况下它不是关联）。但是，您可以构建自定义范围，如下所示：

```
class Foo < ActiveRecord::Base
  has_one :bar
  scope :bar_name, lambda {Bar.select(:name).where(:foo_id=> id)}
end 
```

以上内容未经测试，因此您可能需要对其进行调整，但一般来说，这种方法可以让您执行以下操作：

```
foo.bar_name 
```

...不从 Bar 加载所有列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T19:15:43.353

不，在你的情况下`has_one`，但在 的情况下是的`has_many`。

为关联返回的对象`has_one`不是一个范围，您可以在其上链接其他方法`select`，例如`has_many`. 它是模型的实际实例，实例化它必然涉及一个`select *`.

如果您只想选择名称，则必须`User`直接访问模型并使用`select`.

相反，如果您`Foo`有很多`users`，则可以使用`foo.users.select("name")`或任何其他可链接的方法，例如`foo.users`实际的ActiveRecord 关联，而不是模型的实例*。*

# ruby-on-rails - 为用户显示微博评论

> ID：16111932
> 
> 赞同：0
> 
> 时间：2013-04-19T19:12:59.790
> 
> 标签：ruby-on-rails

基于[Micropost 在用户页面 (Ruby on Rails) 上的评论](https://stackoverflow.com/questions/9669221/microposts-comments-on-users-page-ruby-on-rails)，我能够为每个微博添加新评论。但是，我无法在同一页面上显示每个帖子的评论。下面的代码没有抛出任何错误，所以我认为每个微博的评论没有正确分配，因此无法显示。

*用户*>*微博*>*评论*

**users_controller.rb**

```
 def show
    @user = Account.find(params[:id])
    @microposts = @user.microposts
    @micropost = Micropost.new
    @comments = @micropost.comments
    @comment = Comment.new
  end 
```

**microposts/_micropost.html.erb**

```
<li>
  <span class="content"><%= micropost.content %></span>
  <span class="timestamp">
    Posted <%= time_ago_in_words(micropost.created_at) %> ago.
  </span>

  <span class="comments">
    <% if micropost.comments.any? %>
    <ul class="comments">
      <%= render @comments%>
    </ul>
    <% end %>

    <%= render "shared/form_comment", micropost: micropost %>
  </span>

</li> 
```

**评论/_comment.html.erb**

```
<li>
  <span class="content"><%= comment.content %></span>
  <span class="timestamp">
    Posted <%= time_ago_in_words(comment.created_at) %> ago.
  </span>
</li> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T19:49:57.087

更改`<%= render @comments%>`为`<%= render micropost.comments %>`循环浏览特定帖子的评论，而不是使用通用评论循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T19:18:17.463

```
<li>
  <span class="content"><%= micropost.content %></span>
  <span class="timestamp">
    Posted <%= time_ago_in_words(micropost.created_at) %> ago.
  </span>

  <span class="comments">
    <ul class="comments">
      <%= render micropost.comments %> # you can leave out the #any?
    </ul>
   </span>

</li> 
```

# c# - 如何确定用户定义控件数组的点击事件

> ID：16111934
> 
> 赞同：0
> 
> 时间：2013-04-19T19:13:12.437
> 
> 标签：c#

我创建了`Array`其中一个`UserControls`1`PictureBox`和 1 `Button`。现在我想知道从of`Button`中按下的是哪个。`Array``UserControl`

```
UserControl u=new UserControl[20];

for (int j = 0; j < 20; j++) 
{
    u[j] = new UserControl();               
    u[j].BringToFront();
    flowLayoutPanel1.Controls.Add(u[j]);
    u[j].Visible = true;
    u[j].button1.Click+=new EventHandler(sad);
}

private void sad(object sender, EventArgs e)
{ 
    //how to determine which button from the array of usercontrol is pressed?
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T19:15:45.023

该`sender`参数包含`Control`生成事件的实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T19:16:00.807

像这样的东西：

```
private void sad(object sender, EventArgs e) {
    var buttonIndex = Array.IndexOf(u, sender);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T01:31:43.583

这应该接近你想要的。我可以根据需要进行修改以适合您的情况。

```
FlowLayoutPanel flowLayoutPanel1 = new FlowLayoutPanel();
void LoadControls()
{
    UserControl[] u= new UserControl[20];
    for (int j = 0; j < 20; j++) 
    {
        u[j] = new UserControl();               
        u[j].BringToFront();
        flowLayoutPanel1.Controls.Add(u[j]);
        u[j].Visible = true;
        u[j].button1.Click +=new EventHandler(sad);
    }
}

private void sad(object sender, EventArgs e)
{ 
    Control c = (Control)sender;
    //returns the parent Control of the sender button
    //Could be useful 
    UserControl parent = (UserControl)c.Parent;  //Cast to appropriate type

    //Check if is a button
    if (c.GetType() == typeof(Button))
    {
        if (c.Name == <nameofSomeControl>) // Returns name of control if needed for checking
        {
            //Do Something
        }

    }
    //Check if is a Picturebox
    else if (c.GetType() == typeof(PictureBox))
    {

    }
    //etc. etc. etc      
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-20T02:21:28.617

我认为这会让你得到你想要的：

```
 if (sender is UserControl)
    {
        UserControl u = sender as UserControl();

        Control buttonControl = u.Controls["The Button Name"];
        Button button = buttonControl as Button;
    } 
```

# cuda - 这种分配设备对象的方式“正确”吗？

> ID：16111935
> 
> 赞同：1
> 
> 时间：2013-04-19T19:13:14.217
> 
> 标签：cuda

所以[我之前问过一个](https://stackoverflow.com/questions/16024087/copy-an-object-to-device)关于如何直接在设备上分配对象而不是“[正常](https://stackoverflow.com/questions/16024087/copy-an-object-to-device)”的问题：

1.  在主机上分配
2.  复制到设备
3.  将动态分配的字段一一复制到设备

**我希望它直接在设备上分配的主要原因是我不想手动一个一个地复制每个动态分配的字段。**

无论如何，所以我认为我实际上已经找到了一种方法来做到这一点，并且我希望看到更有经验的 CUDA 程序员（如 Robert Crovella）的一些意见。

我们先看代码：

```
class Particle
{
    public:
    int *data;

    __device__ Particle()
    {
        data = new int[10];
        for (int i=0; i<10; i++)
        {
            data[i] = i*2;
        }
    }
};

__global__ void test(Particle **result)
{
    Particle *p = new Particle();

    result[0] = p; // store memory location
}

__global__ void test2(Particle *p)
{
    for (int i=0; i<10; i++)
        printf("%d\n", p->data[i]);

}

int main() {
    // initialise and allocate an object on device
    Particle **d_p_addr;
    cudaMalloc((void**)&d_p_addr, sizeof(Particle*));
    test<<<1,1>>>(d_p_addr);

    // copy pointer to host memory
    Particle  **p_addr = new Particle*[1];
    cudaMemcpy(p_addr, d_p_addr, sizeof(Particle*), cudaMemcpyDeviceToHost);

    // test:
    test2<<<1,1>>>(p_addr[0]);

    cudaDeviceSynchronize();

    printf("Done!\n");

} 
```

如您所见，我所做的是：

1.  调用内核初始化设备上的对象并将其指针存储为输出参数
2.  将指向分配对象的指针从设备内存复制到主机内存
3.  现在您可以将该指针传递给另一个内核就好了！

这段代码确实有效，但我不确定是否有缺点。

干杯

编辑：正如罗伯特所指出的，首先在主机上创建一个指针是没有意义的，所以我从代码中删除了这部分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T20:59:03.017

是的，你可以这么做。

您正在设备上分配一个对象，并将指向它的指针从一个内核传递到下一个内核。由于[设备 malloc/new](http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#dynamic-global-memory-allocation-and-operations)的一个特点是分配在上下文的生命周期内（不仅仅是内核）持续存在，因此分配不会在内核结束时消失。这基本上是标准的 C++ 行为，但我认为它可能值得重复。因此，您从一个内核传递到下一个内核的指针在程序上下文中的*任何*后续设备代码中都是有效的。

但是，您可能需要注意一个皱纹。在设备上完成的动态分配（例如通过`new`或`malloc`在设备代码中）返回的指针*不能*用于将数据从设备传输到主机，至少在 cuda 的当前版本（cuda 5.0 和更早版本）中是这样。造成这种情况的原因有点神秘（翻译：我无法充分解释它）但考虑动态分配来自设备堆这一事实是有启发性的，设备堆是一个逻辑上与运行时的全局内存区域分开的区域API函数喜欢`cudaMalloc`和`cudaMemcpy`使用。这里给出了一个间接的指示[：](http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#heap-memory-allocation)

> 除了通过主机端 CUDA API 调用（例如 cudaMalloc()）分配的内存之外，为设备堆保留的内存。

如果您想向自己证明这一点，请尝试在第二次内核调用之后添加以下看似无害的代码：

```
Particle *q;
q = (Particle *)malloc(sizeof(Particle));
cudaMemcpy(q, p_addr[0], sizeof(Particle), cudaMemcpyDeviceToHost); 
```

如果您随后检查从该 cudaMemcpy 操作返回的 API 错误值，您将观察到错误。

作为一个不相关的评论，`*p`在我的书中，您对指针的使用有点怪异，并且给出的编译器警告表明它很奇怪。这在技术上并不是非法的，因为你实际上并没有用那个指针做任何有意义的事情（你立即在你的内核 1 中替换它）但是它很奇怪，因为你正在传递一个指向你没有正确 cudaMalloc'ed 的内核的指针. 在您演示的上下文中，这是完全没有必要的，您可以消除内核 1 的第一个参数并用局部变量替换，从而消除怪异和编译器警告。

# php - 拆分字符串以填充两个 DIV

> ID：16111936
> 
> 赞同：-2
> 
> 时间：2013-04-19T19:13:16.563
> 
> 标签：php, split

伙计们，我正在建立一个足球博彩网站，数据馈送公司在一个单独的列中为我提供主队和客队，以 - 符号分隔。我试图思考它，但变得更加困惑，这就是我所拥有的：

```
$query = "SELECT * FROM participant_template";
$result = mysql_query($query);
if($result){
    while($row = mysql_fetch_array($result)){
        $teams = $row['teams'];
        // The output of $teams looks like this: Manchester - Chelsea
        $home_team = "Please help me out";
        $away_team = "Please help me out";
    }
} 
```

我如何将它们分为主队和客队。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T19:18:20.487

试试看。此解决方案期望团队始终以“-”分隔

```
// The output of $teams looks like this: Manchester - Chelsea
$teamsArr = explode("-",$teams);
$home_team = trim($teamsArr[0]);
$away_team = trim($teamsArr[1]); 
```

同样，您应该将此问题标记为 PHP，而不是 sql。

# java - Java Swing JXDatePicker

> ID：16111943
> 
> 赞同：5
> 
> 时间：2013-04-19T19:13:46.207
> 
> 标签：java, swing, swingx

我正在使用 SwingX JXDatePicker，但我不知道如何提供下一个/上一年的按钮（因为默认情况下它只提供下一个/上一个月的按钮）。

此外，似乎不再维护 SwingX：我应该使用更新的组件作为日期选择器吗？

任何帮助/提示将不胜感激。谢谢，托马斯

**更新：**

为了澄清这个问题，我添加了一个 JXDatePicker 屏幕截图，并以红色突出显示了下一个月/上一个月的按钮。因此，问题是：如何添加将日历带到下一年/上一年的按钮？请注意，新按钮必须是标准组件，因为它们需要由特定的外观管理器呈现（在本例中为不确定）。

非常感谢

![在此处输入图像描述](https://i.stack.imgur.com/EgqBt.gif)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-29T07:23:56.493

我知道这是一个老问题，但我终于在这里找到了答案，来自 kleopatra 对 SwingsLab 演示的评论。

SwingsLab 演示提供了如何为每个组件设置自定义日历标题的示例，但这是我实际使用的代码（这是全局的；每个应用程序）：

```
UIManager.put(CalendarHeaderHandler.uiControllerID, SpinningCalendarHeaderHandler.class.getName());
datePicker = new JXDatePicker();
datePicker.getMonthView().setZoomable(true); //this is needed for custom header 
```

这似乎是实验性代码（尚未完全公开），因此使用风险自负。希望能帮助到你。

![SwingsLab 演示](https://i.stack.imgur.com/8dTzV.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T10:17:09.503

我会推荐使用 Microba DatePicker。它是高度可定制的，并且完全符合您的要求。

[http://microba.sourceforge.net/](http://microba.sourceforge.net/)

![在此处输入图像描述](https://i.stack.imgur.com/RyySq.png) ![在此处输入图像描述](https://i.stack.imgur.com/USouk.png)

**编辑：**

好的我明白了。好吧，我做了一些研究，看来您正在寻找的功能实际上并不存在于 JXDatePicker 中。

我发现的另一种选择是： http: [//sourceforge.net/projects/jdatepicker/](http://sourceforge.net/projects/jdatepicker/)上的 JDatePicker 。

主网站：[https ://jdatepicker.org/](https://jdatepicker.org/)

这仍然受支持，并且似乎具有您想要的功能。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-23T19:13:51.697

这是我几年前整理的。您可以对其进行修改以满足您的需求。

![在此处输入图像描述](https://i.stack.imgur.com/Ts9m3.png)

您将需要此图像来运行主要测试：![日历图标](https://i.stack.imgur.com/xutZc.gif). 只需将其放在与名称为 datepicker.gif 的源相同的目录中即可。

```
import java.awt.Color;
import java.awt.Container;
import java.awt.Dimension;
import java.awt.FlowLayout;
import java.awt.Font;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.Insets;
import java.awt.Point;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.net.URL;
import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.util.Calendar;
import java.util.Date;
import java.util.List;

import javax.swing.BorderFactory;
import javax.swing.BoxLayout;
import javax.swing.ImageIcon;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JTextField;
import javax.swing.Popup;
import javax.swing.PopupFactory;

public class DatePicker extends JPanel {

    private static final long serialVersionUID = 1L;

    protected boolean controlsOnTop;
    protected boolean removeOnDaySelection;

    protected Calendar currentDisplayDate;

    protected JButton prevMonth;
    protected JButton nextMonth;
    protected JButton prevYear;
    protected JButton nextYear;

    protected JTextField textField;

    protected List<ActionListener> popupListeners = 
        new ArrayList<ActionListener>();

    protected Popup popup;

    protected SimpleDateFormat dayName   = new SimpleDateFormat("d");
    protected SimpleDateFormat monthName = new SimpleDateFormat("MMMM");

    protected String iconFile = "datepicker.gif";
    protected String[] weekdayNames = 
        {"Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"};

    public DatePicker() {
        super();
        currentDisplayDate   = Calendar.getInstance();
        controlsOnTop        = true;
        removeOnDaySelection = true;
        createPanel();
    }

    public DatePicker(Calendar date) {
        super();
        setDate(date);
        controlsOnTop        = true;
        removeOnDaySelection = true;
        createPanel();
    }

    public DatePicker(int month, int day, int year) {
        super();
        setDate(month, day, year);
        controlsOnTop        = true;
        removeOnDaySelection = true;
        createPanel();
    }

    public void setDate(String date) {
        currentDisplayDate = Calendar.getInstance();
        editDate(date);
    }

    public void setDate(Calendar date) {
        currentDisplayDate = date;
        createPanel();
        validate();
        repaint();
    }

    public void setDate(int month, int day, int year) {
        currentDisplayDate = Calendar.getInstance();
        currentDisplayDate.set(expandYear(year), month - 1, day);
        createPanel();
        validate();
        repaint();
    }

    protected int expandYear(int year) {
        if (year < 100) {                   // 2 digit year
            int currentYear = Calendar.getInstance().get(Calendar.YEAR);
            int current2DigitYear = currentYear % 100;
            int currentCentury    = currentYear / 100 * 100;
            // set 2 digit year range +20 / -80 from current year
            int high2DigitYear    = (current2DigitYear + 20) % 100;
            if (year <= high2DigitYear) {
                year += currentCentury;
            }
            else {
                year += (currentCentury - 100);
            }
        }
        return year;
    }

    public void setControlsOnTop(boolean flag) {
        controlsOnTop = flag; 
        createPanel();
        validate();
        repaint();
    }

    public void setRemoveOnDaySelection(boolean flag) {
        removeOnDaySelection = flag;
    }

    public Popup getPopup(Container c) {
        if (popup == null) {
            Point p = c.getLocation();
            PopupFactory factory = PopupFactory.getSharedInstance();
            popup = factory.getPopup(c, this, p.x, p.y);
        }
        return popup;
    }

    public void popupShow(Container c) {
        getPopup(c);
        popup.show();
    }

    public void popupHide() {
        popup.hide();
    }

    public Calendar getCalendarDate() {
        return currentDisplayDate;
    }

    public Date getDate() {
        return currentDisplayDate.getTime();
    }

    public String getFormattedDate() {
        return Integer.toString(getMonth()) + "/" + 
            Integer.toString(getDay()) + "/" +
            Integer.toString(getYear());
    }

    public int getMonth() {
        return currentDisplayDate.get(Calendar.MONTH) + 1;
    }

    public int getDay() {
        return currentDisplayDate.get(Calendar.DAY_OF_MONTH);
    }

    public int getYear() {
        return currentDisplayDate.get(Calendar.YEAR);
    }

    public ImageIcon getImage() {
        return createImageIcon(iconFile, "Calendar date picker");
    }

    /* 
     * Returns an ImageIcon, or null if the path was invalid. 
     */
    protected ImageIcon createImageIcon(String path, String description) {
        URL imgURL = getClass().getResource(path);
        String fileName = imgURL.getFile().replace("bin/", "src/");
        fileName = fileName.replace("%20", " ").substring(1);
        ImageIcon icon = new ImageIcon(fileName, description);
        return icon;
    }

    protected void createPanel() {
        removeAll();
        setBorder(BorderFactory.createLineBorder(Color.black, 3));
        setFocusable(true);
        setLayout(new BoxLayout(this, BoxLayout.Y_AXIS));
        if (controlsOnTop) {
            add(createControls());
            add(createCalendar());
        } else {
            add(createCalendar());
            add(createControls());
        }
        Dimension d = getPreferredSize();
        setPreferredSize(new Dimension(d.width, d.height + 8));
    }

    protected JPanel createControls() {        
      JPanel c = new JPanel();
      c.setBorder(BorderFactory.createRaisedBevelBorder());
      c.setFocusable(true);
      c.setLayout(new FlowLayout(FlowLayout.CENTER));

      prevYear = new JButton("<<");
      c.add(prevYear);
      prevYear.setMargin(new Insets(0,0,0,0));
      prevYear.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent arg0) {
                addYear(-1);        
            }
      });

      prevMonth = new JButton("<");
      c.add(prevMonth);
      prevMonth.setMargin(new Insets(0,0,0,0));
      prevMonth.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent arg0) {
                addMonth(-1);       
            }
      });

      textField = new JTextField(getFormattedDate(), 10);
      c.add(textField);
      textField.setEditable(true);
      textField.setEnabled(true);
      textField.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                editDate(textField.getText());
            }
      });

      nextMonth = new JButton(">");
      c.add(nextMonth);
      nextMonth.setMargin(new Insets(0,0,0,0));
      nextMonth.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent arg0) {
                addMonth(+1);   
            }
      });

      nextYear = new JButton(">>");
      c.add(nextYear);
      nextYear.setMargin(new Insets(0,0,0,0));
      nextYear.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent arg0) {
                addYear(+1);    
            }
      });

      return c;
    }

    protected JPanel createCalendar() {
        JPanel x = new JPanel();
        GridBagLayout gridbag = new GridBagLayout();
        GridBagConstraints c  = new GridBagConstraints();

        x.setFocusable(true);
        x.setLayout(gridbag);

        String month = monthName.format(currentDisplayDate.getTime());
        String year  = Integer.toString(getYear());

        c.gridx      = 0;
        c.gridy      = 0;
        c.gridwidth  = 7;
        c.gridheight = 1;
        JLabel title = new JLabel(month + " " + year);
        x.add(title, c);
        Font font      = title.getFont();
//        Font titleFont = new Font(font.getName(), font.getStyle(),
//              font.getSize() + 2);
        Font weekFont = new Font(font.getName(), font.getStyle(),
                font.getSize() - 2);
        title.setFont(font);

        c.gridy      = 1;
        c.gridwidth  = 1;
        c.gridheight = 1;
        for (c.gridx = 0; c.gridx < 7; c.gridx++) {
            JLabel label = new JLabel(weekdayNames[c.gridx]);
            x.add(label, c);
            label.setFont(weekFont);
        }

        Calendar draw = (Calendar) currentDisplayDate.clone();
        draw.set(Calendar.DATE, 1);
        draw.add(Calendar.DATE, -draw.get(Calendar.DAY_OF_WEEK) + 1);
        int monthInt = currentDisplayDate.get(Calendar.MONTH);
//      monthInt = 0;
//      System.out.println("Current month: " + monthInt);

        c.gridwidth  = 1;
        c.gridheight = 1;
        int width    = getFontMetrics(weekFont).stringWidth(" Wed ");
        int width1   = getFontMetrics(weekFont).stringWidth("Wed");
        int height   = getFontMetrics(weekFont).getHeight() + 
                (width - width1);

        for (c.gridy = 2; c.gridy < 8; c.gridy++) {
            for (c.gridx = 0; c.gridx < 7; c.gridx++) {
                JButton dayButton;
//              System.out.print("Draw month: " + draw.get(Calendar.MONTH));
                if (draw.get(Calendar.MONTH) == monthInt) {
                    String dayString = dayName.format(draw.getTime());
                    if (draw.get(Calendar.DAY_OF_MONTH) < 10)
                        dayString = " " + dayString;
                    dayButton = new JButton(dayString);
                } else {
                    dayButton = new JButton();
                    dayButton.setEnabled(false);
                }
//              System.out.println(", day: " + dayName.format(draw.getTime()));
                x.add(dayButton, c);
                Color color = dayButton.getBackground();
                if ((draw.get(Calendar.DAY_OF_MONTH) == getDay()) &&
                        (draw.get(Calendar.MONTH) == monthInt)) { 
                    dayButton.setBackground(Color.yellow);
//                  dayButton.setFocusPainted(true);
//                  dayButton.setSelected(true);
                } else
                    dayButton.setBackground(color);
                dayButton.setFont(weekFont);
                dayButton.setFocusable(true);
                dayButton.setPreferredSize(new Dimension(width, height));
                dayButton.setMargin(new Insets(0,0,0,0));
                dayButton.addActionListener(new ActionListener() {
                    public void actionPerformed(ActionEvent e) {
                        changeDay(e.getActionCommand());
                    }

                });
                draw.add(Calendar.DATE, +1);
            }
//          if (draw.get(Calendar.MONTH) != monthInt) break;
        }
        return x;
    }

    public void addMonth(int month) {
        currentDisplayDate.add(Calendar.MONTH, month);
        createPanel();
        validate();
        repaint();
    }

    public void addYear(int year) {
        currentDisplayDate.add(Calendar.YEAR, year);
        createPanel();
        validate();
        repaint();
    }

    public void editDate(String date) {
        parseDate(date);
        createPanel();
        validate();
        repaint();
    }

    protected void parseDate(String date) {
        String[] parts = date.split("/");
        if (parts.length == 3) {
            currentDisplayDate.set(Calendar.MONTH, 
                    Integer.valueOf(parts[0]) - 1);
            currentDisplayDate.set(Calendar.DAY_OF_MONTH, 
                    Integer.valueOf(parts[1]));
            currentDisplayDate.set(Calendar.YEAR, 
                    expandYear(Integer.valueOf(parts[2])));
        } else if (parts.length == 2) {
            currentDisplayDate = Calendar.getInstance();
            currentDisplayDate.set(Calendar.MONTH, 
                    Integer.valueOf(parts[0]) - 1);
            currentDisplayDate.set(Calendar.DAY_OF_MONTH, 
                    Integer.valueOf(parts[1]));
        } else {
            // invalid date
            currentDisplayDate = Calendar.getInstance();
        }
    }

    public void changeDay(String day) {
        currentDisplayDate.set(Calendar.DAY_OF_MONTH, 
                Integer.valueOf(day.trim()));
        if (removeOnDaySelection) {
            firePopupEvent(new ActionEvent(this, 1, "hide"));
            popup = null;
        } else {
            createPanel();
            validate();
            repaint();
        }
    }

    public void addPopupListener(ActionListener l) {
        popupListeners.add(l);
    }

    public void removePopupListener(ActionListener l) {
        popupListeners.remove(l);
    }

    public void firePopupEvent(ActionEvent e) {
        for (int i = popupListeners.size() - 1; i >= 0; i--) {
            ActionListener l = popupListeners.get(i);
            l.actionPerformed(e);
        }
    }

    public static void main(String[] args) {
        final JFrame frame = new JFrame("Date Picker");
        Container pane = frame.getContentPane();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setPreferredSize(new Dimension(450, 250));
        pane.setLayout(new FlowLayout(FlowLayout.LEFT));
        pane.add(new JLabel("Birthdate: "));
        final JTextField testDate = new JTextField(10);
        pane.add(testDate);
        final DatePicker dp = new DatePicker();
        ImageIcon ii = dp.getImage();
//      System.out.println(ii.getIconWidth());
//      System.out.println(ii.getIconHeight());
        final JButton datePicker = new JButton(ii);
        pane.add(datePicker);
        datePicker.setPreferredSize(new Dimension(30, 24));
        datePicker.setMargin(new Insets(0,0,0,0));
        datePicker.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                dp.setDate(testDate.getText());
                dp.popupShow(datePicker);
            }
        });
        dp.addPopupListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                testDate.setText(dp.getFormattedDate());
                dp.popupHide();
            }
        });
        frame.pack();
        frame.setFocusable(true);
        frame.setResizable(true);
        frame.setVisible(true);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-19T03:09:15.267

改进 ：

datetimePicker 离按钮太远，所以

在第 139 行：

```
public Popup getPopup(Container c) {

    if (popup == null) {

        Point p = c.getLocation();

        PopupFactory factory = PopupFactory.getSharedInstance();

 // FramePrinc.Location.x ==>  public static Point Location ;  in class FramePrinc

     popup = factory.getPopup(c, this, FramePrinc.Location.x,FramePrinc.Location.y);

    }

    return popup;

} 
```

并在动作中获得组件的位置

```
datePicker.addActionListener(new ActionListener() {

        public void actionPerformed(ActionEvent e) {

            //Add this Line and you will get a good result

            Location = datePickerButton.getLocationOnScreen();

            dp.setDate(testDate.getText());

            dp.popupShow(datePicker);
        }
    }); 
```

所以 ：

*   创建另一个类：例如 FramePrinc
*   创建公共静态点位置
*   在面板中添加 dateTimePiker
*   把我说的那行放在按钮动作里面

祝你好运

Grine_Amine 改进 :)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-19T14:17:47.603

JXDatePicker 中缺少内置的上一年/下一年按钮是我最终没有在我的软件中使用该软件包的主要原因。否则，它是更好的日期选择器之一。

作为替代方案，我推荐**LGoodDatePicker**。它具有用于在年份上向后和向前的按钮，以及用于选择任何所需年份的菜单。公平披露：我是这个项目的主要开发者。请让我知道它是否满足您的需求。

LGoodDatePicker 主页：[https ://github.com/LGoodDatePicker/LGoodDatePicker](https://github.com/LGoodDatePicker/LGoodDatePicker)

在发布部分有一个工作演示（一个可执行的 jar 文件），在 gitub 页面上有一个核心功能列表。

截图如下。

[![在此处输入图像描述](https://i.stack.imgur.com/klyFM.png)](https://i.stack.imgur.com/klyFM.png)

# javascript - 从外部链接打开 Jquery Accordion Menu

> ID：16111945
> 
> 赞同：0
> 
> 时间：2013-04-19T19:14:07.507
> 
> 标签：javascript, jquery

当我单击顶部菜单中的链接时，我无法正确打开 jquery 手风琴侧菜单。对不起，我切换了我的代码。这是我的页面：

这是我的侧导航 JS：

```
function initMenu() {
$('#nav ul').hide();
/*$('#nav ul:first').show();*/
$('#nav li a').click(
function() {
  var checkElement = $(this).next();
  if((checkElement.is('ul')) && (checkElement.is(':visible'))) {
    return true;
    }
  if((checkElement.is('ul')) && (!checkElement.is(':visible'))) {
    $('#nav ul:visible').slideUp('normal');
    checkElement.slideDown('normal');
    return false;
     }
   }
 );
}
$(document).ready(function() {initMenu();}); 
```

我的侧导航 UL LIST

```
<ul id="nav"> 
 <li><a href="#">Item 1</a>    
 <ul>      
<li><a href="#">test1</a></li>      
<li><a href="#">test2</a></li>      
<li><a href="#">test3</a></li>  
 </ul>  
</li> 
<li><a href="#">Item 2</a>  
  <ul>     
   <li><a href="#">Sub-Item 2 a</a></li> 
   <li><a href="#">Sub-Item 2 b</a></li>  
  </ul> 
</li>  
<li><a href="#">Item 3</a>  
   <ul>      
   <li><a href="#">Sub-Item 3 a</a></li>
   <li><a href="test1.shtml">Sub-Item 3 b</a></li>
   <li><a href="#">Sub-Item 3 c</a></li>
   <li><a href="#">Sub-Item 3 d</a></li>
  </ul> 
</li>  
<li><a href="#">Item 4</a>    
<ul>     
 <li><a href="#">Sub-Item 4 a</a></li>
 <li><a href="#">Sub-Item 4 b</a></li>    
 <li><a href="#">Sub-Item 4 c</a></li> 
</ul>  
</li>
</ul> 
```

我要激活的页面

```
<script type='text/javascript'>
google.load('search', '1', {language: 'en', style: google.loader.themes.V2_DEFAULT});
google.setOnLoadCallback(function() {
var customSearchOptions = {};
customSearchOptions['overlayResults'] = true;
var customSearchControl =   new       google.search.CustomSearchControl('008189712368144530774:cd8hgx1d4hk',   customSearchOptions);
customSearchControl.setResultSetSize(google.search.Search.FILTERED_CSE_RESULTSET);
var options = new google.search.DrawOptions();
customSearchControl.draw('cse', options);
}, true);

</head>

<body>

<div id="container">
<div id="topbox">
     <div id="topnav"><!--#include file="topnav.html" --></div>
     <div id='cse'>Loading</div>
</div>
<div id="leftcol">
    <div id="Topleft"><!--#include file="topleftphoto.html" --></div>
    <div id="SideNav"><!--#include file="sidenavdistrict.html" --></div>
</div>
<div id="rightcol">
    <div id="TopRight">Content for  id "topright" Goes Here</div>
    <div id="Body">Content for  id "body" Goes Here</div>
</div>
<div id="Footer">Content for  id "footer" Goes Here</div>
 </div> 
```

关于如何解决这个问题的任何想法都会很棒。我只是在学习如何使用它，所以如果你有帮助，请具体说明应该去哪里。您可以在 www.rsd17.org/test/test/untitled1.shtml 查看实时网站 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T16:45:15.410

不好意思，之前忙没能回复。

你可以这样做：

向两个导航添加 id：

```
<div id="container">
    <div id="topbox">
        <div id="topnav"><ul id="MenuBar1" class="MenuBarHorizontal">
  <li  id="dis"><a class="MenuBarItemSubmenu" href="#">DISTRICT</a>
    <ul>
      <li><a href="test1.shtml">Item 1.1</a></li>
      <li><a href="#">Item 1.2</a></li>
      <li><a href="#">Item 1.3</a></li>
    </ul>
  </li>
  <li  id="sch"><a href="#">SCHOOLS</a></li>
  <li  id="stu"><a class="MenuBarItemSubmenu" href="#">STUDENTS</a>
    <ul>
      <li><a href="#">Item 3.1</a>      </li>
      <li><a href="#">Item 3.2</a></li>
      <li><a href="#">Item 3.3</a></li>
    </ul>
  </li>
  <li id="sta"><a href="#">STAFF</a></li>
  <li><a href="#">PARENTS</a></li>
  <li><a href="#">COMMUNITY</a></li>
  <li><a href="#">CALENDAR</a></li>
  <li><a href="#">QUICKLINKS</a></li>
</ul>

( ... )

<ul id="nav"> 
 <li ><a href="#">Item 1</a>    
  <ul id="i1">      
    <li><a href="#">test1</a></li>      
    <li><a href="#">test2</a></li>      
    <li><a href="#">test3</a></li>  
  </ul>  
</li> 
    <li><a href="#">Item 2</a>  
      <ul  id="i2">     
       <li><a href="#">Sub-Item 2 a</a></li> 
       <li><a href="#">Sub-Item 2 b</a></li>  
      </ul> 
    </li>  
    <li><a href="test1.shtml" id="test1">Item 3</a>  
       <ul id="i3">      
       <li><a href="#" >Sub-Item 3 a</a></li>
       <li><a href="#">Sub-Item 3 b</a></li>
       <li><a href="#">Sub-Item 3 c</a></li>
       <li><a href="#">Sub-Item 3 d</a></li>
      </ul> 
   </li>  
   <li><a href="#">Item 4</a>    
    <ul id="i4">     
     <li><a href="#">Sub-Item 4 a</a></li>
     <li><a href="#">Sub-Item 4 b</a></li>    
     <li><a href="#">Sub-Item 4 c</a></li> 
   </ul>  
   </li>
  </ul> 
```

并使用这个 javascript：

```
<script>
            var ul = document.getElementById('topnav');
            ul.onclick = function(event) {                  
                switch (event.target.parentNode.id){
                    case "dis" : $('#nav ul:visible').slideUp('normal');
                                $('#i1').slideDown('normal');
                                break;

                    case "sch" : $('#nav ul:visible').slideUp('normal');
                                $('#i2').slideDown('normal');                               
                                break;

                    case "stu" : $('#nav ul:visible').slideUp('normal');
                                $('#i3').slideDown('normal');
                                break;

                    case "sta" : $('#nav ul:visible').slideUp('normal');
                                $('#i4').slideDown('normal');
                                break;
                }

            };
</script> 
```

这必须在`<script type='text/javascript' src='nav.js'></script>`

我尝试使用您的页面，每次单击顶部菜单都会打开侧菜单上的相应项目。我想这就是你想要的。但是，这样做您必须为交换机上的每个项目添加新代码。试试看 ;）

编辑 - - - - - - - - - - - - - - - - - - - - - - - - - -

我会假设页码的名称将打开相应的项目。（地区 1 将打开项目 1，地区 2 将打开项目 2，学校 1 将打开项目 1，等等）

也总是使用 ids i1, i2, i3... 作为侧边菜单，你不需要像学生那样需要 i6、i7 等。

如果您总是更改页面，则不需要以前的代码，只需这个。

```
$('#body').ready(function(){
                var URL = location.pathname;

                for(var i = 0; i < 4; i++){ // 4 = number of items, if you add more increase it
                    if(URL.indexOf(i) != -1){
                        $('#nav ul:visible').slideUp('normal');
                        $('#i'+i).slideDown('normal');
                    }
                }
            }); 
```

不要忘记这必须在之后 `<script type='text/javascript' src='nav.js'></script>`。

# python - 通过python操作网站上的多个选择框不会触发POST请求

> ID：16111946
> 
> 赞同：1
> 
> 时间：2013-04-19T19:14:09.313
> 
> 标签：python, dom, select, onchange

我正在尝试通过 python 以编程方式操作内部网站。它实际上在大多数情况下都有效，但是在每个框的值发生更改后，我一直试图触发 POST 请求。我可以在 Chrome 调试器中看到，在我单击其中一个选择框中的值后发出了 POST 请求。

例如，有三个选择框，每个选择框都依赖于最后一个。

1.  在选择框 A 中选择一个值时，选择框 B 将通过 AJAX 填充。
2.  当在选择框 B 中选择一个值时，选择框 C 将通过 AJAX 填充。

选择框 A 中的项目在页面加载时静态加载。我可以遍历那些没有问题的。

```
import win32com.client
ie = win32com.client.DispatchEx("InternetExplorer.Application")
ie.Navigate("...")

# stuff to see if the page loaded...

boxAObj = doc.getElementById("selectBoxA")
for i in range(1,boxAObj):
    # I've tried this multiple ways - none have triggered the request
    boxAObj.options.selectedIndex = i

    boxBObj = doc.getElementById("selectBoxB")
    print boxBObj.length 
```

print 语句总是打印 1。在选择框“Select...”中有一个默认值，所以长度为 1。

以下是该网站的一些图像以显示该行为。第一个是在新页面加载之后，鼠标或通过 javascript 没有选择任何内容。

* * *

![重新加载](https://i.stack.imgur.com/UW89w.png)

* * *

在这张图片中，我使用 javascript 以编程方式在选择框 A 中选择了一个项目，但在选择框 B 中没有加载任何内容：

* * *

![Javascript 选择了一个值](https://i.stack.imgur.com/q6AdW.png)

* * *

在这张图片中，我在选择框 A 中单击了相同的值，您可以看到选择框 B 按预期填充：

* * *

![已点击](https://i.stack.imgur.com/12WcR.png)

* * *

最后一条信息是选择框具有分配给它们的 onchange 事件。这是解决这个问题的关键吗？

* * *

![改变](https://i.stack.imgur.com/SF7Mt.png)

* * *

编辑：我刚刚发现一个帖子显示来自 javascript 的 obj.onchange() 应该可以解决问题，它适用于浏览器，但不适用于 python。我应该尝试评估python中的函数吗？我已经尝试了一些东西，但还没有任何效果。见下文：

* * *

![来自python的onchange](https://i.stack.imgur.com/05RuX.png)

* * *

# c# - 如何在复合模型上应用必需属性？

> ID：16111950
> 
> 赞同：5
> 
> 时间：2013-04-19T19:14:16.583
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3

我正在对模型中的字段使用复合类型。

我的模型中有一个名为 PersonDetails 的字段

```
public Phone PhoneDetails{get;set;} 
```

Phone 是另一种模型，包含其他三个字段

```
int MobilePhone;
int WorkPhone;
int HomePhone; 
```

PersonDetails 是我传递给添加弹出窗口的模型。PersonDetails 具有以下字段：

```
public String Name{get;set;}
public Phone PhoneDetails{get;set;} 
public string Address{get;set;} 
```

我可以将`Required`字段属性应用于剩余字段，但我想将`Required`属性应用于`PhoneDetails`字段。条件是MobilePhone、WorkPhone 或HomePhone 这三者中的至少一个应该具有值。

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-03T15:31:42.480

一种方法是实现 IValidatableObject：

```
public class PersonDetails : IValidatableObject
{
    public string Name { get; set; }
    public Phone PhoneDetails { get; set; }
    public string Address { get; set; }

    public IEnumerable<ValidationResult> Validate(ValidationContext validationContext)
    {
        if (PhoneDetails.MobilePhone == 0 && PhoneDetails.WorkPhone == 0 && PhoneDetails.HomePhone == 0)
            yield return new ValidationResult("Please enter at least 1 phone number", new[] { "PhoneDetails" });
    }
} 
```

如果没有输入，您的表格将显示“请输入至少 1 个电话号码”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-03T18:01:18.550

对于这种类型的验证，我总是使用 FluentValidation。

它允许比属性/注释更复杂的验证场景，并且与 MVC（以及所有一般的 .NET 代码）非常兼容

使用[NuGet](http://nuget.org/packages/FluentValidation.MVC4/)将其添加到您的项目中 - 提供了大量示例和文档。

# html - CSS悬停不起作用

> ID：16111955
> 
> 赞同：1
> 
> 时间：2013-04-19T19:14:29.410
> 
> 标签：html, css, html-table, hover

这是我的代码。我做了这个——当我悬停表格单元格时，它的背景图像会发生变化，这很容易。但是我想这样做，当我在第一个表中将带有 class="down" 的单元格 5 悬停时，第二个表显示属性从无变为块我搜索了这个，我最终得到了所有这些代码，但它不起作用. 我需要使用没有 JavaScript 的纯 CSS。问题出在哪里，我做错了什么？

HTML

```
 <table border="0" class="table">
    <tr>
      <td>1</td>

      <td>2</td>

      <td>3</td>

      <td>4</td>

      <td class="down">5</td>
    </tr>
  </table>

  <table border="0" class="table2">
    <tr>
      <td>row2</td>
    </tr>

    <tr>
      <td>row3</td>
    </tr>
  </table> 
```

CSS

```
.table
{
    left:200px;
    position:absolute;
}

td
{
    background-image:url(poga1.png);
    height:70px;
    width:100px;
}

td:hover
{
    -webkit-transition:1s;
    background-image:url(poga2.png);
}

.table2
{
    display:none;
    left:616px;
    position:absolute;
    top:77px;
}

.down:hover .table2
{
    display:block;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T19:23:53.243

该行`.down:hover .table2`正在寻找带有 class的元素`table2` *内*的带有 class 的元素`down`。如果您的表格是嵌套的，您只能在纯 CSS 中做您想做的事情。以下是使用 jQuery 执行所需操作的方法：

```
$(document).ready(function() {
    $('.down').hover(function() {
        $('.table2').show();
    }, function() {
        $('.table2').hide();
    });
}); 
```

这是一个演示：http: [//jsfiddle.net/mchail/b6PKT/](http://jsfiddle.net/mchail/b6PKT/)

我在元素上添加了一个边框，`td`以便更容易看到您的悬停事件应该何时触发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T19:28:37.667

除非 Table2 是 Table1 的子级，否则您无法用 CSS 真正做到这一点。不过，它可以用 JavaScript 轻松完成（在本例中使用 jQuery）。在这里查看我的示例：

[http://jsfiddle.net/Pb8dw/1/](http://jsfiddle.net/Pb8dw/1/)

```
$(document).ready(function() {
    $(".down").mouseover(function(){
        $(".table2").show();
    });

    $(".down").mouseout(function(){
        $(".table2").hide();
    });
}); 
```

这是在悬停时进行隐藏/显示的代码块。我冒昧地更新了您的源代码，以便更容易看到。

更新：如果您绝对，肯定地，必须在没有 JavaScript 的情况下这样做，那么仅使用 CSS 和 HTML 会如何：

[http://jsfiddle.net/Pb8dw/2/](http://jsfiddle.net/Pb8dw/2/)

# css - CSS输入：只关注第一次点击

> ID：16111966
> 
> 赞同：1
> 
> 时间：2013-04-19T19:15:03.820
> 
> 标签：css, input, focus

有谁知道输入方法：仅在第一次单击时聚焦元素？

```
<style>
input[type='text'].error:focus{border-color:#f00} 
</style> 
```

因此，如果用户“聚焦”它会返回到原始边框颜色。

提前感谢您的任何提示。

**编辑**

我完全不确定。谢谢@blender。

我认为最简单的方法是使用 jquery 或类似方法，对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T19:53:05.557

我对“仅在第一次单击时”的意思感到困惑。如果你想在点击时设置输入样式，你可以使用这个 CSS：

```
input[type="text"].error:focus { border-color: #f00; } 
```

这个HTML：

```
<input type="text" class="error" /> 
```

这将设置输入边框的样式，因为它具有错误类（如果您正在动态添加/删除类）。

但是，如果您正在为错误设置样式（例如，如果用户没有填写表单），您可能想尝试这样的事情：

```
 input[type="text"]:invalid { border-color: #f00; }

 input[type="text"]:valid{ border-color: #; } //If form is filled in 
```

然后在您的 HTML 中：

```
<input type="text" required /> 
```

这有助于回答你的问题吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T20:52:57.827

对于所有有相同或类似问题的人，这里有一个可能的 jQuery 解决方案：

```
 $('input').on('focusout',function(){
 $(this).removeClass('error');
 }); 
```

这将删除 :focus out 上的错误类。当用户 :focusin 再次输入元素时，它会返回默认颜色。

带有 css 的默认边框颜色示例：

```
 <style>
  input[type='text']:focus {border-color: black;}
 </style> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T20:02:45.530

正如@Blender 所说，这在纯 CSS 中似乎是不可能的。
我建议处理事件以将类添加到元素`focusin`并`focusout`使用`data-`属性来获取元素是否已被单击。

看看这个[jsFiddle。](http://jsfiddle.net/cEYN6/)

# jsf - 单击按钮时无法导航到下一页（JSF）

> ID：16111970
> 
> 赞同：1
> 
> 时间：2013-04-19T19:15:22.527
> 
> 标签：jsf, commandbutton

我目前正在学习jsf。我编写了一个简单的 jsf 应用程序，我的目标是从一个页面导航到另一个页面。但是，我根本无法导航。

在我的代码中有两个 jsp 文件；一个是`createcustomer.jsp`，另一个是`viewCustomerDetails`。用户输入数据`createcustomer.jsp`并单击按钮后，它应该移动到下一页（它将在此页面的上一页中显示输入的数据）。

下面是我的代码。谁能找到我哪里出错了？<

**创建客户.jsp**

```
 <%@ page language="java" contentType="text/html; charset=ISO-8859-1" pageEncoding="ISO-8859-1"%>
<%@ taglib prefix="f"  uri="http://java.sun.com/jsf/core"%>
<%@ taglib prefix="h"  uri="http://java.sun.com/jsf/html"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
</head>
<body>
<table>
<tr>
<td>
<h1 style="background-color:blue;color:white;">Create a new Customer</h1>
</td>
</tr>
</table>
<f:view>
<table>
<tr><td>Name:</td><td><h:inputText value="#{customer.name}"></h:inputText></td></tr>
<tr><td>Address:</td><td><h:inputText value="#{customer.address}"></h:inputText></td></tr>
<tr><td>Phone Number:</td><td><h:inputText value="#{customer.phNumber}"></h:inputText></td></tr>
<tr><td>Email Address:</td><td><h:inputText value="#{customer.email_id}"></h:inputText></td></tr>

</table>
<table>
<tr><td></td></tr>
<tr><td></td></tr>
<tr><td><h:commandButton value="Create Customer" action="viewCustomerDetails" /></td></tr>
</table>
</f:view>
</body>
</html> 
```

**人脸配置.xml**

```
<faces-config
    xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd"
    version="2.0">

   <managed-bean>
   <managed-bean-name>customer</managed-bean-name>
   <managed-bean-class>com.app.view.Customer</managed-bean-class>
   <managed-bean-scope>request</managed-bean-scope>
</managed-bean>

   <navigation-rule>
   <from-view-id>/createcustomer.jsp</from-view-id>
   <navigation-case>
    <!--  <from-action>#{customer.validate}</from-action>  --> 
   <from-outcome>viewCustomerDetails</from-outcome>
   <to-view-id>/viewCustomerDetails.jsp</to-view-id>
   </navigation-case>

</navigation-rule>

</faces-config> 
```

**web.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" version="3.0">
  <display-name>Customer</display-name>
  <servlet>
    <servlet-name>Faces Servlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>/faces/*</url-pattern>
  </servlet-mapping>
  <context-param>
    <param-name>javax.servlet.jsp.jstl.fmt.localizationContext</param-name>
    <param-value>resources.application</param-value>
  </context-param>
  <context-param>
    <description>State saving method: 'client' or 'server' (=default). See JSF Specification 2.5.2</description>
    <param-name>javax.faces.STATE_SAVING_METHOD</param-name>
    <param-value>client</param-value>
  </context-param>
  <context-param>
    <description>
    This parameter tells MyFaces if javascript code should be allowed in
    the rendered HTML output.
    If javascript is allowed, command_link anchors will have javascript code
    that submits the corresponding form.
    If javascript is not allowed, the state saving info and nested parameters
    will be added as url parameters.
    Default is 'true'</description>
    <param-name>org.apache.myfaces.ALLOW_JAVASCRIPT</param-name>
    <param-value>true</param-value>
  </context-param>
  <context-param>
    <description>
    If true, rendered HTML code will be formatted, so that it is 'human-readable'
    i.e. additional line separators and whitespace will be written, that do not
    influence the HTML code.
    Default is 'true'</description>
    <param-name>org.apache.myfaces.PRETTY_HTML</param-name>
    <param-value>true</param-value>
  </context-param>
  <context-param>
    <param-name>org.apache.myfaces.DETECT_JAVASCRIPT</param-name>
    <param-value>false</param-value>
  </context-param>
  <context-param>
    <description>
    If true, a javascript function will be rendered that is able to restore the
    former vertical scroll on every request. Convenient feature if you have pages
    with long lists and you do not want the browser page to always jump to the top
    if you trigger a link or button action that stays on the same page.
    Default is 'false'
</description>
    <param-name>org.apache.myfaces.AUTO_SCROLL</param-name>
    <param-value>true</param-value>
  </context-param>
  <listener>
    <listener-class>org.apache.myfaces.webapp.StartupServletContextListener</listener-class>
  </listener>
</web-app> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T19:21:01.510

显然，根据您的代码片段，您没有`<h:form>`定义标签。诸如`<h:commandButton>`需要在其中定义的组件才能正常运行。把你`<f:view>`里面的内容包起来，`<h:form>`然后再试一次。

# api - Google 安全浏览 V2 实现中的哈希计算

> ID：16111978
> 
> 赞同：0
> 
> 时间：2013-04-19T19:15:45.667
> 
> 标签：api, sha256, safe-browsing

我正在尝试测试我的 google 安全浏览 api 版本 2 的实现。为了测试我的代码的一部分，该代码发送给定前缀的完整哈希请求，我捕获了一小段流量，我访问了一个已知的当前列入黑名单的 url “ utfvq.portrelay.com”和 Firefox 向 google 发送了完整哈希的请求，谷歌以哈希列表作为响应。

firefox 发送的前缀是（十六进制编码）：`2e2e372e,2e26382e,2e2e382e,6545382e`

它收到的 4 个匹配的完整哈希是：

```
2e26382e2e2e436d2e2e2e2e322e3b2e2e2e2e2e4a2e2e2e7b2e2e2e6a492e2e
6545382e2e2a5b792e652e2e2e2e2e2e2e2e70442e7d2e2e2e222e2e502e2e2e
2e2e382e6c36252e2e522e2e592e2e2e2e2e3f592e2e2e782e2e572e4e2e2e2e
2e2e372e2e2e2e2e55682e542e51622e552e2e68352e2e2e2e2e2e2e2ed2755 
```

然而，在我的实现中，我生成的哈希前缀似乎与 firefox 发送的哈希前缀不匹配。因此，我的客户端没有得到任何完整的哈希匹配。

我已经密切关注谷歌对 API 的描述，并确保正确实施了前面的步骤，例如 url 规范化。

我得到的 url，SHA256 哈希是

utfvq.portrelay.com/：`5c2383012676e63656c13167e1cc4f55309c4e1b73c22556e36ec1487e8b8697`

portrelay.com/：`842638fe92ee436da7808d0232d03bcaa0f5c8b64ad5eee97bf28dbb6a49f8ae`

有人可以指出为什么哈希不匹配。据我所知，我已遵循 API 指南。我缺少一些实现细节吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T18:11:09.900

结果证明这是我的基本字符编码错误。

我在代码中计算的 SHA 哈希值是正确的。我查看 Firefox 发送的哈希值的方式是错误的。我从一个文本文件中复制了字符，该文件将任何不在常规 ascii 范围内的字节存储为点（。）。然后我将这些转换为十六进制值，这是一种“有损”编码。这就是为什么哈希中有这么多“2e”十六进制字符的原因。现在我只使用原始字节并且它们匹配。

# sql - 返回一列的所有不同值，包括 null，然后根据条件计数

> ID：16111980
> 
> 赞同：0
> 
> 时间：2013-04-19T19:15:57.260
> 
> 标签：sql, join, null, subquery

这是我的一个更大的查询。我想返回所有利润中心的列表，其中包含日期范围内的事件计数。我希望列出利润中心，即使在日期范围内没有报告任何事件。这一直运作良好。

然而，现在已经引入了一些利润中心为 NULL 的记录。我希望那些在列表中显示为“N/A”以及 NULL 的事件计数。

```
SELECT DISTINCT cast(plants.profit_ctr as varchar(50)) + ' - ' + cast(plants.profit_ctr_name as varchar(50)) AS Profit_Center, COALESCE(h.Incident_Count, 0) AS Incident_Count 
FROM JMART.[safety].vwHELPForms AS plants
LEFT OUTER JOIN
(SELECT profit_ctr, COUNT(*) AS Incident_Count
FROM JMART.[safety].vwHELPForms 
WHERE cast(rec_date as date) >= cast(@startdate as date) 
AND cast(rec_date as date) <= cast(@enddate as date) AND ratings > 0 
GROUP BY  profit_ctr) AS h
ON h.profit_ctr = plants.profit_ctr 
```

我怎样才能做到这一点？

*编辑*

如果我跑

```
SELECT profit_ctr, COUNT(*) AS Incident_Count
FROM JMART.[safety].vwHELPForms 
WHERE cast(rec_date as date) >= cast(@startdate as date) 
AND cast(rec_date as date) <= cast(@enddate as date) AND ratings > 0 
GROUP BY  profit_ctr 
```

我明白了

```
NULL    295
101100  7483
101150  116
101200  445
101400  3784 
```

我试过了

```
SELECT DISTINCT cast(plants.profit_ctr as varchar(50)) + ' - ' + cast(plants.profit_ctr_name as varchar(50)) AS Profit_Center, 
COALESCE((SELECT COUNT(*) AS Incident_Count FROM JMART.[safety].vwHELPForms AS h
WHERE profit_ctr = plants.profit_ctr AND cast(rec_date as date) >= cast(@startdate as date) 
AND cast(rec_date as date) <= cast(@enddate as date) AND ratings > 0 
GROUP BY  profit_ctr), 0) AS Incident_Count
FROM JMART.[safety].vwHELPForms AS plants 
order by Profit_Center 
```

这给了我（与我目前得到的相同）

```
NULL    0
101100      7483
101150  116
101200      445
101400      3784 
```

我想

```
N/A     295
101100      7483
101150  116
101200      445
101400      3784 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T20:13:15.290

NULL 值将进入连接中的第二个表，而不是第一个表。因此，它们被`left outer join`. 相反，您想使用`full outer join`：

```
SELECT DISTINCT
       coalesce(cast(plants.profit_ctr as varchar(50)) + ' - ' + cast(plants.profit_ctr_name as varchar(50)), 'N/A') AS Profit_Center,
       COALESCE(h.Incident_Count, 0) AS Incident_Count 
FROM JMART.[safety].vwHELPForms plants full OUTER JOIN
     (SELECT profit_ctr, COUNT(*) as Incident_Count
      FROM JMART.[safety].vwHELPForms 
      WHERE cast(rec_date as date) >= cast(@startdate as date) AND
            cast(rec_date as date) <= cast(@enddate as date) AND ratings > 0 
      GROUP BY  profit_ctr
     ) h
     ON h.profit_ctr = plants.profit_ctr 
```

假设表`profit_ctr`中没有重复，`plants`则可以省去`distinct`. 它增加了不必要的处理，可能不需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T19:59:03.420

由于您使用的是`LEFT JOIN`，因此空利润中心将在结果中显示为`NULL`。并且由于您正在使用`DISTINCT`它们，它们将被折叠成一行。对于`Incident_Count` 您可以使用的列`coalesce(cast(h.Incident_Count as varchar(50)), 'N/A')`

PS。我假设您使用的是 MS SQL Server 2012。

# asp.net-mvc - 检查是否所有数据都已从 Knockout 中的服务器返回

> ID：16111984
> 
> 赞同：0
> 
> 时间：2013-04-19T19:16:20.937
> 
> 标签：asp.net-mvc, knockout.js, knockout-2.0

我在用户页面上显示来自用户的数据，并且我想在加载所有数据并且没有更多数据可以使用敲除从服务器检索时通知用户。

**淘汰赛脚本**

```
 $.views.Roster.GetPage = function ( pageNumber) {
        $.grain.Ajax.Get({
            Url: Views.Roster.Properties.Url,
            DataToSubmit: { pageNumber: pageNumber, id: Views.Roster.Properties.Id },
            DataType: "json",
            OnSuccess: function (data, status, jqXHR) {
                $.views.Roster.RosterViewModel.AddUsers(data);
            },
            OnError: function (jqXHR, status, errorThrown) {
                var _response = $.parseJSON(jqXHR.responseText);
                $.pnotify({ title:_response.title, text: _response.Message, type: _response.TypeString});
            }
        });
    };
    $.views.Roster.ViewModel = {
        RosterUsers: ko.observableArray([]),
        TotalRoster: null,
        CurrentPage: ko.observable(1)
    };

$.views.Roster.BindModel = function (data) {
        var self = $.views.Roster.ViewModel;

        $.views.Roster.ViewModel.TotalRoster = ko.computed(function () {
            return self.RosterUsers().length;
        });

        $.views.Roster.RosterViewModel.AddUsers(data);
        ko.applyBindings($.views.Roster.ViewModel);
    }
    Next = function () {
        var _page = $.views.Roster.ViewModel.CurrentPage() + 1;
        $.views.Roster.ViewModel.CurrentPage(_page);
        $.views.Roster.GetPage(_page);
    };

    $.views.Roster.RosterViewModel = function (data) {
        $.views.Roster.RosterViewModel.AddUsers(data);
    };

    $.views.Roster.RosterViewModel.AddUsers = function (data) {
        $.each(data, function (index, value) {
            $.views.Roster.RosterViewModel.PushUser(value);
        });
    };

    $.views.Roster.RosterViewModel.PushUser = function (user) {
        $.views.Roster.ViewModel.RosterUsers.push(new $.views.Roster.UserViewModel(user));
    }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T19:36:45.183

当您说“加载所有数据后”时，我假设您的意思是当 GetPage 方法完成加载单个用户页面时，因为这是我在上面的代码中看到的唯一数据加载。这是您可以做到的一种方法：

首先，在可以绑定的地方创建一个可观察对象，以告诉用户是否正在加载数据

```
$.views.Roster.ViewModel = {
    RosterUsers: ko.observableArray([]),
    TotalRoster: null,
    CurrentPage: ko.observable(1),
    DataIsLoading: ko.observable(false)
}; 
```

并添加一些标记，在数据加载时在 UI 中显示某些内容

```
<div data-bind="visible:DataIsLoading">Data is Loading, please wait...</div> 
```

然后在进行ajax调用之前设置DataIsLoading，然后在调用完成时重置它

```
$.views.Roster.GetPage = function ( pageNumber) {
    $.views.Roster.ViewModel.DataIsLoading(true);  // Add this!
    $.grain.Ajax.Get({
        Url: Views.Roster.Properties.Url,
        DataToSubmit: { pageNumber: pageNumber, id: Views.Roster.Properties.Id },
        DataType: "json",
        OnSuccess: function (data, status, jqXHR) {
            $.views.Roster.RosterViewModel.AddUsers(data);
            $.views.Roster.ViewModel.DataIsLoading(false);  // Add this!
        },
        OnError: function (jqXHR, status, errorThrown) {
            var _response = $.parseJSON(jqXHR.responseText);
            $.pnotify({ title:_response.title, text: _response.Message, type: _response.TypeString});
            $.views.Roster.ViewModel.DataIsLoading(false);  // Add this!
        }
    });
}; 
```

# multithreading - WinForm 中的线程

> ID：16111985
> 
> 赞同：-1
> 
> 时间：2013-04-19T19:16:24.293
> 
> 标签：multithreading, winforms

我的应用程序中的所有内容都按我想要的方式工作，但我真的不明白到底是怎么回事？我设置了几个线程来监控应用程序不时需要的一些资源。线程更新了几个标签，说“一切都好”或“哦”（不是真的，但你明白了）。我设置了 InvokeRequired 的测试，以确保它在创建标签的线程上执行并且一切正常。

我不明白的是......如果我在更新标签时输入文本框，我不应该在我的输入中看到某种滞后，因为它在同一个线程上，或者至少必须实现一些代码所以我可以继续输入我离开的地方？我的猜测是 Invoke 方法会处理一些事情，所以我可以继续输入我离开的地方。

它正在工作，所以我不应该抱怨，但我不希望一个月后出现一些我真的不明白的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T19:39:01.927

简短的回答：没有什么可担心的。

说明：几乎所有现存的 GUI 系统，包括 WinForms，都是单线程的，所以什么都不会同时发生，但也要考虑到大多数操作也非常快（甚至绘画）。

更好的解释会解释 GUI 消息循环是如何工作的，但我懒得解释它，但我会解释你说你不明白的部分。这是您在文本框中键入时的事件序列：

1.  根窗口接收到的按键消息（通过其消息循环）
2.  按键消息从根窗口发送到文本框
3.  文本框收到的按键消息。文本框通过将新字符附加到其内部`Value`字符串来更新其内部状态。
4.  文本框通知父窗口该文本框需要在下一个最近的机会重新绘制，因为它的文本值已更改。
5.  根窗口得到下一条消息：这是一个执行方法调用的请求（因为`Invoke`或被`BeginInvoke`另一个线程调用）。
6.  根窗口执行这个调用方法。
    1.  在这种情况下，你`Invoke`的代码，据我所知，只是设置`Text`标签的属性，这个操作很快，因为它只是设置标签的内部状态，它不会导致它直接被绘制，而是（如第 4 步），它将标签标记为“无效”，并且必须在下一个最佳时机重新绘制（参见第 8 步）。
7.  根窗口收到下一条消息：重绘文本框的请求
8.  根窗口指示文本框重新绘制自身
9.  根窗口获取下一条消息，或者处于空闲状态等待接收下一条消息

所以是的，*消息*周期可能存在滞后或延迟，例如，如果您`Invoke`的 'd 代码需要超过几毫秒的时间才能执行。如果您添加`Thread.Sleep(10*1000)`Invoke'd 代码，您会看到。

# javascript - 为多个控件注册一次的事件处理程序 - 可能吗？

> ID：16111988
> 
> 赞同：0
> 
> 时间：2013-04-19T19:16:42.393
> 
> 标签：javascript, jquery-mobile

1.  JQM 页面“操作员修改”。
2.  在页面内形成“用户表单”。
3.  表单内的一些控件（文本输入等）。

是否可以为这些控件注册一次事件处理程序？跟踪表单控件内部的任何更改会很棒。如果可能的话 - 怎么做？

下面的代码片段：

```
<div data-role="page" id="operator-modify" data-theme="b">

    <div data-role="content">

        <form id="user-form">
            <label for="user-id-name">ID:</label>
            <input type="text" name="user-id-name" id="user-id-m" data-clear-btn="true"/>
            <label for="user-title-name">Name:</label>
            <input type="text" name="user-title-name" id="user-title-m" data-clear-btn="true"/>
            <label for="user-role-name">Role:</label>
            <input type="text" name="user-role-name" id="user-role-m" data-clear-btn="true"/>
        </form>
    </div>
</div> 
```

注册 3 个相同的事件处理程序并不难，但似乎不灵活的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T19:39:28.310

您可以通过以下方式使用事件委托：

```
$("#user-form").on("click", 'input[type="text"]', function (e) {
    // `this` refers to the element that was clicked
    // `e.delegateTarget` refers to the element this event is actually bound to (the form)
}); 
```

**演示：http:** [//jsfiddle.net/Nz6e8/](http://jsfiddle.net/Nz6e8/)

它绑定了一个`click`事件（到`form[id="user-form"]`元素），但只针对其中的`input[type="text"]`元素执行。

根据您想要将事件绑定到什么以及您想要定位什么，您可以更改选择器，但应该完成您想要的。

参考：

*   [http://api.jquery.com/on/#direct-and-delegated-events](http://api.jquery.com/on/#direct-and-delegated-events)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T19:40:08.887

是的你可以。试试这个[http://jsfiddle.net/UC952/](http://jsfiddle.net/UC952/)

```
$('input[type="text"]', 'div[data-role="content"]').keydown(function () {
    console.log($('label[for="' + $(this).attr("name") + '"]', 'div[data-role="content"]').text() + ' changed.');
}); 
```

还有一个更通用的：-`event.target`将为您提供触发表单内事件的元素。

```
$('#user-form').keydown(function (event) {
   var elem = $(event.target);
    console.log($('label[for="' + elem.attr("name") + '"]', 'div[data-role="content"]').text() + ' changed.');
}); 
```

# jquery - 向上或向下按下时，jQuery 动画会跳转到父级的顶部。适用于左右

> ID：16111991
> 
> 赞同：0
> 
> 时间：2013-04-19T19:17:04.350
> 
> 标签：jquery, animation, key-bindings

我正在尝试制作一个有趣的太空射击游戏。我为我的宇宙飞船的位置设置了动画，但是当我向上或向下按时，它会跳到父元素的顶部。我注意到这样做会覆盖css“底部”属性。有人知道如何解决这个问题吗？

这是我的代码：

```
$(document).keydown(function(key) {
    switch(parseInt(key.which)) {
        case up:
            $('#ship').animate({top: "-=100px"}, '10', 'linear');
            break;

        case down:
            $('#ship').animate({top: "+=100px"}, '10', 'linear');
            break;

        case left:
             $('#ship').animate({left: "-=100px"}, '10', 'linear');
            break;

        case right:
            $('#ship').animate({left: "+=100px"}, '10', 'linear');
            break;
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T19:20:01.380

您必须指定`top`or `bottom`，但不能同时指定两者，因为一次只能激活一个。如果你有一个`bottom`值，然后你设置了一个`top`值，你将不会从原来的位置平滑移动，因为它会从默认值动画到你的小于值，这将导致它立即跳转到`top`然后动画从那里。`0``100px``top:0`

如果您要最初指定`bottom`并希望从中平滑动画，则为`bottom`值设置动画，而不是`top`值。

因此，要么将您的初始 CSS 更改为使用`top`，`bottom`要么将您的代码更改为 animate `bottom`。在两者之间保持一致，您将不会在制作动画时看到跳跃。

# php - 检查客户是否在首页？

> ID：16111992
> 
> 赞同：0
> 
> 时间：2013-04-19T19:17:07.980
> 
> 标签：php

如何检查客户是否在首页？

我试过的

```
$CURRENT_URL = "http://". $_SERVER['HTTP_HOST'] . $_SERVER['REQUEST_URI'];
if($CURRENT_URL == "http://domain.com")
{
...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T19:19:32.943

`$_SERVER['REQUEST_URI']`总是以 a 开头`/`。即使你在*主页上*。因此，您将在您正在测试的域中添加这个斜线：

```
$CURRENT_URL = "http://". $_SERVER['HTTP_HOST'] . $_SERVER['REQUEST_URI'];
if($CURRENT_URL == "http://domain.com/") { // ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T19:21:44.717

只需检查请求 URI：

```
if ($_SERVER["REQUEST_URI"] === "/") 
```

# ruby-on-rails - 友好 ID 随机网址

> ID：16111993
> 
> 赞同：2
> 
> 时间：2013-04-19T19:17:12.123
> 
> 标签：ruby-on-rails, friendly-url, friendly-id

我正在为我的网站使用友好，目前我让它在 url 中显示标题

IE：`/articles/hello-world`

但是说当我创建页面时，它会生成一个随机数，以避免重复

IE： `/articles/75475848`

我知道如果我摆脱友好的 id 它会显示数字，但它会

/文章/1

/文章/2

ETC...

基本上我如何让它显示`/articles/23456789(random number)`而不是`/articles/hello-world`

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T19:47:32.073

似乎为每篇文章生成一个 UUID（通用唯一标识符）对您来说可能是一个很好的解决方案。

Ruby 标准库为我们提供了一个生成 UUID 的方法，因此您需要做的就是创建一个数据库字段，然后使用`before_save`回调为每篇文章提供自己的 UUID。像这样：

```
class Article < ActiveRecord::Base
  before_save :set_uuid

  def set_uuid
    self.uuid = SecureRandom.uuid if self.uuid.nil?
  end
end 
```

**编辑：**根据@olleolleolle 的评论，不需要外部依赖！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T19:31:04.880

来自 FriendlyID 文档：

```
class Person < ActiveRecord::Base
  friendly_id :name_and_location
  def name_and_location
    "#{name} from #{location}"
  end
end

bob = Person.create! :name => "Bob Smith", :location => "New York City"
bob.friendly_id #=> "bob-smith-from-new-york-city" 
```

因此，如果您提供一种`friendly_id`生成随机数的方法，则该方法将用于生成 slug。

# angularjs - 在“ng-repeat”迭代中使用 AngularJs“ng-style”

> ID：16111994
> 
> 赞同：37
> 
> 时间：2013-04-19T19:17:14.453
> 
> 标签：angularjs, angularjs-ng-repeat, ng-style

我正在尝试使用 ng-style 根据它们的值有条件地设置表中数据元素的颜色。每行数据都是使用 ng repeat 生成的。

所以我有类似的东西：

```
<tr ng-repeat="payment in payments">
  <td ng-style="set_color({{payment}})">{{payment.number}}</td> 
```

以及我的控制器中的一个函数，它执行以下操作：

```
$scope.set_color = function (payment) {
  if (payment.number > 50) {
    return '{color: red}'
  }
} 
```

我尝试了几种不同的方法。甚至将颜色设置为支付对象中的数据属性，但似乎我无法获得 ng 样式来处理来自数据绑定的数据，有谁知道我可以做到这一点的方法吗？谢谢。

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2013-04-19T19:30:01.283

不要在[Angular 表达式](http://docs.angularjs.org/guide/expression)中使用 {{}} ：

```
<td ng-style="set_color(payment)">{{payment.number}}</td> 
```

从您的函数返回一个对象，而不是字符串：

```
$scope.set_color = function (payment) {
  if (payment.number > 50) {
    return { color: "red" }
  }
} 
```

[小提琴](http://jsfiddle.net/mrajcok/J5BGq/)

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2014-09-03T11:07:45.970

使用此代码

```
<td style="color:{{payment.number>50?'red':'blue'}}">{{payment.number}}</td> 
```

或者

```
<td ng-style="{'color':(payment.number>50?'red':'blue')}">{{payment.number}}</td> 
```

例如蓝色

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-05-21T06:59:46.317

它可能对你有帮助！

```
<!DOCTYPE html>
<html>

<head>
  <style>
    .yelloColor {
      background-color: gray;
    }
    .meterColor {
      background-color: green;
    }
  </style>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular.min.js"></script>
  <script>
    var app = angular.module('ngStyleApp', []);
    app.controller('ngStyleCtrl', function($scope) {
      $scope.bar = "48%";
    });
  </script>
</head>

<body ng-app="ngStyleApp" ng-controller="ngStyleCtrl">
  <div class="yelloColor">
    <div class="meterColor" ng-style="{'width':bar}">
      <h4> {{bar}} DATA USED OF 100%</h4>
    </div>
  </div>
</body>

</html> 
```