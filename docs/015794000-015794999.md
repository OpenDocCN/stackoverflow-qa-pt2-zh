# StackOverflow 问答 15794000-15794999

# bash - git 用户在 GitLab 安装期间无法执行 bundle

> ID：15794000
> 
> 赞同：2
> 
> 时间：2013-04-03T17:24:52.943
> 
> 标签：bash, debian, bundler, gitlab

我正在尝试在 Debian Wheezy 上安装 GitLab，但遇到了一个我不明白的问题。

按照 5.0 版的[安装指南](https://github.com/gitlabhq/gitlabhq/blob/5-0-stable/doc/install/installation.md)：

*   第 1 步：按照说明运行
*   第 2 步：我改用 rvm（多用户安装）（ruby-1.9.3-p392）
*   步骤 3 到 5：按照说明运行（选择 MySQL）
*   第 6 步：一切正常，直到“安装 Gems”部分出现以下错误：

```
/home/git/gitlab$ sudo -u git -H bundle install --deployment --without development test postgres
sudo: 无法执行 /usr/local/bin/bundle: 没有那个文件或目录

```

我以我的普通用户（在`sudo`and`rvm`组中）运行它，并且`git`用户不是`sudo`er。

我认为`sudo gem install bundler`第 2 步中的行并没有授予`git`用户正确执行 bundle 的权限，但我不知道如何解决这个问题。

我可能做错了什么，但无法弄清楚它是什么，因为我试图尽可能地尊重标准说明。

对此有任何线索吗？谢邀，希望渺茫。。。

有关信息，我已经写信给 GitLab 邮件列表关于这个问题，但没有得到任何答复。此外，上次我在 ServerFault 上问过类似的问题时，有人建议我改为在 StackOverflow 上发帖……因此这个问题 :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T12:03:53.750

> 当我这样做时`$ which bundle`，我得到了`/usr/local/rvm/gems/ruby-1.9.3-p392/bin/bundle`。用户已使用标志创建，
> 因此我无法登录以运行。 当我这样做时，我得到`git``--disabled-login``git``bundle`
> `$ sudo -u git bundle`

```
sudo: unable to execute /usr/local/bin/bundle: No such file or directory 
```

这意味着 git 用户在其 PATH 中没有 /usr/local/rvm/gems/ruby-1.9.3-p392/bin ，并且由于该标志，您无法修改其`.profile`or 。`.bashrc``--disabled-login`

> 似乎运行**`sudo -i -u git bundle`**而不是`sudo -u git bundle`解决问题

这是最安全的路线，并将以 git 的身份执行命令，但将首先使用`PATH`定义的 in`.profile`和`.bashrc`user模拟初始登录`root`。
有关更多信息，请参阅“[如何`sudo`搜索可执行文件的路径？](https://serverfault.com/a/259405/783) ”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-16T18:34:54.647

从 6.4 升级到 7.7 后，在我的本地机器上我遇到了这样的问题。

ruby 的编译是在 root 帐户下进行的。

所以需要权限来读取已编译的 ruby​​ 和已安装的包。

```
chmod ugo+rx /usr/local/bin/bundle
chmod -R ugo+rX /usr/local/lib/ruby/ 
```

在生产模式下你可以更严格。

# mysql - Mysql在某些情况下无法保存UTF字符串

> ID：15794004
> 
> 赞同：0
> 
> 时间：2013-04-03T17:25:12.873
> 
> 标签：mysql

在打击垃圾邮件的过程中，我发现一些垃圾评论存储在没有任何内容的情况下......

在尝试隔离问题后，这是我在将类似的评论与 MySQL 数据库一起保存到文件后发现的内容......

这是（由于未知输入编码的十六进制）评论前几个“字符”的样子：

```
D1EA E0F7 E0F2 FC20 EFEE EFF3 EBFF F0ED FBE5 20EF F0EE E3F0 E0EC ECFB 
```

执行后`INSERT INTO test VALUES (0xD1EAE0F7E0F2FC20EFEEEFF3EBFFF0EDFBE520EFF0EEE3F0E0ECECFB21),(0x21D1EAE0F7E0F2FC20EFEEEFF3EBFFF0EDFBE520EFF0EEE3F0E0ECECFB), (0x21)`测试mysql表（utf-8）包含3行，第一行没有任何文本，第二和第三行有单个字符“！” 作为文本......（请注意，“！”的 21 个十六进制代码也在第一个条目的末尾，但它没有被保存）。（latin1 编码为每个字节保存了一些无用的文本替换，但这篇文章不是关于它的）

当然，D1EA（D=1101 0001 后面应该跟一个 10xxxxxx 字节，而不是 1110xxxx）不是有效的 UTF-8 字符，但是像数据库服务器这样健壮的系统应该能够处理它......

我的猜测是，Mysql（版本 5.1.66-0+squeeze1）不应该选择何时保存数据，什么时候不保存，即使它不是有效的 UTF-8 编码字符......或者至少，它不应该要求查询当它决定不存储数据时成功了！

它是mysql中的错误，还是什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T17:40:36.760

编码为 Windows-1251，解码为

```
Скачать популярные программы
//"Download popular software" google translated 
```

在对代码执行任何操作之前，您应该拒绝代码中的非 UTF8 输入。

```
if( !mb_check_encoding($input, "UTF-8") ) {
    header("HTTP/1.1 400 Bad Request");
    die("Invalid encoding");
} 
```

FTR，您的查询是十六进制文字，而不是错误编码的文本。

# ios - Ad hoc 分发部署到 iOS 6.1 但不是 iOS 5.1

> ID：15794006
> 
> 赞同：0
> 
> 时间：2013-04-03T17:25:14.263
> 
> 标签：ios, ios5, ad-hoc-distribution

我无法通过无线分发将应用分发给使用 iOS 5.1.1 的原始 iPad 的临时测试人员。该应用程序在 5.1 和 6.1 模拟器上正常运行。它可以在绑定的 iOS 5.1 原始 iPad 和 iOS 6.1 iPad 上正常工作。OTA 临时下载到 6.1 iPad 工作正常。但是对原始 iPad 的 OTA ad hoc 分发失败，“无法下载应用程序”。

我检查了 UDID 是否正确。

我尝试擦除 5.1 iPad 上的所有配置文件。联机下载后会显示配置文件，但在 OTA 下载失败后未显示临时配置文件。一个想法？

谢谢 -

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-21T16:42:50.130

运行 iOS 5.1.1 的 iPad 1 无法处理 arm64 二进制文件。从您的 Ad Hoc 构建的有效架构列表中删除 arm64。然后它将成功安装。您的构建仍将在新硬件和 iOS 8 上运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T17:37:17.023

这曾经发生在我身上。我必须从设备中删除已安装的应用程序版本，重新启动设备，然后它才能工作。

您还可以在下面监视控制台`Organizer -> Device Name -> Console`并查看它在尝试安装时报告的错误。

# html - IE8 自关闭 HTML5 标签

> ID：15794008
> 
> 赞同：4
> 
> 时间：2013-04-03T17:25:22.987
> 
> 标签：html, internet-explorer, respond.js

我正在使用 respond.js 来获取 IE8 及以下版本来识别我的媒体查询。这在很长一段时间内都可以正常工作，但现在 IE8 似乎可以自动关闭任何 HTML5 标记。是否正在调用 respond.js。

所以我得到了类似的东西：

```
<article class="foo"/>
...
</article/> 
```

我在 IE10 中使用 F12 工具进行测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T21:08:12.247

原来是一个过时的 Drupal 模块。我们运行的库版本与modernizr 模块不兼容。

# javascript - 使用 Javascript 更改应用于导航菜单项的 CSS

> ID：15794011
> 
> 赞同：0
> 
> 时间：2013-04-03T17:25:33.087
> 
> 标签：javascript, html, css

我的导航栏中有 4 个页面链接。我想在使用移动浏览器时调整它们的大小。

这是我检测手机的 JS：function detectmob() {

```
 if( navigator.userAgent.match(/Android/i)
 || navigator.userAgent.match(/webOS/i)
 || navigator.userAgent.match(/iPhone/i)
 || navigator.userAgent.match(/iPad/i)
 || navigator.userAgent.match(/iPod/i)
 || navigator.userAgent.match(/BlackBerry/i)
 || navigator.userAgent.match(/Windows Phone/i)
 ){
    alert('This be a mobile browser');
    style3(); //a function which applies other CSS changes to my page
    //Trying to figure out how I'd change the width of my a elements within my nav to 100% width 

  }
} 
```

CSS：

```
#topnav ul li a {
    width: 175px; //I'd like to change this to 100% using JS based on above condition
    height: 40px;
    line-height: 53px;
    border-bottom: 4px solid #636393;
    padding:0px;
    color: #fff;
    font-size:18px;
    font-weight:lighter;
    text-align:center;
    text-decoration: none;
    display: block;
    -webkit-transition: .1s all linear;
    -moz-transition: .1s all linear;
    transition: .1s all linear;
} 
```

HTML：

```
<nav id="topnav">
    <ul>
        <li><a href="index.html">Home</a></li>
        <li><a href="about.html">About</a></li>
        <li><a href="video.html">Trailers</a></li>
        <li id='adminPage'><a href="admin.html">Admin</a></li>
    </ul>
</nav> 
```

**如果为真，这就是我在 detectmob() 中尝试过的：**

navItems = document.getElementsByTagName('a');

```
 for(var i =0; i < navItems.length;++1){
navItems[1].style.width = "100%"; 
    } 
```

但我收到错误：未捕获的 ReferenceError：前缀操作中的左侧表达式无效

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T17:30:02.417

您应该只在您的 css 中使用媒体查询来根据浏览器大小进行调整。例如，当浏览器小于 500px 时，将使用以下 CSS：

```
@media screen and (max-width : 500px) {
    /* Styles for less than 500px */
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-03T17:29:58.957

使用媒体查询允许您根据当前使用您网站的设备在 CSS 中定义样式。

我认为媒体查询是实现您寻求的响应式布局的更好方法：

[https://developer.mozilla.org/en-US/docs/CSS/Media_queries](https://developer.mozilla.org/en-US/docs/CSS/Media_queries)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-03T17:30:25.760

改用媒体查询。CSS：

```
@media all and (max-width: 320px) {

    #topnav ul li a {
        width:100%;
    }

} 
```

# android - 如何在相对布局中排列图像

> ID：15794020
> 
> 赞同：2
> 
> 时间：2013-04-03T17:25:59.813
> 
> 标签：android, xml

我刚开始使用 Android，找不到按照我想要的方式排列图像的方法。

这就是我要找的：

![在此处输入图像描述](https://i.stack.imgur.com/UkI1v.png)

这是我目前正在使用的代码来排列图像，不幸的是它不起作用。

```
<RelativeLayout
        android:layout_width="wrap_content"
        android:layout_height="0dp"
        android:layout_weight="1.5"
        android:orientation="horizontal" 
        android:layout_gravity="center">

        <ImageView
            android:id="@+id/imageView1"
            android:layout_width="240dp"
            android:layout_height="240dp"
            android:src="@drawable/delicio"/>

        <ImageView
            android:id="@+id/imageView2"
            android:layout_width="240dp"
            android:layout_height="240dp"
            android:src="@drawable/logoerrado"/>

    </RelativeLayout> 
```

我怎样才能按照我想要的方式排列图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T17:32:25.750

要在右上角获取 image1，请使用

```
android:layout_alignParentTop="true"
android:layout_alignParentRight="true" 
```

要使图像 2 水平居中，请使用`android:layout_centerHorizontal="true"`. 然后添加足够的填充通过`android:paddingTop`以尽可能地降低它。

如果您想要 image2 下方的另一个布局，就像我在您的绘图中看到的那样，只需放入`android:layout_below="@+id/img2"`它即可。

# c# - 将双数组保存到文本文件c#

> ID：15794024
> 
> 赞同：0
> 
> 时间：2013-04-03T17:26:02.593
> 
> 标签：c#, arrays, text-files

我有一个浮点数数组，它的长度未知，因为数组是动态的（它随着新数据的添加而增长）。我需要找到一种将数据存储到文本文件中的方法。

我希望将文本文件格式化为每行有一个浮点数。

我一直在网上搜索，但找不到解决方案，我是 c# 新手，所以如果有人能指出我解决问题的正确方向，我将不胜感激。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-03T17:28:48.380

您可以在 .NET 4.0 中的一行中执行此操作，如下所示：

```
File.WriteAllLines(
    @"c:\data\myfile.txt" // <<== Put the file name here
,   myDoubles.Select(d => d.ToString())
); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-03T17:29:45.163

```
using(StreamWriter sr = new StreamWriter("filename.txt"))
{
    foreach(var item in myArray)
    {
        sr.WriteLine(item);
    }
} 
```

不要忘记添加所需的使用（使用 System.IO）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T17:31:56.180

像这样的东西：

```
public class Program
{
    static void Main(string[] args)
    {
        double[] values = { 0.0, 1.0, 2.0 };

        using (StreamWriter writer = new StreamWriter(@"C:\out.txt"))
        {
            foreach (var value in values)
            {
                writer.WriteLine(value);
            }
        }
    }
} 
```

# mysql - SQL选择不在未来的最大记录

> ID：15794026
> 
> 赞同：1
> 
> 时间：2013-04-03T17:26:15.843
> 
> 标签：mysql

我的表结构看起来像这样

**客户端**

```
clientid
clientname 
```

**tbl设施**

```
facilityid
facilityname 
```

**tblclient设施**

```
clientid
facilityid
moveindate 
```

我允许我的用户输入未来日期作为搬入日期，我想做的是选择我的客户居住的当前设施。我试过了

```
SELECT 
 clientid,
 facilityid,
 moveindate

FROM 
 tblclientfacilities
WHERE 
 MAX(tblclientfacilities.moveindate) <= now()
GROUP BY
  tblclientfacilities.clientid 
```

显然这是行不通的。有人可以让我在这里走上正轨吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T17:35:33.477

```
SELECT  clientId,
        (
        SELECT  facilityId
        FROM    tblclientfacilities cf
        WHERE   cf.clientId = c.clientId
                AND cf.moveDate <= NOW()
        ORDER BY
                cf.clientId DESC, moveDate DESC
        LIMIT 1
        ) AS currentFacility
FROM    tblclients c 
```

为此创建一个唯一索引以`tblclientfacilities (clientId, moveDate, facilityId)`使其快速工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T17:28:44.713

尝试使用`HAVING`聚合函数。

```
HAVING MAX(tblclientfacilities.moveindate) <= now() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T17:30:47.463

如果您使用该子句，如果要过滤聚合结果，请`group by`考虑使用该子句`having`

```
SELECT 
 clientid,
 moveindate,
 facilityid
FROM 
 tblclientfacilities
GROUP BY
  tblclientfacilities.clientid
HAVING MAX(tblclientfacilities.moveindate) <= now() 
```

文档：[http ://www.w3schools.com/sql/sql_have.asp](http://www.w3schools.com/sql/sql_having.asp)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T17:32:14.500

您将 of`where`的用法与 . 的用法混淆了`having`。

快速参考：

```
SELECT # Desired columns and expressions
FROM # Source tables, and possible joins
WHERE # Filter conditions on the raw data
GROUP BY # Fields you want your data to be grouped-by
HAVING # Filter conditions on the grouped data 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-03T17:37:07.207

将您的客户/设施/日期记录与每个客户最近入住的记录相结合：

```
 SELECT tcf.*
      FROM tblclientfacilities tcf
INNER JOIN (  SELECT clientid, MAX(moveindate) AS moveindate
                FROM tblclientfacilities
               WHERE moveindate < CURRENT_DATE
            GROUP BY 1, 2) most_recent_moveins
        ON tcf.clientid = most_recent_moveins.clientid
           AND
           tcf.moveindate = most_recent_moveins.moveindate) 
```

# android - ProGuard - org.codehaus.jackson.map.JsonMappingException：找不到适合类型的构造函数

> ID：15794027
> 
> 赞同：5
> 
> 时间：2013-04-03T17:26:19.263
> 
> 标签：android, proguard, restlet

我有一个基于 Android 的应用程序，它使用 Rest 服务连接到 Google App Engine，该应用程序运行良好，直到它在发布前通过 ProGuard 被混淆。

运行混淆应用时，LogCat 报错如下：

```
Unable to convert a [application/json,UTF-8] representation into an object of 
  class com.enterprisemk.android.bcw.bincollection.WasteCollectionAreasContainer

org.codehaus.jackson.map.JsonMappingException: No suitable constructor found 
  for type [simple type, class 
  com.enterprisemk.android.bcw.bincollection.WasteCollectionAreasContainer]: 
  can not instantiate from JSON object (need to add/enable type information?) 
```

我的 proguard-project.txt 文件中有以下内容：

```
-keepattributes *Annotation*,EnclosingMethod

-keep public class org.w3c.** {public private protected *;}
-dontwarn org.w3c.**

-keep public class org.joda.time.** {public private protected *;}
-dontwarn org.joda.time.**

-keep public class org.restlet.** { *; }
-dontwarn org.restlet.**

-keep public class org.codehaus.** { *; }
-dontwarn org.codehaus.**

-keepattributes Signature
-keepnames class com.fasterxml.jackson.** { *; }
-dontwarn com.fasterxml.jackson.databind.** 
```

错误所指的我的班级看起来像：

```
public class WasteCollectionAreasContainer {

 public List<WasteCollectionAreas> wasteCollectionAreasList;

 public List<WasteCollectionAreas> getWasteCollectionAreasList() {
     return wasteCollectionAreasList;
 }

 public void setWasteCollectionAreasist(List<WasteCollectionAreas> wasteCollectionAreasList) {
     this.wasteCollectionAreasList = wasteCollectionAreasList;
 }

 public WasteCollectionAreasContainer() {
     wasteCollectionAreasList = new ArrayList<WasteCollectionAreas>();
 }

 @JsonCreator
 public WasteCollectionAreasContainer(List<WasteCollectionAreas> wasteCollectionAreasList) {
     this.wasteCollectionAreasList = wasteCollectionAreasList;
 }
} 
```

在通过 ProGuard 进行混淆之前重申，该应用程序运行良好。
谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T19:46:16.703

将以下内容添加到您的`Proguard.config`. 它将帮助您定位问题。

```
-verbose 
-dump class_files.txt 
-printseeds seeds.txt 
-printusage unused.txt 
-printmapping mapping.txt 
```

> 我的 proguard-project.txt 文件中有以下内容

我相信你应该使用`proguard-android-optimize.txt`，而不是`proguard-android.txt`。

[为了完整起见，感谢Android Security Discussions](http://groups.google.com/group/android-security-discuss/browse_thread/thread/f17e503bf1b969c6/6f9f3819f0f933f2)上的 Riley Hassell提供的技巧。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T23:12:04.387

错误信息

```
org.codehaus.jackson.map.JsonMappingException: No suitable constructor found for type
    [simple type, class com.enterprisemk.android.bcw.bincollection.WasteCollectionAreasContainer]:
    can not instantiate from JSON object (need to add/enable type information?) 
```

表明杰克逊库正在尝试使用反射反序列化您的类，并使用其原始名称和带注释的构造函数。ProGuard 无法预见这一点，因此它可能已经删除或重命名了该类及其构造函数。您可能需要明确保留它们：

```
-keep class com.enterprisemk.android.bcw.bincollection.WasteCollectionAreasContainer {
    <init>(java.util.List);
} 
```

出于同样的原因，可能还有其他类似的类/字段/方法需要保留。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-19T22:30:01.103

如果其他人遇到此问题，更好的解决方案如下：

```
# keep anything annotated with @JsonCreator
-keepclassmembers public class * {
     @com.fasterxml.jackson.annotation.JsonCreator *;
} 
```

这会保留使用 JsonCreator 注释的任何方法，在这种情况下可能想要这样做。如果您有多个类需要加载，那么您可以避免必须单独指定每个类。

# jquery - jQuery Step Slider 输出多个变量（价格）

> ID：15794033
> 
> 赞同：0
> 
> 时间：2013-04-03T17:26:38.287
> 
> 标签：jquery, jquery-ui, slider

我有一个滑块，它需要穿过一组彼此距离相等的点，同时显示完全任意的定价。

例如，我有 4 个服务器配置需要将月费提高到 50、100、201 和 403 美元。Rackspace 和 Amazon 的价格也需要更新以显示完全不同的数字……Rackspace 的价格为 86、245、648 和 864，而 43、86、172 和 345 美元。这意味着当服务器显示 50 美元时，Rackspace 将显示 86 美元，亚马逊将显示 86 美元。这可能是 jQuery 101 之类的。哈哈

开箱即用，滑块只给我坐标值。

我的 jQuery 知识有点差，虽然我可以阅读正在发生的事情，并且我知道我想要它做什么，但我只是不知道如何将其转化为写作。

```
$(function() {
$( "#slider" ).slider({
    value: 0,
    min: 50,
    max: 498,
    stepValues: [50, 114, 178, 243, 306, 370, 434, 498],
    slide: function( event, ui ) {

        var stepValues = $(this).slider("option", "stepValues"),

            distance = [],
            minDistance = $(this).slider("option", "max"),
            minI;

            $.each(stepValues, function(i, val) {
                distance[i] = Math.abs( ui.value - val );
                    if ( distance[i] < minDistance ) {
                        minDistance = distance[i];
                        minI = i;
                    }
            });

            if ( minDistance ) {
                $(this).slider("value", stepValues[ minI ]);
                return false;
            }

        $( "#amount" ).val( "$" + ui.value );
    }
});
$( "#amount" ).val( "$" + $( "#slider" ).slider( "value" ) );

}); 
```

这是我项目中步进滑块的半工作版本：[http ://robsdesign.com/nebo/internap/cloud.html](http://robsdesign.com/nebo/internap/cloud.html)

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T18:30:15.533

缺少一些 javascript。如您所见，每当您将鼠标悬停在滑块上时，都会添加一个 ui-hover 类，当您单击它时，您会获得一个 ui-active 类。这可能是触发或触发更新滑块位置的事件。你可以做两件事。侦听此事件并更新值，或将代码放在更新滑块的相同代码中。

您需要这条线来估算每月的费用：

```
$( "#amount" ).val( *here); // place *here the value you want to update 
```

并且您需要将 id 添加到包含其他两个价格值的 html 中：

```
<span class="cost">$263/Month</span> 
```

和

```
<span class="cost">$238/Month</span> 
```

类似于：

```
<span class="cost" id="rack">$263/Month</span> 
```

和

```
<span class="cost" id="amazon">$238/Month</span> 
```

然后用这些行更新它们的值。

```
$( "#rack" ).val( *here); // place *here the value you want to update 
```

和

```
$( "#amazon" ).val( *here); // place *here the value you want to update 
```

您将基于更新的值将是您的滑块在更改其位置时获得的样式“左”：

例如，在第一个位置，你有 0%

```
<a class="ui-slider-handle ui-state-default ui-corner-all" href="#" style="left: 0%;"></a> 
```

对于下一个位置，您将获得此值：

```
<a class="ui-slider-handle ui-state-default ui-corner-all" href="#" style="left: 14.285714285714285%;"></a> 
```

# android - Back Stack 中只有一项活动

> ID：15794034
> 
> 赞同：2
> 
> 时间：2013-04-03T17:26:38.447
> 
> 标签：android, android-activity, back-stack

我有 5 个活动：A、B、C、D 和 E。

我可以从每个活动开始所有活动，但我希望 Back Stack 只保存最后一个活动。

例如：A->B->C->D。如果我在 D 中，我可以回到 C，但是现在，在 C 中，当我按下后退按钮时，我只想回到主要活动 (A)。

有可能吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T17:29:51.303

当从 B -> C 转换时，在 Activity B 上调用 finish() 方法。这将防止 B 被放置在后堆栈上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T17:33:21.497

进入 C 并导航到 A 后，您可以清除后退堆栈。

A 到 BB 到 C. C 到 D.

返回 D 到 C

在 C 中，您可以使用以下内容。

```
 @Override
  public boolean onKeyDown(int keyCode, KeyEvent event) {
  if (keyCode == KeyEvent.KEYCODE_BACK) {
    onBackPressed();

    }

return super.onKeyDown(keyCode, event);
   }

public void onBackPressed() {
Intent myIntent = new Intent(C.this, A.class)
myIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);//clear top of stack.
startActivity(myIntent);
finish();
return;
    } 
```

# python - 使用标记和文本夹具选项时无法从命令行运行 py.test

> ID：15794038
> 
> 赞同：3
> 
> 时间：2013-04-03T17:26:54.367
> 
> 标签：python, pytest

我这样设置夹具：

```
def pytest_addoption(parser):
    parser.addoption('--env', action='store', default='qa', 
                     help='Specify environment: "qa", "aws", "prod".')

@pytest.fixture(scope='module')
def testenv(request):
    return request.config.getoption('--env') 
```

这在我针对文件名调用 py.test 时有效，例如：

*   py.test -v --env prod 功能测试/test_health_apps.py

但是当我使用标记调用 py.test 时它不起作用，如下所示：

*   py.test -m selenium --env prod
*   py.test -m 'selenium' --env prod
*   py.test --env prod -m selenium
*   py.test --env prod -m '硒'

这些返回：

用法：py.test [options] [file_or_dir] [file_or_dir] [...]

py.test：错误：没有这样的选项：--env

标记和命令行选项不兼容吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T02:51:15.437

它们是兼​​容的。我的猜测是您的配置文件 ( `conftest.py`) 与您启动测试的目录不同。（这里我可能错了）

我的建议是为配置创建单独的文件：

```
#configs.py
def pytest_addoption(parser):
    parser.addoption('--env', 
    dest='testenv',
    choices=["qa","aws","prod"],
    default='qa', 
    help='Specify environment: "qa", "aws", "prod".')

@pytest.fixture(scope='session')
def testenv(request):
    return request.config.option.testenv 
```

并创建`runner.py`您将用作`py.test`命令的：

```
#runner.py
import pytest
import sys
import configs

def main():    
    plgns = [configs]
    pytest.main(sys.argv[1:], plugins=plgns)

if __name__=="__main__":
    main() 
```

然后你可以开始`python runner.py --env prod -m selenium`
这对我很有效。

# android - Android 虚拟设备不从 ldpi 文件夹中获取图像

> ID：15794044
> 
> 赞同：1
> 
> 时间：2013-04-03T17:27:39.837
> 
> 标签：android, resolution, screen-resolution

我有一个简单的应用程序，其中包含带有背景图像的按钮。

应用程序有文件夹：

drawable-ldpi、drawable-mdpi、drawable-hdpi、布局、小布局、大布局

当我为分辨率 240*320 图形布局 (eclipse) 设计按钮时，会显示来自 drawable-ldpi 文件夹的图像，但是当我使用虚拟设备 2.7 QVGA (240*320:ldpi) 时，设备会显示来自**drawable-mdpi**文件夹的图像。图像的名称是相同的。我不知道为什么虚拟设备显示 mdpi 图像。虚拟设备是否可能这样做，因为我首先选择分辨率为 320X480 的设备并运行它，然后将其更改为更小（240 * 320：ldpi）？

# php - 有没有办法像 PHP 那样自动将表单的输出转换为数组，但是使用 jQuery/Javascript？

> ID：15794045
> 
> 赞同：1
> 
> 时间：2013-04-03T17:27:40.527
> 
> 标签：php, javascript, jquery, html, forms

我有没有办法将使用多维数组表示法作为其字段名称的表单的输出转换为实际的关联数组或该数据的对象？

例如，我有两个字段：

```
<input type="text" name="contract[main][date]" />
<input type="text" name="contract[options][timer]" /> 
```

我想阻止表单的默认操作（我知道该怎么做），然后将表单中的所有输入转换为一个对象或关联数组，该数组模仿 PHP 的 $_GET 中可用的关联数组的结构或 $_POST 变量，如果我试图在服务器端执行此操作。就像是：

```
var contract = {
    main: {
        date:'input field value'
    },
    options: {
        timer:'another input field value'
    }
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-29T14:42:46.110

```
function formToArray(form) {
    var formArray = new Array();
    var formElements = form.find('input[name]');

    formElements.each(function() {
        var name = $(this).attr('name');
        var value = $(this).val();

        // replace all occurrences of ']' with ''
        name = name.split(']').join('');

        var elements = name.split('[');
        var previousRef = formArray;

        for(var i = 0, count = elements.length; i < count; i++) {
            var key = elements[i];

            if (!previousRef[key]) {
                previousRef[key] = new Array();
            }

            if (i != elements.length - 1) {
                previousRef = previousRef[key];
            } else if (i == elements.length - 1) {
                previousRef[key] = value;
            }
        }
    });

    return formArray;
}

var form = $('#my_form');
var formArray = formToArray(form); 
```

# oracle - 使用 Oracle BI 发布者桌面的登录详细信息

> ID：15794046
> 
> 赞同：2
> 
> 时间：2013-04-03T17:27:55.457
> 
> 标签：oracle, report, reporting, bi-publisher

我已经安装了 Oracle 10g 数据库和 Oracle 10g 开发者套件。

我是使用 Oracle BI 发布器制作报告的初学者。

今天我安装了 Oracle BI Publisher 桌面，用于在 ms-word 2007 中制作报告。当我尝试登录 ms-word 中的 BI Publisher 选项时。它要求输入用户名、密码和报告服务器。

我是否需要安装 BI Publisher Server 来填写报表服务器详细信息？

请指教。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T04:35:02.247

是的，除非您有来自服务器端数据模型的示例数据的本地 XML 文件，否则您需要连接到 BI Publisher 服务器实例来创建新报告。

使用模板生成器安装，您应该有一组很好的示例。

```
C:\Program Files (x86)\Oracle\BI Publisher\BI Publisher Desktop\Template Builder for Word\samples\RTF templates\Balance Letter 
```

Oracle 技术网的本教程将引导您很好地使用上述示例文件。

**使用 MS Word 创建报告 (RTF) 模板**（本教程展示了如何使用示例数据 XML 文件“离线”工作）

[http://www.oracle.com/webfolder/technetwork/tutorials/obe/fmw/bi/bip/tb4word/tbwordbip.htm](http://www.oracle.com/webfolder/technetwork/tutorials/obe/fmw/bi/bip/tb4word/tbwordbip.htm)

对于实际工作，您需要访问完全安装的 BI EE 环境，然后才能访问 BI Publisher 组件 (XMLPSERVER)

```
Username:  weblogic
Password:  ((PASSWORD))
Report Server:  http://NAME:PORT/xmlpserver 
```

对于 BI 的简单安装，URL 可以是：

```
http://192.168.56.101:7001/xmlpserver 
```

如果没有相应的服务器，您将无法提取针对源定义的数据元素。

本教程将向您展示有关 BIP 的更多信息。

**Oracle BI Publisher 11g 入门**（专注于使用 Online Report Writer：

[http://www.oracle.com/webfolder/technetwork/tutorials/obe/fmw/bi/bip/bip11g/gettingstarted/gettingstarted.htm](http://www.oracle.com/webfolder/technetwork/tutorials/obe/fmw/bi/bip/bip11g/gettingstarted/gettingstarted.htm)

# javascript - JS 模块模式和调用另一个函数

> ID：15794047
> 
> 赞同：2
> 
> 时间：2013-04-03T17:27:55.507
> 
> 标签：javascript, oop

所以我反复遇到这种情况：我编写了一个模块模式对象，但无法从另一个（原型）函数中调用一个函数。

```
;(function($,window,documnet,undefined) {
    var id,
        _defaults = { };

    var MyObject = function(element,options) {
        this.el = element;
        this.opt = $.extend({},_defaults,options);
        this.init();   //  works fine
    };

    MyObject.prototype.init = function() {
        var self = this;
        self.id = localStorage.getItem('myobject_id');
        if( self.id !== null ) {
             $('#myobject_id').val(self.id);
        }
    };

    MyObject.prototype.fetch = function() {
        var self = this;
        var data = { 
                    action: 'program_fetch',
                    program_idx: $('#program_idx').val()
                   };

        // assume session is valid and has a uri in opt.callback
        $.post( session.opt.callback, data ).complete(function(r){
            var prog = JSON.parse(r.responseText).program;
            self.id = prog.id;

            $('#myobject_id').val( self.id );  // this works

            self.display();                    // this does not work
        });

    }; /* fetch */

    MyObject.prototype.display = function() {
        var self = this;

        $('#myobject_id').val( self.id );

    };  /* display */

    $.fn.MyObject = function(options) {
        return this.each(function(){
            if(!$.data(this,'plugin_MyObject')) {
                $.data(this,'plugin_MyObject', new MyObject(options));
            }
        });
    };

    window.myobject = new MyObject();

})(jQuery,window,document); 
```

据我了解， fetch 函数*应该*设置 MyObject 的窗口附加实例的值，以便在调用 display() 函数时，它有一个值可以放入 HTML 输入字段中，由#myobject_id 标识.

实际上似乎发生的是竞争条件，在此期间分配给 self.id 的值是可行的，但是离开 .complete(..) 回调的范围， MyObject.id 的值不再有效。

我应该如何调用这些东西来实现对象内实例数据的持久性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T18:52:18.490

```
;(function($,window,documnet,undefined) {
var id, 
    _defaults = { };

var MyObject = function(element,options) {
    this.el = element;
    this.opt = $.extend({},_defaults,options);
    this.init();   //  works fine
};

MyObject.prototype.init = function() {

    id = localStorage.getItem('myobject_id');
    if( id !== null ) {
         $('#myobject_id').val(id);
    }
};

    MyObject.prototype.fetch = function() {
    var data = { 
                action: 'program_fetch',
                program_idx: $('#program_idx').val()
               };

    // assume session is valid and has a uri in opt.callback
    $.post( session.opt.callback, data ).complete(function(r){
        var prog = JSON.parse(r.responseText).program;
        id = prog.id;

        $('#myobject_id').val( id );  // this works
        self.display();               // this does not work
    });

}; /* fetch */

MyObject.prototype.display = function() {
    $('#myobject_id').val( id );
};  /* display */

$.fn.MyObject = function(options) {
    return this.each(function(){
        if(!$.data(this,'plugin_MyObject')) {
            $.data(this,'plugin_MyObject', new MyObject(options));
        }
    });
};

})(jQuery,window,document); 
```

在这个版本中，我删除了使用 var self = this; 的模式。在每个函数范围内，因为它掩盖了同名的对象级变量。（不能通过 this.var 设置对象属性？）

仍然存在**self.display()**根本不起作用的突出问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-12T17:11:09.447

简单的事实是我不知道如何在 JS 中构造一个类对象。这是一个简单的模型：

```
;(function($,window) {

    var self;
    var MyClass = function(opt) {
        self = this;
        return self.init(opt);
    }

    MyClass.prototype = {

        init: function(opt) {
            self.opt = $.extend({},opt);
            // other set up stuff
            return self;
        },

        display: function() {

        },

        show: function() {
            self.display();
        }
    }; /* end of prototype */

    $.fn.myclass = function(opt) {
        return new MyClass(opt);
    }

}(jQuery,window));  /* end of clas object */

jQuery().ready(function($) {
    window.myInstance = $().myclass({ /* options here */ });
    $('#some_button').click( window.myInstance.show );
} 
```

激活按钮后`#some_button`，将调用 show 方法。它将依次调用 display() 方法。十分简单。

# c++ - OpenCV 调试

> ID：15794050
> 
> 赞同：0
> 
> 时间：2013-04-03T17:28:04.873
> 
> 标签：c++, opencv, static-libraries

我想看看函数`findchessboardcorners`在内部是如何工作的，我从 calibinit.cpp 的源代码中看到，如果未注释`opencv`，有一些调试代码可能会帮助我。`#define DEBUG_CHESSBOARD`

问题是我如何在 opencv 作为库的情况下实际做到这一点？只是取消注释该`#define DEBUG_CHESSBOARD`行不起作用，我想那是因为源代码被构建到我正在使用的静态库中，还是这是错误的？但是我是否必须通过这个小改动再次构建整个 opencv 库才能实际运行调试代码？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T08:46:06.283

如果代码在调试宏下受到保护，我认为您需要构建 lib。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-05T09:19:47.953

您是否将 calibinit.cpp 添加到您的项目中？否则尝试这样做，注释 precomp.h 的包含并用代码做你想做的事......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-29T23:03:33.213

我从源代码构建了我的 OpenCV，使用 cmake 然后 make。如果您编辑顶级 CMakeLists.txt 文件，然后添加`add_definitions(-DDEBUG_CHESSBOARD)`，然后重新运行 cmake，重新运行 make（如果适用，则重新运行“sudo make install”），这将打开此选项。

# c# - 为什么 GridLookUpEdit 显示 [EditValue is null]

> ID：15794052
> 
> 赞同：0
> 
> 时间：2013-04-03T17:28:05.390
> 
> 标签：c#, devexpress, xtratreelist, gridlookupedit

我有一个`DataTable`作为数据源的`GridLookUpEdit`.

```
 private void MachineTreeCellEdit(object sender, GetCustomNodeCellEditEventArgs e) {
     Contract.Assume(sender != null, "sender is null.");
     Contract.Assume(e != null, "e is null.");

     if (e.Node != null) {
        var element = e.Node.GetValue(0) as XElement;
        if (element == null) {
           // no element object
           return;
        }

        if (element.Name.LocalName == "host" && e.Column.Name == "machineViewGroups") {
           GridLookUpEdit lookup = new GridLookUpEdit();
           lookup.Properties.DisplayMember = "Name";
           lookup.Properties.ValueMember = "Name";
           lookup.Properties.DataSource = GetLookupDataSource(element);
           lookup.Properties.PopulateViewColumns();

           e.RepositoryItem = lookup.Properties;
        }
     }
  }

  private DataTable GetLookupDataSource(XElement element) {
     var configsTable = new DataTable("Configurations");
     configsTable.Columns.AddRange(new DataColumn[] { 
        new DataColumn("Name", typeof(string)),
        new DataColumn("Version", typeof(string))
     });

     var groupAncestor = element.Ancestors("group").First();
     var configOptions = Presenter.Repository.Root
                                  .Elements("group")
                                  .Where(el => el.Attribute("name").Value == groupAncestor.Attribute("name").Value)
                                  .SelectMany(el => el.Descendants("cfg"))
                                  .ToList();

     for (int option = 0; option < configOptions.Count; option++) {
        var newRow = configsTable.NewRow();
        newRow["Name"] = configOptions[option].Attribute("name").Value;
        newRow["Version"] = configOptions[option].Element("version").Value;
        configsTable.Rows.Add(newRow);
     }

     configsTable.AcceptChanges();

     return configsTable;
  } 
```

虽然我有一个用行创建的数据表，但为什么`GridLookUpEdit`总是显示`[EditValue is null]` **而不是数据表中的数据**？

此外，当我单击下拉箭头时，不会显示弹出窗口。那会告诉我数据源是空的。但是，我验证了数据表具有我期望的数据。

# version-control - hg update 导致合并失败

> ID：15794054
> 
> 赞同：2
> 
> 时间：2013-04-03T17:28:08.580
> 
> 标签：version-control, mercurial, merge

假设我在我的 repo 的修订版 n 中。我有未提交的更改。忘记我的更改，我更新到修订版 n-1。通常情况下，mercurial 会简单地合并到我未提交的更改中，并且一切都会顺利进行。但有时会出现合并冲突。现在我必须手动解决冲突。我更愿意在更新之前恢复状态。或者更好的是，告诉 mercurial 在更新期间遇到合并冲突时始终中止更新。有没有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T18:30:02.067

您可以使用`--config ui.merge=internal:fail`不尝试两者中的合并。然后，您需要手动合并或使用 resolve 命令。

如果使用 TortoiseHG，您可以`Always merge`在更新时取消选择该选项，这将导致 THG 询问您应该做什么。取消选择`Automatically resolve merge conflicts where possible`相当于上面提到的 internal.fail。

# opengl - 我可以将多少个缓冲区对象绑定到一个目标？

> ID：15794059
> 
> 赞同：0
> 
> 时间：2013-04-03T17:28:26.557
> 
> 标签：opengl

当我绑定一个顶点缓冲区对象时，我很困惑，之前的 vbo 是未绑定的还是与新绑定的 vbo 保持在一起？

那么其他类型的缓冲区对象呢？我在哪里可以找到有关此的一些规范？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T00:07:37.777

没有“种类”的[Buffer Objects](http://www.opengl.org/wiki/Buffer_Object)。缓冲区对象是任意数据的未格式化数组。就像没有“种类”的`void*`'s 一样，也没有“种类”的缓冲区对象。

[缓冲区对象](http://www.opengl.org/wiki/Buffer_Object#General_use)有不同的[*用途*](http://www.opengl.org/wiki/Buffer_Object#General_use)，但它们并不代表*单独的*“种类”。您可以使用缓冲区对象作为[像素传输的目标](http://www.opengl.org/wiki/Pixel_Buffer_Object)，然后将写入的数据作为[源顶点数据读取](http://www.opengl.org/wiki/Vertex_Specification#Vertex_Buffer_Object)。然后，您可以使用变换反馈输出覆盖缓冲区的数据，然后将反馈数据作为[纹理读取，以便在着色器中访问](http://www.opengl.org/wiki/Buffer_Texture)。

缓冲区对象非常灵活。

至于绑定问题，[所有 OpenGL 对象](http://www.opengl.org/wiki/OpenGL_Object)都是如此：当您[将对象绑定到目标](http://www.opengl.org/wiki/OpenGL_Object#Object_Usage)时，之前绑定到该目标的任何内容都未绑定。因此，如果您将缓冲区绑定到`GL_ARRAY_BUFFER`，则之前绑定的任何`GL_ARRAY_BUFFER`内容都未绑定。

# git - Git：如何衡量一段时间内更改的代码量？

> ID：15794062
> 
> 赞同：5
> 
> 时间：2013-04-03T17:28:28.613
> 
> 标签：git

我正在寻找针对我的 git 存储库执行的命令，以发现在特定时间段内更改的代码量。

我想知道自“X”日以来更改了多少代码。我并不真正关心每个作者更改的代码百分比。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T17:32:34.953

您可以使用 的`--stat`选项`git diff`。

例如

```
git diff --stat HEAD HEAD~1 
```

会告诉您与上次提交相比发生了什么变化，但我认为最接近您的要求的是命令

```
git diff --shortstat HEAD HEAD~1 
```

这将输出类似

```
524 files changed, 1230 insertions(+), 92280 deletions(-) 
```

**编辑**

实际上，我发现这个[很好的答案](https://stackoverflow.com/a/2528129/846273)可以更好地解决相同的问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-03T17:38:57.487

跟进 Gabriele 找到的出色答案，您需要的确切命令是：

```
git log --since=1/1/2013 --numstat --pretty="%H" | awk '
    NF==3 {plus+=$1; minus+=$2;}
    END   {printf("+%d, -%d\n", plus, minus)}' 
```

（是的，您可以将其粘贴到单行上，但这样的答案更具可读性）

关键区别在于*在一定时间内的*要求，由`--since`参数处理。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T17:53:08.293

作为一个不那么令人讨厌的选择：

```
REV=$(git rev-list -n1 --before="1 month ago" master)
git diff --shortstat $REV..master 
```

“之前”日期当然也可以是更标准的时间表示。

# javascript - 是否可以将 ExactTarget 与客户端 JavaScript 一起使用？

> ID：15794073
> 
> 赞同：1
> 
> 时间：2013-04-03T17:28:52.393
> 
> 标签：javascript, exacttarget

我想知道，有没有办法将 ExactTarget (XML API) 与客户端 JavaScript 一起使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T16:18:51.393

出于安全原因，您不希望通过客户端 JavaScript 使用 ExactTarget 的 XML API，因为用户凭据是有效负载的一部分。

# objective-c - 用于 Objective C 类方法的 UML

> ID：15794074
> 
> 赞同：0
> 
> 时间：2013-04-03T17:28:52.693
> 
> 标签：objective-c, uml

如果在 UML`+`中用于公共方法并`-`用于私有方法，那么如何将 UML 用于作为类方法的客观 C 方法或公共但对象方法的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T17:42:25.363

公共和私有与实例相关，即它们用于对象方法。类方法用下划线标记。

# c# - 如何从提升的进程启动未提升的进程

> ID：15794078
> 
> 赞同：1
> 
> 时间：2013-04-03T17:29:05.467
> 
> 标签：c#, process-elevation

我的应用程序可能正在以提升的权限运行（它是一个应用程序启动器），我需要以标准权限启动其他应用程序（这样它就不会以管理员身份运行）。

我的应用程序不是设置。

我怎样才能做到这一点？我需要同时启动可执行文件和文档文件。

谢谢。

# opengl - OpenGL 和多 GPU

> ID：15794079
> 
> 赞同：2
> 
> 时间：2013-04-03T17:29:14.580
> 
> 标签：opengl, gpu, gpgpu

我们正在尝试使用 Multiple Tesla M2050 设置服务器以使用 OpenGL 运行。

当前设置如下：带有 NVidia 驱动程序的 Ubuntu 12.04。我们已经使用总线 ID 标识的单独设备设置了 xorg.conf。

现在我们已经绑定了一个 X 服务器，每个都带有显示器，而显示器又绑定到每个设备，我们的代码附加到这些 X 服务器中的每一个。但不知何故，似乎只有一个 X 会话可以正常工作。另一个产生乱码输出，当从 nvidia-smi 观看时，我们注意到当产生乱码输出时，GPU 根本没有使用。

有人可以验证我们的设置是否合理吗？我们注意到的另一件事是，只有第一个启动的 X 服务器是有问题的。

编辑：这是无头模式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T18:52:12.220

多个 X 服务器的一个问题是，每个服务器都可能获取活动的 VT，从而禁用其他 X 服务器的渲染输出。这是可以避免的。但我认为在你的情况下，好的*“Zaphod Mode”*会更好地满足你的需求：

Zaphod 模式是一个 X 服务器，控制多个设备，每个设备都有自己的监视器，形成一个屏幕，加入一个屏幕布局。*这不是 TwinView 或 Xinerama！*在 Zaphod 模式下，您不能在屏幕之间移动窗口，即每个屏幕都独立运行。

# ms-access - MS Access 嵌套连接错误

> ID：15794080
> 
> 赞同：1
> 
> 时间：2013-04-03T17:29:14.453
> 
> 标签：ms-access, ms-access-2013

我正在使用 Access 2013，并且在嵌套连接方面遇到了一些问题。恐怕我对嵌套连接不是很精通，所以 Access 给我的“JOIN 语法错误”错误消息并没有多大帮助。

我有两张桌子：

```
Farms           RAMP
--------        --------
FarmID          RAMPID
Farm Name       FarmID
                Date Expires 
```

每个农场条目可能有多个 RAMP 条目，我只想包含每个农场条目的最近到期日期，如果没有条目，则为 null。我正在尝试使用以下查询，但 Access 给我一个错误，说我的 JOIN 语法有错误：

```
SELECT Farms.FarmID, Farms.[Farm Name], [Expires]
FROM Farms 
    LEFT JOIN (SELECT TOP 1 RAMP.[Date Expires] FROM RAMP WHERE RAMP.[FarmID] = Farms.FarmID) AS Expires ON Farms.[FarmID] = RAMP.[FarmID] 
```

关于我做错了什么的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T17:44:30.843

它可能反对“ON FARMS.[FarmId] = RAMP.[FarmId]”子句，因为您加入的是 Expires 而不是 RAMP。无论如何，为了实现你想要的，我认为你需要通过以下方式使用一个组：

```
SELECT Farms.FarmID, Farms.[Farm Name], MAX(RAMP.[Expires]) AS Expires
FROM Farms 
LEFT JOIN RAMP ON RAMP.[FarmID] = Farms.FarmID
GROUP BY Farms.FarmID, Farms.[Farm Name] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T17:41:22.487

在我看来，您的目标是相关子查询。所以，我提供了下面的查询。然而，相关子查询可能很慢。我认为 Young Bob 提供了一个更好的方法。我会留下这个以防万一。

```
SELECT
    Farms.FarmID,
    Farms.[Farm Name],
    (
        SELECT TOP 1 RAMP.[Date Expires]
        FROM RAMP
        WHERE RAMP.[FarmID] = Farms.FarmID
    ) AS Expires
FROM Farms; 
```

Allen Browne 对子查询有有用的提示：[子查询基础知识](http://allenbrowne.com/subquery-01.html)和[幸存的子查询](http://allenbrowne.com/subquery-02.html)

# shell - Shell脚本读取设置为零的值并设置回旧值？

> ID：15794088
> 
> 赞同：0
> 
> 时间：2013-04-03T17:29:48.943
> 
> 标签：shell, configuration-files, ini

我需要读取变量的值并将其设置为零，然后再次设置回旧值我尝试了这些步骤

```
value=$(grep -Po '(?<=Max_value=).*' /usr/post_check.ini|awk '{print $1}')
sed -i -r 's/Max_value=[0-9]+/Max_value=0/g' /usr/master.ini
echo "$value" # say $value is 3
sed -i -r 's/Max_value=[0-9]+/Max_value=$value/g' /usr/master.ini
value=$(grep -Po '(?<=Max_value=).*' /usr/master.ini|awk '{print $1}')
echo "$value" 
```

上面的代码将值 Max_value 设置为 $value[我的意思是实际到文本 $value 但不包含它的值，它是 3，如 "Max_value=$value" 而不是 Max_value=3] 但不是旧值

如果我将其重置为零并尝试将其设置回旧值我会怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T17:40:48.657

就像我在回答您上一个**[问题](https://stackoverflow.com/a/15793855/1066031)**时所说的那样，您应该使用配置解析器：

```
import ConfigParser

config = ConfigParser.ConfigParser()
config.read('post_check.ini')

print config.get('section 1','Max_value')

config.set('section 1','Max_value','0')
print config.get('section 1','Max_value') 
```

演示

```
$ cat post_check.ini
[section 1]
Max_value=123
[section 2]
Max_value=456

$ python config.py
123
0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T18:21:13.957

sed -i -r "s/Max_value=[0-9]+/Max_value=$value/g" /usr/master.ini

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-28T00:58:00.333

直接插入 $value 的特殊问题是因为您使用单引号而不是双引号。

但是我建议使用 crudini，它是从 shell 操作 ini 文件的专用工具

```
value=$(crudini --get /usr/post_check.ini section Max_value)
crudini --set /usr/post_check.ini section Max_value 0
echo "$value"
crudini --set /usr/post_check.ini section Max_value "$value"
value=$(crudini --get /usr/post_check.ini section Max_value)
echo "$value" 
```

有关使用和下载的详细信息，请访问： [http ://www.pixelbeat.org/programs/crudini/](http://www.pixelbeat.org/programs/crudini/)

# html - 奇怪的白线

> ID：15794093
> 
> 赞同：0
> 
> 时间：2013-04-03T17:30:13.403
> 
> 标签：html, css

出于某种原因，我的一个元素上出现了一条奇怪的白线。

这是它的样子：

![在此处输入图像描述](https://i.stack.imgur.com/GWokR.png)

它就在左侧的介绍旁边。

我查看了代码，似乎找不到它

它位于[http://divisionforty.com](http://divisionforty.com)

我不知道问题出在哪里，所以我不能发布任何代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T17:32:57.977

该行来自一个`span.arrow_right`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T17:33:02.357

就是这段 HTML：

```
<span class="arrow_right"></span> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T17:59:55.187

所有的答案都很棒！然而，事实证明我一直用逗号阻止部分代码

这：

```
/* Title Right ----------------------------*/

.title_right, .title_right_services_page h3{
    color: #bd2d67;
    padding: 0;
}
.title_right, .title_right_services_page h1{
    line-height: 45px;
}
.title_right, .title_right_services_page p{
    color: #777;
    font-size: 21px;
    line-height: 30px;
    font-weight: 200;
}
.title_right_services_page{
    border-left: 2px solid #cdcdcd;
    position: relative; 
    text-align: right;
    padding:0 0 30px 1%;

}
.title_right,{
    border-left: 2px solid #cdcdcd;
    position: relative; 
    text-align: right;
    padding:0 0 30px 1%;
}
.arrow_right{
    background: url("../img/arrow_right.png") no-repeat center;
    position: absolute;
    width: 53px;
    height: 49px;
    left: -40px;
    top: 40%;
}
.arrow_rightb{
    background: url("../img/arrow_rightb.png") no-repeat center;
    position: absolute;
    width: 53px;
    height: 49px;
    left: -40px;
    top: 40%;
} 
```

对此：

```
/* Title Right ----------------------------*/

.title_right h3{
    color: #bd2d67;
    padding: 0;
}
.title_right h1{
    line-height: 45px;
}
.title_right p{
    color: #777;
    font-size: 21px;
    line-height: 30px;
    font-weight: 200;
}
.title_right{
    border-left: 2px solid #cdcdcd;
    position: relative; 
    text-align: right;
    padding:0 0 30px 1%;

} 
```

这解决了它！

谢谢大家

丹佛

# ios - 条件链接 iOS 上的库

> ID：15794094
> 
> 赞同：5
> 
> 时间：2013-04-03T17:30:13.777
> 
> 标签：ios, xcode

我想有条件地链接一个库（我有这个用于 iOS 设备的库，但我没有用于模拟器）。我正在使用 Xcode 4.6 和 iOS 6.1。

我读了一个问题（还有几个类似的问题）：[iOS 条件链接静态库](https://stackoverflow.com/questions/8298076/ios-conditional-link-static-library)

**-weak_library 链接器标志**

我尝试使用以下标志构建项目：

```
-weak_library LibraryNameWithPath 
```

但是它给了我一个错误：

```
ld: file not found: LibraryNameWithPath 
```

**-weak-l 链接器标志**

我尝试使用以下标志构建它：

```
-weak-lShortLibraryName 
```

并得到相同的结果：

```
ld: library not found for -lShortLibraryName 
```

**想法**

为什么要检查库是否存在，如果它被明确标记为弱链接？

有没有办法在构建时进行条件链接（与 dlopen、dlclose 和朋友的运行时使用相比）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T11:46:42.333

我实际上并没有尝试直接使用构建标志来执行此操作，但我已经使用 Xcode GUI 设置完成了它。选择您的构建**目标**，然后选择**构建阶段**，然后选择将您的静态库添加到要链接的二进制文件列表中。

但是，从右侧的必需/可选菜单中选择**可选（不是默认设置）。**

![在此处输入图像描述](https://i.stack.imgur.com/ky7Qr.png)

由于这是您正在谈论的*静态*库，因此我认为您需要在代码中添加一些预处理器防护，以禁用在模拟器中使用该库：

```
#if TARGET_IPHONE_SIMULATOR
   NSLog(@"do nothing here!");
#else
   HelloLibrary* hl = [[HelloLibrary alloc] init];
   NSString* result = [hl helloLibraryFoo];
#endif 
```

我没有做**任何**其他事情来完成这项工作（没有修改其他**构建设置**）。

在为模拟器构建时，我只收到以下警告：

> ld：警告：忽略文件/Users/me/Desktop/code/MyAppName/libHelloLibrary.a，文件是为存档而构建的，它不是被链接的架构（i386）：/Users/me/Desktop/code/MyAppName/libHelloLibrary。一个

# vb.net - 在 Excel 2010 中使用下划线而不是空格和命名范围创建表格

> ID：15794100
> 
> 赞同：1
> 
> 时间：2013-04-03T17:30:35.497
> 
> 标签：vb.net, ado.net, oledb

我在 Excel 2010 中使用 Visual Studio 2010 Professional。以下代码在新表的字段行上创建了一个名为“Hourly_Burn_Data_By_Plant”的表，而不是“按工厂的每小时烧录数据”和一个具有相同名称的命名范围。这会在向表中添加数据时产生错误。做错了什么？

```
 Dim ConStrTemp As String
    ConStrTemp = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" & "C:\Studies\NewHourlyFuel\Book1.xlsx" & _
    ";Extended Properties=""Excel 12.0;HDR=Yes;"""        'Mode=ReadWrite;ReadOnly=False;"""

    Dim ConnTemp As New OleDbConnection(ConStrTemp)
    Globals.OpenConn(ConnTemp)
    Dim ExistingTables() As String
    ExistingTables = Globals.GetTableNamesFromConn(ConnTemp)
    Dim i As Int16
    For i = 0 To ExistingTables.GetUpperBound(0)
        Debug.Print(ExistingTables(i))
    Next
    Dim NametoCreate As String = "Hourly Burn Data By Plant"

    Dim CreateSQL As String = "Create Table [" & NametoCreate & "] ([Plant] char(50), [RDate] Date, [Period 1] float, " & _
        "[Period 2] float, [Period 3] float, [Period 4] float, [Period 5] float, [Period 6] float, [Period 7] float, [Period 8] float, [Period 9] float, " & _
        "[Period 10] float, [Period 11] float, [Period 12] float, [Period 13] float, [Period 14] float, [Period 15] float, [Period 16] float, [Period 17] float, " & _
        "[Period 18] float, [Period 19] float, [Period 20] float, [Period 21] float, [Period 22] float, [Period 23] float, [Period 24] float, [Daily Total] float)"

    Dim cmd As New OleDb.OleDbCommand(CreateSQL, ConnTemp)
    Try
        cmd.ExecuteNonQuery()
        MsgBox("susccess")
        ExistingTables = Globals.GetTableNamesFromConn(ConnTemp)
        For i = 0 To ExistingTables.GetUpperBound(0)
            Debug.Print(ExistingTables(i))
        Next
        Globals.CloseConn(ConnTemp)
    Catch ex As Exception
        MsgBox("Failure " & ex.Message)
        Globals.CloseConn(ConnTemp)
    End Try 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T22:11:28.480

excel中正确的创建表语法是：

```
CREATE TABLE `SheetName`  (`ColumnName1` TYPE, `ColumnName2` TYPE) 
```

其中 TYPE = 见下面的链接

[http://support.sas.com/documentation/cdl/en/acpcref/63184/HTML/default/viewer.htm#a003072672.htm](http://support.sas.com/documentation/cdl/en/acpcref/63184/HTML/default/viewer.htm#a003072672.htm)

注意使用 ` 而不是 [] 作为名称标识符...

# youtube-api - youtube 品牌频道的 gdata 返回不一致的结果

> ID：15794101
> 
> 赞同：1
> 
> 时间：2013-04-03T17:30:35.617
> 
> 标签：youtube-api, gdata-api

我利用 GData YouTube api 返回用户上传的所有视频的列表。我的查询可以返回不同的结果，具体取决于我从哪台机器上运行它。例如：

`$wget --header="X-GData-Client: XXXXX" --header="User-Agent: XXXXX YouTube-Java/1.0 GData-Java/1.41.5(gzip)" "http://gdata.youtube.com/feeds/api/videos?author=fosters&orderby=published&time=all_time&client=YYY&start-index=50&max-items=25" -q -O - | xmllint --format - | grep total`

（`XXXXX`我的 api 密钥在哪里，并且`YYY`是一个私有标识符）

产生结果：

`<openSearch:totalResults>118</openSearch:totalResults>`

从某些位置，但从其他位置：

`<openSearch:totalResults>68</openSearch:totalResults>`

第一个结果的查询来自位于英国的机器，另一个结果来自位于英国以外的机器。

这些数字中的任何一个都正确吗？我怎么知道是哪一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T04:59:38.287

两者都是正确的，它显示了机器的 ip/国家可播放的视频（默认情况下，如果你没有设置限制参数）。如果您要求

[http://gdata.youtube.com/feeds/api/videos?author=fosters&orderby=published&time=all_time&client=YYY&start-index=50&max-results=25&restriction=GB](http://gdata.youtube.com/feeds/api/videos?author=fosters&orderby=published&time=all_time&client=YYY&start-index=50&max-results=25&restriction=GB)

无论您的机器位于何处，结果都是 118。

还有一件事，**&max-items=**应该更改为**&max-results=**

# java - 使用 Android 应用程序在 Azure 中保留数据的安全错误

> ID：15794107
> 
> 赞同：1
> 
> 时间：2013-04-03T17:30:56.670
> 
> 标签：java, android, azure, azure-mobile-services

显然这是一个安全问题，但是从网站下载的示例工作正常（ToDo），我的应用程序更简单，不起作用，因为我真的不明白，我检查了库，宣言，代码，一切似乎都是正确的. 我究竟做错了什么？我之前对这个问题有一个悬而未决的问题，但现在我想我可以最好地描述这个问题

错误：未经授权

> 完全错误：活动 com.microsoft.windowsazure.mobileservices.MobileServiceException 中的错误：处理请求时出错。在 com.microsoft.windowsazure.mobileservices.MobileServiceConnection$1.onNext 在 com.microsoft.windowsazure.mobileservices.MobileServiceClient$4.handleRequest 在 com.microsoft.windowsazure.mobileservices.MobileServiceConnection.start 在 com.microsoft.windowsazure.mobileservices.RequestAsyncTask.doInBackground at com.microsoft.windowsazure.mobileservices.RequestAsyncTask.doInBackground at android.os.AsyncTask$2.call at java.util.concurrent.FutureTask$Sync.innerRun at java.util.concurrent.FutureTask.run at android.os.AsyncTask$ SerialExecutor$1.run at java.util.concurrent.ThreadPoolExecutor.runWorker at java.util.concurrent.ThreadPoolExecutor$Worker.run at java.lang。

我的下载代码：[https ://skydrive.live.com/embed?cid=3CF3FC770FC59E9B&resid=3CF3FC770FC59E9B!1277&authkey=ADQMeBtUVTTIjtE%22](https://skydrive.live.com/embed?cid=3CF3FC770FC59E9B&resid=3CF3FC770FC59E9B!1277&authkey=ADQMeBtUVTTIjtE%22)

```
package com.bn7.rota;
import java.net.MalformedURLException;

import com.bn7.rota.Item;
import com.microsoft.windowsazure.mobileservices.*;
import android.os.Bundle;
import android.app.Activity;
import android.util.Log;
import android.view.Menu;

public class MainActivity extends Activity {
    private MobileServiceClient mClient;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        try {
             mClient = new MobileServiceClient( 
                    "https://bn7.azure-mobile.net/", 
                    "hCzcrsFYhkGmxPvQDNxyqBXjZwjXlK99", 
                    this 
                    );
            Item item = new Item(); 
            item.IdPhone = "Awesome item"; 
            item.DateTimePhone = "2013/04/02 08:27:32"; 
            item.LatitudePhone = -43; 
            item.LongetudePhone = -23; 
            item.Active = false; 
            mClient.getTable(Item.class).insert(item, new TableOperationCallback<Item>() {
                 public void onCompleted(Item entity, Exception exception, ServiceFilterResponse response) { 
                    if (exception == null) { 
                         // Insert succeeded 
                                            } else { 
                         // Insert failed
                        Log.d("Insert failed", "*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*");
                        Log.d("Insert failed", "Error in activity", exception);  
                        Log.d("Insert failed", "*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*-*");
                    } 
                 } 
            });
        } catch (MalformedURLException e) {
            Log.d("MalformedURLException", e.toString());
        }
}

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

}
package com.bn7.rota;

public class Item { 
    public int Id; 
    public String IdPhone;
    public String DateTimePhone;
    public double LatitudePhone;
    public double LongetudePhone;
    public boolean Active;
    }

<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.bn7.rota"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="10"
        android:targetSdkVersion="17" />
        <uses-permission android:name="android.permission.INTERNET" />
        <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.bn7.rota.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T20:55:55.027

您收到的 Unauthorized 错误表明您无权对表执行操作。如果您的操作权限（在门户中）设置为“任何拥有应用程序密钥的人”，那么您发送的应用程序密钥不正确。如果它设置为“仅经过身份验证的用户”，则您需要成为经过身份验证的用户（使用移动服务）才能使其工作。如果它设置为“仅脚本和管理员”，那么您要么必须在标题中发送您的主密钥，要么从不同的脚本访问表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-07T18:44:55.823

[![认证/授权](https://i.stack.imgur.com/ZeF4U.png)](https://i.stack.imgur.com/ZeF4U.png)

确保身份验证/授权已关闭！

# mysql - 尝试恢复数据库时，mysqldump 会做什么？

> ID：15794109
> 
> 赞同：0
> 
> 时间：2013-04-03T17:30:57.430
> 
> 标签：mysql, mysqldump

我一直在尝试找到一种备份和恢复数据库的好方法，结果发现了`mysqldump`. 我一直在使用命令提示符来访问可执行文件，并且可以使用以下命令在 sql 文件中创建数据库的备份：

```
mysqldump.exe -u [username] -p [databasename] -h localhost > [path]\backup.sql 
```

然后我输入我的密码以执行它。
万一它不明白：

```
[username]=my username for accessing the database  
[databasename]=my name for the database that I'm trying to back up  
[path]=the folder path to where I want to save my back up. 
```

使用这个命令，我可以创建一个备份，我查看并发现恢复它的方法就是翻转它，`> to <`所以你会得到这个：

```
mysqldump.exe -u [username] -p [databasename] -h localhost > [path]\backup.sql 
```

然后我输入我的密码以执行它。
当它执行时，它会打印出它正在转储的内容（如果我删除了一些应该恢复的表，则不会创建新表）。我认为它只添加了表中尚未添加的值，因为我添加了一行，并且在我尝试恢复以前版本的数据库时它没有被删除。
我可以使用客户端或命令提示符命令正常执行 backup.sql 文件，但我只想了解为什么`mysqldump`它没有按照我的预期执行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T17:43:41.147

`mysqldump`仅用于备份，您不能使用它从转储中加载数据。`mysqldump`生成一个转储文件，其中只包含重新创建数据库结构和重新填充数据所需的 SQL 命令。

恢复饲料转储到`mysql.exe`.

当你这样做

```
mysql -u[username] -p[root_password] [database_name] < dumpfile.sql 
```

你基本上登录到 MySQL，然后你要求它执行保存在里面的所有 SQL 操作，就`dumpfile.sql`这么简单。

# android - 在 Android 上为半屏注册 Touch 事件

> ID：15794110
> 
> 赞同：2
> 
> 时间：2013-04-03T17:31:02.240
> 
> 标签：android, input, touch

我试图让我的程序识别用户是在不使用按钮的情况下触摸屏幕的左半部分还是屏幕的右半部分，所以我研究了使用 onTouchEvent 方法。

这是我到目前为止所得到的，但它似乎不起作用，它只会在我触摸它的任何地方读取为左半触摸。

```
 public boolean onTouchEvent(MotionEvent event) {
    if (event.getAction() == MotionEvent.ACTION_UP) {

        DisplayMetrics metrics = this.getResources().getDisplayMetrics();
        int width = metrics.widthPixels;
        int y = (int)event.getY();

        if ((y < (width / 2)) {
        someint = 1;
        } else if ((y > (width / 2)) {
        someint = 2;
        }
     }
   } 
```

有人知道我在做什么错吗？

# javascript - 像 fb.api 的照片

> ID：15794112
> 
> 赞同：1
> 
> 时间：2013-04-03T17:31:05.633
> 
> 标签：javascript, facebook, api, facebook-like, photo

当用户单击我的应用程序上的图像时，我试图代表用户在照片中发布一个赞，到目前为止，我知道我必须请求 publish_stream 权限并将帖子发送到 fb.api 像这样（fb .api(PHOTO_ID/likes,post,function(response){}); 我的问题是，每次我点击一张图片时，post方法的结果都是真的，但照片上的like它从未实现，我的代码是这样的：

```
FB.login(function(response) 
{
  if(response)  {
      var cadena = photoId + '/likes';
      FB.api(cadena, 'post', function(result) {
          console.dir(result);
      });
  }
}, {scope: 'publish_stream'}); 
```

提前感谢所有建议

# java - AFreeChart 图表未填充父级

> ID：15794116
> 
> 赞同：4
> 
> 时间：2013-04-03T17:31:24.413
> 
> 标签：java, android, jfreechart

我试图用 AFreeChart 绘制一些图表，它工作得很好。但图表未填满显示屏上的所有可用空间。我怎样才能做到这一点？

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="horizontal"
android:layout_gravity="center" >

<com.example.digitalfilter.DemoView
    android:id="@+id/demoView1"
    android:layout_width="match_parent"
    android:layout_height="match_parent" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-16T07:21:25.597

如果您将`AbsChartView`其用作基本图表视图，请转到`paintComponent`并将其更改为以下代码部分：

```
 public void paintComponent(Canvas canvas) {

    // first determine the size of the chart rendering area...
    Dimension size = getSize();
    RectangleInsets insets = getInsets();
    RectShape available = new RectShape(insets.getLeft(), insets.getTop(),
            size.getWidth() - insets.getLeft() - insets.getRight(),
            size.getHeight() - insets.getTop() - insets.getBottom());

    double drawWidth = available.getWidth();
    double drawHeight = available.getHeight();
    this.scaleX = 1.0;
    this.scaleY = 1.0;

    RectShape chartArea = new RectShape(0.0, 0.0, drawWidth,
            drawHeight);

    this.chart.draw(canvas, chartArea, this.anchor, this.info);

    this.anchor = null;
} 
```

然后它将使用 android View 显示的确切大小

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-14T07:13:40.480

尝试并删除

```
android:layout_gravity="center" 
```

# android - 从 sdcard 解析 xml 文件

> ID：15794118
> 
> 赞同：0
> 
> 时间：2013-04-03T17:31:29.393
> 
> 标签：android, xml-parsing, android-sdcard

如何从此代码解析 xml 文件。代码从 URL 工作，但我需要从 sdcard 解析 xml 文件。我添加了从 sdcard 写入和读取的权限。

```
Code :

    menuItems = new ArrayList<HashMap<String, String>>();
            final XMLParser parser = new XMLParser();
            String xml = parser.getXmlFromUrl(URL); // getting XML
            Document doc = parser.getDomElement(xml); // getting DOM element

            NodeList nl = doc.getElementsByTagName(KEY_ITEM);
            // looping through all item nodes <item>
            for (int i = 0; i < nl.getLength(); i++) {
                // creating new HashMap
                HashMap<String, String> map = new HashMap<String, String>();
                Element e = (Element) nl.item(i);
                // adding each child node to HashMap key => value

                map.put(KEY_NAME, parser.getValue(e, KEY_NAME));
                map.put(KEY_COST, "Datum: " + parser.getValue(e, KEY_COST));
                map.put(KEY_DESC, parser.getValue(e, KEY_DESC));
                map.put(KEY_LINK, parser.getValue(e, KEY_LINK));
                map.put(KEY_LINK1, parser.getValue(e, KEY_LINK1));

                // adding HashList to ArrayList
                menuItems.add(map);

            } 
```

XML类：

```
public String getXmlFromUrl(String url) {
        String xml = null;

        try {
            // defaultHttpClient
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url);

            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            xml = EntityUtils.toString(httpEntity);

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        // return XML
        return xml;
    }

    /**
     * Getting XML DOM element
     * @param XML string
     * */
    public Document getDomElement(String xml){
        Document doc = null;
        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        try {

            DocumentBuilder db = dbf.newDocumentBuilder();

            InputSource is = new InputSource();
                is.setCharacterStream(new StringReader(xml));
                doc = db.parse(is); 

            } catch (ParserConfigurationException e) {
                Log.e("Error: ", e.getMessage());
                return null;
            } catch (SAXException e) {
                Log.e("Error: ", e.getMessage());
                return null;
            } catch (IOException e) {
                Log.e("Error: ", e.getMessage());
                return null;
            }

            return doc;
    }

    /** Getting node value
      * @param elem element
      */
     public final String getElementValue( Node elem ) {
         Node child;
         if( elem != null){
             if (elem.hasChildNodes()){
                 for( child = elem.getFirstChild(); child != null; child = child.getNextSibling() ){
                     if( child.getNodeType() == Node.TEXT_NODE  ){
                         return child.getNodeValue();
                     }
                 }
             }
         }
         return "";
     }

     /**
      * Getting node value
      * @param Element node
      * @param key string
      * */
     public String getValue(Element item, String str) {     
            NodeList n = item.getElementsByTagName(str);        
            return this.getElementValue(n.item(0));
        }
} 
```

我需要编辑什么？sdcard 上文件夹的位置是“/sdcard/.Folder/”。我可以在 XMLClass 上添加该代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T18:10:32.850

> 我需要编辑什么？sdcard 上文件夹的位置是“/sdcard/.Folder/”。我可以在 XMLClass 上添加该代码吗？

这是我的第一个想法。

由于您的源文件位于手机中，因此您可以删除所有工作，`HttpClient`因为您不需要它。然后您需要读取您的文件并将其内容分配给 String。例如，我建议使用[StringBuffer](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/StringBuffer.html)来提高效率。要获取外部存储的路径，您应该使用提供正确方法的[Enviroment](http://developer.android.com/reference/android/os/Environment.html)类。

**伪代码：**

```
public String getXmlFromFile(String filename) {
   StringBuffer buff = new StringBuffer();
   File root = Environment.getExternalStorageDirectory();
   File xml = new File(root, "pathToYourFile");
   BufferedReader reader = new BufferedReader(new FileReader(xml));
   String line = null;
   while ((line = reader.readLine()) != null) {
      buff.append(line).append("\n");
   }
   reader.close();
   return buff.toString();
} 
```

现在你`XML`在内存中有你的字符串，你可以将它传递给`getDomElement(String xml)`方法。

## 选项 2：

你也可以直接分配你`File`的`DocumentBuilder`

**伪代码：**

```
Document doc = null;
DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
DocumentBuilder builder = factory.newDocumentBuilder();
File root = Environment.getExternalStorageDirectory();
File xmlFile = new File(root, "pathToYourFile");
doc = builder.parse(xmlFile);
return doc; 
```

## 笔记：

您也可以用作`parse()`函数 raw`InputStream`的参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T19:17:09.213

您可以使用`XmlPullParser`类和`.setInput(bufferedReader)`方法来读取文件。路径通过`Environment`类获取。

# java - 带有 for 循环的 Java 面试任务

> ID：15794119
> 
> 赞同：0
> 
> 时间：2013-04-03T17:31:30.713
> 
> 标签：java, for-loop

我在求职面试中遇到了这个问题，我想知道其他人会如何解决它。问题是有一个类 Auction，你不能以任何方式修改它。输出必须始终如下所示（物品只能出售一次）

```
ITEM #1: SOLD!
ITEM #2: SOLD!
END 
```

没有给出 Item 类实现，所以我可以自己编写。还必须从 Auction 类内部打印输出。我正在为这个问题寻求 Java 代码解决方案。

```
public class Auction {

  public static void main(String[] args) {

    for (int i = 0; i < (Math.random() * 100) + 2; i++) 
      if (Item.sell())
        System.out.println("ITEM #1: SOLD!");

    for (int i = 0; i < (Math.random() * 100) + 2; i++)
      if (Item.sell()) 
        System.out.println("ITEM #2: SOLD!");

    System.out.println("END");
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T17:35:41.643

这是一个不使用的解决方案`System.exit`

```
public class Item {
  private static int numItems = 2;

  public static boolean sell() {
    if(numItems > 0) {
      numItems -= 2;
      System.out.println("ITEM #1: SOLD!");
      System.out.println("ITEM #2: SOLD!");
    }
    return false;
  }
} 
```

另外，不要为这家公司工作，这个问题很愚蠢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T17:38:14.277

我想到的最简单的事情..

```
public class Item {
    public static boolean sell() {
        System.out.println("ITEM #1: SOLD!");
        System.out.println("ITEM #2: SOLD!");
        System.out.println("END");
        System.exit(0);
    }
} 
```

# javascript - iPad 上的 Html5 视频燕子事件。使用 Vimeo

> ID：15794122
> 
> 赞同：2
> 
> 时间：2013-04-03T17:31:48.427
> 
> 标签：javascript, ipad, iframe, mobile-safari, html5-video

我和这里的这篇文章有同样的问题。[iPad 上的 HTML5 视频元素不会触发 onclick 或 touchstart 事件？](https://stackoverflow.com/questions/3803702/html5-video-element-on-ipad-doesnt-fire-onclick-or-touchstart-events)

我有覆盖视频的前进和后退按钮。当视频在 Ipad 上播放时，Ipad 使用它自己的 quicktime 播放器。问题在于，播放器会覆盖对其的任何点击并将其解释为视频命令。

另一篇文章的解决方案是禁用 html5 标签中的控件。

> 如果您使用 controls 属性，iPad 上的 video 元素将吞噬事件。如果您希望元素响应触摸事件，则必须提供自己的控件。

但是，我正在使用 Vimeos IFrame 代码嵌入视频。

有谁知道删除 vimeo 视频上的控件属性的方法，或者可能是从 iframe 中刮取视频代码的方法？这样我就可以自己删除控件属性。

问候。

# c - 如何使用 C99 标准类型在大多数平台上实现最大的可移植性和效率？

> ID：15794124
> 
> 赞同：9
> 
> 时间：2013-04-03T17:32:04.330
> 
> 标签：c, performance, optimization, types, c99

首先，这是我理解并认为该问题正确的内容。

1.  `for`对计数器或循环索引等单个变量使用快速数据类型。例如：

    ```
    #define LOOP_COUNT (100U)

    uint_fast8_t index;
    for(index = 0; index < LOOP_COUNT; index++){
        /* Do something */
    } 
    ```

    我想这里最合适的类型是`uint_fast8_t`因为`index`永远不能超过 255，这将是所有平台上最快的实现。如果我`unsigned int`改用它，它将在 >=16 位平台中最快，但在 <16 位平台中会较慢，因为`int`标准最低 16 位。此外，如果我`uint8_t`在 >8 位平台上使用它会更慢，因为编译器会添加一条`AND 0xFF`指令来检查每个增量的溢出（我的 ARM7 编译器即使在全速优化时也会这样做）。`size_t`也不是一个选项，因为它可以大于本机整数大小。

    如果预计 8 位溢出，则不好的一面（？）不会发生。程序员应该手动检查溢出（因为他/她应该恕我直言），如果忘记这可能会导致错误代码。此外，如果 LOOP_COUNT 在 >8 位平台上“意外”设置为大于 255 的值，编译器（甚至令我惊讶的是 PC-Lint）不会给出任何警告/问题，但警告将在 8 位平台上生成，这将降低可移植性并引入错误，但这可以通过`#if`检查来避免。

2.  如果在数组或结构中需要关注内存使用情况，请尽可能使用最少的数据类型。例如：

    ```
    uint_least8_t array[100]; 
    ```

    如果关注内存使用，这是声明数组的最便携和最有效的方法。如果平台上可以进行字节访问，则此类型将给出一个字节数组，否则将给出最小可访问宽度的整数数组。此外，如果我们有结构的数组，则可以在结构中使用最少类型。

    最小类型也会遇到快速类型的问题，因为两种情况下变量的宽度都可以在不同的平台上更改。

3.  尽可能避免固定宽度的数据类型，因为它们在某些平台上甚至可能不存在，除了硬件寄存器访问、通信协议映射等，我们需要知道变量的确切位。例如：

    ```
    typedef struct {
        uint8_t  flags;
        uint8_t  length;
        uint8_t  data[100];
        uint16_t crc;
    } __attribute__((packed)) package_t; 
    ```

    通常`__attribute__((packed))`（或类似的东西）应该用于确保在这些情况下不会插入填充，因为这本身就是一个问题。

现在，如果我的理解是正确的，我认为最少的数据类型更可能用于数组或结构，快速数据类型更可能用于单个变量，而固定数据类型不太可能用于实现最大便携性和效率。但是每次都输入“快速”和“最少”并不令人鼓舞。所以，我想到了一个类型集如下：

```
 typedef [u]intN_t       os_[u|s]exactN_t;
    typedef [u]int_fastN_t  os_[u|s]N_t;
    /* I couldn't come up with a better name */
    typedef [u]int_leastN_t os_[u|s]minN_t;
    /* These may change */
    typedef uint_least8_t   os_byte_t;
    typedef uint_least16_t  os_word_t;
    /* ... */ 
```

*   首先，重要的问题是，我的理解是真的吗？
*   使用 C99 标准类型的最可移植和最有效的方法是什么？如果它不是真的，你将如何声明它们？
*   我的类型集是否有意义或可能产生错误代码？

另外，我很高兴知道您如何以及在何处使用 C99 标准类型。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T18:34:23.937

编写高度可移植的代码很难。编写最佳且正确工作的高度可移植的代码更加困难。

在大多数情况下，如果可行，我会建议使用基本类型，例如`int`,`char`等，而不是`uint8_t`or `uint8_fast_t`。类型`int`和`char`保证存在。毫无疑问。当然，有时我们需要代码中的特定行为，而这将需要特定类型 - 但如果系统不支持该确切类型，该代码很可能会中断。

`int`对于您的第一个示例，除非您的代码设计为（也）在 8 位处理器上运行，否则您不太可能获得比 using 更好的性能。在 16 位、32 位或 64 位处理器上，本机大小将是最快的 for 循环（无符号在 64 位机器上稍好一些，因为它不需要符号扩展）。

在您的第二个示例中，只有数组足够大以保证节省空间而不是使用对内容有意义的或或或任何内容`char`时才`int`重要。`short`在现代机器上（包括许多嵌入式平台，甚至在使用堆栈时）400 字节实际上并没有那么多。

对于您的第三个示例，显然，对于协议，您将需要使用与协议定义完全匹配的类型，否则会出错。在不支持正确类型的平台上，这必须以某种特定于平台的方式来解决 - 你如何去做将取决于平台实际支持的内容。

因此，要回答您的具体问题：

*   似乎您了解整体概念。但是，如果这有意义的话，您似乎也试图将其推得比需要推的更远。
*   不适用。
*   过度使用“特殊类型”变量可能会：

    1.  放慢速度，
    2.  可能会导致错误，特别是如果没有始终如一地使用它。

还要记住，性能通常是 90% 的时间由 10% 的代码占用。了解您的代码在哪里（在正常使用情况下）花费时间是至关重要的。当然，当将代码移植到不同的系统和不同的架构上时，您可能会发现性能瓶颈移动了，这取决于处理器速度、缓存大小和内存速度之间的关系。具有高处理器速度但（实际上）小缓存的系统有时会比具有较低时钟速度和更大缓存的类似系统执行得更差，仅作为一个示例。

# c# - 休眠插入错误 (GenericADOException)

> ID：15794128
> 
> 赞同：1
> 
> 时间：2013-04-03T17:32:13.837
> 
> 标签：c#, asp.net-mvc, nhibernate, model-view-controller

我是 NHibernate 的新手，所以我不确定我做错了什么。我目前收到此消息：

> 无法插入：[NhibernateTest.Domain.Order#5ed0d146-644b-44ff-a080-f8cf3048158e][SQL: INSERT INTO Order (OrderName, ShippingAddress, ShippingDate, OrderID) VALUES (?, ?, ?, ?)]

我正在尝试对我的数据库进行基本插入，该数据库只有一个表。

我的域类：

```
 public class Order
{
    public virtual Guid OrderID { get; set; }
    public virtual string Name { get; set; }
    public virtual string ShipAddress { get; set; }
    public virtual string ShipDate { get; set; }

    public Order()
    {

    }

    public Order(string name, string shipAddress, string shipDate)
    {
        Name = name;
        ShipAddress = shipAddress;
        ShipDate = shipDate;
    }
} 
```

还有我的映射：

```
<?xml version="1.0" encoding="utf-8" ?>
    <hibernate-mapping xmlns="urn:nhibernate-mapping-2.2" assembly="NhibernateTest" namespace="NhibernateTest.Domain">
    <class name="Order" table="Order" lazy="true">
        <id name="OrderID" column="OrderID">
            <generator class="guid" />
        </id>
        <property name="Name" column="OrderName" type="string" />
        <property name="ShipAddress" column="ShippingAddress" type="string" />
        <property name="ShipDate" column="ShippingDate" type="string" />
  </class>
</hibernate-mapping> 
```

我的订单库：

```
 public void Add(Order order)
    {
        /* Open up a session to the database. */
        using (ISession session = NHibernateHelper.OpenSession())
        {
            /* Open up a transaction to the database since an order object will be added. */
            using (ITransaction transaction = session.BeginTransaction())
            {
                session.Save(order);
                transaction.Commit();
            }
        }
    } 
```

这是我的 AddMethod 以及我的 loadCfg 函数：

```
 [HttpPost]
    public ActionResult AddOrder(FormCollection form)
    {
        LoadNHibernateCfg();

        OrderRepository repo = new OrderRepository();

        var order = new Order { Name = form[0], ShipAddress = form[1], ShipDate = form[2] };
        //order.Name = form[0];
        //order.ShipAddress = form[1];
        //order.ShipDate = form[2];

        repo.Add(order);

        return Index();
    }

    public static void LoadNHibernateCfg()
    {
        var cfg = new Configuration();
        cfg.Configure();
        cfg.AddAssembly(typeof (Order).Assembly);
        new SchemaExport(cfg).Execute(true, false, true);
    } 
```

我知道 Order 对象在传递给 .Add 函数时具有信息。所以我认为它一定与我的映射有关？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T18:02:36.203

`Order`是保留关键字。例如，在查询您使用的东西时`Order by`。以下是所有保留字的列表：http: [//msdn.microsoft.com/en-us/library/aa238507%28v=sql.80%29.aspx](http://msdn.microsoft.com/en-us/library/aa238507%28v=sql.80%29.aspx)

您只需更改表名和映射即可解决此问题。例如，您可以命名您的表`Orders`：

```
<class name="Order" table="Orders" lazy="true"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-27T13:30:22.400

我收到如下错误：无法插入：[RegEmails.Model.RegInfo][SQL: INSERT INTO reg_info (MESSAGE_HASH, IS_INTERNAL, PRODUCT, SERVER, VERSION, MODULE, BRIDGE_LICENCE, BRIDGE_LICENCE_EXPIRY, BACK_OFFICE_LICENCE, BACK_OFFICE_LICENCE_EXPIRY, COMMENT, CREATE_DATE) VALUES (? , ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]

我有类似的东西

```
<id name="info_id" column="INFO_ID">
  <generator class="identity" />
</id>
<property name="MessageHash" column="MESSAGE_HASH" length="512" />
<property name="IsInternal" column="IS_INTERNAL" />
<property name="Product" column="PRODUCT" />
<property name="Server" column="SERVER" />
<property name="Version" column="VERSION" />
<property name="Module" column="MODULE" />
<property name="BridgeLicence" column="BRIDGE_LICENCE" />
<property name="BridgeLicenceExpiry" column="BRIDGE_LICENCE_EXPIRY" />
<property name="BackofficeLicence" column="BACK_OFFICE_LICENCE" />
<property name="BackofficeLicenceExpiry" column="BACK_OFFICE_LICENCE_EXPIRY" />
<property name="Comment" column="COMMENT" />
<property name="CreateDate" column="CREATE_DATE" /> 
```

InnerException：“字段列表”中的未知列“MESSAGE_HASH”

我通过删除解决了

```
<id name="info_id" column="INFO_ID">
  <generator class="identity" />
</id>
<property name="MessageHash"  length="512" />
<property name="IsInternal"  />
<property name="Product" />
<property name="Server"  />
<property name="Version" />
<property name="Module"  />
<property name="BridgeLicence"  />
<property name="BridgeLicenceExpiry" />
<property name="BackofficeLicence" />
<property name="BackofficeLicenceExpiry"  />
<property name="Comment" />
<property name="CreateDate"  /> 
```

# javascript - 如何将包含特殊字符的 JavaScript 字符串与 PHP 的 htmlentities() 编码的字符串进行比较？

> ID：15794137
> 
> 赞同：1
> 
> 时间：2013-04-03T17:33:00.567
> 
> 标签：javascript

我正在使用 PHP 从 MySQL 数据库中获取数据，然后将其回显到页面。我使用编码字符串`htmlentities()`来避免 XSS 问题。我需要将用户在文本框中写入的文本与回显的数据进行比较，但我遇到了问题。假设数据库中的数据是`le beau-frère`，那么回显出来的数据是这样的：

```
le beau-fr&egrave;re 
```

用户输入的数据如下所示：

```
le beau-frère 
```

如果我尝试直接比较两个字符串，它们显然不一样。

如何将其中一个字符串转换为另一个字符串的格式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T17:42:07.060

我会使用 innerText - 它会将 htmlentities 数据从

```
le beau-fr&egrave;re 
```

到

```
le beau-frère 
```

* * *

如果您已将保存的数据直接回显到 javascript，那么为了使用 innerText 解决方法，您必须使用 innerHTML 将其保存到 div 并使用 innerText 再次获取它。例如

```
<div id="foo"></div>

<script type="text/javascript">
document.getElementById('foo').innerHTML = 'le beau-fr&egrave;re';
var savedData = document.getElementById('foo').innerText;
</script> 
```

* * *

如果你想让它保持整洁，我会在 JavaScript 中创建一个临时 div，然后将其删除。

# javascript - 如何从 URL 获取 JSON 字符串？

> ID：15794140
> 
> 赞同：-2
> 
> 时间：2013-04-03T17:33:11.600
> 
> 标签：javascript, jquery, ajax, json, url

我正在尝试从返回 JSON 字符串中数据的 URL 获取数据。

网址：[http ://forums.zybez.net/pages/2007-price-guide-api?term=adamant+axe](http://forums.zybez.net/pages/2007-price-guide-api?term=adamant+axe)

我想要做的是将此字符串存储在一个变量中，如下所示：
var jsonData = '[get JSON string from URL]';

但我不确定如何从 URL 中获取 JSON 字符串。任何帮助，将不胜感激！！:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T18:12:57.720

这是您尝试执行的 X-Domain-Request。默认情况下这是禁止的 - 出于安全原因。

您可以实现 JSONP 回调。然后，您会将回调的名称（必须在每个请求上生成）发送到您希望从中接收数据的服务器，作为回报，该服务器将为您提供一个您可以调用的函数来检索您的数据来自。

另一个选项是 CORs 服务器 [http://enable-cors.org/server.html](http://enable-cors.org/server.html)您请求数据的 HTTP-Server 必须有一个软件模块适当地处理您的请求，发送正确的 MIME 类型和等等。

不过，还有另一种方法：使用“包装器”

您可以设置一个在两者之间工作的 Web 服务器。它会下载您的请求并将其转发给您。就像您直接从该服务器请求数据一样（显然您会这样做，但它不是提供数据的实际服务器）。

实现这一点的一种方法是使用 PHP 脚本下载数据并将其定向给您。

示例实现的基本部分：

*   您的**html**文件请求数据： **processData.html**（从 127.0.0.1/getData.php 请求**数据**？**location** = **URL**）

*   您的**php**文件用作包装器并从**URL**下载数据（其中 location 是您发送到包装器文件的参数）：getData.php

*   您的实际服务器位于（**URL**）作为参数位置提供给 php 文件的**位置** （确保在将 URL 参数发送到您的 php 文件之前对其进行转义）

还有更多方法可以实现您想要实现的目标。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T17:35:29.267

这些`jQuery.getJSON()`函数使您可以轻松访问从服务器返回的 JSON 数据。[http://api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)

# python - Python：使用带有 Tornado Web 服务器的瓶子来处理并发连接

> ID：15794141
> 
> 赞同：1
> 
> 时间：2013-04-03T17:33:18.837
> 
> 标签：python, concurrency, tornado, bottle, python-multithreading

我是 Python 和 Web 技术的新手，我目前正在构建一个使用 Bottle 框架的 Web 服务。但是我发现对我的服务器的请求实际上是相互干扰的，即当多个请求同时运行时，它们都会变得非常慢。经过几轮搜索，我发现当负载增加时，瓶子实际上还有其他服务器选项（例如龙卷风）来处理并发连接：http: [//bottlepy.org/docs/dev/deployment.html#server-options](http://bottlepy.org/docs/dev/deployment.html#server-options)

但是文档确实提到了很多关于实际实现的内容。所以我的问题是，如何结合使用 Bottle 和 Tornado 来处理并发连接？任何程度的帮助将不胜感激。

在此先感谢，埃里克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T19:31:32.480

[您可以使用此](http://bottlepy.org/docs/stable/deployment.html#switching-the-server-backend)列表尝试不同的后端。代替龙卷风，pasteserver 可能是一个不错的选择。如果这不起作用，您可以尝试使用 apache。裁判应该解释如何。

# iphone - STTweetLabel 介绍 UITableViewCell

> ID：15794144
> 
> 赞同：2
> 
> 时间：2013-04-03T17:33:41.097
> 
> 标签：iphone, objective-c, xcode, tableview, cell

我用这个[https://github.com/SebastienThiebaud/STTweetLabel](https://github.com/SebastienThiebaud/STTweetLabel)

但我正在尝试将其添加到 UITableViewCell 如下

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

static NSString *CellIdentifier = @"Cell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (!cell) {

cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
cell.selectionStyle = UITableViewCellSelectionStyleNone;

}

STTweetLabel *_tweetLabel = [[STTweetLabel alloc] initWithFrame:CGRectMake(20.0, 60.0, 280.0, 230.0)];
[_tweetLabel setFont:[UIFont fontWithName:@"HelveticaNeue" size:17.0]];
[_tweetLabel setTextColor:[UIColor blackColor]];
STLinkCallbackBlock callbackBlock = ^(STLinkActionType actionType, NSString *link) {

    SString *displayString = NULL;

    switch (actionType) {

        case STLinkActionTypeAccount:
            displayString = [NSString stringWithFormat:@"Twitter account:\n%@", link];
            break;

        case STLinkActionTypeHashtag:
            displayString = [NSString stringWithFormat:@"Twitter hashtag:\n%@", link];
            break;

        case STLinkActionTypeWebsite:
            displayString = [NSString stringWithFormat:@"Website:\n%@", link];
            break;
    }

    NSLog(@"%@",displayString);

    };

    [_tweetLabel setCallbackBlock:callbackBlock];
    [_tweetLabel setText:@"http://www.google.com"];
    [cell addSubview:_tweetLabel];

    return cell;

} 
```

但错误是：

```
-[__NSArrayM set]: unrecognized selector sent to instance 0x750b160
2013-04-03 15:36:36.425 Shahona Fashion[18426:c07] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSArrayM set]: unrecognized selector sent to instance 0x750b160' 
```

所以我的问题是，是否可以添加 intro tableView 单元格，或者有什么方法可以以这种方式去除网址？

提前致谢 ..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T17:51:41.980

如果我理解您的问题，您希望表格的第一个单元格与其他单元格不同吗？

您可以尝试一个简单的 if 语句。

```
if (indexPath.row == 0)
{
    //set up as "intro cell"
} else {
    //set up the rest of your cells
} 
```

此外，您的错误看起来与您表上的代码无关。查看应用程序中的任何数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-06T20:30:41.433

您的问题与 STTweetLabel 有关。这是 STTweetLabel 3.0 中修复的错误。

# java - 如何添加到 Riak POJO 对象的链接？

> ID：15794151
> 
> 赞同：2
> 
> 时间：2013-04-03T17:34:04.543
> 
> 标签：java, scala, riak

在 Scala 中使用 Riak Java 客户端。当我去存储一个对象时，我使用以下方法，除了`NullPointerException`当我去时它会抛出一个`addLink`：

```
def store(clientId: String, userId: String, o: PointBalance) = {
    bucket.store(o).withRetrier(DB.retrier).execute()

    val tagThis = bucket.fetch(formatKey(clientId, userId)).r(2).withRetrier(DB.retrier).execute()
    tagThis.addLink(new RiakLink("users", userId, "owner"))
    bucket.store(tagThis).withRetrier(DB.retrier).execute()
  } 
```

我试图在`IRiakObject`没有 POJO 反序列化的情况下检索一个基本的，因此它会公开该`addLink`方法，但*似乎*Riak 不会返回一个对象，除非它属于那个 POJO 类。

如何将 a 添加`RiakLink`到基本 POJO？谢谢。

## 更新

出于某种原因，上面的 fetch 正在检索空对象。不知道为什么会这样。我的普通方法和这里的方法之间的唯一区别`fetch`是我正在反序列化为 POJO。看这里：

普通的：`bucket.fetch(formatKey(clientId, userId), classOf[PointBalance]).r(2).withConverter(converter).withRetrier(DB.retrier).execute()`

获取 IRiakObject：`bucket.fetch(formatKey(clientId, userId)).r(2).withRetrier(DB.retrier).execute()`

任何想法为什么会这样？

# cocoa - 多个 MVC Cocoa 之间的通信

> ID：15794153
> 
> 赞同：0
> 
> 时间：2013-04-03T17:34:07.293
> 
> 标签：cocoa, model-view-controller, cocoa-design-patterns

这个话题在我脑海中有一段时间。假设我有一个需要用户登录的 Cocoa 应用程序。用户登录后，应用程序将显示从数据库中获取的一些数据。我有两个精心设计的 MVC（LoginModel、LoginView、LoginController & DataModel、DataView、DataController）。从 LoginController 重定向到 DataController 的最佳方式是什么？此外，如果我还有 Data2Model、Data2View、Data2Controller，我怎么能在 MVC 之间切换？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T19:13:53.460

创建一个“凭据控制器”基类，用于检查身份验证令牌并在身份验证不存在时自动启动您的登录控制器。

您的登录控制器需要一个属性才能让控制器返回（或者如果使用 iOS，您可以直接弹出视图控制器堆栈）。

使用此设置，您只需使用您的凭证控制器，当凭证过期时它们将自动显示登录信息。

# perl - 比较两个数组哈希是否相等

> ID：15794160
> 
> 赞同：3
> 
> 时间：2013-04-03T17:34:29.550
> 
> 标签：perl, hash, compare, equality

我想比较两个数组散列，看看它们是否相等。也就是说，键值应该包含相同的元素。

```
my %h1 = (
    w1 => ['3','1','2'],
    e2 => ['6','2','4'],
    r1 => ['8', '1'],
);

my %h2 = (
    w1 => ['3','1','2'],
    e2 => ['6','2','4'],
    r1 => ['8','1'],
);

 my %h3 = (
    w1 => ['3','1','2'],
    e2 => ['6','2','4'],
    r1 => ['4','1'],
);

my $i = 0;

foreach ( keys %h2 ){
    my $conditional = scalar keys %h2;  # 3
    if ([sort @{$h1{$_}}] ~~ [sort @{$h2{$_}}]) {
        $i++;
    }
    if ($i eq $conditional){
        print "true\n";
    }
} 
```

比较`%h1`并且`%h2`应该返回 true，因为它们是相等的。比较`%h1`和`%h3`打印什么。1）有没有更好的方法来做到这一点？

**编辑**

我想在不使用模块中的函数的情况下做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T17:43:38.630

试试[Test::Deep::NoTest](https://metacpan.org/module/Test%3a%3aDeep%3a%3aNoTest)，它处理[Test::Deep](https://metacpan.org/module/Test%3a%3aDeep)所做的一切，除了它只返回 true 或 false 而不输出 TAP 测试。

```
print "true" if eq_deeply(\%h1, \%h2) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-03T17:54:24.427

`Data::Dumper`是序列化数据结构的核心模块。然后您可以测试序列化的字符串相等性。

```
use Data::Dumper;
$Data::Dumper::Sortkeys = 1;
if (Dumper(\%hash1) eq Dumper(\%hash2)) {
    print "hashes are equal\n";
} 
```

如果 even`Data::Dumper`是禁止的，请编写您自己的将 HoA 转换为字符串的序列化例程，并比较字符串。只要确保您不会被返回哈希键的随机顺序绊倒（这就是`$Data::Dumper::Sortkeys=1`上面示例中的行）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T11:37:04.160

我会为每个操作创建单独的子程序：测试数组是否相等且哈希值相同：

```
sub is_arrays_equal($$) {
    my ($a, $b) = @_;
    if (scalar @$a != scalar @$b) {
        return 0;
    }
    for my $i (0 .. $#{$a}) {
        if ($a->[$i] ne $b->[$i]) {
            return 0;
        }
    }
    return 1;
}

sub is_hoa_equal($$) {
    my ($a, $b) = @_;
    if (scalar(keys %$a) != scalar(keys %$b)) {
        return 0;
    }
    for my $k (keys %$a) {
        if (exists $b->{$k}) {
            if (ref $a->{$k} ne 'ARRAY' || ref $b->{$k} ne 'ARRAY' || !is_arrays_equal($a->{$k}, $b->{$k})) {
                return 0;
            }
        }
        else {
            return 0;
        }
    }
    return 1;
} 
```

注意：将 'ne' 更改为 '!=' 或添加逻辑来比较您的标量值。

由于对每个数组进行排序和其他繁重的数据处理，您的解决方案并不好。如果您需要对所有类型的哈希进行相等性测试（不仅仅是我的解决方案中的 HoA），只需添加标量测试和哈希测试，这将是主子的递归调用，如下所示：

```
sub arrays_equal {
    my ( $a, $b ) = @_;
    if ( scalar @$a != scalar @$b ) {
        return 0;
    }
    for my $i ( 0 .. $#{$a} ) {
        my $va = $a->[$i];
        my $vb = $b->[$i];
        if ( ref $va ne ref $vb ) {
            return 0;
        }
        elsif ( ref $va eq 'SCALAR' && $va ne $vb ) {
            return 0;
        }
        elsif ( ref $va eq 'ARRAY' && !arrays_equal( $va, $vb ) ) {
            return 0;
        }
        elsif ( ref $va eq 'HASH' && !hashes_equal( $va, $vb ) ) {
            return 0;
        }
    }
    return 1;
}

sub hashes_equal {
    my ( $a, $b ) = @_;
    if ( scalar( keys %$a ) != scalar( keys %$b ) ) {
        return 0;
    }
    for my $k ( keys %$a ) {
        if ( exists $b->{$k} ) {
            my $va = $a->{$k};
            my $vb = $b->{$k};
            if ( ref $va ne ref $vb ) {
                return 0;
            }
            elsif ( ref $va eq 'SCALAR' && $va ne $vb ) {
                return 0;
            }
            elsif ( ref $va eq 'ARRAY' && !arrays_equal( $va, $vb ) ) {
                return 0;
            }
            elsif ( ref $va eq 'HASH' && !hashes_equal( $va, $vb ) ) {
                return 0;
            }
        }
        else {
            return 0;
        }
    }
    return 1;
} 
```

此代码将标量检查为字符串。您可以像这样添加 is_number 或 smth，或者只是将 'ne' 更改为 '!=' （但如果不仅有数字，请注意警告）。

# windows-7 - Windows.Windows 7 中的存储

> ID：15794161
> 
> 赞同：1
> 
> 时间：2013-04-03T17:34:30.190
> 
> 标签：windows-7, windows-8

[Window.Storage](http://msdn.microsoft.com/en-in/library/windows/apps/windows.storage.aspx)命名空间仅适用于 Windows 8，因此我不能使用 KnownFolders 类。有没有其他方法可以在 Windows 7 中扫描用户硬盘中的音乐/视频/图片文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T17:46:11.093

您可以使用[Environment.SpecialFolder](http://msdn.microsoft.com/en-gb/library/system.environment.specialfolder.aspx)枚举。例如

```
string music = Environment.GetFolderPath(Environment.SpecialFolder.MyMusic); 
```

`SpecialFolders`假设用户已将相关媒体放置在正确的文件夹中（例如，用户在文件夹中有他/她的音乐）`My Music`。

如果您想自己访问 Windows 7 库，则可以使用[Windows API 代码包](http://archive.msdn.microsoft.com/WindowsAPICodePack)。这里有[一篇文章](http://www.codeproject.com/Articles/65535/Windows-7-Libraries-C-Quick-Reference)解释了如何使用它。

# php - PHP中的变量错误

> ID：15794167
> 
> 赞同：0
> 
> 时间：2013-04-03T17:34:42.927
> 
> 标签：php

好的，我将解释我正在做一个电影在线预订系统...用户可以选择电影->电影院->要预订的放映我已经到达放映页面

这是查找特定电影和电影院节目的代码：

```
<?php
require('classes/show_class.php');
$show=new show($_GET["cinema_id"]);  //CAN I MAKE 2 GETS LIKE THIS?? MAYBE THIS
$show=new show($_GET["movie_id"]);   // IS THE ERROR

$showcinemas = $show->get_show_cinemas();

    echo '<table border="1">';
    echo '<tr><td align="center"><b>CINEMA<b></td></tr>';

foreach ($showcinemas as $show)
{
    $show_id = $show['show_id'];
    $show_datetime = $show['show_datetime'];
    $cinema_id = $show['cinema_id'];
    $movie_id = $show['movie_id'];

    echo '<tr>';
    echo '<td>';
    echo "<a href='show_theater.php?cinema_id={$cinema_id}&movie_id={$movie_id}&show_id={$show_id}'>" . $show_datetime . '</a>';
    echo '</td>';
    echo '</tr>';

}
    echo '</table>';
?> 
```

此页面的输出是：CINEMA 2013-03-03 14:00:00 <-- 这是cinema_id=1&movie_id=1&show_id=1 虽然我使用过movie_id=2&cinema_id=5

我希望我现在说清楚了……谢谢你

这是 show_class.php

```
public function __construct()
{

    $query = mysql_query(
            "SELECT *
            FROM movie, cinema
            "
        );

    $results = mysql_fetch_assoc($query);

    $this->movie_id = $results['movie_id'];
    $this->movie_name = $results['movie_name'];
    $this->movie_category = $results['movie_category'];
    $this->cinema_id = $results['cinema_id'];
    $this->cinema_name = $results['cinema_name'];
}

public function get_show_cinemas()
{
    $query = mysql_query(
        "SELECT show.show_datetime, show.show_id, cinema.cinema_id, movie.movie_id
    FROM `cinema`
    JOIN `theater` ON `theater`.`cinema_id` = `cinema`.`cinema_id`
    JOIN  `show` ON  `show`.`theater_id` =  `theater`.`theater_id` 
    JOIN `movie` ON `movie`.`movie_id` =  `show`.`movie_id`
    WHERE  `cinema`.`cinema_id` = {$this->cinema_id} AND `movie`.`movie_id` = {$this->movie_id} "
    );

    while( $cinema =  mysql_fetch_assoc( $query ) )
    {
        $results[] = $cinema;
    }

    return $results;        
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T17:53:44.967

你的表演类只需要初始化一次。尝试将其他参数（cinema_id 和 movie_id）设为类的成员变量或将它们传递给类构造函数。

```
 class show {
    public function __construct($cinema_id, $show_id) { //do work }
  } 
```

或者

```
 class show {
     public $cinema_id, $show_id;
     public function __construct() { }
     public function setCinemaId($cinema_id)
     {
       $this->cinema_id = $cinema_id;
     }
     public function setShowId($show_id)
     {
       $this->show_id = $show_id;
     }
     public function fetchShowCinemas()
     {
       if(!empty($this->show_id) && !empty($this->cinema_id)) { //do work }
     }
  } 
```

然后

```
 $show = new show();
  $show->setCinemaId($_GET['cinema_id']);
  $show->setShowId($_GET['show_id']);
  $showCinemas = $show->fetchShowCinemas(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T18:01:20.257

您需要更新 Show 类的构造函数以接受这些值作为参数，或者在类实例化后包含用于设置这些变量的函数。

```
class Show {
    public $cinemaId;
    public $movieId;

    public function __construct($cinemaId, $movieId)
    {
        this->cinemaId = $cinemaId;
        this->movieId = $movieId;
    }

    public function __construct() { }

    public function setCinemaId($cinemaId)
    {
      $this->cinemaId = $cinemaId;
    }

    public function setMovieId($movieId)
    {
      $this->movieId= $movieId;
    }

    public function getShows() 
    {
       // do work  
    }
} 
```

您需要转义这些值以防止 SQL 注入：

```
$cinemaId = mysql_real_escape_string($_GET['cinema_id'])
$movieId = mysql_real_escape_string($_GET['movie_id']) 
```

方法一：

```
$show = new Show($cinemaId, $movieId);
$show->getShows(); 
```

方法B：

```
$show = new Show();
$show->setCinemaId($cinemaId);
$show->setMovieId($movieId);
$show->getShows(); 
```

# shell - bc 失去精度的shell脚本

> ID：15794169
> 
> 赞同：2
> 
> 时间：2013-04-03T17:35:01.230
> 
> 标签：shell, math, bc

```
#! /bin/sh
a1=260
a2=9150
echo "$a1 * 100 / $a2" | bc 
```

输出是

```
2 
```

它应该在哪里

```
2.8415 
```

为什么我正在使用精度会丢失`bc`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-03T17:36:38.837

试试这个（易于重复使用，您只需要记住在数学表达式前面加上`scale=N`）：

```
$ echo "scale=10; $a1 * 100 / $a2" | bc
2.8415300546 
```

如您所见，您可以根据需要指定比例长度。

看

```
man bc | less +/^' *scale \(\s*exp 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-04T19:29:26.947

您可以加载数学库： bc -l

```
#! /bin/sh
a1=260
a2=9150
echo "$a1 * 100 / $a2" | bc -l 
```

输出是

```
2.84153005464480874316 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T17:42:22.533

您可以使用 awk 获得更好的算术：

```
awk -v a1=260 -v a2=9150 'BEGIN{printf("%.4f\n", (a1 * 100 / a2))}' 
```

**输出：** 2.8415

# java - 是什么导致 Java 库在被 JRuby 调用时表现不同？

> ID：15794170
> 
> 赞同：7
> 
> 时间：2013-04-03T17:35:02.347
> 
> 标签：java, ruby, jruby, microchip, mplab

我是 Java 世界的新手，但对 Ruby 很熟悉。我正在尝试编写一个与一些第三方 jar 文件交互的程序。

虽然如果从 Java 调用这些库似乎表现良好，但当我在 JRuby 中调用它们时它们的行为不正确。这是一个问题，因为我真的很想使用 JRuby。例如，下面的两个程序尝试做完全相同的事情，但它们产生不同的输出：

## 该 Java 程序运行正常。

我在 Netbeans 中开发了下面的 Java 程序并按 F6（运行主项目）运行它。项目的 Libraries 文件夹设置为“C:\Program Files (x86)\Microchip\MPLABX\mplab_ide\lib\nblibraries.properties”。当我运行它时，它会打印“pins: 17”。

```
package pinbug1;    
import com.microchip.mplab.mdbcore.assemblies.Assembly;
import com.microchip.mplab.mdbcore.assemblies.AssemblyFactory;
import com.microchip.mplab.mdbcore.simulator.PinSet;
import com.microchip.mplab.mdbcore.simulator.Simulator;
import org.openide.util.Lookup;

public class PinBug1
{
    public static void main(String[] args)
    {
        AssemblyFactory assemblyFactory = Lookup.getDefault().lookup(AssemblyFactory.class);
        Assembly assembly = assemblyFactory.Create("PIC18F14K50");

        Simulator simulator = assembly.getLookup().lookup(Simulator.class);
        int num = simulator.getDataStore().getProcessor().getPinSet().getNumPins();
        System.out.println("pins: " + num);   // prints "pins: 17"
    }

} 
```

## 这个 JRuby 程序的行为不正确。

我只需键入即可运行下面的 JRuby 程序`jruby bug_reproduce.rb`，它打印出“pins: 0”。我希望它像 Java 程序一样打印“pins: 17”。

```
["mplab_ide/mdbcore/modules/*.jar",
 "mplab_ide/mplablibs/modules/*.jar",
 "mplab_ide/mplablibs/modules/ext/*.jar",
 "mplab_ide/platform/lib/org-openide-util*.jar",
 "mplab_ide/mdbcore/modules/ext/org-openide-filesystems.jar"
].each do |pattern|
  Dir.glob("C:/Program Files (x86)/Microchip/MPLABX/" + pattern).each do |x|
    require x
  end
end

assemblyFactory = org.openide.util.Lookup.getDefault.lookup(com.microchip.mplab.mdbcore.assemblies.AssemblyFactory.java_class)
assembly = assemblyFactory.create("PIC18F14K50")
simulator = assembly.getLookup.lookup(com.microchip.mplab.mdbcore.simulator.Simulator.java_class)
num = simulator.getDataStore.getProcessor.getPinSet.getNumPins
puts "pins: #{num}"    # => pins: 0 
```

## 更多细节

大约有80个第三方jar文件。它们由 Microchip 作为[MPLAB X](http://www.microchip.com/mplabx/)的一部分提供，并为其微控制器实现模拟器。jar 文件随 MPLAB X 一起提供，我还下载了[MPLAB X SDK](http://opensource4pic.org/)以获得使用它们的帮助。我正在使用库的许多未记录的功能，但我没有看到任何替代方案。

我正在使用 Windows 7 64 位 SP1。我在“程序和功能”下安装并列出了以下与 Java 相关的东西：

*   Java 7 更新 17
*   Java 7 更新 17（64 位）
*   Java SE 开发工具包 7 更新 17（64 位）
*   Java(TM) 6 更新 22（64 位）
*   Java(TM) 6 更新 29
*   Java(TM) SE 开发工具包 6 更新 22（64 位）
*   JRuby 1.7.3
*   IntelliJ IDEA 社区版 12.0.4
*   Netbeans IDE 7.3
*   MPLAB X IDE v1.70

我曾经`System.getProperty("java.version")`验证我的两个程序都在 Java 1.6.0_22 下运行。这很好，因为我遵循了 MPLAB X SDK 中的说明“为了获得最佳效果，请使用与构建代码将与之通信的 IDE/MDBCore 完全相同的 JDK。对于 MPLAB X v1.70，这是 JDK 6u22来自甲骨文。” 遇到这个问题后我只安装了JDK 7u17，并没有什么不同。

我能够找到示例中确定的特定问题的解决方法，但随后我继续开发并遇到了库行为不同的另一个问题。这让我觉得我在使用 JRuby 的方式上做错了什么。

考虑到不同的类路径可能会导致这个问题，我尝试让 java 程序打印出它的类路径，然后编辑我的 JRuby 程序以精确地要求该列表中的文件，但这没有任何区别。

## 问题

*   您是否知道从 JRuby 而不是 Java 调用时可能导致 JAR 文件中的代码行为不同的任何事情？
*   JRuby 1.7.3 使用什么版本的 JDK，或者这个问题是否有意义？

## 更新：已解决

感谢 D3mon-1stVFW 真正获得 MPLAB X 并为我解决了我的问题！对于那些对细节感兴趣的人：引脚数为 0，因为引脚在使用 PinSet.getPin(String) 访问时是延迟加载的。通常所有引脚都会被加载，因为外围设备会加载它们，但在 JRuby 下没有检测到外围设备。这是因为找不到外围文档。这是因为 PerDocumentLocator.findDocs() 返回了一个空列表。PerDocumentLocator 失败，因为`com.microchip.mplab.open.util.pathretrieval.PathRetrieval.getPath(com.microchip.mplab.libs.MPLABDocumentLocator.MPLABDocumentLocator.class))`返回了错误的东西。

考虑下面的代码，它类似于 PathRetrieval.getPath 中发生的事情（除了它是用 Java 编写的）：

```
com.microchip.mplab.libs.MPLABDocumentLocator.MPLABDocumentLocator.java_class.resource("MPLABDocumentLocator.class").getFile() 
```

如果我遵循 D3mon-1stVFW 的提示并将 JAR 文件添加到 $CLASSPATH，那么该代码将返回：

> 文件:C:/Program Files (x86)/Microchip/MPLABX/mplab_ide/mplablibs/modules/com-microchip-mplab-libs-MPLABDocumentLocator.jar!/com/microchip/mplab/libs/MPLABDocum entLocator/MPLABDocumentLocator.class

但是，如果我不向类路径添加东西，那么该代码会奇怪地返回：

> 文件：C:%5CProgram%20Files%20(x86)%5CMicrochip%5CMPLABX%5Cmplab_ide%5Cmplablibs%5Cmodules%5Ccom-microchip-mplab-libs-MPLABDocumentLocator.jar!/com/microchip/mpl ab/libs/MPLABDocumentLocator/MPLABDocumentLocator。班级”

%5C 实际上是反斜杠的代码。PathRetrieval.getPath 中的 Microchip 代码执行大量字符串操作，并且无法正确处理斜杠由 %5C 表示的情况。如果有人对 %5C 出现的原因有任何进一步的了解，我很想知道，但我的问题已经解决了。

**结论：**有时 Java 的[getResource()](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Class.html#getResource%28java.lang.String%29)会返回一个带有 %5C 而不是斜杠的 URL，这会受到 CLASSPATH 上的内容的影响。如果您想安全起见，请在需要之前将 jar 文件添加到 $CLASSPATH，如下所示：

```
require 'java'
$CLASSPATH << jar_filename
require jar_filename 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T21:42:26.873

使用此实现，我能够获得预期的结果。这种植入的主要区别是将 jars 添加到类路径中。如果您评论此行 ( `$CLASSPATH << jar_file`)，您将获得 0 个引脚。（问题底部的解释）

```
require 'java'

Dir.glob("C:/MyCustomLibraries/MATLAB/*.jar").each do |jar_file| #Has all MPLab jars except org.netbeans.*
  $CLASSPATH << jar_file
  require jar_file
end

module Mplab
  include_package "org.openide.util" #Lookup
  include_package "com.microchip.mplab.mdbcore.simulator" #PinSet, Simulator
  include_package "com.microchip.mplab.mdbcore.assemblies" #Assembly, AssemblyFactory
end

assembly_factory = Mplab::Lookup.getDefault.lookup(Mplab::AssemblyFactory.java_class)
assembly = assembly_factory.create("PIC18F14K50")
simulator = assembly.getLookup.lookup(Mplab::Simulator.java_class)
num = simulator.getDataStore.getProcessor.getPinSet.getNumPins
puts "pins: #{num}" 
```

输出

> 内容/mplab/mplab.deviceSupport
> 
> 内容/mplab/MPHeader.xml
> 
> 内容/mplab/PluginBoardSupport.xml
> 
> 针数：17

# sql-server - 如何将从路径选项生成的 xml 转换为表格

> ID：15794172
> 
> 赞同：0
> 
> 时间：2013-04-03T17:35:13.067
> 
> 标签：sql-server, xml, tsql

如何获得下面指定的输出

```
DECLARE @txml XML 
SET @txml ='<row><ch>   </ch><unicode_value>9</unicode_value><cnt>3</cnt></row><row><ch>
</ch><unicode_value>10</unicode_value><cnt>5</cnt></row><row><ch>
</ch><unicode_value>13</unicode_value><cnt>5</cnt></row><row>
<ch> </ch><unicode_value>32</unicode_value><cnt>962</cnt></row>
<row><ch>&amp;</ch><unicode_value>38</unicode_value><cnt>32</cnt></row>
'
SELECT  x.value('cnt', 'int') AS cnt,
    x.value('ch', 'nvarchar(10)') AS ch,
    x.value('unicode_value', 'int') AS unicode_value
FROM @txml.nodes('/row') AS tbl( x ) 
```

about 所需的输出应该类似于

```
cnt | ch | unicode_value|
32 | &  | 38|
8 | ( | 40| 
```

ETC

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T05:29:28.757

使用新的 XML 结构，您应该执行以下操作：

```
SELECT  x.value('(cnt)[1]', 'int') AS cnt,
    x.value('(ch)[1]', 'nvarchar(10)') AS ch,
    x.value('(unicode_value[1])', 'int') AS unicode_value
FROM @txml.nodes('/row') AS tbl( x ) 
```

[**演示**](http://sqlfiddle.com/#!3/d41d8/11952)

# css - Superfish 菜单右对齐

> ID：15794175
> 
> 赞同：0
> 
> 时间：2013-04-03T17:35:25.307
> 
> 标签：css, superfish

我正在尝试将 superfish 配置为以我想要的方式显示。到目前为止一切看起来都不错，只是我希望菜单正确对齐。这也有效，但现在我所有的菜单项都被镜像了，所以不再按照我想要的顺序......

看看：[http ://web288.merkur.ibone.ch/klingler_ag/](http://web288.merkur.ibone.ch/klingler_ag/)

主页应该是左边的第一个项目，但整个菜单都向右对齐。

我所做的是`float:right`在`.sf-menu li`

```
.sf-menu li {   
    line-height: 50px;
    margin: 0px;
    padding: 0px;
    list-style: none;
    float:right;
} 
```

这不是我应该做的吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T17:36:27.540

向右浮动意味着，每个元素都会浮动到它可以到达的最右边的位置。因为 HTML 代码是从上到下解释的，所以这会“改变”顺序。

您应该`float: right`使用菜单容器而不是项目。首先，确保块元素尊重浮动内容：

```
.ym-wbox:after {
    clear: both;
    content: ".";
    display: block;
    height: 0;
    visibility: hidden;
} 
```

然后应用浮动：

```
.sf-menu {
    float: right;
}

.sf-menu li {
    float: left;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T17:37:58.897

`float:right`容器，然后`text-align:right`是链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T17:38:52.673

试试这个：

```
.sf-menu {
    height: 45px;
    margin: 0;
    padding: 0;
    text-align: right; /* ADDED THIS */
}

.sf-menu li {
    background: none repeat scroll 0 0 #DB0000;
    display: inline-block;
    /* float: left; HID THIS */
    line-height: 50px;
    list-style: none outside none;
    margin: 0;
    padding: 0;
    display:inline-block; /* ADDED THIS*/
}
.sf-menu li {
    /* float: left; HID THIS */
    position: relative;
    width: auto;
} 
```

# php - 使用 php 变量创建动态 mysql 查询

> ID：15794179
> 
> 赞同：11
> 
> 时间：2013-04-03T17:35:31.520
> 
> 标签：php, mysql, sql

我有一个 html 表，可以加载 mySQL 数据库表中的所有内容。我有与该 mySQL 表的列相关的下拉列表 - 当用户选择其中一个下拉列表时，它使用 AJAX 查询数据库。

我需要弄清楚如何动态构建查询，因为有时下拉列表会是空的（即他们不想按该列进行过滤）。

做这个的最好方式是什么？

目前我有这样的事情：

```
 $stationFilter = $_GET['station'];
    $verticalFilter = $_GET['vertical'];
    $creativeFilter = $_GET['creative'];
    $weekFilter = $_GET['week'];    

    $result = mysql_query("SELECT * FROM tableName WHERE STATION_NETWORK = '$stationFilter' AND VERTICAL = '$verticalFilter' AND CREATIVE = '$creativeFilter'  AND WK = '$weekFilter'");   
    $data = array();
    while ($row = mysql_fetch_row($result) )
        {
        $data[] = $row;
        }   
    $finalarray['rowdata'] = $data; 
```

您可以想象这不起作用，因为如果这些字段中的任何一个为空 - 查询将失败（或不返回任何内容）。

显然，如果某些变量为空，那么创建这样的“静态”查询确实会变得很困难。

动态创建该查询的最佳方法是什么，以便它只输入那些非空的并添加到查询中，以便它可以成功完成并显示适当的数据？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-04-03T17:39:04.607

只需检查变量是否包含值，如果包含，请像这样构建查询：

```
$sql = [];
$parameters = [];

if ($stationFilter) {
    $sql[] = " STATION_NETWORK = ?";
    $parameters[] = $stationFilter;
}
if ($verticalFilter) {
    $sql[] = " VERTICAL = ?";
    $parameters[] = $verticalFilter;
}

$query = "SELECT * FROM tableName";

if ($sql) {
    $query .= ' WHERE ' . implode(' AND ', $sql);
}
$stmt = $mysqli->prepare($query);

if ($parameters) {
    $stmt->bind_param(str_repeat('s', count($array), ...$parameters);
}
$stmt->execute();
$result = $stmt->get_result();
$data = $result->fetch_all(MYSQLI_ASSOC); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T17:54:54.860

```
$filter = array();

if ($_GET['station'] != '')
{ $filter[] = 'STATION_NETWORK = '.$_GET['station'];}
if ($_GET['vertical'] != '')
{ $filter[] = 'VERTICAL = '.$_GET['vertical'];}
if ($_GET['creative'] != '')
{ $filter[] = 'CREATIVE  = '.$_GET['creative'];}
if ($_GET['week'] != '')
{ $filter[] = 'WK = '.$_GET['week'];}

$query = 'SELECT * FROM $tableName WHERE '.implode(' AND ', $filter);
$result = mysql_query($query);
... 
```

但如果在 GET 中推送表行的名称会更好；$_GET['STATION_NETWORK'] --- 有些像这样；

```
then you make
foreach ($_GET as $key => $value)
{
    if ($value != '')
    { $filter[] = $key.' = '.$value;}
} 
```

或尝试

```
$filter = array('STANTION_NETWORK' => $_GET['station'],
                'VERTICAL' => $_GET['vertical'],
                 'CREATIVE'  => $_GET['creative'],
                 'WK' => $_GET['week']);
$query_array = array();

 foreach ($filter as $key => $value)
{
    if ($value != '')
    { $query_array[] = $key.' = '.$value;}
}
$query = 'SELECT * FROM $tableName WHERE '.implode(' AND ', $query_array);
$result = mysql_query($query); 
```

# c++ - 如何禁用来自缺少头文件的警告

> ID：15794182
> 
> 赞同：0
> 
> 时间：2013-04-03T17:35:41.410
> 
> 标签：c++, gcc, g++

有一个警告阻止我的程序被编译。它来自我的头文件中的头文件。该头文件来自第三方。有没有办法禁用它以便编译成功？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T17:43:05.023

如果您使用的是 Visual Studio，在项目属性-> C/C++ -> 常规设置中有一个警告级别项。您可以将其设置为较低的值，但更好的做法是通过解决此类警告来减少此类警告，而不是通过隐藏，因为它们可能会在将来造成麻烦。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T17:54:21.140

对于丢失的头文件，您应该得到编译时错误而不是警告，并且您需要提供该丢失的头文件，如果您引入一个缺少原始头文件获得的函数声明的新头文件，这将再次生成编译时错误据我所知！因此，您还必须提供这些函数的声明。

# java - 实体 Bean 和数据访问对象模式

> ID：15794184
> 
> 赞同：2
> 
> 时间：2013-04-03T17:35:44.657
> 
> 标签：java, design-patterns, javabeans, dao, dto

我在理解 DAO 设计模式时遇到了一些[问题](http://www.oracle.com/technetwork/java/dataaccessobject-138824.html)。

我的困惑在于两点：

1.  在网站的“问题”部分，`entity beans`所指的是……它们仅用于网络技术吗？我相信我将上述设计模式与纯 java 程序一起使用，其中我使用 DTO 和 DAO 使用**泛型**来表示几种类型（联系人、事件、工作、学者）。每个都有自己的超类实现`BASEDAO`，它管理到数据库的所有 sql 语句及其连接。

现在，我不确定代表联系人、事件、工作的 DTO 是否会被归类为 ENTITY BEAN。我的 DTO 会属于上述网站所说的业务组件吗？

1.  **在网站问题**部分的末尾 ，它谈到了组件和数据源实现之间的紧密耦合*。我不确定这意味着什么。任何人都可以详细说明或向我展示一个带有 Java 代码的简单示例吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T17:45:36.703

现在，实体 Bean 是一个 Java EE 概念，您也可以在没有它们的情况下构建 DAO，而且很多人都这样做。（例如休眠）

要回答您的第二个问题，当您编写自定义代码来管理数据库连接、查询等时会发生紧密耦合，而无需使用 DAO。如果您使用 DAO 并使用数据源，那么当您更改数据存储和/或源时，您的所有业务逻辑都是安全的，可以通过对配置脚本的最小更改来处理，而不是在没有 DAO 的情况下重新编写新代码.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-11T13:12:00.737

通常，每个软件都由数据和对该数据执行的一些操作组成。在过程编程中，操作被表示为以数据作为输入的过程。这里的问题在于，如果在不同的过程中使用同一组数据，那么每次更改该组以适应新过程时，您都可以轻松地破坏另一个其他地方的程序。那就是紧耦合。另一方面，使用面向对象编程，影响它的数据和操作存在于同一个对象上。这意味着您不需要将参数传递给该方法，它实际上知道在对象内的何处找到它。这样，如果您要更改一个方法，您将只更改该方法所在的对象中的数据。在任何一种情况下，业务逻辑都是对数据进行的操作。pradeep 的意思是改变你的数据存储技术，即从 sql 到 mysql，不应该破坏在它上面工作的操作（业务逻辑）。您可以通过创建一个独立于数据存储技术的数据表示来实现这一点，例如 DTO（尽管我宁愿使用完全成熟的对象来隐藏他们正在处理的数据）

# sql-server-2008 - 使用数据库时导出数据的危险和担忧

> ID：15794190
> 
> 赞同：1
> 
> 时间：2013-04-03T17:36:04.913
> 
> 标签：sql-server-2008, export

在实时生产系统使用数据库时，使用 Microsoft SQL Server Management Studio 中的 SQL Server 导入和导出向导（仅导出到平面文件）时是否有任何危险或需要注意的事项？

我认为不会，但我的项目经理（非程序员）很担心。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T17:38:55.707

问题将是您将没有正确的数据，因为您的数据库中会有实时事务。它还会给数据库带来不必要的负担。

我会同意你的经理。

# asp.net-mvc - 在 MVC 4 / EF 中使用我自己的数据库自定义 SimpleMembership

> ID：15794192
> 
> 赞同：0
> 
> 时间：2013-04-03T17:36:14.733
> 
> 标签：asp.net-mvc, entity-framework, asp.net-mvc-4, simplemembership

我正在使用 ASP.Net MVC4 开发一个项目，我使用 SimpleMembership 来处理会员系统。

除了 UserProfile 表我应该在哪里存储默认数据外，我自己的数据库中有两个表 (Student , Teacher )。

我自定义了注册，添加了一个新字段，我要求新用户定义他是教师还是学生。

```
public class UsersContext : DbContext
{
    //public UsersContext()
    //    : base("DefaultConnection")
    //{
    //}
    public DbSet<Student> Students { get; set; }
    public DbSet<Teacher> Teachers { get; set; }
    public DbSet<UserProfile> UserProfiles { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<UserProfile>()
            .HasRequired(u => u.Student)
            .WithOptional(p => p.UserProfile)
            .Map(m => m.MapKey("IDStudent"));

        modelBuilder.Entity<UserProfile>()
            .HasRequired(u => u.Teacher)
            .WithOptional(p => p.UserProfile)
            .Map(m => m.MapKey("IDTeacher"));
    }
} 
```

用户资料表变成了这样

```
[Table("UserProfile")]
public class UserProfile
{
    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int UserId { get; set; }
    public string UserName { get; set; }
    public string AccountType { get; set; }
    public virtual Student student { get; set; }
    public virtual Teacher teacher { get; set; }
} 
```

我在 Student , Teacher 两个类中都添加了这个外键

```
public virtual UserProfile UserProfile { get; set; } 
```

关于帐户控制器/注册类

```
WebSecurity.CreateUserAndAccount(
    model.UserName,
    model.Password,
    new { AccountType = model.AccountType },
    false);

WebSecurity.Login(model.UserName, model.Password);
UsersContext db = new UsersContext();

var membership = (SimpleMembershipProvider)Membership.Provider;
membership.ValidateUser(model.UserName, model.Password);
membership.ConfirmAccount(model.UserName, model.Password);
UserProfile user = db.UserProfiles.FirstOrDefault(u => u.UserName.ToLower() == model.UserName.ToLower());

if (model.AccountType == "Teacher")
{
    if (userid != null) 
        CreateNewTeacher(user.UserId , model.UserName);
}

if (model.AccountType == "Student")
{
    if (userid != null) 
        CreateNewStudentt(user.UserId , model.UserName);
} 
```

在写完这两个类之后

```
public void CreateNewStudent( int id, string username)
{
    // Attempt to register the user
    using (UsersContext db = new UsersContext())
    {
        Student student = new Student {User_Name = username};
        student.id=id;
        db.Students.Add(student);
        db.SaveChanges();
    }
}

public void CreateNewTeacher(int id,string username)
{
    using (UsersContext db = new UsersContext())
    {    
        Teacher teacher = new Teacher();
        teacher.id=id;
        db.Teacher.Add(teacher);
        db.SaveChanges();
    }
} 
```

我的问题是：我应该在自己的表中创建用户的级别（我想保持相同的 ID）。所以，我想知道简单的成员资格何时在其表中创建用户以将其复制到我的表中。

我怎样才能得到用户的ID！

难道我对付会计的策略好！还是我这样想错了。

**更新** 我添加了 [key] （尚未生成）

```
 public partial class Agent
    {
        public Teacher()
        {
            this.Tasks = new HashSet<Tasks>();
        }

         [Key]
        public int ID_Teacher { get; set; }
        public string Name_Teacher { get; set; }
        public System.DateTime Bday_Teacher { get; set; }
        public string User_Name { get; set; }

        public virtual ICollection<Task> Tasks { get; set; }

    }

  public partial class Task
    {
         [Key, ForeignKey("Teacher"), Column(Order = 0)]
        public int ID_Teacher { get; set; }

         [Key, ForeignKey("Student"), Column(Order = 1)]
        public int ID_Student { get; set; }

         [Key, ForeignKey("DateT"), Column(Order = 2)]
        public int ID_DateT { get; set; }

         [Key]
        public Nullable<int> ID_Comment { get; set; }

        public virtual Teacher Teacher { get; set; }
        public virtual Student Student { get; set; }
        public virtual DateT DateT { get; set; }
    } 
```

感谢您的时间和努力！

问候 ，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T18:47:10.980

你需要在`one-to-one`之间`UserProfile and Student`，也之间建立关系`UserProfile and Teacher`。我通常使用`Property Mapping`而不是`fluent api`

为实体试试这个，我继续`Teacher and Student`为你创建了一个关系：

```
[Table("UserProfile")]
public class UserProfile
{
  [Key]
  [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
  public int UserId { get; set; }
  public string UserName { get; set; }
  public string AccountType { get; set; }   
}

public class Teacher
{
   [Key]
   [ForeignKey("UserProfile")]
   [DatabaseGeneratedAttribute(DatabaseGeneratedOption.none)]
   public int UserId { get; set; }

   public string Name { get; set; }

   public virtual ICollection<Student> Student{ get; set; }
   public virtual UserProfile UserProfile { get; set; }
}

public class Student
{
   [Key]
   [ForeignKey("UserProfile")]
   [DatabaseGeneratedAttribute(DatabaseGeneratedOption.none)]
   public int UserId { get; set; }

   [ForeignKey("Teacher")]       
   public int? TeacherId{ get; set; }

   public string Name { get; set; }

   public virtual UserProfile UserProfile{ get; set; }
   public virtual Teacher teacher { get; set; }
} 
```

在您的帐户控制器中尝试以下操作：

```
 [HttpPost]
    [AllowAnonymous]
    [ValidateAntiForgeryToken]
    public ActionResult Register(RegisterModel model)
    {
        if (ModelState.IsValid)
        {
            // Attempt to register the user
            try
            {
                WebSecurity.CreateUserAndAccount(model.UserName, model.Password, new { AccountType = model.AccountType }, false);
                WebSecurity.Login(model.UserName, model.Password);

                var userProfile = db.UserProfiles.Local.SingleOrDefault(u => u.UserName == User.Identity.Name)
                                ?? db.UserProfiles.SingleOrDefault(u => u.UserName == User.Identity.Name);

                if (userProfile.AccountType.ToLower() == "teacher")
                {
                    return RedirectToAction("Create", "Teacher"); //Created a Teacher Controller separate
                }

                return RedirectToAction("Create", "Student"); //same with Student
            }
            catch (MembershipCreateUserException e)
            {
                ModelState.AddModelError("", ErrorCodeToString(e.StatusCode));
            }
        }

        // If we got this far, something failed, redisplay form
        return View(model);
    } 
```

您的`Student`或`Teacher`创建操作在学生或教师控制器中应如下所示：

```
//
    // GET: /Student/
    [HttpGet]
    public ActionResult Create()
    {            
        return View();
    }

    //
    // POST: /Student/
    [HttpPost]
    public ActionResult Create(StudentViewModel model)
    {
        if (ModelState.IsValid)
        {
            using (UsersContext db = new UsersContext())
            {
                var userProfile = db.UserProfiles.Local.SingleOrDefault(u => u.UserName == User.Identity.Name)
                                ?? db.UserProfiles.SingleOrDefault(u => u.UserName == User.Identity.Name);
                if (userProfile != null)
                {
                    var student= new Student
                                     {
                                         UserProfile = userProfile,
                                         Name= model.Name                                                                                          
                                     };                 

                    db.Students.Add(student);                          

                    db.SaveChanges();
                }
            }
        }
        return View(model);
    } 
```

# html - Twitter bootstrap、radio 和 checkbox 布局坏了？

> ID：15794196
> 
> 赞同：1
> 
> 时间：2013-04-03T17:36:20.047
> 
> 标签：html, css, twitter-bootstrap

我想知道是否有人可以根据这个 html 告诉我：

```
<div class="control-group">
    <label class="checkbox">
        <input type="checkbox" id="carousel_home" class="carousel"   name="aisis_options[carousel_home]" value="carousel_home"> 
        Remove the carousel from the home page only.
    </label>
</div> 
```

为什么我的复选框看起来像这样：

**笔记：**

没有样式应用于输入或标签的 id 或类。论文与js交互。

我正在使用没有第三方样式的纯引导样式。我检查了课程`checkbox`和`carousel`id `carousel_home`-**没有**附加 css 可能导致这种情况。

这发生在 Chrome（最新）、FF（最新）和 IE 10 中

[![图片](https://i.stack.imgur.com/pcesA.png)](https://i.stack.imgur.com/pcesA.png)

# jquery - Jquery Analytics 跟踪 onclick NS_BINDING_ABORTED

> ID：15794197
> 
> 赞同：2
> 
> 时间：2013-04-03T17:36:24.340
> 
> 标签：jquery, analytics, webtrends

嘿，我正在添加一个 onclick 事件来跟踪某些视频的点击，我们使用的第 3 方工具是 webtrends。

我正在添加 onclick 事件，它工作正常。需要注意的是链接中的 url 使用户浏览到不同的 url。

当我在 httpfox 中跟踪 onclick 事件时，我看到错误 NS_BINDING_ABORTED。

我的jQuery

```
$j(document).ready(function () {
$j('a.wt_video').click(function (e) {
    var title = ($j(this).attr("title"));
    if (title.length != 0) {
        handleDynamicVideoWebTrendsClick(title);
    }
}); 
```

});

有什么想法可以添加以防止此错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-29T21:28:32.417

我发现我们必须做两件事来避免“中止”错误。

1) 使用 setTimeout 2) 使用 mousedown - 特别是对于 FireFox，因为它同时将点击视为 mousedown 和 mouseup

```
 $("#someBtn").live("mousedown", function(){
    var mT7 = setTimeout("myFunction()", 50); // 1000 would be a second
});

var myFunction = function(){
var wtArgs = ['WT.dcs_id', 'youridgoeshere', 'DCSext.myFirstVar', varArray[varArray.length-2], 'DCSext.mySecondVar', varArray[varArray.length-1], 'DCSext.myThirdVar', tempArr[0]];
    dcsMultiTrack.apply(this, wtArgs);
} 
```

希望有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-12T22:46:17.373

根据此处发布的答案： [Google Analytics：跟踪链接点击所需的延迟？](https://stackoverflow.com/questions/14611899/google-analytics-delay-needed-for-tracking-link-clicks)，使用延迟似乎是确保 GA 请求在新页面加载之前完成的最有效解决方案，因为单击链接。

我也遇到了这个问题：我所有的点击都在 HTTPFox 中生成了一个 NS_BINDING_ABORTED，直到我按照那里的建议修改了代码。从那时起，一切正常

# node.js - 适用于 Windows/Node 0.8 的 Node.js 键值存储

> ID：15794202
> 
> 赞同：2
> 
> 时间：2013-04-03T17:36:41.243
> 
> 标签：node.js, leveldb

我正在开发一个需要快速、嵌入式和持久键值存储（如 LevelDB）的项目，但开发环境仅限于 Windows 7 / Node 0.8。我的自然反应是尝试找到一个 LevelDB 绑定，但 LevelUP / my8bird 的 leveldb 在 Windows 下根本无法编译，而 LevelDOWN 仅适用于 Node.js > 0.10。

有任何想法吗？它不必**是**LevelDB——只要是任何具有持久性和合理的崩溃容错的嵌入式（无服务器）键值存储，并且具有可以在该环境下工作的 Node.js 绑定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-09T14:29:27.337

`LMDB`在 Windows 上构建/运行良好。[http://symas.com/mdb/](http://symas.com/mdb/) 它也比 LevelDB 更小、更快、更可靠。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T20:04:17.100

看来“sqlite3”模块是在windows上编译的，所以我在它上面构建了一个简单的key-value抽象层。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T10:54:46.727

Windows 中似乎有一个用于[levelDB](https://code.google.com/r/kkowalczyk-leveldb/)的端口。我不知道它是否与您的规范兼容。我的问题是为什么不能更新 node.js，因为 node v0.8 处于生命周期结束（EOL）。可能是纯 Javascript 克隆，但性能可能会差一些：

*   [https://github.com/mikesmullin/node-sqlite-purejs](https://github.com/mikesmullin/node-sqlite-purejs)

也许不使用嵌入式数据库，而是使用 MongoDB 之类的东西？如果您问我，您的要求会使找到解决方案变得更加困难。

# jquery - jQuery Imagemapster 多次点击状态

> ID：15794203
> 
> 赞同：0
> 
> 时间：2013-04-03T17:36:41.553
> 
> 标签：jquery, map, mapping, imagemap, imagemapster

我想使用[http://www.outsharked.com/imagemapster/](http://www.outsharked.com/imagemapster/)实现多状态着色。

换句话说，当一个区域被点击一次时，它会以绿色突出显示，如果点击两次，它将以红色突出显示，第三次点击将重置为无颜色。

我一直在阅读文档并查看演示，但无法弄清楚如何实现这一点。任何帮助表示赞赏。

ImageMapster 是我遇到过的最强大且最轻量级的图像映射 jQuery 插件，因此除非有人知道另一个开箱即用的具有此功能的插件，否则我会坚持使用这个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T14:17:36.090

下面是使用 ImageMapster 跟踪三种状态的示例：

[http://jsfiddle.net/jamietre/GjxCk/](http://jsfiddle.net/jamietre/GjxCk/)

基本技巧是您必须自己跟踪每个区域的状态，并告诉 ImageMapster 要做什么。这是代码：

```
var map = $('#map'),
    // a object map for tracking the state of each area
    selStates = {},

    // rendering options for the 1st selected state
    selected1opts = {
        fillColor: '00ff00',
        stroke: true,
        strokeColor: '000000',
        strokeWidth: 2
    },

    // rendering options for the 2nd selected state
    selected2opts = {
        fillColor: 'ff0000',
        stroke: true,
        strokeColor: '00ff00',
        strokeWidth: 1
    };

// make an array from the different states' rendering options so we can easily
// choose one

var renderOpts = [selected1opts, selected2opts];

function onClick(data) {

    // get current state (0,1,2) -- default to zero which means unset

    var cur = selStates[data.key] || 0,
        next = (cur + 1) % 3;

    // always unset: if state 0, this is all we need to do. if state
    // 2, we have to unset first, since setting the state for an area
    // that's already selected will do nothing. If it happens to be going from 
    // 0 to 1, then no harm done.

    map.mapster('set', false, data.key);

    if (next) {        
        // now set the area state using the correct options
        map.mapster('set', true, data.key, renderOpts[cur]);
    }

    // update local store with current state
    // add 1, and apply a modulus of 3 to get new state

    selStates[data.key] = next;

}

map.mapster({
    mapKey: 'state',

    // setting isSelectable=false will prevent imagemapster from using its own click-select
    // handling. You could also return false from the onClick event to stop internal handling

    isSelectable: false,

    // bind our "onClick" function above to handle area clicks

    onClick: onClick
}); 
```

# ruby-on-rails - Rails 路由问题，最初找不到路由，但在页面刷新时它可以工作

> ID：15794205
> 
> 赞同：0
> 
> 时间：2013-04-03T17:36:46.167
> 
> 标签：ruby-on-rails, ruby, routing

我对 Rails 比较陌生，找不到答案。我添加了一个带有相应视图的控制器。当我去

根/order_build/show?build=1

我收到一个路由错误，提示找不到路径，这是当我单击具有该地址的链接时。在我进入错误页面并手动刷新页面后它可以工作。知道为什么会发生这种情况吗？

```
class OrderBuildController < ApplicationController
  def show
     @build= Build.find(request.GET["build"])

  end

  def order
  end

  def index
  end
end 
```

这是我的路由文件

```
ProjectD::Application.routes.draw do
  get "order_build/show"

  get "order_build/order"

  get "order_build/index"

  get "home/index"

  #root :to => "home#index"
  root :controller => 'home', :action => :index
  resources :users, :user_sessions
  match 'login' => 'user_sessions#new', :as => :login
  match 'logout' => 'user_sessions#destroy', :as => :logout
  resources :sessions

  resources :providers

  resources :build_prices

  resources :products do
    resources :product_images
  end

  resources :product_tags_products

  resources :product_tags

  resources :product_images

  resources :orders

  resources :order_statuses

  resources :build_prices

  resources :builds do
    resources :build_prices
  end

  resources :build_statuses

  resources :account_types
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T17:44:59.767

您需要将您的路线与相应的控制器相关联

所以，而不是：

```
get "order_build/show" 
```

你会这样做：

```
match "/order_build/show" => "order_build#show" 
```

这样，您将 /order_build/show 路由与 order_build 控制器上的 show 方法相关联。

# asp.net - 在 ASP.NET 中销毁用户的会话

> ID：15794206
> 
> 赞同：-2
> 
> 时间：2013-04-03T17:36:47.147
> 
> 标签：asp.net

如何在 ASP.NET 中销毁会话以及在单击浏览器的后退按钮时销毁会话时，它应该将我重定向到登录页面。请帮帮我。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T17:39:39.810

您可以使用此事件来处理您的会话。我希望它会帮助你。

```
protected void HeadLoginStatus_LoggingOut(object sender, LoginCancelEventArgs e)
{
    Session.Clear();//It clears the session when the user logged out.
    Session.Abandon();
    FormsAuthentication.SignOut();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T17:40:02.920

调用[Session.Abandon()](http://msdn.microsoft.com/en-ca/library/ms524310%28v=vs.90%29.aspx)来销毁它。

# mysql - 如何根据明细表中存在的 2 个条件选择 MySQL 主表中的 1 行

> ID：15794213
> 
> 赞同：0
> 
> 时间：2013-04-03T17:37:14.327
> 
> 标签：mysql

我有 2 个表——主表和详细表

表 A 是主表，包含唯一行

```
ID Name
1  Abc
...
7  Def
...
19 Xyz 
```

表 B 是详细信息，每个主行包含多行

```
Ref ID  Desc
1   10  abcdef
1   15  ghijk
1   20  lmnop
...
7   05  qrstu
7   10  vwxyz
7   15  ygfdt
7   20  kjqts
...
19  05  htyge
19  15  gqwes 
```

查询结果——我只希望选择具有包含“10”和“15”相关详细行的详细行的主行

所以只会选择第 1 行和第 7 行。

感谢您的帮助。

这是我的查询的外壳：

```
$query_string = '
  SELECT a.ID, Name
  FROM table_a AS a
  LEFT JOIN table_b AS b ON b.ref = a.ID
  WHERE b.ID = "10" AND b.ID = "15"
'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T17:57:47.370

```
SELECT a.ID, Name
FROM table_a AS a
LEFT JOIN table_b AS b ON b.ref = a.ID
WHERE b.ID IN (10,15)
group by a.ID
having count(distinct b.id) = 2 
```

# c# - 遍历二叉树

> ID：15794214
> 
> 赞同：2
> 
> 时间：2013-04-03T17:37:16.327
> 
> 标签：c#, java

嗨，我仍在学习 C#，并且正在尝试创建一个二叉树遍历算法以用于学习目的。我在 Java 中做了同样的事情，我设法让它工作。我需要知道我是否可以给 Node 的方法 aa 参数.这是我到目前为止所拥有的：

```
public class Node<T>
{
        public Node<T> Left { get; set; }
        public Node<T> Right { get; set; }
        public T Data { get; set; }
}

public static void InOrder(Node<T> n)
        {
        } 
```

问题出在 InOrder 参数上，它告诉我无法传递 Node 的参数，因为它无法解析符号 T。在 Java 中，我使用此语法使其在 Node n 中工作，但似乎 C# 中的语法不同。

如果是这种情况，那么我该如何使用我的当前类 Node 作为类型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T17:39:16.180

将静态方法放在类中`Node<T>`，它将起作用。在课外，它不知道 T 是什么意思。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T17:39:56.600

您需要将 a 附加`<T>`到您的方法名称，因为它在`Node`类之外。

```
 public static void InOrder<T>(List<T> n)
 {
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T17:41:04.417

您的方法需要 T 类型，如下所示：

```
public class Node<T>
{
    public Node<T> Left { get; set; }
    public Node<T> Right { get; set; }
    public T Data { get; set; }
}

public static void InOrder<T>(Node<T> n)
{
} 
```

# python - PyQt4 MainWindow 对象没有属性

> ID：15794219
> 
> 赞同：3
> 
> 时间：2013-04-03T17:37:46.153
> 
> 标签：python, pyqt4

我正在编写一些 GUI，然后我想将文本添加到 listView。现在我只想添加“你好”来弄清楚，然后我会从那里成长。

这是我的代码示例：

```
from PyQt4 import QtCore, QtGui

try:
    _fromUtf8 = QtCore.QString.fromUtf8
except AttributeError:
    def _fromUtf8(s):
        return s

try:
    _encoding = QtGui.QApplication.UnicodeUTF8
    def _translate(context, text, disambig):
        return QtGui.QApplication.translate(context, text, disambig, _encoding)
except AttributeError:
    def _translate(context, text, disambig):
        return QtGui.QApplication.translate(context, text, disambig)

class Ui_MainWindow(object):
    def setupUi(self, MainWindow):
        MainWindow.setObjectName(_fromUtf8("MainWindow"))
        MainWindow.resize(584, 461)
        self.centralwidget = QtGui.QWidget(MainWindow)
        self.centralwidget.setObjectName(_fromUtf8("centralwidget"))
        self.lineEdit_6 = QtGui.QLineEdit(self.centralwidget)
        self.lineEdit_6.setGeometry(QtCore.QRect(72, 210, 171, 20))
        ....
        self.retranslateUi(MainWindow)
        QtCore.QObject.connect(self.pushButton, QtCore.SIGNAL(_fromUtf8("clicked()")), MainWindow.addEntry)
        QtCore.QMetaObject.connectSlotsByName(MainWindow)

    def retranslateUi(self, MainWindow):
        ....

    def addEntry(self):
        listView.Items.Add("Hello") 
```

然后打开它：

```
from PyQt4 import *
import signal
import sys
from PyQt4.QtGui import QApplication, QMessageBox
from inv_window import *
def main():
    app = QtGui.QApplication(sys.argv)
    MainWindow = QtGui.QMainWindow()
    ui = Ui_MainWindow()
    ui.setupUi(MainWindow)
    MainWindow.show()
    sys.exit(app.exec_())

if __name__ == '__main__':
    main() 
```

当试图运行它时，我得到：

```
AttributeError: 'QMainWindow' object has no attribute 'addEntry' 
```

关于如何纠正这个问题的任何想法？我试过谷歌搜索，但我很难确定一个解决方案

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T19:58:26.257

问题似乎出在这一行：

```
 QtCore.QObject.connect(self.pushButton, QtCore.SIGNAL(_fromUtf8("clicked()")), MainWindow.addEntry) 
```

您的`MainWindow`变量是一个`QMainWindow`实例，因此它没有`addEntry`属于您的`Ui_MainWindow`类的方法。因此，您看到的错误。

如果可以的话，我想指出您的代码的风格问题。在 Python 中，局部变量和方法/函数参数的名称通常以小写字母开头。您有一个名为`MainWindow`. 当我第一次阅读您的代码时，我感到困惑，因为`MainWindow`在我看来就像一个类的名称。我建议将此变量/方法参数的名称更改为`mainWindow`or `main_window`or or `mainwin`or like。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-05T05:31:12.377

当您`from PyQt4 import *`为该`main()`方法编写时，您还需要导入`QtCore`并将`QtGui`其视为一个全局。要使其具体化，您需要编写您的主要方法，例如：

```
from PyQt4 import QtCore, QtGui
import signal
from PyQt4 import *
from Ui_MainWindow import Ui_MainWindow
from inv_window import *
import sys
def main():
            app = QtGui.QApplication(sys.argv)
            MainWindow = QtGui.QMainWindow()
            ui = Ui_MainWindow()
            ui.setupUi(MainWindow)
            MainWindow.show()
            sys.exit(app.exec_())
if __name__ == "__main__":
    main() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-12T16:45:36.990

您从错误的模块导入。不是 100% 确定是哪一个，但我建议下载 Pycharm，因为它有助于自动完成并找出哪些模块在哪里可用，而不必每次都在站点包配置中手动查找它。我建议下载 PyQt5。这是一个很好的入门教程：http: [//zetcode.com/gui/pyqt5/](http://zetcode.com/gui/pyqt5/)另请查看：[https ://pythonspot.com/en/pyqt5/](https://pythonspot.com/en/pyqt5/)

# ios - 在 Theos Tweak 中导入类

> ID：15794222
> 
> 赞同：1
> 
> 时间：2013-04-03T17:37:48.983
> 
> 标签：ios, tweak, theos

我希望能够在我的调整中创建其他对象的实例。所以基本上我现在有类似的东西

```
%hook MyView
-(id)myClass {
   id class = %orig;
   return class;
}
%end 
```

我想要做的是像一个对象的实例一样使用类，并且能够调用类的方法而不是什么。我想也许我可以导入可能有帮助的头文件，但是我遇到了不同的问题，因为我正在使用类转储提取头文件，并且我得到所有这些对 XXUnknownSuperClass 的引用，并在我尝试制作 Tweak 项目时给我留下错误

```
error: cannot find interface declaration for ‘XXUnknownSuperclass’, superclass of ‘Class’ 
```

有什么帮助吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-30T15:30:56.977

如果一个类有一个共享实例，那么您可以使用以下方法调用任何方法：-

```
id class1 = [%c(ClassName) sharedInstance];
[class1 method]; 
```

如果您实际上在挂钩代码中，您也可以调用和方法： -

```
[self method]; 
```

你使用的头文件给你的错误有一个错误，如果你需要使用它，我建议你从不同的来源找到另一个版本。

如果您在示例中直接使用单词 class，这也会导致错误，请使用不同的名称，例如 class1 或 clas。忽略这个，如果只是一个例子。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-05-07T05:09:29.473

尝试改用此脚本：[https ://gist.github.com/Tyilo/3154222](https://gist.github.com/Tyilo/3154222)

# c# - C#中的数组结构

> ID：15794223
> 
> 赞同：0
> 
> 时间：2013-04-03T17:37:51.517
> 
> 标签：c#, arrays, struct, pinvoke, dllimport

我正在尝试这样做：

```
public static class GlobalVar
{
    [DllImport("Export.dll")]
    public static extern sentences Export();
    public unsafe struct sentence_node
    {
        public sentence_node* next;   // next node in the dictionary in the same level
        public int sNum;  // sentence number starting from 1
        public int sLoc;  // the location in the sentence (protien)
    }

    public unsafe struct sentences
    {  // list of lists of sentences in which words exists. 
        public fixed sentence_node* sList[50];
        public char[,] xplus = new char[50, 100];    
        public int wordCount;   
    }
} 
```

但我得到这两个错误：

错误一：

> 固定大小缓冲区类型必须是以下之一：bool、byte、short、int、long、char、sbyte、ushort、uint、ulong、float 或 double C:\Users\Aseel\Documents\Visual Studio 2010\Projects\CBS \CBS\GlobalVar.cs 40 22 CBS

错误2：

> GlobalVar.sentences.xplus'：在结构 C:\Users\Aseel\Documents\Visual Studio 2010\Projects\CBS\CBS\GlobalVar.cs 中不能有实例字段初始值设定项 41 24 CBS

dll 文件包含 C 语言中的搜索算法，并具有我在上面发布的两个结构以及其他结构，但我需要这两个来显示我的结果。有没有办法进入这些结构而无需在 C# 中再次重新定义它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T22:20:47.650

一般而言，在 COM 和 .NET 之间传输对象时，要么对象具有非常简单的内存占用，要么对象中的数据从适用于一种框架的数据结构复制到适用于框架的数据结构中。适合对方。

我无法准确说出您要对数据结构做什么，但也许最简单的做法是将所有内容存储在一个或多个数组中，`Int32`并对其中的数据进行自己的解释。例如，不要使用 的指针链接列表，而是将`sentence_node`所有`sentence_node`项目的数据放在一个数组中，并为每个项目`sentences`存储第一个节点的数组索引，并让每个节点保存下一个节点的数组索引。如果您这样做，用 COM 和 .NET 编写的代码将能够直接使用数据，而无需复制或转换它。

# java - Java 线程安全的只写哈希图

> ID：15794224
> 
> 赞同：3
> 
> 时间：2013-04-03T17:37:52.477
> 
> 标签：java, thread-safety, hashmap, writeonly

在我的 Java 类中，我包含一个 `Hashmap`变量（类属性）并运行一些只写到该变量的线程，`HashMap`使用`put()`：每次写入发生时，它都会存储一个唯一键（这是由设计完成的）。

类方法上的`synchronized`关键字只写是否足以满足安全条件？我的 HashMap 很简单，而不是`ConcurrentHashMap`?

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-03T17:44:49.950

不，仅同步写入是不够的。必须将同步应用于对内存的读取和写入。

某个其他线程，在某个地方，某个时候，将需要读取映射（否则，为什么要有映射？），并且该线程需要同步以正确查看映射表示的内存。它们还需要同步以避免在更新地图状态时因地图状态中的瞬时不一致而绊倒。

举一个假设的例子，假设线程 1 写入 hashmap，其效果仅存储在 CPU 1 的 1 级缓存*中*。然后线程 2，几秒钟后有资格运行并在 CPU 2 上恢复；它读取来自 CPU 2 的 1 级缓存的 hashmap - 它看不到线程 1 所做的写入，因为在写入和读取线程中的写入和读取之间没有内存屏障***操作***。即使线程 1 同步了写入，虽然写入的效果会被刷新到主内存，但线程 2 仍然看不到它们，因为读取来自一级缓存。所以同步写入只能防止*写入*冲突。

除了 CPU 缓存之外，JMM 还允许线程自己私下缓存数据，这些数据只需要在内存屏障处刷新到主内存（同步、具有一些特殊限制的易失性或在 JMM 5+ 中完成不可变对象的构造）。

要完全理解线程这个复杂的主题，您***必须***研究和研究 Java 内存模型，以及它对线程之间共享数据的影响。您必须了解“先发生”关系和内存可见性的概念，才能了解在当今多核 CPU 世界中共享数据的复杂性以及不同级别的 CPU 缓存。

如果您不想花时间理解 JMM，简单的规则是两个线程必须在某个地方/以某种方式***在同一个对象上***同步一个线程的写入和读取，以查看另一个线程的操作效果. 时期。请注意，这并不意味着对象上的所有写入和读取本身都必须同步。在一个线程中创建和配置对象然后将其“发布”到其他线程是合法的，只要发布线程和获取线程在同一对象上同步以进行移交。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T17:47:10.257

您可以将`synchronized`修饰符添加到您的方法签名中，它应该没问题。我做了一个简单的例子来向你展示它的实际效果。您可以修改循环以设置任意数量的线程。

它会尝试添加相同的键`n`时间，如果您遇到并发问题，则映射中应该有重复的键。

```
class MyMap{

    private Map<String, Object> map;

    public MyMap(){
        map = new HashMap<String, Object>();
    }

    public synchronized void put(String key, Object value){
        map.put(key, value);
    }

    public Map<String, Object> getMap(){
        return map;
    }

}

class MyRunnable implements Runnable{

    private MyMap clazz;

    public MyRunnable(MyMap clazz){
        this.clazz = clazz;
    }

    @Override
    public void run(){
        clazz.put("1", "1");
    }

}

public class Test{

    public static void main(String[] args) throws Exception{
        MyMap c = new MyMap();

        for(int i = 0 ; i < 1000 ; i ++){
            new Thread(new MyRunnable(c)).start();
        }

        for(Map.Entry<String, Object> entry : c.getMap().entrySet()){
            System.out.println(entry);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T17:47:15.377

write 方法足以保证线程安全，`synchronized`只要：

*   您的类中没有其他方法允许修改底层哈希表；
*   底层的哈希表没有以任何方式暴露，所以它不能被自己的方法修改（简单：构造一个私有实例）；
*   如果与写入方法同时使用，所有*读取哈希表的方法也会同步。*`get()`想象一下，如果在哈希映射被修改到一半时调用a 会发生什么。

如果您必须在写入哈希映射的同时读取哈希映射，那么最后一点很糟糕；`ConcurrentHashMap`在这种情况下使用。

如果您只有一堆并发写入哈希映射，*然后*只在一个线程中读取它，您的解决方案应该没问题。

# html - HTML/CSS：如何在表格单元格的同一行上让一些文本在右侧对齐，而其他文本在左侧对齐

> ID：15794226
> 
> 赞同：-1
> 
> 时间：2013-04-03T17:37:53.603
> 
> 标签：html, css, alignment

我试图让一些文本在左侧对齐，而其他文本在移动网站的表格单元格中向右对齐，但没有成功。非常感谢任何建议：

html:

带有块定义的代码将箭头向右对齐，但在它们之前添加了一个换行符，因此该行变成了两行——不好。

```
<table></tr>
<td><a href="listproducts.php">Products<span style="display: block" style="text-align:right">>></span></a></td>
</tr></table> 
```

此代码在单词 Products 之后立即显示箭头，而不是向右对齐，尽管箭头确实保持在同一行。

```
<table></tr>
<td><a href="listproducts.php">Products<span style="display: inline" style="text-align:right">>></span></a></td>
</tr></table> 
```

如何在同一行上获得左侧的文本和右侧的箭头。注意：我不想去两个单元格，因为这会弄乱布局。也不想为这些链接中的每一个都创建图像，因为它们有很多。

顺便说一句：我为此使用表格布局，因为我没有 css 知识来进行无表格布局。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T17:52:28.370

好吧，试试这个。

```
<table style="width:100%;">
    <tr>
        <td>
            <a href="listproducts.php">Products<span style="float:right;">>></span></a>
        </td>
    </tr>
</table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T17:53:26.963

由于您想要浮动的文本纯粹是装饰性的，因此最好通过 CSS 生成内容。您使用的容器标签并不重要，但标题标签似乎在这里最合适。

[http://jsfiddle.net/Jk8gq/](http://jsfiddle.net/Jk8gq/)

```
h1.decorative:after {
    content: '>>';
    float: right;
}

h1.non-decorative span {
    float: right;
}

<h1 class="decorative"><a href="listproducts.php">Products</a></h1>

<h1 class="non-decorative"><a href="listproducts.php">Products</a> <span><a href="#">See All</a></span></h1> 
```

# php - 无法从 PHP 中的 fopen 读取 JSON 数据

> ID：15794229
> 
> 赞同：0
> 
> 时间：2013-04-03T17:38:04.920
> 
> 标签：php, json, fopen

我正在尝试使用下面的函数通过 fopen 通过 POST 发送一些 JSON 数据。

```
function doPostRequest($url, $data, $optional_headers = null)
{
    $params = array(
        'http' => array(
            'method'  => 'POST',
            'content' => $data,
            'header'  => 'Content-type: application/json' . "\r\n"
                       . 'Content-Length: ' . strlen($data) . "\r\n"
        )
    );

    if ($optional_headers !== null) {
        $params['http']['header'] = $optional_headers;
    }

    $ctx = stream_context_create($params);

    try {
        $fp = fopen($url, 'rb', false, $ctx);

        $response = stream_get_contents($fp);
    } catch (Exception $e) {
        echo 'Exception: ' . $e->getMessage ();
    }

    return $response;
}

$json_data = array(
    'first_name' => 'John',
    'last_name'  => 'Doe'
);

$content = urlencode(json_encode($json_data));

doPostRequest($url, $content); 
```

我没有收到任何错误，但是当我尝试解码数据时，`$input_stream`它是空的。为什么？我错过了什么？

```
$input_stream = file_get_contents('php://input');
$json = urldecode($input_stream);
var_dump($input_stream); 
```

编辑：我应该提到代码在安装了 XAMPP 的机器上工作，但在另一台机器上却不行。服务器配置可能与它有关吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T18:30:22.720

我相信原因是因为您编码数据和设置内容类型的方式。

如果您想使用*Content-type: application/json*发送它，请不要对数据进行*urlencode*。

*有关application/json*和*application/x-www-form-urlencoded*之间的区别，请参见[此处](https://stackoverflow.com/questions/9870523/differences-in-application-json-and-application-x-www-form-urlencoded)。

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-01T23:35:45.090

问题是`$content`from`doPostRequest($url, $content);`不是 UTF-8 编码的*，并且*有一些奇怪的字符，因此`json_decode`被破坏了。

按照[`json_decode`](http://php.net/manual/en/function.json-decode.php)男人的说法：

> 此函数仅适用于 UTF-8 编码的字符串。**

# mysql - 学习SQL，抓取最新配置

> ID：15794235
> 
> 赞同：0
> 
> 时间：2013-04-03T17:38:18.263
> 
> 标签：mysql, sql

我有桌子：

```
-Parts-
ID
name

-ReportA-
ID
PART_ID
LOCATION_ID
GPS_ID
USER_ID
VALVE_ID
DATE

-ReportB-
ID
PART_ID
LOCATION_ID
TYPE_ID
NOTES
GPS_ID
DATE 
```

(1) 我想获取所有具有报告 A 或 B 的部分：

```
SELECT
    *
FROM
    parts
WHERE
    id IN (SELECT id FROM reports_a UNION SELECT id FROM reports_b 
```

完美（1）但现在我需要从最近的报告（A 或 B）中获取 LOCATION_ID 和 GPS_ID。

例子：

```
-Parts-
1
Valve

-ReportA-
1
1
4
9
2
12
2013-02-01

-ReportB-
1
1
113
3
"Changed part"
90
2013-03-27 
```

所以我需要一个可以获取所有部件及其最新位置和 gps id 的 SQL 脚本，上面的结果将产生：

```
PART_ID = 1
LOCATION_ID = 113
GPS_ID = 90 
```

所以我将我之前的 SQL 脚本更改为：

```
SELECT
    id AS PART_ID
    (
        (
           SELECT location_id FROM reports_a ORDER BY date DESC
           UNION
           SELECT location_id FROM reports_b ORDER BY date DESC
        )
        ORDER BY
           date DESC
        LIMIT 1  
    ) AS LOCATION_ID
FROM
    parts
WHERE
    id IN (SELECT id FROM reports_a UNION SELECT id FROM reports_b 
```

但是，我不能按日期 DESC 排序，因为它不是 UNION 返回的字段？

有任何想法吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T17:51:41.997

更新：我之前似乎误读了这个问题，下面的查询获取特定的最新数据`product_id`

```
SELECT 
    id,
    name,
    (
      SELECT 
        CONCAT( 'Location_id: ',location_id, ' gps_id: ', gps_id, ' date: ', `date` )
      FROM 
        ( SELECT `date`,part_id, location_id, gps_id FROM reportA
        UNION 
        SELECT `date`,part_id, location_id, gps_id FROM reportB
        ) t
      WHERE part_id = p.id  
      ORDER BY `date` desc 
      LIMIT 1) 
    as details
FROM 
    parts p 
```

**[SQLFiddle](http://www.sqlfiddle.com/#!2/02b80/1)**

您使用的结构不正确，理想情况下，您应该将所有 report_data 放在一个表中，其中的列`report_type`可能是`A`或`B`

# flash - adobe air 远程调用在 charles 调试器上不可见

> ID：15794239
> 
> 赞同：0
> 
> 时间：2013-04-03T17:38:44.517
> 
> 标签：flash, apache-flex, amf, amfphp, zend-amf

我一直在使用 PHP 作为我的服务器端语言来开发一个 adobe air 应用程序。

我正在使用 amfphp 在 AMF 中传输数据，一切进展顺利。

我最近决定使用 codeigniter 框架，集成 amfphp + codeigniter 花费的时间比必要的要长，所以我下载了 Zend_AMF

经过一些教程后，我能够设置 zend_amf + codeigniter。

但是，我在 flex 中收到以下错误

```
"faultCode:Client.Error.MessageSend faultString:'Send failed'        
 faultDetail:'Channel.Connect.Failed error NetConnection.Call.BadVersion: : 
 url: 'http://127.0.0.1/project/index.php/amf/gateway/gateway/'' 
```

所以我决定使用一个 http 代理应用程序来监控我的调用和返回的内容。Charles 似乎是完美的选择，因为它可以正确解析 AMF 数据。不幸的是，来自我的空中应用程序的远程呼叫并没有出现在 charles 中。

我了解到无法更改空中应用程序的代理设置，因为它使用默认系统代理设置，我更新了我的 Internet Explorer 代理设置，因为我了解到它具有系统范围的效果。更改此设置后，它仍然不起作用。

然而，我下载了提琴手（[http://fiddler2.com](http://fiddler2.com)）。尽管它不能正确解析 AMF 数据，但它会记录我的 http 请求。

任何关于为什么查尔斯没有记录请求的指针将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T08:29:42.153

当您要检查 localhost 上的流量时，这是一个普遍问题。Charles Proxy FAQ 中描述了一种解决方法：

> 有些系统被硬编码为不使用代理来处理 localhost 流量。特别是 IE 7 和 .Net 应用程序具有此功能。
> 
> The workaround is to connect to `http://localhost./test/` instead (note the . after localhost). This should work identically to localhost normally but with the advantage that it will go through Charles.
> 
> Alternatively you can replace localhost with the name of your machine, or your local link IP address (eg. 192.168.1.2). So rather than connecting to `http://localhost/test/` you connect to `http://machinename/test/`

# scala - “错误：'=' 预期但 '=>' 找到。” 来自 sbt concole 的错误

> ID：15794245
> 
> 赞同：0
> 
> 时间：2013-04-03T17:38:55.613
> 
> 标签：scala, sbt

我想使用 sbt 控制台作为 REPL 来尝试一些 scala 代码。

这就是我启动 sbt 控制台的方式

```
$ sbt
[info] Loading project definition from /Users/antkong/wd/scala/recfun/project/project
[info] Loading project definition from /Users/antkong/wd/scala/recfun/project
[info] Set current project to progfun-recfun (in build file:/Users/antkong/wd/scala/recfun/)
> console
[info] Compiling 2 Scala sources to /Users/antkong/wd/scala/recfun/target/scala-2.10/classes...
[info] 'compiler-interface' not yet compiled for Scala 2.10.1\. Compiling...
[info]   Compilation completed in 22.682 s
[info] Starting scala interpreter...
[info] 
```

然后我输入了这段代码：

`def sq(x:Int)=>x*x`

我预计这是一个有效的 scala 代码片段。所以我不明白为什么 sbt 会抛出这个错误信息：

```
scala> def sq(x:Int)=> x*x
<console>:1: error: '=' expected but '=>' found.
       def sq(x:Int)=> x*x
                    ^ 
```

它是语法问题还是只是 sbt 控制台/scala 解释器的行为？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T17:44:20.883

它不是有效的 Scala 代码。有效的是

```
def sq(x : Int) = x*x 
```

或者

```
def sq = (x : Int) => x*x 
```

或者

```
val sq = (x : Int) => x*x 
```

第二个定义了一个返回函数的方法。第三个定义了一个函数类型的值。这三个都可以按照以下方式使用

```
sq(2) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T17:46:49.930

> '=>' （按名称调用）正是我想尝试的。

在这种情况下，您需要在参数上使用它：

```
scala> def sq(x : => Int) = x*x
sq: (x: => Int)Int

scala> 
```

# c - 关闭套接字后，套接字连接保持 ESTABLISHED

> ID：15794250
> 
> 赞同：0
> 
> 时间：2013-04-03T17:39:11.047
> 
> 标签：c, sockets, networking

所以我有一个简单的小服务器，从我的主程序的一个单独的线程开始（这个线程的代码在底部），一切都很好，我可以用 telnet 连接到它并发送消息等等。如果我发送“退出”，程序完全按照预期执行，它会退出，但如果我发送任何其他消息，我会在日志中显示套接字已关闭，但来自 telnet 的连接仍然保持活动状态 - 我知道这一点因为我 lsof 并且因为 telnet 仍然像它已连接一样。为什么telnet的连接没有被切断？它如何在“已建立”状态下保持活力？

lsof:

```
bash      24122  Dan  cwd      DIR                1,2       340  3782037 /Users/Dan/Dropbox/PersonalDev/cruentus
bash      24813  Dan  cwd      DIR                1,2       340  3782037 /Users/Dan/Dropbox/PersonalDev/cruentus
bash      25782  Dan  cwd      DIR                1,2       340  3782037 /Users/Dan/Dropbox/PersonalDev/cruentus
bash      26395  Dan  cwd      DIR                1,2       340  3782037 /Users/Dan/Dropbox/PersonalDev/cruentus
vim       26462  Dan  cwd      DIR                1,2       340  3782037 /Users/Dan/Dropbox/PersonalDev/cruentus
vim       26462  Dan    4u     REG                1,2     16384 16889838 /Users/Dan/Dropbox/PersonalDev/cruentus/.cruentus.c.swp
cruentus  26474  Dan  cwd      DIR                1,2       340  3782037 /Users/Dan/Dropbox/PersonalDev/cruentus
cruentus  26474  Dan  txt      REG                1,2     14840 16889520 /Users/Dan/Dropbox/PersonalDev/cruentus/obj/cruentus
cruentus  26474  Dan  txt      REG                1,2    600576   748159 /usr/lib/dyld
cruentus  26474  Dan  txt      REG                1,2 303132672 15641156 /private/var/db/dyld/dyld_shared_cache_x86_64
cruentus  26474  Dan    0u     CHR               16,0  0t532754      899 /dev/ttys000
cruentus  26474  Dan    1u     CHR               16,0  0t532754      899 /dev/ttys000
cruentus  26474  Dan    2u     CHR               16,0  0t532754      899 /dev/ttys000
cruentus  26474  Dan    3u    IPv4 0x5e17dc80b705100f       0t0      TCP *:terabase (LISTEN)
cruentus  26474  Dan    5u    IPv4 0x5e17dc80a55f88d7       0t0      TCP localhost:krb524->localhost:55775 (ESTABLISHED)
telnet    26482  Dan  cwd      DIR                1,2       340  3782037 /Users/Dan/Dropbox/PersonalDev/cruentus
lsof      26483  Dan  cwd      DIR                1,2       340  3782037 /Users/Dan/Dropbox/PersonalDev/cruentus
grep      26484  Dan  cwd      DIR                1,2       340  3782037 /Users/Dan/Dropbox/PersonalDev/cruentus 
```

服务器代码：

```
void *controller_thread(void *a __unused) {
    puts("Starting controller thread");
    int contsock, asock, alen;
    struct sockaddr_in saddr, inaddr;
    struct timeval tv;
    struct linger lingading;

    if ((contsock = socket(AF_INET, SOCK_STREAM, 0)) < 0) {
        perror("controller : socket");
        return NULL;
    }

    bzero((void*)&saddr, sizeof(struct sockaddr_in));
    saddr.sin_len = sizeof(struct sockaddr_in);
    saddr.sin_family = AF_INET;
    saddr.sin_port = htons(4444);
    saddr.sin_addr.s_addr = inet_addr("127.0.0.1");

    if (bind(contsock, (const struct sockaddr*)&saddr, (socklen_t)saddr.sin_len) != 0) {
        perror("controller : bind");
        return NULL;
    }

    if (listen(contsock, 1) != 0) {
        perror("controller : listen");
    }
    lingading.l_onoff = 1;
    lingading.l_linger = 5;
    if (setsockopt(contsock, SOL_SOCKET, SO_LINGER_SEC, (const void*)&lingading, (socklen_t)sizeof(struct linger)) != 0) {
        perror("controller : setsockopt1");
        return NULL;
    }
    tv.tv_sec = 5;
    tv.tv_usec = 0;
    if (setsockopt(contsock, SOL_SOCKET, SO_SNDTIMEO, (const void*)&tv, (socklen_t)sizeof(struct timeval)) != 0) {
        perror("controller : setsockopt2");
        return NULL;
    }
    tv.tv_sec = 5;
    tv.tv_usec = 0;
    if (setsockopt(contsock, SOL_SOCKET, SO_RCVTIMEO ,(const void*)&tv, (socklen_t)sizeof(struct timeval)) != 0) {
        perror("controller : setsockopt3");
        return NULL;
    }

    bzero((void*)&inaddr, sizeof(struct sockaddr_in));
    alen = sizeof(struct sockaddr_in);
    if ((asock = accept(contsock, (struct sockaddr *)&inaddr, (socklen_t*)&alen)) != -1) {
        printf("Got controller connection: %s:%d\n", inet_ntoa(inaddr.sin_addr), ntohs(inaddr.sin_port));
        tv.tv_sec = 5;
        tv.tv_usec = 0;
        if (setsockopt(asock, SOL_SOCKET, SO_RCVTIMEO ,(const void*)&tv, (socklen_t)sizeof(struct timeval)) != 0) {
            perror("controller : setsockopt3");
            return NULL;
        }
        char abuf[4];
        if (read(asock, abuf, 4) == 4 && strncmp("quit", abuf, 4) == 0) {
            puts("Quitting now!");
            exit(0);
        }
    } else {
        perror("controller : accept");
    }

    puts("Failed to quit from controller");

    if (shutdown(contsock, SHUT_WR) != 0) {
        if (errno != ENOTCONN)
            perror("controller : shutdown");
    }
    char tmp;
    while (read(contsock, &tmp, 1) == 1) {
        // remove all packets...
    }
    puts("Shutdown controller socket");
    if (close(contsock) != 0) {
        perror("controller : close");
    }
    puts("Closed controller socket");
    return NULL;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T18:06:30.683

您正在关闭您的侦听套接字（contsock），但不是您的连接套接字（asock）。然后你回到你的主线，连接套接字仍然打开！

我建议将 contsock 和 asock 都预先设置为 -1 以标记为“未打开”。在任何返回之前，如果其中一个不是 -1，请关闭它。这将确保您在返回之前关闭所有套接字，即使在您的错误条件之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T08:36:20.227

```
 if (read(asock, abuf, 4) == 4 && strncmp("quit", abuf, 4) == 0) {
        puts("Quitting now!");
        exit(0);
    } 
```

==>

```
 if (read(asock, abuf, 4) == 4 && strncmp("quit", abuf, 4) == 0) {
        puts("Quitting now!");
        close(contsock);
        exit(0);
    } 
```

抱歉，我不会写英文，好吧...如果你想使用exit() 或return，必须使用close()。

# html - Chrome 和 Safari 忽略 (?) 位置：绝对

> ID：15794254
> 
> 赞同：1
> 
> 时间：2013-04-03T17:39:26.397
> 
> 标签：html, css, webkit

看看[http://www.habitatlandscape.co.uk/](http://www.habitatlandscape.co.uk/)

在 Firefox 甚至 Internet Explorer (!!!) 中，弹出式菜单完美地显示出来，在白色条带中垂直居中，并且总是从最左侧开始。

在 Chrome 中，菜单在 parent 下水平开始`li`，而不是垂直居中。我可以通过将 webkit 定位到不同的位置来修复垂直对齐，但我无法修复水平对齐。

为什么 Webkit 忽略`position:absolute;left:0;`？

CSS：

```
#header #menu
{
 margin:0;
 padding:0;
}

#header #menu ul
{
 list-style-type:none;
 margin:0;
 padding:0;
 margin-top:28px;
 height:24px;
}

#header #menu ul li
{
 display:inline;
 position:relative;
}

#header #menu ul li a
{
 display:block;
 float:left;
 padding:7px;
 padding-bottom:3px;
 background:#fff;
 margin-right:5px;
 text-decoration:none;
 -webkit-border-top-left-radius: 5px;
 -webkit-border-top-right-radius: 5px;
 -moz-border-radius-topleft: 5px;
 -moz-border-radius-topright: 5px;
 border-top-left-radius: 5px;
 border-top-right-radius: 5px;
 font-family:'museo', serif;
 font-size:12px;
 text-transform:uppercase;
 color:#fff;
 font-weight:bold;
 padding-left:12px;
 padding-right:12px;
 background:#01973D;
 position:relative;
 z-index:2;
}

#header #menu ul li:hover a
{
 background:#00BB4A;
}

#header #menu ul li ul
{
 clear:both;
 display:none;
 position:absolute;
 top:39px;
 width:700px;
 margin:0;
 padding:0;
}

#header #menu ul li ul li
{
 display:block;
}

#header #menu ul li ul li a
{
 background:#fff !important;
 color:#000;
 font-weight:normal;
 padding:7px;
 padding-left:11px;
 color:#01973D;
 padding-top:10px;
 margin:0;
 float:left;
}

#header #menu ul li ul li a:hover
{
 color:#000;
}

#header #menu ul li:hover ul
{
 display:block;
} 
```

HTML（CMS 生成）：

```
<div id="menu">
 <ul>
  <li class="parent"><a class="parent" href="http://www.habitatlandscape.co.uk/about-us/"><span>About Us</span></a>
   <ul>
    <li><a href="http://www.habitatlandscape.co.uk/about-us/"><span>Company History</span></a></li>
    <li><a href="http://www.habitatlandscape.co.uk/about-us/meet-the-team/"><span>Meet The Team</span></a></li>
   </ul>
  </li>
  <li class="parent"><a class="menuactive parent" href="http://www.habitatlandscape.co.uk/portfolio/"><span>Portfolio</span></a>
   <ul>
    <li><a href="http://www.habitatlandscape.co.uk/portfolio/"><span>View before, during and after photos from recent projects</span></a></li>
   </ul>
  </li>
  <li class="parent"><a class="parent" href="http://www.habitatlandscape.co.uk/services/"><span>Services</span></a>
   <ul>
    <li><a href="http://www.habitatlandscape.co.uk/services/design/"><span>Design</span></a></li>
    <li><a href="http://www.habitatlandscape.co.uk/services/patios/"><span>Patios</span></a></li>
    <li><a href="http://www.habitatlandscape.co.uk/services/decking/"><span>Decking</span></a></li>
    <li><a href="http://www.habitatlandscape.co.uk/services/turf/"><span>Turf</span></a></li>
    <li><a href="http://www.habitatlandscape.co.uk/services/ponds/"><span>Ponds</span></a></li>
    <li><a href="http://www.habitatlandscape.co.uk/services/driveways/"><span>Driveways</span></a></li>
    <li><a href="http://www.habitatlandscape.co.uk/services/fencing/"><span>Fencing</span></a></li>
    <li><a href="http://www.habitatlandscape.co.uk/services/electrics/"><span>Electrics</span></a></li>
    <li><a href="http://www.habitatlandscape.co.uk/services/garden-structures/"><span>Structures</span></a></li>
   </ul>
  </li>
 </ul>
 // etc
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T18:06:42.053

你已经通过`display:inline`-ing 你的`<li>`元素但是`display:block`-ing 你的`<a>`元素造成了混乱。

在 HTML 中，将块级元素嵌套在内联元素中是无效的：

```
<span><div>FAIL</div></span> 
```

当你做这样的事情时，你会遇到跨浏览器的问题。如果您使用 CSS 更改`display`属性也是如此：

```
<div style="diplay:inline"><span style="display:block">STILL A FAIL</span></div> 
```

这就是你所做的：

```
#header #menu ul li {
    display: inline;
    /* ... */
}
#header #menu ul li a {
    display:block;
    /* ... */
} 
```

就规范而言，这种行为或多或少是未定义的（因为它没有意义），所以浏览器保留做一些疯狂或荒谬的事情的权利——这就是你所看到的。它在 Firefox 中有效只是因为你很幸运，它在 Internet Explorer 中有效是因为 Internet Explorer 本质上是疯狂和荒谬的。

如果您希望这些`<li>`元素水平堆叠，`float:left`则使用它们而不是内联它们。然后你可以毫无问题地使用`display:block`你的元素。`<a>`完成后，您仍然需要切换哪些元素是`position:relative;`-ed，并且可能在`left:0`某处添加一个。

[这是您当前在 jsfiddle 上的问题](http://jsfiddle.net/Cuq5M/)的[示例，这是我建议的 jsfiddle 修复示例](http://jsfiddle.net/Cuq5M/2/)，其中涉及`#header #menu ul`相对定位元素而不是`#header #menu ul li`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T17:52:19.383

当我给它时，它修复`#header #menu ul li`了`display:inline-block;`它。它还改变了隐藏 ul`top`定位的结果，如果按钮无论如何都应该是 24px 以匹配高度，对吧？

# ms-access - 编译或反编译 MS Access MDB 文件有什么作用？

> ID：15794260
> 
> 赞同：3
> 
> 时间：2013-04-03T17:39:41.800
> 
> 标签：ms-access, compilation, vba, ms-access-2003

我有一个旧的 Access 应用程序。前几天它崩溃了，并且在压缩和修复期间崩溃了。经过一大堆谷歌搜索，我最终要做的是反编译 MDB，然后重新编译它，它会再次运行。

所以我的问题是，反编译 MDB 有什么作用，或者就此而言，编译 MDB 有什么作用？无论哪种方式，我都可以访问该代码，并且它在 VBA 代码编辑器中显示相同。那么它只是 MS Access MDB 内部的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T18:11:51.883

VBA 被编译为`intermediate language`（如果我没记错的话，它被称为`P-code`）。你看不到它。它嵌入到文件中。

当您将 MS-Access 数据库保存为 .mde 或 .accde 时，文件中仅存在已编译的版本。没有您可以看到的代码。

**AFAIK：**

您的代码几乎没有状态。您的干净文本代码，它会自动编译为我们称之为`op-code`编译为`Packed code`. 当它运行时，它使用 VM JIT 将其即时编译为机器代码。

当您的代码被编译并且您对源代码进行更改时，您会在运行应用程序时失去编译状态，然后它以`debug`自动编译的操作码模式运行，直到您再次编译它。

# javascript - 正则表达式从字符串中获取十进制值，例如 1.4em

> ID：15794262
> 
> 赞同：2
> 
> 时间：2013-04-03T17:39:44.950
> 
> 标签：javascript, regex, decimal, css

我一直在挠头并四处寻找，我似乎找不到另一个与我遇到的问题非常相似的问题。

我有一个变量，例如：

```
var style = ' font-size: 12px; line-height: 1.4em; '; 
```

我可以很容易地使用（并将此方法用于我需要检索的许多其他值）提取 font-size 的值：

```
var match = /(?:^|\s)font-size\s*:\s*(\d+)px/i.exec( style );
fontsizetest = match && match[1];
console.log(fontsizetest); 
```

但是当我尝试提取行高的值（具有相对 em 大小）时，我遇到了各种问题（主要是由于小数位）：

在玩了一段时间后，这是我能找到的最接近的解决方案：

```
var match = /(?:^|\s)line-height\s*:\s*(\d|\.|\d*)em/i.exec( style );
lineheighttest = match && match[1];
console.log(lineheighttest); 
```

但这不会返回我的值 1.4

任何将我指向正确方向的想法或建议将不胜感激。我敢肯定有一个简单的解释，但我只是看了太久？

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T17:44:15.967

您的问题是您在正则表达式语法方面很弱。

试试这个：

```
var match = /(?:^|\s)line-height\s*:\s*((?:\d*\.)?\d+)em/i.exec( style ); 
```

这接受`2`,`.8`或之类的数字`1.2`。

# wicket - 忙碌指示灯 - 未定义检票口

> ID：15794265
> 
> 赞同：0
> 
> 时间：2013-04-03T17:39:55.257
> 
> 标签：wicket, wicket-6

[检票口 6.6.0]

我尝试将繁忙的指标脚本从 1.5.10 迁移到 6.6.0（基于[Generic Busy Indicator](https://cwiki.apache.org/WICKET/generic-busy-indicator-for-both-ajax-and-non-ajax-submits.html)），但我总是在第 ig 行收到错误**“Wicket is not defined”**。*Wicket.Event.subscribe(...)*。

我应该手动包含任何 JavaScriptReference 或 Wicket 吗？我问是因为我的页面源代码中没有任何 Wicket JS 脚本引用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T17:54:08.797

您的页面中是否有任何 Ajax 行为？如果您不这样做，则不会贡献库，但是您可以调用`CoreLibrariesContributor.contribute(yourApplicationInstance, iHeaderResponse);`将其添加到您的页面中。

# php - php include 和 mysqli 准备

> ID：15794267
> 
> 赞同：0
> 
> 时间：2013-04-03T17:39:56.217
> 
> 标签：php, function, include, mysqli

我试图弄清楚这一点，但代码在我的自定义函数页面上的函数内部不起作用。即使它确实运行了返回到我的报告中的值以添加到我的 $html 以供以后回显。想法？？？

谢谢！！

```
//**************** page reports.php***********//

include 'db_connect.php';
include 'functions.php';
include 'custom_functions.php';

sec_session_start();
if(login_check($mysqli) == true) {

if($sub_val ==='Jobs In This Week'){ // if week report jobs

            $table = 'jobs';
            $op = 'in';
            $start ='';
            $end = '';

            mkwk();
            sql_prepare($table,$op,$start,$end,$mysqli);

    } // end if jobs report week
        elseif($sub_val ==='Jobs In This Month'){ // if month report jobs
            // functoin to make current month

            mkmth();
            sql_prepare($table,$op,$start,$end);

    } // end if jobs report month

$html = 'add html here to build source';
echo html;

// ******** custom_functions.php ******//

function sql_prepare($table,$op,$start,$end,$mysqli,$stmt){

    global $job_id,$vin,$yr,$mk,$mdl,$color,$miles_in,$miles_out,$quoted,$price,$phone,$customer,$bal,$tax,$msg,$in,$out;
    if($table==='jobs'){
            $stmt = $mysqli->prepare("SELECT * FROM jobs WHERE ? between ? and ? ");
            $stmt->bind_param('sss', $oper,$startday,$endday);

            $oper = $op;
            $startday = $start;
            $endday = $end;

            $stmt->execute();
            $stmt->store_result();

            $stmt->bind_result($job_id,$vin,$yr,$mk,$mdl,$color,$miles_in,$miles_out,$quoted,$price,$phone,$customer,$bal,$tax,$msg,$in,$out);
            return $job_id;
            return $vin;
            return $yr;
            return $mk;
            return $mdl;
            return $color;
            echo 'sql prepare worked';
    }

    if($table==='expenses'){
            $stmt = $mysqli->prepare("SELECT * FROM expenses WHERE ? between ? and ? ");
            $stmt->bind_param('sss', $oper,$startday,$endday);

            $oper = $op;
            $startday = $start;
            $endday = $end;

    }

    return $stmt;
}

// function to make current week,  
function mkwk(){    

    // define global variable so that they be available outside the function
            global $month;
            global $year;
            global $day;
            global $dayl;
            global $sday;
            global $eday;
            global $start;
            global $end;

    // do the actual work
            $month = date("m");
            $year = date("Y");
            $day = date("d");
            $dayl = date("l");

            if($dayl==='Monday'){
             $sday = $day;
             $eday = $day+6;    
            }elseif($dayl==='Tuesday'){
                $sday = $day-1;
                $eday = $day+5;
            }elseif($dayl==='Wednesday'){
                $sday = $day-2;
                $eday = $day+4;
            }elseif($dayl==='Thursday'){
                $sday = $day-3;
                $eday = $day+3;
            }elseif($dayl==='Friday'){
                $sday = $day-4;
                $eday = $day+2;
            }elseif($dayl==='Saturday'){
                $sday = $day-5;
                $eday = $day+1;
            }elseif($dayl==='Sunday'){
                $sday = $day-6;
                $eday = $day;
            }

            $start = $year.'-'.$month.'-'.$sday;
            $end = $year.'-'.$month.'-'.$eday;

    // return the values to the global world
            return $month;
            return $year;
            return $day;
            return $dayl;
            return $sday;
            return $eday;
            return $start;
            return $end;

}

// end function to make current week

// functoin to make current month
function mkmth(){
    // define global variable so that they be available outside the function
            global $month;
            global $year;
            global $day;
            global $start;
            global $end;

    // do the work
            $month = date("m");
            $year = date("Y");
            $day = date("d");

            $start = $year.'-'.$month.'-01';
            $end = $year.'-'.$month.'-31';

    // return the values to the global world
            return $month;
            return $year;
            return $day;
            return $start;
            return $end;
}
// end function for current month 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T02:04:22.410

所以我为那些不知道该怎么做的人想出来了。

该函数正在工作，但只是我没有计算返回值。基本上我需要设置

```
return $html; 
```

这将发回我想要返回的 html，在另一个页面上，我想设置一个值以等于返回值或像这样回显返回值。

```
$html = sql_prepare(...insert values sent here,$html); 
```

或者

```
 echo sql_prepare(...insert values sent here,$html); 
```

这完成了工作。感谢您的回复

# c# - 如何将带有一些绑定参数的任意函数传递给另一个函数？

> ID：15794269
> 
> 赞同：3
> 
> 时间：2013-04-03T17:39:57.380
> 
> 标签：c#, reflection, delegates

我有一个通用函数 CallLater，它应该接受任意其他函数，并可能稍后使用一些参数调用它。应支持所有类型的功能 - 静态、实例、私有、公共。在 CallLater 中借助反射动态分析和构造参数。但是，在将函数传递给 CallLater 之前，其中一些可能需要绑定到固定值。

例如：

```
void CallLater(Delegate d) {
  // Expects a function that returns string and has one argument of arbitrary type.
  if (d.Method.GetParameters().Length == 1 && 
      d.Method.ReturnType == typeof(string)) {
    object param1 = Activator.CreateInstance(d.Method.GetParameters()[0].ParameterType);
    Console.WriteLine((string)d.DynamicInvoke(param1));
  }
}

// Has one extra float parameter.
string MyFunc(int a, float b) { ... } 
```

我的想法是做这样的事情：

```
float pi = 3.14f;
CallLater(delegate(int a) { return MyFunc(a, pi); }); 
```

但这不起作用，因为编译器抱怨：

```
Error CS1660: Cannot convert `anonymous method' to non-delegate type `System.Delegate' (CS1660) (test-delegate) 
```

实现我的目标的正确方法是什么？

PS 请不要提供声明固定委托类型的解决方案，因为 CallLater 更复杂，并且也可能支持可变数量的参数。

PPS 可能是我的解决方案是 Func，但到目前为止我无法在 Mono 上使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T17:47:31.740

您可以随时重新声明`Func`自己：

```
public delegate TReturn FFunc<TArg,TReturn>(TArg arg); 
```

您可以这样使用：

```
float pi = 3.14f;
CallLater((FFunc<int,string>)(delegate(int a) { return MyFunc(a, pi); })); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-04T09:22:42.240

我建议使用匿名函数来调用要执行的方法。这些将在稍后执行匿名方法时执行。

```
private static void ExecuteBoolResult(Func<bool> method)
{
    bool result = method();
    if (!result)
    {
        throw new InvalidOperationException("method did not return true");
    }
}

CheckBoolResult(() => AnotherFunction("with ", 3, " parameters"));
CheckBoolResult(() => AnotherFunction(2, "parameters")); 
```

# android - 保持双向 UDP 连接

> ID：15794271
> 
> 赞同：4
> 
> 时间：2013-04-03T17:40:04.293
> 
> 标签：android, sockets, udp, ip, datagram

我正在编写一个 Android UDP 客户端，它与 Windows 服务器连接并双向通信（发送和接收的消息之间没有关系）。将初始数据报发送到服务器后，我希望能够随时向任一方向发送数据。我的问题是：

1）保持初始套接字打开并将其用于发送和接收是否正确？

2）我应该在同一个线程中发送和接收（接收超时）还是在单独的线程中（允许接收阻塞）？

3）如果在一定间隔内没有发送/接收数据，套接字会自动关闭吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-04T20:41:04.620

1.  是的，这没问题，是处理双向通信最方便的方式。此外，如果客户端位于 NAT 之后，则需要[打孔](http://en.wikipedia.org/wiki/UDP_hole_punching)才能正常工作。即使您绑定到客户端上的相同 IP 和端口，也不能保证在 NAT 中获得相同的映射。因此，服务器可能无法访问客户端。请记住，这些映射超时并从 NAT'ed 网络内部启动，因此如果客户端长时间空闲，可能需要进行一些探测。

2.  这取决于您如何设计应用程序，但这样做没有问题。只需使用例如 select 监视套接字的读取和写入状态。如果您创建一个结合读/写队列的非阻塞套接字，您肯定不会阻塞操作。由于 UDP 要么写入所有内容，要么不写入任何内容，因此队列非常简单。

3.  根据我的经验，这在 Android 上是特定于供应商的。有些手机会长时间保持套接字打开，而另一些手机会在一段时间后关闭它们。当设备进入睡眠状态（按下电源按钮时的状态）时，所有手机似乎都会关闭套接字，除了与后台任务相关的那些。

# css - 流体视频高度

> ID：15794273
> 
> 赞同：2
> 
> 时间：2013-04-03T17:40:05.770
> 
> 标签：css, iframe, video, height, responsive-design

我找到了 fluidvids.js 并在我的网站上使用它，但它只考虑宽度。我有一些用户的浏览器具有更多的全景、窄高度视口，并且看不到我的视频上的控件，因为窗口太宽（900 像素）以至于视频宽度无法随高度缩放。我想要响应高度，并查看了 AListApart 等上的几篇帖子，但找不到明显的解决方案。如果您有任何提示或看到我缺少的明显的东西，请告诉我。

刚刚了解 CodePen，但我与所有 js 的相关链接似乎使这有点复杂（抱歉）。

这是链接：[http ://chrisphoto.com/masters2/index.html#chapter-2](http://chrisphoto.com/masters2/index.html#chapter-2)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T19:35:55.027

在这里，您可以在 CSS和 youtube iframe中获得一些[很棒](http://css-tricks.com/NetMag/FluidWidthVideo/Article-FluidWidthVideo.php)的[响应式视频技巧。](http://css-tricks.com/NetMag/FluidWidthVideo/Article-FluidWidthVideo.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-04T12:28:16.970

对于 Vimeo 和 Youtube 视频，将 iframe 包装在一个 div 中，给它一个类“video_wrapper”

```
.video_wrapper{
    margin: 82px auto; 
    position: relative;
    padding-bottom: 56.25%; /* 16:9 */
    padding-top: 25px;
    height: 0; width: 80%;
}

.vdo_span iframe {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 80%; /* Adjust height to your own need */
} 
```

# c# - 使用 protobuf-net 序列化巨大的复合图列表导致内存不足异常

> ID：15794274
> 
> 赞同：2
> 
> 时间：2013-04-03T17:40:06.340
> 
> 标签：c#, serialization, protobuf-net, large-data-volumes

我正在尝试使用 Protobuf-net 序列化一个包含非常大的复合对象图列表（约 200000 个节点或更多）的对象。基本上我想要实现的是将完整的对象保存到一个文件中，尽可能快且尽可能紧凑。

我的问题是在尝试序列化对象时出现内存不足异常。在我的机器上，当文件大小约为 1.5GB 时会引发异常。我正在运行一个 64 位进程并使用 StreamWriter 作为 protobuf-net 的输入。由于我直接写入文件，我怀疑 protobuf-net 中发生了某种缓冲，导致异常。我曾尝试使用 DataFormat = DataFormat.Group 属性，但到目前为止没有运气。

我可以通过将列表中的每个组合序列化到一个单独的文件来避免异常，但如果可能的话，我更愿意一次性完成所有操作。

我做错了什么还是根本无法实现我想要的？

说明问题的代码：

```
class Program
{
    static void Main(string[] args)
    {
        int numberOfTrees = 250;
        int nodesPrTree = 200000;

        var trees = CreateTrees(numberOfTrees, nodesPrTree);
        var forest = new Forest(trees);

        using (var writer = new StreamWriter("model.bin"))
        {
            Serializer.Serialize(writer.BaseStream, forest);
        }

        Console.ReadLine();
    }

    private static Tree[] CreateTrees(int numberOfTrees, int nodesPrTree)
    {
        var trees = new Tree[numberOfTrees];
        for (int i = 0; i < numberOfTrees; i++)
        {
            var root = new Node();
            CreateTree(root, nodesPrTree, 0);
            var binTree = new Tree(root);
            trees[i] = binTree;
        }
        return trees;
    }

    private static void CreateTree(INode tree, int nodesPrTree, int currentNumberOfNodes)
    {
        Queue<INode> q = new Queue<INode>();
        q.Enqueue(tree);
        while (q.Count > 0 && currentNumberOfNodes < nodesPrTree)
        {
            var n = q.Dequeue();
            n.Left = new Node();
            q.Enqueue(n.Left);
            currentNumberOfNodes++;

            n.Right = new Node();
            q.Enqueue(n.Right);
            currentNumberOfNodes++;
        }
    }
}

[ProtoContract]
[ProtoInclude(1, typeof(Node), DataFormat = DataFormat.Group)]
public interface INode
{
    [ProtoMember(2, DataFormat = DataFormat.Group, AsReference = true)]
    INode Parent { get; set; }
    [ProtoMember(3, DataFormat = DataFormat.Group, AsReference = true)]
    INode Left { get; set; }
    [ProtoMember(4, DataFormat = DataFormat.Group, AsReference = true)]        
    INode Right { get; set; }
}

[ProtoContract]
public class Node : INode
{
    INode m_parent;
    INode m_left;
    INode m_right;

    public INode Left
    {
        get
        {
            return m_left;
        }
        set
        {
            m_left = value;
            m_left.Parent = null;
            m_left.Parent = this;
        }
    }

    public INode Right
    {
        get
        {
            return m_right;
        }
        set
        {
            m_right = value;
            m_right.Parent = null;
            m_right.Parent = this;
        }
    }

    public INode Parent
    {
        get
        {
            return m_parent;
        }
        set
        {
            m_parent = value;
        }
    }
}

[ProtoContract]
public class Tree
{
    [ProtoMember(1, DataFormat = DataFormat.Group)]
    public readonly INode Root;

    public Tree(INode root)
    {
        Root = root;
    }
}

[ProtoContract]
public class Forest
{
    [ProtoMember(1, DataFormat = DataFormat.Group)]
    public readonly Tree[] Trees;

    public Forest(Tree[] trees)
    {
        Trees = trees;
    }
} 
```

抛出异常时的堆栈跟踪：

```
at System.Collections.Generic.Dictionary`2.Resize(Int32 newSize, Boolean forceNewHashCodes)
at System.Collections.Generic.Dictionary`2.Insert(TKey key, TValue value, Boolean add)
at ProtoBuf.NetObjectCache.AddObjectKey(Object value, Boolean& existing) in NetObjectCache.cs:line 154
at ProtoBuf.BclHelpers.WriteNetObject(Object value, ProtoWriter dest, Int32 key, NetObjectOptions options) BclHelpers.cs:line 500
at proto_5(Object , ProtoWriter ) 
```

我正在尝试一种解决方法，使用 SerializeWithLengthPrefix 方法一次将一个树的数组序列化为一个文件。序列化似乎有效 - 我可以看到将列表中的每棵树添加到文件后文件大小增加了。但是，当我尝试反序列化树时，我得到了 Invalid wire-type 异常。当我序列化树时，我正在创建一个新文件，因此该文件应该是无垃圾的 - 除非我正在编写原因垃圾;-)。我的序列化和反序列化方法如下：

```
using (var writer = new FileStream("model.bin", FileMode.Create))
{
    foreach (var tree in trees)
    {
        Serializer.SerializeWithLengthPrefix(writer, tree, PrefixStyle.Base128);
    }
}

using (var reader = new FileStream("model.bin", FileMode.Open))
{
    var trees = Serializer.DeserializeWithLengthPrefix<Tree[]>>(reader, PrefixStyle.Base128);
} 
```

我是否以不正确的方式使用该方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T22:35:31.697

代码只尊重默认数据格式并没有*帮助*，`AsReference`这意味着它试图将数据保存在内存中，以便它可以将对象长度前缀写回数据流，这正是我们所做**的。 t**想要这里（因此您对 的使用非常正确`DataFormat.Group`）。这将解释树的单个分支的缓冲。我已经在本地对其进行了调整，并且我可以肯定地确认它现在只写入前向（调试版本有一个方便的`ForwardsOnly`标志，我可以启用它检测到这一点并喊叫）。

通过这个调整，我已经让它在 250 x 20,000 上工作，但是当我在 250 x 200,000 上工作时，我遇到了字典大小调整（即使在 x64 中）的次要问题——就像你说的那样，在 1.5GB 左右。然而，我突然想到，在进行每个序列化/反序列化时，我可能能够分别丢弃其中一个（正向或反向）。当堆栈跟踪为您中断时，我会对堆栈跟踪感兴趣-如果最终是字典调整大小，我可能需要考虑转移到一*组*字典...

# php - SHA512 在 PHP 中生成随机数

> ID：15794281
> 
> 赞同：3
> 
> 时间：2013-04-03T17:40:24.960
> 
> 标签：php, random, generator, sha

我正在使用随机数填充一个数组`$blockhash[$i] = rand().time().rand()`

然后，对于该数组中的每个随机数，我计算对应的 SHA512

```
$SecretKey = "60674ccb549f1988439774adb82ff187e63a2dfd403a0dee852e4e4eab75a0b3";
$sha = hash_hmac('sha512', $value, $SecretKey); 
```

拆分它：

```
$pool  = str_split($sha, 2); 
```

然后我从 $pool 数组中获取第一个数字，将 hex 转换为 dec 并将其限制在 1 和 50 内：

```
$dec = hexdec($pool[0]) % 50 + 1; 
```

问题是这些数字不是那么随机，我不知道为什么。我从 1 到 50 计算每个数字的频率，但数字 1、2、3、4、5 和 6 比其他数字出现的频率更高。见图表

![在此处输入图像描述](https://i.stack.imgur.com/PUdcT.png)

为什么会发生这种情况以及如何解决？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T17:46:32.240

您要转换为十进制的 2 个十六进制字符将在 0-255 的范围内。您将其修改为 50 并添加 1，使 1-6（范围（0-5）+1）在 1-256 上出现 6 次，而其他每个数字仅出现 5 次。这将导致这些数字增加约 20%。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T17:50:05.567

你得到 1-6 的频率更高，因为你从哈希中获取了两个十六进制数字。那是一个字节，所以它可以存储从`0`to 的值`255`。然后你使用模数`50`。结果你得到范围`0-49`, `50-99`, `100-149`, `150-199`, `200-249`and... `250-255`。最后一个是导致结果中 1-6 的额外流行的原因。

解决方案：只需使用`mt_rand(1,50);`

[编辑]

如果您确实需要将数字从 0-255 范围转换为 1-50 范围，则解决方案将是缩放和舍入。

```
$number = round(($byteValue)/(255/49))+1; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T17:42:11.150

既不也不[`rand()`](http://php.net/rand)生成[`mt_rand()`](http://php.net/mt_rand)真正的随机值。

如手册所述：

> 此函数不会生成加密安全值，并且不应用于加密目的。如果您需要加密安全值，请考虑[`openssl_random_pseudo_bytes()`](http://php.net/openssl_random_pseudo_bytes)改用。

请参阅[更好的随机生成 PHP](https://stackoverflow.com/questions/5611/better-random-generating-php)以获得指向相同问题并有一些好的答案的 StackOverflow 问题。

# charts - 即使 y 值全为 0，Microsoft 图表堆叠区域仍然可见

> ID：15794285
> 
> 赞同：1
> 
> 时间：2013-04-03T17:40:48.383
> 
> 标签：charts

这是我的问题。假设我有 2 个堆叠区域系列，它们的数据如下所示：

系列 A（蓝色）：X 值 {1, 2, 3, 4} Y 值 {4, 6, 7, 6}

系列 B（红色）：X 值 {1, 2, 3, 4} Y 值 {0, 0, 0, 0}

如果我将这 2 个系列放在一个图表中（A 第一和 B 第二），即使 B 系列的所有 y 值都是 0，蓝色区域顶部仍然会出现一条红线。有没有办法确保在不从图例中删除 B 系列的情况下红线不出现在图表中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T20:03:49.433

将数据系列格式化为仅填充且无边框。如果区域有边框，即使值为 0 也会显示。

# java - GAE如何从服务器动态提供html文件

> ID：15794289
> 
> 赞同：0
> 
> 时间：2013-04-03T17:41:09.790
> 
> 标签：java, google-app-engine, gwt, servlets, dynamic

我在我的 GWT 应用程序中使用 GAE (Java)。

当我的用户输入某个 URL 时，我想在服务器端动态创建一个 html 页面并将其提供给客户端。

我怎样才能做到这一点？使用 HttpServlet？

我在这里很迷茫，我是否需要在服务器端有一个动态完成并提供给客户端的 html 模板文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T05:21:25.217

您应该从教程开始学习基础知识。您可以动态生成整个 HTML，但这往往会变得很尴尬。最好将 HTML 分离为模板，并使用 GAE 应用程序中实现的逻辑填写详细信息。

[https://developers.google.com/appengine/docs/java/gettingstarted/](https://developers.google.com/appengine/docs/java/gettingstarted/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T05:33:04.920

您可以使用像这样的库[https://github.com/alexmuntean/java-url-rewrite](https://github.com/alexmuntean/java-url-rewrite)。阅读自述文件以了解更多信息。

您可以接受请求并提供您想要的任何内容（jsp、jsf、html 静态）。您还可以使用现有的 html 编写 gwt 代码来执行操作（效果或 ajax 等）（只需将 id 添加到元素）并为该页面编写另一个入口点，并将生成的 js 包含在您的页面中

我打算做一个关于如何让一个 gwt 网站可以被谷歌索引的教程和 POC

# jquery-selectors - jquery 选择器和循环

> ID：15794290
> 
> 赞同：0
> 
> 时间：2013-04-03T17:41:10.363
> 
> 标签：jquery-selectors, jquery

我缺少 jQuery 对象的结构。我需要访问`<li>`项目的数据属性。这会产生预期的输出，将最后一个数据对象打印`<li>`到控制台：

```
console.log($('#assessment_list li:last').data()); 
```

但是当我尝试遍历更大的对象以获取每个对象的数据时`<li>`，我收到一个错误：

```
for (item in $('#assessment_list li')){
    console.log(item.data());
} 
```

抛出：“未捕获的类型错误：对象 0 没有方法‘数据’”。我应该如何更改 for 循环中的选择器以`<li>`仅点击元素而不是 jQuery 对象中的其他键？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T17:42:39.043

尝试：

```
$('#assessment_list li').each(function() {
   console.log( $(this).data() );
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-03T17:44:37.260

您可以使用以下命令获取所有数据值的数组`map`：

```
var values = $('#assessment_list li').map(function() {
    return $(this).data();
}).get();

console.log(values); 
```

# java - 返新的目的？

> ID：15794291
> 
> 赞同：0
> 
> 时间：2013-04-03T17:41:13.103
> 
> 标签：java, return

```
public Double squareRoot(Double d)
{
return new Double (Math.sqrt(d.doubleValue()));
} 
```

“返新”的目的是什么？如果“新”被删除，它仍然有效吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-03T17:42:03.043

是的，实际上您可以删除更多代码：

```
public Double squareRoot(Double d)
{
    return Math.sqrt(d);
} 
```

即使`Math.sqrt`返回 a`double`而不是 a `Double`。这是通过称为[Autoboxing](http://docs.oracle.com/javase/1.5.0/docs/guide/language/autoboxing.html)的 java 功能完成的。

但正如@assylias 指出的那样，您问是否可以删除`new`关键字。答案是否定的。这不会编译：

```
public Double squareRoot(Double d)
{
    return Double (Math.sqrt(d.doubleValue()));
} 
```

错误是“预期方法调用”。您不能将类的构造函数作为方法调用。您只能通过`new`在其前面放置关键字来调用构造函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T17:50:16.013

您没有使用名为“return new”的东西，而是使用以下代码：

```
return new Double (Math.sqrt(d.doubleValue())); 
```

实际上确实

1.  `new Double (Math.sqrt(d.doubleValue()))` （创建一个新的 Double 对象，其值为`Math.sqrt(d.doubleValue())`
2.  `return`步骤 1 的值

Java 还有一个称为[自动装箱](http://docs.oracle.com/javase/tutorial/java/data/autoboxing.html)的概念，它允许在类型对象和类型`Double`值之间进行自动转换`double`。因此，您不需要使用显式创建对象，`new Double(...)`因为`Math.sqrt(...)`返回的值是`double`. Java 会自动为您完成这项工作。同样适用于参数`d`：您不需要调用`doubleValue()`它。

因此，您可以将代码更改为：

```
public Double squareRoot(Double d) {
   return Math.sqrt(d);
} 
```

或者更好的是使用原语`double`作为类型的对象在`Double`这里并不是真正必要的：

```
public double squareRoot(double d) {
   return Math.sqrt(d);
} 
```

或者更好（正如*forivall*在对另一个答案的评论中指出的那样）不要打扰这种方法而直接调用`Math.sqrt(...)`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T17:49:37.223

这`new Double (Math.sqrt(d.doubleValue()));`涉及将原始类型`double`转换为其包装类`Double`，反之亦然。但这是不必要的。相反，您可以这样做`return Math.sqrt(d)`，这是自动装箱和拆箱的一个示例。

“自动装箱是 Java 编译器在原始类型与其对应的对象包装类之间进行的自动转换。例如，将 int 转换为 Integer，将 double 转换为 Double，等等。如果转换相反，这叫做拆箱。”

> [http://docs.oracle.com/javase/tutorial/java/data/autoboxing.html](http://docs.oracle.com/javase/tutorial/java/data/autoboxing.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T17:47:03.837

是的，它仍然可以工作（前提是您还删除了 周围的括号`Math.sqrt(d)`）——只要您使用的是 Java 5 或更新版本。该功能称为自动装箱/自动拆箱，这意味着 JVM 将自动将原语包装在其相应的包装器类型中。

然而，写作的缺点`return new Double(Math.sqrt(d))`是效率略低。如果您使用`return Double.valueOf(Math.sqrt(d))`（或者只是`return Math.sqrt(d);`第一个选项将创建一个新`Double`对象，而后两个选项将尝试重新使用较早创建的`Double`实例。

有关详细信息，请参阅[`Double.valueOf()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Double.html#valueOf%28double%29)Javadoc。

# javascript - 响应表不显示列值

> ID：15794293
> 
> 赞同：0
> 
> 时间：2013-04-03T17:41:20.690
> 
> 标签：javascript, jquery, html, css, jquery-ui

当您缩小浏览器窗口时，您会在 iphone 屏幕布局中看到不同的表格布局.....

当列有值时，我的响应表代码工作正常....但是当我的响应表没有列时，它**不显示相应的列....**

在下面提供我的代码

[http://jsfiddle.net/68yA3/](http://jsfiddle.net/68yA3/)

```
table { 
        width: 100%; 
        border-collapse: collapse; 
    }
    /* Zebra striping */
    tr:nth-of-type(odd) { 
        background: #eee; 
    }
    th { 
        background: #1a4567; 
        color: white; 
        font-weight: bold; 
    }
    td, th { 
        padding: 6px; 
        border: 1px solid #ccc; 
        text-align: left; 
    }

    /* 
    Max width before this PARTICULAR table gets nasty
    This query will take effect for any screen smaller than 760px
    and also iPads specifically.
    */
    @media 
    only screen and (max-width: 760px),
    (min-device-width: 768px) and (max-device-width: 1024px)  {

        /* Force table to not be like tables anymore */
        table, thead, tbody, th, td, tr { 
            display: block; 
        }

        /* Hide table headers (but not display: none;, for accessibility) */
        thead tr { 
            position: absolute;
            top: -9999px;
            left: -9999px;
        }

        tr { border: 1px solid #ccc; }

        td { 
            /* Behave  like a "row" */
            border: none;
            border-bottom: 1px solid #eee; 
            position: relative;
            padding-left: 50%; 
        }

        td:before { 
            /* Now like a table header */
            position: static;
            /* Top/left values mimic padding */
            top: 6px;
            left: 6px;
            width: 45%; 
            padding-right: 10px; 
            white-space: nowrap;
        }

        /*
        Label the data
        */
        td:nth-of-type(1):before { content: "MFG P/N"; }
        td:nth-of-type(2):before { content: "MFG Name"; }
        td:nth-of-type(3):before { content: "Part ID"; }
        td:nth-of-type(4):before { content: "Description"; }
        td:nth-of-type(5):before { content: "Cost"; }
        td:nth-of-type(6):before { content: "Price"; }
        td:nth-of-type(7):before { content: "On Hand"; }
        td:nth-of-type(8):before { content: "On Order"; }
        td:nth-of-type(9):before { content: "Allocated"; }
        td:nth-of-type(10):before { content: "Shipped"; }
        td:nth-of-type(11):before { content: "Report"; }
        td:nth-of-type(12):before { content: "RMA"; }
        td:nth-of-type(10):before { content: "File"; }
        td:nth-of-type(10):before { content: "Add Part"; }
    }

    /* Smartphones (portrait and landscape) ----------- */
    @media only screen
    and (min-device-width : 320px)
    and (max-device-width : 480px) {
        body { 
            padding: 0; 
            margin: 0; 
            width: 320px; }
        }

    /* iPads (portrait and landscape) ----------- */
    @media only screen and (min-device-width: 768px) and (max-device-width: 1024px) {
        body { 
            width: 495px; 
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T17:49:26.730

这是 HTML 表格中许多奇怪的夸克之一。当您没有内容可放入单元格时，只需将内容设置为`&nbsp;`.

# c++ - 将二分查找修改为查找然后删除

> ID：15794296
> 
> 赞同：0
> 
> 时间：2013-04-03T17:41:26.470
> 
> 标签：c++, binary-search-tree

我对编程很陌生，我正在使用 C++ 语言。这是我的作业，并且正在使用二叉搜索树。我要做的是创建一个名为 find_node 的函数，然后它会调用一个名为 delete_node 的函数。这是老师给出的 find_node 函数的提示。

教授提示：

向类Node添加`void find_node( const T &val )` 方法，查找包含val的节点；如果没有找到，如果找到了，则无事可做，并且 p 是指向它的 Node *，通过调用删除 p `delete_node( Node< T > *&p )`。

`void delete_node( Node< T > *&p )` 从二叉树中删除节点p的方法

教授提供的文件

`btree.h`

```
#include    <iostream>
#include    "node.h"
//using namespace std;

template < typename elemType >
class BinaryTree {
  public:
BinaryTree( );
~BinaryTree( );
void insert( const elemType & );
void remove( const elemType & );
void inorder( );
bool empty( );
void clear( );

private:
Node< elemType >    *_root;

BinaryTree( const BinaryTree & );
BinaryTree &operator =( const BinaryTree & );
void clear( Node< elemType > * );
};

template < typename elemType >
inline BinaryTree< elemType >::BinaryTree( ) : _root(0)
{
    cout << "BinaryTree::BinaryTree() "
       << "default constructor\n";
}

template < typename elemType >
inline BinaryTree< elemType >::~BinaryTree( )
{
   cout << "BinaryTree::~BinaryTree() destructor\n";
   clear( );
}

template < typename elemType >
inline void BinaryTree< elemType >::clear( )
{
   if( _root )
   {
      clear( _root );
      _root = 0;
   }
}

template < typename elemType >
inline void BinaryTree< elemType >::clear( Node< elemType > *pt )
{
   if( pt ) {
      cout << "clear( ) left of  "  << pt->value( ) << '\n';
      clear( pt->left( ) );
      cout << "clear( ) right of " << pt->value( ) << '\n';
      clear( pt->right( ) );
      delete pt;
    }
}

template < typename elemType >
inline void BinaryTree< elemType >::insert( const elemType &e )
{
   if( !_root )
   {
      _root = new Node< elemType >( e );
   }
   else
   {
      _root->insert_value( e );
   }
}

template < typename elemType >
inline void BinaryTree< elemType >::remove( const elemType &e )
{
  _root->find_node( _root, e );
}

template < typename elemType>
inline void BinaryTree< elemType >::inorder( )
{
   _root->inorder( _root );
   cout << '\n';
} 
```

由教授给出，但是我必须从提示中添加 2 种方法的文件

`node.h`

```
#ifndef     NODE_H

#define     NODE_H

#include    <string>

using namespace std;

template< typename T >
class Node
{
  public:
      Node( const T &);

      T  value( )  const;
      T  value( const T & );

      void insert_value( const T & );
      void inorder( const Node * );
      void find_node( const T &val, const T* root );
    //bool find_node( const T &val, Node < T > *node) const;
      void delete_node( Node< T > *&p );

      Node *  left ( ) const;
      Node *  left ( Node * );
      Node *  right( ) const;
      Node *  right( Node * );

   private:
      T       _value;
      Node *  _left;
      Node *  _right;
      Node< T > * root; //point to root node
      Node::Node( const Node & );
      Node &operator =( const Node & );

};

template< typename T >
inline Node< T >::Node( const T &rhs )
{
   _value = rhs;                       // assign rhs to _value
   _left  =  _right = 0;               // node is not part of a tree yet
}

template< typename T >
inline T Node< T >::value( ) const
{
   return _value;
}

template< typename T >
inline T Node< T >::value( const T &rhs )
{
   _value = rhs;                       // new value for _value
   return _value;
}

template< typename T >
inline Node< T > *Node< T >::left( ) const
{
   return _left;
}

template< typename T >
inline Node< T > *Node< T >::left( Node< T > *rhs )
{
   _left = rhs;

   return _left;
}

template< typename T >
inline Node< T > *Node< T >::right( ) const
{
   return _right;
}

template< typename T >
inline Node< T > *Node< T >::right( Node< T > *rhs )
{
   _right = rhs;
   return _right;
}

template< typename T >
inline void Node< T >::insert_value( const T &val )
{
    if( val == _value )
{
    return;                     // value already in the tree
}
if( val < _value )              // val should appear at the left
{
    if( ! _left )               // no left subtree ?
    {                           // add new node here
        _left = new Node( val );
    }
    else                        // try the subtree
    {
        _left->insert_value( val );
    }
}
else                            // val should appear at the right
{
    if( ! _right )              // no right subtree ?
    {                           // add new node here
        _right = new Node( val );
    }
    else                        // try the subtree
    {
        _right->insert_value( val );
    }
  }
}

template< typename T >
inline void Node< T >::inorder( const Node< T > *pt )
{
   if( pt )
   {
      inorder( pt->_left );
      cout << std::hex << pt->_left << std::dec << '\t';
      cout << std::hex << pt << std::dec << '\t';
      cout << std::hex << pt->_right << std::dec << '\t';
      cout << pt->_value << '\n';
      inorder( pt->_right );
   }
}

template <typename T>
Node<T> const * find_node(const T &val)
{
   Node<T> const * curr = root;
   while( curr != 0 )
   {
      if (val == curr -> _value)  {
       break;
    }
    else if (val < curr -> _value) {
        curr = curr -> _left;
    |
    else {
        curr = curr -> _right;
    }
}
return curr;
}
}

template <typename T >
inline void find_node( const T & val, const T * root ) {
Node<T> const * ptrFoundNode = find_node_pointer( val, root );
if( ptrFoundNode ) {
    delete_node( ptrFoundNode, root );
  }
}

template< typename T >
inline void Node< T >::delete_node(Node < T > *&p)
{

Node<T> *curr, *prev, *temp;
   if (p == NULL) return;
   if (p->_left == NULL && p->_right == NULL) {
    // no children - easy
    // *** if allowing counted duplicates:
    // ***    if (p->getCount() > 1) (*p)--;
    // ***    else {
       temp = p;
       p = NULL;
       delete temp;
    }
 else if (p->_left == NULL) {
    // only a right child - still easy
    // *** if allowing counted duplicates:
    // ***    if (p->getCount() > 1) (*p)--;
    // ***    else {
       temp = p;
       p = temp->_right;
       delete temp;
    }
 else if (p->_right == NULL) {
    // only a left child - still easy
    // *** if allowing counted duplicates:
    // ***    if (p->getCount() > 1) (*p)--;
    // ***    else {
       temp = p;
       p = temp->_left;
       delete temp;
    }
 else {
    // two children - this is the hard case
    // use successor: once right, then as far left as possible
    // *** if allowing counted duplicates:
    // ***    if (p->getCount() > 1) (*p)--;
    // ***    else {
       curr = p->_right;
       prev = NULL;
       while (curr->_left != NULL) {
           prev = curr;
           curr = curr->left;
       }
       p->data = curr->data;
       if (prev == NULL) p->_right = curr->_right;
       else prev->_left = curr->_right;

       delete curr;
   }
}

#endif 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T17:50:16.753

以下是对 OP 代码进行最小更改的草图：

```
Node<T> const * find_node_pointer( Node<T> const * root, T const & val)
{
    Node<T> const * curr = root;
    while( curr != 0 )
    {
        if (val == curr -> _value)  {
           break;
        }
        else if (val < curr -> _value) {
            curr = curr -> _left;
        |
        else {
            curr = curr -> _right;
        }
    }
    return curr;
} 
```

呼叫者：

```
void find_node( Node<T> const * root, T const & val ) {
    Node<T> const * ptrFoundNode = find_node_pointer( root, val );
    if( ptrFoundNode ) {
        delete_node( root, ptrFoundNode );
    }
} 
```

# java - 如何通过蓝牙分享我的 edittext 值？

> ID：15794297
> 
> 赞同：1
> 
> 时间：2013-04-03T17:41:27.380
> 
> 标签：java, android, android-service

我的应用程序中有一个 Edittext，我想通过蓝牙将 EditText 值共享到 .txt 文件中的其他手机我正在制作笔记应用程序我想将此功能放在我的应用程序中以通过蓝牙发送我的笔记，以便您的朋友可以帮助我在这我一无所知我该怎么做所以你们中的任何人都可以给出任何想法或示例或教程我该怎么做我对此很困惑所以请帮助我我将如何做到这一点。这对我来说很重要.我正在分享我的笔记邮件 n 短信 bt 不知道该怎么做才能与蓝牙分享这个

帮我。

谢谢

# android - Android 测试 跨多个应用程序的数据传播

> ID：15794300
> 
> 赞同：0
> 
> 时间：2013-04-03T17:41:34.497
> 
> 标签：android, android-testing

我有跨多个应用程序共享的数据。数据可以从我们的任何应用程序中推送。

我正在尝试查看是否有一种工具可以在多个应用程序中执行操作，然后在一段时间后检查数据库文件中的数据，并在应用程序崩溃后恢复。

有没有人有这方面的运气？我正在考虑的一种方法是通过换出文件并运行来修改 Robotium 配置，但这似乎很棘手。

# math - 两条线，随机点和向量。如何找到哪条线位于另一条线的后面

> ID：15794303
> 
> 赞同：0
> 
> 时间：2013-04-03T17:41:57.890
> 
> 标签：math, vector, line

我正在开发一款游戏，玩家必须在黑暗的走廊中行走。角色有一个手电筒，相机位于上方（如 GTA2 中）。我对着色算法有疑问。

![在此处输入图像描述](https://i.stack.imgur.com/TxBpP.jpg)

所以我们有一个光源（黄色圆圈），一堆墙壁（绿色和蓝色线）和光矢量（红色箭头）。
我们所知道的：
- 光源和线路之间的距离；
- 线的长度；
- 光矢量坐标；
- 线不相互交叉；
- 线端点的角度；

问题：
如何让程序看到哪一行位于其他行的前面？例如，在图像中，我们可以看到绿线在蓝线的前面。

我们可以找到向量和两条线的交叉点，然后找到光源和交叉点之间的长度并比较它们以找到最近的线，但这会减慢程序的速度。此外，可能会出现蓝线将更靠近光源的情况（如果我们将光源稍微向上移动），但程序仍然必须看到蓝墙位于绿线后面。
也许我们可以以某种方式为每一行标记一些价值？

**编辑：**我还尝试使用公式为每条线创建一个值：a/alpha + b/beta
其中：
a - 光源与直线的第一个端点之间的距离
alpha - 直线的第一个端点的角度
b - 之间的距离光源和线
的第二个端点 beta - 线的第二个端点的
角度 必须反转其中一个角度。

但是为了使这个公式起作用，似乎必须有一些常数，例如：
a *const/alpha + b* const/beta
也许通过找到这个常数我可以给每一行一个值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T19:38:50.560

The statement

> The blue line is behind the green line.

is equivalent to the statement

> There is a ray from the light source that passes through the green line and then the blue line.

(Note that this is a mathematical ray, not a light ray-- it passes through blue and green obstacles.)

This is equivalent to

> There is a ray from the light source that intersects both lines, and the green intersection is closer to the light source than the blue one is.

Searching for such a ray looks difficult at first, -- there are infinitely many to test -- but I argue that if such a ray exists, then there must be such a ray that passes through one of the line endpoints. Now there are only four to test.

# regex - 跳过第一行标题并在第二个匹配

> ID：15794309
> 
> 赞同：0
> 
> 时间：2013-04-03T17:42:14.193
> 
> 标签：regex

以下正则表达式需要获取下面输出的第二行，但它与第一​​行匹配。如何跳过`error code|error text|submission reference`并匹配 `0|sms submitted|eb725f96b4b094d5f8318741cc1a545f-2`

表达

```
(?P<status_code>[0-9]+)|(?P<status_message>.+)|(?P<gateway_message_id>[a-zA-Z0-9-]+) 
```

文本

```
error code|error text|submission reference
0|sms submitted|eb725f96b4b094d5f8318741cc1a545f-2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T17:58:17.170

您必须转义`|`符号，因为它们在正则表达式中具有特殊含义。使用这样的表达式，您的第一行将不匹配：

```
(?P<status_code>[0-9]+)\|(?P<status_message>.+)\|(?P<gateway_message_id>[a-zA-Z0-9-]+) 
```

在不转义您正在搜索的符号的情况下`[0-9]+` *or* `.+` *或* `[a-zA-Z0-9-]+`。然后显然`.+`匹配整个字符串。有关您的更多信息`|`，请参阅[本教程](http://www.regular-expressions.info/alternation.html)。

# jquery - 带有动态添加到表单的字段的 jQuery 验证

> ID：15794310
> 
> 赞同：5
> 
> 时间：2013-04-03T17:42:19.157
> 
> 标签：jquery, jquery-validate

我有以下表格：

```
<form class="form-validation">
  <input name="product[0][name]" id="form_product[0][name]" data-rule-required="true">
</form> 
```

使用 jQuery 验证插件进行验证。我这样称呼它：

```
$(".form-validation").validate(); 
```

验证按预期工作。然后我有一个按钮，可以动态地将字段添加到表单中，基本上它创建了这个：

```
<form class="form-validation">
  <input name="product[0][name]" id="form_product[0][name]" data-rule-required="true">
  <input name="product[1][name]" id="form_product[1][name]" data-rule-required="true">
  <input name="product[2][name]" id="form_product[2][name]" data-rule-required="true">
  ...
</form> 
```

现在，在此验证之后不再表现正常。它仍然可以验证表单，但我得到了奇怪的结果。有时，来自字段 3 的 onsubmit 值被移动到字段 2，并且规则也在字段之间传递......

我想我需要告诉验证器已经添加了新字段，但我不知道怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T01:55:54.177

要将规则应用于动态创建的字段，您将在创建新输入字段*后*立即调用该[`rules('add')`方法。](http://docs.jquery.com/Plugins/Validation/rules#.22add.22rules)由于您没有显示任何添加新字段的代码，因此我无法向您展示该技术的确切演示。

 ***但是，由于您的规则已经是 HTML 属性的一部分，因此下面的演示表明您的代码应该已经可以正常工作：**

**[http://jsfiddle.net/WVbmj/](http://jsfiddle.net/WVbmj/)**

* * *

引用操作：

> 它仍然可以验证表单，但我得到了奇怪的结果。有时，来自字段 3 的 onsubmit 值被移动到字段 2，并且规则也在字段之间传递。

这可能是因为您的第二个和第三个元素 上有重复`id`的 , 。's 必须是唯一的，否则你会得到这样奇怪的结果。像我在上面的演示中那样解决这个问题。`id="form_product[1][name]"``input``id`

同样，当这个问题得到解决 时，**它就可以工作了：http:** **[//jsfiddle.net/WVbmj/](http://jsfiddle.net/WVbmj/)**`id`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-16T08:18:44.137

为了验证动态字段，我们需要将类添加到动态控件并将规则附加到它

我们需要为每个附加操作重复这个..

```
<input id="Name" name="Name" type="text" class="netEmp form-control"> 
```

有关更多信息，请单击此处[http://www.dotnetqueries.com/Article/136/jquery-validate-dynamically-added-fields](http://www.dotnetqueries.com/Article/136/jquery-validate-dynamically-added-fields)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-07T11:01:21.417

您应该为所有字段设置相同的类名。

例如：

```
<input class="form-control amount validate_form" name="amount[]" type="text">
<p class="validateError" style="color:red;display:none;">please enter amount.</p>
<button type="submit" id="fees_stream_submit" class="btn btn-primary">Submit</a>

<script type="text/javascript">
            $(document).on('click', '#fees_stream_submit', function(e){
              e.preventDefault();
                $(".validate_form").each(function() {
                    var selectedTr = $(this);
                    i =0;
                    var value = $(this).val();
                    if (!value) {
                        selectedTr.next("p").show();
                        i++;
                    } else {
                        selectedTr.next("p").hide();
                    }
                });

                if (i == 0) {
                    $('#fees_stream_form').submit();
                }
            });
        </script> 
```*

# mysql - 如果满足某个条件，则更新密钥副本上的特定字段

> ID：15794317
> 
> 赞同：0
> 
> 时间：2013-04-03T17:42:48.410
> 
> 标签：mysql, sql, sql-update, import-from-csv, on-duplicate-key

我有一个表格，我从 CSV 文件上传数据。

字段如下所示：

```
StudentName | SubjectName| Result
---------------------------------
Adam        | Math       | Fail
Bob         | History    | Pass
Catherine   | Math       | Pass
Dave        | Science    | Fail
Evan        | History    | Pass 
```

> 这里的主键是 (StudentName,SubjectName)

我使用以下代码将数据放入表中：

```
Load data local infile 'C:\\Test.csv' INTO TABLE test_table
Fields terminated by ','
OPTIONALLY ENCLOSED BY '"'
ESCAPED BY '"'
Lines terminated by '\n'
ignore 1 lines; 
```

我需要导入多个 csv 文件。可能存在密钥重复。遇到重复时，我正在尝试更新某个字段。

即：如果有重复，则 `UPDATE field RESULT if : value for result in the duplicate entry is "Pass".` 每个 csv 文件将针对进行测试的每一天。如果学生至少通过一次，表格应该反映这一点。

我应该如何更改我的代码以实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T17:47:43.287

加载脚本本身不能帮助您一起进行表插入和更新。您可以先将 CSV 文件加载到临时表中，然后使用脚本对最终表执行“Upsert”，然后截断临时表，或者每次创建和删除临时表。[添加链接供您参考](http://www.xaprb.com/blog/2006/02/21/flexible-insert-and-update-in-mysql/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T17:51:11.757

我会先将每个新文件加载到一个临时表中。这在插入真实表时提供了更多选项。类似于以下内容：

1.  [加载数据文件 ... INTO TABLEtemporary_test_table](https://dev.mysql.com/doc/refman/5.5/en/load-data.html)
2.  [INSERT INTO test_table SELECT * FROM temporary_test_table ON DUPLICATE KEY ...](http://dev.mysql.com/doc/refman/5.5/en/insert-select.html)
3.  [截断临时测试表](http://dev.mysql.com/doc/refman/5.5/en/truncate-table.html)

# java - 列表项内的 Jsoup 嵌套值

> ID：15794328
> 
> 赞同：0
> 
> 时间：2013-04-03T17:43:30.367
> 
> 标签：java, jsoup

我有一个试图从中挖掘`Logname`价值的 HTML 页面。我可以将所有`li`文本作为一个字符串组合在一起，但不是我想要的。我只想要`li`.logname 之后的第二部分`</span>`。有什么方法可以轻松搞定？有了我所拥有的，我可以进行拆分并得到我想要的，但似乎应该有一种更优雅的方式？

当前代码

```
Elements detail = mHtml.select ("div.alpha-first");

        for (Element items : detail)
        {
            Log.d (TAG, " label text " + items.text());

            detail.

            if (items.text().equals ("ACID"))
            {
                Log.d (TAG, " got ACID ");
            }

        } 
```

HTML

```
<html>
<title>emp id chart</title>
<body>
<div class="alpha-first">
      <ul class="account-detail">
         <li><span class="label">ID</span>42</li>
         <li><span class="label">Logname</span>George</li>
         <li><span class="label">Surname</span>Glass</li>
         <li><span class="label">ACID</span>15</li>
         <li><span class="label">Dept</span>101348</li>
         <li><span class="label">Empclass</span>Echo</li>
      </ul>
      <p class="last-swipe">3 Apr 9:53</p><br>  </div>
   <div class="detail-last-loc">
      <p style="font-size: 8pt;">Current status</p>
      <p class="current-location">Bldg #23 South Lot</p>
      <p> current time 10:43 <br /></p>
      <div class="detail-extra">
         <p><a href="/empswipe/history/151034842">More</a> | <a href="/empswipe/history/151034842/3">3 Day History</a></p>
      </div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T18:12:55.867

据我了解，以您的示例为例，您将希望从： 获得`<li><span class="label">Logname</span>George</li>`值：`George`。

真的不需要迭代，直接搞定。我不会把这段代码称为优雅，但仍然是：

```
 //Select the <span> element the text "Logname"
    Elements select = mHtml.select(".account-detail span.label:contains(Logname)");

    //Get the element itself, since the select returns a list
    Element lognameSpan = select.get(0);

    //Get the <li> parent of the <span>
    Element parent = lognameSpan.parent();

    //Access the text node of the <li> directly since there is only one
    String logname = parent.textNodes().get(0).text(); 
```

希望能帮助到你。

# jquery - 瀑布式 AJAX 乘法请求（例如在 wolframalafa 中）

> ID：15794330
> 
> 赞同：0
> 
> 时间：2013-04-03T17:43:39.197
> 
> 标签：jquery, ajax

我有这个问题 - 我想做多个 AJAX 请求，但我需要在第一个成功完成时发送第二个请求。

我尝试使用**jQuery** Defered对象、**jQuery.when()**和**jQuery.then()**方法，但是...(((

最后我使用了这个插件 - [https://github.com/dio-el-claire/jquery.waterfall](https://github.com/dio-el-claire/jquery.waterfall)。但我不能那样做。因为，据我了解，使用此插件时，所有返回的数据都同时输出。

比如在[http://www.wolframalpha.com](http://www.wolframalpha.com)。

感谢提前！

*对不起，我的英语不好）*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T17:55:09.533

使用 ajax 调用的成功部分。您可以在那里放置一个函数来处理返回的数据。您还可以处理错误。

我这样做是伪咖啡脚本，但希望它会有意义。

```
jQuery(() ->
  window.App = {};
  window.App.behaviors = [];
  window.App.behaviors.push(ComposableBehavior.new());
)

class ComposableBehavior(() ->
  getData: ((url,successFunction, errorFunction) ->
    $.ajax(
      url:url,
      type:'GET',
      data: {this: "that"},
      success: (data) =>
        successFunction(data)
      error: (errorData) =>
        errorFunction
      )
    )
  )
  initialParse: ((data) ->
    thePlayer = JSON.parse(data)
    //updatePlayerUi(thePlayer)
    @getScores(thePlayer)
  )
  getScores: ((thePlayer) =>
    getData('player/'+thePlayer.id+/'scores', @displayScores, @uhOh)
  )

  displayScores: (data) =>
    //updateScoreUi(data)

  uhOh: (errorData) =>
   // displayError(errorData)
) 
```

希望有帮助。

# php - 将 JSON 数组从 PHP 传递到 JQuery 不起作用

> ID：15794334
> 
> 赞同：0
> 
> 时间：2013-04-03T17:43:51.947
> 
> 标签：php, javascript, jquery

我无法访问从 PHP 脚本获取 JSON 数据的 jquery 数组。如果我在 jquery 中对数组进行硬编码，它就可以正常工作。我使用 cosole.log 进行了检查。nproducts 和 products 数组都给出相同的值。请注意，nproduct 具有硬编码值，其中产品是从 PHP 脚本中获取的。有人可以把我放在正确的方向。谢谢

这是PHP代码

```
while ($row = oci_fetch_array($result,OCI_ASSOC)) {
    $shop[$row['WH_DESCRIPTION']] = array( 
        'pic' => $row['WH_PIC'],
        'price' => $row['WH_PRICE']
      );
} 

echo json_encode($shop); 
```

这是jQuery。如果我使用 nproduct 那么 productsRendering 函数可以正常工作，但如果我使用 product 那么它会打印 containsValue 的名称和图片，以及 undefined 的价格。似乎产品数组在 productRendering 函数中没有任何值，因为 getJSON 正在返回值。

```
<script type="text/javascript">
    var cart = (function ($) {

        var productsOffset = 3, products = [], 
            nproducts = {
                'Black T-shirt': {
                    pic: 'black-controller.png',
                    price: 15
                },
                'Green T-shirt': {
                    pic: 'green-kentucky.png',
                    price: 18
                },
                'Brown T-shirt': {
                    pic: 'brown-computer.png',
                    price: 25
                }

            };

         $.getJSON('shop.php', function(data) {
              products = data;
              console.log(data);       //showing values here
              console.log(products);   //showing values here
              console.log(nproducts);  //showing values here
          });

        function render() {
            productsRendering();
        };

        function productsRendering() {
            var catalog = $('#catalog'),
                imageContainer = $('</div>'),
                image, product, left = 0, top = 0, counter = 0;
                console.log(products);   //does not have values here
            for (var name in products) {
                product = products[name];
                image = createProduct(name, product);
                image.appendTo(catalog);
                if (counter !== 0 && counter % 3 === 0) {
                    top += 147; // image.outerHeight() + productsOffset;
                    left = 0;
                }
                image.css({
                    left: left,
                    top: top
                });
                left += 127; // image.outerWidth() + productsOffset;
                counter += 1;
            }
            $('.draggable-demo-product').jqxDragDrop({ dropTarget: $('#cart'), revert: true });
        };

        function createProduct(name, product) {
            return $('<div class="draggable-demo-product jqx-rc-all">' +
                    '<div class="jqx-rc-t draggable-demo-product-header jqx-widget-header-' + theme + ' jqx-fill-state-normal-' + theme + '">' +
                    '<div class="draggable-demo-product-header-label"> ' + name + '</div></div>' +
                    '<div class="jqx-fill-state-normal-' + theme + ' draggable-demo-product-price">Price: <strong>$' + product.price + '</strong></div>' +
                    '<img src="images/t-shirts/' + product.pic + '" alt='
                    + name + '" class="jqx-rc-b" />' +
                    '</div>');
        };

        function init() {
            render();
        };

        return {
            init: init
        }
    } ($));

    $(document).ready(function () {
        cart.init();
    });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T17:48:54.860

`productsRendering()`在 ajax 请求完成之前被调用。考虑`productsRendering()`在 ajax 回调中调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T17:48:23.513

这是因为浏览器不会将响应正文解释为 JSON。在回显响应之前尝试在 php 中设置 Content-Type 标头：

```
header('Content-Type', 'application/json'); 
```

# javascript - 需要一个简单的 javascript 函数的帮助

> ID：15794338
> 
> 赞同：-1
> 
> 时间：2013-04-03T17:44:18.433
> 
> 标签：javascript, jquery, css, rotation

这是我在为我的需求寻找解决方案但没有结果之后的第一篇文章我不擅长 javascript 和 jquery，我知道我的答案就在那里:)

这是代码 [http://jsfiddle.net/6ncQR/51/](http://jsfiddle.net/6ncQR/51/)

我需要的是一个简单的功能，可以在将`div`鼠标悬停在`li`菜单中的元素上时以不同的角度旋转“box3”。

例如，悬停第一个`li`孩子`div`将“box3”旋转 45 度，第二个`li`孩子将“box3”旋转 90 度，依此类推。

使用纯 css 只有当元素具有相同的父级时它才有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T18:03:43.757

我在这里做一个例子。

[http://jsbin.com/ayakol/1/edit](http://jsbin.com/ayakol/1/edit)

我所做的是用正确的名称类调用函数旋转。

```
function rotate(degrees){
    var t = document.getElementById("box2");
    t.className = degrees;

} 
```

在 HTML 中

```
<li onmouseover="rotate('box60');"><a href="#">sub2</a></li> 
```

# c - 使用 pthreads 在 C 中并发读取器和相互排除的写入器

> ID：15794339
> 
> 赞同：1
> 
> 时间：2013-04-03T17:44:20.337
> 
> 标签：c, pthreads

我希望有人可以转发或向我展示一个程序，该程序具有多个读者但相互排斥 C 中的作者。我在整个互联网上搜索了它，但找不到使用粗粒度锁定显示此行为的单个示例。我知道我可以使用 pthread_rwlock_init、pthread_rwlock_rdlock 等，我只是不知道如何使用它。我通过例子学习，这就是我在这里的原因。

假设我有一个代码区域（不是共享变量）并且我想要多次读取，但只有一个写入器，这就是我不知道如何使用 pthreads rwlocks 来完成的。我不明白代码如何知道现在它正在被写入，而现在它正在被读取。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T17:57:32.943

您可以查看 Peter Chapin 的[Pthread 教程](http://web.vtc.edu/users/pcc09070/pthread/pthread-Tutorial.pdf)的第 24 页作为示例。我在下面添加了它。

```
#include<pthread.h>
int shared;
pthread_rwlock_t lock ;
void∗ thread_function (void∗ arg)
{
  pthread_rwlock_rdlock (&lock);
  //Read from the shared resource.
  pthread_rwlock_unlock(&lock);
}
void main( void )
{
  pthread_rwlock_init(&lock, NULL);
  // Start threads here.
  pthread_rwlock_wrlock(& lock );
  // Write to the shared resource .
  pthread_rwlock_unlock(&lock);
  // Join_with threads here .
  pthread_rwlock_destroy(&lock);
  return 0 ;
} 
```

# android - Android：2 个片段共享相同的 ViewPager XML 布局

> ID：15794347
> 
> 赞同：3
> 
> 时间：2013-04-03T17:44:31.117
> 
> 标签：android, android-fragments, android-viewpager, android-xml

我有一个布局，其中包含 2 个彼此相邻的片段。在每个片段中，我都有一个 ViewPager。由于我需要两个 Fragment 看起来相同，因此我对两者使用相同的布局 XML，其中包含一个 ViewPager。

现在，当我测试应用程序时，似乎只有第一个 Fragment 的 ViewPager 可以工作。第二个 Fragment 显示一个 PagerTitleStrip，我可以翻阅它，但它没有显示 ViewPager 中的 Fragments。

为什么第二个 ViewPager 也不显示片段？这是什么原因造成的？问题是他们使用相同的布局吗？无论如何，它不是一个不同的对象吗？

Activity 中的 2 个 Fragment 共享的布局如下所示：

```
<android.support.v4.view.ViewPager xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/pager"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <android.support.v4.view.PagerTitleStrip
        android:id="@+id/search_mapping_pager_title_strip"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="top"
        android:background="#33b5e5"
        android:paddingBottom="4dp"
        android:paddingTop="4dp"
        android:textColor="#fff" />

</android.support.v4.view.ViewPager> 
```

两个 Fragment 都以相同的方式实例化 ViewPager：

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    View view = inflater.inflate(R.layout.fragment_search_mapping,
            container, false);

    mSectionsPagerAdapter = new SectionsPagerAdapter(mActivity
            .getSupportFragmentManager());
    mViewPager = (ViewPager) view.findViewById(R.id.pager);
    mViewPager.setAdapter(mSectionsPagerAdapter);

    return view;
} 
```

**编辑：**更多代码显示我的`SectionsPagerAdapter`：

```
public class SectionsPagerAdapter extends FragmentPagerAdapter {

    public SectionsPagerAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public Fragment getItem(int position) {
        Fragment fragment = new SuperclassFragment();
        Bundle args = new Bundle();
        args.putInt(SuperclassFragment.ARG_SECTION_NUMBER, position + 1);
        fragment.setArguments(args);
        return fragment;
    }

    ...

} 
```

我应该在哪里寻找错误原因的任何提示？如有必要，我当然可以在此处包含更多代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T19:08:11.177

我自己解决了这个问题，没有将 ViewPagers 放入 Fragments，而是将它们直接放入 Activity 的布局中。

Activity 的 XML 布局如下所示：

```
...
<LinearLayout 
    android:id="@+id/search_fragment_layout"
    android:layout_width="match_parent"
    android:layout_height="0dp"
    android:layout_weight="1"
    android:orientation="horizontal">

    <android.support.v4.view.ViewPager
        android:id="@+id/objectPager"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="0.5"
        android:layout_margin="16dp" >
        <android.support.v4.view.PagerTitleStrip
            android:id="@+id/object_pager_title_strip"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="top"
            android:background="#33b5e5"
            android:paddingBottom="4dp"
            android:paddingTop="4dp"
            android:textColor="#fff" />
    </android.support.v4.view.ViewPager>

    <android.support.v4.view.ViewPager
        android:id="@+id/actionPager"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="0.5"
        android:layout_margin="16dp" >
        <android.support.v4.view.PagerTitleStrip
            android:id="@+id/action_pager_title_strip"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="top"
            android:background="#33b5e5"
            android:paddingBottom="4dp"
            android:paddingTop="4dp"
            android:textColor="#fff" />
    </android.support.v4.view.ViewPager>

</LinearLayout>
... 
```

在 Activity 本身中使用它实际上会创建 2 个不同的 ViewPager 对象，并且都按预期显示它们的 Fragment。

我仍然不确定是什么导致了这个错误。如果有人提出了一个很好的解释，我愿意接受它作为答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-08T02:32:02.423

FragmentPagerAdapter 依赖于 ViewPager id/Page Item id 的组合来检查页面项是否需要实例化（请参阅 FragmentPagerAdapter.instantiateItem 函数）。如果将 ViewPager 放入片段中，ViewPager 的两个实例最终将具有相同的 id，并且由于页面位置是页面的默认 id，因此第二个 ViewPager 的页面永远不会被实例化。

解决方法是以编程方式设置 ViewPager id：
`viewPager.setId(myID++);`
或覆盖适配器上的 getItemId，以便不同 ViewPager 的项目 id 不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T05:25:49.820

通过将 ViewPager 放在 Fragment 的布局中，您正在尝试在片段中添加子片段。嵌套片段仅从 4.2 开始支持，现在它也添加到了支持库中。

为了支持 View Pager insider afragment，您需要实现自己的 PagerAdapter 版本。从 SO 帖子之一，

> 完全可以将 ViewPager 放在 Fragment 中，只要 ViewPager 的内容本身不包含 Fragment。由于 Android Support 包提供的 PagerAdapter 的具体实现使用片段，因此您必须滚动自己的无片段 PagerAdapter 才能将 ViewPager 放入片段中。

以下是一些描述问题和可能解决方案的帖子

[为什么不能在 Fragment 中使用 ViewPager？它实际上是](https://stackoverflow.com/questions/12088983/why-it-is-not-possible-to-use-viewpager-within-a-fragment-it-actually-is)

[ViewPager 内部片段问题](https://stackoverflow.com/questions/9925467/viewpager-inside-fragment-issue)

# ruby-on-rails - 查询模型实例是否具有任何指定的关联集

> ID：15794350
> 
> 赞同：1
> 
> 时间：2013-04-03T17:44:37.993
> 
> 标签：ruby-on-rails, associations

我想为模型（在本例中为 Participant 模型）编写一个方法，该方法查看其关联的特定集合并简单地记录是否存在任何关联。这是我所拥有的：

```
 def post_screener_associations?
    ParticipantAuthorizationForm.where(:participant_id => self.id).count > 0
    ParticipantConsent.where(:participant_id => self.id).count > 0
    # and so on exactly like the format above about 8 more times!
  end 
```

我知道有更好的方法来编写此查询，但我不想打扰我的同事。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T18:08:18.967

```
 def post_screener_associations?
    self.class.reflect_on_all_associations.all? { |a| send(a.name).present? }
  end 
```

这应该询问每个关联是否存在，如果所有存在的方法都将返回 true，则以另一种方式它将是 false

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T19:27:14.930

如果您不想使用反射，另一种选择。它类似于您的原始帖子，使用参与者模型上的活动记录方法对其进行了简化。

```
def post_screeener_associations?
  participant_authorization_form.present? ||
  participant_consent.present? ||
  # etc.
end 
```

# html - angularJS为引导选项卡添加一个类+设置默认值

> ID：15794352
> 
> 赞同：1
> 
> 时间：2013-04-03T17:44:39.997
> 
> 标签：html, class, angularjs, angular-ui

我在这里有一个角度标签。如何设置默认选项卡？+ 将类添加到特定选项卡？

[http://plnkr.co/edit/FPMf8i](http://plnkr.co/edit/FPMf8i)

例如，我希望默认选择选项卡 2。然后选项卡 1 有一个特定的类。

我试过

```
 element.children[1].addClass('test');
 element[0].children[0].addClass('test');
 element[0].addClass('test'); 
```

但不断收到错误

不能使用 jquery 必须是已经存在的库。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T18:19:47.127

为您添加一个初始值`ng-model`，然后用于`ng-class`设置动态类

**PLNKR**

[http://plnkr.co/edit/udxAT0?p=preview](http://plnkr.co/edit/udxAT0?p=preview)

**看法**

```
<div ng-controller="TabsCtrl">
  <div class="tabbable" ng-model="currentTab">
    <div class="tab-pane" ng-class="{'special-class': currentTab == 1}" title="1" value="1">
      Content 1
    </div>
    <div class="tab-pane" title="2" value="2">
      Content 2
    </div>
  </div>
</div> 
```

**控制器**

```
var app = angular.module('plunker', ['bootstrap']);

app.controller("TabsCtrl", function($scope) {
  $scope.currentTab = 1;
}); 
```

# grails - 在 groovy 中包含 Liferay .jar 用于 portlet 开发

> ID：15794357
> 
> 赞同：0
> 
> 时间：2013-04-03T17:45:00.680
> 
> 标签：grails, groovy, import, liferay, portlet

我们正在使用 portlet 和 liferay portlets 插件在 groovy 中开发 liferay portlet。我们想找到当前登录用户的用户 ID。为了做到这一点，建议使用 com.liferay.model.user 类（通过搜索其他 SO 问题）。

不幸的是，当我们尝试导入 com.liferay.*（或 com.liferay.model.user 等）时，grails 编译器无法解析“用户”类。这是有道理的，因为 com.liferay 文件夹不在 grails/lib 文件夹中。但是，我无法找到从哪里获取这些 .jar 文件以将它们添加到 grails 中的 lib 文件夹中。

我接近这个错误吗？

（注意：我使用的是 Liferay 5.2.3，不是 Liferay 的最新版本）

或者，在 5.2.X 中是否有更简单的方法来获取当前登录用户的 ID 或名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T20:33:25.070

[更新]

mvnrepository.com 本身不是存储库，它是 Maven 工件的搜索引擎。

通过查看“下载 jar 超链接”，我看到 Liferay jar 在 Maven Central [http://repo1.maven.org/maven2/com/liferay/portal/](http://repo1.maven.org/maven2/com/liferay/portal/)中可用。

在 BuildConfig.groovy 的存储库部分中，确保存在以下行

```
mavenCentral() 
```

我认为`portal-impl`工件包含*com.liferay.model.user。**您正在寻找的相关课程。

在这种情况下，您将在您的`BuildConfig.groovy`

```
compile 'com.liferay.portal:portal-impl:5.2.3' 
```

如果您需要额外的 liferay 类，假设您在某处运行 liferay，您可以在 jar 中搜索特定的类名 ( [http://java.net/projects/jarscan](http://java.net/projects/jarscan) )。知道 jar 名称后，您可以搜索它`mvnrepository.com`并将相关的依赖项添加到您的`BuildConfig.groovy`.

希望能帮助到你。

* * *

您可以在 BuildConfig.groovy 中引用 liferay 依赖项。您需要确认存储库 URL，然后就可以了。

[http://mvnrepository.com/artifact/com.liferay.portal](http://mvnrepository.com/artifact/com.liferay.portal)

您可以从打包中排除这些依赖项。

# teamcity - 如何将 ChargifyNET 作为依赖项添加到 TeamCity 项目？

> ID：15794361
> 
> 赞同：0
> 
> 时间：2013-04-03T17:45:21.000
> 
> 标签：teamcity, build-automation

我们最近为我们的自动构建系统切换到 TeamCity 7.1.4，并尝试将[ChargifyNET](http://chargify.codeplex.com/)依赖项添加到现有项目中。我已经阅读了[Build Artifact 概念](http://confluence.jetbrains.com/display/TCD7/Build+Artifact)和[Dependent Build 概念](http://confluence.jetbrains.com/display/TCD7/Dependent+Build)，它们看起来都非常简单。但是，文档确实不清楚如何添加不需要构建/编译[的依赖项。](http://confluence.jetbrains.com/display/TCD4/Configuring+Dependencies)

理想情况下，我想将包含 ChargifyNET 二进制文件的存档存储在一个文件夹中，并能够在为我的项目配置依赖项时将该存档作为工件引用。我该如何设置？

到目前为止，我已经为 ChargifyNET 配置了一个单独的项目，并将存档中的各个二进制文件声明为该项目的工件（例如，%teamcity.agent.work.dir%/Chargify.NET/1.0.7/ChargifyNET.dll ）。然后，我为 ChargifyNET 项目工件的主项目添加了一个依赖项。

当我构建主项目时，出现“工件解析失败”错误。在构建日志中，在“解决工件依赖项”下，我没有看到 ChargifyNET 工件的提及。

如何将 ChargifyNET 作为依赖项添加到 TeamCity 项目？我需要进入自定义 Ant 脚本还是可以从 UI 中完成？

也许问题出在工件路径上。第三方库是否应该存储在代理工作目录或其他文件夹下？

将所有第 3 方库签入到 VCS 存储库是最佳做法吗？也许一个不同的解决方案是向主项目添加一个额外的 VCS 根，该根指向包含第 3 方库的 VCS 存储库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T15:07:01.403

如问题中所述，创建 Chargify.NET 项目已步入正轨。

1.  在这个项目下创建一个构建配置并输入一个静态构建号（即1.0.7）。

2.  您必须“运行”Chargify.NET 构建，以便 TeamCity 将在代理工作目录中为其创建一个动态构建文件夹。

3.  将 Chargify.NET 二进制文件复制到步骤#2 中创建的文件夹中。

4.  将工件路径从“%teamcity.agent.work.dir%/Chargify.NET/1.0.7/ChargifyNET.dll”修改为“ChargifyNET.dll”。这个新路径应该直接引用步骤#3 中提到的文件。

5.  将主项目的 Build Dependencies 部分中的工件路径修改为 Chargify.NET。它们应该看起来与步骤#4 中的相同，只是您可能想要添加目标路径（例如“ChargifyNET.dll=>trunk/bin”）。

6.  构建主项目，您应该会看到文件正确导入。

# jquery - 使用 JSON 的 Jquery UI 自动完成功能不起作用

> ID：15794363
> 
> 赞同：2
> 
> 时间：2013-04-03T17:45:27.407
> 
> 标签：jquery, ajax, json, jquery-ui, jquery-ui-autocomplete

嘿伙计们，我想弄清楚为什么当我将变量添加到源代码的末尾时该`autocomplete()`方法没有执行。`GET`例如：

```
 <script> 
    $(document).ready(function(){
        var search_input;

        $('#search').keyup(function(){
            search_input = ($(this).val());
            console.log(search_input);
        });
        $('#search').autocomplete({
          source: "http://192.168.33.10/app_dev.php/search/query/" + search_input,
          minLength: 2
        });
    });
    </script>

    <div class="ui-widget">
        <label for="search">Search</label>
        <input type="text" id="search" />
    </div> 
```

然而，如果我`+ search_input`从源代码中删除它会做一个`GET`，就像这样..

```
 <script> 
    $(document).ready(function(){
        var search_input;

        $('#search').keyup(function(){
            search_input = ($(this).val());
            console.log(search_input);
        });
        $('#search').autocomplete({
          source: "http://192.168.33.10/app_dev.php/search/query/",
          minLength: 2
        });
    });
    </script>

    <div class="ui-widget">
        <label for="search">Search</label>
        <input type="text" id="search" />
    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T18:10:13.267

即使您正在更改`search_input`，小部件也只会获取初始值为`search_input`（可能为空）的 URL。

你需要这样的东西：

```
$('#search').autocomplete({
    source: function (request, response) {
        $.get("http://192.168.33.10/app_dev.php/search/query/" + request.term, response)
    },
    minLength: 2
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T18:12:30.660

在您的代码中，该`autocomplete`函数只需要为 source 参数提供一个回调函数。`source: function( request, response ) {}`

您可以按照[jQuery UI Autocomplete 上的多个远程建议的示例](http://jqueryui.com/autocomplete/#multiple-remote)

```
 <script type="text/javascript"> 
      $(function() {
    function split( val ) {
      return val.split( /,\s*/ );
    }
    function extractLast( term ) {
      return split( term ).pop();
    }

    $( "#search" )
      // don't navigate away from the field on tab when selecting an item
      .bind( "keydown", function( event ) {
        if ( event.keyCode === $.ui.keyCode.TAB &&
            $( this ).data( "ui-autocomplete" ).menu.active ) {
          event.preventDefault();
        }
      })
      .autocomplete({
        source: function( request, response ) {
          $.getJSON( "http://192.168.33.10/app_dev.php/search/query/" + extractLast( request.term ), {
            term: extractLast( request.term )
          }, response );
        },
        search: function() {
          // custom minLength
          var term = extractLast( this.value );
          if ( term.length < 2 ) {
            return false;
          }
        },
        focus: function() {
          // prevent value inserted on focus
          return false;
        },
        select: function( event, ui ) {
          var terms = split( this.value );
          // remove the current input
          terms.pop();
          // add the selected item
          terms.push( ui.item.value );
          // add placeholder to get the comma-and-space at the end
          terms.push( "" );
          this.value = terms.join( ", " );
          return false;
        }
      });
  });
        </script> 
```

本例中服务器返回的 JSON 结构如下：

```
[{"id":"1544","label":"Suggestion 1","value":"Suggestion 1"},
{"id":"3321","label":"Suggestion 2","value":"Suggestion 2"}] 
```

# r - 对 textxy() 中的选定文本使用斜体字体

> ID：15794364
> 
> 赞同：0
> 
> 时间：2013-04-03T17:45:29.950
> 
> 标签：r

我正在使用校准库将文本放置在 xy 图中，并希望更改文本某些部分的字体。在下面的示例中，我希望`'K'`使用斜体字体和普通字体的其余文本。

```
textxy(7.5, 6, 'Arrows indicate optimal K', cx=0.8) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T17:55:26.853

您需要一个 plotmath 表达式并使用`italic()`plotmath 函数，例如：

```
textxy(7.5, 6, expression("Arrows indicate optimal" ~ italic(K)), cx=0.8) 
```

或者

```
textxy(7.5, 6, expression(Arrows~ indicate ~ optimal ~ italic(K)), cx=0.8) 
```

这是一个完整的例子：

```
require("calibrate")
plot(1:10, type = "n")
textxy(5, 5, expression("Arrows indicate optimal" ~ italic(K)), cx=0.8) 
```

![在此处输入图像描述](https://i.stack.imgur.com/TYCVe.png)

# python - 日期分组python

> ID：15794368
> 
> 赞同：0
> 
> 时间：2013-04-03T17:45:46.800
> 
> 标签：python, datetime, object

我可以借用某人的大脑来解决这个问题。我有数据及其相关的时间戳。我有兴趣按 5 分钟的频率对它们进行分组，但是我只能以 00:00 格式开始分组。我的意思是 13:23:27（小时）需要与 13:25:00 数据分组，然后是 13:30:00、13:35:00 等

你知道我怎么能区分这个四舍五入吗？目前我可以按 5 分钟分组，但它从第一个时间戳开始，可能是 13:18:47，所以下一个给我的是 13:24:00，根据我想看到的定义，这是错误的13:20:00

希望有道理...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T17:52:55.807

转换为秒，除以 300 并使用整数部分作为分组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T17:55:51.173

```
times = [<a list of datetimes>]
timegroups = [list(group) for (key, group) in
              itertools.groupby(times, lambda t:(t.hour, t.minute // 5))] 
```

### 注意事项：

*   确保你`import itertools`.
*   `//`是地板除法（尽管 SO 的语法高亮显示它认为这是一个注释）
*   `itertools.groupby`将返回一个依赖于原始迭代器的迭代器，如果需要，您可以使用它循环。我将其转换为列表，以便您可以轻松查看结果。
*   `groupby`还将期望一个排序列表
*   如果您在分组中需要更多分辨率，只需修改 lambda 返回的元组

这里的关键是将分钟数除以 5——这将实现您正在寻找的分组；这一条语句就是您需要的所有逻辑。

### 编辑：

为了做（当前）接受的问题正在做的事情，这是需要的更改：

```
rounding_delta = datetime.timedelta(seconds=150)
def key_func(val):
    t = val + rounding_delta
    return (t.hour, t.minute // 5)
timegroups = [list(group) for (key, group) in
              itertools.groupby(times, key_func)] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T22:43:02.763

尝试将您的时间四舍五入到最接近的 300 秒。您可以使用舍入整数的内置函数。您也可以尝试使用此算法：

```
 function round(int timestamp){
        int N = timestamp;                  //The time in time stamp
        int RN;                 //The rounded off time stamp -- wch is our answer
        int n = 300;            //5 min interval in seconds
        int r = N%n;            //The remainder
        int x=N/n;              //the whole number we get after dividing

        if(r/n < 0.5){
            RN = x * n;
        }
        else{
            RN = (x * n)+5;
        }

        return RN;
    } 
```

希望好用，一切顺利

# java - java.lang.NullPointerException 和 ResultSet

> ID：15794369
> 
> 赞同：3
> 
> 时间：2013-04-03T17:45:46.857
> 
> 标签：java, sql, actionlistener, resultset

这是我的第一篇文章，所以请耐心等待。我正在开发一个 java 项目并连接到一个 sql 数据库。我目前正在尝试做的是，当我单击一个按钮时，将在我的数据库的文本区域中显示项目的名称和具有指定 ID 的项目的价格。但是，当我单击按钮时，会出现如下错误：

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
at OrderFrame.waterButtonActionPerformed(OrderFrame.java:494)
at OrderFrame.access$000(OrderFrame.java:11) 
```

这是我的 waterButtonActionPerformed 的代码：

```
private void waterButtonActionPerformed(java.awt.event.ActionEvent evt) {                                            
// TODO add your handling code here:
    try{

    String query;
    query = "SELECT itemName, itemPrice FROM item WHERE itemID = '11111'";
    String itemName = " ",itemPrice =" ";  

      ***ResultSet rs = st.executeQuery(query);***

       if(rs != null){
        while(rs.next())
        { 
         itemName = rs.getString(1);
         itemPrice = rs.getString(2);
        }
       orderTextArea.setText(itemName);
       orderTextArea.setText(itemPrice);
       }
         } catch (SQLException ex) {}
} 
```

第 494 行是带有 ResultSet 声明的行。我希望有人能帮我解决这个问题。先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T17:51:51.887

`st`是`null`。你需要类似的东西

```
con.prepareStatement(query); 
```

`con`您与 SQL 数据库的连接在哪里。您没有在这里显示如何连接到数据库。[这是一个关于如何做到这一点的好教程。](http://docs.oracle.com/javase/tutorial/jdbc/basics/connecting.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T17:55:32.837

重写处理程序，如下所示：

```
waterButton.addActionListener(new ActionListener() {
public void actionPerformed(java.awt.event.ActionEvent evt) {                                            
// TODO add your handling code here:
    try{
       Statement st = connectionObject.createStatement();

       // might want to use placeholders here as well
       String query= "SELECT itemName, itemPrice FROM item WHERE itemID = '11111'"; 
       String itemName = " ",itemPrice =" ";  

       ResultSet rs = st.executeQuery(query);

       if(rs != null){
         do { 
           itemName = rs.getString(1);
           itemPrice = rs.getString(2);
        } while (rs.next());
        orderTextArea.setText(itemName);
        orderTextArea.setText(itemPrice);
        }
      } catch (SQLException ex) { 
         System.err.println(new java.util.Date()+" : "+ex.getMessage(); 
      }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T17:49:48.800

看起来 st 为空。您的示例没有显示 st 的声明位置，更不用说初始化了。

您可能需要从查询中创建一个语句（这只是一个字符串）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-03T17:55:04.057

看起来 st 是空的。请检查你的 st 否则写代码

```
conn.prepareStatement(query) 
```

# validation - Symfony 2.1 - 客户端验证仅适用于所需的约束

> ID：15794372
> 
> 赞同：1
> 
> 时间：2013-04-03T17:45:50.483
> 
> 标签：validation, symfony, orm, symfony-2.1

由于`Entities`更改了 from`MinLength`和`MaxLength`to和to的断言`Length`，验证器猜测者没有遵循这些更改并且属性没有被填充，因此 HTML 验证不适用于.`Min``Max``Range``max_length``length`

我认为应该有一个新的案例`Symfony\Component\Validator\Constraints\Length`in `guessMaxLengthForConstraint`function in`Symfony\Component\Form\Extension\Validator\ValidatorTypeGuesser.php`

还是已经解决了。

我正在使用 2.1.6 但我尝试了 2.1.7 并且没有区别我使用这个：

```
/**
* @var float $height
*
* @ORM\Column(name="height", type="decimal", nullable=true)
* 
* 
* @Assert\Range(
*      min = "20",
*      max = "96",
*      minMessage = "You must be at least 20 tall",
*      maxMessage = "You cannot taller than 96"

* )      
* @Assert\NotBlank(groups={"registration_step_two","profile_measurement"})  
* @Assert\Regex(pattern= "/[0-9]/",message="Require number only") 
* @Assert\MinLength(10)
*/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T12:20:41.413

我向他们添加了组验证，它终于工作了

# intel - 银行规模在 8051

> ID：15794373
> 
> 赞同：0
> 
> 时间：2013-04-03T17:45:55.417
> 
> 标签：intel, 8051

我读了一本关于英特尔 8051 的书，作者说，`8051 has three banks 00h to 1Fh, each bank has 8 registers and each bank is of 8 bytes.`？

现在我很困惑，当每个银行有 8 个寄存器，每个 8 字节宽时，每个银行是 8 个字节是什么意思。请指导我

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T12:34:38.393

> 当每个银行有 8 个寄存器，每个 8 字节宽时，银行是 8 字节

寄存器是 8*位宽*，而不是 8*字节*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T11:02:31.060

另外，请查看此处的**第 14 章图 3 内存空间**图表：( [http://www.the8051microcontroller.com/select-figures](http://www.the8051microcontroller.com/select-figures) ) 希望它会使图片更清晰。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-25T09:34:32.907

在 8051 中，有**4 个组寄存器 B0 到 B3**。它们的内存地址位置是
B0 - 00H - 07H
B1 - 08H - 0FH
B2 - 10H - 17H
B3 - 18H - 2FH

默认银行为 B0。每个银行是**8 个字节**。在每个 bank 中，有**8 个寄存器，每个**R0 - R7 为 1 个字节。每个**寄存器是 1 个字节，即 8 位。**

可以使用 PSW（处理器状态字）寄存器切换存储区。总结一下，
每个寄存器是 8 位（1 字节） R0 - R7
每个银行是 8 字节 B0 - B3

# c# - Silverlight：如何加载 XAP 文件夹中包含的目录中的文件

> ID：15794374
> 
> 赞同：0
> 
> 时间：2013-04-03T17:45:56.090
> 
> 标签：c#, silverlight, file-io, silverlight-5.0

我有一个文件夹，其中包含我作为“内容”包含在 silverlight 解决方案中的文件列表。我知道如何使用 Application.GetResourceStream() 加载单个文件，但我希望加载包含多个文件的整个目录。

尝试使用 DirectoryInfo 但它会引发 Securityexception，并且将 Application.GetResourceStream() 与目录路径一起使用会返回 null。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T18:46:08.563

我通过使用标准文件命名约定解决了问题，在文件名中有一个指定的索引，然后我只是使用循环和循环的索引来构建每个文件名，并将每个流加载到一个数组中。

# git - Git - 拉后缺少标签

> ID：15794378
> 
> 赞同：6
> 
> 时间：2013-04-03T17:46:15.410
> 
> 标签：git

它不是（几乎；因为 stackoverflow 不允许这样做）确切标题的副本
[Git Pull - 一切都是最新的，但它不是](https://stackoverflow.com/questions/8350567/git-pull-everything-up-to-date-but-its-not)

我缺少两个标签（特别是 Linux 内核 v3.9-rc4 和 v3.9-rc5）以及它们带来的更改。我尝试了太多命令并且用完了灰色单元格。

```
git reset
git reset --hard
git checkout HEAD
git pull
git fsck
git reset --hard HEAD 
```

问：我的 ISP 是否有可能搞砸了他们的缓存（因为他们已经这样做了）并导致了这一切？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-03T18:05:28.973

我想你想要`git fetch --tags`。从`git-fetch`手册页：

```
 -t, --tags
       Most of the tags are fetched automatically as branch heads are
       downloaded, but tags that do not point at objects reachable from
       the branch heads that are being tracked will not be fetched by
       this mechanism. This flag lets all tags and their associated
       objects be downloaded. The default behavior for a remote may be
       specified with the remote.<name>.tagopt setting. See git-
       config(1). 
```

如果这不起作用，请发布`git fetch --tags --verbose`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-03T17:51:31.960

尝试

```
git pull --tags 
```

额外的字符。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-10-13T11:50:35.133

mpontillo 于 2013 年 4 月 3 日 18:05 写道

`git fetch --tags`

如果您有上游，请使用

`git fetch --tags --all`

`--tags`意思是“所有标签”

`--all`表示“所有遥控器”（即起源和上游）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T18:18:44.897

多亏了迈克，我发现了问题，
我的遥控器已经自动神奇地改变了。我仍然不知道怎么做。
如果有人可以解释这一点，那就太好了。

```
git remote add torvalds https://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git 
```

# javascript - 带有 jQ uery 的水平滑块：100% 高度，图像/子项的自动宽度

> ID：15794381
> 
> 赞同：3
> 
> 时间：2013-04-03T17:46:27.627
> 
> 标签：javascript, jquery, html, css

在过去的几天里，我一直在试图找到解决我的问题的方法，但真的无法在任何地方找到它，而且谷歌真的很讨厌我，所以我来了。这是一个很大的要求，我的良心正在吞噬我的要求，但我不知道还能去哪里。

我正在为一名摄影师建立一个画廊，虽然我对 HTML 和 CSS 很自在，但我的 jQuery 技能却受到了打击（简而言之，它们并不好）——惊喜，惊喜。

任务变得更加复杂，因为它是一种 100% 高度的画廊，而 100% 高度并不适合。我设法设置了一些，但它的功能确实受损。

在 Stack 和 Google 上挖掘之后，我发现了 William Moynihan 的这个很棒的插件/小提琴：http: [//jsfiddle.net/wdm954/8GKz6/11/](http://jsfiddle.net/wdm954/8GKz6/11/)

它**完全包含我的标记和 CSS**以及我正在寻找的功能：滑动时使主图像居中的滑块，并且是无限的。

`height: 100%;`但是，由于`width: auto;`图像上的属性，它不能很好地发挥作用。以下行：

`$(content).width(w * $(section).length);`

由于 CSS 中的 auto 属性，似乎根本不计算容器的宽度（将其设置为零）。当我通过 jQuery .css 属性将宽度设置为 时`('width', 'auto')`，它工作正常，但滑动功能不完善，导致图像在左右移动时跳过/跳跃。

我没有使用滑块，因为这是一种以水平方式实际布局内容的好方法，这在摄影师的网站上看起来很棒。并且拥有`width: 100%;`将使垂直图像延伸到浏览器窗口之外，而水平图像“悬挂”在顶部，下方有大量空白空间。`width: auto;`所以，我相信这`height: 100%`是正确的、反应迅速的方式，但如果有人设法“说服”我，我一定会跟随你的领导。

*当我在这里时，也许有人足够有礼貌地指出我正确的方向以使这个画廊有限 - 在滑块的开始和结束处结束，左/右按钮相应地消失。*

任何帮助是极大的赞赏。这是代码本身，以防万一小提琴还不够：

```
<div class="container">
    <div class="gallery">
        <img src="../img/1.jpg" alt="Image" />
        <img src="../img/2.jpg" alt="Image" />
        <img src="../img/3.jpg" alt="Image" />
        <img src="../img/4.jpg" alt="Image" />
        <img src="../img/5.jpg" alt="Image" />
    </div>
</div>
<nav id="navigation">
    <a href="#" class="left">&#060;&#060;</a>
    <a href="#" class="right">&#062;&#062;</a>
</nav>

<script>
/*  jQuery Ghost Carousel
 *  Copyright (c) 2011 William Moynihan
 *  http://ghosttype.com
 *  Licensed under MIT
 *  http://www.opensource.org/licenses/mit-license.php
 *  May 31, 2011 -- v1.0
 */
$(function() {
    var content = '.container .gallery';
    var section = content + ' > img';

    function ghostCarousel() {

        var v = $(window).width();
        var w = $(section).width();
        var c = (w * $(section).length - v) / 2;

        $(content).width(w * $(section).length);
        $(content).css('margin-left', -c);
        $(content).css('width','auto');

        $('#navigation a.left').click(function(e) {
            e.preventDefault();
            if ($(content).is(':animated')) return false;
            $(content).animate({ marginLeft: '-=' +w }, 1000, function() {
                var first = $(section).eq(0);
                $(section).eq(0).remove();
                $(this).animate({ marginLeft: '+=' +w }, 0);
                $(this).append(first);
            });
        });
        $('#navigation a.right').click(function(e) {
            e.preventDefault();
            if ($(content).is(':animated')) return false;
            $(content).animate({ marginLeft: '+=' +w }, 1000, function() {
                var end = $(section).length - 1;
                var last = $(section).eq(end);
                $(section).eq(end).remove();
                $(this).animate({ marginLeft: '-=' +w }, 0);
                $(this).prepend(last);
            });
        });

    }

    ghostCarousel();

    $(window).resize(function() {
        var v = $(window).width();
        var w = $(section).width();
        var c = (w * $(section).length - v) / 2;
        $(content).css('margin-left', -c);
    });   
});
/* end "jQuery Ghost Carousel" */
</script> 
```

与 CSS 一起：

```
html, body { padding: 0px; }

.container {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    overflow: hidden;   
}
.container .gallery > img {
    position: relative;
    float: left;
    height: 100%;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-28T12:45:15.390

为了使其有限，您只需要了解和修改这两个函数，

```
 $('#gcNav a.left').click(function(e) {
            e.preventDefault();
            if ($(content).is(':animated')) return false;
            $(content).animate({ marginLeft: '-=' +w }, 1000, function() {
                var first = $(section).eq(0);//this is first
                $(section).eq(0).remove();
                $(this).animate({ marginLeft: '+=' +w }, 0);
                $(this).append(first);//adding
            });
        });
        $('#gcNav a.right').click(function(e) {
            e.preventDefault();
            if ($(content).is(':animated')) return false;
            $(content).animate({ marginLeft: '+=' +w }, 1000, function() {
                var end = $(section).length - 1;
                var last = $(section).eq(end);//this is last
                $(section).eq(end).remove();
                $(this).animate({ marginLeft: '-=' +w }, 0);
                $(this).prepend(last);//adding
            });
        }); 
```

现在，在这段代码中，它可以点击 .left 和 .right，如果你想让它变得有限，

只需计算幻灯片的长度，然后停止添加幻灯片，我已经添加了评论..

我刚刚指出了路...

我希望这个能帮上忙...

# bash - Shell脚本是否定时任务停止并重复？

> ID：15794386
> 
> 赞同：1
> 
> 时间：2013-04-03T17:46:39.877
> 
> 标签：bash, shell, timeout

我正在使用使用 CTRL-C 来停止任务的程序，我想做的是将该任务运行一定的分钟数，然后让它像按下 CTRL-C 一样停止。我希望它像按 ctrl+c 一样停止的原因是因为它会在您停止程序时自动保存，而不是杀死它并可能丢失保存的数据。

编辑; 我不想使用 cron ，除非它停止我的脚本，它会让程序保存数据，我希望在 shell 脚本中完成这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T18:14:00.423

陷阱语句捕获这些序列，并且可以编程为在捕获这些信号时执行命令列表。

-#!/bin/bash

陷阱“回声保存数据”SIGINT

while :
do sleep 60
done

有关陷阱的信息：http: [//tldp.org/LDP/Bash-Beginners-Guide/html/sect_12_02.html](http://tldp.org/LDP/Bash-Beginners-Guide/html/sect_12_02.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T19:24:38.257

使用[timeout 命令](https://www.gnu.org/software/coreutils/manual/html_node/timeout-invocation.html)`SIGINT`在 60 秒后发送：

```
timeout --signal=INT 60 /path/to/script.sh params 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T17:49:15.920

如果你需要拦截`ctrl`+ `c`，你应该使用`trap`内置的，像这样：

```
cleanup(){ # do something...; }

trap 'cleanup' 2

# rest of the code 
```

`2`在线`trap`是+发送的`SIGINT`信号，见`ctrl``c``man 7 signals`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T19:16:15.450

尝试以下操作：

```
#!/bin/bash
set -m
/path/to/script.sh params &
set +m

bg_pid=$!

sleep 60

kill -2 $bg_pid 
```

[这应该允许您使用Job Control](https://www.gnu.org/software/bash/manual/bashref.html#Job-Control)和[set 内置](https://www.gnu.org/software/bash/manual/bashref.html#The-Set-Builtin)发送`SIGINT`到后台进程

# assembly - ASM TASM 打印、循环、屏幕单元坐标

> ID：15794387
> 
> 赞同：0
> 
> 时间：2013-04-03T17:46:48.350
> 
> 标签：assembly, tasm

我有一个用于打印和循环字符串的代码，我将如何在不使用空白字符的情况下从屏幕上的特定（x，y）坐标开始打印字符串？我的意思是，我希望能够为我的打印函数指定起始位置，而不是循环打印空白字符的代码，直到我到达我想要的位置。

```
.model small

.stack 100h

.data

string db "string$"

.code

main: 
mov cx, 3

l: 
mov ax, @data
mov ds, ax
mov ah, 09h
mov dx, offset string
int 21h
loop l

mov ah, 4ch
int 21h 

end main 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T18:25:17.370

你基本上有两个选择：

1）如果您的终端支持它，您可以在发送字符串输出之前输出[ANSI 转义序列来定位光标。](http://en.wikipedia.org/wiki/ANSI_escape_code)

2）您可以直接写入显存。如果将图形适配器设置为 80x25 彩色文本模式，视频内存将从地址 0xB800:0 开始，并且由每个字符的字符/属性字节对组成 - 总共 4K。

# python - 具有带宽限制的 scp/sftp 的 python 模块

> ID：15794391
> 
> 赞同：2
> 
> 时间：2013-04-03T17:46:50.877
> 
> 标签：python, ssh, sftp, bandwidth

当通过 scp/sftp 提取数据时，哪些 python 模块可以启用带宽限制（如果有）？

我的目标是编写一个 python 脚本，该脚本将从一系列数据中心通过 sftp 或 scp（首选 sftp）提取数据？但是，我需要强制实施带宽限制，因为我将从中提取的一些服务器带宽较低。

我想过可能有一个 rsync 包装器，但是还有其他东西可以让我选择从我刚刚检索到的数据中心删除文件吗？

谢谢，--罗伯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T18:01:49.570

[pyftpdlib](https://code.google.com/p/pyftpdlib/)支持带宽限制和 SSL。

[帕拉米科](https://github.com/paramiko/paramiko/)也可能是一种选择

# mysql - node.js 的 mysql 框架

> ID：15794392
> 
> 赞同：3
> 
> 时间：2013-04-03T17:47:02.750
> 
> 标签：mysql, node.js

node.js 有没有 mysql 框架？我只找到了[https://github.com/felixge/node-mysql](https://github.com/felixge/node-mysql)但这只允许执行“原始”mysql 语句。我正在寻找一些工具，它可以提供更简单的方法来操作 mysql 数据库和数据。

特别是我需要分页和加入机制......

我不是在寻找一个完整的框架，因为我正在使用 restify 来构建 RESTapi - 只需要一个模块来检索/保存数据到 mysql db。所以我只需要MVC的“模型”部分；）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T18:01:28.020

听起来您可能正在寻找 ORM。如果是这种情况，您可以查看[Sequelize](http://www.sequelizejs.com/documentation)。它会让你定义你的对象，然后简单地“保存”和“获取”它们，而不必真正担心它是如何做到的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-03T17:54:25.877

您可以查看[db-mysql](http://nodejsdb.org/db-mysql/)模块。该模块提供用于创建查询的 api。[这是](https://github.com/mariano/node-db-mysql/)模块 GitHub 页面。

# java - Json 预处理性能问题

> ID：15794393
> 
> 赞同：0
> 
> 时间：2013-04-03T17:47:03.163
> 
> 标签：java, regex, json, jackson, gson

我有一个关于如何预处理java的问题。我实施了一些建议，我能够让它发挥作用。唯一关心的是性能。

[Java中的Json预处理](https://stackoverflow.com/questions/15553977/json-pre-processing-in-java)

我尝试了两种方法：

一种方法是使用 gson，我将其转储到哈希映射中。然后在吸气剂中，我查看地图以阅读。花了12秒才完成。

我尝试了另一种方法。我为两种 json 格式创建了两个类。基于源，我使用 jaskson 将其映射到相应的类。我在规范化类（具有通用名称的类）上创建。现在我正在使用推土机库将其映射到规范化类。最后，我所有的结果都是标准化的类对象集。现在需要 8 秒

我想知道是否有更快的方法来完成这项工作。我认为在这两种情况下，开销都会创建 1000 个我不想要的对象。我需要的只是将它们显示在表格的前端。

使用正则表达式操作原始 json 是一个不错的选择吗？

线程有帮助吗？

还有其他建议吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T19:05:11.673

如果你需要的话，你可以使用 Jackson 的流解析器来获得超快的性能。虽然在这样做之前我会认真地做一些适当的基准测试，因为使用 Jackson 解析 1000 个对象所需的时间不到 8 秒。请参阅此[基准](https://github.com/eishay/jvm-serializers/wiki)系列；如果您可以克隆 repo 并调整您的类以在该框架内工作，您将对 Jackson 如何处理您的数据类有一个很好的了解。我怀疑您的问题不在于杰克逊，而在于您的代码中的其他地方：分析器可以在那里提供很多帮助。

# php - XML 文件未加载

> ID：15794399
> 
> 赞同：0
> 
> 时间：2013-04-03T17:47:15.977
> 
> 标签：php, xml

我是 PHP 的新手，我正在尝试从像这样的 web 服务的响应中读取：http: [//voip.letscall.pt/VSServices/sendsms.ashx ?login=123456&pass=3663&from=john&to=peter&text=你好](http://voip.letscall.pt/VSServices/sendsms.ashx?login=123456&pass=3663&from=john&to=peter&text=hello)

但到目前为止，我还没有成功阅读它得到的回复。这是我到目前为止得到的

```
<?php

    header("Content-Type: text/plain;charset=utf-8");

    $url = 'http://voip.letscall.pt/VSServices/sendsms.ashx?login=123456&pass=3663&from=john&to=peter&text=hello';

    $xml = simplexml_load_file($url);

    echo $xml;

?> 
```

提前致谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T18:02:42.697

错误报告告诉我，您呈现的内容和您的响应之间的编码存在问题：

```
error_reporting(E_ALL);
header("Content-Type: text/plain;charset=utf-8"); 
```

> 警告：simplexml_load_file()： http: [//voip.letscall.pt/VSServices/sendsms.ashx](http://voip.letscall.pt/VSServices/sendsms.ashx?login=123456&pass=3663&from=john&to=peter&text=hello:1) ?login=123456&pass=3663&from=john&to=peter&text=hello: 1：解析器错误：文档标记为 UTF-16 但具有 UTF-8 内容

回复：

```
<?xml version="1.0" encoding="***utf-16***"?>
<response>
  <sms_response_code>400</sms_response_code>
  <sms_response_text>Authorization failed.</sms_response_text>
  <sms_response_destination />
</response> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T17:54:42.220

改为通过字符串尝试：

```
$xml = simplexml_load_string(file_get_contents($url)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T18:29:48.110

源 XML 格式不正确。XML 序言说这个 xml 文件是 utf-16，所以这就是它解析文件的方式。但是文件*不是*utf-16 编码的，它是 utf-8 编码的。

告诉源修复他们的 xml。如果他们不这样做，那么您必须在解析 XML 之前更改它，这很容易出错并且*icky*。例如：

```
$xml = preg_replace(
          '/^(<\?[xX][mM][lL]\s+[^\?\>]+encoding\s*=\s*([\'"]))utf-16\2/u',
          '\1utf-8\2', file_get_contents($url)); 
```

# selenium - 如何在元素上运行查询？

> ID：15794400
> 
> 赞同：5
> 
> 时间：2013-04-03T17:47:16.080
> 
> 标签：selenium, scalatest

### 问题以及我将如何使用普通的 Selenium API

我经常需要查询页面上的一个元素（比如 with `cssSelector().element`），使用它，然后想找到一个后代元素。使用普通的 Selenium API，我会写如下内容：

```
val foo = webDriver.findElement(By.cssSelector(".foo"))
val bar = foo.findElement(By.cssSelector(".bar")) 
```

如何使用 ScalaTest Selenium DSL 做到这一点？我可以通过以下方式获取“foo”元素：

```
val foo = cssSelector(".foo").element 
```

但是如何从“foo”中获取“bar”呢？当然，在这种情况下我可以只使用 Selenium API（即`val bar = foo.underlying.findElement(By.cssSelector(".bar"))`），但最终会使用 a`WebElement`而不是 ScalaTest `Element`。

### 运行另一个查询的解决方法

现在，我只是重新运行查询，如下所示，但发现这个查询很冗长，不太清楚，并且并不总是等同于仅在元素下查找元素。

```
val fooSelector = cssSelector(".foo")
val foo = fooSelector.element
val boo = cssSelector(fooSelector.queryString + " .bar").element 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-22T11:59:29.640

该`cssSelector`方法创建一个`CssSelectorQuery`对象。您可以将该对象作为参数传递给 find 方法：

```
val foo = find(cssSelector(".foo")).get 
```

# php - 需要最好的解决方案来避免无限循环

> ID：15794401
> 
> 赞同：-1
> 
> 时间：2013-04-03T17:47:17.510
> 
> 标签：php, jquery, loops

所以我在表中有这些数据：

```
|ID | key | flag |
| 1 | a   |  1   |
| 2 | b   |  0   |
|........ 
```

所以当我的网络应用程序的用户需要使用“关键”数据时，他们需要使用标志“1”查找数据，这意味着可以使用，而标志“0”意味着正在使用

我使用 jquery 发出此请求以向服务器查找可用的“关键”数据，如果数据可用（意味着存在带有标志 1 的数据），服务器将响应“1”，因此数据将被拾取并标记为 0（正在使用），当用户使用完 key 后，数据将被标记为 1

问题是当没有带有标志 1 的数据时，jquery 将继续发送请求，直到标志 1 可用，并最终进入无限循环

我需要最好的解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T18:11:26.823

在我的脑海中，我可以想到一个与表更新相关联的触发器，它会在“数据可用性”状态发生变化时调用服务。

使用它，您将首先发送检查数据的请求。如果没有可用数据，您可以避免发送多个请求并等待数据可用的通知（直到您决定超时）

在 java 中，这可以使用 Hibernate 和 SQL 触发器来完成。[数据库触发器和休眠](https://stackoverflow.com/questions/6980875/database-trigger-and-hibernate)

# css - Kendo UI ComboBox 事件

> ID：15794405
> 
> 赞同：1
> 
> 时间：2013-04-03T17:47:29.350
> 
> 标签：css, combobox, kendo-ui, background-color

我正在尝试根据所选项目更改 Kendo UI ComboBox 的颜色。

我整理了一个显示问题的小提琴[[http://jsfiddle.net/PeWPE/]](http://jsfiddle.net/PeWPE/)

我需要做的是在页面加载时确定所选项目。我可以捕获 onDataBound 事件，但此时找不到所选项目 - 我怀疑它不可用。

当用户从列表中选择一个新项目时，选择事件为我提供了更改组合框颜色所需的所有数据，尽管颜色实际上并没有改变:(

因此，总而言之，有没有办法在设置初始值时更改剑道 ui ComboBox 的颜色（并且修复我的语法的任何帮助也会很好！）。

谢谢你的帮助。

这是代码...

```
$(document).ready(function () {
 // Create some data - including a color
 var data = [{
     text: "12 Angry Men",
     value: "1",
     color: "White"
 }, {
     text: "Il buono, il brutto, il cattivo.",
     value: "2",
     color: "White"
 }, {
     text: "Inception",
     value: "3",
     color: "Green"
 }, {
     text: "One Flew Over the Cuckoo's Nest",
     value: "4",
     color: "Green"
 }, {
     text: "Pulp Fiction",
     value: "5",
     color: "Blue"
 }, {
     text: "Schindler's List",
     value: "6",
     color: "Blue"
 }, {
     text: "The Dark Knight",
     value: "7",
     color: "Red"
 }, {
     text: "The Godfather",
     value: "8",
     color: "Red"
 }, {
     text: "The Godfather: Part II",
     value: "9",
     color: "Yellow"
 }, {
     text: "The Shawshank Redemption",
     value: "10",
     color: "Yellow"
 }, {
     text: "The Shawshank Redemption 2",
     value: "11",
     color: "Orange"
 }];

 // Create the combo
 $("#movies").kendoComboBox({
     dataTextField: "text",
     dataValueField: "value",
     dataSource: data,
     height: 100,
     change: onChange,
     dataBound: onDataBound,
     select: onSelect
 });

 // Select a value - Note no event is raised when doing this(!)
 var combo = $("#movies").data("kendoComboBox");
 combo.value("9");

 function onChange(e) {
     alert('onChange Called');
     ctrl = this.element.attr("id");
     var dataItem = this.dataItem(e.item.index());
 }

 // This is called - but the color is not being set
 function onSelect(e) {
     alert('onSelect Called');
     var ctrl = this.element.attr("id");
     var dataItem = this.dataItem(e.item.index());
     alert('Control Id: ' +ctrl);     // Check we've got the control
     alert('Color selected: ' + dataItem.color);
     $('input[name="' + ctrl + '_input"]').css({
         backgroundColor: dataItem.color
     });
     $('#movies').css({
         backgroundColor: dataItem.color
     });

 }

 function onDataBound(e) {
     alert('onDataBound Called');
 }

 }) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T21:17:15.953

当您在#movies 输入上创建 KendoUI 组合框时，它实际上会隐藏该输入并创建一个新输入。所以唯一的问题是您使用的选择器不正确。我已经更新了您的 jsFiddle 参考，但是如果您将 onSelect 方法更改为以下内容，它将解决您的问题。

```
function onSelect(e){
    var ctrl = this.element.attr("id");
    var dataItem = this.dataItem(e.item.index());
    var combobox = $("#movies").data("kendoComboBox");
    combobox.input.css({ 'background-color' : dataItem.color });
    combobox.list.css({ 'background-color' : dataItem.color });
} 
```

它应该可以解决您的问题（它在 jsFiddle 中添加颜色）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T21:38:37.017

Kendo UI 用自己的 HTML 元素装饰。这是他们必须使其在浏览器和平台之间视觉兼容的方式。

您应该将您的组合框定义为：

```
$("#movies").kendoComboBox({
    dataTextField : "text",
    dataValueField: "value",
    dataSource    : data,
    height        : 100,
    select        : onSelect,
    dataBound     : onDataBound,
    value         : 9
}); 
```

注意：您可以在定义中设置值，之后您不需要这样做。

然后将两个事件处理程序定义为：

```
function onSelect(e){
    var dataItem = this.dataItem(e.item.index());
    this.input.css({ 'background-color' : dataItem.color });
}

function onDataBound(e) {
    var dataItem = this.dataItem(this.value());
    this.input.css({ 'background-color' : dataItem.color });
} 
```

`onSelect`用于更改值时使用，而`onDataBound`用于初始值。

在这里工作的小提琴：http: [//jsfiddle.net/OnaBai/PeWPE/4/](http://jsfiddle.net/OnaBai/PeWPE/4/)

# javascript - Javascript 闭包及其作用域

> ID：15794410
> 
> 赞同：0
> 
> 时间：2013-04-03T17:48:09.370
> 
> 标签：javascript, closures

```
for (var i=0, link; i<5; i++) {
    link = document.createElement("a");
    link.innerHTML = "Link " + i;
    link.onclick = function (num) {
        return function () {
            alert(num);
        };
    }(i);
    document.body.appendChild(link);
} 
```

由于嵌套函数是一个闭包，它有一个对`num`参数的引用`num`，循环结束时的参数是 4 。现在当第一个元素被点击时，为什么它会提示 1 ？它应该提示 4 。提示的原因是什么1 ？不要它引用`num`论点？或者是什么原因？

但这里的情况不同：

```
function foo(x) {
    var tmp = 3;
    return function (y) {
       alert(x + y + (++tmp));
    }
}
var bar = foo(2); // bar is now a closure.
bar(10); 
```

上面的函数将警告 16，因为 bar 仍然可以引用 arg`x`和`tmp`，即使它不再直接位于范围内。

这证明了闭包也引用了参数值，而不是为什么上面的代码每次都没有提醒 4？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T17:54:00.703

```
 for (var i=0, link; i<5; i++) {  //i starts at 0 and iterates up to 4
        link = document.createElement("a");
        link.innerHTML = "Link " + i;

         link.onclick = function (num) {
            //num is never changed within this function, and is equal
            //to the value of i when it was passed in

            return function () { alert(num);};

        }(i);  //i is passed here
        //that sets num to the current value of i for each link

        document.body.appendChild(link);
   } 
```

对于第一个链接，num 将为 0，因为`i`它在传递给外部函数时是 1。然后 i 为循环的每一轮迭代，并且对于每个链接将是不同的值。

这里的模式是一种非常常见的模式，用于在回调/事件绑定中保留循环迭代的当前值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T17:56:09.693

您正在做的是*避免*单击第一个元素会给您 4 而不是 1 的经典示例，这应该是最期望的值。

如果您希望它提醒 1，那么只需执行以下操作：

```
link.onclick = function() {alert(i);}; 
```

但老实说，这有什么意义呢？所有 4 个链接都会提醒 4...

# javascript - 检查字符串时有没有办法包含单词变体（过去时，动名词）？

> ID：15794411
> 
> 赞同：4
> 
> 时间：2013-04-03T17:48:14.087
> 
> 标签：javascript

假设我有一系列搜索词，例如-

```
var searchTerms = ["blow", "search", "fly", "type"] 
```

和一个字符串数组，如

```
var arrayToBeSearched = ["blowing", "searched", "flew", "typed", "blah", "blah","blah"] 
```

检查数组时，是否有一种简单的方法可以包含过去时或其他单词变体？或者我应该只在 searchTerms 中包含变体？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T18:06:00.800

存在词形还原算法，例如 Porter Stemmer。这会将您的单词映射到它们的词干，然后可以直接比较它们是否相等。该算法在[此处](http://tartarus.org/martin/PorterStemmer/)描述。完整复制[Javascript 实现](http://tartarus.org/martin/PorterStemmer/js.txt)：

```
// Porter stemmer in Javascript. Few comments, but it's easy to follow against the rules in the original
// paper, in
//
//  Porter, 1980, An algorithm for suffix stripping, Program, Vol. 14,
//  no. 3, pp 130-137,
//
// see also http://www.tartarus.org/~martin/PorterStemmer

// Release 1 be 'andargor', Jul 2004
// Release 2 (substantially revised) by Christopher McKenzie, Aug 2009

var stemmer = (function(){
    var step2list = {
            "ational" : "ate",
            "tional" : "tion",
            "enci" : "ence",
            "anci" : "ance",
            "izer" : "ize",
            "bli" : "ble",
            "alli" : "al",
            "entli" : "ent",
            "eli" : "e",
            "ousli" : "ous",
            "ization" : "ize",
            "ation" : "ate",
            "ator" : "ate",
            "alism" : "al",
            "iveness" : "ive",
            "fulness" : "ful",
            "ousness" : "ous",
            "aliti" : "al",
            "iviti" : "ive",
            "biliti" : "ble",
            "logi" : "log"
        },

        step3list = {
            "icate" : "ic",
            "ative" : "",
            "alize" : "al",
            "iciti" : "ic",
            "ical" : "ic",
            "ful" : "",
            "ness" : ""
        },

        c = "[^aeiou]",          // consonant
        v = "[aeiouy]",          // vowel
        C = c + "[^aeiouy]*",    // consonant sequence
        V = v + "[aeiou]*",      // vowel sequence

        mgr0 = "^(" + C + ")?" + V + C,               // [C]VC... is m>0
        meq1 = "^(" + C + ")?" + V + C + "(" + V + ")?$",  // [C]VC[V] is m=1
        mgr1 = "^(" + C + ")?" + V + C + V + C,       // [C]VCVC... is m>1
        s_v = "^(" + C + ")?" + v;                   // vowel in stem

    return function (w) {
        var     stem,
            suffix,
            firstch,
            re,
            re2,
            re3,
            re4,
            origword = w;

        if (w.length < 3) { return w; }

        firstch = w.substr(0,1);
        if (firstch == "y") {
            w = firstch.toUpperCase() + w.substr(1);
        }

        // Step 1a
        re = /^(.+?)(ss|i)es$/;
        re2 = /^(.+?)([^s])s$/;

        if (re.test(w)) { w = w.replace(re,"$1$2"); }
        else if (re2.test(w)) { w = w.replace(re2,"$1$2"); }

        // Step 1b
        re = /^(.+?)eed$/;
        re2 = /^(.+?)(ed|ing)$/;
        if (re.test(w)) {
            var fp = re.exec(w);
            re = new RegExp(mgr0);
            if (re.test(fp[1])) {
                re = /.$/;
                w = w.replace(re,"");
            }
        } else if (re2.test(w)) {
            var fp = re2.exec(w);
            stem = fp[1];
            re2 = new RegExp(s_v);
            if (re2.test(stem)) {
                w = stem;
                re2 = /(at|bl|iz)$/;
                re3 = new RegExp("([^aeiouylsz])\\1$");
                re4 = new RegExp("^" + C + v + "[^aeiouwxy]$");
                if (re2.test(w)) {  w = w + "e"; }
                else if (re3.test(w)) { re = /.$/; w = w.replace(re,""); }
                else if (re4.test(w)) { w = w + "e"; }
            }
        }

        // Step 1c
        re = /^(.+?)y$/;
        if (re.test(w)) {
            var fp = re.exec(w);
            stem = fp[1];
            re = new RegExp(s_v);
            if (re.test(stem)) { w = stem + "i"; }
        }

        // Step 2
        re = /^(.+?)(ational|tional|enci|anci|izer|bli|alli|entli|eli|ousli|ization|ation|ator|alism|iveness|fulness|ousness|aliti|iviti|biliti|logi)$/;
        if (re.test(w)) {
            var fp = re.exec(w);
            stem = fp[1];
            suffix = fp[2];
            re = new RegExp(mgr0);
            if (re.test(stem)) {
                w = stem + step2list[suffix];
            }
        }

        // Step 3
        re = /^(.+?)(icate|ative|alize|iciti|ical|ful|ness)$/;
        if (re.test(w)) {
            var fp = re.exec(w);
            stem = fp[1];
            suffix = fp[2];
            re = new RegExp(mgr0);
            if (re.test(stem)) {
                w = stem + step3list[suffix];
            }
        }

        // Step 4
        re = /^(.+?)(al|ance|ence|er|ic|able|ible|ant|ement|ment|ent|ou|ism|ate|iti|ous|ive|ize)$/;
        re2 = /^(.+?)(s|t)(ion)$/;
        if (re.test(w)) {
            var fp = re.exec(w);
            stem = fp[1];
            re = new RegExp(mgr1);
            if (re.test(stem)) {
                w = stem;
            }
        } else if (re2.test(w)) {
            var fp = re2.exec(w);
            stem = fp[1] + fp[2];
            re2 = new RegExp(mgr1);
            if (re2.test(stem)) {
                w = stem;
            }
        }

        // Step 5
        re = /^(.+?)e$/;
        if (re.test(w)) {
            var fp = re.exec(w);
            stem = fp[1];
            re = new RegExp(mgr1);
            re2 = new RegExp(meq1);
            re3 = new RegExp("^" + C + v + "[^aeiouwxy]$");
            if (re.test(stem) || (re2.test(stem) && !(re3.test(stem)))) {
                w = stem;
            }
        }

        re = /ll$/;
        re2 = new RegExp(mgr1);
        if (re.test(w) && re2.test(w)) {
            re = /.$/;
            w = w.replace(re,"");
        }

        // and turn initial Y back to y

        if (firstch == "y") {
            w = firstch.toLowerCase() + w.substr(1);
        }

        return w;
    }
})(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T17:54:53.137

虽然我自己没有使用此框架的经验，但您可以查看[lunr.js](http://lunrjs.com/) 该库在浏览器中提供全文搜索，其功能之一是`stemming`将“搜索”、“搜索”等与根词匹配搜索'。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T17:54:44.433

这是一个 node.js 解决方案。请注意，它是在 LGPL 下获得许可的。

[https://github.com/grachev/node-lemmer](https://github.com/grachev/node-lemmer)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-03T17:53:59.907

在 Javascipt 中没有本地方法可以执行此操作。但是，您可以做的是利用 REGEX 来处理您的数据以查找几乎任何您想要的*模式*。例如“ed”、“ing”等。

但是您的帖子中没有提到的是您搜索的范围和情况。这是否发生在您的站点/应用程序的特定有限部分？如果它更大，但仍然在客户端，您可能希望（正如其他人提到的）使用库或编写执行所需操作的插件。如果这是更单一的东西，您可能希望在服务器端甚至在数据库本身执行此操作。

# c# - 迁移无法如我所愿... Asp.net EntityFramework

> ID：15794413
> 
> 赞同：0
> 
> 时间：2013-04-03T17:48:21.963
> 
> 标签：c#, asp.net-mvc, entity-framework

我正在学习本教程 asp.net 电影教程，我的模型中有 2 个简单文件。

```
 public class Movie
{
    public int ID { get; set; }

    [Required]
    public string Title { get; set; }

}

public class MovieDBContext : DbContext
{
    public DbSet<Movie> Movies { get; set; }

} 
```

另一个是 Visual Studio 给我的帐户模型：

```
 public class UsersContext : DbContext
{
    public UsersContext()
        : base("DefaultConnection")
    {
    }

    public DbSet<UserProfile> UserProfiles { get; set; }
}

[Table("UserProfile")]
public class UserProfile
{
    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int UserId { get; set; }
    public string UserName { get; set; }

} 
```

问题是....如果我添加一个属性

```
 public int aaa { get; set; } 
```

到 UserProfile 类，我在迁移中没有任何变化......发生这种情况是因为迁移只更新 MovieDBContext 内的类......所以我必须添加类似的内容：

```
public class MovieDBContext : DbContext
{
    public DbSet<Movie> Movies { get; set; }
    public DbSet<UserProfile> User{get;set} 

} 
```

问题是在另一个项目中我试图更新 AccountModel 并尝试了这个解决方案，但它没有用....有谁知道另一个解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T18:29:36.980

**我认为您所经历的是“连接”问题**。（请查看我之前所做的演练 - 以及连接链接）
[迁移不会改变我的表](https://stackoverflow.com/questions/15730662/migration-does-not-alter-my-table/15734839#15734839)（用于连接问题）
[代码首先创建表](https://stackoverflow.com/questions/15747162/code-first-create-tables/15747585#15747585)

**把它放到一个 DbContext 中**——你真的不需要两个（至少我是这么认为的）。当你这样做时，你只需要“调整”连接。

> 具体来说，您`UserContext`有一个指定的连接 ( `DefaultConnection`)。另一个（电影...）没有 - 这意味着将命名另一个连接`MovieDbContext`- 它会尝试在您的配置文件中找到它 - 如果它不成功 - 它使用您的默认“提供者”来查找 Db - 它在那里创建了一个新的数据库。虽然您的 UserContext 可能已经在 .config 中定义了一个连接 - 并且该连接有效。

只需将所有内容移至“UserContext” - 或调整连接。见附件

**笔记：**

拥有多个 DbContext-s 就是所谓的**多租户迁移**——目前还不支持（对于 EF5）——并且在 EF6 中为 EF6 [Multiple Contexts per Database](http://entityframework.codeplex.com/wikipage?title=Multi-tenant%20Migrations)即将到来。

它根本不能在同一个数据库中拥有“两个迁移表”——因为每个迁移/上下文都需要自己的。

对于“黑客”，您可以强制`Add-Migration`运行 - 通过执行类似的操作`Add-Migration -ConfigurationTypeName Test.Migrations.MovieConfiguration InitialMovie`- 并单独为另一个项目运行 - 但这在单个项目中不起作用（它会抱怨迁移未决或其他事情） - 如果你移动到两个不同的 - 一旦你运行更新，你会碰到“一个迁移表”墙。

**另一种解决方案是关闭迁移**（对于一个），但我没有尝试过 - 或者运行连接到两个数据库的两个上下文 - 如果你想在两者之间“交流”，你并不真正想要。无论哪种方式-这纯粹是出于“学术目的”-不适合您的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T17:50:20.773

您应该将所有表放在一个`DbContext`类中。

然后一切都会正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T18:34:43.537

Entity Framework 只会迁移一个 DbContext。时期。目前没有办法解决这个问题。这非常简单明了地意味着 EF 需要处理的所有内容都*必须*在这个单一的上下文中。

但是，这并不妨碍您将其他上下文用于不同目的。所以在你`MovieDBContext`继续添加你的`UserProfile`实体集：

```
public DbSet<UserProfile> User { get; set; } 
```

然后，在您的其他上下文中，您只需要 1）确保它们与同一个数据库交互，并且 2）它们没有初始化策略，例如：

```
public class AccountsContext : DbContext
{
    public AccountsContext()
        : base("name=ConnectionStringNameHere")
    {
        Database.SetInitializer(null);
    }

    public DbSet<UserProfile> User { get; set; }
    ...
} 
```

这将使 EF 将此上下文视为到现有数据库的映射，因此它不会尝试创建数据库表、迁移等。所有这些都将通过您的主上下文（`MovieDbContext`在本例中）完成。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T18:40:02.987

你可以`enable Migration`这样使用：

```
Enable Migration -ContextTypeName UsersContext 
```

或者您可以`public DbSet<UserProfile> User { get; set; }`像`MovieDBContext`这样定义：

```
public class MovieDBContext : DbContext
{
    public DbSet<Movie> Movies { get; set; }
    public DbSet<UserProfile> User{get;set} 

} 
```

并使用这种方式：

```
Enable Migration -ContextTypeName MovieDBContext 
```

# php - 包含在循环内

> ID：15794417
> 
> 赞同：0
> 
> 时间：2013-04-03T17:48:32.150
> 
> 标签：php, loops, include

我有一个函数，它像这样读取存储在外部文件中的值

```
function MyFunction($param) {
include ($MyInclude);
...do the job
} 
```

我为循环的每个实例调用此函数

```
foreach ($fileArray as $param => $processed) {
MyFunction($param);
...rest of the job
} 
```

我是让服务器内存过载，还是文件只加载一次并从缓存中读取？我需要解决这个问题吗？我问是因为“$fileArray”会随着时间的推移而增长，处理越来越多的文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T17:52:46.510

它每次都会包含它，如果您有定义，这将导致错误（因为它会尝试重新定义某些东西）。尝试`include_once`改用或重构您的函数，这样它就不需要`include`在每次迭代时都进行（我会说这更好）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T17:56:00.763

`include`将始终“复制”这些文件的内容，就好像它们是在那里输入的一样。如果您在这些文件中有甚至可能导致错误的定义。

如果您在该文件中只有一些变量文字，那么它可能不会产生错误，但内存使用情况取决于您对这些文字的处理方式。如果您只是包含在函数内部并且不返回任何一个或将它们复制到其他外部变量等中，那么当函数返回时它们将被垃圾收集。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T18:50:36.693

我认为在函数中包含文件不是一个好主意，尤其是多次。如果你需要这样做，你可以使用 require_once 而不是 include。

但是，我建议您将其包含在函数之外。然后使用您需要的任何变量作为全局变量。

# solr - 数组字段的 Solr 查询语法

> ID：15794418
> 
> 赞同：13
> 
> 时间：2013-04-03T17:48:33.743
> 
> 标签：solr, solrnet, solr-query-syntax

如何在数组字段中搜索？

我正在使用具有默认设置的 solr 4.2。我使用 SolrNet 索引了一些 html 和 pdf 文档。这是我使用管理员搜索进行搜索时此类文档的示例结果`*:*`

```
enter code here
<doc>
<str name="id">2</str>
<date name="last_modified">2011-12-19T17:33:25Z</date>
<str name="author">name</str>
<str name="author_s">name</str>
<arr name="title">
  <str>CALIFORNIA CODES</str>
</arr>
<arr name="content_type">
  <str>application/pdf</str>
</arr>
<str name="resourcename">T01041.pdf</str>
<arr name="content">
  <str> PDF text here </str>
</arr>
<long name="_version_">1431314431195742208</long>
</doc> 
```

搜索使用`content:*`返回 0 个结果。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-04T00:21:48.937

而不是`content:*`尝试使用`content:[* TO *]`. 这将获取所有字段`content`非空的文档。

对于查询数组/多值字段，这取决于您想要做什么。如果您有一个多值字段，例如：

```
<arr name="tag_names">
    <str>death</str>
    <str>history</str>
    <str>people</str>
    <str>historical figures</str>
    <str>assassinations</str>
</arr> 
```

并且您想查找具有两者的文档，然后`death`发出类似的查询`history``tag_names`

```
q=tag_names:(death AND history) 
```

要执行 OR，请使用

```
q=tag_names:(death OR history) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-04T08:23:27.707

你的问题的答案很简单。

您的**Schema.xml**文件显示字段**name="content" indexed="false"**即您的内容字段不可搜索。因此，如果您搜索“内容”的任何内容，它将返回 0 个结果。

请更改您的 schema.xml 文件并将内容字段设置为 indexed="true"，以便使字段可搜索。

保存文件
重启 Solr。
清除索引。
重新索引文档

现在您将能够搜索**内容：***

如果能解决您的问题，请采纳答案...

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-04T01:50:50.570

`text:*`作品。它返回我所有的文档。

我从架构中得到了这个：

```
 <!-- Main body of document extracted by SolrCell.
        NOTE: This field is not indexed by default, since it is also copied to "text"
        using copyField below. This is to save space. Use this field for returning and
        highlighting document content. Use the "text" field to search the content. -->
   <field name="content" type="text_general" indexed="false" stored="true" multiValued="true"/>

   <!-- catchall field, containing all other searchable text fields (implemented
        via copyField further on in this schema  -->
   <field name="text" type="text_general" indexed="true" stored="false" multiValued="true"/> 
```

# python - 装饰器设置函数的属性

> ID：15794419
> 
> 赞同：17
> 
> 时间：2013-04-03T17:48:36.197
> 
> 标签：python, attributes, decorator, python-decorators, function-attributes

我希望仅当登录用户具有所需的权限级别时才能执行不同的功能。

为了让我的生活更简单，我想使用装饰器。下面我尝试`permission`在“装饰”功能上设置属性 - 如下所示。

```
def permission(permission_required):
    def wrapper(func):
        def inner(*args, **kwargs):
            setattr(func, 'permission_required', permission_required)
            return func(*args, **kwargs)
        return inner
    return wrapper

@permission('user')
def do_x(arg1, arg2):

    ...

@permission('admin')
def do_y(arg1, arg2):
    ... 
```

但是当我这样做时：

```
fn = do_x
if logged_in_user.access_level == fn.permission_required:
    ... 
```

我收到一个错误`'function' object has no attribute 'permission_required'`

我错过了什么？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-03T17:51:04.847

您正在检查内部（包装）函数的属性，但将其设置在原始（包装）函数上。但是你需要一个包装函数*：*

```
def permission(permission_required):
    def decorator(func):
        func.permission_required = permission_required
        return func
    return decorator 
```

您的装饰器需要返回将替换原始功能的*东西。*原始函数本身（添加了属性）可以很好地解决这个问题，因为您要做的就是为其添加一个属性。

如果您仍然需要包装器，请改为在*包装器函数*上设置属性：

```
from functools import wraps

def permission(permission_required):
    def decorator(func):
        @wraps(func)
        def wrapper(*args, **kwargs):
            # only use a wrapper if you need extra code to be run here
            return func(*args, **kwargs)
        wrapper.permission_required = permission_required
        return wrapper
    return decorator 
```

毕竟，您正在用装饰器返回的包装器替换包装的函数，所以这就是您要在其上查找属性的对象。

我还将[`@functools.wraps()`](https://docs.python.org/3/library/functools.html#functools.wraps)装饰器添加到包装器中，它将重要的识别信息和其他有用的东西从包装器中复制出来`func`，使其更容易使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T18:02:01.577

你的装饰器应该返回一个可以替换`do_x`or的函数`do_y`，而不是返回 or 的执行结果`do_x`你`do_y` 可以修改你装饰如下：

```
def permission(permission_required):
    def wrapper(func):
        def inner():
            setattr(func, 'permission_required', permission_required)
            return func
        return inner()
    return wrapper 
```

当然，您还有另一个简短的解决方案：

```
def permission(permission_required):
    def wrapper(func):
        setattr(func, 'permission_required', permission_required)
        return func
    return wrapper 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-25T20:44:45.703

问题是，即使您将所需的属性设置为 in 中的包装函数`inner`，`inner`它也会返回装饰函数返回的任何内容，而这通常不是函数本身。

您应该只返回添加了属性的相同原始函数，因此您真的不想担心这个原始修饰函数可能采用哪些参数，这意味着您可以摆脱其中一个包装级别：

```
def permission(permission_required):
   def wrapper(func):
       setattr(func, 'permission_required', permission_required)
       return func
   return wrapper

@permission('user')
def do_x(arg1, arg2):
    pass

@permission('admin')
def do_y(arg1, arg2):
    pass 
```

这工作得很好：

```
>>> do_x
<function __main__.do_x(arg1, arg2)>
>>> do_x.permission_required
'user'
>>> do_y.permission_required
'admin' 
```

# sql - 我的 sql 更新语句没有填满我的列

> ID：15794421
> 
> 赞同：0
> 
> 时间：2013-04-03T17:48:53.670
> 
> 标签：sql, left-join, sybase, unique-key

我有两个表A和B。

**表A**有列：
LI
PC（key）
CI（key）
DI
TM
V
AI（此时此列中没有数据）

**表 B**有列：
PC (key)
CI (key)
CT
CS
CV
AI

我想更新**表A**，使A.AI = B.AI
我写的更新语句如下：

```
 Update A
        Set A.AI *= B.AI
       From A, B
      where A.PC *= B.PC
        And A.CI *= B.CI 
```

当我尝试对此进行测试时，我使用了 SQL 语句：

```
 Select A.*
       From A, B
      Where A.CI *= B.CI
      And A.PC *= B.PC
      And A.AI *= B.AI
      Group by A.AI, A.CI, A.PI; 
```

当 AI 列保持为空时，所有内容都会填充。谁能帮我意识到我的错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T17:59:21.830

这里看起来像一个错字：

```
Set A.AI *= B.AI 
```

应该：

```
Set A.AI = B.AI 
```

# c++ - C++ 中的串行端口 (RS -232) 连接

> ID：15794422
> 
> 赞同：36
> 
> 时间：2013-04-03T17:48:54.860
> 
> 标签：c++, serial-port, mingw

我已经使用 16 位编译器在 C++ 中完成了串行端口 RS-232 连接（我使用的是 Turbo C++ IDE）。它包括头文件`bios.h`，其中包含从端口读取值所需的所有函数。现在我想使用 C++ 32 位 Mingw 编译器从串口读取值。我正在使用 Dev CPP 作为我的 IDE。在这里我找不到`bios.h`。Mingw 中是否有任何特殊的头文件可用于此目的？我现在使用的是 32 位编译器，因为在我的大学项目中，我必须使用我猜 Turbo C 不支持的异常处理。请帮帮我。

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-04-03T18:47:21.960

请看这里：

*   [适用于 Linux 和 Windows 的 RS-232](http://www.teuniz.net/RS-232/) ^(1))
*   [Windows 串口编程](https://web.archive.org/web/20180127160838/http://bd.eduweb.hhs.nl/micprg/pdf/serial-win.pdf) ^(2))
*   [在 Visual C++ 中使用串行端口](http://members.ee.net/brey/Serial.pdf) ^(3))
*   [Windows 中的串行通信](http://www.codeproject.com/Articles/2682/Serial-Communication-in-Windows)

^(1）) *您可以在 Windows（包括 MinGW）和 Linux 上使用它。或者，您只能使用代码作为示例。*

^(2）) *分步教程如何在windows上使用串口*

^(3）) *你可以在 MinGW 上使用它*

这是一些非常非常简单的代码（没有任何错误处理或设置）：

```
#include <windows.h>

/* ... */

// Open serial port
HANDLE serialHandle;

serialHandle = CreateFile("\\\\.\\COM1", GENERIC_READ | GENERIC_WRITE, 0, 0, OPEN_EXISTING, FILE_ATTRIBUTE_NORMAL, 0);

// Do some basic settings
DCB serialParams = { 0 };
serialParams.DCBlength = sizeof(serialParams);

GetCommState(serialHandle, &serialParams);
serialParams.BaudRate = baudrate;
serialParams.ByteSize = byteSize;
serialParams.StopBits = stopBits;
serialParams.Parity = parity;
SetCommState(serialHandle, &serialParams);

// Set timeouts
COMMTIMEOUTS timeout = { 0 };
timeout.ReadIntervalTimeout = 50;
timeout.ReadTotalTimeoutConstant = 50;
timeout.ReadTotalTimeoutMultiplier = 50;
timeout.WriteTotalTimeoutConstant = 50;
timeout.WriteTotalTimeoutMultiplier = 10;

SetCommTimeouts(serialHandle, &timeout); 
```

现在您可以使用`WriteFile()`/`ReadFile()`来写入/读取字节。不要忘记关闭您的连接：

```
CloseHandle(serialHandle); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-05-20T20:46:12.377

对于上面的答案，默认的串口是

```
 serialParams.BaudRate = 9600;
        serialParams.ByteSize = 8;
        serialParams.StopBits = TWOSTOPBITS;
        serialParams.Parity = NOPARITY; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2021-09-08T18:01:00.717

或者你可以使用`boost::asio::serial_port`！

# python - Python请求模块会话到期

> ID：15794436
> 
> 赞同：1
> 
> 时间：2013-04-03T17:49:41.327
> 
> 标签：python, session, session-cookies, python-requests

我正在编写一个脚本，它将自动从 hostuje.net 页面下载文件。我决定使用 Requests 模块来做到这一点。下载过程如下：

*   当您访问该站点时，它会在 cookie 中提供 PHPSESSID
*   在页面上有一个带有隐藏输入的表单：文件 ID、哈希、文件名、服务器地址、mime 和“REG”（设置为 1 表示您接受使用条款）
*   当您单击“Pobierz plik”（下载）时，会发送带有提及数据的帖子
*   页面正在重新加载并显示下载对话框

我已经阅读了 http 标头并决定通过简单的脚本发送类似的查询。我使用 pyQuery 来获取输入值。问题是，每当我将 postdata 发送到服务器时，都没有 302（找到）代码，而是 200，并且页面告诉我的会话已过期加载。这是我的代码：

```
from pyquery import PyQuery as pq
import requests

(some code here...)

session = requests.session()
page = session.get(download_page)
d=pq(page.content, parser='html_fragments')
data = {}
for inputs in d("td > input[name]").items():
    data[inputs.attr("name")]=inputs.attr("value")

cookies = dict(PHPSESSID=page.cookies['PHPSESSID'])
resp = session.post(download_page, data=data, allow_redirects=False,stream=False, cookies=cookies) 
```

Web 浏览器发送这种 postdata：

```
POST /file.php?id=c4f50ccefcd1c83e2a48374db4644a0a HTTP/1.1
Host: hostuje.net
User-Agent: Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:19.0) Gecko/20100101 Firefox/19.0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: pl,en-us;q=0.7,en;q=0.3
Accept-Encoding: gzip, deflate
DNT: 1
Cookie: PHPSESSID=g565im2lqu0csthglgnlb98tp2
Connection: keep-alive
Content-Type: application/x-www-form-urlencoded
Content-Length: 164
OK=1&hasz=c4f50ccefcd1c83e2a48374db4644a0a&id=c4f50ccefcd1c83e2a48374db4644a0a&name=Stupid+Fresh-+Spam+Javelin+Original.mp3&mime=audio%2Fmpeg&k=n4.hostuje.org&REG=1 
```

响应如下：

```
HTTP/1.1 302 Found
Date: Wed, 03 Apr 2013 14:42:58 GMT
Server: Apache/2
X-Powered-By: PHP/5.3.3-7+squeeze14
Expires: Mon, 26 Jul 1997 05:00:00 GMT
Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0
Pragma: no-cache
Last-Modified: Wed, 03 Apr 2013 16:42:58 +0200
Location: http://n4.hostuje.org/file.php?id=c4f50ccefcd1c83e2a48374db4644a0a&mime=audio/mpeg&name=Stupid+Fresh-+Spam+Javelin+Original.mp3&sid=eca83088d8cad5bcb194c92e3a5af068
Content-Encoding: gzip
Vary: Accept-Encoding
Content-Length: 26
Connection: close
Content-Type: text/html; charset=ISO-8859-2 
```

这就是我想用我的脚本实现的目标。

```
<<class 'requests.cookies.RequestsCookieJar'>[<Cookie PHPSESSID=c0v7cdfa0vkntbfdl8cocr01r4 for hostuje.net/>]> 

{'Accept-Encoding': 'gzip, deflate, compress', 'Accept': '/', 'User-Agent': 'python-requests/1.2.0 CPython/2.7.3 Linux/3.2.0-39-generic'}

{'OK': '1', 'name': 'Stupid Fresh- Spam Javelin Original.mp3', 'k': 'n4.hostuje.org', 'id': 'c4f50ccefcd1c83e2a48374db4644a0a', 'mime': 'audio/mpeg', 'hasz': 'c4f50ccefcd1c83e2a48374db4644a0a', 'REG': '1'} 
```

它们是 session.cookie、session.headers 和数据字典

附加信息：响应标头

```
{'content-length': '5337', 'content-encoding': 'gzip', 'expires': 'Mon, 26 Jul 1997 05:00:00 GMT', 'vary': 'Accept-Encoding', 'server': 'Apache/2', 'last-modified': 'Thu, 04 Apr 2013 19:36:58 +0200', 'connection': 'close', 'pragma': 'no-cache', 'cache-control': 'no-store, no-cache, must-revalidate, post-check=0, pre-check=0', 'date': 'Thu, 04 Apr 2013 17:36:58 GMT', 'x-powered-by': 'PHP/5.3.3-7+squeeze14', 'content-type': 'text/html; charset=ISO-8859-2'} 
```

响应内容（因为响应没有方法“正文”）

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-2">
<meta http-equiv="EXPIRES" content="0">
<meta name="RESOURCE-TYPE" content="DOCUMENT">
<meta name="DISTRIBUTION" content="GLOBAL">
<meta name="AUTHOR" content="TS TEAM">
<meta name="COPYRIGHT" content="Copyright (c) 2008 by TS TEAM">
<meta name="KEYWORDS" content="darmowy hosting, hosting plik�w, darmowy hosting plik�w, bezp�atny hosting, hosting obrazk�w, hosting zdj��, darmowy, hosting mp3, ftp hosting, darmowy serwer">
<meta name="DESCRIPTION" content="Bezp�atny hosting plik�w, obrazk�w i zdj�� bez konieczno�ci ponoszenia dodatkowych op�at. Pozwalamy na darmowe dzielenie si� plikami z innymi u�ytkownikami internetu.">
<meta name="ROBOTS" content="ALL, FOLLOW">
<meta http-equiv="CONTENT-Language" content="pl">
<meta name="REVISIT-AFTER" content="1 DAYS">
<meta name="RATING" content="GENERAL">
<meta name="GENERATOR" content="TS TEAM">
<title>Darmowy hosting plik�w, zdj�� i obrazk�w - Hostuje.net</title>
<link rel="stylesheet" href="style.css?new8ac" type="text/css" media="all">
<!--[if lte IE 6]> <link rel="stylesheet" href="style_ie.css?new2" type="text/css"/><![endif]-->
<script type="text/javascript" src="swfobject2.js?sr"></script>
</head>
<body><a name="pagetop"></a>
<center> <!-- top -->
<div id="top">
    <a id="top_logo" href="index.php"></a>
    <ul id="menu_ul">
        <li id="menu_li_home"><a id="menu_home" href="index.php">Home</a></li>
        <li id="menu_li_rejestracja"><a id="menu_rejestracja" href="regulamin.php">Regulamin</a></li>
        <li id="menu_li_pomoc"><a id="menu_pomoc" href="pomoc.php">Pomoc</a></li>
        <li id="menu_li_onas"><a id="menu_onas" href="onas.php">O Nas</a></li>
        <li id="menu_li_kontakt"><a id="menu_kontakt" href="kontakt.php">Kontakt</a></li>
    </ul>
</div>
<!--/top -->

<!-- mde -->
<div class="mde">
    <!-- mdel -->
    <div class="mdel">
        <div id="register">
                <br>  
            <div><b style="font-size: 26px">Darmowy</b> <b style="color: #CA2121; font-size: 26px">hosting</b> <b style="font-size: 26px">plik�w</b></div>
            <table id="register_tab" width="348" border="0" cellspacing="0" cellpadding="0">
              <tr>
                <td width="174"><p><b style="font-size:14px;">- Upload do 250</b> <b style="font-size:14px;">MB</b></p></td>
                <td width="174"><p><b style="font-size:14px;">- Szybkie Serwery</b></p></td>
              </tr>
              <tr>
                <td><p style="margin-top:5px;"><b style="font-size:14px;">- Brak Limit�w</b></p></td>
                <td><p style="margin-top:5px;"><b style="font-size:14px;">- Nielimitowana przestrze� na pliki</b></p></td>
              </tr>
              <tr>
              <td><p style="margin-top:5px;"><b style="font-size:14px;">- Wszystko za Darmo</b></p></td><td><p style="margin-top:5px;"><b style="font-size:14px;">- Nielimitowany transfer</b></p></td>              </tr> 
            </table>
        </div>
    </div>
    <!--/mdel -->

    <!-- mder -->
    <div class="mder">
        <div id="login">

                <form id="forma" name="forma" method="post" action="login.php">
                <label id="forma_label_title">Logowanie do e-Dysku</label>
                <input type="text" name="login" id="forma_login" value="" style="height:19px;">
                <input type="password" name="pass" id="forma_pwd" value="" style="height:19px;">     
                <label id="forma_label_login">Login:</label>
                <label id="forma_label_pwd">Has�o:</label>
                <label id="forma_label_checkbox">Zapami�taj</label>
                <label id="forma_label_remember"><a href="rejestracja.php">Za��� konto</a> | <a href="przypomnij.php">Przypomnij has�o</a></label>
                <input type="checkbox" name="zapisz" id="forma_checkbox" value="1">
                <input name="forma_button_login" id="formm_button_login" type="image" src="graph/home/login/forma_button.gif" value="" onmouseover="this.style.cursor='pointer';">
                </form> 

                        </div>
        </div>
   <!--/mder -->    
</div>
<!--/mde -->
<br>

<!-- BBelements AdServer one2many Position: go.arbopl.bbelements.com hostuje.net(5362) / pozostale podstrony(2) / billboard(1) / billboard 750x100 750x100(30)-->
<!-- HowTo: Place this code into the html page there the ad should appear. -->
<div id='bmone2n-5362.2.1.30'></div>

<div align="center">
<br>

<table width="100%"><tr><td align="center"><table width="700"><tr><td align="left" valign="top" style="width: 420px"><b>Wyst�pi�y nast�puj�ce b��dy:</b><ul><li style="margin-right: 4px;">Twoja sesja wygas�a, prosz� klikn�� ponownie na przycisk pobierz plik lub od�wie�y� strone.</li></ul><form method="post" action="http://hostuje.net/file.php?id=c4f50ccefcd1c83e2a48374db4644a0a"><div><img style="width:0px;height:0px;" src="obraz.php" alt="" title=""><table cellpadding="4" cellspacing="4">
<tr><td colspan="2">

<div id='bmone2n-5362.2.1.36'></div>

</td></tr>

<tr><td colspan="2" style="border-top: 2px solid #e5e5e5;"><input type="hidden" name="OK" value="1"><input type="hidden" name="hasz" value="c4f50ccefcd1c83e2a48374db4644a0a"><input type="hidden" name="id" value="c4f50ccefcd1c83e2a48374db4644a0a"><input type="hidden" name="name" value="Stupid Fresh- Spam Javelin Original.mp3"><input type="hidden" name="mime" value="audio/mpeg"><input type="hidden" name="k" value="n4.hostuje.org"><input type="hidden" name="REG" value="1"><input type="submit" value="Pobierz Plik" style="font-size: 22px; border: 2px solid #eeeeee; cursor: hand;"></td></tr></table></div></form></td><td valign="top" align="left" style="border-top: 2px solid #e5e5e5; border-left: 2px solid #e5e5e5; padding: 8px; width: 280px; background: #ffffff url(images/tlo_2a.gif) repeat-y;"><div style="font-size: 18px;"><span style="font-size: 18px; border-bottom: 2px solid #eeeeee;">Informacje o pliku</span></div><br><b>Plik:</b> Stupid Fresh- Spam Javelin Original.mp3<br><b>Rozmiar:</b> 293 KB<br><b>Rozmiar kontrolny w bajtach:</b> 299 676<br><b>Typ:</b> audio/mpeg<br><script type="text/javascript" src="swfobject.js"></script><br>         <script type="text/javascript" charset="iso-8859-2">if  (document.getElementById('adKontekst_0')==null) {
var adKontekst_pola=new Array;
document.write('<scr'+'ipt type="text/javascript" charset="iso-8859-2" '+
 'src="http://adsearch.adkontekst.pl/akon/spliter?prid=5343&caid=94710&ns='
+(new Date()).getTime()+'"'+'></'+'scri'+'pt>');
}
var adc_i=adKontekst_pola.length;
 document.write("<div id='adKontekst_"+adc_i+"'>   </"+"div>");
 adKontekst_pola[adc_i]=new Object();
 adKontekst_pola[adc_i].nazwa="adKontekst_"+adc_i;
adKontekst_pola[adc_i].typ=201;
adKontekst_pola[adc_i].r=1;
adKontekst_pola[adc_i].c=1;
adKontekst_pola[adc_i].x=234;
adKontekst_pola[adc_i].y=60;
adKontekst_pola[adc_i].naroznik_lewy_gorny = 3; adKontekst_pola[adc_i].naroznik_prawy_gorny = 3; adKontekst_pola[adc_i].naroznik_lewy_dolny = 3; adKontekst_pola[adc_i].naroznik_prawy_dolny = 3; adKontekst_pola[adc_i].spacing=1; adKontekst_pola[adc_i].scalenie=2;
adKontekst_pola[adc_i].paleta=new Object();
adKontekst_pola[adc_i].paleta.kolor_tlo="#FFFFFF";
adKontekst_pola[adc_i].paleta.kolor_tytul="#414e5b";
adKontekst_pola[adc_i].paleta.kolor_opis="#414e5b";
adKontekst_pola[adc_i].paleta.kolor_url="#414e5b";
adKontekst_pola[adc_i].paleta.kolor_naglowek="#FFFFFF";
adKontekst_pola[adc_i].paleta.kolor_tlo_naglowka="#FFFFFF"; 
adKontekst_pola[adc_i].paleta.kolor_ramki_naglowka="#FFFFFF"; 
adKontekst_pola[adc_i].metka="text"; 
adKontekst_pola[adc_i].czy_url=true; 
adKontekst_pola[adc_i].id_koloru_metki="1";
adKontekst_pola[adc_i].nform=8;
</script>
<script type="text/javascript" 
src="http://hostuje.net/show_s.php?1365097018&amp;h=c4f50ccefcd1c83e2a48374db4644a0a">
</script>
         <div id="flashcontent">Do poprawnego dzia�ania playera wymagany jest flash i w��czona obs�uga javascriptu.</div><script type="text/javascript">var so = new SWFObject("mediaplayer.swf", "player", "250", "20", "8", "#ffffff");so.addParam("allowscriptaccess", "always");so.addVariable("file", "http://n4.hostuje.org/_tmp/id-c4f50ccefcd1c83e2a48374db4644a0a-p-1");so.addVariable("width", "250");so.addVariable("height", "20"); so.addVariable("bufferlength", "5"); so.addVariable("displaywidth", "0");so.addVariable("displayheight", "0");so.addVariable("autostart", "false"); so.addVariable("frontcolor", "0x414e5b");so.addVariable("backcolor", "0xffffff");so.addVariable("lightcolor", "0xCA2121"); so.addVariable("type", "mp3");so.write("flashcontent");</script>Po wci�ni�ciu play poczekaj chwil� a� plik si� wczyta...<br><br><br><div style="padding-top:2px;"><p style="padding-top:2px;"><img src="images/raport.png" style="vertical-align: middle;" border="0" width="16" height="16" alt=""> <b><a href="kontakt.php" style="text-decoration:underline;">Zg�o� naruszenie zasad / Raport Abuse</a></b><br></p><p style="padding-top:2px;"><img src="images/dodatki.png" style="vertical-align: middle;" border="0" width="16" height="16" alt=""> <b><a href="#pagetop" onclick="show('okno')" style="text-decoration:underline;">Kody i dodatki html</a></b><br></p><p style="padding-top:2px;"><img src="images/komentarz.png" style="vertical-align: middle;" border="0" width="16" height="16" alt=""> <b><a href="#pagetop" onclick="show('okno2')" style="text-decoration:underline;">Dodaj komentarz</a></b></p></div><br><hr style="border: 0;color: #f2f2f2;background-color: #f2f2f2;height: 1px;"><b>Ten plik zosta� przeskanowany programem antywirusowym. Skaner antywirusowy log:</b><br>Czysty plik, nie wykryto zagro�e�&lt;script language="javascript" type="text/javascript">
           <!--
            document.title = "Stupid Fresh- Spam Javelin Original.mp3 : Darmowy hosting plik�w - Hostuje.net";
       //-->
      </script></td></tr></table></td></tr></table>
</div>

<br>
<!-- footer -->
<div id="footer_line"></div>
<div id="footer">

<!-- r -->

    <p align="center">
        Korzystanie z serwisu jest r�wnoznaczne z akceptacj� <a class="link_red" href="regulamin.php" target="_self">regulaminu</a><span class="footer_sep">|</span> <a class="link_red" href="polityka_cookies.php" target="_self">Polityka cookies</a><span class="footer_sep">|</span> <a class="link_red" href="kontakt.php" target="_self">Kontakt / Raport Abuse</a><span class="footer_sep">|</span> <a class="link_black" href="reklama.php" target="_self">Reklama</a><span class="footer_sep">|</span>     </p>
    <p class="color_grey" align="center" style="margin-top:3px; font-size:10px;">Copyright by Hostuje.net &copy; 2008-2013 All rights reserved | powered by TS Team ver.1.4.8 | <a style="font-size:10px;" href="http://hostuje.net/cookies_del.php">Usu� ciasteczka z hostuje.net</a>
    </p>
</div>

<!--/footer -->

<!-- (C) 2000-2006 Gemius SA - gemiusAudience / ver 11.1 / pp.hostuje.net / podstrony-->
<script type="text/javascript">
 <!--//--><![CDATA[//><!--
var pp_gemius_identifier = new String('ctTqJgtuY5.LA18hzSqwk8bfjwiwbFtPWF8Iwxo_IGz.Q7');
//--><!]]>
</script>
<script type="text/javascript" src="http://arbo.hit.gemius.pl/pp_gemius.js"></script>

<div id="google_translate_element"></div><script type="text/javascript">
function googleTranslateElementInit() {
  new google.translate.TranslateElement({
    pageLanguage: 'pl'
  }, 'google_translate_element');
}
</script><script type="text/javascript" src="http://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

<!-- BBelements AdServer one2many code -->
<!-- HowTo: All the ad codes must be above this code! -->
<!-- HowTo: It is good idea to place this code just below the last ad code. -->
<script type='text/javascript' charset='utf-8' src='http://go.arbopl.bbelements.com/bb/bb_one2n.js'></script>
<script type='text/javascript'>/* <![CDATA[ */ 
bmone2n.addPosition('5362.2.1.30','');
bmone2n.addPosition('5362.2.1.36','');
bmone2n.addPosition('5362.2.1.31','');
bmone2n.getAd('go.arbopl.bbelements.com','',''+(typeof(bburlparam)=='string'?'&'+bburlparam:''),'utf-8');
/* ]]> */</script>
<div id='bmone2t-5362.2.1.30' style='display:none'><script type='text/javascript'>/* <![CDATA[ */ bmone2n.makeAd('5362.2.1.30'); /* ]]> */</script></div>
<div id='bmone2t-5362.2.1.36' style='display:none'><script type='text/javascript'>/* <![CDATA[ */ bmone2n.makeAd('5362.2.1.36'); /* ]]> */</script></div>
<div id='bmone2t-5362.2.1.31' style='display:none'><script type='text/javascript'>/* <![CDATA[ */ bmone2n.makeAd('5362.2.1.31'); /* ]]> */</script></div>
<script type='text/javascript'>/* <![CDATA[ */ bmone2n.moveAd(); /* ]]> */</script>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
var pageTracker = _gat._getTracker("UA-4997701-1");
pageTracker._initData();
pageTracker._trackPageview();
</script>

<script type="text/javascript" src="dll_kody.js.php?new7a&amp;flash=1"></script><div id="okno"><div class="tlo"></div><div class="content"><div align="right" class="head"><div class="title">BBcode &amp; Kody</div><a onclick="hide('okno'); return false;" href="#" style="color: #f2f2f2;">zamknij <img src="images/zamknij2.gif" border="0" style="vertical-align: top;" width="13" height="13" alt=""></a></div><form action="#" style="margin: 0px; padding: 0px;"><div style="padding: 10px;"><b style="font-size: 18px;">Kody i dodatki html</b><br><br>Wybierz kod, kt�ry najabardziej Ci odpowiada, mo�esz zamie�ci� go na swoim blogu stronie lub forum.<br><br><b>Link html do zamieszczenia na stronie, blogu:</b><br><textarea name="url_html" class="area" onclick="this.focus();this.select();" cols="80" rows="1" style="border: 2px solid #C0C0C0;">&lt;a href="http://hostuje.net/file.php?id=c4f50ccefcd1c83e2a48374db4644a0a" title="Stupid Fresh- Spam Javelin Original.mp3"&gt;Stupid Fresh- Spam Javelin Original.mp3&lt;/a&gt;</textarea><br><b>Link BBcode do zamieszczenia na forum:</b><br><textarea name="url_html" class="area" onclick="this.focus();this.select();" cols="80" rows="1" style="border: 2px solid #C0C0C0;">[url=http://hostuje.net/file.php?id=c4f50ccefcd1c83e2a48374db4644a0a]Stupid Fresh- Spam Javelin Original.mp3[/url]</textarea></div></form></div></div><div id="okno2"><div class="tlo"></div><div class="content"><div align="right" class="head"><div class="title">Dodaj komentarz</div><a onclick="hide('okno2'); return false;" href="#" style="color: #f2f2f2;">zamknij <img src="images/zamknij2.gif" border="0" style="vertical-align: top;" width="13" height="13" alt=""></a></div><div style="padding: 10px;"><b style="font-size: 18px;">Zaloguj si� aby m�c dodawa� komentarze...</b><br><br>Nie masz jeszcze konta w Hostuje.net? <a href="rejestracja.php" style="text-decoration:underline">Za��� je tutaj za darmo</a>.<br><br></div></div></div>
</center>

<!-- cXense script begin -->
<div id="cX-root" style="display:none"></div>
<script type="text/javascript">
    ����var cX = cX || {}; cX.callQueue = cX.callQueue || [];
    ����cX.callQueue.push(['setAccountId', '9222291968715707916']);
    ����cX.callQueue.push(['setSiteId', '9222291968715707918']);
    ����cX.callQueue.push(['sendPageViewEvent']);
</script>
<script type="text/javascript">
    ����(function() { try { var scriptEl = document.createElement('script'); scriptEl.type = 'text/javascript'; scriptEl.async = 'async';
    ����scriptEl.src = ('https:' == document.location.protocol) ? 'https://scdn.cxense.com/cx.js' : 'http://cdn.cxense.com/cx.js';
    ����var targetEl = document.getElementsByTagName('script')[0]; targetEl.parentNode.insertBefore(scriptEl, targetEl); } catch (e) {};} ());
</script>
<!-- cXense script end -->

</body>
</html> <!-- 0.0020761489868164 --> 
```

另一个更新（r.request.headers 和 r.request.body）

```
{'Content-Length': u'164', 'Accept-Encoding': 'gzip, deflate, compress', 'Accept': '*/*', 'User-Agent': 'python-requests/1.2.0 CPython/2.7.3 Linux/3.2.0-39-generic', 'Cookie': 'PHPSESSID=teir11avhfk543aapcmmgrn2a5', 'Content-Type': 'application/x-www-form-urlencoded'} 

OK=1&name=Stupid+Fresh-+Spam+Javelin+Original.mp3&k=n4.hostuje.org&id=c4f50ccefcd1c83e2a48374db4644a0a&mime=audio%2Fmpeg&hasz=c4f50ccefcd1c83e2a48374db4644a0a&REG=1 
```

# php - 使用 PHP 和 MYSQL 创建数据透视表 - 当前显示的表重复标签

> ID：15794439
> 
> 赞同：0
> 
> 时间：2013-04-03T17:49:51.817
> 
> 标签：php, mysql, pivot-table

我希望就如何修改我的 PHP 代码以在 HTML 中显示数据透视表获得一些帮助。现在它会在每一行上创建一个包含 Location、Component 和 Count 的表，但我宁愿将 Location 作为列标题，将组件作为行标题，其中 count 是数据。

这是我的代码：

```
function print_table_commodity_location_count_inbd_pivot(){
    $query_items = "SELECT `tbl_origin_dest`.`name` AS 'Location',
                    `tbl_component`.`component_name` AS 'Component',
                    COUNT(`tbl_entry_item`.`entry_item_id`) AS 'Comp_Count'
            FROM tbl_entry
                LEFT JOIN tbl_entry_item ON `tbl_entry`.`entry_id`=`tbl_entry_item`.`entry_id`
                LEFT JOIN tbl_customer ON `tbl_entry`.`customer_id`=`tbl_customer`.`customer_id`
                LEFT JOIN tbl_serv_prov ON `tbl_entry`.`serv_prov_id`=`tbl_serv_prov`.`serv_prov_id`
                LEFT JOIN tbl_origin_dest ON `tbl_entry`.`location`=`tbl_origin_dest`.`id`
                LEFT JOIN tbl_project ON `tbl_entry`.`project_id`=`tbl_project`.`project_id`
                LEFT JOIN tbl_component ON `tbl_entry_item`.`component_id`=`tbl_component`.`component_id`
            WHERE `tbl_entry`.`in_out_type`='I' AND `outbound_entry_id` IS NULL AND `outbound_entry_item_id` IS NULL
            GROUP BY `tbl_origin_dest`.`name`,
                    `tbl_component`.`component_name`";                  

    $result_items=mysql_query($query_items);
    $num_items=mysql_numrows($result_items);

    echo "<table style=\"background-color: silver;\" border=\"1\" cellpadding=\"1\" cellspacing=\"1\">
        <tbody>
            <tr>
                <td><font face=\"Arial, Helvetica, sans-serif\">Location</font></td>
                <td><font face=\"Arial, Helvetica, sans-serif\">Component</font></td>
                <td><font face=\"Arial, Helvetica, sans-serif\">Inventory Count</font></td>
            </tr>"; 
    $x=0;
    while ($x < $num_items) {
        $x1=mysql_result($result_items,$x,"Location");
        $x2=mysql_result($result_items,$x,"Component");
        $x3=mysql_result($result_items,$x,"Comp_Count");

        echo "<tr>
            <td><font face=\"Arial, Helvetica, sans-serif\">".$x1."</font></td>
            <td><font face=\"Arial, Helvetica, sans-serif\">".$x2."</font></td>
            <td><font face=\"Arial, Helvetica, sans-serif\">".$x3."</font></td>
        </tr>";

        $x++;
    }
    echo "</table>";
} 
```

截至目前的结果显示每行的位置 - 组件 - 计数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T18:37:26.140

```
function print_table_commodity_location_count_inbd_pivot(){
    $query_items = "SELECT `tbl_origin_dest`.`name` AS 'Location',
                    `tbl_component`.`component_name` AS 'Component',
                    COUNT(`tbl_entry_item`.`entry_item_id`) AS 'Comp_Count'
            FROM tbl_entry
                LEFT JOIN tbl_entry_item ON `tbl_entry`.`entry_id`=`tbl_entry_item`.`entry_id`
                LEFT JOIN tbl_customer ON `tbl_entry`.`customer_id`=`tbl_customer`.`customer_id`
                LEFT JOIN tbl_serv_prov ON `tbl_entry`.`serv_prov_id`=`tbl_serv_prov`.`serv_prov_id`
                LEFT JOIN tbl_origin_dest ON `tbl_entry`.`location`=`tbl_origin_dest`.`id`
                LEFT JOIN tbl_project ON `tbl_entry`.`project_id`=`tbl_project`.`project_id`
                LEFT JOIN tbl_component ON `tbl_entry_item`.`component_id`=`tbl_component`.`component_id`
            WHERE `tbl_entry`.`in_out_type`='I' AND `outbound_entry_id` IS NULL AND `outbound_entry_item_id` IS NULL
            GROUP BY `tbl_origin_dest`.`name`,
                    `tbl_component`.`component_name`";                  

    $result_items=mysql_query($query_items);
        $locationArray = array();
        $components = array()
        echo '<table style=\"background-color: silver;\" border=\"1\" cellpadding=\"1\" cellspacing=\"1\">
                <tbody><tr><td></td>';
        $locations = array();
                while($row = mysql_fetch_assoc($result_items)){
        //create an array with all the locations
        if(!in_array($row['Location'], $locations){
        $locations[] = $row['Location'];
        }
        //create an array for every component and the count at a location
        $components[$row['Component']][$row['Location']] = $row['Comp_count'];

        }
            //create the first row columnns (header)
            foreach($locations as $location){
            echo '<td>'.$location.'</td>'
            }
            echo '</tr>';
            foreach($components as $component => $componentLocations){
                echo '<tr><td>'.$component.'</td>';
                foreach($locations as $loc){
                    //if there is no component at this location
                if(!array_key_exists($loc, $componentLocations)){
                echo '<td>0</td>';
                }else{
                echo '<td>'.$componentLocations[$loc].'</td>';
                }
                }
            echo .'</tr>';
            }
     echo '</tbody></table>'; 
```

应该是这样

# sql - 查询以最小值和最大值表示百分比

> ID：15794441
> 
> 赞同：0
> 
> 时间：2013-04-03T17:50:01.393
> 
> 标签：sql, sql-server, oracle

我有一列包含一些值：

```
价值观
 10
 20
 30
 40
 50

```

我需要一个基本上会给我两列这样的查询：

```
值百分比值
10 0
20 倍
30 岁
40z
50 100

```

计算值的方式是这样的：10( `min`) 被认为是 0 %，而 50( `max`) 被认为是 100%。所以 x 与 10 的差值为`min`：

```
x= 100/(50-10) * 10 = 25 
```

PS：理想情况下，我希望有一个可以在 Oracle 和 SQL Server 中运行的查询。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T17:53:15.323

您可以使用窗口函数执行此操作：

```
select t.value,
       (value - minvalue) * 100.0/(maxvalue - minvalue) 
from (select t.*,
             min(value) over () as minvalue,
             max(value) over () as maxvalue
      from t
     ) t 
```

您可以使用显式连接执行相同的操作：

```
select t.value,
       (value - minvalue) * 100.0/(maxvalue - minvalue) 
from t cross join
     (select min(value) as minvalue, max(value) as maxvalue
      from t
     ) const 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-03T17:51:34.897

```
select  100.0 / (maxval - minval) * ([Values] - minval)
from    (
        select  *
        ,       min([Values]) over () as minval
        ,       max([Values]) over () as maxval
        from    Table1
        ) SubQuerALias 
```

[SQL Fiddle 的示例。](http://sqlfiddle.com/#!6/f9321/7/0)

# twitter-bootstrap - 如何调整移动设备上的按钮大小？

> ID：15794452
> 
> 赞同：0
> 
> 时间：2013-04-03T17:50:43.100
> 
> 标签：twitter-bootstrap

我正在尝试使用 twitter bootstrap 创建一个响应式应用程序。
我添加了一个带有几个下拉菜单和 2 个搜索按钮的搜索栏。
我想在浏览器（桌面）中显示带有内嵌元素的栏，并在移动设备上显示时最大化每个字段的大小。

我对桌面版没有任何问题：

![在此处输入图像描述](https://i.stack.imgur.com/SOihX.png)

但是当调整窗口大小（移动）时，我无法实现我想要的

![在此处输入图像描述](https://i.stack.imgur.com/vEbWU.png)

下拉菜单还可以，但我不知道如何使用搜索按钮产生相同的效果。
我的下拉列表`span2`定义了一个类。我可以对按钮使用相同的类吗？
在我的实验开始时，我使用的是导航栏，但我无法实现我想要的。

这里有一些 HTML：

```
 <div class="container">
        <form action="/Home/Search" id="formSearchServices" method="post" class="form-inline">
            <input id="SearchViewModel_SearchText" name="SearchViewModel.SearchText" type="hidden" value="" />

            <div class="row-fluid">
                <select class="selectpicker span2" id="SearchViewModel_Select1" name="SearchViewModel.Select1">
                    <option value="0">** Choose **</option>
                    <option value="1">Option1</option>
                </select>
                <select class="selectpicker span2" id="SearchViewModel_Select2" name="SearchViewModel.Select2">
                    <option value="0">** Choose **</option>
                    <option value="1">Option1</option>
                </select>
                <select class="selectpicker span2" id="SearchViewModel_Select3" name="SearchViewModel.Select3">
                    <option value="0">** Choose **</option>
                    <option value="1">Option1</option>
                </select>
                <select class="selectpicker span2" id="SearchViewModel_Select4" name="SearchViewModel.Select4">
                    <option value="0">** Choose **</option>
                </select>
                <select class="selectpicker span2" id="SearchViewModel_Select5" name="SearchViewModel.Select5">
                    <option value="0">** Choose **</option>
                </select>
                <button type="submit" class="btn btn-inverse span1">Search</button>
                <a class="btn btn-small btn-info" data-toggle="collapse" href="#AdvancedSearch">Advanced search</a>

            </div>
            <div id="AdvancedSearch" class="collapse span12">

            </div>
        </form>
    </div> 
```

我为此创建了一个[小提琴](http://jsfiddle.net/vandalo/TYNsB/)。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T18:12:25.140

您熟悉如何在 Bootstrap 响应式中使用媒体查询吗？在某个点以下，这些按钮被设置为 100% 宽度。您只需要根据需要覆盖。

[http://jsfiddle.net/isherwood/TYNsB/1/](http://jsfiddle.net/isherwood/TYNsB/1/)

```
[class*="span"], .uneditable-input[class*="span"], .row-fluid[class*="span"] {
    width: 100px !important;
} 
```

在这里，我已经使用 !important 将我的覆盖设置到位，但是您应该真正调整媒体查询以在各种大小下执行您想要的操作。这只是为了让你开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T10:35:32.180

我决定不使用常规导航栏，而是创建一个自定义导航栏。

```
 <div class='searchbar'>
        <div class='searchbar-inner'>
            <div class='container'>
                <ul class="nav">
                    <li>
                        <select class="selectpicker span2" id="SearchViewModel_Select1" name="SearchViewModel.Select1">
                            <option value="0">** Choose **</option>
                            <option value="1">Option1</option>
                        </select>
                    </li>
                    <li>
                        <select class="selectpicker span3" id="SearchViewModel_Select2" name="SearchViewModel.Select2">
                            <option value="0">** Choose **</option>
                            <option value="1">Option1</option>
                        </select>
                    </li>
                    <li>
                        <button type="submit" class="btn btn-inverse">
                            Search
                        </button>
                    </li>
                    <li>
                        <button type="button" class="btn collapsed btn-small btn-info" data-toggle="collapse" href="#AdvancedSearch">
                            Advanced search 
                        </button>
                    </li>                       
                </ul>
            </div>
        </div>
    </div> 
```

这是CSS：

```
.searchbar {
    overflow: visible;
    margin-bottom: 5px;
    *position: relative;
    *z-index: 2;
}

.searchbar-inner {
    min-height: 40px;
    padding-left: 20px;
    padding-right: 20px;
    .clearfix();
}

.searchbar .container {
    width: auto;
}

.searchbar .nav > li {
    float: left;
}

.searchbar .nav > li {
    padding: 5px 5px 5px 5px;
}

@media only screen and (max-width: 767px) {
    .searchbar .nav > li {
        float: none;
        display: block;
        width: 100%;
        margin-left: 0;.box-sizing(border-box);
        padding: 0;
    }

    .searchbar .nav > li > button.btn, input[type="submit"].btn {
        float: none;
        display: block;
        width: 100% !important;
    }

    .searchbar .nav > li > [class*="span"], .uneditable-input[class*="span"], .row-fluid [class*="span"] {
        -moz-box-sizing: border-box;
        display: block;
        float: none;
        margin-left: 0;
        width: 100%;
    }

} 
```

这是工作小提琴[this](http://jsfiddle.net/vandalo/TYNsB/)。

# android - 从 DialogFragment 调用 Activity.method() 而不是设置侦听器的更简单方法是否存在一些弱点？

> ID：15794455
> 
> 赞同：1
> 
> 时间：2013-04-03T17:51:09.980
> 
> 标签：android, android-activity, uri, android-orientation, dialogfragment

用户请求删除文件后（通过上下文菜单），会触发 DialogFragment 要求用户确认。如果用户确实确认，则调用 Activity 会删除该文件。

至少有两种方法可以做到这一点。

1.  DialogFragment 调用 deleteFile()，Activity 中的一个方法，它本身可以通过 getActivity() 访问。
2.  Activity 实现了一个 DeleteFile 接口。DialogFragment 设置一个Uri，将监听器初始化为Activity，并向监听器发送消息。为了更加安全，onAttach() 确认 Activity 确实实现了必要的接口。

该[文档](http://developer.android.com/guide/components/fragments.html#EventCallbacks)表明，第二个选项更好，至少在一般情况下。但在这种情况下，无论用户何时触发旋转（重置 Activity 和 DialogFragment），第一种方法似乎都非常可靠。

第一种方法是否完全足够，或者是否存在除了轮换之外的其他方案可以使第二种方法更好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T18:46:44.957

两种实现都可以完成您想要做的事情，但两者之间肯定存在一些差异。在大多数情况下，接口并不是完全“必需的”，您始终可以强制转换为具体类并调用方法。接口提供的好处在于解耦。如果您使用接口，`DialogFragment`则不会绑定到特定的`Activity`. Any`Activity`可以实现相同的接口并与 . 一起使用`DialogFragment`，从而使其`Fragment`更可重用（这是片段的一半）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T18:01:51.653

我想说这两种实现是等价的，因为它们都要求活动遵守特定的合同（第一种情况下的类，第二种情况下的接口）。您无法避免将活动转换为特定的接口/类。

您可以尝试的另一种方法是在片段本身中实现（大部分）逻辑。我不知道它是否适合您的情况，但它肯定会帮助您重用该片段。也许它不太适合对话片段..

# c# - naudio DataAvailable 编译错误

> ID：15794464
> 
> 赞同：1
> 
> 时间：2013-04-03T17:51:39.667
> 
> 标签：c#, vb.net, naudio

我试图理解为什么下面的代码（**waveInStream.DataAvailable**）：

```
Private Sub cmbRecord_Click(sender As Object, e As EventArgs)
    Dim saveFileDialog As New SaveFileDialog()
    saveFileDialog.Title = "Select output file:"
    saveFileDialog.Filter = "WAV Files (*.wav)|*.wav"
    saveFileDialog.FileName = outputFilename

    If saveFileDialog.ShowDialog() = DialogResult.OK Then
        outputFilename = saveFileDialog.FileName

        waveInStream = New WaveIn(44100, 2)
        writer = New WaveFileWriter(outputFilename, waveInStream.WaveFormat)
        waveInStream.DataAvailable += New EventHandler(Of WaveInEventArgs)(AddressOf waveInStream_DataAvailable)
        waveInStream.StartRecording()

        ' Just controling the objects on the screen.
        cmbRecord.Enabled = False
        cmbStop.Enabled = True
    End If
End Sub 
```

给我错误：

```
Error 1 'Public Event DataAvailable(sender As Object, e As NAudio.Wave.WaveInEventArgs)'
is an event, and cannot be called directly. Use a 'RaiseEvent' statement to raise an event. 
```

我正在使用[此处的示例将上面的代码从 c# 转换为 VB.net](http://naudio.codeplex.com/)

转换为VB的c#是这样的：

```
private void cmbRecord_Click(object sender, EventArgs e)
    {
        SaveFileDialog saveFileDialog = new SaveFileDialog();
        saveFileDialog.Title = "Select output file:";
        saveFileDialog.Filter = "WAV Files (*.wav)|*.wav";
        saveFileDialog.FileName = outputFilename;
        if (saveFileDialog.ShowDialog() == DialogResult.OK)
        {
            outputFilename = saveFileDialog.FileName;

            waveInStream = new WaveIn(44100,2);
            writer = new WaveFileWriter(outputFilename, waveInStream.WaveFormat);

            waveInStream.DataAvailable += new EventHandler<WaveInEventArgs>(waveInStream_DataAvailable);
            waveInStream.StartRecording();

            // Just controling the objects on the screen.
            cmbRecord.Enabled = false;
            cmbStop.Enabled = true;
        }
    } 
```

任何帮助都会很棒！

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T17:58:53.080

尝试更换

```
waveInStream.DataAvailable += New EventHandler(Of WaveInEventArgs)(AddressOf waveInStream_DataAvailable) 
```

和

```
AddHandler waveInStream.DataAvailable, AddressOf waveInStream_DataAvailable 
```

# regex - 正则表达式数字范围多个范围

> ID：15794466
> 
> 赞同：0
> 
> 时间：2013-04-03T17:51:41.770
> 
> 标签：regex, xsd

我不太擅长正则表达式，有人可以帮助我使用这些规范的正则表达式：

0-365 或 888 之间的任何整数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T20:43:41.977

考虑到澄清，我发现这个问题真的很有趣。如果考虑 XSD 中数字的词法表示可以是什么，那么存在只有正则表达式才能做到的合法模式。例如，要求可能是禁止前导零。

当然，对于这种情况，可以针对正则表达式提出更多论据；如果我们从字面上理解问题所要求的，`any number`那么浮点数、双精度数和小数（有点）会增加复杂性。所以，让我们假设任何**整数**。

我没有花太多时间优化模式，更多地专注于使其可读，但我在下面展示了它（在 XSD 中，模式是隐含锚定的开始和结束），以及用于测试各种实现的其他选项。 .

```
<?xml version="1.0" encoding="utf-8" ?>
<!-- XML Schema generated by QTAssistant/XSD Module (http://www.paschidev.com) -->
<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <xsd:element name="test">
        <xsd:complexType>
            <xsd:attribute name="pattern">
                <xsd:simpleType>
                    <xsd:restriction base="xsd:unsignedInt">
                        <xsd:pattern value="0*([1-2]*[0-9]{1,2}|3[0-4][0-9]|35[0-6]|888)"/>
                    </xsd:restriction>
                </xsd:simpleType>
            </xsd:attribute>
            <xsd:attribute name="uint">
                <xsd:simpleType>
                    <xsd:restriction base="xsd:unsignedInt"/>
                </xsd:simpleType>
            </xsd:attribute>
            <xsd:attribute name="other">
                <xsd:simpleType>
                    <xsd:union>
                        <xsd:simpleType>
                            <xsd:restriction base="xsd:unsignedInt">
                                <xsd:enumeration value="888"/>
                            </xsd:restriction>
                        </xsd:simpleType>
                        <xsd:simpleType>
                            <xsd:restriction base="xsd:unsignedInt">
                                <xsd:maxInclusive value="356"/>
                            </xsd:restriction>
                        </xsd:simpleType>
                    </xsd:union>
                </xsd:simpleType>
            </xsd:attribute>
        </xsd:complexType>
    </xsd:element>
</xsd:schema> 
```

还有一些 XML：

```
<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<!-- Sample XML generated by QTAssistant (http://www.paschidev.com) -->
<test pattern="0000356" uint="0000888" other="0356"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-07-22T11:06:12.510

**试试这个模式：**

```
\b([0-9]|[1-8][0-9]|9[0-9]|[12][0-9]{2}|3[0-5][0-9]|36[0-5])\b|888 
```

你可以[在线测试](http://regexstorm.net/tester)

[![在此处输入图像描述](https://i.stack.imgur.com/gjNBx.png)](https://i.stack.imgur.com/gjNBx.png)

# html - 将 CSS 导航栏颜色拉伸到屏幕边缘

> ID：15794470
> 
> 赞同：0
> 
> 时间：2013-04-03T17:51:51.733
> 
> 标签：html, css

我的导航栏是 1024px 并且浮动在屏幕中间。我试图将导航栏的颜色一直带到屏幕的左侧。在导航栏的右侧，我想将 5px 的橙色一直带到屏幕的右侧。

```
.orangebar {
    background-color:#f36f21;
    height:5px;
} 
```

我在 jsFiddle 中创建了这个问题的简化版本（用于快速编辑）。 [http://jsfiddle.net/CKZhV](http://jsfiddle.net/CKZhV)

**试图实现这一目标：** ![在此处输入图像描述](https://i.stack.imgur.com/HqtX5.jpg)

**问题图片：** ![在此处输入图像描述](https://i.stack.imgur.com/bCIt3.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T17:57:22.377

问题是，菜单溢出`<body/>`并且`<html/>`. 结果，您`.orangebar`只使用宽度为`<body/>`窗口宽度的宽度。这就是为什么滚动时看不到其余部分的原因。

你可以给它一个`min-width`：

```
.orangebar {
    min-width: 1024px;
} 
```

基本上我不建议这样做，但是由于您的菜单已经有了固定的宽度，所以没关系。

这是[您的小提琴的更新](http://jsfiddle.net/CKZhV/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T17:59:52.387

**工作版本： http:** [//jsfiddle.net/CKZhV/3/](http://jsfiddle.net/CKZhV/3/)（根据您的输入查看更新）

将此重置添加到您的 CSS：

```
* {
    margin: 0;
    padding: 0;
} 
```

看到你更新的照片现在你的问题很清楚了。根据您的新输入编辑我的答案。

你最好给容器一个最小宽度而不是一个固定的 1024px 宽度，并添加一个与菜单栏匹配的背景颜色。

然后您可以将其浮动到左侧并将其内容浮动到右侧。你不再需要`margin:0 auto;`了。

**这是一个更新的工作版本：http:** [//jsfiddle.net/CKZhV/10/](http://jsfiddle.net/CKZhV/10/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T18:22:37.677

我编辑了你的小提琴[http://jsfiddle.net/kevinPHPkevin/CKZhV/6/](http://jsfiddle.net/kevinPHPkevin/CKZhV/6/)

```
#navbar {
    width:50%;
    text-align:right;
    float:right;
    background:#14325c;
    color:#fff;
} 
```

修改[http://jsfiddle.net/kevinPHPkevin/CKZhV/8/](http://jsfiddle.net/kevinPHPkevin/CKZhV/8/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T18:24:57.030

我不得不使用 jQuery 来使它工作。

总结：我没有使用`margin`使菜单居中，而是调整了 ，`padding-left`以便它可以携带`background-color`. 我还更改了一些 css，但与 js.js 相比，这并不重要。

```
<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title></title>
    <meta name="description" content="">
    <meta name="keywords" content="">
    <style>
                * {
                        margin:0;
                        padding:0;
                }
                .orangebar {
                        border-top:#f36f21 solid 5px;
                        width:100%;
                }
                #navbar {
                        width:20%;
                        background:#14325c;
                        height:39px;
                        margin:-5px 0 0 0;
                }
                .main-nav {
                        width:100%;
                        position:realtive;
                        background:#14325c;
                }
                .main-nav ul {
                        text-align:left;
                        display:block;
                        margin:0 auto;
                        padding:0;
                        list-style:none;
                        width:1024px;
                }
                .main-nav ul li {
                        display:inline-block;
                        margin:0;
                        position:relative;
                        padding:10px 20px 10px 20px;
                        background:#14325c;
                        color:#fff;
                        cursor:pointer;
                        float:left;
                }
                .main-nav ul li:hover {
                        text-decoration:none;
                        background:#afb1b4;
                        color:#fff;
                }
                .main-nav ul li ul {
                        padding:0;
                        position:absolute;
                        top:34px;
                        left:0;
                        width:233px;
                        margin:0;
                        display:none;
                }
                .main-nav ul li:hover ul {
                        display:block;
                }
                .main-nav ul li ul li {
                        background:#afb1b4;
                        display:block;
                        color:#fff;
                }
                .main-nav ul li ul li:hover {
                        background:#d5d6d8;
                        color:#F36F21;
                        -moz-box-shadow:0px 2px 5px 2px rgba(119, 119, 119, 0.5);
                        -webkit-box-shadow:0px 2px 5px 2px rgba(119, 119, 119, 0.5);
                        box-shadow:0px 2px 5px 2px rgba(119, 119, 119, 0.5);
                }
        </style>
  </head>
  <body>
    <div class="orangebar">
    <div id="navbar">
        <!-- Navbar -->
        <nav class="main-nav">
            <ul>
                <li>BOARD OF TRUSTEES
                    <ul>
                        <li>Board Policy Manual</li>
                        <li>Monitoring Reports</li>
                        <li>Monthly Board Packets</li>
                    </ul>
                </li>
                <li>RESOURCES
                    <ul>
                        <li>Academics</li>
                        <li>Student Services</li>
                        <li>Human Resources</li>
                        <li>Business Office</li>
                    </ul>
                </li>
            </ul>
        </nav>
    </div>
    <!-- End Navbar -->
</div>
<!-- End Orangebar -->
        <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script>
            $(function(){
                setLayout();
                $(window).resize(setLayout);
            });
            var setLayout = function(){
                $('#navbar').css({"padding-left": ($(window).width() - 1024) / 2 + 'px'});
            }
    </script>
  </body>
</html> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-03T18:28:36.663

检查这个[小提琴](http://jsfiddle.net/anpsmn/CKZhV/4/)。我给了 .main-nav 50% 的宽度和背景颜色。这个小提琴有效，但它并没有像父 div 那样一直到屏幕`margin: 0 auto`。

如果您删除边距，那么您可能会得到所需的解决方案。见[小提琴](http://jsfiddle.net/anpsmn/CKZhV/7/)

# jquery - 将 Jquery Raty 插件与文本正确对齐

> ID：15794471
> 
> 赞同：2
> 
> 时间：2013-04-03T17:51:56.070
> 
> 标签：jquery, css, ruby-on-rails, jquery-plugins, raty

我目前正在开发一个预约安排系统，该系统有一个用于审查的部分供实践使用。我正在使用 Jquery Rate 插件根据用户提交的反馈填充星星。我已经尝试了所有可能的方法来将星星与文本和图像对齐。请参阅随附的屏幕截图：

![在此处输入图像描述](https://i.stack.imgur.com/53GwJ.png)

我试图让“等待时间”下的星星与我的图像对齐。图像添加到此页面，如下所示：

```
<%= image_tag("review_img_03.png",style:"margin:0px 4px 0px 4px;vertical-align:text-top") %> 
```

有人能指出我正确的方向吗？我应该如何实现这一目标？我已经尝试了 CSS 中的每一件事来实现这一点，但它们都不起作用。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-07-02T00:11:56.507

我的朋友遇到了同样的问题，找到了解决方法。请注意，如果您的网站允许动态文本大小（或者如果用户在浏览器上更改文本大小），那么这更像是一种破解而不是修复，那么它可能会出现偏差。

在实际的 jRate div（或任何你有的）上，使用 vertical-align 属性稍微调整它。出于我的目的：

```
#jRate {
      vertical-align: -3px;
} 
```

奇迹般有效。

支持所有浏览器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T17:59:56.833

您是否尝试过使用绝对定位？

```
Style = "position:absolute; top:-5px;left:15px;" 
```

只需调整顶部和左侧的值即可获得所需的星星。

如果将位置设为绝对，则父元素必须具有 position = relative。否则，星星将与页面正文对齐。

# jvectormap - jvectormap：在标记之间画线？

> ID：15794472
> 
> 赞同：7
> 
> 时间：2013-04-03T17:51:56.613
> 
> 标签：jvectormap

我正在尝试验证是否可以使用 jvectormap 在地图上的标记之间绘制线条。

这是我想要实现的目标：http: [//i.imgur.com/p1Zypv3.gif](http://i.imgur.com/p1Zypv3.gif)

有人可以给我一个提示，如果这是可行的，如果可以的话怎么办？

欣赏任何输入。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-09T04:26:56.267

这可以通过 Jvectormap、Jvectormaps 坐标转换器方法`latLngToPoint()`和 Jvectormap 顶部的 SVG 层的组合来完成。事实上，利用 SVG.js 作为 Jvectormap 之上的一个层，您几乎可以做任何可以用 SVG 做的事情，同时用经纬度坐标替换点。

您需要在页面标题中加载 Jvectormap、Jvectormap 地图文件、svg.js 和 svg.path.js 插件（请参阅[https://svgdotjs.github.io](https://svgdotjs.github.io)）。您还需要在一个中创建两个可以与 CSS 绝对设置重叠的 div。

```
<div id="mapContainer" style="position:relative">
    <div id="map" style="position:absolute;top:0px;left:0px"></div>
    <div id="svgMapOverlay" style="position:absolute;top:0px;left:0px"></div>
</div> 
```

创建一个带有纬度和经度的标记数组，用于在地图上绘制往返路线：

```
var markerArray = [
    {name:'Houston', latLng:[29.761993,-95.369568]},
    {name:'New York', latLng:[40.710833,-74.002533]},
    {name:'Kansas City', latLng:[39.115145,-94.633484]}
]; 
```

然后使用上面的标记设置您的 Jvectormap：

```
var map = $('#map').vectorMap({
    map: 'us_aea_en',
    zoomMin: 1,
    zoomMax: 1,
    markers: markerArray
}); 
```

最后，将您的地图作为一个对象调用，创建您的 SVG 图层，将经纬坐标转换为 div 内的点：

```
var map = $('#map').vectorMap('get', 'mapObject');
var draw = SVG('svgMapOverlay').size(660, 400);
var coords1 = map.latLngToPoint(markerArray[0].latLng[0],markerArray[0].latLng[1]);
var coords2 = map.latLngToPoint(markerArray[1].latLng[0],markerArray[1].latLng[1]);
draw.path().attr({ fill: 'none',stroke: '#c00', 'stroke-width': 2 }).M(coords1.x, coords1.y).L(coords2.x, coords2.y); 
```

这个 JS 的大部分应该进入一个`$(function()`调用或`$(document).ready(function()`块来启动。

您可以查看此 JSFiddle 了解更多详细信息：http: [//jsfiddle.net/ruzel/V8dyd/](http://jsfiddle.net/ruzel/V8dyd/)

免责声明：我不知道缩放会发生什么；在这个例子中它被关闭了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-12-20T13:46:00.133

最后，我尝试实现将 Lines 添加到 JVectorMap 的功能。SVG 的解决方案很好，但不适用于 Zoom、Move 和 Panzoom。所以我直接在 JVectorMap 中添加了指定 Lines 的选项，类似于 Regions 和 marker。您可以查看 Pull Request 的状态[https://github.com/bjornd/jvectormap/pull/431](https://github.com/bjornd/jvectormap/pull/431)，其中包含所有内容。现在您可以使用

`var lines = [ {points: [[50.0755,14.4378], [55.7558,37.6173]], text:"Prague - Moscow];`

尽管如此，拉取请求需要包含在新版本的 jvectormap 中，希望作者尽快完成 :) 工作代码在我的个人博客中：[https ://sevenhillsaway.com/map/](https://sevenhillsaway.com/map/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-19T04:00:27.103

所以我一直在尝试@russellmania 的答案。它只适用于 SVG 版本，它包含在 jsfiddle 链接中。如果我用实际版本的 SVG 尝试相同的代码，它会在 SVG 上崩溃，说“this.clear(...).attr”函数未定义。但是，对我来说，我希望 JVector 缩放和地图移动功能仍然有效。但是在地图上使用 SVG 图层时，它不起作用。或者可以说，有 2 个选项：1）禁用移动和缩放（我不想要这个）2）启用缩放、移动，但是 SWG 层不会像 JVector 那样缩放和移动，因此路径与地图不同步:)

我找到了一种使用标记在 JVector 中画线的方法。但这不是正确的方法。所以我还在浏览 jvectormap 文档，如果有什么方法可以直接在 jvectormap 中画线。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-12-16T10:55:31.507

```
var markerIndex=1;
var markerCoords=[];
latLng={72,62};
markersCoords[markerIndex] = latLng;
map.addMarker(markerIndex, {latLng: [latLng.lat, latLng.lng]});
markerIndex += 1;
```

# eclipse - 无法使用 Tomcat 7 在 Eclipse Juno 中运行 Vaadin 项目：抛出 ClassNotFoundException

> ID：15794473
> 
> 赞同：2
> 
> 时间：2013-04-03T17:52:03.933
> 
> 标签：eclipse, tomcat7, vaadin

我创建了一个基本的 Vaadin 项目（从它的模板，我什至没有编辑代码）。我在用：

*   瓦丁 6.8.9
*   雄猫 7
*   日蚀朱诺

Tomcat 抛出以下堆栈跟踪：

```
 HTTP Status 500 - Failed to load application class: com.example.addressbook.AddressbookApplication

    type Exception report

    message Failed to load application class: com.example.addressbook.AddressbookApplication

    description The server encountered an internal error that prevented it from fulfilling this request.

    exception

    javax.servlet.ServletException: Failed to load application class: com.example.addressbook.AddressbookApplication
        com.vaadin.terminal.gwt.server.ApplicationServlet.init(ApplicationServlet.java:71)
        org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
        org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
        org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:947)
        org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:408)
        org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1009)
        org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
        org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
        java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
        java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
        java.lang.Thread.run(Unknown Source) 
```

我的 web.xml 文件内容如下：

```
 <?xml version="1.0" encoding="UTF-8"?>
    <web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"        xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-       app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee        http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" id="WebApp_ID" version="3.0">
      <display-name>AddressBook</display-name>
      <context-param>
        <description>Vaadin production mode</description>
        <param-name>productionMode</param-name>
        <param-value>false</param-value>
      </context-param>
      <servlet>
        <servlet-name>Addressbook Application</servlet-name>
        <servlet-class>com.vaadin.terminal.gwt.server.ApplicationServlet</servlet-class>
        <init-param>
            <description>
            Vaadin application class to start</description>
            <param-name>application</param-name>
            <param-value>com.example.addressbook.AddressbookApplication</param-value>
        </init-param>
      </servlet>
      <servlet-mapping>
        <servlet-name>Addressbook Application</servlet-name>
        <url-pattern>/*</url-pattern>
      </servlet-mapping>
      <welcome-file-list>
        <welcome-file>index.html</welcome-file>
        <welcome-file>index.htm</welcome-file>
        <welcome-file>index.jsp</welcome-file>
        <welcome-file>default.html</welcome-file>
        <welcome-file>default.htm</welcome-file>
        <welcome-file>default.jsp</welcome-file>
      </welcome-file-list>
    </web-app> 
```

我不知道问题是什么......任何建议都非常感谢。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T21:45:08.997

尝试将 servlet-class 标记更改为：

```
<servlet-class>com.vaadin.server.VaadinServlet</servlet-class> 
```

# c# - 如何在服务或数据访问层设置 ObjectDataSourceStatusEventArgs？

> ID：15794474
> 
> 赞同：1
> 
> 时间：2013-04-03T17:52:04.600
> 
> 标签：c#, asp.net, objectdatasource

我正在使用`ObjectDataSource`对 执行 CRUD 操作`GridView`。当一个项目被删除时，我希望能够确保没有违反外键约束，如果是这样，在表示层中使用函数向用户显示一条`ObjectDataSourceStatusEventArgs`消息`ObjectDataSource Deleted`：

```
protected void ods_Deleted(object sender, ObjectDataSourceStatusEventArgs e)
{
    if (e.Exception != null)
    {
        // Display message that was set in either the service or data access layer
    }
} 
```

我认为可以在服务层或数据访问层中检查约束。

**服务层**

```
// This is the DeleteMethod used by the ObjectDataSource
[DataObjectMethod(DataObjectMethodType.Delete, true)]
public virtual bool Remove(Entity entity)
{
    bool CanDelete = functionToSeeIfAnythingIsUsingThisKey(entity.ID);
    if (CanDelete)
    {
        _repository.Remove(entity);
        return true;
    }
    else
    {
        // would like to populate ObjectDataSourceStatusEventArgs that are sent
        // back to the ObjectDataSource onDeleted function in Presentation layer
        return false;
    }
} 
```

**数据访问层**

```
public virtual void Remove(Entity entity)
{
    _session = NHibernateSessionProvider.GetSession();
    try
    {
        using (ITransaction transaction = _session.BeginTransaction())
        {
            _session.Delete(entity);
            transaction.Commit();
        }
    }
    catch
    {
        // database will throw an error if the constraint check fails,
        // which is caught here
    }
} 
```

我知道从服务层函数返回的任何内容都可以在`e.ReturnValue`返回到表示层时看到，但是是否可以设置其他成员`ObjectDataSourceStatusEventArgs`（即 AffectedRows、Exception、OutputParemters 等）？

# asp.net - 如何将标题文本更改为网格视图

> ID：15794479
> 
> 赞同：1
> 
> 时间：2013-04-03T17:52:18.220
> 
> 标签：asp.net

我在代码后面有 2 列我有这个：

```
 protected void Page_Load(object sender, EventArgs e)
    {

        string connectionString = cs.getConnection();
        string query = "SELECT ID , NAME FROM PROFITCATEGORIES";
        using (SqlConnection myConnection = new SqlConnection(connectionString))
        {
            myConnection.Open();
            SqlCommand command = new SqlCommand(query, myConnection);
            using (SqlDataReader rdr = command.ExecuteReader())
            {

                GridViewCategory.DataSource = rdr;
                GridViewCategory.DataBind();
GridViewCategory.Columns[0].HeaderText = "Header text"; // ERROR IS HERE

            }
        }

    } 
```

但这给了我一个错误：

```
Index was out of range. Must be non-negative and less than the size of the collection.
Parameter name: index 
```

错误在这一行： GridViewCategory.Columns[0].HeaderText = "Header text";

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-08T05:31:11.323

请试试这个。

```
protected void Page_Load(object sender, EventArgs e)
{
    string connectionString = cs.getConnection();
    string query = "SELECT ID , NAME FROM PROFITCATEGORIES";
    using (SqlConnection myConnection = new SqlConnection(connectionString))
    {
        myConnection.Open();
        SqlCommand command = new SqlCommand(query, myConnection);
        using (SqlDataReader rdr = command.ExecuteReader())
        {                
            GridViewCategory.DataSource = rdr;
            GridViewCategory.DataBind();

            if (GridViewCategory.Rows.Count > 0)
            {
                 GridViewCategory.HeaderRow.Cells[0].Text = "Header text";
            }

        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T18:08:56.433

在将其绑定到某个数据源之前，您将在 gridview 中没有列。尝试您的代码几乎没有变化

```
protected void Page_Load(object sender, EventArgs e)
{
    string connectionString = cs.getConnection();
    string query = "SELECT ID , NAME FROM PROFITCATEGORIES";
    using (SqlConnection myConnection = new SqlConnection(connectionString))
    {
        myConnection.Open();
        SqlCommand command = new SqlCommand(query, myConnection);
        using (SqlDataReader rdr = command.ExecuteReader())
        {                
            GridViewCategory.DataSource = rdr;
            GridViewCategory.DataBind();
            // Write this line after above two
            GridViewCategory.Columns[0].HeaderText = "Header text";
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T18:09:00.347

在将数据分配给 Columns[0] 的代码中，您没有 Columns，因为您尚未绑定 GridView。重新排列代码的顺序：

```
 using (SqlDataReader rdr = command.ExecuteReader())
        {
            GridViewCategory.DataSource = rdr;
            GridViewCategory.DataBind();
            If(GridViewCategory.Columns.Any())
               GridViewCategory.Columns[0].HeaderText = "Header text";
        } 
```

# c++ - 通过抛出字符串在 C++ 中进行异常处理

> ID：15794480
> 
> 赞同：5
> 
> 时间：2013-04-03T17:52:18.870
> 
> 标签：c++

我的程序如下：（在linux上）

```
// Ex. 2 of Exception Handling
// Here divn() raises the exception but main() will be the exception handler

#include<iostream>
using namespace std;

int divn(int n, int d)
{
    if(d == 0)
        throw "Division by ZERO not possible ";

    return n/d;
}

main()
{
    int numer, denom;
    cout << "Enter the numerator and denominator : ";
    cin >> numer >> denom;
    try
    {
        cout << numer << " / " << denom << " = " << divn(numer,denom) << endl;
    }
    catch(char *msg)
    {
        cout << msg;
    }
    cout << "\nEnd of main() \n ";
} 
```

/*当我们将分母设为0时，它应该抛出异常并提供给定的错误消息。当我输入分母为0时得到的输出如下：

> 管理员@ubuntu:~/FYMCA/CPP_class$ g++ prog110.cpp administrator@ubuntu:~/FYMCA/CPP_class$ ./a.out 输入分子和分母： 12 0 在抛出 'char const*' 实例后终止调用已中止（核心转储）

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-03T17:54:42.887

字符串文字有 type `char const[]`，衰减到`char const*`. 您应该`catch`相应地调整您的处理程序：

```
catch (char const* msg)
//          ^^^^^
{
    cout << msg;
} 
```

这是一个[活生生的例子](http://liveworkspace.org/code/4zgAes%242)。

最后，这是一种更好的重写程序的方法，使用 C++ 标准库中的异常类：

```
#include <iostream>
#include <stdexcept>
//       ^^^^^^^^^^^ For std::logic_error

int divn(int n, int d)
{
    if(d == 0)
    {
        throw std::logic_error("Division by ZERO not possible ");
        //    ^^^^^^^^^^^^^^^^
        //    Throw by value
    }

    return n/d;
}

int main() // <== You should specify the return type of main()!
{
    // Rather use these than "using namespace std;"
    using std::cout;
    using std::cin;
    using std::endl;

    int numer, denom;
    cout << "Enter the numerator and denominator : ";
    cin >> numer >> denom;

    try
    {
        cout << numer << " / " << denom << " = " << divn(numer,denom) << endl;
    }
    catch(std::logic_error const& err)
    //    ^^^^^^^^^^^^^^^^^^^^^^^
    //    Catch by reference
    {
        cout << err.what();
        //      ^^^^^^^^^^
    }

    cout << "\nEnd of main() \n ";
} 
```

当然还有相应的[活生生的例子](http://liveworkspace.org/code/4zgAes%246)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T17:54:50.677

异常消息有点说，你抓错了类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T17:54:25.640

您不应该以这种方式抛出异常。一个好的做法是在 stdexcept 库中使用标准异常，例如 std::runtime_error 或 std::logic 错误，或者基于 std::exception 创建自己的异常类

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-03T17:59:35.800

一个简单的解决方法是在顶部添加一条语句，如下所示：

```
char * err = "Division by ZERO not possible"; 
```

然后，将您的更改`throw`为`throw err;`

它与编译器如何为字符串文字分配存储空间有关。

# python - 使用 Python 进行网页抓取

> ID：15794482
> 
> 赞同：3
> 
> 时间：2013-04-03T17:52:26.327
> 
> 标签：python, web-scraping, mechanize

我正在使用这个网站 ( [http://gasbuddy.com/](http://gasbuddy.com/) ) 来收集汽油价格。基本上，我想编写一个 python 脚本，将邮政编码输入到页面顶部的搜索框中，然后从下一页刮掉结果。我被困在第一步，即在表单中输入我想要的邮政编码。这是我到目前为止所拥有的：

```
from mechanize import Browser
import urllib2

br = Browser()
baseURL = "http://www.gasbuddy.com/"
br.open(baseURL)

zipcode = "20010"

forms = [f for f in br.forms()]
print forms[0]
control = forms[0].find_control("ctl00$Content$GBZS$txtZip")
forms[0]["ctl00$Content$GBZS$txtZip"] = "20010"
br.form = forms[0]
page = br.submit()
content = page.read()
br.geturl() 
```

不幸的是，当我提交表单时，br.geturl() 告诉我我没有到达我想要的页面（网址应该类似于“ [http://www.washingtondcgasprices.com/index.aspx?area=华盛顿%20-%20NE&area=华盛顿%20-%20NW&area=华盛顿%20-%20SE&area=华盛顿%20-%20SW](http://www.washingtondcgasprices.com/index.aspx?area=Washington%20-%20NE&area=Washington%20-%20NW&area=Washington%20-%20SE&area=Washington%20-%20SW) ")

如果您有任何指导，我将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-02T16:14:31.037

你可以用 Selenium 做到这一点：

```
from selenium import webdriver
from selenium.webdriver.common.keys import Keys

baseURL = "http://www.gasbuddy.com/"

browser = webdriver.Firefox()
zipcode = "20010"

browser.get(baseURL)
elem = browser.find_element_by_id("ctl00_Content_GBZS_txtZip").send_keys(zipcode)
elem = browser.find_element_by_id("ctl00_Content_GBZS_btnSearch").click() 
```

如果您想坚持机械化，您可能需要稍微调整一下您的浏览器。但我仍然怀疑是 javascript 在那里杀死了你。然后解决方案将是[“自己阅读 javascript 并通过机械化模拟它会做什么”](https://stackoverflow.com/questions/1806238/mechanize-python-click-a-button)。

# javascript - 使用 for 代替 .each()

> ID：15794484
> 
> 赞同：1
> 
> 时间：2013-04-03T17:52:30.373
> 
> 标签：javascript, jquery, loops, for-loop, each

我的假设是 .each() 函数在处理大量元素时比 for 循环慢。

我的问题是 for 循环我无法在循环遍历元素时对其进行操作。我可以用 .each() 很好地做到这一点。这可能是一个简单的答案。

Javascript：

```
var element = $('#element h3');
var length = element.length;
var newHtml;

for(i=0;i<length;i++){

  newHtml = element[i].html();

  ...test newHtml
} 
```

当我尝试抓取元素的 .html() 时，代码会中断。我看过一些帖子，解释这是用 for 循环遍历元素的方法，但从未解决从它们中获取信息和操作它们的问题。

任何帮助都感激不尽！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T17:54:11.383

`element[i]`是原始 DOM 元素，而不是 jQuery 对象。（就像`this`在`.each()`）

你想要`element.eq(i)`，它将返回一个包装第`i`^(th)元素的 jQuery 对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T18:28:52.233

`h3`如果您正在寻找一种过度优化的解决方案来一次性处理大量数据，请忘记`jquery`.

```
var element = document.getElementById('element');
var headings = element.getElementsByTagName('h3');
var length = headings.length;
var newHtml;

for(i=0;i<length;i++){

  newHtml = headings[i].innerHTML;

  ...test newHtml
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T18:47:46.157

您正在将 jQuery 与 javascript 混合在一起，就像`element[i].html();` 您的代码中应该是这样的

```
function myfunction(){
    var element = document.getElementsByName('element');
    var length = element.length;
    var newHtml;
    for(i=0;i<length;i++){
        newHtml = element[i].innerHTML;
    }
} 
```

请注意 document.getElementById() 只返回一个结果，因此您必须将“元素”放在名称 attr 中。坦率地说 .each 更容易

# c++ - 抽象类作为参数（接口案例）

> ID：15794486
> 
> 赞同：1
> 
> 时间：2013-04-03T17:52:42.167
> 
> 标签：c++, interface, abstract-class

我有一个抽象类应该是一个接口，如下所示：

```
 class IDataSource
    {
    public:
        virtual double getMeThatDouble() = 0;
    } 
```

和一些实现，如

```
 class IDataSourceStreamer
    {
    public:
        double getMeThatDouble()
          {
            //implementation
          }
    } 
```

关键是我想将它用作其他类的构造函数中的初始参数，例如

```
class DataNeeder
{
  public:
       explicit DataNeeder(IDataSource);
} 
```

麻烦来了 - `"parameter of abstract class type is not allowed"`。

我知道出于特定原因禁止使用抽象类本身是不可能的。所以我该怎么做？是一种方法

```
IDataSource.FeedThat(DataNeeder) 
```

唯一的选择？有点丑

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-03T17:53:48.320

您需要将抽象类型作为引用或指针传递。例如：

```
class DataNeeder {
public:
    explicit DataNeeder(IDataSource &source) : source_(source) {
    }

    void someMethod() {
        double x = source_.getMeThatDouble();
        // ...
    }

private:
    IDataSource &source_;
} 
```

然后你就可以对`DataNeeder`'s 的成员函数进行操作了`source_`。正如我所提到的，您也可以将指针用于此任务，但我喜欢仅将指针用于“OUT”参数和可以想象的东西`NULL`。

# meteor - ReferenceError：未定义控制台

> ID：15794490
> 
> 赞同：11
> 
> 时间：2013-04-03T17:52:55.893
> 
> 标签：meteor

我正在使用 Meteor 开发宾果游戏。我现在收到一个错误，因为它在 JS 文件中（我正在写咖啡），我不知道它来自哪里。

这是完整的错误：

```
ReferenceError: Console is not defined
    at app/Bingo.coffee.js:465:12
    at run (/Users/ppedrazzi/Dropbox/Paul's Stuff/MyApps/Meteor/bingo/.meteor/local/build/server/server.js:283:63)
    at Array.forEach (native)
    at Function._.each._.forEach (/usr/local/meteor/lib/node_modules/underscore/underscore.js:79:11)
    at run (/Users/ppedrazzi/Dropbox/Paul's Stuff/MyApps/Meteor/bingo/.meteor/local/build/server/server.js:283:7) 
```

我已将咖啡和 html 文件放在一个要点中： [https ://gist.github.com/ppedrazzi/5303493](https://gist.github.com/ppedrazzi/5303493)

感谢您的任何见解！

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-04-03T17:59:34.190

它看起来像你的第 334 行`bingo.coffee`。

在 javascript 中，所有内容都区分大小写，因此使用小写`c`

```
console.log "Server started and collections cleared." 
```

代替

```
Console.log "Server started and collections cleared." 
```

可能会修复语法错误

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-11-02T14:48:57.540

而不是这样写：

```
Console.log "Server started and collections cleared." 
```

像这样写：

```
console.log "Server started and collections cleared." 
```

总是用小写的 'c' 写 'console' 因为 JavaScript 是区分大小写的语言。

# c# - 如何将sql server数据库模式加上所有表中的数据转换为xml形式

> ID：15794492
> 
> 赞同：2
> 
> 时间：2013-04-03T17:53:06.293
> 
> 标签：c#, sql-server, xml, database

我想使用 c# 将数据库中的数据转换为 xml 表单我已经转换为 ino xml 表单，但是它没有给我有关架构中主键和外键的信息

我的代码是

```
 string[] b = GetAllTables();//array that gives me the name of tables

  foreach (string c in b)
    {
      string sqlText = "SELECT * FROM  " + c;
      SqlDataAdapter da = new SqlDataAdapter(sqlText, myCon);
      da.SelectCommand.CommandType = CommandType.Text;
      da.Fill(customer,c);

      foreach (DataTable dt1 in customer.Tables)
        {
          for (int curRow = 0; curRow < dt1.Rows.Count; curRow++)
          {
            for (int curCol = 0; curCol < dt1.Columns.Count; curCol++)
            {  
              dt1.Rows[curRow][curCol].ToString();  
              // System.IO.StreamWriter xmlSW = new System.IO.StreamWriter(@"D:\Customer.xml");
            }
          }
        }
     }

  string xmlDS = customer.GetXml();
  customer.WriteXml(xmlSW, XmlWriteMode.WriteSchema);
  MessageBox.Show("successfully writed");
  xmlSW.Close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T18:23:39.343

您可以尝试使用 XElement 类并设置 xml 文件的属性，如下所示（仅作为示例）： SqlConnection thisConnection = new SqlConnection(@"Data Source=3BDALLAH-PC;Initial Catalog=XMLC;Integrated Security=True;Pooling =假;"); thisConnection.Open();

```
XElement eventsGive =
    new XElement("data",
        from c in ?????? 
        select new XElement("event",
            new XAttribute("start", c.start),
            new XAttribute("end",c.eend),
            new XAttribute("title",c.title),
            new XAttribute("Color",c.Color),
            new XAttribute("link",c.link)));

Console.WriteLine(eventsGive); 
```

然后将数据库的列标签及其名称放在 xml 文件中。

问候，

奥塔康。

# php - 从 php 中的 txt 获取错误消息

> ID：15794494
> 
> 赞同：-1
> 
> 时间：2013-04-03T17:53:12.223
> 
> 标签：php, forms, validation

我目前正在一个 php 项目中工作，我的客户在每次需要时都希望自定义错误消息。所以我想将错误消息存储在 txt 文件中，并希望获取这些消息并将其显示在表单验证中。如何在 php.ini 中获取这些错误消息。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T17:56:54.457

从 PHP 文档开始。在 Google 上快速搜索“用 PHP 读取文本文件”很快就会找到这个 API 信息以及一些您可以使用的代码。

[http://php.net/manual/en/function.file-get-contents.php](http://php.net/manual/en/function.file-get-contents.php)

# android - 如何在 SQlite/PDO 中加入表、同时聚合并将结果转换为 JSON？

> ID：15794495
> 
> 赞同：1
> 
> 时间：2013-04-03T17:53:14.457
> 
> 标签：android, json, sqlite, join, pdo

我正在尝试将结果聚合从 Android 外包给 php。我无法正确地使用连接表构建查询并在之后使用 JSON 对其进行编码。我正在尝试投票选​​出最酷的英雄。所以我得到了一张给英雄的桌子，一张给用户的桌子和一张我用来投票的桌子。好的，这就是我得到的：

* * *

## 表英雄：id，name

## 表用户：id、name

## 表投票：voteid、userId、heroId

* * *

我通过**聚合每个相等的 heroIds**来获得我的投票结果，然后**从 hero-table 中获取正确的英雄名称**，然后**发回一个如下所示的 JSON 对象**：

## {"vote":[{"voteid":"1","heroCount":"7","heroName":"蝙蝠侠"},{"voteid":"1","heroCount":"3"," heroName":"海王"}]}

* * *

我有点无能为力，因为我的 sqlite 知识非常有限。这是我到目前为止在我的 .php 中得到的：

```
$db = new PDO('sqlite:voting.sqlite');
$stmt = $db->prepare('SELECT * FROM vote');   //<---- how to do that correctly?
$stmt->execute();

$result['vote']=$stmt->fetchAll(PDO::FETCH_ASSOC);
$json=json_encode($result);

echo $json; 
```

任何人都可以给我一些很好的意见？已经有一段时间了，我一直在思考这个问题，但没有解决:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T18:08:29.767

您想使用 SQL GROUP BY 子句和 LEFT JOIN。类似于以下内容：

```
SELECT hero.name AS heroName, COUNT(vote.userId) AS heroCount 
    FROM vote LEFT JOIN hero ON vote.heroId = hero.id GROUP BY hero.id 
```

如果您用它代替 PHP 代码中的 SQL，它将产生类似于您的规范的 JSON 输出。`voteid`虽然会丢失。如果`voteid`是`vote`表的主键，那么将它放在这样的聚合结果中没有任何意义。蝙蝠侠结果将有 7`voteid`秒。

# javascript - 嵌套循环有问题

> ID：15794498
> 
> 赞同：2
> 
> 时间：2013-04-03T17:53:28.350
> 
> 标签：javascript, nested-loops

运行 moveRight() 函数时，我收到一个错误，它无法识别 map[x][y]，说这是未定义的。这只发生在“播放器”在最后一个 y 循环中时。我不明白为什么会发生这种情况，有人可以帮忙解释一下吗？

```
var map = [
    ["Blank", "Blank", "Blank", "Blank"],
    ["Blank", "Blank", "Blank", "Blank"],
    ["Blank", "Blank", "Blank", "Blank"],
    ["Blank", "Player", "Blank", "Blank"],
    ["Blank", "Blank", "Blank", "Blank"],
    ["Blank", "Blank", "Blank", "Blank"],
    ["Blank", "Blank", "Blank", "Blank"]
];

function moveRight() {
    var breakLoop = false;
    for (y = 0; y < map.length; y++) {
        for (x = 0; x < map[y].length; x++) {

            var posX = map[x][y].indexOf("Player");
            if (posX <= -1) continue;
            if (y >= map[y].length-1) {
                breakLoop = true;
                break;
            }

            breakLoop = true;
            console.log("x: " + x);
            console.log("y: " + y);

            map[x][y] = "Blank";
            map[x][y+1] = "Player"; 
            break;
        }
        if (breakLoop) break;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T17:56:41.720

您`y`在外部循环和`x`内部循环中编写循环的方式，需要先访问地图`y`，然后访问`x`。

```
var posX = map[y].indexOf("Player"); 
```

然后`y`边界检查应该改为检查`x`，这是有道理的，因为这是一个水平运动。

```
if (x >= map[y].length - 1) { 
```

运动线应该是：

```
map[y][x] = "Blank";
map[y][x+1] = "Player"; 
```

此外，添加到局部变量声明中是个好主意，`var`这样它们就不会泄漏到全局范围内。

```
for (var y = 0; y < map.length; y++) {
    for (var x = 0; x < map[y].length; x++) { 
```

最后，看起来您不需要内部循环。您正在搜索每一行，`indexOf`因此无需遍历行中的每个单独的正方形。这意味着`posX`可以成为`x`.

* * *

应用所有这些想法，这是最终的代码。请注意一些仔细的重构如何让我们摆脱`breakLoop`变量。

```
for (var y = 0; y < map.length; y++) {
    var x = map[y].indexOf("Player");

    if (x <= -1) {
        continue;
    }

    if (x < map[y].length - 1) {
        console.log("x: " + x);
        console.log("y: " + y);

        map[y][x]     = "Blank";
        map[y][x + 1] = "Player"; 
    }

    break;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T17:56:41.397

循环被构造为具有`y`第一个索引和`x`第二个索引。在以下 2 行中，尽管您以错误的顺序使用它们

```
map[x][y] = "Blank";
map[x][y+1] = "Player"; 
```

它应该是

```
map[y][x] = "Blank";
map[y + 1][x] = "Player"; 
```

此外，该`y + 1`指数是可疑的。在循环的最后一次迭代中，它将超出数组的范围。您的意思是将循环条件更改为`y + 1 < map.length`？

# matplotlib - 如何在 matplotlib 的不透明表面上绘制图形？

> ID：15794499
> 
> 赞同：3
> 
> 时间：2013-04-03T17:53:37.790
> 
> 标签：matplotlib

我想在球体表面画一些点。出于我的目的，我需要能够在三维球体周围绘制线条。球体应该是不透明的，这样在视图中只能看到球体可见一半上的点。目前我只是用以下代码段绘制点：

```
fig = plt.figure()
ax = fig.add_subplot(111, projection='3d')
u = np.linspace(0, 2 * np.pi, 100)
v = np.linspace(0, np.pi, 100)
x = 1 * np.outer(np.cos(u), np.sin(v))
y = 1 * np.outer(np.sin(u), np.sin(v))
z = 1 * np.outer(np.ones(np.size(u)), np.cos(v))
ax.plot_surface(x, y, z, rstride =5,
    cstride = 5, color ='yellow')
plt.plot(CatVec[:,0],CatVec[:,1],CatVec[:,2],'ro') 
```

这给了我以下情节： ![带有绕球体一周的线的 3D 绘图。 只有 50% 的点应该是可见的。](https://i.stack.imgur.com/Sjtlg.png)

不幸的是，所有点都是可见的。还有那些实际上在球体背面的。

**如何使球体不透明，以便只有球体正面的点可见？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T19:52:01.183

由于 3D 图形的呈现方式，使用 matplotlib 并不容易做到这一点。没有*真正的*3D 支持，只有代码可以生成从 3D 到 2D 的投影。这对于单个艺术家来说非常有用，并且可以涵盖很多用例，但是艺术家被画布的方式意味着一个艺术家*总是*在另一个之上，没有办法让艺术家在某些情况下切换顺序地方。

您可以通过“手动”进行拆分并以正确的顺序绘制函数来解决此问题（请参阅[如何绘制相交平面？ ），但这意味着您不能旋转出](https://stackoverflow.com/questions/14824893/how-to-draw-diagrams-like-this/14825951#14825951)*一些*小的视角并拥有事情看起来“正确”。

我建议研究[mayavi](http://code.enthought.com/projects/mayavi/)，它是一个基于 openGL 的绘图包，可以做真正的 3D。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-08T15:20:24.507

什么将使用Mollweide投影？

```
#!/usr/bin/env python

#some hints from here http://wiki.scipy.org/Cookbook/Matplotlib/Maps

import os
import sys
import numpy
from pylab import *
from mpl_toolkits.basemap import Basemap
from matplotlib import rc
import matplotlib.pyplot as plt

fig = plt.figure()
m=Basemap(projection='moll',lon_0=0,resolution='c')

m.drawmeridians(arange(0, 360, 30))
m.drawparallels(arange(-90, 90, 30))

lats=np.zeros(3,dtype=np.float)
lons=np.zeros(3,dtype=np.float)

lats[0] = 0; lats[1]=30; lats[2]=60
lons[0] = 0; lons[1]=30; lons[2]=-30

x,y = m(lons,lats)

plt.plot(x,y,'r')

plt.savefig('a.ps')
close() 
```

# r - 在R中按jenks对值进行分组的函数

> ID：15794500
> 
> 赞同：1
> 
> 时间：2013-04-03T17:53:43.877
> 
> 标签：r, grouping

我尝试自动化我的功能来创建组。因此，我使用`classIntervalls`from the package`classInt`和`cut`from the `base`package。我希望样式为“jenks”，默认情况下组大小为 10。如果少于 10 个`unique`观察值，我希望组数是唯一观察值的数量。所以这就是我尝试过的：

```
set.seed(45)
b=sample(1:50,10)

groupfunction<-function(data,my.style="jenks"){
  ifelse(length(unique(data))<10,tmpbrk<-length(unique(data)),tmpbrk<-10)# tests if the number of unique values is bigger than 10
  tmp<-classIntervals(data,tmpbrk,my.style,unique=T) #find the intervalls
  tmp<-cut(data,tmp$brks,dig.lab=20,include.lowest = T) #cut the data by the breaks from the intervalls
  tmp<-as.character(tmp) #turn results into characters to substitute unwanted characters
  tmp<-gsubfn(".",list("["="",","="-",")"="","("=""," "="","]"=""),tmp) # substitute unwanted characters
}

groupfunction(b) 
```

但我收到一条错误消息： cut.default(data, tmp$brks, dig.lab = 20, include.lowest = T) 中的错误：'breaks' 不是唯一的。

我知道这个错误信息是什么意思。但是谁能帮我实现这个功能并让它工作。我已经听说过，`cut2`但我不确定我是否可以用 jenks 实现它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T22:07:07.987

好的，我得到了它对代码的一些小改动。

```
groupfunction<-function(data,my.style="jenks"){
  ifelse(length(unique(data))<11,tmpbrk<-length(unique(data))-1,tmpbrk<-10)# tests if the number of unique values is bigger than 10
  tmp<-classIntervals(data,tmpbrk,style=my.style) #find the intervalls
  tmp<-cut(data,unique(tmp$brks),dig.lab=20,include.lowest = T) #cut the data by the breaks from the intervalls
  tmp<-as.character(tmp) #turn results into characters to substitute unwanted characters
  tmp<-gsubfn(".",list("["="",","="-",")"="","("=""," "="","]"=""),tmp) # substitute unwanted characters
} 
```

所以它实际上做的是它获取数据，控制唯一值的长度并检查它是否小于 11。如果是这样，它需要唯一值的长度 -1 并将其用作建立jenks的中断数。然后，詹克斯建立在独特的价值观之上。该函数适用于单个向量或整个数据帧，但可以根据速度和 df 的大小减慢 pc。

# javascript - jQuery 验证依赖表达式

> ID：15794507
> 
> 赞同：1
> 
> 时间：2013-04-03T17:54:10.297
> 
> 标签：javascript, jquery, forms, jquery-validate

我正在尝试设置 jQuery Validate[依赖表达式](http://docs.jquery.com/Plugins/Validation/Methods/required#dependency-expression)，以便用户需要使用文本字段或上传文件，但此代码不起作用：这两个字段始终是必需的。我猜`<input type="file">`不支持`#id:empty`，但我可以用什么代替它？

[这是一个jsFiddle。](http://jsfiddle.net/rLdRP/1/)

Javascript：

```
jQuery(document).ready(function() {
    jQuery("#form1iienom").validate({
        errorClass:"errorlabels",
        rules: {
            form1apptext: {
                required: "#form1upload:empty"
            },
            form1upload: {
                required: "#form1apptext:empty",
                extension: "jpg|jpeg|pdf|png|doc|docx"
            },
        },
        messages: {
            form1apptext: "You must either enter a reason for your nomination or upload a file.",
            form1upload: {
                required: "You must either enter a reason for your nomination or upload a file.",
            },
        }
    });
}); 
```

HTML：

```
<form name="form1iienom" id="form1iienom" method="post" action="/applications/iie/review" enctype="multipart/form-data">
<textarea name="form1apptext" id="form1apptext"></textarea><br />
<br />
<em>(allowed file types are jpg, jpeg, pdf, png, doc, and docx; maximum file size is 3 MB)</em>
<input type="hidden" name="MAX_FILE_SIZE" value="3145728" />
<input type="file" name="form1upload" id="form1upload" /><br />
<input type="submit" value="Submit" />
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T18:02:42.277

[根据文档](http://docs.jquery.com/Plugins/Validation#Custom_selectors)，正确的选择器是`:blank`，不是`:empty`。

另[请参阅示例，根据文档](http://docs.jquery.com/Plugins/Validation/validate#toptions)，使用`depends`子规则...

```
rules: {
    contact: {
        required: true,
        email: {
            depends: function(element) {
                return $("#contactform_email:checked")
            }
        }
    }
} 
```

# arden-syntax - 如何在 Arden 中创建非扁平化列表？

> ID：15794511
> 
> 赞同：3
> 
> 时间：2013-04-03T17:54:22.453
> 
> 标签：arden-syntax

在 Arden 中，当您将一个列表添加到另一个列表时，两个列表都会被展平。

例如：

```
MyList1 := "cat", "dog", "hamster";
DeepList := MyList1, ("hyena", "elephant", "puma"); 
```

现在，`DeepList`将不是列表列表，如下所示：

```
("cat", "dog", "hamster"), ("hyena", "elephant", "puma") // 2 lists, 3 items each 
```

但它会像这样被展平：

```
"cat", "dog", "hamster", "hyena", "elephant", "puma" // single list of 6 items 
```

有没有办法创建一个非扁平列表？创建这样的列表有时会非常有用。我已经搜索了手册，但找不到任何方法来做到这一点。在线搜索毫无结果——没有人发布有关传销的内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T17:54:22.453

在普通的“医学逻辑系统的雅顿语法”中，没有办法做到这一点。但是，在 Sunrise Acute Care 的实施中，有两种方法可以在 Arden 中获得多层次、非扁​​平化的列表。

第一种方法是访问对象列表的属性。这种非扁平化的性质是由于 Sunrise 添加到普通 Arden 的对象处理扩展。首先，创建一个将属性设置为列表的对象列表。

```
AnimalObj := OBJECT [AnimalList]; // create a single-property object type
Animal := NEW AnimalObj WITH ,("cat", "dog", "hamster"); // see notes below
Animals := , Animal;
Animal := NEW AnimalObj;
Animal.AnimalList := "hyena", "elephant", "puma"; // an alternate way
Animals := Animals, Animal;
MultilevelList := Animals.AnimalList; // this is the magic. No object any more!
ListCount := COUNT MultilevelList; // 2
Item1Count := COUNT MultilevelList[1]; // 3
Item2Count := COUNT MultiLevelList[2]; // 3 
```

关于注意事项`NEW AnimalObj WITH`: 需要额外的逗号表示这不是映射参数的正常语法，其中“cat”是第一个属性，“dog”是第二个，依此类推。相反，我们必须添加逗号以强制它成为列表列表，消除关于如何解释列表的歧义，表明括号中的整个第一个值将分配给第一个属性。这顺便说明了列表确实存在于 Arden 中，在解析和处理过程中是非扁平的，如果你考虑一下这实际上是一个必需的功能，因为在调用 MLM 时，将列表传递给第一个参数和不同的列表是完全合法的到第二个。任何时候您尝试将单个列表作为参数传递（这样解析器就无法推断出您打算将整个列表作为一个参数），

另请注意，如果您执行 a`BREAK;`并检查变量的值`MultilevelList`，它将显示`cat, dog, hamster, hyena, elephant, puma`。这是高度误导的，因为它*看起来*像一个包含 6 个元素的列表，但它*不是*，正如我们在上面用 证明的那样`COUNT`。

在 Arden Syntax 的 SCM 变体中获得非扁平列表的第二种方法是作弊并使用直接 Lisp 代码。我们利用了传递给 MLM 的参数是非扁平化的这一事实。创建一个 MLM——我将调用 mine `RETURN_ARGS`，并将此代码放入指定的插槽中：

```
data:
   CallerArguments := NULL;
   {(SETQ CallerArguments ARDEN_ARGUMENT)}; // direct Lisp code
logic:
   CONCLUDE True;
action:
   RETURN CallerArguments; 
```

然后可以从另一个 MLM 非常简单地使用它：

```
MyList1 := "cat", "dog", "hamster";
RETURN_ARGS := MLM 'RETURN_ARGS';
DeepList := CALL RETURN_ARGS WITH MyList1, ("hyena", "elephant", "puma"); 
```

仔细检查将证明 DeepList 与上述对象技巧产生的两级列表完全相同。

# java - 如何在 javafx 浏览器中操作链接

> ID：15794516
> 
> 赞同：2
> 
> 时间：2013-04-03T17:54:27.630
> 
> 标签：java, netbeans, web, browser, javafx

```
 //process history
        final WebHistory history = webEngine.getHistory();

        history.getEntries().addListener(new 
            ListChangeListener<WebHistory.Entry>(){
                @Override
                public void onChanged(Change<? extends Entry> c) {
                    c.next();
                    for (Entry e : c.getRemoved()) {
                        comboBox.getItems().remove(e.getUrl());

                    }

                    for (Entry e : c.getAddedSubList()) {
                        comboBox.getItems().add(e.getUrl());
                    }
                        System.out.println(webEngine.getLocation());
                    if(webEngine.getLocation().matches("http://www.google.co.in/")){}
                    else if(webEngine.getLocation().contains("http://in.yahoo.com/")){}
                    else{

          browser.setOnMouseClicked(new EventHandler<MouseEvent>(){

          @Override
          public void handle(MouseEvent arg0) {

                String[] manipulateurl= {
                                         "http://www.gmail.com",
                                         "http://www.flipkart.com"};
                String temp=address.getText();

               if (manipulatedindex>1)
                   manipulatedindex=0;

               temp=manipulateurl[manipulatedindex];
               System.out.println(manipulateurl[manipulatedindex]+"      "+temp);
               address.setText(temp);

                webEngine.load(temp);
                manipulatedindex++;

}

    });}

//                         webEngine.getLocation()
                }
        });

        //set the behavior for the history combobox               
        comboBox.setOnAction(new EventHandler<ActionEvent>() {
            @Override
            public void handle(ActionEvent ev) {
                int offset =
                        comboBox.getSelectionModel().getSelectedIndex()
                        - history.getCurrentIndex();
                history.go(offset);
            }
        });

        // process page loading
        webEngine.getLoadWorker().stateProperty().addListener(
            new ChangeListener<State>() {
                @Override
                public void changed(ObservableValue<? extends State> ov,
                    State oldState, State newState) {
                    toolBar.getChildren().removeAll(showAll, hideAll);    
                    if (newState == State.SUCCEEDED) {
                            JSObject win = 
                                (JSObject) webEngine.executeScript("window");
                            win.setMember("app", new JavaApp());
                            if (needForumButtons) {
                                toolBar.getChildren().addAll(showAll, hideAll);
                            }
                        }
                    }
                }
        );

        // load the home page  
        String x="http://www.google.com";
    webEngine.load(x);
        //add components

        getChildren().add(toolBar);

        getChildren().add(browser);
    }

    // JavaScript interface object
    private class JavaApp {

        public void exit() {
            Platform.exit();
        }
    }

    private Node createSpacer() {
        Region spacer = new Region();
        HBox.setHgrow(spacer, Priority.ALWAYS);
        return spacer;
    }

    @Override
    protected void layoutChildren() {
        double w = getWidth();
        double h = getHeight();
        double tbHeight = toolBar.prefHeight(w);
        layoutInArea(browser,0,0,w,h-tbHeight,0,HPos.CENTER,VPos.CENTER);
        layoutInArea(toolBar,0,h-tbHeight,w,tbHeight,0,HPos.CENTER,VPos.CENTER);
    }

    @Override
    protected double computePrefWidth(double height) {
        return 750;
    }

    @Override
    protected double computePrefHeight(double width) {
        return 600;
    }
} 
```

这是我的代码。有人可以帮我操作浏览器上的链接吗，例如让我说当我点击 google.com 中的“广告程序”时，它应该使用我点击的 url 转到 (propams.com)

感谢您提前帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-30T16:01:08.683

在您的代码中，您应该首先尝试了解历史记录是如何在浏览器中显示的，然后我想您只需要编写一个简单的 if else 逻辑来操作指向您想要的任何位置的链接，所以首先尝试显示历史记录我猜应该做的伎俩

# php - Curl + sTunnel 返回 56: Recv failure: Connection reset by peer

> ID：15794517
> 
> 赞同：2
> 
> 时间：2013-04-03T17:54:37.477
> 
> 标签：php, ubuntu, curl, openssl, stunnel

我知道这个问题之前可能已经被问过，看过一些帖子，但没有给出明确的解决方案。我一直使用 stunnel 通过 curl 成功连接并调用服务器，直到最近它开始抛出此错误：

> 56: Recv failure: Connection reset by peer

服务器地址为 127.0.0.1:5555/Exec。我可以从本地计算机成功连接，但是当请求来自我的 Ubuntu 服务器时它会失败。

# text - AS3 Flash 媒体文本颜色

> ID：15794524
> 
> 赞同：1
> 
> 时间：2013-04-03T17:54:53.043
> 
> 标签：text, colors, chat

我正在使用 FMS 构建聊天应用程序。要在聊天室中设置文本颜色，这可以在客户端完成，还是需要一些服务器端编码？我的知识是有限的。我希望文本颜色为蓝色和红色，但我不确定如何处理。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-22T22:19:31.353

您可以通过服务器或客户端两种方式进行操作。

例如：

```
var myColor:String = "#FF0000";
nc.call("msgFromUser", myName, myColor, msg); 
```

# javascript - 仅当 'beforeunload' 函数返回 true 时才运行 Javascript 代码

> ID：15794528
> 
> 赞同：7
> 
> 时间：2013-04-03T17:55:03.143
> 
> 标签：javascript, html, onbeforeunload

当用户离开页面时，我使用 JQuery 来捕获卸载事件。这工作得很好，但我有数据只需要在用户*真正*想离开的情况下才需要保存。

这是我的catch-22。如果我过早地保存代码并且用户不想离开，我已经破坏了支持代码的 Web 服务的状态。

因此，只有在“beforeunload”对话框返回 true 时，我才需要完成几乎无法完成的代码执行任务。

```
$(window).on('beforeunload', function(e) {
    var info = * some info to save the current page state *
    return 'Are you sure you want to navigate away from the Test Runner?';

    //unreachable place where I wish I could ajax 'info' back to safety
}); 
```

此代码将弹出一个对话框，询问“您确定要离开测试运行器吗？” 如果用户点击取消将阻止用户离开页面。

这是另一个想法：

```
$(window).on('onunload', function(e) {
    var info = * some info to save the current page state *
    var r=confirm('Are you sure you want to stop the Test Runner?');
    if(r==true)
    {
        //place where I wish I could ajax 'info' back to safety
        return 'leaving'
    }
    else
        return 'leaving unsaved';
}); 
```

第二种方法不会阻止用户离开任何一种方式，但在一种情况下会先执行一些保存代码，而在另一种情况下会将它们引导回冷态。这种方法的问题在于，大多数浏览器（正确地）阻止确认框在 window.onunload 状态下启动，这要归功于 90 年代的 Web 开发人员用它来蒙蔽可怜的拨号网络冲浪者。

**免责声明：** *我很清楚，我们在 Web 开发人员社区中强烈反对阻止用户离开页面并在他们尝试这样做时在后台执行代码。当我看到诸如*“如何防止用户离开我非常棒的网站”之类的问题时，*我的下意识反应通常是“不要这样做！” 那就是说这不一样了。这是针对特定客户的专门页面，我们需要将其作为预防恐慌的措施。我保证，我是好人之一。我是你。*

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-03T18:38:22.997

尝试使用这两个事件。您需要的是同一范围内的共享变量，而不是全局变量。`onbeforeunload`将在对话框出现之前触发。`onunload`只有当用户单击以退出窗口/选项卡时才会被触发。

```
// Use a variable in the same scope of both events:
var savedState;

$(window).on('beforeunload', function(e) {

  savedState = "what the user currently made";

  return "Sure U are?";
});

$(window).on('unload', function(e) {

  // user didn't save!!
  // your auto-save function:
  auto_save(savedState);

  // browser leaves this tab.
}); 
```

作为一个范围，我的意思是类似`(function () { })();`或任何其他（构造函数或函数）函数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-03T18:56:38.160

经过测试并在 chrome 中工作。

```
$(window).on('beforeunload', function () {
   return 'Are you sure you want to navigate away from the Test Runner?';
});
$(window).on('unload', function () {
   $.ajax({ url: '/default.aspx', async: false });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-17T09:47:22.440

刚刚遇到你现在的经历

下面的链接是这个问题的一个很好的参考。

[https://developer.mozilla.org/en-US/docs/Web/Events/unload](https://developer.mozilla.org/en-US/docs/Web/Events/unload)

“文件处于特定状态：

*   所有资源仍然存在（img、iframe 等）
*   最终用户看不到任何东西
*   UI 交互无效（window.open、alert、confirm 等）
*   错误不会停止卸载工作流”

所以你将无法在 beforepageunload 之后触发任何东西，因为它不会产生任何返回值

# java - Spring Batch JdbcBatchItemWriter

> ID：15794532
> 
> 赞同：2
> 
> 时间：2013-04-03T17:55:05.713
> 
> 标签：java, spring, integration, batch-processing, enterprise

我正在与读者和作家一起使用块步骤。阅读器正在使用一个页面大小为 5000 的 JdbcPagingItemReader。编写器在块步骤上使用具有 5000 提交间隔的 JdbcBatchItemWriter。

```
 <batch:step id="createRecords">
                    <tasklet  allow-start-if-complete="true" >
                        <chunk reader="readTable"  writer="createNewRecords" 
                               commit-interval="5000" skip-limit="100" >
                       <skippable-exception-classes>
                       <batch:include class="java.lang.Exception"/>
                       </skippable-exception-classes>
                        </chunk>
                    </tasklet>
</batch:step> 
```

当我使用这个块步骤来加载记录时，一切都按我的预期工作。它一次插入 5000 条记录（当没有错误时），性能符合预期。在一分钟内处理 10000 条记录等。

但是，当我使用相同的块步骤（完全相同的读取器）并更改编写器使用的 SQL 来执行 UPDATE 语句（如在基本 SQL 更新中与 INSERT 相对）时，应用程序最多需要 30 多分钟才能完成更新 50K 记录，这是很差的。整个表的 SQL 中的单个更新语句（几乎相同）在几秒钟内运行。如果可能的话，我想利用批处理。

```
 <bean id="createNewRecords" class="org.springframework.batch.item.database.JdbcBatchItemWriter">
    <property name="dataSource" ref="dataSource" />   
    <property name="sql">
        <value>
            <![CDATA[        
            UPDATE  TABLE SET TABLE_COLUM = :test
            ]]>
        </value>
    </property>
    <property name="itemSqlParameterSourceProvider">
        <bean class="org.springframework.batch.item.database.BeanPropertyItemSqlParameterSourceProvider" />
    </property>        
</bean> 
```

想知道这听起来像一个配置问题 - 还是春季批处理 JdbcBatchItemWriter 对更新语句的处理方式不同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-07T20:04:42.017

您的架构中是否有任何触发器？如果是，那么它可能是问题所在。

无论如何，我也会尝试减少提交间隔。5000 在我看来相当大，既然您说单个更新执行速度很快，那可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-26T13:10:37.530

您的更新查询会在每次调用时更新表中的每一行。它需要一个“where”子句，理想情况下基于唯一或主键索引。

# facebook - 未找到画布 URL 设置

> ID：15794535
> 
> 赞同：1
> 
> 时间：2013-04-03T17:55:17.307
> 
> 标签：facebook, visual-studio-2012, facebook-apps

我正在从 Visual Studio 2012 开发我的第一个 facebook 应用程序，我已经在 facebook 中创建了应用程序，现在我应该将画布 URL 设置为我的项目 URL，但我在基本设置选项卡中没有找到任何画布设置，为什么会这样？请帮忙..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T20:17:17.003

您勾选“Facebook 上的应用”，然后它会显示“Canvas URL”等选项

# java - JBOSS域模式，在特定IP上运行

> ID：15794542
> 
> 赞同：3
> 
> 时间：2013-04-03T17:55:34.403
> 
> 标签：java, jboss, cluster-computing, jboss7.x

我正在尝试通过本教程关于 JBOSS 中的集群[http://blog.akquinet.de/2012/06/29/managing-cluster-nodes-in-domain-mode-of-jboss-as-7-eap- 6 /](http://blog.akquinet.de/2012/06/29/managing-cluster-nodes-in-domain-mode-of-jboss-as-7-eap-6/) 我被困在特定 IP 上运行 JBOSS，比如

```
domain.bat --host-config=host-master.xml -Djboss.bind.address.management=192.168.0.1 
```

我只能在 127.0.0.1 或 192.168.0.100 IP 地址上运行。在不同的本地地址上运行服务器需要做什么？有可能吗？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T19:38:37.813

在 Jboss7/EAP6 中，有两个与 IP 地址绑定相关的 jboss 属性：*jboss.bind.address*和*jboss.bind.address.management*。第一个让您指定 JBoss 将公开应用程序的 IP 地址，第二个让您指定 Jboss 将公开管理控制台的 IP 地址。

默认情况下（如果未定义）Jboss 将监听来自本地主机（即 127.0.0.1，环回接口）的请求（来自应用程序和管理）。如果您希望能够从网络访问 Jboss，则必须将这些属性设置为您希望 JBoss 可访问的 IP（通常，这是您拥有 JBoss 的机器的 IP，但是如果您在那台机器上有多个网络接口，您可以指定其中一个 IP 用于管理，另一个用于应用程序）。例如，如果您希望管理控制台可以从 IP 127.0.0.1 (localhost) 访问，而应用程序通常可以从 IP 192.168.1.26 访问，您应该指定：

```
-Djboss.bind.address=192.168.1.26
-Djboss.bind.address.management=127.0.0.1 
```

因此，您将能够从以下地址访问您的应用程序：（`http://192.168.1.26:8080`其中 8080 是应用程序的默认端口）。以及来自地址的管理控制台：（`http://127.0.0.1/9990`其中 9990 是管理的默认端口）。

并回答你的最后一个问题，如果你想让它从你机器上的所有可用接口都可以访问，你必须将这些属性设置为广播 IP，即： 0.0.0.0 。这样，您就可以从 localhost 以及服务器中所有其他可用的网络接口访问您的 Jboss。但请记住，出于安全原因，不建议这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T08:38:18.390

谢谢大家。我找到了解决方案。在 Windows 中，我可以将虚拟 IP 分配给我的网络接口，然后从 localhost 访问它们。

# dynamic-programming - 动态规划：最小化空白

> ID：15794543
> 
> 赞同：1
> 
> 时间：2013-04-03T17:55:40.013
> 
> 标签：dynamic-programming

这是一个家庭作业问题，但我完全迷路了。我很难弄清楚子问题是什么：我尝试了一种贪婪的方法，我尝试过增加一行中的单词数等等，但我什么也想不出来。任何人都可以提供任何见解吗？

问题：考虑一个将单词列表转换为排版文本的程序。该程序将单词打印到长度为 W 的行上，这样行尾的额外空格量使得包含单词 i 到 j 的行包含 W - j + i - SUM（单词 i 到 j 中的字符）。编写一个动态规划算法，最小化每行额外空格的平方和。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T18:05:33.110

我相信您应该采用的方法如下：

-> 找到长度为 1 的行的最佳解决方案并保存该值。（这应该是微不足道的）。

->以这种方式找到长度为 2 的线的最佳解决方案：

对于每个单词，看看它们是否合适。如果他们确实计算了剩余空间并使用该空间的最佳解决方案（将剩余 1 或 0 个空间）。

...（一直这样做到 W）

->以这种方式找到长度为 W 的线的最佳解决方案：

对于每个单词，看看它们是否合适。如果是这样，请计算剩余空间并使用该剩余空间的最佳解决方案（因为它小于您已经计算过的 W。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T18:34:00.173

对于开发人员来说，动态编程是轻松解决此类问题的好选择。

我们可以用来解决这个问题的动态规划方法如下。首先，如果所有单词都放在一行上，那么我们就完成了。如果不是，那么我们将尝试所有可能适合这一行的组合，然后我们解决由每个可能组合的剩余单词组成的子问题，我们可以通过最小化第一行的成本来找到最佳布局添加剩余子问题的最小成本。

> 令 MAX(i) 为其中 最大的 j，这 ![在此处输入图像描述](https://i.stack.imgur.com/DyucH.png)意味着单词 j 可以放在以单词 i 开头的行上。我们可以填充成本 c 的 n 元素数组，其中 c[i] 是打印单词 i 到 n 的最小成本，如下所示： 如果 MAX(i) = n，则 c[i] = 0 else : ![在此处输入图像描述](https://i.stack.imgur.com/wpp7H.png)
> 填充从 n 到 1 的数组从上到下，将花费 O((M/2)n) 时间，因为最多 M/2 个单词可以放在一行中。所需空间为 O(n)。

# javascript - Javascript - 我无法在字符串的开头连接

> ID：15794544
> 
> 赞同：0
> 
> 时间：2013-04-03T17:55:40.363
> 
> 标签：javascript, jquery, string-concatenation

这是我想要做的：

检查我的字符串中是否有第一个字符“@”，如果没有，添加它。

这是我的代码：

```
$(document).ready(function(){

    $("#twitter").blur(function() {
            var s = $("#twitter").val();
            alert(s);
            var isAt = s.charAt(0);
            alert(isAt);
            if(isAt !== "@") {
                alert("lol");
                s = "@" + s;
            }
        });
}); 
```

问题：

当我切换到下一个输入（反过来模糊#twitter）时，当我输入“Rick”时，它很有趣，但没有将输入的值设置为“@Rick”。

任何想法为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T17:56:58.080

改变这个：

```
s = "@" + s; 
```

对此：

```
$("#twitter").val('@' + s); 
```

问题是您正在更新存储在`s`引用中的值，但该变量和输入字段本身之间没有动态绑定（即，您仍然必须`#twitter`手动更新值）。

* * *

编辑：正如下面@epascarello 所建议的，这可能是一个更清洁的解决方案：

```
$(document).ready(function(){
    $('#twitter').blur(function() {
        var $this = $(this),
            val = $this.val();
        if (val.charAt(0) !== '@') {
            $this.val('@' + val);
        }
    });
}); 
```

* * *

而且......只是为了它，另一种方法：

```
$(document).ready(function(){
    $('#twitter').blur(function() {
        if (this.value.charAt(0) === '@') return;
        $(this).val(function(i, v) { return '@' + v });
    });
}); 
```

* * *

多一个...

```
$(document).on('blur', '#twitter', function() {
    $(this).val(function(i, v) {
        return v.replace(/(@)?(.*)/, '@$2')
    });
}); 
```

**注意：你可能应该使用第一个或第二个......我在这里变得深奥......**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T17:58:48.610

```
$(document).ready(function(){
    $("#twitter").blur(function() {
        var s = $("#twitter").val();
        alert(s);
        var isAt = s.charAt(0);
        alert(isAt);
        if(isAt !== "@") {
            alert("lol");
            $("#twitter").val("@" + s);
        }
    });
}); 
```

# jquery - Sequence.JS 没有动画（或真正做任何事情）

> ID：15794546
> 
> 赞同：3
> 
> 时间：2013-04-03T17:55:41.983
> 
> 标签：jquery, slider

我正在使用[Sequence.JS](http://sequencejs.com)创建一个站点。我已经查看了十几次标记，我有一些`animate-in`和`animate-out`类，所以它应该在加载时做**一些**事情。这是我的 HTML 标记：

```
<div id="feature">
    <div id="featurewrap">
        <div id="slider">
            <ul id="slides" class="sequence">
                <li class="slide1">
                    <div class="headline left">
                        <a href="#">
                            <h2>Testing the slider headline</h2>
                            <p class="blurb">This is an example of the captions you can have on the slider</p>
                        </a>
                    </div>
                    <img src="img/slides/slide1.jpg" />
                </li>
                ...Slide2...
                ...Slide3...
            </ul>
        </div>
    </div>
</div> 
```

这是我的 jQuery 标记：

```
$(function(){
    var options = {
        preloader: false,
        hideFramesUntilPreloaded: false,
        fallback: {
            theme: "fade",
            speed: 500
        },
        pauseOnHover: true,
        animateStartingFrameIn: true,
        transitionThreshold: 250,
        reverseAnimationsWhenNavigatingBackwards: false,
        autoPlay: true,
        autoPlayDelay: 6000
    };
    var sequence = $("#slider").sequence(options).data("sequence");
}); 
```

此外，这是我目前正在开发的网站：[cirkut.net/sub/2013northwood/](http://www.cirkut.net/sub/2013northwood/)

没有控制台错误。据我所知，所有脚本都正确加载并且井井有条。序列应该向`animate-in`第一张幻灯片添加类。目前没有任何事情发生，即使`autoPlay`打开。

有任何想法吗？谢谢！

**更新：** 我已经添加了一个类，`.sequence-canvas`现在`ul`第一张幻灯片动画了。但是，我现在遇到了 sequence.js 在 6000 毫秒后没有动画到下一张幻灯片的问题。

**PS 更新** 好的，现在它是随机工作的。

对于将来阅读此问题的任何人，请确保向包含幻灯片**的**类添加一个类！`.sequence-canvas``ul`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-23T00:36:37.927

你可以试试这个吗？

[序列滑块在第二张幻灯片后停止](https://stackoverflow.com/questions/15237469/sequence-slider-stopping-after-second-slide)

**总结一下：**

确保每张幻灯片的所有直接子级都至少有一个`.animate-in`过渡，并且该元素的值实际上是过渡的。

# ios - NSJSONSerialization 对包含正斜杠 / 的字符串进行序列化，并且 HTML 被错误地转义

> ID：15794547
> 
> 赞同：10
> 
> 时间：2013-04-03T17:55:42.337
> 
> 标签：ios, json, nsstring, nsjsonserialization, nsstringencoding

我正在尝试将一些简单的 HTML 转换为 JSON 对象中的字符串值，但我无法让字符串编码不转义 NSJSONSerialization 中的字符串。

示例...我有一个包含一些基本 HTML 文本的字符串：

```
NSString *str = @"<html><body><p>Samples / Text</p></body></html>"; 
```

期望的结果是带有 HTML 作为值的 JSON：

```
{
    "Title":"My Title",
    "Instructions":"<html><body><p>Samples / Text</p></body></html>"
} 
```

我正在使用标准技术将 NSDictionary 转换为包含 JSON 的 NSString：

```
NSMutableDictionary *dict = [NSMutableDictionary dictionary];
[dict setObject:str forKey:@"Instructions"];
[dict setObject:@"My Title" forKey:@"Title"];

NSError *err;
NSData *data = [NSJSONSerialization dataWithJSONObject:dict options:NSJSONWritingPrettyPrinted error:&err];
NSString *resultingString = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];
NSLog(@"%@", resultingString); 
```

此方法生成的 JSON 是有效的，但是 HTML 已转义所有正斜杠：

```
{
    "Title":"My Title",
    "Instructions":"<html><body><p>Samples \/ Text<\/p><\/body><\/html>"
} 
```

这会在说明 JSON 字符串中创建无效的 HTML。

我想坚持使用 NSJSONSerialization，因为我们在框架中的其他任何地方都使用它，并且在切换到非 Apple 库之前我已经被烧毁了，因为它们被取消支持。我尝试了许多不同的字符串编码，它们都避开了尖括号。

显然 \/ 是 JavaScript 中 / 字符的有效表示，这就是转义正斜杠的原因（甚至 StackOverflow 文本编辑器也转义了它）。请参阅： [使用正斜杠转义 json 字符串？](https://stackoverflow.com/questions/3413878/escaping-json-string-with-a-forward-slash) 还有[JSON：为什么要转义正斜杠？](https://stackoverflow.com/questions/1580647/json-why-are-forward-slashes-escaped). 我只是不希望它这样做，而且似乎没有办法阻止 iOS 在序列化时转义字符串值中的正斜杠。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-08T00:14:39.990

我相信`NSJSONSerialization`在编码 HTML 方面的行为符合设计。

如果您查看一些关于在 JSON 中编码 HTML 的问题（[1、2](https://stackoverflow.com/questions/993970/what-do-i-need-to-escape-in-my-html-json-response) [）](http://www.thorntech.com/2012/07/4-things-you-must-do-when-putting-html-in-json)，您会看到答案总是提到转义正斜杠。

[JSON](http://json.org)不需要转义正斜杠，但 HTML 不允许包含 javascript 字符串，因为它可能与标记`</`的结尾混淆。`<SCRIPT>`

[请参阅此处](https://stackoverflow.com/a/1580682/184130)、[此处](https://stackoverflow.com/a/9735430/184130)以及最直接的[w3.org HTML4 附录](http://www.w3.org/TR/html4/appendix/notes.html#h-B.3.2)中的答案，该附录在[B.3.2 中指定非 HTML 数据](http://www.w3.org/TR/html4/appendix/notes.html#h-B.3.2)

```
ILLEGAL EXAMPLE: 
The following script data incorrectly contains a "</" sequence (as part of "</EM>") before the SCRIPT end tag:

<SCRIPT type="text/javascript">
  document.write ("<EM>This won't work</EM>")
</SCRIPT> 
```

尽管此行为可能会给您带来问题，但您只是在遵循编码 HTML 数据以用于标签`NSJSONSerialisation`的古老规则。`<SCRIPT>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-12T12:03:30.873

这是我在生成的 JSON`AFJSONRequestSerializer`中删除符号`\`之前的子类；`/`如果你使用 AFNetworking 会很方便

```
class SanitizedAFJSONRequestSerializer: AFJSONRequestSerializer
{
    override func requestBySerializingRequest(request: NSURLRequest!, withParameters parameters: AnyObject!, error: NSErrorPointer) -> NSURLRequest!
    {
        var request = super.requestBySerializingRequest(request, withParameters: parameters, error: error)

        if let jsonData = request.HTTPBody
        {
            if let jsonString = NSString(data: jsonData, encoding: NSUTF8StringEncoding) as? String
            {
                let sanitizedString = jsonString.stringByReplacingOccurrencesOfString("\\/", withString: "/", options: NSStringCompareOptions.CaseInsensitiveSearch, range:nil) as NSString

                println("sanitized json string: \(sanitizedString)")

                var mutableRequest = request.mutableCopy() as! NSMutableURLRequest
                mutableRequest.HTTPBody = sanitizedString.dataUsingEncoding(NSUTF8StringEncoding)
                request = mutableRequest
            }
        }

        return request
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-06T19:41:37.450

**仅限 iOS 13：** 如果您不担心产生无效的 HTML 序列（如[本答案](https://stackoverflow.com/a/20448342/373343)中所述），您可以通过将选项传递`NSJSONWritingWithoutEscapingSlashes`给序列化程序来禁用正斜杠转义。

例子：

```
jsonData = [NSJSONSerialization dataWithJSONObject:batchUpdates
                                           options:NSJSONWritingWithoutEscapingSlashes
                                             error:nil]; 
```

# mysql - 如何使用断点进行 mysql 更新

> ID：15794552
> 
> 赞同：1
> 
> 时间：2013-04-03T17:56:02.850
> 
> 标签：mysql, sql, sql-update

我有 105000 条要更新的记录我想将
名为 owner_id 的字段的值更改为我要设置的数字，但每个数字只能获得 15000 条记录。

所以每个所有者将有 15,000 条记录分配给他们。我不能使用 id <1500 的用户，因为它们的顺序不正确，这些记录位于包含 400 万条记录的表中。

注意我想做一个大规模的改变我现在不担心锁定表

这没有用

```
UPDATE phone_calls SET owner_id = 5 WHERE status = 1 LIMIT 15000, 30000 
```

谢谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T18:03:14.317

你的语法不正确。请改用此查询：

```
UPDATE phone_calls SET owner_id = 5 WHERE status = 1 AND owner_id <> 5 LIMIT 15000 
```

它将仅更新 15000 条记录。已更新的记录将被排除。
要更新更多记录，请再次运行查询（或将其放入循环中）。

# knockout.js - 具有级联和异步下拉菜单的 Knockoutjs

> ID：15794553
> 
> 赞同：1
> 
> 时间：2013-04-03T17:56:04.060
> 
> 标签：knockout.js, asp.net-web-api

使用 VS2012 的环境，ASP.NET MVC 4 项目，以及 Knockout 2.2.1（而且对这一切来说都是可悲的新事物）。

我要填充三个下拉列表，按
制造商、样式、颜色的顺序

当页面加载时，我将制造商列表从 Ajax 调用填充到 WebAPI 控制器，因为只有大约 20 个。但是，每个制造商的样式可能有 1000 个项目，所以我自然不想将这些全部发送出去直到我知道选择了哪个制造商。此外，除非绝对必要，否则我不想发送所有样式。

理想情况下，这看起来像是一个我可以输入的下拉菜单，并且在我输入三个或四个字符后会请求一个样式列表。或者，如果我不知道要查找的样式名称，我可以单击下拉按钮，它将获取该制造商的所有样式。一旦我选择了那个，我就可以去为那个制造商+风格获取几种颜色。但是，我必须选择服务器已发送的有效样式（在我选择有效样式之前不要填​​充颜色下拉列表）。

但是那个中间样式控件是我不知道该怎么做（或绑定到）的东西。或者，我应该期望在这种情况下使用不同类型的控件（或控件）。

我的 Viewmodel（目前不包含样式或颜色）

```
function vmManufacturer(id, name) {
    var self = this;
    self.id = ko.observable(id);
    self.name = ko.observable(name);
}

function vmItems() {
    var self = this;
    self.manufacturers = ko.observableArray([new vmManufacturer()]);
    self.selectedManufacturer = ko.observable();
    $.getJSON("/api/Manufacturer/", function (data) {
        $.each(data, function (key, val) {
            self.manufacturers.push(new vmManufacturer(val.id, val.name));
        });
    });
}

$(document).ready(function () {
    ko.applyBindings(new vmItems());
}); 
```

当前与模型关联的下拉列表很简单：

```
<select data-bind="options: manufacturers, value: selectedManufacturer, optionsText: 'name'"></select> 
```

任何帮助都将不胜感激 - 对于这样一个简单的问题，我深表歉意，我只是在 JS/Knockout 中如何组合事情的基础上摇摇欲坠。

# overflow - 功能检测不正确的边界半径溢出

> ID：15794554
> 
> 赞同：7
> 
> 时间：2013-04-03T17:56:05.330
> 
> 标签：overflow, css, feature-detection

正如我们所知道的那样`overflow: hidden`，`border-radius`它在所有浏览器中都不能正常工作——即 Safari 和 Opera 在切割包含图像的圆角时存在问题。

示例 HTML：

```
<a class="circle" href="#">
    <img src="http://placekitten.com/300/300" alt="kitten" />
</a> 
```

和相应的CSS：

```
.circle {
    -webkit-border-radius: 100px;
    -moz-border-radius: 100px;
    border-radius: 100px;
    height: 120px;
    overflow: hidden;
    width: 120px;
} 
```

检查这个[jsfiddle](http://jsfiddle.net/8u6Xr/)

我确实有一个使用背景图像的 Safari 和 Opera 的后备方案，但我只想在`overflow`运行不正常的情况下使用它。[现在，由于已知原因](http://www.quirksmode.org/js/support.html)，我不想简单地使用浏览器检测，但我想**检测**以正确方式切断角落的能力。通常我会这样检查：

```
if('overflow' in document.body.style){
    // overflow
} else {
    // no overflow
} 
```

但这一次将无济于事……那么，有什么方法可以正确检查吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T08:49:47.613

为什么不用css hack？

```
@media screen and (-webkit-min-device-pixel-ratio:0) {

} 
```

我相信这将针对野生动物园和歌剧。

是的，chrome 也是 webkit。不，不会受到影响。

来源：http : [//css-tricks.com/is-there-any-dedicated-css-hacks-for-safari-or-opera/](http://css-tricks.com/is-there-any-dedicated-css-hacks-for-safari-or-opera/)

Opera 也有供应商 css 选择器，这在 imo 中更安全：

```
x:-o-prefocus {
} 
```

# error-handling - 如何使用 Powershell 设置（或忽略）DTD 属性？

> ID：15794556
> 
> 赞同：2
> 
> 时间：2013-04-03T17:56:10.883
> 
> 标签：error-handling, powershell-2.0, dtd

我有一个 powershell 脚本，可以将 HTML 文档转换为 Word、RTF、Text 和 Word 2010 (.docx)。许多文件出现以下错误：

```
Exception calling "Open" with "1" argument(s): "Word encountered an error processing the XML file Viewing_Customer_Payments.htm
DTD is prohibited.
Location:  Line: 2, Column: 9"
At C:\blah\blah\blah\blah\blah.PS1:95 char:36
+     $opendoc = $word.documents.open <<<< ($docs.FullName)
    + CategoryInfo          : NotSpecified: (:) [], MethodInvocationException
    + FullyQualifiedErrorId : ComMethodTargetInvocation 
```

我一直在寻找 DTD Powershell 信息，虽然有[很多](http://msdn.microsoft.com/en-us/library/system.xml.xmlreadersettings.prohibitdtd.aspx)关于在 C#、C++、VB 中设置允许/禁止值的文档，但对于 Powershell 来说却很少。具有潜在有用信息的[一页](http://technet.microsoft.com/en-us/subscriptions/system.xml.xmlreadersettings.prohibitdtd%28v=vs.80%29)加载错误，并且不会显示 powershell 示例代码；我怀疑这是尚未推出最新最好的 IE 的功能。

所以在一个完美的世界里，我想在我的脚本中包含一个允许 DTD 或忽略禁令的行。我不知道该怎么做，或者即使通过 powershell 有什么东西。

万一这很重要，SUCCESSFUL 文件转换具有以下标头：

`<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Frameset//EN">`

错误的文件使用这个：

```
<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T18:17:58.027

做了一些挖掘。[我在这里](http://ditanauts.org/2012/02/01/reporting-on-your-dita-repository-with-powershell/)看到的一个潜力是编写一个忽略 DTD 的函数。这个想法也应该对你有用。

```
Function Get-XML ($filePath) {
$fileContent = New-Object System.Xml.XmlDocument
$fileContent.XmlResolver = $null
Try {
    $fileContent.Load($filePath)
    }
Catch [system.exception] {
    write-host "Could not open file $filePath"
}
$fileContent 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T16:03:35.070

虽然我无法使用@GaussianBlur 的建议忽略 DTD，但该解决方案确实发现了元数据中的一些奇怪之处。

我注意到任何有`<?xml version="1.0" encoding="utf-8" ?>`错误的东西，而在 HTML 中没有该行的文件转换时没有发生任何事件。

我所有的 HTML 文件中的一个简单的全局替换/删除快速解决了这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-23T09:51:31.803

对于我所需要的，我只使用 Gaussian Blur 的回答中的一行来完成这项工作

我已经有了这个： $xml = New-Object -TypeName XML

我刚刚添加了这个： $xml.XmlResolver = $null

这成功地忽略了 DTD

# sql - 按来自第 4 个表的字段上的 3 个不同表的 3 个不同计数分组

> ID：15794560
> 
> 赞同：0
> 
> 时间：2013-04-03T17:56:28.780
> 
> 标签：sql, count, group-by

使用这些表：

```
Table name:      Fields:
Users            userID
F                fID,userID
B                total,userID,bID
L                lID,bID 
```

Users.userID 是“键”，它与其他表的关系是：

F.userID 与 Users.userID 相同 B.userID 与
Users.userID 相同 L.bID 与 B.bID
相同

对于每个 Users.userID，我需要显示：

F 中该用户 ID 的 fID 计数，B 中该用户 ID
的所有“总数”的总和，
以及来自 L 中的 B 的所有 lID 的计数。

（看下面的查询后会更清楚：）

我试过这个：

```
SELECT Users.userID, COUNT(F.fID) as 'fcount', SUM(B.total) as 'bcount', COUNT(L.lID) as 'lcount' 
FROM Users
    JOIN F ON F.userID=Users.userID
    JOIN B ON B.userID=Users.userID
    JOIN L ON L.bID=B.bID
GROUP BY Users.userID 
```

现在，“计数”列显示的数字高得不合理，这并不能反映我希望得到的结果，而且我不知道它们来自哪里（也不需要，只需要知道如何得到正确的计数:)）。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T18:09:36.793

连接为左侧的每一行重复右侧的每个匹配行。如果您连接多个表，则行会重复更多。

例如，假设客户有五个订单和两个地址。然后以下查询将返回 1 x 5 x 2 = 10 行：

```
select  *
from    Customer c
join    [Order] o
on      o.CustomerID = c.ID
join    Address a
on      a.CustomerID = c.ID
where   c.ID = 42 
```

如果您计算此行集的订单总数，您将得到两倍的金额，因为每个订单都针对每个地址重复。

这通常通过保证每组只返回一行的子查询来解决：

```
select  u.userID
,       fcount
,       bcount
,       lcount
from    Users u
join    (
        select  UserID
        ,       count(*) as fcount
        from    F
        group by
                UserID
        ) F
on      F.UserID = u.UserID
join    (
        select  UserID
        ,       sum(*) bcount
        from    B
        group by
                UserID
        ) B
on      B.UserID = u.UserID
join    (
        select  B.UserID
        ,       count(*) lcount
        from    B
        join    L
        on      L.bID = B.bID
        group by
                B.UserID
        ) L
on      L.UserID = u.UserID 
```

# ios - 用于从文件创建一组对象的单独类？

> ID：15794561
> 
> 赞同：0
> 
> 时间：2013-04-03T17:56:31.943
> 
> 标签：ios, design-patterns

我在学习 OOP 时正在创建一个 iPhone 应用程序。我有两个名为 GUTimer 和 GUInterval 的类。每个实例都需要存档到 plist 并在需要时单独取消存档。我的问题是，我是否应该创建一个管理器类来管理这两种对象类型的加载和保存。或者我应该创建单独的类，一个管理 GUTimer 实例的保存和加载，一个管理 GUInterval 实例的保存和加载？我仍在学习 OOP，这是针对我的分级项目，所以我只想提出最好的解决方案。任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T18:16:00.150

我会让你的对象实现 NSCoding 协议，然后使用类似这样的东西来归档/取消归档它们：

```
+ (NSObject *)readArchiveFile:(NSString *)inFileName
{
    NSFileManager *fileMgr = [NSFileManager defaultManager];
    NSString *documentsDirectoryPath = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES)[0];
    NSString *filePath = [NSString stringWithFormat:@"%@/%@", documentsDirectoryPath, inFileName];

    NSObject *returnObject = nil;
    if( [fileMgr fileExistsAtPath:filePath] )
    {

        returnObject = [NSKeyedUnarchiver unarchiveObjectWithFile:filePath];
    }

    return returnObject;

}

+ (void)archiveFile:(NSString *)inFileName inObject:(NSObject *)inObject
{
    NSString *documentsDirectoryPath = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES)[0];
    NSString *filePath = [NSString stringWithFormat:@"%@/%@", documentsDirectoryPath, inFileName];
    BOOL didSucceed = [NSKeyedArchiver archiveRootObject:inObject toFile:filePath];
    if( !didSucceed )
    {
        NSLog(@"File %@ write operation %@", inFileName, didSucceed ? @"success" : @"error" );
    }

}

+ (void)deleteFile:(NSString *)inFileName
{
    NSFileManager *fileMgr = [NSFileManager defaultManager];
    NSString *documentsDirectoryPath = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES)[0];
    NSString *filePath = [NSString stringWithFormat:@"%@/%@", documentsDirectoryPath, inFileName];
    NSError *error;
    if ( [fileMgr fileExistsAtPath:filePath] && [fileMgr removeItemAtPath:filePath error:&error] != YES)
    {
        NSLog(@"Unable to delete file: %@", [error localizedDescription]);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T18:02:57.393

这个问题真的没有正确答案。如果您正在学习 OOP，那么您很快就会明白这一点。我能给出的最佳建议是将您的对象分解为功能区域，然后是大小。为了可读性，您想避免使用大类，但除此之外，它基本上取决于您自己的喜好。如果您可以证明特定的设计决策是合理的，那么它可能对您有用。

# python - wxpython wx.TreeCtrl，树的哪个子项触发事件 wx.EVT_TREE_ITEM_ACTIVATED？

> ID：15794573
> 
> 赞同：0
> 
> 时间：2013-04-03T17:57:12.657
> 
> 标签：python, event-handling, wxpython, treecontrol

我正在制作一个树 ctrl，需要找出双击的来源。

代码：

```
def _initElementsOfTreePanel(self, panel):
    tree = wx.TreeCtrl(panel, -1, wx.Point(0, 0), wx.DefaultSize, wx.NO_BORDER | wx.TR_DEFAULT_STYLE)

    root = tree.AddRoot("Elements")
    items = []
    imglist = wx.ImageList(16, 16, True, 2)
    imglist.Add(wx.ArtProvider_GetBitmap(wx.ART_FOLDER, wx.ART_OTHER, wx.Size(16, 16)))
    imglist.Add(wx.ArtProvider_GetBitmap(wx.ART_NORMAL_FILE, wx.ART_OTHER, wx.Size(16, 16)))
    tree.AssignImageList(imglist)

# #        Create the element Tree (the left hand side panel). Places in it all the found functions 
    def appendSubitems(item, func_list, tree):
        print item
        for func in func_list:
            itemid = tree.AppendItem(item, func.__name__, 1)
            print"GUIFrame._initElementsofTreePanel, func:",func.__name__,"id:",itemid

#        print "TreeItemId:",
    appendSubitems(tree.AppendItem(root, "Input functions", 0), self._elemdisco.input_functions, tree) 
    appendSubitems(tree.AppendItem(root, "Processing functions", 0), self._elemdisco.processing_functions, tree)
    appendSubitems(tree.AppendItem(root, "Output functions", 0), self._elemdisco.output_functions, tree)
    appendSubitems(tree.AppendItem(root, "Other functions", 0), self._elemdisco.other_functions, tree)

    tree.ExpandAll()
    self.Bind(wx.EVT_TREE_ITEM_ACTIVATED, self._addNodeToSchema, self.treePanel.tree)

def _addNodeToSchema(self,event):
    print event.GetItem() 
```

现在输出显示，无论双击哪个节点，它都会识别出相同的项目触发了事件。它不对应于我知道我添加的任何项目的 ID，也没有根的 ID。

任何人都知道我如何获得对树中对象的引用？我基本上想得到它的名字，但是这个 API 不会让我：P

[编辑]：求解器，但我认为这是一个框架错误。无论双击实际发生在何处，事件都没有理由返回相同的 TreeItemID。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T20:07:04.477

```
def _addNodeToSchema(self,event):
    pt = event.GetPoint()
    item, _ = self.treePanel.tree.HitTest(pt)
    if item:        
        print self.treePanel.tree.GetItemText(item) #this is the label of the node 
```

显然，必须获得点位置，并查询树中可以在该位置找到的任何元素:) 不是很OO，但我会接受。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-19T10:41:52.017

'''拖拽事件多选，显示被拖拽的项目

```
def On_Drag(self,event):
    select = (self.custom_tree.GetSelections())
    for i in range(len(select)):
        print(self.custom_tree.GetItemText(select[i]))''' 
```

# powershell - 从 Powershell 中的对象数组中删除项目

> ID：15794576
> 
> 赞同：5
> 
> 时间：2013-04-03T17:57:24.490
> 
> 标签：powershell, powershell-2.0

我有一个数组对象 $a ，它返回如下所示的输出。

![假设 $a 返回这个](https://i.stack.imgur.com/s3b7u.png)

通过 $a[0].Name 我可以访问每个“名称”条目，$a[0].Available 我可以访问其相应的可用空间。

我有另一个数组说 $b 包含一些名称，说 $b 返回两个名称“sandeep_aggr1”和“aggr4”。这只是一个数组（没有 Name、Avaiable 等属性），不是对象，因此不能使用 Compare-Object。

我想删除原始对象 $a 中的其他条目，但“名称”等于“sandeep_aggr1”和“aggr4”的条目除外。

这就是我正在做的事情。

```
foreach($bb in $b)
    {
          foreach($aa in $a)
          {
                if($aa.Name -ne $bb)
                {
                   $aa.Remove($aa.Name)
                }

          }

    }

    echo $a 
```

但是，我没有看到删除的元素，我在这里遗漏了什么吗？任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-03T18:15:13.163

如果我正确阅读了这个问题，这应该有效：

```
$a = $a | where {$b -contains $_.Name} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-23T14:30:15.663

我遇到了同样的问题，如果 $a 变成只有一个元素的数组，它就不起作用了。Powershell 放弃了 $a 是一个数组的事实。这是非常有问题的，因为我之后使用了 JSON 转换。

我刚刚添加了一个演员表：

```
$a = [array]($a | where {$b -contains $_.Name}) 
```

# java - 在本地测试 spring openshift 应用程序

> ID：15794577
> 
> 赞同：6
> 
> 时间：2013-04-03T17:57:25.773
> 
> 标签：java, spring, tomcat, jboss, openshift

我有一个在 Openshift 上运行的应用程序。它工作正常，但测试很困难，因为我必须将每件小事都推到 openshift 并等待所有构建并重新启动以查看更改。

所以我试图找到一种在本地测试应用程序的方法。另一个人在这里问了同样的问题：[如何在本地主机上测试 openshift 应用程序](https://stackoverflow.com/questions/11222924/how-to-test-an-openshift-application-on-local-host)，但我想知道是否存在更简单的解决方案。

我在这里使用了快速启动项目[http://github.com/openshift/spring-eap6-quickstart.git](http://github.com/openshift/spring-eap6-quickstart.git)来启动它。所以基本上它是一个使用 Hibernate 的 Spring 应用程序。

我想在`persistence.xml`项目中有两组配置文件（等），一组用于本地 Tomcat 服务器，一组用于 Jboss eap，并`web.xml`根据我要部署到的服务器进行更改。这是可行的吗？看起来很简单，在更改项目之前，我害怕出现任何意外问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T22:36:10.437

这就是我最终做的事情。我将原始`web.xml`文件重命名为`web-openshift.xml`. 在 OpenShift 中构建项目时，`openshift`会使用 maven 配置文件。您可以`<profiles>`在 pom.xml 的部分中找到它。所以我在我的添加了一行`pom.xml`：

```
<build>
  <plugins>
    <plugin>
      <artifactId>maven-war-plugin</artifactId>
         <configuration>
         ....
           <webXml>src/main/webapp/WEB-INF/web-openshift.xml</webXml>  <!--add this--> 
```

这使得在构建战争时`maven-war-plugin`使用该文件作为 Web 部署描述符。`web-openshift.xml`然后我添加了一个`web.xml`文件，它将用于我的本地构建。在这些文件中，您可以使用以下内容配置您的 servlet：

```
<init-param>
   <param-name>contextConfigLocation</param-name>
   <param-value>/WEB-INF/jboss-as-spring-mvc-context.xml</param-value> 
```

因此，通过更改`<param-value>`我的两个`web.xml`文件中的 ，我能够以不同的方式配置 Spring 和 Hibernate。

然后我将标记为的 jar 添加`<provided>`到`pom.xml`我`\lib`的 Tomcat 安装目录中。现在我能够将应用程序部署并运行到 OpenShift 和 Tomcat。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T23:57:17.287

如果您有快速连接，您可以在本地服务器上运行您的应用程序，并让 persistence.xml 指向 openshift 数据库。要远程访问数据库，您必须使用端口转发（[https://www.openshift.com/blogs/getting-started-with-port-forwarding-on-openshift](https://www.openshift.com/blogs/getting-started-with-port-forwarding-on-openshift)）。您需要设置 rhc 客户端 ( [https://www.openshift.com/developers/rhc-client-tools-install](https://www.openshift.com/developers/rhc-client-tools-install) ) 并运行 rhc 端口转发客户端来访问数据库。然后，您可以点在您的 tomcat 服务器上运行 eclipse 项目，它将（使用 persistence.xml 我假设您使用数据库）连接到数据库。任何代码更改都将像任何其他 tomcat 项目一样处理。大多数情况下不需要单独的 web.xml（除非您有一些特定于 openshift 的配置）。

如果需要，您甚至可以使用 Toad 等工具连接到数据库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-11T19:31:29.443

在我在本地和 Openshift 上运行的应用程序中，我使用持久的 app-root/data 文件夹来存储任何特定的 OpenShift 配置。

在我的 web.xml 中，我包含以下属性：

```
<context:property-placeholder location="file:${user.home}/app-root/data/configuration.properties"/> 
```

如果您要管理敏感的配置属性，例如用户名和密码，Openshift 的环境变量可以发挥很大作用。例如，您可以将以下属性放在 pom.xml 中的 openshift 配置文件下：

```
<properties>
  <db.username>${env.OPENSHIFT_POSTGRESQL_DB_USERNAME}</db.username>
  <db.password>${env.OPENSHIFT_POSTGRESQL_DB_PASSWORD}</db.password>                    
  <db.connectionURL>postgresql://${env.OPENSHIFT_POSTGRESQL_DB_HOST}:5432/${env.PGDATABASE}</db.connectionURL>
</properties> 
```

从 Openshift 环境变量中检索数据库连接属性。然后，您可以使用 maven 的资源过滤将这些属性放入特定目录中的任何文件中，例如 src/main/resources

我自己的本地数据库连接属性在我的 ~/.m2/settings.xml 文件中的配置文件中进行管理。

这种方法使我能够：

*   将所有敏感属性排除在我的公共代码存储库之外
*   通过启用/禁用 Maven 构建配置文件非常简单地在 openshift 和本地部署之间切换。

# git - Smartgit 错误：“推送错误并非所有参考都已推送”

> ID：15794578
> 
> 赞同：1
> 
> 时间：2013-04-03T17:57:26.317
> 
> 标签：git, bitbucket, repository, git-commit

我正在将 Smartgit 与从“bitbucket.org”托管的存储库一起使用。

我收到此错误消息：

> 错误并非所有参考都已被推送

并且没有提交更改。这个错误是什么意思？

这是我围绕这个 repo 的最新操作的完整日志：

```
LF will be replaced by CRLF in apps/frontend/modules/persona/templates/indexSuccess.php.
The file will have its original line endings in your working directory.
LF will be replaced by CRLF in apps/frontend/modules/persona/templates/indexSuccess.php.
The file will have its original line endings in your working directory.
LF will be replaced by CRLF in apps/frontend/modules/persona/templates/indexSuccess.php.
The file will have its original line endings in your working directory.
LF will be replaced by CRLF in apps/frontend/modules/persona/templates/indexSuccess.php.
The file will have its original line endings in your working directory.
LF will be replaced by CRLF in apps/frontend/modules/persona/templates/indexSuccess.php.
The file will have its original line endings in your working directory.
[master 3c24f17] Modificada la plantilla, añadidos enlaces para editar/eliminar
 1 file changed, 8 insertions(+), 6 deletions(-)
'master' rejected (non-fast-forward)
error: failed to push some refs to 'https://reynierpm@bitbucket.org/reynierpm/hisclinicas.git'
hint: Updates were rejected because the tip of your current branch is behind
hint: its remote counterpart. Merge the remote changes (e.g. 'git pull')
hint: before pushing again.
hint: See the 'Note about fast-forwards' in 'git push --help' for details. 
```

我尝试了@niculare 的建议，`git pull`但现在我得到了这些错误：

> Rebase: rebase failed (return code 1) Eliminados ficheros de BD antiguos e inservibles # Please enter the commit message for your changes。以“#”开头的 # 行将被忽略，并且一条空消息中止提交。# 目前不在任何分支上。# 你目前正在变基。#（所有冲突已修复：运行“git rebase --continue”）##要提交的更改：#（使用“git reset HEAD ...”取消暂存）##修改：database.sql#修改：
> hisclinicas.sql # [detached HEAD 277cd27] Eliminados ficheros de BD antiguos e inservibles 2 个文件已更改，1155 次删除 (-) 重写 database.sql (100%) 重写 hisclinicas.sql (100%) 重新定位 (3/10) 重新定位 (4 /10) 变基 (5/10) 变基 (6/10) 错误：无法应用 7b8d48e... Eliminadas las tablas y los modulos ciudades y parroquias (se dejo solo en Estados -> Municipios) 当你解决了这个问题时，运行“git rebase --continue”。如果您希望跳过此补丁，请运行“git rebase --skip”。要检查原始分支并停止变基，请运行“git rebase --abort”。LF 将被 lib/filter/doctrine/base/BaseHclinicaFormFilter.class.php 中的 CRLF 替换。该文件将在您的工作目录中具有其原始行结尾。LF 将被 lib/filter/doctrine/base/BasePersonaFormFilter.class.php 中的 CRLF 替换。该文件将在您的工作目录中具有其原始行结尾。LF 将被 lib/form/doctrine/base/BaseHclinicaForm.class.php 中的 CRLF 替换。该文件将在您的工作目录中具有其原始行结尾。LF 将被 lib/form/doctrine/base/BasePersonaForm.class.php 中的 CRLF 替换。该文件将在您的工作目录中具有其原始行结尾。LF 将被 lib/model/doctrine/base/BaseHclinica.class.php 中的 CRLF 替换。该文件将在您的工作目录中具有其原始行结尾。无法选择 7b8d48e4229e423994f0cb6148bfb35c1e1c744d 该文件将在您的工作目录中具有其原始行结尾。LF 将被 lib/form/doctrine/base/BaseHclinicaForm.class.php 中的 CRLF 替换。该文件将在您的工作目录中具有其原始行结尾。LF 将被 lib/form/doctrine/base/BasePersonaForm.class.php 中的 CRLF 替换。该文件将在您的工作目录中具有其原始行结尾。LF 将被 lib/model/doctrine/base/BaseHclinica.class.php 中的 CRLF 替换。该文件将在您的工作目录中具有其原始行结尾。无法选择 7b8d48e4229e423994f0cb6148bfb35c1e1c744d 该文件将在您的工作目录中具有其原始行结尾。LF 将被 lib/form/doctrine/base/BaseHclinicaForm.class.php 中的 CRLF 替换。该文件将在您的工作目录中具有其原始行结尾。LF 将被 lib/form/doctrine/base/BasePersonaForm.class.php 中的 CRLF 替换。该文件将在您的工作目录中具有其原始行结尾。LF 将被 lib/model/doctrine/base/BaseHclinica.class.php 中的 CRLF 替换。该文件将在您的工作目录中具有其原始行结尾。无法选择 7b8d48e4229e423994f0cb6148bfb35c1e1c744d LF 将被 lib/form/doctrine/base/BasePersonaForm.class.php 中的 CRLF 替换。该文件将在您的工作目录中具有其原始行结尾。LF 将被 lib/model/doctrine/base/BaseHclinica.class.php 中的 CRLF 替换。该文件将在您的工作目录中具有其原始行结尾。无法选择 7b8d48e4229e423994f0cb6148bfb35c1e1c744d LF 将被 lib/form/doctrine/base/BasePersonaForm.class.php 中的 CRLF 替换。该文件将在您的工作目录中具有其原始行结尾。LF 将被 lib/model/doctrine/base/BaseHclinica.class.php 中的 CRLF 替换。该文件将在您的工作目录中具有其原始行结尾。无法选择 7b8d48e4229e423994f0cb6148bfb35c1e1c744d

错误是什么意思，我该如何解决？

# c - 如何减少C中的排列数

> ID：15794580
> 
> 赞同：1
> 
> 时间：2013-04-03T17:57:30.290
> 
> 标签：c, gsl

我正在使用 GSL 函数生成排列，它工作正常并产生 4！排列。

```
gsl_permutation * p = gsl_permutation_calloc (4);
gsl_permutation_init (p);
do 
{
gsl_permutation_fprintf (stdout, p, " %u");
 printf("\n");
}
while (gsl_permutation_next(p) == GSL_SUCCESS);
return 0; 
```

输出是

```
0 1 2 3
1 0 2 3
...... n! 
```

我的问题是我想减少基于两个并行数组的排列数。

```
int value=  {0,1,2,3};
int id  = {1,1,3,3}; 
```

在生成“值”的排列之前我想要什么，它将减少元素的数量

伪代码

```
if id of value element==id of next value element
join that elements like below
newValue= {0_1,2_3}
so total no of elements are 2
I will then pass this 2 to generate permutation
result should be 2!
and after permutation if one of the permutation should be {1,0}
it will re-split it into {2,3,0,1} 
```

我不知道我将如何在 C 中做到这一点。需要一些帮助。

谢谢

# python - 如何在 Django (1.2) ManyToMany 关系中获取所有模型的查询集？

> ID：15794582
> 
> 赞同：0
> 
> 时间：2013-04-03T17:57:38.347
> 
> 标签：python, model-view-controller, django-orm, django-1.2

我有一个 Project 模型，它有一个先决条件属性，它是一个链接到其他项目的 ManyToMany 字段。也就是说，每个项目可以有 0+ 个项目必须完成才能完成。

```
class Project(models.Model):
    title = models.CharField(max_length=200)
    prequisites = models.ManyToManyField('self', null=True, blank=True) 
```

我如何返回该项目的先决条件所有项目？我想做这样的事情：

```
project_a = Project.objects.get(title="My Cool Project")

for pre_requisite in project_a.prequisites:
    # do something with pre_requisite 
```

但`project_a.prequisites`返回一个`ManyRelatedManager`对象。特殊的 _set 属性似乎也不起作用：

```
project_a.prequisites_set
AttributeError: 'Project' object has no attribute 'prequisites_set' 
```

我正在考虑在另一个模型中对先决条件进行建模：

```
class ProjectPrequisite(models.Model):
    project = models.ForeignKey(Project)
    prequisite = models.ForeignKey(Project) 
```

但我宁愿*以正确的方式做事*，如果你明白我的意思的话。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T18:01:45.677

`project_a.prequisites.all()`

将返回`Project`通过您的 manytomanyfield 连接的所有实例

管理器允许您像通过`objects`模型的属性一样过滤和获取查询集对象

这将允许你做类似的事情

`project_a.prequisites.filter(title='a_prereq_title')`

# asp.net - ASP.Net中Gridview和Repeater的区别

> ID：15794584
> 
> 赞同：-2
> 
> 时间：2013-04-03T17:57:45.213
> 
> 标签：asp.net

我可以知道asp.net中gridview和repeater之间的确切区别吗？此外，如果我动态地从数据库中检索值，如果我想从中编辑特定记录，那么哪个选项是可行的。请帮助我，因为我是 ASP.Net 的新手，提前谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T18:16:47.207

这可能会给出一些关于repeater 和gridview、
[Repeater、ListView、DataList、DataGrid、GridView 之间区别的想法......该选择哪个？](https://stackoverflow.com/questions/139207/repeater-listview-datalist-datagrid-gridview-which-to-choose)

您可以使用类似的事件

*   YourGridViewID_RowEditing
*   YourGridViewID_RowUpdating
*   YourGridViewID_RowDataBound

以及更多的操作，如编辑/更新/删除等，使用一行中的值。
如果你用谷歌搜索这些事件名称，你会得到很多点击。

中继器还提供诸如

*   YourRepeaterID_ItemDataBound

希望这可以帮助您开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T18:17:22.657

**：`GridView`**它支持分页，但不提供灵活的布局，因为它主要用于在基于表格的布局中显示数据。如果我们查看数据插入，Gridview 没有内置支持插入数据（因为当您单击 CommadName 设置为 "Insert" 的按钮时，它不会调用底层数据源的 insert 方法）。

**Repeater控件**：你会发现它提供了一个灵活的布局，但它不支持数据分组、插入、删除、更新和数据分页。

Repeater 和 GridView 控件的使用方式不同。当您想要以表格格式显示一组数据时，使用 GridView 控件。当您想要重复显示数据但不一定以表格格式显示数据时，可以使用中继器。如果需要表格，请使用 GridView，否则使用中继器。两者之间的加载/更新速度可以忽略不计。听起来 GridView 是您可能正在寻找的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T18:01:29.780

[http://weblogs.asp.net/gunnarpeipman/archive/2008/07/25/gridview-or-repeater.aspx](http://weblogs.asp.net/gunnarpeipman/archive/2008/07/25/gridview-or-repeater.aspx)

如果您需要编辑，请使用 GridView。

# branch - 什么是退役 Perforce 流的好方法

> ID：15794587
> 
> 赞同：4
> 
> 时间：2013-04-03T17:57:52.427
> 
> 标签：branch, perforce

我们在我的工作场所使用 Perforce，我们决定尝试使用流来隔离单独的开发工作。我们中的一些人在 Git 方面拥有丰富的经验，因此我们（可能不正确地）将 Git 约定映射到流。

手头的问题是功能分支/功能流以及如何淘汰它们。我们已经有 30 多个流，但其中一些流已经过时并且不再活跃。

如果我们删除一个流，流列表会变得更干净一些，但仓库文件仍然保持在它们留下的任何状态。如果后来有人创建了一个同名的新流（这在我们的环境中是相当合理的），他们需要确保将 Main 中的最新文件合并到流中。更糟糕的是，如果有人创建了一个流，进行了一些探索性提交，然后放弃了该流，那么下一个流所有者必须小心地首先将流置于良好状态。

我们可以更进一步，在删除流之前删除与流关联的 depot 文件，但是我们必须小心不要将此更改复制到 Main。在恢复流时，我们可以强制将 Main 集成到流的 depot 路径中，这应该在流的两种不同用途之间建立清晰的划分。

无论如何，这些只是我的一些想法。我真的很希望看看是否有人对如何将流用作功能分支有建议，特别是是否有人对如何退休并可能稍后创建同名流以用于新功能有任何实用建议。或者，也许我们正在以错误的方式看待流，我们需要找到一个不涉及“特征流”的解决方案——这些建议也将受到赞赏。

**更新**

最后，我们决定简单地为每个功能创建一个新流。在流名称中，我们包含问题编号以及流的含糊的纯英文名称。这允许工作完全分开，防止死流“意外”复活，并且给我们一个明确的时间来退出流的“流规范”一半（即当问题关闭时）。我们最终在实际的仓库树中出现了很多混乱，但我看不出有任何方法可以避免这种情况。如果取消选择大多数流，图形流视图是可管理的。最后，这不是一个很好的解决方案，但它似乎是我们能做的最好的，直到 Perforce 添加一些更轻量级的分支。

我们还没有将 Perforce 服务器升级到支持任务流的服务器。进一步的调查使我相信这将有助于解决一些混乱问题，但不会解决命名问题。目前还不清楚仓库树中的杂乱是否可以用任务流隐藏。当我们升级我们的服务器时，我会发现。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T20:14:30.593

你看过最新的 2013.1 版本的 Perforce 吗？新的“任务流”功能听起来就像您正在寻找的一样！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-08T08:30:20.520

对于使用旧版本 P4 的人，如果您真的要完全停用流，您可以通过 p4admin 删除其文件。如果您希望保留更改历史记录，请不要这样做。

如果您关心更改历史记录，则永远不要删除流。只需通过删除流来让它们休息。您可以“复活”流（如果您想重用名称）并合并到流中，接受来自父流的所有更改；但是，这并不是真正推荐的。有一个防止名称重复使用的命名方案可能会好得多。

注意：如果您在 P4V 中查看流库，您可以看到“已删除”的流在 P4 中仍有其文件/历史记录。如果您不想“恢复”已删除的流，请务必在创建新流之前检查此列表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-01T19:11:19.280

我们通过进入流的“高级”选项卡并选中“将文件提交到仅限流所有者的流”来管理它，因此实质上它被锁定给除了创建它的 CM 团队之外的所有人。

# android - 姜饼上的TextView旋转

> ID：15794589
> 
> 赞同：1
> 
> 时间：2013-04-03T17:58:02.180
> 
> 标签：android, android-layout, android-widget, textview, android-2.3-gingerbread

在 Honeycomb 及更高版本上，我可以轻松地以度数旋转 TextView：

```
android:rotation(90) 
```

但这在 Honeycomb、Gingerbread 和 Froyo 上不起作用。

我可以用什么代替？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T18:01:57.577

您可以在 anim 文件夹中声明旋转动画

下面的片段会帮助你。

**文本动画.xml**

```
 <?xml version="1.0" encoding="utf-8"?>
   <rotate xmlns:android="http://schemas.android.com/apk/res/android"
        android:fromDegrees="10" android:toDegrees="90" android:pivotX="50%"
        android:duration="100">
   </rotate> 
```

**内部代码**

```
TextView tv = (TextView)findViewById(R.id.text);
tv.setAnimation(AnimationUtils.loadAnimation(this,R.anim.textanim)); 
```

# php - 非常大的文档，如何提高加载，因为超过 50% 没有显示在一个单一的时间？

> ID：15794591
> 
> 赞同：0
> 
> 时间：2013-04-03T17:58:24.320
> 
> 标签：php, javascript, jquery

我的页面（您可以[在此处](https://tornhq.com/WorkingOn/InteractiveMap/implementing.html)查看）在完成时将是一个非常大的文档，并且在尝试加载页面时可能会超时。在此页面的底部，有一个滑块，由于 Javascript 被重写，该滑块目前无法正常工作，但您仍然可以看到 6 个图像/链接。

1.  加载页面，#Map-Selection-Info（侧边菜单）的#Current 部分下的当前滑块和选项卡将像现在一样加载。
2.  单击一个国家/大陆后，#Current 选项卡将切换，在该选项卡上，将有一个选项可以专注于该国家/地区。
3.  聚焦后，我需要 #Current 部分下的当前选项卡（它是选项卡切换器内的选项卡切换器）来加载一组新信息，并使用滑块加载一组新的图像/链接。

在没有实现加载内容的情况下，无论是在 Javascript/JQuery 还是 PHP 中，还是其他的，都有望使页面运行更流畅。

我的问题是应该如何加载这些内容。我页面上的当前 JQuery 代码是我自己用 JQuery 真正完成的第一件事，我什至不知道要搜索什么来做我个人认为应该怎么做的事情，我什至不知道知道这是否是最好的方法。

希望你明白我在解释什么，如果你明白了，我不会要求任何脚本、讲义或其他什么，我只需要知道我应该做什么，以便能够搜索相关内容以便能够更向前。

最好的祝福，

蒂姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T18:02:25.170

看看阿贾克斯。它有助于动态加载内容。

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

一种可能性是将信息、图像和链接的 html 放在一个大资源文件中。ajax 会做的是访问该页面，找到指定的 div（可能是通过 ID），获取内容，然后替换您要替换的内容。

# twitter-bootstrap - Twitter bootstrap：手机上的模态

> ID：15794592
> 
> 赞同：3
> 
> 时间：2013-04-03T17:58:32.657
> 
> 标签：twitter-bootstrap, modal-dialog

我试图弄清楚为什么当它出现时我似乎无法点击模式内的任何东西（在移动设备上 - 它在电脑浏览器中工作正常）。我有一个像这样的代码，它是来自 twitter bootstrap 的基本模式：

```
<!-- Modal -->

<div id="myModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal" aria hidden="true">×</button>
      <h3 id="myModalLabel">choose!</h3>
    </div>
    <div class="modal-body">
      <div class="row-fluid">
       <form>
         <fieldset>
             <select class="input-large">
             <option value="0">10:15</option>
             <option value="1">12:45</option>
             <option value="2">13:15</option>
            </select>
         </fieldset>
       </form>
     </div>
   </div>
   <div class="modal-footer">
      <button class="btn pull-left" data-dismiss="modal" aria-hidden="true">Close</button>
      <button class="btn btn-primary">Save changes</button>
   </div>
</div> <!-- modal END --> 
```

这个模态是由 javascript 事件打开的。它打开得很好，但在我的手机上我无法单击（或者我一直错过？）按钮或点击选择字段。对此有什么想法吗？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T08:22:54.663

找到了解决方案..如果有人会遇到同样的问题。刚刚在模态中添加了“活动”类，现在可以正常工作了。

```
class="modal hide fade active" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-13T22:36:16.010

我有同样的问题。这是由包含`bootstrap-responsive.css`（在我的情况下为 v2.0.3）引起的，当您点击输入字段并弹出关键字时，它会影响模式及其版本的正确显示。我用这个稍微修改了[这个](https://stackoverflow.com/questions/10437151/twitter-bootstrap-modal-on-mobile-devices)StackOverflow 问题中的补丁：

```
.modal { 
    position: fixed; 
    top: 20px !important; 
    right: 3%; 
    left: 3%;
    width: auto; 
    margin: 0; 
} 
```

在`@media (max-width: 480px)`和`@media (max-width: 767px)`媒体查询中，它似乎工作正常。

# linux - 在 shell 脚本中反转命令行参数

> ID：15794598
> 
> 赞同：0
> 
> 时间：2013-04-03T17:59:16.937
> 
> 标签：linux

在 Linux 中反转传递给 shell 脚本的命令行参数的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T18:00:27.987

不确定“最佳”，但这应该有效：

```
for i; do args="$i $args"; done
set -- $args 
```

请注意，这不影响`$0`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T18:39:13.930

如果您正在寻找反转参数，首先处理最后一个参数，那么以下可能会有所帮助

```
#!/bin/bash
i=$#
for x in "$@";do
  echo $i
  i=`expr $i - 1` 
done 
```

结果 ：

```
$> bash test.sh 1 2 3 4 5 6 7 8 9
9
8
7
6
5
4 
3 
2
1 
```

# objective-c - 从其他 uiview 在主 uiview 设置控件属性

> ID：15794599
> 
> 赞同：0
> 
> 时间：2013-04-03T17:59:20.440
> 
> 标签：objective-c

我有主控制器：

```
@interface BallsViewController : UIViewController
@property (weak, nonatomic) IBOutlet UILabel *InfoLabel;
@property (weak, nonatomic) IBOutlet UIButton *nextBallButton;
@property (weak, nonatomic) IBOutlet ViewBoard *viewBoard;

- (IBAction)addNextBalls:(id)sender;

@end 
```

ViewBoard 是我绘制的 UiView。有时我想向控制器发送用户无法再绘制的信息。此信息将设置为标签，用于绘制的按钮应禁用。

我怎样才能以正确的 mvc 方式实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T18:10:22.193

您想将有关是否启用绘图的信息*从*视图发送*到视图控制器，对吗？*它不会真正匹配 MVC 模式，因为在该模式中，您的视图对象不应该修改程序的状态，但是哦，好吧。让我们改用一个常见的 iOS/Mac OS 模式：

为您的视图定义一个委托协议，例如

```
@protocol ViewBoardDelegate
- (void)viewBoardDrawingDidEnable:(ViewBoard *)sender;
- (void)viewBoardDrawingDidDisable:(ViewBoard *)sender;
@end 
```

反正是这样的。现在让您的视图控制器支持该委托协议，并使视图控制器成为您的 ViewBoard 的委托。当 viewBoard 想要更改启用状态时，它可以使用委托方法，例如：

```
[self.delegate viewBoardDrawingStateDidEnable:self]; 
```

或者

```
[self.delegate viewBoardDrawingStateDidDisable:self]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T18:05:05.320

在您的实施中：

```
 -(void)stopDrawing{
nextBallbutton.enabled= false;
 //more code you need
} 
```

每当您需要停止绘图时调用此方法。如果这需要由 调用`viewBoard`，则在其中添加对 BallsViewController 的弱引用并向其发送消息。

# php - 使用 Curl 和 php 链接错误发布

> ID：15794609
> 
> 赞同：0
> 
> 时间：2013-04-03T17:59:39.363
> 
> 标签：php, facebook-graph-api, curl

我在使用 php 和 cURL 发布到 facebook 时遇到问题 我已将代码发布到 pastebin

[http://pastebin.com/pQdXq0Pi](http://pastebin.com/pQdXq0Pi)

链接是问题。如果我使用谷歌缩短的网址，则帖子不会显示在提要上。如果我更改为长网址，帖子将显示。

使困惑...

显然我已经删除了访问令牌并将其他变量更改为名称。

任何帮助，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T18:03:28.913

Facebook 需要能够跟踪重定向，如果不能，则不会抓取任何数据。

`https://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fgoo.gl%2FJ2fwI`

相对于

`https://developers.facebook.com/tools/debug/og/object?q=bit.ly%2F169bOjM`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T18:04:43.730

我想问题是短网址涉及重定向...尝试添加

curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true); 跟随重定向

# c# - 移动服务 Azure 推送 URI

> ID：15794610
> 
> 赞同：0
> 
> 时间：2013-04-03T17:59:41.673
> 
> 标签：c#, azure, windows-8, push

所以我一直在关注本教程： http: [//www.windowsazure.com/en-us/develop/mobile/tutorials/get-started-with-push-dotnet](http://www.windowsazure.com/en-us/develop/mobile/tutorials/get-started-with-push-dotnet)

和第二个教程 [http://www.windowsazure.com/en-us/develop/mobile/tutorials/push-notifications-to-users-dotnet/](http://www.windowsazure.com/en-us/develop/mobile/tutorials/push-notifications-to-users-dotnet/)

我想问的是“频道”表是干什么用的？现在，在我完成第二个教程之后，每次启动应用程序时都会在此表中创建一个新条目。

我想要做的是为一个用户提供一个频道（它们由我通过单点登录的实时 sdk 获得的 Live-User-ID 来区分）..

我正在做一个笔记应用程序，我该怎么做才能让每个用户只收到那些仅适用于他的用户 ID 的推送通知（新的笔记项目）？

我是否必须更改 Azure 管理门户中“插入”脚本中的任何内容？

```
private async void AcquirePushChannel()
{
   CurrentChannel = 
   await PushNotificationChannelManager.CreatePushNotificationChannelForApplicationAsync();

   IMobileServiceTable<Channel> channelTable = App.MobileService.GetTable<Channel>();
   var channel = new Channel { Uri = CurrentChannel.Uri };
   await channelTable.InsertAsync(channel);
} 
```

这是负责创建推送通道的代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T08:15:38.647

Channel 表本质上是存储所有访问该服务的用户的活动通道，但它不会清除旧的通道。由于 VS 每次都重新部署您的应用程序的方式，您每次都会得到一个新的。在商店部署的应用程序中，您不会看到这种行为；但是，频道确实会过期，只是不是每次运行应用程序时都会过期。由您的应用程序缓存最后使用的频道，可能在 LocalSettings 中，并在发布新频道时清除服务器端存储（本教程不做内务处理）。

不过，教程实现的工作方式似乎是，任何最近插入待办事项的人都会在其他人也进入时收到通知。在将频道与特定用户相关联的频道表中，我看不到任何内容。

也就是说，您可以添加这一点，但要意识到通道与特定用户在特定机器上的特定应用程序相关联，因此如果同一用户在两台不同机器上使用 ToDo 应用程序，则会有两个不同的“活动”通道对于该用户，通知将发送给两者。所以你真的不想要“一个用户一个频道”，你想要“一个用户每台机器一个频道”。

如果您将用户 ID 添加到 Channel 表中，并且还在插入中添加如下行中的位置：

```
var channelTable = tables.getTable('Channel').where({userId : userId}); 
```

你应该非常接近你正在寻找的东西。

# ruby - rvm - 我可以将通过 rvm 安装的 ruby 版本设置为系统默认值（我认为会这样）吗？

> ID：15794611
> 
> 赞同：0
> 
> 时间：2013-04-03T17:59:42.917
> 
> 标签：ruby, rvm, passenger

我总是很难用 rvm 很抱歉，如果这个问题得到了回答 - 我必须不经常使用 rvm，所以有些想法没有完全融入。

在我的服务器上（Digital Ocean 的一个新的 droplet）我以用户身份安装了 rvm `deploy`，通过：

```
$\curl -L https://get.rvm.io | bash -s stable
$ source /home/deploy/.rvm/scripts/rvm
$rvm install 1.9.3-p392
$rvm use 1.9.3 --default 
```

如果我以 root 身份登录，我看不到这个 ruby​​。我可以把它变成系统红宝石还是我犯了一个错误？例如，我尝试通过以下方式安装乘客的 nginx 组件：

```
root$ passenger-install-nginx-module 
```

但得到

```
root$ passenger-install-nginx-module: command not found 
```

和

```
root$ which ruby # nothing 
```

我是否应该将添加 /home/deploy/.rvm/rubies/ruby-1.9.3-p392/bin/ 的路径添加为环境变量（我对此表示怀疑）？还是我完全搞砸了（这没关系，因为我们在液滴上没有任何东西）？这是管理红宝石的推荐方法吗？

提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T18:29:48.627

您必须先将环境加载到文件夹中。在终端中运行此命令：

```
 $ rvm use 1.9.3 
```

然后“ruby -v”必须工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T18:30:42.313

在此页面上查找*多用户安装*指南： [https](https://rvm.io/rvm/install/) ://rvm.io/rvm/install/ （安装方式`sudo`）

# java - Envers - 显示带有关系的审计数据

> ID：15794612
> 
> 赞同：4
> 
> 时间：2013-04-03T17:59:43.723
> 
> 标签：java, hibernate, spring-mvc, hibernate-envers

*   我`@Audited`在我的实体中添加了；
*   我创建了侦听器以将用户 ID 添加到`revinfo`；
*   我可以使用用户 ID、实体类、最小和最大日期过滤审计数据，使用：

    ```
    public <T extends BaseModel> List<Object[]> buscar(Class<T> clazz, Usuario usuario, java.util.Date inicio, java.util.Date fim){
    GregorianCalendar novo = new GregorianCalendar();
    novo.setTime(fim);
    novo.add(Calendar.DAY_OF_MONTH, 1);

    AuditReader reader = AuditReaderFactory.get(getEm());
    return reader.createQuery()
        .forRevisionsOfEntity(clazz, false, true)
        .add(AuditEntity.revisionProperty("usuario")
            .eq(usuario))
        .add(AuditEntity.revisionProperty("revtstmp")
            .between(inicio.getTime(), novo.getTime().getTime()))
        .addOrder(AuditEntity.property("id")
            .asc())
        .getResultList();

    } 
    ```

但是所有的关系都是懒惰的，包括`@ManyToOne`.

我发现很多关于问题的帖子`@OneToMany`，但事实并非如此

我可以做些什么来访问这些属性？

PS：我试过了，但无法突出显示代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T18:20:19.757

Envers 返回的对象中的所有关系都是惰性的，无论是一对多还是多对一。

在一个对象中，要访问相关对象的属性，只需调用 getter :)

在查询中，这是不可能的。不支持连接，无论关系类型如何。您只能限制相关实体的 id，但不能限制其属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-22T04:24:45.213

从 hibernate-envers 中的 4.x 版本开始，您不需要配置侦听器。您可以使用@Audited 轻松审核实体。

# c# - rabbitmq 消费者成为生产者

> ID：15794617
> 
> 赞同：2
> 
> 时间：2013-04-03T17:59:56.283
> 
> 标签：c#, .net, rabbitmq, message-queue

我在消费者内部接收来自 RabbitMQ 的消息。我必须处理该消息并将处理后的消息发布到不同的队列中。我将如何做到这一点？

我的代码是

```
using (IConnection connection = factory.CreateConnection())
{
    using (IModel channel = connection.CreateModel())
    {
        if (!String.IsNullOrEmpty(EXCHANGE_NAME))
            channel.ExchangeDeclare(EXCHANGE_NAME, ExchangeType.Direct, durable);

        if (!String.IsNullOrEmpty(QUEUE_NAME))
            channel.QueueDeclare(QUEUE_NAME, false, false, false, null);

        string data = "";
        EventingBasicConsumer consumer = new EventingBasicConsumer();
        consumer.Received += (o, e) =>
        {
            //This is the received message
            data = data + Encoding.ASCII.GetString(e.Body) + Environment.NewLine;
            string processed_data = "processed data = " + data; 
            //I want to write some code here to post the processed message to a different queue.
            //or other idea is "can I use duplex services? 

        };
        string consumerTag = channel.BasicConsume(QUEUE_NAME, true, consumer);

        channel.QueueBind(QUEUE_NAME, EXCHANGE_NAME, ROUTING_KEY, null);
        channel.QueueUnbind(QUEUE_NAME, EXCHANGE_NAME, ROUTING_KEY, null);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T09:26:00.473

底线是您可以共享线程之间的连接，但不能共享通道。因此，在您的示例中，您可以使用相同的连接，但是当您想要发布时需要创建一个新通道（因为 consumer.Received 事件将在不同的线程上引发）：

```
using (IConnection connection = factory.CreateConnection())
{
    using (IModel channel = connection.CreateModel())
    {
        if (!String.IsNullOrEmpty(EXCHANGE_NAME))
            channel.ExchangeDeclare(EXCHANGE_NAME, ExchangeType.Direct, durable);

        if (!String.IsNullOrEmpty(QUEUE_NAME))
            channel.QueueDeclare(QUEUE_NAME, false, false, false, null);

        string data = "";
        EventingBasicConsumer consumer = new EventingBasicConsumer();
        consumer.Received += (o, e) =>
        {
            //This is the received message
            data = data + Encoding.ASCII.GetString(e.Body) + Environment.NewLine;
            string processed_data = "processed data = " + data; 
            //I want to write some code here to post the processed message to a different queue.
            //or other idea is "can I use duplex services? 

            using (IModel channel = connection.CreateModel())
            {
                channel.Publish( ... );
            }

        };
        string consumerTag = channel.BasicConsume(QUEUE_NAME, true, consumer);

        channel.QueueBind(QUEUE_NAME, EXCHANGE_NAME, ROUTING_KEY, null);
        channel.QueueUnbind(QUEUE_NAME, EXCHANGE_NAME, ROUTING_KEY, null);

        // don't dispose of your channel until you've finished consuming
    }

    // don't dispose of your connection until you've finished consuming
} 
```

确保在您想停止消费之前不要处置您的消费渠道。连接也是如此。这是一个常见的错误。

# javascript - D3.js 用于不同形状的复合动画的链式转换

> ID：15794619
> 
> 赞同：10
> 
> 时间：2013-04-03T18:00:10.100
> 
> 标签：javascript, animation, d3.js, transitions, chained

### 我正在尝试做的...

我正在玩弄 D3 来制作复合动画。我有以下最终状态：

![在此处输入图像描述](https://i.stack.imgur.com/f2zCe.png)

本质上我想要连接点的动画 - 添加第一个*圆圈*。然后将*线*画到第二个圆圈。绘制线后，将添加第二个圆圈。

为了增加一些视觉吸引力，我执行了其他过渡，例如在绘制线条时更改第一个和第二个圆的*圆*半径。

### 我试过的...

我可以添加圆圈并单独绘制线条，包括动画。但是，我不确定如何将过渡链接在一起以形成复合动画。

我[读过关于 transitions/animations](http://blog.visual.ly/creating-animations-and-transitions-with-d3-js/)的文章，它建议使用`each("end")`. 虽然这可以绘制初始对象，但 end 直到其他转换之后才会触发。

### 问题

*   是否使用`each("end", ...)`正确的方法来链接转换？
*   我如何开始另一个动画（即开始画线），同时仍然允许另一个过渡完成（即第一个圆半径爆发）。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-03T21:38:12.540

从 d3.v3 开始，过渡更容易链接，无需使用“end”。[请参阅此处](https://github.com/mbostock/d3/wiki/3.0#transitions)的注释。

例如，看看[这个](http://bl.ocks.org/mbostock/3943967)：

```
rect.transition()
  .duration(500)
  .delay(function(d, i) { return i * 10; })
  .attr("x", function(d, i, j) { return x(d.x) + x.rangeBand() / n * j; })
  .attr("width", x.rangeBand() / n)
  .transition()
  .attr("y", function(d) { return y(d.y); })
  .attr("height", function(d) { return height - y(d.y); }); 
```

那是针对同一元素的过渡。对于不同的元素，看看[这个](http://bl.ocks.org/mbostock/3903818)。

```
// First transition the line & label to the new city.
var t0 = svg.transition().duration(750);
t0.selectAll(".line").attr("d", line);
t0.selectAll(".label").attr("transform", transform).text(city);

// Then transition the y-axis.
y.domain(d3.extent(data, function(d) { return d[city]; }));
var t1 = t0.transition();
t1.selectAll(".line").attr("d", line);
t1.selectAll(".label").attr("transform", transform);
t1.selectAll(".y.axis").call(yAxis); 
```

过渡附加到 svg 元素并从那里链接。

# java - 使用属性名称中的变量调用 bean 属性

> ID：15794620
> 
> 赞同：2
> 
> 时间：2013-04-03T18:00:11.753
> 
> 标签：java, jsp, jstl, javabeans, el

我需要调用一个类似的属性`${bean.data1A}`，但是属性名称中的数字是一个变量。类似的东西`${bean.data{$n}A}`，但评估为`${bean.data1A}`n == 1 时。我怎样才能做到这一点？

我有一堆属性，例如：

```
${bean.data1A}
${bean.data2A}
${bean.data3A}
etc 
```

因为我必须使用旧的 JSP 服务器，所以我不能从 bean 调用参数化方法。

* * *

**更新**：至于这样做的原因，我有一个数据网格（18 或 27 行和 7 列）显示来自 bean 的数据。在这个 bean 中，有一个向量，其中每个元素都包含一个对象，该对象保存该行的数据（a、b、c、d、e、f 和 g 可以使用向量）。

要使用网格，我可以更改任意数量的单元格，然后单击“全部更新”按钮。我想使用 ${n} 作为行号变量的原因是行数将根据显示数据的年份而变化。我目前正在使用 ${n} 变量在网格的行标签上打印正确的行号

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T18:20:51.343

您可以使用[EL 的](https://stackoverflow.com/tags/el/info)大括号表示法`[]`来使用变量而不是静态字符串作为属性名称。您可以使用[JSTL](https://stackoverflow.com/tags/jstl/info) `<c:set>`在 EL 范围内创建一个新变量。

所以，总而言之，这应该做：

```
<c:set var="property" value="data${n}A" />
<c:out value="${bean[property]}" /> 
```

# matlab - Matlab 3D Plot (surf) 自动填充空白

> ID：15794622
> 
> 赞同：0
> 
> 时间：2013-04-03T18:00:13.710
> 
> 标签：matlab

我`surf()`用来绘制球体的一部分；基本上是位于球体顶部的某种形状的外壳。更具体地说，它是球形关节的工作空间图，颜色代表关节在该点的分辨率。

无论如何，形状是独一无二的，但会`surf()`自动填补不应该存在的空白。我猜这可能是它的绘制顺序？有什么办法可以阻止 Matlab 这样做吗？

我认为图片中不应该出现的内容很明显：

![第一张照片](https://i.stack.imgur.com/ohqRr.jpg)

![在此处输入图像描述](https://i.stack.imgur.com/2SoEO.jpg)

此外，它似乎也弄乱了颜色编码。深蓝色应该在外壳的底部边缘；相反，Matlab 将其分配给用于填充间隙的表面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T22:00:14.767

以下代码实现了我认为您要问的内容（即 - 使曲面图的一部分“不可见”，我通过定义一个`transp`与 具有相同尺寸的矩阵来实现这一点`zz`，具有 alpha 值（1 = 可见，0 = 透明）。当然你必须改变你的定义`transp`来匹配你不想看到的表面部分——我简单的剪裁方法只是为了展示可以做什么）：

```
[xx yy]=meshgrid(linspace(-1,1,200));
zz = 1./(xx.^2 + yy.^2 + 0.5);
theta = atan2(yy,xx);
r = sqrt(xx.^2 + yy.^2);
transp = double(r < (0.3*cos(6*theta)+0.6));
figure
surf(xx,yy,zz,'edgecolor','none','FaceAlpha', 'interp', 'AlphaData', transp); 
```

这给出了以下情节：

![在此处输入图像描述](https://i.stack.imgur.com/zE6AF.png)

我相信你可以从这里弄清楚。如果这不起作用，您需要提供有关您拥有的数据的更多信息 - 大小是多少，您如何绘制它......

# c++ - 当我尝试编译时，g_list_append 会出错

> ID：15794627
> 
> 赞同：1
> 
> 时间：2013-04-03T18:00:34.027
> 
> 标签：c++, compilation, glibmm

操作系统 = linux (Fuduntu 2013.2)

我正在尝试在我的程序中使用 GList，但是当我调用 g_list_append 时出现此错误

```
error: invalid conversion from ‘const void*’ to ‘gpointer {aka void*}’ [-fpermissive]
In file included from /usr/include/glib-2.0/glib/ghash.h:35:0,
             from /usr/include/glib-2.0/glib.h:52,
             from /usr/include/glib-2.0/gobject/gbinding.h:30,
             from /usr/include/glib-2.0/glib-object.h:25,
             from /usr/include/glib-2.0/gio/gioenums.h:30,
             from /usr/include/glib-2.0/gio/giotypes.h:30,
             from /usr/include/glib-2.0/gio/gio.h:28,
             from /usr/include/gtk-2.0/gdk/gdkapplaunchcontext.h:30,
             from /usr/include/gtk-2.0/gdk/gdk.h:32,
             from /usr/include/gtk-2.0/gtk/gtk.h:32,
             from main.cpp:4:
/usr/include/glib-2.0/glib/glist.h:61:10: error:   initializing argument 2 of ‘GList* g_list_append(GList*, gpointer)’ [-fpermissive] 
```

这是包含 g_list_append 的代码部分

```
#include<iostream>
#include <stdio.h>
#include<gtk/gtk.h>
#include<glibmm.h>

int main(){

    GList *glist_forleg = NULL;
    glist_forleg = g_list_append(glist_forleg, "A1");

    return 0;
} 
```

编译

```
g++ -o kabel main.cpp strukt.cpp -lm -Wall `pkg-config  --cflags  --libs  glibmm-2.4` `pkg-config --cflags --libs gtk+-2.0` 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T18:10:04.520

这不是 GLib 问题（尽管您可能应该使用 C++ 类而不是 C 版本），而是因为引用的字符串是`const`. 您尝试使用的函数采用`void *`指针而不是`const void *`指针，这是错误试图告诉您的。

这是一个固定的例子：

```
#include <glib.h>

int main(){

    GList *list = NULL;
    list = g_list_append(list, (gpointer)"A1");

    return 0;
} 
```

...将字符串转换为`gpointer`(aka `void *`) 而不是`const void *`. 编译例如：

```
cc -Wall -o test test.c $(pkg-config --cflags --libs glib-2.0) 
```

但是，这是一个坏主意，因为字符串不一定会留在内存中，导致指针指向不属于您的内存，并导致内存错误。一个更好的想法（前提是您记得稍后释放它）可能是使用`g_strdup`which 将在内存中复制字符串，或者仅使用 GLibmm 提供的类型，如库文档的 C++ 版本中所述。

# html - 如何保持图像宽度与窗口大小相同

> ID：15794630
> 
> 赞同：0
> 
> 时间：2013-04-03T18:00:43.570
> 
> 标签：html, css

我正在为网站使用图像滑块，并且需要图像保持与窗口相同的大小，具体取决于窗口的宽度。

我在 CSS 中有这个：

```
#slider {
    width:100%;
    height:306px;
    background:#fff url(loading.gif) no-repeat 50% 50%;
    position:relative;
    margin:0 auto;
    box-shadow: 0px 1px 5px #999999;

#slider img {
    width:100%;
    height:306px;
    position:absolute;
    border:none;
    display:none;
} 
```

和 HTML：

```
<div id="slider">
    <img src="images/image-slider-2.jpg" alt="" />
</div> 
```

所以#slider 是div id，然后是图像的#slider img，但它不会将图像保持为100％

对此有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T18:09:36.490

还应指定文档正文的宽度。

`html, body, #slider, #slider img { width: 100%; }`

# java - 尝试通过套接字接收对象时出现 OptionalDataException

> ID：15794631
> 
> 赞同：1
> 
> 时间：2013-04-03T18:00:45.810
> 
> 标签：java, android, sockets, serialization

我想通过套接字将对象从服务器传递到客户端。客户端在 Android 上。

我有这个可序列化的类：

```
public class BoardImage implements Serializable{

    private static final long serialVersionUID = 1L;

    private String filename;
    private int boardNumber;
    private int fileSizeInBytes = -1;
    private byte imageData[];

    public BoardImage(){}

    public BoardImage(String filename) {
        this.filename = filename;

        try{
            this.boardNumber = Integer.parseInt(filename.substring(0, filename.indexOf("."))); // takes the filename without extension and converts to int
        }
        catch (NumberFormatException exp){
            this.boardNumber = -1;
        }

        FileInputStream fin = null;
        try {
            File file = new File(filename);
            fin = new FileInputStream(file);
            this.fileSizeInBytes = (int)file.length();
            imageData = new byte[fileSizeInBytes];
            fin.read(imageData); // read file data into byte array
            fin.close();

        } catch (FileNotFoundException ex) {
            Logger.getLogger(BoardImage.class.getName()).log(Level.SEVERE, null, ex);
        } catch (IOException ex) {
            Logger.getLogger(BoardImage.class.getName()).log(Level.SEVERE, null, ex);
        }

    }
} 
```

在服务器端：

```
 BoardImage bImg = new BoardImage(fileToSend);
            ObjectOutputStream os = new ObjectOutputStream(connection.getOutputStream());
            os.writeObject(bImg);
            os.close(); 
```

在客户端（Android）：

```
 try {
        if (read == true){ // try to read from socket stream
            rcvdBoard = (BoardImage)ois.readObject(); // <-- HERE WE GET THE EXCEPTION
            System.out.println(rcvdBoard.getFileSize()); // print the size of the file

            new Thread(){
                public void run(){
                    myParant.addBoard(BitmapFactory.decodeByteArray(rcvdBoard.getFileContent(), 0, rcvdBoard.getFileSize()));
                }   
            }.start();                  

        }
    } catch (OptionalDataException e) {
        // TODO Auto-generated catch block
        e.printStackTrace(); 
```

行：`rcvdBoard = (BoardImage)ois.readObject();`java.io.OptionalDataException

日志猫：

```
04-03 17:47:49.621: W/System.err(3910): java.io.OptionalDataException
04-03 17:47:49.621: W/System.err(3910):     at java.io.ObjectInputStream.readNonPrimitiveContent(ObjectInputStream.java:810)
04-03 17:47:49.621: W/System.err(3910):     at java.io.ObjectInputStream.readObject(ObjectInputStream.java:2006)
04-03 17:47:49.631: W/System.err(3910):     at java.io.ObjectInputStream.readObject(ObjectInputStream.java:1963)
04-03 17:47:49.631: W/System.err(3910):     at com.example.helloworld.ImageListener.run(ImageListener.java:69) 
```

**注意：**我尝试在非 android 环境中运行客户端并且它可以工作。所以也许这与android有关？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T21:50:39.007

**更新：** 我发现两个 BoardImage.java 中的包名应该是一样的！

# wordpress - Wordpress 仪表板登录内部 500 错误

> ID：15794633
> 
> 赞同：1
> 
> 时间：2013-04-03T18:01:13.717
> 
> 标签：wordpress, dashboard, internal-server-error

我工作的公司目前正在为他们的网站使用 WordPress 平台。自从我在这家公司工作一年以来，网站出现了很多内部 500 错误。最近的错误不允许我登录到我网站的仪表板。

例如，如果我导航到 www.mysite.com/wp-admin/ 并尝试登录。它会将我重定向到具有此语法的错误页面

> “ HTTP 错误 500（内部服务器错误）：服务器尝试完成请求时遇到了意外情况。”

我已经联系了托管公司，他们说一切都是正确的。由于我没有开发此站点，因此我不确定以前的开发人员做了什么可能会出现这些错误。以前我通过更改/删除 .htaccess 解决了这个问题，但在这种情况下它对我不起作用。我的最后一个选择是在新平台上重新安装 WordPress/design，但在此之前任何建议都会有所帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T18:09:11.083

登录后，其中一个插件可能导致错误。如果您可以通过 FTP 访问该文件，您应该尝试去 wp-content/plugins/ 并从那里删除所有插件（只需复制并粘贴到其他地方）。然后尝试登录。

如果可行，那么您可以开始一次添加一个插件，并查看哪个导致错误。

如果网站严重依赖插件，请知道在此期间某些功能会丢失。

# android - cursor.getString() 是否将 int 强制转换为字符串？

> ID：15794635
> 
> 赞同：8
> 
> 时间：2013-04-03T18:01:23.770
> 
> 标签：android, sqlite, android-cursor

文档说：

> 当列值为 null 或列类型不是字符串类型时，结果以及此方法是否引发异常是实现定义的。

他们在谈论哪种实现？sqlite的版本？会打电话

```
cursor.getString(INT_COLUMN) 
```

`int`将值强制转换为`String`?

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-03T18:04:43.183

> cursor.getString() 是否将 int 强制转换为字符串？

是的，只要有意义，可以使用`getString()`、`getInt()`、等返回表中的相同数据。`getLong()`例如，

*   如果列数据为 42：`getInt()`返回 42 并`getString()`返回“42”。
*   如果列数据是植物：`getString()`返回“植物”，`getInt()`返回 0。

# vb.net - VS2008调试期间不需要的异常抑制

> ID：15794636
> 
> 赞同：0
> 
> 时间：2013-04-03T18:01:25.120
> 
> 标签：vb.net, visual-studio-2008, exception-handling, .net-3.5, sqldatareader

有没有办法强制`SqlDataReader`抛出异常？它似乎有一个非常有问题的行为，其中`SqlDataReader`会出现异常并导致它所在的函数过早结束而不会引发异常，特别是当它尝试读取`isDBNull`值时。

（2013 年 5 月 10 日） 编辑：进一步思考，它的行为似乎`Microsoft.VisualBasic.CompilerServices.Conversions`是默默地捕捉到异常。

显然，异常压制仅在调试时发生——我运行了一个发布版本，异常肯定在那里浮出水面。所以它显然只是 Visual Studio 调试的一个属性。

（2013 年 5 月 14 日） EDIT2：在调试中发现类似的捕获，但没有 try/catch 块行为，SqlDataReader 索引与列名不匹配。IndexOutOfRangeException 仅在使用“中断所有异常”调试设置时出现。

更多细节：

```
Public Function GetData() As DataObj
    Dim sqlConn As New SqlConnection(ConnectionSettings.DBCon)
    Dim sqlCommand As New SqlCommand("an_sp", sqlConn)
    Dim sqlReader As SqlDataReader
    Dim dataObject As New DataObj

    sqlCommand.CommandType = CommandType.StoredProcedure

    sqlCommand.Connection.Open()
    sqlReader = sqlCommand.ExecuteReader

    While sqlReader.Read
        With dataObject
            'Exception thrown here in debugging
            .DateField = sqlReader("DateField")

        End With
    End While

    Return dataObject
End Function 
```

System.InvalidCastException 发生 Message="从类型 'DBNull' 到类型 'Date' 的转换无效。" Source="Microsoft.VisualBasic" StackTrace: 在 Microsoft.VisualBasic.CompilerServices.Conversions.ToDate(Object Value) 在 C:\Users\me\Documents\Visual Studio 2008\VS 2008 Projects\General 中的 DataAccess.MyDAO.GetData() \DataAccess\DataAccess\MyDAO.vb：第 603 行内部异常：

# html - 表格中的 css、gif、视口高度的 100%

> ID：15794639
> 
> 赞同：0
> 
> 时间：2013-04-03T18:01:35.933
> 
> 标签：html, css, html-table, gif

我有一张桌子，在 td 标签内有一个 gif 图像：

```
<table id="wrapper">
  <tr>
     <td><img src="as.gif" width="auto" height="100%"></td>         
  </tr>
</table> 
```

我尝试了数千种方法来使 gif 成为 100% 的视口，但不知何故它不起作用！这是我的CSS：

```
html, body, #wrapper {
 height:100%; width: 100%; margin: 0; padding: 0; border: 0;
}

table {height:100%}

td {height:100%}

tr {height:100%}

#wrapper td {
text-align: center;
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T18:05:49.610

你有没有尝试过

```
table tr td img { height : 100% } 
```

# printing - Applescript：等到 Acrobat X 中的“打印”对话框关闭

> ID：15794643
> 
> 赞同：3
> 
> 时间：2013-04-03T18:01:43.577
> 
> 标签：printing, dialog, applescript, acrobat

Applescript 中的菜鸟，请多多包涵……</p>

我们有一个过程，我们使用系统事件来控制 Acrobat X 中的“打印”对话框。这工作正常；我们可以“点击”打印按钮。

现在，我们必须等到文档打印出来。打印文档时，会打开一个对话框，标题为“打印”、进度条和取消按钮。只有当这个窗口关闭时，我们才能继续。

到目前为止，我的等待还没有成功；Applescript 继续，这搞砸了这个过程。

我目前拥有的是（注意这是更大脚本的一部分，并且变量已定义并且似乎是有效的。

我们激活了 Acrobat，并且“打印”对话框打开：

```
tell application "System Events"
   tell process "Acrobat"
      -- now we set all the options in the Print dialog, 
      -- which is in the window Print
      click button "OK" of window "Print
   end tell
end tell

delay 5
-- this gives Acrobat time to get printing and to open that print dialog window

repeat while exists window "Print"
   delay 1
end repeat

close active doc saving no 
```

我还尝试将该代码放入超时中，但没有机会。

现在，我被卡住了，但我确信这是一个愚蠢的初学者错误。

另一个注意事项：我无法使用 UIElementInspector 获取此“打印”窗口的名称。

非常感谢您的任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T20:52:53.397

您的代码是否包含在`tell application`您未在此处报告的某个块中？如果将重复循环移动到`tell process`块中，它应该可以工作：

```
tell application "System Events"
    tell process "Acrobat"
        -- now we set all the options in the Print dialog, 
        -- which is in the window Print
        click button "OK" of window "Print"
        delay 5
        -- this gives Acrobat time to get printing and to open that print dialog window
        repeat while exists window "Print"
            delay 1
        end repeat  
    end tell
end tell

close active doc saving no 
```

# c# - 通过 HSSF.EventUserModel 使用受保护的书籍和工作表读取 XLS

> ID：15794645
> 
> 赞同：6
> 
> 时间：2013-04-03T18:01:46.717
> 
> 标签：c#, java, excel, apache-poi, npoi

**最终目标：**`CellRecords`有效地（一次通过）在一个巨大的（30,000+ 行）上读取所有内容，受保护`Worksheet`。

**问题：** 使用`HSSF.EventUserModel`，我如何读取具有 Workbook 和 Worksheet 保护的 XLS 文件的所有`Record`s（包括）？`CellRecords`

创建输入电子表格（在 Excel 2010 中）：

1.  创建新的空白工作簿。
2.  将 A1 的值设置为数字：50
3.  将 A2 的值设置为字符串：五十
4.  将A3的值设置为公式：=25*2
5.  审查（功能区）-> 保护工作表-> 密码：pass1
6.  审查（功能区）-> 保护工作簿-> 密码：pass1
7.  文件（功能区）->另存为...->另存为类型：Excel 97-2003 工作簿

迄今为止的进展：

*   XLS 文件在 Excel 中打开时没有密码。因此，您不需要密码即可在 POI 中打开它。
*   XLS 文件以`new HSSFWorkbook(Stream fs)`. 但是，我需要`EventUserModel`实际电子表格的效率。
*   设置`NPOI.HSSF.Record.Crypto.Biff8EncryptionKey.CurrentUserPassword = "pass1";`不起作用。
*   该`ProcessRecord( )`函数捕获 a `PasswordRecord`，但我找不到任何有关如何正确处理它的文档。
*   也许，`EncryptionInfo`or`Decryptor`类可能有一些用处。

注意：
我正在使用 NPOI。但是，我可以将任何 java 示例转换为 C#。

代码：
我使用以下代码来捕获`Record`事件。我的`Book1-unprotected.xls`（无保护）显示所有`Record`事件（包括单元格值）。My`Book1-protected.xls`显示一些记录并引发异常。

我只是`processedEvents`在调试器中查看。

```
using System;
using System.Collections.Generic;
using System.IO;

using NPOI.HSSF.Record;
using NPOI.HSSF.Model;
using NPOI.HSSF.UserModel;
using NPOI.HSSF.EventUserModel;
using NPOI.POIFS;
using NPOI.POIFS.FileSystem;

namespace NPOI_small {
    class myListener : IHSSFListener {
        List<Record> processedRecords;

        private Stream fs;

        public myListener(Stream fs) {
            processedRecords = new List<Record>();
            this.fs = fs;

            HSSFEventFactory factory = new HSSFEventFactory();
            HSSFRequest request = new HSSFRequest();

            MissingRecordAwareHSSFListener mraListener;
            FormatTrackingHSSFListener fmtListener;
            EventWorkbookBuilder.SheetRecordCollectingListener recListener;
            mraListener = new MissingRecordAwareHSSFListener(this);
            fmtListener = new FormatTrackingHSSFListener(mraListener);
            recListener = new EventWorkbookBuilder.SheetRecordCollectingListener(fmtListener);
            request.AddListenerForAllRecords(recListener);

            POIFSFileSystem poifs = new POIFSFileSystem(this.fs);

            factory.ProcessWorkbookEvents(request, poifs);
        }

        public void ProcessRecord(Record record) {
            processedRecords.Add(record);
        }
    }
    class Program {
        static void Main(string[] args) {
            Stream fs = File.OpenRead(@"c:\users\me\desktop\xx\Book1-protected.xls");

            myListener testListener = new myListener(fs); // Use EventModel 
            //HSSFWorkbook book = new HSSFWorkbook(fs); // Use UserModel

            Console.Read();
        }
    }
} 
```

**更新**（针对胡安·梅拉多）**：** 以下是例外。我现在最好的猜测（在 Victor Petrykin 的回答中）是不能本地解密受保护记录的`HSSFEventFactory`用途。`RecordInputStream`收到异常后，`processedRecords`包含 22 条记录，其中包括以下可能重要的记录：

*   processesRecords[5] 是一个`WriteAccessRecord`带有乱码（可能是加密）的值`.name`
*   processesRecords[22] 是一个`RefreshAllRecord`并且是`Record`列表中的最后一个

例外：

```
NPOI.Util.RecordFormatException was unhandled
  HResult=-2146233088
  Message=Unable to construct record instance
  Source=NPOI
  StackTrace:
       at NPOI.HSSF.Record.RecordFactory.ReflectionConstructorRecordCreator.Create(RecordInputStream in1)
       at NPOI.HSSF.Record.RecordFactory.CreateSingleRecord(RecordInputStream in1)
       at NPOI.HSSF.Record.RecordFactory.CreateRecord(RecordInputStream in1)
       at NPOI.HSSF.EventUserModel.HSSFRecordStream.GetNextRecord()
       at NPOI.HSSF.EventUserModel.HSSFRecordStream.NextRecord()
       at NPOI.HSSF.EventUserModel.HSSFEventFactory.GenericProcessEvents(HSSFRequest req, RecordInputStream in1)
       at NPOI.HSSF.EventUserModel.HSSFEventFactory.ProcessEvents(HSSFRequest req, Stream in1)
       at NPOI.HSSF.EventUserModel.HSSFEventFactory.ProcessWorkbookEvents(HSSFRequest req, POIFSFileSystem fs)
       at NPOI_small.myListener..ctor(Stream fs) in c:\Users\me\Documents\Visual Studio 2012\Projects\myTest\NPOI_small\Program.cs:line 35
       at NPOI_small.Program.Main(String[] args) in c:\Users\me\Documents\Visual Studio 2012\Projects\myTest\NPOI_small\Program.cs:line 80
       at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
       at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
       at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
       at System.Threading.ThreadHelper.ThreadStart()
  InnerException: NPOI.Util.RecordFormatException
       HResult=-2146233088
       Message=Expected to find a ContinueRecord in order to read remaining 137 of 144 chars
       Source=NPOI
       StackTrace:
            at NPOI.HSSF.Record.RecordInputStream.ReadStringCommon(Int32 requestedLength, Boolean pIsCompressedEncoding)
            at NPOI.HSSF.Record.RecordInputStream.ReadUnicodeLEString(Int32 requestedLength)
            at NPOI.HSSF.Record.FontRecord..ctor(RecordInputStream in1) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T13:07:32.813

我认为这是**NPOI**库代码中的错误。据我了解，他们使用不正确的流类型`HSSFEventFactory`：它使用`RecordInputStream`而不是`RecordFactoryInputStream`像原始**POI**库或`UserModel`（这就是为什么`HSSFWorkbook`工作）中的解密函数

此代码也可以工作，但它不是事件逻辑：

```
POIFSFileSystem poifs = new POIFSFileSystem(fs);
Entry document = poifs.Root.GetEntry("Workbook");
DocumentInputStream docStream = new DocumentInputStream((DocumentEntry)document);
//RecordFactory factory = new RecordFactory();
//List<Record> records = RecordFactory.CreateRecords(docStream);
RecordFactoryInputStream recFacStream = new RecordFactoryInputStream(docStream, true);
Record currRecord;
while ((currRecord = recFacStream.NextRecord()) != null) 
   ProcessRecord(currRecord); 
```

# java - 这是优雅地“停止”线程的正确方法吗？

> ID：15794653
> 
> 赞同：0
> 
> 时间：2013-04-03T18:02:04.050
> 
> 标签：java, multithreading

而不是在循环内连续检查变量：

```
class Tester {
    public static void main() {
        Try t = new Try();
        Thread.sleep(10); //wait for 10 milliseconds
        t.interrupt(); // 'interrupt' i.e stop the thread
    }
}

public class Try extends Thread {
    public void interrupt() {
        //perform all cleanup code here
        this.stop();
        /*stop() is unsafe .but if we peform all cleanup code above it should be okay ???. since thread is calling stop itself?? */
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T18:07:35.843

为了以良好的方式执行中断，您应该在被中断的线程内轮询“interrupted()”方法。请注意，调用 interrupted() 方法会重置中断标志（在调用 interrupt() 时设置）。

我想底线是您必须在线程内部不断轮询才能执行优雅的中断。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T18:16:26.913

**你永远不应该在线程上调用 .stop() ，句号。**线程执行自己的清理是不够的。由于调用 .stop() 会立即释放所有监视器，因此其他线程可能会看到处于不一致状态的共享数据，这可能导致几乎无法跟踪错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T18:16:19.833

使用[Thread.interrupt()](http://docs.oracle.com/javase/6/docs/api/java/lang/Thread.html#interrupt%28%29)方法而不是 Thread.stop()。在中断的线程中，您可以捕获`InterruptedException`并执行所需的任何清理。

[此处](https://stackoverflow.com/questions/5915156/how-can-i-kill-a-thread-without-using-stop/5915306#5915306)已经提出了类似的问题，您也可以在此处找到代码示例。

# interface - 通过参数大小解析相同的通用名称函数

> ID：15794656
> 
> 赞同：0
> 
> 时间：2013-04-03T18:02:14.203
> 
> 标签：interface, fortran

我想要一个函数接口，根据数组参数的大小来解析要使用的特定过程。例如，我可以有一个程序，用一个过程处理具有少于或正好 N 个元素的向量，用另一个过程处理更长的向量。据我所知，Fortran 仅使用参数的类型、等级和关键字进行解析。这是为什么？编译器是否足够智能以区分不同大小的数组，或者本质上不可能编写一个这样做的编译器？

是否有解决方法来实现所需的功能？我当然知道我可以编写一个带有 if 子句的子例程，以找出哪个过程用于哪个数组大小。但这不会花费更多的CPU时间吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T21:07:00.290

特定程序的解析被设计成可以在编译时完成。在一般情况下，数组的大小是一个运行时概念。

如果您在编译时知道某个特定过程更适合某些输入，那么您可以直接调用该特定过程。

否则使用 IF 来测试和分支大小（如果语言有这种魔法，那无论如何它都会在幕后做）。无论如何，该测试和分支可能比在运行时调用 reshape 快得​​多。

# javascript - 我有一个显示但只有一个按钮更改光标的对话框

> ID：15794657
> 
> 赞同：0
> 
> 时间：2013-04-03T18:02:15.973
> 
> 标签：javascript, html

我有一个可能是一个非常简单的问题，但我不知道如何解决它，任何帮助都将不胜感激。

这是我的代码；

```
<div id='div2'>
    <div class="DoYouHaveADirtBikeForSaleBox" id="DoYouHaveADirtBikeForSaleBox">
    <h2>Got A Bike to Sell?</h2>
    <p class="BikeForSaleButton">
    <a href="http://somepage.com">Yes</a>
    </p>

    <p class="BikeForSaleButtonNo">
    <a onclick="javascript:var div = document.getElementById('div2');div.parentNode.removeChild(div);">No</a></p> 
    </div>
    </div> 
```

由于我不知道的原因，“否”链接在悬停时不会将光标变为手，但我不知道如何解决这个问题。

我会怀疑问题的出现是因为 NO 链接没有 href 但是我是新手，我不知道如何解决这种情况，所以我问有人可以告诉我如何解决这个问题，我先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T18:05:24.480

因为您在链接上没有 href 属性。添加一个，光标会改变。

NITPICk：`javascript:`不需要它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T18:06:10.630

添加`href ="#`" 使其看起来像一个链接，而不是导航到不同的页面

```
<div id='div2'>
    <div class="DoYouHaveADirtBikeForSaleBox" id="DoYouHaveADirtBikeForSaleBox">
    <h2>Got A Bike to Sell?</h2>
    <p class="BikeForSaleButton">
    <a href="http://somepage.com">Yes</a>
    </p>

    <p class="BikeForSaleButtonNo">
    <a onclick="javascript:var div = document.getElementById('div2');div.parentNode.removeChild(div);" href ="">No</a></p> 
    </div>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T18:07:26.400

onclick 事件处理程序需要抑制链接默认行为以导航到 href 属性中指定的内容。

所以你`href="#"`也需要你不需要`javascript:` 它应该是这样的：

```
 <p class="BikeForSaleButtonNo">
    <a href="#" onclick="var div = document.getElementById('div2');div.parentNode.removeChild(div);">No</a></p> 
```

这是显示**工作代码的链接：**

[http://jsfiddle.net/dkU7B/1/](http://jsfiddle.net/dkU7B/1/)

**编辑：**忘记提及您可以做的另一件事是完全摆脱 onclick 并像这样将 href 与 javascript 一起使用，但现在您需要使用`javascript:`一个巧妙的技巧。

```
<a href="javascript:var div = document.getElementById('div2');div.parentNode.removeChild(div);">No</a> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T18:28:23.367

你需要一个 href="#"，我会把你的 HTML 和 JS 分开，它只是更干净的 IMO：

```
<script>
var div = document.getElementById('div2');
    function rmv() {
         div.parentNode.removeChild(div);
     }
</script>

<div id='div2'>
    <div class="DoYouHaveADirtBikeForSaleBox" id="DoYouHaveADirtBikeForSaleBox">
        <h2>Got A Bike to Sell?</h2>
        <p class="BikeForSaleButton">
            <a href="http://somepage.com">Yes</a>
        </p>

        <p class="BikeForSaleButtonNo">
        <a href="#" onclick="rmv()">No</a></p> 
</div>
</div> 
```

# data-mining - 一个括号中的项目在顺序模式挖掘中代表什么

> ID：15794659
> 
> 赞同：5
> 
> 时间：2013-04-03T18:02:17.920
> 
> 标签：data-mining

我见过许多用于顺序模式挖掘的数据库，它们在这些数据库中采用的序列就像

<(af)(d)(e)(a)>

<(e)(abf)(bde)>

(af)、(abf)、(bde) 等括号中的一组项目代表什么？这是否意味着它们彼此相关或与其他事物相关

我们在什么基础上将项目归入这一元素？我正在使用一个博客文件作为数据集。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-06T03:14:57.137

顺序模式挖掘算法的输入是一个顺序数据库。序列是项集的有序列表。

下面是一个序列示例：

<(e)(abf)(bde)>

该序列应解释如下：

首先出现了“e”项。紧随其后的是“a”、“b”和“f”。这些项目之后同时出现“b”、“d”和“e”。

所以答案是括号之间的项目被假定为无序或同时发生。括号之间的项目称为“项目集”。

请注意，还假设在一个项目集中没有项目可以出现多次。因此，拥有诸如 (aab) 之类的项集是非法的

此外，您还应该知道，大多数顺序模式挖掘算法都假设项集中的项是按词法排序的（例如 PrefixSpan）。如果项目在项目集中没有按词法排序，则算法可能无法提供良好的结果，因为它们使用了一些采用此假设的优化。

如果你想尝试一些顺序模式挖掘算法，你可以看看 SPMF 软件：[http](http://www.philippe-fournier-viger.com/spmf/) ://www.philippe-fournier-viger.com/spmf/ 它提供了一个图形用户界面和许多示例（我是项目创始人）。

希望这能很好地回答你的问题。

# java - 在android中使用套接字进行数据传输

> ID：15794660
> 
> 赞同：1
> 
> 时间：2013-04-03T18:02:19.957
> 
> 标签：java, android, sockets, tcp, communication

我有一个 android 应用程序的大问题。我需要做的是：

1) 用户 A 在第一部手机中做某事 2) 用户 B 收到信息并自动做某事

我正在尝试使用套接字。我已经成功了，但问题是用户 B 必须首先单击一个按钮才能接收事件数据，我想要的是一旦用户 a 的设备发生某些事情，事情就会发生在 B 的应用程序中。（用户b不知道A什么时候做某事，应该不需要点击按钮）

关于如何将数据从一部 Android 手机发送到另一部的小教程将非常有帮助。我想要的只是让接收器在有东西要获取时自动获取数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T18:12:42.643

你传递的是什么类型的数据。如果它是`String`你可以使用的`BufferedReader`。 `BufferedReaderObject.read()`将等到您发送字符串。因此，请将此阅读放在一个线程中。阅读后执行您需要的任何操作。

**编辑**见下面的示例

```
 @Override
 public void run() 
 {
     BufferedReader br=new BufferedReader(new InputStreamReader(socket.getInputStream()));
     String yourString=br.readLine();
     //work with your string
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T18:08:30.310

如果您尝试做 P2P，那么在 Android 上会很困难。但是，您可以使用[GCM](http://developer.android.com/google/gcm/index.html)来模拟它。

# css - 与 IE 7 的站点 css 兼容性不起作用

> ID：15794668
> 
> 赞同：0
> 
> 时间：2013-04-03T18:02:44.970
> 
> 标签：css, browser, internet-explorer-8, cross-browser, internet-explorer-7

感谢您查看我的帖子。我目前正在为我的雇主重新设计一个 html5 模板，并且在进行一些 QA 时注意到该网站在 ie7 和 8 上似乎完全错误。似乎 css 样式甚至没有被推送到页面.

这是我的测试链接：[http ://daniloportal.com/NPC/index.html](http://daniloportal.com/NPC/index.html)

我在我的脑海中添加了几行 ifIE7 ifIE8 行，但似乎没有奏效。当谈到兼容性修复时，我是一个新手 - 非常感谢任何帮助。

谢谢！D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T18:05:22.963

您只是在文件顶部缺少一个[**doctype**](http://dev.w3.org/html5/html-author/#doctype-declaration) ( )。`<!DOCTYPE html>`

这只会触发 IE 进入[Quirks 模式](http://www.quirksmode.org/css/quirksmode.html)，从而导致各种问题。将 doctype 放在文件的顶部，并确保其前面没有空格或注释。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T18:08:50.733

将 Doctype 和 IE 条件放在顶部

```
<!--[if lt IE 7 ]> <html class="ie6" lang="en" xml:lang="en" dir="ltr"> <![endif]-->
<!--[if IE 7 ]>    <html class="ie7" lang="en" xml:lang="en" dir="ltr"> <![endif]-->
<!--[if IE 8 ]>    <html class="ie8" lang="en" xml:lang="en" dir="ltr"> <![endif]-->
<!--[if IE 9 ]>    <html class="ie9" lang="en" xml:lang="en" dir="ltr"> <![endif]--> 
```

# sql - ORA-00937 不是从 SQL Server 转换的单组组函数

> ID：15794670
> 
> 赞同：0
> 
> 时间：2013-04-03T18:02:52.033
> 
> 标签：sql, sql-server, oracle

运行以下 ORACLE 语句时出现`ORA-00937`错误，我对 Oracle 很陌生（T-SQL 更像是我的包）。我已经转换了以前用 SQL 编写的 select 语句，我不知道为什么它期望 group by ... 因为所有列都是求和的。这是转换后的选择语句（我目前正在使用 SQLPLUS 运行/测试这些语句）：

```
select 
round(COALESCE(
(COALESCE((select SUM((F_BOOK_DATES.BKD_ADATE_ENDS - F_BOOK_DATES.BKD_ADATE_START) * (60 * 24)) FROM F_BOOK_DATES 
INNER JOIN F_BOOK_HEADER ON F_BOOK_DATES.BKD_FKEY_BK_SEQ = F_BOOK_HEADER.BK_SEQ 
and EXTRACT (YEAR from F_BOOK_DATES.BKD_DATE_START ) = EXTRACT (YEAR from SYSDATE )
and EXTRACT (MONTH from F_BOOK_DATES.BKD_DATE_START ) = EXTRACT (MONTH from SYSDATE )
and EXTRACT (DAY from F_BOOK_DATES.BKD_DATE_START ) = EXTRACT (DAY from SYSDATE )
AND F_BOOK_HEADER.BK_STATUS NOT IN ('CX','TP')
AND F_BOOK_HEADER.Deleted <> 1
AND F_BOOK_DATES.Deleted <> 1),9999999999.99,0)
/sum(case when FAREALO.AllDayBooking = 1 then 1400 else
((FAREALO.LO_TIME_END - FAREALO.LO_TIME_START) * (60 * 24)) end) * 100),0),2) as "PercentUtilised"
from FAREALO
inner join F_LO_TYPE on FAREALO.LO_FKEY_LOT_SEQ = F_LO_TYPE.LOT_SEQ
where FAREALO.LO_BK_LOCATION = 1
and LOT_CBS = 1; 
```

这是我在上面尝试转换的 SQL 语句（有效）：

```
select 
round(isnull(
(isnull(convert (DECIMAL(10,2),(select SUM(datediff(n,BKD_ADATE_START, BKD_ADATE_ENDS)) FROM F_BOOK_DATES with (NOLOCK) 
INNER JOIN F_BOOK_HEADER with (NOLOCK) ON BKD_FKEY_BK_SEQ = BK_SEQ 
AND DATEPART(YYYY,BKD_DATE_START) = DATEPART(YYYY,GETDATE())
AND DATEPART(MM,BKD_DATE_START) = DATEPART(MM,GETDATE())
AND DATEPART(DD,BKD_DATE_START) = DATEPART(DD,GETDATE())
AND BK_STATUS NOT IN ('CX','TP')
AND F_BOOK_HEADER.Deleted <> 1
AND F_BOOK_DATES.Deleted <> 1)),0)
/
sum(case when AllDayBooking = 1 then 1400 else
datediff(n,LO_TIME_START, LO_TIME_END) end) * 100),0),2) as PercentUtilised
from FAREALO with (NOLOCK)
inner join F_LO_TYPE with (NOLOCK) on LO_FKEY_LOT_SEQ = LOT_SEQ
where LO_BK_LOCATION = 1
and LOT_CBS = 1 
```

有人看到我错过了什么吗？

谢谢

Ĵ

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T09:17:44.703

这是添加 MIN 函数后运行良好的更改查询：

```
select 
round(COALESCE(
(COALESCE(MIN((select SUM((BKD_ADATE_ENDS - BKD_ADATE_START) * (60 * 24)) FROM F_BOOK_DATES 
INNER JOIN F_BOOK_HEADER ON BKD_FKEY_BK_SEQ = BK_SEQ 
and EXTRACT (YEAR from BKD_DATE_START ) = EXTRACT (YEAR from SYSDATE )
and EXTRACT (MONTH from BKD_DATE_START ) = EXTRACT (MONTH from SYSDATE )
and EXTRACT (DAY from BKD_DATE_START ) = EXTRACT (DAY from SYSDATE )
AND BK_STATUS NOT IN ('CX','TP')
AND F_BOOK_HEADER.Deleted <> 1
AND F_BOOK_DATES.Deleted <> 1)),9999999999.99,0)
/sum(case when AllDayBooking = 1 then 1400 else
((LO_TIME_END - LO_TIME_START) * (60 * 24)) end) * 100),0),2) as "PercentUtilised"
from FAREALO
inner join F_LO_TYPE on LO_FKEY_LOT_SEQ = LOT_SEQ
where LO_BK_LOCATION = 1
and LOT_CBS = 1; 
```

# c# - Math.Round 具有依赖属性，奇怪的行为

> ID：15794674
> 
> 赞同：1
> 
> 时间：2013-04-03T18:03:06.063
> 
> 标签：c#, wpf, xaml, dependency-properties

我有一个依赖属性“区域”：

```
public double Area
    {
        get { return Math.Round((double)this.GetValue(AreaProperty),2); } 
        set { this.SetValue(AreaProperty, value); }
    } 
```

我正在使用代码添加一些视觉效果，并在添加视觉效果时更新该区域。我希望将值四舍五入到小数点后两位。

```
drawQuads(builder);  //Updating area in these three methods
extrudeQuads();
drawSidesAndBottoms(builder);

Area *= 1;  //this is required so that the roundoff method can work (Why ?) 
```

如您所见，该属性的 getter 正在四舍五入该值。但问题是舍入不起作用，除非我在调用这三个方法后将“面积”乘以 1 或其他值。

请解释什么原因，为什么我需要将它乘以 1？

**编辑 ：**

实际上，这些方法正在使用以下语句更新区域：

```
Area += someFormula; 
```

它不是在调用吸气剂吗？即使不是，最后我在标签中显示值（实际上将此属性绑定到标签 Content 属性，以便区域更改 Label.Content 也会更新）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T18:11:25.730

当 WPF 的依赖属性系统获取您的`Area`属性时，它并没有真正调用`get_Area`（即`get`您在那里声明的）。相反，它通过您可以想象的方式在幕后获得价值`this.GetValue(AreaProperty)`。 `Area *= 1`（或类似的，例如`Area = Area`）导致您的吸气剂被实际调用，然后将舍入值设置为实际的支持值。

我不确定你的二传手是否会发生同样的事情，所以你可能想尝试把你的四舍五入放在那里，看看是否有任何变化：

```
public double Area
{
    get { return (double)this.GetValue(AreaProperty); } 
    set { this.SetValue(AreaProperty, Math.Round(value,2)); }
} 
```

如果这不起作用，我会尝试以下两种方法之一：（1）重新考虑您的整个方法并从不同的角度来解决这个问题 - 例如，如果您只需要在显示为字符串时将其四舍五入，请使用字符串格式这样做，或者（2）创建一个`RoundedDouble`隐式转换为和从的类`double`，但在适当的情况下进行舍入，并将其用于`Area`.

# c# - GraphicsCreator().FillEllipse 的 StackOverflow 异常

> ID：15794678
> 
> 赞同：1
> 
> 时间：2013-04-03T18:03:18.153
> 
> 标签：c#, stack-overflow

当我填充椭圆时，我得到一个stackoverflow异常，而不仅仅是一个椭圆，而是许多椭圆。

我不认为这是图形创建者的问题。但我无法弄清楚为什么调试器在`FillEllipse`命令中指向 stackoverflow 异常

```
 public void createPath(Stance currentStance)
    {

        if(toSort.Count > 0)
        {
            toSort.Remove(currentStance);
            counter++;
        }

        this.currentForm.FillEllipse(new SolidBrush(Color.Red),new Rectangle(currentStance.location.X-3, currentStance.location.Y - 3, 6 , 6));

        foreach(Stance subStance in currentStance.childStances)
        {
            double weight = level(currentStance, subStance, 1)+ currentStance.StanceWeight;
            if (subStance.StanceWeight == -99999999999999)
            {
                currentStance.dajkstrasChildren.Add(subStance);
                subStance.parentStance = currentStance;
                subStance.StanceWeight = weight;
                toSort.Add(subStance);
            }
            else
            {
                if(weight > subStance.StanceWeight)
                {
                    try
                    {
                        subStance.parentStance.dajkstrasChildren.Remove(subStance);
                    }
                    catch (NullReferenceException e)
                    {
                        Console.WriteLine("null reference");
                    }
                    subStance.parentStance = currentStance;
                    currentStance.dajkstrasChildren.Add(subStance);
                    subStance.StanceWeight = weight;

                }
            }
        }

        foreach(Stance subStance in currentStance.secondChildStances)
        {         
            double weight = level(currentStance, subStance, 1) + currentStance.StanceWeight;
            if (subStance.StanceWeight == -99999999999999)
            {
                currentStance.dajkstrasChildren.Add(subStance);
                subStance.parentStance = currentStance;
                toSort.Add(subStance);
                subStance.StanceWeight = weight;
            }
            else
            {
                if (weight > subStance.StanceWeight)
                {   
                    if(subStance.parentStance != null)
                    {
                        try
                        {
                            subStance.parentStance.dajkstrasChildren.Remove(subStance);
                            subStance.parentStance = currentStance;
                            currentStance.dajkstrasChildren.Add(subStance);
                        }
                        catch(NullReferenceException e)
                        {
                            Console.WriteLine("null reference");
                        }
                    }

                }
            }
        }

        toSort.Sort(new Stance());
        if(toSort.Count != 0)
        {
            createPath((Stance)toSort[0]);
        }
    } 
```

它是一种递归方法，但它不能递归到无穷大，因为它总是从 toSort ArrayList 中弹出一个对象

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T18:14:43.980

那是因为在尝试调用 FillEllipse 时堆栈实际上用完了。

当然，堆栈溢出必须是由您的逻辑中的缺陷引起的，该缺陷导致您的`createPath`方法被递归调用（可能）无限期或太深，以至于堆栈无法容纳所有需要的激活帧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T18:31:58.977

使用 while 循环而不是递归来避免加载堆栈。

这是您修改后的代码，可能会起作用：

```
public void createPath(Stance stance)
    {
        var currentStance = stance;

        while(toSort.Count >0)
        {
            toSort.Remove(currentStance);
            counter++;

        this.currentForm.FillEllipse(new SolidBrush(Color.Red),new Rectangle(currentStance.location.X-3, currentStance.location.Y - 3, 6 , 6));

        foreach(Stance subStance in currentStance.childStances)
        {
            double weight = level(currentStance, subStance, 1)+ currentStance.StanceWeight;
            if (subStance.StanceWeight == -99999999999999)
            {
                currentStance.dajkstrasChildren.Add(subStance);
                subStance.parentStance = currentStance;
                subStance.StanceWeight = weight;
                toSort.Add(subStance);
            }
            else
            {
                if(weight > subStance.StanceWeight)
                {
                    try
                    {
                        subStance.parentStance.dajkstrasChildren.Remove(subStance);
                    }
                    catch (NullReferenceException e)
                    {
                        Console.WriteLine("null reference");
                    }
                    subStance.parentStance = currentStance;
                    currentStance.dajkstrasChildren.Add(subStance);
                    subStance.StanceWeight = weight;

                }
            }
        }

        foreach(Stance subStance in currentStance.secondChildStances)
        {         
            double weight = level(currentStance, subStance, 1) + currentStance.StanceWeight;
            if (subStance.StanceWeight == -99999999999999)
            {
                currentStance.dajkstrasChildren.Add(subStance);
                subStance.parentStance = currentStance;
                toSort.Add(subStance);
                subStance.StanceWeight = weight;
            }
            else
            {
                if (weight > subStance.StanceWeight)
                {   
                    if(subStance.parentStance != null)
                    {
                        try
                        {
                            subStance.parentStance.dajkstrasChildren.Remove(subStance);
                            subStance.parentStance = currentStance;
                            currentStance.dajkstrasChildren.Add(subStance);
                        }
                        catch(NullReferenceException e)
                        {
                            Console.WriteLine("null reference");
                        }
                    }

                }
            }
        }

        toSort.Sort(new Stance());
        currentStance = (Stance)toSort[0];
      }
    } 
```

# java - 如何下载Primefaces过滤数据表中的文件？

> ID：15794679
> 
> 赞同：1
> 
> 时间：2013-04-03T18:03:20.137
> 
> 标签：java, jsf, primefaces

我有一个数据表，可让您下载文件。有用。但是，当我尝试在过滤后下载文件时，返回的是列表中的第一位。

此图像显示，当单击 teste4.txt 时，下载了相同的文件。这是对的。![正确下载](https://i.stack.imgur.com/kSp3T.png)

这张图是点击文件teste4.txt，过滤后下载的文件是teste1.txt![下载错误](https://i.stack.imgur.com/Omb5x.png)

这是我包含数据表的文件：

 `````
<h:form id="hFormListaArquivosRegiao2" enctype="multipart/form-data">

    <p:dataTable id="pDataTableListaArquivos" var="arquivo" value="#{arquivoBean.listaArquivos}" filteredValue="#{arquivoBean.filteredListaArquivos}">

        <p:column id="pColumnNomeArquivo" headerText="#{msg.NomeDoArquivo}" sortBy="#{arquivo.nomeArquivo}" filterMatchMode="contains" filterBy="#{arquivo.nomeArquivo}">

            <h:commandLink action="#{arquivoBean.download}" title="#{arquivo.nomeArquivo}">

                <h:outputText value="#{arquivo.nomeArquivo}" />
                <f:setPropertyActionListener target="#{arquivoBean.arquivo}" value="#{arquivo}" />

            </h:commandLink>

        </p:column>

</h:form> 
````  `这是backingBean负责下载的方法：

 `````
public void download() throws Exception {

    logger.debug("NOME ARQUIVO: "+ ContextoBean.CAMINHO_ARQUIVOS + arquivo.getNomeArquivo() +", "+ arquivo.getNomeArquivo());

    FacesContext facesContext = FacesContext.getCurrentInstance();
    pushArquivo(facesContext.getExternalContext(), ContextoBean.CAMINHO_ARQUIVOS + arquivo.getNomeArquivo(), arquivo.getNomeArquivo());
    facesContext.responseComplete();

} 
````  `这是负责下载的backingBean的辅助方法：

 `````
private void pushArquivo(ExternalContext externalContext, String nomeArquivo, String nomeDeExibicao) throws IOException {

    // Info sobre a lógica usada: http://stackoverflow.com/questions/1686821/execute-backing-bean-action-on-load
    File descritoArquivo = new File(nomeArquivo);
    int length = 0;
    OutputStream os = externalContext.getResponseOutputStream();
    String extencaoArquivo = externalContext.getMimeType(nomeArquivo);
    externalContext.setResponseContentType((extencaoArquivo != null) ? extencaoArquivo : "application/octet-stream");
    externalContext.setResponseContentLength((int) descritoArquivo.length());
    externalContext.setResponseHeader("Content-Disposition", "attachment; filename=\"" + nomeDeExibicao + "\"");

    // Stream to the requester.
    byte[] bbuf = new byte[1024];
    DataInputStream in = new DataInputStream(new FileInputStream(descritoArquivo));
    while ((in != null) && ((length = in.read(bbuf)) != -1)) {
        os.write(bbuf, 0, length);
    }

    in.close();

} 
````  `* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T14:16:43.140

如果我是你，我会做一些更改以通过方法参数获取当前的 arquivo：

```
<h:commandLink action="#{arquivoBean.download(arquivo)}">
    <h:outputText value="#{arquivo.nomeArquivo}" />
</h:commandLink> 
```

在豆子里：

```
public void download(Arquivo arquivo) throws Exception {
    FacesContext facesContext = FacesContext.getCurrentInstance();
    pushArquivo(facesContext.getExternalContext(),
        ContextoBean.CAMINHO_ARQUIVOS + arquivo.getNomeArquivo(),
        arquivo.getNomeArquivo());
    facesContext.responseComplete();
} 
`````````

# perl - perl 封闭变量返回空字符串

> ID：15794684
> 
> 赞同：1
> 
> 时间：2013-04-03T18:03:39.390
> 
> 标签：perl, lambda, closures

我无法用看似简单的表达式来解释 perl 的行为。我已将我的问题与这段相对较短的 perl 代码隔离开来。make_peak 返回一个函数，该函数跟踪信号 v() 的最大值并将该最大值保存在封闭变量 $max 中。

事实上，代码打印“2”。但是，如果我删除 kludgy ""。在返回语句中，$p->() 返回 uundef?

```
use strict;

our $i=0;

sub v($) {
  $i=$i+1;
  return $i;
}

sub make_peak($)
{
  my $vi=$_[0];
  my $max=-1e35;
  return sub() {
    $max=v($vi) if v($vi)>$max;
    return "".$max; # ??? without the kludge returns empty line
  };
}

my $p=make_peak(10);

my $m=$p->();
print $m; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T19:01:40.297

主要问题是您将匿名/lambda 子例程声明为`sub() {...}`. 只需使用`sub {...}`

```
use strict;
use warnings;

my $i=0;

sub v {
  $i=$i+1;
  return $i;
}

sub make_peak
{
  my $vi=$_[0];
  my $max=-1e35;
  return sub {
    $max = v($vi) if v($vi) > $max;
    return $max; # ??? without the kludge returns empty line
  };
}

my $p=make_peak(11);
my $m=$p->();
print $m; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T18:20:00.973

这似乎是您的 Perl 版本中的一个错误。继续运行

```
This is perl 5, version 14, subversion 2 (v5.14.2) built for i686-linux-gnu-thread-multi-64int 
```

`"".`我得到“2”作为在那条线上有和没有的输出。

# android - Android中的位置问题

> ID：15794686
> 
> 赞同：0
> 
> 时间：2013-04-03T18:03:49.663
> 
> 标签：android, gps, location, location-provider

我对位置 API 有一些问题。在某些设备中，有时它不会提供任何提供商的位置，但重启手机可以解决问题。另一方面，当没有获得位置时，谷歌地图会立即将您放置在地图中，没有任何问题。

这是代码：

```
 Intent intent = new Intent(Constants.LOCATION_BROADCAST);
    pendingIntent = PendingIntent.getBroadcast(getApplicationContext(), 0, intent, 0);
    Criteria criteria = new Criteria();
    criteria.setPowerRequirement(Criteria.POWER_HIGH);
    if(android.os.Build.VERSION.SDK_INT > android.os.Build.VERSION_CODES.FROYO){
        criteria.setAccuracy(Criteria.ACCURACY_LOW);
        locationManager.requestSingleUpdate(locationManager.getBestProvider(criteria, true), pendingIntent);
    }
    else {
        criteria.setAccuracy(Criteria.ACCURACY_COARSE);
        locationManager.requestLocationUpdates(locationManager.getBestProvider(criteria, true), 0, 0, pendingIntent);
    } 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T18:20:13.477

尝试使用所有位置提供程序，看看它是否能解决您的问题，例如

```
LocationManager lm = (LocationManager) context.getSystemService(Context.LOCATION_SERVICE);
List<String> allproviders = lm.getAllProviders();
for(String provider : allproviders) {
    myLocationManager.requestLocationUpdates(provider, 5000, 0, this);
} 
```

如果此代码始终有效，那么您只需要弄清楚为什么您的代码忽略了我的代码找到的提供程序。很容易与您的力量或准确性标准有关。

# wpf - 使用 XAML 将 DatePicker 设置为今天

> ID：15794687
> 
> 赞同：6
> 
> 时间：2013-04-03T18:03:53.467
> 
> 标签：wpf, xaml, binding, datepicker

我的项目中有以下[`DatePicker`](http://msdn.microsoft.com/en-us/library/system.windows.controls.datepicker.aspx)控制：

```
<DatePicker x:Name="startDate" SelectedDate="2013-04-03"></DatePicker> 
```

**问题：**
是否可以设置[`DatePicker.SelectedDate`](http://msdn.microsoft.com/en-us/library/system.windows.controls.datepicker.selecteddate.aspx)仅使用 XAML？

我知道这可以使用代码隐藏来实现。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-03T18:05:36.447

试试这个...

将此添加到 xaml 引用：

```
xmlns:sys="clr-namespace:System;assembly=mscorlib" 
```

然后写这个：

```
<DatePicker SelectedDate="{x:Static sys:DateTime.Now}"/> 
```

# c++ - 虽然循环不会终止？

> ID：15794691
> 
> 赞同：0
> 
> 时间：2013-04-03T18:04:10.427
> 
> 标签：c++, while-loop, conditional

我想知道为什么这个while循环不允许我的程序终止？

据我了解（尽管我很可能是错的）条件`while (cin >> line)`检查我的输入流是否有字符串，然后运行我的循环，直到在输入中找不到其他字符串。然而，在测试我的代码后，我得到了正确的输出，但我的循环永远不会终止任何关于为什么的想法？

```
#include <cstdlib>
#include <iostream>
#include <cctype>

using namespace std;

int main() {

string roman_digits[] = {"", "I", "II", "III", "IV", "V", "VI", "VII", "VIII", "IX"};
string roman_tens  [] = {"", "X", "XX", "XXX", "XL", "L", "LX", "LXX", "LXXX", "XC"};
string roman_hundreds [] = {"", "C", "CC", "CCC", "CD", "D", "DC", "DCC", "DCCC", "CM"};
string roman_thousands [] = {"", "M","MM", "MMM"};
string line;
char c;

cout << "Type in a Roman numeral: ";

// Loops through inputted Roman Numerals.    
while (cin >> line){
    int i = 0;

    // Loops through a Roman numeral and changes it to uppercase.
    while(line[i]){
        c = line[i];
        c = (toupper(c));
        line[i] = c;
        i++;
    }

// Loops through checking roman numeral with the thousands array and if there is a match prints out the equivalent arabic number.
    for (int i = 0; i < 10; i++){
       if (roman_thousands[i] == line){
           cout << "The Arabic equivalent of " 
                << line <<" is: " << i << 0 << 0 << 0 << endl;
        }
    }
 // Loops through checking roman numeral with the hundreds array and if there is a match prints out the equivalent arabic number.
    for (int i = 0; i < 10; i++){
        if (roman_hundreds[i] == line){
            cout << "The Arabic equivalent of " << line << " is: " << i << 0 << 0 << endl;
        }
    }
     // Loops through checking roman numeral with the tens array and if there is a match prints out the equivalent arabic number.
    for (int i = 0; i < 10; i++){
        if (roman_tens[i] == line){
            cout << "The Arabic equivalent of " << line << " is: " << i << 0 << endl;
        }
    }
     // Loops through checking roman numeral with the digits array and if there is a match prints out the equivalent arabic number.
    for (int i = 0; i < 10; i++){
        if (roman_digits[i] == line){
            cout << "The Arabic equivalent of " << line << " is: " << i << endl;
        }

    }
 }

  return 0;

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T18:09:01.010

该程序始终等待您添加更多输入，因此它不会终止。有几种方法可以解决这个问题：

*   让程序寻找一个特定的关键字，如“quit”或“exit”，甚至只是一个空格，然后键入它来终止。这很简单，但不是很优雅。
*   发送“流结束”指示符作为输入中的唯一内容。在 linux 和 unix 中，您只需键入 Ctrl-D，这将表明您已关闭标准输入。正如一些评论所说，Ctrl-Z 是 Windows 文件说明符的结尾，如果您使用它的话。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T18:09:20.333

你的程序永远不会结束，因为你的外循环永远运行。

可能的修复：

```
while (cin >> line) 
{
   int i = 0;
   if (line == "quit") break;

   while(line[i])
   {
     c = line[i];
     c = (toupper(c));
     line[i] = c;
     i++;
   }
   // run for loops
} 
```

那么你将不得不调用所有这些 for 循环。可能最好将它们放在一个函数中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T18:19:45.290

您的程序表现出未定义的行为，因为它在此循环中读取了数组的末尾：

```
for (int i = 0; i < 10; i++){
   if (roman_thousands[i] == line){
       cout << "The Arabic equivalent of " 
            << line <<" is: " << i << 0 << 0 << 0 << endl;
    }
} 
```

# java - 返回语句语法

> ID：15794694
> 
> 赞同：0
> 
> 时间：2013-04-03T18:04:19.790
> 
> 标签：java

符号是什么？和'：'在return语句中是什么意思？

```
public boolean isItBigger(BigInteger num1, Long num2) {
        return num1 == BigInteger.ONE || num2.intValue() > 0 ? true : false;
    } 
```

我也认为我在 if 语句中看到过它们。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T18:05:42.747

使用`?`and`:`是 Java 的[三元条件运算符](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.25)(JLS 15.25)。表达式的结果

```
aBoolean ? expr1 : expr2 
```

是`expr1`如果`aBoolean`是`true`，否则是`expr2`。

在这种情况下，它可以被忽略，因为它是不必要的：

```
return num1 == BigInteger.ONE || num2.intValue() > 0; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T18:06:01.683

它是一个[三元运算符](http://en.wikipedia.org/wiki/%3F%3a)。以下是等价的

```
if (x == y)
   x = 2;
else
   x = 3; 
```

和

```
x = (x == y) ? 2 : 3; 
```

您的示例代码虽然很愚蠢。首先，他们检查表达式的计算结果是否为真。然后，如果确实如此，它们将返回 true。他们也可以返回表达式本身的结果，如下所示：

```
return num1 == BigInteger.ONE || num2.intValue() > 0; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T18:06:13.393

这称为条件/三元运算符

```
boolean-expression ? do-this-if-true : else-do-this 
```

它是的缩写形式

```
if (boolean-expression) {
do-this
} else{
do-this
} 
```

# javascript - 从 png 创建纹理时截断的图像

> ID：15794695
> 
> 赞同：0
> 
> 时间：2013-04-03T18:04:24.093
> 
> 标签：javascript, html, webgl, textures

我正在尝试使用以下代码从 png 创建纹理：

```
...
var texture = gl.createTexture();
var img = new Image();
img.onload = function () {
    gl.activeTexture(gl.GL_TEXTURE0);
    gl.bindTexture(gl.TEXTURE_2D, texture);
    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, img);
    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);
    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);
    gl.bindTexture(gl.TEXTURE_2D, null);
}
img.src = "/path/to/image.png" 
```

我的问题是 WebGL 抱怨“错误的图像数据”。在萤火虫中调试显示图像被截断，下载的 png 文件只是原始文件的一部分 - 上半部分。Firefox 还抱怨“图像已损坏或被截断”。原始文件约为 1.8 MB (2048x1024)。可能是什么问题，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T07:49:22.447

您的问题有多种可能的原因，但您可以做一些事情来尝试缩小范围。

尝试将图像大小调整为 2048x2048 和 1024x1024，以防问题是基于您具有非方形纹理的事实。

还可以尝试将纹理保存为 .jpg 并尝试加载。还可以在您选择的图像编辑器中打开您的 png，并尝试保存几种不同的可用 png[类型](http://www.libpng.org/pub/png/book/chapter08.html#png.ch08.div.5)（基于调色板、灰度、RGB、具有透明度的 RGB、RGBA 等），看看它是否会加载。

# linux - 在 Linux 上放置命名管道的正确位置是什么？

> ID：15794696
> 
> 赞同：10
> 
> 时间：2013-04-03T18:04:25.620
> 
> 标签：linux, filesystems, pipe, named-pipes, tmp

我有一些通过命名管道相互通信的进程。目前，我正在本地创建所有管道，并将应用程序保存在同一个工作目录中。在某些时候，假设这些程序可以（并且将会）从不同的目录运行。我需要在已知位置创建我正在使用的这些管道，以便所有不同的应用程序都能够找到他们需要的管道。

我是在 Linux 上工作的新手，不熟悉文件系统结构。在 Windows 中，我会使用 AppData 文件夹之类的东西来保存这些管道。我不确定Linux中的等价物是什么。

该`/tmp`目录看起来可能可以很好地运行。我在一些地方读到它在系统关闭时被清除（这很好，当我开始备份时我可能没有重新创建管道。）但我看到其他一些人说他们正在丢失文件当系统启动时，就好像它被定期清理一样，我不想在我的应用程序使用这些管道时发生这种情况！

有没有更适合特定应用商店的地方？或者`/tmp`是我想要保留这些的地方（因为它们毕竟是临时的。）？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-09-07T19:37:11.693

我见过 SaltStack 使用`/var/run`. 唯一的问题是您需要 root 访问权限才能写入该目录，但假设您要将进程作为系统守护程序运行。SaltStack`/var/run/salt`在安装时创建并将所有者更改为，`salt`以便以后可以在没有 root 权限的情况下使用它。

我还检查了文件系统层次结构标准，尽管它并不是那么重要，即使他们说：

> 维护瞬态 UNIX 域套接字的系统程序必须将它们放在此目录中。

由于命名管道非常相似，我会走同样的路。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-12-21T09:13:06.910

在带有 systemd 的较新 Linux 发行版上（如果它不存在，则在登录期间`/run/user/<userid>`由[pam_systemd](http://www.freedesktop.org/software/systemd/man/pam_systemd.html)`/var/run`创建）可用于打开套接字并将 .pid 文件放在那里，而不是只有 root 可以访问。另请注意，它`/var/run`是一个符号链接，`/run`因此`/var/run/user/<userid>`也可以使用。有关更多信息，请查看[此线程](http://thread.gmane.org/gmane.linux.redhat.fedora.devel/146976)。这个想法是系统守护进程应该`/var/run/<daemon name>/`在安装期间创建一个具有适当权限的目录，并将其套接字/pid 文件放在那里，而用户运行的守护进程（例如 pulseaudio）应该使用`/run/user/<userid>/`. 另一种选择是`/tmp`和`/var/tmp`。

# php - PHP不打印MySQL查询的结果

> ID：15794700
> 
> 赞同：0
> 
> 时间：2013-04-03T18:04:37.980
> 
> 标签：php, mysql, web-applications

我正在使用 PHP/MySql 来显示来自数据库的一些结果。

**代码**

```
$query = "select *  from users where (fname like '%".$searchTerm."%') OR (lname like '%".$searchTerm."%')";
$result = $db->query($query);

echo "yoooo";
$num_rows = $result->num_rows;

echo "<br/>".$num_rows." results st 2";
for ($i=0; $i<$num_rows ; $i++) {
    $row = $result->fetch_assoc();
    $fn = $row['fname'];
    $ln=$row['lname'];
    echo "<br/>".stripslahes($fn)." ".stripslashes($ln);
} 
```

由此可见：

```
yoooo
1 results st 2 
```

但仅此而已……为什么？我确信我在关联数组中使用的名称是表中的列名......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T18:23:44.497

我会尝试：

*   打开`error_reporting(E_ALL)`
*   回显查询 + 确保`$searchTerm`安全（避免 sql 注入）
*   `var_dump($row)`

# sql - SQL - 有问题的 OR 子句破坏查询时间

> ID：15794709
> 
> 赞同：0
> 
> 时间：2013-04-03T18:05:05.320
> 
> 标签：sql, db2, clause

我正在处理一些登陆页面的查询。该页面将为用户提供多种搜索选项。查询将根据用户选择的内容由不同的部分构成，并将其发送到 DB2 数据库。总而言之，有超过 100 个独特的查询。我正在努力降低性能，但我的性能有点太长了。基本结构是这样的：

```
SELECT ...
FROM
TABLE A
--A few joins and a few left joins--
WHERE A.FIELD1 IS NOT NULL
  AND A.FIELD2 IN (:parameter) --No more than two values in here
  AND (
        A.FIELD3 IN ('ONE', 'TWO')
    OR (A.FIELD3 IN ('THREE','FOUR') AND A.FIELD4 BETWEEN :x AND :y)
  )
  AND A.FIELD5 IN (uncorrelated subquery, potentially returns over 1k values, usually less) 
```

FIELD2 和 3 被选中，而其他的仅被过滤。FIELD5 用于连接，但这与使用子查询的过滤无关。问题来自 (X OR Y) 子句。查询现在执行大约需要 3 秒。如果我删除 OR 子句中的任何一个条件，它会在不到十分之一的时间内执行。奇怪的是，将它们都删除会使它恢复大约 3 秒，这没有多大意义，因为它似乎并没有增加数据集的大小。带有 OR 子句或没有这两个条件的解释计划几乎相同，但它似乎不是索引问题，因为它似乎在相关表上命中相同的索引。在这两种情况下，最大的成本都来自最外层的 NLJOIN。从 OR 子句中删除一个条件（所以它'

我已经尝试使用子查询和联合来解决这个问题，甚至在两个查询之间使用 UNION ALL 仅区分该子句（这确实帮助了这个实例一点，但显着减慢了其他查询），但似乎没有任何帮助执行时间处理时间。我不能真正发布完整的详细信息，因为查询非常庞大，但希望这足以让这个想法得到理解。我知道 OR 子句有时可以将优化器抛出一个循环，所以我想关于避免有问题的 OR 子句或将优化器推向更好方向的一般建议将不胜感激，即使它不是直接针对此示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T18:09:18.527

您可以尝试使用`case`声明。

代替

```
AND ( A.FIELD3 IN ('ONE', 'TWO') 
 OR (A.FIELD3 IN ('THREE','FOUR') AND A.FIELD4 BETWEEN :x AND :y)) 
```

采用

```
AND CASE WHEN A.FIELD3 IN ('ONE', 'TWO') THEN 1 
     WHEN A.FIELD3 IN ('THREE','FOUR') AND A.FIELD4 BETWEEN :x AND :y THEN 1 ELSE 0 END = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T18:11:10.050

这可能看起来很极端，但你可以将两个快速版本结合在一起......一个与这条线

```
AND A.FIELD3 IN ('ONE', 'TWO') 
```

和一个

```
A.FIELD3 IN ('THREE','FOUR') AND A.FIELD4 BETWEEN :x AND :y) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T18:33:22.343

尝试：

```
SELECT ...
FROM
TABLE A
--A few joins and a few left joins--
WHERE A.FIELD1 IS NOT NULL
  AND A.FIELD2 IN (:parameter) 
  AND A.FIELD3 IN ('ONE', 'TWO', 'THREE', 'FOUR')
  AND (A.FIELD3 IN ('ONE', 'TWO') OR A.FIELD4 BETWEEN :x AND :y)
  AND A.FIELD5 IN (uncorrelated subquery) 
```

# python - R中的数据框

> ID：15794710
> 
> 赞同：0
> 
> 时间：2013-04-03T18:05:09.483
> 
> 标签：python, r, pandas

[事实证明， Pandas](http://pandas.pydata.org/pandas-docs/dev/timeseries.html) 作为处理时间序列数据的工具非常成功。例如，执行 5 分钟意味着您可以使用如下`resample`函数：

```
import pandas as pd
dframe = pd.read_table("test.csv", 
               delimiter=",", index_col=0, parse_dates=True,     date_parser=parse)
## 5  minutes mean
dframe.resample('t', how = 'mean')
## daily mean
ts.resample('D', how='mean') 
```

我如何在 R 中执行此操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T18:13:14.867

在 R 中，您可以使用`xts`专门用于时间序列操作的包。例如，您可以`period.apply`像这样使用函数：

```
library(xts)
zoo.data <- zoo(rnorm(31)+10,as.Date(13514:13744,origin="1970-01-01"))
ep <- endpoints(zoo.data,'days')
## daily mean 
period.apply(zoo.data, INDEX=ep, FUN=function(x) mean(x)) 
```

这个函数有一些方便的包装器，

```
apply.daily(x, FUN, ...)
apply.weekly(x, FUN, ...)
apply.monthly(x, FUN, ...)
apply.quarterly(x, FUN, ...)
apply.yearly(x, FUN, ...) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T18:11:22.550

R 有数据帧（data.frame），它也可以读取 csv 文件。例如。

```
dframe <- read.csv2("test.csv") 
```

对于日期，您可能需要使用 colClasses 参数指定列。见`?read.csv2`。例如：

```
dframe <- read.csv2("test.csv", colClasses=c("POSIXct",NA,NA)) 
```

然后，您应该能够使用`round`或对日期字段进行四舍五入`trunc`，这将允许您将数据分解为所需的频率。

例如，

```
dframe$trunc.times <- trunc(dframe$date.field,1,units='mins');
means <- daply(dframe, 'trunc.times', function(df) { return( mean(df$value) ) }); 
```

`value`您要平均的字段名称在哪里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-21T21:02:37.240

就个人而言，我真的很喜欢**lubridate**和**zoo** aggregate() 的组合用于这些操作：

```
ts.month.sum <- aggregate(ts.data, month, sum)

ts.daily.mean <- aggregate(ts.data, day, mean)

ts.mins.mean <- aggregate(ts.data, minutes, mean) 
```

您还可以使用标准时间函数 yearmon() 或 yearqtr()，或用于拆分和应用的自定义*函数*。这种方法在语法上和**pandas**一样甜美。

# shell - 以非交互方式终止 shell 函数

> ID：15794713
> 
> 赞同：1
> 
> 时间：2013-04-03T18:05:13.467
> 
> 标签：shell, zsh

有没有办法在不杀死运行它的 shell 的情况下以*非交互方式终止 shell 函数？*

我知道可以告诉 shell 如何响应信号（例如`USR1`），但我不知道信号处理程序将如何终止函数。

如有必要，您可以假设要终止的函数已经以“可终止”的方式编写（即通过声明一些合适的选项）。

（我的直接兴趣是如何为 执行此操作`zsh`，但我也有兴趣知道如何为`bash`和执行此操作`/bin/sh`。）

编辑：响应 Rob Watt 的建议：

```
% donothing () { echo $$; sleep 1000000 }
% donothing
47139 
```

如果此时我点击`Ctrl-C`了运行 shell 的同一个终端，那么函数`donothing`确实会终止，并且我会返回命令提示符。但是，如果相反，从不同的 shell 会话中，我运行

```
% kill -s INT 47139 
```

...`donothing`函数不会*终止*。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T19:58:20.233

也许我不完全理解你想要什么，但也许是这样的？

```
trap "stopme=1" 2

function longcycle() {
    last=$1
    for i in 1 2 3 4 5 
    do
        [ ! -z "$stopme" ] && return
        echo $i
        sleep 1
    done
}

stopme=""
echo "Start 1st cycle"
longcycle
echo "1st cycle end"

echo "2nd cycle"
stopme=""
longcycle
echo "2nd cycle end" 
```

以上是针对bash的。运行它，然后尝试按 CTRL-C。

或者对于`not interactively`，将上面的内容另存为`my_command`，然后尝试：

```
$ ./my_command &  #into background
$ kill -2 $! #send CTRL-C to the bg process 
```

编辑：

`sleep`您在 bash 中的示例的解决方案：

```
$ donothing() { trap '[[ $mypid ]] && trap - 2 && kill $mypid' 0 2; sleep 1000000 & mypid=$!;wait; }
$ donothing 
```

当您从另一个终端发送信号时，它将终止它。请记住，信号“0”即“过程正常结束”。语义名称：0=EXIT，2=INT...等。

也请记住，信号发送**到进程**而不是函数。在您的示例中，该进程是当前（交互式外壳），因此必须使用等待技巧来获得可中断的东西......不是一个好的解决方案 - 但是当想要中断交互式外壳中正在运行的东西时的唯一方法（不是一个分叉的）来自另一个终端......

# c# - Naudio StreamMixToDisk 错误

> ID：15794727
> 
> 赞同：0
> 
> 时间：2013-04-03T18:05:44.953
> 
> 标签：c#, vb.net, naudio

我在输入 wav 文件名并让 nAudio 接受它作为**StreamMixToDisk**时遇到问题。

```
Public Sub SetupAudio()
    'Setup the Mixer
    mixer = New WaveMixerStream32()
    mixer.AutoStop = False

    If waveOutDevice Is Nothing Then
        'waveOutDevice = new AsioOut();

        waveOutDevice = New WaveOut(0, 300, False)

        waveOutDevice.Init(mixer)
        waveOutDevice.Play()
    End If
End Sub

Private Sub cmbRecordDirect_Click(sender As Object, e As EventArgs) Handles cmbRecord.Click
    Dim saveFileDialog As New SaveFileDialog()
    saveFileDialog.Title = "Select output file:"
    saveFileDialog.Filter = "WAV Files (*.wav)|*.wav"
    saveFileDialog.FileName = outputFilename

    If saveFileDialog.ShowDialog() = DialogResult.OK Then
        outputFilename = saveFileDialog.FileName
        mixer.StreamMixToDisk(outputFilename)
        mixer.StartStreamingToDisk()
        cmbRecordDirect.Enabled = False
        cmbStopDirect.Enabled = True
        cmbPauseDirect.Enabled = True
    End If
End Sub 
```

**outputFilename**是**c:\test.wav**但是一旦它到达了**mixer.StreamMixToDisk(outputFilename)**就会出现错误提示：

```
A first chance exception of type 'System.NullReferenceException'
Object reference not set to an instance of an object. 
```

上面转换为 VB.net 的 C# 代码是这样的：

```
private void cmbRecordDirect_Click(object sender, EventArgs e)
    {
        SaveFileDialog saveFileDialog = new SaveFileDialog();
        saveFileDialog.Title = "Select output file:";
        saveFileDialog.Filter = "WAV Files (*.wav)|*.wav";
        saveFileDialog.FileName = outputFilename;
        if (saveFileDialog.ShowDialog() == DialogResult.OK)
        {
            outputFilename = saveFileDialog.FileName;
            mixer.StreamMixToDisk(outputFilename);
            mixer.StartStreamingToDisk();
            cmbRecordDirect.Enabled = false;
            cmbStopDirect.Enabled = true;
            cmbPauseDirect.Enabled = true;
        }
    } 
```

什么可能导致此错误发生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T18:22:43.913

我没有在 form_load 中调用**SetupAudio()**来启动**混音器**。

# c# - C#如何做一个不包含和一个包含

> ID：15794739
> 
> 赞同：1
> 
> 时间：2013-04-03T18:06:35.973
> 
> 标签：c#, linq

我有一个列表，我试图在其中查询包含一些信息但不包含其他信息的数据。所以：MgrName 包含 userName，或者 Name 包含 userName，如果是，Name 不包含 currentUser.Text

```
var query = from bCal in dc.ListData
            where bCal.MgrName.Contains(userName) || 
                  (bCal.Name.Contains(userName) && bCal.Name != currentUser.Text)
             select bCal; 
```

而不是使用

```
&& bCal.Name != currentUser.Text 
```

我正在尝试做类似的事情

```
 where bCal.MgrName.Contains(userName) || (bCal.Name.Contains(userName) && !(bCal.Name.Contains(currentUser.Text))) 
```

但是当以这种方式尝试时，我得到了

> 对象引用未设置为对象错误的实例。

做这个的最好方式是什么？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T18:10:53.533

似乎`bCal.Name`或`currentUser.Text`为空（假设`!=`有效）。除此之外，我没有看到它不应该工作的任何理由。

# php - jQuery Masonry - 流体布局问题

> ID：15794740
> 
> 赞同：0
> 
> 时间：2013-04-03T18:06:37.803
> 
> 标签：php, javascript, jquery, css, jquery-mobile

我正在开发一个由另一个开发人员使用 jQuery Masonry 插件制作的网站。该网站运行良好，但布局响应。这里的问题是我需要添加一些无响应的元素，因此我需要使整个站点无响应。

该站点包含大量样式表和 JavaScript，因此我不知道从哪里开始以及提供哪些代码作为参考。

但是，如果有人可以提出明显的方法来使布局无响应，那将会很有帮助。

到目前为止，我已经从样式表中删除了所有 @media 元素......但这并没有奏效......

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T19:10:06.857

我设法通过在容纳砖石 div 的容器上设置固定宽度来解决这个问题。

```
<div id="container" class="masonry" style="width: 1150px !important;">
.....
.....
</div> 
```

希望这可以帮助某人..

# php - CSS/Javascript 动态加载器

> ID：15794744
> 
> 赞同：0
> 
> 时间：2013-04-03T18:06:54.423
> 
> 标签：php, javascript, css

背景：我正在为我的办公室定制开发一个框架，让我可以创建多个模块来做不同的事情（比如 eGroupware）。我遇到的问题，我确信其他人也遇到过，当使用某些 Javascript 库时，特别是对于 jQuery，尤其是那些带有 CSS 的库，并非所有模块都需要加载所有库，所以我需要一个动态方式

1.  在标准 XML 文件中定义 CSS 或 JS 库（完成）
2.  创建一个读取存储在特定位置的 XML 文件的函数（完成）
3.  枚举为模块所需的每个脚本调用函数的数组变量
4.  细化这个方法

我定义的 XML 文件如下所示：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<library>
    <name>jQuery UI</name>
    <description>jQuery UI is a curated set of user interface interactions, effects, widgets, and themes built on top of the jQuery JavaScript Library. Whether you're building highly interactive web applications or you just need to add a date picker to a form control, jQuery UI is the perfect choice.</description>
    <url>http://www.jqueryui.com</url>
    <version>1.10.0</version>
    <js_location>/wayward/_javascript/_jquery/_ui/{version}</js_location>
    <css_location>/wayward/_javascript/_jquery/_ui/{version}</css_location>

    <js_files>
        <file>{js_location}/ui/jquery-ui.js</file>
    </js_files>

    <css_files>
        <file>{css_location}/themes/redmond/jquery-ui.css</file>
    </css_files>
</library> 
```

调用该文件时解析该文件的 PHP 函数如下：

```
function ww_Script_Loader
(
    $_ww_js_library = ''
)
{
    $xmlfile = file_get_contents( "http://" . $_SERVER[ "SERVER_NAME" ] . WW_JS_XML_DIR . "/$_ww_js_library.xml" );
    $ob = simplexml_load_string( $xmlfile );
    $json = json_encode( $ob );
    $myArray = json_decode( $json, true );

    $myPatterns[ 0 ] = "/{version}/";
    $myPatterns[ 1 ] = "/{js_location}/";
    $myPatterns[ 2 ] = "/{css_location}/";

    $myReplacements[ 0 ] = $myArray[ "version" ];
    $myReplacements[ 1 ] = preg_replace( $myPatterns[ 0 ], $myArray[ "version" ], $myArray[ "js_location" ] );
    $myReplacements[ 2 ] = preg_replace( $myPatterns[ 0 ], $myArray[ "version" ], $myArray[ "css_location" ] );

    if( !is_array( $myArray[ "js_files" ][ "file" ] ) )
    {
        foreach( $myArray[ "js_files" ] as $thisJSKey => $thisJSVal )
        {
            if( strlen( trim( $thisJSVal ) ) > 0 )
            {
                $thisJSFile = preg_replace( $myPatterns, $myReplacements, $thisJSVal );
                $thisJSLine = "<script src='$thisJSFile' />\n";
            }
        }
    }
        else
    {
        foreach( $myArray[ "js_files" ][ "file" ] as $thisJSKey => $thisJSVal )
        {
            if( strlen( trim( $thisJSVal ) ) > 0 )
            {
                $thisJSFile = preg_replace( $myPatterns, $myReplacements, $thisJSVal );
                $thisJSLine .= "<script src='$thisJSFile' />\n";
            }
        }
    }

    if( !is_array( $myArray[ "css_files" ][ "file" ] ) )
    {
        foreach( $myArray[ "css_files" ] as $thisCSSKey => $thisCSSVal )
        {
            if( strlen( trim( $thisCSSVal ) ) > 0 )
            {
                $thisCSSFile = preg_replace( $myPatterns, $myReplacements, $thisCSSVal );
                $thisCSSLine = "<link rel='stylesheet' type='text/css' href='$thisCSSFile' media='screen' />\n";
            }
        }
    }
        else
    {
        foreach( $myArray[ "css_files" ][ "file" ] as $thisCSSKey => $thisCSSVal )
        {
            if( strlen( trim( $thisCSSVal ) ) > 0 )
            {
                $thisCSSFile = preg_replace( $myPatterns, $myReplacements, $thisCSSVal );
                $thisCSSLine .= "<link rel='stylesheet' type='text/css' href='$thisCSSFile' media='screen' />\n";
            }
        }
    }

    return array( "js" => $thisJSLine, "css" => $thisCSSLine );
} 
```

常量 WW_JS_XML_DIR 是在定义函数之前在其他地方定义的，因此可以硬编码 - 它只是告诉所有 XML 文件定义的位置。

当主页被加载时，它作为一种引导程序来调用必要的模块，它还定义了要调用的 XML 文件，上面的函数在模板之前被调用，以便函数的结果输出可以连接到一个变量，然后发送到模板：

```
$wwScriptContainer[] = ww_Script_Loader( "jquery" );
$wwScriptContainer[] = ww_Script_Loader( "jquery_ui" );
$wwScriptContainer[] = ww_Script_Loader( "bubblepopup" );

foreach( $wwScriptContainer as $tmpScriptKey => $tmpScriptVal )
{
    $thisScriptBlock .= $tmpScriptVal[ "js" ];
    $thisCSSBlock .= $tmpScriptVal[ "css" ];
} 
```

我创建的用于动态加载 Javascript 和 CSS 的方法非常实用——它可以满足我的预期目的，但我想知道是否有一种方法可以真正 REFINE 这个方法，或者是否有人已经有了一些东西，我想看看它，这样我就可以比较我所做的事情，也许可以借鉴其他方法，或者干脆完全替换我的方法。

任何援助将不胜感激。

# eclipse - “打开声明”（F3）在某些项目的 Facelets 文件中不起作用

> ID：15794746
> 
> 赞同：1
> 
> 时间：2013-04-03T18:06:56.630
> 
> 标签：eclipse, jsf, maven, jboss, facelets

我已经在我的 Eclipse 中安装了 JBoss 工具插件。`F3`在Facelets 文件的 EL 表达式中按下("Open Declaration") 时，例如

```
<h:inputText value="#{sectionSearchController.sectionCode}" /> 
```

然后 Eclipse 将导航到相应的类/方法。这在某些项目中工作正常，但在其他项目中它根本不起作用。我不明白为什么。如何配置项目以使其正常工作？我正在使用 Maven 来管理我的项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T18:30:16.560

必须启用项目的 JSF facet 才能启用 JBoss JSF 工具。

![在此处输入图像描述](https://i.stack.imgur.com/7PHOX.png)

# javascript - 使用 EaselJS 调整可拖动填充的大小

> ID：15794748
> 
> 赞同：1
> 
> 时间：2013-04-03T18:07:10.243
> 
> 标签：javascript, drag-and-drop, resize, easeljs

我有一个项目，我使用 EaselJS 在容器内创建填充（矩形）和文本。我的目标是使这个矩形和文本可拖动以将其移动到画布上。这已经完成并且运行良好。

我的问题是当我尝试使用`scaleX`和`scaleY`使用 onMouseOver 处理程序调整矩形大小时。这确实完成了，但是矩形只是从它的初始点移动到其他位置。

我已经读过我需要使用`regX`and`regY`属性来覆盖它，但是在我的代码的上下文中我不能。我究竟做错了什么？

这是我的 Javascript 代码：

```
(function(){
    var stage, myCanvas;
    var update = true;

    this.init = function() {
        myCanvas = document.getElementById("stageCanvas");
        stage = new createjs.Stage(myCanvas);
        stage.enableMouseOver();
        stage.mouseEnabled = true;
        stage.mouseMoveOutside = true;

        // Reference Shape
        var rectFijo0 = new createjs.Shape();
        rectFijo0.graphics.beginFill("#DCD8D4").rect(140,160,78,35);
        stage.addChild(rectFijo0);

        // Shape
        var rectOpt0 = new createjs.Shape();
        rectOpt0.graphics.beginFill("#C51A76").rect(140,160,78,35);

        txtOpt0 = new createjs.Text("TEST","bold 20px","#FFF");
        txtOpt0.textAlign ="center";
        txtOpt0.x = 50;
        txtOpt0.y = 50;

        // Container
        var containerOpt0= new createjs.Container();
        containerOpt0.mouseEnabled = true;
        //#######
        // Probably here is my problem. I don't understand why if I use regX and regY the rectangle moves the lower right corner to the center, instead of just using this point as a registration point. Why? What I am not understanding?
        //containerOpt0.regX = 78/2;
        //containerOpt0.regY = 35/2;
        //#######
        containerOpt0.onPress = pressHandler;
        containerOpt0.onMouseOver = mouseOverHandler;
        containerOpt0.addChild(rectOpt0, txtOpt0);

        stage.addChild(containerOpt0);
        stage.update();
        createjs.Ticker.setFPS(60);
        createjs.Ticker.addEventListener("tick", tick);
    }

    function pressHandler(e){
    // onPress Handler to drag
        var offset = {x:e.target.x-e.stageX, y:e.target.y-e.stageY};
        e.onMouseMove = function(ev) {
            e.target.x = ev.stageX+offset.x;
            e.target.y = ev.stageY+offset.y;
            update = true;
        }
    }

    function mouseOverHandler(e){
        e.target.scaleX = .5;
        e.target.scaleY = .5;
        update = true;
    }

    function tick() {
    if (update) {
            update = false;
            stage.update();
        }
    }

    window.onload = init();
}()); 
```

这是我的[JS Fiddle 示例](http://jsfiddle.net/metafaniel/WfMGr/)，因此您可以确切地看到发生了什么。只需将鼠标拖到矩形上即可了解我的意思。这一定很容易实现，但我不确定如何实现。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T08:58:08.033

你的问题是，你不是在 0|0 绘制你的矩形，“标准”方法是从 0|0 开始绘制你的形状，然后将形状本身定位在某个`.x`地方`.y`

```
rectOpt0.graphics.beginFill("#C51A76").rect(140,160,78,35);
=> changed to
rectOpt0.graphics.beginFill("#C51A76").rect(0,0,78,35); 
```

此外，我将容器放置在 140|160 + regX/Y 偏移处：

```
containerOpt0.regX = 78/2; //regX/Y to have is scale to the center point
containerOpt0.regY = 35/2;
containerOpt0.x = 140 + 78/2;  //placement + regX offset/correction
containerOpt0.y = 160 + 35/2; 
```

这是更新的小提琴：http: [//jsfiddle.net/WfMGr/2/](http://jsfiddle.net/WfMGr/2/)

# c# - LINQ lambda OrderByDescending on group by key.count() 返回分组字符串列表，用于图表图例排序

> ID：15794757
> 
> 赞同：0
> 
> 时间：2013-04-03T18:07:43.233
> 
> 标签：c#, asp.net-mvc, linq, lambda

试图在 MVC 4 C# 中对饼图的图例进行排序。该图表显示了按项目编号销售的产品数量。在图例中，我想显示商品编号，然后是售出数量，然后是售出百分比，并按售出数量降序排列。

我已经正确订购了“Y”值（＃已售出），但是在尝试订购“X”值时，它们最终变得混乱并且与它们正确的“Y”值不匹配。

在我看来，我应该只需要按项目编号对数据进行分组，然后按项目编号的匿名类型和项目编号计数选择数据，然后根据项目编号计数按降序排列，然后仅这次再次选择现在以正确的顺序获取项目编号的列表字符串。

上述方法工作正常的可能性很大，而问题更多在于我几乎完全不了解该`DataBindXY`方法在图表中的工作原理。

代码：

```
var data = srv.GetTSMMetricData(Mode, Territories, selectedTerritory).GroupBy(x => x.ItemNumber).ToList();

var xValues = data.Select(x => x.Key).OrderByDescending(x => x.Count()).ToList();

mySeries.Points.DataBindXY(xValues, data.Select(x => x.Count()).OrderByDescending(x => x).ToList()); 
```

任何朝着正确方向的帮助或推动都会很棒。让我知道是否还有其他我可以发布的内容可能会丢失。

谢谢。

编辑：忘记了我试图在上述代码的早期版本中使用匿名类型..

```
var xValues = data.Select(x => new { Item = x.Key, Count = x.Key.Count() }).OrderByDescending(x => x.Count).ToList();

mySeries.Points.DataBindXY(xValues.Select(x => x.Item).ToList(), data.Select(x => x.Count()).OrderByDescending(x => x).ToList()); 
```

编辑 2：当前结果示例（前 5 个图例条目）..

```
ItemNumber - # Sold - % Sold ----- Correct ItemNumber for # Sold
-------------------------------------------------------------
8500         42       (20.79)%     PRS
JOL          19       (9.41)%      JOL
280          18       (8.91)%      ENV
171          13       (6.44)%      AMR
172          12       (5.94)%      GRD

Note: 38 rows of total results 
```

结果具有查询的所有正确 ItemNumbers 和所有 #Sold 但未将 ItemNumbers 与正确的 #Sold 匹配。我可以重新编写代码，使 ItemNumbers 和 #Sold 匹配，但只按 ItemNumber 排序，我真的想按 #Sold 排序。希望这可以更清楚地说明问题所在以及我希望看到的情况。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T18:41:08.770

我认为通过两次排序，您可以混淆键和值的顺序。

确保首先创建正确排序的对列表：

```
var data = srv.GetTSMMetricData(Mode, Territories, selectedTerritory)
           .GroupBy(x => x.ItemNumber)
           .Select( x => new
                        {
                            ItemNumber = x.Key,
                            Count = x.Count()
                        } )
           .OrderByDescending(x => x.Count)
           .ToList(); 
```

然后进行绑定：

```
mySeries.Points.DataBindXY(data.Select(x => x.ItemNumber)
                          ,data.Select(x => x.Count)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T18:24:07.860

`GroupBy`返回一个`IEnumerable<IGrouping<TKey,TEntity>`

要计算每个分组中的对象数：

```
srv.GetTSMMetricData(Mode, Territories, selectedTerritory)
    .GroupBy(x => x.ItemNumber)
    .Select( x => new
        {
            ItemNumber = x.Key,
            Count = x.Count()
        } ); 
```

# database - Amazon S3 GET Object 和 PUT Object 命令在对象数量多时会变慢吗？

> ID：15794762
> 
> 赞同：0
> 
> 时间：2013-04-03T18:07:51.233
> 
> 标签：database, amazon-web-services, amazon-s3, get, put

我正在考虑将 S3 用于后端持久存储。

但是，根据架构选择，我预测一些存储桶可能需要存储数十亿个小对象。

假设我使用 UUID 作为键，GET Object 和 PUT Object 在这些条件下将如何执行？我可以期待 O(1)、O(logN) 或 O(n) 的性能吗？

我是否需要重新考虑我的架构并以某种方式细分更大的存储桶以保持性能？我尤其需要尽可能快的对象查找 (GET)。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-03T19:54:45.387

尽管它可能适用于请求量非常大的 S3 客户，但亚马逊确实有一些技巧可以根据 S3 的内部架构充分利用 S3：

> *   按键名按字母数字递增的顺序对特定存储桶执行 PUT 可以减少每个单独调用的总响应时间。以任何排序顺序执行 GET 可以产生类似的效果。对象越小，这可能对整体吞吐量的影响就越大。
>     
>     
> *   从单个客户端执行多个请求时，请使用多线程来启用并发请求执行。
>     
>     
> *   考虑使用一小组字符为键添加散列。十进制哈希效果很好。
>     
>     
> *   考虑使用以不同字母数字字符开头的多个存储桶。这将确保从一开始就进行一定程度的分区。并发 PUT 和 GET 请求的数量越高，这可能产生的影响就越大。
>     
>     
> *   如果您要从 Amazon EC2 实例内对 Amazon S3 发出 GET 请求，您可以通过从 Amazon EC2 内对这些对象执行 PUT 来最大限度地减少这些调用的网络延迟。
>     
>     
> 
> 资料来源：[http ://aws.amazon.com/articles/1904](http://aws.amazon.com/articles/1904)

这是来自 AWS 的一篇很棒的文章，深入探讨了哈希前缀策略，并解释了何时需要和不需要：

> [http://aws.typepad.com/aws/2012/03/amazon-s3-performance-tips-tricks-seattle-hiring-event.html](http://aws.typepad.com/aws/2012/03/amazon-s3-performance-tips-tricks-seattle-hiring-event.html)

底线：您计划使用 UUID 作为键将数十亿个对象放在一个存储桶中应该没问题。如果您的请求量很大，您可以将其拆分为具有不同前导字符的多个存储桶，以便更好地进行分区。

如果您打算在 AWS 上花很多钱，请考虑与 Amazon 联系并与他们讨论方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T18:57:10.953

S3 就像一个外部磁盘。所以像读/写 GET 或 PUT 将取决于文件对象的大小，而不管磁盘中其他文件的数量。从常见问题[页面](http://aws.amazon.com/s3/faqs/)：

> 由于 Amazon S3 具有高度可扩展性，并且您只需为使用的内容付费，因此开发人员可以从小处着手并根据需要扩展他们的应用程序，而不会影响性能或可靠性。它被设计为高度灵活：存储您想要的任何类型和数量的数据；读取同一条数据一百万次或仅用于紧急灾难恢复；构建一个简单的 FTP 应用程序，或一个复杂的 Web 应用程序，例如 Amazon.com 零售网站。Amazon S3 让开发人员可以专注于创新，而不是弄清楚如何存储他们的数据。

如果您想知道 S3 文件系统中文件查找的时间复杂度是多少，很难说，因为我不知道它是如何做到的。但至少比 O(n) 好。O(1) if 使用 hash 或 O(logn) if 树。但两者都具有很强的可扩展性。

底线是不要担心这一点。

# bash - 当 stderr 在 stdout 之后重定向时会发生什么？

> ID：15794765
> 
> 赞同：1
> 
> 时间：2013-04-03T18:08:05.990
> 
> 标签：bash, shell, pipe

当`stderr`被重定向之后会发生什么`stdout`，反之亦然？

例如：

`someCommand > log.txt 2>&1`

对比

`someCommand 2>&1 > log.txt`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T18:18:19.407

重定向按出现的顺序进行：

```
someCommand > log.txt 2>&1 
```

*   stdout 是文件描述符 1`fd(1) == stdout`
*   stderr 是文件描述符 2`fd(2) == stderr`
*   将文件描述符 1 重定向到`log.txt`结果`fd(1) == log.txt`
*   将文件描述符 2 重定向到文件描述符 1 会导致`fd(2) == fd(1) == log.txt`
*   导致写入文件描述符 1 或 2 的所有内容实际上都写入 log.txt。

```
someCommand 2>&1 > log.txt 
```

*   stdout 是文件描述符 1`fd(1) == stdout`
*   stderr 是文件描述符 2`fd(2) == stderr`
*   将文件描述符 2 重定向到文件描述符 1 会导致`fd(2) == fd(1) == stdout`
*   将文件描述符 1 重定向到`log.txt`结果`fd(1) == log.txt`
*   导致写入文件描述符 1 的所有内容实际上都写入 log.txt
*   并且写入文件描述符 2 的所有内容实际上都写入了 stdout

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T18:14:25.437

`someCommand > log.txt 2>&1`- stdout 和 stderr 都为`log.txt`.

`someCommand 2>&1 > log.txt`- 标准输出到`log.txt`，标准错误到前标准输出（屏幕）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T18:11:24.270

在第一种情况下，stdout 被定向到文件`log.txt`，然后 stderr 被定向到 stdout 附加到的内容（文件`log.txt`）。在第二种情况下。stderr 指向 stdout 附加到的东西（可能是 tty），然后 stdout 指向 file `log.txt`。

# php - 使用 HTML5 (JQuery) 的基本身份验证

> ID：15794766
> 
> 赞同：-2
> 
> 时间：2013-04-03T18:08:08.430
> 
> 标签：php, javascript, jquery, html

我想使用 Embarcadero 的 HTML5 Builder 附带的组件（BasicAuthentication）。

我在 PHP（服务器端）中使用了这个组件，没有问题，它被称为：

```
$this->BasicAuthentication1->Execute(); 
```

这将生成一个弹出屏幕，作为用户 ID 和密码的用户。

后来我发现（客户端）无法做到这一点，因为调用必须在 JavaScript 或 JQuery 中。我不知道该怎么做？有人可以帮我举个例子吗？

我试过这个，但它什么也没做：

```
var component = jQuery('#BasicAuthentication1'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T18:10:59.013

你不能。您所描述的弹出窗口不是网页的一部分，无法通过 Javascript 进行操作。

# java - HashMap 是如何决定把东西放在哪里的？

> ID：15794767
> 
> 赞同：1
> 
> 时间：2013-04-03T18:08:06.797
> 
> 标签：java, hashmap

HashMap 中的 add 方法如何确定键在 HashMap 中的位置？比如，如果我试图将“S”、“T”、“A”、“C”、“K”放入大小为 10 的 HashMap 中，它如何确定每个字母的去向？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T18:13:35.447

对象哈希码的最低有效位用于选择存储桶。请注意，没有大小为 10 的 java.util.HashMap 之类的东西，大小必须是 2 的幂，以便可以屏蔽位以选择存储桶。如果你将 10 传递给构造函数，你将得到一个带有 16 个桶的 HashMap。

因此，为了清楚起见，减少到 8 位，如果“S”返回哈希码 123，java 就可以了

```
01111011 & 00001111 -> 00001011 
```

并将 S 放入桶 11。

真正的 Hash Map 还应用了一个二级散列函数，该函数向右移动位以确保在最低有效位中存在具有一些熵的数据，因此即使它们的 hashCode 函数不是那么好，事物也很有可能均匀分布。

# java - 当 RHS == Integer.MAX_VALUE 时整数的布尔比较，为什么这个循环会终止？

> ID：15794768
> 
> 赞同：4
> 
> 时间：2013-04-03T18:08:12.780
> 
> 标签：java, openjdk, eclipse-jdt

我试图弄清楚为什么这个循环会终止......

```
@Test
public void test() {

    int counter=0;
    int from = 0;
    int until = Integer.MAX_VALUE;

    while(counter <= until) {
        counter++;
        if(counter < from) {
            System.out.println("continuing " + counter + " <= " + from);
            continue;
        } 
    }
    System.out.println("finished " + counter);
} 
```

`while(counter <= until)`应始终解析为，`true`因为计数器不能增加到超过 Integer.MAX_VALUE。因此，循环不应终止。

但是，在 Eclipse 中，如果我使用 JUnit runner 运行，我会得到：

```
finished 108772 
```

如果我在调试器中运行，我会得到：

```
finished 125156 
```

中的输出`if(counter < from)`永远不会输出。如果我删除该块，代码仍然会终止，这次是 Integer.MAX_VALUE。

```
finished 2147483647 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T19:19:22.643

我无法重现您的输出，所以这不是答案，只是观察。只考虑这些行。

```
int counter=0;
int until = Integer.MAX_VALUE;
while(counter <= until) {
    counter++; 
```

while 条件是“小于或等于”。因此，当计数器等于 Integer.MAX_VALUE 时，会添加一个。这会产生最大可能的 Java 负数。继续向这个值加一，它最终会变为零，然后再次计数，直到达到 Integer.MAX_VALUE。然后整个序列重新开始。对我来说，它看起来像一个无限循环。

您还将在每次迭代中执行“继续”行，同时从最大的负数开始计数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T18:17:55.610

不太确定您在这里尝试做什么，您的 while 循环将按预期工作，但 from 永远不会改变，因此“计数器小于 from”永远不会被执行？

直到（最大 int）将 = 2147483647

如果将 while 循环更改为 (counter < until)，则会得到“finished 2147483647”的输出文本

这种帮助？

# iphone - iPhone 应用程序被拒绝 - 由于 iPad 崩溃，目标设备系列设置为仅 iPhone

> ID：15794771
> 
> 赞同：0
> 
> 时间：2013-04-03T18:08:26.257
> 
> 标签：iphone, ios, app-store, appstore-approval

由于在 iPad 设备上测试时出现内存问题，我的 iPhone 应用程序今天被拒绝了。

> 我们发现您的应用在运行 iOS 6.1.3 的 iPad（第 3 代）上安装时在启动时崩溃，这不符合 App Store 审查指南。
> 
> 如果您的应用使用太多内存，它可能会遇到此问题。要了解有关 iOS 内存使用情况以及如何跟踪内存使用和泄漏的更多信息，请参阅内存使用性能指南。

奇怪的是，我的目标设备系列仅设置为 iPhone。

任何人都知道为什么他们仍然会在 iPad 设备上进行测试？

问候，莎莉

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-03T18:10:33.137

因为 iPhone 应用程序在 iPad 上运行。但不是相反。这允许 iPad 拥有更多应用程序，因为 iPhone 应用程序可以在 2x 模式下运行。

在 iPad 模拟器中运行应用程序时检查仪器以发现泄漏。

# c# - 为什么这个查询会产生文件共享冲突？

> ID：15794772
> 
> 赞同：1
> 
> 时间：2013-04-03T18:08:26.477
> 
> 标签：c#, compact-framework, sql-server-ce, windows-ce

以下代码给了我错误（我从`MessageBox.Show()`catch 块中得到它）

> “PopulateBla() 中的异常：存在文件共享冲突。不同的进程可能正在使用文件 [,,,,,,]

**代码**

```
using (SqlCeCommand cmd = new SqlCeCommand(SQL_GET_VENDOR_ITEMS, new SqlCeConnection(SQLCE_CONN_STR))) 
{
    cmd.Parameters.Add("@VendorID", SqlDbType.NVarChar, 10).Value = vendorId; 
    cmd.Parameters.Add("@VendorItemID", SqlDbType.NVarChar, 19).Value = vendorItemId;
    try 
    {
        cmd.Connection.Open();
        using (SqlCeDataReader SQLCEReader = cmd.ExecuteReader(CommandBehavior.SingleRow)) 
        {
            if (SQLCEReader.Read())  
            {
                itemID = SQLCEReader.GetString(ITEMID_INDEX);
                packSize = SQLCEReader.GetString(PACKSIZE_INDEX);
                recordFound = true;
            }
        }
    } 
    catch (SqlCeException err) 
    {
        MessageBox.Show(string.Format("Exception in PopulateControlsIfVendorItemsFound: {0}\r\n", err.Message));//TODO: Remove
    } 
    finally 
    {
        if (cmd.Connection.State == ConnectionState.Open) 
        {
            cmd.Connection.Close();
        }
    }
} 
```

`SQL_GET_VENDOR_ITEMS`是我的查询字符串。

这里可能会发生什么文件共享问题？

## 更新

这种代码使得 ctacke 推荐的重构变得困难：

```
public void setINVQueryItemGroup( string ID )
{
    try
    {
        dynSQL += " INNER JOIN td_item_group ON t_inv.id = td_item_group.id AND t_inv.pack_size = td_item_group.pack_size WHERE td_item_group.item_group_id = '" + ID + "'";
    } 
    catch( Exception ex )
    {
        CCR.ExceptionHandler( ex, "InvFile.setINVQueryDept" );
    }
} 
```

通过单独的方法附加 SQL 语句，更改全局变量 (dynSQL)，同时可能允许 SQL 注入（取决于分配 ID 的位置/方式）。如果这还不够，抛出的任何异常都可能误导疲倦的 bughunter，因为它表明它发生在不同的方法中（无疑是粗心的复制和粘贴操作的受害者）。

这是“编码恐怖” - 值得。您可以在几行代码中忽略多少最佳实践？

这是另一个例子：

```
string dynSQL = "SELECT * FROM purgatory WHERE vendor_item = '" + VendorItem + "' ";

if (vendor_id != "")
{
    dynSQL += "AND vendor_id = '" + vendor_id + "' ";
} 
```

可以通过用“？”替换 args 来完成，但是然后确定要分配哪些/多少参数的代码将比 Joe Garagiola 的平均夹板丑 42 倍。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T18:37:03.813

如果该文件未标记为只读（您检查过，对吗？），那么您有另一个进程对该文件具有非共享锁定。

如果 SQL CE 附带的 isql.exe 数据库浏览器在后台运行，则它是常见的罪魁祸首。

根据您的 SQLCE 版本，很可能另一个进程有一个打开的连接（不记得哪个版本开始允许多个进程连接），所以如果您在后台有任何其他应用程序打开它，那可能是也有问题。

您还使用了大量与该数据库的连接，它们并不总是被清理并立即释放到 Dispose。我强烈建议构建一个简单的连接管理器类，它保持与数据库的单个（或两个以上）连接，并将它们重用于所有操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T20:17:34.420

我真的很喜欢 Chris 使用单一连接到您的数据库的想法。您可以像这样向您的班级声明全局：

```
public ClayShannonDatabaseClass
{

    private SqlCeConnection m_openConnection;

    public ClayShannonDatabaseClass()
    {
       m_openConnection = new SqlCeConnection();
       m_openConnection.Open();
    }

    public void Dispose()
    {
       m_openConnection.Close();
       m_openConnection.Dispose();
       m_openConnection = null;
    }

} 
```

我猜您的代码在您尝试实际打开数据库时崩溃。

为了验证这一点，您可以在代码中粘贴一个整数值来帮助您调试。

例子：

```
int debugStep = 0;
try 
{
    //cmd.Connection.Open(); (don't call this if you use m_openConnection)
    debugStep = 1;
    using (SqlCeDataReader SQLCEReader = cmd.ExecuteReader(CommandBehavior.SingleRow)) 
    {
        debugStep = 2;
        if (SQLCEReader.Read())  
        {
            debugStep = 3;
            itemID = SQLCEReader.GetString(ITEMID_INDEX);
            debugStep = 4;
            packSize = SQLCEReader.GetString(PACKSIZE_INDEX);
            debugStep = 5;
            recordFound = true;
        }
    }
} 
catch (SqlCeException err) 
{
    string msg = string.Format("Exception in PopulateControlsIfVendorItemsFound: {0}\r\n", err.Message);
    string ttl = string.Format("Debug Step: {0}", debugStep);
    MessageBox.Show(msg, ttl); //TODO: Remove
}
// finally (don't call this if you use m_openConnection)
// {
//     if (cmd.Connection.State == ConnectionState.Open) 
//     {
//         cmd.Connection.Close();
//     }
// } 
```

我猜你的错误出现在第 1 步。

# .net - 将复选框选定值文本框绑定到与绑定到下拉列表的属性不同的属性

> ID：15794782
> 
> 赞同：1
> 
> 时间：2013-04-03T18:09:14.540
> 
> 标签：.net, wpf, xaml, binding, combobox

我的组合框绑定到 3 个属性（IsVisited、Address 和 City）：

```
<ComboBox Height="100" HorizontalAlignment="Left" Margin="100,25,0,0" Name="ComboBox1" VerticalAlignment="Top" Width="300">
    <ComboBox.ItemTemplate>
        <DataTemplate>
            <StackPanel Orientation="Horizontal">
                <CheckBox IsChecked="{Binding IsVisited}" Width="150" />
                <TextBlock Text="{Binding Address}" Width="100" />
                <TextBlock Text="{Binding City}" Width="100" />
            </StackPanel>
        </DataTemplate>
    </ComboBox.ItemTemplate>
</ComboBox> 
```

我想创建一个包含两列下拉列表的 wpf 组合框

1.  已访问（复选框）
2.  城市（字符串）

组合框的选定文本框部分应仅显示“地址”。有谁知道如何实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T18:27:52.103

一个有点 hacky 的解决方案是检查您`DataTemplate`是否在 a 内`ComboBoxItem`，并在不在时隐藏不需要的值：

```
 <ComboBox.ItemTemplate>
                <DataTemplate>
                    <StackPanel Orientation="Horizontal">
                        <CheckBox IsChecked="{Binding IsVisited}" Width="150" x:Name="chk"/>
                        <TextBlock Text="{Binding Address}" Width="100"/>
                        <TextBlock Text="{Binding City}" Width="100" x:Name="City"/>
                    </StackPanel>
                    <DataTemplate.Triggers>
                        <DataTrigger Binding="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type ComboBoxItem}}}" Value="{x:Null}">
                            <Setter TargetName="City" Property="Visibility" Value="Collapsed"/>
                            <Setter TargetName="chk" Property="Visibility" Value="Collapsed"/>
                        </DataTrigger>
                    </DataTemplate.Triggers>
                </DataTemplate>
            </ComboBox.ItemTemplate> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T05:52:21.877

我已经重现了你的问题，我已经完成了你的任务。

这是最初的看法。

![在此处输入图像描述](https://i.stack.imgur.com/8sQMR.png)

然后在选择了 Kegalla 之后，

![在此处输入图像描述](https://i.stack.imgur.com/mBOta.png)

我认为这就是你所需要的。

1.  为 ComboBoxItem定义一个`view model`。（在我的情况下，我创建了一个名为`MyComboBoxItem`并包含属性的类`HasVisited, Address, City, TextBoxValue`）

2.  在您的主视图模型中，定义一个`property`绑定 ComboBox `ItemsSource`（我定义了一个名为 的属性`ComboBoxItems`）和另一个绑定`SelectedItem`ComboBox 的属性（我定义了一个名为 的属性`SelectedComboBoxItem`）。

3.  在选择更改方法中，实现您的逻辑来设置 texbox。

这是我的`XAML`

```
<Window x:Class="ComboboxSelectedItemChange.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
    xmlns:vm="clr-namespace:ComboboxSelectedItemChange.ViewModels"
    Title="MainWindow" Height="350" Width="525">
<Grid>

    <Grid.DataContext>
        <vm:MainViewModel />
    </Grid.DataContext>

    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="100" />
        <ColumnDefinition Width="*" />
    </Grid.ColumnDefinitions>
    <Grid.RowDefinitions>
        <RowDefinition Height="40" />
        <RowDefinition Height="30" />
    </Grid.RowDefinitions>

    <Label Grid.Column="0" Grid.Row="0" Content="Combo box test" />
    <ComboBox Grid.Column="1" Grid.Row="1"
              ItemsSource="{Binding ComboBoxItems}"
              SelectedItem="{Binding SelectedComboBoxItem}">

        <ComboBox.ItemTemplate>
            <DataTemplate>
                <StackPanel Orientation="Horizontal">
                    <CheckBox IsChecked="{Binding HasVisited}" Width="30" />
                    <TextBlock Text="{Binding TextBoxValue}" Width="100" />
                </StackPanel>
            </DataTemplate>
        </ComboBox.ItemTemplate>

        <i:Interaction.Triggers>
            <i:EventTrigger EventName="SelectionChanged">
                <i:InvokeCommandAction Command="{Binding ChangeSelectionCommand}" />
            </i:EventTrigger>
        </i:Interaction.Triggers>
    </ComboBox>
</Grid> 
```

这是我`Main View model`绑定到上述观点的

```
public class MainViewModel : ViewModelBase
{
    #region Declarations

    private ObservableCollection<MyComboBoxItemViewModel> comboBoxItems;
    private MyComboBoxItemViewModel selectedComboBoxItem;

    private ICommand changeSelectionCommand;
    #endregion

    #region Properties

    /// <summary>
    /// Gets or sets the combo box items.
    /// </summary>
    /// <value>The combo box items.</value>
    public ObservableCollection<MyComboBoxItemViewModel> ComboBoxItems
    {
        get
        {
            return comboBoxItems;
        }
        set
        {
            comboBoxItems = value;
            NotifyPropertyChanged("ComboBoxItems");
        }
    }

    /// <summary>
    /// Gets or sets the selected combo box item.
    /// </summary>
    /// <value>The selected combo box item.</value>
    public MyComboBoxItemViewModel SelectedComboBoxItem
    {
        get
        {
            return selectedComboBoxItem;
        }
        set
        {
            selectedComboBoxItem = value;
            NotifyPropertyChanged("SelectedComboBoxItem");
        }
    }
    #endregion

    #region Commands

    /// <summary>
    /// Gets the change selection command.
    /// </summary>
    /// <value>The change selection command.</value>
    public ICommand ChangeSelectionCommand
    {
        get
        {
            if (changeSelectionCommand == null)
            {
                changeSelectionCommand = new RelayCommand(param => this.ChangeSelection(),
                    null);
            }
            return changeSelectionCommand;
        }
    }

    #endregion

    #region Constructors

    /// <summary>
    /// Initializes a new instance of the <see cref="MainViewModel"/> class.
    /// </summary>
    public MainViewModel()
    {
        //Add some dummy data

        this.ComboBoxItems = new ObservableCollection<MyComboBoxItemViewModel>();

        MyComboBoxItemViewModel item1 = new MyComboBoxItemViewModel();
        item1.HasVisited = false;
        item1.Address = "123, Matara";
        item1.City = "Matara";
        item1.TextBoxValue = item1.City;
        this.ComboBoxItems.Add(item1);

        MyComboBoxItemViewModel item2 = new MyComboBoxItemViewModel();
        item2.HasVisited = false;
        item2.Address = "125, Colombo";
        item2.City = "Colombo";
        item2.TextBoxValue = item2.City;
        this.ComboBoxItems.Add(item2);

        MyComboBoxItemViewModel item3 = new MyComboBoxItemViewModel();
        item3.HasVisited = false;
        item3.Address = "465, Kegalle";
        item3.City = "Kegalle";
        item3.TextBoxValue = item3.City;
        this.ComboBoxItems.Add(item3);

        this.SelectedComboBoxItem = item2;

        this.ComboBoxItems.Where(item => item == this.SelectedComboBoxItem).First().TextBoxValue = this.SelectedComboBoxItem.Address;
    }

    #endregion

    #region Private Methods

    /// <summary>
    /// Changes the selection.
    /// </summary>
    private void ChangeSelection()
    {
        foreach (var comboBoxitem in this.ComboBoxItems)
        {
            this.ComboBoxItems.Where(item => item == comboBoxitem).First().TextBoxValue = comboBoxitem.City;
        }

        this.ComboBoxItems.Where(item => item == this.SelectedComboBoxItem).First().TextBoxValue = this.SelectedComboBoxItem.Address;
        this.ComboBoxItems.Where(item => item == this.SelectedComboBoxItem).First().HasVisited = true;
    }

    #endregion
} 
```

这是`MyComboBoxItemViewModel`

```
public class MyComboBoxItemViewModel : ViewModelBase
{ 
    #region Declarations

    private bool hasVisited;
    private string address;
    private string city;
    private string textBoxValue;

    #endregion

    #region Properties

    /// <summary>
    /// Gets or sets a value indicating whether this instance has visited.
    /// </summary>
    /// <value>
    ///     <c>true</c> if this instance has visited; otherwise, <c>false</c>.
    /// </value>
    public bool HasVisited
    {
        get
        {
            return hasVisited;
        }
        set
        {
            hasVisited = value;
            NotifyPropertyChanged("HasVisited");
        }
    }

    /// <summary>
    /// Gets or sets the address.
    /// </summary>
    /// <value>The address.</value>
    public string Address
    {
        get
        {
            return address;
        }
        set
        {
            address = value;
            NotifyPropertyChanged("Address");
        }
    }

    /// <summary>
    /// Gets or sets the city.
    /// </summary>
    /// <value>The city.</value>
    public string City
    {
        get
        {
            return city;
        }
        set
        {
            city = value;
            NotifyPropertyChanged("City");
        }
    }

    /// <summary>
    /// Gets or sets the text box value.
    /// </summary>
    /// <value>The text box value.</value>
    public string TextBoxValue
    {
        get
        {
            return textBoxValue;
        }
        set
        {
            textBoxValue = value;
            NotifyPropertyChanged("TextBoxValue");
        }
    }

    #endregion
} 
```

# jquery - ASP MVC3 - 使用局部视图将新的 HTML 元素附加到页面

> ID：15794783
> 
> 赞同：6
> 
> 时间：2013-04-03T18:09:14.923
> 
> 标签：jquery, ajax, asp.net-mvc-3, asp.net-mvc-2, partial-views

我目前在我的 ASP MVC3 视图上使用 Ajax 调用来将新列表项附加到页面。该视图进行 Ajax 调用，该调用调用一个控制器`ViewResult`操作，该操作返回部分视图。然后将 Ajax 设置为调用源自调用`.append(html)`的元素上的方法。`<div>`

问题是，不是附加新行，而是整个视图消失，只显示部分视图。

这是视图中的代码。此视图使用具有单独模型的列表对象的视图模型。这部分代码调用局部视图来显示列表对象中的每个项目。

```
@model Monet.ViewModel.BankListViewModel
@using (Html.BeginForm())
{
    <fieldset>
        <legend>Stat(s) Fixed</legend>
        <table>
        <th>State Code</th>
        <th>Agent ID</th>
        <th></th>
            <div class="fixedRows">
                @foreach(var item in Model.Fixed)
                {
                    if (!String.IsNullOrWhiteSpace(item.AgentId))
                    {

                            @Html.Partial("FixedPartialView", item) 

                    }      
                }
            </div>
        </table>
        <br />
        @Html.ActionLink("Add another", "BlankFixedRow", null, new { id = "addFixed"})
    </fieldset>
} 
```

这是`addFixed`Ajax 调用

```
$("#addFixed").click(function () {
    $.ajax({
        url: this.href,
        cache: false,
        success: function (html) { $("#fixedRows").append(html); }
    });
    return false;
}); 
```

这是`ViewResult`Ajax 调用的控制器操作

```
 public ViewResult BlankFixedRow()
    {
        SelectList tmpList = new SelectList(new[] { "AL", "AK", "AS", "AZ", "AR", "CA", "CO", "CT", "DE", "DC", "FM", "FL", "GA", "GU", "HI", "ID", "IL", "IN", "IA", "KS", "KY", "LA", "ME", "MH", "MD", "MA", "MI", "MN", "MS", "MO", "MT", "NE", "NV", "NH", "NJ", "NA", "NM", "NY", "NC", "ND", "MP", "OH", "OK", "OR", "PW", "PA", "PR", "RI", "SC", "SD", "TN", "TX", "UT", "US", "VT", "VI", "VA", "WA", "WV", "WI", "WY" });
        ViewBag.StateCodeList = tmpList;

        return View("FixedPartialView", new BankListAgentId());
    } 
```

最后，这是部分观点。

```
@model Monet.Models.BankListAgentId

@using (Html.BeginCollectionItem("Fixed"))
{
    <tr id="item-@Model.AgentId">
        <td>
            @Html.DropDownListFor(model => model.StateCode,
                (SelectList)ViewBag.StateCodeList, Model.StateCode)
        </td>
        <td>
            @Html.EditorFor(model => model.AgentId)
            @Html.ValidationMessageFor(model => model.AgentId)
        </td>
        <td>
        <a href="#" onclick="$('#item-@Model.AgentId').parent().remove();" style="float:right;">Delete</a></td>
    </tr>
} 
```

选择`Add another`链接后，页面看起来像这样

![在此处输入图像描述](https://i.stack.imgur.com/rCCrT.png)

对此

![在此处输入图像描述](https://i.stack.imgur.com/vYySy.png)

根据下面的评论，这里是页面的 HTML：

```
<input type="hidden" name="Fixed.index" autocomplete="off" value="6dd1b028-14f7-4400-95d1-a803c2521b68" />
        <tr id="item-">
            <td>
                <select id="Fixed_6dd1b028-14f7-4400-95d1-a803c2521b68__StateCode" name="Fixed[6dd1b028-14f7-4400-95d1-a803c2521b68].StateCode"><option>AL</option>
<option>AK</option>
<option>AS</option>
<option>AZ</option>

.
.
. <-removed list of all 50 states for clarity
</select>
            </td>
            <td>
                <input class="text-box single-line" id="Fixed_6dd1b028-14f7-4400-95d1-a803c2521b68__AgentId" name="Fixed[6dd1b028-14f7-4400-95d1-a803c2521b68].AgentId" type="text" value="" />

            </td>
            <td>
                <a href="#" class="deleteRow">delete</a>
            </td>

        </tr>
                    </section> 
```

编辑

阅读下面的评论后，我将 table 标记更改为`<table id="fixedRows">`，但是，这返回了相同的结果。然后我更改了`success`Ajax 调用的属性以包含一些基本的 HTML，如下所示

```
success: function (html) { $("#fixedRows").append("<tr><td>New</td></tr>"); } 
```

但同样，得到了相同的结果。在 Visual Studio 和 Chrome 的调试器中设置断点后，我可以看到 Ajax 从未被调用。相反，会调用控制器操作，并且部分视图会自行加载，而不是附加到`<table id="fixedRows">`.

但是，如果有人有任何想法，仍在努力解决这个问题。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T22:04:37.463

所以发生这种情况的原因很简单。由于正在使用 ActionLink，控制器操作将在 jQuery 之前触发。这导致部分视图消灭了整个`Edit`视图。通过将 jQuery 绑定到`$(document).ready`块内的超链接，jQuery 可以正常运行。下面是标签和更新的 jQuery

```
<a href="#" class="addFixed">Add Another</a> 
```

jQuery：

```
$(document).ready(function () {

    $(".addFixed").click(function () {
        //alert('test');
        event.preventDefault();        
        $.ajax({
            url: '@Url.Action("BlankFixedRow", "BankListMaster")',
            cache: false,
            success: function (html) { $("#fixedRows").append(html); }
        });
    });

    $("#addVariable").click(function () {
        event.preventDefault();
        $.ajax({
            url: '@Url.Action("BlankFixedRow", "BankListMaster")',
            cache: false,
            success: function (html) { $("#variableRows").append(html); }
        });
    });

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T18:44:34.833

您拥有的代码可能会发生这种情况的唯一方法是，如果它不是用那段简单的 HTML*替换*页面内容，而是*直接在浏览器选项卡中加载*该操作。默认情况下，您的操作链接将执行哪个操作。

1.  确保您的“添加另一个”链接的点击处理程序使用`event.preventDefault()`或仅返回 false；如果您不阻止链接的默认操作，您的 AJAX 代码将执行此操作，然后浏览器将正常加载链接，使其看起来好像不起作用。

2.  确保页面上没有 JavaScript 错误。如果 JS 停止工作，那么默认行为将再次接管，你会得到你看到的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T18:51:04.193

我认为您在`<table>`标签中对 div 的使用令人困惑`jQuery.append`。

请尝试以下操作：

```
<fieldset>
    <legend>Stat(s) Fixed</legend>
    <table id="fixedRows">
        <tr>
            <th>State Code</th>
            <th>Agent ID</th>
        </tr>
        @foreach(var item in Model.Fixed)
        {
            if (!String.IsNullOrWhiteSpace(item.AgentId))
            {
                @Html.Partial("FixedPartialView", item) 
            }      
        }
    </table>
    <br />
    @Html.ActionLink("Add another", "BlankFixedRow", null, new { id = "addFixed"})
</fieldset> 
```

另请注意，我使用`id="fixedRows"`了而不是`class="fixedRows"`因为这是您在 jQuery 中指定的内容。

比较：

*   破碎： http: [//jsfiddle.net/83EAT ​​/1/](http://jsfiddle.net/83EAT/1/)
*   工作：http: [//jsfiddle.net/hT34k/3/](http://jsfiddle.net/hT34k/3/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T12:33:52.377

我尽量避免对部分视图进行 AJAX 调用。AJAX 要求您记住最后一页的状态以便重新显示信息。话虽如此，您可以返回控制器并调用局部视图，然后让服务器调用与您的视图一起显示局部视图：

```
 @Html.Partial("FixedPartialView", new BankListAgentId(){/*Construct the View Model Here here. assign the properties to your view model */  AgentId = /*however your creating this*/}) 
```

我不认为 AJAX 是解决这个问题的方法。

# excel - Excel 函数帮助 - 将工作表中的 2 个单元格与另一个工作表中的 2 个单元格进行比较，如果它们匹配，则从不同的列返回值

> ID：15794788
> 
> 赞同：0
> 
> 时间：2013-04-03T18:09:22.153
> 
> 标签：excel, function, if-statement, vlookup, exact-match

我想知道是否有人能够就最好的方法提供一些建议：

**工作表 # 1 中的数据**

```
Col A  | Col B | Col C
Part-1 |     8 |     2
Part-2 |     7 |     7           
Part-7 |     9 |     4
Part-8 |     2 |     6 
```

**工作表 #2 中的数据**

```
Col A  | Col B | Col C
Part-1 |     8 | *Return value* (If Part-1 is found and 8 matches, return 2)         
Part-2 |     7 | *Return value*  
Part-3 |     8 | *Return value* 
```

In `Worksheet#2`in Cell `C2`- 我想检查`Part-1`in`A1`是否在 Col `A`in中找到`Worksheet#1`。如果是，那么我还想确保数字与同一零件#旁边的 Col 中的`B2`数量匹配，如果零件#和数量都匹配，那么我想复制相应单元格中的值在 Col in ，到 Col in 。如果不匹配，我希望它返回一个.`Worksheet#2``B``C``Worksheet#1``C``Worksheet#2``0`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T21:37:38.390

本质上，您所做的是基于两列中的值的查找。从这个角度来看，你可以使用[`SUMPRODUCT`](http://office.microsoft.com/en-us/excel-help/sumproduct-function-HA102752853.aspx?CTT=1)任何版本的 Excel 都支持的函数。`Sheet2`在单元格中输入以下内容`C2`：

```
=SUMPRODUCT((Sheet1!$A:$A=$A2)*(Sheet1!$B:$B=$B2)*Sheet1!$C:$C) 
```

`C2`选择并向下拖动完成列的右下角`C`。

这只适用于`Sheet1`, column中的值`C`是数字的事实。如果列中的值对`A`和`B`of`Sheet1`出现多次，它会中断，但您首先没有在问题中解决这种情况。

[`SUMIFS`](http://office.microsoft.com/en-us/excel-help/sumifs-function-HA010047504.aspx)对于 2007 及更高版本，您可以通过基本相同的方法使用更方便的功能：

```
=SUMIFS(Sheet1!$C:$C,Sheet1!$A:$A,$A1,Sheet1!$B:$B,$B1) 
```

* * *

或者，您可以使用[`IF`](http://office.microsoft.com/en-us/excel-help/if-function-HP010342586.aspx)和[`VLOOKUP`](http://office.microsoft.com/en-us/starter-help/vlookup-function-HP010343011.aspx?CTT=1)功能的组合。适用于 Excel 2007 或更高版本的公式如下：

```
=IFERROR(IF(VLOOKUP($A1,Sheet1!$A:$C,2,FALSE)=$B1,VLOOKUP($A1,Sheet1!$A:$C,3,FALSE),0),0) 
```

旧版本的 Excel 不支持`IFERROR`，但您仍然可以使用[此处](http://www.excelfunctions.net/Excel-Iferror.html)说明的类似方法。

我在[这里](http://temp-share.com/show/dPf3apFNW)`D`上传了一个示例工作簿，其中还包括另一种方法`Sheet2`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T02:30:49.387

这是 Reinier 的第二种方法的变体，其形式适用于任何版本的 Excel。您可以使用对特定数据范围的引用，就像我在这里所做的那样，或者对整个列进行引用。

```
 =SUM((A2=Sheet1!$A$2:$A$5)*(Sheet2!B2=Sheet1!$B$2:$B$5)*Sheet1!$C$2:$C$5) 
```

这是一个数组公式，所以需要用`Control`--组合输入`Shift`。`Enter`它执行与 SUMPRODUCT 相同的操作。（还有其他几种方法可以做到这一点，例如将 MATCH 与 INDEX 或 OFFSET 结合使用。）

# iphone - 如何检查我们在 iOS 中特定应用程序的 GPS 权限是打开还是关闭？

> ID：15794789
> 
> 赞同：3
> 
> 时间：2013-04-03T18:09:23.130
> 
> 标签：iphone, ios, objective-c, gps

使用 BOOL locaService=[CLLocationManager locationServicesEnabled];

它将返回一般 GPS 服务的布尔值，我们如何检查特定应用程序的服务是打开还是关闭。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-03T18:23:26.980

`[CLLocationManager authorizationStatus]`返回 a`CLAuthorizationStatus`类型定义为`kCLAuthorizationStatusNotDetermined, kCLAuthorizationStatusRestricted, kCLAuthorizationStatusDenied,`or `kCLAuthorizationStatusAuthorized`。

`kCLAuthorizationStatusAuthorized`意味着你可以使用 GPS，其他任何东西都意味着你不能。

（`kCLAuthorizationStatusDenied`表示他们已禁止您，`kCLAuthorizationStatusRestricted`表示您因家长控制而无法访问， `kCLAuthorizationStatusNotDetermined`表示用户尚未响应“允许此应用查看我的位置？”提示。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T18:18:19.750

检查CLLocationManager 中的[授权](https://developer.apple.com/library/mac/documentation/CoreLocation/Reference/CLLocationManager_Class/CLLocationManager/CLLocationManager.html#//apple_ref/doc/uid/TP40007125-CH3-SW11)状态。

> 授权状态
> 
> 返回应用程序使用位置服务的授权状态。+ (CLAuthorizationStatus)授权状态

# sql - 如何改进以下具有自联接的 SQL

> ID：15794791
> 
> 赞同：0
> 
> 时间：2013-04-03T18:09:25.647
> 
> 标签：sql, oracle, sqlperformance

进行选择后，我正在对数据进行自连接和不同的操作。我不确定是否有更好的方法来编写此查询。你能建议吗？

下面是查询和解释计划输出。

```
 WITH data
        AS (  SELECT san.S1FK_C_ID,
                     san.S1FK_CF_ID,
                     san.S1FK_A_ID,
                     san.S1FK_A_TYPE,
                     san.S1FK_S_TYPE,
                     san.S1FK_B_FUNC,
                     AU.AS1FK_A_ID,
                     AU.AS1FK_B_FUNC,
                     AU.AS1FK_S_TYPE,
                     AU.AS1FK_T_CODE,
                     A2FK_B_ID,
                     A2FK_NBR,
                     A2FK_C_CD,
                     A1FK_B_ID,
                     A1FK_NBR,
                     A1FK_C_CD,
                     AU.R_NAME,
                     IND
                FROM N_RULE cnr,
                     SAN san,
                     ACCT_USG AU
               WHERE     AU.R_NAME = CNR.R_NAME
                     AND AU.A2FK_C_CD = CNR.C_CD
                     AND AU.AS1FK_B_FUNC = CNR.B_FUNC
                     AND AU.AS1FK_A_ID = san.AS1FK_ID || ''
                     AND AU.AS1FK_B_FUNC = san.AS1FK_B_FUNC
                     AND AU.AS1FK_S_TYPE = san.AS1FK_S_TYPE
                     AND AU.AS1FK_T_CODE = san.AS1FK_A_TYPE
                     AND CNR.FM_CODE = 'SP'
                     AND san.STATUS = 'A'
                     AND san.AS1FK_B_FUNC = CNR.B_FUNC
            ORDER BY AU.AS1FK_A_ID)
   SELECT DISTINCT A.A2FK_C_CD AS C_CD,
                   -- secondary id's
                   B.S1FK_C_ID AS C_ID_2,
                   B.S1FK_CF_ID AS CF_ID_2,
                   B.S1FK_A_ID AS A_ID_2,
                   B.S1FK_B_FUNC AS B_FUNC_2,
                   B.S1FK_S_TYPE AS S_TYPE_2,
                   B.S1FK_A_TYPE AS A_TYPE_2,
                   --primary id's
                   A.S1FK_A_ID AS A_ID_1,
                   A.S1FK_B_FUNC AS B_FUNC_1,
                   A.S1FK_S_TYPE AS S_TYPE_1,
                   A.S1FK_A_TYPE AS A_TYPE_1
     FROM data A,            --A is the set of primary and standalone id's
                 data B
    --B is the primary and secondary id's
    WHERE                  
         B    .R_NAME = A.R_NAME
          --as join
          AND B.AS1FK_B_FUNC = A.AS1FK_B_FUNC
          AND B.AS1FK_S_TYPE = A.AS1FK_S_TYPE
          AND B.AS1FK_T_CODE = A.AS1FK_T_CODE
          --accts join
          AND B.A2FK_NBR = A.A2FK_NBR
          AND B.A2FK_B_ID = A.A2FK_B_ID
          AND B.A2FK_C_CD = A.A2FK_C_CD
          AND B.A1FK_NBR = A.A1FK_NBR
          AND B.A1FK_B_ID = A.A1FK_B_ID
          AND B.A1FK_C_CD = A.A1FK_C_CD
          --s fk join
          AND B.S1FK_C_ID = A.S1FK_C_ID
          AND B.S1FK_CF_ID = A.S1FK_CF_ID
          AND B.S1FK_S_TYPE = A.S1FK_S_TYPE
          AND B.S1FK_B_FUNC = A.S1FK_B_FUNC
          AND B.S1FK_A_TYPE = A.S1FK_A_TYPE
          AND (      --join secondary ( N )  and primary id's ( Y ) to primary id's
               ( 'Y'     = A.IND
                  AND B.IND IN ('N', 'Y') )
               OR                     --join standalone ( ' ' ) id's to themselves
                  ( ' '   = B.IND
                  AND ' ' = A.IND )
                  AND B.AS1FK_A_ID = A.AS1FK_A_ID
                  ); 
```

计划：

```
PLAN_TABLE_OUTPUT
Plan hash value: 3120521488

----------------------------------------------------------------------------------------------------------------
| Id  | Operation                        | Name                        | Rows  | Bytes | Cost (%CPU)| Time     |
----------------------------------------------------------------------------------------------------------------
|   0 | SELECT STATEMENT                 |                             |     1 |   450 |    18  (17)| 00:00:01 |
|   1 |  TEMP TABLE TRANSFORMATION       |                             |       |       |            |          |
|   2 |   LOAD AS SELECT                 | SYS_TEMP_0FD9D949F_E879D9BC |       |       |            |          |
|   3 |    SORT ORDER BY                 |                             |     1 |   296 |    12   (9)| 00:00:01 |
|   4 |     NESTED LOOPS                 |                             |     1 |   296 |    11   (0)| 00:00:01 |
|   5 |      NESTED LOOPS                |                             |  7412 |  1889K|    11   (0)| 00:00:01 |
|*  6 |       TABLE ACCESS FULL          | SAN                         |   255 | 20910 |    11   (0)| 00:00:01 |
|   7 |       TABLE ACCESS BY INDEX ROWID| ACCT_USG                    |    29 |  5191 |     0   (0)| 00:00:01 |
|*  8 |        INDEX RANGE SCAN          | ACCT_USG_PK                 |     1 |       |     0   (0)| 00:00:01 |
|*  9 |      INDEX UNIQUE SCAN           | N_RULE_PK                   |     1 |    35 |     0   (0)| 00:00:01 |
|  10 |   HASH UNIQUE                    |                             |     1 |   450 |     6  (34)| 00:00:01 |
|* 11 |    HASH JOIN                     |                             |     1 |   450 |     5  (20)| 00:00:01 |
|  12 |     VIEW                         |                             |     1 |   225 |     2   (0)| 00:00:01 |
|  13 |      TABLE ACCESS FULL           | SYS_TEMP_0FD9D949F_E879D9BC |     1 |   225 |     2   (0)| 00:00:01 |
|  14 |     VIEW                         |                             |     1 |   225 |     2   (0)| 00:00:01 |
|  15 |      TABLE ACCESS FULL           | SYS_TEMP_0FD9D949F_E879D9BC |     1 |   225 |     2   (0)| 00:00:01 |
----------------------------------------------------------------------------------------------------------------

Predicate Information (identified by operation id):
---------------------------------------------------

   6 - filter("SAN"."EFF_STATUS_CODE"='A')
   8 - access("AU"."AS1FK_A_ID"="SAN"."AS1FK_ID"||'' AND 
              "AU"."AS1FK_T_CODE"="SAN"."AS1FK_A_TYPE" AND 
              "AU"."AS1FK_S_TYPE"="SAN"."AS1FK_S_TYPE" AND 
              "AU"."AS1FK_B_FUNC"="SAN"."AS1FK_B_FUNC")
   9 - access("CNR"."FM_CODE"='SP' AND "SAN"."S1FK_C_ID"="CNR"."CLRG_ORG_ID" AND 
              "SAN"."AS1FK_B_FUNC"="CNR"."B_F_CODE" AND "AU"."A2FK_C_CD"="CNR"."C_CD" AND 
              "AU"."R_NAME"="CNR"."R_NAME")
       filter("AU"."AS1FK_B_FUNC"="CNR"."B_F_CODE")
  11 - access("B"."R_NAME"="A"."R_NAME" AND "B"."AS1FK_B_FUNC"="A"."AS1FK_B_FUNC" AND 
              "B"."AS1FK_S_TYPE"="A"."AS1FK_S_TYPE" AND "B"."AS1FK_T_CODE"="A"."AS1FK_T_CODE" 
              AND "B"."A2FK_NBR"="A"."A2FK_NBR" AND "B"."A2FK_B_ID"="A"."A2FK_B_ID" AND 
              "B"."A2FK_C_CD"="A"."A2FK_C_CD" AND "B"."A1FK_NBR"="A"."A1FK_NBR" AND 
              "B"."A1FK_B_ID"="A"."A1FK_B_ID" AND "B"."A1FK_C_CD"="A"."A1FK_C_CD" AND 
              "B"."S1FK_C_ID"="A"."S1FK_C_ID" AND "B"."S1FK_CF_ID"="A"."S1FK_CF_ID" AND 
              "B"."S1FK_S_TYPE"="A"."S1FK_S_TYPE" AND "B"."S1FK_B_FUNC"="A"."S1FK_B_FUNC" AND 
              "B"."STACO1FK_A_TYPE"="A"."STACO1FK_A_TYPE")
       filter("A"."IND"='Y' AND ("B"."IND"='N' OR 
              "B"."IND"="A"."IND") OR "B"."IND"=' ' AND 
              "A"."IND"=' ' AND "B"."AS1FK_A_ID"="A"."AS1FK_A_ID" AND 
              "B"."IND"="A"."IND")

EDIT
~~~~ 
```

1.  我编辑了上面的 SQL 以删除自连接和不必要的分组。
2.  我只基于连接对 primary_secondary 行进行分组。
3.  在主要和次要之间，我正在决定应该插入次要的主要帐户。

这给出了相同的结果。我想知道这是否可以进一步改进。

```
WITH data
       AS (  SELECT sanw.STAC01FK_C_ID,
                    sanw.STAC01FK_CF_ID,
                    sanw.STAC01FK_A_ID,
                    sanw.STACO1FK_A_TYPE,
                    sanw.STAC01FK_S_TYPE,
                    sanw.STAC01FK_B_FUNC,
                    BAU.ASAC01FK_A_ID,
                    BAU.ASAC01FK_B_FUNC,
                    BAU.ASAC01FK_S_TYPE,
                    BAU.ASAC01FK_TYPE_CODE,
                    BAAC02FK_BANK_ID,
                    BAAC02FK_NBR,
                    BAAC02FK_CURR_CD,
                    BAAC01FK_BANK_ID,
                    BAAC01FK_NBR,
                    BAAC01FK_CURR_CD,
                    BAU.R_NAME,
                    PRIMARY_ACCT_IND
               FROM N_RULE cnr,
                    SAN sanw,
                    ACCT_USG bau
              WHERE     BAU.R_NAME = CNR.R_NAME
                    AND BAU.BAAC02FK_CURR_CD = CNR.C_CD
                    AND BAU.ASAC01FK_B_FUNC = CNR.B_FUNC_CD
                    AND BAU.ASAC01FK_A_ID = sanw.ASAC01FK_ID
                    AND BAU.ASAC01FK_B_FUNC = sanw.ASAC01FK_B_FUNC
                    AND BAU.ASAC01FK_S_TYPE = sanw.ASAC01FK_S_TYPE
                    AND BAU.ASAC01FK_TYPE_CODE = sanw.ASAC01FK_A_TYPE
                    AND CNR.FM_CODE = 'SP'
                    AND sanw.EFF_STATUS_CODE = 'A'
                    AND sanw.ASAC01FK_B_FUNC = CNR.B_FUNC_CD),
       primary_secondary
       AS (SELECT PRIMARY_ACCT_IND,
                  B.BAAC02FK_CURR_CD AS C_CD,
                  B.STAC01FK_C_ID AS C_ID_2,
                  B.STAC01FK_CF_ID AS CF_ID_2,
                  -- secondary accounts
                  B.STAC01FK_A_ID AS A_ID_2,
                  B.STAC01FK_B_FUNC AS B_FUNC_2,
                  B.STAC01FK_S_TYPE AS S_TYPE_2,
                  B.STACO1FK_A_TYPE AS A_TYPE_2,
                  --primary accounts
                  B.STAC01FK_A_ID AS A_ID_1,
                  B.STAC01FK_B_FUNC AS B_FUNC_1,
                  B.STAC01FK_S_TYPE AS S_TYPE_1,
                  B.STACO1FK_A_TYPE AS A_TYPE_1,
                  RANK ()
                  OVER (
                     PARTITION BY 
                                  --bank acct join
                                  B.BAAC02FK_CURR_CD,
                                  --sa join
                                  B.STAC01FK_S_TYPE,
                                  B.STAC01FK_B_FUNC,
                                  B.STACO1FK_A_TYPE,
                                  B.STAC01FK_C_ID,
                                  B.STAC01FK_CF_ID
                     ORDER BY
                                  PRIMARY_ACCT_IND DESC)
                     AS d_rank
             FROM data B
            WHERE B.PRIMARY_ACCT_IND IN ('Y', 'N')),
       stand_alone
       AS (SELECT          B.BAAC02FK_CURR_CD AS C_CD,
                           B.STAC01FK_C_ID AS C_ID_2,
                           B.STAC01FK_CF_ID AS CF_ID_2,
                           -- secondary accounts
                           B.STAC01FK_A_ID AS A_ID_2,
                           B.STAC01FK_B_FUNC AS B_FUNC_2,
                           B.STAC01FK_S_TYPE AS S_TYPE_2,
                           B.STACO1FK_A_TYPE AS A_TYPE_2,
                           --primary accounts
                           B.STAC01FK_A_ID AS A_ID_1,
                           B.STAC01FK_B_FUNC AS B_FUNC_1,
                           B.STAC01FK_S_TYPE AS S_TYPE_1,
                           B.STACO1FK_A_TYPE AS A_TYPE_1
             FROM data B
            WHERE B.PRIMARY_ACCT_IND = ' '),
       PRIMARY
       AS (SELECT C_CD,
                  C_ID_2,
                  CF_ID_2,
                  -- secondary accounts
                  A_ID_2,
                  B_FUNC_2,
                  S_TYPE_2,
                  A_TYPE_2,
                  --primary accounts
                  A_ID_1,
                  B_FUNC_1,
                  S_TYPE_1,
                  A_TYPE_1
             FROM primary_secondary
            WHERE D_RANK = 1),
       SECONDARY
       AS (SELECT ps.C_CD,
                  ps.C_ID_2,
                  ps.CF_ID_2,
                  -- secondary accounts
                  ps.A_ID_2,
                  ps.B_FUNC_2,
                  ps.S_TYPE_2,
                  ps.A_TYPE_2,
                  --primary accounts
                  p.A_ID_1,
                  p.B_FUNC_1,
                  p.S_TYPE_1,
                  p.A_TYPE_1
             FROM primary_secondary ps, primary p
            WHERE     ps.D_RANK <> 1
                  AND ps.C_CD = p.C_CD
                  AND ps.C_ID_2 = p.C_ID_2
                  AND ps.CF_ID_2 = p.CF_ID_2
                  --  secondarary accounts
                  AND ps.B_FUNC_2 = p.B_FUNC_2
                  AND ps.S_TYPE_2 = p.S_TYPE_2
                  AND ps.A_TYPE_2 = p.A_TYPE_2)
  SELECT * FROM secondary
  UNION ALL
  SELECT * FROM primary
  UNION ALL
  SELECT * FROM stand_alone 
```

计划：

```
Plan hash value: 3159296610

----------------------------------------------------------------------------------------------------------
| Id  | Operation                  | Name                        | Rows  | Bytes | Cost (%CPU)| Time     |
----------------------------------------------------------------------------------------------------------
|   0 | SELECT STATEMENT           |                             |    33 |  3421 |     9  (56)| 00:00:01 |
|   1 |  TEMP TABLE TRANSFORMATION |                             |       |       |            |          |
|   2 |   LOAD AS SELECT           | SYS_TEMP_0FD9DBAF1_9261CF31 |       |       |            |          |
|*  3 |    HASH JOIN               |                             |    11 |  3058 |   119   (1)| 00:00:02 |
|*  4 |     HASH JOIN              |                             |    96 | 18816 |   104   (1)| 00:00:02 |
|*  5 |      INDEX RANGE SCAN      | CNR_PK                  |    61 |  1769 |     1   (0)| 00:00:01 |
|   6 |      TABLE ACCESS FULL     | ACCT_USG                |  8244 |  1344K|   102   (0)| 00:00:02 |
|*  7 |     TABLE ACCESS FULL      | SAN                     |  1444 |   115K|    15   (0)| 00:00:01 |
|   8 |   LOAD AS SELECT           | SYS_TEMP_0FD9DBAF2_9261CF31 |       |       |            |          |
|   9 |    WINDOW SORT             |                             |    11 |   594 |     3  (34)| 00:00:01 |
|* 10 |     VIEW                   |                             |    11 |   594 |     2   (0)| 00:00:01 |
|  11 |      TABLE ACCESS FULL     | SYS_TEMP_0FD9DBAF1_9261CF31 |    11 |  2343 |     2   (0)| 00:00:01 |
|  12 |   LOAD AS SELECT           | SYS_TEMP_0FD9DBAF3_9261CF31 |       |       |            |          |
|* 13 |    VIEW                    |                             |    11 |  1089 |     2   (0)| 00:00:01 |
|  14 |     TABLE ACCESS FULL      | SYS_TEMP_0FD9DBAF2_9261CF31 |    11 |   682 |     2   (0)| 00:00:01 |
|  15 |   UNION-ALL                |                             |       |       |            |          |
|* 16 |    HASH JOIN               |                             |    11 |  1672 |     5  (20)| 00:00:01 |
|* 17 |     VIEW                   |                             |    11 |   792 |     2   (0)| 00:00:01 |
|  18 |      TABLE ACCESS FULL     | SYS_TEMP_0FD9DBAF2_9261CF31 |    11 |   682 |     2   (0)| 00:00:01 |
|  19 |     VIEW                   |                             |    11 |   880 |     2   (0)| 00:00:01 |
|  20 |      TABLE ACCESS FULL     | SYS_TEMP_0FD9DBAF3_9261CF31 |    11 |   946 |     2   (0)| 00:00:01 |
|  21 |    VIEW                    |                             |    11 |  1067 |     2   (0)| 00:00:01 |
|  22 |     TABLE ACCESS FULL      | SYS_TEMP_0FD9DBAF3_9261CF31 |    11 |   946 |     2   (0)| 00:00:01 |
|* 23 |    VIEW                    |                             |    11 |   682 |     2   (0)| 00:00:01 |
|  24 |     TABLE ACCESS FULL      | SYS_TEMP_0FD9DBAF1_9261CF31 |    11 |  2343 |     2   (0)| 00:00:01 |
----------------------------------------------------------------------------------------------------------

Predicate Information (identified by operation id):
---------------------------------------------------

   3 - access("BAU"."ASAC01FK_A_ID"="SANW"."ASAC01FK_ID"||'' AND 
              "BAU"."ASAC01FK_B_FUNC"="SANW"."ASAC01FK_B_FUNC" AND 
              "BAU"."ASAC01FK_S_TYPE"="SANW"."ASAC01FK_S_TYPE" AND 
              "BAU"."ASAC01FK_TYPE_CODE"="SANW"."ASAC01FK_A_TYPE" AND 
              "SANW"."ASAC01FK_B_FUNC"="CNR"."B_FUNC_CD")
   4 - access("BAU"."R_NAME"="CNR"."R_NAME" AND 
              "BAU"."BAAC02FK_CURR_CD"="CNR"."C_CD" AND 
              "BAU"."ASAC01FK_B_FUNC"="CNR"."B_FUNC_CD")
   5 - access("CNR"."FM_CODE"='SP')
   7 - filter("SANW"."EFF_STATUS_CODE"='A')
  10 - filter("B"."PRIMARY_ACCT_IND"='N' OR "B"."PRIMARY_ACCT_IND"='Y')
  13 - filter("D_RANK"=1)
  16 - access("PS"."C_CD"="P"."C_CD" AND "PS"."C_ID_2"="P"."C_ID_2" AND 
              "PS"."CF_ID_2"="P"."CF_ID_2" AND "PS"."B_FUNC_2"="P"."B_FUNC_2" AND 
              "PS"."S_TYPE_2"="P"."S_TYPE_2" AND "PS"."A_TYPE_2"="P"."A_TYPE_2")
  17 - filter("PS"."D_RANK"<>1)
  23 - filter("B"."PRIMARY_ACCT_IND"=' ') 
```

# java - 取消并完成定期任务时的回调

> ID：15794792
> 
> 赞同：5
> 
> 时间：2013-04-03T18:09:30.560
> 
> 标签：java

我有两个任务：第一个任务 ( `work`) 正在重复发生，第二个任务 ( `cleanup`) 正在释放一些资源。该`cleanup`任务应在重复任务完成后恰好运行一次，`work`并且不会再次运行。

我的第一直觉是这样的：

```
ScheduledExecutorService service = ...;
ScheduledFuture<?> future = service.scheduleAtFixedRate(work, ...);

// other stuff happens

future.cancel(false);
cleanup.run(); 
```

这里的问题是`cancel()`立即返回。所以如果`work`碰巧正在运行，那么`cleanup`就会重叠它。

理想情况下，我会使用 Guava's 之类的东西`Futures.addCallback(ListenableFuture future, FutureCallback callback)`。（番石榴 15 可能有类似的[东西](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/util/concurrent/ListenableScheduledFuture.html)）。

`future`同时，当被取消*并且* `work`不再运行时如何触发回调？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T18:30:34.857

这是我想出的解决方案。这似乎很简单，但我仍然认为那里有更常见和/或优雅的解决方案。我真的很想在像番石榴这样的图书馆里看到一个……

首先，我创建一个包装器来对我的 Runnables 施加互斥：

```
private static final class SynchronizedRunnable implements Runnable {
    private final Object monitor;
    private final Runnable delegate;

    private SynchronizedRunnable(Object monitor, Runnable delegate) {
        this.monitor = monitor;
        this.delegate = delegate;
    }

    @Override
    public void run() {
        synchronized (monitor) {
            delegate.run();
        }
    }
} 
```

然后我创建一个包装器来触发我的回调成功调用`cancel`：

```
private static final class FutureWithCancelCallback<V> extends ForwardingFuture.SimpleForwardingFuture<V> {

    private final Runnable callback;

    private FutureWithCancelCallback(Future<V> delegate, Runnable callback) {
        super(delegate);
        this.callback = callback;
    }

    @Override
    public boolean cancel(boolean mayInterruptIfRunning) {
            boolean cancelled = super.cancel(mayInterruptIfRunning);
            if (cancelled) {
                callback.run();
            }
            return cancelled;
    }
} 
```

然后我用我自己的方法把它全部卷起来：

```
private Future<?> scheduleWithFixedDelayAndCallback(ScheduledExecutorService service, Runnable work, long initialDelay, long delay, TimeUnit unit, Runnable cleanup) {

    Object monitor = new Object();

    Runnable monitoredWork = new SynchronizedRunnable(monitor, work);

    Runnable monitoredCleanup = new SynchronizedRunnable(monitor, cleanup);

    Future<?> rawFuture = service.scheduleAtFixedRate(monitoredWork, initialDelay, delay, unit);

    Future<?> wrappedFuture = new FutureWithCancelCallback(rawFuture, monitoredCleanup);

    return wrappedFuture;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T09:40:55.403

那我再试一次。您可以增强命令，也可以包装已执行的`Runnable`/ `Callable`。看这个：

```
public static class RunnableWrapper implements Runnable {

    private final Runnable original;
    private final Lock lock = new ReentrantLock();

    public RunnableWrapper(Runnable original) {
        this.original = original;
    }

    public void run() {
        lock.lock();
        try {
            this.original.run();
        } finally {
            lock.unlock();
        }
    }

    public void awaitTermination() {
        lock.lock();
        try {
        } finally {
            lock.unlock();
        }
    }

} 
```

因此，您可以将代码更改为

```
ScheduledExecutorService service = ...;
RunnableWrapper wrapper = new RunnableWrapper(work);
ScheduledFuture<?> future = service.scheduleAtFixedRate(wrapper, ...);

// other stuff happens

future.cancel(false);
wrapper.awaitTermination();
cleanup.run(); 
```

调用后`cancel`，要么`work`不再运行并`awaitTermination()`立即返回，要么正在运行并`awaitTermination()`阻塞直到完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T20:49:18.260

你为什么不做

```
// other stuff happens

future.cancel(false);
service.shutdown();
service.awaitTermination(1, TimeUnit.DAYS);
cleanup.run(); 
```

这将告诉您的执行程序服务关闭，从而允许您等待可能的运行`work`完成。

# javascript - 在我添加 google maps API、javascript 和编辑我的布局后，heroku 停止工作

> ID：15794794
> 
> 赞同：0
> 
> 时间：2013-04-03T18:09:36.717
> 
> 标签：javascript, ruby-on-rails, google-maps, twitter-bootstrap, heroku

我的应用程序在我的本地机器上运行，但在 Heroku 上运行，但是在我添加**Google Maps**并使用我的**Twitter Bootstrap**布局后推送它之后，它停止在 Heroku 上运行。

我在 Heroku 日志中收到此错误：

```
ActionView::Template::Error ('twitter/bootstrap/bootstrap.less' wasn't found. 
```

我对 RoR 还很陌生，不确定我的 Google 地图脚本是否适用于我的 application.html.erb 和 show.html.erb

## 应用程序.html.erb

```
<!DOCTYPE html>
<html>
<head>
  <title><%= full_title(yield(:title)) %></title>
  <!--[if lt IE 9]>
<script src="http://html5shim.googlecode.com/svn/trunk/html5.js" type="text/javascript"></script>
<![endif]-->
  <%= stylesheet_link_tag "application", :media => "all" %>
  <%= javascript_include_tag "application" %>
  <script src="http://maps.googleapis.com/maps/api/js?key=[I PUT MY API KEY HERE]&sensor=false"> </script>
  <%= csrf_meta_tags %>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
.
.
. 
```

## 显示.html.erb

```
<script>
var myCenter=new google.maps.LatLng(<%= @hikingtrail.latitude %>, <%= @hikingtrail.longitude %>);

function initialize()
{
var mapProp = {
  center:myCenter,
  zoom:10,
  mapTypeId:google.maps.MapTypeId.ROADMAP
  };

var map=new google.maps.Map(document.getElementById("googleMap"),mapProp);

var marker=new google.maps.Marker({
  position:myCenter,
  });

marker.setMap(map);
}

google.maps.event.addDomListener(window, 'load', initialize);
</script>

<% provide(:title, @hikingtrail.name) %>
<!-- <p id="notice"><%= notice %></p> -->
.
.
. 

    <div class="tab-pane fade in active" id="map">
      <a target="_blank" href='https://maps.google.ie/maps?q=<%= @hikingtrail.address %>'> Open in GoogleMaps </a>
      <br />
      <div id="googleMap" style="width:100%;height:300px;"></div>
    </div>
.
.
. 
```

## Heroku 日志

```
2013-04-03T17:54:36+00:00 app[web.1]: => Rails 3.2.12 application starting in production on http://0.0.0.0:51640
2013-04-03T17:54:36+00:00 app[web.1]: => Ctrl-C to shutdown server
2013-04-03T17:54:36+00:00 app[web.1]: => Booting WEBrick
2013-04-03T17:54:36+00:00 app[web.1]: => Call with -d to detach
2013-04-03T17:54:36+00:00 app[web.1]: Started GET "/" for 193.1.209.100 at 2013-04-03 17:54:36 +0000
2013-04-03T17:54:36+00:00 app[web.1]: Processing by HikingtrailsController#index as HTML
2013-04-03T17:54:37+00:00 app[web.1]:   Rendered hikingtrails/index.html.erb within layouts/application (80.3ms)
2013-04-03T17:54:37+00:00 app[web.1]: WARN: tilt autoloading 'less' in a non thread-safe way; explicit require 'less' suggested.
2013-04-03T17:54:38+00:00 app[web.1]: Completed 500 Internal Server Error in 2094ms
2013-04-03T17:54:38+00:00 app[web.1]: 
2013-04-03T17:54:38+00:00 app[web.1]: ActionView::Template::Error ('twitter/bootstrap/bootstrap.less' wasn't found.
2013-04-03T17:54:38+00:00 app[web.1]: 
2013-04-03T17:54:38+00:00 app[web.1]:   (in /app/app/assets/stylesheets/bootstrap_and_overrides.css.less)):
2013-04-03T17:54:38+00:00 app[web.1]:     5:   <!--[if lt IE 9]>
2013-04-03T17:54:38+00:00 app[web.1]:     7: <![endif]-->
2013-04-03T17:54:38+00:00 app[web.1]:     8:   <%= stylesheet_link_tag "application", :media => "all" %>
2013-04-03T17:54:38+00:00 app[web.1]:     6: <script src="http://html5shim.googlecode.com/svn/trunk/html5.js" type="text/javascript"></script>
2013-04-03T17:54:38+00:00 app[web.1]:   app/controllers/hikingtrails_controller.rb:11:in `index'
2013-04-03T17:54:38+00:00 app[web.1]: 
2013-04-03T17:54:38+00:00 app[web.1]:   app/views/layouts/application.html.erb:8:in `_app_views_layouts_application_html_erb__2890293300082615835_33779640'
2013-04-03T17:54:38+00:00 app[web.1]:     9:   <%= javascript_include_tag "application" %>
2013-04-03T17:54:38+00:00 app[web.1]:     10:   <script src="http://maps.googleapis.com/maps/api/js?key=AIzaSyDDXT3NtHX42AZZapNvA6-Dj3xls_YhfT0&sensor=false"> </script>
2013-04-03T17:54:38+00:00 app[web.1]:     11:   <%= csrf_meta_tags %>
2013-04-03T17:54:38+00:00 app[web.1]: 
```

# ios - 以编程方式关闭标记的信息窗口谷歌地图 iOS

> ID：15794797
> 
> 赞同：15
> 
> 时间：2013-04-03T18:09:43.700
> 
> 标签：ios, objective-c, marker, infowindow, google-maps-sdk-ios

我知道在 Java 版本的 Google Maps 中这很容易，但我不知道如何在 SDK 的目标 C 版本中关闭信息窗口。

我正在使用这种方法：

```
-(void) mapView:(GMSMapView *)mapView
    didTapInfoWindowOfMarker:(id<GMSMarker>)marker {

    sharedGlobal.shouldShowPlayer = YES;

    /* adds the path to the map by decoding google's encoded string */
    [self addPath: sharedGlobal.encodedPathString];
} 
```

并想添加一行来关闭与标记关联的信息窗口。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-04-04T01:03:18.617

我认为你可以使用这个：

```
mapView.selectedMarker = nil; 
```

`selectedMarker`GMSMapView.h中对属性的评论是这样说的：

```
/**
 * The marker that is selected.  Setting this property selects a particular
 * marker, showing an info window on it.  If this property is non-nil, setting
 * it to nil deselects the marker, hiding the info window.  This property is
 * observable using KVO.
 */
@property (nonatomic, strong) id<GMSMarker> selectedMarker; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-31T14:51:37.417

**迅速**

```
mapView.selectedMarker?.title = nil 
```

# ios - 通过 iOS 应用在 Tumblr 上分享链接

> ID：15794798
> 
> 赞同：2
> 
> 时间：2013-04-03T18:09:49.877
> 
> 标签：ios, objective-c, tumblr

我一直在谷歌搜索以找到一种在 tumbler 中共享链接的方法...我刚刚发现 sharekit 可以执行此操作，但我真的不喜欢它...您认为我还有哪些其他选择？

我不敢相信没有图书馆可以以相对简单的方式实现这一目标......

任何的想法？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T20:34:46.080

刚发现这个！

[TMTumblrSDK](https://github.com/tumblr/TMTumblrSDK)

它工作正常！要发布文字帖子，您只需：

```
NSDictionary *parameters = [[NSDictionary alloc] initWithObjectsAndKeys:
                                    @"Titulo",@"title",
                                    @"Este es el body",@"body",nil];

[[TMAPIClient sharedInstance] post:@"blogName" type:@"text" parameters:parameters callback:^(id var, NSError *error){
     NSLog(@"Error %@",error);        
}]; 
```

我希望它可以帮助某人！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T18:41:54.463

如果您不介意他们离开应用程序，您可以创建以下格式的 URL：

```
NSURL *url = [NSURL URLWithString:@"http://tumblr.com/share?s=&v=3&t=[Title]&u=[URL]"];
[[UIApplication sharedApplication] openURL:url]; 
```

这将在 Safari 中打开一个 tumblr 窗口，其中预先填充了 [Title] 和 [URL] 字段。或者，

```
NSURL *url = [NSURL URLWithString:@"tumblr://text?title=[Title]&link?url=[URL]"];
[[UIApplication sharedApplication] openURL:url]; 
```

如果用户安装了 tumblr iOS 应用程序，它会做同样的事情。如果您想留在应用程序中，您可以制作包含选项 #1 的 WebView。

# c++ - Visual Studio 2012 中的 IntelliSence：没有可用于类模板中的内部类的成员？

> ID：15794802
> 
> 赞同：1
> 
> 时间：2013-04-03T18:10:10.570
> 
> 标签：c++, visual-studio-2012, intellisense, inner-classes

我想知道为什么在 Visual Studio 2012 Desktop 中键入：

```
 struct a
    {
        struct b
        {
            int foo;
        };

    b bar;
    bar.
    }; 
```

IntelliSense 调用：“没有可用的成员”。IE。当我输入“bar”时。在结构 a 中。我的问题是 - 这是 Visual Studio 2012 的错误，还是我的愚蠢？对我来说，这很烦人，我祈祷能解决这个问题。

编辑：虽然我在写这样的代码时表现得很愚蠢，但即使在函数中我仍然有这个问题。但我想出了一个大要求——它必须是类模板。所以真正的代码是：

```
 template<typename def>
    class lista
    {
    private:
     struct wezel
     {
             int poprz;
     };
     wezel* current;
    public:
     void do_tylu()
     {
         current->
     }
    }; 
```

然后 IntelliSense 开始粉碎......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T18:12:57.957

在示例中，您在方法（或字段初始值设定项）之外键入表达式。这在 C++ 中是不允许的，因此 IntelliSense 算法没有可提供的有用信息。

请尝试以下操作：

```
struct a
{
    struct b
    {
        int foo;
    };

    b bar;

    void SomeMethod()
    {
        bar.
    }
}; 
```

# facebook - 添加的页面选项卡未显示在页面上

> ID：15794805
> 
> 赞同：0
> 
> 时间：2013-04-03T18:10:12.423
> 
> 标签：facebook, tabs, facebook-apps, facebook-page

我已经完成了在应用程序设置中创建页面选项卡的所有步骤，例如...

[http://www.dbswebsite.com/blog/2012/10/17/how-to-creating-a-custom-facebook-tab/](http://www.dbswebsite.com/blog/2012/10/17/how-to-creating-a-custom-facebook-tab/)

我有 http 和 https 的 URL，并输入了这个 URL 来添加页面选项卡...

[https://www.facebook.com/dialog/pagetab?app_id=YOUR_APP_ID&next=YOUR_URL](https://www.facebook.com/dialog/pagetab?app_id=YOUR_APP_ID&next=YOUR_URL)

包括我的应用 ID 和网站 URL。但是该选项卡没有出现在我们的 Facebook 页面上。我单击了向下箭头以显示 Facebook 页面上的所有选项卡，但没有任何内容。我们只有照片和点赞。每个空白选项卡的 [+] 按钮只显示一个重复和重复的进度条。似乎没有什么可以让这个标签显示出来。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-02T07:04:51.660

请检查您的应用是否处于沙盒模式。您可以在应用程序设置中更改它 - [https://developers.facebook.com/apps/APPID/summary](https://developers.facebook.com/apps/APPID/summary) - 在沙盒模式下选择禁用按钮。（默认情况下启用沙盒模式）

# ruby-on-rails-3 - 第二个 Rails 应用程序的虚拟主机配置

> ID：15794807
> 
> 赞同：0
> 
> 时间：2013-04-03T18:10:14.803
> 
> 标签：ruby-on-rails-3, capistrano, passenger

我有一个 Ubuntu/Apache VPS，我有一个运行良好的 Rails 应用程序。现在我想添加第二个 Rails 应用程序并更改虚拟主机，以便访问子文件夹将显示第二个 Rails 应用程序。

Rails 应用程序与 Capistrano 一起部署以：

```
/home/<myname>/apps/<app_1>/current
/home/<myname>/apps/<app_2>/current 
```

“/etc/apache2/sites-available/default”文件如下所示：

```
<VirtualHost *:80>
        ServerAdmin webmaster@localhost

        DocumentRoot /var/www
        <Directory />
                Options FollowSymLinks
                AllowOverride None
        </Directory>
        <Directory /var/www/>
                Options Indexes FollowSymLinks MultiViews
                AllowOverride All
                Order allow,deny
                allow from all
        </Directory>

        RailsBaseURI /app_1
        <Directory /var/www/app_1>
          Options -MultiViews
        </Directory>

        RailsBaseURI /app_2
        <Directory /var/www/app_2>
          Options -MultiViews
        </Directory>
</VirtualHost> 
```

我希望对第二个应用程序重复相同的操作会起作用，但事实并非如此。我忘记了公共文件夹的内容是如何在 /var/www/app_1 中结束的？

当我现在访问“www.mysite.com/app_2”时，它说：

> 没有这样的文件或目录 - config/environment.rb

但是访问“www.mysite.com/app_1”确实有效。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T19:48:10.267

Apache 仅使用 1 个文件夹作为它的文档根目录，因此如果您只指定 2 个应用程序但不告诉 apache 在哪里获取第二个应用程序，它将使用主文档根目录来查找文档，因此在这种情况下它将 app_2 路由到第一个应用程序。

尝试一起添加第二个虚拟主机，就像您有 2 个不同的域将每个域指向正确的文件夹/URL 时一样，请查看此链接。

[http://httpd.apache.org/docs/2.2/vhosts/examples.html](http://httpd.apache.org/docs/2.2/vhosts/examples.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T16:09:02.937

确保您有一个来自 /var/www/app_2 的符号链接指向 /home/yourname/apps/app_2/current 中的应用程序

sudo ln -s /var/www/app_2 /home/yourname/apps/app_2/current

# jsf - primefaces blockui 不隐藏

> ID：15794809
> 
> 赞同：3
> 
> 时间：2013-04-03T18:10:17.093
> 
> 标签：jsf, primefaces

我有一个显示用户输入的对话框。这个对话框有一些验证，当验证失败时，blockui 会消失。

这在我的笔记本电脑上运行良好，上面有所有东西。但是当我将war文件部署到远程服务器上并对其进行测试时，我的blockui在验证错误后不会“解锁”。我收到咆哮消息，说明哪个字段错误并且咆哮消失了，但 blockui 一直阻止我的对话。不允许用户更正输入。

```
 <p:commandButton id="bttAddUser" value="Submit" update=":contentView:lstUsers :growl"  oncomplete="handleSubmitRequest(xhr, status, args, 'newUserDialog','newUserForm');" actionListener="#{userController.create}">
                    <p:blockUI id="addBlockUI" trigger="bttAddUser" block="newUserGrid"></p:blockUI>
                </p:commandButton> 
```

两个系统，我的笔记本电脑和远程服务器都有 glassfish 3.1.2.2。我试图弄清楚是否有办法做到这一点并强制解除对 ui 的阻止。

有任何想法吗？

**编辑：**

因此，这似乎不是网络问题，而是其他问题：我实际上遇到了一个错误：

```
SyntaxError: JSON.parse: unexpected non-whitespace character after JSON data 
```

我的对话：

```
 <h:form id="newUserForm">
        <p:panelGrid id="newUserGrid" columns="2">
            <h:outputText value="Email : " ></h:outputText>
            <p:inputText value="#{userController.newUser.email}" required="true" requiredMessage="Please the email of the user" validatorMessage="Email is invalid" >
                <f:validateRegex pattern="[\w\.-]*[a-zA-Z0-9_]@[\w\.-]*[a-zA-Z0-9]\.[a-zA-Z][a-zA-Z\.]*[a-zA-Z]" />
            </p:inputText>

            <h:outputText value="Name : " ></h:outputText>
            <p:inputText value="#{userController.newUser.name}" required="true" requiredMessage="Please the name of the user" ></p:inputText>

            <h:outputText value="Role"></h:outputText>
            <p:selectOneMenu id="newUserRole" required="true" value="#{userController.newUser.roleid}" requiredMessage="A role must be chosen">
                <f:selectItems value="#{userController.listRoles}" var="_role" itemValue="#{_role}" itemLabel="#{_role.roleid}"></f:selectItems>
                <f:converter converterId="misc.util.RoleConverter"></f:converter>
            </p:selectOneMenu>
            <h:outputText value="TimeZone"></h:outputText>
            <p:selectOneMenu id="newUserTz" required="true" value="#{userController.newUser.tzone}" requiredMessage="TimeZone must be specified">
                <f:selectItems value="#{userController.listTimeZone}" var="_tz" itemValue="#{_tz}" itemLabel="#{_tz}">  </f:selectItems>
            </p:selectOneMenu>

            <h:outputText value="Password"></h:outputText>
            <p:password value="#{userController.newUser.password}" required="true"  requiredMessage="Define a password"></p:password>
            <f:facet name="footer">
                <p:commandButton id="bttAddUser" value="Submit" update=":contentView:lstUsers :growl"  oncomplete="handleSubmitRequest(xhr, status, args, 'newUserDialog','newUserForm');" actionListener="#{userController.create}">
                </p:commandButton>
                <p:commandButton type="reset" value="Reset"></p:commandButton>
            </f:facet>
            <p:blockUI id="addBlockUI" trigger="bttAddUser" block="newUserGrid" widgetVar="blockUI"></p:blockUI>
        </p:panelGrid>
    </h:form> 
```

我在 Solaris 上得到错误，但在 Windows 中没有。两者都有 glassfish 3.1.2.2 build 5。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T07:25:05.043

终于解决了这个问题。

我的 WebApp 中有两个 primefaces jar：

一个在 domain/lib 下，另一个在 WEB-INF/lib 下。

似乎在使用 primefaces 的某些功能时，它会返回更多。

在[Primefaces 论坛发帖](http://forum.primefaces.org/viewtopic.php?f=3&t=24368)

# python - SOCK_DGRAM 支持 Twisted 上的 unnamed

> ID：15794812
> 
> 赞同：1
> 
> 时间：2013-04-03T18:10:28.740
> 
> 标签：python, network-programming, twisted

我想要一个程序来连接我的 python 程序，使用 twisted。我已经成功地使用带有命名管道的“SOCK_STREAM”启动连接（使用扭曲类“UNIXServerEndpoint”）。但下一步需要使用“SOCK_DGRAM”监听未命名的管道。似乎 Twisted ( [http://twistedmatrix.com/trac/ticket/5574](http://twistedmatrix.com/trac/ticket/5574) ) 中没有实现支持。如何设置用于“手动”收听的套接字并将其连接到 Twisted ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T21:53:15.610

您对“命名管道”的描述不太准确。UNIX 套接字不是命名管道。

但是，假设您的意思是`AF_UNIX`/`SOCK_DGRAM`套接字，那么执行此操作的方法是`reactor.`[`listenUNIXDatagram`](https://twistedmatrix.com/documents/current/api/twisted.internet.interfaces.IReactorUNIXDatagram.html#listenUNIXDatagram)(...)

# .net - Global.asax 未写入应用程序事件日志源

> ID：15794813
> 
> 赞同：0
> 
> 时间：2013-04-03T18:10:29.690
> 
> 标签：.net, httphandler, global-asax, event-log

`Application_Error()`当我的全局应用程序文件 ( `global.asax`) 中抛出和处理异常时，我在 HttpHandler 中遇到问题。我正在尝试`exception.Message`在我的应用程序的 EventLog 源中编写。

在你问之前澄清一下，是的，EventLog 源存在。我遇到的问题是异常本身不会写入我的应用程序的 EventLog 源（为了这个例子，我们会说事件日志源被命名`HttpEndpoint`），而是将自身记录到 ASP.NET 4.0。 30319.0 事件日志源。

有没有什么办法可以解决这个问题而不取消 global.asax 的`Application_Error()`方法，包装在抛出此错误之前执行的方法`try{}catch{}`并以这种方式写入应用程序的事件日志源？

中的代码`Application_Error()`非常简单：

```
 protected void Application_Error( object sender, EventArgs e )
  {
     var exception = Server.GetLastError();

     if ( exception == null )
     {
        return;
     }

     // try casting exception to known types for more specific event log entries
     var msmqOutputQueueWriteFailedException = exception as OutputMessageQueueWriteFailedException;

     if ( msmqOutputQueueWriteFailedException != null )
     {
        _windowsEventLog.LogFatal( _eventLogSource, string.Format( CultureInfo.CurrentCulture, "MSMQ Message Send Failure: {0} - InnerException Message: {1}", msmqOutputQueueWriteFailedException.Message, msmqOutputQueueWriteFailedException.InnerException.Message ) );
     }

     _windowsEventLog.LogError( _eventLogSource, String.Format( CultureInfo.CurrentCulture, "Global Exception was thrown: {0}", exception.Message ), exception );
  } 
```

的事件日志源`HttpEndpoint`保存`<AppSetting>`在 Web.Config 文件中，并分配给 中的`_eventLogSource`成员`global.asax`。我还在应用程序内对同一个事件日志源（在外部`global.asax`）进行其他日志记录，并且一切正常且花花公子。

有任何想法吗？非常感谢任何帮助/反馈。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T18:31:16.300

所以我做了一些实验......这似乎是因为演员 from `Exception`to `OutputMessageQueueWriteFailedException`。

如果我不尝试强制转换异常类型，而只是让异常消息写入事件日志中的`_windowsEventLog.LogError()`行而不是`_windowsEventLog.LogFatal()`，它会写入我想要的事件日志源。

我不太确定为什么会这样。欢迎对此主题的任何详细说明！

# java - Eclipse 错误...无法解析为类型

> ID：15794821
> 
> 赞同：71
> 
> 时间：2013-04-03T18:10:45.400
> 
> 标签：java, eclipse

我有一个动态的 Web 项目，我正在将一个 jsp/servlet 应用程序从 JRun 迁移到 Tomcat。

我收到错误： `com.ibm.ivj.eab.dab.DatastoreJDBC`无法解析为类型。

我将`*.class`文件放在一个`com/ibm/ivj/eab/dab`文件夹中（正是我找到它们的方式）。我尝试创建一个 jar 文件并通过“添加外部 Jar”将其添加到构建路径，我还尝试添加一个“外部类文件夹”并指向包含相关“com”目录的文件夹。

尽管如此，错误仍然存​​在。奇怪的是，如果我开始输入包名 eclipse 实际上会为我自动完成课程！（如下图所示）。任何想法将不胜感激。也许这些类是为更旧的 java 版本编译的，这会造成麻烦吗？也许我需要做一些事情来确保这些类最终出现在 WEB-INF/lib 目录中？

一世![在此处输入图像描述](https://i.stack.imgur.com/6CXHX.png)

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2014-10-28T07:35:34.510

此外，如果您使用的是 mavenised 项目，请尝试通过单击 Alt+F5 来更新您的项目。或者右键单击应用程序并转到 maven /update 项目。

它构建您的所有组件并解决是否存在任何导入错误。

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2013-04-03T18:16:08.280

1.  右键单击您的项目名称。

2.  单击`Properties`。

3.  单击`Java Build Path`。

4.  点击`Add Class Folder`。

5.  然后选择你的班级。

或者，`Add Jars`尽管您声称您尝试过，但应该可以工作。

另外，“您是否尝试过将其关闭然后重新打开”？（重新启动 Eclipse）。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2016-04-21T10:51:25.090

要解决错误“...无法解析为类型..”，请执行以下操作：

1.  右键单击类并选择“构建路径-->排除”
2.  再次右键单击该类并选择“构建路径-->包含”

这个对我有用。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2018-03-12T18:47:53.973

项目 -> 清理

至少有时足以解决问题。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2018-05-03T06:37:44.783

有两种方法可以解决“无法解析为类型”的问题：

1.  对于非 maven 项目，在文件夹中手动添加 jar 并将其添加到 java 构建路径中。这将解决编译错误。
2.  对于 maven 项目，右键单击该项目并转到 maven -> 更新项目。选择您遇到编译错误的所有项目，并选中“强制更新快照/版本”。这将更新项目并修复编译错误。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2017-03-17T15:44:48.503

对于 Maven 用户：

*   右键单击项目
*   马文
*   更新项目

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2018-09-17T21:38:33.053

简单的解决方案：
转到

> 项目属性 -> java builder path -> maven -> find c3p0-0.9.5.2.jar

并查看文件存储在本地存储库中的位置，然后转到该位置并手动删除存储库。

![G](https://i.stack.imgur.com/dROTl.png)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-07-28T18:43:46.010

*   右键单击**项目**>**属性**
*   **Java 构建路径**>**添加类文件夹**
*   选择**bin**文件夹
*   点击**确定**
*   切换**顺序和导出**选项卡
*   选择新添加的bin路径上**移**
*   单击**应用**按钮

[![在此处输入图像描述](https://i.stack.imgur.com/GBgBR.png)](https://i.stack.imgur.com/GBgBR.png)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-09-08T15:09:44.080

通过将 jar 放入 WEB_INF/lib 来解决问题。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-05-22T11:57:40.563

复制jar文件将解决。如果您有任何机会从任何教程中复制代码，请确保类名的拼写正确...例如，我从其中一个教程中复制了一个代码，该教程在 S cap 中有 solr。Eclipse 不断抛出错误，我也做了一些谷歌搜索......一切都很好，我花了 30 分钟才意识到上限小问题。相信这会对某人有所帮助

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-08-18T10:38:43.420

对于许多新用户，如果您想使用包中的所有类，请不要忘记在导入语句后添加星号 (*)....例如

```
import java.io.*;

public class Learning 
{
    public static void main(String[] args) 
    {
        BufferedInputStream sd = new BufferedInputStream(System.in);
            // no error
    }
} 
```

==================================================== ===============

```
import java.io;

public class Learning 
{
    public static void main(String[] args) 
    {
        BufferedInputStream sd = new BufferedInputStream(System.in);
            // BufferedInputStream cannot be resolved to a type error
    }
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-03-20T14:20:58.467

**解决方案**：1.项目->构建路径->配置构建路径

2.在左侧菜单中选择Java Build path，选择“Source”

3.在项目下选择包括（全部），然后单击确定

**原因**：这个问题可能是因为你可能已经删除了项目的 CLASS 文件或依赖项

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-06-04T10:56:02.553

```
Project -> Build Path -> Configure Build Path
Select Java Build path on the left menu, and select "Source"
 click on Excluded and then Include(All) and then click OK
    Cause : The issue might because u might have deleted the CLASS files 
 or dependencies on the project 
```

对于 Maven 用户：

右键单击项目

马文

更新项目

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-11-22T17:04:32.267

首先，您需要通过添加以下内容来更新 pom.xml

```
 <dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-web</artifactId>
    <version>4.1.6.RELEASE</version>
    </dependency> 
```

1]右键单击您的项目名称。

2]单击属性。

3]单击Java构建路径。

4] 检查订单和导出表中的“Maven 依赖项”。

就我而言，以前没有启用它。因此，当我启用它时，我的 @GetMapping 注释工作正常..

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-04-03T11:02:06.713

此外，还有针对 IvyDE 用户的解决方案。右键项目 -> Ivy -> resolve 需要在 build.properties 中设置 ivy.mirror 属性

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2020-07-08T11:35:21.990

我刚刚关闭了所有文件并重新打开它们，瞧！！！希望这对将来的某人有所帮助；）

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2021-01-06T06:41:47.073

下载 servlet-api.jar 文件并将其粘贴到 WEB-INF 文件夹中即可使用

# jquery - jquery append() 不工作

> ID：15794822
> 
> 赞同：0
> 
> 时间：2013-04-03T18:10:47.807
> 
> 标签：jquery

我已经设置了这个非常简单的小提琴，如果有人能指出它为什么不起作用，我会非常感激，现在一直在努力解决这个问题。

这是代码：

```
$('input[type=file]').change(function () {
    if ($(this).val()) {
        alert('This thing works.');
        $(this).append('<input type="file" name="test">');
    } else {
        $(this).remove();
    }
}); 
```

[另外，小提琴链接](http://jsfiddle.net/9xwDj/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T18:12:00.657

您不能将任何内容附加到`input`、 使用`.after`或`.replaceWith`。输入是一个可能不包含子元素的元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T18:13:17.880

您不能将任何内容附加到`input`元素

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T18:14:28.670

使用`.after()`或`.before()`或`.inserAfter()`：

```
$(this).after('<input type="file" name="test">'); 
```

# cordova - 在后台注册到 GCM

> ID：15794825
> 
> 赞同：0
> 
> 时间：2013-04-03T18:10:54.977
> 
> 标签：cordova, phonegap-plugins, cordova-2.0.0

我想要做的是运行一些脚本，让我们说“在后台”并显示外部页面。

我有我的活动

```
public class MyApp extends DroidGap
{
   @Override
   public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        super.loadUrl(Config.getStartUrl());
        //super.loadUrl("http://external.com/");
    }
} 
```

我现在只能加载包含脚本的内部页面或加载外部 url。

我想做的是

```
public class MyApp extends DroidGap
{
   @Override
   public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        // run my gcm script to register
        super.loadUrl("http://external.com/"); //load prepared page
    }
} 
```

但我不知道脚本是否应该/可以从 java 代码运行。或者也许这是错误的解决方案，我应该从 js 加载我的外部页面？我正在使用科尔多瓦 2.5

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T07:27:47.670

如果你打算支持 IOS (APNS) 和 Android (GCM)，你可以使用 PushPlugin [https://github.com/bobeast/PushPlugin](https://github.com/bobeast/PushPlugin)

它易于设置，您可以使用 javascript 注册 GCM，并在 Android 和 IOS 上具有相同的界面。

# objective-c - 创建一个 plist 来访问一个变量并重写它

> ID：15794828
> 
> 赞同：0
> 
> 时间：2013-04-03T18:11:02.213
> 
> 标签：objective-c, xcode, variables, int, plist

是否可以创建一个 plist 来保存一个名为 CurrentQuestion 的变量整数，该整数可以更改。这个变量值将被各种不同的类不断改变，这些类可以访问 currentQuestion 的新值。我似乎在使用 prepareForSegue 函数传输变量值时遇到问题，并认为此选项可能是最佳选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T18:13:41.037

您应该使用 NSUserDefaults 来存储它。

```
// setting logic
[[NSUserDefaults standardUserDefaults] setInteger:1 forKey:@"CurrentQuestion"];
[[NSUserDefaults standardUserDefaults] synchronize];

// retrieval logic
NSInteger currentQuestion = [[NSUserDefaults standardUserDefaults] integerForKey:@"CurrentQuestion"]; 
```

它也将在应用程序启动之间持续存在，因此请考虑到这一点。

# windows - 仅使用批处理文件修剪前导斜杠

> ID：15794831
> 
> 赞同：2
> 
> 时间：2013-04-03T18:11:17.240
> 
> 标签：windows, cmd, dos

对于我工作的地方，我的双手被束缚在我可以使用的东西上，以便做我想做的事情。

我需要做的是创建一个`.bat`执行 a`net view`并将其输出到 a`.txt`并从输出中删除前导斜杠的操作。

获取文件的网络视图是很容易的部分，但删除前导斜杠是我遇到的问题。

不确定是否重要，但我公司使用的命名系统是*#####-XX-##*

我环顾四周，并没有找到一种方法来轻松地做到这一点。

编辑：如果有人为此编写脚本，Powershell 也是可以使用的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T19:13:27.933

电源外壳：

```
net view | select-string '^\\\\([^\\\s]+)' | foreach-object {
  $_.Matches[0].Groups[1].Value
} | out-file netview.txt 
```

账单

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T19:20:13.373

CMD（替换`%m`为`%%m`在批处理文件中运行它）：

```
for /f "delims=\ tokens=*" %m in ('net view ^| findstr /r "^\\\\"') do (
  echo %m
) >out.txt 
```

电源外壳：

```
net view | select-string '^\\\\' -AllMatches `
  | % { $_ -replace '^\\\\', '' } >out.txt 
```

# drupal-7 - 查看隐藏字段的权限

> ID：15794837
> 
> 赞同：0
> 
> 时间：2013-04-03T18:11:37.410
> 
> 标签：drupal-7, drupal-fields

有一个带有隐藏字段的节点类型。任何人都可以从搜索表单中找到该内容类型的节点，并查看开放信息。要查看所有字段，用户必须向节点所有者提出请求，由节点所有者决定哪些用户可以查看，或者哪些字段不能查看。

有没有这个目的的模块？还有其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-02T06:08:45.307

您还可以查看[Override node options](https://www.drupal.org/project/override_node_options)模块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T04:19:11.717

有机组允许管理用户并根据组角色分配字段可见性。

www.drupal.org/project/og

# c++ - 将 OpenGL 的 glRotated 转换为 Maya 的 cmds.rotate

> ID：15794839
> 
> 赞同：0
> 
> 时间：2013-04-03T18:11:44.427
> 
> 标签：c++, python, opengl, maya

我有一个 C++/OpenGL 程序，它在不同的旋转中创建了很多圆柱体，所以它们看起来都是连接的。我添加了一个导出方法来为 Maya 编写具有相同绘制方法的 python 脚本，这样我就可以加载脚本。

我知道当 OpenGL 创建和旋转圆柱体时，它会将它与 Z 轴对齐，**并**通过它的“基础”旋转和平移它。

因此，我在 Maya 转换中一直非常小心，在进行任何转换之前移动枢轴，并且将圆柱体预对齐到 OpenGL 的标准（然后冻结转换，从而创建 OpenGL 基础）。

翻译似乎都移动到了正确的位置，但我担心我是否正确地进行了旋转函数之间的转换。我了解 Maya 和 OpenGL 都以度数进行旋转。然而，OpenGL中的功能是：

```
glRotated(angle, x, y, z); 
```

在 Maya 的 Python 中：

```
cmds.rotate(x-deg, y-deg, z-deg); 
```

所以我一直在做的是从 OpenGL 中获取*角度*并将其乘以 Maya 方法的给定轴：

```
cmds.rotate(angle * x, angle * y, angle * z); 
```

我认为这会起作用并给我想要的东西。但旋转似乎仍然关闭。我找不到一个很好的天气解释，或者这*不能*按我预期的方式工作。那么任何人都可以确认这种关系吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T18:25:23.267

这通常不起作用，只有当旋转轴与主轴之一对齐时。

您的旋转以轴+角度给出，您需要将其转换为欧拉角。您可以在阅读之后手动执行此操作，例如在 Wikipedia 上，或者您可以构造一个 MQuaternion，使用 setAxisAngle() 方法（使用弧度，而不是度数），然后将其转换为 MEulerAngle。

# iis - 将 IIS 7 IP 的 URL 重写为域名

> ID：15794840
> 
> 赞同：1
> 
> 时间：2013-04-03T18:11:47.027
> 
> 标签：iis

我有一个客户的请求，他们希望我能做到这一点。当网络上的用户访问[http://xxxx](http://x.x.x.x)时，将其 301 重定向到他们的域名[http://www.domain.com](http://www.domain.com)。我在 URL Rewrite 中弄乱了规则，我没有问题指定条件来确定对 IP 地址的请求等。但是当我进行重定向时，站点进入重定向循环。

我的问题是我该怎么做？我知道这基本上是重定向到同一个地方，因此是循环，但是有什么办法可以做到这一点？出于 SEO 的原因，他们不希望网站的访问者能够通过公共 IP 获得它。

谢谢，克里斯//////

好的，多亏了 Caner 的一些指导和好主意，我才能够弄清楚。这是我使用的 ASP 代码：

```
<%
if Request.ServerVariables("HTTP_X_HOST") = "" then
Dim rd
rd = "http://www.xxx.com" & Request.ServerVariables("PATH_INFO")
Response.Status="301 Moved Permanently"
Response.AddHeader "Location",rd
Response.end 
end if
%> 
```

感谢所有的建议！克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T07:04:41.970

这有点棘手，但我建议您的客户端在其头文件（header.asp 文件、site.master 等）中添加一些代码，而不是在 IIS 上进行配置；此代码可以检查请求；你可以到达`HttpContext.Current.Request.Url.Host`。使用`HttpContext.Current.Request.Url.Host`，您可以进行重定向。

```
 string currentURL = HttpContext.Current.Request.Url.Host;

if(!currentURL.StartsWith("www."))
{
    string newURL = HttpContext.Current.Request.Url.Host;
    if(currentURL =="www.x.x.x.x")
      newURL ="www.domain.com";

    newURL += HttpContext.Current.Request.Url.PathAndQuery;

    Response.Redirect(newURL);
} 
```

希望这可以帮助。

# c++ - 欧拉角到 GlRotatef

> ID：15794842
> 
> 赞同：1
> 
> 时间：2013-04-03T18:11:50.580
> 
> 标签：c++, visual-c++, opengl

我想在opengl中使用欧拉角。有些人建议如下：

```
glRotatef(Rx,1,0,0);
glRotatef(Rx,0,1,0);
glRotatef(Rx,0,0,1); 
```

当然，如果您一次向多个方向旋转，则此方法将完全崩溃。据我所知，更好的方法是将所有内容转换为 OpenGL 期望的格式（角度和矢量）

四元数的欧拉角在互联网上的许多不同地方都有相当广泛的覆盖。不幸的是，互联网上的每个帖子似乎都有不同的建议，而对于我的生活来说，它们似乎都不起作用。很有可能有一个可行的建议，但在一长串不太可行的建议中，我却忽略了它。

遵循[这个](https://stackoverflow.com/questions/1875780/how-to-rotate-about-the-center-of-screen-using-quaternions-in-opengl)建议让我很接近。旋转在单独的方向上起作用，但当它们组合起来时，它们似乎表现不正常。目前我的代码如下所示：

```
double c1 = cos((Rx/180.0f*3.141592)/2.0f);
double c2 = cos((Ry/180.0f*3.141592)/2.0f);
double c3 = cos((Rz/180.0f*3.141592)/2.0f);
double s1 = sin((Rx/180.0f*3.141592)/2.0f);
double s2 = sin((Ry/180.0f*3.141592)/2.0f);
double s3 = sin((Rz/180.0f*3.141592)/2.0f);

double x = (s1*c2*c3-c1*s2*s3)*180.0/3.141592;
double y = (c1*s2*c3+s1*c2*s3)*180.0/3.141592;
double z = (c1*c2*s3-s1*s2*c3)*180.0/3.141592;
double w = acos(c1*c2*c3+s1*s2*s3)*2.0*180.0/3.141592;

//normalize vector, maybe not necessary?
double mag = sqrt(x*x+y*y+z*z);
x /= mag;
y /= mag;
z /= mag;

glRotatef(w,x,y,z); 
```

任何人都可以就从这里去哪里提供任何建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T18:50:33.573

第一个建议不起作用的原因是因为它相对于先前的旋转旋转。例如，第二行（假设您的意思是 glRotatef( **Rx** ,1,0,0); glRotatef( **Ry** ,0,1,0); glRotatef( **Rz** ,0,0,1);) 将相对于新的y 轴已被第一行旋转。您想相对于原始轴旋转。

Wolfram Alpha ( [http://mathworld.wolfram.com/EulerAngles.html](http://mathworld.wolfram.com/EulerAngles.html) ) 对欧拉角有全面的描述，无论您想使用什么表示。

一种可能性是使用[OpenGL 数学库](http://glm.g-truc.net/)并使用扩展。然后，您可以围绕每个轴连续使用axisAngle 旋转。

# sql-server - Sql 查询：本案例按月和年分组

> ID：15794850
> 
> 赞同：1
> 
> 时间：2013-04-03T18:12:05.327
> 
> 标签：sql-server, sql-server-2008, tsql, sql-server-2008-r2

我有一个包含以下列的表格**产品**

```
ProductId Name RegistrationDate UnregistrationDate
1          AB    2013-01-01      2013-03-01
2          CD    2013-01-10      2013-03-13 
```

ETC

我想获得一年中每个月的**注册产品列表。**

示例：年、月以及已注册和未未注册的经销商数量。

```
Year Month RegisteredProucts
2013  2         35
2013  3         45(includes products even registered before March 2013) 
```

我写了以下存储过程来查找注册产品一个月：&它有效：

```
@Begin Time = First Day of the Month
@End Time = Last Day of the Month

select COUNT(DISTINCT P.ProductId) as RegisteredProducts from Product P    
where ((P.RegisteredDate < @EndTime)
AND (P.UnregisteredDate > @EndTime)) 
```

然后我写了下面的查询，但它似乎按 RegisteredDate 对结果进行分组。我想知道如何在每个月底之前将已注册的产品（不是未注册的）分组，为期一年？

```
select YEAR(P.RegisteredDate) AS [YEAR],MONTH(P.RegisteredDate) AS [MONTH],       COUNT(DISTINCT P.ProductId) as RegisteredProducts from Product P    
where ((P.RegisteredDate < @EndTime)
AND (P.UnregisteredDate > @EndTime))  
group by YEAR(D.RegisteredDate), MONTH(D.RegisteredDate) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T18:21:27.917

```
WITH    months (mon) AS
        (
        SELECT  CAST('2013-01-01' AS DATE) AS mon
        UNION ALL
        SELECT  DATEADD(month, 1, mon)
        FROM    months
        WHERE   mon < DATEADD(month, -1, GETDATE())
        )
SELECT  mon, COUNT(productId)
FROM    months
LEFT JOIN
        registeredProducts
ON      registrationDate < DATEADD(month, 1, mon)
        AND (unregistrationDate >= mon OR unregistrationDate IS NULL)
GROUP BY
        mon 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T18:25:37.980

```
; with  months as
        (
        select  cast('2013-01-01' as date) as dt
        union all
        select  dateadd(month, 1, dt)
        from    months
        where   dt < '2014-01-01'
        )
select  *
from    months m
cross apply
        (
        select  count(*) as ProductCount
        from    Product p
        where   p.RegistrationDate < dateadd(month, 1, m.dt) and 
                (
                    UnregistrationDate is null
                    or UnregistrationDate >= m.dt
                )
        ) p 
```

[SQL Fiddle 的示例。](http://sqlfiddle.com/#!6/92257/2/0)

# ruby-on-rails - 当我尝试“放置”或“<%=" 一个 ActiveRecord (rails) 属性时，我得到 nil，但是当我查看对象哈希时它实际上存在

> ID：15794852
> 
> 赞同：0
> 
> 时间：2013-04-03T18:12:06.447
> 
> 标签：ruby-on-rails, activerecord, null, puts

因此，这里是“属性”表记录的哈希示例，所讨论的属性是“所有者”

```
Property.first #=>
  #<Property id: 3684, ss_property_id: 1, owner_full_name: "Holliday Associates", owner: "HA",
  owners_pctg: 100, tax_map_id: "0460001047", county: "Horry", description: "L.S. Alford", acreage:
  131.0, prop_taxes_2009: 180.72, prop_taxes_2010: 173.99, prop_taxes_2011: 172.94, notes: nil,
  created_at: "2013-04-03 01:16:23", updated_at: "2013-04-03 01:16:26"> 
```

但是，当我做这样的事情时

```
1.9.3p194 :011 > Property.first.owner
Property Load (0.3ms)  SELECT "properties".* FROM "properties" LIMIT 1
=> nil 
```

它是零。

编辑：这是我的模型（过于简单化了......）

```
class Property < ActiveRecord::Base
  belongs_to :owner
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T19:14:17.890

我的模型最终与 :owner 命名空间发生冲突。它实际上是belongs_to :owner，一个我还没有开始使用的新模型。:owner 命名空间显然被 ActiveRelation 方法覆盖到 Owner 模型

# symfony - JavaScript 文件的资产全局加载会影响 CSS

> ID：15794856
> 
> 赞同：1
> 
> 时间：2013-04-03T18:12:24.407
> 
> 标签：symfony, assetic

我将我的网站移植到 Symfony 框架。我正在使用 Assetic 作为我的资产。在我解决了错误之后，我想整合代码。当我这样做时，我遇到了一个显然与我正在更改的内容无关的问题。这是工作代码：

```
{% stylesheets 'bundles/zetchoamcolan/css/screen.css' filter='cssrewrite' %}
    <link rel="stylesheet" href="{{ asset_url }}" />
{% endstylesheets %}
{% stylesheets 'bundles/zetchoamcolan/css/SpryTooltip.css' filter='cssrewrite' %}
    <link rel="stylesheet" href="{{ asset_url }}" />
{% endstylesheets %}
{% javascripts 'bundles/zetchoamcolan/js/modernizr-custom.80696.js'
               'bundles/zetchoamcolan/js/SpryTooltip.js' %}
    <script type="text/javascript" src="{{ asset_url }}"></script>
{% endjavascripts %} 
```

我想在不指定文件的情况下加载 javascript，所以我将最后一段代码更改为：

```
{% javascripts 'bundles/zetchoamcolan/js/*' %}
    <script type="text/javascript" src="{{ asset_url }}"></script>
{% endjavascripts %} 
```

当我这样做时，我会丢失 css 文件中指定的背景图像。其余的 css 格式似乎正在运行。提到的两个 JavaScript 文件是 js 目录中的唯一文件。这是一个错误还是我做错了什么？

**更新：**丢失的图像是 parchment.gif。我在两种情况下都检查了图像目录。当我在上面使用“/ *”时，该文件没有出现。取而代之的是一个名为 parchment_border.png 的文件。我在我的 css 的其他地方使用这个文件。我正在使用 Safari Inspect Element 来确定这一点。

**更新 2：**这是一个用户错误。当它应该是“modernizr.custom.80696”时，我输入了“modernizr-custom.80696”。我仔细检查了拼写，但没有检查标点符号。正确指定modernizr 时，它会调用一些将背景图像设置为无的CSS。我不知道为什么我有那个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T19:55:55.733

您需要更新 CSS 中的图像路径。Assetic 包将压缩/加入指定的文件并将输出放在 css/ 或 js/ 文件夹中。

在您的 css 中，您的图像路径需要从更改`../images/image.jpg`为`/bundles/yourbundle/images/image.jpg`

# php - PHP双向地图

> ID：15794858
> 
> 赞同：2
> 
> 时间：2013-04-03T18:12:28.203
> 
> 标签：php, map, bidirectional

我正在将一段 Java 代码移植到 PHP 中，该代码使用了大量的双向地图（[Guava 的 BiMap](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/BiMap.html)）。类似 Java 的地图由 PHP 数组或[SplObjectStorage](http://www.php.net/manual/en/class.splobjectstorage.php)提供，但是否有可用的库 PHP 双向地图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-08T10:53:18.610

此类应提供双向地图的大多数需求：

```
class BiMap
{

    private $KtoV, $VtoK;

    public function __constructor()
    {
        $this->KtoV = []; // for version < 5.4.0, syntax must be: $this->KtoV = array();
        $this->VtoK = [];
    }

    public function getKey($v)
    {
        if($this->hasValue($v))
        {
            return $this->VtoK[$v];
        }
        else
        {
            return null;
        }
    }

    public function getAllKeys()
    {
        if($this->KtoV)
        {
            return array_keys($this->KtoV);
        }
        else
        {
            return $this->KtoV;
        }
    }

    public function getValue($k)
    {
        if($this->hasKey($k))
        {
            return $this->KtoV[$k];
        }
        else
        {
            return null;
        }
    }

    public function getAllValues()
    {
        if($this->VtoK)
        {
            return array_keys($this->VtoK);
        }
        else
        {
            return $this->VtoK;
        }
    }

    public function hasKey($k)
    {
        return isset($this->KtoV[$k]);
    }

    public function hasValue($v)
    {
        return isset($this->VtoK[$v]);
    }

    public function put($k, $v)
    {
        if($this->hasKey($k))
        {
            $this->removeKey($k);
        }
        if($this->hasValue($v))
        {
            $this->removeValue($v);
        }
        $this->KtoV[$k] = $v;
        $this->VtoK[$v] = $k;
    }

    public function putAll($array)
    {
        foreach($array as $k => $v)
        {
            $this->put($k, $v);
        }
    }

    public function removeKey($k)
    {
        if($this->hasKey($k))
        {
            unset($this->VtoK[$this->KtoV[$k]]);
            $v = $this->KtoV[$k];
            unset($this->KtoV[$k]);
            return $v;
        }
        else
        {
            return null;
        }
    }

    public function removeValue($v)
    {
        if($this->hasValue($v))
        {
            unset($this->KtoV[$this->VtoK[$v]]);
            $k = $this->VtoK[$v];
            unset($this->VtoK[$v]);
            return $k;
        }
        else
        {
            return null;
        }
    }

} 
```

但是，如果您需要对键/值和/或对象/数组检查进行空值检查，则应在函数体中给出类似于以下代码行的处理，并在`hasKey($k)`,`hasValue($v)`和`put($k, $v)`方法中适当地调用：

```
 if($item === null)
    {
        throw new Exception('null as BiMap key / value is invalid.');
    }
    if(is_object($item) || is_array($item))
    {
        throw new Exception('Object / Array as BiMap key / value is invalid.');
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-04T07:42:50.930

一旦将值放入2个数组中，我就这样做了。如果 keySet() 和 valueSet() 是分离的，你甚至可以使用一个值。例子：

```
$mapKtoV = array();
$mapVtoK = array();

function putInMap ($key,$value)
{
    $mapKtoV[$key] = $value;
    $mapVtoK[$value] = $key;
} 
```

当然你也可以把它们放到一个类中。

您是否还认为这种解决方案看起来很狡猾和有异味？是的，没错，欢迎来到 PHP 的世界，这个世界通常以糟糕的代码设计为主。如果您真的在寻找一个好的解决方案，您实际上应该将源代码从 PHP 移植到 Java ;)

希望能帮助到你。

# algorithm - 查找以下算法的最坏情况复杂度

> ID：15794860
> 
> 赞同：-1
> 
> 时间：2013-04-03T18:12:40.170
> 
> 标签：algorithm, data-structures, complexity-theory

我试图在下面找到算法的最坏情况复杂性。该算法在具有 n > 1 个元素的数组 DATA 中找到最大元素的位置 LOC1 和第二大元素的位置 LOC2。我将复杂性作为算法执行期间比较的数量，

```
FIND(DATA, N, LOC1, LOC2)

    1\. Set FIRST = DATA[1], SECOND = DATA[2], LOC = 1, LOC2 = 2.

    2\. IF FIRST < SECOND then:
    a. Interchange FIRST and SECOND.
    b. Set LOC1 = 2 and LOC2 = 1.
    [End of If structure.]

    3\. Repeat for  K= 3 to N:
    If FIRST < DATA[K], then:
    a. Set SECOND = FIRST and FIRST = DATA[k].
    b. Set LOC2 = LOC1 and LOC2 = K.
    Else if SECOND < DATA[K], then:
        Set SECOND = DATA[K] and LOC2 = K.

    [End of loop.]

    4\. Return 
```

我无法弄清楚如何找到上述程序的复杂性，因为比较的数量将取决于数组中元素的排列方式。对于最坏的情况，将 SECOND 元素与 DATA[K] 进行比较的 else 条件也应执行最大次数。但是根据 DATA 数组的元素，可能会有很多情况。

谢谢，

问候

tek3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T18:16:53.287

最坏的情况是第 3 步总是对所有 n-2 次迭代执行两次比较。因此，第 2 步有一次比较，第 3 步有 2*(n-2) 次比较。

# c# - 按 CRM 下拉列表值查询表达式

> ID：15794867
> 
> 赞同：0
> 
> 时间：2013-04-03T18:13:00.043
> 
> 标签：c#, drop-down-menu, dynamics-crm-4

在 MS CRM 4 中，使用 c#，我试图查询选项列表字段等于“否”的所有帐户。我知道选项列表包含每个项目的 id 和值，但我只想查询值。

这是我目前的代码：

```
ConditionExpression serviceContractCondition = new ConditionExpression();
        serviceContractCondition.AttributeName = "kez_servicecontracttype"; 
        serviceContractCondition.Operator = ConditionOperator.Equal; 
        serviceContractCondition.Values = new string[] { "Everything" }; 
```

在上面的代码中，我通过查看它是否只能找到服务合同类型等于 Everything 的帐户来测试它（我将 conditionOperator 更改为等于）。我没有工作，而是得到了这个异常

System.Web.Services.Protocols.SoapHttpClientProtocol.Invoke(String methodName, Object[] parameters) 在 crm.CrmService 中的 System.Web.Services.Protocols.SoapHttpClientProtocol.ReadResponse(SoapClientMessage message, WebResponse response, Stream responseStream, Boolean asyncCall)。在 c:\Windows\Microsoft.NET\Framework\v2.0.50727\Temporary ASP.NET Files\crmcustoms\3e2de0cf\f06ef1a\App_WebReferences.iwjjnsp-.0.cs:crmCustoms.MetricFunctions.Retrieve_SC_Total 的第 116 行中执行（请求请求） () 在 e:\Projects\Kezber\crmCustoms\App_Code\MetricFunctions.cs:line 421

服务器无法处理请求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T18:44:36.133

选项列表项具有显示标签和内部（数字）值。首先，您需要找到对应的值`No`。允许您这样`MetadataService`做。首先，实例化该服务：

```
var metaservice = new MetadataService();.
metaservice.Url = "http://localhost/mscrmservices/2007/metadataservice.asmx";

metadata.Credentials = "same as you use for the crm webservice"; 
```

然后，使用此方法检索选项列表标签的值：

```
int getPicklistValueByName(string picklistName, string entityLogicalName, string logicalName, MetadataService metaService)
{     
   RetrieveAttributeRequest attributeRequest = new RetrieveAttributeRequest();
   attributeRequest.EntityLogicalName = entityLogicalName;
   attributeRequest.LogicalName = kogicalName;

   var attributeResponse = (RetrieveAttributeResponse)metaService.Execute(attributeRequest);
   var picklist = (PicklistAttributeMetadata)attributeResponse.AttributeMetadata;

   return picklist.Options.Where(op => op.Label.UserLocLabel.Label == picklistName).Single().Value.Value;
} 
```

调用可能如下所示：

```
var value = getPicklistValueByName("kez_servicecontracttype", "key_entitytype", "No", metaService) 
```

现在，在条件表达式中使用这个值。另一种方法是将数值硬编码为程序中的常数 - 这更好取决于您的情况。

# python - 如何将数据库日期转换为带时区的字符串

> ID：15794874
> 
> 赞同：0
> 
> 时间：2013-04-03T18:13:27.793
> 
> 标签：python, django, timezone

我有以下代码行

```
datetime.datetime.strftime(expire_date, "%m/%d/%Y %H:%M %p %Z") 
```

但它没有输出带有时区的日期。

我怎样才能改变它呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T18:25:48.953

正如[文档](http://docs.python.org/2/library/datetime.html#strftime-and-strptime-behavior)所说：

> 对于一个天真的对象，%z 和 %Z 格式代码被空字符串替换。
> 
> 对于有意识的对象：……如果`tzname()`返回`None`，`%Z`则替换为空字符串。否则`%Z`被返回的值替换，它必须是一个字符串。

（模块介绍中描述了“naive”和“aware”之间的区别。）

所以，要么你有一个天真的对象（一个根本没有时区的对象），要么有一个不知道如何命名其时区的感知对象，或者一个认为它知道如何命名其时区的感知对象，但是返回一个空字符串。

尝试记录`expire_date.tzname()`，，`expire_date.tzinfo`然后`expire_date.tzinfo.utcoffset(expire_date)`看看你得到了什么。（文档的[可用类型](http://docs.python.org/2/library/datetime.html#available-types)部分告诉您如何解释这一点。）

那么，你如何解决它？嗯，这取决于你到底在处理什么，但最有可能的是你需要打电话[`astimezone`](http://docs.python.org/2/library/datetime.html#datetime.datetime.astimezone)或`replace`给它灌输一个时区。

或者，更简单地说，只需分别传递 UTC 日期和时区（或在适当的情况下将它们组合在一起`tuple`），并编写一个包装器，通过连接日期时间字符串和时区字符串将它们格式化为字符串。

# sql - 列“nvarchar”的定义必须包含数据类型

> ID：15794875
> 
> 赞同：4
> 
> 时间：2013-04-03T18:13:28.217
> 
> 标签：sql, sql-server

我有一个光标，里面有一个 alter table 命令，我想用它在特定表中创建新列。列名将包含另一个表中一列的值，这就是我使用游标执行此操作的原因。无论如何，我不断收到此错误消息：**消息 173，级别 15，状态 1，第 1 行列“nvarchar”的定义必须包含数据类型。**. 现在我声明了所有数据类型（我猜我做了，我检查了），我不明白为什么我一直收到这条消息。在谷歌上找不到任何类似的问题，所以我决定在这个网站上问我的第一个问题。希望得到一个快速的答复。这是代码：

```
DECLARE @rbr_param  nvarchar(255)
DECLARE @cName nvarchar(255)
SET @cName = 'P_'+@rbr_param+'_P'

DECLARE curs CURSOR FOR SELECT DISTINCT rbr_param FROM dbo.parametri_pomocna ORDER BY     rbr_param
OPEN curs
FETCH NEXT FROM curs
INTO @rbr_param
WHILE @@FETCH_STATUS = 0
BEGIN

EXEC('ALTER TABLE dbo.Parametri ADD ' + @cName + ' nvarchar(255)')

FETCH NEXT FROM curs
INTO @rbr_param

END
CLOSE curs
DEALLOCATE curs 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T18:16:20.863

@cName 不会随着@rbr_param 的值更新而自动更新。你需要移动这条线

```
SET @cName = 'P_'+@rbr_param+'_P' 
```

循环内。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T18:16:27.950

我认为在获取后设置值..

```
DECLARE @rbr_param  nvarchar(255)
DECLARE @cName nvarchar(255)

DECLARE curs CURSOR FOR SELECT DISTINCT rbr_param FROM dbo.parametri_pomocna ORDER BY     rbr_param
OPEN curs
FETCH NEXT FROM curs
INTO @rbr_param
WHILE @@FETCH_STATUS = 0
BEGIN

SET @cName = 'P_'+@rbr_param+'_P'

EXEC('ALTER TABLE dbo.Parametri ADD ' + @cName + ' nvarchar(255)')

FETCH NEXT FROM curs
INTO @rbr_param

END
CLOSE curs
DEALLOCATE curs 
```

# javascript - 什么会导致 event.dataTransfer.files 在 IE10 中为空？

> ID：15794877
> 
> 赞同：2
> 
> 时间：2013-04-03T18:13:35.977
> 
> 标签：javascript, html, internet-explorer-10

因此，鉴于此代码：

```
var container = document.getElementById("body");
container.addEventListener("dragenter", noopHandler, false);
container.addEventListener("dragover", noopHandler, false);
container.addEventListener("drop", function(evt) {
    noopHandler(evt);
    console.log('drop');
    console.log(evt.dataTransfer.files);
}, false); 
```

在 Chrome 和 FF 中，evt.dataTransfer.files 包含用户在页面上放置的所有文件。

但是在 IE10 中，没有 evt.dataTransfer.files。FileList 对象根本不存在。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-29T18:34:35.880

dataTransfer.files 确实存在于 IE10 中，它甚至记录在 IE 开发中心： http: [//msdn.microsoft.com/en-us/library/ie/hh580307 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ie/hh580307(v=vs.85).aspx)

您可能有一个 javascript 错误或与他不一定相关的东西。不过，您可以做的是检查 FileList 对象是否存在。

```
if(typeof FileList !== 'undefined') 
```

如果 FileList 存在于您的浏览器中，这应该是正确的。如果它返回 false，则意味着您可能没有使用 IE10。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-03T22:40:09.527

我的答案有点晚了，但您可能想检查兼容性视图是否已关闭。在 IE9 及更低版本中，dataTransfer 不存在，并且使用任何更改浏览器呈现的控制台工具都会从 dataTransfer 中删除文件对象。

# ios - 尝试将 iCarousel 实施到我的项目中，但没有任何显示 - 我做错了什么？

> ID：15794882
> 
> 赞同：3
> 
> 时间：2013-04-03T18:13:53.833
> 
> 标签：ios, objective-c, icarousel

我正在尝试使用 iCarousel 库在我的应用程序中实现轮播类型选择器，但是当我加载应该显示轮播的视图时，什么都没有出现。

以下是相关代码：

iCarousel 委托方法：

```
- (NSUInteger)numberOfItemsInCarousel:(iCarousel *)carousel {
    return 65;
}

- (UIView *)carousel:(iCarousel *)carousel viewForItemAtIndex:(NSUInteger)index reusingView:(UIView *)view {
    // Create a number label representing a numeric WPM option
    UILabel *numberLabel = nil;

    // Create new view if no view is available for recycling
    if (!view) {
        view = [[UIImageView alloc] initWithFrame:CGRectMake(10, 10, 220, 60)];
        numberLabel = [[UILabel alloc] initWithFrame:view.bounds];
        numberLabel.backgroundColor = [UIColor clearColor];
        numberLabel.textColor = [UIColor whiteColor];
        numberLabel.textAlignment = NSTextAlignmentCenter;
        numberLabel.tag = 1;

        [view addSubview:numberLabel];
    }
    else {
        numberLabel = (UILabel *)[view viewWithTag:1];
    }

    // Calculate the number's value depending on the index value being retrieved
    int number = 200 + (index * 20);
    numberLabel.text = [@(number) stringValue];

    return view;
} 
```

并在`viewDidLoad:`：

```
 self.carousel = [[iCarousel alloc] initWithFrame:CGRectMake(120, 35, 150, 50)];
    self.carousel.type = iCarouselTypeLinear;
    [self.view addSubview:self.carousel]; 
```

我到底错过了什么把事情搞砸了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T20:16:09.497

我没有使用 iCarousel，但也许你没有设置委托和/或数据源？

```
self.carousel.delegate = self;
self.carousel.dataSource = self; 
```

从您显示的代码来看，您似乎并不这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T09:17:58.000

以上方法是icarousel委托方法，请检查是否调用它们。如果没有，请检查您是否在接口文件中添加了 iCarouselDelegate ， iCarouselDataSource 。另外，您正在添加 icarousel 作为子视图。应该在nib 文件或故事板本身，而 numberlabel 应作为子视图添加到轮播视图中。请检查您是否正在做这样的事情：[carousel reloadData]; 这应该调用所有轮播委托方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T21:24:30.533

```
self.carousel.delegate = self;
self.carousel.dataSource = self;
[self.carousel reload]; 
```

# c# - 根据时间更改 GridView 单元格的颜色

> ID：15794885
> 
> 赞同：2
> 
> 时间：2013-04-03T18:14:00.430
> 
> 标签：c#, asp.net, gridview

![在此处输入图像描述](https://i.stack.imgur.com/bMYPq.jpg)

我上面有一个显示原因和时间的网格视图。

我想做的是：

*   时间到时显示红色`BETWEEN 12:00:00 PM and 12:59:59 PM AND is Beginning of Day`

*   时间到时显示绿色`BETWEEN 13:00:00 PM and 13:59:59 PM AND is LUNCH`

我让它为列 REASON 工作。

下面是我的代码。注意：e.Row.Cells[4] 用于列原因，e.Row.Cells[5] 用于列时间

```
protected void GridViewEmployee_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        //Works
        if (e.Row.Cells[4].Text == "Break")
        {
            e.Row.Cells[4].BackColor = Color.Red;
        }

        //Doesn't Work
        //if (e.Row.Cells[4].Text == "Beginning Of Day" && e.Row.Cells[5].Text > " 12:00:00 PM " && e.Row.Cells[5].Text < "12:59:59 PM")
        //{
        //    e.Row.Cells[4].BackColor = Color.Red;
        //}
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T18:18:34.777

您正在将时间值与字符串进行比较。所以尝试这样的事情，并确保当你使用`<`or`>`运算符时，两个值都必须是日期时间类型。

```
DateTime.Parse(e.Row.Cells[5].Text) > DateTime.Parse("12:00:00 PM ") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T18:20:51.280

你有没有尝试过：

```
 if(DateTime.Now > 12:00:00 && DateTime.Now < 13:00:00)
    {
      dataGridView1.Rows[i].DefaultCellStyle.BackColor = Color.Red;
    } 
```

# java - CRC32 java在java 64位上有所不同

> ID：15794886
> 
> 赞同：0
> 
> 时间：2013-04-03T18:14:23.237
> 
> 标签：java, checksum, crc32

最近，我将一个使用 32 位 java 的 tomcat5 上的应用程序迁移到了一个使用 64 位 java 的 tomcat6。

在应用程序中有一个文本 CRC 计算，它在每个服务器中返回不同的值。例如：“Hipoplasia del seno frontal.Resto de senos faciales con desarrollo y neumatización habituales.No se observan lesiones óseas.Atentamente”，在 32 位 jvm 上返回：439231721，在 64 位 jvm 上返回：2756208468

还在 32 位 jvm tomcat6 上尝试过并返回 439231721

这是crc计算的代码：

```
public static long doChecksum(String text) {

    try{

    //Convert string to bytes
    byte bytes[] = text.getBytes();
    Checksum checksum = new CRC32();
     // void update(bytes[] b, int start, int length)
    checksum.update(bytes,0,bytes.length);

    long lngChecksum = checksum.getValue();
            System.out.println(text + " : " + lngChecksum);
            return lngChecksum;
      } catch (Exception e) {
        return -1;
      }
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T18:19:29.183

请注意，`String.getBytes()`使用系统的默认字符编码将字符转换为字节。如果系统具有不同的默认字符编码，则会得到不同的字节数组，从而导致不同的校验和。

指定要用于获得一致结果的字符编码：

```
byte[] bytes = text.getBytes("UTF-8"); 
```

# shopify - 通过 Shopify API 的用户特定折扣产品？

> ID：15794888
> 
> 赞同：1
> 
> 时间：2013-04-03T18:14:26.070
> 
> 标签：shopify

有什么方法可以创建仅在特定时间和地点出现的打折产品（通过 Shopify API）？我刚刚创建了价格较低的变体，但这有点麻烦，因为我需要修改所有产品渲染的 Liquid 文件，以便折扣价不会出现在任何地方。

非常感谢任何帮助或建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T22:00:58.447

好吧，我不知道我是否完全理解，但让我试试……您可以肯定地使用 API 更改产品价格。此外，您可以创建一个集合并使用 API 将此产品插入此集合中。最后，你用液体展示了这个系列。您可以使用 jquery 或脚本添加一些动态。此外，您可以使用用户系统来定义哪些用户可以查看或不可以查看。这只是一个建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T22:10:31.930

我已经通过使用客户标签来做到这一点。由于您可以控制在检查客户标签时显示的内容，因此您可以提取专为他们定价的产品。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T18:57:32.277

一句话：没有。他们已经计划了多年，但到目前为止，仍然无法通过 API 创建个人折扣。

# batch-file - 使用批处理文件将标题添加到 CSV

> ID：15794894
> 
> 赞同：3
> 
> 时间：2013-04-03T18:14:47.287
> 
> 标签：batch-file

我有一个 CSV 文件，其中包含需要添加标题的数据。我希望它看起来像这样

```
group  id  firstname   lastname   homephone
acme   1      joe         moe     555555555 
```

目前它看起来像这样

```
acme   1      joe         moe     5555555555 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T19:16:58.867

```
@echo off    
echo group  id  firstname   lastname   homephone > new.csv
type old.csv >> new.csv 
```

类型命令不适用于 unicode 符号，但如果您的文件仅包含 ascii-ies，这应该没问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-19T12:04:59.103

我还不能评论。但想发布对我有用的东西。我使用了 npocmaka 的答案并添加了双引号和逗号，这正是我所需要的。我还需要用带标题的文件替换现有文件，所以我添加了删除和重命名。谢谢！

```
@echo off    
echo "Salesman Code","Salesman Name","Description","Manager Code","Region","Reg SM#","Reg SM Long" > CO_REPNEW.CSV
type CO_REP.CSV >> CO_REPNEW.CSV
del CO_REP.CSV
ren CO_REPNEW.CSV CO_REP.CSV 
```

# linux - 在 Linux 上使用帧缓冲设备作为普通显示器（USB 到 HDMI 适配器）

> ID：15794895
> 
> 赞同：0
> 
> 时间：2013-04-03T18:14:59.200
> 
> 标签：linux, framebuffer, xorg, hdmi

我有一个基于 UFX7000 SMSC 芯片组的 USB3 到 HDMI 适配器。它在 Linux 内核中有一个驱动程序，但它制作了一个帧缓冲设备：

```
usb 2-1.1.1: SMSC UDX USB device /dev/fb1 attached. 800x600 resolution. Using 940K framebuffer memory 
```

有没有简单的方法来使用那个fb1？xrandr 不会看到附加的内容，因此它要么制作固定的多显示器固定 x.org 配置，要么可能（这可能吗？）在 /dev/fb2 上启动 xephyr/其他 X 服务器/特定应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T21:20:26.193

[http://www.smsc.com/Products/USB/USB_Graphics_Controllers/UFX7000/Download](http://www.smsc.com/Products/USB/USB_Graphics_Controllers/UFX7000/Download) 他们有一个链接下载他们的 xorg 驱动程序，试试看

# php - 检测用户平台

> ID：15794901
> 
> 赞同：0
> 
> 时间：2013-04-03T18:15:37.407
> 
> 标签：php, android, ios, css, html

我希望能够检测用户的平台并根据用户是使用手机还是计算机查看网站来加载内容。

最好我想使用 php include() 根据上述条件加载整个页面。CSS 将是下一个，尽管我更喜欢 php，因为我还希望移动版本的内容有所不同。

我基本上需要提供 2 个版本的网站：

1.  对于普通电脑
2.  对于手机浏览器

这是可行的还是我走上了一条死胡同。

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T18:23:41.310

使用 $_SERVER['HTTP_USER_AGENT'] 来检测 User-Agent 的内容。使用一组移动代理来识别您的“if mobile 语句”。

# html - 放大时不要模糊图像

> ID：15794902
> 
> 赞同：6
> 
> 时间：2013-04-03T18:15:40.370
> 
> 标签：html, css, image, blur, magnification

这不是一个可以得到*一个*正确答案的答案，但无论如何我都会问它：

是否可以放大或放大图像以使其不模糊？

例如，[这](http://codepen.io/anon/pen/JvBqf)不应该发生，像素不应该相互模糊，而是应该放大块像素。`maginification: block;`在 CSS 或 HTML 或 JS polyfill 中是否有类似或类似的东西？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-03T18:18:56.223

```
image-rendering: pixelated; 
```

但目前还不支持：

[https://developer.mozilla.org/en-US/docs/CSS/image-rendering#Browser_compatibility](https://developer.mozilla.org/en-US/docs/CSS/image-rendering#Browser_compatibility)

这些目前有效，但仅用于缩小规模：

```
 image-rendering: -moz-crisp-edges;         /* Firefox */
    image-rendering:   -o-crisp-edges;         /* Opera */
    image-rendering: -webkit-optimize-contrast;/* Webkit (non-standard naming) */
    image-rendering: crisp-edges;
    -ms-interpolation-mode: nearest-neighbor;  /* IE (non-standard property) */ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T18:32:34.230

这取决于图像的分辨率。如果您将图像放大到超过分辨率，它将变得模糊。一种解决方法是使用非常大的图像，但将其显示为较小的图像。因此，当您放大时，它会保持其质量（在一定程度上）。这个 jQuery 演示节目就是我想要解释的：

[http://webdesignfan.com/demos/imagezoom.html](http://webdesignfan.com/demos/imagezoom.html) - 图片显示尺寸：640x511

[http://webdesignfan.com/demos/image.jpg](http://webdesignfan.com/demos/image.jpg) - 实际图片尺寸：1712x1368

此示例允许您放大 2.5 倍以上而不会模糊。

希望这可以帮助。谢谢。

# performance - 更有效地循环遍历数组的哈希

> ID：15794904
> 
> 赞同：0
> 
> 时间：2013-04-03T18:15:46.067
> 
> 标签：performance, perl, optimization, hash, memory-efficient

我有一个数组哈希。这是循环通过它的最有效和最快的方法。

```
my %h1 = (
  C1 => ['3','1','2'],
  C2 => ['6','2','4'],
  C3 => ['8', '1'],
 ); 
```

**选项1**

```
foreach my $key ( keys %HoA )  {
    print "Articles in group $key are: ";
    foreach ( @{$HoA{$key}} )  {
    print "$_\n";
    }
} 
```

**选项 2**

```
while( my ($k, $v) = each %HoA ) {
    print "Articles in group $k are: @$v\n";   
} 
```

如果我要遍历一个巨大的 HoA，哪一个会节省我的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T15:46:06.663

据我了解，`keys`将预先构建所有哈希键的完整列表，这可能会导致大量内存用于大型哈希。我认为这是一个考虑点，因为你说你有一个巨大的 HoA。

对我来说，一些主要区别是有时您想要一个按值或数组元素数量排序的列表，我认为您无法控制返回的键值对的顺序`each`。因此，在您需要排序列表的情况下，我会使用`keys`. 如果您的哈希非常非常大并且您需要键和值但顺序并不重要，我会使用它，`each`因为它只返回两个元素的列表（您的键值对）。正如其他人所建议的那样，要考虑的另一件事是使用数据库，但这可能会根据数据的大小而产生成本。

我认为很难回答“`keys`比 快`each`？”这个问题。在不了解数据的情况下（并直接对其进行测试），但我认为回答“我应该使用`keys`还是`each`在这种情况下？”这个问题可能更容易。根据您的目标和“巨大的 HoA”的含义，我认为一种方法可能更有效并导致更好的性能，至少在内存方面。其他人可能对这个主题有不同的意见和经验，所以我会很感激任何反馈。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T18:26:18.830

使用`each`可能会更清晰，也可能会稍微快一点，但无论你怎么做，你都不会获得任何重要的东西。

```
while (my ($key, $val) = each %HoA) {
    print "Articles in group $key are: ";
    foreach ( @$val )  {
        print "$_\n";
    }
} 
```

# c# - Mono C# WinForms -> 在 Mac OSX 上运行时出现严重的性能问题

> ID：15794905
> 
> 赞同：7
> 
> 时间：2013-04-03T18:15:44.423
> 
> 标签：c#, winforms, performance, macos, mono

我有一个关于 C#、Mono 和 OSX 的问题。我已经使用 Windows 窗体在 C# 中创建了一个程序，并试图使其在 Mac 上可用。

问题是，OSX 上的性能非常差，我只是找不到加速它的方法。程序本身实际上非常简单：一个客户端服务器系统只使用两个 DataGridView、几个 ComboBox 和 Button、一个 TabControl、几个 SplitContainer——就是这样！在 Windows 上运行良好，没有任何速度问题。

当我在 Mac（MacBook Air，OSX 版本 10.8.3）上打开程序时，加载 GUI 需要很长时间。在 Windows 上构建它大约需要 0.5 秒，在 Mac 上大约需要一分钟（！）。所有控件的构建速度都非常慢，并且大多数情况下，当通过单击某个东西与程序交互时，它又需要至少 10 秒的响应时间。

我了解到 Mono 使用 Windows.System.Drawing 本地构建 GUI。这是程序响应极慢的可能原因吗？我可以做些什么来加快程序？必须有某种方法，因为如果 Mono 甚至不能用于这样一个简单的程序，那它就毫无用处了……

我花了几个小时试图用谷歌搜索我的问题的答案，但找不到任何有用的东西：AheadOfTime-Compiling、LLVM - 没有什么能提高性能。

非常感谢您提前回答！

克里斯

**更新：** 我现在稍微减少了性能问题。Mono 似乎对 Gridviews 的 CellFormating 有问题。我更改了适用部分的代码，它现在运行得更快了。

尽管如此，构建 GUI 仍然需要很长时间。您可以从字面上看它构建 GUI。对此有何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T20:43:25.287

加载时间很可能是 JIT 第一次编译您的代码（我的程序集也需要大约 30-60 秒才能第一次启动）；第二次运行你的程序应该加载得更快。在 Windows 上，Visual Studio 将 AOT 您的程序集作为编译的一部分，因此第一次启动很快。我相信缓慢的控制性能是由于字体渲染（它甚至不是好看的渲染）。最重要的是，[键盘处理被错误地实现](https://stackoverflow.com/questions/15285438/incorrect-missing-and-duplicate-keypress-events)了，因为 Mountain Lion，你还需要用户下载 XQuartz。

Mono 很有用，但它的 WinForms 实现却没有用。如果 OS X 支持对您很重要，您的选择如下：

1.  使用不同的工具包（GTK#、WX.Net 等）。
2.  `Cocoa Library`使用 XCode 和`PInvoke`C#构建一个DLL。

最安全的选择是后者，但如果您的需求很简单，那么使用不同的工具包可能会更容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T19:53:19.390

您将不得不在 Mac 或 Linux 上进行调试，以找出究竟是什么运行得如此糟糕。Mono 有一些非常慢的实现。虽然您看到 UI 缓慢的症状，但原因可能完全是另外一回事。

例如，在类似的情况下，我发现 XmlDocument 非常慢，因为我正在研究 UI 为何如此缓慢。如果您使用 XmlDocument 来存储来自服务器的数据，它可能会导致您的 UI 变慢并且几乎没有响应。

# jquery - jQuery 验证插件：只接受美国、加拿大和墨西哥的邮政编码？

> ID：15794913
> 
> 赞同：2
> 
> 时间：2013-04-03T18:16:10.863
> 
> 标签：jquery, jquery-validate, validation, zipcode

我想使用 jQuery 验证插件来验证仅接受美国、加拿大或墨西哥邮政编码格式的邮政编码字段，但似乎没有定义它的规则。我搜索了谷歌，但我没有发现任何有用的东西。

我必须只接受这些邮政编码格式：

美国：99999-9999 或 99999 加拿大：A9A 9A9 MX：99999

感谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T18:28:50.213

查看[`additional-methods.js`](http://ajax.aspnetcdn.com/ajax/jquery.validate/1.11.1/additional-methods.js)文件内部的各种邮政编码规则。您可以根据需要复制和调整它们。

```
jQuery.validator.addMethod("ziprange", function(value, element) {
    return this.optional(element) || /^90[2-5]\d\{2\}-\d{4}$/.test(value);
}, "Your ZIP-code must be in the range 902xx-xxxx to 905-xx-xxxx");

jQuery.validator.addMethod("zipcodeUS", function(value, element) {
    return this.optional(element) || /\d{5}-\d{4}$|^\d{5}$/.test(value);
}, "The specified US ZIP Code is invalid"); 
```

# ajax - Yii 中的数据表，使用 Ajax

> ID：15794914
> 
> 赞同：0
> 
> 时间：2013-04-03T18:16:12.567
> 
> 标签：ajax, yii, datatables

我正在尝试使用 Yii 的 EDatatables 扩展，特别想知道 ajaxUrl 应该指向哪里，以及一般来说我将如何实际处理 ajaxRequests？

数据表现在显示，但不会执行基于 ajax 的更新，例如尝试按列排序或搜索时。

根据[基本安装](https://code.google.com/p/edatatables/wiki/BasicUsage)页面，默认 url 为：

```
'ajaxUrl'       => Yii::app()->getBaseUrl().'/products/index', 
```

我假设这个 url 只是一个占位符，我打算改变它，但由于我是 Datatables 和 Yii 的新手，我不知道应该如何使用 Ajax。任何人都可以帮助解决这个问题或指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T23:20:42.583

只需使用：

```
Yii::app()->createUrl('controller/action',array('param'=>paramValue)) 
```

或者

```
Yii::app()->createUrl('module/controller/action',array('param'=>paramValue)) 
```

希望能帮助到你

# ruby-on-rails - ruby on rails PIK gemset 像 RVM gemset？

> ID：15794915
> 
> 赞同：1
> 
> 时间：2013-04-03T18:16:15.763
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rubygems, rvm, pik

我使用过 RVM，我可以在其中获得 gemset 和其他东西，但是没有办法用 PIK 获得它？任何想法？我试图寻找解决方案，但找不到。希望有人对这个问题有任何线索？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T18:32:22.217

参考下面的链接，我们可以在 Windows 上使用 pik 而不是 rvm 作为解决方法：

```
https://github.com/vertiginous/pik/issues/16#issuecomment-3515658 
```

如果有人感兴趣，我刚刚尝试了一个简单的解决方法。到目前为止，一切都很好...

```
cd %HOMEPATH%\.pik\rubies
xcopy /s Ruby-193-p0 Ruby-193-p0@<gemset-name> 
```

现在编辑 %HOMEPATH%.pik\config.yml，克隆您从中复制的条目并在适当的位置添加“@”：

```
"193: ruby 1.9.3p0 (2011-10-30) [i386-mingw32]": 
  :path: !ruby/object:Pathname 
    path: C:/Users/Nathan/.pik/rubies/Ruby-193-p0/bin
"193@<gemset-name>: ruby 1.9.3p0 (2011-10-30) [i386-mingw32]": 
   :path: !ruby/object:Pathname 
    path: C:/Users/Nathan/.pik/rubies/Ruby-193-p0@<gemset-name>/bin 
```

然后在命令行...

```
pik list

* 193: ruby 1.9.3p0 (2011-10-30) [i386-mingw32]
  193@<gemset-name>: ruby 1.9.3p0 (2011-10-30) [i386-mingw32]

pik switch 193@<gemset-name>

pik list
  193: ruby 1.9.3p0 (2011-10-30) [i386-mingw32]
* 193@<gemset-name>: ruby 1.9.3p0 (2011-10-30) [i386-mingw32] 
```

而已！当然，YMMV。如果您在此 hack 上改进了这一点，请回帖！

这可能对您有用。

# javascript - 在 asp.net 中使用 decodeURIComponent

> ID：15794918
> 
> 赞同：2
> 
> 时间：2013-04-03T18:16:22.197
> 
> 标签：javascript, asp.net

我使用 javascript 编码了一个 html 文本属性并将其传递到我的数据库中。我的意思是像“Wales&PALS”这样的字符串的javascript

```
encodeURIComponent(e.value); 
```

转换为“威尔士%20PALS”

我想将它从 asp.net 转换回“Wales&PALS”。关于如何嵌入的任何想法

```
decodeURIComponent(datatablevalues) 
```

在我的 asp.net 函数中返回所需的文本？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T18:46:22.657

作为 SQL 注入的预防措施，我们使用参数化查询或存储过程。编码并不真正适合那个。如果您希望您的用户向您的网站添加内容并且您希望防止他们注入恶意 javascript，那么 Html 编码是很好的选择。通过对字符串进行编码，浏览器只会打印出内容。您所做的是对字符串进行编码，将其添加到数据库中，然后尝试将其解码回原始状态并将其显示给客户端。这样你就容易受到多种 javascript 注入的攻击。

如果那是您的意图，没问题，请注意后果。每次做出这样的决定时，都要知道“为什么”和“如何”。这有点危险。

例如，如果您想让您的用户添加 html 标签作为增强插入内容的一种方式，一个更安全的替代方法是创建您自己的标签集（或使用现有的标签集，如 BBCode），因此输入从不包含任何 html 标记，当您将其插入数据库时​​，只需先解析它以切换到真正的 html 标记。Asp.net 引擎绝不会在请求期间允许恶意输入（除非您自愿强制这样做），并且由于您已经控制了解析输入，因此您可以确保在输出时它是安全的，因此不需要进行一些额外的处理。

只是给你一个想法:)

如果你真的坚持按你的方式做（编码 -> 数据库 -> 解码 -> 输出），我们有一些选项可以做到这一点。我给你看一个例子：

例如，您可以创建一个新的 get-only 属性，它将返回您的解码数据。（如果需要，您仍将保留原始编码数据）。像这样的东西：

```
public string DecodedData
{
   get
   {
       return HttpUtility.UrlDecode(originalData);
   }
} 
```

[http://msdn.microsoft.com/en-us/library/system.web.httputility.aspx](http://msdn.microsoft.com/en-us/library/system.web.httputility.aspx)

如果您尝试对 html 输入进行编码，则最好使用不同的编码机制。不确定javascripts`encodeURIComponent`是否可以正确解析出html。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T18:19:23.143

在 HttpServerUtility 中尝试 UrlDecode。[它的 API 页面](http://msdn.microsoft.com/en-us/library/6196h3wt.aspx)

# .net - 我想探索属性作为品牌的手段。如何创建/使用自己的属性

> ID：15794923
> 
> 赞同：0
> 
> 时间：2013-04-03T18:16:37.453
> 
> 标签：.net, asp.net-mvc-4, custom-attributes

在 MVC 中，您可以使用 Html 助手可以读取的值来装饰属性。例如 Html.LabelFor() 读取属性的显示属性。我想知道，是否有可能做到这一点以获得完整的价值？我正在探索通过使用属性来控制品牌信息的可能性。这是我的设想：

```
[Branded]
public string Greeting { get; set; } 
```

然后当该属性被读出时，该属性将运行并通过其他一些机制提取品牌信息。我认为我走这条路的原因是我们需要能够品牌化并提供本​​地化。所以它最终可能会做这样的事情

```
[Localized]
[Branded]
public string Greeting { get; set; } 
```

[Localized] 从资源文件加载信息，而不是在视图中拉取信息。这样做的原因是我们不想在整个会话中传递 ResourceManager，一旦实现，这对管理器来说可能会更干净。

我敢肯定这已经让人们畏缩了，但我还是想探索一下。所以我想知道是否有人可以为我指出正确的方向或提供任何与 MVC4 中的品牌相关的经验。

更新：

好的，既然我遵循了下面关于创建属性的一些回答，我对我的问题的真正含义有了更好的了解，所以让我澄清一下：

我创建了一个属性，我可以在视图模型中使用属性名称来装饰属性，该属性可以存储为资源，也可以通过其他方式来适应信息品牌。所以下一步就是把它放到视图中。那么如何将该注释拉到视图中呢？我正在考虑扩展，所以它会是这样的：

视图模型

```
[Branded("greeting")] // this creates a string property called "Value" 
public string Greeting { get; set; } 
```

看法

```
@Html.BrandedFor(m => m.Greeting) //this should actually read from BrandedAttribute.Value on this property 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T18:31:39.947

您对如何创建自定义属性有疑问吗？如果是这样，您需要做的就是从 Attribute 类继承。

```
using System;
[AttributeUsage(AttributeTargets.Class|AttributeTargets.Struct)]
public class Person : Attribute
{
   public Person(string name) { this.name = name; }
   public int age;
   string name;
} 
```

如果您想要的是自定义 html 帮助程序，那么您可以创建如下内容：

```
public static MvcHtmlString CustomLabel(this HtmlHelper html, string expression)
{
    return MvcHtmlString.Create("<label>" + expression +  + "</label>");
} 
```

并像这样使用它：

```
 @Html.CustomLabel(m => m.Name); 
```

# jsf-2 - jsf 中的 jQuery draggable()、resizable() 不能完美运行

> ID：15794928
> 
> 赞同：1
> 
> 时间：2013-04-03T18:16:59.587
> 
> 标签：jsf-2, richfaces, jquery-ui-draggable, jquery-ui-resizable

我在使用 jQuery 时遇到问题：resizable() 和可拖动。当我在数据表上移动 div 时效果很好，当我也调整大小时，但在调整大小后，如果拖动 div，它会在顶部移动 1px，在左侧移动 1px。我可以从页面顶部的容器 div 执行此操作。rich:dataTable 上的 div 是从带有 h:outputtext/escape=false 的 jsf 生成的
我已经考虑过这个错误：[http](http://bugs.jqueryui.com/ticket/4696) ://bugs.jqueryui.com/ticket/4696和这个[http://bugs.jquery.com /ticket/2793](http://bugs.jquery.com/ticket/2793)并且我已经应用了补丁
这是我的 xhtml 代码：

```
 <?xml version="1.0" encoding="UTF-8"?>
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
 <html xmlns="http://www.w3.org/1999/xhtml"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:rich="http://richfaces.org/rich"
xmlns:a4j="http://richfaces.org/a4j"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:ui="http://java.sun.com/jsf/facelets">
  <h:head>
<title>TC</title>
<h:outputScript name="jsf.js" library="javax.faces" />
<h:outputScript name="jquery.js" />
<script type="text/javascript"
    src="resources/js/jquery-ui-1.10.1.custom.js" />
<h:outputScript library="js" name="jquery.json-2.4.js" />

<style type="text/css">
 .ui-resizable {
position: relative;
 }

 .ui-resizable-handle {
position: absolute;
font-size: 0.1px;
z-index: 99999;
display: block;
 }

 .ui-resizable-e {
cursor: e-resize;
width: 2px;
right: 0;
top: 0;
height: 100%;
background-color: black;
 }

</style>
</h:head>
<h:body>

<a4j:outputPanel rendered="false">
    <rich:dataTable/>
</a4j:outputPanel>

<h:form id="formulario">

    <script type="text/javascript"> 

   function extenderHoras(div, index){
var contenedor = '#'+div.id;
var left = jQuery(contenedor).css("left");
var contenedorPadre = jQuery(contenedor).parent();
var padreDePadre = jQuery(contenedorPadre).parent();
var cantidadHijos = contenedorPadre[0].childElementCount;
jQuery(document).mousemove(function(e){
       window.mouseXPos = e.pageX;
       window.mouseYPos = e.pageY;
    }); 

jQuery(contenedor).droppable({
    accept: ".ui-draggable-dragging",
    tolerance: 'pointer'
    }).resizable({
    handles: 'e', 
    minWidth: 41,
    grid: [ 41, 0 ], 
    containment: contenedorPadre,
    stop: function(event, ui) { 
        if(!index){
            //Si no tiene index 
            var divArray = new Array();
            var colorDiv = div.style.background;
            var idPadreDePadre = padreDePadre[0].id;
            var fila = idPadreDePadre.split(':');
            index = fila[2];//Obtenemos el index

            var cantidadHijosDiv = contenedorPadre[0].childElementCount; //Obtenemos Todos los hijos que se tiene en la fila
            cantidadHijosDiv = cantidadHijosDiv - 1; //La lista es empieza desde 0 se le quita un elemento (tamaño -1)
            var sumaTotalDiv = 0;
            if(cantidadHijosDiv==0){//Si solo tiene un hijo obtenemos el tamaño de ese hijo para ponerlo como margen del div que estamos colocando
                sumaTotalDiv = contenedorPadre[0].children[cantidadHijosDiv].style.width;
                sumaTotalDiv = sumaTotalDiv.replace('px','');
            }else{//Si tiene más de un hijo tenemos que recorrer el arreglo y sumar el tamaño de todos los div 
                for(var i = 0; i &lt;= cantidadHijosDiv; i++){
                    var ancho = contenedorPadre[0].children[i].style.width;
                    sumaTotalDiv = sumaTotalDiv + parseInt(ancho.replace('px',''));
                }
            }
            var leftUbicacion = sumaTotalDiv * -1;
            var csstxt = jQuery(div.id).css('cssText') + ';top:0;left:'+leftUbicacion+' px;background-color:'+colorDiv+';height:'+ui.element.height()+'; width:'+ui.element.width()+';float:left;margin-left:'+sumaTotalDiv;
            jQuery(div.id).css('cssText', csstxt);
        } else {
            jQuery(contenedor).css({
                'width': ui.element.width(),
                'height': ui.element.height(),
                'top': ui.element[0].style.top,
                'left': ui.element[0].style.left,
                'float': 'left',
                position: 'absolute'
            });
        };
        var divArray = [{
                "id":ui.element[0].id,
                "width":ui.element[0].style.width,
                "height":ui.element[0].style.height,
                "top":ui.element[0].style.top,
                "left":ui.element[0].style.left,
                "right":ui.element[0].style.right,
                "top":ui.element[0].style.top,
                "backgroundColor":ui.element[0].style.background
        }];

        var json = jQuery.toJSON(divArray);
        convertirJson(json, index);
    }
}).draggable({
    containment: contenedorPadre,
    grid: [ 41, 0 ],
    revert: 'valid',
    stop: function(event, ui) {

        if(!cantidadHijos){
            //Si no tiene hijos que no haga nada, por si lo coloca en otro lado que no sea la tabla
        } else {

        }
    }
}).removeClass("ui-draggable");
}

function arrastrarALado(div){
var contenedor = '#'+div.id;
var colorDiv = div.style.background;
jQuery(contenedor).draggable({
    helper: 'clone',
    revert: 'valid',
    stop: function(event, ui) {
        var elem = document.elementFromPoint(event.pageX, event.pageY);
        event.stopPropagation();
        var tag = elem.tagName;
        var cantidadHijosDiv = elem.childElementCount; //Obtenemos Todos los hijos que se tiene en la fila
        cantidadHijosDiv = cantidadHijosDiv - 1; //quitamos un elemento men la lista es (tamaño -1)
        var sumaTotalDiv = 0;
        if(cantidadHijosDiv==0){//Si solo tiene un hijo obtenemos el tamaño de ese hijo para ponerlo como margen del div que estamos colocando
            sumaTotalDiv = elem.children[cantidadHijosDiv].style.width;
            sumaTotalDiv = sumaTotalDiv.replace('px','');
        }
        else{//Si tiene más de un hijo tenemos que recorrer el arreglo y sumar el tamaño de todos los div 
            for(var i = 0; i &lt;= cantidadHijosDiv; i++){
                var ancho = elem.children[i].style.width;
                sumaTotalDiv = sumaTotalDiv + parseInt(ancho.replace('px',''));
            }
        }
        var divHijo = elem.children[cantidadHijosDiv];//Obtenemos el último hijo de la lista
        if(!divHijo){//Si es undefined no tiene hijos o ha puesta fuera de la barra - Propenso a cambios
            alert('No puede colocar la barra aquí');
        } else if(divHijo.tagName=='TH'){//Si el hijo 
            alert('No puede colocar la barra aquí');
        } 
        else if(divHijo.tagName=='SPAN'){//Si el hijo es un SPAN es que crea richfaces
            var divHijo = elem.children[cantidadHijosDiv+1];//obtenemos el siguiente hijo, solo ocurre en el caso de que sea el span padre
            divHijo = divHijo.id;
        } else {//Si no usamos el nombre del ultimo div
            divHijo = divHijo.id;
        }
        if(tag == 'TD'){
            var leftUbicacion = sumaTotalDiv * -1;
            var divNuevo = divHijo+cantidadHijosDiv+div.id;
            //Implementando cssText de Jquery ya que no se puede insertar el estilo de forma normal al crear el div, tengo que agregarlo  
            var csstxt = jQuery('#'+divNuevo).css('cssText') + ';top:0;left:'+leftUbicacion+' !important;background-color:'+colorDiv+';height:25px; width:82px;float:left;margin-left:'+sumaTotalDiv;
            jQuery('<div/>', {
                    id: divNuevo, //obtenemos el ultimo hijo, luego le ponemos la cantidad y el id del div que estoy arrastrando
                    //onmousedown: 'arrastrarBarra(this);',
                    onmouseover: 'extenderHoras(this);'
            }).appendTo(elem);
            jQuery('#'+divNuevo).css('cssText', csstxt);
        } 
    }
});
}

</script>
    <a4j:jsFunction name="convertirJson" 
        action="#{pruebasmb.obtenerDiv()}" >
        <a4j:param name="divArray" assignTo="#{pruebasmb.divJSON}" ></a4j:param>
        <a4j:param name="index" assignTo="#{pruebasmb.indexPersonaSeleccionada}"></a4j:param>
    </a4j:jsFunction>

<div id="contenedores" style="width: 600px; height: 30px; background-color: #f0f0f0; ">
<div id="divBlue" style="width: 82px; height: 25px; background-color: blue; float: left; "  onmouseover="arrastrarALado(this);"></div>
<div id="divRojo" style="width: 82px; height: 25px; background-color: red; float: left; "  onmouseover="arrastrarALado(this);"></div>
<div id="divVerde" style="width: 82px; height: 25px; background-color: green; float: left; "  onmouseover="arrastrarALado(this);"></div>
</div>

    <a4j:commandButton action="#{pruebasmb.llenarlista()}"
        value="Llenar lista" render="dataTablePersonas"></a4j:commandButton>

    <br />
    <br />
    <a4j:outputPanel ajaxRendered="false">
        <rich:dataTable var="persona" value="#{pruebasmb.personas}" 
            id="dataTablePersonas" rowKeyVar="index">

            <f:facet name="header">
                <rich:columnGroup>
                    <rich:column rowspan="2" >
                        <h:outputText value="Persona" style="padding: 0px;" />
                    </rich:column>
                    <rich:column colspan="24" style="padding: 0px;">
                        <h:outputText value="Horas" />
                    </rich:column>
                    <rich:column breakRowBefore="true"
                        style="width: 40px; padding: 0px;">
                        <h:outputText value="00h00" />
                    </rich:column>
                    <rich:column style="width: 40px; padding: 0px;">
                        <h:outputText value="00h30" />
                    </rich:column>
                    <rich:column style="width: 40px; padding: 0px;">
                        <h:outputText value="01h00" />
                    </rich:column>
                    <rich:column style="width: 40px; padding: 0px;">
                        <h:outputText value="01h30" />
                    </rich:column>
                    <rich:column style="width: 40px; padding: 0px;">
                        <h:outputText value="02h00" />
                    </rich:column>
                    <rich:column style="width: 40px; padding: 0px;">
                        <h:outputText value="02h30" />
                    </rich:column>
                    <rich:column style="width: 40px; padding: 0px;">
                        <h:outputText value="03h00" />
                    </rich:column>
                    <rich:column style="width: 40px; padding: 0px;">
                        <h:outputText value="03h30" />
                    </rich:column>
                    <rich:column style="width: 40px; padding: 0px;">
                        <h:outputText value="04h00" />
                    </rich:column>
                    <rich:column style="width: 40px; padding: 0px;">
                        <h:outputText value="04h30" />
                    </rich:column>
                    <rich:column style="width: 40px; padding: 0px;">
                        <h:outputText value="05h00" />
                    </rich:column>
                    <rich:column style="width: 40px; padding: 0px;">
                        <h:outputText value="05h30" />
                    </rich:column>
                    <rich:column style="width: 40px; padding: 0px;">
                        <h:outputText value="06h00" />
                    </rich:column>
                    <rich:column style="width: 40px; padding: 0px;">
                        <h:outputText value="06h30" />
                    </rich:column>
                    <rich:column style="width: 40px; padding: 0px;">
                        <h:outputText value="07h00" />
                    </rich:column>
                    <rich:column style="width: 40px; padding: 0px;">
                        <h:outputText value="07h30" />
                    </rich:column>
                    <rich:column style="width: 40px; padding: 0px;">
                        <h:outputText value="08h00" />
                    </rich:column>
                    <rich:column style="width: 40px; padding: 0px;">
                        <h:outputText value="08h30" />
                    </rich:column>
                    <rich:column style="width: 40px; padding: 0px;">
                        <h:outputText value="09h00" />
                    </rich:column>
                    <rich:column style="width: 40px; padding: 0px;">
                        <h:outputText value="09h30" />
                    </rich:column>
                    <rich:column style="width: 40px; padding: 0px;">
                        <h:outputText value="10h00" />
                    </rich:column>
                    <rich:column style="width: 40px; padding: 0px;">
                        <h:outputText value="10h30" />
                    </rich:column>
                    <rich:column style="width: 40px; padding: 0px;">
                        <h:outputText value="11h00" />
                    </rich:column>
                    <rich:column style="width: 40px; padding: 0px;">
                        <h:outputText value="11h30" />
                    </rich:column>
                </rich:columnGroup>
            </f:facet>

            <rich:column>
                <h:outputText  value="#{persona.apellido}" />
            </rich:column>

            <rich:column colspan="24" style="padding: 0px; height:25px; position: relative;" >
    <h:outputText  value="#{pruebasmb.divDefault.get(index)}" escape="false" />
            </rich:column>
        </rich:dataTable>
    </a4j:outputPanel>
</h:form>

</h:body>
</html> 
```

普鲁巴豆

```
 import java.awt.Color;
 import java.io.Serializable;
 import java.lang.reflect.Type;
 import java.util.ArrayList;
 import java.util.List;

 import javax.faces.bean.ManagedBean;
 import javax.faces.bean.SessionScoped;

 import com.google.gson.Gson;
 import com.google.gson.reflect.TypeToken;

    @ManagedBean(name = "pruebasmb")
    @SessionScoped
    public class PruebasMB implements Serializable {

private static final long serialVersionUID = 2290961655122569612L;
private List<Persona> personas = new ArrayList<Persona>();
private String valorDelSlider;
private String celdaClickeada;
private String estiloBarra;
private String indexPersonaSeleccionada;
private EstilosCss estilos = new EstilosCss();
private List<String> divDefault = new ArrayList<String>();
private String divJSON;

public void llenarlista() {
    divDefault.clear();
    personas.clear();
    for (int i = 1; i <= 10; i++) {
        Integer horasTrabajadas;
        // Para generar un temporal de las horas trabajadas aleatoriamente
        horasTrabajadas = (int) Math.round((Math.random() * 16));
        if (horasTrabajadas == 0)
            horasTrabajadas = 1;
        else
            horasTrabajadas = horasTrabajadas * 41;
        estiloBarra = estilos.generarEstilo(horasTrabajadas.toString(), "25", "yellow", "0", "0", "0", "0", "0", "0", "left", null, null);
        Persona p = new Persona("nombre" + i, "apellido" + i, i + 20, "Calle J y la " + i, estiloBarra, horasTrabajadas, (i/2));
        generarBarras(p, horasTrabajadas, i);
        personas.add(p);
    }
}

public void obtenerDiv(){
    Gson gson = new Gson();

    Type type = new TypeToken<List<Div>>(){}.getType();
    List<Div> div = gson.fromJson(divJSON.toString(), type);

    Integer index = Integer.valueOf(indexPersonaSeleccionada);
    if(index==null){
        index=0;
    }

    valorDelSlider = div.get(0).getWidth().replace("px", "");
    System.out.println("Width: "+div.get(0).getWidth());

    Integer valor = Integer.valueOf(valorDelSlider);
    int valorTemporal = valor;
    int horasTrabajadas = personas.get(index).getHorasTrabajadas();
    if (horasTrabajadas == 1) {
        valor = valor - 1;
        valorTemporal = valorTemporal - 1;
        valor = valor / 82;
    } else
        valor = valor / 82;
    if ((valorTemporal % 82) > 0) {
        System.out.println("El total de horas es " + valor + " y media ");
    } else
        System.out.println("Ha realizado " + valor + " horas");
    System.out.println(valor * 82);
    estiloBarra = "left: 0px; background-color: yellow; height: 25px; width: " + (valor * 82) + "px; top: 0px !important; float: left;";
    personas.get(index).setEstiloUsuario(estiloBarra);
}

public void generarBarras(Persona p, Integer horasTrabajadas, Integer i) {
    Integer horasSegundoDiv=0;

    String rgb="";
    String estiloBarra2 ="";
    String div ="";

    for(int j = 0; j<= 2; j ++){

        horasSegundoDiv = (int) Math.round((Math.random() * 16));
        if (horasSegundoDiv == 0)
            horasSegundoDiv = 1;
        else
            horasSegundoDiv = horasSegundoDiv * 41;

        rgb = Color2Hex();
        estiloBarra2 = estilos.generarEstilo(horasSegundoDiv.toString(), "25", rgb, "0", "0", "0", "0", "0", "0", "left", null, null);
        div = div + "<div id='nombrediv" + i+"_"+j + "' style='" + estiloBarra2 + "' onmouseover='extenderHoras(this," + (i) + ");'> </div>";
    }
    divDefault.add(div);
}

/**
 * Se genera un color al azar en rgb y se convierte a hexadecimal
 * 
 * @return Color en hexadecimal
 */
public String Color2Hex() {
    int R = (int) Math.round((Math.random() * 256));
    int G = (int) Math.round((Math.random() * 256));
    int B = (int) Math.round((Math.random() * 256));
    Color c = new Color(R, G, B);
    String rgb = Integer.toHexString(c.getRGB() & 0xffffff);
    if(rgb.length()<6)
        rgb = "0"+rgb;
    return "#"+rgb;
}

         //getter and setter
        } 
```

和 Estilos.css 我在其中生成 div 的样式

```
 import java.io.Serializable;

    public class EstilosCss implements Serializable {

private static final long serialVersionUID = -1279423720796129516L;
private String width;
private String height;
private String backgroundColor;
private String leftMargin;
private String rightMargin;
private String left;
private String right;
private String top;
private String bottom;
private String floatEstilo;
private String gradientColor1;
private String gradientColor2;

public String generarEstilo(String width, String height, String backgroundColor, String leftMargin, String rightMargin, String left, String right,
        String top, String bottom, String floatEstilo, String gradientColor1, String gradientColor2) {

    String estilo = "";
    estilo = "width:" + width + "px; height:" + height + "px; background-color:" + backgroundColor + "; left-margin:" + leftMargin
    + "px; right-margin:" + rightMargin + "px; left:" + left + "px; right:" + right + "px; top:" + top + "px; bottom:" + bottom + "px; float:"+floatEstilo+" !important;";

    //Si ingresa los colores del gradient del div
    if(gradientColor1!=null&&gradientColor2!=null){
        estilo = estilo + "background-image: -ms-linear-gradient(bottom, "+gradientColor1+" 0%, "+gradientColor2 +" 100%);";
        estilo = estilo + "background-image: -moz-linear-gradient(bottom, "+gradientColor1+" 0%, "+gradientColor2 +" 100%);";
        estilo = estilo + "background-image: -o-linear-gradient(bottom, "+gradientColor1+" 0%, "+gradientColor2 +" 100%);";
        estilo = estilo + "background-image: -webkit-gradient(linear, left bottom, left top, color-stop(0, "+gradientColor1+"),  color-stop(1,"+gradientColor2 +"));";
        estilo = estilo + "background-image: -webkit-linear-gradient(bottom, "+gradientColor1+" 0%, "+gradientColor2 +" 100%);";
        estilo = estilo + "background-image: linear-gradient(to top, "+gradientColor1+" 0%, "+gradientColor2 +" 100%);";
        estilo = estilo + "filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='"+gradientColor1+"', endColorstr='"+gradientColor2 +"');";
    }

    return estilo;
}

     //getter and setter

         } 
```

# jquery - jQuery 选择某些 html 内容

> ID：15794935
> 
> 赞同：0
> 
> 时间：2013-04-03T18:17:27.407
> 
> 标签：jquery

我正在使用此`.children()`选择器在两个`<div>s`.

1.  类以“out_”开头的表

2.  id 等于“chart1”的图表

因此，我使用了以下 jQuery 语句。

```
var jq_html = $("div.articles_output").children("table[class*=out_]:not(div#chart1,table:hidden)").clone().html(); 
```

HTML

```
<div class="articles_output">
        <h2 class="model_header">IEC Output</h2>
    <form>
        <table align="center">
            <!--end 04uberoutput_start-->
            <table width="600" border="1" class="out_1">
                <tr>
                    <th width="300" scope="col">User Inputs</th>
                    <th width="300" scope="col">Values</th>
                </tr>
                <tr>
                    <td>LC50 or LD50</td>
                    <td>33.00</td>
                </tr>
            </table>
            <p>&nbsp;</p>
            <table width="600" border="1" class="out_2">
                <tr>
                    <th width="300" scope="col">IEC Outputs</th>
                    <th width="300" scope="col">Values</th>
                </tr>
                <tr>
                    <td>Z Score</td>
                    <td>5.95</td>
                </tr>
            </table>
            <table width="600" border="1" class="out_2" style="display:none">
                <tr>
                    <th width="300" scope="col">IEC Outputs</th>
                    <th width="300" scope="col">Values</th>
                </tr>
                <tr>
                    <td>Z Score</td>
                    <td>5.95</td>
                </tr>
            </table>
        </table>
        <div id="chart1" style="margin-top:20px; margin-left:20px; width:650px; height:400px;"></div>
        <div id="chart1" style="margin-top:20px; margin-left:20px; width:650px; height:400px;"></div>
    </form>
</div> 
```

我意识到我的`.children`论点有问题。那么有人可以给我一些建议吗？这是[演示](http://jsfiddle.net/godhong/wVnwg/)。

## 更新

我想我找到了导致问题的地方。但是不知道怎么解决。如果我删除了`form`标签。然后我的 jQuery 语句将起作用。[演示](http://jsfiddle.net/godhong/wVnwg/51/)

# android - android登录到mysql，空白登录错误

> ID：15794936
> 
> 赞同：0
> 
> 时间：2013-04-03T18:17:29.163
> 
> 标签：android, sqlite

嘿，我正在将 android 与 mysql 连接，但该应用程序也接受空白登录..所以，没有名称和密码，但仍然登录..使用 eclipse android 2.2 我正在按照本[教程](http://www.androidhive.info/2012/01/android-login-and-registration-with-php-mysql-and-sqlite/)工作，这 一切都得到了解释并且有效，但似乎没有人注意到这一点而且我在android编程方面不太好，所以我自己无法解决这个问题

这是我的代码，我在最后添加了 userFunction.loginUser 方法有人帮忙吗？

```
 package com.app.app;

        import java.util.HashMap;

        import org.json.JSONException;
        import org.json.JSONObject;

        import android.app.Activity;
        import android.content.Intent;
        import android.os.Bundle;
        import android.util.Log;
        import android.view.View;
        import android.widget.Button;
        import android.widget.EditText;
        import android.widget.TextView;

        import com.app.app.library.DatabaseHandler;
        import com.app.app.library.UserFunctions;
        import com.app.app.R;

        public class LoginActivity extends Activity {
            Button btnLogin;
            Button btnLinkToRegister;
            EditText inputEmail;
            EditText inputPassword;
            TextView loginErrorMsg;
            // JSON Response node names
            private static String KEY_SUCCESS = "success";
            private static String KEY_ERROR = "error";
            private static String KEY_ERROR_MSG = "error_msg";
            private static String KEY_UID = "uid";
            private static String KEY_NAME = "name";
            private static String KEY_EMAIL = "email";
            private static String KEY_CREATED_AT = "created_at";

            @Override
            public void onCreate(Bundle savedInstanceState) {
                super.onCreate(savedInstanceState);
                setContentView(R.layout.login);

                // Importing all assets like buttons, text fields
                inputEmail = (EditText) findViewById(R.id.loginEmail);
                inputPassword = (EditText) findViewById(R.id.loginPassword);
                btnLogin = (Button) findViewById(R.id.btnLogin);
                btnLinkToRegister = (Button) findViewById(R.id.btnLinkToRegisterScreen);
                loginErrorMsg = (TextView) findViewById(R.id.login_error);

                // Login button Click Event
                btnLogin.setOnClickListener(new View.OnClickListener() {

                    public void onClick(View view) {
                        String email = inputEmail.getText().toString();
                        String password = inputPassword.getText().toString();
                        UserFunctions userFunction = new UserFunctions();
                        Log.d("Button", "Login");
                        JSONObject json = userFunction.loginUser(email, password);

                        // check for login response
                        try {
                            if (json.getString(KEY_SUCCESS) != null) {
                                loginErrorMsg.setText("");
                                String res = json.getString(KEY_SUCCESS); 
                                if(Integer.parseInt(res) == 1){
                                    // user successfully logged in
                                    // Store user details in SQLite Database
                                    DatabaseHandler db = new DatabaseHandler(getApplicationContext());
                                    JSONObject json_user = json.getJSONObject("user");

                                    // Clear all previous data in database
                                    userFunction.logoutUser(getApplicationContext());
                                    db.addUser(json_user.getString(KEY_NAME), json_user.getString(KEY_EMAIL), json.getString(KEY_UID), json_user.getString(KEY_CREATED_AT));                        

                                    // Launch Dashboard Screen
                                    Intent dashboard = new Intent(getApplicationContext(), DashboardActivity.class);

                                    // Close all views before launching Dashboard
                                    dashboard.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                                    startActivity(dashboard);

                                    // Close Login Screen
                                    finish();
                                }else{
                                    // Error in login
                                    loginErrorMsg.setText("Incorrect username/password");
                                }
                            }
                        } catch (JSONException e) {
                            e.printStackTrace();
                        }
                    }
                });

                // Link to Register Screen
                btnLinkToRegister.setOnClickListener(new View.OnClickListener() {

                    public void onClick(View view) {
                        Intent i = new Intent(getApplicationContext(),
                                RegisterActivity.class);
                        startActivity(i);
                        finish();
                    }
                });

        and this my sql part of login 
```

在这里

```
 /**
     * function make Login Request
     * @param email
     * @param password
     * */
    public JSONObject loginUser(String email, String password){
        // Building Parameters
        List<NameValuePair> params = new ArrayList<NameValuePair>();
        params.add(new BasicNameValuePair("tag", login_tag));
        params.add(new BasicNameValuePair("email", email));
        params.add(new BasicNameValuePair("password", password));
        JSONObject json = jsonParser.getJSONFromUrl(loginURL, params);
        // return json
        // Log.e("JSON", json.toString());
        return json;
    }

    /**
     * function make Login Request
     * @param name
     * @param email
     * @param password
     * */
    public JSONObject registerUser(String name, String email, String password){
        // Building Parameters
        List<NameValuePair> params = new ArrayList<NameValuePair>();
        params.add(new BasicNameValuePair("tag", register_tag));
        params.add(new BasicNameValuePair("name", name));
        params.add(new BasicNameValuePair("email", email));
        params.add(new BasicNameValuePair("password", password));

        // getting JSON Object
        JSONObject json = jsonParser.getJSONFromUrl(registerURL, params);
        // return json
        return json;
    }

    /**
     * Function get Login status
     * */
    public boolean isUserLoggedIn(Context context){
        DatabaseHandler db = new DatabaseHandler(context);
        int count = db.getRowCount();
        if(count > 0){
            // user logged in
            return true;
        }
        return false;
    } 
```

# java - 与 Java 交互时的 Scala 类型/集合，反之亦然

> ID：15794937
> 
> 赞同：0
> 
> 时间：2013-04-03T18:17:33.463
> 
> 标签：java, scala, jvm, scala-collections, scala-java-interop

当与 java 中的 scala 库或 scala 中的 java 库交互时，是否存在某些类型或集合不能有效映射，因此您必须执行“昂贵”操作才能执行转换？

例如，在记忆方面，您可能需要保存 2 个集合的副本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T19:59:38.823

好吧，这取决于你想如何处理它——如果你使用 Scala 的 Java 类的 API 或其他方式，没有运行时开销，但你会付出便利成本。

当您使用[JavaConversions](http://www.scala-lang.org/api/current/index.html#scala.collection.JavaConversions%24)通过 Scala API 或其他方式访问 Java 集合时，您需要为转换支付少量成本（创建 Wrapper 对象），但永远不会复制底层集合。

[你可以在这里](https://github.com/scala/scala/tree/v2.10.1/src/library/scala/collection/convert)检查所有这些的代码，就像 Scala 标准库一样，它都非常易读且易于理解。

# c++ - C++ 有效地从用户定义结构的向量中提取子集

> ID：15794939
> 
> 赞同：2
> 
> 时间：2013-04-03T18:17:43.917
> 
> 标签：c++, boost, std

让我先声明一下，我的大部分背景都是函数式编程语言，所以我对 C++ 相当陌生。

无论如何，我正在处理的问题是我正在解析具有多种变量类型的 csv 文件。数据中的示例行如下所示：

```
"2011-04-14 16:00:00, X, 1314.52, P, 812.1, 812"
"2011-04-14 16:01:00, X, 1316.32, P, 813.2, 813.1"
"2011-04-14 16:02:00, X, 1315.23, C, 811.2, 811.1" 
```

所以我所做的是定义了一个存储每一行​​的结构。然后这些中的每一个都存储在 std::vector<mystruct> 中。现在说我想通过第 4 列将这个向量子集化为两个向量，其中每个包含 P 的元素都在一个向量中，而 C 在另一个向量中。

现在我给出的例子已经相当简化了，但实际问题涉及到多次子集。

我最初的幼稚实现是遍历整个向量，创建由新向量定义的各个子集，然后对这些新创建的向量进行子集化。也许更节省内存的方法是创建一个索引，然后将其缩小。

现在我的问题是，就速度/内存使用而言，是否有更有效的方法来执行此操作，或者通过这个 std::vector< mystruct > 框架，或者是否有更好的数据结构来处理这种类型的事情。

谢谢！

编辑：

基本上我想要的输出是前两行和最后一行。另一件值得注意的事情是，通常数据集不像示例那样排序，因此 Cs 和 Ps 没有分组在一起。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T18:34:44.130

我为此使用了[std::partition](http://www.cplusplus.com/reference/algorithm/partition/)。不过，这不是提升的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T18:36:19.667

如果您想要一个允许您在不同实例之间廉价移动元素的数据结构，那么您正在寻找的数据结构就是`std::list<>`它的`splice()`函数系列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T22:10:15.647

我知道您这样做本身并没有麻烦，但您似乎担心内存使用和性能。

根据结构的大小和 csv 文件中的条目数，如果您不需要修改分区数据以便`mystruct`不复制对象，则建议使用智能指针：

```
typedef std::vector<boost::shared_ptr<mystruct> > table_t;
table_t cvs_data; 
```

如果您使用 std::partition （如另一张海报所建议的那样），您需要定义一个谓词，该谓词采用 in 的间接性`shared_ptr`。

# groovy - Groovy 获取当前方法注解

> ID：15794940
> 
> 赞同：2
> 
> 时间：2013-04-03T18:17:45.580
> 
> 标签：groovy, geb

我为我的注释创建了一个 java 接口。我现在正在编写一个 geb spock 测试，我想打印注释值，以便它显示在 gradle 报告中。这可能吗？这是我的测试用例，如果我做错了，请告诉我

```
class Checkout extends GebReportingSpec {

    @TestCase(someID="12345")
    def "A checkout 3-D script"() {
        // My test steps.....
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T19:12:23.040

使用[StackTraceUtils.sanitize](https://stackoverflow.com/questions/9540678/groovy-get-enclosing-functions-name)获取当前方法并使用反射来遍历注解：

```
import java.lang.annotation.*

import org.codehaus.groovy.runtime.StackTraceUtils

class Checkout {
  @TestCase(someID="12345")
  def "yeah a"() {
    printTestCaseId()
    // My test steps.....
  }

  def printTestCaseId() {
    def stack = StackTraceUtils.sanitize(new Throwable()).stackTrace[1]
    def method = getClass().declaredMethods.find { it.name == stack.methodName }
    println method
    def someID = method.annotations[0].someID()
    println someID
    assert someID == "12345"
  }

}

@Retention (RetentionPolicy.RUNTIME)
@interface TestCase { String someID() }

co = new Checkout()
co."${'yeah a'}"() 
```

如果您是迭代方法的`StackTraceUtils`人，则不需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-15T08:46:31.477

spockframework（版本“spock-core-1.1-groovy-2.4”）提供了访问注释的方式：

```
package com.test.integration.spec

import com.test.integration.annotation.Scenario
import com.test.integration.annotation.TestCase

import spock.lang.Specification

@Scenario("AnnotationSpec")
class AnnotationSpec extends Specification {

    String scenario
    String test_case

    def setup() {
        scenario = specificationContext.currentSpec.getAnnotation(Scenario).value()
        test_case = specificationContext.currentFeature.featureMethod.getAnnotation(TestCase).value()
    }

    @TestCase("case-001")
    def 'spock provides way of accessing annotation'(){

        expect:
        "AnnotationSpec" == scenario
        "case-001" == test_case
    }

} 
```

# c++ - 如果内存有限，new 会自动使用交换吗？

> ID：15794941
> 
> 赞同：2
> 
> 时间：2013-04-03T18:17:45.497
> 
> 标签：c++, ram, swapfile

如果我尝试分配内存：

```
int ramSize = magicLibrary.getRamSize();
assert(ramSize*2 <= pow(2,64-8));//Don't overflow the 64 bit limit (32 on some systems).

int * mainData new int[ramSize*2/sizeof(int)]; //2 times too big. 
```

我会得到磁盘交换来填充空间吗？如果没有，我该如何使用交换？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T18:49:35.460

只要 RAM 和 Swap-space 都没有完全耗尽，并且地址空间有限制（即 32 位 2-3GB，超过 64 位系统中的 ram），系统就会允许您分配内存。如果 RAM 用尽，系统将使用交换空间。

有时，操作系统也会允许“overcommit”，这与航空公司“期望一些乘客不会出现”时的做法基本相同，因此他们会为该航班多卖几张机票，并担心“所有座位都满了”当他们到了那个地步。就计算机而言，这意味着操作系统很可能允许您分配比实际可用内存更多的内存，并且稍后通过某种方式解决“没有足够”的错误（通常通过释放一些内存） “备用”或“杀死一些随机应用程序”）。操作系统允许这样做的原因是应用程序经常分配未完全使用的大块内存。用零填充的内存区域也可以“合并”为“写时复制”内存，这样，如果您稍后对其进行写入，它会生成该内存的新副本。这也可能意味着，如果您分配大量内存，则必须实际向其写入一些内容（除了零？）以使其“处于使用状态”。同样，这反映了应用程序的典型行为“分配大量内存，用零填充，然后只使用其中的一部分”——因此操作系统试图通过没有大量的“页面”来“节省空间”它们中的零”。

请注意，内存是在 RAM 中还是 Swap 是一个动态标准 - 内存一直在换入和换出，程序代码和数据都可以随时换出，然后在需要时再带回来。不管这是“堆”还是其他内存，所有内存在这方面都差不多。

目前还不完全清楚您真正想要实现的目标，但希望这至少可以解释发生了什么。

哦，假设`ramSize`是字节数，这几乎肯定总是错误的：

```
assert(ramSize*2) <= 2^(64-8) 
```

因为`ramSize * 2 > 0`和`(2 XOR 56) = 0`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T18:24:02.093

首先，`new`对swap一无所知。这是操作系统的工作（至少对于通用操作系统，比如您正在使用的操作系统），它将决定何时交换以及交换什么。

话虽如此，您分配那么多内存的尝试几乎肯定会失败。即使有足够的交换内存可用，操作系统也会为自己保留大量的*虚拟地址空间*，这意味着您可以分配的空间是有限的。例如，在 32 位 Windows 上，为内核保留了 2GB 的地址，如果您尝试过，您将无法分配 4GB 的虚拟内存，因为没有足够的可用*地址*来表示那么多内存。

你到底想做什么？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T18:25:02.263

简而言之，交换空间是硬盘上的虚拟内存部分，在 RAM 已满时使用。这是操作系统的工作，而不是新的操作员！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T18:28:01.823

如果使用`new`，操作系统会收到内存请求。然后它决定从哪里获得该内存。

与打开文件或使用 cout 回显相同。这些东西是c++内置的。

所以你的程序可能已经使用了交换，但你不知道它。

如果您想了解有关此主题的更多信息，您可能需要查看 unix 的内部工作原理（当前使用的每个操作系统的母亲和父亲）。

# javascript - SlickGrid: 进入/退出网格

> ID：15794942
> 
> 赞同：1
> 
> 时间：2013-04-03T18:17:54.407
> 
> 标签：javascript, slickgrid

我正在尝试使用两个可编辑的 slickgrid 实例作为数据输入表单，并且我希望能够从第一个网格的最后一个单元格切换到第二个网格的第一个单元格，但以下内容似乎没有去工作。我错过了什么？

```
 firstGrid.onKeyDown.subscribe(function(event) {
    if (event.keyCode === 9 && event.shiftKey === false) {
      if (firstGrid.getActiveCell().cell === lastCol) {
        firstGrid.commitCurrentEdit();
        secondGrid.gotoCell(0, 0, true);
      }
    }
  }); 
```

实际上，如果我按三下标签，它就可以工作，但我真的希望它可以通过一个按键来工作。

请注意，第一个网格只有一行，这就是我不必测试该行的原因。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T20:32:58.363

首先，`commitCurrentEdit`不是网格上的方法，事实证明没有必要。需要的是通过调用（jquery）事件对象的`stopImmediatePropagation`方法来防止（网格的）其他处理程序进行干扰：

```
firstGrid.onKeyDown.subscribe(function(event) {
  if (event.keyCode === 9 && event.shiftKey === false) {
    if (firstGrid.getActiveCell().cell === lastCol) {
      secondGrid.gotoCell(0, 0, true);
      event.stopImmediatePropagation();
    }
  }
}); 
```

# php - PHP if 语句屏幕宽度

> ID：15794955
> 
> 赞同：0
> 
> 时间：2013-04-03T18:18:26.113
> 
> 标签：php, if-statement, window, width

我想检查屏幕宽度是否高于 1024 像素，设置侧边栏 + 50px

我尝试了这段代码（但侧边栏没有加载到 1024+）：

```
<?php $arjunaOptions = arjuna_get_options(); ?>
<?php
//calculate sidebar and content area ratio
if ($arjunaOptions['sidebarDisplay'] != 'none') {
    $available = 920;
    $available2 = 970;
    $contentArea = $arjunaOptions['contentAreaWidth'];
    $sidebar = $available - $contentArea;
    $sidebarlarge = $available2 - $contentArea ;
    $sidebarLeftRight = floor(($sidebar - 50) / 2);

    print '<style type="text/css">
    @media screen and (max-width: 1024px) {
    .contentWrapper .contentArea {width:'.$contentArea.'px;}
    .contentWrapper .sidebars {width:'.$sidebar.'px;}
    .contentWrapper .sidebarLeft, .contentWrapper .sidebarRight {width:'.$sidebarLeftRight.'px;}  
    }

    @media screen and (min-width: 1025px) {
    .contentWrapper .contentArea {width:'.$contentArea.'px;}
    .contentWrapper .sidebars {width:'.$sidebarlarge.'px;}
    .contentWrapper .sidebarLeft, .contentWrapper .sidebarRight {width:'.$sidebarLeftRight.'px;}
    }

    </style>';

}
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T18:20:14.397

您不应该在 PHP 中动态地执行此操作，因为 PHP 没有屏幕大小的概念（没有客户端 cookie 或类似的帮助）。

您应该为此使用 CSS 媒体查询。例如：

```
@media screen and (max-width: 1024px) {
  /* CSS for up to 1024px width */   
}

@media screen and (min-width: 1025px) {
  /* CSS for over 1024px width */
} 
```

您还可以使用 javascript 来修改元素的 CSS 属性。实际上，您的示例似乎尝试在 PHP 中使用 jQuery 语法，这当然行不通。

# vb.net - VB.NET - 滥用实例变量？

> ID：15794957
> 
> 赞同：3
> 
> 时间：2013-04-03T18:18:33.653
> 
> 标签：vb.net, design-patterns

请看下面的代码：

```
 Public Class A
    Public person1 As Person
End Class

Public Class B
    Inherits A

    Public Function CheckGender() As Boolean
        If person1._Gender = "M" Then
            CheckGender = True
        End If
    End Function

End Class

Public Class C
    Inherits B
    Public Function CheckAge() As Boolean
        If person1._Age > 30 Then
            CheckAge = True
        End If
    End Function

End Class

Public Class D
    Inherits C

    Public Sub SomeMethod()
        Dim list As List(Of Person) = New List(Of Person)
        Dim p1 As New Person("Ian", "M", 31)
        Dim p2 As New Person("Susan", "F", 20)
        Dim p3 As New Person("Mark", "M", 22)
        list.Add(p1)
        list.Add(p2)
        list.Add(p3)

        For Each Person As Person In list
            person1 = Person
            If CheckAge() And CheckGender() Then
                'Do something
            End If
        Next
    End Sub

    Public Shared Sub Main()
        Dim d As New D
        d.SomeMethod()
    End Sub

End Class

Public Class Person
    Public _Name As String
    Public _Gender As String
    Public _Age As String
    Public Sub New(ByVal Name As String, ByVal Gender As String, ByVal Age As Integer)
        _Name = Name
        _Gender = Gender
        _Age = Age
    End Sub
End Class 
```

`c.SomeMethod`遍历三个人并进行两次检查：`b.CheckGender`和`c.CheckAge`。 `CheckGender`并`CheckAge`使用超类中的实例变量`A`。

实时环境中的代码每天循环访问数据库中的 100,000 条记录，并删除那些`CheckGender`同时`CheckAge`为 true 的记录。 **在这种情况下使用实例变量是一个糟糕的设计选择吗？** 我总是被教导使用局部变量。我希望该对象被`Person`传递给每个循环。还是真的不重要？`CheckGender``CheckAge`

请注意，上面的代码是一个假设的例子。 `CheckGender`是实际应用中`CheckAge`的复杂功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T19:44:37.533

只要`CheckGender`和`CheckAge`不访问层次结构中类的任何私有、受保护或内部成员，并且是公共函数，并且它们的逻辑对于任何实例都是相同的，存在`A`、`B`或`C`，将这些方法包含在中是一个更好的设计另一个班级。如果可能，使它们成为静态的。您可以让他们接受您的类的最通用实现（`A`例如），允许检查年龄或性别。从您的代码中获取，您甚至可以传递`Person`属性而不是使用任何`A`,`B`和`C`类。

在上述情况下使用继承和这种逻辑是允许的，只要您需要执行以下任何或所有操作：

*   **符合特定的接口或基类**，即`A`和`B`类`C`必须实现/扩展，并且该接口或基类提供`CheckGender`和`CheckAge`方法。如果您将对象传递给第三方 API，这可能是唯一的解决方案，该 API 接受基类/接口作为参数并在内部调用检查方法。

这是 C# 中的示例：

```
public static class CheckUtil
{
    public static bool CheckAgeOfPerson(Person p)
    {
        return p.Age > 30;
    }
    public static bool CheckAgeOfObject(A obj)
    {
        // NOTE: obj.person1 must be accessible - by being either public or internal.
        // If this class is in another assembly, internal is not useful
        return CheckAgeOfPerson(obj.person1);
    }
}

A objA = ...;
B objB = ...;
C objC = ...;

CheckUtil.CheckAgeOfObject(objA);
CheckUtil.CheckAgeOfObject(objB);
CheckUtil.CheckAgeOfObject(objC);

CheckUtil.CheckAgeOfPerson(objA.person1);
CheckUtil.CheckAgeOfPerson(objB.person1);
CheckUtil.CheckAgeOfPerson(objC.person1); 
```

*   **为类提供特定的实现**。如果您必须对 的实例进行一些逻辑`CheckAge`，`A`但对 的实例进行完全不同的验证`B`，或者将现有的逻辑和一些新的逻辑结合起来`C`，那么继承就是您的朋友。尽管如此，如果是这种情况，我更愿意将`CheckGender`and暴露`CheckAge`给接口并通过接口调用它们。这样，只要满足接口，继承是有效的，但不是强制性的。

这是 C# 中的一个示例：

```
public interface IGenderCheckable
{
    bool CheckGender();
}

public interface IAgeCheckable
{
    bool CheckAge();
}

public class A : IAgeCheckable, IGenderCheckable
{
    public virtual bool CheckGender()
    {
        return this.person1.Gender.Equals("M");
    }

    public virtual bool CheckAge()
    {
        return this.person1.Age > 30;
    }
}

public class B : A
{
     public override bool CheckAge()
     {
          // combine custom logic with new logic
          return this.person1.Age < 0 || base.CheckAge();
     }
} 
```

对于复杂的场景，也可以使用**两种方法的组合**（当然对于比年龄和性别检查更复杂的情况）：

```
public class A : IAgeCheckable, IGenderCheckable
{
    ...
}

public static class CheckUtil
{
    public static bool CheckAge(IAgeCheckable obj)
    {
        return obj.CheckAge();
    }
    public static bool CheckGender(IGenderCheckable)
    {
        return obj.CheckGender();
    }
} 
```

* * *

关于实例变量与局部变量的使用 - 在 .NET 中使用实例变量的性能存在缺陷，尤其是当它们是**值类型**时。例如，本地成员的使用`int _someIntMember`被转换为`this._someIntMember`- 这反过来又调用堆来获取`this`对象，然后访问其`_someIntMember`成员。将成员作为局部变量，将其值放入堆栈，然后从那里读取它，而无需通过堆进行不必要的往返。而且，栈比堆快。

但是，我不能说过多的堆使用是否是对它的滥用，也不是在使用过多时滥用局部变量。这取决于所需的性能和代码的复杂性。有时局部变量会使代码更具可读性，但如果太多，您很容易忘记每个变量是什么（这可能比疏忽的性能提升更严重）。所以这是一个风格和必要性的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T21:03:11.163

如果您有兴趣“修复”您的代码以使 Person 成为属性而不是字段，请更改 A 类的实现，如下所示：

```
Public Class A
    Public Property Person1 As Person

   Public Overridable Function ComputeAge() As Integer
       Return Person1.Age
   End Function

End Class 
```

这样做的好处是，如果需要，您可以添加额外的抽象来获取和设置此属性。编译器将为 auto 属性生成一个隐藏的私有支持字段。您仍然可以从任何实现类访问 Person1：

```
Public Class B
   Inherits A

   Public Overrides Function ComputeAge() As Integer
       Return MyBase.Person1.Age.AddYears(1)
   End Function
End Class 
```

# php - 使用 php 连接到数据库

> ID：15794962
> 
> 赞同：0
> 
> 时间：2013-04-03T18:18:53.733
> 
> 标签：php, mysql

我对 PHP 很陌生，所以这是我第一次尝试通过 php 文件连接到 mysql 数据库，我收到了这条消息。我不知道有多少人可以帮助我解决这个问题，或者至少有人可以引导我走向正确的方向

不能使用：soum_email1：

我的 php 看起来像这样

```
<?php
define('DB_NAME', 'soum_email1');
define('DB_USER', 'soum_email');
define('DB_PASSWORD', 'Qe232f9');
define('DB_HOST', 'localhost');

$link = mysql_connect(DB_HOST, DB_USER, DB_PASSWORD);

if(!link){
    die('could not connect:' . mysql_error());
}

$db_selct = mysql_select_db(DB_NAME, $link);

if(!$db_selected){
    die('Can not use : ' . DB_NAME . ':' .mysql_error());
}
echo 'connection sucessful';
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T18:21:54.123

您正在分配`mysql_select_db()`功能`$db_selct`，但随后检查`$db_selected`（您发布的代码始终是错误的。

此外，`link`应该是`$link`（在第 9 行）。

您的代码应该是：

```
define('DB_NAME', 'soum_email1');
define('DB_USER', 'soum_email');
define('DB_PASSWORD', 'Qe232f9');
define('DB_HOST', 'localhost');

$link = mysql_connect(DB_HOST, DB_USER, DB_PASSWORD);

if(!$link){
    die('could not connect:' . mysql_error());
}

$db_selct = mysql_select_db(DB_NAME, $link);

if(!$db_selct){
    die('Can not use : ' . DB_NAME . ':' .mysql_error());
}
echo 'connection sucessful'; 
```

您应该注意，虽然`mysql_*`函数系列现在已弃用，但您应该考虑使用[MySQLi](http://php.net/manual/en/book.mysqli.php)或[PDO](http://php.net/manual/en/book.pdo.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T18:22:09.437

首先：请像 Quentin 在第一条评论中写的那样使用 pdo 或 mysqli 数据库。

此外，您应该正确命名变量，

```
$db_selct = mysql_select_db(DB_NAME, $link); 
```

和

```
 if(!$db_selected){
    die('Can not use : ' . DB_NAME . ':' .mysql_error());
} 
```

有不同的变量名。

# javascript - 使用下划线将对象中的“”递归转换为false

> ID：15794963
> 
> 赞同：2
> 
> 时间：2013-04-03T18:18:54.567
> 
> 标签：javascript, underscore.js

我正在尝试将所有`""`值转换为`false`使用下划线，但它不起作用。有没有更简单的方法？

```
var _ = require("underscore");

var test = {
    "one": "",
    "two": "",
    "three": {
        "four": ""
    },
    "five": "this string is intact"
}; 
```

第一次尝试，弄乱了物体

```
function z(object){ 
    return _.map(object, function(value, key, list){
        if(_.isObject(value)){
            return z(value);
        }else{
            var ret = {};
            ret[key] = (value == "") ? false : value;
            return ret;
        }
    });
} 
```

第二次尝试失败

```
var _false = function(object){
    var nb = {};
    var _false = function _false(object, parent){
        _.each(object, function(value, key, list){
            if(_.isObject(value)){
                nb[key] = {};
                return _false(value, key);
            }else{
                nb[parent] = (value == "") ? false : value;
            }
        });
    }(object);
    return nb;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T18:25:17.437

如果你想修改你的对象，你必须继续去做！

```
function z(object){ 
    _.each(object, function(value, key){
        if(_.isObject(value)){
            z(value);
        }else{
            object[key] = (value === "") ? false : value;
        }
    });
} 
```

这会直接修改您的对象，而不是创建新对象。

问题`_.map()`在于它总是返回一个**数组**。如果你想最终得到一个对象，就像原来的一样，你不能使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T18:26:09.297

为什么需要使用下划线？使用普通的 JS for/in 可能更容易。

[http://jsfiddle.net/dSZbe/](http://jsfiddle.net/dSZbe/)

```
// Accepts an object to convert '' -> false
var falsify = function(obj) {

    // for each key in the object
    for (var key in obj) {

        // store the value for this key in a local variable
        var value = obj[key];

        // if the value is an empty string
        if (value === '') {

            // update the object, change the value of this key to false
            obj[key] = false;

        // Value is not empty string.
        // So is it an object?
        } else if (typeof value === 'object') {

            // It IS an object! that means we need to do all this again!
            // This is what makes this recursive
            falsify(value);
        }
    }

    // return the modified object, though the object passed
    return obj;
};

// test data
var test = {
    "one": "",
    "two": "",
    "three": {
        "four": ""
    },
    "five": "this string is intact"
};

// proof it works, all empty strings are now `false`.
alert(JSON.stringify(falsify(test))); 
```

* * *

但最后，请确保您需要这样做……这`""`是 JavaScript 中的一个错误值。意思就是：

```
var emptyString = "";
if (emptyString) {
  // never gonna happen
} else {
  // always gonna happen
} 
```

因此，如果您只是想编写这样的代码，`if (test.one) { ... }`那么您根本不需要这样做。

# php - 在 PHP / MYSQL 中获取多行

> ID：15794967
> 
> 赞同：0
> 
> 时间：2013-04-03T18:19:01.490
> 
> 标签：php, mysql

我正在尝试根据数组中的 id 提取 10 个不同行的图像链接。当查询处于循环中时，它似乎中断了。我有什么想法可以做到这一点吗？

```
$array = array(54, 319, 342, 298, 281, 190,178,158,138,7);

$shuffleKeys = array_keys($array);
shuffle($shuffleKeys);
$newArray = array();
foreach($shuffleKeys as $key) {
    $newArray[$key] = $array[$key];
}

for($i=0;$i<=count($newArray);$i++){

    $query = "SELECT logoName,logoImageLink, logoImageLink2, countryImg, logoArtist, afterText, country FROM logos WHERE id = $array($i)     ";
    $result = mysql_query($query);

    /* fetch rows in reverse order */
    for ($i = mysql_num_rows($result) - 1; $i >= 0; $i--) {
    if (!mysql_data_seek($result, $i)) {
        echo "Cannot seek to row $i: " . mysql_error() . "\n";
        continue;
    }

    if (!($row = mysql_fetch_assoc($result))) {
        continue;
    }

    $imageLink = $row['logoImageLink'];

    echo "<li class=\".$array($i).\" ><img src=\".$imageLink.\" /></li>";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T18:23:37.253

您可以使用[MySQL IN](http://dev.mysql.com/doc/refman/5.1/en/comparison-operators.html#function_in)子句并在单个选择中执行此操作。

```
$ids = join(',',$newArray);  
$query = "SELECT logoName,logoImageLink, logoImageLink2, countryImg, logoArtist, afterText, country FROM logos WHERE id IN ($ids)";
$result = $mysqli->query($query);

while ($row = $result->fetch_assoc()) {
     $imageLink = $row['logoImageLink'];

     echo "<li><img src=\"$imageLink\"/></li>";
} 
```

# ruby-on-rails - 带有wash_out的Rails服务器中的语法错误

> ID：15794968
> 
> 赞同：0
> 
> 时间：2013-04-03T18:19:08.743
> 
> 标签：ruby-on-rails, ruby-on-rails-3, soap

我正在尝试使用 Ruby on Rails 3 构建 SOAP 服务。经过大量研究后，我发现`Wash_out`.

现在，当我将 gem 添加到我的 gemfile 时，如下所示：

```
gem 'wash_out' 
```

我的 rails 应用程序不再启动，我的意思是，当我输入“rails s”时，它给了我一个关于wash_out 的错误。

```
/usr/lib/ruby/gems/1.8/gems/wash_out-0.6.1/lib/wash_out.rb:3:in `require':     /usr/lib/ruby/gems/1.8/gems/wash_out-0.6.1/lib/wash_out/dispatcher.rb:19: syntax error, unexpected '\n' (SyntaxError)
from /usr/lib/ruby/gems/1.8/gems/wash_out-0.6.1/lib/wash_out.rb:3
from /usr/lib/ruby/gems/1.8/gems/bundler-1.3.4/lib/bundler/runtime.rb:72:in `require'
from /usr/lib/ruby/gems/1.8/gems/bundler-1.3.4/lib/bundler/runtime.rb:72:in `require'
from /usr/lib/ruby/gems/1.8/gems/bundler-1.3.4/lib/bundler/runtime.rb:70:in `each'
from /usr/lib/ruby/gems/1.8/gems/bundler-1.3.4/lib/bundler/runtime.rb:70:in `require'
from /usr/lib/ruby/gems/1.8/gems/bundler-1.3.4/lib/bundler/runtime.rb:59:in `each'
from /usr/lib/ruby/gems/1.8/gems/bundler-1.3.4/lib/bundler/runtime.rb:59:in `require'
from /usr/lib/ruby/gems/1.8/gems/bundler-1.3.4/lib/bundler.rb:132:in `require'
from /home/TheBcd/Escritorio/ws/config/application.rb:7
from /usr/lib/ruby/gems/1.8/gems/railties-3.2.13/lib/rails/commands.rb:53:in `require'
from /usr/lib/ruby/gems/1.8/gems/railties-3.2.13/lib/rails/commands.rb:53
from /usr/lib/ruby/gems/1.8/gems/railties-3.2.13/lib/rails/commands.rb:50:in `tap'
from /usr/lib/ruby/gems/1.8/gems/railties-3.2.13/lib/rails/commands.rb:50
from script/rails:6:in `require'
from script/rails:6 
```

我会很感激任何帮助，非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T19:24:56.747

`wash_out` [需要 Ruby 1.9](https://github.com/inossidabile/wash_out#compatibility)。您的回溯显示 Ruby 1.8。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T19:28:11.883

从您的跟踪日志中，我假设您使用的是 ruby​​ 1.8，并且对 gem 的 github 的简短阅读显示了这一点：

> 仅 Rails >3.0。MRI 1.9、2.0、JRuby (--1.9)。
> 
> 自 0.5.3 起，Ruby 1.8 不再受到官方支持。我们将接受进一步的兼容性拉取请求，但不会针对它测试即将发布的版本。

因此，如果您想使用支持 1.8 的 gem，最好将版本锁定到`0.5.3`. 尝试将 Gemfile 中的 gem 版本设置为该版本下的内容，它可能会起作用，但就像他们说的那样，不能保证。

# ios - 'NSInvalidArgumentException'，原因：'数据参数为零'不是我的网址？- 目标 C

> ID：15794972
> 
> 赞同：0
> 
> 时间：2013-04-03T18:19:30.083
> 
> 标签：ios, objective-c, json

每次我尝试解析我的 JSON 文件时，我都会在控制台中收到此错误：
'NSInvalidArgumentException'，原因：'data parameter is nil'
人们说它与 url 和特殊字符有关，但它看起来像这样：
[http ://data.myurl.com/api/49/WELOG/KRF/ticker 有](http://data.myurl.com/api/49/WELOG/KRF/ticker) 什么想法吗？

我的代码：

```
#define kBgQueue dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0)
#define kLatestURL [NSURL URLWithString:@"http://data.myurl.com/api/49/WELOG/KRF/ticker"]

#import "ticker.h"

@implementation ticker

-(void) startTicker{
    dispatch_async(kBgQueue, ^{

        NSData * data = [NSData dataWithContentsOfURL:kLatestURL];
        [self performSelectorOnMainThread:@selector(ticker:) withObject:data waitUntilDone:YES];
    });

}
-(void) ticker:(NSData *) data{

    NSError * error;
    NSDictionary * json = [NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:error];

    NSArray * latestPrice = [json objectForKey:@"data"]; // under adult data
    NSNumber * value = [(NSDictionary*)[latestPrice  objectForKey:@"last_all_numbers"] 
                                                             objectForKey:@"display"];
} 
```

它之前工作得很好......我可以在网络浏览器中访问 JSON 文件，它工作得很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-27T08:10:43.367

当我打开时`kLatestURL`，我看到了`Failed to load page content`消息。所以你的 JSON 不在那个 URL 上。也许是因为一些到期日期。将您的 JSON 上传到其他地方，然后重试。

# linux - 从 Linux KornShell 脚本中运行的 SAS 程序收集返回码和标准输出字符串

> ID：15794973
> 
> 赞同：3
> 
> 时间：2013-04-03T18:19:30.473
> 
> 标签：linux, shell, sas, stdout, ksh

我和一些开发人员正在使用 KornShell (ksh) 在 Linux 环境中运行 SAS 程序。该脚本调用 SAS 命令行，我希望从 SAS 执行中收集标准输出（由 SAS 定义和编写的字符串）以及 Linux 返回代码（0/1）。

### 我的代码（将标准输出收集到 envar，但 return_code 始终为 0，因为 envar 分配成功）：

```
envar=$(./sas XXXX/filename.sas -log $LOG_FILE)

return_code=$? 
```

有没有一种方法可以同时收集返回码和标准输出，而无需两次提交此命令？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T00:05:35.093

当 SAS 作为非交互式进程运行时，它不会向 STDOUT 写入任何内容。日志文件包含执行语句的记录和步骤统计；“打印”输出（例如 from `proc print`）被写入“列表”文件。默认情况下，将使用附加“.lst”的源文件的名称（在您的情况下为**filename.lst**）创建该文件。

您正在使用`-log`系统选项提供一个文件来接受日志输出。定义列表文件的相关选项是`-print`选项。当然，如果程序不创建任何列表输出，则不需要这样的选项。

正如您所发现的，返回的值`$?`是 SAS 的执行返回码。任何非零值都表示程序执行期间发生了某种错误。

如果你想影响返回码，你可以`ABORT`在你的 SAS 程序中使用 data step 语句。这将立即停止 SAS 程序，因为将返回代码设置为对您有意义的内容。例如，假设您想在特定`PROC SQL`步骤失败时终止进一步的处理：

```
data _null_;
   rc = symgetn('SQLRC');
   put rc=;
   if rc > 0 then ABORT RETURN 10;
run; 
```

这会将返回代码设置为`10`，您可以使用外部脚本向适当的人发送电子邮件。这样的自定义返回码值必须大于6小于976；其他值保留给 SAS。 [这是 SAS 文档链接](http://support.sas.com/documentation/cdl/en/hostunx/63053/HTML/default/viewer.htm#n0cndzg0o5pkcin1831y552h89hf.htm)。

# three.js - 三.js，BufferGeometry，array.length / itemSize ！= numItems？

> ID：15794974
> 
> 赞同：0
> 
> 时间：2013-04-03T18:19:33.067
> 
> 标签：three.js, webgl

看看例子[http://mrdoob.github.com/three.js/examples/webgl_buffergeometry_particles.html](http://mrdoob.github.com/three.js/examples/webgl_buffergeometry_particles.html)

位置缓冲区的设置方式如下：

```
 var particles = 500000;

            var geometry = new THREE.BufferGeometry();
            geometry.attributes = {

                position: {
                    itemSize: 3,
                    array: new Float32Array( particles * 3 ),
                    numItems: particles * 3
                }, 
```

如果 T = geometry.attributes.position，那么 T.array.length / T.itemSize === T.numItems 是否总是如此？如果数组的长度为 L 个 slot，并且每个 item 占用 K 个 slot，那么有 L/K 个 item 是理所当然的。然而，这个例子似乎满足了数组有 L 个项目？L 个项目将占用 L * K 个插槽：s

我也遇到了位置问题，并且只有前 1/3 的顶点被渲染，因为我使用顶点数作为 numItems，并且 itemSize = 3，长度为 numItems * itemSize 的 Float32Array。

我有什么误解？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T19:58:52.123

你没有误解任何东西。命名法可以改进。

这样想：

```
itemSize = (number of components) / vertex

numItems = (number of components)
         = (number of vertices) * itemSize 
```

将数组`numItems`中的项目数视为发送到 GPU 的数量。

三.js r.57

# android - AdMob - 禁用请求 onPause()

> ID：15794982
> 
> 赞同：5
> 
> 时间：2013-04-03T18:20:01.003
> 
> 标签：android, admob, onresume, onpause, adview

我已经阅读了几篇关于在隐藏/最小化应用程序时尝试停止 adView 的文章，但这会使我的应用程序崩溃。

这是我的代码，adView.LoadAd... 和 adView.stopLoading 都在启动时使应用程序崩溃。

```
public class MainActivity extends Activity implements OnItemSelectedListener {
    @Override
    protected void onResume() {
        super.onResume();
        if (AdViewStarted = true) {
            adView.loadAd(new AdRequest());
        }
    }

    @Override
    protected void onPause() {
        super.onPause();
        if (AdViewStarted = true) {
            adView.destroy();
        }
    }

    [...]

    public class AdMob extends Activity {
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);

            adView = new AdView(this, AdSize.BANNER,"12345678901234567890");
            LinearLayout layout = (LinearLayout) findViewById(R.id.adView);
            layout.addView(adView);
            adView.loadAd(new AdRequest());
            AdViewStarted = true;
        }

        @Override
        public void onDestroy() {
            if (adView != null) {
                adView.destroy();
            }
            super.onDestroy();
        }
    }
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T18:27:31.017

替换 if 语句，您必须使用两个等于而不是一个。正确的是

```
if (AdViewStarted == true) {
        adView.destroy();
} 
```

或更好

```
if (AdViewStarted) {
        adView.destroy();
} 
```

通过胜利，变量名称以小写字符开头。

另外，您在尝试什么`onCreate`？

这是正确的（我认为，如果不是，请向我展示布局 xml 文件和 LogCat）：

```
LinearLayout adView = (LinearLayout) findViewById(R.id.adView);
adView.loadAd(new AdRequest());
AdViewStarted = true; 
```

# php - INNER JOIN 查询没有结果

> ID：15794983
> 
> 赞同：-1
> 
> 时间：2013-04-03T18:20:13.040
> 
> 标签：php, mysql, inner-join

嗨，我有一个基本的搜索功能，有两个字段供用户输入测试名称和结果类型。我尝试了很多方法，比如使用下拉菜单作为过滤器，但这是我找到的最简单的方法。我在搜索查询中的 3 个表上使用 INNER Joins。目前没有关于 sql 语法的错误出现，但也没有结果。我在数据库上运行了查询，它返回的结果很好。我是否错过了一些愚蠢的东西，任何帮助将不胜感激。

```
if (isset($_GET['action']) and $_GET['action'] =='search')
{

$resultts = mysql_real_escape_string(htmlentities(trim($_GET['result'])));
$tests = mysql_real_escape_string(htmlentities(trim($_GET['test'])));

if (isset($resultts) and ($tests))
{
$sql = "SELECT p.fileName, p.mimeType, p.dateCreated, t.testName, r.resultType
    FROM 'product_logs' AS p 
    INNER JOIN 'result' AS r 
    ON p.resultID=r.resultID
    INNER JOIN 'test' AS t
    ON r.testID=t.testID
    WHERE t.testName LIKE '%$tests%'
    AND r.resultType LIKE '%$resultts%'
    ORDER BY r.dateCreated DESC";

$result = mysqli_query($sql) or die ("error in query");

}

while ($row = mysqli_fetch_array($result))
{
echo "<tr>
<td>".$row['fileName']."</td>
<td>".$row['mimeType']."</td>
<td>".$row['dateCreated']."</td>
<td>".$row['testName']."</td>
<td>".$row['resultType']."</td>
</tr>";

}
} 
```

这些表是

```
result

resultID    int(6)  NO  PRI NULL    auto_increment
resultType  varchar(15) NO      NULL    
resultDate  date    NO      NULL    
testID   int(11)    NO  MUL NULL    
testerID    int(11) NO  MUL NULL    
productID   int(11) NO  MUL NULL    

product_logs

logID       int(5)      NO  PRI NULL    auto_increment
mimeType    varchar(50) NO      NULL    
fileData    mediumblob  NO      NULL    
fileName    varchar(255)NO      NULL    
dateCreated date        NO      NULL    
resultID    int(11)    YES  MUL NULL

test

testID    int(5)        NO  PRI NULL    auto_increment
testName varchar(10)    NO      NULL    
testDate date           NO      NULL 
```

这是我使用的表格

```
echo "<form action= results_page.php method= get>";
echo"<p>Search Product Logs:</p>";

echo"<div>";
echo"<label for=text>Please Enter Test Name:</label>";
echo"<input type=text name=test id=text/>";
echo"<label for=text>Please Enter Result Type:</lable>";
echo"<input type=text name=result id=text/>";
echo"<input type=hidden name=action value=search/>";
echo"<input type=submit value=Search>";
echo"</div>";
echo"</form>"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T18:34:42.723

您测试是否存在，然后`$resultts`在sql 语句本身中使用和。此外，您正在测试 的值，而不是它是否已设置。试试这个：`$tests``$resultt``$test``$tests`

```
if (isset($resultts) and isset($tests))
{
    $sql = "SELECT p.fileName, p.mimeType, p.dateCreated, t.testName, r.resultType
        FROM 'product_logs' AS p 
        INNER JOIN 'result' AS r 
        ON p.resultID=r.resultID
        INNER JOIN 'test' AS t
        ON r.testID=t.testID
        WHERE t.testName LIKE '%$tests%'
        AND r.resultType LIKE '%$resultts%'
        ORDER BY r.dateCreated DESC";

    $result = mysqli_query($sql) or die ("error in query");
}else{
    // Insert error type message or handling here.
} 
```

# php - php提取繁体字

> ID：15794990
> 
> 赞同：1
> 
> 时间：2013-04-03T18:20:43.810
> 
> 标签：php, encoding

```
$str = "I want to eat我要吃飯 , you?你呢?"; 
```

我想要输出：

```
array(
0 => I,
1 => want, 
2 => to, 
3 => eat, 
4 => 我, 
5 => 要, 
6 => 吃,
...  ...
); 
```

我试过了 ：

# 1

```
function mb_str_split($str, $length = 1) {
  if ($length < 1) return FALSE;

  $result = array();

  for ($i = 0; $i < mb_strlen($str); $i += $length) {
    $result[] = mb_substr($str, $i, $length);
  }

  return $result;
}
var_dump(mb_str_split($str, 3)); 
```

上述方法仅适用于所有字符串均为繁体中文的情况。

# 2

```
preg_match("/\p{Han}+/u", $str, $matches); 
```

以上方法只返回中文的第一个字符串，即我吃饭要。如何得到所有（我要吃饭，你呢）？

全部使用 UTF8。　
如何达到我想要的输出？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T20:23:47.623

*编辑*

从这段代码摘录中，您可能“只”需要弄清楚如何保留英文单词：

```
<?php

$words = "I want to eat我要吃飯 , you ? 你呢 ?";
$tokens = preg_split('/(?<!^)(?!$)/u', $words);
print_r($tokens);

//  Array
// (
//     [0] => I
//     [1] => w
//     [2] => a
//     [3] => n
//     [4] => t
//     [5] => t
//     [6] => o
//     [7] => e
//     [8] => a
//     [9] => t
//     [10] => 我
//     [11] => 要
//     [12] => 吃
//     [13] => 飯
//     [14] => ,
//     [15] => y
//     [16] => o
//     [17] => u
//     [18] => ?
//     [19] => 你
//     [20] => 呢
//     [21] => ?
// ) 
```

*编辑*

这个解决方案是否足够令人满意？

```
$words = explode(' ', "I want to eat 我要吃飯 , you ? 你呢 ?");
$output = array();

foreach ($words as $word) {
    $tokens = mb_split('\s', $word, 1);
    $output = array_merge($output, $tokens);
}

print_r($output);

// Array
// (
//     [0] => I
//     [1] => want
//     [2] => to
//     [3] => eat
//     [4] => 我要吃飯
//     [5] => ,
//     [6] => you
//     [7] => ?
//     [8] => 你呢
//     [9] => ?
// ) 
```

# visual-studio-2010 - Visual Studio 2012 网站在 Visual Studio 2012 中正常工作

> ID：15794991
> 
> 赞同：1
> 
> 时间：2013-04-03T18:20:45.267
> 
> 标签：visual-studio-2010, visual-studio-2012

几年前我最初在 Visual Studio 2010 中创建了一个 ASP.NET 站点，它也经历了 VS 2010 SP1 更新。这意味着 Visual Studio 2012 无需执行一次性升级即可打开解决方案。

我遇到的问题是 Visual Studio 2012 中的内置浏览器选择器不适用于此项目，并且设置仅允许您使用默认浏览器。

当我查看 .SLN 文件时，版本行指示 Visual Studio 2012（即 #Visual Studio 2012），并且其中没有其他设置似乎与此限制有关。

有没有人遇到过这个问题，如果有，请告诉我您是如何克服的？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T18:37:55.120

您将不得不升级您的项目以允许它使用仅 Visual Studio 2012 的功能。请注意，如果您这样做，您将无法再在早期版本的 VS 中打开您的项目。

[http://msdn.microsoft.com/en-us/library/hh266747%28VS.110%29.aspx](http://msdn.microsoft.com/en-us/library/hh266747%28VS.110%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T18:41:34.163

对于 VS 2010，您可以安装[WoVS Default Browser Switcher](http://visualstudiogallery.msdn.microsoft.com/bb424812-f742-41ef-974a-cdac607df921)扩展

还有一个相关问题[Change default browser in Visual Studio 2010 RC](https://stackoverflow.com/questions/2443749/change-default-browser-in-visual-studio-2010-rc)

# android - Android LoadAnimation 错误

> ID：15794992
> 
> 赞同：1
> 
> 时间：2013-04-03T18:20:46.150
> 
> 标签：android, eclipse, animation, viewflipper

我想在 Android 中为 ViewFlipper 创建一个动画。我制作了 xml 文件，我知道尝试创建动画，但 eclipse 给了我一个错误。

> AnimationUtils 类型中的方法 loadAnimation(Context, int) 不适用于参数 (LoafMakingTutorial, View)

这是代码

```
Animation right_in = AnimationUtils.loadAnimation(LoafMakingTutorial.this,findViewById(R.anim.right_flip_in)); 
```

问题是什么？我已经尝试过日食提到的解决方案，但都没有奏效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T18:23:30.173

此消息准确地向您展示了您需要知道的内容：

AnimationUtils 类型中的方法 loadAnimation(Context, **int** ) 不适用于参数 (LoafMakingTutorial, **View** )

您不能将*视图*用作需要 int 的方法的参数。只是改变`findViewById`部分。如果您已经拥有*ID*，则`View`无需查找ID`View`背后的*ID*。

# sql - SQL Server 查询正确连接两个表

> ID：15794996
> 
> 赞同：-1
> 
> 时间：2013-04-03T18:21:01.470
> 
> 标签：sql, sql-server

我有两张桌子

一个是 Claims 表，另一个包含 Edits

我通过 ClaimID 加入

我只想要具有 205 编辑而不是 913 的 ClaimID。我需要为加入做什么？

所以可以说 Edits 是 e 并且我检查 e.RuleID 可以有 205，但不能有 913（每个 claimid 可以有无限的编辑）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T18:27:16.087

```
SELECT * FROM Claims AS c
WHERE EXISTS (
    SELECT * FROM Edits AS e1
    WHERE c.ClaimID = e1.ClaimID 
    AND e1.RuleId=205)
AND NOT EXISTS (
    SELECT * FROM Edits AS e2
    WHERE c.ClaimID = e2.ClaimID
    AND e2.RuleId=913) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T18:23:35.183

```
SELECT Edit205.ClaimID
FROM Edits Edit205
LEFT JOIN Edits Edit913
ON Edit205.ClaimID = Edit913.ClaimID AND Edit913.RuleID = 913
WHERE Edit205.RuleID = 205
AND Edit913.ClaimID IS NULL 
```

[在这里](http://sqlfiddle.com/#!3/3c8ac/1)工作 sqlfiddle

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T18:26:41.553

这将做：

```
SELECT *
FROM Claims C
WHERE NOT EXISTS(SELECT 1 
                 FROM Edits 
                 WHERE Edit = 913 AND ClaimId = C.ClaimId)
AND EXISTS (SELECT 1 
            FROM Edits 
            WHERE Edit = 205 AND ClaimId = C.ClaimId) 
```

# powershell - 如何使用 Powershell 从 HyperV 主机配置 VM

> ID：15794998
> 
> 赞同：0
> 
> 时间：2013-04-03T18:21:02.807
> 
> 标签：powershell, automation, windows-server-2008, hyper-v

我有一台 HyperV 服务器，上面托管了 10 多个虚拟机。它们都使用基本映像，因此它们没有连接到域，也没有配置 NIC。有没有一种方法可以让我从主机运行命令来配置虚拟机 NIC 并加入域，就像我实际登录一样？

如果我只是从 HyperV 中弹出虚拟机，这很容易完成：

```
###Joining domain###

$domain = "mydomain.gbl"
$cred = get-credential mydomain\defaultuser

Add-Computer -DomainName $domain -Credential $cred 
```

现在，如果我只有几台机器，这种方法是可以的，但是由于我有很多甚至更多需要配置的机器，我正试图找到一种方法来自动化这些任务。

也许我可以在主机上的虚拟机上创建计划任务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T19:40:35.650

Since you're running Server 2008 your only option (AFAICS) would be to configure the network interfaces of the VMs with static MAC addresses (e.g. with the [PowerShell Management Library for Hyper-V](http://pshyperv.codeplex.com/)), set up a DHCP to provide the VMs with IP addresses. After that you should be able to do something e.g. with [`PsExec`](http://technet.microsoft.com/en-us/sysinternals/bb897553) if the Windows Firewall is disabled on the VMs. If it isn't, you'll have to log in manually. You need at least some basic configuration for remote management.