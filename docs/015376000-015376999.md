# StackOverflow 问答 15376000-15376999

# emacs - 如何在 Aquamacs 中安装 Emacs 预测模式？

> ID：15376000
> 
> 赞同：1
> 
> 时间：2013-03-13T02:31:17.053
> 
> 标签：emacs, aquamacs

我正在尝试安装 Emacs 预测模式，但是当我这样做时`predictive-mode`，我得到`Loading`了完成-ui'：检测到旧式反引号！`

然后我得到： `Wrong type argument: listp, word`

回溯：

[http://pastebin.com/42nkiNYP](http://pastebin.com/42nkiNYP)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T18:22:33.980

看起来你的完成用户界面可能需要一个小修复来适应你正在使用的较新的 Emacs。将此报告给完成用户界面（或预测模式）的作者。

# javascript - 代码不会运行，因为我不能在 document.write 中输出多个变量

> ID：15376003
> 
> 赞同：-3
> 
> 时间：2013-03-13T02:31:36.810
> 
> 标签：javascript

当我尝试在代码部分显示多个变量时，我的代码将无法运行`document.write`。我很确定我做的一切都是正确的。

* * *

```
<script type="text/javascript">
var name = prompt("Welcome to the Fruity Store. What is your name?","");
var product = prompt("What is the name of the product you would like?","");
var price = 1*prompt("How much does it cost?","");
var quantity = 1*prompt("How many of the fruit would you like?","");
var discount = 1*prompt("What was the discount of the product in decimal form?","");
var costoforder = (price*quantity);
var discounted = (price*quantity*discount);
var totalorder = (costoforder - discounted);

document.write("Thank you for placing an order with us " +name ) 
document.write("<p>The cost of buying " +quantity "of " +product "is " +costoforder    </p>)
document.write("<p>The discount for this purchase is " +discounted </p>)
document.write("<p>With discount, your total order cost is " +totalorder</p>)

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T02:34:28.133

您在字符串连接中缺少一些加号。

```
"<p>The cost of buying " + quantity + " of " + product + " is " + etc. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T02:36:27.797

您的变量后缺少“+”号。

你把

```
"String" + variable "string" 
```

代替

```
"string" + variable + "string" 
```

在您的 document.write 语句中多次

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T02:38:35.033

您需要使用加号`+`, 进行字符串连接。你也错过了 ; 在声明之后。

```
<script type="text/javascript">
var name = prompt("Welcome to the Fruity Store. What is your name?","");
var product = prompt("What is the name of the product you would like?","");
var price = 1*prompt("How much does it cost?","");
var quantity = 1*prompt("How many of the fruit would you like?","");
var discount = 1*prompt("What was the discount of the product in decimal form?","");
var costoforder = (price*quantity);
var discounted = (price*quantity*discount);
var totalorder = (costoforder - discounted);

document.write("Thank you for placing an order with us " + name ); 
document.write("<p>The cost of buying " + quantity + "of " + product + "is " + costoforder   + "</p>");
document.write("<p>The discount for this purchase is " + discounted + "</p>");
document.write("<p>With discount, your total order cost is " +totalorder + "</p>");

</script> 
```

# file - 在文件路径中使用非变量

> ID：15376007
> 
> 赞同：0
> 
> 时间：2013-03-13T02:32:01.560
> 
> 标签：file, variables, static, path, textures

我想让用户更改文件路径。但据我所知，它必须是静态的才能这样做。这是我得到的。

```
private String texturePath;
more code...
public String getTexturePath()
{
return (String)texturePath;
}

public void onUpdate()
{
super.onUpdate();
this.texture = "/adventure/" + this.getTexturePath() + ".png";
} 
```

有多个对象，当使用静态变量时，它将所有对象都更改为相同，而无法更改它们的个性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T02:45:38.317

您需要作为参数发送给该方法。

```
public void onUpdate(String path){
    super.onUpdate();
    this.texture = path + this.getTexturePath() + ".png";
} 
```

静态变量属于类，而不是实例。

# php - 在joomla中重定向模态框

> ID：15376012
> 
> 赞同：0
> 
> 时间：2013-03-13T02:33:06.620
> 
> 标签：php, joomla

我在 joomla 中有一个包含表单的组件，这个表单在模态 sbo​​x 中......提交表单时，它会将用户重定向到成功的消息页面，但它又在模态框中，我的问题是我想要它重定向到非模态的普通页面...我该怎么做？

这是来自我的组件的重定向代码...

```
$url = JRoute::_('index.php?option=com_jxtcappbook'.(JRequest::getInt( 'pop', 0) ? '&view=complete&tmpl=component' : ''));
    $this->setRedirect($url,JText::_( 'You appointment was booked succesfully.'.$pop )); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T07:35:47.920

如果您使用的是 Joomla 2.5，则可以使用以下代码

$app = JFactory::getApplication(); $app->redirect('index.php');

如果你使用的是 Joomla1.5 比

全球$大型机；$mainframe->redirect('index.php');

如果您真的对您有帮助，请投票给我

谢谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T16:02:32.873

我使用了这段代码，我得到了它的工作，但现在我需要在窗口关闭时显示提交成功的消息......

```
function closeme()
            {

            parent.SqueezeBox.close();

            }

            window.setTimeout('closeme();',0); 
```

# python - Python 减去 List 中的整数以返回一个值

> ID：15376013
> 
> 赞同：2
> 
> 时间：2013-03-13T02:33:07.320
> 
> 标签：python, list, element

我想在 Python 2.7 中采用这样的大文件：

```
123 456 GTHGGGTH
223 567 FGRTHSYS
12933 4656832 GJWSOOOSKKSSJ
..... 
```

我想逐行读取文件，忽略第三个元素，并用第一个元素减去每行中的第二个元素。因此上面的第 1 行将返回 333。

到目前为止，我已经尝试过：

```
def deleteLast(list):      
    NewL = list.pop()        
    return NewL

f = open(file_name, 'r')
line = f.readline()
while line:
    L = line.split()
    L2 = deleteLast(L)
    L3 = [int(number) for number in L2]
    Length = L3[1]-L3[0]
    print Length
f.close() 
```

但是，当我尝试这个时，编译器会说：

```
 ValueError: invalid literal for int() with base 10: 'T' 
```

感谢所有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T02:37:48.210

那是因为`list.pop()`正在返回“弹出”项目，它不会再次返回列表。

而不是您编写的这个`deleteLast`函数，最好只使用这样的切片：

`L2 = line.split()[0:2]`

稍后您将遇到另一个问题，因为您的 while 循环根本没有前进。考虑改用 for 循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T02:36:51.983

你可以尝试这样的事情：

```
In [8]: with open("abc") as f:     #always use with statement when handling files
   ...:     for line in f:
   ...:         x,y=map(int,line.split()[:2])
   ...:         print y-x
   ...:         
333
344
4643899 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T02:37:27.140

尝试以下操作：

```
with open(file_name, 'r') as f:
    for line in f.readlines():
        rowData = line.split()
        left, right = map(int, rowData[:2])
        length = right - left
        print length 
```

或者：

```
from operator import sub

with open(file_name, 'r') as f:
    for line in f.readlines():
        print sub(*map(int, line.split()[:2])[::-1]) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T02:37:43.133

```
f = open(file_name, 'r')
for line in f.readlines():
     x, y = line.split(' ')[:2]
     print int(y) - int(x) 
```

# r - R DBI / RPostgreSQL--连接成功但 dbListTables 不返回表

> ID：15376017
> 
> 赞同：0
> 
> 时间：2013-03-13T02:33:19.243
> 
> 标签：r

以下代码成功连接到我的 PostgreSQL 数据库（或似乎，无论如何），但尝试发出查询时遇到“关系不存在”错误，所以我尝试了 dbListTables，它根本不返回任何表。传递给 dbConnect 的数据库名称是正确的，并且这些表确实存在。我认为我正在使用的代码与我最近使用的代码完全相同，并且成功运行。有任何想法吗？

```
> library(RPostgreSQL)
Loading required package: DBI
> drv <- dbDriver("PostgreSQL")
> con <- dbConnect(drv, dbname="mydb", user="user", password=password)
> dbListTables(con)
character(0) 
```

我是 R 和 DBI 的新手，所以我确信我可能会遗漏一些非常简单的东西......任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T14:46:56.663

# 1.连接MySQL

a)如果你的系统中安装了Mysql，如果没有安装它。

b) 下载 RMySQL IN R

`library(RMySQL)`

`drv = dbDriver("MySQL 5.0.1")`

确保 MySQL 版本正确。

`con = dbConnect(drv,host="localhost",dbname="test",user="root",pass="root")`

使用本地主机或使用服务器，即 IP 地址

使用所需的数据库名称、用户名和密码

`album = dbGetQuery(con,statement="select * from table")`

运行所需的查询

`close(con)`

# 2.另一种连接数据库的方式

a)首先安装任何数据库，如 MySQL、Oracle、SQL Server

b) 为数据库安装 ODBC 连接器

`library(Rodbc)`

`channel <- odbcConnect("test", uid="ripley", pwd="secret")`

test 是用户必须手动设置的 odbc 连接器的连接名称

用户可以在管理员工具中找到它

`res <- sqlFetch(ch, "table name")`

可以将表作为数据框检索

`res<-sqlQuery(channel, paste("select query"))`

带有条件的表的一部分可以作为数据框检索

`sqlSave(channel, dataframe)`

将数据框保存到数据库（不要使用“res <-”这样的东西）

喜欢用户可以使用

`sqlCopy()` `sqlDrop()`

`sqlTables()`

`close(channel)`

总是关闭连接

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T17:09:18.383

解决了——我是对的；对我来说，这是一件非常简单（而且非常非常愚蠢）的事情。我从错误的服务器运行脚本。我运行它的服务器有一个我试图连接的数据库的空副本，所以一切都成功了，dbListTables 的空结果是正确的。一旦我切换服务器（或简单地在另一台服务器上指定主机），一切正常。

# r - 确定具有大型数据集的 k-means 的最佳聚类数

> ID：15376019
> 
> 赞同：2
> 
> 时间：2013-03-13T02:33:54.493
> 
> 标签：r, cluster-analysis, k-means

我有一个 62 列和 181408 行的矩阵，我将使用 k-means 进行聚类。理想情况下，我想要一种确定最佳集群数量的方法。我已经尝试使用`clusGap`cluster 包（下面的可重现代码）实现间隙统计技术，但这会产生一些与向量大小（122 GB）和`memory.limit`Windows 中的问题以及`Error in dist(xs) : negative length vectors are not allowed`OS X 中的“”有关的错误消息。有谁对确定具有大型数据集的最佳集群数量的技术有什么建议吗？或者，或者，如何使我的代码起作用（并且不需要几天才能完成）？谢谢。

```
library(cluster)
inputdata<-matrix(rexp(11247296, rate=.1), ncol=62)
clustergap <- clusGap(inputdata, FUN=kmeans, K.max=12, B=10) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T10:13:37.433

**在 62 维时，由于维度的诅咒，**结果可能毫无意义。

k-means 进行最小 SSQ 分配，这在技术上等于最小化平方欧几里德距离。然而，众所周知，欧几里得距离不适用于高维数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-02-05T11:30:26.947

如果您不知道要作为参数提供给 k-means 的集群 k 的数量，那么有三种方法可以自动找到它：

*   G-means 算法：它使用统计测试自动发现簇的数量，以决定是否将 k-means 中心一分为二。该算法采用分层方法来检测集群的数量，基于对数据子集遵循高斯分布（近似于事件的精确二项式分布的连续函数）的假设的统计检验，如果不是，则拆分集群. 它从少量中心开始，比如只有一个集群 (k=1)，然后算法将其拆分为两个中心 (k=2) 并再次拆分这两个中心中的每一个 (k=4)，其中有四个中心全部的。如果 G-means 不接受这四个中心，那么答案是上一步：在这种情况下是两个中心 (k=2)。这是您的数据集将分成的集群数量。当您无法估计分组实例后将获得的集群数量时，G-means 非常有用。请注意，“k”参数的不便选择可能会给您错误的结果。g-means 的并行版本称为[p 表示](https://ieeexplore.ieee.org/stamp/stamp.jsp?arnumber=5999830)。G-means 来源： [来源 1](https://blog.bigml.com/2015/02/24/divining-the-k-in-k-means-clustering/) [来源 2](https://support.bigml.com/hc/en-us/articles/207435995-Which-algorithm-should-I-use-K-means-or-G-means-) [来源 3](https://papers.nips.cc/paper/2526-learning-the-k-in-k-means.pdf)

*   [x-means](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.19.3377)：一种新算法，可以有效地搜索集群位置和集群数量的空间，以优化贝叶斯信息准则 (BIC) 或 Akaike 信息准则 (AIC) 度量。这个版本的 k-means 找到数字 k 并且还加速了 k-means。

*   Online k-means 或 Streaming k-means：它允许通过扫描整个数据一次来执行 k-means，并自动找到最佳 k 数。Spark 实现了它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-18T04:41:13.913

这是来自 RBloggers。 [https://www.r-bloggers.com/k-means-clustering-from-r-in-action/](https://www.r-bloggers.com/k-means-clustering-from-r-in-action/)

您可以执行以下操作：

```
data(wine, package="rattle")
head(wine)
df <- scale(wine[-1])
wssplot <- function(data, nc=15, seed=1234){
           wss <- (nrow(data)-1)*sum(apply(data,2,var))
           for (i in 2:nc){
                set.seed(seed)
                wss[i] <- sum(kmeans(data, centers=i)$withinss)}
            plot(1:nc, wss, type="b", xlab="Number of Clusters",
                 ylab="Within groups sum of squares")}

 wssplot(df) 
```

这将创建一个这样的情节。
从中您可以选择 k 的值是 3 或 4。即
[![在此处输入图像描述](../Images/93b803cc2e5a7bf42d248cd294de2310.png)](https://i.stack.imgur.com/w043J.png)

当从 1 个集群移动到 3 个集群时，“组内平方和”明显下降。在三个集群之后，这种下降会下降，这表明 3 集群解决方案可能非常适合数据。

但就像 Anony-Mouse 指出的那样，维度诅咒的影响是因为 k 中使用了欧几里得距离意味着。
我希望这个答案能在一定程度上帮助你。

# c - C CSV GLIB 排序优化

> ID：15376025
> 
> 赞同：0
> 
> 时间：2013-03-13T02:34:19.940
> 
> 标签：c, csv, glib

我最近在 Sevone 的一次采访中被问到一个问题，但我从来没有得到关于我是怎么做的答复。我只有 2 个小时来完成挑战，我无法按性别对其进行排序。这是我开始的，下面是我的解决方案

```
// Sevone Programming Challenge!

#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <glib.h>

//! This is the sex of a human.
typedef enum { MALE, FEMALE } Gender;

//! This is a human person.
typedef struct Person {
    //! The given name.
    char* firstName;
    //! The family name.
    char* lastName;
    //! The age, in calendar years.
    int age;
    //! The sex (see above).
    Gender gender;
} Person;

/** This is the bonus function.
  **/
void bonusFunction();

/** This is the core of the program.
  **/
int main( int argc, char** argv ) {

    // INSTRUCTIONS:
    //    Please refer to: http://developer.gnome.org/glib/2.30/glib-Double-ended-Queues.html 
    // 1\. Open "people.csv".
    // 2\. Read in the list of people (format is "firstName lastName,age,{male|female}").
    // 3\. Create a "Person" for each one read.
    // 4\. Insert each "Person" into a GLib GQueue (this is a "double-ended queue", but think of it like a list).
    // 5\. Sort the list (by using "g_queue_sort") by:
    //       1\. Gender
    //       2\. Last name
    // 6\. Print out the list (by using "g_queue_foreach").  The format should be:
    //       (male/female) Last name, First name (age)
    // 7\. Free up all memory (we're gonna valgrind this afterward).

// Ready for the bonus?
    bonusFunction();

    // KTHXBYE
    return( 0 );
}

/** This is the bonus function.
  **/
void bonusFunction() {
    //! This is the bonus array!
    int arrayOfInts[] = { 1, 1, 2, 3, 5, 8, 13, 21, 34 };

    // BONUS!
    // 1\. Loop through the bonus array and print it without using square brackets ("[" and "]").

    // All done.
    return;
} 
```

这是我的解决方案，请让我知道如何按性别或任何其他优化排序。

```
// Programming Challenge!

#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <glib.h>

//! This is the sex of a human.
typedef enum { MALE, FEMALE } Gender;

//! This is a human person.
typedef struct Person {
    //! The given name.
    char* firstName;
    //! The family name.
    char* lastName;
    //! The age, in calendar years.
    int age;
    //! The sex (see above).
    Gender gender;
} Person;

/** This is the bonus function.
  **/
void bonusFunction();

gint sort_lastName(gconstpointer a, gconstpointer b, gpointer data) {
    return strcmp( ((Person*)a)->lastName, ((Person*)b)->lastName );
}
void prt(gpointer per) {
 printf("%s, %s %d  \n ", ((Person*)per)->lastName, ((Person*)per)->firstName,((Person*)per)->age);
}

/** This is the core of the program.
  **/
int main( int argc, char** argv ) {
    puts("Starting SevOne Test\n");
    // INSTRUCTIONS:
    //    Please refer to: http://developer.gnome.org/glib/2.30/glib-Double-ended-Queues.html 
    // 1\. Open "people.csv".
    // 2\. Read in the list of people (format is "firstName lastName,age,{male|female}").
    // 3\. Create a "Person" for each one read.
    // 4\. Insert each "Person" into a GLib GQueue (this is a "double-ended queue", but think of it like a list).
    // 5\. Sort the list (by using "g_queue_sort") by:
    //       1\. Gender
    //       2\. Last name
    // 6\. Print out the list (by using "g_queue_foreach").  The format should be:
    //       (male/female) Last name, First name (age)
    // 7\. Free up all memory (we're gonna valgrind this afterward).

    char buffer[100];
    int counter=0;
    char * token;
    GQueue* q = g_queue_new();

    FILE *fp;
    fp=fopen("people.csv", "r");

    if( fp == NULL )
    {
        puts("Failed to open file");
        return 0;
    }

    while(fgets(buffer, sizeof(buffer), fp) != NULL)
    {
        Person *ptr_one;
        ptr_one = (Person *) malloc (sizeof(Person));

        // Get first name
        token = strtok(buffer," ");
        ptr_one->firstName=(char *)malloc(sizeof(char)*sizeof(token));
        strcpy(ptr_one->firstName,token);

        // Get last name
        token = strtok(NULL,",");
        ptr_one->lastName=(char *)malloc(sizeof(char)*sizeof(token));
        strcpy(ptr_one->lastName,token);

        // Get age
        token = strtok(NULL, ",");
        ptr_one->age=(int *)malloc(sizeof(int));
        sscanf (token, "%d", &ptr_one->age);

        // Get gender
        token = strtok(NULL,",\n");

        g_queue_push_tail(q, ptr_one);

    }

    // Sort list by last name
    g_queue_sort(q, (GCompareDataFunc)sort_lastName, NULL);

    // print the list
    g_queue_foreach(q, (GFunc)prt, NULL);
    if( fclose(fp) != 0 )
    {
        puts("Failed to close file."); /* prints !!!Hello World!!! */
        return 0;
    }
    g_queue_free(q);

// Ready for the bonus?
    bonusFunction();

    // KTHXBYE
    return( 0 );
}

/** This is the bonus function.
  **/
void bonusFunction() {
    //! This is the bonus array!
    int arrayOfInts[] = { 1, 1, 2, 3, 5, 8, 13, 21, 34 };

    // BONUS!
    // 1\. Loop through the bonus array and print it without using square brackets ("[" and "]").

    // All done.
    return;
} 
```

以及下面的 CSV

```
Brad Fawcett,24,male
Steve Settlemyre,29,male
Dave Hegenbarth,44,male
Cathy Colapiertro,41,female
Steve Mahoney,23,male
Dave Mulford,26,male
Doug Manley,24,male
Steve Carrington,24,male
Lauren Jordan,31,female
Tanya Bakalov,26,female 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T03:53:17.857

首先，您需要正确解析性别：

```
 // Get gendor
    token = strtok(NULL,",\n");
    if(strcasecmp(token, "female") == 0)
        ptr_one->gender = FEMALE;
    else
        ptr_one->gender = MALE; 
```

然后使用适当的比较函数：

```
gint sort_gender(gconstpointer a, gconstpointer b, gpointer data) {
    return ((Person*)a)->gender - ((Person*)b)->gender;
} 
```

和奖金功能：

```
void bonusFunction() {
    //! This is the bonus array!
    int arrayOfInts[] = { 1, 1, 2, 3, 5, 8, 13, 21, 34 };

    // BONUS!
    // 1\. Loop through the bonus array and print it without using square brackets ("[" and "]").
    int i;
    int *n = arrayOfInts;
    for(i = 0; i < sizeof(arrayOfInts)/sizeof(int); i++)
        printf("%d\n", *n++);

    return;
} 
```

# flash - 如何为原生扩展创建 swc？

> ID：15376032
> 
> 赞同：2
> 
> 时间：2013-03-13T02:34:57.943
> 
> 标签：flash, adobe, flash-builder, swc, air-native-extension

我正在尝试使用我在 Flash Builder 中创建的 Android 应用程序实现应用程序内计费，因此我下载了一个本机扩展程序来处理此问题 ( [https://github.com/pozirk/AndroidInAppPurchase](https://github.com/pozirk/AndroidInAppPurchase) )。它带有 .ane 文件，但是当我在项目的属性中添加这个“本机扩展”时，当我尝试运行导致运行时 VerifyError 说 InAppPurchase 类可以的项目时，我得到一个本机扩展错误找不到。

我认为这是因为 ANE 的下载没有附带 .swc 文件。我对使用本机扩展或创建 Flex 库知之甚少，而且我在任何地方读到的任何内容都不是很有帮助。我尝试创建一个新的 Flex 库项目并将 as3/InAppPurchase 添加到源路径，但这只是从 ane 文件在另一个位置创建了一个 swc 文件（当我将新的 swc 文件添加到我的项目时导致相同的错误库路径）。

抱歉，如果这是一个微不足道的问题，但我真的不知道从这里去哪里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T12:02:48.030

您不需要 SWC 文件，除非您尝试在旧版本的 flash builder（即 4.5）中使用它。ANE 文件基本上是一个 SWC 文件，但也包含本机代码。

您是在设备上还是在桌面上运行您的项目？

一些 ANE 不会提供在非设备情况下运行的“默认”解决方案，这可能会导致您的错误。尝试在设备上运行它，看看是否出现相同的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T09:20:28.340

听起来编译器找到了 ANE 定义（因为您可以编译），但 ANE 不包含在最终的应用程序包中。

检查是否在**Project** > **Properties** > **Flex Build Packaging** > **Google Android**中选择了与应用程序打包的本机扩展，然后转到**Native Extensions**选项卡并确保该扩展在此处列出，并且勾选了**Package下的框。**

# python - 使用python计算文件中单词之间的空格数？

> ID：15376033
> 
> 赞同：1
> 
> 时间：2013-03-13T02:35:13.477
> 
> 标签：python, parsing, file-io, delimiter, cobol

我真的很亲近。我通读了“[每个单词之间的空格数](https://stackoverflow.com/questions/8864795/number-of-space-between-each-word)”，它确实提供了这一行：

```
counts = [(len(list(cpart))) for c,cpart in groupby(s) if c == ' '] 
```

但我真的不明白......我明白，或者我假设，C 是分隔符，S 是你分组的依据，你把结果列表？（python 的新手，数组？）放入计数（S 指的是先前实例化的变量）

# 我将如何确定这样的事情？

```
 AMOUNT       DATE       
   NAME          ACCOUNT#         DISCOUNT         DUE         DUE 
```

我正在创建一个程序，它允许我查看随机创建的 COBOL 输出文件头并使用它来创建 PIC(X) 的关联。

## 示例解决方案输出为：

1.  图 X(30) 价值空间。
2.  图 X(6) 值“金额”。
3.  图 X(8) 价值空间。
4.  图 X(4) 值“日期”。

重要的部分是数字。我可以明显地确定字符串的长度，但我不知道如何......

这是我到目前为止所展示的我正在工作的内容，哈哈：

```
from itertools import groupby
from test.test_iterlen import len
from macpath import split
from lib2to3.fixer_util import String

file = open("C:\\Users\\Joshua\\Desktop\\Practice\\cobol.cbl", 'r+')

line1 = file.readline()
split = line1.split()
print (split)
print ()

counts = [(len(list(cpart))) for c,cpart in groupby(split) if c == ' ']

print (counts)

index = 0
while index != split.__len__():
    if split[index].strip() != None:
        print ("PICX(" + ") VALUE " + "\"" + split[index] + "\".")
    elif counts[index] == None:
        print ("PICX(" + ") VALUE " + "\"" + split[index] + "\".") 
    index+=1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T03:30:39.823

我将从解释第一行开始：

```
counts = [(len(list(cpart))) for c,cpart in groupby(s) if c == ' '] 
```

`s`实际上是输入字符串。因此，要运行它，您将从：

```
s = "   NAME          ACCOUNT#         DISCOUNT         DUE         DUE" 
```

`groupby(s)`返回元组的迭代器。该元组中的第一个值是输入字符串中的字符，第二个值是另一个（嵌套）迭代器，它将遍历字符的重复值。输入`list`形式（用于说明）它看起来像这样：

```
groupby("hello!!!")
[('h', ['h']), ('e', ['e']), ('l', ['l', 'l']), ('o', ['o']), ('!', ['!', '!', '!'])] 
```

所以，`c`不是分隔符，而是保存字符串中每个字符的变量`s`，并且`cpart`是遍历所有连续值的迭代器`c`。一旦你调用`len(cpart)`它，它就会给出一个列表`[c,c,c,...]`（每个项目都是相同的！），该列表的长度是字符`c`重复的次数。通常它只会是一个。例如，对于`'A'`in `'NAME`' 你会得到`c == A`and `list(cpart) == ['A']`。`NAME`但是对于and之间的空格`ACCOUNT#`，你会得到`c == ' '`and `cpart == [' ',' ',' ',' ',' ',' ',' ',' ',' ',' ']`。

括号内的整个内容`[]`意味着它会生成一个列表，就好像您在`for`循环中附加到列表一样，并且每个项目的值是`for`. 在这里，它`len(list(cpart))`计算字符重复实例列表的长度。因此，它将是一个包含字符重复次数的列表。这`if c == ' '`意味着仅当该字符为空格时，该项目才会添加到列表中。

* * *

以上将计算空格。要计算单词（例如，要获得 PIC X(6) VALUE "AMOUNT"），您可以简单地执行以下操作：

```
word_counts = [ len(word) for word in s.split() ] 
```

where `split`（你已经使用过）返回一个单词列表，这些单词以前是一个由空格分隔的字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T14:47:53.500

像这样分解输出没有特别的意义。你可以：

```
 05  FILLER (optional) PIC X(width-of-report) VALUE
     "                              AMOUNT        DATE             "(in column 72)
-                         ". 
```

“-”在第 7 列，表示字母数字文字的延续，不需要开引号，但需要闭引号。

您的创建过程非常简单。你总是输出这三行，你所要做的就是把你的数据“砍”成 59 个字节（第二行）和“其余的”（不知道你的报告宽度）第三行。

# c++ - 带有模板函数调用的 C++ 未解析的外部符号

> ID：15376034
> 
> 赞同：1
> 
> 时间：2013-03-13T02:35:50.280
> 
> 标签：c++, game-engine, template-function

只要我不调用该函数，一切都很好，但是一旦我调用该函数，我就会得到一个未解析的外部符号。我所有的类都在 SSE 命名空间（我自己的）中，并且到目前为止运行良好。让我展示。

```
#include "SDL.h"
#include "Game.h"
#include "GameObject.h"
#include <tchar.h>

SSE::Game Pong;

int _tmain(int argc, char* argv[])
{
    SSE::GameObject* object;
    Pong.Initialize("Pong!");
    object = Pong.Objects().ObjectCreate<SSE::GameObject>();
    while (!Pong.bQuit)
    {
        Pong.Update();
        Pong.Draw();
    }
    return 0;
} 
```

这是我调用函数的地方。Game 是一个为我运行幕后工作的类（该类一切正常），Game.Objects() 返回负责创建和删除对象以及为对象提供组件的 Game 的 ObjectManager。ObjectCreate 是一个模板函数，它返回一个指向创建的新对象的指针。

从 ObjectManager 的 .cpp 文件中：

```
template <class G>G* ObjectManager::ObjectCreate()
{
    ObjectList* tempObjList;
    tempObjList = new tempObjList();
    tempObjList->objectType = G->ClassName();
    tempObjList->objectTypeNumber = 0;
    for (unsigned int i = 0; i < v_objList.size(); i++;)
    {
        if (v_objList[i]->objectType == tempObjList->objectType)
            tempObjList->objectTypeNumber++;
    }
    tempObjList->gameObject = new G(tempObjList->objectType + "_" + tempObjList->objectTypeNumber);
    v_objList.push_back(tempObjList);
    if (v_objList.back() != tempObjList)
    {
        delete tempObjList;
        return NULL;
    }
    return v_objList.back();
} 
```

这会为新的 GameObject 分配一个唯一的名称并在内存中创建它，然后将其存储到一个向量中。另一件要提的事情是，对于许多与此类似的 ObjectManager 和 GameObject 函数，我都遇到了这个未解决的外部符号错误，但只有当我在代码中调用它们时才会出现相同的情况。

仅供参考，错误为：Error 2 error LNK2019: unresolved external symbol "public: class SSE::GameObject * __thiscall SSE::ObjectManager::ObjectCreate(void)" (??$ObjectCreate@VGameObject@SSE@@@ObjectManager @SSE@@QAEPAVGameObject@1@XZ) 在函数 _SDL_main C:\SDL\SimpleStateEngine\SSE\main.obj SSE 中引用

如果您需要其他任何东西，请告诉我，我一直在寻找几个小时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T02:49:06.613

您陷入了在 cpp 文件中定义模板函数的常见陷阱。

您需要在调用代码可以看到的任何地方定义该函数，因为它仅在与特定模板参数一起使用时才被实例化。

您的另一个选择是`ObjectCreate<SSE::GameObject>`在您的 cpp 文件中专门实例化它。

您所做的是定义如何*实例*化`ObjectManager.cpp`并调用它，就好像它在另一个 cpp 文件*中实例化一样。*

# fancybox - 如何使 Fancybox 1.3.4 适合我的 Wordpress 主题的屏幕？

> ID：15376039
> 
> 赞同：2
> 
> 时间：2013-03-13T02:36:43.297
> 
> 标签：fancybox, themes

Fancybox 1.3.4 JS 带有我的 Wordpress 主题 Gridlocked。一切正常，但灯箱弹出窗口对于屏幕来说太大了。如果需要始终适合屏幕，我希望图像缩小。

查看 Fancybox 站点说明，似乎我想在 PHP 或 JS 文件本身中设置“autoscale:true”来解决这个问题。主题附带的 javascript 文件已经将此设置为 true，但它不起作用。我不知道我应该尝试在所有主题 php 文件的哪个位置包含该参数。有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T03:01:11.293

fancybox 的初始化在**jquery.custom.js**中完成。您可以在那里找到以下几行：

```
function tz_fancybox() {
    if(jQuery().fancybox) {
        jQuery("a.lightbox").fancybox({
            'transitionIn'  :   'fade',
            'transitionOut' :   'fade',
            'speedIn'       :   300, 
            'speedOut'      :   300, 
            'overlayShow'   :   true,
            'autoScale'     :   false,
            'titleShow'     :   false,
            'margin'        :   10,
        });
    }
}

tz_fancybox(); 
```

改成：

```
function tz_fancybox() {
    if(jQuery().fancybox) {
        jQuery("a.lightbox").fancybox({
            'transitionIn'  :   'fade',
            'transitionOut' :   'fade',
            'speedIn'       :   300, 
            'speedOut'      :   300, 
            'overlayShow'   :   true,
            'autoScale'     :   true,
            'titleShow'     :   false,
            'margin'        :   10,
        });
    }
}

tz_fancybox(); 
```

# php - 使用 Amazon PHP SDK 2 上传到 Amazon S3 - 每次都在同一文件上出现 MD5 错误

> ID：15376042
> 
> 赞同：3
> 
> 时间：2013-03-13T02:36:47.357
> 
> 标签：php, amazon-s3, md5sum

我有一个上传视频的 PHP 应用程序（从小的 - 1MB - 到大的 - 400MB）。

一切正常，除了一些特定的文件。

这些文件总是出现 MD5 校验和错误：

WS 错误代码：BadDigest，状态代码：400，AWS 请求 ID：89BBC1D79A4492A7，AWS 错误类型：客户端，AWS 错误消息：您指定的 Content-MD5 与我们收到的不匹配。

我验证了 MD5，它确实不匹配，但我不知道为什么！

如果是损坏错误，则返回的 S3 MD5 会有所不同，但始终相同。

在我的本地机器（Mac）和服务器（Ubuntu）上，MD5 是：

9131ee88a194b555d0a3519f67294f31

在亚马逊，它是：

8e6789baf9c5d434003a5443d30143fa

使用以下代码摘录进行上传：

```
 try
    {
        $start = (float) array_sum(explode(' ',microtime()));

        $save_path = "/tmp/$video[quality]/$video[video_id].mp4";
        $db_path = "$video[channel]/$video[quality]/$video[video_id].mp4";
        $bytes = number_format(filesize($save_path) / 1048576, 2) . ' MB';

        System_Daemon::info(($i + 1) . "/$num_of_videos - started upload of $video[channel] - $video[video_id] with $bytes");

        $s3 = Aws\S3\S3Client::factory(
                        array(
                            'key' => 'MY KEY',
                            'secret' => 'MY SECRET',
                            'region' => Region::US_EAST_1
                        )
        );

        $results = $s3->putObject(array(
            'Bucket' => 'media.tubelivery.com',
            'Key' => $db_path,
            'Body' => fopen($save_path, 'r'),
            'ACL' => Aws\S3\Enum\CannedAcl::PUBLIC_READ
                ));

        //Delete the original file
        unlink($save_path);
        clearstatcache($save_path);

        //Change the video state to 0
        update_video_state_to_uploaded_to_S3($video['id']);

        $end = (float) array_sum(explode(' ',microtime()));
        $time = sprintf("%.4f", ($end - $start)) . " sec";

        System_Daemon::info("uploaded video " . ($i + 1) . " to $db_path in $time");
    }
    catch (Aws\S3\Exception\S3Exception $e)
    {
        System_Daemon::err("ERROR uploading $video[video_id].mp4 to S3");
        foreach($results as $key => $result)
        {
            System_Daemon::err("$key => $result");
        }
        $save_path = "/tmp/$video[quality]/$video[video_id].mp4";   
        clearstatcache($save_path);
        System_Daemon::err("ERROR: $e");
    } 
```

这是确切的日志：

```
[Mar 13 02:35:53]      err: ERROR uploading 4XwKKMlGibo.mp4 to S3 [l:145]
[Mar 13 02:35:53]      err: Expiration =>  [l:148]
[Mar 13 02:35:53]      err: ServerSideEncryption =>  [l:148]
[Mar 13 02:35:53]      err: ETag => "7f65e3f892d96b9703d411219e2b868a" [l:148]
[Mar 13 02:35:53]      err: VersionId =>  [l:148]
[Mar 13 02:35:53]      err: RequestId => 80821CC621946236 [l:148]
[Mar 13 02:35:53]      err: ERROR: Aws\S3\Exception\BadDigestException: 
                            AWS Error Code: BadDigest, 
                            Status Code: 400, 
                            AWS Request ID: 7C4B4834C6235D1A, 
                            AWS Error Type: client, 
                            AWS Error Message: The Content-MD5 you specified did not match what we received. [l:152] 
```

有任何想法吗？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-09T21:29:41.113

我正在使用 S3 进行大型数据传输，并收到完全相同的错误消息。事实证明，我们使用的库对超过一定大小的文件使用了分段上传功能。我不确定 PHP SDK 是否做同样的事情，但显然多部分对象存储在 S3 中的方式导致生成的哈希值与在本地计算机上生成的哈希值不同。

我看到这个问题很老了，但想让你知道你并不孤单！

# ruby - 当没有更改时，`Array#reject!` 返回 `nil` 的目的是什么？

> ID：15376045
> 
> 赞同：0
> 
> 时间：2013-03-13T02:36:52.697
> 
> 标签：ruby, arrays

`Array#reject!``nil`如果块对`false`接收器中的每个元素求值（在原地更改，在这种情况下不会更改），则返回，与相比`Array#reject`：

```
a=1,2,3
a.reject {false} # => [1, 2, 3]
a.reject! {false} # => nil 
```

这在我看来相当奇怪。为什么`Array#reject!`被设计成这样？在这种情况下应该`Array#reject!`表现得像吗？`Array#reject`

我希望能够链接方法，如`select!`,`reject!`和`map!`. 有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T02:45:04.270

改用`delete_if`？其余的东西链很好。

* * *

`reject`就像 一样`select`，它实际上是返回一个新容器，然后只指向新容器，因为您要求！，而`delete_if`直接就地执行此操作。

我同意这不是自然的，但会发生很多事情，是你写的：

```
value = a.reject!; if value, do {something} end 
```

所以它返回 null 是有道理的，因为大概如果没有拒绝，就不需要做任何事情。如果您期望有所改变，那么您只需使用`select!`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T04:31:04.913

我认为`reject!`设计为在未进行任何更改时返回 nil，因此可以像这样很好地使用它：

```
candidates.reject! { |c| ... } or puts "Unable to reject any candidates." 
```

由于`reject!`在没有拒绝时返回 nil，因此“或”之后的部分仅在没有拒绝时运行。

您也可以做类似 Kasumi 的回答。

# asp.net-mvc - ASP.NET MVC 路由 - /resourcename 路由

> ID：15376046
> 
> 赞同：0
> 
> 时间：2013-03-13T02:36:59.920
> 
> 标签：asp.net-mvc, routes

所以，我真的很想为每个特定类型的实体创建“登陆页面”路线。

所以，假设我有一个关于漫画英雄的网站。

我想要[http://myherosite.com/superman](http://myherosite.com/superman)和[http://myherosite.com/batman](http://myherosite.com/batman)等登陆页面。

[我知道如何使用http://myherosite.com/heroes/superman](http://myherosite.com/heroes/superman)和[http://mysite.com/heroes/batman 之](http://mysite.com/heroes/batman)类的东西来完成此任务。URL 中的“英雄”允许特定的路由，因此允许控制器和默认操作。

是否可以设置一个路由来完成此操作并且仍然保留默认路由（“{controller}/{action}/{id}”）（我正在使用它）。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T04:01:14.730

`"Default"`您可以在将所有单段路径解释为包含`heroes`控制器的操作方法之前添加一个路由。

```
routes.MapRoute(
    name: "Landings",
    url: "{action}",
    defaults: new { controller = "Heroes" }
); 
```

当然，这会阻止您对默认路由使用任何默认操作，因为这些也是单段路径。

# sitecore - 如何使用 Sitecore Advanced Database Crawler 搜索不包含某些关键字的项目？

> ID：15376049
> 
> 赞同：1
> 
> 时间：2013-03-13T02:37:33.660
> 
> 标签：sitecore, sitecore6

我在数据库中有数百万个项目。用户可以根据关键字搜索这些项目。在搜索功能中，我需要提供一个搜索非该关键字的功能。

例如`Item A`，有一个名为的字段`msg`，其值为`Sitecore is awesome and great`。在搜索框中，用户可以选中表示显示任何不包含关键字的项目的复选框。可能是用户键入了`is`关键字，所以`Item A`不会被 ADC 显示或检索。

编辑：目前我使用的是 sitecore6.6，因此 Search 方法已被弃用。我已经使用 Occurrence.MustNot 尝试了 Not 关键字，但它没有返回任何结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T21:31:08.123

我所做的不包括与结果项集相关的关键字是这样的：

```
 protected List<Item> getSearchResults(string queryToSearch, string selectedFilter, string notToSearch)
    {
        Database db = Sitecore.Context.Database;
        var index = SearchManager.GetIndex("siteSearchIndexName");

        using (SortableIndexSearchContext context = new SortableIndexSearchContext(index))
        {
            if (!String.IsNullOrWhiteSpace(query))
            {
                query.ToLower();
                CombinedQuery cq = new CombinedQuery();
                QueryBase qbKeyword = new FieldQuery("_orderkeywordpair", query);
                QueryBase qbContent = new FieldQuery("_content", query);
                QueryBase qbHtml = new FieldQuery("html", query);

                if (!String.IsNullOrWhiteSpace(selectedFilter) && selectedFilter.ToLower() != "all")
                {
                    QueryBase qbFilter = new FieldQuery("_pagetype", selectedFilter);
                    cq.Add(qbFilter, QueryOccurance.Must);
                }
                cq.Add(qbKeyword, QueryOccurance.Should);
                cq.Add(qbContent, QueryOccurance.Must);
                cq.Add(qbHtml, QueryOccurance.MustNot);

                SearchHits hits = context.Search(cq); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T11:53:56.170

Sitecore Advanced Database Crawler 是 Sitecore.Search API 的扩展，Sitecore.Search API 是 Lucene 的包装器。

在 Lucene 中，您可以使用`NOT`或`-`排除诸如`"Sitecore NOT awesome"`or之类的用户查询`"Sitecore -awesome"`。

要排除某些内容，您至少需要一个包含术语。

不确定它是否有效，但请尝试一下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T16:45:53.380

这是未经测试的，但您可能会幸运地使用 a`MatchAllDocsQuery`并以 a 的形式提供关键字`Filter`。

```
BooleanQuery booleanQuery = new BooleanQuery();

QueryParser queryParser = new QueryParser("msg", new StandardAnalyzer());
Query userQuery = queryParser.Parse("Sitecore is awesome and great");
booleanQuery.Add(userQuery, reverseQuery.Checked ? BooleanClause.Occur.MUST_NOT : BooleanClause.Occur.MUST);

MatchAllDocsQuery matchAllQuery = new MatchAllDocsQuery();
Filter filter = new QueryFilter(booleanQuery);

using (QueryRunner queryRunner = new QueryRunner("myIndex"))
{
    var skinnyItems = queryRunner.RunQuery(matchAllQuery, filter, ...)
} 
```

# c# - 在 WPF 中，如何将参数传递给 ICommand.CanExecute()

> ID：15376052
> 
> 赞同：0
> 
> 时间：2013-03-13T02:37:59.470
> 
> 标签：c#, wpf

```
public bool SelectAll
    {
        get { return this.Get<bool>("SelectAll"); }
        set 
        {
            this.Set<bool>("SelectAll", value);
            if (this.SelectAllCommand.CanExecute(null))
                this.SelectAllCommand.Execute(value);
        }
    } 
```

作为我的代码，我想要一个复选框 - 选择所有功能。当我手动单击“全选”时，我想执行 SelectAllCommand，但如果自动选中复选框，CanExecute 应该返回 false 给我......

我不知道如何将参数传递给 CanExecute ......我怎样才能完美地做到这一点......？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T02:45:01.810

好吧，在您的代码中，您当前正在传递一个参数，该参数恰好为空。所以你不更准确地想做

```
if (this.SelectAllCommand.CanExecute(value)) 
```

?

# html - 内容框随浏览器大小调整大小

> ID：15376058
> 
> 赞同：-1
> 
> 时间：2013-03-13T02:38:13.480
> 
> 标签：html, css

我一直试图弄清楚这个网站是如何做到这一点的。如果您转到 [] 并调整浏览器屏幕的大小，您会看到中间的主要内容容器随着浏览器尺寸的变小而变小。它是如何工作的？

我正在尝试对我正在构建的 wordpress 网站做类似的事情。

谢谢你，AJ

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T02:43:29.023

主列中所有堆叠元素的宽度为 65%，指的是其父元素的比例。在这种情况下，这是视口的整个宽度。他们将调整其最小宽度（设置为 700 像素）和最大宽度（设置为 1920 像素）。非常简单的 CSS。

熟悉 Firebug 和/或 Chrome 和 Safari 的开发者工具栏。对于任何使用网站的人来说，它们都是必不可少的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T02:44:14.790

我相信你指的是它是响应式的。它可能使用 CSS @media 查询来根据浏览器的分辨率更改站点宽度。

您可以在此处找到更多信息：http: [//mobile.smashingmagazine.com/2010/07/19/how-to-use-css3-media-queries-to-create-a-mobile-version-of-your-website /](http://mobile.smashingmagazine.com/2010/07/19/how-to-use-css3-media-queries-to-create-a-mobile-version-of-your-website/)

此外，您的网站不是一个很好的例子，请在此处查看更好的示例：http: [//mediaqueri.es/](http://mediaqueri.es/)

# eclipse - Servlet 在 Eclipse 中的 Tomcat 上运行，但未在 Ubuntu Server Tomcat 上显示

> ID：15376068
> 
> 赞同：1
> 
> 时间：2013-03-13T02:38:36.320
> 
> 标签：eclipse, tomcat, servlets, ubuntu-12.04

我有一个如下的 servlet，它在我的 Eclipse Tomcat 上完美运行。当我将它上传到 webapps 文件夹并在我的 Ubuntu 服务器上重新启动我的 tomcat 时，它的 URL（/ServerAPP/Login）不会加载，尽管 tomcat 根页面很好。如果有人知道为什么会这样，我将不胜感激。我对 Ubuntu 和 Tomcat 的内部工作还很陌生，所以我可能会错过任何东西。我可以根据要求提供更多信息，我只是不确定需要多少，或者是否有一些简单而愚蠢的事情我没有考虑。

```
package Actions;
import java.io.*;
import java.sql.*;
import java.util.logging.Logger;

import javax.servlet.*;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.*;
import javax.sql.DataSource;

@WebServlet(urlPatterns={"/Login"})
public class Login extends HttpServlet implements DataSource {

private String User =  null;
Connection connection = null;
private String password =  null;

public void doGet(HttpServletRequest request, HttpServletResponse response)
    throws ServletException, IOException {
    if(request.getParameter("User") != null){ 
        this.setUser((String) request.getParameter("User").toString());
    }
    if(request.getParameter("password") != null){
        this.setPassword((String) request.getParameter("password").toString());
    }

    try {
        System.out.println("Loading driver...");
        Class.forName("com.mysql.jdbc.Driver");
        System.out.println("Driver loaded!");
    } catch (ClassNotFoundException e) {
        throw new RuntimeException("Cannot find the driver in the classpath!", e);
    }

    Login ds = new Login();
    try {
        connection = ds.getConnection();
    } catch (SQLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    PrintWriter out = response.getWriter();
    if(connection != null){

        //out.println(User  + "   " + password);

        //Check if user exists in database
        if(User!= null){

            Statement stmt;
            ResultSet rs;
            try {
                stmt = connection.createStatement();
                rs = stmt.executeQuery("SELECT * FROM tblUsers WHERE Username = '" + User + "';");

                if(!rs.next()){
                    out.println("Username: " + User + " was not found in Users table.");
                }
                else{
                    //User was found now check if password is correct
                    if(rs.getString(3).equals(password)){
                        out.println("User: " + User + " login successful!");
                    }
                    else if(rs.getString(3).equals(password) == false){
                        //password was incorrect
                        out.println("Password incorrect!");
                    }

                    /*
                    while(rs.next()){
                        out.println("User ID: " + rs.getInt(1) + " Username: " + rs.getString(2));
                    }
                    */

                }

                rs.close();
                stmt.close();
                connection.close();

            } catch (SQLException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

        }

        /*
        Statement stmt;
        ResultSet rs;
        try {
            stmt = connection.createStatement();
            rs = stmt.executeQuery("Select * from tblUsers;");
            while(rs.next()){
                out.println("User ID: " + rs.getInt(1) + " Username: " + rs.getString(2));
            }
            rs.close();
            stmt.close();
            connection.close();
        } catch (SQLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        */

    }

}

@Override
public PrintWriter getLogWriter() throws SQLException {
    // TODO Auto-generated method stub
    return null;
}

@Override
public void setLogWriter(PrintWriter out) throws SQLException {
    // TODO Auto-generated method stub

}

@Override
public void setLoginTimeout(int seconds) throws SQLException {
    // TODO Auto-generated method stub

}

@Override
public int getLoginTimeout() throws SQLException {
    // TODO Auto-generated method stub
    return 0;
}

@Override
public Logger getParentLogger() throws SQLFeatureNotSupportedException {
    // TODO Auto-generated method stub
    return null;
}

@Override
public <T> T unwrap(Class<T> iface) throws SQLException {
    // TODO Auto-generated method stub
    return null;
}

@Override
public boolean isWrapperFor(Class<?> iface) throws SQLException {
    // TODO Auto-generated method stub
    return false;
}

@Override
public Connection getConnection() throws SQLException {
    if (connection != null) {
        System.out.println("Cant craete a Connection");
} else {
        connection = DriverManager.getConnection(
                        "<redacted>", "AWSCards", "Cards9876");
}
return connection;
}

@Override
public Connection getConnection(String username, String password)
        throws SQLException {
    // TODO Auto-generated method stub
    if (connection != null) {
            System.out.println("Cant craete a Connection");
    } else {
            connection = DriverManager.getConnection(
                            "<redacted>", username, password);
    }
    return connection;
}

public String getUser() {
    return User;
}

public void setUser(String user) {
    User = user;
}

public String getPassword() {
    return password;
}

public void setPassword(String password) {
    this.password = password;
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T04:34:28.823

所以我最终弄清楚了，我认为它可能会帮助其他人知道。原因：显然，我在ubuntu上的tomcat只有java 6，而我的eclipse针对的是java 7。

修复：我去了项目属性并更改了目标（这使eclipse变得疯狂），但随后重新编译并将其放在ubuntu上的tomcat上，它工作正常。

感谢那些试图帮助我的人。

# ruby-on-rails - 如何从继承的资源宝石中移回来

> ID：15376069
> 
> 赞同：0
> 
> 时间：2013-03-13T02:38:38.933
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

最近我为我的两个模型/控制器/视图搭建了脚手架，我们称它们为 xxx 和 yyy。现在我查看控制器文件，我什么也没看到！但它仍在运行，经过调查，我发现这是由于

[继承的资源宝石](https://github.com/josevalim/inherited_resources)

所以控制器目前看起来像这样

```
class xxx < InheritedResources::Base
end 
```

所以如果我改变

```
InheritedResources::Base to ApplicationController 
```

就像我有其他控制器一样，它的行为会像普通控制器吗？我尝试查找文档，我被推荐到这里提问。

为这两个脚手架恢复正常控制器/模型的最佳方法是什么？

感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-11-20T20:01:31.640

补充`config/application.rb`：

```
#use rails scaffolding generator
config.app_generators.scaffold_controller = :scaffold_controller 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T05:31:07.973

当你使用`InheritedResources`时，gem 会注册一个控制器生成器，它会生成你的控制器定义。使用`InheritedResources::Base`的目的是清理您的控制器并将所有七个[REST](http://en.wikipedia.org/wiki/Representational_state_transfer)操作移动到一个公共类。如果扩展，则不需要定义以下任何方法`InheritedResources::Base`

```
index
new
create
edit
update
show
destroy 
```

它们都是为您定义的。继续做一个测试，搭建一个资源并转到它的索引方法，添加一些记录，玩......

现在，如果您真的想回到旧的方式并让您的代码由捆绑的控制器生成器生成，`inherited_resources`请从您的 Gemfile 中删除`bundle install`，然后再次生成您的脚手架。

希望能帮助到你 （：

PS如果您决定使用`InheritedResources`（我建议您这样做），您可以覆盖您想要自定义的任何方法。看看[文档](https://github.com/josevalim/inherited_resources)，那里的一切都更清楚了。

# mysql - 选择查询两位数据

> ID：15376071
> 
> 赞同：0
> 
> 时间：2013-03-13T02:38:50.543
> 
> 标签：mysql

表 (userData) 如下所示：

```
userId    property    value
1         AGE         28
1         GENDER      M
2         AGE         28
2         GENDER      F
3         AGE         29
3         GENDER      F
4         AGE         29
4         GENDER      F 
```

所以我想得到类似的东西：

```
Gender    Age    Count
M         28     1
F         28     1
F         29     2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T02:50:41.743

像这样的东西？

```
SELECT
    ud1.value AS gender,
    ud2.value AS age,
    COUNT(*) AS c
FROM userData ud1
JOIN userData ud2 ON
    ud1.userId = ud2.userId AND
    ud2.property = 'AGE'
WHERE ud1.property = 'GENDER'
GROUP BY gender, age 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T02:48:39.047

```
-- Not tested
SELECT *
  FROM userData age INNER JOIN
       userData gender ON gender.userId = age.userId
 WHERE age.property = 'AGE'
   AND gender.property = 'GENDER' 
```

你会得到

```
userId    property    value   userId    property    value   
1         AGE         28      1         GENDER      M
2         AGE         28      2         GENDER      F
3         AGE         29      3         GENDER      F
4         AGE         29      4         GENDER      F 
```

完成后，您可以 COUNT() （未测试）：

```
 SELECT age.value, gender.value, COUNT(*)
    FROM userData age INNER JOIN
         userData gender ON gender.userId = age.userId
   WHERE age.property = 'AGE'
     AND gender.property = 'GENDER'
GROUP BY age.value, gender.value 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T02:51:39.570

```
SELECT  Gender, Age, COUNT(*) TotalCount
FROM
        (
            SELECT  UserID,
                    MAX(CASE WHEN property = 'Gender' THEN value END) Gender,
                    MAX(CASE WHEN property = 'Age' THEN value END) Age
            FROM    tableName
            GROUP   BY UserID
        ) s
GROUP   BY Gender, Age 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/6a636/2)

输出

```
╔════════╦═════╦════════════╗
║ GENDER ║ AGE ║ TOTALCOUNT ║
╠════════╬═════╬════════════╣
║ M      ║  28 ║          1 ║
║ F      ║  28 ║          1 ║
║ F      ║  29 ║          2 ║
╚════════╩═════╩════════════╝ 
```

# asp.net - 使用复选框从gridview获取值

> ID：15376074
> 
> 赞同：2
> 
> 时间：2013-03-13T02:39:32.243
> 
> 标签：asp.net, gridview

![在此处输入图像描述](../Images/536cefd28789a34e4d9da15408e706ba.png)

我有这个gridview，我试图打印出用户检查的任何列的MMBR_PROM_ID。

（默认.apsx）

```
Welcome to ASP.NET!

    </h2>

            <div style="width: 700px; height: 370px; overflow: auto; float: left;">
                <asp:GridView ID="GridView1" runat="server" HeaderStyle-CssClass="headerValue" 
                    onselectedindexchanged="GridView1_SelectedIndexChanged">
                <Columns>
                <asp:TemplateField HeaderText="Generate">
                    <ItemTemplate>
                        <asp:CheckBox ID="grdViewCheck" runat="server" />
                    </ItemTemplate>
                </asp:TemplateField>
                </Columns>
                </asp:GridView>
                </div>

<asp:Button ID="Button1" runat="server" onclick="Button1_Click" Text="Generate" />

</asp:Content> 
```

（默认.aspx.cs）

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            FrontOffEntities tmpdb = new FrontOffEntities();

            List<MMBR_PROM> newListMMBR_Prom = tmpdb.MMBR_PROM.ToList();

            GridView1.DataSource = newListMMBR_Prom;
            GridView1.DataBind();
        }

    } 
```

所以我的目标是当我按下生成时，我希望能够将用户检查的所有 MMBR_PROM_ID 作为字符串打印出来。我对 aspnet 有点陌生，所以我很难应付语法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T03:04:58.403

根据您提到的要求，您可以尝试以下给定的代码以在“生成按钮单击”上从**Gridview1获取****MMBR_PROM_ID的值。**

 **```
 //For every row in the grid
     foreach (GridViewRow r in GridView1.Rows)
        {
            //Find the checkbox in the current row being pointed named as grdViewCheck
            CheckBox chk = (CheckBox)r.FindControl("grdViewCheck");

            //Print the value in the reponse for the cells[1] which is MMBR_PROM_ID
            if (chk!=null && chk.Checked)
            {
                Response.Write(r.Cells[1].Text);
            }
        } 
```

在这里， cells[1] 指的是特定行的单元格索引，在您的情况下，它是您要打印的**MMBR_PROM_ID 。**希望这可以帮助！

如果您正在寻找**MMBR_PROM_ID**的逗号分隔值，下面提到的代码将为您工作。

```
 //Declaration of string variable 
     string str="";

     //For every row in the grid
     foreach (GridViewRow r in GridView1.Rows)
        {
            //Find the checkbox in the current row being pointed named as grdViewCheck
            CheckBox chk = (CheckBox)r.FindControl("grdViewCheck");

            //Print the value in the reponse for the cells[1] which is MMBR_PROM_ID
            if (chk!=null && chk.Checked)
            {
                Response.Write(r.Cells[1].Text);
                //appending the text in the string variable with a comma
                str = str + r.Cells[1].Text + ", ";
            }
        }
      //Printing the comma seperated value for cells[1] which is MMBR_PROM_ID
      Response.Write(str); 
```**

# r - R中的聚类分析：确定最佳聚类数

> ID：15376075
> 
> 赞同：454
> 
> 时间：2013-03-13T02:39:40.627
> 
> 标签：r, cluster-analysis, k-means

作为 R 的新手，我不太确定如何选择最佳数量的集群来进行 k 均值分析。在绘制以下数据的子集后，有多少个集群是合适的？如何执行集群树状分析？

```
n = 1000
kk = 10    
x1 = runif(kk)
y1 = runif(kk)
z1 = runif(kk)    
x4 = sample(x1,length(x1))
y4 = sample(y1,length(y1)) 
randObs <- function()
{
  ix = sample( 1:length(x4), 1 )
  iy = sample( 1:length(y4), 1 )
  rx = rnorm( 1, x4[ix], runif(1)/8 )
  ry = rnorm( 1, y4[ix], runif(1)/8 )
  return( c(rx,ry) )
}  
x = c()
y = c()
for ( k in 1:n )
{
  rPair  =  randObs()
  x  =  c( x, rPair[1] )
  y  =  c( y, rPair[2] )
}
z <- rnorm(n)
d <- data.frame( x, y, z ) 
```

* * *

## 回答 #1

> 赞同：1060
> 
> 时间：2013-03-13T03:20:13.817

如果您的问题是`how can I determine how many clusters are appropriate for a kmeans analysis of my data?`，那么这里有一些选项。关于确定集群数量的维基[百科文章](http://en.wikipedia.org/wiki/Determining_the_number_of_clusters_in_a_data_set)对其中一些方法进行了很好的回顾。

首先，一些可重复的数据（Q 中的数据......我不清楚）：

```
n = 100
g = 6 
set.seed(g)
d <- data.frame(x = unlist(lapply(1:g, function(i) rnorm(n/g, runif(1)*i^2))), 
                y = unlist(lapply(1:g, function(i) rnorm(n/g, runif(1)*i^2))))
plot(d) 
```

![在此处输入图像描述](../Images/8060ccf51d2af23a288eab49856f6175.png)

**一**。在平方误差和 (SSE) 碎石图中寻找弯曲或弯头。有关更多信息，请参见[http://www.statmethods.net/advstats/cluster.html](http://www.statmethods.net/advstats/cluster.html)和[http://www.mattpeeples.net/kmeans.html](http://www.mattpeeples.net/kmeans.html)。结果图中肘部的位置表明了 kmeans 的合适数量的聚类：

```
mydata <- d
wss <- (nrow(mydata)-1)*sum(apply(mydata,2,var))
  for (i in 2:15) wss[i] <- sum(kmeans(mydata,
                                       centers=i)$withinss)
plot(1:15, wss, type="b", xlab="Number of Clusters",
     ylab="Within groups sum of squares") 
```

我们可能会得出结论，这种方法将指示 4 个集群： ![在此处输入图像描述](../Images/3651c50724de6faea65ac70821cdcf7a.png)

**二**。`pamk`您可以使用fpc 包中的函数围绕中心点进行分区以估计集群的数量。

```
library(fpc)
pamk.best <- pamk(d)
cat("number of clusters estimated by optimum average silhouette width:", pamk.best$nc, "\n")
plot(pam(d, pamk.best$nc)) 
```

![在此处输入图像描述](../Images/f40ad9952ad31ad5226a807c613d5d1e.png) ![在此处输入图像描述](../Images/05964fb6d9b93d9e5a3a9bb0acf647ff.png)

```
# we could also do:
library(fpc)
asw <- numeric(20)
for (k in 2:20)
  asw[[k]] <- pam(d, k) $ silinfo $ avg.width
k.best <- which.max(asw)
cat("silhouette-optimal number of clusters:", k.best, "\n")
# still 4 
```

**三**。Calinsky 标准：另一种诊断有多少集群适合数据的方法。在这种情况下，我们尝试 1 到 10 个组。

```
require(vegan)
fit <- cascadeKM(scale(d, center = TRUE,  scale = TRUE), 1, 10, iter = 1000)
plot(fit, sortg = TRUE, grpmts.plot = TRUE)
calinski.best <- as.numeric(which.max(fit$results[2,]))
cat("Calinski criterion optimal number of clusters:", calinski.best, "\n")
# 5 clusters! 
```

![在此处输入图像描述](../Images/e1ef805026d425eaad5eabc50274d391.png)

**四**。根据期望最大化的贝叶斯信息准则确定最优模型和簇数，通过参数化高斯混合模型的层次聚类初始化

```
# See http://www.jstatsoft.org/v18/i06/paper
# http://www.stat.washington.edu/research/reports/2006/tr504.pdf
#
library(mclust)
# Run the function to see how many clusters
# it finds to be optimal, set it to search for
# at least 1 model and up 20.
d_clust <- Mclust(as.matrix(d), G=1:20)
m.best <- dim(d_clust$z)[2]
cat("model-based optimal number of clusters:", m.best, "\n")
# 4 clusters
plot(d_clust) 
```

![在此处输入图像描述](../Images/2e972e56923b7d78c870a7f7942b7759.png) ![在此处输入图像描述](../Images/1c5e63ed7d0b98cd3c596149e4351d8b.png) ![在此处输入图像描述](../Images/783ad5cdf4f41b4dde987eff10909e9c.png)

**五**。亲和传播 (AP) 聚类，参见[http://dx.doi.org/10.1126/science.11​​36800](http://dx.doi.org/10.1126/science.1136800)

```
library(apcluster)
d.apclus <- apcluster(negDistMat(r=2), d)
cat("affinity propogation optimal number of clusters:", length(d.apclus@clusters), "\n")
# 4
heatmap(d.apclus)
plot(d.apclus, d) 
```

![在此处输入图像描述](../Images/aed5ecca90598f7ac17042b8b3464704.png) ![在此处输入图像描述](../Images/371cf59db42ea5a85d1a87adfc12cf37.png)

**六**。用于估计聚类数量的差距统计。另请参阅[一些代码以获得漂亮的图形输出](https://github.com/echen/gap-statistic)。在这里尝试 2-10 个集群：

```
library(cluster)
clusGap(d, kmeans, 10, B = 100, verbose = interactive())

Clustering k = 1,2,..., K.max (= 10): .. done
Bootstrapping, b = 1,2,..., B (= 100)  [one "." per sample]:
.................................................. 50 
.................................................. 100 
Clustering Gap statistic ["clusGap"].
B=100 simulated reference sets, k = 1..10
 --> Number of clusters (method 'firstSEmax', SE.factor=1): 4
          logW   E.logW        gap     SE.sim
 [1,] 5.991701 5.970454 -0.0212471 0.04388506
 [2,] 5.152666 5.367256  0.2145907 0.04057451
 [3,] 4.557779 5.069601  0.5118225 0.03215540
 [4,] 3.928959 4.880453  0.9514943 0.04630399
 [5,] 3.789319 4.766903  0.9775842 0.04826191
 [6,] 3.747539 4.670100  0.9225607 0.03898850
 [7,] 3.582373 4.590136  1.0077628 0.04892236
 [8,] 3.528791 4.509247  0.9804556 0.04701930
 [9,] 3.442481 4.433200  0.9907197 0.04935647
[10,] 3.445291 4.369232  0.9239414 0.05055486 
```

这是 Edwin Chen 实施差距统计的输出： ![在此处输入图像描述](../Images/563a4597685c40783f9486fe763687f8.png)

**七**。您可能还会发现使用 clustergrams 探索数据以可视化集群分配很有用，请参阅[http://www.r-statistics.com/2010/06/clustergram-visualization-and-diagnostics-for-cluster-analysis-r-代码/](http://www.r-statistics.com/2010/06/clustergram-visualization-and-diagnostics-for-cluster-analysis-r-code/)了解更多详情。

**八**。NbClust[包](http://cran.r-project.org/web/packages/NbClust/index.html)提供 30 个索引来确定数据集中的集群数量。

```
library(NbClust)
nb <- NbClust(d, diss=NULL, distance = "euclidean",
        method = "kmeans", min.nc=2, max.nc=15, 
        index = "alllong", alphaBeale = 0.1)
hist(nb$Best.nc[1,], breaks = max(na.omit(nb$Best.nc[1,])))
# Looks like 3 is the most frequently determined number of clusters
# and curiously, four clusters is not in the output at all! 
```

![在此处输入图像描述](../Images/a617dcd8e38b42648c1b7cb823aeea00.png)

如果你的问题是`how can I produce a dendrogram to visualize the results of my cluster analysis`，那么你应该从这些开始：http: [//www.statmethods.net/advstats/cluster.html](http://www.statmethods.net/advstats/cluster.html) [http://www.r-tutor.com/gpu-computing/clustering/hierarchical-cluster-analysis](http://www.r-tutor.com/gpu-computing/clustering/hierarchical-cluster-analysis) [http://gastonsanchez.wordpress.com/2012/10/03/7-ways-to-plot-dendrograms-in-r/](http://gastonsanchez.wordpress.com/2012/10/03/7-ways-to-plot-dendrograms-in-r/)更多奇特的方法见这里： http: [//cran.r-project.org/ web/views/Cluster.html](http://cran.r-project.org/web/views/Cluster.html)

这里有一些例子：

```
d_dist <- dist(as.matrix(d))   # find distance matrix 
plot(hclust(d_dist))           # apply hirarchical clustering and plot 
```

![在此处输入图像描述](../Images/404fe7c1a4a810179d6e054156e94ff7.png)

```
# a Bayesian clustering method, good for high-dimension data, more details:
# http://vahid.probstat.ca/paper/2012-bclust.pdf
install.packages("bclust")
library(bclust)
x <- as.matrix(d)
d.bclus <- bclust(x, transformed.par = c(0, -50, log(16), 0, 0, 0))
viplot(imp(d.bclus)$var); plot(d.bclus); ditplot(d.bclus)
dptplot(d.bclus, scale = 20, horizbar.plot = TRUE,varimp = imp(d.bclus)$var, horizbar.distance = 0, dendrogram.lwd = 2)
# I just include the dendrogram here 
```

![在此处输入图像描述](../Images/b23d45dc69129969608df957c58f7650.png)

对于高维数据，还有一个`pvclust`库，它通过多尺度引导重采样计算层次聚类的 p 值。这是文档中的示例（不会像我的示例那样处理低维数据）：

```
library(pvclust)
library(MASS)
data(Boston)
boston.pv <- pvclust(Boston)
plot(boston.pv) 
```

![在此处输入图像描述](../Images/9050e75d7322b34b56ac1c95e5716eef.png)

这些有帮助吗？

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2016-04-19T21:06:52.177

很难添加如此详尽的答案。虽然我觉得我们应该`identify`在这里提到，特别是因为@Ben 展示了很多树状图示例。

```
d_dist <- dist(as.matrix(d))   # find distance matrix 
plot(hclust(d_dist)) 
clusters <- identify(hclust(d_dist)) 
```

`identify`让您以交互方式从树状图中选择集群并将您的选择存储到列表中。按 Esc 退出交互模式并返回 R 控制台。请注意，该列表包含索引，而不是行名（与 相对`cutree`）。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2016-08-09T08:38:44.903

为了确定聚类方法中的最优k-cluster。我通常使用`Elbow`并行处理的方法来避免耗时。此代码可以像这样采样：

**弯头法**

```
elbow.k <- function(mydata){
dist.obj <- dist(mydata)
hclust.obj <- hclust(dist.obj)
css.obj <- css.hclust(dist.obj,hclust.obj)
elbow.obj <- elbow.batch(css.obj)
k <- elbow.obj$k
return(k)
} 
```

**平行运行弯头**

```
no_cores <- detectCores()
    cl<-makeCluster(no_cores)
    clusterEvalQ(cl, library(GMD))
    clusterExport(cl, list("data.clustering", "data.convert", "elbow.k", "clustering.kmeans"))
 start.time <- Sys.time()
 elbow.k.handle(data.clustering))
 k.clusters <- parSapply(cl, 1, function(x) elbow.k(data.clustering))
    end.time <- Sys.time()
    cat('Time to find k using Elbow method is',(end.time - start.time),'seconds with k value:', k.clusters) 
```

它运作良好。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2018-12-12T21:47:51.560

一个简单的解决方案是图书馆`factoextra`。您可以更改聚类方法和计算最佳组数的方法。例如，如果您想知道 k 均值的最佳聚类数：

### 数据：mtcars

```
library(factoextra)   
fviz_nbclust(mtcars, kmeans, method = "wss") +
      geom_vline(xintercept = 3, linetype = 2)+
      labs(subtitle = "Elbow method") 
```

最后，我们得到如下图：

[![在此处输入图像描述](../Images/768965be0ada049d585671d52ef58739.png)](https://i.stack.imgur.com/gm0Xz.jpg)

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2017-12-27T15:07:16.587

这些方法很棒，但是当试图为更大的数据集找到 k 时，这些方法在 R 中可能会非常慢。

我发现的一个很好的解决方案是“RWeka”包，它有效地实现了 X-Means 算法 - K-Means 的扩展版本，可以更好地扩展并为您确定最佳集群数量。

首先，您需要确保在您的系统上安装了 Weka，并通过 Weka 的包管理器工具安装了 XMeans。

```
library(RWeka)

# Print a list of available options for the X-Means algorithm
WOW("XMeans")

# Create a Weka_control object which will specify our parameters
weka_ctrl <- Weka_control(
    I = 1000,                          # max no. of overall iterations
    M = 1000,                          # max no. of iterations in the kMeans loop
    L = 20,                            # min no. of clusters
    H = 150,                           # max no. of clusters
    D = "weka.core.EuclideanDistance", # distance metric Euclidean
    C = 0.4,                           # cutoff factor ???
    S = 12                             # random number seed (for reproducibility)
)

# Run the algorithm on your data, d
x_means <- XMeans(d, control = weka_ctrl)

# Assign cluster IDs to original data set
d$xmeans.cluster <- x_means$class_ids 
```

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2017-04-12T20:08:54.867

本的精彩回答。然而，令我感到惊讶的是，这里建议使用亲和传播 (AP) 方法只是为了找到 k-means 方法的聚类数，通常 AP 在聚类数据方面做得更好。请在此处查看支持此方法的科学论文：

**弗雷、布伦丹 J. 和德尔伯特杜克。“通过在数据点之间传递消息进行聚类。” 科学 315.5814 (2007): 972-976。**

因此，如果您不偏向 k-means，我建议直接使用 AP，这将在不需要知道集群数量的情况下对数据进行聚类：

```
library(apcluster)
apclus = apcluster(negDistMat(r=2), data)
show(apclus) 
```

如果负欧几里得距离不合适，那么您可以使用同一包中提供的其他相似性度量。例如，对于基于 Spearman 相关性的相似性，这就是您需要的：

```
sim = corSimMat(data, method="spearman")
apclus = apcluster(s=sim) 
```

请注意，AP 包中的相似功能只是为了简单起见。事实上，R 中的 apcluster() 函数将接受任何相关矩阵。与 corSimMat() 之前的相同操作可以通过以下方式完成：

```
sim = cor(data, method="spearman") 
```

或者

```
sim = cor(t(data), method="spearman") 
```

取决于您要在矩阵上聚类的内容（行或列）。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2017-08-22T23:56:19.477

答案很棒。如果您想给另一种聚类方法一个机会，您可以使用层次聚类并查看数据是如何拆分的。

```
> set.seed(2)
> x=matrix(rnorm(50*2), ncol=2)
> hc.complete = hclust(dist(x), method="complete")
> plot(hc.complete) 
```

[![在此处输入图像描述](../Images/27eb0363f696cf8dd3efcb2e6bd1371e.png)](https://i.stack.imgur.com/9tsAY.png)

根据您需要多少类，您可以将您的树状图切割为；

```
> cutree(hc.complete,k = 2)
 [1] 1 1 1 2 1 1 1 1 1 1 1 1 1 2 1 2 1 1 1 1 1 2 1 1 1
[26] 2 1 1 1 1 1 1 1 1 1 1 2 2 1 1 1 2 1 1 1 1 1 1 1 2 
```

如果您键入`?cutree`，您将看到定义。如果您的数据集具有三个类，那么它将是简单`cutree(hc.complete, k = 3)`的 . 的等价物`cutree(hc.complete,k = 2)`是`cutree(hc.complete,h = 4.9)`。

# javascript - 使用dust.js的排序功能

> ID：15376076
> 
> 赞同：2
> 
> 时间：2013-03-13T02:39:54.360
> 
> 标签：javascript, dust.js

XSLT 允许您在使用模板呈现节点时对它们进行排序。Linked In 的dust.js 版本有这个吗？

如果是这样，如果我有这个 JSON 视图：

```
{
    people: [ 
        { name: "Fred", sort_order: 3 },
        { name: "Harry", sort_order: 2 },
        { name: "Linda", sort_order: 4 },
        { name: "Mary", sort_order: 6 },
        { name: "Bob", sort_order: 5 },
        { name: "Joey", sort_order: 1 }
    ]
} 
```

我想要这个输出：

乔伊
·哈里
·弗雷德·
琳达
·鲍勃·
玛丽

模板与这个简单的模板有何不同？

```
{#people}
    <br/>{name}
{/people} 
```

这将在浏览器中执行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T22:33:27.603

要在 Dust 中执行此操作，您需要编写一个助手来进行排序。关于这种数据操作是否应该在灰尘模板中完成，或者在它上面传递数据的层中完成，可能会有一个健康的争论。

您可以在此处找到有关编写除尘助手的详细信息：

*   [https://github.com/linkedin/dustjs/wiki/Dust-Tutorial#wiki-Writing_a_dust_helper](https://github.com/linkedin/dustjs/wiki/Dust-Tutorial#wiki-Writing_a_dust_helper)

以下是排序助手的示例：

```
dust.helpers.customSort = function (chunk, context, bodies, params) {
    params.items.sort(function(a, b) {
        return ((a.sort_order < b.sort_order) ? -1 : ((a.sort_order > b.sort_order) ? 1 : 0));
    });

    return chunk;
}; 
```

这是它的工作原理：http: [//jsfiddle.net/jamsyoung/k3SNN/](http://jsfiddle.net/jamsyoung/k3SNN/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-18T11:28:54.310

只需添加灰尘上下文助手！

```
"helperName": function(chunk, context, bodies, params) {
     var val = context.get("nameOfProperty");
     nameOfProperty.sort(function(a, b) {
     return a.nameOfProperty[param] - b.nameOfProperty[param];
     });
   return racers;
} 
```

详细信息在这里 [Dust.js](http://www.dustjs.com/guides/context-helpers/)比赛获胜者示例

# c++ - C++ 非常简单的线程？

> ID：15376077
> 
> 赞同：0
> 
> 时间：2013-03-13T02:39:55.743
> 
> 标签：c++

在 C++ 中创建线程的最简单方法是什么？我想做一个使用已经声明的方法来运行的方法。就像是：

```
 void task1(){
    cout << "Thread started";
 }

 thread t1 = thread(task1()); 
```

我想我想创建一个不需要下载任何库并且我的编译器很可能能够编译的线程。我想回答的一个大问题是，什么是 c++11？它是一种完全不同的语言，还是一堆库？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-13T02:42:48.397

C++11 有线程库。一个非常简单的例子是：

```
#include <iostream>
#include <thread>
void task1()
{
    std::cout<<"Thread started\n";
}
int main()
{
    std::thread t1(task1);
    t.join();
} 
```

请参阅[http://en.cppreference.com/w/cpp/thread/thread](http://en.cppreference.com/w/cpp/thread/thread)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T02:52:25.487

If you can't use C++11, it depends upon what you are programming for. The following "simple as possible" threading example is written in unmanaged Win32 code, using the [CreateThread](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682453%28v=vs.85%29.aspx) function:

```
#include <Windows.h>
#include <tchar.h>
#include <iostream>

using namespace std;

DWORD WINAPI ThreadFunction(LPVOID lpParam) {
    WORD numSeconds = 0;
    for (;;) {
        Sleep(1000);
        cout << numSeconds++ << " seconds elapsed in child thread!" << endl;
    }
    return 0;
}

int _tmain(int argc, _TCHAR* argv[]) {
    HANDLE hThread;
    DWORD threadID;
    WORD numSeconds = 0;

    cout << "Hello world" << endl;

    hThread = CreateThread(NULL, 0, ThreadFunction, NULL, 0, &threadID);

    Sleep(500);
    for (;;) {
        cout << numSeconds++ << " seconds elapsed in main thread!" << endl;
        Sleep(1000);
    }

    return 0;
} 
```

If you use this approach, remember that the function pointer passed to CreateThread must have the signature:

```
DWORD ThreadFuncion(LPVOID lpParameter); 
```

You can find the description of that signature on [MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686736%28v=vs.85%29.aspx).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T07:16:55.020

C++ 标准每隔几年就会经常修订。添加了一些很酷的东西，并保留了旧的东西以实现向后兼容性。这里有一些[历史](http://en.wikipedia.org/wiki/C%2B%2B#Standardization)。

[Boost](http://www.boost.org/)在推动 C++ 标准方面有很好的影响。

# android - Android : 将数据从 android 应用程序推送到云空间

> ID：15376078
> 
> 赞同：0
> 
> 时间：2013-03-13T02:40:02.477
> 
> 标签：android, android-c2dm

我正在评估一项家庭作业。我需要制作一个最终需要将数据推送到云中的应用程序。数据实际上可能相当大。[我在这里](https://developers.google.com/android/c2dm/)查看了 Google Android C2DM 。

但我意识到它用于将小通知从云端推送到应用程序。它可以用来将相当大的数据从应用程序发送到云端吗？还是有合适的替代品可以使用？

所以我的问题是如何实现将大数据从您的 android 应用程序发送到云的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T12:37:02.747

你可以试试这个[Java Client](http://sourceforge.net/p/zkboxjavaclient/wiki/zkBox%20Java%20Client%20-%20Save%20objects%20on%20the%20cloud/)。您可以使用它在云上保存数据 - @rockstar。

# sql - 不指定列名的 SQL 合并功能

> ID：15376080
> 
> 赞同：4
> 
> 时间：2013-03-13T02:40:28.743
> 
> 标签：sql, sql-server, merge, dynamic-sql

我正在从我的 Web 应用程序执行 SQLBulkCopy 并将记录插入到临时表中。这是我第一次使用临时表。将接受数据的实时表有大约 200 个字段，并且可以更改为未来。当发生这种变化时，我不想重新编写合并语句。

我想出了这个模仿合并功能的 SQL，但不需要我拼出表格列。我不是 SQL 专家，我希望有人来看看，如果您发现使用此 SQL 可能出现的任何问题，请告诉我，因为我没有看到任何这样的示例和很多人搜索。

请注意，临时表中具有空 id 字段的记录将被插入。

```
-- set the table names, primary key field & vars to hold query parts
DECLARE @LiveTable varchar(20) = 'Test'
DECLARE @StagingTable varchar(20) = 'TestStaging'
DECLARE @PKField varchar(20) = 'TestPK'
DECLARE @SQLSet nvarchar(MAX) = ''
DECLARE @SQLInsertFields nvarchar(MAX) = ''

-- get comma delimited field names
DECLARE @Fields nvarchar(MAX) = (SELECT dbo.fn_GetCommaDelimitedFieldNames(@LiveTable))

-- loop through fields generating set clause of query to execute
WHILE LEN(@Fields) > 0
BEGIN
    DECLARE @Field varchar(50) = left(@Fields, CHARINDEX(',', @Fields+',')-1)
    IF @Field <> @PKField -- the primary key field cannot be updated
        BEGIN
            SET @SQLSet += ', ' + @LiveTable + '.' + @Field + ' = ' + @StagingTable + '.' + @Field
            SET @SQLInsertFields += ', ' + @Field
        END
    SET @Fields = STUFF(@Fields, 1, CHARINDEX(',', @Fields+','), '')
END

-- remove the leading comma
SET @SQLSet = SUBSTRING(@SQLSet,3,LEN(@SQLSet))
SET @SQLInsertFields = SUBSTRING(@SQLInsertFields,3,LEN(@SQLInsertFields))

-- update records from staging table where primary key is provided
DECLARE @SQL nvarchar(MAX) = N'UPDATE ' + @LiveTable + 
                             ' SET ' + @SQLSet + 
                             ' FROM ' + @LiveTable + 
                             ' INNER JOIN ' + @StagingTable + 
                             ' ON ' + @LiveTable + '.' + @PKField + ' = ' + @StagingTable + '.' + @PKField

-- insert records from staging table where primary key is null
SET @SQL += '; INSERT INTO ' + @LiveTable + ' (' + @SQLInsertFields + ') SELECT ' + @SQLInsertFields + ' FROM ' + @StagingTable + ' WHERE ' + @PKField + ' IS NULL'

-- delete the records from the staging table
SET @SQL += '; DELETE FROM ' + @StagingTable

-- execute the sql statement to update existing records and insert new records
exec sp_executesql @SQL; 
```

如果有人看到性能或其他任何问题，我很感激你的洞察力。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T03:52:53.377

不要这样做。真的。你正在努力避免一个罕见的问题，到时候你可能无法正确处理。

如果目标表发生变化，您怎么知道它会发生变化，从而使您喜欢的动态 SQL 能够正常工作？你怎么能确定它*看起来*不起作用——也就是说，在语法上会起作用——但实际上做错了？如果目标表发生更改，您是否不必更改应用程序以及临时表？有了这一切，又增加了一个`SET`条款是什么？

与此同时，怎么能指望任何人阅读那个 gobbledygook（不是你的错，真的，那是 SQL 的语法）？沼泽标准插入语句将非常清晰和可靠。

而且速度很快。SQL Server 无法优化您的动态查询。您使用 bcp 是为了提高效率，而现在您正在以具有良好意义的面向未来的能力击败它。

# ruby-on-rails - Rails 如何在输入字段中保留文本？

> ID：15376081
> 
> 赞同：0
> 
> 时间：2013-03-13T02:40:28.890
> 
> 标签：ruby-on-rails, forms

我有一个常规的文本输入字段，其值是通过 AJAX 提交的。在我离开这个页面并点击`Back`按钮后，我仍然可以在那里看到该字段的值。

我的问题是：

1.  大多数现代浏览器是否支持这种用户输入的值？
2.  如何使用 Rails 删除持久值？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T03:15:23.803

1.  *大多数现代浏览器是否支持这种用户输入的值？*

    **是的，我相信他们都在不同程度上支持它**

2.  *如何使用 Rails 删除持久值？*

    **这是客户端问题，而不是 Rails 问题。您可以使用 javascript 清除输入字段**

类似的问答：[使用浏览器返回按钮返回时清除表单中的所有字段](https://stackoverflow.com/questions/8861181/clear-all-fields-in-a-form-upon-going-back-with-browser-back-button)

**BFCache？** [https://developer.mozilla.org/en-US/docs/Working_with_BFCache](https://developer.mozilla.org/en-US/docs/Working_with_BFCache)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T03:08:21.270

您的浏览器会记住表单输入值并在您返回时显示它们。这可能与 Rails* 没有任何关系。

您实际上无法通过 Ruby/Rails 代码做任何事情来改变这种行为，但是您可以使用 JavaScript 来做到这一点。这是一个涵盖它的随机 SO 问题：[Reset form on Back button](https://stackoverflow.com/questions/8518671/reset-form-on-back-button)。

我不确定在每个浏览器中是否有完美的方法来处理这个问题。另请注意，许多用户希望浏览器保留他们输入的表单值。

*   注意：我只限定“可能”，因为可以编写一个明确记住表单值并在再次访问页面时恢复它们的应用程序，但默认情况下，Rails 不会这样做。它会涉及到相当多的 Rails 和 JavaScript 代码。

# javascript - 使用 JavaScript 正则表达式的建议

> ID：15376083
> 
> 赞同：1
> 
> 时间：2013-03-13T02:40:48.447
> 
> 标签：javascript, regex

我正在尝试编写一个正则表达式，其中：

1.  仅以字母开头
2.  仅包含字母和数字
3.  长度不超过 32 个字符

到目前为止我所拥有的是：

```
^[a-zA-Z][0,31]+$ 
```

但我不确定这是否正确。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T02:47:54.483

这应该有效：

```
/^[a-z][a-z0-9]{0,31}$/i 
```

*   `^`并`$`匹配字符串的开头和结尾。
*   `[a-z]`匹配一个字母。
*   `[a-z0-9]{,31}`最多匹配 31 个字母和数字。
*   `i`使您的正则表达式不区分大小写。

# c# - 使用 async/await 执行并行任务

> ID：15376084
> 
> 赞同：6
> 
> 时间：2013-03-13T02:40:51.250
> 
> 标签：c#, .net, silverlight, async-await

我需要在 Silverlight 中执行多个异步任务。

我可以使用的第 3 方包状态的文档

```
await Task.WhenAll() 
```

不幸的是silverlight只有`Task.WaitAll()`它，它是不可等待的。如果我尝试使用它，我会陷入僵局（我假设 - 因为整个事情都冻结了）

在异步方法中使用的正确模式是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-13T04:27:00.237

对于 Silverlight，我假设您使用的是[Microsoft.Bcl.Async](http://nuget.org/packages/Microsoft.Bcl.Async/)包。

由于此（附加）包无法修改（内置）`Task`类型，因此您会在该`TaskEx`类型中找到一些有用的方法。包括`WhenAll`：

```
await TaskEx.WhenAll(...); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T04:10:54.307

如果我正确理解您的问题，我认为您可以尝试使用[TaskFactory.ContinueWhenAll来获得类似的行为。](http://msdn.microsoft.com/en-us/library/dd321473%28v=vs.95%29.aspx)[示例](http://www.codethinked.com/net-40-and-systemthreadingtasks)：

```
var task1 = Task.Factory.StartNew(() =>
{
    Thread.Sleep(1000);
    return "dummy value 1";
});

var task2 = Task.Factory.StartNew(() =>
{
    Thread.Sleep(2000);
    return "dummy value 2";
});

var task3 = Task.Factory.StartNew(() =>
{
    Thread.Sleep(3000);
    return "dummy value 3";
});

Task.Factory.ContinueWhenAll(new[] { task1, task2, task3 }, tasks =>
{
    foreach (Task<string> task in tasks)
    {
        Console.WriteLine(task.Result);
    }
}); 
```

# php - 图片上传到 PHP 服务器在真正的 iOS 设备上不起作用

> ID：15376086
> 
> 赞同：0
> 
> 时间：2013-03-13T02:41:27.080
> 
> 标签：php, iphone, objective-c, image

从 iPhone/ipad 上传一些图片到我的网络服务器时遇到问题。确实，我的代码在 MAC 上的模拟器 iPhone 上运行良好，但在真实设备上，它不起作用，图片没有上传到我的服务器上。我不知道问题出在哪里以及为什么它在模拟器上而不是在我的设备上有效。我在 objc 中有这段代码，我调用一个 php 文件将图像保存到服务器。

目标c代码：

```
NSData *storeData = UIImageJPEGRepresentation(pictureItem, 90); 
NSString *URLString = @"http://url_example/upload.php"; //call upload.php

NSMutableURLRequest *request  = [[NSMutableURLRequest alloc] init];
[request setURL:[NSURL URLWithString:URLString]];
[request setHTTPMethod:@"POST"];

NSString *boundary = @"---------------------------14737809831466499882746641449";
NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@",boundary];
[request addValue:contentType forHTTPHeaderField:@"Content-Type"];

NSMutableData *body = [NSMutableData data];
[body appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"userfile\"; filename=\"%d.jpg\"\r\n", idItem] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[[NSString stringWithFormat:@"Content-Type: application/octet-stream\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[NSData dataWithData:storeData]];
[body appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
[request setHTTPBody:body];

NSData *returnData = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];
NSString *returnString = [[NSString alloc] initWithData:returnData encoding:NSUTF8StringEncoding];
NSLog(@"%@",returnString); 
```

php文件在这里：

```
<?php
    $uploaddir = './';      //Uploading to same directory as PHP file
    $file = basename($_FILES['userfile']['name']);
    $uploadFile = $file;
    $newName = $uploadDir . $uploadFile;

    if (is_uploaded_file($_FILES['userfile']['tmp_name'])) {
        echo "Temp file uploaded. \r\n";
    } else {
        echo "Temp file not uploaded. \r\n";
    }

    if ($_FILES['userfile']['size']> 10000000) {
        exit("Your file is too large."); 
    }

    if (move_uploaded_file($_FILES['userfile']['tmp_name'], $newName)) {
        $postsize = ini_get('post_max_size');   //Not necessary, I was using these
        $canupload = ini_get('file_uploads');    //server variables to see what was 
        $tempdir = ini_get('upload_tmp_dir');   //going wrong.
        $maxsize = ini_get('upload_max_filesize');
    }
?> 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T08:52:23.850

仔细检查图像文件名的大小写。模拟器通常会原谅文件大小写的差异，但设备通常不会。

例如，如果您的项目中有一个名为 的文件`Cat.png`，并且在您的代码中将资源引用为`cat.png`（小写“c”），则它通常可以在模拟器中工作，但不能在设备上工作。

# unix - 在 Unix 脚本中将密码传递给 ssh 提示符

> ID：15376087
> 
> 赞同：2
> 
> 时间：2013-03-13T02:41:42.873
> 
> 标签：unix

我正在编写一个脚本来获取密码并使用它进行 SSH。注意：我不会详细介绍，但安全/加密在这里不是问题——我想要的是硬编码密码。但是，我无法通过管道输入它，以便 Unix 脚本用它来回答“密码：”提示。我试着用管道输入它，它仍然要求我提示。

我在这里看到了使用期望的答案...我不是 shell 脚本专家，当我尝试它时，我得到了错误 spawn: command not found、interact: command not found 和 send: command not found。我试过用谷歌搜索某种期望下载的东西，但什么也没找到……我错过了什么？此脚本应该可以分发给可能安装或未安装外部脚本的人。

我的非工作代码：

```
#!/bin/bash"
STR="MYPASS"
echo $STR | ssh -t -t user@host 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T03:04:14.927

根据您阅读的答案，如果您想与 ssh 的密码提示进行交互，则需要使用[expect 。](http://en.wikipedia.org/wiki/Expect)那是因为 SSH 不会从标准输入（您在管道中）读取密码，而是从 tty 读取密码。

如果您从期望脚本中获取`spawn: command not found`和`interact: command not found`来自期望脚本，那么这就是您将期望代码写入实际上是 shell 脚本的线索。确保您的期望脚本上的[shebang 行](http://en.wikipedia.org/wiki/Shebang_%28Unix%29)实际上包含`#!/path/to/expect`而不是`#!/bin/sh`.

在任何情况下，一个更好*的**主意*是使用带有公钥认证的 SSH。没有密码短语的私钥很容易编写脚本，并且它的安全性不亚于将密码硬编码到脚本中。

# android-layout - Android设置布局

> ID：15376091
> 
> 赞同：0
> 
> 时间：2013-03-13T02:42:26.293
> 
> 标签：android-layout

```
 ...
    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="top|center"
        android:orientation="vertical" >

        <ImageView
            android:id="@+id/img"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent" />

    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="fill_parent"
        android:gravity="bottom|center"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/textView3"
            android:layout_width="wrap_content"
            android:layout_height="30dip"
            android:text="TextView" />

    </LinearLayout>
    ... 
```

我设置像上面的布局。并且第二个布局高度应该超过屏幕上的高度。但如果图像很大，则顶部的 linerlayout 会向下推底部的 linerlayout。所以我在屏幕上看不到底部的 TextView。

如何在加载图像时设置它，调整图像大小以仅修复为父 LinerLayout？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T04:34:15.950

您必须为这两种布局设置`android:layout_weight="1"`和`android:layout_height="0dip"`。

所以布局是划分**50%,50%。**

# powerbuilder - Powerbuilder 应用程序抛出错误：检索和更新之间的行已更改

> ID：15376093
> 
> 赞同：2
> 
> 时间：2013-03-13T02:42:39.613
> 
> 标签：powerbuilder, ingres

我们使用 PowerBuilder 6.0（Ingres 作为后端）开发了应用程序。应用程序代码自 2009 年以来从未更新过。但是突然它开始显示更新错误。用户在尝试保存数据时收到错误消息，例如“**检索和更新之间的行更改”。**我们已经确认，在用户尝试保存的过程中，任何人都没有更改数据库下的原始数据。

应用程序显示以下错误消息。

**错误信息**

**更新失败。**

**数据库错误：-3：检索和更新之间的行已更改。**

**没有对数据库进行任何更改。**

**更新 os_sec1 设置 encrpt_pw='XXXXX' WHERE user_id ='Q0001' 和 USER_DEC = 'Mayur Patel_ *_* __ *_* __ *_* __' 和 last_pw_change = {ts'2012-03-12 13:27:28'}**

我们刚刚注意到更新语句的原因有错误的值。[用户描述] 字段显示带有额外空间的值。我们发现 [User Decs] 字段的长度为 40 个字符，更新语句显示总共 40 个字符（值 + 空格）。我们不知道应用程序是如何开始考虑额外空间的。

其他令人惊讶的部分是，对于某些用户的应用程序正在运行，而对于其他用户则显示错误。此外，所有用户都在使用 Window 7。

任何人都知道可能是什么原因？感谢所有输入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T19:58:52.827

感谢您的所有帮助。最后问题得到了解决。根本原因是客户端和服务器的时区不同。Ingres 服务器显示 2013 年 3 月 10 日为夏令时开始时间，但客户端计算机的 Ingres 客户端显示 2013 年 4 月 7 日为夏令时开始时间。这种差异导致了所有问题。（使用 iizck 工具检查服务器和客户端的时区。）

现在，我必须与 Ingres 核对，看看他们是否有适用于 32 位和 64 位系统的补丁。作为一种解决方法，我在用户机器上安装了 Ingres 9.2 客户端。（请注意使用已安装 Ingres 2.6 客户端）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T13:32:18.803

如您所知，“检索和更新之间的行已更改”意味着当 PowerBuilder 去更新行时，它检测到现在数据库中的内容与检索到的不同。如果您确定数据确实没有被其他人更改，那么我将开始查看数据库驱动程序设置。数据库驱动程序具有去除多余空间或将它们留在那里的设置。如果设置发生了变化，它可以解释额外的空格。此外，如果仅在某些用户计算机上更改了设置，这可能会解释为什么只有一些计算机受到影响。

# ios - 如何在 SketchUp 中导入纹理图集？

> ID：15376094
> 
> 赞同：0
> 
> 时间：2013-03-13T02:42:39.910
> 
> 标签：ios, macos, opengl-es, sketchup

我正在跟进Erik M. Buck撰写的《 *Learning OpenGL for IOS: A Hands-on Guide to Modern 3D Graphics Programming》一书。*

本书提供了一个有用的免费工具，称为`COLLADAViewer`将 COLLADA 文档（*.dae 文件）转换为 OS/X 或 IOS 可加载的 plist 文件。的限制之一`COLLADAViewer`是，它一次只使用一种纹理；因此，您的模型使用的所有纹理都应合并为一个由其他模型共享的大型纹理图集。

代码示例包括一个“纹理图集”和一个使用该图集的纹理的草图文件 (*.skp)。

我的问题是：

1.  如何创建可从 SketchUp 加载的纹理图集？
2.  如何在 SketchUp 中导入纹理图集，从中选择不同的纹理并将其应用到模型的不同表面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T20:55:44.250

右键单击纹理区域，创建材质并选择新纹理

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T04:31:43.570

在玩了一点 SketchUp 之后，我想出了如何做到这一点：

*   如何创建可从 SketchUp 加载的纹理图集？

纹理图集是一堆又一张堆叠起来的纹理图像。将许多纹理图像堆叠到一个图像文件中没有硬性规定。使用您最喜欢的图像编辑器来执行此操作。重要的一点是这个文件中的每个纹理段都应该有足够的区域来覆盖/适合模型上的指定表面。

*   如何在 SketchUp 中导入纹理图集，从中选择不同的纹理区域并将其应用到模型的不同表面？

在 SketchUp 上，从`File/Import`菜单中的`Format`选择框下，选择`Use As Texture`并按下`Import`以导入您的纹理图集。

您只需要定位/拖动图像，以便目标表面左下角和右上角的引导点对齐。在这个阶段不要担心从图集中选择正确的纹理区域。

Internet 上有大量材料展示如何从图像文件导入纹理并将其应用到表面。这是其中之一：[http ://www.youtube.com/watch?v=ScuPF_CvFAk](http://www.youtube.com/watch?v=ScuPF_CvFAk)

最后一步是从纹理图集中提供的许多纹理中定位正确的（预期的）纹理。为此，请选择您应用了 atlas 纹理的表面。`Right-click`然后从上下文菜单中选择`Texture/Position`选项。这将显示纹理图集图像网格。使用手形图标，您可以拖动纹理以将预期的图像区域与目标表面对齐。对齐后，`Right-click`按下`Done`按钮。

# android - 我可以使用资源字符串作为包名吗？

> ID：15376097
> 
> 赞同：10
> 
> 时间：2013-03-13T02:43:08.883
> 
> 标签：android, android-manifest, packages

这样的事情可能吗？

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="@string/package_name"
      android:versionCode="1"
      android:versionName="@string/version_name"> 
```

上面的代码给了我一个错误：

> C:\android-sdk\tools\ant\build.xml:539：应用程序包“@string/package_name”必须至少有 2 个段。

我的字符串在 res/strings.xml 中定义，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string name="app_name">My app</string>
    <string name="version_name">1.00</string>
    <string name="package_name">com.mycompany.myapp</string> 
```

如果我用`@string/package_name`包的名称替换，`android:versionName`似乎设置正确。
所以问题是为什么包名称在工作时不起作用`android:versionName`？

**编辑：** 有没有办法使用外部文件中指定的包名？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-13T03:59:32.750

AFAIK，您只能使用xmlns ( )`@resource/name`中定义的属性格式访问 XML 资源。`android``http://schemas.android.com/apk/res/android`

由于包没有在 android 模式中定义，它不能以这种方式访问​​资源，而 versionName 可以。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-07-14T12:50:03.627

@Lev我知道它很晚，但它可能会帮助其他人。

我也想`@string/package_name`在某些情况下使用。我通过在`app/build.gradle`下面创建字符串资源来完成它。

```
defaultConfig {
    // your other code
    applicationId 'com.example'
    resValue "string", "package_name", applicationId
    // your other code
} 
```

# c# - 将 ASCII 编码为 HTML

> ID：15376101
> 
> 赞同：2
> 
> 时间：2013-03-13T02:43:49.743
> 
> 标签：c#, html, xml, ascii, webclient

我正在尝试[`DownloadData`](https://docs.microsoft.com/en-us/dotnet/api/system.net.webclient.downloaddata?redirectedfrom=MSDN&view=netframework-4.8). [`WebClient`](https://docs.microsoft.com/en-us/dotnet/api/system.net.webclient?redirectedfrom=MSDN&view=netframework-4.8)我当前的问题是，我无法弄清楚如何将生成的[`ASCII`结果](http://pastebin.com/dFen5ywH)（`&lt;`到`<`、、到`\n`）转换为从该[页面](https://www.ncbi.nlm.nih.gov/pubmed/22918716?report=xml)产生的结果。`&gt;``>``Encoding.ASCII.GetString(myDataBuffer);`

[![页源](../Images/cc3c2c908a5d99d2f6ae08aa435b6493.png)](https://i.stack.imgur.com/GcQci.png)
[（来源：[iforce.co.nz](http://iforce.co.nz/i/z4f2wggp.evi.png)）]

```
 /// <summary>
    /// Curl data from the PMID
    /// </summary>
    private void ClientPMID(int pmid)
    {
        //generate the URL for the client
        StringBuilder pmid_url_string = new StringBuilder();
        pmid_url_string.Append("http://www.ncbi.nlm.nih.gov/pubmed/").Append(pmid.ToString()).Append("?report=xml");
        Uri PMIDUri = new Uri(pmid_url_string.ToString());
        //declare and initialize the client
        WebClient client = new WebClient();
        // Download the Web resource and save it into a data buffer. 
        byte[] myDataBuffer = client.DownloadData(PMIDUri);
        this.DownloadCompleted(myDataBuffer);
    }
    /// <summary>
    /// Crawl over the binary from myDataBuffer
    /// </summary>
    /// <param name="myDataBuffer">Binary Buffer</param>
    private void DownloadCompleted(byte[] myDataBuffer)
    {
        string download = Encoding.ASCII.GetString(myDataBuffer);
        PMIDCrawler pmc = new PMIDCrawler(download, "/pre/PubmedArticle/MedlineCitation/Article");
        //iterate over each node in the file
        foreach (XmlNode xmlNode in pmc.crawl)
        {
            string AbstractTitle = xmlNode["ArticleTitle"].InnerText;
            string AbstractText = xmlNode["Abstract"]["AbstractText"].InnerText;
        }
    } 
```

PMIDCrawler 的代码可在我关于[`DownloadStringCompletedEventHandler`](https://stackoverflow.com/questions/15374328/webclient-never-reaching-downloadstringcompleted-on-wpf-application). 虽然从. `string html = HttpUtility.HtmlDecode(nHtml);`_ [_](http://pastebin.com/hjCwhEhL) _`xml``Encoding.ASCII.GetString`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T03:13:21.040

不幸的是，该服务器无法正确响应，`Accept: text/xml`因此`Accept: application/xml`您必须以艰难的方式进行此操作（[HttpUtility](http://msdn.microsoft.com/en-us/library/7c5fyk1k.aspx)）

```
string download = HttpUtility.HtmlDecode(Encoding.ASCII.GetString(myDataBuffer)); 
```

（或.NET Fx 4.5+ 上的 WebUtility.Decode [）](http://msdn.microsoft.com/en-us/library/ee388354.aspx)

或者

```
string download = Encoding.ASCII.GetString(myDataBuffer);
if (download != null) { // this won't get all HTML escaped characters...
    download = download.Replace("&lt;", "<").Replace("&gt;", ">");
} 
```

另请参阅[此问题](https://stackoverflow.com/questions/122641/how-can-i-decode-html-characters-in-c)以获取更多信息。

# jquery - 使用 jquery 使第一个选项卡默认显示为活动状态？

> ID：15376102
> 
> 赞同：0
> 
> 时间：2013-03-13T02:43:53.060
> 
> 标签：jquery, tabs

我使用以下代码默认显示第一个选项卡：

```
 // SELECT OUR FIRST TAB BY DEFAULT
 $('.tabs-nav LI:first').addClass('active');
 $('.tabContent').hide();
 $('.tabContent:first').show();

 // FORWARD TAB LI CLICKS TO TAB A CLICKS
 $('.tabs-nav LI').click(function(e){
    e.preventDefault();
    $(this).find('A').click();
    return false;
 });

 // INTERCEPT TAB A CLICKS TO SET THE ACTIVE TAB AND SHOW TAB PANEL.
 $('.tabs-nav LI A').click(function(e){
    e.preventDefault();
    $('.tabs-nav LI').removeClass('active');
    $('.tabContent').hide();
    $(this).parent().addClass('active');
    var sID = $(this).attr('href');
    sID = sID.split('#').join('');
    $('#' + sID).fadeIn(400, function() {
        $(window).trigger('resize');
    });
    return false;
 }); 
```

});

这是我显示标签的代码：

```
 <?php  
        $aerialSlider = do_shortcode('[property_attribute attribute=aerial_slider]');
        $propertySlider = do_shortcode('[property_attribute attribute=property_slider]');
        $lodgecabinSlider = do_shortcode('[property_attribute attribute=lodgecabin]');
        $wildlifeSlider = do_shortcode('[property_attribute attribute=wildlife_slider]');
        $videosSlider = do_shortcode('[property_attribute attribute=videos_slider]');
    ?>

    <div class="tabs">
        <h1>PHOTO GALLERY</h1>
        <ul class="tabs-nav">
            <?php if(empty($aerialSlider)) { 
                } else { 
                    echo '<li><a href="#tab1" >AERIALS</a></li>';
                } 
            ?>
            <?php if(empty($propertySlider)) { 
                } else { 
                    echo '<li><a href="#tab3" >PROPERTY</a></li>';
                } 
            ?>
            <?php if(empty($lodgecabinSlider)) { 
                } else { 
                    echo '<li><a href="#tab2" >LODGE/CABIN</a></li>';
                } 
            ?>
            <?php if(empty($wildlifeSlider)) { 
                } else { 
                    echo '<li><a href="#tab4" >WILDLIFE</a></li>';
                } 
            ?>
            <?php if(empty($videosSlider)) { 
                } else { 
                    echo '<li><a href="#tab5" >VIDEOS</a></li>';
                } 
            ?>
        </ul> 
```

如果这样做，用户可以插入要显示在选项卡中的简码，所有简码所做的就是显示一个图库。然后我创建了它，如果该字段的元框中没有任何内容，则不会显示选项卡。如果那里没有任何内容，则显示选项卡毫无意义。问题是，当第一个选项卡元字段中没有插入任何内容时，画廊空间就会折叠。如果我单击一个选项卡，它会显示出来。

问题似乎是 jquery 的目标是第一个选项卡，但我需要第一个可见选项卡作为默认选项卡。我希望我的问题很清楚。谁能帮我？我是 jquery 的菜鸟，因此感谢您的帮助。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T02:50:41.887

今晚我的眼睛太累了，无法查看你的代码墙。为什么不只是这个？

```
$( ".tabs-nav" ).tabs({ active: 1 }); 
```

[http://api.jqueryui.com/tabs/#option-active](http://api.jqueryui.com/tabs/#option-active)

# .net - 带有动态参数的 ChannelFactory 错误

> ID：15376103
> 
> 赞同：8
> 
> 时间：2013-03-13T02:44:01.287
> 
> 标签：.net, wcf, c#-4.0, wcf-client, channelfactory

这个问题与[结合IIS 7.5的动态语言运行时中的Bug有关](https://stackoverflow.com/questions/10249684/bug-in-the-dynamic-language-runtime-in-combination-with-iis-7-5)

`ChannelFactory`如果我为它提供正确类型的动态对象，则会挂起。

```
dynamic src = "MSFT";

var binding = new BasicHttpBinding();
var endpoint = new EndpointAddress("http://www.restfulwebservices.net/wcf/StockQuoteService.svc");
var channel = new ChannelFactory<IStockQuoteService>(binding, endpoint).CreateChannel();

// this will print just fine
Console.WriteLine(channel.GetStockQuote(src as string));

// this will print just fine
Console.WriteLine(new StockQuoteServiceClient().GetStockQuote(src));

// this will never print and the application will hang with no exceptions
Console.WriteLine(channel.GetStockQuote(src)); 
```

*   上面的服务是公开的，不是我的，你可以自己测试这段代码，只要在代码中提供的endpoint添加服务引用即可；
*   `StockQuoteServiceClient`由 Add Service Reference 菜单项创建，并采用动态对象就好了；
*   当我在调试时使用 F5 启动应用程序时，这神奇地不会发生，所有行都打印并且程序正确退出；
*   如果我运行它，然后在执行期间附加调试器，我可以看到它挂在调用`channel.GetStockQuote(src)`;
*   如果我不管它，程序会吃掉我所有的记忆；
*   仅当我将自己`ChannelFactory`的对象与动态对象一起使用时，它才会挂起，如评论中所述。

`ChannelFactory`当添加服务引用创建的对象运行良好时，为什么当它以动态对象作为参数时我的挂起？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-22T01:58:57.293

当您使用动态关键字时，与动态变量相关的每个代码都将由 DLR 在运行时编译。当您使用动态变量调用方法时，实际的方法签名在编译时是未知的，并且方法返回类型以及与之相关的所有内容都会创建 Eric Lippert 称为[“动态传染”](http://ericlippert.com/2012/11/05/dynamic-contagion-part-one/)的东西：

> “正如我上次指出的那样，当调用的参数是动态的时，编译器也很有可能将调用的结果分类为动态的；污点传播开来。事实上，当您使用几乎任何运算符时一个动态表达式，结果是动态类型，除了少数例外。（例如，“is”总是返回一个布尔值。）您可以“治愈”一个表达式，通过将其强制转换为对象或其他任何东西来防止它传播动态主义您想要的非动态类型；将动态转换为对象是一种身份转换。”

WCF 内部使用大量接口和抽象，并且 DLR 存在关于抽象和接口的[已知限制](https://connect.microsoft.com/VisualStudio/feedback/details/597276/dynamic-runtime-fails-to-find-method-from-a-base-interface-during-runtime)，其中 DLR 无法解析正确的类型。（也看看[这个 SO 讨论](https://stackoverflow.com/q/3696047/1020222)）

我能够使用反射正确调用 ChannelFactory 并将参数转换为其他类型（并且还尝试使用错误的类型调用服务）。该问题必须与 DLR 相关。

我无法调试 DLR 编译，但问题可能与“动态传染”和接口解析错误有关。使用“传染”，WCF 调用的每个部分都可能在运行时编译，并且类型解析错误可能会在某些极端情况下创建一些 endles 循环，例如调用基方法的重写方法实现，而基类被错误地解析为同一个孩子班级。

[当附加调试器 ( Debugger.IsAttached](http://msdn.microsoft.com/en-us/library/system.diagnostics.debugger.isattached.aspx) )时，一些 WCF 内部会执行额外的指令，这些指令通常包含在断言、检查和属性中。额外的指令可能会提供一些信息来杀死“动态传染”并避免虚假的无限循环。

# assembly - MASM 代码的 NASM 等效项

> ID：15376104
> 
> 赞同：2
> 
> 时间：2013-03-13T02:44:02.003
> 
> 标签：assembly, nasm, masm

我正在尝试编写代码来读取汇编语言中的用户输入字符串，但我被迫使用 NASM。下面的代码是为 MASM 设计的，我想“翻译”为 NASM，但我遇到了“缓冲”指令的问题。为什么我不能声明类似 buffer[bx+2] 的东西？什么是正确的“翻译”？

```
org 100h

mov ah, 09h                     ; print function
mov dx, offset nameprompt      
int 21h

mov ah, 0ah                     ; buffered string input
mov dx, offset buffer
int 21h

mov ah, 09h
mov dx, offset crlf
int 21h

mov dx, offset yourname
int 21h

xor bx, bx
mov bl, buffer[1]
mov buffer[bx+2], '$'
mov dx, offset buffer + 2
int 21h

mov ax, 4c00h
int 21h

buffer db 255,0,255 dup(0)
nameprompt db "Enter your name: $"
yourname db "Your name is: $"
crlf db 13,10,"$" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T04:20:22.347

我用 NASM 试用了这段代码。这是我发现的：

*   消除“偏移”，例如：`mov dx, offset nameprompt`->`mov dx, nameprompt`
*   正如布伦丹评论的那样，像`buffer[bx+2]`->`[buffer+bx+2]`
*   `offset buffer + 2`->`buffer + 2`
*   这一行似乎无效：`buffer db 255,0,255 dup(0)`; 根据 NASM 手册，dup 不可用 - 查找 TIMES 指令（[请参阅手册的这一部分](http://www.nasm.us/doc/nasmdoc3.html)）

# php - 无法使用 php 从 url 获取值

> ID：15376106
> 
> 赞同：-3
> 
> 时间：2013-03-13T02:44:07.960
> 
> 标签：php

这里的每个人..现在我遇到了一个问题，所以请帮助我，因为我是 php 代码的新手。我想从 url 中获取值，但结果是未定义的索引

这是网址：http: [//4you4me.com/admin/index_edit_form.php ?edit=76](http://4you4me.com/admin/index_edit_form.php?edit=76)

php代码：

```
 if(isset($_REQUEST['edit']) === TRUE && ! empty($_REQUEST['edit']))
        $con_id_update = mysql_real_escape_string((int)$_REQUEST['edit']);
print_r($con_id_update); 
```

结果是未定义的变量：con_id_update

这个脚本有什么问题？谢谢你的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T04:39:06.480

You should get value from url using $_GET instead of $_REQUEST if you know exactly what you want, good luck!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T02:46:03.897

看起来您缺少花括号：

```
if(isset($_REQUEST['edit']) === TRUE && ! empty($_REQUEST['edit'])) {
    $con_id_update = mysql_real_escape_string((int)$_REQUEST['edit']);
    print_r($con_id_update );
} 
```

如果您不将花括号包裹在整个语句周围，则只会执行 if 语句之后的行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T02:54:01.057

try this :

```
$con_id_undate ='';// to initialize 

 if(isset($_GET['edit']) && !empty($_GET['edit']))
            $con_id_update = (int)$_GET['edit'];

    print_r($con_id_undate); 
```

You shouldn't use [$_REQUEST](https://stackoverflow.com/a/2142754/1427338)

Also you should use msqli instead of mysql. Since you cast the value to an int you don't need to use `mysql_real_escape_string`.

mysql_real_escape_string *(**mysqli**_real_escape_string)* tends to work only when their is already an open connection

# versioning - Sybase SQL Anywhere 版本控制和变更管理

> ID：15376108
> 
> 赞同：1
> 
> 时间：2013-03-13T02:44:29.737
> 
> 标签：versioning, sqlanywhere, change-management

我正在寻找适用于 Sybase SQL Anywhere 10 的变更管理/版本控制工具。我过去曾在 SQL Server 中使用过 RoundHouse，但对于 SQL Anywhere 找到类似的东西我运气不佳。

有没有人见过任何用于 SQL Anywhere 的版本控制/变更管理工具？

谢谢！

# image - 使用矩阵过滤器进行图像裁剪

> ID：15376115
> 
> 赞同：0
> 
> 时间：2013-03-13T02:44:55.880
> 
> 标签：image, matlab

经过一些处理，我得到了一张 BMP 图像的黑白蒙版。

现在，我只想显示 BMP 图像在蒙版中为白色的部分。

我是 matlab 的新手（但我喜欢它），我已经尝试了很多从谷歌那里学到的矩阵技巧，好吧，没有一个有效（或者我做得不对..）

请给我一些提示。

提前感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T02:55:23.270

假设蒙版与图像大小相同，那么您可以这样做（对于灰度图像）：

```
maskedImage=yourImage.*mask %.* means pointwise multiplication. 
```

对于彩色图像，在三个通道上做同样的操作：

```
maskedImage(:,:,1)=yourImage(:,:,1).*mask 
maskedImage(:,:,2)=yourImage(:,:,2).*mask 
maskedImage(:,:,3)=yourImage(:,:,3).*mask 
```

然后要可视化图像，请执行以下操作：

```
imshow(maskedImage,[]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T10:29:19.240

使用两个 matlab 函数[repmat](http://www.mathworks.se/help/matlab/ref/repmat.html)或[bsxfun](http://www.mathworks.se/help/distcomp/bsxfun.html)之一，可以在一行代码中对具有任意数量通道的源图像执行屏蔽操作。

假设您的图像`I`是 size`M-by-N-by-C`并且 mask 是 size `M-by-N`，那么我们可以使用任一 repmat 获得蒙版图像

```
I2 = I .* repmat(mask, [1, 1, 3]); 
```

或使用 bsxfun

```
I2 = bsxfun(@times, I, mask); 
```

这些都是非常方便的函数，在一般情况下对代码进行矢量化时非常有用。我还建议您仔细阅读这个问题的答案：[在 Matlab 中，什么时候使用 bsxfun 是最佳选择？](https://stackoverflow.com/questions/12951453/in-matlab-when-is-it-optimal-to-use-bsxfun)

# character-encoding - PayPal IPN 模拟器字符编码

> ID：15376116
> 
> 赞同：3
> 
> 时间：2013-03-13T02:44:57.847
> 
> 标签：character-encoding, paypal-ipn

有没有办法在 IPN 模拟器中设置 PayPal 用于 IPN 的字符编码？对于真实帐户和 IPN，您可以按照此答案中的说明进行更改：[日文字符未显示在 PayPal IPN 通知中](https://stackoverflow.com/questions/14149457/japanese-characters-not-shown-in-paypal-ipn-notification)

但是我找不到对模拟器做同样的事情的方法。我从 PayPal 收到的所有邮件名称都是“%3F”或“？” 字符而不是中文或日文字符。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T05:27:38.597

IPN 模拟器无法做到这一点。但是，您可以使用沙盒测试付款，并为您的商家帐户设置特定的字符编码。您只需要登录您正在测试的商家帐户，然后转到您的个人资料并进入语言编码首选项。

登录 > 个人资料 > 语言编码 > 更多选项

# ios - 获取自定义单元格的标签内容

> ID：15376121
> 
> 赞同：0
> 
> 时间：2013-03-13T02:45:16.630
> 
> 标签：ios, xcode

我有一个自定义单元格（带有 5 个标签），它填充了我的自定义 UITableView。

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    //--> Need to get content of each label within the custom cell
} 
```

感谢帮助谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T02:50:35.060

你可以用不同的方式来做

**最好的方法是使用标签**

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
   UITableViewCell * cell = [tableView cellForRowAtIndexPath:indexPath];

  //get the labels using Tag from cell
  UILabel *label = ([[cell.contentView viewWithTag:yourTag] isKindOfClass:[UILabel class]])?(UILabel *)[cell.contentView viewWithTag:yourTag]:nil;

} 
```

**第二种方式是使用子视图循环。**

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
   UITableViewCell * cell = [tableView cellForRowAtIndexPath:indexPath];

  for(id subView in [cell.contentView subView])
  {

     if([subViews isKindOfClass:[UILabel class]])
     {
       UILabel *label = (UILabel *)subViews;
     }
 }

} 
```

**自定义单元类示例：**

```
UILabel *myLabel = [[UILabel alloc] init]
myLabel.tag = 1;
[self.contentView addSubView:myLabel]; 
```

# sql-server-2008-r2 - SQL Server 2008 我应该怎么做它不会显示数据，两次？

> ID：15376131
> 
> 赞同：1
> 
> 时间：2013-03-13T02:46:50.753
> 
> 标签：sql-server-2008-r2

这是我的查询，它两次显示具有相同信息的数据。我应该怎么做，它只会显示一次数据？

```
 SELECT 
        STUDENT.Stud_Num, STUDENT.Last_Name, STUDENT.First_Name, 
        STUDENT.Middle_Name, STUDENT.Program, CORRELATION.Corr_Code, 
        AVERAGE.Remarks, ACAD_QTR_LINK.Acad_Year, ACAD_QTR_LINK.Qtr, 
        COURSE.Course_Name, GRADES.Grades, GRADES.[No.OfTakes] 
    FROM 
        STUDENT
inner join 
        AVERAGE on STUDENT.Stud_Num = AVERAGE.Stud_Num 
inner join 
        CORRELATION on AVERAGE.Corr_Code = CORRELATION.Corr_Code 
inner join 
        ACAD_QTR_LINK on AVERAGE.Acad_Qtr_ID = ACAD_QTR_LINK.Acad_Qtr_ID 
inner join 
        CORR_COUR_LINK on STUDENT.Stud_Num = CORR_COUR_LINK.Stud_Num 
inner join 
        COURSE on CORR_COUR_LINK.Course_Code = COURSE.Course_Code 
inner join 
        GRADES on CORR_COUR_LINK.Corr_Cour_ID = GRADES.Corr_Cour_ID 
where 
        STUDENT.Stud_Num like '%' and STUDENT.Program like '%' 
        and STUDENT.Last_Name like '%' and STUDENT.First_Name like '%' 
        and STUDENT.Middle_Name like '%' and ACAD_QTR_LINK.Acad_Year like '%' 
        and ACAD_QTR_LINK.Qtr like '%' 
        and COURSE.Course_Name like '%' and CORRELATION.Corr_Code like '%' 
```

结果输出：

```
|StudNum|LName|FName|MName|Prog|CorrCode|Remarks|AcadYr|Qtr|CorName|Grades|No.OfTakes
|2007131|Mendo|charisn|Chucka|ECE|ece12345|7.00000|  '11-'12 |3rd|Mathema|89.000| 1
|2007131|Mendo|charisn|Chucka|ECE|ece12345|7.00000|  '11-'12 |3rd|Mathema|89.000| 1
|2007131|Mendo|charisn|Chucka|ECE|ece12345|7.00000|  '11-'12 |3rd|Electroni|65.000| 1
|2007131|Mendo|charisn|Chucka|ECE|ece12345|7.00000|  '11-'12 |3rd|Electroni|65.000| 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T02:50:21.617

**响应 1** 如果行完全相同，请添加不同的，或者您可以按所有列分组。

```
SELECT distinct STUDENT.Stud_Num, .... 
```

如果您还可以找出使联接返回多行的表，或者引入其他条件来限制它们，这也可能消除重复的行。

**看到您的评论后**回复2 。****

 **```
SELECT STUDENT.Stud_Num, STUDENT.Last_Name, STUDENT.First_Name, STUDENT.Middle_Name, STUDENT.Program, CORRELATION.Corr_Code, 
AVERAGE.Remarks, ACAD_QTR_LINK.Acad_Year, ACAD_QTR_LINK.Qtr, 
COURSE.Course_Name, GRADES.Grades, GRADES.[No.OfTakes] FROM STUDENT
inner join AVERAGE on STUDENT.Stud_Num = AVERAGE.Stud_Num 
inner join CORRELATION on AVERAGE.Corr_Code = CORRELATION.Corr_Code 
inner join ACAD_QTR_LINK on AVERAGE.Acad_Qtr_ID = ACAD_QTR_LINK.Acad_Qtr_ID 
inner join CORR_COUR_LINK on STUDENT.Stud_Num = CORR_COUR_LINK.Stud_Num 
inner join COURSE on CORR_COUR_LINK.Course_Code = COURSE.Course_Code 
inner join GRADES on CORR_COUR_LINK.Corr_Cour_ID = GRADES.Corr_Cour_ID 
where STUDENT.Stud_Num like '%' and STUDENT.Program like '%' 
and STUDENT.Last_Name like '%' and STUDENT.First_Name like '%' 
and STUDENT.Middle_Name like '%' and ACAD_QTR_LINK.Acad_Year like '%' 
and ACAD_QTR_LINK.Qtr like '%' 
and COURSE.Course_Name like '%' and CORRELATION.Corr_Code like '%' 
group by STUDENT.Stud_Num, STUDENT.Last_Name, STUDENT.First_Name, STUDENT.Middle_Name, STUDENT.Program, CORRELATION.Corr_Code, 
AVERAGE.Remarks, ACAD_QTR_LINK.Acad_Year, ACAD_QTR_LINK.Qtr, 
COURSE.Course_Name, GRADES.Grades, GRADES.[No.OfTakes] 
```

工作小提琴 - [http://sqlfiddle.com/#!3/2f42e/5](http://sqlfiddle.com/#!3/2f42e/5)**

# javascript - JavaScript正则表达式替换2个评论标签之间的字符串

> ID：15376134
> 
> 赞同：0
> 
> 时间：2013-03-13T02:47:02.400
> 
> 标签：javascript, regex

我尝试替换两个评论之间的字符串，如下所示：

`<span>Just <!--{-->250<!--}--> characters available!</span>`

我想`250`用另一个号码替换。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T02:53:06.260

试试这个正则表达式：

```
text.replace(/(<!--\{-->)(\d+)(<!--\}-->)/, '$1replaced$3')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T02:54:14.210

我不确定确切的 javascript 语法，但以下内容应该只匹配数字（这就是你想要的，对吗？你只想替换“250”？）

```
(?<=<!\-\-\{\-\->)\d+(?=<\!\-\-\}\-\->) 
```

# iphone - 最小开销的CoreLocation设计最佳实践？

> ID：15376135
> 
> 赞同：0
> 
> 时间：2013-03-13T02:47:10.103
> 
> 标签：iphone, ios, core-location, cllocationmanager

我正在寻找位置信息，但我不需要持续更新；有特定且偶尔的用户操作意味着需要获取最新值，因此我想“刷新”位置数据并获取当前值。

在电力使用等方面，我想成为设备上最好的公民。我也只需要尽可能低的粒度（3km+）更改。

*   根据我的理解，即使我只想要位置的“点样本”，我仍然需要开始一个长期运行的更改监控过程（对于“重大位置更改”或非单元设备的正常情况）。这个对吗？
*   当我想要当前位置时，假设这个进程正在运行，我可以直接询问位置管理器，对吗？（而不是将最新的传递给委托方法。）
*   如果是这样，大概，在应用程序后台关闭时关闭它并在前台运行时重新启动是合理的？（我不需要/不想在更改的背景下被唤醒。）
*   有没有比保持位置管理器运行更不打扰的方式来获取数据？
*   还有什么我错过的我应该做的吗？

欢迎您在这里澄清。该文档对最佳实践并不是特别清楚。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T03:13:34.640

有很多方法可以使用这个类。一个基本的方法是在你的应用程序委托中初始化它，如下所示：

设置一个名为 locmgr 的应用程序委托中调用的属性 -

```
 @property (nonatomic,strong) CLLocationManager *locmgr; 
```

也符合应用委托的接口部分中的 CLLocationManagerDelegate

然后在 applicationDidFinish ...中初始化它。

```
self.locmgr = [[CLLocationManager alloc] init];
self.locmgr.delegate = self;
self.locmgr.distanceFilter = 1500.0f;  //only update when location changes this much
self.locmgr.desiredAccuracy = kCLLocationAccuracyThreeKilometers; //change for better accuracy
[self.locmgr setPurpose:@"this app needs location services"];
[self.locmgr startUpdatingLocation]; 
```

然后添加委托回调

```
 - (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation      *)newLocation fromLocation:(CLLocation *)oldLocation {
    NSLog(@"location updated to new location:%@",newLocation);
    //put your logic - maybe save it to a property and reference it when needed

 } 
```

然后在后台关闭它

```
 - (void)applicationDidEnterBackground:(UIApplication *)application
 {
         [self.locmgr stopUpdatingLocation];
 } 
```

我喜欢在应用程序委托前台/后台打开和关闭服务。听起来您可能不太经常需要位置服务。也许应用程序委托中的一个方法来启动和停止它。请记住，虽然在您开始更新位置服务之后可能需要一两秒钟，但它才能获得准确的值，所以这就是为什么有时最好在需要时打开它并抓住它。如果您正确设置过滤器，则不会导致过多的额外功耗。

我希望这会有所帮助，并且是您可以在项目中使用的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T02:57:08.223

如果您只对在“特定和偶尔的用户操作”后获取信息感兴趣，那么在这些操作发生时开始更新，并在获得所需数据时使用 startUpdatingLocation 和 stopUpdatingLocation 停止它们。您应该在关闭监控之前检查数据的时间戳以确保它是最新的，您还可以查看数据的准确性，看看您是否想在停止之前等待更准确的数据。

# java - 如何在 java webstart 项目中包含 jar 依赖项

> ID：15376139
> 
> 赞同：1
> 
> 时间：2013-03-13T02:47:32.077
> 
> 标签：java, jar, jnlp, java-web-start

我们正在尝试使用 java webstart 开发打印应用程序。我们使用 Eclipse 将 jar 创建为普通的 jar 文件。我们的应用程序需要外部库来连接数据库，将数据转换为字节等。

我们之前可以通过将必要的 jars 放在 jre 文件夹的 /ext/ 目录中来做到这一点。然而，这导致了与我们的 tomcat 服务器的库冲突，因此我们希望避免这种方法。

我们还尝试将项目导出为可运行的 jar，因为所需的库也已经打包在 jar 中。但是当尝试运行应用程序时，它似乎无法看到 jar 中的库。

我们也知道，我们可以将需要的库放在jar旁边的一个文件夹中，并在jnlp文件中一一引用。但是我们想避免这种方法，因为我们有很多外部 jars，我们不想一个一个地导入它们:)

所以我的问题是我们如何正确打包java webstart jar？还有其他方法吗？最好的方法是什么？

请参阅下面的 jnlp 文件：

```
 <?xml version="1.0" encoding="UTF-8" standalone="no"?>
<jnlp codebase="http://192.168.1.169/webstart/" href="launch.jnlp" spec="1.0+">
    <information>
        <title>PrinterWebStart</title>
        <vendor>robert</vendor>
        <homepage href=""/>
        <description>PrinterWebStart</description>
        <description kind="short">PrinterWebStart</description>
    </information>
    <update check="always"/>
    <security>
<all-permissions/>
</security>
    <resources>
        <j2se version="1.5+"/>
        <jar href="printer-base.jar" main="true"/>
    </resources>
    <application-desc main-class="com.ccti.printer.task.PrinterTaskPanel">
    </application-desc>
</jnlp> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T19:26:14.790

打包 web-start 应用程序的正确方法是在`<resources>`标签中列出您正在使用的库 jar 文件。我的项目使用了 12 个库文件，启动时间还是相当不错的。当程序第二次启动时，客户端 PC 需要做的就是检查 jar 文件是否没有更改。这使得未来的发布非常快。

如果您的库中有许多不同的 jar 文件，您可能会担心将服务器上这些文件的最后修改日期与本地存储的版本进行比较可能会浪费一些时间。为了使更新检查更有效，您可以在资源文件中指定版本号，从而[避免不必要的更新检查](http://docs.oracle.com/javase/tutorial/deployment/deploymentInDepth/avoidingUnnecessaryUpdateChecks.html)。

如果 JNLP 需要包含已签名的代码，那么一次必须唱出所有这些 jar 文件可能会让人感觉很痛苦。为了简化此过程，请考虑以下 ant 脚本，该脚本对 lib 文件夹中的所有 jar 进行签名。

```
<target name="signLibs">
   <signjar destDir="signed"  alias="aliasName" keystore="yourKeyStoreName"
      storepass="PaSSW0rD" force="true" >
   <path>
      <fileset dir="lib" includes="*.jar" />
   </path>
   </signjar>   
   <echo message="Library files were signed."/>
</target> 
```

# java - 在 Java 中使用短路评估进行编程

> ID：15376140
> 
> 赞同：2
> 
> 时间：2013-03-13T02:47:36.123
> 
> 标签：java, short-circuiting

依赖短路评估会使代码脆弱吗？我写了一段代码，基本上如下所示。我的教授要我重写它。

（注意：我确信这四个条件中只有一个为真，因为给定任何流，只有一个“下一个令牌”，对吗？）

```
foo getFoo()
{
        Bar bar;
        if ((bar = peekAndGet('x')) != null 
                || (bar = peekAndGet('y')) != null 
                || (bar = peekAndGet('z')) != null 
                || (bar = peekAndGet('t')) != null) 
            return produce(bar);
        else 
            return null;
} 
```

这真的很脆弱吗？我发现它工作得很好。但是我应该如何重写它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-13T03:10:46.533

我会重构它并这样写：

```
char[] values = {'x', 'y', 'z', 't'};
for (char c : values) {
    Bar bar = peekAndGet(c);
    if (bar != null) return produce(bar);
}
return null; 
```

注意：这样做的一个很好的理由是，我第一次阅读您的代码时，我认为它看起来有问题，直到我阅读了您的问题。你想为真正错误的事情保留那些“看起来不对劲”的时刻。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T03:01:10.687

您正在 if 语句中初始化 Bar 对象，请尝试在 if 语句之外对其进行初始化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T03:08:00.383

问题不仅仅在于短路。它可能是目标的短路和副作用。它被广泛反对，因为它使代码更难理解和更容易破解。就您而言，它的繁重程度要小一些，但请看以下示例：

```
if ((b && c++ > 1) || (c++ < 10)) { ... } 
```

在这样的情况下，谁能跟踪发生了什么`c`？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-13T03:15:04.507

代码一点也不脆弱。它的行为完全由 Java 语言规范指定，并且按照我认为您的意图进行。

有多个副作用，尤其是对同一个变量的多次赋值，会降低代码的可读性，并且在 JLS 中是不鼓励的。

# jquery - jQuery Mobile click event works only once, after DOM is changed due to the click event

> ID：15376144
> 
> 赞同：1
> 
> 时间：2013-03-13T02:47:46.707
> 
> 标签：jquery, dom, jquery-mobile

I'm trying to bind a click event like the following using jQuery Mobile multi-page setting (this page is not the main page):

**HMTL**

```
<div data-role="page" id="thirdPage">
   <div class="wrapper">
      <div class="segment"></div>
      <div class="segment"></div>
      <div class="segment prev"></div>
      <div class="segment now"></div>
      <div class="segment next"></div>
      <div class="segment"></div>
      <div class="segment"></div>
      <div class="segment"></div>
      <div class="segment"></div>
      <div class="segment"></div>
      <div class="segment"></div>
   </div>
</div> 
```

**jQuery**

```
$('.segment.next').on('click', function(){
var seg = $(this);
var width = seg.width();
var currentLeft = parseInt($('.wrapper').css('left'));
var left = currentLeft - width;
    //using transit.js for css animation
$('.wrapper').transition({left : left}, 300, 'linear', function(){
                    $('.segment').filter('.prev').removeClass('prev');
                    $('.segment').filter('.now').removeClass('now');
                    seg.removeClass('next').addClass('now');
                    seg.prev().addClass('prev');
                    seg.next().addClass('next');
                });
}); 
```

The most of the things seems to be working: it removes/adds classes as it should and animate wrapper to the left with the right amount of pixel. However, the $('.segment.next') part isn't working correctly - even though the right $('.segment') has the class "next" after the first animation, the click event is not bound to this "new" $('.segment.next') from the second time on. Instead, the click event is still bound to the original $('.segment.next'). Is there any way to fix this issue? Any help would be appreciated!

Thanks a bunch in advance!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T02:53:37.483

```
$('#thirdPage').on('click', '.segment.next', function(){
    ...
}); 
```

Delegation works by referencing descendents of an element that's always present. You don't have to use document, but you need to use some ancestor that isn't dynamic.

# git - 在 GIT 中添加除 bin 文件夹之外的所有更改的命令是什么？

> ID：15376145
> 
> 赞同：0
> 
> 时间：2013-03-13T02:47:53.257
> 
> 标签：git, git-commit

我在 GIT 中有一个 Android 项目。我想提交所有更改，但不想提交 bin 文件夹。除了 bin 文件夹之外，是否有任何命令可以提交所有内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T02:49:33.790

将 bin 添加到您的 .gitignore 文件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T03:04:50.217

您可以像这样将 bin 文件夹添加到`.gitignore`文件中：

```
bin/ 
```

如果 bin 文件夹已被跟踪，即使您已将其添加到 gitignore 中，您也可以：

```
git rm -r --cached bin/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T02:49:30.873

只需将 bin 文件夹添加到`.gitignore`

# security - DES：（使用 sbox 2）表明每个 S-box 的两个输出位影响下一轮的中间位，另外两个影响结束位

> ID：15376147
> 
> 赞同：2
> 
> 时间：2013-03-13T02:48:11.313
> 
> 标签：security, des

数据加密标准（DES）算法：（使用 sbox 2）表明每个 S-box 的两个输出位影响下一轮的中间位，另外两个影响结束位。

置换表P在下表中定义。

```
16   7   20  21 29  12  28  17 [END BITS]
1    15  23  26  5  18  31  10 [MIDDLE BITS]
2    8   24  14 32  27   3   9 [MIDDLE BITS]
19  13  30   6  22  11   4  25 [END BITS] 
```

从上表可以看出，第 7 位和第 6 位指的是结束位，而第 5 位和第 8 位指的是中间位。

但是我不确定这是否正确，因为如果我们考虑 E 表，5,6 是结束位，7,8 是影响中间位。什么是正确的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-28T19:07:12.777

不完全理解这个问题，但是您关于位 7、6、5 和 8 的第一个陈述是正确的，但请记住，“级联效应”将使 P 表所做的所有更改都转到“右侧”方程的；但同时这些将在左侧的下一轮互动！

要完全了解该过程，请查看此链接：[http ://www.cronos.est.pr/DES.php](http://www.cronos.est.pr/DES.php)

# ruby-on-rails - 不能允许参数？

> ID：15376148
> 
> 赞同：4
> 
> 时间：2013-03-13T02:48:22.957
> 
> 标签：ruby-on-rails, ruby-on-rails-4, strong-parameters

这对我来说很奇怪，所以我很好奇是否有其他人遇到过这个问题：

我有以下内容：

```
def credential_params
  params.required(:credential).permit(:name,:agent_ids)
end 
```

在我的控制器创建和更新操作中，我正在使用带有上述参数调用的质量分配...

```
@credential.update_attributes(credential_params) 
```

但我仍然得到`Unpermitted parameters: agent_ids`

如果我将其更改为`params.required(:credential).permit!`（即全部允许），它当然可以工作。

我觉得我必须在这里忽略一些明显的问题......有人知道它可能是什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T02:53:44.613

尝试

```
params.require(:credential).permit(:name, { :agent_ids => [] }) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-13T02:53:37.223

知道了。

数组不是[支持的类型](https://github.com/rails/strong_parameters#permitted-scalar-values)之一：

> 允许的标量类型是 String、Symbol、NilClass、Numeric、TrueClass、FalseClass、Date、Time、DateTime、StringIO、IO、ActionDispatch::Http::UploadedFile 和 Rack::Test::UploadedFile。

因此解决方案是指定一个数组，如下所示：

```
params.require(:credential).permit(:name, :agent_ids => []) 
```

希望其他人觉得这很有用。

# google-maps - 如何从 panoid 获取 Google streetview latlng？

> ID：15376151
> 
> 赞同：1
> 
> 时间：2013-03-13T02:48:46.407
> 
> 标签：google-maps, google-maps-api-3, google-street-view

我有一个 Google Streetview **panoid**列表，我想找出他们的位置（latlng），我该怎么做？

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T03:00:08.350

使用 StreetViewService 的[getPanoramaById()](https://developers.google.com/maps/documentation/javascript/reference?hl=en#StreetViewService)方法检索全景数据。响应将包含一个[location](https://developers.google.com/maps/documentation/javascript/reference?hl=en#StreetViewLocation)属性，其中包含与位置相关的数据，例如`latLng`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-06T19:13:40.863

我遇到了与原始海报类似的问题。使用 API 是可行的，但如果您只是想将 panoID 转换为纬度/经度，这并不是最好的。以下 python 代码更适合此任务：[https ://code.google.com/p/adqmisc/source/browse/trunk/streetview/StreetView.py](https://code.google.com/p/adqmisc/source/browse/trunk/streetview/StreetView.py)

# jquery - 如何使用 JQuery 创建表并将 XML 数据插入单元格？

> ID：15376152
> 
> 赞同：0
> 
> 时间：2013-03-13T02:48:49.453
> 
> 标签：jquery, html, ajax, xml, html-table

我正在尝试在 JQuery 中创建一个 4 Columns Wide 和 16 Rows High (16x4) 的表。该表用于“会见员工”页面，上面有 16 名员工。此页面包含他们的姓名、一张小图片、他们在公司的职位以及描述他们的小简介等信息。这是以一种方式布局的，因此每条信息（名称、他们的图片、位置和简介）都包含在它们自己的单独行中，如下所示：

```
Name       Name        Name      Name
Image      Image       Image     Image
Position   Position    Position  Position
Blurb      Blurb       Blurb     Blurb

NEW ROW

Name       Name        Name      Name
Image      Image       Image     Image
Position   Position    Position  Position
Blurb      Blurb       Blurb     Blurb

etc.... 
```

该信息是从 XML 文件中读入的。这是包含整个管理团队（4 名员工）的文件的一小部分：

```
 <!--Management-->
  <management>
    <name>Daniel Duffy</name>
    <position>Manager of Mechanical Services</position>
    <blurb>Over a decade of mechanical experience, nine of those years working souly on GM vehicles, Dan knows the ins and outs of almost all North American GM vehicles like the back of his hand.</blurb>
  </management>
  <management>
    <name>Kelly Assise</name>
    <position>Manager of Customer Service</position>
    <blurb>A degree in Communication Studies and an outgoing upbeat attitude makes Kelly the perfect candidate for our Customer Service Dept.</blurb>
  </management>
  <management>
    <name>Aly McAvoy</name>
    <position>Manager of Sales</position>
    <blurb>A well-rounded personality, with an aptitude for number crunching and excellent financial forsight, Aly McAvoy comes to us with over 6 years experience in the auto parts field.</blurb>
  </management>
  <management>
    <name>Rich Sarlous</name>
    <position>Manager of Marketing</position>
    <blurb>Business and Communication careers run in the family. Rich Sarlous is no exception. Fresh out of college, smart as a whip, graduating with a Masters in Business/Marketing.</blurb>
  </management> 
```

这将被创建 4 次（对于所有 16 名员工）。这是我希望删除的当前代码中的一个示例。

```
<div class="infoBlurb"><table id="employeeTable">
        <!--Directors-->
        <tr><td class="employeeName1"></td><td class="employeeName2"></td><td class="employeeName3"></td><td class="employeeName4"></td></tr>
        <tr><td class="employeePic1"></td><td class="employeePic2"></td><td class="employeePic3"></td><td class="employeePic4"></td></tr>
        <tr><td class="employeePos1"></td><td class="employeePos2"></td><td class="employeePos3"></td><td class="employeePos4"></td></tr>
        <tr><td class="employeeBlurb1"></td><td class="employeeBlurb2"></td><td class="employeeBlurb3"></td><td class="employeeBlurb4"></td></tr> 
```

**这些行的另外 3 个块看起来很乱**，因此我想使用 JQuery 创建表。必须有一种方法可以做到这一点，而不必为每个数据位创建 16 个不同的单元格类，并为每个单元格创建 16 个不同的 CSS 类。

我也编写了正确的 Jquery 循环遍历 XML 文件，并在我编写的 html 中显示所有数据，如下所示：

```
$(document).ready(function () {
    $.ajax({
        type: "GET",
        url: "../stylesheets/employees.xml",
        dataType: "xml",
        success: function (xml) {
            var x = 1;
            $(xml).find('directors').each(function () {
                var name = $(this).find('name').text()
                $(".employeeName" + x).text(name);
                var position = $(this).find('position').text()
                $(".employeePos" + x).html(position);
                var blurb = $(this).find('blurb').text()
                $(".employeeBlurb" + x).html(blurb);
                x++
            });
            $(xml).find('management').each(function () {
                var name = $(this).find('name').text()
                $(".employeeName" + x).text(name);
                var position = $(this).find('position').text()
                $(".employeePos" + x).html(position);
                var blurb = $(this).find('blurb').text()
                $(".employeeBlurb" + x).html(blurb);
                x++
            });
            $(xml).find('supervisor').each(function () {
                var name = $(this).find('name').text()
                $(".employeeName" + x).text(name);
                var position = $(this).find('position').text()
                $(".employeePos" + x).html(position);
                var blurb = $(this).find('blurb').text()
                $(".employeeBlurb" + x).html(blurb);
                x++
            });
            $(xml).find('juniorSupervisor').each(function () {
                var name = $(this).find('name').text()
                $(".employeeName" + x).text(name);
                var position = $(this).find('position').text()
                $(".employeePos" + x).html(position);
                var blurb = $(this).find('blurb').text()
                $(".employeeBlurb" + x).html(blurb);
                x++
            });
        }
    });
}); 
```

但我不确定如何将 HTML 合并到其中，或者我是否做得对..

最重要的是，我希望能够使用下拉菜单在显示所有 16 名员工和仅显示一个部门之间过滤此表。我已经准备好下拉菜单，但我想我会把那一点信息放在那里，以防这意味着它必须以不同的方式编码。

任何帮助深表感谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T04:49:25.320

**1.使用客户端模板**

为了让您的生活更轻松，我建议您使用客户端模板。然后，之后更改布局会更容易，而且您不必深入研究 jQuery 代码。Handlebars 是一个很好的解决方案：

[http://handlebarsjs.com/](http://handlebarsjs.com/)

**2\. 将xml转换成json**

唯一的问题是 Handlebars 需要 JSON 数据而不是 XML。您也可以尝试将 XML 转换为 JSON：

[http://goessner.net/download/prj/jsonxml/](http://goessner.net/download/prj/jsonxml/)

底部还有一篇关于 XML-JSON 转换的好文章的链接

# python - Python 3.0+ 设置为最大 4 位小数和四舍五入

> ID：15376155
> 
> 赞同：1
> 
> 时间：2013-03-13T02:49:12.723
> 
> 标签：python, string, numbers, decimal, rounding

所以我有一个任务来匹配预期的输出：34.7381。但我得到 34.73809999999999。我意识到它只是一个只有 4 位小数的四舍五入数字，但我不知道如何在短时间内做到这一点。

我可以强制它并检查小数点的位置，检查它后面有多少个字符，消除所有字符并自己进行四舍五入。但对于如此简单的事情来说，这似乎相当复杂和愚蠢。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T02:57:44.387

你试过[圆形功能](http://docs.python.org/3.3/library/functions.html?highlight=round#round)吗？

```
a = 34.73809999999999
print round(a, 4)
>>> 34.7381 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T02:56:38.113

您可以使用字符串格式：

```
>>> '{:0.4f}'.format(34.7381)
    '34.7381'
>>> '{:0.4f}'.format(34.73809999999999)
    '34.7381' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T02:56:36.907

不用担心，只需指定您想要的打印精度：

```
>>> print('{:.4f}'.format(34.73809999999999))
34.7381 
```

# c# - 我可以使用 C# 锁来防止我的 Web 应用程序中的 SQL Server 死锁吗？

> ID：15376158
> 
> 赞同：1
> 
> 时间：2013-03-13T02:49:42.120
> 
> 标签：c#, asp.net, sql-server, sql-server-2008, locking

我正在使用 C# 在 Visual Studio 2010 中编写一个 Web 应用程序。Web 应用程序执行复杂的 SQL Server 2008 语句，如果同时多次调用同一个 .aspx 页面，有时会导致死锁。建议的解决方案是使用 SQL 服务器手段来防止这些死锁，但我的问题是我不太了解它，C# 不是这样，我知道得更好。

所以我想知道，我在 ASP.NET 页面中使用锁（或 C# 中的锁，或名为 mutex 的 Windows）而不是通过 SQL 服务器进行锁定以防止这些死锁有什么缺点？

PS。有问题的 SQL Server 数据库仅供此 Web 应用程序使用。

**编辑：**以下是执行 SQL 语句的 C# 代码：

```
int iNumRows = 0;

using (SqlConnection cn = new SqlConnection(strConnection))
{
    cn.Open();

    using (SqlCommand cmd = new SqlCommand(strSQL, cn))
    {
        //Use C# lock here
        iNumRows = Convert.ToInt32(cmd.ExecuteScalar());
        //Release C# lock here
    }
} 
```

这是一个 SQL 示例（实际上是由 C# 脚本动态组成的）：

```
SET XACT_ABORT ON;
BEGIN TRANSACTION;

DELETE FROM [dbo].[t_Log_2] 
      WHERE [idtm]<'2011-03-12 08:41:57';

WITH ctx AS(
     SELECT MIN([idtm]) AS mdIn, 
            MAX([odtm]) AS mdOut 
           FROM [dbo].[t_Log_2] 
          WHERE [type] = 0 
            AND [state] = 0 
            AND [huid] = N'18ef4d56-6ef3-906a-a711-88d1bd6ab2d4' 
            AND [odtm] >= '2013-03-11 06:33:32' 
            AND [idtm] <= '2013-03-11 06:43:12' 
           ) 
INSERT INTO [dbo].[t_Log_2] 
([oid],[idtm],[odtm],[type],[state],[huid],
 [cnm],[cmdl],[batt],[dvtp0],[dvtp1]) 
SELECT 
    2, 
    CASE WHEN mdIn IS NOT NULL 
          AND mdIn < '2013-03-11 06:33:32' 
         THEN mdIn 
         ELSE '2013-03-11 06:33:32' 
         END,
    CASE WHEN mdOut IS NOT NULL 
          AND mdOut > '2013-03-11 06:43:12' 
         THEN mdOut 
         ELSE '2013-03-11 06:43:12' 
         END,
    0,
    0,
    N'18ef4d56-6ef3-906a-a711-88d1bd6ab2d4',
    null,
    null,
    0,
    1,
    null 
FROM ctx 

SELECT ROWCOUNT_BIG()

DELETE FROM [dbo].[t_Log_2] 
      WHERE [type] = 0 
        AND [state] = 0 
        AND [huid] = N'18ef4d56-6ef3-906a-a711-88d1bd6ab2d4' 
        AND [odtm] >= '2013-03-11 06:33:32' 
        AND [idtm] <= '2013-03-11 06:43:12' 
        AND [id] <> SCOPE_IDENTITY()

DELETE FROM [dbo].[t_Log_2] 
      WHERE [type] = 0 
        AND [huid] = N'18ef4d56-6ef3-906a-a711-88d1bd6ab2d4' 
        AND [idtm] >= (SELECT [idtm] FROM [dbo].[t_Log_2] 
                                    WHERE [id] = SCOPE_IDENTITY()) 
        AND [odtm] <= (SELECT [odtm] FROM [dbo].[t_Log_2] 
                                    WHERE [id] = SCOPE_IDENTITY()) 
        AND [id] <> SCOPE_IDENTITY() 

;WITH ctx1 AS( 
     SELECT [idtm] AS dI 
       FROM [dbo].[t_Log_2] 
      WHERE [id] = SCOPE_IDENTITY() 
             )
UPDATE [dbo].[t_Log_2] 
        SET [odtm] = ctx1.dI 
       FROM ctx1 
      WHERE [id] <> SCOPE_IDENTITY() 
        AND [type] = 0 
        AND [huid] = N'18ef4d56-6ef3-906a-a711-88d1bd6ab2d4' 
        AND [idtm] < ctx1.dI 
        AND [odtm] > ctx1.dI 

;WITH ctx2 AS(
     SELECT [odtm] AS dO 
       FROM [dbo].[t_Log_2] 
      WHERE [id] = SCOPE_IDENTITY() 
             ) 
UPDATE [dbo].[t_Log_2] 
        SET [idtm] = ctx2.dO 
       FROM ctx2 
      WHERE [id] <> SCOPE_IDENTITY() 
        AND [type] = 0 
        AND [huid] = N'18ef4d56-6ef3-906a-a711-88d1bd6ab2d4' 
        AND [idtm] < ctx2.dO 
        AND [odtm] > ctx2.dO 

COMMIT TRANSACTION;
SET XACT_ABORT OFF 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-13T07:40:15.847

> 我在 ASP.NET 页面中使用锁（或 C# 中的锁，或名为 mutex 的 Windows）而不是通过 SQL 服务器进行锁定以防止这些死锁有什么缺点？

您将不会导致死锁，而是会导致活锁。

当等待图包含一个循环（A 在 B 上等待，B 在 A 上等待）时，就会发生死锁。SQL Server 定期检查所有等待图并查找周期。当检测到一个这样的循环时，通过选择受害者并中止它的事务来打破循环。

如果您将其中一些锁移到 SQL Server 控制领域之外，即。在进程互斥锁、临界区、C# 事件或其他任何情况下，等待图周期仍将发生，但现在该周期将通过应用程序完成，因此 SQL Server 将无法检测到它（A 在 SQL 中等待 B，但 B 等待 A在应用程序中）。由于死锁监视器不会看到一个循环，它不会运行死锁解决算法（选择一个受害者，中止它的事务）并且死锁将永远存在。恭喜，现在您的应用程序只是挂起而不是引发死锁异常！

你不必相信我的话，其他更有经验的人已经被这个问题所困扰并学习了困难的方法，但幸运的是写了它，这样你就可以学习简单的方法。[您正在阅读的这个网站就是一个例子](http://www.codinghorror.com/blog/2008/12/the-problem-with-logging.html)。

一旦了解了问题，解决 SQL Server 中的死锁就相当容易了。如果您[捕获并附加死锁图](http://msdn.microsoft.com/en-us/library/ms190465.aspx)（XML，而不是图片！）以及您的表的确切定义，也许我们可以提供帮助。唉，[你已经忽略了这样的要求](https://stackoverflow.com/questions/15357279/t-sql-compound-statement-causes-the-deadlock-any-idea-why)，所以我想唯一要问的问题是*你想要更多的绳子吗？*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T04:22:31.123

在不知道足够细节的情况下，找不到真正导致死锁的地方，我猜可能是因为键范围导致死锁，这意味着死锁发生在表 t_log_2 的索引上，因为你有删除和更新，肯定不是发生在同一行，但它们可以发生在同一键范围内，或者一个进程可以持有 A 范围，请求 B 范围，另一个进程可以持有 B 范围并请求 A 范围。您可以使用 SQL Profiler 跟踪死锁并查看它到底发生在哪里。或者，简单地说，如果它不会对您的性能造成太大影响，您可以将事务隔离级别设置为 [repeatable read] 甚至 [serializable]。

```
 SET TRANSACTION ISOLATION LEVEL REPEATABLE READ
....
BEGIN TRANSACTION
.... 
```

# view - 基于 ViewModel Dataannotation 属性 MVC4 的自定义编辑器模板

> ID：15376161
> 
> 赞同：0
> 
> 时间：2013-03-13T02:50:20.180
> 
> 标签：view, asp.net-mvc-4, viewmodel, data-annotations, editorfor

如果 [ **Required** ] 属性修饰了我的 ViewModel 属性，无论是整数、双精度、字符串、日期等，我想要做的是在我的输入文本框之后自动添加一个图像跨度

例如，我的 ViewModel 可能看起来像

```
public class MyViewModel 
{
    [Required]
    public string  Name { get; set; }
} 
```

我的视图看起来像

```
@Html.EditorFor(model => model.Name)
@Html.ValidationMessageFor(model => model.Name) 
```

并且输出将类似于

```
<input id="Name" class="text-box single-line" type="text" value="" name="Name" data-val-required="The Name field is required." data-val-length-max="20" data-val-length="The field Name must be a string with a maximum length of 20." data-val="true">
<span class="field-validation-valid" data-valmsg-replace="true" data-valmsg-for="Name"></span>

-- Note the automatically added span
<span class="indicator required" style="width: 11px;"></span> 
```

我打算有一些可以显示图像的css，即

```
span.required {
    background-image: url("required.png");
} 
```

这是可能的还是我需要创建自己的 Helper 方法来实现这种类型的功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T03:53:47.180

是的，这是可能的，但总的来说我不会推荐它，因为模板确实可以自定义类型渲染，并且您应该能够创建模板而不必担心它是否会覆盖另一个模板。

相反，我会创建一个自定义的 LabelFor 帮助器，例如这里描述的那个：

[http://weblogs.asp.net/imranbaloch/archive/2010/07/03/asp-net-mvc-labelfor-helper-with-htmlattributes.aspx](http://weblogs.asp.net/imranbaloch/archive/2010/07/03/asp-net-mvc-labelfor-helper-with-htmlattributes.aspx)

或在这里：

[http://weblogs.asp.net/raduenuca/archive/2011/02/17/asp-net-mvc-display-visual-hints-for-the-required-fields-in-your-model.aspx](http://weblogs.asp.net/raduenuca/archive/2011/02/17/asp-net-mvc-display-visual-hints-for-the-required-fields-in-your-model.aspx)

第三种选择是不在 MVC 中做任何事情，而是添加一些 javascript 来添加基于标准 MVC 验证数据属性的指标（如果您使用不显眼的验证）。在这里查看答案：

[https://stackoverflow.com/a/8524547/61164](https://stackoverflow.com/a/8524547/61164)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T04:02:15.133

如果出现验证错误，我所做的是修改 jquery.validate.unobtrusive JS 文件以添加第二个容器，专门用于您的图像。

```
var container2 = $(this).find("[data-valimg-for='" + escapeAttributeValue(inputElement[0].name) + "']"),
        replace = $.parseJSON(container.attr("data-valimg-replace")) !== false;

    container2.removeClass("img-validation-valid").addClass("img-validation-error"); 
```

然后不要忘记将其绑定到模型：

```
error.data("unobtrusiveContainer", container2); 
```

最后，在 if (replace) 代码块中清空它：

```
if (replace) {
        container.empty();
        container2.empty();
        error.removeClass("input-validation-error").appendTo(container);            
    }
    else {
        error.hide();
    } 
```

成功后，记得隐藏它：

```
var container2 = error.data("unobtrusiveContainer"),
        replace = $.parseJSON(container.attr("data-valimg-replace"));

    if (container2) {
        container2.addClass("img-validation-valid").removeClass("img-validation-error");
        error.removeData("unobtrusiveContainer");

        if (replace) {
            container2.empty();
        }
    } 
```

如果您查看文件中的 onError 和 onSuccess 函数，您应该能够找出可以将它们放入的位置。

在您看来，将以下代码行添加到每个表单输入中，以进行验证：

```
<img class="img-validation-valid" data-valimg-replace="true" data-valimg-for="<replace with field name here, ie. Name>" src="required.png" /> 
```

我只用`[Required]`属性测试了这个，但它有效。我也很确定您也可以使用它来生成其他东西，而不仅仅是图像。

# regex - 模式匹配日期

> ID：15376163
> 
> 赞同：-1
> 
> 时间：2013-03-13T02:50:28.663
> 
> 标签：regex, perl

我在尝试匹配日期模式时遇到了麻烦。以下任何日期都是合法的：

```
 - 121212
 - 4 9 12
 - 5-3-2000
 - 62502
 - 3/3/11
 - 09-08-2001
 - 8 6 07
 - 12 10 2004
 - 4-16-08
 - 3/7/2005 
```

使这个日期匹配真正具有挑战性的是年份不必是 4 位数字（假设 2 位数字年份是在 21 世纪，即 02 = 2002），月份/日期可以以 0 开头如果它是一个位数的月份，并且日期可以用空格、破折号或斜杠分隔，也可以不用。

这是我目前拥有的：
`/((((0[13578])|([13578])|(1[02]))[\/-]?\s*(([1-9])|(0[1-9])|([12][0-9])|(3[01])))|(((0[469])|([469])|(11))[\/-]?\s*(([1-9])|(0[1-9])|([12][0-9])|(30)))|((2|02)[\/](([1-9])|(0[1-9])|([12][0-9])))[\/-]?\s*(20[0-9]{2})|([0-9]{2}))/g`

这几乎可行，除了现在我不确定我是否假设日期和月份的长度。例如，在这种情况下`121212`，我可能会假设月份是`1`而不是`12`。另外，由于某种原因，当我打印出`$1`and`$2`时，它是相同的值。在`121212`, `$1`is `1212`, `$2`is`1212`和`$3`is的情况下`12`。然而，我只想`$1`成为`121212`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T05:08:52.990

CPAN 模块[Time::ParseDate](http://search.cpan.org/~muir/Time-modules-2003.0211/lib/Time/ParseDate.pm)和[DateTime](http://search.cpan.org/~drolsky/DateTime-0.78/lib/DateTime.pm)可能是您正在寻找的，除了`62502`模式：

```
use DateTime;
use Time::ParseDate;

foreach my $str (<DATA>) {
    chomp $str;
    $str =~ tr{ }{/};

    my $epoch = parsedate($str, GMT => 1);
    next unless $epoch; # skip 62502

    my $dt = DateTime->from_epoch ( epoch => $epoch );
    print $dt->ymd, "\n";
}

__DATA__
121212
4 9 12
5-3-2000
62502
3/3/11
09-08-2001
8 6 07
12 10 2004
4-16-08
3/7/2005 
```

拥有[DateTime](http://search.cpan.org/~drolsky/DateTime-0.78/lib/DateTime.pm)对象后，您可以轻松提取`year`、`month`和`day`信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T03:04:49.327

您的任务是模棱两可的，因为您可能无法区分 mmd 和 mdd 或 mdccyy 和 mmddyy。

您在匹配 / 的地方取消了空格或破折号选项。

你没有检查闰年。

这是可行的，但很容易出错；不尝试使用正则表达式如何。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T03:03:19.187

此解决方案处理您提供的所有案例。但解决方案并非万无一失，因为问题存在歧义。例如，我们如何解释日期`12502`？是 1/25/02 还是 12/5/02？

```
use 5.010;
while (my $line = <DATA>) {
    chomp $line;
    my @date = $line =~ /
        \A
        ([01]?\d)   # month is 1-2 digits, but the first digit may only be 0 or 1
        [ \-\/]?    # may or may not have a separator
        ([0123]?\d) # day is 1-2 digits
        [ \-\/]?
        (\d{2,4})   # year is 2-4 digits
        \z
    /x;
    say join '_', @date;
}

__DATA__
121212
4 9 12
5-3-2000
12502
3/3/11
09-08-2001
8 6 07
12 10 2004
4-16-08
3/7/2005 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T03:10:02.550

根据您提供的信息，这是我能想到的最好的。它匹配所有可能性，并对月/日范围和年份（从 1900 到 2099）进行错误检查

```
/(1[012]|0?\d)([-\/ ]?)([12]\d|3[01]|0?\d)\2((19|20)?\d\d)/ 
```

# javascript - “固定”元素的航点添加类和删除类在下降但不上升时有效

> ID：15376168
> 
> 赞同：0
> 
> 时间：2013-03-13T02:50:46.767
> 
> 标签：javascript, parallax, jquery-waypoints

我正在使用 Stellar 开发具有视差效果的网站： *[http ://webdesign.tutsplus.com/tutorials/complete-websites/create-a-parallax-scrolling-website-using-stellar-js/](http://webdesign.tutsplus.com/tutorials/complete-websites/create-a-parallax-scrolling-website-using-stellar-js/)*

我有一个“固定”的 div，页面中心有一个类。当我向下或向上滚动时，类会根据“活动”的幻灯片而改变。

我正在使用航点，当我向下滚动页面时一切正常。但是当我向上滚动时，而不是更改班级，它们都一个接一个地放置，顺序发生了变化，班级与右侧的幻灯片不匹配。

这是 HTML（#square 是固定的 div）：

```
<body>

<ul class="navigation">
<li id="un"     data-slide="1">Slide 1</li>
<li id="deux"   data-slide="2">Slide 2</li>
<li id="trois"  data-slide="3">Slide 3</li>
<li id="quatre" data-slide="4">Slide 4</li>
<li id="cinq"   data-slide="5">Slide 5</li>
<li id="six"    data-slide="6">Slide 6</li>
<li id="sept"   data-slide="7">Slide 7</li>
<li id="huit"   data-slide="8">Slide 8</li>
<li id="neuf"   data-slide="9">Slide 9</li>
<li id="dix"    data-slide="10">Slide 10</li>
<li id="onze"   data-slide="11">Slide 11</li>
</ul>

<div id="square" class="trans1"></div>

<div class="slide" id="slide1" data-slide="1" data-stellar-background-ratio="0.5">
<a class="button" data-slide="2" title=""></a>

</div><!--End Slide 1-->

<div class="slide" id="slide2" data-slide="2" data-stellar-background-ratio="0.5">

   <div class="wrapper">
      <img src="images/slide2/blur-ball.png" data-stellar-ratio="3" data-stellar-vertical-offset="-55"alt="">
      <img src="images/slide2/blur-ball-big.png" data-stellar-ratio="1" data-stellar-vertical-offset="-102"alt="">
   </div>

   <span class="slideno">Slide 2</span>
   <a class="button" data-slide="3" title=""></a>

</div><!--End Slide 2-->

<div class="slide" id="slide3" data-slide="3" data-stellar-background-ratio="0.5">
   <div class="wrapper">
   <img src="images/slide3/freelance.png" data-stellar-ratio="1.4" data-stellar-vertical-offset="-102"alt="">
   <img src="images/slide3/psdtuts.png" data-stellar-ratio="1.5" data-stellar-vertical-offset="-53"alt="">
   <img src="images/slide3/rockable.png" data-stellar-ratio="2.7" data-stellar-vertical-offset="-200"alt="">
   <img src="images/slide3/themeforest.png" data-stellar-ratio="3" data-stellar-vertical-offset="-200"alt="">
   <img src="images/slide3/tutshub.png" data-stellar-ratio="1" data-stellar-vertical-offset="-200"alt="">
   <img src="images/slide3/psdtuts.png" data-stellar-ratio="1.5" data-stellar-vertical-offset="-200"alt="">
   </div>

   <span class="slideno">Slide 3</span>
   <a class="button" data-slide="4" title=""></a>

</div><!--End Slide 3-->

<div class="slide" id="slide4" data-slide="4" data-stellar-background-ratio="0">

   <span class="slideno">Slide 4</span>
   <span class="parallaxbg">Use the parallax effects on background images too!</span>

</div><!--End Slide 4--> 
```

这是javascript

```
//1st SLIDE
    $('#square').waypoint(function(direction) {
        if (direction === 'down') {
        $('#square').toggleClass('trans1');
    }
    else {
        $('#square').toggleClass('trans1');
    }
    });

    // 2nd slide
    $('#slide2').waypoint(function(direction) {
        if (direction === 'down') {
        $('#square').toggleClass('trans2'), $('#square').removeClass('trans1');
    }
    else {
        $('#square').toggleClass('trans2'), $('#square').removeClass('trans1');
    }
    }, { offset: '50%' });

        $('#slide2').waypoint(function(direction) {
            if (direction === 'up') {
            $('#square').toggleClass('trans1'),$('#square').removeClass('trans2');
        }
        });

   //3rd slide
   $('#slide3').waypoint(function(direction) {
        if (direction === 'down') {
        $('#square').toggleClass('trans3'),$('#square').removeClass('trans2');
    }
    else {
        $('#square').toggleClass('trans3'),$('#square').removeClass('trans2');
    }}, { offset: '50%' });

        $('#slide3').waypoint(function(direction) {
                if (direction === 'up') {
            $('#square').toggleClass('trans2'),$('#square').removeClass('trans3');
            }
        });

    //4th slide
    $('#slide4').waypoint(function(direction) {
        if (direction === 'down') {
        $('#square').toggleClass('trans4'),$('#square').removeClass('trans3');
    }
    else {
        $('#square').toggleClass('trans4'),$('#square').removeClass('trans3');
    }}, { offset: '50%' });

        $('#slide4').waypoint(function(direction) {
                if (direction === 'up') {
            $('#square').toggleClass('trans3'),$('#square').removeClass('trans4');
            }
        }); 
```

这是网站的链接：http: [//ambuscade.ca/DEV2/](http://ambuscade.ca/DEV2/)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T18:04:56.813

创建了我的投资组合网站（[http://anti-code.com](http://anti-code.com)），它做了一些疯狂的事情以及在各个方向上的视差滚动，你的代码结构方式可以做得更加面向对象，它会让事情变得很多较少重复。

但除此之外。您遇到的问题是因为您没有删除课程。您只需切换适用于每张幻灯片的那些。

例如，所有你有这个的实例：

```
 $('#square').toggleClass('trans2'),$('#square').removeClass('trans3'); 
```

可以改成这样才能正常工作：

```
 $('#square').removeAttr('class').addClass('trans2'); 
```

如果这是有道理的。否则您不会更改类，您只是在方形元素上切换不同的 trans# 类名称。如果您只是在切换之前先删除类属性，然后添加要打开的类名，那么它将起作用。

# documentation - Markdown 和 Restructure 语法比较的备忘单？

> ID：15376170
> 
> 赞同：0
> 
> 时间：2013-03-13T02:51:03.617
> 
> 标签：documentation, markdown, restructuredtext

有没有比较 Markdown 和 Restructure 的使用情况的备忘单？有了这个，`rst`如果我已经知道了，我可以学得更快`Markdown`。我试过谷歌但没有找到..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T07:18:46.920

*   可以在[Wikipedia](http://en.wikipedia.org/wiki/List_of_lightweight_markup_languages)上找到与许多轻量级标记语言语法的一个小比较。
*   还有一个关于两种语言之间*通用标记的*[Gist 文档。](https://gist.github.com/dupuy/1855764)
**   您可以使用[Pandoc](http://johnmacfarlane.net/pandoc/)将现有的 Markdown 转换为 reST 或其他方式。*   有很多不同的 Markdown 方言，因此可能很难将语法与 reST 进行比较。*

# c++ - 返回指向类的指针的函数

> ID：15376174
> 
> 赞同：0
> 
> 时间：2013-03-13T02:51:20.887
> 
> 标签：c++, class, pointers

假设我有一个名为 MyClass 的类，

我正在编写一个应该返回 Myclass 类型的对象的函数。该对象在调用函数之前已经存在。所以通常我会这样做：

```
MyClass function() {
return MyClassInstance;
} 
```

但是后来我想起了指针和引用，我认为这样做会创建一个 MyClassInstance 的新副本并返回它，这是浪费内存。所以我想，为什么不做这样的事情：

```
MyClass * function() {
return &MyClassInstance;
} 
```

所以结果可以被访问为，

```
Myclass * object;
object = function();
object->"class member"... 
```

这是正确的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T03:01:54.433

我不确定你是什么是你的最终目标，语法看起来不错。但也许你应该阅读 C++ 中的单例模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T02:56:36.840

你肯定可以那样做。它会运行正常。它从语法方面没有问题。但是您需要非常小心，指向对象的指针不止一个。这可能会给你带来一些隐藏的问题。

# memory - 访问进程的 vm 区域

> ID：15376175
> 
> 赞同：1
> 
> 时间：2013-03-13T02:51:20.997
> 
> 标签：memory, module, kernel, memory-address, virtual-address-space

我正在尝试编写一个必须从进程中读取 vm 区域地址的 LKM。我正在使用 pid_task() 来获取指向 task_struct 的指针，但是当我尝试使用它来获取 vmarea 的起始地址时出现编译错误。

```
struct task_struct *ts;
ts = pid_task(find_vpid(pid_t)pid,PIDTYPE_PID);
printk(KERN_INFO "%lu",ts->mm->mmap->start); 
```

我收到错误“错误：取消引用指向不完整类型的指针”

我是一个 Linux 菜鸟，在 LKM 中完全是菜鸟。

我会很感激任何帮助。

谢谢你们

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T04:32:31.493

我用以下代码对我的内核源代码树（2.6.35）进行了测试，编译正常：

```
struct task_struct *ts;
pid_t pid;

ts = pid_task(find_vpid(pid),PIDTYPE_PID);
printk(KERN_INFO "%lu",ts->mm->mmap->vm_start); 
```

您可以尝试在内核源代码树中使用上述代码吗？我想也许你必须包含所有需要的头文件，例如：

```
#include <asm/uaccess.h>
#include <linux/errno.h>
#include <linux/time.h>
#include <linux/proc_fs.h>
#include <linux/stat.h>
#include <linux/init.h>
#include <linux/capability.h>
#include <linux/file.h>
#include <linux/fdtable.h>
#include <linux/string.h>
#include <linux/namei.h>
#include <linux/mnt_namespace.h>
#include <linux/mm.h>
#include <linux/swap.h>
#include <linux/rcupdate.h>
#include <linux/kallsyms.h>
#include <linux/stacktrace.h>
#include <linux/resource.h>
#include <linux/module.h>
#include <linux/mount.h>
#include <linux/security.h>
#include <linux/ptrace.h>
#include <linux/tracehook.h>
#include <linux/cgroup.h>
#include <linux/cpuset.h>
#include <linux/audit.h>
#include <linux/poll.h>
#include <linux/nsproxy.h>
#include <linux/oom.h>
#include <linux/elf.h>
#include <linux/pid_namespace.h>
#include <linux/fs_struct.h> 
```

其他：

编译成功后，判断指针是否为NULL。

# asp.net-mvc - ASP.NET MVC 4 - 带有小部件区域的动态页面布局

> ID：15376176
> 
> 赞同：0
> 
> 时间：2013-03-13T02:51:21.353
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我正在构建一个 ASP.NET MVC 4 仪表板站点。我正在尝试根据我的要求提出设计。该站点将采用三列布局。最左边一列是垂直导航菜单。中间和右列将包含小部件。相同的wiget可以出现在中心区域或右侧区域。还要求将来将 3 列布局更改为 2 列或其他一些干扰最小的布局。它基本上是一个小部件系统，其中将根据角色向用户显示许多不同的小部件，并且这些小部件可以放置在任何位置/区域。关于如何开始的任何建议都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T13:32:35.853

这是一个非常好的教程，关于如何在 HTML 和 CSS 中模仿你想要的布局

[http://net.tutsplus.com/tutorials/javascript-ajax/inettuts/](http://net.tutsplus.com/tutorials/javascript-ajax/inettuts/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T04:16:19.947

这些都不需要在 ASP.Net MVC 中做任何特别的事情，更多的是在 HTML 和 CSS 中获得正确的布局。我建议您首先为 HTML 和 css 工作获取模板。网络上有很多地方可以找到一些三栏模板来帮助您入门。

对 HTML 和 CSS 进行排序后，您会发现 ASP.Net MVC 足够灵活，可以处理您想出的任何布局。您可能会发现“子操作”将是处理小部件的最佳方式。

# sql - 仅恢复 SQL 数据库数据

> ID：15376177
> 
> 赞同：3
> 
> 时间：2013-03-13T02:51:34.650
> 
> 标签：sql, sql-server

我有两个具有完全相同架构的数据库。我想从一个导出数据并将其复制到另一个上。我不希望删除和重新创建表，只需删除目标数据库中的所有数据并将其替换为从源数据库导出的数据。

我认为这是可能的？目标数据库位于权限非常有限的客户端环境中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T02:55:08.643

您可以使用[SQL Server 导入和导出向导](http://msdn.microsoft.com/en-us/library/ms141209.aspx)来导入数据。SQL Server 导入和导出向导可以将数据复制到数据库和从数据库复制数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T03:01:38.803

您可以为此使用 SSIS 包，并且有一些产品可以为您完成。我已经为它使用了一个特定的产品（Red Gate 的 SQL 数据比较）和几个版本的源代码控制（尽管对于后者，实际上只用于“静态”查找数据）。

即使这些选项通常也只是为您执行 INSERTS 等脚本。

您专门使用“复制”一词；您是否考虑过在数据库之间进行实际的快照复制：

[http://technet.microsoft.com/en-us/library/ms151734%28v=sql.105%29.aspx](http://technet.microsoft.com/en-us/library/ms151734%28v=sql.105%29.aspx)

不过，恐怕根据您的问题，这也不完美。

你有选择，但遗憾的是没有像做一样简单`RESTORE DATABASE`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T03:23:02.603

我不确定在sql中。但是您可以使用 php 等第三个应用程序来执行数据传输。拳头从表中收集所有数据。对于表中的每个数据，在目标表中进行查找。如果目标表包含与当前源数据相同的数据，请进行更新。否则，创建一个新的。在 PHP 中可能是这样的：

```
$source = mysql_query("SELECT * FROM source_table");

while ($row = mysql_fetch_assoc($source)) {
    $target = mysql_query("SELECT * FROM target_table WHERE id='" . $row["id"] . "'");
    $tr_row = mysql_num_rows($target);

    if ($tr_row > 0) {
        $result = mysql_query("UPDATE target_table SET name='" . $row["name"] . "' age='" . $row["age"] ."' WHERE id='" . $row["id"] . "'");
    } else if ($tr_row <= 0) {
        $result = mysql_query("INSERT INTO target_table (name,age) VALUES ('" . $row["name"] . "','" . $row["age"] . "'");
    }
} 
```

这只是 PHP 和 MySQL 中的示例代码。希望这有帮助。:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T09:38:03.197

如果您可以链接两个数据库服务器，那么您可以使用带有 SELECT 语句的 INSERT 从 SSMS 执行此操作。

[这](http://msdn.microsoft.com/en-us/library/ff772782.aspx)是一篇更详细地描述链接服务器的文章。

# javascript - 使用 KendoUI 日期时间进行验证

> ID：15376179
> 
> 赞同：0
> 
> 时间：2013-03-13T02:51:39.903
> 
> 标签：javascript, jquery, kendo-ui

嗨，我有一个应用程序，用户可以在其中选择开始日期时间和结束日期时间，如果他们想创建一个事件。现在这是一个我使用 KendoUI 日期时间插件的 html：

```
<div class="demo-section" style="width: 535px;">
                <label for="start">Start date:</label>
                <input id="start" value="01/01/2013" />

                <label for="end" style="margin-left:3em">End date:</label>
                <input id="end" value="01/01/2013"/>
            </div>
</li>

<script type="text/javascript">
$(document).ready(function(){

function startChange() {
    var startDate = start.value();
    if (startDate) {
        startDate = new Date(startDate);
        startDate.setDate(startDate.getDate());
        end.min(startDate);
    }
}

function endChange() {
    var endDate = end.value();

    if (endDate) {
        endDate = new Date(endDate);
        endDate.setDate(endDate.getDate());
        start.max(endDate);
    }
}

var start = $("#start").kendoDateTimePicker({
    change: startChange,
    parseFormats: ["MM/dd/yyyy"]
}).data("kendoDateTimePicker");

var end = $("#end").kendoDateTimePicker({
    change: endChange,
    parseFormats: ["MM/dd/yyyy"]
}).data("kendoDateTimePicker");

start.max(end.value());
end.min(start.value());

}); 
```

问题是我无法获得我想要的验证。假设用户选择`From`日期，该`To`日期应显示大于当前选择日期的日期。我当前`From`的代码似乎效果不佳。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T10:41:39.403

您是说您希望能够选择一个`From`大于的日期`To`，并且当您这样做时`To`应该自动更新为大于`From`？

如果是这样，你就快到了。您只需要更新`startChange`函数以更新`To`相对于`From`.

```
function startChange() {
    var startDate = start.value();
    if (startDate) {
        startDate = new Date(startDate);
        startDate.setDate(startDate.getDate());
        end.min(startDate);
        var endDate = end.value();
        if (endDate && endDate <= startDate) {
            endDate.setDate(startDate.getDate() + 1);
            end.value(endDate);
        }
    }
} 
```

检查这个[jsFiddle](http://jsfiddle.net/nukefusion/meM5T/4/)以获得完整的工作示例。

# sql - SQL/sqlite 查询到具有匹配列和合并列的联合表

> ID：15376182
> 
> 赞同：0
> 
> 时间：2013-03-13T02:52:03.277
> 
> 标签：sql, sqlite, select, sql-view

我正在使用一个数据库，每个公司有 2 个表，每个公司有 4 个公司（此查询总共 8 个数据库），并且由于我无法控制的原因无法更改。这也是一个 sqlite 数据库。

我的应用程序目前必须执行 8 次往返才能获取所有数据。我想将其合并为一个表视图查询，但我不知道如何以一种可以使其工作的方式组合数据。这是表格的示例。

表1（A型）

```
name    zone
ABCD    ABC1
DBAA    CBA1 
```

表 2（A 型）

```
name   zone
ABCD   1234
DBAA   4321 
```

表1（B型）

```
zone   weight   rate  
ABC1      1     0.50  
CBA1      2     0.88 
```

表2（B型）

```
zone   weight   rate
1234      1     0.52
4321      2     0.80 
```

最后我希望视图看起来像这样：

```
name   weight   Table 1 rate  Table 2 rate
CABA      1         0.52          0.50
AEAS      2         0.80          0.88 
```

我为我的 SQL 语句尝试了这个：

```
SELECT 1A.name, 1B.weight, 1B.rate as A from 1A, 1B WHERE 1A.zone = 1B.zone
UNION ALL
SELECT 2A.name, 2B.weight, 2B.rate as B from 2A, 2B WHERE 2A.zone = 2B.zone 
```

在阅读联合必须具有匹配的列数后，我还尝试了几个连接语句，但我似乎无法找到正确的查询。任何想法我做错了什么或如何通过查询来实现这一点？

任何帮助是极大的赞赏！

在这里更新了小提琴示例：[http ://sqlfiddle.com/#!5/37c19/3/0](http://sqlfiddle.com/#!5/37c19/3/0)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T11:49:36.517

这是一个查询，将产生类似于您的示例的内容：

```
SELECT 
  ZonesOne.name
  , RatesOne.weight
  , RatesOne.rate as Table1Rate
  , RatesTwo.Rate AS Table2Rate

FROM ZonesOne, RatesOne, RatesTwo 

WHERE 
  RatesOne.zone = ZonesOne.zone
  AND RatesOne.Weight = RatesTwo.weight

UNION ALL

SELECT 
  ZonesTwo.name
  , RatesOne.weight
  , RatesOne.rate as Table1Rate
  , RatesTwo.Rate AS Table2Rate

FROM ZonesTwo, RatesOne, RatesTwo     

WHERE 
  RatesOne.zone = ZonesTwo.zone
  AND RatesOne.Weight = RatesTwo.weight 
```

但是，您的`Table 1 Rate`和`Table 2 Rate`似乎被调换了。此外，您的数据`ZonesTwo`有两个“DBAA”条目。

# javascript - Is it fine to use JSON.stringify for deep comparisons and cloning?

> ID：15376185
> 
> 赞同：19
> 
> 时间：2013-03-13T02:52:27.610
> 
> 标签：javascript, json, equality, deep-copy, object-comparison

After attempting several implementations for deep comparison and copying for JSON-serializable objects, I've noticed the fastest often are just:

```
function deep_clone(a){
   return JSON.parse(JSON.stringify(a));
};
function is_equal(a,b){
    return JSON.stringify(a) === JSON.stringify(b);
}; 
```

I feel like this is cheating, though. Like I'll find some problem that will annoy me on future. Is it fine to use those?

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2014-09-27T17:53:36.840

JavaScript 不保证键的顺序。

如果它们以相同的顺序输入，这种方法大部分时间都可以工作，但它并不可靠。

此外，对于深度相等但其键以不同顺序输入的对象，它将返回 false：

```
JSON.stringify({ a: 1, b: 2}) === "{"a":1,"b":2}"

JSON.stringify({ b: 2, a: 1}) === "{"b":2,"a":1}" 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2016-03-15T13:03:35.120

我意识到这是一个老问题，但我只是想在答案中添加更多内容，因为否则有人可能会离开此页面，错误地认为使用`JSON.stringify`进行比较/克隆只要不习惯就可以正常工作比较/克隆其成员无序的对象。（为了公平地接受公认的答案，他们*不应该这样*想着走开；它说，“如果 [成员] 以相同的顺序输入，那么这种方法在*大多数情况下*都会起作用。”）

代码可能最好地说明了潜在的问题：

```
JSON.stringify(NaN) === JSON.stringify(null)
// => true

JSON.stringify(Infinity) === JSON.stringify(null)
// => true

// or, to put it all together:
JSON.stringify({ val1: (1 / 0), val2: parseInt("hi there"), val3: NaN }) === JSON.stringify({ val1: NaN, val2: null, val3: null })
// => true

// and here's the same example with "cloning" rather than comparison:
JSON.parse(JSON.stringify({ val1: (1 / 0), val2: parseInt("hi there"), val3: NaN }))
// => Object {val1: null, val2: null, val3: null} 
```

即使订购不是问题（正如其他人所说，它可能是），这些怪癖也会引起麻烦。在大多数情况下，这些怪癖可能不太可能会抬起他们丑陋的脑袋，但了解它们是件好事，因为它们可能会导致一些很难找到的错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-04T14:26:09.610

我编写了这个函数来深入比较任何对象数组或值：如果需要，可以使用它:) 我用非常大的对象样本测试了它，对象和数组中的条目顺序也是随机的。

```
function c(x,y) {
    if(!x&&!y)return!0;if(!x||!y)return!1;if(typeof(x)
    !=typeof(y))return!1;if(x instanceof Array){if(
    x.length!=y.length)return!1;var f=[];for(var i=0;
    i<x.length;i++){if(!c(x[i],y[i]))f.push(i)}var g=
    [...f];for(const i of f){let r=!1;for(const j of g){if(
    c(x[i],y[j])){g.splice(g.indexOf(j),1);r++;break}}if(!r)
    return!1}return!0}else if(x instanceof Object){var e1=
    Object.entries(x);try{return c(e1,r(Object.entries(y),
    e1))}catch(e){return!1}}else{return x===y}function r(
    u,v){var a=[];if(u.length!=v.length)return u;for(
    var i=0;i<v.length;i++){a.push(m(u,v[i][0]))}return a}
    function m(a,k){for(var i=0;i<a.length;i++){
    if(a[i][0]===k)return[a[i][0],a[i][1]]}throw 0;}
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-13T02:59:26.297

只要键值对始终处于相同的顺序，是的，您可以使用 stringify 使用深度等于运算符 (===) 进行比较。

# c - Return char array??(C)

> ID：15376186
> 
> 赞同：-1
> 
> 时间：2013-03-13T02:52:50.340
> 
> 标签：c

I'm new at programming. I have:

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h> // With luck, this declares strdup()

enum { ROWS = 50 };

static char *funkc(FILE *fp,char file[50])
{
    int q,row;
    char charbuffer[2],ch,*map[ROWS];

    ch=getc(fp);
    q=1;
    while (ch!=EOF){
        ch=getc(fp);
        q++;
    } 

    for (row = 0; row <=q; row++){
        map[row] = "  ";
    }
    fp = fopen(file, "r");

    for (row = 0; row <= q; row++) {
        if (fgets(charbuffer, 2, fp))
            map[row] = strdup(charbuffer);
    }

    for (row = 0; row <= q; row++) {
        printf("%s", map[row]);
    }
    return map[3];
}

int main(void)
{
    char *map2[ROWS];
    FILE *fp;
    char file[50]; // Unused variable *map[ROWS];
    printf("file name \n");
    scanf("%s",file);  // Removed ampersand from file
    if ((fp=fopen(file,"r"))==NULL)
    {
        printf("Error \n");
        exit(1);
    }

    map2[0]=funkc(fp,file);
    printf("%s",map2[0]);   // Add missing semicolon
    return 0;
} 
```

With that I can return only single char but I need to return full char array (map[ROWS]); how can I do it?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T03:09:21.100

我认为您的代码中存在一些问题。首先，如何使用这段代码？

```
 scanf("%s", &file); 
```

我认为你需要做的是这个：

```
 scanf("%s", file); 
```

因为数组名文件本身就是一个指针，所以不需要使用`&`.

其次，你可以通过 得到一个字符数组`return map[0]`，因为它是一个`char *`类型，也就是`string`C中的a。想想看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T03:22:13.730

没有仔细阅读你的代码，
但是你的主要问题很清楚，
你需要更多地研究：通过地址，数组，指针。

下面是我非常简单的代码，用于传递函数数组并返回主函数。

您可以通过地址（数组本身是）传递，或者传递一个 malloced 指针（记住释放）。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int test(char *map)
{
    strcpy(map, "hello, world");

    return 0;
}

int main(int argc, char **argv)
{
  char map[20];
  //char *map = malloc(sizeof(char) * 20);

  test(map);

  printf("%s\n", map);

  //free(map);
  return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T09:24:45.310

除了修复代码中的其他错误之外，您还需要做两件事：

您期望得到一个字符串数组，这将是**char****类型。

您还需要为数组分配内存，因为返回自动变量引用不是一个好主意。此外，您还需要为数组中的每个条目分配内存，因为混合静态字符串引用和分配的内存也不是一个好主意。

```
include ...

enum { ROWS = 50 };

static char **funkc(FILE *fp)
{
    long fileSize = 0;
    int row;
    char **map = NULL;

    map = (char**)calloc(ROWS, sizeof(char*));

    fseek(fp, SEEK_END, 0);
    fileSize = ftell(fp);
    fseek(fp, SEEK_SET, 0);

    for (row = 0; row < fileSize && row < ROWS; row++)
    {
        char buffer[2];
        buffer[0] = fgetc(fp);
        buffer[1] = 0;
        map[row] = strdup(buffer);
    }
    for (;row < ROWS; row++)
    {
        map[row] = strdup("   ");
    }

    return map;
}

int main(int argc, const char *argv[])
{
    char **map;
    FILE *fp;
    char fname[50];
    int row;

    printf("file name \n");
    scanf("%s", fname);
    fp = fopen(fname, "r");

    map = funkc(fp);

    fclose(fp);
    for (row = 0; row < ROWS; ++row)
    {
       printf("ROW[%d]: %s\n", row, map[row]);
    }
    for (row = 0; row < ROWS; ++row)
    {
       free(map[row]);
    }
    free(map);

    return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T03:09:59.287

如果您将数组传递给函数，则在函数中对该数组所做的任何更改都可以由您的主函数访问。这意味着您不必返回数组，只需在 funkc 中修改您的数组，main 就会看到新数组。

在 C 中，大多数变量都是按值传递的。如果在函数中修改了变量的值，则新值将无法在程序的其他地方访问。但是，数组是通过引用传递的，所以 funck 可以访问数组的内存。浏览此处获取更多信息：

[http://staff.um.edu.mt/csta1/courses/lectures/csa2060/c6.html](http://staff.um.edu.mt/csta1/courses/lectures/csa2060/c6.html)

# c++ - Eliminate inefficient code

> ID：15376192
> 
> 赞同：0
> 
> 时间：2013-03-13T02:53:45.807
> 
> 标签：c++, performance, optimization

I was wondering if one is inefficient over the other (two codes below)?

```
if ( abc & myType == myType ) 
{
    if (myValue)
    {
        // do something
    }
} 
```

OR

```
if ( (abc & myType) && myValue ) 
{
    // do something
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T03:19:56.660

其他一些人指出，由于这个原因，两者并不等同：

```
if (abc & myType == myType ) 
{
    if (myValue) {}
}

// OR

if ( (abc & myType) && myValue ) // missing myType == myType
{} 
```

但是，还有第二个原因，两者不相等：`==`运算符的优先级高于`&`运算符（[请参阅此链接](http://en.cppreference.com/w/cpp/language/operator_precedence)）。因此，您的第一个表达式计算如下：

```
if (abc & myType == myType) // Evaluates to (abc & true)
{
    if (myValue) {}
} 
```

您可能打算这样做：

```
if ((abc & myType) == myType) // Now the bitwise and happens before
                              // the comparison is made
{
    if (myValue) {}
} 
```

为了避免这种错误，我总是使用括号来强制优先级，只要从*人类的*角度来看有任何歧义的可能性（即使编译器永远不会发现它有歧义），假设读者不知道什么是实际优先级是。这具有使代码更易于阅读的额外好处。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-13T02:56:32.023

它们不相等，“更正”的第二个将是

```
if ( (abc & myType == myType) && myValue ) 
{
    // do something
} 
```

在这种情况下，任何体面的编译器都会为两者发出相同的代码。

此外，进行这种微优化几乎是不明智的——您将时间浪费在最多只有一两条汇编指令的差异上，甚至可能在不重要的代码路径中。在这里，在性能没有真正差异的情况下，真正要做的优化是使您的代码更加清晰。

真正的优化是*不*关心这些微小的差异（编译器可能已经考虑了这些差异），而是*分析*代码以找到真正的瓶颈。

# android - 如何查看返回的内容？（真假 ）

> ID：15376195
> 
> 赞同：0
> 
> 时间：2013-03-13T02:54:00.407
> 
> 标签：android, debugging, cursor

这听起来可能很愚蠢，但很严重，我正在寻找一个错误，从我在互联网上阅读的内容中，我应该尝试阅读返回的内容（在我的情况下为“cursor.moveToFirst（）”，对或错）但我不能找到在哪里看到这个。我的应用程序中当然没有消息，logcat 中也没有任何消息，那么它在哪里？
谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T02:57:33.567

你可以试试

```
boolean result = cursor.moveToFirst();

Context context = getApplicationContext(); 
int duration = Toast.LENGTH_SHORT;

Toast.makeText(context, "debug:" + result , duration).show(); 
```

然后它会在您的设备上弹出。

或者你可以试试

```
boolean result = cursor.moveToFirst();
Log.d("TESTING", "debug:" +result); 
```

然后过滤LogCat`"TESTING"`

# c - 在 C 中使用块

> ID：15376197
> 
> 赞同：2
> 
> 时间：2013-03-13T02:54:01.187
> 
> 标签：c, block

我有这个代码

```
#include <stdio.h>
#include <stdlib.h>

int main(){
int a = 5;
{
    int b = 6;
}
printf("%d %d", a, b);
return 0;
} 
```

我试图看看使用块会如何影响这一点，但程序不起作用。说 b 未声明，这是给我的例子。有谁知道出了什么问题？或者这是否有可能会抛出我和错误，因为当 printf 不存在时 int b 在块内被声明和初始化？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-13T02:56:25.607

是的，在您尝试打印的位置未声明`b` *。*它的范围从它的创建延伸到它的块的末尾，它是.*之前*的右大括号`printf`。

也许你的意思是这样的：

```
#include <stdio.h>
#include <stdlib.h>

int main (void) {
    int a = 5;
    int b = 42;  // <<-- Look here! Yes, you! Right here! :-)
    {
        int b = 6;
        printf ("In block: %d %d\n", a, b);
    }
    printf ("Ex block: %d %d\n", a, b);
    return 0;
} 
```

`b`在您尝试在块外打印它的地方，这有一个范围。它不在块`b` *内*，但您会在打印结果时发现：

```
In block: 5 6
Ex block: 5 42 
```

# python - 如何在python中选择性地导入模块？

> ID：15376200
> 
> 赞同：9
> 
> 时间：2013-03-13T02:54:25.493
> 
> 标签：python, coding-style

我有几个不同的模块，我需要根据不同的情况导入其中一个，例如：

```
if check_situation() == 1:
    import helper_1 as helper
elif check_situation() == 2:
    import helper_2 as helper
elif ...
    ...
else:
    import helper_0 as helper 
```

这些助手包含相同的字典`dict01`, `dict02`, `dict03`...但在不同情况下调用的值不同。

但这有一些问题：

1.  导入语句都写在文件的顶部，但是`check_situation()`这里的函数需要先决条件，所以它现在离顶部很远。
2.  超过 1 个文件需要这个辅助模块，所以使用这种导入既难又难看。

那么，如何重新安排这些助手呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T03:00:01.123

您可以使用`__import__()`，它接受一个字符串并返回该模块：

```
helper=__import__("helper_{0}".format(check_situation())) 
```

例子 ：

```
In [10]: mod=__import__("{0}math".format(raw_input("enter 'c' or '': ")))
enter 'c' or '': c             #imports cmath

In [11]: mod.__file__
Out[11]: '/usr/local/lib/python2.7/lib-dynload/cmath.so'

In [12]: mod=__import__("{0}math".format(raw_input("enter 'c' or '': ")))
enter 'c' or '': 

In [13]: mod.__file__
Out[13]: '/usr/local/lib/python2.7/lib-dynload/math.so' 
```

正如@wim 和python3.x 文档指出的那样`__import__()`：

> 导入一个模块。因为这个函数是供 Python 解释器使用的，而不是一般用途，所以最好使用 `importlib.import_module()`以编程方式导入模块。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-13T03:06:30.163

首先，没有严格要求 import 语句必须在文件的顶部，它更像是一种风格指南。

现在，`importlib`a`dict`可以用来替换你的`if`/`elif`链：

```
import importlib

d = {1: 'helper_1', 2: 'helper_2'}
helper = importlib.import_module(d.get(check_situation(), 'helper_0')) 
```

但这只是句法糖，我怀疑你有更大的鱼要炸。听起来您需要重新考虑数据结构并重新设计代码。

`dict01`任何时候你有像,之类的变量`dict02`，`dict03`这是一个明确的信号，表明你需要提升一个级别，并且有一些容器，`dicts`例如它们的列表。以数字结尾的“帮助”模块名称也是如此。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T03:31:24.020

我同意其他答案中给出的方法更接近您标题中提出的主要问题，但是如果导入模块的开销很低（因为可能导入几个字典）并且导入没有副作用，在这种情况下，您最好将它们全部导入并稍后在模块中选择正确的字典：

```
import helper_0
import helper_1
...
helperList = [helper_0, helper_1, helper_2...]
...
helper = helperList[check_situation()] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-13T09:06:54.130

自己解决，参考@Michael Scott Cuthbert

```
# re_direct.py

import this_module
import that_module

wanted = None

# caller.py
import re-direct

'''
many prerequisites
'''
def imp_now(case):
    import re_direct
    if case1:
        re_direct.wanted = re_direct.this_module
    elif case2:
        re_direct.wanted = re_direct.that_module 
```

那么，如果在调用者中，我调用那个imp_now，那么想要，无论是在调用者文件中调用还是在其他调用这个想要的文件中调用，都将被重定向到this_or_that_module。

另外，因为我只在一个函数中导​​入 re_direct，所以你不会在其他任何地方看到这个模块，而只会看到想要的。

# python - 如何使用 Python epoll 获取服务器中已连接客户端的列表

> ID：15376210
> 
> 赞同：0
> 
> 时间：2013-03-13T02:55:44.127
> 
> 标签：python, sockets, client, server-side, epoll

我想向连接到使用 Python epoll 的服务器的客户端子集发送消息。是否有获取`fileno`已连接客户端列表的实用方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T03:10:52.813

通常，您处理此问题的方式是自己跟踪客户。每次您接受新客户时，在将其添加到 之前`epoll`，还要将其添加到您的收藏中。每次您删除客户时，将其从您的收藏中删除。

典型的最小存储是`dict`将套接字映射到您需要跟踪的任何其他内容。您可以使用它`socket`本身、`weakref`它的a 或它`fileno`作为键。您需要的数据通常包括读取缓冲区和写入缓冲区、对等地址（在 上接收`accept`）、名称或用户 ID 或身份验证 cookie 等。

而且我不确定您如何使用轮询服务器做任何有用的事情，该服务器至少没有连接到每个客户端套接字的读取缓冲区。当您收到部分消息时，您会怎么做？（就此而言，如果您打算向这些客户端发送消息，并且您没有写缓冲区，您将如何做？）

* * *

但要回答您的具体问题：

无法从 Python[`epoll`对象](http://docs.python.org/2/library/select.html#epoll-objects)中获取 fd 的列表，因为无法使用[底层 API](http://linux.die.net/man/4/epoll)来执行此操作。

可以想象，您可以编写从 0 到最大打开 fd 的所有内容，并尝试对其进行`epoll_ctl`处理并根据错误进行区分。这可能是一个非常糟糕的主意，但也并非不可能。您可能不得不使用`ctypes`本机功能，并且您可能需要尝试不同的可能性以找出具有正确效果的方法。例如，如果你这样做`epoll_ctl(my_epoll.fileno(), EPOLL_CTL_MOD, fd, NULL)`，你会得到`ENOENT`一个未注册的 fd，`EBADF`一个不存在的 fd，但是`EINVAL`（因为 NULL `event`）一个有效的 fd。或者它可能会出现段错误。我不能保证有任何参数组合可以区分，但是通过一些试验和错误，你可能会找到一个。

（顺便说一句，没有什么说 an`epoll`必须是已连接客户端的列表；例如，它可能是已连接的客户端加上侦听器套接字加上“退出”管道。）

# versioning - 寻找 Web 应用程序变更日志的优秀示例

> ID：15376211
> 
> 赞同：4
> 
> 时间：2013-03-13T02:55:59.393
> 
> 标签：versioning, changelog

在过去的几个月里，我一直在为公司开发一个网络应用程序（测试版）。现在我们已经到了发布点，回首过去，我们应该有一个更好的版本控制系统。我们已经为未来的版本制定了规则集，所以我希望我们可以开发一些更好的内部实践。

哪些 Web 应用程序（或桌面）变更日志脱颖而出？

# linux - 我的 ffmpeg 流保存在哪里？

> ID：15376212
> 
> 赞同：0
> 
> 时间：2013-03-13T02:56:00.853
> 
> 标签：linux, ffmpeg, angstrom-linux

我刚刚开始探索 ffmpeg（最终与 openCV 一起使用），并且正在运行以下命令：

```
root@beaglebone:/# ffmpeg -f video4linux2 -r 25 -s 640x480 -i /dev/video0 /out.avi 
```

此时相机指示灯亮起，似乎正在拍摄。但是，当我以 结束它时`CTRL+C`，找不到该文件。

有什么想法吗？

完整输出：

```
root@beaglebone:/# ffmpeg -f video4linux2 -r 25 -s 640x480 -i /dev/video0 /out.avi
ffmpeg version v0.7.4, Copyright (c) 2000-2011 the Libav developers
  built on Oct  9 2012 10:50:57 with gcc 4.5.4 20120305 (prerelease)
  configuration: --enable-shared --enable-pthreads --enable-gpl --enable-postproc --enable-avfilter --cross-prefix=arm-angstrom-linux-gnueabi- --prefix=/usr --enable-ffserver --enable-ffplay --enable-x11grab --enable-libtheora --enable-libvorbis --arch=arm --target-os=linux --enable-cross-compile --extra-cflags=' -fexpensive-optimizations -fomit-frame-pointer -O4 -ffast-math -march=armv7-a -fno-tree-vectorize -mthumb-interwork -mfloat-abi=softfp -mfpu=neon -mtune=cortex-a8 --sysroot=/home/koen/setup-scripts/build/tmp-angstrom_v2012_05-eglibc/sysroots/beaglebone' --extra-ldflags='-Wl,-O1 -Wl,--hash-style=gnu -Wl,--as-needed' --sysroot=/home/koen/setup-scripts/build/tmp-angstrom_v2012_05-eglibc/sysroots/beaglebone --enable-hardcoded-tables --cpu=cortex-a8
  libavutil    51\.  7\. 0 / 51\.  7\. 0
  libavcodec   53\.  6\. 0 / 53\.  6\. 0
  libavformat  53\.  3\. 0 / 53\.  3\. 0
  libavdevice  53\.  0\. 0 / 53\.  0\. 0
  libavfilter   2\.  4\. 0 /  2\.  4\. 0
  libswscale    2\.  0\. 0 /  2\.  0\. 0
  libpostproc  52\.  0\. 0 / 52\.  0\. 0
^C
root@beaglebone:/# ls
bin   dev  home  lost+found  mnt  proc  sbin  tmp  var
boot  etc  lib   media       opt  run   sys   usr
root@beaglebone:/# 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T16:07:31.167

使用`CTRL+C`您会强制您的应用程序立即退出。这样做你的文件还没有被 FFmpeg 完成。使用您当前的设置 FFmpeg 只会在输入流停止时完成您的文件，因为没有设置输出选项。因此，一种解决方案是在输出文件中添加时间选项`-t 60`，其中 60 以秒为单位。

```
ffmpeg -f video4linux2 -r 25 -s 640x480 -i /dev/video0 -t 60 /out.avi 
```

另一种解决方案是停止输入流，例如断开/卸载相机。然后流停止并自动写入您的文件。（不完全正确，因为 FFmpeg 实际上是在每一帧之后写入每一帧，而不是完成文件。不要为此烦恼......）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-20T07:19:53.683

触发以下命令

```
whereis ffmpeg 
```

# jquery - 为什么 .text 或 .html 不起作用

> ID：15376220
> 
> 赞同：0
> 
> 时间：2013-03-13T02:56:39.943
> 
> 标签：jquery, arrays, json, html

我有一个跨度：

```
<span id="unreadbadge" class="badge red">0</span> 
```

和一个在执行函数上说的脚本这样做：

```
var arrayOfUnRead = jQuery.parseJSON(text);
jQuery("#unreadbadge").text(arrayOfUnRead.length);
confirm(arrayOfUnRead.length); 
```

尽管“1”，arrayOfUnRead.length 的正确值被回调，以确认具有 id unreadbadge 的跨度仍然保持其相同的内容“0”。我已经尝试过 .html 并收到相同的结果。如果有帮助，我会在 Wordpress 上运行它。

`text`是：

> [{"id":"1","message":"Hello Users","conversation_id":"1","sender":"kdogisthebest","sent_on":"2013-03-12 13:45:58 ","re​​ad_by":"kdogisthebest"}]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T03:00:22.207

尝试这样的事情：

```
var text = "[2,55,42]";
var arrayOfUnRead = $.parseJSON(text);
var lengthOfUnread = arrayOfUnRead.length;
$("#unreadbadge").text(lengthOfUnread);
confirm(lengthOfUnread); 
```

查看小提琴：http: [//jsfiddle.net/LCCjB/](http://jsfiddle.net/LCCjB/)

# sql - 如果有空值，ISNULL 不显示列？

> ID：15376223
> 
> 赞同：1
> 
> 时间：2013-03-13T02:56:47.377
> 
> 标签：sql, select, sql-server-2008-r2, isnull

我有疑问

```
SELECT [Category] = ISNULL ( c.Category,'0'),
       COUNT (cl.ClientID) as [3 Mo Clients]
FROM Category c  LEFT JOIN clients cl ON cl.CategCode = c.CategCode 
WHERE agencyid =2
GROUP BY  c.Category, c.CategCode 
```

它的工作但它必须显示类别表中的所有类别，即使它们为空但是当我运行我的查询时它看起来像这样 ![](../Images/965c0bae17ad3b36472554ae18ac359d.png)

类别表中的类别

```
Child
Infant
Newborn
Pregnant
Postpartum
Senior 
```

任何想法方式`ISNULL`都不能正常工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T02:59:01.333

因为您已经过滤了子句中的行，`WHERE`导致它的行为类似于`INNER JOIN`. 您需要将条件放在`ON`子句中，因为*我猜想`agencyid`在 table 上找到了`CategCode`*该列。

```
SELECT  [Category] = ISNULL ( c.Category,'0'),
        COUNT (cl.ClientID) as [3 Mo Clients]
FROM    Category c  
        LEFT JOIN clients cl 
           ON cl.CategCode = c.CategCode  AND 
              cl.agencyid = 2
GROUP   BY  c.Category, c.CategCode 
```

**更新 1**

```
SELECT  [Category] = ISNULL ( c.Category,'0'),
        COUNT (cl.ClientID) as [3 Mo Clients],
        SUM(CASE WHEN statusid in (1,2) THEN 1 ELSE 0 END) [Status_1_2]
FROM    Category c  
        LEFT JOIN clients cl 
           ON cl.CategCode = c.CategCode  AND 
              cl.agencyid = 2
GROUP   BY  c.Category, c.CategCode 
```

# java - 检查号码列表是否按顺序排列

> ID：15376224
> 
> 赞同：0
> 
> 时间：2013-03-13T02:56:55.253
> 
> 标签：java

我有一个关于 Java 编程的外行问题。

我想编写一个函数来检查数字列表是否是连续的。

说 [1, 2, 3, 4, 5]，函数会返回 true，

但是对于 [1, 3, 4, 9, 10]，该函数将返回 false。

有人可以帮我吗？

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T03:02:08.003

Write a loop that looks at each element of the list.

For each position `i` in the list, test that list[i] + 1 equals list[i + 1].

You can code it yourself as an exercise. (Don't forget to deal with the edge cases ...)

* * *

**UPDATE:** ... for people treating this problem as a learning exercise.

A simple direct implementation approach is probably the best idea; e.g. @Joe's final answer. However, the simple approach doesn't always work well ... or at all:

*   Some Java `List` implementations have a `get` method that is `O(N)`. That would lead to an `O(N^2)` algorithm overall.
*   Sometimes a a list can only be accessed using an iterator; i.e. `list.get(i)` might not be an option.

In such cases, you could implement the algorithm with one pass through the list using an iterator. You need to keep "the previous element" in variable, etcetera.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T03:29:18.640

正如 Stephen C 所说，这是一个非常简单的逻辑

```
int a[] = { 1, 2, 3, 4, 5,7 };
        boolean flag = true;
        for (int i = 0; i < a.length - 1; i++) {
            if (a[i + 1] != a[i] + 1) {
                flag = false;
                break;

            }
        }
        System.out.println("Flag is " + flag); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T03:07:51.893

逻辑很简单。只需获取第一个数字并检查它是否与下一个值匹配。像那样检查相邻的值。如果条件在任何时候失败，则中断。如果所有 if 条件都为真，则列表将是连续的。

# c# - 创建实例后如何将其转换为创建的类型

> ID：15376225
> 
> 赞同：1
> 
> 时间：2013-03-13T02:57:01.183
> 
> 标签：c#

假设我有一个返回类型的方法：

```
private Type GetPersonOrOrganisation(someParameter)
{
  either return Person type or Organisation type
} 
```

然后我调用这个方法：

```
Type type = GetPersonOrOrganisation(someParameter); 
```

然后我尝试创建返回类型的新实例：

```
var newContact = Activator.CreateInstance(type); 
```

我剩下的是 newContact 是对象类型。我想要的是 newContact 是 Person 或 Organization 类型，具体取决于从 GetPersonOrOrganisation 返回的内容。

有谁知道如何将 newContact 转换为正确的类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T03:06:14.693

这肯定有一些代码味道。但也许有一些方法可以解决它。

如果您要以相同的方式与个人和组织进行交互，您可能需要考虑一个界面，个人和组织都实现了它们。或者可能是一个基类，具体取决于您的具体情况。

除此之外，我们可能需要您之后尝试做的事情才能提供建议。如果没有接口（或其他一些基类），您就不能拥有可以是其中任何一种类型的 ONE 对象。他们目前唯一的共同点是对象。

你可以根据你的场景做一些不同的事情，比如`if (newContact is Person) { } else if (newContact is Organisation) { }`或类似的事情，但这真的会进入代码异味，除非你完全被这些对象和方法所困。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T03:06:30.227

您可以从函数返回一个初始化对象并使用 GetType() 和 typeof 对其进行测试。下面是一个例子（当然蒂姆的例子也可以）。

```
public class Person
{
}
public class Organization
{
}

class Program
{
    // Generate a Person if i == true or Organization if i == false
    static object GetPersonOrOrganization(bool i)
    {
        if (i == true)
        {
            return new Person();
        }
        else
        {
            return new Organization();
        }
    }

    static void Main(string[] args)
    {
        var p = GetPersonOrOrganization(true); // Generates a Person.

        if (p.GetType() == typeof(Person))
        {
            Console.WriteLine("Person!"); // This prints.
        }
        else
        {
            Console.WriteLine("Organization");
        }

        var o = GetPersonOrOrganization(false); // Generates an Organization.

        if (o.GetType() == typeof(Person))
        {
            Console.WriteLine("Person!");
        }
        else
        {
            Console.WriteLine("Organization!"); // This prints.
        }

        Console.ReadLine();
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T03:08:49.837

你需要这样的东西：

```
public interface IPersonOrganization {
}
public class Peron : IPersonOrganization {
}
public class Organization : IPersonOrganization {
}

private IPersonOrganization GetPersonOrganization(bool isPerson) {
  if (isPerson) 
    return new Person();
  else
    return new Organization;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T03:17:21.027

Here's one way; though this assumes a parameterless constructor exists:

```
using System;

namespace StackOverflow.Demos
{

    class Program
    {
        public static void Main(string[] args)
        {
            new Program();
            Console.ReadKey();
        }
        private Program()
        {

            Type type = GetPersonOrOrganisation(new Person());
            //object myInstance = GetInstanceOfType(type);
            var myInstance = GetInstanceOfType(type);
            Console.WriteLine(myInstance.ToString());

            type = GetPersonOrOrganisation(new Organization());
            myInstance = GetInstanceOfType(type);
            Console.WriteLine(myInstance.ToString());

        }
        private Type GetPersonOrOrganisation(object what)
        {
            return what.GetType();
        }
        private object GetInstanceOfType(Type type)
        {
            //return type.GetConstructor(new Type[] { }).Invoke(new object[] { });
            return Activator.CreateInstance(type);
        }
    }

    public class Person
    {
        public Person() { }
    }
    public class Organization
    {
        public Organization() { }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T04:01:26.587

这是你遇到的问题吗？

```
public void Demo()
{
    var myInstance = Activator.CreateInstance((new Person()).GetType());
    Console.WriteLine(Test(myInstance));
}
private string Test(object x) //this is the method being called
{ 
    return string.Format("Object - {0}", x.ToString()); 
}
private string Test(Person x) //this is what you were hoping for
{ 
    return string.Format("Person - {0}", x.ToString()); 
}
private string Test(Organization x) 
{ 
    return string.Format("Org - {0}", x.ToString()); 
} 
```

一种解决方法是（不推荐）：

```
public void Demo()
{
    var myInstance = Activator.CreateInstance((new Person()).GetType());
    Console.WriteLine(Test(myInstance));
}
private string Test(object x) //redirect the call to the right method
{
    if (x is Person)
        return Test(x as Person);
    else
        return Test(x as Organization);
}
private string Test(Person x) { return string.Format("Person - {0}", x.ToString()); } //this is what you were hoping for
private string Test(Organization x) { return string.Format("Org - {0}", x.ToString()); } 
```

一个更好的解决方案是：

```
public interface ITestMethod { string Test();}
public class Person : ITestMethod
{
    public Person() { }
    public string Test() { return string.Format("Person - {0}", this.ToString()); }
}
public class Organization : ITestMethod
{
    public Organization() { }
    public string Test() { return string.Format("Org - {0}", this.ToString()); }
}

//...
public void Demo()
{
    var myInstance = Activator.CreateInstance((new Person()).GetType()) as ITestMethod;
    Console.WriteLine(myInstance.Test());
}
//... 
```

# java - 如何编写 .add() 方法？

> ID：15376228
> 
> 赞同：0
> 
> 时间：2013-03-13T02:57:20.147
> 
> 标签：java, class, methods, class-method

这是一个家庭作业问题，我无法理解如何在距离类中创建 .add() 方法。

类距离有两个整数实例变量：

```
private int feet;
private int inches; 
```

它有一个无参数构造函数，用零英尺和零英寸初始化距离。

它有一个两个参数的构造函数，它接受英尺和英寸的两个正整数，如果它们是负数或英寸大于 11，则抛出异常。

它还具有实例变量的 get/set 方法。我的获取/设置方法：

```
public void setFeet(int f){
    feet = f;
}

public void setInches(int in){
    inches = in;
}

public int getFeet(){
    return feet;
}

public int getInches(){
    return inches;
} 
```

我对任何愿意回答的人的第一个问题：这是我应该如何设置这些 get/set 方法吗？我不确定自己。

我的第二个问题在于创建一个方法 add() 将另一个距离对象添加到自身。那是，

```
w1 = new Distance(4,9);
w2 = new Distance(3,6);
w1.add(w2); //w1 becomes 8 feet, 3 inches. 
```

到目前为止，我有这个：

```
 public int add(Distance d) {
    int df = d.getFeet();
    int di = d.getInches();
    int a = this.feet;
    int b = this.inches;
    int c = a.getFeet();
    int d = b.getInches();
    int sumInches, sumFeet, temp;
    sumInches =di + d;
    sumFeet = df + c;
    if (sumInches>11) {
        temp = sumInches-11;
        sumFeet = sumFeet+1;
        sumInches = temp;
    }
    this.feet = sumFeet;
    this.inches = sumInches;
} 
```

但我不确定这是否会编译（我现在无法访问可以安装编译器的计算机）。有人可以检查一下并向我解释为什么这可能是错误的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T03:08:39.617

```
int a = this.feet;
int b = this.inches; 
```

是不是有点啰嗦...

```
int c = a.getFeet();
int d = b.getInches(); 
```

不会编译，回想一下原始值（`int`在我们的例子中）没有方法。

* * *

这是一个解决方案，（增加了对可变参数的支持，允许无限`Distance`s）：

```
public void add(Distance... distance) {
    for(Distance d : distance) {
        feet += d.getFeet();
        if(inches + d.getInches >= 12)
            feet++;
        inches += d.getInches() % 12;
    }
} 
```

有了这个，你可以很容易地添加这样的：

```
d1.add(d2, d3, d4, d5); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T03:18:12.147

**我对任何愿意回答的人的第一个问题：这是我应该如何设置这些 get/set 方法吗？我不确定自己。**

你的 getter/setter 看起来是正确的；它们的重点是[封装](http://en.wikipedia.org/wiki/Encapsulation_%28object-oriented_programming%29)成员变量，以便它们不会被意外“修改”（限制访问）。您可能希望将成员变量初始化为某个“默认”值——在这种情况下，我将它们初始化为下面的 0。 **注意**：默认情况下，编译器会将它们初始化为 0。

```
private int feet = 0;
private int inches = 0;

public void setFeet(int f){
    feet = f;
}

public void setInches(int in){
    feet = in;
}

public int getFeet(){
    return feet;
}

public int getInches(){
    return inches;
} 
```

**我的第二个问题在于创建方法 add()。**

关于您的“添加”方法，您可能希望将局部变量更改为更具“描述性”，从长远来看，这将有助于“可读性”和“可维护性”。

由于您的“距离”类已经包含成员变量“英尺”和“英寸”，因此没有必要将这些值设置为局部变量。您可以直接访问它们——以及任何类的 getter/setter。

```
 public int add(Distance newDistance) {

    int newDistanceFeet = newDistance.getFeet();
    int newDistanceInches = newDistance.getInches();

    int sumInches = newDistanceInches + this.getInches();
    int sumFeet = newDistanceFeet + this.getFeet();

    // Now we can check to see if any conversion are needed.. Note: 12 inches = 1 foot
    //   
    sumInches += (sumInches % 12);
    sumFeet += (sumInches / 12);

   // Now set the newly added inches/feet to the class's member variables
   //
   this.setFeet(sumFeet);
   this.setInches(sumInches);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T03:37:14.177

```
public void setInches(int in){
    feet = in;
} 
```

我认为这是一个错字，因为您将 in 值分配给英尺而不是英寸。

```
public int getInches(){
    return Inches;
} 
```

另一个错字。Java 区分大小写，因此“英寸”与“英寸”不同。除此之外，getter/setter 看起来还不错。

至于 add() 方法......没有理由创建那些“a”、“b”、“c”和“d”变量

```
int a = this.feet;
int b = this.inches;
int c = a.getFeet();
int d = b.getInches(); 
```

您可以直接使用 this.feet 和 this.inches。这本身并没有错，只是不必要并且使代码混乱。此外，我强烈建议始终创建有意义的变量名。“a”、“b”、“c”代码难以阅读。变量名应该是富有表现力的。此外，在您的算法中，您需要从总英寸中减去 12。所以 add 方法可以更简洁地写成这样：

```
public void add(Distance d)
{
  int newFeet = this.feet + d.feet;
  int newInches = this.inches + d.inches;
  if (newInches > 11)
  {
     newFeet++;
     newInches = newInches - 12;
  }
  this.feet = newFeet;
  this.inches = newInches;
} 
```

就个人而言，我会通过将所有内容转换为英寸，然后使用除法和模运算符 (%) 来确定英尺和英寸来实现该逻辑，但如果您愿意，我会将其作为练习留给您。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T03:10:11.253

基本想法是正确的，但是您做错了一些事情，请考虑：

```
public int add( Distance d ){
  feet += d.feet;
  inches += d.inches;
  if( inches >= 12 ){
    inches = inches - 12;
    feet++;
  }
} 
```

我看到的最大问题是

```
int a = this.feet;
int d = a.getFeet(); 
```

这里 a 是 int 而不是 Distance 对象，因此您不能调用 getFeet()

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T03:10:39.740

将您的 add() 更新为：-

```
public int add(Distance d) {
    int df = d.getFeet();
    int di = d.getInches();
    int a = this.feet;
    int b = this.inches; 
```

**错误**：`c`并且`d`是`integers`而不是`Distance`对象。你不需要`c and d`整数。

```
 int sumInches, sumFeet, temp;
    sumInches =di + b;
    sumFeet = df + a;
    if (sumInches>11) {
        temp = sumInches-11;
        sumFeet = sumFeet+1;
        sumInches = temp;
    }
    this.feet = sumFeet;
    this.inches = sumInches; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-13T03:10:56.870

你的问题来了

```
int a = this.feet;
int b = this.inches;
int c = a.getFeet();
int d = b.getInches(); 
```

由于 a 和 b 是 int 变量。他们没有 getFeet() 和 getInches() 方法。将您的 add() 方法更改为

```
public int add(Distance d) {
    int df = d.getFeet();
    int di = d.getInches();
    int sumInches, sumFeet, temp;
    sumInches =di + this.inches;
    sumFeet = df + this.feet;
    if (sumInches>11) {
        temp = sumInches-11;
        sumFeet = sumFeet+1;
        sumInches = temp;
    }
    this.feet = sumFeet;
    this.inches = sumInches;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-13T03:20:32.240

由于这是一个家庭作业问题，我没有提供完整的解决方案。由于您尝试了 add 方法，我将进一步优化它并在此处提供相同的注释

```
public void add(Distance distance) {

        int extraFeet=0;  /*Intializing the extra Feet*/
        extraFeet = (this.inches+distance.getInches())/11; /*Calculating the additional feet*/
        if(extraFeet >0)  
            this.inches = (this.inches+distance.getInches())%11;  /*if extra feet is greater than zero thn the remainder is the inches*/
        else
            this.inches +=distance.getInches(); /*else teh remainder is the sum of the inches*/
        this.feet += (distance.getFeet()+extraFeet);

    } 
```

# jquery - jquery nth子问题

> ID：15376231
> 
> 赞同：2
> 
> 时间：2013-03-13T02:57:28.083
> 
> 标签：jquery, forms, jquery-selectors, css-selectors

我研究了其他 jQuery nth 子问题，但似乎没有一个与我遇到的问题有关。

我在一个 div 中有两个输入，我在单击提交按钮时添加它们，并且每个新输入都有一个更新的名称和 id（bandname1、bandname2、bandname3 ...）。它适用于第一个输入（乐队名），但不适用于第二个（乐队描述），我不知道为什么会这样。

这是适用的代码...

```
$(document).ready(function () {
    $('#btnAdd').click(function () {
        var num = $('.clonedInput').length; // how many "duplicatable" input fields we currently have
        var newNum = new Number(num + 1); // the numeric ID of the new input field being added
        // create the new element via clone(), and manipulate it's ID using newNum value
        var newElem = $('#input' + num).clone().attr('id', 'input' + newNum);
        // manipulate the name/id values of the input inside the new element
        newElem.children(':first', 'div:nth-child(2)').attr('id', 'name' + newNum).attr('name', 'name' + newNum);
        // insert the new element after the last "duplicatable" input field
        $('#input' + num).after(newElem);
        // enable the "remove" button
        $('#btnDel').attr('disabled', '');
        // business rule: you can only add 5 names
        // if (newNum == 5)
        //$('#btnAdd').attr('disabled','disabled');
    });
    $('#btnDel').click(function () {
        var num = $('.clonedInput').length; // how many "duplicatable" input fields we currently have
        $('#input' + num).remove(); // remove the last element
        // enable the "add" button
        $('#btnAdd').attr('disabled', '');
        // if only one element remains, disable the "remove" button
        if (num - 1 == 1) $('#btnDel').attr('disabled', 'disabled');
    });
    $('#btnDel').attr('disabled', 'disabled');
}); 
```

## HTML

```
<div id="input1" class="clonedInput">
    <input type="text" name="bandname1" id="bandname1" size="75" value="Band Name" />
    <input type="text" name="banddescrip1" id="banddescrip1" size="75" value="Short Description" />
</div> 
```

我也试过`div input:nth-child(2)`了，没用。

如果我忘记了任何相关信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T03:22:58.343

尝试

```
newElem.children('input[id^="bandname"]').attr('id', 'bandname' + newNum).attr('name', 'bandname' + newNum);
newElem.children('input[id^="banddescrip"]').attr('id', 'banddescrip' + newNum).attr('name', 'banddescrip' + newNum); 
```

注意： id 属性在整个文档中应该是唯一的，在您的情况下，两个元素都具有相同的 id，这是无效的

演示：[小提琴](http://jsfiddle.net/arunpjohny/AR3hw/3/)

# css - CSS不需要的垂直空间

> ID：15376236
> 
> 赞同：1
> 
> 时间：2013-03-13T02:57:44.760
> 
> 标签：css

当我在 'wrap' div 中输入多行内容时，它会在 div 的底部创建垂直空间。我怎样才能防止这种情况？

[截屏](http://tinypic.com/r/2dt4xat/6 "截屏")

[JSFiddle](http://jsfiddle.net/nD9nN/embedded/result/)

HTML

```
<div id="widgets">
  <div id="wrap">
   <h1 class="name" >Models</h1>
     <li><a href="">Rename a column</a></li>
     <li><a href="">git add all new or modified files</a></li>
     <li><a href="">Heroku assets:precompile plugin </a></li>
     <li><a href="">Heroku tail logs</a></li>
     <li><a href="">Rename a column</a></li>
     <li><a href="">Heroku load db:schema </a></li>
     <li><a href="">Heroku: connect to database </a></li>
     <li><a href="">Postgres: show tables</a></li>
     <li><a href="">git switch to a branch </a></li>
     <li><a href="">add records from console </a></li>
  </div>
</div> 
```

CSS

```
#widgets {
margin: 15px 0px 50px 15px;
text-align: center;
}

#wrap {  
margin: 15px 15px 0px 0px;
text-align: left;
width: 300px;
height: 300px;
padding: 1px 20px 5px 20px;
background: #ffffff;
border: 1px solid #fff;
border-radius: 5px;
display: inline-block;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T03:26:49.820

只需将 float: left 添加到您的#wrap css 声明中。更新[了 jsFiddle](http://jsfiddle.net/nD9nN/1/embedded/result/)。

```
#wrap { float: left; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T03:34:45.287

[@Arman P. 的答案](https://stackoverflow.com/a/15376527/552067)有效，但如果您想继续使用 inline-block 方法而不是像现在这样的浮动，您可以添加以下内容：

```
#wrap {    
    vertical-align: top;
} 
```

# javascript - 如何在运行时使用 javascript 更改滚动条 css？

> ID：15376239
> 
> 赞同：2
> 
> 时间：2013-03-13T02:58:00.870
> 
> 标签：javascript, html, css, google-chrome, scrollbar

是否可以通过单击按钮在运行时更改滚动条的 css（例如颜色）？

这只需要在谷歌浏览器中工作，所以我正在使用：

```
::-webkit-scrollbar {
    width:15px;
}
::-webkit-scrollbar-thumb {
    background-color:#999;
    border:solid #fff;
}
::-webkit-scrollbar-thumb:hover {
    background:#777;
}
::-webkit-scrollbar-thumb:vertical {
    border-width:6px 4px;
} 
```

我在 jsfiddle 做了这个例子：http: [//jsfiddle.net/wZwJz/](http://jsfiddle.net/wZwJz/)
我在哪里添加了这个按钮：

```
<button id="changecss">Change CSS</button> 
```

还有一个 jQuery 监听器：

```
$("#changecss").on("click", function(){
   // Action goes here
}); 
```

我试过这个：`$("::-webkit-scrollbar").css("backgroundColor", "#F00");`但显然没有名为 的元素`::-webkit-scrollbar`，所以 jQuery 不可能找到它......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T03:18:43.757

您不能选择此处提到的伪选择器： [链接](https://stackoverflow.com/questions/3427981/change-text-selection-highlight-with-js)

您的代码将需要执行以下操作：

```
$("#changecss").on("click", function(){
    var ss = document.styleSheets[0];
    ss.insertRule('::-webkit-scrollbar {background-color: red}', 0);
}); 
```

然而，正如在这个小提琴中看到的那样，滚动条似乎更奇怪：http: [//jsfiddle.net/wZwJz/4/](http://jsfiddle.net/wZwJz/4/)

在您将鼠标悬停在它上面之前，颜色不会改变。实际上，我有兴趣了解更多相关信息。所以我会试着弄清楚一些事情。但是，您现在至少应该朝着正确的方向前进。

编辑：所以经过一番摆弄和谷歌搜索后，我要说这是不可能的。这是带有一些注释的最新小提琴：[链接](http://jsfiddle.net/wZwJz/14/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T17:44:40.673

经过几个小时和多次尝试后，我想出了如何解决这个问题。
这是jsfiddle：http: [//jsfiddle.net/promatik/wZwJz/18/](http://jsfiddle.net/promatik/wZwJz/18/)

所以诀窍是在特定的滚动条css之前添加类：

```
.red::-webkit-scrollbar  { ... }

.blue::-webkit-scrollbar { ... } 
```

然后身体，必须有这些类之一*（在jsfiddle中我通过javascript添加类，因为我无法手动控制html）*：

```
$("body").addClass("blue"); 
```

而按钮只需要切换`.red`和`.blue`类。

```
$("#changecss").on("click", function(){
    $(".red,.blue").toggleClass("red").toggleClass("blue");
}); 
```

Chrome 中滚动条的渲染也存在问题*（至少在 v25 之前）*，可以通过删除滚动条并再次添加它来解决这个问题，这里有一个函数：

```
// Hack to force scroll redraw
function scrollReDraw() {
    $('body').css('overflow', 'hidden').height();
    $('body').css('overflow', 'auto');
} 
```

# javascript - jQuery确认按钮不在弹出确认（）对话框中

> ID：15376240
> 
> 赞同：1
> 
> 时间：2013-03-13T02:58:14.847
> 
> 标签：javascript, jquery

我有一个很长的表格，我正在使用 jQuery 验证插件进行验证。表单验证后，我希望提交按钮更改为确认按钮，上面带有关于检查表单错误的适当消息。再次单击此按钮时，只要仍然填写所有必填字段，这次应该提交表单。我有以下内容：

```
var confirmed = function(){
  alert($("#someForm").attr("name")); //just to see the function fire...
  $("#someForm").submit();  
  return true;
}

$(document).ready(function(){
  $("#someForm").validate({
    submitHandler: function(form){
      var oldBtn = $("#submit");
      var newBtn = oldBtn.clone();
      newBtn.click(confirmed)
      newBtn.text("Confirm");
      newBtn.insertBefore(oldBtn);
      oldBtn.remove();
      newBtn.attr({"id": "submit"});
    }
  });
}); 
```

...

```
<button type="submit" id="submit">Submit</button> 
```

它可以验证表单，然后按钮更改文本，单击时触发函数（警报中有表单的名称），但表单永远不会真正提交。任何帮助或想法将不胜感激。

谢谢

编辑：好的，我想我已经弄清楚了。我隐藏了提交按钮和一个名为 Validate 的按钮，它只检查表单是否经过验证而不使用`$("#someForm").valid();`如果它签出，我隐藏了“提交”按钮并显示“确认”按钮以及一条关于检查提交的小消息等。见下文：

```
$(document).ready(function(){
  $("#submitBtn").hide();
  $("#confMessage").hide();
  $("#someForm").validate();
});

var checkValid = function(){
  var isValid = $("#volunteer").valid();
  if(isValid){
    $("#validBtn").remove();
    $("#submitBtn").show();
    $("#confMessage").show();
  }
} 
```

...

```
<p id="confMessage">Please review your submission.</p>    
<p><button id="validBtn" onclick="checkValid()">Validate</button>    
<button type="submit" id="submitBtn">Submit</button></p> 
```

完美运行，比我的原始代码干净得多！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T03:39:15.583

删除 `oldBtn.remove();`然后它会工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T03:54:25.803

你有

```
 var oldBtn = $("#submit");
  var newBtn = oldBtn.clone(); 
```

上面的行所做的是`DOM`在 html 中添加相同的内容，以便也`ID`将复制该意思。
并且每个 ID 必须是唯一的`DOM`。
尝试为克隆重写ID`DOM`并尝试。

**和**

```
newBtn.click(confirmed) 
```

此代码意味着您将事件分配给`newBtn`不调用`click`事件。

对于调用`click`事件使用`.trigger()`

# git - 为什么 Git 说我的主分支“已经是最新的”，即使它不是？

> ID：15376241
> 
> 赞同：148
> 
> 时间：2013-03-13T02:58:30.520
> 
> 标签：git, github, merge

## 基本问题

我刚刚从我的项目中的一个文件中删除了所有代码，并将更改提交给我的本地 git（故意）。我做了

```
git pull upstream master 
```

从上游获取和合并（因此理论上应该返回已删除的代码）。

Git 告诉我一切都是最新的。

一切都绝对不是最新的——所有被删除的代码仍然被删除。

### 其他相关信息

我只有一个名为“master”的分支。

我最近设置了“master”来跟踪上游，如下所示：

> 分支主机设置为从上游跟踪远程分支主机。

该命令`git branch -vv`产生：

```
* master 7cfcb29 [upstream/master: ahead 9] deletion test 
```

为什么为什么会发生这种情况？我即将通过电子邮件向我的项目经理发送我对代码所做的任何更改。

## 更新

我认为这很明显，但无论如何这是我的目标：

**获取我系统上的最新代码。**

在这里原谅我的愤怒，但是为什么这么简单的任务必须如此困难？

* * *

## 回答 #1

> 赞同：245
> 
> 时间：2013-03-13T09:28:16.237

I think your basic issue here is that you're misinterpreting and/or misunderstanding what git does and why it does it.

When you clone some other repository, git makes a copy of whatever is "over there". It also takes "their" branch labels, such as `master`, and makes a copy of that label whose "full name" in *your* git tree is (normally) `remotes/origin/master` (but in your case, `remotes/upstream/master`). Most of the time you get to omit the `remotes/` part too, so you can refer to that original copy as `upstream/master`.

If you now make and commit some change(s) to some file(s), you're the only one with those changes. Meanwhile other people may use the original repository (from which you made your clone) to make other clones and change those clones. They are the only ones with their changes, of course. Eventually though, someone may have changes they send back to the original owner (via "push" or patches or whatever).

The `git pull` command is mostly just shorthand for `git fetch` followed by `git merge`. This is important because it means you need to understand what those two operations actually do.

The `git fetch` command says to go back to wherever you cloned from (or have otherwise set up as a place to fetch from) and find "new stuff someone else added or changed or removed". Those changes are copied over and applied *to your copy of what you got from them earlier*. They are *not* applied to your own work, only to theirs.

The `git merge` command is more complicated and is where you are going awry. What it does, oversimplified a bit, is compare "what you changed in your copy" to "changes you fetched from someone-else and thus got added to your-copy-of-the-someone-else's-work". If your changes and their changes don't seem to conflict, the `merge` operation mushes them together and gives you a "merge commit" that ties your development and their development together (though there is a very common "easy" case in which you have no changes and you get a "fast forward").

The situation you're encountering now is one in which you have made changes and committed them—nine times, in fact, hence the "ahead 9"—and they have made *no* changes. So, `fetch` dutifully fetches nothing, and then `merge` takes their lack-of-changes and also does nothing.

What you want is to look at, or maybe even "reset" to, "their" version of the code.

If you merely want to look at it, you can simply check out that version:

```
git checkout upstream/master 
```

That tells git that you want to move the current directory to the branch whose full name is actually `remotes/upstream/master`. You'll see their code as of the last time you ran `git fetch` and got their latest code.

If you want to *abandon* all your own changes, what you need to do is change git's idea of which revision your label, `master`, should name. Currently it names your most recent commit. If you get back onto that branch:

```
git checkout master 
```

then the `git reset` command will allow you to "move the label", as it were. The only remaining problem (assuming you're really ready to abandon everything you've don) is finding where the label should point.

`git log` will let you find the numeric names—those things like `7cfcb29`—which are permanent (never changing) names, and there are a ridiculous number of other ways to name them, but in this case you just want the name `upstream/master`.

To move the label, wiping out your own changes (any that you have committed are actually recoverable for quite a while but it's a lot harder after this so be *very* sure):

```
git reset --hard upstream/master 
```

The `--hard` tells git to wipe out what you have been doing, move the current branch label, and then check out the given commit.

It's not super-common to *really* want to `git reset --hard` and wipe out a bunch of work. A safer method (making it a lot easier to recover that work if you decide some of it was worthwhile after all) is to rename your existing branch:

```
git branch -m master bunchofhacks 
```

and then make a new local branch named `master` that "tracks" (I don't really like this term as I think it confuses people but that's the git term :-) ) the origin (or upstream) master:

```
git branch -t master upstream/master 
```

which you can then get yourself on with:

```
git checkout master 
```

What the last three commands do (there's shortcuts to make it just two commands) is to change the name pasted on the existing label, then make a new label, then switch to it:

before doing anything:

```
C0 -    "remotes/upstream/master"
    \
     \- C1 --- C2 --- C3 --- C4 --- C5 --- C6 --- C7 --- C8 --- C9    "master" 
```

after `git branch -m`:

```
C0 -    "remotes/upstream/master"
    \
     \- C1 --- C2 --- C3 --- C4 --- C5 --- C6 --- C7 --- C8 --- C9    "bunchofhacks" 
```

after `git branch -t master upstream/master`:

```
C0 -    "remotes/upstream/master", "master"
    \
     \- C1 --- C2 --- C3 --- C4 --- C5 --- C6 --- C7 --- C8 --- C9    "bunchofhacks" 
```

Here `C0` is the latest commit (a complete source tree) that you got when you first did your `git clone`. C1 through C9 are your commits.

Note that if you were to `git checkout bunchofhacks` and then `git reset --hard HEAD^^`, this would change the last picture to:

```
C0 -    "remotes/upstream/master", "master"
    \
     \- C1 --- C2 --- C3 --- C4 --- C5 --- C6 --- C7 -    "bunchofhacks"
                                                      \
                                                       \- C8 --- C9 
```

The reason is that `HEAD^^` names the revision two up from the head of the current branch (which just before the reset would be `bunchofhacks`), and `reset --hard` then moves the label. Commits C8 and C9 are now mostly invisible (you can use things like the reflog and `git fsck` to find them but it's no longer trivial). Your labels are yours to move however you like. The `fetch` command takes care of the ones that start with `remotes/`. It's conventional to match "yours" with "theirs" (so if they have a `remotes/origin/mauve` you'd name yours `mauve` too), but you can type in "theirs" whenever you want to name/see commits you got "from them". (Remember that "one commit" is an entire source tree. You can pick out one specific file from one commit, with `git show` for instance, if and when you want that.)

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2019-01-02T12:39:52.667

I had the same problem as you.

I did `git status` `git fetch` `git pull`, but my branch was still behind to origin. I had folders and files pushed to remote and I saw the files on the web, but on my local they were missing.

Finally, these commands updated all the files and folders on my local:

```
git fetch --all
git reset --hard origin/master 
```

or if you want a branch

```
git checkout your_branch_name_here
git reset --hard origin/your_branch_name_here 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-13T03:02:22.827

您提交的任何更改，例如删除所有项目文件，在拉取后仍然存在。拉取所做的只是将其他地方的最新更改合并到您自己的分支中，如果您的分支删除了所有内容，那么当上游更改影响您已删除的文件时，您最多会遇到合并冲突。所以，简而言之，是的，一切都是最新的。

如果您描述您想要的结果而不是“删除所有文件”，也许有人可以建议适当的行动方案。

**更新：**

> 在我的系统上获取最新的代码

What you don't seem to understand is that you already have the most recent code, which is yours. If what you really want is to see the most recent of *someone else's* work that's on the master branch, just do:

```
git fetch upstream
git checkout upstream/master 
```

Note that this won't leave you in a position to immediately (re)start your own work. If you need to know how to undo something you've done or otherwise revert changes you or someone else have made, then please provide details. Also, consider reading up on what version control is for, since you seem to misunderstand its basic purpose.

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-11-14T12:57:12.357

While none of these answers worked for me, I was able to fix the issue using the following command.

`git fetch origin`

This did a trick for me.

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-03-13T03:20:08.280

As the other posters say, pull merges changes from upstream into your repository. If you want to replace what is in your repository with what is in upstream, you have several options. Off the cuff, I'd go with

```
git checkout HEAD^1  # Get off your repo's master.. doesn't matter where you go, so just go back one commit
git branch -d master  # Delete your repo's master branch
git checkout -t upstream/master  # Check out upstream's master into a local tracking branch of the same name 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-03-05T00:30:02.607

The top answer is much better in terms of breadth and depth of information given, but it seems like if you wanted your problem fixed almost immediately, and don't mind trodding on some of the basic principles of version control, you could ...

1.  Switch to master

    ```
    $ git checkout upstream master 
    ```

2.  Delete your unwanted branch. (Note: it must be have the -D, instead of the normal -d flag because your branch is many commits ahead of the master.)

    ```
    $ git branch -d <branch_name> 
    ```

3.  Create a new branch

    ```
    $ git checkout -b <new_branch_name> 
    ```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-08-01T14:19:54.920

Just a friendly reminder if you have files locally that aren't in github and yet your `git status` says

> Your branch is up to date with 'origin/master'. nothing to commit, working tree clean

**It can happen if the files are in `.gitignore`**

Try running

```
cat .gitignore 
```

and seeing if these files show up there. That would explain why git doesn't want to move them to the remote.

# reporting-services - pentaho 用户控制台 excel 输出

> ID：15376248
> 
> 赞同：1
> 
> 时间：2013-03-13T02:59:18.090
> 
> 标签：reporting-services, report, pentaho

我正在尝试从“pentaho 用户控制台”获取 excel 报告输出。我在模式工作台中创建了一个多维数据集并上传了多维数据集并从中创建报告。

我的 Excel 报告显示“无法呈现报告表。该表可能包含的列数不得超过 10000 列或行数不得超过 10000 行。”

我的报告大约有 40000 行。我的 excel 报告如何给我超过 10000 行？

我们可以将行限制更改为更大的数字吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T09:41:29.997

你在用分析仪吗？那是我能想到的唯一可以看到这个限制的地方。在这种情况下，您应该与 Pentaho Support 合作，因为这意味着您必须有一份 EE 合同。

不过要记住一件事，OLAP 工具，例如基于 mondrian 的分析器/saiku/jpivot，无论如何都不是生成如此大数据导出的地方。可能它应该是报告，或者如果非常大，也许只是通过 xaction 暴露的转换。这是因为在报告或分析引擎中要花费大量精力来导出如此大量的数据——而在为此优化的 ETL 引擎中会更快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-29T22:06:30.190

您必须更改第 18 行的 analyzer.properties

renderer.export.max.rows=10000 按你想要的值

# javascript - 来自具有父 ID 的平面的分层 json

> ID：15376251
> 
> 赞同：15
> 
> 时间：2013-03-13T02:59:33.540
> 
> 标签：javascript, json, hierarchical

[http://jsfiddle.net/eYgGK/](http://jsfiddle.net/eYgGK/)

我从另一个帖子中偷了这个脚本：

```
function convertToHierarchy() {
  var arry = [
    { "Id": "1", "Name": "abc", "Parent": "", "attr": "abc" },
    { "Id": "2", "Name": "abc", "Parent": "1", "attr": "abc" },
    { "Id": "3", "Name": "abc", "Parent": "2", "attr": "abc" },
    { "Id": "4", "Name": "abc", "Parent": "2", "attr": "abc" }
  ];
  var nodeObjects = createStructure(arry);
  for (var i = nodeObjects.length - 1; i >= 0; i--) {
    var currentNode = nodeObjects[i];
    if (currentNode.value.Parent === "") {
      continue;
    }
    var parent = getParent(currentNode, nodeObjects);

    if (parent === null) {
      continue;
    }

    parent.children.push(currentNode);
    nodeObjects.splice(i, 1);
  }
  console.dir(nodeObjects);
  return nodeObjects;
}

function createStructure(nodes) {
  var objects = [];

  for (var i = 0; i < nodes.length; i++) {
    objects.push({
      value: nodes[i],
      children: []
    });
  }

  return objects;

}

function getParent(child, nodes) {
  var parent = null;

  for (var i = 0; i < nodes.length; i++) {
    if (nodes[i].value.Id === child.value.Parent) {
      return nodes[i];
    }
  }

  return parent;
} 
```

该脚本产生：

```
[{
    "value": {
        "Id": "1",
        "Name": "abc",
        "Parent": "",
        "attr": "abc"
    },
    "children": [{
        "value": {
            "Id": "2",
            "Name": "abc",
            "Parent": "1",
            "attr": "abc"
        },
        "children": [{
            "value": {
                "Id": "4",
                "Name": "abc",
                "Parent": "2",
                "attr": "abc"
            },
            "children": []
        }, {
            "value": {
                "Id": "3",
                "Name": "abc",
                "Parent": "2",
                "attr": "abc"
            },
            "children": []
        }]
    }]
}] 
```

我正在寻找的是：

```
[{
    "Id": "1",
    "Name": "abc",
    "Parent": "",
    "attr": "abc",
    "children": [{

        "Id": "2",
        "Name": "abc",
        "Parent": "1",
        "attr": "abc",
        "children": [{

            "Id": "4",
            "Name": "abc",
            "Parent": "2",
            "attr": "abc"
        }, {

            "Id": "3",
            "Name": "abc",
            "Parent": "2",
            "attr": "abc"

        }]
    }]
}] 
```

我需要首先摆脱“价值”包装，其次是空子节点。我知道我可以编写一个清理脚本，但这不是最佳实践。如果有人知道如何修复或建议不同的脚本，那就太好了！

谢谢

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-03-13T03:16:27.303

尝试类似的东西

```
var arry = [{ "Id": "1", "Name": "abc", "Parent": "", "attr": "abc" },
               { "Id": "2", "Name": "abc", "Parent": "1", "attr": "abc" },
               { "Id": "3", "Name": "abc", "Parent": "2", "attr": "abc" },
               { "Id": "4", "Name": "abc", "Parent": "2", "attr": "abc" }];

function convert(array){
    var map = {};
    for(var i = 0; i < array.length; i++){
        var obj = array[i];
        obj.items= [];

        map[obj.Id] = obj;

        var parent = obj.Parent || '-';
        if(!map[parent]){
            map[parent] = {
                items: []
            };
        }
        map[parent].items.push(obj);
    }

    return map['-'].items;

}

var r = convert(arry) 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/MkTA6/1/)

结果

```
[{
    "Id" : "1",
    "Name" : "abc",
    "Parent" : "",
    "attr" : "abc",
    "children" : [{
                "Id" : "2",
                "Name" : "abc",
                "Parent" : "1",
                "attr" : "abc",
                "children" : [{
                            "Id" : "3",
                            "Name" : "abc",
                            "Parent" : "2",
                            "attr" : "abc",
                            "children" : []
                        }, {
                            "Id" : "4",
                            "Name" : "abc",
                            "Parent" : "2",
                            "attr" : "abc",
                            "children" : []
                        }]
            }]
}] 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-07-30T04:27:30.330

@Arun P Johny 的回答很好，但是有一个问题，当数组未排序时，它会刷新子树。我把它更新为这样。

```
var arry = [
                { "Id": "5", "Name": "abc", "Parent": "3", "attr": "abc" },
               { "Id": "2", "Name": "abc", "Parent": "1", "attr": "abc" },
               { "Id": "4", "Name": "abc", "Parent": "2", "attr": "abc" },
               { "Id": "3", "Name": "abc", "Parent": "2", "attr": "abc" },
               { "Id": "1", "Name": "abc", "Parent": "", "attr": "abc" }
               ];

function convert(array){
    var map = {}
    for(var i = 0; i < array.length; i++){
        var obj = array[i]
        if(!(obj.Id in map)){
            map[obj.Id] = obj
            map[obj.Id].children = []
        }

        if(typeof map[obj.Id].Name == 'undefined'){
            map[obj.Id].Id = obj.Id
            map[obj.Id].Name = obj.Name
            map[obj.Id].attr = obj.attr
            map[obj.Id].Parent= obj.Parent
        }

        var parent = obj.Parent || '-';
        if(!(parent in map)){
            map[parent] = {}
            map[parent].children = []
        }

        map[parent].children.push(map[obj.Id])
    }
    return map['-']
}
console.log(JSON.stringify(convert(arry))) 
```

结果是这样的：

```
{
  "children": [
    {
      "children": [
        {
          "Id": "2",
          "Name": "abc",
          "Parent": "1",
          "attr": "abc",
          "children": [
            {
              "Id": "4",
              "Name": "abc",
              "Parent": "2",
              "attr": "abc",
              "children": []
            },
            {
              "children": [
                {
                  "Id": "5",
                  "Name": "abc",
                  "Parent": "3",
                  "attr": "abc",
                  "children": []
                }
              ],
              "Id": "3",
              "Name": "abc",
              "attr": "abc",
              "Parent": "2"
            }
          ]
        }
      ],
      "Id": "1",
      "Name": "abc",
      "attr": "abc",
      "Parent": ""
    }
  ]
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-07-06T18:56:23.613

```
function convert(rows) {
    function exists(rows, Parent) {
            for (var i = 0; i < rows.length; i++) {
                    if (rows[i].Id == Parent) return true;
            }
            return false;
    }
    var nodes = [];
    // get the top level nodes
    for (var i = 0; i < rows.length; i++) {
            var row = rows[i];
            if (!exists(rows, row.Parent)) {
                    nodes.push({
                            id: row.Id,
                            name: row.Name,
                            attr: row.attr
                    });
            }
    }
    var toDo = [];
    for (var i = 0; i < nodes.length; i++) {
            toDo.push(nodes[i]);
    }
    while (toDo.length) {
            var node = toDo.shift();
            // the parent node
            // get the children nodes
            for (var i = 0; i < rows.length; i++) {
                    var row = rows[i];
                    if (row.Parent == node.Id) {
                            var child = {
                                    Id: row.Id,
                                    Name: row.Name,
                                    attr: row.attr
                            };
                            if (node.options) {
                                    node.options.push(child);
                            } else {
                                    node.options = [child];
                            }
                            toDo.push(child);
                    }
            }
    }
    return nodes;} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-06-21T13:47:07.280

改进版，接受参数。

```
function convert(rows, options) {
    var options = options || {};
    var idProp = options.id || 'id';
    var parentProp = options.parent || 'parent';
    var childProp = options.children || 'children';

    function exists(rows, parent) {
        for (var i = 0; i < rows.length; i++) {
            if (rows[i][idProp] == parent) return true;
        }
        return false;
    }

    var nodes = [];

    // get the top level nodes
    for (var i = 0; i < rows.length; i++) {
        var row = rows[i];
        if (!exists(rows, row[parentProp])) {
            nodes.push(Object.assign({}, row));
        }
    }

    var toDo = [];
    for (var i = 0; i < nodes.length; i++) {
        toDo.push(nodes[i]);
    }

    while (toDo.length) {
        var node = toDo.shift();

        // the parent node
        // get the children nodes
        for (var i = 0; i < rows.length; i++) {
            var row = rows[i];
            if (row[parentProp] == node[idProp]) {
                var child = Object.assign({}, row);
                node[childProp] = node[childProp] || [];
                node[childProp].push(child);
                toDo.push(child);
            }
        }
    }

    return nodes;
}
```

```
// Usage
var data = [...];
convert(data);
// Or
convert(data, { id: 'Id', parent: 'Parent', children: 'Children' });
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-08T06:46:48.137

// 像这样尝试......

```
function prepareFlatArrayListToTreeViewList(arry) {
    var treeviewList= angular.copy(flatListToTreeViewData(arry));
    return treeviewList;
} 
```

// 返回json格式数据

```
function flatListToTreeViewData(dataList) {
    var tree = [],
        mappedArr = {},
        arrElem,
        mappedElem;

    // First map the nodes of the array to an object -> create a hash table.
    for (var i = 0, len = dataList.length; i < len; i++) {
        arrElem = dataList[i];
        mappedArr[arrElem.id] = arrElem;
        mappedArr[arrElem.id]['children'] = [];
    }

    for (var id in mappedArr) {
        if (mappedArr.hasOwnProperty(id)) {
            mappedElem = mappedArr[id];

            // If the element is not at the root level, add it to its parent array of children.
            if (mappedElem.parentID) {
                mappedArr[mappedElem['parentID']]['children'].push(mappedElem);
            }
                // If the element is at the root level, add it to first level elements array.
            else {
                tree.push(mappedElem);
            }
        }
    }
    return tree;
} 
```

# javascript - 图像选择器不起作用

> ID：15376253
> 
> 赞同：0
> 
> 时间：2013-03-13T02:59:37.037
> 
> 标签：javascript, jquery, html

我正在尝试创建一个网站，该网站有一个下拉菜单，允许用户选择一个项目，一个带有标题的图像将出现。我似乎无法弄清楚如何让这个工作。我有一个空白段落标签，将图像附加到文档中。

```
<!DOCTYPE HTML>
<html>
<head>
    <title>A JavaScript Template Page</title>
    <meta http-equiv="Content-Type" content="text/HTML; charset=utf-8">
    <link rel="stylesheet" href="css/normalize.css">
    <link rel="stylesheet" href="css/style.css">
    <!--[if lt IE 9]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
</head>
<body>
    <p>
        What kind of mood are you in today?
    </p>
    <select name="menu" id="menu"> //dropdown menu
        <option value="1">
            Choose your option
        </option>
        <option value="2">
            Happy
        </option>
        <option value="3">
            Angry
        </option>
        <option>
            Sad
        </option>
        <option>
            Grumpy
        </option>
    </select>
    <p id="img-swap">

    </p>
    <h1 id="captions"></h1>
<script src="http://code.jquery.com/jquery-latest.min.js"></script>
<script src="js/script.js"></script>
</body>
</html> 
```

在`script.js`

```
var img = ['empty', 'happy', 'angry', 'sad', 'grumpy'];
var im = [];
var sayings = ['How are you feeling today?', 'Happy cat is happy', 'Angry cat is angry', 'Sad cat is sad', 'Grumpy cat is grumpy'];

function imgSwap() {
    var checkIndex = $('#selector').prop('selectedIndex');
    if (index === 0) {
        $('#img-swap').hide();
    } else {
        $('#img-swap').html('<img src="images/' + img[index] + '.jpg" width="600px" height="400px" alt="cats">').hide().show();
        }
        $('#captions').html(sayings[index]);
    }
    $(function() {
    for (var i = 1; i < img.length; i++) {
        im[i] = new Image();
        im[i].src='images/' + img[i] +'.jpg'
        }
        $('#selector').change(function() {
        swap_pictures();
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T03:10:27.213

您的代码中有一些非常明显的错误。以下是我在第一次查看您的代码时可以找到的一些基本内容：

1.  您的 jQuery 是`#selector`在代码中不存在具有该 ID 的任何内容时定义的。它应该是：

    ```
    <select name="menu" id="selector"> 
    ```

2.  在您的`.change()`方法中，您正在调用`swap_pictures()`函数，而您已将函数定义为`imgSwap()`.

3.  在`imgSwap`函数中，您正在设置`checkIndex`变量的值，但稍后在 if 条件中；你有

    ```
    if (index === 0) { 
    ```

    where`index`又是未定义的变量。

* * *

## 编辑

我想这几乎就是全部了。修复它们都导致了这个工作[小提琴](http://jsfiddle.net/nBVuw/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T03:03:05.443

您需要使用 jQuery 的函数来运行该`change()`函数。

这是一个为您精简和工作的 JSFiddle：http: [//jsfiddle.net/UckER/](http://jsfiddle.net/UckER/) - 我只包含了更改图像所需的代码。您可能需要对其进行一些调整，但这应该会让您走上正轨。如果您有任何问题，请告诉我。

# java - 如何将任意 JSON 对象映射到 MySQL

> ID：15376258
> 
> 赞同：1
> 
> 时间：2013-03-13T03:00:12.297
> 
> 标签：java, mysql, json, hibernate, spring-mvc

我正在使用 Spring MVC 和 Hibernate 在 MySQL 中存储具有预定义结构的对象。我对这个过程很熟悉。我想要做的是存储一个我不知道其结构并且仍然能够获得不错的选择速度的任意 JSON 对象。

例如，假设我想为多个用户存储这样的对象：

```
{
    "number": 7,
    "name": "Doug",
    "over18": true,
    "favoriteColors": [
        1,
        4,
        5
    ]
} 
```

我正在为 MySQL 表结构考虑这样的事情

(int)id, (int)parentId, (varchar)name, (bool)boolVal, (double)doubleVal, (varchar)stringVal, (enum)type

该对象将像这样表示

```
1, null, "root"  , null, null, null  , 'object'
2, 1   , "number", null, 7.0 , null  , 'number'
3, 1   , "name"  , null, null, "Doug", 'string'
4, 1   , "over18", true, null, null  , 'bool'
5, 1   , "favclr", null, null, null  , 'array'
6, 5   , null    , null, 1.0 , null  , 'number'
7, 5   , null    , null, 4.0 , null  , 'number'
8, 5   , null    , null, 5.0 , null  , 'number' 
```

任何人都可以就这种技术提出建议。是否已经有一个图书馆可以做到这一点？谢谢！

# mysql - 将servlet文件放在cpanel的什么位置

> ID：15376269
> 
> 赞同：0
> 
> 时间：2013-03-13T03:01:16.647
> 
> 标签：mysql, servlets, jdbc, code-signing

我制作了一个 servlet，它从我网站上托管的数据库中读取值。它在 Eclipse 中工作，但现在我如何将它放在我的站点上以便人们可以访问它？

# javascript - 根据选择的单选按钮更改内容

> ID：15376272
> 
> 赞同：0
> 
> 时间：2013-03-13T03:01:22.823
> 
> 标签：javascript, jquery

这是我的单选按钮：

```
<div style="float: left; margin-top: 35px; margin-left: 38px;">
    <input type="radio" name="cat" class="styled" value="jersey" />
</div>
<div style="float: left; margin-left: 58px; margin-top: 35px;">
    <input type="radio" name="cat" class="styled" value="shorts" />
</div>
<div style="float: left; margin-left: 58px; margin-top: 35px;">
    <input type="radio" name="cat" class="styled" value="shirts" />
</div>
<div style="float: left; margin-left: 58px; margin-top: 35px;">
    <input type="radio" name="cat" class="styled" value="reversible" />
</div>
<div style="float: left; margin-left: 88px; margin-top: 35px;">
    <input type="radio" name="cat" class="styled" value="outerwear" />
</div>
<div style="float: left; margin-left: 88px; margin-top: 35px;">
    <input type="radio" name="cat" class="styled" value="helmets" />
</div>
<div style="float: left; margin-left: 68px; margin-top: 35px;">
    <input type="radio" name="cat" class="styled" value="other" />
</div> 
```

我尝试了多个 jquery 解决方案，如果选择了某个单选按钮，它将显示该单选按钮的唯一内容。但是，我所有的尝试都失败了，我真的不知道为什么（我确实有其他 jquery 脚本正在运行，也许是冲突？）

**所以，例如...**

如果单选按钮`"cat"`的值为`"helmets"`selected，我想显示`helmets`. 如果值更改为`"other"`，让我们取消`helmets`并显示 的内容`"other"`。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T03:08:56.880

像这样的东西？

## [**例子**](http://jsfiddle.net/wkx49/1/)

**JS**

```
$('input[type=radio]').click(function(){
    $('.area').hide();
    $('#' + $(this).val()).show(); 
}); 
```

**CSS**

```
.area{
    display:none;
    background-color:yellow; 
    clear:both; 
} 
```

**HTML**

```
<div style="float: left; margin-top: 35px; margin-left: 38px;"><input type="radio" name="cat" class="styled" value="jersey" /></div>
    <div style="float: left; margin-left: 58px; margin-top: 35px;"><input type="radio" name="cat" class="styled" value="shorts" /></div>
    <div style="float: left; margin-left: 58px; margin-top: 35px;"><input type="radio" name="cat" class="styled" value="shirts" /></div>
    <div style="float: left; margin-left: 58px; margin-top: 35px;"><input type="radio" name="cat" class="styled" value="reversible" /></div>
    <div style="float: left; margin-left: 88px; margin-top: 35px;"><input type="radio" name="cat" class="styled" value="outerwear" /></div>
    <div style="float: left; margin-left: 88px; margin-top: 35px;"><input type="radio" name="cat" class="styled" value="helmets" /></div>
    <div style="float: left; margin-left: 68px; margin-top: 35px;"><input type="radio" name="cat" class="styled" value="other" /></div>

<div class='area' id="jersey">jersey</div>
<div class='area' id="shorts">shorts</div>
<div class='area' id="shirts">shirts</div>
<div class='area' id="reversible">reversible</div>
<div class='area' id="outerwear">outerwear</div>
<div class='area' id="helmets">helmets</div>
<div class='area' id="other">other</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T03:18:23.537

尝试以下操作：

```
$('input[name=cat]').change(function() {
   alert($(this).val()); 
}); 
```

如果您的代码提醒正确的值，您可以使用开关将您想要的内容添加到您想要的位置。如果结果不符合预期，您需要向我们提供更多详细信息以了解发生了什么。

# c# - 检查元素中是否存在特定属性

> ID：15376275
> 
> 赞同：1
> 
> 时间：2013-03-13T03:01:46.570
> 
> 标签：c#, xml

我需要检查`ConnectionInd`元素中是否存在特定属性`FlightSegment`。如果存在，我将存储该值，如果不存在，我将继续阅读下一个属性。

以下是它是否存在：

```
<FlightSegment ArrivalDateTime="06-16T06:10" ConnectionInd="O" DepartureDateTime="2013-06-16T00:15" SmokingAllowed="false" eTicket="true">
     <Destination ... />
</FlightSegment> 
```

这是如果它不存在：

```
<FlightSegment ArrivalDateTime="03-27T17:35" DepartureDateTime="2013-03-27T13:30" SmokingAllowed="false" eTicket="true">
     <Destination ... />
</FlightSegment> 
```

我正在使用以下代码检查它，但是当没有时`ConnectionInd`，它会抛出一个错误说`Object reference not set to an instance of an object.`

```
if (FlightSegment.Item(f).Attributes["ConnectionInd"].Value != "" && FlightSegment.Item(f).Attributes["ConnectionInd"] != null)
{
    string conInd = FlightSegment.Item(f).Attributes["ConnectionInd"].Value;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T03:21:10.107

反之亦然：

第一次检查

```
FlightSegment.Item(f).Attributes["ConnectionInd"] != null 
```

然后

```
FlightSegment.Item(f).Attributes["ConnectionInd"].Value != "" 
```

否则，如果它确实为空，您将得到您实际得到的 NullReferenceException。

* * *

更高效：

```
var att = FlightSegment.Item(f).Attributes["ConnectionInd"];
if (var != null)
{
    string cind = att.Value;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T03:05:21.307

应该有一个类似 hasAttribute 的方法或类似的方法，而不是*FlightSegment.Item(f).Attributes["ConnectionInd"].Value*因为如果“ConnectionInd”不存在，您正在尝试获取“Value”一个空对象，这将导致异常。

# jquery - Paul Irish's Infinite Scroll Plugin with Ajax Jsonp

> ID：15376280
> 
> 赞同：1
> 
> 时间：2013-03-13T03:02:20.130
> 
> 标签：jquery, jquery-isotope, infinite-scroll

I am planning to use Paul Irish's Infinite Scroll Plugin , this gives the page numbers at the bottom as 1 , 2 , 3\. But I want to load the data on ajax json request. Because i don't have the URL structure like that for paginations. I am using ajax for the same.

[http://www.infinite-scroll.com/infinite-scroll-jquery-plugin/](http://www.infinite-scroll.com/infinite-scroll-jquery-plugin/)

May I know if anyone used this plugin with ajax and jsop request , if so please give me some directions on how to do.

One more thing is , nobody will have 2 ,3 ,4 , 5 pages pre-defined right , we can define some regex rules which can be resolved to some pages

Thanks.

# java - How to turn on and off gprs with toggle button?

> ID：15376281
> 
> 赞同：1
> 
> 时间：2013-03-13T03:02:22.030
> 
> 标签：java, android, gprs

I have a ToggleButton named gprs. I need it to turn on and off the gprs. How to accomplish that? I've looked [here](https://stackoverflow.com/questions/12535101/how-can-i-turn-off-3g-data-programmatically-on-android) but it gives errros and I can't figure it out how to use it in my case.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T12:30:10.590

好的，如果有人有同样的问题，我会在这里发布解决方案，使用切换按钮。首先，我为 gprs 设置创建了单独的类：

```
public class GprsSettings {

    static void setMobileDataEnabled(Context context, boolean enabled) {
        try {

            final ConnectivityManager conman = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);
            final Class conmanClass = Class.forName(conman.getClass().getName());
            final Field iConnectivityManagerField = conmanClass.getDeclaredField("mService");
            iConnectivityManagerField.setAccessible(true);
            final Object iConnectivityManager = iConnectivityManagerField.get(conman);
            final Class iConnectivityManagerClass = Class.forName(iConnectivityManager.getClass().getName());
            final Method setMobileDataEnabledMethod = iConnectivityManagerClass.getDeclaredMethod("setMobileDataEnabled", Boolean.TYPE);
            setMobileDataEnabledMethod.setAccessible(true);

            setMobileDataEnabledMethod.invoke(iConnectivityManager, enabled);
            Log.i("setMobileDataEnabled()","OK");
        } 

        catch (Exception e) 
        {
            e.printStackTrace();
            Log.i("setMobileDataEnabled()","FAIL");
        }         
    }
} 
```

然后，首先在我的活动中添加一些代码来检查 gprs 是打开还是关闭....将它放在您的 onCreate 方法之上：

```
private boolean isNetworkConnected() {
    ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo ni = cm.getActiveNetworkInfo();
    if (ni == null) {
        // There are no active networks.
        return false;
    } else
        return true;
    }
} 
```

然后，在我的活动中，我将此代码用于带有 toast 的切换按钮：

```
gprs.setOnClickListener(new OnClickListener() {

    public void onClick(View v) {
        try {
            if (((ToggleButton)v).isChecked()) {
                GprsSettings.setMobileDataEnabled(getApplicationContext(), true);
                Toast.makeText(getApplicationContext(), "GPRS is ON", Toast.LENGTH_LONG).show();
            }else{    
                GprsSettings.setMobileDataEnabled(getApplicationContext(), false);
                Toast.makeText(getApplicationContext(), "GPRS is OFF", Toast.LENGTH_LONG).show();
            }
        }
        catch (Exception localException) {
            Log.e("SwarmPopup", "error on GPRS listerner: " + localException.getMessage(), localException);
        }
    }
});
gprs.setChecked(isNetworkConnected()); 
```

就是这样，就像一个魅力。

# c#-4.0 - 将对象创建为类的静态对象

> ID：15376289
> 
> 赞同：0
> 
> 时间：2013-03-13T03:02:49.893
> 
> 标签：c#-4.0

我在 c#.net 中创建了一个名为“Exam”的类库中的类。在我的 Windows 窗体中，我创建了一个像“

```
static Exam obj= new Exam(); 
```

1.  会发生什么？
2.  我可以使用 new 运算符重新初始化此对象吗？
3.  如果我重新初始化这个对象，是分配新内存还是使用相同的内存？
4.  我怎样才能销毁这个对象，因为它是静态的，所以该对象在应用程序关闭之前都可用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T13:25:33.297

当我们应该只允许为一个类（单例）创建一个实例时，我们将实际使用它。

说

```
 public class Exam
    {
        private static Exam exam = null;

        public string Id { get; set; }

        public static Exam getInstance()
        {

            if (exam == null)
            {
                exam = new Exam();
                exam.Id = IdGenerator.GenerateId();
            }

            return exam;
        }
    } 
```

//呼叫者

```
Exam exam = Exam.getInstance();

                Console.WriteLine(exam.Id);

                Exam exam2 = Exam.getInstance();

                Console.WriteLine(exam2.Id); 
```

//尽管您创建了两个实例，但请检查两者的 ID .. 它们看起来相似。

//此实例将在应用程序退出之前可用。

希望这能回答你的问题

# ruby-on-rails - 在过滤器安全问题之前

> ID：15376291
> 
> 赞同：0
> 
> 时间：2013-03-13T03:02:54.417
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

目前在我的项目中，我有一种方法可以检查用户的 id 是否为“1”，他是否可以访问某些操作。我已经使用设计 gem 进行身份验证。

这是我的代码参考

```
before_filter :find_xxx, :only => [:edit, :update, :destroy, :create, :new] 
```

这是代码

```
 protected    
def find_xxx
  if user_signed_in? && current_user.id != 1
      redirect_to "/", :notice => "Not today"
  end
end 
```

我查看了 Rails 官方文档，他们以类似的方式处理它。我想知道这是保护我的操作的安全方法吗，难道不能有人用 /post 将表单添加到我的 html 中，以执行操作。

保护我的方法的最佳方法是什么。

感谢您的时间和考虑。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T03:18:36.967

假设您的 Devise 身份验证工作正常，例如`current_user`经过身份验证，任何人都无法通过在提交表单之前操纵表单来偷偷通过身份验证。

但是，您需要反转过滤器中的逻辑，因为就目前而言，用户只需不登录就可以绕过重定向（因为`user_signed_in?`will be `false`）。如果您有另一个过滤器或身份验证要求强制他们在访问控制器中的任何操作之前登录，那可能就足够了。

为了安全起见，我将条件更改为：

```
unless user_signed_in? && current_user.id == 1 
```

请注意，像这样依赖特定的数据库 ID 通常不是一个好主意。你最好[创建一个管理员角色](https://github.com/plataformatec/devise/wiki/How-To%3a-Add-an-Admin-role)和/或使用像[CanCan](https://github.com/ryanb/cancan)这样的 gem来创建更明确的安全性。

你应该总是围绕这样的事情编写测试以确保安全。

# javascript - 过滤搜索结果仅适用于 PNG 图像

> ID：15376292
> 
> 赞同：1
> 
> 时间：2013-03-13T03:03:02.403
> 
> 标签：javascript, image, api, google-custom-search

我从 Google 文档中复制了大部分代码，然后使用文档来设置过滤器。

*   我没有收到任何错误
*   但是 FILETYPE_PNG 不起作用（`the filetype never gets restricted)`

我使用 [了 https://developers.google.com/custom-search/docs/structured_search#filetype](https://developers.google.com/custom-search/docs/structured_search#filetype)

有人知道代码有什么问题吗？

我也尝试过`searcher.execute("Kobe Bryant");`- 但它仍然不仅限于 PNG。

```
google.load('search', '1', {language: 'en', style: google.loader.themes.MINIMALIST});
google.setOnLoadCallback(function() {
  var customSearchOptions = {};
  var orderByOptions = {};
  orderByOptions['keys'] = [{label: 'Relevance', key: ''} , {label: 'Date', key: 'date'}];
  customSearchOptions['enableOrderBy'] = true;
  customSearchOptions['orderByOptions'] = orderByOptions;
  var imageSearchOptions = {};
  //imageSearchOptions['layout'] = LAYOUT_POPUP;  -- layout popup causing errors for some reason
  customSearchOptions['enableImageSearch'] = true;
  customSearchOptions['disableWebSearch'] = true;
  var customSearchControl =   new google.search.CustomSearchControl('Youaintfindingoutwhatthisis', customSearchOptions);
  customSearchControl.setResultSetSize(google.search.Search.SMALL_RESULTSET);

  var searcher = customSearchControl.getImageSearcher();
  searcher.setRestriction(
    customSearchControl.getImageSearcher.RESTRICT_FILETYPE,
    customSearchControl.getImageSearcher.FILETYPE_PNG
  );

  var options = new google.search.DrawOptions();
  options.setAutoComplete(true);
  customSearchControl.draw('cse', options);
}, true); 
```

* * *

更新

*   请看下面我的回答

*   仍然不知道 LAYOUT_POPUP 是怎么回事 - 我在这里收到一个未定义的错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T03:32:26.380

好吧，我想通了。

该文档有点误导。

您需要以下代码才能使过滤工作：

```
customSearchControl.setSearchStartingCallback(
  this, function(control, searcher, query) {
      searcher.setQueryAddition("filetype:png OR filetype:PNG");
  }
); 
```

将其放在 js 文件的末尾。希望这可以帮助其他在文档中苦苦挣扎的人。

# queue - 通过 REST 向服务总线队列发送消息并通过 TCP 接收消息？

> ID：15376297
> 
> 赞同：2
> 
> 时间：2013-03-13T03:03:30.793
> 
> 标签：queue, servicebus, azureservicebus

我有一个 Azure 服务总线队列。我想使用 REST API 将消息发布到队列，但使用 IIS 托管的 WCF 服务，使用 netMessagingBinding 来接收消息。

有没有人有一个资源链接来证明这一点？或者是否有人能够提供如何使用 REST POST 将消息推送到队列然后使用 netMessagingBinding 接收的代码示例？

我相信读完这篇文章是有可能的：

> 您可以使用 REST 或 .NET 托管 API 向服务发送和接收消息，在给定场景中使用不同的协议混合和匹配客户端。例如，您可以使用一种协议将消息发送到队列并使用不同的协议使用它。

[http://msdn.microsoft.com/en-us/library/windowsazure/hh780717.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/hh780717.aspx)

我可以使用 netMessagingBinding 将消息推送到队列并使用 netMessagingBinding 接收。我还可以使用 REST POST 将消息推送到队列，然后使用 REST DELETE 从队列中接收和删除。我只是无法通过 netMessagingBinding REST POST 消息并接收

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T16:32:33.507

NetMessagingBinding 始终使用 BinaryMessageEncodingBindingElement+NetMessagingTransportBindingElement 构建通道堆栈。如果您的 ServiceBus 队列/订阅中的 BrokeredMessages 是普通的旧 [text] xml，那么 BinaryMessageEncoding 将不起作用，使用 WCF 您将使用带有 TextMessageEncoder 和 NetMessagingTransportBindingElement 的 CustomBinding。

简而言之，您需要使用带有 TextMessageEncodingBindingElement（MessageVersion = None）和 NetMessagingTransportBindingElement 的 CustomBinding，确保 Action=”*”，并在 ServiceBehavior 上设置 AddressFilterMode=Any。

以下是使用 NetMessagingTransportBindingElement 读取普通旧 XML 消息的两种方法：

解决方案 #1 在 ServiceContract 中使用 System.ServiceModel.Channels.Message 并调用 Message.GetBody()

```
namespace MessagingConsole
{
    static class Constants {
        public const string ContractNamespace = "http://contoso";
    }

    [DataContract(Namespace = Constants.ContractNamespace)]
    class Record
    {
        [DataMember]
        public string Id { get; set; }
    }

    [ServiceContract]
    interface ITestContract
    {
        [OperationContract(IsOneWay = true, Action="*")]
        void UpdateRecord(Message message);
    }

    [ServiceBehavior(
        AddressFilterMode = AddressFilterMode.Any)] // This is another way to avoid “The message with To ” cannot be processed at the receiver…”
    class TestService : ITestContract
    {
        [OperationBehavior]
        public void UpdateRecord(Message message)
        {
            Record r = message.GetBody<Record>();
            Console.WriteLine("UpdateRecord called! " + r.Id);
        }
    }

    class ServiceProgram
    {
        static void Main(string[] args)
        {
            string solution = "sb://SOMENS";
            string owner = "owner";
            string key = "XXXXXX=";
            string topicPath = "Topic2";
            string subscriptionName = "Sub0";
            TokenProvider tokenProvider = TokenProvider.CreateSharedSecretTokenProvider(owner, key);

            MessagingFactory factory = MessagingFactory.Create(solution, tokenProvider);
            TopicClient sender = factory.CreateTopicClient(topicPath);
            SubscriptionClient receiver = factory.CreateSubscriptionClient(topicPath, subscriptionName, ReceiveMode.ReceiveAndDelete);

            string interopPayload = "<Record xmlns='" + Constants.ContractNamespace + "'><Id>4</Id></Record>";
            BrokeredMessage interopMessage = new BrokeredMessage(new MemoryStream(Encoding.UTF8.GetBytes(interopPayload)), true);
            sender.Send(interopMessage);

            CustomBinding binding = new CustomBinding(
                new TextMessageEncodingBindingElement { MessageVersion = MessageVersion.None },
                new NetMessagingTransportBindingElement());
            ServiceHost serviceHost = new ServiceHost(typeof(TestService), new Uri(solution));
            ServiceEndpoint endpoint = serviceHost.AddServiceEndpoint(typeof(ITestContract), binding, topicPath + "/Subscriptions/" + subscriptionName);
            endpoint.Behaviors.Add(new TransportClientEndpointBehavior(tokenProvider));
            serviceHost.Open();
            Console.WriteLine("Service is running");
            Console.ReadLine();            
        }
    }
} 
```

解决方案 #2 定义 MessageContract 数据类型以使预期的 Soap 合同与互操作客户端发送的内容相匹配：

```
namespace MessagingConsole
{
    static class Constants
    {
        public const string ContractNamespace = "http://contoso";
    }

    [DataContract(Namespace = Constants.ContractNamespace)]
    class Record
    {
        [DataMember]
        public string Id { get; set; }
    }

    [MessageContract(IsWrapped=false)]
    class RecordMessageContract
    {
        [MessageBodyMember(Namespace = Constants.ContractNamespace)]
        public Record Record { get; set; }
    }

    [ServiceContract]
    interface ITestContract
    {
        [OperationContract(IsOneWay = true, Action="*")]
        void UpdateRecord(RecordMessageContract recordMessageContract);
    }

    class ServiceProgram
    {
        static void Main(string[] args)
        {
            string solution = "sb://SOMENS";
            string owner = "owner";
            string key = "XXXXXXXXXXXXXX=";
            string topicPath = "Topic2";
            string subscriptionName = "Sub0";
            TokenProvider tokenProvider = TokenProvider.CreateSharedSecretTokenProvider(owner, key);

            MessagingFactory factory = MessagingFactory.Create(solution, tokenProvider);
            TopicClient sender = factory.CreateTopicClient(topicPath);
            SubscriptionClient receiver = factory.CreateSubscriptionClient(topicPath, subscriptionName, ReceiveMode.ReceiveAndDelete);

            string interopPayload = "<Record xmlns='" + Constants.ContractNamespace + "'><Id>5</Id></Record>";
            BrokeredMessage interopMessage = new BrokeredMessage(new MemoryStream(Encoding.UTF8.GetBytes(interopPayload)), true);
            sender.Send(interopMessage);

            CustomBinding binding = new CustomBinding(
                new TextMessageEncodingBindingElement { MessageVersion = MessageVersion.None },
                new NetMessagingTransportBindingElement());
            ServiceHost serviceHost = new ServiceHost(typeof(TestService), new Uri(solution));
            ServiceEndpoint endpoint = serviceHost.AddServiceEndpoint(typeof(ITestContract), binding, topicPath + "/Subscriptions/" + subscriptionName);
            endpoint.Behaviors.Add(new TransportClientEndpointBehavior(tokenProvider));
            serviceHost.Open();
            Console.WriteLine("Service is running");
            Console.ReadLine();
        }
    }

    [ServiceBehavior(
        AddressFilterMode = AddressFilterMode.Any
        )]
    class TestService : ITestContract
    {
        [OperationBehavior]
        public void UpdateRecord(RecordMessageContract recordMessageContract)
        {
            Record r = recordMessageContract.Record;
            Console.WriteLine("UpdateRecord called! " + r.Id);
        }
    }
} 
```

# c# - 带有 if then 语句的空表适配器值

> ID：15376298
> 
> 赞同：0
> 
> 时间：2013-03-13T03:03:35.120
> 
> 标签：c#, sql, vb.net, sql-server-2005, dataset

我有一个 VB.Net 程序，用于检查上周是否使用了特定终端。我想使用 if then 语句将结果发送给我。如果 tableadapter 为空（NULL），那么我希望它在程序中执行某些操作......现在我有：

```
Me.1TableAdapter.Fill(Me.SwiperCheck.1, DTstartdate, TodayEnd)

If (Me.SwiperCheck.1.Count = 0) Then

msgbox ("It Worked") 
```

这是我的数据集查询：

```
SELECT        CASE WHEN COUNT(sTerminal) = 0 THEN NULL ELSE COUNT(sTerminal) END AS terminal
FROM            Swipe
WHERE        (dtCreated BETWEEN @startdate AND @enddate) AND (sTerminal = 'Swiper 1') 
```

但是它不起作用，我知道输出为“空”如果输出不为空，则程序正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T18:13:07.857

如果您希望它在计数为零时不返回任何记录，那么您必须执行以下操作：

```
SELECT        COUNT(sTerminal) terminal
FROM            Swipe
WHERE        (dtCreated BETWEEN @startdate AND @enddate) AND (sTerminal = 'Swiper 1')
HAVING COUNT(sTerminal) > 0 
```

那应该使您的原始 IF 正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T03:32:31.180

尝试将 0 更改为 dbnull 或

```
me.swipercheck.1.count is nothing 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T19:13:06.210

如所写，您的查询将始终只有一行。您的条件是检查表上的行数。所以“如果（1 = 0）那么”......

你真正需要检查的是：

```
If (Me.SwiperCheck.1.Item(0) Is DBNull.Value) Then 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T19:24:54.657

我认为您的查询返回的 NULL 给您带来了麻烦。您可以通过删除 CASE 语句并返回 Count(sTerminal) 来简化查询。然后你有一个一致的返回值：

```
SELECT    COUNT(sTerminal) AS terminal
FROM            Swipe
WHERE        (dtCreated BETWEEN @startdate AND @enddate) AND (sTerminal = 'Swiper 1') 
```

然后我会遵循@Bill 的建议，因为您总是返回一行：

```
If (Me.SwiperCheck.1.Item(0) = 0 ) Then 
```

请参阅这篇关于您的“可为空”错误[MSDN-Nullable Value的文章](http://msdn.microsoft.com/en-us/library/ms235245.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-19T15:21:34.500

尝试 IsDbNull(me.swipercheck.1.count) = false 代替？（抱歉，由于代表，我似乎无法在帖子上写小评论）。

# actionscript-3 - 所有 ActionScript3 对象的详细生命周期

> ID：15376301
> 
> 赞同：0
> 
> 时间：2013-03-13T03:03:44.597
> 
> 标签：actionscript-3, flash, memory, air

我使用 ActionScript3 开发网页和手机游戏。记忆是我最大的敌人，我总是不知道一些物体的细节寿命。例如：Bitmap 我知道bitmapData 有一个“处理”功能。因此，我总是使用“bitmap.bitmapData.dispose”来处理位图对象。但是，我想知道如果位图对象的引用变为0，即使我不调用dispose函数，GC也会释放该对象使用的内存。

我有太多像上面这样的问题（声音、纹理、BaseTexture ...）。有没有人对这个话题有一些想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T05:34:33.547

对象的生命周期由一件事决定——如果不再从任何地方引用它，它就被认为是死的（孤立的）并且是一个从内存中删除的主题。`dispose()`所以是的，如果您删除对它的所有引用，即使没有显式调用，BitmapData 对象也会从内存中删除。

关于声音或纹理对象 - 这些最好重复使用，例如，您可以`mySound.play()`多次调用，这将生成一个单独的`SoundChannel`对象，其生命周期大约是声音的持续时间，如果它没有被引用。同样，您可以使用相同的 Texture 对象来拥有多个被纹理化的东西的实例。

对于那些扩展的类有一个特殊的规则`EventDispatcher`，因为它们可以监听事件，如果你不使用对该对象的弱引用，事件监听器会直接附加到实例上，从而创建一个额外的引用链接，这将有效地禁止GC 从回收该对象占用的内存。因此，您应该始终完全控制所有强引用侦听器，至少为此目的。

希望这可以帮助。

# javascript - JavaScript：跨不同页面更改类样式

> ID：15376303
> 
> 赞同：0
> 
> 时间：2013-03-13T03:03:49.927
> 
> 标签：javascript, css, dom

我正在尝试创建一个函数，该函数允许我在每个页面的页脚中更改 div 的颜色`mouseover`。

到目前为止，这是我想出的，但它不起作用。

JavaScript：

```
function A(obj) {
    var elements = document.getElementsByClassName(obj)
    var objects = []

    for (var i=0; i < elements.length; ++i) {
        objects.push(elements[i])
    }
    return objects;
}

var footerDiv = A('footerDiv');
footerDiv.onmouseover = function() {
    footerDiv.style.color = 'black';
}

footerDiv.onmouseout = function() {
    footerDiv.style.color = 'white';
} 
```

HTML：

```
<div class="footerDiv">
  Example Text
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T03:08:07.503

我只用 CSS 来做到这一点：

```
.footerDiv {
    color: white;
}

.footerDiv:hover {
    color: black
} 
```

# ios - 如何从 iOS 应用程序将现有的 Facebook 帖子分享到用户时间轴？

> ID：15376304
> 
> 赞同：6
> 
> 时间：2013-03-13T03:04:11.310
> 
> 标签：ios, facebook, share, facebook-ios-sdk

我们的应用程序显示了我们用户关注的艺术家的一些 Facebook 帖子。我们希望我们的用户能够将他们喜欢的帖子分享回他们的时间线（就像您在 Facebook 动态中的每个帖子下看到的分享按钮）。

我们尝试使用 Facebook 网络对话框来执行此操作，但我们一直遇到错误。例如：当尝试分享照片类型的帖子时：如果我们使用图片 url 设置参数“图片”，我们会收到一个错误，即提要对话框不应使用来自 FBCDN 的图片。

我们可以将照片作为链接共享，但照片本身不会出现在用户时间轴上。

有没有办法模仿内置分享按钮的功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-07T10:48:08.877

关于*“提要对话框不应使用来自 FBCDN 的图片”* -问题：您可能想要获取图像 url（用于`https://graph.facebook.com/POST_ID`获取包含该 url 的帖子对象）并通过您自己的服务器转发图像数据。如果 Facebook 仍然抱怨，有一些方法可以向客户端隐藏原始 url（阅读[这篇文章）。](https://stackoverflow.com/a/4031896/601466)

# android - android cts：为什么包运行失败但个别测试通过？

> ID：15376309
> 
> 赞同：2
> 
> 时间：2013-03-13T03:04:25.793
> 
> 标签：android, cts

我在跑步时遇到了失败

```
 cts-tf > run cts --package android.holo 
```

但是当我单独运行失败的测试时，比如

```
cts-tf > run cts --class android.holo.cts.HoloTest --method testHoloWallpaperNoTitleBar 
```

他们通过了。

在不了解内部结构的情况下，我预计无法通过包测试的东西会无法通过单独的测试。如果依赖于先前的测试，那么如果有任何失败，它将是单独的测试。

这是**cts**时间问题，holo 预期的问题，还是其他问题？如果您理解它，请赐教，我是**cts**新手。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-06T04:58:49.550

也许该测试用例受到同一个类或包中的另一个测试用例的影响但是如果它在重新运行时通过，你可能只是通过

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-03T09:26:59.807

Holo 测试用例通常用于被测设备的屏幕分辨率。如果您在移动设备上运行测试，您可以要求 Google 取消这些测试。

根据之前的答案，之前的一组测试用例可能会导致一些导致 Holo 测试失败的问题（但我对此表示怀疑）

# c++ - Visual Studio 编程

> ID：15376310
> 
> 赞同：-1
> 
> 时间：2013-03-13T03:04:31.807
> 
> 标签：c++

我有一个我完全不理解的任务。本章我们主要关注 for、while 和 do while 语句。问题如下...

“Kenton Incorporated 的工资单经理想要一个程序，允许他为三个商店中的每一个输入未知数量的工资单：商店 1、商店 2 和商店 3。程序应该计算总工资单，然后显示结果屏幕。”

我完全不知道从哪里开始。我想让我感到困惑的是“未知数量的工资单”。我不知道如何让用户过渡到输入下一个商店的工资单金额。这个问题没有说明使用哨兵值，但也没有说不使用哨兵值。

任何帮助或建议将不胜感激！！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T03:11:46.710

由于有三个商店，您可能希望保留每个单独的工资单金额，即使规格似乎并不在意。这样，您可以使用特殊的商店代码 0 来表示您已完成。

伪代码如下：

```
store1 = 0
store2 = 0
store3 = 0
print "Enter store, or 0 to end: "
input storenum
while storenum <> 0:
    print "Enter a payroll amount: "
    input amount
    select storenum:
        case 1:
            store1 += amount
            end case
        case 2:
            store2 += amount
            end case
        case 3:
            store3 += amount
            end case
    end select
    print
    print "Enter store # or 0 to end"
    input storenum
end while
print
print "Store 1 payroll is ", store1
print "Store 2 payroll is ", store2
print "Store 3 payroll is ", store3
print
print "Total payroll is ", store1 + store2 + store3 
```

这将导致像这样的成绩单：

```
Enter store, or 0 to end: 3
Enter a payroll amount: 33

Enter store, or 0 to end: 2
Enter a payroll amount: 22

Enter store, or 0 to end: 3
Enter a payroll amount: 11

Enter store, or 0 to end: 0

Store 1 payroll is 0
Store 2 payroll is 22
Store 3 payroll is 44

Total payroll is 66 
```

# asp.net - ASP.NET MVC 4 中的路由错误

> ID：15376311
> 
> 赞同：0
> 
> 时间：2013-03-13T03:04:35.757
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-4, asp.net-mvc-routing

我在 ASP.NET MVC 路由中偶然发现了一个奇怪的行为。

在我的 RouteConfig 文件中，当我映射这样的路由（默认路由）时：

```
 routes.MapRoute(
            name: "Default",
            url: "{controller}/{action}/{id}",
            defaults: new {
                controller = "Home",
                action = "Index",
                id = UrlParameter.Optional
            }
        ); 
```

使用：

```
@Html.ActionLink("Index", "Home") 
```

我得到一个漂亮、干净且简短的 URL，例如：`http://mysite/`

但是，如果我在 之后添加另一个可选参数`id`，如下所示：

```
 routes.MapRoute(
            name: "Default",
            url: "{controller}/{action}/{id}/{name}",
            defaults: new {
                controller = "Home",
                action = "Index",
                id = UrlParameter.Optional,
                name = UrlParameter.Optional
            }
        ); 
```

同样的`ActionLink`输出这个 URL:`http://mysite/home/index`每次。我使用 . 验证了相同的行为`RedirectToAction`。

我的问题是：有没有办法解决这个问题并在后一种情况下获得更短的 URL？为什么 ASP.NET MVC 路由引擎在这些情况下表现不同？

**编辑**

我按照 Dave A 发布的说明设法解决了这个问题。我在与我的自定义 URL 模式匹配的“默认”路由之前添加了一个自定义路由。

```
routes.MapRoute(
    name: "Custom",
    url: "{controller}/{action}/{id}/{name}",
    defaults: new {
        controller = "Home",
        action = "Index",
        id = UrlParameter.Optional
    }
);

routes.MapRoute(
    name: "Default",
    url: "{controller}/{action}/{id}",
    defaults: new {
        controller = "Home",
        action = "Index",
        id = UrlParameter.Optional
    }
); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T03:12:36.103

MVC 框架处理路由的方式确实存在“错误”或效率低下。特别是在这种情况下，它试图充分利用所有参数，但会感到困惑。

阅读 hacked 的这篇文章，显示系统中有更多“故障” [http://weblogs.asp.net/imranbaloch/archive/2010/12/26/routing-issue-in-asp-net-mvc-3-rc- 2.aspx](http://weblogs.asp.net/imranbaloch/archive/2010/12/26/routing-issue-in-asp-net-mvc-3-rc-2.aspx)

# xml - 在 Node.js 中解析 XML 字符串的最简单方法是什么？

> ID：15376312
> 
> 赞同：4
> 
> 时间：2013-03-13T03:04:48.860
> 
> 标签：xml, node.js

我环顾四周，没有看到在 Node.js 中解析 XML 的明显方法。我假设有一些相对简单的 XML 对象，我可以将字符串或 url 传递给，但我在规范中没有找到类似的东西。我需要一个外部库吗？如果是这样，你们会推荐哪一个？我不需要 xPath（尽管我不介意），只要我能以一种明显的方式遍历树（测试 nodeType == ElementNode 并循环遍历子节点）。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-13T04:09:37.420

我建议[xml2js](https://npmjs.org/package/xml2js)，一个简单的 XML 到 JavaScript 对象转换器。然后，您可以迭代生成的对象。页面中的代码片段：

```
var parseString = require('xml2js').parseString;
var xml = "<root>Hello xml2js!</root>"
parseString(xml, function (err, result) {
    console.dir(result);
}); 
```

您可以使用安装它`npm install xml2js`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T03:20:26.910

[此处](https://github.com/joyent/node/wiki/modules#wiki-parsers-xml)列出了多种 XML 模块，您可能会在其中找到最适合您的模块。我知道的一个流行的是[sax-js](https://github.com/isaacs/sax-js)。如果您已经熟悉该库，那么还有[libxml 绑定。](https://github.com/polotek/libxmljs)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-08T06:53:12.537

如果您将 Express 与正文解析器一起使用，最简单的方法是使用[express-xml-bodyparser](https://www.npmjs.com/package/express-xml-bodyparser)。它允许解析所有路由或特定路由的 XML，具体取决于您的场景

所有路线：

```
const xmlparser = require('express-xml-bodyparser');
// .. other middleware ... 
app.use(express.json());
app.use(express.urlencoded());
app.use(xmlparser());
// ... other middleware ... 

app.post('/receive-xml', function(req, res, next) {

  // req.body contains parsed XML as JSON

}); 
```

具体路线：

```
app.post('/receive-xml', xmlparser({trim: false, explicitArray: false}), function(req, res, next) {
  // req.body contains parsed XML as JSON  
}); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-13T03:27:43.180

如果它不是必须在服务器端完成的绝对要求，那么在客户端上您可以使用[XMLSerializer](https://developer.mozilla.org/en-US/docs/XMLSerializer)解析为字符串，并使用[DOMParser](https://developer.mozilla.org/en-US/docs/DOM/DOMParser)解析为 DOM。

XMLSerializer 示例（从 DOM 到字符串）：

```
var XMLS = new XMLSerializer();
var elem = document;
var xml_str = XMLS.serializeToString(elem);
console.log(xml_str); 
```

DOMParser 示例（从字符串到 DOM）：

```
var parser = new DOMParser();
var doc = parser.parseFromString(xml_str, "application/xml");
console.log(doc); 
```

# php - 我的 sef 链接如何使用 .htaccess

> ID：15376315
> 
> 赞同：-1
> 
> 时间：2013-03-13T03:04:52.097
> 
> 标签：php, .htaccess, seo

我的链接是“ **site.com/index.php?w=Mbv** ”

我想看：“ **site.com/Mbv** ”

我尝试了 *mod_rewrite RewriteRule Generator* 和更多因为它没有人工作。

*对不起，我的英语不好。*

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T03:09:41.223

在 .htaccess 中写这个

```
RewriteEngine On   
RewriteRule ^([a-z0-9_-])$ /index.php?w=$1 [L,NC] 
```

# javascript - 第二次通过 javascript 向 2 个不同的网站提交表单

> ID：15376318
> 
> 赞同：0
> 
> 时间：2013-03-13T03:05:00.680
> 
> 标签：javascript, iframe, cross-domain

我有一种情况，我想同时将表单数据发布到 2 个不同的位置。我无法控制这些位置，它们是跨域的。我在这里找到了以前的帖子，使用 iframe，我现在找不到，我已经合并了。它每次都提交给第一个，但第二个只有 25% 的时间被提交。我需要它在所有主要浏览器中更可靠地工作。尝试使用 ajax 但无法让它在 IE 中跨域工作，尝试了这个论坛中提出的许多解决方案。谢谢。埃德

```
<form name="myForm" method="post" action="http://www.firstwebsite.com" onsubmit="return submit2nd()"  >
<input type="email" name="email" value='' />
<input type="submit" name="submit" />
</form>
<script>

function submit2nd(){
var x=document.forms["myForm"]["email"].value;
var iframe = document.createElement("iframe");
var uniqueString = "asderwegthyuq123";
document.body.appendChild(iframe);
iframe.style.display = "none";
iframe.contentWindow.name = uniqueString;
var form = document.createElement("form");
form.target = uniqueString;
form.action = "http://www.secondwebsite.com";
form.method = "POST";
var input = document.createElement("input");
input.type = "hidden";
input.name = "email";
input.value = x;
form.appendChild(input);
document.body.appendChild(form);
form.submit();
return true;
}
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T03:34:38.967

提交时复制表单并将表单提交到具有不同目的地的两个 iframe，或使用 AJAX。我强烈建议使用[JQuery](http://www.jquery.com/)等框架，这样您就不必担心兼容性问题。

您的代码发生的情况是，它会在提交第一页期间尝试提交到第二页。如果第一个页面的提交在提交到第二个页面之前完成，则第二个提交将不会成功。如果您离开该页面，当前页面中的所有脚本都将停止（因为您将访问 www.firstwebsite.com）。

您可以在此处执行的一种解决方案是：

1.  更改`submit2nd()`以便它将提交给第一个和第二个网站。
2.  `submit2nd()`应该返回 false 所以它不会尝试提交到`action`属性中的页面。
3.  提交后（单击提交按钮），复制表单。
4.  第一个表单 -> 更改`action`为 www.firstwebsite.com -> 提交。
5.  第二种形式 -> 更改`action`为 www.secondwebsite.com -> 提交。

注意：如果您希望为此使用 AJAX，请确保您不会遇到跨域问题。在您的示例中，您尝试将表单提交到两个不同的域：firstwebsite.com 和 secondwebsite.com。如果它们位于不同的域中，则需要为此进行特殊设置。您可以[阅读](http://www.leggetter.co.uk/2010/03/12/making-cross-domain-javascript-requests-using-xmlhttprequest-or-xdomainrequest.html)有关此内容的更多信息或查看此政策的[说明](http://en.wikipedia.org/wiki/Same_origin_policy)。

# c# - 使用 C# 编写 KML - ScreenOverlay

> ID：15376320
> 
> 赞同：0
> 
> 时间：2013-03-13T03:05:05.193
> 
> 标签：c#, google-maps, kml

我正在尝试使用我在 C# 中制作的程序在谷歌地图上叠加。我似乎无法弄清楚代码来获得我想要的叠加层的位置。无论我尝试什么，它都位于页面中间。

这是我的代码：

```
kml.WriteStartElement("ScreenOverlay");
kml.WriteElementString("name", "elephant");
kml.WriteStartElement("Icon");
kml.WriteElementString("href", "images/elephant.jpg");

//This is the part I can't figure out below

kml.WriteStartElement("overlayXY", "x='0' y='0' xunits='fraction' yunits='fraction'/");
kml.WriteStartElement("screenXY", "x='0' y='0' xunits='pixels' yunits='pixels'/");
kml.WriteStartElement("rotationXY", "x='0' y='0' xunits='fraction' yunits='fraction'/");
kml.WriteStartElement("size", "x='0' y='0' xunits='pixels' yunits='pixels'/");

kml.WriteEndElement();
kml.WriteEndElement();
kml.WriteEndElement();
kml.WriteEndElement();
kml.WriteEndElement();
kml.WriteEndElement(); 
```

该代码是我最近的尝试。但它没有用。“大象”图像仍然保留在屏幕中间。我是初学者（如果不是很明显！）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T13:38:48.550

如果您在 C# 中使用[*System.Xml.XmlTextWriter*](http://msdn.microsoft.com/en-us/library/w703ce6s%28v=vs.71%29.aspx)类生成 KML 输出，则 WriteStartElement() 的第二个参数是元素命名空间而不是属性，并且 Icon 元素必须在开始 overlayXY 元素之前结束，否则生成的输出无效KML。

语法是这样的：

```
[C#]
public void WriteStartElement(
 string localName,
 string ns
); 
```

您需要将代码更改为：

```
 XmlTextWriter kml = new XmlTextWriter(...)
  kml.Formatting = Formatting.Indented;
  kml.WriteStartElement("kml", "http://www.opengis.net/kml/2.2");
  kml.WriteStartElement("ScreenOverlay");
  kml.WriteElementString("name", "elephant");
  kml.WriteStartElement("Icon");
  kml.WriteElementString("href", "images/elephant.jpg");
  kml.WriteEndElement(); // Icon

  kml.WriteStartElement("overlayXY");    
  kml.WriteAttributeString("x", "0");
  kml.WriteAttributeString("y", "0");
  kml.WriteAttributeString("xunits", "fraction");
  kml.WriteAttributeString("yunits", "fraction");
  kml.WriteEndElement(); // overlayXY

  kml.WriteStartElement("screenXY");
  kml.WriteAttributeString("x", "0");
  kml.WriteAttributeString("y", "0");
  kml.WriteAttributeString("xunits", "pixels");
  kml.WriteAttributeString("yunits", "pixels");
  kml.WriteEndElement(); // screenXY
  ...
  kml.WriteEndElement(); // ScreenOverlay
  kml.WriteEndElement(); // kml 
```

提示：当您使用应用程序（Google 地球除外）生成 KML 时，您应该始终验证您的 KML。您可以将您的 KML 发布到[Galdos KML Validator](http://kmlvalidator.com/home.htm)，它不仅会向 KML XML 模式报告任何错误，还会向 OGC KML 规范报告任何错误。

# c# - 从 txt 添加和查找字符串的运行时间太长了

> ID：15376321
> 
> 赞同：-1
> 
> 时间：2013-03-13T03:05:15.187
> 
> 标签：c#, visual-studio-2010

姐姐，哥们，程序员，大师。

根据搜索元素的运行时间，很多文章建议使用 HashSet 和 List 来添加元素。

如何像这样更改或改进我的代码：

```
static List<string> getDBList(string DBname)
{
     List<string> listWords = new List<string>();
     string[] files;

     try
     {
         files = Directory.GetFiles(@"dbase/", DBname); 
         foreach (string file in files)
             foreach (string line in File.ReadAllLines(file))//doubt
                listWords.Add(line.Trim().ToUpperInvariant());
     }
     catch (Exception ex)
     {
         Console.WriteLine(ex.ToString());
         return new List<string> { };
     }

     return listWords;
} 
```

然后...

```
//MAIN PROGRAM
string allInput = rtbInput.Text;

List<string> splitString = new List<string>.Split(new char[] { ' ', '\t', etc...});
List<int> AllIndexes = new List<int>();
HashSet<string> nounList = new HashSet<string>(getDBList("nounList.txt"));//doubt

int startIndexes = 0;

foreach (string s in splitString)
{
    if (s.Trim() != "")
    {
       string word = s.Trim();

       if(!(nounList.Contains(word.ToUpperInvariant())))   //doubt if not found, color it
       { 
               tbTest.Text += word + " ";

               //index to begin color the text
               AllIndexes = WordsIndex(word, startIndexes);

               foreach (int item in AllIndexes) //Coloring all appearance of the word.
               {
                   tbSeeIndex.Text += Convert.ToString(" " + item + " ");

                   rtbInput.Select(item, word.Length);

                   startIndexes = item + word.Length;

                   rtbInput.SelectionColor = Color.Red;
              }

              tbL.Text += Convert.ToString(" " + startIndexes + " ");
        }
    }
} 
```

}

如果我使用输入表单文件需要很长时间。

在名词列表（90963 字）示例中：

书
椅
铅笔
等...

我想使用此代码根据字符串值执行搜索。因为我不熟悉。让我通过你的例子来学习。我只是业余的。：） ：） ：） 非常感谢。干杯...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T03:17:39.033

```
var nounDictionary = nounList
    .ToDictionary(g => g.Key, g => g.First(), StringComparer.OrdinalIgnoreCase); 
```

这应该为您创建一个字典。虽然，如果没有某种有用的密钥，我不确定这会如何“更快”。另外，我怀疑您的列表搜索速度是这里的问题。

编辑：

一个更简单的示例如下，它将键映射为数组中的每个项目，并将值作为每个项目映射到上层。

```
var nounDictionary = nounList.ToDictionary(x => x.ToUpper()); 
```

最后，如果您想以最佳方式搜索您的集合，请使用哈希集，正如其他人所指出的那样。Hashset 有一个接受 IEnumerable 的构造函数，所以只需传入一个字符串列表，因为 IList 实现了 IEnumerable

```
var set = new HashSet(nounList.ToList()); 
```

然后，如果您想搜索您的 HashSet，您可以执行以下操作，尽管这本身就是一个问题。

```
set.Where(x => x.Contains("StringToFind"))
                  .Select(x => x.Split(' ')[0])
                  .FirstOrDefault(); 
```

HashSet 的查找速度非常快。这里有一些有趣的测试。

[http://theburningmonk.com/2011/03/hashset-vs-list-vs-dictionary/](http://theburningmonk.com/2011/03/hashset-vs-list-vs-dictionary/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T05:29:49.017

试试这个。这可能会帮助你。

```
static Dictionary<int, string> getDBList(string DBname)
{
    Dictionary<int, string> WordsDictionary = new Dictionary<int, string>();
    string[] files;

    try
    {
        files = Directory.GetFiles(@"dbase/", DBname);
        foreach (string file in files)
            foreach (string line in File.ReadAllLines(file))
            {
                 string data = line.Trim().ToUpperInvariant();
                 int hash = data.GetHashCode();

                 if(!WordsDictionary.ContainsKey(hash))
                     WordsDictionary.Add(hash, data);                   
            }
        }

    catch (Exception ex)
    {
        Console.WriteLine(ex.ToString());
        return new Dictionary<int, string>();
    } 
    return WordsDictionary;
}

static bool SearchText(string text, Dictionary<int, string> WordsDictionary)
{
    int hash = text.Trim().ToUpperInvariant().GetHashCode();

    if (WordsDictionary.ContainsKey(hash))
        return true;
    else
        return false;
} 
```

# php - 重新排序 Laravel 路由中的方法和参数

> ID：15376324
> 
> 赞同：0
> 
> 时间：2013-03-13T03:05:28.387
> 
> 标签：php, routes, laravel, laravel-3

我正在使用 Laravel 3 中的控制器构建 REST API，我想实现以下结构：

```
/api/controller/{param}/method/{optional param} 
```

目前，我为每种方法设置了单独的路由，这似乎是一个乏味的解决方案：

```
Route::any('api/ControllerA/(:any)/MethodA/(:any?)','api.ControllerA@MethodA');
Route::any('api/ControllerA/(:any)/MethodB/(:any?)','api.ControllerA@MethodB');
// etc.
Route::any('api/ControllerB/(:any)/MethodA/(:any?)','api.ControllerB@MethodA');
// etc. 
```

最后，一个处理无效调用的包罗万象：

```
Route::any('api/(:all)',function(){
    // return invalid call 404 response
}); 
```

这工作得很好，但我无法想象这是最佳解决方案。我可能会考虑做一些类似[这篇文章建议的](https://stackoverflow.com/questions/14378799/dynamic-routing)事情，但我觉得这会导致一些笨重的 API 控制器。有什么我想念的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T18:35:11.797

目前 Laravel 3 不支持`controller/{param}/method/{param}`不手动定义的 url。Laravel 4 支持，但仅适用于默认资源路由（索引、显示、更新、删除等）。您不能定义自定义操作。

我建议你现在坚持你的方法。这就是我们在 Laravel 3 上所做的。如果你真的不喜欢这样，你可以`\Laravel\Routing\Router`用你自己的实现来扩展。

# html - 如何获得方向：具有固定高度的元视口的纵向模式

> ID：15376325
> 
> 赞同：1
> 
> 时间：2013-03-13T03:05:32.960
> 
> 标签：html, height, media-queries, tablet, viewport

是我第一次自己的stackoverflow问题的时候了，因为这件事让我一整天都在发疯。我今天借了一个 ipad 来测试一个带有额外手机和平板电脑版本的网站。（上面只有野生动物园）布局是一个带有一些图形的完全静态的东西，他们希望它是 1:1。所以我了解了移动设备，添加了一个

```
<meta name="viewport" content="width=x" /> 
```

并获得了手机的完美版本。但是当谈到平板电脑时，我遇到了麻烦。

我得到的平板电脑设计是垂直的。在这种情况下，它具有 477x656 像素。所以它应该适合高度，并且可以在每个平板电脑中显示良好，在纵向模式下覆盖整个显示器，在横向模式下水平居中。

所以我想我只是放了一个

```
<meta name="viewport" content="height=656" /> 
```

在代码中，浏览器会像在移动版本上一样呈现事物，只是将我们的高度作为视口主控而不是宽度。这将是一个完美的通用解决方案，就像手机版本一样解决客户的需求。（嗯，当然不同的是，你会在手机版中上下滚动，而平板电脑版的左右会有一些空白，尤其是在横向模式下。）

CSS基本上是：

```
body {
    margin:0 auto;
    width:477px;
    height:656px;
} 
```

结果是彻底失败：

*   在横向模式下，页面垂直呈现大于浏览器中的可用空间。（似乎这里忽略了高度）
*   在竖屏模式下，html标签会增加大量的宽度，因此body标签只能看到一半。

将我的宽度添加到视口只会使浏览器忽略高度并表现得像在手机版本中一样。

所以我想，我强制 html-width

```
html { max-width:477px !important; } 
```

左右，但没有帮助。所以我想，好吧，忘记它并使用纵向版本解决

```
html { margin:0 auto; }
@media (orientation:portrait) { html { margin:0; }} 
```

因此，经过一番绝望后，我发现：**添加 viewport-meta height=x 强制页面为横向模式**

这基本上（我猜）是由于 safari 根据给定的高度和屏幕比例（在横向模式下）而不是给定的 html 计算视口宽度。即使在纵向模式下也会产生横向比例......足够奇怪。是的 - 它不是你所期望的，对我来说看起来像一个浏览器错误。还是我在这里完全错了，误解了整个视口的事情？

所以

*   我如何强制浏览器让它正确？根据我给定的高度根据我的 html/css 计算 html 宽度？
*   以及如何让整个页面以横向模式显示？为什么它更大？

任何提示高度赞赏！（我现在确实有点筋疲力尽了......事实证明，我不再习惯于软件不符合我的预期）

嗯，所以这是我的测试场景：

```
<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="height=656" />
<style>
html { background-color:#8b8b8b; }
html { width:477px !important; }

@media (orientation:landscape){
    html { margin:0 auto; background-color:#e1006e; }
    #p { display:none; }
}
@media (orientation:portrait){
    html { background-color:#8f9d6a; }
    #l { display:none; }
}

body {
    position:relative;
    background-color:#000;
    margin:0 auto;
    padding:0;
    width:477px;
    height:656px;
}
.container {
    margin:0 auto;
    width:477px;
    height:656px;
    background-color:#232529;
    color:#9bbe0a;
}
.content { padding:250px 0 0 45px; }

.footer { position:absolute; left:22px; bottom:2px; }
.footer, .footer a, .footer a:link, .footer a:visited, .footer a:hover, .footer a:active { color:#9bbe0a; }
</style>
</head>
<body>
<div class="container">
    <div class="content">
        <p>stuff</p>
        <div id="l"><b>Landscape</b></div>
        <div id="p"><b>Portrait</b></div>
        <pre>
<script type="text/javascript">
document.write(
    '\r\rw.orientation: '+window.orientation+
    '\rscreen: '+screen.width+'x'+screen.height+
    '\rbody.client: '+document.body.clientWidth+'x'+document.body.clientHeight+
    '\rw.outer: '+ window.outerWidth+'x'+window.outerHeight+
    '\rw.inner: '+ window.innerWidth+'x'+window.innerHeight+
    '\rdocEl.client: '+document.documentElement.clientWidth+'x'+document.documentElement.clientHeight
);
</script>
        </pre>
    </div>
</div>
<div class="footer"><a href="#">blah</a> | <a href="#"">blah</a></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T01:13:58.760

所以我对此感到厌倦并写了一个javascript-hack。这是可能的，因为我在该布局上也有固定的宽度。不是我的解决方案类型，但地狱是的......（它在我来到这里的 ipad 上的 opera-mini 中不起作用，因为它没有提供任何可用的尺寸...... - 我可以测试 safari、dolphin 和operamini）

```
document.body.style.marginLeft = Math.floor((window.innerWidth - 477) / 2) + 'px'; 
```

为了安全起见，您应该使用css：

```
html { width:100%; } 
```

我仍然对真正的解决方案感兴趣。（或者有人告诉我，我理解视口是错误的。...或确认，这是一个浏览器错误）

# python - cython 函数输出与 python 函数输出略有不同

> ID：15376329
> 
> 赞同：5
> 
> 时间：2013-03-13T03:05:50.410
> 
> 标签：python, numpy, cython

通过向一些变量添加类型，我已经将 python 函数转换为 cython 等价物。但是，cython 函数产生的输出与原始 python 函数略有不同。

我在这篇文章 [Cython 中了解了这种差异的一些原因：numpy 数组的无符号整数索引给出了不同的结果](https://stackoverflow.com/questions/15317851/cython-unsigned-int-indices-for-numpy-arrays-gives-different-result/15322215?noredirect=1#comment21726160_15322215) 但是即使我在这篇文章中学到了什么，我仍然无法让 cython 函数产生相同的结果作为蟒蛇之一。

所以我整理了 4 个函数来说明我尝试过的内容。有人可以帮助揭示为什么每个函数我得到的结果略有不同吗？以及如何获得一个与function1返回相同精确值的cython函数？我在下面发表一些评论：

```
%%cython
import numpy as np
cimport numpy as np    

def function1(response, max_loc):    
    x, y = int(max_loc[0]), int(max_loc[1])

    tmp1 = (response[y,x+1] - response[y,x-1]) / 2*(response[y,x] - min(response[y,x-1], response[y,x+1]))
    tmp2 = (response[y,x+1] - response[y,x-1])
    tmp3 = 2*(response[y,x] - min(response[y,x-1], response[y,x+1]))

    print tmp1, tmp2, tmp3        
    return tmp1, tmp2, tmp3

cpdef function2(np.ndarray[np.float32_t, ndim=2] response, np.ndarray[np.float64_t, ndim=1] max_loc):
    cdef unsigned int x, y 
    x, y = int(max_loc[0]), int(max_loc[1])

    tmp1 = (response[y,x+1] - response[y,x-1]) / 2*(response[y,x] - min(response[y,x-1], response[y,x+1]))        
    tmp2 = (response[y,x+1] - response[y,x-1])
    tmp3 = 2*(response[y,x] - min(response[y,x-1], response[y,x+1]))     

    print tmp1, tmp2, tmp3        
    return tmp1, tmp2, tmp3

cpdef function3(np.ndarray[np.float32_t, ndim=2] response, np.ndarray[np.float64_t, ndim=1] max_loc):     
    cdef unsigned int x, y 
    x, y = int(max_loc[0]), int(max_loc[1])

    cdef np.float32_t tmp1, tmp2, tmp3
    cdef np.float32_t r1 =response[y,x+1]
    cdef np.float32_t r2 =response[y,x-1]
    cdef np.float32_t r3 =response[y,x]
    cdef np.float32_t r4 =response[y,x-1]
    cdef np.float32_t r5 =response[y,x+1]    

    tmp1 = (r1 - r2) / 2*(r3 - min(r4, r5))  
    tmp2 = (r1 - r2)
    tmp3 = 2*(r3 - min(r4, r5))

    print tmp1, tmp2, tmp3        
    return tmp1, tmp2, tmp3

def function4(response, max_loc):     
    x, y = int(max_loc[0]), int(max_loc[1])

    tmp1 = (float(response[y,x+1]) - response[y,x-1]) / 2*(float(response[y,x]) - min(response[y,x-1], response[y,x+1]))
    tmp2 = (float(response[y,x+1]) - response[y,x-1])
    tmp3 = 2*(float(response[y,x]) - min(response[y,x-1], response[y,x+1]))

    print tmp1, tmp2, tmp3        
    return tmp1, tmp2, tmp3

max_loc = np.asarray([ 15., 25.], dtype=np.float64) 
response = np.zeros((49,49), dtype=np.float32)     
x, y = int(max_loc[0]), int(max_loc[1])

response[y,x] = 0.959878861904  
response[y,x-1] = 0.438348740339
response[y,x+1] = 0.753262758255  

result1 = function1(response, max_loc)
result2 = function2(response, max_loc)
result3 = function3(response, max_loc)
result4 = function4(response, max_loc)
print result1
print result2
print result3
print result4 
```

结果：

```
0.0821185777156 0.314914 1.04306030273
0.082118573023 0.314914017916 1.04306024313
0.0821185708046 0.314914017916 1.04306030273
0.082118573023 0.314914017916 1.04306024313
(0.082118577715618812, 0.31491402, 1.043060302734375)
(0.08211857302303427, 0.3149140179157257, 1.0430602431297302)
(0.08211857080459595, 0.3149140179157257, 1.043060302734375)
(0.082118573023034269, 0.31491401791572571, 1.0430602431297302) 
```

**function1**代表我在原始 python 函数中所做的操作。tmp1 是结果。

**function2**是我的第一个 cython 版本，它产生的结果略有不同。显然，如果响应数组使用类型化变量 unsigned int 或 int 进行索引，则即使数组的类型是 np.float32_t，结果也会被强制为 double（使用 PyFloat_FromDouble）。但是，如果数组是用 python int 索引的，则使用函数 PyObject_GetItem，我得到 np.float32_t，这就是函数 1 中发生的情况。所以 function1 中的表达式是使用 np.float32_t 操作数计算的，而 function2 中的表达式是使用双精度计算的。我得到的打印结果与 function1 中的略有不同。

**function3**是我第二次尝试获得与 function1 相同的输出。在这里，我使用 unsigned int 索引来访问数组响应，但结果留在 np.float32_t 中间变量上，然后我在计算中使用它们。我得到的结果略有不同。显然，打印语句将使用 PyFloat_FromDouble，因此它无法打印 np.float32_t。

然后我尝试更改 python 函数以匹配 cython 函数。**function4**尝试通过在每个表达式中转换为至少一个操作数来实现这一点，因此其余操作数也被强制转换为 python float，这是 cython 中的双精度数，并且表达式使用双精度数计算，如 function2 中一样。函数内部的打印和function2完全一样，但是返回的值略有不同？！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T03:53:52.840

让我们比较一下：

*   `function1`一直保持`float32_t`。
*   `function2`在索引时转换为`float`，使用 执行中间步骤`float`，然后转换回`float32_t`为最终结果。
*   `function3`转换为`float`，但随后立即返回`float32_t`，执行中间步骤。
*   `function4`转换为`float`，执行中间步骤，然后将最终结果返回为`float`。

至于为什么`function4`打印与 相同的东西`function2`，但返回不同的东西：如果您查看类型，这很简单。这些值显然足够接近以至于它们以`print`相同的方式发生，但不足以接近`repr`相同的方式。这并不奇怪，因为它们不是同一类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T08:18:30.333

如果您使用的是单精度浮点数，它只有 7.225 个十进制数字的精度，我不认为从强制到加倍的小差异很重要。

为了澄清您对 的描述`function2`，如果您使用对象进行索引，Cython 会使用`PyObject_GetItem`来获取`np.float32`标量对象（不是`np.float32_t`，它只是 C 的 typedef `float`）。如果您改为直接索引到缓冲区，并且 Cython 需要一个对象，它会调用`PyFloat_FromDouble`. 它需要对象来分配`tmp1`,`tmp2`和`tmp3`, 因为它们没有被输入。

`function3`另一方面，您输入了变量`tmp`，但它仍然需要创建`float`对象来打印并返回结果。如果你改用 NumPy `ndarray`（见下文），你就不会有这个问题：

顺便说一下，在除以 2 时`function1`，您将结果提升到`np.float64`。例如：

```
>>> type(np.float32(1) / 2)
<type 'numpy.float64'> 
```

对比

```
>>> type(np.float32(1) / np.float32(2))
<type 'numpy.float32'> 
```

即使您确保所有操作都`float32`在`def`and`cpdef`函数中，最终结果在编译的扩展模块中仍然可能在两者之间有所不同。在以下示例中，我检查了中间结果`function1`是否都是`np.float32`对象。在生成的 C 中，`function2`我检查了没有强制转换为`double`（或等效的 typedef）。然而，这两个函数仍然产生略有不同的结果。我可能不得不深入研究编译的程序集以找出原因，但也许我忽略了一些简单的事情。

```
def function1(response, max_loc):    
    tmp = np.zeros(3, dtype=np.float32)
    x, y = int(max_loc[0]), int(max_loc[1])
    tmp[0] = (((response[y,x+1] - response[y,x-1]) / np.float32(2)) *
             (response[y,x] - min(response[y,x-1], response[y,x+1])))
    tmp[1] = response[y,x+1] - response[y,x-1]
    tmp[2] = 2*(response[y,x] - min(response[y,x-1], response[y,x+1]))

    print tmp[0], tmp[1], tmp[2]
    return tmp

cpdef function2(np.ndarray[np.float32_t, ndim=2] response, max_loc):
    cdef np.ndarray[np.float32_t, ndim=1] tmp = np.zeros(3, dtype=np.float32)
    cdef unsigned int x, y
    x, y = int(max_loc[0]), int(max_loc[1])
    tmp[0] = (((response[y,x+1] - response[y,x-1]) / <np.float32_t>2) *
             (response[y,x] - min(response[y,x-1], response[y,x+1])))
    tmp[1] = response[y,x+1] - response[y,x-1]
    tmp[2] = 2*(response[y,x] - min(response[y,x-1], response[y,x+1]))

    print tmp[int(0)], tmp[int(1)], tmp[int(2)]
    return tmp 
```

比较：

```
>>> function1(response, max_loc)
0.0821186 0.314914 1.04306
array([ 0.08211858,  0.31491402,  1.0430603 ], dtype=float32)

>>> function2(response, max_loc)
0.0821186 0.314914 1.04306
array([ 0.08211857,  0.31491402,  1.0430603 ], dtype=float32) 
```

# sql - 旋转两个列，使表中的其他列保持不变

> ID：15376335
> 
> 赞同：2
> 
> 时间：2013-03-13T03:06:40.490
> 
> 标签：sql, sql-server, tsql, pivot, sql-server-2012

我想知道是否可以在 SQL Server 2012 中完成以下操作。

我有以下数据：

```
Product_ID    Date     Attribute    Value
-------------------------------------------
10025135       2009    Colour       Red
10025135       2009    Size         20 cm
10025135       2009    Material     Steel
10025135       2010    Colour       Green
10025135       2010    Size         NULL
10025135       2010    Material     Alloy
10025136       2009    Colour       Black
10025136       2009    Size         30cm
10025136       2009    Material     NULL 
```

我想检索数据，以便它们显示如下：

```
Product_ID    Date    Colour    Size     Material
-------------------------------------------------
10025135       2009   Red       20 cm    Steel
10025135       2010   Green     NULL     Alloy
10025136       2009   Black     30 cm    NULL 
```

我试图改变它们但没有成功。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T03:09:52.737

```
SELECT   Product_ID, Date, Colour, Size, Material
FROM
        (
            SELECT  Product_ID, Date, Attribute, Value
            FROM    Table1
        ) org
        PIVOT
        (
            MAX(Value)
            FOR Attribute IN (Colour, Size, Material)
        ) pivotHeader 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!6/a857f/5)

输出

```
╔════════════╦══════╦════════╦════════╦══════════╗
║ PRODUCT_ID ║ DATE ║ COLOUR ║  SIZE  ║ MATERIAL ║
╠════════════╬══════╬════════╬════════╬══════════╣
║   10025135 ║ 2009 ║ Red    ║ 20 cm  ║ Steel    ║
║   10025135 ║ 2010 ║ Green  ║ (null) ║ Alloy    ║
║   10025136 ║ 2009 ║ Black  ║ 30cm   ║ (null)   ║
╚════════════╩══════╩════════╩════════╩══════════╝ 
```

另一种方法是使用`MAX()`and`CASE`

```
SELECT  Product_ID, DATE,
        MAX(CASE WHEN Attribute = 'Colour' THEN Value END ) Colour,
        MAX(CASE WHEN Attribute = 'Size' THEN Value END ) Size,
        MAX(CASE WHEN Attribute = 'Material' THEN Value END ) Material
FROM    Table1
GROUP   BY Product_ID, DATE 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!6/a857f/8)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T10:54:29.943

您可以实现使用该[`PIVOT`](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)函数来获得所需的结果。这将获取列中的行值`attribute`并将它们转换为列。

执行此操作时要考虑的主要事项是您是否将拥有已知或未知数量的`attribute`值。

如果这些值是提前知道的，那么您可以使用 static 对这些值进行硬编码`PIVOT`：

```
select product_id,
  Colour,
  Size,
  Material
from 
(
  select product_id, date, attribute, value
  from yourtable
) src
pivot
(
  max(value)
  for attribute in (Colour, Size, Material)
) piv; 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!6/09358/1)。

但是如果`attribute`列的值是未知的或需要动态的，那么您将需要实现动态 SQL。动态 SQL 将获取要在 SQL 字符串中使用的列的列表。

获取列列表的代码类似于：

```
select @cols = STUFF((SELECT distinct ',' + QUOTENAME(attribute) 
                    from yourtable
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'') 
```

这个查询的结果是：

```
[Colour],[Material],[Size] 
```

这会在执行时创建`attributes`应转换为列的列表，并将其连接到执行的最终字符串中。您的动态 SQL 数据透视代码是：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(attribute) 
                    from yourtable
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT product_id,' + @cols + ' 
             from 
             (
                select product_id, date, attribute, value
                from yourtable
             ) x
             pivot 
             (
                max(value)
                for attribute in (' + @cols + ')
             ) p '

execute(@query) 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!6/19587/5)。

两个查询的结果是：

```
| PRODUCT_ID | COLOUR |   SIZE | MATERIAL |
-------------------------------------------
|   10025135 |    Red |  20 cm |    Steel |
|   10025136 |  Black |   30cm |   (null) |
|   10025135 |  Green | (null) |    Alloy | 
```

# http - 如何使用 autobench 发送 http session cookie

> ID：15376336
> 
> 赞同：0
> 
> 时间：2013-03-13T03:07:00.967
> 
> 标签：http, benchmarking, load-testing, httperf

如何在 autobench 中设置会话 cookie，以便对需要会话身份验证的 URL 进行基准测试？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T03:12:13.520

我到处找这个。[在这里](http://scottbarnham.com/blog/2008/04/)找到它：

在您的 .autobench.conf 文件中，添加以下行：

```
## Add a session cookie
# NOTE: You must put the '\n' at the end of the cookie string or it will timeout.
httperf_add-header = "Cookie: cookie_name_here=asdf_cookie_string_here_\n" 
```

请注意，这与使用 httperf 的 '--session-cookie' 和 '--wsess=N1,N2,X' 参数不同。执行上述操作时，他们不需要在标头中使用 cookie。

# string - 返回单词列表所在的数字行？

> ID：15376337
> 
> 赞同：0
> 
> 时间：2013-03-13T03:07:03.133
> 
> 标签：string, list, python-3.x, indexing, text-files

我需要帮助解决一个问题，我创建了一个名为 index() 的函数，该函数将文件作为字符串和单词列表。该程序将找到每个单词所在的数字行并返回该单词旁边的数字行。

到目前为止，我的代码如下：

```
 f=open(file,'r')
    read = f.readlines()

    for word in lst:
        if word in range(len(read)):
            word[:]+1
    return read 
```

我很困在这里，但我认为你应该搜索 readlines() 列表的索引。对于这个问题，我必须使用 for 循环和格式。谁能帮我？

仅供参考，回报将如下所示：

```
index('raven.txt',['raven','mortal','dying','ghost','ghastly','evil','demon])

ghost     9
dying     9
demon     122
evil      99, 106
ghastly   82
mortal    30
raven     44, 53, 55, 64, 78, 97, 104, 111, 118, 120 
```

我也在使用python 3。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T08:34:17.290

```
def index(file, wordList):
    word_dict = dict()
    for word in wordList:
        word_dict[word] = list()
    with open(file,'r') as f:
         for lineNum, lines in enumerate(f,1):
             for word in wordList:
                 if word in lines:
                     word_dict[word].append(lineNum)
    return word_dict

myWordDict = index('raven.txt',['raven','mortal','dying','ghost','ghastly','evil','demon'])

for items in myWordDict:
    print(items, ":", myWordDict[items]) 
```

这是你想要的吗？

# javascript - 从 jquery 命名空间外部调用 jquery 命名空间中的函数

> ID：15376338
> 
> 赞同：0
> 
> 时间：2013-03-13T03:07:10.083
> 
> 标签：javascript, jquery

这是代码

```
test ('e');
function test(e) {
    test2(e); //undefined
}

(function ($) {
    function test2(e) {
        alert('test');
    }
}) 
```

由于某些限制，我不得不这样打电话。有谁知道？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T03:11:03.657

你不能，函数`test2`已经在闭包中定义了，你只能在那个范围内调用函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T03:14:42.660

在文档上绑定事件并触发它：

```
function test(e) {
        var param=1;
            param2=4;
        jQuery(document).trigger('mytest2',[param,param2]); 
    }
(function ($) {
    $(document).bind('mytest2',test2);    
    function test2(event,param,param2) {
        alert('test '+param+' '+param2);
    }
})(jQuery)
setTimeout(test,2000); 
```

[http://jsfiddle.net/oceog/CzNKu/](http://jsfiddle.net/oceog/CzNKu/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T03:25:15.400

您可以通过`test2`在匿名函数之外声明：

```
var test2;                     //Declare test2 in global
(function ($) {
    test2 = function (e) {     //define test2 
        alert('test');         //because test2 was declared in global,
    };                         // it will stay global.
})(jQuery);

test('e');                     //Call test

function test(e) {
    test2(e);                  //Since test2 can be access anywhere in your code,
}                              //it is now defined. 
```

演示：http: [//jsfiddle.net/DerekL/LEZkt/](http://jsfiddle.net/DerekL/LEZkt/)

# android - 无法从以前的活动中获取数据

> ID：15376339
> 
> 赞同：0
> 
> 时间：2013-03-13T03:07:26.747
> 
> 标签：android, android-intent, android-activity, bundle

我想在第二个活动之后将两个字符串值从第二个活动返回到第一个活动`finish();`。我尝试使用下面的代码，没有错误，我也无法获得返回值。

**活动一**

```
Intent intent = new Intent(activityA.this, activityB.class);
intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivityForResult(intent, 100);

@Override
protected void onActivityResult(int requestCode,
                                 int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    Log.i(TAG, "onActivityResult");
    if(resultCode == 100){
        Bundle res = data.getExtras();
         String contentid = res.getString("contentID");
         String contenttype = res.getString("contentType");
         Log.i(TAG, "contentid:" +contentid);
         Log.i(TAG, "contenttype:" +contenttype);
    }
} 
```

**活动 B**

```
 @Override
 public void onDestroy(){
     super.onDestroy();
     helper.close();
     Intent intent = new Intent();
     intent.putExtra("contentID", contentID);
     intent.putExtra("contentType", contentType);
     setResult(100, intent);
     Log.i(TAG, "SETRESULT.................." +intent);
     finish();
 } 
```

任何评论或答案将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T03:22:28.827

我意识到我的代码有什么问题。我不应该`SETRESULT`在`onDestroy()`。如果我把它放在别处，它就起作用了。抱歉，感谢您的宝贵时间

# python - `from abc import a,b` 和 `from abc import (a,b)` 之间有什么区别吗？

> ID：15376341
> 
> 赞同：0
> 
> 时间：2013-03-13T03:07:32.313
> 
> 标签：python, import

我`from module_abc import (a, b)`在阅读代码时遇到。我想知道这是否相当于`from module_abc import a,b`？如果不是，有什么区别？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T03:12:11.817

它们是相同的：

```
>>> import dis
>>> def a():
...     from module_abc import (a, b)
...     
>>> def b():
...     from module_abc import a, b
...     
>>> dis.dis(a)
  2           0 LOAD_CONST               1 (-1)
              3 LOAD_CONST               2 (('a', 'b'))
              6 IMPORT_NAME              0 (module_abc)
              9 IMPORT_FROM              1 (a)
             12 STORE_FAST               0 (a)
             15 IMPORT_FROM              2 (b)
             18 STORE_FAST               1 (b)
             21 POP_TOP             
             22 LOAD_CONST               0 (None)
             25 RETURN_VALUE        
>>> dis.dis(b)
  2           0 LOAD_CONST               1 (-1)
              3 LOAD_CONST               2 (('a', 'b'))
              6 IMPORT_NAME              0 (module_abc)
              9 IMPORT_FROM              1 (a)
             12 STORE_FAST               0 (a)
             15 IMPORT_FROM              2 (b)
             18 STORE_FAST               1 (b)
             21 POP_TOP             
             22 LOAD_CONST               0 (None)
             25 RETURN_VALUE 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T03:09:49.677

一直认为它是相同的，我使用第一个选项以防我必须移动到下一行（例如要导入的类太多）

```
from moduleA import (ClassA, ClassB, ClassC,
                     DataA, DataB) 
```

# c# - 将表单类型传递给方法返回空引用？

> ID：15376343
> 
> 赞同：0
> 
> 时间：2013-03-13T03:07:44.780
> 
> 标签：c#, winforms, telerik, object-reference

我有一个方法是这样的：

```
 public void Report(Form form, string[] textboxes, string[] patientdetails)
    {
        try
        {
            int i = 0;
            foreach (string textbox in textboxes)
            {
                form.Controls.OfType<TextBox>().FirstOrDefault(n => n.Name == textbox).Text = patientdetails[i];
                i++;
            }

            form.ShowDialog();
        }
        catch (Exception ex)
        {
        }
    } 
```

通过将参数传递给这些未设置为实例对象的返回对象引用：

```
 string[] textboxes = new string[] { "txtPatientName", "txtAge", "txtGender","txtTestType","txtDate" }; 
 string[] patientDetails = new string[]{"Ammar Bashir", "19", "Male", "White Blood Cell Test", "12 March , 2013"};

 //Test a winform which contain textboxes.
  Report(Test, textboxes, patientDetails); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T19:22:06.103

I got it , Actually all the textboxes were in first splitterPanel of splitContainer, I traversse through them with their 'Controls' property and changed the Text property of TextBoxes...Guys thanks for your support.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T03:10:29.137

在没有看到其余代码或确切知道异常是由哪一行引发的情况下，我猜您`Test`在将其传递给方法之前没有进行初始化。

要么，要么

```
 form.Controls.OfType<TextBox>().FirstOrDefault(n => n.Name == textbox) 
```

找不到匹配项，因此返回`null`. 然后你调用which`Text`会`null`抛出异常。

# php - 服务器套接字只能连接几次（Winsock C++）

> ID：15376347
> 
> 赞同：0
> 
> 时间：2013-03-13T03:07:53.083
> 
> 标签：php, c++, windows, sockets, winsock

您好我正在尝试用 C++ 编写服务器 winsock 以允许来自 PHP 客户端代码的连接。PHP将从服务器请求数据，接收然后关闭连接。但是，2-3次连接后，再次请求PHP时，在socket_read()处挂起，页面一直在加载，服务器没有收到FD_ACCEPT事件。是因为 TIME_WAIT 连接还没有关闭吗？任何关于代码改进的建议也会很好。

```
SOCKET s;
SOCKADDR_IN from;
int fromLen = sizeof(from);
int port = 1111;

int listenOnPort(int portNo)
{
    WSAData w;

    int error = WSAStartup(0x0202, &w); // fill in wsa info

    if(error)
    {
        printError(5);
        return 0;
    }

    if(w.wVersion !=  0x0202)
    {
        printError(6);
        WSACleanup();
        return 0;
    }

    SOCKADDR_IN addr;
    SOCKET client;

    addr.sin_family = AF_INET;
    addr.sin_port = htons(portNo);
    addr.sin_addr.s_addr = htonl(INADDR_ANY);

    s = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);

    if(s == INVALID_SOCKET)
    {
        printError(7);
        return 0;
    }

    BOOL bOptVal = TRUE;
    int bOptLen = sizeof (BOOL);
    if(setsockopt(s, SOL_SOCKET, SO_REUSEADDR, (char *)&bOptVal, bOptLen) == SOCKET_ERROR)
    {
        printError(12);
        return 0;
    }

    if(bind(s, (LPSOCKADDR)&addr, sizeof(addr)) == SOCKET_ERROR)
    {
        printError(8);
        return 0;
    }

    if( listen(s, 1) == SOCKET_ERROR ) //start listening
    {
        printError(13);
        return 0;
    }

    //WSAAsyncSelect(s, hwnd, 1045, FD_READ | FD_CONNECT | FD_CLOSE | FD_ACCEPT);

    cout << "Ready to accept connection, listening on port " << portNo << endl;

    CreateThread(0,0, &listenForEvents, NULL, 0, 0);

    //listenForEvents();

    return 1; //ok
}

DWORD WINAPI listenForEvents(void* lp)
{
    HANDLE sockEv=CreateEvent(NULL,TRUE,FALSE,NULL);
    if(WSAEventSelect(s,sockEv,FD_ACCEPT|FD_CONNECT| FD_READ | FD_CLOSE )==SOCKET_ERROR) 
        printError(9);

    for(;;) {
      if(WSAWaitForMultipleEvents(1,&sockEv,FALSE,INFINITE,FALSE)!=WSA_WAIT_EVENT_0)
          printError(10);

      WSANETWORKEVENTS wsaEvents={0};
      if(WSAEnumNetworkEvents(s,sockEv,&wsaEvents)==SOCKET_ERROR)
          printError(11);

      if((wsaEvents.lNetworkEvents & FD_ACCEPT)==FD_ACCEPT) {
           SOCKET tempSock = accept(s, (struct  sockaddr*) &from, &fromLen);
            s = tempSock; //switch our old socket to the new one

            char acceptAddr[100];
            char* msg = "Connnection from [%s] accepted.";
            //sprintf(acceptAddr, msg, inet_ntoa(from.sin_addr) );
            sprintf_s(acceptAddr, strlen(msg) + 100, msg, inet_ntoa(from.sin_addr));

            cout << acceptAddr << endl;
            hasClient = true;
      }
      else if((wsaEvents.lNetworkEvents & FD_READ) == FD_READ){
          char buffer[1000];
          memset(buffer, 0, sizeof(buffer));
          recv(s, buffer, sizeof(buffer)-1, 0);

          receiveAction(string(buffer));

          //cout << buffer << endl;
      }
        else if((wsaEvents.lNetworkEvents & FD_CLOSE) == FD_CLOSE){
            shutdown(s, SD_BOTH );
            closesocket(s);
            cout << "socket closed" << endl;
            startServer(); // start server again
            return 0;
        }
      else if(wsaEvents.lNetworkEvents==0) {
          printError(14);
        cout << "lNetworkEvents==0" << endl;
      }
    }
}

void startServer(){
    listenOnPort(port);
} 
```

这是PHP代码。

```
/* Get the port for the WWW service. */
// $service_port = getservbyname('www', 'tcp');
$service_port = "1111";

/* Get the IP address for the target host. */
$address = "192.168.3.5";

/* Create a TCP/IP socket. */
$socket = socket_create(AF_INET, SOCK_STREAM, SOL_TCP);
if ($socket === false) {
    echo "socket_create() failed: reason: " . socket_strerror(socket_last_error()) . "\n";
    die();
} else {
    //echo "OK.\n";
}

//echo "Attempting to connect to '$address' on port '$service_port'...";
$result = socket_connect($socket, $address, $service_port);
if ($result === false) {
    echo "socket_connect() failed.\nReason: ($result) " . socket_strerror(socket_last_error($socket)) . "\n";
    die();
} else {
    //echo "OK.\n";
}

$out = '';

//echo "Sending HTTP HEAD request...";
$result = socket_write($socket, $json, strlen($json));

if ($result === false) {
    echo "socket_connect() failed.\nReason: ($result) " . socket_strerror(socket_last_error($socket)) . "\n";
    die();
} else {
    //echo "OK.\n";
}

echo socket_read($socket, 2048);
// while ($out = socket_read($socket, 2048)) {
    // echo $out;
// }

socket_close($socket); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T09:34:59.220

终于成功了，我对winsock函数、流程等不太了解。这是工作的。关键是让侦听器套接字保持活动状态，然后将客户端/接受的套接字存储在另一个地方。

```
SOCKET sock[2];
SOCKADDR_IN from;
int fromLen = sizeof(from);
int port = 1111;
int listenOnPort(int portNo)
{
    WSAData w;

    int error = WSAStartup(0x0202, &w); // fill in wsa info

    if(error)
    {
        printError(5);
        return 0;
    }

    if(w.wVersion !=  0x0202)
    {
        printError(6);
        WSACleanup();
        return 0;
    }

    SOCKADDR_IN addr;
    SOCKET client;

    addr.sin_family = AF_INET;
    addr.sin_port = htons(portNo);
    addr.sin_addr.s_addr = htonl(INADDR_ANY);

    sock[0] = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);

    if(sock[0] == INVALID_SOCKET)
    {
        printError(7);
        return 0;
    }

    BOOL bOptVal = TRUE;
    int bOptLen = sizeof (BOOL);
    if(setsockopt(sock[0], SOL_SOCKET, SO_REUSEADDR, (char *)&bOptVal, bOptLen) == SOCKET_ERROR)
    {
        printError(12);
        return 0;
    }

    if(bind(sock[0], (LPSOCKADDR)&addr, sizeof(addr)) == SOCKET_ERROR)
    {
        printError(8);
        return 0;
    }

    if( listen(sock[0], 1) == SOCKET_ERROR ) //start listening
    {
        printError(13);
        return 0;
    }

    //WSAAsyncSelect(sock[0], hwnd, 1045, FD_READ | FD_CONNECT | FD_CLOSE | FD_ACCEPT);

    cout << "Ready to accept connection, listening on port " << portNo << endl;

    CreateThread(0,0, &listenForEvents, NULL, 0, 0);

    //listenForEvents();

    return 1; //ok
}

DWORD WINAPI listenForEvents(void* lp)
{
    HANDLE sockEv[2];
    sockEv[0]=CreateEvent(NULL,TRUE,FALSE,NULL);
    sockEv[1]=CreateEvent(NULL,TRUE,FALSE,NULL);
    if(WSAEventSelect(sock[0],sockEv[0],FD_ACCEPT|FD_CONNECT|FD_CLOSE )==SOCKET_ERROR) 
        printError(9);

    for(;;) {

        int index = WSAWaitForMultipleEvents(2,sockEv,FALSE,INFINITE,FALSE);
        //if(index != WSA_WAIT_EVENT_0)
        //  printError(10);

        index -= WSA_WAIT_EVENT_0;

      WSANETWORKEVENTS wsaEvents={0};
      if(WSAEnumNetworkEvents(sock[index],sockEv[index],&wsaEvents)==SOCKET_ERROR)
          printError(11);

      if((wsaEvents.lNetworkEvents & FD_ACCEPT)==FD_ACCEPT) {
            sock[index+1]= accept(sock[index], (struct  sockaddr*) &from, &fromLen);
            //s = clientSock; //switch our old socket to the new one

            if(WSAEventSelect(sock[index+1], sockEv[index+1], FD_READ|FD_CLOSE  ) == SOCKET_ERROR)
            {
                printError(15);
            }

            char acceptAddr[100];
            char* msg = "Connnection from [%s] accepted.";
            //sprintf(acceptAddr, msg, inet_ntoa(from.sin_addr) );
            sprintf_s(acceptAddr, strlen(msg) + 100, msg, inet_ntoa(from.sin_addr));

            cout << acceptAddr << endl;
            hasClient = true;
      }
      else if((wsaEvents.lNetworkEvents & FD_READ) == FD_READ){
          char buffer[1000];
          memset(buffer, 0, sizeof(buffer));
          recv(sock[index], buffer, sizeof(buffer)-1, 0);

          receiveAction(string(buffer));

      }
        else if((wsaEvents.lNetworkEvents & FD_CLOSE) == FD_CLOSE){
            shutdown(sock[index], SD_BOTH );
            closesocket(sock[index]);
            if(getDebug())
            {
                cout << "socket closed" << endl;
            }
            //startServer(); // start server again
            //return 0;
        }
      else if(wsaEvents.lNetworkEvents==0) {
          printError(14);
        cout << "lNetworkEvents==0" << endl;
      }
    }
} 
```

# c++ - 链接器 2001 错误和成员变量的未定义标识符

> ID：15376348
> 
> 赞同：0
> 
> 时间：2013-03-13T03:07:53.330
> 
> 标签：c++, function, linker-errors, unresolved-external

几乎完成了这个程序，在移动到公共计算机并更改了一些代码后，我注意到我收到了一个链接器错误，我还决定询问另一个错误（以及为什么会发生）。

有问题的功能如下。出于某种原因，最后一行“ValidTlds[transferString]....”表明 VS 不识别 ValidTLD，并且只有在我添加 TldPart::（它所在的文件的名称）后才会这样做。这是与其他名称冲突吗？

此外，我认为与功能有关的更重要的错误是未解决的外部符号。确切的行：

```
Error   3   error LNK2001: unresolved external symbol "public: static class std::map<class String,class String,struct std::less<class String>,class std::allocator<struct std::pair<class String const ,class String> > > TldPart::ValidTlds" (?ValidTlds@TldPart@@2V?$map@VString@@V1@U?$less@VString@@@std@@V?$allocator@U?$pair@$$CBVString@@V1@@std@@@3@@std@@A)    V:\My Documents\Visual Studio 2010\Projects\EmailChecker_HW2\EmailChecker_HW2\TldPart.obj 
```

我尝试阅读您在外部符号上的问答页面，并尝试了一些建议（最初我有两个），并且通过在类之外声明静态函数，我设法将其减少为一个链接器错误。大家看看有什么问题吗？在 main.cpp 中，我将该函数引用为 `TldPart::PreloadTLDs;'，但删除该行并没有消除错误（并且我在 main.cpp 文件的顶部有 #include "TldPart.h"） . 这是函数，我将在下面发布 header 和 cpp 文件以供完整参考。完整的项目相当广泛（我上次检查时接近 1100 行），所以我只包括这些作为初学者。感谢您的帮助，我很感激。

**静态无效 PreloadTLDs()**

```
static void PreloadTLDs()
{
    bool initialized = false;
    bool fileStatus = false;
    string tldTest = ""; // used for getline() as allowed.
    char * transferString = " "; // used to transfer chars from string to String

    ifstream infile;

    infile.open("ValidTLDs.txt");

    fileStatus = infile.good();

    if(fileStatus != true)
        cout << "Cannot read ValidTLD's file. Please check your file paths and try again.";
    else
    {
        while(!infile.eof())
        {
            getline (infile, tldTest); // sets the current TLD in the list to a string for comparision

            // converts TLD to lowercase for comparison.
            for(unsigned int x = 0; x<tldTest.length(); x++)
            {
                tldTest[x] = tolower(tldTest[x]);
                transferString[x] = tldTest[x];

                ValidTlds[transferString] = String(transferString);
            }
        }
    }
} 
```

**main.cpp（缩短）**

```
#include <iostream>
#include <fstream>
#include "String.h"
#include <map>
#include <string> // used for the allowed getline command
#include "Email.h"
#include "TldPart.h"

using namespace std;

void main()
{
    string getlinetransfer; // helps transfer email from getline to c string to custom String
    double emailTotal = 0.0; // Used to provide a cool progress counter
    double emailCounter = 0.0; // Keeps track of how many emails have been verified.
    int x = 0; // used to set c-string values, counter for loop
    char * emailAddress = new char[getlinetransfer.size() + 1]; // c string used for getting info from getline.

    cout << "Welcome to email validation program!" << endl;
    cout << "Pre-Loading Valid TLD's..... \n" << endl;

    TldPart::PreloadTLDs;
} 
```

**TldPart.h**

```
// TldPart.h - TldPart validation class declaration
// Written by ------

#pragma once

#include "String.h"
#include <map>
#include "SubdomainPart.h"
#include <string>
#include <fstream>
#include <iostream>

using namespace std;

class TldPart
{
public:
    // MUST HAVE a defualt constructor (because TldPart is a member of Domain)
    TldPart() {}

    // Takes the address and stores into the Address data member
    void Set(const String& address);

    static void PreloadTLDs();

    // Returns true when the Address is valid or false otherwise
    bool IsValid();

    static map<String, String> ValidTlds;
private:
    String Address; 
}; 
```

**TldPart.cpp**

```
// TldPart.cpp - TldPart validation class implementation
// Written by Max I. Fomitchev-Zamilov

#pragma once

#include "TldPart.h"
using namespace std;

void TldPart()
{

}

// Takes the address and stores into the Address data member
void TldPart::Set(const String& address)
{
    Address = address;
}

static void PreloadTLDs()
{
    bool initialized = false;
    bool fileStatus = false;
    string tldTest = ""; // used for getline() as allowed.
    char * transferString = " "; // used to transfer chars from string to String

    ifstream infile;

    infile.open("ValidTLDs.txt");

    fileStatus = infile.good();

    if(fileStatus != true)
        cout << "Cannot read ValidTLD's file. Please check your file paths and try again.";
    else
    {
        while(!infile.eof())
        {
            getline (infile, tldTest); // sets the current TLD in the list to a string for comparision

            // converts TLD to lowercase for comparison.
            for(unsigned int x = 0; x<tldTest.length(); x++)
            {
                tldTest[x] = tolower(tldTest[x]);
                transferString[x] = tldTest[x];

                ValidTlds[transferString] = String(transferString);
            }
        }
    }
}

// Returns true when the Address is valid or false otherwise
bool TldPart::IsValid()
{   
    bool tldFound = false;

    map<String, String>::iterator it;

    String TLDMatch;

    TLDMatch = TldPart::ValidTlds.find(Address)->first;
    it = TldPart::ValidTlds.find(Address);

    if(it == ValidTlds.end())
        tldFound == false;
    else
        tldFound == true;

    return tldFound;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T03:10:33.107

`TldPart::ValidTlds`此代码承诺将在某处定义单个静态变量。

```
class TldPart
{
    static map<String, String> ValidTlds;
}; 
```

加上这个`TldPart.cpp`，你会很好的。

```
#include "TldPart.h"
using namespace std;

map<String, String> TldPart::ValidTlds;  // DECLARE YOUR STATIC VARIABLE

void TldPart()
{

} 
```

# ruby-on-rails - 如何在 Ruby 中捕获和忽略 ActiveRecord::RecordNotUnique 异常

> ID：15376352
> 
> 赞同：1
> 
> 时间：2013-03-13T03:08:10.880
> 
> 标签：ruby-on-rails, ruby, rescue

我每天运行 ruby​​ 脚本作业，用于将数据从一个表加载到另一个表，直到在源表中找到重复的键记录，因为该表没有约束。我的目标表拒绝了这些记录，因为目标表对列（head_date、center_id、site_url）有主键约束。我的程序刚刚停止并在命令行上显示以下错误。:-(

```
in `async_exec': PG::Error: ERROR:  duplicate key value violates unique constraint "tst_data_pkey" (ActiveRecord::RecordNotUnique) 
```

我可以期望源表有其他像这样的讨厌的记录。捕获此活动记录异常后，如何继续处理并移至下一条记录？

以下是我的更新/插入的代码：

```
class SiteSection < ActiveRecord::Base

  SiteSection.establish_connection(
        :adapter  => 'postgresql',
        :host     => 'hoster-of-hosts.com',
        :database => 'super-inven',
        :username => 'user',
        :password => 'pass'
                      )
  self.table_name = 'master.target_tbl'  # << insert into this table
end

conn.query("select * from source_tbl") do |row|
  siteData = SiteSection.find_or_initialize_by_head_date_and_center_id_and_site_url(row[:date_c], row[:com_id], row[:site_link])

  siteData[:head_date]      = row[:date_c]
  siteData[:center_id]     = row[:com_id]
  siteData[:site_url]          = row[:site_link].nil? ? 'unknown' : row[:site_link]
  siteData[:people_cnt]      = row[:persons].nil? ? 0 : row[:persons]
  siteData[:ips]     = row[:ip_adds].nil? ? 0 : row[:ip_adds]

  siteData.save
i = i+1
puts "finished: #{i}" if i % 10000 == 0
end
conn.close 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T03:21:24.167

你可以使用一个

```
begin

rescue => e

end 
```

像这样：

```
class SiteSection < ActiveRecord::Base

  SiteSection.establish_connection(
        :adapter  => 'postgresql',
        :host     => 'hoster-of-hosts.com',
        :database => 'super-inven',
        :username => 'user',
        :password => 'pass'
                      )
  self.table_name = 'master.target_tbl'  # << insert into this table
end

conn.query("select * from source_tbl") do |row|
  siteData = SiteSection.find_or_initialize_by_head_date_and_center_id_and_site_url(row[:date_c], row[:com_id], row[:site_link])

  siteData[:head_date]      = row[:date_c]
  siteData[:center_id]     = row[:com_id]
  siteData[:site_url]          = row[:site_link].nil? ? 'unknown' : row[:site_link]
  siteData[:people_cnt]      = row[:persons].nil? ? 0 : row[:persons]
  siteData[:ips]     = row[:ip_adds].nil? ? 0 : row[:ip_adds]

  begin
    siteData.save
  rescue => e
    puts e.message
    puts "Error happened but I'll just keep chuggin along"
  end
i = i+1
puts "finished: #{i}" if i % 10000 == 0
end
conn.close 
```

`rescue => e`期望捕获错误。它会通过不让它冒泡来吞下这个错误。您的代码将继续运行，而不会出现异常崩溃。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-18T21:16:10.263

如果你有唯一的密钥，你应该使用它——像这样：

```
i = 0
puts 'loading records'
conn.query("select * from source_tbl") do |row|
  rec = SiteSection.where(
    :head_date => row[:date_c],
    :center_id => row[:com_id],
    :site_url => (row[:site_link] || 'unknown')
  ).first_or_initialize

  rec.people_cnt = (row[:persons] || 0)
  rec.ips => (row[:ip_adds] || 0)

  rec.save!

  i += 1
  print '.' if i % 10000 == 0
end
puts "done\ntotal records: #{i}" 
```

这样，您将保存记录（新）或更新记录（如果找到）。`ActiveRecord::RecordNotUnique`如果你没有改变你的 pkey，不应该在这里！

# extjs - 在 IE 中全选 + 删除/退格后使用远程存储清除组合框

> ID：15376356
> 
> 赞同：1
> 
> 时间：2013-03-13T03:08:38.027
> 
> 标签：extjs, extjs4

我有一个带有远程存储的 ExtJS 组合框（4.1 版）。当组合框被清空时，需要清除组合框并存储。

为此，我实现了一个清除组合框并存储按键和更改事件的函数（参见下面的代码）。

但是，当用户选择全部（如果光标在末尾，则 shift+home 或如果光标在开头，则 shift+end）然后按退格/删除时，组合框拒绝清空自己。在这种情况下，组合框在失去焦点时始终使用最后选择的值填充自身。这仅在 IE（我的客户使用）中发生。

知道如何防止组合框这样做吗？

下面的代码片段：

```
// clearExistingInput function (called from combo box)
clearExistingInput: function(ths, newVal) {
    if(newVal === null){
        ths.store.removeAll();
        ths.clearValue();
    }
}

// combo box configuration
{
    labelAlign : 'right',
    xtype: 'combo',
    store: comboStore,
    filterOnLoad: true,
    typeAhead: true,
    hideTrigger:true,
    minChars :1,            
    size:15,
    queryDelay: 20, 
    queryCaching: false,
    // enable paging with width that fits the paging toolbar
    matchFieldWidth: false,
    listConfig: {
        width: 220,
        height: 300, 
        autoHeight: true
    },
    maxWidth: 35,
    pageSize: true,

    enableKeyEvents:true,
    listeners:{
        'keypress':function(ths,e){ 
            if (e.getKey() == e.DELETE || e.getKey() == e.BACKSPACE) {
                this.up('formFilter').clearExistingInput(ths, ths.value);
            }
         },
        'change': function(ths,newVal,OldVal,eOpts){
            this.up('formFilter').clearExistingInput(ths, newVal);
        }
    }
}

// combo box store
comboStore = Ext.create('Ext.data.Store', {
      pageSize: 10,
      autoLoad: false,
      proxy: {
            type: 'ajax',
            url : 'Service/data',
            reader: {
                type: 'json',
                root: 'data'
            }
        },
        fields: [
          {name: 'data', type : 'String'}
        ]
}); 
```

# graphviz - graphviz ：无向图重叠中的平行边

> ID：15376360
> 
> 赞同：2
> 
> 时间：2013-03-13T03:08:54.453
> 
> 标签：graphviz

```
graph {

0--1;
0--2;
0--1;
} 
```

在上面，当使用 dot 命令生成 jpg 时，0 和 1 之间的平行边被绘制为单边。有可能避免这种情况吗？

![在此处输入图像描述](../Images/e884e85488c39d62a2da8937ca2755da.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-26T03:39:16.317

升级你的版本。我得到以下输出：

![在此处输入图像描述](../Images/49d35e278fe7c1bf3b55ef65792cd771.png)

您还可以尝试使用样条图属性：[http ://www.graphviz.org/doc/info/attrs.html#d:](http://www.graphviz.org/doc/info/attrs.html#d:splines) **splines**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T03:02:25.823

如果我理解这个问题，这应该可以满足您的需求。

```
graph {

0--1 [color="black:white:black"];
0--2;

} 
```

# sql - 从 ms 访问 vb.net 查询出现问题

> ID：15376365
> 
> 赞同：1
> 
> 时间：2013-03-13T03:09:39.600
> 
> 标签：sql, vb.net, ms-access

对我现在在 VB.net 中所做的事情有疑问。我在 MS 访问中有一个查询，我想在 VB.net 中运行它。我的查询在 MS ACCESS 中运行，但是当我尝试在 VB 中运行它时，它不显示结果。我注意到，当我将 IIF 语句 true 和 false 部分上的数字更改为较低的数字时，它会显示结果。这是我的代码先生/妈妈。

```
Imports System.Data.OleDb
Public Class Form1
Dim connect As New OleDb.OleDbConnection
Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    connect = New OleDb.OleDbConnection
    connect.ConnectionString = "Provider = microsoft.jet.oledb.4.0; data source = E:\Fb1.mdb"
    If Not connect.State = ConnectionState.Open Then
        connect.Open()
    End If

    Dim strSQL As String

    strSQL = "Select * FROM f_7_fSpecies_new WHERE f7Species Like '*iger';"
    Dim ds As New DataSet
    Dim dt As New DataTable
    ds.Tables.Add(dt)
    Dim da As New OleDbDataAdapter

    da = New OleDbDataAdapter("SELECT f7SynonymId, f7Species, Left(f7Species, Len(f7Species)), Right(f7Species, 1), Left(f7Species, Len(f7Species)-IIF(Right(f7Species, 1) In ('a','r'),2,3)) As f7Species_Root " & _
                             "FROM f_7_fSpecies_new " & _
                            "WHERE f_7_fSpecies_new.f7Species Like '*iger'; ", connect)

    da.Fill(dt)
    DataGridView1.DataSource = dt.DefaultView
    Me.DataGridView1.DataSource = dt
    connect.Close()
End Sub

End Class 
```

标准也没有显示结果。

# jquery - 将图像悬停效果应用于整个容器

> ID：15376367
> 
> 赞同：0
> 
> 时间：2013-03-13T03:09:45.950
> 
> 标签：jquery, hover, gallery, fadein

当我悬停容器时，如何将此悬停效果应用于此容器中的所有图像？

[http://www.photoshop-plus.co.uk/2012/05/21/jquery-color-fade-hover-effect/](http://www.photoshop-plus.co.uk/2012/05/21/jquery-color-fade-hover-effect/)

jQuery

```
$(document).ready(function(){
    $("img.grey").hover(
    function() {
    $(this).stop().animate({"opacity": "0"}, "slow");
    },
    function() {
    $(this).stop().animate({"opacity": "1"}, "slow");
    });
}); 
```

CSS

```
<ul class="gallery">
<li>
<img src="images/01_grey.gif" class="grey" />
<img src="images/01_color.gif" class="color" />
</li>

<li>
<img src="images/02_grey.gif" class="grey" />
<img src="images/02_color.gif" class="color" />
</li>
</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T03:44:36.093

这是你如何实现它：http: [//jsfiddle.net/xEuD7/](http://jsfiddle.net/xEuD7/)

请注意，您需要实现**CSS**并将**JavaScript 插件**导入您的页面！

```
.gallery li {
    float: left;
    margin-right: 20px;
    list-style-type: none;
    margin-bottom: 20px;
    display: block;
    height: 130px;
    width: 130px;
    position: relative;
}
img.grey {
    position: absolute;
    left: 0;
    top: 0;
    z-index: 10;
}
img.color {
    position: absolute;
    left: 0;
    top: 0;
} 
```

更新：

```
$(document).ready(function(){
    $("img.grey").hover(
    function() {
        $(this).parents('.gallery').find("img.grey").stop().animate({"opacity": "0"}, "slow");
    },
    function() {
        $(this).parents('.gallery').find("img.grey").stop().animate({"opacity": "1"}, "slow");
    });
}); 
```

# eclipse - 固定链接到最新的 Eclipse 4.2 版本

> ID：15376373
> 
> 赞同：0
> 
> 时间：2013-03-13T03:10:13.203
> 
> 标签：eclipse

在管理一些开发人员箱时，能够依赖某种“永久位置”对我来说*非常有用，我可以期待最新的 Eclipse 4.2 下降驻留。*

目前我是 BeautifulSoup 解析页面，它给了我这个：

```
http://www.eclipse.org/downloads/download.php?file=/eclipse/downloads/drops4/R-4.2.2-201302041200/eclipse-SDK-4.2.2-linux-gtk-x86_64.tar.gz 
```

难道世界上真的没有办法指向这样的事情：

```
http://www.eclipse.org/downloads/latest_eclipse-SDK-4.2.2-linux-gtk-x86_64.tar.gz 
```

带有一个随附的（也是永久链接）页面，该页面将为我提供 drop 的 shasum，以避免重新下载 Squid 未能检测为“从缓存中提供”的内容

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T06:20:24.500

如果您可以从 EclipseSource 而不是 eclipse.org 获取它们，您可以使用以下链接：[http ://eclipsesource.com/blogs/2013/03/11/fast-access-to-old-eclipse-releases /](http://eclipsesource.com/blogs/2013/03/11/fast-access-to-old-eclipse-releases/)它们似乎是固定的（如果您按照页面进行操作）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T15:37:37.937

4.2.2 版本是 4.2.x 系列的最后一个版本。您可以安全地引用您拥有的 URL。很多年都会好的。唯一更新的将是下一个版本系列。

# android - 多列插入android sqlite

> ID：15376374
> 
> 赞同：0
> 
> 时间：2013-03-13T03:10:21.597
> 
> 标签：android, sqlite, android-intent, android-sqlite

我正在使用 Android 提供的 SQLLite 数据库。

我有一个带有两个列的表 myTable：col_id 和 colName。gettersetter 类如下：

```
 public class MyTable{

        private long id;
    private String colName;

    public long getId() {
        return id;
    }

    public void setId(long id) {
        this.id = id;
    }

    public String getColName() {
        return colName;
    }

    public void setColName(String colName) {
        this.colName = colName;
    }

} 
```

我在数据库连接器中有一个插入单行的方法：

```
 public void insertMyTable(String colName)
           {
              ContentValues newCon = new ContentValues();
              newCon.put("colName", colName);
              open();
              database.insert("myTable", null, newCon);
              close();
           } 
```

有没有办法将 MyTable 类型的对象列表插入到数据库中，我一次要插入 100 多条记录。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T03:30:31.603

```
public void insertMyTable(List<MyTable> myTables)
{
    open();
    database.beginTransaction();
    for (MyTable myTable : myTables)
    {
        ContentValues insertValues = new ContentValues();
        insertValues.put("colName", myTable.getColName());
        database.insert("myTable", null, insertValues);
    }  
    database.setTransactionSuccessful();
    database.endTransaction();
    close();
} 
```

# jquery - 对 jQuery 验证问题非常困惑

> ID：15376379
> 
> 赞同：0
> 
> 时间：2013-03-13T03:10:40.427
> 
> 标签：jquery, jquery-validate

我正在使用查询验证来验证用户在向我发送电子邮件之前是否填写了所有文本字段。这是我的表单 HTML：

```
<form class="email-form" action="php/email.php" method="POST" id="emailForm"> <br />
            <input type="text" class="required" placeholder="Your Name" /> <br />
            <input type="text" class="required" placeholder="Your Email" /> <br />
            <input type="text" class="required" placeholder="Subject" /><br />
            <textarea rows="10" class="required" ></textarea><br />
            <input type="submit" class="btn btn-primary required" />
</form> 
```

还有我的 jQuery：

```
$(function() {
    $('#emailForm').validate();
}); 
```

然后我访问该[页面](http://mattaltepeter.com/new/contact.php)并在不输入任何文本的情况下提交表单，并且只有第一个文本框会收到附加的错误消息。如果第一个文本框已填写，则表单将毫无问题地提交。有人可以帮我吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T04:17:14.070

每个输入都**必须**包含一个`name`属性，否则 jQuery Validate 插件将无法正常工作。

`class="required"`否则，在每个元素内使用并没有错。

试试这个：

**HTML**：

```
<form class="email-form" action="php/email.php" method="POST" id="emailForm"> <br />
    <input type="text" name="yourname" class="required" placeholder="Your Name" /> <br />
    <input type="text" name="youremail" class="required" placeholder="Your Email" /> <br />
    <input type="text" name="subject" class="required" placeholder="Subject" /><br />
    <textarea rows="10" name="description" class="required" ></textarea><br />
    <input type="submit" class="btn btn-primary required" />
</form> 
```

**jQuery** :

```
$(function() {
    $('#emailForm').validate();
}); 
```

**工作演示：http: [//jsfiddle.net/xSwfD/](http://jsfiddle.net/xSwfD/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T03:34:01.010

删除第一个`class=required`，看看会发生什么？该表格现在将通过电子邮件验证。这样做的方法是在 html 中给出一个唯一的名称。我更喜欢这种方式，因为它为进一步定制提供了更大的灵活性：

```
<form class="email-form" action="php/email.php" method="POST" id="emailForm"> <br />
    <input type="text" name="name" placeholder="Your Name" /> <br />
    <input type="text" name="email" placeholder="Your Email" /> <br />
    <input type="text" name="subject" placeholder="Subject" /><br />
    <textarea rows="10" class="required small" ></textarea><br />
    <input type="submit" class="btn btn-primary" />
</form> 
```

```
$(function() {

    $('#emailForm').validate({
           rules: {
                   name: "required",
                   email: "required",
                   subject: "required",
           }
   });

}); 
```

使用它，您可以使用消息和其他字段获得各种花哨。看到这个很好的[教程](http://www.camcloud.com/blog/jquery-form-validation-tutorial)。

我正在玩的[小提琴。](http://jsfiddle.net/w6Xrc/2/)

# c# - 从 Active Directory 检索用户凭据

> ID：15376384
> 
> 赞同：0
> 
> 时间：2013-03-13T03:10:58.570
> 
> 标签：c#, .net, active-directory

有什么方法可以使用 C# .net 从 Active Directory 中检索密码？我需要集成一个 3rd 方应用程序，该应用程序必须根据 AD 中的用户名检索密码，以将其传递给 Microsoft CRM 以进行用户身份验证。

我找不到任何有关如何解决此问题的相关材料。任何我可以找到信息的建议或链接将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T03:15:18.423

这基本上是不可能的。

Windows 登录密码使用单向*哈希*存储。

相反，您应该使用 Active Directory / NTLM 身份验证作为当前域用户进行身份验证。

# java - JFrame 上的字符串和 BufferedImage

> ID：15376386
> 
> 赞同：1
> 
> 时间：2013-03-13T03:11:04.903
> 
> 标签：java, swing, jframe, bufferedimage

我正在尝试将一个字符串和 a 显示`BufferedImage`到 a 上`JFrame`，它们都作为方法的输出。我无法`String`将图像与图像分开，因此我需要将两者都添加到`JFrame`.

这是我到目前为止所做的代码，没有显示任何内容。非常感谢您提前提供的帮助。

```
String path = getUserInfo("abc123"); <-- method that returns a string and a buffered image
BufferedImage image = null;
try {
    image = ImageIO.read(new File(path));
} catch (IOException ex) {
    Logger.getLogger(InstagramClient.class.getName()).log(Level.SEVERE, null, ex);
}
JFrame f = new JFrame();
f.setSize(400,400);
f.setVisible(true);
ImageIcon icon = new ImageIcon(image);
JLabel label = new JLabel(icon, JLabel.CENTER);
JOptionPane.showMessageDialog(null, label, "icon", -1); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T03:56:35.517

您可以使用 将字符串呈现在图像上，如此[处](https://stackoverflow.com/a/2658663/230513)`drawString()`所示。

或者，您可以使用`label.setText()`并依赖标签的水平和垂直对齐方式进行定位，如此处[所示](https://stackoverflow.com/a/13437388/230513)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T04:06:44.643

基本上，您可以使用标签的`setText`方法为标签提供文本值。

您还需要将标签“添加”到框架中，否则它不会显示任何内容。

```
String path = getUserInfo("abc123"); <-- method that returns a string and a buffered image
BufferedImage image = null;
try {
    image = ImageIO.read(new File(path));
} catch (IOException ex) {
    Logger.getLogger(InstagramClient.class.getName()).log(Level.SEVERE, null, ex);
}
JFrame f = new JFrame();
ImageIcon icon = new ImageIcon(image);
JLabel label = new JLabel("This is some text", icon, JLabel.CENTER);
f.add(label);
f.setVisible(true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T03:28:55.293

充满鳗鱼的气垫船实际上回答了我的问题。我想同时返回 String 和 BufferedImage 但现在我知道这是不可能的。感谢大家的帮助 ：）

# jquery - 在 jQuery 中使用 :even 或 filter(":even")

> ID：15376388
> 
> 赞同：3
> 
> 时间：2013-03-13T03:11:28.163
> 
> 标签：jquery, performance

我正在阅读 jQuery API，关于偶数选择器，jQuery 建议我们使用纯 CSS 选择器选择元素列表，然后使用`filter(":even")`以获得更好的性能。但我认为 jQuery 也针对他们的`:even`选择器进行了优化。当我使用任何选择器时，它在同一时间给了我相同的结果。只有当我们拥有超过 100 万个元素时，它才会有所不同吗？有人可以解释`:even`选择器的工作原理以及为什么使用`filter(":even")`更好吗？

谢谢， Tho Vo

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T03:17:09.023

Why not test it? [http://jsperf.com/even-selector](http://jsperf.com/even-selector)

If you're looking for something fast, use `:nth-child(even)`, as it's a native selector and can be fed into `document.querySelectorAll`. `:even` is a jQuery-specific pseudo-selector and forces jQuery to traverse the DOM using JavaScript, which will almost always be slower than `document.querySelector`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T03:16:29.767

[您可以在此处](http://jsperf.com/even-vs-filter-even)找到性能测试。正如您在结果中看到的 filter('even') 更快，尽管它仅在大数据中才会引人注目。

# java - JOOQ 连接

> ID：15376398
> 
> 赞同：10
> 
> 时间：2013-03-13T03:12:20.627
> 
> 标签：java, concatenation, multiple-columns, jooq

我有一个这样的查询：

```
Result<?> result = create.select(CONSUMER.CONS_ID_NO,
                                             CONSUMER.CONS_NAME,
                                             concat(CONSUMER.AREA_CODE, "/", CONSUMER.CONS_NO, "/", CONSUMER.CAT_CODE).as("ConsNo"),
                                             CONSUMER.ARREARS)
                                            .from(CONSUMER)
                                            .fetch(); 
```

我根据[JOOQ Manual](http://www.jooq.org/doc/3.0/manual-single-page/#aliased-columns)编写了这个，但我收到一条错误消息：

> Factory 类型中的方法 concat(String...) 不适用于参数 (TableField, String, TableField, String, TableField)

我正在使用**JOOQ-3。**

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-13T04:48:54.367

看来手册中的示例不起作用。但是，您可以通过 将字符串转换为归档`org.jooq.impl.Factory.val`。

```
 Record result = create.select(
            concat(AUTHOR.FIRST_NAME, val(" "), AUTHOR.LAST_NAME).as("Full Name")
    ).from(AUTHOR).fetchAny(); 
```

有关详细信息，请参阅[Lukas Eder 的这封电子邮件](https://groups.google.com/d/msg/jooq-user/qIJlk4JPZCc/7P02gapjLTQJ)

# php - 无法在会话对象中增加产品的数量

> ID：15376399
> 
> 赞同：1
> 
> 时间：2013-03-13T03:12:35.370
> 
> 标签：php, shopping-cart

我创建了一个对象，它被命名为洗车场。我创建了一个会话并为会话分配了该对象，如果我输入数量然后按购买按钮，我有结果（示例 6）：

> > 您的购物车包含 6 件商品。

但是当我什么都不输入时，我得到：

> > 您的购物车包含物品。

我应该怎么做？谢谢！这是我的所有代码：

index.php
PHP 代码：

```
<?php 
    session_start();  

    require_once 'carwash.php'; 
    if (isset($_SESSION['encoded_cartopass'])) { 
        // first let's get the variable from the session 
        $encoded_cartopass = $_SESSION['encoded_cartopass']; 

        // now let's unpack it 
        $cartopass = unserialize($encoded_cartopass); 

        // echo quantity 
        echo "Your shopping cart contains {$cartopass->getQuantity()} items. <br /><br />"; 
    } 
    else { 
        echo "Your shopping cart contains 0 items. <br /><br />"; 
    } 
?> 

    <form action="process.php" method="post"> 
    Quantity: <input type="text" name="quantity" id="quantity"/> 
    <input type="submit" value="Buy" name="submit" /> 
    </form> 
```

process.php
PHP 代码：

```
<?php 

    require_once 'carwash.php'; 

    if (isset($_POST['submit'])) { 

        if (!isset($_SESSION['encoded_cartopass'])) { 

            // construct and set quantity 
            $cartopass = new carwash(); 
            $cartopass->setQuantity($_POST['quantity']); 

            // construct and encode session 
            session_register('encoded_cartopass'); 
            $_SESSION['encoded_cartopass'] = serialize($cartopass); 
        } 
        else { 
            // if session is existing, decode it and 
            // increment quantity 
            $encoded_cartopass = $_SESSION['encoded_cartopass']; 

            $cartopass = unserialize($encoded_cartopass); 

            $cartopass->incrementQuantity($_POST['quantity']); 

            // encode class and assign to session and 
            // session is used pass to index.php 
            $_SESSION['encode_cartopass'] = serialize($cartopass); 
        } 

    } 

    echo "<script>window.location.href='index.php'</script>"; 
?> 
```

carwash.php
PHP 代码：

```
<?php 
    class carwash { 

        private $carmake; 
        private $caryear; 
        private $quantity; 

        public function getCarmake() { 
            return $this->carmake; 
        } 

        public function setCarmake($carmake) { 
            $this->carmake = $carmake; 
        } 

        public function getCaryear() { 
            return $this->caryear; 
        } 

        public function setCaryear($caryear) { 
            $this->caryear = $caryear; 
        } 

        public function getQuantity() { 
            return $this->quantity; 
        } 

        public function setQuantity($quantity) { 
            $this->quantity = $quantity; 
        } 

        public function incrementQuantity($quantity = '') { 
            if (empty($quantity)) { 
                $this->quantity++; 
            } 
            else { 
                $this->quantity += $quantity; 
            } 
        } 

        public function washcar() { 
            echo "scruba, dub, dub, scruba, dub, dub <br />"; 
            echo "I'm feelling cleaner, Thank you!"; 
        } 
    } 
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T03:24:51.197

EDITED: (Found out what the curly braces do...) Either of the following should work:

```
echo "Your shopping cart contains ".($cartopass->getQuantity() ? $cartopass->getQuantity() : 0)." items. <br /><br />"; 

echo "Your shopping cart contains ", $cartopass->getQuantity() + 0, " items. <br /><br />"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T03:31:39.377

有两种可能的解决方案 -

1.  检查 session 的值是否为`"0"`（即使“0”为假，`$v = "0"; isset($v)`也会返回真）。

2.  `$_POST`如果是，则销毁会话`"0"`。

## 将您的 index.php 更改为 -

```
<?php 
session_start();  

require_once 'carwash.php'; 
if (isset($_SESSION['encoded_cartopass']) && $_SESSION['encoded_cartopass']) { 
    // first let's get the variable from the session 
    $encoded_cartopass = $_SESSION['encoded_cartopass']; 

    // now let's unpack it 
    $cartopass = unserialize($encoded_cartopass); 

    // echo quantity 
    echo "Your shopping cart contains {$cartopass->getQuantity()} items. <br /><br />"; 
} 
else { 
    echo "Your shopping cart contains 0 items. <br /><br />"; 
} 
?> 
```

## 或将您的 process.php 更改为 -

```
<?php 

require_once 'carwash.php'; 

if (isset($_POST['submit']) && $_POST['quantity']) { 

    if (!isset($_SESSION['encoded_cartopass'])) { 

        // construct and set quantity 
        $cartopass = new carwash(); 
        $cartopass->setQuantity($_POST['quantity']); 

        // construct and encode session 
        session_register('encoded_cartopass'); 
        $_SESSION['encoded_cartopass'] = serialize($cartopass); 
    } 
    else { 
        // if session is existing, decode it and 
        // increment quantity 
        $encoded_cartopass = $_SESSION['encoded_cartopass']; 

        $cartopass = unserialize($encoded_cartopass); 

        $cartopass->incrementQuantity($_POST['quantity']); 

        // encode class and assign to session and 
        // session is used pass to index.php 
        $_SESSION['encode_cartopass'] = serialize($cartopass); 
    } 

} else {
    unset($_SESSION['cartopass']);
    session_destroy();
}

echo "<script>window.location.href='index.php'</script>"; 
?> 
```

# java - Android 应用程序在完全退出时删除文件（从任务管理器退出）

> ID：15376401
> 
> 赞同：0
> 
> 时间：2013-03-13T03:12:41.017
> 
> 标签：java, android, fileoutputstream

我有一个试图适应 iOS 项目的数据存储类。它适用于 iOS，它几乎适用于我的 android 项目，但是，当从任务管理器退出 android 应用程序时，文件不会在下次运行时恢复。

该类的意图是如果在保存对象时没有文件，则该类将创建文件并保存它。如果有文件，该类将打开包含数组的文件，将对象附加到该数组并保存。

我是否缺少将文件保存到设备上的东西？

这就是我调用类来保存文件的方式

```
ObjectStore.defaultStore().saveObject(getApplicationContext(), anObject); 
```

这是我的 ObjectStore 类

```
public class ObjectStore {

ArrayList<Object> objectList = new ArrayList<Object>();
static ObjectStore defaultStore = null;
Context context = null;

public static ObjectStore defaultStore(){
    if(defaultStore == null){
        defaultStore = new ObjectStore();
    }
    return defaultStore;
}

public Object ObjectStore(){
    if(defaultStore != null){
        return defaultStore;
    }
    return this;
}

public ArrayList<Object> objectList(){
    return objectList;
}

public Object saveObject(Context c, Object object){
    context = c;
    objectList.add(object);
    saveFile(context);
    return object; 
}

public void clearAll(){
    objectList.clear();
    saveFile(context);
}

public boolean doesFileExist(Context c){
    context = c;
    File file = c.getFileStreamPath("objectList.file");
    if(file.exists()){
        return true;
    }else{      
        return createFile(context);
    }
}

public boolean createFile(Context c){
    context = c;
    try{
        FileOutputStream fos = context.openFileOutput("objectList"+".file", Context.MODE_PRIVATE);
        ObjectOutputStream oos = new ObjectOutputStream(fos);
        oos.writeObject(objectList);
        oos.close();
        return true;
    }catch(IOException e){
        e.printStackTrace();
        Log.d("TAG", "Error creating file: " + e);
        return false;
    }
}

public boolean saveFile(Context c){
    Log.d("TAG", "Trying to save file");
    context = c;
    try{
        FileOutputStream fos = context.openFileOutput("objectList.file", Context.MODE_PRIVATE);
        ObjectOutputStream oos = new ObjectOutputStream(fos);
        oos.writeObject(objectList);
        oos.close();
        Log.d("TAG", "File Saved");
        return true;
    }catch(IOException e){
        e.printStackTrace();
        Log.d("TAG", "Error saving file: " + e);
        return false;
    }
}

@SuppressWarnings("unchecked")
public ArrayList<Object> loadFile(Context c) throws Exception{
    Log.d("TAG", "Trying to load file");
    context = c;
    if(doesFileExist(context)){
        try{
            FileInputStream fis = context.openFileInput("objectList.file");
            ObjectInputStream in = new ObjectInputStream(fis);
            objectList = (ArrayList<Object>) in.readObject();
            in.close();
            Log.d("TAG", "File Loaded");
            return objectList;
        }catch(IOException e){
            e.printStackTrace();
            Log.d("TAG", "Error loading file: " + e);
            return null;
        }
    }
    return null;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T10:49:29.440

您的 loadFile() 永远不会被调用！里面没有东西叫它！;)

# c# - 使用 PrivateObject.Invoke 调用静态转换函数在单元测试中不起作用

> ID：15376402
> 
> 赞同：0
> 
> 时间：2013-03-13T03:12:42.703
> 
> 标签：c#, privateobject.invoke

**方法：**

```
 private static HipKvp[] GetRequestParameterArray(CaptchaRequestModel request){} 
```

**单元测试：**

```
 HipKvp[] input = (HipKvp[])privObj.Invoke("GetRequestParameterArray", new CaptchaRequestModel[] { result }); 
```

**例外：**

```
MissingMethodException was unhandled by user code:
Attempted to access a missing member. 
```

我尝试了不同的方法，但没有工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-02-09T18:55:54.383

`PrivateObject.Invoke(String, Object[])`不接触静态成员，可能是因为成员不一定*属于*对象，而是属于类。

您需要像这样在第二个参数中使用[`PrivateObject.Invoke(String, BindingFlags, Object[])`](https://msdn.microsoft.com/en-us/library/ms243710.aspx)和指定：`BindingFlags.NonPublic | BindingFlags.Static`

```
HipKvp[] input = (HipKvp[])privObj.Invoke("GetRequestParameterArray", BindingFlags.NonPublic | BindingFlags.Static, new CaptchaRequestModel[] { result }); 
```

# knockout.js - Knockout.js：将对象绑定为值/ dropdown 参考这个小提琴：http://jsfiddle.net/44AwW/3/ 3 秒后，一个新的 'Place' 被添加到 （作为模拟 ajax 加载数据的一种方式）。'Place' 是一个简单的 JS 对象，但它的两个属性（City 和 PlaceType）本身就是对象 - 每个都有一个 'id' 和 'name' 属性。var Place = { id: 1, name: "Paradiso", pla

> ID：15376403
> 
> 赞同：3
> 
> 时间：2013-03-13T03:12:50.460
> 
> 标签：knockout.js

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T04:17:40.007

Javascript 通过引用比较对象。看起来相同的对象不会相互匹配。当您从选择列表中选择时，您将获得对存储在`cities`or中的对象的引用`placeTypes`。但是当你通过 ajax 加载一个对象时，你会得到一个看起来一样的新对象。

有两种方法可以解决这个问题。第一种是使用字符串进行匹配。在这种情况下，您将向元素添加`optionsValue`绑定。`select`第二个是单独查找对象（使用类似的东西`ko.utils.arrayFirst`）并在编辑之前存储它。

我[更新了您的示例](http://jsfiddle.net/44AwW/4/)，以展示您如何`optionsValue`在仅将`id`城市的 s 和地点类型存储在您的`place`对象中时使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T03:18:36.357

您应该使用`with`绑定来编辑和特定记录。在这里查看答案：

[编辑淘汰赛 observableArray 中的项目](https://stackoverflow.com/questions/15365227/edit-item-in-knockout-observablearray/15366890#15366890)

# c# - c#错误无法理解我应该怎么做才能解决它

> ID：15376406
> 
> 赞同：-1
> 
> 时间：2013-03-13T03:13:23.247
> 
> 标签：c#, boolean

嗨，我有这个代码（我得到了一个错误，我必须声明一个主体，因为它没有标记为抽象、外部或部分......顺便说一下，我无法让它在这里发布，但就在公共部分类 Form1 上：表格我也写了 bool play1 = true;bool play2 = false; int x=1;int o=10; ）当我点击它时，它会上升到我用粗字母标记的那个区域有人可以告诉我什么是错误的以及如何逐步解决

```
public partial class Form1 : Form
{                
    public Form1()
    {
        InitializeComponent();
        værdier();
        int[] status = new int[9];
        zeihne();
    }

    private string[] status; 

    private void value()      
    { 
        int[] status = new int[9];
        zeihne();        
    }

    private void zeihne()        
    {  
        button1.Text = status[0];
        button2.Text = status[1];
        button3.Text = status[2];
        button4.Text = status[3];
        button5.Text = status[4];
        button6.Text = status[5]; 
        button7.Text = status[6];
        button8.Text = status[7];
        button9.Text = status[8];
    }

   //      private void label1_Click(object sender, EventArgs e)
    {

    }
    **private void Form1_Load(object sender, EventArgs e);**

    private void button1_Click(object sender, EventArgs e)
    {
        if (play1 == true)
        {
            play1 = true;
            button1.Text = "X";
            play1 = false;
        }
        else
        {
            play2 = true;
            button1.Text = "O";
            play2 = false;
            play1 = true;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T03:15:25.847

你还没有定义方法体

```
private void Form1_Load(object sender, EventArgs e); 
```

这是一个抽象方法，它们只允许在抽象类上

像这样的东西可以解决问题

```
private void Form1_Load(object sender, EventArgs e)
{
} 
```

或者，如果您不打算在该方法上添加任何代码，则可以摆脱该方法。

**编辑**

在您的代码上看起来很奇怪的其他东西是

```
//      private void label1_Click(object sender, EventArgs e)
{

} 
```

你想做什么？两种选择：

```
// Option1: All the method commented
*/private void label1_Click(object sender, EventArgs e)
{

}*/

// Option2: Nothing commented
private void label1_Click(object sender, EventArgs e)
{

} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-13T04:46:42.303

你好 Hwoarang H 我在我的表单中尝试了你的代码并且它工作正常。您只需按照步骤操作即可。

你有这样定义你的方法

```
private void Form1_Load(object sender, EventArgs e); 
```

这不是定义这样的方法的正确方法。您必须像下面这样声明

```
private void Form1_Load(object sender, EventArgs e)
        { } 
```

现在删除您的标签点击事件和括号

```
//      private void label1_Click(object sender, EventArgs e)
//{

//} 
```

现在您收到警告，例如 x 已分配给但从未使用，o 已分配给但从未使用过，状态已分配给但从未使用过。不用担心您将 x 和 o 分配为整数并用作字符串的 bcos，因此此警告来了，我不知道你的逻辑是什么，但如果你想删除这个警告而不是使用这个 int x 和 o。而且 play2 从未使用过，所以像下面这样放置条件

```
 if (play1 == true)
            {

                btnSendNotification.Text = "x";
                play1 = false;
            }
            else if(play2==true)
            {

                btnSendNotification.Text = "o";
                play2 = false;
                play1 = true;
            } 
```

如果没有得到解决方案，希望这对您有所帮助，而不是评论我。

# search - 从搜索中查找关键字的 ASP 脚本

> ID：15376412
> 
> 赞同：0
> 
> 时间：2013-03-13T03:14:01.743
> 
> 标签：search, asp-classic, keyword

我正在寻找一个 ASP 脚本，它可以解析来自搜索引擎的推荐字符串并从中提取关键字。我知道这可以使用 PHP 来完成，但我碰巧在一个使用 ASP 的网站上工作。

这可以使用 ASP 完成吗？或者，找到一个 Javascript/jQuery 版本会更好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T06:42:20.330

是的，它可以在 Classic ASP 中完成。例如：

```
<%

Dim i, url, querystring, keywords

url = Request.ServerVariables("HTTP_REFERER")

If url <> "" Then
    Response.Write "Referrer: "
    Response.Write url
    Response.Write "<br>"

    querystring = Request.ServerVariables("QUERY_STRING")

    If querystring <> "" Then
        keywords = Split(querystring, "&")

        If IsArray(keywords) Then
            For i = 0 To UBound(keywords)
                Response.Write keywords(i)
                Response.Write "<br>"
            Next
        End If
    End If
End If

%> 
```

# java - 在 reducer utterable 上循环两次

> ID：15376422
> 
> 赞同：0
> 
> 时间：2013-03-13T03:15:25.040
> 
> 标签：java, mapreduce

我正在实现两相矩阵乘法。以下是第一阶段的减速器。键是左文件的行索引和右文件的列索引。我希望输出计数映射和减速器相同。但看起来内循环增加了与外循环相同的迭代器，因此减速器输出的数量等于键的数量。

代码片：

```
@Override
        public void reduce(Text key, Iterable<Text> values, Context context)
        throws IOException, InterruptedException
        {
            for (Text outer : values) {
                String [] outerLine = outer.toString().split("\t");
                //int outerIndex = 0;
                //outerIndex = outerLine[0].equalsIgnoreCase(leftFilePattern) ? outerIndex : 1;
                if(outerLine[0].equalsIgnoreCase(rightFilePattern))
                    continue;
                double outerValue = Double.parseDouble(outerLine[2]);
                for (Text inner : values) {
                    String [] innerLine = inner.toString().split("\t");
                    if(innerLine[0].equalsIgnoreCase(leftFilePattern))
                        continue;
                    context.write(new Text(key.toString() + "-" + innerLine[1]), 
                                new DoubleWritable(outerValue * Double.parseDouble(innerLine[2])));
                }
            } 
```

但是当我有如下简单的java应用程序时：

```
List<Integer> l = Arrays.asList(10, 15);
        Iterable<Integer> it = l;
        for (Integer in : it) {
            for (Integer out : it) {
                System.out.println(in + " " + out);
            }
        } 
```

这里的输出数为 4。如果内部循环的工作方式与减速器的情况相同，则输出计数应为 1，即（10 15）。

有人可以解释这种行为。

维沙尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T03:24:18.007

There is a possible way of implementing `Iterable` that could cause that effect.

The intent seems to be that each `iterator()` call should return its own `Iterator` instance. The `Iterable` classes in `java.util`, including the private `List` class used by `Arrays.asList()`, all do so. That behavior is needed for nested foreach on the same `Iterable`, and the stated purpose of `Iterable` is foreach support.

I cannot find anything in the `Iterable` API document that directly requires that behavior.

Obviously, if the same object is used as result of two `iterator()` calls, nested foreach statements on the same `Iterable` will fail the way you describe.

=========================================================

If this is what is happening, my best suggestion is to do an initial pass over `values` copying each Text reference to a well-behaved `List<Text>` such as an `ArrayList`. You can safely do your nested loop over its elements.

# ajax - Ajax 就绪状态未停留在 1

> ID：15376428
> 
> 赞同：2
> 
> 时间：2013-03-13T03:16:11.213
> 
> 标签：ajax, readystate, onreadystatechange

在搜索互联网后，我无法找到关于为什么我的 AJAX 代码不起作用的答案。我的任务是检索一个文本文件并使用 AJAX 将其显示给浏览器，但就绪状态在 1 处停止。示例文件是 canada.txt，位于目录中`http://157.201.194.254/~ercanbracks`。.html 和 .js 文件如下：

HTML 文件：

```
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<title>AJAX</title>
<link rel="stylesheet" type="text/css" href="assign09.css" />
<script type="text/javascript" src="assign09.js"></script>
</head>
<body>
    <h1>Ten Largest Cities</h1>
    <h3>Select a Country:</h3>
    <form action="">
        <select id="country">
            <option value="canada">Canada</option>
            <option value="mexico">Mexico</option>
            <option value="russia">Russia</option>
            <option value="usa">USA</option>
        </select>
        <input type="submit" value="Submit" 
            onclick="makeRequest(document.getElementById('country').value)" />
        <div id="error"> </div>
    </form>

    <h3>Cities:</h3>
    <div id="cities">
    <pre>
City               Population
------------------ ---------------
<span id="cityList"></span>
    </pre>
    </div>
</body>
</html> 
```

.js 文件：

```
var httpRequest;
var countryOption;

function makeRequest(option)
{
    countryOption = option;
    if (window.XMLHttpRequest) // Modern Browsers
    {
        httpRequest = new XMLHttpRequest();
    }
    else // older IE browsers
    {
        try
        {
            httpRequest = new ActiveXObject("Msxm12.XMLHTTP");
        }
        catch (e)
        {
            try
            {
                httpRequest = new ActiveXObject("Microsoft.XMLHTTP");
            }
            catch (e)
            {
                alert('ERROR - Unable to make XMLHttpRequest');
            }
        }
    }

    if (!httpRequest)
    {
        alert('ERROR: httpRequest failed -- try a different browser');
        return false;
    }

    else
    {
        var url = "http://157.201.194.254/~ercanbracks/" + option + ".txt";
        alert('Ready State = ' + httpRequest.readyState);
        httpRequest.onreadystatechange = getCities;
        httpRequest.open("GET", url, true)
        httpRequest.send(null);
    }
}

function getCities()
{
    alert('Ready State = ' + httpRequest.readyState);
    if (httpRequest.readyState == 4)
    {
        alert('Ready State = ' + httpRequest.readyState);
        if (httpRequest.status == 200)
        {
            var response = httpRequest.responseText;
            document.getElementById("cities").innerHTML = response;
        }
        else
        {
            alert('problem with request');
            alert('Ready State = ' + httpRequest.statusText);
        }
    }
} 
```

# python - Could anyone help me with this python singpath program?

> ID：15376434
> 
> 赞同：0
> 
> 时间：2013-03-13T03:16:44.507
> 
> 标签：python, stack, postfix-notation

First of all, this is not for any class. I have been working on these 2 programs for a long time and cannot make heads or tails of it. I really want to get past these problems so I can move onto other lessons. "Create a function that transforms the prefix notation into postfix notation, and postfix notation into prefix notation. The function takes two arguments. The first is a string of an expression without spaces or syntax errors, and the second is another string contains all the operators. Characters not in the second string are regarded as operands. The lengths of all the operators and operands are 1, and all the operators are binary operators." ex:

```
>>> fix_trans('ab33c2c11','abc')
'33b211cca' 
```

and Convert to (reverse) Polish notation:

```
>>> toPolish('(3+5)*(7-2)',D,0)
'*+35-72' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T03:35:22.393

你能提供任何例子来说明你在这方面取得了多大的进步，或者哪些方法对你不起作用？另外，你熟悉[调车场算法](http://en.wikipedia.org/wiki/Shunting-yard_algorithm)吗？

# html - How to prevent child element from inheriting CSS styles

> ID：15376444
> 
> 赞同：4
> 
> 时间：2013-03-13T03:18:25.530
> 
> 标签：html, css

I have a `<div>` element with a `<p>` element inside:

```
<div style="font-size:10pt; color:red;">
    This is my Parent Div.
    <p>This is my Child Paragraph.</p>
    My parent Div Ends Here.
</div> 
```

How can I prevent my paragraph from inheriting the CSS properties set to the `<div>`?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T03:22:52.420

In your case the best way is to just over right the styles that the `<p>` element is inheriting:

So in your CSS file, which you should be using instead of inline styles:

```
.parent-div {
    font-size: 10pt;
    color: red;
}

.child-paragraph {
    font-size: 12pt;
    color: black;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T03:20:34.973

在您的子节点中 -

```
<p style="font-size:12pt; color:black;">This is my child</p> 
```

只需将内联样式设置为您想要的任何内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T03:24:54.163

您可以使用`>`CSS 中的选择器来`p`选择`div`.

[小提琴链接](http://jsfiddle.net/e58Ta/)

```
div > p {
    font-size:1.2 em;
    color: green;
} 
```

# plone - Plone 4.2.5：不允许粘贴项目

> ID：15376450
> 
> 赞同：1
> 
> 时间：2013-03-13T03:18:49.343
> 
> 标签：plone

今天我通过buildout将plone从4.1.4升级到最新的4.2.5。除了粘贴，一切都有效。当我将页面粘贴到文件夹时，回溯显示：

```
Traceback (innermost last):
  Module ZPublisher.Publish, line 126, in publish
  Module ZPublisher.mapply, line 77, in mapply
  Module ZPublisher.Publish, line 46, in call_object
  Module Products.CMFFormController.FSControllerPythonScript, line 105, in __call__
  Module Products.CMFFormController.Script, line 145, in __call__
  Module Products.CMFCore.FSPythonScript, line 127, in __call__
  Module Shared.DC.Scripts.Bindings, line 322, in __call__
  Module Shared.DC.Scripts.Bindings, line 359, in _bindAndExec
  Module Products.PythonScripts.PythonScript, line 344, in _exec
  Module script, line 33, in folder_paste
   - <FSControllerPythonScript at /keti/folder_paste used for /keti/switch1>
   - Line 33
Exception: Disallowed to paste item(s). 
```

我需要你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T09:18:27.360

如果“允许添加的内容类型”受到限制，通常会引发此错误，因此我怀疑您的问题与升级的相关性，而是怀疑简单的配置设置是原因：

去

[http://yourhost.org:8888/yourSiteId/portal_types/Folder/manage_propertiesForm](http://yourhost.org:8888/yourSiteId/portal_types/Folder/manage_propertiesForm)

看，如果“过滤内容类型”被选中。

如果是，请取消选中或在下面的小部件中定义允许的类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T02:37:52.830

Ida Ebkes 确实明白了这一点。所以我取消选中“过滤内容类型”并在 portal_types/Plone%20Site/manage_propertiesForm 下面的小部件中选择文件、文档、文件夹。但它适用于首页。因此，如果我希望“添加新”出现在全局范围内，我必须在 portal_types 下的每个内容类型页面中检查“隐式可添加”。

谢谢，

雨果

# java - .getClassLoader().getResourceAsStream(path) 缓存结果

> ID：15376451
> 
> 赞同：3
> 
> 时间：2013-03-13T03:19:09.887
> 
> 标签：java

我在一个servlet加载一个文件，使用.getClassLoader().getResourceAsStream(path)，路径在WEB-INF/classes目录，我改变路径文件内容后发现，但是文件servlet加载是一样的，不要改变, 文件被缓存。

示例代码：

在我更改 test.key 内容后，此方法每次总是得到相同的结果

```
private String getKey(String param){
    String name = "keys/"+param+"/test.key";
    InputStream in = XXXServlet.class.getClassLoader().getResourceAsStream(name);
    StringBuilder builder = new StringBuilder();
    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(in));
        String line = null;
        while((line = reader.readLine()) != null){
            builder.append(line).append("\n");
        }
    } catch (IOException ignoreException) {

    }finally{
        try {
            in.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    String result = builder.toString();
    return result;
} 
```

==================================================== ================

更改这两行代码，它工作正常

```
 String name = "/WEB-INF/classes/keys/"+param+"/test.key";
    InputStream in = getServletContext().getResourceAsStream(name); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-06T00:17:00.007

安库尔是对的。如果名称和相关内容已经被类加载器或其父级加载过一次，则试图获取类或资源（无论文件/输入流的名称和路径如何）的现有类加载器将永远不会重新加载。这是出于性能原因。唯一的方法是创建一个类加载器的新实例，然后再做一次。但是，至少对于类，您将不得不担心不兼容的类在系统中一起运行。就像您不能将新类的实例分配给使用第一个类加载器实例加载的类键入的变量一样，因为它们在技术上是不同的类。

Pabrantes 认为这是不同的，因为 Liu 不是按说加载一个“类”，而是一个键：“keys/”+param+“/test.key”；然而，他正在使用类加载器来执行此操作，并且在加载“名称”方面的规则与 getResourceAsStream(name) 相同。不管它是否是一个类，类加载器都会认为“哦，给你，我已经为'name'加载了字节流”。把它从 permgen 中拉出来。对于那些感兴趣的人——如果你创建/实现你自己版本的每次重新加载的新类加载器——只需确保它只对非常特定的路径或名称模式执行此操作。另外请记住，您加载的每个副本都可能会在 permgen 中获得空间，因此随着时间的推移 permgen 将失去控制，除非您卸载。

所以 - 这就是为什么它不起作用。ContextLoader 很好用。:-)

丹 C.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-13T09:23:40.003

这是因为一旦你加载了一个类，即使你尝试重新加载它，你也会得到相同的类内容。这是因为它检查类内容是否已经加载，如果是，那么它不会费心再次加载它，只是引用已经加载的内容（在内存中）。

要实现重新加载，您需要编写一个自定义类加载器，它将读取类的内容（以字节为单位）并使用这些字节来加载类。

示例 CustomClassLoader 代码：

```
public class CustomClassLoader extends ClassLoader {

private static final String CLASS_FOLDER_PATH = "/lib/all-classfiles/";
private static final String CLASS_FILE_EXTENSION = ".class";

/**
 * Loads the class file in memory
 */
@Override
public Class<?> loadClass(String className) throws ClassNotFoundException {
    return findClass(className);
}

@Override
protected Class<?> findClass(String className) throws ClassNotFoundException {
    try {

        byte[] bytes = loadClassData(className);

        // Build the class based on the byte data
        return defineClass(className, bytes, 0, bytes.length);

    } catch (IOException ioException) {
        // Call super class(ClassLoader) implementation of loadClass() method
        return super.loadClass(className);
    }
}

/**
 * Returns the byte contents of the class file
 * 
 * @param className
 * @return byte[] - class file data
 * @throws IOException
 */
private byte[] loadClassData(String className) throws IOException {

    File classFile = new File(CLASS_FOLDER_PATH + className + CLASS_FILE_EXTENSION);

    int fileSize = (int) classFile.length();

    // Read the file bytes in byte array
    byte buff[] = new byte[fileSize];

    FileInputStream fis = null;
    DataInputStream dis = null;

    fis = new FileInputStream(classFile);
    dis = new DataInputStream(fis);

    // Read the byte contents of the ORM class file for loading the class
    dis.readFully(buff);

    dis.close();
    fis.close();

    return buff;
} 
```

}

当您想要重新加载类的内容时，请确保您的类加载器实例已被垃圾回收。否则，您最终可能会读取缓存的类数据。

在重新加载时，您还需要处理更多的事情。请阅读这篇关于[Class Reloading](http://tutorials.jenkov.com/java-reflection/dynamic-class-loading-reloading.html)的文章以详细了解它。

希望这可以帮助。

# mysql - 寻找更好的解决方案 - 具有字符串比较类型的 AND 运算符的长列表

> ID：15376456
> 
> 赞同：1
> 
> 时间：2013-03-13T03:19:52.707
> 
> 标签：mysql, sql

我有搜索功能，可以在大型 mysql 表中搜索关键字，但由于我需要过滤掉所有坏词，我必须在 MySQL 中进行以下类型的 AND 比较，这是一长串禁用词（超过 500+），因此它非常慢，

```
SELECT * FROM keywords WHERE 1  
    AND keyword NOT LIKE '%love%'
    AND keyword NOT LIKE '%hope%'
    AND keyword NOT LIKE '%caring%'
    AND keyword NOT LIKE '%x%'
    AND keyword NOT LIKE '%happiness%'
    AND keyword NOT LIKE '%forgiveness%'
    AND keyword NOT LIKE '%good%'
    AND keyword NOT LIKE '%great%'
    AND keyword NOT LIKE '%positive%'
    AND keyword NOT LIKE '%sharing%'
    AND keyword NOT LIKE '%awesome%'
    AND keyword NOT LIKE '%fantastic%' 
```

还有其他更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T03:26:10.450

使用`LIKE`模式匹配的性能很差，因为没有办法为它使用索引。使用像@fuzic 这样的正则表达式建议更糟糕。

如果您想要良好的性能，您确实需要使用一些全文索引解决方案。

我在我的演示文稿[Full Text Search Throwdown](http://www.slideshare.net/billkarwin/practical-full-text-search-with-my-sql)中对此进行了介绍并比较了几种解决方案。

* * *

简短的回答：使用[Sphinx Search](http://sphinxsearch.com/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T03:35:27.820

您可能比构建一个识别完整字符串集的有限状态机做得更糟。手动编写代码会很乏味，但幸运的是，诸如 LEX 及其后代和亲属之类的工具已经存在了近 40 年，以使该过程自动化。

# asp.net - 在 ASP.net 应用程序中将整个站点重定向到 HTTPS

> ID：15376458
> 
> 赞同：0
> 
> 时间：2013-03-13T03:20:04.190
> 
> 标签：asp.net, .net, https, iis-6

我已经使用 asp.net 完成了一个项目，并准备上线。现在，由于某些原因，管理层决定使用 SSL，因此该站点应以 HTTPS 加载。

由于项目很大，在所有页面中检查 URL 并将其重定向到 HTTPS 会很痛苦，有没有一种简单的方法可以全局或在我的母版页中处理？

因此，即使网站 URL 是使用 HTTP 键入的，它也应该被重定向到 HTTPS 站点。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T03:44:24.970

我对 IIS6 使用的一般方法是使用 IIS 中的站点属性来强制 SSL；这将为通过端口 80 访问该站点的任何人生成 403 错误，因此接下来您注册一个自定义 aspx 页面来处理 403 错误并将用户重定向到安全站点。

1.  转到站点的属性（在 IIS 中）、目录安全性，单击通过安全通信编辑，然后单击需要安全通道 (SSL)。现在，这会强制整个站点使用 SSL。如果您现在访问该站点，您应该会收到 403;4 错误。
2.  转到自定义错误选项卡，选择 403;4 错误，并将其设置为您网站上的 URL（例如，/403.4.aspx）
3.  创建这个 403.4.aspx 页面。最简单的可能只是`Response.Redirect("https://www.mydomain.com")`，但更好的是重定向到正确的页面并维护任何查询字符串。我目前没有开发环境来测试它，但我认为它会是这样的：

    `Response.Redirect( "https://" + Request.ServerVariables("HTTP_HOST") + Request.ServerVariables("URL") );`

4.  回到 IIS，设置此 403.4.aspx 页面上的属性，使其不需要安全通道。

现在，当有人试图访问您站点的任何页面时，IIS 会将他们发送到 403.4.aspx 页面，该页面会将他们重定向到安全站点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T04:44:55.563

如果您不想像 Nate 建议的那样根据 IIS 控制它，您可以简单地在您的`global.asax`：

```
void Application_BeginRequest(Object sender, EventArgs e)
{
    if (Request.Url.Scheme != "https")
        Response.Redirect("https://yoursite.com");
} 
```

可能不是最机智的解决方案，但它确实有效。

# architecture - 具有 7 台服务器的 Hadoop 架构 - 平衡连续性和性能

> ID：15376459
> 
> 赞同：0
> 
> 时间：2013-03-13T03:20:06.590
> 
> 标签：architecture, hadoop, hdfs

我们正在从 AWS MapReduce 迁移到我们自己机架上的 Hadoop 集群。最初，我们将有 7 台服务器专用于 Hadoop/HDFS。

我们存储在 HDFS 上的数据将是关键任务，我不希望我们有备份选项（至少在我们使用的第一天没有），所以我想尽我所能来保证连续性。

我还想充分利用我们的计算能力，因为我们的工作可以轻松地使用双倍的硬件。

*   在这个 7 服务器集群中，我应该为每个盒子指定什么用途？特别是哪些进程应该重叠（例如，备份名称节点是否应该共享一个框作为任务节点和类似的？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-19T03:18:26.683

我们最后做的是这样的：

使用 LXC（LXC 是这里的关键组件），我们在 2 个服务器上为作业管理器、namenode 和其他各种管理组件创建了单独的容器，因为 namenode 和作业管理器是资源最密集的，我们将它们分开这 2 台服务器（每个组件都在自己的独立 LXC 容器中）。我们在这两个服务器之间拆分的其余组件。

然后，我们为这两个“管理”服务器中的每一个部署了一个“简化的”数据节点和任务跟踪器。我们使用 LXC 的控制组以牺牲数据/任务节点为代价将 CPU 和磁盘优先级分配给管理组件。我们使用 Cloudera Manager 的简化配置，轻松将数量减少的任务槽部署到这两个盒子上的数据/任务节点。

这样我们就充分利用了硬件，其余的盒子都是专用的“普通”数据/任务节点。

我们当然有一个备份名称节点在与作业跟踪器相同的物理主机上运行，​​而主名称节点在第二个物理盒子上，这给了我们备份。我们还在 3 台工作机器上的 LXC 容器中安装了使用空间 NTFS 客户端，并让 namenode 在那里写出配置的副本作为进一步的备份。

我们确实将我们的名称节点松动到硬件故障一次（磁盘），并且能够成功地从辅助节点恢复它。

# html - 使用 Ruby/Sinatra 从防火墙后提供图像

> ID：15376464
> 
> 赞同：0
> 
> 时间：2013-03-13T03:20:27.333
> 
> 标签：html, ruby, sinatra, firewall, vpn

我有一个我已经开始在 Sinatra 中编写的 web 应用程序，它需要获取图像并以 HTML 格式显示它们。

这些图像是从位于防火墙后面的 API 以及我的 Sinatra 站点所在的 Web 服务器中获取的。API 返回包含位于防火墙后面的图像的 URL 的 JSON。

在我的观点中，我不能简单地将这些 URL 放入 img 标签中，因为它们不是面向公众的。

我想知道如何最好地解决这个问题。某种方式让我获取图像并将它们缓存在我的 Sinatra 服务器上，以便它们面向公众？

对 Sinatra 和 Ruby 来说都是新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T04:39:09.220

如果您有从 API 获取图像的路径怎么办？

例子：

```
get '/image/:image_name' do
    content_type 'image/png'

    API::get_image(params[:image_name])
end 
```

然后，您必须重写图像标签中的 url 才能使用此路由。

希望这可以帮助

PS：还要确保可以通过的 :image_name 不会成为 API 的安全漏洞。确保它只允许“有意义”的 url，或者 API 具有仅接受对图像而不是敏感数据的调用的安全措施。

# c# - 上传到服务器后设置 *.exe 文件属性

> ID：15376465
> 
> 赞同：1
> 
> 时间：2013-03-13T03:20:32.167
> 
> 标签：c#, asp.net

我试图找到一种将“元”信息写入上传到我的 IIS/ASP.NET Web 服务的 EXE 文件的方法。这里有一点背景：

*   我需要在属性中写入一个任意字符串
    *   如果这很重要，它将是我写为“元数据”的 URL
    *   例子：`[https://example.com/someFolder/someOtherFolder](https://example.com/someFolder/someOtherFolder)`
*   文件主要是 InnoSetup 最初创建的安装程序
*   Web 服务器在 Server 2008 R2（标准）之上运行带有 ASP.NET 的 IIS 7.5

**我为什么要写这些信息？**

最终，EXE 可供用户下载。当应用程序运行时，它需要知道 Web URL 才能正确执行。目前我们有一个纯文本框，用户可以在其中输入 URL，但事实证明这很容易出错（尽管有提示/错误检查/...）

**为什么我不能在创建 EXE 时将元数据写入 EXE？**

我可以这样做，但 EXE 可以上传到各种不同的服务器，每个服务器都有自己独特的 URL“元数据”。我试图避免为每个服务器创建单独的构建脚本。

**为什么不直接使用 *.exe 和额外的元数据创建一个 *.zip 文件？**

我想我也可以这样做——但是用户必须实际解压缩下载，以便真正的安装程序可以读取元数据。我之前也遇到过类似的情况，大多数人从未解压缩过完整的下载文件，这也带来了问题。

那么这甚至可能吗？我想作为最后的手段，我可​​以使用上传的 EXE 创建一个新的 EXE，但我试图避免这样做（遇到签名的 EXE 等问题）

# c# - 在 sharepoint 2010 中添加上传功能

> ID：15376468
> 
> 赞同：-1
> 
> 时间：2013-03-13T03:20:51.587
> 
> 标签：c#, .net, sharepoint-2010

如何在 SharePoint 2010 中添加此功能？请帮助我当文件上传到文档库或编辑并签入现有文件时，它应该与网络驱动器上的文件夹同步。如果上传了新文件，则相同的文件应立即在网络驱动器上可用，并且相同的文件可用于删除和更新

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T06:00:48.123

您需要为添加的项目、更新的项目和删除的项目创建事件。

所有这些事件都将在功能中。对于创建功能，我会参考 Visual Studio 2010，它将为功能创建所有文件。您只需要创建事件。

如果您不想要代码，请让我纠正。

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T05:56:36.320

您可以通过将文档库映射到本地计算机上的映射驱动器来做到这一点。

如果这不是您的要求，请纠正我

[http://ashrafhossain.wordpress.com/2012/02/23/using-sharepoint-document-library-as-a-network-drive/](http://ashrafhossain.wordpress.com/2012/02/23/using-sharepoint-document-library-as-a-network-drive/)

# html - 下拉默认值返回null？

> ID：15376470
> 
> 赞同：0
> 
> 时间：2013-03-13T03:21:13.410
> 
> 标签：html, jsp, default-value

我的 JSP 中有 html 可以提出简单的问题，并且有下拉框供用户选择他们的回答。我还设置了默认响应，以防他们决定只点击下一个，但是我总是返回 null。JSP：

```
<div id="startQrtQuestion" align="left">1) When did you first arrive here?</div>
        <div id="startQrtResponse" align="left">
            <select name="quarterStart">
                <option value="summer">Summer Quarter</option>
                <option value="fall" selected="selected">Fall Quarter</option>
            </select> 
        </div>
        <div id="programQuestion" align="left">2) What program are you taking?</div>
        <div id="programResponse" align="left">
            <select name="programSelect">
                <option value="bscs" selected="selected">BSCS</option>
                <option value="bstm">BSTM</option>
                <option value="bsgd">BSGD</option>
                <option value="bswd">BSWD</option>
            </select>
        </div>
        <div id="extendedQuestion" align="left">3) Will you be staying extra quarters?</div>
        <div id="extendedResponse" align="left">
               <div name="extendedStayResponses">
                   <input type="checkbox" name="extendedStay" id="extendedStay"/>Yes
               </div></br>
               <div id="extendedFullTime" style="display:none">
                   Full Time:<select name="extraFullQuarters">
                       <option value="0" selected="selected">0</option>
                       <option value="1">1</option>
                       <option value="2">2</option>
                       <option value="3">3</option>
                       <option value="4">4</option>
                       <option value="5">5</option>
                       <option value="6">6</option>
                       <option value="7">7</option>
                       <option value="8">8</option>
                       <option value="9">9</option>
                       <option value="10">10</option>
                   </select>(Taking 12 Credits or More)
               </div></br>
               <div id="extendedPartTime" style="display:none">
                   Part Time:<select name="extraPartQuarters">
                       <option value="0" selected="selected">0</option>
                       <option value="1">1</option>
                       <option value="2">2</option>
                       <option value="3">3</option>
                       <option value="4">4</option>
                       <option value="5">5</option>
                       <option value="6">6</option>
                       <option value="7">7</option>
                       <option value="8">8</option>
                       <option value="9">9</option>
                       <option value="10">10</option>
                   </select>
               </div>
        </div> 
```

这一切都包含在一个表单中，该表单将调用我的 servlet 中的 post 方法。但是，当我像这样检索这些值时：

```
 String startQuarter = request.getParameter("quarterStart");
    String programSelect = request.getParameter("programSelect");
    String extendedStay = request.getParameter("extendedStay"); 
```

我得到空指针异常。该值是否不会自动设置为我默认选择的选项？

我没有正确访问这些输入吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T03:54:56.707

我发现这不是任何代码。但是我小组项目中的另一组代码。

原来是一个会话属性，应该设置，但不是。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T03:44:00.367

可能是您的请求对象为空。请检查一次。

# java - 网格视图/适配器问题，将图像添加到网格视图

> ID：15376472
> 
> 赞同：0
> 
> 时间：2013-03-13T03:21:33.813
> 
> 标签：java, android, gridview, adapter

首先我必须制作自己的适配器类来在gridview中设置图像吗？它的接缝不合理，每次制作gridview时都需要我制作一个新课程。

我遇到的问题是我无法让我的图像出现在我的网格视图中

```
package joshpike.hsh.hsh_game;

import java.io.IOException;
import java.io.InputStream;

import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.os.Bundle;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.GridView;
import android.widget.ImageView;

public class DisplayActivity extends MainActivity
{
    public class ImageAdapter extends BaseAdapter 
    {
        private Context mContext;

        // create a new ImageView for each item referenced by the Adapter
        public View getView(int position, View convertView, ViewGroup parent) 
        {
            ImageView imageView;
            if (convertView == null) 
            {  
                // if it's not recycled, initialize some attributes
                imageView = new ImageView(mContext);
                imageView.setLayoutParams(new GridView.LayoutParams(85, 85));
                imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
                imageView.setPadding(8, 8, 8, 8);
            } 
            else 
            {
                imageView = (ImageView) convertView;
            }

           imageView.setImageResource(imageArray[position]);
            return imageView;
        }

        private Integer[] imageArray = 
        {
            //currentImageView(0, "xh","bottom",0,0), currentImageView(0, "xh","bottom",1,0)    
            R.drawable.level_1_bottom, R.drawable.level_1_top
        };

        @Override
        public int getCount() 
        {
            return 0;
        }

        @Override
        public Object getItem(int position) 
        {
            return null;
        }

        @Override
        public long getItemId(int position) 
        {
            return 0;
        }
    }

    // Inflate the menu; this adds items to the action bar if it is present.
    //makes the options menu
    @Override
    public boolean onCreateOptionsMenu(Menu menu) 
    {
        getMenuInflater().inflate(R.menu.display, menu);
        return true;
    }

    //what happens if you select items from the options menu
    @Override
    public boolean onOptionsItemSelected(MenuItem item)
    {
        switch (item.getItemId() )
        {
            case R.id.miniMap:

            return true;
        }
        return super.onOptionsItemSelected(item);
    }

    //called when activity is started for first time either for first time or after destroyed
    @Override
    protected void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.display);

        GridView bottomMapGrid = (GridView)findViewById(R.id.bottomMapGrid);

        bottomMapGrid.setAdapter(new ImageAdapter());

        System.out.println("DisplayActivity onCreate done");        
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T05:03:27.527

```
 @Override
    protected void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.display);
        GridView bottomMapGrid = (GridView)findViewById(R.id.bottomMapGrid);
        bottomMapGrid.setAdapter(new ImageAdapter(this));
        System.out.println("DisplayActivity onCreate done");        
    } 
```

和适配器类这样使用

> ```
> public class ImageAdapter extends BaseAdapter {
>   private Context mContext;
> 
>   public ImageAdapter(Context c) {
>       mContext = c;
>   }
> 
>   public int getCount() {
>       return mThumbIds.length;
>   }
> 
>   public Object getItem(int position) {
>       return null;
>   }
> 
>   public long getItemId(int position) {
>       return 0;
>   }
> 
>   // create a new ImageView for each item referenced by the Adapter
>   public View getView(int position, View convertView, ViewGroup parent) {
>       ImageView imageView;
>       if (convertView == null) { // if it's not recycled, initialize some
>                                   // attributes
>           imageView = new ImageView(mContext);
>           imageView.setLayoutParams(new GridView.LayoutParams(85, 85));
>           imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
>           imageView.setPadding(8, 8, 8, 8);
> 
>       } else {
>           imageView = (ImageView) convertView;
>       }
> 
>       imageView.setImageResource(mThumbIds[position]);
> 
>       return imageView;
>   }
> 
>   // references to our images
>   private Integer[] mThumbIds = { R.drawable.sample_2, R.drawable.sample_3,
>           R.drawable.sample_4, R.drawable.sample_5, R.drawable.sample_6,
>           R.drawable.sample_7, R.drawable.sample_0, R.drawable.sample_1,
>           R.drawable.sample_2, R.drawable.sample_3, R.drawable.sample_4,
>           R.drawable.sample_5, R.drawable.sample_6, R.drawable.sample_7,
>           R.drawable.sample_0, R.drawable.sample_1, R.drawable.sample_2,
>           R.drawable.sample_3, R.drawable.sample_4, R.drawable.sample_5,
>           R.drawable.sample_6, R.drawable.sample_7 };
> } 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T03:35:38.527

目前您正在将 Null 传递`mContext`给`ImageView`构造函数以创建它。您需要`mContext`在使用它之前进行初始化：

```
public class ImageAdapter extends BaseAdapter 
    {
        private Context mContext;

        public ImageAdapter(Context mContext){
           this.mContext=mContext;  //<<< initialize here
        }
         //....your code here
    } 
```

并通过将当前活动上下文传递为 Activity 创建`ImageAdapter`实例：

```
bottomMapGrid.setAdapter(new ImageAdapter(DisplayActivity.this)); 
```

# c# - C# 中的 Observable 和 Observer（java.util 包）等价物

> ID：15376474
> 
> 赞同：2
> 
> 时间：2013-03-13T03:21:43.203
> 
> 标签：c#, java, design-patterns, observer-pattern

我遵循**Head First Design Patterns**书中的所有示例，我站在第二章：观察者模式。该章第一部分中包含的基本（脏示例（手工制作））很容易用 C# 实现（来自 Java 代码示例）。一探究竟：

*   [主题.cs](http://pastebin.com/Jee2XdiT)
*   [观察者.ss](http://pastebin.com/a4MHWCbg)
*   [天气数据.cs](http://pastebin.com/XXpt5Gr2)
*   [显示元素.cs](http://pastebin.com/rbqGKQKu)
*   [CurrentConditionsDisplay.cs](http://pastebin.com/cyhxKvHX)
*   [预测显示.cs](http://pastebin.com/gGPqqG3x)
*   [热指数显示.cs](http://pastebin.com/NSuGH7Cv)
*   [统计显示.cs](http://pastebin.com/ViUuJvws)

它工作正常。**现在我的问题是关于C#**中的 Java 中是否存在**Observable**类和**Observer**接口的内置等效项。看[这张图片](http://i48.tinypic.com/25qyp86.png)（取自 Head First Design Patterns）

 **我尝试了各种教程、指南和其他资源来实现该实现。

问候，约翰·奥尔蒂斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T03:41:12.190

观察者模式就是……一种模式。您可以在 C# 中使用类和接口来实现该模式，就像在 Java 中一样

[http://www.fatagnus.com/the-observer-pattern-in-csharp/](http://www.fatagnus.com/the-observer-pattern-in-csharp/)

要回答您的问题，不，C# 中没有与 Java 关键字等效的保留关键字。也就是说，您可以对类/接口/事件执行完全相同的操作。这是 Jon Skeet 在 Stack Overflow 上的一个很好的例子。

```
using System;

class Observable
{
    public event EventHandler SomethingHappened;

    public void DoSomething()
    {
        EventHandler handler = SomethingHappened;
        if (handler != null)
        {
            handler(this, EventArgs.Empty);
        }
    }
}

class Observer
{
    public void HandleEvent(object sender, EventArgs args)
    {
        Console.WriteLine("Something happened to " + sender);
    }
}

class Test
{
    static void Main()
    {
        Observable observable = new Observable();
        Observer observer = new Observer();
        observable.SomethingHappened += observer.HandleEvent;

        observable.DoSomething();
    }
} 
```

[带有委托的 C# 观察者/可观察的超级简单示例](https://stackoverflow.com/questions/1249517/super-simple-example-of-c-sharp-observer-observable-with-delegates)

[http://yoda.arachsys.com/csharp/events.html](http://yoda.arachsys.com/csharp/events.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-21T11:06:22.410

是的，从 .NET Framework 4 开始，Java 中有 Observable 类和 Observer 接口的内置等效项。然而，它们都是 IObserver、IObservable 接口并且它们是通用的——这使得它们非常强大。详细说明如何使用它们有[https://msdn.microsoft.com/library/ee850490(v=vs.110).aspx](https://msdn.microsoft.com/library/ee850490(v=vs.110).aspx)。

当然，您仍然可以编写自己的接口，或者使用事件/委托方法，而不是实现这些接口。**

# python - pandas 中值的唯一从零开始的 id

> ID：15376475
> 
> 赞同：2
> 
> 时间：2013-03-13T03:21:43.563
> 
> 标签：python, pandas

我在带有标识符列的 DataFrame 中有一些数据。

```
data = DataFrame({'id' : [50,50,30,10,50,50,30]}) 
```

对于每个唯一 ID，我想提出一个新的唯一标识符。我希望 id 是从 0 开始的连续整数。这是我到目前为止所拥有的：

```
unique = data[['id']].drop_duplicates()   
unique['group'] = np.arange(len(unique))
unique.set_index('id')
data = data.merge(unique, 'inner', on = 'id') 
```

这可行，但似乎有点脏。有没有更好的办法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-13T03:24:22.430

That is what [`pandas.factorize`](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.factorize.html) does:

```
data = pd.DataFrame({'id' : [50,50,30,10,50,50,30]})
print pd.factorize(data.id)[0] 
```

The output:

```
[0 0 1 2 0 0 1] 
```

[`numpy.unique`](https://docs.scipy.org/doc/numpy/reference/generated/numpy.unique.html) can also do this:

```
import numpy as np
print np.unique([50,50,30,10,50,50,30], return_inverse=True)[1] 
```

the output:

```
array([2, 2, 1, 0, 2, 2, 1]) 
```

the index outputed by `numpy.unique` is sorted by value, so the smallest value 10 is assigend to index 0\. If you want this result by using `factorize`, set `sort` argument to `True`:

```
pandas.factorize(data.id, sort=True)[0] 
```

# java - 从服务器获取所有信息还是分阶段进行？

> ID：15376478
> 
> 赞同：0
> 
> 时间：2013-03-13T03:21:56.850
> 
> 标签：java, gwt

我想获取 Cub Scout 的名称和图片、Cub Scout 详细信息、奖项和每个奖项的详细信息，并在视图中显示这些详细信息。最好从服务器端获取每组详细信息，将其传递回客户端并显示它，还是一次获取所有信息？

我会选择选项 2。但是，我认为我最好检查一下。

问候，

格林

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T03:24:02.333

Unless your query is returning some huge dataset, then multiple queries probably aren't necessary. If load times are too slow when you implement your queries, consider paging your results.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T07:19:28.243

获得异步调用的好处，尽可能少地加载数据，`on-load`并`Asynchronous calls`在需要数据时进行。

选择的两个主要原因`Asynchronous`：

**减少客户端和服务器之间的流量。**

**响应时间更快，因此提高了性能和速度。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T03:27:31.807

当显示来自 db 的所有记录的视图时，通常最好显示每行的最小数据，并带有指向每行更多详细信息的链接，以获得更好的用户体验和更少的查询加载时间。

现在，当用户单击更多详细信息时，应该获取该特定行的其他详细信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T03:36:47.703

我同意，如果信息的大小不是那么大，那么一次获取所有信息可能是一个好主意。一切都取决于您的用户体验和后端设计。

您是否希望根据用户交互显示信息？，您是否要在应用程序的其他地方重用该信息的一部分？您是否正在缓存查询结果？

你这样做吗..那么你可能会考虑有一些方法来获取信息。关于您的页面控制器，除非您不使用 ajax，否则您可以创建一个外观（这种[模式](http://en.wikipedia.org/wiki/Facade_pattern)）来集成所有这些部分方法。

如果您有任何问题，请告诉我。

谢谢！，@leo。

# jquery - last.fm JSON 数据/如何截断这个长数组？

> ID：15376484
> 
> 赞同：1
> 
> 时间：2013-03-13T03:22:35.210
> 
> 标签：jquery, json, last.fm

我对 JSON 有点陌生。我正在使用来自 last.fm 的 JSON 提要构建一个事件页面。

提要运行良好，但问题是当多个艺术家遇到同一事件时，例如音乐节。现在整个数组正在打印出来，逗号后没有空格，如果列出了许多波段，我不知道如何缩短数组。（例如，列出前十个波段。）

我的代码的相关部分是

```
$.getJSON(last_fm_url, function(data) {
  $.each(data.events.event, function(i, item){
    var eventTitle = item.title;
    var eventArtist = item.artists.artist;
  });
}); 
```

eventTitle 没什么大不了的，因为只有一个，但我不确定如何处理 eventArtist，如何将那长长的列表分成我可以使用的单个项目。

我的样本在这里：[http](http://bit.ly/ZI4Q5h) ://bit.ly/ZI4Q5h 。我的 jsfiddle 在这里：http: [//jsfiddle.net/SBvUm/2/](http://jsfiddle.net/SBvUm/2/)。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T19:06:36.700

如果你想要一个数组中的 10 个第一个项目，你应该使用 slice

```
 eventArtist = item.artists.artist.slice(0, 9); 
```

我更新了 jsfiddle：http: [//jsfiddle.net/SBvUm/3/](http://jsfiddle.net/SBvUm/3/)

为了更好地控制“toString”数组表示，您可以使用“join”。

例如：要在每个逗号后获取一个空格，您的最终代码应如下所示

```
 eventArtist = item.artists.artist.slice(0, 9).join(", "); 
```

您遇到的问题是，有时 item.artists.artist 不是数组而是字符串。在这种情况下，切片和连接将无法正常工作。

您的代码应如下所示

更新了小提琴：http: [//jsfiddle.net/SBvUm/7/](http://jsfiddle.net/SBvUm/7/)

```
 var eventArtist = item.artists.artist;
 if ( typeof(eventArtist["join"]) == "function"  ){
      eventArtist = eventArtist.slice(0,9).join(", ");
 } 
```

# batch-file - 将文件重命名为父文件夹、移动重命名文件并删除空文件夹的脚本

> ID：15376485
> 
> 赞同：1
> 
> 时间：2013-03-13T03:22:35.197
> 
> 标签：batch-file, batch-processing, batch-rename

想知道这里是否有人可以帮助我。我使用的是 Windows 7，并且在单个文件夹中有一系列电影和电视节目，我希望将其重命名为文件夹名称。例如：

```
../Media Files/Example Movie (2013)/EM2013.avi 
```

至：

```
../Media Files/Example Movie (2013)/Example Movie (2013).avi 
```

然后，我希望将新命名的文件移动到`Media Files`文件夹中，并删除（当时为空的）文件夹。所以：

```
..Media Files/Example Movie (2013).avi 
```

我已经搜索了一个解决方案，但只找到了一个或另一个的脚本（[如何通过批处理脚本根据他的文件夹名称重命名文件](https://stackoverflow.com/questions/14055495/how-to-rename-a-file-according-his-folder-name-via-batch-script)） - 我正在寻找一个可以一次性完成所有三件事的脚本定期将电影和电视节目添加到`Media Files`文件夹中。提前感谢任何可以提供帮助并道歉的人，如果之前有人问过类似的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T04:17:10.503

```
@ECHO OFF
SETLOCAL
SET target=.\media files
FOR /f "delims=" %%t IN (
 ' dir /b /ad "%target%" ' ) DO (
 FOR /f "delims=" %%f IN (
  ' dir /b /a-d "%target%\%%t\*.*" ' ) DO (
  ECHO MOVE "%target%\%%t\%%f" "%target%\%%t%%~xf"
  ECHO RD "%target%\%%t"
  )
)
PAUSE 
```

应显示所需的操作。验证后去掉ECHO关键字执行

# ios - 通过子视图或 NSMutableArray 枚举更快吗？

> ID：15376492
> 
> 赞同：1
> 
> 时间：2013-03-13T03:23:10.047
> 
> 标签：ios, objective-c, xcode, arrays, optimization

我真的在尝试优化我的移动代码`UIImageViews`。

我有一个主要的方法来枚举我所有的`UIImageViews`.

哪个枚举执行得更快，或者它们的执行完全相同？

示例 1：在此示例中，我列举`UIImageViews`了我`UIViewController`认为的所有内容

```
 for (UIImageView *imageView in self.view.subviews)
{
    ...
} 
```

示例 2：在此示例中，我列举`UIImageViews`了我的`NSMutableArray`. 该数组始终包含所有在中`UIImageViews`找到的内容`self.view.subviews`（它只是通常在 self.view.subviews 中找到的所有 UIImageViews 的副本，我只需要创建一次）

```
 for (UIImageView *imageView in self.imageViews)
{
    ...
} 
```

那么哪个示例应该为我提供更快、更优化的枚举呢？请注意，这些是由我设置的 CADisplayLink 不断枚举的。另请注意，`self.view.subviews`返回一个`NSArray`所以`NSArray`当我使用第一个枚举时可能会不断创建它，这让我认为该`NSMutableArray`方法会执行得更好并且开销更少，但我不确定。

编辑：所有子视图都是`UIImageViews`. 我也不确定在使用 subviews 属性时是否有任何重大开销，因为它看起来可能会做一些“幕后”工作来让我使用 NSArray。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T03:29:09.943

无需遍历子视图，您可以使用该`Tag`属性非常快速地完成它

例子：

添加标签以`UIimageView`通过`code or xib`

```
myImageView.tag = 1; 
```

然后，

```
 UIImageView *myImageView = ([[self.view viewWithTag:1] isKindOfClass:[UIImageView class]])?(UIImageView *)[self.view viewWithTag:1]:nil; 
```

**关于您的迭代代码**

假设所有子视图都是 UIImageViews 那么第一个代码将是最有效的。

```
for (UIImageView *imageView in self.view.subviews) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T04:41:30.297

如果您正在处理一个带有几个图像视图的简单视图，那么它可能并不重要，并且性能问题可以忽略不计。在 Instruments 中对这两种方法进行基准测试，如果有明显的差异，我会感到震惊。正如我在上面提到的，您对 a 的使用`CADisplayLink`可以比以往任何时候都产生更大的性能影响`NSMutableArray`。

但是，从概念上讲，随着您的应用程序变得越来越复杂，遵循[MVC](https://developer.apple.com/library/mac/#documentation/General/Conceptual/DevPedia-CocoaCore/MVC.html)模式会带来巨大的好处。在这个世界上，模型（可能由简单的可变数组或复杂的持久存储或网络服务支持）和视图（一旦优化它）之间存在巨大差异，可能仅代表整个模型的一个非常小的子集，采用延迟加载或出列和重用单元格/视图。

一个很好的例子是一个相册应用程序，你有很多相册，每个相册都有很多照片。尝试将所有这些图像加载到图像视图中会很疯狂，例如，如果其中许多图像视图在任何给定时间都不可见，更不用说加载对所有这些图像具有单独的图像视图了。因此，您的模型可能是一些对象结构，可以捕获完整的相册集和对照片的引用，但您的视图可能只有几个图像视图（例如“当前”图像、“下一个”图像和“以前的”图像）。

在这样的场景中，如果您开始尝试将所有图像加载到图像视图中并将所有这些图像视图添加为子视图，那么您会遇到麻烦。即使你这样做了，随着你变得越来越复杂，你可能会发现自己在加载图像视图时使用了图像的再现，这些图像被下采样到适合你的设备或你拥有的设备的分辨率。

因此，简而言之，看看您的简单示例，我认为在创建您`NSMutableArray`的 .您为呈现和优化用户界面所做的工作）。对于微小的应用程序可能无关紧要，但是随着您的应用程序变得越来越复杂（大量图像，用户界面中有些图像不可见（滚动到屏幕外），那么这种区别变得更加重要。

我们对您的应用了解得不够多，无法说出您在复杂性范围内的位置。听起来它很简单，可能无关紧要，但我认为尽早采用 MVC 思维过程是件好事。

### 参考

*   *核心能力*中的[模型视图控制器。](https://developer.apple.com/library/mac/#documentation/General/Conceptual/DevPedia-CocoaCore/MVC.html)
**   *Objective-C 编程概念中*的[模型-视图-控制器。](https://developer.apple.com/library/mac/#documentation/General/Conceptual/CocoaEncyclopedia/Model-View-Controller/Model-View-Controller.html#//apple_ref/doc/uid/TP40010810-CH14)*

# svn - Number of lines in each revision

> ID：15376494
> 
> 赞同：2
> 
> 时间：2013-03-13T03:23:18.573
> 
> 标签：svn

I am trying to get the number of lines in each revision of a particular file in the subversion repository. I know `svn log filename.txt` returns the number of lines changed for each version. I want the actual number of lines.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T10:15:28.183

`svn diff -c myrev``myrev`输出修订引入的差异。这是您可以在不应用启发式方法的情况下从机器获得的最大信息。

如果您需要添加的行数，请使用`|egrep '^\+'|wc -l`等对输出进行后期处理。

[statsvn](http://www.statsvn.org/)是一个用 Java 编写的 SVN 历史分析软件，您可以从中获得灵感（或作为测试时的参考）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T10:09:53.847

您可以使用以下功能：

```
function revLineStats() { # <file or url>
  local file=${1}
  for rev in $(svn log "${file}"  |awk '/^r[[:digit:]]+ \|/{print substr($1,2);}'|sort -g)
  do
    printf "%5i : %5i\n"  ${rev} $(svn cat -r ${rev} "${file}" |wc -l)
  done
} 
```

# ruby-on-rails-3 - Rails + Devise: How to invoke login and signup in different controllers?

> ID：15376495
> 
> 赞同：0
> 
> 时间：2013-03-13T03:23:25.240
> 
> 标签：ruby-on-rails-3, devise

This is the code for my ajax call

```
var data = {user: {password: password, email: email}};
$.post('auto_login',data,function(res){
  if(res.success){
    // successfully logged in
  }
  else{
    // failed log in
  }
}); 
```

This is the code in my controller

```
def auto_login
  @user = parmas[:user]

  # how do i invoke login here...
  # res = Sessions.new(@user)
  # x = true if res.save

  respond_to do |format|
    format.json{ render :json => { :success => x } }
  end
end 
```

I am doing this because I have a button which if a unregistered user clicks it will pop-up a modal window which ask for login info or register to the site. After the user fills up the required information, and if the system recognize that the data are valid, it will automatically redirect the user to a particular url.

Any help will do.

Thank you.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T04:18:34.643

Devise 允许您将登录表单放在任何地方。您可以将其放在部分中或使用 javascript 显示/隐藏。只需按照以下说明操作：

[https://github.com/plataformatec/devise/wiki/How-To:-Display-a-custom-sign_in-form-anywhere-in-your-app](https://github.com/plataformatec/devise/wiki/How-To:-Display-a-custom-sign_in-form-anywhere-in-your-app)

# r - Is there an 11 digits limit for time series numbers in x12 for R?

> ID：15376496
> 
> 赞同：1
> 
> 时间：2013-03-13T02:02:21.067
> 
> 标签：r, time-series

I am trying to use the x12 function in the x12 package for R. My problem is, when using time series object (tso) with monthly data and each observation is a large number (11 or more digits), the function is making a spec file which x12a.exe (binaries) can not read. x12 binaries does not allow the spec file to be wider then 132 column. In my example, the spec file have 144 columns, which I believe give me this error message in R:"ERROR: Input record longer than limit : 133". When I am using smaller numbers (fewer columns) in the spec file, there are no problem so far. When creating the spec file on my own, when using x12-arima for windows, I have never seen the problem before, because I always use the "free" format (one observation per line) for the series in x12-arima.

My question is: How do I make the format for the time series object = "free", or some how just one observation per line, in the "Rout.spc" file, while using x12 function in the x12 package for R?

I am using R version 2.15.2 and R-studio version 0.97.318

Attached is my example code in R-studio, output in R-console, and the spec file

### "Rstudio"

```
library(x12)
alt <- read.csv2("alt.csv",header=T)
tal <- ts(data=alt,start=c(1995,4),freq=12)
x12path <- shortPathName("C:\\Dokumenter\\X_12_Arima_Program\\x12a\\x12a.exe") 
x12tal <- x12(tso=tal,automdl=T,x12path=x12path,period=12,trendma=23) 
```

"Console"

```
C:\Dokumenter\Eksperimentering\x12>md gra 
C:\Dokumenter\Eksperimentering\x12>C:\DOKUME~1\X_12_A~2\x12a\x12a.exe Rout -g gra 
X-12-ARIMA Seasonal Adjustment Program
Version Number 0.3  Build 192
Execution began Mar 12, 2013  23.46.25 
 Reading input spec file from Rout.spc
 Storing any program output into Rout.out
 Storing any program error messages into Rout.err
 ERROR: Input record longer than limit : 133
Line    6:  start=1995.4
     ^
ERROR:  Expected an real number not "111"
 Program error(s) halt execution for Rout.spc
Check error file Rout.err
     Error messages generated from processing the X-12-ARIMA spec file 
     Rout.spc: 
Error in readx12Out(file, freq_series = frequency(tso), start_series = start(tso),  : 
  Error! No proper run of x12! Check your parameter settings. 
```

"The spec file: Rout.spc"

```
series{
title="R Output for X12a"
decimals=2
start=1995.4
period=12
data=(
14056669449 12785389868 12772341230 12342935128 12081332395 12110109950 12367542268 12911930417 12836340370 12214486074 12057940408 11555540809
10002847699 9199284760 8704422249 8492914782 8507816348 8470254675 8665139772 8653204621 9177471163 9676069791 9483990311 9825510541
7613345714 7168896536 7527318694 7721174940 7584049271 7586159794 7411383039 7565724342 7555103032 7148551906 7792379395 7493885451
6636374143 6390731897 6160711917 6003196233 5955867663 5868369296 5858314348 6098506333 6297774946 6074680955 6132163345 5875098456
5198306672 4891946405 4875765641 4834436461 4835096514 4804664875 4684550404 4733459404 5056773308 4912329843 5080643820 4568733581
4286693348 3898776528 3872776341 3842469172 3756957390 3782676505 3924066331 3810475969 3943259720 3665136687 3962811976 3449264257
3120637669 2813261665 2692920289 2652153941 2557247524 2658115616 2777287302 2688976703 2712004412 2596430893 2520548046 2455531008
2429263753 2187017586 2181610529 2139024441 2008850781 2049874584 2110715482 2218937956 2565352715 2635375627 2598584163 2435211675
2433625715 2350144562 2298764466 2242464445 2288528533 2532374821 2696862060 2877128057 3086285374 3309497319 3684989376 3709283880
3483967873 3294407926 3465439983 3546006197 3526166213 3625899404 3774201496 3941610691 4325836434 4466576126 4115121591 4036118609
3824882119 3552896925 3649624960 3570454122 3622089655 3662984491 3601306018 3604389348 3620162022 3401732239 3158217491 2896252892
2800864675 2630474256 2668229303 2631120097 2343131082 2163910930 2108285015 2067601541 2099699134 1803097392 1742652674 1626660618
1560369744 1448264771 1419659828 1547101381 1310783818 1358686467 1300281852 1315247637 1380387680 1286158497 1329769957 1272124521
1185603967 1125238745 1217223861 1265616553 1222054134 1279497332 1499392605 1810208712 2314301847 2908395453 3388479445 3441615991
3432688695 3691000321 3891303059 4111250935 4258776704 4586315450 5050122946 5156728599 5550332779 5769588984 5943764465 6032516246
5765718572 5521116586 5498458566 5374456514 5130561755 5219814632 5542173962 6883624616 7744043244 7913799960 7416210299 7127265644
6790509897 6562709494 6390985216 6126897801 5855125688 6259675447 6439114484 6634617502 6771498442 6674343925 6295709586 5890916431
5545655270 5315444742 5205711894 5115065476 4648229650 4724377012 4816989052 5049928441 5041395923   
)
}
transform{
function=auto
}
automdl {
maxorder=(3,2)
maxdiff=(1,1)
balanced=yes
savelog=(adf amd b5m mu)
}
forecast {
}
x11{
sigmalim=(1.5,2.5)
trendma=23
excludefcst=yes
final=(user)
appendfcst=yes
savelog=all
} 
```

# ruby-on-rails - ActiveRecord::RecordNotFound - 没有 ID 的产品

> ID：15376497
> 
> 赞同：0
> 
> 时间：2013-03-13T03:23:43.597
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我正在尝试在我的应用程序中创建评论，但是当我在控制器中执行以下操作时：

```
def create
    @product = Product.find(params[:product_id])
    @review = @product.reviews.create(params[:review])

   redirect_to product_path(product)
  end 
```

我明白了`Couldn't find Product without an ID`。我填写了表格，当它执行以下行时`@product = Product.find(params[:product_id])`，它似乎无法找到产品

**路线**

```
 resources :products do
    resource :reviews
  end 
```

**产品/show.html.erb**

```
 <%= form_for(@product.reviews.build) do |f| %>
   <div class="field">
     <%= f.label :title %>
     <br/>
     <%= f.text_field :title %>
   </div>
   <div class="field">
     <%= f.label :author %>
     <br/>
     <%= f.text_field :author %>
   </div>
   <div class="field">
     <%= f.label :content %>
     <br/>
     <%= f.text_area :content %>
   </div>
   <div class="field">
     <%= f.label :rating %>
     <br/>
     <%= f.number_field :rating %>
   </div
   <div class="actions">
     <%= f.submit %>
   </div>
  <% end %> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-13T03:26:42.480

将您的 form_for 更改为

```
form_for [@product, @product.reviews.build] do |f| 
```

这会将操作更改`/products/@product.id/reviews`为匹配您的嵌套路由

# python - When is "i += x" different from "i = i + x" in Python?

> ID：15376509
> 
> 赞同：222
> 
> 时间：2013-03-13T03:24:44.210
> 
> 标签：python, operators

I was told that `+=` can have different effects than the standard notation of `i = i +`. Is there a case in which `i += 1` would be different from `i = i + 1`?

* * *

## 回答 #1

> 赞同：339
> 
> 时间：2013-03-13T03:25:31.807

这完全取决于对象`i`。

`+=`调用该[`__iadd__`方法](http://docs.python.org/2/reference/datamodel.html#object.__iadd__)（如果它存在 -`__add__`如果它不存在则回退）而`+`调用[`__add__`方法](http://docs.python.org/2/reference/datamodel.html#object.__add__)¹或[`__radd__`在少数情况下调用方法](http://docs.python.org/2/reference/datamodel.html#object.__radd__)²。

从 API 的角度来看，`__iadd__`应该用于*就地*修改可变对象（返回已变异的对象），而`__add__`应该返回某物的*新实例*。对于*不可变*对象，这两种方法都返回一个新实例，但`__iadd__`会将新实例放在当前命名空间中，并与旧实例具有相同的名称。这就是为什么

```
i = 1
i += 1 
```

似乎增加了`i`。实际上，您会得到一个新整数并将其分配在“之上” `i`——失去对旧整数的一个引用。在这种情况下，`i += 1`与 完全相同`i = i + 1`。但是，对于大多数可变对象，情况就不同了：

作为一个具体的例子：

```
a = [1, 2, 3]
b = a
b += [1, 2, 3]
print a  #[1, 2, 3, 1, 2, 3]
print b  #[1, 2, 3, 1, 2, 3] 
```

相比：

```
a = [1, 2, 3]
b = a
b = b + [1, 2, 3]
print a #[1, 2, 3]
print b #[1, 2, 3, 1, 2, 3] 
```

注意在第一个示例中，由于`b`和`a`引用同一个对象，当我使用`+=`on时`b`，它实际上发生了变化`b`（并且也`a`看到了这种变化——毕竟，它引用的是同一个列表）。然而，在第二种情况下，当我这样做时`b = b + [1, 2, 3]`，这将获取`b`引用的列表并将其与新列表连接起来`[1, 2, 3]`。然后它将连接的列表存储在当前命名空间中`b`——不考虑`b`之前的行。

* * *

^(¹在表达式`x + y`中，如果`x.__add__`没有实现或者如果`x.__add__(y)`返回`NotImplemented` **和** *`x`并且`y`有不同的类型*，然后`x + y`尝试调用[`y.__radd__(x)`](http://docs.python.org/2/reference/datamodel.html#object.__radd__)。所以，如果你有)

^(`foo_instance += bar_instance`)

^(如果`Foo`没有实现`__add__`，或者`__iadd__`这里的结果是一样的)

^(`foo_instance = bar_instance.__radd__(bar_instance, foo_instance)`)

^(²在表达式中，*如果*类型是（例如）类型的子类`foo_instance + bar_instance`，`bar_instance.__radd__`将在之前尝试。这样做的理由是，从某种意义上说，这是一个“更高级别”的对象，因此应该可以选择覆盖的行为。`foo_instance.__add__` *`bar_instance``foo_instance``issubclass(Bar, Foo)``Bar``Foo``Bar``Foo`*)

 ** * *

## 回答 #2

> 赞同：68
> 
> 时间：2013-03-13T03:29:52.890

在幕后，`i += 1`做这样的事情：

```
try:
    i = i.__iadd__(1)
except AttributeError:
    i = i.__add__(1) 
```

虽然`i = i + 1`做这样的事情：

```
i = i.__add__(1) 
```

这有点过于简单了，但你明白了：Python`+=`通过创建一个`__iadd__`方法和一个`__add__`.

目的是可变类型，如`list`，将在其中改变自己`__iadd__`（然后 return `self`，除非你正在做一些非常棘手的事情），而不可变类型，如 ，`int`不会实现它。

例如：

```
>>> l1 = []
>>> l2 = l1
>>> l1 += [3]
>>> l2
[3] 
```

因为`l2`是同一个对象`l1`，而你发生了变异`l1`，你也发生了变异`l2`。

但：

```
>>> l1 = []
>>> l2 = l1
>>> l1 = l1 + [3]
>>> l2
[] 
```

在这里，你没有变异`l1`；相反，您创建了一个新列表 ，`l1 + [3]`并将名称`l1`重新指向它，并`l2`指向原始列表。

（在该`+=`版本中，您还重新绑定`l1`了，只是在这种情况下，您将其重新绑定到`list`已经绑定的相同位置，因此您通常可以忽略该部分。）

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-08-23T14:57:32.200

这是一个直接比较的`i += x`示例`i = i + x`：

```
def foo(x):
  x = x + [42]

def bar(x):
  x += [42]

c = [27]
foo(c); # c is not changed
bar(c); # c is changed to [27, 42] 
```*

# kendo-ui - Kendo UI editor jsp wrapper beta - Spring 3.1 - image browser - server returns 406

> ID：15376511
> 
> 赞同：0
> 
> 时间：2013-03-13T03:24:49.993
> 
> 标签：kendo-ui, spring-3

I'm trying to use the jsp beta wrapper to implement Kendo UI image browser and keep getting 406 response from the server.

I'm using Spring 3.1 and the Kendo editor is just an add-on to a functional project. Hibernate dao layer, etc. work fine, so I'm thinking dispatcher-servlet config is ok, I'm getting no runtime or compile errors.

I'm trying to get to the point where I can get a list of images from the server.

JavaScript configuration:

```
imageBrowser: {
    transport: {
        read: {
            url: "/brush/imagebrowser/read.html" ,
            dataType: "json"
        },

        destroy: "/brush/imagebrowser/destroy.html",
        create: "/brush/imagebrowser/createDirectory.html",
        uploadUrl: "/brush/imagebrowser/upload.html",
        thumbnailUrl: "/brush/imagebrowser/thumbnail.html",
        imageUrl: "/brush/art/upload/thm/"
    },
    path: "/art/upload/thm/",
    fileTypes : ".png,.gif,.jpg,.jpeg, .JPG"
} 
```

Controller:

```
@RequestMapping( value = {"/imagebrowser/read.html"}, method = RequestMethod.POST, headers="Accept=*/*",   produces = "application/json")
public @ResponseBody List<ImageBrowserEntry> read(String path) {

    List<ImageBrowserEntry> l = imageBrowser.getList( path );
    return l;
} 
```

Modifications in ImageBrowserDaoImpl:

```
private final String RootFolder = "/";
private final String CopyFolder = "/";
private final String PrettyName = ""; 
```

When I put a breakpoint in debugger on `'return l'` in the controller method I can see the list contains images as I'd expect.

I've added

```
org.codehaus.jackson:jackson-core-asl:1.9.1222
org.codehaus.jackson:jackson-mapper-asl:1.9.9 
```

jars to project ( using IntelliJ 12 for IDE )

Through a little bit of trial and error I got to the 406 error, but beyond that it's looking a little hopeless.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T11:57:14.500

弄清楚了。我的调度程序 servlet 不完整。添加以下内容并解决随后出现的更多问题后，一切都很好。

1\. 2\. 另外，改变了元素 `imageUrl: "/brush/{0}"`- 错过了卷曲和零。

但是，我不清楚的是为什么我的 js 文件中的这个配置有效：

```
01\.            transport: {
02\.                read: {
03\.                    url: "/brush/imagebrowser/read.html" ,
04.//                    contentType: "application/json"
05\.                    dataType: "json"
06\.                },
07\. 
08\. 
09\.                destroy: "/brush/imagebrowser/destroy.html",
10\.                create: "/brush/imagebrowser/createDirectory.html",
11\.                uploadUrl: "/brush/imagebrowser/upload.html",
12\.                thumbnailUrl: "/brush/imagebrowser/thumbnail.html",
13.//
14\.                imageUrl: "/brush/{0}"
15\.            },
16\.            path: "/art/upload/thm/" 
```

我现在遇到的问题：第 14 行有我的本地上下文“/brush/”和“mysery”参数。所以默认值为 0，但它还能是什么呢？

# ksh - 使用 ksh93，如何安全地将二维索引数组初始化为 ( () )

> ID：15376514
> 
> 赞同：1
> 
> 时间：2013-03-13T03:24:56.920
> 
> 标签：ksh

使用 ksh93，`typeset -a arr=( () )`将创建`arr[0]`为空的复合 var 而不是空的索引数组：

```
$ typeset -a arr=( () )
$ typeset -p arr[0]
typeset -C arr[0]=()
$ 
```

那么在声明var时如何初始化`arr[0]`一个空的索引数组呢？`arr`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T12:17:27.687

```
$ ( typeset -a a[0]=(); typeset -p a 'a[0]' )
typeset -a a=( () )
typeset -a a[0] 
```

我想没有人肯定知道。我问是否有人可以在[您的线程](http://list.research.att.com/pipermail/ast-users/2012q4/003720.html)中解释 ksh 看似随机声明背后的一些逻辑，但从未得到答复。

我相信对这个特定问题的解释是，将多维索引数组视为“可嵌套的”是错误的，尽管语法强烈建议这样做。整个数组都是一种类型，因此一旦声明了数组，就不能单独将“空集合”设置为第零个元素。唯一真正的可嵌套类型是复合类型，因此通过尝试在`a[0]`不至少为 分配空字符串的情况下创建向量`a[0][0]`，它假定它必须是复合的。

换句话说，一次`typeset -a a`设置类型`a`和所有子元素，这样您就可以继续向更高维度添加值，因为它们不可能有单独的属性而不是复合的。

我认为上面的语法只是一个漏洞，它允许设置隐式应用于子元素的属性`a`。请注意，即使我像您一样声明它，使用索引赋值语法将值附加到数组也会自动将类型恢复为索引，（因为复合将期望声明命令或赋值作为元素）。

```
 $ ( typeset -a a=( () ); typeset -p a 'a[0]'; a[0]+=(x y z); typeset -p a 'a[0]' )
typeset -a a=(())
typeset -C a[0]=()
typeset -a a=(([1]=x [2]=y [3]=z) )
typeset -a a[0]=([1]=x [2]=y [3]=z) 
```

当然，我还是有很多不明白的地方。LMK 如果您发现任何特别有趣的事情。:) 我认为我们是唯一使用这些功能的人......该死的几乎不可能找到示例代码。

另外，我已经开始[在此处](http://wiki.bash-hackers.org/syntax/arrays#bugs_and_portability_considerations)记录一些 ksh/bash/zsh 样式的数组比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T03:19:08.850

`93v- 2013-02-13`我发现了一种使用ksh的较新版本（尝试过）的黑客方法：

```
$ echo ${.sh.version}
Version AJMP 93v- 2013-02-13
$ typeset -p arr
$ typeset -a arr=( ( ${not_existing_array[@]:0:0} ) )
$ typeset -p arr
typeset -a arr=( () )
$ typeset -p arr[0]
typeset -a arr[0]
$ 
```

这是合理的，因为索引数组的空子集仍然是索引数组。:)

# java - java泛型歧义

> ID：15376515
> 
> 赞同：2
> 
> 时间：2013-03-13T03:24:57.280
> 
> 标签：java, wildcard, bounded-wildcard

如果有一个`node<E>`具有两个操作的泛型类型，比如`setData(E Type)`and`E getData()`并且 let`s0`是的一个实例，`node`那么`node<? extends Number>`为什么编译器`s0.setData(Number Type)`至少不允许我使用呢？我可以理解为什么不允许使用其他类型，但为什么不允许`setData`放入 Number 类型，因为我们确定节点的类型至少是 number？

我的代码如下所示：

```
class Node<E> {
private E data;
// ...
public void setData(E obj) { data = obj; } // (1)
public E getData() { return data; } // (2)
// ...
}
Node<? extends Number> s0 = new Node<Number>();
s0.setData(200); //this is not allowed why?
Node<Number> s0 = new Node<Number>();
s0.setData(100); //But this is allowed! 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T03:58:59.607

您已声明类型 a `Node<? extends Number>`。您*分配*给它的内容无关紧要。

就编译器而言，它可以是以下任何一种：

*   `Node<Integer>`
*   `Node<Float>`
*   `Node<Double>`
*   ETC

而且它无法知道哪种类型是*实际*类型。

您正在尝试传递 (auto-boxed) `Integer`，但编译器无法知道*实际*类型可以接受`Integer`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T03:32:05.690

实质上：因为 a`Node<Integer>`例如，不是 a `Node<Double>`。[它甚至不是一个`Node<Number>`.](https://stackoverflow.com/questions/2745265/is-listdog-a-subclass-of-listanimal-why-arent-javas-generics-implicit)

例子：

```
Node<? extends Number> s0 = new Node<Integer> ();
s0.setData(Double.valueOf(2.0d)); //that's not possible... 
```

实际上，因为我们不知道泛型类型`s0`是`setData`什么，所以除了`null`......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T03:31:17.800

假设您有参考`Node<? extends Fruits> s0`。这意味着它可以指向

```
Node<? extends Fruit> s0 = new Node<Fruit>; 
```

但是也

```
Node<? extends Fruit> s0 = new Node<Apple>; 
```

和

```
Node<? extends Fruit> s0 = new Node<Banana>; 
```

您如何看待，让它添加`Fruit`到香蕉或苹果中是否安全？还是香蕉变苹果？如果 Apple 和 Banana 包含 Fruit 没有的方法怎么办。

# php - PHP - 检查列是否包含字符串？

> ID：15376516
> 
> 赞同：-2
> 
> 时间：2013-03-13T03:24:59.603
> 
> 标签：php, string

我想要的是使用 PHP 创建一个 API，它允许我的程序检查表中的列是否包含某个字符串。

例如，假设我输入

```
www.mywebsite.com/api.php?word="ANY WORD" 
```

如果数据库是否包含该单词，脚本将回显 true 或 false。

我正在使用 MySQL 数据库，但我不知道该怎么做。

* * *

```
<?php

try {
  $username = '******';
  $password = '******';
  $conn = new PDO('mysql:host=******;dbname=**********', $username, $password);
  $conn->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

} catch(PDOException $e) {

echo 'ERROR: ' . $e->getMessage();

}

  $stmt = $pdo->prepare('SELECT COUNT(*) FROM wordlist WHERE words LIKE :aword');
  $stmt->execute(array('aword' => "%{$_GET['word']}%"));
  return ($stmt->fetchColumn() != 0);
?> 
```

我做错了什么？我收到这个错误

> 致命错误：在第 11 行 ***** 中的非对象上调用成员函数 prepare()

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T03:46:29.210

你需要一些类似的东西：

```
$pdo = new PDO(...);
$stmt = $pdo->prepare('SELECT COUNT(*) FROM `atable` WHERE `afield` LIKE :aword');
$stmt->execute(array('aword' => "%{$_GET['word']}%"));
return ($stmt->fetchColumn() != 0); 
```

`afield`在示例中，我们在表中的数据库字段内的 GET 参数中搜索单词`atable`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T03:47:25.947

您可以检索 url 中的单词并使用它来查询您的数据库。

对于您的示例：www.mywebsite.com/api.php?word="ANY WORD"

```
$keyword = $_GET["word"] 
```

现在您可以创建一个带有一个或多个 LIKE 的 sql 语句。

```
$query = 'SELECT * FROM mytable WHERE column1 LIKE("%".$keyword."%") OR colomn2 LIKE("%".$keyword."%") 
```

希望能帮助到你！

# android - 如何查找连接到 Wifi AP 的用户数 (Android)

> ID：15376517
> 
> 赞同：3
> 
> 时间：2013-03-13T03:25:06.180
> 
> 标签：android, wifi, router

我想知道如何返回连接到路由器的 MAC 地址，以便计算有多少用户连接到特定 AP？我一直在对此进行研究，但没有找到太多帮助。我确实发现的一件事是，您可以通过解析 /proc/net/arp 文件获取此信息，但是，根据我的理解，要使其正常工作，您的手机必须充当 AP 本身。我正在尝试编写一个能够返回特定路由器上的用户数量的 Android 应用程序。这是学校项目的一部分。该应用程序仅用于学习目的，因为我将使用它来扫描不是我自己的路由器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T03:29:22.203

如果您的 Android 是 AP，您就有答案了。但是，如果 AP 是您自己设备外部的路由器并进行控制，这将意味着通过管理 API 进行连接以获取路由器的信息。据我所知，这种 API 没有标准，因此可能会通过他们可能提供的任何方法（如果有的话）与一些主要制造商和型号进行接口。并且不要忘记您仍然需要对路由器的管理员访问权限（管理员用户 ID/密码）。

[关于类似主题的 SO Q/A](https://stackoverflow.com/questions/3017893/programmatically-changing-wireless-router-settings-netgear-ideally)

# c# - 使用 SharpZipLib 压缩文件时出现“无效文件夹”错误

> ID：15376519
> 
> 赞同：2
> 
> 时间：2013-03-13T03:25:21.400
> 
> 标签：c#, asp.net, zip, sharpziplib

我有这个功能，我用它来压缩用户会话中的文件列表，然后将其流式传输到用户的浏览器以供下载：

```
public static void DownloadAllPhotos()
{
    HttpContext.Current.Response.AddHeader(
        "Content-Disposition", "attachment; filename=Photos.zip");
    HttpContext.Current.Response.ContentType = "application/zip";

    List<string> photos= new List<string>();

    if (HttpContext.Current.Session != null && 
        HttpContext.Current.Session["userPhotos"] != null)
    {
        photos = (List<string>)HttpContext.Current.Session["userPhotos"];
    }

    using (var zipStream = new 
        ZipOutputStream(HttpContext.Current.Response.OutputStream))
    {
        foreach (string photoUrl in photos)
        {
            byte[] fileBytes = File.ReadAllBytes(photoUrl);

            var fileEntry = new ZipEntry(
                Path.GetFileName(photoUrl))
            {
                Size = fileBytes.Length
            };

            zipStream.PutNextEntry(fileEntry);
            zipStream.Write(fileBytes, 0, fileBytes.Length);
        }

        zipStream.Flush();
        zipStream.Close();

        // reset session
        HttpContext.Current.Session["userPhotos"] = new List<string>();
    }
} 
```

当用户在他们的会话中有照片 url，并且他们点击一个按钮来调用这个函数时，文件被压缩并在用户的浏览器中开始下载。

但是当我尝试打开压缩文件时，我得到了这个错误：

> Windows 无法打开该文件夹。
> 
> 压缩文件夹“{Path to my file}”无效。

我做错了什么导致这个错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T03:32:26.393

在[这个例子](https://github.com/icsharpcode/SharpZipLib/wiki/Zip-Samples#wiki-anchorCreateIIS)`Response.Flush`中检查and的位置，看看写类似的东西是否能解决问题。`ZipEntry.CleanName`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-16T21:03:19.753

同样根据@cfeduke 回答中的[示例，“](https://github.com/icsharpcode/SharpZipLib/wiki/Zip-Samples#wiki-anchorCreateIIS)**在 IIS 中创建 Zip 作为浏览器下载附件”中**有一条评论，建议更改 Response.ContentType = "application/octet-stream" 而不是 "application/zip"

> // 如果浏览器接收到损坏的 zip 文件，IIS 压缩可能会导致此问题。一些成员发现 //Response.ContentType = "application/octet-stream" 已经解决了这个问题。可能特定于 Internet Explorer。

为我工作。而且它不是 IE 特定的（我使用 Chrome）。

# android - ACL_CONNECTED 和 AC_DISCONNECTED 的 Android 蓝牙广播接收器问题

> ID：15376529
> 
> 赞同：3
> 
> 时间：2013-03-13T03:27:00.243
> 
> 标签：android, bluetooth, broadcastreceiver

我正在编写一个应用程序来检测是否连接了蓝牙设备。在做了一些研究之后，我发现最好的方法是使用带有一些蓝牙相关意图过滤器的广播接收器。

```
<receiver android:name=".BTReceiver" >
            <intent-filter>
            <action android:name="android.bluetooth.BluetoothDevice.ACTION_ACL_CONNECTED" />
            <action android:name="android.bluetooth.BluetoothDevice.ACTION_ACL_DISCONNECTED" />
            <action android:name="android.bluetooth.BluetoothDevice.ACTION_ACL_DISCONNECT_REQUESTED" />
            <action android:name="android.bluetooth.a2dp.profile.action.CONNECTION_STATE_CHANGED" />             
            </intent-filter>  
        </receiver> 
```

这是我的蓝牙接收器课程。

```
@Override
    public void onReceive(Context context, Intent intent) {     
        String action = intent.getAction();
        if(action.equals("android.bluetooth.BluetoothDevice.ACTION_ACL_CONNECTED") || action.equals("android.bluetooth.a2dp.profile.action.CONNECTION_STATE_CHANGED") ){
            Log.d("Z","Received: Bluetooth Connected");
        }
        if(action.equals("android.bluetooth.BluetoothDevice.ACTION_ACL_DISCONNECTED") ||action.equals("android.bluetooth.BluetoothDevice.ACTION_ACL_DISCONNECTED_REQUESTED")){
            Log.d("Z","Received: Bluetooth Disconnected");
        }
        Log.d("Z",action);
} 
```

当我打开蓝牙耳机并将其连接到手机时，我会收到两次“android.bluetooth.a2dp.profile.action.CONNECTION_STATE_CHANGED”。当我断开蓝牙耳机时，广播接收器不运行或接收任何内容。所以我从来没有收到我的蓝牙断开日志消息。我正在使用两个蓝牙权限，我认为这是让它工作所必需的。

```
 <uses-permission android:name="android.permission.BLUETOOTH" />
    <uses-permission android:name="android.permission.BLUETOOTH_ADMIN" /> 
```

我真的可以使用任何关于这里有什么问题的信息。谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-13T03:49:47.647

你的动作错了。

```
<receiver android:name=".BTReceiver" >
        <intent-filter>
        <action android:name="android.bluetooth.device.action.ACL_CONNECTED" />
        <action android:name="android.bluetooth.device.action.ACL_DISCONNECTED" />
        <action android:name="android.bluetooth.device.action.ACL_DISCONNECT_REQUESTED" />           
        </intent-filter>  
    </receiver> 
```

去除那个

```
|| action.equals("android.bluetooth.a2dp.profile.action.CONNECTION_STATE_CHANGED") 
```

因为 CONNECTION_STATE_CHANGED 可以连接、断开等。所以你的第一个**if**总是正确的。您不需要注册 android.bluetooth.a2dp.profile.action.CONNECTION_STATE_CHANGED，除非您对 a2dp 执行任何特定操作。

因此，应该是

```
if(action.equals("android.bluetooth.device.action.ACL_CONNECTED") {
        Log.d("Z","Received: Bluetooth Connected");
    }
    if(action.equals("android.bluetooth.device.action.ACL_DISCONNECTED") ||action.equals("android.bluetooth.device.action.ACL_DISCONNECT_REQUESTED")){
        Log.d("Z","Received: Bluetooth Disconnected");
    } 
```

# html - 将此 div 放置在其容器的中心？

> ID：15376530
> 
> 赞同：0
> 
> 时间：2013-03-13T03:27:06.440
> 
> 标签：html, css, position

> 在尝试解决此问题之前，请仔细阅读我正在处理的约束。

## 约束

1.  `.pictureContainer`需要保留`position: relative`（因为我有一个绝对相对于它定位的悬停菜单。）

2.  图像可能小于 80%，`#slide`在这种情况下，它仍然必须居中对齐。这翻译成什么？你不能简单地做一个`margin: 0 10%`因为是的，这将使这个特定情况居中，但它不会满足图像小于 80% 宽度的情况`#slide`

    您好，我是位于另一个 inline 块元素旁边的 inline-block 元素，这不是很好吗？我认为那太棒了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T03:35:01.650

首先尝试包装你的`div` `class="pictureContainer"`并将css提供给`wrapper` html

```
<div class="wrapper">        
    <div class="pictureContainer">
                <img id="currentPic" class="slideShowPic" src="http://blog.gettyimages.com/wp-content/uploads/2013/01/Siberian-Tiger-Running-Through-Snow-Tom-Brakefield-Getty-Images-200353826-001.jpg"  width="350" alt="IMAGE" />

                <div class="hoverMenu">
                    <a class="nextSlide" href="#">
                        >
                    </a>
                    <a class="prevSlide" href="#">
                        <
                    </a>
                </div>
          </div>
    </div> 
```

css

```
.pictureContainer {
    width: 350px;
    position: relative;
    background: red;
    padding: 0;
    margin: 0;
}

#currentPic {
    vertical-align: top;
}
.wrapper {
    margin:auto;
    width: 350px;
} 
```

工作[演示](http://jsfiddle.net/FZzr6/1/)
希望这有帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T04:09:43.620

为什么不简单地添加：

```
text-align: center; 
```

到pictureContainer css 声明。它将任何图像居中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T04:25:53.813

就像@jhunlio 的回答所暗示的那样：

使用 follwong css 在它周围创建一个包装器

```
.wrapper {
    margin:auto;
    width: 600px;
} 
```

这里的技巧是宽度是固定的，边距设置为自动。

这意味着边距（外部空间）将以固定宽度均匀分布在包装器的两侧。因此它在中间。

# visual-studio - Orchard CMS 中剃刀视图中的智能感知中断

> ID：15376532
> 
> 赞同：2
> 
> 时间：2013-03-13T03:27:13.207
> 
> 标签：visual-studio, orchardcms

我在全新安装 Orchard CMS 时打开的所有视图在调用 Orchard 中某处定义的方法时显示大量红色波浪状错误。

样品方法：

*   展示
*   有文本
*   风格
*   集元
*   吨

等等。

这个主题（thememachine）中的 web.config 确实定义了这个：`add namespace="Orchard.Mvc.Html"`

让我补充一点，必须完全使用动态工作是一个*巨大*的失望，不仅仅是作为一个附加组件，而是作为一个坚实的基础。像这样的问题（对于您需要对模型和视图中的 Orchard 命令执行的大部分操作没有智能感知！）说明了一切。因此，我们在果园视图中工作时没有/很少有智能感知吗？

无论如何，主要的问题是：这样的 IDE 错误（不是编译错误）是每个人都看到的吗，有没有什么可做的呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T00:57:08.707

尽管 Orchard 大量使用动态类型，但您所看到的并不是因为这个。从您列出的成员中，实际上只有 Display 是动态的，因此您应该获得完整的 IntelliSense，当然它们也没有错误。

您遇到的问题很可能是您机器上 Razor IntelliSense 的一般问题。尝试研究“Razor IntelliSense not working”，你会得到一些指示。我遇到的可能问题如下：

*   如果您使用的是 VS 2010，请检查是否仅安装了 MVC 3 Tooling。如果您安装了 MVC 2 Tooling，请将其卸载。
*   如果您使用的是 VS 2012 的预发布版本，例如 RC 升级到已发布版本。

# javascript - JavaScript 正则表达式替换 - 为什么一个有效，而另一个无效？

> ID：15376533
> 
> 赞同：0
> 
> 时间：2013-03-13T03:27:21.867
> 
> 标签：javascript, regex, replace

我从另一个站点抓取了以下 JavaScript 正则表达式替换以去除一些无效字符：

```
str = str.replace(/[^\u000D\u00B7\u0020-\u007E\u00A2-\u00A4]/g,''); 
```

但是，我注意到它没有捕捉到 \00B7 （ISO-8859-1 中心点字符）的出现。

但是，如果我分两步完成，它会起作用：

```
str = str.replace(/\u00B7/g,'');
str = str.replace(/[^\u000D\u00B7\u0020-\u007E\u00A2-\u00A4]/g,''); 
```

第一次替换似乎包含在第二次替换中。有人可以向我解释为什么第二行不能单独工作。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T03:41:36.430

第一种和第二种模式完全不同。模式一替换 \u00B7，而模式二替换模式中未列出的所有字符。从模式二中删除克拉，这应该可以解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T05:10:27.077

只是要清楚：

```
/[^\u000D\u00B7\u0020-\u007E\u00A2-\u00A4]/ 
```

匹配所有**不在**集合中的字符。因此，要匹配 \u00B7（并将其替换为 ''），请将其从模式中删除：

```
/[^\u000D\u0020-\u007E\u00A2-\u00A4]/ 
```

ASCII 字符集在[http://www.asciitable.com/](http://www.asciitable.com/)上给出，很可能是您想要保留的字符集。\u0020-\u007E 范围涵盖了大多数感兴趣的常见集合，其他通常不想要。

\u000D 是回车，我会调查你是否真的需要 u00A2、u00A3 和 u00A4。

# c++ - 如何使用相同的 stringstream 对象标记两个不同的字符串？

> ID：15376535
> 
> 赞同：3
> 
> 时间：2013-03-13T03:27:28.670
> 
> 标签：c++, tokenize

如何用相同的`stringstream`对象标记两个不同的字符串？

我正在尝试以下代码，但它不起作用：

```
using namespace std;

void check()
{
        stringstream s( "This is a test");
        string token;

        while (s>>token)
        {
              cout<< token <<'\n';
        }
        s.str("hello world");
        while ( s>> token )
        {
              cout<< token <<'\n';
        }
}

int main()
{
    check();
    int z;
    cin>>z;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T03:29:33.973

您需要通过执行[s.clear(); 来重置流标志；](http://www.cplusplus.com/reference/ios/ios/clear/)：

```
stringstream my_stringstream( "This is a test");
string token;

while ( my_stringstream >> token )
{
      cout<< token <<'\n';
}

my_stringstream.str("hello world");
my_stringstream.clear();

while ( my_stringstream >> token )
{
      cout<< token <<'\n';
} 
```

`>>`当您在第一个 while 循环中到达流的末尾时，将设置 eof 位。这就是为什么您需要调用 clear() 来重置流，如答案所示。
感谢 Jesse Good 的补充。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T03:37:34.670

这一行：

```
while (s >> token) 
```

......相当多。除了获取`token`from之外`s`，[operator>>](http://en.cppreference.com/w/cpp/io/basic_istream/operator_gtgt)还返回流 ( `s`)。`while`然后`s`通过[将其转换为 a `bool`(since C++11) 或 a `void*`(before C++11)](http://en.cppreference.com/w/cpp/io/basic_ios/operator_bool)来评估它。这*与*`!`[`fail()`](http://en.cppreference.com/w/cpp/io/basic_ios/fail). _ 现在，如果`fail()`返回`true`并且您已经跳出第一个循环，那么您将不会进入第二个循环`eofbit`，直到`badbit`和/或`failbit`已被重置。您可以使用 重置这些[`clear()`](http://en.cppreference.com/w/cpp/io/basic_ios/clear)，如下所示：

```
void check()
{
    stringstream s( "This is a test");
    string token;

    while (s >> token)
    {
        cout << token << '\n';
    }

    std::cerr << "Before s.clear(), s.fail() is " << std::boolalpha << s.fail() << std::endl;

    s.clear();

    std::cerr << "After s.clear(), s.fail() is " << std::boolalpha << s.fail() << std::endl;

    s.str("hello world");
    while (s >> token)
    {
        cout << token << '\n';
    }
} 
```

[看它跑](http://liveworkspace.org/code/1AHuUZ%240)！

# sql-server-2008 - SQL CE 3.5 SP 2，SqlCeEngine.Compact() 同步错误

> ID：15376537
> 
> 赞同：0
> 
> 时间：2013-03-13T03:27:36.127
> 
> 标签：sql-server-2008, compact-framework, sql-server-ce, microsoft-sync-framework, .net-cf-3.5

我有一个坚固的设备应用程序 (.NET CF)，它使用 SQL CE 3.5 SP 2 数据库，当设备插入底座时，它通过 USB 使用 Microsoft Sync Framework 2.1 与 SQL Server 2008 同步。

最近，设备应用程序在使用 SDF 时遇到了一些数据库损坏，因此我实现了一些在启动时运行的维护代码，这些代码使用 SqlCeEngine 验证、修复和压缩方法。基本上，应用程序使用验证方法检查 SDF，对其进行修复（或失败），然后在启动应用程序之前对其进行压缩。

从那时起，一切都运行良好，所以我刚刚实现了每次设备同步时执行相同例程的代码，当我发现这篇来自 Microsoft 的知识库文章时：

**对同步到中央数据库服务器的 SQL Server Compact 3.5 客户端数据库执行 SqlCeEngine.Compact 方法后，可能无法上传对客户端数据库的某些更改**- [http://support.microsoft.com/kb/967502#适用于](http://support.microsoft.com/kb/967502#appliesto)

这篇文章很模糊，没有提供关于为什么会发生这种情况的信息，或者它是否已在 SQL CE 3.5 SP 2 中修复。任何人都可以提供更多关于为什么会发生这个问题的信息吗？

另外文章建议的解决方法是使用 Shrink 方法，但考虑到它们（本质上）执行相同的功能，为什么我们可以使用 Shrink 但不能使用 Compact？

我知道这篇文章是指 Microsoft Synchronization Services for ADO.NET 而不是 Sync Framework 2.1，但我只是想检查一下这个问题是否适用于我的情况。我的理解是 ADO.NET 的 Sync Services 建立在 Sync Framework 之上，它允许使用 WCF 服务进行同步。

我已经运行了测试，我在客户端和服务器上都进行了更改（双向同步），压缩 SDF，然后与服务器同步，一切似乎都在正确同步，但我想确定一下。

如果有人可以提供一些有关这方面的信息，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T11:56:10.947

Compact() 方法创建一个新数据库，有时同步锚实际上会被重置

见： http: [//support.microsoft.com/kb/969858](http://support.microsoft.com/kb/969858)

if you're using it on Windows Mobile devices, that's the Synchronization for Services for ADO.NET (Devices) that you're using.

# java - 获取正确的多边形以显示在图像中

> ID：15376542
> 
> 赞同：0
> 
> 时间：2013-03-13T03:28:04.187
> 
> 标签：java, polygon

现在真的需要你的帮助

我有一些检测结果。

![图 1](../Images/3a7432340bdee3cf5bd4fdffddbb50ce.png)

我希望在这张未旋转的图像上显示这个结果（请忽略蓝色框）

![图 2](../Images/8978d45f3af01599ddf2b8f9f25d7b19.png)

我的算法逻辑如下

鉴于黄色框的坐标参考参考系（图 1 的左上角），我试图参考左上角的参考系找到黄色框的坐标图 1 中的内部图像。

所以我使用了基本的trigno（图1右下角的直角三角形）来获取内部图像左上角的坐标，并参考该点找到黄色框的坐标。

之后我使用，因为我想在图像 2 上显示结果，我使用内部图像的中心作为我的旋转点，并将黄色框相对于该中心的坐标转换为内部图像的原点（左上角）手角）并使用此矩阵旋转：

![在此处输入图像描述](../Images/eae416498f50604930014edd1ff20b00.png)[x,y] 其中 [x,y] 代表我的分数

我在图像上生成的多边形是这样的：

![在此处输入图像描述](../Images/d8d22e3f30f76b6abb6d2e33cc610f32.png)

我的教授看了看，说这是错误的。

我已经数不清我经历了多少次逻辑和实现......这对我来说似乎是正确的。有好心人能帮帮我吗？

这是我的代码的一部分：

//135度旋转图像的代码

```
 else if(nameForcompare.equals("135")){
       angle = 225;
       minPoint.set_y(catYmin); minPoint.set_x(catXmin); maxPoint.set_y(catYmax); maxPoint.set_x(catXmax);
       //Show detection results of rotated image
       g5.setColor(Color.YELLOW);
       g5.drawRect((int)minPoint.get_x(), (int)minPoint.get_y(), (int)(maxPoint.get_x()-minPoint.get_x()), (int)(maxPoint.get_y()-minPoint.get_y()));

       rotatedX = Double.parseDouble(originalWidth)*Math.cos(Math.toRadians((int)45));
         if(catXmin < rotatedX){
              o = imageHeight - catYmin;
              a = rotatedX - catXmin;
              theta = Math.atan(o/a);
              h = (o/Math.sin(theta));

           if(theta >= Math.toRadians((int)45)){   
              thetaZ = theta - Math.toRadians((int)45);

              oZ = h*Math.sin(thetaZ); //ycoordinate
              aZ = h*Math.cos(thetaZ); //xcoordinate

              varX = checkPointsBeforeRotationX(aZ);
              varY = checkPointsBeforeRotationY(oZ);
           }
           else{
              thetaZ = Math.toRadians((int)45) - theta;
              oZ = 0;                  //ycoordinate
              aZ = h*Math.cos(thetaZ); //xcoordinate

              varX = checkPointsBeforeRotationX(aZ);
              varY = checkPointsBeforeRotationY(oZ);                  

           }
              minPoint.set_x(varX);
              minPoint.set_y(varY);

         }
         else if(catXmin == rotatedX){
             theta = Math.toRadians((int)45);
             h = imageHeight - catYmin;

             o = h*Math.sin(theta); //ycoordinate
             a = h*Math.cos(theta); //xcoordinate

             varX = checkPointsBeforeRotationX(a);
             varY = checkPointsBeforeRotationY(o);                

             minPoint.set_y(varY);
             minPoint.set_x(varX);
         }
         else if(catXmin > rotatedX){
             a = imageHeight - catYmin;
             o = catXmin - rotatedX;
             theta = Math.atan(o/a);
             h = (o/Math.sin(theta));
        if(theta <= Math.toRadians((int)45)){     
             thetaZ = theta + Math.toRadians((int)45);

             oZ = h*Math.sin(thetaZ); //ycoordinate
             aZ = h*Math.cos(thetaZ); //xcoordinate

             varX = checkPointsBeforeRotationX(aZ);
             varY = checkPointsBeforeRotationY(oZ);
        }
        else{
             thetaZ = Math.toRadians((int)45) - theta;

             oZ = 0;                  //xcoordinate
             aZ = h*Math.cos(thetaZ); //ycoordinate 

             varX = checkPointsBeforeRotationX(oZ);
             varY = checkPointsBeforeRotationY(aZ);

        }
             minPoint.set_x(varX);
             minPoint.set_y(varY);

         }

         if(catXmax < rotatedX){
              o = imageHeight - catYmax;
              a = rotatedX - catXmax;
              theta = Math.atan(o/a);
              h = (o/Math.sin(theta));
         if(theta >= Math.toRadians((int)45)){        
              thetaZ = theta - Math.toRadians((int)45);

              oZ = h*Math.sin(thetaZ); //ycoordinate
              aZ = h*Math.cos(thetaZ); //xcoordinate

              varX = checkPointsBeforeRotationX(aZ);
              varY = checkPointsBeforeRotationY(oZ);
         }
         else{
              thetaZ = Math.toRadians((int)45) - theta;
              oZ = 0;                  //ycoordinate
              aZ = h*Math.cos(thetaZ); //xcoordinate

              varX = checkPointsBeforeRotationX(aZ);
              varY = checkPointsBeforeRotationY(oZ);  
         }
              maxPoint.set_x(varX);
              maxPoint.set_y(varY);

         }
         else if(catXmax == rotatedX){
             theta = Math.toRadians((int)45);
             h = imageHeight - catYmin;

             o = h*Math.sin(theta); //ycoordinate
             a = h*Math.cos(theta); //xcoordinate

             varX = checkPointsBeforeRotationX(a);
             varY = checkPointsBeforeRotationY(o); 

             maxPoint.set_y(varY);
             maxPoint.set_x(varX);

         }
         else if(catXmax > rotatedX){
             a = imageHeight - catYmax;
             o = catXmax - rotatedX;
             theta = Math.atan(o/a);
             h = (o/Math.sin(theta));
        if(theta <= Math.toRadians((int)45)){      
             thetaZ = theta + Math.toRadians((int)45);

             oZ = h*Math.sin(thetaZ); //ycoordinate
             aZ = h*Math.cos(thetaZ); //xcoordinate

             varX = checkPointsBeforeRotationX(aZ);
             varY = checkPointsBeforeRotationY(oZ);
        }
        else{
             thetaZ = Math.toRadians((int)45) - theta;

             oZ = 0;                  //xcoordinate
             aZ = h*Math.cos(thetaZ); //ycoordinate 

             varX = checkPointsBeforeRotationX(oZ);
             varY = checkPointsBeforeRotationY(aZ);
        }

             maxPoint.set_y(varX);
             maxPoint.set_x(varY);

         }

        getCorners();
        checkPointsAfterRotation(angle);
        checkCornerPointsAfterRotation(angle);

        g2.setColor(Color.MAGENTA);
        g2.drawPolygon(xPoints, yPoints, nPoints);  
        Corners1 =0; Corners2 =0;

public static void rotate2(Point originForRotation, Point pointForRotation, Double angle){
double cos=Math.cos(angle);
double sin=Math.sin(angle);
double oX =originForRotation.get_x();
double oY =originForRotation.get_y(); 
double x=pointForRotation.get_x();
double y=pointForRotation.get_y(); 

x = x-oX;    y = y-oY; 

pointForRotation.set_x((cos*x-sin*y)+oX);
pointForRotation.set_y((sin*x+cos*y)+oY);    

pointForRotation.show();

}

public static void getCorners(){
    if((minPoint.get_x() > maxPoint.get_x()) && (minPoint.get_y() < maxPoint.get_y())){
      topleftPoint.set_x(maxPoint.get_x());  bottomrightPoint.set_x(minPoint.get_x());
      topleftPoint.set_y(minPoint.get_y());  bottomrightPoint.set_y(maxPoint.get_y());
      Corners1 = 1; 
    }
    else if((minPoint.get_x() > maxPoint.get_x()) && (minPoint.get_y() > maxPoint.get_y())){
      toprightPoint.set_x(minPoint.get_x());  bottomleftPoint.set_x(maxPoint.get_x());
      toprightPoint.set_y(maxPoint.get_y());  bottomleftPoint.set_y(minPoint.get_y());
      Corners2 = 1;
    }
    else if((minPoint.get_x() < maxPoint.get_x()) && (minPoint.get_y() < maxPoint.get_y())){
      toprightPoint.set_x(maxPoint.get_x());  bottomleftPoint.set_x(minPoint.get_x());
      toprightPoint.set_y(minPoint.get_y());  bottomleftPoint.set_y(maxPoint.get_y());
      Corners2 = 1;
    }
    else if((minPoint.get_x() < maxPoint.get_x()) && (minPoint.get_y() > maxPoint.get_y())){
      topleftPoint.set_x(minPoint.get_x());  bottomrightPoint.set_x(maxPoint.get_x());
      topleftPoint.set_y(maxPoint.get_y());  bottomrightPoint.set_y(minPoint.get_y());
      Corners1 = 1;
    }
}

public static Double checkPointsBeforeRotationX(Double pointX){
    if(pointX > (Double.parseDouble(originalWidth))){
      pointX = Double.parseDouble(originalWidth);
      }
    return pointX;
}

public static Double checkPointsBeforeRotationY( Double pointY){
    if(pointY > (Double.parseDouble(originalHeight))){
      pointY = Double.parseDouble(originalHeight);
    }
    return pointY;
}

public static void checkPointsAfterRotation(int angle){

        rotate2(origin, minPoint,  Math.toRadians((int)angle));    
        rotate2(origin, maxPoint,  Math.toRadians((int)angle)); 
         //check for out of bound points after rotation
            if(minPoint.get_y()< 0){
                minPoint.set_y(0);
            }
            else if(minPoint.get_y() > Double.parseDouble(originalHeight)){
                minPoint.set_y(Double.parseDouble(originalHeight));
            }
            if(minPoint.get_x()< 0){
                minPoint.set_x(0);
            }
            else if(minPoint.get_x() > Double.parseDouble(originalWidth)){
                minPoint.set_x(Double.parseDouble(originalWidth));
            }
            if(maxPoint.get_y()< 0){
                maxPoint.set_y(0);
            }
            else if(maxPoint.get_y() > Double.parseDouble(originalHeight)){
                maxPoint.set_y(Double.parseDouble(originalHeight));
            }
            if(maxPoint.get_x()< 0){
                maxPoint.set_x(0);
            }
            else if(maxPoint.get_x() > Double.parseDouble(originalWidth)){
                maxPoint.set_x(Double.parseDouble(originalWidth));
            }

        xPoints[0] = (int)minPoint.get_x(); 
        xPoints[2] = (int)maxPoint.get_x(); 

        yPoints[0] = (int)minPoint.get_y(); 
        yPoints[2] = (int)maxPoint.get_y(); 

}

 public static void checkCornerPointsAfterRotation(int angle){

    if(Corners1 == 0 && Corners2 == 1){

        rotate2(origin, toprightPoint,  Math.toRadians((int)angle));    
        rotate2(origin, bottomleftPoint,  Math.toRadians((int)angle));

        if(toprightPoint.get_y()< 0){
                toprightPoint.set_y(0);
            }
            else if(toprightPoint.get_y() > Double.parseDouble(originalHeight)){
                toprightPoint.set_y(Double.parseDouble(originalHeight));
            }
            if(toprightPoint.get_x()< 0){
                toprightPoint.set_x(0);
            }
            else if(toprightPoint.get_x() > Double.parseDouble(originalWidth)){
                toprightPoint.set_x(Double.parseDouble(originalWidth));
            }
            if(bottomleftPoint.get_y()< 0){
                bottomleftPoint.set_y(0);
            }
            else if(bottomleftPoint.get_y() > Double.parseDouble(originalHeight)){
                bottomleftPoint.set_y(Double.parseDouble(originalHeight));
            }
            if(bottomleftPoint.get_x()< 0){
                bottomleftPoint.set_x(0);
            }
            else if(bottomleftPoint.get_x() > Double.parseDouble(originalWidth)){
                bottomleftPoint.set_x(Double.parseDouble(originalWidth));
            }

            xPoints[1] = (int)toprightPoint.get_x(); xPoints[3] = (int)bottomleftPoint.get_x();
            yPoints[1] = (int)toprightPoint.get_y(); yPoints[3] = (int)bottomleftPoint.get_y();
        }
        else if(Corners1 == 1 && Corners2 == 0){

        rotate2(origin, topleftPoint,  Math.toRadians((int)angle));    
        rotate2(origin, bottomrightPoint,  Math.toRadians((int)angle));    

        if(topleftPoint.get_y()< 0){
                topleftPoint.set_y(0);
            }
            else if(topleftPoint.get_y() > Double.parseDouble(originalHeight)){
                topleftPoint.set_y(Double.parseDouble(originalHeight));
            }
            if(topleftPoint.get_x()< 0){
                topleftPoint.set_x(0);
            }
            else if(topleftPoint.get_x() > Double.parseDouble(originalWidth)){
                topleftPoint.set_x(Double.parseDouble(originalWidth));
            }
            if(bottomrightPoint.get_y()< 0){
                bottomrightPoint.set_y(0);
            }
            else if(bottomrightPoint.get_y() > Double.parseDouble(originalHeight)){
                bottomrightPoint.set_y(Double.parseDouble(originalHeight));
            }
            if(bottomrightPoint.get_x()< 0){
                bottomrightPoint.set_x(0);
            }
            else if(bottomrightPoint.get_x() > Double.parseDouble(originalWidth)){
                bottomrightPoint.set_x(Double.parseDouble(originalWidth));
            } 

            xPoints[1] = (int)topleftPoint.get_x(); xPoints[3] = (int)bottomrightPoint.get_x();
            yPoints[1] = (int)topleftPoint.get_y(); yPoints[3] = (int)bottomrightPoint.get_y();
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T03:38:12.823

代码太多，无法详细跟踪，但我假设您的代码忠实地实现了您描述的数学。我认为问题在于您正在应用纯旋转矩阵。从旋转的小猫到旋转的黄色框的转换是平移和旋转的组合。您需要首先将 kitty（和黄色框）从 (x,y) 转换为 (0,0)（因此旋转后的 kitty 图像的位置是 kitty 的左上角在图 1 的左上角）。然后你需要将所有东西顺时针旋转 135 度。

使用齐次坐标和矩阵乘法将使您的代码更简单。

# ios - performSelectorInBackground 和 detachNewThreadSelector 是如何工作的？

> ID：15376547
> 
> 赞同：6
> 
> 时间：2013-03-13T03:29:12.643
> 
> 标签：ios, multithreading

我需要执行异步函数执行，因为它阻塞了主线程，因此 UI 不可用。

看了stackoverflow中的问题后，我知道有三种方法可以做异步函数。

一个例子：

```
[NSThread detachNewThreadSelector:@selector(showSpinner:) toTarget:self withObject:self.view];
// or 
[self performSelectorInBackground:@selector(showSpinner:) withObject:self.view];
// or 
NSInvocationOperation *invOperation = [[NSInvocationOperation alloc] initWithTarget:self selector:@selector(showSpinner:) object:self.view];
NSOperationQueue *opQueue = [[NSOperationQueue alloc] init];
[opQueue addOperation:invOperation];
// or 
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
    dispatch_async(dispatch_get_main_queue(), ^{
        [self showSpinner:self.view];
    });
}); 
```

`performSelectorInBackground`我的问题是如何`detachNewThreadSelector`返回主线程？你怎么知道他们已经完成了？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-13T04:57:11.737

几个想法：

1.  您可能想查看*并发编程指南*中的[Migrating Away From Threads](https://developer.apple.com/library/ios/documentation/General/Conceptual/ConcurrencyProgrammingGuide/ThreadMigration/ThreadMigration.html#//apple_ref/doc/uid/TP40008091-CH105-SW1) ，它为调度队列和操作队列提供了一个令人信服的论据，这在同一指南的前面已经讨论过了。

**   此外，当您深入研究各种异步操作时，请记住，在后台队列/线程中执行耗时的操作，但始终将 UI 内容分派回主队列。我只提到这一点是因为您的任务`showSpinner`听起来很像 UI 任务，您永远不想在后台队列/线程中执行此操作。如果它有一些“昂贵”的非 UI 相关任务，那么可以在后台执行，但要确保 UI 内容被分派回主队列。

    *   顺便说一句，操作队列的其他形式，例如，块操作：

    ```
    NSOperationQueue *opQueue = [[NSOperationQueue alloc] init];
    [opQueue addOperationWithBlock:^{
        // do some slow stuff in the background here

        // ok, now do UI stuff in the main queue

        [[NSOperationQueue mainQueue] addOperationWithBlock:^{
            [self showSpinner:self.view];
        }];
    }]; 
    ```

    这大致相当于 GCD（调度队列）的再现：

    ```
    dispatch_queue_t dispatchQueue = dispatch_queue_create("com.ramshad.app", 0);
    dispatch_async(dispatchQueue, ^{
        // do some slow stuff in the background here

        // ok, now do UI stuff in the main queue

        dispatch_async(dispatch_get_main_queue(), ^{
            [self showSpinner:self.view];
        });
    }); 
    ```

    操作队列和调度队列之间有很多微妙的优点和缺点（我们不应该在这里讨论，因为它在 Stack Overflow 的其他地方已经讨论了数百次），但它们都可以让您以比传统方式更简单的复杂性来完成令人惊讶的丰富异步操作线程编程。

    *   如果您决定坚持使用线程与操作和/或调度队列（我不一定推荐），您可能需要查看[线程编程指南](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/Multithreading/Introduction/Introduction.html#//apple_ref/doc/uid/10000057i)。* 

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T03:44:44.037

要识别`performSelectorInBackground` 和 `detachNewThreadSelector`结束执行，请在主线程上的线程方法结束时调用一个方法。

另外**`NSThread`**提供了一个属性，**`isFinished`**它返回一个布尔值，指示接收器是否已完成执行。

**例子：**

```
[self performSelectorOnMainThread:@selector(threadMethod) 
                       withObject:nil 
                    waitUntilDone:NO]; 
```

**或者**

```
[NSThread detachNewThreadSelector:@selector(threadMethod) 
                         toTarget:self 
                       withObject:nil];

-(void)threadMethod{

    //here your implementation code
    //here call the end notification method.
    [self performSelectorOnMainThread:@selector(ThreadExecutionDone) 
                           withObject:nil 
                        waitUntilDone:YES];
}

-(void)ThreadExecutionDone{
    //end of the performSelectorInBackground or detachNewThreadSelector.
} 
```*

# paypal - 请登录以使用 PayPal 沙盒功能

> ID：15376551
> 
> 赞同：29
> 
> 时间：2013-03-13T03:29:39.870
> 
> 标签：paypal, sandbox, paypal-sandbox

随着最近 PayPal 开发人员网站的改版，我在尝试使用 PayPal 集成测试我的网站时遇到了许多问题。

问题 1：我无法从应该将我带到 sandbox.paypal.com 的站点签出，它返回给我“请登录以使用 PayPal 沙盒功能”的常见错误。我已确认我已登录到 developer.paypal.com 上的开发者网站。

问题 2：在应用程序 > 沙盒帐户下，在其中一个帐户中，我通过单击“沙盒站点”被重定向到 www.paypal.com 的实时站点。它应该将我带到 sandbox.paypal.com，以便我可以登录沙盒帐户。目前这是不可能的。

问题 3：当我访问 www.paypal.com 时，我意识到我已从 developer.paypal.com 注销。某种cookie问题？

最重要的是，我尝试通过使用不同的浏览器、清除 cookie 和缓存来进行故障排除。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-13T05:24:09.537

其中一些问题目前正在解决中。通过清除浏览器上的缓存和 cookie 可以解决一些问题。这必须在打开 developer.paypal.com 网站之前完成，大多数开发人员在使用 Firefox 或 Chrome 时会更幸运。与其他浏览器相比，IE 似乎存在更多问题。

如果这样做不能解决您的问题，您需要向[PayPal Merchant Technical Services](http://www.paypal.com/mts)开一张票。通过这种方式可以跟踪您的问题，并允许 PayPal 衡量受不同问题影响的商家数量。此外，这将允许您在问题解决后收到通知。

作为一种解决方法，您还可以尝试使用示例代码/SDK 中的 API 凭据进行测试。这将允许您测试 API 调用，但您将无法登录商家帐户并对其进行更改。根据您的需要，这可能适合您，也可能不适合您。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-14T20:26:06.153

尝试不同的浏览器对我有用。我今天在 Mac OSX 10.8 上使用 Firefox、Chrome 和 Safari 时遇到了同样的问题几个小时。我在 PC 上使用 Firefox 19.0 进行了测试，并且在 PayPal 沙盒网站上运行良好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T04:45:08.060

仅供参考，以防其他人正在处理这个问题。我正在使用 PayPal IPN 功能，当我在迁移到“新”沙箱环境后进行最近的一些测试时，该功能在沙箱环境中停止工作。在使用真实的贝宝信息登录开发者网站后，我导入了旧的沙盒测试帐户，但仍然没有任何效果。在永远搞砸之后，我发现基本上你必须重新设置，就像它是一个新帐户一样，即使你导入了旧设置。我必须再次指定我的 IPN url，并通过您在 paypal 开发人员沙箱通知下收到的电子邮件链接重新验证旧导入的沙箱帐户。然后在登录开发者网站时，您可以使用您的测试帐户登录沙盒环境，一切正常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-29T11:37:06.767

出于测试目的，最简单的解决方案是：单击浏览器的后退按钮并再次执行该步骤。听起来很愚蠢，但它确实有效。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T13:38:59.353

我遇到了与原始海报相同的问题。我使用的是带有 ExpressCheckout API 的 IE9。

我正在调用`SetExpressCheckout`并重定向到 PayPal 沙箱。在 Sandbox 登录页面上，输入我的测试个人帐户的登录详细信息后，我收到一条消息，指出该电子邮件帐户无效以及返回 Sandbox 站点的链接（无效）。

我切换到 Firefox（这也可能是 PayPal 沙盒的 cookie 清理，因为我不记得曾经使用 Firefox 测试过 PayPal）并且一切正常。

我打电话`SetExpressCheckout`，重定向到 PayPal 沙箱，我可以使用我的测试个人帐户登录并结帐，然后正确返回到我的付款登陆页面进行调用`DoExpressCheckoutPayment`。

# python-2.7 - ImportError：没有名为子进程的模块

> ID：15376554
> 
> 赞同：2
> 
> 时间：2013-03-13T03:29:52.813
> 
> 标签：python-2.7

现在已经很长时间了，在我在 ubuntu 12.10 上安装 python 2.7 时，子进程模块丢失了，我不需要使用它，但是我使用的许多程序都这样做了，然后它们就不再工作了，谷歌搜索很多，我意识到在我的安装中有些东西是冲突的，但我一直无法理解是什么。我安装了其他版本的 python，但我无法使用突触删除它们，因为我必须删除太多其他包。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T22:42:25.897

使用`dpkg`您可以找到 subprocess.py 属于哪个包：

```
dpkg -S /usr/lib/python2.7/subprocess.py 
```

然后使用该`--reinstall`选项在`python2.7-minimal`不破坏依赖关系的情况下取回包：

```
apt-get install --reinstall python2.7-minimal 
```

# html - 如何填充 100% 的剩余高度？

> ID：15376558
> 
> 赞同：81
> 
> 时间：2013-03-13T03:30:30.667
> 
> 标签：html, css, height, fill

```
+--------------------+
|                    |
|                    |
|                    |
|                    |
|         1          |
|                    |
|                    |
|                    |
|                    |
+--------------------+
|                    |
|                    |
|                    |
|                    |
|         2          |
|                    |
|                    |
|                    |
|                    |
+--------------------+ 
```

上图（1）的内容是未知的，因为它可能在动态生成的页面中增加或减少。如上图所示的第二个 div (2) 应填充剩余空间。

这是我的html的一个例子

```
<div id="full">
<!--contents of 1 -->
<div id="someid">
<!--contents of 2 -->
</div>
</div> 
```

css...

```
#full{width: 300px; background-color: red;}
#someid{height: 100%;} 
```

或者这种方法是错误的？我该怎么做？请查看我的**[演示](http://jsfiddle.net/Y7PhV/99/)**并向我展示我的错误。

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2013-03-13T04:36:59.830

`#header`如果您添加一个 div （如下）来包装您的 1 的内容，您应该能够做到这一点。

1.  如果你 float `#header`，来自的内容`#someid`将被迫在它周围流动。

2.  接下来，将`#header`的宽度设置为 100%。这将使其扩展以填充包含 div 的宽度`#full`。这将有效地将所有`#someid`的内容推到下面，`#header`因为没有空间可以在两侧流动了。

3.  最后，将`#someid`的高度设置为 100%，这将使其与 的高度相同`#full`。

[JSFiddle](http://jsfiddle.net/G9cSZ/2/)

**HTML**

```
<div id="full">
    <div id="header">Contents of 1</div>
    <div id="someid">Contents of 2</div>
</div> 
```

**CSS**

```
html, body, #full, #someid {
  height: 100%;
}

#header {
  float: left;
  width: 100%;
} 
```

* * *

**更新**

我认为值得一提的是，当今的现代浏览器都很好地支持了 flexbox。CSS 可以更改`#full`为一个 flex 容器，并且`#someid`应该将它的 flex 增长设置为大于`0`.

```
html, body, #full {
  height: 100%;
}

#full {
  display: flex;
  flex-direction: column;
}

#someid {
  flex-grow: 1;
} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-03-13T03:48:22.630

要`div`在页面上获得 100% 的高度，您需要将 div 上方层次结构中的每个对象也设置为 100%。例如：

```
html { height:100%; }
body { height:100%; }
#full { height: 100%; }
#someid { height: 100%; } 
```

虽然我不能完全理解你的问题，但我假设这就是你的意思。

这是我正在使用的示例：

```
<html style="height:100%">
    <body style="height:100%">
        <div style="height:100%; width: 300px;">
            <div style="height:100%; background:blue;">

            </div>
        </div>
    </body>
</html> 
```

`Style`只是我没有外部化的 CSS 的替代品。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-02-15T12:32:42.100

```
 html,
    body {
        height: 100%;
    }

    .parent {
        display: flex;
        flex-flow:column;
        height: 100%;
        background: white;
    }

    .child-top {
        flex: 0 1 auto;
        background: pink;
    }

    .child-bottom {
        flex: 1 1 auto;
        background: green;
    }
```

```
 <div class="parent">
        <div class="child-top">
          This child has just a bit of content
        </div>
        <div class="child-bottom">
          And this one fills the rest
        </div>
    </div>
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-08-11T22:14:47.587

这可以通过表格来完成：

```
<table cellpadding="0" cellspacing="0" width="100%" height="100%">
    <tr height="0%"><td>
        <div id="full">
            <!--contents of 1 -->
        </div>
    </td></tr>
    <tr><td>
        <div id="someid">
            <!--contents of 2 -->
        </div>
    </td></tr>
</table> 
```

然后应用 css 使 someid 填充剩余空间：

```
#someid {
    height: 100%;
} 
```

现在，我只能听到人群中愤怒的喊叫声：“哦不，他在用桌子！把他喂给狮子吃！” 请听我说完。

与公认的答案不同，除了使容器 div 成为页面的整个高度之外什么都不做，这个解决方案使 div #2 填充问题中要求的剩余空间。如果您需要第二个 div 来填充分配给它的完整高度，这是目前唯一的方法。

但是请随意证明我错了，当然！CSS总是更好。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-05-25T11:29:18.277

我知道这是一个较晚的条目，但即使在 2016 年，我也对完全缺乏 IE 对 flex 的支持感到惊讶（目前 11 是唯一支持它的，而且它在[http://caniuse.com/#feat= flexbox](http://caniuse.com/#feat=flexbox)）从商业角度来看并不是很好！所以我认为在 IE 关闭之前，最好的解决方案和最适合跨浏览器的解决方案肯定是 JS/Jquery 解决方案？

大多数网站已经使用 Jquery，一个非常简单的例子（对于我的代码）是：

```
$('#auto_height_item').height($(window).height() - $('#header').height()); 
```

您显然可以替换窗口和标题，让基本数学来完成工作。就我个人而言，我仍然不相信 flex...

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-03-07T15:53:10.843

我知道这是一个老问题，但现在有一种超级简单的形式可以做到这一点，那就是 CCS Grid，所以让我以 div 为例：

```
<div id="full">
  <div id="header">Contents of 1</div>
  <div id="someid">Contents of 2</div>
</div> 
```

然后是CSS代码：

```
.full{
  width:/*the width you need*/;
  height:/*the height you need*/;
  display:grid;
  grid-template-rows: minmax(100px,auto) 1fr;
 } 
```

就是这样，第二行，scilicet，someide，由于属性 1fr，将占据其余的高度，第一个 div 的最小值为 100px，最大值为它需要的任何值。

我必须说 CSS 已经进步了很多，让程序员的生活更轻松。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-05-07T18:57:18.753

我为太短的页面添加了这个。

html:

```
<section id="secondary-foot"></section> 
```

CSS：

```
section#secondary-foot {
    height: 100%;
    background-color: #000000;
    position: fixed;
    width: 100%;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-07-03T21:34:00.957

创建一个 div，其中包含两个 div（full 和 someid）并将该 div 的高度设置为以下内容：

高度：100vh；

包含 div（full 和 someid）的高度应设置为“auto”。就这样。

# linux - 无法写入命名管道

> ID：15376562
> 
> 赞同：14
> 
> 时间：2013-03-13T03:31:06.843
> 
> 标签：linux, bash, named-pipes

我正在尝试写入使用**mkfifo**制作的命名管道。但是当我运行命令 (ex)`ls > myNamedPipe`时，我无法再将命令输入 bash。我仍然可以写字符，仅此而已。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-13T04:31:49.297

命名管道保持打开状态，直到您从其他地方读取它。这是为了允许不同进程之间的通信。

尝试：

```
mkfifo fifo
echo "foo" > fifo 
```

然后打开另一个终端并输入：

```
cat fifo 
```

如果您返回第一个终端，您会注意到您现在可以输入其他命令。

另请参阅反向发生的情况：

```
# terminal 1
cat fifo

# terminal 2
echo "foo" > fifo

# and now you can see "foo" on terminal 1 
```

如果您希望终端在尝试向 fifo 写入内容时不要“挂起”，请在 fifo 上附加一个文件描述符：

```
mkfifo fifo
exec 3<> fifo
echo "foo" > fifo
echo "bar" > fifo 
```

# c++ - RValue 指针？

> ID：15376563
> 
> 赞同：-1
> 
> 时间：2013-03-13T03:31:14.007
> 
> 标签：c++, c++11, rvalue

我怎么知道一个指针是一个 RValue 还是我不知道我在说什么......喝啤酒时这个非常荒谬的想法突然出现在我的脑海里......

如果您有愚蠢的程序员/用户怎么办..

假设您有以下课程：

```
template<typename T>
class Container
{
    private:
        std::vector<T> Storage;
    public:
        Container(T Anything) : Storage() {Storage.push_back(Anything);}
} 
```

并且用户这样做：

```
Container<Object*> C(new Object(Params)); 
```

那我怎么删除呢？我希望能够区分上面和下面的区别：

```
Object* O = new Object(Params);
Container<Object*> C(O); 
```

我只是想知道。我知道显然不应该使用第一个示例，但让我们假设它将是或者我想检测这样的泄漏代码并删除它们。

如何才能做到这一点？那是一个 RValue 指针吗？我怎么称呼它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T03:37:06.530

最简单和正确的做法是将裸指针包装在一些资源容器中，例如`shared_ptr`.

# wpf - 在列表框中使用 GridSplitter 作为 swiper

> ID：15376567
> 
> 赞同：2
> 
> 时间：2013-03-13T03:31:35.867
> 
> 标签：wpf, layout, gridsplitter

我有一个`ListBox`其内容被拉伸以填充我的窗口，并且在其中我有一个带有两列（三列，包括`GridSplitter`）的网格。

我只想能够使用`GridSplitter`像刷卡器一样的东西，能够隐藏/显示任意数量的任一列。即 100% 左侧，每个 50%，或 100% 右侧等。

我不能为我的生活让它做到这一点。两边的元素都有自己想要的大小，天真的`*`方法不允许`GridSplitter`缩小到该大小以下。如果我使用固定的列大小，我*可以*缩小到它们所需的大小以下，但是当调整大小时，`GridSplitter`可以超过最终宽度，并且内容不再拉伸以填充。`Window``Window`

这是最能说明我的问题的 XamlPad 文档：

```
<ListBox HorizontalContentAlignment="Stretch">
  <ListBox.ItemTemplate>
    <DataTemplate>
      <Grid Height="20">
        <Grid.ColumnDefinitions>
          <ColumnDefinition Width="*" />
          <ColumnDefinition Width="5" />
          <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>
        <Border Background="Red" MinWidth="200" /> <!-- simulate fixed size content /-->
        <Border Background="Purple" Width="200" HorizontalAlignment="Left" />
        <GridSplitter Grid.Column="1" HorizontalAlignment="Stretch" Background="Gray"
                      ResizeDirection="Columns" ResizeBehavior="PreviousAndNext" />
        <Border Grid.Column="2" Background="Lime" MinWidth="200" HorizontalAlignment="Stretch" />
      </Grid>
    </DataTemplate>
  </ListBox.ItemTemplate>
  <x:Null />
</ListBox> 
```

最奇怪的是，如果我没有 ListBox，则不会出现此问题。然后它完全按照我的意愿工作。

无论如何，感谢任何人的帮助，这一切都将不胜感激 - 这让我发疯了:)

# c# - Twitter API 仅应用程序身份验证（使用 TweetSharp）

> ID：15376570
> 
> 赞同：8
> 
> 时间：2013-03-13T03:31:54.957
> 
> 标签：c#, twitter, tweetsharp

我正在尝试使用[仅应用程序身份验证](https://dev.twitter.com/docs/auth/application-only-auth)（无用户上下文）从服务器端应用程序检索公共推文。

以下代码工作正常：

```
var service = new TwitterService("<consumer key>", "<consumer secret>");
service.AuthenticateWith("<access token>", "<access token secret>"); 

var options = new ListTweetsOnUserTimelineOptions { ScreenName = "billgates" };

foreach (var tweet in service.ListTweetsOnUserTimeline(options))
    Console.WriteLine(tweet.Text); 
```

但是，我从该图中收集到不必提供访问令牌/秘密：

![仅应用程序身份验证](../Images/94ed351d8b8f9a51c39fa8a313920329.png)

但是，当我删除对 的调用时`AuthenticateWith`，`ListTweetsOnUserTimeline`返回 null。

这是图书馆的限制，如果不是，我该怎么办？

**编辑**

据我所知，这调用了[`GET statuses/user_timeline`](https://dev.twitter.com/docs/api/1.1/get/statuses/user_timeline)应该支持仅应用程序身份验证的方法，根据[文档](https://dev.twitter.com/docs/auth/oauth)：

> 支持这种形式的身份验证的 API 方法将在其文档中包含两个速率限制，一个是每个用户（用于应用程序用户身份验证），另一个是每个应用程序（用于这种形式的仅应用程序身份验证）

该`GET statuses/user_timeline`方法在其文档中显示了这两个限制。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T07:53:52.200

我认为这不是库的限制，而是 Twitter API 的限制。

据我所知， ListTweetsOnUserTimeline() 方法使用 statuses/user_timeline API 调用。

[获取状态/用户时间线](https://dev.twitter.com/docs/api/1.1/get/statuses/user_timeline)

如您所见，此调用需要身份验证。

您可以尝试使用 Streaming API 来获取状态。我在这里帮不了你，因为我只有用户流的经验，而不是公开的。

[公共流](https://dev.twitter.com/docs/streaming-apis/streams/public)

此外，TweetSharp 在流方面存在一些问题，我不得不切换到 Linq2Twitter 库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-23T23:12:13.510

这被确认为不受支持： [https ://github.com/danielcrenna/tweetsharp/issues/80#issuecomment-19862455](https://github.com/danielcrenna/tweetsharp/issues/80#issuecomment-19862455)

由于该项目即将退役，因此没有计划增加对它的支持。

# core-data - 为 CoreData 生成的类添加前缀

> ID：15376572
> 
> 赞同：2
> 
> 时间：2013-03-13T03:31:55.883
> 
> 标签：core-data, xcode4.6, xcdatamodel

在我的 XCode 项目中，我有两个数据模型 (.xcdatamodel)，并希望为每个模型中的实体生成 NSManagedObject 派生类。问题是两个模型都包含同名的实体。如何使用前缀生成这些类，以避免由于类似于[此类似问题](https://stackoverflow.com/questions/12575611/ios-core-data-model-conflict-with-mail-framework)中描述的名称冲突而导致的链接错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T16:47:25.180

给他们不同的类名，仅此而已。实体名称和类名称不必相同。生成的类将使用您提供的任何名称。

例如，如果您有一个 entity ，您可以为其生成的类名`Person`添加一个前缀：`Foo`

![在此处输入图像描述](../Images/b1697c3351433b36ec6c64b77dc7571a.png)

当您为此实体生成类时，您将获得 FooPerson.h 和 FooPerson.m。在不同的模型中使用不同的前缀，你会得到不同的类。

[在相关的说明中，如果您使用mogenerator](https://github.com/rentzsch/mogenerator)生成类，您将获得比使用 Xcode 的内置类生成更好的结果。它更加灵活，如果您更改模型，它可以**更**轻松地使生成的类保持最新。

# rest - 如何创建由另一个 API 端点定义的 Ember-Data has-many 集合？

> ID：15376580
> 
> 赞同：1
> 
> 时间：2013-03-13T03:32:33.910
> 
> 标签：rest, ember.js, ember-data

我有一个模型，`Post`有很多`Comment`s。的响应`GET /posts/12`非常适合 Ember 数据：

```
{
  "post": {
    "id": 12,
    "title": "I Love Ramen",
    "created_at": "2011-08-19T14:22",
    "updated_at": "2011-08-19T14:22",
    "body": "..."
  }
} 
```

`Post`但是，该s的 API`Comment`是`GET /posts/12/comments`，它返回

```
{
  "comments": [
    {
      "id": 673,
      "author_id": 48,
      "created_at": "2011-08-21T18:03",
      "body": "Me too!"
    }
  ]
} 
```

我可以对我的模型或适配器做些什么来告诉它 for `Post 12`s `Comment`, use `/posts/12/comments`？请注意，它`Post`本身不知道`Comment`ID。

### 更新

针对[buuda 的回答](https://stackoverflow.com/questions/15376580/how-do-i-make-an-ember-data-has-many-collection-that-is-defined-by-another-api-e/15376720#15376720)，这里有一些说明：

The`Post`必须能够查找它`Comment`的 s 以便我可以（a）显示对 the 的评论`PostRoute`和（b）在`Post`like上有属性

```
hasComments: function() {
  return this.get('comments.length') > 0;
}.property('comments') 
```

不过，如果我必须实现`comments`计算属性，这对我来说很好。在上述答案中，布达建议

```
App.Comments.find({ id: postId }); 
```

如何获取数据存储`/posts/:postId/comments`而不是fetch `/comments?postId=:postId`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T03:47:56.203

您不一定需要在模型之间设置任何关系。嵌套资源允许您获取适当的数据。使用此路由器：

```
App.Router.map(function() {
  this.resource('posts', { path: '/posts/:post_id' }, function() {
    this.route('edit');
    this.resource('comments', function() {
      this.route('new');
    });
  });
}); 
```

CommentsRou​​te 可以获取它包含的资源的模型，然后获取具有该帖子 ID 的评论：

```
App.CommentsRoute = Ember.Route.extend({
   model: function() {
       var post = this.modelFor('posts');
       var postId = post.get('id');
       return App.Comments.find({ id: postId });
   }
}); 
```

帖子模型不需要知道评论 ID，但底层数据存储必须根据帖子 ID 查询返回适当的评论。然后将返回的数组用作评论路由的模型。

**编辑：**

我假设您使用的是 ember-data。如果是这样，则尚不支持嵌套资源 URL (posts/:postId/comments)。要在帖子路由中显示评论，您可能需要获取评论数据，将其设置在评论控制器上，在帖子控制器中使用控制器注入（“需要”），并使用实验性“控制”把手标签来显示评论视图：

```
App.PostsRoute = Ember.Route.extend({
   setupControllers: function() {
       var post = this.modelFor('posts');
       var postId = post.get('id');
       var comments = App.Comments.find({ id: postId });
       this.controllerFor('comments').set('content', comments);
   }
}); 
```

我在这里解释如何使用实验控制标签：[How to Render HasMany Associations With their Own Controller](https://stackoverflow.com/questions/15365335/how-to-render-hasmany-associations-each-with-their-own-controller/15368165#15368165)

# php - SQL中有多个条目？

> ID：15376583
> 
> 赞同：3
> 
> 时间：2013-03-13T03:33:03.340
> 
> 标签：php, mysql, arrays

如何在一个字段中存储多个 SQL 条目？例如，在现场电话中，我想让用户输入更多电话，例如私人电话、家庭电话、商务电话等。

关于如何创建 trat 表单以及如何在 sql 中存储数据的任何问题？

我想我可以使用 php 中的 serialize() 函数来存储它们，但是如何制作表单并收集这些信息？

```
Form:

Home Phone: 321321333
Other: 333213213
Add Another 
```

此外，我想让他们可以编辑姓名字段，因此如果用户想要使用家庭电话而不是家庭电话或寻呼机而不是其他。

有什么帮助吗？请？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T03:34:35.427

您***不会***在单个字段中存储多个值。您需要一个允许多个电话号码的规范化结构。1:n 的关系在这里是合适的。

```
用户（用户 ID PK）
userPhone (userId FK, phoneType, phoneNumber (userId, phoneType PK))
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T03:37:34.080

您可以使用`json_encode()`和`json_decode()`来保存和访问数据。

**为了节省。**

```
$phone_number = array("Home Phone" => "321321333", "Other" => "333213213");
$encoded = json_encode($phone_number); 
```

**用于访问。**

```
$result = mysqli_fetch_assoc($sql);
$decoded = json_decode( $result['phone_number_mysql_fields'] ); 
```

您可以使用 PHP`[**`serialize`**](http://php.net/manual/en/function.serialize.php)`函数在 MySQL 中存储数组和对象

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T04:02:18.370

用户`serialize()`，就像你说的。但是，要添加另一个按钮，您需要 JavaScript。这是一个表格：

```
<form action="action.php" method="post">
    <div id="phoneNumbers">
        <input type="text" value="home phone">: <input type="text" name="0-value" value="(xxx)xxx-xxxx">
    </div>
    <button onclick="addAnother();">Add Another Phone Number</button>
    <input type="submit>
</form> 
```

这是javascript（放入页面的head标签）：

```
<script type="text/javascript">
    var nums=0;
    function addAnother(){

        document.getElementById('phoneNumbers').innerHTML+='<input type="text" name="'+++nums+'-name">: <input type="text" name="'+nums+'-value">';

    }
</script> 
```

这是action.php：

```
<?php
$arrayOfNums=array();
foreach($_POST as $curVal){
    array_push($arrayOfNums,$curVal);
}
$serializedArray=serialize($arrayOfNums);
#now do whatever code you have to add serializedArray to your database. It is a string, so this is easy.
?> 
```

现在您的数据库中有一个序列化数组。只要`unserialize()`它，你就有一个这样的数组，在名称和值之间交替：'home tel'、'(324)444-4356'、'work tel'、'(444)546-5678' 等。这是未经测试的，告诉我如果失败了。

# java - Java中的Map和HashMap

> ID：15376585
> 
> 赞同：-2
> 
> 时间：2013-03-13T03:33:06.257
> 
> 标签：java, map, hashmap

我是 java 新手，遇到了 hashmaps 的以下用法：

```
public static HashMap< String, Integer > Table1;
....
Table1 = new HashMap< String, Integer > ();

.....
public Map<String, Integer> Table2 = new HashMap<String, Integer>(); 
```

我的问题是上述陈述是否等效？我看到`Map<String, Integer>`用于Table2。`HashMap< String, Integer > Table1`和`Map<String, Integer> Table2`相同的编程结构吗？它们可以互换使用吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T03:38:37.720

Map是一个接口，在HashMap等几种实现中都有实现。

和

HashMap 是一个完整的实现类。

一个有用的答案在这里 - [Java 中 HashMap 和 Map 的区别..？](https://stackoverflow.com/questions/9588959/difference-between-hashmap-and-map-in-java)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T03:37:48.213

[`Map`](http://docs.oracle.com/javase/7/docs/api/java/util/Map.html)是一个接口，[`HashMap`](http://docs.oracle.com/javase/7/docs/api/java/util/HashMap.html)是它的一个实现。它们只能在一个方向上互换，这意味着您可以在任何可以使用 a 的地方`Map`使用 a`HashMap`来代替。但是，它远不止于此，因为它`Map`表达了任何类型的“映射”必须提供的所有操作，无论是基于散列的映射 ( `HashMap`)、排序映射 ( [`TreeMap`](http://docs.oracle.com/javase/7/docs/api/java/util/TreeMap.html))、线程安全映射 ( [`ConcurrentMap`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ConcurrentMap.html)) 还是不可变的地图（[`ImmutableMap`来自番石榴](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/ImmutableMap.html)）。任何需要 a 的地方都可以使用这些不同类型的地图等等`Map`。`Map`本身不提供任何实际的工作代码。它只说明了每种地图必须能够做什么。

[从“什么是接口？”](http://docs.oracle.com/javase/tutorial/java/concepts/interface.html)下的 Java 教程中了解有关这种关系的更多信息。[“面向对象的编程概念”](http://docs.oracle.com/javase/tutorial/java/concepts/index.html)部分和[“接口和继承”](http://docs.oracle.com/javase/tutorial/java/IandI/)部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T03:34:21.903

Map 是接口，HashMap 是 Map 接口的实现类。

接口变量可以保存子类引用。不能互换使用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-13T03:38:32.120

按照定义，Table1 必须始终是 HashMap，但 Table2 也可以是其他映射。

```
public Map<String, Integer> Table2 = new HashMap<String, Integer>();
Table2 = new TreeMap<String, Integer>();
Table2 = someFunctionThatReturnsMaps(); 
```

最后一个可能是最重要的，因为有多种库返回 Map 类型，您必须将其强制转换为 Table1 的 HashMap。

额外说明：一般约定是变量名以小写开头（table1、table2 等）

# c# - 2个线程增加一个静态整数

> ID：15376593
> 
> 赞同：4
> 
> 时间：2013-03-13T03:34:26.090
> 
> 标签：c#

如果我通过 2 个不同的任务或线程增加静态，我需要锁定它吗？

我有这个将被多个线程同时使用的类，它返回一个要在线程内使用的代理，但我不想在每个线程同时使用相同的代理，所以我想增加一个静态整数是最好的方法，有什么建议吗？

```
class ProxyManager
{
    //static variabl gets increased every Time GetProxy() gets called
    private static int Selectionindex;
    //list of proxies
    public static readonly string[] proxies = {};
    //returns a web proxy
    public static WebProxy GetProxy()
    {
      Selectionindex = Selectionindex < proxies.Count()?Selectionindex++:0;
      return new WebProxy(proxies[Selectionindex]) { Credentials = new NetworkCredential("xxx", "xxx") };
    }
} 
```

基于所选答案

```
if(Interlocked.Read(ref Selectionindex) < proxies.Count())
{
    Interlocked.Increment(ref Selectionindex);
}
else
{
    Interlocked.Exchange(ref Selectionindex, 0);
}

Selectionindex = Interlocked.Read(ref Selectionindex); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T03:40:40.397

如果跨线程增加静态变量，最终会得到不一致的结果。而是使用[Interlocked.Increment](http://msdn.microsoft.com/en-us/library/system.threading.interlocked.increment.aspx)：

```
private void IncrementSelectionIndex() {
    Interlocked.Increment(ref Selectionindex);
} 
```

64 位读取是原子的，但要完全支持 32 位系统，您应该使用[Interlocked.Read](http://msdn.microsoft.com/en-us/library/system.threading.interlocked.read.aspx)

```
private void RetrieveSelectionIndex() {
    Interlocked.Read(ref Selectionindex);
} 
```

# php - 简单的sql按位置排序

> ID：15376594
> 
> 赞同：0
> 
> 时间：2013-03-13T03:34:35.243
> 
> 标签：php, mysqli

好的，我一直在推迟它，因为它一直在部分工作，现在我需要它。

我想要这个输出：

```
id position
1       1       
2       2        
15      3         
16      4 
```

我以为这^会做到。但我得到了整个页面表。

```
SELECT * 
FROM pages 
ORDER BY position ASC

id  link_id     menu_name     position     content     visible
1     1         New Article       1     This is the first Picture and   Article     1
2     1         Edit Articles     2     Delete Articles/Edit 333 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T03:36:48.033

您需要做的就是指定您的列：

`SELECT id, position FROM pages ORDER BY position ASC`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T03:41:42.797

查询中的 * 表示您将选择每个列，只需使用要检索的列名。

例子：

```
SELECT id, position FROM pages ORDER BY position 
```

就这样 ;）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T03:46:16.450

每当您需要表中的特定列时...您需要在 SELECT 子句中提及它们。

在您的情况下，您只需要 id 和 position 以便您的查询将是

```
SELECT id, position FROM pages ORDER BY position ASC 
```

如需进一步学习，[请查看此链接](http://www.w3schools.com/sql/sql_select.asp)..

希望这对你有帮助..

# javascript - 实现函数重载

> ID：15376600
> 
> 赞同：1
> 
> 时间：2013-03-13T03:34:46.983
> 
> 标签：javascript, typescript

由于 javascript 不支持函数重载 typescript 不支持它。然而，这是一个有效的接口声明：

```
// function overloading only in the interface 
interface IFoo{
    test(x:string);
    test(x:number);
}

var x:IFoo;
x.test(1);
x.test("asdf"); 
```

但是我怎样才能实现这个接口。打字稿不允许此代码：

```
// function overloading only in the interface 
interface IFoo{
    test(x:string);
    test(x:number);
}

class foo implements IFoo{
    test(x:string){

    }
    test(x:number){

    }
} 
```

[尝试一下](http://www.typescriptlang.org/Playground/#src=//%20function%20overloading%20only%20in%20the%20interface%20%0Ainterface%20IFoo%7B%0A%09test%28x%3astring%29;%0A%09test%28x%3anumber%29;%0A%7D%0A%0Aclass%20foo%20implements%20IFoo%7B%0A%09test%28x%3astring%29%7B%0A%09%09%0A%09%7D%0A%09test%28x%3anumber%29%7B%0A%09%09%0A%09%7D%0A%7D)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T03:54:34.930

Typescript 中的函数重载是这样完成的：

```
class foo implements IFoo {
    test(x: string);
    test(x: number);
    test(x: any) {
        if (typeof x === "string") {
            //string code
        } else {
            //number code
        }
    }
} 
```

# ios - 使用来自 iOS + Bonjour 的 Google Oauth2 webflow（太棒了！）

> ID：15376601
> 
> 赞同：12
> 
> 时间：2013-03-13T03:34:58.897
> 
> 标签：ios, oauth-2.0, bonjour, google-oauth

我正在构建一个 iOS 应用程序，该应用程序要求用户使用服务器端 Web 流通过 Oauth2 授权 Google API。我目前打开一个 UIWebView 来启动 oauth2 流程。

这在模拟器中运行良好，因为我将重定向 URI 设置为`http://localhost`并在我的本地计算机上运行服务器。

但是，我想在设备上进行测试，同时仍连接到在我的桌面上运行的服务器。为了做到这一点，我让应用程序发现我的桌面地址（本地子网 IP 或 bonjour 地址，如`http://foo.local.`）以连接到服务器。但是，Google Oauth2 流程说它不能使用本地 URI 作为重定向 url。

有没有办法解决？如果可能的话，我不想弄乱我的本地网络设置或来自我的 IOS 设备的代理请求。理想情况下，我还希望能够使用 bonjour 服务来发现服务器，因为我们有一个开发人员团队，我们的应用程序允许您选择要连接到本地网络上的哪个服务器。

选项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T12:31:32.627

2013 年 3 月 19 日更新

如果服务器是必须的中间人，那么我认为最简单的方法是获取域名并将服务器公开。www.godaddy.com 或任何域名提供商将以每年 15 美元左右的价格获得一个域名（如果有折扣会更低）。

之后，只需搜索如何获取动态 DNS 并将 redirect_uri 设置为已选择的域名。

否则，如果仅出于 oauth 目的，我看不到服务器的作用。作为下面列出的第二种方法，即使在严密防御的防火墙后面，设备也可以直接与谷歌服务器通信。（令牌将通过抛出标题栏）。

所以这里可能需要一些澄清。

本地主机服务器会像一个集线器一样从谷歌驱动器兑现文件然后重新分发到 iOS 设备吗？或者想在这里实现什么样的网络架构？

==

2013 年 3 月 18 日更新

根据官方文档 [https://developers.google.com/accounts/docs/OAuth2InstalledApp#choosingredirecturi](https://developers.google.com/accounts/docs/OAuth2InstalledApp#choosingredirecturi)

oauth 有两种方式。使用 localhost 作为重定向只是一种方法。

另一个是使用这个字符串

```
urn:ietf:wg:oauth:2.0:oob 
```

替换具有本地主机的请求。

例如，上一个请求的 localhost 为（注意：区别在于以 'redirect_uri=' 开头的中间行）

```
 https://accounts.google.com/o/oauth2/auth?scope=https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile&
redirect_uri=http://localhost:9004&
response_type=code&client_id=812741506391-h38jh0j4fv0ce1krdkiq0hfvt6n5amrf.apps.googleusercontent.com 
```

现在可以改成

```
 https://accounts.google.com/o/oauth2/auth?scope=https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile&
redirect_uri=urn:ietf:wg:oauth:2.0:oob&
response_type=code&client_id=812741506391-h38jh0j4fv0ce1krdkiq0hfvt6n5amrf.apps.googleusercontent.com 
```

所以在模拟器中访问前一个的url应该相当于在真实设备中访问后一个。

光环

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T12:23:17.557

你能试试这个方法吗？将以下内容添加到`/etc/hosts`Mac OSX 中的文件中 -

```
192.168.33.100   trialapp  trialapp.com #put your local IP address instead of 192.168.33.100 
```

转到为您的新客户端 ID 设置的[Google API 控制台并将重定向 URL 更改为](https://code.google.com/apis/console)`http://trialapp.com/`

*   “应用程序类型：Web 应用程序”。
*   通过“您的站点或主机名（更多选项）”：
    *   在“授权重定向 URI”中输入[http://trialapp.com/](http://trialapp.com/)
    *   在“授权的 JavaScript 起源”中输入[http://trialapp.com/](http://trialapp.com/)

我们正在做的是将您的本地子网 IP 地址映射到别名域名。所以谷歌应该不再认为这是一个本地地址。看看这是否有效？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T14:20:45.640

我最终通过采用以下方法解决了这个问题。

在我的 UIWebView 中，我拦截了所有加载请求并修改了 URL。基本上，我将 redirect_uri 设置为公共的（也在 api 控制台上注册），但是当 UIWebView 尝试加载该重定向 URI（在多次重定向之后）时，我重写该 URL 以指向我的 mac 上的回调本地网络。

显然，在服务器端解析令牌时需要考虑到这一点。

# java - 购物车 JSP：当一个或多个商品被选中并提交到购物车时，需要商品行留在产品页面上

> ID：15376603
> 
> 赞同：0
> 
> 时间：2013-03-13T03:35:09.303
> 
> 标签：java, javascript, jsp, cart, shopping

我有一个购物车应用程序，其中的项目显示为表格的行。在每一行的末尾，有一个“添加到购物车”提交按钮。目前，当我单击该按钮时，整个页面都会消失，并且在将表单提交给 servlet 时会出现错误 404 页面。我想要的是，当提交一行时，其余行仍然存在，只有单击的行会改变颜色。随着用户添加更多行（项目），这些行中的每一行都应该改变颜色。我得到了改变颜色的部分，但还没有弄清楚如何让其余的行留在页面上。

```
 <h1> Here is the product list as per your category selection</h1>

<table cellpadding="10" border="1" id="tbl">
    <tr valign="bottom" style="background-color: #FF00FF">
        <th align="left">Sl No</th>
        <th align="left">Prod ID</th>
        <th align="left">Unit Price</th>
        <th align="left">Quantity</th>
        <th align="left"></th>
    </tr>
    <form name="tableForm" >  
        <c:forEach items="${listInServlet1}" var="regBean">
            <tr style="background-color: #00FFFF">
                <input type="hidden" value="sval" name="qtyTextHidden" />
                <input type="hidden" name="reagentId" value="<c:out Value = " ${regBean.prodId}
                "/>" />
                <td>
                    <c:out Value="${regBean.prodCount}" />
                </td>
                <td>
                    <c:out Value="${regBean.prodId}" />
                </td>
                <td>
                    <c:out Value="${regBean.price}" />
                </td>
                <td>
                    <input name="qtyText" type="text" size="2" value="" 
                onChange="calculateTotalPrice(this, '${regBean.price}')"
                    />
                </td>
                <td>
                    <input name="totalprice" type="text" size="2" value="0" />
                </td>
                <td>
                    <input type="submit" value="Add to Cart" name="addToCrtBtn" 
          onClick="submitValues(event, '${regBean.prodCount}', '${regBean.price}')"
                    />
                </td>
            </tr>
        </c:forEach>
    </form>
</table>
<table>
    <tr>
        <td>
            <form name="tableForm" method="post" action="/myapp/myservlet">
                <input type="submit" value="Done" id="submitOrder" />
            </form>
        </td>
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T04:18:57.090

拉古，

您可以选择 imran 建议的答案。我认为这将是实现这一点的最佳方法，但是还有另一种复杂的方法，在您将 ATC[添加到购物车] 提交到 servlet 后，一旦您从 servlet 重定向添加到类别页面一次再次连同已添加的产品 ID 的参数列表。使用此列表，您可以轻松地为已有项目显示彩色行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T03:53:00.433

向您提交购物车数据的 servlet 发出 ajax 请求。当响应从服务器返回时，更改行的颜色。为了确定您必须提交哪些行数据，请使用行的“id”属性。

# php - Heroku 上的 Wordpress 更新

> ID：15376609
> 
> 赞同：0
> 
> 时间：2013-03-13T03:35:37.500
> 
> 标签：php, wordpress, heroku

我在 Heroku 上安装了 wordpress，我可以安装插件和更新。我的问题是，如果服务器上的某些文件发生更改，我如何确保它被提交给我的应用程序的 heroku git repo？

例如，wordpress 发布更新。我在管理员中单击更新 wordpress。所有更新的文件都在服务器上更改。如果我从 heroku 克隆 repo，我会有新安装的 wordpress 版本吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T14:03:54.503

Heroku 文件系统是[临时](https://devcenter.heroku.com/articles/dynos#ephemeral-filesystem)的，也就是说，当测功机由于某种原因重新启动时，本地存储的文件将丢失。测功机无权访问 Git 存储库。它们存储在一个 slug 中，这实际上是一个 zip 文件的美名。这是一项安全功能：如果有人猜到密码并获得了对文件系统的访问权限，他们将不得不在应用程序重新启动时重新破解该应用程序。允许某人从网络更新您的版本控制是一个非常*糟糕的想法*。

因此，即使 Wordpress 运行更新并且看似成功，它也会执行以下一项或两项操作：

1.  将文件写入文件系统以在下次重新启动时丢失
2.  写入数据库不会丢失

这可能会弄乱您的整个安装，因为代码和数据将不同步。

有两种方法可以在 Heroku 上运行的 Wordpress 上安装东西：

1.  将东西解压到合适的位置，然后将它们推送到 Git 中的 Heroku。
2.  针对生产数据库在本地运行您的 Wordpress 实例，并将更改推送到 Heroku。

选项 2 也可能很危险，因为它实际上会在应用程序运行时弄乱您的生产数据库。这意味着您应该降低生产版本以进行维护，或者将其设置为只读。记住也要拍摄数据库快照。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-21T09:52:07.457

我使用选项 1 来做到这一点。使用 git 只需在每次提交后将更改推送到您的 heroku 远程，如下所示：

```
git push heroku branchinwhichyouareworking 
```

这样，您的更改将提交到您的应用程序的 git 存储库。请记住，如果您推送到 heroku 的不是主分支，则必须使用以下语法：

```
git push heroku branchinwhichyouareworking:master 
```

更多信息[在这里](https://devcenter.heroku.com/articles/git#deploying-code)。

# firebase-security - Firebase 令牌劫持

> ID：15376612
> 
> 赞同：0
> 
> 时间：2013-03-13T03:35:52.830
> 
> 标签：firebase-security

我们计划使用 firebase 自定义令牌来保护我们的应用程序。恐怕如果从电汇中嗅出令牌，恶意用户可以欺骗真正的用户。有没有办法防止令牌劫持？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T07:56:02.853

您应该确保在主机页面上使用 SSL，并在您的网站中包含所有内容，以避免这种安全威胁。

Firebase 和 Firebase 简单登录已对所有连接使用 SSL，因此您只需要确保您的网站本身也使用 SSL。

# string - 简单的字符串替换不起作用

> ID：15376616
> 
> 赞同：-1
> 
> 时间：2013-03-13T03:37:00.677
> 
> 标签：string, perl, substitution

以下是我的代码：

```
my $string1 = '<td><a href="http://www.aaa.com/downloads/details.aspx?FamilyID=a1b2c3">abcdefg</a><br />(123456)</td>';
my $string2 = 'http://www.aaa.com/downloads/details.aspx?FamilyID=a1b2c3';

print "Before string substitution:\n$string1\n";
$string1 =~ s/$string2//;
print "After string substitution:\n$string1\n"; 
```

和实际输出：

```
Before string substitution:
<td><a href="http://www.aaa.com/downloads/details.aspx?FamilyID=a1b2c3">abcdefg</a><br />(123456)</td>
After string substitution:
<td><a href="http://www.aaa.com/downloads/details.aspx?FamilyID=a1b2c3">abcdefg</a><br />(123456)</td> 
```

我的期望：

```
Before string substitution:
<td><a href="http://www.aaa.com/downloads/details.aspx?FamilyID=a1b2c3">abcdefg</a><br />(123456)</td>
After string substitution:
<td><a href="">abcdefg</a><br />(123456)</td> 
```

有人可以告诉我我的代码有什么问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T03:59:51.203

这个问题可以通过在脚本中添加两个字符来解决。您需要的是转义元字符`$string2`：

```
$string1 =~ s/\Q$string2//; 
```

导致匹配失败的字符是问号`?`，这里未转义的`...aspx?...`意思是“匹配字符'x'的0或1”。这些字符`.`是匹配除换行符之外的任何内容的通配符，这可能会导致误报匹配。斜线`/`虽然是元字符，因为它是替换运算符的分隔符`s///`，但不需要转义，因为它们嵌入在字符串中。

转义元字符最容易使用`\Q ... \E`转义序列、在正则表达式中或使用`quotemeta`.

尝试手动转义这些类型的字符串并不是一个好主意，尤其是在只需要文字匹配的情况下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T03:49:29.643

由于您要输入被 perl 正则表达式视为特殊字符的字符，因此您必须像这样将它们转义：

```
my $string2 = 'http:\/\/www\.aaa\.com\/downloads\/details\.aspx\?FamilyID=a1b2c3'; 
```

然后，当您运行程序时，将显示预期的输出：

```
<td><a href="http://www.aaa.com/downloads/details.aspx?FamilyID=a1b2c3">abcdefg</a><br />(123456)</td>
After string substitution:
<td><a href="">abcdefg</a><br />(123456)</td> 
```

要从字符串中转义这些字符，最好只使用 perl 的[quotemeta](http://perldoc.perl.org/functions/quotemeta.html)函数：

```
my $string2 = quotemeta('http://www.aaa.com/downloads/details.aspx?FamilyID=a1b2c3'); 
```

这将为您转义特殊字符，然后您的正则表达式替换将正常工作。

**编辑**

由于您因非转义的正则表达式字符而遇到问题，因此此解决方案可能更简单，因为它不需要您转义任何字符：

```
substr($string1, index($string1,$string2), length($string2)) = ''; 
```

这是基于此示例：

```
my $name = 'fred';
substr($name, 4) = 'dy'; # $name is now 'freddy' 
```

在 perldocs 中找到[substr](http://perldoc.perl.org/functions/substr.html)。

# c# - 将虚拟数据网格列添加到紧凑框架？

> ID：15376622
> 
> 赞同：0
> 
> 时间：2013-03-13T03:37:29.667
> 
> 标签：c#, datagrid, windows-mobile, compact-framework

我正在创建一个数据网格并将其绑定到一个数据源，其中一个列需要以一种 sql 查询无法完成的方式生成数据。

是否可以创建一个空白的虚拟列，我可以覆盖 OnPaint 函数以确保它绘制我想要的正确数据？我尝试添加一个没有映射名称的列，但它不会呈现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T13:44:08.737

就像 josef 在评论中所说的那样，这只是添加一列的问题。

`GetTableMethod`如果链接到您的数据层，这个例子会更好，但它应该明白这一点：

```
private const string sqlConnString = "Data Source=myServerAddress;Initial Catalog=myDataBase;Integrated Security=SSPI;" +
  "User ID=myDomain\myUsername;Password=myPassword;";
DataGrid dataGrid1;

private void BindData() {
  var table = GetTableMethod("SELECT * FROM Employees;");
  var cInt = table.Columns.Add("My Integer", typeof(int));
  var cStr = table.Columns.Add("Hex View", typeof(string));
  var cBool = table.Columns.Add("Is Even", typeof(bool));
  var dDbl = table.Columns.Add("My Double", typeof(double));
  for (int i = 0; i < table.Rows.Count; i++) { // can't use a foreach here
    DataRow row = table.Rows[i];
    row[cInt] = i;
    row[cStr] = i.ToString("X"); // view in hexadecimal, just for fun
    row[cBool] = ((i % 2) == 0);
    row[dDbl] = (double)i / table.Rows.Count;
  }
  dataGrid1.DataSource = table;
}

private DataTable GetTableMethod(string sqlSelectText) {
  var table = new DataTable();
  using (var cmd = new System.Data.SqlClient.SqlCommand(sqlSelectText, new System.Data.SqlClient.SqlConnection(sqlConnString))) {
    try {
      cmd.Connection.Open();
      table.Load(cmd.ExecuteReader());
    } finally {
      cmd.Connection.Close();
    }
  }
  return table;
} 
```

# ruby-on-rails - 为什么独角兽不在本地主机上提供页面？

> ID：15376624
> 
> 赞同：1
> 
> 时间：2013-03-13T03:37:33.347
> 
> 标签：ruby-on-rails, heroku, unicorn

我一直很高兴地将 Thin & Heroku (Cedar) 用于我的 Rails 3 应用程序，但我刚刚切换到 Unicorn 以使 PDFKit 正常工作。

按照[Heroku 的说明](https://devcenter.heroku.com/articles/rails-unicorn)，我在我的应用程序的根目录中创建了我的第一个 Procfile，并为其提供了以下内容：

```
web: bundle exec unicorn -p $PORT -c ./config/unicorn.rb 
```

当我`foreman start`在命令行键入时，我得到：

```
14:31:46 web.1  | started with pid 699
14:31:48 web.1  | I, [2013-03-13T14:31:48.544196 #699]  INFO -- : Refreshing Gem list
14:31:55 web.1  | I, [2013-03-13T14:31:55.736480 #699]  INFO -- : listening on addr=0.0.0.0:5000 fd=13
14:31:55 web.1  | I, [2013-03-13T14:31:55.740045 #699]  INFO -- : master process ready
14:31:55 web.1  | I, [2013-03-13T14:31:55.899544 #712]  INFO -- : worker=1 ready
14:31:55 web.1  | I, [2013-03-13T14:31:55.900740 #711]  INFO -- : worker=0 ready
14:31:55 web.1  | I, [2013-03-13T14:31:55.911041 #713]  INFO -- : worker=2 ready 
```

如果我尝试`localhost:3000`在浏览器中加载，工头的输出下不会再出现任何内容，并且浏览器会说：“糟糕！Google Chrome 无法连接到 localhost:3000。”

而且似乎 Unicorn 根本没有使用 3000 端口，因为它在运行时我仍然可以通过键入来启动 Thin `rails server`，当我这样做时，我可以再次`localhost:3000`在浏览器中加载。

发生了什么事，我该如何解决？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T03:40:27.680

刮那个。我现在可以看到 Unicorn 发布到`localhost:5000`. 要使用它，请在应用程序的根目录中`localhost:3000`放置一个`.foreman`文件。`port: 3000`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-02T12:02:49.940

你可以在 3000 端口启动独角兽

```
unicorn_rails --config-file config/unicorn.rb -p 3000 
```

# asp.net - Global.asax.cs 事件在网站发布后未触发

> ID：15376629
> 
> 赞同：5
> 
> 时间：2013-03-13T03:37:42.360
> 
> 标签：asp.net, global-asax

我一直在网上寻找这个问题的答案几个小时，所以我希望这里有人可以提供帮助。

我在 VS 2010（.Net 4.0 框架，C#）中有一个网站，在根目录中有一个 Global.asax 文件，在 App_Code 文件夹中有一个 Global.asax.cs 文件。（请注意，这是一个网站，而不是 Web 应用程序）。当从我的本地开发机器上运行这个网站时，一切都按预期运行——更具体地说，Global.asax.cs 文件中的 Session_Start 事件会触发并在每个会话开始时运行一些代码来获取用户的登录凭据，这决定了他们什么允许根据其安全级别在应用程序中查看/编辑。

但是，一旦我将此网站发布到 Windows 2003 R2 服务器上，Global.asax.cs 文件中的任何事件都不会触发。（只有 Session_Start 事件需要代码，但我也将代码放在 Application_Start 中，只是为了看看它是否会触发 - 它没有）。

这是 Global.asax 代码：

```
<%@ Application CodeBehind="~\App_Code\Global.asax.cs" Inherits="Global" Language="C#" %> 
```

这是 Global.asax.cs 代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;

/// <summary>
/// Summary description for Global
/// </summary>
public partial class Global : System.Web.HttpApplication
{

    public Global()
    {

    // TODO: Add constructor logic here

    }

    protected void Application_Start(object sender, EventArgs e)
    {
        // Code that runs on application startup
    }

    protected void Application_End(object sender, EventArgs e)
    {
        //  Code that runs on application shutdown
    }

    protected void Application_Error(object sender, EventArgs e)
    {
        // Code that runs when an unhandled error occurs

    }

    void Session_Start(object sender, EventArgs e)
    {
        try
        {
            Session["SessionSink"] = new SessionSink();             
            this.GetUserName();                              
        }
        catch (Exception ex)
        {
            string msg = "An error occurred in Global.asax::Session_Start";
            ExceptionWriter ew = new ExceptionWriter();
            ew.LogError(msg, ex);
        }
    }

    void Session_End(object sender, EventArgs e)
    {
        // Code that runs when a session ends. 

    }
} 
```

基于我读过的其他答案/讨论的一些注释：一旦发布， PrecompiledApp.config 确实出现在网站的文件夹中。此外，App_global.asax.compiled 和 App_global.asax.dll 出现在 bin 文件夹中。

任何人都知道问题可能是什么？为什么这可以在我的本地机器上工作，但一旦发布到服务器就不行？是否有我缺少的 IIS 设置？

这是我第一次使用 asp.net “网站”，所以任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-20T13:21:52.547

您可以完全不使用 global.asax.cs 来规避它；即删除 global.asax.cs 并将 global.asax 修改为

```
<%@ Application Language="C#" Inherits="System.Web.HttpApplication" %>
<script runat="server">
  public override void Init() {
    base.Init();
    var module = (SessionStateModule)Modules["Session"];
    module.Start += new EventHandler((sender, args) => {
        // create session sink here
    });
  }
</script> 
```

# qt - 如何防止用户在 QComboBox 的 lineedit 中输入非法文本？

> ID：15376631
> 
> 赞同：0
> 
> 时间：2013-03-13T03:37:47.900
> 
> 标签：qt, qcombobox

我需要一个小部件`QComboBox`，用户可以从弹出窗口中选择项目或直接在 linedit 中输入，但是如何防止输入超出 QComboBox 中项目的范围？还是 lineedit 中的文本输入总是合法的？
谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T03:59:09.893

参考`QComboBox::setValidator(const QValidator*)`成员函数：

[http://qt-project.org/doc/qt-4.8/qcombobox.html#setValidator](http://qt-project.org/doc/qt-4.8/qcombobox.html#setValidator)

这允许您设置验证器以约束用户在组合框的行编辑中键入的任何输入。

Qt 提供了三个验证器：`QIntValidator`将输入约束为一定范围内的整数；`QDoubleValidator`将输入限制在一定范围内并具有指定精度的浮点值；并将`QRegExpValidator`输入限制为特定的正则表达式。如果您的验证需求更复杂，您也可以子类`QValidator`化并编写自己的，然后将其安装到组合框中。另见：http: [//qt-project.org/doc/qt-4.8/qvalidator.html](http://qt-project.org/doc/qt-4.8/qvalidator.html)

# html - 如何在另一个 div 中居中一个 div？

> ID：15376634
> 
> 赞同：168
> 
> 时间：2013-03-13T03:37:59.803
> 
> 标签：html, css

我想`#container`将集中在`#main_content`. 然而，事实并非如此。为什么这不起作用，我该如何解决？

```
#main_content {
  top: 160px;
  left: 160px;
  width: 800px;
  min-height: 500px;
  height: auto;
  background-color: #2185C5;
  position: relative;
}

#container {
  width: auto;
  height: auto;
  margin: 0 auto;
  padding: 10px;
  position: relative;
}
```

```
<div id="main_content">
  <div id="container">
  </div>
</div>
```

* * *

## 回答 #1

> 赞同：143
> 
> 时间：2013-03-13T03:41:32.023

您需要设置`width`容器的（`auto`不起作用）：

```
#container {
    width: 640px; /* Can be in percentage also. */
    height: auto;
    margin: 0 auto;
    padding: 10px;
    position: relative;
} 
```

[MDN](https://developer.mozilla.org)的 CSS 参考说明了这一切。

查看这些链接：

*   [auto - CSS 参考 | MDN](https://developer.mozilla.org/en-US/docs/CSS/auto)
*   [边距 - CSS 参考 | MDN](https://developer.mozilla.org/en-US/docs/CSS/margin)
*   [CSS属性中值的含义是什么`auto`- 代码日志](https://stackoverflow.com/questions/4471850/what-does-auto-css-property-means)

[在jsFiddle](http://jsfiddle.net/Sann/xACwL/)行动。

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2013-03-18T21:14:22.790

从技术上讲，您的内部 DIV ( `#container`)**水平**居中。您无法判断的原因是因为使用 CSS`width: auto`属性，内部 DIV 正在扩展到与其父级相同的宽度。

看到这个小提琴：http: [//jsfiddle.net/UZ4AE/](http://jsfiddle.net/UZ4AE/)

```
#container {
    width: 50px;
    height: auto;
    margin: 0 auto;
    padding: 10px;
    position: relative;
    background-color: red;
} 
```

`#container`在这个例子中，我简单地设置了to的宽度`50px`并将背景设置为，`red`这样你就可以看到它是居中的。

我认为真正的问题是“如何使用 CSS 水平居中元素？” 答案是（请打鼓）：*这取决于！*

当 W3Schools 在这里做得很好时，我不会对使用 CSS 居中的无数方法进行全面重新讨论：http: [//www.w3schools.com/css/css_align.asp](http://www.w3schools.com/css/css_align.asp)但基本思想是块级元素您只需指定所需的宽度并将左右边距设置为`auto`.

```
.center {
    margin-left: auto;
    margin-right: auto;
    width: 50px;
} 
```

**请注意：**此答案仅适用于*块*级元素！要定位*内联*元素，您需要使用第一个*块*父级的`text-align: center`属性。

 ** * *

## 回答 #3

> 赞同：39
> 
> 时间：2015-06-17T20:42:44.703

另一种有趣的方式：[小提琴](http://jsfiddle.net/atuz910p/)

### CSS

```
.container {
   background: yellow;
   width: 100%;
   display: flex;
   flex-direction: row;
   flex-wrap: wrap;
   justify-content: center;
   align-items: center;
}

.centered-div {
   width: 80%;
   height: 190px;
   margin: 10px;
   padding: 5px;
   background: blue;
   color: white;
} 
```

### HTML

```
 <div class="container">
        <div class="centered-div">
            <b>Enjoy</b>
        </div>
    </div> 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2013-03-22T12:36:19.000

您可以使用以下小代码将浮动 div 居中：

```
#div {
    width: 200px;
    height: 200px;
    position: absolute;
    left: 50%;
    top: 50%;

    margin-top: -100px;
    margin-left: -100px;
} 
```

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2013-03-13T04:11:28.057

现在只需定义你的

`#main_content` `text-align:center`并**定义你的** `#container` `display:inline-block;`

像这样：

```
#main_content {
    text-align: center;
}

#container{
    display: inline-block;
    vertical-align: top;
} 
```

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2013-03-13T03:55:48.390

尝试添加

```
text-align: center; 
```

到您的父容器 CSS 声明。以及子容器的以下内容：

```
display: inline-block; 
```

它必须做到这一点。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2013-03-13T03:42:03.257

对于初学者，我会尝试定义更具体的宽度。很难将已经跨越整个宽度的东西居中：

```
#container {
    width: 400px;
} 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2013-03-13T12:30:58.297

用于`margin:0 auto;`子 div。然后，您可以将子 div 居中在父 div 内。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2013-03-16T13:41:00.593

它可以提供`#container div width:80%`（任何小于主要内容的宽度并以 % 为单位，以便它从左右两侧都能很好地管理）和提供`margin:0px auto;` *或* `margin:0 auto;`（两者都可以正常工作）。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2016-03-28T15:06:11.767

我在几个项目中使用了以下方法：

[https://jsfiddle.net/u3Ln0hm4/](https://jsfiddle.net/u3Ln0hm4/)

```
.cellcenterparent{
  width: 100%;
  height: 100%;
  display: table;
}

.cellcentercontent{
  display: table-cell;
  vertical-align: middle;
  text-align: center;
} 
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2013-03-13T03:42:17.873

尝试`position:relative;`在您的`#container`. 将精确宽度添加到`#container`：

```
#main_content {
    top: 160px;
    left: 160px;
    width: 800px;
    min-height: 500px;
    height: auto;
    background-color: #2185C5;
    position: relative;
}

#container {
    width: 600px;
    height: auto;
    margin: auto;
    padding: 10px;
} 
```

[工作演示](http://jsfiddle.net/jhunlio/YpwMh/4/)

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2013-03-13T05:05:17.977

这是解决方案：

```
#main_content {
    background-color: #2185C5;
    height: auto;
    margin: 0 auto;
    min-height: 500px;
    position: relative;
    width: 800px;
} 
```

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2013-03-13T06:10:12.103

```
#main_content {
    width: 400px;
    margin: 0 auto;
    min-height: 300px;
    height: auto;
    background-color: #2185C5;
    position: relative;
}

#container {
    width: 50%;
    height: auto;
    margin: 0 auto;
    background-color: #CCC;
    padding: 10px;
    position: relative;
} 
```

试试这个。它测试正常。[对 jsfiddle](http://jsfiddle.net/V3njp/)进行了实时检查。

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2013-03-13T08:41:32.233

也许你想要这样：

### HTML

```
<div id="main_content">
    <div id="container">vertical aligned text<br />some more text here
    </div>
</div> 
```

### CSS

```
#main_content {
    width: 500px;
    height: 500px;
    background: #2185C5;
    display: table-cell;
    text-align: center;
    vertical-align: middle;
}

#container{
    width: auto;
    height: auto;
    background: white;
    display: inline-block;
    padding: 10px;
} 
```

### 如何？

在表格单元格中，与中间垂直对齐将设置为元素的垂直居中，并`text-align: center;`作为元素的水平对齐。

注意到为什么#container 在 inline-block 中，因为这是在行的条件下。

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2016-08-23T14:32:35.080

这是一种使用 Flexbox 显示轻松居中 div 的新方法。

看到这个工作小提琴：[https ://jsfiddle.net/5u0y5qL2/](https://jsfiddle.net/5u0y5qL2/)

这是CSS：

```
.layout-row {
    box-sizing: border-box;
    display: -webkit-box;
    display: -webkit-flex;
    display: flex;
    -webkit-box-direction: normal;
    -webkit-box-orient: horizontal;
    -webkit-flex-direction: row;
    flex-direction: row;
}

.layout-align-center-center {
    -webkit-box-align: center;
    -webkit-align-items: center;
    -ms-grid-row-align: center;
    align-items: center;
    -webkit-align-content: center;
    align-content: center;
    -webkit-box-pack: center;
    -webkit-justify-content: center;
    justify-content: center;
} 
```

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2013-03-16T11:54:26.113

每个人都说过，但我想再说一遍不会有什么坏处。

您需要将 设置`width`为某个值。这里有一些更容易理解的东西。

[http://jsfiddle.net/XUxEC/](http://jsfiddle.net/XUxEC/)

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2015-10-21T08:51:40.097

在中心制作一个 div。不需要指定 div 的宽度。

一个工作演示在这里：

[http://jsfiddle.net/6yukdmwq/](http://jsfiddle.net/6yukdmwq/)

```
 .container {
        width: 100%;
        height: 500px;
        display: table;
        border: 1px solid red;
        text-align: center;}

    .center {
        display: table-cell;
        vertical-align: middle;
    }

    .content {
        display: inline-block;
        text-align: center;
        border: 1px solid green;
    } 
```

```
 <section class="container">
        <div class="center">
            <div class="content">
                <h1>Helllo Center Text</h1>
            </div>
        </div>
    </section> 
```

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2013-03-13T03:42:05.923

这是因为您的宽度设置为自动。您必须指定宽度才能使其明显居中。

您的#container 跨越#main_content 的整个宽度。这就是为什么它似乎没有居中。

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2013-03-13T03:55:57.320

如果不设置`width`，它将获得它可以获得的最大宽度。所以你看不到`div`已经居中。

```
#container
{
    width: 50%;
    height: auto;
    margin: auto;
    padding: 10px;
    position: relative;
    background-color: black;  /* Just to see the different */
} 
```

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2013-03-16T14:31:28.783

以这种方式制作 CSS 内容...

```
#main_content {
    top: 160px;
    left: 160px;
    width: auto;
    min-height: 500px;
    height: auto;
    background-color: #2185C5;
    position: relative;
 }

#container {
    height: auto;
    width: 90%;
    margin: 0 auto;
    background-color: #FFF;
    padding: 10px;
} 
```

一个工作示例在这里：http: [//jsfiddle.net/golchha21/mjT7t/](http://jsfiddle.net/golchha21/mjT7t/)

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2013-03-16T22:29:29.983

如果您不想为 设置宽度`#container`，只需添加

```
text-align: center; 
```

到`#main_content`.

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2013-03-16T23:52:48.137

如果设置`width: auto`为块元素，则宽度将为 100%。`auto`所以在这里拥有价值真的没有多大意义。高度实际上是相同的，因为默认情况下任何元素都设置为自动高度。

所以最后你`div#container`实际上是居中的，但它只占据了其父元素的整个宽度。您正确居中，您只需更改宽度（如果需要）即可查看它是否真正居中。如果您想将您的#main_content 居中，那么只需应用`margin: 0 auto;`它即可。

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2013-03-18T02:02:35.923

如果这是你想要的输出，试试这个：

```
<div id="main_content" >
    <div id="container">
    </div>
</div> 
```

```
#main_content {
    background-color: #2185C5;
    margin: 0 auto;
}

#container {
    width: 100px;
    height: auto;
    margin: 0 auto;
    padding: 10px;
    background: red;
} 
```

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2013-03-22T08:13:52.050

我认为这可以正常工作，尽管您可能需要重置“top:200px;” 根据您的需要：

```
#main_content {
    top: 160px;
    left: 160px;
    width: 800px;
    min-height: 500px;
    height: auto;
    background-color: #2185C5;
    position: relative;
    border: 2px solid #CCCCCC;
}

#container {
    width: 100px;
    height: 20px;;
    margin: 0 auto;
    padding-top: 10px;
    position: relative;
    top: 200px;
    border: 2px solid #CCCCCC;
} 
```

* * *

## 回答 #25

> 赞同：1
> 
> 时间：2013-03-22T09:55:21.933

您必须为要居中的 div 分配宽度。

像这样：

```
#container {
    width: 500;
    margin: 0 auto;
    padding: 10px;
} 
```

有关这些链接的更多信息和示例：

*   *[CSS 布局 - 水平和垂直对齐](http://www.w3schools.com/css/css_align.asp)*

*   *[http://www.w3schools.com/css/tryit.asp?filename=trycss_align_container](http://www.w3schools.com/css/tryit.asp?filename=trycss_align_container)*

* * *

## 回答 #26

> 赞同：1
> 
> 时间：2013-03-23T00:07:49.363

```
.parent {
    width: 500px;
    height: 200px;
    border: 2px solid #000;
    display: table-cell;
    vertical-align: middle;
}

#kid {
    width:70%; /* 70% of the parent */
    margin:auto;
    border:2px solid #F00;
    height: 70%;
} 
```

这确实很好地解决了这个问题（在所有新浏览器中测试），其中父 div 有 class="parent" 而子 div 有 id="kid"。

这种风格水平和垂直居中。垂直居中只能使用复杂的技巧来完成——或者通过将父 div 用作表格单元格，这是 HTML 中正确支持垂直对齐的唯一元素之一。

只需设置孩子的高度、边距自动和中间垂直对齐，它就会起作用。这是我所知道的最简单的解决方案。

* * *

## 回答 #27

> 赞同：1
> 
> 时间：2018-02-06T09:01:21.077

```
* {
  box-sizing: border-box;
}

#main_content {
  top: 160px;
  left: 160px;
  width: 800px;
  min-height: 500px;
  height: auto;
  background-color: #2185c5;
  position: relative;
}

#container {
  width: 50%;
  height: 50%;
  margin: auto;
  padding: 10px;
  position: absolute;
  border: 5px solid yellow;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
} 
```*

# cocoa - 如何在 MacRuby 中执行命令、向其标准输入提供数据以及从标准输出读取数据？

> ID：15376638
> 
> 赞同：0
> 
> 时间：2013-03-13T03:38:24.100
> 
> 标签：cocoa, pipe, stdout, stdin, macruby

我正在尝试执行一个命令，将数据提供给它的标准输入，并从它的标准输出中读取。我尝试使用通过 MacRuby 公开的 Ruby 的 Open3#popen3 以及 NSTask。我正在编写的程序的源代码可[在此处](https://github.com/colindean/gpgboard/blob/master/GPGBoard/AppDelegate.rb#L56)获得。我在 Xcode 和 MacRuby 中这样做。

这是一些选择代码：

入口点，只是简单地让我在两种方法之间轻松切换。

```
def do_gpg_cmd cmd
  do_gpg_cmd_nstask cmd
end 
```

ruby 方式，使用 Open3#popen3。

```
def do_gpg_cmd_ruby cmd
  gpg = "#{@gpg_path} --no-tty "
  cmd_output = ''
  logg "executing [#{cmd}]"
  Dispatch::Queue.concurrent.async do
    logg "new thread starting"
    Open3.popen3(gpg + cmd) do |stdin, stdout, stderr|
      stdin.write input_text
      stdin.close
      cmd_output = stdout.read
      output_text cmd_output
      stdout.close
      logg stderr.read
      stderr.close
    end
  end
  return cmd_output
end 
```

在这种方法中，应用程序会冻结（我正在通过单击应用程序中的 Sign 按钮进行测试，该按钮运行`gpg --clearsign --local-user $key`）。

当我终止应用程序时，Xcode 在自动出现的线程诊断中显示：

```
libsystem_kernel.dylib`__psynch_cvwait:
0x7fff84b390f0:  movl   $33554737, %eax
0x7fff84b390f5:  movq   %rcx, %r10
0x7fff84b390f8:  syscall
0x7fff84b390fa:  jae    0x7fff84b39101            ; __psynch_cvwait + 17 ; THIS LINE IS HIGHLIGHTED
0x7fff84b390fc:  jmpq   0x7fff84b3a4d4            ; cerror_nocancel
0x7fff84b39101:  ret    
0x7fff84b39102:  nop    
0x7fff84b39103:  nop 
```

Cocoa 方式，使用 NSTask。

```
def do_gpg_cmd_nstask cmd
  Dispatch::Queue.concurrent.async do
    fcmd = "--no-tty " + cmd
    task = NSTask.alloc.init
    task.setLaunchPath(@gpg_path)
    task.setArguments(fcmd.split(" ") << nil)

    task.arguments.each {|a| puts "ARG: [#{a}]" }

    inpipe = NSPipe.pipe
    outpipe = NSPipe.pipe
    errpipe = NSPipe.pipe

    task.setStandardOutput(outpipe)
    task.setStandardInput(inpipe)
    task.setStandardError(errpipe)

    output = outpipe.fileHandleForReading
    errput = errpipe.fileHandleForReading
    input = inpipe.fileHandleForWriting

    task.launch

    input.writeData input_text.dataUsingEncoding(NSUTF8StringEncoding)
    input.closeFile

    outdata = output.readDataToEndOfFile
    errdata = errput.readDataToEndOfFile
    output.closeFile
    errput.closeFile
    outstring = NSString.alloc.initWithData(outdata, encoding: NSUTF8StringEncoding)
    errstring = NSString.alloc.initWithData(errdata, encoding: NSUTF8StringEncoding)

    output_text outstring
    logg errstring
  end
end 
```

当我运行它时，我在 Xcode 调试输出中收到此错误。显然，我自己将 ARG 部分输出为超级愚蠢的日志记录。不执行子进程。

```
ARG: [--no-tty]
ARG: [--clearsign]
ARG: [--local-user]
ARG: [0xC2808780]
ARG: []
2013-03-12 23:27:39.305 GPGBoard[84924:3503] -[NSNull fileSystemRepresentation]: unrecognized selector sent to instance 0x7fff75b05310
*** Dispatch block exited prematurely because of an uncaught exception:
/Users/colin/Library/Developer/Xcode/DerivedData/GPGBoard-bradukgmaegxvmbukhwehepzyxcv/Build/Products/Debug/GPGBoard.app/Contents/Resources/AppDelegate.rb:81:in `block': NSInvalidArgumentException: -[NSNull fileSystemRepresentation]: unrecognized selector sent to instance 0x7fff75b05310 (RuntimeError) 
```

我怀疑这两种方法的问题是相互排斥的：Open3#popen3 问题可能与阻塞读取有关，而 NSTask 问题与管道问题有关。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T17:50:51.760

这段代码对我有用，并打印出当前目录中的文件：

```
framework "Cocoa"
task = NSTask.new
task.launchPath = "/bin/ls"
task.arguments = ["-l", "-a"]
stdoutPipe = NSPipe.pipe
task.standardOutput = stdoutPipe
task.launch
data = stdoutPipe.fileHandleForReading.readDataToEndOfFile
puts NSString.alloc.initWithData data, :encoding => NSASCIIStringEncoding 
```

现在，如果我替换`task.arguments = ["-l", "-a"]`为`task.arguments = "-l -a".split(" ") << nil`我收到以下错误：

`macruby[86209:707] -[NSNull fileSystemRepresentation]: unrecognized selector sent to instance 0x7fff77d6f310`

所以，我认为你的问题是`task.setArguments(fcmd.split(" ") << nil)`。将其更改为`task.setArguments(fcmd.split(" "))`，您应该不再遇到`NSNull`问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-11T17:08:23.010

问题是管道有一个缓冲区大小。当缓冲区已满时，写入命令会阻塞，直到另一端读取了一些数据以为新数据腾出空间。

您的代码首先尝试将所有数据写入命令的标准输入。假设该命令确实读取了一些数据，将一些输出写入标准输出，然后继续从其标准输入读取。如果有很多数据要通过，则命令的标准输出管道的缓冲区有时会变满。该命令会阻塞，直到有人从标准输出管道读取数据。但是，您的 ruby​​ 代码尚未完成将数据写入标准输入，并继续这样做，直到标准输入管道也已满。现在有一个死锁。

解决方案是同时将数据写入标准输入并从标准输出读取数据，可以是并发的，也可以只是逐块的（块大小不大于管道的缓冲区大小。）

# c++-cli - 托管代码调用非托管函数

> ID：15376639
> 
> 赞同：0
> 
> 时间：2013-03-13T03:38:28.447
> 
> 标签：c++-cli

我在我的 c++-cli 应用程序的托管代码命名空间中声明了一个结构。项目中还包括非托管的 cpp 文件。我尝试调用在 umanaged c++ 代码中定义的函数。我将托管世界的结构传递给它。链接器在抱怨。它说

> 错误 27 错误 LNK2019：在函数“public:int __clrcall DoAT::atrClass1:: read_hdf5_file(类 System::String ^,class DoAT::HdfCallVars ^)" (?read_hdf5_file@atrClass1@DoAT@@$$FQE$AAMHPE$AAVString@System@@PE$AAVHdfCallVars@2@@Z) C:\DoAT \DoAT.obj DoAT

如何解决此链接问题？我对托管代码世界很陌生。谢谢，某人

# iphone - 在将应用程序提交到 AppStore 之前需要准备什么？

> ID：15376644
> 
> 赞同：6
> 
> 时间：2013-03-13T03:39:03.833
> 
> 标签：iphone, ios, encryption, app-store

我要向 AppStore 提交一个加密的应用程序。该应用程序`CCCrypt`并将文本文件存储在 iPhone 中，`<CommonCrypto/CommonCryptor.h>`由 Apple 使用。

[当Apple 询问我的应用程序是否包含加密](https://stackoverflow.com/questions/2135081/does-my-application-contain-encryption)时，我很可能会选择“是” 。

除了上述声明外，我还有什么需要准备的吗？

ps 我*不是*美国公民或居民。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-19T15:19:58.450

我最近提交了一个使用 CommonCrypto 的应用程序。我只选择了“是”。苹果没有就此话题进行跟进。它被 AppStore 接受。

# ruby-on-rails - 仅显示基于日期列的最新记录

> ID：15376646
> 
> 赞同：0
> 
> 时间：2013-03-13T03:39:26.100
> 
> 标签：ruby-on-rails, date, show

我有一个表格，其中包含学生、成绩等列以及相应日期的列（不是 created_at 日期）。在我的模型中，一个学生有_许多分数，一个分数属于_一个学生。当用户点击学生时，我希望显示页面仅根据“字段”列中输入的日期显示最近的成绩和相关日期。

目前我的显示视图如下所示：

```
 <% @scores.each do |score| %>
 <p>
   <b>Grade:</b>
    <%= score.grade %>
 </p>
 <p>
   <b>Date:</b>
    <%= score.fielded %>
 </p>
 <% end %> 
```

* * *

我的学生控制器如下所示：

```
def show
  @student = Student.find(params[:id])
  @scores = @student.scores
  respond_to do |format|
    format.html # show.html.erb
    format.json { render json: @student }
  end
end 
```

* * *

分数数据库中有这个：

```
class CreateScores < ActiveRecord::Migration
   def change
     create_table :scores do |t|
       t.string :student   
       t.integer :score
       t.date :fielded
       t.string :grade
       t.integer :student_id

       t.timestamps
     end
   end
end 
```

* * *

目前，我的代码显示了与该学生相关的所有成绩和日期。当我尝试更改视图代码时

```
@scores.each do |score| 
```

到

```
@scores.order('fielded DESC') do |score| 
```

它没有给我任何结果。我知道仅此一项并不能解决问题，但我不确定为什么这也不起作用。最终，我希望它只显示最新的值。我对 Rails 的经验并不多，因此对于如何推进或更改我的代码的任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T03:59:44.577

尝试

```
@scores.order('fielded DESC').each do |score| 
```

该`each`方法允许您为`@scores`集合中的每个项目生成代码块（内部执行）。该`order`子句修改了集合的结果，但它本身并不屈服于块。

# mercurial - 是否有与 git log --first-parent 等效的 Mercurial？

> ID：15376649
> 
> 赞同：3
> 
> 时间：2013-03-13T03:39:55.467
> 
> 标签：mercurial, hg-log

`git log --first-parent`省略合并提交的第一个父级以外的所有内容。

例子：

```
$ git log --oneline --graph

* 087f5ed Master C
*   36c50a2 Merge branch 'feature'
|\  
| * 98c89df Feature B
| * 89b3a7b Feature A
* | 9a95133 Master B
|/  
* 766c9b0 Master A

$ git log --oneline --graph --first-parent

* 087f5ed Master C
* 36c50a2 Merge branch 'feature'
* 9a95133 Master B
* 766c9b0 Master A 
```

有水银等价物吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-10-03T11:44:53.283

## 直接等效：`hg log -r '_firstancestors(...)'`

有一个直接的等价物：隐藏的修订集`_firstancestors`遵循每个合并的第一父 (p1) 侧。`hg merge [second parent]`在 Mercurial 中，就像在 Git 中一样，第一个父级是在调用时签出的提交。

`hg log -r '_firstancestors(myfeature)'`

'hidden' 表示它以下划线开头，并且没有在帮助等中列出，但如果您知道它存在，仍然可以使用它。我不知道为什么它被隐藏了。

## 例子

这个 revset 别名列出了功能分支上的所有提交，同时忽略所有祖先，只要`master`将其合并到分支中以使其保持最新。（我工作的商店更喜欢合并而不是变基）。

```
[revsetalias]
feature($1) = _firstancestors($1) and not _firstancestors(master)

[alias]
f = log -r "feature($(echo $HG_ARGS| sed 's/^f //'))" 
```

示例用法（使用我自己的日志记录模板）：

```
$ hg f myfeature
o  423 myfeature default/myfeature -- Esteis -- 2016-07-12 -- 123abc
|  this
o    422 -- Esteis -- 2016-07-12 -- 123def
|\   merge master into myfeature
o ~  421 -- Esteis -- 2016-07-12 -- 456abc
|    that
o  420 -- Esteis -- 2016-07-12 -- 789def
|  and the other 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T08:31:28.503

您可以为此使用修订集：

```
hg log -r "p1(merge())" 
```

`merge()`获取所有合并提交并`p1()`获取这些提交的第一个父级。

用于`hg help revsets`获取有关修订集的更多信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T10:24:17.517

```
>hg glog -r 410:426 --template "{rev} - {desc|firstline|fill68}\n"
o    426 - Merge test fixes for dulwich changes and output changes.
|\
| o    425 - Merge incoming fix.
| |\
| | o  424 - getremotechanges: fix incoming support
| | |
o | |  423 - overlay: stop using deprecated tree.entries() method
| | |
| o |  422 - Fix all-version-tests.
| | |
o | |  421 - Test output format tweaks for test-outgoing.
| | |
o | |  420 - test-incoming: fixes for hg 1.7
| | |
| o |    419 - Merge fix for `hg out` failing on empty repo.
| |\ \
| | o |  418 - In some situations where a reference is being used but does not
| | | |  exist in _map_git or _map_hg, silently skip the reference rather
| | | |  than throwing an error. This allows hg outgoing to work on
| | | |  repositories which do not contain any revisions at all.
| o | |  417 - only want heads and tags
| |/ /
| o |  416 - test-url-parsing: update expecations missed by edaadbd99074
| | |
| o |  415 - to be recognized port number in path to repository
| | |
| o |  414 - Unbreak outgoing to non-git repos with hg pre-1.9
| | |
| o |  413 - test fixes for progress cleanup
| |/
| o  412 - Fix mercurial issue2855
| |
| o  411 - Convert dulwich progress into mercurial ui.progress
|/
o  410 - test-incoming: only run on hg 1.7.x and newer 
```

我没有使用 gist 中极度退化的案例，而是使用了真实存储库 DAG（hg-git 存储库）的一部分。我希望，选择*足以说明*正在解决的问题。

~~需要的 revset（用简单的英语）将是~~

**“范围 A:B 没有第二个父级，它是合并集的祖先”**

在修订功能语言（TBT！）

`-r "410::426 - (p2(merge()) or ancestors(p2(merge())))"`

如果将全部变更集作为源代码，则更具可读性的形式将类似于

~~`hg log -r "!(p2(merge()) or ancestors(p2(merge())))"`~~

**编辑 1**

我测试了 revset，重新考虑了方法（而不是排除我只想*将需要添加*到空集），目前我的用例的最近迭代（有错误，找不到解决方案）是

`(p1(ancestors(p1(426))) or p1(426) or 426) and 410::426`

其中（仍然）包括一些不需要的修订

![在此处输入图像描述](../Images/3cee0d425ffdd541d6212825ba89e2e3.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T00:40:55.177

`hg log --follow-first`似乎做了大致相同的事情，但有一些规定：

1.  它已被弃用（我找不到任何解释）。

2.  我不知道如何让它显示除了来自当前变更集的直线历史之外的任何内容（例如，显示来自两个不同头的第一个父级之后的历史（相当于`git log --first-parent branch-a branch-b`），尽管这可能只是因为我对 Mercurial 缺乏了解。

3.  它显示了空的支线`hg log -G`：

    ```
    $ hg log -G --template '{node|short} {desc|firstline}'

    @  51b90923fc9d Master C
    |
    o    bb51d979fd68 Merge branch 'feature'
    |\
    | o  a9ca2597ebbc Feature B
    | |
    | o  d0a54af09272 Feature A
    | |
    o |  77ceb31100be Master B
    |/
    o  b5a0b2c7468f Master A

    $ hg log -G --template '{node|short} {desc|firstline}' --follow-first

    @  51b90923fc9d Master C
    |
    o    bb51d979fd68 Merge branch 'feature'
    |\
    o |  77ceb31100be Master B
    |/
    o  b5a0b2c7468f Master A 
    ```

    上面的示例可能看起来还不错，但请参阅[https://gist.github.com/MaxNanasy/5184202](https://gist.github.com/MaxNanasy/5184202)以获取此行为呈现笨拙输出的示例。

    如果问题 #2 是不可克服的，这个问题可能并不重要，因为`hg log`没有`-G`将是使用`--follow-first`AFAICT 的唯一有用方法。

# jquery - 悬停时从上到下动画图像

> ID：15376652
> 
> 赞同：-3
> 
> 时间：2013-03-13T03:40:33.943
> 
> 标签：jquery, hover, jquery-animate

我正在尝试这样：[http](http://demo.highthemes.com/smartscreen/) : //demo.highthemes.com/smartscreen/ 右上角的图像链接选项卡在那里..悬停它的动画和更改颜色..有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T04:03:29.750

这可能是 jQuery 解决方案的一个很好的起点：

```
$(".on-hover-show-whatever").on('mouseover mouseout', function(event) {
  if (event.type == 'mouseover') {
    $(this).find('.whatever').slideDown(250);
  } else {
    $(this).find('.whatever').slideUp(250);
  }
}); 
```

看看这里的**jsFiddle**：[A little fiddle I did](http://jsfiddle.net/knh7z/)

除此之外，您可以使用带有 :hover 和[CSS 动画](http://www.w3.org/TR/css3-animations/)的纯 CSS 解决方案。

# r - lattice 的 levelplot 函数中 colorkey.space 属性没有影响

> ID：15376656
> 
> 赞同：0
> 
> 时间：2013-03-13T03:40:47.673
> 
> 标签：r, lattice, levelplot

我尝试在左侧绘制颜色键，但是在将属性添加`colorkey.space="left"`到 levelplot 函数时，颜色键根本不动，但仍然在右侧（默认）。任何人都知道这是一个错误，还是我错过了什么？

以下是 levelplot 帮助功能的摘录：

> colorkey - 逻辑指定是在绘图旁边绘制颜色键，还是描述颜色键的列表。该列表可能包含以下组件：
> 
> space：colorkey的位置，可以是“left”、“right”、“top”和“bottom”之一。默认为“正确”。

注意：`colorkey=FALSE`工作得很好

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T03:43:13.833

该措辞意味着您需要传递`list`带有空格等组件的 a

例如

```
 colorkey = list(space = 'left') 
```

使用来自的修改示例`?levelplot`

```
x <- seq(pi/4, 5 * pi, length.out = 100)
y <- seq(pi/4, 5 * pi, length.out = 100)
r <- as.vector(sqrt(outer(x^2, y^2, "+")))
grid <- expand.grid(x=x, y=y)
grid$z <- cos(r^2) * exp(-r/(pi^3))
levelplot(z~x*y, grid, cuts = 50, scales=list(log="e"), xlab="",
          ylab="", main="Weird Function", sub="with log scales",
          colorkey = list(space = 'left') 
```

![在此处输入图像描述](../Images/cefaed7df685b9714327d34efc43ce4a.png)

# javascript - socket.io 是否允许您将自定义数据发送到 tcp 端口？

> ID：15376659
> 
> 赞同：2
> 
> 时间：2013-03-13T03:41:03.743
> 
> 标签：javascript, html, security, websocket, socket.io

我正在尝试确定是否可以使用 JavaScript（例如，使用 socket.io 库）从网页将自定义数据发送到给定的 TCP 端口。

据说 WebSocket API 需要与带有 HTTP/1.1`Connection: Upgrade`标头的 Web 服务器握手，然后才能让您来回传递消息。因此，它似乎不会这样做（除非可以以某种方式避免基于 HTTP 的握手）。

但 socket.io 也有其他传输和功能。那么，它是否允许您将任何类型的自定义数据发送到任何 TCP 端口？换句话说，它是否允许您在原始 TCP 套接字上进行操作，类似于`nc`UNIX 上的 (netcat)？一般来说，有没有办法使用 JavaScript 对原始 TCP 套接字进行操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T04:22:46.100

不，您不能使用基于普通浏览器的 Javascript 直接通过 TCP 发送自定义协议。不过，您可以在 Node.js 中使用 Javascript 来完成，因此一件简单的事情是在您编写的 Node 服务器中接受 websocket 连接，然后将它们作为纯 TCP 代理到实际服务。

# c - 后缀评估 C

> ID：15376664
> 
> 赞同：0
> 
> 时间：2013-03-13T03:41:27.160
> 
> 标签：c, arrays

我很高兴尝试让这个“计算器”类型的程序工作。

我输入了一个算术表达式，它被转换为后缀表示法。（没什么大不了的，我去年就开始工作了）

但是，我无法评估该死的后缀符号！如果您检查 main 中的第一个 while 循环，您会看到这就是我得到分段错误的地方。

如果有人有任何想法，我将不胜感激（大声笑）。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T04:03:46.827

```
int j;

while((ch=postnot[j]) !='\0') 
```

你没有初始化`j`，所以它可能在 -20 亿到 20 亿之间。此外，我认为代码不会起作用，因为您没有在正确的范围内增加 j 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T04:03:55.783

请不要使用“**”来标记代码中的错误。如果您想在示例代码中引起读者注意，请使用注释。

次要的，但是您缺少用于 isdigit() 的标头 ctype.h。调高编译器警告级别以帮助您诊断这些问题。

不要试图以这种方式增加：`j=j++;` 这是未定义的行为。改用就好`j++;`了。

你真的不应该使用gets()。这是很久以前的遗物，不应该在新代码中使用。从它的手册页：

> 不能安全地使用gets() 函数。由于它缺乏边界检查，并且调用程序无法可靠地确定下一个传入行的长度，因此使用此函数可以使恶意用户通过缓冲区溢出攻击任意更改正在运行的程序的功能。强烈建议在所有情况下都使用 fgets() 函数。

我认为您应该仔细检查您对堆栈数据结构的尝试所做的事情，尤其是在调用 push/pop 之前的初始化。您有责任进行边界检查，检查 push() 到已满的堆栈，从空的堆栈中检查 pop()，初始化堆栈以供首次使用等。您的代码忽略了这些问题。

还有更多，但我不断在更多的地方绊倒，在这些地方你通过在其中添加星号而破坏了你的示例。

我不禁觉得你可以避免这个问题，或者至少通过首先修复明显的编译警告/错误结果，你自己可以走得更远。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T04:04:13.790

您的代码包含很多错误。

*   `top`被定义为`-1`并且您正在访问`stack[top]`以进行打印

*   如果您在特定索引处打印字符，而不是字符串，那么您必须使用`%c`in`printf`而不是`%s`

*   您没有`j`在`while`循环内修改变量，也没有`j`在进入循环之前进行intilizing

我纠正了你的一些错误，请试试这个

```
 printf("\nPostfix Notation = %s\n",postnot);
  int j = 0;

 while((ch=postnot[j]) !='\0'){     //THIS IS WHERE I GET SEGMENTATION FAULT 
                           //CORE DUMPED WHILE DEBUGGING
    if(isdigit(ch))
    {
       push(ch - '0');
    }
   else
    {   op2=pop();
        op1=pop();
      switch(ch)
        {
            case '+':push(op1+op2);break;
            case '-':push(op1-op2);break;
            case '*':push(op1*op2);break;
            case '/':push(op1/op2);break;
        }
    }
    j++;
  }
  printf("\nANSWER= %d\n",pop()); 
```

# regex - 修剪sed中尖括号内的空格

> ID：15376668
> 
> 赞同：2
> 
> 时间：2013-03-13T03:41:46.640
> 
> 标签：regex, sed, quotes, n3

我实际上在撰写问题时解决了这个问题，但我认为它可能比我做的方式更整洁。

我想修剪空格和大多数标点符号，除了出现在 <>s 中的 url 合法内容（来自 rdf/n3 实体）。

源文本的一个示例是：
`<this is a problem> <this_is_fine> "this is ok too" .` `<http://WeDontNeedToTouchThis.> <http:ThisContains"Quotes'ThatWillBreakThings> "This should be 'left alone'." .`

输出需要将空格转换为下划线并修剪引号以及 url/iri 中不合法的任何内容。

`<http://This is a "problem">`=>`<http://This_is_a_problem>`

这些都没用。
`sed -e 's/\(<[^ ]*\) \(.*>\)/\1_\2/g' badDoc.n3 | head` `sed '/</,/>/{s/ /_/g}' badDoc.n3 | head`

我的最终解决方案似乎可行，是：
`sed -e ':a;s/\(<[^> ]*\) \(.*>\)/\1_\2/g;ta' badDoc.n3 | sed -e ':b;s/\(<[:/%_a-zA-Z0-9.\-]*\)[^><:/%_a-zA-Z0-9.\-]\(.*>\)/\1\2/g;tb' > goodDoc.n3`

有没有更好的办法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T21:40:53.593

首先，我想说这是一个有趣的问题。它看起来是一个简单的替换问题，但是如果进入它，它并不像我想象的那么容易。当我在寻找解决方案时，**我确实想念 vim ！！！**... :)

我不知道`sed`这个问题是否必须。我会用 awk 来做：

```
awk '{t=$0;
        while (match(t,/<[^>]*>/,a)>0){
                m[++i]=a[0];n[i]=a[0];t=substr(t,RSTART+RLENGTH)
        }
        for(x in n){
                gsub(/[\x22\x27]/,"",n[x])
                gsub(/ /,"_",n[x])
                sub(m[x],n[x])
        }}1' file 
```

用你的例子测试一下：

```
kent$  cat file
<this is a problem> <this_is_fine> "this is ok too" . <http://WeDontNeedToTouchThis.> <http:ThisContains"Quotes'ThatWillBreakThings> "This should be 'left alone'." .

kent$  awk '{t=$0;
        while (match(t,/<[^>]*>/,a)>0){
                m[++i]=a[0];n[i]=a[0];t=substr(t,RSTART+RLENGTH)
        }
        for(x in n){
                gsub(/[\x22\x27]/,"",n[x])
                gsub(/ /,"_",n[x])
                sub(m[x],n[x])
        }}1' file
<this_is_a_problem> <this_is_fine> "this is ok too" . <http://WeDontNeedToTouchThis.> <http:ThisContainsQuotesThatWillBreakThings> "This should be 'left alone'." . 
```

好吧，它并不是真正的单线，看看是否还有其他更短的解决方案。

# javascript - 从对象数组中获取主干模型

> ID：15376687
> 
> 赞同：0
> 
> 时间：2013-03-13T03:44:30.190
> 
> 标签：javascript, arrays, backbone.js

嗨，我有一个来自backbonejs 的集合响应，类似于访问

`this.collection.models`

并返回一个长度为 7 的数组——每个数组里面都有一个模型。

我正在尝试搜索此数组并获取匹配的模型

`_id: Xmas`

但是每次我尝试这样做时，我都会收到错误

```
Object [object Array] has no method 'get' 
```

谁能帮忙！？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T04:06:28.573

你可以试试这个来迭代和获得价值

```
_(collection.models).each(function(t){ 
                //console.log("loop Model"+t)
                t.get("title")
enter your required logic here
            }, this); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T11:48:52.853

您应该使用集合而不是其内部数组模型，然后您可以使用集合中代理的下划线方法，例如：

```
var xmasModel;
xmasModel = this.collection.find(function(item) {
  return item.get("_id") == "Xmas"
}) 
```

# command-line - 在 cmd.exe (Windows XP) 中使用 /affinity 启动可执行文件

> ID：15376688
> 
> 赞同：2
> 
> 时间：2013-03-13T03:44:35.597
> 
> 标签：command-line, windows-xp, affinity

我有一个我正在尝试使用的程序经常崩溃，对此的修复之一是将其设置为仅使用一个处理器。我可以通过任务管理器手动轻松地做到这一点，但我更喜欢双击快捷方式的解决方案。

我试过用这行代码制作 .bat 文件：C:\Windows\System32\cmd.exe /C start /affinity 1 KSP.exe

但是，它只是拒绝运行。删除 /C 开关只会启动 cmdbox。

尝试在 cmdbox 中键入 /affinity 1 KSP.exe（谢天谢地，cmdbox 以 .bat 文件所在的目录开头，该目录与 .exe 所在的文件夹相同，因此没有问题）只会给出以下错误：

无效的开关 - “/affinity”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-17T03:43:27.627

我自己尝试在较旧的 Win XP 32 位设备上运行 KSP 时遇到了同样的问题。cmd.exe 直到 Vista，IIRC 才收到 /affinity 开关。

我意识到 OP 已有一年多的历史了，但是对于某些用户而言，它目前仍然是一个问题。解决方案是使用 Sysinternals 的 psexec.exe 代替 cmd.exe，可以在此处找到：

[http://technet.microsoft.com/en-us/sysinternals/bb897553.aspx](http://technet.microsoft.com/en-us/sysinternals/bb897553.aspx)

Microsoft 的 Sysinternal 的 psexec 的 -a 标志可以在 Windows XP 上设置处理器亲和性：

```
Usage: psexec [\\computer[,computer2[,...] | @file][-u user [-p psswd]][-n s][-l][-s|-e][-x][-i
[session]][-c [-f|-v]][-w directory][-d][-][-a n,n,...] cmd [arguments]
 -a         Separate processors on which the application can run with
            commas where 1 is the lowest numbered CPU. For example,
            to run the application on CPU 2 and CPU 4, enter:
            "-a 2,4" 
```

例如：

```
psexec -a 2 cmd /c "E:Games\KSP\KSP.exe" 
```

将在第二个核心上运行 KSP。（任务管理器中的核心 1）

只需更正系统的路径并将其放入 .bat 或快捷方式的目标字段中即可。

顺便说一句，您需要将 PsTools（或简单的 PsExec.exe）解压缩到 C:\Windows 或系统路径中的另一个文件夹中，或者将其放在您的 KSP 根目录中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-24T09:11:34.650

首先要注意，您必须通过右键 clic 和 sart 作为管理员或通过创建任务来为您的程序提供管理员权限。

因此，在以这些管理员权限启动 cmd 后，您可以通过以下方式启动程序：

```
<code>`start /AFFINITY 1 /B notepad.exe`</code> 
```

使用 procexp，并在记事本进程上右键单击 + 设置关联，您将看到它仅使用处理器 0。

正在做：

```
<code>`start /AFFINITY 1 /B notepad.exe`</code> 
```

你会看到它在处理器 2 上运行。

那么如果你想让你的进程在一半的核心上运行呢？

做这个：

```
<code>`start /AFFINITY AA /B notepad.exe`</code> 
```

在八核上，它将在处理器 1、3、5、7 上运行

*   /AA 代表一半核心，奇数，(1, 3, 5, 7)
*   /A 表示核心的夸脱，奇数，(1, 3)
*   /F 表示前半部分，(0, 1, 2, 3)
*   /FF 代表所有，( 0, 1, 2, 3, 4, 5, 6, 7)

问候。

# python - 如何进一步分析和优化此字符串标记化功能？

> ID：15376690
> 
> 赞同：2
> 
> 时间：2013-03-13T03:44:42.537
> 
> 标签：python, optimization, profiling, iteration, tokenize

如果查看源代码更容易，请随意跳过我冗长的解释！

所以我写了一个函数来标记文本字符串。在最简单的情况下，它接受一个类似的字符串`It's a beautiful morning`并返回一个标记列表。对于前面的示例，输出将是`['It', "'", 's', ' ', 'a', ' ', 'beautiful', ' ', 'morning']`.

这是通过函数的前两行实现的：

```
separators = dict.fromkeys(whitespace + punctuation, True)
tokens = [''.join(g) for _, g in groupby(phrase, separators.get)] 
```

这里要注意的是`It's`get 被拆分为`["It", "'", "s"]`. 在大多数情况下，这不是问题，但有时确实是。出于这个原因，我添加了`stop_words`kwarg，它采用一组要“未标记化”的字符串。例如：

```
>>> tokenize("It's a beautiful morning", stop_words=set("It's"))
>>> ["It's", , ' ', 'a', ' ', 'beautiful', ' ', 'morning'] 
```

这种“取消标记化”通过在标记列表中移动的滑动窗口来工作。考虑下面的模式。窗口被描绘为`[]`

```
Iteration 1:  ['It', "'",] 's', ' ', 'a', ' ', 'beautiful', ' ', 'morning'
Iteration 2:  'It', ["'", 's',] ' ', 'a', ' ', 'beautiful', ' ', 'morning'
Iteration 3:  'It', "'", ['s', ' ',] 'a', ' ', 'beautiful', ' ', 'morning' 
```

在每次迭代中，包含在窗口中的字符串被连接起来，并与`stop_words`. 如果窗口到达令牌列表的末尾并且没有找到匹配项，则窗口的大小增加 1。因此：

```
Iteration 9:  ['It', "'", 's',] ' ', 'a', ' ', 'beautiful', ' ', 'morning' 
```

这里我们有一个匹配，所以整个窗口被一个元素替换：它的内容，连接。因此，在第 9 次迭代结束时，我们得到：

```
"It's", ' ', 'a', ' ', 'beautiful', ' ', 'morning' 
```

*现在*，我们必须重新开始，以防这个新令牌在与它的邻居组合时形成停用词。该算法将窗口大小设置回 2 并继续。 **整个过程在迭代结束时停止，其中窗口大小等于令牌列表的长度。**

这种递归是我的算法效率低下的根源。对于很少取消标记的小字符串，它的工作速度非常快。然而，计算时间似乎随着取消标记的数量和原始字符串的总长度呈指数增长。

以下是该函数的完整源代码：

```
from itertools import groupby, tee, izip
from string import punctuation, whitespace

def tokenize(phrase, stop_words=None):
    separators = dict.fromkeys(whitespace + punctuation, True)
    tokens = [''.join(g) for _, g in groupby(phrase, separators.get)]

    if stop_words:
        assert isinstance(stop_words, set), 'stop_words must be a set'
        window = 2  # Iterating over single tokens is useless
        while window <= len(tokens):
            # "sliding window" over token list
            iters = tee(tokens, window)
            for i, offset in izip(iters, xrange(window)):
                for _ in xrange(offset):
                    next(i, None)

            # Join each window and check if it's in `stop_words`
            for offset, tkgrp in enumerate(izip(*iters)):
                tk = ''.join(tkgrp)
                if tk in stop_words:
                    pre = tokens[0: offset]
                    post = tokens[offset + window + 1::]
                    tokens = pre + [tk] + post
                    window = 1  # will be incremented after breaking from loop
                    break

            window += 1

    return tokens 
```

这里有一些很难处理的数字（无论如何，我能做到的最好）。

```
>>> import cProfile
>>> strn = "it's a beautiful morning."
>>> ignore = set(["they're", "we'll", "she'll", "it's", "we're", "i'm"])
>>> cProfile.run('tokenize(strn * 100, ignore=ignore)')
cProfile.run('tokenize(strn * 100, ignore=ignore)')
         57534203 function calls in 15.737 seconds

   Ordered by: standard name

   ncalls  tottime  percall  cumtime  percall filename:lineno(function)
        1   10.405   10.405   15.737   15.737 <ipython-input-140-6ef74347708e>:1(tokenize)
        1    0.000    0.000   15.737   15.737 <string>:1(<module>)
        1    0.000    0.000    0.000    0.000 {built-in method fromkeys}
      899    0.037    0.000    0.037    0.000 {itertools.tee}
      900    0.000    0.000    0.000    0.000 {len}
        1    0.000    0.000    0.000    0.000 {method 'disable' of '_lsprof.Profiler' objects}
   365450    1.459    0.000    1.459    0.000 {method 'join' of 'str' objects}
 57166950    3.836    0.000    3.836    0.000 {next} 
```

由此我了解到，大部分执行时间都发生在我的函数范围内。如上所述，我*怀疑*不断重置`window`是导致效率低下的原因，但我不确定如何进一步诊断。

**我的问题如下：**

1.  我如何进一步分析此功能以确定它是否确实`window`是导致执行时间长的原因？
2.  我可以做些什么来提高性能？

首先十分感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T04:18:07.773

我可能误解了这个问题，但似乎只是在拆分之前搜索被忽略的单词就可以解决问题：

```
def tokenize(phrase, stop_words=()):
    stop_words = '|'.join(re.escape(x) + r'\b' for x in stop_words)
    other = '\s+|\w+|[^\s\w]+'
    regex = stop_words + '|' + other if stop_words else other
    return re.findall(regex, phrase) 
```

正如迈克尔安德森指出的那样，您应该添加`\b`以避免匹配部分单词

编辑：新的正则表达式将空格与标点符号分开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T04:55:24.033

我投票支持正则表达式！

如果您不关心从标记列表中排除标点符号，您可以这样做

```
import re
text = '''It's a beautiful morning''' 
tokens = re.split(text, ' ') 
```

给你

```
["It's", 'a', 'beautiful', 'morning'] 
```

如果你想删除所有标点符号，你可以

```
tokens = re.split(r'\W+', text) 
```

去取回

['它'，'s'，'a'，'美丽'，'早上']

```
tokens = re.findall(r"\w+(?:[-']\w+)*|'|[-.(]+|\S\w*", text) 
```

# solr - 如何获取solr中的所有groupValue

> ID：15376694
> 
> 赞同：0
> 
> 时间：2013-03-13T03:45:11.303
> 
> 标签：solr

在 solr 中，我必须在我的数据库的“名称”字段中获取 uniqque 值。

出于这个原因，我阅读了有关分组的信息并得到了解构的结果

```
{
  "responseHeader":{
    "status":0,
    "QTime":16,
    "params":{
      "indent":"true",
      "q":"name:И*",
      "group.field":"name",
      "group":"true",
      "wt":"json"}},
  "grouped":{
    "name":{
      "matches":2231,
      "groups":[{
          "groupValue":"ИВАН",
          "doclist":{"numFound":1144,"start":0,"docs":[
              {
                "obshtina":"ПЛОВДИВ",
                "phone":"032/670309",
                "timestamp":"2013-03-04T08:43:53.553Z"}]
          }},
        {
          "groupValue":"ИЛИЯ",
          "doclist":{"numFound":177,"start":0,"docs":[
              {
                "obshtina":"БРЕЗОВО",
                "phone":"(3191)2265",
                .............................. 
```

我得到了第一个 groupValue

```
var  str = xmlhttp.responseText;

                alert (str); //here everything is OK - i get the respone correctly
                var rsp = JSON.parse(str);
                //var rsp = JSON.parse(xmlhttp.responseText);
                var srcAutoComp  = new Array();

alert ("grouped:" + rsp.grouped.name.groups[0].groupValue); 
```

但似乎无论我读了多少，我都无法在 solr 的响应中找到组的数量，因此我可以在一个 cicle 中获得所有的 goupvalues。

F

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T03:50:24.293

您可以使用[group.ngroups](http://wiki.apache.org/solr/FieldCollapsing#Request_Parameters)来获取组的总数。
要获取所有组值，您可以在字段上设置方面，保持方面限制为 -1，这将确保您获得响应中的所有唯一组值。

# fine-uploader - Fine Uploader 的拖放功能可以与 Outlook 附件一起使用吗

> ID：15376695
> 
> 赞同：1
> 
> 时间：2013-03-13T03:45:19.370
> 
> 标签：fine-uploader

我正在使用带有 jQ​​uery 包装器的 Fine Uploader 3.3。如果文件来自桌面，则拖放效果很好。但是，我无法通过拖放操作来处理 Outlook 中的附件。

Fine Uploader 可以通过拖放从 Outlook 接收附件吗？如果是这样，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T11:53:56.300

我不相信这是可能的。请参阅[有关 superuser 的类似问题](https://superuser.com/questions/441747/dragging-attachments-from-outlook-into-applications)。

一个快速的解决方法是将附件拖到桌面，然后将其拖到您的网页中。

# java - Java中的Opencv Android模板匹配

> ID：15376696
> 
> 赞同：2
> 
> 时间：2013-03-13T03:45:25.587
> 
> 标签：java, image, templates, opencv, matching

我正在尝试为我的应用程序创建模板匹配方法。我的应用程序能够从相机或 sd 中获取图像，而我需要做的是在对象的角落寻找符号。我得到了获取图像的代码，但我一直在尝试对图像进行模板匹配。有人可以给我一个基本代码来完成这项任务，也许给我一些标签来说明某些变量是什么。我是 openCV 的新手，仍然是编程新手，只想完全了解正在做的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T12:27:09.317

看看这个例子，它涵盖了 Java 中的模板匹配：

[使用 JavaCV 进行模板匹配](https://gist.github.com/obedrios/2625290)

# wpf - 不同颜色的 WPF 进度条

> ID：15376698
> 
> 赞同：2
> 
> 时间：2013-03-13T03:45:26.710
> 
> 标签：wpf, wpf-controls

我处于警报状态。我想借助颜色在进度条上反映警报状态。如果操作员已处理报警至 30% 状态，则进度条将显示 30% 的颜色，如果操作员已处理至 60%。因此，进度条将以红色显示前 30%，然后以蓝色显示接下来的 30%。

我将进度条的值设置为 30 并获得绿色。我的问题是，当我想将其设置为 60% 时，它会在前 30% 显示绿色，下一个显示红色。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-13T08:17:57.947

下面是给你的例子。为 ProgressBar 设置 MyProgressBarStyle。我使用 LinearGradientBrush 将进度条的背景设置为 30% 红色、30% 绿色和 30% 蓝色。并反转 PART_Indicator。所以你需要使用 SetMyProgressBarValue 函数来设置 ProgressBar 的百分比值。试试它对我有用。

![在此处输入图像描述](../Images/1904cb19d087abf042daf51a0f463ac3.png)

**XAML**

```
 <Grid Background="Gray">
            <Grid.Resources>
               <Style x:Key="MyProgressBarStyle"  TargetType="{x:Type ProgressBar}">
                    <Setter Property="Template">
                        <Setter.Value>
                            <ControlTemplate TargetType="{x:Type ProgressBar}">
                                <Grid MinHeight="14" MinWidth="200">
                                    <Border Name="PART_Track" CornerRadius="2" BorderBrush="Transparent" BorderThickness="1" >
                                        <Border.Background>
                                            <LinearGradientBrush StartPoint="0,0.5" EndPoint="1,0.5">
                                                <LinearGradientBrush.GradientStops>
                                                    <GradientStop Color="red" Offset="0" ></GradientStop>
                                                    <GradientStop Color="red" Offset="0.3" ></GradientStop>
                                                    <GradientStop Color="Green" Offset=".3" ></GradientStop>
                                                    <GradientStop Color="Green" Offset=".3" ></GradientStop>
                                                    <GradientStop Color="Green" Offset=".6" ></GradientStop>
                                                    <GradientStop Color="Blue" Offset=".6" ></GradientStop>
                                                    <GradientStop Color="Blue" Offset="1" ></GradientStop>
                                                </LinearGradientBrush.GradientStops>
                                            </LinearGradientBrush>
                                        </Border.Background>
                                    </Border>
                                    <Border 
                                    Name="PART_Indicator" 
                                    CornerRadius="2" 
                                    Background="Gray" 
                                    BorderBrush="Transparent" 
                                    BorderThickness="1" 
                                    HorizontalAlignment="Right" />
                                </Grid>
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                </Style>
            </Grid.Resources>
            <ProgressBar x:Name="MyProgressBar" Style="{StaticResource MyProgressBarStyle}" Minimum="0" Maximum="100" Height="80" Value="20"></ProgressBar>
        </Grid> 
```

**为 MyProgressBar 设置百分比值的函数**

```
 public void SetMyProgressBarValue(Double percentageValue)
 {
     MyProgressBar.Value = 100 - percentageValue;
 } 
```

# ruby-on-rails-3.2 - 自定义序列化器的输出

> ID：15376701
> 
> 赞同：1
> 
> 时间：2013-03-13T03:45:35.407
> 
> 标签：ruby-on-rails-3.2, active-model-serializers

所以我想使用`[ActiveModel::Serializer][1]`最近添加到 Rails 中的新功能。

如果我这样写我的序列化程序：

```
class PatientSerializer < ActiveModel::Serializer
  attributes :patient_money, :doctor_name

  def doctor_name
    object.doctor.name
  end
end 
```

我得到的 JSON 是这样的：

```
[
// HERE.... 
   {
      "patient_money":"40.0",
      "doctor_name":"Ostad"
   },
   {
      "patient_money":"30.0",
      "doctor_name":"Oz"
   },
   {
      "patient_money":"20.0",
      "doctor_name":"Phil"
   }
] 
```

这与我想要的非常接近，但是在我在`HERE`上面放置“”评论的地方，我想要一个 JSON 包装层，所以我可以说例如`my_results`，然后将这三个 JSON 结果包装在它周围，就像一个数组一样，就像当我们在 JBuilder 中创建一个新元素时，我们说`json.my_results`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T04:06:33.893

好，我知道了。在发送 a的**控制器**`respond_with(@blah)`中，我应该传递一个根元素并将其命名为我喜欢的任何名称，例如：

```
respond_with(@blah, root: 'my_results') 
```

# c++ - c++ 类成员函数

> ID：15376704
> 
> 赞同：0
> 
> 时间：2013-03-13T03:46:02.657
> 
> 标签：c++

使用下面的代码，在类中声明成员函数，它提示用户输入各种输入，如小时和工资。

```
cout << endl << "Now please input info #1" << endl;
Info p1;
cout << endl << "Now please input info #2" << endl;
Info p2;
p2.combineinfo(p1);  /**< combines the info, like hours, pay, ect.  */
printinfo(pnew);  /**< prints out the combined paycheck information  */ 
```

信息输入`p1`准确`p2`，因为我可以用`cout`. 但是，`p2.combineinfo(p1)`再次提示输入一组信息。我不想要这个，我只需要将它传递给这个函数进行组合，然后用`printinfo();`.

```
Info Info::combineInfo(Info p1)
{
Info p2;
Info pnew;
pnew.name = p1.name;
pnew.hours = p1.hours + p2.hours;
pnew.total = p1.total + p2.total;
return pnew;
} 
```

更新信息：

```
Info::Info()
{
string dummy;
cout << "question here"<<endl;
getline(cin, a);
cout <<"question here"<<endl;
cin >> b;
getline(cin, dummy);
cout <<"question here"<<endl;
cin >> c;
getline(cin, dummy);
cout << "quesiton here"<< endl;
initializeDate(start);
cout << "question here "<< endl;
initializeDate(finish);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T03:54:51.077

您没有显示它，但您可能在 Info 构造函数中要求输入。就像是：

```
Info::Info()
{
   cout << "Enter name: ";
   cin >> name;
   cout << "Enter hours: ";
   cin >> hours;
   cout << "Enter total: ";
   cin >> total;
} 
```

因此，在 combineInfo 中，您创建了 Info 类的两个对象，因此构造函数运行并要求每个对象输入。只是不要询问构造函数中的值。添加另一个方法 AskForInput 来询问值，而不是从构造函数中调用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T03:55:17.913

我猜你正在从你的构造函数中读取来自 stdin 的输入信息（你能发布这段代码吗？）。因此，当您再次创建 p2 和 pnew 时，它调用的是相同的代码。

我建议你有单独的代码来用标准输入初始化变量，而不是你的构造函数。否则，关于它被调用，你无能为力！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T03:54:18.267

由于我最终输入了很多评论，因此我将其合并为一个答案：

根据其他答案，您的问题是您`Info`在函数中调用构造`combineInfo`函数，并且在构造函数中提示用户。在构造函数中使用通常是个坏主意`std::cin`- 如果您（或您的代码的用户）决定在`std::cin`不合适的情况下使用代码（例如，当您后来决定升级到 GUI 时）怎么办？如果你想用预先确定的数据构造对象怎么办？还是在单元测试中？

事实上，您自己的代码提供了这样一个示例：您已经定义`Info`了一种方式，即构建它的唯一方式是向用户询问信息。但是，您有*两种*实际想要构造对象的方法 - (1) 通过提示用户输入信息，以及 (2) 通过组合*已经存在*于其他两个`Info`对象 (`p1`和`p2`) 中的信息。

更好的解决方案是让构造函数通过参数 - 接收数据`Info::Info(string name, int hours, int total)`，从类外的用户获取信息（适当时），并将其传递给构造函数。

或者，如果您决定将`cin`代码保留在构造函数中，则不要使用`compareInfo()`函数 - 创建*第二个*构造函数，它将两个`Info`对象作为参数，并将代码放在那里：

```
Info::Info(Info p1, Info p2)
{
    name = p1.name;
    hours = p1.hours + p2.hours;
    total = p1.total + p2.total;
} 
```

然后像这样进行组合：

```
Info pnew(p1, p2); 
```

编辑：您已经评论说必须遵守一个标准，即组合必须发生在`Info Info::combineInfo(Info)`函数内部。这很尴尬，因为您的构造函数会提示输入信息，并且您必须在成员函数内构造一个临时`Info`对象：

```
Info Info::combineInfo(Info p1)
{
Info pnew; // Temporary Info object
pnew.name = p1.name;
pnew.hours = p1.hours + hours;
pnew.total = p1.total + total;
return pnew;
} 
```

你有我能想到的三个解决方案，没有一个特别有吸引力（我很惊讶老师会把这个要求强加给你）：

(1) 提供一个不提示输入信息的构造函数。但是，它必须具有与请求信息的签名不同的签名，因为您不能两次定义默认构造函数：

```
Info::Info()
{
   // Prompt user.
}

Info::Info(int dummyValue)
{
   // Do nothing.
} 
```

然后，当您创建`pnew`对象时，调用第二个构造函数：`Info pnew(0);`.

(2) 根本不提供默认构造函数，而是创建一个您告知是否提示的构造函数：

```
Info::Info(bool prompt)
{
    if (prompt)
    {
        // Construct object by prompting user.
    }
    // No need to do an else, simply do nothing if !prompt
} 
```

这样做的缺点是您必须始终提供一个参数来构造 Info 对象：

```
Info p1; // Error, no default constructor
Info p1(true); // Construct by prompting
Info pnew(false); // Construct without prompting 
```

（3）根本不要创建临时`pnew`文件，只需修改`p1`并返回它。这是一种糟糕的风格，只有在您`p1`按值传递时才有效（因此您没有修改原始的`p1`）：

```
Info Info::combineInfo(Info p1)
{
// No need to do anything with name since it's p1's name you want anyway
p1.hours += hours;
p1.total += total;
return p1;
} 
```

* * *

## 其他的建议：

您的代码中还有几个错误：

```
cout << endl << "Now please input info #1" << endl;
Info p1;
cout << endl << "Now please input info #2" << endl;
Info p2;
p2.combineinfo(p1); // You are not saving the return value.
printinfo(pnew);  // pnew does not exist, see above. 
```

将代码更改为：

```
cout << endl << "Now please input info #1" << endl;
Info p1;
cout << endl << "Now please input info #2" << endl;
Info p2;
Info pnew = p2.combineinfo(p1); // Now you are saving the result.
printinfo(pnew);  // pnew now exists. 
```

第二个错误如下：

```
Info Info::combineInfo(Info p1)
{
Info p2; // You're creating a new p2 object, this is
         // NOT the p2 you called the function on.
Info pnew;
pnew.name = p1.name;
pnew.hours = p1.hours + p2.hours; // Wrong p2
pnew.total = p1.total + p2.total; // Wrong p2
return pnew;
} 
```

由于构造函数问题，这*似乎*只对您正常工作 - 系统会提示您输入`combineInfo`'s的信息`p2`，因此它最终与`p2`您实际打算使用的相同（假设您再次输入相同的数据)，并且似乎正确地组合了它们。改为这样做：

```
Info Info::combineInfo(Info p1)
{
// Info p2; // Delete this line
// your intended p2 is passed to the function as the implicit parameter.
Info pnew;
pnew.name = p1.name;
pnew.hours = p1.hours + hours; // hours refers to implicit parameter
pnew.total = p1.total + total; // total refers to implicit parameter
return pnew;
} 
```

`hours`在这种情况下，是 and的`total`简写。`this.hours``this.total`

供将来参考的另一件事是重载`+`运算符而不是编写组合函数：

```
Info Info::operator+(Info p1)
{
Info pnew;
pnew.name = p1.name;
pnew.hours = p1.hours + hours;
pnew.total = p1.total + total;
return pnew;
} 
```

现在代替：

```
Info pnew = p2.combineInfo(p1); 
```

你可以写：

```
Info pnew = p1 + p2; 
```

最后，考虑通过引用而不是值传递 - 对于非平凡的对象，函数取消引用地址而不是制作它的新副本通常更快：

```
Info Info::combineInfo(const Info& p1); // p1 passed by reference
                                        // const replicates the behaviour
                                        // of pass by value whereby
                                        // you cannot accidentally modify
                                        // the original object. 
```

编辑：但是如果您使用上面的解决方案 3，请不要这样做，否则您将修改您`p1`可能不希望的原始文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T03:55:30.903

大概您已经决定使用默认构造函数来`Info`读取值。然后在该方法中，`combineInfo`您再次有几个必须执行相同操作的构造函数。

您可以通过在构造后提示输入数据的方法来避免该问题。如果您显示可能有帮助的构造函数代码。

话虽如此，该方法很可能应该是：

```
void Info::combineInfo(const Info& p1)
{
    name = p1.name; // Why not keep p2.name?
    hours += p1.hours;
    total += p1.total;
} 
```

然后调用：

```
printInfo(p2); 
```

# sql - 为每个数据库运行长 SQL 脚本

> ID：15376706
> 
> 赞同：1
> 
> 时间：2013-03-13T03:46:12.160
> 
> 标签：sql, sql-server, sql-server-2008

我有一个很长的 SQL 脚本，我想在一台服务器上为我的每个数据库运行。最好的方法是什么？

我在研究中发现了这一点：

```
EXEC    sp_msforeachdb  "
IF      '?'     IN ('lib1','lib2','lib3')   

BEGIN
        use ?;
        exec 'my_sp_long_sql_script'
END
" 
```

我试过了，但它需要我在每个库中创建 sp，这违背了循环的目的。或者我如何自动为每个库创建一个 sp？

我要做的就是为我的每个数据库运行我的 long_sql_script。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T16:24:32.883

使用存储过程的完全限定名称而不是其相对名称，从定义它的任何位置检索它。这就是 SQL Server 本身的工作方式。

# ssis - 从非直接 HTML 链接获取图像

> ID：15376708
> 
> 赞同：0
> 
> 时间：2013-03-13T03:46:23.973
> 
> 标签：ssis, screen-scraping

我们有几个 SSIS 作业可以很好地在网站上获取图像和各种预期的图形。无法弄清楚如何从以下站点（示例）获取图像。

[http://tess2.uspto.gov/ImageAgent/ImageAgentProxy?getImage=77666637](http://tess2.uspto.gov/ImageAgent/ImageAgentProxy?getImage=77666637)

对 SSIS 技术有什么想法吗？我希望我不必做屏幕截图或类似的事情......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T02:14:23.037

您可以使用脚本任务来获取图像。以下文章为您提供了一个示例代码，您可以调整它以保存图像文件而不是文本文件。

这是链接：[http ://www.sqlis.com/sqlis/post/Downloading-a-file-over-HTTP-the-SSIS-way.aspx](http://www.sqlis.com/sqlis/post/Downloading-a-file-over-HTTP-the-SSIS-way.aspx)

# timer - 在 Action Script 2.0 中组合或添加值？

> ID：15376716
> 
> 赞同：0
> 
> 时间：2013-03-13T03:47:23.707
> 
> 标签：timer, actionscript-2, add, number-formatting

我是 AS 的新手，并尝试使用任一函数数组来组合值来添加值，但它们确实一直显示 NaN。

```
function combine(a, b, c):Number{
  return a + b + c;  
}
var total = combine(myTimer1, myTimer2, myTimer3);  
totalTimers.text = total; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T10:12:20.757

在没有看到生成的代码部分的情况下，`myTimer1`我无法确定发生这种情况的确切原因，但似乎这些变量要么不是类型，要么具有or的值。`myTimer2``myTimer3``Number``null``undefined`

我建议从追踪`myTimer1`,`myTimer2`和`myTimer3`（或在调试器中检查它们）的值开始，看看是哪一个导致了问题。

# c# - 在哪里保存我想在多个 ViewModel 之间共享的对象实例

> ID：15376724
> 
> 赞同：1
> 
> 时间：2013-03-13T03:48:24.487
> 
> 标签：c#, wpf, mvvm, architecture

我正在使用 MVVM 在 C# 和 xaml 中构建游戏。该游戏包含一个带有新游戏选项的主菜单。新的游戏按钮会将您带到玩家选择页面，您可以在其中键入两名玩家的姓名并选择是玩家对玩家游戏还是玩家对电脑游戏。然后您到达游戏屏幕并开始游戏。

我的问题是，我将持久性信息保存在一个`Game`包含诸如`Player Player1`and`Player Player 2`和`ReactiveCollection<Tile> Tiles`等属性的对象中。我应该让`Game`实例静态并完成还是有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T16:00:55.283

我会使用游戏服务。

```
public interface IGameService
{
    Player PlayerOne { get; set; }
    Player PlayerTwo { get; set; }
    Tiles ReactiveCollection { get; set; }
} 
```

然后，在创建视图模型/应用程序时，可以使用 IOC / 依赖注入将您的服务解析为一个类。这样，您可以创建一个可供任何视图模型使用的服务类的单例，但它是解耦和可测试的。然后，实现您的 IGameService 的类可以获取来自游戏的信息/数据，但是它想要这也使其灵活。您可以更改信息传递的方式，而无需更改使用该服务的视图模型。

# windows - 是否有我们可以用来读取条形码的 Windows 8 API？

> ID：15376726
> 
> 赞同：0
> 
> 时间：2013-03-13T03:48:33.683
> 
> 标签：windows, windows-8, microsoft-metro

我正在寻找一个 HTML/javascript 示例，我可以在 Windows 8 应用程序上使用它来读取条形码。

有几个应用程序可以读取商店中的条形码。但是，他们必须使用 C# 之类的东西，因为我找不到使用 HTML/Javascript 来读取条形码的示例。我知道条形码有特定的要求，但我只是在这里寻找样本。

有谁知道我在哪里可以找到一个简单的样本？

谢谢你的阅读。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T05:48:29.807

是的 - ZXing 是一个用于读取一维和二维条码的开源库。有几个端口，包括一个用于 WinRT 的端口，可以在这里找到：http: [//zxingnet.codeplex.com/](http://zxingnet.codeplex.com/)。您应该能够在您的应用程序中将其作为组件引用并从 WinJS 调用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T05:33:23.603

您好，您可以查看此链接： [http](http://www.activebarcode.com/) ://www.activebarcode.com/ - 为您的 APP 提供条形码 API。它也可以与 VB.net、C# 一起使用。它还为您提供不同种类的条形码格式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-03T07:54:51.583

你好，

我使用 ZXing & Imaging SDK 为 WinRT 创建了一个库。它运作良好（但不包括任何额外的焦点功能）。 [https://github.com/stepheUp/VideoScanZXing4WP81](https://github.com/stepheUp/VideoScanZXing4WP81) 有一个库和一个示例应用程序，您可以尝试。它适用于条形码和二维码（默认为条码，但只需将扫描功能码中的可选参数更改为使用二维码）

希望它有帮助，斯蒂芬妮

# ruby - 在控制台上浏览 ruby gems 文档的最佳方式

> ID：15376727
> 
> 赞同：1
> 
> 时间：2013-03-13T03:48:40.647
> 
> 标签：ruby

在 Web 上很容易找到 ruby​​gems 文档，但我想在我的控制台上阅读它们。

`ri`对我来说是不够的，因为在阅读 ri 之前我必须知道类或方法的名称。然而，那个时候，除了包名，我什么都不知道！

所以我需要最快的方法来找到 ruby​​gems 的概要，比如 perldoc。

有什么好办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T05:03:12.737

您是否尝试过`ri`在命令行输入并按下`Return`then，在提示符处输入您感兴趣的内容的第一个字母，按下`Tab`两次，然后让它显示匹配项？或者，输入一个字母并按下`Return`，让 ri 显示以该字母开头的内容？或者，从命令行，只需键入`ri -l`?

或者，您是否尝试过`gem server`在命令行输入，然后打开浏览器窗口来`http://0.0.0.0:8808`查看当前 Ruby 中安装的 gems 的文档？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T03:51:29.767

如果您使用的是 Bundler，您可以随时执行以下操作：

```
$ bundle open gemname 
```

这将打开您的 gem，`$EDITOR`允许您查看`README.rdoc`（或作者用作根文档的任何内容），更不用说所有源代码了。调试时也很有帮助！

# python - ValueError 尝试在 python 中使用 datetime.strptime 格式化日期

> ID：15376732
> 
> 赞同：0
> 
> 时间：2013-03-13T03:49:58.520
> 
> 标签：python, datetime

如果我这样做：

```
dss = datetime.date.today()
print dss.strftime('%d/%m/%y %I:%M %p') 
```

我得到：`12/03/13 12:00 AM`

但是，如果我这样做：

```
print datetime.datetime.strptime("10/25/09 03:01 AM",'%d/%m/%y %I:%M %p') 
```

我明白了

```
ValueError: time data '10/25/09 03:01 AM' does not match format  '%d/%m/%y %I:%M %p' 
```

我在看什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T03:54:12.990

当所需格式为 d/m/y 时，您将给出 m/d/y 格式的日期。将 25 转换为一个月时遇到问题

# asp.net - 我可以只编译一个类文件并使用它吗？

> ID：15376733
> 
> 赞同：0
> 
> 时间：2013-03-13T03:49:59.113
> 
> 标签：asp.net, publishing-site

我有一个 asp.net 应用程序，其中有包含不同类的 App_code 文件夹。每当我发布我的应用程序时，它都会为所有类创建一个 App_Code.dll，这很好，但现在我必须再添加一个类，但我只想发布那个类文件。是否可以？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T03:59:08.727

然后你不应该发布，按原样放置代码，它会根据第一个用户的请求进行编译。每当添加新类时，AppPool 就会重新启动。当然，这对于第一个用户来说是缓慢的，之后它与发布类似。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T04:34:45.087

尝试在解决方案中添加新项目（类库），在该项目中添加您的类文件。并通过在另一个项目中添加引用来使用它。

# asp.net - 从 twilio 试用号发送短信

> ID：15376735
> 
> 赞同：0
> 
> 时间：2013-03-13T03:50:14.103
> 
> 标签：asp.net, twilio

我已经用 twilio 验证了我自己的手机号码，但该号码来自马来西亚的服务提供商。我做了代码来发送短信，但我无法在我的号码上收到它。我需要美国或加拿大号码，还是必须从 twilio 购买号码才能测试代码。以下是代码：

**WebForm1.aspx**

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="WebForm1.aspx.cs" Inherits="WebApplication4.WebForm1" %>

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <h4>To Number: </h4>
        <asp:TextBox ID="ToNumber" TextMode="password" runat="server"></asp:TextBox>
        <h4>SMS Message</h4>
        <asp:TextBox ID="Message" runat="server"></asp:TextBox>
        <br/>
        <br/>
        <br/>
        <asp:Button ID="SendMessage" OnClick="SendMessage_OnClick" runat="server" Text="Send Message" />

    </div>
    </form>
</body>
</html> 
```

**WebForm1.aspx.cs**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Configuration;
using Twilio;
namespace WebApplication4
{
    public partial class WebForm1 : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)

   {

    }

    protected void SendMessage_OnClick(object sender, EventArgs e)
{
        string ACCOUNT_SID = ConfigurationManager.AppSettings["ACCOUNT_SID"];
        string AUTH_TOKEN = ConfigurationManager.AppSettings["AUTH_TOKEN"];

        TwilioRestClient client= new TwilioRestClient(ACCOUNT_SID, ACCOUNT_SID);
        client.SendSmsMessage("(862) 373-1913", ToNumber.Text, Message.Text);

}
} 
```

}

我已经用 Visual Studio 2012 检查了代码是否正常，但似乎仍然无法接收短信。我应该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-14T20:27:52.277

利用：

```
var result = client.SendSmsMessage("(862) 373-1913", ToNumber.Text, Message.Text); 
```

看看`result`。如果大多数字段为空，请查看`result.RestException`. 一个常见的问题是身份验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T04:27:26.300

twilio 不支持某些数字，例如以 94,87 开头。通过它与沃达丰公司号码一起工作。请尝试一下。

# javascript - 在正则表达式找到 javascript 后返回子或父

> ID：15376737
> 
> 赞同：0
> 
> 时间：2013-03-13T03:50:27.100
> 
> 标签：javascript, regex, variables, dom

希望这是一个可以回答的快速问题。运行正则表达式后是否有可能返回找到它的 dom 元素的父元素？

任何示例代码将不胜感激。

所以我希望基本布局。

表达式的变量

一个 if 语句来检查 text 的值是否存在

另一个 if 语句，如果它返回 true 并让它根据找到文本的位置更改表中的变量 x 值“document.getElementsByTagName("table:)[x]. "

例如，如果 html 文档中有三个表，但只有一个表包含单词“cat”，则可以在 dom 树中返回该 TagName 的 id 以及正则表达式存在的位置

像这样的东西：

```
mybody      = document.getElementsByTagName("body")[0];
mytable     = mybody.getElementsByTagName("table")[Variable Based On Where the text        is]; 
```

我希望它就像正则表达式变为真并允许我在设置上面的变量时返回真事件的父 ID 一样简单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T04:25:37.423

如果您可以使用 XPath，这将是答案：

```
var iterator = document.evaluate(
    '//table[contains(descendant-or-self::text(), "string to search")]', 
    document.body
);

while ((node = iterator.iterateNext()) !== null) {
  // this should be a <table> element
} 
```

# wordpress - 带有自定义菜单的 Wordpress 自定义帖子类型

> ID：15376738
> 
> 赞同：1
> 
> 时间：2013-03-13T03:50:33.323
> 
> 标签：wordpress, plugins, submenu

我已经成功地为我正在开发的 Wordpress 插件创建了一个名为“mycustompost”的自定义帖子类型，并将其添加为子菜单项而不是顶部菜单。

导航结构一直有效，直到您尝试添加或编辑自定义帖子，此时导航没有打开父菜单，但选择了子菜单。

我的问题是如何告诉 WordPress 所有 mycustompost 页面（查看/添加/编辑/删除）应该将 mycustompost 父菜单设置为活动状态？

这是我正在使用的代码的精简版本。

```
$supports = array('title', 'editor', 'revisions');
      register_post_type( 'mycustompost',
        array(
          'labels' => $labels,
          'public' => true,
          'exclude_from_search' => true,
          'publicly_queryable' => false,
          'supports' => $supports,
          'show_in_menu' => false,
          'show_ui' => true,
        )
      );

add_submenu_page($parent_menu["name"], 'My Custom Submenu', 'My Custom Submenu', $addon_menu["permission"], 'edit.php?post_type=mycustompost'); 
```

# facebook-graph-api - 货币 URL 出现 (#100) 错误

> ID：15376739
> 
> 赞同：0
> 
> 时间：2013-03-13T03:50:38.833
> 
> 标签：facebook-graph-api, oauth, facebook-apps

我们正在为 Facebook 应用设置付款。一切正常，除了在将货币文件图形对象与应用程序关联时遇到问题。收到上述错误，通过对象资源管理器仔细检查对象是否有效，并且应用程序令牌也有效。

# tfs - 如何获取 TFS 选项字段的选项列表？

> ID：15376741
> 
> 赞同：0
> 
> 时间：2013-03-13T03:50:57.373
> 
> 标签：tfs, tfs-sdk

我正在研究 TFS API 2010。

我想获取一个字段的可用选项列表来创建一个 Combobox 控件。如：

优先级--> [1,2,3,4] 严重性-->['4-low','3-medium','2-height','1-Critical']

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T04:22:50.157

您需要从 TFS 导出 WorkItemType 定义，然后在 xml 中找到该字段并使用其中的值。下面是我用来获取转换列表的代码片段，如果您认为选项可能在全局列表中，那么您将在导出方法中设置标志为 true。

```
 public List<Transition> GetTransistions(WorkItemType workItemType)
    {
        List<Transition> currentTransistions;

        // See if this WorkItemType has already had it's transistions figured out.
        this._allTransistions.TryGetValue(workItemType, out currentTransistions);
        if (currentTransistions != null)
        {
            return currentTransistions;
        }

        // Get this worktype type as xml
        XmlDocument workItemTypeXml = workItemType.Export(false);

        // Create a dictionary to allow us to look up the "to" state using a "from" state.
        var newTransitions = new List<Transition>();

        // get the transitions node.
        XmlNodeList transitionsList = workItemTypeXml.GetElementsByTagName("TRANSITIONS");

        // As there is only one transitions item we can just get the first
        XmlNode transitions = transitionsList[0];

        // Iterate all the transitions
        foreach (XmlNode transition in transitions)
        {
            // save off the transition 
            newTransitions.Add(new Transition { From = transition.Attributes["from"].Value, To = transition.Attributes["to"].Value });
        }

        // Save off this transition so we don't do it again if it is needed.
        this._allTransistions.Add(workItemType, newTransitions);

        return newTransitions;
    } 
```

过渡是我的一个小班，如下所示。

```
public class Transition
{
    #region Public Properties

    public string From { get; set; }

    public string To { get; set; }

    #endregion
} 
```

# php - 如何使用基本按钮添加这个

> ID：15376747
> 
> 赞同：0
> 
> 时间：2013-03-13T03:51:56.007
> 
> 标签：php, smarty, addthis

我在我的网站中使用[AddThis共享按钮。](http://www.addthis.com/)我现在面临两个小问题。

1.  在页面 url 末尾实现添加此按钮后，我可以看到一个新链接为“#.UT_2jzd9X5I”。它是什么？有什么办法可以隐藏吗？

2.  如何在我的网站中自定义和使用基本的 AddThis 共享按钮。

例如，我只想使用 Facebook、Twitter、Digg 和 StumbleUpon 按钮。如何自定义显示哪些按钮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T04:14:00.917

井号后面的随机字符用于跟踪访问者复制+粘贴 URL 的推荐。这可以通过在包含 addthis javascript 之前包含此行来禁用：

```
<script type="text/javascript">var addthis_config = {"data_track_addressbar":false};</script> 
```

您还可以更改显示的共享链接（取自他们的[文档](http://support.addthis.com/customer/portal/articles/381263-addthis-client-api#.UT_8ijvF3DY)）

```
<div class="addthis_toolbox addthis_default_style">
    <a class="addthis_button_facebook" style="cursor:pointer"></a>
    <a class="addthis_button_twitter" style="cursor:pointer"></a>
    <a class="addthis_button_email" style="cursor:pointer"></a>
</div> 
```

# c++ - 从 IStream 读取到缓冲区（音频）

> ID：15376748
> 
> 赞同：1
> 
> 时间：2013-03-13T03:52:13.410
> 
> 标签：c++, audio, buffer, sapi, istream

我基本上是在尝试将音频流的内容读入 char * 缓冲区以应用 FFT。我正在使用 SAPI 来简化应用 FFT 后需要进行的转换。

我有一个在 HGLOBAL 上分配的 IStream 缓冲区

```
// Address of IStream* pointer variable that receives the interface pointer to the new stream object.
CComPtr<IStream> pMemStream;
// A memory handle allocated by the GlobalAlloc function, or if NULL a new handle is to be allocated instead.
HGLOBAL hGlobal = GlobalAlloc(GMEM_MOVEABLE, sizeof(pMemStream));
// Create stream object that uses an HGLOBAL memory handle to store the stream contents.
hr = ::CreateStreamOnHGlobal(hGlobal, TRUE, &pMemStream); 
```

然后我将 wav 内容写入此流

```
// Variable to receive ISpStream pointer
CComPtr<ISpStream> cpSpStream;
hr = cpSpStream.CoCreateInstance(CLSID_SpStream);
hr = cpSpStream->SetBaseStream(pMemStream, SPDFID_WaveFormatEx, defaultStreamFormat.WaveFormatExPtr());
hr = cpVoice->SetOutput(cpSpStream, TRUE);
hr = cpVoice->Speak(L"This is a phrase.", SPF_DEFAULT, NULL); 
```

我可以通过说出流来验证流是否包含 wav 内容：

```
// Speak the modified stream.
cpVoice->SetOutput(NULL, FALSE);
cpVoice->SpeakStream(cpSpStream, SPF_DEFAULT, NULL); 
```

但是，当我尝试获取流的缓冲区时，我只读取垃圾数据（缓冲区中的所有“=”）。

```
IStream *pIstream;
cpSpStream->GetBaseStream(&pIstream);
STATSTG stats;
pIstream->Stat(&stats, STATFLAG_NONAME);
ULONG sSize = stats.cbSize.QuadPart;
ULONG bytesRead;
char *pBuffer = new char[sSize];
pIstream->Read(pBuffer, sSize, &bytesRead); 
```

我究竟做错了什么？这让我发疯了。谢谢，-弗朗西斯科

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T06:22:27.947

SAPI 写入流后，流位置在末尾，因此 IStream::Read 会将其“读取”输出设置为零字节。

在从流中读取之前，调用 IStream::Seek(zero, STREAM_SEEK_SET, NULL) 并且您将能够读取数据。

# java - 如何从 JSP 运行 Hadoop 命令

> ID：15376750
> 
> 赞同：1
> 
> 时间：2013-03-13T03:52:23.900
> 
> 标签：java, linux, jsp, hadoop

要运行 hadoop 程序，使用的命令是

```
hadoop/bin/hadoop jar hadoop/Anagram.jar com.hadoop.examples.anagrams.AnagramJob /user/hadoop-user/testdir /user/hadoop-user/outputdir 
```

来自残疾人。

我需要从 APACHE TOMCAT 7.0 中托管的 JSP 页面运行此命令。在 JSP 中运行 linux 命令。

```
out.println(Runtime.getRuntime().exec("mkdir /tmp/testdirectory")); 
```

它工作正常。但我需要运行这个 hadoop 命令。

关于[这个问题](https://stackoverflow.com/questions/15361470/change-pwd-of-linux-from-jsp)，我已经这样做了

```
 <%
try{

out.println(Runtime.getRuntime().exec("start-all.sh"));
ProcessBuilder pb = new ProcessBuilder("hadoop jar hadoop/Anagram.jar com.hadoop.examples.anagrams.AnagramJob /user/hadoop-user/testdir /user/hadoop-user/outputdir5677");
pb.directory(new File("/home/hadoop-user/hadoop/bin/"));
Process p = pb.start();

}
catch(Exception e)
{ out.println("Error"+e);
}
%> 
```

但它抛出异常

> java.lang.UNIXProcess@5a8a7e Errorjava.io.IOException：无法运行程序“hadoop jar hadoop/Anagram.jar com.hadoop.examples.anagrams.AnagramJob /user/hadoop-user/testdir /user/hadoop-user/outputdir5677” （在目录“/home/hadoop-user/hadoop/bin”中）：java.io.IOException：error=2，没有这样的文件或目录

当我这样使用时，我该如何解决我的问题。我需要运行这个命令。但这个问题与路径有关。：（ 任何帮助，将不胜感激！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T03:57:21.083

尝试：`./hadoop jar hadoop/Anagram.jar ...`

使用的 PATH 可能不包含“.”或当前目录。

这将使它搜索您所在的 bin 目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-08T13:15:36.927

ProcessBuilder 采用逗号分隔的参数，而不是像 post 中的整个命令。搜索 ProcessBuilder 示例

# c# - C#中的XML反序列化

> ID：15376755
> 
> 赞同：0
> 
> 时间：2013-03-13T03:52:51.203
> 
> 标签：c#, serialization, xml-serialization

我有一个以前序列化的课程。我们有它的 xml 输出。当我们打开项目时，我们反序列化 xml 以获取保留的对象。现在我在类中添加了新的 bool 属性，因为它是一个新属性，旧的 xmls 没有这个属性。我的反序列化工作正常，但将 false 分配给 bool 属性，如果 XML 中不存在，我希望它设置为 true。我怎样才能做到这一点？我试过这样

```
public bool? _flag;
[XmlElement("Flag")]
public bool? flag
{
    get
    {
        if (null != _flag)
        {
            return _flag;
        }
        return true;
    }
    set { _flag= value; }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T04:41:15.227

您只需要添加默认构造函数并将其设置在那里。这是一个例子：

```
public MyObject()
{
    Flag = true;
} 
```

**编辑**

我不确定您的代码中发生了什么，但这完全可以正常工作：

```
public class MyObject
    {
        public MyObject()
        {
            Flag = true;
        }

        public bool Flag { get; set; }

        public string Name { get; set; }
    } 
```

首先，我没有 bool 属性并将其序列化到文件中。然后在第 2 步中，我添加了 bool 属性和构造函数。然后从磁盘反序列化它并显示`true`，这是我所期望的。

请检查您的代码，因为我预计会发生其他事情。如果您需要帮助，请在此处发布完整课程。

# javascript - Tablesorter - 按 td 类排序

> ID：15376756
> 
> 赞同：1
> 
> 时间：2013-03-13T03:52:59.313
> 
> 标签：javascript, jquery, sorting, tablesorter

我正在尝试使用 tablesorter 按类对列进行排序。该类将确定背景图像以指示真/假。

列中的两种类型的类将是：

```
<td class='icon silk-cross'>
<td class='icon silk-tick'> 
```

我已经尝试将此代码作为自定义解析器，但尚未提出有效的解决方案。

```
 $.tablesorter.addParser({
    id: 'truefalse',
    is: function(s) {
      return false;
    },
    format: function(s, table, cell) {
      var $cell = $(cell);
      return $cell.attr('class') || s;
    },
    type: 'text'
  }); 
```

有没有办法访问每个单元格的属性？

**编辑：** jsfiddle 在[http://jsfiddle.net/LtyMN/](http://jsfiddle.net/LtyMN/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T15:30:58.393

您只需要在`headers`选项 ( [demo](http://jsfiddle.net/Mottie/LtyMN/3/) ) 中包含新的解析器：

```
$.tablesorter.addParser({
    id: 'truefalse',
    is: function (s) {
        return false;
    },
    format: function (s, table, cell) {
        var $cell = $(cell);
        return $cell.attr('class') || s;
    },
    type: 'text'
});

$("table").tablesorter({
    headers : {
        2: { sorter: 'truefalse' }
    },
    widgets: ['zebra']
}); 
```

请注意，如果您使用该`updateCell`方法，它不会`cell`正确地向解析器格式函数提供参数。我已经在我[的 tablesorter 分支中](http://mottie.github.com/tablesorter/docs/)解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T04:58:21.133

如果这可能会有所帮助。

```
 $("#myTable").tablesorter( {sortList: [[0,0], [1,0]]} ); 
```

单击将要排序的任何 th(head)，:)

小提琴相同： [小提琴1](http://jsfiddle.net/LtyMN/1/)

我希望这会做

没有可见的数字： [小提琴 2](http://jsfiddle.net/LtyMN/2/)

享受 ：）

# java - Java中读取文件的好方法

> ID：15376762
> 
> 赞同：3
> 
> 时间：2013-03-13T03:53:30.013
> 
> 标签：java, string, file-io, merge

如果有人可以帮助我，我真的很感激。我正在尝试进行外部排序，但我陷入了合并的困境。我知道我应该如何合并它只是不确定要使用什么功能。

现在，我正在尝试读取多个小文本文件的第一个单词，并将它们存储在文件数量大小的字符串数组中。所以基本上我会有一个每个文件的第一个单词的字符串数组。然后我确定哪个是最小的字母顺序并将其写入一个新文件，之后我将读取该最小单词的文件的下一个单词。该单词将放置在字符串数组中输出的最小单词的位置，并将其与其他文件中第一个单词的其余部分进行比较。这将不断重复，直到所有单词都被排序。

我遇到的主要问题是我正在使用扫描仪，并且在第一次比较它之后无法将最小的单词与文件中的下一个单词切换，因为扫描仪不会保留它所读取的内容。我知道 readline 可以，但由于我的文件都是由空格分隔的所有单词，所以我不能使用 readline。有人可以指导我使用无法帮助我解决此问题的足够阅读功能。

```
 for (int i = 0; i<B;i++)
  {
  try
  {
    BufferedReader ins = new BufferedReader(new FileReader(Run-"+ i + ".txt"));
    Scanner scanner2 = new Scanner(ins);
    temp3[i] = scanner2.next();

                System.out.println(temp3[i]);
            }
            catch(IOException e)
            {   
            }
        }
        for(int i=0;i<N;i++)
        {
            String smallest = temp3[0];
            int smallestfile = 0;
            for(j=0;j<B;j++)
            {
                int comparisonResult = smallest.compareTo(temp3[j]);
                if(comparisonResult>0)
                {
                smallest = temp3[j];
                smallestfile = j;
                }
            }
            BufferedReader ins = new BufferedReader(new FileReader("C:/Run-"+ smallestfile + ".txt"));
            Scanner scanner2 = new Scanner(ins);
            if(scanner2.hasNext())
            {
                temp3[smallestfile]=scanner2.next();
            }
        }
}
catch(Exception e)
{
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T04:12:24.767

如果文件足够小，则将整个文件读取到内存中，然后使用[String.split()](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split%28java.lang.String%29)将数组中的字符串分开并施展你的魔法。

如果文件更大，请保持打开并读取每个字节，直到找到并留出空间，然后对所有文件执行此操作，比较字符串，施展你的魔力并重复直到所有文件到达末尾。

编辑 ：

*   如何使用[BufferedReader读取文件](https://stackoverflow.com/questions/2500107/how-should-i-read-from-a-buffered-reader)
*   如何用 String.split() 分割行

字符串行 = readeOneLineFromTheCurrentFile(); String[] words = line.split(" ");

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T04:10:40.540

至于临时排序/存储单词，请使用 a `PriorityQueue` （不是数组）。抱歉，我忙于看棒球，无法添加更多内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T10:57:51.623

我不确定，如果我理解正确，但 a`Scanner`确实将位置保留在文件中。您需要的文件数量与文件数量一样多

```
import java.util.Scanner;
import java.io.File;
import java.io.FileNotFoundException;

public class so {
    // returns the index of the smallest word
    // returns -1 if there are no more words
    private static int smallest(String[] words) {
        int min = -1;
        for (int i = 0; i < words.length; ++i)
            if (words[i] != null) {
                if (min == -1 || words[i].compareTo(words[min]) < 0)
                    min = i;
            }

        return min;
    }

    public static void main(String[] args) throws FileNotFoundException {
        // open all files
        Scanner[] files = new Scanner[args.length];
        for (int i = 0; i < args.length; ++i) {
            File f = new File(args[i]);
            files[i] = new Scanner(f);
        }

        // initialize first words
        String[] first = new String[args.length];
        for (int i = 0; i < args.length; ++i)
            first[i] = files[i].next();

        // compare words and read following words from scanners
        int min = smallest(first);
        while (min >= 0) {
            System.out.println(first[min]);
            if (files[min].hasNext()) {
                first[min] = files[min].next();
            } else {
                first[min] = null;
                files[min].close();
                files[min] = null;
            }

            min = smallest(first);
        }
    }
} 
```

经测试

a.txt: `a d g j`
b.txt: `b e h k m`
c.txt:`c f i`

**更新**：

在您的示例中，您在外部 for 循环内打开和关闭文件。当您下次重新打开文件时，它当然会从文件的开头开始。

为防止这种情况，您必须保持文件打开并将`scanner2`变量及其初始化移动到外部 for 循环的前面。您还需要多个`Scanner`变量，即一个数组，以保持多个文件同时打开。

# c - 当字符串的长度大于n时如何打印字符串的前n个字节？

> ID：15376765
> 
> 赞同：15
> 
> 时间：2013-03-13T03:54:04.130
> 
> 标签：c, string, byte, printf

所以我有一个具有一定字节数（或长度）的字符串。我说字节是因为字符串末尾没有 NULL 终止符。不过，我知道字符串有多长。通常，众所周知，当 you 时`printf("%s", str);`，它会继续打印每个字节，直到达到 NULL 字符。我知道没有不是 NULL 终止的 C 字符串，但是我有一个奇怪的情况，我正在存储东西（不是特别是字符串）并且我不存储 NULL，而是存储“事物”的长度。

这是一个小示例：

```
char* str = "Hello_World"; //Let's use our imagination and pretend this doesn't have a NULL terminator after the 'd' in World
long len = 5;

//Print the first 'len' bytes (or char's) of 'str' 
```

我知道你可以做这样的事情：

```
printf("%.5s", str); 
```

但是在这种情况下，我将 5 硬编码在其中，尽管在我的情况下，5 在一个变量中。我会做这样的事情：

```
printf("%.(%l)s", len, str); 
```

但我知道你不能那样做。但是让您了解我要完成的工作。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-03-13T03:57:24.893

`printf("%.*s", len, str);`

而且，没有不以 NULL 结尾的 C 字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T05:43:10.297

你可以这样做：

```
for (int i =0; i<len; i++)
{
    printf("%c", str[i]);
} 
```

它将在同一行打印它们，循环打印您需要打印的任何长度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-17T22:40:13.797

您可以像这样检测空字节中毒。程序将显示检测到中毒空字节

```
 char filename[] = "path/image.php\0.bmp";

  if ((sizeof(filename) - 1) == strlen(filename)) {

      printf("%s %s", "No poisoning Null Byte detected" , "\n");

      FILE *fp;
      fp = fopen(filename, "r");

      if ( fp == NULL ) {
        perror ( "Unable to open the file" );
        exit ( 1 );
      }

      fread ( buf, 1, sizeof buf, fp );
      printf ( "%s\n", buf );

      fclose ( fp );

  } else {
      printf("%s %s", "Poisoning Null Byte detected" , "\n");
  } 
```

# javascript - 复制表格行并替换表格标签

> ID：15376773
> 
> 赞同：0
> 
> 时间：2013-03-13T03:54:43.150
> 
> 标签：javascript

我对 Java Script 非常陌生，并且真的只有 C++ 的经验。我一直在寻找以下问题的答案，但结果很短。任何人可能愿意提供的任何帮助将不胜感激。

我正在尝试编写一个 JavaScript，单击按钮将复制一个表格行并删除 TR /TR 标记并将其替换为 P /P 然后将其存储到一个变量中，我可以创建一个新格式复制和粘贴友好，没有表格单元格，或者将该信息复制到剪贴板，我可以轻松地将其粘贴到 word 中。目前我已经能够克隆表格行但无法解析标签之间的数据并删除表格格式并添加段落格式。

谢谢你。

这是一个小型演示程序，它完成了我想做的第一步。您会注意到，如果您选中部分的框并单击截断，未选中的框将消失。我现在需要做的是将这些复选框中的文本（但只有文本并且每个都成为一个段落）复制到剪贴板，或者让它们以文字复制和粘贴友好的格式进行解析和打印。

**脚本：**

```
 var section0 = 6; //# of Basic Conditions
  function cloneTable() {
    for(var i = 0; i < section0; i++) //Basic Conditions
    {
      if(i == 0 || document.getElementById("check00-" + i).checked) {
        var row = document.getElementById('condition00-' + i); // find row to copy
        var table = document.getElementById("table2"); // find table to append to
        var clone = row.cloneNode(true); // copy children too
        clone.id = "newID"; // change id or other attributes/contents
        table.appendChild(clone); // add new row to end of table
      }
    }
    var elem = document.getElementById('table1')
    elem.parentNode.removeChild(elem);
  } 
```

**标记：**

```
<table width=890 style='table-layout:fixed'>
  <col width=20>
    <col width=30>
      <col width=840>
        <tbody id="table1">
          <tr id="condition00-0">
            <td width=20 valign="top">
              <input type="checkbox" id="check00-0">
            </td>
            <td colspan="2" align="left"><font size="6" face="Arial"><a  name="Bookmark1">Header</a></font>
            </td>
          </tr>
          <tr id="condition00-1">
            <td valign="top">
              <input type="checkbox" id="check00-1" onclick="MainTitles('check00-0')">
            </td>
            <td valign="top"><font size="4" face="Arial">1.</font>
            </td>
            <td align="left" style="word-wrap: break-word"><font size="4" face="Arial">Text section1</font>
            </td>
          </tr>
          <tr id="condition00-2">
            <td valign="top">
              <input type="checkbox" id="check00-2" onclick="MainTitles('check00-0')">
            </td>
            <td valign="top"><font size="4" face="Arial">2.</font>
            </td>
            <td align="left" style="word-wrap: break-word"><font size="4" face="Arial">Text section 2</font>
            </td>
          </tr>
          <tr id="condition00-3">
            <td valign="top">
              <input type="checkbox" id="check00-3" onclick="MainTitles('check00-0')">
            </td>
            <td valign="top"><font size="4" face="Arial">3.</font>
            </td>
            <td align="left" style="word-wrap: break-word"><font size="4" face="Arial">Text section 3</font>
            </td>
          </tr>
          <tr id="condition00-4">
            <td valign="top">
              <input type="checkbox" id="check00-4" onclick="MainTitles('check00-0')">
            </td>
            <td valign="top"><font size="4" face="Arial">4.</font>
            </td>
            <td align="left" style="word-wrap: break-word"><font size="4" face="Arial">Text Section 4</font>
            </td>
          </tr>
          <tr id="condition00-5">
            <td valign="top">
              <input type="checkbox" id="check00-5" onclick="MainTitles('check00-0')">
            </td>
            <td valign="top"><font size="4" face="Arial">5.</font>
            </td>
            <td align="left" style="word-wrap: break-word"><font size="4" face="Arial">Text Section 5</font>
            </td>
          </tr>
        </tbody>
</table>
</div>
<table width=890 style='table-layout:fixed'>
  <col width=20>
    <col width=30>
      <col width=840>
        <tbody id="table2"></tbody>
</table>
<input type="button" onclick="cloneTable()" value="Truncate" /> 
```

**JSFiddle：** [测试链接](http://jsfiddle.net/9AaXa/3/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T04:59:17.113

您可以将行作为 DOM 元素访问，遍历它们的每个单元格，并解析 innerHTML 以获取您的值。

请参阅这篇文章：[如何动态计算 HTML 页面上表格中每一列的总数？](https://stackoverflow.com/questions/15373043/how-to-dynamically-calculate-the-total-of-each-column-in-a-table-on-an-html-page/15373557#15373557)

例子：

```
function strip(html) { // This is a very popular + useful technique.
   var tmp = document.createElement("DIV");
   tmp.innerHTML = html;
   return tmp.textContent||tmp.innerText;
}

var tbl = document.getElementById('my-table');
var rows = tbl.rows;
for (var i = 0; i < rows.length; i++) {
   var cells = rows[i].cells;
   for var j = 0; j < cells.length; j++) {
      alert(strip(cells[j].innerHTML));
   }
} 
```

# operators - 帕斯卡**定义（指数）

> ID：15376774
> 
> 赞同：0
> 
> 时间：2013-03-13T03:54:43.620
> 
> 标签：operators, pascal, exponent

我在扩展帕斯卡中寻找 ** 幂运算的定义。我已经找了一段时间了，似乎找不到它。

```
i.e 2**3 = 8 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T08:24:17.573

在 FreePascal 中，它在数学单元中实现：

```
operator ** (bas,expo : float) e: float; inline;
  begin
    e:=power(bas,expo);
  end;

operator ** (bas,expo : int64) i: int64; inline;
  begin
    i:=round(intpower(bas,expo));
  end;

function power(base,exponent : float) : float;

  begin
    if Exponent=0.0 then
      result:=1.0
    else if (base=0.0) and (exponent>0.0) then
      result:=0.0
    else if (abs(exponent)<=maxint) and (frac(exponent)=0.0) then
      result:=intpower(base,trunc(exponent))
    else if base>0.0 then
      result:=exp(exponent * ln (base))
    else
      InvalidArgument;
  end;

function intpower(base : float;const exponent : Integer) : float;

  var
     i : longint;

  begin
     if (base = 0.0) and (exponent = 0) then
       result:=1
     else
       begin
         i:=abs(exponent);
         intpower:=1.0;
         while i>0 do
           begin
              while (i and 1)=0 do
                begin
                   i:=i shr 1;
                   base:=sqr(base);
                end;
              i:=i-1;
              intpower:=intpower*base;
           end;
         if exponent<0 then
           intpower:=1.0/intpower;
       end;
  end; 
```

# optimization - 如何使用 SSE2/SSE3/SSE4 处理 24 位 3 通道彩色图像？

> ID：15376780
> 
> 赞同：3
> 
> 时间：2013-03-13T03:55:17.123
> 
> 标签：optimization, opencv, image-processing, instructions, sse2

我刚开始使用SS2优化图像处理，但是对于3通道24位彩色图像却一无所知。我的像素数据由 BGR BGR BGR ... ,unsigned char 8-bi 排列，所以如果我想用 SSE2/SSE3/SSE4 的指令 C/C++ fun 实现 Color2Gray，我该怎么办？我的像素数据需要对齐（4/8/16）吗？我读过文章：[http](http://supercomputingblog.com/windows/image-processing-with-sse/) ://supercomputingblog.com/windows/image-processing-with-sse/ 但它是 ARGB 4 通道 32 位颜色，每次准确处理 4 色像素数据。谢谢！

```
//Assume the original pixel:
      unsigned char* pDataColor=(unsigned char*)malloc(src.width*src.height*3);//3

  //init pDataColor every pix val
  // The dst pixel:
  unsigned char* pDataGray=(unsigned char*)malloc(src.width*src.height*1);//1 
```

//RGB->灰色：Y=0.212671*R + 0.715160*G + 0.072169*B

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-13T04:58:42.510

我有关于[24 位 RGB 像素去交错的](https://docs.google.com/presentation/d/1I0-SiHid1hTsv7tjLST2dYW5YF5AJVfs9l4Rg9rvz48/edit#slide=id.g1eefe20b_0_125)幻灯片，其中解释了如何使用 SSE2 和 SSSE3 来实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T04:29:32.623

以下是您的问题的一些答案：

*   对于如何使用 SSE2 指令 C/C++ 函数。这些参考资料可能会有所帮助。
    *   [图像处理算法的优化：一个案例研究](http://software.intel.com/en-us/articles/optimization-of-image-processing-algorithms-a-case-study)
    *   [加速一些 SSE2 Intrinsics 以进行颜色转换](https://stackoverflow.com/questions/5031409/speeding-up-some-sse2-intrinsics-for-color-conversion)
    *   [SSE 内在函数参考](https://stackoverflow.com/questions/7156908/sse-intrinsic-functions-reference)
*   对于对齐：是的，需要 16 字节对齐。当使用 SSE2 内部函数（SSE2/SSE3/SSE4 指令 C／C++ 函数）进行内存访问时，应确保内存地址为 16 字节对齐。如果您使用 MSVC，则必须使用[**declspec(align(16))**](http://msdn.microsoft.com/library/83ythb65.aspx)**，或者使用 GCC，这将是[__attribute](http://gcc.gnu.org/onlinedocs/gcc-3.1/gcc/Variable-Attributes.html)** [((aligned (16)))](http://gcc.gnu.org/onlinedocs/gcc-3.1/gcc/Variable-Attributes.html)。
    *   需要对齐的原因可以在这里找到：[为什么存在指令/数据对齐？](https://stackoverflow.com/q/13400694/566459)
*   对于3通道RGB转换，本人不是图像处理专家，无法给出建议。还有一些开源图像处理库可能已经包含你想要的代码。

# python - wxPython OnExit() 没有停止线程？

> ID：15376787
> 
> 赞同：2
> 
> 时间：2013-03-13T03:55:51.120
> 
> 标签：python, multithreading, wxpython

我正在尝试创建一个线程，并在 wxPython 应用程序的框架关闭时结束它。这是我的代码：

```
#! /usr/bin/env python

import time, wx
from threading import Thread

class UpdateThread(Thread):
    def __init__(self):
        self.stopped = False
        Thread.__init__(self)
    def run(self):
        while not self.stopped:
            self.updateExchange()
            time.sleep(1)
    def updateExchange(self):
        print("Updated...")

class tradeWindow(wx.Frame):
    def __init__(self, parent, id):
        wx.Frame.__init__(self, parent, id, "Exchange", size = (500, 190))
        panel = wx.Panel(self)
    def OnExit(self):
        tickThread.stopped # I've also tried: tickThread.stopped = True

tickThread = UpdateThread()
tickThread.start()
if __name__ == "__main__":
    app = wx.PySimpleApp()
    frame = tradeWindow(parent = None, id = -1)
    frame.Show()
    app.MainLoop() 
```

但是当我关闭框架时，它会继续打印。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T04:21:50.897

没有什么神奇的`Frame.OnExit`方法。您正在混淆框架和应用程序。与其他窗口一样，框架会关闭。应用程序退出。

因此，您可以将代码放在应用程序类的`OnExit`方法中。但这不是你想要的。

看看[这个简单的教程](http://www.java2s.com/Tutorial/Python/0380__wxPython/Oninitandonexit.htm)的`OnExit`方法。同样，这不是您想要的，但您应该知道它是如何工作的（以及它被调用的对象）。

你总是可以绑定`EVT_CLOSE`在你的窗口中调用你想要的任何东西。但是你必须明确地这样做。

通常，您会调用方法`OnClose`或`OnCloseWindow`. 调用它`OnExit`只会导致严重的混乱（因为它已经）。

您绑定到的事件处理程序方法实际上必须是事件处理程序，这意味着它需要一个`event`参数（以及`self`）。

接下来，如果你添加一个`EVT_CLOSE`处理程序，你将覆盖默认的处理程序，这意味着`Destroy`除非你自己做，否则永远不会被调用。

这是有关绑定[的教程](http://www.java2s.com/Tutorial/Python/0380__wxPython/Framewitheventsoncloseonclosewindow.htm)`EVT_CLOSE`，其中显示了上述所有步骤。

最后，正如 DavidRobinson 解释的那样，只是做`tickThread.stopped`不会做任何事情；您必须将其设置为`True`.

把它们放在一起：

```
class tradeWindow(wx.Frame):
    def __init__(self, parent, id):
        wx.Frame.__init__(self, parent, id, "Exchange", size = (500, 190))
        panel = wx.Panel(self)
        self.Bind(wx.EVT_CLOSE, self.OnClose)
    def OnClose(self, event):
        tickThread.stopped = True
        self.Destroy() 
```

* * *

还有一点注意事项：

在任何严肃的线程程序中，如果你想在线程之间共享一个值，你通常需要将它与某种同步对象同步。如果您正在等待来自另一个线程的信号，典型的处理方法是使用[`Condition`](http://docs.python.org/2/library/threading.html#condition-objects). 另一方面，如果您只想共享价值，则可以使用[`Lock`](http://docs.python.org/2/library/threading.html#lock-objects).

如果您真的知道自己在做什么，通常可以让 Global Interpreter Lock 为您处理同步。但总的来说，这是一个坏主意。例如，您的主线程可能在核心 0 上运行，而您的后台线程在核心 1 上运行，并且 Python 语言定义中没有任何内容可以保证计算机将更新的值从核心 0 的缓存复制到核心 1 的缓存中。因此，您的后台线程可能会永远旋转，查看旧值而永远无法查看新值。事实证明，在 x86 上使用 CPython 2.0-3.3 时，您的代码不可能发生这种情况——但您可以证明（或至少确定安全的情况），不要指望它。

* * *

最后，您询问了守护线程是否是合适的解决方案。从[文档](http://docs.python.org/2/library/threading.html#thread-objects)：

> 这个标志的意义在于，当只剩下守护线程时，整个 Python 程序就退出了。

换句话说，您的程序可以退出而无需停止您的守护线程。但是……</p>

> 注意 守护程序线程在关闭时突然停止。它们的资源（如打开的文件、数据库事务等）可能无法正常释放。如果您希望线程优雅地停止，请将它们设为非守护进程并使用合适的信号机制，例如`Event`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T04:16:39.580

尝试设置`tickThread.setDaemon(True)`之前`tickThread.start()`-[守护线程](http://docs.python.org/2/library/threading.html#threading.Thread.daemon)应该与它们的父线程一起退出。

# spring-mvc - 带有 Spring MVC 的 Java EE 标签库

> ID：15376789
> 
> 赞同：0
> 
> 时间：2013-03-13T03:56:10.293
> 
> 标签：spring-mvc, taglib

我将 Java EE 标准标记库导入到 jsp 页面，但它不能正常工作（不工作）。是什么原因 ？它与 Spring MVC 或 servlet 3.0 有关吗？

我包含使用的标签库

```
<%@ taglib uri="/WEB-INF/tld/c.tld" prefix="c"%> 
```

此 tld 位于 /WEB-INF/tld。

AFAIK，servlet 3.0 允许我们使用应用程序 URI 包含标签库，例如 //127.0..0.1/apps/c.tld

如果这在 servlet 3.0 中是允许的，请提供一个示例。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T04:45:02.603

添加 c.tld 文件并从 jsp 页面引用

# neo4j - 带有 ne04j 错误的 Spring 数据...检索路径时出错

> ID：15376790
> 
> 赞同：1
> 
> 时间：2013-03-13T03:56:15.683
> 
> 标签：neo4j, spring-data-neo4j

我在 neo4j 中使用 spring 数据。

我使用`@Query`注解将查询放在存储库中，查询如下

```
@Query(value = "START me=node({0}), friend=node({1}) "
            + "MATCH p=shortestPath(me-[:ACTIVEFRIEND*..]->friend)"
            + " RETURN p")

public Iterable<EntityPath<User, User>> getShortestPathBetween(User a, User b); 
```

在控制器中，我以

```
 Iterable<EntityPath<User, User>> shortestPathBetween = this.queryService.getShortestPathBetween(user, friend);
        for (EntityPath<User, User> path : shortestPathBetween) {
            Iterator<User> iter = path.<User>nodeEntities().iterator();
        } 
```

当它尝试访问`path.nodeEntities`时，会导致此错误：

> 嵌套异常是 java.lang.NullPointerException]，根本原因
> 是
> org.springframework.data.neo4j.support.path.ConvertingEntityPath.nodes(ConvertingEntityPath.java:137)
> 上的 org.springframework.data.neo4j.support 上的 java.lang.NullPointerException .path.ConvertingEntityPath.nodeEntities(ConvertingEntityPath.java:69)
> 在 com.laindain.cms.controller.QueryController.getShortestPathBetween(QueryController.java:194)
> 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) 在 java.lang.reflect.Method .invoke(Method.java:601) at org.springframework.web.method.support.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:212) at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:126 ) 在 org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java: org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:96)617) 在 org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)在 org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:900) 在 org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:827) 在 org.springframework.web.servlet.FrameworkServlet.processRequest (FrameworkServlet.java:882) 在 org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:789) 在 javax.servlet.http.HttpServlet.service(HttpServlet.java:647) 在 javax.servlet.http。 org.apache 上的 HttpServlet.service(HttpServlet.java:728)。catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305) at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210) at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java: 222) 在 org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472) 在 org.apache.catalina.core.StandardHostValve 的 org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123) .invoke(StandardHostValve.java:171) 在 org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99) 在 org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:936) 在 org. apache.catalina.core.StandardEngineValve.invoke（StandardEngineValve.java：118) 在 org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407) 在 org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004) 在 org.apache.coyote.AbstractProtocol$AbstractConnectionHandler .process(AbstractProtocol.java:589) 在 org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoint.java:1822) 在 java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) 在java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) 在 java.lang.Thread.run(Thread.java:722)AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589) at org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoint.java:1822) at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java: 1110) 在 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) 在 java.lang.Thread.run(Thread.java:722)AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589) at org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoint.java:1822) at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java: 1110) 在 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) 在 java.lang.Thread.run(Thread.java:722)

如果有人可以帮助我，我将不胜感激。

谢谢赫曼特

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T08:02:40.780

尝试以这种方式定义方法：

```
public EndResult<EntityPath<User, User>> getShortestPathBetween(User a, User b); 
```

因为查询返回的是路径而不是路径的集合。你可以得到如下结果：

```
EntityPath<User, User> shortestPathBetween =
this.queryService.getShortestPathBetween(user, friend).to(EntityPath); 
```

然后可以使用返回的*EntityPath上的**nodeEntities()*和*relationshipEntities()*方法访问路径上的节点和关系。

# mono - 如何在 Travis-CI 上安装 Mono 2.11+？

> ID：15376799
> 
> 赞同：0
> 
> 时间：2013-03-13T03:57:14.547
> 
> 标签：mono, travis-ci

我在 Travis-CI 上构建我的 C# 项目，[如下所示](https://github.com/JayBazuzi/Pash2/blob/e748f1ee54751b85e7a5a0e62f6a20ac6f93170a/.travis.yml)：

```
# .travis.yml
before_install:
  - sudo apt-get update -qq
  - sudo apt-get install -qq mono-devel gtk-sharp2

install:
  - xbuild Source/Pash.sln 
```

Travis 使用 Precise (Ubuntu 12.04 LTS)，这对他们来说似乎是一个不错的选择，但它包括 Mono 12.10。我的 C# 项目在 Mono 2.10 中遇到了一个[错误。](https://bugzilla.xamarin.com/show_bug.cgi?id=6541)该错误似乎已在 Mono 2.11+ 中修复。

我读到 Ubuntu 获取新版本 Mono 的速度很慢，因为它非常依赖它，而且它可能会破坏很多。这很好，但对于 Travis 来说，依赖关系并不是真正的问题——机器在构建结束时消失了！

我考虑过

*   编译一个新的 Mono，`.travis.yml`但我不想给 Travis 服务器增加太多负担。

*   仅使用此修复程序构建 MCS（Mono C# 编译器）。

*   从某处（在哪里？）下载和安装较新的 Mono

*   在我的 GIT 存储库中检查最近的 Mono。

建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T22:03:19.147

如果你要使用比标准发行版包提供的更高的东西，我建议你一路走下去，不要使用不稳定的 2.11.x 系列，而是使用官方/beta 3.x 的。

所以，从这个 PPA 中获取一些 Debian/Ubuntu 3.0.6 预览包：

[http://www.meebey.net/posts/mono_3.0_preview_debian_ubuntu_packages/](http://www.meebey.net/posts/mono_3.0_preview_debian_ubuntu_packages/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-05T18:09:51.703

我发现获得完整最新单声道环境的最佳方法是使用 OS X travis 配置文件

```
language: objective-c

before_install:
 # Make sure mono is installed,
 - wget http://download.mono-project.com/archive/3.0.10/macos-10-x86/MonoFramework-MDK-3.0.10.macos10.xamarin.x86.dmg
 - hdid MonoFramework-MDK-3.0.10.macos10.xamarin.x86.dmg
 - sudo installer -pkg "/Volumes/Mono Framework MDK 3.0.10/MonoFramework-MDK-3.0.10.macos10.xamarin.x86.pkg" -target /

install:
 - xbuild Source/Pash.sln 
```

# php - 跟踪用户在页面上的浏览量

> ID：15376805
> 
> 赞同：0
> 
> 时间：2013-03-13T03:57:55.443
> 
> 标签：php, mysql, cookies, views

我已经建立了一个由类别、主题和帖子组成的简单论坛。我想跟踪每个帖子收到了多少独特的观点。我不怀疑每个帖子的每日流量太多，因为帖子是针对特定用户的。如果我必须估计，我会说每个帖子每天有 500 到 1000 次浏览（最多）；实际上只有 200 - 300 次观看。

**我想做什么：**

所有帖子都通过名为`topic.php`. 在此脚本的开头，我将包含一些代码，首先检查 COOKIE 是否存在，如果不存在，它将检查数据库中用户的 IP 和手头的帖子。如果数据库找到了用户的 IP 和 post-id，然后我会创建一些 COOKIE，让脚本知道在下一页加载 no，甚至用查询来打扰数据库。

**问题：**

*   存储用户的 IP 和帖子 ID（可能连同时间戳）是跟踪独特帖子视图的正确方法吗？
*   按照任何标准，我上面描述的方法是否被认为是“最佳实践”甚至是有效的？

谢谢，埃文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T04:11:26.233

我无论如何都不是专家，所以我无法回答这是否是最有效的方法，但使用用户的 IP 地址可能不是一个好方法，因为大多数用户可能会有一个动态 IP 地址，所以他们的IP会经常改变。因此，如果您指望他们的 IP 每次都相同，那么您将无法使用此方法。

用户会注册使用论坛吗？如果是这样，他们登录时的简单会话 cookie 应该足以保证唯一性。

# image-processing - 确定分辨率

> ID：15376806
> 
> 赞同：0
> 
> 时间：2013-03-13T03:57:56.203
> 
> 标签：image-processing

我刚刚读到了一些关于这个的东西：

> 如今，数字 IP 摄像机分辨率由水平 (H) 和垂直 (V) 像素数（即 640 x 480）或传感器中的总像素数（H x V = 336K 像素）定义。

HxV=336K像素是怎么计算的？

H = 640 和 V = 480？如果是，计算不应该是 307200 =~ 307K？

# javascript - 悬停时如何暂停幻灯片

> ID：15376808
> 
> 赞同：3
> 
> 时间：2013-03-13T03:58:47.407
> 
> 标签：javascript, jquery, settimeout

当我将鼠标悬停在 jQuery 幻灯片中的图像上时，如何添加暂停效果？

```
$(document).ready(function () {
    slideShow();
});

function slideShow() {
    var showing = $('#slideshow .show');
    var next = showing.next().length ? showing.next() : showing.parent().children(':first');
    var timer;
    showing.fadeOut(500, function () {
        next.fadeIn(200).addClass('show');
    }).removeClass('show');
    setTimeout(slideShow, 3000);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T04:07:10.980

```
var hovering = false;               //default is not hovering
$("#slideshow").hover(function () { //*replace body with your element
    hovering = true;                //when hovered, hovering is true
}, function () {
    hovering = false;               //when un-hovered, hovering is false
    slideShow();                    //start the process again
});

function slideShow() {
    if(!hovering) {                 //if not hovering, proceed
        /* Your code here*/
        nextSlide();
        setTimeout(slideShow, 1000);
    }
}

function nextSlide(){
    var showing = $('#slideshow .show');
    var next = showing.next().length ? showing.next() : showing.parent().children(':first');
    var timer;
    showing.fadeOut(500, function () {
        next.fadeIn(200).addClass('show');
    }).removeClass('show');
} 
```

`***Demo:***` [http://jsfiddle.net/DerekL/mqEbZ/](http://jsfiddle.net/DerekL/mqEbZ/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T05:21:33.363

根据 Derek 的回答，悬停的替代方法是使用`mouseenter`and `mouseleave`。

请参阅工作幻灯片 Jsfiddle：http: `**Demo:**` [//jsfiddle.net/highwayoflife/6kDG7/](http://jsfiddle.net/highwayoflife/6kDG7/)

```
var hovering = false;
var slideshow = $("#slideshow");

slideshow.mouseenter(function() {
    hovering = true;
}).mouseleave(function() {
    hovering = false;
    slideShow();
});

function slideShow() {
    if (!hovering) {
        # Some browsers don't interpret "display:block" as being visible
        # If no images are deemed visible, choose the first...
        var currentImg = (slideshow.children("img:visible").length) ? slideshow.children("img:visible") : slideshow.children("img:first");
        var nextImg = (currentImg.next().length) ? currentImg.next() : slideshow.children("img:first");

        currentImg.fadeOut(500, function() {
            nextImg.fadeIn(500, function() {
                setTimeout(slideShow, 2000);
            });
        });
    }
}
$(document).ready(function() {
    slideShow();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T04:04:00.477

使用`[**`.delay()`**](http://api.jquery.com/delay/)`它会有所帮助。

**描述：**设置一个定时器来延迟队列中后续项目的执行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T04:09:27.567

我认为你需要两个函数...... slideShow（）和另一个说pauseSlideshow（）......现在在mouseout事件和mouseenter调用pauseSlideShow（）上调用slideshow（）

你的代码应该是这样的

```
$(document).ready(function(){

 $('.slider').mouseout( slideShow());
 $('.slider').mouseenter( pauseSlideShow());
 }); 
function slideShow() {
var showing = $('#slideshow .show');
var next = showing.next().length ? showing.next() : showing.parent().children(':first');
var timer;
showing.fadeOut(500, function() { next.fadeIn(200).addClass('show'); }).removeClass('show');    
timeOut = setTimeout(slideShow, 3000);        
}

function PauseSlideShow() {
window.clearTimeout(timeOut);
} 
```

试试看

# cmake - cmake_current_source_dir 用作变量

> ID：15376813
> 
> 赞同：0
> 
> 时间：2013-03-13T03:59:37.273
> 
> 标签：cmake

请检查以下场景：

cmakelists_1.txt

```
set( variable_name
     ${CMAKE_CURRENT_SOURCE_DIR}/sub_folder1
     ${CMAKE_CURRENT_SOURCE_DIR}/sub_folder2
    ) 
```

cmakelists_2.txt

```
include_directories(
    ${variable_name}
) 
```

现在，当 cmakelists_2 执行时，它不包括 sub_folders 中存在的文件。但如果我在 cmakelists_1 中为 sub_folders 提供绝对路径，它会起作用。

如果我遗漏了什么，请指出我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T04:20:10.597

`CMAKE_CURRENT_SOURCE_DIR`始终是提到它的 CMakeLists.txt 所在的当前源目录。因此，根据使用它的目录，它会扩展为不同的东西。它对你来说是什么扩展，它与你的硬编码路径有什么不同？一旦你看到差异，你就会知道如何修复它，所以在两个文件中都这样做：

```
message(${variable_name}) 
```

然后重新运行`cmake`并查看它打印的内容。

# c# - 如何解决C#中的以下编译错误？

> ID：15376824
> 
> 赞同：2
> 
> 时间：2013-03-13T04:00:51.707
> 
> 标签：c#, asp.net

我的`.aspx`样子如下：

```
<div id="valueIntroduction" type="text" class="labelarea" runat="server">  
  <input name="$labeluniversityid" type="text" id="labeluniversityid" style="color:#7D110C;border:0;background-color:#C0D5F2;width:100%" />
</div> 
```

.cs 文件如下所示：

```
 if (results.Read())
    {
       labeluniversityid.value = results["TEXT_CONTENT"].ToString();
    } 
```

我正在尝试做的是从数据库中获取数据并将其显示在`valueIntroduction`div 中。那工作得很好。`readonly`现在我添加了一个带模式的文本框。因此，如果我按下`EDIT`按钮，在我的页面中，可以编辑该值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T04:16:25.097

使用 TexBox 组件：

```
<asp:TextBox ID="labeluniversityid" runat="server" CssClass="yourcssclass"></asp:TextBox> 
```

至于造型：

```
.yourcssclass
{
color:#7D110C;
border:0;
background-color:#C0D5F2;
width:100%
} 
```

然后，在您后面的代码中，您可以像这样轻松地使用它：

```
labeluniversityid.Text = results["TEXT_CONTENT"].ToString(); 
```

请记住，ASP.NET 控件被转换为常见的 HTML 标记，因此您可以将其包装并设置样式，就像使用任何其他正常的文本类型输入一样。

另外：`type="text"`不适用于`div`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T04:16:40.063

尝试将`runat="server"`属性放入`<input id="labeluniversityid">`标签中。

*或者按照areks*的建议使用`<asp:TextBox>`控件。

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T04:17:25.997

您需要添加 -

```
runat="server" 
```

到您的输入字段

或者，更好的是，使用

```
<asp:textBox ..> 
```*

# mysql - mysql drop 语句带有--

> ID：15376826
> 
> 赞同：1
> 
> 时间：2013-03-13T04:01:06.673
> 
> 标签：mysql, magento

mysql中的drop table和--drop table有什么区别

例如：如果我使用 - 但在 Magento 的所有其他地方他们正在使用 - 在 drop 之前，我会收到错误。

```
--DROP TABLE IF EXISTS {$this->getTable('faq/dinkchika')};
CREATE TABLE IF NOT EXISTS {$this->getTable('faq/dinkchika')} (
  `faq_id` int(11) NOT NULL AUTO_INCREMENT,
  `faq_question` varchar(255) DEFAULT NULL,
  `faq_answer` varchar(255) DEFAULT NULL,
  PRIMARY KEY (`faq_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T04:09:22.130

以 -- 开头并在其后有一个空格的行被视为注释，直到行尾。它不会被执行。

您可以在此处阅读有关 Mysql 注释语法的更多信息：http: [//dev.mysql.com/doc/refman/5.1/en/comments.html](http://dev.mysql.com/doc/refman/5.1/en/comments.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T05:56:03.790

```
use a white space after -- ,if you are not using whitespace after -- then it will not
count as comment.after whitespace your query will look like this.
-- DROP TABLE IF EXISTS {$this->getTable('faq/dinkchika')};
CREATE TABLE IF NOT EXISTS {$this->getTable('faq/dinkchika')} (
  `faq_id` int(11) NOT NULL AUTO_INCREMENT,
  `faq_question` varchar(255) DEFAULT NULL,
  `faq_answer` varchar(255) DEFAULT NULL,
  PRIMARY KEY (`faq_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

");
Or you may use #(Hash) as well and 
Try this: Drop table IF EXISTS table_name;
And then continue with creating the table, as it will be guaranteed to no longer exist.
I hope it will help for you.. 
```

# jquery - Yii 和引导程序：当我遇到奇怪的行为时如何调试 jQuery？

> ID：15376831
> 
> 赞同：2
> 
> 时间：2013-03-13T04:01:54.883
> 
> 标签：jquery, debugging, yii, firebug

我在使用 jQuery 开发 Yii 应用程序时遇到问题。使用 Firebug，当我单击一个选项卡时，我可以看到导航器进行了很多调用：两次到主页，四次到原始目的地等；但我看不出是怎么回事。电话发生了，我不知道在哪里。但是，如果我可以调试并查看调用的确切位置，我很确定我可以解决它。

我的问题：在这种情况下如何调试 jQuery？

**编辑：**感谢您的帮助。我会详细解释这个问题。这是网页的设计。当我单击“区域”选项卡时，我会在 contentarea_zone 中加载一个网页。它也有标签（这些标签来自 Yii 的 Bootstrap 扩展，他们也使用 jQuery）

![在此处输入图像描述](../Images/f7ea8f5939ed1ccdd60de14f44736f34.png)

当我单击“描述”选项卡时，我会在 Firebug 控制台中看到调用。

![在此处输入图像描述](../Images/6c345b333d2a673c7afa303e414be32a.png)

但我看不出它们是从哪里来的。如果我阅读 Firebug 控制台的右侧，我会看到“jquery.js”和行号，但 jQuery 库只有 9405 行。我不知道为什么 Firebug 会在 10079、10692 等行报告调用。

我真的迷路了。如果问题仍然不清楚，如果您向我推荐一个合适的工具或方法来调试此案例，将对我有很大帮助...

**编辑 2：**感谢您的建议，我开始使用 Firebug 及其选项。我发现导致重复调用的库是 bootstrap.js。似乎，在完成加载“描述”选项卡时，它已经积累了“回调”。但是，我仍然不知道这些回调来自哪里。一些想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T04:08:20.603

放置关键字

```
debugger; 
```

从您要调试代码的位置。代码执行将在那里中断，您可以从firebug控制台进入，在代码上并逐步跟随代码的执行

[技巧和窍门](http://www.tipsandtricks-hq.com/debugging-javascript-code-with-firebug-1899)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T06:08:00.987

好吧，在某些地方使用 Firebug 和关键字“调试器”之后，我可以找到问题的根源。点击冒泡，触发了不应该触发的事件。一条简单的线如

```
e.stopImmediatePropagation() 
```

修复了问题，使 jQuery 在第一次单击后停止冒泡。

谢谢您的回答！

# android - Android NDK：包括 boost c++ 库

> ID：15376832
> 
> 赞同：27
> 
> 时间：2013-03-13T04:02:10.287
> 
> 标签：android, boost, android-ndk, makefile

我正在尝试使用 NDK 在我的 android 应用程序中使用 boost 库。我在[这里](http://www.codexperiments.com/android/2011/05/tips-tricks-building-boost-with-ndk-r5/comment-page-1/#comment-336)和[这里](https://stackoverflow.com/questions/4882714/port-boost-to-android/4883976#4883976)找到了几个成功的故事，但我不能说同样的话。我特别尝试使用[此链接](http://www.boost.org/doc/libs/1_35_0/libs/math/doc/sf_and_dist/html/math_toolkit/toolkit/internals1/roots2.html)中的库以及 boost 线程库。在下面的代码中，我只尝试包含线程库，而不是数学库。我用来构建 boost 库的过程与我附加的第一个链接几乎相同。

到目前为止，似乎我已经成功构建了 boost 库，但是当我运行时`ndk-build`，我收到以下错误：

```
Prebuilt       : libboost_thread.a <= <NDK>/sources/
cp: omitting directory `path/to/ndk/sources/boost'
make: *** [obj/local/armeabi/libboost_thread.a] Error 1 
```

显然，这`cp: omitting directory...`不完全是一个错误。但除此之外，我唯一得到的就是下一行，这并不意味着什么。`Error 1`

这是我的 Android.mk 文件：

```
LOCAL_PATH := $(call my-dir)
include $(CLEAR_VARS)
LOCAL_STATIC_LIBRARIES := boost_thread
LOCAL_LDLIBS := lboost_system-gcc-md lboost_thread-gcc-md -lgnustl_static
LOCAL_LDLIBS += lboost_system-gcc-md lboost_thread-gcc-md \
         -L$(NDK_ROOT)/sources/cxx-stl/gnu-libstdc++/libs/armeabi \
         -lgnustl_static  
LOCAL_SRC_FILES := #cpp_sources
LOCAL_MODULE := com_example_ndkFile_CppMethods
include $(BUILD_SHARED_LIBRARY)
$(call import-module,boost) 
```

并且还有一个 Android.mk 文件`path/to/ndk/sources/boost/`：

```
LOCAL_PATH:= $(call my-dir)  
include $(CLEAR_VARS)  
LOCAL_MODULE:= boost_thread
LOCAL_SRC_FILES:= android/lib/libboost_thread.a  
LOCAL_EXPORT_C_INCLUDES := $(LOCAL_PATH)  
include $(PREBUILT_STATIC_LIBRARY) 
```

还有我不起眼的 Application.mk 文件：

```
APP_ABI := armeabi armeabi-v7a
APP_STL := gnustl_static
APP_CPPFLAGS = -fexceptions 
```

我使用`bjam`. 所有`libboost_###.a`文件都在`sources/boost/android/lib`文件夹中。

我得到什么错误？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-10-14T08:53:25.117

[我使用Boost-for-Android](https://github.com/MysticTreeGames/Boost-for-Android)构建了 boost 库。然后我在我的 boost/include/lib 目录中有 android makefile boost.mk

```
LOCAL_PATH := $(call my-dir)

# boost_date_time
#
include $(CLEAR_VARS)
LOCAL_MODULE := boost_date_time
LOCAL_SRC_FILES := libboost_date_time-gcc-mt-1_53.a
include $(PREBUILT_STATIC_LIBRARY)

# boost_filesystem
#
include $(CLEAR_VARS)
LOCAL_MODULE := boost_filesystem
LOCAL_SRC_FILES := libboost_filesystem-gcc-mt-1_53.a
include $(PREBUILT_STATIC_LIBRARY)

# boost_thread
#
include $(CLEAR_VARS)
LOCAL_MODULE := boost_thread
LOCAL_SRC_FILES := libboost_thread-gcc-mt-1_53.a
include $(PREBUILT_STATIC_LIBRARY)

# boost_system
#
include $(CLEAR_VARS)
LOCAL_MODULE := boost_system
LOCAL_SRC_FILES := libboost_system-gcc-mt-1_53.a
include $(PREBUILT_STATIC_LIBRARY)

# boost_program_options
#
include $(CLEAR_VARS)
LOCAL_MODULE := boost_program_options
LOCAL_SRC_FILES := libboost_program_options-gcc-mt-1_53.a
include $(PREBUILT_STATIC_LIBRARY)

# boost_chrono
#
include $(CLEAR_VARS)
LOCAL_MODULE := boost_chrono
LOCAL_SRC_FILES := libboost_chrono-gcc-mt-1_53.a
include $(PREBUILT_STATIC_LIBRARY) 
```

我使用一些 boost 库的模块看起来像这样

```
LOCAL_PATH := $(call my-dir)

# SignalServer, executable 
#
include $(CLEAR_VARS)
LOCAL_CFLAGS           := -DTIXML_USE_TICPP
#LOCAL_CFLAGS           += -DDEBUG
LOCAL_STATIC_LIBRARIES := boost_thread \
    boost_system \
    boost_filesystem \
    boost_program_options \
    boost_chrono \
LOCAL_STATIC_LIBRARIES += ticpp \
    tia \
    tobicore \
    tobiid \
    tid \
    gdf
LOCAL_MODULE           := signalserver
LOCAL_C_INCLUDES       := $(LOCAL_PATH)/include
LOCAL_C_INCLUDES       += $(LOCAL_PATH)/extern/include
LOCAL_C_INCLUDES       += $(LOCAL_PATH)/../boost/include/boost-1_53
LOCAL_SRC_FILES        := #cpp source

include $(BUILD_EXECUTABLE) 
```

此外，我有一个 Android.mk，其中列出了所有子目录 makefile

```
TOP_PATH := $(call my-dir)

include $(TOP_PATH)/boost/lib/boost.mk
include $(TOP_PATH)/signalserver/signalserver.mk
.
. 
```

和我的 Application.mk：

```
APP_PLATFORM          := android-14
APP_ABI               := armeabi-v7a
#APP_OPTIM             := debug
#NDK_DEBUG             := 1

NDK_TOOLCHAIN_VERSION := 4.6
APP_STL               := gnustl_static
APP_CPPFLAGS          := -fexceptions -frtti 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-07-12T13:00:40.160

在这里：[http](http://silverglint.com/boost-for-android/) ://silverglint.com/boost-for-android/你可以找到一个简单的脚本，它可以让你为 android 构建现代版本的 boost，或者简单地下载预构建的 boost 二进制文件。

还包括一个示例测试应用程序，它向您展示如何包含/链接提升标头/二进制文件

# android - Android AnimatorSet 动画 + setStartDelay VS AnimatorListenener.onAnimationStart？

> ID：15376835
> 
> 赞同：6
> 
> 时间：2013-03-13T04:02:46.007
> 
> 标签：android, animation

我对 Android AnimatorSet 对象有疑问。我正在尝试动态创建一个 TextView 并将其可见性设置为 GONE 并使其在我的动画在启动延迟后开始时出现。为此，我设置了一个 onAnimationStart 侦听器来告诉我动画何时开始，以便我可以将 TextView 设置为可见。我将该 TextView 添加到 AnimatorSet 以在 alpha 和 translateY 上执行一些动画，但我还将 setStartDelay 设置为一个值，以便动画在 2500 毫秒开始。我的问题是我希望 TextView 在动画实际开始于 2500 毫秒标记时变得可见，但仅在调用 AnimatorSet.start() 函数时才调用 onAnimationStart，而不是在请求的 2500 毫秒后调用。这导致我的 TextView' s 在动画实际开始之前变得可见（在 setStartDelay 周期之后）。我该如何克服这个问题并让 TextView 对象仅在 setStartDelay 期后才可见？？？？非常感谢你，你是最棒的 StackOverflow！！！！:) :) :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-25T05:51:35.157

我一直有同样的问题。我正在为 AnimatorSet 中的 3 个 ValueAnimators 设置动画。我在我的集​​合中做一个“playTogether()”，如下所示：

```
set.playTogether(alpha,animScale,transY);
set.start(); 
```

并发现是动画延迟引起的问题。相反，我尝试了以下方法：

```
set.play(animScale);
set.play(transY);
set.play(alpha);
set.start(); 
```

它似乎工作！

# ember.js - 带有 Ember 和 Ember-Data 的 Socket.IO

> ID：15376839
> 
> 赞同：18
> 
> 时间：2013-03-13T04:03:21.907
> 
> 标签：ember.js, socket.io, ember-data

我一直在四处寻找，但找不到任何也使用 socket.io 的 ember (1.0.0-rc.1) 和 ember-data(revision 11) 的最新示例。我试过这样的事情。

```
App.ApplicationRoute = Ember.Route.extend({
  setupController: function(controller, data) {
    var socket = io.connect(),
        self = this;
    socket.on('apartment/new', function(apartment) {
      var apt = App.Apartment.createRecord(apartment);
      self.controllerFor('apartments').pushObject(apt);
    });
  }
}); 
```

这实际上会创建一个新的模型类，它将对象推送到控制器，并创建一个新的 li 但值不会呈现。

```
<ul class="list-view">
{{#each apartment in controller}}
    <li>
      {{#linkTo 'apartment' apartment }}
        <span class="date">{{date apartment.date}}</span>
        {{apartment.title}}
      {{/linkTo}}
    </li>
{{/each}}
</ul> 
```

这与运行循环有关吗？如何强制渲染值？或者有更好的方法吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-16T09:32:52.713

我在我的一些应用程序中使用了一个非常简单的解决方案。您可以对套接字进行通用回调并接受任何类型的数据

```
callback: function(message) {
  // this is better than just `eval`
  var type = Ember.get(Ember.lookup, message.type);
  store.load(type, message.data);
} 
```

或者在这里它是专门为您的用例量身定制的

```
socket.on('apartment/new', function(apartment) {
  store.load(App.Apartment, apartment);
}); 
```

using`store.load`会将记录数据直接加载到身份映射中。还有`loadMany`用于加载多条记录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-02T00:28:28.023

[Ember CLI](http://www.ember-cli.com/)、[ember 套接字](https://www.npmjs.org/package/ember-sockets)和[咖啡脚本](http://coffeescript.org/)

我只使用 Ember 大约一个月，所以不能保证这是最好的方法，但我必须使用 Socket.io 和 Ember Data 建立一个 Ember CLI 项目。以下内容基于我的工作代码，尽管以下内容未经测试。我认为你需要完成 99% 的一切都在这里。祝您故障排除！

.jshintrc - 如果您在此处不包含 EmberSockets，Ember 服务将会对您大喊大叫

```
{
  "predef": {
  "document": true,
  "window": true,
  "nameofprojectENV": true,
  "EmberSockets": true
  },
  ...
} 
```

Brocfile.js - 导入 Ember 套接字

```
var EmberApp = require('ember-cli/lib/broccoli/ember-app');

var app = new EmberApp();

// change this path to where ember-sockets.js is
app.import('vendor/ember-sockets/package/ember-sockets.js');

module.exports = app.toTree(); 
```

app.js - 记得用实际项目名称替换 nameofproject

```
import Ember from 'ember';
import Resolver from 'ember/resolver';
import loadInitializers from 'ember/load-initializers';

Ember.MODEL_FACTORY_INJECTIONS = true;

// every controller using ember sockets must be listed here in the controllers array
var Socket = EmberSockets.extend({
    host: 'example.local',
    port: 8080,
    controllers: [
        'example'
        // more controllers here
    ]
});

var App = Ember.Application.extend({
    modulePrefix: 'nameofproject',
    Resolver: Resolver,
    Socket: Socket
});

loadInitializers(App, 'nameofproject');

export default App; 
```

router.coffee - 记得用实际项目名称替换 nameofproject

```
`import Ember from 'ember'`

Router = Ember.Router.extend
    location: nameofprojectENV.locationType

Router.map ->
    @route 'example'

`export default Router` 
```

模型/example.coffee

```
`import DS from 'ember-data'`

Example = DS.Model.extend
    name: DS.attr('string')

`export default Example` 
```

路线/example.coffee

```
`import Ember from 'ember'`

ExampleRoute = Ember.Route.extend
    # set model to be all example records
    model: ->
        @store.all('example')

    setupController: (controller, model) ->
        controller.set('model', model)

`export default ExampleRoute` 
```

控制器/example.coffee

```
`import Ember from 'ember'`

ExampleController = Ember.Controller.extend

#### properties

examples: (->
    # @get('content') gets the model, which in this case, is example (set in route)
    @get('content')
).property('content') # watching the model like this might not be right?

#### methods
getExamples: ->
    @socket.emit 'pub',
        # whatever data you need to pass to the server
        data : {examples: true}
        # name of the event you want the data returned on
        event: "getExamples"

#### sockets
sockets:
    # returns examples from server
    getExamples: (data) ->
        # log the data for fun, also to see that you are getting data back
        console.log data
        # set controller to @, which is the same as this.
        controller = @

        # get your array of examples from JSON returned from server
        examples = data.examples

        examples.forEach (example) ->
            # controller instead of @, or it doesn't work
            controller.store.push 'example',
                # you need ids or this will not work
                id: example.id
                name: example.name

`export default ExampleController` 
```

模板/example.coffee

```
{{#each example in examples}}
    {{example.id}} {{example.name}}
{{/each}}

<button {{action getExamples}}>Get Examples</button> 
```

我建议使用[Chrome Ember Inspector](https://chrome.google.com/webstore/detail/ember-inspector/bmdblncegkenkacieihfhpjfppoconhi?hl=en)进行故障排除。您还可以查看您的数据模型和记录等。

# c# - 如何在 C# 中调用 getter 或 setter

> ID：15376840
> 
> 赞同：26
> 
> 时间：2013-03-13T04:03:23.543
> 
> 标签：c#, c#-4.0

我了解如何创建 getter 和 setter

```
public myClass
{
    public int myVal { get; set; }

    // more stuff
} 
```

但我不明白以后如何调用它。

```
public myOtherClass
{
    public myOtherClass()
    {
         myClass localMyClass = new myClass();

         localMyClass.???set??? = 42;  
         // Intelisense doesn't seem to give any obvious options after I enter 
         // the period.
    }
} 
```

我应该如何在 localMyClass 中设置 myVal 的值？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-13T04:12:04.157

```
localMyClass.myVal = 42; 
```

Getter 和 setter 让您可以将值视为公共属性。不同之处在于，您可以在执行获取和设置的函数中做任何您想做的事情。

例子：

### 存储其他变量

```
private int _myVal, myOtherVal;
public int MyVal { get; set { _myVal = value; myOtherVal++; } } 
```

### 组成数字/返回常数

```
public int MyVal { get { return 99; } set; } 
```

### 扔掉二传手

```
private int _myVal;
public int MyVal { get { return _myVal; } set { ; } } 
```

在每种情况下，用户都会觉得它只是一个公共数据成员，只需键入

```
localMyClass.myVal = 42;
int i = localMyClass.myVal; 
```

gettors 和 settors 让你自己实现。此外，正如 Hogan 所说，“有许多库和附加组件 [例如 MVC.NET] 需要您使用 getter 和 setter 函数”——即使是针对微不足道的`{get; set;}`情况。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-13T04:04:48.023

放：

```
localMyClass.myVal = 42 
```

得到：

```
int variable = localMyClass.myVal; 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-13T04:05:45.780

从外部看，访问 getter 和 setter 的语法与访问变量的语法没有区别。赋值转换为 setter 的调用，而普通表达式使用转换为 getter 的调用。

`.`在智能感知中，getter 和 setter 列表应在变量名后放置一个点时打开。属性的左侧应该有蓝色标记（与方法左侧的洋红色标记相反）。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-03-13T04:04:52.223

你要这个

```
localMyClass.myVal = 42; 
```

调用 setter

还有这个

```
varName = localMyClass.myVal; 
```

调用吸气剂。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-13T04:04:49.407

得到：`var tmp = localMyClass.myVal;`

放：`localMyClass.myVal = 2;`

# android - 我无法在 Android 上将数据插入 SQLite 数据库

> ID：15376846
> 
> 赞同：0
> 
> 时间：2013-03-13T04:03:58.067
> 
> 标签：android, sqlite, insert

我正在尝试将房间号及其坐标插入数据库，然后访问它们以指示这些房间，但似乎我无法将数据插入我的数据库。

这是我的数据库处理程序：

```
public class MRLDatabaseHandler extends SQLiteOpenHelper {

    //private Context context;
    //private String locationsFile;

    private static final int DATABASE_VERSION = 1;

    private static final String DATABASE_NAME = "MRL_LocationsDB3";

    static final String TABLE_LOCATIONS = "locations"; //table name

    private static final String KEY_ID = "_GPSPoint_ID";
    private static final String KEY_RNUMBER = "_RNumber";
    private static final String KEY_LAT = "_Latitude";
    private static final String KEY_LONGI = "_Longitude";
    private static final String KEY_ALTI = "_Altitude";

    public MRLDatabaseHandler(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
        //this.context = context;
        //locationsFile = context.getString(R.string.mrl_locations);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        String CREATE_LOCATIONS_TABLE = "CREATE TABLE " + TABLE_LOCATIONS + "("
                + KEY_ID + " INTEGER PRIMARY KEY AUTOINCREMENT," + KEY_RNUMBER + " TEXT," + KEY_LAT + " DOUBLE,"
                + KEY_LONGI + " DOUBLE,"  + KEY_ALTI + " DOUBLE"+ ")";
        db.execSQL(CREATE_LOCATIONS_TABLE);

        //populating the locations table
        /**MRL_LocationsLoader locationLoader = new MRL_LocationsLoader(context, db, locationsFile);
            try {
                locationLoader.loadData();

            }catch (IOException e){
                e.printStackTrace();
                } ***/

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

        db.execSQL("DROP TABLE IF EXISTS " + TABLE_LOCATIONS);

        // Create tables again
        onCreate(db);

    }

//////CRUD IMPLEMETATION
    // Adding new coordinate
        void addCoordinate( MRL_LocationsModelClass point) {
            SQLiteDatabase db = this.getWritableDatabase();

            ContentValues values = new ContentValues();
            values.put(KEY_ID , point.get_GPSPoint_ID());
            values.put(KEY_RNUMBER, point.get_RNumber()); 
            values.put(KEY_LAT, point.get_Latitude()); 
            values.put(KEY_LONGI, point.get_Longitude()); 
            values.put(KEY_ALTI, point.get_Altitude()); 

            // Inserting Row
            db.insert(TABLE_LOCATIONS, null, values);
            db.close(); // Closing database connection
        }

    // Getting single coordinate from SQLite database
    MRL_LocationsModelClass getPoint(int id) {
        SQLiteDatabase db = this.getReadableDatabase();

        Cursor cursor = db.query(TABLE_LOCATIONS, new String[] { KEY_ID,
                KEY_RNUMBER, KEY_LAT, KEY_LONGI, KEY_ALTI }, KEY_ID + "=?",
                new String[] { String.valueOf(id) }, null, null, null, null);
        if (cursor != null)
            cursor.moveToFirst();

        MRL_LocationsModelClass locationsModelClass = new MRL_LocationsModelClass(
                Integer.parseInt(cursor.getString(0)), cursor.getString(1),
                Double.parseDouble(cursor.getString(2)),
                Double.parseDouble(cursor.getString(3)),
                Double.parseDouble(cursor.getString(4)));
        // return contact
        return locationsModelClass;

    } 
```

这是使用它的类：

```
public class DrawPath extends Activity {
     MRLDatabaseHandler db = new MRLDatabaseHandler(this);
    int dest = 9, src = 6;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // Inserting Coordinates
                Log.d("Insert: ", "Inserting ..");
                db.addCoordinate(new MRL_LocationsModelClass("L101", -12.804646,28.240218,  (double) 1223));
                db.addCoordinate(new MRL_LocationsModelClass("C102", -12.8048,28.240736, (double) 1227));
                db.addCoordinate(new MRL_LocationsModelClass("Z103", -12.805274,28.240529, (double) 1225));
                db.addCoordinate(new MRL_LocationsModelClass("A104", -12.805347,28.238821, (double) 1232));
                db.addCoordinate(new MRL_LocationsModelClass("NH201",-12.804497,28.24068, (double) 1222));

        MRL_LocationsModelClass srcPoint = db.getPoint(src);
        MRL_LocationsModelClass destPoint = db.getPoint(dest);
        SharedData data = SharedData.getInstance();
        data.setAPIKEY("0Fm62I15vXD_pVpF8WXdTK0ooUd2Wm8rxsT3Kvg");
        data.setSrc_lat(srcPoint.get_Latitude());
        data.setSrc_lng(srcPoint.get_Longitude());
        data.setDest_lat(destPoint.get_Latitude());
        data.setDest_lng(destPoint.get_Longitude());
        startActivity(new Intent(DrawPath.this,RoutePath.class)); 

    }

} 
```

这是我的日志：

```
03-13 05:19:26.337: D/Insert:(618): Inserting ..
03-13 05:19:30.940: E/Database(618): Error inserting _Longitude=28.240736 _RNumber=C102 _Altitude=1227.0 _Latitude=-12.8048 _GPSPoint_ID=0
03-13 05:19:30.940: E/Database(618): android.database.sqlite.SQLiteConstraintException: error code 19: constraint failed
03-13 05:19:30.940: E/Database(618):    at android.database.sqlite.SQLiteStatement.native_execute(Native Method)
03-13 05:19:30.940: E/Database(618):    at android.database.sqlite.SQLiteStatement.execute(SQLiteStatement.java:55)
03-13 05:19:30.940: E/Database(618):    at android.database.sqlite.SQLiteDatabase.insertWithOnConflict(SQLiteDatabase.java:1549)
03-13 05:19:30.940: E/Database(618):    at android.database.sqlite.SQLiteDatabase.insert(SQLiteDatabase.java:1410)
03-13 05:19:30.940: E/Database(618):    at com.agarwal.route.MRLDatabaseHandler.addCoordinate(MRLDatabaseHandler.java:84)
03-13 05:19:30.940: E/Database(618):    at com.agarwal.route.DrawPath.onCreate(DrawPath.java:20)
03-13 05:19:30.940: E/Database(618):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
03-13 05:19:30.940: E/Database(618):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
03-13 05:19:30.940: E/Database(618):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
03-13 05:19:30.940: E/Database(618):    at android.app.ActivityThread.access$2300(ActivityThread.java:125)
03-13 05:19:30.940: E/Database(618):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
03-13 05:19:30.940: E/Database(618):    at android.os.Handler.dispatchMessage(Handler.java:99)
03-13 05:19:30.940: E/Database(618):    at android.os.Looper.loop(Looper.java:123)
03-13 05:19:30.940: E/Database(618):    at android.app.ActivityThread.main(ActivityThread.java:4627)
03-13 05:19:30.940: E/Database(618):    at java.lang.reflect.Method.invokeNative(Native Method)
03-13 05:19:30.940: E/Database(618):    at java.lang.reflect.Method.invoke(Method.java:521)
03-13 05:19:30.940: E/Database(618):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
03-13 05:19:30.940: E/Database(618):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
03-13 05:19:30.940: E/Database(618):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-28T06:43:11.937

您试图`INTEGER PRIMARY KEY`一遍又一遍地将值 0 添加到列中。这会导致约束失败。

要修复它，请从以下位置删除此行`addCoordinate()`：

```
values.put(KEY_ID , point.get_GPSPoint_ID()); 
```

要捕获自动生成的 id 值，请从以下位置获取返回值`insert()`：

```
long id = db.insert(TABLE_LOCATIONS, null, values);
point.set_GPSPoint_ID(id); 
```

（老问题，但被编辑撞到了。）

# redirect - 如何为struts2中的错误操作请求设置默认页面？

> ID：15376855
> 
> 赞同：0
> 
> 时间：2013-03-13T04:04:47.530
> 
> 标签：redirect, struts2

我已按照 apache 教程进行操作，但以下代码遇到错误。

错误>>>>

```
Caused by: org.xml.sax.SAXParseException; systemId:     
file:/C:/Users/target/Project-1.0/WEB-
INF/classes/struts.xml; lineNumber: 53; columnNumber: 15; The content of element type "package"   
must match "(result-types?,interceptors?,default-interceptor-ref?,default-action-ref?,default-  
class-ref?,global-results?,global-exception-mappings?,action*)". 
```

请注意，一旦我复制重定向代码就会出错，动作和包的定义是正确的。代码

```
 <package name="default" namespace="/" extends="struts-default">

        <default-action-ref name="UnderConstruction"></default-action-ref>

            <action name="UnderConstruction">
                <result>notFound.jsp</result>
            </action>

            <result-types>
                <result-type name="tiles" class="org.apache.struts2.views.tiles.TilesResult"/>
            </result-types>

            <action ....>
            </action>
              ,,,
    </package> 
```

当我更改以下行时

```
 <result>notFound.jsp</result> 
```

至

```
 <result type="tiles">notFound.jsp</result> 
```

该应用程序将运行，但是当我输入错误的地址时，它不会显示 notFound.jsp 页面，只是抛出一个未找到的操作异常。

当我尝试以下代码时，应用程序会运行，但它不会将错误的请求重定向到正在建设的页面

```
 <package name="default" namespace="/" extends="struts-default">

            <result-types>
                <result-type name="tiles" class="org.apache.struts2.views.tiles.TilesResult"/>
            </result-types>

            <action ....>
            </action>
              ,,,
    </package>

      <package name="Hello" extends="struts-default">
           <default-action-ref name="UnderConstruction"></default-action-ref>

            <action name="UnderConstruction">
                <result>notFound.jsp</result>
            </action>
       </package> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T06:26:28.530

您显示的上述配置用于瓷砖集成。您不能简单地复制粘贴并使其像火箭一样工作。但是有多种方法可以实现您的目标，其中一些方法如下：

**第一种方法**

为错误或异常创建全局结果声明

```
<global-results>
    <result name="error">/Error.jsp</result>
    <result name="specific_exception">/Unique.jsp</result>
    <result name="login" type="redirectAction">Login.jsp</result>
</global-results> 
```

并从您的基于操作的入侵中验证并返回相应的字符串 ex 错误或成功。

**第二种方法**

你可以在你的动作映射中重定向自己

```
<action name="your_action_name">
     <result type="success">Success.jsp</result>
     <result type="error">notFound.jsp</result>
 </action> 
```

# nuget - 在 Nuget 包中执行 C# 代码

> ID：15376860
> 
> 赞同：2
> 
> 时间：2013-03-13T04:04:51.303
> 
> 标签：nuget

我是创建 nuget 包的初学者。我创建了一个 nuget 包，它现在将所有文件复制到解决方案资源管理器。我正在尝试将文件夹复制到安装了 Visual Studio 的用户本地文件夹。当用户在他们的 Visual Studio 解决方案上安装 nuget 包时，我可以执行 c# 代码吗？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T05:37:44.863

您可以添加一个[powershell`.ps1`脚本并将其设置为在安装](http://docs.nuget.org/docs/creating-packages/creating-and-publishing-a-package#Automatically_Running_PowerShell_Scripts_During_Package_Installation_and_Removal)nuget 包时执行。如果 Powershell 还不够（很可能会）并且您绝对希望运行一些 C# 代码，只需将代码包含在 Powershell 中，如下所述：http: [//blogs.technet.com/b/stefan_gossner/archive /2010/05/07/using-csharp-c-code-in-powershell-scripts.aspx](http://blogs.technet.com/b/stefan_gossner/archive/2010/05/07/using-csharp-c-code-in-powershell-scripts.aspx)

# xslt - 使用 XSLT 对文档进行非规范化

> ID：15376863
> 
> 赞同：0
> 
> 时间：2013-03-13T04:04:53.593
> 
> 标签：xslt

我是 XSLT 的新手，所以如果这是一个菜鸟问题，请原谅。

假设我有这个 XML 文档（一个带有 2 个 private_rates 的酒店元素）：

```
<hotel>
  <private_rates>
    <private_rate>
      <id>1</id>
    </private_rate>
    <private_rate>
      <id>2</id>
    </private_rate>
  </private_rates>
</hotel> 
```

有没有办法使用 XSLT 将其转换为 2 个酒店元素，每个元素都有一个私人价格？

```
<hotel>
  <private_rates>
    <private_rate>
      <id>1</id>
    </private_rate>
  </private_rates>
</hotel>
<hotel>
  <private_rates>
    <private_rate>
      <id>2</id>
    </private_rate>
  </private_rates>
</hotel> 
```

XSLT 会是什么样子？任何帮助将不胜感激！谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T08:17:21.893

作为 Jollymorphic 解决方案的替代方案，我的偏好是

```
<xsl:template match="private_rates">
      <hotel>
         <xsl:copy-of select="."/>
      </hotel>
</xsl:template> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T04:15:23.147

因为一个合法的 XML 文档必须有一个包含文档元素的单个文件，所以我假设这个酒店序列是在某个东西里面。话虽如此，这个怎么样：

```
<xsl:template match="hotel">
   <xsl:for-each select="private_rates/private_rate">
      <hotel>
         <private_rates>
            <xsl:copy>
               <xsl:apply-templates />
            </xsl:copy>
         </private_rates>
      </hotel>
   </xsl:for-each>
</xsl:template> 
```

此处的`apply-templates`用法假定您的样式表中还有一个[标识模板](http://en.wikipedia.org/wiki/Identity_transform)，该模板将复制与其他模板（例如此模板）没有更具体匹配的源内容。

顺便说一句，在元素和属性名称中不赞成使用下划线。

# javascript - 仅由子 div 滚动 js 将内容推送到 Firefox 中的父 div

> ID：15376864
> 
> 赞同：1
> 
> 时间：2013-03-13T04:04:53.687
> 
> 标签：javascript, debugging, firefox, scroll, height

我一直在Firefox中遇到最奇怪的错误。我有一个父 div（divbodycontainer），当使用 javascript 动态滚动包含基本高度为 0 的浮动 div 的子 div 时，它的内容会在屏幕上向下滚动。如果您在 Firefox 中的任何主页面向下滚动一半并刷新页面，则父 div 内容将向下跳转。奇怪的是萤火虫报告没有可能这样做的css或代码更改？

在快速滚动期间也会随机弹出错误。

尝试通过向 javascript 函数添加高度样式来修复错误，因为该错误与滚动操作相关。

```
$(window).scroll(function () {
var ntMin = 0+"px";
            var newTop = $(window).scrollTop();
            if (newTop <= ntMin){
                newTop = ntMin;
            }
$("#floatPitchButton").stop()
.animate({'top': newTop}, "slow")
document.getElementById('floatPitchButton').style.height = ntMin;
}); 
```

这个想法没有解决我的问题？有人知道发生了什么吗？网站：[www.webstudioproductions.com](http://www.webstudioproductions.com)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-08T23:08:06.767

看起来我能够通过删除服务器 js 文件并重新 ftping 文件来解决问题。

# hashtable - 散列 - 分离链 - 有效处理重复数字

> ID：15376865
> 
> 赞同：0
> 
> 时间：2013-03-13T04:04:57.623
> 
> 标签：hashtable

例如，我正在构建一个哈希表 mod 17，并且我试图找出一种处理重复键值的有效方法。假设我有一个随机数生成器，并且我生成了 1000 个随机生成的数字，那么其中一些数字可能会多次出现。我的实现将有一个指向每个插槽的数组的链接列表，即 17 个插槽和键将存储在它们各自的位置。

我想实现一种故障安全的检查器功能，以确保哈希表中没有重复的键。我一直在互联网上查找此问题，并没有找到最明确的答案。我的想法是保持每个链表排序，并提前检查数字是否已经存在。有人知道更好的主意吗？

任何想法和评论都非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T04:28:58.050

如果我理解，您想要同一个键有多个值吗？我认为这是不可能的。当你去检索值时，你会选择哪个值。

# c++ - 继续推导模板参数

> ID：15376867
> 
> 赞同：0
> 
> 时间：2013-03-13T04:05:45.170
> 
> 标签：c++

在这种情况下，它是一棵二叉树而不是二叉搜索树，模板中只有一个类型为 T 的参数。如主函数所示，我不需要显式 min_height(v, 0, 5)，而是 min_height (v, 0, 5) 就足够了。但是，在二叉搜索树的情况下，有两个模板参数，用法不起作用。我想知道为什么？非常感谢你！

```
#include <iostream>
#include<string>
#include<vector>
using namespace std;
template<typename T>
struct BTNode{
 T data;
 BTNode * left;
 BTNode * right;
 BTNode(T d, BTNode *left=NULL, BTNode * right=NULL): data(d) {} 
 };

template<typename T>
BTNode<T>* min_height(vector<T> &v, int left, int right ){// here is different from my paper code

 if(left<=right){
    int mid=left+ (right-left)/2;
    BTNode<T>* node=new BTNode<T>(v[mid]);
    node->left=min_height(v, left, mid-1 );
    node->right=min_height(v, mid+1, right );
    return node;
    }
}

int main() {
  vector<int> v;
  v.push_back(1);
  v.push_back(2);
  v.push_back(3);
  v.push_back(4);
  v.push_back(5);
  v.push_back(6);
  BTNode<int>* root=min_height(v, 0, 5);

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T04:25:52.570

因为在单个模板参数 T 的情况下，您在其中一个参数中使用 T，第一个参数是向量 &v。所以当编译器看到这一行时

```
BTNode<int>* root=min_height(v, 0, 5); 
```

在 main() 中，它尝试推断 T 的类型，看到第一个参数 v 是类型`vector<int>`，并且可以推断 T = int。

在您上一个问题的另一种情况下，第二个模板参数 Value 不在传递给 min_height 函数的任何类型中。它只是在返回的类型中，但是 C++ 不能从返回值的类型推断模板参数类型，只能从传入参数的类型推断，所以它无法确定 Value 使用什么类型，你必须使用 . 明确指定它`min_height<int,int>`。

# java - 尽管如此，我仍然无法让 create 命令在 PhoneGap 上工作

> ID：15376871
> 
> 赞同：0
> 
> 时间：2013-03-13T04:05:57.030
> 
> 标签：java, html, cordova

我已经安装了 Java 开发工具包、Apache Ant、Android 开发工具包，并遵循了本教程[http://simonmacdonald.blogspot.com/2012/11/getting-create-command-to-work-on.html](http://simonmacdonald.blogspot.com/2012/11/getting-create-command-to-work-on.html)

当我打开命令提示符并导航到 phongeap\lib\android\bin 时，如果我键入 Java，则会显示正确的信息以指示它已安装。当我键入 Javac 时，一切都很好。当我输入 ant 时，一切都很好。当我输入 adb 时，很好，当我输入 android 时，很好。一切都已安装，但我仍然无法让“创建”命令工作。当我输入它时，我在这里看到了同样的错误：

![我得到的错误信息](../Images/cc85c39863767453223931c52bba3b63.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T06:15:49.417

您是否在计算机的“PATH”中添加了全局变量？

Richt 点击电脑 -> 属性 -> 高级系统设置 -> 环境变量 -> 路径

# django - 如何在 Django admin 的 TabularInline formset 中设置默认值

> ID：15376874
> 
> 赞同：11
> 
> 时间：2013-03-13T04:06:27.977
> 
> 标签：django, django-forms, django-admin

如何在 django admin 的内联中设置第一个默认行/值？

```
 class Employee(models.Model):
        username = models.CharField(_('Username'), max_length=150, null=False, blank=False)
        email = models.CharField(_('Email'), max_length=150, null=False, blank=False)

    class Details(models.Model):
        employee = models.ForeignKey(Employee, verbose_name=_('Employee'), blank=False, null=False)
        label = models.CharField(_('Label'), max_length=150, null=False, blank=False)
        value = models.CharField(_('Value'), max_length=150, null=False, blank=False)

    class DetailsFormset(forms.models.BaseInlineFormSet):
        def __init__(self, *args, **kwargs):
                self.initial = [
{ 'label': 'first name'},  
{'label': 'last name'}, 
{'label': 'job',}]
            super(DetailsFormset, self).__init__(*args, **kwargs)

    class DetailsInline(admin.TabularInline):
        model = Details
        formset = DetailsFormset
        fieldsets = [
                ['', {'fields': ['employee', 'label', 'value']}]
        ]

    class EmployeeAdmin(admin.ModelAdmin):
        inlines = [DetailsInline] 
```

但这行不起作用

```
 self.initial = [
{ 'label': 'first name'},  
{'label': 'last name'}, 
{'label': 'job',}] 
```

如何使用 django admin 设置默认值？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-13T04:11:50.230

```
from django.utils.functional import curry

class DetailsInline(admin.TabularInline):
    model = Details
    formset = DetailsFormset
    extra = 3

    def get_formset(self, request, obj=None, **kwargs):
        initial = []
        if request.method == "GET":
            initial.append({
                'label': 'first name',
            })
        formset = super(DetailsInline, self).get_formset(request, obj, **kwargs)
        formset.__init__ = curry(formset.__init__, initial=initial)
        return formset 
```

从这里：[预填充内联 FormSet？](https://stackoverflow.com/questions/442040/pre-populate-an-inline-formset)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-12-13T19:25:09.727

如果您需要为创建的新表单定义默认值，您可以重新定义`empty_form`a 的属性`InlineFormSet`：

```
class MyDefaultFormSet(django.forms.models.BaseInlineFormSet):
    @property
    def empty_form(self):
       form = super(MyDefaultFormSet, self).empty_form
       # you can access self.instance to get the model parent object
       form.fields['label'].initial = 'first name'
       # ...
       return form

 class DetailsInline(admin.TabularInline):
    formset = MyDefaultFormSet 
```

现在，每次添加新表单时，它都会包含您提供的初始数据。我已经在 django 1.5 上对此进行了测试。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2020-04-24T21:58:56.763

为了为内联中的所有实例提供静态默认值，我找到了一个更简单的解决方案，只需将其设置为一个表单：

```
class DetailsForm(django_forms.ModelForm):
    def __init__(self, *args, **kwargs):
        super().__init__(*args, **kwargs)
        self.fields['label'] = 'first_name'

class DetailsInline(admin.TabularInline):
    form = DetailsForm
    # ... 
```

我认为这不适用于 OP 的特定情况，因为每个表单对该`'label'`字段都有不同的值，但我希望它对将来访问此页面的任何人都有用。

# jquery-ui - jquery-ui-1.9.2 对话框在 IE 7 中未正确定位

> ID：15376882
> 
> 赞同：2
> 
> 时间：2013-03-13T04:06:55.967
> 
> 标签：jquery-ui

我正在尝试使用 jquery-ui-1.9.2 来显示对话框，它在 IE 8 中工作正常，但在 IE 7 中定位不正确，它总是加载左上角甚至设置位置。这是我的代码，

```
$(function() {
   $("#servicePopupDivId" ).dialog({
       autoOpen: false,
       width: 400,
   });
   $( "#serviceDivId" ).click(function() {
      $( "#servicePopupDivId" ).dialog( "open" );
   });
}); 
```

任何人都可以帮忙吗？

# c# - 错误说我没有使用我输入的东西 c#

> ID：15376885
> 
> 赞同：-2
> 
> 时间：2013-03-13T04:07:03.767
> 
> 标签：c#, boolean

嗨，我正在尝试制作井字游戏。互联网上有很多代码和灵感，但我需要以某种方式制作它，而且似乎没有多少人使用这种方式，而且我遇到了麻烦。我需要使用数组，然后说我的 x = 10 和我的 y = 1，每当我得到 30 或 3 的总和时，我就会知道其中哪一个赢了。

1.  但是它在winnercheck的方法下说有一些错误的地方，它说需要一个get或set acsessor，我不知道那是什么？

2.  除此之外，它一直警告我，我已经将 x 定义为 1，将 o 定义为 10，我的 player2 并且从不使用 themand

3.  我不知道我怎么能像我所说的那样总结数字？

这是我的代码

```
namespace tictactoe
{
    public partial class Form1 : Form
    { 
         bool player1 = true;
         bool player2 = false; 
         int x=1;
         int o=10;

        public Form1()
        {
            InitializeComponent();
            value();
        }

        private string[] status;

        private void value()

        { 

            int[] status = new int[9];
            myarrays();

        }

        private void myarrays()

        {  
            button1.Text = status[0];
            button2.Text = status[1];
            button3.Text = status[2];
            button4.Text = status[3];
            button5.Text = status[4];
            button6.Text = status[5]; 
            button7.Text = status[6];
            button8.Text = status[7];
            button9.Text = status[8];

        }

        private void label1_Click(object sender, EventArgs e)
        {

        }
        private void Form1_Load(object sender, EventArgs e)
        { 
        }

        private void button1_Click(object sender, EventArgs e)
        {
            if (player1 == true)
            {
                player1 = true;
                button1.Text = "X";
                player1 = false;
            }
            else
            {
                player2 = true;
                button1.Text = "O";
                player2 = false;
                player1 = true;
            }
        }

        private void textBox1_TextChanged(object sender, EventArgs e)
        {

        }

        private void button2_Click(object sender, EventArgs e)
        {
            if (player1 == true)
            {
                player1 = true;
                button2.Text = "X";
                player1 = false;
            }
            else
            {
                player2 = true;
                button2.Text = "O";
                player2 = false;
                player1 = true;
            }

        }

        private void button3_Click(object sender, EventArgs e)
        {
            if (player1 == true)
            {
                 player1 = true;
                button2.Text = "X";
                player1 = false;
            }
            else
            {
                player2 = true;
                button2.Text = "O";
                player2 = false;
                player1 = true;
            }
        }

        private void button4_Click(object sender, EventArgs e)
        {
            if (player1 == true)
            {
                 player1 = true;
                button2.Text = "X";
                player1 = false;
            }
            else
            {
                player2 = true;
                button2.Text = "O";
                player2 = false;
                player1 = true;
        }

        private void button5_Click(object sender, EventArgs e)
        {
            if (player1 == true)
            {
                 player1 = true;
                button2.Text = "X";
                player1 = false;
            }
            else
            {
                player2 = true;
                button2.Text = "O";
                player2 = false;
                player1 = true;            }
        }

        private void button6_Click(object sender, EventArgs e)
        {
            if (player1 == true)
            {
                 player1 = true;
                button2.Text = "X";
                player1 = false;
            }
            else
            {
                player2 = true;
                button2.Text = "O";
                player2 = false;
                player1 = true;            }
        }

        private void button7_Click(object sender, EventArgs e)
        {
            if (player1 == true)
            {
                 player1 = true;
                button2.Text = "X";
                player1 = false;
            }
            else
            {
                player2 = true;
                button2.Text = "O";
                player2 = false;
                player1 = true;            }
        }

        private void button8_Click(object sender, EventArgs e)
        {
            if (player1 == true)
            {
                 player1 = true;
                button2.Text = "X";
                player1 = false;
            }
            else
            {
                player2 = true;
                button2.Text = "O";
                player2 = false;
                player1 = true;            }
        }

        private void button9_Click(object sender, EventArgs e)
        {
            if (førstespiller == true)
            {
                if (player1 == true)
            {
                 player1 = true;
                button2.Text = "X";
                player1 = false;
            }
            else
            {
                player2 = true;
                button2.Text = "O";
                player2 = false;
                player1 = true;
            }
        }

        private void checkwinner 
        {
        if (button1.Text =="X" & button2.Text =="X" & button3.Text= ="x")
            MessageBox.Show
            MessageBox.Show

        }

        private void button10Newgame_Click(object sender, EventArgs e)
        {

            button1.Text = "";
            button2.Text = "";
            button3.Text = "";
            button4.Text = "";
            button5.Text = "";
            button6.Text = "";
            button7.Text = "";
            button8.Text = "";
            button9.Text = "";
            player1 = true;
            player2 = false;
        }

        }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T04:10:18.540

```
private void checkwinner 
```

需要是`private void checkwinner()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T04:10:44.500

您的代码存在许多问题，但我认为您在标题中引用的警告与此行有关：

```
int[] status = new int[9]; 
```

您正在创建一个新变量但从未实际使用它，`status`里面的变量`value`只存在于该方法的范围内。而`status`变量 inside`myarrays`引用成员字段`string[] status`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T04:13:29.167

仅关于您的第一个问题-

```
MessageBox.Show 
```

应该是这样的 -

```
MessageBox.Show("you won!"); 
```

# f# - 何时使用自定义运算符的标准

> ID：15376892
> 
> 赞同：4
> 
> 时间：2013-03-13T04:08:12.530
> 
> 标签：f#, standards, custom-operator

我目前正在阅读 Real-World Functional Programming，它简要提到了 in-fix 运算符是自定义运算符的主要好处之一。在 F# 中何时使用或不使用自定义运算符是否有任何标准？我正在寻找与此等效的[答案](https://stackoverflow.com/questions/4421706/operator-overloading)。

作为参考，这里是@JohnPalmer 从[这里](http://research.microsoft.com/en-us/um/cambridge/projects/fsharp/manual/fsharp-component-design-guidelines.pdf)引用的引用：

> 3.8 算子定义</p>
> 
> 避免在面向 F# 的库设计中定义自定义符号运算符。
> 
> 自定义运算符在某些情况下是必不可少的，并且在大量实现代码中是非常有用的符号设备。对于库的新用户，命名函数通常更易于使用。此外，自定义符号运算符可能难以记录，并且由于 IDE 和搜索引擎的现有限制，用户发现查找运算符的帮助更加困难。
> 
> 因此，通常最好将您的功能发布为命名函数和成员。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T12:12:52.447

*自定义中缀运算符在某些*情况下是一个不错的功能，但是当您使用它们时，您必须非常小心以保持代码的可读性 - 因此 F# 设计指南中的建议在*大多数*情况下都适用。如果我再次编写真实世界函数式编程，我对它们的热情会降低一点，因为它们真的应该小心使用:-)。

也就是说，有一些 F# 库很好地利用了自定义运算符，有时它们工作得很好。我认为[FParsec](http://www.quanttec.com/fparsec/)（解析器组合库）是一种情况——尽管它们可能太多了。另一个例子是[XML DSL](http://fssnip.net/9x)，它使用`@=`.

通常，当您编写*普通*的F# 库时，您可能不想公开它们。但是，当您编写*特定领域的语言*时，自定义运算符可能会很有用。

# trace - IBM Message Broker：可配置的跟踪节点文件路径

> ID：15376895
> 
> 赞同：0
> 
> 时间：2013-03-13T04:08:40.307
> 
> 标签：trace, messagebroker, configurable

我正在尝试创建几个跟踪节点，每个节点都有一个可配置的文件路径。

我更喜欢通过消息代理中的可配置服务，但有可能吗？如果没有，还有其他方法可以使它们可配置吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T13:39:45.403

不是基于每个应用程序/流程。如果您只想能够设置一个公共根目录，那么您可以使用相对路径。

不推荐，但您可以在跟踪节点中使用相对文件路径。默认情况下，这是相对于代理当前工作目录的视图。

这在 v7 和 v8 之间发生了变化，因此如果您真的想使用相对路径，您可以设置环境变量 MQSI_TRACENODES_ROOT_DIRECTORY 来保存基本路径，然后在节点名称中设置相对路径。

您可以使用的另一种方法是在不同环境之间移动之前覆盖 bar 文件中的属性。

对于它的价值，我认为在运行时进行可配置是一个好主意，因此我鼓励您提出增强请求，以引起 Broker 开发团队的注意：

[http://www.ibm.com/developerworks/rfe/?PROD_ID=532](http://www.ibm.com/developerworks/rfe/?PROD_ID=532)

# iphone - 按住按钮直到在 ios 中执行操作

> ID：15376904
> 
> 赞同：1
> 
> 时间：2013-03-13T04:09:41.063
> 
> 标签：iphone, ios, multithreading, web-services, button

我调用了一种网络服务方法来插入一些数据并将一些图像上传到网络 url。它工作正常，但按钮一直按下直到方法执行。我在这里使用了线程概念并创建了另一个线程并执行该操作，但该线程并没有将我带回主线程。

请告诉我这样做的适当方法是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T04:15:13.423

Web 服务调用机制放在一个单独的方法中，并使用 performSelector:withObject:andDelay () 方法从按钮的 IBAction 调用该方法。这将解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T04:12:55.890

创建另一个函数，您可以在其中放置 web 服务调用的代码，以便解决您的按钮按下问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T04:41:33.207

您也可以使用[GCD](https://developer.apple.com/library/mac/#documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html)来实现它。

```
- (IBAction)buttonPress:(id)sender
{
   dispatch_async(dispatch_get_global_queue(0,0), ^{
           //place your web service code here
   });
} 
```

# c - 如何使用 pthread 并行化 pi 的蒙特卡罗估计？

> ID：15376908
> 
> 赞同：3
> 
> 时间：2013-03-13T04:09:57.583
> 
> 标签：c, parallel-processing, pthreads, montecarlo, pi

```
#include <math.h>
#include <stdio.h>
#include <stdlib.h>
#include <time.h>
#include <unistd.h>

int main(int argc, char **argv)
{

    unsigned long long in = 1;
    unsigned long long total = 2;
    double tol , change, new, secs , old = 0.0;
    struct timeval start , end;
    int threads ; /* ignored */

    if ( argc < 2) {
        exit (-1);
    }

    threads = atoi ( argv[1]);
    tol = atof ( argv[2]);
    if (( threads < 1) || ( tol < 0.0)) {
        exit (-1);
    }
    tol = tol *tol;

    srand48(clock());
    gettimeofday (&start , NULL);
    do
    {
        double x, y;
        x = drand48();
        y = drand48();
        total ++;
        if (( x*x + y*y) <= 1.00)
            in ++;
        new = 4.0 * (double)in/( double)total ;
        change = fabs (new - old);
        old = new;
    }while (change > tol );
    gettimeofday (&end, NULL);
    secs = (( double)end.tv_sec - (double)start.tv_sec )
    + (( double)end.tv_usec - (double)start.tv_usec )/1000000.0;
    printf ( ”Found estimate of pi of %.12f in %llu iterations , %.6f seconds.n n”,
            new, total - 2, secs );
} 
```

上面的代码是一个顺序程序，它接受一个参数来表示估计 pi ​​的接近程度。一旦这些旧值和新值的变化低于它退出的容差。

我必须在 pthreads 中并行化这个程序。我不是想让别人为我做这件事，而是想得到一些建议和想法来思考，以便我能够做到这一点。pthreads 程序将线程数和容差作为参数并输出估计值。我对并行程序很陌生，真的不知道从哪里开始，所以我会接受任何建议。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T05:04:27.273

每个线程都应该保持自己的 in 和总计数，并使用更好的退出条件。然后将每个线程的 in 和 total 值相加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T17:45:25.847

```
#include <math.h>
#include <stdio.h>
#include <stdlib.h>
#include <time.h>
#include <unistd.h>
#include <pthread.h>

void* Function(void* i);

#define MAX_THREADS 200
unsigned long long total[MAX_THREADS] = {0};    //total points for threads
unsigned long long in[MAX_THREADS] = {0};       //points inside for threads
double tolerance, change, new, old = 0.0;
long thread_num;
pthread_mutex_t         mutex = PTHREAD_MUTEX_INITIALIZER;

int main(int argc, char **argv)
{
    long i;
    struct timeval start, end;
    double secs;
    unsigned long long master_total;
    pthread_t* threads;

    if (argc != 3){
        printf("\nMust pass 2 arguments:  (Tolerance) (# of Threads)");
        exit(-1);
    }

    thread_num = atoi ( argv[1]);
    tolerance = atof ( argv[2]);

    if (( thread_num < 1) || ( tolerance < 0.0) || (thread_num > 200)) {
        printf("\nIncorrect tolerance or threads.");
        exit (-1);
    }

    threads = malloc(thread_num*sizeof(pthread_t)); //allocating space for threads
    tolerance = tolerance * tolerance;
    change = 0.5;
    srand48(clock());
    gettimeofday (&start, NULL);
    for( i = 0; i < thread_num; i++ ){
        pthread_create(&threads[i], NULL, Function, (void*)i);
    }

    for( i = 0; i < thread_num; i++ ){
        pthread_join(threads[i], NULL);
    }
    gettimeofday (&end, NULL);

    master_total = 0;
    for( i = 0; i < thread_num; i++ ){
        master_total = master_total + total[i];
    }
    secs = (( double)end.tv_sec - (double)start.tv_sec )
    + (( double)end.tv_usec - (double)start.tv_usec )/1000000.0;
    printf ( "Estimation of pi is %.12f in %llu iterations , %.6f seconds.\n", new, master_total, secs );

}
//Each thread will calculate it's own points for in and total
//Per 1000 points it will calculate new and old values and compare to tolerance
//If desired accuracy is met the threads will return. 
void* Function(void* i){
    /*
     rc - return code
     total[i], in[i] - threads own number of calculated points
     my_total, my_in - Each thread calculates global in and total, per 1000 points and calculates tolerance

     */
    long my_spot = (long) i;
    long rc;
    long j;
    unsigned long long my_total;
    unsigned long long my_in;
    do
    {
        double x, y;
        x = drand48();
        y = drand48();
        total[my_spot]++;
        if (( x*x + y*y) <= 1.00){
            in[my_spot]++;
        }
        if(total[my_spot] % 1000 == 0){
            while ( j < thread_num){
                my_total = my_total + total[j];
                my_in = my_in + in[j];
            }
            my_total = my_total;
        //critical section
        //old, new, and change are all global
        rc = pthread_mutex_lock(&mutex);
        new = 4.0 * (double)my_in/( double)my_total;
        change = fabs (new - old);
        old = new;
        rc = pthread_mutex_unlock(&mutex);
        }
    }while (change > tolerance );
    return NULL;
} 
```

这是我提出的，但我遇到了错误。它只是停止。我只是让线程跳出循环并返回，然后主线程加入它们。关于我在这里做什么的任何建议？

我运行它，似乎所有线程在达到互斥锁时都被锁定了。我让每个线程每 1000 点检查一次 pi 的变化。

# php - mysql 喜欢不是通配符

> ID：15376912
> 
> 赞同：1
> 
> 时间：2013-03-13T04:10:18.143
> 
> 标签：php, mysql

我有这张桌子：

```
+---------+----------+
+  Items  +  Person  +
+---------+----------+
+ 2,99,75 +  Jack    +
+ 4,9,63  +  Rose    +
+---------+----------+ 
```

现在我做一个简单的

`LIKE :items`

并使用绑定它

`$stmt->bindParam(':items',$item,PDO::PARAM_STR);`

在哪里

`$item = "%9%"`.

结果同时包含**Jack**和**Rose**，这是错误的，因为我希望仅将**Rose**作为我的结果。似乎同时`LIKE`看到了 99 和 9。我怎样才能限制我`LIKE`只有 9，因为那是 的值`$items`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T04:26:42.857

其他答案很好。但是，我基于 Items 似乎是 ID 的事实提出了这个替代方案。

如果您需要查询逗号分隔值，我会推荐一个单独的表。使用 LIKE 在单个字段中进行查询永远不会真正做到万无一失，并且可能是一个安全问题。尝试这个。

表 1：人

```
+---------+----------+
+  ID     +  Person  +
+---------+----------+
+ <int>   + <string> +
+---------+----------+ 
```

表 2：项目

```
+---------+----------+
+ PersonID+  ItemID  +
+---------+----------+
+ <int>   + <int>    +
+---------+----------+ 
```

然后根据需要使用连接查询两个表。

```
SELECT * FROM Person INNER JOIN Items ON Items.PersonID = Person.ID 
   WHERE Items.ItemID = '9'; 
```

这应该为您提供与它们关联的“9”的每条`Person`记录`ItemID`。

也许这可能会有所帮助： http: [//www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T04:17:57.007

我相信这方面的主要问题是@interrobang 所说的，即您表示数据的方式。

如果您显示的此表 X 是每个人的列表项，则您应该有一个带有人员 ID 的列和另一个带有项目 ID 的列，以及多行来表示每个人的多个条目。这样做，您的搜索将在未来更快、更容易使用和维护。

[SQL小提琴](http://sqlfiddle.com/#!2/90ee4/1)

**MySQL 5.5.30 架构设置**：

```
CREATE TABLE person (
     id int auto_increment primary key, 
     name varchar(20)
);

CREATE TABLE item (
     id int auto_increment primary key, 
     name varchar(20)
);

CREATE TABLE person_item (
     id int auto_increment primary key, 
     person_id int,
     item_id int
);

ALTER TABLE person_item ADD UNIQUE (person_id,item_id);

INSERT INTO person(id,name) VALUES
(1, 'John'),
(2, 'Mary'),
(3, 'Oliver');

INSERT INTO item (id,name) VALUES
(1,'Pen'),
(2,'Pencil'),
(3,'Book');

INSERT INTO person_item (person_id,item_id) VALUES
(1,1),
(1,3),
(2,2),
(3,1); 
```

**查询 1**：

```
select p.name from person_item pi, person p, item i
where pi.person_id = p.id
and pi.item_id = i.id
and i.name LIKE 'Book%' 
```

**[结果](http://sqlfiddle.com/#!2/90ee4/1/0)**：

```
| NAME |
--------
| John | 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T04:13:35.150

这是因为 % 代表一个或多个字符（任何东西）。所以 99 将匹配 "%9%"

如果你只想要 9，你可以试试

```
"%,9,%" 
```

# android - 如何在android中制作多个重叠布局（这意味着使一个布局禁用而另一个布局重叠）

> ID：15376918
> 
> 赞同：1
> 
> 时间：2013-03-13T04:10:47.433
> 
> 标签：android, layout, view

如何在android中制作多个重叠布局（例如，我尝试制作两个布局并让一个布局禁用，另一个布局启用某些操作，这个布局与其他布局重叠）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T04:18:45.680

你有几个选择：

**框架布局**

这允许您将视图直接堆叠在彼此之上。在某些情况下，这很好也很简单，但也很有限。它不会帮助您对齐这些视图，只是将它们堆叠起来。

**相对布局**

这可能是最好的选择，它允许将视图堆叠在彼此之上，但也允许视图彼此对齐。您可以对齐边缘、将视图彼此相邻放置或在父视图中居中。这是 Android 中最强大的视图之一。

**绝对布局**

这已被弃用，不鼓励使用。话虽如此，如果您知道确切的像素应该是什么，这将为您提供像素完美的视图对齐。不推荐使用它的原因是因为 Android 设备具有可变的屏幕尺寸和像素密度，因此在使用此视图时，您很可能会极大地限制您的设备支持。

# node.js - 在 Node.js/Express 中显示视图

> ID：15376926
> 
> 赞同：0
> 
> 时间：2013-03-13T04:11:57.093
> 
> 标签：node.js, express

我正在关注 node.js 上的 peepcode（第 1 部分）视频教程，但我被困在前几个步骤上。当我尝试转到时`http://localhost:3000/login`，我收到以下错误：

*500 错误：无法查找视图“/Users/dantang/Desktop/Programming/Node/basic server/hotpie/apps/authentication/views/login”*

我猜这是由于拼写错误，但我已尝试多次更改代码，但我无法弄清楚出了什么问题。如果有人能告诉我我该怎么做，我会非常感激？谢谢！

github 仓库是[https://github.com/tangbj/nodejs](https://github.com/tangbj/nodejs)

服务器.js

```
/**
 * Module dependencies.
 */

require("coffee-script");

var express = require('express')
  , http = require('http')
  , path = require('path');

var app = express();

app.configure(function(){
  app.set('port', process.env.PORT || 3000);
  app.set('views', __dirname + '/views');
  app.set('view engine', 'jade');
  app.use(express.favicon());
  app.use(express.logger('dev'));
  app.use(express.bodyParser());
  app.use(express.methodOverride());
  app.use(app.router);
  app.use(express.static(path.join(__dirname, 'public')));
});

app.configure('development', function(){
  app.use(express.errorHandler());
});

//Routes
require('./apps/authentication/routes')(app);

http.createServer(app).listen(app.get('port'), function(){
  console.log("Express server listening on port " + app.get('port'));
}); 
```

登录.jade

```
form(action='/sessions', method='post')
  label
    | Username
    input(type='text', name='user')
  label
    | Password
    input(type='password', name='password')
  input(type='submit', name='Submit') 
```

路线.咖啡

```
routes = (app) ->

  app.get '/login', (req, res) ->
    res.render "#{__dirname}/views/login",
      title: 'Login'
      stylesheet: 'login'

module.exports = routes 
```

包.json

```
{
  "name": "application-name",
  "version": "0.0.1",
  "private": true,
  "dependencies": {
    "express": "3.1.0",
    "jade": "*",
    "coffee-script": "~1.6.1"
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T19:14:25.980

你的`login.jade`文件有问题。也许是一些编码问题。我创建了一个`newLogin.jade`文件，更改了`render`功能，一切正常。[请参阅github](https://github.com/zeMirco/nodejs/commit/685f443a15b17e11713ecc1cceb4839ae21268da)上的拉取请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T05:41:41.093

如果您使用的是需要反斜杠而不是 linux 中的正斜杠的 Windows，它将无法找到路径。所以使用`path.join`or`path.normalize`来获得正确的路径。尝试在您的`routes.coffee`

```
 res.render "#{__dirname}/views/login", 
```

到

```
 res.render path.join(__dirname, "/views/login"), 
```

和

```
app.set('views', __dirname + '/views'); 
```

到

```
app.set('views', path.join(__dirname + '../views')); 
```

否则验证目录/文件的位置。

# ios - 苹果是否会接受仅具有横向模式的ipad应用程序

> ID：15376928
> 
> 赞同：-2
> 
> 时间：2013-03-13T04:12:04.517
> 
> 标签：ios, ipad, landscape

我有一个应用程序，在该应用程序中，我使用了固定到横向的应用程序的旋转 苹果将接受或不接受该应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T04:14:01.363

是的。为什么不。您可以为一个方向开发应用程序。

# joomla - Joomla 1.5.23：站点范围的组件 - 在所有实例上运行

> ID：15376929
> 
> 赞同：0
> 
> 时间：2013-03-13T04:12:20.507
> 
> 标签：joomla, joomla1.5, custom-component, multiple-domains

我有一个项目，我需要能够在页面上显示一个 html 项目，具体取决于域是什么。

我想要做的是调用组件站点范围（前端），以便它基本上挂接到每个页面加载。

听起来有点复杂，但也确实需要它运行

本质上，我有两个域都链接到同一个 joomla 安装。当用户访问域 XI 时不想看到特定的覆盖，但是当用户访问域 Y 时，我希望组件启动，放入 html 并在 url 中插入一个额外的参数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T23:43:35.813

只需针对 JURI::base(false) 测试服务器名称并使用 JRequest::setVar('newparam','newvalue'); 设置新的 var；但是你在哪里需要这个变量？它可能不可用，具体取决于您设置它的位置：即，如果您将其设置在模块中，它将对组件不可用

# database - 在java中动态地将双维数组插入ms-access

> ID：15376932
> 
> 赞同：0
> 
> 时间：2013-03-13T04:12:27.657
> 
> 标签：database, arrays, ms-access, 2d

我想在java中动态地将双维数组插入ms-access ..

这是我的代码..

```
 try {
    Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
    String url = "jdbc:odbc:Driver={Microsoft Access Driver " +
        "(*.mdb, *.accdb)};DBQ=C:\\Documents and Settings\\ANIL KUMAR\\Desktop\\hyperdata.mdb";
    con = DriverManager.getConnection(url);
    System.out.println("Connected!");
    }
    catch (SQLException e) {
        System.out.println("SQL Exception: "+ e.toString());
    }
     catch (Exception e) {
       e.printStackTrace();
     } 
```

如果我有一个包含两列的字符串数组：

```
String[][] a = new String[10][2];
PreparedStatement pst = con.prepareStatement("INSERT INTO sap_details VALUES (?,?)");
for (int i = 0; i < 10; i++) {
    pst.setString(1, a[i][0]);
    pst.setString(2, a[i][1]);
    pst.addBatch();
}
pst.executeBatch(); 
```

如果有一个包含 n 列和 n 行的字符串数组怎么办？如何插入字符串数组 a[n][n]？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T04:15:50.383

有一个内部 for 循环

```
for (int i=0; i<a.length; i++) {
  for (int j=0; j<a[i].length; j++) {
     System.out.print(a[i][j]);
  }
} 
```

您还可以使用增强循环，如下所示

```
for (String[] array : a) {  
  for (String s : array) {  
    System.out.println(s);  
   }  
} 
```

# solr - 调试 solr rss DataImportHandler

> ID：15376941
> 
> 赞同：0
> 
> 时间：2013-03-13T04:13:43.847
> 
> 标签：solr

我有一个现有的集合，我想向其中添加一个 RSS 导入器。我已经复制了从 example-DIH/solr/rss 代码中可以看到的内容。

详细信息如下，但底线是一切似乎都在运行，但它总是说“Fetched：0”（我没有得到任何文件）。tomcat 日志中没有异常。

问题：

*   有没有办法对 rss 导入器进行调试？
*   我可以看到 solr 的实际请求和响应吗？
*   什么会导致请求成功，但没有获取任何行？
*   是否有将 RSS DIH*添加*到*现有*集合的教程？

谢谢！

我的 solrconfig.xml 文件包含 requestHandler：

```
<requestHandler name="/dataimport"
    class="org.apache.solr.handler.dataimport.DataImportHandler">
    <lst name="defaults">
            <str name="config">rss-data-config.xml</str>
    </lst>
</requestHandler> 
```

和 rss-data-config.xml：

```
<dataConfig>
    <dataSource type="URLDataSource" />
    <document>
        <entity name="slashdot"
                pk="link"
                url="http://rss.slashdot.org/Slashdot/slashdot"
                processor="XPathEntityProcessor"
                forEach="/rss/channel | /rss/item"
                transformer="DateFormatTransformer">

            <field column="source_name" xpath="/rss/channel/title" commonField="true" />

            <field column="title" xpath="/rss/item/title" />
            <field column="link" xpath="/rss/item/link" />
            <field column="body" xpath="/rss/item/description" />
            <field column="date" xpath="/rss/item/date" dateTimeFormat="yyyy-MM-dd'T'HH:mm:ss" />
        </entity>
    </document>
</dataConfig> 
```

并来自 schema.xml：

```
<fields>
   <field name="title" type="text_general" required="true" indexed="true" stored="true"/>
   <field name="link" type="string" required="true" indexed="true" stored="true"/>
   <field name="source_name" type="text_general" required="true" indexed="true" stored="true"/>
   <field name="body" type="text_general" required="false" indexed="false" stored="true"/>
   <field name="date" type="date" required="true" indexed="true" stored="true" />
   <field name="text" type="text_general" indexed="true" stored="false" multiValued="true"/>
   <field name="_version_" type="long" indexed="true" stored="true"/>
<fields> 
```

当我从管理网页运行数据导入时，一切似乎都很顺利。它显示“请求：1”，并且在 tomcat 日志中没有异常：

```
Mar 12, 2013 9:02:58 PM org.apache.solr.handler.dataimport.DataImporter maybeReloadConfiguration
INFO: Loading DIH Configuration: rss-data-config.xml
Mar 12, 2013 9:02:58 PM org.apache.solr.handler.dataimport.DataImporter loadDataConfig
INFO: Data Configuration loaded successfully
Mar 12, 2013 9:02:58 PM org.apache.solr.handler.dataimport.DataImporter doFullImport
INFO: Starting Full Import
Mar 12, 2013 9:02:58 PM org.apache.solr.handler.dataimport.SimplePropertiesWriter readIndexerProperties
INFO: Read dataimport.properties
Mar 12, 2013 9:02:59 PM org.apache.solr.handler.dataimport.DocBuilder execute
INFO: Time taken = 0:0:0.693
Mar 12, 2013 9:02:59 PM org.apache.solr.update.processor.LogUpdateProcessor finish
INFO: [articles] webapp=/solr path=/dataimport params={optimize=false&clean=false&indent=true&commit=false&verbose=true&entity=slashdot&command=full-import&debug=true&wt=json} {} 0 706 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T04:26:38.180

您使用的是哪个 Solr 版本？

对于 3.X，您具有 DIH 的[调试](http://wiki.apache.org/solr/DataImportHandler#Commands)功能，这将帮助您逐步调试。
它在 4.X 中丢失可能检查[SOLR-4151](https://issues.apache.org/jira/browse/SOLR-4151)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T04:47:50.450

您的问题是由于您的 rss-data-config.xml 和定义的 xpaths。

如果您在 Internet Explorer 中打开 URL [http://rss.slashdot.org/Slashdot/slashdot](http://rss.slashdot.org/Slashdot/slashdot)并按 F12 以获取开发人员工具，它将向您显示 HTML 的结构。

您可以看到该节点`<item>`是`<channel>`而不是的子节点`<rss>`。所以你的配置应该如下所示：

```
<?xml version="1.0" encoding="UTF-8" ?>
<dataConfig>
<dataSource type="URLDataSource" />
<document>
<entity name="slashdot"
            pk="link"
            url="http://rss.slashdot.org/Slashdot/slashdot"
            processor="XPathEntityProcessor"
            forEach="/rss/channel | /rss/channel/item"
            transformer="DateFormatTransformer">

        <field column="source_name" xpath="/rss/channel/title" commonField="true" />

        <field column="title" xpath="/rss/channel/item/title" />
        <field column="link" xpath="/rss/channel/item/link" />
        <field column="body" xpath="/rss/channel/item/description" />
        <field column="date" xpath="/rss/channel/item/date" dateTimeFormat="yyyy-MM-dd'T'HH:mm:ss" />
    </entity>
</document>
</dataConfig> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-13T15:27:06.877

以下 data-config.xml 文件适用于 Slashdot (Solr 4.2.0)

```
<dataConfig>
    <dataSource type="HttpDataSource" />
<document>
<entity name="slashdot"
    pk="link"
    url="http://rss.slashdot.org/Slashdot/slashdot"
    processor="XPathEntityProcessor"
    forEach="/rss/channel/item"
    transformer="DateFormatTransformer">

    <field column="title"        xpath="/rss/channel/item/title" />
    <field column="link"         xpath="/rss/channel/item/link" />
    <field column="description"  xpath="/rss/channel/item/description" />
    <field column="creator"      xpath="/rss/channel/item/creator" />
    <field column="item-subject" xpath="/rss/channel/item/subject" />

    <field column="slash-department" xpath="/rss/channel/item/department" />
    <field column="slash-section"    xpath="/rss/channel/item/section" />
    <field column="slash-comments"   xpath="/rss/channel/item/comments" />
    <field column="date" xpath="/rss/channel/item/date" dateTimeFormat="yyyy-MM-dd'T'hh:mm:ss'Z'" />
    </entity>
</document> 
```

请注意 dateTimeFormat 上的额外“Z”，根据“schema.xml”这是必需的

引用 schema.xml

> 此日期字段的格式为 1995-12-31T23:59:59Z，是 dateTime [http://www.w3.org/TR/xmlschema-2/#dateTime](http://www.w3.org/TR/xmlschema-2/#dateTime)
> 的规范表示形式的更受限制的形式 结尾的“Z”表示 UTC 时间并且是强制性的。允许使用可选的小数秒：1995-12-31T23:59:59.999Z 所有其他组件都是必需的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-22T12:55:38.953

```
Update your rss-data-config.xml as below

'<dataConfig>
    <dataSource type="URLDataSource" />
    <document>
        <entity name="slashdot"
                pk="link"
                url="http://rss.slashdot.org/Slashdot/slashdot"
                processor="XPathEntityProcessor"
                forEach="/RDF/channel | /RDF/item"
                transformer="DateFormatTransformer">

            <field column="source"       xpath="/RDF/channel/title"   commonField="true" />
            <field column="source-link"  xpath="/RDF/channel/link"    commonField="true" />
            <field column="subject"      xpath="/RDF/channel/subject" commonField="true" />

            <field column="title"        xpath="/RDF/item/title" />
            <field column="link"         xpath="/RDF/item/link" />
            <field column="description"  xpath="/RDF/item/description" />
            <field column="creator"      xpath="/RDF/item/creator" />
            <field column="item-subject" xpath="/RDF/item/subject" />

            <field column="slash-department" xpath="/RDF/item/department" />
            <field column="slash-section"    xpath="/RDF/item/section" />
            <field column="slash-comments"   xpath="/RDF/item/comments" />
            <field column="date" xpath="/RDF/item/date" dateTimeFormat="yyyy-MM-dd'T'hh:mm:ss" />
        </entity>
    </document>
</dataConfig>'

It worked for me 
```

# php - PHP时间范围验证

> ID：15376942
> 
> 赞同：-1
> 
> 时间：2013-03-13T04:13:53.207
> 
> 标签：php, mysql

我目前正在处理我的 PHP 页面，其中包括调度。我计划包括一个验证，它将限制用户输入与单个教室下的其他时间表相同或之间的时间范围。

为了更好的理解，

如果数据库中存在此计划`Schedule 1 : MWF 9:00am - 10:00am; Room 1`

两者都不

`Schedule 2 : Wednesday 9:00am - 10:00am; Room 1`也
`Schedule 3: MWF 9:30am - 10:30am; Room 1`不允许进入。

你能给我一个想法来实现这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T04:19:25.267

假设您有一个`start_time`and `end_time`，每当添加新项目时，您不应该找到任何现有项目，例如：

```
start_time  BETWEEN new_item_start_time AND new_item_end_time
OR end_time BETWEEN new_item_start_time AND new_item_end_time 
```

# android - 更新 Eclipse SDK 错误

> ID：15376948
> 
> 赞同：8
> 
> 时间：2013-03-13T04:14:09.160
> 
> 标签：android, eclipse, sdk, updates

我更新了我的 SDK，现在它说我需要拥有我已经拥有的 SDK。当我检查更新并尝试更新选项时，我得到了这个：

```
An error occurred while collecting items to be installed
session context was:(profile=profile, phase=org.eclipse.equinox.internal.p2.engine.phases.Collect, operand=, action=).
No repository found containing: osgi.bundle,com.android.ide.eclipse.adt,21.1.0.v201302060044-569685
No repository found containing: osgi.bundle,com.android.ide.eclipse.adt.package,21.1.0.v201302060044-569685
No repository found containing: osgi.bundle,com.android.ide.eclipse.base,21.1.0.v201302060044-569685
No repository found containing: osgi.bundle,com.android.ide.eclipse.ddms,21.1.0.v201302060044-569685
No repository found containing: osgi.bundle,com.android.ide.eclipse.gldebugger,21.1.0.v201302060044-569685
No repository found containing: osgi.bundle,com.android.ide.eclipse.hierarchyviewer,21.1.0.v201302060044-569685
No repository found containing: osgi.bundle,com.android.ide.eclipse.ndk,21.1.0.v201302060044-569685
No repository found containing: osgi.bundle,com.android.ide.eclipse.traceview,21.1.0.v201302060044-569685
No repository found containing: osgi.bundle,overlay.com.android.ide.eclipse.adt.overlay,21.1.0.v201302060044-569685
No repository found containing: org.eclipse.update.feature,com.android.ide.eclipse.adt,21.1.0.v201302060044-569685
No repository found containing: org.eclipse.update.feature,com.android.ide.eclipse.ddms,21.1.0.v201302060044-569685
No repository found containing: org.eclipse.update.feature,com.android.ide.eclipse.gldebugger,21.1.0.v201302060044-569685
No repository found containing: org.eclipse.update.feature,com.android.ide.eclipse.hierarchyviewer,21.1.0.v201302060044-569685
No repository found containing: org.eclipse.update.feature,com.android.ide.eclipse.ndk,21.1.0.v201302060044-569685
No repository found containing: org.eclipse.update.feature,com.android.ide.eclipse.traceview,21.1.0.v201302060044-569685 
```

有什么解决办法吗？？我已经尝试了一切！

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-03-25T21:19:30.297

*取消选中*“安装期间联系所有更新站点以查找所需软件”

请参阅[更新到 SDK 21.1 后无法在 eclipse Juno (Windows 7) 上安装 Android ADT 21.1](https://stackoverflow.com/questions/14866656/can-not-install-android-adt-21-1-on-eclipse-juno-windows-7-after-upadate-to-sd)

# svn - 在 SVN 上提交后卡在 SSH

> ID：15376955
> 
> 赞同：1
> 
> 时间：2013-03-13T04:14:51.903
> 
> 标签：svn, svn, ssh

我正在尝试设置一个[svn](/questions/tagged/svn "显示标记为“svn”的问题")来将文件导出到现有服务器。

因为我的公司服务器是实时的并且巨大的已经运行了好几年，我不能`wipe`整个网络服务器和做一个`SVN update`服务器文件太大和内容自定义文件。

我现在要做的是`commit`在服务器 A 上以及`scp`向服务器 B 提交的最新文件，因此该文件将位于 Web 服务器方向。我尝试按照以下方式进行操作，但失败了，有什么更好的方法可以推荐我吗？我不是很擅长做配置。

这是我在提交后尝试做的事情：

```
repository="file:///var/www/html/svn/testrepo/"
revision_from=$2
target_directory="/home/SVN/"

expr $((revision_from--))
rm -R -f $target_directory

for line in `svn diff --summarize -r $revision_from:HEAD $repository | grep "^[AM]"`
do
        if [ $line != "A" ] && [ $line != "AM" ] && [ $line != "M" ]; then
            filename=`echo "$line" |sed "s|$repository||g"`
            # don't export if it's a directory we've already created
            if [ ! -d $target_directory$filename ]; then
                    directory=`dirname $filename`
                    mkdir -p $target_directory$directory
                    svn export --force $line $target_directory$filename
                fi
        fi
done

scp -r -P 1221 /home/SVN/* svnadmin@192.168.0.1:/home/svnadmin/
ssh -t -t -p 1221 svnadmin@192.168.0.1 \
sudo -u apache /bin/cp -rf /home/svnadmin/* /path/to/web/ 
```

如果您需要更多信息，请告诉我~

编辑：将脚本修改为最新

Edit2：现在我收到了这个错误，它似乎没有执行 /bin/cp

```
post-commit hook failed (exit code 1) with output:
tcgetattr: Inappropriate ioctl for device
Connection to 192.168.0.1 closed. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T03:02:24.310

通过将我的用户添加到 apache 组来解决，以便我的用户可以覆盖 apache 文件

# android - ADB shell 上的“aapt 转储徽章”

> ID：15376968
> 
> 赞同：3
> 
> 时间：2013-03-13T04:16:01.350
> 
> 标签：android, adb, aapt

我正在尝试从命令行获取应用程序及其可启动活动的列表。我知道

```
aapt dump badging 
```

会给我这个信息。我只是想知道我是否可以从 ADB shell 的上下文中获取这些信息。我意识到我可以将文件拉到本地机器上，但有些 APK 相当大，所以我宁愿直接从设备上获取这些信息......

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-25T07:01:25.240

`adb shell dumpsys`将为您提供大量信息，包括可启动的活动。例如，输出将列出对操作做出反应的活动`android.intent.action.MAIN`：

```
 android.intent.action.MAIN:
    423fff90 com.android.bluetooth/.bpp.BluetoothBppActivity filter 42400218
    424003d0 com.android.bluetooth/.bpp.BluetoothBppSetting filter 42400608
    42400758 com.android.bluetooth/.bpp.BluetoothBppPrintPrefActivity filter 424009b8
    42400b08 com.android.bluetooth/.bpp.BluetoothBppStatusActivity filter 42400d60
    42400f10 com.android.bluetooth/.bpp.BluetoothBppAuthActivity filter 42401158
    42408bb8 com.google.android.apps.books/.app.BooksActivity filter 42408e88
    42414f50 com.android.providers.calendar/.CalendarContentProviderTests filter 42415270
    42415a38 com.android.providers.calendar/.CalendarDebug filter 42415c28
    42415df0 com.android.providers.calendar/.CalendarDebugActivity filter 42416048
    ... 
```

请注意，输出是巨大的；你可能想限制输出。您可以在其输出的顶部看到 dumpsys 知道的子类别：

```
Currently running services:
  SurfaceFlinger
  accessibility
  account
  activity
  alarm
  ...
  package
  ... 
```

在您的情况下，您可能只对`adb shell dumpsys package`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T17:03:33.777

我不知道执行此操作的 adb shell 方式，但您可以在 Java 中敲出一些东西来读取所有这些信息。

请参阅[包管理器](https://developer.android.com/reference/android/content/pm/PackageManager.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T01:32:06.023

试试`adb shell pm list packages`。这会给你所有的包。至于可启动的活动，请尝试使用`adb shell am start`.

# excel - 获取 Worksheet_change 事件自动执行宏

> ID：15376969
> 
> 赞同：2
> 
> 时间：2013-03-13T04:16:09.790
> 
> 标签：excel, vba

我有一个宏（ApplyFilter），它根据我在另一个工作表（总计）上的单元格 B1 中输入的日期过滤许多工作表。那个宏是：

```
Sub ApplyFilter() 'Filters all worksheets except worksheet1 for date entered into _
                  'Grand Totals!B1
Dim WS_Count As Integer
Dim I As Integer
Dim FilterRange As Variant
FilterRange = Range("'Grand Totals'!B1")
' Set WS_Count equal to the number of worksheets in the active
' workbook.
WS_Count = ActiveWorkbook.Worksheets.Count
' Begin the loop.
    For I = 2 To WS_Count
    Sheets(I).Select
    ActiveSheet.AutoFilterMode = False 'Remove any existing filters
    Worksheets(I).Range("A2").AutoFilter Field:=1, Criteria1:=Range("'Grand Totals'!B1").Text
    Next I
Sheet1.Activate
End Sub 
```

当我手动执行此宏时，它会按应有的方式执行和过滤。但是，当我从另一个子调用这个宏时：

```
Sub Worksheet_Change(ByVal Target As Range)
If Not Intersect(Target, Me.Range("B1")) Is Nothing Then _
    Call ApplyFilter
End Sub 
```

我得到一个“宏”窗口，其中提供了可用的宏列表。我可以选择“ApplyFilter”宏并单击“运行”，然后宏会根据需要执行和过滤工作表。

我发现许多关于从子程序中自动执行宏的参考，但没有一个参考“宏”窗口，我现在必须从中选择要运行的宏。相反，当我在“Grand Totals”工作表的单元格 B1 中输入日期并按 Enter 时，sub worksheet_change(ByVal Target As Range) 应自动调用“ApplyFilter”并将日期过滤器应用于许多工作表。

我创建了一个按钮并使用 Button_Click 调用“ApplyFilter”，一切都很好。但是，输入日期然后按 Enter 执行宏似乎更直观。我可以忍受 Button_Click 方法，但我正在尝试首先学习 VBA，而且我只是固执地想要学习如何使它工作，我不想仅仅满足于什么会起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T04:51:31.743

工作表代码必须在工作`Grand Totals`表中

*   右键单击您的`Grand Totals`工作表选项卡
*   `View Code`
*   确保将下面的代码粘贴到此处
*   [alt](/questions/tagged/alt "显示标记为“alt”的问题") [f11](/questions/tagged/f11 "显示标记为“f11”的问题")返回 Excel

**总计表代码**

```
Sub Worksheet_Change(ByVal Target As Range)
If Not Intersect(Target, Me.Range("B1")) Is Nothing Then Call ApplyFilter
End Sub 
```

**更高效的过滤代码**

```
Sub ApplyFilter()
Dim ws As Worksheet
For Each ws In ActiveWorkbook.Sheets
      If ws.Name <> "Grand Totals" Then
        ws.AutoFilterMode = False
        ws.Range("A2").AutoFilter Field:=1, Criteria1:=Range("'Grand Totals'!B1").Text
      End If
Next
End Sub 
```

# java - android eclipse 按钮 OnClick 事件

> ID：15376970
> 
> 赞同：5
> 
> 时间：2013-03-13T04:16:11.773
> 
> 标签：java, android, xml, eclipse, android-layout

我有 2 个文件：main_activity.xml 和 home.xml。我在 main_activity.xml 中做了一个按钮

这是代码片段：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
 xmlns:tools="http://schemas.android.com/tools"
 android:layout_width="match_parent"
 android:background="@drawable/splash_background"
 android:layout_height="match_parent"
 android:paddingBottom="@dimen/activity_vertical_margin"
 android:paddingLeft="@dimen/activity_horizontal_margin"
 android:paddingRight="@dimen/activity_horizontal_margin"
 android:paddingTop="@dimen/activity_vertical_margin"
 tools:context=".MainActivity" >

<Button
    android:id="@+id/Home"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:layout_marginRight="43dp"
    android:onClick="home"
    android:text="Home" />

</RelativeLayout> 
```

然后，我有了 home.xml。我希望按钮打开 home.xml。我怎样才能做到这一点？我不知道任何java，而且我是android开发的新手。

这是我的 home.xml 下面：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:background="@drawable/app_bg"
    android:layout_height="match_parent"
    android:orientation="vertical" >

</LinearLayout> 
```

下面是我的 AndroidManifest.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
 package="com.example.idozer"
 android:versionCode="1"
 android:versionName="1.0" >

 <uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" />

 <application
    android:allowBackup="false"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.example.idozer.SplashActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <activity android:name="com.example.idozer.MainActivity"
        android:label="@string/app_name" >
    </activity>
</application>
</manifest> 
```

这就是我所拥有的。如果您回复，请告诉我在哪里添加代码，例如目录或代码片段之间。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-13T04:27:38.867

要在 android 中管理点击活动，您可以执行以下操作

1.  `OnClickListener`在**YourActivity.java**类上实现，如

    `public class MainActivity extends Activity implements OnClickListener`

2.  然后，在 .java 类中声明您的按钮，例如

    `Button btn = (Button) findViewById(R.id.btnPlay);`

3.  然后使用按钮`btn`变量如下

    ```
    btn.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            myClick(v); /* my method to call new intent or activity */
        }
    }); 
    ```

4.  处理点击事件：

    ```
    public void myClick(View v) {
        Intent intent = new Intent(**this, Swipe.class**);
        startActivity(intent);// for calling the activity
    } 
    ```

您还需要在`android manifest`下面注册您的活动（.java）

```
<activity
    android:name=".Swipe"
    android:screenOrientation="landscape" >
</activity> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-21T05:09:26.343

> 您可以使用此代码。
> 
> ## 安卓：OnClickListener

**在我们的活动类中，我们添加了 onclick 方法。**

> 在我们的活动类中，我们添加了 onclick 方法。

```
 //On click event for button1
public void button1OnClick(View v) {
    //Inform the user the button has been clicked
    Toast.makeText(this, "Button1 clicked.", Toast.LENGTH_SHORT).show();               
} 
```

> 在布局文件中，我们添加对活动中 onclick 处理程序的引用。应用程序会自动将 onclick 方法绑定到视图（在本例中为 button1）

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical">

        <Button
            android:id="@+id/button1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/button1"
            android:onClick="button1OnClick"/>
</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T04:29:31.840

创建另一个类转到您的项目右键单击并单击类并创建主页。在那个 Home 类文件中扩展活动并添加这样的代码

```
public class Home extends Activity {
  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.home);
  }
} 
```

在**启动活动类**中添加这一行

```
Intent intent = new Intent(SplashActivity.this,Home.class);
startActivity(intent); 
```

在您的 android 清单文件中添加 Home 活动类

```
<activity android:name="com.example.idozer.Home"
    android:label="@string/app_name" >
</activity> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T04:38:54.430

I will give you just a little bit to get you started as this answer may help others that are having trouble with using `onClick()` this way but you really need to learn Java and go through the **[Android Docs](http://developer.android.com/index.html)** so you can ask better questions

You need to read [Here](http://developer.android.com/reference/android/app/Activity.html) about `Actviities` and how to create them. Then in your code you will have a function

```
 public void home(View v)  //the name of this function comes from where you declared in your manifest `android:onClick="home"
{
     Intent intent (MainActivity.this, HomeActivity.class); //MainActivity is the name of current activity and HomeActivity is the name of the activity you want to start
     can add intent extras/flags/categories here
     startActivity(intent);
} 
```

You also need to add the `HomeActivity` in your `manifest` as you have for the other `Activities`.

But you really need to go through the docs and do some tutorials to get an idea of how the Android framework operates and you need to learn Java to make your life a whole lot easier. Besides the previous two links I have given, also see [this post](https://stackoverflow.com/questions/15059351/using-nested-interfaces-for-communication-between-two-classes-in-java-android/15059793#15059793) about click events as there are different ways to use `onClick()`

I hope this is enough to get you started and I really hope you go through the docs to get a better understanding of what you are doing. Good luck to you!

Another important link to get started

[Intents](http://developer.android.com/reference/android/content/Intent.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T04:35:52.797

`android:onClick`在 API 级别 4 中添加以使其更容易、更类似于 Javascript 网络，并从 XML 驱动一切。它在内部做的是在`OnClickListener`上添加一个`Button`，它调用你的 home 方法。

```
<Button
  android:id="@+id/Home"
  android:layout_width="wrap_content"
  android:layout_height="wrap_content"
  android:layout_alignParentRight="true"
  android:layout_alignParentTop="true"
  android:layout_marginRight="43dp"
  android:onClick="home"
  android:text="Home" /> 
```

.

```
public void home(View view){
  Intent intent=new Intent (view.getContext(),Luton.class);
  this.startActivity(intent);
} 
```

在你的活动课上

使用 java 代码，您可以通过从 xml 获取按钮的 id 来单击按钮。

```
<Button
  android:id="@+id/myHomeButton"
  android:layout_width="wrap_content"
  android:layout_height="wrap_content"
  android:layout_alignParentRight="true"
  android:layout_alignParentTop="true"
  android:layout_marginRight="43dp"
  android:text="Home" /> 
```

.

```
Button button= (Button) findViewById(R.id.myHomeButton);
button.setOnClickListener(new View.OnClickListener() {
  @Override
  public void onClick(View v) {
     //do whatever you want on button click
  }
}); 
```

两者完全相同

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-04-13T16:50:53.240

```
Button button = (Button) findViewById(R.id.button1);
    button.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View view) {
            Toast.makeText(MainActivity.this, "Button Clicked", Toast.LENGTH_SHORT).show();
        }
    }); 
```

# python - 同一模型中的两个类

> ID：15376971
> 
> 赞同：-1
> 
> 时间：2013-03-13T04:16:18.667
> 
> 标签：python, xml, openerp

请告诉我; 在 OpenERP 7 中，我创建了两个类和从这些类生成的两个表。最后我调用了这些类，例如 checkroll() 和 workoffer()。现在它的工作完美&事情是想要从一个类生成的两个表是错误的或根据openERP标准正确。？还有其他方法可以实现吗？

```
from openerp.osv import fields, osv

class checkroll(osv.osv):
    _name = "checkroll.plucker"
    _description = "This table is for keeping personal data of plucker"
    _columns = {
        'reg_no': fields.char('Registration Number', size=256, required=True),
        'worker_name': fields.char('Worker Name', size=256, required=True),
        'spouse_name': fields.char('Spouse Name', size=256),
        'gender' : fields.selection((('male', 'Male'), ('female', 'Female'), ('middle', 'Test')), 'Gender', required=True),
        'epf_no':fields.char('EPF Number', size=256)
    }

checkroll()

class workoffer(osv.osv):
    _name = "checkroll.work.offer"
    _description = "This table is for keeping work offer data"
    _columns = {
        'date': fields.date("Date"),
        'division': fields.char('Division', size=256, required=True),
        'work' : fields.selection((('plucking', 'Plucking'), ('tapping', 'Tapping'), ('sundry_worker', 'Sundry Worker')), 'Work', required=True),
        'epf_no':fields.char('EPF Number', size=256)
    }

workoffer() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T11:55:54.587

在 OpenERP 中，建议为另一个数据库表定义一个新模型。这里每个模型在数据库中都有一个表。表名可以由模型属性定义`_table`，如果未定义`_name`，默认情况下将删除 .(dot) by _(underscore)。

# iphone - 在 sms.db iOS 6 上删除行

> ID：15376972
> 
> 赞同：0
> 
> 时间：2013-03-13T04:16:19.157
> 
> 标签：iphone, database, sms, jailbreak

我想删除许多表中的一行：`chat`，`handle`在[iOS6](http://theiphonewiki.com/wiki/IMessage)上的 sms.db 中。它似乎工作得很好，但实际上并**没有**。

示例：如果我想删除表中 ROWID = 123 的行`handle`，删除有效，但在`handle`表中，另一行与我删除的行完全相同，但 ROWID 为**124**（不是 123）。

有谁知道为什么？

# ruby-on-rails-4 - Rails 4 has_secure_password

> ID：15376974
> 
> 赞同：3
> 
> 时间：2013-03-13T04:16:22.637
> 
> 标签：ruby-on-rails-4

在 Rails 4 应用程序中——尝试在控制台中创建简单用户时出现此错误。

```
RuntimeError:
   Password digest missing on new record 
```

我的模型、控制器和架构如下所示：

```
class User < ActiveRecord::Base # User.rb
  has_secure_password
end

class UsersController < ApplicationController 

  def new
    @user = User.new
  end

 def create
   @user = User.new(user_params)
     if @user.save
       redirect_to root_path, notice: "Thank you for signing up!"
     else
      render "new"
    end
  end

private

  def user_params
    params.require(:user).permit(:email, :name, :password, :password_confirmation)
  end
end

create_table "users", force: true do |t| #db/schema.rb (edited for brevity)
  t.string   "email"
  t.string   "name"
  t.text     "password_digest"
  t.datetime "created_at"
  t.datetime "updated_at"
end 
```

我正在使用 postgresql，不确定这是否是一个错误，或者我是否错过了一些简单的事情。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T04:42:16.493

在 Rails 4 中，默认情况下所有属性都是批量分配的，因此您不需要使用 attr_accesible。现在你必须说明你想保护哪些。你会这样写

```
attr_protected :admin 
```

当 password_digest 为空时，会引发您遇到的错误。它可能与您的 attr_accesor: 有关。我可以看看你的看法吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-22T13:21:59.847

我在**rails 4**中做到了：

要使用“has_secure_password”，您必须使用参数`password_digest`

```
Schema Information = name :string, password_digest :string

class User < ActiveRecord::Base
     has_secure_password
     validates :name, presence: true, uniqueness: true
     validates_presence_of :password, :on => :create
end 
```

# 和控制器

```
def user_params
   params.require(:user).permit(:name, :password_digest, 
   :password,  :password_confirmation)
end

def create
    @user = User.new(user_params)
    respond_to do |format|
      if @user.save
        format.html { redirect_to users_url, notice: "User #{@user.name} was successfully created.'"}
        format.json { render action: 'show', status: :created, location: @user }
      else
        format.html { render action: 'new' }
        format.json { render json: @user.errors, status: :unprocessable_entity }
      end
    end
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-10T00:40:04.357

我有完全相同的问题，但这里的那部分解决了我的问题。无法存储**password_confirmation**，因为它不是允许参数

`def user_params params.require(:user).permit(:name, :password_digest, :password, :password_confirmation) end`

# windows - 在 Azure 环境和站点 URL 上创建了一个实例

> ID：15376980
> 
> 赞同：-2
> 
> 时间：2013-03-13T04:16:55.307
> 
> 标签：windows, azure

我们在 Azure 环境中创建了一个实例，站点 URL 是[http://mydomainname.cloudapp.net/](http://mydomainname.cloudapp.net/)

我们需要在网站名称中使用“www”。作为[http://www.mydomainname.com](http://www.mydomainname.com)

请做必要的事情，并尽早让我们知道这样做的步骤。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T04:32:19.700

看看如何将自定义域映射到云服务： http: [//www.windowsazure.com/en-us/develop/net/common-tasks/custom-dns/](http://www.windowsazure.com/en-us/develop/net/common-tasks/custom-dns/)。

# jquery - 我怎么能说 jQuery 通过悬停图库来悬停所有图像

> ID：15376981
> 
> 赞同：1
> 
> 时间：2013-03-13T04:17:01.823
> 
> 标签：jquery, image, hover, gallery, jquery-effects

我找到了一个简单的 jquery 脚本，它通过悬停列表中的图像来将图像的不透明度设置为 0。我喜欢这种效果，但它仅适用于 ul 包装画廊中的 1 张图像。我的答案是，我怎么能对 jquery 说，嘿，对 ul 中的所有图像执行此操作，图像在列表 listet 中的位置，当我悬停画廊 div/ul 时？

编辑：我在这里使用两个类，灰色和颜色。在灰色类图像之下是彩色类图像。灰度等级将设置为 0，然后将显示彩色图像。这仍然适用于悬停该列表中的 1 张图像，但我喜欢同时通过悬停 gallery_container div 或 ul 库来对所有图像产生这种效果。有人可以帮忙，如何为此编写jquery？

HTML

```
<div class="gallery_container">
    <ul class="gallery">
        <li> <a href="#"><img src="images/01_grey.gif" class="grey" /></a>
            <img src="images/01_color.gif" class="color" />
        </li>
        <li> <a href="#"><img src="images/02_grey.gif" class="grey" /></a>
          <img src="images/02_color.gif" class="color" />
        </li>
    </ul>
</div> 
```

jQuery

```
$(document).ready(function(){
    $("img.grey").hover(
    function() {
    $(this).stop().animate({"opacity": "0"}, "slow");
    },
    function() {
    $(this).stop().animate({"opacity": "1"}, "slow");
    });
}); 
```

CSS

```
.gallery li {
    float: left;
    margin-right: 20px;
    list-style-type: none;
    margin-bottom: 20px;
    display: block;
    height: 130px;
    width: 130px;
    position: relative;
}

img.grey {
    position: absolute;
    left: 0;
    top: 0;
    z-index: 10;
}

img.color {
    position: absolute;
    left: 0; top: 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T04:41:43.890

### -编辑-

OP 想要的效果是灰度<->颜色，而不是不透明度。

OP的参考：[http ://themes.quemalabs.com/elitist/](http://themes.quemalabs.com/elitist/)

更新小提琴：http: [//jsfiddle.net/bwbNH/](http://jsfiddle.net/bwbNH/)

* * *

操作，

据我了解，每当用户将鼠标悬停在**任何**图像上时，您都希望淡出**所有**图像。虽然我不知道您的用例，但这可能会令人困惑，因为它并不完全是标准的。无论如何，我建议将您的事件绑定到父级并将动画分配给它的子级：**`ul.gallery``$(this).children('li')`**

 **小提琴：http: [//jsfiddle.net/KaZFL/](http://jsfiddle.net/KaZFL/)

* * *

## JS

```
$(document).ready(function () {
    $(".gallery").mouseenter(function () {
        $(this).children('li').stop().animate({
            "opacity": "0"
        }, "slow");
    }).mouseleave(function () {
        $(this).children('li').stop().animate({
            "opacity": "1"
        }, "slow");
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T04:20:28.397

尝试。

```
$(".gallery_container").hover(
function()
{
    $(this).find('img').stop().animate({"opacity": "0.5"}, "slow");
},
function()
{
    $(this).find('img').stop().animate({"opacity": "1"}, "slow");
}); 
```

看`[**`Fiddle`**](http://jsfiddle.net/RjQTj/1/)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T04:21:39.320

这是更新javascript：

```
$(document).ready(function(){
  $('.gallery').hover(function() {
    $('.gallery img').stop().animate({"opacity": "0"}, "slow");
  }, function() {
    $('.gallery img').stop().animate({"opacity": "1"}, "slow");
  });
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T04:35:44.967

```
Try something like this:    

$('ul.gallery li a img.grey').hover(function(e){
e.preventDefault();
...
...
}); 
```**

# c# - 如何为 ListBox 创建不同的 ItemsPanelTemplate

> ID：15376982
> 
> 赞同：1
> 
> 时间：2013-03-13T04:17:03.657
> 
> 标签：c#, wpf, xaml

我正在 Windows Phone 8 上编写一个 IM 程序。我目前正在处理用于聊天的 UI。我想创建一个`ListBox`包含所有“聊天气泡”（如 iPhone 中的气泡）的工具。传入消息显示在左侧，传出消息显示在右侧。像这样：

![在此处输入图像描述](../Images/ae33f63e5223bf9eb416545dd43df4ed.png)

所以很明显，我需要为每个项目设置不同的**对齐方式。**

我试图通过将气泡包裹在一个`Grid`扩大 中的所有空间的大气泡中来解决这个问题`ItemsPanel`，并将聊天气泡向右对齐（聊天气泡的父级是大的`Grid`）。但这不起作用，因为网格`ItemsPanel`不会自动填满所有空间。然后我去搜索“*如何填充 ItemsPanel 中的所有空格*”，但没有运气。

所以，我认为这样做的唯一方法是`ItemsPanelTemplate`为每个 ItemsPanel 设置不同的“右”或“左”。

请帮帮我..谢谢！

那么如何为不同的选择器创建一个选择器`ItemsPanelTemplate`呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T10:30:23.280

您只需要自定义 itemContainer ：

```
<ItemsControl.ItemContainerStyle>
    <Style TargetType="ContentPresenter">
        <Style.Triggers>
            <DataTrigger Binding="{Binding IsAnswer}" Value="True">
                <Setter Property="HorizontalAlignment" Value="Right"/>
            </DataTrigger>
        </Style.Triggers>
    </Style>
</ItemsControl.ItemContainerStyle> 
```

如果您没有样式触发器，您可以使用绑定和 bool 到 Horizo​​ntalAlignment 转换器：

```
<ItemsControl.ItemContainerStyle>
    <Style TargetType="ContentPresenter">
        <Setter Property="HorizontalAlignment" Value="{Binding IsAnswer,Converter={StaticResource AlignmentConverter}}"/>
    </Style>
</ItemsControl.ItemContainerStyle> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T07:44:22.847

您的消息只需要 2 个视图`DataTemplate`

一个`MyMsg`和一个`Answer` 都从 Message 类或接口（您的决定）中获取，让我们调用它`Msg`

所以你可以设置你`ItemsSource`的`List<Msg>`或`ObservableCollection<Msg>`你就完成了

# ruby - `initialize` 方法和构造函数一样吗？

> ID：15376983
> 
> 赞同：0
> 
> 时间：2013-03-13T04:17:07.070
> 
> 标签：ruby, constructor, initialization

Ruby[`initialize`方法](http://ruby.activeventure.com/usersguide/rg/objinitialization.html)与 PHP 中的构造函数相同还是其他？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T04:41:59.023

在实践中，人们将构造函数实现为`initialize`，但准确地说，类方法`new`默认是构造函数，实例方法`initialize`是在创建新实例时默认调用的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T04:20:49.783

是的，该`initialize`方法等效于其他面向对象语言中的构造函数。就像 Ruby 中的所有内容一样，有一些警告，但我不想将这个问题与挑剔混淆。如果您需要构造函数，请创建一个`initialize`方法，它会在您调用时运行`MyClass.new`，在返回实例之前。

# python - 延迟从笔记本启动 IPython 集群

> ID：15376992
> 
> 赞同：2
> 
> 时间：2013-03-13T04:17:45.523
> 
> 标签：python, ipython, ipython-notebook

我们的 SGE 集群设置要求控制器和引擎启动之间存在延迟。如果不存在此延迟，则某些服务器会使用“旧”`ipcontroller-client.json`文件并尝试连接到以前的（且未运行的）控制器。这是 NFS 的“功能”，因此为了补救，我`c.IPClusterStart.delay = 30`在 ipcluster_config.py 文件中进行了设置，一切正常。控制器被提交给 SGE，有足够的时间启动和写入它的 json 文件，然后引擎可以正确启动到新运行的控制器。但是，我还希望能够从笔记本启动集群。不幸的是，似乎没有使用此超时，控制器和引擎同时启动（如`watch qstat`），一些引擎连接（因为从 json 文件中获取新设置）而一些不连接（因为 NFS）。

我在笔记本上运行了一个 strace ，发现它正在使用`sge_controller`和`sge_engines`脚本（当您按下开始时由笔记本创建）来启动这些进程。

我想知道是否有任何方法可以在这里实现延迟。它以正确的方式启动控制器和引擎（SGE），所以我知道它正在读取`ipcluster_config.py`.

我用谷歌搜索并搜索了这个网站，但没有运气。希望也许有人可以阐明这种行为的更深层次的运作方式。

谢谢，克里斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-07-02T19:31:04.977

好吧，这对于 OP 来说可能为时已晚，但希望它对某人有所帮助。

如果是超时问题，只需将其设置`c.EngineFactory.timeout`为`c.IPEngineApp.wait_for_url_file`更大的时间。

如果是由于第一次运行后失败，则可能是由于挥之不去的安全文件，应该从相关的 iPython 配置文件中删除（`ipcontroller-engine.json`和）以获取完整路径。为了自动执行此操作并使其不那么痛苦，可以将此删除步骤附加到同一配置文件的开头。`ipcontroller-client.json``IPython.utils.path.get_security_file``ipcluster_config.py`

仅这些更改就足以让我轻松地让集群与笔记本一起运行。

如果这些都不能解决问题，还有其他一些想法（[http://mail.scipy.org/pipermail/ipython-user/2011-November/008741.html](http://mail.scipy.org/pipermail/ipython-user/2011-November/008741.html)）。

# android - 从列表视图获取下一个和上一个详细数据

> ID：15376995
> 
> 赞同：0
> 
> 时间：2013-03-13T04:18:04.230
> 
> 标签：android, listview, button, next

我不知道如何通过单击基于列表视图的下一个/上一个按钮来创建一个显示下一个/上一个详细数据的功能。

这是我想做的截图

[我的列表视图活动](http://dl.dropbox.com/u/57465028/Listview.png)

[My Detail data Activity](http://dl.dropbox.com/u/57465028/next-previous.png)，显示列表视图中的下一个/上一个数据

**编辑：**我有一个列表视图数据（使用 xml 解析器），并将数据传递给名为“Detail_toko.class”的新活动：

```
 List<NameValuePair> paramemeter = new ArrayList<NameValuePair>();
                paramemeter.add(new BasicNameValuePair("keyword", "a"));  
                // paramemeter.add(new BasicNameValuePair("kategori",Category.getSelectedItem().toString()));

                XMLParser parser = new XMLParser();
                String xml = parser.getXmlFromUrl(URL, paramemeter); // getting XML from URL
                Document doc = parser.getDomElement(xml); // getting DOM element
                NodeList nl = doc.getElementsByTagName(TAG_DETAIL);
                // looping through all song nodes <song>
                for (int i = 0; i < nl.getLength(); i++) {
                    // creating new HashMap
                    HashMap<String, String> map = new HashMap<String, String>();
                    Element e = (Element) nl.item(i);
                    // adding each child node to HashMap key => value
                    map.put(TAG_ID, parser.getValue(e, TAG_ID));
                    map.put(TAG_NAMATOKO, parser.getValue(e, TAG_NAMATOKO));
                    map.put(TAG_KATEGORI, parser.getValue(e, TAG_KATEGORI));
                    map.put(TAG_EMAIL, parser.getValue(e, TAG_EMAIL));
                    map.put(TAG_ICON, parser.getValue(e, TAG_ICON));

                    // adding HashList to ArrayList
                    PremiumList.add(map);

                        } 

            return null;

           }

            /**
             * Updating parsed JSON data into ListView
             * */
            list=(ListView)findViewById(R.id.listview);

            if(PremiumList.size() > 0)
                    {

                adapter=new LazyAdapterStore(ListPerusahaan.this, PremiumList);        
                list.setAdapter(adapter);
            }

            else
                    {
                Toast toast= Toast.makeText(getApplicationContext(), "No data found, enter another keyword", Toast.LENGTH_SHORT);  
                    toast.setGravity(Gravity.CENTER_VERTICAL|Gravity.CENTER_HORIZONTAL, 0, 0);
                    toast.show();
                    }

                // Click event for single list row
                    list.setOnItemClickListener(new OnItemClickListener() {

                        @Override
                        public void onItemClick(AdapterView<?> parent, View view,
                                int position, long id) {

                            // getting values from selected ListItem
                            String nama_toko = ((TextView) view.findViewById(R.id.nama_toko)).getText().toString();
                            String kategori = ((TextView) view.findViewById(R.id.kategori)).getText().toString();
                            String email = ((TextView) view.findViewById(R.id.email)).getText().toString();

                         PremiumList = new ArrayList<HashMap<String, String>>();
                         Intent in = new Intent(ListPerusahaan.this, Detail_toko.class); 
                         in.putExtra("PremiumList", PremiumList);
                         //in.putStringArrayListExtra( "PremiumList", PremiumList );
                         in.putExtra("position", position);
                         in.putExtra("TotalData", TotalData);
                         in.putExtra(TAG_NAMATOKO, nama_toko);
                         in.putExtra(TAG_KATEGORI, kategori);
                         in.putExtra(TAG_EMAIL, email);
                         startActivity(in); 
```

这是我的 LazyAdapterStore 代码：

```
 public View getView(int position, View convertView, ViewGroup parent) {
    View vi=convertView;
    if(convertView==null)
        vi = inflater.inflate(R.layout.list_data_store, null);

    TextView nama_toko = (TextView)vi.findViewById(R.id.nama_toko); // title
    TextView kategori = (TextView)vi.findViewById(R.id.kategori); // title
    ImageView thumb_image=(ImageView)vi.findViewById(R.id.list_image); // thumb image
    TextView email = (TextView)vi.findViewById(R.id.email); // artist name

    HashMap<String, String> detail = new HashMap<String, String>();
    detail = data.get(position);

    // Setting all values in listview
    nama_toko.setText(detail.get(ListPerusahaan.TAG_NAMATOKO));
    kategori.setText(detail.get(ListPerusahaan.TAG_KATEGORI));
    email.setText(detail.get(ListPerusahaan.TAG_EMAIL));
    imageLoader.DisplayImage(detail.get(ListPerusahaan.TAG_ICON), thumb_image);
    return vi;

} 
```

**编辑：**而且，这是我的新活动“Detail_Toko”，用于显示来自列表视图项目的详细数据：

```
@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

  //this must be called BEFORE setContentView
    requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);

    setContentView(R.layout.detail_toko);

    getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.window_title);

    call_btn=(Button)findViewById(R.id.call);

    email_btn=(Button)findViewById(R.id.email);

    sms_btn=(Button)findViewById(R.id.sms);

    Next_btn=(Button)findViewById(R.id.Next);

    Prev_btn=(Button)findViewById(R.id.Prev);

    phonenumber=(TextView)findViewById(R.id.telpon);

    // getting intent data
    Intent in = getIntent();

   // @SuppressWarnings("unchecked")
    //ArrayList<HashMap<String, String>> PremiumList = (ArrayList<HashMap<String, String>>) getIntent().getSerializableExtra("PremiumList");

    // Get String values from previous intent
    final String nama_toko = in.getStringExtra(TAG_NAMATOKO);
    final String kategori = in.getStringExtra(TAG_KATEGORI);
    final String email = in.getStringExtra(TAG_EMAIL);

    // Get Int values from previous intent
    final int posisi =  in.getExtras().getInt("position");
    final int Total_data =  in.getExtras().getInt("TotalData");

   /*
    Bundle bundle = in.getExtras(); 
    HashMap<String, String> list = (HashMap<String, String>) bundle.getSerializable("PremiumList");
    list = data.get(currentposition);
    */

    Bundle bundle = in.getExtras();
    HashMap<String, String> list =  (HashMap<String, String>) bundle.getSerializable("PremiumList");
    list = data.get(currentposition);

    // Displaying all values on the screen
    lblPosisi = (TextView) findViewById(R.id.namatoko);
    lbltotaldata = (TextView) findViewById(R.id.nama);
    lblNamatoko = (TextView) findViewById(R.id.nama_toko);
    lblKategori = (TextView) findViewById(R.id.kategori);
    lblEmail = (TextView) findViewById(R.id.textemail);

    lblPosisi.setText(String.valueOf(posisi));
    lbltotaldata.setText(String.valueOf(Total_data));
    lblNamatoko.setText(nama_toko);
    lblKategori.setText(kategori);
    lblEmail.setText(email);

    // Set the int value of currentposition from previous selected listview item
    currentposition = posisi;

    Next_btn.setOnClickListener(new Button.OnClickListener(){
      public void onClick(View v){  

          if(currentposition >= Total_data - 1)
          {
              Toast toast= Toast.makeText(getApplicationContext(), "Last Record", Toast.LENGTH_SHORT);  
              toast.setGravity(Gravity.CENTER_VERTICAL|Gravity.CENTER_HORIZONTAL, 0, 0);
              toast.show();
          }
          else
          {

              currentposition++;
              lblPosisi.setText(String.valueOf(currentposition));
              lblNamatoko.setText(list.get(nama_toko));
              lblKategori.setText(list.get(kategori));
              lblEmail.setText(list.get(email));

          }
        }
      });

    Prev_btn.setOnClickListener(new Button.OnClickListener(){
      public void onClick(View v){  

          if(currentposition <= 0)
          {
              Toast toast= Toast.makeText(getApplicationContext(), "First Record", Toast.LENGTH_SHORT);  
              toast.setGravity(Gravity.CENTER_VERTICAL|Gravity.CENTER_HORIZONTAL, 0, 0);
              toast.show();
          }
          else
          {
              currentposition--;
              lblPosisi.setText(String.valueOf(currentposition));
              lblNamatoko.setText(list.get(nama_toko));
              lblKategori.setText(list.get(kategori));
              lblEmail.setText(list.get(email));
          }

          }
     }); 
```

问题是，我不知道如何通过单击“Detail_toko”活动中的下一个/上一个按钮来创建一个函数来显示列表视图中的下一个/上一个详细数据。请有人帮我...

预先感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T09:23:37.317

刚刚在上一篇文章中看到了您的请求。

Parvaz 给出的解决方案是完美的，你只需要弄清楚代码。您有一个数组列表“PremiumList”，它负责您的列表视图行数据。您只需将位置和此列表传递给 Detail_toko.class（通过使用 parceable 的意图或将 arraylist 声明为静态（不推荐）等），您的解决方案将仅几步之遥。

在 Detail_toko.class 中创建一个全局变量 currentPosition，它将从过去的活动中获取其值，例如来自意图的 TAG_NAMATOKO。然后在 NEXT 按钮的 onClickListener 中将 1 增加到 currentPosition 并从您刚刚从上一个活动传输的数组列表中获取详细信息，就像您在 getView 方法中所做的那样。

```
 HashMap<String, String> detail = new HashMap<String, String>();
    detail = data.get(currentPosition);

// Setting all values in listview
nama_toko = detail.get(ListPerusahaan.TAG_NAMATOKO);
kategori = detail.get(ListPerusahaan.TAG_KATEGORI);
email = detail.get(ListPerusahaan.TAG_EMAIL); 
```

设置这些值，您的新视图将相应更新。

在 PREVIOUS 按钮的 onClickListener 中，从 currentPosition 减 1，然后是相同的代码（这意味着您必须创建一个方法并调用它，没有代码重复）。

尝试一下。这是我们可以在没有实际做功课的情况下解释的详细信息！

**编辑 ：**

首先从 OnItemClick 中删除这一行

```
 PremiumList = new ArrayList<HashMap<String, String>>(); 
```

您正在清除此行中 PremiumList 中的所有数据，这样您将在下一个活动中获得空白列表。所以摆脱这条线。一旦您在下一个活动中获得 PremiumList，您所需要的只是 position 和 totalData 以及它的 intent extra。您可以从您的额外意图中删除 TAG_NAMATOKO、TAG_KATEGORI、TAG_EMAIL。

我告诉过你不要重复代码，因为你是初学者，所以遵循它对你来说非常重要，因为通过考虑这些因素并养成习惯，它会让你的生活变得轻松。

现在您在**“Detail_Toko”**中的代码将变为：

```
 HashMap<String, String> list = null;
 int currentposition = 0;
 int  Total_data =0;

 @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

  //this must be called BEFORE setContentView
    requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);

    setContentView(R.layout.detail_toko);

    getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.window_title);

    call_btn=(Button)findViewById(R.id.call);

    email_btn=(Button)findViewById(R.id.email);

    sms_btn=(Button)findViewById(R.id.sms);

    Next_btn=(Button)findViewById(R.id.Next);

    Prev_btn=(Button)findViewById(R.id.Prev);

    phonenumber=(TextView)findViewById(R.id.telpon);

// Displaying all values on the screen
    lblPosisi = (TextView) findViewById(R.id.namatoko);
    lbltotaldata = (TextView) findViewById(R.id.nama);
    lblNamatoko = (TextView) findViewById(R.id.nama_toko);
    lblKategori = (TextView) findViewById(R.id.kategori);
    lblEmail = (TextView) findViewById(R.id.textemail);

    // getting intent data
   Bundle bundle = getIntent().getExtras();
// Get Int values from previous intent
    currentposition =  bundle.getInt("position");
      Total_data =  bundle.getInt("TotalData");
    list =  (HashMap<String, String>) bundle.get("PremiumList");
    setView();
    Next_btn.setOnClickListener(new Button.OnClickListener(){
      public void onClick(View v){  
        if(currentposition >= Total_data - 1)
          {
              Toast toast= Toast.makeText(getApplicationContext(), "Last Record", Toast.LENGTH_SHORT);  
              toast.setGravity(Gravity.CENTER_VERTICAL|Gravity.CENTER_HORIZONTAL, 0, 0);
              toast.show();
          }
          else
          {
             currentposition++;
             setView();
          }
        }
      });

    Prev_btn.setOnClickListener(new Button.OnClickListener(){
      public void onClick(View v){  

          if(currentposition <= 0)
          {
              Toast toast= Toast.makeText(getApplicationContext(), "First Record", Toast.LENGTH_SHORT);  
              toast.setGravity(Gravity.CENTER_VERTICAL|Gravity.CENTER_HORIZONTAL, 0, 0);
              toast.show();
          }
          else
          {
              currentposition--;
              setView();
          }
        }
     });

     private void setView()
     {
     if(list != null && list.size() > currentposition)
     {
     HashMap<String, String> detail = new HashMap<String, String>();
    detail = list.get(currentposition);
     lblPosisi.setText(String.valueOf(currentposition));
    lbltotaldata.setText(String.valueOf(Total_data));
    lblNamatoko.setText(detail.get(ListPerusahaan.TAG_NAMATOKO));
    lblKategori.setText(detail.get(ListPerusahaan.TAG_KATEGORI));
    lblEmail.setText(detail.get(ListPerusahaan.TAG_EMAIL));
    }
    } 
```

**建议：**在 getView 方法中使用 ViewHolder 填充视图，它会让你的适配器成为“一个高效的适配器”。（搜索示例）遵循命名约定和所有。在使用它们之前检查 anyObject != null ，它们的大小或长度以及 bundle.containKey 等东西以避免像 nullPointerException 这样的致命异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T04:24:04.987

只需将 PremiumList ArrayList 传递给您的 Detail_toko Activity ......要么通过 Intent 传递它，要么直接从 getter 方法获取它。然后在每个下一个/上一个按钮上的 Detail_toko 活动中单击递增 arraylist 的位置以获取数据，然后相应地填充。

这就是您将 [通过 Intent 传递 ArrayList 的方式](https://stackoverflow.com/questions/5374546/passing-arraylist-through-intent)

而不是从意图中获取其余数据，而是从数组列表中获取数据。

像 arraylist.get(index)。

像这样

```
 /********Instead of getting your values like this*******************/
String nama_toko = in.getStringExtra(TAG_NAMATOKO);
String kategori = in.getStringExtra(TAG_KATEGORI);
String email = in.getStringExtra(TAG_EMAIL); 
```

/************************使用这里给出的方法 [如何执行下一个按钮操作？](https://stackoverflow.com/questions/14640682/how-to-do-the-next-button-action/14641493#14641493)******************************/

```
 //The  method setvalue would be quite useful for you where you will pass the int j parameter to get appropriate values. If next button is clicked increment the j if previous button is clicked decrement it. and then display your values asusual.
// Displaying all values on the screen
lblNamatoko = (TextView) findViewById(R.id.namatoko);
lblKategori = (TextView) findViewById(R.id.kategori);
lblEmail = (TextView) findViewById(R.id.textemail);

lblNamatoko.setText(nama_toko);
lblKategori.setText(kategori);
lblEmail.setText(email); 
```

# java - 如何使用整数数组而不是正则表达式在多个位置拆分字符串？

> ID：15376999
> 
> 赞同：1
> 
> 时间：2013-03-13T04:18:25.833
> 
> 标签：java, arrays, string, split

如果我有一个字符串：

```
String s = "This is a string to test splitting on!"; 
```

以及表示字符串中索引的整数数组：

```
int[] indices = {4, 6, 9, 12, 15}; 
```

是否有可能得到一个字符串数组，如：

```
"This",
" i",
"s a",
" st",
"rin",
"g to test splitting on!" 
```

不循环调用`s.substring(indices[i], indices[i+1])`（或类似的）索引？

不幸的是，索引都是任意的，所以正则表达式无济于事。基本上我想找到一个等价的 split() 我可以传递一个整数数组而不是一个正则表达式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T06:34:08.993

如果你不想使用 substring()，试试这个：

```
import java.util.*;
public class StringSplitter implements Iterable<String>
{
    private Scanner scanner;
    private StringBuilder toParse;
    private int indices[];

    public StringSplitter(String toSplit, int... indices)
    {
        Arrays.sort(indices);    //make sure it is sorted otherwise it won't work properly
        toParse = new StringBuffer(toSplit);
        for(int i = 0; i < indices.length; ++i)
        {
            toParse.insert(indices[i] + i, "\u0080");
        }
        scanner = new Scanner(toParse.toString());
        scanner.useDelimeter("\u0080");
        this.indices = indices;
    }

    public Iterator<String> iterator()
    {
        return scanner;
    }
} 
```

然后使用for-each循环遍历字符串：

```
StringSplitter s = new StringSplitter("This is a string to test splitting on!", 4, 6, 9, 12, 15);
for(String elem : s)
{
    System.out.println(elem);
} 
```