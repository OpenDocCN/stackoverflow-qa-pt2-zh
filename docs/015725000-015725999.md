# StackOverflow 问答 15725000-15725999

# java - Java - 密码字段字符计数器

> ID：15725001
> 
> 赞同：1
> 
> 时间：2013-03-31T00:20:37.783
> 
> 标签：java, swing, gettext, jpasswordfield

我有一个作业问题，要求我创建一个 JPasswordField。需要两个按钮，一个用于在另一个文本字段中显示实际密码，另一个仅在文本字段中显示字符数。这是我必须要做的，但我无法编译它，因为当我希望它读取密码本身时`Method setText in class javax.swing.text.JTextComponent cannot be applied to given types.` ，编译器会停止。`bt1`

任何人都可以帮忙吗？

谢谢。代码：

```
public class JavaPasswordCount {  
    public JavaPasswordCount() {
        JFrame window = new JFrame("Password Character Count");
        window.setSize(50, 50);
        JButton bt1 = new JButton("Show Count");
        JButton bt2 = new JButton("Show Password");
        final JPasswordField pwd = new JPasswordField();
        final JTextField tf = new JTextField(); 
        final int counter;

        JPanel panel = new JPanel(); 

        bt1.addActionListener(new ActionListener() {

            public void actionPerformed(ActionEvent e) {
                tf.setText(pwd.getPassword());
            }
        });

        bt2.addActionListener(new ActionListener() {

            public void actionPerformed(ActionEvent e) {
                counter = pwd.length();
                tf.setText(counter);
            }
        });

        panel.setLayout(new FlowLayout()); // Add buttons and TextField to the panel
        panel.add(tf);
        panel.add(pwd);
        panel.add(bt1);
        panel.add(bt2);

        window.getContentPane().add(panel, BorderLayout.CENTER);
        window.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        window.pack();
        window.setVisible(true);
    }
    public static void main(String[] args) {
        try {
            UIManager.setLookAndFeel(UIManager.getCrossPlatformLookAndFeelClassName());
        } catch (Exception e) {
        }

        JavaPasswordCount application = new JavaPasswordCount();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T00:26:54.037

更改此行：

```
counter = pwd.length();
tf.setText(counter); 
```

到

```
int counter = pwd.getPassword().length;
tf.setText(String.valueOf((counter))); 
```

还有这个

```
tf.setText(pwd.getPassword()); 
```

到

```
tf.setText(pwd.getPassword().toString()); 
```

# android - Widget TextView not updating when using timer

> ID：15725002
> 
> 赞同：1
> 
> 时间：2013-03-31T00:20:50.483
> 
> 标签：android, timer, android-widget, widget, textview

Ive got a `TextView` to update the time and date in a widget and have attempted to use a `Timer` to update it every second but it isnt working:

```
public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) {
    final int N = appWidgetIds.length;

    for (int i = 0; i < N; i++) {
        int appWidgetId = appWidgetIds[i];

        Intent clockIntent = new Intent(context, DeskClock.class);
        PendingIntent pendingIntent = PendingIntent.getActivity(context, 0, clockIntent, 0);

        final RemoteViews views = new RemoteViews(context.getPackageName(), R.layout.digitalclock);
        views.setOnClickPendingIntent(R.id.rl, pendingIntent);

        Timer timer = new Timer();
        timer.schedule(new TimerTask() {

            @Override
            public void run() {
                java.util.Date noteTS = Calendar.getInstance().getTime();
                String time = "kk:mm";
                String date = "dd MMMMM yyyy";

                views.setTextViewText(R.id.tvTime, DateFormat.format(time, noteTS));
                views.setTextViewText(R.id.tvDate, DateFormat.format(date, noteTS));
            }
        }, 0, 1000);// Update text every second

        appWidgetManager.updateAppWidget(appWidgetId, views);
    }
} 
```

Im going wrong somewhere so if anyone knows, let me know and give me the right way to do this. Thanks in advance

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T00:33:48.927

try to update the app widget inside the run()

```
 @Override
        public void run() {
            java.util.Date noteTS = Calendar.getInstance().getTime();
            String time = "kk:mm";
            String date = "dd MMMMM yyyy";

            views.setTextViewText(R.id.tvTime, DateFormat.format(time, noteTS));
            views.setTextViewText(R.id.tvDate, DateFormat.format(date, noteTS));
            appWidgetManager.updateAppWidget(appWidgetId, views);
        }
    }, 0, 1000);// Update text every second 
```

try it like this this works for me, i think i had the same issue in another app i was using, instead of a timer and timertask use:

```
Handler mHandler;
Runnable continuousRunnable = new Runnable() {
        public void run() {
            java.util.Date noteTS = Calendar.getInstance().getTime();
            String time = "kk:mm";
            String date = "dd MMMMM yyyy";

            views.setTextViewText(R.id.tvTime, DateFormat.format(time, noteTS));
            views.setTextViewText(R.id.tvDate, DateFormat.format(date, noteTS));
            appWidgetManager.updateAppWidget(appWidgetId, views);

            mHandler.postDelayed(this, 1000);
        }
    };
  mHandler.post(continuousRunnable); 
```

# ios - 从 UITableView 保存项目

> ID：15725003
> 
> 赞同：1
> 
> 时间：2013-03-31T00:21:05.147
> 
> 标签：ios, uitableview, plist, nsuserdefaults

我正在创建一个基于 TableView 的应用程序。tableView 正在加载外部 XML 提要的最后 12 项。这一切都很完美。

所以现在我想创建一个额外的“保存最喜欢的项目功能”。有两种方法可以实现这一点：

**1.自定义附件按钮**

```
-(void)tableView:(UITableView *)tableView accessoryButtonTappedForRowWithIndexPath:(NSIndexPath *)indexPath 
```

**2.（自定义）编辑tableview**

```
if ([self.tableView isEditing]) 
```

我的问题是：您更喜欢哪个选项，您能否举例说明如何实现这一目标？

任何认真的答案将不胜感激。

谢谢您的回答。感谢马特，我用以下代码修复了它：

```
 NSMutableDictionary *item = [dataArray objectAtIndex:indexPath.row];
    BOOL checked = [[item objectForKey:@"checked"] boolValue];
    //cell.backgroundColor = [UIColor clearColor];
    //cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
    UIImage *image = (checked) ? [UIImage   imageNamed:@"first.png"] : [UIImage imageNamed:@"second.png"];
    UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
    CGRect frame = CGRectMake(0.0, 0.0, image.size.width, image.size.height);
    button.frame = frame;
    [button setBackgroundImage:image forState:UIControlStateNormal];
    [button addTarget:self action:@selector(checkButtonTapped:event:)  forControlEvents:UIControlEventTouchUpInside];
    button.backgroundColor = [UIColor clearColor];
    cell.accessoryView = button; 
```

如您所见，我现在正在使用 dataAray。我还使用了一个存储“检查布尔值”的 plist。这不能正常工作，因为：

1.  复选标记未正确放置（根据 plist）
2.  当 UitableView 滚动视图移动时，复选标记会随机更改。

SO I want to create an array which stores Id's of the selected items. Then iterate through the array to see if an ID is present in the array. If yes: Star if No: graystar.

Do you think this is a good solution?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T02:26:41.960

I very much prefer accessory button approach. Since editing mode is typically used to remove or re-oder items, the user would not usually look there or expect it to perform any other functions.

Having said that, I would not recommend using the accessory button without changing its default image. Since the default image of the accessory button usually means displaying more details about the current item, it might cause confusion if not changed to a more descriptive image. Also, optimally the image should be different if the current item is marked as a favorite (e.g. a grey star if it's not a favorite, and a golden star if it is). The code should be really straight forward:

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

  cell = UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Identifier"];
  if(!cell)
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:@"Identifier"]

  UIImage *accessoryImage;
  ItemClass *item = [self.items objectAtIndex:indexPath.row];
  // you might want to cache the images instead of creating them for each cell
  if(item.favorite)
    accessoryImage = [UIImage imageNamed:@"goldenStar.png"];  
  else
    accessoryImage = [UIImage imageNamed:@"greyStar.png"];  
  cell.accessoryView = [[UIImageView alloc] initWithImage:accessoryImage];
}

-(void)tableView:(UITableView *)tableView accessoryButtonTappedForRowWithIndexPath:(NSIndexPath *)indexPath {
  ItemClass *item = [self.items objectAtIndex:indexPath.row];
  item.favorite = !item.favorite;

  // update the cell with the new image and any other data you need modified
  [tableView reloadRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationNone];
} 
```

Good luck!

# javascript - 如何修复和使用树目录？（旧语法）

> ID：15725011
> 
> 赞同：0
> 
> 时间：2013-03-31T00:22:06.300
> 
> 标签：javascript

所以我买了一个网站，女巫连接到办公室的妊娠程序..

该网站有点旧，它与所有版本的 Internet Explorer 完全兼容，但与其他浏览器不兼容（opera、safari、chrome、firefox ...）

唯一不起作用的是菜单没有正确打开，当您单击它时它不会发生任何事情，或者在 chrome 中它会更改图像但它不会上传链接。似乎它没有在 hiddenframe 中上传东西......在 chrome 中它在 loadchildren 函数中给出了错误。

在 Firefox 中，它在函数 Toc_click () 中给出错误

```
TypeError: window.event is undefined
[Break On This Error]   

var eSrc = window.event.srcElement; 
```

我们搜索了问题，我们认为问题应该出在这个文件中，问题应该是语法问题，它在旧浏览器中兼容，但在新浏览器上不兼容。我无法完全更改代码，因为它与其他文件（很多）和 sql server 连接...

我们已经尝试改变

```
 document.frames["hiddenframe"].location.replace(strLoc); 
```

经过

```
 document.getElementsByName("hiddenframe").location.replace(strLoc); 
```

它不起作用，它也不能在 IE 上运行......

```
 /* TOC.JS */

var framesTop = parent.parent;

//var L_LoadingMsg_HTMLText = "Loading, click to cancel...";
var LoadDiv = '<DIV ONCLICK="loadFrame(true);" CLASS="clsLoadMsg">';
L_LoadingMsg_HTMLText = LoadDiv + L_LoadingMsg_HTMLText + "</LI>";

function caps(){
    var UA = navigator.userAgent;
    if(UA.indexOf("MSIE") != -1)
    {
        this.ie = true;
        this.v = UA.charAt(UA.indexOf("MSIE") + 5);
        if( this.v == 2 ) this.ie2 = true;
        else if( this.v == 3 ) this.ie3 = true;
        else if( this.v == 4 ) this.ie4 = true;
        else if( this.v == 5 ) this.ie5 = true;
        else if( this.v == 6 ) this.ie6 = true;
    else this.ie6 = true;
    }
    else if(UA.indexOf("Mozilla") != -1 && UA.indexOf("compatible") == -1)
    {
        this.nav = true;
        var v = UA.charAt(UA.indexOf("Mozilla") + 8);
        if(v == 2 ) this.nav2 = true;
        else if(v == 3 ) this.nav3 = true;
        else if(v == 4 ) this.nav4 = true;
    }
    if(UA.indexOf("Windows 95") != -1 || UA.indexOf("Win95") != -1 || UA.indexOf("Win98") != -1 || UA.indexOf("Windows 98") != -1 || UA.indexOf("Windows NT") != -1 || UA.indexOf("Windows XP") != -1) this.win32 = true;
    else if(UA.indexOf("Windows 3.1") != -1 || UA.indexOf("Win16") != -1) this.win16 = true;
    else if(UA.indexOf("Mac") != -1) this.anymac = true;
    else if(UA.indexOf("SunOS") != -1 || UA.indexOf("HP-UX") != -1 || UA.indexOf("X11") != -1) this.unix = true;
    else if(UA.indexOf("Windows CE") != -1) this.wince = true;
}

var bc = new caps();

////////////////////////////////////////////
// Not sure why this is here, it puts a scrollbar up when none is needed
// if("object" == typeof(parent.document.all.fraPaneToc)) parent.document.all.fraPaneToc.scrolling = "yes";
////////////////////////////////////////////

var eSynchedNode = null;
var eCurrentUL = null;
var eCurrentLI = null;
var bLoading = false;

function loadFrame( bStopLoad )
{
    if( "object" == typeof( eCurrentUL ) && eCurrentUL && !bStopLoad )
    {
      eCurrentUL.innerHTML = hiddenframe.chunk.innerHTML;
      eCurrentUL = null;
      bLoading = false;
    }
    else if( "object" == typeof( eCurrentUL ) && eCurrentUL )
    {
      eCurrentUL.parentElement.children[1].className = "";
      eCurrentUL.parentElement.children[0].src = "bs.gif";
      eCurrentUL.parentElement.className = "kid";
      eCurrentUL.className = "clsHidden";
      eCurrentUL.innerHTML="";
      eCurrentUL = null;
      bLoading = false;
    }
    else
    {
      bLoading = false;
    }
    return;
}

function GetNextUL(eSrc)
{
    var eRef = eSrc;
    for(var i = eRef.sourceIndex + 1; i < document.all.length; i++)
    {
        if( "UL" == document.all[ i ].tagName )
        {
            return document.all[ i ];
        }
        else if( "LI" == document.all[ i ].tagName )
        {
            break;
        }
    }
    return false;
}

function MarkSync(eSrc)
{
    if("object" == typeof(aNodeTree)) aNodeTree = null;
    if("LI" == eSrc.tagName.toUpperCase() && eSrc.children[1] && eSynchedNode != eSrc )
    {
        UnmarkSync();
        eSrc.children[1].style.fontWeight = "bold";
        eSynchedNode = eSrc;
    }
}

function UnmarkSync()
{
    if("object" == typeof(eSynchedNode) && eSynchedNode )
    {
        eSynchedNode.children[1].style.fontWeight = "normal";
        eSynchedNode = null;
    }
}

function MarkActive(eLI)
{
    if( "object" == typeof( eLI ) && eLI && "LI" == eLI.tagName.toUpperCase() && eLI.children[1] && eLI != eCurrentLI )
    {
        MarkInActive();
        window.eCurrentLI = eLI;
        window.eCurrentLI.children[1].className = "clsCurrentLI";
    }
}

function MarkInActive()
{
    if( "object" == typeof( eCurrentLI ) && eCurrentLI )
    {
        window.eCurrentLI.children[1].className = "";
        window.eCurrentLI = null;
    }
}

function LoadChildren( eLink )
{
    var strLoc = "loadtree.asp" + eLink.href.substring( eLink.href.indexOf( "?" ) );
    document.frames["hiddenframe"].location.replace(strLoc);
}

function Navigate_URL( eSrc )
{
    var eLink = eSrc.parentElement.children[1];
    urlIdx = eLink.href.indexOf( "URL=" );
    if("object" == typeof(framesTop.fraTopic) && eLink && "A" == eLink.tagName && urlIdx != -1 )
    {
        if(eLink.target=="fraTopic"||eLink.target=="_top"){
            framesTop.fraTopic.location.href = eSrc.parentElement.children[1].href.substring( urlIdx + 4 );
        }else{
            window.open(eSrc.parentElement.children[1].href,eLink.target);
        }
        MarkSync(eSrc.parentElement);
    }
    else if("object" == typeof(framesTop.fraTopic) && eLink && "A" == eLink.tagName  && eLink.href.indexOf( "tocPath=" ) == -1 && eLink.href.indexOf( "javascript:" ) == -1 )
    {
        if(eLink.target=="fraTopic")
        {
            framesTop.fraTopic.location.href = eSrc.parentElement.children[1].href;
        }
        else if( eLink.target=="_top" )
        {
            top.location = eLink.href;
            return;
        }
        else
        {
            window.open(eSrc.parentElement.children[1].href,eLink.target);
        }
        MarkSync(eSrc.parentElement);
    }
    else if( eSynchedNode != eSrc.parentElement && ( urlIdx != -1 || ( eLink.href.indexOf( "javascript:" ) == -1 && eLink.href.indexOf( "tocPath=" ) == -1 ) ) )
    {
        // START D.S.
        if(eLink.target=="fraTopic")
        {
            if (navigator.userAgent.indexOf("Windows") == -1) {
                var MyHref = eSrc.parentElement.children[1].href;
                do
                {
                    if (MyHref.indexOf("%2E") != -1) MyHref = MyHref.replace("%2E", ".");
                    else if (MyHref.indexOf("%2F") != -1) MyHref = MyHref.replace("%2F", "/");
                    else if (MyHref.indexOf("%3F") != -1) MyHref = MyHref.replace("%3F", "?");
                    else if (MyHref.indexOf("%3D") != -1) MyHref = MyHref.replace("%3D", "=");
                    else if (MyHref.indexOf("%26") != -1) MyHref = MyHref.replace("%26", "&");
                    else break;
                } 
                while (true);
                parent.fraTopic.location.href = MyHref;
            } else {
                parent.fraTopic.location.href = eSrc.parentElement.children[1].href;
            }
        }
        // END D.S.
        MarkSync( eSrc.parentElement );
    }
}

function Image_Click( eSrc , bLeaveOpen )
{
    var eLink = eSrc.parentElement.children[1];
    if("noHand" != eSrc.className)
    {
        eLI = eSrc.parentElement;
        MarkActive(eLI);
        var eUL = GetNextUL(eLI);
        if(eUL && "kidShown" == eLI.className)
        {
            // hide on-page kids
            if( !bLeaveOpen )
            {
                eLI.className = "kid";
                eUL.className = "clsHidden";
                eSrc.src = "bs.gif";
            }
        }
        else if(eUL && eUL.all.length)
        {
            // show on-page kids
            eLI.className = "kidShown";
            eUL.className = "clsShown";
            eSrc.src = "bo.gif";
        }
        else if("kid" == eLI.className)
        {
            // load off-page kids
            if( !bLoading )
            {
                bLoading = true;
                eLI.className = "kidShown";
                eUL.className = "clsShown";
                window.eCurrentUL = eUL;
                eSrc.src = "bo.gif";
                eUL.innerHTML = L_LoadingMsg_HTMLText;
                LoadChildren( eLink );
            }
        }
    }
}

function Toc_click ()
{
    var eSrc = window.event.srcElement;
    event.returnValue = false;

    if("A" == eSrc.tagName.toUpperCase() && "LI" == eSrc.parentElement.tagName)
    {
        var eImg = eSrc.parentElement.children[0];
        if(eImg) eImg_click(eImg);
    }
    else if("SPAN" == eSrc.tagName && "LI" == eSrc.parentElement.tagName)
    {
        var eImg = eSrc.parentElement.children[0];
        if(eImg) eImg_click(eImg);
    }
    else if("IMG" == eSrc.tagName)
    {
    }
    return event.returnValue;
}

function eImg_click(eImg)
{
    if("IMG" == eImg.tagName)
        {
            Image_Click( eImg , false );
            Navigate_URL( eImg );
        }
}

function Toc_dblclick()
{
    return;
}

function window_load()
{
    if( self == top ) location.replace( "default.asp" );
    var objStyle = null;
    if( bc.win32 && ( bc.ie4 || bc.ie5 || bc.ie6 ) && "object" == typeof ( ulRoot ) && "object" == typeof( objStyle = document.styleSheets[0] ) && "object" == typeof( objStyle.addRule ) )
    {
        window.eSynchedNode = document.all["eSynchedNode"];
        objStyle.addRule( "UL.clsHidden" , "display:none" , 0 );
        objStyle.addRule( "UL.hdn" , "display:none" , 0 );
        //--ulRoot.onclick=Toc_click;
        ulRoot.ondblclick=Toc_dblclick;
        if( window.eSynchedNode )
        {
            MarkActive(window.eSynchedNode);
            window.eSynchedNode.all.tags( "B" )[0].outerHTML = eSynchedNode.all.tags("B")[0].innerHTML;
            window.scrollTo(0,window.eSynchedNode.offsetTop-(document.body.clientHeight/2));
        }
        else
        {
            MarkActive(document.all.tags( "LI" )[0]);
        }
    }
}

window.onload = window_load; 
```

建议？

# api - Imgur Anon API 到 Authenticated API

> ID：15725012
> 
> 赞同：1
> 
> 时间：2013-03-31T00:22:08.580
> 
> 标签：api, imgur

我使用 imgur anon api 密钥从 meme 生成器上传生成的 meme。

继承人的js函数：

```
function generate_meme(e) {
    $('#spinner-generate').show();
    var dataURL = canvas.toDataURL("image/png").split(',')[1];
    $.ajax({
    url: 'http://api.imgur.com/2/upload.json',
    type: 'POST',
    data: {
        type: 'base64',
        key: api_key.val(),
        image: dataURL
    },
    dataType: 'json'
}).success(image_uploaded).error(image_upload_failed);
e.preventDefault();
return false;
} 
```

如您所见，它使用的是 anon api。我想做同样的事情，但使用经过身份验证的 api [https://imgur.com/register/api](https://imgur.com/register/api)，因此图像会上传到我的 imgur 帐户，并且可以在我的相册中找到。我应该怎么办？

# ios - How to load multiple storyboard files depending on iOS version? (5 and 6)

> ID：15725016
> 
> 赞同：6
> 
> 时间：2013-03-31T00:22:52.177
> 
> 标签：ios, ios5, ios6, storyboard, autolayout

I have a tab bar controller app that I am trying to make compatible for iOS 6 and iOS 5. For iOS 6, I use auto layout. But when trying to run on iOS 5, I get an error due to it not recognizing NSLayoutConstraints.

From what I can tell, I am required to use a different storyboard without auto layout enabled. I have copied my storyboard into a new one, but don't know how to set which storyboard to use in the app delegate.

Whats the code to do this?

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-31T00:30:09.063

In your app delegate, you should find code like this:

```
UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MyStoryboard" bundle:nil];
self.window.rootViewController = [storyboard instantiateInitialViewController];
[self.window makeKeyAndVisible]; 
```

This is where you can add some code to choose among the several storyboards that you have [depending on the version of iOS](https://stackoverflow.com/q/11081904/335858):

```
UIStoryboard *storyboard;
NSString *currSysVer = [[UIDevice currentDevice] systemVersion];
if (...) {
    storyboard = [UIStoryboard storyboardWithName:@"MyStoryboard-v5" bundle:nil];
} else {
    storyboard = [UIStoryboard storyboardWithName:@"MyStoryboard-v6" bundle:nil];
}
self.window.rootViewController = [storyboard instantiateInitialViewController];
[self.window makeKeyAndVisible]; 
```

# excel - Excel macro search for values in a specific arrangement, possible?

> ID：15725021
> 
> 赞同：0
> 
> 时间：2013-03-31T00:23:20.193
> 
> 标签：excel, vba

Here's my dilemma, I need to parse a series of 606 weeks worth of Billboard 200 charts for the position of 36 different albums. Here's what I've got so far...

[https://docs.google.com/file/d/0B_tgNfDq0kXAakR5eHZ3bzJQVkk/edit?usp=sharing](https://docs.google.com/file/d/0B_tgNfDq0kXAakR5eHZ3bzJQVkk/edit?usp=sharing)

Billboard just redid their website, so now Excel's webquery returns a very pretty and clean table. I created two formulas in columns A and B of my worksheet, A has the list of relevant dates (specifically every Saturday from 8/18/2001 until this week), and B makes hyperlinks to the charts based on the dates. The rest of the chart is color-coded for the benefit of my advisors, who will also be reviewing the sheet.

我还手动将日期为 2001-08-18 的第一个图表通过网络查询到了它自己的工作表中。此工作表尚未被触及 - 它正是 web 查询返回的内容。

如您所见，该表跨越到 G 列，每个条目占用 3 行。我的重点是 C 列和 D 列。每个条目的 D 列行是（从上到下）标题、艺术家和印记|标签。每个条目的 C 列的第一行包含该周从 1 到 200 的位置。出现的模式是每 3 行以 4 开头（所以 7、10、13...）包含一个位置和专辑标题（col C & D, resp.)，并且每个以 5 开头的第 3 个单元格包含一个艺术家。

我将尝试用简单的英语解释我的想象，但请注意，这可能会惨遭失败。

So the macro would take two cells as input (can they even take input?), album title and corresponding artist. This input should tell the macro both the string stored in each cell and the location - e.g, E1, C2 - of said cell. The macro should loop through each URL in column A from row 3 to 608, querying the URL into a new sheet. This new sheet should be made active, and then every 3rd row starting with 4 should be searched sequentially for the album title string. Upon finding a match, the cell one row beneath the matching query cell should be compared to the artist name string. Should both strings match the content of their corresponding query cells, the number (from 1 to 200) in column C and the same row as the matching album title cell should be copied to the cell in the 'bb200' sheet corresponding to the URL queried and the album title searched. The loop should now recur on the next URL in the sequence. In the event no match is found (the album didn't chart that week, or BB returned a wonky table), the corresponding cell should be left blank. The macro should exit once the list of URLs is exhausted.

我的问题是双重的：首先，我对宏观的思考过程从根本上说是合理的吗？其次，但最重要的是，我什至不知道从哪里开始在 VBA 中编写它。我研究过 Java、C 和最近的 C++（特别是 OpenGL）。我对 VBA 语法和 API 完全不熟悉，坦率地说，我在这方面的时间太短了，无法坐下来正式学习这门语言。在此之后，我计划在短期内完成这项工作，但这项任务是在星期一完成的，我不知道它最终会有多大的规模。

为了记录，宏不是任务，但要收集的数据对于完成它是不可或缺的。对那些好奇的人来说，任务是在星期一之前完成我的毕业论文的完整草稿。这些数据将用于创建我的顾问指示我在写作中包含的几个图表。论文本身已经基于在网站外阅读每张专辑的销售业绩而编写。

你会帮助我超越，因为大多数其他应届毕业生都在提交一些严重不成熟的图形表示。唯一一个走到这一步的学生发明了一种仪器并提供了原理图和 AutoCAD 图纸。然而，我离题了。

在此先感谢您的帮助！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T01:25:05.440

我认为这应该能让你获得大约 90% 的收益。唯一不会做的是网络查询。

For that part, I propose that you use the macro recorder to do a web query, and then post that code in a revision and we'll add it in and tailor it to your needs. You've gotta do *some* work on this :)

```
Option Explicit

Sub TestMacro()
Dim inputVal As String
Dim artistCell As Range
Dim artistName As String
Dim albumCell As Range
Dim albumName As String
Dim ws As Worksheet: Set ws = Sheets("thesisData")
Dim r As Long 'this will be our row iterator variable
Dim hLink As String 'string for each hyperlink in the iteration
Dim wsNew As Worksheet 'this will be used when we create new worksheets
Dim foundRange As Range 'this is how we will locate the album
Dim weekRank As Long 'weekly rank from column C

On Error GoTo InvalidRange  'This error handling is for the input box, to trap invalid arguments.'
'Use an input box to capture the cell address'
inputVal = InputBox("Please enter the cell location containing the ARTIST name", "Input Range")
Set artistCell = Range(inputVal)  'set a Range variable for the artist'
artistName = artistCell.Value  'string variable for artist name'

inputVal = vbNullString 'clear out the inputVal'
'Use an input box again...'
inputVal = InputBox("Please enter the cell location containing the ALBUM name", "Input Range")
Set albumCell = Range(inputVal)  'set a Range variable for the song cell'
albumName = albumCell.Value  'string for song name'
On Error GoTo 0

For r = 3 To 608  'iterate over rows 3 to 608
    hLink = ws.Cells(1, r).Value

    'Add a new sheet after the last sheet in this file'

    Set wsNew = Sheets.Add(After:=Sheets(ThisWorkbook.Sheets.Count))
    wsNew.Name = Format(ws.Cells(r, 2).Value, "YYYY-MM-DD")

    '''' add VBA for web query, here.'
    ''''
    '''' try using the macro recorder and we can tweak it to your needs.'
    ''''
    ''''
    ''''

    'Rather than looping over all the cells in web query...'
    Do
        'Use the FIND method to look for matching album title in column D.'
        ' this uses exact text match, non-case-sensitive.
        Dim fnd

        Set foundRange = wsNew.Columns(4).Find(What:=albumName, After:=ActiveCell, LookIn:= _
            xlFormulas, LookAt:=xlWhole, SearchOrder:=xlByRows, SearchDirection:= _
            xlNext, MatchCase:=True, SearchFormat:=False)

        If Not foundRange Is Nothing Then
            'if we've found a match, then just offset by 1 row and check against artist name'
            If foundRange.Offset(1, 0) = artistName Then
                'likewise, just offset the foundRange cell by -1 columns to get the weekly rank'
                weekRank = foundRange.Offset(0, -1)

                'At this point I'm not sure what cell you want to put this value in, '
                ' but I think you want row designated by "r" and the column of the '
                ' album name, so we can do that like this:

                ws.Cells(r, albumCell.Column).Value = weekRank

            End If
        End If
    Loop While Not foundRange Is Nothing

Next

Exit Sub 'before error handling
InvalidRange:     'error handling

MsgBox inputVal & " is not a valid range", vbCritical, "Error!"

End Sub 
```

Good luck!

**Edit** this also assumes that there is only going to be one match in each web query. In the event there is more than one, it would only return the last match. That seems like a safe assumption given the nature of the data, but if that's not the case, let me know and I can tweak it.

# css - Align text under CSS sprites

> ID：15725023
> 
> 赞同：0
> 
> 时间：2013-03-31T00:23:27.817
> 
> 标签：css, css-sprites, text-alignment

I have a number of links, each have a class passing the correct sprite to present each image and the relative hover image for each link.

The problem is aligning the text directly underneath the sprite.

Can anyone help me to find a solution?

My problem specific code:

```
.image_row td a{
    background-image:url('http://www.thechefsdirectory.com/images/navigation/VIEW_WEB.png');
    background-repeat:no-repeat;
    display: block;
    height: 70px;
    width: 70px;
}

.image_row td a.item1 {background-position:0px 0px;}
.image_row td a:hover.item1 {background-position:0px -70px;}

.image_row td a.item2 {background-position:-70px 0px;}
.image_row td a:hover.item2 {background-position:-70px -70px;}

.image_row td a.item3 {background-position:-140px 0px;}
.image_row td a:hover.item3 {background-position:-140px -70px;}

.image_row td a.item4 {background-position:-210px 0px;}
.image_row td a:hover.item4 {background-position:-210px -70px;}

.image_row td a.item5 {background-position:-280px 0px;}
.image_row td a:hover.item5 {background-position:-280px -70px;}

.image_row td a.item6 {background-position:-350px 0px;}
.image_row td a:hover.item6 {background-position:-350px -70px;}

.image_row td a.item7 {background-position:-420px 0px;}
.image_row td a:hover.item7 {background-position:-420px -70px;}

.image_row td a.item8 {background-position:-490px 0px;}
.image_row td a:hover.item8 {background-position:-490px -70px;} 
```

The related JSFIDDLE can be found [HERE](http://jsfiddle.net/53uLN/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T01:34:27.843

I know that this one will look weird, but...

```
.image_row td a{
    background-image:url('http://www.thechefsdirectory.com/images/navigation/VIEW_WEB.png');
    background-repeat:no-repeat;
    display: block;
    height: 0px;
    padding: 70px 0 0 0;
    text-align:center;
    width: 70px;
} 
```

zero `height` and 70px `padding-top`

DEMO: [http://jsfiddle.net/pavloschris/53uLN/1/](http://jsfiddle.net/pavloschris/53uLN/1/)

# javascript - requirejs - 将多个文件组合成一个不依赖于 requirejs 的 js 文件

> ID：15725029
> 
> 赞同：7
> 
> 时间：2013-03-31T00:25:00.493
> 
> 标签：javascript, jquery, requirejs, require, minify

我正在编写包含大量代码的 jQuery 插件。因此，我决定分离代码并使其对我（开发人员）更加模块化。为此，我使用 require.js。
现在我有 6 个 js 文件：

1.  实用程序.js
2.  基本行.jas
3.  a-row.js
4.  b-row.js
5.  我的表.js
6.  main.js

文件 1 到 5 定义了 JavaScript“类”，它们之间有依赖关系。操作所有音乐会的“主要”类是 my-table.js。main.js 仅依赖于 my-table.js 并从中创建一个插件：

```
require([
    'my-table'
], function(MyTable) {
    jQuery.fn.myTable = function(options) {
        var table = new MyTable(this, options);
        this.data('myTable', table);
        return this;
    };
}); 
```

现在我想从这些文件中创建一个包含所有 6 个文件的大 js 文件，没有任何依赖关系（用户应该引用它的 jQuery 除外）。为此，我使用了 r.js ( [http://requirejs.org/docs/optimization.html](http://requirejs.org/docs/optimization.html) )，结果我得到了一个依赖于 require.js 的大 js 文件（并且包含定义和要求的调用）。我遵循了这个：[http:](http://requirejs.org/docs/faq-optimization.html#wrap) //requirejs.org/docs/faq-optimization.html#wrap 并使用 almond.js 来组合我的所有文件以供不依赖于 require.js 的使用。这工作正常。
问题是为什么我需要所有的 define 和 require 方法调用和 almond.js？为什么优化器不能只连接函数结果（如本问题所述：[Why do concatenated RequireJS AMD modules need a loader?](https://stackoverflow.com/questions/10987674/why-do-concatenated-requirejs-amd-modules-need-a-loader)） 像这样：

```
(function() {
    var utils = «function() {
        ....
        return Utils;
    }»();
    var baseRow = «function(A) {
        ....
        return BaseRow;
    }»(utils);
    ....
    ....
    var myTable = .....

    //<--This is require call and therefore doesn't return a thing
    (function(MyTable) {
        jQuery.fn.myTable = function(options) {
            var table = new MyTable(this, options);
            this.data('myTable', table);
            return this;
        };
    })(myTable);
})(); 
```

作为这个过程的结果，我决定检查并手动将所有文件合并到一个缩小文件中。我最终得到一个比杏仁版本小 3k 的文件！
我没有找到 r.js 优化器创建 require.js 依赖结果背后的逻辑。就我而言，没有人需要使用任何文件，我的主 js 文件是唯一的消费者。你怎么看？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-02T15:31:35.603

**优化器中findNestedDependencies**选项的默认值为“false”，这意味着即使在脚本优化之后，仍然可能存在需要模块加载器的嵌套`require`或调用。`define`外部依赖项也需要加载程序。

但是，我同意，如果 findNestedDependencies 设置为“true”并且项目中没有外部依赖项，那么优化器应该能够消除对加载器的需求。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-06-21T00:23:47.520

您可以只在文件中包含所需的文件。您可以通过 getScript 调用来做到这一点。

```
$.getScript("my_lovely_script.js", function(){

   //whatever you want here.

}); 
```

# java - 在日出/日落 web 服务的 url 中使用 DatePicker 中的日期

> ID：15725032
> 
> 赞同：0
> 
> 时间：2013-03-31T00:25:18.463
> 
> 标签：java, android, android-datepicker

Okayyyy，所以我被困住了，可以做一些帮助:)

在我的代码中，今天的日期正在使用以下代码片段读入网络服务 url：

```
Calendar c = Calendar.getInstance();
System.out.println("Current time => " + c.getTime());
SimpleDateFormat df = new SimpleDateFormat("dd/MM");
String formattedDate = df.format(c.getTime()); 
```

我希望显示今天的日期，但我也希望用户能够从 DatePicker 中选择不同的日期并找到该特定日期的日出/日落值。

我猜这很简单，我只是有点昏暗，所以任何帮助将不胜感激，这是我的代码：

```
package richgrundy.learnphotography;

import java.io.IOException;
import java.io.InputStream;
import java.io.StringReader;
import java.text.SimpleDateFormat;
import java.util.Calendar;

import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.protocol.BasicHttpContext;
import org.apache.http.protocol.HttpContext;
import org.w3c.dom.Document;
import org.xml.sax.InputSource;

import android.app.Activity;
import android.app.FragmentTransaction;
import android.content.Context;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.AsyncTask;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.Spinner;
import android.widget.TextView;

public class SunriseSunset extends Activity implements OnClickListener {

    public Button getLocation;
    public Button setLocationJapan;
    public TextView LongCoord;
    public TextView LatCoord;
    public double longitude;
    public double latitude;
    public LocationManager lm;
    public Spinner Locationspinner;
    public DateDialogFragment frag;
    public Button date;
    public Calendar now;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.sunrisesunset);

        //Setting onClickListener for Calculate Sunrise/Sunset Button
        findViewById(R.id.CalculateSunriseSunset).setOnClickListener(this);

        //Sets up LocationManager to enable GPS data to be accessed.
        lm = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 1000, 1,
                new MyLocationListener());

        //Declares Latitude and Longitude TextViews
        LatCoord = (TextView) findViewById(R.id.LatCoord);
        LongCoord = (TextView) findViewById(R.id.LongCoord);

        //Declares for Location Spinner/Dropdown
        addListenerOnSpinnerItemSelection();

        //Date
        now = Calendar.getInstance();
        date = (Button)findViewById(R.id.date_button);
        date.setText(String.valueOf(now.get(Calendar.DAY_OF_MONTH)+1)+"-"+String.valueOf(now.get(Calendar.MONTH))+"-"+String.valueOf(now.get(Calendar.YEAR)));
        date.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                showDialog();
            }
        });

    }
    // More date
    public void showDialog() {
        FragmentTransaction ft = getFragmentManager().beginTransaction(); //get the fragment
        frag = DateDialogFragment.newInstance(this, new DateDialogFragmentListener(){
            public void updateChangedDate(int year, int month, int day){
                date.setText(String.valueOf(day)+"-"+String.valueOf(month+1)+"-"+String.valueOf(year));
                now.set(year, month, day);
            }
        }, now);

        frag.show(ft, "DateDialogFragment");

    }

    public interface DateDialogFragmentListener{
        //this interface is a listener between the Date Dialog fragment and the activity to update the buttons date
        public void updateChangedDate(int year, int month, int day);
    }

    public void addListenerOnSpinnerItemSelection() {
        Locationspinner = (Spinner) findViewById(R.id.Locationspinner);
        Locationspinner
                .setOnItemSelectedListener(new CustomOnItemSelectedListener(
                        this));
    }

    public void setLocationFrance() {
        // TODO Auto-generated method stub
        LatCoord.setText("65.4112");
        LongCoord.setText("85.8337");
    }

    public void setLocationIndia() {
        // TODO Auto-generated method stub
        LatCoord.setText("21.4112");
        LongCoord.setText("105.8337");
    }

    public void setLocationJapan() {
        // TODO Auto-generated method stub
        LatCoord.setText("21.4112");
        LongCoord.setText("15.8337");
    }

    protected void showCurrentLocation() {
        // This is called to find current location based on GPS data and sends
        // this to LongCoord and LatCoord TextViews
        Location location = lm
                .getLastKnownLocation(LocationManager.GPS_PROVIDER);
        latitude = location.getLatitude();
        longitude = location.getLongitude();

        LongCoord.setText(Double.toString(longitude));
        LatCoord.setText(Double.toString(latitude));
    }

    @Override
    public void onClick(View arg0) {
        Button b = (Button) findViewById(R.id.CalculateSunriseSunset);
        b.setClickable(false);
        new LongRunningGetIO().execute();
    }

    private class LongRunningGetIO extends AsyncTask<Void, Void, String> {

        protected String getASCIIContentFromEntity(HttpEntity entity)
                throws IllegalStateException, IOException {
            InputStream in = entity.getContent();
            StringBuffer out = new StringBuffer();
            int n = 1;
            while (n > 0) {
                byte[] b = new byte[4096];
                n = in.read(b);
                if (n > 0)
                    out.append(new String(b, 0, n));
            }
            return out.toString();
        }

        @Override
        protected String doInBackground(Void... params) {
            HttpClient httpClient = new DefaultHttpClient();
            HttpContext localContext = new BasicHttpContext();

            // Finds todays date and adds that into the URL
            Calendar c = Calendar.getInstance();
            System.out.println("Current time => " + c.getTime());
            SimpleDateFormat df = new SimpleDateFormat("dd/MM");
            String formattedDate = df.format(c.getTime());

            String finalURL = "http://www.earthtools.org/sun/"
                    + LatCoord.getText().toString().trim() + "/"
                    + LongCoord.getText().toString().trim() + "/"
                    + formattedDate + "/99/0";
            HttpGet httpGet = new HttpGet(finalURL);
            String text = null;

            try {
                HttpResponse response = httpClient.execute(httpGet,
                        localContext);
                HttpEntity entity = response.getEntity();
                text = getASCIIContentFromEntity(entity);
            } catch (Exception e) {
                return e.getLocalizedMessage();
            }
            return text;
        }

        protected void onPostExecute(String results) {
            if (results != null) {
                try {

                    DocumentBuilderFactory dbFactory = DocumentBuilderFactory
                            .newInstance();
                    DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();
                    InputSource s = new InputSource(new StringReader(results));
                    Document doc = dBuilder.parse(s);
                    doc.getDocumentElement().normalize();
                    TextView tvSunrise = (TextView) findViewById(R.id.Sunrise);
                    TextView tvSunset = (TextView) findViewById(R.id.Sunset);
                    tvSunrise.setText(doc.getElementsByTagName("sunrise").item(0).getTextContent());
                    tvSunset.setText(doc.getElementsByTagName("sunset").item(0).getTextContent());
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
            Button b = (Button) findViewById(R.id.CalculateSunriseSunset);
            b.setClickable(true);
        }
    }

    class MyLocationListener implements LocationListener {
        @Override
        public void onLocationChanged(Location location) {
            // TODO Auto-generated method stub
        }

        @Override
        public void onProviderDisabled(String provider) {
            // TODO Auto-generated method stub
        }

        @Override
        public void onProviderEnabled(String provider) {
            // TODO Auto-generated method stub
        }

        @Override
        public void onStatusChanged(String provider, int status, Bundle extras) {
            // TODO Auto-generated method stub
        }
    }
} 
```

日期片段对话框：

```
package richgrundy.learnphotography;

import java.util.Calendar;

import richgrundy.learnphotography.SunriseSunset.DateDialogFragmentListener;
import android.app.DatePickerDialog;
import android.app.Dialog;
import android.app.DialogFragment;
import android.content.Context;
import android.os.Bundle;
import android.widget.DatePicker;

public class DateDialogFragment extends DialogFragment {

    public static String TAG = "DateDialogFragment";
    static Context mContext; //I guess hold the context that called it. Needed when making a DatePickerDialog. I guess its needed when conncting the fragment with the context
    static int mYear;
    static int mMonth;
    static int mDay;
    static DateDialogFragmentListener mListener;

    public static DateDialogFragment newInstance(Context context, DateDialogFragmentListener listener, Calendar now) {
        DateDialogFragment dialog = new DateDialogFragment();
        mContext = context;
        mListener = listener;
        mYear = now.get(Calendar.YEAR);
        mMonth = now.get(Calendar.MONTH);
        mDay = now.get(Calendar.DAY_OF_MONTH);  
        return dialog;
    }

    public Dialog onCreateDialog(Bundle savedInstanceState) {
        return new DatePickerDialog(mContext, mDateSetListener, mYear, mMonth, mDay);
    }

    private DatePickerDialog.OnDateSetListener mDateSetListener = new DatePickerDialog.OnDateSetListener() {

        @Override
        public void onDateSet(DatePicker view, int year, int monthOfYear,
                int dayOfMonth) {
            mYear = year;
            mMonth = monthOfYear;
            mDay = dayOfMonth;

            mListener.updateChangedDate(year, monthOfYear, dayOfMonth);
        }
    };
} 
```

以防万一你想要它是布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/LinearLayout1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/fabricc"
    android:orientation="vertical"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context=".SunriseSunset" >

    <LinearLayout
        android:id="@+id/LinearLayout02"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:padding="10dp"
            android:text="Date:"
            android:textAppearance="?android:attr/textAppearanceMedium" />

            <Button 
        android:id="@+id/date_button"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="03-18-2012"
        android:onClick="clickMe"/>
    </LinearLayout>

    <LinearLayout
        android:id="@+id/LinearLayout04"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/textView3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:padding="10dp"
            android:text="Location:"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <Spinner
            android:id="@+id/Locationspinner"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:entries="@array/location_array"
            android:padding="10dp" />
    </LinearLayout>

    <LinearLayout
        android:id="@+id/LinearLayout343"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:weightSum="4" >

        <TextView
            android:id="@+id/textView23"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="2"
            android:padding="10dp"
            android:text="Coordinates:"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <TextView
            android:id="@+id/LatCoord"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:padding="10dp" />

        <TextView
            android:id="@+id/LongCoord"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:padding="10dp" />
    </LinearLayout>

    <Button
        android:id="@+id/CalculateSunriseSunset"
        style="@style/sub_menu"
        android:background="@drawable/blue_menu_btn"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:padding="5dp"
        android:text="Calculate Sunrise/Sunset Time" />

    <LinearLayout
        android:id="@+id/LinearLayoutasdsd"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/textView122"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:padding="10dp"
            android:text="Sunrise:"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <TextView
            android:id="@+id/Sunrise"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="00:00:00"
            android:textAppearance="?android:attr/textAppearanceMedium" />
    </LinearLayout>

    <LinearLayout
        android:id="@+id/LinearLayoutasdsad"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/textView133"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:padding="10dp"
            android:text="Sunset:"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <TextView
            android:id="@+id/Sunset"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="00:00:00"
            android:textAppearance="?android:attr/textAppearanceMedium" />
    </LinearLayout>

</LinearLayout> 
```

就像我说的任何帮助将不胜感激 =)

感谢您的关注。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T02:34:06.713

我不确定您的要求，但我想您可以尝试从

```
String formattedDate = df.format(c.getTime()); 
```

到

```
String formattedDate = df.format(now.getTime()); 
```

这很脏，但我认为它应该可以正常工作。您的 doInBackground 应如下所示：

```
@Override
    protected String doInBackground(Void... params) {
        HttpClient httpClient = new DefaultHttpClient();
        HttpContext localContext = new BasicHttpContext();

        // Finds todays date and adds that into the URL
        //Calendar c = Calendar.getInstance();
        //System.out.println("Current time => " + c.getTime());
        SimpleDateFormat df = new SimpleDateFormat("dd/MM");
        String formattedDate = df.format(now.getTime());

        String finalURL = "http://www.earthtools.org/sun/"
                + LatCoord.getText().toString().trim() + "/"
                + LongCoord.getText().toString().trim() + "/"
                + formattedDate + "/99/0";
        HttpGet httpGet = new HttpGet(finalURL);
        String text = null;

        try {
            HttpResponse response = httpClient.execute(httpGet,
                    localContext);
            HttpEntity entity = response.getEntity();
            text = getASCIIContentFromEntity(entity);
        } catch (Exception e) {
            return e.getLocalizedMessage();
        }
        return text;
    } 
```

希望这可以帮助。

# jena - 阅读耶拿的远程等效本体类

> ID：15725034
> 
> 赞同：0
> 
> 时间：2013-03-31T00:25:28.203
> 
> 标签：jena, owl, dbpedia

当我运行“getEquivalentClass()”并且我的等价类是远程的（例如：http://dbpedia.org/data3/Film.rdf [）](http://dbpedia.org/data3/Film.rdf)时引发错误：

无法将节点[http://dbpedia.org/data3/Film.rdf](http://dbpedia.org/data3/Film.rdf)转换为 OntClass：它没有 rdf:type owl:Class 或等效项

我的代码是：

```
OntModel m = ModelFactory.createOntologyModel();
    m.read("http://localhost/ontology/my_ontology.owl#Film");
    Resource r = m.getResource(outputs.get(i).getParamType().getURI().toString());
    OntClass filmClass = (OntClass) r.as( OntClass.class );
    for (Iterator j = filmClass.listEquivalentClasses(); j.hasNext(); ) {
        System.out.println(j.next());
    } 
```

电影本体（my_ontology.owl#Film）：

```
<owl:Class rdf:about="#Film">
<rdfs:subClassOf rdf:resource="#Media"/>
<rdfs:subClassOf>
<owl:Restriction>
<owl:minCardinality rdf:datatype="http://www.w3.org/2001/XMLSchema#nonNegativeInteger">1</owl:minCardinality>
<owl:onProperty rdf:resource="#Title"/>
</owl:Restriction>
</rdfs:subClassOf>
<owl:equivalentClass rdf:resource="http://dbpedia.org/data3/Film.rdf"/>
</owl:Class> 
```

有可能吗？我浪费了很多时间来寻找这个解决方案。

谢谢你帮助我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T19:04:22.957

Jena 用户列表的**Dave Reynolds**的回答：

这与资源是否是远程无关，而是本地模型是否知道资源确实是一个类。

最简单的解决方案是设置：

```
m.setStrictMode(false); 
```

An alternative is to enable inference so the inference can deduce from the fact that it is the object of an owl:equivalentClass assertion that [http://dbpedia.org/data3/Film.rdf](http://dbpedia.org/data3/Film.rdf) must be a class. But inference is overkill here.

BTW that's the wrong URI, the dbpedia resource URI for film is actually:

```
 http://dbpedia.org/ontology/Film 
```

# java - Red5 服务器启动失败

> ID：15725038
> 
> 赞同：0
> 
> 时间：2013-03-31T00:26:21.520
> 
> 标签：java, ubuntu, red5, rtmp

在 Ubuntu 12.04 上启动我的 Red5 服务器时出现问题。当我尝试启动它时，它无法正常工作并显示如下错误消息：

root@PC:/usr/share/red5# ./red5.sh

在 Linux 上运行

开始红5

Red5 根目录：/usr/share/red5

配置根目录：/usr/share/red5/conf

线程“main”java.lang.NumberFormatException 中的异常：对于输入字符串：“147ss”

```
at java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)

at java.lang.Integer.parseInt(Integer.java:492)

at java.lang.Integer.valueOf(Integer.java:582)

at org.red5.classloading.ClassLoaderBuilder.scrubURLList(ClassLoaderBuilder.java:505)

at org.red5.classloading.ClassLoaderBuilder.build(ClassLoaderBuilder.java:179)

at org.red5.classloading.ClassLoaderBuilder.build(ClassLoaderBuilder.java:97)

at org.red5.server.Bootstrap.bootStrap(Bootstrap.java:126)

at org.red5.server.Bootstrap.main(Bootstrap.java:50) 
```

这就是我收到的所有错误消息。

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T06:27:45.943

问题是因为您的 red5 lib 目录中的 jar 文件中有一个额外的字符串。

转到 red5 的 lib 目录并从 bcprov jar 文件中删除 ss

> mv bcprov-jdk15on-1.47*.jar bcprov-jdk15on-1.47.jar

然后启动服务器。

# asp.net-mvc - MVC Controller Wizard not appearing when creating a new Controller in VS 2012

> ID：15725039
> 
> 赞同：0
> 
> 时间：2013-03-31T00:26:27.190
> 
> 标签：asp.net-mvc, visual-studio, controller, wizard

This is specific to one particular project. Probably missing some directives in Web.Config. Trying to figure out what those directives are. I could probably do some diff compare with a project where the wizard works, but I'm too lazy...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T10:43:00.967

It's a Project Guid in the `.csproj` file that indicates that the project is an ASP.NET MVC project and enables the wizards.

For ASP.NET MVC 4 you need the following:

```
<ProjectTypeGuids>{E3E379DF-F4C6-4180-9B81-6769533ABE47};{349c5851-65df-11da-9384-00065b846f21};{fae04ec0-301f-11d3-bf4b-00c04f79efbc}</ProjectTypeGuids> 
```

and to enable Intellisense in Razor views you need the following key in your web.config:

```
<appSettings>
    <add key="webpages:Version" value="2.0.0.0" />
</appSettings> 
```

If this is an ASP.NET MVC 3 project then the value is:

```
<ProjectTypeGuids>{E53F8FEA-EAE0-44A6-8774-FFD645390401};{349c5851-65df-11da-9384-00065b846f21};{fae04ec0-301f-11d3-bf4b-00c04f79efbc}</ProjectTypeGuids> 
```

and:

```
<appSettings>
    <add key="webpages:Version" value="1.0.0.0" />
</appSettings> 
```

# php - 我们应该 PDO fetch 还是 rowcount 来检查数据库中的一行

> ID：15725042
> 
> 赞同：0
> 
> 时间：2013-03-31T00:26:49.693
> 
> 标签：php, pdo

即使我们有 10 万亿行要检查，我也试图找出在检查表中的列名时哪个更快且内存使用量更少。我应该使用 fetch() 还是 rowCount() ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T05:32:36.260

好吧，对于给出的问题， fetch() 是唯一的方法。它将针对一行或 10 万亿行（显然，在后一种情况下您会选择 count(*)，无论找到多少行，rowcount() 将始终返回 1）。

但如果你只需要一排，它们是平等的。仅一行的内容不会伤害任何人，无论是在速度还是内存使用方面。

说到用户认证，我们无疑需要一些数据，比如用户 id、用户角色等。所以，`fetch()`再次是唯一的选择。

严格来说，rowcount() 在 Web 开发中的用途非常有限。这个功能的真正需求在一年内几乎不会超过一两个案例。

# c# - Submit Form with Complex DataType to Controller

> ID：15725044
> 
> 赞同：0
> 
> 时间：2013-03-31T00:27:08.130
> 
> 标签：c#, javascript, jquery, asp.net-mvc, ajax.beginform

This is my model

> Model

```
public class XPersonContent
{
    public string PersonType { get; set; }
    public int PersonId { get; set; }

}

public class XViewModel
{
    public List<XPersonContent> XPersonList { get; set; }
    public string XContent { get; set; }
    public sbyte CommentEnabled { get; set; }

} 
```

> Controller

```
[HttpPost]
public JsonResult AddXViewModel ( XViewModel testModel)
{

} 
```

> Form using MVC that submits to controller

```
function submitForm() {

    var xpersonContent=[Object { Id=2934109,  Type="us"}, Object { Id=2913974,  Type="us"}, Object {Id=2912159,  Type="us"}]
    var xContent= "test";
    var CommentEnabled= false;

    var dataString = {
        XPersonList:xpersonContent,
        XContent: xContent,
        CommentEnabled: true
    };

    $.ajax({
        type: "POST",
        url: "/AjaxPostDemo/AddXViewModel",
        data: JSON.stringify(dataString ),
        cache: false,
        dataType: "json",
        success: function (data) {
            $("#ajaxPostMessage").empty();
            $("#ajaxPostMessage").html(data.Message + " : " + data.Date);
        },
        error: function (XMLHttpRequest, textStatus, errorThrown) {
        }
    });
}

> Question 
```

How do i build the object XViewModel to pass back to the controller. i have them in three different variables i have tried to do this dataString = { XPersonList:xpersonContent, XContent: xContent, CommentEnabled: true }; but its not working..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T01:59:06.473

I had to add contentType: "application/json; charset=utf-8", in my ajax request SMH

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T01:59:54.563

Try change to this

```
var xpersonContent=[{"XPersonContent": {"Id": 2934109, "Type": "us"}}, {"XPersonContent": {"Id": 2913974, "Type": "us"}}, {"XPersonContent": {"Id": 2912159, "Type": "us"}}] 
```

# asp.net-mvc - How to switch between view and edit views

> ID：15725046
> 
> 赞同：0
> 
> 时间：2013-03-31T00:27:15.113
> 
> 标签：asp.net-mvc, asp.net-mvc-3, jquery

I have action method like this:

```
[ChildActionOnly]
        public ActionResult NewUserLanguage()
        {
            ...
            return View(model);
        } 
```

This view have one simple form on it and a list of partial views:

```
<ul id="userLanguagesListBox">
                        @foreach (var l in Model.UserLanguages)
                        {                            
                            <li>
                                @{Html.RenderPartial("UserLanguageBox", l);}
                            </li>                            
                        }
... 
```

This partial view looks like this:

```
...
@using (Html.BeginForm("EditUserLanguage", "UserLanguage", FormMethod.Post, new { id = "editUserLanagegeForm" }))
    {
        <ul>

            <li><h3>@Model.Language.Name</h3></li>
            <li>@Model.LanguageLevel.Name</li>    
            <li>
                @Html.HiddenFor(x=>x.UserLanguageId)
                <button class="editButton">Edit</button>
            </li>        
        </ul>
    } 
```

What I am trying to do is when user click on edit button in any of the partials I want to switch it with another view `EditUserLanguage`.
I have tried something like this:

```
$(function () {
            $('#editUserLanagegeForm').submit(function (e) {
                alert('ss');
                $.ajax({
                    url: this.action,
                    type: this.method,
                    data: $(this).serialize(),
                    success: function (result) {
                        $("#" + e.target).closest("div").append(result);

                    }
                });

                return false;
            });
        }); 
```

But this function is never called by any of edit buttons.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T00:42:37.030

"The submit event is sent to an element when the user is attempting to submit a form. It can only be attached to elements. Forms can be submitted either by clicking an explicit `<input type="submit">`, `<input type="image">`, or `<button type="submit">`, or by pressing Enter when certain form elements have focus."

-From [http://api.jquery.com/submit/](http://api.jquery.com/submit/)

What this means to you is that you need your button to have a type of submit for the submit event to trigger, but I don't think that's the one you're thinking of. Try using .click() instead.

# ruby-on-rails - What is the value of @_current_user here?

> ID：15725048
> 
> 赞同：3
> 
> 时间：2013-03-31T00:27:27.120
> 
> 标签：ruby-on-rails

```
 def current_user
    @_current_user ||= session[:current_user_id] &&
      User.find_by_id(session[:current_user_id])
  end 
```

Is @_current_user simply an id or a user object found by its id?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T00:31:44.520

To answer your question directly: A user object found by its id or `nil` if there is no `:current_user_id` value in the session or if no user object exists for that id.

Basically, if `@_current_user` is already set then it won't change it. Otherwise, then it checks if `session[:current_user_id]` exists/is set, and if it is, by nature of the `&&` operator, the right side is returned as the value of the expression. The right side basically looks up the user with that `current_user_id`.

Even simpler: If `@_current_user` isn't set yet, then if the session has a `current_user_id` value, it sets `@_current_user` to the `User` object matching that user id.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T00:29:09.420

If we assume `session[:current_user_id]` is `5`, then the `&&` operator with the User model will return the User instance:

```
> 5 && User.new(:name => 'Foo')
=> #<User name="Foo"> 
```

If both sides of the `&&` operator are "truthy" (meaning neither undefined or `false`), then the right-hand side value is returned by the `&&` operator. So `@_current_user` will be the User instance.

# javascript - Using bind to hold a function's arguments in the "this" scope

> ID：15725049
> 
> 赞同：1
> 
> 时间：2013-03-31T00:27:28.447
> 
> 标签：javascript, bind

I'm playing around with bind, and the following works:

```
webSQL.InsertTransaction = function(qry,CurrentRow) {
    var local = {};
    // Clone the webSQL.Insert function and add 2 parameters:
    local.InsertTransaction = webSQL.Insert.bind(this,qry,CurrentRow);
    // Call webSQL.Insert(qry,CurrentRow,Transaction)
    dbo.transaction(local.InsertTransaction);
}
webSQL.Insert = function(qry,CurrentRow,Transaction) {} 
```

I'd like to simplify it even more. Can I somehow not have to specify the 2 variables that are in the arguments scope, but instead do something like:

```
local.InsertTransaction = webSQL.Insert.bind(webSQL.InsertTransaction) 
```

maybe. My thinking is that then webSQL.Insert can reference qry and CurrentRow from it's "this.arguments" thingy.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T00:37:04.253

I'm not sure why you were using the object assigned to the `local` variable in the first place.

All you were doing was giving it a function, and then taking that function right back out. Why not skip that step?

```
webSQL.InsertTransaction = function(qry,CurrentRow) {
    dbo.transaction(webSQL.Insert.bind(this,qry,CurrentRow));
} 
```

# c++ - What ctor/assignment operator should a vector class have?

> ID：15725055
> 
> 赞同：1
> 
> 时间：2013-03-31T00:28:47.293
> 
> 标签：c++, constructor, assignment-operator, move-constructor, move-assignment-operator

I'm writing my own vector class (a container for x, y values) and I'm not really sure what constructors/assignment operators I should implement on my own and what I can count on the compiler to provide. Obviously, I need to write any method that doesn't have the default behaviour or isn't auto-generated in any case. But sure enough, there's also no point in implementing something if the compiler can generate the exactly same thing.

I'm using Visual Studio 2010 (which might matter in the aspect of C++11). Also my class is a template one, if that matters.

Currently, I have:

```
template <typename T>
class Integral2
{
    // ...

    Integral2(void)
        : x(0), y(0)
    {}

    Integral2(Integral2 && other)
        : x(std::move(other.x)), y(std::move(other.y))
    {}

    Integral2(T _x, T _y)
        : x(_x), y(_y)
    {}

    Integral2 & operator =(Integral2 const & other)
    {
        x = other.x;
        y = other.y;
        return *this;
    }

    Integral2 & operator =(Integral2 && other)
    {
        x = std::move(other.x);
        y = std::move(other.y);
        return *this;
    }

    // ...
}; 
```

Do I need copy ctor/assignment operator when I have a move ctor/move operator?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T00:54:42.000

In C++, there is the [Rule of Three](http://en.wikipedia.org/wiki/Rule_of_three_(C%2B%2B_programming)) which provides guidelines for which constructors/operators you should define based on which you are sure you need. In C++11, some believe that move semantics push the rule of three to [become the rule of five](https://stackoverflow.com/questions/4782757/rule-of-three-becomes-rule-of-five-with-c11). Look at [this thread](https://stackoverflow.com/questions/5976459/how-to-actually-implement-the-rule-of-five) for an example implementation. I recommend you look into these guidelines.

# android - 高密度显示器上的 Android 布局

> ID：15725060
> 
> 赞同：0
> 
> 时间：2013-03-31T00:29:57.937
> 
> 标签：android, layout

我刚刚在 android 上发布了我的应用程序，并遇到了高密度显示器客户的问题。

我添加了一个调试东西来看看发生了什么，这是一个示例输出

设备：Nexus 10 Android 版本：4.2.2 DisplayMetrics{density=2.0, width=2560, height=1504, scaledDensity=2.0, xdpi=298.275, ydpi=298.823} MainView w=1900 h=1342 mDrumKitMode=BIG KitView w=640 h=1266 x=1920.0 y=0.0

主视图是屏幕截图左侧的乐谱区域，其 1900 宽（MainView w=1900 h=1342）鼓组是 640w 和 640 高的位图。不知何故，显示器将其缩放为父级的全高（KitView w=640 h=1266 x=1920.0 y=0.0）。这不会发生在密度 = 1.0 的显示器上。

我无法对此进行测试，因为由于某种原因我无法让模拟器在大显示器上工作，而且我没有高密度平板电脑。

有谁知道会发生什么？谢谢

![在此处输入图像描述](https://i.stack.imgur.com/cfnbl.png)

这是另一个有类似问题的客户

设备：A700 Android 版本：4.1.1 DisplayMetrics{density=1.5, width=1920, height=1128, scaledDensity=1.5, xdpi=224.73732, ydpi=224.11765} MainView w=1260 h=1044 mDrumKitMode=BIG KitView w=640 h =968 x=1280.0 y=0.0

我认为它的 scaledDensity=1.5 参数，也许我需要做一些事情来禁用自动图像缩放，即设置 scaledDensity=1？

i should add that the entire application is based on exact pixel positions, both for the music notation display and the drum kit display which overlays images on top of the base drum kit image (you can see the drum pedals are in the wrong place on this image too). i don't want automatic scaling as i handle scaling inside the app for different display sizes and user preferences.

i should also add that all my drum kit images are in drawable-mdpi and all the other dpis are empty. this is because i scale images programmatically based on screen size and user preference BUT i think maybe the problem is a need to put some images in xhdpi? i guess i can do that but it will be a lot of work.

PS, i guess i found my answer here [http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

Provide different bitmap drawables for different screen densities

By default, Android scales your bitmap drawables (.png, .jpg, and .gif files) and Nine-Patch drawables (.9.png files) so that they render at the appropriate physical size on each device. For example, if your application provides bitmap drawables only for the baseline, medium screen density (mdpi), then the system scales them up when on a high-density screen, and scales them down when on a low-density screen. This scaling can cause artifacts in the bitmaps. To ensure your bitmaps look their best, you should include alternative versions at different resolutions for different screen densities.

i wonder if simply copying all the -mdpi images to -xhdpi will work?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T01:04:00.183

如果您打算跨设备使用此应用程序，您别无选择，只能为存在的所有各种密度文件夹（xhdpi、xxhdpi、hdpi、mdpi）放入图像。还值得考虑的是，您可能想要更改包含的实际布局，以便为不同的设备提供不同的布局。

请参阅文档以了解如何处理此问题。 [http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

如果这会创建一个太重的 apk（我不知道您有多少图像），那么您可以采用另一种方式并指定一个不可缩放的可绘制文件夹，该文件夹将只使用跨设备的原始密度的图像。除非您打算仅支持 mdpi 设备，否则仅使用 mdpi 绝对是错误的。

# haskell - parse error in maybe divide (Haskell)

> ID：15725061
> 
> 赞同：0
> 
> 时间：2013-03-31T00:30:01.093
> 
> 标签：haskell, pattern-matching, maybe

Just a simple question that i cannot solve I was trying to get maybe_divide by the following code as assignment required, however terminal give me an error message

> test2.hs:1:112: Parse error in pattern: (Just x)

```
maybe_devide :: Maybe Float -> Maybe Float -> Maybe Float
maybe_devide maybeX maybeY = case maybeX maybeY of
  (Just x) (Just y)
    |x/=0 && y/=0 -> Just (div x y)
    |x=0 && y/=0  -> Just 0
    |x/=0 && y=0  -> Nothing
  Nothing (Just y) -> Nothing
  (Just x) Nothing -> Nothing 
```

Who likes to tell me what is wrong with it? Thanks

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T00:43:44.477

`maybeX maybeY` is applying the function `maybeX` on the argument `maybeY`, whereas you are intending to do case analysis on the the pair `(maybeX,maybeY)`. Also you should use `==` for equality and not a single `=`. The following will do what you intend:

```
maybe_devide :: Maybe Float -> Maybe Float -> Maybe Float
maybe_devide maybeX maybeY = case (maybeX,maybeY) of
  (Just x,Just y)
    |x/=0 && y/=0 -> Just (div x y)
    |x==0 && y/=0  -> Just 0
    |x/=0 && y==0  -> Nothing
  (Nothing,Just y) -> Nothing
  (Just x,Nothing) -> Nothing 
```

Alternatively you could make use of the `Maybe` monad, as in

```
maybe_devide :: Maybe Float -> Maybe Float -> Maybe Float
maybe_devide maybeX maybeY = do
        x <- maybeX
        y <- maybeY
        case (x,y) of
                (0,y) -> Just 0
                (x,0) -> Nothing
                (x,y) -> Just (div x y) 
```

# android - 当基地在相机范围之外时不渲染 TMX 瓷砖（Andengine）

> ID：15725062
> 
> 赞同：1
> 
> 时间：2013-03-31T00:30:01.287
> 
> 标签：android, andengine, tmx

我在 Andengine 中使用等距 TMX 图层来渲染我用“平铺”创建的 TMX 地图。等距 TMX 地图使用 64x32px 字段。一些像墙这样的瓷砖尺寸为 64x128 像素。我如何强制渲染这些墙，即使它们的 64x32px 底座在相机范围之外？

![tmx 样本](https://i.stack.imgur.com/vB75i.jpg)

# delphi - Change field value in the cxgrid when changing another

> ID：15725067
> 
> 赞同：1
> 
> 时间：2013-03-31T00:30:39.993
> 
> 标签：delphi, devexpress, delphi-xe2, delphi-xe

In my cxGrid I have a Yes/No field which is by default 'NO' . Next to that field, I have another field,a LookupComboBox field that gets its values from another table. It is empty by default however I would like that, when the value gets changed in this particular field, my Yes/No field should change to 'YES' (Only in the row that I am currently editing) How am I to do this ? Also Not sure where to implement the code ....OnChange,Oneditvaluechanged,Onvalidate ???

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T20:14:45.100

Since your grid semms to be bound on datasets one easy way would be using the fieldchange event of your selection field.
For immediate behavior you should use a TcxEditRepositoryLookupComboBoxItem with ImmediatePost instead a of a Lookupfield in your dataset (which would anyway the worse approach with at least ADO)

```
procedure TForm4.MainSelectionChange(Sender: TField);
begin

   if Main.State in [dsEdit,dsInsert] then
      if not Sender.IsNull then
        MainYesNo.Value := true;

   { maybe you are looking for that instead the code above
   if Main.State in [dsEdit,dsInsert] then
        MainYesNo.Value := not Sender.IsNull
   }
end; 
```

![Lookup definition](https://i.stack.imgur.com/IYIVB.png) ![Lookupusage](https://i.stack.imgur.com/IIIf9.png)

# android - Android：在 ListFragment 中重现默认加载圈

> ID：15725069
> 
> 赞同：0
> 
> 时间：2013-03-31T00:30:53.297
> 
> 标签：android, android-listfragment

我注意到`ListFragments`在其适配器填充来自源的数据之前显示默认的动画加载圈（不确定的进度条）。

如何按需重现此行为？例如：当我的适配器被清除（在它被填充之后）我想再次显示这个动画圆圈，直到适配器再次被填充。我尝试查看文档，但由于某种原因，我似乎无法找到如何做到这一点......

注意：我正在使用`SherlockListFragment`

# ruby-on-rails-3 - Where is the priority for controller paths set in mountable but not isolated Rails::Engine's?

> ID：15725073
> 
> 赞同：0
> 
> 时间：2013-03-31T00:31:42.660
> 
> 标签：ruby-on-rails-3

I'm building an application that has a mountable but not isolated rails engine located at APP/sites/my_engine/. My understanding of a typical request with this setup looks like this:

1.  A request goes through the Main App's middleware stack.
2.  The request hit's the Main App's router, and matches the mounted path. It places the mounted part in: env["SCRIPT_NAME"] and sends the request on through the Engine.
3.  The request goes through the Engine's middleware stack.
4.  The request hit's the Engine's router and matches the remaining portion of the route.

Let's say that the route matches in the engine's routes and dispatches to a pages#show action. A controller will be called with the following priority:

1.  If a PagesController exists with the show action in the main app it will call this first.
2.  If a PagesController exists with the show action in the engine it will call this second only if the first did not exist.

If you look at MyEngine::Engine.paths['app/controllers'] it is the default ["app/controllers"]..which in this context is the engine. So why does it find the App's controller first?

Where is this priority of paths for controllers controlled?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T04:05:59.873

Ok so this took some time to figure out. What happens when you boot rails in production mode is that towards the end of initialization rails runs (see [Initialization Order](http://www.cowboycoded.com/2010/08/02/hooking-in-your-rails-3-engine-or-railtie-initializer-in-the-right-place/)):

```
Rails::Engine#eager_load! 
```

Here Rails grabs all the eager_load_paths, through:

```
config.eager_load_paths 
```

for example:

```
[
  APP/controllers/pages_controller.rb, 
  APP/sites/my_engine/controllers/pages_controller.rb
] 
```

For each eager_load_path it calls a method

```
ActiveSupport::Dependencies#require_dependency. 
```

In require_dependency, rails calls:

```
Dependencies#depend_on 
```

which strips each path to just the ending (i.e. "pages_controller") and calls:

```
Dependencies#search_for_file 
```

This adds back on the .rb so you have "pages_controller.rb" and looks for the file in autoload_paths. Since the Rails paths are first in autoload_paths, Rails will find the App version of the file before it finds the engine version and loads it every time if they share the same name. The rails engine version never gets loaded.

# python - how to add a column to existing array

> ID：15725078
> 
> 赞同：0
> 
> 时间：2013-03-31T00:32:20.883
> 
> 标签：python, numpy

I have a (1000,2) array and I was wondering how you can add a (1000,1) array without looping. What's the pythonic way to do this in numpy?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T00:35:34.867

use [`numpy.hstack`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.hstack.html).

```
a = np.zeros((1000,2))
b = np.zeros((1000,1))
c = np.hstack((a,b)) 
```

# c# - Visual Studio 2012 不允许我调试

> ID：15725086
> 
> 赞同：9
> 
> 时间：2013-03-31T00:14:04.953
> 
> 标签：c#, debugging, visual-studio-2012

我似乎无法调试。当我尝试时，我没有收到任何构建错误，并且布局更改为调试模式，但窗口永远不会弹出。我在 VS 的底部有一个橙色条，我认为这是标准的，但之后没有任何反应。这不仅仅是在我正在从事的项目中。我已经启动了一个新的 WFA 并尝试在不添加任何代码的情况下进行调试，并且发生了同样的事情。有人有类似的问题吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-31T01:11:16.300

我以前遇到过这种情况。不确定是什么原因造成的，但通常这是修复它的几件事之一。

1.  确保您正在调试而不是发布
2.  关闭VS，进入项目目录，删除obj和bin目录。在VS中重新打开并重建。
3.  工具 - 选项 - 构建（iirc）下有一个选项，允许检查源代码是否与代码文件相同。但是，如果是这种情况，您应该在输出窗口中看到一条消息。
4.  在构建（iirc）中的项目属性上，您可以将 pdb 文件从完整的调试符号限制为根本没有 pdb。如果您不是项目中唯一的人，请检查此设置是否仍然启用了完整的 pdb（尽管这已更改的可能性很小）
5.  确保您在构建目标的正确平台上（x64 与 x32）

...更多，但一个起点...

根据评论补充...

所以，这些消息是好的。它是说没有问题（但听起来你已经知道了:)）。我将从您提到的一般调试选项开始。在 hello world 应用程序上执行此操作。这样您就可以首先对最低常见问题进行故障排除。这是我的设置。尝试匹配它们，看看是否有效。例如，我知道“在删除断点之前询问”是无关紧要的，但“当一个进程中断时中断所有进程”很重要。因此，我只是将它们全部添加，以便更轻松地进行故障排除。

![工具 > 选项 > 调试](https://i.stack.imgur.com/CSXdn.png)

![工具 > 选项 > 调试](https://i.stack.imgur.com/svM0a.png)

另外，请确保您在 Visual Studio 的代码中像这样在此处获得一个红点（我见过 VS 不允许您将其放在这里的实例）：

![调试 Hello World](https://i.stack.imgur.com/T2fFn.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-09T11:34:07.777

1.  右键单击项目
2.  单击属性。
3.  去网络。
4.  选中 Enable Edit and Continue 复选框。

希望有帮助:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-03T20:39:33.713

I had a similar issue.

I added up:

using namespace std;

and this solved the problem

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-04T02:16:58.057

对我来说，卸载已经过期的 Redgate 的 Reflector 插件可以修复它。我花了 4 个多小时卸载、重新启动、恢复到旧代码等。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-11T16:13:31.120

这是 Visual Studio 2012 的一个问题。它并不总是出现。我发现如果您在调试期间停止程序，或者关闭控制台窗口，这几乎总是会触发。

然而，让它运行完成也不够，有时这只是发生。

您还可以在调试模式下构建应用程序，转到输出，运行程序并附加到该进程。:P

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-12-06T07:25:01.287

我有一个类似的问题，解决方案绝对是愚蠢的。VS 在“浏览方式”设置中与 Internet Explorer 的两个实例混淆。因此，我将 Google Chrome（任何浏览器）设置为默认值，然后再次将 IE 设置为默认值。它删除了 IE 的另一个实例（只剩下一个）并启用了调试。希望对您有所帮助！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-11-15T23:21:56.837

已经给出了惊人的答案，但它们对目的没有帮助。所以这是我的发现，无论我是否迟到回答，但它确实对我有用。

即使您正在开发 Web 应用程序，也只需右键单击项目转到网站属性，然后您会在左侧看到一个“Web”选项卡，正如我突出显示的那样。然后只需选中“启用编辑并继续”框即可。这就是你需要做的所有事情。这个对我有用！

![在此处输入图像描述](https://i.stack.imgur.com/QGp1k.png)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-03-03T17:09:40.583

当我的默认浏览器更改为 CHROME 时，我无法再调试我的用户界面。将IE设置回默认浏览器修复了它。或者，您可以在调试期间附加进程插件。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-10-23T14:39:31.870

我的一个 VB .NET Winforms 项目不允许调试。这是由于配置管理器设置为“发布”，即使工具栏下拉菜单显示“调试”。

您需要选择模式下拉菜单并选择最后一个选项“配置管理器”并确保主项目设置为“调试”而不是“发布”

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-07-23T13:31:51.213

我的桌面应用程序也有同样的问题，正如这个论坛所说，你应该将你的项目标记为启动项目，因为 Visual Studio 没有标记。它对我来说效果很好，我相信它会帮助其他可能遇到这个问题的人，因为我相信你已经完成了这个项目。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-01-20T19:17:59.787

安装 Microsoft SSDTSetup.exe 450Kb 并在安装过程中关闭 SSDT 工具。安装后打开 SSDT 工具并执行脚本任务和带有断点的组件。为我工作

* * *

## 回答 #12

> 赞同：-2
> 
> 时间：2013-09-19T11:39:29.503

尝试在不调试的情况下检查输出 Ctrl + F5

祝你好运

# javascript - json 和 Utc 日期时间

> ID：15725090
> 
> 赞同：5
> 
> 时间：2013-03-31T00:33:54.690
> 
> 标签：javascript, asp.net-mvc, json, utc

我将 Utc 日期时间存储在服务器上并通过 json 请求数据以显示在客户端上。问题是服务器按与客户端不同的时区返回时间。如何在不硬编码偏移量的情况下让本地 dateTime 显示在客户端上？

我正在使用 asp.net mvc 并将 SQL Server 2008 数据库中的日期和时间存储为“日期时间”。数据库中的日期时间格式为 2013-03-29 08:00:00.000。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-31T02:02:07.513

你没有说UTC时间是如何表示的。通常使用 UNIX 时间值，即自 1970-01-01T00:00:00Z 以来的秒数。如果这是您正在使用的，您可以在客户端上创建一个日期对象，方法是乘以 1,000 并将其提供给 Date 构造函数：

```
var unixTimeValue = '1364694508';
var clientDateObject = new Date(unixTimeValue * 1000); 
```

如果您使用的是 .NET，则该值可能已经以毫秒为单位，因此您无需乘以 1,000。您需要检查源以查看传递的值以及使用的纪元（如果它是时间值）。

Javascript 日期对象基于与 UNIX 相同的[时间值，但使用毫秒。](http://ecma-international.org/ecma-262/5.1/#sec-15.9.1.1)标准的 Date 方法（getFullYear、getMonth、getDate 等）将根据系统设置返回本地时区的值。UTC 方法（getUTCFullYear、getUTCMonth、getUTCDate 等）同时返回 UTC 值。

因此，如果您要传递一个时间值，请使用它在客户端上创建一个日期对象并使用标准方法读取这些值，并且您拥有 UTC 时间值的本地等价物。

如果您传递一个日期时间字符串，如 2013-03-31T14:32:22Z，您可以使用[Date.UTC](http://ecma-international.org/ecma-262/5.1/#sec-15.9.4.3)将其转换为日期对象，将字符串转换为时间值，然后将其提供给日期构造函数：

```
function dateFromUTCString(s) {
    s = s.split(/[-T:Z]/ig);
    return new Date(Date.UTC(s[0], --s[1], s[2], s[3], s[4], s[5]));
}

var s = '2013-03-31T14:32:22Z';
alert(dateFromUTCString(s));  // Mon Apr 01 2013 00:32:22 GMT+1000 (EST) 
```

如果您的输入字符串是不同的格式，您可能需要调整传递给 Date.UTC 的参数的拆分模式和顺序。

### 编辑

如果字符串格式是 2013-03-29 08:00:00.000（假设 UTC），您可以使用：

```
function dateFromUTCString(s) {
    s = s.split(/[\D]/ig);
    return new Date(Date.UTC(s[0], --s[1], s[2], s[3], s[4], s[5], s[6]||0));
}

var s = '2013-03-29 08:00:00.000';
alert(dateFromUTCString(s));  // Fri Mar 29 2013 18:00:00 GMT+1000 (EST) 
```

但要小心额外的空间。您可能想要修剪任何前导或尾随空格，并确保只有一个分隔日期和时间组件。

### 编辑 2

不要使用 Date.parse。在 ES5 之前，它完全依赖于实现。现在，**如果**字符串符合 ES5 指定的类似 ISO8601 的格式，则它已部分标准化。但这并不是所有正在使用的浏览器都支持的，因此不可靠，并且仍然依赖于实现。最好的解决方案（即一种适用于任何地方的解决方案）是手动解析您给出的值。

如果格式类似于：“1364835180000-0700”，那么您可以使用减去偏移量以获得 UTC 时间值的函数相当容易地处理它，并将其提供给日期构造函数。我假设 -0700 表示格林威治以西 7 小时（javascript 时区偏移量具有相反的意义，格林威治以西为 +ve）。

### 编辑 3

不好意思，一定是发错截图了，赶着开会。

```
// Where s is a time value with offset
function toDate(s) {

  // Include factor to convert mins to ms in sign
  var sign = s.indexOf('-') > -1? 6e4 : -6e4;
  s = s.split(/[\+\-]/);
  var l = s[1].length;

  // Convert offset in milliseconds
  var offset = sign*s[1].substring(l-2,l) + sign*s[1].substring(l-4, l-2)*60;

  // Add offset to time value to get UTC and create date object 
  return new Date(+s[0] + offset);
}

var s = "1364835180000-0700"
alert(toDate(s)); // Tue Apr 02 2013 09:53:00 GMT+1000 (EST) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T00:59:39.847

将 DateTime 作为 UTC 返回并在客户端使用 .toLocaleString() 进行转换：

```
 @ViewBag.Time = Model.Time.ToUniversalTime().Ticks / TimeSpan.TicksPerMillisecond

  <script>
       var time = new Date(@ViewBag.Time);
       var localTimeString = time.toLocaleString();
       alert(localTimeString);
  </script> 
```

# audio - 在 cocos2d 中更改处理的 soundfx 的音量

> ID：15725091
> 
> 赞同：0
> 
> 时间：2013-03-31T00:34:04.487
> 
> 标签：audio, cocos2d-iphone, volume, handle

```
int __sfxHandle;
[[SimpleAudioEngine sharedEngine]stopEffect:__sfxHandle]; 
```

通过这种方式，我可以通过其句柄号停止指定的声音。但我怎么能做这样的事情？类似的东西：[[SimpleAudioEngine sharedEngine]setVolumeEffect:.5f Handler:__sfxHandle];

可能的 ？

# c++ - 带有升压测试的 Autoconf - 链接器问题

> ID：15725093
> 
> 赞同：3
> 
> 时间：2013-03-31T00:34:24.553
> 
> 标签：c++, boost, linker, autotools, undefined-reference

我遇到了 boost unit_test 框架以及 autoconf 和 automake 的问题......

**以下是项目结构：**

*   ./include/com_i_foo.h
*   **./include/com_foo.h**

```
 ...
    class FooSingleton {
    protected:
    FooSingleton() {}
    private:
    FooSingleton* _instance;
    public:
    virtual ~FooSingleton() {}
    static FooSingleton* getInstance();
    };

    class FooFoo {
    public:
    FooFoo() {}
    virtual uint32_t getSomeInt();
    virtual ~FooFoo() {}
    };
    typedef boost::shared_ptr FooFooPtr_t;
    ... 
```

*   **./include/com_api.h**

```
 #include "com_foo.h" 
```

*   **./include/Makefile.am**

```
 include_HEADERS = \
            com_i_foo.h \
            com_foo.h \
            com_api.h \
            $(NULL) 
```

*   ./src/com_foo.cpp
*   **./src/Makefile.am**

```
 PLATEFORM=LINUX64
    DEBUG_OPTIONS = -g
    DEFINE_OPTIONS=-D${PLATEFORM}
    OPTIONS = -Wall -Werror -shared -O2 $(DEBUG_OPTIONS) $(DEFINE_OPTIONS)

    COMMON_CXXFLAGS= ${OPTIONS} -I$(top_builddir)/include
    ACLOCAL_AMFLAGS = -I ${top_builddir}/m4
    AM_LDFLAGS=

    lib_LTLIBRARIES  = \
            libcom_api.la \
            $(NULL)

    libcom_api_la_SOURCES = com_foo.cpp
    libcom_api_la_CXXFLAGS = ${COMMON_CXXFLAGS}
    libcom_api_la_LDFLAGS =
    libcom_api_la_LIBADD = 
```

*   **./test/Makefile.am**

```
 PLATEFORM=LINUX64
    DEBUG_OPTIONS = -g
    DEFINE_OPTIONS=-D${PLATEFORM} -DBOOST_ENABLE_ASSERT_HANDLER
    OPTIONS = -Wall -Werror -O2 $(DEBUG_OPTIONS) $(DEFINE_OPTIONS)

    BOOST_LIBS = -lboost_unit_test_framework -lboost_locale -lboost_filesystem -lboost_system -lboost_thread

    COMMON_CXXFLAGS= ${OPTIONS} -I$(top_srcdir)/include -I$(top_srcdir)/src
    AM_LDFLAGS=
    ACLOCAL_AMFLAGS = -I ${top_builddir}/m4

    check_PROGRAMS = ut_com_api

    ut_com_api_SOURCES = \
            ut_com_api.cpp \
            $(NULL)
    ut_com_api_CXXFLAGS = ${COMMON_CXXFLAGS}
    ut_com_api_LDFLAGS = -rdynamic
    ut_com_api_LDADD = ${BOOST_LIBS} $(top_builddir)/src/libcom_api.la 
```

*   **./test/ut_com_api.cpp**

```
 #define BOOST_LIB_DIAGNOSTIC
    #define BOOST_TEST_DYN_LINK
    #define BOOST_TEST_MODULE "Common API Unit tests"

    #include 

    #include "com_api.h"

    using namespace boost::unit_test;

    BOOST_AUTO_TEST_SUITE(com_api)

    BOOST_AUTO_TEST_CASE(FooFooTest) {
    FooFooPtr_t myFoo(new FooFoo());
    BOOST_CHECK(myFoo->getSomeInt() == 2);
    }

    BOOST_AUTO_TEST_CASE(FooSingletonTest) {
    FooSingleton* myFoo = FooSingleton::getInstance();
    BOOST_CHECK(myFoo != NULL);
    }

    BOOST_AUTO_TEST_SUITE_END() 
```

*   **./Makefile.am**

```
 SUBDIRS = include src test
    #dist_doc_DATA = README
    ACLOCAL_AMFLAGS = -I m4 
```

*   **./configure.ac**

```
 AC_INIT([com_api], [1.0], [bug@foo.foo])
    AC_CONFIG_MACRO_DIR([m4])
    AM_INIT_AUTOMAKE([-Wall -Werror foreign])
    AC_PROG_LIBTOOL
    AC_PROG_CXX
    AC_LANG_PUSH(C++)
    AX_BOOST_BASE([1.53], ,[AC_MSG_ERROR([You need boost library])])
    AX_BOOST_PROGRAM_OPTIONS
    AX_BOOST_DATE_TIME
    AC_CHECK_HEADER([boost/shared_ptr.hpp], , [AC_MSG_ERROR([You need boost library])])
    AC_LANG_POP(C++)
    AC_CONFIG_HEADERS([config.h])
    AC_CONFIG_FILES([
    Makefile
    include/Makefile
    src/Makefile
    test/Makefile
    ])
    AC_OUTPUT 
```

**我的问题**：

当我构建 DLL（linux 下的 .so）时，它运行良好，但是当我尝试构建 check_PROGRAMS 时，链接器返回以下未定义的引用：

*   未定义对 FooSingleton::_instance 的引用
*   **在函数 `boost::shared_ptr::operator->() const' 中：未定义对 boost::assertion_failed(char const*, char const*, char const*, long) 的引用**

About FooSingleton, I don't understand why because I'm well linking my check program with the built dll...

About boost, I guess I'm lacking a -lboost_xxxx in my test/Makefile.am, but I don't get why I'd have to explicitly specify boost libs to the linker for check_PROGRAMS while it works perfectly with the DLL build...

I've looked everywhere for a solution, but I'm running out of ideas so any help would be appreciated!

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T23:08:49.510

It looks like the macro `BOOST_ENABLE_ASSERT_HANDLER` is somehow being defined.

As stated in [the documentation for Boost.Assert](http://www.boost.org/doc/libs/release/libs/utility/assert.html), if `BOOST_ENABLE_ASSERT_HANDLER` is defined when `<boost/assert.hpp>` is included, then `BOOST_ASSERT(expr)` expands to a call to `boost::assertion_failed`, but *this function is not implemented*; the user is expected to provide an implementation.

Try to see if something is causing `BOOST_ENABLE_ASSERT_HANDLER` to be defined when building check_PROGRAMS.

# many-to-many - rails_admin has_many 通过额外的字段

> ID：15725094
> 
> 赞同：3
> 
> 时间：2013-03-31T00:34:32.673
> 
> 标签：many-to-many, rails-admin, manytomanyfield

我有2个模型。`User`和`Project`。并且它们之间存在 many_to_many 关系和额外`position`字段。我在 rails_admin 编辑页面上看不到那个额外的字段。

如何将该字段添加到表单中？

**用户.rb**

```
has_many :projects, :through => :works_ons 
```

**项目.rb**

```
has_many :users, :through => :works_ons 
```

**works_on.rb**

```
attr_accessible :position, :project_id, :user_id

belongs_to :user
belongs_to :project 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-12T01:42:12.540

这是我找到的最接近的。您可能应该在关联下方添加一个自定义字段并输入额外的字段。

[https://github.com/sferik/rails_admin/wiki/Has-many-%3Athrough-association](https://github.com/sferik/rails_admin/wiki/Has-many-%3Athrough-association)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-25T01:49:47.353

你的用户模型是真的吗`has_many :users, :through => :works_ons?`

我想知道你是否需要

**用户.rb**

```
has_many :projects, :through => :works_ons 
```

# html - 如何在右侧和左侧对齐页脚文本？

> ID：15725098
> 
> 赞同：2
> 
> 时间：2013-03-31T00:35:31.007
> 
> 标签：html, css

我正在尝试对齐页脚左侧和右侧的文本。问题是右边的文本在左边的文本下方一行。我希望他们甚至在同一条线上。任何帮助，将不胜感激！谢谢您的帮助！

这是我的代码：http: [//jsfiddle.net/kc6AL/](http://jsfiddle.net/kc6AL/)

## HTML

```
<!--Footerline-->
<div id="footerline">
<img src="http://s21.postimg.org/l6t6akypj/line.jpg"/>
</div>
<!--Footer-->
<div id="footer">
<h3 class="copyright">Copyright Stuff.</h3>
<h3 class="social">Social Links.</h3> 
```

## CSS

```
#footerline {
    width: 100%;
    overflow: hidden;
    margin: 5px auto 10px auto;
    text-align: center;
}

#footer {
    max-width: 980px;
    text-align: center;
    margin: auto;
}

h3 {

font-family: 'Source Sans Pro', sans-serif;
            text-transform:uppercase;
            font-weight : 300;
            font-size : 14px;
            color : #000;

}

.copyright {

    text-align: left;
}

.social {

    text-align: right;

} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-31T00:40:45.727

我已经分叉了你的 jsfiddle：

[http://jsfiddle.net/82ZU8/](http://jsfiddle.net/82ZU8/)

这里的关键是浮动`<h3/>`s

**CSS**

```
.copyright {
    float: left;
}

.social { 
    float: right;
} 
```

**HTML**

```
<!--Footer-->
<div id="footer">
    <h3 class="copyright">Copyright Stuff.</h3>
    <h3 class="social">Social Links.</h3>
    <div style="clear: both"></div>
</div> 
```

请注意，您必须*清除*浮动块，因此页脚 div 将被固定。

text-align 方法不能按您预期的方式工作的原因是因为`<h3 />`它是一个块元素，因此它将填充整个宽度并导致下一个`h3`进入下一个“行”。给`float`一个块元素，将导致元素收缩到它的内容，并允许其他元素在它旁边。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-31T00:37:02.200

只需将你`text-align`的`float`两者都更改为`.copyright`，`.social`你就是金色的。

**编辑**这是一个 jsFiddle 演示，删除了一些不必要的东西：http: [//jsfiddle.net/kc6AL/6/](http://jsfiddle.net/kc6AL/6/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T00:50:44.980

这样做：（将浮动添加到您的 CSS）

```
.copyright {
 float:left;
 text-align: left;
}

.social {
 float:right;
 text-align: right;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-31T00:41:03.517

我会简单地使用一个 h3 并将社交图标浮动在该头部标签中。

[更新的小提琴](http://jsfiddle.net/NotInUse/kc6AL/1/)

```
<h3 class="copyright"><span class="social">Social Links.</span>Copyright Stuff.</h3> 
```

CSS

```
.social { float: right; } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-31T00:43:33.850

只需添加`display: inline;` 到您的 h3 元素。看到这个：`http://jsfiddle.net/kc6AL/3/`

欲了解更多信息： http: [//learnlayout.com/display.html](http://learnlayout.com/display.html)

# android - how to align textview according to above imageview in android

> ID：15725100
> 
> 赞同：1
> 
> 时间：2013-03-31T00:36:08.660
> 
> 标签：android, android-layout, landscape, landscape-portrait

I m not satisfied with the result of my layout whenever I test it in landscape mode on different screen size devices. In portrait I like the margin of the textview. Since my current image size of the imageview will not fill the full width of some devices out there in landscape there is some whitespace left and right to it, which is fine. however, the margin of the textview should also take this whitespace into account and add it somehow. I know i can create a different xml style for landscape modes, but any fixed margin wont help here... thanks for any help in advance

![enter image description here](https://i.stack.imgur.com/7clxf.png)

```
 <ImageView
    android:id="@+id/imageView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:scaleType="fitStart"
    android:adjustViewBounds="true"
    android:src="@drawable/start1_8" />

<TextView
    style="@style/DescriptionTitle"
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@id/imageView1"
    android:text="Test Titelzeile"   />

<style name="DescriptionTitle" parent="@android:style/TextAppearance">
    <item name="android:textColor">#0099cc</item>
    <item name="android:textStyle">bold|italic</item>
    <item name="android:textSize">20sp</item>
    <item name="android:layout_gravity">center_vertical|left</item>
    <item name="android:gravity">top|left</item>
    <item name="android:layout_marginLeft">15dp</item>
    <item name="android:layout_marginRight">15dp</item>
    <item name="android:layout_marginTop">5dp</item>

</style> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T01:36:53.127

I would put it in a Relative Layout like this:

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:orientation="vertical"
              android:layout_width="match_parent"
              android:gravity="center_horizontal"
              android:layout_height="match_parent">
    <ImageView
            android:id="@+id/imageView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerHorizontal="true"
            android:scaleType="fitStart"
            android:adjustViewBounds="true"
            android:src="@drawable/Untitled-1" />
    <TextView
            style="@style/DescriptionTitle"
            android:id="@+id/textView1"
            android:layout_alignLeft="@id/imageView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@id/imageView1"
            android:text="Test Titelzeile"   />
</RelativeLayout> 
```

Then it will be in the correct relative position regardless of view size or orientation.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T00:51:30.950

resize the view in runtime and use(like screenwidth/4 ) a ratio hor image width and position.

use LayoutParams to do it.

# c++ - What the OpenGL coordinates are? Ignore OpenGL window size

> ID：15725101
> 
> 赞同：0
> 
> 时间：2013-03-31T00:36:12.273
> 
> 标签：c++, opengl, freeglut, obsolete

I just started trying to folow simple "draw cube" [openGl tutorial](http://www.wikihow.com/Make-a-Cube-in-OpenGL). After final victory over getting OpenGL to work, I still have very veird results. My problem is that the objects tend to resize themselves to match the window size. Instead, I'd like the window size determine the rendering area - the larger the window is, the more you may see.

Here are some screenshots of the *resizing*:
[Normal size](http://i.stack.imgur.com/SWpgg.png)
[Resized](http://i.stack.imgur.com/6Yf79.png)
*Images kept as links intentionally!*

This auto-resizing behavior brings a question what the coordinates used in OpenGL are.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T01:06:29.250

First thing to keep in mind: OpenGL is a drawing API. It doesn't maintain a scene or something like that.

So what OpenGL does is, it maps geometry input coordinates in the form of vertex attributes to screen space. In the old fixed function there's a special vertex attribute called "vertex position" or just short "vertex" (the actual vertex is more than just position).

The position is transformed to what's usually called "screen" space (but depending on where the viewport is placed, it might as well be called "window" or "viewport) space) in a three step process:

1\. Transformation into view/eye space: This is done by multiplying the vertex position with the modelview matrix.

Certain further calculations, like illumination calculation are done in view space.

2\. Transformation to clip space: The view space position is transformed into clip space. This is usually called the projection and aptly the matrix describing this transformation is called the projection matrix

In clip space some special things happen, summarized as clipping, you don't have to worry about yet.

3\. In the final step transformed the clipped geometry into normalized device coordinates (NDC). NDC space is practically a 1:1 mapping toward the viewport, i.e. the limits of the NDC volume directly correspond to the offset and dimension of the viewport set with glViewport.

You can't change the way the 3rd step happens, and the 1st step is reserved for transforming stuff into view space. So any adjustments must happen in the 2nd step.

所以这就是你必须做的：投影限制必须与视口范围成正比。例如像这样

```
glViewport(0, 0, width, height);
glMatrixMode(GL_PROJECTION);
glLoadIdentity();
glOrtho(-width/2, width/2, -height/2, height/2, -1, 1); 
```

哦，只是一般性说明：您也应该始终在绘图函数中设置视口和投影设置。如果您看到将这些语句放入窗口调整大小处理程序的教程，请忽略它并在绘图代码中执行它。从长远来看，这确实简化了事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T01:11:24.453

有趣的部分：

```
glMatrixMode( GL_PROJECTION );
glLoadIdentity();
double w = glutGet( GLUT_WINDOW_WIDTH ) / 300.0;
double h = glutGet( GLUT_WINDOW_HEIGHT ) / 300.0;
glOrtho( -1 * w, 1 * w, -1 * h, 1 * h, 10, -10);

glMatrixMode( GL_MODELVIEW );
glLoadIdentity(); 
```

在上下文中：

```
#include <GL/glut.h>

void display();
void specialKeys();

double rotate_y=0; 
double rotate_x=0;

void display(){
   //  Clear screen and Z-buffer
  glClear(GL_COLOR_BUFFER_BIT|GL_DEPTH_BUFFER_BIT);

  glMatrixMode( GL_PROJECTION );
  glLoadIdentity();
  double w = glutGet( GLUT_WINDOW_WIDTH ) / 300.0;
  double h = glutGet( GLUT_WINDOW_HEIGHT ) / 300.0;
  glOrtho( -1 * w, 1 * w, -1 * h, 1 * h, 10, -10);

  glMatrixMode( GL_MODELVIEW );
  glLoadIdentity(); 

  // Rotate when user changes rotate_x and rotate_y
  glRotatef( rotate_x, 1.0, 0.0, 0.0 );
  glRotatef( rotate_y, 0.0, 1.0, 0.0 );

  //Multi-colored side - FRONT
  glBegin(GL_POLYGON);

  glColor3f( 1.0, 0.0, 0.0 );     glVertex3f(  0.5, -0.5, -0.5 );      // P1 is red
  glColor3f( 0.0, 1.0, 0.0 );     glVertex3f(  0.5,  0.5, -0.5 );      // P2 is green
  glColor3f( 0.0, 0.0, 1.0 );     glVertex3f( -0.5,  0.5, -0.5 );      // P3 is blue
  glColor3f( 1.0, 0.0, 1.0 );     glVertex3f( -0.5, -0.5, -0.5 );      // P4 is purple

  glEnd();

  // White side - BACK
  glBegin(GL_POLYGON);
  glColor3f(   1.0,  1.0, 1.0 );
  glVertex3f(  0.5, -0.5, 0.5 );
  glVertex3f(  0.5,  0.5, 0.5 );
  glVertex3f( -0.5,  0.5, 0.5 );
  glVertex3f( -0.5, -0.5, 0.5 );
  glEnd();

  // Purple side - RIGHT
  glBegin(GL_POLYGON);
  glColor3f(  1.0,  0.0,  1.0 );
  glVertex3f( 0.5, -0.5, -0.5 );
  glVertex3f( 0.5,  0.5, -0.5 );
  glVertex3f( 0.5,  0.5,  0.5 );
  glVertex3f( 0.5, -0.5,  0.5 );
  glEnd();

  // Green side - LEFT
  glBegin(GL_POLYGON);
  glColor3f(   0.0,  1.0,  0.0 );
  glVertex3f( -0.5, -0.5,  0.5 );
  glVertex3f( -0.5,  0.5,  0.5 );
  glVertex3f( -0.5,  0.5, -0.5 );
  glVertex3f( -0.5, -0.5, -0.5 );
  glEnd();

  // Blue side - TOP
  glBegin(GL_POLYGON);
  glColor3f(   0.0,  0.0,  1.0 );
  glVertex3f(  0.5,  0.5,  0.5 );
  glVertex3f(  0.5,  0.5, -0.5 );
  glVertex3f( -0.5,  0.5, -0.5 );
  glVertex3f( -0.5,  0.5,  0.5 );
  glEnd();

  // Red side - BOTTOM
  glBegin(GL_POLYGON);
  glColor3f(   1.0,  0.0,  0.0 );
  glVertex3f(  0.5, -0.5, -0.5 );
  glVertex3f(  0.5, -0.5,  0.5 );
  glVertex3f( -0.5, -0.5,  0.5 );
  glVertex3f( -0.5, -0.5, -0.5 );
  glEnd();

  glFlush();
  glutSwapBuffers();
}

void specialKeys( int key, int x, int y ) {
   //  Right arrow - increase rotation by 5 degree
  if (key == GLUT_KEY_RIGHT)
    rotate_y += 5;

  //  Left arrow - decrease rotation by 5 degree
  else if (key == GLUT_KEY_LEFT)
    rotate_y -= 5;

  else if (key == GLUT_KEY_UP)
    rotate_x += 5;

  else if (key == GLUT_KEY_DOWN)
    rotate_x -= 5;

  //  Request display update
  glutPostRedisplay();
}

int main(int argc, char* argv[]){
  //  Initialize GLUT and process user parameters
  glutInit(&argc,argv);

  //  Request double buffered true color window with Z-buffer
  glutInitDisplayMode(GLUT_DOUBLE | GLUT_RGB | GLUT_DEPTH);

  // Create window
  glutCreateWindow("Awesome Cube");

  //  Enable Z-buffer depth test
  glEnable(GL_DEPTH_TEST);

  // Callback functions
  glutDisplayFunc(display);
  glutSpecialFunc(specialKeys);

  //  Pass control to GLUT for events
  glutMainLoop();

  //  Return to OS
  return 0;
} 
```

# ios - 在其超类也具有相同名称的 ivar 的子类中拥有 ivar“委托”

> ID：15725110
> 
> 赞同：0
> 
> 时间：2013-03-31T00:37:40.577
> 
> 标签：ios, xcode, delegates, warnings, uitextviewdelegate

我有一个像这样定义的子类

```
@protocol UMTextViewDelegate;

@interface UMTexView : UITextView <UITextViewDelegate> {

}

@property (nonatomic, assign) id<UMTextViewDelegate> delegate;

@end

@protocol UMTextViewDelegate <NSObject>
@optional
- (void)textViewDidSelectWordToDefine:(UMTexView*)textView;
@end 
```

但我收到警告`Property type 'id<UMTextViewDelegate>' is incompatible with type 'id<UITextViewDelegate>' inherited from 'UITextView'`。

如何抑制此警告？我试着添加这个：

```
@protocol UMTextViewDelegate <NSObject, UITextViewDelegate> 
```

但没有运气。！！

编辑：

我没有使用 ARC

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T00:49:51.290

您遇到的问题是关于前向声明。在您声明 的地方，编译`delegate`器不知道. 它唯一知道的是协议。`UMTextViewDelegate``UITextViewDelegate``UMTextViewDelegate`

你必须为类创建一个前向声明`@class UMTexView;`，然后放置协议声明，然后是类声明。

On a separate note, it's obvious `UMTexView` is supposed to be the text delegate for itself. Maybe it would be easier to have `UMTexView` descending directly from `UIView` and put an `UITextView` inside it. Then you wouldn't have any problem with delegate collisions and the `UITextViewDelegate` would be unaccessible externally.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T20:37:43.443

Using @Sulthan's answer, this is what I came up with and it squished the warning.

```
@class UMTextView;

@protocol UMTextViewDelegate <NSObject, UITextViewDelegate>
@optional
- (void)textViewDidSelectWordToDefine:(UMTextView*)textView;
@end

@interface UMTextView : UITextView <UITextViewDelegate>

@property (nonatomic, assign) id<UMTextViewDelegate> delegate;

@end 
```

The forward declaration of UMTextView followed by protocol declaration tells UMTextView that UMTextViewDelegate is indeed descends from UITextViewDelegate. That way I don't have to the route of adding a `uiview` and then adding a `uitextview` inside that view.

# ruby - 将包含迭代键的数组应用于哈希

> ID：15725115
> 
> 赞同：2
> 
> 时间：2013-03-31T00:38:27.813
> 
> 标签：ruby, arrays, hash

我有以下数组

```
["key", "key_deeper", "key_even_deeper"] 
```

和一个哈希：

```
{ "key" => { "key_deeper" => { "key_even_deeper" => "BINGO!" } } } 
```

将数组应用于要接收的哈希的最短或最具表现力的方法是`"BINGO!"`什么？

* * *

这是基本情况，但也有一种特殊情况，键的值不仅是`String => Hash`，而且是`String => [Integer, Hash]`。

例如

```
["key1", "key2"] 
```

关于哈希

```
{"key1" => [5, {"key2" => "BINGO!" }] } 
```

应该再次返回`"BINGO!"`，但仅包含的数组`["key1"]`将简单地返回`5`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-31T00:42:09.043

可能最简单的方法是使用`inject`：

```
array.inject(hash) do |h, i|
  h.fetch(i){ {} }
end

# => "BINGO!" 
```

`fetch`用于防止`NoMethodError`在哈希中不存在您的查找值之一的情况下出现。但是，在这种情况下，它将返回一个空哈希。您可能想要改为执行标准查找，即

```
array.inject(hash) {|h,i| h[i] } 
```

**编辑：**

Here's an even shorter way to do this (I don't know if I would say it's 'more expressive', but it is shorter):

```
array.inject(hash, :[]) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T19:03:35.097

You can change the original answer a little bit for your second version of question:

```
array.inject(hash){ |h,i| h[i].is_a?(Array) ? h[i].last : h[i] } 
```

# c++ - GLEW 无法在 Visual Studios 2010 中工作

> ID：15725117
> 
> 赞同：0
> 
> 时间：2013-03-31T00:39:03.120
> 
> 标签：c++, visual-studio-2010, visual-studio, opengl, glew

当我尝试使用 glewInit() 运行我的多项目解决方案时，它会关闭。该项目虽然可以自行构建。当我注释掉这一行时，解决方案可以运行。

我正在编写一个项目，它是 Visual Studios 2010 中大型解决方案的一部分。该项目使用名为 coin3d 的第 3 方图形库。我已经下载并安装/包含了 glew，并且没有链接问题，因为该项目将构建良好而没有任何错误。这个项目没有入口点，它生成的 dll 只是被解决方案使用。所以我无法查看有关它的任何特定运行时错误日志。它只告诉我它失败时找不到项目的dll。

我知道第 3 方图形库创建了 opengl 上下文，因为我可以使用常规 opengl 将一些几何图形和诸如此类的东西渲染到屏幕上。但是一旦我运行 glewInit()，项目就无法运行（即使它构建了）。有没有办法检查和打印上下文是否已创建？（只是要确定）

在 GLEW 的网站上，它说：

```
"On Windows, you also need to define the GLEW_STATIC preprocessor token when
 building a static library or executable, and the GLEW_BUILD preprocessor
 token when building a dll" 
```

这是否意味着像这样将它们放入项目的预处理器定义中？ ![预处理器定义](https://i.stack.imgur.com/SHd6d.png)

我试着让它只用 GLEW_BUILD 运行，而不是 GLEW_STATIC。这并没有什么不同。有没有我遗漏的步骤？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T16:35:40.850

> 有没有办法检查和打印上下文是否已创建？（只是要确定）

您可以执行以下操作：

```
if (glewInit() != GLEW_OK) 
{
    fprintf(stderr, "Failed to initialize GLEW\n");
    return -1;
} 
```

# ssl - 握手警报：unrecognized_name 错误

> ID：15725118
> 
> 赞同：8
> 
> 时间：2013-03-31T00:39:05.607
> 
> 标签：ssl, handshake, charles-proxy

我正在使用 Charles 3.7 来调试 SSL 连接。我能够查看大部分 HTTPS 连接，但是当我尝试调试它时，有 1 或 2 个站点返回“SSLProtocol：握手警报：unrecognized_name”，并且我无法在 Charles 开启的情况下加载该网站。我可以使用 Fiddler 来做到这一点。关于如何解决这个问题的任何想法？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-03-02T12:47:55.963

我在 10.10 上使用最新的 beta Charles 3.10b9 时遇到了这个问题。我们使用与 Shade 的答案类似的方法进行修复：

我在 Xcode 中打开 info.plist 并执行以下操作：

在 JVMOptions（与 VMOptions 相反）键下添加字符串：

```
-Djsse.enableSNIExtension=false 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-03T17:54:37.067

看起来这与 Java 1.7 的安全性改进和服务器配置有关，而不是 Charles。您能确认一下查尔斯使用的是哪个 JRM 吗？ `help -> about java`

这是一篇关于相同错误消息但升级到 Java 1.7 之后的文章：

[http://www.pressingquestion.com/2030237/Ssl-Handshake-Alert-Unrecognized_name-Error-Since-Upgrade-To-Java-170](http://www.pressingquestion.com/2030237/Ssl-Handshake-Alert-Unrecognized_name-Error-Since-Upgrade-To-Java-170)

对于那些抛出错误的网站，您是否需要使用 Charles？如果没有，您可以禁用每个站点的 SSL 代理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-11T00:39:42.737

将 -Djsse.enableSNIExtension=false 添加到 Charles 应用程序的 Contents 文件夹中的 info.plist。在：

```
<key>VMOptions</key>
<string>-Xmx512m -Djsse.enableSNIExtension=false</string> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-15T13:18:06.010

尝试使用项目路径中的命令行：

```
mvn clean install -Djsse.enableSNIExtension=false 
```

# php - 动态 PHP 网页保存为 PDF

> ID：15725121
> 
> 赞同：0
> 
> 时间：2013-03-31T00:39:21.177
> 
> 标签：php, css, pdf, pdf-generation

我正在创建一个发票应用程序，该应用程序通过浏览器窗口中的 php/mysql 生成动态发票。表格和 css 是构成的一部分。

我在想最好有一个按钮，当单击该按钮时，会出现一个弹出窗口，要求您将 pdf 保存到您的计算机。

有人可以引导我朝着正确的方向前进吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T01:02:57.950

这些可能会有所帮助：

*   [fpdf](http://www.fpdf.org/) - 基于 PHP 类的生成器
*   [wkhtmltopdf](https://code.google.com/p/wkhtmltopdf/) - 使用 webkit (qtwebkit) 将 html 转换为 pdf
*   [mPDF](http://mpdf.bpm1.com/) - 从 UTF-8 编码的 HTML 生成 PDF 文件的 PHP 类
*   [TCPDF](http://www.tcpdf.org/) - fpdf 的增强和维护版本
*   [dompdf](https://github.com/dompdf/dompdf) - （主要是）符合 CSS 2.1 的 HTML 布局和渲染引擎
*   [Zend_Pdf](http://framework.zend.com/manual/en/zend.pdf.html) - Zend 的 PDF 操作引擎/组件
*   [PrinceXML](http://www.princexml.com/) - 商业，但支持 CSS3 转换

这部分取决于 HTML 的复杂程度以及您想要显示的内容。在渲染某些基于样式的元素（尤其是 CSS2/CSS3）时，它们中的一些可能有点不稳定，但总的来说它们非常好。

如果您打算“强制下载”您的 PDF，那么您需要在 PHP 中使用类似以下的内容：

```
 header('Content-disposition: attachment; filename=filename.pdf'); 
```

可以在之前的 SO 答案中找到一个很好的示例/解释：[php: force download to harddrive？](https://stackoverflow.com/questions/3314579/php-force-download-to-hd)

# variables - 如何在 Corona SDK 中制作控制变量？

> ID：15725123
> 
> 赞同：0
> 
> 时间：2013-03-31T00:39:27.350
> 
> 标签：variables, sdk, coronasdk

我正在尝试创建一个名为 star1vis( - 的代码`star1vis = 0`) 的变量，当发生碰撞时，star1vis 为 1 ( 代码 - `..... then star1vis = 1`)。在另一个名为 level1com 的 Lua 文件中，我使用的是全局变量，因此如果发生碰撞，如果没有发生碰撞，那么我可以让星星可见，那么该星星是不可见的。我对 GML（Game Maker Language - 类似于 C++）有丰富的经验，在那种语言中我就是这样做的，所以我的问题是如何在 lua 语言中创建该变量，因为我得到 nil 值错误 - 没有那个代码它是工作完美。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T12:07:34.650

It's the most important thing that, where did you first created star1vis variable?

If you created it in a module, lets say module1.lua, then you can reach it easly with module1.star1vis

But if you created star1vis in main.lua, you may overwrite it in another module. See exapmle below:

main.lua:

```
.....
star1vis = 0 --star1vis first created here
..... 
```

module1.lua:

```
.....
star1vis = 1 --you overwrite star1vis here. That means there are 2 star1vis variables with same names in different modules right now. 
-----
-----
print( star1vis ) --if you do this without creating a new variable in module1.lua, this will reach the variable in main.lua.
----- 
```

I guess you want to have your variable in main.lua and be able to change it from another modules. If so, here is what you have to do:

main.lua:

```
----
star1vis = 0  --first created
function changestar1vis( new )
    star1vis = new
end
----- 
```

module1.lua:

```
------
changestar1vis( 0 )
------ 
```

Hope it helps...

# java - Link maven dependencies on non maven project

> ID：15725125
> 
> 赞同：1
> 
> 时间：2013-03-31T00:39:54.507
> 
> 标签：java, eclipse, maven

I have two projects in Eclipse, the first project depends on maven, the second project which dependent on the first one does NOT depend on maven.

The first project downloads external libraries like jar files and natives to the .m2 maven folder. However the second project gives a ClassNotFoundException since it cant find the jar files and the native files from the first project.

Is it possible to link these downloaded jars+dlls with the second project without having to reference in the **build path->libraries** in the second **project properties**?

I would appreciate any help.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T01:50:01.490

In your Maven project, use Assembly plugin to create an Uber-jar that contains the project build artifact and all its dependencies (`mvn assembly:assembly -DdescriptorId=jar-with-dependencies`). Then, reference that from project #2, either with a relative path or by using an ant build task to copy it into your other project's lib directory (assuming you have such a directory). Also, although it's frowned upon, you could configure the assembly plugin so that your Uber jar artifact always has the same `finalName`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T00:46:04.393

> Is it possible to link these downloaded jars+dlls with the second project without having to reference in the build path->libraries in the second project properties?

I don't think so.

But maybe you could create a 3rd project (which is a Maven project) that depends on the first one, and on the JAR (or whatever) file created by the 2nd one as a non-repository dependency.

Having said that, anything you do is going to be a bit of a hack. You'd be better of either turning the 2nd project into a proper Maven project, or creating a custom build script that manually pulls the 2nd project's dependencies from somewhere. (I think that Ivy could help you with that ... assuming you use Ant in the 2nd project.)

# javascript - 仅当特定的#div 变得可见时，如何使此浮动菜单起作用？

> ID：15725134
> 
> 赞同：0
> 
> 时间：2013-03-31T00:41:03.290
> 
> 标签：javascript, jquery, html, css

我需要制作一个浮动菜单，我在网上搜索并在这里找到了一个脚本[http://www.jtricks.com/javascript/navigation/floating.html](http://www.jtricks.com/javascript/navigation/floating.html)

```
/* Script by: www.jtricks.com
 * Version: 1.12 (20120823)
 * Latest version: www.jtricks.com/javascript/navigation/floating.html
 *
 * License:
 * GNU/GPL v2 or later http://www.gnu.org/licenses/gpl-2.0.html
 */
var floatingMenu =
{
    hasInner: typeof(window.innerWidth) == 'number',
    hasElement: typeof(document.documentElement) == 'object'
        && typeof(document.documentElement.clientWidth) == 'number'};

var floatingArray =
[
];

floatingMenu.add = function(obj, options)
{
    var name;
    var menu;

    if (typeof(obj) === "string")
        name = obj;
    else
        menu = obj;

    if (options == undefined)
    {
        floatingArray.push( 
            {
                id: name,
                menu: menu,

                targetLeft: 0,
                targetTop: 0,

                distance: .07,
                snap: true,
                updateParentHeight: false
            });
    }
    else
    {
        floatingArray.push( 
            {
                id: name,
                menu: menu,

                targetLeft: options.targetLeft,
                targetRight: options.targetRight,
                targetTop: options.targetTop,
                targetBottom: options.targetBottom,

                centerX: options.centerX,
                centerY: options.centerY,

                prohibitXMovement: options.prohibitXMovement,
                prohibitYMovement: options.prohibitYMovement,

                distance: options.distance != undefined ? options.distance : .07,
                snap: options.snap,
                ignoreParentDimensions: options.ignoreParentDimensions,
                updateParentHeight:
                    options.updateParentHeight == undefined
                    ? false
                    : options.updateParentHeight,

                scrollContainer: options.scrollContainer,
                scrollContainerId: options.scrollContainerId,

                confinementArea: options.confinementArea,

                confinementAreaId:
                    options.confinementArea != undefined
                    && options.confinementArea.substring(0, 1) == '#'
                    ? options.confinementArea.substring(1)
                    : undefined,

                confinementAreaClassRegexp:
                    options.confinementArea != undefined
                    && options.confinementArea.substring(0, 1) == '.'
                    ? new RegExp("(^|\\s)" + options.confinementArea.substring(1) + "(\\s|$)")
                    : undefined
            });
    }
};

floatingMenu.findSingle = function(item)
{
    if (item.id)
        item.menu = document.getElementById(item.id);

    if (item.scrollContainerId)
        item.scrollContainer = document.getElementById(item.scrollContainerId);
};

floatingMenu.move = function (item)
{
    if (!item.prohibitXMovement)
    {
        item.menu.style.left = item.nextX + 'px';
        item.menu.style.right = '';
    }

    if (!item.prohibitYMovement)
    {
        item.menu.style.top = item.nextY + 'px';
        item.menu.style.bottom = '';
    }
};

floatingMenu.scrollLeft = function(item)
{
    // If floating within scrollable container use it's scrollLeft
    if (item.scrollContainer)
        return item.scrollContainer.scrollLeft;

    var w = window.top;

    return this.hasInner
        ? w.pageXOffset  
        : this.hasElement  
          ? w.document.documentElement.scrollLeft  
          : w.document.body.scrollLeft;
};

floatingMenu.scrollTop = function(item)
{
    // If floating within scrollable container use it's scrollTop
    if (item.scrollContainer)
        return item.scrollContainer.scrollTop;

    var w = window.top;

    return this.hasInner
        ? w.pageYOffset
        : this.hasElement
          ? w.document.documentElement.scrollTop
          : w.document.body.scrollTop;
};

floatingMenu.windowWidth = function()
{
    return this.hasElement
        ? document.documentElement.clientWidth
        : document.body.clientWidth;
};

floatingMenu.windowHeight = function()
{
    if (floatingMenu.hasElement && floatingMenu.hasInner)
    {
        // Handle Opera 8 problems
        return document.documentElement.clientHeight > window.innerHeight
            ? window.innerHeight
            : document.documentElement.clientHeight
    }
    else
    {
        return floatingMenu.hasElement
            ? document.documentElement.clientHeight
            : document.body.clientHeight;
    }
};

floatingMenu.documentHeight = function()
{
    var innerHeight = this.hasInner
        ? window.innerHeight
        : 0;

    var body = document.body,
        html = document.documentElement;

    return Math.max(
        body.scrollHeight,
        body.offsetHeight, 
        html.clientHeight,
        html.scrollHeight,
        html.offsetHeight,
        innerHeight);
};

floatingMenu.documentWidth = function()
{
    var innerWidth = this.hasInner
        ? window.innerWidth
        : 0;

    var body = document.body,
        html = document.documentElement;

    return Math.max(
        body.scrollWidth,
        body.offsetWidth, 
        html.clientWidth,
        html.scrollWidth,
        html.offsetWidth,
        innerWidth);
};

floatingMenu.calculateCornerX = function(item)
{
    var offsetWidth = item.menu.offsetWidth;

    var result = this.scrollLeft(item) - item.parentLeft;

    if (item.centerX)
    {
        result += (this.windowWidth() - offsetWidth)/2;
    }
    else if (item.targetLeft == undefined)
    {
        result += this.windowWidth() - item.targetRight - offsetWidth;
    }
    else
    {
        result += item.targetLeft;
    }

    if (document.body != item.menu.parentNode
        && result + offsetWidth >= item.confinedWidthReserve)
    {
        result = item.confinedWidthReserve - offsetWidth;
    }

    if (result < 0)
        result = 0;

    return result;
};

floatingMenu.calculateCornerY = function(item)
{
    var offsetHeight = item.menu.offsetHeight;

    var result = this.scrollTop(item) - item.parentTop;

    if (item.centerY)
    {
        result += (this.windowHeight() - offsetHeight)/2;
    }
    else if (item.targetTop === undefined)
    {
        result += this.windowHeight() - item.targetBottom - offsetHeight;
    }
    else
    {
        result += item.targetTop;
    }

    if (document.body != item.menu.parentNode
        && result + offsetHeight >= item.confinedHeightReserve)
    {
        result = item.confinedHeightReserve - offsetHeight;
    }

    if (result < 0)
        result = 0;

    return result;
};

floatingMenu.isConfinementArea = function(item, area)
{
    return item.confinementAreaId != undefined
        && area.id == item.confinementAreaId
        || item.confinementAreaClassRegexp != undefined
        && area.className
        && item.confinementAreaClassRegexp.test(area.className);
};

floatingMenu.computeParent = function(item)
{
    if (item.ignoreParentDimensions)
    {
        item.confinedHeightReserve = this.documentHeight();
        item.confinedWidthReserver = this.documentWidth();
        item.parentLeft = 0;  
        item.parentTop = 0;  
        return;
    }

    var parentNode = item.menu.parentNode;
    var parentOffsets = this.offsets(parentNode, item);
    item.parentLeft = parentOffsets.left;
    item.parentTop = parentOffsets.top;

    item.confinedWidthReserve = parentNode.clientWidth;

    // We could have absolutely-positioned DIV wrapped
    // inside relatively-positioned. Then parent might not
    // have any height. Try to find parent that has
    // and try to find whats left of its height for us.
    var obj = parentNode;
    var objOffsets = this.offsets(obj, item);

    if (item.confinementArea == undefined)
    {
        while (obj.clientHeight + objOffsets.top
                   < item.menu.scrollHeight + parentOffsets.top
               || item.menu.parentNode == obj
               && item.updateParentHeight
               && obj.clientHeight + objOffsets.top
                   == item.menu.scrollHeight + parentOffsets.top)
        {
            obj = obj.parentNode;
            objOffsets = this.offsets(obj, item);
        }
    }
    else
    {
        while (obj.parentNode != undefined
               && !this.isConfinementArea(item, obj))
        {
            obj = obj.parentNode;
            objOffsets = this.offsets(obj, item);
        }
    }

    item.confinedHeightReserve = obj.clientHeight
        - (parentOffsets.top - objOffsets.top);
};

floatingMenu.offsets = function(obj, item)
{
    var result =
    {
        left: 0,
        top: 0
    };

    if (obj === item.scrollContainer)
        return;

    while (obj.offsetParent && obj.offsetParent != item.scrollContainer)
    {  
        result.left += obj.offsetLeft;  
        result.top += obj.offsetTop;  
        obj = obj.offsetParent;
    }  

    if (window == window.top)
        return result;

    // we're IFRAMEd
    var iframes = window.top.document.body.getElementsByTagName("IFRAME");
    for (var i = 0; i < iframes.length; i++)
    {
        if (iframes[i].contentWindow != window)
           continue;

        obj = iframes[i];
        while (obj.offsetParent)  
        {  
            result.left += obj.offsetLeft;  
            result.top += obj.offsetTop;  
            obj = obj.offsetParent;
        }  
    }

    return result;
};

floatingMenu.doFloatSingle = function(item)
{
    this.findSingle(item);

    if (item.updateParentHeight)
    {
        item.menu.parentNode.style.minHeight = 
            item.menu.scrollHeight + 'px';
    }

    var stepX, stepY;

    this.computeParent(item);

    var cornerX = this.calculateCornerX(item);

    var stepX = (cornerX - item.nextX) * item.distance;
    if (Math.abs(stepX) < .5 && item.snap
        || Math.abs(cornerX - item.nextX) <= 1)
    {
        stepX = cornerX - item.nextX;
    }

    var cornerY = this.calculateCornerY(item);

    var stepY = (cornerY - item.nextY) * item.distance;
    if (Math.abs(stepY) < .5 && item.snap
        || Math.abs(cornerY - item.nextY) <= 1)
    {
        stepY = cornerY - item.nextY;
    }

    if (Math.abs(stepX) > 0 ||
        Math.abs(stepY) > 0)
    {
        item.nextX += stepX;
        item.nextY += stepY;
        this.move(item);
    }
};

floatingMenu.fixTargets = function()
{
};

floatingMenu.fixTarget = function(item)
{
};

floatingMenu.doFloat = function()
{
    this.fixTargets();
    for (var i=0; i < floatingArray.length; i++)
    {
        this.fixTarget(floatingArray[i]);
        this.doFloatSingle(floatingArray[i]);
    }
    setTimeout('floatingMenu.doFloat()', 20);
};

floatingMenu.insertEvent = function(element, event, handler)
{
    // W3C
    if (element.addEventListener != undefined)
    {
        element.addEventListener(event, handler, false);
        return;
    }

    var listener = 'on' + event;

    // MS
    if (element.attachEvent != undefined)
    {
        element.attachEvent(listener, handler);
        return;
    }

    // Fallback
    var oldHandler = element[listener];
    element[listener] = function (e)
        {
            e = (e) ? e : window.event;
            var result = handler(e);
            return (oldHandler != undefined) 
                && (oldHandler(e) == true)
                && (result == true);
        };
};

floatingMenu.init = function()
{
    floatingMenu.fixTargets();

    for (var i=0; i < floatingArray.length; i++)
    {
        floatingMenu.initSingleMenu(floatingArray[i]);
    }

    setTimeout('floatingMenu.doFloat()', 100);
};

// Some browsers init scrollbars only after
// full document load.
floatingMenu.initSingleMenu = function(item)
{
    this.findSingle(item);
    this.computeParent(item);
    this.fixTarget(item);
    item.nextX = this.calculateCornerX(item);
    item.nextY = this.calculateCornerY(item);
    this.move(item);
};

floatingMenu.insertEvent(window, 'load', floatingMenu.init);

// Register ourselves as jQuery plugin if jQuery is present
if (typeof(jQuery) !== 'undefined')
{
    (function ($)
    {
        $.fn.addFloating = function(options)
        {
            return this.each(function()
            {
                floatingMenu.add(this, options);
            });
        };
    }) (jQuery);
} 
```

该脚本要求菜单具有#floatdiv id。我创建了我的 div #floatdiv，并在头部添加了以下 javascript 行以使操作开始工作：

```
<script type="text/javascript">  
    floatingMenu.add('floatdiv',  
        {  
             targetLeft: 250,                

            targetTop: 290,                

            snap: true  
        });  
</script> 
```

#floatdiv css 在这里，

```
#floatdiv{
    height:45px;
    width:830px;
    z-index:2;
} 
```

该脚本工作正常。当我向下滚动时，菜单会按指定浮动。但我不希望菜单随着滚动一直浮动。只有当我输入特定的 div 而不是一直滚动时，我才需要触发菜单的浮动。有什么线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T04:52:10.020

这是什么样子？

html

```
<div id="header">HEADER</div>
<div id="content">
    <div id="left">LEFT</div>
    <div id="right">RIGHT</div>
</div>
<div id="footer">FOOTER</div> 
```

js

```
$(function() {
    var $sidebar = $("#right"), 
        $window = $(window),
        rightOffset = $sidebar.offset(),
        rightDelta = $("#footer").offset().top - $("#header").offset().top - $("#header").outerHeight() - $("#right").outerHeight(),
        topPadding = 15;

    $window.scroll(function() {
            $sidebar.stop().animate({
                marginTop: Math.max(Math.min($window.scrollTop() - rightOffset.top + topPadding, rightDelta), 0)
            });
    });

}); 
```

工作[演示](http://jsfiddle.net/jhunlio/wFDYV/9/)

希望这对你有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-26T21:18:39.670

我编写了问题中列出的脚本。

该脚本非常通用，可以使 div 在特定区域内浮动（例如另一个容器 div）。以下是说明：

[http://www.jtricks.com/javascript/navigation/floating/confined_demo.html](http://www.jtricks.com/javascript/navigation/floating/confined_demo.html)

# usb - How can my vhdl code and microblaze co-exist?

> ID：15725135
> 
> 赞同：1
> 
> 时间：2013-03-31T00:41:07.573
> 
> 标签：usb, vhdl, fpga, spartan

Well my problem stated when i had my vhdl code up and running on my Spartan-3a but needed to send and receive data from it to the pc, I need my vhdl code , so i went for a microplaze structure , problem is I cant understand how will my vhdl code and microblaze co-exist at the same time because every time i program fpga with SDK it deletes my vhdl off the fpga and vise versa with ISE, I dont want to use custom peripherals except if this is the only solution. Some people just tell me to just use microblaze hdl files produced by EDK, OK but theny aren't I using an unprogrrammed MicroBlaze??? And do i need to go through all of this just to be able to communicate with my vhdl code through pc(NO I CANT USE R232 since i need a speed of 56Mbit/sec)

So here is what i don't understand: 1-IF you implemented microblaze through hardware(HDL from edk to ISE) , isnt it then an un-proggrammed processor?

2-PEOPLE TELL ME i can let microblaze and my vhdl code see each other through GPIO , again how will i implement GPIO and how to connect it to both microblaze and my vhdl code , and how to program microblaze while it in hardware in this situation.

Please any help , its kinda a mess.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T07:29:33.357

It is not that difficult, but unfortunately Xilinx documentation is not that clear.

What you need to do after you are done with your Microblaze code and you feel comfortable with it, is to create a new project in ISE or the one you already had, then add a new file to the project, but instead of adding a VHDL or Verilog file, you must add the system file from EDK.

After you added your XPS project into ISE, you need to do some manual work in order to make things work for you.

Here are a list of things that needs to be done:

*   You have to create a UCF file that includes all the constraints from EDK
*   You have to make sure that you have enough space inside your FPGA for both the EDK and your own code
*   Synthesize and implement your design using the project in ISE.
*   Program your FPGA from the bit file generated by ISE

In order to communicate between the MB and your own code, you can do it in many different ways, the easiest way is to use the GPIO block from your MB, then connect those signals to your own code on your top level wrapper.

You maybe able to find some useful information on the lab document and lab material from the following Xilinx page: [enter linkXilinx EDK interface class description here](http://www.xilinx.com/university/workshops/embedded-system-design-flow/index.htm)

Accessing the GPIO is pretty simple, you can use the information on this page to get you started: [Reading DIP Switch with MicroBlaze](http://www.fpgadeveloper.com/2011/07/read-dip-switches-from-a-microblaze-application.html)

You may also find this document and related files very useful, it is not for your board, but it covers the exact same thing you are asking for: [Avnet MB tutorial document](http://www3.deis.unibo.it/Staff/FullProf/GNeri/ftproot/Calcolatori%20Elettronici/Calcolatori%20M/Corso/2011-2012/Seminario%20Xilinx/_3_edk_intro_mb_speedway_131.pdf)

I hope this is clear enough.

# cordova - How to display Jquerymobile app differently to mobile and tablet

> ID：15725136
> 
> 赞同：0
> 
> 时间：2013-03-31T00:41:08.217
> 
> 标签：cordova, jquery-mobile, responsive-design

Im building an app with Jquery mobile and Phonegap and my employer wishes that the app displays content differently on an tablet and on an Iphone, especially he wants the app to display an certain form on an Iphone with input field stacked on top of each other and spread out on an tablet since it has more space on the sides. On the tablet it should also be fixed horisontally. Does anyone know some resources to dig deeper into this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T06:12:53.833

have you heard of [Responsive Design](http://en.wikipedia.org/wiki/Responsive_web_design)? This will make use of css [media queries](http://mediaqueri.es/) to display the contents based on the screen size of the device.

jQuery Mobile has some [built in support for responsive design](http://view.jquerymobile.com/1.3.0/docs/intro/rwd.php), but sky is your limit for your innovative designs.

[Check this simple tutorial too.](https://www.ibm.com/developerworks/mobile/library/mo-jquery-responsive-design/)

# python - And-ing , OR-ing for Sets in python

> ID：15725137
> 
> 赞同：0
> 
> 时间：2013-03-31T00:41:12.257
> 
> 标签：python

So I have

```
a=set(["a"])
b=set(["b"]) 
```

`c=a&b` would return a empty set, `c=set([])` But when i type `c = a and b`, why does it give me a `set(["b"])`

What is the "`and`" and "`or`" doing when used in two sets?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-31T00:45:11.177

A few things.

1.  I'd recommend using set literal syntax if you're on Python 2.7 or above. You can just do `a = {"a"}`.
2.  The keywords `and` and `or` are logical operators. They're used for Python's conditional logic. The `|` and `&` operators are bitwise; they are overloaded by the `set()` class. What you should be doing is `a & b`. You can read more here: [http://docs.python.org/2/library/sets.html#set-objects](http://docs.python.org/2/library/sets.html#set-objects)

If you try `a = 5 and 6` you will see the result is `6`. That is how boolean operators work in many programming languages, including Python. It's essentially saying "check if the value on the left evaluates to `True`, if so, return the value on the right."

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-29T04:04:33.967

The answers here regarding `or` and `and` are a little wanting here. It's true that they're boolean operators and have nothing to do with sets, though. They're short-circuit boolean operators and are fairly commonly used as a short cut for assigning values with fallback values.

Here's how it works...

If you have a statement saying `a or b` and you had to evaluate if that whole statement was true, you'd first start by figuring out if `a` was true. If you found `a` *was* true, then you don't need to bother evaluating `b` because true or'ed with anything is always true. On the other hand, if `a` is false, you have to evaluate `b` to determine if the whole statement is false or not. Also, whatever `b` is will be the result of the whole `a or b` statement.

So, `x = a or b` will first test if `a` is true and if it is the whole right side of the statement will become `a`. Likewise, if `a` is false, the whole right side becomes `b` because `b` will determine if `a or b` is true since we know `a` is false.

`and` is also a short circuit operator. With `a and b`, if `a` is false we can stop evaluating and say the whole statement is false and ignore `b`. If `a` is true, the whole statement relies on the boolean value of `b`.

So, `x = a and b` will first test if `a` is true. If `a` is true, then the result of `a and b` can be simplified to `b` and then the statement becomes `x = b`. If `a` is false, then we can stop at `a` and just replace `a and b` with `a` making it `x = a`.

I don't think I've ever seen the use of `and` in this fashion, but it does work.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-31T00:47:33.363

`a and b` is returning `b`. This is boolean logic, not a set intersection. In Python, the following are "falsy" objects: `None`, `False`, `0`, `""`, `[]`, `tuple()`, `set([])`, etc. Since `a` and `b` are both "truthy" objects, `b` is returned from `a and b`.

[http://docs.python.org/2/tutorial/datastructures.html#more-on-conditions](http://docs.python.org/2/tutorial/datastructures.html#more-on-conditions)

One use of this is to initialize a variable like this:

```
def f(x):
    x = x or MyObject() 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-03-31T00:48:38.880

`c=a&b` returns the intersection of the two sets, which in this case is nothing. `c=a and b` uses the standard Python logical operators. So when you say `c=a and b` you are basically saying c=(a is True) and (b is True). Naively, since both a and b in this case are not empty and evaluate to True, you would expect c to be True. However, when you use the logical operators to set a value, Python returns not just True but the value of the last True object, which in this case is b.

# c - C电话簿程序：将文本文件中的光标重新定位到上一行的开头

> ID：15725141
> 
> 赞同：1
> 
> 时间：2013-03-31T00:41:47.160
> 
> 标签：c, cursor, text-files, fseek, fputs

编写一个 C 程序，该程序打开一个名为 phoneList.txt 的文本文件并搜索联系人（名字、姓氏、电话号码），并更新现有联系人的电话号码。我的问题出在更新电话号码程序中。当我使用 fgets 查找匹配名称来更新联系人时，光标位于下一行的开头，也就是在与用户搜索匹配的联系人之后的联系人开头。这是我的代码：

```
#include <stdlib.h>
#include <stdio.h>
#include <string.h>

int main(void){
struct record{
        char firstName[20];
        char lastName[20];
        char phoneNum[15];
    };
    struct record info;
    FILE *fp;
    char line[100];
    char phoneInfo[100];
    char fullName[100];
    char *stream;
    int n = atoi(getenv("CONTENT_LENGTH"));
    fgets(stream, n+1, stdin);  //put query string into stream from stdin
        //SET HTML OUTPUT AND TITLE, TEST CONTENT OF STREAM
    printf("%s%c%c\n", "Content-type:text/html;charset=iso-8859-1",13,10);
    printf("<p>%s</p>", stream);
    sscanf(stream, "firstName=%[^&]&lastName=%[^&]&phoneNum=%s", info.firstName, info.lastName, info.phoneNum);
    strcpy(fullName, info.firstName);
    strcat(fullName, " ");
    strcat(fullName, info.lastName);
    strcpy(phoneInfo, fullName);
    strcat(phoneInfo, " ");
    strcat(phoneInfo, info.phoneNum);
    //strcat(phoneInfo, "\n");
    printf("%s", phoneInfo);
    printf("\n");
        //TEST FORMATTING OF PHONE INFO VAR
    fp = fopen("phoneList.txt", "r+");
    if(fp == NULL){
        printf("Error opening the file.\n");
        return 1;
    }
    while(fgets(line, 99, fp)!=NULL){
        if(strstr(line, fullName)!= NULL){
            //fseek(fp, -(strlen(phoneInfo)+1), SEEK_CUR);
            fputs(phoneInfo, fp);
            printf("Success! Number updated. \n");
            fclose(fp);
            return;
        }
    }
    if(feof(fp)){
        //fputs(phoneInfo, fp);
        printf("goes to here");
    }
    fclose(fp);
    return 0;
} 
```

我有 fseek 评论，因为它的行为很奇怪，具体取决于正在搜索的联系人是否在列表的末尾。我认为这与其中包含 \n 字符的文本文件有关。想知道是否有更好的方法来简单地覆盖与用户搜索匹配的行，或者至少将光标重置到与搜索匹配的行的开头。我在这个网站上做了一堆谷歌搜索和搜索，但我找不到任何我理解如何实现的东西。非常感谢您的帮助！干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T00:54:28.657

至

> 我有 fseek 评论，因为它的行为很奇怪，具体取决于正在搜索的联系人是否在列表的末尾。

```
fseek(fp, -(strlen(phoneInfo)+1), SEEK_CUR); 
```

在最后一行，您应该返回 strlen(phoneInfo)，而不是 strlen(phoneInfo)+1。

因为在其他行中，有一个换行符。但在最后一行，可能没有。您可以按照效率较低的方式对其进行修改：

```
if(line[strlen(line)-1]=="\n"){
    fseek(fp, -(strlen(phoneInfo)+1), SEEK_CUR);
}
else{
    fseek(fp, -strlen(phoneInfo), SEEK_CUR);
} 
```

顺便说一句，只有当 phoneInfo 的长度与 txt 文件中的长度相同时，您的代码才能正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T01:03:42.873

您必须在给定文件流的读取和写入之间进行定位操作。

### ISO/IEC 9899:2011 Section 7.21.5.3`fopen`功能

> ¶7 当文件以更新模式打开时（' `+`' 作为上述模式参数值列表中的第二个或第三个字符），可以在关联的流上执行输入和输出。但是，在没有对`fflush`函数或文件定位函数（`fseek`、 `fsetpos`或`rewind`输入操作遇到文件结尾。

您的代码必须执行`fseek()`某种操作来重新定位文件以进行写入；`fseek()`在继续阅读之前，它还必须在写入之后再做一次。您可能需要在读取该行之前跟踪该行的读取位置（或） `ftell()`，以便您可以再次找到该行的开头。`fseek()``fsetpos()`

此外，鉴于：

```
char line[100]; 
```

您的电话`fgets()`：

```
while (fgets(line, 99, fp)!=NULL){ 
```

是安全的，但您同样可以安全地使用：

```
while (fgets(line, sizeof(line), fp) != NULL) 
```

并使用您分配的所有空间，而不仅仅是 99%。此外，如果您将行长从 100 更改为 256 或 1024 或 4096，您只需更改声明 - 而不是使用变量的位置。

同样，您有：

```
struct record
{
    char firstName[20];
    char lastName[20];
    char phoneNum[15];
};
struct record info;
FILE *fp;
char line[100];
char phoneInfo[100];
char fullName[100];
char *stream;

int n = atoi(getenv("CONTENT_LENGTH"));
fgets(stream, n+1, stdin);  //put query string into stream from stdin 
```

您没有为`stream`指向分配空间；您正在程序中编写和随机位置。

```
 //SET HTML OUTPUT AND TITLE, TEST CONTENT OF STREAM
printf("%s%c%c\n", "Content-type:text/html;charset=iso-8859-1",13,10);
printf("<p>%s</p>", stream);

sscanf(stream, "firstName=%[^&]&lastName=%[^&]&phoneNum=%s",
       info.firstName, info.lastName, info.phoneNum); 
```

这`sscanf()`应该以各种方式升级：

```
if (sscanf(stream, "firstName=%19[^&]&lastName=%19[^&]&phoneNum=%14s",
           info.firstName, info.lastName, info.phoneNum) != 3)
{
    ...sscanf failed...
} 
```

这会强制结构字段的正确长度（请注意，您的变量使用 20 和 15，但格式必须使用 19 和 14 - 这也是溢出的来源），并检查转换都成功了。

顺便说一句，如果新字符串和旧字符串的长度相同，则将新电话号码写在旧电话号码上才是安全的。如果新字符串较短，您需要将其空白填充到旧长度以删除旧号码的最后几位数字。如果新字符串更长，你就会遇到大问题；您将覆盖下一个条目的开头。您必须按照适当的字节数（旧条目和新条目之间的长度差异）对文件的内容进行洗牌。有关可以将数据插入文件中间的代码，请参见[SO 10467711 。](https://stackoverflow.com/questions/10467711)

另请注意，官方对文本文件的限制比对二进制文件的限制更多。然而，其中许多理论多于实践，尤其是在 Unix 上。I/O 系统在文本文件上执行 CRLF 到 NL 映射（这在 Windows 上是一个问题），这是限制的原因之一。

# c++ - c++ 返回自定义结构类型 - 错误

> ID：15725149
> 
> 赞同：0
> 
> 时间：2013-03-31T00:42:25.147
> 
> 标签：c++, pointers, struct, return

我今天开始学习 C++，目前遇到了一些问题。

我有一个称为数据的自定义结构：

```
struct data{
int x, y, l;
}; 
```

它是一个带有 3 个变量的简单结构。

接下来我运行这个递归函数。尽管如此，它做什么并不重要，因为打印出最终的返回语句会产生正确的结果。

```
data finds(int x, int y, int length, string s){
    //cout << length << endl;
    int nx = prev(x, s);
    int ny = next(y, s);
    if(nx != -1 && ny != -1 && s.at(nx) == s.at(ny)){
        finds(nx, ny, length + 2, s);
    }
    else{

        cout << x << y << length << endl;
        data vals;
        vals.x = x;
         vals.y = y;
         vals.l = length;
        return vals;
    }
} 
```

此函数中的 cout 语句产生

```
068 
```

这是我想要的数字。但是，当我尝试像这样打印此函数的结果时：

```
464078426865241 
```

这显然是错误的。

我的问题变成了：我如何正确地返回一个结构来产生正确的值。

此外，您可能需要一些可运行的代码：

```
#include <iostream>
#include <fstream>
#include <string>
using namespace std;
struct data{
    int x, y, l;
};
int next(int i, string s){
    //cout << s;
        //cout << j;
    for(int j = i + 1; j < s.size(); j++){
        if(isalnum(s.at(j))){
            return j;
        }
    }
    return -1;
}

int prev(int i, string s){
    //cout << s;
    for(int j = i - 1; j >= 0; j--){
        //cout << j;
        if(isalnum(s.at(j))){
            return j;
        }
    }
    return -1;
}
data finds(int x, int y, int length, string s){
    //cout << length << endl;
    int nx = prev(x, s);
    int ny = next(y, s);
    if(nx != -1 && ny != -1 && s.at(nx) == s.at(ny)){
        finds(nx, ny, length + 2, s);
    }
    else{

        cout << x << y << length << endl;
        data vals;
        vals.x = x;
         vals.y = y;
         vals.l = length;
        return vals;
    }
}

int main(){
    s = "1233321";
    data val;
    val = finds(3, 3, 2, s);

    cout << val.x << val.y << val.l;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T00:45:21.137

您忘记返回执行递归的函数：

```
return finds(nx, ny, length + 2, s);
^^^^ 
```

否则不这样做会导致未定义的行为。

# android - VelocityTracker 给出随机的看似结果

> ID：15725154
> 
> 赞同：4
> 
> 时间：2013-03-31T00:42:48.873
> 
> 标签：android, android-relativelayout, touch-event

为了更好地理解视图是如何工作的，我正在尝试制作一个`RelativeLayout`我可以拖动和扔的东西。这个想法是捕获`onTouch`事件，设置`RelativeLayout`during的布局参数`ACTION_MOVE`，然后使用 a`Scroller`将视图“投掷”在`ACTION_UP`.

为了跟踪速度，我使用了`VelocityTracker`. 虽然当我拖动视图时视图按预期移动，但它`VelocityTracker`给出了看似随机的结果。

下面是我的手指在屏幕上从左向右滑动的日志片段（两个数字是 x 和 y 速度）。正如你所看到的，有很多负数，y 速度似乎比它应该的大。

有谁知道我可能做错了什么？

```
03-30 20:37:29.857: DEBUG/SlidingListViewRow(21863): ACTION_MOVE    23.123592   11.537558
03-30 20:37:29.873: DEBUG/SlidingListViewRow(21863): ACTION_MOVE    356.74066   55.184505
03-30 20:37:29.888: DEBUG/SlidingListViewRow(21863): ACTION_MOVE    343.06155   43.027973
03-30 20:37:29.904: DEBUG/SlidingListViewRow(21863): ACTION_MOVE    248.62907   32.232735
03-30 20:37:29.927: DEBUG/SlidingListViewRow(21863): ACTION_MOVE    182.43666   22.957638
03-30 20:37:29.943: DEBUG/SlidingListViewRow(21863): ACTION_MOVE    157.40408   54.90605
03-30 20:37:29.959: DEBUG/SlidingListViewRow(21863): ACTION_MOVE    59.81672    15.241951
03-30 20:37:29.974: DEBUG/SlidingListViewRow(21863): ACTION_MOVE    45.65707    -8.753063
03-30 20:37:29.990: DEBUG/SlidingListViewRow(21863): ACTION_MOVE    62.7431 -23.311165
03-30 20:37:30.005: DEBUG/SlidingListViewRow(21863): ACTION_MOVE    82.24246    -20.412537
03-30 20:37:30.029: DEBUG/SlidingListViewRow(21863): ACTION_MOVE    101.6548    4.1870637
03-30 20:37:30.045: DEBUG/SlidingListViewRow(21863): ACTION_MOVE    35.63154    -25.088724
03-30 20:37:30.060: DEBUG/SlidingListViewRow(21863): ACTION_MOVE    -65.35024   8.635846
03-30 20:37:30.076: DEBUG/SlidingListViewRow(21863): ACTION_MOVE    34.84411    12.235493
03-30 20:37:30.091: DEBUG/SlidingListViewRow(21863): ACTION_MOVE    137.96663   -32.02561
03-30 20:37:30.107: DEBUG/SlidingListViewRow(21863): ACTION_MOVE    104.81523   4.6049824
03-30 20:37:30.130: DEBUG/SlidingListViewRow(21863): ACTION_MOVE    -15.846537  -23.924715
03-30 20:37:30.146: DEBUG/SlidingListViewRow(21863): ACTION_MOVE    2.1034415   19.266556
03-30 20:37:30.162: DEBUG/SlidingListViewRow(21863): ACTION_MOVE    20.578733   29.17785
03-30 20:37:30.177: DEBUG/SlidingListViewRow(21863): ACTION_MOVE    -28.217247  -42.907413
03-30 20:37:30.193: DEBUG/SlidingListViewRow(21863): ACTION_MOVE    -0.87727404 -1.170224
03-30 20:37:30.209: DEBUG/SlidingListViewRow(21863): ACTION_MOVE    -24.889711  8.474885
03-30 20:37:30.232: DEBUG/SlidingListViewRow(21863): ACTION_MOVE    153.30855   23.77272
03-30 20:37:30.248: DEBUG/SlidingListViewRow(21863): ACTION_MOVE    44.412945   17.595121
03-30 20:37:30.263: DEBUG/SlidingListViewRow(21863): ACTION_MOVE    -39.40518   -28.735428
03-30 20:37:30.279: DEBUG/SlidingListViewRow(21863): ACTION_MOVE    -58.433273  -2.295834
03-30 20:37:30.295: DEBUG/SlidingListViewRow(21863): ACTION_MOVE    51.650055   -26.379906
03-30 20:37:30.310: DEBUG/SlidingListViewRow(21863): ACTION_MOVE    152.88931   -20.75504
03-30 20:37:30.334: DEBUG/SlidingListViewRow(21863): ACTION_MOVE    16.233286   -44.017315
03-30 20:37:30.349: DEBUG/SlidingListViewRow(21863): ACTION_MOVE    23.231287   18.601854
03-30 20:37:30.365: DEBUG/SlidingListViewRow(21863): ACTION_MOVE    7.3124657   38.14189
03-30 20:37:30.380: DEBUG/SlidingListViewRow(21863): ACTION_MOVE    84.67032    -22.859661
03-30 20:37:30.396: DEBUG/SlidingListViewRow(21863): ACTION_MOVE    22.753403   -6.019523
03-30 20:37:30.412: DEBUG/SlidingListViewRow(21863): ACTION_MOVE    59.714558   -35.091564
03-30 20:37:30.435: DEBUG/SlidingListViewRow(21863): ACTION_MOVE    27.547312   24.507784
03-30 20:37:30.451: DEBUG/SlidingListViewRow(21863): ACTION_MOVE    114.54237   29.865501
03-30 20:37:30.466: DEBUG/SlidingListViewRow(21863): ACTION_MOVE    70.55507    3.2689145
03-30 20:37:30.482: DEBUG/SlidingListViewRow(21863): ACTION_MOVE    -2.4525054  -6.8937516
03-30 20:37:30.498: DEBUG/SlidingListViewRow(21863): ACTION_MOVE    17.924507   -40.815117
03-30 20:37:30.521: DEBUG/SlidingListViewRow(21863): ACTION_MOVE    43.035046   0.5026546
03-30 20:37:30.537: DEBUG/SlidingListViewRow(21863): ACTION_MOVE    95.18336    -11.013772
03-30 20:37:30.552: DEBUG/SlidingListViewRow(21863): ACTION_MOVE    -58.86387   10.808097
03-30 20:37:30.568: DEBUG/SlidingListViewRow(21863): ACTION_MOVE    -15.751452  12.716822
03-30 20:37:30.584: DEBUG/SlidingListViewRow(21863): ACTION_MOVE    6.3607893   -19.160402
03-30 20:37:30.599: DEBUG/SlidingListViewRow(21863): ACTION_MOVE    93.13071    12.679931
03-30 20:37:30.623: DEBUG/SlidingListViewRow(21863): ACTION_MOVE    71.644485   -24.96885
03-30 20:37:30.638: DEBUG/SlidingListViewRow(21863): ACTION_MOVE    -12.482128  18.495268
03-30 20:37:30.654: DEBUG/SlidingListViewRow(21863): ACTION_MOVE    -107.08017  23.484608
03-30 20:37:30.670: DEBUG/SlidingListViewRow(21863): ACTION_MOVE    -1.009377   -20.781479
03-30 20:37:30.685: DEBUG/SlidingListViewRow(21863): ACTION_MOVE    48.203453   0.5582556
03-30 20:37:30.701: DEBUG/SlidingListViewRow(21863): ACTION_MOVE    12.369134   -34.194973
03-30 20:37:30.724: DEBUG/SlidingListViewRow(21863): ACTION_MOVE    20.611326   14.374227
03-30 20:37:30.740: DEBUG/SlidingListViewRow(21863): ACTION_MOVE    120.71236   56.88748
03-30 20:37:30.755: DEBUG/SlidingListViewRow(21863): ACTION_MOVE    149.84518   14.843528
03-30 20:37:30.771: DEBUG/SlidingListViewRow(21863): ACTION_MOVE    -129.18591  -13.255397
03-30 20:37:30.787: DEBUG/SlidingListViewRow(21863): ACTION_MOVE    -110.96849  -42.02827
03-30 20:37:30.802: DEBUG/SlidingListViewRow(21863): ACTION_MOVE    -77.30668   -12.200225
03-30 20:37:30.826: DEBUG/SlidingListViewRow(21863): ACTION_MOVE    44.793446   16.331116
03-30 20:37:30.841: DEBUG/SlidingListViewRow(21863): ACTION_MOVE    30.79781    -47.53295
03-30 20:37:30.857: DEBUG/SlidingListViewRow(21863): ACTION_MOVE    -53.739525  -2.9649315
03-30 20:37:30.873: DEBUG/SlidingListViewRow(21863): ACTION_MOVE    -86.65882   -16.804096
03-30 20:37:30.888: DEBUG/SlidingListViewRow(21863): ACTION_MOVE    47.278873   52.180782
03-30 20:37:30.904: DEBUG/SlidingListViewRow(21863): ACTION_MOVE    25.044767   32.227722
03-30 20:37:30.927: DEBUG/SlidingListViewRow(21863): ACTION_MOVE    40.374264   -65.27872
03-30 20:37:30.927: DEBUG/SlidingListViewRow(21863): ACTION_MOVE    -12.49039   -48.878017 
```

代码：

```
package com.example.SlidingListViewRow;

import android.content.Context;
import android.util.AttributeSet;
import android.util.Log;
import android.view.MotionEvent;
import android.view.VelocityTracker;
import android.widget.FrameLayout;
import android.widget.RelativeLayout;
import android.widget.Scroller;

public class SlidingListViewRow extends RelativeLayout {
    VelocityTracker mVelocityTracker;
    Scroller mScroller = new Scroller(getContext());

    float mStartX, mStartY;
    public SlidingListViewRow(Context context) {
        super(context);
    }

    public SlidingListViewRow(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public SlidingListViewRow(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        if (mVelocityTracker == null) {
            mVelocityTracker = VelocityTracker.obtain();
        }

        switch (event.getAction()) {
            case MotionEvent.ACTION_DOWN:
            {
                mVelocityTracker.clear();

                mScroller.abortAnimation();

                Log.d("SlidingListViewRow", "ACTION_DOWN: " + " x:" + event.getX() + " y:" + event.getY());
                mStartX = event.getX();
                mStartY = event.getY();

                mVelocityTracker.addMovement(event);

                return true;
            }
            case MotionEvent.ACTION_MOVE:
            {
                mVelocityTracker.addMovement(event);
                mVelocityTracker.computeCurrentVelocity(1000);

                float vx = mVelocityTracker.getXVelocity();
                float vy = mVelocityTracker.getYVelocity();
                FrameLayout.LayoutParams lp = (FrameLayout.LayoutParams) getLayoutParams();
                Log.d("SlidingListViewRow", "ACTION_MOVE\t" + vx + "\t" + vy);

                lp.leftMargin = (int)(lp.leftMargin + event.getX() - mStartX);
                lp.topMargin = (int)(lp.topMargin + event.getY() - mStartY);

                setLayoutParams(lp);
                return true;
            }
            case MotionEvent.ACTION_UP:
            {
                mVelocityTracker.computeCurrentVelocity(1000);
                FrameLayout.LayoutParams lp = (FrameLayout.LayoutParams) getLayoutParams();

                Log.d("SlidingListViewRow", "ACTION_UP: " + mVelocityTracker.getXVelocity() + " " + mVelocityTracker.getYVelocity());
                mScroller.forceFinished(true);
                mScroller.startScroll(lp.leftMargin, lp.topMargin,
                        (int) mVelocityTracker.getXVelocity(),
                        (int) mVelocityTracker.getYVelocity(), 1000);

                invalidate();

                mVelocityTracker.recycle();
                mVelocityTracker = null;

                return true;
            }
            case MotionEvent.ACTION_CANCEL:
            {
                mVelocityTracker.recycle();
                mVelocityTracker = null;

            }

        }
        return super.onTouchEvent(event);
    }

    @Override
    public void computeScroll() {
        if (mScroller.computeScrollOffset()) {
            Log.d("SlidingListViewRow", "computeScroll " + mScroller.getCurrX() + " " + mScroller.getCurrY());

            FrameLayout.LayoutParams lp = (FrameLayout.LayoutParams) getLayoutParams();

            lp.leftMargin = mScroller.getCurrX();
            lp.topMargin = mScroller.getCurrY();

            setLayoutParams(lp);

            invalidate();
        }
    }
} 
```

编辑：我想我已经接近了。似乎正在发生的事情是运动事件与视图相关，并且因为我正在移动视图，它们只是在我最初触摸视图的地方抖动。记录`event.getX()`和`event.getY()`，从上到下拖动手指时，我得到以下信息。请注意，x 和 y 几乎总是相同的。所以很明显，这种方法是行不通的。现在的问题是，我该如何绕过它？

```
04-06 10:55:13.460: DEBUG/SlidingListViewRow(29988): ACTION_MOVE: x:174.0 y:241.85272 vx: 0.008770505 vy:7.7523403
04-06 10:55:13.476: DEBUG/SlidingListViewRow(29988): ACTION_MOVE: x:174.0 y:244.04398 vx: -0.0014130835 vy:7.125545
04-06 10:55:13.491: DEBUG/SlidingListViewRow(29988): ACTION_MOVE: x:174.0 y:242.04156 vx: -0.0018627803 vy:-8.498776
04-06 10:55:13.515: DEBUG/SlidingListViewRow(29988): ACTION_MOVE: x:174.0 y:243.98645 vx: -0.0011581925 vy:-10.778463
04-06 10:55:13.530: DEBUG/SlidingListViewRow(29988): ACTION_MOVE: x:174.0 y:243.67465 vx: 0.003123357 vy:-0.96067995
04-06 10:55:13.546: DEBUG/SlidingListViewRow(29988): ACTION_MOVE: x:174.0 y:244.90335 vx: 0.0012589534 vy:20.408503
04-06 10:55:13.562: DEBUG/SlidingListViewRow(29988): ACTION_MOVE: x:174.0 y:245.38507 vx: 0.0031079662 vy:42.45428
04-06 10:55:13.577: DEBUG/SlidingListViewRow(29988): ACTION_MOVE: x:174.0 y:246.9231 vx: 0.00393455 vy:20.763577
04-06 10:55:13.616: DEBUG/SlidingListViewRow(29988): ACTION_MOVE: x:174.0 y:245.3899 vx: 0.0024473427 vy:-15.408336
04-06 10:55:13.632: DEBUG/SlidingListViewRow(29988): ACTION_MOVE: x:174.0 y:246.62701 vx: 1.6782524E-4 vy:12.024636
04-06 10:55:13.648: DEBUG/SlidingListViewRow(29988): ACTION_MOVE: x:174.0 y:247.16913 vx: 0.0032229617 vy:5.3146386 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T21:51:54.940

我得用你的手指看看你的动作，看看数字是否匹配。一些注意事项： - 在某些情况下，模拟器中的结果完全不准确且出乎意料。- 请注意，您没有跟踪指针。如果在某一时刻屏幕上有多个压力点，它们可能会影响速度跟踪器的计算结果。

编辑：你是对的。这些事件与其初始状态下的视图相关（除非您更改其 layoutParams），我不建议这样做。对于您想要做的事情，滚动应该可以完美地工作，这就是您正在做的事情。你想达到什么目的？我们最近发布了一个我过去几个月一直在研究的库，我的第一个方法与你的相似。而是探索这个选项：

```
mScroller.startScroll(sx, sy, dx, dy, duration); 
```

实际上，您拥有的代码似乎足以实现您想要的。您可以避免更改视图的布局参数，这不是那里的目标。这将有助于了解您的目标是什么。检查我们的库，看看它是否更接近： [https ://github.com/6wunderkinder/android-sliding-layer-lib](https://github.com/6wunderkinder/android-sliding-layer-lib)

您可以在此处的应用商店中找到演示应用：https: [//play.google.com/store/apps/details? id=com.slidinglayersample](https://play.google.com/store/apps/details?id=com.slidinglayersample)

让我们从这里重新获得它。

编辑 2：潜入 Android 源代码的 AbsListView 的代码中，我看到了一种对您有用的方法。第 3502 行：

```
mFlingRunnable.startOverfling(-initialVelocity); 
```

mFlingRunnable 是 Fl​​ingRunnable 类的对象，它在同一个 AbsListView 类中定义并从 Runnable 实现（[http://code.metager.de/source/xref/android/1.6/frameworks/base/core/java/android/widget /AbsListView.java](http://code.metager.de/source/xref/android/1.6/frameworks/base/core/java/android/widget/AbsListView.java) - 第 2237 行）。这是一大堆代码。在第 1287 行的 Gallery 类 ( [http://code.metager.de/source/xref/android/1.6/frameworks/base/core/java/android/widget/Gallery.java ) 中还有另一个示例。](http://code.metager.de/source/xref/android/1.6/frameworks/base/core/java/android/widget/Gallery.java)

The idea is to use a Runnable as a means of something that re-runs on every frame recalculating and drawing the position of the flinged object.

This might go too complex for your goal. Another idea would be to take the velocity from the velocity tracker on MotionEven.UP or CANCEL and create an animation of the position of the object calculating the destination based on the last velocity registered by the VelocityTracked: sending the object further or nearer depending on the velocity at the time the user move her finger up.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-03-25T14:15:10.497

I struggled with same problem. You are on right track that translating your view affects velocity tracker computation. To fix the problem please call

```
MotionEvent.offsetLocation(diffX, diffY) 
```

where diffX, diffY are corresponding to the offset you made on layout params - so diffX in your case would be event.getX() - mStartX. Please also add motion event to tracker as last line of handling ACTION_MOVE, after you applied the offset. So your ACTION_MOVE handling should be:

```
case MotionEvent.ACTION_MOVE:
                    {

                        float vx = mVelocityTracker.getXVelocity();
                        float vy = mVelocityTracker.getYVelocity();
                        FrameLayout.LayoutParams lp = (FrameLayout.LayoutParams) getLayoutParams();
                        Log.d("SlidingListViewRow", "ACTION_MOVE\t" + vx + "\t" + vy);

                        lp.leftMargin = (int)(lp.leftMargin + event.getX() - mStartX);
                        lp.topMargin = (int)(lp.topMargin + event.getY() - mStartY);

                        setLayoutParams(lp);
                        event.offsetLocation(event.getX() - mStartX, event.getY() - mStartY);
                        mVelocityTracker.addMovement(event);
                        mVelocityTracker.computeCurrentVelocity(1000);
                        return true;
                    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-18T22:31:01.740

I had the exact same problem: I was translating the view while tracking velocity.

To avoid having the velocity mis-calculated due to translating the view, I used `AnimatorProxy.wrap(yourView).translateX(42);` from nineoldandroids (also available in action bar sherlock). This will allow you to translate your view without affecting velocity tracking.

# java - 添加到 JPanel 然后添加到 JFrame 时图形未显示

> ID：15725166
> 
> 赞同：3
> 
> 时间：2013-03-31T00:45:02.320
> 
> 标签：java, swing, graphics, jpanel, paintcomponent

我正在为我的计算机科学课创建一个过桥游戏，我们需要创建问题的图形表示。图形表示由 BridgeCanvas 类绘制。该类扩展了从 JComponent 扩展而来的 Canvas 类。

我知道 BridgeCanvas 正在正确绘制图形，因为当我将 BridgeCanvas 对象直接添加到 JFrame 时，它​​会正确显示，但是当我先将 BridgeCanvas 放入 JPanel 然后将其添加到 JFrame 时，它​​不会显示（全部我得到的是一个空白帧）。我的一位同学说这可能是因为我使用的是 Mac。我也在netbeans中这样做。

这是 BridgeCanvas 类（主要方法也包含在该类中）：

```
public class BridgeCanvas extends Canvas {

// Initializes the background, river, bridge, and character graphics    
public BridgeCanvas(State state) {
    super(state);

    background = new RoundRectangle2D.Double(0, 0, 400, 400, 40, 40);

    bridge = new GeneralPath();
    bridge.moveTo(100, 175);
    bridge.curveTo(200, 120, 200, 120, 300, 175);
    bridge.lineTo(300, 225);
    bridge.curveTo(200, 170, 200, 170, 100, 225);
    bridge.closePath();

    river = new GeneralPath();
    river.moveTo(150, 0);
    river.curveTo(50, 100, 150, 200, 150, 200);
    river.curveTo(225, 300, 150, 400, 150, 400);
    river.lineTo(250, 400);
    river.curveTo(325, 300, 250, 200, 250, 200);
    river.curveTo(150, 100, 250, 0, 250, 0);
    river.closePath();

    AffineTransform transform = new AffineTransform();
    transform.setToTranslation(25, 25);

    // generateShapeFromText is method used to create shapes from numbers.

    P1 = (GeneralPath) generateShapeFromText(new Font(Font.MONOSPACED, Font.BOLD, 32), "P1");
    P1 = (GeneralPath) P1.createTransformedShape(transform);
    P2 = (GeneralPath) generateShapeFromText(new Font(Font.MONOSPACED, Font.BOLD, 32), "P2");
    transform.setToTranslation(25, 100);
    P2 = (GeneralPath) P2.createTransformedShape(transform);
    FL = (GeneralPath) generateShapeFromText(new Font(Font.MONOSPACED, Font.BOLD, 32), "F");
    P5 = (GeneralPath) generateShapeFromText(new Font(Font.MONOSPACED, Font.BOLD, 32), "P5");
    P10 = (GeneralPath) generateShapeFromText(new Font(Font.SANS_SERIF, Font.BOLD, 32), "P10");

}

public void paintComponent(Graphics g) {
    Graphics2D g2 = (Graphics2D) g;
    super.paintComponent(g); 
    g2.setFont(new Font(Font.MONOSPACED, Font.BOLD, 32));
    BridgeState state = (BridgeState) getState();

    g2.setColor(new Color(0, 140, 0));
    g2.fill(background);
    g2.setColor(new Color(0, 0, 200));
    g2.fill(river);
    g2.setColor(new Color(169, 69, 19));
    g2.fill(bridge);
    g2.setColor(Color.BLACK);
    g2.fill(P1);
    g2.fill(P2);

}

private RoundRectangle2D.Double background;
private GeneralPath bridge;
private GeneralPath river;
private GeneralPath P1;
private GeneralPath P2;
private GeneralPath FL;
private GeneralPath P5;
private GeneralPath P10;

public static void main(String[] args) {
    JFrame frame = new JFrame();
    BridgeState state = new BridgeState(Position.WEST, Position.WEST, Position.WEST, Position.WEST, Position.WEST, 0);
    BridgeCanvas canvas = new BridgeCanvas(state);
    JComponent panel = new JPanel();
    panel.add(canvas);
    panel.setLayout(new FlowLayout());
    panel.setOpaque(false);
    panel.setSize(new Dimension(440, 440));

    frame.setPreferredSize(new Dimension(440, 440));
    frame.add(panel);

    frame.setVisible(true);
    frame.pack();
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T00:46:21.340

Look at the size of your BridgeCanvas object. If you add it to the JPanel and the JPanel uses its default FlowLayout, then the JComponent derived object will be at most 1 by 1 pixel in size and thus while it has been created, added and displayed, nothing worthwhile will be visible.

In fact this can easily be tested by (temporarily) tucking a `getSize()` method in your BridgeCanvas's `paintComponent(...)` method, a method which will only be called if the object is displayed:

```
public void paintComponent(Graphics g) {

    // TODO: delete line below!
    System.out.println("BridgeCanvas Size: " + getSize());

    Graphics2D g2 = (Graphics2D) g;
    super.paintComponent(g); 
    g2.setFont(new Font(Font.MONOSPACED, Font.BOLD, 32));

    // .... etc...

} 
```

A possible solution: override BridgeCanvas's `getPreferredSize()` method, and have it return a Dimension that holds the size you wish it to actually be.

Note: you'll want to avoid calling `setSize()` on anything, and you'll also want to avoid (per [notes](https://stackoverflow.com/q/7229226/230513) Swing expert Jeanette/kleopatra) calling `setPreferredSize()` since this setting can be changed by the code that uses your BridgeCanvas object.

# c++ - __int128 error when compiling 32 bit

> ID：15725167
> 
> 赞同：8
> 
> 时间：2013-03-31T00:45:03.003
> 
> 标签：c++, c, gcc, gcc4.8

```
c:\...random.h|106|error: expected unqualified-id before '__int128' 
```

When I'm compiling a 32 bit program, the above is the error I get. I'm using [http://sourceforge.net/projects/mingwbuilds/](http://sourceforge.net/projects/mingwbuilds/)

Why? My code compiled fine with 4.7.2 but I wanted to update to 4.8 for the bug fixes and it gets rid of the 0 used as null value for pointer warnings when there are no zeros.

Many of the bug fixes I want. It compiles my x64 ones just fine on Windows.

Is there a way to get it to compile x32 applications?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-01-10T00:31:04.880

__int128 is protected by

> !defined(**STRICT_ANSI**) && defined(_GLIBCXX_USE_INT128)

So, you could either use -ansi (in case your code is strictly ansi c++ complaint), I faced errors in linker due to the fact that the linker unable to find the 32bit libs.

> _GLIBCXX_USE_INT128

is defined in "lib/gcc/x86_64-w64-mingw32/4.8.1/include/c++/x86_64-w64-mingw32/bits/c++config.h" which I am pretty sure was generated by the autoconfigure based on the system the tool chains are built.

You better download the 32bit version on mingw gcc (binary) package and install them too.

# xml - How to write condition in XML Schema?

> ID：15725171
> 
> 赞同：1
> 
> 时间：2013-03-31T00:45:29.503
> 
> 标签：xml, schema, conditional, conditional-statements, restriction

Is it possible to write condition in XML schema? I need to write restriction for start and end time. So that difference between start and end time must be greater than 1:00 hour. I am not sure how to do that? Sorry for my english i am not native speaker and thanks for help in advance.

```
 <?xml version='1.0' ?>
  <course xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:noNamespaceSchemaLocation="schema.xsd">
  <footnote></footnote>
  <sln>10637</sln>
  <prefix>ACCTG</prefix>
  <crs>230</crs>
  <lab></lab>
  <sect>01</sect>
  <title>INT FIN ACCT</title>
  <credit>1.0</credit>
  <days>TU,TH</days>
  <times>
     <start>7:45</start>
     <end>9:00</end>
  </times>
  <place>
      <bldg>TODD</bldg>
      <room>230</room>
  </place>
  <instructor>B. MCELDOWNEY</instructor>
  <limit>0112</limit>
  <enrolled>0108</enrolled>
</course> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T09:45:52.297

If start and end were of type duration, you could write

Since they aren't, you will have to convert them to durations first:

(I'm assuming your format is HH:MM)

And then you'll have to find an XSD 1.1 processor, since xs:assert is only available with XSD 1.1\. There are currently two XSD 1.1 processors available, Saxon and Xerces.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T01:11:16.753

No, XML Schema is not sufficient for this. You need something like Schematron. A Schematron schema can be translated into an XSLT that validates XML documents against the schema.

# c++ - 1 个字符的字符串文字是否曾经优化为简单的 char 类型文字？

> ID：15725172
> 
> 赞同：7
> 
> 时间：2013-03-31T00:45:54.567
> 
> 标签：c++, char, newline, string-literals

通常在使用 C++ 编码时，我会`cout`用换行符 ( `\n`) 结束语句。但是，我的直觉一直是将这个换行符表示为字符串文字: `"\n"`，即使它是单个字符并且可以更有效地表示为字符文字 ( `'\n'`)。例如：

```
cout << "The value of var is " << var << "\n"; 
```

有*很多*代码都有这种现象。所以，问题如下：

1.  表示换行符常量的两种不同方式的效率有**什么不同吗？**我不关心在生成的程序的执行中产生任何实际差异（我想这将是微不足道的）；而是让我感到困扰的是，一些效率，无论多么微不足道，都可能无缘无故地丢失。

2.  如果字符串文字版本效率较低，编译器是否会将其优化为字符常量版本，因为两者提供完全相同的行为？

3.  我也熟悉`std::endl`。文档说“当需要一个简单的换行符时，这个操纵器经常被错误地使用，导致缓冲性能很差。” 并指向[本文](http://gcc.gnu.org/onlinedocs/libstdc++/manual/bk01pt11ch25s02.html)以获取更多信息。但是，那篇文章指出，提到的“性能差”仅适用于文件 I/O，并且`endl`用于写入屏幕实际上可能会提高性能。这有什么关系？

我搜索了 C++ 标准库，但找不到`<<`运算符相关重载的实现。我在以下位置找到了声明`ostream.tcc`：

```
extern template ostream& operator<<(ostream&, char);
extern template ostream& operator<<(ostream&, const char*); 
```

但是没有关于机制如何在实现中归结的线索。

这更像是一个理论问题，所以我对阅读“两者之间没有*实际*区别”不感兴趣。我知道。我只是想知道是否有任何区别以及编译器如何处理它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T00:54:22.040

They are probably optimized to one string (per compilation unit) - most compilers will "merge strings of the same content".

I'd expect there to be very little practical difference, other than the fact that you pass a pointer to a single char string.

To your concrete questions:

1.  Yes, there is a slight difference, as a `char *` will require some indirection and thus generate a few extra instructions to be executed. For console output (rather than output to file) it's not important, as scrolling the console, even in full-screen text mode is > 100x more instructions.
2.  Doubt it.
3.  So `std::endl` will flush the buffer, which does indeed reduce output to files, because partial sectors or blocks are being written to the file, which increases the system call overhead. If you use `"\n"`, the file is not being flushed until the buffer itself is filled, which would be at the very least 512 bytes, possibly as much as several tens of kilobytes. But as for answer #1, the console output performance will be more dependent on the speed that the screen can scroll.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T00:52:33.857

The different between string literal `\n` and `endl` is that:

`\n` is a string literal that get appended to stdout. `endl` will also append the newline character to stdout, however, it will also flush the stdout buffer. Therefore, it may take more processing. Other than this, there should be no practical difference.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T00:49:11.737

我强烈怀疑它，因为它改变了内存布局（一个有一个空终止符，另一个没有），而且因为它会涉及改变文字的实际类型（并且，通过扩展，改变被调用的函数）。因此，在绝大多数情况下，这将是无效的转变，对极少数情况下的帮助还不够。

That said, if the compiler does enough aggressive inlining (inlining the function itself and the constant data into the function), you might end up with effectively the same code. For example, Clang compiles the following:

```
#include <iostream>
using namespace std;

int main() {
    cout << "X" << "\n";
    cout << "Y" << '\n';
} 
```

into this:

```
movq    std::cout@GOTPCREL(%rip), %rbx
leaq    L_.str(%rip), %rsi
movq    %rbx, %rdi
movl    $1, %edx
callq   std::basic_ostream<char, std::char_traits<char> >& std::__ostream_insert<char, std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&, char const*, long)
leaq    L_.str1(%rip), %rsi
movq    %rbx, %rdi
movl    $1, %edx
callq   std::basic_ostream<char, std::char_traits<char> >& std::__ostream_insert<char, std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&, char const*, long)
leaq    L_.str2(%rip), %rsi
movq    %rbx, %rdi
movl    $1, %edx
callq   std::basic_ostream<char, std::char_traits<char> >& std::__ostream_insert<char, std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&, char const*, long)
leaq    -9(%rbp), %rsi
movb    $10, -9(%rbp)
movq    %rbx, %rdi
movl    $1, %edx
callq   std::basic_ostream<char, std::char_traits<char> >& std::__ostream_insert<char, std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&, char const*, long)
xorl    %eax, %eax
addq    $8, %rsp
popq    %rbx
popq    %rbp 
```

As you can see, inlining has made the two cases nearly identical. (And, in fact, the `'\n'` case is slightly more complex because the character has to be put on the stack.)

# asp.net-mvc - 为什么升级到 MVC 4 后我仍然在对象浏览器中看到 MVC 3.0 引用？

> ID：15725178
> 
> 赞同：0
> 
> 时间：2013-03-31T00:46:48.883
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4, .net-assembly

我将一个 asp.net-mvc 网站升级到 asp.net-mvc 4，我注意到的一件事是，在对象浏览器中我仍然看到引用了 MVC 3.0（以及 4.0），但我浏览了我的所有项目和所有参考的是 4.0 版本。（见下面的截图）

![在此处输入图像描述](https://i.stack.imgur.com/aXSX9.png)

我重新启动/重新启动等认为这可能是一些缓存问题，但它仍然出现。

关于为什么仍然会出现在那里或者无论如何要找出引用它的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T00:52:12.593

如果您引用了一个不同的程序集，而该程序集又引用了 System.Web.Mvc.dll v3.0，就会发生这种情况。

# android - Set page title of WebView from fragment

> ID：15725179
> 
> 赞同：1
> 
> 时间：2013-03-31T00:46:52.913
> 
> 标签：android, android-webview, actionbarsherlock, android-viewpager

I have a `ViewPager`, with each view being a `WebView`. I'd like, if the user clicks on a link in one of the `WebViews`, to set the title of the `Actionbar` to the current web page.

I was hoping I could use `shouldOverrideUrlLoading` to do that, but the page title is always the previous page. So if a user clicks on link 1, then link 2, and link 3\. On page 3 the title of link 2 is being shown in the `Actionbar`.

If I put the title setting code in `onPageFinished`, the page title is being set to the next view of the `ViewPager`, due to the `ViewPager` executing the previous/next views for performance.

**Fragment**

```
public class Browser extends SherlockFragment {

    private OnBrowserSetTitle mBrowserSetTitle;

   @Override
    public void onAttach(Activity act) {
        super.onAttach(act);
        mBrowserSetTitle = (OnBrowserSetTitle)act;
    }

    @Override
    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);

        activity = getActivity();

        setHasOptionsMenu(true);

        mWebView = (WebView)getView().findViewById(R.id.webview);
        mWebView.loadUrl("http://www.google.com");

        mWebView.setWebViewClient(new WebViewClient() {

            public void onPageFinished(WebView view, String url) {

            }

             @Override
             public boolean shouldOverrideUrlLoading(WebView view, String url) {
                  view.loadUrl(url);
                  if (view.getTitle() != null && view.getTitle().length() > 0)
                  {
                      mBrowserSetTitle.onBrowserSetTitle(mTitle);
                  }

                 return true;
             }            
        });
    }
} 
```

**Activity**

```
public class BrowserPager extends SherlockFragmentActivity implements Interfaces.OnBrowserSetTitle {

    @Override
    public void onCreate(final Bundle icicle)
    {    
        super.onCreate(icicle);

        setContentView(R.layout.browser_pager);
    }

    @Override
    public void onBrowserSetTitle(String title) {
        getSupportActionBar().setTitle(title);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T00:56:04.177

Change `onBrowserSetTitle` to have the following definition:

```
@Override
public void onBrowserSetTitle(String title, View view) {
    if (mViewPager.getCurrentItem() == mViewPager.getAdapter().getItemPosition(view)) {
        getSupportActionBar().setTitle(title);
    }
} 
```

And then call `onBrowserSetTitle` from `onPageFinished` like so:

```
@Override
public void onPageFinished(WebView view, String url) {
    if (view.getTitle() != null && view.getTitle().length() > 0) {
        mBrowserSetTitle.onBrowserSetTitle(mTitle, view);
    }
} 
```

# xcode - 我可以将 Xcode 项目设为只读，即阻止它修改文件吗？

> ID：15725185
> 
> 赞同：1
> 
> 时间：2013-03-31T00:48:15.010
> 
> 标签：xcode, xcode4.6, readonly

我正在开发一个在 Emacs 中编辑但在 Xcode 中调试的 iOS 项目。我偶尔会不小心在 Xcode 中编辑源文件，所以我想防止这种情况发生。我不能让文件本身只读，因为我需要编辑它们。有没有办法让 Xcode 编辑器将它们视为只读并阻止我编辑它们？

我偶尔会使用 Xcode 来编辑*项目*，例如添加和删除文件。我想阻止编辑文件只是 Xcode 的*文件编辑器。*所以，我需要一些只适用于文件编辑器的东西，或者可以很容易地打开和关闭的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T17:15:55.940

只需打开终端并锁定源文件。

```
chmod a-w source_folder 
```

Here is youtube screencast: [http://youtu.be/tB-BhqlDAdE](http://youtu.be/tB-BhqlDAdE)

Works exactly like what you expected !

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T17:44:41.717

You could give the source folder readonly permissions for your GUI login user and read-write permissions for some other user you just use for terminal/emacs sessions.

* * *

Edit:

Comments:

> i use my emacs to do lots of other things that i want to keep doing as my normal user, though. i also occasionally do want Xcode to edit the project, e.g. adding and removing files. it's just Xcode's file editor that i want to prevent from editing files.

Okay then lets flip my solution: Run Xcode as a different user that only has readonly access:

```
!#/bin/bash
su readonlyuser
/Applications/Xcode.app/Contents/MacOS/Xcode 
```

And then use emacs from your normal session. If you need Xcode to have readwrite access you'll need to quit it and re-open it normally. It's a pain but I can't think of any way around it besides some sort of nifty menu bar app that toggles the permissions on the folder to give your readonlyuser write access. You should also give the readonlyuser readwrite access to the xcodeproj bundle and any other Xcode project metadata.

To make this a little less ugly you could wrap that bash script in an AppleScript or Automator Action, export it as an application, and give it the same icon as Xcode but with a little indicator so you know it's the readonlyuser one. Then you can stick it in your dock or whatever.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-30T06:05:13.973

Xcode does not have a readonly browsing mode!

To prevent yourself from accidentally modifying files:

1.  Create a disk image of your project directory by using the Disk Utility.

2.  Mount the disk image file.

3.  Open the project from the disk image file.

This way you can't accidentally modify your original source files while browsing them with Xcode.

# sql - 如何查询通过自引用多对多表连接的不同实体组？

> ID：15725188
> 
> 赞同：4
> 
> 时间：2013-03-31T00:48:45.133
> 
> 标签：sql, django, data-modeling

试图弄清楚如何查询通过自引用多对多表连接的不同实体组。整个下午都在戳它，以为我会在这里问一下，看看其他人是否有一些想法。

例如，一个 Person 有一组朋友，而这些组是排他的（即组之间没有重叠——如果你愿意的话，是一堆派系）。表结构可能如下所示：

```
person
| id | name |
| 1  | bob  |
| 2  | frank |
| 3  | chuck |
| 4  | nancy |
| 5  | alice |
| 6  | sally |

cliques
| from_person_id | to_person_id |
|       1        |      2       |
|       1        |      3       |
|       2        |      1       |
|       2        |      3       |
|       3        |      1       |
|       3        |      2       |
|       4        |      5       |
|       4        |      6       |
|       5        |      4       |
|       5        |      6       |
|       6        |      4       |
|       6        |      5       | 
```

（Bob 是 Frank 和 Chuck 的朋友，Frank 是 Bob 和 Chuck 的朋友，Chuck 是 Bob 和 Frank 的朋友，等等）

我可以得到一堆与每个人的朋友相关的集合，但不知道如何将其归结。最终，我真正想要的是一个返回不同集团成员集的查询，例如

```
| cliques |
| 1, 2, 3 |
| 4, 5, 6 | 
```

但是，当然，除非我使用 group_concat (MySQL) 或 array_agg (PostgreSQL) 之类的东西，否则 SQL 不会那样工作。我并不严格反对这种方法，但我更愿意避免引入特定于后端的实现（我实际上使用的是 Django 的 ORM，但不想分散这些细节的注意力）。

我的问题是：

*   尝试以这种方式建模事物时，我是否在吠叫错误的树？
*   有没有办法在调用代码中不诉诸迭代来组装不同的派系？我不是要求每个 clique 有一行，因为这需要特定于 db 的聚合，但可能需要生成的 id-per-clique 和一组 (clique_id, member_id) 元组，然后我可以在调用代码中组装它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T22:44:20.110

如果您正在寻找连接的子图，这是一种方法。

您可以通过其中任何节点的最小 id 来表征连接子图。

从存储子图 id 的表开始，例如：

```
create table subgraphids (
     personid int,
     subgraphid int
); 
```

初始化它：

```
insert into subgraphids(personid, subgraphid)
    select personid, min(subgraphid)
    from (select from_person_id as personid,
                 least(from_person_id, to_person_id) as subgraphid
          from cliques
          union all
          select to_person_id, least(from_person_id, to_person_id)
          from cliques
         ) t
    group by personid; 
```

现在你有了试探性的子图。要更新它们，您可以使用类似的查询：

```
update subgraphid
    set subgraphid = (select min(s.subgraphid)
                      from cliques c join
                           subgraphid s
                           on c.from_person_id = s.personid or
                              c.to_person_id = s.personid
                      where subgraphid.personid = clique.from_person_id or
                            subgraphid.personid = click.to_person_id
                     ); 
```

重复此操作，直到没有更新任何行。您可以明确检查该条件：

```
select count(*)
from subgraphid
where subgraphid > (select min(s.subgraphid)
                    from cliques c join
                         subgraphid s
                         on c.from_person_id = s.personid or
                            c.to_person_id = s.personid
                    where subgraphid.personid = clique.from_person_id or
                          subgraphid.personid = click.to_person_id
                   ); 
```

这将在您的原始图中找到连接的子图。迭代需要在 SQL 之外的调用代码中进行。

# graph-algorithm - 检测二分图

> ID：15725189
> 
> 赞同：1
> 
> 时间：2013-03-31T00:48:49.633
> 
> 标签：graph-algorithm, bipartite

我只是在创建一个算法来检测二分图，但我想到了一些我不确定是否算作二分图的图，尽管我的算法说它是。

图表就像

```
(A)--(B)

(C) 
```

所以这有 3 个节点，但只有`A`和之间有 1 条边`B`。这真的是双向的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T19:44:33.337

是的，您的示例图确实是二分的。

参见，例如，在介绍性句子中陈述的[维基百科文章......](http://en.wikipedia.org/wiki/Bipartite_graph)

> 在图论的数学领域中，二分图（或二分图）是一个图，其顶点可以分为两个不相交的集合 U 和 V，使得每条边都将 U 中的一个顶点连接到 V 中的一个顶点；也就是说，U 和 V 都是独立的集合。等效地，二分图是不包含任何奇数长度循环的图。

有两种方法可以划分此图（“{A,C}, {B}”或“{B,C}, {A}”），这将满足二分图所需的条件。

二分图不需要是连通图。

# annotations - 防止为 @Transient 字段生成 getter/setter

> ID：15725190
> 
> 赞同：1
> 
> 时间：2013-03-31T00:48:52.593
> 
> 标签：annotations, javabeans, spring-roo

Spring Roo 有一个[@RooJavaBean](http://static.springsource.org/spring-roo/org.springframework.roo.annotations/apidocs/org/springframework/roo/addon/javabean/RooJavaBean.html)注解，它为非瞬态字段生成 AspectJ getter 和 setter。问题是它也会为瞬态场生成它们。我在 Asset.java 中有这个：

```
@Transient
private Logger log = Logger.getLogger(this.getClass()); 
```

我在 Asset_Roo_JavaBean.aj 中有以下内容：

```
public Logger Asset.getLog() {
    return this.log;
}

public void Asset.setLog(Logger log) {
    this.log = log;
} 
```

即使一个字段是瞬态的，我想您仍然应该能够使用 getter 和 setter 访问它，但是为什么文档对`gettersByDefault`注释字段这么说：

> 是否为此类中声明的每个非瞬态字段生成 getter（默认为 true）

有没有另一种方法可以阻止它在瞬态字段上生成方法，以便将它们视为私有属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-29T07:56:27.730

您使用的是哪个版本的 Spring Roo？根据[ROO-3426 问题](https://jira.spring.io/browse/ROO-3426)JIRA 条目，应使用 version 修补该错误`1.2.5.RELEASE`。

1.) 我建议升级你的 Roo，它应该可以解决问题。

2.) 一定要检查是否导入`javax.persistence.Transient`。

# ruby-on-rails-3 - heroku 处理请求时出现意外错误：没有要加载的文件

> ID：15725192
> 
> 赞同：0
> 
> 时间：2013-03-31T00:49:15.540
> 
> 标签：ruby-on-rails-3, heroku, jruby

运行 Windows，ruby 1.9.2p290 (2011-07-09) [i386-mingw32]，rails 3.2.11，在本地运行正常，但在 Heroku 上运行

> 处理请求时出现意外错误：没有要加载的文件

有问题的文件是“时间”和“日期”和“Yaml”

更改了应用程序代码

```
require 'Time' 
```

到

```
require 'time' 
```

这解决了问题。

怀疑是由于 Heroku 运行 JRuby 对“require”区分大小写可能与 [http://jira.codehaus.org/browse/JRUBY-6076有关](http://jira.codehaus.org/browse/JRUBY-6076)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T21:03:00.590

有问题的 JIRA 票证用于解析 Java 包名称，而不是 Ruby 库名称。

如果 MRI 位于区分大小写的文件系统上，则 MRI 也会以这种方式运行：

```
$ cat Hello.rb 
def foo
  "UPPER"
end
$ cat hello.rb 
def foo
  "lower"
end
$ ruby2.0 -v -I . -r hello -e 'p foo'
ruby 2.1.0dev (2013-04-01 trunk 40028) [x86_64-darwin12.3.0]
"lower"
$ ruby2.0 -v -I . -r Hello -e 'p foo'
ruby 2.1.0dev (2013-04-01 trunk 40028) [x86_64-darwin12.3.0]
"UPPER" 
```

我的建议是不要假设底层文件系统不区分大小写。

# android - 滑动以关闭 Android 微调器

> ID：15725195
> 
> 赞同：0
> 
> 时间：2013-03-31T00:49:23.407
> 
> 标签：android, android-spinner, swipe-gesture

是否可以滑动以关闭 Android 微调器项目。如果是这样，怎么做？我似乎无法在网上找到专门用于滑动关闭 + 微调器的资源

# wpf - ItemContainterStyle 中的数据绑定 - WPF - MVVM Light

> ID：15725201
> 
> 赞同：0
> 
> 时间：2013-03-31T00:50:37.813
> 
> 标签：wpf, data-binding, custom-controls, mvvm-light, itemcontainerstyle

我正在创建一个带有使用网格的 ItemContainer 的自定义 ListBox。目标是将每个项目添加到特定的列、行，并具有特定的行跨度。这些数字在 ObservableCollection ScheduledCourses 中设置为可绑定属性。在 DataTemplate 上，我能够指定 DataType，然后能够从集合中进行绑定。但我无法在 Style 上指定 DataType。如何设置 BlockPlacement 中的值以绑定所需的属性？

PS。我正在使用 MVVM Light。

```
<UserControl.Resources>
    <vm:ViewModelLocator x:Key="Locator" d:IsDataSource="True" />
    <CollectionViewSource x:Key="CoursesByDay" Source="{Binding ScheduledCourses}">
        <CollectionViewSource.GroupDescriptions>
            <PropertyGroupDescription PropertyName="MeetsOn" />
        </CollectionViewSource.GroupDescriptions>
    </CollectionViewSource>

    <DataTemplate x:Key="ScheduleBlock" DataType="vm:ScheduleBlockViewModel">
        <userControls:ScheduleBlock />
    </DataTemplate>

    <ItemsPanelTemplate x:Key="ScheduleDayGrid">
        <!--  Replace with Schedule Day Grid  -->
        <Grid Name="ScheduleDayGrid"
              Width="400"
              Initialized="ScheduleDayGridInitialized"
              ShowGridLines="True" />
    </ItemsPanelTemplate>

    <Style x:Key="BlockPlacement" TargetType="ListBoxItem">
        <Setter Property="Grid.Column" Value="{Binding Path=ScheduledCourses[].TimeSlotIndex}" />
        <Setter Property="Grid.Row" Value="{Binding ScheduledCourses[].StartTimeIndex}" />
        <Setter Property="Grid.RowSpan" Value="{Binding ScheduledCourses[].DurationIndex}" />
        <Setter Property="VerticalContentAlignment" Value="Top" />
        <Setter Property="Grid.VerticalAlignment" Value="Stretch" />
    </Style>
</UserControl.Resources>
<UserControl.DataContext>
    <Binding Mode="OneWay"
             Path="ScheduleGrid"
             Source="{StaticResource Locator}" />
</UserControl.DataContext> 
```

# c# - C# 文件正被另一个程序使用

> ID：15725203
> 
> 赞同：0
> 
> 时间：2013-03-31T00:50:41.457
> 
> 标签：c#, file-io

```
System.IO.File.CreateText(@"C:\\ProgramData\\Password Manager\\pwd.dat"); 
```

这使得文件完美。

```
System.IO.File.WriteAllLines(@"C:\\ProgramData\\Password Manager\\pwd.dat", pwd); 
```

但是这条线出错了

> “该进程无法访问文件 'C:\ProgramData\Password Manager\pwd.dat'，因为它正被另一个进程使用。”

有没有办法在写入文件之前关闭文件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T00:54:22.513

你不需要使用`CreateText`. 只需调用`WriteAllLines`，它将为您创建文件。目前，由返回的流`CreateText`保留了它创建的文件，这就是引发错误的原因。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-31T00:54:49.193

File.CreateText 不仅创建文件，而且打开它并返回一个流来写入文件。
您随后的调用发现被您自己阻止的文件

尝试

```
StreamWriter sw = File.CreateText(@"C:\\ProgramData\\Password Manager\\pwd.dat");
sw.Close();
sw.Dispose(); 
```

或者干脆

```
using(File.CreateText(@"C:\\ProgramData\\Password Manager\\pwd.dat"))  {} 
```

（[using 语句](http://msdn.microsoft.com/en-us/library/yh598w02.aspx)负责关闭和处理文件）

however, this is completely unnecessary seeing your code because [File.WriteAllLines](http://msdn.microsoft.com/en-us/library/system.io.file.writealllines.aspx) creates the file if it doesn't exist.

# java - java中的并发循环

> ID：15725207
> 
> 赞同：0
> 
> 时间：2013-03-31T00:50:51.547
> 
> 标签：java, multithreading, concurrency

我想运行两个共享方法的线程来打印出一些东西。我想要这个作为输出：

```
a b a b a b 
```

第一个线程打印一个'a'，第二个线程打印一个'b'。我设法打印了一次，但我不能包含一个适当的循环来交换打印件。

我写了这段代码来执行这个：

```
public void run() {
    while(i<10) {
        synchronized(this) {
            while (turn!=turn) {
                try {
                    turn=!turn;
                    wait();
                    sleep(10);
                }
                catch(InterruptedException ie){}
            }

            printThreadOutput();
            turn=!turn;
            i++;
            notifyAll();
        }
    }
} 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T01:20:16.250

一个简单的解决方案是使用[java.util.concurrent.locks.Lock](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/locks/Lock.html)，它将执行所需的所有等待和通知操作：

```
public class ThreadTest {

    private static final Lock lock = new ReentrantLock();

    public static final void main(String[] args) {
        Runnable aRun;
        Runnable bRun;

        aRun = new Runnable() {
            public void run() {
                while (true) {
                    lock.lock();
                    System.out.println("a");
                    try {
                        Thread.sleep(1000);
                    } catch (InterruptedException e) {
                        Thread.currentThread().interrupt();
                    }
                    lock.unlock();
                }
            }
        };

        bRun = new Runnable() {
            public void run() {
                while (true) {
                    lock.lock();
                    System.out.println("b");
                    try {
                        Thread.sleep(1000);
                    } catch (InterruptedException e) {
                        Thread.currentThread().interrupt();
                    }
                    lock.unlock();
                }
            }
        };

        Thread aThread = new Thread(aRun);
        Thread bThread = new Thread(bRun);
        aThread.start();
        bThread.start();
    }

} 
```

如果不使用监视器，您可以这样做，但正如@noahz 谦虚地指出的那样，它使用了效率不高的[自旋锁。](http://en.wikipedia.org/wiki/Spinlock)

```
public class ThreadTest {

    private static volatile Boolean isATurn = true;

    public static void main(String[] args) {
        Runnable aRun;
        Runnable bRun;

        aRun = new Runnable() {
            public void run() {
                while (true) {
                    while (!isATurn) {
                    }
                    System.out.println("a");
                    isATurn = false;
                }
            }
        };

        bRun = new Runnable() {
            public void run() {
                while (true) {
                    while (isATurn) {
                    }
                    System.out.println("b");
                    isATurn = true;
                }
            }
        };

        Thread aThread = new Thread(aRun);
        Thread bThread = new Thread(bRun);
        aThread.start();
        bThread.start();
    }

} 
```

据我所知，这可以保证不会出现死锁，但是如果其中一个线程没有终止，则可能会出现饥饿，因为另一个线程将等待它。但是，对于像这样的简单示例，这不应该构成问题。监视器也更喜欢使用轮询，但涉及程度略高。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T01:29:51.747

现在是凌晨 3.30 点，我想睡觉。这就是我想出的：

```
class TurnHolder {

    private volatile int currentTurn;

    public void setNextTurn() {
    this.currentTurn = currentTurn^1;
    }

    public int getCurrentTurn() {
    return currentTurn;
    }
}

class Printer implements Runnable {

    private String toPrint;
    private TurnHolder sharedResource;
    private int turn;

    Printer(String toPrint, TurnHolder sharedResource, int turn) {
    this.toPrint = toPrint;
    this.sharedResource = sharedResource;
    this.turn = turn;
    }

    @Override
    public void run() {

    while (true) {
        synchronized (sharedResource) {
        if (sharedResource.getCurrentTurn() != turn)
            try {
            sharedResource.wait();
            } catch (InterruptedException e) {
            e.printStackTrace();
            }
        System.out.println(toPrint);
        try {
            Thread.sleep(2000);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
        sharedResource.setNextTurn();
        sharedResource.notifyAll();
        }
    }

    } 
```

运行它的一种方法是：

```
TurnHolder sharedResource = new TurnHolder();

Printer printerA = new Printer("a", sharedResource, 0);
Printer printerB = new Printer("b", sharedResource, 1);

new Thread(printerA).start();
new Thread(printerB).start(); 
```

这样，您`sharedResource`将保留转弯的记忆并在其上进行同步，这样您就可以做与该转弯有关的事情，然后您可以切换转弯。这`Thread.sleep`只是为了让您以不错的速度看到打印。这`System.out.println(toPrint);`是你的`printThreadOutput();`

PS：欢迎提出如何改进代码的建议。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T01:20:11.740

1.  让其中一个线程在此之前 5 秒休眠。它将明确哪个是线程顺序。
2.  循环没有执行，`while`因为它的条件总是`false`。完全删除内部`while`，你不需要它。
3.  `turn`不需要该变量。和将使线程轮流`synchronize`。`Thread.sleep(5)`
4.  `println`抓的时候至少放一些`InterruptedException`。

# ruby-on-rails - 如何忽略特定路径？

> ID：15725208
> 
> 赞同：0
> 
> 时间：2013-03-31T00:50:59.067
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routing, livereload

我的最后一行`routes.rb`是这样的：

```
resources :tags, path: "", except: [:index, :new, :create], constraints: { :id => /.*/ } 
```

它基本上处理所有/标记名。

问题是我正在尝试使用 livereload，[机架中间件版本](https://github.com/johnbintz/rack-livereload)，正在发生的事情是它正在向 /livereload 发送 ping。

但是，上面的路由拦截了它并将它发送到我的`TagsController`....所以我的日志文件看起来像这样：

```
Started GET "/livereload" for 192.168.1.1 at 2013-03-30 19:49:13 -0500
Processing by TagsController#show as HTML
  Parameters: {"id"=>"livereload"}
  Tag Load (3.3ms)  SELECT "tags".* FROM "tags" WHERE "tags"."name" = 'livereload' LIMIT 1
  Tag Load (2.0ms)  SELECT "tags".* FROM "tags" WHERE "tags"."id" = $1 LIMIT 1  [["id", "livereload"]]
Completed 404 Not Found in 9ms

ActiveRecord::RecordNotFound (Couldn't find Tag with id=livereload):
  app/controllers/tags_controller.rb:16:in `show' 
```

那么我如何告诉该路由忽略所有`/livereload`请求，或者我如何以另一种方式处理呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T08:44:14.187

You can use a custom constraint on your route to tell to ignore any special route, since its a simple rule you can do it inline, you can check for **req.env["PATH_INFO"]** or you you can also check for **req.params[:id]**

example 1:

```
resources :tags, path: "", except: [:index, :new, :create], constraints: lambda{ |req| req.env['PATH_INFO'] != '/livereload' && req.params[:id] =~ /.*/ } 
```

example 2:

```
resources :tags, path: "", except: [:index, :new, :create], constraints: lambda{ |req| req.params[:id] != '/livereload' && req.params[:id] =~ /.*/ } 
```

# c++ - 类不存在默认构造函数，但我已经声明了一个

> ID：15725221
> 
> 赞同：2
> 
> 时间：2013-03-31T00:53:49.940
> 
> 标签：c++, default-constructor

我的代码中出现了两次这种情况，我不确定为什么它抱怨我有一个头文件“Scene.h”：

```
#pragma once

#include <iostream>
#include <string>

#include "Image.h"
#include "InteractiveObject.h"

using namespace std;

    class Scene
    {
    public:
        int id;
        string title;
        Image* backgroundImage;
        InteractiveObject interactiveObjects[ 1 ];

        D3DXVECTOR3 pos;

        Scene( int id_, string title_, Image* backgroundImage_ )
            : 
            id( id_ ),
            title( title_ ),
            backgroundImage( backgroundImage_ )
        {
            this->pos.x = 0.0f;
            this->pos.y = 0.0f;
            this->pos.z = 0.0f;
        }
    }; 
```

我有另一个名为“InteractiveObject.h”的文件：

```
#pragma once

#include <iostream>
#include <string>

#include "Image.h"
enum { CHARACTER, OBJECT };

class InteractiveObject
{
public:
    int id;
    int type;

    float x;
    float y;
    float z;

    D3DXVECTOR3 pos;

    string title;
    Image* theImage;
    InteractiveObject( int id_, string title_, Image* theImage_, int type, float x, float y, float z )
        : 
        id( id_ ),
        title( title_ ),
        theImage( theImage_ )
    {
        this->pos.x = x;
        this->pos.y = y;
        this->pos.z = z;
    }
}; 
```

我的智能感知抱怨有：

> 错误 1 ​​错误 C2512: 'InteractiveObject' : 没有合适的默认构造函数可用 c:\users\james\documents\visual studio 2012\projects\game\game\scene.h 26 1 Game

考虑到两者都有默认构造函数的任何想法？

编辑：： - - - - -

好的，感谢这里的每个人，如果我这样做，我可以看到：;

```
InteractiveObject( int id_, string title_, Image* theImage_, int type_, float x_, float y_, float z_ )
        : 
        id( id_ ),
        title( title_ ),
        theImage( theImage_ ),
        type( type_ ),
        x( x_ ),
        y( y_ ),
        z( z_ )
    { 
```

问题消失了。我不确定这是不是最好的方法，我肯定会在片刻后哭着回来。您能否投票选出您认为最简洁的答案？

我目前的要求是让场景包含在我的游戏构造函数中声明的一定数量的交互式对象，并迭代以绘制到屏幕上：

“游戏.cpp”：

```
Game::Game( HWND hWnd, Mouse &mouse  )
    :
    gfx( hWnd ),
    mouse( mouse )
{
    gfx.d3dDevice->SetRenderState( D3DRS_ALPHABLENDENABLE, TRUE);

    //--------------Scene 0---------------
    scenes[ 0 ] = Scene( 0, "La barra de funk", new Image( gfx, "Images/Scene/Area/Bar/Background.jpg", 1024, 768, FALSE ) );
    scenes[ 0 ].interactiveObjects[ 0 ] = new InteractiveObject( 0, "la rockola de muse", new Image( gfx, "Images/Scene/Area/Bar/InteractiveObjects/Jukebox.png", 428, 586, TRUE ), OBJECT, 300.0f, 200.0f, 1.0f );
};

Game::~Game()
{
    // Delete scenes array

    /*for( int a = 0; a < sizeof( scenes ) / sizeof( Scene ); a++ )
    {
        scenes[ a ] = NULL;
        delete scenes[ a ];
    }*/
};

void Game::Go()
{
    gfx.Begin();
    ComposeFrame();
    gfx.End();
    gfx.Present();
};

void Game::ComposeFrame()
{
    for each ( Scene currentScene in scenes )
    {
        currentScene.backgroundImage->sprite->Begin( D3DXSPRITE_ALPHABLEND );
        currentScene.backgroundImage->sprite->Draw( currentScene.backgroundImage->gTexture, NULL, NULL, &currentScene.pos, 0xFFFFFFFF );
        currentScene.backgroundImage->sprite->End();

        for each ( InteractiveObject currentInteractiveObject in currentScene.interactiveObjects )
        {
            currentInteractiveObject.theImage->sprite->Begin( D3DXSPRITE_ALPHABLEND );
            currentInteractiveObject.theImage->sprite->Draw( currentScene.backgroundImage->gTexture, NULL, NULL, &currentInteractiveObject.pos, 0xFFFFFFFF );
            currentInteractiveObject.theImage->sprite->End();
        }       
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T00:58:23.450

您的类具有*非默认*构造函数（即带参数的构造函数）。它们没有*默认*构造函数，它接受零参数。

将对象放入 C 数组的要求之一是对象是默认可构造的。否则，编译器无法构造它们——当你声明一个数组时，编译器需要默认构造数组中的所有实例（无法将构造函数参数传递给数组中的对象）。

To fix this, you either need to make sure you never use those classes in arrays (e.g. you can replace all object arrays by arrays of pointers, if you wish, but then memory management becomes harder). Alternatively, just add simple default constructors which initialize all of the class members to reasonable values.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-31T01:00:14.120

A default constructor doesn't require any arguments passed to it, either because it doesn't take any arguments, or there are default values for all of the named parameters. From your code, the `InteractiveObject` class' constructor required parameters, but it's also constructed in your `Scene` class when you call

```
InteractiveObject interactiveObjects[ 1 ]; 
```

You could either dynamically create this (using `new`), or add a non-argument constructor to the `InteractiveObject` class.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T00:58:18.007

自从：

```
InteractiveObject interactiveObjects[ 1 ]; 
```

它将调用`default constructor`类`InteractiveObject`。但是，您提供的构造函数不符合以下条件`default constructor`：

```
1\. it has arguments
2\. all of its arguments does not have default values. 
```

因此构造函数不能被视为`default constructor`，从某种意义上说，它不能在不提供任何参数的情况下被调用。出于这个原因，编译器无法`default constructor`为你生成一个，所以你有那个错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-31T00:59:29.640

```
InteractiveObject( int id_, string title_, Image* theImage_, int type, float x, float y, float z ) 
```

You need to put these arguments on object declaration.

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-31T00:58:03.520

这里：

```
InteractiveObject interactiveObjects[ 1 ]; 
```

您正在声明一个 InteractiveObjects 数组，但`InteractiveObject`没有用于创建对象的零参数默认构造函数。

相反，您需要在运行时使用`new`.

# java - How do you rotate a polygon?

> ID：15725227
> 
> 赞同：4
> 
> 时间：2013-03-31T00:54:36.103
> 
> 标签：java, polygon

I'm attempting to rotate a polygon around a fixed axis using the rotate method in Graphics2d. However, after each rotation, the bounding box coordinates of the polygon don't seem to be updating--only the graphical representation. How might I go about fixing this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T00:57:20.650

You are using a library method that simply does a graphical transform. It is working the way it was designed. To get the new coordinates, you will have to do the math.

EDIT: Here's a link to another question that has all the math you need.

[Drawing a Rotated Rectangle](https://stackoverflow.com/questions/644378/drawing-a-rotated-rectangle?rq=1)

# mysql - Using reserved words in column names

> ID：15725233
> 
> 赞同：7
> 
> 时间：2013-03-31T00:55:26.470
> 
> 标签：mysql, sql, database

this is some simple code but I just don't know why I can't use this word as the entity of the table

```
CREATE TABLE IF NOT EXISTS users(
key INT PRIMARY KEY NOT NULL AUTO_INCREMENT,
username VARCHAR(50) NOT NULL,
); 
```

I realized I can't use "key" if I use key the mysql will ask me to check the syntax but if I use "id" or any others the table will be created.

Anyone know how I can create the entity name into key? Not something important since I can just use id instead of key but since I found this error I wonna see if there's a way to get it work.

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-31T00:57:33.040

You can still use `key` if you want to. Just wrap it with backtick,

```
CREATE TABLE IF NOT EXISTS users
(
    `key` INT PRIMARY KEY NOT NULL AUTO_INCREMENT,
    username VARCHAR(50) NOT NULL,
); 
```

but as an advise, refrain from using any reserved keyword to avoid future problems. `:)`

*   [MySQL Reserved Keywords List](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-11-05T06:33:19.057

# Trailing Underscore

Simple solution: **Add a trailing underscore** to every name.

The SQL spec [SQL:2011](https://en.wikipedia.org/wiki/SQL:2011) explicitly promises to never use a trailing underscore on any keyword, neither now nor in the future.

Example: `key_`

See [my answer](https://stackoverflow.com/a/19758863/642706) to a similar question, *h2 database column name is reserved word*.

# websocket - 让 phantomjs、socket.io 和 gevent-socketio 一起工作

> ID：15725236
> 
> 赞同：2
> 
> 时间：2013-03-31T00:56:08.133
> 
> 标签：websocket, socket.io, phantomjs, gevent-socketio

我正在尝试构建一个利用 Phantomjs 1.7（模拟浏览器）的应用程序并创建一个 Python 后端来触发一些事件并收集数据。

问题是 Phantomjs 和我的 Python 程序这两个进程需要双向通信。问题是在里面`page.evaluate`我不能：

*   传递任何复杂的对象，例如“fs”（从标准输入读取）
*   创建一个 WebSocket 以连接到我的 Python 脚本
*   任何其他形式的进程间通信都受到限制

所以我的解决方案很简单：

*   将 socket.io js 注入我正在查看的页面。
*   连接到我使用 gevent-socketio 实现的 python 服务器

当我尝试从 page.evaluate 内部连接时，我得到：

```
Unexpected response code: 404 
```

这是 Phantomjs 脚本：

```
var page   = require("webpage").create();
page.onAlert = function(msg) { console.log("alert>>>" + msg); };
page.onConsoleMessage= function(msg) { console.log(msg); };

page.open("http://google.com", function() {
  page.injectJs("socket.io.js");
  page.evaluate(function() {
    var socket = new io.Socket();
    socket.connect('localhost:5051/test');
    socket.on('connect',function() {
      console.log('Client has connected to the server!');
    });
    // Add a connect listener
    socket.on('signal',function(data) {
      console.log('Received a signal: ',data);
    });
    // Add a disconnect listener
    socket.on('disconnect',function() {
      console.log('The client has disconnected!');
    });
    // Sends a message to the server via sockets
    socket.send("kakalq");
  });
    //phantom.exit();
}); 
```

这是服务器端 Python 脚本：

```
from socketio import socketio_manage
from socketio.server import SocketIOServer
from socketio.namespace import BaseNamespace

class MyNs(BaseNamespace):
  def initialize(self):
    print "connected"
    self.emit('connect')

  def disconnect(self, *args, **kwargs):
    print "diconnecting"
    super(MyNs, self).disconnect(*args, **kwargs)

 def signal(self, message):
   print "received signal", message
   self.emit("okay", "this will be sent to js")

 def start(environ, start_response):
   if environ['PATH_INFO'].startswith('/test'):
     return socketio_manage(environ, { '/test': MyNs })

if __name__ == "__main__":
  server = SocketIOServer( ('', 5051), start,policy_server=False )
  server.serve_forever() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T09:54:45.740

我对它为什么不起作用的猜测是 PhantomJS 只支持旧的、已弃用的 WebSockets 版本。我们必须等待几个月才能让 PhantomJS 2.0 支持当前版本的 WebSockets。

# java - Hotkey/Shortcut for JButton

> ID：15725237
> 
> 赞同：5
> 
> 时间：2013-03-31T00:56:40.003
> 
> 标签：java, swing, shortcut, hotkeys, enter

I have the following code of JButton in Java:

```
enterButton = new JButton("Enter");
enterButton.setMnemonic(KeyEvent.VK_ENTER); // Shortcut: Alt + Enter 
```

The question is simply: Instead of having the shortcut "Alt+Enter", how do I set a shortcut "Enter"?

I simply prefer pressing "Enter" instead of holding "Alt" and pressing "Enter"

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-31T01:01:51.850

I had the same issue: I have a form an whenever I am edditing a field I want to press enter for it to fire the actionPerformed event.

I fixed it with this: The `JPanel` the button and the rest of the form is located on is called `content`: `content.getRootPane().setDefaultButton(enterButton);`

This keeps the button always selected so when you press enter, its corresponding actionPerformed event fires (remember to add an ActionListener to it!)

Hope this helps you!

Kind regards,
Héctor

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-31T00:58:42.040

You can make a button respond to the Enter keyword, via a special technique, one that only works for the Enter key, and to do this you want to get the JRootPane of the top level window that displays the button and call `setDefaultButton(myButton)` on this root pane.

i.e.,

```
enterButton = new JButton("Enter")

// after the enterButton has been added to the GUI and the GUI displayed, call:
JRootPane rootPane = SwingUtilities.getRootPane(enterButton); 
rootPane.setDefaultButton(enterButton); 
```

Otherwise for non-enter keys, you'd need to use Key Bindings which is do-able, but would require a bit more effort.

# jsf-2 - 使用 Google Chrome 的 Primefaces TabView 错误

> ID：15725238
> 
> 赞同：0
> 
> 时间：2013-03-31T00:56:44.210
> 
> 标签：jsf-2, primefaces

Primefaces TabView (showcase) 似乎在使用 Chrome (v.26.x.xx) 时存在错误。
在第一次刷新中，所有选项卡都呈现在第一个选项卡下，只有单击其他选项卡中的一个，状态才会恢复到正确的状态。

链接： http: [//www.primefaces.org/showcase/ui/tabview.jsf](http://www.primefaces.org/showcase/ui/tabview.jsf)

有没有人找到解决方法？

# mysql - 选择具有最高计数的不同字符串列表的查询

> ID：15725247
> 
> 赞同：0
> 
> 时间：2013-03-31T00:58:27.497
> 
> 标签：mysql, count, distinct

*   我有一个只有 3 列的表 -`uid/timestamp/tag`

*   在每一行中，标签列存储一个单词 ( `string`)

我想查询该表以选择按顺序提及最多的前 10 个不同标签。

如果可能的话，我还想为每一行添加一个计数，表示该行所代表的标签被提及的次数。

我知道这必须是可能的，但我对如何去做却一无所知。谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T01:01:40.417

您需要使用[`COUNT()`](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_count)which 是一个*聚合函数*并将它们分组`TAG`。然后将结果按降序排列每个标签的计数。

```
SELECT  tag, COUNT(*) totalCount
FROM    tableName
GROUP   BY tag
ORDER   BY totalCount DESC
LIMIT   10 
```

# jquery - JQuery Slider; How to change button name? (Eg; 'Open', 'Close')

> ID：15725250
> 
> 赞同：0
> 
> 时间：2013-03-31T00:59:20.463
> 
> 标签：jquery

**Live View:** [https://tornhq.com/WorkingOn/InteractiveMap/Replaced-With-Divs.html](https://tornhq.com/WorkingOn/InteractiveMap/Replaced-With-Divs.html)

* * *

**JQuery Code to Slide & Tab Switcher**

```
$(function () {
    $("#tab-3").toggle(function () {
        $('#Map-Selection-Info').animate({marginLeft: '978px'}, 1000);
        $('#ATWI80C-Map').animate({width: '900px' }, 1000);
    }, function () {
        $('#Map-Selection-Info').animate({marginLeft:'670px'}, 1000);
        $('#ATWI80C-Map').animate({width: '600px' }, 1000);
    });
    $('#tab-content div').hide();
    $('#tab-content div.tab-content').last().fadeIn().find('*').show();

    $('#Info-Side-Tabs li').click(function() {
        $('#Info-Side-Tabs li').removeClass("current");
        $(this).addClass("current");
        $('#tab-content div').hide();
        var href = $(this).find('a').attr("href");
        $('#tab-content div' + href).fadeIn().find('*').show();
    });
}); 
```

* * *

**Li of the Show/Hide**

```
<li rel="redeye16.png" id="tab-3"> <a href="#">Hide This</a> </li> 
```

* * *

I would like that when you click to hide the side container, the image rel changes to another image (none of the iamge have been made yet) and for the name of 'Hide This' to become 'Show This'. I would also like the JQuery Tab Switcher I have to not show an empty contain, instead to do the same as what it does, changing the class to current, however keeping the content of the tab you were on, and then if you decide to reopen the current switches back.

Thank you for any time spend in answering my questions.

Best Regards,

Tim

**Edit:**

```
$(function () {
    $("#tab-3").toggle(function () {
        $('#Map-Selection-Info').animate({marginLeft: '978px'}, 1000);
        $('#ATWI80C-Map').animate({width: '900px' }, 1000);
        $(this).find('a').text('Open Me');
        // Problem is Below
        $(this).css("background-image","url(http://www.theaa.com/images/insurance/tick-trans.gif) no-repet");
    }, function () {
        $('#Map-Selection-Info').animate({marginLeft:'670px'}, 1000);
        $('#ATWI80C-Map').animate({width: '600px' }, 1000);
        $(this).find('a').text('Close Me');
        // Problem is Below
        $(this).css("background-image","url(http://www.ecvet-projects.eu/Admin/images/icons/Red_X.gif) no-repet");
    });
    $('#tab-content div').hide();
    $('#tab-content div.tab-content').last().fadeIn().find('*').show();

    $('#Info-Side-Tabs li').click(function() {
        $('#Info-Side-Tabs li').removeClass("current");
        $(this).addClass("current");
        $('#tab-content div').hide();
        var href = $(this).find('a').attr("href");
        $('#tab-content div' + href).fadeIn().find('*').show();
    });
}); 
```

**Edit:**

**The Li CSS:**

```
.tab-list li a {
    display: block;
    float: left;
    line-height: 25px;
    padding-left: 30px;
    font-family: sans-serif;
    font-size: 13px;
    background-image: url(http://www.ecvet-projects.eu/Admin/images/icons/Red_X.gif);
    background-repeat: no-repeat;
    background-position: 12px center;
    color: #444;
    text-decoration: none;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T01:08:53.523

In your `toggle()` access the link and go from there:

```
$(function(){
    var mapsInfo = $("#Map-Selection-Info"), atwMap = $("#ATWI80C-Map"), tabContent = $("#tab-content div");
    $("#tab-3").toggle(function(){
        mapsInfo.animate({marginLeft: "978px"}, 1000, function(){
            $(this).css("background-image", "url(http://www.theaa.com/images/insurance/tick-trans.gif)").find("a").text("Open Me");
        });
        atwMap.animate({width: "900px"}, 1000);
    }, function(){
        mapsInfo.animate({marginLeft: "670px"}, 1000, function(){
            $(this).css("background-image", "url(http://www.ecvet-projects.eu/Admin/images/icons/Red_X.gif)").find("a").text("Close Me");
        });
        atwMap.animate({width: "600px"}, 1000);
    });
    tabContent.hide();
    $("#tab-content div.tab-content").first().fadeIn().find('*').show();
    $("#Info-Side-Tabs li").on("click", function(){
        var href = $(this).find("a").attr("href");
        $("#Info-Side-Tabs li").removeClass("current");
        $(this).addClass("current");
        tabContent.hide();
        $("#tab-content div" + href).fadeIn().find("*").show();
    });
}); 
```

In order to fix that, throw this in your CSS file:

```
#tabs-3 {
    /* other styling... */
    background-repeat: no-repeat;
    background-position: 15% 10%;
} 
```

And I updated the JavaScript one last time that uses a callback function on the animation to make everything look pretty.

# mysql - 插入/更新具有两个索引的表

> ID：15725257
> 
> 赞同：0
> 
> 时间：2013-03-31T01:01:19.410
> 
> 标签：mysql

我有一张这样的桌子：

```
column1 - primary
column2 - unique
column3 
```

我的查询应该是这样的：

*   如果 column1 和 column2 不同则插入
*   如果两者都匹配，则更新 column3
*   如果只有一个匹配，则什么也不做

我已经阅读过，`INSERT ... ON DUPLICATE KEY UPDATE ...`但我的第三个请求似乎并不顺利。在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T01:21:32.630

如果两者不同，这似乎可以插入，如果两者相同，则更新。这使用“1”作为插入/更新的所有三个列值 (1,1,1)：

```
insert into yourtable 
select distinct 1,1,1
from yourtable
where column1 <> 1 and column2 <> 1;

update yourtable
set column3 = 1
where column1 = 1 and column2 = 1; 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!2/b81d7/1)

# javascript - 具有可变数据的 Highcharts

> ID：15725265
> 
> 赞同：1
> 
> 时间：2013-03-31T01:03:02.360
> 
> 标签：javascript, django, python-2.7

我正在尝试将 Highcharts 与 Django 一起使用——但我对 Javascript 一点也不熟悉。

我正在绘制不同大学的排放清单。用户将选择他们想要显示的大学，因此返回的数据量会有所不同。

我已将每个 Django 变量转换为 Javascript 变量，以便可以访问它们：

```
{% for college in collegelist %}
    <script>
    function removeCommas(str) {
        return(str.replace(/,/g,''));
    }
    collegearray[collegecounter] = [parseInt(removeCommas("{{ college.stationarycombustion }}")), parseInt(removeCommas("{{ college.mobilecombustion }}")), parseInt(removeCommas("{{ college.processemissions }}")), parseInt(removeCommas("{{ college.fugitiveemissions }}")), parseInt(removeCommas("{{ college.scope1 }}")) ];
    collegecounter++;
    </script>
{% endfor %} 
```

如您所见，collegearray 包含包含大学所有数据（Stationary Combustion、Mobile Combustion 等）的数组。

然后 Highcharts Javascript 函数包含如下赋值：

```
series: [{
            name: 'College 1',
            data: [83.6, 78.8, 98.5, 93.4, 106.0]

        }, {
            name: 'College 2',
            data: [83.6, 78.8, 98.5, 93.4, 106.0]

        }, 
```

但是，由于要绘制的数据量会有所不同，基本上我希望能够编写的内容相当于：

```
counter = 0
for college in collegelist:
    name: collegename[counter],
    data: collegearray[counter]
    counter += 1 
```

但是，Javascript 一直抱怨我不能使用 for 循环以这种方式处理分配。有没有办法打破 Javascript，使用 Django 的模板条件 {% for college in college list %}，并将输出分配回 Javascript 函数？还是其他方式？我是否让这变得比需要的更困难？

谢谢你的建议，布雷特

根据请求，模型：我应该注意我没有使用 Django-Chartit，所以我没有直接从模型构建图表。

```
class Inventories(models.Model):
    institution = models.CharField(max_length=100)
    publicationdate = models.CharField(max_length=10)
    stationarycombustion = models.CharField(max_length=100)
    mobilecombustion = models.CharField(max_length=100)
    processemissions = models.CharField(max_length=100)
    fugitiveemissions = models.CharField(max_length=100)
    scope1 = models.CharField(max_length=100)
    purchasedelectricity = models.CharField(max_length=100)
    purchasedheating = models.CharField(max_length=100)
    purchasedcooling = models.CharField(max_length=100)
    purchasedsteam = models.CharField(max_length=100)
    scope2 = models.CharField(max_length=100)
    commuting = models.CharField(max_length=100)
    airtravel = models.CharField(max_length=100)
    solidwaste = models.CharField(max_length=100)
    wastewater = models.CharField(max_length=100)
    paperemissions = models.CharField(max_length=100)
    scope2td = models.CharField(max_length=100)
    scope3 = models.CharField(max_length=100)
    carbonoffsets = models.CharField(max_length=100)
    totalrecs = models.CharField(max_length=100)
    landsequestration = models.CharField(max_length=100)
    compostsequestration = models.CharField(max_length=100)
    gsf = models.CharField(max_length=100)
    residentialspace = models.CharField(max_length=100)
    studentfte = models.CharField(max_length=100)

    def __unicode__(self):
        return self.institution+", "+self.publicationdate 
```

# regex - 正则表达式匹配相等的差异线

> ID：15725266
> 
> 赞同：1
> 
> 时间：2013-03-31T01:03:07.080
> 
> 标签：regex, diff

我有差异，我后处理并想要弄平相等的线条。这是一个例子：

```
Foo
-Bar
+Bar
Baz 
```

我想把相等的线压扁，这样它们就不会再出现在差异中了。这很简单

```
-(.*)\n\+\1\n 
```

当我有多行匹配时，问题就开始了，例如：

```
-Foo
-Bar
+Foo
+Bar 
```

有任何想法吗？还是我不应该做一个正则表达式并编写一个简单的解析器？还是已经存在？

如果有更好的解决方案，一些背景故事。我正在比较两个文件以查看它们是否相同。遗憾的是，输出几乎相同，但需要一些后处理，例如

```
-on line %d
+on line 8 
```

所以我正在经历并将已知字符串转换为其他已知字符串，然后我试图检查差异是否为空或仍然不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T03:52:43.713

我之前对`diff`输出进行了一些更简单的分析，所以我有一个 Perl 脚本，它为我提供了一个开始的基础。考虑以下两个数据文件，`file.1`和`file.2`.

### 文件.1

```
Data

Foo
Bar 1
Baz

I want to squash the lines down that are equal so they don't show up in the diff anymore. This is pretty simple with

-(.*)\n\+\1\n

The problems start when I have multi-line matches like:

Foo 2
Bar 2

Etc. 
```

### 文件.2

```
Data

Foo
Bar 10
Baz

I want to squash the lines down that are equal so they don't show up in the diff anymore. This is pretty simple with

-(.*)\n\+\1\n

The problems start when I have multi-line matches like:

Foo 20
Bar 20

Etc. 
```

### 原始差异输出

原始统一`diff`输出为：

```
--- file.1  2013-03-30 18:58:35.000000000 -0700
+++ file.2  2013-03-30 18:58:48.000000000 -0700
@@ -1,7 +1,7 @@
 Data

 Foo
-Bar 1
+Bar 10
 Baz

 I want to squash the lines down that are equal so they don't show up in the diff anymore. This is pretty simple with
@@ -10,7 +10,7 @@

 The problems start when I have multi-line matches like:

-Foo 2
-Bar 2
+Foo 20
+Bar 20

 Etc. 
```

### 后处理输出

现在，经过后期处理，所有的数字字符串都被替换为`##`，所以后期处理的文件如下所示：

```
--- file.1  2013-03-30 18:58:35.000000000 -0700
+++ file.2  2013-03-30 18:58:48.000000000 -0700
@@ -1,7 +1,7 @@
 Data

 Foo
-Bar ##
+Bar ##
 Baz

 I want to squash the lines down that are equal so they don't show up in the diff anymore. This is pretty simple with
@@ -10,7 +10,7 @@

 The problems start when I have multi-line matches like:

-Foo ##
-Bar ##
+Foo ##
+Bar ##

 Etc. 
```

这是程序的输入，它将分析差异是否仍然真实。

为了真正有用，我们必须隔离标题行（`---`和`+++`）并保留它们。对于开始的每个差异块`@@`，我们需要捕获 和 的相邻行，`-`并且`+`：

1.  检查和的行数是否`+`相同`-`
2.  检查行的内容是否与`-`行的内容相同`+`。
3.  请记住，尽管示例数据没有显示它，但您可以在一个部分中包含多个块`-`和行。`+``@@`
4.  如果块中没有任何差异`@@`，则可以丢弃整个块。
5.  如果存在差异，那么如果之前没有输出标题行，我们需要输出它们。
6.  如果存在差异，则输出整个差异块。

冲洗并重复。

我为此选择的编程语言是 Perl。

### checkdiffs.pl

```
#!/usr/bin/env perl
use strict;
use warnings;
use constant debug => 0;

my $file1;
my $file2;
my $header = 0;

OUTER:
while (my $line = <>)
{
    chomp $line;
    print "[$line]\n" if debug;
    if ($line =~ m/^--- /)
    {
        $file1 = $line;
        $file2 = <>;
        chomp $file2;
        print "[$file2]\n" if debug;
        if ($file2 !~ m/^\+\+\+ /)
        {
            print STDERR "Unexpected file identification lines\n";
            print STDERR "$file1\n";
            print STDERR "$file2\n";
            next OUTER;
        }
        $header = 0;    # Have not output file header yet

        my @lines;
        my $atline;

        last OUTER unless defined($line = <>);
INNER:
        while ($line =~ m/^@@ /)
        {
            chomp $line;
            print "@[$line]\n" if debug;
            $atline = $line;
            @lines  = ();

            while (defined($line = <>) && $line =~ m/^[- +]/)
            {
                chomp $line;
                print ":[$line]\n" if debug;
                push @lines, $line;
            }
            # Got a complete @@ block of diffs
            post_process($atline, @lines);

            last OUTER if !defined($line);
            next INNER if ($line =~ m/^@@ /);
            print STDERR "Unexpected input line: [$line]\n";
            last OUTER;
        }
    }
}

sub differences
{
    my($pref, $mref) = @_;
    my $pnum = scalar(@$pref);
    my $mnum = scalar(@$mref);
    print "-->> differences\n" if debug;
    return 0 if ($pnum == 0 && $mnum == 0);
    return 1 if ($pnum != $mnum);
    foreach my $i (0..($pnum-1))
    {
        my $pline = substr(${$pref}[$i], 1);
        my $mline = substr(${$mref}[$i], 1);
        return 1 if ($pline ne $mline);
    }
    print "<<-- differences\n" if debug;
    return 0;
}

sub post_process
{
    my($atline, @lines) = @_;

    print "-->> post_process\n" if debug;
    # Work out whether there are any differences left
    my @plines = ();    # +lines
    my @mlines = ();    # -lines
    my $diffs  = 0;
    my $ptype  = ' ';   # Previous line type

    foreach my $line (@lines)
    {
        print "---- $line\n" if debug;
        my ($ctype) = ($line =~ m/^(.)/);
        if ($ctype eq ' ')
        {
            if (($ptype eq '-' || $ptype eq '+') && differences(\@plines, \@mlines))
            {
                $diffs = 1;
                last;
            }
            @plines = ();
            @mlines = ();
        }
        elsif ($ctype eq '-')
        {
            push @mlines, $line;
        }
        elsif ($ctype eq '+')
        {
            push @plines, $line;
        }
        else
        {
            print STDERR "Unexpected input line format: $line\n";
            exit 1;
        }
        $ptype = $ctype;
    }

    $diffs = 1 if differences(\@plines, \@mlines);

    if ($diffs != 0)
    {
        # Print the block of differences, preceded by file header if necessary
        if ($header == 0)
        {
            print "$file1\n";
            print "$file2\n";
            $header = 1;
        }
        print "$atline\n";
        foreach my $line (@lines)
        {
            print "$line\n";
        }
    }

    print "<<-- post_process\n" if debug;
    return;
} 
```

使用文件进行了测试`data`，并使用了三个变体：

```
$ perl checkdiffs.pl data
$ perl checkdiffs.pl data.0
--- file.1  2013-03-30 18:58:35.000000000 -0700
+++ file.2  2013-03-30 18:58:48.000000000 -0700
@@ -1,7 +1,7 @@
 Data

 Foo
-Bar #0
+Bar ##
 Baz

 I want to squash the lines down that are equal so they don't show up in the diff anymore. This is pretty simple with
$ perl checkdiffs.pl data.1
--- file.1  2013-03-30 18:58:35.000000000 -0700
+++ file.2  2013-03-30 18:58:48.000000000 -0700
@@ -10,7 +10,7 @@

 The problems start when I have multi-line matches like:

-Foo #0
-Bar ##
+Foo ##
+Bar ##

 Etc.
$ perl checkdiffs.pl data.2
--- file.1  2013-03-30 18:58:35.000000000 -0700
+++ file.2  2013-03-30 18:58:48.000000000 -0700
@@ -1,7 +1,7 @@
 Data

 Foo
-Bar #0
+Bar ##
 Baz

 I want to squash the lines down that are equal so they don't show up in the diff anymore. This is pretty simple with
@@ -10,7 +10,7 @@

 The problems start when I have multi-line matches like:

-Foo ##
-Bar #0
+Foo ##
+Bar ##

 Etc.
$ 
```

这符合你的要求吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T04:35:29.927

我认为这可能有效（除非您重复配对）：

```
 sed 's/^[-+]//' filename | perl -ne 'print unless $seen{$_}++' 
```

将开始 +/- 替换为空字符串。然后只选择独特的线条。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T13:08:22.100

You could use [s modifier](http://php.net/manual/en/reference.pcre.pattern.modifiers.php) and [positive lookahead](http://www.regular-expressions.info/lookaround.html):

*   with s modifier you can also match new line with dot
*   with positive lookahead you can find occurances of the match without making it a part of the match (which skips everything in between...).

[Here](http://regexpal.com/?flags=gs&regex=%5C-%28.%2a?%29%5Cn%28?=%28.%2a?%29%28%5C%2b%5C1%29%29&input=-Foo%0A%2bFoo%0Ala%0A-Bar%0A%2bFoo%0Ala%0A-Ko%0A%2bBar%0Ala%0A%2bKo%0A-Ena%0Aasdsda%0A-Dva%0A%2bEna%0A%2bDva) is sample matching at regexpal.

Here is C# regex sample that should be close to what you need:

```
var sourceString = @"-Foo
    +Foo
    la
    -Bar
    +Foo
    la
    -Ko
    +Bar
    la
    +Ko
    -Ena
    asdsda
    -Dva
    +Ena
    +Dva
    ";
Regex ItemRegex = new Regex(@"(?s)\-(.*?)\n(?=(.*?)(\+\1))", RegexOptions.Compiled);
foreach (Match ItemMatch in ItemRegex.Matches(sourceString))
{
    Console.WriteLine(ItemMatch);
} 
```

# java - Maven 在编译类型中找不到依赖项

> ID：15725268
> 
> 赞同：1
> 
> 时间：2013-03-31T01:03:44.363
> 
> 标签：java, maven, maven-3

我有一个由 Maven 管理的小实验项目。它使用一个库来生成 PDF。这是我的`pom.xml`：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>br.com.brandizzi.adam.pdfize</groupId>
    <artifactId>pdfize</artifactId>
    <version>0.0.1-SNAPSHOT</version>
    <dependencies>
        <dependency>
            <groupId>org.xhtmlrenderer</groupId>
            <artifactId>core-renderer</artifactId>
            <version>R8pre2</version>
            <scope>runtime</scope>
        </dependency>
    </dependencies>
</project> 
```

它只有一个类：

```
package br.com.brandizzi.adam.pdfize;
//

public class Main {

    public static void main(String[] args) throws DocumentException,
            MalformedURLException, FileNotFoundException {

        String inputUrl = new File(args[0]).toURI().toURL().toString();
        OutputStream pdf = new FileOutputStream(args[1]);

        ITextRenderer renderer = new ITextRenderer();
        renderer.setDocument(inputUrl);
        renderer.layout();
        renderer.createPDF(pdf);

    }
} 
```

但是，当我运行`mvn compile`时，我收到此错误：

```
$ mvn compile
[INFO] Scanning for projects...
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building pdfize 0.0.1-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-resources-plugin:2.5:resources (default-resources) @ pdfize ---
[debug] execute contextualize
[WARNING] Using platform encoding (UTF-8 actually) to copy filtered resources, i.e. build is platform dependent!
[INFO] Copying 0 resource
[INFO] 
[INFO] --- maven-compiler-plugin:2.3.2:compile (default-compile) @ pdfize ---
[WARNING] File encoding has not been set, using platform encoding UTF-8, i.e. build is platform dependent!
[INFO] Compiling 1 source file to /home/adam/software/workspaces/test/pdfize/target/classes
[INFO] -------------------------------------------------------------
[ERROR] COMPILATION ERROR : 
[INFO] -------------------------------------------------------------
[ERROR] /home/adam/software/workspaces/test/pdfize/src/main/java/br/com/brandizzi/adam/pdfize/Main.java:[9,28] error: package org.xhtmlrenderer.pdf does not exist
[ERROR] /home/adam/software/workspaces/test/pdfize/src/main/java/br/com/brandizzi/adam/pdfize/Main.java:[11,23] error: package com.lowagie.text does not exist
[ERROR] /home/adam/software/workspaces/test/pdfize/src/main/java/br/com/brandizzi/adam/pdfize/Main.java:[38,3] error: cannot find symbol
[ERROR]  class Main
/home/adam/software/workspaces/test/pdfize/src/main/java/br/com/brandizzi/adam/pdfize/Main.java:[29,11] error: cannot find symbol
[ERROR]  class Main
/home/adam/software/workspaces/test/pdfize/src/main/java/br/com/brandizzi/adam/pdfize/Main.java:[43,2] error: cannot find symbol
[ERROR]  class Main
/home/adam/software/workspaces/test/pdfize/src/main/java/br/com/brandizzi/adam/pdfize/Main.java:[43,31] error: cannot find symbol
[INFO] 6 errors 
[INFO] -------------------------------------------------------------
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 1.094s
[INFO] Finished at: Sat Mar 30 21:36:59 BRT 2013
[INFO] Final Memory: 9M/106M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:2.3.2:compile (default-compile) on project pdfize: Compilation failure: Compilation failure:
[ERROR] /home/adam/software/workspaces/test/pdfize/src/main/java/br/com/brandizzi/adam/pdfize/Main.java:[9,28] error: package org.xhtmlrenderer.pdf does not exist
[ERROR] /home/adam/software/workspaces/test/pdfize/src/main/java/br/com/brandizzi/adam/pdfize/Main.java:[11,23] error: package com.lowagie.text does not exist
[ERROR] /home/adam/software/workspaces/test/pdfize/src/main/java/br/com/brandizzi/adam/pdfize/Main.java:[38,3] error: cannot find symbol
[ERROR] class Main
[ERROR] /home/adam/software/workspaces/test/pdfize/src/main/java/br/com/brandizzi/adam/pdfize/Main.java:[29,11] error: cannot find symbol
[ERROR] class Main
[ERROR] /home/adam/software/workspaces/test/pdfize/src/main/java/br/com/brandizzi/adam/pdfize/Main.java:[43,2] error: cannot find symbol
[ERROR] class Main
[ERROR] /home/adam/software/workspaces/test/pdfize/src/main/java/br/com/brandizzi/adam/pdfize/Main.java:[43,31] error: cannot find symbol
[ERROR] -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException 
```

出了什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T01:03:44.363

`runtime`问题是当一个人应该使用范围时，依赖配置被设置为`compile`范围。因此，应将`<dependency>`上的元素更改为：`pom.xml`

```
<dependencies>
    <dependency>
        <groupId>org.xhtmlrenderer</groupId>
        <artifactId>core-renderer</artifactId>
        <version>R8pre2</version>
        <scope>compile</scope> <!-- <== NOTE THE DIFFERENCE -->
    </dependency>
</dependencies> 
```

当然，这引发了一个问题，即我*为什么*要首先尝试使用`runtime`范围。我试图构建一个包含所有依赖项的 JAR，如果您也尝试这样做，那么更改范围是没有意义的。相反，请遵循这个[很棒的答案](https://stackoverflow.com/a/574650/287976)。

# python - Python：OSError：[Errno 2]没有这样的文件或目录：''

> ID：15725273
> 
> 赞同：22
> 
> 时间：2013-03-31T01:04:57.353
> 
> 标签：python, python-2.7, python-module

我有一个 100 行、3 岁的 python 刮板，现在有问题。起跑线是：

```
import urllib, re, os, sys, time    # line 1: import modules
os.chdir(os.path.dirname(sys.argv[0])) # line 2: all works in script's folder > relative address
# (rest of my script here!) 
```

运行时，

```
$cd /my/folder/
$python script.py 
```

我收到错误：

```
python script.py 
Traceback (most recent call last):
  File "script.py", line 2, in <module>
    os.chdir(os.path.dirname(sys.argv[0]))
OSError: [Errno 2] No such file or directory: '' 
```

**我应该如何阅读此错误以及该怎么做？**

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-03-31T01:19:02.723

你有没有注意到如果你运行你没有得到错误

```
python ./script.py 
```

代替

```
python script.py 
```

这是因为`sys.argv[0]`将`./script.py`在前一种情况下阅读，这提供了`os.path.dirname`一些可以使用的东西。当您不指定路径时，`sys.argv[0]`读取简单`script.py`，并且`os.path.dirname`无法确定路径。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2015-04-21T14:26:58.523

I had this error because I was providing a string of arguments to `subprocess.call` instead of an array of arguments. To prevent this, use `shlex.split`:

```
import shlex, subprocess
command_line = "ls -a"
args = shlex.split(command_line)
p = subprocess.Popen(args) 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2013-03-31T01:17:34.977

使用`os.path.abspath()`：

```
os.chdir(os.path.dirname(os.path.abspath(sys.argv[0]))) 
```

`sys.argv[0]`在您的情况下*只是*一个脚本名称，没有目录，因此`os.path.dirname()`返回一个空字符串。

[`os.path.abspath()`](http://docs.python.org/2/library/os.path.html#os.path.abspath)将其转换为具有目录名称的正确绝对路径。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2021-04-18T07:45:50.827

I was compiling the android code v4.4 on Ubuntu 14.04, when I met the same problem of Python, no such file or directory.

It ends as I installed below libraries. So I think maybe it will help someone at some occasion. The python script takes it for granted that some lib exists in the system.

```
sudo apt install gperf
sudo apt install  libxml2-utils
sudo apt install libbison-dev 
```

# json - 如何访问此 JSON 对象中的值

> ID：15725278
> 
> 赞同：0
> 
> 时间：2013-03-31T01:06:20.910
> 
> 标签：json

我得到了一个像这样的 JSON 对象：

```
{ [error: User test@test.com already exists]
  length: 88,
  name: 'error',
  severity: 'ERROR',
  code: 'P0001'} 
```

问题：错误消息似乎是一个数组（它是包含在 [] 括号中的第一项）。**我如何获得该值？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T01:09:36.813

这不是有效的 json。尝试在 www.jsonlint.com 上验证它

# css - 如何做不相等的自动边距

> ID：15725281
> 
> 赞同：0
> 
> 时间：2013-03-31T01:06:40.607
> 
> 标签：css, margin

伙计们！我正在调整[这个维基百科皮肤文件](https://es.wikipedia.org/wiki/Usuario%3aNaBUru38/common.css)，所以我看到的所有页面的内容都以固定宽度居中。我认为，我已经尽可能地做到了。（它只适用于我的帐户，因为它是我的文件。当然，您可以在您的帐户中尝试。）

由于我使用`margin: 0 auto`，左右边距具有相同的大小。我不希望这样，因为文本似乎略微向右移动（div 不包括左栏）。与其写一个全新的皮肤，不如用便宜的方法来做：我想将边距设置为左边 40% 和右边 60%。

现在，我不能使用固定 ( `25px`) 或相对 ( `40%`) 边距，因为即使浏览器窗口小于 750 像素（加上左栏），边距也会出现。

所以，我希望边距不等于 60% / 40%，但仍然是自动的。这可能与 CSS 吗？谢谢！

# image - Bootstrap images not working?

> ID：15725282
> 
> 赞同：0
> 
> 时间：2013-03-31T01:06:41.630
> 
> 标签：image, twitter-bootstrap, icons

I have recently installed twitter bootstrap to my website and I have been developing with that. I recently read their tutorial on their icons/images. You can find the tutorial here: [http://twitter.github.com/bootstrap/base-css.html](http://twitter.github.com/bootstrap/base-css.html) under the "Images" section.

I tried using one of their examples:

```
<i class="icon-search"></i> 
```

and no image showed up.

I have also tried:

```
<i class="icon-search"/> 
```

This is probably a dumb question, im just very tired and I am having trouble thinking this through. I did not just try "icon-search" I also did other ones but nothing worked.

Any help would be great, thanks!

EDIT: Also my glyphicons are in img/glyphicons.png

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T17:43:52.000

Nevermind, I figured it out. I did `<i class="icon-user"></i>` and it didn't work originally but then I saved my project and went out to take a walk and I came back and it was working. No clue what happened but I guess it was just a bug.

# android - Widget update TextView timer not working

> ID：15725283
> 
> 赞同：0
> 
> 时间：2013-03-31T01:06:58.247
> 
> 标签：android, timer, widget, android-widget

I have a widget im trying to update the `TextView` using a timer:

```
 public void onUpdate(Context context, final AppWidgetManager appWidgetManager, int[] appWidgetIds) {
    final int N = appWidgetIds.length;

    for (int i = 0; i < N; i++) {
        final int appWidgetId = appWidgetIds[i];

        Intent clockIntent = new Intent(context, DeskClock.class);
        PendingIntent pendingIntent = PendingIntent.getActivity(context, 0, clockIntent, 0);

        final RemoteViews views = new RemoteViews(context.getPackageName(), R.layout.digitalclock);
        views.setOnClickPendingIntent(R.id.rl, pendingIntent);

        Timer timer = new Timer();
        timer.scheduleAtFixedRate(new TimerTask() {

            @Override
            public void run() {
                java.util.Date noteTS = Calendar.getInstance().getTime();
                String time = "kk:mm";
                String date = "dd MMMMM yyyy";

                views.setTextViewText(R.id.tvTime, DateFormat.format(time, noteTS));
                views.setTextViewText(R.id.tvDate, DateFormat.format(date, noteTS));
                appWidgetManager.updateAppWidget(appWidgetId, views);
            }
        }, 0, 1000);// Update textview every second

    }
} 
```

Problem is, it only updates the once and never again afterwards. Where am I going wrong?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T01:44:23.533

You should use a Handler, to act on the UI Thread from a timertask.

```
Timer timer = new Timer();
    timer.scheduleAtFixedRate(new TimerTask() {

        @Override
        public void run() {

              handler.post(new Runnable() {
                        public void run() {
                //Your code here
             }});
        }
    }, 0, 1000);// Update textview every second 
```

Also, you should initiate the Handler in onCreate() like this

> handler = new Handler();

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T04:35:00.920

```
 int _count=0;
    _tv = (TextView) findViewById( R.id.textView1 );
    _tv.setText( "red" );
    _t = new Timer();

    _t.scheduleAtFixedRate( new TimerTask() {
            @Override
            public void run() {
                _count++;

                runOnUiThread(new Runnable() //run on ui thread
                 {
                  public void run() 
                  { 
                     _tv.setText(""+_count);
                 }
                 });
            }
        }, 1000, 1000 ); 
```

# c++ - (C++) noob - 我的代码有什么问题？

> ID：15725284
> 
> 赞同：0
> 
> 时间：2013-03-31T01:07:18.067
> 
> 标签：c++, ifstream

我正在尝试读取给定文件中的字符并输出十六进制字符的数量。当我对一个文本文件运行它时，它或多或少是准确的，但几乎没有其他任何东西，它似乎已经偏离了。IE：大约 700MB 的 *.mp4 文件将以 12K 出现。我在这里想念什么？

```
#include <fstream>
#include <iostream>
using namespace std ;

int main()
    {
    char letter ;
    int i ;
    cout << "Input the filename:" << endl;
    string stringinput;
        cin >> stringinput;
    ifstream file( stringinput.c_str() ) ;
    if( ! file )
    {
        cout << "Error opening input file, " << ( stringinput ) << ". Check file path and try again." << endl ;
        return -1 ;
    }
    else
        for( i = 0; ! file.eof() ; i++ )
        {
            file.get( letter ) ;
            //cout << hex << (int) letter;
        }
        cout << endl;
        float k = 1024, m = 1048576;
        file.close();
        if( i < 1024)
        {
            cout << "Total: " << dec << i << endl;
        }
        else if( i < m)
        {
            cout << "Total: " << dec << (i / k) << "K" << endl;
        }
        else
        {
            cout << "Total: " << dec << (i / m) << "M" << endl;
        }
        return 0 ;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T01:13:32.143

您需要以`binary`模式打开文件。

```
ifstream file( stringinput.c_str() ) ; 
```

应该：

```
ifstream file( stringinput.c_str(), ios_base::in | ios_base::binary ) ; 
```

以文本模式读取文件意味着某些字符（例如 CTRL-Z）被视为“文件结尾”，因此如果这恰好是您输入的一部分，您的读取将提前结束。由于 mp4 文件是具有相当“随机”内容的二进制文件，因此不能保证这些字符不会出现在文件中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T01:13:46.383

需要`.mp4`以***二进制模式***打开文件：

```
std::ifstream file(stringinput.c_str(), std::ios_base::in | std::ios::binary) ; 
```

如果不指定`std::ios::binary`标志，则文件默认以文本模式打开。这样做的问题是文件的内容被解释为好像它是文本（即运行时假定所有字节都在有效范围内并且具有由系统语言环境的**字符集**定义的特定含义，例如 ASCII 或 UTF -8)。因此，它将执行诸如将换行符从 DOS 转换为 UNIX 格式（反之亦然），或以特殊方式处理某些控制字符等操作。

有关详细信息，请参阅[以二进制和文本模式编写的文件之间的差异](https://stackoverflow.com/questions/229924/difference-between-files-writen-in-binary-and-text-mode)。

# android - onOptionsItemSelected 不是开始意图

> ID：15725285
> 
> 赞同：0
> 
> 时间：2013-03-31T01:07:25.800
> 
> 标签：android, android-intent

所以这里是纲要：我有一个带有选项菜单的活动。列表中只有 1 个选项：“选项”
问题：当我单击选项项目时，它会将我踢回上一个屏幕。我放了一个祝酒词来显示随机性，所以我知道它正在读取 id，这对 Intent 没有作用？

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    super.onCreateOptionsMenu(menu);
    getMenuInflater().inflate(R.menu.main_screen, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case R.id.menu_settings:
        Intent Options = new Intent(this,
                Options.class);
        this.startActivity(Options);
        Toast msg = Toast.makeText(MainScreen.this,
                "Just some text", Toast.LENGTH_SHORT);
        msg.show();
        return true;
    default:
        return super.onOptionsItemSelected(item);
    }
} 
```

xml:

```
<item android:id="@+id/menu_settings"
    android:title="Sell"
    android:orderInCategory="100"
    android:showAsAction="never" /> 
```

它只是**不会**带我进入选项屏幕......
没有错误消息或任何东西。

# javascript - Accessing a multidimensional array using a one dimensional array in Javascript

> ID：15725286
> 
> 赞同：0
> 
> 时间：2013-03-31T01:07:46.893
> 
> 标签：javascript, arrays, variables, multidimensional-array

If I have the following initialized... (fyi, in the code I'm basing it off of, both variables are dynamically created)

```
// Start of Code that MUST stay unchanged.
var myPrimaryArray = [["Potato","Walrus"],42,[["Your father was a hamster", "Target"],362]];
var locationArray = [2][0][1];
// End of Code that MUST stay unchanged

//What to put here to get "Target"? 
```

How do I make this return "Target", with only those two variables? (Not knowing the depth into either array I have to go ahead of time.)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T01:13:28.180

Hopes this will return `target`

```
var myPrimaryArray = [["Potato","Walrus"],42,[["Your father was a hamster", "Target"],362]];
var locationArray = myPrimaryArray[2][0][1];
alert(locationArray); 
```

**output:**

```
Target 
```

To be fun , check your Code:

> locationArray = **myPrimaryArray** [2][0][1];

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T16:37:00.793

Got a solution (altered text for stackoverflow, hope it still works for anyone seeking a solution similar to mine.) It's cumbersome, but it should work.

```
// Start of Code that MUST stay unchanged.
var myPrimaryArray = [["Potato","Walrus"],42,[["Your father was a hamster", "Target"],362]];
var locationArray = [2][0][1];
// End of Code that MUST stay unchanged

getArrayObjectWithLocationArray(myPrimaryArray,locationArray)

function getArrayObjectWithLocationArray(myArray, myLocationArray){
var myArray = stringToPositionArray(myString);
if (myLocationArray.length > 1}{
    return getPanelWithPositionString([myArray[myLocationArray[0]], myLocationArray.splice(0,1))
} else {
    return myArray[stringToPositionArray[0]];
}

} 
```

# c# - SSMS 插件 - 访问结果窗格

> ID：15725289
> 
> 赞同：3
> 
> 时间：2013-03-31T01:08:03.800
> 
> 标签：c#, ssms, ssms-addin

我正在尝试用 C# 编写一个 SSMS 插件（2008 R2 或 2012）。目标是允许右键单击结果窗格中的字段，并让上下文菜单根据所选字段提供预先编写的查询。

我已经成功创建了一个基本的 SSMS 插件，但我需要通过我的代码获得帮助，获得对结果窗格对象的访问权限，更具体地说，是用户右键单击的单元格的字段名称和值，然后将选项添加到上下文菜单.

谢谢罗德

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-22T20:37:33.540

我不知道你是否有这个工作，但我已经得到了你想要的部分方式。您需要窗口的 GUID，然后附加到窗口抛出的事件。

我敢肯定它是可能的，只是你为此付出了多少血汗和泪水……

在这里的代码[http://ssmsaddin2012.codeplex.com/SourceControl/latest#SSMSAddinDenali/Addin/Connect.cs](http://ssmsaddin2012.codeplex.com/SourceControl/latest#SSMSAddinDenali/Addin/Connect.cs)

我尽可能多地链接到事件。我不知道它是否有帮助。

# java - 如何根据登录状态从 Button 切换到 FrameLayout

> ID：15725290
> 
> 赞同：0
> 
> 时间：2013-03-31T01:08:11.927
> 
> 标签：java, android, eclipse, sharedpreferences, android-framelayout

我试图让当用户登录时，当他进入我的应用程序的帐户设置活动时，他将通过 FrameLayout 看到他的用户名，但如果他没有登录，他将看到一个登录按钮。我做了一个 PreferenceData 类来处理这个我相信我设置它是正确的，但是当我登录时，我仍然看到我的登录按钮而不是我制作的 FrameLayout。如果有帮助，我正在使用数据库来存储用户帐户。

这是我的代码

```
 package com.fullfrontalgames.numberfighter;

import android.app.Activity;
import android.content.Intent;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.preference.PreferenceManager;
import android.view.View;
import android.widget.Button;
import android.widget.FrameLayout;
import android.widget.TextView;

    public class AccountSettings extends Activity{

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            // TODO Auto-generated method stub
            super.onCreate(savedInstanceState);
            setContentView(R.layout.accountsettings);

            SharedPreferences appPref =
                    getSharedPreferences("com.fullfrontalgames.numberfighter.Settings_Preferences", MODE_PRIVATE);

            String loggedin = PreferenceData.getUserLoggedInStatus(true);

            Button LoginAS = (Button)findViewById(R.id.LoginAS);
            Button Done = (Button)findViewById(R.id.done);
            FrameLayout accountframe = (FrameLayout)findViewById(R.id.AccountFrameLayout);
            TextView accounttv = (TextView)findViewById(R.id.AccountTextView);

            DBAdapter db = new DBAdapter(this);
            db = db.open();

            accountframe.setVisibility(View.GONE);
            LoginAS.setVisibility(View.GONE);

            Done.setOnClickListener(new View.OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    Intent Intent = new Intent(AccountSettings.this,activity_main.class);
                    startActivity(Intent);
                }
            });

            if (accountframe.equals(loggedin))
            {
                accountframe.setVisibility(View.VISIBLE);
                accounttv.setText((CharSequence) appPref);

            } else {

                accountframe.setVisibility(View.GONE);
                LoginAS.setVisibility(View.VISIBLE);
                LoginAS.setOnClickListener(new View.OnClickListener() {

                    @Override
                    public void onClick(View v) {
                        // TODO Auto-generated method stub
                        startActivity (new Intent ("com.fullfrontalgames.numberfighter.Login")); 

                    }
                });

            }

        }

    }

    PreferenceData Class

    package com.fullfrontalgames.numberfighter;
import android.content.Context;
import android.content.SharedPreferences;
import android.content.SharedPreferences.Editor;
import android.preference.PreferenceManager;
import android.view.View.OnClickListener;

public class PreferenceData {
    static final String PREF_LOGGEDIN_USERNAME = "logged_in_username";
    static final String PREF_USER_LOGGEDIN_STATUS = "logged_in_status";

    public static SharedPreferences getSharedPreferences(Context ctx) {
        return PreferenceManager.getDefaultSharedPreferences(ctx);
    }

    public static void setLoggedInUsername(Context ctx, String Username)
    {
        Editor editor = getSharedPreferences(ctx).edit();
        editor.putString(PREF_LOGGEDIN_USERNAME, Username);
        editor.commit();
    }

    public static String getLoggedInUsername(Context ctx)
    {
        return getSharedPreferences(ctx).getString(PREF_LOGGEDIN_USERNAME, "");
    }

    public static void setUserLoggedInStatus(Context ctx, boolean status)
    {
        Editor editor = getSharedPreferences(ctx).edit();
        editor.putBoolean(PREF_USER_LOGGEDIN_STATUS, status);
        editor.commit();
    }

    public static boolean getUserLoggedInStatus(Context ctx)
    {
        return getSharedPreferences(ctx).getBoolean(PREF_USER_LOGGEDIN_STATUS, false);
    }

    public static void clearLoggedInUsername(Context ctx)
    {
        Editor editor = getSharedPreferences(ctx).edit();
        editor.remove(PREF_LOGGEDIN_USERNAME);
        editor.remove(PREF_USER_LOGGEDIN_STATUS);
        editor.commit();
    }

    public static void setUserLoggedInStatus(OnClickListener onClickListener,
            boolean status) {
        // TODO Auto-generated method stub

    }

    public static String getUserLoggedInStatus(boolean b) {
        // TODO Auto-generated method stub
        return null;
    }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T01:35:55.687

您正在查看（FrameLayout）：

```
FrameLayout accountframe = (FrameLayout)findViewById(R.id.AccountFrameLayout); 
```

并将其与字符串进行比较：

```
if (accountframe.equals(loggedin)) 
```

你能解释一下你想做什么吗？`loggedin`字符串存储在哪里？

我认为应该是：

```
if ((CharSequence) appPref.toString().equals(loggedin))
{
...
} 
```

**编辑：**

如果用户登录或未登录则返回：

```
String loggedin = PreferenceData.getUserLoggedInStatus(true); 
```

那么你应该写这样的东西：

```
 if (loggedin.equals("true"))
 {
     accountframe.setVisibility(View.VISIBLE);
     accounttv.setText((CharSequence) appPref);
 } 
```

**Second edit:** You are getting a `Boolean` parameter:

```
 public static boolean getUserLoggedInStatus(Context ctx)
 {
    return getSharedPreferences(ctx).getBoolean(PREF_USER_LOGGEDIN_STATUS, false);
 } 
```

So you should store it into a Boolean parameter, and pass your activity context or this:

```
boolean loggedin = PreferenceData.getUserLoggedInStatus(YouactivityName.this);

if (loggedin == true)
{
    accountframe.setVisibility(View.VISIBLE);
    accounttv.setText((CharSequence) appPref);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T01:53:37.863

```
boolean loggedin = PreferenceData.getUserLoggedInStatus(this);

if (loggedin == true)
 {
     accountframe.setVisibility(View.VISIBLE);
     accounttv.setText((CharSequence) appPref);
 } 
```

try this, Hope this helps you.

# symfony - Symfony2 Twig：使用自定义加载器加载模板时，url /path 函数不存在

> ID：15725299
> 
> 赞同：1
> 
> 时间：2013-03-31T01:10:55.767
> 
> 标签：symfony, twig

我写了一个自定义的 DatabaseTwigLoader，基于这个配方：[http ://twig.sensiolabs.org/doc/recipes.html#using-a-database-to-store-templates](http://twig.sensiolabs.org/doc/recipes.html#using-a-database-to-store-templates)

它工作正常。我正在使用这个加载器从数据库加载电子邮件模板，渲染它们并使用 swift mailer 发送它们。

问题是，在渲染模板时，我不能使用路径或 url 树枝函数。返回的错误是：

第 6 行的“NEW_POST_ON_YOUR_GOAL”中不存在函数“路径”（500 内部服务器错误）

然而，变量插值和过滤器被应用并且模板继承工作。

我需要用自定义加载器注册 url / path 函数吗？这些功能依赖于路由是否与此有关？

提前致谢。

** @MolecularMan 建议的解决方案的实施**

我必须将路由扩展添加到 twigEnvironment。我使用 TwigEnvironment::addExtension() 方法做到了这一点。

为了使用 DI 实现这一点，我必须扩展 urlGenerator 类（作为构造函数参数传递给 routing_extension 服务）。

UrlGenerator 将 routeCollection 对象作为构造函数参数。所以我将路由器服务作为构造函数参数传递给我的扩展 urlGenerator，以便我可以提取 routecollection 并将其传递给 parent::__contruct()

为了使用 DI 实现这一点，我必须扩展 urlGenerator 类（作为构造函数参数传递给 routing_extension 服务）。

UrlGenerator 将 routeCollection 对象作为构造函数参数。所以我将路由器服务作为构造函数参数传递给我的扩展 urlGenerator，以便我可以提取 routecollection 并将其传递给 parent::__contruct()

我的 services.yml 文件如下所示：

```
twig_db:
    class: %twig.class%
    arguments: [@twig_db_loader]
    calls: [[ addExtension, [@routing_extension] ]]
url_generator:
    class: ZT\UserBundle\Services\UrlGenerator
    arguments: [@router, @request_context, @logger]
request_context:
    class: Symfony\Component\Routing\RequestContext
routing_extension:
    class: Symfony\Bridge\Twig\Extension\RoutingExtension
    arguments: [@url_generator]
twig_db_loader:
    class: ZT\UserBundle\Services\DatabaseTwigLoader
    arguments: [@doctrine.orm.entity_manager] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-18T19:14:45.447

您应该注册 RoutingExtension：

```
$loader = new \Twig_Loader_Filesystem(array(__DIR__ . '/../../Resources/views'));
$twig = new \Twig_Environment($loader);

$twig->addExtension(new RoutingExtension($this->getMock('Symfony\Component\Routing\Generator\UrlGeneratorInterface')));
$twig->render('your_view.html.twig'); 
```

# python - 如何有效地使用 `pyjade` 导入 mixins？

> ID：15725302
> 
> 赞同：5
> 
> 时间：2013-03-31T01:11:20.863
> 
> 标签：python, templates, pug, jinja2, pyjade

参考[https://github.com/SyrusAkbary/pyjade/issues/27](https://github.com/SyrusAkbary/pyjade/issues/27)，似乎 jinja2 不允许从外部文件导入 mixins。

但是，我得到了一个 helper.jade，它有很多 mixins。如果我需要从一个文件中使用许多不同的 mixin，这是否意味着我必须这样做：

```
- from 'helper.jade' import mixin_a, mixin_b, mixin_c, mixin_d...

mixin mixin_a(var1, var2, var3)
  div blah blah blah 
```

其中 import 语句是相当低效的。

有没有更好的方法来做到这一点。例如，类似于下面的语法？

```
- import 'helper.jade' as h

mixin h.mixin_a(var1, var2, var3)
  div blah blah blah 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-03T17:45:34.830

我认为我在较新版本的 pyjade 中发现的一个有点丑陋的解决方法解决了这个问题：[Include mixins in pyjade workaround](https://stackoverflow.com/questions/27278199/including-mixins-in-pyjade-workaround/27278200)

# c# - How to use ScrapySharp to parse elements in an html document?

> ID：15725305
> 
> 赞同：6
> 
> 时间：2013-03-31T01:11:51.520
> 
> 标签：c#, html, web-scraping, html-agility-pack, scrapysharp

Here's the project official "Documentation":

[https://bitbucket.org/rflechner/scrapysharp/wiki/Home](https://bitbucket.org/rflechner/scrapysharp/wiki/Home)

* * *

No matter what I try, I can't find the `CssSelect()` method that the library is supposed to add to make querying things easier. Here's what I've tried:

```
using ScrapySharp.Core;
using ScrapySharp.Html.Parsing;
using HtmlAgilityPack;

HtmlWeb web = new HtmlWeb();
HtmlDocument doc = web.Load("http://www.stackoverflow.com");

var page = doc.DocumentNode.SelectSingleNode("//body");
page.CssSel??? 
```

Exactly how do I use this library? In the documentation it isn't clear what type `html` is.

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-31T07:08:35.847

Add

```
using ScrapySharp.Extensions; 
```

It looks like you're missing that. That should make `CssSelect` available.

Just in case an example helps, here's a method, as well, that I use in a project:

```
private string GetPdfUrl(HtmlDocument document, string baseUrl)
{
    return new Uri(new Uri(baseUrl), document.DocumentNode.CssSelect(".table-of-content .head-row td.download a.text-pdf").Single().Attributes["href"].Value).ToString();
} 
```

# php - 未定义的偏移量和变音符号

> ID：15725310
> 
> 赞同：3
> 
> 时间：2013-03-31T01:12:21.510
> 
> 标签：php, utf-8, southeast-asian-languages

我正在尝试解析`Laotian`文本，`utf8_ireplace`但我得到了

> 未定义的偏移量通知。

我能看到的一件事是有变音符号。这会导致那个警告吗？或者有人可以告诉我为什么总是老挝语（我正在处理的 6 种语言）？

老挝语和类似语言（如藏语）是否有特殊的处理方式`utf8_replace`？它是否会引起这些语言中某些字符的注意，这是一个已知问题吗？变音符号是问题还是其他？除了关闭通知报告之外，有谁知道如何不收到通知？

更新：实际上我补充说，在老挝语中，单词之间没有空格，所以你必须分隔字符串，这就是我使用 utf8_replace 的目的，但它在老挝语中失败，即使它似乎适用于泰语。所以我真的试图分解字符串，但由于某种原因，偏移量是未定义的。藏语似乎也有问题，例如“α╜ª”

# 更新

这里是中心问题：为什么我会收到`utf8_replace`一些老挝语单词的通知？

(Joomla)

```
// Iterate through the terms and test if they contain the relevant characters.
for ($i = 0, $n = count($terms); $i < $n; $i++)
{
    $charMatches = array();
    if ($lang === 'zh')
    {
        $charCount = preg_match_all('#[\x{4E00}-\x{9FCF}]#mui', $terms[$i], $charMatches);
    }

    elseif ($lang === 'ja')
    {
        // Kanji (Han), Katakana and Hiragana are each checked
        $charCount = preg_match_all('#[\x{4E00}-\x{9FCF}]#mui', $terms[$i], $charMatches);
        $charCount += preg_match_all('#[\x{3040–\x{309F}]#mui', $terms[$i], $charMatches);
        $charCount += preg_match_all('#[\x{30A0}-\x{30FF}]#mui', $terms[$i], $charMatches);
    }
    elseif ($lang === 'th')
    {
        $charCount = preg_match_all('#[\x{0E00}-\x{0E7F}]#mui', $terms[$i], $charMatches);
    }
    elseif ($lang === 'km')
    {
        $charCount = preg_match_all('#[\x{1780}-\x{17FF}]#mui', $terms[$i], $charMatches);
    }
    elseif ($lang === 'lo')
    {
        $charCount = preg_match_all('#[\x{0E80}-\x{30EFF}]#mui', $terms[$i], $charMatches);
    }
    elseif ($lang === 'my')
    {
        $charCount = preg_match_all('#[\x{1000}-\x{109F}]#mui', $terms[$i], $charMatches);
    }
    elseif ($lang === 'bo')
    {
        $charCount = preg_match_all('#[\x{0F00}-\x{0FFF}]#mui', $terms[$i], $charMatches);
    }
    // Split apart any groups of characters.
    for ($j = 0; $j < $charCount; $j++)
    {
        if (isset($charMatches[0][$j]))
        {
            $tSplit = JString::str_ireplace($charMatches[0][$j], '', $terms[$i], null);

            if (!empty($tSplit))
            {
                $terms[$i] = $tSplit;
            }
            else
            {
                unset($terms[$i]);
            }

            $terms[] = $charMatches[0][$j];
        }
    }
}

// Reset array keys.
$terms = array_values($terms); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-22T11:43:46.600

我认为偏移错误可能是指`preg_match`. [我已经使用regex101.com](http://regex101.com)测试了 'lo' 的正则表达式，它返回了这个错误：

> **\x{30EFF}** Character offset is too large. Reduce it to 4 hexadecimal characters or enable UTF-16 (u-modifier)

The other regexes tested just fine.

# ruby-on-rails - Ruby on Rails Pagination: Sort order not respected (will_paginate gem)

> ID：15725313
> 
> 赞同：11
> 
> 时间：2013-03-31T01:12:43.513
> 
> 标签：ruby-on-rails, ruby-on-rails-3

Okay, I'm sure there's a simple solution to my problem. Here is my `controller.rb` code:

```
@photos = Photo.paginate :page=>params[:page], :order => "date DESC", :per_page => 2 
```

For some reason, my sort order is not being respected. Pagination is functioning correctly (such as the number per page) but the order is not working at all. I've tried using different values like `ASC` and `DESC` as well as different fields to no avail. Here is my entire controller function after moving "order" first :

```
def index
  @photos = Photo.all
  @photos = Photo.order("date DESC").paginate(:per_page => 12, :page => params[:page])
  respond_to do |format|
    format.html # index.html.erb
    format.json { render :json => @gallery }
  end
end 
```

I previously had this working perfectly in Rails 1, I just cannot figure this out with the will_paginate gem. As I mentioned, the `:per_page` parameter is working so I know the pagination is working, I'm just getting no sorting and no errors. I would appreciate any help!

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-03T16:00:06.677

You have a default order (by means of `default_scope`) which you can't override with the `order()` method, only append more ordering rules. You can reset the order, however:

```
@photos = Photo.reorder("date DESC").page(params[:page]).per_page(12) 
```

BTW, you'll want to remove the `@photos = Photo.all` from the controller action. If you're fetching a paginated set of photos, it doesn't make sense to fetch them all from database first.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T16:13:55.873

Try using:

```
Photo.per_page = 2
Photo.page(params[:page]).order("date DESC") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T05:02:48.063

I was able to solve the problem after answering some other user's questions. After reviewing my "Photo" model, at the request of @mislav I realized that it contained:

```
default_scope :order => 'date' 
```

After removing this default_scope, ordering started functioning properly as it should. Problem solved.

# java - 节点在java中是如何工作的？

> ID：15725314
> 
> 赞同：1
> 
> 时间：2013-03-31T01:12:46.373
> 
> 标签：java, linked-list, nodes

好的，我有一个名为 CarNode 的类：

```
public class CarNode {
    private Car car;
    private CarNode node;
} 
```

和一个复制构造函数：

```
public CarList(CarList list) {
    CarNode element = list.head;
    CarNode node = new CarNode();
    this.head = node;

    while(element != null) {
        node.setCar(element.getCar());
        element = element.getNode();

        if(element != null) {
            node.setNode(new CarNode());
            node = element;
        }
    }
} 
```

我不明白的是**element**如何通过element.getNode（）获取另一个汽车节点的值，但是您需要为**节点**编写node.setNode（）和node.setCar（） ...我很困惑.. .

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T02:12:40.837

CarNode 有一个变量 node，它也是一个 CarNode；这意味着 CarNode 对象可以包含对另一个 CarNode 对象的引用。 `element`是一个包含对 CarNode 的引用的变量。代码`element = element.getNode()`将元素对象内的引用分配给元素引用本身（如果元素内的节点为空，则为空）。

In order to set a value on the node element within a `CarNode`, you call `setNode(elementReference)`, giving rise to the syntax `node.setNode(new CarNode());`.

Does this answer your question? I realize it may be hard to explain what you want to ask, but in fact we don't have a very clear question yet.

--- addendum

I'll try to answer your comments here, since more comments are limited in space and formatting.

I think you're confusing the "object" with the "object reference". You can think of the object as a block of memory somewhere in the program, and the object reference as the address of that block. Consider the statement:

```
CarNode myCar = new CarNode(); 
```

You have created a block of memory with `new CarNode()`, and `myCar` now refers to it. If you were to now execute the statement `CarNode secondCar = myCar;`, you would have a second reference to the same object, i.e., to the same block of memory. Any changes made to the object/block of memory would be reflected in both myCar and secondCar.

Your "copy constructor" as you call it, is confusing to me also. I'm not sure what you're trying to do. Usually a copy constructor creates one or more objects that contain the same data as an original object or set of objects. First of all, if the original list pointer is null, this will throw a NullPointerException on the first line. You create a first node and set it to be the head, that's fine, but the `node = element;` statement is just wrong. `node` holds a node you are creating to put in your new list, and `element` holds an element from the original list.

# java - Toast in new Thread

> ID：15725320
> 
> 赞同：0
> 
> 时间：2013-03-31T01:13:34.937
> 
> 标签：java, android, multithreading, toast, runnable

I am trying to display a toast in a new thread. I researched into it and apparently I need to run toast in the UI thread. I need this new thread because Android doesn't want me running HTTPclient in the main thread. I can deal with a handler but my problem is, I can't figure a way to get the MainActivity context to the class I am in. It extends SherlockFragment and the constructor probably won't allow it to override.

This is my runnable as of the moment

```
new Thread(new Runnable() {
    @Override
    public void run() {
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost("https://www.example.com/API/events/add.php");

        try {
            List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(16);
            httppost.getParams().setParameter(CoreProtocolPNames.USE_EXPECT_CONTINUE, Boolean.FALSE);

            // Adding data
            nameValuePairs.add(new BasicNameValuePair("token", "admin"));
            nameValuePairs.add(new BasicNameValuePair("eventTitle", title));
            nameValuePairs.add(new BasicNameValuePair("categories", Integer.toString(catId)));

            // Execute HTTP Post Request
            HttpResponse response = httpclient.execute(httppost);

            String status = EntityUtils.toString(response.getEntity());
            JSONObject jObj = null;

            try {
                jObj = new JSONObject(status);
            } catch (JSONException e) {
                Log.e(MainActivity.class.getName(), "Error Parsing Data: " + e.toString());
            }

            try {
                //Want to toast this string here, jObj.getString("status"))
            } catch (JSONException e) {
                Log.e(MainActivity.class.getName(), "Error Reading Status String: " + e.toString());
            }

        } catch (ClientProtocolException e) {
            // TODO Auto-generated catch block
        } catch (IOException e) {
            // TODO Auto-generated catch block
        }
    }
}).start(); 
```

Any recommendations to as what I may do?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T01:18:07.193

Please refer to this question..

It shows how to let any part of your application access the `Context` in a static manner.

[[Static way to get 'Context' on Android?](https://stackoverflow.com/questions/2002288/static-way-to-get-context-on-android) ]

Why is it not built into the API ? we'll never know..

HTH

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T09:37:09.503

For a fragment activity, in the future you should know you can do Fragment.this.getActivity() to get the Activity instance and thus the context. This will help you with other Activity only methods you will need.

# javascript - 嵌入到 C++ 程序中的 javascript 可以比 web 上的 javascript 更快吗

> ID：15725322
> 
> 赞同：0
> 
> 时间：2013-03-31T01:13:53.197
> 
> 标签：javascript, c++, performance, v8, spidermonkey

我严格来说是 C++ 的初学者，但我想知道在 C++ 程序中运行的 javascript（或 Lua 或任何脚本语言）是否受制于 C++ 代码可以提供的相同类型的硬件加速。

我意识到这需要在你的程序中的某个地方有一个 js 引擎，但是很好奇这个 javascript 是否会因某种原因而天生更快/更好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T01:18:00.493

正如您所说，这样的程序必须使用某种 javascript 引擎，很可能已经在 V8 等浏览器中使用。任何速度提升（如果有的话）主要来自应用程序设计。您的程序可能不必使用与 javascript 交织在一起的尽可能多的资源和抽象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T01:22:39.090

JavaScript 本身是一种解释/翻译语言。可以为它编写自己的解释器或翻译器（如果你真的很聪明，比现有的做得更好......），但做一些“有效”的事情是一项艰巨的任务，更不用说改进现有的，并且很可能很难涵盖所有怪癖，并且“它在 Firefox 中以这种方式工作，在 IE7 中以这种方式工作，在 IE8+ 中以某种不同的方式工作”类型的网站使用的解决方法。

如果您使用预先存在的 JS 解释器，则几乎没有好处。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T01:25:13.363

速度不是语言引入的属性，而是实现。一种 Javascript 翻译器可能是使用被认为是最佳的算法编写的，而另一种可能是使用草率、缓慢的算法编写的。Javascript 源代码中使用的算法将是最重要的优化尝试。

同样，C++ 编译器通常会尝试自动优化代码。C++ 的实现可能会生成一个 Javascript 翻译器，该翻译器被认为对一台机器来说是最佳的，但对另一台机器来说却非常慢，而另一个可能会产生一个对两台机器都完美或缓慢的 Javascript 翻译器。

# unix - 尝试使用 unix 命令“查找”查找所有签入 RCS 的文件

> ID：15725323
> 
> 赞同：1
> 
> 时间：2013-03-31T01:14:24.650
> 
> 标签：unix, find, rcs

我正在尝试使用 find 命令查找从我的主目录签入 RCS 的所有文件。这包括以`c,v`. 当我运行诸如

```
find . -name \*v 
find . -name \*c,v 
```

这接近我想要的方式，并且会给我看起来像的文件

```
./LABTECH/RCSlab/trig/RCS/main.c,v 
```

这很好，除非我出于某种原因在我的计算机上有一个以 av 或 c,v 结尾但不在 RCS 中的随机文件，它也会返回该文件。诸如 `find . -name \*RCS\*c,v`不起作用并且什么也没有返回之类的事情。`find . -name RCS\*`将返回 RCS 目录，但不会返回 RCS 目录中的任何文件。

有没有办法让我得到一个 find 命令来返回 RCS 目录中的所有文件，从我的主目录开始。我知道我可以在之后过滤掉不需要的文件，但它只需要显示 RCS 目录中的文件即可。

在阅读了所有答案后，我决定假设 ,v 是 RCS 文件是解决此问题的最佳方法，因为我们还没有为我的老师提供脚本来问我们这样的问题。我们也不应该通过管道输入 xargs 或 grep 来解决这个问题，并且 -path 在我的 unix 版本上不起作用。从 perreal 中得知使用 -name 不允许我匹配 '/' 是很有帮助的，这清除了我有但没有问的其他一些问题。我已经了解到，如果没有 -path 或某种类型的以下命令或脚本，就无法做到这一点。感谢大家的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T01:24:50.893

尝试这样做：

```
find . -path '*/RCS/*,v' 
```

如果您的版本`find`缺少该`-path`选项，您可以测试：

```
find . -name '*,v' -print | grep -E 'RCS/[^/]+,v$' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T01:26:00.880

从`find` [手册页](http://www.gnu.org/software/findutils/manual/html_node/find_html/Base-Name-Patterns.html)：

```
-name pattern
       Because the leading directories are removed, the file names
       considered for a match with -name will never include a slash, 
       so `-name a/b' will never match anything (you probably need 
       to  use -path instead). 
```

因此，您可以在 sputnick 的回答中使用`-path`而不是使用。`-name`另一种方法是首先找到相关目录：

```
find -name '*RCS' -type d | xargs -n1 -I{} find {} -name '*.c,v' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T01:44:57.800

您应该假设如果文件名以 结尾`,v`，则它是一个 RCS 文件。任何不存在的闯入者都应该很少。

```
find $HOME -name '*,v' 
```

如果您对使用 RCS 子目录保持一致，那么您可以使用 POSIX[`find`](http://pubs.opengroup.org/onlinepubs/9699919799/utilities/find.html)选项`-path`来跟踪 RCS 子目录中的文件：

```
find $HOME -path '*/RCS/*,v' 
```

如果您必须识别实际的 RCS 文件，那么您需要运行一些程序（脚本）来验证这些文件是否真的是 RCS 文件：

```
find $HOME -name '*,v' -exec rcsfiles {} + 
```

where `rcsfiles` is a hypothetical script that echos the names of the arguments it is given that actually are RCS files. I would use the `rlog` command to identify whether the file is an RCS file or not. The `rcs` command doesn't have a no-op operation that will validate an RCS file. The `rcsfiles` script might well be as simple as:

```
for file in "$@"
do
     if rlog "$file" >/dev/null 2>&1
     then echo "$file"
     fi
done 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-26T00:51:34.973

```
find . -type f -name '*,v' | grep /RCS/ 
```

This will find all files whose names end in `,v` that are under a directory named `RCS`.

If you want to be sure they're *immediately* under an `RCS` directory:

```
find . -type f -name '*,v' | grep '/RCS/[^/]*$' 
```

This ensures that there are no additional `/` characters after the `/RCS/`.

Note that CVS also uses the `,v` suffix (and the same file format) and does not use a special directory name for its repository files; it uses a `CVS` directory, but that's created when you checkout files, and it only contains a handful of metadata files. If you're not using CVS on your system, that probably won't be an issue. If you're using both RCS and CVS, the above should find only `,v` files maintained by RCS, ignoring those maintained by CVS.

The other answers using `find -path` are probably better, but this is an alternative -- and for other purposes, `grep` regular expressions are more powerful than the shell patterns accepted by `find -path`.

# multidimensional-array - C - 将字符数组与字符进行比较

> ID：15725324
> 
> 赞同：0
> 
> 时间：2013-03-31T01:14:25.000
> 
> 标签：multidimensional-array, comparison, char

免责声明 - 这是一些作业，所以我不想要答案，但没有人可以去获得一些指导（除非我想等一个星期，我通过信函学习）。

无论如何，我正在编写一个小扫雷功能。用户输入网格的大小和地雷的数量。然后我打印出电路板和结果。例如，在带有 2 个地雷的 3 * 3 板上，我会打印：

```
...
*..
..*

110
*11
10* 
```

* 显然是地雷。一切都很好，除了结果。我的比较似乎不起作用。我正在使用 == 符号比较字符，这似乎是一种完全合法的方法，但结果对我来说没有意义。

我不想要答案，只想要一个正确的方向。可能是因为我正在比较我设置的原始数组范围之外的数组。如果是这种情况，那么我不知道如何解决这个问题。

我的代码如下。谢谢！

```
#include <stdio.h>
#include <stdlib.h>

void number1(int *stats);
void number2(int *stats);

int main(void)
{
   int n,m,i,j,k,x, rand1, rand2, counter, numMines;
   char choice;

do

{
   printf("------------\n");
   printf("lines (m) = : ");
   scanf("%d", &m);
   printf("\ncolumns (n) = : ");
   scanf("%d", &n);
   printf("\nMines = :");
   scanf("%d", &numMines);

   // check to ensure that numMines is not > n * m
   if (numMines > m * n )
   {
      printf("Error. You cann't have more mines than available spaces ");
      break;
   }

   counter = 0;
   //create minefield array

   char mineGrid[n][m];

    //set all fields in minesweeper to safe (.)

   for (j = 0; j < n; j++)
   {
      for (i = 0; i < m; i++)
      {
         mineGrid[j][i] = '.';
      }
    }
    // Need to randomally make some mines for the array
    //bounds of the random numbers is defined by the values of n and m

   for (i = 0; i < numMines; i++)
   {
      //generate random number
      rand1 = ((double)rand() / ((double)RAND_MAX + 1) * n);
      rand2 = ((double)rand() / ((double)RAND_MAX + 1) * m);
      //set as a mine:
      mineGrid[rand1][rand2] = '*';

      //Note : at the moment, mines can overlap. need to come back to fix this up.
    }
   //print out the msweeper grid
   x = 0;
   for (j = 0; j < n; j++)
   {
      printf("\n");
      x++;
      for (i = 0; i < m; i++)
      {
         printf("%c", mineGrid[j][i]);
      }
         printf("     ");
    }

   // here is where I will print the results:
   printf("\n");
   for (j = 0; j < n; j++)
   {
      for (k = 0; k < m; k++)
      {

      if (mineGrid[x+0][k+1]=='*')
         counter++;
      if (mineGrid[x+0][k-1]=='*')
         counter++;
      if (mineGrid[x+1][k+0]=='*')
         counter++;
      if (mineGrid[x+1][k-1]=='*')
         counter++;
      if(mineGrid[x+1][k+1]=='*')
         counter++;
      if (mineGrid[x-1][k+0]=='*')
         counter++;
      if (mineGrid[x-1][k-1]=='*')
         counter++;
      if(mineGrid[x-1][k+1]=='*')
         counter++;

      printf("%d", counter);
      counter = 0;
      }

   printf("\n");

   }

   printf("\n\nTry again? (y/n:) ");
   scanf("\n%s", &choice);

}while(choice == 'y' || choice == 'Y');
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T01:27:55.707

正如 0A0D 指出的那样，您正在使用`x`您打算使用的地方`j`，而且您可以自由地`1`从您的坐标中添加和减去，而不检查它们是否仍在该字段内。那是自找麻烦。

# ruby - Error when reinstalling Ruby with RVM

> ID：15725327
> 
> 赞同：0
> 
> 时间：2013-03-31T01:14:53.613
> 
> 标签：ruby, rvm, homebrew

I'm attempting to reinstall ruby, but am getting an error. I've included the error and log below.

The error:

```
rvm install ruby-1.9.3-p362
Searching for binary rubies, this might take some time.
No binary rubies available for: osx/10.8/x86_64/ruby-1.9.3-p362.
Continuing with compilation. Please read 'rvm mount' to get more information on binary     rubies.
Installing requirements for osx, might require sudo password.
Already up-to-date.
Installing required packages: libtool, libyaml, libxml2, libxslt, libksba, openssl, sqlite............
Error running 'requirements_brew_libs_install libtool libyaml libxml2 libxslt libksba openssl sqlite',
please read /Users/Henry/.rvm/log/ruby-1.9.3-p362/package_install_libtool_libyaml_libxml2_libxslt_libksba_openssl_sqlite.log
There were package installation errors, make sure to read the log.
Check Homebrew requirements https://github.com/mxcl/homebrew/wiki/Installation 
```

The log file:

```
 cat package_install_libtool_libyaml_libxml2_libxslt_libksba_openssl_sqlite.log
 [2013-03-30 21:07:08] requirements_brew_libs_install
==> Downloading http://ftpmirror.gnu.org/libtool/libtool-2.4.2.tar.gz
Already downloaded: /Library/Caches/Homebrew/libtool-2.4.2.tar.gz
==> ./configure --prefix=/usr/local/Cellar/libtool/2.4.2 --program-prefix=g --enable-    ltdl-install
checking whether make sets $(MAKE)... ./configure: /usr/local/Library/ENV/4.3/sed:    /bin/bash^M: bad interpreter: No such file or directory
no
configure: error: cannot run /bin/sh libltdl/config/config.sub
./configure: /usr/local/Library/ENV/4.3/sed: /bin/bash^M: bad interpreter: No such file or directory
./configure: /usr/local/Library/ENV/4.3/sed: /bin/bash^M: bad interpreter: No such file or directory

READ THIS: https://github.com/mxcl/homebrew/wiki/troubleshooting 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T01:40:19.963

it looks like you are using a custom version of `sed` => `/usr/local/Library/ENV/4.3/sed` and it has broken shebang `/bin/bash^M` - either use native OSX tools or make sure those provided by you are working as expected.

# javascript - How can I remove the comma from this query string's url?

> ID：15725332
> 
> 赞同：-4
> 
> 时间：2013-03-31T01:16:38.473
> 
> 标签：javascript, html, url

```
<script type="text/javascript">
    //GET DATA FROM URL ...index.html?PageTitle,YOUTUBE_ID
    var DATA = window.location.search.replace("?", "");
    //STORE IN ARRAY FOR EASY ACCESS AND EXPANDABILITY
    DATA = DATA.split(",");
    //LOAD THE PAGE TITLE
    document.title = DATA[0]
    //UPDATE THE IFRAME SRC AFTER THE DOCUMENT LOADS
    window.onload = function() {
        var YouTube = document.getElementById('YouTube');
        YouTube.src = "http://www.youtube.com/embed/" + DATA[1]
    };
</script> 
```

```
 <div class='content'>
     <iframe id="YouTube" width="853" height="480"
 frameborder="0" allowfullscreen>
 </div> 
```

I've got this code above, which allows me to change my websites embedded video depending on what the user inputs in the url.

The standard url goes `www.mysite.com/index.html/?,` and then obviously the video code on the end.

How could I rewrite this code so there is no comma after the question mark?

or if possible no question mark at all so just `www.mysite.com/index.html/videocode`

NOTE: the comma is intentional in the standard url example.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T01:33:40.350

The same script, modded:

```
<script type="text/javascript">
    //GET DATA FROM URL ...index.html?YOUTUBE_ID
    var DATA = window.location.search.replace("?", "");
    //UPDATE THE IFRAME SRC AFTER THE DOCUMENT LOADS
    window.onload = function() {
        var YouTube = document.getElementById('YouTube');
        YouTube.src = "http://www.youtube.com/embed/" + DATA;
    };
</script> 
```

You might want to learn a little more about URL's to achieve your last goal (of removing the question-mark).
Then look into `url-rewrite` and `serverside-scripting` to achieve:

```
www.mysite.com/index.html/videocode = www.mysite.com/index.php/videocode = www.mysite.com/videocode 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T01:19:34.087

You can use some Javascript to remove the last character of a string. In effect, removing your comma symbol.

```
var foo = "www.google.com/,";
foo = foo.substring(0, foo.length - 1);
console.log(foo); // "www.google.com/" 
```

# php - string comparision in php

> ID：15725335
> 
> 赞同：0
> 
> 时间：2013-03-31T01:17:24.527
> 
> 标签：php, string

In my project, mysql table value need to be updated, so when user see his/her profile then he/she can update his/her profile, after click the 'update profile' button he/she would see a form which fill with previous data and then he may change his profile or not. I want to check if he/she update information or not, so I fetch that user information from database and check the present information that he/she enter, if values change, then store that changed value on other array and store only that changed information. So I use strcmp( str1, str2) function but it doesn't work, so I use "===" it works only for small data such as name, password etc. But I need also to check if he/she change his/her biography or not, I use that function but it doesn't work.

My code ::

```
 <?php
          $users = $user->user_info_by_id($object->id);  // get user's info from database

          foreach( $users as $user )  {  // 
            if( $user->user_name === $arrayValue['user_name'] )  // here $arrayValue['user_name'] is the recent info that user sent to update his profile 
                echo "<br /> value matched";   // it matched
            else {
                echo "<br /> value not matched";
            }

            if( $user->user_biography === $arrayValue['user_biography'] ) // it doesn't work, here 'user_biography' is 'text' type data in mysql database
                echo "<br /> value matched";
            else 
                echo "<br /> value not matched";  // answer is always 'value not matched'
        }

   ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T02:06:26.037

`strcasecmp` should do the job. I know you mentioned on your answer that you tried strcmp and it didn't work but you did not mention or showed how you were using it.

Try:

```
if($user->user_biography === trim($arrayValue['user_biography']) != 0) {
   // user_name changed. 
 } else {
   //user_name did not change
} 
```

# java - 创建对象时遇到问题

> ID：15725340
> 
> 赞同：0
> 
> 时间：2013-03-31T01:18:30.450
> 
> 标签：java, object

我正在尝试在我的应用程序的主要方法中创建员工类的对象，但它找不到变量部门姓氏名字或薪水，我不确定为什么这是我的陈述的样子

```
Employee employee = new Employee( department, lastName, firstName, salary); 
```

员工类看起来像

```
package javaapplication14;
public class Employee implements DepartmentConstants, Displayable 
{
    private int department;
    private String firstName;
    private String lastName;
    private double salary;

    public Employee(int department, String lastName, String firstName,
        double salary)
    {
        this.department = department;
        this.lastName = lastName;
        this.firstName = firstName;
        this.salary = salary;
    }

    @Override
    public String getDisplayText() 
    {
        String displayText = firstName + lastName + salary + department ;
        return displayText;
    }
} 
```

我不确定是否需要展示其实现的接口，但如果需要，我将编辑我的帖子以包含它们。主要方法是

```
package javaapplication14;
public class DisplayableTestApp
{
    public static void main(String args[])
    {
        System.out.println("Welcome to the Displayable Test application\n");

        // create an Employee object
        Employee employee = new Employee( department, lastName, firstName, salary);

        // display the employee information
        String displayTextEmployee = employee.getDisplayText();
        System.out.println(displayTextEmployee);

        // create a Product object
        Product product = new Product();
        // display the product information
        String displayText = product.getDisplayText();
        System.out.println(displayText);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T01:23:34.750

> 我正在尝试在我的应用程序的主要方法中创建员工类的对象，但它找不到变量

它找不到变量，因为它们不存在于您的构造函数调用的范围内。您必须创建变量并将其传递给构造函数。

该类`Employee`接受构造函数：

```
public Employee(int department, String lastName, String firstName, double salary) 
```

所以，举个例子：

```
Employee employee = new Employee(1, "Smith", "John", 50000); 
```

或者：

```
int department = 1;
String lastName = "Smith";
String firstName = "John";
double salary = 50000;
Employee employee = new Employee(department, lastName, firstName, salary); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T01:51:58.440

Your are passing the 4 variables into the constructor but you haven't created them yet. It would be a lot easier to keep them straight if you didn't use the same name or something close in so many different places. For instance if you made the class look like this.

```
public class Employee implements Department Constants, Displayable
{
    private int employeeDepartmet;
    private String employeeFirstName;
    private String employeeLastName;
    private double employeeSalary;

    public Employee (int dept, String firstN, String lastN, double pay)
    {
        employeeDepartment = dept;
        employeeFirstName = firstN;
        employeeLastName = lastN;
        employeeSalary = pay;
    }

@Override
public getDisplayText ()
    {
        String displayText = employeeDepartment + employeeFirstName + employeeLastName + employeeSalary;
        return displayText
    }
} 
```

Then in your main function include

```
int department = 3;
String firstName = "Joe";
String lastName = "Adams";
double salary = 7.45;

Employee employeeOne = new Employee(department, firstName, lastName, salary); 
```

You don't have to use this.department to distinguish between the variables that have the same name, it is easy to see which variable is being referred to since they each have a different name and when your app can't find department, firstName, and lastName, and salary, you know that it isn't referring to employeeDepartment etc.

# assembly - 在 MIPS 程序集中将整数转换为二进制/十进制？

> ID：15725343
> 
> 赞同：0
> 
> 时间：2013-03-31T01:19:06.790
> 
> 标签：assembly, binary, integer, mips

我在 MIPS 中有一个程序，它将寄存器中的值“2”或“10”传递给一个函数，该函数应该以二进制或十进制打印一些整数，具体取决于是否将 2 或 10 传递给函数. 我试图想出聪明的方法来实现这一点，但想不出任何办法，所以我来寻求帮助。谁能帮我吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T01:22:46.887

只需检查第 4 位是 1 还是 0。您可以对掩码使用位移位或`OR`运算符来执行此操作。`0x00001000`

# assembly - chat on assembly using serial port

> ID：15725344
> 
> 赞同：0
> 
> 时间：2013-03-31T01:19:10.480
> 
> 标签：assembly, x86, serial-port, dos, interruption

I'm working on a chat using assembly and i got this huge doubt, I'm currently using

int 21, AH= 0Ah

to get a string from the keyboard wich I will later send, char by char, through the serial port, but then i was wondering how, will I receive a msg from the other computer running the same program if this one is in a interruption waiting for me to input a string.

How can i get around the fact that when inputing a string, the whole program is interrupted and anything being sent on the mean time will be lost?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T02:40:25.207

Use [function 6 with `DL` = 0FFh](http://www.ctyme.com/intr/rb-2559.htm).

It will return immediately either with data or without. It won't wait for keyboard input.

# php - 比较两个表输入，然后根据 id 输出

> ID：15725348
> 
> 赞同：0
> 
> 时间：2013-03-31T01:20:09.483
> 
> 标签：php, mysql, arrays

### 背景

我的问题：我有两个表，其中的信息可能存在也可能不存在于两个表中。主要是身份证、姓名和账号。

表结构：

```
 Table 1                 Table 2
id |  a_name |num      id  |  b_name   | num
-----------------------------------------------
1   |  Bob   | 222  |   1  |   same    | 123 
2   |  Jane  | 1a3  |   2  |   Joe     | 6a4 
3   |  same  | 321  |   3  |   Max     | 123
4   |  same  | 123  |   4  |   same    | 222 
```

我首先要做的是检查表1到表2中是否存在该名称，并确保表2没有表1中存在的任何条目。但是，我还必须比较和对比对应的帐号以便输出类似于：

```
 Final Table/Array 
id  |  name   |num
---------------------
1   |  Bob   | 222
2   |  Jane  | 1a3
3   |  Joe   | 6a4
4   |  Max   | 123 
5   |  same  | 123  
6   |  same  | 222  
7   |  same  | 321 
```

在比较和对比这两个表之后，我需要能够提取与正确表相关的 id，然后将它们输出到选择器中。

关于如何进行的任何建议，以及正确编码的一些提示？

我正在考虑将它们都循环到单独的数组中，使用两个不同的 in_array 语句，然后根据 if -else 语句输出响应......但我知道这肯定行不通，因为我不知道它们来自哪个表.

关于最佳方法的建议？我不想向您展示我目前拥有的代码，因为它令人难以置信，我现在什至无法理解。

### 问题说明：

我只需要输出一个不同的（非重复的）名称（和数字）列表，并且能够识别 1）它来自哪个表和 2）原始表中条目的 id，以便我可以使用所有列对应的标识。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T03:57:51.390

> 我只需要输出一个不同的（非重复的）名称列表，并且能够识别 1）它来自哪个表和 2）它的 id。

鉴于您所说的这些条件，这是不可能的：

1.  一个表可能有多次相同的名称。
2.  每个表中可能会出现一个名称。

如何生成具有单个源表和 id 的单个名称列表？如果您选择与“获胜者”同名的记录之一，那么您需要说明`(table, id)`对于给定名称，一对比另一对更受青睐的标准。

例如，以下查询将产生您想要的输出，但据我所知，这样的列表是无用的

```
SELECT * FROM
  (SELECT a_name AS name, 'table1' AS table, id FROM table1
   UNION ALL
   SELECT b_name AS name, 'table2' AS table, id FROM table2)
AS t1 GROUP BY name 
```

给定您的示例数据，此查询将产生以下可疑实用程序的结果：

```
name | table  | id
-----+--------+---
Bob  | table1 | 1
Jane | table1 | 2
Joe  | table2 | 2
Max  | table2 | 3
same | table2 | 4 
```

这些结果满足您的标准：没有重复的名称，并且每个名称都有一个（许多可能的）源表和 ID。但是为了什么目的？

如果您的目标是探索不同表中匹配名称之间所有可能的相关性，也许您应该使用完全外连接（在 MySQL 中使用左外连接和右外连接之间的联合进行模拟）。

```
SELECT table1.id AS a_id, a_name, table1.num AS a_num,
  table2.id AS b_id, b_name, table2.num AS b_num
  FROM table1 LEFT OUTER JOIN table2 ON a_name=b_name
UNION ALL
SELECT table1.id AS a_id, a_name, table1.num AS a_num,
  table2.id AS b_id, b_name, table2.num AS b_num
  FROM table1 RIGHT OUTER JOIN table2 ON a_name=b_name 
```

```
| a_id | a_name | a_num| b_id  | b_name | b_num  |
+------+--------+------+-------+--------+--------+
| 1    | Bob    | 222  | NULL  | NULL   | NULL   |
| 2    | Jane   | 1a3  | NULL  | NULL   | NULL   |
| 3    | same   | 321  | 1     | same   | 123    |
| 3    | same   | 321  | 4     | same   | 222    |
| 4    | same   | 123  | 1     | same   | 123    |
| 4    | same   | 123  | 4     | same   | 222    |
| 3    | same   | 321  | 1     | same   | 123    |
| 4    | same   | 123  | 1     | same   | 123    |
| NULL | NULL   | NULL | 2     | Joe    | 6a4    |
| NULL | NULL   | NULL | 3     | Max    | 123    |
| 3    | same   | 321  | 4     | same   | 222    |
| 4    | same   | 123  | 4     | same   | 222    | 
```

# c# - 嵌套子查询从多个表中进行选择

> ID：15725350
> 
> 赞同：0
> 
> 时间：2013-03-31T01:20:14.890
> 
> 标签：c#, sql, data-binding, datagridview, oracle10g

我有三张桌子：

```
Years (YearId,Year)
Months (MonthID,Month)
Date (DateID,YearID,MonthID)
Client (CLientID,ClientName)
Payment (PayID,ClientID,DateID,Amount) 
```

我想将 DataGridView 填写为：

```
Client Name, Amount, Year, Month 
```

我使用了这个语句，但它不起作用：

```
Select * From (select Year From Years Where YearID = (Select YearId From Date Where dateID = (Select DateID From Payment))),(Select Month From Months Where Monthid = (Select MonthID From Date Where dateID = (Select DateID From Payment))),(Select ClientName From Client Where ClientID = (Select ClientID From Payment),(Select amont From Payment) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T01:26:08.523

听起来你只是想使用`INNER JOINs`：

```
SELECT C.ClientName,
    P.Amount,
    Y.Year,
    M.Month
FROM Payment P
    INNER JOIN Client C 
        ON P.ClientID = C.ClientID
    INNER JOIN Date D 
        ON P.DateId = D.DateId
    INNER JOIN Years Y
        ON D.YearId = Y.YearId
    INNER JOIN Months M
        ON D.MonthId = M.MonthId 
```

请参阅下文以获得良好的视觉表示`JOINs`：

[JOINS 的可视化表示](http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins)

# clojure - Clojure/ClojureScript double function undeclared

> ID：15725355
> 
> 赞同：2
> 
> 时间：2013-03-31T01:21:10.610
> 
> 标签：clojure, clojurescript

I'm writing a function that's part of a Clojure/ClojureScript crossover, and I'd used the `double` function. When I compile this with cljsbuild, it complains that `double` is an undeclared var.

```
WARNING: Use of undeclared Var my-ns/double 
```

**What's an alternative function to `double` that will operate on both platforms?** FYI, I'm using it to convert a rational after division into a double — I'm then formatting this as a string.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-23T11:02:48.770

[ClojureScript currently only supports integer and floating point literals](https://github.com/clojure/clojurescript/wiki/Differences-from-Clojure) that map to JavaScript primitives. Ratio, BigDecimal, and BigInteger literals are currently not supported.

The good news is that [javascript floats are already double precision](https://stackoverflow.com/questions/3605925/does-javascript-have-double-floating-point-number-precision) so there is no need to coerce them into doubles explicitly. The bad news is that there is no support for rational numbers so you can't use them.

You will either need to rewrite the expressions that uses rational numbers or separate the code for the JVM from the code targeted at JS. Have a look at the [cljx project](https://github.com/lynaghk/cljx) to do just that.

Concerning your use case. From your description I understand you are trying to rewrite an expression similar to this:

```
(str (double (/ 2/4 2)))
=> "0.25" 
```

You could simply rewrite that expression in CLJS like this:

```
(str (double (/ (/ 2 4) 2)))
=> "0.25" 
```

Note that you can leave out the call to double:

```
(str (/ (/ 2 4) 2))
=> "0.25" 
```

Hope this solves you problem.

# java - implementing cyclicbarrier using threads and semaphores for specific thread types in java

> ID：15725356
> 
> 赞同：0
> 
> 时间：2013-03-31T01:21:12.067
> 
> 标签：java, multithreading, semaphore, cyclicbarrier

```
public class cyclicBarrier {
    private static int n;
    private static int count;
    private static semaphore mutex;
    private static semaphore turnstile;
    private static semaphore turnstile2;

    public cyclicBarrier(int n){
        this.n = n;
        this.count = 0;
        this.mutex = new semaphore(1);
        this.turnstile = new semaphore(0);
        this.turnstile2 = new semaphore(0);
    }

    public synchronized void down() throws InterruptedException{
        this.phase1();
        this.phase2();
    }

    private synchronized void phase1() throws InterruptedException {
        this.mutex.down();
        this.count++;
        if (this.count == this.n){
            for (int i=0; i< this.n; i++){
                          this.turnstile.signal();
                    }
        }
        this.mutex.signal();
        this.turnstile.down();
    }

    private synchronized void phase2() throws InterruptedException {
        this.mutex.down();
        this.count--;
        if (this.count == 0){
            for (int i=0; i< this.n; i++){
                          this.turnstile2.signal();
                    }
        }
        this.mutex.signal();
        this.turnstile2.down();
    }
} 
```

**&& here is class semaphore just in case**

```
public class semaphore{
    private int counter;

    public semaphore(int number){
        if (number > 0) {
            this.counter = number;
        }
    }

    public synchronized void signal(){
        this.counter++;
        notifyAll();
    }

    public synchronized void down() throws InterruptedException{
        while (this.counter <= 0){
            wait();
        }
        this.counter--;
    }
} 
```

This is a code that I wrote to implement **Cyclicbarriers** using **threads**. I took the pseudo code from the book along with the notes on deadlocks so I think its pretty much ok "there might be a bug though". The first phase is for **"arriving threads"** and the 2nd phase is for **"running threads in the critical region together"**. My question is as follows... how to change the code in order to consider specific types of threads? For instance, there are hydrogen threads and oxygen threads and I want them to execute bond() everytime there are 2 hydrogen atoms and 1 oxygen atom at the barrier. Thank you in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-11T11:55:22.210

Instead of giving you an answer, I'll give you a hint. Let me know if you want me the full answer.

First, fix your code according to [my answer](https://stackoverflow.com/a/26863647/58668) to [your other question](https://stackoverflow.com/q/15753869/58668)—if I'm right about its flaws, that is :)

Second, imagine that we have **m** threads and a **barrier(n)** where m >= 2n, each thread doing

```
while True:
    noncritical()
    barrier.enter() # e.g. phase1()
    critical()
    barrier.leave() # e.g. phase2() 
```

If you implement **enter()** and **leave()** as I have suggested, you may have **2n** threads in the critical section. To fix this problem, I have come up with the following construct:

```
class N_At_A_Time_Barrier(n):
    fields:
        occupied = Semaphore(n)
        barrier = Barrier(n)
    method enter():
        occupied.down()
        barrier.down()
    method leave():
        occupied.up() 
```

In the terminology of [*The Little book of Semaphores*](http://www.greenteapress.com/semaphores/), **occupied** is a Multiplex. The hint: the solution to the H2O problem is very similar to this. My solution uses a **Barrier(1+2)** and... something else :)

(Footnote: there are more efficient ways of implementing an **N_At_A_Time_Barrier**, where each group of **n** threads has their own shared state set up by the first thread to arrive, but that's a lot more complicated and I don't think it relates to the H2O problem as neatly.)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T01:59:12.103

do you need to implement Cyclicbarriers yourself? (homework) or can you use the JDK's implementation? [http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CyclicBarrier.html](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CyclicBarrier.html)

Maybe you could extend the await() method, to include your Atom kind, and add a method that tells you what atoms are waiting at the barrier, if you find the condition of having say H20, you can call a callback method, in this case bond(Atoms[] atoms)

# java - Why is this Java foreach loop throwing errors?

> ID：15725362
> 
> 赞同：0
> 
> 时间：2013-03-31T01:22:22.307
> 
> 标签：java, loops

I have the following simple Java statement:

```
public static void main(String[] args) 
{
    int[] grades = {102, 105, 98, 105};

    Sorts.selectionSort(grades);

    for (int grade : grades) {
   // {
        System.out.println(grade);
        try {
            System.out.print(grades[grade] + "     ");
        } catch (ArrayIndexOutOfBoundsException e) {
            System.out.println("Error!");
        }
    } 
```

And I'm getting the following output:

```
102
Error!
105
Error!
98
Error!
105
Error! 
```

Why would the loop iterate to values that aren't in the array? I'm quite confused.

Thank you.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T01:24:13.643

`int grade` is the value of each element in the array, not the index.

If you want to get each element of `int[] grades = {102, 105, 98, 105};` you should use a regular `for` loop like this:

```
for (int i = 0; i < grades.length; i++) {
  System.out.println(grades[i]);
} 
```

This will work since the index of each element in the array ranges from 0 to 3.

Take a look at the [enhanced `for loop`](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/for.html) documentation.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T01:26:29.573

It's throwing index out of bound errors, because the "grade" variable is already the value inside the array, not the index.

So it will print it out fine on the first System.out.println(), but then you're trying to do this inside the try/catch

grades[102]

And your array doesn't have that index. it's maximum index is 3 (-> 105).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T01:24:09.203

The foreach loop iterates over the *values* of the array, not the indices.

Therefore, `grade` is `102`.
You're trying to access the 103^(rd) (0-based) element of a 4-item array.
That's not going to work

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-31T01:29:54.867

Your first print statement uses `grade` appropriately. The `for` loop iterates by assigning each value in the array to `grade`.

Your second print statement uses `grade` as an index into `grades`. This is wrong because the `grade` is a value in the array, not an index. Although the `for` loop you wrote is simpler than a `for` loop with an index, sometimes you do need to know the index so you might want to rewrite your `for` loop.

# javascript - Jquery + JS Manual mouseclick works but not with .click

> ID：15725363
> 
> 赞同：-1
> 
> 时间：2013-03-31T01:22:30.317
> 
> 标签：javascript, jquery

I'm building a website ontop of e-commerce framework from Sweden. For this project the client wants me to manipulate the shopping cart. In the beginning I got it working so I know there's a way to do it(I switched method, that why I lost that and some more which you can read below). But!!

I render everything on the run, and i outputs buttons which if I press the buttons manually they work like a charm. So when finishing my work I thought I could just make a function that finds all buttons and click them manually, but NO. That submits the form which takes me to a page that's that only there to increment cart quantity.

Here's the div

```
<form method="post" action="/shoppingcart/increase_product_count/" 
class="product_form" name="product_built_div">
<input type="hidden" value="" name="product_id" id="kontroll">
<input type="submit" value="Kontroll"></form> 
```

When looking at request they look like this if I click manually.

```
1743
/legacy-template-api/conceptual-id-lookup
GET
200
OK
text/plain
cache.js:2013
Script
369 B
4 B
348 ms
347 ms
347 ms1 ms
514f4eb04b96714970000004/
/carts
POST
200
OK
application/vnd.ebutik.cart+xml
cache.js:2013
Script
1.2 KB
878 B
216 ms
214 ms
214 ms2 ms
shoppingcart/
/shoppingcart/show_widget
GET
200
OK
text/html
cache.js:2013
Script 
```

Clicking like this this holds the correct info, I've checked aswell as I get sent to the product increment page.

```
 $(this).find('input[type=submit]').click(); 
```

Request data for JQUERY .click()

```
increase_product_count/
/shoppingcart
POST
(pending) 
```

Pending then turns into not found?

I did notice that i cant't find my built div in the page source I'm using chrome broswer. Is there another issue?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T01:45:29.600

To submit a form using jQuery, check out [`.submit()`](http://api.jquery.com/submit/)

To simulate clicks of other non-submit buttons, your [`.click()`](http://api.jquery.com/click/) should work.

Alternatively to `.click()`, you can try [`.trigger("click")`](http://api.jquery.com/trigger/).

[Examples on using `.submit()`](https://stackoverflow.com/questions/3752134/jquery-submit-form)

# design-patterns - Head First Design Patterns - 装饰器模式描述/成本

> ID：15725365
> 
> 赞同：2
> 
> 时间：2013-03-31T01:22:40.620
> 
> 标签：design-patterns, decorator

我对 OO 设计模式很陌生，对 Java 也比较陌生。

我的问题是关于 Head First Designer Patterns Starbuzz 示例中的装饰器示例。

我无法理解外部包装器如何调用内部包装器，特别是这些示例中的描述如何连接起来。

例如：

这是摩卡类（装饰）：

```
public class Mocha extends CondimentsDecorator {

Beverage beverage;

public Mocha(Beverage beverage) {

    this.beverage = beverage;
}

public String getDescription()
{
    return beverage.getDescription() + " , Mocha";
}

public double cost()
{
    return .20 +  beverage.cost();
}

} 
```

这是饮料类（基础）：

```
public abstract class Beverage {

String description = "Unknown Beverage";

public String getDescription()
{

    return description;
}

public abstract double cost();

} 
```

黑烤类：

```
public class DarkRoast extends Beverage {

public DarkRoast() {
    description = "Dark Roast";
}

@Override
public double cost() {

    return .99;
}

} 
```

所以，如果我运行这个：

```
 Beverage beverage2 = new DarkRoast();
 beverage2 = new Mocha(beverage2);
 beverage2 = new Mocha(beverage2);

 System.out.println(beverage2.getDescription() + " $" + beverage2.cost()); 
```

输出是：

```
Dark Roast , Mocha , Mocha $1.39 
```

我不明白描述是如何构建的并将成本加在一起？描述和成本的状态如何保持？我在这里遗漏了一些明显的东西吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T01:47:02.930

如果您不重复使用名称，它将有所帮助。

## 有意义的名称示例

假设您将代码编写为：

```
Beverage roast = new DarkRoast();
mocha = new Mocha(roast);
doubleMocha = new Mocha(mocha);
System.out.println(doubleMocha.getDescription() + " $" + doubleMocha.cost()); 
```

变量`mocha`是 Mocha 和`mocha.beverage == roast`DarkRoast。

变量`doubleMocha`是 Mocha，并且`doubleMocha.beverage == mocha`是 Mocha。

请注意`doubleMocha.beverage.beverage == roast`. 成本也可以在整个链条上进行委派：

```
dobleMocha.cost() == .20 + doubleMocha.beverage.cost() 
                  == .20 + mocha.cost() 
                  == .20 + .20 + mocha.beverage.cost()
                  == .20 + .20 + roast.cost()
                  == .20 + .20 + 1.99 = 2.39 
```

你可以`doubleMocha.description()`用同样的方法想办法。

### 其他问题

随着你的进步，你会学到更多的东西。

1.  装饰器在 Java IO 中被大量使用。一种将 InputReaders 包装在 BufferedInputReaders 中，然后可能包装在更奇特的类中。
2.  切勿使用`float`s 或`double`s 表示货币值。你有没有见过对你的 2.99 美元商品征收 4.5% 税并将其报告为 3.12455 美元的幼稚代码的结果？错误地四舍五入也很容易。

### 阅读更多

如果您能找到以下书籍的二手副本，请购买：

*   Felleisen、Friedman 和 Johnson[的 A Little Java, A Few Patterns](https://www.goodreads.com/book/show/470776.A_Little_Java_a_Few_Patterns)

它对这种类型的代码有很好的描述。

### 垃圾收集器保留引用

顺便说一句，仅使用一个变量名的原始代码是有效的，因为首先将变量设置为一个`DarkRoast`对象。然后例程创建一个`Mocha`使用该对象的`DarkRoast`对象，并且一旦将实例变量设置为该`Mocha`对象，原来`DarkRoast`的仍然是强可达的。垃圾收集器不会处理它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T01:32:21.720

描述是用

```
public String getDescription() 
{
    return beverage.getDescription() + " , Mocha";
} 
```

请注意，类的描述`Mocha`调用了`Beverage`类的描述。

费用计算如下

```
public double cost()
{
    return .20 +  beverage.cost();
} 
```

所以`Mocha`类的成本调用类的成本`Beverage`作为其计算的一部分。

# java - 用Java写一个mode方法来查找数组中出现频率最高的元素

> ID：15725370
> 
> 赞同：14
> 
> 时间：2013-03-31T01:23:25.797
> 
> 标签：java, arrays, methods, mode

问题是：

> 编写一个名为 mode 的方法，它返回整数数组中出现频率最高的元素。假设数组至少有一个元素，并且数组中的每个元素的值都在 0 到 100 之间。通过选择较低的值来打破平局。
> 
> 例如，如果传递的数组包含值 {27, 15, 15, 11, 27}，您的方法应该返回 15。（提示：您可能希望查看本章前面的 Tally 程序以了解如何解决这个问题呢。）

下面是我的代码，除了单元素数组之外几乎可以工作

```
public static int mode(int[] n)
{
    Arrays.sort(n);

    int count2 = 0;
    int count1 = 0;
    int pupular1 =0;
    int popular2 =0;

    for (int i = 0; i < n.length; i++)
    {
            pupular1 = n[i];
            count1 = 0;    //see edit

        for (int j = i + 1; j < n.length; j++)
        {
            if (pupular1 == n[j]) count1++;
        }

        if (count1 > count2)
        {
                popular2 = pupular1;
                count2 = count1;
        }

        else if(count1 == count2)
        {
            popular2 = Math.min(popular2, pupular1);
        }
    }

    return popular2;
} 
```

**编辑**：终于想通了。更改`count1 = 0;`为`count1 = 1;`现在一切正常！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2015-03-31T16:19:53.583

对于此类问题，您应该使用哈希图。将每个元素输入 hashmap 需要 O(n) 时间，检索元素需要 o(1) 时间。在给定的代码中，我基本上取了一个全局最大值并将其与从 hashmap 的“get”上接收到的值进行比较，每次我在其中输入一个元素时，看看：

hashmap有两部分，一是key，二是value，当你对key做get操作时，返回它的值。

```
public static int mode(int []array)
{
    HashMap<Integer,Integer> hm = new HashMap<Integer,Integer>();
    int max  = 1;
    int temp = 0;

    for(int i = 0; i < array.length; i++) {

        if (hm.get(array[i]) != null) {

            int count = hm.get(array[i]);
            count++;
            hm.put(array[i], count);

            if(count > max) {
                max  = count;
                temp = array[i];
            }
        }

        else 
            hm.put(array[i],1);
    }
    return temp;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-31T01:38:13.430

您应该能够在 N 次操作中执行此操作，这意味着只需一次 O(n) 时间。

使用 map 或 int[] （如果问题仅针对整数）来增加计数器，并使用一个变量来保留具有最大计数的键。每次增加计数器时，询问值是什么并将其与您上次使用的键进行比较，如果值更大则更新键。

```
public class Mode {
public static int mode(final int[] n) {
    int maxKey = 0;
    int maxCounts = 0;

    int[] counts = new int[n.length];

    for (int i=0; i < n.length; i++) {
        counts[n[i]]++;
        if (maxCounts < counts[n[i]]) {
            maxCounts = counts[n[i]];
            maxKey = n[i];
        }
    }
    return maxKey;
}

public static void main(String[] args) {
    int[] n = new int[] { 3,7,4,1,3,8,9,3,7,1 };
    System.out.println(mode(n));
}
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-06-20T07:26:39.367

```
public int mode(int[] array) {
    int mode = array[0];
    int maxCount = 0;
    for (int i = 0; i < array.length; i++) {
        int value = array[i];
        int count = 1;
        for (int j = 0; j < array.length; j++) {
            if (array[j] == value) count++;
            if (count > maxCount) {
                mode = value;
                maxCount = count;
            }
        }
    }
    return mode;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-31T04:11:51.583

检查这个.. 简介：选择数组的每个元素并将其与数组的所有元素进行比较，天气它是否等于选择。

```
 int popularity1 = 0;
  int popularity2 = 0;
  int popularity_item, array_item; //Array contains integer value. Make it String if array contains string value.
  for(int i =0;i<array.length;i++){
      array_item = array[i];
      for(int j =0;j<array.length;j++){
          if(array_item == array[j])
             popularity1 ++;
          {
      if(popularity1 >= popularity2){
          popularity_item = array_item;
          popularity2 = popularity1;
      }
      popularity1 = 0;
  }
  //"popularity_item" contains the most repeted item in an array. 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-30T13:54:01.867

我会使用这段代码。它包括一个`instancesOf`函数，它贯穿每个数字。

```
public class MathFunctions {

public static int mode(final int[] n) {
    int maxKey = 0;
    int maxCounts = 0;

    for (int i : n) {
        if (instancesOf(i, n) > maxCounts) {
            maxCounts = instancesOf(i, n);
            maxKey = i;
        }
    }

    return maxKey;
}

public static int instancesOf(int n, int[] Array) {
    int occurences = 0;
    for (int j : Array) {
        occurences += j == n ? 1 : 0;
    }
    return occurences;
}

public static void main (String[] args) {
    //TODO Auto-generated method stub
    System.out.println(mode(new int[] {100,200,2,300,300,300,500}));
}
} 
```

我注意到 Gubatron 发布的代码在我的计算机上不起作用；它给了我一个`ArrayIndexOutOfBoundsException`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-04-09T12:03:45.250

这是我的答案。

```
public static int mode(int[] arr) {
    int max = 0;
    int maxFreq = 0;

    Arrays.sort(arr);
    max = arr[arr.length-1];

    int[] count = new int[max + 1];

    for (int i = 0; i < arr.length; i++) {
        count[arr[i]]++;
    }

     for (int i = 0; i < count.length; i++) {
        if (count[i] > maxFreq) {
            maxFreq = count[i];
        }
    }

    for (int i = 0; i < count.length; i++) {
        if (count[i] == maxFreq) {
            return i;
        }
    }
    return -1;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-03-05T19:53:54.060

我知道这个问题是不久前提出的，但我想添加一个我认为可以扩展原始问题的答案。这个问题的附录是在不依赖预设范围（在本例中为 0 到 100）的情况下编写模式方法。我已经为 mode 编写了一个版本，它使用原始数组中的值范围来生成计数数组。

```
public static int mode(int[] list) {

    //Initialize max and min value variable as first value of list
    int maxValue = list[0]; 
    int minValue = list[0];

    //Finds maximum and minimum values in list
    for (int i = 1; i < list.length; i++) {
        if (list[i] > maxValue) {
            maxValue = list[i];
        }

        if (list[i] < minValue) {
            minValue = list[i];
        }
    }

    //Initialize count array with (maxValue - minValue + 1) elements  
    int[] count = new int[maxValue - minValue + 1];

    //Tally counts of values from list, store in array count
    for (int i = 0; i < list.length; i++) {
        count[list[i] - minValue]++; //Increment counter index for current value of list[i] - minValue
    }

    //Find max value in count array
    int max = count[0]; //Initialize max variable as first value of count

    for (int i = 1; i < count.length; i++) {
        if (count[i] > max) {
            max = count[i];
        }
    }

    //Find first instance where max occurs in count array
    for (int i = 0; i < count.length; i++) {
        if (count[i] == max) {
            return i + minValue; //Returns index of count adjusted for min/max list values - this is the mode value in list
        }
    }
    return -1; //Only here to force compilation, never actually used
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-11-15T05:24:23.617

我最近做了一个程序，可以计算一些不同的统计数据，包括模式。虽然编码可能是初级的，但它适用于任何整数数组，并且可以修改为双精度、浮点数等。对数组的修改是基于删除数组中不是最终模式值的索引. 这允许您显示所有模式（如果有多个）以及出现的数量（模式数组中的最后一项）。下面的代码是运行此代码所需的 getMode 方法以及 deleteValueIndex 方法

```
import java.io.File;
import java.util.Scanner;
import java.io.PrintStream;

public static int[] getMode(final int[] array) {           
  int[] numOfVals = new int[array.length];
  int[] valsList = new int[array.length];

  //initialize the numOfVals and valsList

  for(int ix = 0; ix < array.length; ix++) {
     valsList[ix] = array[ix];
  }

  for(int ix = 0; ix < numOfVals.length; ix++) {
     numOfVals[ix] = 1;
  }

  //freq table of items in valsList

  for(int ix = 0; ix < valsList.length - 1; ix++) {
     for(int ix2 = ix + 1; ix2 < valsList.length; ix2++) {
        if(valsList[ix2] == valsList[ix]) {
           numOfVals[ix] += 1;
        }
     }
  }

  //deletes index from valsList and numOfVals if a duplicate is found in valsList

  for(int ix = 0; ix < valsList.length - 1; ix++) {   
     for(int ix2 = ix + 1; ix2 < valsList.length; ix2++) {
        if(valsList[ix2] == valsList[ix]) {
           valsList = deleteValIndex(valsList, ix2);
           numOfVals = deleteValIndex(numOfVals, ix2);
        }
     }
  }

  //finds the highest occurence in numOfVals and sets it to most

  int most = 0;

  for(int ix = 0; ix < valsList.length; ix++) {
     if(numOfVals[ix] > most) {
        most = numOfVals[ix];
     }
  }

  //deletes index from valsList and numOfVals if corresponding index in numOfVals is less than most

  for(int ix = 0; ix < numOfVals.length; ix++) {
     if(numOfVals[ix] < most) {
        valsList = deleteValIndex(valsList, ix);
        numOfVals = deleteValIndex(numOfVals, ix);
        ix--;
     }
  }

  //sets modes equal to valsList, with the last index being most(the highest occurence)

  int[] modes = new int[valsList.length + 1];

  for(int ix = 0; ix < valsList.length; ix++) {
     modes[ix] = valsList[ix];
  }

  modes[modes.length - 1] = most;

  return modes;

}

public static int[] deleteValIndex(int[] array, final int index) {   
  int[] temp = new int[array.length - 1];
  int tempix = 0;

  //checks if index is in array

  if(index >= array.length) {
     System.out.println("I'm sorry, there are not that many items in this list.");
     return array;
  }

  //deletes index if in array

  for(int ix = 0; ix < array.length; ix++) {
     if(ix != index) {
        temp[tempix] = array[ix];
        tempix++;
     }
  }
  return temp;
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-05-06T00:05:33.253

根据@codemania23 的回答和[HashMap 的 Java 文档，](https://docs.oracle.com/javase/8/docs/api/java/util/Map.html "HashMap 的 Java 文档")我编写了这段代码，并测试了一个**返回数字数组中出现次数最多**的数字的方法。

```
import java.util.HashMap;

public class Example {

    public int mostOcurrentNumber(int[] array) {
        HashMap<Integer, Integer> map = new HashMap<>();
        int result = -1, max = 1;
        for (int arrayItem : array) {
            if (map.putIfAbsent(arrayItem, 1) != null) {
                int count = map.get(arrayItem) + 1;
                map.put(arrayItem, count);
                if (count > max) {
                    max = count;
                    result = arrayItem;
                }
            }
        }

        return result;
    }
} 
```

单元测试

```
import org.junit.Test;

import static junit.framework.Assert.assertEquals;

public class ExampleTest extends Example {

    @Test
    public void returnMinusOneWhenInputArrayIsEmpty() throws Exception {
        int[] array = new int[0];
        assertEquals(mostOcurrentNumber(array), -1);
    }

    @Test
    public void returnMinusOneWhenElementsUnique() {
        int[] array = new int[]{0, 1, 2, 3, 4, 5, 6, 7, 8, 9};
        assertEquals(-1, mostOcurrentNumber(array));
    }

    @Test
    public void returnOne() throws Exception {
        int[] array = new int[]{0, 1, 0, 0, 1, 1, 1};
        assertEquals(1, mostOcurrentNumber(array));
    }

    @Test
    public void returnFirstMostOcurrentNumber() throws Exception {
        int[] array = new int[]{0, 1, 0, 1, 0, 0, 1, 1};
        assertEquals(0, mostOcurrentNumber(array));
    }
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-07-18T23:05:51.143

这不是该块中最快的方法，但是如果您不想让自己参与 HashMaps 并且还想避免使用 2 个 for 循环来解决复杂性问题，这很容易理解......

```
 int mode(int n, int[] ar) {
    int personalMax=1,totalMax=0,maxNum=0;

    for(int i=0;i<n-1;i++)
    {

        if(ar[i]==ar[i+1])
        {
            personalMax++;

            if(totalMax<personalMax)
            {
                totalMax=personalMax;
                maxNum=ar[i];
            }
        }    
        else
        {
            personalMax=1;
        }
    }
    return maxNum;
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-07-20T05:27:50.583

在这里，我使用单循环编码。我们从 a[j-1] 获取模式，因为 localCount 最近在 j 为 j-1 时更新。N也是数组的大小&计数被初始化为0。

```
 //After sorting the array 
        i = 0,j=0;
        while(i!=N && j!=N){
            if(ar[i] == ar[j]){
                localCount++;
                j++;
            }
            else{
                i++;
                localCount = 0;
            }
            if(localCount > globalCount){
                globalCount = localCount;
                mode = ar[j-1]; 
            }
        } 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-08-27T09:44:19.493

```
 Arrays.sort(arr);
    int max=0,mode=0,count=0;
    for(int i=0;i<N;i=i+count) {
        count = 1;
        for(int j=i+1; j<N; j++) {
            if(arr[i] == arr[j])
                count++;
        }
        if(count>max) {
            max=count;
            mode = arr[i];
        }
    } 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-07-06T14:52:03.480

导入 java.util.HashMap；

公共类 SmallestHighestRepeatedNumber { static int arr[] = { 9, 4, 5, 9, 2, 9, 1, 2, 8, 1, 1, 7, 7 };

```
public static void main(String[] args) {
    int mode = mode(arr);
    System.out.println(mode);
}

public static int mode(int[] array) {
    HashMap<Integer, Integer> hm = new HashMap<Integer, Integer>();
    int max = 1;
    int temp = 0;

    for (int i = 0; i < array.length; i++) {

        if (hm.get(array[i]) != null) {

            int count = hm.get(array[i]);
            count++;
            hm.put(array[i], count);

            if (count > max || temp > array[i] && count == max) {
                temp = array[i];
                max = count;
            }
        } else
            hm.put(array[i], 1);
    }
    return temp;
} 
```

}

* * *

## 回答 #14

> 赞同：-2
> 
> 时间：2015-02-05T18:50:02.000

此代码计算众数、中位数和均值。它经过测试并且确实有效。它是一个从头到尾的完整程序，并且会编译。

```
import java.util.Arrays;
import java.util.Random;
import java.math.*;
/**
 *
 * @author Mason
 */
public class MODE{

    public static void main(String args[])
    {
        System.out.print("Enter the quantity of random numbers  ===>>  ");
        int listSize = Expo.enterInt();
        System.out.println();
        ArrayStats intStats = new ArrayStats(listSize);
        intStats.randomize();
        intStats.computeMean();
        intStats.computeMedian();
        intStats.computeMode();
        intStats.displayStats();
        System.out.println();
    }
}

class ArrayStats
{

    private int list[];
    private int size;
    private double mean;        
    private double median;      
    private int mode;           

    public ArrayStats(int s)//initializes class object
    {
        size = s;
        list = new int[size];
    }

    public void randomize()
    {
        //This will provide same numbers every time... If you want to randomize this, you can
        Random rand = new Random(555);
        for (int k = 0; k < size; k++)
            list[k] = rand.nextInt(11) + 10;  
    }

    public void computeMean()
    {
               double accumulator=0;
               for (int index=0;index<size;index++)
               accumulator+= list[index];

               mean = accumulator/size;
    }

        public void computeMedian()
{
        Arrays.sort(list);
                if((size%2!=0))
                    median = list[((size-1)/2)];
                else if(size!=1&&size%2==0)
                {
                    double a =(size)/2-0.5;
                    int a2 =  (int)Math.ceil(a);
                    double b =(size)/2-0.5;
                    int b2 = (int)Math.floor(b);
                    median = (double)(list[a2]+list[b2])/2;
                }
                else if (size ==1)
                    median = list[0];
        }

    public void computeMode()
    {
 int popularity1 = 0;
  int popularity2 = 0;
  int array_item; //Array contains integer value. Make it String if array contains string value.
  for(int i =0;i<list.length;i++){
      array_item = list[i];
      for(int j =0;j<list.length;j++){
          if(array_item == list[j])
             popularity1 ++;
      }
      if(popularity1 >= popularity2){
          mode = array_item;
          popularity2 = popularity1;
      }

      popularity1 = 0;
  }}

    public void displayStats()
    {
        System.out.println(Arrays.toString(list));
        System.out.println();
        System.out.println("Mean: " + mean);
        System.out.println("Median: " + median);
        System.out.println("Mode: " + mode);
        System.out.println();
    }

} 
```

# python - 检查路径是否以分离结尾

> ID：15725371
> 
> 赞同：2
> 
> 时间：2013-03-31T01:23:28.607
> 
> 标签：python, operating-system

我正在设置一个小脚本来合并包含求职信、简历和参考资料的文件夹中的 PDF。我想知道是否有一个 Python 方法可以查看路径字符串并检测它是否以 / 结尾，如果没有，我可以将 / 添加到它。例如-

```
dircheck = raw_input("Directory with cover, resume, and references:")
if dircheck (has no slash at end):
    homedir = dircheck + os.sep
else:
    dircheck = homedir 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-31T01:24:34.207

```
if not dircheck.endswith(os.sep):
    homedir = dircheck + os.sep
else:
    dircheck = homedir 
```

或者，`os.path.join`它的空路径：

```
os.path.join(dircheck, "") 
```

* * *

```
# Unix

In [31]: os.path.join("asd/", "")
Out[31]: 'asd/'

In [32]: os.path.join("asd", "")
Out[32]: 'asd/'

# Windows

>>> os.path.join("asdasd/", "")
'asdasd/'
>>> os.path.join("asdasd\\", "")
'asdasd\\'
>>> os.path.join("asdasd", "")
'asdasd\\' 
```

# c++ - 如何处理多个 websocket++ 选项卡/窗口？

> ID：15725376
> 
> 赞同：1
> 
> 时间：2013-03-31T01:24:08.673
> 
> 标签：c++, websocket, sessionid, browser-tab, websocket++

我正在尝试创建一个使用 websocket++ 作为其“总骨干”的站点，我刚刚意识到，如果用户打开多个选项卡/窗口，我可能会陷入两难境地。

我正在编写[spa](http://en.wikipedia.org/wiki/Single-page_application)样式，其中所有 html 和大多数 css 和 js 都是预先加载的，并且每当用户单击像上面的堆栈链接之一这样的链接时，它只会滑开旧的`div`并滑入新的。使用 ajax 很容易，但是任何使用 100% ajax 的人都知道不断更新的地狱。

Websockets 和 websocket++ 使自动更新和用户跟踪变得容易，但我不知道如何处理用户不喜欢我所有的 spa 编程并想要另一个选项卡/窗口大声笑的情况。

如果用户打开另一个选项卡/窗口，websocket++ 会自动分配另一个选项卡/窗口`connection_hdl`吗？如果是这样，我如何确保用户登录到新的选项卡/窗口？如果没有，我如何分离每个选项卡/窗口的用户跟踪？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T02:14:47.943

每个到 WebSocket++ 服务器的连接都会有自己独特的`connection_hdl`. 如果您从一个应用程序或多个选项卡/窗口/计算机中的同一应用程序打开两个 WebSocket，就会发生这种情况。

将给定的连接与用户相关联是一个相当广泛的问题。简而言之，与非 websocket 方法一样，您需要为每个连接向服务器发送用户名/密码或会话令牌。如果您想在不同的选项卡/窗口之间实现类似单点登录的效果，您可以使用浏览器的持久客户端存储（cookie、本地存储等）来存储这些会话令牌。

# ruby-on-rails - Rails has_many 通过多态计数器缓存

> ID：15725386
> 
> 赞同：3
> 
> 时间：2013-03-31T01:25:18.973
> 
> 标签：ruby-on-rails, activerecord, polymorphism, has-many-through, counter-cache

我有两个模型我使用多态 has_many 通过关联链接在一起，我想添加一个 counter_cache 但似乎 Rails/ActiveRecord 不支持此功能开箱即用。

```
class Classifiable < ActiveRecord::Base
  has_many :classifications, :as => :classifiable, :foreign_key => :classifiable_id
end

class Taxonomy < ActiveRecord::Base
  has_many :classifications, :as => :taxonomy, :foreign_key => :taxonomy_id
end

class Question < Classifiable
  has_many :categories, :through => :classifications, :as => :classifiable, :source => :taxonomy, :source_type => "Category"
end

class Category < Taxonomy
  has_many :questions, :through => :classifications, :source => :classifiable, :source_type => "Question"
end

class Classification < ActiveRecord::Base
  attr_accessible :classifiable, :classifiable_id, :classifiable_type,
                  :taxonomy, :taxonomy_id, :taxonomy_type

  belongs_to :classifiable, :polymorphic => true
  belongs_to :taxonomy,     :polymorphic => true
end 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-31T01:25:18.973

只需修改以下分类模型：

```
class Classification < ActiveRecord::Base
  attr_accessible :classifiable, :classifiable_id, :classifiable_type,
                  :taxonomy, :taxonomy_id, :taxonomy_type

  belongs_to :classifiable, :polymorphic => true
  belongs_to :taxonomy,     :polymorphic => true

  before_create  :increment_counter
  before_destroy :decrement_counter

  private

  # increments the right classifiable counter for the right taxonomy
  def increment_counter
    self.taxonomy_type.constantize.increment_counter("#{self.classifiable_type.downcase.pluralize}_count", self.taxonomy_id)
  end

  # decrements the right classifiable counter for the right taxonomy
  def decrement_counter
    self.taxonomy_type.constantize.decrement_counter("#{self.classifiable_type.downcase.pluralize}_count", self.taxonomy_id)
  end
end 
```

此外，请确保您的分类表中有以下列：

```
t.integer :questions_count,           :null => false, :default => 0
t.integer :other_classifiables_count, :null => false, :default => 0
t.integer :other_classifiables_count, :null => false, :default => 0
t.integer :other_classifiables_count, :null => false, :default => 0 
```

将“other_classifiables_count”更改为您需要的（“answers_count”、“users_count”等）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-09T21:23:48.757

在调用 delete 时，Rails 似乎没有经过 before/after_destroy 回调（当您删除 a 时会发生很多通过关联）。

相反，您可以使用关联的回调`#before_add`和`#before_remove`：

```
class Question < Classifiable
  has_many :categories, through: :classifications, 
                        as: :classifiable, 
                        source: :taxonomy, 
                        source_type: Category,
                        before_add: :increment_counter

  def increment_counter(category)
    # increment counter, etc.
  end

end 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-06-28T22:34:30.540

要稍微修改乔纳森的答案，您可以让它在增加/减少之前查找列类型以查看它是否存在。我也把它弄干了一点：

```
def increment_counter(direction=:increment)
  ar_class  = self.taxonomy_type.constantize
  ar_column = "#{self.taxonomy_type.underscore.pluralize}_count"

  if ar_class.columns.include? ar_column
    ar_class.send "#{direction}_counter", ar_column, self.taxonomy_id
  end
end

def decrement_counter
  increment_counter :decrement
end 
```

哦，它适用于`MultiWordClassNames`. `underscore`a`downcase`所以我的版本省略了它。

# android - 保存多个 NFC 标签 - 问题修改教程以保存多个 NDef 记录

> ID：15725388
> 
> 赞同：0
> 
> 时间：2013-03-31T01:25:23.493
> 
> 标签：android, nfc

我正在关注一个允许用户将数据保存到 NFC 标签的教程。我正在尝试修改教程源代码以包含第二个 EditText 字段并保存第二个标记，但是如果我注释掉以下行，我只能保存第二个 NDef 记录：

// write(message.getText().toString(),mytag);

我需要能够编写两个标签：

```
write(message.getText().toString(),mytag); 
```

和

```
write(message.getText().toString(),mytag2); 
```

...但我需要帮助将它们连接在一起。

这里有一个示例显示如何添加多个标签：

[https://code.google.com/p/nfc-eclipse-plugin/source/browse/nfc-eclipse-plugin/src/android/nfc16/NdefMessage.java](https://code.google.com/p/nfc-eclipse-plugin/source/browse/nfc-eclipse-plugin/src/android/nfc16/NdefMessage.java)

但我需要帮助格式化我当前的来源以反映这种方法。（每次我尝试时，我的日志中都会出现其他问题或强制关闭问题。）

提前致谢！

爪哇：

```
import java.io.IOException;
import java.io.UnsupportedEncodingException;

import android.annotation.SuppressLint;
import android.app.Activity;
import android.app.PendingIntent;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.nfc.FormatException;
import android.nfc.NdefMessage;
import android.nfc.NdefRecord;
import android.nfc.NfcAdapter;
import android.nfc.Tag;
import android.nfc.tech.Ndef;
import android.nfc.tech.NdefFormatable;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;
import android.widget.Toast;

@SuppressLint({ "ParserError", "ParserError" })
public class MainActivity extends Activity{

    NfcAdapter adapter;
    PendingIntent pendingIntent;
    IntentFilter writeTagFilters[];
    boolean writeMode;
    Tag mytag;
    Tag mytag2;
    Context ctx;
    Context ctx2;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        ctx=this;
        Button btnWrite = (Button) findViewById(R.id.button);
        final TextView message = (TextView)findViewById(R.id.edit_message);

        ctx2=this;
        final TextView message2 = (TextView)findViewById(R.id.edit_message2);

        btnWrite.setOnClickListener(new View.OnClickListener()
        {
            @Override
            public void onClick(View v) {
                try {
                    if(mytag==null){
                        Toast.makeText(ctx, ctx.getString(R.string.error_detected), Toast.LENGTH_LONG ).show();

                    if(mytag2==null){
                        Toast.makeText(ctx2, ctx2.getString(R.string.error_detected), Toast.LENGTH_LONG ).show();
                        }
                    }else{
                        // write(message.getText().toString(),mytag);
                        write(message.getText().toString(),mytag2);
                        Toast.makeText(ctx, ctx.getString(R.string.ok_writing), Toast.LENGTH_LONG ).show();
                        Toast.makeText(ctx2, ctx2.getString(R.string.ok_writing), Toast.LENGTH_LONG ).show();
                    }
                } catch (IOException e) {
                    Toast.makeText(ctx, ctx.getString(R.string.error_writing), Toast.LENGTH_LONG ).show();
                    Toast.makeText(ctx2, ctx2.getString(R.string.error_writing), Toast.LENGTH_LONG ).show();
                    e.printStackTrace();
                } catch (FormatException e) {
                    Toast.makeText(ctx, ctx.getString(R.string.error_writing) , Toast.LENGTH_LONG ).show();
                    Toast.makeText(ctx2, ctx2.getString(R.string.error_writing) , Toast.LENGTH_LONG ).show();
                    e.printStackTrace();
                }
            }
        });

        adapter = NfcAdapter.getDefaultAdapter(this);
        pendingIntent = PendingIntent.getActivity(this, 0, new Intent(this, getClass()).addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP), 0);
        IntentFilter tagDetected = new IntentFilter(NfcAdapter.ACTION_TAG_DISCOVERED);
        tagDetected.addCategory(Intent.CATEGORY_DEFAULT);
        writeTagFilters = new IntentFilter[] { tagDetected };

    }

    private void write(String text, Tag tag) throws IOException, FormatException {

        NdefRecord[] records = { createRecord(text) };
        NdefMessage  message = new NdefMessage(records);
        // Get an instance of Ndef for the tag.
        Ndef ndef = Ndef.get(tag);

        // SUGGESTED IMPLEMENTATION
        //  mRecords = new NdefRecord[1 + records.length];
           // mRecords[0] = record;
           // System.arraycopy(records, 0, mRecords, 1, records.length);

        // Enable I/O
        ndef.connect();
        // Write the message
        ndef.writeNdefMessage(message);

        // Close the connection
        ndef.close();
    }

    private NdefRecord createRecord(String text) throws UnsupportedEncodingException {
        String lang       = "en";
        byte[] textBytes  = text.getBytes();
        byte[] langBytes  = lang.getBytes("US-ASCII");
        int    langLength = langBytes.length;
        int    textLength = textBytes.length;
        byte[] payload    = new byte[1 + langLength + textLength];

        // set status byte (see NDEF spec for actual bits)
        payload[0] = (byte) langLength;

        // copy langbytes and textbytes into payload
        System.arraycopy(langBytes, 0, payload, 1,              langLength);
        System.arraycopy(textBytes, 0, payload, 1 + langLength, textLength);

        NdefRecord recordNFC = new NdefRecord(NdefRecord.TNF_WELL_KNOWN,  NdefRecord.RTD_TEXT,  new byte[0], payload);

        return recordNFC;
    }

    @Override
    protected void onNewIntent(Intent intent){
        if(NfcAdapter.ACTION_TAG_DISCOVERED.equals(intent.getAction())){
            mytag = intent.getParcelableExtra(NfcAdapter.EXTRA_TAG);   
            mytag2 = intent.getParcelableExtra(NfcAdapter.EXTRA_TAG);   
            Toast.makeText(this, this.getString(R.string.ok_detection) + mytag.toString(), Toast.LENGTH_LONG ).show();
        }
    }

    @Override
    public void onPause(){
        super.onPause();
        WriteModeOff();
    }

    @Override
    public void onResume(){
        super.onResume();
        WriteModeOn();
    }

    private void WriteModeOn(){
        writeMode = true;
        adapter.enableForegroundDispatch(this, pendingIntent, writeTagFilters, null);
    }

    private void WriteModeOff(){
        writeMode = false;
        adapter.disableForegroundDispatch(this);
    }

} 
```

XML:

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Please Enter Your Password: ">
    </TextView>

         <EditText
            android:id="@+id/edit_message2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="2"
            android:hint="SSID" />

     <EditText
            android:id="@+id/edit_message"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="2"
            android:hint="WiFi Password" />

        <Button
            android:id="@+id/button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Write!!" />

</LinearLayout> 
```

教程源代码（显示上面只保存一个 NDef 记录的源代码的实现 - 我已经修改它以保存两个 NDef 记录）

[http://www.framentos.com/en/android-tutorial/2012/07/31/write-hello-world-into-a-nfc-tag-with-a/](http://www.framentos.com/en/android-tutorial/2012/07/31/write-hello-world-into-a-nfc-tag-with-a/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T01:59:49.423

注释掉这一行：

```
write(message.getText().toString(),mytag); 
```

我认为它会起作用。

我认为的问题是该`write()`方法被设计为仅写入一个标签，并且在调用第二个 write() 方法时，该标签仍被第一个 write() 方法锁定。如果我是你，我会尝试在 write() 定义的定义中添加第二个字段，或者如果这不可能，我会尝试将两个字段的文本与两个字段中间的标记连接在一起.

Also to make this proper code, I'd do the nfc part inside its own thread using AsyncTask to make sure it doesn't block the UI thread. I understand why the guy writing the tutorial didn't do that, that would have made his tutorial much more complicated than he wanted to, but doing nfc is something you should be keeping out of the UI thread.

**Regarding your second question:**

This might do it:

```
private void write(String text, String text2, Tag tag) throws IOException, FormatException {

    NdefRecord[] records = { createRecord(text), createRecord(text2) };
    NdefMessage  message = new NdefMessage(records);
    // Get an instance of Ndef for the tag.
    Ndef ndef = Ndef.get(tag);

    // Enable I/O
    ndef.connect();
    // Write the message
    ndef.writeNdefMessage(message);

    // Close the connection
    ndef.close();
} 
```

and of course, this means you'll have to call it this way (since it now has one more argument):

```
write(message.getText().toString(), message2.getText().toString(), mytag2); 
```

# php - 从现有数组创建另一个多维数组并对多维数组进行排序

> ID：15725394
> 
> 赞同：0
> 
> 时间：2013-03-31T01:27:15.780
> 
> 标签：php, function, sorting, multidimensional-array

我对 php 数组有疑问。我有像 $data 这样的数组。

```
$data=array(array('a'=>'1','b'=>'2','c'=>'3','d'=>'4'),array('a'=>'5','b'=>'6','c'=>'7','d'=>'8'),array('a'=>'9','b'=>'10','c'=>'11','d'=>'12')); 
```

我只想获取 a、c、d 元素并创建另一个多维数组，如 $data1。

```
$data1=array(
        array('a'=>'1','c'=>'3','d'=>'4'),
            array('a'=>'5','c'=>'7','d'=>'8'),
            array('a'=>'9','c'=>'11','d'=>'12')         
        ); 
```

作为下一步，我想按 d 元素的第一个值排序 $data1 数组，然后按 c 元素的值排序，最后按 a 元素排序，得到像 $data2 这样的数组。

```
$data2=array(           
            array('a'=>'9','c'=>'11','d'=>'12')
            array('a'=>'5','c'=>'7','d'=>'8'),
            array('a'=>'1','c'=>'3','d'=>'4')
            ); 
```

我需要对每个步骤进行一点解释的答案。我被困在这里这个问题。我需要帮助.. 是否有任何 php 数组函数可用于轻松地从 $data 获取 $data1 数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T02:22:33.287

这将适用于你的情况..

```
$data=array(array('a'=>'1','b'=>'2','c'=>'3','d'=>'4'),array('a'=>'5','b'=>'6','c'=>'7','d'=>'8'),array('a'=>'9','b'=>'10','c'=>'11','d'=>'12'));
$data1 = array();

//getting data1 by removing the b's 

foreach($data as $d){
   while(list($k,$v) = each($d)){
    if($k == "b"){
        unset($d[$k]);
    }
}
array_push($data1, $d);
}

//Sorting the arrays
foreach($data1 as $key => $value){
  $ds[$key] = $value["d"];
  $cs[$key] = $value["c"];
  $as[$key] = $value["a"];
}

array_multisort($ds, SORT_DESC, $cs, SORT_DESC, $as, SORT_DESC, $data1);
print_r($data1); 
```

这将打印：

```
Array
(
[0] => Array
    (
        [a] => 9
        [c] => 11
        [d] => 12
    )

[1] => Array
    (
        [a] => 5
        [c] => 7
        [d] => 8
    )

[2] => Array
    (
        [a] => 1
        [c] => 3
        [d] => 4
    ) 
```

)

丁斯

# python - Python + lighttpd + CGI：任何网络框架？

> ID：15725395
> 
> 赞同：1
> 
> 时间：2013-03-31T01:27:24.947
> 
> 标签：python, cgi, lighttpd, web-frameworks

我被困在没有root访问权限的服务器上。它具有 Python 2.6.5 并运行 lighttpd，为 CGI 下的所有 Python 脚本提供服务。是的，普通的旧 CGI。不幸的是，我只能使用这个服务器，所以切换到更合适的主机不是一种选择。所以，我的问题是：在这些情况下我可以使用 Python 的任何 Web 框架吗？除了 HTTP 500 错误之外，我尝试了 Django、web.py 和 Flask，但没有任何成功，但也许我只是遗漏了一些东西。

同样，要求是：

*   Python 2.6.5
*   轻量级
*   普通的旧 CGI
*   没有root权限

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T05:40:40.680

[一些聪明的小伙子设法通过 mod_cgi 使它在 virtualenv 上工作](http://joemaller.com/1467/django-via-cgi-on-shared-hosting/)。您需要在Django 项目（实际上是一个 WSGI 应用程序）之间建立一些[CGI-WSGI 桥梁。](https://code.djangoproject.com/attachment/ticket/2407/django.cgi)`mod_cgi`有一些事情需要适应，例如，如果你正在使用 a `virtualenv`（我强烈建议你这样做）。

该脚本经过深思熟虑，但我想仍有`request.FILES`可能处理不当。我希望你没有使用文件上传。另外，请注意使用 CGI 时性能会下降，因为每次请求都会重新加载整个应用程序。使用 FastCGI 或普通 WSGI，可以在实际服务请求之前启动项目的多个实例，并且每个实例可以在其生命周期内处理多个请求（一次一个）。这使您可以有更快的加载时间，因为所有内容仍然是从先前的请求中预加载的。

另请注意，可以在`.cgi`文件中复制该功能：您可以启动应用程序的多个实例并写入它们的套接字，使用`random.random`轮换进行负载平衡。

# django-templates - 在 Django 中工作

> ID：15725399
> 
> 赞同：-1
> 
> 时间：2013-03-31T01:27:48.610
> 
> 标签：django-templates

我不喜欢在 Django 中工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T02:28:40.310

模型.py

```
from django.db import models

class Upload(models.Model):
    user = models.ForeignKey(User)
    name = models.CharField(max_length=100)
    file = models.FileField(upload_to="files")
    date_upload = models.DateTimeField(auto_now_add=True) 
```

表格.py

```
from django import forms
from app_name.models import Upload

class UploadForm(forms.ModelForm):
    class Meta:
        model = Upload 
```

视图.py

```
def upload_file(request):
    if request.method == 'POST':
        form = UploadForm(request.POST, request.FILES)
        if form.is_valid():
            form.save()
            return HttpResponseRedirect('/success/url/')
    else:
        form = UploadFileForm()
    return render_to_response('upload.html', {'form': form}) 
```

上传.html

```
<form enctype="multipart/form-data" action="/upload/" name="test" method="post">
    {% csrf_token %}
    {{form.as_p}}
    <input type="submit" value="Save File">
</form> 
```

# php - 回显 mysql_query 的所有结果

> ID：15725403
> 
> 赞同：4
> 
> 时间：2013-03-31T01:28:28.210
> 
> 标签：php, mysql, sql, select

我正在尝试创建一个函数来查询数据库并输出数组中的所有结果。由于某种原因，它只显示一个结果。

这是功能

```
function reguser_list() {
$query = mysql_query("SELECT `user_name` FROM `users` WHERE `active` = 1");
$reguser_names = mysql_fetch_assoc($query);
$list_names = implode(', ', $reguser_names);

echo $reguser_names;
} 
```

数据库中当前有 2 个用户处于活动状态，但这仅显示一个名称，如何让它同时显示？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-31T01:29:54.797

您需要迭代的结果`mysql_query`，例如。

```
while ($row = mysql_fetch_assoc($result)) 
{
    echo $row['user_name'];
} 
```

* * *

因为我看到您想通过用逗号分隔结果来连接结果，所以您可以直接在`MySQL`购买中使用`GROUP_CONCAT()`

```
SELECT GROUP_CONCAT(user_name) as UserName FROM users WHERE active = 1 
```

在`PHP`,

```
$query = mysql_query("SELECT GROUP_CONCAT(user_name) as UserName FROM users WHERE active = 1");
$reguser_names = mysql_fetch_assoc($query);
$list_names = $reguser_names['UserName']; 
```

The default limit of [GROUP_CONCAT()](http://dev.mysql.com/doc/refman/5.6/en/group-by-functions.html#function_group-concat) is `1024`.

If you want change the value of the variable the syntax is:

```
SET [GLOBAL | SESSION] group_concat_max_len = val;
// where val is an unsigned integer 
```

[more on this link..](http://dev.mysql.com/doc/refman/5.6/en/group-by-functions.html#function_group-concat)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T01:33:02.333

If you're going to stick with `ext/mysql`, you need to use a `while` loop. `PDOStatement` has a very nice `fetchAll` method that can essentially be substituted for what you have.

```
$pdo = new PDO('mysql:host=?', 'user', 'pass');
//If `active` is 1 or 0 only, you don't need the `= 1`
echo implode(', ', $pdo->query("SELECT user_name FROM users WHERE active = 1")
    ->fetchAll()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T01:29:35.490

从数据库中获取时可以使用`while`循环。

**您不应该`mysql_*`在新代码中使用函数**（[为什么？](https://stackoverflow.com/questions/12859942/why-shouldnt-i-use-mysql-functions-in-php)），它们已被[弃用](https://wiki.php.net/rfc/mysql_deprecation)。改用PDO[或 MySQLi](http://php.net/manual/en/mysqlinfo.api.choosing.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-31T01:30:54.480

**mysql_* are deprecated**

```
 while ($row = mysql_fetch_assoc($result)) {
          echo $row['user_name'];
    } 
```

# java - Java中MergeSort实现中的错误反转和重复数字

> ID：15725404
> 
> 赞同：0
> 
> 时间：2013-03-31T01:28:32.500
> 
> 标签：java, mergesort, inversion

我正在创建一个 Java 程序，在其中实现 MergeSort 算法。我的代码如下（到目前为止）：

```
public void merge(Integer [] left, Integer[] right, Integer[] a) {

    int i = 0;                  // a[] index (A)
    int lIndex = 0;             // left[] index (B)
    int rIndex = 0;             // right[] index (C)

    // Begin main merge process
    while((lIndex < left.length) && (rIndex < right.length)) {
        if(left[lIndex] <= right[rIndex]) {
            a[i] = left[lIndex]; // Store it
            lIndex++; // Increase index of left[]
        }
        else {
            a[i] = right[rIndex]; // Store it
            rIndex++; // Increase index of right[]
        }
        i++; // Increase index of a[]
    }
    if(i == lIndex) { // If the left array is sorted
        while(rIndex < right.length) { // Copy the contents of rhe right array to a[]
            a[i] = right[rIndex];
            i++;
            rIndex++;
        }
    }
    else { // If the right array is sorted
        while(lIndex < left.length) { // Copy the contents of the left array to a[]
            a[i] = left[lIndex];
            i++;
            lIndex++;
        }
    }
} 
```

问题是每次我执行该函数时，输入数组都会部分排序返回。我的意思是大多数元素都在正确的位置，但有一两个放置错误，还有一些是其他元素的重复！由于我看不出真正的问题是什么，有人可以帮我吗？该实现是一个小项目，我不能使用 int[]（比方说）代替 Integer[]，以便使用 Arrays.copyOf() 方法复制数组 A[] 的内容。提前致谢，请原谅我的语法/拼写错误。

请注意，输入数组始终是 2 的幂（2、4、8、16 等），因此每次除以 2 以找到中间元素的索引时，我总是得到一个偶数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T01:57:12.127

我认为你的问题在这里：

```
if(i == lIndex) 
```

检查列表中的元素是否用完的方法是：

```
if (lIndex == left.length) 
```

In other words, if you take some elements from the left and some from the right, even if you exhaust the left array first, `i` will NOT be equal to `lIndex` when you've exhausted the left array. It will be greater.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T01:56:22.197

据我所知，问题出在您的合并方法中，这里：

```
if (i == lIndex) { // If the left array is sorted ... 
```

`i`不一定等于`lIndex`左数组排序的时候。结果，并不总是执行合并的最后部分。您看到的重复元素是从原始数组`A`中遗留下来的，因此没有被覆盖。

正确的条件是：

```
if (lIndex == left.length) { // If the left array is sorted ... 
```

# java - 如何在 Java 中的 JTextArea 中设置数据？

> ID：15725406
> 
> 赞同：0
> 
> 时间：2013-03-31T01:28:38.610
> 
> 标签：java, swing, netbeans, user-interface, jtextarea

晚上好，我将获取一个程序的输出并在一个简单的文本区域 GUI 中显示它。我尝试遵循某些教程，但输出仍显示在 NetBean 控制台上，但不在 GUI 上。

```
public class PingAndTransmit extends JPanel{//This is the First brace({)

JTextArea audioData = new JTextArea();
JTextArea pingData = new JTextArea();
String audioLine;
String pingLine;

public PingAndTransmit() {

   super(new BorderLayout());

    while(...) {
         if(...) {
            audioLine = "\nI am handsome";
            pingLine  = "\nShe is pretty";
         } else {
             audioLine = "\nI am not handsome";
             pingLine  = "\nShe not pretty";
         }
     }

    audioData.append(audioLine);
    pingData.append(pingLine);

    JPanel controls2 = new JPanel(new GridLayout(1, 2));
    controls2.add(audioData);
    controls2.add(pingData);
    add(controls2, BorderLayout.CENTER);
}//this is not the last brace (}) 
```

> 对于图形用户界面

```
public static void createAndShowGui() {
    JFrame frame = new JFrame("Sender");
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.getContentPane().add(new PingAndTransmit());
    frame.setSize(400, 200);
    frame.setVisible(true);
    frame.toFront();
} 
```

> 主要的

```
public static void main(String[] args) {

    SwingUtilities.invokeLater(new Runnable() {
                public void run() {
                        createAndShowGui();
                }
        });

} 
```

}//这里是最后一个大括号（}）

如何在文本区域 GUI 上显示输出？需要一些提示和指导，谢谢^^"

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T01:32:05.983

什么是 PingAndTransmit()？它扩展了 JComponent 吗？

您需要在框架中的某个位置添加 textarea。

您的 createAndShowGui() 方法仅创建一个框架并尝试添加该“PingAndTransmit()”对象，但看起来该对象并不是真正的 Swing 组件。

# joomla - 可能通过 joomla 进行 SQL 备份？

> ID：15725414
> 
> 赞同：0
> 
> 时间：2013-03-31T01:30:03.400
> 
> 标签：joomla

由于我的经销商帐户无法访问客户的主机，因此无法访问他的 cpanel 来备份 SQL 数据库。然而，他网站的备份仍然有效，让我们可以正常访问 joomla 管理员，并拥有来自 sql db 的所有相关最新用户（因此 sql db 仍然在线）。但是，由于我们无法访问实际的 Phpmyadmin 来进行备份，是否可以通过 joomla 进行备份？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T01:32:43.970

使用[Akeeba Backup](http://extensions.joomla.org/extensions/access-a-security/site-security/backup/1606)，该过程应该非常简单。只需安装 joomla 扩展并执行备份。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T11:22:18.563

这是可能的，但是您首先下载 Akeeba 备份工具，然后再备份，然后再提供一个链接即可轻松解决问题

[http://docs.joomla.org/Backup](http://docs.joomla.org/Backup)

首先你提到这个网站而不是你去头

# uiimage - UIImage may not respond to imageWithContentsofFile

> ID：15725416
> 
> 赞同：1
> 
> 时间：2013-03-31T01:30:35.977
> 
> 标签：uiimage, theos, logos

Hi guys I am trying to make a image appear whenever my method is called.

Here is my code

```
#import <UIKit/UIKit.h>
#import <substrate.h>
#import <Foundation/Foundation.h>
#import <UIKit/UISaveToCameraRollActivity.h>
#import <UIKit/_UIImageViewExtendedStorage.h>
#import <UIKit/_UIOnePartImageView.h>
#import <UIKit/_UIPrefTableCellPiece.h>
#import <UIKit/_UIStretchableImage.h>
#import <UIKit/_UISwitchSlider.h>
#import <UIKit/_UITableViewCellDeleteConfirmationControl.h>
#import <UIKit/UIImage.h>

%hook UISaveToCameraRollActivity
-(void)performActivity {
%orig;
UIImageView *imageView = [[UIImageView alloc] initWithFrame:CGRectMake (100, 200, 100, 100)];
imageView.image = [UIImage imageWithContentsofFile:@"/Users/Cyrus/test/pic.png"];
}
%end 
```

Here is my error code I keep getting the error UIImage may not respond to +imageWithContentsofFile. Can somebody help me out please?

```
Tweak.xm:17: warning: ‘UIImage’ may not respond to ‘+imageWithContentsofFile:’
Tweak.xm:17: warning: (Messages without a matching method signature
Tweak.xm:17: warning: will be assumed to return ‘id’ and accept
Tweak.xm:17: warning: ‘...’ as arguments.) 
```

Thanks guys I really do appreciate all the help.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T01:33:34.137

It's `imageWithContents**Of**File`, not `imageWithContentsofFile`.

Also, that image won't load. The path is on your local computer while your code is running on your device. You should use the `layout/` directory.

# haskell - 两个相同的代码，但终端中的错误消息非常不同

> ID：15725419
> 
> 赞同：1
> 
> 时间：2013-03-31T01:31:07.400
> 
> 标签：haskell, case, maybe

这是我的第一个代码

```
maybe_devide :: Maybe Integer -> Maybe Integer -> Maybe Integer
maybe_devide maybeX maybeY = case (maybeX, maybeY) of
  (Just x, Just y)
    |x/=0 && y/=0 -> Just (div x y)
    |x==0 && y/=0 -> Just 0
    |x/=0 && y==0 -> Nothing
  (Nothing, Just y) -> Nothing
  (Just x, Nothing) -> Nothing 
```

代码 1 的错误消息如下所示：

```
[1 of 1] Compiling Main             ( test2.hs, interpreted )

test2.hs:1:246: parse error on input `->'
Failed, modules loaded: none. 
```

* * *

这是我的朋友 Bryan Olivier 编写的第二个代码：

```
maybe_devide :: Maybe Integer -> Maybe Integer -> Maybe Integer
maybe_devide maybeX maybeY = case (maybeX, maybeY) of
  (Just x, Just y)
    |x/=0 && y/=0 -> Just (div x y)
    |x==0 && y/=0 -> Just 0
    |x/=0 && y==0 -> Nothing
  (Nothing, Just y) -> Nothing
  (Just x, Nothing) -> Nothing 
```

但是，这次的错误信息有所不同：

```
Warning: Pattern match(es) are non-exhaustive
         In a case alternative:
             Patterns not matched:
                 (Nothing, Nothing)
                 (Just _, Just _)

test.hs:7:18: Warning: Defined but not used: `y'

test.hs:8:9: Warning: Defined but not used: `x'
Ok, modules loaded: Main.
*Main> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-31T01:55:28.347

I was actually able to compile both of these snippets in ghci (version 7.4.2). Something to look out for is using tabs instead of spaces (which could have been lost upon pasting into SO and formatting).

The messages appearing in your second snippet are just compiler warnings. You could clean up your code a little by using the built in pattern matching instead of a `case`. Here is an equivalent function:

```
divide :: Maybe Integer -> Maybe Integer -> Maybe Integer
divide (Just x) (Just y)
    | y == 0 = Nothing
    | otherwise = Just (div x y)
divide _ _ = Nothing 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T03:11:45.563

Your first error is at line 1, character 246, suggesting that you lost all formatting before compilation.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T01:37:51.847

你的编译器比我的更挑剔，但你显然错过了这个`(Nothing,Nothing)`案例。`(Just _, Just _)`我只能解释这个案子，因为你也错过了警卫`| x== 0 && y == 0`，但我不确定。

`-Wall`编辑：我使用on复制了警告，`ghc`而缺少的警卫并没有摆脱这个警告。也许其他人可以解释这一点。

# java - 如何在二叉树节点中搜索字符串？

> ID：15725420
> 
> 赞同：-2
> 
> 时间：2013-03-31T01:31:46.277
> 
> 标签：java, binary-tree, binary-search-tree

如何查找节点中包含的内容？我的意思是如何进行比较？我要做什么不同的事情来完成这项工作？我知道，或者至少我认为我知道，我必须将搜索方法传递给字符串和节点。

```
if (value == root)
        return root; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T01:42:00.257

In your tag you say it is a binary tree (altough this does not mean it is a sorted tree).

What you can do in the case of a sorted tree:

```
public String searchTree (Node n, String searchVal)
{
   if (n.isEmpty())//no more children
   {
      return null;
   }
   else if (n.root().toString().equals(searchVal) //we found it
   {
      return n.root();
   }
   else if (searchVal < n.root().toString()) //search left child
   {
      return searchTree(n.leftChild(),searchVal);
   }
   else //search right child
   {
      return searchTree(n.rightChild(),searchVal);
   }
} 
```

This is the basic code but needs to be refined for you Tree class In case the tree is not sorted, the last if-statements can be combined (first check left tree; if that is null return the search on the right tree, otherwise return the search on the left tree)

Kind regards,
Héctor van den Boorn

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T11:48:56.940

treeSet.contains(对象)

其中 treeSet 是 TreeSet 的实例，而 object 是正确覆盖 equals() 和 hashcode() 的实例。

# c - 尝试打印存储在二维数组中的字符

> ID：15725426
> 
> 赞同：0
> 
> 时间：2013-03-31T01:32:48.393
> 
> 标签：c, multidimensional-array

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T01:41:58.787

In the code you posted you are attempting to format a string `%s` as a result the printf method expects a char* to be passed. if you pass it an int or a single char it will issue a warning as it does.

to print a single char as per your example you would need:

```
printf("%c\n", map[0][0]); 
```

The reason it works when you pass in the `&map[0][0]` is because you are now passing in a pointer to a character ( `char*` ) which is the same as passing it an array of characters.

See the [printf reference](http://www.cplusplus.com/reference/cstdio/printf/).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T20:08:57.550

它之所以有效，是因为您发送了第一个元素（char *）类型的地址。该参数在 printf 函数中得到 DECAYED，该函数在您的情况下需要一个指向字符数组的 char 指针

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T01:45:30.127

由于 char 本身是一个数值，一个 8 位整数，这样的代码会给你这个警告。至于您的第二个问题，使用“address of”运算符获取 map[0][0] 的地址会为您提供指向 map[0] 的第一个元素的指针，或者在这种情况下为值 1，并且 printf 需要一个指向 char 数组的指针。考虑一下：

```
char map [20];
map [0]=1;
printf ("%s\n", map); //or printf ("%s\n", &map[0]) 
```

两者都指向第一个元素，有效地打印直到数组中到达 null，'\0'。

编辑：关于您的编辑，您仍在访问第一个元素，它是字符类型，本质上是数字。“X”为您提供该字符的数字等价物。

# java - Resizing Jpanel when resizing JFrame

> ID：15725429
> 
> 赞同：0
> 
> 时间：2013-03-31T01:33:20.113
> 
> 标签：java, swing, resize, jpanel, java-2d

I need to draw a x-y axis coordinate system on a JPanel. I want to implement a function that when resize JFrame, the x,y axis coordinate can resize automatically.

```
public void paintComponent(Graphics gl) {

 Graphics2D g = (Graphics2D) gl;
 g.setColor(new Color(222, 222, 222));
 g.fillRect(0, 0, this.getWidth(), this.getHeight());
 g.setColor(new Color(0, 0, 0));
 int x=15;
 int y=15;
 g.drawString("20", 0, 10);
 for(int i=1;i<=20;i++) {
     g.drawLine(x, y+(35*(i-1)), x, y+(35*i));
     g.drawString(""+(20-i), 0, y+(35*i));
 }
 for(int i=1;i<=10;i++) {
     g.drawLine(x+(70*(i-1)),715, x+(70*i), 715);
     g.drawString(""+i,  x+(70*i),730);
 }
} 
```

This is how I draw the x y coordinate system.
Could you give me hint for resizing it ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T11:10:22.750

使用 ComponentListener 并监听触发的调整大小事件。使您的 UI 无效以强制重新绘制，这会导致您的 paintComponent 将被调用。

[组件监听器](http://docs.oracle.com/javase/tutorial/uiswing/events/componentlistener.html)

# c - Why the number '0' (number, not char) doesn't displaying?

> ID：15725434
> 
> 赞同：1
> 
> 时间：2013-03-31T01:33:48.460
> 
> 标签：c

The problem is that I cannot see **0** in an array.

I run my program and see 2D array. But instead of **0** (the first element) I see nothing.

Here is the code:

```
#include <stdio.h>
#include <stdlib.h>

int main()
{
    int i;
    int *Ptr;

    scanf("%d%d", &M, &N); /* Size of array. */

    Ptr = malloc(M*N*sizeof(int));

    for (i = 0; i < M * N; i++) /* Filling in. */
    {
        *(Ptr + i) = i;
    }

    for (i = 0; i < M * N; i++) /* Displaying. */
    {
        if (i % N == 0)
            printf("\n");
        printf("%2.d  ", *(Ptr + i));
    }

    return 0;
} 
```

What is the problem? Is there any way to fix it?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T01:41:28.973

The number after the dot is the precision. If the precision is 0 (or does not exist) then printf does not print out `0`. In your case you do not need the dot:

```
printf("%2d ", ...) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T01:40:57.360

change

```
printf("%2.d  ", *(Ptr + i)); 
```

to

```
printf("%2d  ", *(Ptr + i)); 
```

# c++ - location of one program corresponding to another c++

> ID：15725435
> 
> 赞同：0
> 
> 时间：2013-03-31T01:34:01.443
> 
> 标签：c++, windows, networking, process

I have two programs So if i have one program "local" on machine A and another "remote" on machine B how can program "local" find out whether they both are running on same machine or different machine in c++ under windows environment.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T01:48:25.113

Send the IP address of "self" from "local" to "remote"? Or let "remote" send it's IP address to "local". Then compare with "its own" IP address. If they are the same, then must be the same machine [or the machine has multiple network cards connected to the same overall network].

Ask for some other machine specific ID, such as mac-address, hard disk ID, etc.

There are myriad of different methods that may or may not work, depending on what you are actually trying to do.

Edit based on comment:

If you want to check if the program is available on the same machine, you could use a "named pipe" or some other named IPC mechanism, and simply check if the named IPC is available on the local machine. If not, use remote machine mechanism (e.g. TCP/IP).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T01:54:06.467

> i am actually looking fro something like if i have two program sending data to each other then if one process is local to another they will use local ipc methods but if they are remotly located then tcp/ip. so how can i detect about the program and then use it to decide which method for communication to use

Try local IPC methods first. If they don't work, switch to TCP/IP.

# ruby-on-rails - How do I paginate a NodeSet?

> ID：15725444
> 
> 赞同：0
> 
> 时间：2013-03-31T01:36:58.577
> 
> 标签：ruby-on-rails, ruby, xml-parsing, nokogiri, will-paginate

I would like to paginate my results from my XML parse. At the moment I get:

```
undefined method `paginate' for #<Nokogiri::XML::NodeSet:0x0000000374e408> 
```

This is how I am implementing the pagination:

```
//Controller
require 'will_paginate/array'
def index
  @mycontacts = getcontact.paginate(:page => params[:page], :per_page => 30)
end 
```

I guess that the returned NodeSet is not an array, but in what format is the NodeSet and can I use `will_paginate` on this or do I have to do something else to paginate my results?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T15:28:27.687

这可能对其他人有帮助，所以我在回答自己，需要将节点集转换为数组，以便我可以使用 will_paginate

```
def index
  @mycontacts = getcontact.to_a.paginate(:page => params[:page], :per_page => 30)
end 
```

# angularjs - Angularjs $resource not working with an array returned from a REST API

> ID：15725445
> 
> 赞同：14
> 
> 时间：2013-03-31T01:36:58.700
> 
> 标签：angularjs, angularjs-ng-repeat

I am trying to learn angularjs, and have hit a block in trying to databind to an array returned from a Rest API. I have a simple azure api returning an array of person objects. Service url is [http://testv1.cloudapp.net/test.svc/persons](http://testv1.cloudapp.net/test.svc/persons).

My controller code looks like:

```
angular.module("ToDoApp", ["ngResource"]);
function TodoCtrl($scope, $resource) {
$scope.svc = $resource('http://testv1.cloudapp.net/test.svc/persons', {
    callback: 'JSON_CALLBACK'
}, {
    get: {
        method: 'JSONP',
        isArray: true
    }
});
$scope.items = $scope.svc.get();
$scope.msg = "Hello World";
} 
```

My html looks like:

```
<html>
<head></head>
<body>
<div ng-app="ToDoApp">
    <div ng-controller="TodoCtrl">
         <h1>{{msg}}</h1>

        <table class="table table-striped table-condensed table-hover">
            <thead>
                <th>Email</th>
                <th>First Name</th>
                <th>Last Name</th>
            </thead>
            <tbody>
                <tr ng-repeat="item in items">
                    <td>{{item.Email}}</td>
                    <td>{{item.FirstName}}</td>
                    <td>{{item.LastName}}</td>
                </tr>
            </tbody>
        </table>
    </div>
</div>
</body>
</html> 
```

Question: The table in above html is not displaying any data. I can see the call to the api in Firebug, and can also see the JSON response from the api. What am I doing incorrectly that is causing the databinding to the REST api not work?

PS:JSFiddle demonstrating this issue is at: [http://jsfiddle.net/jbliss1234/FBLFK/4/](http://jsfiddle.net/jbliss1234/FBLFK/4/)

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-07-24T02:45:46.510

为了使用 $resource 服务处理数组，建议您使用查询方法。正如您在下面看到的，查询方法是为处理数组而构建的。

```
{ 'get':    {method:'GET'},
  'save':   {method:'POST'},
  'query':  {method:'GET', isArray:true},
  'remove': {method:'DELETE'},
  'delete': {method:'DELETE'} }; 
```

为了将此数组返回到您的范围，您应该使用的代码是

```
angular.module("ToDoApp", ["ngResource"]);

function TodoCtrl($scope, $resource) {
    var svc = $resource('http://testv1.cloudapp.net/test.svc/persons');
    $scope.items = svc.query();
    $scope.msg = "Hello World";
} 
```

这假定您的 REST API 正在工作并将返回一个数组。

如需进一步阅读，请前往文档

http://docs.angularjs.org/api/ngResource.$resource

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-03-18T21:17:36.923

只是想交叉发布我对 Aleksander 在另一个 stackoverflow 问题上给出的解决方案的改编：[https](https://stackoverflow.com/a/16387288/626810) ://stackoverflow.com/a/16387288/626810 ：

```
methodName: {method:'GET', url: "/some/location/returning/array", transformResponse: function (data) {return {list: angular.fromJson(data)} }} 
```

所以当我调用这个函数时：

```
var tempData = ResourceName.methodName(function(){
  console.log(tempData.list); // list will be the array in the expected format
}); 
```

如果您需要在多个方法/资源中获取数组，显然这有点笨重，但它似乎工作。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-03-31T06:30:13.830

如果您有嵌套对象，请使用 isArray 参数：

```
angular.module('privilegeService', ['ngResource']).
factory('Privilege', function ($resource) {
    return $resource('api/users/:userId/privileges', 
                     {userId: '@id'}, 
                     {'query':  {method:'GET', isArray:false}});
}); 
```

您可以使用`container.object.property`符号来访问对象及其属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-03T20:18:55.137

您从服务器返回的阵列不是一个干净的阵列，但有一些额外的属性。这使得`ng-repeat`当您使用`in`.

您需要一个特殊的迭代器从服务器遍历数组，这将忽略那些额外的属性。所以先通过提取数组数据`forEach`，像这样：

```
$scope.items = []
var response = $scope.svc.get();
angular.forEach(response, function(item) {
  $scope.items.push(item);
}); 
```

然后你可以做

```
<tr ng-repeat="item in items"> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-25T23:05:02.993

不确定我们是否在使用 json 和 REST 时遇到同样的问题，但这篇文章解决了我的问题：[字符串数组未通过角度资源正确呈现](https://stackoverflow.com/questions/13813673/one-dimensional-array-of-strings-being-parsed-to-2d-by-angular-resource)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-03-08T20:42:04.083

我有类似的问题，但没有一个答案对我很有效，这就是我所做的：

```
 $resource("/", {}, {
       query: {
            method: 'GET',
            isArray: false,
            transformResponse: function (data, headers) {
                //if no data return so no warnings
                if (data == ''){
                    return;
                }

                return {data: $.extend({}, eval("{" + data + '}'))};
            }
        }
   }); 
```

使用 jquery。基本上将数组转换为对象，因此 angularjs 资源不会大便。

# security - Why is it recommended to make crypto algorithms public?

> ID：15725449
> 
> 赞同：2
> 
> 时间：2013-03-31T01:37:38.077
> 
> 标签：security, cryptography, encryption, cryptanalysis

Cryptography books say that you should expose your encryption/decryption algorithm to test it against attacks and cryptanalysis, and the non-exposed algorithm is not considered strong as it is not tested against attacks, but they say also that the security of the cryptographic algorithm depends mainly on the key length and key random distribution to protect it against brute force attack and mathematical analysis of the key.

My question is why do we need to expose our algorithm while it depends mainly on the key length, if my key was long enough and truly randomized, so what is the benefit of knowing the algorithm?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T01:39:45.447

The benefit of knowing the algorithm is that you don't have to trust the maker that it is really secure.

If I know that the algorithm being used has been massively tested and peer-reviewed, and the general consensus is that it is secure, then that gives me more confidence in the system.

The opposite approach is called "security to obscurity" and totally depends on no one ever finding out how things work. And if they do (as hackers are wont to), you have a problem.

In theory, it makes no difference if you share the details of your new secure algorithm with anyone else or not. But in practice, that is the only way to find out if it really is secure, and the only way to make others trust your algorithm.

The point is that a secure algorithm can only be attacked by brute forcing (which can be made infeasible with long keys). But not all algorithms are secure. They can be broken with much less effort than brute-forcing keys. If you don't get your algorithm reviewed, we won't believe you that it is secure (and neither should you, brilliant minds have failed at these things before).

# javascript - sorting Array of Objects

> ID：15725451
> 
> 赞同：-3
> 
> 时间：2013-03-31T01:37:58.113
> 
> 标签：javascript

I have an Array like the following, how would I sort it by the keys of the objects it contains?

```
var myArray = [
    item : {

    },
    anotherItem : {

    }
]; 
```

**EDIT**

`myArray` is an Object not an Array. Does that change anything?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T01:43:31.367

在 Javascript 中，[数组](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array)只能用数字键声明，[对象](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object)**只能**用字母数字键（属性）声明。

看看 Javascript 的数组[`sort()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/sort)方法可能会有所帮助。

然而，虽然没有办法用非数字键声明数组，正如 icktoofay 指出的那样，由于数组是一种特殊类型的对象，因此**可以**在声明数组后为其设置非数字键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T01:48:57.497

首先，该语法是无效的：无法在数组文字中设置键。此外，虽然有可能，但您可能不想要具有非数字属性的数组；数组旨在保存数字属性。

即使这些被纠正，对象中的属性[也没有定义的迭代顺序](http://es5.github.com/#x12.6.4)：

> 未指定枚举属性 […]的机制**和顺序。**

根据定义，排序会影响顺序；如果一开始就没有定义的顺序，你就不能真正改变它。

# r - Naming dimensions of a existing array in R

> ID：15725453
> 
> 赞同：-1
> 
> 时间：2013-03-31T01:38:15.400
> 
> 标签：r, multidimensional-array, naming

I have a existing array that I made and I want to name the dimensions of this array. I can't use the `dimnames=` argument of `array()` because I need to make this array with a different function. I need to rename the dimensions with something similar to this `names(my.array)<-my.names`.

Thanks for the help (and I'm new to this if you can't already tell)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T01:50:33.450

使用`dimnames(x) <- list(d1names, d2names, ...)`where`d1names`等`d2names`是长度与维度长度匹配的字符向量。

如果您的数组是二维的（矩阵），则可以使用`rownames(x) <- d1names`and`colnames(x) <- d2names`代替。

例子：

```
> A <- outer(outer(1:3,1:4),1:2)
> A
, , 1

     [,1] [,2] [,3] [,4]
[1,]    1    2    3    4
[2,]    2    4    6    8
[3,]    3    6    9   12

, , 2

     [,1] [,2] [,3] [,4]
[1,]    2    4    6    8
[2,]    4    8   12   16
[3,]    6   12   18   24

> dimnames(A)
NULL
> dimnames(A) <- list(LETTERS[1:3],LETTERS[1:4],LETTERS[1:2])
> A
, , A

  A B C  D
A 1 2 3  4
B 2 4 6  8
C 3 6 9 12

, , B

  A  B  C  D
A 2  4  6  8
B 4  8 12 16
C 6 12 18 24 
```

矩阵示例：

```
> B <- matrix(1:12,3,4)
> B
     [,1] [,2] [,3] [,4]
[1,]    1    4    7   10
[2,]    2    5    8   11
[3,]    3    6    9   12
> rownames(B) <- letters[1:3]
> B
  [,1] [,2] [,3] [,4]
a    1    4    7   10
b    2    5    8   11
c    3    6    9   12
> colnames(B) <- LETTERS[1:4]
> B
  A B C  D
a 1 4 7 10
b 2 5 8 11
c 3 6 9 12 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T01:53:15.313

你仍然可以使用`dimnames<-` 例如：

```
someArray <- array(1:30, dim=c(2, 3, 5))

dimnames(someArray) <- list(c("Hello", "World"), LETTERS[6:8], letters[1:5])

someArray

  # , , a

  #       F G H
  # Hello 1 3 5
  # World 2 4 6

  # , , b

  #       F  G  H
  # Hello 7  9 11
  # World 8 10 12

  # , , c

  #        F  G  H
  # Hello 13 15 17
  # World 14 16 18

  # , , d

  #        F  G  H
  # Hello 19 21 23
  # World 20 22 24

  # , , e

  #        F  G  H
  # Hello 25 27 29
  # World 26 28 30 
```

# ember.js - EmberJS: in RC2, how to use "needs" for a controller when {{render}} is called multiple times?

> ID：15725454
> 
> 赞同：3
> 
> 时间：2013-03-31T01:38:16.067
> 
> 标签：ember.js

Say you have something like this:

```
Parent hasMany Children
Child hasMany GrandChildren 
```

and every nested Child and GrandChild is rendered with its own controller (using the ability to use {{render}} multiple times in RC2).

Is it possible to have each GrandChild controller access data from its "parent" Child controller using the "needs" API?

Please see this jsfiddle for a failing example: [http://jsfiddle.net/p73jq/32/](http://jsfiddle.net/p73jq/32/)

UPDATE: simpler jsfiddle (only two levels): [http://jsfiddle.net/8V9xQ/1/](http://jsfiddle.net/8V9xQ/1/)

Thanks a lot,

PJ

# mysql - MySQL min function in where clause, how does it works?

> ID：15725456
> 
> 赞同：0
> 
> 时间：2013-03-31T01:38:28.317
> 
> 标签：mysql, sql

I have this query:

```
select
    s_acctbal, s_name, n_name, p_partkey, p_mfgr, 
    s_address, s_phone, s_comment
from 
    part, supplier, partsupp, nation, region
where 
    p_partkey = ps_partkey
    and s_suppkey = ps_suppkey
    and p_size = 15
    and p_type like '%BRASS'
    and s_nationkey = n_nationkey
    and n_regionkey = r_regionkey
    and r_name = 'EUROPE'
    and ps_supplycost = (
        select 
            min(ps_supplycost)
        from 
            partsupp, supplier, nation, region
        where 
            p_partkey = ps_partkey
            and s_suppkey = ps_suppkey
            and s_nationkey = n_nationkey
            and n_regionkey = r_regionkey
            and r_name = 'EUROPE'
    )
order by 
    s_acctbal desc, n_name, s_name, p_partkey; 
```

**First doubt:**

Why in the subselect (the inner select) `r_name='EUROPE'` was set again? I understand that the line `p_partkey = ps_partkey` give to this subselect the same conditions of the outter select, so there is no need to set it again, or not?

**Second doubt:**

The line `r_name = 'EUROPE'` in the inner select make some diferences (that i cant see, but i want to know) in the query. If i count the results of the original query i had 460 entrys. And if i get out the `r_name = 'EUROPE'` of inner select i got only 144 entrys. This look like crazy, with this condition (and consequently more restrictions) and had more results than when i get out the condition. Why this occurs?

FYI (maybe this help why my mind is blowing with this query):

The original query returns:

```
s_acctbal s_name             n_name         p_partkey p_mfgr         s_address                              s_phone         s_comment                                                                                      
--------- ------------------ -------------- --------- -------------- -------------------------------------- --------------- ---------------------------------------------------------------------------------------------- 
9938.53   Supplier#000005359 UNITED KINGDOM 185358    Manufacturer#4 QKuHYh,vZGiwu2FWEJoLDx04               33-429-790-6131 blithely silent pinto beans are furiously. slyly final deposits acros

9937.84   Supplier#000005969 ROMANIA        108438    Manufacturer#1 ANDENSOSmk,miq23Xfb5RWt6dvUcvt6Qa      29-520-692-3537 carefully slow deposits use furiously. slyly ironic platelets above the ironic 

9936.22   Supplier#000005250 UNITED KINGDOM 249       Manufacturer#4 B3rqp0xbSEim4Mpy2RH J                  33-320-228-2957 blithely special packages are. stealthily express deposits across the closely final instructi

9923.77   Supplier#000002324 GERMANY        29821     Manufacturer#4 y3OD9UywSTOk                           17-779-299-1839 quickly express packages breach quiet pinto beans. requ

9871.22   Supplier#000006373 GERMANY        43868     Manufacturer#5 J8fcXWsTqM                             17-813-485-8637 never silent deposits integrate furiously blit

9870.78   Supplier#000001286 GERMANY        81285     Manufacturer#2 YKA,E2fjiVd7eUrzp2Ef8j1QxGo2DFnosaTEH  17-516-924-4574 final theodolites cajole slyly special, 

9870.78   Supplier#000001286 GERMANY        181285    Manufacturer#4 YKA,E2fjiVd7eUrzp2Ef8j1QxGo2DFnosaTEH  17-516-924-4574 final theodolites cajole slyly special, 

9852.52   Supplier#000008973 RUSSIA         18972     Manufacturer#2 t5L67YdBYYH6o,Vz24jpDyQ9               32-188-594-7038 quickly regular instructions wake-- carefully unusual braids into the expres

9847.83   Supplier#000008097 RUSSIA         130557    Manufacturer#2 xMe97bpE69NzdwLoX                      32-375-640-3593 slyly regular dependencies sleep slyly furiously express dep

9847.57   Supplier#000006345 FRANCE         86344     Manufacturer#1 VSt3rzk3qG698u6ld8HhOByvrTcSTSvQlDQDag 16-886-766-7945 silent pinto beans should have to snooze carefully along the final reques

9847.57   Supplier#000006345 FRANCE         173827    Manufacturer#2 VSt3rzk3qG698u6ld8HhOByvrTcSTSvQlDQDag 16-886-766-7945 silent pinto beans should have to snooze carefully along the final reques 
```

The query without the inner select condition `r_name = 'EUROPA'` returns:

```
s_acctbal s_name             n_name         p_partkey p_mfgr         s_address                               s_phone         s_comment                                                                             
--------- ------------------ -------------- --------- -------------- --------------------------------------- --------------- ------------------------------------------------------------------------------------- 
9938.53   Supplier#000005359 UNITED KINGDOM 185358    Manufacturer#4 QKuHYh,vZGiwu2FWEJoLDx04                33-429-790-6131 blithely silent pinto beans are furiously. slyly final deposits acros

9817.10   Supplier#000002352 RUSSIA         124815    Manufacturer#2 4LfoHUZjgjEbAKw TgdKcgOc4D4uCYw         32-551-831-1437 blithely pending packages across the ironic accounts grow slyly after the furiously

9721.95   Supplier#000008757 UNITED KINGDOM 156241    Manufacturer#3 Atg6GnM4dT2                             33-821-407-2995 ironic, even dolphins above the furiously ironic foxes sleep slyly around the caref

9643.55   Supplier#000005148 ROMANIA        107617    Manufacturer#1 kT4ciVFslx9z4s79p Js825                 29-252-617-4850 doggedly even ideas boost furiously against the furiously express

9612.94   Supplier#000003228 ROMANIA        198189    Manufacturer#4 KDdpNKN3cWu7ZSrbdqp7AfSLxx,qWB          29-325-784-8187 carefully pending accounts serve. furiously close deposits boost slyly. q

9571.83   Supplier#000004305 ROMANIA        179270    Manufacturer#2 qNHZ7WmCzygwMPRDO9Ps                    29-973-481-1831 furiously final deposits 

9558.10   Supplier#000003532 UNITED KINGDOM 88515     Manufacturer#4 EOeuiiOn21OVpTlGguufFDFsbN1p0lhpxHp     33-152-301-2164 daring, sly accounts breach about th

9280.27   Supplier#000007194 ROMANIA        47193     Manufacturer#3 zhRUQkBSrFYxIAXTfInj vyGRQjeK           29-318-454-2133 slyly ironic requests despite the unusual ins

9249.35   Supplier#000003973 FRANCE         26466     Manufacturer#1 d18GiDsL6Wm2IsGXM,RZf1jCsgZAOjNYVThTRP4 16-722-866-1658 quickly ironic sauternes use b

9249.35   Supplier#000003973 FRANCE         33972     Manufacturer#1 d18GiDsL6Wm2IsGXM,RZf1jCsgZAOjNYVThTRP4 16-722-866-1658 quickly ironic sauternes use b

9201.47   Supplier#000009690 UNITED KINGDOM 67183     Manufacturer#5 CB BnUTlmi5zdeEl7R7                     33-121-267-9529 blithely unusual accounts integrate slyly. platelets 

9094.57   Supplier#000004582 RUSSIA         39575     Manufacturer#1 WB0XkCSG3r,mnQ n,h9VIxjjr9ARHFvKgMDf    32-587-577-1351 asymptotes above the slyly even requests haggle furiously about the regular accounts 
```

And last the query without (ps_supplycost = ...) returns:

```
s_acctbal s_name             n_name         p_partkey p_mfgr         s_address                              s_phone         s_comment                                                                                          
--------- ------------------ -------------- --------- -------------- -------------------------------------- --------------- -------------------------------------------------------------------------------------------------- 
9984.69   Supplier#000008875 ROMANIA        13872     Manufacturer#3 hRdOqKqyU,sHq                          29-132-904-4395 ironic instructions among the ironic requests boost at the ironic, ironic deposits. quick

9955.05   Supplier#000008810 UNITED KINGDOM 73795     Manufacturer#2 ,Ot93zDXOFSjWSKsKrT7XJ4YPCP,A          33-527-478-5988 furiously unusual pinto beans nag ironic platelets. regular, bold fox

9955.05   Supplier#000008810 UNITED KINGDOM 81285     Manufacturer#2 ,Ot93zDXOFSjWSKsKrT7XJ4YPCP,A          33-527-478-5988 furiously unusual pinto beans nag ironic platelets. regular, bold fox

9938.53   Supplier#000005359 UNITED KINGDOM 185358    Manufacturer#4 QKuHYh,vZGiwu2FWEJoLDx04               33-429-790-6131 blithely silent pinto beans are furiously. slyly final deposits acros

9937.84   Supplier#000005969 ROMANIA        108438    Manufacturer#1 ANDENSOSmk,miq23Xfb5RWt6dvUcvt6Qa      29-520-692-3537 carefully slow deposits use furiously. slyly ironic platelets above the ironic 

9936.22   Supplier#000005250 UNITED KINGDOM 249       Manufacturer#4 B3rqp0xbSEim4Mpy2RH J                  33-320-228-2957 blithely special packages are. stealthily express deposits across the closely final instructi

9923.77   Supplier#000002324 GERMANY        29821     Manufacturer#4 y3OD9UywSTOk                           17-779-299-1839 quickly express packages breach quiet pinto beans. requ

9871.22   Supplier#000006373 GERMANY        43868     Manufacturer#5 J8fcXWsTqM                             17-813-485-8637 never silent deposits integrate furiously blit

9870.78   Supplier#000001286 GERMANY        81285     Manufacturer#2 YKA,E2fjiVd7eUrzp2Ef8j1QxGo2DFnosaTEH  17-516-924-4574 final theodolites cajole slyly special, 

9870.78   Supplier#000001286 GERMANY        181285    Manufacturer#4 YKA,E2fjiVd7eUrzp2Ef8j1QxGo2DFnosaTEH  17-516-924-4574 final theodolites cajole slyly special, 

9852.52   Supplier#000008973 RUSSIA         18972     Manufacturer#2 t5L67YdBYYH6o,Vz24jpDyQ9               32-188-594-7038 quickly regular instructions wake-- carefully unusual braids into the expres

9847.83   Supplier#000008097 RUSSIA         130557    Manufacturer#2 xMe97bpE69NzdwLoX                      32-375-640-3593 slyly regular dependencies sleep slyly furiously express dep

9847.57   Supplier#000006345 FRANCE         66344     Manufacturer#4 VSt3rzk3qG698u6ld8HhOByvrTcSTSvQlDQDag 16-886-766-7945 silent pinto beans should have to snooze carefully along the final reques

9847.57   Supplier#000006345 FRANCE         86344     Manufacturer#1 VSt3rzk3qG698u6ld8HhOByvrTcSTSvQlDQDag 16-886-766-7945 silent pinto beans should have to snooze carefully along the final reques

9847.57   Supplier#000006345 FRANCE         173827    Manufacturer#2 VSt3rzk3qG698u6ld8HhOByvrTcSTSvQlDQDag 16-886-766-7945 silent pinto beans should have to snooze carefully along the final reques

9836.93   Supplier#000007342 RUSSIA         4841      Manufacturer#4 JOlK7C1,7xrEZSSOw                      32-399-414-5385 final accounts haggle. bold accounts are furiously dugouts. furiously silent asymptotes are slyly 
```

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T03:50:56.597

看起来您正在尝试为 p_size = 15 和 p_type 之类的“%BRASS”之类的任何项目找到最便宜的供应成本...您的 SUBQUERY 没有此限制...因此您的主要查询可能有 100 种产品（通过之类的），但是您的 SUBQUERY 可能有 50,000 个条目，因为您没有将其限制为仅具有相同产品类型的 p_size = 15 的那些供应的相同标准。

您可能需要让您的内部查询还包括要应用 MIN() 的 p_type 和 GROUP BY，然后将其作为连接的基础。我已经通过您拥有的命名约定以对您的表/字段关系的最佳猜测重写了查询......

另外，请注意我的内部查询明确使用 alias.field 名称引用。希望不要与外部查询的相同字段名称/值混淆。我可能不准确，但我认为我在您正在寻找的原则上很接近。

```
select
      s_acctbal, 
      s_name, 
      n_name, 
      p_partkey, 
      p_mfgr, 
      s_address, 
      s_phone, 
      s_comment,
      p_type,
      ps_supplycost
   from 
      part
         JOIN partsupp
            ON p_partkey = ps_partkey 
            JOIN supplier
               ON ps_suppkey = s_suppkey 
               JOIN nation
                  ON s_nationkey = n_nationkey 
                  JOIN region
                     ON n_regionkey = r_regionkey
                     AND r_name = 'EUROPE'

         JOIN ( SELECT 
                      P.p_type,
                      MIN( PS.ps_supplycost ) MinCost
                   from 
                      part P
                         JOIN partsupp PS
                            ON P.p_partkey = PS.ps_partkey
                            JOIN supplier S
                               ON PS.ps_suppkey = S.s_suppkey 
                               JOIN nation N
                                  ON S.s_nationkey = N.n_nationkey 
                                  JOIN region R
                                     ON N.n_regionkey = R.r_regionkey
                                     AND R.r_name = 'EUROPE' 
                   where 
                          P.p_size = 15
                      AND P.p_type like '%BRASS'
                   ) MinPerType
            ON p_type = MinPerType.p_type
            AND ps_supplycost = MinPerType.MinCost        
   where 
          p_size = 15
      AND p_type like '%BRASS'
   order by 
      s_acctbal desc, 
      n_name, 
      s_name, 
      p_partkey; 
```

因此，如您所见，检测最低价格的内部查询基于每个“P_TYPE”值。如果处理来自乐器的黄铜物品，或用于制造、管道等的黄铜金属，每种“类型”可能会有很大的价格差异，您正在寻找前：

```
BRASS #1  (small thing) that supply cost range $1.50 - $2.15  vs
BRASS #83 (huge item) that supply cost range $42.00 - $48.50 
```

您永远不会选择 BRASS #83，因为它的价格标签成本永远不会接近 1.50 美元。但是，您可能有 10 个 BRASS #1 的供应商，价格为 1.50 美元，7 个 BRASS #83 的供应商，价格为 42.00 美元，因此您的最终查询将返回 17 条记录（根据此示例）

# python - How do you create a for loop with a dynamic range?

> ID：15725458
> 
> 赞同：10
> 
> 时间：2013-03-31T01:39:15.650
> 
> 标签：python

I am iterating through a list. An element could be added to this list during an iteration. So the problem is that the loop only iterates through the original length of this list.

My code:

```
 i = 1
    for p in srcPts[1:]:  # skip the first item.
        pt1 = srcPts[i - 1]["Point"]
        pt2 = p["Point"]

        d = MathUtils.distance(pt1, pt2)
        if (D + d) >= I:
            qx = pt1.X + ((I - D) / d) * (pt2.X - pt1.X)
            qy = pt1.Y + ((I - D) / d) * (pt2.Y - pt1.Y)
            q  = Point(float(qx), float(qy))
            # Append new point q.
            dstPts.append(q)
            # Insert 'q' at position i in points s.t. 'q' will be the next i.
            srcPts.insert(i, {"Point": q})
            D = 0.0
        else:
            D += d
        i += 1 
```

I've tried using `for i in range(1, len(srcPts)):` but again the range stays the same even after more items have been added to the list.

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-31T01:45:02.190

You need to use a `while` loop instead in this case:

```
i = 1
while i < len(srcPts):
    # ...
    i += 1 
```

A `for` loop creates an iterator for your list, *once*. And once created that iterator does not know that you altered the list in the loop. The `while` variant shown here *recalculates* the length each time instead.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-31T01:42:10.367

The problem is that `len(srcPts)` is only computed once, when you pass it as an argument to the `range` generator. So you need to have a terminating condition that repeatedly evaluates the current length of `srcPts` during each iteration. There's many ways to do this, such as :

```
while i < len(srcPts):

  .... 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-31T01:53:55.497

In the line:

```
for p in srcPts[1:]:  # skip the first item. 
```

slicing makes a new copy of scrPtrs, so it is fixed size.

Disclaimer: It feels wrong to modify a list being iterator over, yet this works...

Create an iterator over the list prevents the copy and still allows items to be added and inserted:

```
L = [1,2,2,3,4,5,2,2,6]
it = iter(L)
next(it) # skip the first item
for i,p in enumerate(it,1):
    if p == 2:
        L.insert(i+1,7) # insert a 7 as the next item after each 2
    print(p) 
```

Output:

```
2
7
2
7
3
4
5
2
7
2
7
6 
```

# eclipse - How to use javassist to change the eclipse's compilation?

> ID：15725459
> 
> 赞同：1
> 
> 时间：2013-03-31T01:39:24.010
> 
> 标签：eclipse, compilation, javassist

Eclipse can compile java source code to byte code automatically. I write some enhancers with javassist, which can modify the existing byte code and add some new fields and methods to them.

How to configure eclipse that when it compiles, it will automatically invoke my enhancers to modify the byte code and save them to .class files as normal? That my other java code can find and invoke these new fields and methods.

Is it a complicated work that may be I need to write a custom eclipse plugin?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T07:56:55.277

You don't need to write a plugin, you only need to add a builder to each Java project where you want to invoke your tool. Use project properties -> Builders -> New to either add a small Ant script or an external program. That builder is then invoked each time the eclipse build process runs.

There is a small [tutorial in the eclipse help](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.platform.doc.user/gettingStarted/qs-93_project_builder.htm) to demonstrate this.

# ruby-on-rails - Why do we not use @var in authentication?

> ID：15725460
> 
> 赞同：0
> 
> 时间：2013-03-31T01:39:39.667
> 
> 标签：ruby-on-rails

```
def create
  user = User.find_by_name(params[:name])

  if user and user.authenticate(params[:password])
    session[:user_id] = user.id
    redirect_to admin_url
  else
    redirect_to login_url, alert: "Invalid user/password combination" 
  end

end 
```

Here why user is declared as a local variable instead of instance variable @user?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T01:47:28.670

可能是因为视图不需要访问`user`对象。它只是实例化它以查看它是否是有效用户并正确验证，然后重定向到管理页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T01:47:37.783

因为您通常不需要在操作之外访问用户变量

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T12:21:32.883

答案是因为此操作不需要视图。该操作包含一个 if else 块，该块都重定向，因此实例变量没有用处。

# html - 使用 HTML5 的微数据

> ID：15725466
> 
> 赞同：0
> 
> 时间：2013-03-31T01:40:22.237
> 
> 标签：html

我在哪里为我的网站上的产品添加微数据？

我是将其添加到实际页面上，例如 www.mysite.com/product/samsung-58-inch-tv.html，还是将其添加到产品的汇总列表中？例如 www.mysite.com/products/tvs.html - 还是我将它添加到两者？

汇总列表包含网站销售的所有电视的列表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T03:31:01.660

它不会被视为“垃圾邮件”。
谷歌、必应和雅虎都同意使用[http://Schema.org上的微数据格式](http://Schema.org)

任何项目/乐队/歌曲/事件/评论/评级/评论/等等，可以干净利落地标记应该是。
并且应该在有足够数据让消费者能够判断“事物”是可能成为评论主题的相同“事物”的任何地方进行，或者可能有自己的页面，或者可能在商店有一个商品页面，但也可能在制造商的网站上有一个产品页面......

这些东西的所有种类都有模式。
但是你必须做一些阅读，并且在全速投入之前，你可能需要学习一些教程。

例如，我有一个乐队。
如果人们想查看事件源/事件小部件，我会将每场音乐会标记为自己的 MusicEvent。
如果人们想点击该音乐活动的专用页面并查看整页新闻稿或其他内容，我会将该数据标记为同一活动（确保我的所有信息拼写一致，并且一致地描绘，等等）。

```
<section id="concert-listings">
    <!-- here's where all of our concert-listings go -->
    <article itemscope itemtype="http://schema.org/MusicEvent" class="concert">
        <h1 itemprop="name">
            <a itemprop="url" href="//nerdswithguitars.ca/events/2013-04-01/nwg_at_rancho">
                Nerds with Guitars@Rancho Relaxo w/ Rorry Taillon &amp; the Old Souls
            </a>
        </h1>
        <dl class="specs">
            <dt>when:</dt>
            <dd>April 1st, 2013
                <meta itemprop="startDate" content="2013-04-01T21:30:00">
                <meta itemprop="endDate"   content="2013-04-02T00:30:00">
            </dd>
            <dd>doors at 8:30 - music starts at 9:30</dd>
            <dt>where:</dt>
            <dd itemscope itemtype="http://schema.org/EventVenue">
                <article>
                    <h1 itemprop="name">
                        <a itemprop="url" href="//ranchorelaxo.biz/rancho_live.html">
                            Rancho Relaxo
                        </a>
                    </h1>
                    <ul itemprop="address" itemscope itemtype="http://schema.org/PostalAddress">
                        <li itemprop="streetAddress">300 College St</li>
                        <li>
                            <span itemprop="addressLocality">Toronto</span>,
                            <span itemprop="addressRegion">Ontario</span>
                        </li>
                        <li itemprop="postalCode">M5T 1R9</li>
                    </ul>
                </article>
            </dd>
        </dl>
        <section class="details" itemprop="details">
            <p>Join
                <span itemprop="performer" itemscope itemtype="http://schema.org/MusicGroup">
                    <a itemprop="url" href="//nerdswithguitars.ca">
                        <span itemprop="name">Nerds with Guitars</span>
                    </a>
                </span> and 
                <span itemprop="performer" itemscope itemtype="http://schema.org/MusicGroup">
                    <a itemprop="url" href="//rorytaillon.com">
                        <span itemprop="name">Rory Taillon &amp; the Old Souls</span>
                    </a>
                </span> as they...  ....  ....</p>
            <p>...</p>
        </section>
    </article>
    <!--  .........  -->
</section> 
```

那里有很多，特别是考虑到这只是一个单一的（假的）事件，而且它只是一个需要知道的东西的简介。
门票信息甚至不包含在此处（但微数据也包含在内）。

如果您仔细观察，您会发现一个事件具有属性（名称、网站/页面、开始和结束时间）......但是它的一些属性可以具有属性。
音乐会在场地举行。
但是场地有一个名称、一个网址和一个地址。
一个地址有一条街道、一个地区、一个地区、一个国家、一个邮政编码......

音乐会也有表演者......
表演者可能是独奏者或乐队......
但每个人都可能有一个名字，可能有一个网站，会有成员 - 每个成员可能有自己的个人网站，姓名，年龄和住所（与它自己的地址），以及电话号码和在一个拥有自己的组织的日常工作
............

您可以将这些东西嵌套到永恒中。
不。

标记您希望 Google 查找、理解并返回链接的内容。
例如，如果我向 Google 提供了足够多的以 Nerds with Guitars 为特色的活动，当我这样做时，我将事件与 Nerds with Guitars 乐队联系起来，然后我将乐队名称与 NwG 网站联系起来，并与将 NwG 网站/内容添加到乐队成员的 Google+ 帐户，然后突然之间，搜索音乐可能会触发事件列表，并可能触发用户个人资料显示在搜索中，并且乐队的网站可能会显示搜索乐队正在演奏的知名活动等。

那不是垃圾邮件。
这就是所有相关且相互关联且独特的内容。
谷歌吃掉了这些东西。

这里的关键区别在于，谷歌现在采用合格的元数据（而不是旧的`meta keywords`废话），并将它们捆绑在一起。
它也没有照原样。它正在对格式进行验证（以确保机器可读的东西，如日期和持续时间是机器可读的），并且还对它已经拥有的关于某事物的数据进行交叉引用。

如果有 800 个事件/视频/歌曲/t-shirts/etc 说 Nerds with Guitars 位于“//nerdswithguitars.ca/”，并且`<link rel="author">`页面上指向 G+ 个人资料，那么现在一些 leet-haxx0r 会尝试将带有 Guitars url 的 Nerds 定义为“//uberhaxxed.ru/viagra-sales”，Google 很有可能会使用旧数据，而不是将这些数据包含在搜索结果中。

This is not a perfect technology, but basically, the more data gets shared, the more information Google has to work with, in terms of intelligently doing its "Big-Data" black-magic (which is pretty cool) on your stuff.

Hope that helps.

One other thing that Google doesn't really do an awesome job of telling you, on [http://Schema.org](http://Schema.org), or in tutorials on the [http://webmasters.google.com](http://webmasters.google.com) site (at least from what I've seen in the microdata FAQs):

An itemprop can be an itemtype, or can just be a URL/string...
It can also be BOTH an itemprop for the parent item (concert) and the itemtype wrapper (itemscope) for another item (band), at the same time.
If you were to leave an address as an itemprop, but fill the address out in a `<ul itemprop="address">`, Google would take all of the text inside of that `<ul>` and try to use it as the address.

You can have `<a itemprop="url" href="...">` wrapped AROUND another itemprop (or even wrapped around a WHOLE sub-item, if you wanted).

```
<a itemprop="url" href="..."><span itemprop="name">Bob</span></a> 
```

Also, if there's data that you really want to get in there, but doesn't make sense to put in, where it's human-readable: if you don't want to have `2013-04-01T21:30` as your actual date, for example, you can use `<meta itemprop="startDate" content="2013-04-01T21:30">`.
Alternatively, for time/date properties, specifically, you can use `<time datetime="...">` and Google will intelligently pull the info out of there, much as it is smart enough to pull the `url` out of `<a href="...">` or `<link href="...">`, or `<img src="...">` if you make them `itemprop`s.

This isn't for stuffing entries with keywords, but rather for bridging gaps where it really just doesn't make sense to put something in plain sight, because people already have the context, but the machine doesn't.

An example: Nerds with Guitars is pretty much guaranteed to be on the bill at a Nerds with Guitars show. If you're on the homepage, looking at the widget, nobody needs to know that NwG is going to be there. Nor do they need a link back to the homepage, which they're already on.
People might like to know who else is on the bill, though. So those people should be mentioned and linked to.
In that case, you should still include meta information for the band, so that Google can link the event back.

Hope this helps a little.

# javascript - Combining two javascripts

> ID：15725468
> 
> 赞同：-1
> 
> 时间：2013-03-31T01:40:43.327
> 
> 标签：javascript, internet-explorer

I found two javascripts that I would like to combine.

First one:

```
<script type="text/javascript">            
function checker(url) {
    if (/MSIE (\d+\.\d+);/.test(navigator.userAgent)){
        var referLink = document.createElement('a');
        referLink.href = url;
        document.body.appendChild(referLink);
        referLink.click();
    } else {
        location.href = url;
    }
}
checker("http://check");
</script> 
```

And what that one does is pass the refer in IE

The second one:

```
<script language="JavaScript">
if (document.referrer.indexOf('somesite.com') > -1)
location.href='http://promo.com/';
else
location.href='http://mysite.com';
</script> 
```

And the code above checks on where to send the user based if they are refered from the site they come from. I was trying to combine them into a single script. So I thought this would work:

```
<script type="text/javascript">
if (document.referrer.indexOf('somesite.com') > -1)
function check(url) {
    if (/MSIE (\d+\.\d+);/.test(navigator.userAgent)){
        var referLink = document.createElement('a');
        referLink.href = url;
        document.body.appendChild(referLink);
        referLink.click();
    } else {
        location.href = url;
    }
}
check("http://check");
else
location.href='http://mysite.com'
</script> 
```

Any suggestion?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T01:56:01.313

您不能将函数定义放在`if`语句中。先放函数定义，再放*语句*`if`：

```
function check(url) {
    if (/MSIE (\d+\.\d+);/.test(navigator.userAgent)){
        var referLink = document.createElement('a');
        referLink.href = url;
        document.body.appendChild(referLink);
        referLink.click();
    } else {
        location.href = url;
    }
}
if (document.referrer.indexOf('somesite.com') > -1)
    check("http://check");
else
    location.href='http://mysite.com' 
```

# html - 如何向图像添加另一个标题 div？

> ID：15725470
> 
> 赞同：0
> 
> 时间：2013-03-31T01:41:03.530
> 
> 标签：html

我想在图像上添加两个标题，在谷歌搜索后我能够进行编码，但它仅适用于一个标题 div，当我添加第二个标题 div 时，它消失了..

我的代码：

```
<style>
.background_image
{
 background:url(1.jpg);  
 width:420px;                    
 height:205px;                   
 border:1px solid #FFFF00;        
 overflow:hidden;                
 }

.text_caption
{
 padding-left:2px;               
 padding-top:0px;                 
 padding-right:2px;              
 padding-bottom:2px;              
 color:#fffff;                  
 font-size:30px;                 
 font-weight:bold;                
 font-family:Trebuchet MS;               
 text-decoration:none;       
 margin-left:5px;                 
 margin-top:140px;                 
 }

.text_caption2
{
 padding-left:4px;                
 padding-top:0px;                 
 padding-right:4px;               
 padding-bottom:0px;             
 color:#000000;                   
 font-size:26px;                 
 font-weight:bold;                
 font-family:Trebuchet MS;               
 text-decoration:none;       
 margin-left:5px;                
 margin-top:150px;                
 }

</style>

<div class="background_image">
<div class="text_caption">Caption 1</div> /* this works */
<div class="text_caption2">Caption 2</div> /* this caption disappears */

</div> 
```

有什么帮助吗？我的代码有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T01:55:02.447

`.text_caption2 { margin-top:150px }`将其推离 div 的底部，溢出设置为隐藏。

只需删除该规则，您就会看到它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T02:30:29.040

您可以简单地将字幕嵌套到图像中，然后使图像相对和字幕绝对定位，如下所示：

**HTML**

```
<div class="background">
    <div class="text_caption">CAPTION 1</div>
    <div class="text_caption2">CAPTION 2</div>
</div> 
```

**CSS**

```
.background {
    position: relative;
    width: 420px;
    height: 205px;
    background: transparent url(http://placehold.it/420x205) top left no-repeat;
    border:1px solid #ffff00;
    overflow:hidden;
}
.text_caption, .text_caption2 {
    position: absolute;
    font-weight: bold;
    font-family: Trebuchet MS;
    text-decoration: none;
}
.text_caption {
    padding: 0 2px 2px;
    left: 5px;
    bottom: 30px;
    color: #ffffff;
    font-size: 30px;
}
.text_caption2 {
    left: 10px;
    bottom: 5px;
    padding: 0 4px;
    color:#000000;
    font-size:26px;
} 
```

以这种方式更改 HTML 布局，标题将始终跟随相关图像，并且始终相对于其容器（图像）定位。

* * *

A further enhancement could be to separate image from `.background` class, so that you could define base properties to the image container, and add a class with its own relative properties for every image you want to display (see the code in my fiddle).

* * *

[Here](http://jsfiddle.net/ragnarokkr/2pzeQ/) the example.

# java - Do loop program

> ID：15725472
> 
> 赞同：1
> 
> 时间：2013-03-31T01:41:45.647
> 
> 标签：java, loops, while-loop, do-while

I'm working on this program for my intro to java class. I've been having a lot of issues. I'm using eclipse. The program is supposed to find the average, range, min, and max numbers. I have everything (at least I do according to her notes, which confuse me...) and have put it all into eclipse. It keeps telling me an error that I need a while(); to end the loop. I've already done this...have I put in the wrong place? What am I doing wrong??

```
import java.util.Scanner;
public class A_Alnor_SquenceOfNumbers {

    public static void main(String[] args) {
        Scanner in = new Scanner(System.in);
        int count = 0;
        double sum = 0;
        double input = 0;
        double average;
        double min = in.nextDouble();
        double max = in.nextDouble();

        do {
            System.out.println("Enter a value, type -1 to finish: ");
            boolean done = false;
            while (!done) {
                input = in.nextDouble();
                if (input == -1) {
                    done = true;
                } else

                    while (in.hasNextDouble()) {
                        input = in.nextDouble();
                        sum = sum + input;
                        count++;
                    }

                if (count > 0) {
                    average = sum / count;
                }
                while (in.hasNextDouble()) {
                    input = in.nextDouble();
                    if (input > max) {
                        max = input;
                    }
                    while (in.hasNextDouble())
                        if (input < min) {
                            min = input;
                        }
                }
            }
            while (done) ;
            {
                System.out.println("The average is " + average + ".");
                System.out.println("The smallest number is " + min + ".");
                System.out.println("The largest number is " + max + ".");
                System.out.println("the range is " + min + " to " + max + ".");
                System.out.println(count);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T01:47:05.697

您正在使用 do..while 构造，并且 do-statement 在其末尾没有任何匹配的 while 子句，可能是由于括号放错了位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T01:51:16.463

您确实在使用没有正确语法的 do while 循环。删除最外层的 do-statement。

此外：您需要修改很多代码，因为这不会终止。它会检查一次输入是否为 -1（注意这是一个整数，而不是双精度！！！）如果不是这种情况，您会继续向用户询问双精度（在很多 while 语句中）。首先创建伪代码并确保它是正确的，因为这不起作用。

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T01:48:37.570

Java中有几种循环。您似乎正在使用两种：

`while`环形：

```
while (condition) {
    loop-body
} 
```

`do`环形：

```
do {
    loop-body
} while (condition); 
```

您的外部循环是一个`do`循环，但缺少终止`while (condition)`部分。`loop-body`外循环的部分`do`本身包含作为循环的内`while`循环。检查你的代码结构，你应该能够解决它。

# c# - Connect via JavaScript to a C# TCP-Listener

> ID：15725481
> 
> 赞同：0
> 
> 时间：2013-03-31T01:43:11.043
> 
> 标签：c#, javascript, tcplistener

i've already looked up in the web, but can't find any solution for it.

Is it possible to connect to a TCP-Listener with JavaScript?

I don't look for socket.io or node.js - cause I don't want to use an external programm like they are.

# ios - Xcode - PSMultiValueSpecifier

> ID：15725482
> 
> 赞同：0
> 
> 时间：2013-03-30T22:40:24.477
> 
> 标签：ios, xcode, settings

I wanna implement a PSMultiValueSpecifier in my App, so Users can change the Animation of iCarousel. I tried a lot now, but i can't figure out the right code (for my ViewController.m) ..

Maybe you can help me with that..

I wanna have something like that:

```
if(value 1 clicked) {
self.photoCarousel.type = iCarouselTypeRotary;
}
elseif(value 2 clicked){
self.photoCarousel.type = iCarouselTypeCylinder;
} 
```

... and so on ( i have 6 values).

I really hope, you can give me the code, so i can implement it

My root.plist you can see here:

![root.plist.png](https://i.stack.imgur.com/gq2eU.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T01:53:27.410

我使用以下代码加载默认值：

```
NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
[userDefaults registerDefaults: [self initialDefaults]]; 
```

但我不知道，如何编写一个 if 查询来检查实际选择了哪个值，或者我的程序应该执行哪个操作。我希望你能理解我的问题，我的英语不是最好的，对不起。

这是我第一次使用 settings.bundle。

# visual-studio-2012 - Adding a static library to a project in the same solution (Visual Studio 2012)

> ID：15725483
> 
> 赞同：4
> 
> 时间：2013-03-31T01:43:12.453
> 
> 标签：visual-studio-2012, static-libraries

I'm trying to create a static library that I will be using in a project. The library compiles fine and creates the *.lib file for it. To test my code, I added another project to the same solution. When I try to build the test project I get the following errors.

> error LNK1120: 4 unresolved externals
> 
> error LNK2019: unresolved external symbol "public: __thiscall >matrix::~matrix(void)" (??1?$matrix@M@@QAE@XZ) referenced in function _main
> 
> error LNK2019: unresolved external symbol "public: __thiscall >matrix::matrix>(int,int)" (??0?$matrix@M@@QAE@HH@Z) referenced in function >_main C:\Users\Ryan\Documents\Spring 2013\ECE >4007\PointCloudLib\matrix_test\matrix_test.obj matrix_test
> 
> error LNK2019: unresolved external symbol "public: bool __thiscall >matrix::set(int,int,float)" (?set@?$matrix@M@@QAE_NHHM@Z) referenced in function >_main
> 
> error LNK2019: unresolved external symbol "public: static void __cdecl >matrix::print(class matrix const &)" (?print@?$matrix@M@@SAXABV1@@Z) >referenced in function _main

To use the library in my code I performed the following steps:

1.  Added a reference to the static library by going to References...>Add New Reference.. and selecting my library
2.  Added the directory where the source files to the include directories via Configuration Properties>C/C++>General>Additional Include Directories (I feel like this shouldn't be necessary since it kind of defeats the purpose of creating a library)

Those are the steps listed on Microsoft's msdn site about creating your own static libraries and it seems to be what other people are saying is the solution to the problem.

Is there something else I need to do to use the library in my project?

Also, here is the code I'm using to test the library:

```
#pragma once

#include "stdafx.h"
#include <iostream>
#include "matrix.h"

#define PI 3.14
#define matrix_f matrix<float>

int main()
{
    matrix_f m(3,4);

    for(int i = 0; i < 3; i++)
        for(int j = 0; j < 4; j++)
            m.set(i,j,PI/((i+1)*(j+1)));

    matrix_f::print(m);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-02-18T21:02:40.733

您需要添加对要找到静态库的库目录的引用：

[![配置属性->链接器->常规->附加库目录](https://i.stack.imgur.com/OfPDq.png)](https://i.stack.imgur.com/OfPDq.png)

# php - curl如何发布数据？

> ID：15725493
> 
> 赞同：0
> 
> 时间：2013-03-31T01:45:13.770
> 
> 标签：php, curl

所以，我有这个 cURL 代码，我在网上找到了一个模板

```
<?php

//create array of data to be posted
$post_data['ssl_merchant_id'] = 'xxx';
$post_data['ssl_user_id'] = 'xxx';
$post_data['ssl_pin'] = 'xxx';
$post_data['ssl_transaction_type'] = 'xxx';
$post_data['confirm_code'] = $_POST['confirm_code'];
$post_data['ssl_show_form'] = 'xxx';
$post_data['ssl_cardholder_ip'] = $_POST['ssl_cardholder_ip'];
$post_data['ssl_amount'] = $_POST['ssl_amount'];

//traverse array and prepare data for posting (key1=value1)
foreach ( $post_data as $key => $value) {
    $post_items[] = $key . '=' . $value;
}

//create the final string to be posted using implode()
$post_string = implode ('&', $post_items);

//create cURL connection
$curl_connection = 
  curl_init('xxx/cart2.php');

//set options

curl_setopt($curl_connection, CURLOPT_RETURNTRANSFER, true);
curl_setopt($curl_connection, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($curl_connection, CURLOPT_FOLLOWLOCATION, 1);

//set data to be posted
curl_setopt($curl_connection, CURLOPT_POSTFIELDS, $post_string);

//perform our request
$result = curl_exec($curl_connection);

//show information regarding the request
print_r(curl_getinfo($curl_connection));
echo curl_errno($curl_connection) . '-' . 
                curl_error($curl_connection);

//close the connection
curl_close($curl_connection);
echo $result;
?> 
```

我的问题是，如何调用要在 cart2.php 页面上使用的已发布变量，我将使用这些已发布变量在 cart2.php 页面上填写另一个表单，然后将该页面提交到另一个页面。或者有什么方法可以放置重定向或保存最后一页的帖子变量的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T01:52:07.047

**试试这个**

```
 //set POST variables
    $url = 'http://yourdomain.com/';
    $fields = array(
                        'ssl_merchant_id' => urlencode('xxxx'),
                            'field2' => urlencode(value2),
                            'field3' => urlencode(value3),
                            //field goes here 
                );

//url-ify the data for the POST
foreach($fields as $key=>$value) { $fields_string .= $key.'='.$value.'&'; }
rtrim($fields_string, '&');

//open connection
$ch = curl_init('xxx/cart2.php');

//set the url, number of POST vars, POST data
curl_setopt($ch,CURLOPT_URL, $url);
curl_setopt($ch,CURLOPT_POST, count($fields));
curl_setopt($ch,CURLOPT_POSTFIELDS, $fields_string);

//execute post
$result = curl_exec($ch);

//close connection
curl_close($ch); 
```

在你的**cart2.php**

```
<?php
if (isset($_POST['ssl_merchant_id'] )
$ssl_merchant_id=$_POST['ssl_merchant_id'];
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T01:49:41.587

在 上`cart2.php`，您将使用 $ [_POST](http://php.net/manual/en/reserved.variables.post.php)全局变量：

```
var_dump($_POST['ssl_merchant_id']); 
```

请注意，如果您不想生成通知并且还需要默认值，则应检查其是否存在：

```
function getPOST($key, $default = NULL) {
    return isset($_POST[$key]) ? $_POST[$key] : $default;
}

$ssl_merchant_id = getPOST('ssl_merchant_id');
if ($ssl_merchant_id) {
    // Do something
} 
```

或者，您可以使用一种不太安全但更方便的方法进行[extract](http://php.net/manual/en/function.extract.php)。

```
extract($_POST);
if (isset($ssl_merchant_id)) {
    // Do something
} 
```

# r - 在 R 编程中修复波动率曲面图上的插值

> ID：15725496
> 
> 赞同：8
> 
> 时间：2013-03-31T01:46:25.923
> 
> 标签：r, 3d, interpolation, quantmod, rgl

下面的脚本通过 quantmod 中的函数提取 yahoo 数据，然后使用 RGL 库处理数据以形成 3D 图形，附加的是一个 ggplot 以显示我正在尝试用单独的线 geoms 创建表面的数据。问题是 3D 图表看起来非常难看并且由于前一个月到期的积分数量有限而被切割..谁能告诉我这里发生了什么，我能做些什么来解决这个问题..我需要平滑吗每个到期的线然后插值.... ?? [volsurface http://img15.imageshack.us/img15/7338/surface.png](http://img15.imageshack.us/img15/7338/surface.png) [ggplot2_smile http://img402.imageshack.us/img402/1272/volatilitysmilegoog.png](http://img402.imageshack.us/img402/1272/volatilitysmilegoog.png)

```
library(RQuantLib)
library(quantmod)
library(rgl)
library(akima)
library(ggplot2)
library(plyr)

GetIV <- function(type, value,
                  underlying, strike,dividendYield, riskFreeRate, maturity, volatility,
                  timeSteps=150, gridPoints=151) {

    AmericanOptionImpliedVolatility(type, value,
                                    underlying, strike,dividendYield, riskFreeRate, maturity, volatility,
                                    timeSteps=150, gridPoints=151)$impliedVol
}

GetDelta <- function(type, underlying, strike,
                     dividendYield, riskFreeRate, maturity, volatility, 
                     timeSteps=150, gridPoints=149, engine="CrankNicolson") {

    AmericanOption(type,underlying, strike, dividendYield, riskFreeRate, maturity, volatility,
                   timeSteps=150, gridPoints=149, engine="CrankNicolson")$delta
}
# set what symbol you want vol surface for
underlying <- 'GOOG'
# set what your volatility forcast or assumption is
volforcast <- .25
# Get symbols current price
underlying.price <- getQuote(underlying,what=yahooQF("Last Trade (Price Only)"))$Last

OC <- getOptionChain(underlying, NULL)
#check data
head(OC)
lputs <- lapply(OC, FUN = function(x) x$puts[grep("[A-Z]\\d{6}[CP]\\d{8}$", rownames(x$puts)), ])
head(lputs) #check for NA values, yahoo returns all NA values sometimes
puts <- do.call('rbind', lputs )
#check data
head(puts,5)

symbols <- as.vector(unlist(lapply(lputs, rownames)))
expiries <- unlist(lapply(symbols, FUN = function(x) regmatches(x=x, regexpr('[0-9]{6}', x) )))
puts$maturity <- as.numeric((as.Date(expiries, "%y%m%d") - Sys.Date())/365)

puts$IV <- mapply(GetIV, value = puts$Ask, strike = puts$Strike, maturity = puts$maturity,
                  MoreArgs= list(type='put', underlying= underlying.price,
                                 dividendYield=0, riskFreeRate = 0.01,  
                                 volatility = volforcast), SIMPLIFY=TRUE)

puts$delta <- mapply(GetDelta, strike =  puts$Strike, volatility = puts$IV,
                     maturity = puts$maturity, MoreArgs= list(type='put', 
                                                              underlying=underlying.price, dividendYield=0, 
                                                              riskFreeRate = 0.01 ), SIMPLIFY=TRUE)

# subset out itm puts
puts <- subset(puts, delta < -.09 & delta > -.5 )

expiries.formated <- format(as.Date(levels(factor(expiries)), format = '%y%m%d'), "%B %d, %Y")

fractionofyear.levels <- levels(factor(puts$maturity))

xyz <- with(puts, interp(x=maturity, y=delta*100, z=IV*100, 
                         xo=sort(unique(maturity)), extrap=FALSE ))

with(xyz, persp3d(x,y,z, col=heat.colors(length(z))[rank(z)], xlab='maturity', 
                  ylab='delta', zlab='IV', main='IV Surface'))

putsplot <- ggplot(puts, aes(delta, IV, group = factor(maturity), color = factor(maturity))) +
    labs(x = "Delta", y = "Implied Volatilty", title="Volatility Smile", color = "GooG \nExpiration") +
    scale_colour_discrete( breaks=c(fractionofyear.levels),
                           labels=c(expiries.formated)) + 
    geom_line() +
    geom_point()

putsplot 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-11T06:55:27.517

该`akima`软件包正是您所需要的，但我认为您需要*减少*y 轴（`delta`变量）中插值点的数量。您现在设置的方式使用默认的 40 点网格。

```
# No interpolation on x-axis, but uses the default 40 point grid on the y-axis
xyz <- with(puts, interp(x=maturity, y=delta*100, z=IV*100, 
            xo=sort(unique(maturity)), extrap=FALSE ))
# By setting to use less points, it will "stretch" the surface over those points.
xyz <- with(puts, interp(x=maturity, y=delta*100, z=IV*100, 
            xo=sort(unique(maturity)), 
            yo=seq(min(delta*100), max(delta*100), length = 15), extrap=FALSE )) 
```

![y 轴平滑的表面](https://i.stack.imgur.com/URuMO.png)

您可以使用`seq`函数中的长度变量来获得不同级别的平滑度。

* * *

我仍然不完全明白你想要什么，但也许你想平滑`maturity`？这就是它的样子：

```
# This smooths just by x.
xyz <- with(puts, interp(x=maturity, y=delta*100, z=IV*100, 
            xo=seq(min(maturity), max(maturity), length = 5), 
            , extrap=FALSE ))

with(xyz, persp3d(x,y,z, col=heat.colors(length(z))[rank(z)], xlab='maturity', 
                  ylab='delta', zlab='IV', main='IV Surface')) 
```

![在此处输入图像描述](https://i.stack.imgur.com/qmG7a.png)

# c++ - 纠正模板类的问题

> ID：15725499
> 
> 赞同：0
> 
> 时间：2013-03-31T01:47:05.473
> 
> 标签：c++, c++11, compiler-errors, g++

我正在实现一个名为 Sprt 的类（基本上是一个智能指针作为练习），下面是声明。为了清楚起见，我省略了实现。还有2个类来测试它。我已经包含了他们的代码。但是当我在函数中编写测试代码时，`basic_tests_1`会出现编译器错误。我不清楚如何解决它。有什么问题？

```
#include <iostream>
#include <stdio.h>
#include <assert.h>

namespace my {
    template <class T>
    class Sptr {
    private:
        //some kind of pointer
            //one to current obj
        T obj;
        size_t reference_count;
            //one to original obj
    public:
        Sptr();

        template <typename U> 
        Sptr(U *);

        Sptr(const Sptr &);

        template <typename U> 
        Sptr(const Sptr<U> &);

        template <typename U> 
        Sptr<T> &operator=(const Sptr<U> &);

        void reset();

        T* operator->() const
        {return &obj;};

        T& operator*() const
        {return obj;};

        T* get() const
        {return &obj;};

    };
}

using namespace std;
using namespace my;
/* Basic Tests 1 ================================================================================ */

class Base1 {
    protected:
        Base1() : derived_destructor_called(false) {
            printf("Base1::Base1()\n");
        }
    private:
        Base1(const Base1 &); // Disallow.
        Base1 &operator=(const Base1 &); // Disallow.
    protected:
        ~Base1() {
            printf("Base1::~Base1()\n");
            assert(derived_destructor_called);
        }
    protected:
        bool derived_destructor_called;
};

class Derived : public Base1 {
        friend void basic_tests_1();
    private:
        Derived() {}
        Derived(const Derived &); // Disallow.
        Derived &operator=(const Derived &); // Disallow.
    public:
        ~Derived() {
            printf("Derived::~Derived()\n");
            derived_destructor_called = true;
        }
        int value;
};

void basic_tests_1() {

    // Test deleting through original class.
    {
        // Base1 created directly with Derived *.
        {
            Sptr<Base1> sp(new Derived);
            {
                // Test copy constructor.
                Sptr<Base1> sp2(sp);
            }
        }
        // Base1 assigned from Sptr<Derived>.
        {
            Sptr<Base1> sp2;
            {
                Sptr<Derived> sp(new Derived);
                // Test template copy constructor.
                Sptr<Base1> sp3(sp);
                sp2 = sp;
                sp2 = sp2;
            }
        }
    }
}

int main(int argc, char *argv[]) {

    cout << "Hello world";
    basic_tests_1();

    return 0;
} 
```

这是编译器错误：

```
Sptr.cpp: In destructor ‘my::Sptr<Base1>::~Sptr()’:
Sptr.cpp:109:9: error: ‘Base1::~Base1()’ is protected
Sptr.cpp:8:8: error: within this context
Sptr.cpp: In function ‘void basic_tests_1()’:
Sptr.cpp:142:39: note: synthesized method ‘my::Sptr<Base1>::~Sptr()’ first required here 
Sptr.cpp: In member function ‘my::Sptr<Base1>& my::Sptr<Base1>::operator=(const my::Sptr<Base1>&)’:
Sptr.cpp:107:16: error: ‘Base1& Base1::operator=(const Base1&)’ is private
Sptr.cpp:8:8: error: within this context
Sptr.cpp: In function ‘void basic_tests_1()’:
Sptr.cpp:156:23: note: synthesized method ‘my::Sptr<Base1>& my::Sptr<Base1>::operator=(const my::Sptr<Base1>&)’ first required here 
Sptr.cpp: In instantiation of ‘my::Sptr<T>::Sptr(U*) [with U = Derived; T = Base1]’:
Sptr.cpp:142:39:   required from here
Sptr.cpp:102:9: error: ‘Base1::Base1()’ is protected
Sptr.cpp:56:20: error: within this context
Sptr.cpp:109:9: error: ‘Base1::~Base1()’ is protected
Sptr.cpp:56:20: error: within this context
Sptr.cpp: In instantiation of ‘my::Sptr<T>::Sptr(const my::Sptr<T>&) [with T = Base1]’:
Sptr.cpp:145:35:   required from here
Sptr.cpp:102:9: error: ‘Base1::Base1()’ is protected
Sptr.cpp:61:38: error: within this context
Sptr.cpp:109:9: error: ‘Base1::~Base1()’ is protected
Sptr.cpp:61:38: error: within this context
Sptr.cpp: In instantiation of ‘my::Sptr<T>::Sptr() [with T = Base1]’:
Sptr.cpp:150:25:   required from here
Sptr.cpp:102:9: error: ‘Base1::Base1()’ is protected
Sptr.cpp:50:16: error: within this context
Sptr.cpp:109:9: error: ‘Base1::~Base1()’ is protected
Sptr.cpp:50:16: error: within this context
Sptr.cpp: In instantiation of ‘my::Sptr<T>::Sptr(U*) [with U = Derived; T = Derived]’:
Sptr.cpp:152:45:   required from here
Sptr.cpp:120:9: error: ‘Derived::Derived()’ is private
Sptr.cpp:56:20: error: within this context 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T01:52:58.080

Looks like your base1 destructor should be made public. You should also declare it as virtual as well or the derived class destructor will not be called correctly. Also, you are defining the operator= in base1 and derived as private and then trying to use them when you assign one instance of your shared ptr to another in the test code. The remaining errors relate to the base1 constructor being protected, which means you can't instantiate it directly. You could make the constructor public if you really want to create base1 objects.

# python - 如何使用 range() 在 Python 中迭代大数？

> ID：15725506
> 
> 赞同：5
> 
> 时间：2013-03-31T01:48:37.520
> 
> 标签：python, loops, largenumber

我想使用 Python 中的 range() 函数迭代一个大数字，例如 600851475143。但是每当我运行程序时，它都会给我一个溢出错误。我使用了以下代码 -

```
um = long(raw_input())
for j in range(1,num):
.... 
```

我已经尝试了很多次，但它不起作用！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T01:51:22.293

`itertools.islice()`如果您的索引是长数字，请使用：

```
from itertools import islice, count
islice(count(start, step), (stop-start+step-1+2*(step<0))//step) 
```

Python 3`range()`也可以处理 python longs。

简化为您的情况：

```
for j in islice(count(1), num - 1): 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T01:51:41.940

尽管`xrange`似乎达到了您想要的效果，但它无法处理那么大的数字。你可能需要从[这里使用这个食谱](http://docs.python.org/2/library/functions.html)

> CPython 实现细节： xrange() 旨在简单快速。实现可能会施加限制来实现这一点。Python 的 C 实现将所有参数限制为原生 C long（“短”Python 整数），并且还要求元素的数量适合原生 C long。如果需要更大的范围，可以使用 itertools 模块制作替代版本：`islice(count(start, step), (stop-start+step-1+2*(step<0))//step)`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T04:09:19.883

不用于，使用 while

```
counter = long(1)
while counter < num:
    ... 
```

# ruby - get 会产生一个带有额外空格、字符返回还是 nil 的字符串？

> ID：15725511
> 
> 赞同：0
> 
> 时间：2013-03-31T01:49:39.940
> 
> 标签：ruby, gets

我编写了一个代码，用于使用简单的替换密码（a=b、b=c 等）将纯文本消息转换为密文消息。空格被替换为“1”。

然后我想这样做，以便我可以使用“gets”输入不同的消息。这导致了一个问题，我通过用“gets.strip”替换“gets”解决了这个问题。如果 get 是在输入的字符串中添加一个空格，无论是在开头还是结尾，为什么会导致问题？我有一种处理空格的方法，所以它真的是“”还是零空格（因为没有更好的词）或字符返回或什么？这是我写的：

```
base_alph =[" ", "a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y", "z"]  
code_alph = ["1", "z", "a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y"]  
x=0  
base_msgarray = []  
code_msgarray = []  
puts "type what you want to translate below"  
base_msg = gets.strip # without the .strip the program doesn't run  
msg_size = base_msg.length  
puts "the message is translated as:"  

loop do  #this section populates an array with all the characters from the gets  
break if x >= msg_size  
base_msgarray.push(base_msg[x])  
x += 1  
end  
# this section passes in the values of the base_msgarray to |letter| to then determine its key   
# in base_alph then that key is passed into code_alph to find the translated letter which  
# is then used to populate the code_msgarray  
base_msgarray.each do |letter|  
code_index = base_alph.index(letter)  
code_msgarray.push(code_alph[code_index])  
end  
# this section displays the values of code_msgarray in a more text-like fashion  
code_msgarray.each do |codeletter|  
print codeletter  
end  
gets # for some reason if i dont have this here the terminal window disappears before I can read anything 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T02:25:40.913

来自[精美手册](https://ruby-doc.org/core/Kernel.html#method-i-gets)：

> **gets(sep=$/) → string or nil**
> [...]
> 
> Returns (and assigns to `$_`) the next line from the list of files in `ARGV` (or `$*`), or from standard input if no files are present on the command line. Returns `nil` at end of file. The optional argument specifies the record separator. The separator is included with the contents of each record.

Note the final sentence: the record separator is included in the contents of each record. By default, the record separate is an EOL (generally a line-feed or carriage-return/line-feed pair) so you'll get a stray `\n` at the of of your string.

Your [`strip`](https://ruby-doc.org/core/String.html#method-i-strip) call will remove leading and trailing whitespace (which includes CR and LF characters) so the problem goes away. Another common approach is to use [`chomp`](https://ruby-doc.org/core/String.html#method-i-chomp) to strip off the trailing `$/` record separator if it is present.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T08:08:04.757

The problem is this. If you don't use strip, a new line character is appended to your input. For example

```
type what you want to translate below
rubyisgreat 
```

The value of base_msg if gets.strip is used

```
"rubyisgreat" 
```

The value of base_msg without strip

```
"rubyisgreat\n" 
```

As such, since "\n" does not belong to your cipher array, querying its index in line

```
code_index = base_alph.index(letter) 
```

produces nil. This nil is used in next line as

```
code_msgarray.push(code_alph[code_index]) 
```

Hence the error!

Here's a tip. Use 'p base_msg' to inspect the exact value of. One more thing. You might be using ruby but you need to learn it. This program is C written in ruby. Its not the ruby way. Use hashes instead of arrays here. And don't use loop if possible.

# database - Entity Framework 5 Code First 迁移准备好投入生产了吗？

> ID：15725513
> 
> 赞同：4
> 
> 时间：2013-03-31T01:49:47.893
> 
> 标签：database, entity-framework-4.1, entity-framework-5, entity-framework-migrations

我正在对 EF5 进行一些研究，并遇到了这个[问题。](https://softwareengineering.stackexchange.com/questions/76082/is-entity-framework-code-first-a-bit-meaningless-useless-in-production-and-what)
答案中的主张对我来说很有意义。

但是现在，在 EF5 中，我们有了迁移。所以假设我已经使用 Code First 构建了一个应用程序，现在它已经启动并运行了一段时间，并且敏感的用户数据已经在数据库中累积。考虑模型需要一些更改的情况。

只更新 POCOS 并让 Migrations 负责更新数据库是否完全安全，或者是否需要做任何准备以防止数据丢失？

（希望有人在实时应用程序中进行了 Code First 和迁移的工作设置）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T15:04:53.123

首先，在生产中确保您的 DbMigrationsConfiguration 设置为`AutomaticMigrationsEnabled = false`. 然后在更改模型后，执行命令`Add-Migration`。这将生成更改数据库的命令，您可以在执行之前查看是否删除了某些内容。这样您就可以完全控制数据库上发生的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T07:24:21.793

进行任何类型的数据库更改从来都不是完全安全的，因为您可能在迁移代码中犯了错误，或者可能存在导致问题的磁盘错误......确实有很多潜在问题，所以您必须在做之前进行备份迁移或任何其他类型的数据库更改。

# coldfusion - Logging in with blank password on FW/1

> ID：15725515
> 
> 赞同：0
> 
> 时间：2013-03-31T01:50:31.497
> 
> 标签：coldfusion, security, fw1

I am using an html form that queries a DB to check security. It is valid for the password to be NULL, but the user should get a warning that the password is blank and that it should be updated.

Every time a page is loaded, I want to warn is the password is NULL.

My question is: where is the best place to do this checking. the layout file is where the message is shown, but I don't think the layout file should be querying the DB.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T02:47:53.417

If the intent is to check on every page load, then the onRequestStart() method of your Application.cfc file seems as good a place as any. You would need some conditional logic so that the check doesn't start taking place until after the person has logged in, but that's rather simple.

Also, you can use a session variable to indicate if the person has a password. You don't have to query the db each time.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T12:17:40.150

FW/1 has a method named setUpRequest(), which functions similarly to onRequestStart().

You could use setUpRequest() to make calls to a controller that checks is password is NULL and adds a message to the request context (rc), that would then be available in all your controller and view code later in the request. Here is some sample code from an app I am working on. You could easily put your check for a password in the default method of the setup controller.

```
function setupRequest( rc ) {
    if( structkeyExists( url, "reload" ) ){
        setupApplication();
    }
    controller( 'setup.default' );
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-31T14:24:29.877

Onrequeststart as suggested. Another tip is to create an array of structs where you store all notifications or alerts and other info such as alert type or state etc, then in your view you loop over that array and display all notifications to use. If there are any alerts which should affect a business logic decision then you can also loop over this array elsewhere in your mvc.

# c# - 我无法获取计算机的日期，只有时间

> ID：15725517
> 
> 赞同：0
> 
> 时间：2013-03-31T01:50:44.420
> 
> 标签：c#, mysql, datetime

我希望我的 C# 应用程序获取计算机的时间和日期，但它只获取时间而不是日期，所以这里是代码。

```
ApareceCrudLib b = new ApareceCrudLib("localhost", "root", "", "cashieringdb");
string theDate = DateTime.Now.ToShortTimeString();
string query = "INSERT INTO sales (price, user, date) " +
    "VALUES(" +
    "'" + txtQuant.Text + "'," +
    "'" + txtLog.Text +"'," +
    "'" + theDate +"')";
b.mysqlInsert(query); 
```

这是我的 MySql 数据库结果。（不要介意用户错误地包围的 lordens）。

![在此处输入图像描述](https://i.stack.imgur.com/RANM5.jpg)

这是我的日期结构设置为 Varchar，长度/值设置为 10。

![在此处输入图像描述](https://i.stack.imgur.com/7E3PQ.png)

无论如何，我只是注意到我的 C# 应用程序中的代码 TimeString 和 DateString 有没有办法让它们像时间和日期字符串一样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T01:55:07.473

首先，不要将日期作为字符串存储在数据库中。为它使用正确的数据类型，`DATE`或者`DATETIME`.

其次，你的`INSERT`陈述很弱。它很容易受到`SQL Injection`. 这些值**必须**参数化。

代码片段，

```
string connStr = "connection string here";
string insertStr = @"INSERT INTO sales (price, user, date)
                        VALUES (@price, @user, @date)";
using (MySqlConnection conn = new MySqlConnection(connStr))
{
    using (MySqlCommand comm = new MySqlCommand())
    {
        comm.Connection = conn;
        comm.CommandType = CommandType.text;
        comm.CommandText = insertStr;
        comm.Parameters.AddWithValue("@price", txtQuant.Text);
        comm.Parameters.AddWithValue("@user", txtLog.Text);
        comm.Parameters.AddWithValue("@date", DateTime.Now);
        try
        {
            conn.Open();
            comm.ExecuteNonQuery();
        }
        catch(MySqlException ex)
        {
            // don't hide the exception
            // do something
            // ex.ToString()
        }
    }
} 
```

# iphone - iPhone 目标 C 中的 RSA

> ID：15725519
> 
> 赞同：1
> 
> 时间：2013-03-31T01:50:50.600
> 
> 标签：iphone, objective-c, security, encryption, rsa

我正在尝试在程序中使用非对称加密...我开始使用 Apple 文档站点中的代码（证书、密钥和信任服务编程指南，关于加密和解密数据的部分），并进行了细微的更改，当时它是准备运行，解密失败，错误 -9808。

在做了一些搜索之后，我发现有些人遇到了这个错误，并通过将填充更改为 kSecPaddingNone 来消除它。在我这样做之后，一切都运行得很愉快，但我的解密数据是垃圾。

所以我盯着代码看了一会儿，没有发现任何明显的错误，然后开始在网上搜索其他解决方案或想法。我在上一个回复中遇到了关于 stackoverflow 的线程（[Objective C 中的 RSA 实现）和 Parth Bhatt 的代码。](https://stackoverflow.com/questions/10222524/rsa-implementations-in-objective-c)

我将他的课程导入我的程序并运行测试，就像其他一些对该线程发表评论的人一样，我的输出也有垃圾，就像我编写的代码一样（即改编自 Apple 的示例代码）。

所以我想知道是否可能对 API 进行了一些更改，需要再次调用，或者到底发生了什么？

我似乎无法评论 Parth 的回答，这就是我问这个新问题的原因。

# google-app-engine - Image upload not working with App Engine NDB: 405 Method Not Allowed

> ID：15725520
> 
> 赞同：0
> 
> 时间：2013-03-31T01:51:05.413
> 
> 标签：google-app-engine, webapp2, app-engine-ndb

I followed this tutorial [https://developers.google.com/appengine/docs/python/tools/webapp/blobstorehandlers](https://developers.google.com/appengine/docs/python/tools/webapp/blobstorehandlers) to allow users upload image in my app. It works for my app which uses Python 2.5 environment but not for my Python 2.7 app. According to the doc, blobstore is not available in webapp2 so we have to use the webapp blobstore.

When the form is loaded, I have no error. The error appears when I submit the form.

When I put the upload_url in form action attribute and submit it, I get this error: **405 Method Not Allowed The method POST is not allowed for this resource**.

When I don't put the upload_url and submit it, I have no error but the form data are not saved in the database.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T20:12:12.683

Could it be that you have made a mistake like

```
AddProductHandler(BaseHandler, blobstore_handlers.BlobstoreUploadHandler):
    def get(self):
        #Code 
```

instead of

```
AddProductHandler(BaseHandler, blobstore_handlers.BlobstoreUploadHandler):
    def post(self):
        #Code 
```

?

and if no could you try adding a def get(self) to the handler and see if it hits that one.

Another possibility is that you gave the blobstore.create_upload_url the wrong uri so that you are actually hitting the wrong handler ?

blobstore.create_upload_url(uri)

where uri should point to the AddProductHandler

# python - 绑定到框架 wxPython

> ID：15725524
> 
> 赞同：0
> 
> 时间：2013-03-31T01:51:40.277
> 
> 标签：python, wxpython, bind

出于某种原因，它没有读取任何按下的键，我整天都在寻找示例和修复，但无济于事，我不知道为什么。尝试使用面板如下所示，但我用来了解 wxpython 的教程有问题，即使那里代码的复制粘贴也不起作用。那里的例子不使用面板，而只是一个 self.Bind(wx.EVT_KEY_UP,self.keyPressed)。任何人都可以帮助这个初学者吗？

```
 import wx
 import time
 from threading import Thread

 class frame(wx.Frame):
     def  __init__ (self):
             style = (wx.CLIP_CHILDREN | wx.STAY_ON_TOP | wx.FRAME_NO_TASKBAR |    wx.NO_BORDER |wx.FRAME_SHAPED)  
             wx.Frame.__init__(self,None, title='test', style = style, size = (300,150))
             self.panel = wx.Panel(self,-1)
             self.Bind(wx.EVT_KEY_DOWN, self.keyPressed, self.panel)
             self.SetFocus()
             self.SetTransparent(0)
             self.Show(True)

    def keyPressed(self,event=None):
            print "somethine is pressed"
            key = event.GetKeyCode()
            if key == wx.WXK_ESCAPE or key == ord('Q'):
                    self.Close(force=True)
                    self.Show(False)
            else:
                    event.Skip()

    def duration(self, dur):
            start = int(time.time())
            self.closeTime = False
            while not self.closeTime:
                    actDur = int(time.time()) -start
                    if actDur == dur:
                            self.Show(False)
                            self.closeTime = True
   app = wx.App(False)
   f = frame()
   #timing = Thread(target=f.duration, args= (5,))
   #timing.start()
   app.MainLoop() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T13:40:04.150

面板可能很难绑定，因为它喜欢将焦点传递给它的孩子。框架的作用大致相同。如果您只想绑定按键，则可能需要查看 AcceleratorTable：

*   [http://www.blog.pythonlibrary.org/2010/12/02/wxpython-keyboard-shortcuts-accelerators/](http://www.blog.pythonlibrary.org/2010/12/02/wxpython-keyboard-shortcuts-accelerators/)
*   [http://wxpython.org/docs/api/wx.AcceleratorTable-class.html](http://wxpython.org/docs/api/wx.AcceleratorTable-class.html)

这些也可能对您有所帮助：

*   [http://wiki.wxpython.org/self.Bind%20vs.%20self.button.Bind](http://wiki.wxpython.org/self.Bind%20vs.%20self.button.Bind)
*   [http://www.blog.pythonlibrary.org/2009/08/29/wxpython- catch-key-and-char-events/](http://www.blog.pythonlibrary.org/2009/08/29/wxpython-catching-key-and-char-events/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T02:08:41.670

像这样绑定到面板

```
self.panel.Bind(wx.EVT_KEY_DOWN, self.keyPressed) 
```

# c# - CsQuery to parse a collection of li items

> ID：15725531
> 
> 赞同：5
> 
> 时间：2013-03-31T01:52:26.723
> 
> 标签：c#, html, web-scraping, csquery

Here's my code:

```
CQ dom = CQ.Create(htmlString);
var items = dom[".blog-accordion li"];

foreach (var li in items)
{
    var newTournament = false;
    var test = li["header h2"];
} 
```

Inside the foreach loop `li` turns into a `IDomObject` variable and I can no longer drill down further into it.

Any suggestions? Here is the example HTML I'm trying to parse:

```
<ul>
  <li>
    <header>
      <h2>Test</h2>
    </header>
  </li>
  <li>
    <header>
      <h2>Test 2</h2>
    </header>
  </li>
  <li>
    <header>
      <h2>Test 3</h2>
    </header>
  </li>
</ul> 
```

I need to grab the text of each h2 element.

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-31T02:00:50.020

This is done in order to keep `CsQuery` consistent with `jQuery` which behaves the same way. You can convert it back to a `CQ` object by calling the `.Cq()` method as such

```
foreach (var li in items)
{
    var newTournament = false;
    var test = li.Cq().Find("header h2");
} 
```

Or if you'd like more `jQuery`ish syntax, the following also works:

```
foreach (var li in items)
{
    var newTournament = false;
    var test = CQ.Create(li)["header h2"];
} 
```

Your code, could be re-factored to the following if you'd like:

```
var texts = CQ.Create(htmlString)[".blog-accordion li header h2"]
              .Select(x=>x.Cq().Text()); 
```

# jquery - Syntax-error with carousel and accordion?

> ID：15725533
> 
> 赞同：0
> 
> 时间：2013-03-31T01:52:45.540
> 
> 标签：jquery, twitter-bootstrap, accordion, carousel

I want to use an bootstrap accordian and carousel. For initialising i use the following code, which doesn't work proberly. When i remove the 4 lines of the carousel-part, the accordion works; with this 4 lines it doesnt. Do i have a syntax-error? Thanks for any help.

```
<script type="text/javascript">

$(document).ready(function() {

    $('.carousel').carousel(
        pause: "none",
        interval: 1000
    });

    $("#accordion").accordion({
       autoHeight: false,
       collapsible: false,
       navigation: true,
       active: 0
    });
});

</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T01:54:57.670

I think you're missing a bracket on `$('.carousel').carousel(`

Change to:

```
$('.carousel').carousel({
    pause: "none",
    interval: 1000
}); 
```

# autohotkey - 如何在 Autohotkey 消息框文本中插入换行符

> ID：15725539
> 
> 赞同：8
> 
> 时间：2013-03-31T01:53:46.927
> 
> 标签：autohotkey

实际上是否可以在消息框文本中插入换行符？我进行了广泛的搜索，每个人都在谈论`'n`或`\n`，但这不起作用。谁能给我一个实际有效的代码示例？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-31T01:58:49.347

在 AutoHotkey 中，序列

```
`n 
```

（后跟一个反引号`n`）表示换行符。

例如：

```
MsgBox, "line1`nline2`nline3" 
```

产生如下输出：

```
line1
line2
line3 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-10-29T23:01:47.467

你想要一个[续节](https://www.autohotkey.com/docs/Scripts.htm#continuation)。

这是一个示例脚本：

```
#NoEnv  ; Recommended for performance and compatibility with future AutoHotkey releases.
; #Warn  ; Enable warnings to assist with detecting common errors.
SendMode Input  ; Recommended for new scripts due to its superior speed and reliability.
SetWorkingDir %A_ScriptDir%  ; Ensures a consistent starting directory.

lorem = 
(
Lorem ipsum dolor sit? Knowin' embark a sword tharrr. Much bucket har, avast, Flying Dutchmen shaft craft legend sails runnin'. Poopdeck barrel shaft, scimitar captain brothel. West poopdeck cannon-ball gunpowder deck. Much kill sink many scalawag. Davey east direction davey shaft direction avast scimitar off drunk travel, crew. Bottle scurvy, pirates a. 

Strike stars, mast treasure. Arrrgh, boom bow strike her crows-nest brothel, bar be. 'Til ahoy bow smuggle stars crew mast myth head. Wreck many, bar sea scimitar har harbor. Other sea west bread death, raft poopdeck locker be matey ahoy? 

Embark explosion patch scalawag washed-up rudder pirate devil be, mast, with. Raft death shipment drink, those. Myth raid east, Kraken stars raid cannon-ball with scimitar gold, avast. Bread together runnin'? Be dispatch, her ahoy be Flying Dutchmen. Ahoy bread myth. Flying Dutchmen vessel bottle, poopdeck.
)

msgbox %lorem% 
```

输出：

[![在此处输入图像描述](https://i.stack.imgur.com/fbdLN.png)](https://i.stack.imgur.com/fbdLN.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-01-07T21:16:13.857

**备选方案#1：**在您的数据周围使用“( )”调用 Msgbox。

```
Msgbox,
(
    SUMMARY:
    ========================
    TOTAL : ALL______: %ALL%
    TOTAL : NON_BLANK: %TOT%
    BLANK : B4    TRM: %B_F%
    BLANK : AFTER TRM: %BAT%
    DUPES :__________: %NTS% ;;num_tok_skip
    UNIQUE:__________: %NTA% ;;num_tok_added
    ========================
)
;; Above prints out a table of values: ALL, TOT, B_F, BAT, NTS, NTA
;; The are variables defined elsewhere in my code I wanted a printout 
;; in table from of. 
```

**备选方案#2：** 这是我在创建要从自动热键粘贴的文本块时使用的备选方法。我只是喜欢“CHR”命令而不是反引号。

```
global cr_char := CHR(13)  ;AKA:  'r (return char)
global lf_char := CHR(10)  ;AKA:  'n (newline char)
global windows_newline := cr_char . lf_char 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-14T03:54:56.647

您可以在反引号中使用“r”。

```
> `r` 
```

喜欢：

> ::@ph::Content-Type:application/json `r`X-Auth-Token:

# c# - 关于服务定位器实现的问题

> ID：15725552
> 
> 赞同：1
> 
> 时间：2013-03-31T01:56:29.180
> 
> 标签：c#, .net, dependency-injection, service-locator

我需要你的帮助，我知道服务定位器不是最好的选择之一，但考虑到它的实现。

最正确的是在每一层都有一个定位器类，这个类将负责解决该特定层的依赖关系？

示例：业务层有自己的服务定位器类，只解决该层的依赖关系，数据访问层也有自己的定位器。

如果不是最好的选择，你有什么建议？

提前谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T21:43:38.187

每层不应有一个服务定位器。在您的整个应用程序中应该只有一个[组合根](http://blog.ploeh.dk/2011/07/28/CompositionRoot/)，这将是您解析对象图的唯一位置。您不应该在层级上分解事物。

例如，MVC`HomeController`可能依赖于`IRepository<T>`（DAL 层）或`ICommandHandler<T>`（业务层），这些应该只是`HomController`'s 构造函数中的依赖项。在尝试对它进行单元测试时，将`HomeController`调用放入 a`BusinessLayerServiceLocator.GetInstance`会导致问题`HomeController`。这将使应用程序的布线更加困难。

但是，这并不意味着您应该将连接层的代码放在启动项目中。例如，您可以将连接所有业务类的代码放置在业务层程序集内或放置在业务层程序集“顶部”的程序集内。但是，仅当此业务层在多个应用程序（例如 MVC 和 WCF 项目）之间共享时，您才应该这样做。当你这样做时，你仍然不应该在业务层中有一个服务定位器。相反，您应该将容器实例传递给业务层的 Bootstrap 方法。这样，它可以配置该容器实例，但最终应用程序保留引用并保持控制。

# java - 为什么 Java 更新多个具有相同值的变量？

> ID：15725554
> 
> 赞同：1
> 
> 时间：2013-03-31T01:56:36.350
> 
> 标签：java, class, variables, methods, reference

我有一个名为 Time 的类，其中包含其实例具有“小时”和“分钟”参数的对象。在该类中有一个名为 addMinutes 的方法，它接受一个整数并将该分钟数添加到对象的“小时”和“分钟”参数中。

我在另一个名为 Exercise 的类中有一个构造函数方法，它应该使用以下参数创建一个对象： String 对象称为 extype int 对象称为 min 时间对象称为 start 时间对象称为 end

我希望构造函数初始化开始，然后使用 Time 中的 addMinutes 方法添加该分钟数并调用该结束。但是当我使用它时，即使它们是单独的变量，开始也会随着结束而更新。

这是 addMinutes 方法

```
public void addMinutes(int mins) {
   this.mins += mins;
        if (this.mins >= 60) {
            addHours(this.mins / 60);
            this.mins = this.mins % 60;
      } 
```

这是尝试使用它和输出的示例

```
 public Exercise(String e, int m, Time s) {
       extype = e;
       min = m;
       start = s;
       System.out.println(start);
       end = s;
       System.out.println(start);
       end.addMinutes(min);
       System.out.print(s);
       start = s;
       System.out.println(start); 
```

使用 e = "Dancing"、m = 90 和 S = 15:45 运行此命令的输出

练习 e1 = new Exercise("Dancing",90,firsttime);

15:45

15:45

17:15 17:15

因此，当我使用 end.addMinutes(min) 时，所有变量 start、end 甚至 s 都会更新为我想要的结束时间。对此有何见解？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T02:02:29.380

这是因为 Java 对其对象使用引用，而不是值

因此，当您这样做时`start = s`，它不会将 start 设置为 s 的值，而是将 start 设置为与 s*相同的对象*。以此类推其他任务。

然后，当您在其中任何一个（即：start、end 或 s）上调用方法时，您将在一个且只有一个对象上调用此方法，该对象由这三个变量引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T02:01:46.097

执行时`end = s;`，您将引用的对象设置为与引用的对象`end`相同的对象`s`。因此，当您更改对象时，它会反映在两个引用中。如果您希望它们不同，则必须将它们设置为不同的变量。

给你的类一个“克隆”方法，该方法创建一个相同类型的新对象，并将新对象的所有内部变量设置为旧对象的内部变量。然后克隆而不是使用'='，您将拥有单独的对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T02:02:46.680

这是因为 Java 中的所有对象都是隐式引用的。如果你说 end 等于 start，那么它们都引用同一个对象，因此更新一个会导致更新另一个。

您可以执行以下操作：让 addMinutes() 返回具有指定分钟和小时的新 Time 对象。然后不要说`end=start`，但这样做：

```
Time end;
end = start.addMinutes(m); 
```

这应该有效。

祝你好运！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-31T02:03:11.323

在 java 中，存储对象的变量实际上是存储对对象的“引用”。换句话说，如果您有以下情况：

```
Object obj;
cpy = obj; 
```

两者都`obj`将`copy`指向同一个对象。如果您更新其中任何一个，两者都会受到影响。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-31T02:55:56.443

> 为什么 Java 更新多个具有相同值的变量？

它不是。它正在更新单个对象，并且您有多个变量都引用该对象，因此无论您使用哪个变量来获取对象内部的值，您总是会得到相同的值。

# ios - To code an App like Candy Crush in iOS and Android

> ID：15725556
> 
> 赞同：-1
> 
> 时间：2013-03-31T01:56:55.420
> 
> 标签：ios, ios6, ios6.1

I was wondering if the standard iOS widgets is able to code a Candy Crush-like app? I'm confused about how to program for a Candy Crush-like app. I'm used to the normal dialog boxes and views but have not progressed further from those.

What iOS framework is require? Some graphics or 2d framework?

Poliquin

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T01:59:11.400

You should try Cocos2d.

Here is an introductory tutorial.

[http://www.raywenderlich.com/25736/how-to-make-a-simple-iphone-game-with-cocos2d-2-x-tutorial](http://www.raywenderlich.com/25736/how-to-make-a-simple-iphone-game-with-cocos2d-2-x-tutorial)

# php - STRCHR vs STRRCHR difference?

> ID：15725560
> 
> 赞同：3
> 
> 时间：2013-03-31T01:57:38.500
> 
> 标签：php, string, strchr, strrchr

I would like to know the difference between the two different uses. I believe the difference in some what very subtle.

This is an explanation taken from the IBM reference manual. However maybe my english is bad, I just can't visualize the difference.

Maybe showing me an example of both cases would help me understand this better.

Here is the explanation from IBM :

The strchr subroutine returns a pointer to the first occurrence of the character specified by the Character **(converted to an unsigned character)** parameter in the string pointed to by the String parameter. A null pointer is returned if the character does not occur in the string. The null byte that terminates a string is considered to be part of the string.

The strrchr subroutine returns a pointer to the last occurrence of the character specified by the Character **(converted to a character)** parameter in the string pointed to by the String parameter. A null pointer is returned if the character does not occur in the string. The null byte that terminates a string is considered to be part of the string.

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-31T02:01:50.440

[`strchr`](http://php.net/manual/en/function.strchr.php) is an alias of [`strstr`](http://www.php.net/manual/en/function.strstr.php):

> Returns part of haystack string starting from and including the **first occurrence** of needle to the end of haystack.

[`strrchr`](http://php.net/manual/en/function.strrchr.php):

> This function returns the portion of haystack which starts at the **last occurrence** of needle and goes until the end of haystack.

`strchr` starts at the first occurrence, `strrchr` starts at the last occurrence.

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-31T02:05:15.577

[`strchr`](http://www.php.net/manual/en/function.strstr.php) finds the first occurrence and [`strrchr`](http://www.php.net/manual/en/function.strrchr.php) (r - reverse) finds the last occurrence of a character or string

```
$s = 'This is a test';
$first = strchr($s, 's');
$last = strrchr($s, 's'); 
```

*   `$first` contains `s is a test`
*   `$last` contains `st`

# c - xcode build error: " Conflicting types for 'uint64' " makes no sense to me

> ID：15725561
> 
> 赞同：2
> 
> 时间：2013-03-31T01:57:50.547
> 
> 标签：c, xcode

I am not a regular programmer, but of necessity. I am using the tiff-4.0.3 as part of an upgrade to an xcode program I had running under MacOS 10.5

When I build, I get the error message:

> Conflicting types for 'uint64'

The line that is flagged is located in tiff.h and reads:

```
typedef TIFF_UINT64_T  uint64; 
```

The only other line I can find in the project with TIFF_UINT64_T is located in tiffconf.h and reads:

```
/* Unsigned 64-bit type */
#define TIFF_UINT64_T unsigned long 
```

In any case, the error makes no sense to me. There are a large number of similar definitions, none of which flag the same error. Is it possible that the library libtiff.la has a conflicting definition? Is there any way to check this? I cannot get NM or otool to reveal what is in the library.

Other than that, I am at a loss on where to look. I have done the configure/make/install several times in case it is some omission in the process, but to no avail.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T02:01:43.763

```
typedef TIFF_UINT64_T  uint64; 
```

This defines a new type called `uint64`. However, it is very likely that another library you are using defines `uint64`, since it is quite a common type name.

Try asking Xcode to show you the definition of `uint64` after commenting out an `#include` for `tiff.h`, to see where else it is defined.

The types likely conflict because `uint64` is usually defined as `unsigned long long` (or some variation on that), and this line defines `uint64` as `unsigned long`. (Whether that is correct or not depends on the compiler settings, but it is not the same as `unsigned long long`).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-13T19:23:23.567

To me this looks like a bad coding practice in both `libtiff` and Apple libraries which define this type.

The type `uint64` is defined in `/System/Library/Frameworks/Security.framework/Headers/cssmconfig.h` for example.

Probably the best way to fix this is to patch `libtiff` to use `uint64_t` instead of `unsigned long`.

(I submitted a bug report to [http://bugzilla.maptools.org/show_bug.cgi?id=2464](http://bugzilla.maptools.org/show_bug.cgi?id=2464).)

# php - Access the database construct within a class

> ID：15725565
> 
> 赞同：-1
> 
> 时间：2013-03-31T01:58:56.640
> 
> 标签：php

I have been experimenting with persistent data from a class construct, I am trying to make a persistent connection through my public __construct, so I can use my database connection information throughout my class. My code is as followed:

```
class Inbox {
   # private $Database;
    public function __construct() {
        $this->$Database = new mysqli ('localhost','root','xxx','test');
    }
    public static function TestConnect (){
        if (self::Database){
            echo "Success When Connecting To Database";
        }else{
            echo "Problems When Connecting To Database";
        }
    }
    public static function TestSelect(){
        $Select = $this->Database->prepare("SELECT * FROM test");
        $Select->execute();
        $Select->bind_result($Test_ID, $Test_UName);
        $Select->fetch();

        print_r($Select);
    }
}

$Foo = new Inbox();
$Foo->TestSelect(); 
```

Now. When running

I am presented with the following errors:

> Notice: Undefined variable: Database in C:\xampp\htdocs\InboxFeature\Api\Class.php on line 15
> 
> Fatal error: Cannot access empty property in C:\xampp\htdocs\InboxFeature\Api\Class.php on line 15

* * *

I change my lines to:

```
$Select = self::Database->prepare("SELECT * FROM test"); 
```

and uncomment: `private $Database;`

I get presented with the error:

> Parse error: syntax error, unexpected '->' (T_OBJECT_OPERATOR) in C:\xampp\htdocs\InboxFeature\Api\Class.php on line 25

So my overall question, is where exactly have I gone wrong, I have looked at examples shown on Stackoverflow with using the `__construct()` method. I can't see where it's gone wrong for me.

* * *

**Using the Answer provided. I appended the following changes:**

```
 private static $Database;
    public function __construct() {
        self::$Database = new mysqli ('localhost','root','xxx','test');
    }
    public static function TestSelect(){
        $Select = self::$Database->prepare("SELECT * FROM test");
        $Select->execute();
        $Select->bind_result($Test_ID, $Test_UName);
        $Select->fetch();

        echo $Test_ID;
    } 
```

This has successfully worked. Thank you for the quick response

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T02:05:58.800

You have the syntax reversed.

If you declare the property as `private $database;` then you would access it using `$this->database`, not `$this->$database`.

If you instead declare it as a static property (`private static $database`) then it would be `self::$database`, not `self::database`.

Either way, you should make sure the property is declared at the top of the class; in your example you have `private $database` commented out.

# git - Setting up different git roots for different modules in same project - Intellij IDEA

> ID：15725566
> 
> 赞同：24
> 
> 时间：2013-03-31T01:59:02.883
> 
> 标签：git, github, intellij-idea

How can I setup git in Intellij to have different git repositories for each module in 1 project.

I have an API I am maintaining and my fork of an Open Source project as 2 different modules in 1 intellij project. I would like each module to push/pull with a different git repository.

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-03-31T02:15:50.167

`File` | `Settings` (`Preferences` on Mac) | `Version Control` dialog allows to map different directories to a version control, so just make several mappings instead of one, map each module root to Git.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2019-12-10T23:13:10.040

It is much easier to edit the vcs.xml directly.

```
[project folder]/.idea/vcs.xml 
```

The entries are like:

```
<mapping directory="$USER_HOME$/project_folder_a" vcs="Git" />
<mapping directory="$USER_HOME$/project_folder_b" vcs="Git" /> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-06-16T19:13:02.787

On a mac it's located at Intellij Idea-> Preferences -> Version Control

# php - AS3 to PHP is this possible

> ID：15725573
> 
> 赞同：-1
> 
> 时间：2013-03-31T01:59:39.290
> 
> 标签：php, javascript, actionscript-3

I have been using this as3 code but would like to know if its possible to do in php or JavaScript as I cant seem to find anything. regards

```
var my_date:Date; 
var my_timer:Timer=new Timer(1000);
my_timer.addEventListener(TimerEvent.TIMER, onTimer);
my_timer.start(); 

function onTimer(e:TimerEvent):void {
my_date = new Date();
var dayOfWeek_array:Array = new Array("Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday");
var today_date:Date = new Date();
var day_str:String = dayOfWeek_array[today_date.getUTCDay()];
//trace("Today is "+day_str + " and the Hour is "+today_date.getUTCHours());

if(dayOfWeek_array[today_date.getUTCDay()] == "Sunday" && today_date.getUTCHours() >= 08 && today_date.getUTCHours() <= 09)
{
//load page1
}

else if(dayOfWeek_array[today_date.getUTCDay()] == "Sunday" && today_date.getUTCHours() >= 10 && today_date.getUTCHours() <= 11)
{
//load page2
}
else
{
//load page0
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T02:01:20.057

Sure it's possible. You can't make the PHP automatically update it when the day changes, but you can have the PHP code check once when serving the page to the user, and then have JavaScript refresh when the date or time goes over one of the boundaries.

In PHP, you'll want to look into [the `date` function](http://www.php.net/date).
In JavaScript, you'll want to look into [`setInterval`](https://developer.mozilla.org/en-US/docs/DOM/window.setInterval), [`Date`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date), and [`location.reload`](https://developer.mozilla.org/en-US/docs/DOM/window.location#Example.3A_Force_reloading_the_current_page_from_the_server).

# php - Facebook PHP SDK：上传活动封面照片

> ID：15725574
> 
> 赞同：4
> 
> 时间：2013-03-31T01:59:42.597
> 
> 标签：php, facebook, facebook-graph-api, facebook-php-sdk

我使用 facebook-php-sdk 为页面创建事件。

现在如此处所述[，](https://stackoverflow.com/questions/3095099/attach-image-to-facebook-event-php-sdk-rest-or-graph-api)可以将图片上传到事件。

问题在于，这是个人资料图片。但一年多以来，Facebook 为活动提供了新的大型封面照片。我想将图片上传到那里，而不是作为个人资料图片。那可能吗？[我在Facebook Developer Graph Api 事件页面](https://developers.facebook.com/docs/reference/api/event/)上没有找到任何帮助，因为这里只描述了上传个人资料图片的方法（HTTP POST TO /EVENT_ID/picture）。

简而言之：是否可以通过 Graph API 上传活动的封面照片？

更新：我尝试将图片上传到页面相册并检索图片ID。然后我尝试选择这张照片作为活动的封面照片。

```
$cover = array(
    'cover' => $uploaded_photo_id,
);          
$fb->api('/' . $this->FacebookEventID, 'POST', $cover); 
```

可悲的是，这不起作用，因为它直接在页面上。

我开始想，这在目前是不可能的。

另外，如果您通过网站设置封面照片，您可以查询`https://graph.facebook.com/Event_ID?fields=cover`将返回封面的图形api。

更新：

我仍然没有成功。但如果你回答，请记住：**我要上传活动封面图！不是个人资料图片**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-31T16:26:33.597

All answers above are wrong! There is only one way to create the Cover Image:

Create The Event:

```
$eventData = array(
    'name' => 'Event Title',
    'start_time' => 'StarttimeInCorrectFormat',
    'description' => 'Event Description'
);
$fbEvent = $fb->api('/PAGE_ID/events/', 'post', $eventData); 
```

Update the Event using the ID from above:

```
$cover['cover_url']     = 'http://urlToCoverImage.jpg';
$eventUpdate = $facebook->api( "/" . $fbEvent['id'], 'post', $cover ); 
```

return true or false.

And thats it. Cover is in.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T18:38:42.887

是的。您可以使用 Graph API 上传封面照片。创建活动后，您可以使用 cover_url 字段上传封面照片。'cover_url' => 照片的网址。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-20T15:37:32.487

我刚刚想出了如何使用 Facebook PHP SDK 来做到这一点：

1-使用在页面上发布 Facebook 事件

```
$attachment = array(
    'access_token' => $access_token,
    'name' => $title,
    'start_time' => $start_time,
    'description' => $description
);
$res = $fb->api('/PAGE_ID/events/', 'post', $attachment); 
```

2- Retrieve the EVENT_ID from the result of the post

```
$fb_event_id = $res['id']; 
```

3- Update the event by calling /EVENT_ID with the cover parameter

```
$attachment['cover'] = '@/path/to/image.jpg';                                   
$fb->api('/'.$fb_event_id, 'post', $attachment); 
```

That's it !!

# c++ - sscanf variable length string parsing

> ID：15725579
> 
> 赞同：4
> 
> 时间：2013-03-31T02:00:05.417
> 
> 标签：c++, c, string, parsing

I have a problem that is probably fairly common and likely has a beautiful hack that I am not aware of. I would greatly appreciate it if someone would enlighten me!

I am using C's sscanf() function to parse input and the format is "%d %d %d %s %d %s %d ..." where the first two %d are random ID integers (insignificant) for the string and the third is a count of the number of %d %s combinations to follow.

For instance, "12 34 2 3 yes 2 no" could be a string, where 12 and 34 random are ID's (unimportant to the problem) and 2 specifies the two combinations following of '3 yes' and '2 no'. The 3 preceding 'yes' specifies the length of the string following, and the same is true for the 'no' with a 2 before it. Where we can have a variable number of these combinations following and we want to catch them all with the sscanf.

Does anyone know of any way to do this with sscanf?

Thanks a lot!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T02:10:53.367

Just parse the string in two (or more) passes. This uses the `%n` format specifier to write the number of bytes processed, so we know where to pick up in subsequent passes:

```
int a, b, n, pos;
const char *buf = "12 34 2 3 yes 2 no";

assert(sscanf(buf, "%d %d %d %n", &a, &b, &n, &pos) == 3);
for(int i=0; i<n; i++) {
    int cur;

    int x;
    char y[20];

    assert(sscanf(buf+pos, "%d %19s %n", &x, y, &cur) == 2);
    printf("%d %s\n", x, y);
    pos += cur;
} 
```

outputs

```
3 yes
2 no 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T02:03:25.023

There's no convenient way to do this with just `sscanf`. You'd need to dynamically generate the format string itself, *before* passing it to `sscanf`.

You might want to consider writing a specialized parsing routine for this where you call `sscanf` in a loop, or more preferably (since you specify the C++ tag) using an `std::istringstream` in a loop.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T02:10:50.107

First of all, ssprintf() is used to generate string, not parse it. You should use sscanf. I do not know hwo to finish it in one sscanf(). But you can do it in a loop as:

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int main(){
    int choice_id, count;
    char choice[20],id_1[20],id_2[20], count_str[20], choice_id_str[20];
    int index;
    char *input = "12 34 2 3 yes 2 no";

    sscanf(input, "%s %s %s", id_1, id_2, count_str);
    input += strlen(id_1)+strlen(id_2)+strlen(count_str)+2;
    count = atoi(count_str);
    for(index = 0; index< count; ++index){
        sscanf(input, " %s %s", choice_id_str, choice );
        choice_id = atoi(choice_id_str);
        // Process or store the record
        printf("%d: %s\n",choice_id, choice);
        input += strlen(choice_id_str) + strlen(choice) + 2;
    }
    return 0;
} 
```

Compile with gcc (GCC) 4.1.2, and run with Linux. The output is:

```
-bash-3.2$ ./a.out
3: yes
2: no 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-31T05:05:58.960

Is there a maximum value for the number of %d %s pairs that follow the initial "%d %d %d" header? There must be since you're putting the values somewhere, perhaps in a struct { int i; char s[j]; } a[n]; with appropriate j and n sizes.

(BTW, your example uses "%d %d %d %s %d %s %d ..." when the description indicates it should be "%d %d %d %d %s %d %s %d %s ...", 3 decimals, followed by decimal/string pairs)

If there is a maximum just create a maximized template and test that the return code from sscanf, which should indicate the number of input items successfully matched and assigned, is your 3rd value minus the 3 header items. If the return code isn't correct when compared to the 3rd int, report a malformed line.

I once made something like this a function so the a[n] was automatic ion the stack and then the function allocated a linked list from the heap for the items sscanf-ed and returned a pointer to the first item.

# c# - Member 'string.Format(string, params object[])' cannot be accessed with an instance reference; qualify it with a type name instead

> ID：15725580
> 
> 赞同：7
> 
> 时间：2013-03-31T02:00:12.653
> 
> 标签：c#, asp.net, asp.net-mvc

I have a page that displays a list of contracts. Each row contains an Amount, a Fee, and a Total that I'm calculating row that row.

I'm also trying to calculate a grand total, that sums up Total from the collection.

Here's what I have:

```
var contracts = _contractsRepository.Contracts.
    Select(c => new ContractViewModel
    {
        ContractId = c.ContractID,                                            
        Amount = c.Amount,
        Fee = c.Fee,
        Total = c.Sum(cc => cc.Amount) + c.Sum(cc => cc.AdminFee)
    });

// error here
ViewBag.GrandTotal = contracts.Sum(c => c.Total).ToString().Format("{0:c}"); 
```

I get a compilation error when I try to calculate the grand total that says:

> **Member 'string.Format(string, params object[])' cannot be accessed with an instance reference; qualify it with a type name instead**

Anyone know what I can do to fix this?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-31T02:01:21.470

You're misunderstanding strings.

`String.Format()` is a **static** method that takes a format string and a set of parameters.
You could call

```
String.Format("{0:c}", someDecimal); 
```

However, if you only have a single value, you can call `ToString()` with a format parameter:

```
someDecimal.ToString("c") 
```

# android - 选项卡上的 SupportMapFragment。我只能看到一次

> ID：15725581
> 
> 赞同：3
> 
> 时间：2013-03-31T02:00:34.637
> 
> 标签：android, map, tabs, fragment, supportmapfragment

我正在使用 FragmentTabHost 开发一个选项卡式应用程序。我的一个标签（片段）是地图（扩展片段），我只能在第一次选择它时看到，如果我选择其他标签并返回地图，应用程序崩溃......

该应用程序必须与 API8 兼容

主要活动

```
package pack.unimaps2;

import com.google.android.gms.common.GooglePlayServicesUtil;

import android.os.Bundle;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.FragmentTabHost;
import android.view.Menu;

public class MainActivity extends FragmentActivity {
private FragmentTabHost mTabHost;

@Override
protected void onCreate(Bundle savedInstanceState) {
    GooglePlayServicesUtil.isGooglePlayServicesAvailable(getApplicationContext());
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    mTabHost = (FragmentTabHost)findViewById(android.R.id.tabhost);
    mTabHost.setup(this, getSupportFragmentManager(), R.id.realtabcontent);

    mTabHost.addTab(mTabHost.newTabSpec("simple").setIndicator("Ir a..."),
            Fragments.RutaHastaTab.class, null);
    mTabHost.addTab(mTabHost.newTabSpec("mapa").setIndicator("Mapa"),
            Fragments.map.class, null);
    mTabHost.addTab(mTabHost.newTabSpec("acercade").setIndicator("Acerca de..."),
            Fragments.AcercaDeTab.class, null);

}

} 
```

FragmentsActivity（省略第一个片段）

```
package pack.unimaps2;

import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentActivity;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;

import com.google.android.gms.maps.SupportMapFragment;

public class Fragments extends FragmentActivity {

    public static class map extends Fragment{

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container,
                Bundle savedInstanceState) {
            View v = inflater.inflate(R.layout.map, container, false);
            return v;
        }

    }

    public static class AcercaDeTab extends Fragment {

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container,
                Bundle savedInstanceState) {
            View v = inflater.inflate(R.layout.tab_acercade, container, false);
            return v;
        }

    }
} 
```

以及创建地图片段视图的xml（map.xml）：

```
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
 android:id="@+id/map"
 android:layout_width="match_parent"
 android:layout_height="match_parent"
 class="com.google.android.gms.maps.SupportMapFragment"/> 
```

日志

```
03-30 21:07:49.180: E/AndroidRuntime(16464): FATAL EXCEPTION: main
03-30 21:07:49.180: E/AndroidRuntime(16464): android.view.InflateException: Binary XML file line #1: Error inflating class fragment
03-30 21:07:49.180: E/AndroidRuntime(16464):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:704)
03-30 21:07:49.180: E/AndroidRuntime(16464):    at android.view.LayoutInflater.inflate(LayoutInflater.java:466)
03-30 21:07:49.180: E/AndroidRuntime(16464):    at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
03-30 21:07:49.180: E/AndroidRuntime(16464):    at pack.unimaps2.Fragments$map.onCreateView(Fragments.java:73)
03-30 21:07:49.180: E/AndroidRuntime(16464):    at android.support.v4.app.Fragment.performCreateView(Fragment.java:1460)
03-30 21:07:49.180: E/AndroidRuntime(16464):    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:911)
03-30 21:07:49.180: E/AndroidRuntime(16464):    at android.support.v4.app.FragmentManagerImpl.attachFragment(FragmentManager.java:1264)
03-30 21:07:49.180: E/AndroidRuntime(16464):    at android.support.v4.app.BackStackRecord.run(BackStackRecord.java:672)
03-30 21:07:49.180: E/AndroidRuntime(16464):    at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1444)
03-30 21:07:49.180: E/AndroidRuntime(16464):    at android.support.v4.app.FragmentManagerImpl$1.run(FragmentManager.java:429)
03-30 21:07:49.180: E/AndroidRuntime(16464):    at android.os.Handler.handleCallback(Handler.java:615)
03-30 21:07:49.180: E/AndroidRuntime(16464):    at android.os.Handler.dispatchMessage(Handler.java:92)
03-30 21:07:49.180: E/AndroidRuntime(16464):    at android.os.Looper.loop(Looper.java:137)
03-30 21:07:49.180: E/AndroidRuntime(16464):    at android.app.ActivityThread.main(ActivityThread.java:4745)
03-30 21:07:49.180: E/AndroidRuntime(16464):    at java.lang.reflect.Method.invokeNative(Native Method)
03-30 21:07:49.180: E/AndroidRuntime(16464):    at java.lang.reflect.Method.invoke(Method.java:511)
03-30 21:07:49.180: E/AndroidRuntime(16464):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
03-30 21:07:49.180: E/AndroidRuntime(16464):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
03-30 21:07:49.180: E/AndroidRuntime(16464):    at dalvik.system.NativeStart.main(Native Method)
03-30 21:07:49.180: E/AndroidRuntime(16464): Caused by: java.lang.IllegalArgumentException: Binary XML file line #1: Duplicate id 0x7f040007, tag null, or parent id 0x0 with another fragment for com.google.android.gms.maps.SupportMapFragment
03-30 21:07:49.180: E/AndroidRuntime(16464):    at android.support.v4.app.FragmentActivity.onCreateView(FragmentActivity.java:285)
03-30 21:07:49.180: E/AndroidRuntime(16464):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:676)
03-30 21:07:49.180: E/AndroidRuntime(16464):    ... 18 more 
```

不知道是什么问题，谢谢你的帮助...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-02T02:00:30.953

还在寻找答案吗？

您不能一直在每次 onCreateView 时都膨胀布局。使用以下内容：

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    if (view != null && this.previousContainer == container) {
        ViewGroup parent = (ViewGroup) view.getParent();
        if (parent != null) {
            parent.removeView(view);
        }
    } else {
        try {
            view = inflater.inflate(R.layout.map, container, false);
            this.previousContainer = container;
        } catch (InflateException e) {
            Log.w("InflateException happened ou nous", e.getMessage());
        }
    }
    return view;
} 
```

我设法防止了这种情况，并且在重新创建片段时也丢失了地图（例如，从垂直变为横向时）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T02:11:10.273

片段应该有一个空的构造函数

如下：

```
public static class map extends Fragment{

    public map(){
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View v = inflater.inflate(R.layout.map, container, false);
        // Change the previous line to this:
        View v = inflater.inflate(R.layout.map, null);

        return v;
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-16T21:20:24.467

问题是您正试图在存在旧视图的情况下创建新视图；只需简单地实现此代码。

```
 @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {

    if (v != null) {
        ViewGroup parent = (ViewGroup) v.getParent();
        if (parent != null)
            parent.removeView(v);
    }
    try {
         v = inflater.inflate(R.layout.map_fragment, container, false);
    } catch (InflateException e) {
        // map is already there, just return view as it is
    }

    return v;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-19T06:24:04.337

此解决方案有效，但可能不是您的情况。我遇到了同样的问题，但是在 a`FragmentPagerAdapter`内部使用 a `ViewPager`，而不是 a `TabHost`。

我所做的是让 ViewPager 始终存储所有页面：

```
viewPager.setOffscreenPageLimit(2); 
viewPager.setAdapter(adapter); 
```

所以我的带有地图片段的标签（在我的例子中是第 0 页）将永远不会被删除和重新创建，从而摆脱了这个问题。

value`2`意味着它将在内存中保留当前页面之前的两页和之后的两页。当您有 3 个选项卡时，这就足够了。如果您有更多选项卡，请随意增加它，但您的应用程序的内存消耗也会增加

# css - 在先前围绕单个项目的中心进行局部旋转之后，围绕组的中心应用 css3 旋转

> ID：15725595
> 
> 赞同：0
> 
> 时间：2013-03-31T02:02:52.117
> 
> 标签：css, rotation, css-transforms

我有一个 div 有许多可以拖动的项目。我可以选择并分组多个项目，然后将它们作为一个组一起旋转。这一切都很好，但前提是单个项目之前对它们应用了零旋转。

如果单个项目之前应用了局部旋转，则会出现问题。在这种情况下，组轮换在项目的位置上有偏差并且不能很好地工作。

我认为问题在于每个项目的局部单独旋转是通过将变换原点设置为单个项目中心的 50% 50% 来完成的。而围绕包含它们的组的中心旋转每个项目具有一个新的变换原点，我们显然将其设置为组的中心。

如果，假设 item1 首先进行了 45 度的局部旋转。然后将其与其他项目分组，并对该组应用 30 度的组旋转。那么 item1 必须相对于自身总共旋转 45 度，相对于组中心旋转 30 度。问题是我们如何实现这一点。

css3 中的旋转只允许一个变换原点。我已经尝试过矩阵和许多方法，但如果项目之前对其进行了轮换，结果仍然不会很好。如果项目之前有零旋转，一切都会很好。然后组围绕其中心旋转很大。但是，如果个别项目有局部旋转，那么当旋转整个组时，事情就会崩溃。

所以问题是，我们如何在使用不同变换原点的同一个项目上组合两个旋转（或任何其他两个变换）（比如一个本地围绕它自己的中心，下一个围绕包含该项目的大组的中心） .

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T16:10:30.750

您可以在前后使用 translate() 来模拟多个变换原点。这是一个示例： http: [//lea.verou.me/css-4d/#circle-demo-3](http://lea.verou.me/css-4d/#circle-demo-3)（可能需要一段时间才能加载）

请记住，每个变换函数都会改变整个坐标系，一切都会变得更容易理解。

# java - 使用 Ant 编译和运行时出现 NoClassDefFoundError

> ID：15725600
> 
> 赞同：0
> 
> 时间：2013-03-31T02:04:15.500
> 
> 标签：java, ant, noclassdeffounderror, build.xml

我正在尝试使用 Ant 编译和运行一个项目，但我得到了 NoClassDefFoundError。这是位于 src 文件夹中的 OutlookToGmailCalendarSync.java 文件：

```
package sample.calendar;
public class OutlookToGmailCalendarSync {
    public static void main(String[] args) {
        System.out.println("hi");
    }
} 
```

这是我的 build.xml 文件：

```
<project name="MyCalendarSample" default="run" basedir=".">
<description>
    simple example build file
</description>
<!-- set global properties for this build -->
<property name="src" location="src"/>
<property name="build" location="build"/>
<property name="dist"  location="dist"/>

<path id="path.class">
   <pathelement location="build/sample/calendar"/>
</path>

<target name="run" depends="compile"
   description="Runs the complied project">
   <!-- Run -->
   <java fork="true" classname="OutlookToGmailCalendarSync">
   <classpath>
     <path refid="path.class"/>
   </classpath>
</java>
</target>

<target name="compile" depends="init"
    description="compile the source " >
    <!-- Compile the java code from ${src} into ${build} -->
    <javac srcdir="${src}" destdir="${build}"/>
</target>

<target name="init">
    <!-- Create the time stamp -->
    <tstamp/>
    <!-- Create the build directory structure used by compile -->
    <mkdir dir="${build}"/>
</target>

<target name="clean"
    description="clean up" >
    <!-- Delete the ${build} directory trees -->
    <delete dir="${build}"/>
</target>

</project> 
```

这是结果：

```
C:\java\my>ant
Buildfile: C:\java\my\build.xml

init:

compile:
    [javac] C:\java\my\build.xml:30: warning: 'includeantruntime' was not set, d
efaulting to build.sysclasspath=last; set to false for repeatable builds
    [javac] Compiling 1 source file to C:\java\my\build

run:
     [java] java.lang.NoClassDefFoundError: OutlookToGmailCalendarSync (wrong na
me: sample/calendar/OutlookToGmailCalendarSync)
     [java]     at java.lang.ClassLoader.defineClass1(Native Method)
     [java]     at java.lang.ClassLoader.defineClass(ClassLoader.java:791)
     [java]     at java.security.SecureClassLoader.defineClass(SecureClassLoader
.java:142)
     [java]     at java.net.URLClassLoader.defineClass(URLClassLoader.java:449)
     [java]     at java.net.URLClassLoader.access$100(URLClassLoader.java:71)
     [java]     at java.net.URLClassLoader$1.run(URLClassLoader.java:361)
     [java]     at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
     [java]     at java.security.AccessController.doPrivileged(Native Method)
     [java]     at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
     [java]     at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
     [java]     at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)

     [java]     at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
     [java]     at sun.launcher.LauncherHelper.checkAndLoadMain(LauncherHelper.j
ava:482)
     [java] Exception in thread "main"
     [java] Java Result: 1

BUILD SUCCESSFUL
Total time: 1 second

C:\java\my> 
```

即使在阅读了其他论坛帖子之后，我仍然不明白为什么会发生这种情况。在运行时，编译的类在 build/sample/calendar 中，这是 classpath 设置的，所以我看不到问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T02:42:26.013

尝试以下更改：

Classpath 设置为生成类的根目录，并为 java 命令提供类的打包名称。

```
<path id="path.class">
<pathelement location="build"/>
</path>

<target name="run" depends="compile"
description="Runs the complied project">
<!-- Run -->
<java fork="true" classname="sample.calendar.OutlookToGmailCalendarSync" >
<classpath refid="path.class"/>
</java>
</target> 
```

希望这会有所帮助。

# path - 查找JDK路径并将其存储为Java中的字符串

> ID：15725601
> 
> 赞同：5
> 
> 时间：2013-03-31T02:04:48.767
> 
> 标签：path, java

我想在多个操作系统上找到 JDK 路径。

我不确定是否有一种很好的方法可以做到这一点，因为我一直在尝试和失败。

对于 Windows，它会是这样的 -`C:\Program Files\Java\jdk1.7.0_07`或者这个 `C:\Program Files(x86)\Java\jdk1.7.0_07`

对于 Linux，它会是这样的 -`/usr/java/jdk1.7.0_07`

我希望这适用于安装的任何版本的 JDK，因此 Java\jdk 之后的数字无关紧要。

我将使用`System.setProperty("java.home", path);`

基本上，我想做的是当我运行我的程序时，将 java.home 设置为当前机器上安装的 JDK，但事实证明获取 JDK 路径非常困难，有什么解决方案吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-05T17:54:54.343

您可以通过查看 javac 的安装位置来找到 JDK 路径。假设“javac”在系统的环境路径中，那么您可以通过将“where javac”传递给如下代码来检索路径

```
public static String getCommandOutput(String command)  {
    String output = null;       //the string to return

    Process process = null;
    BufferedReader reader = null;
    InputStreamReader streamReader = null;
    InputStream stream = null;

    try {
        process = Runtime.getRuntime().exec(command);

        //Get stream of the console running the command
        stream = process.getInputStream();
        streamReader = new InputStreamReader(stream);
        reader = new BufferedReader(streamReader);

        String currentLine = null;  //store current line of output from the cmd
        StringBuilder commandOutput = new StringBuilder();  //build up the output from cmd
        while ((currentLine = reader.readLine()) != null) {
            commandOutput.append(currentLine);
        }

        int returnCode = process.waitFor();
        if (returnCode == 0) {
            output = commandOutput.toString();
        }

    } catch (IOException e) {
        System.err.println("Cannot retrieve output of command");
        System.err.println(e);
        output = null;
    } catch (InterruptedException e) {
        System.err.println("Cannot retrieve output of command");
        System.err.println(e);
    } finally {
        //Close all inputs / readers

        if (stream != null) {
            try {
                stream.close();
            } catch (IOException e) {
                System.err.println("Cannot close stream input! " + e);
            }
        } 
        if (streamReader != null) {
            try {
                streamReader.close();
            } catch (IOException e) {
                System.err.println("Cannot close stream input reader! " + e);
            }
        }
        if (reader != null) {
            try {
                streamReader.close();
            } catch (IOException e) {
                System.err.println("Cannot close stream input reader! " + e);
            }
        }
    }
    //Return the output from the command - may be null if an error occured
    return output;
} 
```

返回的字符串将是 javac 的确切位置，因此您可能需要额外处理才能获取 javac 所在的目录。您需要区分 Windows 和其他操作系统

```
public static void main(String[] args) {

    //"where" on Windows and "whereis" on Linux/Mac
    if (System.getProperty("os.name").contains("win") || System.getProperty("os.name").contains("Win")) {
        String path = getCommandOutput("where javac");
        if (path == null || path.isEmpty()) {
            System.err.println("There may have been an error processing the command or ");
            System.out.println("JAVAC may not set up to be used from the command line");
            System.out.println("Unable to determine the location of the JDK using the command line");
        } else {
            //Response will be the path including "javac.exe" so need to
            //Get the two directories above that
            File javacFile = new File(path);
            File jdkInstallationDir = javacFile.getParentFile().getParentFile();
            System.out.println("jdk in use at command line is: " + jdkInstallationDir.getPath());
        }//else: path can be found
    } else {
        String response = getCommandOutput("whereis javac");
        if (response == null) {
            System.err.println("There may have been an error processing the command or ");
            System.out.println("JAVAC may not set up to be used from the command line");
            System.out.println("Unable to determine the location of the JDK using the command line");
        } else {
            //The response will be "javac:  /usr ... "
            //so parse from the "/" - if no "/" then there was an error with the command
            int pathStartIndex = response.indexOf('/');
            if (pathStartIndex == -1) {
                System.err.println("There may have been an error processing the command or ");
                System.out.println("JAVAC may not set up to be used from the command line");
                System.out.println("Unable to determine the location of the JDK using the command line");
            } else {
                //Else get the directory that is two above the javac.exe file
                String path = response.substring(pathStartIndex, response.length());
                File javacFile = new File(path);
                File jdkInstallationDir = javacFile.getParentFile().getParentFile();
                System.out.println("jdk in use at command line is: " + jdkInstallationDir.getPath());
            }//else: path found
        }//else: response wasn't null
    }//else: OS is not windows
}//end main method 
```

注意：如果该方法返回 null / error 这并不意味着 javac 不存在 - 这很可能是 javac 不在 windows 上的 PATH 环境变量中，因此无法使用此方法找到。这在 Unix 上不太可能，因为 Unix 通常会自动将 jdk/bin 目录添加到 PATH 中。此外，这将返回当前在命令行中使用的 javac 版本，不一定是安装的最新版本。因此，如果安装了例如 7u12 和 7u13，但命令提示符设置为使用 7u12，那么这就是将返回的路径。

仅在多台 Windows 机器上进行了测试，但在它们上运行良好。

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T02:39:41.783

JAVA_HOME 应该指向 JDK 安装路径，而 JRE_HOME 应该指向所有操作系统中的 JRE 安装路径

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-10T16:14:35.487

我不知道有什么大不了的。

```
public class Main implements Serializable{
    public static void main(String[] args) {
        System.out.println(System.getenv("JAVA_HOME"));
    }
} 
```

`C:\Program Files\Java\jdk1.7.0`在 windows 和`/usr/java/jdk1.7.0_13`unix 系统上打印。如果未设置环境属性`JAVA_HOME`，则返回 null。您应该认为这意味着 java 尚未正确安装/配置，因此您的应用程序无法运行。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-10T20:23:12.013

您最好的选择可能是查看 的值`System.getProperty("sun.boot.class.path")`，将其标记为 的值`System.getProperty("path.separator")`，然后查找标准的 JDK JAR 文件。

例如，在我的系统上，我得到（为了可读性而截断）：

`sun.boot.class.path = "/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Classes/jsse.jar:/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Classes/laf.jar:`"

和

`path.separator = ":"`

这很容易让我确定所有系统 JAR 文件都在`/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Classes/`.

不幸的是，这并不是很有帮助，因为我运行的是 OS X，它具有非标准的 Java 安装结构。如果你不是针对 OS X 机器，你可以通过我们刚刚计算的值来计算安装目录（我相信它是值的父目录）。

如果您还想支持 OS X，您可能必须使用`os.name`系统属性并编写附加代码。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-11T12:15:22.070

System.getProperties() 中的 JAVA_HOME 变量指的是 JRE 而不是 JDK。您应该能够通过以下方式找到 JDK：

```
Map<String, String> env = System.getenv();
 for (String envName : env.keySet())
 {
 System.out.format("%s=%s%n",
 envName,
 env.get(envName));
 } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-31T02:10:04.253

System.getProperty("java.home") 对你来说不够好？

如果它以“jre”结尾，您就会知道那是 jre，您可以尝试步行并找到根文件夹并检查仅与 JDK 一起提供的不同文件以确定。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-31T02:10:47.600

System.getProperties() 中的 JAVA_HOME 变量指的是 JRE 而不是 JDK。您应该能够通过以下方式找到 JDK：

```
Map<String, String> env = System.getenv();
        for (String envName : env.keySet())
        {
            System.out.format("%s=%s%n",
                    envName,
                    env.get(envName));
        } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-31T14:38:27.073

这是我对此的看法：您可以选择要安装 jdk 的位置，也可以安装多个 jdk。所以我不认为可以有一个标准变量。

让我们假设标准目录结构已用于安装 jdk。在这种情况下，jre 和 jdk 安装将位于同一目录下。

所以一旦你得到 System.getProperty("java.home") 然后简单地搜索目录。

希望有帮助。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-04-07T05:01:26.930

天哪，这太令人费解了，但我完成了。虽然它只在 Windows 上进行过测试。

```
import java.io.File;

public class Main {
    public static void main(String[] args) {
        String JDK_VERSION = "jdk" + System.getProperty("java.version"); // finds the JDK version currently installed
        String PATH_VARIABLE = System.getenv("PATH"); // finds all the system environment variables

        // separates all the system variables
        String[] SYSTEM_VARIABLES = PATH_VARIABLE.split(";");

        // this object helps build a string
        StringBuilder builder = new StringBuilder();

        // loop through all the system environment variables
        for (String item : SYSTEM_VARIABLES) {
            // if the system variable contains the JDK version get it! (all lower case just to be safe)
            if (item.toLowerCase().contains(JDK_VERSION.toLowerCase())) {
                // adds the JDK path to the string builder
                builder.append(item);
            }
        }

        // stores the JDK path to a variable
        String result = builder.toString();
        // turns the path, which was a string in to a usable file object.
        File JDK_PATH = new File(result);
        // since the path is actually in the JDK BIN folder we got to go back 1 directory
        File JDK_PATH_FINAL = new File(JDK_PATH.getParent());
        // prints out the result
        System.out.println(JDK_PATH_FINAL);
    }
} 
```

基本上所做的是获取所有系统变量并查找其中一个是否包含 java 版本（我获取 JDK 路径的方式）。由于系统变量路径实际上位于 JDK bin 文件夹中，因此它将 JDK 路径`String`转换为 ​​a`File`并将一个文件夹返回到 JDK 目录。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-04-08T09:07:34.493

你可以使用java的getenv函数来获取PATH。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-04-10T11:05:06.243

我认为你最好和最可靠的选择（因为 Java_home 等不需要声明来启动 JVM，我可以在脚本中使用完整路径并启动 Java。

获取 java 进程 ID，使用 API 获取该进程的路径。

这不是一个完整的解决方案，而是如何做到这一点的指南。

如果您确定在所有 Java 应用程序中都正确设置了 java.home，那么可以按照其他答案中的说明使用它

帮助获取进程 ID 的路径[如何在 Unix/Linux 中获取进程的路径](https://stackoverflow.com/questions/606041/how-do-i-get-the-path-of-a-process-in-unix-linux)

同样需要窗户。我确信它在那里，就像在工具中看到的那样

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-04-10T11:33:55.630

如果你想在你的程序中编译程序，为什么不采取以下方法：

```
 JavaCompiler compiler = ToolProvider.getSystemJavaCompiler();
    compiler.run(/* your arguments here */); 
```

完整的描述[在这里](https://stackoverflow.com/questions/2946338/how-do-i-programmatically-compile-and-instantiate-a-java-class)。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-01-03T16:03:57.217

After thinking about the answer of @Nicolas Rinaudo, I started to write something that just checks any path in the System's properties. I tested this on Windows 10 and Linux (Debian 9) and it pretty much works.

```
private static final Pattern JDK_REGEX = Pattern.compile("jdk[0-9].[0-9].[0-9]_(.*?)" + StringEscapeUtils.escapeJava(File.separator));

public static String findJDKPath() {
        Enumeration<Object> properties = System.getProperties().elements();
        List<String> possibilities = new ArrayList<>();
        String separator = System.getProperty("path.separator");
        while(properties.hasMoreElements()) {
            Object element = properties.nextElement();
            if (!(element instanceof String)) {
                continue;
            }
            String string = (String) element;
            String[] split = string.split(separator);
            for(String s : split) {
                if (s.contains("jdk") && s.contains(File.separator)) {
                    possibilities.add(s);
                }
            }
        }
        for(String s : possibilities) {
            Matcher matcher = JDK_REGEX.matcher(s);
            if (matcher.find()) {
                String group = matcher.group();
                return s.substring(0, s.indexOf(group) + group.length());
            }
        }
        return null;
    } 
```

# php - PHP strip_tags - 将标签拆分为数组

> ID：15725603
> 
> 赞同：-1
> 
> 时间：2013-03-31T02:05:17.687
> 
> 标签：php

我有一个很大的 html 内容条目。我只需要将纯文本拆分为数组中的单独条目，以便我可以通过翻译工具运行它，然后将其替换为原始 html。

我设法将其清理干净，然后将行拆分为一个数组，但文本`...to do this <a href="#" title="blah">click here</a>`返回为`...to do this click here`.

由于标签，对该文本执行 a`str_replace`将不再匹配。`a`

因此，我需要一种方法将通常会被剥离的标签`strip_tags`转换为插入的值，我可以用它来分解字符串。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T03:19:43.243

好的，我已经弄清楚了，在这种情况下，DOM 比我需要的要复杂得多。

更简单的解决方案是使用正则表达式匹配来查找所有标签，然后将 html 分解为这些标签。

```
preg_split('/<.+?>/', $html); 
```

这仅留下文本。由于我不需要任何标签信息，因此处理起来也应该更快。

# c++ - 使用 getline 查找字符串的匹配项

> ID：15725609
> 
> 赞同：0
> 
> 时间：2013-03-31T02:06:31.037
> 
> 标签：c++, match, getline

我正在尝试在字符串名称向量中搜索匹配项。名称可以是多个单词，因此在提示用户时我正在使用 getline(std::cin, name); 但是我永远找不到与向量中现有名称的匹配项。如何从 getline 返回中删除额外的“垃圾”，使其与向量中的内容相匹配？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T03:21:23.670

使用分隔符“\0”。

IE：

```
getline(cin, name, '\0'); 
```

并检查一下： [http ://www.cplusplus.com/reference/string/string/getline/](http://www.cplusplus.com/reference/string/string/getline/)

这： [http ://www.cplusplus.com/reference/istream/istream/ignore/](http://www.cplusplus.com/reference/istream/istream/ignore/)

# ruby-on-rails - Rails 3, Devise, Mandrill, Welcome Message

> ID：15725610
> 
> 赞同：2
> 
> 时间：2013-03-31T02:06:34.663
> 
> 标签：ruby-on-rails, erb

I've been trying to hack together a basic app, and I am to the point where I want to send a welcome message... I thought I had everything in line but it's just not sending. I'm sure that it's just a basic mistake but I'm pulling my hair out here.

app/views/user_mailer/welcome_email.html.erb

```
<!DOCTYPE html>
<html>
  <head>
    <meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />
  </head>
  <body>
    <h1>Welcome to example.com</h1>
    <p>
      You have successfully signed up to example.com,
      your username is:.<br/>
    </p>
    <p>
      To login to the site, just follow this link:
    </p>
    <p>Thanks for joining and have a great day!</p>
  </body>
</html> 
```

config/environments/production.rb

```
Scratch::Application.configure do

....
  # Mandrill Connectivity
  config.action_mailer.smtp_settings = {
    :address   => "smtp.mandrillapp.com",
    :port      => 587, # ports 587 and 2525 are also supported with STARTTLS
    :enable_starttls_auto => true, # detects and uses STARTTLS
    :user_name => "REMOVED",
    :password  => "REMOVED", # SMTP password is any valid API key
    :authentication => 'login', # Mandrill supports 'plain' or 'login'
    :domain => 'yourdomain.com', # your domain to identify your server when connecting
    }
.... 
```

app/mailers/user_mailer.rb

```
class UserMailer < ActionMailer::Base
  default from: "info@overflowapp.com"

  def welcome_mail(email)
    mail(:to => email, :subject => "Welcome to Overflow").deliver
  end
end 
```

app/models/user_observer.rb

```
Class UserObserver < ActiveRecord::Observer
  # We check if it's a new user
  def before_save(user)
    @is_new_record = user.new_record?
    true
   end

  def after_save(user)
  # If it's not a new user we don't want to send them another welcome email
    if @is_new_record then
      UserMailer.welcome_mail(user.email)
    end
  end
end 
```

config/application.rb

```
....
config.active_record.observers = :user_observer
.... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-08T22:13:55.653

It looks like your function in user_mailer.rb is called `welcome_mail` whereas your template is called `welcome_email.html.erb` (notice there's no 'e' in the function name). Add on the e, it should send.

You could also try the mailchimp gem which support Mandrill:

[https://github.com/mailchimp/mailchimp-gem](https://github.com/mailchimp/mailchimp-gem)

# python - Calculating norm of columns as vectors in a matrix

> ID：15725611
> 
> 赞同：3
> 
> 时间：2013-03-31T02:06:39.087
> 
> 标签：python, numpy, linear-algebra, matrix-multiplication

I am looking for the best way of calculating the norm of columns as vectors in a matrix. My code right now is like this but I am sure it can be made better(with maybe numpy?):

```
import numpy as np
def norm(a):
    ret=np.zeros(a.shape[1])
    for i in range(a.shape[1]):
        ret[i]=np.linalg.norm(a[:,i])
    return ret

a=np.array([[1,3],[2,4]])
print norm(a) 
```

Which returns:

```
[ 2.23606798  5\.        ] 
```

Thanks.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T02:14:30.380

You can calculate the norm by using ufuncs:

```
np.sqrt(np.sum(a*a, axis=0)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-12-23T15:15:52.047

Direct solution using numpy:

```
x = np.linalg.norm(a, axis=0) 
```

# php - Magento user account types (buyers/sellers)

> ID：15725616
> 
> 赞同：0
> 
> 时间：2013-03-31T02:07:30.370
> 
> 标签：php, javascript, magento, e-commerce

I am setting up an eCommerce store based on Magento. I need to make it so that the user log in functionality is two fold; one for buyers, and one for sellers.

The end goal is to have a file upload form accessible to sellers, but not to buyers. Sellers will use this upload to upload some files which I will then make available as products on their selling pages.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T05:18:22.793

Magento has customer groups concept.

So you create two customer groups and depending on which customer logged in you place an if condition and get your resulted form displayed.

# php - .htaccess 目录

> ID：15725617
> 
> 赞同：0
> 
> 时间：2013-03-31T02:07:41.327
> 
> 标签：php, .htaccess

我不知道怎么放这个，但我有一个 php 页面假装输出到一个文件夹，但实际上它不是。所以像这样：www.mysite.com/folder/testing.html 这里的“文件夹”实际上不包含任何名为“testing.html”的文件，但是，“文件夹”存在于服务器上，里面什么都没有。好的，所以我的困境是我已经接受了这个网站的维护，但我不确定我是否需要设置我的 .htaccess，但链接 www.mysite.com/folder/testing.html 没有呈现，它什么都不做。在我托管的另一个站点上，具有相同设置的类似链接有效。我的问题是，我需要在我的服务器上检查我的 .htaccess 或其他东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T09:50:05.983

您可能想检查是否启用了重写模块（假设您使用的是给定的 Apache http 服务器，而不是使用 .htaccess 处理重写）：

```
httpd -M | grep rewrite 
```

应该输出类似的东西

```
rewrite_module 
```

如果缺少该模块，您可以使用以下命令启用该模块：

```
sudo a2enmod rewrite 
```

# vb.net - Visual Studio .NET - Disable focusing a form below

> ID：15725619
> 
> 赞同：-1
> 
> 时间：2013-03-31T02:08:16.623
> 
> 标签：vb.net, visual-studio, visual-studio-2012

I have two forms, let's call them form1 and form2\. User opens a form2 by clicking on a button on form1\. When the form 2 opens, I want to disable that user can click on a form1 and do whatever he wants. I want him to first finish the job on form2 and after he closes the form2 messing around with form1 becomes available again.

It can probably be done somehow by using an events called LostFocus and GotFocus, but I don't know how.

I hope someone will help me.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T02:13:33.307

It sounds like you want `Form2` to be "modal". You should be able to achieve this by using `ShowDialog()` [when displaying the form](http://msdn.microsoft.com/en-us/library/c7ykbedk.aspx):

```
Public Sub ShowMyDialogBox()

    Dim testDialog As New Form2()

    If testDialog.ShowDialog(Me) = System.Windows.Forms.DialogResult.OK Then 
        ' Do something based on the return status of the form
    Else
        ' Do something else based on the return status of the form, etc.
    End If

    testDialog.Dispose()

End Sub 
```

# css - ID 内的 CSS 类获胜

> ID：15725621
> 
> 赞同：0
> 
> 时间：2013-03-31T02:08:33.077
> 
> 标签：css, css-specificity

两个嵌套的 div，外部由 ID 标识，内部由类标识：

```
<div id="theID">
    <div class="aClass">Class inside ID</div>
</div> 
```

假设我们对类和 ID 都有规则

```
.aClass {color: green; }
#theID { color: yellow; } 
```

根据我的理解，这两条规则都适用于文本，因此具有更高特异性（#theID）的规则应该获胜。

但是由于某种原因，班级规则获胜，文本呈现绿色。

这是为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T11:55:46.550

感谢大家。换句话说，仅当有多个规则直接应用于元素时才使用特异性优先级。

否则，父样式表将应用，其计算方式类似。

再来一张插图：

```
<div id="theID">
    <div class="aClass">
      <p>Class inside ID and within P</p>
    </div>
</div> 
```

和 CSS：

```
.aClass p {
    text-transform: lowercase;
}
#theID p {
    text-transform: uppercase;
} 
```

这里两个规则都直接应用于`<p>`元素，但是由于 ID 选择器的存在，这两个规则具有更高的特异性。

所以生成的文本将是大写的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T02:22:13.380

`#theID`更特定于外部 div（直接样式，而不是继承样式），因此其中的所有文本都是黄色的。然而`.aClass`更具体到内部 div 所以它里面的所有东西都是绿色（直接样式）而不是黄色（继承样式）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T02:48:48.117

浏览器从外部到内部元素收集/读取 css 信息。

将首先调用外部元素，然后调用内部元素。

```
<div id="theID">
   I am Yellow
   <div class="aClass">I am Green</div>
</div> 
```

另一个例子：

```
<div id="theID">
   I am Yellow
   <div class="aClass">
       <span style="color:purple">
          I am purple
       </span>
   </div>
</div> 
```

最后的元素风格总是会赢。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-31T10:53:09.747

每个元素都有所有的 CSS 属性。在这种情况下，有两个`div`元素，每个元素都有自己的`color`属性。这些属性在此处为两个元素明确设置，没有冲突的 CSS 规则，因此没有关于特异性或继承性的问题。

文本“Class inside ID”是内部`div`元素的文本内容，因此它得到了它的颜色。外部元素的`color`设置将影响该元素内的任何文本，这些文本没有包含在具有自己的颜色集的内部元素中，但没有这样的文本，因此设置无效。

# apache - 能够代理请求的 HTTP 服务器

> ID：15725624
> 
> 赞同：2
> 
> 时间：2013-03-31T02:08:51.717
> 
> 标签：apache, http, https, proxy

出于性能原因，我不得不重写我们网络基础设施的一部分。

为此，我将关键部分编写为 C++ 中的 Web 应用程序。此 Web 应用程序侦听给定端口，一次只接受一个 TCP 连接，并处理它在当前连接上接收到的所有 HTTP 请求。

你可以这样启动它来监听 8080 端口：

```
./webapp 8080 
```

尽管它比以前完美无缺且运行速度更快，但它的局限性在于应用程序的一次连接一次的性质。您不能仅通过一个应用程序实例通过多个连接同时提供 HTML 页面、Javascript 和图像。

为了克服这个限制，我想运行一个前端反向代理 HTTP 服务器，它侦听端口 80，并在后台运行的 Web 应用程序的多个实例上均匀地重定向传入的 HTTP 请求。这些实例可以**在启动时**创建，如下所示：

```
./webapp 10000
./webapp 10001
./webapp 10002
./webapp 10003
./webapp 10004
./webapp 10005
./webapp 10006
./webapp 10007
./webapp 10008
./webapp 10009 
```

前端应配置为**在启动时与每个 Web 应用程序建立****永久**HTTP 连接，然后将传入的 HTTP 请求转发到正在运行的 Web 应用程序之一，均匀分布它们。

 **反向代理还应该支持从客户端到自身的 SSL。支持 SPDY 将是一个加分项，但不是必须的。

我的问题是：在我的场景中，哪些 HTTP 反向代理可以用作前端？如果你知道不止一个，每个的优点和缺点是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-22T12:47:39.460

听起来您不一定需要反向代理，而是需要负载均衡器。我设置了[HAProxy](http://www.haproxy.org/)，以便每个 webapp 进程都算作一个后端，然后进行循环平衡，以便每个新连接都转到列表中的下一个进程。

[Nginx](http://nginx.org/)也可以做这些事情，但我不确定它是否带有开箱即用的负载平衡，或者它是否是一个附加模块。Nginx 的好处是可以缓存 CSS 和图片等静态资产。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T02:57:14.290

您拥有一个仅连接的服务器的动机是什么？对于网络服务器来说，这听起来像是一个糟糕的选择。当您的网站出现时，每个客户端浏览器通常会并行发送数十个请求。

如果你通过 TCP 连接产生一个进程，你最终会表现不佳。真的，您在这里寻找的是多线程服务器而不是多进程基础架构（拥有不同进程的意义何在？）

不过，你可以走几条路：

*   `webapp`如果您真的想拥有单独的进程，则每次收到请求时都会分叉。这在性能方面不会很好，但它是我能想到的最接近你最初的问题。

*   您保留单线程`webapp`，但维护您收听的套接字列表，并将它们与他们的“伙伴套接字”配对，这是他们将流量转发到的那些（请注意，它可以双向工作）。尽管如此，这仍不是最佳性能，因为您可能会受到内核调用的限制。

*   您为每个请求生成一个新线程，然后仅在此线程中处理此请求，就像您对单线程架构所做的那样。

如果我是你，我会直接转向解决方案 3，因为它是最好的选择。这并没有太大的麻烦，因为它与您的单线程方法（只是一对套接字）很接近，并且它不会对整个地方的分叉进程造成性能影响。

我认为您不会找到适合您需求的网络服务器，因为它不是处理此类情况的标准方法，而且我怀疑是否有人花时间开发它 :)

**编辑：**

好的，我从您的编辑中了解您的问题。

尽管如此，对我来说，要解决的问题仍然是一样的：您需要一个将流量分派到您的进程的进程。我认为您不会找到开箱即用的这种调度程序，因此您需要使用我提到的三种技术之一来实现它。

如果您考虑一下，您实际上是在尝试实现代理的一侧，而另一侧是转发到您的`webapp`. 所以你应该使用代理技术恕我直言。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-19T16:48:58.753

Nginx 是一个不错的选择

优点：

*   支持 SSL 终止
*   支持开箱即用的[负载均衡](http://nginx.org/en/docs/http/load_balancing.html)
*   [上游保活](http://nginx.org/en/docs/http/ngx_http_upstream_module.html#keepalive)连接
*   有 SPDY 支持（虽然没有服务器推送）。最新版本添加了 http2 支持并删除了 spdy。

缺点：

*   您必须在 nginx 配置中对上游服务器进行硬编码，如下所示。如果动态更新它们，则没有简单的方法可以通过环境变量读取上游服务器设置。

    ```
    http {
        upstream myapp1 {
            server localhost:10000;
            server localhost:10001;
            server localhost:10002;
        }
        server {
            listen 443 ssl spdy;

            location / {
                proxy_pass http://myapp1;
            }
        }
    } 
    ```**

# java - 记录高尔夫击球的方法

> ID：15725625
> 
> 赞同：0
> 
> 时间：2013-03-31T02:08:54.970
> 
> 标签：java

方法是记录球员完成一个洞时的击球次数。成功记录笔画时，该方法返回 true。有2个注意事项：（1）该洞必须按顺序记录，并且必须以1开头。如果收到的洞是乱序的，则不记录分数并返回false （2）洞号也必须有效。您不能为小于 1 或大于球场上的洞数的洞记录分数。调试我的代码时，会给出 java.lang.NullPointerException。这是什么意思，我该如何解决这个问题。

注意：holesPlayed 是一个实例变量，赋值为 0

这是我所拥有的：

```
public boolean recordStrokes(int holeNumber, int strokes) {
    if ((holeNumber >= 1) && 
        (holeNumber <= this.holesPlayed) && 
        (holeNumber == holesPlayed + 1 
    {
        scores[holeNumber -1] = strokes;    
        holesPlayed = holesPlayed + 1;    
        return true;
    }    
    else { 
        return false;  
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T02:14:58.000

你错过了 IF 条件的右括号

```
 public boolean recordStrokes(int holeNumber, int strokes) {
        if ((holeNumber >= 1) && 
            (holeNumber <= this.holesPlayed) && 
            (holeNumber == holesPlayed + 1 )) <-- this brackets are missing in your code
        {
            scores[holeNumber -1] = strokes;    
            holesPlayed = holesPlayed + 1;    
            return true;
        }    
        else 
        { 
            return false;  
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T02:15:23.150

我不能确定，但​​我会做一个`scores`从未初始化过的猜测。您是否在某处使用诸如

```
scores = new int[NUM_HOLES]; 
```

?

# c++ - Function template: why ambiguity is generated?

> ID：15725626
> 
> 赞同：3
> 
> 时间：2013-03-31T02:09:06.347
> 
> 标签：c++, templates

I have the following simple function template:

max.hpp:

```
template <typename T>
inline T const& max (T const& a, T const& b)
{
   return a <b? b :a;
} 
```

max.cpp

```
#include <iostream>
#include <string>
#include "max.hpp"

int main()
{
  int i = 42;
  std::cout << "max(7,i): " << ::max(7,i) << std::endl;

  double f1 = 3.4;
  double f2 = -6.7;
  std::cout << "max(f1,f2): "<< ::max(f1,f2) << std::endl;

  std::string s1 = "mathematics";
  std::string s2 = "math";
  std::cout << "max(s1,s2): " << ::max(s1,s2) << std::endl;
  std::cin.get();
  return 0;
} 
```

This works fine, since `::` will tell compiler to search for `max` template in global namespace. However, when I remove those `::` in those 3 cases, I got the following ambiguity error message:

```
max.cpp: In function ‘int main()’:
max.cpp:21:43: error: call of overloaded ‘max(std::string&, std::string&)’ is ambiguous                                            
max.hpp:2:17: note: candidates are: const T& max(const T&, const T&) 
 [with T = std::basic_string<char>]                                          
/usr/lib/gcc/i686-pc-cygwin/4.5.3/include/c++/bits/stl_algobase.h:209:5: 
note: const  _Tp& std::max(const _Tp&, const _Tp&) 
[with _Tp = std::basic_string<char>] 
```

My questions are as follows:

1.  In this case, does the compiler search for `std` namespace by default even I did not include the header file `<algorithm>` where `std::max` is located?

2.  What are placed in the `global namespace`? Is it required to use the `::` when calling functions in `global namespace` under all circumstances?

3.  Why there is no ambiguity when `max` is applied on `integer` and `float` type, only has ambiguity for `string` type?

FYI: I am using gcc 4.5.3 for compiling. Thank you!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T02:39:14.440

> In this case, does the compiler search for std namespace by default even I did not include the header file where std::max is located?

Yes, this is called [Argument Dependent Lookup](http://en.wikipedia.org/wiki/Argument-dependent_name_lookup). Note that the header file in which `std::max` is defined might be included by some file you included.

> What are placed in the global namespace? Is it required to use the :: when calling functions in global namespace under all circumstances?

No, only when there's ambiguity. This is one of those cases.

> Why there is no ambiguity when max is applied on integer and float type, only has ambiguity for string type?

Because neither `int` nor `float` are defined in namespace `std`. Therefore the compiler does not look inside that namespace and as a consequence `std::max` is not considered during overload resolution. This is not the case of `std::string`.

Note that you could trigger the same ambiguity if you did:

```
using namespace std; 
```

Or:

```
using std::max; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T17:51:29.347

The other [answer](https://stackoverflow.com/a/15725798/241631) explains why the ambiguity arises because of ADL. One way to avoid it is to qualify the call to `max` (in this case using `::` to restrict the name lookup to the global namespace).

Another, perhaps more obscure, method to restrict ADL is to use the following syntax

```
std::cout << "max(s1,s2): " << (max)(s1,s2) << std::endl; 
//                             ^   ^ 
```

The following example [compiles](http://liveworkspace.org/code/4Ucxw$7) without errors:

```
#include <iostream>
#include <string>
#include <algorithm>

template <typename T>
inline T const& max (T const& a, T const& b)
{
   return a < b ? b : a;
}

int main()
{
  std::string s1("mathematics");
  std::string s2("math");
  std::cout << "max(s1,s2): " << (max)(s1,s2) << std::endl;
} 
```

# mysql - mysql一次插入2个具有主键和外键的表

> ID：15725630
> 
> 赞同：2
> 
> 时间：2013-03-31T02:09:54.320
> 
> 标签：mysql, sql, foreign-keys, sql-insert

我有两张桌子

**书桌**

*   身份证（PK）
*   标题
*   作者
*   类型
*   国际标准书号
*   价格
*   出版商
*   年

**书奖表**

*   ID (FK) -- 引用 Books.ID
*   奖项名称
*   年

bookAwards 的 ID 是书籍表中 ID 的外键。

如何将 bookAwards 表同时插入 bookAwards 表？

当我试图插入书籍表时，它会给出外键导致的错误？

我想将值插入到书籍表中，然后在 bookAwards 中插入带有年份的奖项名称？

任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T02:16:27.633

您可以使用`STORED PROCEDURE`它，因此您只会从应用程序级别调用一次。例子，

```
DELIMITER $$
CREATE PROCEDURE InsertBook
(
    IN _Title INT,
    IN _AwardName VARCHAR(35),
    IN _Year INT
)
BEGIN
    INSERT INTO Books (Title)
    VALUES(_Title);

    -- since the ID is set as AUTO_INCREMENT
    -- there are two ways to do how you can get the ID 
    -- from the Books Table and insert it 
    -- on BookAwards

    -- FIRST WAY
    -- by using LAST_INSERT_ID()
    SET @last_ID = LAST_INSERT_ID();

    -- SECOND WAY
    -- by using MAX()
    -- SET @last_ID = (SELECT MAX(ID) FROM Books);

    INSERT INTO BookAwards(ID, AwardName, Year)
    VALUES (@last_ID, _AwardName, _Year);
END $$
DELIMITER ; 
```

在应用程序级别或您要调用此过程的任何来源上，

```
CALL InsertBook('Lost Art', 'Best in Churva', 2013); 
```

出于安全目的，您仍然可以对过程进行参数化，例如

```
CALL InsertBook(?, ?, ?); 
```

# java - 如何在 Eclipse 中相对引用库？

> ID：15725636
> 
> 赞同：2
> 
> 时间：2013-03-31T02:10:51.387
> 
> 标签：java, eclipse, dll, relative-path

![在此处输入图像描述](https://i.stack.imgur.com/UZxWP.png)

我一直在问很多关于 LTI-CIVIL 的问题，我想出了一个解决方案。为此，我需要相对引用 LTI 的本机库。是否可以在 Eclipse 中相对引用库？

如果没有，解决方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T02:17:49.170

好的。这个答案对你有用。我知道您没有使用 ant，但您仍然可以在 jar 的清单中指定 CLASSPATH。在 CLASSPATH 中包含点，并将 LTI jar 放在同一文件夹中。这意味着您可以将 jar 和 LTI jar 拉到同一个最外层。

如果您想要其他问题的目录结构，可以放入`../putLTIhere`您的 CLASSPATH。

该答案将为您提供更多详细信息：

[如何使用 Ant 为具有外部 jar 依赖项的 java 项目构建可分发的 jar](https://stackoverflow.com/questions/8277038/how-to-build-a-distributable-jar-with-ant-for-a-java-project-having-external-jar)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T02:23:54.153

您可以右键单击该项目，然后单击“属性” -> Java Build Path -> Add Jars

这应该够了吧 ：）

# jquery - HTML table thead not aligning with tbody

> ID：15725642
> 
> 赞同：1
> 
> 时间：2013-03-31T02:11:40.807
> 
> 标签：jquery, html

I think I am doing something wrong, but my table cells are not aligned. The `<thead>` cells are not aligning with the `<tbody>` (and `<tfoot>`) cells. This happens in Chrome and Firefox (**note**: I'm on Linux so I don't/can't test IE.).

See [jsFiddle](http://jsfiddle.net/DuHzm/).

![enter image description here](https://i.stack.imgur.com/DH4LZ.png)

```
$(container)
    .append($("<table>")
         .append($("<thaad>").html("<tr><th>ID</th><th>First name</th><th>Last name</th><th>Email</th><th>Active</th></tr>"))
         .append($("<tfoot>").html("<tr><th>ID</th><th>First name</th><th>Last name</th><th>Email</th><th>Active</th></tr>"))
         .append($("<tbody>").html("<tr><td>1</td><td>John</td><td>Smith</td><td>john@email.com</td><td>true</td></tr>"))); 
```

What could be the reason for this? How to fix it?

Thank you.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-31T02:16:35.030

You wrote `thaad` insead of `thead`. :)

# c# - Quickbooks sales order update - QBXML

> ID：15725643
> 
> 赞同：1
> 
> 时间：2013-03-31T02:12:17.723
> 
> 标签：c#, quickbooks, qbxml

Is there a way to update a sales order which is already created before?

I use C# and qbxml, but I couldn't find any XML statement or link about that. Is it possible or not?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T23:33:37.560

I finally found the answer. Well, in order to update/modify a sales order, we need to use the "SalesOrderModRq" option.

Here is my example:

```
<?qbxml version="11.0"?>
<QBXML>
    <QBXMLMsgsRq onError="stopOnError">
        <SalesOrderModRq>
            <SalesOrderMod>
                <TxnID>1407-1346251803</TxnID>
                <EditSequence>1354787709</EditSequence>

                <SalesOrderLineMod>
                    <TxnLineID>1409-1346251803</TxnLineID>
                    <ItemRef>
                        <FullName>Item</FullName>
                    </ItemRef>
                    <Desc>Item Description</Desc>
                    <Quantity>5</Quantity>
                    <Rate>10.00</Rate>
                    <Amount>50.00</Amount>
                    <IsManuallyClosed>false</IsManuallyClosed>
                </SalesOrderLineMod>
            </SalesOrderMod>
        </SalesOrderModRq>
    </QBXMLMsgsRq>
</QBXML> 
```

# android - How to add Point to MatOfPoint2f?

> ID：15725644
> 
> 赞同：4
> 
> 时间：2013-03-31T02:12:27.840
> 
> 标签：android, opencv

My goal is to calculate the fundamental Matrix by using the matching keypoints from two images. Now I got the good matching points:

```
MatOfDMatch matches = new MatOfDMatch();
matcher.match(descriptor1,descriptor2, matches);

List<DMatch> matchesList = matches.toList();
List<DMatch> good_matches = new ArrayList<DMatch>();
org.opencv.core.Point pt1;
org.opencv.core.Point pt2;

//Then I definite good_dist here
//....

for(int i =0;i<matchesList.size(); i++)
 {
  if(matchesList.get(i).distance<good_dist)
  {
     good_matches.add(matchesList.get(i));
     pt1 = keypoints1.toList().get(matchesList.get(i).queryIdx).pt; 
     pt2 = keypoints2.toList().get(matchesList.get(i).trainIdx).pt;
  }
} 
```

Now I want to pass the pt1 and pt2 to MatOfPoint2f in order to call the function:

```
Calib3d.findFundamentalMat(pt1, pt2, Calib3d.FM_8POINT); 
```

Does anyone know what should I do? Thanks in advance!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T06:43:32.030

Create Array of point (`array_point`) and do next:

```
MatOfPoint2f yourArray_of_MatofPoint2f= new MatOfPoint2f(array_point); 
```

This is from Java, if this doesn't work, please post.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-24T16:48:46.067

So we effectively start with `List<DMatch> good_matches`. You then want to add your pt1 and pt2 Point objects to lists inside of your "`(matchesList.get(i).distance<good_dist)`" if statement, as in `List<org.opencv.core.Point>`. We then have

```
List<DMatch> good_matches;
List<org.opencv.core.Point> points1;
List<org.opencv.core.Point> points2; 
```

We then convert the lists of points to `MatOfPoint2f` as follows:

```
org.opencv.core.Point goodPointArray1[] = new org.opencv.core.Point[goodKeyPoints1.size()];
goodKeyPoints1.toArray(goodPointArray1);
MatOfPoint2f keypoints1Mat2f = new MatOfPoint2f(goodPointArray1); 
```

I am sure more efficient ways of doing this exist, and I would love to hear them

# javascript - jQuery UI（在屏幕上可见时运行）

> ID：15725645
> 
> 赞同：0
> 
> 时间：2013-03-31T02:12:33.153
> 
> 标签：javascript, jquery, html, css, jquery-ui

我试图让我的 jQuery 只在它出现在屏幕上时触发。它会触发一些条反弹，但用户需要滚动内容才能看到它。

除了延迟它的时间（对于某些用户来说可能会被击中和错过），当它在屏幕上可见时，我怎样才能让这个代码触发？

```
<script>
$(function() {
$(".meter .bar").hide().show('bounce', { times:4, direction: 'right' }, 1780);                    
});
</script> 
```

这个对吗？

我试图让我的 jQuery 只在它出现在屏幕上时触发。它会触发一些条反弹，但用户需要滚动内容才能看到它。

除了延迟它的时间（对于某些用户来说可能会被击中和错过），当它在屏幕上可见时，我怎样才能让这个代码触发？

```
<script>
$(function() {
$(".meter .bar").hide().show('bounce', { times:4, direction: 'right' }, 1780);                    
});
</script> 
```

这个对吗？

```
<script>
$('.meter .bar:visible').livequery(function () {
$(".meter .bar").hide().show('bounce', { times:4, direction: 'right' }, 1780);
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T02:17:00.517

我建议使用[http://plugins.jquery.com/livequery/](http://plugins.jquery.com/livequery/)类似： var isExecuting = false;

```
$('.meter .bar:visible').livequery(function () {
    if (!isExecuting) {
      isExecuting = true;
      // some stuff
      $(".meter .bar").hide().show('bounce', { times:4, direction: 'right' }, 1780)
                      .completed(function() { isExecuting = false; };
    }
}); 
```

这将导致某些东西在每次可见时都被执行。

# php - SQL 内连接

> ID：15725651
> 
> 赞同：0
> 
> 时间：2013-03-31T02:14:32.507
> 
> 标签：php, sql, inner-join

我需要使用内部连接显示另一个表中的数据。

```
$pid=intval($_SESSION["Patient_id"]); $query = "SELECT Appointment_id, Doctor_id, Patient_id, Appointment_time, Appointment_date FROM Appointment where Patient_id=$pid";
    SELECT Doctor_ID
    FROM Appointment
    INNER JOIN Doctor
    ON Appointment.Doctor_id=Doctor.Doctor_id 
```

目前我有一个表中的数据显示，但我还需要使用内部连接显示另一个表中的数据。如何将创建的 SELECT 代码插入到我当前的编码中？医生详细信息是我尝试使用医生 ID 在我的页面中输出的内容。我是 php 新手。

谢谢

约会.php 的完整 php 代码

```
<?php
{
    mysql_connect("localhost" , "" , "") or die (mysql_error());
    mysql_select_db("") or die(mysql_error());

    $pid=intval($_SESSION["Patient_id"]); $query = "SELECT Appointment_id, Doctor_id, Patient_id, Appointment_time, Appointment_date FROM Appointment where Patient_id=$pid";
    SELECT Doctor_id
    FROM Appointment
    INNER JOIN Doctor
    ON Appointment.Doctor_id=Doctor.Doctor_id

    //executes query on the database
    $result = mysql_query ($query) or die ("didn't query");
    //this selects the results as rows

    $num = mysql_num_rows ($result);
    //if there is only 1 result returned than the data is ok 
    if ($num == 1) {}
    {
        $row=mysql_fetch_array($result);
        $_SESSION['Appointment_date'] = $row['Appointment_date'];
        $_SESSION['Appointment_time'] = $row['Appointment_time'];

    }
}
?>  

        <strong>Dates available</strong>            
        <select id="Availability" name="Availability">                      
        <option value="0">--Select date--</option>
        <option value="1"><?php echo $_SESSION['Appointment_date'];?></option>
        </select>

        <br />
        <br />

        <strong>Times available</strong>            
        <select id="Availability" name="Availability">                      
        <option value="0">--Select time--</option>
        <option value="2"><?php echo $_SESSION['Appointment_time'];?></option>>
        </select> 
```

从第 57 行到第 98 行的完整代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T09:32:32.477

我同意评论。试试这个（新的查询语法......）

```
<?php
{
mysql_connect("localhost" , "" , "") or die (mysql_error());
mysql_select_db("") or die(mysql_error());

$pid=intval($_SESSION["Patient_id"]); 
$query = "SELECT Apointment.Apointment_id, Apointment.Doctor_id, Apointment.Patient_id, Apointment.Time
          FROM (Doctor INNER JOIN Apointment ON Doctor.Doctor_id = Apointment.Doctor_id) INNER JOIN Patient ON Apointment.Patient_id = Patient.Patient_id
          WHERE Apointment.Patient_id='". $pid . "'";

//executes query on the database
$result = mysql_query ($query) or die ("didn't query");
//this selects the results as rows

$num = mysql_num_rows ($result);
//if there is only 1 result returned than the data is ok 
if ($num == 1) {}
{
$row=mysql_fetch_array($result);
$_SESSION['Appointment_date'] = $row['Appointment_date'];
$_SESSION['Appointment_time'] = $row['Appointment_time'];

}
}
?> 
```

# python - Python: Check if element is not in two lists?

> ID：15725653
> 
> 赞同：17
> 
> 时间：2013-03-31T02:14:55.030
> 
> 标签：python, list, if-statement

I need to check if an element is not in two lists. I currently have:

```
if ele not in lista:
    if ele not in listb:
        do stuff 
```

Using the following code did not work. Is there a more efficient way to accomplish the above in python?

```
if ele not in lista and listb:
    do stuff 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-31T02:16:48.743

```
if ele not in lista and ele not in listb:
    # do stuff 
```

or

```
if ele not in lista + listb:
    # do stuff 
```

but the second option will involve list concatenation which could potentially cause memory issues with large lists, also it will have to go through the list twice. To remedy this you could use `itertools`:

```
from itertools import chain
if ele not in chain(lista, listb):
    # do stuff 
```

If you are going to be constantly checking for membership, you want to be using a `set` which has `O(1)` (amortized) lookup instead of `O(n)` for lists.

eg.

```
items_set = set(chain(lista, listb))
if ele in items_set:  # this membership check will be a lot faster
    # do stuff 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T02:15:37.133

```
if ele not in lista and ele not in listb: 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-01-10T11:15:46.520

late but I just wanted to add some more cool stuff

assuming both lists are of equal length

```
a = [1,2,3,4,5]
b = [6,7,8,9,10]
c = all("h" not in pair for pair in zip(a,b)) 
```

if they are of unequal length:

```
from itertools import zip_longest

a = [1,2,3,4,5]
b = [6,7,8,9,10,11,12,13]
c = all("h" not in pair for pair in zip_longest(a,b)) 
```

# javascript - JavaScript 找不到对象 BigInteger

> ID：15725661
> 
> 赞同：0
> 
> 时间：2013-03-31T02:16:17.823
> 
> 标签：javascript, biginteger

这是我第一次尝试编写 javaScript。

我从网上复制了这段代码

```
var polynomial = function( x ){
alert(x);
    x = new BigInteger( x.toString,10);
    var y = new BigInteger( coefficients[0].toString, 10 );
    for( var i = 1; i < k; i++ ){
        y = y.add( coefficients[i].multiply( x.pow( i ) ) );
    }
    return y;
}; 
```

但是我在线上遇到错误

```
x = new BigInteger( x.toString,10); 
```

同时我不知道为什么...

谁能帮我？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T02:22:32.173

您没有调用 toString 方法！

```
x.toString() 
```

浏览器有控制台，使用F12

听起来你没有包括图书馆。[https://github.com/silentmatt/javascript-biginteger/blob/master/biginteger.js](https://github.com/silentmatt/javascript-biginteger/blob/master/biginteger.js)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T02:34:02.207

正如其他人所指出的，`BigInteger`它不是 JavaScript 内置的。我在 JavaScript 中搜索了一个`Big­Int­eger`库并找到[了这个](http://xenon.stanford.edu/~tjw/jsbn/). 要使用它，您需要从该网站下载`jsbn.js`并在标签*上方*添加这些标签，包括您的脚本：`jsbn2.js``script`*`script`*

 *```
<script type="text/javascript" src="jsbn.js"></script>
<script type="text/javascript" src="jsbn2.js"></script> 
```

Additionally, as others have pointed out, you are missing parentheses on the `toString`s.

Together, your HTML might look like this:

```
<script type="text/javascript" src="jsbn.js"></script>
<script type="text/javascript" src="jsbn2.js"></script>
<script type="text/javascript">
    var polynomial = function(x) {
        x = new BigInteger( x.toString(), 10 );
        var y = new BigInteger( coefficients[0].toString(), 10 );
        for( var i = 1; i < k; i++ ){
            y = y.add( coefficients[i].multiply( x.pow( i ) ) );
        }
        return y;
    };
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T02:34:20.427

The BigInteger is not 1 of javascript types, I think that this part of code needs you to import a js framework, not sure what it is. Ｙou should check where you copy the code.*

# python - How can you provide this access specifier protection in python?

> ID：15725663
> 
> 赞同：0
> 
> 时间：2013-03-31T02:16:28.960
> 
> 标签：python, oop, private, access-specifier

Here is the scenario I am currently dealing with.
There is a class called Service. Basically, only a single object of this can be created by a node. Once this object is created it is passed from one node to another node.

```
Class Service:
 int valueOfA=0;
 int valueOfB=0;
 int valueOfC=0;
 int valueOfD=0; 
```

Now , Lets say A instantiates an object obj of this class. now A should be able to increment only

```
 obj.valueOfA++ 
```

Similarly B should be able to increment only

```
 obj.valueOfB++ 
```

But any node can read the value of A or B or C. Here each node is identified by its IP address. Meaning node A has a separate IP addr, node B has a separate IP address so on and so forth.

How can I implement something like this in python?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T02:21:50.280

Python has no automatic access specifier protection like `public` or `private`. But you can always implement the logic yourself using a method. Do something like:

```
def incrementA(self, node):
  if node.name == "Node A": self.valueOfA += 1
  else: raise ValueError("node is not authorized to increment A") 
```

Also, Python has no `++` operator. You need to use `+=` to increment.

# google-api - Google OpenID：不要登录 gmail

> ID：15725665
> 
> 赞同：1
> 
> 时间：2013-03-31T02:16:36.807
> 
> 标签：google-api, openid

我的网站主要供学生在学校共享笔记本电脑和计算机上使用。他们有 Google Apps for Education 帐户，用于通过 OpenID 登录我的网站。我的登录身份验证工作正常，通过传递`openid.pape.max_auth_age`参数 = 0，我可以强制用户在每次点击“使用 Google 登录”按钮时登录，无论当前是否有登录的 google 用户。在 Google 验证了用户的电子邮件地址后，我在我的数据库中找到了关联的用户并将他们登录。

问题是，我找不到一种方法来阻止谷歌在用户通过 openid 登录我的同时登录到他们所有的谷歌应用程序。当用户注销我的网站时，除非我通过向[https://accounts.google.com/Logout](https://accounts.google.com/Logout)发出 GET 请求手动触发完整的 google 注销（这感觉不稳定和 hacky，并且不是我网站的预期行为)，用户仍然登录到 gmail。下一位在该计算机上访问 gmail.com 的学生将有权访问之前用户的所有信息。

有没有办法告诉谷歌在我的网站上使用 OpenID 时不要完全登录用户？

# css - clear:both or overflow:auto, which is better?

> ID：15725667
> 
> 赞同：7
> 
> 时间：2013-03-31T02:16:51.853
> 
> 标签：css, css-float

I really don't understand what's the difference between **clear:both** and **overflow:auto**

I tested it out and the functionality works the same way, would someone explain why those two works the same way?

From what I've seen in some articles and questions,

*overflow:auto can be used in a container with floats inside it. and it takes up no space to using an empty div.*

Still, I have doubts on it, it might screwed up my codes in the future.

Here are the list of questions that's similar to my question. Yet, it doesn't have the answer to my question, probably it's vague for me.

[hr clear vs div clear. Which is better?](https://stackoverflow.com/questions/5266667/hr-clear-vs-div-clear-which-is-better)

[3 column html template - content overflows though there is clear both and height is 100%](https://stackoverflow.com/questions/13795225/3-column-html-template-content-overflows-though-there-is-clear-both-and-height)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-31T02:22:32.130

`overflow: auto` (or `hidden`) is not acceptable *at least* in cases where the container has a set height as this will engender a scrollbar (or hide the overflowing content).

[http://jsfiddle.net/xSzcC/](http://jsfiddle.net/xSzcC/)

Float clearing is intended to be done by the `clear` rule anyway.

Clear-fixing for modern browsers is [very easy now](http://www.css-101.org/articles/clearfix/latest-new-clearfix-so-far.php).

[http://jsfiddle.net/xSzcC/1/](http://jsfiddle.net/xSzcC/1/)

In case of link rot, the functional part is:

```
.cf:before,
.cf:after {
    content:"";
    display:table;
}

.cf:after {
    clear:both;
} 
```

# visual-studio-2010 - How to determine what caused a property to change?

> ID：15725668
> 
> 赞同：0
> 
> 时间：2013-03-31T02:16:59.887
> 
> 标签：visual-studio-2010, debugging, visual-studio-debugging

I'm using Visual Studio Express 2010 for a small VB.Net project. I have a problem with unexpected changes in the currentCell property of a dataGridView control, and I can't understand what actually causes those changes. I can see that the CurrentCellChanged event is triggered, but I don't know how to find out what comes before that. What is the best way to find that piece of information?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T02:18:04.250

Try setting a breakpoint on a handler for the `CurrentCellChanged` event. Then you should be able to look higher up in the call stack to see where it was changed.

# swi-prolog - Parsing command line arguments

> ID：15725670
> 
> 赞同：5
> 
> 时间：2013-03-31T02:17:10.887
> 
> 标签：swi-prolog

I'm very confused with prolog, it's way different to any language I've ever used (many languages) How do I go about getting argv[0] from:

```
current_prolog_flag(argv, Argv),
write(Argv). 
```

Now if I tried to type Argv[0] or Argv(0) or Argv<0> it fails.. this leaves me with no clue and very little help from the documentation.. it seems that they expect you to already be a prolog expert :D

Another question, how would I assign Argv[0] to a variable so I can print it later using "write" ?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-31T08:52:11.380

Prolog uses matching.

```
?- current_prolog_flag(argv, [File | Rest]).
File = 'C:\\Program Files\\pl\\bin\\swipl-win.exe',
Rest = ['--win_app']. 
```

This matches a list with a head and the tail:

```
[Head | Tail] 
```

Head is the first element and Tail is the rest of the list.

To get the last element, use:

```
?- current_prolog_flag(argv, Argv), append(_, [Last], Argv).
Argv = ['C:\\Program Files\\pl\\bin\\swipl-win.exe', '--win_app'],
Last = '--win_app' 
```

To get help about functions like append:

```
apropos(append). 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-02-09T07:02:04.693

You can use nth0 and nth1 (same as nth0, but starts counting elements from 1 instead of 0) predicates:

```
current_prolog_flag(argv, Argv),
nth0(0, Argv, Argument0), % get first argument
nth0(1, Argv, Argument1), % get second argument
write(Argument0). 
```

Most often nth0(Index, List, Element) is used as follows:

```
% get element by index
nth0(1, [a, b, c, d], E) % E = b

% get index by element
nth0(I, [a, b, c, d], b) % I = 1

% enumerate elements with their corresponding indexes
List = [a, b, c, d],
forall(nth0(I, List, E), format('List[~w]=~w~n', [I, E])).
% example above prints    
List[0]=a
List[1]=b
List[2]=c
List[3]=d 
```

# php - 将用户照片存储在数据库中的方法？

> ID：15725671
> 
> 赞同：0
> 
> 时间：2013-03-31T02:17:13.657
> 
> 标签：php, mysql, file

我正在创建一个用户拥有自己照片的网站，并且我看到了一个“争议”，​​即在 MYSQL 中将照片存储为 BLOBS（这显然很慢？）还是某种类型的文件系统。我已经制作了一个带有 blob 的示例类型程序，这相对容易，但是当我制作实际站点时，我不希望有任何减慢它的速度。

最常用的照片存储方式是什么？

我认为人们正在使用的这个“文件系统”是什么？

# java - 数组输出问题？

> ID：15725672
> 
> 赞同：0
> 
> 时间：2013-03-31T02:17:14.353
> 
> 标签：java, arrays, netbeans, java-7, output

你好 StackOverflow 社区，

我遇到了一些涉及将元素添加到数组中的输出问题。我在课堂上创建了一个程序，它运行正常，但是当我在自己的计算机上运行相同的程序/代码时，我得到以下输出（有时会生成不同的数字/错误）：

“玩具：

玩具演示.ToysDemo@15f5897toysdemo.ToysDemo@b162d5"

为了更清楚，这里是代码：

```
package toysdemo;

public class ToysDemo {
private float price;
private String name;

public float getPrice(){
    return price;
}

public void setPrice(float newPrice){
    price = newPrice;
}

public String getName() {
    return name;
}

public void setName(String newName) {
    name = newName;
}

public static void printToys(ToysDemo arrayOfToys[], int size) {
    //display content of array
    System.out.println("The toys: ");
    for (int i = 0; i < size; i++) {
        System.out.print(arrayOfToys[i]);
    }
    System.out.println();
}//print toys

public static void main(String[] args) {
    ToysDemo arrayOfToys[] = new ToysDemo[5];
    int numberOfToys = 0;
    // create two toys and save into array
    ToysDemo toy = new ToysDemo();
    toy.setPrice((float)111.99);
    toy.setName("Giant Squid");
    arrayOfToys[numberOfToys++] = toy;

    ToysDemo toy2 = new ToysDemo();
    toy2.setPrice((float)21.99);
    toy2.setName("small Squid");
    arrayOfToys[numberOfToys++] = toy2;

    //print toys into array
    printToys(arrayOfToys, numberOfToys); //the call
}
} 
```

这是一个真正简单的程序，但令人沮丧的是，正确的输出无法显示。

如果有人能帮助我解决这个难题，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T02:18:16.160

实际上，您正在打印`ToysDemo`对象的引用。为了完成这项`System.out.println(arrayOfToys[i])`工作，您的`ToysDemo`类需要重写`toString`方法。

示例代码：

```
public class ToysDemo {

    //class content...

    @Override
    public String toString() {
        return "My name is: " + name + " and my price is: " + String.format("%.2f", price);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T02:18:48.380

当您调用 时`System.out.print(someToy)`，它会调用`someToy.toString()`并打印结果。
如果你不覆盖`toString()`，你会得到默认值`Object.toString()`，它会打印类名和内存地址。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T02:20:23.543

您需要将函数 toString 添加到 ToysDemo 类。例如：

```
@Override
public String toString()
{
   return "Name: "+name+"\tPrice: "+price;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-31T11:49:21.600

您需要覆盖 Object 类的 toString() 方法。如果您不这样做，JVM 将执行基类方法，该方法默认打印类的完全限定名称，即带有包名称和存储对象的内存地址的类名称，这就是您获得该输出的方式。现在，当您调用 system.out.print 时，它将转到覆盖的方法并实现它。

例如：

```
Employee {
    private String name;
    private int age;

    public void setName(String name) { this.name = name; }
    public String getName() { return this.name; }
    public void setAge(int age) { this.age = age; }
    public int getAge() { return this.age = age; }

    @Override
    public String toString() {
        return "Name of the employee is " + name + " and age is " + age; 
    }

    public static void main(String args[]) {
        Employee e = new Employee();
        e.setName("Robert"); 
        e.setAge(20); 
        System.out.println(e); 
    } 
} 
```

# php - 适用于 PHP 的 AWS 开发工具包示例？

> ID：15725673
> 
> 赞同：0
> 
> 时间：2013-03-31T02:17:18.580
> 
> 标签：php, sdk, amazon-web-services, amazon-ec2, pear

我正在尝试在我的（所有的）AWS EC2 服务器上安装适用于 PHP 的 AWS 开发工具包。我*想*我已经安装了它，但似乎无法弄清楚如何使用它。我能找到的所有代码示例都适用于 S3。我正在寻找一个**PHP 代码示例，用于使用 AWS SDK for PHP v2.x 对Amazon EC2执行*任何***操作。

即使它只是列出了我当前正在运行的实例。没什么特别的，我只需要看看它的工作。

我已经使用 Pear 安装了 SDK。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T14:05:39.283

Victor Smirnow 已经花时间提供了关于[如何使用 Amazon PHP SDK 2 获取 EC2 实例列表](https://stackoverflow.com/a/15233914/45773)（每个 +1）的问题和详细答案 - 因此，您应该简单地查看他的答案以获取更多详细信息，但使用的简短版本根据请求，通过 AWS SDK for PHP 2 [describeInstances](http://docs.aws.amazon.com/aws-sdk-php-2/latest/class-Aws.Ec2.Ec2Client.html#_describeInstances)方法的[DescribeInstances](http://docs.aws.amazon.com/AWSEC2/latest/APIReference/ApiReference-query-DescribeInstances.html) API 操作归结为：

```
$config = array();
$config['key'] = 'key';
$config['secret'] = 'secret';
$config['region'] = 'us-east-1';
$ec2Client = \Aws\Ec2\Ec2Client::factory($config);

$result = $ec2Client->DescribeInstances(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T08:28:09.530

你看过用户指南吗？有一个[快速入门](http://docs.aws.amazon.com/aws-sdk-php-2/guide/latest/quick-start.html)，这里是[S3 的指南](http://docs.aws.amazon.com/aws-sdk-php-2/guide/latest/service-s3.html)。

# python - 在不重启服务器的情况下添加和删除 Django 应用程序？

> ID：15725676
> 
> 赞同：1
> 
> 时间：2013-03-31T02:17:53.953
> 
> 标签：python, django

哪些更改是必要的（如果可能以任何方式）从 django 安装中包含/排除 django 应用程序而不重新启动 nginx 服务器？

特别是，我想在不中断用户输入（文件上传和下载）的情况下向项目添加一个新的（动态创建的）应用程序。项目不需要访问新应用程序，但新应用程序将 url、模型和数据库添加到现有项目中。

到目前为止，我只是在空闲时间重新启动了服务器，但我想要类似的东西：

```
GET
/add/<app_name>/

def add(request, app_name):
  INSTALLED_APPS.append(app_name)
  DATABASES["app-" + app_name] = { db_data }
  DATABASE_ROUTERS += ["apps." + app_name + ".router.Router",]
  … 
```

有可能以任何（简单）方式吗？我还需要修改其他变量吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T04:07:40.803

这是不可能的，也不推荐。您需要重新启动后端服务器（运行 django 进程的 nginx 中的上游服务器）。

另外，我很好奇当你说“动态创建的应用程序”时你在做什么，因为这听起来像是在寻找问题的解决方案。

# c++ - C++0x random_device with 'std::runtime_error'

> ID：15725677
> 
> 赞同：4
> 
> 时间：2013-03-31T02:17:54.310
> 
> 标签：c++, qt, random, c++11

I am a C++ beginner and I have a problem with C++0x random number generator. I wanted to use Mersenne twister engine for generating random int64_t numbers, and I wrote a function using some information I've found earlier:

```
#include <stdint.h>
#include <random>

int64_t MyRandomClass::generateInt64_t(int64_t minValue, int64_t maxValue)
{
    std::random_device rd;
    std::default_random_engine e( rd() );
    unsigned char arr[8];
    for(unsigned int i = 0; i < sizeof(arr); i++)
    {
        arr[i] = (unsigned char)e();
    }
    int64_t number = static_cast<int64_t>(arr[0]) | static_cast<int64_t>(arr[1]) << 8 | static_cast<int64_t>(arr[2]) << 16 | static_cast<int64_t>(arr[3]) << 24 | static_cast<int64_t>(arr[4]) << 32 | static_cast<int64_t>(arr[5]) << 40 | static_cast<int64_t>(arr[6]) << 48 | static_cast<int64_t>(arr[7]) << 56;
    return (std::abs(number % (maxValue - minValue)) + minValue);
} 
```

When I'm trying to use this code in Qt application, I'm getting this error:

```
terminate called after throwing an instance of 'std::runtime_error'
what():  random_device::random_device(const std::string&) 
```

As I said before, I'm not very familiar with C++, but it looked like I had to specify a `const std::string` value. I tried this:

```
const std::string s = "s";
std::random_device rd(s); 
```

But it leads to the same error. How can I avoid it?

I use MinGW 4.7 32bit compiler and Desktop Qt 5.0.1 on Windows platform. I also wrote `QMAKE_CXXFLAGS += -std=c++0x` in .pro file.

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-31T02:27:35.320

This is a bug in MinGW (also detailed in [this SO answer](https://stackoverflow.com/a/12351142/1204143)). Basically, MinGW does not have a Windows-specific implementation of `random_device`, so it just tries to open `/dev/urandom`, fails, and throws `std::runtime_error`.

VS2012's `std::random_device` works, as does simply using `mt19937` or another generator directly.

# r - 如何跨多个布局区域进行绘图

> ID：15725679
> 
> 赞同：3
> 
> 时间：2013-03-31T02:18:05.797
> 
> 标签：r, plot

有时我在创作一个多部分的图形，并且我的布局很复杂，我想在框外绘制。（我形象地和字面地这么说）。

考虑使用`R`基本图形函数`layout()`设置复杂布局的示例：

```
## Define the layout regions
multiPartFigureLayout <- structure(c(4, 4, 1, 1, 2, 2, 3, 3, 8, 8, 
                                         5, 5, 1, 1, 2, 2, 3, 3, 8, 8, 
                                         9, 9, 1, 1, 2, 2, 3, 3, 8, 8, 
                                         6, 6, 1, 1, 2, 2, 3, 3, 8, 8, 
                                         7, 7, 1, 1, 2, 2, 3, 3, 8, 8), 
                                         .Dim = c(10L, 5L))

## Demonstrate the layout
win.graph(4, 5)
layout(multiPartFigureLayout)
layout.show(9) 
```

这将产生以下绘图布局。（我使用图像编辑软件添加了红色文本）

![在此处输入图像描述](https://i.stack.imgur.com/U7h0l.jpg)

这是在框外绘图的一种应用：在所示区域中叠印文本。同样，可能需要叠印另一个图形元素。例如，绘制一个跨越框的规则。

我知道可以扩展`multiPartFigureLayout`矩阵并在上方添加一个可以保存文本或规则的绘图区域。但我不想这样做：我想在多个布局区域上叠印它。

有没有办法使用基本图形来做到这一点，或者为此目的使用功能，或者以某种方式欺骗绘图功能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T02:23:47.383

```
mtext("even longer test of overplotting to see if it extends across the plots" , line=-1, col="red")
?mtext 
```

`mtext`如果您使用负“线”值，则可以在图形区域的内部和边界之间进行注释。（side 参数`mtext`默认为 3 (="top")。如果您尝试使用`text`，您会发现它难以扩展到区域边界之外。我尝试使用 with`xpd=TRUE`作为参数`text`来获取但没有成功。也许使用它with`par()`在`text`调用之前将允许它工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T01:46:21.893

绘制超出当前绘图集的内容`par(xpd=NA)`。您可以使用这些函数在不同的坐标系`grconvertX`之间`grconvertY`进行转换。

您可以通过转换为“ndc”坐标来保存一个绘图中的位置，然后从这些坐标转换为另一个绘图中的用户坐标，您还可以使用这些函数查找相对于当前绘图、图形或设备的坐标以传递到其他功能。一个例子：

```
layout( matrix( c(1,2,3,2), 2 ) )
par(xpd=NA)
with(iris, plot(Sepal.Width, Sepal.Length, col=Species) )
save1.x <- grconvertX( 0.25, from='npc', to='ndc' )
save2.x <- grconvertX( iris$Sepal.Width[1], to='ndc' )
save2.y <- grconvertY( iris$Sepal.Length[1], to='ndc' )
with(iris, plot(Petal.Width, Petal.Length, col=Species) )
with(iris, arrows( Petal.Width[1], Petal.Length[1], 
   grconvertX( save2.x, from='ndc' ), 
   grconvertY( save2.y, from='ndc' ), col='orange' ) )
with( iris, plot( Petal.Length, Sepal.Length, col=Species ) )
segments( grconvertX( 0.75, from='npc' ), grconvertY(0.9, from='npc'),
   grconvertX( save1.x, from='ndc'), col='purple' ) 
```

# html - Float, transformations in css

> ID：15725681
> 
> 赞同：-1
> 
> 时间：2013-03-31T02:18:18.250
> 
> 标签：html, css

Please see this Fiddle - [http://jsfiddle.net/joshnh/73g7t/](http://jsfiddle.net/joshnh/73g7t/)
I am not clear about some of the things in it.

1.  DIV is a block level element(so it starts and ends with a line break). Then why are the divs placed side by side? Does float remove the line breaks of block level elements?
2.  In the definition of `.wrapper div`, the code for rotate - `transform: rotate(15deg);` is already present. Then why is there another `transform: rotate` in `.wrapper .translate` **BUT** not in`.wrapper .transform-origin`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T02:46:18.027

1.  The [CSS spec](http://www.w3.org/TR/CSS2/visuren.html#floats) explains why this is. It's not a line-break, but the [block formatting context](http://www.w3.org/TR/CSS2/visuren.html#block-formatting) is restarted for `float`s.
2.  `.wrapper .translate` overwrites the `transform` rules. If it does not specify `rotate`, the rotation would not occur: [http://jsfiddle.net/73g7t/304/](http://jsfiddle.net/73g7t/304/) -- `transform-origin` is a separate rule.

# c# - 在 Windows 8 中替换 PhotoChooserTask

> ID：15725682
> 
> 赞同：0
> 
> 时间：2013-03-31T02:18:28.360
> 
> 标签：c#, xaml, windows-8, windows-runtime

我正在开发一个 Windows 8 应用程序，并希望提示用户提供图像。

对于 Windows Phone，我会使用 PhotoChooserTask，指定所需的像素高度和宽度，并且相机是可接受的输入方法。

我发现在 Windows 8 中我需要使用 CameraCaptureUI 或 FileOpenPicker 来为用户提供类似的选项。我还需要使用 FileOpenPicker 手动将生成的图像处理为所需的尺寸。CameraCaptureUI 具有内置的裁剪控件。

是否有我可以使用的库或控件来提供与 Windows Phone PhotoChooserTask 类似的功能？或者我可以访问 CameraCaptureUI 的裁剪控制部分吗？

具体来说，我想提示用户输入特定尺寸的图像。然后，他们可以从文件中选择图像或通过相机捕获新图像。一旦他们有了图像，他们就会看到一个 UI 来将其裁剪到我需要的尺寸。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T02:45:59.627

CameraCaptureUI 是正确的方法。您可以指定照片捕获的属性，如本文档中所述：http: [//msdn.microsoft.com/en-us/library/windows/apps/windows.media.capture.cameracaptureui.photosettings](http://msdn.microsoft.com/en-us/library/windows/apps/windows.media.capture.cameracaptureui.photosettings)

它将为用户提供一个很好的界面来拍照和裁剪/调整大小，就像在 Windows Phone 中一样！

```
// Takes a photo with specified settings.
function takePhoto() {
    var captureUI = new Windows.Media.Capture.CameraCaptureUI();
    captureUI.photoSettings.allowCropping = true;
    captureUI.photoSettings.croppedAspectRatio.height = 3;
    captureUI.photoSettings.croppedAspectRatio.width = 4;
    captureUI.photoSettings.croppedSizeInPixels.height = 0;
    captureUI.photoSettings.croppedSizeInPixels.width = 0;
    captureUI.photoSettings.format = Windows.Media.Capture.CameraCaptureUIPhotoFormat.jpeg;
    captureUI.photoSettings.maxResolution = Windows.Media.Capture.CameraCaptureUIMaxPhotoResolution.highestAvailable;
    captureUI.captureFileAsync(Windows.Media.Capture.CameraCaptureUIMode.photo).then(function (capturedItem) {
        if (capturedItem) {
            document.getElementById("message").innerHTML = "User captured a photo."
        }
        else {
            document.getElementById("message").innerHTML = "User didn't capture a photo."
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T02:49:21.423

您可以为用户提供一个可供选择的按钮，然后允许他们选择任一相机，或使用像 Calisto 中的菜单一样的现有相机。或者您可以为他们提供两个按钮。使用 Windows 8，您拥有比手机更多的空间。

直接去图片，可以设置FileOpenPicker的[SuggestedStartLocation](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.pickers.fileopenpicker.suggestedstartlocation.aspx?cs-save-lang=1&cs-lang=csharp#code-snippet-1)。此属性接受[PickerLoctionId](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.pickers.pickerlocationid.aspx)。您应该将其设置为`PickerLoctionId.PicturesLibrary`

# jquery - 如何收集身份证

> ID：15725686
> 
> 赞同：0
> 
> 时间：2013-03-31T02:19:38.100
> 
> 标签：jquery

如何使用 jquery 收集点击跨度的 id？

我试过的

```
 $('.move-up').click(function(){
        if ($(this).prev())
            $(this).parent().insertBefore($(this).parent().prev());
    });
    $('.move-down').click(function(){
        if ($(this).next())
            $(this).parent().insertAfter($(this).parent().next());
    });

var ids
$('span[id^="text_"]').click(function() {
    $(this).toggleClass("highlight");
    ids += $('span[id^="text_"]');
    alert(ids);
}); 
```

[http://jsfiddle.net/7W7Jz/13/](http://jsfiddle.net/7W7Jz/13/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T02:24:29.507

然后，为 ids 创建一个数组

```
clicked_ids = new Array();
$('span[id^="text_"]').click(function() {
    $(this).toggleClass("highlight");
    clicked_ids.push($(this).attr('id'));
    alert(clicked_ids); 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T02:21:16.230

```
$('.move-up').click(function() {
  var myParentSpan = $(this).parents('span');
  var myParentSpanId = myParentSpan.attr('id');
  var mySpanTextContent = myParentSpan.find('span[id^="text"]').html();
  // Your code here.
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T02:25:14.687

试试这个

```
$('.move-up').click(function() {
  var spanId = this.id;
}); 
```

# objective-c - NSBezierPath : 用 2 或 3 种颜色描边

> ID：15725687
> 
> 赞同：0
> 
> 时间：2013-03-31T02:19:47.993
> 
> 标签：objective-c, cocoa, nsbezierpath

我正在尝试重新创建一个看起来像 Dock 上下文菜单的菜单。

我正在使用`NSBezierPath`. 如您所见，Dock 菜单的边框在边框上有 3 种半透明颜色。

从内到外：

*   HSB 0;0;7% Op 91%（黑色）1px 宽度
*   HSB 0;0;53% Op 38%（灰色）2px 宽度
*   HSB 0;0;0 Op 41%（黑色）1px 宽度

我怎么能把这些边界画到我的`NSBezierPath`?

PS：使用模式（`[NSColor colorWithPatternImage:]`）不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T10:10:43.030

路径只是几何图形。它们没有颜色。颜色是图形上下文的一部分，会影响描边或填充操作。

所以，是的，一种选择是划几条路径而不是一条。

另一种可能的方法是使用[`NSDrawNinePartImage()`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Miscellaneous/AppKit_Functions/Reference/reference.html#//apple_ref/doc/uid/20000695-SW63)预渲染图像（位图或矢量/PDF）。

# jquery - How best to capture referring URL in form using cookie?

> ID：15725695
> 
> 赞同：0
> 
> 时间：2013-03-31T02:21:23.677
> 
> 标签：jquery, wordpress, cookies

I'm using the Wordpress Contact Form 7, setting a Cookie refurl using the Cookie Monster plugin. Using these tools (or any other), what is the easiest way to set a cookie that captures the referring URL and then adds this to a hidden field in a Contact Us form?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T02:24:41.587

With the [cookie plugin](https://github.com/carhartl/jquery-cookie).

Let's say that the cookie is called `"refurl"`

You can access it using:

```
var refURL = $.cookie("test"); 
```

You can append an element to your form by selecting it and adding the input to it. Let's say the `id` of your form is `ContactUsForm` :

```
var $el = $("<input />").attr("type","hidden").attr("value",refURL);
$("#ContactUsForm").append($el); 
```

# php - 在默认问题上检查 PHP/HTML 单选按钮

> ID：15725697
> 
> 赞同：0
> 
> 时间：2013-03-31T02:21:59.257
> 
> 标签：php, html, mysql, radio, checked

基于 PHP/MySQL 创建单选按钮集

默认情况下检查按钮有问题：它看起来像：

[![](https://i.stack.imgur.com/eilX2.png)](https://i.stack.imgur.com/eilX2.png)

编码：

```
$first = TRUE;
if (mysql_num_rows($result))
{
   for ($j = 0; $j < mysql_num_rows($result); $j++)
   {
     $currentCat = mysql_result($result, $j, 'category');
     if ($first == TRUE)
     {
       $first = FALSE;
       echo "<input type='radio' name='createCat' value='$currentCat' checked='checked' />$currentCat checked";
     }
     else
     {
       echo "<input type='radio' name='createCat' value='$currentCat' />$currentCat ";
       echo "non";
     }
   }
   echo <<<_END
   <br /><input type='submit' value='Create' /> $error
   </form>
_END;
} 
```

注意第一个框没有被选中 HTML 中的输出：

```
<input type='radio' name='createCat' value='opt1' checked='checked' />opt1  checked<input type='radio' name='createCat' value='opt2' />opt2 non<input type='radio' name='createCat' value='Accounts' />Accounts non             <br /><input type='submit' value='Create' /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-09T19:46:50.263

将您的第一个选项更改为如下所示，它应该默认为选中：

```
echo "<input type='radio' name='createCat' value='$currentCat' checked/>$currentCat checked"; 
```

请注意，您有

```
checked="checked" 
```

删除 ="checked" 部分将解决问题。

# javascript - Javascript event not working on load

> ID：15725704
> 
> 赞同：0
> 
> 时间：2013-03-31T02:22:51.040
> 
> 标签：javascript

I have a JavaScript event which calculates a price of something according to 2 variables (price and days that the product is used). The function is called on the 2 input elements like this: `onkeyup=calc(this.form)`, this works like a charm.

I've connected a DB with these 2 values and echo-ed them as values of the two input elements (which is successful) and added this to make the function happen when the page is loaded:

```
<script type="text/javascript">
    window.onload = function()
         {
             calc(form);
         }; 
</script> 
```

The problem is that the result of the calculation doesn't show up until I do something with one of the input elements.

The live version can be seen over here: [http://www.websane.nl/macbook/opgeslagen.php?id=1](http://www.websane.nl/macbook/opgeslagen.php?id=1)

Do you know what the problem is?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T02:35:50.110

The problem is that the `form` in the statement `calc(form);` isn't anything--it's undefined. Which makes sense--not only can there be many forms in an HTML document (so it could never automatically work), you never bound the `form` variable to any one of them. To get a reference to a *particular* form, you can use several techniques:

*   `document.getElementsbyTagName('form')[0]`
*   `document.forms[0]`
*   `document.forms.formname`
*   `document.getElementById('theFormId')`

Replace `form` in your `onload` event with one of the above and things should work. There could be many other ways to get a reference to a form.

# c++ - Compile error for simple function inside of namespace in static library

> ID：15725706
> 
> 赞同：1
> 
> 时间：2013-03-31T02:23:19.600
> 
> 标签：c++, compiler-errors, static-libraries

I'm running into a weird challenge: My static library builds and can be used without these logging functions, but when I include them I cannot compile code that includes dove.h and then links against libdove.a. I originally moved all of the log functions outside of the dove namespace and declared/defined them inside dove.cpp, and that worked. However, it leaks the function signatures and I would like to reuse them in an independent project.

dove.h:

```
namespace dove {
  /* Many functions and classes */

  void log(const char* msg, int level); 
  void info(const char* msg);                                                                                                 
  void error(const char* msg);
  void debug(const char* msg);
} 
```

dove.cpp:

```
void dove::log(const char* msg, int level) {
  if (level <= LOG_LEVEL)
    std::cout << "dove: " << msg << std::endl;
}

void dove::info(const char* msg) { log(msg, LOG_INFO); }
void dove::error(const char* msg) { log(msg, LOG_ERROR); }
void dove::debug(const char* msg) { log(msg, LOG_DEBUG); } 
```

dove Makefile section:

```
all:                                                                                                                            
  $(CXX) -c $(CFLAGS) $(INC) -o dove.o dove.cpp
  ar rvs libdove.a dove.o      
  ranlib libdove.a 
```

All of these build completely fine! I get libdove.a and everything seems happy. However, when I have a line `#include "dove.h"` in a different project, I get the following compile error on dove.h:

```
make[1]: Entering directory `<omitted>/dove'
g++ -c -g  -Ilibs/rapidxml-1.13 -o dove.o dove.cpp
ar rvs libdove.a dove.o
ar: creating libdove.a
a - dove.o
ranlib libdove.a
make[1]: Leaving directory `<omitted>/dove'
cd <omitted> && make
make[1]: Entering directory `<omitted>'
g++  -g  -c -o build/graph.o src/utils/graph.cpp
g++  -g  -c -o build/util.o src/utils/util.cpp
g++ -g  -I<omitted>/dove -Isrc/utils -c -o build/mps.o src/mps.cpp 
In file included from src/mps.cpp:13:
<omitted>/dove/dove.h:247: error: expected ‘,’ or ‘...’ before string constant
<omitted>/dove/dove.h:250: error: expected ‘,’ or ‘...’ before string constant
make[1]: *** [bin/hybrid] Error 1 
```

These errors *always* happen on log and debug. Never on info and error. I've placed them in multiple places in the dove namespace (top, middle, separated declarations, bottom) and these two are always complaining.

Makefile for sub-project:

```
# Contains libdove.a
DOVE_ROOT    ?= $(CURDIR)/../../dove
LIBS         := -L$(DOVE_ROOT) -ldove
INC          := -I$(DOVE_ROOT) -Isrc/utils                                                                                      
CXXFLAGS     += -g  

all: $(util_o)
  $(CXX) $(CXXFLAGS) $(INC) -c -o build/mps.o src/mps.cpp 
  $(CXX) $(CXXFLAGS) -o bin/hybrid build/*.o $(LIBS) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T12:15:05.200

Following comments to the original question, it would appear that there is a conflict between some macros and the function names used in the relevant code.

This can be determined by the fact that the error message doesn't make sense for the actual line of code - there is no "string constant" in the relevant line.

The fix is either to `#undef log` and `#undef debug` or to use different names for either the macros or the functions.

[Another argument for not using lower-case macro names!]

# ruby-on-rails - ActiveRecord::Save 的参数数量错误（0 表示 1）

> ID：15725707
> 
> 赞同：3
> 
> 时间：2013-03-31T02:23:26.803
> 
> 标签：ruby-on-rails, ruby-on-rails-4

我使用 Rails 4 收到此错误：

```
wrong number of arguments (0 for 1) 
```

在控制器中运行此代码时：

```
class CommentsController < ApplicationController
  def create
    @comment = @current_user.comments.build(comment_params)
    if @comment.save
      redirect_to :back, flash: { success: "Comment was updated." }
    else
      redirect_to :back, flash: { error: "There was an issue with your comment." }, comment: { content: params[:comment][:content] }
    end
  end

  private

    def comment_params
        params.require(:comment).permit(:post_id, :content)
    end
end 
```

这是模型：

```
class Comment < ActiveRecord::Base
  belongs_to :post

  belongs_to :user

  validates_presence_of :content

  validates_length_of :attribute, minimum: 20
end 
```

这是堆栈跟踪：

```
block in ActiveModel::Validations::LengthValidator#validate
/home/user/.rvm/gems/ruby-1.9.3-p194/bundler/gems/rails-8744632fb564/activemodel/lib/active_model/validator.rb, line 151
ActiveModel::Validations::LengthValidator#validate
/home/user/.rvm/gems/ruby-1.9.3-p194/bundler/gems/rails-8744632fb564/activemodel/lib/active_model/validator.rb, line 150
Comment#_callback_before_112
/home/user/.rvm/gems/ruby-1.9.3-p194/bundler/gems/rails-8744632fb564/activesupport/lib/active_support/callbacks.rb, line 281
Comment#_run__664310716__validate__callbacks
/home/user/.rvm/gems/ruby-1.9.3-p194/bundler/gems/rails-8744632fb564/activesupport/lib/active_support/callbacks.rb, line 388
Comment#run_callbacks
/home/user/.rvm/gems/ruby-1.9.3-p194/bundler/gems/rails-8744632fb564/activesupport/lib/active_support/callbacks.rb, line 78
Comment#run_validations!
/home/user/.rvm/gems/ruby-1.9.3-p194/bundler/gems/rails-8744632fb564/activemodel/lib/active_model/validations.rb, line 330
block in Comment#run_validations!
/home/user/.rvm/gems/ruby-1.9.3-p194/bundler/gems/rails-8744632fb564/activemodel/lib/active_model/validations/callbacks.rb, line 106
Comment#_run__664310716__validation__callbacks
/home/user/.rvm/gems/ruby-1.9.3-p194/bundler/gems/rails-8744632fb564/activesupport/lib/active_support/callbacks.rb, line 374
Comment#run_callbacks
/home/user/.rvm/gems/ruby-1.9.3-p194/bundler/gems/rails-8744632fb564/activesupport/lib/active_support/callbacks.rb, line 78
Comment#run_validations!
/home/user/.rvm/gems/ruby-1.9.3-p194/bundler/gems/rails-8744632fb564/activemodel/lib/active_model/validations/callbacks.rb, line 106
Comment#valid?
/home/user/.rvm/gems/ruby-1.9.3-p194/bundler/gems/rails-8744632fb564/activemodel/lib/active_model/validations.rb, line 271
Comment#valid?
/home/user/.rvm/gems/ruby-1.9.3-p194/bundler/gems/rails-8744632fb564/activerecord/lib/active_record/validations.rb, line 70
Comment#perform_validations
/home/user/.rvm/gems/ruby-1.9.3-p194/bundler/gems/rails-8744632fb564/activerecord/lib/active_record/validations.rb, line 78
Comment#save!
/home/user/.rvm/gems/ruby-1.9.3-p194/bundler/gems/rails-8744632fb564/activerecord/lib/active_record/validations.rb, line 57
Comment#save!
/home/user/.rvm/gems/ruby-1.9.3-p194/bundler/gems/rails-8744632fb564/activerecord/lib/active_record/attribute_methods/dirty.rb, line 41
block in Comment#save!
/home/user/.rvm/gems/ruby-1.9.3-p194/bundler/gems/rails-8744632fb564/activerecord/lib/active_record/transactions.rb, line 275
block in Comment#with_transaction_returning_status
/home/user/.rvm/gems/ruby-1.9.3-p194/bundler/gems/rails-8744632fb564/activerecord/lib/active_record/transactions.rb, line 326
block in ActiveRecord::ConnectionAdapters::PostgreSQLAdapter#transaction
/home/user/.rvm/gems/ruby-1.9.3-p194/bundler/gems/rails-8744632fb564/activerecord/lib/active_record/connection_adapters/abstract/database_statements.rb, line 202
ActiveRecord::ConnectionAdapters::PostgreSQLAdapter#within_new_transaction
/home/user/.rvm/gems/ruby-1.9.3-p194/bundler/gems/rails-8744632fb564/activerecord/lib/active_record/connection_adapters/abstract/database_statements.rb, line 210
ActiveRecord::ConnectionAdapters::PostgreSQLAdapter#transaction
/home/user/.rvm/gems/ruby-1.9.3-p194/bundler/gems/rails-8744632fb564/activerecord/lib/active_record/connection_adapters/abstract/database_statements.rb, line 202
Comment.transaction
/home/user/.rvm/gems/ruby-1.9.3-p194/bundler/gems/rails-8744632fb564/activerecord/lib/active_record/transactions.rb, line 209
Comment#with_transaction_returning_status
/home/user/.rvm/gems/ruby-1.9.3-p194/bundler/gems/rails-8744632fb564/activerecord/lib/active_record/transactions.rb, line 323
Comment#save!
/home/user/.rvm/gems/ruby-1.9.3-p194/bundler/gems/rails-8744632fb564/activerecord/lib/active_record/transactions.rb, line 275
CommentsController#create
app/controllers/comments_controller.rb, line 4
CommentsController#send_action
/home/user/.rvm/gems/ruby-1.9.3-p194/bundler/gems/rails-8744632fb564/actionpack/lib/action_controller/metal/implicit_render.rb, line 4
CommentsController#process_action
/home/user/.rvm/gems/ruby-1.9.3-p194/bundler/gems/rails-8744632fb564/actionpack/lib/abstract_controller/base.rb, line 189
CommentsController#process_action
/home/user/.rvm/gems/ruby-1.9.3-p194/bundler/gems/rails-8744632fb564/actionpack/lib/action_controller/metal/rendering.rb, line 10
block in CommentsController#process_action
/home/user/.rvm/gems/ruby-1.9.3-p194/bundler/gems/rails-8744632fb564/actionpack/lib/abstract_controller/callbacks.rb, line 18
CommentsController#_run__1046107247__process_action__callbacks
/home/user/.rvm/gems/ruby-1.9.3-p194/bundler/gems/rails-8744632fb564/activesupport/lib/active_support/callbacks.rb, line 414
CommentsController#run_callbacks
/home/user/.rvm/gems/ruby-1.9.3-p194/bundler/gems/rails-8744632fb564/activesupport/lib/active_support/callbacks.rb, line 78
CommentsController#process_action
/home/user/.rvm/gems/ruby-1.9.3-p194/bundler/gems/rails-8744632fb564/actionpack/lib/abstract_controller/callbacks.rb, line 17
CommentsController#process_action
/home/user/.rvm/gems/ruby-1.9.3-p194/bundler/gems/rails-8744632fb564/actionpack/lib/action_controller/metal/rescue.rb, line 29
block in CommentsController#process_action
/home/user/.rvm/gems/ruby-1.9.3-p194/bundler/gems/rails-8744632fb564/actionpack/lib/action_controller/metal/instrumentation.rb, line 31
block in ActiveSupport::Notifications.instrument
/home/user/.rvm/gems/ruby-1.9.3-p194/bundler/gems/rails-8744632fb564/activesupport/lib/active_support/notifications.rb, line 158
ActiveSupport::Notifications::Instrumenter#instrument
/home/user/.rvm/gems/ruby-1.9.3-p194/bundler/gems/rails-8744632fb564/activesupport/lib/active_support/notifications/instrumenter.rb, line 20
ActiveSupport::Notifications.instrument
/home/user/.rvm/gems/ruby-1.9.3-p194/bundler/gems/rails-8744632fb564/activesupport/lib/active_support/notifications.rb, line 158
CommentsController#process_action
/home/user/.rvm/gems/ruby-1.9.3-p194/bundler/gems/rails-8744632fb564/actionpack/lib/action_controller/metal/instrumentation.rb, line 30
CommentsController#process_action
/home/user/.rvm/gems/ruby-1.9.3-p194/bundler/gems/rails-8744632fb564/actionpack/lib/action_controller/metal/params_wrapper.rb, line 245
CommentsController#process_action
/home/user/.rvm/gems/ruby-1.9.3-p194/bundler/gems/rails-8744632fb564/activerecord/lib/active_record/railties/controller_runtime.rb, line 18
CommentsController#process
/home/user/.rvm/gems/ruby-1.9.3-p194/bundler/gems/rails-8744632fb564/actionpack/lib/abstract_controller/base.rb, line 136
CommentsController#process
/home/user/.rvm/gems/ruby-1.9.3-p194/bundler/gems/rails-8744632fb564/actionpack/lib/abstract_controller/rendering.rb, line 44
CommentsController#dispatch
/home/user/.rvm/gems/ruby-1.9.3-p194/bundler/gems/rails-8744632fb564/actionpack/lib/action_controller/metal.rb, line 196
CommentsController#dispatch
/home/user/.rvm/gems/ruby-1.9.3-p194/bundler/gems/rails-8744632fb564/actionpack/lib/action_controller/metal/rack_delegation.rb, line 13
block in CommentsController.action
/home/user/.rvm/gems/ruby-1.9.3-p194/bundler/gems/rails-8744632fb564/actionpack/lib/action_controller/metal.rb, line 232
ActionDispatch::Routing::RouteSet::Dispatcher#dispatch
/home/user/.rvm/gems/ruby-1.9.3-p194/bundler/gems/rails-8744632fb564/actionpack/lib/action_dispatch/routing/route_set.rb, line 80
ActionDispatch::Routing::RouteSet::Dispatcher#call
/home/user/.rvm/gems/ruby-1.9.3-p194/bundler/gems/rails-8744632fb564/actionpack/lib/action_dispatch/routing/route_set.rb, line 48
block in ActionDispatch::Journey::Router#call
/home/user/.rvm/gems/ruby-1.9.3-p194/bundler/gems/rails-8744632fb564/actionpack/lib/action_dispatch/journey/router.rb, line 69
ActionDispatch::Journey::Router#call
/home/user/.rvm/gems/ruby-1.9.3-p194/bundler/gems/rails-8744632fb564/actionpack/lib/action_dispatch/journey/router.rb, line 57
ActionDispatch::Routing::RouteSet#call
/home/user/.rvm/gems/ruby-1.9.3-p194/bundler/gems/rails-8744632fb564/actionpack/lib/action_dispatch/routing/route_set.rb, line 645
ClientSideValidations::Middleware::Validators#call
/home/user/.rvm/gems/ruby-1.9.3-p194/bundler/gems/client_side_validations-6855ba7031d4/lib/client_side_validations/middleware.rb, line 21
Rack::ETag#call
(gem) rack-1.5.2/lib/rack/etag.rb, line 23
Rack::ConditionalGet#call
(gem) rack-1.5.2/lib/rack/conditionalget.rb, line 35
Rack::Head#call
(gem) rack-1.5.2/lib/rack/head.rb, line 11
ActionDispatch::ParamsParser#call
/home/user/.rvm/gems/ruby-1.9.3-p194/bundler/gems/rails-8744632fb564/actionpack/lib/action_dispatch/middleware/params_parser.rb, line 27
ActionDispatch::Flash#call
/home/user/.rvm/gems/ruby-1.9.3-p194/bundler/gems/rails-8744632fb564/actionpack/lib/action_dispatch/middleware/flash.rb, line 241
ActionDispatch::Session::EncryptedCookieStore#context
(gem) rack-1.5.2/lib/rack/session/abstract/id.rb, line 225
ActionDispatch::Session::EncryptedCookieStore#call
(gem) rack-1.5.2/lib/rack/session/abstract/id.rb, line 220
ActionDispatch::Cookies#call
/home/user/.rvm/gems/ruby-1.9.3-p194/bundler/gems/rails-8744632fb564/actionpack/lib/action_dispatch/middleware/cookies.rb, line 452
ActiveRecord::QueryCache#call
/home/user/.rvm/gems/ruby-1.9.3-p194/bundler/gems/rails-8744632fb564/activerecord/lib/active_record/query_cache.rb, line 36
ActiveRecord::ConnectionAdapters::ConnectionManagement#call
/home/user/.rvm/gems/ruby-1.9.3-p194/bundler/gems/rails-8744632fb564/activerecord/lib/active_record/connection_adapters/abstract/connection_pool.rb, line 632
ActiveRecord::Migration::CheckPending#call
/home/user/.rvm/gems/ruby-1.9.3-p194/bundler/gems/rails-8744632fb564/activerecord/lib/active_record/migration.rb, line 366
block in ActionDispatch::Callbacks#call
/home/user/.rvm/gems/ruby-1.9.3-p194/bundler/gems/rails-8744632fb564/actionpack/lib/action_dispatch/middleware/callbacks.rb, line 29
ActionDispatch::Callbacks#_run__81458556__call__callbacks
/home/user/.rvm/gems/ruby-1.9.3-p194/bundler/gems/rails-8744632fb564/activesupport/lib/active_support/callbacks.rb, line 374
ActionDispatch::Callbacks#run_callbacks
/home/user/.rvm/gems/ruby-1.9.3-p194/bundler/gems/rails-8744632fb564/activesupport/lib/active_support/callbacks.rb, line 78
ActionDispatch::Callbacks#call
/home/user/.rvm/gems/ruby-1.9.3-p194/bundler/gems/rails-8744632fb564/actionpack/lib/action_dispatch/middleware/callbacks.rb, line 27
ActionDispatch::Reloader#call
/home/user/.rvm/gems/ruby-1.9.3-p194/bundler/gems/rails-8744632fb564/actionpack/lib/action_dispatch/middleware/reloader.rb, line 64
ActionDispatch::RemoteIp#call
/home/user/.rvm/gems/ruby-1.9.3-p194/bundler/gems/rails-8744632fb564/actionpack/lib/action_dispatch/middleware/remote_ip.rb, line 76
BetterErrors::Middleware#protected_app_call
(gem) better_errors-0.7.2/lib/better_errors/middleware.rb, line 84
BetterErrors::Middleware#better_errors_call
(gem) better_errors-0.7.2/lib/better_errors/middleware.rb, line 79
BetterErrors::Middleware#call
(gem) better_errors-0.7.2/lib/better_errors/middleware.rb, line 56
ActionDispatch::DebugExceptions#call
/home/user/.rvm/gems/ruby-1.9.3-p194/bundler/gems/rails-8744632fb564/actionpack/lib/action_dispatch/middleware/debug_exceptions.rb, line 17
ActionDispatch::ShowExceptions#call
/home/user/.rvm/gems/ruby-1.9.3-p194/bundler/gems/rails-8744632fb564/actionpack/lib/action_dispatch/middleware/show_exceptions.rb, line 30
Rails::Rack::Logger#call_app
/home/user/.rvm/gems/ruby-1.9.3-p194/bundler/gems/rails-8744632fb564/railties/lib/rails/rack/logger.rb, line 38
block in Rails::Rack::Logger#call
/home/user/.rvm/gems/ruby-1.9.3-p194/bundler/gems/rails-8744632fb564/railties/lib/rails/rack/logger.rb, line 21
block in ActiveSupport::Logger#tagged
/home/user/.rvm/gems/ruby-1.9.3-p194/bundler/gems/rails-8744632fb564/activesupport/lib/active_support/tagged_logging.rb, line 67
ActiveSupport::Logger::SimpleFormatter#tagged
/home/user/.rvm/gems/ruby-1.9.3-p194/bundler/gems/rails-8744632fb564/activesupport/lib/active_support/tagged_logging.rb, line 25
ActiveSupport::Logger#tagged
/home/user/.rvm/gems/ruby-1.9.3-p194/bundler/gems/rails-8744632fb564/activesupport/lib/active_support/tagged_logging.rb, line 67
Rails::Rack::Logger#call
/home/user/.rvm/gems/ruby-1.9.3-p194/bundler/gems/rails-8744632fb564/railties/lib/rails/rack/logger.rb, line 21
ActionDispatch::RequestId#call
/home/user/.rvm/gems/ruby-1.9.3-p194/bundler/gems/rails-8744632fb564/actionpack/lib/action_dispatch/middleware/request_id.rb, line 21
Rack::MethodOverride#call
(gem) rack-1.5.2/lib/rack/methodoverride.rb, line 21
Rack::Runtime#call
(gem) rack-1.5.2/lib/rack/runtime.rb, line 17
ActiveSupport::Cache::Strategy::LocalCache::Middleware#call
/home/user/.rvm/gems/ruby-1.9.3-p194/bundler/gems/rails-8744632fb564/activesupport/lib/active_support/cache/strategy/local_cache.rb, line 72
Rack::Lock#call
(gem) rack-1.5.2/lib/rack/lock.rb, line 17
ActionDispatch::Static#call
/home/user/.rvm/gems/ruby-1.9.3-p194/bundler/gems/rails-8744632fb564/actionpack/lib/action_dispatch/middleware/static.rb, line 64
Fourpointohblog::Application#call
/home/user/.rvm/gems/ruby-1.9.3-p194/bundler/gems/rails-8744632fb564/railties/lib/rails/engine.rb, line 511
Fourpointohblog::Application#call
/home/user/.rvm/gems/ruby-1.9.3-p194/bundler/gems/rails-8744632fb564/railties/lib/rails/application.rb, line 96
Rack::ContentLength#call
(gem) rack-1.5.2/lib/rack/content_length.rb, line 14
block in Thin::Connection#pre_process
(gem) thin-1.5.0/lib/thin/connection.rb, line 81
Thin::Connection#pre_process
(gem) thin-1.5.0/lib/thin/connection.rb, line 79
Thin::Connection#process
(gem) thin-1.5.0/lib/thin/connection.rb, line 54
Thin::Connection#receive_data
(gem) thin-1.5.0/lib/thin/connection.rb, line 39
EventMachine.run
(gem) eventmachine-1.0.3/lib/eventmachine.rb, line 187
Thin::Backends::TcpServer#start
(gem) thin-1.5.0/lib/thin/backends/base.rb, line 63
Thin::Server#start
(gem) thin-1.5.0/lib/thin/server.rb, line 159
Rack::Handler::Thin.run
(gem) rack-1.5.2/lib/rack/handler/thin.rb, line 16
Rails::Server#start
(gem) rack-1.5.2/lib/rack/server.rb, line 264
Rails::Server#start
/home/user/.rvm/gems/ruby-1.9.3-p194/bundler/gems/rails-8744632fb564/railties/lib/rails/commands/server.rb, line 83
block in <top (required)>
/home/user/.rvm/gems/ruby-1.9.3-p194/bundler/gems/rails-8744632fb564/railties/lib/rails/commands.rb, line 80
<top (required)>
/home/user/.rvm/gems/ruby-1.9.3-p194/bundler/gems/rails-8744632fb564/railties/lib/rails/commands.rb, line 75
<main>
script/rails, line 6
<main>
script/rails, line 0 
```

我试过拨打以下电话，但他们没有工作

*   `@coment.save!`
*   `@comment.save(@comment)`

为什么会导致这个问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-31T02:38:42.423

您不能`attribute`在`ActiveRecord`模型中调用列，因为`attribute`它是`ActiveRecord::Base`类的私有方法。

将您的列名更改为其他内容，它将起作用。

# php - 从 db 按季节对剧集进行分组

> ID：15725713
> 
> 赞同：0
> 
> 时间：2013-03-31T02:24:28.257
> 
> 标签：php, mysql

我有数据库，其中包含有关电视连续剧的信息，如下所示：

```
name - Californication
episode - 3
season - 6

name - Californication
episode - 4
season - 6
..
name - Californication
episode - 1
season - 7 
```

我想得到这样的输出：

```
Season 6:
episode 3
episode 4

Season 7:
episode 1
episode 2
.... 
```

尝试了好几种方法，甚至都成功了，不过我相信还是在这里求个轻的方法比较好。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T02:30:35.660

我会在 PHP 中完成所有的分组。

```
$seasons = array();
while ($row = $result->fetch()) {
    if (!isset($seasons[$row->season]) {
        $seasons[$row->season] = array();
    }
    $seasons[$row->season][] = $row->episode;
} 
```

结果是多维数组，每个季节作为键，其剧集数组作为值。

# twitter-bootstrap - 你如何让 Twitter Bootstrap Accordion 保持一组开放？

> ID：15725717
> 
> 赞同：46
> 
> 时间：2013-03-31T02:25:02.157
> 
> 标签：twitter-bootstrap, accordion, twitter-bootstrap-3

我正在尝试使用手风琴和折叠插件使用 Twitter 引导程序来模仿 Outlook 栏，到目前为止，我得到了折叠和手风琴的工作，但它目前允许折叠所有部分。

我想限制它，以便始终显示一个且只有一个。

这是我正在研究的一个：http: [//jsfiddle.net/trajano/SMT9D/](http://jsfiddle.net/trajano/SMT9D/)，我认为它在某个地方

```
$('#accordions').on('hide', function (event) {
  console.warn("HIDE TRIGGERED, check if trying to hide the active one if so stop");
}) 
```

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2013-03-31T03:00:31.553

这是一个简单的方法：

## 引导程序 4

```
$('.accordion .btn-link').on('click', function(e) { 
  if (!$(this).hasClass('collapsed')) { 
    e.stopPropagation(); 
  } 
}); 
```

来自评论中的@mr_joncollette

## 引导程序 3

**用于 Bootstrap 3 的[JsFiddle 。](http://jsfiddle.net/dozoisch/SMT9D/45/)**

*引导程序 3 的代码：*

```
$('.panel-heading a').on('click',function(e){
    if($(this).parents('.panel').children('.panel-collapse').hasClass('in')){
        e.stopPropagation();
    }
    // You can also add preventDefault to remove the anchor behavior that makes
    // the page jump
    // e.preventDefault();
}); 
```

代码检查单击的元素是否是当前显示的元素*（由“in”类）*，如果它确实具有“in”类，它会停止隐藏过程。

* * *

## 已弃用的引导程序 2

**[引导程序 2 的JsFiddle](http://jsfiddle.net/dozoisch/SMT9D/2/)。**

*引导程序 2 的代码：*

```
$('.accordion-toggle').on('click',function(e){
    if($(this).parents('.accordion-group').children('.accordion-body').hasClass('in')){
        e.stopPropagation();
    }
    // You can also add preventDefault to remove the anchor behavior that makes
    // the page jump
    // e.preventDefault();
}); 
```

* * *

**注意：** *如果要在手风琴上附加更多点击事件，请小心，因为这`e.stopPropagation()`将阻止检查后发生的事件。*

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-03-21T12:35:55.310

我想准确@Hugo Dozois 的回答

[http://jsfiddle.net/SMT9D/61/](http://jsfiddle.net/SMT9D/61/)

**如果页面中有滚动条，**则应添加`e.preventDefault();` **以防止 HTML 锚的默认行为`#`**

```
$('.panel-heading a').on('click',function(e){
    if($(this).parents('.panel').children('.panel-collapse').hasClass('in')){
        e.preventDefault();
        e.stopPropagation();
    }
}); 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2018-03-15T18:03:47.580

***2018 年更新***

以下是如何在 Bootstrap v3 或 v4 中至少保持打开状态。这意味着**打开的手风琴*只能*通过切换另一个打开来关闭**。

**引导程序 4**

[https://www.codeply.com/go/bbCcnl0jBB](https://www.codeply.com/go/bbCcnl0jBB)

```
// the current open accordion will not be able to close itself
$('[data-toggle="collapse"]').on('click',function(e){
    if ( $(this).parents('.accordion').find('.collapse.show') ){
        var idx = $(this).index('[data-toggle="collapse"]');
        if (idx == $('.collapse.show').index('.collapse')) {
            e.stopPropagation();
        }
    }
}); 
```

另外，[请参阅此答案](https://stackoverflow.com/a/49489539/171456)，该答案显示了如何指定将在所有其他手风琴关闭时打开的“默认”手风琴。

* * *

**引导程序 3**

```
$('[data-toggle="collapse"]').on('click',function(e){
    if($(this).parents('.panel').find('.collapse').hasClass('in')){
        var idx = $(this).index('[data-toggle="collapse"]');
        var idxShown = $('.collapse.in').index('.accordion-body');
        if (idx==idxShown) {
            e.stopPropagation();
        }
    }
}); 
```

[https://www.codeply.com/go/yLw944BrgA](https://www.codeply.com/go/yLw944BrgA)

```
<div class="accordion" id="myAccordion">
    <div class="panel">
        <button type="button" class="btn btn-danger" data-toggle="collapse" data-target="#collapsible-1" data-parent="#myAccordion">Question 1?</button>
        <div id="collapsible-1" class="collapse">
            ..
        </div>
    </div>
    <div class="panel">
        <button type="button" class="btn btn-danger" data-toggle="collapse" data-target="#collapsible-2" data-parent="#myAccordion">Question 2?</button>
        <div id="collapsible-2" class="collapse">
            ..
        </div>
    </div>
    <div class="panel">
        <button type="button" class="btn btn-danger" data-toggle="collapse" data-target="#collapsible-3" data-parent="#myAccordion">Question 3?</button>
        <div id="collapsible-3" class="collapse">
           ...
        </div>
    </div>
</div> 
```

（***注意：***`panel` Bootstrap 3 中需要该类才能使[手风琴行为起作用](https://stackoverflow.com/questions/19425165/bootstrap-3-accordion-button-toggle-data-parent-not-working/19426220#19426220)）

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2014-11-26T09:57:52.083

或者您可以使用简单的 CSS 技巧，如下所示：

```
/*
prevent the active panel from collapsing
 */
.panel-group [aria-expanded=true]{
  /*
  http://caniuse.com/#feat=pointer-events
  Works for MOST modern browsers. (- Opera Mobile)
  */
  pointer-events: none;
} 
```

在非活动面板链接上必须有适当的标签

```
 aria-expanded="false" 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2018-10-31T15:03:03.687

由于所有其他 JS 答案都使用了一个[不可取](https://css-tricks.com/dangers-stopping-event-propagation/) `stopPropagation()`的方法，因此我的解决方案只使用了本机 Bootstrap 事件（在 Bootstrap 4 上测试）。

**[提琴手](https://jsfiddle.net/chris_h/aq9Laaew/260760/)**

```
$('#accordionExample').on('show.bs.collapse', function () {
    $(this).data('isShowing', true);
});

$('#accordionExample').on('hide.bs.collapse', function (event) {
    if (!$(this).data('isShowing')) {
        event.preventDefault();
    }

    $(this).data('isShowing', false);
}); 
```

它利用了点击折叠元素将导致 a`show.bs.collapse`后跟 a的事实`hide.bs.collapse`。而点击打开的元素只会产生一个`hide.bs.collapse`.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-12-05T15:35:48.530

我有一个不适合任何已发布答案的场景：同一页面上的多个手风琴以及其他一些不是手风琴的可折叠组件（没有`data-parent`属性）。

```
$("[data-toggle=collapse][data-parent]").click(function (e) {
    var button = $(this);
    var parent = $(button.attr("data-parent"));
    var panel = parent.find(button.attr("href") || button.attr("data-target"));
    if (panel.hasClass("in")) {
        e.preventDefault();
        e.stopPropagation()
    }
}); 
```

此代码仅在手风琴上触发，因为检查`data-parent`属性。它也没有假设`card`（或`panel`对于 bootstrap 3）结构，它使用与 bootstrap api 相同的属性。

我希望它有所帮助。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-08-17T16:37:18.757

所提供的解决方案都不允许在同一页面中有多个手风琴，保持或不打开一个*选项卡。*

这是我的解决方案：

```
$("[data-toggle=buttons][data-oneopen=true] [data-toggle=collapse]").on("click", function (e) {
  var me = $(this);
  var target = $(me.attr("data-target") || me.attr("href"));
  if (target.hasClass("show")) {
    e.stopPropagation();
  }
}); 
```

首先，我选择了一个`data-oneopen`属性来标记这些手风琴按钮以启用此行为，但它可以替换为类或任何其他选择器。

然后我检查`data-target`和`href`属性以找到相关的*选项卡*。

最后，`stopPropagation`如果该项目具有`show`类，只需将其更改为一个`in`类即可为 Bootstrap 3 提供解决方案。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-03-21T17:36:42.597

# 引导程序 4.0

```
$('.card').click(function(e) {
  if (
    $(this)
      .find('.collapse')
      .hasClass('show')
  ) {
    e.stopPropagation();
  }
}); 
```

此代码块检查单击的卡片是否折叠（通过查看带有 class 的 div `collapse`）。当卡当前为`show`n 时，它会停止[传播事件](https://developer.mozilla.org/en-US/docs/Web/API/Event/stopPropagation)。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-09-14T14:34:45.190

**引导程序 5**

省略`data-bs-parent`每个属性`.accordion-collapse`以使手风琴项在打开另一个项时保持打开状态。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-11-05T11:51:33.037

**Bootstrap-5 的解决方案**

```
$(this).on('mouseenter', function (e) {
    if( !$(this).hasClass('collapsed')) {
        $(this).attr('data-bs-toggle','disabled');
    }
})
$(this).on('mouseleave', function (e) {
    if( !$(this).hasClass('collapsed')) {
        $(this).attr('data-bs-toggle','collapse');
    }
}) 
```

希望它可以帮助安德烈亚斯

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2016-01-19T08:22:37.307

根据 bootstarp 3.3.6 版本，[只需遵循结构](http://getbootstrap.com/javascript/#collapse)

```
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">

<div class="panel-group" id="accordion" role="tablist"   aria-multiselectable="true">

  <div class="panel panel-default">
    <div class="panel-heading" role="tab" id="headingOne">
      <h4 class="panel-title">
        <a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
          Collapsible Group Item #1
        </a>
      </h4>
    </div>
    <div id="collapseOne" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="headingOne">
      <div class="panel-body">
        collopse 1 body  here 
      </div>
    </div>
  </div>

  <div class="panel panel-default">
    <div class="panel-heading" role="tab" id="headingTwo">
      <h4 class="panel-title">
        <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
          Collapsible Group Item #2
        </a>
      </h4>
    </div>
    <div id="collapseTwo" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingTwo">
      <div class="panel-body">
        collapse body 2
      </div>
    </div>
  </div>

</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
```

# javascript - After adding Foundation Javascript jQuery cookie no longer works

> ID：15725719
> 
> 赞同：1
> 
> 时间：2013-03-31T02:25:40.737
> 
> 标签：zurb-foundation, javascript, jquery, jquery-plugins, zurb-foundation

> This question is related to the answer of [adding jquery plugin to Zurb's Foundation Framework](https://stackoverflow.com/questions/12318925/adding-jquery-plugin-to-zurbs-foundation-framework), but it's missing how to implement it to app.js

I use [zurb-foundation](/questions/tagged/zurb-foundation "显示标记为“zurb-foundation”的问题") to maintain layout. I also use jQuery cookie plugin. After adding Foundation JavaScript as described under HTML Page Markup in [this document](http://foundation.zurb.com/old-docs/f3/index.php), I noticed that the jQuery cookie plugin does not work. I get this error message in console:

```
Uncaught TypeError: Object function (e,t){return new y.fn.init(e,t,n)} has no method 'cookie' 8:184
(anonymous function) 8:184
o jquery.min.js:2
p.fireWith jquery.min.js:2
e.extend.ready jquery.min.js:2
c.addEventListener.B jquery.min.js:2 
```

Is there any way to include the jQuery cookie plugin in app.js of Foundation? Or is there any other solution?!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T02:34:25.250

I really do not know about "zurb-foundation" but I just want to show you another way of using cookies without $.cookie plugin

如果不担心IE7以下，可以使用HTML5的Local Storage。

欲了解更多信息：[HTML5-存储](http://www.w3schools.com/html/html5_webstorage.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T12:14:34.813

最后我找到了解决方案。这只是 javascripts 文件顺序链接的问题。换句话说，我必须在链接到foundation.min.js 和app.js 之后链接到Jquery.cookie，而不是在它们之前。所以 Javascript 链接的最终顺序应该是：

> 'jquery'，'modernizr.foundation'，'foundation.min'，'app'，'jquery.cookie'，'jquery-ui-1.8.22.custom.min'。

# python - 关系“api_variant”的列“reference_sequence”不存在

> ID：15725721
> 
> 赞同：1
> 
> 时间：2013-03-31T02:25:45.237
> 
> 标签：python, django, django-models

我正在使用 django 编写一个应用程序。

我用以下代码定义了一个模型

```
class Variant(models.Model):
    partOf = models.TextField()
    rawFile = models.CharField(max_length = 200)
    CHROM = models.CharField(max_length = 200)
    start = models.IntegerField()
    end = models.IntegerField()
    ALT = models.CharField(max_length = 200)
    FILTER = models.CharField(max_length = 200)
    info_name = models.TextField()
    info_description = models.TextField()
    info_value = models.TextField()
    reference_sequence = models.CharField(max_length = 200)
    sample_sequence = models.TextField()
    format_name = models.TextField()
    format_description = models.TextField()
    format_value = models.TextField() 
```

然后是写入模型的视图：

```
def readVariantToDb(request):
    variant = Variant.objects.create(
              partOf = '',
              rawFile = '',
              CHROM = '',
              start = 0,
              end = 0,
              ALT = '',
              FILTER = '',
              info_name = '',
              info_description = '',
              info_value = '',
              reference_sequence = '',
              sample_sequence = '',
              format_name = '',
              format_description = '',
              format_value = '')
    variant.save()
    return HttpResponse('File Read') 
```

然后系统显示这个：

```
column "reference_sequence" of relation "api_variant" does not exist
LINE 1: ...", "info_name", "info_description", "info_value", "reference...
                                                             ^ 
```

知道发生了什么吗？

# javascript - dynamically adding a class to parent container from a dynamically added container using jquery

> ID：15725723
> 
> 赞同：-3
> 
> 时间：2013-03-31T02:26:01.380
> 
> 标签：javascript, jquery

I have a method to dynamically add a container which is attached to the target container . When the action has been performed i removed the action container but now I have to add a class to parent container but problem is it is getting set (class name to parent container ) but it gets removed itself. For more clarification I am adding an sample code

```
<div class="main">
  <ul>
    <li>some contents</li>
    ................
    ................
  </ul>
  <ul class="dynamic_container">
   <li>actions</li>
   ................
  </ul>
</div> 
```

dynamic_container is added when user mouseover the main class container and this get removed once action has been executed . But now it gets added(class name) but it gets removed too . I believe this is basically because $(e.target) get removed ....

Any advice/suggestion will be appreciated . Thanks in advance.

edit :

$(e.target).parents('.main').addClass('current'); (this code does not able to add class to .main div) . This code is executed from ul.dynamic_container (which is added to the dom on mouseover on div.main)

edit 2: jsfiddle link: this is the structure (not the actual code)

[http://jsfiddle.net/CASy6/](http://jsfiddle.net/CASy6/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T20:01:16.240

Thanks for posting the fiddle. Now we can identify some problems that are preventing it from working.

The first problem is that when you try to move the mouse over the buttons, they disappear. If you add some `console.log` statements to the `mouseover` and `mouseout` handler functions, you will see that they get called way too much. This is due to the way these events work in a situation with nested elements.

jQuery provides a good solution to this problem: the `mouseenter` and `mouseleave` events. Read about them in the [API docs](http://api.jquery.com/mouseenter/), specifically the section describing the difference between `mouseover` and `mouseenter`.

See this fix implemented in this version of the jsFiddle: [http://jsfiddle.net/CASy6/1/](http://jsfiddle.net/CASy6/1/). With this, you can now actually click on the buttons, and also, a whole bunch of unnecessary `.append()` and `.remove()` calls are avoided.

* * *

The next problem is that no handler is called when you click a button.

The reason for this is that you set up the handlers by calling e.g.

```
$('li.first').on('click', function(e){ ... }); 
```

when the page loads, but at that moment, the selector `li.first` matches nothing, because you haven't appended the buttons to one of the `div`s yet. So handlers are only attached at page load, and they have nothing to attach to.

One solution for this problem is to use delegated events ([see docs](http://api.jquery.com/on/)). This means we attach a handler to a container element (which is always present, including at page load), and handle events that bubble up from a descendant element.

In this case, we can attach a delegated event handler to the `.main` divs, which handles a click coming from one of the buttons:

```
$('div.main').on('click', 'button.first', function(e){
    $(this).closest('.main').addClass('current');
    alert('first action');
}); 
```

The second argument `button.first` is a selector which determines which descendant events will be handled by this handler. (I fixed the appended html so the `class` attribute is attached to the `button` element instead of the `li` element; it was inconsistent between the two buttons.)

See these fixes in action here: [http://jsfiddle.net/CASy6/2/](http://jsfiddle.net/CASy6/2/)

# ios - xCode 无法配置应用程序

> ID：15725725
> 
> 赞同：0
> 
> 时间：2013-03-31T02:26:20.927
> 
> 标签：ios, xcode4.2

嗨，我是 iOS 开发的新手，我在 xcode 4.2 中创建了基于 phonegap 的项目，我想发布该应用程序以进行 Ad-Hoc 分发。但是我无法使用使用我的开发人员帐户创建的配置文件来配置应用程序，我创建的配置已下载，但它们在 Xcode 中是灰色的，我无法选择其中任何一个进行配置，请建议我如果我错过了什么..![下图显示了我尝试配置应用程序时发生的情况](https://i.stack.imgur.com/lhnKy.png)

# mysql - 如何从表 A 中检索其 VARCHAR 列与另一个 VARCHAR col 部分匹配的行。在表 B 中？

> ID：15725726
> 
> 赞同：1
> 
> 时间：2013-03-31T02:26:29.710
> 
> 标签：mysql, sql, select

MySQL：5.6

我有 2 个表 - 一个有一个包含电子邮件地址的 VARCHAR 列，另一个有一个包含域名的 VARCHAR 列。

电子邮件地址示例：john@yahoo.co.uk 域名示例：yahoo.co.uk

我需要检索属于域表中域的电子邮件地址列表。

我怎样才能最有效地做到这一点？

提前感谢您的任何回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T02:29:03.327

您应该能够`JOIN`在两个表上`LIKE`使用`CONCAT`：

```
SELECT D.Domain, E.Email
FROM Domains D
   JOIN Emails E ON E.Email LIKE CONCAT('%',D.Domain) 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!2/f08e9/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T02:30:10.663

您可以`LIKE`在此使用。（*用于字符串匹配*）

但是使用的问题`LIKE`是它不使用列上提供的任何索引。这可能会在具有较小记录的数据库上执行得更好，但在已经包含数千条记录的大型数据库上性能会很差。这样做的原因是因为它会`FULL TABLE SCAN`在非常慢的表上的每条记录上运行。

```
SELECT  a.DomainName, b.EmailAdd
FROM    DomainList a
        INNER JOIN EmailList b
          ON b.EmailAdd LIKE CONCAT('%', a.DomainName) 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/730ee/1)

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

# .net - WPF MenuItem.Icon dimensions

> ID：15725729
> 
> 赞同：2
> 
> 时间：2013-03-31T02:26:42.967
> 
> 标签：.net, wpf, xaml, menu, icons

So I have a MenuItem (within a ContextMenu, if it really makes a difference, don't think it does). I want to display an icon within the MenuItem using the MenuItem.Icon property. Here is XAML code that does this:

```
<MenuItem Header="MenuItem1">
    <MenuItem.Icon>
        <Image Source="[pathtoimage]"/>
     </MenuItem.Icon>
</MenuItem> 
```

This works. But what if I want to specify the size of the icon with Height and Width ? Search on the web reveals that it should be 32, some say it should be 20\. 20 works the best for me, but I don't want to hardcode 20\. I want to set it to the same height as the MenuItem, given the fact that on a different resolution the actual height might be different. So, I tried the following:

```
<MenuItem x:Name="menuItem1" Header="MenuItem1">
    <MenuItem.Icon>
        <Image Source="[pathtoimage]"
               Height="{Binding Path=ActualHeight, ElementName=menuItem1}"
               Width="{Binding Path=ActualHeight, ElementName=menuItem1}"
     </MenuItem.Icon>
</MenuItem> 
```

You would think that it should work, but it didn't. The question is why ? I am able to get my desired appearance if I set both Width and Height to 20\. But if the system font size gets changed, then 20x20 won't be ideal anymore. It would be ideal to do this in the XAML, because I am sure there are a lot of ways of handling this in the code-behind.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-02-10T23:45:25.367

Icon size and icon area width are hardcoded inside the MenuItem templates and styles like the following.

```
 <ContentPresenter x:Name="Icon" Content="{TemplateBinding Icon}" ContentSource="Icon" HorizontalAlignment="Center" Height="16" Margin="3" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" VerticalAlignment="Center" Width="16"/> 
```

So if you want dynamic icon size you need to copy all the templates and styles related to MenuItem from one of the SystemThemes (e.g. aero2.normalcolor.xaml) and then you can customize them for your needs. In your case it would need vast amount of changes in those templates and styles. Unfortunately there are no simpler ways to do this. And it is not scalable either since you would stuck with just one System Theme unless you change all of them.

Similar things were suggested in the related topics here: [WPF - How to style the menu control to remove the left margin?](https://stackoverflow.com/questions/2979127/wpf-how-to-style-the-menu-control-to-remove-the-left-margin) or [System.Windows.Controls.MenuItem without icon area](https://stackoverflow.com/questions/5276826/system-windows-controls-menuitem-without-icon-area/24630712).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T04:00:31.140

Well basically the problem is due to the MenuItem `Header`, the Header is of type `object` and you add a string so it has no Height/Width, so the `MenuItem` `ActualHeight` will return `Auto`

If you were to add a `Textblock` as the Header this will give the `MenuItem` a Height that can be used to set your image size.

```
<MenuItem x:Name="menuItem1" >
    <MenuItem.Header>
        <TextBlock Text="MenuItem1" />
    </MenuItem.Header>
    <MenuItem.Icon>
        <Image  Height="{Binding Header.ActualHeight, ElementName=menuItem1}"
                Width="{Binding Header.ActualHeight, ElementName=menuItem1}" />
    </MenuItem.Icon>
</MenuItem> 
```

So with this in mind you could easily make a `ItemContainerTemplate` for the `MenuItem` so the all behave in this fashion

# vb.net - Autoclicker 何时超时，页面需要刷新？

> ID：15725731
> 
> 赞同：1
> 
> 时间：2013-03-31T02:27:02.400
> 
> 标签：vb.net, browser, refresh

我创建了一个自动点击器，一旦有人点击一个按钮，它就会向页面上的提交按钮发送请求，大约每秒点击一次。它工作得很好，持续大约 30 分钟，但它仍然会计时并且变得没有响应。我正在使用的当前脚本似乎不错：

```
 Private Sub Button1_Click_1(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    If RadioButton1.Checked = True Then
        Timer1.Interval = 40
    ElseIf RadioButton2.Checked = True Then
        Timer1.Interval = 100
    Else
        Timer1.Interval = 500
    End If

    If ((WebBrowser1.IsBusy)) Then

    Else
        WebBrowser1.Document.GetElementById("NewGamertag").SetAttribute("value", txtTurbo.Text)

        Timer1.Enabled = True

    End If

End Sub 
```

其中 Timer1 具有自动单击提交按钮的代码：

```
Private Sub Timer1_Tick(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Timer1.Tick
    WebBrowser1.Document.GetElementById("claimIt").InvokeMember("Click")

End Sub 
```

所以现在我需要知道如何每 X 秒刷新一次。我创建了一个名为 RefreshPage 的新计时器，并为其提供了以下原则：

```
Private Sub RefreshPage_Tick(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles RefreshPage.Tick
    WebBrowser1.Refresh()
End Sub 
```

唯一的问题是，现在当我在 Button1 中启用 RefreshPage (RefreshPage.Enabled = True) 时，它告诉我：[http](http://gyazo.com/4c9f83a48d6262b26757281512bee35c) ://gyazo.com/4c9f83a48d6262b26757281512bee35c 我不知道这意味着什么或如何解决它，我最好猜测是它试图刷新，因为它试图声明因此意味着在源中找不到该按钮。（当我打开程序并按下按钮时程序变得无响应）

有什么帮助吗？

# c# - 如何检查整数和小数是否有效？

> ID：15725732
> 
> 赞同：0
> 
> 时间：2013-03-31T02:27:06.380
> 
> 标签：c#

我有这段代码可以检查用户是否在文本框中输入了任何内容，但我不知道检查其他文本框是 int 和小数的等价物。

```
public bool IsValid
        {
            get
            {
                return (!String.IsNullOrWhiteSpace(StreetName) && !String.IsNullOrWhiteSpace(City) && HouseNumber != null  );
            }
        } 
```

当然 Housenumber != null 部分有一个波浪形的下划线。HouseNumber 是小数，我也需要检查一些整数，那么我可以用什么替换 HouseNumber != null ？

如果我能做到这一点，那就太棒了

```
 public bool IsValid
            {
                get
                {
                    return (!String.IsNullOrWhiteSpace(StreetName) && !String.IsNullOrWhiteSpace(City) && !Decimal.IsNullOrWhiteSpace(HouseNumber)  );
                }
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T02:38:48.110

这里有几个方法：

```
 public bool isDecimal(string s)
    {
        Decimal d;
        return Decimal.TryParse(s, out d);
    }
    public bool isInt(string s)
    {
        int i;
        return Int32.TryParse(s, out i);
    } 
```

**编辑：**

```
 public bool isNullWhiteSpaceAndNotDecimal(string s)
    {
        if (String.IsNullOrWhiteSpace(s))
        {
            return true;
        }
        Decimal d;
        return !Decimal.TryParse(s, out d);
    }
    public bool isNullWhiteSpaceAndNotInt(string s)
    {
        if (String.IsNullOrWhiteSpace(s))
        {
            return true;
        }
        int i;
        return !Int32.TryParse(s, out i);
    } 
```

这更像是你想要的`!Decimal.IsNullOrWhiteSpace(HouseNumber);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T02:32:04.433

`HouseNumber`永远不可能`null`，因为它是一个值类型。 `default(decimal)`是`0`。所以，如果`0`总是一个无效的数字，那么检查一下。如果它是有效数字，您可以将其初始化为无效数字，即

```
class Whatever
{
    private const decimal InvalidHouseNum = decimal.MinValue;

    public Whatever(...)
    {
        // ...
        HouseNumber = InvalidHouseNum;
    }
    public bool IsValid
    {
        get
        {
            return (!String.IsNullOrWhiteSpace(StreetName) && !String.IsNullOrWhiteSpace(City) && HouseNumber != InvalidHouseNum  );
        }
    }

} 
```

如果*任何*数字有效，请使用可为空的小数，即

```
private decimal? HouseNumber { get; set; } 
```

现在它将默认为空。

* * *

作为旁白; `decimal`门牌号真的是最佳选择吗？门牌号可以有小数部分吗？

* * *

编辑：只需阅读您的评论。如果`HouseNumber`实际上是一个字符串（不是`decimal`你在问题中所说的），那么使用`TryParse`. 当然，您可能应该首先使用不允许无效值的控件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T20:27:10.593

实际上，由于某种原因，我的文本框填充了 0，所以这最终对我有用，而其他答案不起作用。

```
public bool IsValid
        {
            get
            {
                return (!String.IsNullOrWhiteSpace(StreetName) && !String.IsNullOrWhiteSpace(City) && HouseNumber != 0 && ZipCode != 0 && Price != 0);
            }
        } 
```

我还是 C# 的新手，所以我没有想到如果任何十进制或 int 文本框为空，我也可能只添加一个 .ToString() ，如下所示。它摆脱了红色波浪下划线，但由于文本框有 0，我使用了上述版本并且它有效。下面的答案是我当时正在寻找的答案。

```
public bool IsValid
        {
            get
            {
                return (!String.IsNullOrWhiteSpace(StreetName) && !String.IsNullOrWhiteSpace(City) && !String.IsNullOrWhiteSpace(HouseNumber.ToString) && !String.IsNullOrWhiteSpace(ZipCode.ToString) && !String.IsNullOrWhiteSpace(Price.ToString) );
            }
        } 
```

# php - 在基于 PDO 的查询中清理表单输入

> ID：15725733
> 
> 赞同：0
> 
> 时间：2013-03-31T02:27:19.650
> 
> 标签：php, forms, web, pdo

我一直在努力解决与似乎已弃用的代码相关的问题。

使用 Vikram Vaswani 的“PHP：初学者指南”中的示例，目标是验证并正确转义用户 Web 表单中的输入以进入 SQLite 表。我查阅了许多资料，这些资料都指向我使用以下语法：

`$todo->prepare($_POST['name'])`在一个条件块中，该块将结果分配给一个变量，以便在最终查询中使用以插入到数据库表中。无论我做了什么，我能得到的最好结果都是 NULL。最糟糕的是无法执行查询。

如果这是一个重复的问题，我已阅读手册并道歉，但可能存在与我不知道的 PDO 库相关的 Microsoft Windows 特定问题。我一直无处可去。

表单字段如下：

与日期相关的三个字段：“dd”、“mm”和“yyyy”。

似乎每次都失败的代码如下：

```
 try {

// If form submitted
// attempt database connection.

$toDo = new PDO('sqlite:todo.db') OR
exit("Could not open database.");

// Check and sanitize input.

$name = !empty($_POST['name']) ? $name = $toDo->prepare($_POST['name']) :
exit('ERROR: Task name is required.');

$dd = !empty($_POST['dd']) ? $dd = (int) $_POST['dd'] :
exit('ERROR: Task due date is required.');

    $mm = !empty($_POST['mm']) ? $mm = (int) $_POST['mm'] :
exit('ERROR: Task due date is required.');

$yyyy = !empty($_POST['yyyy']) ? $yyyy = (int) $_POST['yyyy'] :
exit('ERROR: Task due date is required.');

// Create entry date variable.

$date = checkdate($mm, $dd, $yyyy) ? mktime(0, 0, 0, $mm, $dd, $yyyy) :
exit('ERROR: Task due date is invalid.');

$priority = !empty($_POST['priority']) ?
$priority = $toDo->prepare($_POST['priority']) :
exit('ERROR: Task priority is required.');

// Attempt query execution.
// Add a new record.

$sql = "INSERT INTO tasks (name, due, priority) VALUES
('$name', '$date', '$priority')";

if ($toDo->prepare(exec($sql) == TRUE)) {

     echo "<div id=\"message\">Task record successfully added to database</div>";

}   else {

     echo "ERROR: Could not execute query.";

}

// Close connection to sqlite3.

$toDo = NULL;

 }

 catch(PDOException $e) {

 echo "Exception: " . $e->getMessage();

}   // end catch 
```

我一直无法在上面的代码中找到任何错误。非常感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T02:34:35.067

我认为你的主要问题是这一行：

`if ($toDo->prepare(exec($sql) == TRUE)) {`

`exec()`是一个用于运行命令行程序的 PHP 函数。我认为您真正想要的是调用该`PDOStatement::execute`方法。

请参阅手册以正确使用`PDO::prepare`：

[http://php.net/manual/en/pdo.prepare.php](http://php.net/manual/en/pdo.prepare.php)

# entity-framework - EntityFramework - 数据库中的多对多引用，模型中没有反向引用

> ID：15725734
> 
> 赞同：3
> 
> 时间：2013-03-31T02:27:29.903
> 
> 标签：entity-framework, orm, entity-framework-5, entity-framework-mapping

在我的应用程序中，用户可以定义参数，然后根据一组参数创建 SlideSet。

我正在使用代码优先实体框架 5.0，并且我有以下模型：

![slideset 引用了几个参数](https://i.stack.imgur.com/flgee.png)

```
class SlideSet {
  public ICollection<Parameter> Parameter
}
class Parameter {} 
```

一个参数可能被许多幻灯片使用或根本不使用。但是，在我的域中，参数不需要引用 SlideSet，它们位于单独的有界上下文中（SlideSet 和 Parameter 都是聚合根）。因此，我不想从 Parameter 引用 SlideSet。

我想要的表模型（我不关心表/列名）是

```
Table SlideSet
Table Param
Table SlideSetParam
   FK_SlideSet
   FK_Param 
```

我知道我可以通过引入 ParameterGroup 实体或 Param.SlideSets 集合来对此进行建模，但它仅用于 ORM 映射目的（并导致序列化问题）。有没有其他方法可以告诉 EF 从我的实体生成这个表模型？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T02:48:03.093

这应该使您成为`Parameter`w/oa 导航属性：

```
modelBuilder.Entity<SlideSet>()
    .HasMany(x => x.Parameters)
    .WithRequired(); 
```

## 编辑：

根据评论 - 这应该是相似的。这似乎很好地工作你正在尝试做的事情......

```
modelBuilder.Entity<SlideSet>()
    .HasMany(x => x.Parameters)
    .WithMany(); 
```

...您可以通过以下任何一种方式使用它：

```
var slideset = new SlideSet { Parameters = new []
    {
        new Parameter{},
        new Parameter{},
        new Parameter{},
        new Parameter{},
    }
};
var slideset2 = new SlideSet { };
db.SlideSets.Add(slideset);
db.SaveChanges();

var slidesets = db.SlideSets.ToList();
var parameters = db.Parameters.ToList();
Console.WriteLine("");

db.SlideSets.Add(slideset2);
db.SaveChanges();

slidesets = db.SlideSets.ToList();
parameters = db.Parameters.ToList();
Console.WriteLine(""); 
```

...和 ​​SQL：

```
CREATE TABLE [dbo].[Parameters] (
    [ParameterID] [int] NOT NULL IDENTITY,
    CONSTRAINT [PK_dbo.Parameters] PRIMARY KEY ([ParameterID])
)
CREATE TABLE [dbo].[SlideSets] (
    [SlideSetID] [int] NOT NULL IDENTITY,
    CONSTRAINT [PK_dbo.SlideSets] PRIMARY KEY ([SlideSetID])
)
CREATE TABLE [dbo].[SlideSetParameters] (
    [SlideSet_SlideSetID] [int] NOT NULL,
    [Parameter_ParameterID] [int] NOT NULL,
    CONSTRAINT [PK_dbo.SlideSetParameters] PRIMARY KEY ([SlideSet_SlideSetID], [Parameter_ParameterID])
)
CREATE INDEX [IX_SlideSet_SlideSetID] ON [dbo].[SlideSetParameters]([SlideSet_SlideSetID])
CREATE INDEX [IX_Parameter_ParameterID] ON [dbo].[SlideSetParameters]([Parameter_ParameterID])
ALTER TABLE [dbo].[SlideSetParameters] ADD CONSTRAINT [FK_dbo.SlideSetParameters_dbo.SlideSets_SlideSet_SlideSetID] FOREIGN KEY ([SlideSet_SlideSetID]) REFERENCES [dbo].[SlideSets] ([SlideSetID]) ON DELETE CASCADE
ALTER TABLE [dbo].[SlideSetParameters] ADD CONSTRAINT [FK_dbo.SlideSetParameters_dbo.Parameters_Parameter_ParameterID] FOREIGN KEY ([Parameter_ParameterID]) REFERENCES [dbo].[Parameters] ([ParameterID]) ON DELETE CASCADE 
```

...这使得原始表实际上与关系“不可知”（`many-to-many`） - 而索引表是在后台自动生成的。

您还可以进一步自定义它并使用几乎相同的布局制作自己的`SlideSetParam`（例如，如果您想在那里添加其他字段） - 只需`Parameters`指向它即可。

# c# - Process.Start 捕获标准输出字符

> ID：15725743
> 
> 赞同：0
> 
> 时间：2013-03-31T02:29:21.117
> 
> 标签：c#, .net, system.diagnostics

我有一个 Windows 服务，它将处理来自 plink.exe（Putty/SSH 的东西）的结果。我目前正在成功捕获标准输出并通过标准输入向进程发送命令。

我的问题是，在`OutputDataReceived`我从控制台应用程序进程收到换行符之前，该事件似乎不会被引发。该过程提示输入密码，并且在我输入密码之前没有换行符。

所以我的问题是，有没有办法逐个字符地处理标准输出，而不是从类中逐行处理`System.Diagnostics.Process`？

这是我的代码：

```
_processInfoTest = new ProcessStartInfo();
_processInfoTest.FileName = serviceSettings.PlinkExecutable;
_processInfoTest.Arguments = GetPlinkArguments(serviceSettings);
_processInfoTest.RedirectStandardOutput = true;
_processInfoTest.RedirectStandardError = true;
_processInfoTest.RedirectStandardInput = true;
_processInfoTest.UseShellExecute = false;
_processInfoTest.CreateNoWindow = true;

_processTest = new Process();
_processTest.StartInfo = _processInfoTest;
_processTest.OutputDataReceived += processTest_OutputDataReceived;
_processTest.ErrorDataReceived += processTest_OutputDataReceived;
_processTest.Start();

_processTest.BeginOutputReadLine();
_processTest.BeginErrorReadLine(); 
```

以及处理传入文本行的事件处理程序：

```
private static void processTest_OutputDataReceived(object sender, DataReceivedEventArgs e)
{
    string line = e.Data;

    if (line != null)
    {
        WcfServerHelper.BroadcastRemoteCallback(x => x.PlinkTextOutput(line, DateTime.Now));

        if (line.Contains("If you do not trust this host, press Return to abandon the"))
        {
            _processTest.StandardInput.Write("y");
            _processTest.StandardInput.Write("\n");
            _processTest.StandardInput.Flush();
        }

        // This code never gets called because the event doesn't get raised until a line-break occurs
        if (line.Contains("'s password:"))
        {
            _processTest.StandardInput.Write("mypassword");
            _processTest.StandardInput.Write("\n");
            _processTest.StandardInput.Flush();
        }

        if (line.Contains("Access granted"))
        {
            if (!_processTest.HasExited)
                _processTest.Kill();

            WcfServerHelper.BroadcastRemoteCallback(x => x.TestConnectionCallback(PlinkStatus.Success));
        }
        else if (line.Contains("Access denied") || line.Contains("Password authentication failed"))
        {
            if (!_processTest.HasExited)
                _processTest.Kill();

            WcfServerHelper.BroadcastRemoteCallback(x => x.TestConnectionCallback(PlinkStatus.InvalidUserOrPass));
        }
        else if (line.Contains("Host does not exist"))
        {
            if (!_processTest.HasExited)
                _processTest.Kill();

            WcfServerHelper.BroadcastRemoteCallback(x => x.TestConnectionCallback(PlinkStatus.InvalidHostname));
        }
        else if (line.Contains("Connection timed out"))
        {
            if (!_processTest.HasExited)
                _processTest.Kill();

            WcfServerHelper.BroadcastRemoteCallback(x => x.TestConnectionCallback(PlinkStatus.TimedOut));
        }
    }
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T03:01:15.017

您正在使用的事件是行缓冲的...您将必须实现自己的阅读器，该阅读器在流阅读器上调用 Read() / ReadAsync() 以获取每个字符...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T03:07:37.217

我一直在寻找答案，在这里提出问题后，我找到了解决方案。

顺便说一句，感谢 DarkSquirrel，你一针见血。

这是我的解决方案：

```
_processInfoTest = new ProcessStartInfo();
_processInfoTest.FileName = serviceSettings.PlinkExecutable;
_processInfoTest.Arguments = GetPlinkArguments(serviceSettings);
_processInfoTest.RedirectStandardOutput = true;
_processInfoTest.RedirectStandardError = true;
_processInfoTest.RedirectStandardInput = true;
_processInfoTest.UseShellExecute = false;
_processInfoTest.CreateNoWindow = true;

WcfServerHelper.BroadcastRemoteCallback(x => x.PlinkTextOutput(_processInfoTest.Arguments, DateTime.Now));

_processTest = new Process();
_processTest.StartInfo = _processInfoTest;
_processTest.Start();

Task.Factory.StartNew(() =>
    {
        ProcessOutputCharacters(_processTest.StandardError);
    });

Task.Factory.StartNew(() =>
    {
        ProcessOutputCharacters(_processTest.StandardOutput);
    }); 
```

还有我的方法：

```
private static void ProcessOutputCharacters(StreamReader streamReader)
{
    int outputCharInt;
    char outputChar;
    string line = string.Empty;

    while (-1 != (outputCharInt = streamReader.Read()))
    {
        outputChar = (char)outputCharInt;
        if (outputChar == '\n' || outputChar == '\r')
        {
            if (line != string.Empty)
            {
                ProcessLine("Output: " + line);
            }

            line = string.Empty;
        }
        else
        {
            line += outputChar;

            if (line.Contains("login as:"))
            {
                _processTest.StandardInput.Write("myusername");
                _processTest.StandardInput.Write("\n");
                _processTest.StandardInput.Flush();
            }

            if (line.Contains("'s password:"))
            {
                _processTest.StandardInput.Write("mypassword");
                _processTest.StandardInput.Write("\n");
                _processTest.StandardInput.Flush();
            }
        }
    }
}

private static void ProcessLine(string line)
{
    if (line != null)
    {
        WcfServerHelper.BroadcastRemoteCallback(x => x.PlinkTextOutput(line, DateTime.Now));

        if (line.Contains("If you do not trust this host, press Return to abandon the"))
        {
            _processTest.StandardInput.Write("y");
            _processTest.StandardInput.Write("\n");
            _processTest.StandardInput.Flush();
        }

        if (line.Contains("Access granted"))
        {
            if (!_processTest.HasExited)
                _processTest.Kill();

            WcfServerHelper.BroadcastRemoteCallback(x => x.TestConnectionCallback(PlinkStatus.Success));
        }
        else if (line.Contains("Access denied") || line.Contains("Password authentication failed"))
        {
            if (!_processTest.HasExited)
                _processTest.Kill();

            WcfServerHelper.BroadcastRemoteCallback(x => x.TestConnectionCallback(PlinkStatus.InvalidUserOrPass));
        }
        else if (line.Contains("Host does not exist"))
        {
            if (!_processTest.HasExited)
                _processTest.Kill();

            WcfServerHelper.BroadcastRemoteCallback(x => x.TestConnectionCallback(PlinkStatus.InvalidHostname));
        }
        else if (line.Contains("Connection timed out"))
        {
            if (!_processTest.HasExited)
                _processTest.Kill();

            WcfServerHelper.BroadcastRemoteCallback(x => x.TestConnectionCallback(PlinkStatus.TimedOut));
        }
    }

} 
```

我现在唯一的问题是当我发送用户名或密码（通过标准输入）时，它只发送前 5 个字符。如果需要，我将对此问题进行一些研究并将其作为单独的问题发布。

谢谢！

# lua - 简单的 Lua 分析

> ID：15725744
> 
> 赞同：6
> 
> 时间：2013-03-31T02:29:48.033
> 
> 标签：lua, profiling, profiler

我刚开始使用 Lua 作为学校作业的一部分。我想知道是否有一种简单的方法可以为 Lua 实现分析？我需要显示分配的内存、使用中的变量（无论它们的类型如何）等的东西。

我一直在寻找能够成功编译的 C++ 解决方案，但我不知道如何将它们导入 Lua 环境。

我还找到了 Shinny，但我找不到任何有关如何使其工作的文档。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-31T21:48:37.990

您可以检查几个[可用的分析器](http://lua-users.org/wiki/ProfilingLuaCode)，但它们中的大多数都以执行时间为目标（并且基于调试挂钩）。

要跟踪变量，您将需要使用`debug.getlocal`and `debug.getupvalue`（来自您的代码或来自调试挂钩）。

要跟踪您可以使用的内存使用情况`collectgarbage(count)`（可能在 之后`collectgarbage(collect)`），但这只会告诉您正在使用的总内存。要跟踪单个数据结构，您可能需要遍历全局变量和局部变量并计算它们占用的空间量。您可以查看[此讨论](http://lua-users.org/lists/lua-l/2012-09/msg00122.html)以获取一些指针和实现细节。

像这样的东西将是跟踪函数调用/返回的最简单的分析器（请注意，您不应该相信它生成的绝对数字，只相信相对数字）：

```
local calls, total, this = {}, {}, {}
debug.sethook(function(event)
  local i = debug.getinfo(2, "Sln")
  if i.what ~= 'Lua' then return end
  local func = i.name or (i.source..':'..i.linedefined)
  if event == 'call' then
    this[func] = os.clock()
  else
    local time = os.clock() - this[func]
    total[func] = (total[func] or 0) + time
    calls[func] = (calls[func] or 0) + 1
  end
end, "cr")

-- the code to debug starts here
local function DoSomethingMore(x)
  x = x / 2
end

local function DoSomething(x)
  x = x + 1
  if x % 2 then DoSomethingMore(x) end
end

for outer=1,100 do
  for inner=1,1000 do
    DoSomething(inner)
  end
end

-- the code to debug ends here; reset the hook
debug.sethook()

-- print the results
for f,time in pairs(total) do
  print(("Function %s took %.3f seconds after %d calls"):format(f, time, calls[f]))
end 
```

# bash - 如何从命令行转换为 bash 脚本？

> ID：15725747
> 
> 赞同：1
> 
> 时间：2013-03-31T02:30:10.253
> 
> 标签：bash, awk

我有一个可以一次执行的命令链，但是我希望将它放在 bash 脚本中。问题是我不知道该怎么做。我的命令是这样的：

`/usr/bin/sort -n db | /usr/bin/awk -F: '{print $1; print $2}' | db5.1_load -T -t hash newdb`

如何将上述内容转换为 bash 脚本？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T02:45:10.123

这通常应该像将 shell 命令放入文本文件一样简单，并将[Unix shebang](http://en.wikipedia.org/wiki/Shebang_%28Unix%29)放在文件的第一行，它定义了用于运行脚本的程序（在本例中为`/bin/bash`）。所以这看起来像：

```
#!/bin/bash

/usr/bin/sort -n db | /usr/bin/awk -F: '{print $1; print $2}' | db5.1_load -T -t hash newdb 
```

# mysql - MySQL 返回一个空结果集（即零行）

> ID：15725754
> 
> 赞同：0
> 
> 时间：2013-03-31T02:30:50.020
> 
> 标签：mysql, subquery, inner-join

我有 2 个表，TableA 和 TableB

TableA 包含列 LItems

TableB 包含列 BItems

LItems 和 BItems 都有各种项目，其中只有几个是相同的，我只需要返回 BItems 中的 LItems 中的匹配项目。

我努力了

SELECT 'LItems' from 'TableA' WHERE 'LItems' IN (SELECT 'BItems' FROM 'TableB')

但这表示当我知道两者都有同名的项目时它是空的。

我也尝试过 = 而不是 IN 并且这没有带来任何回报并尝试了 INNER JOINS 但这也没有带来任何回报。当我单独运行每个 select 语句并查看时，我可以看到两者都应该有结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T02:36:58.397

为什么要在查询中引用内容？您应该能够使用以下内容：

```
SELECT
  LItems
FROM
  TableA
WHERE
  LItems IN (SELECT BItems FROM TableB); 
```

我建议改为内部连接，但首先尝试一下。另外你确定名字完全一样吗？您可以尝试使用 lower() 或其他函数来删除空格或大小写差异。

# ms-access - Correction Needed for Error in Access Query

> ID：15725756
> 
> 赞同：0
> 
> 时间：2013-03-31T02:31:11.020
> 
> 标签：ms-access

I want to create a table [Top Stores] that has 10 most active stores in terms of quantity of product sold. Each store sells 3 products. I just need to add the quantity sold for each product to arrive at StoreSale. **The problem is when there is no sale for a product, the quantity value is left blank and not 0.** I try to change the blank to 0 by the isnull tests. Please point out the error in my code below:

```
SELECT top 10  StoreName, StoreSale = (iif (isnull(Product1), 0, Product1) + iif (isnull(Product2), 0, Product2) + iif (isnull(Product3), 0, Product3)) INTO [Top Stores]
FROM SaleTable ORDER BY StoreSale DESC; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T06:33:58.840

Two things:

1.  if you use `=`, you will be doing an equality test, you can't have an assignment like that in SQL.
    You will need to name your calculated result `AS StoreSale` instead.

2.  Use `Nz()` to get a `0.00` when the field value is `NULL`

Result:

```
SELECT TOP 10 StoreName,
              Nz(product1) + Nz(Product2) + Nz(Product3) AS StoreSale
INTO   [Top Stores]
FROM   SaleTable
ORDER  BY StoreSale DESC; 
```

# objective-c - Animation of NSImageView not staying in place while changing frame size

> ID：15725757
> 
> 赞同：0
> 
> 时间：2013-03-31T02:31:33.497
> 
> 标签：objective-c, cocoa

I'm using the following code to scale an image slightly larger and then back to its original size:

```
float width = image.image.size.width;
float newWidth = width * 1.05;
float height = image.image.size.height;
float newHeight = height * 1.05;

[NSAnimationContext beginGrouping];
[[NSAnimationContext currentContext] setDuration:.7f];
NSAnimationContext.currentContext.completionHandler = ^{
   [NSAnimationContext beginGrouping];
   [[NSAnimationContext currentContext] setDuration:.7f];
   [[image animator] setFrameSize:NSMakeSize(width, height)];
   [NSAnimationContext endGrouping];
};

[[image animator] setFrameSize:NSMakeSize(newWidth, newHeight)];
[NSAnimationContext endGrouping]; 
```

The problem is that the image moves slightly up and to the right during the animation instead of staying in place.

How can I keep the image in place during the animation?

Thank you.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T02:51:59.133

It's because the method you're using, `-setFrameSize:`, does not alter the view's origin, (which is the lower left hand corner on a Mac), so the view literally grows up and to the right. Use `-setFrame:` with the animator proxy, or use a transform on the view's layer in conjunction with a [CABasicAnimation](https://developer.apple.com/library/mac/#documentation/GraphicsImaging/Reference/CABasicAnimation_class/Introduction/Introduction.html) to apply the animation to the view's coordinates linearly.

# c# - 定时器速度自动增加

> ID：15725765
> 
> 赞同：0
> 
> 时间：2013-03-31T02:32:34.173
> 
> 标签：c#, winforms

我有以下代码。当我单击按钮时，图片框从右到左和从上到下移动。当它移动到面板的末尾时，它再次从右到左和从上到下开始。现在的问题是，在第一次完成图片框后，从右到左计时器速度逐渐增加，虽然我将它设置为 200，但似乎这一行 myform.counterTop = myform.counterTop + 5; 值 5 也逐渐增加。第一轮之后，它增加了一点，第二轮之后它又增加了一点，并继续这样。请告诉我为什么会这样。

```
namespace Spaceship_Invaders
    {
        public partial class Form1 : Form
        {
            private int invaderlanded = 0;
            private int invaderstopped = 0;
            private  int counterfortop = -60;
            private  int counterforleft = 415;
            private int counterTop = -60;
            private int counterLeft = 415;
            private bool pictureboxclicked = false;
            private int timerinterval = 200;

        System.Windows.Forms.Timer mytimer = new System.Windows.Forms.Timer();

        public Form1()
        {
            InitializeComponent();
            Image myImage = Image.FromFile("image/Untitled6.png");
            pictureBox1.Image = myImage;
            pictureBox1.Top = counterfortop;
            pictureBox1.Left = counterforleft;
        }

        public class Spaceship
        {
            Form1 myform;
            public Spaceship(Form1 form)
            {
                myform = form;
            }            

            public void mspaceship()
            {                
                    myform.mytimer.Tick += new EventHandler(TimerEventProcessor);
                    myform.mytimer.Interval = myform.timerinterval;
                    myform.mytimer.Enabled = true;
                    myform.mytimer.Start();                    

            }     

            private void TimerEventProcessor(Object myObject, EventArgs myEventArgs)
            {

                if (myform.pictureboxclicked)
                {
                    myform.mytimer.Interval = 5;
                    myform.pictureBox1.Top = myform.counterTop;
                    //myform.pictureBox1.Left = myform.counterLeft;
                    myform.counterTop = myform.counterTop - 5;

                    if (myform.counterTop <-60)
                    {
                        //myform.pictureBox1.Enabled = false;
                        //myform.pictureBox1.Hide();                       
                        myform.pictureboxclicked = false;
                        myform.mytimer.Interval = myform.timerinterval;
                        myform.counterLeft = 415;
                        myform.counterTop = -60;
                        myform.mytimer.Stop();                       

                    }
                }     else   {

                    if (myform.counterTop > 370 || myform.counterLeft < 1)
                    {
                        //myform.pictureBox1.Enabled = false;
                        //myform.pictureBox1.Hide();
                        myform.invaderlanded++;
                        myform.textBox2.Text = myform.invaderlanded.ToString();
                        myform.counterLeft = 415;
                        myform.counterTop = -60;
                        myform.pictureboxclicked = false;
                        myform.mytimer.Interval = myform.timerinterval;
                        myform.mytimer.Stop();                    
                      }   else  {
                        myform.pictureBox1.Top = myform.counterTop;
                        myform.pictureBox1.Left = myform.counterLeft;
                        myform.counterTop = myform.counterTop + 5;
                        myform.counterLeft = myform.counterLeft - 5;
                    }
                }             

            }
        }       

        private void button4_Click(object sender, EventArgs e)
        {

            Spaceship myspaceship = new Spaceship(this);
            myspaceship.mspaceship();

          } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T02:37:31.357

每次调用 时`mspaceship()`，都会向计时器添加另一个事件处理程序。

第二次单击它时，您有*两个*事件处理程序，每个处理程序移动 5 个像素。

Instead, you should only add the handler once.

# .htaccess - htaccess rewrite and redirect

> ID：15725778
> 
> 赞同：0
> 
> 时间：2013-03-31T02:35:24.007
> 
> 标签：.htaccess, mod-rewrite

I have developed new site but I'm like to mantain some page adreesses already indexed on google. Google had indexed in this way: mysite.com/test-page/ (with slash at the end)

I have addedd on htaccess this conditions to cut off php extension when browsing:

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^(.*)$ $1.php 
```

Rewrite rule cute off .php extension from page:

```
mysite.com/test-page 
```

For this i can't access page from google url

Exist a way to add redirect from: mysite.com/test-page/ to: mysite.com/test-page ??

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T04:42:03.593

```
RewriteRule ^(.*)/?$ $1.php [L,NC] 
```

This will see the slash in the incoming request, but will not pass it to the resultant file-name.

# php - List 2 first and 2 last pages in WordPress

> ID：15725782
> 
> 赞同：0
> 
> 时间：2013-03-31T02:36:12.563
> 
> 标签：php, wordpress

Is there anyway of showing the 2 first pages in one `<ul>` and the last 2 pages in another `<ul>` in WordPress?

On my page I have two different lists for the navigation bar:

```
<ul>
   <li>One</li>
   <li>Two</li>
</ul> 
```

and

```
<ul>
   <li>Three</li>
   <li>Four</li>
</ul> 
```

Limit the data `wp_list_pages()` gets by 2 and the first one should show ASC and last one DESC - something like that...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T02:46:09.190

Try this

```
<ul>
<?php wp_list_pages('sort_order=ASC&number=2'); ?>
</ul>

<ul>
<?php wp_list_pages('sort_order=DESC&number=2'); ?>
</ul> 
```

> number (integer) Sets the number of Pages to display. This causes the SQL LIMIT value to be defined. Default to no LIMIT.

Reference [http://codex.wordpress.org/Function_Reference/wp_list_pages](http://codex.wordpress.org/Function_Reference/wp_list_pages)

# visual-studio-2010 - Visual Studio 2010 中的 Ctrl-I

> ID：15725783
> 
> 赞同：0
> 
> 时间：2013-03-31T02:36:48.007
> 
> 标签：visual-studio-2010, search

`Ctrl`+ “`I`增量搜索”功能非常棒，因为它可以避免显示“查找”对话框（它会遮挡您的屏幕）。

但是，`Ctrl`+`F`确实有一个优势，因为它将代码垂直居中在屏幕中间。

有没有办法让 Ctrl-I 以同样的方式使代码居中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-17T10:19:09.950

不要认为有。因此，我已将命令“Edit.ScrollLineCenter”映射到`Ctrl`+并在使用增量搜索扫描源时`L`交替点击`CTRL`+`I`和`CTRL`+ 。`L`

# c# - Unable to add List to other list

> ID：15725788
> 
> 赞同：1
> 
> 时间：2013-03-31T02:37:53.500
> 
> 标签：c#, asp.net

I have two list defined as

```
List<List<int>> thirdLevel = new List<List<int>>();
List<List<int>> fourthLevel = new List<List<int>>(); 
```

Here the type of both the list are same. I want to add contents of 1 list to other. Just want to make a duplicate of that list. I am unable to add 1 list in other.

I tried using:

```
thirdLevel.Add(fourthLevel); 
```

But I am getting error only.The error states that the overloaded method of `Add(int)` has some invalid arguments. I don't know what should I try. Can't I add a list in this way?

Can you just guide me, how should I add One list to other, if I have defined the list inside a list.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T02:40:14.683

Sound like you need [AddRange](http://msdn.microsoft.com/en-us/library/z883w3dc.aspx) instead of `Add` if you add a list of items into another list:

```
 thirdLevel.AddRange(fourthLevel); 
```

# makefile - Makefile 头文件依赖

> ID：15725789
> 
> 赞同：4
> 
> 时间：2013-03-31T02:38:26.227
> 
> 标签：makefile

我是使用 make 的新手，并且一直在通过[本教程](http://www.cs.colby.edu/maxwell/courses/tutorials/maketutor/)学习基础知识。这是教程中的最后一个示例 makefile 示例：

```
IDIR =../include
CC=gcc
CFLAGS=-I$(IDIR)

ODIR=obj
LDIR =../lib

LIBS=-lm

_DEPS = hellomake.h
DEPS = $(patsubst %,$(IDIR)/%,$(_DEPS))

_OBJ = hellomake.o hellofunc.o 
OBJ = $(patsubst %,$(ODIR)/%,$(_OBJ))

$(ODIR)/%.o: %.c $(DEPS)
    $(CC) -c -o $@ $< $(CFLAGS)

hellomake: $(OBJ)
    gcc -o $@ $^ $(CFLAGS) $(LIBS)

.PHONY: clean

clean:
    rm -f $(ODIR)/*.o *~ core $(INCDIR)/*~ 
```

假设所有 .c 文件仅包含 hellomake.h，这应该可以正常工作，但如果每个 .c 文件包含不同的标头，则它不会工作。是否可以编写一个知道每个 .c 文件包含什么的makefile，所以我不必像这样手动进入：

```
foo.o: foo.c something.h
    ...

bar.o: bar.c somethingelse.h
    ... 
```

因为这似乎会浪费很多时间。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-31T02:54:13.030

假设`foo.c`有一行：

```
#include "something.h" 
```

你想在 makefile 中有一行：

```
foo.o: foo.c something.h 
```

gcc 编译器可以为您构造该行。命令

```
gcc -MMD -c -o foo.o foo.c 
```

将构建`foo.o`并`foo.d`包含该行。（尝试一下。）

So just modify your makefile to produce these *.d files and include them, and you're done:

```
$(ODIR)/%.o: %.c $(DEPS)
    $(CC) -MMD -c -o $@ $< $(CFLAGS)

-include $(ODIR)/*.d 
```

(Further refinements are possible, like specifying where the *.d files should go.)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T10:56:09.913

Traditional makes are rather limited and force you to do all that basic stuff yourself. If you rightly expect a build tool to find dependencies and know what to link, try [makepp](http://makepp.sourceforge.net/). You may not need a makefile at all, or just a minimal one like

```
CFLAGS = -O3
myprog:                # just a default target to know what to build 
```

The linking part would require a little help on your side, in that it is based on source-header pairs. If `myprog.cpp` includes `a.h` and `b.hpp` it'll look if it can build `a.o` and/or `b.o`, and if so, will link them and recursively check what their sources include.

You will only need to learn more make syntax, if you have more complex requirements. But if you do, there is no limit. Besides doing almost all that GNU make can, there are lots more useful things, and you can even extend your makefiles with some Perl programming.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-29T13:08:46.797

Yes, the "MMD" flag will help you to generate ".d" file (dependency) files. If you include at end of your Makefile( -include *.d ) and then if you make any change in .h file, the respective .o file, will rebuild.

Take this as reference: [https://github.com/saanvijay/makefile-skeleton](https://github.com/saanvijay/makefile-skeleton)

# java - 如何实现闪屏Java

> ID：15725790
> 
> 赞同：-1
> 
> 时间：2013-03-31T02:38:31.147
> 
> 标签：java, multithreading, swing, splash-screen

我得到了这个源代码，用于在 Java 中创建启动画面和线程管理。但我不知道如何实现它。

```
public class SplashWindow extends JWindow {
    public SplashWindow(String filename, Frame f, int waitTime)
    {
        super(f);
        JLabel l = new JLabel(new ImageIcon(filename));
        getContentPane().add(l, BorderLayout.CENTER);
        pack();
        Dimension screenSize =
          Toolkit.getDefaultToolkit().getScreenSize();
        Dimension labelSize = l.getPreferredSize();
        setLocation(screenSize.width/2 - (labelSize.width/2),
                    screenSize.height/2 - (labelSize.height/2));

        addMouseListener(new MouseAdapter()
            {
                public void mousePressed(MouseEvent e)
                {
                    setVisible(false);
                    dispose();
                }
            });
        final int pause = waitTime;
        final Runnable closerRunner = new Runnable()
            {
                public void run()
                {
                    setVisible(false);
                    dispose();
                }
            };
        Runnable waitRunner = new Runnable()
            {
                public void run()
                {
                    try
                        {
                            Thread.sleep(pause);
                            SwingUtilities.invokeAndWait(closerRunner);
                        }
                    catch(Exception e)
                        {
                            e.printStackTrace();
                            // can catch InvocationTargetException
                            // can catch InterruptedException
                        }
                }
            };
        setVisible(true);
        Thread splashThread = new Thread(waitRunner, "SplashThread");
        splashThread.start();
    }
} 
```

我尝试这样实现： ... public static void main(String[] args) { JFrame frame = new JFrame(); frame.setSize(500, 500);

```
 SplashWindow window = new SplashWindow("splash-scren.jpg", frame, 1000);
    }
... 
```

但没有什么可显示的。请帮助我，谢谢:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T08:26:18.360

不要放：

```
"setVisible(true);" 
```

在构造函数中，之后

```
SplashWindow window = new SplashWindow("splash-scren.jpg", frame, 1000); 
```

写：

```
window.setVisible(true); 
```

# sql - How Does NoSQL Scale Out Exactly?

> ID：15725793
> 
> 赞同：2
> 
> 时间：2013-03-31T02:38:46.167
> 
> 标签：sql, nosql, scalability

I use SQL Server 2012\. I have a database sharded across physical tiers by User ID. In my app User is an aggregate root (i.e., nothing about Users comes from or goes into my repository without the entire User coming or going). Everything about one particular User exists on one particular machine.

Is my system any less scalable than one that employs NoSQL? Or, can someone explain how NoSQL systems scale out across servers exactly? Wouldn't they have to shard in a similar manner to what I'm doing? We've all read that NoSQL enables scalability but at the moment I don't see how, say, MongoDB would benefit my architecture.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T08:54:29.543

MongoDB allows you to [scale in two ways](http://www.infoq.com/news/2010/08/MongoDB-1.6): [sharding](http://docs.mongodb.org/manual/sharding/) and [replication](http://docs.mongodb.org/manual/replication/). I think you can do both in MS SQL Server.

What usually is different is the data model:

*   In a relational database, you typically have multiple tables that reference each other. Theoretically, you can do something similar with MongoDB by using multiple collections, however this is *not* the way it's typically done. Instead, in MongoDB, you tend to store all the data that belongs together in the same collection. So typically you have less collections than tables in a database. This will in many times result in more redundancy (data is copied). You can try to do that in a relational database, but it's not quite so easy (there will be less tables, each having more columns).

*   MongoDB collections are more flexible than tables in that you don't need to define the data model up front (the exact list of columns / properties, the data types). This allows you to change the data model without having to alter the tables - the disadvantage is that you need to take this into account in the application (you can't rely on all rows / documents having the same structure). I'm not sure if you can do that in MS SQL Server.

*   In MongoDB, each document is a Json object, so it's a tree and not a flat table. This allows more flexibility in the data model. For example, in an application I'm developing (Apache Jackrabbit Oak / MongoMK), for each property (column) we can store multiple values; one value for each revision. Doing that in a relational database is possible, but quite tricky.

# c# - Entity Framework query error?

> ID：15725796
> 
> 赞同：0
> 
> 时间：2013-03-31T02:39:10.257
> 
> 标签：c#, entity-framework

I'm getting this error:

> The entity or complex type 'Model.Members' cannot be constructed in a LINQ to Entities query.

with my code:

```
public List<Members> getTeamMembers(String tem_reference)
{
        var query = from c in cecbContext.Projects
                    join b in cecbContext.TeamMembers on c.proj_team equals b.team_reference
                    join d in cecbContext.Members on b.mem_reference equals d.mem_reference
                    where c.proj_reference == tem_reference
                    select new Members
                    {
                        mem_reference = d.mem_reference
                    };
    return query.ToList<Members>();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T02:55:02.267

I believe you're running into problems because you're trying to project a mapped entity, and this answer would tell you more: [https://stackoverflow.com/a/5325861/2208058](https://stackoverflow.com/a/5325861/2208058)

This is what I think might work for you:

```
var query = from c in cecbContext.Projects
                join b in cecbContext.TeamMembers on c.proj_team equals b.team_reference
                join d in cecbContext.Members on b.mem_reference equals d.mem_reference
                where c.proj_reference == tem_reference
                select d.mem_reference;
return query.Select(ref => new Members { mem_reference = d.mem_reference  }).ToList(); 
```

# vb.net - 将数据传递给 DataGridView

> ID：15725799
> 
> 赞同：0
> 
> 时间：2013-03-31T02:39:32.680
> 
> 标签：vb.net, visual-studio-2010, .net-4.0

如何将数据从我的文本框（在 form1 中）传递到我的 DataGridView（在 form2 中）？

这是我使用的代码。

```
DataGridView1.ColumnCount = 2
DataGridView1.Columns(0).Name = "Customer"
DataGridView1.Columns(1).Name = "Information"

Dim FNAME As String = Form1.TBFNAME.Text.ToString

Dim row As String() = New String() {"FULLNAME", FNAME}
DataGridView1.Rows.Add(row)
row = New String() {"EMAIL", Form1.TBEADD.Text}
DataGridView1.Rows.Add(row)
row = New String() {"ADDRESS", Form1.TBADDRESS.Text}
DataGridView1.Rows.Add(row)
row = New String() {"CONTACT NO.", Form1.TBCONTACT.Text} 
```

dgv 有两列。并且传递的数据将出现在第二列但是每当我已经输入数据时它在 dgv 中仍然是空白的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T02:54:18.697

您的代码丢失

```
DataGridView1.Rows.Add(row) 
```

对于“联系电话”行。除此之外，似乎还不错。FNAME、TBEADD、TBADDRESS 和 TBCONTACT 都是标准文本框吗？这段代码是从哪里调用的？

一些故障排除建议：尝试创建一个包含 4 个文本框、一个 DataGridView 和一个按钮的最小项目。将上面的代码放入按钮的 Click 事件中。然后尝试使用第二个表单上的 DataGridView 和按钮。将其与您现有的项目进行比较。

# java - 如何将资源目录的路径添加到可执行jar

> ID：15725806
> 
> 赞同：1
> 
> 时间：2013-03-31T02:41:08.557
> 
> 标签：java, jar, classpath

我正在尝试创建一个可执行 jar（code.jar），它依赖于我在单独的项目（=目录）中创建的另一个 jar 文件（other.jar）。

我遇到的问题是 other.jar 中有一个类可以查找该项目中包含的图像文件（xyz.gif）：例如，项目“其他”看起来像：build/images/xyz.gif src/... 等

我制作 other.jar（包括 /images 目录），然后制作 code.jar。

但是，当我运行 java -jar code.jar - 它无法找到 xyz.gif: java.lang.IllegalArgumentException: input == null！在 javax.imageio.ImageIO.read(ImageIO.java...)

我已经尝试了所有我能想到的将 images/xyz.gif 的路径传达给 jar 的方法，包括： 1\. 我尝试将 CLASS-PATH: images/ 添加到 other.jar 的 MANIFEST.MF 2\. 我尝试复制将图像目录添加到 code.jar 的构建中，并将 CLASS-PATH: images/ 添加到 code.jar 的 MANIFEST.MF 3\. 我尝试将 CLASS-PATH: images/xyz.gif - 在两个清单文件中

这似乎是一个普遍的问题：如何将（非类）资源（例如，图像文件）包含到 java jar 文件中，以便 java 可以找到它（没有使用子包的后续包 - 例如, code.jar 使用 other.jar) 需要了解详情。

假设我可以使用以下方法成功运行代码项目：

> java -cp somepath/images com.xyz.code

我想做的是运行：

> java -jar code.jar - 让它在类路径中找到 images/ 目录。

我应该补充一点，包含图像的 jar (other.jar) 项目不是我的代码 - 我只是想编译它以供使用。该代码尝试使用以下方法加载图像： javax.imageio.ImageIO.read(ClassLoader.getSystemResource("xyz.gif"); 关于这是否是加载图像的正确/最佳方式似乎有很多讨论 -我假设这段代码的作者确实使用 Eclipse 运行它（可能会整理出路径），我只是想让它在命令行上运行（最终在 ant 中运行）。

任何帮助将不胜感激。我不明白为什么关于 jar 创建的文档如此之少。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T14:28:57.427

而不是直接运行 jar 尝试将其放在类路径中。像这样的东西：

java -cp code.jar MainClass

这可能会奏效。

编辑：

上述解决方案将不起作用。试试下面的代码来获取图像。

```
ImageIcon myIcon = new ImageIcon( this.getClass().getResource("/resources/icon.gif")); 
```

并将图像放置在以下位置：

```
/myApp/src/resources/icon.gif
/myApp/bin/resources/icon.gif 
```

# python - Error using OSX Automator, Python, and BeautifulSoup

> ID：15725808
> 
> 赞同：3
> 
> 时间：2013-03-31T02:41:57.763
> 
> 标签：python, beautifulsoup, automator

I'm new to Python, and having an issue trying to use Automator in OS X 10.8 to run a Python script that uses Beautiful Soup.

This script runs just fine in Terminal, and other scripts that don't involve Beautiful Soup work just fine for me in Automator using the exact same commands -- but when I try to use Automator to run this script or any other that includes the line `from bs4 import BeautifulSoup`, it returns an error message.

A popup appears with the message 'The action “Run Shell Script” encountered an error. Check the actionʼs properties and try running the workflow again.' The Automator log says 'Run Shell Script failed - 1 error; Traceback (most recent call last):'

It's probably something that should be obvious to me if I understood more about the Python ecosystem, but I've searched and found no answers. In Automator I'm using the "Run Shell Script" action, using the `/bin/bash` shell, passing inputs to stdin, and entering the following commands (all of which works for other non-BeautifulSoup scripts):

```
cd desktop
python script.py 
```

I'm on OSX 10.8, Python 2.7, and BS4.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T16:01:56.660

After some more head banging and digging I found a functional hack [here](https://stackoverflow.com/questions/2093837/using-third-party-modules-with-python-in-an-automator-service?rq=1). It seems that by default Automator was calling a different installation of Python than Terminal does. By specifying the proper installation in the "Run Shell Script" code I got the script to run properly:

```
cd desktop
/Library/Frameworks/Python.framework/Versions/2.7/bin/python script.py 
```

# vb.net - What is the Argb of the ControlDarkDark color in Visual Basic?

> ID：15725813
> 
> 赞同：0
> 
> 时间：2013-03-31T02:43:37.430
> 
> 标签：vb.net

I am currently developing a new program. In my program, users can change the form "back color" and so on.. However in the code I cannot write `color.ControlDarkDark` because that option is unavailable, so therefore I am using the `Color.FromArgb(255, 255, 255)` technique. However I do not know the `ControlDarkDark` argb, so can someone find it out for me. I hope you understand my question, thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T02:50:54.690

Perhaps [this](http://rnddev.blogspot.com/2011/03/any-colour-you-like-as-long-as-its-net.html) listing will help?

# android - 在 WebView 中从相机或图库上传图像

> ID：15725814
> 
> 赞同：30
> 
> 时间：2013-03-31T02:43:41.817
> 
> 标签：android, android-intent, android-webview, android-camera, android-image

此应用程序中的 WebView 会打开一个带有上传按钮的页面。

![带有上传按钮的网页视图中的页面](https://i.stack.imgur.com/K4N5x.png)

下面是允许打开对话框以从图库或相机上传图像的代码块。

**在我的活动中，我有：**

```
 private WebView wv;  

//make HTML upload button work in Webview   
 private ValueCallback<Uri> mUploadMessage;  
 private final static int FILECHOOSER_RESULTCODE=1;

 @Override  
 protected void onActivityResult(int requestCode, int resultCode, Intent intent) {  
  if(requestCode==FILECHOOSER_RESULTCODE)  
  {  
   if (null == mUploadMessage) return;  
            Uri result = intent == null || resultCode != RESULT_OK ? null  
                    : intent.getData();  
            mUploadMessage.onReceiveValue(result);  
            mUploadMessage = null;        
  }  
 } 
```

**在 onCreate 我有以下内容：**

```
 wv.setWebChromeClient(new WebChromeClient()  {
        private Uri imageUri;   

        public void openFileChooser(ValueCallback<Uri> uploadMsg, String acceptType )  {      
             File imageStorageDir = new File(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES), "MyApp");
            // Create the storage directory if it does not exist
            if (! imageStorageDir.exists()){
                imageStorageDir.mkdirs();                  
            }
            File file = new File(imageStorageDir + File.separator + "IMG_" + String.valueOf(System.currentTimeMillis()) + ".jpg");  
            imageUri = Uri.fromFile(file); 

            final List<Intent> cameraIntents = new ArrayList<Intent>();
            final Intent captureIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
            final PackageManager packageManager = getPackageManager();
            final List<ResolveInfo> listCam = packageManager.queryIntentActivities(captureIntent, 0);
            for(ResolveInfo res : listCam) {
                final String packageName = res.activityInfo.packageName;
                final Intent i = new Intent(captureIntent);
                i.setComponent(new ComponentName(res.activityInfo.packageName, res.activityInfo.name));
                i.setPackage(packageName);
                i.putExtra(MediaStore.EXTRA_OUTPUT, imageUri);
                cameraIntents.add(i);

            }

            mUploadMessage = uploadMsg; 
            Intent i = new Intent(Intent.ACTION_GET_CONTENT);  
            i.addCategory(Intent.CATEGORY_OPENABLE);  
            i.setType("image/*"); 
            Intent chooserIntent = Intent.createChooser(i,"Image Chooser");
            chooserIntent.putExtra(Intent.EXTRA_INITIAL_INTENTS, cameraIntents.toArray(new Parcelable[]{}));
            MainActivity.this.startActivityForResult(chooserIntent,  FILECHOOSER_RESULTCODE); 
        } 
```

单击“上传”按钮时，我可以看到相机、图片库和文件资源管理器的选项。 ![相机、图库和文件浏览器上传选项](https://i.stack.imgur.com/f4OZy.png)

文件资源管理器和库按预期工作。问题是，当我使用相机拍照时，它没有上传到“选择文件”选项中，显示状态为“未选择文件”。

**关于选择相机：**

![相机](https://i.stack.imgur.com/pzdR1.png)

**使用相机拍摄快照：**出现返回和检查选项。

![使用相机抓拍](https://i.stack.imgur.com/Ksnwq.png)

**关于选择复选标记：**

**文件未上传:(在“选择文件”选项中**

![在此处输入图像描述](https://i.stack.imgur.com/3GQ9R.png)

**预期：**

![图片上传](https://i.stack.imgur.com/F3gRn.png)

我检查了我是否具有正确的写入权限，因此会生成一个名为“MyApp”的目录并将图片存储在其中（如果在点击网页上的上传按钮后调用相机拍摄）。

在点击复选标记后，如何以编程方式告诉应用程序选择从相机拍摄的照片（存储在 MyApp 目录中）？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2017-02-06T12:24:29.653

经过一番努力后，我找到了一个代码，可用于从 5.0+ 设备的厨房和相机中获取文件

```
 private ValueCallback<Uri> mUploadMessage;
private Uri mCapturedImageURI = null;
private ValueCallback<Uri[]> mFilePathCallback;
private String mCameraPhotoPath;
private static final int INPUT_FILE_REQUEST_CODE = 1;
private static final int FILECHOOSER_RESULTCODE = 1;

private File createImageFile() throws IOException {
    // Create an image file name
    String timeStamp = new SimpleDateFormat("yyyyMMdd_HHmmss").format(new Date());
    String imageFileName = "JPEG_" + timeStamp + "_";
    File storageDir = Environment.getExternalStoragePublicDirectory(
            Environment.DIRECTORY_PICTURES);
    File imageFile = File.createTempFile(
            imageFileName,  /* prefix */
            ".jpg",         /* suffix */
            storageDir      /* directory */
    );
    return imageFile;
} 
```

这是初始化和设置 webview

```
 mWebView= (WebView) findViewById(R.id.webview);
        mWebView.getSettings().setJavaScriptEnabled(true);
        mWebView.getSettings().setPluginState(WebSettings.PluginState.OFF);
        mWebView.getSettings().setLoadWithOverviewMode(true);
        mWebView.getSettings().setCacheMode(WebSettings.LOAD_NO_CACHE);
        mWebView.getSettings().setUseWideViewPort(true);
        mWebView.getSettings().setUserAgentString("Android Mozilla/5.0 AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30");
        mWebView.getSettings().setAllowFileAccess(true);
        mWebView.getSettings().setAllowFileAccess(true);
        mWebView.getSettings().setAllowContentAccess(true);
        mWebView.getSettings().supportZoom();
        mWebView.loadUrl(Common.adPostUrl);

        mWebView.setWebViewClient(new WebViewClient() {
            public boolean shouldOverrideUrlLoading(WebView view, String url) {
                // do your handling codes here, which url is the requested url
                // probably you need to open that url rather than redirect:
                if ( url.contains(".pdf")){
                    Intent intent = new Intent(Intent.ACTION_VIEW);
                    intent.setDataAndType(Uri.parse(url), "application/pdf");
                    try{
                        view.getContext().startActivity(intent);
                    } catch (ActivityNotFoundException e) {
                        //user does not have a pdf viewer installed
                    }
                } else {
                    mWebView.loadUrl(url);
                }
                return false; // then it is not handled by default action
            }

            @Override
            public void onReceivedError(WebView view, int errorCode, String description, String failingUrl) {

Log.e("error",description);
            }

            @Override
            public void onPageStarted(WebView view, String url, Bitmap favicon) {        //show progressbar here

                super.onPageStarted(view, url, favicon);
            }

            @Override
            public void onPageFinished(WebView view, String url) {
          //hide progressbar here

            }

        });
        mWebView.setWebChromeClient(new ChromeClient()); 
```

这是我的 ChomeClient() 方法

```
public class ChromeClient extends WebChromeClient {

    // For Android 5.0
    public boolean onShowFileChooser(WebView view, ValueCallback<Uri[]> filePath, WebChromeClient.FileChooserParams fileChooserParams) {
        // Double check that we don't have any existing callbacks
        if (mFilePathCallback != null) {
            mFilePathCallback.onReceiveValue(null);
        }
        mFilePathCallback = filePath;

        Intent takePictureIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
        if (takePictureIntent.resolveActivity(getPackageManager()) != null) {
            // Create the File where the photo should go
            File photoFile = null;
            try {
                photoFile = createImageFile();
                takePictureIntent.putExtra("PhotoPath", mCameraPhotoPath);
            } catch (IOException ex) {
                // Error occurred while creating the File
                Log.e(Common.TAG, "Unable to create Image File", ex);
            }

            // Continue only if the File was successfully created
            if (photoFile != null) {
                mCameraPhotoPath = "file:" + photoFile.getAbsolutePath();
                takePictureIntent.putExtra(MediaStore.EXTRA_OUTPUT,
                        Uri.fromFile(photoFile));
            } else {
                takePictureIntent = null;
            }
        }

        Intent contentSelectionIntent = new Intent(Intent.ACTION_GET_CONTENT);
        contentSelectionIntent.addCategory(Intent.CATEGORY_OPENABLE);
        contentSelectionIntent.setType("image/*");

        Intent[] intentArray;
        if (takePictureIntent != null) {
            intentArray = new Intent[]{takePictureIntent};
        } else {
            intentArray = new Intent[0];
        }

        Intent chooserIntent = new Intent(Intent.ACTION_CHOOSER);
        chooserIntent.putExtra(Intent.EXTRA_INTENT, contentSelectionIntent);
        chooserIntent.putExtra(Intent.EXTRA_TITLE, "Image Chooser");
        chooserIntent.putExtra(Intent.EXTRA_INITIAL_INTENTS, intentArray);

        startActivityForResult(chooserIntent, INPUT_FILE_REQUEST_CODE);

        return true;

    }

    // openFileChooser for Android 3.0+
    public void openFileChooser(ValueCallback<Uri> uploadMsg, String acceptType) {

        mUploadMessage = uploadMsg;
        // Create AndroidExampleFolder at sdcard
        // Create AndroidExampleFolder at sdcard

        File imageStorageDir = new File(
                Environment.getExternalStoragePublicDirectory(
                        Environment.DIRECTORY_PICTURES)
                , "AndroidExampleFolder");

        if (!imageStorageDir.exists()) {
            // Create AndroidExampleFolder at sdcard
            imageStorageDir.mkdirs();
        }

        // Create camera captured image file path and name
        File file = new File(
                imageStorageDir + File.separator + "IMG_"
                        + String.valueOf(System.currentTimeMillis())
                        + ".jpg");

        mCapturedImageURI = Uri.fromFile(file);

        // Camera capture image intent
        final Intent captureIntent = new Intent(
                android.provider.MediaStore.ACTION_IMAGE_CAPTURE);

        captureIntent.putExtra(MediaStore.EXTRA_OUTPUT, mCapturedImageURI);

        Intent i = new Intent(Intent.ACTION_GET_CONTENT);
        i.addCategory(Intent.CATEGORY_OPENABLE);
        i.setType("image/*");

        // Create file chooser intent
        Intent chooserIntent = Intent.createChooser(i, "Image Chooser");

        // Set camera intent to file chooser
        chooserIntent.putExtra(Intent.EXTRA_INITIAL_INTENTS
                , new Parcelable[] { captureIntent });

        // On select image call onActivityResult method of activity
        startActivityForResult(chooserIntent, FILECHOOSER_RESULTCODE);

    }

    // openFileChooser for Android < 3.0
    public void openFileChooser(ValueCallback<Uri> uploadMsg) {
        openFileChooser(uploadMsg, "");
    }

    //openFileChooser for other Android versions
    public void openFileChooser(ValueCallback<Uri> uploadMsg,
                                String acceptType,
                                String capture) {

        openFileChooser(uploadMsg, acceptType);
    }

} 
```

//这是我的 onActivityResult 方法来处理来自画廊或相机意图的数据

```
@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.LOLLIPOP) {

        if (requestCode != INPUT_FILE_REQUEST_CODE || mFilePathCallback == null) {
            super.onActivityResult(requestCode, resultCode, data);
            return;
        }

        Uri[] results = null;

        // Check that the response is a good one
        if (resultCode == Activity.RESULT_OK) {
            if (data == null) {
                // If there is not data, then we may have taken a photo
                if (mCameraPhotoPath != null) {
                    results = new Uri[]{Uri.parse(mCameraPhotoPath)};
                }
            } else {
                String dataString = data.getDataString();
                if (dataString != null) {
                    results = new Uri[]{Uri.parse(dataString)};
                }
            }
        }

        mFilePathCallback.onReceiveValue(results);
        mFilePathCallback = null;

    } else if (Build.VERSION.SDK_INT <= Build.VERSION_CODES.KITKAT) {
        if (requestCode != FILECHOOSER_RESULTCODE || mUploadMessage == null) {
            super.onActivityResult(requestCode, resultCode, data);
            return;
        }

        if (requestCode == FILECHOOSER_RESULTCODE) {

            if (null == this.mUploadMessage) {
                return;

            }

            Uri result = null;

            try {
                if (resultCode != RESULT_OK) {

                    result = null;

                } else {

                    // retrieve from the private variable if the intent is null
                    result = data == null ? mCapturedImageURI : data.getData();
                }
            } catch (Exception e) {
                Toast.makeText(getApplicationContext(), "activity :" + e,
                        Toast.LENGTH_LONG).show();
            }

            mUploadMessage.onReceiveValue(result);
            mUploadMessage = null;

        }
    }

    return;
} 
```

这是打开相机所需的权限

```
<uses-permission android:name="android.permission.CAMERA" />
<uses-permission android:name="android.permission.CAMERA2" /> // for new versions api 21+
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.RECORD_AUDIO" /> 
```

注意：我的代码还包含运行 3.0+ 的设备的代码，但我从未测试过它们，上面的代码适用于 Lolipop、Marshmallow 和 Nougat 模拟器。还有一件事，如果您看到 Android 系统的图标代替了相机，则意味着您的设备中有许多应用程序可用于处理相机。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-31T15:50:03.990

我想`onActivityResult`实际上调用了该方法，但是第三个参数`Intent intent`为空。看来这是 Nexus 手机的错误。

但是您可以将输出图像 uri 保存到私有变量并使用它来代替意图：

```
private Uri imageUri;

private void showAttachmentDialog(ValueCallback<Uri> uploadMsg) {
    this.mUploadMessage = uploadMsg;

    File imageStorageDir = new File(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES), "TestApp");
    if (!imageStorageDir.exists()) {
        imageStorageDir.mkdirs();
    }
    File file = new File(imageStorageDir + File.separator + "IMG_" + String.valueOf(System.currentTimeMillis()) + ".jpg");
    this.imageUri = Uri.fromFile(file); // save to the private variable

    final Intent captureIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
    captureIntent.putExtra(MediaStore.EXTRA_OUTPUT, imageUri);

    Intent i = new Intent(Intent.ACTION_GET_CONTENT);
    i.addCategory(Intent.CATEGORY_OPENABLE);
    i.setType("image/*");

    Intent chooserIntent = Intent.createChooser(i, "Image Chooser");
    chooserIntent.putExtra(Intent.EXTRA_INITIAL_INTENTS, new Parcelable[] { captureIntent });

    this.startActivityForResult(chooserIntent, FILECHOOSER_RESULTCODE);
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent intent) {
    if (requestCode == FILECHOOSER_RESULTCODE) {
        if (null == this.mUploadMessage) {
            return;
        }

        Uri result;
        if (resultCode != RESULT_OK) {
            result = null;
        } else {
            result = intent == null ? this.imageUri : intent.getData(); // retrieve from the private variable if the intent is null
        }

        this.mUploadMessage.onReceiveValue(result);
        this.mUploadMessage = null;
    }
} 
```

在这段代码中，我将`imageUri`变量添加到活动中，并在两种方法中都使用了它。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-06-05T19:50:34.223

**更新 6/18：**这似乎不适用于搭载 Android 4.2.1 的三星 Galaxy S2。这在带有 4.1.2 的 HTC One X+ 上运行良好。请注意。

* * *

我遇到了同样的问题。这是问题以及我如何解决它。

**问题：**

当`openFileChooser`被调用时，`ValueCallback<Uri>`正在传递回调对象。当我们准备好文件时，这是对 Web 视图的实际回调。我们将此对象保存到`mUploadMessage`并使用`mUploadMessage.onReceiveValue()`函数 in`onActivityResult`将文件返回给 Webview。当您选择相机，点击图片，保存并返回 webview 活动时，我们的活动**可能会**被回收，这意味着我们实际上丢失了回调对象`mUploadMessage`。因此，该文件无法传回 webview 进行上传。

**使固定：**

修复涉及执行一些 javascript，因此在 webview 上启用 javascript。基本上，如果我们丢失了前一个回调对象，我们将获得另一个回调对象。

我们需要创建一个布尔字段“ `mUploadFileOnLoad`”和三个字段。

```
 private int mReturnCode;
    private int mResultCode;
    private Intent mResultIntent;
    private boolean mUploadFileOnLoad = false; 
```

当我们从相机返回到我们的活动时，`onActivityResult`将被调用。如果重新构建活动，则 mUploadMessage 为空。因此，我们将参数保存到字段并设置`mUploadFileOnLoad`为 true 并返回。其他部分非常重要。

```
 @Override
    protected void onActivityResult(int requestCode, 
                                    int resultCode,
                                    Intent intent) 
    {  
      //if the callback object has been recycled      
      if(null==mUploadMessage)
      {
        //Save the result
        mReturnCode = requestCode;
        mResultCode = resultCode;
        mResultIntent = intent;
        //remember to invoke file upload using Javascript
        mUploadFileOnLoad = true;
        return;
      }else
        mUploadFileOnLoad = false;
      //rest of the code
    } 
```

该解决方案的重要部分在`WebViewClient`和`WebChromeClient`

```
 new WebChromeClient() {

        //Other overloaded functions

        //See http://stackoverflow.com/a/15423907/375093 for full explanation
        //The undocumented magic method override
        //Eclipse will swear at you if you try to put @Override here
        // For Android < 3.0
        public void openFileChooser(ValueCallback<Uri> uploadMsg) {
            //If we lost the callback object
            if(mUploadFileOnLoad)
            {
                mUploadMessage = uploadMsg;
                //use the saved result objects to invoke onActivityResult
                onActivityResult(mReturnCode, mResultCode, mResultIntent);
                return;
            }
         //Rest of the code....
         } 
```

和

```
 new WebViewClient() {
        @Override
        public void onPageFinished(WebView view, String url) {
            if(mUploadFileOnLoad)
            {
               webview.loadUrl("javascript:document.getElementById('my_file').click()");
            }
        } 
```

在上面，是网页`my_file`中元素的 id 。`<input>`

```
<input type="file" id="my_file"> 
```

所以，总而言之，我们所做的是 - 当我们没有回调对象时，我们保存从其他活动接收到的数据并设置`mUploadFileOnLoad`为 true 并等待页面加载。当页面加载时，我们使用 Javascript 调用文件选择器，因此我们得到一个回调对象。由于我们已经有了结果，我们调用`onActivityResult`并返回。onActivityResult 现在有一个来自 webview 的回调。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-04-22T01:05:33.147

我为我的英语感到抱歉。

这是一个解决方案。

首先，您像这样定义文件成员。

`public File mTempFile;`

你的打开文件选择器没问题。

`onActivityResult`方法太重要了。

相机应用不返回 URL，但 ValueCallback 必须有 URL。

从 mTempFile 获取 URI。

这是工作。

我以前喜欢这个。

```
if ( mTempFile.exists() ) {

    mUploadMessage.onReceiveValue(Uri.fromFile(mTempFile));
    mUploadMessage = null;

} else {

    mUploadMessage.onReceiveValue(result);
    mUploadMessage = null;
} 
```

如果存在称为相机的 mTempFile，则来自画廊的其他情况。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-05-14T12:40:17.833

确保`android:launchMode="singleInstance"`清单文件中没有

# python - nestedLists[2][4] = "a" 将列表中每个列表的第 5 个成员设置为 "a"

> ID：15725818
> 
> 赞同：0
> 
> 时间：2013-03-31T02:45:45.737
> 
> 标签：python, list, python-3.x, variable-assignment, nested-lists

过去几周我一直在学习 Python 3。我遇到了一个障碍：

从逻辑上讲，nestedLists[2][4] = "a" 这一行应该将这个列表列表中第三个列表的第五个成员设置为“a”。不幸的是，由于我不明白的原因，它将列表中每个列表的第 5 个成员设置为“a”。这是我的代码：

```
gameList = [[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]]

def buildList(gameListt):
    gameListt[0] = ("~ " * 60).split()
    for i in range(len(gameListt)):
        gameListt[i] = gameListt[0]
    return gameListt

gameList = buildList(gameList)

print(gameList)
gameList[2][4] = "a"
print(gameList) 
```

我完全迷失在这里。语法检查得很好，当我尝试这个时：

```
gameList = [["c","a","t"],["h","a","t"]]

gameList[0][2] = "b"
print(gameList) 
```

它工作正常，并输出“cab”和“hat”。我需要帮助！

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T03:47:42.263

`gameList`开始是一个不同列表的列表，但是在这里：

```
for i in range(len(gameListt)):
    gameListt[i] = gameListt[0] 
```

您正在使 gameListt 的每个元素成为*相同*的列表

你应该做这样的事情

```
def buildList(gameListt):
    for i in gameListt:
        i[:] = ["~"] * 60
    return gameListt 
```

此外，如果您像这样初始化 gameList：

```
gameList = [[] for x in range(15)] 
```

更容易看到它有 15 个子列表

# c++ - Difficulty with map of map deletion

> ID：15725822
> 
> 赞同：0
> 
> 时间：2013-03-31T02:46:23.830
> 
> 标签：c++

How do you delete the first element of the inner map of a map of a map?

I've tried doing something like

```
my_map[here].erase(my_map[here].begin()) 
```

but I'm getting unexpected results. Any suggestions or resources would be great.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T02:49:39.277

Does my_map[here] actually exist?

You may want to find it, i.e.

```
if((auto it = my_map.find(here)) != my_map.end()) {
  it->erase(it->begin());

} 
```

If my_map[here] didn't exist when you tried to access it, a new element will be created there:

[http://www.cplusplus.com/reference/map/map/operator%5B%5D/](http://www.cplusplus.com/reference/map/map/operator%5B%5D/)

```
If k does not match the key of any element in the container, the function inserts a new element with that key and returns a reference to its mapped value. Notice that this always increases the container size by one, even if no mapped value is assigned to the element (the element is constructed using its default constructor). 
```

To prevent this, you can use the `find` function as I have indicated above. `find` searches for the element with the specified key. If it finds something, it will return the iterator to that element. Otherwise, it will return `my_map.end()`, which is NOT the last element but a special iterator signifying the end of the structure.

# javascript - Scope when iterating over object in CoffeeScript

> ID：15725830
> 
> 赞同：0
> 
> 时间：2013-03-31T02:48:23.887
> 
> 标签：javascript, coffeescript

I am having a scoping issue when iterating over an object in coffeescirpt. I had a similar issue with looping over an array, but was able to solve that using forEach, which gave me a new scope for each loop. Now I am having a similar issue except instead of an array, this time I am using an object/dictionary. The problem is that when looping over the object, the last `console.log` always returns data for the last person in the object, for all the the people. I think this is a scoping issue but I am not sure how to solve it.

```
for name, data of people
    console.log name
    lookup name, (err, other_data) ->
        console.log data  # this always returns the data for the last person 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T02:53:38.000

Use a [`do` block](http://coffeescript.org/#try%3afor%20filename%20in%20list%0A%20%20do%20%28filename%29%20-%3E%0A%20%20%20%20fs.readFile%20filename,%20%28err,%20contents%29%20-%3E%0A%20%20%20%20%20%20compile%20filename,%20contents.toString%28%29):

```
for name, data of people
    console.log name
    do (data) ->
        lookup name, (err, other_data) ->
            console.log data 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T03:38:07.043

Ionut's answer is correct and I upvoted it.

Just to explain a bit further, the issue you're experiencing is because the callback function you're passing is being run asynchronously in some way. So your loop runs all the way through, and data in the end is set to its final value. The asynchronous callbacks then run one after another, and access the data object. Since the loop has run all the way through, data is always equal to the final value and thats logged.

The do block solves the issue by providing a shorthand for a closure. The code Ionut suggests translates to the following in Javascript:

```
var data, name, _fn;

_fn = function(data) {
  return lookup(name, function(err, other_data) {
    return console.log(data);
  });
};
for (name in people) {
  data = people[name];
  console.log(name);
  _fn(data);
} 
```

So in this case, the data is passed into a closure function which preserves the current value in its scope and returns the lookup function which then maintains a reference to the value in the closure scope.

# python - 尝试使用 Measurement Protocol 将数据发送到 Google Analytics

> ID：15725831
> 
> 赞同：1
> 
> 时间：2013-03-31T02:48:25.283
> 
> 标签：python, http, post, google-analytics

所以，我正在尝试使用他们的测量协议和 Python 将数据发送到 GA。据我所知，我将通过 HTTP 发送 POST 请求，但我不确定从哪里开始。数据可能来自 API 或数据库。

如果它给你一个更好的主意，我的项目会受到这个视频的启发：[http ://www.elisa-dbi.co.uk/blog/tracking-wemo-switch-motion-google-universal-analytics/](http://www.elisa-dbi.co.uk/blog/tracking-wemo-switch-motion-google-universal-analytics/)

我想我正在创建一个包装器，但我不清楚它到底是什么。任何建议或意见将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-29T20:33:33.533

到目前为止，您可能已经创建了包装器，但就其价值而言，我的公司最近发布了一个基于 BSD 许可的库，其 API 类似于 Google 的`analytics.js`.

[https://github.com/analytics-pros/universal-analytics-python](https://github.com/analytics-pros/universal-analytics-python)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-05T04:24:59.180

您可以通过以下文档将 HTTP POST 请求发送到谷歌分析 [https://developers.google.com/analytics/devguides/collection/protocol/v1/parameters](https://developers.google.com/analytics/devguides/collection/protocol/v1/parameters)

# php - how to find the real path from browse button php/unix

> ID：15725834
> 
> 赞同：0
> 
> 时间：2013-03-31T02:49:10.037
> 
> 标签：php, html-lists

I'm working with php on UNIX and I'm trying to get a real path from a browse button. I tried to use

```
echo $_FILES['nom_du_fichier']['temp_name'] 
```

but I got just the temporary path.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T03:06:30.493

The `tmp_name` given in the `$_FILES` array is just that: an intentionally temporary name generated on the server's filesystem for the uploaded file. If you want to keep it, you'll have to move the file yourself to its final intended destination on the server.

**[move_uploaded_file()](http://php.net/move_uploaded_file)** is your best bet here. It has protections to ensure it doesn't act on a file that wasn't truly uploaded via a PHP-handled POST request.

If instead you want to get the full path of the file on the **user's** filesystem (that is, the location of the file on the user's hard drive), the browser doesn't send that information to the server. You'll need to use some client-side scripting to achieve that. However I can't imagine why such information would be useful for a web app to know.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T03:14:49.070

Normally you can not get system path in $_FILES variable. Because $_FILES variable of the PHP always contains information of the files which get uploaded from your HTML page to your webserver.

The reason becuase of you are not getting location of client machine file path is security. Just think as common scenario in which you are user of the website. So you never want your internal file structure to be disclosed. In all mordern browser they do not expose client location even from JavaScript.

If you really need complete file location from client browser then you need to create form using **flash or action script**

# wordpress - 自定义 wp_nav_menu 以用循环生成的锚点替换菜单 URL？

> ID：15725839
> 
> 赞同：0
> 
> 时间：2013-03-31T02:49:50.943
> 
> 标签：wordpress, menu, navigation, wordpress-theming

我正在尝试创建一个使用 Reveal.js 的单页 WordPress 主题，因此所有部分都在同一页面上编入索引（www.example.com/#/、www.example.com/#/1、www .example.com/#/2...)。由于每个部分都是自己的帖子，我无法使用 WP 的内置菜单功能。

我能够通过循环生成功能菜单：>

> ```
> <?php $args= array(
>         'post_type' => 'slide',
>         );
>         $the_query = new WP_Query( $args );
>         $i = 0;
>         while ( $the_query->have_posts() ) : $the_query->the_post();
>             echo '<li><a href="#/'. $i . '">';
>                     the_title();
>                     echo '</a></li>';
>                     $i++;
>                 endwhile;
>             wp_reset_postdata();
>         ?> 
> ```

问题是我的菜单按帖子创建的顺序显示。有没有办法利用 wp_nav_menu （以便用户可以轻松自定义），但用反映每个部分/帖子的循环迭代替换部分 url？有没有不同的方法可以让我简单地拉菜单的顺序并将其应用于这个循环？

我希望能够自动执行此操作，而不是简单地硬编码数据。

非常感谢你的帮助。

# c# - Copy one 2D array to another 2D array

> ID：15725840
> 
> 赞同：22
> 
> 时间：2013-03-31T02:49:51.067
> 
> 标签：c#, arrays, multidimensional-array

I used this code to copy one 2D array to another 2D array:

```
Array.Copy(teamPerformance, 0,tempPerformance,0, teamPerformance.Length); 
```

However, when I change some data in `tempPerformance` then these changes also apply to `teamPerformance`.
What should I do to control that?

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2016-09-01T22:38:22.053

You need Clone()

```
double[,] arr = 
{
   {1, 2},
   {3, 4}
};
double[,] copy = arr.Clone() as double[,];
copy[0, 0] = 2;
//it really copies the values, not a shallow copy, 
//after:
//arr[0,0] will be 1
//copy[0,0] will be 2 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-03-31T02:52:19.803

This is correct: `Array.Copy` performs a *shallow* copy, so the instances of arrays inside the inner dimension get copied by reference. You can use LINQ to make a copy, like this:

```
var copy2d = orig2d.Select(a => a.ToArray()).ToArray(); 
```

Here is a [demo on ideone](http://ideone.com/nyAcZV).

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-31T02:54:35.767

According to MS([http://msdn.microsoft.com/en-us/library/z50k9bft.aspx](http://msdn.microsoft.com/en-us/library/z50k9bft.aspx)):

> If sourceArray and destinationArray are both reference-type arrays or are both arrays of type Object, a shallow copy is performed. A shallow copy of an Array is a new Array containing references to the same elements as the original Array. The elements themselves or anything referenced by the elements are not copied. In contrast, a deep copy of an Array copies the elements and everything directly or indirectly referenced by the elements.

# java - 对对象所做的任何更改，也会更改当前对象

> ID：15725841
> 
> 赞同：1
> 
> 时间：2013-03-31T02:50:09.100
> 
> 标签：java, object, reference, copy

对不起，标题不是很容易理解，但我的英语没有帮助。我是 java 的新程序员，尽管阅读了参数的工作原理，但我并不真正了解发生了什么。

```
sudokuBoard alter = new sudokuBoard();
this.createRandomSudokuBoard();
alter.setBoardFromArray(this.getBoard().clone());

(...) 

for(int i = 0; i < 81; i++) {
    alter.clearCell(positionListonX[i], positionListonY[i]); <<<<<<<<<<<<< Here
    if(alter.numberOfSolutions(2) < 2) {
        this.clearCell(positionListonX[i], positionListonY[i]);
        alter.setBoardFromArray(this.getBoard().clone());
    } else {
        alter.setBoardFromArray(this.getBoard().clone());
    }
} 
```

发生的情况是，在指示的行中，调用`clearCell`对象的方法`alter`也在修改当前对象（this）。在最后一次绝望的尝试中，我尝试使用该`clone()`方法解决它（如您所见），但它不起作用。

这是怎么回事？我错过了什么？非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T03:54:29.397

如果您还没有实现`clone()`in `SudokuBoard`，那么您可能会得到默认`clone()`定义 on `Object`，它不会执行对象的深层复制。有关说明，请参阅[Deep Copy](http://en.wikipedia.org/wiki/Object_copy#Deep_copy)。如果您实际上想要一个完全独立的板子实例`alter`，您将需要执行以下操作：

```
class SudokuBoard
{
    public void setBoard( SudokuBoard other )
    {
        for( int i = 0; i < 81; i++ )
        {
            this.positionListonX[i] = other.positionListonX[i];
            this.positionListonY[i] = other.positionListonY[i];
        }
        // Copy any other properties
    }
} 
```

请注意，如果您的`positionListonX`和`positionListonY`数组中的值不是原始类型，您还需要这些的深层副本。这实际上是一个复制构造函数，但我没有给它签名 ( `public SudokuBoard( SudokuBoard other)`) 因为我不知道 SudokuBoard 的其余内部结构。

这将有助于查看更多在 SudokuBoard 类中定义的方法签名，因此我们知道哪些方法可用并且可以理解它们的作用。

**编辑**

```
class SudokuBoard
{
    public void setBoardFromArray( int[][] otherBoard )
    {
        for( int i = 0; i < otherBoard.length; i++ )
        {
            // Clone the arrays that actually have the data
            this.board[i] = otherBoard[i].clone();
        }
    }
} 
```

# java - 有人可以解释java中从字节数组到十六进制字符串的转换吗

> ID：15725845
> 
> 赞同：2
> 
> 时间：2013-03-31T02:50:46.727
> 
> 标签：java, arrays, hex, byte

我最近在寻找一种将字节数组转换为十六进制字符串的编码。一方面，我发现以下内容：[如何将以下程序的十六进制转换为字节？](https://stackoverflow.com/questions/555503/how-to-convert-hex-to-byte-for-the-following-program)

我已经尝试过这个：

```
StringBuffer stringbuffer = new StringBuffer(cipherbyte.length * 2);
    for (int i = 0; i < cipherbyte.length; i++) {
        if ((cipherbyte[i] & 0xff) < 0x10 ) {
            stringbuffer.append("0");
        }
        stringbuffer.append(Long.toString(cipherbyte[i] & 0xff, 16));
    }
    String ciphertext = stringbuffer.toString();
    return ciphertext; 
```

解码：

```
byte[] bytes = new byte[message.length() / 2];
    for (int i = 0; i < message.length(); i = i+2) {
        String substr = message.substring(i, i+2);
        bytes[i/2] = ((byte) Integer.parseInt(substr, 16));
    } 
```

但我不知道这些算法如何详细工作，请有人解释一下吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T03:11:45.180

```
// create a StringBuffer to hold the ciphertext. Maximum you need double its size if all the byte is 0x0 and 0x9 
StringBuffer stringbuffer = new StringBuffer(cipherbyte.length * 2);

    for (int i = 0; i < cipherbyte.length; i++) { // get each byte
        if ((cipherbyte[i] & 0xff) < 0x10 ) {  // if byte is between 0x0 and 0x9, padding a 0
            stringbuffer.append("0");
        }
        // get current byte as long type and convert into a 16 radix string.
        // this combine the code above if byte is between 0x0 and 0x9
        stringbuffer.append(Long.toString(cipherbyte[i] & 0xff, 16));
    }

    String ciphertext = stringbuffer.toString();
    return ciphertext; 
```

# asp.net-mvc-4 - 您必须调用“WebSecurity.InitializeDatabaseConnection”......但我已经有了

> ID：15725846
> 
> 赞同：4
> 
> 时间：2013-03-31T02:50:48.650
> 
> 标签：asp.net-mvc-4, asp.net-web-api, simplemembership, webmatrix-2

我已经阅读了关于这个主题的一些 SO 问题，但似乎都在处理你应该在哪里打这个电话。

我的问题是不同的：我已经完成了`WebSecurity.InitializeDatabaseConnection()`调用，并且设置了断点，所以我知道它已经被执行了。但我仍然明白`invalid operation exception`我必须打电话给它的说法。

与在 MVC 控制器操作中遇到的大多数其他问题不同，我遇到它是`HttpModule`为了完成 REST WebAPI 控制器的身份验证而编写的。Init 调用包含`WebSecurity.InitializeDatabaseConnection`调用。然后该`OnAuthenticationRequest`方法从请求的 Authorization 标头中提取用户名和密码信息，并`ValidateUser`调用`SimpleMembershipProvider`. 这是我得到异常的地方

> 您必须在调用该类`WebSecurity.InitializeDatabaseConnection`的任何其他方法之前调用该方法`WebSecurity`。

所以

**a）当我已经满足不得到它的条件时，为什么我会得到这个例外。
b) 可以做些什么？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-05T16:06:53.513

经过几个小时面临同样的问题并设置了许多断点后，我找到了适合我的环境的解决方案，我希望其他人可以从中受益：

在文件夹 App_Start 内

```
public class FilterConfig
{
  public static void RegisterGlobalFilters(GlobalFilterCollection filters)
  {
    var attr=new InitializeSimpleMembershipAttribute();
    // here is the important part
    attr.OnActionExecuting(new ActionExecutingContext());
    filters.Add(attr);
  }
} 
```

背景：在我的应用程序中，我有 2 个视图：

*   /Account/Register：这是标准 asp.mvc 4 模板的一部分，具有 [AllowAnonymous] 属性
*   /Task：这是待办事项列表的“索引”视图，TaskController 具有属性 [Authorize(Roles="Administrator")]

我总是在以下位置遇到问题：

1.  在浏览器中调试会话
2.  登录成功
3.  打开需要授权的视图“/Task”
4.  切换到 Visual Studio 并保持浏览器打开
5.  停止调试
6.  更改控制器内的一些代码（设置一些空格就足够了）
7.  开始调试会话
8.  在浏览器中按刷新

此时尚未调用类 InitializeSimpleMembershipAttribute 中的方法“OnActionExecuting”（通过设置断点确定）！

但是当我打开一个不需要授权的视图（即/Account/Register）时，调用了“OnActionExecuting”方法。在此之后，我可以毫无错误地调用 /Task。

所以解决方案是在应用程序启动时为“OnActionExecuting”进行“伪调用”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T14:33:33.063

每次调用 HttpModule 时，您都不需要初始化数据库连接。只需在应用程序启动时执行一次。这是一篇[文章，解释了如何使用 SimpleMembership 进行 Web API 调用的身份验证/授权](http://kevin-junghans.blogspot.com/2013/02/mixing-forms-authentication-basic.html)。还有一个示例项目的源代码链接。

# python - I am having a trouble with an algorithm for assinging syllable boundaries in Python

> ID：15725849
> 
> 赞同：0
> 
> 时间：2013-03-31T02:51:04.227
> 
> 标签：python, string, list, nlp

could you help me please?

I am trying to desing an algorithm that assings the syllable boundaries for any given string of consonanats and vowels 'CVCCVCCVCC'. These strings are stored in a list that may run into hundred of thousands or even million of itmes in length. However, it seems that I did not understand handling lists properly and that is why I am getting this trouble. After composing the code, I click "Run" the module, and Python shell restarts, raising no syntax error. However, when I test the code, it returns an empty list. The code is here. Could you please tell me what is the wrong with my algorithm? I am getting really disappointed.

Thanks in advance for kind help!

```
def assing_boundaries(L):

    """ (List of str -> List of str)

    Assings the syllable boundaries for a given string of Syllable      Templates, with the output meeting the two conditions given below:
Condition1: item[2:] != 'CC'
Condition2: item[:-2] !='C.C'

    >>> assing_boundaries(['CVCCVCC', 'CVCCV:C'])
    ['CVC.CVCC', 'CVC.CV:C']   
    """

    boundary = []
    i = 0

    for item in L:
        for char in item:
            for i in range(len(item) - 1):
                if item[i] == 'CC':
                    char = 'C.C'
                    i = i + 1
                    boundary = boundary.append(item)

    return boundary 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T02:57:16.727

1.  Your loop is wrong. You test `if item[i] == 'CC'`, but `item[i]` can only ever be a single character.
2.  `boundary = boundary.append(item)` is wrong, because `.append` returns `None`. Just do `boundary.append(item)`.

Simpler yet, why not just do `return [item.replace('CC', 'C.C') for item in L]` instead? You can tweak the list comprehension to filter the list as needed.

# javascript - iScroll 不水平滚动 div 的整个宽度

> ID：15725850
> 
> 赞同：3
> 
> 时间：2013-03-31T02:51:04.693
> 
> 标签：javascript, jquery, mobile, trigger.io, iscroll

iScroll 不会水平滚动 div 的整个宽度。它停在错误的宽度值上，我似乎无法找到该值的来源。主滚动 div 宽度没有改变，所以我不需要调用`refresh()`.

本质上，我在滚动 div 中有一个 div，它正在改变大小，所以里面的 div 可以更改为绝对位置，而里面的其他 div 最初是向右浮动的。我不想使用 iScroll，但这是必要的，因为我正在使用 Trigger.io 构建 HTML5 iOS WebView 应用程序。

[http://jsfiddle.net/simpleshadow/wQQEM/15/](http://jsfiddle.net/simpleshadow/wQQEM/15/)

```
var myScrollers = [];
$(function() {

    var scrolls = $('.scrolls');

    $.each(scrolls, function(i, value) {
        var self = this,
            imageDiv = $(this).find('.imageDiv'),
            imageWrapper = $(this).find('.imageWrapper'),
            images = $(this).find('.imageDiv img'),
            width = 0;

        $.each(images, function(index, value){
            width += $(this).width();
        });
        imageDiv.css('right', (-$(this).width()+images.first().width()) + 'px');
        imageWrapper.width(images.first().width());

        myScrollers[i] = new iScroll($(this)[0], { 
            hScroll: true, 
            vScroll: false, 
            hScrollbar: false, 
            vScrollbar: false,
            onScrollMove: function(e){
                var x = 0;
                -myScrollers[i].x >= 0 ? x = -myScrollers[i].x : x = 0;
                updateWindow($(self), x);
            },
            onScrolling: function(e) {
                var x = 0;
                -myScrollers[i].x >= 0 ? x = -myScrollers[i].x : x = 0;
                updateWindow($(self), x);
            }
        });

    });

    // Update the window
    function updateWindow(el, x) {

        var x = x,
            width = 0,
            imageDiv = el.find('.imageDiv'),
            imageWrapper = el.find('.imageWrapper'),
            images = el.find('.imageDiv img');

        el.find('.imageDiv, .imageDiv img').css({
            height: (x/160)*75+75 >= 150 ? 150 : (x/160)*75+75
        });

        for (var i = 0, l = images.length; i < l; i++) {
            width += $(images[i]).width();
            if (imageWrapper.width() >= width && i !== 0) {
                $(images[i]).addClass('out').css({
                    left: (width-$(images[i]).outerWidth(true)) + 'px'
                });
            } else {
                i !== 0 && $(images[i]).removeClass('out').css({
                    left: 0
                });
            }
        }

        if (x+images.first().width() <= width) imageWrapper.width(x+images.first().width());
        imageDiv.css('right', (-$(this).width()+images.first().width()) + 'px');

    }

}); 
```

# asp.net-mvc-3 - MVC3 部分视图不返回 ajax 帖子

> ID：15725851
> 
> 赞同：1
> 
> 时间：2013-03-31T02:51:43.733
> 
> 标签：asp.net-mvc-3, asp.net-ajax

问题的想法是我有一个“CreateINF”视图，然后我显示一个弹出窗口，调用部分视图。在这个弹出窗口中有一个网格，然后当我选择这个网格的一个元素时，我想用弹出窗口中选择的元素的信息填充“CreateINF”视图上的一些文本框，但是最后一个操作不起作用并且我不知道错误在哪里

这是弹出的“PopTr​​abajador”

```
@model PagedList.IPagedList<Sistema_GEC_v3.Models.TrabajadorExterno>

@{
    ViewBag.Title = "Buscar Reserva";
}

<h1><strong>Resultado Búsqueda</strong></h1>
<br />

<table id="MainContent_Table2" rules="all" style="border-color: Black; width: 900px; margin-bottom: 0px;" border="1">
    <tr>
        <th style="font-weight: bold; width: 150px;" align="center">

        </th>
        <th style="font-weight: bold; width: 150px;" align="center">
            @Html.LabelFor(modelItem => Model.First().vcNombre)
        </th>
        <th style="font-weight: bold; width: 150px;" align="center">
            @Html.LabelFor(modelItem => Model.First().vcApellidoPaterno)
        </th>
        <th  style="font-weight: bold; width: 150px;" align="center">
            @Html.LabelFor(modelItem => Model.First().vcApellidoMaterno)
        </th>

    </tr>

@foreach (var item in Model) {
    <tr>
    <td align="center"> 
          @using (Ajax.BeginForm("DevolverTrabajador", "Infracciones",
       null
        , new AjaxOptions
        {
            UpdateTargetId = "update-message",
            InsertionMode = InsertionMode.Replace,
            HttpMethod = "POST",
            OnSuccess = "searchSuccess"
        }, new { @id = "searchForm"+@item.idTrabajadorExterno}))
       {

    <div id="update-message" class="error invisible"></div>
        <input data-val="true"  data-val-number="The field idTrabajadorExterno must be a number." data-val-required="El campo idTrabajadorExterno es obligatorio." id="idTrabajadorExterno" name="idTrabajadorExterno" type="hidden" value="@item.idTrabajadorExterno" />   
            @Html.HiddenFor(model => item.idTrabajadorExterno, new { id = "idTrabajadorExterno" + @item.idTrabajadorExterno })
            @Html.HiddenFor(model => item.vcNombre, new { id = "vcNombre" + @item.idTrabajadorExterno })

        <input type="submit" value="Seleccionar" />
       }
       </td>

        <td style="font-weight: normal; width: 150px;" align="center">
            @Html.DisplayFor(modelItem => item.vcNombre)
        </td>       
        <td style="font-weight: normal; width: 150px;" align="center">
            @Html.DisplayFor(modelItem => item.vcApellidoPaterno)
        </td>
        <td style="font-weight: normal; width: 150px;" align="center">
            @Html.DisplayFor(modelItem => item.vcApellidoMaterno)
        </td>

    </tr>
}

</table> 
```

这是视图“CreateINF”

```
@model Sistema_GEC_v3.Models.Infraccion

@{
    ViewBag.Title = "Create";
}

<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
    <link href="@Url.Content("~/Content/themes/base/jquery.ui.all.css")" rel="stylesheet" type="text/css" />
    <script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery-1.5.1.min.js")" type="text/javascript"></script>    
    <script src="@Url.Content("~/Scripts/jquery-ui-1.8.11.min.js")" type="text/javascript"></script>

<script type="text/javascript">
    var linkObj;
    //$(document).ready(function () {
    $(function () {
        $(".busqueda").button();

        $('#dialog').dialog({
            autoOpen: false,
            width: 930,
            resizable: false,
            title: 'hi there',
            modal: true
        });

        $(".busqueda").click(function () {
            linkObj = $(this);
            var dialogDiv = $('#dialog');
            var viewUrl = linkObj.attr('href');
            $.get(viewUrl, function (data) {
                dialogDiv.html(data);
                dialogDiv.dialog('open');
            });
            return false;
        });
    });
        function searchSuccess() {
            var id = $("#update-message").html();
            var parent = linkObj.closest("tr");
            document.getElementById('tipoTrabajador').value = $("#vcNombre" + id.toString()).val();
            $('#dialog').dialog('close');
        }

        function actualizarVentanaModal(viewUrl) {
            var dialogDiv = $('#dialog');
            $.get(viewUrl, function (data) {
                dialogDiv.html(data);
            });
        }

   // });

</script>

<div id="commonMessage"></div>

<div id="dialog" title="Seleccionar Cliente"></div>

@using (Html.BeginForm())
{
@Html.ValidationSummary(true)
    <fieldset>
        <legend>Infraccion</legend>

        <div class="editor-label">
            @Html.LabelFor(model => model.vcCodigoInfraccion)
        </div>
        <div class="editor-field">
            @Html.TextBoxFor(model => model.vcCodigoInfraccion, new { id = "tipoTrabajador" })
            @Html.ValidationMessageFor(model => model.vcCodigoInfraccion)
        </div>

        <a class="busqueda" href= "@Href("~/Infracciones/PopTrabajador")"> <img src="@Href("~/Content/Images/buscar.png")" alt="0" title="Buscar" id="" border="0" height="16" width="16"/></a>

      </fieldset>

    <p>
    <input value="Guardar" type="submit" name = "button"/>
    </p>
} 
```

这是控制器

```
public ActionResult PopTrabajador(int? page, string tipoTrabajador)
        {
            int tamPag = 10;
            int numPag = page ?? 1;
            var trabajadoresE = dbTExterno.trabajadoresExternos.OrderBy(t => t.vcNombre);

            return PartialView("PopTrabajador", trabajadoresE.ToPagedList(numPag, tamPag));
        }

        [HttpPost]
        public ActionResult DevolverTrabajador(TrabajadorExterno trabajador)
        {
            try
            {
                return Content(trabajador.idTrabajadorExterno.ToString());
            }
            catch (Exception e)
            {
                return RedirectToAction("General", "Error");
            }
        }

        public ActionResult CreateINF()
        {
            return View();
        } 

        //
        // POST: /Infracciones/Create

        [HttpPost]
        public ActionResult CreateINF(FormCollection collection)
        {
            try
            {
                // TODO: Add insert logic here

                return RedirectToAction("Index");
            }
            catch
            {
                return View();
            }
        } 
```

# ruby-on-rails-3 - Ruby on Rails：如何更改错误消息的语言？

> ID：15725852
> 
> 赞同：1
> 
> 时间：2013-03-31T02:51:45.183
> 
> 标签：ruby-on-rails-3, internationalization, rails-i18n

现在我想用它`error.full_messages`来显示错误信息。但它的默认语言是英语。我想显示其他语言的错误信息。我怎样才能做到这一点？还是我必须自己定义一些东西？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T07:36:07.290

假设您指的是模型的错误消息，您可以使用`activerecord.errors`密钥将您的语言环境 yaml 文件中的错误消息国际化。例如：

```
en:
  activerecord:
    errors:
      models:
        user:
          attributes:
            name:
              blank: can't be blank
            email:
              blank: can't be blank
              invalid: is invalid
            password:
              too_short: is too short (minimum is 6 characters) 
```

有关i18n 化错误消息的更多详细信息，请参阅[Rails i18n 指南的第 5.1.1 节。](http://guides.rubyonrails.org/i18n.html#translations-for-active-record-models)

# ruby-on-rails - Rails 使用多个对象进行局部渲染

> ID：15725853
> 
> 赞同：8
> 
> 时间：2013-03-31T02:51:53.533
> 
> 标签：ruby-on-rails

此代码工作正常：

```
<%= render 'sidebars/pages', :object => @categories = pages , :object => { @myobject => '1', @mmyobject => '2' } %> 
```

如果我改成这样：

```
<%= render 'sidebars/pages', :object => { @categories => pages, @myobject => '1', @mmyobject => '2' } %> 
```

然后我在尝试迭代@categories 时收到来自部分的错误：

```
undefined method `each' for nil:NilClass 
```

我对 ruby​​ 和 rails 也很陌生，我很感激任何帮助。

干杯!

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-31T03:01:19.513

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T17:30:56.863

这行代码如上所述：

```
<%= render 'sidebars/pages', :object => @categories = pages , :object => { @myobject => '1', @mmyobject => '2' } % 
```

实际上不会引发任何错误，但也不会将 @myobject 和 @mmyobject 传递给视图。

以下是使用 render 方法指定多个对象的正确*方法：

```
<%= render 'sidebars/pages', :object => [@categories = pages, @myobject = '2'] %> 
```

像这样我可以将多个对象传递给视图，而不必多次定义 :object 。

*至少在我的知识范围内

# php - PHP or WAMP not sure what

> ID：15725854
> 
> 赞同：2
> 
> 时间：2013-03-31T02:51:56.077
> 
> 标签：php, wamp

I have installed WAMP server 2.0 with (PHP 5.4.3). After installing WAMP I have restarted all the services and can open

*   `phpinfo()` - it is showing up fine
*   phpmyadmin - it is also showing up fine.. i can play with database..

however when run simple php file in chrome I could see the code rather than result. below is the code i am trying..

```
<?php
echo "hello world";
?> 
```

below is the link to file which I am trying to access via chrome. file:///C:/WAMP/www/hello%20world.php

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T02:54:08.867

*   Make sure you have started apache
*   Try `http://localhost/hello_horld.php`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T02:54:21.607

To run this script, start a browser use URL `http://localhost/your_file.php` or `http://127.0.0.1/your_file.php`

PHP is a server-side technology (instead of client-side technology like JavaScript). The PHP statements `<?php ... ?>` are processed in the server, and the results returned to the client (browser). so you need to use it through server not direct

# php - How to upload an image without page refresh

> ID：15725857
> 
> 赞同：0
> 
> 时间：2013-03-31T02:52:57.470
> 
> 标签：php, javascript, html, ajax, upload

My question is plain and simple, I am trying to upload an image without a page refresh.

I have looked around the net, and yes, there are quite a few examples. Although, most of them are not what I am after. Some of them still refresh the page. Some preview the image and have a fancy uploader. I am not after anything of this kind.

I have a HTML form with a file browse. Once the user has selected their image, and the submit button is pressed, the image gets saved to the 'uploads/' section in my server.

I have found that the best ways to do this are via AJAX, PHP and through an iFrame. Although, most examples online are either not working at all, or are far to complex.

THIS IS AN ASSIGNMENT. But my teacher has stated that we can use any upload script we find online, as long as we reference it.

I am limited to Javascript (no librarys such as jquery, just plain javascript), PHP, HTML and AJAX.

All help is greatly appreciated, and I am open to all links that you provide also, since I may have missed a few.

Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T03:36:00.193

Use, "new FormData()" and send it via Ajax. That's only works on modern browsers, if you want to support IE, use a hidden iframe as target to your form and handle it using javascript.

# python - sqlalchemy：alembic 批量插入失败：“str”对象没有属性“_autoincrement_column”

> ID：15725859
> 
> 赞同：13
> 
> 时间：2013-03-31T02:54:05.133
> 
> 标签：python, postgresql, sqlalchemy, alembic

我的模型看起来像

```
class Category(UserMixin, db.Model):
    __tablename__ = 'categories'
    uuid = Column('uuid', GUID(), default=uuid.uuid4, primary_key=True,
                  unique=True)
    name = Column('name', String, nullable=False)
    parent = Column('parent', String, nullable=False)
    created_on = Column('created_on', sa.types.DateTime(timezone=True),
                        default=datetime.utcnow())
    __table_args__ = (UniqueConstraint('name', 'parent'),)

    def __init__(self, name, parent):
        self.name = name
        self.parent = parent

    def __repr__(self):
        return '<Category:%s:%s:%s>' % (
            self.uuid, self.name, self.category_type) 
```

其中[GUID](http://www.sqlalchemy.org/docs/core/types.html#backend-agnostic-guid-type)是自定义 sqlalchemy 类型我使用`alembic --autogenerate`选项创建表

```
 op.create_table('categories',
                    sa.Column('uuid', UUID(), nullable=False),
                    sa.Column('name', sa.String(), nullable=False),
                    sa.Column('parent', sa.String(), nullable=False),
                    sa.Column('created_on', sa.DateTime(timezone=True),
                              nullable=True),
                    sa.PrimaryKeyConstraint('uuid'),
                    sa.UniqueConstraint('name', 'parent'),
                    sa.UniqueConstraint('uuid')
    ) 
```

和 PostgreSQL 表为

```
 Table "public.categories"
   Column   |           Type           | Modifiers
------------+--------------------------+-----------
 uuid       | uuid                     | not null
 name       | character varying        | not null
 parent     | character varying        | not null
 created_on | timestamp with time zone |
Indexes:
    "categories_pkey" PRIMARY KEY, btree (uuid)
    "categories_name_parent_key" UNIQUE CONSTRAINT, btree (name, parent) 
```

我尝试运行修订版并将数据库更新为

```
def upgrade():
    op.bulk_insert('categories',
                   [
                       {'name': 'first', 'parent': 'first_parent'},
                       {'name': 'second', 'parent': 'second_parent'}
                   ]
    ) 
```

当我运行时`alembic upgrade head`，我看到错误为

```
 File "/Users/me/.virtualenvs/envs/project/lib/python2.7/site-packages/alembic/environment.py", line 494, in run_migrations
    self.get_context().run_migrations(**kw)
  File "/Users/me/.virtualenvs/envs/project/lib/python2.7/site-packages/alembic/migration.py", line 211, in run_migrations
    change(**kw)
  File "alembic/versions/491d4f91e0bc_generate_categories_.py", line 21, in upgrade
    {'name': 'second', 'parent': 'second_parent'}
  File "<string>", line 7, in bulk_insert
  File "/Users/me/.virtualenvs/envs/project/lib/python2.7/site-packages/alembic/operations.py", line 710, in bulk_insert
    self.impl.bulk_insert(table, rows)
  File "/Users/me/.virtualenvs/envs/project/lib/python2.7/site-packages/alembic/ddl/impl.py", line 179, in bulk_insert
    table._autoincrement_column = None
AttributeError: 'str' object has no attribute '_autoincrement_column' 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-02T16:20:36.380

我所要做的就是创建一个`table`之前的 bulk_insert，即使我在单独的中有一个明确的模式`models.py`

```
import sqlalchemy as sa
from sqlalchemy.sql import table
from alembic import op

def upgrade():
     categories = table('categories',
                       sa.Column('uuid', UUID(),
                              primary_key=True,
                              unique=True, autoincrement=False),
                       sa.Column('name', String),
                       sa.Column('parent', String),
                       sa.Column('created_on', sa.types.DateTime(timezone=True),
                              default=datetime.utcnow())
    )
    op.bulk_insert(categories,
                   [
                       {'name': 'first', 'parent': 'first_parent'},
                       {'name': 'second', 'parent': 'second_parent'}
                   ]
    ) 
```

然后我能够`alembic upgrade head`毫无问题地运行，并且数据在数据库中成功序列化。

# php - cURL 会话问题

> ID：15725863
> 
> 赞同：0
> 
> 时间：2013-03-31T02:54:23.910
> 
> 标签：php, html, curl

```
<?php
session_start();

//create array of data to be posted
//traverse array and prepare data for posting (key1=value1)
//set POST variables
    $url = 'xxx/cart2.php';
    $fields = array(
        'ssl_merchant_id' => ('xxx'),
        'ssl_user_id' => ('xxx'),
        'ssl_pin' => ('xxx'),
        'ssl_transaction_type' => ('xxx'),
        'confirm_code' => ($_POST['confirm_code']),
        'ssl_show_form' => ('xxx'),
        'ssl_cardholder_ip' => ($_POST['ssl_cardholder_ip']),
        'ssl_amount' => ($_POST['ssl_amount'])
    );

//url-ify the data for the POST
foreach($fields as $key=>$value) { $fields_string .= $key.'='.$value.'&'; }
rtrim($fields_string, '&');

//open connection
$ch = curl_init('xxx/cart2.php');

//set the url, number of POST vars, POST data
curl_setopt($ch,CURLOPT_URL, $url);
curl_setopt($ch,CURLOPT_POST, count($fields));
curl_setopt($ch,CURLOPT_POSTFIELDS, $fields_string);

//execute post
$result = curl_exec($ch);

//close connection
curl_close($ch);
echo $result;

?> 
```

每次加载此代码时，它都会创建一个新会话！如何防止每次加载新会话？这只是我发现并修改为我自己使用的一个脚本，因为我以前从未使用过 cURL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T03:18:54.503

创建一个名为“cookie.txt”的可写文本文件。您将需要它来保存从 cURL 返回的会话数据。

```
$cookie_file = "cookie.txt";
if (!file_exists($cookie_file)) {
    $handle = fopen($cookie_file, 'w') or die('Cannot open file:  '.$cookie_file);
}
if (!is_writable($cookie_file) && !chmod($cookie_file, 0777)) {
    die ("chmod() failed on file $cookie_file");
} 
```

在这里设置选项并告诉 cURL 将 cookie 数据保存在哪里。

```
curl_setopt ($ch, CURLOPT_COOKIEJAR, $cookie_file);
curl_setopt ($ch, CURLOPT_COOKIEFILE, $cookie_file); 
```

因此，在您使用 cURL 发布表单后，会话数据将被保存，并且每次运行脚本时都不会加载新会话。

# python - 将 build_ext 选项传递给 pip install

> ID：15725869
> 
> 赞同：25
> 
> 时间：2013-03-31T02:55:44.293
> 
> 标签：python, build, installation, pip

有没有办法将`build_ext`选项传递给 pip install 以改变包中包含的扩展的编译方式？（是的，我知道可以下载源代码并使用 custom 构建/安装`setup.cfg`，但我很好奇是否可以`setup.cfg`通过 pip 直接传递可以指定的选项。）

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2015-08-02T13:13:49.140

可以使用`pip --global-option=build_ext`.

例如，这是`requirements.txt`用于支持 PNG 和 JPEG 且没有其他外部库的 Pillow：

```
pillow \
        --global-option="build_ext" \
        --global-option="--enable-zlib" \
        --global-option="--enable-jpeg" \
        --global-option="--disable-tiff" \
        --global-option="--disable-freetype" \
        --global-option="--disable-tcl" \
        --global-option="--disable-tk" \ 
        --global-option="--disable-lcms" \
        --global-option="--disable-webp" \
        --global-option="--disable-webpmux" \
        --global-option="--disable-jpeg2000" 
```

[受此答案](https://stackoverflow.com/a/22942120/15862)`pip --global-option`启发，这确实是对 pip 命令的滥用，而不是真正的全局 pip 选项。但这会使 pip 执行两个命令——首先是然后——像这样：`build_ext``build_ext``install`

```
pip \
    build_ext \
        --enable-zlib --enable-jpeg \
        --disable-tiff --disable-freetype --disable-tcl --disable-tk \
        --disable-lcms --disable-webp --disable-webpmux --disable-jpeg2000 \
    install pillow 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-10-08T16:51:40.877

您可以像使用 custom 一样在主目录中创建`.pydistutils.cfg`文件并覆盖构建选项`setup.cfg`，但无需先解压缩包。

因此，例如，您可以编写类似这样的内容来更改 include & lib 搜索路径：

```
[build_ext]
include_dirs=/usr/local/include
library_dirs=/usr/local/lib64
rpath=/usr/local/lib64 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-09T15:20:09.967

我在其中搜索了此类选项，`pip`但没有找到（也搜索了[源代码](https://github.com/pypa/pip)）。

我认为[easy_install/setuptools](http://grokbase.com/t/python/distutils-sig/068837rg3g/distutils-passing-build-ext-arguments-to-easy-install)中也没有这样的选项。

我看到的唯一解决方案是一种老式的方式：

`download / unpack / setup.py build_ext [options] / setup.py install`.

# java - 使用 jar 文件中的字节数组缓存声音

> ID：15725871
> 
> 赞同：4
> 
> 时间：2013-03-31T02:56:16.297
> 
> 标签：我可以使用javasound, , 标签, java, stream, bytearray, javasound, getresource

[我可以使用javasound](/questions/tagged/javasound "显示标记为“javasound”的问题")标签 wiki 页面中的“播放`Clip`”解决方案来阅读和播放声音。但是，对于经常播放的声音（例如，快速的激光枪声、脚步声等），每次您想要创建新的. 因此，我试图将读取的文件缓存到 a中，然后从缓存中加载它们。`Clip``byte[]`

加载部分很简单：

```
// Get a BAIS.
ByteArrayInputStream bais = new ByteArrayInputStream(cache.get(fileName));

// Convert to an audio stream.
AudioInputStream ais = AudioSystem.getAudioInputStream(bais); 
```

然而，最初将文件内容放入字节数组被证明是一个挑战。问题是我正在尝试从*.jar 中*包含的文件中读取声音- 因此使用`java.io.File`不是一个选项（据我了解），并且我看到的各种解决方案（下面的链接）不适用。

在我看来，最难的部分是在不使用`java.io.File`. 我可以用 a 读取字节`Scanner`，但我需要将它们读入某个数组。我应该使用`ArrayList<Byte>`吗？（请参阅下面的“次优示例”。）

所以，我的问题是：**我可以将嵌入文件读入以`byte[]`供以后重复访问的最佳方式是什么？**

# 限制

*   我必须能够访问 jarfile 中的文件。我相信这将我限制在`Class.getResource`or `Class.getResourceAsStream`。
*   文件字节应存储在标准`byte[]`变量中。
*   我更愿意这样做*而不*引入不必要的依赖项，例如 Guava 或 Apache Commons。到目前为止，我的整个项目都是用 vanilla Java (JDK6) 编写的，我想保持这种状态。

# 我尝试了什么？

我试过使用`RandomAccessFile`，像这样：

```
// Get the file.
RandomAccessFile f = new RandomAccessFile(fullPath, "r");

// Create a byte array.
theseBytes = new byte[(int) f.length()];

// Read into the array.
f.read(theseBytes);

// Close the file.
f.close();

// Put in map for later reference.
byteCache.put(fullPath, theseBytes); 
```

但是，显然这只适用于磁盘引用的文件；我收到以下错误：

> java.io.FileNotFoundException: \path\to\sound\in\jar\file.wav（系统找不到指定的路径）

# 次优示例

尽管此示例*有效*`ArrayList`，但由于不断调整大小等，我认为 an 不是最好的方法。

```
// Get a stream.
InputStream s = clazz.getResourceAsStream(fullPath);

// Get a byte array.
ArrayList<Byte> byteArrayList = new ArrayList<Byte>();

// Create a storage variable.
int last = 0;

// Loop.
while ((last = s.read()) != -1) {
    // Get it.
    byteArrayList.add((byte) last);
}

// Create a byte array.
theseBytes = new byte[byteArrayList.size()];

// Loop over each element.
for (int i = 0; i < theseBytes.length; i++) {
    // Set the byte.
    theseBytes[i] = byteArrayList.get(i);
} 
```

# 以前的阅读

*   [Dmitry Mitskevich 对“Java 中的文件到字节 []”的回答](https://stackoverflow.com/a/8432074/732016)
*   [GregS 对“在 JAVA 中将二进制文件读入单字节数组”的回答](https://stackoverflow.com/a/7250275/732016)
*   javasound[标签](/questions/tagged/javasound "显示标记为“javasound”的问题")wiki 页面

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T03:17:26.097

试试这个：

```
InputStream is = new BufferedInputStream(getClass().getResourceAsStream(name));
ByteArrayOutputStream out = new ByteArrayOutputStream();
for (int b; (b = is.read()) != -1;) {
    out.write(b);
}
byte[] a = out.toByteArray(); 
```

中`name`文件的路径在哪里`.jar`。

# perl - Perl shell one-liner: picking last field of the last line of stdin

> ID：15725872
> 
> 赞同：1
> 
> 时间：2013-03-31T02:56:42.803
> 
> 标签：perl

Given an output like this:

```
-rw-r--r--   1 tinosino  staff   4.0K 21 Mar  2012 EtcHosts_Backup_2012-03-21_21-19-10.txt
-rw-r--r--   1 tinosino  staff   3.8K  1 Apr  2012 EtcHosts_Backup_2012-04-01_01-06-12.txt
-rw-r--r--   1 tinosino  staff   3.9K 18 Jun  2012 EtcHosts_Backup_2012-06-18_18-33-40.txt
-rw-r--r--   1 tinosino  staff   3.9K 27 Aug  2012 EtcHosts_Backup_2012-08-27_09-37-44.txt 
```

I'd like to get the last field (the filename) of the last line (27 Aug), basically:

```
EtcHosts_Backup_2012-08-27_09-37-44.txt 
```

I am interested in how to best do this in `perl`.

If there is a better way to do this with just `ls`, it is not what I am looking for (I know I can sort by date, creation, modification, etc. and I can `-1t` to just show the filename)

This is essentially about learning how to do in `perl` what I generally do in `awk`:

```
ll | tail -n 1 | awk '{print $NF}' 
```

giving:

```
EtcHosts_Backup_2012-08-27_09-37-44.txt 
```

Which is "the desired answer".

Here my attempt:

```
ll | perl -lane 'eof() && print $F[$#F]' 
```

Could I improve on this ugly-looking piece of.. F? `$F[$#F]`

The answer "seems right", yet the way to get $NF seems primordial.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T03:09:33.163

Improvement:

```
perl -lane 'eof() && print $F[-1]'  # or ...
perl -lane 'eof() && print pop @F' 
```

Further:

```
perl -lane 'END { print $F[-1] }'   # or...
perl -lane 'END { print pop @F }' 
```

and of course, why not just:

```
ls | tail -1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T03:12:55.403

To answer your specific question about improving on `$F[$#F]`, Perl supports using negative numbers as array indices. For example, -1 refers to the last element of the list, so you could write your one-liner as:

```
ll | perl -lane 'eof() && print $F[-1]' 
```

# authentication - firebase 简单的电子邮件密码认证

> ID：15725873
> 
> 赞同：2
> 
> 时间：2013-03-31T02:56:48.770
> 
> 标签：authentication, firebase

我正在尝试使用“rememberMe”选项进行 Firebase 简单的电子邮件/密码登录。但我不能让它工作，我真的不明白必须做什么。

这是我使用的代码：

```
$('#btn-sign-in').click( function(e){
    var email = $('#login-user').val();
    var password = $('#login-password').val();

    authClient.login('password', {
        email: email,
        password: password,
        rememberMe: true
    });
}); 
```

“rememberMe”选项应该如何工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T04:32:04.720

[此处为 Firebase 工程师] `rememberMe`Firebase 简单登录中的选项将默认会话长度延长至 30 天。这会自动发生，并且在技术上通过生成会话令牌（并将它们存储在用户的本地存储中）延长一段时间来启用。

你能澄清你看到的问题吗？请记住，要使用此功能集，您必须在 Forge 中启用密码身份验证（可在[https://YOUR-FIREBASE.firebaseIO.com](https://YOUR-FIREBASE.firebaseIO.com)访问），并且在您的代码中，使用回调实例化 FirebaseAuthClient 以监控用户的身份验证状态，如[https://www.firebase.com/docs/security/simple-login-overview.html](https://www.firebase.com/docs/security/simple-login-overview.html)中所述。

用户第一次登录后，您传递给的回调`new FirebaseAuthClient(function(error, user){..})`将被调用`error=null`和一个用户对象。刷新页面后，只要 30 天的会话仍处于活动状态，就会再次使用用户对象调用此回调。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-26T01:32:54.723

我遇到了上面的问题，kimbui 是正确的，它与在 Chrome 中使用“file://”类型的 URL 直接相关。在这种情况下，localStorage 对象不可用于写入，但会静默失败。因此，Firebase 认为它已成功存储会话信息，但在刷新时，它不存在。如果您将代码部署到 Apache localhost 或任何其他合适的网络服务器，一切都会完美运行。

不确定 Firebase 是否可以采取任何措施来发现这个问题，并且可能会向控制台发出错误，但非常感谢 kimbui 发现了答案。

# mysql - What does the ON DELETE and ON UPDATE mean where setting a FOREIGN KEY in MySQL?

> ID：15725877
> 
> 赞同：0
> 
> 时间：2013-03-31T02:57:14.117
> 
> 标签：mysql, foreign-keys

I'm trying to read about how to use `FOREIGN KEYS` in MySQL. I see in many places that they have `ON DELETE` and `ON UPDATE`.

What's the difference between them? What exactly do they do?

Here is a small example of my database:

```
class
------
classId
profId    //Refers to a specific profId from professor table
courseId  //Refers to a specific courseId from course table
semId     //Refers to a specific semId from semester table

professor
---------
profId
first
last

course
------
courseId
department
number
title

semester
--------
semId
season
year 
```

Also, a side note, which would be referred to as the `FOREIGN KEY`, the index id in the individual tables or the id's in the class table?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T03:10:15.683

Having foreign keys, means that your table has a relationship with an other table.

If you delete or update for example a record from the one, what should happen to the other?

For example I have the table "customer" and the table "loans". If I delete for one reason my customer, then I probably do not want to delete his loans. So i set the foreign key of the loans to the customer to be null (for example).

If I have a supermarket, and I delete my customer, then I would probably want to delete the products he bought as well.

I want to believe that I answered you :)

# php - HTML 表单不会转移到 PHP 日期

> ID：15725881
> 
> 赞同：0
> 
> 时间：2013-03-31T02:57:22.110
> 
> 标签：php, html, forms, unix, mktime

由于某种原因，我无法让 php 将 HTML 表单输入识别为日期。

我有以下 HTML 表单：

```
<form action="Input.php" method="post">
Depature Date: 
<select name="DMonth">
<option>- Select Month -</option>
<option value="01">January</option>
<option value="02">February</option>
<option value="03">March</option>
<option value="04">April</option>
<option value="05">May</option>
<option value="06">June</option>
<option value="07">July</option>
<option value="08">August</option>
<option value="09">September</option>
<option value="10">October</option>
<option value="11">November</option>
<option value="12">December</option>
</select>
<select name="DDay">
<option>- Select Day -</option>
    <option value="01">1</option>
    <option value="02">2</option>
    <option value="03">3</option>
    <option value="04">4</option>
    <option value="05">5</option>
    <option value="06">6</option>
    <option value="07">7</option>
    <option value="08">8</option>
    <option value="09">9</option>
    <option value="10">10</option>
    <option value="11">11</option>
    <option value="12">12</option>
    <option value="13">13</option>
    <option value="14">14</option>
    <option value="15">15</option>
    <option value="16">16</option>
    <option value="17">17</option>
    <option value="18">18</option>
    <option value="19">19</option>
    <option value="20">20</option>
    <option value="21">21</option>
    <option value="22">22</option>
    <option value="23">23</option>
    <option value="24">24</option>
    <option value="25">25</option>
    <option value="26">26</option>
    <option value="27">27</option>
    <option value="28">28</option>
    <option value="29">29</option>
    <option value="30">30</option>
    <option value="31">31</option>
</select>
<select name="DYear">
<option>- Select Year -</option>
<option value="2013">2013</option>
<option value="2014">2014</option>
<option value="2015">2015</option>
<option value="2016">2016</option>
<option value="2017">2017</option>
<option value="2018">2018</option>
<option value="2019">2019</option>
<option value="2020">2020</option>
<option value="2021">2021</option>
<option value="2022">2022</option>
</select><br>
Departure Time: <select name="DHour" input type="number">
<option>- Select Hour -</option>
<option value="00">12 a.m.</option>
<option value="01">1 a.m.</option>
<option value="02">2 a.m.</option>
<option value="03">3 a.m.</option>
<option value="04">4 a.m.</option>
<option value="05">5 a.m.</option>
<option value="06">6 a.m.</option>
<option value="07">7 a.m.</option>
<option value="08">8 a.m.</option>
<option value="09">9 a.m.</option>
<option value="10">10 a.m.</option>
<option value="11">11 a.m.</option>
<option value="12">12 p.m.</option>
<option value="13">1 p.m.</option>
<option value="14">2 p.m.</option>
<option value="15">3 p.m.</option>
<option value="16">4 p.m.</option>
<option value="17">5 p.m.</option>
<option value="18">6 p.m.</option>
<option value="19">7 p.m.</option>
<option value="20">8 p.m.</option>
<option value="21">9 p.m.</option>
<option value="22">10 p.m.</option>
<option value="23">11 p.m.</option>
</select>
<select name="DMin">
<option>- Select Minute -</option>
<option value="00">00</option>
<option value="15">15</option>
<option value="30">30</option>
<option value="45">45</option>
</select>
<br>
<input type="submit" value="Submit">
</form> 
```

和以下PHP：

```
$DCity=(int) $_POST["DCity"];
$ACity=(int) $_POST["ACity"];
$DMonth=(int) $_POST["DMonth"];
$DDay=(int) $_POST["DDAY"];
$DYear=(int) $_POST["DYear"];
$DHour=(int) $_POST["DHour"];
$DMin=(int) $_POST["DMin"];
$DTime = mktime($DHour, $DMin, 0, $DMonth, $DDay, $DYear);
print date(DATE_RFC822, $DTime); 
```

我应该从中获得的回报应该反映在表格中输入的任何内容，但是返回的只是当前日期和时间。我的代码某处有错误吗？我尝试了多种 php 时间方法，但都返回当前日期而不是 HTML 表单中输入的日期。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T03:02:46.860

[`mktime()`](http://php.net/manual/en/function.mktime.php)默认每个参数为当前日期/时间。因此，您的`$_POST`值似乎没有按预期设置、为空或类型错误。

According to [Converting to integer](http://www.php.net/manual/en/language.types.integer.php#language.types.integer.casting) you shouldn't need to explicitly cast at all, as the function expects `int`s anyhow. But doing the explicit cast or conversion will allow you to check if that is actually working prior to relying on the function call to do it for you (and in this case, possibly fail to do so).

You're using `(int)` to cast... What about using `intval()` instead or in addition, and then test/`print` the input values before your conversion, and then again after (before `mktime()`).

I expect you'll find they're not as expected, and if so, that your explicit casts are also failing.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T03:10:40.223

Perhaps there is a problem because some of the numbers start with a leading zero, which makes them octal. A number like 08 means nothing in octal.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T03:38:15.500

Figured it out! It was a simple mistake with capitalizations. I have $_POST("DDAY") instead of $_POST("DDay") so it wasn't calling the "DDay" input from the HTML. Thanks for everyone's help!

# c# - Return JSON file with ASP.NET Web API

> ID：15725884
> 
> 赞同：28
> 
> 时间：2013-03-31T02:59:27.593
> 
> 标签：c#, javascript, json, asp.net-web-api

I am trying to return a JSON file using ASP.NET Web API (for testing).

```
public string[] Get()
{
    string[] text = System.IO.File.ReadAllLines(@"c:\data.json");

    return text;
} 
```

In Fiddler this does appear as a Json type but when I debug in Chrome and view the object it appears as and array of individual lines (left). The right image is what the object should look like when I am using it.

**Can anyone tell me what I should return to achieve a Json result in the correct format?**

[![alt](https://i.stack.imgur.com/ZHvam.png)](https://i.stack.imgur.com/ZHvam.png)

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-03-31T03:56:35.847

Does the file already has valid JSON in it? If so, instead of calling `File.ReadAllLines` you should call `File.ReadAllText` and get it as a single string. Then you need to parse it as JSON so that Web API can re-serialize it.

```
public object Get()
{
    string allText = System.IO.File.ReadAllText(@"c:\data.json");

    object jsonObject = JsonConvert.DeserializeObject(allText);
    return jsonObject;
} 
```

This will:

1.  Read the file as a string
2.  Parse it as a JSON object into a CLR object
3.  Return it to Web API so that it can be formatted as JSON (or XML, or whatever)

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-03-31T04:02:27.067

我找到了另一个解决方案，如果有人感兴趣，它也可以工作。

```
public HttpResponseMessage Get()
{
    var stream = new FileStream(@"c:\data.json", FileMode.Open);

    var result = Request.CreateResponse(HttpStatusCode.OK);
    result.Content = new StreamContent(stream);
    result.Content.Headers.ContentType = new MediaTypeHeaderValue("application/json");

    return result;
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-02-09T15:02:12.210

我需要类似的东西，但需要[IHttpActionResult](https://stackoverflow.com/questions/21758615/why-should-i-use-ihttpactionresult-instead-of-httpresponsemessage) ( [WebApi2](https://docs.microsoft.com/en-us/aspnet/web-api/overview/getting-started-with-aspnet-web-api/tutorial-your-first-web-api) )。

```
public virtual IHttpActionResult Get()
{
    var result = new System.Net.Http.HttpResponseMessage(System.Net.HttpStatusCode.OK)
    {
        Content = new System.Net.Http.ByteArrayContent(System.IO.File.ReadAllBytes(@"c:\temp\some.json"))
    };

    result.Content.Headers.ContentType = new System.Net.Http.Headers.MediaTypeHeaderValue("application/json");
    return ResponseMessage(result);
} 
```

# c# - How do I bind a javascript class to a asp:linkbutton

> ID：15725885
> 
> 赞同：0
> 
> 时间：2013-03-31T02:59:42.273
> 
> 标签：c#, javascript

I have a formview attached to a gridview so that when I click select on a record on my gridview, the record populates in the gridview. Now I want to open the formview in a lightbox, but I am running into trouble.

here is my javascript class:

```
 $('.lightbox').click(function () {
            $('.backdrop, .box').animate({ 'opacity': '.50' }, 300, 'linear');
            $('.box').animate({ 'opacity': '1.00' }, 300, 'linear');
            $('.backdrop, .box').css('display', 'block');
        }); 
```

here is my HTML:

```
 <asp:TemplateField HeaderText="Select">
    <ItemTemplate>
    <asp:LinkButton ID="LinkButton3" CommandArgument='<%# Eval("num") %>' CommandName="Select" runat="server" Text="Select" /> 
    </ItemTemplate>
    </asp:TemplateField> 
```

How to add the javascript class "lightbox" to the linkbutton?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T03:29:53.313

ASP.NET controls have a `CssClass` property you can write to, which translates into a `class` HTML attribute.

```
<asp:LinkButton ID="LinkButton3" ... CssClass="lightbox" /> 
```

# xcode - 如何使 Xcode 调试器选项卡在启动时处于活动状态，然后在完成时切换回原始选项卡？

> ID：15725890
> 
> 赞同：2
> 
> 时间：2013-03-31T03:00:36.380
> 
> 标签：xcode, debugging, view, window, behavior

当我运行我的应用程序时，它会在启动时切换到调试器选项卡，但是当它完成时，我想让它切换回我最初所在的编辑器选项卡。

在运行>开始下的行为设置中，我有“在活动窗口中显示名为调试器的选项卡”这很完美，但我无法让它在完成后切换回来。对于 Completes 设置，我尝试用它在选项卡上显示的名称替换显示选项卡名称，但它没有切换回它。

我的主要目标是让它在我运行程序时使全屏调试器窗口处于活动状态，然后当我退出时，我想切换回我所在的全屏编辑器。

任何帮助都是极好的！谢谢！

# javascript - 如何仅删除标签内的某些元素？

> ID：15725891
> 
> 赞同：0
> 
> 时间：2013-03-31T03:00:43.950
> 
> 标签：javascript, jquery, html, href, jquery-wrap

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T03:14:27.953

用跨度替换锚：

```
if ($('#page1').is(':visible')) {
    $('#page1link').contents().unwrap().wrap('<span id="page1link">');
    $('#page2link').contents().unwrap().wrap('<a href="#page2" onclick="return false" class="link" id="page2link"></a>');
} else {
    $('#page2link').contents().unwrap().wrap('<span id="page2link">');
    $('#page1link').contents().unwrap().wrap('<a href="#page1" onclick="return false" class="link" id="page1link"></a>');
} 
```

# php - 来自 *.sql 文件的多重查询，无需访问 phpmyadmin

> ID：15725892
> 
> 赞同：0
> 
> 时间：2013-03-31T03:01:00.053
> 
> 标签：php, mysql

我破坏了数据库（错误的 MyBB 升级），但我在 *.sql 文件中有备份。我无权访问 MySQL（我不在 MySQL 白名单上 - 来自管理服务器的错误），但我可以使用 PHP 从服务器发送数据......如果我有 - 例如这个 - 怎么办 - （〜50000行）？：

```
INSERT INTO mybb_posts (`pid`..some string..'0');
INSERT INTO mybb_posts (`pid`..some string..'0'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T03:04:52.080

```
$pdo = new PDO(/* credentials */);
foreach (explode(';', file_get_contents('file.sql')) as $query) {
    $pdo->query($query);
} 
```

如果时间不够用，请使用`set_time_limit(0)`. 如果这不起作用，请考虑拆分文件并一次运行更少的查询。如果您的内存不足，也一样。

# mobile - Haxe、as3hx、NME、Apache FlexJS - 将 Flash Builder Flex 项目转换为 HTML5+Js

> ID：15725893
> 
> 赞同：2
> 
> 时间：2013-03-31T03:01:10.890
> 
> 标签：mobile, flash-builder, haxe, nme, flexjs

过去曾使用 Flash Builder 4.6 创建一些移动应用程序。创建的应用程序仅在高端手机型号上运行良好，但运行速度也比原生应用程序慢。特别是当应用程序正在“启动”时，应用程序完全加载需要一段时间。我知道为什么这会更慢，因为 AIR 是一个额外的应用程序层，可以将其转换为本机。

让我告诉你我的观点。我知道开发非原生软件比原生软件慢。在某些情况下，您需要原生（用于速度、图形等），但大多数时候它并不重要（不需要软件的所有部分都直接使用硬件）。我想要实现的目标是通过开发一次并能够将其移植到多个平台（如果需要）来降低开发成本。我理解为什么有这么多语言，在我看来这只是因为他们喜欢这种语言，想要带来新的东西，因为它是新的，或者将开发人员绑定到特定的平台（商业原因）。事实上，硬件类型或运行方式并没有太大差异，所以当它没有带来任何新事物时，为什么要投资于“新”事物。我想开发持久的代码，而不是绑定到平台炒作或趋势。例如，当您投资为特定平台（例如 Window Mobile）编写代码时，这些天您的代码毫无用处。尤其是在移动世界中，事情可能会迅速变化。

反正最近发现了Haxe的存在，不知道这个存在。听起来很有希望，使用一种语言（类似 AS）并将其移植到另一种语言。一个非常有趣的事情是可以将它移植到 Javascript 并使用它，例如结合 phonegap 来创建移动应用程序，或者能够在不需要闪存的情况下在网站上使用它，或者将它嵌入到 VM 的可执行文件中叫尼科。他们声称它生成的代码比原始的 Adob​​e 框架更快。我可以想象它更快，因为 Haxe 的所有元素都非常快。

然后我找到了 NME（也不知道有这个），这似乎是基于 Haxe 和 Neko，为不同平台创建移动应用程序，包括 Javascript 和 HTML5。这给了我将 flex 项目移植到 NME 的想法，以摆脱对 Adob​​e AIR 的要求，也许可以更快地执行并使用相同的代码获得更多可能性。

然后我找到了 as3hx 和一些关于 Apache FlexJS（以前称为 Adob​​e FalconJS）的信息。as3hx 将 ActionScript 代码转换为 Haxe 代码，FlexJS 将 AS+XML 转换为不可编辑的 HTML5+Javascript 代码。我更喜欢 as3hx 因为扩展的可能性，但不知道如何在转换后实现项目（最终只得到一些 hx 文件）。没有尝试过 FlexJS，因为它似乎是实验性的（不是官方的），并且需要使用更新的 Apache Flex Framework 4.9 更新 Adob​​e Flex 框架。我犹豫是否要更新 Flash Builder 中的框架，因为我意识到我可能会搞砸原始设置。

在继续此过程之前，我有几个问题：

1.  真的可以将（复杂/巨大的）弹性项目转换为 NME 吗？
2.  使用 as3hx 转换 flex 项目后我必须做什么才能使其作为项目运行（以便能够在 NME 中编译它）。
3.  有人尝试过 FlexJS 方法并且值得吗？

供您参考，一些导致这些问题的资源：

*   Haxe：[http ://haxe.org](http://haxe.org)
*   as3hx：[http ://caffeine-hx.googlecode.com/svn/trunk/projects/as3hx](http://caffeine-hx.googlecode.com/svn/trunk/projects/as3hx)
*   NME：[http ://www.nme.io](http://www.nme.io)
*   FalconJS：http: [//blogs.adobe.com/bparadie/2011/11/19/what-is-falconjs/](http://blogs.adobe.com/bparadie/2011/11/19/what-is-falconjs/)
*   FlexJS：[https ://cwiki.apache.org/FLEX/flexjs-status.html](https://cwiki.apache.org/FLEX/flexjs-status.html)

非常感谢您的任何意见，如果您需要一些额外的信息，请给我留言。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T01:40:14.733

> 真的可以将（复杂/巨大的）弹性项目转换为 NME 吗？

Haxe NME 并不是为替代 flex mxml ui 项目而设计的，因此如果您选择 flex ui，您将受到它的限制。

NME 已经看到了许多复杂的 as3 库的移植，因此这并非不可能，但 flex mxml 需要大量投资，有些人可能会认为 Flex 不值得付出努力（包括我自己）。

[http://www.aswing.org/](http://www.aswing.org/)最初基于 java swing ui 有 as3 和 Haxe NME 版本。

[https://github.com/RealyUniqueName/StablexUI/](https://github.com/RealyUniqueName/StablexUI/)和[https://github.com/ianharrigan/haxeui](https://github.com/ianharrigan/haxeui)也是 Haxe / OpenFL(NME) 跨平台用户界面的绝佳选择。

as3hx 之类的工具使转换 as3/Haxe 中最基本差异的过程变得更加容易。它并不声称是绝对转换，我还没有看到任何可以自动将高度复杂的 as3 转换为 Haxe 的东西。它只是一个工具，不会利用优化 as3 代码来优化 Haxe 语言的更高级和最佳语言特性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-06T15:10:29.550

我强烈推荐 FlexJS，特别是对于任何有现有 AS3/Flex 项目的人。今年 FlexJS 取得了很大进展。当您可以坚持使用您已经知道的工具和 AS3 语言时，为什么要重新编写整个内容？我一直在使用 FlexJS，最近创建了一个完整的网站前端、后端和 mysql 连接，全部用 AS3 编写并编译为 Node.js 的 javascript。这真是太棒了。

**带有 FlexJS 的 Flash Builder** [https://cwiki.apache.org/confluence/display/FLEX/Using+FlexJS+with+Adobe+Flash+Builder](https://cwiki.apache.org/confluence/display/FLEX/Using+FlexJS+with+Adobe+Flash+Builder)

**教程和工具** Josh Tynjala 在这里创建了很多很棒的资源。 [http://nextgenactionscript.com](http://nextgenactionscript.com)

我希望尽快添加我自己的教程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T16:34:21.860

看来您的项目建设路径太长，无法快速完成。目前Adobe Flash 平台的主要目标是让它成为游戏开发者的甜蜜糖果，这意味着他们肯定会非常关注air 和flash 播放器的性能。

也许等待他们的性能更新比使用 haxe（非常类似于 beta 的东西）或 javascript（这是非常有问题的语言）更快。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T18:46:08.467

很抱歉让您的希望破灭，但我正在处理同样的问题，即摆脱 Flex 并转向 HTML5/JS。如果你愿意的话，你可以用几个月的时间来反对尝试将你的大型 flex 应用程序转换为 HTML5/JS，但最终在像 ExtJS 这样的库中重写整个东西会更容易。

# perl - 使用 Crypt::RSA 和 Crypt::RSA::SS::PSS 在 Perl 中验证 RSA PSS 签名时遇到问题

> ID：15725897
> 
> 赞同：1
> 
> 时间：2013-03-31T03:02:18.310
> 
> 标签：perl, rsa, digital-signature, public-key-encryption

我无法使用 Crypt::RSA 和 Crypt::RSA::SS::PSS 在 Perl 中验证 PSS 签名的签名。

情况如下：

我有一台具有 1024 位 RSA 密钥的设备，并使用 PSS、SHA1 和 AES-128 对数据进行签名。

我成功提取了设备的公钥，用 PEM_write_RSA_PUBKEY() 将它保存在一个文件中

我可以使用 RSA_verify_PKCS1_PSS() 在 C/C++ 中验证这一点，也可以在命令行上使用 openssl，如下所示*：*

```
echo -n hello | 
openssl dgst -verify pubkey.pem -signature hello.sig -sha1 \
             -sigopt rsa_padding_mode:pss -sigopt rsa_pss_saltlen:20 
```

在哪里：

*   字符串“hello”是设备签名的缓冲区。
*   “pubkey.pem”是设备的 RSA 公钥，使用 PEM_write_RSA_PUBKEY() 从设备导出。
*   “hello.sig”包含设备生成的二进制（原始）签名。（由于填充，它是 128 字节。）

我正在尝试在 Perl 中使用 Crypt::RSA 和 Crypt::RSA::SS::PSS 执行上述操作，但无法使其正常工作。

我已经测试了这两个模块，并且能够在生成自己的密钥时在 Perl 中生成和验证 PSS 签名，如下所示*：*

```
use Crypt::RSA;
use Crypt::RSA::SS::PSS;

my ($message, $rsa, $pss, $signature, $verify);
my ($public, $private);

 # The message to be encrypted
 #
$message = "hello";

 # Generate RSA key
 #
$rsa = new Crypt::RSA;
($public, $private) = $rsa->keygen( Size => 1024, Filename => "key" );

 # Generate PSS signature
 #
$pss = new Crypt::RSA::SS::PSS;

$signature = $pss->sign ( Message => $message, Key => $private ) || die $pss->errstr;

$verify = $pss->verify ( Message => $message, Key => $public, Signature => $signature ) || die $pss->errstr;

 # $verify returns true, it worked. 
```

因此，我没有创建自己的 RSA 密钥，而是使用如下方式读取公钥：

```
 $publicKey = new Crypt::RSA::Key::Public ( Filename => "key.public"  );
  ...
 # I pack the 256 character (128 byte) hex string of the signature
 # that's generated by the device.
  $signature = pack ("H*", '03808458…..73E92'); 
```

其中“key.public”包含设备的公钥，转换为十进制字符串，插入到 Crypt::RSA::Key::Public 读取/写入的变量的“n”字段中。

但我无法验证:-(

我认为我应该能够表明它应该使用 SHA1 和 AES-128（而不是 Blowfish）。
我在吠叫错误的树吗？

谢谢…。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T12:37:05.053

在无法使用文件和代码进行测试以进行调试的情况下，不确定如何为您提供帮助。但是，虽然不是最好的解决方案，但一个很好的解决办法是在 Perl 中使用系统调用。如果您能够在命令提示符下验证它，那么您可以通过一些选项来检查它。第一个是`system`：

```
my $return_code = system("some command");
# or...
my $return_code = system("command", "some", "args"); 
```

当你这样做时，你会收到返回的退出代码`$return_code`。如果您在命令提示符下验证它所做的任何操作在验证失败时退出并显示错误代码，那么您知道`0`当一切顺利时您将收到一个，而当它出错时您将收到另一个数字。

分析系统调用答案的其他方法，如果您想阅读实际答案，请使用反引号：

```
my $answer = `some system call`;
# or...
my $answer = qx[some system call]; 
```

通过这样做，您将捕获系统调用发送到 STDOUT 的任何内容。如果您还想捕获 STDERR，那么您可以在同一个调用中重定向它`2>&1`或类似的东西。在这种情况下，您不会得到返回的退出代码。

根据您使用的方法，您可以使用以下答案：

```
if ($return_code == 0) {
    print "Verified!";
}
# or...
if ($answer =~ /OpenSSL.*?Verification sucess.*?Signature code:(\d+)/) {
    # I'm just making up stuff here, I don't know the answer of your command!
    print "Verification succesful. Signature code was $1";
} 
```

我希望这有帮助。我希望我可以测试你实际的脚本和文件，我可以给你一个纯 Perl 的答案，但这至少应该可以帮助你暂时前进。

弗朗西斯科

# c# - Azure - 辅助角色中的休息请求标头无效

> ID：15725900
> 
> 赞同：0
> 
> 时间：2013-03-31T03:02:59.197
> 
> 标签：c#, azure

我在执行`blobcontainer.CreateIfNotExist();`我的工人角色时遇到问题，说明这一点：

```
Server failed to authenticate the request. Make sure the value of Authorization header is formed correctly including the signature. 
```

在开始时，我认为问题可能是我的本地计算机日期（因为我来自南美洲）所以我添加了 `Thread.CurrentThread.CurrentCulture = CultureInfo.InvariantCulture;`但错误仍然存​​在..

我获取与存储连接的配置的方式是这样的：

```
 var storageAccount = CloudStorageAccount.Parse(RoleEnvironment.GetConfigurationSettingValue("dataconnectionstring")); 
```

这是：

```
<Setting name="dataconnectionstring" value="DefaultEndpointsProtocol=https;
               AccountName=devstoreaccount1;
               AccountKey=Eby8vdM02xNOcqFlqUwJPLlmEtlCDXJ1OUzFT50uSRZ6IFsuFq2UVErCz4I6tq/K1SZFPTOtr/KBHBeksoGMGw==" /> 
```

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T03:22:47.937

问题在于您的连接字符串。我看到您正在尝试连接到开发存储（存储模拟器）：

```
<Setting name="dataconnectionstring" value="DefaultEndpointsProtocol=https;
           AccountName=devstoreaccount1;
           AccountKey=Eby8vdM02xNOcqFlqUwJPLlmEtlCDXJ1OUzFT50uSRZ6IFsuFq2UVErCz4I6tq/K1SZFPTOtr/KBHBeksoGMGw==" /> 
```

如需连接开发存储，请按以下格式指定连接字符串：

```
<Setting name="dataconnectionstring" value="UseDevelopmentStorage=true" /> 
```

请使用您使用的格式来指定与云存储帐户的连接。

# html - 我的 div 无法正确对齐

> ID：15725906
> 
> 赞同：2
> 
> 时间：2013-03-31T03:04:09.927
> 
> 标签：html, css, alignment

我一直在做一个网站，我遇到了一个问题。

我的 div 无法正确对齐事件、新闻和三个中间描述......这是代码。（对不起，如果它很混乱......我现在也在努力。）它不会让我发布事件和新闻的代码，所以请耐心等待。

三个描述 div。

```
<div class="mainall">

 <div class="descc1">
 <div class="deschead1"></div>
 <div class="thumb1"></div>
 <div class="head1"></div>
 <div class="headbg1"></div>
 <div class="descsep1"></div>
 <div class="desc1">
     <p></p>
 </div>
 </div>

 <div class="descc2">
 <div class="deschead2"></div>
 <div class="thumb2"></div>
 <div class="head2"></div>
 <div class="headbg2"></div>
 <div class="descsep2"></div>
 <div class="desc2">
     <p></p>
 </div>
 </div>

 <div class="descc3">
 <div class="deschead3"></div>
 <div class="thumb3"></div>
 <div class="head3"></div>
 <div class="headbg3"></div>
 <div class="descsep3"></div>
 <div class="desc3">
     <p></p>
 </div>
 </div>
</div> 
```

CSS - [http://pastebin.com/HPSikFjM](http://pastebin.com/HPSikFjM)

主要 =

```
.mainall {
 display: block;
 margin-top: 25px;
 overflow: hidden; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T05:49:12.923

好的，我想我明白你在做什么。您需要将每个列向左浮动，然后为最后一个元素添加明确的修复。

```
<div id="outside-div-that-expands-to-full-avaliable-size">
   <div class="third">First</div>
   <div class="third">Second</div>
   <div class="third">Third</div>
   <div class="clear"></div>
</div> 
```

与CSS

```
.clear { clear:both; } 
```

这是你想要的效果吗？[http://jsfiddle.net/HPY2X/1/](http://jsfiddle.net/HPY2X/1/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-31T07:48:38.873

这非常有效 - 我在您的实时网站上对其进行了测试：

**CSS：**

```
.descc1{
margin-right: 2.1275%;
float: left;
margin-top: 10px;
width: 31.914893617021%;
}

.descc2 {
float: left;
margin-top: 10px;
width: 31.914893617021%;
margin-right: 2.127659574468%;
}

.descc3 {
float: left;
margin-top: 10px;
width: 31.914893617021%;
}

.mainbox {
margin-left: auto;
margin-right: auto;
overflow: hidden;
display: block;
float: left;
width: 100%;
} 
```

# c# - 如何在不打开另一个窗口的情况下将 PowerPoint 演示文稿嵌入到 WPF 应用程序中？

> ID：15725908
> 
> 赞同：9
> 
> 时间：2013-03-31T03:04:36.093
> 
> 标签：c#, wpf, winapi, integration, powerpoint

目前我有一个 C# 中的 WPF 应用程序，但我发现很难找到任何有用的方法将 PowerPoint 演示文稿嵌入到我的窗口中。

我在这里找到了一个解决方案：[Embedding a Powerpoint show into a C# application](https://stackoverflow.com/questions/11360758/embedding-a-powerpoint-show-into-a-c-sharp-application)

此解决方案产生了让 PowerPoint 在另一个窗口中运行的问题，但只是在 WPF 应用程序中显示其 UI。这意味着当 WPF 窗口聚焦时，PowerPoint 演示文稿没有聚焦，并停止播放。还存在关闭窗口时 PowerPoint 崩溃的问题。

我找到的另一个解决方案是：http: [//www.codeproject.com/Articles/118676/Embedding-PowerPoint-presentation-player-into-a-WP](http://www.codeproject.com/Articles/118676/Embedding-PowerPoint-presentation-player-into-a-WP)

该解决方案很受欢迎，但我发现很难使用。我不知道任何 Win32 编程或 C++，所以我发现它很难修改。我设法让它停止显示 PowerPoint 的第二个副本（原始项目中的预期功能），但我还没有找到自动打开 PowerPoint 演示文稿的方法。

所以我需要一种在后台自动干净地打开 PowerPoint 演示文稿的方法（我不希望 PowerPoint UI 在任何时候显示），并允许它自动运行（并且不响应输入）同时应用程序正在运行。如果我可以将它保留在 C# 和 WPF 中，而不必处理 Win32 和 C++，那就太好了。

这可能吗？在这一点上，我真的很后悔这个项目，仅仅是因为 PowerPoint 集成令人头疼。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-03T22:14:36.737

You could convert your presentation to a video format on-the-fly:

```
// not tested as I don't have the Office 2010, but should work
private string GetVideoFromPpt(string filename)
{
    var app = new PowerPoint.Application();
    var presentation = app.Presentations.Open(filename, MsoTriState.msoTrue, MsoTriState.msoTrue, MsoTriState.msoFalse);

    var wmvfile = Guid.NewGuid().ToString() + ".wmv";
    var fullpath = Path.GetTempPath() + filename;

    try
    {
        presentation.CreateVideo(wmvfile);
        presentation.SaveCopyAs(fullpath, PowerPoint.PpSaveAsFileType.ppSaveAsWMV, MsoTriState.msoCTrue);
    }
    catch (COMException ex)
    {
        wmvfile = null;
    }
    finally
    {
        app.Quit();
    }

    return wmvfile;
} 
```

And then you would play it with `MediaElement`:

```
<MediaElement Name="player" LoadedBehavior="Manual" UnloadedBehavior="Stop" />

public void PlayPresentation(string filename)
{
    var wmvfile = GetVideoFromPpt(filename);
    player.Source = new Uri(wmvfile);
    player.Play();
} 
```

Don't forget to `File.Delete(wmvfile)` when you're done playing the video!

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T21:25:08.513

通过带有 /s 标志的命令行启动演示文稿将播放幻灯片而不启动初始屏幕。

```
powerpnt.exe /s c:\path\to\your\presentation.pptx 
```

我会尝试与您提到的一些 WPF 嵌入解决方案相结合，或者看看[这种方法](https://stackoverflow.com/questions/2610924/wpf-opening-up-exe-program-within-wpf-window)。

我对 WPF 知之甚少，因此希望有人可以提供包含所有这些部分的更好答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T21:33:55.093

我不太喜欢它，我不确定这是否适用于您的情况。您需要访问演示文稿，这是肯定的。然而，它*相当*容易和轻量级。

我的基本想法是以某种方式将 powerpoint 演示文稿嵌入到 html 中，然后使用 webbrowser 控件来显示它。似乎有[很多方法](https://stackoverflow.com/questions/39855/embed-a-powerpoint-presentation-into-html)可以做到这一点。

我决定尝试将演示文稿直接保存为 html，结果证明这是可能的（至少对于 PP2010），尽管布局可能会更好。另一种方法（例如谷歌文档）可能会产生更好的东西。我从这个[链接](http://support.microsoft.com/kb/980553/en-us)中获取了以下内容。

*   在 PowerPoint 2010 中，打开要导出为 HTML 的演示文稿
*   按 Alt+F11。
*   按 Ctrl+G。
*   在“立即”窗格中，键入以下内容，然后按 Enter： `ActivePresentation.SaveAs "<Drive>:\users\<username>\desktop\<filename>.htm", ppSaveAsHTML, msoFalse`

    **注意**要使用单文件网页 (*.mht; *.mhtml) 文件格式保存，请将文件名末尾的 htm替换为 mht ，并将**ppSaveAsHTML**替换为**ppSaveAsWebArchive**。

如果你将它导出到 htm 中，你会得到很多额外的文件，在 mht 中它只是一个文件，所以更适合我。我很确定如果您需要通用解决方案，也可以在代码中自动执行此步骤。

To display the html file in a webbrowser control is the easy part, I uploaded it to my dropbox for convenience and just set the source (I'll leave it up there for a few days if you want to have a look at it directly).

As for starting the slideshow immediately, I'll have to look into it some more.

```
<WebBrowser x:Name="webbrowser" Source="https://dl.dropbox.com/u/27614341/test.mht"/> 
```

![在此处输入图像描述](https://i.stack.imgur.com/MT2pI.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-04T04:12:38.953

There is a WPF control called `DocumentViewer`.

1.  First the pptx should be converted to .xps file format.
2.  Then Bind it to the `Document` property of the DocumentViewer.

[Here](http://www.uhlme.ch/convert_office_to_xps) is the link to convert office documents (including `pptx`) to XPS in C sharp.

XAML

```
<DocumentViewer Name="myDocumentViewer" Margin="0,0,0,59">

</DocumentViewer> 
```

绑定到`Document`控件的属性（注意`ConvertPptxDocToXPSDoc`是pptx转xps的方法）

```
 myDocumentViewer.Document = this.ConvertPptxDocToXPSDoc(this.FileName, this.newXPSDocumentName).GetFixedDocumentSequence(); 
```

# git - get uncommited changes back in a branch

> ID：15725911
> 
> 赞同：0
> 
> 时间：2013-03-31T03:05:29.707
> 
> 标签：git

I changed files on a `branch`, let's call it `foo`, and then added them to track:

```
git add folder/ 
```

However, I forgot to `commit` and forced checkout to another branch.

Is there any way to get those `uncommited` changes on `foo` branch back?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T03:08:25.457

No.
By forcing checkout, you destroyed your changes.

In general, `--force` or `--hard` in git means that you're destroying something.

Instead, you should have `git stash`ed first.

# php - 通过客户端处理将 HTML 数据保存到数据库中

> ID：15725915
> 
> 赞同：0
> 
> 时间：2013-03-31T03:06:12.513
> 
> 标签：php, javascript, ajax, jquery, client-side

我需要将客户端生成的动态表数据保存到数据库中。

我的动态表如下：

```
<table class="table" id = "myTable">
      <thead>
          <tr>
            <th>Roll No</th>
            <th>Student Name</th>
            <th>Attendance</th>
          </tr>
      </thead>
      <tbody>
          <?php foreach($results as $students) {?>
          <tr id="<?= $students->roll_no;?>" align ="center">
            <td><?= $students->roll_no;?></td>
            <td><?= $students->full_name;?></td>
            <td><input type="radio" id="att" name="attendance" value="present">Present
<input type="radio" id="att" name="attendance" value="absent">Absent</td>
          </tr>
          <?php } ?>                                                        
      </tbody>
    </table>
    <input type="submit" onClick="savedata()" name="submit" value="SAVE"> 
```

这里的转折是我在第三列中使用了一个单选按钮，因此需要在 SUBMIT 上传递选中的值

我正在使用的 javascript 代码（参考：[Stackoverflow 答案）是：](https://stackoverflow.com/questions/3248869/how-do-i-get-data-from-a-data-table-in-javascript)

> 函数 savedata() { var oTable = document.getElementById('myTable'); //获取表
> 
> ```
>  var rowLength = oTable.rows.length;
>       //gets rows of table
> 
>       for (i = 1; i < rowLength; i++){
>       //loops through rows
> 
>          var oCells = oTable.rows.item(i).cells;
>          //gets cells of current row
>          var cellLength = oCells.length;
>              for(var j = 0; j < cellLength; j++){
>              //loops through each cell in current row
>                 <!--get your cell info here-->
>                 if(j == cellLength-1)
>                 {
>                       var cellVal = $('input[name="attendance"]:radio:checked');
>                       alert(cellVal);
>                                         // store it in array here
>                                        radioarr = [oTable.rows.item(i).cells,oCells.item(j).innerHTML]; 
>                 }
>                 else
>                 {
>                       var cellVal = oCells.item(j).innerHTML;
>                       alert(cellVal);
>                                         // store it in array here 
>                                        fieldarr = [oTable.rows.item(i).cells,oCells.item(j).innerHTML];
>                 }
>              }
> 
>       }
>   }
>   $.ajax{
> 
>       // Pass the data to another page insert.php and store it in the database
>   }
> </script> 
> ```

所以我需要做的是..创建一个键值对并将其存储在一个数组中并将其作为ajax请求传递并将其插入数据库中。

问题 ：

1.  选中的单选按钮未存储在数组中

2.  我需要创建一个二维数组并将所有数据存储在那里，然后我创建了它的显示 [object,object]

3.  我需要使用 ajax 请求将此数组传递到另一个页面并将其存储在数据库中。

请帮帮我我该怎么做？

提前致谢。数控

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T09:05:30.430

这是解决方案..我已经修改了您的代码以修复一些错误..

```
<table class="table" id = "myTable">
  <thead>
      <tr>
        <th>Roll No</th>
        <th>Student Name</th>
        <th>Attendance</th>
      </tr>
  </thead>
  <tbody>
      <?php foreach($results as $students) {?>
      <tr id="<?= $students["roll_no"];?>" align ="center">
        <td id="roll_no"><?= $students["roll_no"];?></td>
        <td id="full_name"><?= $students["full_name"];?></td>

         <!-- Attendance has to be unique for each row -->
        <td id="attendance"><input type="radio" id="att" name="attendance_<?= $students["roll_no"] ?>" value="present">Present
            <input type="radio" id="att" name="attendance_<?= $students["roll_no"]?>" value="absent">Absent</td>
      </tr>
      <?php } ?>                                                        
  </tbody>
</table> 
```

```
 <script>

    function savedata() { 
        var roll_no = "";
        var jsonObject = '[';
        var oTable = document.getElementById('myTable');
    //gets table

    var rowLength = oTable.rows.length;
    //gets rows of table

    for (i = 1; i < rowLength; i++){
    //loops through rows
        jsonObject += "{";
       var oCells = oTable.rows.item(i).cells;
       //gets cells of current row
       var cellLength = oCells.length;
           for(var j = 0; j < cellLength; j++){

           //loops through each cell in current row
              <!--get your cell info here-->
              //added cell name so that I can create json id
              var cellName = oCells.item(j).id;
              var cellVal = oCells.item(j).innerHTML;

              if(j==0)
                  roll_no = cellVal;
              if(cellVal.search('radio')>0){
                  var cellVal = $('input[name="attendance_'+roll_no+'"]:radio:checked').val();
              }
              // A dirty way to creat json
              jsonObject += '"' +cellName + '":"' + cellVal + '",';

           }
           jsonObject = jsonObject.slice(0,jsonObject.length-1);
           jsonObject += '},';
        }
        jsonObject = jsonObject.slice(0,jsonObject.length-1);
        jsonObject += ']';

       // the json looks like this for 3 rows depending on what radio button u select
       // [{"roll_no":"10","full_name":"Name 1","attendance":"present"},{"roll_no":"14","full_name":"Name 2","attendance":"absent"},{"roll_no":"18","full_name":"Name 3","attendance":"present"}]

        //send this data to a php page
        $.ajax({
            type: "POST",
            url: "ajax.php",
            data:"json=" + jsonObject,
            processData: false, 
            dataType: 'json'
        });

      }
</script> 
```

ajax.php 是您将在其中发布 json 数据的文件。

```
<?php

    $value = json_decode(stripslashes($_POST["json"])); 
    print_r($value);
?> 
```

在您的 ajax.php 中，您可以编写代码来将此数据保存到数据库或文本文件中，无论您想对它做什么。如果你打印，你会得到以下输出。

```
Array
(
[0] => stdClass Object
    (
        [roll_no] => 10
        [full_name] => Name 1
        [attendance] => present
    )

[1] => stdClass Object
    (
        [roll_no] => 14
        [full_name] => Name 2
        [attendance] => absent
    )

[2] => stdClass Object
    (
        [roll_no] => 18
        [full_name] => Name 3
        [attendance] => present
    )
) 
```

这是最丑陋的方法。仅使用 JQuery 可以用更少的行数和更有效地完成。我只是想向您展示如何使用您提供的代码来完成它。如果您有任何问题，请告诉我。

丁斯

> 已编辑...

更好的方法来做到这一点

```
function savedata1() { 

var obj = $('#myTable tbody tr').map(function() {
    var $row = $(this);
    var roll = $row.find(':nth-child(1)').text();
    var atd = $row.find('td input[name="attendance_'+roll+'"]:radio:checked').val()
    return {
        roll_no: $row.find(':nth-child(1)').text(),
        full_name: $row.find(':nth-child(2)').text(),
        attendance: atd
    };
}).get();

 $.ajax({
        type: "POST",
        url: "ajax.php",
        data:"json=" + JSON.stringify(obj),
        processData: false, 
        dataType: 'json'
    });

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-08T11:22:25.497

您不需要在 PHP 文件中解码 json 只需使用

```
 $value = stripslashes($_POST["json"]); 
```

# ruby-on-rails - link_to 总是使用 GET 和 button_to 总是 POST 吗？

> ID：15725918
> 
> 赞同：0
> 
> 时间：2013-03-31T03:07:18.800
> 
> 标签：ruby-on-rails

看来，如果没有指定 :method，link_to 总是 GET 和 button_to，POST。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T03:26:33.753

根据[规格](http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-button_to)，是的，你是对的。`link_to`只是生成一个`<a>`标签，所以这绝对只是一个`GET`. 如果您未另行指定，`button_to`则会生成一个`POST`.

# ruby - Class methods in Ruby

> ID：15725921
> 
> 赞同：0
> 
> 时间：2013-03-31T03:07:47.360
> 
> 标签：ruby

I have a loop that needs to sleep before continuing to the next iteration, so I multiply the seconds * 60 to get the number of minutes. Instead of doing something like "sleep 10 * 60" for ten minutes, I want to make it a little prettier. I'm trying to do this: "sleep 10.minutes". I don't want to do this: "sleep minutes(10)"

I'm trying to override Fixnum to add a method called 'minutes', but I can't grab the '15' from '15.minutes'. Here's the code I'm using:

```
class Fixnum
  def minutes
    15 # need to find out the value entered here
  end
end 
```

The code above works, but I have to return the value I want inside of Fixnum.minutes - how do I find out what number was entered before .minutes?

I don't want to pass an argument because it looks different.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T03:10:10.267

I think you want something like this:

```
class Fixnum
  def minutes
    self * 60
  end
end 
```

Then `15.minutes` would return `15 * 60`.

# c++ - Static function: a storage class may not be specified here

> ID：15725922
> 
> 赞同：25
> 
> 时间：2013-03-31T03:08:15.087
> 
> 标签：c++, visual-studio-2010, class, static

I have defined a function as static in my class in this manner (snippet of relevant code)

```
#ifndef connectivityClass_H
#define connectivityClass_H

class neighborAtt
{
public:
    neighborAtt(); //default constructor
    neighborAtt(int, int, int);

    ~neighborAtt(); //destructor

    static std::string intToStr(int number);

private:
    int neighborID;
    int attribute1;
    int attribute2;

#endif 
```

and in the .cpp file as

```
#include "stdafx.h"
#include "connectivityClass.h"

static std::string neighborAtt::intToStr(int number)
{
    std::stringstream ss; //create a stringstream
   ss << number; //add number to the stream
   return ss.str(); //return a string with the contents of the stream
} 
```

and I get an error (VS C++ 2010) in the .cpp file saying "A storage class may not be specified here" and I cannot figure out what I'm doing wrong.

p.s. I've already read [this](https://stackoverflow.com/questions/6193506/vs-2010-c-intellisense-a-storage-class-may-not-be-specified-here-even-though) which looks like a duplicate but I don't know - as he does - that I am right and the compiler is being finicky. Any help is appreciated, I can't find any information on this!

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-03-31T03:10:46.190

In the definition in the `.cpp` file, remove the keyword `static`:

```
// No static here (it is not allowed)
std::string neighborAtt::intToStr(int number)
{
    ...
} 
```

As long as you have the `static` keyword in the header file, the compiler knows it's a static class method, so you should not and cannot specify it in the definition in the source file.

In C++03, the *storage class specifiers* are the keywords `auto`, `register`, `static`, `extern`, and `mutable`, which tell the compiler how the data is stored. If you see an error message referring to storage class specifiers, you can be sure it's referring to one of those keywords.

In C++11, the `auto` keyword has a different meaning (it is no longer a storage class specifier).

# mysql - 如何在MYSQL中删除除2个特定项目之外的所有项目

> ID：15725923
> 
> 赞同：9
> 
> 时间：2013-03-31T03:08:15.097
> 
> 标签：mysql

我正在尝试从 mysql.user 中删除除用户“1”和“2”之外的所有用户；

我运行了这个命令，但它也删除了用户“1”和“2”；

```
 mysql> delete from mysql.user where user!='1' or user!='2'; 
```

我也试过

```
 mysql> delete from mysql.user where (user!='1' or user!='2'); 
```

同样的结果，用户“1”和“2”被删除。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-31T03:09:40.280

这应该使用`NOT IN`：

```
DELETE FROM mysql.user where user NOT IN (1,2) 
```

您的查询的问题是`OR`- 它正在删除另一个，因为 1 不等于 2，反之亦然。

您的查询适用于`AND`：

```
delete from mysql.user where (user!='1' AND user!='2'); 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!2/0ab38/1)

与：

[使用 Or 的 SQL Fiddle 演示](http://sqlfiddle.com/#!2/a6717/1)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-31T03:09:30.343

您可以使用`NOT IN`

```
DELETE FROM mysql.user WHERE user NOT IN (1, 2) 
```

两者都包括在内的原因很简单。`1 <> 2`和`2 <> 1`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-31T03:10:00.573

从 mysql.user 中删除用户不在 ('1','2') 中的用户

# php - 如何让脚本从 MYSQL 数据库中检索特定数据？

> ID：15725925
> 
> 赞同：1
> 
> 时间：2013-03-31T03:08:27.597
> 
> 标签：php, database, get, mysqli

我做了一个简单的搜索以从数据库中检索客户数据。到目前为止，我只能让它在网页上成功显示当前表格数据，但我无法获得搜索功能来检索特定数据。我有 0 个数据库访问问题。

我已经在护目镜上搜索了几个小时并尝试了许多不同的组合，但我找不到任何关于进行 mysqli 搜索的体面教程。

[链接到我当前的 php 页面](http://www.teetimelawncare.com/search.php)

Cust_no 是主键(varchar), prog_id(integer), balance(varchar)

```
 **Table structure**

Query Output:

> SELECT prog_id, cust_no, balance

FROM `tee`.`teecust`

+ ------------ + ------------ + ------------ +

| prog_id      | cust_no      | balance      |

+ ------------ + ------------ + ------------ +

| 220852       | 1184631      | 0
           |
| 220853       | 1184693      | 0
           |
| 225726       | 1186292      | 0
           |
| 220854       | 1233446      | 0
           |
| 220856       | 1233672      | 0

<!DOCTYPE html>
        <head>
            <title>Search the Database</title>
        </head>

  <body>
      <form action="search.php" method="get" enctype="application/x-www-form-urlencoded" target="_self" id="search">
          Search: <input type="text" name="term" /><br />
          <input type="submit" name="submit" value="Submit" />
    </form>

 <?php

    $host="****";
    $port="3306";
    $socket="";
    $user="u*****";
    $password="*****";
    $dbname="tee";

    $mysqli = new mysqli($host, $user, $password, $dbname);
        if (mysqli_connect_errno()) {
        printf("Connect failed: %s\n", mysqli_connect_error());
        exit();
    }
    $query = "SELECT cust_no FROM teecust LIMIT 20,5";

    if ($result = $mysqli->query($query)) {
        /* fetch associative array */

     while ($row = $result->fetch_row()) {
            printf ("Customer Number:%s   Billing ID:%s   Balance due:%s\n", $row["cust_no"], $row["prog_id"], $row["balance"]);
    }
        /* free result set */
        $result->close();
    }

    /* close connection */
    $mysqli->close();
    ?>

        </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T03:14:04.250

您需要通过`get`- 获取搜索条件，因为这是您指定的。尽管您没有在帖子中提到这一点，但我假设您想在查询中使用搜索条件：

Extra note: You may also want to read up on the [where clause](http://www.w3schools.com/sql/sql_where.asp) in SQL

(I've shown you how to use [prepared statements](http://php.net/manual/en/mysqli.quickstart.prepared-statements.php) for added security)

```
 <?php
            $searchTerm = $_GET['term']; // GET the search term submitted by the form

            $customerNumber = '';
            $progID = '';
            $balance = '';

            // build your query - notice the user of '?' as I'm using prepared statements to query the database. Also notice the 'where' clause.
            $sql = "Select cust_no, prog_id, balance From teecust where cust_no = ?";

            // Create the prepared statement
            if($stmt = $mysqli->prepare($sql)){
                $stmt->bind_param("s", $searchTerm); // bind the search term to the query where the '?' once was
                if(!$stmt->execute()){ // run the query
    echo $mysqli->error;
    }
                $stmt->bind_result($customerNumber, $progID, $balance ); // retrieve results into variables
                while($stmt->fetch()){ // loop through results
                    // You now have the result in $customerNumber, $progID, and $balance - do what    you want with it
echo "customer number: " . $customerNumber . "<br> Program ID: " . $progID . "<br> Balance: " . $balance;
                }
                $stmt->close();
            }
        else{
        echo $mysqli->error;
        }

            ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T06:04:18.513

> There is nothing wrong with mysqli - ... all preference.

Surely it's a matter of preference. If one prefers bloated, non-reusable and insecure code, mysqli is their choice. But if they want something otherwise, then [PDO](https://stackoverflow.com/tags/pdo/info) have to be chosen:

```
$sql = "Select cust_no, prog_id, balance From teecust where cust_no = ?";
$stmt = $pdo->prepare($sql);
$stmt->execute(array($_GET['term']));
while($row = $stmt->fetch()) {
    echo "Customer: $row[cust_no]<br>
          Program ID: $row[prog_id]<br>
          Balance: $row[balance]";
} 
```

# php - Echo the values from a table?

> ID：15725926
> 
> 赞同：-1
> 
> 时间：2013-03-31T03:08:35.663
> 
> 标签：php, mysql

I'm very new to MySQL, and I'm having some trouble echoing the values from a table. For the code I have here, the output is totally blank. Where am I going wrong? Is it with the loop?

```
<?php    
    $a = 1;
    $b = 2;

    $con = mysqli_connect ();
    //Check Connection
    if (mysqli_connect_errno())
      {
      echo "Failed to connect to MySQL: " . mysqli_connect_error();
      }

    $table = "CREATE TABLE info (id INT NOT NULL AUTO_INCREMENT, city CHAR(40), country CHAR(40))" or die(mysql_error());

    $table = mysqli_query($con, "INSERT INTO info (city, country) VALUES ($a, $b)) or die(mysql_error()") or die(mysql_error());

    $result = mysqli_query("SELECT * FROM info") or die(mysql_error());  

    while($row = mysql_fetch_array( $result )) {
        echo $row['city'];
        }

    mysqli_close($con);

    ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T03:12:26.177

You are mixing two different extensions. What you want, as others have said, is [`mysqli_fetch_array()`](http://php.net/manual/en/mysqli-result.fetch-array.php).

On top of that, unless I'm mistaken.. you don't actually connect to any database. As noted in the documentation, you have to [put connection information in the object when you call it](http://www.php.net/manual/en/mysqli.construct.php)(although this is optional if you just want the object, and don't want to connect just yet).

# google-app-engine - GAE google cloud sql JPA local mysql 结果为空

> ID：15725928
> 
> 赞同：0
> 
> 时间：2013-03-31T03:08:39.697
> 
> 标签：google-app-engine, google-cloud-sql

我正在尝试使用 JPA、Google Cloud SQL 和本地 MySQL 数据库开发 Google App Engine 应用程序。我正在使用 GAE eclipse 插件。我已经注册了一个谷歌云 SQL 实例。将项目的应用引擎设置配置为使用 Google Cloud SQL，并为本地 MySQL 数据库和云 SQL 实例输入连接信息。

数据核增强器提取了我的 57 个类，我看到日志中的类已成功优化。我在 Eclipse 中运行我的应用程序，开发环境成功启动，我可以通过浏览器访问我的应用程序。

问题是无法通过 JPA 调用检索数据库中的数据。我在应用程序输出中看不到任何错误。我通过调试器运行，JPA 调用成功运行，没有在我的应用程序源代码中引发异常。我从检索中得到一个空列表。

我不确定在这里做什么。我已经在网上研究了很长时间，但我无法弄清楚我做错了什么。当我没有异常或要使用的东西时，很难追踪到一些东西。

我的猜测是有些事情失败了，但错误可能会被吞下，或者可能是一个限制。我还尝试通过使用标准生成器然后直接使用 JPQL 来更改 JPA 调用。仍然得到相同的结果。

检查了开发服务器的参数，我看到了从我为本地 mysql 服务器输入的配置中使用的参数。是否有可能以某种方式忽略这些论点？

任何帮助，将不胜感激。

Persistence.xml -（只有 2 个用于测试的类）

```
<persistence-unit name="iberis-jpa">
    <provider>org.datanucleus.api.jpa.PersistenceProviderImpl</provider>
    <class>com.bizznetworxonline.iberis.core.SystemArea</class>
    <class>com.bizznetworxonline.iberis.core.SystemUnit</class>

    <exclude-unlisted-classes>true</exclude-unlisted-classes>

    <properties>
        <property name="datanucleus.NontransactionalRead" value="true"/>
        <property name="datanucleus.NontransactionalWrite" value="true"/>
        <property name="datanucleus.ConnectionURL" value="appengine"/>
    </properties>
</persistence-unit> 
```

JPQL 调用：

```
public List<?> findAll(Class<?> entityClass) 
{

    EntityManager em = JPA_EMF.get().createEntityManager();

    javax.persistence.Query q = em.createQuery("SELECT o FROM " + entityClass.getSimpleName() + " o",entityClass);

    List<?> results = q.getResultList();

    return results;
} 
```

控制台输出：

```
Mar 30, 2013 9:49:06 PM com.google.apphosting.utils.config.AppEngineWebXmlReader    readAppEngineWebXml

INFO: Successfully processed /home/user/Documents/eclipse-workspace/IberisAdmin/war/WEB-INF/appengine-web.xml

Mar 30, 2013 9:49:06 PM com.google.apphosting.utils.config.AbstractConfigXmlReader readConfigXml

INFO: Successfully processed /home/user/Documents/eclipse-workspace/IberisAdmin/war/WEB-INF/web.xml

Mar 30, 2013 9:49:06 PM com.google.appengine.tools.development.SystemPropertiesManager setSystemProperties

INFO: Overwriting system property key 'java.util.logging.config.file', value '/home/user/.eclipse/org.eclipse.platform_3.7.0_155965261/plugins/com.google.appengine.eclipse.sdkbundle_1.7.6/appengine-java-sdk-1.7.6/config/sdk/logging.properties' with value 'WEB-INF/logging.properties' from '/home/user/Documents/eclipse-workspace/IberisAdmin/war/WEB-INF/appengine-web.xml'

Mar 30, 2013 9:49:07 PM com.google.apphosting.utils.jetty.JettyLogger info
INFO: Logging to JettyLogger(null) via com.google.apphosting.utils.jetty.JettyLogger

Mar 30, 2013 9:49:07 PM com.google.apphosting.utils.jetty.JettyLogger info
INFO: jetty-6.1.x

Mar 30, 2013 9:49:10 PM com.sun.faces.config.ConfigureListener contextInitialized
INFO: Initializing Mojarra 2.1.12 ( 20120814-1522) for context ''

Mar 30, 2013 9:49:13 PM com.sun.faces.spi.InjectionProviderFactory createInstance
INFO: JSF1048: PostConstruct/PreDestroy annotations present.  ManagedBeans methods marked with these annotations will have said annotations processed.

Mar 30, 2013 9:49:21 PM org.primefaces.webapp.PostConstructApplicationEventListener processEvent
INFO: Running on PrimeFaces 3.5

Mar 30, 2013 9:49:21 PM org.primefaces.extensions.application.PostConstructApplicationEventListener processEvent
INFO: Running on PrimeFaces Extensions 0.6.3

Mar 30, 2013 9:49:22 PM com.google.apphosting.utils.jetty.JettyLogger info
INFO: Started SelectChannelConnector@127.0.0.1:8888

Mar 30, 2013 9:49:22 PM com.google.appengine.tools.development.AbstractServer startup
INFO: Server default is running at http://localhost:8888/

Mar 30, 2013 9:49:22 PM com.google.appengine.tools.development.AbstractServer startup
INFO: The admin console is running at http://localhost:8888/_ah/admin

Mar 30, 2013 9:49:22 PM com.google.appengine.tools.development.DevAppServerImpl start
INFO: Dev App Server is now running

Mar 30, 2013 9:49:35 PM com.google.appengine.api.datastore.dev.LocalDatastoreService init
INFO: Local Datastore initialized: 
Type: High Replication
Storage: /home/user/Documents/eclipse-workspace/IberisAdmin/war/WEB-INF/appengine-generated/local_db.bin

Mar 30, 2013 9:49:35 PM com.google.appengine.api.datastore.dev.LocalDatastoreService load
INFO: The backing store, /home/user/Documents/eclipse-workspace/IberisAdmin/war/WEB-   INF/appengine-generated/local_db.bin, does not exist. It will be created.

Mar 30, 2013 9:49:37 PM com.google.apphosting.utils.jetty.JettyLogger warn 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T08:16:31.677

我认为以下元素：

```
<property name="datanucleus.ConnectionURL" value="appengine"/> 
```

是罪魁祸首。这是将 App Engine 数据存储区用作存储层的设置。

你可以试试下面的吗？

首先，请编辑您的 persistence.xml 如下：

```
<properties>
    <!-- Remove the above property and add the following two -->
    <property name="javax.persistence.jdbc.driver" value="com.google.appengine.api.rdbms.AppEngineDriver" />
    <property name="javax.persistence.jdbc.url" value="jdbc:google:rdbms://your-project:your-instance/database_name" />
</properties> 
```

把datanucleus-rdbms-xyzjar放到目录下，如果没有`war/WEB-INF/lib`的话把mysql-connector-java-xyz-bin.jar放到目录下。`appengine-sdk/lib/impl`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T12:23:18.397

问题出在我猜的查询上。

尝试更改查询一些东西类似于下面链接中显示的示例[http://www.datanucleus.org/products/accessplatform_3_0/jpa/jpql.html](http://www.datanucleus.org/products/accessplatform_3_0/jpa/jpql.html)

据我所知，不支持标准

如果它不起作用，请共享您的 entityClass 控制器。

# php - 使用 VB6 创建一个 .php 或 .txt 文件

> ID：15725929
> 
> 赞同：-1
> 
> 时间：2013-03-31T03:08:41.270
> 
> 标签：php, vb6

所以我正在努力完成我的网站，但由于它有很多页面，我想加快这个过程。

我发表的每篇文章都需要一个 .SQL 文件，其中包含稍后将在 .php 文件中使用的数据来填充所有内容，现在，我要做的是在 VB6 表单上填写信息，以便将数据放入在我的数据库上创建一个带有给定文本的 .php 文件（这将包括所有 html 和 php 代码以及每个特定帖子的变量）或一个 .txt 文件，以便我以后可以更改其扩展名。

我怎么能这样做？

如果我没有很好地表达自己，我很抱歉，提前谢谢，干杯！

编辑：我知道我可以通过从我的数据库中获取数据并拥有一个动态 php 文件来做到这一点，但相信我，因为我需要的是拥有不同的文件。

也是的，我的意思是“.SQL 文件”，它只是我数据库中的一行。

所以基本上我需要的是在 .txt 文件上写一些文本（最好用 .php 扩展名保存），以及让程序在我的数据库上写数据（我已经做了那部分）。

再次，抱歉解释不佳。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T11:09:24.017

做你想做的更好的方法是创建一个表单处理程序（它不会是可见的）。表单处理程序将获取您的表单数据并将其实例化（创建/更新/删除），形成 SQL DB 中的行。

此外，您可以根据需要通过 vb6 应用程序上传处理程序，并在完成对 SQL DB 的更新后将其删除。

此外，如果您有多个想要创建/更新/删除的行，那么您可以递归地将表单数据发送到您的表单处理程序。

以通用 HTML 表单传递您的数据，您不应该使用纯文本动态创建该表单。

这种方法适用于字符串和数字，但不适用于通常需要分块的图像。

一旦您的处理程序处理了请求，它可以将您重定向到“Success.html”或“Failed.html”页面，以便您知道它是否成功。

`HANDLER.ASPX`or的伪代码`HANDLER.PHP`：

```
If formdata is valid
  try
    create/update/delete row in SQDB
    redirect to success.html?action=create or update or delete
  catch
    redirect to failed.html?errorid=12345
  end try
else
  redirect to failed.html?errorid=12345
end if 
```

HTML 表单脚本（您将在 vb 代码中的 vb6 中生成此脚本）：

```
<form action="myhandler.aspx" method="post">
    <input type="text" id="recordId" value="123" />
    <input type="text" id="firstname" value="Bob" />
    <input type="text" id="lastname" value="Smith" />
    <input type="text" id="Street" value="123 high lane" />
    <input type="text" id="District" value="Moss Side" />
    <input type="text" id="City" value="Manchester" />
</form> 
```

# string - using matrices algebra to manipulate strings: is it feasible?

> ID：15725930
> 
> 赞同：3
> 
> 时间：2013-03-31T03:09:05.617
> 
> 标签：string, r, math, matrix, matrix-multiplication

I'm trying to use matrix algebra with the purpose of manipulating strings. This means being able to multiple matrix-like structures using concatenation and pasting of string or of arrays of strings.

I previously tried to implement the thing on R, but it was not possible as matrices can have only one dimensional entries.

I hope to be enough language-agnostic and abstract, but I'll use R-like code for sake of clarity. I should make explicit that I don't require real matrices, but matrix-like structure on which we can do matrices-like multiplication and retrieve the (ij) element of the structure.

**{+,*} MATRICES MULTIPLICATION**

两个n 维方阵**A**和**B的 {+,*}-乘积是由以下元素定义的矩阵****C**： **C** [i,j] = Sum [k=1,...,n] **A** [i,k] * **B** [k, Ĵ]。

例如，考虑矩阵 `M <- matrix(c(a,b,0,0,c,d,0,0,e),3,3)`。那么 M 乘以 M 就是 `M <- matrix(c(a^2,a*b+b*c,b*d,0,c^2,c*d+d*e,0,0,e^2),3,3)`。

**{c(,),paste0(,)} 矩阵乘法**

我想实现的这个操作的规则与前面所说的乘法相同，其中的基本突变是总和应该是一个连接，而乘积应该是一个粘贴。换句话说，我们在前面的公式中找到`a+b`，现在输出应该是“c(a,b)”，当我们找到 时`a*b`，现在我们应该将其读为`paste0(a,b)`。

必须尊重一些通常的属性，即分配属性和 0 元素属性。因此，如果`a <- c("q",0,"w")`和`b <- c("e")`然后`a*b <- c("qe",0,"we")`（我们应该随意忘记 0 元素，将其删除，因为它不会影响计算。

此外，我们正在乘以等维矩阵，因此每个元素 **C** [i,j] = Sum [k=1,...,n] **A** [i,k] * **B** [k,j]现在被读作 `c("A[i,1]B[1,j]",...,"A[i,n]B[n,j]")`。

最后，类似结果矩阵的结构应该是我们可以再次用于计算的东西（例如，进行更复杂的计算，如 mult(mult(A,B),C) 等等......）。

**一个更简单的案例**

为简单起见，让我们从计算形式的乘积开始`mult(A,A)`，`mult(mult(A,A),A)`以此类推。我们也可以将**A**强加为一个*简单*的矩阵，这意味着它的每个元素都是一维字符串，而不是字符串的串联。

让我们举个例子。让我们将**A**定义为 3 维矩阵 `A <- matrix(c("a","b",0,0,"c","d",0,0,"e"),3,3)`，那么**A**乘以**A**应该是 `mult(A,A) = matrix(c("aa",c("ab","bc"),"bd",0,"cc",c("cd","de"),0,0,"ee"),3,3)` 并且**A** ³应该是 `mult(mult(A,A),A) = matrix(c("aaa",c("aab","abc","bcc"),c("abd","bcd","bde"),0,"ccc",c("ccd","cde","dee"),0,0,"eee"),3,3)`。

**问题**

你将如何实现这一点？哪种语言看起来更合适？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T17:03:44.477

以下是 R 中矩阵符号乘法的一些想法：

首先我们需要定义行和列的内积。这可以通过以下方式完成：

```
wrap <- function(x) paste0("(",x,")")

rowcol <- function(row,col) paste(wrap(row),wrap(col),sep="*",collapse="+") 
```

例子：

```
> rowcol(c("A","B","C"),c("D","E","F"))
[1] "(A)*(D)+(B)*(E)+(C)*(F)" 
```

我不得不将每个元素“包装”在括号中，因为大于 2 的幂可能比单个变量或数字（零）具有更复杂的表达式。另外，请注意，零将正常显示，即，它不知道（尚）这些可以简化：

```
> rowcol(c("A","B"),c("0","X+Y"))
[1] "(A)*(0)+(B)*(X+Y)" 
```

由于这些是 R 中的有效表达式，因此可以使用此事实编写简化函数以消除零和多余的括号。我会到达那里。

现在矩阵乘法和幂很简单：

```
symprod <- function(A,B) sapply(1:ncol(B), function(j)sapply(1:nrow(A), function(i)rowcol(A[i,],B[,j])))

sympow <- function(A,n) { B <- A; for( i in seq_len(n-1) ) B <- symprod(B,A); B } 
```

他们创建了有效的（虽然笨拙的）表达式：

```
> A <- matrix(LETTERS[1:4],2,2)
> diag(A) <- 0
> sympow(A,3)
     [,1]                                          [,2]                                         
[1,] "((0)*(0)+(C)*(B))*(0)+((0)*(C)+(C)*(0))*(B)" "((0)*(0)+(C)*(B))*(C)+((0)*(C)+(C)*(0))*(0)"
[2,] "((B)*(0)+(0)*(B))*(0)+((B)*(C)+(0)*(0))*(B)" "((B)*(0)+(0)*(B))*(C)+((B)*(C)+(0)*(0))*(0)" 
```

现在让我们谈谈简化。这些字符串可以解析为有效的 R 表达式，因为它们符合 R 标准。不需要定义变量，因为我们不会评估表达式。实际上我只想解析它们以简化。

检查下面的功能。它删除了多余的括号，用零替换了零乘以任何东西，并删除了零的包裹（添加）：

```
simplify <- function(e)
{
    if( mode(e) %in% c("name","numeric") ) return(e)

    if( as.character(e[[1]])=="+" )
    {
        x <- simplify(e[[2]])

        y <- simplify(e[[3]])

        if( identical(x,0) ) return(y)

        if( identical(y,0) ) return(x)

        return(call("+", x, y))
    }

    if( as.character(e[[1]])=="*" )
    {
        x <- simplify(e[[2]])

        if( identical(x,0) ) return(0)

        y <- simplify(e[[3]])

        if( identical(y,0) ) return(0)

        return(call("*", x, y))
    }

    if( as.character(e[[1]])=="(" )
    {
        x <- simplify(e[[2]])

        if( mode(x) %in% c("name","numeric") ) return(x)

        return(call("(", x))
    }
} 
```

此函数适用于`call`对象。要与我们需要的字符串一起使用

```
simplify_text <- function(s) deparse(simplify(parse(text=s)[[1]])) 
```

例子：

```
> simplify_text("(x)+(0*(a+b))+(z)")
[1] "x + z" 
```

如果需要，可以将其用作包装器`rowcol`：

```
rowcol <- function(row,col) simplify_text(paste(wrap(row),wrap(col),sep="*",collapse="+")) 
```

结果是：

```
> sympow(A,3)
     [,1]          [,2]         
[1,] "0"           "(C * B) * C"
[2,] "(B * C) * B" "0" 
```

可以编写其他一些简化，这取决于计划如何使用它们。但是，如果输入矩阵是有效表达式的字符串，则最终结果仍然有效。

* * *

编辑：另一种方法`rowcol`：

考虑这些函数：

```
cellprod <- function(r, s)
{
    z <- expand.grid(r,s, stringsAsFactors=FALSE)

    filter <- (z$Var1 != 0) & (z$Var2 != 0)

    paste(z$Var1[filter], z$Var2[filter], sep="*", collapse="+")
}

rowcol <- function(row,col)
{
    x <- strsplit(row, "\\+")

    y <- strsplit(col, "\\+")

    L <- vapply(seq_along(x), function(i) cellprod(x[[i]],y[[i]]), character(1))

    filter <- nzchar(L)

    if( ! any(filter) ) return("0")

    paste(L[filter], collapse="+")
} 
```

Using these instead of the functions above, we can handle matrices with expressions of the form `x*y*z+a*b+f`, i. e., sums of products in each cell. The functions automatically applies the distributive law, preserving the form (sum-of-products) and also removes zeros automatically. The last example above becomes:

```
> sympow(A,3)
     [,1]    [,2]   
[1,] "0"     "C*B*C"
[2,] "B*C*B" "0" 
```

No simplification required! Another example:

```
> A <- matrix(LETTERS[1:9],3,3)
> B <- matrix(LETTERS[10:18],3,3)
> A[2,3] <- 0
> A[3,2] <- 0
> B[1,3] <- 0
> B[3,1] <- 0
> A
     [,1] [,2] [,3]
[1,] "A"  "D"  "G" 
[2,] "B"  "E"  "0" 
[3,] "C"  "0"  "I" 
> B
     [,1] [,2] [,3]
[1,] "J"  "M"  "0" 
[2,] "K"  "N"  "Q" 
[3,] "0"  "O"  "R"
> symprod(A,B)
     [,1]      [,2]          [,3]     
[1,] "A*J+D*K" "A*M+D*N+G*O" "D*Q+G*R"
[2,] "B*J+E*K" "B*M+E*N"     "E*Q"    
[3,] "C*J"     "C*M+I*O"     "I*R" 
```

# excel - excel数据透视表选项禁用公式按钮

> ID：15725931
> 
> 赞同：0
> 
> 时间：2013-03-31T03:09:10.827
> 
> 标签：excel, ssas, pivot-table, cube

我正在使用来自 SSAS 已发布多维数据集的数据连接来处理数据透视表。

我在计算值时遇到问题，因为当数据透视表显示数据时，数据透视表选项上的公式按钮被禁用。我不知道问题出在哪里。

此外，当我在显示数据时使用“% 差异”选项时，它总是显示`#N/A`.

我的 SSAS 多维数据集有问题吗？我可以做大部分报告，除了那些需要百分比差异的报告。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-10T18:13:33.823

您可能会检查以确保您尝试对其进行数学运算的字段是数字而不是文本。只是一个想法。

# php - 显示所有特殊字符 html/php

> ID：15725940
> 
> 赞同：2
> 
> 时间：2013-03-31T03:10:36.463
> 
> 标签：php, html, character-encoding

我有一个数据库，其中包含很多名称，包括具有特殊字符的外国名称，例如 Žigić

当回显这些名称时，一些字符显示为问号，其中一些显示是因为我使用的是字符集 ISO-8859-1

例如，当我从数据库中回显名称 Žigić 时，它看起来像这样：

> 齐？

我目前正在使用此代码尝试启用所有特殊字符

```
<meta charset="iso-8859-1"> 
```

我已经尝试过 UTF-8 但这只是打印这样的名称：

```
�igi? 
```

这是我尝试使用的完整代码：

```
$getPlayerStats = $db->query("SELECT * FROM `playerstats` WHERE `playerid` = '".$_GET['id']."'");

echo '<meta charset="iso-8859-1"><table border="1">
<tr>
<td>First Name</td>
<td>Second Name</td>

</tr>';

while ($playerStats = mysqli_fetch_array($getPlayerStats))//Loop it.
{

    echo '<tr>';
    echo '<td>'.$playerStats['firstname'].'</td>';
    echo '<td>'.$playerStats['lastname'].'</td>';

    echo '</tr>';
}
echo '</table>'; 
```

请注意，这个问题不仅仅针对 1 个字符或一个名称，名称数据库包含数百个名称。

谁能帮帮我，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T08:10:43.753

为了在整个项目中保持统一的 UTF-8 编码，请尝试

```
$pdo->exec('set names utf8'); 
```

在您的查询之前，或者理想情况下将字符集附加到您的连接字符串，如下所示：

```
"mysql:host=$host;dbname=$db;charset=utf8" 
```

并删除这部分：

```
<meta charset="iso-8859-1"> 
```

确保您的页面的编码是 UTF-8，您可以在 head 标签中添加以下内容：

```
<meta charset="utf-8"> 
```

**编辑：**看到你的使用`$db`让我错误地假设你正在使用 PDO。正如您问题的另一个答案中所指定的，您应该使用[mysqli_set_charset](http://php.net/mysqli_set_charset)来设置与 MySQL 的连接的字符集。数据库的排序规则与您接收数据的编码无关，只要它具有您需要的字符即可。

总而言之，只需确保用于连接数据库和 HTML 输出的字符集的一致性，只要您选择的字符集具有您需要的字符，您就应该没问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T11:18:53.400

您还需要设置数据库<->php 传输编码：

```
mysqli_set_charset("utf8"); 
```

在进行任何查询之前。将页面编码声明保留为 UTF-8，因为您的数据现在将是 UTF-8。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T06:57:02.710

我可能错了，但去年我遇到了这个问题，用普通文本键盘或写字板打开它，看看你输出查询的旁边是否有空格我这样做了，它摆脱了它们

或者也许下载您的数据库并使用这些程序打开 sql 文件并执行相同的过程，也许它会显示 � 符号。

# php - PHP output float with decimal precision

> ID：15725947
> 
> 赞同：0
> 
> 时间：2013-03-31T03:11:58.523
> 
> 标签：php

How can I output a value like `2.30`? Currently the output I am getting is `2.3`. Following is my code where a 24 hr time format will be converted into 12 hr format:

```
if($openHrs['open_hours'] == NULL){

} else {
    $openHrs = explode(",", $openHrs['open_hours']);

    $weekdays = array('Sun','Mon','Tue','Wed','Thu','Fri','Sat');
    $res      = array();

    $todayWeekDay = date('D'); // get today's weekday

    $todayWeekNum = array_search($todayWeekDay, $weekdays); // get number for today's weekday

    foreach($openHrs as &$temp) {

        $temp = explode(" ", $temp);

        $temp[1] = $temp[1] > 12 ? $temp[1] - 12 . ' pm' : $temp[1] . ' am';
        $temp[2] = $temp[2] > 12 ? $temp[2] - 12 . ' pm' : $temp[2] . ' am';
        // only add the item where the weekday is equal to today's
        if ($temp[0] == $todayWeekNum) {
             $res[]   = $weekdays[$temp[0]] . ' ' . $temp[1] . ' - ' . $temp[2];
        }
    }
} 
```

The issue is I am getting `2.3` instead `2.30` for hours `14.30` format. What am I missing here?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T03:18:18.587

The problem is PHP is treating your time as a floating point number!

You could cast it as a string, or try `sprintf("%0.2f", $output_variable)`

That should format it with two decimal places after the decimal point.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T03:18:52.153

You can use `number_format($your_number, 2, '.', '');` to display your number up to 2 decimal character.

# git - 防止克隆或下载 (zip) Git 存储库

> ID：15725948
> 
> 赞同：0
> 
> 时间：2013-03-31T03:12:03.743
> 
> 标签：git, permissions, repository

我在 github 上为一个项目创建了一个私有存储库。我在该存储库中添加了 4 个成员。从周一到周五，所有人都在为那个项目工作。我的生活完全依赖于那个项目。我只想保护我的存储库免受非法访问，即在办公室外克隆（或 zip）repo 或在这 4 个成员的假日（周六和周日）克隆（或 zip）repo。我正在看那个存储库。但我不确定是否会收到关于非法访问 github 上的 repo 的通知。

有人知道吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T05:13:16.333

在您的家用计算机上设置一个 cron 作业，该作业在周五下午 5 点提取回购并在周一上午 9 点（或工作日开始时）将其推回。只要*你*周末不惹它，它就会保持安全。

然而，正如[乔伊诺斯](https://stackoverflow.com/users/111266/joe-enos)所说。为什么？他们可以在周末使用他们的拇指驱动器副本来处理它，而不是在周三午餐时间之前进行任何更改。

# windows-8 - 尝试在 Windows 8 Metro 中包装单选按钮文本

> ID：15725949
> 
> 赞同：1
> 
> 时间：2013-03-31T03:12:07.587
> 
> 标签：windows-8, radio-button, windows-runtime, winrt-xaml

我正在尝试为 Windows 8 应用程序包装单选按钮文本。

这是我尝试过的代码：

```
<RadioButton x:Name="ans2" HorizontalAlignment="Left" FontSize="20"
 Margin="10,0,0,10" VerticalAlignment="Center" Click="ansClick">
    <TextBlock Text="RadioButton" TextWrapping="Wrap"/>
</RadioButton> 
```

它不起作用，有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-31T03:24:19.847

尝试这个：

```
<RadioButton>
   <TextBlock Text="This is text" TextWrapping="Wrap" ></TextBlock>
</RadioButton> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-13T03:48:20.737

尝试这个

```
 TextBlock txtAnswer = new TextBlock();
  txtAnswer.Foreground = new SolidColorBrush(Colors.White);
  txtAnswer.Text = "CONTENT";
  txtAnswer.TextWrapping = TextWrapping.Wrap;
  CheckBox CheckBoxAnswer = new CheckBox();
  CheckBoxAnswer.Content = txtAnswer; 
```

# c++ - 为什么我不能删除字符串的数字字符？

> ID：15725952
> 
> 赞同：0
> 
> 时间：2013-03-31T03:12:34.490
> 
> 标签：c++, string, erase

我想删除字符串中的所有数字（最终是所有符号和空格）并保留字符串中的所有字母字符。我最终要做的是从大块文本中搜索回文。

用我现在得到的东西，它会抹去数字；加上被擦除的第一个数字字符之后的所有其他非数字字符。我想知道为什么这样做，以及我能做些什么来让它只擦除数字字符。

```
#include <iostream>
#include <string>
#include <cctype>
#include <ctype.h>
#include <iterator>
using namespace std;

int main()
{
bool con = true;
while (con == true)
{
cout << "Enter a string: ";
string input;
getline(cin, input);

/** here is where I am attempting to erase all numeric characters in input string**/    
for(int i=0; i<input.length(); i++){

    if(isdigit(input.at(i))){

        string::iterator it;
        it=input.begin()+i;
        input.erase(i);
    break;
    }
}

string go;

cout << input << endl;

    cout << "Continue? y/n " << endl;
    getline(cin, go);
    if( go != "y")
        con = false;

}
system("pause");
return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T03:25:01.050

```
for(int i=0; i<input.length(); i++){

    if(isdigit(input.at(i))){

        string::iterator it;
        it=input.begin()+i;
        input.erase(i);
    break;
    }
} 
```

I don`t like that code snippet: **decide that to use iterators or indexes, I think you shoudn`t mix them**.
There is **error in you code:** when you erase from a string it`s length also changes(so for loop will not work, instead **use while loop**)

```
string::iterator it = input.begin();

    while (it != input.end())
    {
         while( it != input.end() && isdigit(*it))
         {
              it = input.erase(it);
         }
         if (it != input.end())
             ++it;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T07:20:09.873

```
cin >> inputString;
for(string::iterator begin = inputString.begin(), end = inputString.end(); begin != end;){
  if(isdigit(*begin)){
    begin = inputString.erase(begin);
  }else
    ++begin;
}
//cout << inputString; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T03:25:33.590

I suggest to research how `string.erase()` works; the version which takes one argument deletes everything after and including the index provided. What should fix your problem is changing `input.erase(i)` to `input.erase(i, 1)`. The version which takes two arguments deletes an amount of characters equal to the second argument starting at the first arguments position.

Also, I don't see the purpose of these two lines in your program:

```
string::iterator it;
it=input.begin()+i; 
```

# backbone.js - 可以调用 fetch 但不能调用其他 Backbone 收集方法

> ID：15725955
> 
> 赞同：0
> 
> 时间：2013-03-31T03:13:12.023
> 
> 标签：backbone.js

在带有 Rails 后端的 Backbone 应用程序的 app.js 文件中，我启动了一个集合，并在 fetch() 方法完成对记录的检索后将其设置为 jobForm 视图上的集合。

```
var app = {

  init: function () {

 this.collections.job  = new this.Collections.job();
 this.collections.job.fetch().complete(function(){
      app.views.jobForm = new app.Views.jobForm({ collection : app.collections.job });

} 
```

在 jobForm 视图（用户输入作业详细信息的视图）中，我监听表单上的提交，然后使用集合在表单提交时创建新作业。

```
events : {
            'submit form' : 'addDoc'
        },
        addDoc : function(e) {

            e.preventDefault();
            // app.collections.job.create({
            console.log(this.collection);
            this.collection.create({

                job_title : this.$('.job_title').val(),
                position : this.$('.position').val(), 
                company : this.$('.company').val(),

            }, { error : _.bind(this.error, this) }); 
```

但是，我收到一个错误

```
Uncaught TypeError: Object [object Object] has no method 'create' 
```

该代码甚至没有尝试发出网络请求，因为它认为它没有 create 方法。您会注意到，我在创建它之前对集合进行了控制台日志，它返回了一个作业集合（这是在我将主干添加到应用程序之前创建的），因此它是一个集合。

```
child {cid: "c1", attributes: Object, _changing: false, _previousAttributes: Object, changed: Object…}
_changing: false
_pending: false
_previousAttributes: Object
attributes: Object
changed: Object
cid: "c1"
__proto__: Surrogate
constructor: function (){ return parent.apply(this, arguments); }
initialize: function () {
model: function (){ return parent.apply(this, arguments); }
url: "/jobs"
__proto__: Object 
```

In the console, I instantiated a new collection, called fetch, retrieved some results, and tried some other collection methods on it, such as collection.at(0), and was told that the object doesn't have the method 'at'.

Strangely, this code (the form linked to a collection) is code that I copied from another working Backbone app of mine.

So, if I'm able to call fetch(); on this object after instantiating it, but not call other Backbone Collection methods (such as 'at' and 'create') what is this object that I'm trying to call create on, and what can I do to fix the problem...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T04:43:28.260

Problem was that I was extending a model

```
app.Collections.job = Backbone.Model.extend({ 
```

rather than a collection

```
app.Collections.job = Backbone.Collection.extend({ 
```

# bash - Run bash script and delete its run command from history

> ID：15725956
> 
> 赞同：2
> 
> 时间：2013-03-31T03:13:49.340
> 
> 标签：bash, ssh, history

I'm surprised I was unable to find this anywhere, so I am sorry if I haven't searched enough.

I want to run a bash script, but have its command erased from the history without changing any settings outside of the script.

I have tried in the bash file

```
history -d $((HISTCMD)) 
```

as `HISTCMD` gives the correct row number, but when run in the bash it isn't working.

Any ideas?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T14:46:00.543

Can't be done. Sorry.

The bash process that's running as your interactive shell, and the bash process that interprets your shell script, are different processes. The child (the one running your shell script) cannot affect the settings of the parent (the one that maintains the history).

# ruby - Accessing Hash Keys with user inputted variables, NoMethodError

> ID：15725957
> 
> 赞同：0
> 
> 时间：2013-03-31T03:13:57.377
> 
> 标签：ruby, variables, nomethoderror

I get this error message when trying to access a hash with user inputted variables: "undefined method `index' for nil:NilClass (NoMethodError)"

This should illustrate my problem a little better... once the string "n" is stored in a variable that variable can't access the hash anymore and returns nil. Why?

```
 [6] pry(main)> line = "n"
=> "n"
[7] pry(main)> subway[:line]
=> nil
[8] pry(main)> subway[:"n"]
=> ["timessquare", "34th", "28th", "23rd", "unionsquare", "8th"]
[9] pry(main)> line
=> "n"

This is the .rb file

n = ["timessquare", "34th","28th","23rd","unionsquare","8th"]
l = ["8th", "6th", "unionsquare","3rd","1st"]
six = ["grandcentral","33rd","28th","23rd","unionsquare","astorplace"]

subway = {:n=>n, :l=> l, :six=>six}

puts "Where would you like to go?"
destination = gets.strip.chomp.downcase.delete(" ")

puts "What line is that on?"
endline = gets.strip.chomp.downcase.delete(" ")

puts "What station will you be departing from?"
location = gets.strip.chomp.downcase.delete(" ")

puts "What line is that on?"
startline = gets.strip.chomp.downcase.delete(" ")

if startline == endline
    puts (startline.index(destination)-startline.index(location)).abs
else
    puts "You have #{(subway[:startline].index(location) - subway[:startline].index("unionsquare")).abs} stops until transfer"
    puts "After you have #{(subway[:endline].index(destination) - subway[:endline]index("unionsquare")).abs} until your destination"    
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T03:17:44.070

you simply need to convert line to a symbol: `subway[line.to_sym]`

# python - Regexp Word within a word with a fullstop

> ID：15725959
> 
> 赞同：0
> 
> 时间：2013-03-31T03:14:23.790
> 
> 标签：python, regex

I'm having trouble matching a string with regexp (I'm not that experienced with regexp). I have a string which contains a forward slash after each word and a tag. An example:

`led/O by/O Timothy/PERSON R./PERSON Geithner/PERSON ,/O the/O president/O of/O the/O New/ORGANIZATION`

In those strings, I am only interested in all strings that precede `/PERSON`. Here's the regexp pattern that I came up with:

`(\w)*\/PERSON`

And my code:

```
match = re.findall(r'(\w)*\/PERSON', string) 
```

Basically, I am matching any word that comes before `/PERSON`. The output:

```
>>> reg
['Timothy', '', 'Geithner'] 
```

My problem is that the second match, matched to an empty string as for `R./PERSON`, the dot is not a word character. I changed my regexp to:

```
match = re.findall(r'(\w|.*?)\/PERSON', string) 
```

But the match now is:

`['led/O by/O Timothy', ' R.', ' Geithner']`

It is taking everything prior to the first /PERSON which includes `led/O by/O` instead of just matching `Timothy`. Could someone please help me on how to do this matching, while including a full stop as an abbreviation? Or at least, not have an empty string match?

Thanks,

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T03:17:53.783

Match everything but a space character (`[^ ]*`). You also need the star (`*`) inside the capture:

```
match = re.findall(r'([^ ]*)\/PERSON', string) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T03:28:21.333

Firstly, `(\w|.)` matches "a word character, or any character" (dot matches any character which is why you're getting those spaces).

Escaping this with a backslash will do the trick: `(\w|\.)`

Second, as @Ionut Hulub points out you may want to use `+` instead of `*` to ensure you match *something* but Regular Expressions work on the principle of "leftmost, longest" so it'll always try to match the longest part that it can before the slash.

If you want to match *any* non-whitespace character you can use `\S` instead of `(\w|\.)`, which may actually be what you want.

# vb.net - How do I make a random character generator? VB.NET

> ID：15725962
> 
> 赞同：1
> 
> 时间：2013-03-31T03:14:47.947
> 
> 标签：vb.net

I want to make a random character generator with numbers in vb.net, I know how to make a random number generator but not numbers mixed with letters. I want it to be around 15-20 characters. Something like this: F53Gsfdsj637jfsj5kd8

Thanks ahead!

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-31T03:20:12.477

You're mostly there once you have a random number generator. From there, just pick a random character within a collection of valid characters. The simplest way would be something like:

```
dim validchars as string = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890"

dim sb as new StringBuilder()
dim rand as new Random()
for i as Integer = 1 to 10
    dim idx as Integer = rand.Next(0, validchars.Length)
    dim randomChar as char = validchars(idx)
    sb.Append(randomChar)
next i

dim randomString = sb.ToString() 
```

Of course, clean up the syntax a bit, and maybe use a constant value for the chars and length, a variable value for the number of digits, etc.

# ios - 使应用程序兼容 iPad1

> ID：15725963
> 
> 赞同：0
> 
> 时间：2013-03-31T03:14:48.430
> 
> 标签：ios, xcode, ipad

晚上好，

我的应用程序是一个从主菜单开始的简单计算器。它在我的 iPad2 上按设计工作，但是在 App Store 中下载它的朋友甚至无法启动他的 iPad1 上的主菜单。

根据 Instruments 的说法，似乎没有内存问题。

我将摘要屏幕中的部署目标设置为 iOS 5.0。我还需要做些什么才能让它在 iPad1 上运行吗？

# php - comparing the results from 2 functions and hiding results if they are the same

> ID：15725967
> 
> 赞同：0
> 
> 时间：2013-03-31T03:17:09.350
> 
> 标签：php, mysql

I'm using 2 functions. The first function pulls the following information:

```
$availcourse = "SELECT * FROM organization_courses oc left join course c on oc.courseid=c.id WHERE organizationid=$orgid ORDER By category";
$aresults = mysql_query($availcourse); 
```

The second function pulls this information:

```
$depcourse = "SELECT * FROM organization_dep_courses odc left join course c on odc.courseid=c.id WHERE depid=$departmentid ORDER By category";
$dcresults = mysql_query($depcourse); 
```

My question is, how would I keep records from function #1 from displaying in function #2 if they are the same? Obvious similarities in both results will be the courseid

I hope that makes sense.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T03:23:15.587

If `organization_courses` and `organization_dep_courses` have the same number of columns and the columns are in the same order, you can use MySQL's [`UNION`](http://dev.mysql.com/doc/refman/5.0/en/union.html).

```
$query = '
  SELECT *
  FROM (
    (SELECT *
     FROM organization_courses oc
     LEFT JOIN course c ON oc.courseid = c.id
     WHERE organizationid = $orgid)
    UNION
    (SELECT *
     FROM organization_dep_courses odc
     LEFT JOIN course c ON odc.courseid = c.id
     WHERE depid = $departmentid)
  ) q
  GROUP BY q.courseid
  ORDER BY q.category
'; 
```

**Note**: Your SQL code is vulnerable to [SQL Injection](http://en.wikipedia.org/wiki/SQL_injection).

# prolog - 使用 prolog 查找指定元素旁边的元素

> ID：15725970
> 
> 赞同：1
> 
> 时间：2013-03-31T03:17:31.047
> 
> 标签：prolog

给出的查询是

```
beside(Next,Beside,[a,b,c,d]).

Next=a, Beside=b;

Next=b, Beside=c;

Next=c, Beside=d; 
```

如果元素 x,y 彼此相邻，则该规则应该为真。

我的只能给出第一个答案，`Next=a, Beside=b`但不能给出其他答案。

那么我怎样才能让它提供所有的答案呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T08:22:29.867

append 完成这项工作：

```
beside(Next, Beside, L) :-
    append(_, [Next, Beside | _], L). 
```

# heroku - 在 Heroku 上设置 PostgreSQL application_name

> ID：15725974
> 
> 赞同：1
> 
> 时间：2013-03-31T03:18:06.743
> 
> 标签：heroku, postgresql-9.1, buildpack

`application_name`是一个 PostgreSQL 特定的连接参数，每个客户端在连接时可以（并且应该）设置它。它稍后会帮助 DBA 和操作人员将行为不端的查询与特定的应用程序代码相关联。

这个 SO question 解释了[如何`application_name`使用 SQLAlchemy](https://stackoverflow.com/questions/15685861/setting-application-name-on-postgres-sqlalchemy)进行设置，但不幸的是，它在 Heroku 上不起作用，因为设置`application_name`是在 PostgreSQL`8.5`分支上添加的（仅发布为），而安装在 Heroku 测功机上`9.0`的 PostgreSQL 客户端库（ ）版本是`libpq`从 PostgreSQL 8.4.9 构建。

如果有的话，可以做些什么来设置`application_name`Heroku？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T03:18:06.743

据我所知，[唯一](https://twitter.com/aknin/status/317730900093849600)的解决方案是向您的 slug[提供](http://www.higherorderheroku.com/articles/using-vulcan-to-build-binary-dependencies-on-heroku/)更新版本的服务。`libpq`

我的目标包是[libpq5](http://packages.ubuntu.com/precise-updates/libpq5)和[libpq-dev](http://packages.ubuntu.com/precise-updates/libpq-dev)，它们是从源包[postgresql-9.1](http://packages.ubuntu.com/source/precise-updates/postgresql-9.1)构建的。**为了节省大量工作**，并且如果您信任我的二进制文件，您可以直接跳到第 8 步并使用我制作的预构建二进制 libpq。不不，不要感谢我。

1.  使用 vanilla 12.04 启动新 VM
2.  `sudo apt-get update`
3.  `apt-get source postgresql-9.1`（你可能需要`sudo apt-get install dpkg-src`先）
4.  在提取的源代码中，查看[规则](http://www.debian.org/doc/debian-policy/ch-source.html#s-debianrules)文件（`postgresql-9.1-9.1.8/debian/rules`如果`precise-updates`仍在 PostgreSQL 9.1.8 中）。
5.  从规则文件中，我相信我们应该用于构建 libpq 的配置选项是：

    ```
    LDFLAGS="-Wl,--as-needed -Wl,-z,now" \
    CFLAGS="-fPIC -DLINUX_OOM_ADJ=0" \
    ./configure --prefix=/app/vendor \
      --enable-integer-datetimes \
      --enable-thread-safety \
      --enable-debug \
      --disable-rpath \
      --with-gnu-ld \
      --with-pgport=5432 \
      --with-system-tzdata=/usr/share/zoneinfo \
      --without-tcl \
      --without-perl \
      --without-python \
      --with-krb5 \
      --with-gssapi \
      --with-openssl \
      --with-libxml \
      --with-libxslt \
      --with-ldap 
    ```

    请注意，我删除/否定`--enable-nls --with-ossp-uuid --with-tcl --with-perl --without-python --with-pam`了，因为在 Heroku dyno 上它们会导致配置/构建失败。我不需要它们中的任何一个，我不确定它们是否会产生影响`libpq5`，我怀疑它们在测功机上非常需要，如果您觉得不一样，请享受修复它的乐趣，我向您致敬，好先生。

6.  `make && make install`

7.  现在所有的 postgresql 都安装到`/vendor`. 我们需要获取的文件在`postgresql-9.1-9.1.8/debian/libpq5.install`和中指定`postgresql-9.1-9.1.8/debian/libpq-dev.install`。唉，因为我们没有遵循 debian 的安装布局，我们需要调整这些列表来找到我们真正需要的文件。我想出了这个清单：

    ```
    tar c \
        include/postgresql/internal/* \
        include/libpq-fe.h \
        include/libpq-events.h \
        include/libpq/libpq-fs.h \
        include/pg_config*.h \
        include/postgres_ext.h \
        include/postgresql/9.1/server/catalog/pg_type.h \
        include/postgresql/9.1/server/catalog/genbki.h \
        include/postgresql/9.1/server/nodes/nodes.h \
        include/postgresql/9.1/server/utils/elog.h \
        include/postgresql/9.1/server/utils/errcodes.h \
        include/postgresql/9.1/server/utils/palloc.h \
        include/postgresql/9.1/server/c.h \
        include/postgresql/9.1/server/pg_config.h \
        include/postgresql/9.1/server/pg_config_manual.h \
        include/postgresql/9.1/server/pg_config_os.h \
        include/postgresql/9.1/server/port.h \
        include/postgresql/9.1/server/pg_trace.h \
        include/postgresql/9.1/server/postgres.h \
        include/postgresql/9.1/server/postgres_fe.h \
        include/postgresql/9.1/server/postgres_ext.h \
        include/postgresql/9.1/server/mb/pg_wchar.h \
        lib/libpq.so \
        bin/pg_config \
        lib/libpq.so.5* \
        | gzip --best > /tmp/libpq-5.4_9.1.8.tar.gz 
    ```

    请注意，我必须删除联机帮助页 ( `pg_config.1.gz`) 和本地化消息 ( `LC_MESSAGES/pg_config-9.1.mo LC_MESSAGES/libpq*.mo`under `share/locale`)，由于某种原因，它们不是基于我的测功机构建的。我设法将 Python 链接到`psycopg2`这个文件列表并成功使用它，但如果你觉得它很重要，你也可以弄清楚并修复它。

8.  我们的麻烦现在几乎结束了。您应该获取生成的`libpq-5.4_9.1.8.tar.gz`文件并将其放在您的 dyno 的 buildpack 可以访问的某个位置（如 S3），然后将其出售到 slug 中。如果您不确定如何执行此操作，我的建议（对于当前的[Python buildpack](https://github.com/heroku/heroku-buildpack-python)）是您在 slug 中创建文件“bin/pre_compile”，并将其放入其中：

    ```
    #!/bin/sh

    vendor() {
        printf "       "
        echo -n "$1 "
        curl --location --fail --silent $1 | tar -zx -C vendor && echo OK
    }

    echo "       (lines by the app will be prefixed with ---->>)"

    echo "---->> Fetching vendored binaries"
    mkdir -p vendor
    vendor "http://fusic.s3.amazonaws.com/executables/heroku/libpq-5.4_9.1.8.tar.gz"

    echo "---->> Injecting shell environment"
    # Even though Heroku's Python buildback has a hook mechanism, hooks can't
    #  change the buildpack's process environment (they are spawned, not
    #  sourced). This makes it possible to write hooks in any language, but
    #  makes vendoring stuff that should be linked against libraries installed
    #  during the rest of the build process harder. The kludge below hijacks
    #  $BIN_DIR/steps/pylibmc, which is sourced after this code and before pip
    #  is ran. Puked a little in my mouth.
    # See also: https://twitter.com/aknin/status/290832546260979712
    cat > $BIN_DIR/steps/pylibmc << EOF
    echo "---->> Injected environment hook executing"
    source .profile.d/activate_vendor_tree.sh
    EOF 
    ```

    并创建`.profile.d/activate_vendor_tree.sh`并将其放入其中：

    ```
    #!sh

    export PATH="/app/vendor/bin:$PATH"
    export CFLAGS="-I/app/vendor/include"
    export LDFLAGS="-L/app/vendor/lib -R/app/vendor/lib"
    export LD_LIBRARY_PATH="/app/vendor/lib:$LD_LIBRARY_PATH" 
    ```

    When compiling your slug, the pre-hook we installed kicks in, downloads our backported libpq and vendors it into the slug. If you're using the Python buildpack or a similarly limited buildpack (see detailed comment above), the ugly but necessary environment injection hook kicks in, and your requirements will be compiled against the new libpq. When you run your app, Heroku conveniently source everything in `.profile.d` before executing your code, again activating the new libpq. Oh yeah.

9.  At long last, you're done. Deploy your app to Heroku, and your dependencies should link against the new libpq. If your app was already deployed, you'll probably need to clear your [slug's cache dir](https://devcenter.heroku.com/articles/buildpack-api#caching) before Heroku's slug compiler will try to reinstall these requirements (so they can be linked to your new libpq; this is a thorny topic, which is outside the scope of this tutorial; the only method I know is to stick something in the `pre_compile` that will delete the cache). Ugh.

# java - 如何在 Jpanel java 中显示 Applet

> ID：15725976
> 
> 赞同：0
> 
> 时间：2013-03-31T03:18:12.237
> 
> 标签：java, swing, applet, awt, mixing

```
package net.rstown;

import java.applet.Applet;
import java.applet.AppletContext;
import java.applet.AppletStub;
import java.io.IOException;
import java.net.URL;
import java.net.URLClassLoader;
import java.util.HashMap;
import java.util.Scanner;

import javax.swing.JFrame;

public class RS2Loader extends JFrame implements AppletStub {

    public static final String PAGE_ADDRESS = "http://oldschool1.runescape.com/";
    private static final long serialVersionUID = -3450697819043722786L;
    private static final HashMap<String, String> parameters = new HashMap<String, String>();
    private static URL pageAddressUrl;

    public static void main(String[] args) throws Exception {
    pageAddressUrl = new URL(PAGE_ADDRESS);
    String pageSource = readPageSource(PAGE_ADDRESS);
    parseParameters(pageSource);
    String gamepackFileName = findGamepackFileName(pageSource);
    URLClassLoader classLoader = new URLClassLoader(new URL[] { new URL(
        PAGE_ADDRESS + gamepackFileName) });
    Applet game = (Applet) classLoader.loadClass("client").newInstance();
    RS2Loader rs2Loader = new RS2Loader();
    game.setStub(rs2Loader);
    game.init();
    game.start();
    rs2Loader.add(game);
    rs2Loader.setDefaultCloseOperation(EXIT_ON_CLOSE);
    rs2Loader.setSize(773, 530);
    rs2Loader.setTitle("Old School RuneScape Client Loader");
    rs2Loader.setResizable(false);
    rs2Loader.setVisible(true);
    }

    private static String readPageSource(String pageAddress) throws IOException {
    String source = "";
    Scanner scanner = new Scanner(new URL(pageAddress).openStream());
    while (scanner.hasNextLine()) {
        source += scanner.nextLine() + "\n";
    }
    scanner.close();
    return source;
    }

    private static void parseParameters(String pageSource) {
    String[] lines = pageSource.split("\n");
    String paramNameBeginning = "param name=";
    String valueBeginning = "value=";
    for (String line : lines) {
        if (!line.contains(paramNameBeginning)) {
        continue;
        }
        int start = line.indexOf(paramNameBeginning)
            + paramNameBeginning.length() + 1;
        int end = line.indexOf('"', start);
        String name = line.substring(start, end);
        start = line.indexOf(valueBeginning) + valueBeginning.length() + 1;
        end = line.indexOf('"', start);
        String value = line.substring(start, end);
        parameters.put(name, value);
    }
    }

    private static String findGamepackFileName(String pageSource) {
    String gamepackFileNameStart = "archive=";
    int gamepackFileNameStartIndex = pageSource
        .indexOf(gamepackFileNameStart);
    return pageSource.substring(gamepackFileNameStartIndex
        + gamepackFileNameStart.length(),
        pageSource.indexOf('\'', gamepackFileNameStartIndex));
    }

    public URL getDocumentBase() {
    return pageAddressUrl;
    }

    public URL getCodeBase() {
    return pageAddressUrl;
    }

    public String getParameter(String name) {
    return parameters.get(name);
    }

    public AppletContext getAppletContext() {
    return null;
    }

    public void appletResize(int width, int height) {

    }
}` 
```

那是加载器类，它的图片在这里[http://prntscr.com/yin89](http://prntscr.com/yin89) Botwindow 这是 Jpanel 是我希望加载器在我打开它时显示 botwindow 的图片在这里[http://prntscr .com/yin29](http://prntscr.com/yin29) .

```
 package net.rstown.gui;

import net.rstown.RS2Loader;
import net.rstown.log.Loggable;
import net.rstown.log.TextAreaLogHandler;
import net.rstown.menu.Menu;
import net.rstown.util.Configuration;
import net.rstown.util.Resources;

import javax.swing.*;

import java.applet.Applet;
import java.applet.AppletContext;
import java.awt.*;

import java.io.IOException;
import java.net.URL;
import java.net.URLClassLoader;
import java.util.HashMap;
import java.util.Scanner;
import java.util.logging.Logger;

public final class BotWindow extends JFrame {

    private static final long serialVersionUID = 1L;

    private final static Logger log = Logger.getLogger("BotWindow");

    private static boolean slowGraphics;

    public static boolean useSlowGraphics() {
        return slowGraphics;
    }

    private static final BotWindow instance = new BotWindow().initialize();

    @Override
    public void setVisible(boolean visible) {
        super.setCursor(Cursor.getDefaultCursor());
        super.setVisible(visible);
    }

    public static final BotWindow get() {
        return instance;
    }

    private final JScrollPane TEXT_SCROLL = new JScrollPane(22, 31);

    public JScrollPane getLogScrollPane() {
        return TEXT_SCROLL;
    }
//  private LoadingScreen screen = new LoadingScreen();
   private RS2Loader loader = new RS2Loader();

    private BotWindow initialize() {

        setSize(768, 530);
        setIconImage(Resources.Images.ICON);
        setTitle(Configuration.NAME + (Configuration.OUTDATED ? " (outdated)" : "") + (Configuration.DEVMODE ? " (developer mode)" : ""));
        Logger.getLogger("").addHandler(new TextAreaLogHandler());
        log.info("Welcome to RsTown!");
        Loggable.devlog("RsTown", "You are in developer mode!");
        setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
        TEXT_SCROLL.setViewportView(TextAreaLogHandler.TEXT_AREA);
        TEXT_SCROLL.setPreferredSize(new Dimension(765, Configuration.DEVMODE ? 120 : 19));
        setJMenuBar(BotMenu.get());
        setLayout(new BorderLayout());  
        add(TEXT_SCROLL, BorderLayout.SOUTH);
        //setSize(775, Configuration.DEVMODE ? 672 : 573);
        setMinimumSize(new Dimension(775, Configuration.DEVMODE ? 672 : 573));
        add(loader, BorderLayout.CENTER);
        //add(screen, BorderLayout.CENTER);
        // add(BotToolBar.get(), BorderLayout.NORTH);
        SwingUtilities.updateComponentTreeUI(getContentPane());
        setLocationCentered();
        setVisible(true);
        setResizable(false);

        return this;
    }

    /*public void removeLoadingScreen() {
        if (screen == null) return;
        remove(screen);
        screen = null;
        setResizable(true);
    }*/

    private void setLocationCentered() {
        final int x = Toolkit.getDefaultToolkit().getScreenSize().width / 2 - this.getWidth() / 2;
        final int y = Toolkit.getDefaultToolkit().getScreenSize().height / 2 - this.getHeight() / 2;
        setLocation(x, y);
    }

    public void toggleLog() {
        final boolean small = TEXT_SCROLL.getHeight() == 19;
        Menu.LOG_PLANE_TOGGLE.setIcon(new ImageIcon(small ? Resources.Images.HIDE_LOG : Resources.Images.SHOW_LOG));
        TEXT_SCROLL.setPreferredSize(new Dimension(TEXT_SCROLL.getWidth(), small ? 120 : 19));
        setMinimumSize(new Dimension(775, small ? 672 : 573));
        if (!small) {
            setSize(new Dimension(getWidth(), getHeight() - 99));
        }
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                int lastIndex = TextAreaLogHandler.TEXT_AREA.getModel().getSize() - 1;
                if (lastIndex >= 0) {
                    TextAreaLogHandler.TEXT_AREA.ensureIndexIsVisible(lastIndex);
                }
            }
        });
    }

    private static final class LoadingScreen extends JComponent {

        private static final long serialVersionUID = 1L;

        public LoadingScreen() {
            setPreferredSize(new Dimension(707, 500));
        }

        @Override
        public void paint(Graphics g) {
            g.drawImage(Resources.Images.LOADING_IMAGE, 0, 0, null);
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-15T22:01:09.027

使用您可以在此处下载的 AppletWindow 类：http: [//www.bluej.org/resources/classes.html#appletwindow](http://www.bluej.org/resources/classes.html#appletwindow)

# javascript - 在 webkit 中根据上下文获取文本

> ID：15725984
> 
> 赞同：1
> 
> 时间：2013-03-31T03:19:11.380
> 
> 标签：javascript, webkit, gtk, range, pygtk

我正在研究抓取机器人，我必须在其中抓取网页并“推断”内容。

我有的：

1.  Ubntu 上可用的 Webkit/python API 及其完整的 API，包括 DOM 访问和操作
2.  我无法控制的网页
3.  webkit 返回的一个有趣的文本输入字段。
4.  浏览器的受控环境 - 窗口大小/硬件是已知的。

我想做的事：

获取在输入框之前最接近且可视的文本。这大致转化为在输入框之前单击并在屏幕上向上移动 3/4 行或大约 1 英寸（如果您要手动操作）。我可以说 1 英寸，因为我控制窗口大小和其他硬件。

问题：

由于 DOM 层次结构和 CSS 将文本定位在视觉上更接近的页面标记可能并不总是更接近。如何模拟文本选择，就像用户手动进行一样？

尝试过的范围，但问题是获得正确的元素，因为范围需要开始/结束元素。此外，由于某种原因，当我以编程方式执行此操作时，我会收到 javascript/comments 其他绒毛，但当我在屏幕上手动执行并检查浏览器的范围时不会发生。

# objective-c - 当核心数据获取结果为空时设置默认值

> ID：15725987
> 
> 赞同：0
> 
> 时间：2013-03-31T03:19:15.950
> 
> 标签：objective-c

我正在使用简单的核心数据获取请求代码。

```
- (NSMutableArray *) read_cd
{
    NSError *error = nil;
    NSFetchRequest *request = [[NSFetchRequest alloc] init];
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"List_CD" inManagedObjectContext:cd_Context];
    [request setEntity:entity];
    NSSortDescriptor *sd = [[NSSortDescriptor alloc] initWithKey:@"last_date" ascending:NO];
    NSArray *sortDescriptor = [[NSArray alloc] initWithObjects:sd, nil];
    [request setSortDescriptors:sortDescriptor];
    NSMutableArray *mutableFetchResults = [[cd_Context executeFetchRequest:request error:&error] mutableCopy];
    if(mutableFetchResults == nil){
        //Handle the error
    }
    return mutableFetchResults;
} 
```

我正在使用这样的返回值

```
MSMutableArray *now_cd = self.read_cd;
cell output for {
    cell.label1.text = [[now_cd objectAtIndex:i] cd_title];
    cell.label2.text = [[now_cd objectAtIndex:i] cd_auth];
} 
```

当 executeFetchRequest 为空时，我想设置默认值。所以我可以继续使用现有的输出模块。

我不知道如何制作这样的方法

```
[[object objectAtIndex:i] instance] 
```

# javascript - How to detect text direction of element using Javascript?

> ID：15725988
> 
> 赞同：3
> 
> 时间：2013-03-31T03:19:22.250
> 
> 标签：javascript, html, right-to-left

What's the best way to detect the text direction of an html element using Javascript? I would expect to get either "rtl" or "ltr".

```
<div dir="ltr" id="foo">bar</div>

<div style="direction:ltr" id="baz">quux</div>

<div dir="ltr"><div id="jeez">whiz</div></div> 
```

How would I test for the direction on "foo", "baz" or "jeez"?

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-31T03:30:29.920

`getComputedStyle` is available in modern browsers (IE9+ and the others).

```
getComputedStyle(document.getElementById('foo')).direction 
```

[http://jsfiddle.net/m8Zwk/](http://jsfiddle.net/m8Zwk/)

[Reference to getComputedStyle on Mozilla Developer Network](https://developer.mozilla.org/en-US/docs/Web/API/Window/getComputedStyle?redirectlocale=en-US&redirectslug=DOM%2Fwindow.getComputedStyle)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T03:34:28.563

Try this

```
document.defaultView.getComputedStyle(document.getElementById('baz'),null)['direction']; 
```

OR

```
style = document.defaultView.getComputedStyle(document.firstChild,null);
console.log(style.direction); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-31T03:46:21.983

@explosion-pills answer is correct. I did some more research for IE compatibility and came up with the following:

```
function getDirection(el) {
    var dir;
    if (el.currentStyle)
        dir = el.currentStyle['direction'];
    else if (window.getComputedStyle)
        dir = getComputedStyle(el, null).getPropertyValue('direction');
    return dir;
} 
```

This should even work on Firefox 3.6 which requires `null` as the second parameter to `getPropertyValue`.

Since this gives more information I thought I would post it in case it helps someone.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-31T03:27:27.080

You can simply use the [`style`](https://developer.mozilla.org/en-US/docs/DOM/element.style) object:

```
console.log(document.getElementById('baz').style.direction); 
```

[**DEMO**](http://jsfiddle.net/Daedalus/B28Hh/)

Take note that this object of the DOM only represents the in-line styles of an element, it doesn't apply to any css style sheets.

# java - Making (desktop) software whose components are programmed in different languages?

> ID：15725990
> 
> 赞同：2
> 
> 时间：2013-03-31T03:19:31.123
> 
> 标签：java, python, c, computer-science, multilingual

Can the different components of a desktop software be programmed in different languages ? For example, a software called MultiProg consists of components Comp1, Comp2, Comp3 etc. All components except 1,2,3 are in java and 1 is in C, 2 in Python, 3 in Scala etc. Is it possible to do that ? When does the need to do this arise ?

Is this commonly seen in the software industry ? How do we make the components communicate when they are written in different languages ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T03:22:32.840

当然*可以*。通常，您会使用某种粘合层（例如管道、套接字、文件监视、共享内存、[协议缓冲区](https://developers.google.com/protocol-buffers/)）来允许不同的进程相互交谈/调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-31T03:38:58.177

这当然不是不寻常的。

python 标准库的许多部分是用 C 编写的，许多流行的第三方库（例如 numpy）也有部分是用 C 编写的，您可以使用 ctypes 创建与自己的 C 库的绑定。Python 的默认 GUI 库 Tkinter 的一部分是用 Tcl/Tk 编写的。

Java 具有 Java 本机接口 (JNI)，可用于集成针对物理机而不是 Java 虚拟机编写的模块。Scala 可以使用为 JVM 编写的库（显然包括那些用 Java 编写的），它也可以使用 JNI。

Most large softwares are written in multiple languages. Usually two languages are used, one is a fast, compiled language (usually C or C++) for performance critical sections and the other is a scripting language (for example Python, Lisp, Lua) to write the complex but not performance critical parts.

There are two requirements for any languages to be able to interact. One is they have to be able to share in-memory data in a mutually understood format, the second is they have to be able to call each other's functions using a common "calling convention". Native interface libraries solves those issues.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-31T03:47:27.700

There's 2 ways this can be done.

The first way is to compile the different pieces (in different languages) into object files and link them. This only works for some languages and not others, and depends on the availability of suitable tools. For example, if one language does garbage collection you can't expect other languages to suddenly support it.

The other way is to build the application as separate processes that communicate/cooperate. This avoids the linking problem, but means that you've got separate processes (which can be "less clean") and serialisation/de-serialisation, etc.

Note: there is a third way, which is building an interpreter or something into the application to run scripting stuff. I'm not sure if this counts (it depends if you consider the scripts part of the application's code or part of the data the application uses at run-time).

Normally, nobody mixes languages without a good reason, because it's a pain in the neck for programmers. Most programmers know lots of languages but are only experts in a few, and the more languages you use the more chance there is that one or more programmers won't be able to comprehend one or more pieces of the application's source code.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-31T03:21:14.080

Sure. Different components do different works. And they use IPC (Inter-processes communication) to exchange data. It is common on Linux. More details about IPC could be found here ([http://en.wikipedia.org/wiki/Inter-process_communication](http://en.wikipedia.org/wiki/Inter-process_communication)).

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-31T03:45:58.667

If you're using Microsoft's .Net framework you can create components in any of the supported .Net languages that interoperate with no extra work on your part: for example your application could be written in C# and use DLLs from Visual Basic, C++/CLI, Boo, and so on (a list of languages [here](http://en.wikipedia.org/wiki/List_of_CLI_languages): ). .Net is available on windows and via [Mono](http://www.mono-project.com/Main_Page) on OSX and Linux

# java - 此 API 如何获取 JList (String) 的项目

> ID：15725997
> 
> 赞同：1
> 
> 时间：2013-03-31T03:20:56.277
> 
> 标签：java, swing, casting, jlist, defaultlistmodel

我有一个包含一些项目的 JList，然后我有一个 API 需要获取所选项目并使用它来提供有关该项目的一些信息。我的问题是 JList 的类型是 String 而我的 API 的类型显然是不同的。让我们说LocationAPI。所以 API 只从它自己的类型而不是其他类型获取索引。我正在寻找一种将所选项目（字符串）转换为适合 API 的解决方案。这是 API 的一个简单示例。

```
LinkedList<LocationAPI> stations = FetchWeatherForecast.findWeatherStationsNearTo("cityName");
for (LocationAPI station : stations) { System.out.println(station); }

// Assume the first match on the list is correct
LocationAPI firstMatch = stations.getFirst();

List<ForecastForOneDay> forecast = FetchWeatherForecast.getWeatherForecast(firstMatch); 
```

所以这是 API 工作原理的一个简单示例，但我必须使用我自己的项目和列表，而不是“firstMatch”和“Station”。我得到了项目和列表，但我以不同的方式制作它们：

```
DefaultListModel<String> cityPlace = new DefaultListModel<String>();
JList myList = new JList(cityPlace); 
```

那么如何在 API 中使用上述列表中的项目呢？