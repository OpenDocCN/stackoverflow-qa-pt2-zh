# StackOverflow 问答 15393000-15393999

# backbone.js - 主干视图要求我不使用的模型

> ID：15393000
> 
> 赞同：0
> 
> 时间：2013-03-13T18:01:02.980
> 
> 标签：backbone.js, backbone-views, backbone-relational

我有一个用户模型，每个用户都有一个艺术家，每个艺术家都有几张专辑。我正在尝试渲染视图以显示用户配置文件。当我尝试渲染视图时，出现以下错误：

```
Uncaught ReferenceError: albums is not defined
(anonymous function) b.template.c underscore-min.js:30 
Backbone.View.extend.render profile.js:13 
Backbone.Router.extend.profile router.js:62 
... 
```

似乎我没有将专辑对象传递给模板，但我没有在该模板中使用任何专辑变量，也没有在视图中使用。这是两者的代码：

看法：

```
headerT = require('text!templates/user/profile_header.html');
  profileT = require('text!templates/user/profile.html');
  var profilesView = Backbone.View.extend({
  el: $('#main-container'),
  initialize: function(){
     this.template = _.template(profileT);                                                                                                  
     this.artist = this.model.get('artist');
  },

  render: function(){
     $(this.el).html(this.template({
       current_user: app.current_user,
       user: this.model.toJSON(),
       artist: this.artist.toJSON(),
     }));
     return this;
  },  
}); 
```

模板：

```
<div class="row">
    <div class="grid_3">
        <img src="<%=user.pict%>" class="frame" alt="">
        <span class="title">Username &ndash; <strong><%=user.username%></strong></span>
        <%if(current_user!=undefined && (current_user.get('is_admin') == true || current_user.get('id') == user.id)){%>
            <span class="title"><span class="icon user"></span> <a href="#/editProfile/">Edit Profile</a></span>
        <%}%>
        <%if(artist.active==true){%>
            <div><a href="#/artistProfile/">Go to Artist Profile</a></div>
        <%}%>
        <div class="separator"></div>
    </div>                                                                                                                                             
    <div class="clear"></div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T17:52:56.233

我更改了保存模板的变量的名称并且它起作用了。我有另一个同名的变量，在另一个文件中保存了一个不同的模板（其中包含专辑），它正在加载那个模板。我认为范围不同，因为它在另一个文件中，但事实并非如此。

# git - 如何不忽略“在上游源中找不到，使用 HEAD 代替”的消息？

> ID：15393004
> 
> 赞同：2
> 
> 时间：2013-03-13T18:01:19.870
> 
> 标签：git, shell, deployment, warnings, clone

我正在编写 shell 脚本来`git`从远程仓库部署一个分支。

这是我正在使用的命令：

```
 git clone -q --depth=1 https://my.repourl.com/git-repo.git /my/destination/folder -b develop 
```

问题是，如果分支（在这种情况下为开发）是错误的，它只是忽略并从主分支中提取（？）。我收到这条消息：

```
 warning: Remote branch devel not found in upstream origin, using HEAD instead 
```

我只想让 git 死/退出，如果它没有找到指定的分支。有什么标志吗？或者有什么替代方案？`git-archive`由于某种原因没有工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T19:47:07.090

正如[twalberg](https://stackoverflow.com/users/1253222/twalberg) [评论](https://stackoverflow.com/questions/15393004/how-not-to-ignore-the-message-not-found-in-upstream-origin-using-head-instead#comment21760995_15393004)，**[`git ls-remote --heads https://my.repourl.com/git-repo.git`](http://git-scm.com/docs/git-ls-remote)**是用于检查远程端是否存在分支的命令。

问题“[如何检查给定远程存储库上是否存在远程分支？](https://stackoverflow.com/a/8223965/6309) ”列出了另一种可能性：

```
git clone -n
git fetch
# parse git branch -r 
```

* * *

测试（bash）可能如下所示：

```
br=$(git ls-remote --heads https://my.repourl.com/git-repo.git|grep abranch)
if [[ "${br}" != "" ]]; then
  git clone -b aBranch ...
fi 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-23T11:09:38.377

我得到的行为与 Kevin 使用 git v1.7.1 发布的行为相同 - 但是在使用 git v2.12.0 进行测试时，当指定不存在的分支时 ，**克隆**命令*实际上会失败：*

```
$ git clone --depth 1 -b FakeBranch --bare gitserver:/repo.git
Cloning into bare repository 'repo.git'...
warning: Could not find remote branch FakeBranch to clone.
fatal: Remote branch FakeBranch not found in upstream origin 
```

# clickonce - Clickonce 应用程序在 XNA 4.0 中安装后不会运行

> ID：15393005
> 
> 赞同：0
> 
> 时间：2013-03-13T18:01:24.143
> 
> 标签：clickonce, xna-4.0

我最近阅读了有关将 XNA 游戏转换为独立可执行文件的文章，并发现通过 Visual Studio 发布它可以让我简单地分发它。我了解发布的过程，并且这样做没有问题。发布完成后，我得到三个文件：文件夹、安装文件和 clickonce 文件。我运行并且能够安装我的游戏，但是当它运行时，只有大约一秒钟的介绍音乐播放，然后它就停止了。当我尝试在开始菜单中运行快捷方式时，它也不会运行。不过我确实注意到，安装文件只有 440 KB，clickonce 是 6KB，包含所有源的文件夹是 58.8 MB。创建的快捷方式也很小，只有 340 KB。所以我的问题是，发布前有什么特殊的属性需要调整吗？在应用程序文件中，所有文件都设置为“包含（自动）”，而所有 dll 都设置为“先决条件（自动）”。先决条件是：Microsoft .NET FrameWork 4 客户端配置文件（x86 和 x64）、Microsoft XNA Framework Redistributable 4.0 和 Windows Installer 3.1。我看过这个视频`http://www.youtube.com/watch?v=sfjLeIDQV5Q`并且运行他的游戏没有问题，所以我看不出我做错了什么。而且我之前从未使用过 XNA 3.5，我开始使用 XNA 4.0 制作游戏并且从未更新过项目，所以我认为这不会是兼容性问题。如果您有解决此问题的任何想法，请任何人告诉我，并提前感谢您的任何帮助 =)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T01:32:17.073

删除您的 \bin\ 文件夹并构建应用程序。转到 \bin\ 文件夹并双击 exe。它有效吗？

如果是这样，请发布应用程序并安装它。找到 exe（yourprofile\myapps\2.0\obfuscated folder\obfuscated folder\xxxx...tion... 其中 xxxx 是程序集名称的第一个四个字符）并双击它并运行它。它有效吗？

如果没有，那么您没有包括它需要的所有文件。

# html - Magento 标头错误

> ID：15393006
> 
> 赞同：-1
> 
> 时间：2013-03-13T18:01:29.737
> 
> 标签：html, css, magento

我有奇怪的 Magento 标头错误，其中网站的标头在某些类别上额外扩展了 10px.. [http://shop.snovotvorci.devpassion.eu/index.php/](http://shop.snovotvorci.devpassion.eu/index.php/)

如果您从主页跳转到某些菜单导航项，您会看到徽标和布局向下移动，并且网站顶部还有额外的 10px。

我无法找出为什么会发生这种情况，因为我对主页和内页使用相同的 html 布局..

对此有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T17:27:30.143

该错误位于 header.phtml 文件中。

那边有一个 php sytax 说 ifhomepage echo this logo, else echo this logo。基本上有相同的徽标，但在主页上的第一种情况下，有额外的 div 导致该错误。

干杯

# c - 在 c 中操作 char*

> ID：15393007
> 
> 赞同：0
> 
> 时间：2013-03-13T18:01:30.093
> 
> 标签：c

这是我的程序，当我尝试执行 s[0] = s[1] 时出现段错误。我不明白为什么这不起作用，因为我所做的只是在 s[1] 中取值并将其放入 s[0] 中。

```
#include<stdio.h>

void main() {
  char x;
  char *s="stackoverflow";

  s[0] = s[1];  // it is segfaulting here 
  x = s[0];  //this works though 
  printf("this is: %s\n",s);
} 
```

我正在使用 gcc filename.c 编译并在 ubuntu 终端中使用 ./a.out 运行它。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T18:03:35.487

当你这样做时：`char *s="stackoverflow";`那么**s 是一个指向代码部分中的内存的指针**，所以你不能改变它。因为它是*只读的*，所以在运行时会出现分段错误（如果使用`const`关键字，则会出现编译错误，这更好。所以`const`如果您不想对字符串进行更改，建议使用） .

如果这样做，`char s[]="stackoverflow";`则**s 是堆栈上的字符数组**，因此您可以更改它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T18:04:05.137

您不应尝试更改字符串文字。如果要修改该值，请使用`strcpy`例如复制。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T18:09:50.510

更改变量声明：

```
char s[] = "stackoverflow"; 
```

将消除您遇到的问题，因为变量将在进入范围时分配存储空间并使用给定的数据进行初始化。

# php - MySql 从一个 id 获取两个值

> ID：15393008
> 
> 赞同：1
> 
> 时间：2013-03-13T18:01:30.197
> 
> 标签：php, mysql

我在下面有这个 sql 查询，注意`receiver`从 id 返回的字段`table_1`

我的问题是如何在现场获得接收`FirstName`器？`LastName``receiver`

```
SELECT DISTINCT
    FirstName, 
    LastName, 
    table_2.status, 
    (select FirstName, LastName from table_1 where table_1.id = table_2.receiver) as receiver 
FROM table_1
INNER JOIN 
    table_2 on table_1.key_2 = CONCAT('OFFLINE-', table_2.id)
ORDER BY FirstName, LastName 
```

我在我的 SQL 中添加了一个子查询，但这给了我一个语法错误:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T18:04:24.037

```
select distinct FirstName, LastName, table_2.status, CONCAT(FirstName, ' ', LastName) 
from table_1 inner join table_2 on table_1.key_2 = CONCAT('OFFLINE-', table_2.id) 
order by FirstName, LastName 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T19:23:16.290

You could do it with aliases instead of a subquery:

```
SELECT DISTINCT
    t2.FirstName, 
    t2.LastName, 
    t2.status, 
    CONCAT(t1.FirstName,' ', t1.LastName) as receiver
FROM table_1 t1
INNER JOIN 
    table_2 t2 on t1.key_2 = CONCAT('OFFLINE-', t2.id)
ORDER BY t1.FirstName, t1.LastName 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T19:11:02.197

这有效:)

```
SELECT DISTINCT
    FirstName, 
    LastName, 
    table_2.status, 
    (select CONCAT(FirstName,' ',LastName) as Name from table_1 where id=receiver) as receiver, 
FROM table_1
INNER JOIN 
    table_2 on table_1.key_2 = CONCAT('OFFLINE-', table_2.id)
ORDER BY FirstName, LastName 
```

# c++ - 如何声明必须实现而不是虚拟的功能？

> ID：15393009
> 
> 赞同：1
> 
> 时间：2013-03-13T18:01:33.427
> 
> 标签：c++, interface, low-latency

我正在使用类来声明接口。我只想定义方法签名。此方法必须在任何非抽象子类中实现。我不需要方法是虚拟的。这是 C# BTW 中的默认行为（我来自 C#/Java 世界）

但是，在 C++ 中似乎是不可能的。我要么以常规方式声明方法

```
void Foo::Method() 
```

然后不强制实现它或将方法声明为“纯虚拟”

```
void virtual Foo::Method() = 0; 
```

然后方法变为虚拟，但我想避免这种情况以节省一点性能。

看来我想要那样的东西

```
void Foo::Method() = 0; 
```

但这将是[编译错误](http://msdn.microsoft.com/en-us/library/6s480ckd%28v=vs.80%29.aspx)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T18:04:43.673

如果您打算使用模板代码的派生类，即编译时多态性，那么您只需要记录预期的签名

如果未实现使用的函数，则使用派生类的代码将无法编译和链接

否则，对于运行时多态，它需要是虚拟的，否则它不会被调用

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T18:28:44.480

我相信您可能会对 C# 版本的工作方式感到困惑：

```
 class A {
    public void NonVirt() { Console.Out.WriteLine("A:NonVirt"); }
    public virtual void Virt() { Console.Out.WriteLine("A:Virt"); }
  }

  class B : A {
    public void NonVirt() { Console.Out.WriteLine("B:NonVirt"); }
    public override void Virt() { Console.Out.WriteLine("B:Virt"); }
  }

  class Program {
    static void Main(string[] args) {
      A x = new B();
      x.NonVirt();
      x.Virt();
    }
  } 
```

这将输出

```
A:NonVirt 
B:Virt 
```

因此，即使在 C# 中，如果要调用派生实现，也需要将方法设为虚拟。

如果必须在所有非抽象子类中实现方法，这意味着您需要*通过基类指针*调用它们。这反过来意味着您需要使它们成为虚拟的，就像在 C# 中一样（可能在 Java 中，但我不确定）

顺便说一句，在现代 CPU 上，虚拟调用的价格是几纳秒，所以我不确定它是否值得，但可以说是。

如果你想避免虚拟调用的成本，你应该通过模板使用编译时多态性

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T18:12:30.620

C++ 中没有接口的概念。实现目标的唯一方法是创建一个基类，定义为`virtual`以及`= 0`必须在子类中实际定义的所有方法。

```
class IBase {
      // ...
        virtual void f1() = 0;
      // ....
} 
```

如果所有方法都定义为 ，则该类将是虚拟纯的`f1`，这是您可以获得的最接近接口的。

Java 中接口的概念有点像实现它的类的契约。编译器通过检查实现者的内容来强制执行契约的约束。这种契约或*显式*结构子类型的概念在 C++ 中并不正式存在。

但是，您可以通过定义一个模板来手动验证这些约束是否得到遵守，该模板将期望一个具有已定义方法或属性的类作为参数，并在要验证的类上使用该模板。我想这可以被认为是一种单元测试形式。

# sql-server - 使用 Access 驱动程序创建从 SQL Server X64 到文本和 Excel 的链接服务器

> ID：15393012
> 
> 赞同：0
> 
> 时间：2013-03-13T18:01:51.640
> 
> 标签：sql-server, 64-bit, etl, linked-server, adhoc

我们现在正在将所有生产数据库从 SQL Server 2005 32 位实例迁移到全新的 SQL Server 2012 64 位实例。

我们的开发人员仍然遭受的主要困难之一是**链接服务器**。

我们有很多程序需要从文本、csv 或 excel 文件中获取一些数据，它的实现方式是使用链接服务器到文本文件，这样您就可以轻松地向文本文件抛出 select 语句并将其插入到桌子。

问题提出了 32 位服务器使用`Microsoft.Jet.OLEDB.4.0`驱动程序的文件位于对每个人都具有完全权限的剪切目录中，我们从未遇到安全问题。

在新的 64 位服务器上，我们添加了一个链接服务器，其语法如下：

```
USE [master]
GO
EXEC master.dbo.sp_addlinkedserver 
    @server = N'TEMP_FILES_1'
    , @srvproduct=N''
    , @provider=N'Microsoft.ACE.OLEDB.12.0'
    , @datasrc=N'\\SERVER-APP01\BWA\TempFiles'
    , @provstr=N'Text' 
```

**笔记：**

*   数据源位于网络共享上。
*   MSSQL 服务作为域管理员帐户运行。
*   我以域管理员的身份远程登录，当然也是本地管理员。
*   该`\\SERVER-APP01\BWA\TempFiles`目录为每个人设置了完全访问权限。

现在，当我运行时，`EXEC sp_testlinkedserver [TEMP_FILES_1]`我收到以下错误消息：

```
OLE DB provider "Microsoft.ACE.OLEDB.12.0" for linked server "TEMP_FILES_1" returned message "'\\SERVER-APP01\BWA\TempFiles' is not a valid path. Make sure that the path name is spelled correctly and that you are connected to the server on which the file resides.". 
```

这绝对是一个安全问题，但有趣的是，当我运行`xp_cmdshell 'dir \\SERVER-APP01\BWA\TempFiles'`它时，它会返回记录，很明显服务可以访问这个文件夹......

在我的本地计算机的另一端，我也有一个具有相同链接服务器的 64 位实例，它就像一个魅力！

我一直在互联网上寻找解决问题的方法，但似乎很少使用链接到文本文件的服务器，尤其是 64 位。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-01-24T15:48:00.690

我们必须先将文件复制到目标 SQL Server 系统上的驱动器，然后才能读取数据，如下所示：

```
EXEC xp_cmdshell 'net use y: \\[source directory path] [pw] /USER:[active user]'
EXEC xp_cmdshell 'copy y:\[source file] [destination directory]'
EXEC xp_cmdshell 'net use y: /delete' 
```

# blueimp - Blueimp 自动准备好文档

> ID：15393013
> 
> 赞同：-2
> 
> 时间：2013-03-13T18:01:59.430
> 
> 标签：blueimp

**你好，**

即使我没有进行新安装，也可以阻止旧的出现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T18:03:38.373

以下我的文件准备好了

![在此处输入图像描述](../Images/6c87230667f104ffc42796f3a355e6f6.png)

# c# - 在 C# 中使用计时器更改颜色 Alpha

> ID：15393014
> 
> 赞同：0
> 
> 时间：2013-03-13T18:02:14.287
> 
> 标签：c#, .net, winforms

我有一个 WinForms 应用程序，用户可以从颜色选择器中选择一种颜色。（我正在使用工具箱中的颜色对话框）。

现在，当用户选择某种颜色时，我正在使用 GDI 和位图在表单上绘制一些形状。是否可以使用计时器更改此颜色的 alpha？

因为我所看到的只是颜色对话框返回颜色或仅返回 A、R、G、B 的当前值（阿尔法、红色、绿色、蓝色），并且这些值不能以编程方式设置。

我知道有`Color.FromArgb()`方法。我想到了这段代码：

```
Color userColor = colorsDialog.Color;
Color c = Color.FromArgb(alphaValue,userColor); 
```

当 alphaValue 设置为零时，并且在每个计时器滴答上将其递增 1。但它不起作用..

编辑：形状绘制在位图上。

# mongodb - 聚合：项目虚线字段似乎不起作用

> ID：15393018
> 
> 赞同：2
> 
> 时间：2013-03-13T18:02:21.200
> 
> 标签：mongodb, aggregation-framework

我有一个包含此文档的数据库：

```
{"_id":{"$id":"xxx"},"duration":{"sec":137,"usec":0},"name":"test"} 
```

如果我用这个管道调用 db.collection.aggregate：

```
{$project:{_id: 0, name: 1, duration: 1, seconds: "$duration.sec"}} 
```

我得到这个结果：

```
{"result":[{"duration":{"sec":137,"usec":0},"name":"test"}],"ok":1} 
```

为什么结果没有“秒”字段？我是否使用了错误的投影语法？

我不完全确定服务器正在运行的 mongodb 版本。我正在使用 1.3.1 php 驱动程序和 php 5.4.3，但服务器可能比这更旧 - 可能大约半年？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T18:58:46.670

根据[$project](http://docs.mongodb.org/manual/reference/aggregation/project/)上的 MongoDB 文档：

> 您也可以使用 $project 重命名字段。考虑以下示例：

```
db.article.aggregate(
 { $project : {
     title : 1 ,
     page_views : "$pageViews" ,
     bar : "$other.foo"
 }} ); 
```

> 该操作将 pageViews 字段重命名为 page_views，并将另一个子文档中的 foo 字段重命名为顶级字段 bar。

该示例似乎与您尝试执行的操作非常匹配。

我知道10gen正式发布了MongoDB v2.2的聚合框架。查看[当前的生产版本](http://www.mongodb.org/downloads)，我相信它是 2.2.3。如果您在以前的开发版本上运行，聚合可能会发生一些奇怪的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-02T08:05:20.763

正如 Bryce 所说，我目前正在通过 shell 使用 MongoDB 2.6，并且 $project 管道正在像您一样重命名嵌套字段。

```
db.article.aggregate({$project:{'_id': 0, 'name': 1, 'duration': 1, 'seconds': '$duration.sec'}} 
```

我还没有尝试过使用 python 或 php 驱动程序，但我以前使用最后一个 pymongo 的管道运行良好。

# tastypie - 在 Tasty PIE 中的 PUT 请求以使用非 PK 值进行更新

> ID：15393020
> 
> 赞同：0
> 
> 时间：2013-03-13T18:02:32.400
> 
> 标签：tastypie

我正在使用 Tasty Pie 创建服务。我已经应用了过滤，以便它根据非 PK 值进行搜索：我的 api.py 文件：

```
class TestResource(ModelResource):
class Meta:
    queryset = ack_dadc.objects.all()
    authorization = Authorization()
    filtering = {
        'DistributorUID': ['exact'],

    }
    detail_allowed_methods = ['get', 'post', 'put', 'delete'] 
```

我的问题是：我可以根据 http:localhost/api/v1/test/?DistributorUID=steve 执行 PUT 请求吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T02:41:07.517

您将在 Tastypie Cookbook 中找到如何使用普通 URL 参数实现此目的的示例：http: [//django-tastypie.readthedocs.org/en/latest/cookbook.html#using-non-pk-data-for-你的网址](http://django-tastypie.readthedocs.org/en/latest/cookbook.html#using-non-pk-data-for-your-urls)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-14T09:15:27.200

我认为您不能这样做：过滤器仅适用于*GET*请求。

因此，如果您想实现这一点，您必须通过 2 个请求来实现：

```
GET http:localhost/api/v1/test/?DistributorUID=steve 
```

获取资源的ID，然后

```
PUT http:localhost/api/v1/test/ID 
```

根据其 ID 更新它。

# xml - 如何与 PostgreSQL 进行 XML 规范比较？

> ID：15393026
> 
> 赞同：1
> 
> 时间：2013-03-13T18:02:49.073
> 
> 标签：xml, postgresql, compare

我需要将 XML 值与 PostgreSQL 9.X 进行比较。例子：

```
 SELECT 1 FROM t WHERE xml1=xml2; -- error for XML datatype 
```

但只能转换为*文本*数据类型，

```
 SELECT 1 FROM t WHERE xml1::text=xml2::text; -- OK, but is a text-comparison 
```

这不是最好的方法。我需要一个更好的比较算法...寻找它，我发现，也许可以比较“Canonical XML”。

如何使用 PostgreSQL 进行“规范 XML 比较”？

* * *

**注意**：PostgreSQL 团队假设 XML 比较的前提是错误的？

许多关于 XML 比较的文档表明*规范 XML*是该操作的参考格式。前任。[在维基百科](http://en.wikipedia.org/wiki/Canonical_XML)，他们说，

> 根据 W3C，如果两个 XML 文档具有相同的规范形式，那么这两个文档在给定的应用程序上下文中在逻辑上是等效的。

但是，[PostgreSQL docs/9.2](http://www.postgresql.org/docs/9.2/static/datatype-xml.html#AEN7027)说，

> xml 数据类型的不寻常之处在于它不提供任何比较运算符。这是因为对于 XML 数据没有定义良好且普遍有用的比较算法。

好吧，对我来说这是一个[错误的前提](http://en.wikipedia.org/wiki/False_premise)，并且可以隐藏一个重要的 PostgreSQL 问题的真正缺乏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T21:54:47.027

我为 PostgreSQL 中的 XML 类型实现做出了贡献，并且可能编写了您引用的大部分文档。

目前的情况有很多原因：

*   SQL 标准没有为 type 指定比较运算符`xml`。
*   在开始实施时，Canonical XML 并没有被广泛使用和理解（至少被相关人员认为是这样）。
*   XML 规范化不起作用存在某些限制。尽管这些在实践中可能很少见，但这会产生无法比较数据类型的某些值的情况，这会导致例如索引问题。（浮点类型的 NaN 值由于类似原因被分配了一个排序位置。）
*   通过规范化进行比较是否适用于所有用途以及用户始终想要的内容仍然存在争议。

用于可选使用的 XML 规范化函数的实现肯定会受到欢迎。我实际上希望看到一个单独的`xmlcanonical`类型，但这将是相当多的工作。

# iis-7 - 具有“？”时的 IIS7 url 重写问题

> ID：15393029
> 
> 赞同：3
> 
> 时间：2013-03-13T18:02:58.640
> 
> 标签：iis-7, url-rewriting

我有一个格式为 URL

```
abc/pqr/xyz/?word1 
```

这需要重定向到

```
abc/pqr/xyz/?word2 
```

是否可以使用 IIS7 重写？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T14:46:59.130

可以使用具有以下规则的 IIS7 重写模块：

```
<rule name="Rewrite querystring" stopProcessing="true">
    <match url="^abc/pqr/xyz/?$" />
    <conditions>
        <add input="{QUERY_STRING}" pattern="^word1$" />
    </conditions>
    <action type="Redirect" url="{R:0}?word2" appendQueryString="false" />
</rule> 
```

它的作用是：检查 url 是否为`abc/pqr/xyz/`or`abc/pqr/xyz`和查询字符串是否准确`word1`。如果是，它将用户重定向到相同的 url ( `{R:0}`)，但改为附加`?word2`。

拥有该`appendQueryString="false"`选项很重要，因为您不希望模块`word1`在最后附加您的。

默认情况下，如果未指定，重定向是 301（永久），关于 @Owen 评论，这似乎最适合您的情况！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T18:11:11.770

看[这里](https://stackoverflow.com/questions/2257403/iis-url-rewrite-module-redirect-based-on-querystring)

您需要指定要匹配的 url，“abc/pqr/xyz”，然后是要匹配和替换的查询字符串。

# c# - 如何使用带有 ASP.Net/C# 的 MySQL ODBC 将自动增量 ID 插入到 MySQL 表中？

> ID：15393032
> 
> 赞同：1
> 
> 时间：2013-03-13T18:03:03.673
> 
> 标签：c#, asp.net, mysql, odbc, auto-increment

我正在使用 MySQL ODBC 将数据插入到 MySQL 表中。表中的第一列是一个 int 类型和自动递增的 ID。当我为第一行插入数据时，@ReqID 的值应该是什么，如下所示？另外，我如何确保后续执行对 ID 自动递增？

这是C#：

```
 string conString = WebConfigurationManager.ConnectionStrings["mysql"].ConnectionString;
        using (OdbcConnection con = new OdbcConnection(conString))
        {
            con.Open();
            using (OdbcCommand cmd = con.CreateCommand()) {
                cmd.CommandText = "INSERT INTO GraphicsRequest (RequestID, Graphic1Desc, Graphic2Desc, Graphic3Desc, ColorChart, Hex1, Hex2, Hex3, Hex4) VALUES (@reqID, @g1d, @g2d, @g3d, @colorChart, @hex1, @hex2, @hex3, @hex4)";
                cmd.Parameters.AddWithValue("@reqID", 1);
                cmd.Parameters.AddWithValue("@g1d", txtGraphic1Desc.Text);
                cmd.Parameters.AddWithValue("@g2d", txtGraphic2Desc.Text);
                cmd.Parameters.AddWithValue("@g3d", txtGraphic3Desc.Text);

                cmd.Parameters.AddWithValue("@colorChart", ddlColorChart.SelectedValue);
                cmd.Parameters.AddWithValue("@hex1", lblColor1.Text);
                cmd.Parameters.AddWithValue("@hex2", lblColor2.Text);
                cmd.Parameters.AddWithValue("@hex3", lblColor3.Text);
                cmd.Parameters.AddWithValue("@hex4", lblColor4.Text);
                cmd.ExecuteNonQuery();
            }
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T18:08:30.773

在 MySQL 中，如果要使用数据库本身的自动递增功能，则不应在 INSERT 期间提供 ID 字段。

所以这就是你的情况。

```
 string conString = WebConfigurationManager.ConnectionStrings["mysql"].ConnectionString;
    using (OdbcConnection con = new OdbcConnection(conString))
    {
        con.Open();
        using (OdbcCommand cmd = con.CreateCommand()) {
            cmd.CommandText = "INSERT INTO GraphicsRequest (Graphic1Desc, Graphic2Desc, Graphic3Desc, ColorChart, Hex1, Hex2, Hex3, Hex4) VALUES (@g1d, @g2d, @g3d, @colorChart, @hex1, @hex2, @hex3, @hex4)";
            cmd.Parameters.AddWithValue("@g1d", txtGraphic1Desc.Text);
            cmd.Parameters.AddWithValue("@g2d", txtGraphic2Desc.Text);
            cmd.Parameters.AddWithValue("@g3d", txtGraphic3Desc.Text);

            cmd.Parameters.AddWithValue("@colorChart", ddlColorChart.SelectedValue);
            cmd.Parameters.AddWithValue("@hex1", lblColor1.Text);
            cmd.Parameters.AddWithValue("@hex2", lblColor2.Text);
            cmd.Parameters.AddWithValue("@hex3", lblColor3.Text);
            cmd.Parameters.AddWithValue("@hex4", lblColor4.Text);
            cmd.ExecuteNonQuery();
        }
    } 
```

这样，数据库将插入一个新行，其中包含下一个可用的 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T18:25:33.667

由于其他人已经回答了您的问题，我建议您在项目中使用 MySQL 连接器，而不是使用 OLEDB 对象。[下载并安装 MySQL 连接器](http://www.mysql.com/downloads/connector/net/)，然后在您的项目中添加对 MySQL.Data 扩展的引用，然后将 MySql.Data.MySqlClient using 语句添加到您的类中，然后按如下方式更新您的代码：

```
string conString = WebConfigurationManager.ConnectionStrings["mysql"].ConnectionString;
using(MySqlConnection con = new MySqlConnection(connectionString))
{
     con.Open();
     using(MySqlCommand cmd = new MySqlCommand() 
     {
            cmd.Connection = con; //<-- It looks like you are missing this line in your code
            cmd.CommandText = "INSERT INTO GraphicsRequest (Graphic1Desc, Graphic2Desc, Graphic3Desc, ColorChart, Hex1, Hex2, Hex3, Hex4) VALUES (@g1d, @g2d, @g3d, @colorChart, @hex1, @hex2, @hex3, @hex4)";
            cmd.Parameters.AddWithValue("@g1d", txtGraphic1Desc.Text);
            cmd.Parameters.AddWithValue("@g2d", txtGraphic2Desc.Text);
            cmd.Parameters.AddWithValue("@g3d", txtGraphic3Desc.Text);
            cmd.Parameters.AddWithValue("@colorChart", ddlColorChart.SelectedValue);
            cmd.Parameters.AddWithValue("@hex1", lblColor1.Text);
            cmd.Parameters.AddWithValue("@hex2", lblColor2.Text);
            cmd.Parameters.AddWithValue("@hex3", lblColor3.Text);
            cmd.Parameters.AddWithValue("@hex4", lblColor4.Text);
            cmd.ExecuteNonQuery();
     }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-04T09:01:57.063

可能这会解决问题。

```
strong textcom.ExecuteNonQuery();
long id = com.LastInsertedId; 
```

# java - SauceLabs Java 原型中的奇怪版本号

> ID：15393033
> 
> 赞同：0
> 
> 时间：2013-03-13T18:03:09.327
> 
> 标签：java, maven, selenium, pom.xml, saucelabs

我正在尝试让 Java '入门' 应用程序工作，我在 POM 中注意到了这一点：

```
<dependency>
    <groupId>com.saucelabs</groupId>
    <artifactId>sauce_testng</artifactId>
    <version>[1.0.0,)</version>
    <scope>test</scope>
</dependency> 
```

**<版本>[1.0.0,)</版本>**

这是正确的吗？它可以解释我在[这个问题](https://stackoverflow.com/questions/15366563)中遇到的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T18:05:47.563

根据Maven 的[版本范围规范，语法很好。](http://maven.apache.org/enforcer/enforcer-rules/versionRanges.html)

`[1.0.0,)`表示一个版本`x`，其中`x >= 1.0.0`

> 默认策略：在重叠范围中，最高软要求是要使用的版本。如果在规定范围内没有软要求，则使用最新版本。如果不符合所述范围，则使用规定范围内的最新版本号。如果范围排除所有版本，则会发生错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T23:05:31.363

是的，根据 Nishant 的回答，我们包含了版本范围，以便在发布新版本的 sauce_testng 库时，它们会在运行新版本时自动包含在内。

# c# - C# 初学者，将资源“绑定”到类对象

> ID：15393036
> 
> 赞同：0
> 
> 时间：2013-03-13T18:03:17.827
> 
> 标签：c#, image, list, class, resources

如果我有一个类，`Car`并且我调用了几个实例，例如一个吉普车。我将如何将我已经创建的图像资源绑定到这个实例？

```
public class Car
{
    public string Name;
    public string Color;
    public int Value;
}

Car Jeep = new Car();
Jeep.Name = "Jeep";
Jeep.Color = "Red";
Jeep.Value = 20000;
//Jeep.image = jeep; <--- Something like this is possible? 
```

例如：
`Image jeep = WindowsFormsApplication1.Resource1.image1;`

我希望能够说类似的话， `pictureBox1.Image = List[0].image;`

因为我会将 Jeep、Camaro、Mustang 等列入清单。

有人指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T18:07:27.467

只需像定义名称、颜色和值一样将图像字段添加到 Car 类。然后，您将能够像分配其他变量一样分配它。

# android - 启用后无法禁用 DDMS 调试

> ID：15393038
> 
> 赞同：4
> 
> 时间：2013-03-13T18:03:19.693
> 
> 标签：android, android-4.2-jelly-bean, android-debug

这个问题让我发疯......我正在使用带有最新 SDK 21.1 的 eclipse Juno

我的应用程序定期运行，我可以使用*Run as...*命令轻松地从 eclipse 启动它。但是，从我第一次在调试模式下运行它开始，我就无法以任何方式禁用它。即使我断开 USB 电缆并在终止应用程序后，当我再次启动它时，它仍然要求调试器（*应用程序 xxx 正在等待调试器附加*）。这很烦人，因为我无法使用该应用程序，唯一找到的解决方案是[重启手机](https://stackoverflow.com/questions/4375375/how-to-resolve-waiting-for-debugger-message)。重新启动 ADB 和 Eclipse 都不起作用，禁用/启用设备的调试模式和*强制关闭*应用程序也没用。

我的进程显示在 DDMS“设备”面板下，但**用于启用调试的按钮**（绿色错误）**不是切换**按钮（如*更新堆*按钮）

我不知道这是设备问题（我在 Nexus S 上使用 CM10.1）还是 eclipse/DDMS 问题，但自从我的 Nexus 7 上的 android 4.2 更新后我也注意到了这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T09:02:25.843

当我想断开 DDMS 时，我使用此按钮：

![断开](../Images/9538559d3623460f0cadfb9eff5d7e7d.png)

它位于“step over”和“step into”按钮旁边。

# javascript - 为什么 Node.JS 中的 V8 比我的原生 C++ 插件更快？

> ID：15393039
> 
> 赞同：28
> 
> 时间：2013-03-13T18:03:20.260
> 
> 标签：javascript, c++, performance, node.js, v8

为什么我的 C++ 插件中的 Google V8 JavaScript 引擎的运行速度比在 Node.JS 中慢得多？

我试图编写一些愚蠢的简单代码来在 JavaScript 中生成素数，并通过我的 C++ 插件在 V8 中运行它，并直接在 Node.JS 中运行。

我很震惊，因为两者都应该使用相同的 JavaScript 引擎并且都执行了相同的代码（时间以毫秒为单位，越少越好）：

```
V8 in Node.JS:  495517
V8 in Node.JS C++ Addon:  623598 
```

这是运行相同 JavaScript 代码的 JavaScript 模块和 C++ 插件的源代码（我认为问题不在互操作中，因为时间测量直接在 JS 中工作）：

*index.js*：

```
var jsInNodeJsPrimeGeneratorBenchmark = require("./javascript.js");
var jsInNativePrimeGeneratorBenchmark = require("./native");

console.log("V8 in Node.JS: ", jsInNodeJsPrimeGeneratorBenchmark.primeGeneratorBenchmark());
console.log("V8 in Node.JS C++ Addon: ", jsInNativePrimeGeneratorBenchmark.primeGeneratorBenchmark()); 
```

*javascript.js*：

```
function primeGeneratorBenchmark() {
    var result, primeNumberCounter, i, j, isPrime, start, end;

    i = 3;
    primeNumberCounter = 1;

    start = Date.now();

    while (primeNumberCounter < 100000) {
        isPrime = true;
        for (j = 2; j < i; j++) {
            if (i % j === 0) {
                isPrime = false;
                break;
            }
        }

        if (isPrime) {
            result = i;
            primeNumberCounter++;
        }

        i++;
    }

    end = Date.now();

    return end - start;
}

exports.primeGeneratorBenchmark = primeGeneratorBenchmark; 
```

*本机.cpp*：

```
#include <node.h>

v8::Handle<v8::Value> primeGeneratorBenchmark(const v8::Arguments &arguments);
void registerModule(v8::Handle<v8::Object> target);

v8::Handle<v8::Value> primeGeneratorBenchmark(const v8::Arguments &arguments) {
    v8::HandleScope handleScope;

    v8::Local<v8::Context> context = arguments.Holder()->CreationContext();

    v8::Context::Scope scope(context);

    const char *sourceStringC =
        "var result, primeNumberCounter, i, j, isPrime, start, end, time;\n"
        "i = 3;\n"
        "primeNumberCounter = 1;\n"
        "start = Date.now();\n"
        "while (primeNumberCounter < 100000) {\n"
        "    isPrime = true;\n"
        "    for (j = 2; j < i; j++) {\n"
        "        if (i % j === 0) {\n"
        "            isPrime = false;\n"
        "            break;\n"
        "        }\n"
        "    }\n"
        "    if (isPrime) {\n"
        "        result = i;\n"
        "        primeNumberCounter++;\n"
        "    }\n"
        "    i++;\n"
        "}\n"
        "end = Date.now();\n"
        "time = end - start;\n";

    v8::Local<v8::String> sourceStringV8 = v8::String::New(sourceStringC);

    v8::Local<v8::Script> script = v8::Script::Compile(sourceStringV8);
    script->Run();

    v8::Local<v8::Value> timeResult = v8::Context::GetCurrent()->Global()->Get(v8::String::New("time"));

    return handleScope.Close(timeResult);
}

void registerModule(v8::Handle<v8::Object> target) {
    target->Set(v8::String::NewSymbol("primeGeneratorBenchmark"), v8::FunctionTemplate::New(primeGeneratorBenchmark)->GetFunction());
}

NODE_MODULE(native, registerModule); 
```

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-03-13T22:51:56.623

在 C++ 版本中，脚本源 ( `result`, `primeNumberCounter`, `i`, `j`, `isPrime`, `start`, end, `time`) 中声明的所有变量都是*全局*的，因为脚本的顶级范围是全局范围。

为了优化编译器，很容易将局部变量分配到机器寄存器（或堆栈上的溢出槽）并跟踪它们的类型。另一方面，使用全局变量需要持续的内存访问和类型检查，因为 V8（当前）不执行寄存器提升优化。

如果您将源代码包装到立即调用的函数中，差异应该会消失。

# python - 在 Python 中增量读取大型多部分压缩文本文件

> ID：15393041
> 
> 赞同：8
> 
> 时间：2013-03-13T18:03:25.520
> 
> 标签：python, parsing, stream, zip

我有一个非常大的 zip 文件，它被分成多个部分作为拆分档案，档案中有一个文件。我没有足够的资源将这些档案组合在一起或提取它们（原始文本文件将近 1TB）。

我想逐行解析文本文件，理想情况下使用如下内容：

```
import zipfile
for zipfilename in filenames:
    with zipfile.ZipFile(zipfilename) as z:
        with z.open(...) as f:
            for line in f:
                print line 
```

这可能吗？如果是这样，我该如何阅读文本文件：

1.  不使用太多内存（将整个文件加载到内存中显然是不可能的）
2.  无需提取任何 zip 文件
3.  （理想情况下）不合并 zip 文件

预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T19:53:33.847

我来一刀。

如果您的 zip 文件是所谓的根据 Zip 文件格式的“拆分档案”，那么您将无法使用 Python 的 zipfile 库或`unzip`终端命令读取它们。

另一方面，如果您正在处理使用`split`命令或类似的字节拆分设备拆分的单个 zip 存档，您可能能够在 Python 中即时提取和读取其内容。

您将必须编写一个“类文件”自定义类，该类将接受 seek() 和 read() 方法（可能还有其他方法）并在拆分块上执行它们。

seek() 将需要计算要读取的 zip 文件，打开它（如果它不是仍然打开的当前文件）并使用偏移量的差异对其执行 seek()。

read() 将从当前打开的块中读取，处理文件结束条件，这将导致它打开下一个块并完成对它的读取。

在您编写和测试这个类之后，只需调用 ZipFile 构造函数，将您的类的一个实例作为“虚拟 zip”文件对象来打开即可。

# codeigniter - CodeIgniter 移动站点路由

> ID：15393045
> 
> 赞同：0
> 
> 时间：2013-03-13T18:03:37.013
> 
> 标签：codeigniter, url, mobile, routes

我的网站“site.xyz.com”被 iframe 编入客户的主网站“abc.com”。客户想要在 iframe 中加载我的网站的移动版本，并且他们想决定哪个用户需要查看我们网站的移动版本，因此他们请求了类似 site.xyz.com/mobile 的链接加载移动网站。

我的站点已经在 CodeIgniter 中构建，服务器上不允许使用 .htaccess。移动网站具有相似的 html，但大小和图像会略有不同。所以我打算为移动网站使用相同的 MVC 结构但不同的样式表。我**不会**检查它是否是移动网站。对 site.xyz.com/mobile 的任何访问都应显示移动版本。

我试过`$route['mobile/(:any)'] = '$2';`了，但是在我使用的代码中`base_url()`，它回显的是 site.xyz.com/products 而不是 site.xyz.com/mobile/products。确定查看者是否正在查看网站的桌面/移动版本也很重要。

我不打算依赖会话/cookie 并根据这些变量设置样式表。未来的访问可能是一个问题。

看起来很简单，但没有得到正确的想法......有什么技巧可以让我完成这项工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T19:26:59.117

您可以制作自己的`base_url()`- 函数，通过检查返回的内容来检查用于查看该页面的 url，从而检测用户是否正在查看移动网站[`uri_string()`](http://ellislab.com/codeigniter/user-guide/helpers/url_helper.html)。

内部`application/helpers/url_helper.php`：

```
if ( ! function_exists('base_url'))
{
    /**
     * Base URL
     *
     * Create a local URL based on your basepath.
     * Segments can be passed in as a string or an array, same as site_url
     * or a URL to a file can be passed in, e.g. to an image file.
     *
     * @param   string
     * @return  string
     */
    function base_url($uri = '')
    {
        $currentUri = uri_string(); // Get current URI 
        $currentUri = rtrim($currentUri,'/').'/'; // make sure $uri ends in a '/'
        // If the string begins with 'mobile/', 
        // prepend it to the given array/string
        if(strpos($currentUri,'mobile/') === 0)
        {
            if(is_array($uri)))
                array_unshift($uri,'mobile');
            else
                $uri = 'mobile/'.$uri;
        }

        $CI =& get_instance();
        return $CI->config->base_url($uri);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T18:17:30.013

一种可能（不完全漂亮）的方法是在您的控制器文件夹中有一个名为“mobile”的子文件夹。然后，您基本上可以将所有控制器复制到该目录中，并更改路径/逻辑以适合您的移动站点。

根据[CodeIgniter 的文档](http://ellislab.com/codeigniter/user-guide/general/controllers.html#subfolders)，如果控制器位于子文件夹中，则路由将呈现为 *base_url/subfolder/controller/method*。如果您使用模板，您可以加载与普通站点相同的视图，只需在 mobile 文件夹内的控制器中加载 mobile_template.php 即可。

看起来工作量比您希望的要多，但您可能需要对您的移动网站做更多的工作，而不仅仅是更改 CSS 文件。

# ruby-on-rails - Rails delay_jobs 在发送邮件时询问“发件人/发件人”

> ID：15393048
> 
> 赞同：0
> 
> 时间：2013-03-13T18:03:39.390
> 
> 标签：ruby-on-rails, email, asynchronous, delayed-job

我正在尝试设置异步电子邮件发送。我正在使用延迟作业。没有 delay_job 一切正常，没有任何错误。但是当我添加：

```
handle_asynchronously :mail_sending_method 
```

我收到以下错误：

```
A sender (Return-Path, Sender or From) required to send a message 
```

我使用 ActionMailer 发送邮件，具体如下：

```
mail(:to => user.email, :from => "notifications@example.com", :subject => "Blah") 
```

这是方法：

```
def phrase_email(user, tweet, keyword, phrase)
    @user = user
    @tweet = tweet
    @keyword = keyword
    @phrase = phrase
    mail(:to => user.email, :from => "notifications@example.com", :subject => "Weekapp     Phrase Notification")
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T18:45:00.320

延迟作业与 Rails 3 的工作方式不同`Mailers`。

```
class YourMailer < ActionMailer::Base
  def phrase_email(user, tweet, keyword, phrase)
    @user = user
    @tweet = tweet
    @keyword = keyword
    @phrase = phrase
    mail(:to => user.email, :from => "notifications@example.com", :subject => "Weekapp    Phrase Notification")
  end
end 
```

因此，在调用您的邮件方法时使用`delay`或`deliver`如下所示。

```
 YourMailer.delay.phrase_email(user, tweet, keyword, phrase) #With delay

 YourMailer.phrase_email(user, tweet, keyword, phrase).deliver  #Without delay 
```

并`handle_asynchronously`从 YourMailer 中删除。

[此处](https://github.com/collectiveidea/delayed_job)的文档中明确提到了这一点。您不能`handle_asynchronously`与邮件一起使用。

# mysql - MYSQL INSERT 从 INNER JOIN 获取数据

> ID：15393049
> 
> 赞同：0
> 
> 时间：2013-03-13T18:03:46.090
> 
> 标签：mysql

我有两张表（一张小，一张大）使用相同的唯一键，但列不同。

我需要将大表中的两列带入小表，但仅用于小表中存在的键。

当我查询它时，我使用 INNER JOIN

```
SELECT * FROM my_bigtable AS big
  INNER JOIN my_smalltable AS small ON big.key = small.key; 
```

效果很好。但现在我在小表中添加了两列 (fname,lname)。大表有这些列，我想提取这些列中的条目以获取反射键并将它们放在小表的列中。

```
INSERT INTO my_smalltable AS small
  SELECT FNAME,LNAME FROM my_bigtable AS big
    WHERE big.FNAME = small.FNAME
      AND big.LNAME = small.LNAME; 
```

这是否只会将小表中存在的唯一键的记录带到小表中，还是会将大表中的所有内容都带到小表中，而不管小表中是否存在唯一键？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T18:09:23.307

尝试：

```
UPDATE small
SET small.FNAME = big.FNAME,
small.LNAME = big.LNAME
FROM my_smalltable AS small
JOIN my_bigtable AS big
ON big.ID = small.ID 
```

（内部）连接只会选择小表中存在的记录。

但是 my_smalltable 和 my_bigtable 确实不应该使用相同的 ID 字段。他们每个人都应该有自己的主键。您可以在两者之间使用外键。例如：

```
FROM my_smalltable AS small
JOIN my_bigtable AS big
ON big.bigID = small.bigID 
```

其中 bigID 是 my_bigtable 的主键，但 my_smalltable 中的外键（它有自己的主键以及 my_smalltable.smallID。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T18:08:24.353

你需要`UPDATE`声明 not `INSERT`，试试这个：

```
update my_smalltable small
INNER JOIN my_bigtable AS big ON small.key = big.key
SET small.FNAME = big.FNAME,
small.LNAME = big.LNAME 
```

# javascript - 设置间隔和焦点 Jquery

> ID：15393058
> 
> 赞同：0
> 
> 时间：2013-03-13T18:04:00.910
> 
> 标签：javascript, jquery, settimeout, setinterval

我正在尝试检测浏览器窗口是否处于焦点状态，如果不是，则终止 ajax 调用。基本上，如果用户闲置了一段时间，那么 ajax kills 就会死掉，但是一旦浏览器成为焦点，它就会重新开始。我认为 Facebook 做到了。

这是我所拥有的：

```
$(document).ready(function(){

        // window.onunload = function(){alert('closing')};

        // mainmode();

        $('#alertbox').click(function(){
                $('#alertbox').slideUp("slow");
        });

        setInterval(function(){

            // Check focal point
            var window_focus = true;

            $(function() {
               $(window).focus(function() {
                    window_focus = true;
                    console.log('Focus');
                });

                $(window).blur(function() {
                    window_focus = false;
                    console.log('Blur');
                });
            });

            if(window_focus == true){
                console.log('in focus');
                waitForMsg();
            }else{
                console.log('out of focus');
            }

        }, 5000);

    }); 
```

waitformsg 是我的 ajax 调用。我只是设置了 5 秒的时间间隔，我的测试浏览器似乎快疯了。这可能也不是最好的方法。

它似乎也没有杀死我的 ajax 调用，而是将其相乘。我应该使用 xhr.abort() 吗？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T18:07:42.673

修改后的代码；

```
$(document).ready(function(){

    // window.onunload = function(){alert('closing')};

    // mainmode();

    $('#alertbox').click(function(){
            $('#alertbox').slideUp("slow");
    });
    // Check focal point
    var window_focus = true;

           $(window).focus(function() {
                window_focus = true;
                console.log('Focus');
            });

            $(window).blur(function() {
                window_focus = false;
                console.log('Blur');
            });

    setInterval(function(){
        if(window_focus == true){
            console.log('in focus');
            waitForMsg();
        }else{
            console.log('out of focus');
        }

    }, 5000);
}); 
```

# linux-kernel - 如何通过 vmlinux.lds 更改内核入口地址

> ID：15393065
> 
> 赞同：0
> 
> 时间：2013-03-13T18:04:13.910
> 
> 标签：linux-kernel, bootloader

默认情况下，内核从 0x100000 启动，因为它在 Kconfig 文件中定义，但已经在某处读取，我们也可以通过 vmlinux.lds 文件更改内核条目地址，但不确定如何？

vmlinux.lds 的前几行

```
OUTPUT_FORMAT("elf32-i386", "elf32-i386", "elf32-i386")
OUTPUT_ARCH(i386)
/* "ENTRY" is overridden by command line option "-e stext" in linux/Makefile */
 ENTRY(_start) 
```

但现在我如何将此 _start 映射到我喜欢的某个地址。

# jquery-mobile - 如何将输入字段扩展到对话框宽度的 100%？

> ID：15393067
> 
> 赞同：1
> 
> 时间：2013-03-13T18:04:22.103
> 
> 标签：jquery-mobile

我正在使用 jQuery mobile 1.3 并且在弹出对话框的样式方面遇到了一些问题。对话框如下所示：

![在此处输入图像描述](../Images/0a5820b52dbd86f3b038e15e4516e7d7.png)

html代码如下所示：

```
<div data-role="popup" id="AddingDialog" data-overlay-theme="a" data-theme="c" style="max-width:500px;" class="ui-corner-all">
    <div data-role="header" data-theme="a" class="ui-corner-top">
        <h1>Modify Item</h1>
    </div>
    <div data-role="content" data-theme="d" class="ui-corner-bottom ui-content">
        <h3 class="ui-title">Adding new item</h3>
            <div data-role="fieldcontain"  >
            <input type="text" name="name" id="addItemInput" placeholder="label of new item" maxlength="100" value=""  />
        </div>
        <a href="#" data-role="button" data-inline="true" data-rel="back" data-theme="c">Cancel</a>
        <a href="#" data-role="button" data-inline="true" data-rel="back"
            data-theme="b" data-transition="flow" id="doAddItem">Yes</a>
    </div>
</div> 
```

我希望对话框更宽，输入字段扩展到对话框的整个宽度，并且按钮正确对齐。

使用 Firefox 开发者工具（Examiner）探索我发现某处定义了 78% 的宽度。但我不知道如何消除这个限制。当单击输入字段时出现这个蓝色阴影并且在取消选择时仍然存在，我也不是很兴奋。

我不是使用 jQuery mobile 进行 CSS 编程的专家。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T23:26:25.723

**更新**

为了移除文本框阴影，您需要覆盖 JQM CSS `ui-focus`。

在 JQM 样式表之后添加以下样式以覆盖它。

```
.ui-input-text.ui-focus {
 -moz-box-shadow: none !important;
 -webkit-box-shadow: none !important;
 box-shadow: none !important;
} 
```

这是**[弹出窗口](http://jsfiddle.net/Palestinian/Qq9Wj/2/)**的最终外观。

Jquery mobile 有一个内置的网格系统，便于定位和对齐页面的内容。这是 JQM 文档的链接：http: [//jquerymobile.com/demos/1.2.0/docs/content/content-grids.html](http://jquerymobile.com/demos/1.2.0/docs/content/content-grids.html)

# django - Django - 使用唯一的 url 公开发布视图

> ID：15393072
> 
> 赞同：0
> 
> 时间：2013-03-13T18:04:44.583
> 
> 标签：django, django-views

我有一个应用程序，用户可以在其中登录、管理一些选项并创建模型的实例以根据他们的需要生成视图。这仅在私人会话中完成。

我想向我的应用程序添加一个发布功能，用户可以在其中公开访问他们管理的视图。

我的第一个想法是使用每个已发布视图的唯一 url 输出用户视图的静态 html 文件。这些静态文件将存储在应用服务器上。我不知道这个想法是否可行，如果可行，我知道管理每个静态文件上的大量更新、删除可能很困难。

对于这样的发布，是使用静态文件还是每次调用时渲染视图更好？对于任何可能的选择，我可以阅读哪些资源来帮助我实现这个目的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T18:11:36.563

Django 可以为您处理视图和模板的缓存。似乎没有很好的理由为此渲染静态文件。

您可以使用自定义视图来检查模型是否公开可用：

```
def view_public_object(request, object_id):
    object = get_object_or_404(Object, id=object_id)
    if object.is_published():
        return render_to_response('template.html', {'object': object})
    return Http404 
```

如果您列出了所有可以访问的对象，您可以更新对象的管理器以仅列出具有此查询集的公开可用实例：

```
Object.objects.filter(is_published=True) 
```

# postgresql - postgresql 如何在内部将行类型变量传递给过程？

> ID：15393073
> 
> 赞同：0
> 
> 时间：2013-03-13T18:04:44.907
> 
> 标签：postgresql, internals

我有表“Table1”和接受“Table1”类型参数的 SQL 过程“testProc”。当这个过程被这样调用时：

```
select testProc(t.*) from Table1 t; 
```

PostgreSQL 在内部使用指针来传递该参数吗？还是每行都复制到内存中？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T04:07:47.660

这里有两种不同的情况，一种必须涉及副本，第二种必须涉及指针。

在您提到的情况下，已制作副本。你可以这样测试：

```
create function test_test(inout test test) returns test as 
$$
begin
   $1.test := $1.test + 1;
   return;
end;
$$ language plpgsql;

select (test_test(t)).test, (test_test(t)).test from test t; 
```

其中 test.test 是一个整数。数字将是相同的。

第二个是在触发器中，修改 NEW 将传递给下一个触发器。这些必须通过引用传递。

# google-app-engine - 如何找到具有空 StringListProperty 的实体？

> ID：15393074
> 
> 赞同：0
> 
> 时间：2013-03-13T18:04:45.013
> 
> 标签：google-app-engine, google-cloud-datastore, gql

鉴于此模型：

```
class TestModel(db.Model):
  names = db.StringListProperty(required=False) 
```

我想找到具有空名称属性的实体，所以我尝试了这个：

```
TestModel.all().filter('names ==', []) 
```

但它引发了异常：**BadValueError: Filtering on lists is not supported**

从[这个非常相似的问题](https://stackoverflow.com/questions/5839125/how-to-find-entries-which-has-not-empty-stringlistproperty)中，我也尝试过：

```
TestModel.all().filter('names <', None)
TestModel.all().filter('names ==', None) 
```

但这些也不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T18:26:39.150

过滤列表过滤列表中的每个项目。因此，如果您 filter('names ==', 'x')，它将在名称列表中找到任何包含 'x' 的实体。

不幸的是，您无法通过这种方式找到空列表。最好的办法是添加另一个属性来测试模型，可以是列表大小的整数，也可以是布尔值 isEmpty，然后对其进行查询。

# php - 使用 $_GET 的价值损失

> ID：15393078
> 
> 赞同：1
> 
> 时间：2013-03-13T18:04:57.803
> 
> 标签：php, get, urlencode

我使用一个表格，收集在其字段中输入的数据。使用`onsubmit`我将数据发送到另一个页面以显示相同的内容。

即`page1.php`有两个输入字段：

```
 pageNo = 1 //id and name of the input text field are the same, `pageID`

 //id and name of the input text field are the same, `someRandomValue`
 someRandomValue = "A long character string consisting of every possible character that can be typed from the keyboard" 
```

`page2.php` **我在[页面名称仅用于显示目的**]中收到上述内容，使用`$_GET`：

```
//on `echo` displays the desired result
$pageID = $_GET['pageNo']; 

// on `echo` does not print anything
$randomValue = $_GET['someRandomValue']; 
```

但是，当通过地址栏直接键入时，第二个打印值和其他小子字符串`1`一样简单。`ab`

我尝试过`$_GET`直接使用变量以及`$randomValue`使用所有方法-`echo`和.`print_r``var_dump`

在某些情况下。打印到第一个 '#' 的子字符串，对于较小的字符串也是如此。是不是因为一些特殊字符，我无法获得想要的结果？

PS：这`onsubmit`就是我想说的标准表单、提交按钮和通常使用的onsubmit事件。

示例网址：`?pageNo=a&someRandomValue=aslkfdjslfhdskljOU#OsssssssIU#IO$U#IO$`

当我单独打印第二个时，我得到：`aslkfdjslfhdskljOU`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T18:24:30.857

### 原因

在您的示例 URL 中，您有散列，这些需要使用 php 的`urlencode`函数进行 url 编码。原因是该`#`符号用于表示所谓的`fragment`URL 部分。哈希之后的任何内容都在浏览器端使用，并且永远不会发送到服务器。

有关片段是什么的更多信息，请参见此处：

[http://en.wikipedia.org/wiki/Fragment_identifier](http://en.wikipedia.org/wiki/Fragment_identifier)

有关 urlencode 的更多信息：

[http://uk.php.net/urlencode](http://uk.php.net/urlencode)

### 解决方案

您的示例查询字符串：

```
?pageNo=a&someRandomValue=aslkfdjslfhdskljOU#OsssssssIU#IO$U#IO$ 
```

一旦 URL 编码 URL 应该出现：

```
?pageNo=a&someRandomValue=aslkfdjslfhdskljOU%23OsssssssIU%23IO%24U%23IO%24 
```

注意：您应该分别对名称-值对的每个部分进行 URL 编码，因此：

```
$qry = '?' . urlencode('pageNo') . '=' . urlencode('a') . 
  '&' . urlencode('someRandomValue') . 
  '=' . urlencode('aslkfdjslfhdskljOU#OsssssssIU#IO$U#IO$'); 
```

显然，您知道 URL 的大部分部分都是硬编码的（并且不包含任何非法字符），您只需执行以下操作即可逃脱：

```
$qry = '?pageNo=' . urlencode('a') . 
  '&someRandomValue=' . urlencode('aslkfdjslfhdskljOU#OsssssssIU#IO$U#IO$'); 
```

或者更可能在 php 中更有用：

```
$qry = '?pageNo=' . urlencode($pageNo) . 
  '&someRandomValue=' . urlencode($someRandomValue); 
```

### 其他方式

如果您有 PHP 5 或更高版本，则可以使用以下函数，它需要一个普通的 PHP 数组并将其转换为正确编码的查询字符串：

[http://uk.php.net/manual/en/function.http-build-query.php](http://uk.php.net/manual/en/function.http-build-query.php)

```
$data = array(
  'pageNo' => $pageNo,
  'someRandomValue' => $someRandomValue,
);

$qry = http_build_query( $data ); 
```

然而，没有什么比知道自己发生了什么更好的了。因此，在使用上述内容之前，最好先阅读一下 URL 的形成方式，并可能编写自己的版本`http_build_query`作为学习测试。

[http://webdesign.about.com/od/forms/a/url_encoding.htm](http://webdesign.about.com/od/forms/a/url_encoding.htm)

# c# - Cookie 域无效 C#

> ID：15393083
> 
> 赞同：0
> 
> 时间：2013-03-13T18:05:06.187
> 
> 标签：c#, .net, cookies

我提出了第三方 Web 服务的请求，并基于 VB.net 程序 (.net 3.5) 编写了我的 C# 代码 (.net 4.0)。我几乎完全复制了命令，但是无论我将什么作为域添加到我的 cookie 中，它都不起作用，并且在我将 cookie 添加到容器时总是给我错误。

cookie的 'Domain'=' [https://secure.uat.globallink.com/gtss/service/FileWebService](https://secure.uat.globallink.com/gtss/service/FileWebService) ' 部分无效。

VB.net 程序在此代码和生产环境中都能正常工作。我不知道为什么会这样。.add 方法在 3.5 和 4.0 之间是相同的，我已经尝试了这个在互联网上漂浮的 BugFix_CookieDomain 代码，没有任何帮助（我只有这个 cookie）。我还尝试添加一个 URI 字段，但没有成功，并将域更改为“ [https://secure.uat.globallink.com](https://secure.uat.globallink.com) ”，但没有任何效果。请帮忙，我觉得我在这里有点疯狂。谢谢！

C＃

```
 GTSSWebService.FxWebService wsDL = new GTSSWebService.FxWebService();

                wsDL.Credentials = new NetworkCredential(connectionCreds, Settings.mySettings.GTSSPassword);
                wsDL.CookieContainer = new CookieContainer();

                wsDL.Url = "https://secure.uat.globallink.com/gtss/service/FxWebService";
                Cookie gtssConnCookie = new Cookie("SMCHALLENGE", "YES");
                gtssConnCookie.Domain = "https://secure.uat.globallink.com/gtss/service/FileWebService";
                wsDL.CookieContainer.Add(gtssConnCookie); 
```

VB

```
Dim wsDL As New GTSSWebService.FxWebService

            wsDL.Credentials = New System.Net.NetworkCredential(sCreds, Settings.DefaultSettings.PW)
            wsDL.CookieContainer = New System.Net.CookieContainer

            If Settings.DefaultSettings.ConnectLTS Then
                wsDL.Url = "http://" & Settings.DefaultSettings.LTSIP & "/gtss/service/FxWebService"
            Else
                wsDL.Url = Settings.DefaultSettings.GTSSURL.Replace("/FileWebService", "/FxWebService")
                Dim GTSSConnectionCookie As New Cookie("SMCHALLENGE", "YES")
                GTSSConnectionCookie.Domain = Settings.DefaultSettings.GTSSURL
                wsDL.CookieContainer.Add(GTSSConnectionCookie) 
```

**注意 - Settings.DefaultSettings.GTSSURL == " [https://secure.uat.globallink.com/gtss/service/FileWebService](https://secure.uat.globallink.com/gtss/service/FileWebService) "**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T18:53:11.530

C# 想要在没有 https:// Dang 的域中使用“secure.uat.globallink.com”

# objective-c - 未调用核心绘图委托函数

> ID：15393087
> 
> 赞同：0
> 
> 时间：2013-03-13T18:05:13.343
> 
> 标签：objective-c, core-plot

我一直在尝试将这些数据放到我的图表上，我可以看到轴，但是我无法使用 CorePlot 的这些委托函数将数据显示到图表上。首先，由于某种原因，它们没有被调用......我已将 CPTPlotDataSource 包含在我的 .h 文件中，并将其包含在我的 .m 文件中

```
- ( void ) reloadData {

    if ( !graph ) {

        graph = [[CPTXYGraph alloc] initWithFrame: CGRectMake(0,0,320,220)];

        CPTScatterPlot *dataSourceLinePlot = [[CPTScatterPlot alloc] initWithFrame: graph.bounds];

        CPTMutableLineStyle *lineStyle = [dataSourceLinePlot.dataLineStyle mutableCopy];
        lineStyle.lineWidth              = 1.f;
        lineStyle.lineColor              = [CPTColor redColor];
        dataSourceLinePlot.dataLineStyle = lineStyle;

        dataSourceLinePlot.dataSource = self;
        [graph addPlot: dataSourceLinePlot];

    }

    graphHost.hostedGraph = graph;

    CPTXYPlotSpace *plotSpace = (CPTXYPlotSpace *)graph.defaultPlotSpace;
    plotSpace.xRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromDouble(0.0) length:CPTDecimalFromDouble(5)];
    plotSpace.yRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromDouble(0.0) length:CPTDecimalFromDouble(1010)];

    [graph reloadData];

} 
```

这些是没有被调用的函数....我对它们进行了 NSLogged 并且没有打印任何内容

```
 -(NSUInteger)numberOfRecordsForPlot:(CPTPlot *)plot
    -(NSNumber *)numberForPlot:(CPTPlot *)plot field:(NSUInteger)fieldEnum recordIndex:(NSUInteger)index 
```

我错过了什么？？

# c++ - 获取模板参数的 typedef，或者失败，获取类型本身

> ID：15393093
> 
> 赞同：3
> 
> 时间：2013-03-13T18:05:26.440
> 
> 标签：c++, templates, c++11, sfinae

我试图从`ValueType`我定义的类（typedef）中获取 typedef 指向的类型。但是，当这失败时，我希望它返回给定的类型（例如，如果我给它 a `double`，我希望它返回 a `double`）。这是我到目前为止所拥有的：

```
struct myClass { typedef double ValueType; };

template < typename V, typename U = typename V::ValueType>
struct base_type { typedef U type; };
template < typename V >
struct base_type< V, V > { typedef V type; };

static_assert( std::is_same < typename base_type< myClass >::type , double >::value, 
    "base_type doesn't work" ); //This works.
static_assert( std::is_same < typename base_type< double >::type , double >::value,
    "base_type doesn't work" ); //This returns "error: 'double' is not a class, struct, or union type" 
```

但是，这不起作用，第二个 static_assert 失败。显然，第二个定义从未被调用，但我不确定为什么（它肯定会比第一个匹配得更好）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T18:27:17.020

您必须使用有效的 SFINAE 功能。

以下是新的 C++11 功能的样子：

```
template <typename T> auto get_base_type(int) -> typename T::ValueType;
template <typename T> auto get_base_type(...) -> T;

template <typename T>
struct base_type { using type = decltype(get_base_type<T>(0)); }; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-13T18:30:39.947

或者

```
template < typename V, typename = void>
struct base_type { typedef V type; };
template < typename V >
struct base_type< V, 
                 typename base_type<void, typename V::ValueType>::type > { 
    typedef typename V::ValueType type; 
}; 
```

我们都多么喜欢这些粗俗和丑陋的 SFINAE 黑客 :)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-13T18:24:23.143

来自[维基百科](http://en.wikipedia.org/wiki/Substitution_failure_is_not_an_error) 以下内容对我有用，我认为它可以满足您的需求。

```
#include <type_traits>

template <typename T>
struct has_typedef_ValueType {
// Types "yes" and "no" are guaranteed to have different sizes,
// specifically sizeof(yes) == 1 and sizeof(no) == 2.
typedef char yes[1];
typedef char no[2];

template <typename C>
static yes& test(typename C::ValueType*);

template <typename>
static no& test(...);

// If the "sizeof" the result of calling test<T>(0) would be equal to the sizeof(yes),
// the first overload worked and T has a nested type named foobar.
static const bool value = sizeof(test<T>(0)) == sizeof(yes);
};

struct myClass { typedef double ValueType; };

template < class V, bool b = has_typedef_ValueType<V>::value >
struct base_type { typedef typename V::ValueType type; };
template < typename V>
struct base_type <V, false> { typedef V type; };

static_assert( std::is_same < typename base_type< myClass >::type , double >::value,     "base_type doesn't work" ); //This works.
static_assert( std::is_same < typename base_type< double >::type , double >::value, "base_type doesn't work" ); //This returns "error: 'double' is not a class, struct, or     union type"

int main() {} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-13T18:28:40.140

```
#include <type_traits>
#include <utility>

template < typename V, typename=void>
struct base_type { typedef V type; };
template < typename V >
struct base_type<
  V,
  typename std::enable_if<
    std::is_same<
      typename V::ValueType,
      typename V::ValueType
    >::value
  >::type
>
{
  typedef typename V::ValueType type;
}; 
```

这是一种非常通用的技术。基本情况有一个额外的未命名模板参数，默认为`void`.

特`typename std::enable_if< expression >::type`化代替了`void`，并且它是一个有效的特化 IFF，即表达式既有效又为真。

在这种情况下，我做了一个简单的`std::is_same< V::value_type, V::value_type >::value`. 在我自己的代码中，众所周知我会写`valid_type< typename V::value_type >::value`，这很简单：

```
template<typename>
struct valid_type:std::true_type {}; 
```

一个永远真实的特质类。

现在，这个`void`技巧有一些问题。但我觉得它很一般。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-13T18:29:52.067

`double`不会实例化您的专业化，因为该专业化仅在`base_type`传递两种类型并且两者相同时才会被调用。第二种类型是可选的，但是当它没有提供时，它会用默认值填充，`typename V::ValueType`这对于`double::ValueType`.

为了完整起见，您的`base_type<V, V>`专业化将被实例化为以下类型：

```
struct foo { typedef foo ValueType; };

static_assert(std::is_same<base_type<foo>::type, foo>::value, "Failed"); 
```

# powershell - 进入 IF 但退出 ELSE

> ID：15393095
> 
> 赞同：1
> 
> 时间：2013-03-13T18:05:42.413
> 
> 标签：powershell, powershell-2.0, powershell-3.0

今天刚开始写一个脚本，但是在我进入它的主要核心之前，当我运行下面并为多个选择“M”时 - IF 语句转到“M”但是，当它然后弹出一个窗口时要求一条路径，我故意关闭它出错的窗口并直接进入 else 语句......

如何让脚本结束，以便如果我选择`$answer -eq "M"`then 当我退出脚本时，它会在那里关闭，然后在该 IF 语句中关闭，而不是继续执行 ELSE 语句。

我希望以上是有道理的 - 想不出更好的方法来解释它..

另外...我对以下声明不满意：

```
while("S","M" -notcontains $answer) 
```

问题是，如果一个人输入其他内容，它只会继续弹出问题。如果有人输入了错误的值，然后询问用户“请输入“S”或“M”，我该如何出错。

代码：

```
Write-Host ""
Write-Host "Backup Troubleshooting Script" -ForegroundColor Cyan
Write-Host ""

$answer = Read-Host "Do you want to check for multiple (M) servers or a single (S) server? Please enter "S" or "M""

while("S","M" -notcontains $answer)
{
    $answer = Read-Host "Do you want to check for multiple (M) servers or a single (S) server? Please enter "S" or "M""
}

If ($answer -eq "M")
{
    $serverlist = Read-Host "Please enter path to server list: "
    $computer = Get-Content -path $serverlist

        foreach ($computer1 in $computer)
        {
            Write-Host $computer1
            (Get-WmiObject -computerName $computer1 Win32_Service -Filter "Name='Alerter'").StopService()
            sleep 3
            (Get-WmiObject -computerName $computer1 Win32_Service -Filter "Name='Alerter'").StartService() 
            Write-Host `
        }

else
{
    Write-Host "You have chosen "S""
}
} 
```

错误：

```
> Backup Troubleshooting Script
> 
> Read-Host : An error of type
> "System.Management.Automation.Host.PromptingException" has occurred.
> At
> C:\Users\gaachm5\AppData\Local\Temp\769b7304-5529-4f5c-aba7-2cd3dcc2cec9.ps1:15
> char:16
> +     $serverlist = Read-Host "Please enter path to server list: "
> +                   ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
>     + CategoryInfo          : ResourceUnavailable: (:) [Read-Host], PromptingException
>     + FullyQualifiedErrorId : System.Management.Automation.Host.PromptingException,Microsoft.PowerShell.Commands.ReadHostC
> ommand   Get-Content : Cannot bind argument to parameter 'Path'
> because it is null. At
> C:\Users\gaachm5\AppData\Local\Temp\769b7304-5529-4f5c-aba7-2cd3dcc2cec9.ps1:16
> char:32
> +     $computer = Get-Content -path $serverlist
> +                                   ~~~~~~~~~~~
>     + CategoryInfo          : InvalidData: (:) [Get-Content], ParameterBindingValidationException
>     + FullyQualifiedErrorId : ParameterArgumentValidationErrorNullNotAllowed,Microsoft.PowerShell.Commands.GetContentComma
> nd   else : The term 'else' is not recognized as the name of a cmdlet,
> function, script file, or operable program. Check the  spelling of the
> name, or if a path was included, verify that the path is correct and
> try again. At
> C:\Users\gaachm5\AppData\Local\Temp\769b7304-5529-4f5c-aba7-2cd3dcc2cec9.ps1:27
> char:1
> + else
> + ~~~~
>     + CategoryInfo          : ObjectNotFound: (else:String) [], CommandNotFoundException
>     + FullyQualifiedErrorId : CommandNotFoundException
>  
> 
>     Write-Host "You have chosen "S"" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T18:07:16.170

你的花括号放错了位置。代码应为：

```
 (Get-WmiObject -computerName $computer1 Win32_Service -Filter "Name='Alerter'").StartService() 
            Write-Host `
        }
}
else
{
    Write-Host "You have chosen "S""
} 
```

# jquery - Handlebars 在我的 div 之间添加了一个空格？

> ID：15393099
> 
> 赞同：0
> 
> 时间：2013-03-13T18:05:49.993
> 
> 标签：jquery, css

[jsFiddle](http://jsfiddle.net/mwl707/mVwYM/2/ "示例 jsFiddle")

我选择了一些使用把手创建的 div，（上面的链接），在我的 div 样式中，没有边距或填充，但是当它们使用把手渲染时，我在 div 之间有一个间隙，我不希望它们在那里，请问有什么建议吗？

```
 <div id='vehicles' class='wrapper'>
         <div class='divd'>&nbsp</div>
            {{#each this}}
               <div id='{{group}}' title='Driver Details' class='divd {{group}}' >
               {{trailer}} 
               </div>
            {{/each}}
         </div>
     </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T18:08:26.543

Using`inline-block`使用 s 周围的空格`div`（这与 Handlebars 无关）。

* * *

只需将父元素的s`font-size`设置为0，然后直接设置s`font-size`的`div`s即可：

```
.wrapper {
    font-size: 0;
}

.divd { 
    display: inline-block;
    width: 50px;
    height: 50px;   
    font-size: 14px;
} 
```

这是你的小提琴：http: [//jsfiddle.net/fz2Hv/](http://jsfiddle.net/fz2Hv/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T18:08:42.437

其原因在于`display:inline-block`。您需要消除从 div 到 div 的 HTML 之间的空格：

```
</div><div id="NewDiv"> 
```

代替

```
</div>
<div id="NewDiv"> 
```

粗鲁的例子，但你明白我的意思。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T18:10:32.597

你的风格要求每一个`.divd`都是`display: inline-block`。这使得它们以与常规内联元素（例如，纯文本）相同的方式处理标签周围的空白。就像在纯文本中标记中的空格导致页面上的空格一样，您可以在这里得到。解决此问题的一种可能方法是在父容器上设置`font-size: 0`，这将使父容器上的空间为零。不过，您必须`font-size`在孩子中添加回 a 。

[http://jsfiddle.net/F6JE7/](http://jsfiddle.net/F6JE7/)

# authentication - 验证应用程序代码库

> ID：15393101
> 
> 赞同：0
> 
> 时间：2013-03-13T18:05:54.193
> 
> 标签：authentication, codebase

所以我一直在研究用java编写的客户端/服务器应用程序。目前我正在寻找一种方法来验证客户端应用程序的代码是否没有更改然后重新编译。我已经在 Google 上搜索了一段时间，但没有取得很大的成功。有根据的猜测是在运行时生成客户端代码的哈希值，将其发送到服务器并将其与数据库数据库条目或变量进行比较。但是我不确定这是否是正确的方法，甚至不确定如何在执行期间以安全的方式生成代码库的哈希？任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T18:18:44.040

什么可以阻止恶意用户每次都让客户端向服务器发送正确的校验和？没有。

目前没有办法完全确保客户端计算机上运行的软件没有运行更改的软件。如果不主张对其硬件和软件的控制权，就不可能信任他们的软件。不幸的是，在这种情况下，您应该专注于软件功能和质量，这对所有用户都有好处，而不是阻止少数用户入侵您的软件。

# c++ - 遍历地图 C++

> ID：15393102
> 
> 赞同：0
> 
> 时间：2013-03-13T18:05:58.573
> 
> 标签：c++, map, element

所以，我有一个`std::map<int, my_vector>`并且我想遍历每个 int 并分析向量。我还没有分析矢量的部分，我仍在试图弄清楚如何遍历地图上的每个元素。我知道可以有一个迭代器，但我不太明白它是如何工作的，而且我不知道是否有更好的方法来做我打算做的事情

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T18:08:38.933

您可以简单地遍历地图。每个地图元素都是一个`std::pair<key, mapped_type>`，所以`first`给你关键，`second`元素。

```
std::map<int, my_vector> m = ....;
for (std::map<int, my_vector>::const_iterator it = m.begin(); it != m.end(); ++it)
{
  //it-->first gives you the key (int)
  //it->second gives you the mapped element (vector)
}

// C++11 range based for loop
for (const auto& elem : m)
{
  //elem.first gives you the key (int)
  //elem.second gives you the mapped element (vector)
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T18:08:22.580

迭代器是完美的选择。环顾[http://www.cplusplus.com/reference/map/map/begin/](http://www.cplusplus.com/reference/map/map/begin/)

# git - 跟踪通过`git subtree`合并的外部git repos

> ID：15393104
> 
> 赞同：4
> 
> 时间：2013-03-13T18:06:05.120
> 
> 标签：git, git-subtree

我正在尝试建立一个良好的模式来管理跨多个项目的共享代码和外部依赖项。由于其他地方有详细记录的原因，使用子模块有很多陷阱，我倾向于远离它。从 git 1.8 开始，子树命令是内置的，似乎涵盖了我关心的很多内容，但仍然有一些核心场景似乎缺失。我希望有人在填补空白的官方子树功能之上编写了一些脚本。

我想要的似乎缺少的是：

*   跟踪通过子树添加的内容以及指定的分支
*   做事的能力`git subtree pull-all`和`push-all`
*   作为最后的一部分，能够指定子树是否应锁定到特定提交或分支中的最新提交。

这些东西是否内置在命令中，而我只是在使用它们时遗漏了一些东西？我还要求这需要在 Windows 上运行，以防影响任何事情。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T22:44:41.793

不，这样的命令不存在。像这样的命令也很难实现，因为 git-subtree 不会将子树的来源存储为元数据。如果你想要这样的功能，我强烈推荐子模块。不过，他们还需要您编写一些脚本来实现您想要的。

# c# - 打开和关闭串口的问题

> ID：15393105
> 
> 赞同：1
> 
> 时间：2013-03-13T18:06:10.377
> 
> 标签：c#, wpf, serial-port

我目前正在开发需要读取串行端口的 C# 应用程序。在 UI 中，有一个 ON/OFF 按钮，用户可以点击它来开始和停止从串口读取数据。如果我连续单击按钮打开和关闭。它引发了异常 - 访问 COM3 被拒绝，甚至说“设备未连接”。谁能建议一种更好的方法来实现能够解决上述情况的串口功能？这是我使用的代码：

```
**// Start reading data from serial port**
public override void StartReading(string portname)
{
    try
    {
        int k = int.Parse(portname.Replace("COM", ""));
        if (startThread != null)
        {
            startThread.Abort();
            startThread = null;
        }

        startThread = new Thread(new ThreadStart(delegate
        {
            isActive = true;
            try
            {
                using (SerialPort sp = new SerialPort(portname))
                {
                    if (!isActive)
                    {
                        DisposeBT(sp);
                        return;
                    }
                    sp.DataReceived += new SerialDataReceivedEventHandler(sp_DataReceived);
                    if (!isActive)
                    {
                        DisposeBT(sp);
                        return;
                    }

                    if (!isActive)
                    {
                        DisposeBT(sp);
                        return;
                    }
                    else
                    {
                        Thread.Sleep(6500);
                        try
                        {
                            if (sp != null && !sp.IsOpen)
                            {
                                sp.Open();
                            }

                        }
                        catch (Exception ex)
                        {
                           Logger.Warn("Failed to open the serial port for HRM once. Try it again.");
                            Logger.Error(ex);
                            ////////////////////// new added below
                            if(sp !=null && sp.IsOpen)
                            {
                                sp.Dispose();
                            }
                            Thread.Sleep(6500);
                            if (IsPortAvailable(k))
                            {
                                try
                                {
                                    if (sp != null && !sp.IsOpen)
                                    {
                                        sp.Open();
                                    }

                                }
                                catch (Exception ex1)
                                {
                                    ////////////////////// new added below
                                    if (sp != null && sp.IsOpen)
                                    {
                                        sp.Dispose();
                                    }
                                    Logger.Warn("Failed to open the serial for HRM twice.");
                                    Logger.Error(ex1);
                                    // return;
                                }
                            }
                        }

                    }
                    while (true)
                    {

                        if (!isActive)
                        {
                            DisposeBT(sp);
                            break;
                        }
                    }
                    if (!isActive)
                    {
                        DisposeBT(sp);
                        return;
                    }
                    DisposeBT(sp);
                }
            }
            catch (Exception ex)
            {
                Logger.Warn("Exception thrown for HRM.");
                Logger.Error(ex);
            }

        }));
        startThread.IsBackground = true;
        startThread.Priority = ThreadPriority.Highest;
        startThread.Start();
    }
    catch (Exception ex)
    {
        Logger.Warn("Failed to start reading for HRM02I3A1 bluetooth device.");
        Logger.Error(ex);
    }
}

// Stop reading data from serial port
public override void StopReading()
{
    try
    {
        isActive = false;
    }
    catch { }
}

// event handler for the serial port to read data from sp.
void sp_DataReceived(object sender, SerialDataReceivedEventArgs e)
{
    if (isActive)// && startThread.IsAlive
    {
        SerialPort sp1 = (SerialPort)sender;
        try
        {
            sp1.Read(data, 0, 8);
            decoder.Decode(data);
        }
        catch(Exception ex)
        {
            Logger.Warn("------data received from Serial Port error for HRM-------");
            Logger.Error(ex);
        };
    }   
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T18:11:00.993

首先制作接受取消事件的后台工作线程。

在该`DoWork`方法中，您可以编写类似的内容

```
void DoWork{
    // init com port
    while(no body cancelled the background worker){
         // if there any waiting data receive and process it. do not use event handlers
    }
    // close the serial port so you can open it again later.
} 
```

此外，如果您想取消后台工作，那将是小菜一碟

```
// send cancel command.
// wait till it is canceled. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T18:26:05.163

尝试`startThread.Join()`在调用后直接添加`startThread.Abort()`.

查看[有关 Thread.Abort 的 msdn 文档](http://msdn.microsoft.com/en-us/library/5b50fdsz.aspx)，也许您还应该检查[join 的作用](http://msdn.microsoft.com/en-us/library/95hbf2ta.aspx)。

# javascript - 使用后退按钮时 Google + 在 IE8 上引发 Javascript 错误

> ID：15393106
> 
> 赞同：2
> 
> 时间：2013-03-13T18:06:12.037
> 
> 标签：javascript, internet-explorer-8, google-plus, google-plus-one

使用后退按钮重新访问页面时，由于 IE 8 上的 Google + 图标而出现 Javascript 错误。非常感谢任何想法/帮助。

**这是我的代码：**

```
<div class="googleplus1">
   <g:plusone></g:plusone>
</div>
<script type="text/javascript" src="https://apis.google.com/js/plusone.js"></script> 
```

**这是我得到的错误：**

```
User Agent: Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 5.1; Trident/4.0; GTB7.4; .NET CLR 1.1.4322; .NET CLR 2.0.50727; .NET CLR 3.0.04506.30; .NET CLR 3.0.4506.2152; .NET CLR 3.5.30729; BRI/2)
Timestamp: Wed, 13 Mar 2013 17:11:30 UTC

Message: m`I0_1363194676562
Line: 2
Char: 17
Code: 0
URI: https://apis.google.com/_/scs/apps-static/_/js/k=oz.gapi.en_US.I5-InDPlzyY.O/m=plusone/am=QQ/rt=j/d=1/rs=AItRSTMyDUrNu14AMpe4s29RHFxVrgAi-w/cb=gapi.loaded_0 
```

**以下是重现的步骤：**

(1) 使用 Internet Explorer 8 点击以下链接；它显示巡航搜索结果。（您可以关闭注册弹出窗口）。您会在标题中看到 Goggle + 图标。

[http://www.cruisesonly.com/results.do?wdos=3&places=ALL&c=ALL&days=ALL&p=ALL&Month=ALL&porttype=E&SType=P&ptype=c&type=c&shoppingZipCode=Zip+Code&SType=A&clp=1&sort=7&IncludeSeniorRates=false&IncludeAlumniRates=false&AlumniCruiseId=假&Search.x=22&Search.y=21](http://www.cruisesonly.com/results.do?wdos=3&places=ALL&c=ALL&days=ALL&p=ALL&Month=ALL&porttype=E&SType=P&ptype=c&type=c&shoppingZipCode=Zip+Code&SType=A&clp=1&sort=7&IncludeSeniorRates=false&IncludeAlumniRates=false&AlumniCruiseId=false&Search.x=22&Search.y=21)

(2) 从搜索结果中选择任何项目。您会在下一页的标题中看到 Google + 图标。

(3) 点击返回按钮返回搜索结果，你会得到一个 javascript 错误。Google + 图标不会加载。

提前致谢！席德

# jquery - 发出 AJAX 请求时遇到问题

> ID：15393107
> 
> 赞同：0
> 
> 时间：2013-03-13T18:06:12.837
> 
> 标签：jquery, ajax

这是我试图用 AJAX 完成的任务。我以前从未使用过 AJAX，所以我什至不确定我想要完成的是正确的使用。我正在尝试加快我网站的用户删除收件箱中累积的某些邮件的速度。在我网站的以前版本中，每次您删除一条消息时页面都必须刷新，这可能会变得非常慢。为了解决这个问题，我决定不要在用户按下“删除”按钮时触发表单，而是在客户端设置 jquery 以删除消息 html，然后发送异步 POST 请求，告诉服务器删除消息数据库。

```
$(document).ready( function() {
    $(".deleteButton").click(function() {
           var id = $(this).attr('id');
           $("tr#"+id).slideUp("fast");
           $.ajax({type: "post",
                 url: "/message",
                 data: {"delete_mes": id}});
    });
}); 
```

这几乎可以工作。每当我单击删除时，该消息就会消失，当我重新加载页面时它仍然消失，表明服务器已成功删除该消息。但是，当我在重新加载页面之前删除多条消息时，除第一条消息之外的所有消息都会重新出现。

希望在 ajax 方面有更多经验的人会知道什么是错的。我的服务器是使用 Google App Engine 设置的。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T18:27:08.673

第一：您不应该在页面上多次使用相同的 id。

我已经为你做了一个解决方案，检查这个[jsFiddle](http://jsfiddle.net/YLAH2/1/)。

```
$(document).ready( function() {
    $(".deleteButton").click(function() {
        var parent = $(this).parent('tr');
        var id = parent.attr('id');
        parent.slideUp("fast");
        // your ajax
    });
}); 
```

# eclipse - 计算重复的 repeatControls 属性会生成设计器错误

> ID：15393108
> 
> 赞同：2
> 
> 时间：2013-03-13T18:06:15.963
> 
> 标签：eclipse, xpages, repeat

我正在尝试计算重复的 repeatControls 属性，但出现错误

```
<?xml version="1.0" encoding="UTF-8"?>
<xp:view xmlns:xp="http://www.ibm.com/xsp/core">
    <xp:repeat id="repeat1" rows="30" value="#{javascript:10}">
        <xp:this.repeatControls><![CDATA[${javascript:"true"}]]>    </xp:this.repeatControls>
    </xp:repeat>
</xp:view> 
```

**这是错误**

说明 资源路径位置类型 无法为页面 /test.xsp 生成 .java 文件：由于调用 com.ibm.xsp.component.xp.XspDataIterator 时出现问题，无法找到标记 xp:repeat 的运行时类。 getJavaClass（com.ibm.xsp.page.parse.types.FacesInstance 类）。test.xsp test.nsf/XPages 第 1 行 com.ibm.designer.domino.ide.resources.designerproblem

这是 DDE 中的某种错误还是做错了？我也尝试过不带引号的“真实”

我正在使用notes 9 beta 1

![在此处输入图像描述](../Images/6cc101b504585e683b5d5210194c41f1.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T17:03:47.403

重复 ( ) 控件为属性`xp:repeat`指定以下工具提示。`repeatControls`

**重复控件 (boolean:repeatControls)**
*指定是否应多次创建控件或应多次迭代单个控件集。*

该`repeatControls`属性接受布尔值；特别是`"true"`or `"false"`。在“所有属性”视图中的 Domino Designer 中，尽管存在蓝色菱形（表示可以计算），但不应计算此属性。

在设计时，`repeatControls`属性值用于告知编译的 XPage 是如何生成的，因此无效值会阻止此操作成功；这是 Domino Designer 报告的错误，并已通过参考“ *DEGN95SMPT* ”与团队一起记录。

# jquery - 使用jQuery datepicker选择日期时如何覆盖默认行为

> ID：15393109
> 
> 赞同：0
> 
> 时间：2013-03-13T18:06:16.107
> 
> 标签：jquery, jquery-ui

我想要做的是在`<td>`所选日期添加一个类。

我以为我可以使用`onSelect`，但它只给了我日期字符串或当前 datepicker 实例，即整个日历。

然后我尝试向`<td>`元素添加一个事件，因此当我单击日期时，我可以获取元素并向其添加一个类。在我的事件中，元素的类改变了，但是一旦完成，类就变回了 jQuery ui 类。所以我认为我的事件实际上是在 jQuery-ui datepicker click 事件之前触发的，所以它覆盖了我的类。有什么我想念的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T18:24:05.120

When `td` is clicked you can try to `setTimeout` and after a while set the css class.

# maven - Maven 自定义归档扩展 - 我如何使用解包依赖项？

> ID：15393110
> 
> 赞同：5
> 
> 时间：2013-03-13T18:06:17.310
> 
> 标签：maven, maven-2, unpack, maven-dependency-plugin

我有一个自定义的人工制品类型`web-module`；只是一个 ZIP，但带有自定义扩展名。

然后我有一个依赖于它的项目，我希望解压缩它的这种自定义类型的依赖项。[maven-dependency-plugin](http://maven.apache.org/plugins/maven-dependency-plugin) [unpack-dependencies](http://maven.apache.org/plugins/maven-dependency-plugin/unpack-dependencies-mojo.html)目标似乎符合要求，但是我不断收到错误消息：

```
[INFO] Unknown archiver type
Embedded error: No such archiver: 'web-module'.
[INFO] ------------------------------------------------------------------------
[INFO] Trace
org.apache.maven.lifecycle.LifecycleExecutionException: Unknown archiver type
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultLifecycleExecutor.java:719)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalWithLifecycle(DefaultLifecycleExecutor.java:556)
    ... 
```

我已经做了一些[谷歌搜索](http://maven.40175.n5.nabble.com/Problems-with-register-new-archive-type-td4574907.html)，并了解到我可以在我的自定义插件的*components.xml*中指定一个自定义的 unarchiver 类型。以下内容现在在我的*components.xml*中：

```
<component>
  <role>org.codehaus.plexus.archiver.UnArchiver</role>
  <role-hint>web-module</role-hint>
  <implementation>org.codehaus.plexus.archiver.zip.ZipUnArchiver</implementation>
  <instantiation-strategy>per-lookup</instantiation-strategy>
</component> 
```

一旦安装了我的自定义插件，我再次尝试，仍然没有运气！有人知道我要去哪里错了吗？

我还尝试将自定义扩展插件添加到错误模块的 POM 中`<extensions>true</extensions>`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-10T11:51:39.990

试试这样：

```
<component-set>
    <components>
        <!-- Life-cycle mappings -->
        <component>
            <role>org.apache.maven.lifecycle.mapping.LifecycleMapping</role>
            <role-hint>web-module</role-hint>
             <implementation>org.apache.maven.lifecycle.mapping.DefaultLifecycleMapping</implementation>
            <configuration>
                <phases>
                    <!-- You might need these as well. -->
                </phases>
            </configuration>
        </component>

        <!-- Artifact Handlers -->
        <component>
            <role>org.apache.maven.artifact.handler.ArtifactHandler</role>
            <role-hint>web-module</role-hint>
            <implementation>org.apache.maven.artifact.handler.DefaultArtifactHandler</implementation>
            <configuration>
                <extension>web-module</extension>
                <type>web-module</type>
                <packaging>web-module</packaging>
            </configuration>
        </component>
    </components>
</component-set> 
```

# .htaccess - 如何使用 htaccess 删除页面扩展名（即 /profile.html）

> ID：15393112
> 
> 赞同：1
> 
> 时间：2013-03-13T18:06:23.263
> 
> 标签：.htaccess

如何使用 htaccess 删除页面扩展名（即 profile.html）？因此，如果我加载 www.mysite.com/profile.html 我需要将 profile.html 删除。

这仅删除 index.html ，如果我将其更改为 profile.html 它只会转到 mysite.com 并加载主页。

```
Options +FollowSymLinks
RewriteEngine On
RewriteCond %{THE_REQUEST} \/index.html\ HTTP [NC]
RewriteRule (.*)index.html$ /$1 [R=301,L] 
```

# math - 将浮点数从二进制转换为十进制数

> ID：15393113
> 
> 赞同：0
> 
> 时间：2013-03-13T18:06:30.930
> 
> 标签：math, floating-point, binary, decimal

我必须将浮点数从二进制转换为可用的十进制数。

当然我的浮点数已经被分成字节，所以总共 4 个字节。
1 2 3 4
[xxxxxxxx][xxxxxxxx][xxxxxxxx][xxxxxxxx]

这 4 个字节已经转换为十进制，所以我有例如
1 2 3 4
[0][10][104][79]

现在尾数分为三个部分，两个最右边的字节（3 和 4）和字节 2，但没有 MSB 位（那个很容易屏蔽掉，所以假设我们在那里也有一个很好的十进制数）。所以三个十进制数。

**这三个十进制数是否有直接的数学转换为浮点尾数？**

这大致上是这样的：如果我需要得到一个整数，公式将是
10 * 65536 + 104 * 256 + 79。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T18:35:12.863

调用这些字节`a`、`b`和`c`。我假设`a`已经被屏蔽了，所以它只包含有效数的位而没有指数，并且该数字是 IEEE-754 32 位二进制浮点数，字节以适当的字节序排列。

如果原始指数字段是 1 到 254（因此，不是 0 或 255），则有效数字为：

```
1 + a*0x1p-7 + b*0x1p-15 + c*0x1p-23 
```

或者，等效地：

```
(65536*a + 256*b + c) * 0x1p-23 + 1. 
```

如果原始指数字段为 0，则从总和中删除 1（该数字为次正规或零）。如果原始指数字段为 255，则浮点值为无穷大（如果`a`、`b`和`c`均为 0）或 NaN（否则）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T18:17:43.770

我帮不上什么忙，因为我已经有一段时间没有进行转换了，但是我希望您发现[本教程](http://kipirvine.com/asm/workbook/floating_tut.htm)对您有用。

# python - 如何从 GTK Builder 中检索对象的名称？

> ID：15393120
> 
> 赞同：2
> 
> 时间：2013-03-13T18:06:55.843
> 
> 标签：python, gtk, pygobject

如何从 Builder 对象中获取 Gtk.Widget 的名称？

我特别指的是在 Glade 中看到的名称（例如：）`button1`，而不是类的名称（`GtkWindow`）。

[这个问题和这个](https://stackoverflow.com/questions/8263756/gtkbuilder-and-names)问题完全一样，但是对于带有 GObject 内省的 Python。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T18:06:55.843

您不能使用`get_name`继承自`Gtk.Widget`. 相反，您必须使用 中`get_name`定义的方法`Gtk.Buildable`，如下所示：

```
button = builder.get_object("button1")
print(Gtk.Buildable.get_name(button)) # prints "button1" 
```

# c# - 空报告查看器参数

> ID：15393124
> 
> 赞同：0
> 
> 时间：2013-03-13T18:07:07.113
> 
> 标签：c#, .net, reportviewer

我设计了一个具有参数的报告（.rdl 文件），我在 .net c# 中设置该参数并传递给reportviewer。您将如何处理参数未设置为值的报告。如果参数为空，我想返回所有行。

这就是我在报表设计器中所拥有的：

```
SELECT *
FROM
  Users
WHERE UserID = (@ReportParameter1) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T18:10:04.750

将选择更改为：

```
SELECT *
FROM
  Users
WHERE UserID = (@ReportParameter1) or @ReportParameter1 is null 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T18:17:44.590

```
SELECT *
FROM
  Users
where (@ReportParameter1 is null or UserID =@ReportParameter1) 
```

# python - Django：如何创建多选表单？

> ID：15393134
> 
> 赞同：17
> 
> 时间：2013-03-13T18:07:45.500
> 
> 标签：python, django, forms, field, multiple-select

我是 Django/Python 的初学者，我需要创建一个多选表单。我知道这很容易，但我找不到任何例子。我知道如何使用小部件创建 CharField，但我对[fields.py](https://github.com/django/django/blob/1.3/django/forms/fields.py)中的所有选项感到困惑。

例如，我不知道以下哪一项最适合多选表单。

```
'ChoiceField', 'MultipleChoiceField',
'ComboField', 'MultiValueField',
'TypedChoiceField', 'TypedMultipleChoiceField' 
```

这是我需要创建的表格。

```
 <form action="" method="post" accept-charset="utf-8">
        <select name="countries" id="countries" class="multiselect" multiple="multiple">
            <option value="AUT" selected="selected">Austria</option>
            <option value="DEU" selected="selected">Germany</option>
            <option value="NLD" selected="selected">Netherlands</option>
            <option value="USA">United States</option>
        </select>
        <p><input type="submit" value="Continue &rarr;"></p>
    </form> 
```

编辑：

还有一个小问题。如果我想为每个选项添加一个属性，例如*data*：

```
 <option value="AUT" selected="selected" data-index=1>Austria</option> 
```

我该怎么做？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-03-13T18:41:55.567

我认为[`CheckboxSelectMultiple`](https://docs.djangoproject.com/en/stable/ref/forms/widgets/#checkboxselectmultiple)应该根据您的问题工作。

在您的`forms.py`中，编写以下代码：

```
from django import forms

class CountryForm(forms.Form):
    OPTIONS = (
        ("AUT", "Austria"),
        ("DEU", "Germany"),
        ("NLD", "Neitherlands"),
    )
    Countries = forms.MultipleChoiceField(widget=forms.CheckboxSelectMultiple,
                                          choices=OPTIONS) 
```

在您的`views.py`中，定义以下函数：

```
def countries_view(request):
    if request.method == 'POST':
        form = CountryForm(request.POST)
        if form.is_valid():
            countries = form.cleaned_data.get('countries')
            # do something with your results
    else:
        form = CountryForm

    return render_to_response('render_country.html', {'form': form},
                              context_instance=RequestContext(request)) 
```

在你的`render_country.html`：

```
<form method='post'>
    {% csrf_token %}
    {{ form.as_p }}
    <input type='submit' value='submit'>
</form> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-13T18:49:15.197

我是这样做的：

**表格.py**

```
class ChoiceForm(ModelForm):
    class Meta:
        model = YourModel

    def __init__(self, *args, **kwargs):
        super(ChoiceForm, self).__init__(*args, **kwargs)
        self.fields['countries'] =  ModelChoiceField(queryset=YourModel.objects.all()),
                                             empty_label="Choose a countries",) 
```

**网址.py**

```
from django.conf.urls.defaults import * 
from django.views.generic import CreateView
from django.core.urlresolvers import reverse

urlpatterns = patterns('',
    url(r'^$',CreateView.as_view(model=YourModel, get_success_url=lambda: reverse('model_countries'),
        template_name='your_countries.html'), form_class=ChoiceForm, name='model_countries'),) 
```

**your_countries.html**

```
<form action="" method="post">
    {% csrf_token %}
    {{ form.as_table }}
    <input type="submit" value="Submit" />
</form> 
```

在我的示例中效果很好，如果您需要更多内容，请问我！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-18T13:04:55.777

关于我的第二个问题，这是解决方案。扩展类：

```
from django import forms
from django.utils.encoding import force_unicode
from itertools import chain
from django.utils.html import escape, conditional_escape

class Select(forms.Select):
    """
    A subclass of Select that adds the possibility to define additional 
    properties on options.

    It works as Select, except that the ``choices`` parameter takes a list of
    3 elements tuples containing ``(value, label, attrs)``, where ``attrs``
    is a dict containing the additional attributes of the option.
    """
    def render_options(self, choices, selected_choices):
        def render_option(option_value, option_label, attrs):
            option_value = force_unicode(option_value)
            selected_html = (option_value in selected_choices) and u' selected="selected"' or ''
            attrs_html = []
            for k, v in attrs.items():
                attrs_html.append('%s="%s"' % (k, escape(v)))
            if attrs_html:
                attrs_html = " " + " ".join(attrs_html)
            else:
                attrs_html = ""
            return u'<option value="{0}"{1}{2}>{3}</option>'.format(
                escape(option_value), selected_html, attrs_html, 
                conditional_escape(force_unicode(option_label))
                )
            '''
            return u'<option value="%s"%s%s>%s</option>' % (
                escape(option_value), selected_html, attrs_html,
                conditional_escape(force_unicode(option_label)))
            '''
        # Normalize to strings.
        selected_choices = set([force_unicode(v) for v in selected_choices])
        output = []
        for option_value, option_label, option_attrs in chain(self.choices, choices):
            if isinstance(option_label, (list, tuple)):
                output.append(u'<optgroup label="%s">' % escape(force_unicode(option_value)))
                for option in option_label:
                    output.append(render_option(*option))
                output.append(u'</optgroup>')
            else:
                output.append(render_option(option_value, option_label,
                    option_attrs))
        return u'\n'.join(output)

class SelectMultiple(forms.SelectMultiple, Select):
    pass 
```

例子：

```
OPTIONS = [
        ["AUT", "Australia", {'selected':'selected', 'data-index':'1'}],
        ["DEU", "Germany", {'selected':'selected'}],
        ["NLD", "Neitherlands", {'selected':'selected'}],
        ["USA", "United States", {}]
    ] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-13T18:14:39.017

[ModelMultipleChoiceField](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/)是您的朋友。CharField 能够存储一个选择，但不能存储多个，而不需要一些额外的工作，我建议不要这样做。

[ModelMultipleChoiceField 的 API 文档](https://docs.djangoproject.com/en/dev/ref/forms/fields/#modelmultiplechoicefield)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-04-06T10:39:14.313

您还可以在表单类中将国家字段定义为

```
Countries = forms.MultipleChoiceField(widget=forms.SelectMultiple,
                                             choices=OPTIONS_TUPPLE) 
```

我不知道 SelectMultiple 和 CheckboxSelectMultiple 中哪个更好，但它也可以。

有关更多详细信息，您可以使用有关[小部件](https://docs.djangoproject.com/en/dev/ref/forms/widgets/)的 django 文档。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-02-24T11:32:06.763

当您想要选择多个值时，使用 widget=forms **CheckboxSelectMultiple非常困难。**（记住多选是针对多对多键字段）

在这种情况下**SelectMultiple**更好，因为您可以使用 ctrl 选择多个项目或使用 ctrl+a 选择所有项目。

```
class MyModalForm(forms.ModelForm):
    class Meta:
    model = MyModel
        widgets = {            
            'products': forms.SelectMultiple(attrs={'required': True})
        } 
```

如果您想要多选的动态值，您可以使用**init执行此操作**

```
class MyModalForm(forms.ModelForm):
    class Meta:
    model = MyModel
        widgets = {            
            'products': forms.SelectMultiple(attrs={'required': True})
        }
    def __init__(self, *args, **kwargs):
        selected_products = kwargs.pop('selected_products', None)   ##queryset returned from function
        self.fields['products'].queryset = selected_products
        self.fields['orders'].queryset = OrderModal.objects.filter(pk=2) 
```

# jquery - 自定义滑块手柄捕捉到光标？

> ID：15393136
> 
> 赞同：1
> 
> 时间：2013-03-13T18:07:48.597
> 
> 标签：jquery, css, jquery-ui, jquery-slider

我正在使用一个完全普通的 jQuery 滑块，我使用以下 CSS 缩小了其句柄：

```
html body .ui-slider .ui-slider-handle {
    width: 10px;
} 
```

这具有缩小滑块手柄的预期效果，但是当我尝试拖动它时，它具有使手柄捕捉到光标左侧位置的不良副作用。

是什么导致了这种情况，我该如何修改这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T19:16:45.317

这是因为在 CSS 中`.ui-slider .ui-slider-handle`使用。`margin-left`

当您更改 时`width`，请确保也更改`margin-left`。

```
.ui-slider .ui-slider-handle {
    width: 10px;
    margin-left: -.3em; /*change this*/
} 
```

演示：http: [//jsfiddle.net/dirtyd77/Z7pW3/6/](http://jsfiddle.net/dirtyd77/Z7pW3/6/)

# android - android / phonegap app多屏支持

> ID：15393138
> 
> 赞同：0
> 
> 时间：2013-03-13T18:07:53.163
> 
> 标签：android, html, cordova

我们正在使用 html5、CSS3、JQM 和 phonegap 为 android 平台开发移动应用程序。由于 android 手机有不同的屏幕尺寸，我们无法找到一种方法来适应多个屏幕中的背景图像或任何图像。背景图像非常适合 HTC One V、三星 S3 mini，但无法在三星 Note 等更大的手机中拉伸

我们使用的方法

1.  我们为 mdpi、hdpi、xhdpi 文件夹使用了分辨率为 320*480 的图像，并使用 CSS3，如果需要，我们会尝试在更大的屏幕上拉伸它们。使用的 CSS ：

    /* 每个屏幕的背景图像 */

    # 欢迎页面{

    ```
     background:url('file:///android_res/drawable/back_welcome_2x.png') no-repeat center center;
    background-attachment:fixed;
    min-height:100%;
    background-size:cover; 
    ```

    }

    *   这不起作用。
2.  我们试图通过插入 width=device-width , height=device-height, initial scale=1.0 , target-dpi=device-dpi 并使用 528*909 的图像（例如）来更改视口元数据。这会稍微削减图像但适合屏幕。同时，UI 中的所有 jquery 移动组件都缩小了尺寸。我们不确定这是否是正确的方法。

为了尽可能多地定位屏幕尺寸，要考虑哪个参数？屏幕尺寸、分辨率还是 DPI？

我们究竟能做些什么来确保我们的背景图片适合几乎所有的安卓手机屏幕（比如三星 Note）。

或者你能告诉我们是否可以即兴创作方法 1 或 2？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-27T09:39:06.763

**我假设您的背景图像不是瓷砖。**

不要过度拉伸图像。它会使您的图像看起来模糊或不清晰。与原生 Android 应用程序一样，以多种分辨率传送背景图像。然后，您可以使用我[在此处](https://stackoverflow.com/questions/12177134/supporting-multiple-resolution-and-density-of-images-in-phonegap/16769241#16769241)描述[的车把助手](http://handlebarsjs.com/)非常简单地选择正确的图像。

**Javascript：**

```
if (screen.width <= 480) {
    imgFolder = 'img/low/';
}
else {
    imgFolder = 'img/high/';
}

Handlebars.registerHelper('imgFolder', function () {
    return imgFolder
}); 
```

**HTML：**

```
<body style="background:url('{{imgFolder}}yourImage.png'); background-size:cover;" /> 
```

当然，您必须为 ldpi/mdpi/hdpi/xhdpi 添加分辨率 - 我目前不知道。我不认为您可以在浏览器中使用 googles`dp`值（不是`dpi`）来使用 androids 内部尺寸调整机制，因此您最好的选择是使用 4 种最常见的分辨率（例如宽度为 320、480、600、800 - 我可能是错的）和中间分辨率的缩小图像。

对于 Android，通常使用 4 个图像文件夹：

*   低密度脂蛋白
*   hdpi
*   mdpi
*   xhdpi

尽管它们的名称中有 dpi，但这不是您应该查看的参数。作为确定分辨率的参数，您应该使用`screen.width`- 在您检查您的 pg app/cordova 浏览器是否具有 1:1 像素映射之后。您可以通过以下方式做到这一点：

```
alert('screen size: ' + screen.width + ' x ' + screenheight + ' browser size: ' + $(window).width() + ' x ' + $(window).height()); 
```

的`width`and`height`必须`window`匹配 的值`screen`。否则，您的图像会被缩放并且看起来不太好 - 您的应用程序看起来会比原生应用程序更糟糕（除了不使用任何基于像素 (.png/.jpg) 图像的非常罕见的情况）。您可以使用媒体查询来修复映射，这可能有点繁琐。

完成 1:1 像素映射后，您可以使用（如果您的应用同时支持横向和纵向，`screen.width`则必须比较`screen.width`并取较小的值）。`screen.height`如果由于某种原因无法进行 1:1 映射（应不惜一切代价避免最坏的情况），请使用`window.innerWidth`or `$(window).width()`。您的 jqm 行为（使用您提供的元标记时减小的大小）可能表明您的像素映射不如预期的准确。

所有图像的缩放比例是

```
3:4:6:8 (ldpi:mdpi:hdpi:xhdpi) 
```

# windows - s:WindowedApplication - 如何删除系统镶边？

> ID：15393143
> 
> 赞同：0
> 
> 时间：2013-03-13T18:08:08.497
> 
> 标签：windows, apache-flex, air, flex-spark

我有一个 Spark `WindowedApplication`（AIR for Windows Desktop），我想删除标题栏和边框，这个选项将在应用程序启动时通过 cmd 行设置。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T20:05:24.180

您需要通过设置“systemChrome”和“transparent”属性在“YouApplicationName_app.xml”中进行两项更改。

```
<initialWindow>
    <systemChrome>none</systemChrome>
    <transparent>false</transparent>
<initialWindow> 
```

在您的 WindowedApplication 中，您必须设置以下四个属性：

```
backgroundAlpha="0"
showTitleBar="false"
borderStyle="none"
showStatusBar="false" 
```

您可以在此链接上找到更多信息：

*   [http://help.adobe.com/en_US/air/build/WS2d929364fa0b81374fa5df4f129dca62884-8000.html](http://help.adobe.com/en_US/air/build/WS2d929364fa0b81374fa5df4f129dca62884-8000.html)
*   [http://livedocs.adobe.com/flex/3/html/help.html?content=WorkingWithWindows_2.html](http://livedocs.adobe.com/flex/3/html/help.html?content=WorkingWithWindows_2.html)

# python - Python局部变量作为参考？

> ID：15393155
> 
> 赞同：0
> 
> 时间：2013-03-13T18:08:31.927
> 
> 标签：python, class, variables

我试图让我的小脚本工作，但我不知道问题是什么，其中一种方法会修改我的测试变量，即使我不返回它，我的意思是，我想在本地使用它而不是返回值。这不是我的实际代码，但您可以确定代表它。

更新：我正在使用字典

```
 >>> class check:
    ...   def pathgen(self,test):
    ...     test['a']=0
    ...     print test
    ...   def assign(self):
    ...     test={'a':1}
    ...     self.pathgen(test)
    ...     print test #WILL PRINT 0
    ... 
    >>> a=check()
    >>> a.assign()
    {'a': 0}
    {'a': 0} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T18:10:18.807

您正在使用函数本地名称。在实例上设置属性（通过`self`）以在方法之间共享信息：

```
class check:
     def pathgen(self):
         self.test = 0
         print self.test
     def assign(self):
         self.test = 1
         self.pathgen()
         print self.test 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T19:04:28.347

在您的代码中，'pathgen' 将修改其第一个参数指向的任何内容。为避免这种情况，您可以在对其进行任何更改之前复制“测试”

有关此处复制的更多信息：http: [//docs.python.org/2/library/copy.html](http://docs.python.org/2/library/copy.html)

```
class check:
    def pathgen(self,test):
        local_copy = test.copy()
        local_copy['a'] = 0
        print local_copy 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T18:10:08.213

你的假设是错误的。实际上，该`WILL PRINT 0`行将打印`1`.

`test`请注意，如果是一个列表，情况会有所不同，并且`pathgen`要对其进行修改（例如，通过附加一个元素）：

```
class check:
     def pathgen(self,test):
         test.append(1)
         print test
     def assign(self):
         test=[]
         self.pathgen(test)
         print test

check().assign() 
```

实际上，这将打印`[1]`两次。

这可以通过复制`test`in来解决`pathgen`：

```
class check:
     def pathgen(self,test):
         test=test[:]    # make a shallow copy of `test'
         test.append(1)
         print test
     def assign(self):
         test=[]
         self.pathgen(test)
         print test

check().assign() 
```

# tomcat7 - 使用 Handlebars.js tmpl 文件 Tomcat 获取 404

> ID：15393160
> 
> 赞同：0
> 
> 时间：2013-03-13T18:08:44.670
> 
> 标签：tomcat7, handlebars.js

我是 Tomcat 新手并使用 Handlebars.js。我正在制作一个原型页面来测试使用 handlebars.js。我已经安装了在 Windows 7 上运行的 Tomcat 7 的香草版本。我已经将我的页面添加了相关的 js css 和图像文件，并将它们放在 MyApp 文件夹内的 webapps 文件夹中。

所以我们有

```
 |
 -- 网络应用
      |
      -- 我的应用
           |
           -- index.html
           |
           --css/
           |
           -- img/ - 我所有的精灵都在这里
           |
           -- js/ - 包含我所有的 vendor 和 prsonal js 文件
           |
           -- tmpl/ 包含我所有的车把模板 (*.tmpl) 文件

```

当我加载索引文件加载的页面时，会访问 js、css 和图像文件。但是 tmpl 文件出现 404 错误

> HTTP 状态 404 - /MyApp/tmpl/MainView.tmpl
> 
> 类型状态报告
> 
> 消息 /MyApp/tmpl/MainView.tmpl
> 
> 描述 请求的资源不可用。

有什么想法吗？我已经将 tmpl mimetype 添加为纯文本。

谢谢，

杰夫

# matlab - 八度的向量解包

> ID：15393161
> 
> 赞同：8
> 
> 时间：2013-03-13T18:08:48.037
> 
> 标签：matlab, octave, unpack, iterable-unpacking

Octave(/matlab) 处理多个返回值的符号

```
[a, b] = f(x) 
```

表明 f(x) 返回的值是一种行向量，并且 Octave 支持向量解包（如 Python 的元组解包）。

然而当我把

```
[a, b] = [1, 2] 
```

我明白了

> 错误：常量表达式的输出参数数量无效

octave 是否支持向量解包？

如果是这样，正确的符号是什么？

我在文档中找不到任何内容

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-13T18:14:27.640

我没有 Octave 来测试，但在 MATLAB 中你可以“解包”单元格数组。

```
x = {1 2};
[x1,x2] = x{:}

x1 =
     1
x2 =
     2 
```

您可以将数值向量转换为元胞数组`x = num2cell([1 2]);`。

我必须补充一点，这适用于从 7.0 版开始的 MATLAB。对于早期版本，您必须使用[DEAL](http://www.mathworks.com/help/matlab/ref/deal.html)功能。

# json - 如何从 BigQuery 中的平面表创建嵌套的 JSON 格式表？

> ID：15393165
> 
> 赞同：5
> 
> 时间：2013-03-13T18:08:53.190
> 
> 标签：json, google-bigquery

我有一个宽大的平面表，以以下类似格式存储在 Google bigquery 中：

> log_date:integer,sessionid:integer,computer:string,ip:string,event_id:integer,amount:float

我正在尝试以分层嵌套格式创建此表，具有 2 个嵌套级别，如下所示：

```
 [
  {
    "name": "log_date",
    "type": "integer"
  }, 
  {
    "name": "session",
    "type": "record",
    "mode": "repeated",
    "fields": [                 
     {
       "name": "sessionid",
       "type": "integer"
         },
     {
       "name": "computer",
       "type": "string"
        },
        {
       "name": "ip",
       "type": "string"
        },
        {
    "name": "event",
    "type": "record",
    "mode": "repeated",
    "fields": [
    {
       "name": "event_id",
       "type": "integer"
     },
     {
       "name": "amount",
       "type": "float"
     }]] } ] 
```

从 bigquery 表生成 json 格式的数据文件的最佳方法是什么？有没有比 1\. 将表下载到外部 csv 2\. 构建 json 记录，并将其写入外部文件 3\. 将外部 json 文件上传到新的 bigquery 表中不同且更快的方法

我们可以有一个从现有表生成 json 的直接过程吗？

谢谢你，H

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T19:18:19.733

目前没有一种方法可以自动将数据转换为嵌套格式。如果您想以 json 格式而不是 CSV 格式获取数据，您可以使用将`--destination_format`标志设置为`NEWLINE_DELIMITED_JSON`. 例如

```
bq extract \
    --destination_format=NEWLINE_DELIMITED_JSON \
    yourdataset.table \
    gs://your_bucket/result*.json 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-15T20:53:28.960

这可以[`array_agg`](https://cloud.google.com/bigquery/docs/reference/standard-sql/functions-and-operators#array_agg)在标准 SQL 中完成。

请注意，如果要嵌套在层中，则需要有公共表表达式，因为 an`array_agg`不能直接包含另一个`array_agg`。

```
WITH DATA AS (
 SELECT 1 AS log_date, 10 AS sessionid, 'a' AS computer, '1.2.3.4' AS ip, 100 AS event_id, 1 AS amount
 UNION ALL SELECT 1 AS log_date, 11 AS sessionid, 'b' AS computer, '1.2.3.5' AS ip, 101 AS event_id, 2 AS amount
 UNION ALL SELECT 1 AS log_date, 11 AS sessionid, 'b' AS computer, '1.2.3.5' AS ip, 102 AS event_id, 3 AS amount
 UNION ALL SELECT 2 AS log_date, 20 AS sessionid, 'a' AS computer, '1.2.3.4' AS ip, 200 AS event_id, 4 AS amount
 UNION ALL SELECT 2 AS log_date, 20 AS sessionid, 'a' AS computer, '1.2.3.4' AS ip, 201 AS event_id, 5 AS amount
 UNION ALL SELECT 2 AS log_date, 21 AS sessionid, 'c' AS computer, '1.2.3.6' AS ip, 202 AS event_id, 6 AS amount ),
inner_Aggregate AS (
  SELECT
    log_date,
    sessionid,
    computer,
    ip,
    ARRAY_AGG(STRUCT(event_id, amount)) AS event
  FROM
    DATA
  GROUP BY
    log_date,
    sessionid,
    computer,
    ip )
SELECT
  log_date,
  ARRAY_AGG(STRUCT(sessionid, computer, ip, event )) AS session
FROM
  inner_Aggregate
GROUP BY
  log_date 
```

# c# - C# Outlook 向多个收件人发送一封电子邮件

> ID：15393166
> 
> 赞同：2
> 
> 时间：2013-03-13T18:08:57.230
> 
> 标签：c#, outlook

我一直在试图弄清楚如何通过 C# 将 Outlook 电子邮件发送给多个收件人。现在我可以在收件人之间进行循环，但是我的发件箱中有很多已发送的电子邮件。

```
 Microsoft.Office.Interop.Outlook.Application oApp = new Microsoft.Office.Interop.Outlook.Application();
            Microsoft.Office.Interop.Outlook.MailItem oMsg = (Microsoft.Office.Interop.Outlook.MailItem)oApp.CreateItem(Microsoft.Office.Interop.Outlook.OlItemType.olMailItem);

            oMsg.HTMLBody ="test";
            oMsg.Subject = "test" ;
            Microsoft.Office.Interop.Outlook.Recipients oRecips = (Microsoft.Office.Interop.Outlook.Recipients)oMsg.Recipients;        
            Microsoft.Office.Interop.Outlook.Recipient oRecip = (Microsoft.Office.Interop.Outlook.Recipient)oRecips.Add("xxx@xxx.com");
            oRecip.Resolve();
            oMsg.Send();
            oRecip = null;
            oRecips = null;
            oMsg = null;
            oApp = null; 
```

如果我向它添加多个地址，例如： (Microsoft.Office.Interop.Outlook.Recipient)oRecips.Add("xxx@xxx.com,yyy@yyy.com,zzz@zzz.com") 这不会以某种方式工作。谁可以帮我这个事？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-05-18T17:33:17.317

您只需用分号分隔每个用户。例如看看我下面的代码。

```
Outlook.MailItem mail = null;
 Outlook.Application objApp = new Outlook.Application();               
 mail=(Outlook.MailItem)objApp.CreateItem(Outlook.OlItemType.olMailItem);

  mail.Subject ="HI";
  mail.To = "personone@yahoo.com; Persontwo@yahoo.com";
  mail.Attachments.Add("C:\SOME_FOLDER\SomeFile");
  mail.Body="xxxxxx";
  mail.Send(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T18:11:53.793

("xxx@example.com,yyy@example.org,zzz@meta.example.com") 不是 ("xxx@example.com; yyy@example.org; zzz@ meta.example.com") ??

如果我进入我的 Outlook 并发送给多个人，它会在 to: 字段中显示一个分号。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T18:40:23.563

为什么不为每个收件人调用“oRecips.Add”？毕竟它添加到收件人...？

编辑：刚刚验证：

```
 Microsoft.Office.Interop.Outlook.Application oApp = new Microsoft.Office.Interop.Outlook.Application();
 Microsoft.Office.Interop.Outlook.MailItem oMsg = (Microsoft.Office.Interop.Outlook.MailItem)oApp.CreateItem(Microsoft.Office.Interop.Outlook.OlItemType.olMailItem);

 oMsg.HTMLBody = "test";
 oMsg.Subject = "test";
 Microsoft.Office.Interop.Outlook.Recipients oRecips = (Microsoft.Office.Interop.Outlook.Recipients)oMsg.Recipients;

 foreach (var recipient in new string[] { "a@b.c", "c@d.e" })
 {
      Microsoft.Office.Interop.Outlook.Recipient oRecip = (Microsoft.Office.Interop.Outlook.Recipient)oRecips.Add(recipient);
      oRecip.Resolve();
 }
 oRecips = null;

 oMsg.Send();
 oMsg = null;
 oApp = null; 
```

就像我想的那样，将创建一个包含任意数量收件人的已发送项目。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-06-09T07:06:29.690

此代码适用于发送多个收件人

```
 private static void SendMail(string body){
            try   { string tomail = System.Configuration.ConfigurationManager.AppSettings["ToMailString"];
            string[] allToAddresses = tomail.Split(";,".ToCharArray(), StringSplitOptions.RemoveEmptyEntries);

            Microsoft.Office.Interop.Outlook.Application oApp = (Microsoft.Office.Interop.Outlook.Application)Marshal.GetActiveObject("Outlook.Application");
            //Microsoft.Office.Interop.Outlook.Application oApp = new Microsoft.Office.Interop.Outlook.Application();
            //Microsoft.Office.Interop.Outlook.MailItem tempItem = (Microsoft.Office.Interop.Outlook.MailItem)Globals.ThisAddIn.Application.CreateItem(Microsoft.Office.Interop.Outlook.OlItemType.olMailItem);

            Microsoft.Office.Interop.Outlook.MailItem email = (Microsoft.Office.Interop.Outlook.MailItem)(oApp.CreateItem(Microsoft.Office.Interop.Outlook.OlItemType.olMailItem));
            email.Subject = "Status Report";
            email.Body = body;
            Microsoft.Office.Interop.Outlook.Recipients oRecips = (Microsoft.Office.Interop.Outlook.Recipients)email.Recipients;
            int mailcount1 = 1;
            for (; mailcount1 < allToAddresses.Length; mailcount1++)
            {
                if (allToAddresses[mailcount1].Trim() != "")
                {
                    //email.Recipients.Add(allToAddresses[mailcount1]);
                    Microsoft.Office.Interop.Outlook.Recipient oRecip = (Microsoft.Office.Interop.Outlook.Recipient)oRecips.Add(allToAddresses[mailcount1]);
                    oRecip.Resolve();
                }
            }

            oRecips = null;
            ((Microsoft.Office.Interop.Outlook.MailItem)email).Send(); 
            Console.WriteLine("Mail Sent");
        }
        catch (Exception ex)
        {
            Console.WriteLine(ex.ToString());
        }

    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T18:16:36.740

如果您想发送多个人，请尝试使用此代码将他们添加到 cc 或 bcc 或根据您的意愿添加

```
public void SendAutomatedEmail(string htmlString, string subject, string from, string fromPwd, string recipient)
    {
        try
        {
            string mailServer = "xxxxExchangesver.com";
            string[] allToAddresses = recipient.Split(";,".ToCharArray(), StringSplitOptions.RemoveEmptyEntries);

            MailMessage message = new MailMessage(from, allToAddresses[0]);
            int mailcount1 = 1;
            for (; mailcount1 < allToAddresses.Length; mailcount1++)
            {
                if (allToAddresses[mailcount1].Trim() != "")
                    message.To.Add(allToAddresses[mailcount1]);
            }
            message.IsBodyHtml = true;
            message.Body = htmlString;
            message.Subject = subject;
            message.CC.Add(from);

            SmtpClient client = new SmtpClient(mailServer);

            var AuthenticationDetails = new NetworkCredential(from, fromPwd);
            client.Credentials = AuthenticationDetails;
            client.EnableSsl = true;
            client.Send(message);
            client.Dispose();

        }
        catch (Exception e)
        {
            status(e.Message, Color.Red);
        }
    } 
```

# java - Java Class 构造函数中尖括号的用途是什么？

> ID：15393176
> 
> 赞同：0
> 
> 时间：2013-03-13T18:09:21.397
> 
> 标签：java, class, generic-type-argument

如果您尝试通过将“某些表达式”替换为...某些表达式`public void x(List<Class<some expression>> m)`来传递不扩展的类，我希望方法抛出错误。`class A{}`

当我使用通配符或不包含通配符时，我总是会收到一个烦人的警告，所以我想了解为什么 Class 值得一个维度，即使我完全不知道它是如何使用的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T18:13:06.537

我不完全明白你想要做什么。实际上，这个方法签名：

```
public void x(List<? extends YourClass> m) 
```

`List`如果您传递一个类不扩展的对象`YourClass`（让我们这样称呼它，而不是），则不会编译`A`。

如果您希望您的`x`方法作为参数获取`Class`对象列表，那是另一个问题。你确定你不愿意只传递一个`List`扩展类的对象`YourClass`吗？如果是这样，该方法签名应该可以工作。

**编辑**：既然你说你想传递一个类列表，那么这应该工作：

```
public void x(List<Class<? extends YourClass>> m) 
```

以这种方式测试：

```
import java.util.*;

class YourClass {}
class YourClassEx extends YourClass {}

public class Test {

    public static void x(List<Class<? extends YourClass>> m) {
        // stuff...
    }

    public static void main(String[] argv) {

        List<Class<? extends YourClass>> list = new ArrayList<>();
        list.add(YourClass.class);
        list.add(YourClassEx.class);
        x(list); // compiles fine until here

        list.add(String.class); // doesn't compile
        x(new ArrayList<Class>()); // doesn't compile, either

    }
} 
```

# variables - 局部变量未使用错误的值

> ID：15393178
> 
> 赞同：0
> 
> 时间：2013-03-13T18:09:24.200
> 
> 标签：variables, button, local, public, findviewbyid

我正在制作一个按钮，可以将您带到另一个页面。我已经完成了一个按钮，并且效果很好。但是当我尝试另一个时，我收到一个错误，导致它停止工作。

```
Button bWebs = (Button) findViewById(R.id.Webs);
    bUtuube.setOnClickListener(new View.OnClickListener() {

        @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        startActivity(new Intent("com.tssandroid.tssphone.TUTORIALTWO")); 
```

我在`"bWebs"`第二个字上得到了错误。`bWebs`错误是“未使用局部变量的值”。我该如何解决？

# javascript - 最后解析类名的数字？

> ID：15393186
> 
> 赞同：2
> 
> 时间：2013-03-13T18:09:48.103
> 
> 标签：javascript, jquery

我有元素。我确信他们会有一个类 'fc-id#'，其中 '#' 是一个数字。

我需要以某种方式得到那个号码。这将始终是元素的第一类。

有什么办法可以得到最后的号码吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T18:16:04.930

```
$("[class^=fc-id]").each(function(){
      var num = this.className.split(' ')[0].match(/fc-id(\d)/)[1];
}); 
```

[样本](http://jsfiddle.net/LdPaw/0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T18:11:54.150

使用`.split()`方法如

```
var idNum = $(this).attr('class').split('id')[1]; // # 
```

或者如果您需要检索第一堂课，请执行以下操作：

```
var idNum = $(this).attr('class').split(' ')[0].split('id')[1]; // # 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T18:13:37.310

```
$("[class^=fc-id]").each(function(){
    // Everything after the first 5 characters (fc-id)
    alert($(this).attr("class").substring(5)); 
}) 
```

# html - 在由 java 创建的字符串的选择的选项文本中保留空格

> ID：15393191
> 
> 赞同：0
> 
> 时间：2013-03-13T18:09:57.163
> 
> 标签：html

服务器端，我构建了一个字符串列表，这些字符串是 html select multiple 的选项文本。

每个字符串都是四个字符串连接的结果。第一、第二和第三的长度=5。第三个字符串的长度可变，因此我将其长度补全为 19 个带有空格的字符：

```
 StringUtils.rightPad(data.toUpperCase(), 19, " "); 
```

然而，在我的 html 页面中，这些空格被删除了。

我在这个网站和其他网站上寻找过类似的问题，我尝试过  ，\u0020，我尝试过 css 样式的 white-space:pre-wrap;，我尝试了很多东西，但空格不是保存。

任何人都知道如何在没有 javascript 的情况下解决这个问题？仅适用于 html/样式。

谢谢，问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T18:21:27.730

网页中的默认样式是折叠空白，您可以使用`white-space`CSS 中的属性轻松更改：

```
p {
 white-space: pre;
} 
```

值`pre`和`pre-wrap`保留空格，它们之间的区别在于，它们`pre`只会在换行符处换行，而`pre-wrap`将换行在所有空白字符（如常规文本）上。你的问题表明你已经尝试过了，但它没有用，但是我已经测试了这段代码，它对我来说运行良好（使用谷歌浏览器）并且[W3C 参考](http://www.w3schools.com/cssref/pr_text_white-space.asp)说它适用于所有主要浏览器，因此我怀疑这是实施中的错误，再试一次并仔细检查你是否将样式应用于正确的类并且没有特异性问题。

# tfs - TFS 2010 或 TFS 2012 是否提供完整的远程管理？看起来很接近，但不太确定

> ID：15393195
> 
> 赞同：2
> 
> 时间：2013-03-13T18:10:07.777
> 
> 标签：tfs

我一直在查看 TFS 文档和书籍以查找特定实例，其中声明可以对 TFS 进行完全远程管理。看起来某些功能是通过 Web 服务公开的，但这似乎与用户的功能基本相同。看起来 TFS 可以被镜像并复制到多个地方，这*表明*了一种远程管理能力（或正在复制的远程配置设置）。

Codeplex 上甚至还有一个 TFS 服务器管理工​​具（[http://tfsadmin.codeplex.com/releases/view/57795](http://tfsadmin.codeplex.com/releases/view/57795)），但它对于 TFS 2010 来说看起来有点垃圾，而且我不能 100% 确定它管理所有可能的设置。如果 TFS 具有远程管理功能，有人可以确定地为我验证吗？非常感谢您的帮助！

# php - 如何根据 CakePHP 中的 MVC 模式正确使用模型函数？

> ID：15393199
> 
> 赞同：4
> 
> 时间：2013-03-13T18:10:20.623
> 
> 标签：php, cakephp, cakephp-model

我可以**在 Controller 中**执行此操作吗：

```
$this->User->read(null, $id);
$this->User->find('list'); 
```

这是正确的吗？

我是否正确使用 MVC？

这些**简单**的功能可以在控制器中使用吗？或者，我需要在模型中创建这些函数吗？喜欢`Model->getUser()`，并有那个功能使用`Model->read()`。

我知道它是由模型调用的函数，但是，当我想传递一些参数时，函数变大了，例如：

```
$this->User->find('all', array(
    'conditions' => array(
        'User.active' => true,
        'User.group_id' => 3,
        'User.age >=' => 18
    )
)); 
```

我可以**在 Controller 中调用这个函数**，还是需要在 Model 中创建一个自定义函数来调用它？比如…… `$this->User->findSomeCustomFunction($param1, $param2, $param3)`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T20:08:50.843

**TLDR：**

`find()`从 Controller调用 a 是“可以的” ，但**最佳做法是将任何/所有 find() 放入模型**中。

如果您养成将所有`find()`s 放入模型的习惯，从长远来看，这将使您的代码更容易维护。

**说明/示例：**

在这种情况下，作为示例，您可以从一个看似简单的函数开始：

```
//User model
public function getUsers() {
    return $this->find('list');
} 
```

但后来，也许你需要更多类似的东西：

```
//User model
public function getUsers($opts = array()) {
    $defaults = array(
        'findType' => 'all',
        'activeOnly' => true,
    );
    $params = array_merge($defaults, $opts);
    $qOpts = array('conditions' => array());        

    //active only
    if(!empty($params['activeOnly'])) $conditions[$this->alias.'.active'] = 1;

    return $this->find($params['findType'], $qOpts);
} 
```

（如果有很多方法可以让代码变得更好，请原谅——这只是我的想法——它给了你这个想法。）

将所有`find()`s 保存在模型中还可以让您不必在每次想要编写 a`find()`以确定您是否在`find()`其他任何地方使用过类似的控制器时都必须搜索每个控制器。如果您作为一个团队进行编程，那可能是一场噩梦，而且几乎可以保证您会重复代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T18:50:48.827

`Model->find()`从控制器调用是完全可以的。但是，您还需要遵循 DRY（不要重复自己）原则。这基本上意味着“不要到处复制粘贴代码”。

因此，如果您发现需要`Model->find()`从许多 Controller 操作中进行精确调用，最好将其抽象为针对模型的函数调用。所以是的，你的控制器然后会调用`$this->User->findSomeCustomFunction()`.

# python - Windows“打开”python py2exe 应用程序

> ID：15393202
> 
> 赞同：0
> 
> 时间：2013-03-13T18:10:30.303
> 
> 标签：python, python-2.7, py2exe

我想知道 Windows“用...打开文件”功能是如何工作的。或者更确切地说，如果我用python编写一个程序，用py2exe编译一个可执行文件，然后希望能够通过右键单击并在“打开方式”中选择它来打开该程序中的某些文件，该怎么办。

文件是否只是作为参数传递，例如“CMD>C:/myapp.exe 文件”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T18:36:02.550

是的，文件的路径作为参数传入，可以通过`sys.argv[1]`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T17:48:26.797

You can use more functionally [argparse module](http://docs.python.org/3.4/library/argparse.html)

# perl - 如何抑制 Getopt::Std::getopts 发出的警告消息？

> ID：15393205
> 
> 赞同：1
> 
> 时间：2013-03-13T18:10:33.370
> 
> 标签：perl, silent, getopts

我有简短的脚本 test.pl

```
#!/usr/bin/perl
use locale;
use encoding 'utf-8';

use Getopt::Std;

getopts("dei") or print STDERR "TRALALALALA\n"; 
print"@ARGV\n"; 
```

我需要抑制`Unknown option:`getopts 生成的消息，并且只在 stderr 上获取我的 TRALALALALA。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T18:20:18.503

```
{
    local $SIG{__WARN__} = sub { };  # Supress warnings
    getopts("dei")
        or print STDERR "TRALALALALA\n";
} 
```

或者您甚至可以在警告处理程序中嵌入“TRALALALALA”：

```
{
    local $SIG{__WARN__} = sub { print STDERR "TRALALALALA\n" };
    getopts("dei");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T18:35:13.387

您还可以将其本地化`*::STDERR`并打开到块中的缓冲区，如下所示：

```
@ARGV = qw(-i -a -g);
{   open( local *STDERR, '>', \(my $stderr)) 
        or warn( 'Could not open to string!' )
        ;
    getopts( 'ig' );
    say '$stderr=' . $stderr;
}

print STDERR 'STDERR => out'; 
```

# android - 在android画布中绘制一条带箭头的曲线

> ID：15393206
> 
> 赞同：2
> 
> 时间：2013-03-13T18:10:33.513
> 
> 标签：android, android-canvas

像这样从 point1(x1,y1) 到 point2(x2,y2) 绘制一条带箭头的曲线 ![在此处输入图像描述](../Images/f8c76358dce83932e3abd66a86928b95.png)

我正在 android canvas 中开发一个应用程序。自动机之类的应用程序，我在画一条末端带有箭头的曲线时遇到了麻烦。指向下一个圆圈。

你能给我一个代码或建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T04:47:44.550

我认为您需要的是混合绘制路径和线条图。在你的 onDraw 中声明这个方法：

```
 private void drawOvalAndArrow(Canvas canvas){

    Paint circlePaint = new Paint();
    circlePaint.setStyle(Paint.Style.FILL_AND_STROKE);
    circlePaint.setAntiAlias(true);
    circlePaint.setStrokeWidth(2);
    circlePaint.setColor(Color.CYAN);

    float centerWidth = canvas.getWidth()/2; //get center x of display
    float centerHeight = canvas.getHeight()/2; //get center y of display
    float circleRadius = 20; //set radius 
    float circleDistance = 200; //set distance between both circles

    //draw circles
    canvas.drawCircle(centerWidth, centerHeight, circleRadius, circlePaint);
    canvas.drawCircle(centerWidth+circleDistance, centerHeight, circleRadius, circlePaint);

    //to draw an arrow, just lines needed, so style is only STROKE
    circlePaint.setStyle(Paint.Style.STROKE);       
    circlePaint.setColor(Color.RED);

    //create a path to draw on
    Path arrowPath = new Path();

    //create an invisible oval. the oval is for "behind the scenes" ,to set the path´
    //area. Imagine this is an egg behind your circles. the circles are in the middle of this egg
    final RectF arrowOval = new RectF();
    arrowOval.set(centerWidth, 
            centerHeight-80, 
            centerWidth + circleDistance, 
            centerHeight+80);

    //add the oval to path
    arrowPath.addArc(arrowOval,-180,180);

    //draw path on canvas
    canvas.drawPath(arrowPath, circlePaint);

    //draw arrowhead on path start
     arrowPath.moveTo(centerWidth,centerHeight ); //move to the center of first circle
     arrowPath.lineTo(centerWidth-circleRadius, centerHeight-circleRadius);//draw the first arrowhead line to the left
     arrowPath.moveTo(centerWidth,centerHeight );//move back to the center
     arrowPath.lineTo(centerWidth+circleRadius, centerHeight-circleRadius);//draw the next arrowhead line to the right

     //same as above on path end
     arrowPath.moveTo(centerWidth+circleDistance,centerHeight );
     arrowPath.lineTo((centerWidth+circleDistance)-circleRadius, centerHeight-circleRadius);
     arrowPath.moveTo(centerWidth+circleDistance,centerHeight );
     arrowPath.lineTo((centerWidth+circleDistance)+circleRadius, centerHeight-circleRadius);

     //draw the path
     canvas.drawPath(arrowPath,circlePaint);

} 
```

这只是一个糟糕的例子，但它应该显示从哪里开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-19T10:14:42.793

我知道我应该发表评论，但评论中的代码很难阅读，所以我提出了另一个答案。**Opiatefuchs**的答案基本上是正确的。但是如果你想测试他的代码，你应该注意一件事。

```
float centerWidth = canvas.getWidth()/2; //get center x of display
float centerHeight = canvas.getHeight()/2; //get center y of display 
```

centerWidth 和 centerHeight 应该像下面这样获得，否则不会在您的屏幕上绘制任何内容。并且 circleDistance = 200 对于普通手机的屏幕来说有点大（对于我的设备三星 i9300，200 太大，第二个圆圈位于屏幕范围之外。例如，将其更改为较小的值 80。）

```
 @Override
protected void onSizeChanged(int w, int h, int oldw, int oldh) {
    super.onSizeChanged(w, h, oldw, oldh);
    centerWidth = w / 2;
    centerHeight = h / 2;
} 
```

截图。

![在此处输入图像描述](../Images/65d876d795612e30bd7b810a2b7f851c.png)

# asp.net - Chrome 在文件下载成功时显示“已取消”（200 状态）

> ID：15393210
> 
> 赞同：17
> 
> 时间：2013-03-13T18:10:37.997
> 
> 标签：asp.net, asp.net-mvc, download

不确定这是否是一个实际问题，但我正在 ASP.NET 中写出一个文件，即使该文件总是成功通过，在 Chrome 的开发人员工具的网络选项卡中，我总是看到红色的行，标记为“已取消”。

我已经尝试了很多方法——为了简单起见，我尝试使用一个简单的文本文件，但对于 PDF 和其他文件类型也是如此。

WebForms：我已经尝试了以下多种组合：

```
Response.Clear();
// and/or/neither
Response.ClearHeaders();

// with and without this
Response.Buffer = true;

Response.Charset = "";
// or/neither
Response.Charset = "utf-8";

// application/pdf for PDF, also tried application/octet-stream
Response.ContentType = "text/plain";

// with and without this
Response.AddHeader("Content-Length", bytes.Length.ToString());

Response.AddHeader("Content-Disposition", "attachment; filename=1.txt");

// bytes is the UTF8 bytes for a string or the PDF contents
new MemoryStream(bytes).WriteTo(Response.OutputStream);
// or
Response.Write("12345");

// any combination of the following 3, or none at all
Response.Flush();
Response.Close();
Response.End(); 
```

MVC（2和3，没试过4）：

```
byte[] fileContents = Encoding.UTF8.GetBytes("12345");
return File(fileContents, "text/plain", "1.txt");
// or
return File(@"C:\temp\1.txt", "text/plain", "1.txt"); 
```

它总是一样的 - 文件通过就好了，但是开发工具向我展示了这一点： ![开发工具网络输出](../Images/637fb5c41c8f51c429bb216fe9cdd9e7.png)

我正在考虑忽略它并继续生活，但红色只是困扰着我。知道我该如何处理吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-13T18:13:49.637

这只是意味着 chrome 没有离开页面。行为是设计使然。别担心。

# java - Eclipse Android 中的“java 堆大小”错误？

> ID：15393215
> 
> 赞同：2
> 
> 时间：2013-03-13T18:11:01.780
> 
> 标签：java, android, eclipse, heap-size, graphical-layout-editor

当我在工作 5-10 分钟后使用图形布局编辑器时，我收到错误“java heap size”。我试图增加 eclipse.ini 中的大小： -Xms512m -Xmx1024m 但它没有帮助。请告诉我谁遇到了这个问题以及如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T18:18:06.273

只有当您更改以下内容时，您的 eclipse.ini 设置才会生效：

运行 -> 外部工具 -> 外部工具

配置。转到您使用的配置，在 jre 选项卡 -select 选项下

在工作区中的相同 JRE 中运行。

有关该主题的更多信息，请查看此链接。[Eclipse 的最佳 JVM 设置是什么？](https://stackoverflow.com/questions/142357/what-are-the-best-jvm-settings-for-eclipse)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-19T13:04:26.823

如果有时您收到此错误而 smetimes 没有，则可能会发生这种情况，因为 RAM 正被其他需要大内存的进程使用。关闭所有其他应用程序/进程并尝试启动/加载 Eclipse。有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T18:25:22.217

You can set this on the command line before running eclipse so that eclipse has more mem: [How do I set Java's min and max heap size through environment variables?](https://stackoverflow.com/questions/417152/how-do-i-set-javas-min-and-max-heap-size-through-environment-variables)

# python - 创建多维零点 Python

> ID：15393216
> 
> 赞同：9
> 
> 时间：2013-03-13T18:11:03.223
> 
> 标签：python, arrays, multidimensional-array, numpy

我需要制作一个多维零数组。

对于两个 (D=2) 或三个 (D=3) 维度，这很容易，我会使用：

```
a = numpy.zeros(shape=(n,n)) 
```

或者

```
a = numpy.zeros(shape=(n,n,n)) 
```

对于更高的 D，我如何制作长度为 n 的数组？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-13T18:13:20.397

您可以将元组乘以`(n,)`所需的维数。例如：

```
>>> import numpy as np
>>> N=2
>>> np.zeros((N,)*1)
array([ 0.,  0.])
>>> np.zeros((N,)*2)
array([[ 0.,  0.],
       [ 0.,  0.]])
>>> np.zeros((N,)*3)
array([[[ 0.,  0.],
        [ 0.,  0.]],

       [[ 0.,  0.],
        [ 0.,  0.]]]) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-13T18:13:16.227

```
>>> sh = (10, 10, 10, 10)
>>> z1 = zeros(10000).reshape(*sh)
>>> z1.shape
(10, 10, 10, 10) 
```

编辑：虽然上面没有错，但这只是过度。@mgilson 的答案更好。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-13T18:14:48.100

```
In [4]: import numpy

In [5]: n = 2

In [6]: d = 4

In [7]: a = numpy.zeros(shape=[n]*d)

In [8]: a
Out[8]: 
array([[[[ 0.,  0.],
         [ 0.,  0.]],

        [[ 0.,  0.],
         [ 0.,  0.]]],

       [[[ 0.,  0.],
         [ 0.,  0.]],

        [[ 0.,  0.],
         [ 0.,  0.]]]]) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-11-09T21:24:20.080

您可以使用方括号制作多维零数组

```
array_4D = np.zeros([3,3,3,3]) 
```

# c++ - 错误 C3861：“_tcsdup”：找不到标识符

> ID：15393218
> 
> 赞同：8
> 
> 时间：2013-03-13T18:11:11.863
> 
> 标签：c++, visual-studio-2008, fork, createprocess, lptstr

这是我第一次，我想使用 windows [CreateProcess](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682425%28v=vs.85%29.aspx)函数创建一个并行进程。根据 MSDN 上的示例，我创建了一个像这样的[`LPTSTR`“（非常量）TCHAR 字符串”](https://stackoverflow.com/questions/321413/lpcstr-lpctstr-and-lptstr) [命令行](http://en.wikipedia.org/wiki/Command-line_interface)参数

```
LPTSTR szCmdline[] = _tcsdup(TEXT("\C:\\MyProgram_linux_1.1\\MyProgram.exe") ); 
```

LPTSTR 和其他[字符和字符串类型在这里讨论](http://www.codeproject.com/Articles/76252/What-are-TCHAR-WCHAR-LPSTR-LPWSTR-LPCTSTR-etc)

`CreateProcess`命令行参数像这样传递给

```
if (!CreateProcess(NULL, szCmdline, /*...*/) ) cout << "ERROR: cannot start CreateProcess" << endl; 
```

并且这些标题存在

```
#include <stdio.h>
#include <stdlib.h>
#include <windows.h>
#include <strsafe.h>
#include <direct.h> 
```

编译时出现以下错误：

```
error C3861: '_tcsdup': identifier not found 
```

搜索此错误发现[了相同的错误，但解决方案特定于使用 .NET 框架](http://social.msdn.microsoft.com/Forums/en-US/vclanguage/thread/db2b883d-6f95-4ca8-8219-648db3b07b18)，而不是解释`error C3861: '_tcsdup'`

不确定它是否相关，但也有`error C2059: syntax error : ')'`一个`if (!CreateProcess(NULL, szCmdline, /*...*/) ) cout << "ERROR: cannot start CreateProcess" << endl;`

这个错误是如何解决的？而且，这是怎么回事？

此外，我将[`CreateProcess`用作学习 Linux 功能的学习步骤`fork()`](https://stackoverflow.com/questions/985281/what-is-the-closest-thing-windows-has-to-fork)- Visual Studio 界面对我来说更易于使用，一旦调试并工作，我将更改为 g++ 界面并`fork()`从那里更改并调试 - 所以如果可能，导致 的解决方案`fork()`是最有益的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-13T18:12:03.737

添加以下内容：

```
#include <tchar.h> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T18:45:35.117

`_tcsdup`是一个宏，根据您的 Unicode 设置映射到实现函数。由于您没有包含头文件 (tchar.h)，编译器认为它是一个符号并发出错误代码。

根据实际定位设置 _tcsdump 映射到其中之一：

*   _strdup
*   _mbsdup
*   _wcsdup

[http://msdn.microsoft.com/en-us/library/y471khhc(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/y471khhc(v=vs.110).aspx)

# php - 从 HTML 标记中删除空格

> ID：15393222
> 
> 赞同：0
> 
> 时间：2013-03-13T18:11:34.860
> 
> 标签：php, regex, expression

我正在使用谷歌翻译 API。我正在发送 html 字符串。翻译工作正常，但标签被弄乱了。

例如：

```
<b>Hello World</b> 
```

变成

```
<b>Hello World</ b> 
```

有时标签返回如下：

```
<b>Hello World< / b > 
```

我在 PHP 中的努力（不起作用）

```
preg_replace('~<(\s*)/(.*)(\s*)>~is', '</$2>', $string); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T18:14:57.557

你可以使用：

```
$string = preg_replace(',<\s*/\s*(\w+)\s*>,s', '</$1>', $string); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T18:16:48.893

请注意，正则表达式将解决这个确切的问题。但只能防止标签中的空格。不会保护您免受进一步的 HTML 问题的影响。

到目前为止，这只会起作用，但您可以尝试使用 HTML 解析器，例如[Simple HTML DOM](http://simplehtmldom.sourceforge.net/)，它对无效 HTML 进行了一些处理。然后你可以从库中清理出 HTML。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T18:14:55.380

尝试：

```
preg_replace('/<\s*\/\s*([^\s]*?)\s*>/', '</\\1>', $string); 
```

现场演示：[http ://regexr.com?3444s](http://regexr.com?3444s)

# iphone - iOS 6 的 didReceiveMemoryWarning 是如何工作的

> ID：15393226
> 
> 赞同：1
> 
> 时间：2013-03-13T18:11:38.383
> 
> 标签：iphone, ios, ios6, didreceivememorywarning

我不知道太多信息，`didReceiveMemoryWarning`但考虑到我在其他帖子上阅读并在文档中查找的内容，我发现在 iOS 5 的情况下，任何不可见的视图控制器都会转储其视图，但如果iOS 6文档（[文档](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/ViewLoadingandUnloading/ViewLoadingandUnloading.html)说默认实现“退出”，我不知道我应该如何理解。

我一直在使用模拟低内存警告的 iOS 模拟器进行一些测试，我很感激（在 iOS 5 上）如果我在堆栈的第二个视图中并且我模拟了低内存警告，没有任何反应当前视图，但是如果我返回上一个视图，并且按预期再次调用 viewDidLoad，但是在 iOS 6 的情况下，没有发布以前的视图，我的意思是什么，这是我的问题：什么如果未发布视图，在 iOS 6 上的后果是`didReceiveMemoryWarning`什么，我是否应该担心其他我不考虑的事情？即使没有发布视图，也可以释放类变量（例如 NSMutableArray）之类的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T18:39:41.913

您只有更多的控制权`views are no longer purged under low-memory conditions and so this method [viewDidUnload] is never called`（不推荐使用的[UIViewController 方法](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/DeprecationAppendix/AppendixADeprecatedAPI.html)）。

如果视图构建起来很昂贵但又不那么需要内存，那么您可能不会释放它。据我所知，iOs 不会在内存警告的情况下发布任何内容，决定完全取决于您、使用`didReceiveMemoryWarning`或其他通知技术（请参阅[观察内存不足警告](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/PerformanceTuning/PerformanceTuning.html)部分）。

*WWDC 2012 Session 236: The Evolution of View Controllers on iOS*可能会让你感兴趣。

# php - PHP：我的页面需要很长时间才能加载但不会超时。一次查询太多还是可以优化我的代码？

> ID：15393228
> 
> 赞同：1
> 
> 时间：2013-03-13T18:11:42.733
> 
> 标签：php, mysql, transactions, pdo, commit

这是我用来访问数据库的函数，理论上可能在一个 do while 循环中上升 10-20 次，尽管现在我删除了循环，所以它一次只能执行一个数据库查询。这是否可以进一步优化，或者这是如何正确完成事务和提交？另外，我不知道 $db->rollBack() 实际上做了什么，我只是在 stackoverflow 上看到的

```
<?php
  function util_db_access($statement, $array) {
    $db = new PDO('mysql:host=localhost;dbname=db;charset=UTF8', 'user', 'pass');

    try {
      //echo "1";
      $db->beginTransaction();
      //echo "2";
      $stmt = $db->prepare($statement);
      //echo "3"; 
      if($stmt->execute($array)) {
        $db->commit();
        //echo "4";
        if($rows = $stmt->fetchAll(PDO::FETCH_ASSOC)) {
          //echo "5";
          if($stmt->rowCount() < 2) {
            $rows = $rows[0]; 
          }
          return $rows;
        } else {
          //echo "6.1";
          //$db->commit();
          return true;
        }
      } else {
        //echo "6.2";
        //$db->commit();
        return false;
      }
    } catch(PDOException $e) {
      $db->rollBack();
      //log, we are gonna keep a log eventually.. right?
      return -1;
    }
  }
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T18:28:21.033

This thing can be optimized very quickly. For starters you are creating a new connection to the database with every function call. I don't know for sure if the connection is closed when the PDO object goes out of scope but nevertheless it's bad design.

* * *

**UPDATE**

PHP will close the connection to the database when the PDO object is destroyed. Reference [http://php.net/manual/en/pdo.connections.php](http://php.net/manual/en/pdo.connections.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T18:29:03.030

$db->rollBack() make a roll back for the transaction. If you don't know what transactions are there is no point for you to use them, because it creates an unnecessary overhead for the server.

commit() permanently writes the data from the query, rollback() undo everything to the state where you called beginTransaction()

Transactions are to be used when its crucial that changes in more then one place happens simultaneously, imagine a transaction of money between two accounts. On simple selects there is absolutely no need for transactions.

(I'm also sceptic to how you use try/catch)

However... If you run one query directly on the db server, is it also slow? Do you open/close the db connection between each call? (if so -(yes)- don't). What is the network relationship between the http/db server?

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T18:16:49.160

尝试使用分析器来确定您的瓶颈在哪里 - xdebug 中包含一个。鉴于此代码的简单性，它可​​能是查询本身 - 尝试使用 mysql cli 客户端或 MySQL Workbench 独立运行查询，然后查看您返回的时间。如果是查询很慢，你可以使用 EXPLAIN 和 MySQL 手册中丰富的优化部分来改进它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T18:31:59.993

我忍不住重写你的函数，删除无用的部分并添加必要的部分

```
function util_db_access($type, $statement, $array) {
    static $db;

    if (empty($db)) {
        $dsn = 'mysql:host=localhost;dbname=db;charset=UTF8';
        $opt = array(
            PDO::ATTR_ERRMODE            => PDO::ERRMODE_EXCEPTION,
            PDO::ATTR_DEFAULT_FETCH_MODE => PDO::FETCH_ASSOC
        );
        $db = new PDO($dsn, 'user', 'pass', $opt);
    }

    $stmt = $db->prepare($statement);
    $stmt->execute($array);
    if($type == 'all') {
        return $stmt->fetchAll();
    }
    if($type == 'row') {
        return $stmt->fetch();
    }
    if($type == 'one') {
        return $stmt->fetchColumn();
    }
    if($type == 'id') {
        return $db->lastInsertId();
    }
    if($type == 'numrows') {
        return $stmt->rowCount();
    }
} 
```

这个新版本很可能也不会受到任何延迟

现在您可以毫无延迟或不便地使用这个强大的功能：

```
$user = util_db_access("row", "SELECT * FROM users WHERE id = ?", array($someId));
$id   = util_db_access("id", "INSERT INTO users SET name=?", array($name)); 
```

等等

但是，为此目的仅具有一个功能是很不方便的，我希望您能尽快将它纳入*课堂*。您可以将我的[Safemysql](https://github.com/colshrapnel/safemysql)课程作为一些想法的来源。

# android - 着色器在平板电脑上产生错误的结果

> ID：15393232
> 
> 赞同：1
> 
> 时间：2013-03-13T18:11:59.337
> 
> 标签：android, opengl-es, shader

我只使用着色器几天，并编写了一个简单的边缘检测着色器，添加了阴影和内阴影。它在我的galaxy s2 和iphone 4 上效果很好，但是galaxy tab 和ipad2 在边缘的两侧只产生了一个非常薄且看起来很粗糙的阴影。我花了几个小时试图弄清楚为什么但没有快乐，请帮忙！如果我在模拟器中模拟一个ipad2分辨率，效果是正确的。

着色器在所有设备（640x480 像素）上使用相同大小的屏幕外缓冲区。

```
vertex shader:
{
    attribute highp vec4    inVert; //vertex stream
    uniform highp mat4   inPMVMat; //transform to projected space
    attribute mediump vec2 inUV0;
    attribute lowp vec4 inCol;
    uniform mediump vec2 inUVOffset;
            uniform mediump vec2 inUVScale;
    varying mediump vec2 vTexCoord;
    varying mediump float FragColor;
    void main(void)
    {
        gl_Position = inPMVMat * inVert;//set vertex position in projected space
        vTexCoord = inUV0*inUVScale;// + inUVOffset;//pass texture to fragment shader
        FragColor = inCol.a;
    }
}

fragment shader:
{
    uniform sampler2D myTexture;
    varying mediump vec2 vTexCoord;
    varying mediump float FragColor;
    lowp float MaxDistance, Distance;
    lowp float Shift;
    void main(void)
    {
        gl_FragColor = texture2D(myTexture, vTexCoord);
        mediump vec2 PixelSize = vec2(1.0 / 640.0, 1.0 / 480.0);
        mediump vec2 Direction = vec2(PixelSize.x*0.5,PixelSize.y*0.5);

        if(gl_FragColor.a >= 0.5)
        {
            //inner shadow
            MaxDistance = 15.0;
        } else {
            //drop shadow
            MaxDistance = 12.0;
            Direction = -Direction;
        }

        mediump vec2 Position = vTexCoord;
        mediump float c;
        for(Distance = MaxDistance; Distance > 0.0;Distance -= 1.0)
        {
            Position += Direction;
            c = texture2D(myTexture,Position).a;
            if(c < 0.5)
            {
                if(gl_FragColor.a >= 0.5)
                {
                    //found transparent edge - do inner shadow
                    Shift = 1.0-((0.5/MaxDistance)*Distance);
                    gl_FragColor.r *= Shift;
                    gl_FragColor.g *= Shift;
                    gl_FragColor.b *= Shift;
                    break;
                }
            } else {
                if(gl_FragColor.a < 0.5)
                {
                    //found opaque edge - do dropshadow
                    gl_FragColor.a = ((0.8/MaxDistance)*Distance);
                    break;
                }
            }
        }
        gl_FragColor.a *= FragColor;
    }
} 
```

图片：

![GS2](../Images/63b59a755e56fd08271d8a0d1379b327.png)

![标签](../Images/eaeffa0348acc000d2b4f55fa816c1a5.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T18:35:39.093

经过大量的实验，我最终找到了解决方案。lowp MaxDistance、Distance 和 Shift 变量是罪魁祸首——在更改为 mediump 后，它在所有设备上都能正常工作。我猜设备之间的精度存在一些差异

# c++ - 目标 C 错误：类实现中的 C 样式方法？

> ID：15393233
> 
> 赞同：0
> 
> 时间：2013-03-13T18:12:03.593
> 
> 标签：c++, objective-c, xcode, function

`Functions.h`我创建了一个类并在标题中有一些外部方法（认为这就是问题所在）。无论如何，每当我尝试在类实现文件中使用任何类型的 C 风格函数时；即使是空白的，我也会收到编译器/喜欢的错误。我对此很陌生，不明白问题出在哪里。我在想我不能使用该`.h`文件，但我可以在类文件中使用全局变量和指令。

我应该在哪里声明我的外部函数？在什么样的文件中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T18:26:04.253

我的猜测是您在头文件中完全定义了函数（包括实现），并从多个源文件中包含了它；并且您忘记描述的错误说明了“多个定义”或“重复符号”：

```
// Header file
void some_function() {
    // do some stuff
} 
```

如果是这种情况，您需要*将*定义移动到源文件中，只在标题中留下声明，因此它们只有一个定义：

```
// Header file
void some_function();

// Source file
void some_function() {
    // do some stuff
} 
```

*或*声明定义`inline`，这允许它们包含在多个源文件中：

```
// Header file
inline void some_function() {
    // do some stuff
} 
```

如果这不是问题，请发布一些示例代码和错误消息，这样我们就不必猜测发生了什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T18:19:15.437

你有`c++`一个标签。也许这些函数是 C++ 函数，但您正试图从 Obj-C 文件中获取它们？如果是这种情况，您要么需要将它们转换为 C 函数，要么需要使用 Obj-C++（它具有`.mm`扩展名而不是`.m`）。

# asp.net - 如何跟踪占位符以找到其控制器？

> ID：15393238
> 
> 赞同：0
> 
> 时间：2013-03-13T18:12:12.097
> 
> 标签：asp.net, dotnetnuke, asp.net-placeholder

我正在尝试清理注册表。前体使调整此表单的大多数部分变得容易，但是当我进入模板的地址部分时，我发现了这个奇怪的工件：

```
<table>
    <tr>
        <td>
            <asp:PlaceHolder ID="phAddress" runat="server"></asp:PlaceHolder>          
        </td>
    </tr>
</table> 
```

该站点的目录系统非常广泛，但我很幸运能够使用文件内容的文本搜索来跟踪内容。然而，用这个搜索“phAddress”让我无处可去。

![在此处输入图像描述](../Images/f51f07fe456d4d45e7b4aa95ef8fe480.png)

=================================================

![在此处输入图像描述](../Images/43da87824627e138b4cdb9552b69e5cd.png)

=================================================

![在此处输入图像描述](../Images/29e833af86fce538389b9373b69b7511.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T18:19:24.583

如果没有看到更多的代码库，几乎不可能弄清楚正在做什么。通常， a`PlaceHolder`就是这样 - 将在服务器端动态生成的控件的占位符。尝试在`Ctrl+F`代码隐藏文件中执行“phAddress”。如果您不知道那是什么，请查看 asp 文件的最顶部，您应该会看到如下内容：

`<%@ Page Title="" Language="C#" MasterPageFile="~/Site.Master" AutoEventWireup="true" CodeBehind="mypage.aspx.cs" Inherits="myprogject.mypage" %>`

`CodeBehind`是类名，`Inherits=`是它所在的目录路径。

在 VS 2010 中，您正在寻找以下内容：

![耶游乐场](../Images/2b6e88ad3b66acde74ad5ba8b0bb344d.png)

这是一个 C# 文件，但 VB 的结构应该相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T18:18:50.587

按`CTRL`+ `SHIFT`+`F`并搜索`phAddress`选择为“整个解决方案”的选项的文本。

作为其“PlaceHolder”，有可能从“代码隐藏（aspx.cs 或 aspx.vb）”页面添加“动态控件”。

# openssl - OpenSSL 命令行 secp384r1 / SHA-256 数字签名

> ID：15393242
> 
> 赞同：5
> 
> 时间：2013-03-13T18:12:20.927
> 
> 标签：openssl, elliptic-curve

是否可以从 OpenSSL 命令行使用 secp384r1 / SHA-256 生成数字签名（我使用的是 1.0.1c 版本）？经过一些实验后，我可以使用 SHA-1 生成签名：

```
openssl dgst -sign ec-key.pem -ecdsa-with-SHA1 -binary < test.bin > sig.bin 
```

但

```
openssl dgst -sign ec-key.pem -ecdsa-with-SHA256 -binary < test.bin > sig.bin 
```

只是给了我一个已知的“-ecdsa-with-SHA256”选项？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T02:00:23.673

尝试使用`-sha256`代替`-ecdsa-with-SHA256`，并使用 EC 密钥对其进行签名。

# playframework - 即使结果类型已转换为结果，也无法从 play.api.mvc.AsyncResult 类型的结果中提取状态代码

> ID：15393245
> 
> 赞同：1
> 
> 时间：2013-03-13T18:12:30.340
> 
> 标签：playframework, playframework-2.0

我正在使用 Play 2.0.3 (Java) 并编写了以下代码。由于我的演员是异步的，我尝试在测试时将 AsyncResult 转换为 Result 类型，方法如下：

```
 Result result = new Result() { 
        @Override 
        public play.api.mvc.Result getWrappedResult() {
            return ((play.api.mvc.AsyncResult) callAction(controllers.routes.ref.Dashboard.index(),
                    authenticatedFakeRequest(lenderUser.getId())).getWrappedResult()).result().await().get();
        }
    };

    assertThat(Integer.valueOf(status(result)), is(Integer.valueOf(OK))); 
```

该代码在我编写的另一组测试中确实有效，但是当我在这种特殊情况下使用它时，它会引发以下运行时异常。我完全不知道为什么它适用于其他测试而不是在这里。在转到上述语句之前，我已经检查了结果的实例类型是 Result 类型而不是 AsyncResult。我很感激这方面的帮助，因为我是 Play 新手，无法在其 google 群组上找到答案。

```
java.lang.RuntimeException: Cannot extract the Status code from a result of type play.api.mvc.AsyncResult
at scala.sys.package$.error(package.scala:27)
at play.core.j.JavaResultExtractor$.getStatus(JavaResults.scala:38)
at play.core.j.JavaResultExtractor.getStatus(JavaResults.scala)
at play.test.Helpers.status(Helpers.java:122)
at functional.controllers.LenderDashboardTest.dashboardPageHasNoControlsToAccessOtherTeamMembersInboxes(LenderDashboardTest.java:97) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T15:46:15.733

我刚刚遇到了和你一样的问题，看来将 Play 更新到 2.1 已经为我解决了。希望这会有所帮助

# android - AsyncTask xml解析器如何？

> ID：15393247
> 
> 赞同：0
> 
> 时间：2013-03-13T18:12:34.410
> 
> 标签：android, xml-parsing, android-listfragment

如何编辑代码以使用 AsyncTask。ListFragment 的代码使用。我尝试在 OnCreateView 应用程序上使用此代码，结果发现我使用 AsyncTask。用于从 url 解析 xml。我使用自定义列表视图。网址=

代码在这里

```
import java.util.ArrayList;
import java.util.HashMap;

import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.NodeList;

import android.app.ListActivity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ListAdapter;
import android.widget.ListView;
import android.widget.SimpleAdapter;
import android.widget.TextView;

public class AndroidXMLParsingActivity extends ListActivity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        ArrayList<HashMap<String, String>> menuItems = new ArrayList<HashMap<String, String>>();

        final XMLParser parser = new XMLParser();
        String xml = parser.getXmlFromUrl(URL); // getting XML
        Document doc = parser.getDomElement(xml); // getting DOM element

        NodeList nl = doc.getElementsByTagName(KEY_ITEM);
        // looping through all item nodes <item>
        for (int i = 0; i < nl.getLength(); i++) {
            // creating new HashMap
            HashMap<String, String> map = new HashMap<String, String>();
            Element e = (Element) nl.item(i);
            // adding each child node to HashMap key => value

            map.put(KEY_NAME, parser.getValue(e, KEY_NAME));
            map.put(KEY_COST, "Datum: " + parser.getValue(e, KEY_COST));
            map.put(KEY_DESC, parser.getValue(e, KEY_DESC));
            map.put(KEY_LINK, parser.getValue(e, KEY_LINK));
            map.put(KEY_LINK1, parser.getValue(e, KEY_LINK1));

            // adding HashList to ArrayList
            menuItems.add(map);

        }

        // Adding menuItems to ListView
        ListAdapter adapter = new SimpleAdapter(this, menuItems,
                R.layout.list_row,
                new String[] { KEY_NAME, KEY_DESC, KEY_COST }, new int[] {
                        R.id.naslov, R.id.novost, R.id.datum });

        setListAdapter(adapter);

        // selecting single ListView item
        ListView lv = getListView();

        lv.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {
                // getting values from selected ListItem
                String name = ((TextView) view.findViewById(R.id.naslov)).getText().toString();
                String cost = ((TextView) view.findViewById(R.id.datum)).getText().toString();
                String description = ((TextView) view.findViewById(R.id.novost)).getText().toString();
                String link=KEY_LINK;
                // Starting new intent
                Intent in = new Intent(getApplicationContext(), SingleMenuItemActivity.class);
                in.putExtra(KEY_NAME, name);
                in.putExtra(KEY_COST, cost);
                in.putExtra(KEY_DESC, description);
                in.putExtra(KEY_LINK, link);
                in.putExtra("link1", KEY_LINK1);
                startActivity(in);

            }
        });
    }
} 
```

# r - 从R中的行总和中省略inf

> ID：15393251
> 
> 赞同：22
> 
> 时间：2013-03-13T18:12:42.370
> 
> 标签：r, rowsum

所以我试图对矩阵的行求和，其中有 inf。我如何对行求和，省略inf？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-03-13T18:26:54.063

将您的矩阵乘以 的结果`is.finite(m)`并使用 调用`rowSums`乘积`na.rm=TRUE`。这有效，因为`Inf*0`is `NaN`。

```
m <- matrix(c(1:3,Inf,4,Inf,5:6),4,2)
rowSums(m*is.finite(m),na.rm=TRUE) 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-03-13T18:15:10.730

```
A[is.infinite(A)]<-NA
rowSums(A,na.rm=TRUE) 
```

一些基准比较：

```
library(microbenchmark)

rowSumsMethod<-function(A){
 A[is.infinite(A)]<-NA
 rowSums(A,na.rm=TRUE)
}
applyMethod<-function(A){
 apply( A , 1 , function(x){ sum(x[!is.infinite(x)])})
}

rowSumsMethod2<-function(m){
  rowSums(m*is.finite(m),na.rm=TRUE) 
}

rowSumsMethod0<-function(A){
 A[is.infinite(A)]<-0
 rowSums(A)
}

A1 <- matrix(sample(c(1:5, Inf), 50, TRUE), ncol=5)
A2 <- matrix(sample(c(1:5, Inf), 5000, TRUE), ncol=5)
microbenchmark(rowSumsMethod(A1),rowSumsMethod(A2),
               rowSumsMethod0(A1),rowSumsMethod0(A2),
               rowSumsMethod2(A1),rowSumsMethod2(A2),
               applyMethod(A1),applyMethod(A2))

Unit: microseconds
               expr      min        lq    median        uq      max neval
  rowSumsMethod(A1)   13.063   14.9285   16.7950   19.3605 1198.450   100
  rowSumsMethod(A2)  212.726  220.8905  226.7220  240.7165  307.427   100
 rowSumsMethod0(A1)   11.663   13.9960   15.3950   18.1940  112.894   100
 rowSumsMethod0(A2)  103.098  109.6290  114.0610  122.9240  159.545   100
 rowSumsMethod2(A1)    8.864   11.6630   12.5960   14.6955   49.450   100
 rowSumsMethod2(A2)   57.380   60.1790   63.4450   67.4100   81.172   100
    applyMethod(A1)   78.839   84.4380   92.1355   99.8330  181.005   100
    applyMethod(A2) 3996.543 4221.8645 4338.0235 4552.3825 6124.735   100 
```

所以约书亚的方法赢了！而且 apply 方法显然比其他两种方法慢（当然相对而言）。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-03-13T18:22:46.727

我会使用`apply`and`is.infinite`来避免用@Hemmo的答案替换`Inf`值。`NA`

```
> set.seed(1)
> Mat <- matrix(sample(c(1:5, Inf), 50, TRUE), ncol=5)
> Mat # this is an example
      [,1] [,2] [,3] [,4] [,5]
 [1,]    2    2  Inf    3    5
 [2,]    3    2    2    4    4
 [3,]    4    5    4    3    5
 [4,]  Inf    3    1    2    4
 [5,]    2    5    2    5    4
 [6,]  Inf    3    3    5    5
 [7,]  Inf    5    1    5    1
 [8,]    4  Inf    3    1    3
 [9,]    4    3  Inf    5    5
[10,]    1    5    3    3    5
> apply(Mat, 1, function(x) sum(x[!is.infinite(x)]))
 [1] 12 15 21 10 18 16 12 11 17 17 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-03-13T18:14:51.180

尝试这个...

```
m <- c( 1 ,2 , 3 , Inf , 4 , Inf ,5 )
sum(m[!is.infinite(m)]) 
```

或者

```
m <- matrix( sample( c(1:10 , Inf) , 100 , rep = TRUE ) , nrow = 10 )
sums <- apply( m , 1 , FUN = function(x){ sum(x[!is.infinite(x)])})

> m
      [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10]
 [1,]    8    9    7  Inf    9    2    2    6    1   Inf
 [2,]    8    7    4    5    9    5    8    4    7    10
 [3,]    7    9    3    4    7    3    3    6    9     4
 [4,]    7  Inf    2    6    4    8    3    1    9     9
 [5,]    4  Inf    7    5    9    5    3    5    9     9
 [6,]    7    3    7  Inf    7    3    7    3    7     1
 [7,]    5    7    2    1  Inf    1    9    8    1     5
 [8,]    4  Inf   10  Inf    8   10    4    9    7     2
 [9,]   10    7    9    7    2  Inf    4  Inf    4     6
[10,]    9    4    6    3    9    6    6    5    1     8

> sums
 [1] 44 67 55 49 56 45 39 54 49 57 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-03-13T18:48:10.597

这是一种“非应用”且非破坏性的方法：

```
rowSums( matrix(match(A, A[is.finite(A)]), nrow(A)), na.rm=TRUE)
[1] 2 4 
```

尽管它相当有效，但它不如 Johsua 的乘法方法快。

# javascript - 开始 Javascript：如何在 javascript 块中运行多个函数

> ID：15393259
> 
> 赞同：0
> 
> 时间：2013-03-13T18:13:07.483
> 
> 标签：javascript, jquery, ajax, qunit

我有以下代码块：

```
(function() {
    QUnit.config.testTimeout = 10000;

    var stringformat = QUnit.stringformat;

    module('Web API GET Result has expected shape');

    asyncTest('HomeData should return an array of Sets with their info as well as cards with their info, but no sides',        
        function () {
            $.ajax({
                    url: '/sample/url',
                    dataType: 'json',
                    success: function (result) {
                        ok(
                            !!result.item, 'Got something');
                        start();
                    },
                    error: function(result) {
                        ok(false, 'Failed with: ' + result.responseText);
                        start();
                    }
                }

            );
        }
        );

    return function () { asyncTest(); };

    } 
```

我正在尝试对具有不同结果的多个 URL 运行它，但我不知道如何使用不同的参数运行 asyncTest 两次。我尝试将函数（asyncTest 的第二个参数）分配给一个变量并将其插入 asyncTest() 但这不起作用。如何定义多个“asyncTest”并运行它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T18:15:36.267

$.deferred()、$.when() 和 $.pipe() 是你的朋友，如果你使用 jQuery [从代码中可以看出]。上面的好教程在[这里](http://joseoncode.com/2011/09/26/a-walkthrough-jquery-deferred-and-promise/)，[这里](http://net.tutsplus.com/tutorials/javascript-ajax/wrangle-async-tasks-with-jquery-promises/)

# c - 跟踪程序在 C 中运行了多长时间

> ID：15393264
> 
> 赞同：0
> 
> 时间：2013-03-13T18:13:17.247
> 
> 标签：c

我如何跟踪我的程序执行某条指令的时间，例如，如果要测量磁盘使用量，那将需要时间，最后我的程序应该给出一个 oupit

> 真实=50.0s 用户=30.s 系统=20.0s

如何区分和收集系统时间和实际命令时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T18:21:38.317

过去我曾经使用 pureCoverage 来检查执行时间，但它很昂贵。可能有免费工具可以做同样的事情，但是为了快速而肮脏的解决方案......

```
include <time.h>
#include <stdlib.h>
#include <stdio.h>

int main(void) {
  time_t start_time, end_time;
  start_time = time(NULL);
  //Do your thing...
  end_time  = time(NULL);

  int diff = end_time - start_time;
  //Diff will be the number of milliseconds that elapsed.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T18:29:54.087

[`getrusage`](http://man7.org/linux/man-pages/man2/getrusage.2.html)在 Linux 中使用：

```
#include <sys/time.h>
#include <sys/resource.h>

...

struct rusage rusage;

getrusage(RUSAGE_SELF, &rusage);
/* use rusage.ru_utime and rusage.ru_stime for user and system time resp. */ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T19:26:15.457

还有另一种解决方案，与前面的示例没有太大区别。

```
#include<time.h>
int main ()
{
    clock_t start_time, stop_time;

    start_time = clock();

    // ... do your thing;

    stop_time = clock();

    printf("Elapsed time: %lf", (double)( stop_time - start_time ) / CLOCKS_PER_SEC);
} 
```

# c# - 如何从平面数据中找到树叶

> ID：15393270
> 
> 赞同：0
> 
> 时间：2013-03-13T18:13:26.850
> 
> 标签：c#, algorithm, tree

我有一个与此类似的树数据：

```
[0] => 
      id = 5,
      name = "TV",
      parent_id = 1,
      children => 
                  [0] => 
                        id = 6,
                        name = "PLASMA",
                        parent_id = 5,
                        children = null
                  [1] =>
                        id = 7,
                        name = "LCD",
                        parent_id = 5,
                        children =>
                                    [0] =>
                                          id = 8,
                                          name = "Gloss",
                                          parent_id = 7,
                                          children = null
                                    [1] =>
                                          id = 9,
                                          name = "Matte",
                                          parent_id = 7,
                                          children = null
[1] =>
      id = 4,
      name = "Printers",
      parent_id = 1,
      children =>
                 .... 
```

我有一个扁平的字符串数据，例如：

*   电视
*   TV_PLASMA_光泽
*   电视_液晶

'_' 是子类别的分隔符。

查找类别 ID 数组的最佳算法是什么？

示例输入：

1.  电视
2.  TV_PLASMA_光泽
3.  电视_液晶

示例输出：

1.  数组：5
2.  数组：5、6、8
3.  数组：5、7

语言无关紧要——它只是一种算法——但在这种情况下，我更喜欢 C#。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T18:29:09.827

使用`HashMap`(`Dictionary<string, int>`在这种情况下会很好)，遍历您的树并将 (name, id) 对添加到 HashMap。

对于任何输入，您传入输入字符串和哈希图。

*   在分隔符上拆分字符串，在本例中为 '_' ( `input.Split(new char[]{'_'})`)
*   对于每个字符串部分，在 hashmap 中查找其 id，并将其添加到输出字符串或数组中

*

```
public int[] GetIDsFromString(string input, Dictionary<string, int> lookup)
{
  string stringParts = input.Split(new char[]{'_'});
  int[] retval = new int[stringParts.Length];
  int retIndex = 0;
  foreach(var s in stringParts)
    if (lookup.contains(s))
      retval[retIndex++] = lookup[s];
    else
      throw new Exception(string.format("string contained invalid item {0}", s));
  return retval;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T18:32:01.347

使用字典（反向）查找与名称相关的 ID

```
Dictionary<string,int> ids = new Dictionary<string,int>();
ids.Add("TV", 5);
ids.Add("PLASMA", 6);
// And so on 
```

现在，在查找 id 之前拆分输入字符串

```
string input = "TV_PLASMA_Gloss";
string[] categories = input.Split('_');
int[] result = new int[categories.Length];
for (int i = 0; i < categories.Length; i++) {
    int id;
    if (ids.TryGetValue(categories[i], out id)) {
        result[i] = id;
    } else {
        result[i] = -1; // Unknown category
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T18:32:28.683

就是这样，我会使用递归来做到这一点：

定义一个函数，它接受一个字符串数组和你的结构/对象数组或其他任何东西。在调用函数之前解析字符串数组：

```
string = "TV_PLASMA_Gloss"
array[0] = "TV"
array[1] = "PLASMA"
array[2] = "Gloss" 
```

数组中的第一个字符串将针对所有“顶级”条目进行测试。如果有匹配的条目，将使用剩余的数组和匹配的条目再次调用该函数。

如果数组中只剩下一个字符串，我们返回找到的条目的 id。这样我们就可以进行递归调用并构建我们想要的 integer-id-array。

调用层次结构如下所示：

```
-> function({"TV","PLASMA","Gloss"}, entry)
   -> function({"PLASMA","Gloss"}, matched_entry)
       -> function({"Gloss"}, matched_entry)
       <- id = 8
   <- id = 6,8
<- id = 5,6,8 
```

# algorithm - 查找文本关键字的算法

> ID：15393274
> 
> 赞同：3
> 
> 时间：2013-03-13T18:13:48.887
> 
> 标签：algorithm

给定一组文本（可能是书籍、文章、文档等），您将如何找到每个文本的相关关键字？常识建议：

*   分词
*   排除常用词（也称为停用词，如“a、to、for、in”）
*   计算单词频率
*   给每个单词打分，公式考虑到每个单词在文档和其他文档中出现的频率、文档的单词数和所有文档的总单词数

问题是：这是一个很好的公式来做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-13T18:13:48.887

我开发了一个。

对于每个单词计算这个比率：

```
(frequency of word in this text) * (total number of words in all texts)
-----------------------------------------------------------------------
  (number of words in this text) * (frequency of word in all texts) 
```

关键词是那些比例在最高 20% 的词（对于这个文件）。

[Ankerl](http://martin.ankerl.com/2007/01/09/textanalyzer-automatically-extract-characteristic-words/)还提出了自己的公式：

```
tanh(curVal/curWords*200) - 5*tanh((allVal-curVal)/(allWords-curWords)*200) 
```

在哪里：

*   curVal：要评分的单词在待分析文本中出现的频率
*   curWords：待分析文本中的总字数
*   allVal：要评分的单词在索引数据集中出现的频率
*   allWords：索引数据集的总单词数

两种算法都运行良好，而且结果通常一致。你知道有什么方法可以做得更好吗？

# node.js - nodejs异步的while

> ID：15393276
> 
> 赞同：15
> 
> 时间：2013-03-13T18:13:50.240
> 
> 标签：node.js, asynchronous, asynccallback

问候大家，

我想重复调用一个函数，但希望每个调用仅在前一个调用完成时运行。异步是否符合我的需要？或者调用是并行发生的？

谢谢！

加里

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-03-13T18:16:55.200

虽然可以满足您的需要，但它会按顺序运行每个功能。在每次运行之前，它都会执行“测试”功能以确保它应该再次运行。

他们的例子：

```
var count = 0;

async.whilst(
    function () { return count < 5; },
    function (callback) {
        count++;
        setTimeout(callback, 1000);
    },
    function (err) {
        // 5 seconds have passed
    }
); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-10-07T04:53:15.800

[正如乍得所指出](https://stackoverflow.com/a/15393337)的，异步的[while](http://caolan.github.io/async/docs.html#.whilst)将完成这项工作。

您可能需要考虑异步的[直到](http://caolan.github.io/async/docs.html#.until)（while 的倒数）。两者都做同样的工作，但主要区别在于：

*   `async.whilst`每次测试*通过时都会调用该函数*
*   `async.until`每次测试*失败时都会调用该函数*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-11T15:01:03.137

异步的 while 应该为您解决问题。在参考已接受答案上的代码之前，请注意您将使用的 async 版本。正如已接受答案中的一条评论所暗示的那样，此循环的结构略有变化，可能不太容易发现。

异步 v2：[接受的答案](https://stackoverflow.com/a/15393337/8266093)

异步 v3：[https ://caolan.github.io/async/v3/docs.html#whilst](https://caolan.github.io/async/v3/docs.html#whilst)

他们的例子：

```
var count = 0;
async.whilst(
    function test(cb) { cb(null, count < 5); },
    function iter(callback) {
        count++;
        setTimeout(function() {
            callback(null, count);
        }, 1000);
    },
    function (err, n) {
        // 5 seconds have passed, n = 5
    }
); 
```

# mongodb - MongoDB 聚合框架 $Project 附加 ObjectId 引用字段

> ID：15393280
> 
> 赞同：0
> 
> 时间：2013-03-13T18:14:10.310
> 
> 标签：mongodb, aggregation-framework

说我有以下内容：

```
this.aggregate(
    {$unwind: "$tags"},
    {$match: {tags: {$in: pip.activity.tags}}},
    {$group : {_id : '$_id',matches:{$sum:1}}},
    {$project: { _id: 0,matches:1}},
    {$sort: {matches:-1 }},
    callback
); 
```

我将如何在结果中包含一个额外的“外部”objectId 字段？例如，如果我有以下情况：

```
var otherField = new ObjectId('xxxxxxx');
this.aggregate(
    {$unwind: "$tags"},
    {$match: {tags: {$in: pip.activity.tags}}},
    {$group : {_id : '$_id',matches:{$sum:1}}},
    {$project: { _id: 0,matches:1,otherField:otherField}}, <-- include otherField
    {$sort: {matches:-1 }},
    callback
); 
```

这是可能的还是我应该在这个特定步骤中使用 forLoop 或 MapReduce？我正在寻找真正有效的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T02:06:24.740

$project 管道运算符不允许您注入对象，但您可以在 $group 运算符中更早地插入对象 ID。如果您有收藏：

```
db.foo.save({_id:1,tags:['a','b']})
db.foo.save({_id:2,tags:['b','c']})
db.foo.save({_id:3,tags:['c','d']}) 
```

然后你可以写：

```
db.foo.aggregate({
 $unwind: "$tags"},{ 
 $match: { tags: {$in: ['b','c'] } }},{
 $group: { _id: "$_id", matches: {$sum: 1 }, otherField: {$min: new ObjectId()} }},{
 $project: { _id: 0, matches: 1, otherField: 1 }},{
 $sort: { matches: -1 }}) 
```

$min 或 $max 可以在这里使用，但它需要一个运算符或对一个字段的引用，所以你必须给它一个..

# regex - 如果 X 字符串包含一个单词，则匹配正则表达式？

> ID：15393281
> 
> 赞同：0
> 
> 时间：2013-03-13T18:14:15.600
> 
> 标签：regex, unix, regex-negation, monit

我正在处理一个我不知道是否可以通过这种方式解决的问题，希望你能帮助我，让我们看看：

我正在使用 Monit 来监视一些日志文件，并且我希望它查找某个表达式，但是如果该表达式出现的次数超过 3 次，我只想要一个正匹配。

有问题的日志文件如下所示：

```
[2013/03/12-16:07:06]   Configurator :: FillSensor()
[2013/03/12-16:07:06]   [SEVERE]     :: Exception was caught: Could not bind to port.. Exiting.
[2013/03/12-16:07:06]   Configurator :: FillSensor()
[2013/03/12-16:07:06]   Configurator :: FillSensor()
[2013/03/12-16:07:06]   [SEVERE]     :: Exception was caught: Could not bind to port.. Exiting.
[2013/03/12-16:07:06]   Configurator :: FillSensor()
[2013/03/12-16:07:06]   Configurator :: FillSensor()
[2013/03/12-16:07:06]   Configurator :: FillSensor()
[2013/03/12-16:07:06]   Configurator :: FillSensor()
[2013/03/12-16:07:06]   [SEVERE]     :: Exception was caught: Could not bind to port.. Exiting.
[2013/03/12-16:07:06]   Configurator :: FillSensor()
[2013/03/12-16:07:06]   Configurator :: FillSensor()
[2013/03/12-16:07:06]   Configurator :: FillSensor()
[2013/03/12-16:07:06]   Configurator :: FillSensor()
[2013/03/12-16:07:06]   Configurator :: FillSensor()
[2013/03/12-16:07:06]   Configurator :: FillSensor()
[2013/03/12-16:07:06]   [SEVERE]     :: Exception was caught: Could not bind to port.. Exiting.
[2013/03/12-16:07:06]   Configurator :: FillSensor() 
```

我正在寻找“ **[SEVERE]** ”表达式。

如果该表达式出现超过 3 次，我想要一个匹配项。

我知道这`.*\[SEVERE\].*`给了我匹配该表达式的所有行，但我只想匹配该行数为 3 或更多。有没有办法用正则表达式来做到这一点？或者用Monit做它的替代方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T19:36:44.853

如果您可以在功能强大的 shell 中访问您的日志文件：

```
[ $(cat LOG.txt | grep "\[SEVERE\]" | wc -l) -ge 3 ] 
```

`grep`这将搜索包含“[SEVERE]”的行的文件内容通过管道传输，然后`wc`计算行数，如果行数大于或等于 3，则表达式返回 0。

# python - 如何安装 Pynma 和 Twython twitter.updateStatusWithMedia UnicodeDecodeError

> ID：15393282
> 
> 赞同：0
> 
> 时间：2013-03-13T18:14:20.880
> 
> 标签：python, api, push-notification, raspberry-pi, twython

第一个问题是我如何安装 pynma 模块？，我应该把模块放在哪里？我是 Python 的新手，因为通常有 setup.py，但 pynma 没有 setup.py :( 我试图在树莓派中实现通知我的 android 并且我丢失了 .. [https://github.com/uskr/pynma](https://github.com/uskr/pynma)

第二个问题是我在使用 Twython updateStatusWithMedia 时遇到问题，但使用 updateStatus 就可以了，我可以发布正常消息。

这是我的代码

```
from twython import Twython

twitter = Twython(
                    twitter_token = '52IKIxxxx',
                    twitter_secret = 'SvwK4xmxxxx',
                    oauth_token = '5164xxxxxxx',
                    oauth_token_secret = 'kVkrHxxxxxx'
                   )

twitter.updateStatus(status='hello tweet from raspberry pi 1.47am')
twitter.updateStatusWithMedia("/home/pi/teddy.jpg", status='hello!') 
```

> “ascii”编解码器无法解码位置 247 中的字节 0xff：序数不在范围内（128）
> 
> “ascii”编解码器无法解码位置 247 中的字节 0xff：序数不在范围内（128）
> 
> “ascii”编解码器无法解码位置 247 中的字节 0xff：序数不在范围内（128）

这是错误的图像

![](../Images/5ac7a64f54e97e15a75eb0921ab27527.png)

原谅我的英语:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-05T04:52:25.477

Twython（从 2.9.0 开始）修复了这个`updateStatusWithMedia`错误。这是我们依赖的上游库的问题，但现在情况应该很好。希望对你有用，抱歉耽搁了！

# c# - 如何使控制台应用程序始终以管理员身份运行？

> ID：15393288
> 
> 赞同：16
> 
> 时间：2013-03-13T18:14:34.273
> 
> 标签：c#, console-application, uac, runas, elevated-privileges

我有一个控制台应用程序，它被开发为由 erp 软件调用。

他们在 erp 中调用我的应用程序，当他们这样做时，我总是收到与权限不足相关的错误。

我已经为所有用户检查了 exe 属性中的“以管理员身份运行此程序”复选框，但结果是相同的。

我已经阅读了有关添加清单的内容，该清单将使应用程序提示 uac 对话框，但这不是我想要的，因为将从服务器上的 erp 调用应用程序，而客户端将看不到服务器上的对话框。

有人可以解释一下如何让这个控制台应用程序始终以管理员身份运行吗？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-03-13T18:31:04.877

添加到您的项目应用程序清单文件（添加 -> 新项目 -> 常规 -> 应用程序清单文件）并将以下节点添加到 app.manifest 中：

```
<requestedExecutionLevel level="requireAdministrator" uiAccess="false" /> 
```

[http://msdn.microsoft.com/en-us/library/windows/desktop/bb756929.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/bb756929.aspx)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-13T18:53:37.390

首先，了解在此过程中的某个时间点会有一个 UAC 对话。没有办法避免它。您可以采取以下几种方法：

*   让人们运行提升的 ERP 软件。我包括这个只是为了完整性。当您通常不需要权限时，每次运行应用程序时都必须同意 UAC 提示，这很糟糕。不过，这将是一个方便的快速测试，让您确认如果您的应用程序被提升，一切都会正常工作。从提升的进程启动的所有内容都会被提升，因此如果您的应用仍然收到错误消息，这不是您可以通过提升来解决的问题。
*   更改 ERP 应用程序中的代码以启动提升的应用程序。你提到C#。用`runas`动词启动是这里的一种方法。这给 ERP 开发人员带来了负担，他们可能无法做到。
*   向您的应用添加清单。您可以嵌入一个，或者如果您的应用程序名为 foo.exe，则只需手动创建一个具有适当请求执行级别的 foo.exe.manifest 文件。要嵌入一个，请使用 C# 项目的“属性”页面来选择正确的清单类型。确保您在启动时`UseShellExecute`设置为 true，否则清单将被忽略。

如果您选择第一个选项，则每次启动 ERP 应用程序时都会出现 UAC 提示。不好。如果选择第二个或第三个，则每次从 ERP 应用程序启动控制台应用程序时都会出现 UAC 提示。大概可以接受。

您可能会考虑的另一件事是更认真地研究为什么控制台应用程序需要管理员权限。你是写到 C 的根目录还是写到 Program Files？您是否正在更新 HKLM 中的注册表项？不管你在做什么，你为什么要那样做？除非您的应用程序安装或配置了某些东西（在这种情况下获得 UAC 提示是好的且正确的），否则您应该尝试对其进行调整，以便它写入用户前存储并且不需要提升。无论如何，您将不再担心如何提升它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T18:18:58.827

创建一个包含以下内容的批处理文件：

```
runas /env /user:%USERDOMAIN%\%USERNAME% cmd.exe /K YourProgramName.exe 
```

其中 %USERDOMAIN% 和 %USERNAME% 将替换为您的管理员帐户详细信息。

而是运行它？

# wix - WiX：错误 RegistryKey 元素包含意外属性“ForceDeleteOnUninstall”

> ID：15393290
> 
> 赞同：2
> 
> 时间：2013-03-13T18:14:35.023
> 
> 标签：wix, wix3.7

我是 WiX 的新手。我刚刚安装了[WixW 3.7](http://wix.codeplex.com/releases/view/99514)以构建开源[JiraSVN 插件](https://github.com/Wattos/JiraSVN)。但是 Visual Studio 中的构建中断并出现以下错误：

```
The RegistryKey element contains an unexpected attribute 'ForceDeleteOnUninstall'.
The RegistryKey element contains an unexpected attribute 'ForceCreateOnInstall'. 
```

这些错误引用了 product.wxs 文件，该文件包含以下元素：

```
<Component Id="C__Registry" Guid="{40D60013-...D30D5}" Win64="yes">
<RegistryKey Root="HKCR" Key="CLSID\{CF732FD7-...1A7E9D}" ForceDeleteOnUninstall="yes">
    <RegistryValue Value="TortoiseSVN Jira Plugin" Type="string" Action="write" />
    <RegistryKey Key="Implemented Categories">
        <RegistryKey Key="{3494FA92-...5E7831}" ForceCreateOnInstall="yes" />           </RegistryKey>
</RegistryKey>
</Component> 
```

我也收到警告，例如：

```
The 'ForceDeleteOnUninstall' attribute is not declared. 
The 'ForceCreateOnInstall' attribute is not declared. 
```

根据我在 WiX 文档中可以找到的内容，这些是 WiX 框架中的标准属性。那么是什么导致他们无法识别呢？*应该*在哪里声明？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T18:30:42.463

首先，为什么要添加这些属性？从您发送的片段中，它们是不必要的，只会使您的安装膨胀。不需要在那里强迫任何东西。

其次，您的 Visual Studio 机器上必须安装 WiX v3.5 或更低版本。这些属性是在 WiX v3.6 中添加的。

# python - Ubuntu 上的 Python：“模块”对象没有属性“c_bool”

> ID：15393291
> 
> 赞同：2
> 
> 时间：2013-03-13T18:14:37.253
> 
> 标签：python, ubuntu, python-2.7

在 Ubuntu 12.10 64Bit 上使用 Python 2.7 给我带来了以下麻烦：

```
Python 2.7.3 (default, Sep 26 2012, 21:51:14) 
[GCC 4.7.2] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import ctypes
>>> ctypes.c_bool()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: 'module' object has no attribute 'c_bool'
>>> 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T20:15:13.177

您工作的目录中是否有一个名为“ctypes.py”的文件？如果是这样，请移动它或（最好）重命名它。

# javascript - MVC调用控制器方法而不打开新页面？

> ID：15393292
> 
> 赞同：0
> 
> 时间：2013-03-13T18:14:37.660
> 
> 标签：javascript, jquery, asp.net-mvc

我的控制器类中有一个名为 output 的方法。当我更改下拉列表中的选定项目时，我想向它发送一个参数，然后让它根据该参数运行某个 SQL 查询，并让它返回结果。问题是，我不想在返回结果时打开一个新页面，我只想在警报中显示该查询的结果，而不是打开一个 URL 来运行该方法。这是我当前的 javascript，该方法是一个名为 output 的 ActionResult，并有一个名为 test 的参数，它是一个字符串。

```
 <script src="../../Content/jquery.js"></script>
<script type="text/javascript">
    jQuery(function () {

        jQuery("#SelectedCentre").change(function () {
            var _this = jQuery(this);
            var selectedCentre = _this.val();
            window.location.href = "/Centres/output?test=" + selectedCentre;
        });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T18:21:49.767

您应该为此进行 ajax 调用：

jQuery（函数（）{

```
 jQuery("#SelectedCentre").change(function () {
        var _this = jQuery(this);
        var selectedCentre = _this.val();
        jQuery.get("/Centres/output?test=" + selectedCentre, function(results){
         // do something with results here
        });
    });
}); 
```

**编辑以在评论中回答您的问题：**

在您的控制器中返回一个 json 类型的对象，如下所示：

```
 var data = new List<SelectListItem>
                           {
                               new SelectListItem
                                   {
                                       Text = "Test1",
                                       Value = "1"
                                   },
                                new SelectListItem
                                   {
                                       Text = "Test2",
                                       Value = "2"
                                   }
                           };
            return Json(data, JsonRequestBehavior.AllowGet); 
```

并更新您的 jQuery 代码以处理 json 对象并创建选项：

```
$.getJSON("/Centres/output?test=" + selectedCentre, function (results) {
    $.each(results, function (i, item) {
        $("<option>", { text: item.Text, value: item.Value }).appendTo("#mySelect");
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T18:21:16.693

你想使用 JQuery 的 get 方法。

```
 jQuery.get('Centres/output?test=' + selectedCentre, function (result) {
     alert(result);
 }); 
```

只要它是 JSON，您就可以对您想要的结果做任何事情。如果是 HTML，您可以将其推送到页面上的现有元素中。

另外你为什么不使用 jquery 给你的 $ 呢？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T18:23:47.070

```
jQuery.get("/Centres/output?test=" + selectedCentre, function(results){
         // do something with results here
console.log(results);
        }); 
```

# list - 如何在 Vim 中按行文本自动对 Quickfix 条目进行排序？

> ID：15393301
> 
> 赞同：1
> 
> 时间：2013-03-13T18:15:05.077
> 
> 标签：list, sorting, vim, dictionary

我正在尝试按行本身的内容按字母顺序自动对 Quickfix 列表中的行进行排序（默认情况下，它按它们在文件中出现的顺序排序）。我已将以下内容放在我的 中`.vimrc`，但出于某种原因，它会根据行号进行排序。据我所知，Quickfix 列表是一个字典列表，所以`Sortqfbytext`下面的函数应该只按`text`每个列表项的内容排序，而忽略其余的（包括行号）。

```
function! s:Sortqfbytext(i1, i2)
  let textlist = []
  let textlist = [a:i1.text,a:i2.text]
  call sort(textlist)
  if textlist[0] == textlist[1]
    return 0
  elseif textlist[0] == a:i1.text
    return 1
  elseif textlist[0] == a:i2.text
    return -1
  endif
endfunction

function! s:Makesortedqflist()
  let xlist = sort(getqflist(), 's:Sortqfbytext')
  call setqflist(xlist)
endfunction

autocmd! QuickfixCmdPost * call s:Makesortedqflist() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T19:17:11.920

我将按如下方式实现这个想法。

```
autocmd! QuickfixCmdPost * call SortQuickfix('QfStrCmp')

function! SortQuickfix(fn)
    call setqflist(sort(getqflist(), a:fn))
endfunction

function! QfStrCmp(e1, e2)
    let [t1, t2] = [a:e1.text, a:e2.text]
    return t1 <# t2 ? -1 : t1 ==# t2 ? 0 : 1
endfunction 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-11-30T10:30:44.877

QuickFix 列表更新 setqflist() 需要该`'r'`标志。

只需更改`call setqflist(xlist)`为`call setqflist(xlist, 'r')`

# php - php curl 很慢

> ID：15393305
> 
> 赞同：0
> 
> 时间：2013-03-13T18:15:14.160
> 
> 标签：php, curl

我对 cURL 有疑问。获取网页需要 40 多秒。功能是：

```
 function get_page(){                 
            $url = get_url();
            $timeout = 1000;
            $ch = curl_init();
            curl_setopt($ch, CURLOPT_URL, $url);
            curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
            curl_setopt($ch, CURLOPT_HEADER, false); 
            curl_setopt($ch, $CURLOPT_RETURNTRANSFER, true);

            curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, $timeout);
            $return_data = curl_exec($ch);
            print_r (curl_getinfo($ch)); 
            curl_close($ch);
            return $return_data;
        } 
```

此外，似乎 $return_data = curl_exec($ch) 实际上转储了页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T20:38:03.087

我设法通过将 DNS 更改为 8.8.8.8 来解决这个问题

# java - 如何在 Xerces 中使用语法验证文档

> ID：15393312
> 
> 赞同：0
> 
> 时间：2013-03-13T18:15:38.390
> 
> 标签：java, validation, document, grammar, xerces

我有以下情况
- 我动态创建 XML 文档（DocumentImpl）（使用数据）。所以 XML 永远不会写入磁盘。
- 我动态创建 XSD 模式（使用数据定义），这些也从未写入磁盘。语法很复杂，带有断言，因此它们需要用作 XMLSchema v1.1
- 我将 XSD 模式中的语法 (SchemaGrammar) 存储在哈希图中，这是因为相同的语法经常使用更多次。

现在我的问题，

我想根据语法验证文档。我知道使用哪种语法。它们是通过相应的数据定义名称找到的。

我的问题是我找不到如何执行此操作的示例代码，因为所有示例似乎都来自流或文件，而我已经准备好对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T10:54:55.307

我认为，它是这样工作的：

`

```
XMLGrammarPoolImpl pool = new XMLGrammarPoolImpl();
pool.putGrammar(grammar);

XMLSchema11Factory factory = new XMLSchema11Factory();
Schema schema = factory.newSchema(pool);

Validator validator = schema.newValidator();

DOMSource source = new DOMSource(document);
validator.validate(source); 
```

`

# firefox - selenium rc 关闭代理 firefox

> ID：15393314
> 
> 赞同：0
> 
> 时间：2013-03-13T18:15:44.357
> 
> 标签：firefox, proxy, selenium-rc

我的问题是由 Firefox 中不正确的“代理”设置引起的，所以我想禁用 Selenium 用于我的测试的配置文件中的代理。

目前，我的个人资料默认查找本地代理设置文件：

file:///C:/Users/%username%/AppData/Local/Temp/customProfileDir536e1d9817834e4e838cad55697fc909/proxy.pac

该文件包含以下 3 行：

```
function FindProxyForURL(url, host) {
    return 'PROXY localhost:4444; DIRECT';
} 
```

如果在测试期间我打开设置并设置“无代理”，则应用程序开始正常工作。如何使测试始终以“无代理”设置启动？

我在运行 Selenium 服务器时尝试使用该`-avoidProxy`标志，但这没有帮助。我还尝试使用单独的配置文件进行测试，但 Selenium 也覆盖了它的设置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T05:27:07.380

创建一个新的 Firefox 浏览器配置文件并根据您的要求在其中设置首选项。
使用开关使用此配置文件启动 selenium 服务器
`-firefoxProfileTemplate <path_to_firefox>`

# ios - 有效防止iOS应用深度睡眠

> ID：15393317
> 
> 赞同：2
> 
> 时间：2013-03-13T18:15:58.690
> 
> 标签：ios

我正在构建一个闹钟，允许用户在应用程序处于前台并且屏幕被锁定时在特定的触发日期播放连续的声音。

[https://github.com/mruegenberg/MMPDeepSleepPreventer](https://github.com/mruegenberg/MMPDeepSleepPreventer)是我发现的唯一解决方案，可以防止我的应用程序在 10 分钟后退出。但是，这种方法会导致大量电池消耗。

有没有其他方法可以解决这个问题而不会显着耗尽电池？我知道这是可能的，因为那里有其他闹钟可以做到这一点，而不会耗尽电池，也不会越狱。

# arrays - 用新数据填充现有数组/表

> ID：15393319
> 
> 赞同：0
> 
> 时间：2013-03-13T18:16:08.463
> 
> 标签：arrays, powershell, foreach

我还在学习powershell的开始。我的目标是有一个脚本来提取一天前的 SCOM 警报，将警报的 netbios 计算机名称与我将导入的 CSV 中的值进行比较。

如果 CSV 中的 ServerName 与 NetbiosName 匹配，则它将管理员名称添加到我创建的原始数组/表中。目前它可以满足我的所有要求，但是当我让它输出最终数据时，它只会将最后一个使用的管理员添加到 Admin 列，而不是适当的管理员。

> Netbios计算机名称：服务器
> 
> 监控对象显示名称：Server.Domain
> 
> 姓名：呸呸呸呸
> 
> 严重性：警告
> 
> 分辨率状态：0
> 
> 重复次数：0
> 
> 服务器管理员：管理员
> 
> * * *
> 
> Netbios计算机名称：服务器
> 
> 监控对象显示名称：Server.Domain
> 
> 姓名：呸呸呸呸
> 
> 严重性：警告
> 
> 分辨率状态：0
> 
> 重复次数：0
> 
> 服务器管理员：管理员

在第二个输出中，管理员应该反映该特定服务器的管理员，而不是完全相同的一个。

这是我的代码。

```
 # Load SCOM snap-in
add-pssnapin "Microsoft.EnterpriseManagement.OperationsManager.Client";
$server = "RMSSERVER"

# Connect to OpsMgr SDK - change management server to your RMS
new-managementGroupConnection -ConnectionString:RMSSERVER.domain;
set-location "OperationsManagerMonitoring::";

$Date = (Get-Date).adddays(-1)

$ScomAlert = get-alert | where {($_.ResolutionState -eq 0) -and ($_.TimeRaised -gt $Date)  } | Select NetbiosComputerName,MonitoringObjectDisplayName, Name,Severity, ResolutionState, RepeatCount
$Administrators = Import-CSV "C:\Script\SCOM\admin.csv"
$TableSC = $ScomAlert

ForEach ($Alert in $ScomAlert)
{
    $NetBios       = "$($Alert.NetBiosComputerName)"
    $MonObjectName = "$($Alert.MonitoringObjectDisplayName)"
    $AlertName     = "$($Alert.Name)"
    $Severity      = "$($Alert.Severity)"
    $ResState      = "$($Alert.ResolutionState)"
    $RepCount      = "$($Alert.RepeatCount)"

        ForEach ( $Admin in $Administrators ) 
       {
            $ServerName  = "$($Admin.ServerName)"
            $ServerAdmin = "$($Admin.AdminName)"

            if($ServerName -eq $NetBios)
            {
               $ServerAdministrator = $ServerAdmin    

            } 

       }

     $TableSC | Add-Member -MemberType NoteProperty -Name "Server Adminstrator" -Value $ServerAdministrator -Force

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T18:51:31.847

```
$TableSC | Add-Member -MemberType NoteProperty -Name "Server Adminstrator" ... 
```

上面的行将集合`Server Administrator`中**所有**项目中的属性替换为`$TableSC`给定值。

如果您希望使用相应的管理员更新每个项目，您需要这样的东西（未经测试）：

```
$Administrators = @{}
Import-Csv "C:\Script\SCOM\admin.csv" | % {
  $Administrators[$_.ServerName] = $_.AdminName
}

$TableSC = $ScomAlert | select NetBiosComputerName,
  MonitoringObjectDisplayName, Name, Severity, ResolutionState, RepeatCount,
  @{n="Server Administrator";e={$Administrators[$_.NetBiosComputerName]}} 
```

# javascript - div中的自动跟随滚动条

> ID：15393320
> 
> 赞同：1
> 
> 时间：2013-03-13T18:16:13.233
> 
> 标签：javascript, css

基本上，我使用下面的 CSS 代码创建了某种具有可滚动 DIV的**Autolog**

```
.myClass {
position: relative;
padding: 39px 14px 14px;
margin-bottom: -1px;
border: 1px solid #ddd;
border-top-left-radius: 4px;
border-top-right-radius: 4px;
height: 200px;
overflow: auto;
} 
```

基本上，数据正在使用 JQuery 动态放置在此 div 中，如下所示，该数据是从外部源获取的

```
$.each(data.search, function (i, v) {
        $('.myClass').append('my content here');
}); 
```

div 看起来就这么简单

```
<div class="myClass">

</div> 
```

我希望 div 做的是，随着内容的变化，`overflow`我希望侧面的滚动条自动滚动到底部以跟随**AutoLog**，而不必自己手动将条滚动到底部，我确定这一点可以通过**Javascript**实现，但不确定如何，如果有人能指出我正确的方向，那就太好了，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T18:21:17.923

我最近做了类似的事情，我有一个“控制台”（一个 div）我正在打印到它，当它溢出时，你跟着它下来。这是我的“println”函数：

```
printLn: function(str, clss) {
    con.print(str, clss);
    $output.append('<br/>').animate({ scrollTop: $output.prop('scrollHeight') }, 1);
}, 
```

基本上更新`scrollTop`到新的`scrollHeight`，或多或少说“滚动到滚动高度允许”，所以你“坚持”到底部。

**编辑**

对于您的情况，请执行以下操作：

```
$.each(data.search, function (i, v) {
        $div = $('.myClass');
        $div.append('my content here').animate({ scrollTop: $div.prop('scrollHeight') }, 1);
}); 
```

这`scrollTop`会将 div 的属性设置为最大值，因此它将滚动到底部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T18:20:00.073

附加内容后将此添加到您的脚本中，它应该可以工作..

```
$(".myClass").animate({
    scrollTop: $(".myClass").scrollHeight
}, 300); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T18:21:01.180

```
// Get the number of pixels scrolled
var  intElemScrollTop = element.scrollTop;
intElemScrollTop is an integer corresponding to number of pixels that element's content has been scrolled upward.

// Set the number of pixels scrolled
element.scrollTop = intValue; 
```

检查链接[https://developer.mozilla.org/en-US/docs/DOM/element.scrollTop](https://developer.mozilla.org/en-US/docs/DOM/element.scrollTop)

# javascript - 如何用JS模拟链接？

> ID：15393336
> 
> 赞同：3
> 
> 时间：2013-03-13T18:16:50.890
> 
> 标签：javascript, jquery, html

我想创建一个与常规`<a>`标签一样的链接。目前我使用`onClick="window.location=''`，但它不会像`<a>`标签那样在中间点击时打开新窗口。

```
<table>
   <tr onClick="window.location='/generatedlink.php'">
      <td> </td>
      <td> </td>
   </tr>
</table> 
```

我真的不需要右键单击功能

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T18:19:56.127

如果您想要任何浏览器提供的功能，例如中键单击以在新窗口中打开或右键单击选项（新窗口、新选项卡、保存、复制链接等），则必须是普通链接. 浏览器无法知道你的非元素应该表现得像一个链接。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-13T18:25:48.143

您可以使用

> window.open('/generatedlink.php')

在新窗口中打开，但它很可能会被浏览器阻止。

您可以使用 mousedown 来检测任何 mousedown 事件。

```
$('a.dynlinks').mousedown(function(e){
    e.preventDefault();
    switch(e.which){
        case 1:
            //left click
            // use window.location
            break;
        case 2:
            //middle click
            // use window.open
            break;
    }
}) 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-03-13T19:16:20.193

使用**document.location**

而不是**window.location**

```
<table>
    <tr onClick="document.location='/generatedlink.php'">
       <td> </td>
       <td> </td>
    </tr>
</table> 
```

# php - 如何允许正则表达式匹配一个字符错误

> ID：15393338
> 
> 赞同：2
> 
> 时间：2013-03-13T18:17:04.720
> 
> 标签：php, regex

我试图弄清楚是否有一种简单的方法可以让特定的正则表达式给出除了一个字符之外的正确匹配。（如果重要的话，在 PHP 中工作）。

例如，对于模式“apples”，我不仅想找到“apples”的出现，还想找到“appxes”、“opples”、“applis”等。

有什么好的方法可以做到这一点吗？提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T18:22:27.997

使用`levenshtein`函数而不是正则表达式。[这是文档](http://php.net/manual/en/function.levenshtein.php)。

在示例`echo levenshtein("abcd","abce")`中打印出：`1`.

**编辑：**另请注意，此函数将比较不同长度的字符串，因此可能需要进行额外检查。请参阅下面的@Vulcan 评论。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T18:22:04.233

我不认为正则表达式是正确的工具。你可以做这样的事情。

```
$temp = str_split ("apples");
$test = str_split ("appxes");
var_dump(array_diff($temp, $test)); 
```

**输出：**

```
array(1) { [3]=> string(1) "l" } // 1 mismatch
            ^ // position   ^ //letter at mismatch 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T18:21:14.010

您的正则表达式字符串：

```
[A-z]pples|A[A-z]ples|Ap[A-z]les|Appl[A-z]es|Appl[A-z]s|Apple[A-z] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T18:23:36.703

您可以将字符串溢出到 X 个字母中，然后从期望的 preg 匹配词中 preg 匹配 X-1。

# entity-framework-4 - 休眠犀牛 - 实体探查器 - 类型或命名空间名称“配置”在命名空间“System.Data.Entity”中不存在

> ID：15393343
> 
> 赞同：4
> 
> 时间：2013-03-13T18:17:32.900
> 
> 标签：entity-framework-4

我使用 Nu-Get 通过 Hibernating Rhinos 安装了 Entity Profiler 版本 2.02145.0。它安装了所需的程序集并创建了以下引导程序类：

```
 using HibernatingRhinos.Profiler.Appender.EntityFramework;

[assembly: WebActivator.PreApplicationStartMethod(typeof(Application.Web.App_Start.EntityFrameworkProfilerBootstrapper), "PreStart")]
namespace Application.Web.App_Start
{
    public static class EntityFrameworkProfilerBootstrapper
    {
        public static void PreStart()
        {
            // Initialize the profiler
            EntityFrameworkProfiler.Initialize();

            // You can also use the profiler in an offline manner.
            // This will generate a file with a snapshot of all the EntityFramework activity in the application,
            // which you can use for later analysis by loading the file into the profiler.
            // var filename = @"c:\profiler-log";
            // EntityFrameworkProfiler.InitializeOfflineProfiling(filename);
        }
    }
} 
```

当我运行我的应用程序时，我在这一行收到此异常“名称空间'System.Data.Entity'中不存在类型或名称空间名称'Config'（您是否缺少程序集引用？）”`EntityFrameworkProfiler.Initialize();`

System.Data.Entity 在我的网络项目中被引用。

关于如何解决错误的任何想法？

# java - rJava 泛型类型

> ID：15393351
> 
> 赞同：8
> 
> 时间：2013-03-13T18:18:10.183
> 
> 标签：java, r, rjava

我一直在玩 rJava 包，但由于 rJava 似乎不知道 Java 泛型类型，所以我很难使用泛型类型参数创建 java 对象。如果我有一个像这样的java类：

```
public class A<T> {
    private B<T> b;
    public A(B<T> b) {
        this.b = b;
    }
} 
```

我想`.jnew()`通过传递一个已经创建的 B 对象（带有实例化类型参数）从 R 会话创建一个 A 对象，但是 rJava 总是给出错误：

```
java.lang.NoSuchMethodError: <init> 
```

有什么解决方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-09-17T01:06:29.480

这个问题有很多活动部分。挖掘各个部分的文档，我认为您需要在中断的行上执行此操作：

```
gesinstance = .jnew("edu/cmu/tetrad/search/Ges", .jcast(dataset, "edu/cmu/tetrad/data/DataSet")) 
```

关键区别在于`.jcast`对第二个参数的调用。（我没有安装 R，所以我无法对此进行测试 - 如果它不起作用，我将根据您可以提供的有关新错误消息的任何反馈更新我的答案。）

那么问题是“为什么会这样？” 答案似乎是：

1.  在 Java 方面，`DataReader.parseTabularData`返回一个具有`DataSet`您所指出的类型的对象，但`DataSet`它是一个接口而不是一个类。这必然意味着返回的实际对象属于实现该`DataSet`接口的某个类。
2.  由于我不清楚的原因，rJava 包并不能很好地处理多态性。它要求您调用与您传递的对象具有“精确”签名匹配的方法。在这种情况下，您需要从获得的任何特定类“向上转换”到 interface `DataSet`。请参阅`.jnew`( [https://www.rforge.net/doc/packages/rJava/html/jnew.html](https://www.rforge.net/doc/packages/rJava/html/jnew.html) ) 的文档，尤其是它们用“...”表示的参数。这指的是您参考文档的相应部分`.jcall`（[https://www.rforge.net/doc/packages/rJava/html/jcall.html](https://www.rforge.net/doc/packages/rJava/html/jcall.html)），然后解释调用的要求`.jcast`（[https://www.rforge .net/doc/packages/rJava/html/jcast.html](https://www.rforge.net/doc/packages/rJava/html/jcast.html)）和一些例子。

您得到的错误`java.lang.NoSuchMethodError: <init>`是告诉您 JVM 找不到您调用的构造函数。在您在评论中发布的示例中，这看起来很神秘。（顺便说一句，编辑您的问题可能会很好，并将该信息包含在此处以供后代使用。）代码看起来确实正确，而且，了解 Java，我直观地期望接口尊重 Java 的多态性。鉴于此（无论出于何种原因），R 的接口在不考虑继承的情况下进行“精确”类型匹配，很明显，由于上面的原因 #1，它不会找到构造函数。

最后，在我对 Tetrad 的有限探索中，我实际上并没有遇到任何使用泛型的 Java 类。事实证明，这是一个完全的红鲱鱼。如果将来出现问题，您可能需要查看“类型擦除”（[https://docs.oracle.com/javase/tutorial/java/generics/erasure.html](https://docs.oracle.com/javase/tutorial/java/generics/erasure.html)）。如果您在 Java 和 C、C++、Fortran 以及任何 Java 认为“本机”的语言之间进行交互，那么您将通过处理类型擦除形式来处理本机代码中的泛型。不过，rJava 接口可能会有所不同，因为这似乎属于使您在当前问题上绊倒的相同结构类型。（也许以后值得它自己的赏金！）

# html - 垂直居中标签？

> ID：15393352
> 
> 赞同：3
> 
> 时间：2013-03-13T18:18:11.400
> 
> 标签：html, css, positioning

 我正在努力将元素中的标签垂直居中。

我得到的是这样的： 

[http://jsbin.com/arudif/2/edit](http://jsbin.com/arudif/2/edit)

```
<style>
 header {padding: 20px 0 20px 0; clear: both;}
 header a {
   float: right;
   vertical-align: middle; 
   margin: auto 0 auto 0;
   } 
   //This is what I tried, doesnt work
</style>

<header>
   <a href="#">Center Me Please!</a>
   <p> Stack Overflow </p>
</header> 
```

我只是想不出 auto ho 来修复标题中的那个标签

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-13T18:28:28.503

只需在您的锚规则中添加一个 line-height 属性，该属性加起来就是容器的填充和段落的边距：`line-height : 50px;`

[http://jsfiddle.net/HS6Lp/](http://jsfiddle.net/HS6Lp/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T18:33:58.047

在`a`不考虑容器其他内容的情况下居中，使用绝对定位。

```
header
{
    position:relative;
}
a
{
    position:absolute;
    top: 50%; // nearly 50%, but not exactly 50%
    left: 50%;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-13T18:25:06.240

这是使用 display:table; 的一种方法。并显示：表格单元格；。我为 div 添加了一个高度以显示它确实居中。还删除了您的浮动，因为它会与对齐冲突。

```
<div>
   <a href="#">Center Me Please!</a>
   <p> Stack Overflow </p>
</div> 
```

CSS：

```
div {padding: 20px 0 20px 0; clear: both;background:green;display:table;height:200px;}
div a {
display:table-cell;
   vertical-align: middle; 
   margin: auto 0 auto 0;
   } 
```

[http://jsfiddle.net/LR6rz/](http://jsfiddle.net/LR6rz/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T18:42:29.817

您需要将父级设置`header`为使用居中文本和自动侧边距。然后将`p`标签设置为使用左对齐文本。

```
<style>
header {
  padding: 20px 0 20px 0; 
  clear: both;
  text-align: center;
  margin: auto 0 auto 0; 
}
header a {

}
header p {
   text-align: left;
}
</style>

<header>
   <a href="#">Center Me Please!</a>
   <p> Stack Overflow </p>
</header> 
```

根据您的用例，您可以仅在`a`标签上设置自动边距，从而允许您在标签上使用不同的边距`header`。

请参阅[http://codepen.io/alienresident/pen/fgkvc](http://codepen.io/alienresident/pen/fgkvc)来玩弄代码。

# sql - SQL IN 工作但 NOT IN 不起作用

> ID：15393356
> 
> 赞同：1
> 
> 时间：2013-03-13T18:18:45.827
> 
> 标签：sql, null, exists, sql-in

我有这个查询将正确返回作为`IN`子句一部分的值，但是当我将其更改为 时`NOT IN`，它不会返回任何内容。
有没有人有什么建议？

```
select distinct 
    CAST( w.work_area AS CHAR(4) ) || s.code_id as WATT 
from 
    sys_code s, 
    work_area_master w 
where 
    s.code_type = '590' 
    and (
        CAST( w.work_area AS CHAR(4)) || s.code_id
    )  
    in (
        select substr(misc_flags, 1,6) 
        from sys_code where code_type = 'STA'
    ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T18:26:18.253

排除原则（即 A 或 ~A 是重言式）不适用于 A 可能为 NULL 的情况。当存在可空字段时，应用三值 loigc，并且必须将排除原则修改为（ A 或 ~A 或 A 为 NULL）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T19:14:44.687

```
SELECT DISTINCT
    CAST( w.work_area AS CHAR(4) ) || s.code_id AS what 
FROM sys_code s
JOIN work_area_master w ON 1=1 
WHERE s.code_type = '590' 
AND EXISTS (
    SELECT * FROM sys_code xx
    WHERE xx.code_type = 'STA'
    AND substr(xx.misc_flags, 1,6) = CAST( w.work_area AS CHAR(4)) || s.code_id
    ); 
```

脚注：我故意使用`JOIN ... ON 1=1`语法来引起人们注意原始查询甚至没有连接条件的事实（*相关*IN子查询中的除外）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T19:36:32.393

检查`sys_code`和的组合是否`work_area_master`有效实际上*可以*是`JOIN`条件。

也使用`EXISTS`而不是`IN`避免[已经提供的@wiplasser](https://stackoverflow.com/a/15394439/939860)`NULL`之类的问题：

```
SELECT DISTINCT
       CAST( w.work_area AS CHAR(4) ) || s.code_id AS what 
FROM   sys_code s
JOIN   work_area_master w ON EXISTS (
          SELECT 1
          FROM   sys_code x
          WHERE  x.code_type = 'STA'
          AND    substr(x.misc_flags, 1,6)
                 = CAST(w.work_area AS CHAR(4)) || s.code_id
          )
WHERE  s.code_type = '590' ; 
```

有关 and 问题的详细说明`NOT IN`，请参阅[dba.SE 上](https://dba.stackexchange.com/questions/17407/why-does-not-in-with-a-set-containing-null-always-return-false-null)`NULL`的这个密切相关的问题。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-13T18:24:18.350

可以包括一个像这样的合并函数：

```
select distinct CAST( w.work_area AS CHAR(4) ) || s.code_id as WATT
from sys_code s, work_area_master w
where s.code_type = '590' 
and (CAST( w.work_area AS CHAR(4)) || s.code_id) in (
select substr(coalesce(misc_flags,"    "), 1,6)
from sys_code
where code_type = 'STA'
); 
```

# oauth - ASP.NET Web API OAuth 客户端和提供者

> ID：15393359
> 
> 赞同：0
> 
> 时间：2013-03-13T18:18:53.273
> 
> 标签：oauth, asp.net-web-api

我的任务是为我们的移动应用程序和未来的第三方创建一个 Web API，以访问我们的数据等。

仅此一项就足够简单了，但是我需要保护它。最初，在阅读了有关 OAuth 并进行了一些研究之后，我决定采用基于安全令牌的本地开发路线，利用网上找到的最佳实践来确保安全。我的原型运行得非常好，但不幸的是，该公司希望使用 OAuth，因为它是一个公认的标准，并且被认为对我们的客户有市场。

Soooo，在过去几天我的头撞到了多堵墙之后，我很好奇是否有人使用 OAuth 作为服务提供者，然后使用 ASP.NET Web API 客户端作为消费者的实现。

设想的工作流程是移动应用程序将访问 API，而 API 反过来会期望我们的自托管 OAuth 服务提供商发出令牌。我还没有在网上找到任何关于此的综合文档或示例。到目前为止，我所看到的一切都是非常零碎的，因此尝试实施任何事情都非常令人沮丧。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T20:05:28.580

嗯 - 当然有 OAuth 规范（因为你似乎喜欢手工制作东西；））[https://www.rfc-editor.org/rfc/rfc6749](https://www.rfc-editor.org/rfc/rfc6749)和相应的威胁模型 - [https://datatracker.ietf。 org/doc/html/draft-ietf-oauth-v2-threatmodel-08](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-threatmodel-08)

我们的 OAuth2 authZ 服务器/sec 库也有一个实现 - 我在这里编译了一些文档：[https ://github.com/thinktecture/Thinktecture.IdentityServer.v2/wiki](https://github.com/thinktecture/Thinktecture.IdentityServer.v2/wiki)

# java - Java 指数方法

> ID：15393360
> 
> 赞同：0
> 
> 时间：2013-03-13T18:18:53.503
> 
> 标签：java, methods, recursion, raise

我需要编写一个方法，该方法将取一个基数并将其提升到任何整数幂，无论是正数还是负数。可以假设基数不会为 0。

在方法中我需要调用递归方法并使用它。

这是我需要使用的以前的递归方法：

```
 public static double nonNegInt(double base, int pow)
{
    if (pow == 0)
    return 1;
    else
     return base * nonNegInt(base,pow-1);   
} 
```

所以我的问题是，有人可以帮助或告诉我如何编写我需要的方法吗？

我知道当前方法很好，但我需要用另一种方法调用它。当我这样做时，我收到运行时错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T18:25:19.957

您的方法是一个好的开始，尽管您需要按照您的要求处理负指数。充分利用这一事实`x^(-n) = 1.0 / x^n`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T18:28:16.463

这也是您处理负值的方式：

```
public static double nonNegInt(double base, int pow)
{
    if (pow == 0)
        return 1;
    else if(pow < 0)
        return (1 / nonNegInt(base, -pow));
    else
        return base * nonNegInt(base,pow-1);   
} 
```

运行它：

```
public static void main(String args[])
{
     double result = nonNegInt(4,-1);
     System.out.println(result);  //Will print 0.25
} 
```

当然你应该给它一个有意义的名字，因为现在它**确实可以**处理否定的情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-26T14:35:12.937

```
public BigDecimal exp(BigDecimal base, BigInteger pow) {

    if(base == null || base.intValue() == 0 ) return BigDecimal.ZERO;

    BigInteger absPow = pow.abs();

    if(absPow.intValue() == 0) return  BigDecimal.ONE;

    if(absPow.intValue() == 1) return  pow.intValue() > 0 ? base :
                                            BigDecimal.ONE.divide(base, MathContext.DECIMAL128);

    if(absPow.intValue() == 2) return  pow.intValue() > 0 ? base.multiply(base):
                                            BigDecimal.ONE.divide(base.multiply(base), MathContext.DECIMAL128);

    BigInteger i = BigInteger.ONE;
    BigDecimal result = base;
    HashMap<BigInteger, BigDecimal> history = new HashMap<>();
    history.put(i, result);

    while (i.compareTo(absPow) < 0) {

        if(i.add(i).compareTo(absPow) <= 0) {

            i = i.add(i);
            result =  result.multiply(result);
            history.put(i, result);

        } else {

            BigInteger diff =  absPow.subtract(i);

            for (; diff.intValue() > 0 &&  !history.containsKey(diff); diff = diff.subtract(BigInteger.ONE));

            i = i.add(diff);
            result =  result.multiply(history.get(diff));
            history.put(i, result);
        }

    }

    return pow.intValue() > 0 ? result : BigDecimal.ONE.divide(result, MathContext.DECIMAL128);
} 
```

# pdf - 在 Seam iText 中创建标记的 PDF 文档

> ID：15393362
> 
> 赞同：0
> 
> 时间：2013-03-13T18:18:59.980
> 
> 标签：pdf, itext, accessibility, seam

我正在尝试使用 Seam 及其[iText 实现创建](http://docs.jboss.org/seam/snapshot/en-US/html/itext.html)[可访问的 PDF](http://webaim.org/techniques/acrobat/#tags)。我找不到任何关于这是否可能的参考。似乎 iText 本身可以处理它；[此示例](http://itextpdf.com/examples/iia.php?id=271)中的 PDF已标记。但是我们创建的所有 PDF 都不是，我似乎无法弄清楚如何添加它。

以下是我们的一份文档中的一些示例代码：

```
<?xml version="1.0" encoding="UTF-8"?>
<p:document xmlns:p="http://jboss.com/products/seam/pdf" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:f="http://java.sun.com/jsf/core" xmlns:s="http://jboss.com/products/seam/taglib" xmlns:h="http://java.sun.com/jsf/html" type="PDF" pageSize="letter" title="Letter" margins="15.0 40.0 20.0 10.0">

    <f:facet name="header">
        <p:font size="10" name="TIMES-ROMAN" style="bold">
            <p:header borderWidth="0"/>
            <p:footer borderWidthTop="0" borderWidthBottom="0" alignment="center">
FY #{handler.form.year}<p:text value=" #{handler.form.name}"/><p:text value="     "/>CAN #{handler.form.number}<p:text value="     "/>Object Class #{handler.form.class}<p:text value="     "/>#{handler.form.time} 
            </p:footer>
        </p:font>
    </f:facet>

    <p:font size="10" name="TIMES-ROMAN">
        <p:table columns="3" widthPercentage="100" widths="1 2 1">
        <p:cell borderWidth="0">
                <p:image alignment="left" value="/assets/img/logo.PNG" scalePercent="5"/>
        </p:cell>
        <p:cell borderWidth="0" horizontalAlignment="center" paddingTop="30">
            <p:paragraph>

                WORKSHEET
            </p:paragraph>
        </p:cell>
... snip ... 
```

我意识到这不是最好的代码（我只是从需要清理的文档中提取）。不过，关于 Seam 是否真的可以放入 PDF 标签有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T06:28:49.410

从 iText 5.4.0（最新版本）开始支持开箱即用的标记 PDF。

当您使用高级对象（如 Paragraph、PdfPTable 等）并使用 PdfWriter.setTagged() 时，您将获得高质量的 Tagged PDF。您甚至可以选择自己的角色。

如果 jBoss/SEAM 会使用这样一个最新版本的 iText，我会感到惊讶。我已经联系他们进行升级，但 SEAM 团队从未回应。（我是谁？我是 iText Software 的 CEO。）

# android - 如何在 Android 的 Cloud Endpoints 构建器中禁用 GZipContent

> ID：15393363
> 
> 赞同：7
> 
> 时间：2013-03-13T18:19:02.683
> 
> 标签：android, google-cloud-endpoints

我想为 Google Cloud Endpoints 类禁用 GZipContent，以便 POST 可以在本地开发服务器上运行。

最新的 GPE 版本生成此端点构建器：

```
public static final class Builder extends AbstractGoogleJsonClient.Builder {
    public Builder(HttpTransport transport, JsonFactory jsonFactory,
        HttpRequestInitializer httpRequestInitializer) {
      super(
          transport,
          jsonFactory,
          ...);
    } 
```

谷歌文档建议像这样使用它：

```
Myendpoint.Builder endpointBuilder = new Myendpoint.Builder(
                    AndroidHttp.newCompatibleTransport(),
                    new GsonFactory(),
                    credential); 
```

有谁知道如何为端点禁用 GZipContent ？

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-13T18:33:17.000

您可以使用：

```
builder.setGoogleClientRequestInitializer(new TictactoeRequestInitializer() {
     protected void initializeTictactoeRequest(TictactoeRequest<?> request) {
         request.setDisableGZipContent(true);
     }
   }); 
```

替换`TictactoeRequest`为适合您的应用程序的类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-31T10:32:03.700

我不是 100% 为什么 Dan 的回答对我不起作用，但是这个[GitHub 项目的代码](https://github.com/bradabrams/stopwatchio13/blob/master/stopwatch-Endpoints/src/main/java/com/geekyouup/android/ustopwatch/CloudEndpointUtils.java)为我解决了这个问题。

```
/*
 * TODO: Need to change this to 'true' if you're running your backend locally using
 * the DevAppServer. See
 * http://developers.google.com/eclipse/docs/cloud_endpoints for more
 * information.
 */
protected static final boolean LOCAL_ANDROID_RUN = false;

/*
 * The root URL of where your DevAppServer is running (if you're running the
 * DevAppServer locally).
 */
protected static final String LOCAL_APP_ENGINE_SERVER_URL = "http://localhost:8080/";

/*
 * The root URL of where your DevAppServer is running when it's being
 * accessed via the Android emulator (if you're running the DevAppServer
 * locally). In this case, you're running behind Android's virtual router.
 * See
 * http://developer.android.com/tools/devices/emulator.html#networkaddresses
 * for more information.
 */
protected static final String LOCAL_APP_ENGINE_SERVER_URL_FOR_ANDROID = "http://10.0.2.2:8080";

/**
 * Updates the Google client builder to connect the appropriate server based
 * on whether LOCAL_ANDROID_RUN is true or false.
 *
 * @param builder Google client builder
 * @return same Google client builder
 */
public static <B extends AbstractGoogleClient.Builder> B updateBuilder(
        B builder) {
    if (LOCAL_ANDROID_RUN) {
        builder.setRootUrl(LOCAL_APP_ENGINE_SERVER_URL_FOR_ANDROID
                + "/_ah/api/");
    }

    // only enable GZip when connecting to remote server
    final boolean enableGZip = builder.getRootUrl().startsWith("https:");

    builder.setGoogleClientRequestInitializer(new GoogleClientRequestInitializer() {
        public void initialize(AbstractGoogleClientRequest<?> request)
                throws IOException {
            if (!enableGZip) {
                request.setDisableGZipContent(true);
            }
        }
    });

    return builder;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-19T00:12:22.867

对于那些在谷歌上搜索我看到的错误的人，它是 java.io.EOFException，但仅在开发服务器中。使用 OP 问题中所述的示例，这是我能够解决此问题的方法：

```
Myendpoint myendpointClient = new Myendpoint.Builder(
                AndroidHttp.newCompatibleTransport(),
                new GsonFactory(),
                credential).build();
EndpointService svcCall = myendpointClient.endpointService("firstArg");
// Note, I didn't call "execute()", as normal!
svcCall.setDisableGZipContent(true);
// This is also a handy place to set http headers, etc
svcCall.getRequestHeaders().set("x-oddballhdr","OddballValue");
// It's now time to call execute()
svcCall.execute(); 
```

这可能比其他有用的答案要简单一些。

# java - SimpleDateFormat mmddyyyy 返回不正确的月份数据

> ID：15393364
> 
> 赞同：0
> 
> 时间：2013-03-13T18:19:04.357
> 
> 标签：java, simpledateformat

我想要一个时间戳字段。我尝试了以下方法以获取`mmddyyyyhhmmss`格式时间。

所有字段都提供正确的数据，但月份字段的值不正确。

```
SimpleDateFormat simpleDateFormat = new SimpleDateFormat("mmddyyyyhhmmss");
String date = simpleDateFormat.format(new Date()); 
```

O/PI 得到的是 13132013021331。我期望的是 03133013021331。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T18:19:48.073

你的月份不应该是`MM`毫米

mm 表示分钟

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T18:19:39.610

> SimpleDateFormat mmddyyyy 返回不正确的月份数据

因为你月份的格式是错误的。

它应该是：

```
 new SimpleDateFormat("MMddyyyyhhmmss");
MM---> Month
mm---> minutes 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T18:20:02.707

你需要这个：

```
SimpleDateFormat simpleDateFormat = new SimpleDateFormat("MMddyyyyhhmmss"); 
String date = simpleDateFormat.format(new Date()); 
```

您使用了两次“mm” - 一个月一次（不正确），一次分钟（正确）。

# ios - NSJSONSerialization 和 UIPIckerView 的奇怪错误

> ID：15393365
> 
> 赞同：0
> 
> 时间：2013-03-13T18:19:04.590
> 
> 标签：ios, ios6, uipickerview, afnetworking, nsjsonserialization

我让我的程序工作的方式是它通过 AFHTTPClient 将数据下拉到程序中。然后我得到我的响应数据。然后我获取这些数据并通过 NSJSONSerialization 将其解析为 NSMutableArray。该数组用于填充 UIPickerView。

当用户打开应用程序或按下刷新按钮时会触发此方法。问题是当应用程序打开时，拨打电话，我取回数据。如果我去选择器，它似乎是空的，但是当你向下滚动时，底部的 5 个中有 2 个在那里，当你向上滚动时，其他人也进来了。如果我在任何时候按下刷新按钮，错误就会消失并且选择器已正确填充。为什么它不能正常工作？每次调用后我都会重新加载AllComponents。

```
-(void) getData{
// Paramaters
NSString *lat = @"40.435615";
NSString *lng = @"-79.987872";
NSDictionary *params = [NSDictionary dictionaryWithObjectsAndKeys: lat, @"lat", lng, @"lng", nil];

// posting the data and getting the response
AFHTTPClient *client = [[AFHTTPClient alloc] initWithBaseURL:[NSURL URLWithString:@"http://mysite.com/"]];
[client postPath:@"/mypostpath.php" parameters:params success:^(AFHTTPRequestOperation *operation, id responseObject) {
    NSString *text = [[NSString alloc] initWithData:responseObject encoding:NSUTF8StringEncoding];
    NSLog(@"Response: %@", text);

    NSError *error;
    json = [NSJSONSerialization JSONObjectWithData:responseObject options:kNilOptions error:&error];

    // setting the first location to the text feild
    NSDictionary* name = [json objectAtIndex:0];
    locationField.text = [name objectForKey:@"name"];

} failure:^(AFHTTPRequestOperation *operation, NSError *error) {
    NSLog(@"%@", [error localizedDescription]);
}];

// reload the picker
[pickerCust reloadAllComponents];

// setting the first location to the text feild
NSDictionary* name = [json objectAtIndex:0];
locationField.text = [name objectForKey:@"name"]; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T18:35:57.967

问题是因为在`[pickerCust reloadAllComponents];`加载数据的块完成之前调用了。将呼叫移动到`success`块中。

由于它与 UI 组件交互，因此将其包装在 an 中，`dispatch_async`以便在主队列上运行。

```
dispatch_async(dispatch_get_main_queue(), ^{
    [pickerCust reloadAllComponents];
}); 
```

# ios - 不寻常的转场难度

> ID：15393366
> 
> 赞同：0
> 
> 时间：2013-03-13T18:19:06.953
> 
> 标签：ios, xcode, uiviewcontroller, segue

所以我有一个加载了照片的滚动视图，然后在点击照片时转换到详细视图。只要我不离开滚动视图或详细视图，一切正常。当我从滚动视图退出并返回主菜单并再次尝试滚动视图时，点击照片时没有任何响应。当您再次退出并重试时，即使 segue 与第一次和第二次完全相同，我也会收到以下错误。关于出了什么问题的任何理论？

```
Warning: Attempt to present <detailscreen: 0x1f01a410> on <Scrollstream: 0x1f0b6d80> whose view is not in the window hierarchy! 
```

# php - UploadedFile 对象可以处理 symfony2 中的多个文件吗？

> ID：15393368
> 
> 赞同：0
> 
> 时间：2013-03-13T18:19:12.940
> 
> 标签：php, symfony, symfony-forms

当创建具有多文件字段的表单时，symfony2 为该字段的属性返回一个 UploadedFile 对象。

[http://api.symfony.com/2.2/Symfony/Component/HttpFoundation/File/UploadedFile.html](http://api.symfony.com/2.2/Symfony/Component/HttpFoundation/File/UploadedFile.html)

一个简单`var_dump($data->getFiles())`的（属性 $files 的方法）将返回：

```
["files":"Acme\DemoBundle\Entity\FileUpload":private]=>
  object(Symfony\Component\HttpFoundation\File\UploadedFile)#12 (7) {
    ["test":"Symfony\Component\HttpFoundation\File\UploadedFile":private]=> bool(false)
    ["originalName":"Symfony\Component\HttpFoundation\File\UploadedFile":private]=> string(10) "yop!!!.jpg"
    ["mimeType":"Symfony\Component\HttpFoundation\File\UploadedFile":private]=> string(10) "image/jpeg"
    ["size":"Symfony\Component\HttpFoundation\File\UploadedFile":private]=> int(34088)
    ["error":"Symfony\Component\HttpFoundation\File\UploadedFile":private]=> int(0)
    ["pathName":"SplFileInfo":private]=> string(24) "C:\xampp\tmp\php42B5.tmp"
    ["fileName":"SplFileInfo":private]=> string(11) "php42B5.tmp" 
```

该记录仅存储单个文件数据。

我的问题是：**这个对象可以处理多个文件吗？还是只是单个文件？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T18:55:59.607

这个对象代表一个文件！但是您仍然可以一次上传多个文件。每个文件都有一个单独的 FileUpload 实例。接受我的拉取请求尝试一下。

# javascript - AngularJS，通过动态ID获取元素？

> ID：15393370
> 
> 赞同：0
> 
> 时间：2013-03-13T18:19:15.330
> 
> 标签：javascript, angularjs

我正在使用 ng-repeat 来构建一个无序列表。我这样做是这样的：

```
<li id="listItem{{$index}}" ng-repeat="slide in data" ng-click="setActive(slide.slideIndex,$event)">
    <span class="listItemText">
    <b>{{slide.slideIndex + 1}}. </b>{{slide.Title}}
  </span>
</li> 
```

我给每个`<li>`人一个动态 ID`listItem0, listItem1, listItem2,....`等。**我需要在我的控制器中获取该元素**。我一直在尝试使用`angular.element()`，但我无法让它终生使用。

我需要该元素的原因是因为在某些事件中，我需要我的动画库 (TweenLite) 自动滚动到该位置。您可以像这样将元素传递给 TweenLite：

```
$scope.setActive = function(id, event)
{
    $scope.currentIndex = id;
    if (event) player.currentTime = $scope.data[id].time;
    if ($scope.autoScroll)
    {
        var target = document.getElementById("listItem" + id);
        TweenLite.to(slideList,0.5,{scrollTo:{y:target}});
    }
} 
```

问题`target`总是返回`null`。如果我将目标放在一个内部，`angular.element()`我会得到一个巨大的对象并且没有对实际对象的引用`<li>`（我能够找到）。

我在这里做错了什么和/或我应该以不同的方式来做这件事吗？谢谢。

**编辑**

```
player.addEventListener("timeupdate", function()
{
    currentTime = player.currentTime;
    angular.forEach($scope.data, function(value, key)
    {
        if (currentTime >= $scope.data[key].time && currentTime <= $scope.data[key].time + 0.3 && $scope.currentIndex != key)
        {
            $scope.$apply(function()
            {
                $scope.setActive(key);
            });     
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T18:27:38.640

您传递的事件已经包含对该元素的引用。试试这个：

```
TweenLite.to(slideList,0.5,{scrollTo:{y:event.target}}); 
```

# cocos2d-iphone - 使用 setDelay 和 addFrameWithFilename 时的警告

> ID：15393373
> 
> 赞同：1
> 
> 时间：2013-03-13T18:19:21.373
> 
> 标签：cocos2d-iphone, warnings, deprecated

我想在我的项目中使用以下代码行。

```
 // Create the intro image
    CGSize screenSize = [CCDirector sharedDirector].winSize;
    CCSprite *introImage = [CCSprite spriteWithFile:@"intro1.png"];
    [introImage setPosition:ccp(screenSize.width/2, screenSize.height/2)];
    [self addChild:introImage];

    // Create the intro animation, and load it from intro1 to intro7.png
    CCAnimation *introAnimation = [CCAnimation animation];
    [introAnimation setDelay:2.5f];
    for (int frameNumber=0; frameNumber < 8; frameNumber++) {
        CCLOG(@"Adding image intro%d.png to the introAnimation.",frameNumber);
        [introAnimation addFrameWithFilename:
         [NSString stringWithFormat:@"intro%d.png",frameNumber]]; 
```

我收到警告：

```
instance method '-setDelay:' not found (return type defaults to 'id') 
```

指着线

```
[introAnimation setDelay:2.5f]; 
```

以及指向该行的类似警告

```
[introAnimation addFrameWithFilename: [NSString stringWithFormat:@"intro%d.png",frameNumber]]; 
```

是否已弃用 setDelay 和 addFrameWithFilename？如果是，我应该用什么代替他们。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T18:31:19.140

嗯...不确定这些方法是否存在。这是我的代码库（cocos2 2.0 版）中的一个示例。

```
+ (CCAnimation *) getAnimationForSoldier:(Soldier *)theSoldier animationType:(mapAnimationTypeE)animationType {

    id animation = nil;
    NSString *animationName = [SpriteUtils getAnimationNameForSoldier:theSoldier animationType:animationType];
    if (!animationName) return nil;
    [[CCSpriteFrameCache sharedSpriteFrameCache] addSpriteFramesWithFile:[NSString stringWithFormat:@"%@.plist", animationName]];

    if ((animation = [[CCAnimationCache sharedAnimationCache] animationByName:animationName])) {
        return animation;
    } else {
        NSUInteger numberOfFrames = 8;
        if (animationType == mapAnimationTypeCast || animationType == mapAnimationTypeSkill) numberOfFrames = 20;
        NSMutableArray *frames = [NSMutableArray arrayWithCapacity:numberOfFrames];
        for (NSUInteger i = 1 ; i <= numberOfFrames ; i++) {
            NSString *frName = [SpriteUtils getFrameNameForAnimationNamed:animationName andFrame:i];
            CCSpriteFrame *frr = [[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:frName];
            if (frr) { 
               [frames addObject:frr];
            } else {
                MPLOGERROR(@"*** No frame named [%@], bailing out.", frName);
                return nil;
            }
            [frames addObject:frr];
        }

        animation = [CCAnimation animationWithSpriteFrames:frames delay:.06];
        [[CCAnimationCache sharedAnimationCache] addAnimation:animation name:animationName];

    }

    return animation;

} 
```

注意：首先创建您的 spriteframes 数组，然后使用该数组和所需的延迟创建动画。

延迟是每帧之间的延迟（不是总持续时间）。

如果你使用的是 cocos2d 2.N 版本，延迟的设置器是

```
animation.delayPerUnit = 0.6f; 
```

# java - 如何更改 JButton 的文本颜色

> ID：15393385
> 
> 赞同：15
> 
> 时间：2013-03-13T18:19:35.670
> 
> 标签：java, swing, colors, jbutton

我正在写一个简单的扫雷游戏，它现在可以工作了，但我正在研究一些漂亮的细节，比如让每个数字都变成不同的颜色。

当我尝试在`JButton`. 我可以很容易地更改文本和背景，但不能专门更改文本颜色。

一直搞砸的部分是：

```
total = Integer.toString(count);
jb.setText(total);              
if(count == 1)
    jb.setTextColor(Color.blue);
if(count == 2)
    jb.setTextColor(Color.green);
if(count == 3)
    jb.setTextColor(Color.red); 
```

由于某种原因，我的错误是：

```
*MS.java:109: error: cannot find symbol
                    jb.setTextColor(Color.blue);
                      ^
  symbol:   method setTextColor(Color)
  location: variable jb of type JButton
MS.java:112: error: cannot find symbol
                    jb.setTextColor(Color.green);
                      ^
  symbol:   method setTextColor(Color)
  location: variable jb of type JButton
MS.java:114: error: cannot find symbol
                    jb.setTextColor(Color.red);
                      ^
  symbol:   method setTextColor(Color)
  location: variable jb of type JButton
3 errors
Process javac exited with code 1*
```

每当我尝试编译时都会发生这种情况，但是当我将其更改为说`setBackgroundColor`而不是`setTextColor`它时，它就可以正常工作。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-03-13T18:21:53.970

`setTextColor`对于 JButton 是未定义的。要设置`JButton`文本颜色，您可以使用`setForeground`.

```
button.setForeground(Color.RED); 
```

# c# - 使用 Eval("columnName") 绑定到 GridView 中文本输入控件的字符串中的连字符 (-) 会切断连字符后的文本

> ID：15393387
> 
> 赞同：0
> 
> 时间：2013-03-13T18:19:45.750
> 
> 标签：c#, asp.net

我有一个绑定到数据源的 GridView。在 .aspx 文件中，我使用这样的东西

```
<asp:GridView...>
    <Columns>
       <asp:TemplateField>
               <ItemTemplate>
                      <input type="text" value='<%# Eval('type') %>'
...
</GridView> 
```

例如，当 type="Rock'n'Roll - guitar" 时，在数据绑定之后，输入中的文本在连字符之前被截断，所以剩下的是“Rock'n'Roll”

这也发生在引号（'）中，我尝试使用

```
<input type="text" value='<%# Server.HtmlEncode(Eval('type').ToString()) %>' 
```

这解决了字符串中引号的问题，但仍然存在连字符的问题。

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T21:18:32.330

这工作得很好

**Eval("type") 插入 Eval('type')** 标记

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="false">
<Columns>
<asp:TemplateField HeaderText="Type">
           <ItemTemplate>
                  <input type="text" value='<%#  Server.HtmlEncode( Eval("type").ToString()) %>' />
                  </ItemTemplate>
                  </asp:TemplateField>
</Columns>
</asp:GridView> 
```

演示代码隐藏

```
 DataTable dt = new DataTable();
        dt.Columns.Add("type", typeof(string)); 
        dt.Rows.Add("Rock'n'Roll - guitar");
        GridView1.DataSource = dt;
        GridView1.DataBind(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-10T20:57:26.343

尝试放置 `ItemStyle-Wrap="false"`. 我在做同样的事情时遇到了负数的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T18:49:52.213

看起来[Server.HtmlEncode()](http://msdn.microsoft.com/en-us/library/ms525347%28v=vs.90%29.aspx)不编码撇号。您能否尝试用双引号将属性括起来：

```
<input type="text" value="<%# Server.HtmlEncode(Eval('type').ToString()) %>" /> 
```

我怀疑这个连字符问题是值中的撇号使属性变得古怪的结果。

# css - 媒体查询与使用“%”有何不同？

> ID：15393392
> 
> 赞同：0
> 
> 时间：2013-03-13T18:19:59.470
> 
> 标签：css, layout, responsive-design

我知道媒体查询用于创建响应式布局。

然而，它们似乎是多余的；我们不能实现我们需要的一切`%`吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T18:21:24.713

使用帮助定义布局，`%`创建流畅的布局，而**不是响应**式布局。

媒体查询可帮助您为不同的屏幕尺寸定义不同的样式集。

同样使用媒体查询，您不必仅限于*身高和体重*，您可以控制的不仅仅是*尺寸*。

下面的示例为不同的屏幕尺寸创建不同的背景：

```
@media only screen and (min-width: 320px) {
   body { 
      background: red;
   }
}

@media only screen and (min-width: 780px) {
   body { 
      background: blue;
   }
} 
```

**能`%`做到吗？** 不

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T18:22:29.007

基于百分比的布局是流动的——其组件的宽度可以随着视口大小的变化而变化。然而，这并没有让他们做出反应。

响应式布局在不同的视口大小上应用了不同的 CSS。例如，两个具有 50% 宽度且在视口较大时彼此相邻浮动的块可能会更改为具有 100% 宽度并在视口较小时彼此堆叠。

# facebook - 查找所有“喜欢”XYZ 页面的 FB 用户

> ID：15393394
> 
> 赞同：1
> 
> 时间：2013-03-13T18:20:01.313
> 
> 标签：facebook, facebook-graph-api, facebook-like, facebook-fql

我正在尝试使用 Facebook Graph API 来提取用户 ID 列表，其中所述用户“喜欢”任何给定页面。例如：喜欢 fb 页面 id 10152294138493306&（可口可乐）的用户 ID 列表。

此外，是否可以根据年龄/性别等过滤此列表？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T21:39:39.887

[https://www.facebook.com/cocacola/likes](https://www.facebook.com/cocacola/likes)

你能看到喜欢这个页面的用户列表吗？不，此信息是私人信息。在 API 上也是如此。

# sql-server-2012 - .NET 4.5 表单应用程序连接到 SQL Server 2012 失败：SSL 提供程序，错误：0

> ID：15393398
> 
> 赞同：9
> 
> 时间：2013-03-13T18:20:09.697
> 
> 标签：sql-server-2012, .net-4.5, c#-5.0

我与在 Windows Server 2012 上运行的 SQL Server 2012 实例的连接出现问题。我在运行 Windows 7 的客户端计算机上安装了一个 .NET 4.5 Windows 窗体应用程序。我得到的错误是：

```
A connection was successfully established with the server, but then an error 
occurred during the pre-login handshake. (provider: SSL Provider, error: 0 - 
The wait operation timed out.) 
```

我的连接字符串如下所示：

```
server=SERVERNAME;database=DATABASENAME;User Id=someuser;password=somepassword;Timeout=60;app=LabelMaker 
```

[我尝试使用QueryExpress](http://www.albahari.com/queryexpress.aspx)从客户端计算机连接到 SQL Server， 并且成功了！如果有任何帮助，我的应用程序是 64 位的。我已经检查了 SQL Server 中我能想到的所有设置。协议（共享内存和 tcp/ip）上未启用强制加密，服务器上的域防火墙已打开。我尝试了各种带有各种闻所未闻参数的连接字符串，结果总是相同，失败。

我真的很困惑为什么它可以与 QueryExpress 一起使用？我的应用程序在连接到另一台机器上的 SQL SERVER Express 远程实例时可以工作，如果我在 SQL Server 2012 机器上运行它也可以工作。

我还尝试使用[LinqPad](http://www.linqpad.net/)从客户端计算机连接到服务器，这也很奇怪，基于 net4/4.5 的新版本（版本：4.43.06）它失败了，但是当我使用旧版本的 Linqpad 时（ 2.x) 基于 net3.5 它可以工作！

似乎是 Panda Security 引起了问题，我跑了

```
netsh winsock show catalog 
```

并找到了一些熊猫条目，然后我进行了重置

```
netsh winsock reset 
```

现在我的应用程序工作正常，然后我重新启动机器，再次运行目录命令，熊猫条目又回来了，我的应用程序遇到了和以前一样的问题。

以下是 winsock 目录中的 Panda 条目：[https ://gist.github.com/pellehenriksson/5159883](https://gist.github.com/pellehenriksson/5159883)

感谢所有想法和建议。

**更新**

Panda Security v5 是导致此问题的原因，这已由 Panda 支持部门确认。下面的 Alex 解释了问题的根本原因。客户将升级到熊猫安全v6，升级后我会再次测试。

**结论** 迁移到 Panda Security v6.0 解决了这个问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T08:58:39.103

这似乎是与 Microsoft 无关的问题：[Visual Studio 11 beta 安装禁用了我连接远程 MS SQL Server 但不是本地数据库](https://connect.microsoft.com/VisualStudio/feedback/details/729323/visual-studio-11-beta-installation-disabled-my-abillity-to-connect-remote-ms-sql-server-but-not-local-databases#tabs)的能力。

该票已**作为 external 关闭**。

目前在 Microsoft Connect 上可用的唯一解决方法是：

> Lars Joakim Nilsson 于 2012 年 5 月 4 日上午 5:03 发布
> 
> *我的机器有这个问题。我的解决方法是删除非 IFS LSP 安装的 Winsock 目录提供程序。硒 [http://support.microsoft.com/kb/2568167](http://support.microsoft.com/kb/2568167) /Lars Nilsson*

SetFileCompletionNotificationModes [API 导致 IO 完成端口无法与非 IFS LSP 安装](http://support.microsoft.com/kb/2568167)的链接正常工作，给出了解决方案：

> **未指定 FILE_SKIP_COMPLETION_PORT_ON_SUCCESS 标志或删除安装的任何非 IFS Winsock LSP。从非 IFS LSP 迁移到 Windows 筛选器平台 (WFP) 也可以解决此问题。**

因此，您应该删除 Panda Security，或者作为替代方案，您可以尝试`netsh winsock reset`作为预构建命令执行~~（尽管我不确定这是否在不重新启动的情况下有效）~~，这样您就可以开发/调试您的应用程序。

**[更新]**

此处提供有关应用程序兼容性的更多信息：[.NET Framework 4.5 中的应用程序兼容性](http://msdn.microsoft.com/en-us/library/hh367887.aspx)：

> **数据**
> 
> **SQL客户端**
> 
> **特征**
> 
> 能够从在 .NET Framework 4.5 下运行的托管代码连接到 SQL Server 数据库。
> 
> **改变**
> 
> 修改了现有的同步 API 代码路径以添加异步支持。
> 
> **影响**
> 
> **非 IFS Winsock 基本服务提供程序 (BSP) 或分层服务提供程序 (LSP) 的存在可能会干扰连接到 SQL Server 的能力**。有关详细信息，请参阅 SetFileCompletionNotificationModes API 导致 IO 完成端口无法与 Microsoft 支持网站上安装的非 IFS LSP 一起正常工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-09T21:00:44.077

我不想这么说，但重新启动 Visual Studio 和我的 Microsoft SQL Server Management Studio 解决了这个问题。

# php - 访问对象数组中最后一个对象的属性？

> ID：15393400
> 
> 赞同：1
> 
> 时间：2013-03-13T18:20:14.017
> 
> 标签：php, arrays, oop

假设您有一个包含不同数量对象的数组，您如何访问最后一个对象的属性？我尝试使用`end($array);`，但它给出了错误：`Object of class Post could not be converted to string`

课程是：

```
class Post {
        private $datafile;
        public $index;
        public $subIndex;
        public $poster;
        public $title;
        public $message;
        public $date;

// constructor and some unrelated methods here

        public function getCommentData($givenIndex) {
            $comments = null;
            $data = file($this->datafile);
            foreach($data as $row) {
                list($index, $subIndex, $poster, $message, $date) = explode('|', $row);
                $this->index = $subIndex; // SubIndex ties a Comment to a Post (same ID)
                if($this->index == $givenIndex) {
                    $comment = new Post();
                    $comment->poster = $poster;
                    $comment->message = $message;
                    $comment->date = date(DATEFORMAT, strtotime($date));
                    $comments[] = $comment;
                }
            }
            return $comments;
        }
} 
```

现在，我只想访问最后一个评论项的属性，但我不确定应该怎么做？在常规数组中，end() 快速且易于使用，但对象似乎不起作用呢？

这是一个示例 var_dump：

```
array (size=2)
  0 => 
    object(Post)[4]
      private 'datafile' => null
      public 'index' => null
      public 'subIndex' => null
      public 'poster' => string 'Postaaja' (length=8)
      public 'title' => null
      public 'message' => string 'Kommentti' (length=9)
      public 'date' => string '5 Mar 2013 | 23:12' (length=18)
  1 => 
    object(Post)[5]
      private 'datafile' => null
      public 'index' => null
      public 'subIndex' => null
      public 'poster' => string 'Toinenkin' (length=9)
      public 'title' => null
      public 'message' => string 'Lisäkommentti' (length=14)
      public 'date' => string '5 Mar 2013 | 23:13' (length=18) 
```

谢谢！

编辑：这是我尝试使用它的方式：

```
$comments = new Post(FILECOMMENTS);
$currentComments = $comments->getCommentData($i); // $i is the index of current newspost item

$newsComments = new Format();
$newsComments->formatShortComment($currentComments, $i); 
```

以及 Format 类中的方法：

```
// This comment is displayed as a short text in the main News view
public function formatShortComment($data, $index) {?>
    <div class="newsComments">
        <p class="newsPreviewComment">
        <?php 
            $lastItem = end($data);
            if(!empty($lastItem->message)) {
                echo '<i>&quot;',$lastItem->message,'&quot;</i> ';
                echo '-',$lastItem->poster;
            }
        ?></p>
        &raquo; <a href="?page=comments&amp;id=<?php echo $index; ?>">Show All/Add comments</a>
        (<?php echo $commentCount; ?>)
    </div><?php
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T18:40:27.813

你可以试试：

```
$tempArray = array_values($data);

$lastItem = $tempArray[count($tempArray)-1]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T18:49:46.067

我希望我没有错过一些重要的事情，但是如果您只是想获取 PHP 数组的最后一个元素：

```
$lastItem = $data[count($data) - 1]; 
```

# ios - 自然连接无法正常工作

> ID：15393401
> 
> 赞同：0
> 
> 时间：2013-03-13T18:20:15.290
> 
> 标签：ios, sql, sqlite, natural-join

我正在我的 iOS 应用程序中进行同步。我的文档文件夹中已经有一组表，并且在同步期间我正在从服务器下载数据到一组新表中。我正在比较各个表的数量，如果它们相同，我正在使用自然连接来检查它们实际上是否相同。如果它们相同，那么我的内容是最新的，我不需要对我当前的表集进行任何更改，否则我将获取新的表集并将新数据存储为我的当前表。

问题是，当我对某些表进行自然连接时，虽然我在 SQLITEMANAGER 中看到两个表的信息相同，但自然连接会返回错误的答案。不知道为什么。count_together 是错误的，即使值相同。

这就是我实施检查的方式（仅用于说明）：

```
 singleton.table = YES;
    int count_table1 = 0;
    int count_table2 = 0;
    int count_together  = 0;

   NSMutableArray *arrayTables = [[NSMutableArray alloc] initWithObjects:@"DATA",@"TABLE",@"NUMBERS",nil];

    NSMutableArray *arrayTables2 = [[NSMutableArray alloc] initWithObjects:@"DATA2",@"TABLE2",@"NUMBERS2", nil];

    for(int i =0; i<[arrayTables count]; i++)
    {
        count_table1 = [databaseManager checkCountOfTable:[NSString stringWithFormat:@"SELECT COUNT(*) FROM %@",[arrayTables objectAtIndex:i]]];

        count_table2 = [databaseManager checkCountOfTable:[NSString stringWithFormat:@"SELECT COUNT(*) FROM %@",[arrayTables2 objectAtIndex:i]]];

        NSLog(@"Count of Table 1 is %i",count_table1);
        NSLog(@"Count of Table 2 is %i",count_table2);

        if (singleton.table == YES)
        {
            if(count_table1 != count_table2)
            {
                singleton.table = NO;
            }
            else
            {
                count_together = [databaseManager checkCountOfTable:[NSString stringWithFormat: @"SELECT COUNT(*) FROM (%@ NATURAL JOIN %@)",[arrayTables objectAtIndex:i],[arrayTables2 objectAtIndex:i]]];

                NSLog(@"Count of Table 1 is %i",count_table1);
                NSLog(@"Count of Tables Together is %i",count_together);

                if (count_table1 == count_together)
                {
                    singleton.table = YES;
                }
                else
                {
                   singleton.table = NO;
                }
            }
        }

    } 
```

需要一些指导，欢迎提出建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T11:27:30.420

问题是表中有一些空列。因此，这些表上的 Natural JOIN 不起作用。必须确保表没有任何空列，并且 NATURAL JOIN 可以正常工作。

# mysql - Mysql为同一个schema类型多个表创建一个表名

> ID：15393405
> 
> 赞同：0
> 
> 时间：2013-03-13T18:20:33.937
> 
> 标签：mysql, database, database-design, database-schema

我正在创建 10 个具有相同架构的表来加载应用程序日志。

我创建了 10 个具有相同架构的表，最后我创建了一个别名，它将代表所有这 10 个表。

因此，它会关注当前活动表的选择以插入记录，因此一旦 table1 填充了更多记录，它将选择 table2 和下一个 table3....

因此，在选择记录时，它将检查所有 10 个表中的请求记录......

现在我的问题是，我忘记了我是如何创建的以及我使用了哪个语句。

如果有人知道，请让我知道这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T18:22:46.667

您正在重新发明[分区](http://dev.mysql.com/doc/refman/5.1/en/partitioning.html)，请使用 MySQL 为此提供的工具，它将为您节省大量时间和麻烦。

# extjs - 单击按钮时如何访问文本字段的值并存储在变量中

> ID：15393406
> 
> 赞同：0
> 
> 时间：2013-03-13T18:20:53.730
> 
> 标签：extjs, extjs4

这是代码的一部分。我有一个`Window`, 和一个`Form`在里面。有一个`text field`和一个`button`。我需要获取 的值`textfield`并将其保存到`var`用户单击`button`.

代码：

```
Ext.define('MyApp.view.MyV', {
    extend: 'Ext.window.Window',
    alias: 'widget.myV',

    id: 'myvid',

    initComponent: function() {
        var me = this;

        Ext.applyIf(me, {
            items: [
                {
                    xtype: 'form',
                    x: 15,
                    y: 40,
                    frame: true,
                    height: 420,
                    id: 'f11',
                    layout: {
                        type: 'absolute'
                    },

                        },
                                                 {
                            xtype: 'textareafield',
                            x: 150,
                            y: 185,
                            id: 'name',
                            width: 320,
                            fieldLabel: 'Name'
                        },
                        {
                            xtype: 'button',
                            x: 100,
                            y: 150,

                            text: 'Send',
                            listeners: {
                                click: {
                                    fn: me.onClickButton,
                                    scope: me
                                }
                            }
                        },
                                            ]
                }
            ],
…..

        }); 
```

动作，当用户点击按钮时；以下是我的代码

```
onClickButton: function(button, e, options) {

        var nameOfPerson    = this.up('form').down('#myvid > #f11 > #name'); 
```

有人可以帮我获取用户输入的值`textfield`并将其保存到变量`nameOfPerson`中。?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T18:54:33.247

```
Ext.define('Foo', {
    extend : 'Ext.window.Window',
    alias : 'widget.myV',

    id : 'myvid',

    initComponent : function() {
        var me = this;

        Ext.applyIf(me, {
            items : [{
                xtype : 'textareafield',
                width : 320,
                fieldLabel : 'Name',
                itemId: 'name'
            }, {
                xtype : 'button',
                text : 'Send',
                listeners : {
                    scope : me,
                    click : me.onClickButton
                }
            }]
        });
        this.callParent();
    },

    onClickButton: function(){
        var name = this.down('#name').getValue();
        console.log(name);
    }
}); 

Ext.onReady(function(){
    new Foo({
        autoShow: true
    });
}); 
```

# sed - 使用 sed 或 awk，如何更改分隔行中的第一个字段？

> ID：15393408
> 
> 赞同：1
> 
> 时间：2013-03-13T18:20:55.727
> 
> 标签：sed, awk, csv

我有一个分隔文件，其前几个字段如下所示：

```
2774013300|184500|2012-01-04 23:00:00| 
```

我想更改第一个字段等于或超过 8 个字符的某些行。我想截断第一列中的值。

在`2774013300`I 的情况下，它的值变为 become `27740133`。

我想在`sed`、 或中执行此操作`awk`。

使用`sed`，我可以在行首找到任何超过 8 位的数字，但我不太确定如何截断它，我假设使用替换。

```
sed -n -e /'^[0-9]\{10,\}/p' infile 
```

我想我可以对前 8 个字符进行分组并在替代命令中返回这些字符，但我不太确定该怎么做。

在 awk 中，我可以检测到第一个字段，但不太确定如何使用 substr 更改第一个字段然后返回其余字段，因此保留了整行。

```
awk -F'|'  '{ if (length($1) > 9) { print $1; print length($1);} }' infile 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T18:26:47.317

根据您的情况的微妙之处，您可以使用

```
sed 's/^\([0-9]\{8\}\)[0-9]*/\1/' infile 
```

或者

```
sed 's/^\([0-9]\{8\}\)[0-9]\{1,\}/\1/' infile 
```

使用 GNU sed 可以简化为

```
sed -r 's/^([0-9]{8})[0-9]+/\1/' infile 
```

或者，如果需要，添加`-n`and `p`。

例子：

```
$ sed 's/^\([0-9]\{8\}\)[0-9]*/\1/' <<<'2774013300|184500|2012-01-04 23:00:00|'
27740133|184500|2012-01-04 23:00:00| 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T21:29:25.703

使用 awk：

```
awk -F'|' 'BEGIN{OFS=FS}length($1)>9{$1=substr($1, 0,9)}{print}' 
```

例子：

```
$ echo "2774013300|184500|2012-01-04 23:00:00|" | awk -F'|' 'BEGIN{OFS=FS}length($1)>9{$1=substr($1, 0,9)}{print}'
27740133|184500|2012-01-04 23:00:00| 
```

# c - 在结构中声明双向链表

> ID：15393420
> 
> 赞同：0
> 
> 时间：2013-03-13T18:21:41.047
> 
> 标签：c, struct, doubly-linked-list

这是在结构中声明双向链表的正确程序吗？如果这有任何相关性，我正在使用该结构来读取文本文件。

```
#define MAX 20
//struct to order contactList
struct contact
{
    string firstName[MAX],lastName[MAX],email[MAX],companyName[MAX];
    long phoneNum[MAX];
    struct listelement *link
    struct node *next;
    struct node *prev;

}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T18:25:51.920

可能不是。通常，您会使用，`struct contact *next; struct contact *prev;`因为列表中的项目是（可能）`struct contact`而不是`struct node`.

因此，我希望看到：

```
#define MAX 20
//struct to order contactList
struct contact
{
    string              firstName[MAX];
    string              lastName[MAX];
    string              email[MAX];
    string              companyName[MAX];
    long                phoneNum[MAX];    /* 20 phone numbers per contact — wow! */
    struct listelement *link;             /* Semi-colon added.  What is this for? */
    struct contact     *next;
    struct contact     *prev;
}; 
```

结构的电子邮件元素太短（例如，我的主要电子邮件地址不适合；我建议您至少需要 32 个字节）。对于一个联系人来说，电话号码是非常多的。此外，`long`不会存储所有 10 位数的电话号码。

目前尚不清楚该`link`元素的用途。它可能是涉及这些结构的单链表的一部分。

# sql-server - Play Framework with Slick 通过 jtds 驱动程序连接到 SQL Server

> ID：15393423
> 
> 赞同：1
> 
> 时间：2013-03-13T18:21:44.540
> 
> 标签：sql-server, jtds, slick

我经历了几次尝试不同版本的 JTDS 驱动程序的迭代，但都没有成功。我切换到 Microsoft jar 并终于取得了一些成功。

```
**** jtds driver config ****
# Database configuration for M$ SqlServer <currently not working...jtds>
# db.default.url="jdbc:jtds:sqlserver://
an_ip_addy_to_a_server:1433/db_instance;user=user_name;password=user_password"
# db.default.driver=net.sourceforge.jtds.jdbc.Driver

**** M$ driver config ****
# Database configuration for M$ SqlServer <WORKING!!!..m$ driver>
db.default.url="jdbc:sqlserver://
an_ip_addy_to_a_server\db_instance:1433;user=user_name;password=user_password"
db.default.driver=com.microsoft.sqlserver.jdbc.SQLServerDriver 
```

差异？？

1) sqljdbc4.jar 是一个“非托管依赖项”：[http](http://www.playframework.com/documentation/2.1.0/SBTDependencies) ://www.playframework.com/documentation/2.1.0/SBTDependencies 2) 根据我阅读的每个文档，URL 字符串明显不同。

至少我现在可以开始取得一些进展。

-戴夫

我是 Scala 语言和堆栈的新手，我希望这是一个很容易解决的问题。

设置：

*   Play2（斯卡拉）
*   光滑的 1.0.0
*   SQL Server 2008
*   JTDS 1.3.0

每当我启动应用程序并点击初始页面 localhost:9000 时，似乎框架正在尝试获取与数据库的连接，但它抛出了一个异常：

有什么想法吗？

```
*** Build.scala ***
val appDependencies = Seq(
// Add your project dependencies here,
jdbc,
"com.typesafe.slick" %% "slick" % "1.0.0",
"ch.qos.logback" % "logback-classic" % "1.0.9",
"org.scalatest" % "scalatest_2.10" % "1.9.1" % "test",
"com.h2database" % "h2" % "1.3.170",
"net.sourceforge.jtds" % "jtds" % "1.3.0"
)

*** application.conf ***
# Database configuration for M$ SqlServer <currently not working>
 #db.default.url="jdbc:jtds:sqlserver://server_name/server_instance;user=user_name;password=password"
#db.default.driver=net.sourceforge.jtds.jdbc.Driver
#db.default.user=user_name
#db.default.pass=password
db.default.defaultSchema=default_schema

*** application.log ***
2013-03-08 14:29:06,950 - [INFO] - from play in main 
Listening for HTTP on /0:0:0:0:0:0:0:0:9000

2013-03-08 14:29:38,490 - [ERROR] - from com.jolbox.bonecp.hooks.AbstractConnectionHook in New I/O  worker #1 
Failed to obtain initial connection Sleeping for 0ms and trying again. Attempts left: 0\. Exception: java.io.IOException: DB server closed connection.

2013-03-08 14:29:38,540 - [ERROR] - from application in New I/O  worker #1 

! @6dhc9mlf5 - Internal server error, for (GET) [/] ->

play.api.Configuration$$anon$1: Configuration error[Cannot connect to database [default]]
    at play.api.Configuration$.play$api$Configuration$$configError(Configuration.scala:80) ~[play_2.10.jar:2.1.0]
    at play.api.Configuration.reportError(Configuration.scala:558) ~[play_2.10.jar:2.1.0]
    at play.api.db.BoneCPPlugin$$anonfun$onStart$1.apply(DB.scala:251) ~[play-jdbc_2.10.jar:2.1.0]
    at play.api.db.BoneCPPlugin$$anonfun$onStart$1.apply(DB.scala:242) ~[play-jdbc_2.10.jar:2.1.0]
    at scala.collection.TraversableLike$$anonfun$map$1.apply(TraversableLike.scala:244) ~[scala-library.jar:na]
    at scala.collection.TraversableLike$$anonfun$map$1.apply(TraversableLike.scala:244) ~[scala-library.jar:na]
    at scala.collection.immutable.List.foreach(List.scala:309) ~[scala-library.jar:na]
    at scala.collection.TraversableLike$class.map(TraversableLike.scala:244) ~[scala-library.jar:na]
    at scala.collection.AbstractTraversable.map(Traversable.scala:105) ~[scala-library.jar:na]
    at play.api.db.BoneCPPlugin.onStart(DB.scala:242) ~[play-jdbc_2.10.jar:2.1.0]
    at play.api.Play$$anonfun$start$1$$anonfun$apply$mcV$sp$1.apply(Play.scala:63) ~[play_2.10.jar:2.1.0]
    at play.api.Play$$anonfun$start$1$$anonfun$apply$mcV$sp$1.apply(Play.scala:63) ~[play_2.10.jar:2.1.0]
    at scala.collection.immutable.List.foreach(List.scala:309) ~[scala-library.jar:na]
    at play.api.Play$$anonfun$start$1.apply$mcV$sp(Play.scala:63) ~[play_2.10.jar:2.1.0]
    at play.api.Play$$anonfun$start$1.apply(Play.scala:63) ~[play_2.10.jar:2.1.0]
    at play.api.Play$$anonfun$start$1.apply(Play.scala:63) ~[play_2.10.jar:2.1.0]
    at play.utils.Threads$.withContextClassLoader(Threads.scala:18) ~[play_2.10.jar:2.1.0]
    at play.api.Play$.start(Play.scala:62) ~[play_2.10.jar:2.1.0]
    at play.core.ReloadableApplication$$anonfun$get$1$$anonfun$1.apply(ApplicationProvider.scala:133) ~[play_2.10.jar:2.1.0]
    at play.core.ReloadableApplication$$anonfun$get$1$$anonfun$1.apply(ApplicationProvider.scala:106) ~[play_2.10.jar:2.1.0]
    at scala.Option.map(Option.scala:145) ~[scala-library.jar:na]
    at play.core.ReloadableApplication$$anonfun$get$1.apply(ApplicationProvider.scala:106) ~[play_2.10.jar:2.1.0]
    at play.core.ReloadableApplication$$anonfun$get$1.apply(ApplicationProvider.scala:104) ~[play_2.10.jar:2.1.0]
    at scala.util.Either$RightProjection.flatMap(Either.scala:523) [scala-library.jar:na]
    at play.core.ReloadableApplication.get(ApplicationProvider.scala:104) ~[play_2.10.jar:2.1.0]
    at play.core.server.Server$class.sendHandler$1(Server.scala:56) [play_2.10.jar:2.1.0]
    at play.core.server.Server$$anonfun$getHandlerFor$4.apply(Server.scala:88) [play_2.10.jar:2.1.0]
    at play.core.server.Server$$anonfun$getHandlerFor$4.apply(Server.scala:87) [play_2.10.jar:2.1.0]
    at scala.util.Either$RightProjection.flatMap(Either.scala:523) [scala-library.jar:na]
    at play.core.server.Server$class.getHandlerFor(Server.scala:87) [play_2.10.jar:2.1.0]
    at play.core.server.NettyServer.getHandlerFor(NettyServer.scala:34) [play_2.10.jar:2.1.0]
    at play.core.server.netty.PlayDefaultUpstreamHandler.messageReceived(PlayDefaultUpstreamHandler.scala:103) [play_2.10.jar:2.1.0]
    at org.jboss.netty.channel.SimpleChannelUpstreamHandler.handleUpstream(SimpleChannelUpstreamHandler.java:75) [netty.jar:na]
    at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:565) [netty.jar:na]
    at org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:793) [netty.jar:na]
    at org.jboss.netty.handler.codec.http.HttpContentDecoder.messageReceived(HttpContentDecoder.java:104) [netty.jar:na]
    at org.jboss.netty.channel.SimpleChannelUpstreamHandler.handleUpstream(SimpleChannelUpstreamHandler.java:75) [netty.jar:na]
    at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:565) [netty.jar:na]
    at org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:793) [netty.jar:na]
    at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:296) [netty.jar:na]
    at org.jboss.netty.handler.codec.frame.FrameDecoder.unfoldAndFireMessageReceived(FrameDecoder.java:455) [netty.jar:na]
    at org.jboss.netty.handler.codec.replay.ReplayingDecoder.callDecode(ReplayingDecoder.java:538) [netty.jar:na]
    at org.jboss.netty.handler.codec.replay.ReplayingDecoder.messageReceived(ReplayingDecoder.java:437) [netty.jar:na]
    at org.jboss.netty.channel.SimpleChannelUpstreamHandler.handleUpstream(SimpleChannelUpstreamHandler.java:75) [netty.jar:na]
    at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:565) [netty.jar:na]
    at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:560) [netty.jar:na]
    at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:268) [netty.jar:na]
    at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:255) [netty.jar:na]
    at org.jboss.netty.channel.socket.nio.NioWorker.read(NioWorker.java:84) [netty.jar:na]
    at org.jboss.netty.channel.socket.nio.AbstractNioWorker.processSelectedKeys(AbstractNioWorker.java:472) [netty.jar:na]
    at org.jboss.netty.channel.socket.nio.AbstractNioWorker.run(AbstractNioWorker.java:333) [netty.jar:na]
    at org.jboss.netty.channel.socket.nio.NioWorker.run(NioWorker.java:35) [netty.jar:na]
    at org.jboss.netty.util.ThreadRenamingRunnable.run(ThreadRenamingRunnable.java:102) [netty.jar:na]
    at org.jboss.netty.util.internal.DeadLockProofWorker$1.run(DeadLockProofWorker.java:42) [netty.jar:na]
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source) [na:1.7.0_17]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) [na:1.7.0_17]
    at java.lang.Thread.run(Unknown Source) [na:1.7.0_17]
Caused by: java.sql.SQLException: I/O Error: DB server closed connection.
    at net.sourceforge.jtds.jdbc.TdsCore.nextToken(TdsCore.java:2388) ~[jtds-1.3.0.jar:1.3.0]
    at net.sourceforge.jtds.jdbc.TdsCore.login(TdsCore.java:609) ~[jtds-1.3.0.jar:1.3.0]
    at net.sourceforge.jtds.jdbc.JtdsConnection.<init>(JtdsConnection.java:369) ~[jtds-1.3.0.jar:1.3.0]
    at net.sourceforge.jtds.jdbc.Driver.connect(Driver.java:183) ~[jtds-1.3.0.jar:1.3.0]
    at java.sql.DriverManager.getConnection(Unknown Source) ~[na:1.7.0_17]
    at java.sql.DriverManager.getConnection(Unknown Source) ~[na:1.7.0_17]
    at com.jolbox.bonecp.BoneCP.obtainRawInternalConnection(BoneCP.java:256) ~[bonecp.jar:0.7.1.RELEASE]
    at com.jolbox.bonecp.BoneCP.<init>(BoneCP.java:305) ~[bonecp.jar:0.7.1.RELEASE]
    at com.jolbox.bonecp.BoneCPDataSource.maybeInit(BoneCPDataSource.java:150) ~[bonecp.jar:0.7.1.RELEASE]
    at com.jolbox.bonecp.BoneCPDataSource.getConnection(BoneCPDataSource.java:112) ~[bonecp.jar:0.7.1.RELEASE]
    at play.api.db.BoneCPPlugin$$anonfun$onStart$1.apply(DB.scala:244) ~[play-jdbc_2.10.jar:2.1.0]
    ... 54 common frames omitted
Caused by: java.io.IOException: DB server closed connection.
    at net.sourceforge.jtds.jdbc.SharedSocket.readPacket(SharedSocket.java:883) ~[jtds-1.3.0.jar:1.3.0]
    at net.sourceforge.jtds.jdbc.SharedSocket.getNetPacket(SharedSocket.java:762) ~[jtds-1.3.0.jar:1.3.0]
    at net.sourceforge.jtds.jdbc.ResponseStream.getPacket(ResponseStream.java:477) ~[jtds-1.3.0.jar:1.3.0]
    at net.sourceforge.jtds.jdbc.ResponseStream.read(ResponseStream.java:114) ~[jtds-1.3.0.jar:1.3.0]
    at net.sourceforge.jtds.jdbc.TdsCore.nextToken(TdsCore.java:2282) ~[jtds-1.3.0.jar:1.3.0]
    ... 64 common frames omitted 
```

# java - Java/Netbeans：JList.getModel() 返回 ListModel 而不是 DefaultListModel

> ID：15393424
> 
> 赞同：0
> 
> 时间：2013-03-13T18:21:45.607
> 
> 标签：java, swing, netbeans, jlist, defaultlistmodel

我正在使用 NetBeans 7.3 创建一个 java 应用程序。
我有一个“创建新的 Foo”向导，它在多个框架之间共享一个 JPanel。
JPanel 对象实现了一个我设置的 JList，如下所示：

[http://img811.imageshack.us/img811/5717/customcodepvmarketlist.jpg](http://img811.imageshack.us/img811/5717/customcodepvmarketlist.jpg)

使用另一个函数，我希望能够测试 JList 的内容，如下所示：

```
//Adds a market to the list, if it doesn't exist.
//Removes a market from the list, if it does exist.
//If removing a market causes the list to become empty,
//insert 'None'

public String modifyMarket(String market) {
    if(pvMarketList.getModel().contains(market)) {
        //More Code   
    }         
} 
```

我无法在 '.contains(market)' 上进行上述测试，因为 .getModel() 返回的是 ListModel 而不是 DefaultListModel。

问题是什么？我怎样才能解决这个问题？

**更新**
我也许可以通过将 ListModel 转换为 DefaultListModel 来解决这个问题，但我仍然对为什么返回 ListModel 感到困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T18:52:02.477

A`JList`需要一个实例`ListModel`才能工作。此实例可以是 的实例`DefaultListModel`，但您可以创建自己的`ListModel`实现并使用它来代替`DefaultListModel`.

顺便说一句，JList 的构造函数请注意，使用不是 DefaultListModel 实例的 ListModel 构造一个 JList。

如果您知道它是`DefaultListModel`, 因为这是您在构造列表时传递的内容，那么您可以安全地将返回的内容`ListModel`转换为`DefaultListModel`.

# javascript - AngularJS 指令 - 将 ngModel 与 jQuery 小部件一起使用时的最佳实践

> ID：15393427
> 
> 赞同：11
> 
> 时间：2013-03-13T18:21:55.507
> 
> 标签：javascript, angularjs, angularjs-directive

这是我的问题。例如，我们有以下指令，它在幕后使用了一些 jQuery 小部件：

```
module.directive('myWidget', [function() {
    return {
        require: "ngModel",
        restrict: "A",
        replace: true,
        templateUrl: "templates/myWidget.html",
        link: function(scope, element, attrs, ctrl) {
            element.widget_name().on('value_updated', function(event) {
                scope.$apply(function() {
                    var newModelValue = event.some_value;
                    ctrl.$setViewValue(newModelValue);
                });
            });

            scope.$watch(attrs["ngModel"], function(value){
                element.widget_name('set_value', value);
            });
        }
    };
}]); 
```

因此，如果模型的值发生变化，那么使用 $watch 注册的用于监听模型变化的处理程序将被执行，因此，小部件的 'set_value' 方法也将被执行。这意味着将触发“value_updated”事件。

我的问题是：在指令中实现类似行为以避免额外调用 DOM 事件处理程序和观察程序的最佳实践是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T19:44:10.713

而不是`scope.$watch()`，我建议实施`ctrl.$render()`。$render 只有在 Angular 内部的某些东西改变了模型时才应该被调用。 [小提琴示例](http://jsfiddle.net/mrajcok/SKgVS/)。

这解决了一个你没有提到的问题。不幸的是，它并没有解决您提到的问题。在小提琴中，`blur`绑定了一个事件，而不是一些 widget.on() 事件。也许这对你有用——即，只在模糊时更新模型，而不是每次击键（这假设你的小部件正在接受击键）。

也许您还可以要求小部件作者提供不触发事件的“设置”方法。然后可以在 $render() 方法中使用它。

# perl - 有没有办法在命令行上发出样板调试器命令？

> ID：15393429
> 
> 赞同：1
> 
> 时间：2013-03-13T18:22:04.213
> 
> 标签：perl, debugging

我希望能够做类似的事情：

```
perl -d my-program.pl -c 'b postpone Foo::Bar::some_func' 
```

即指定作为`perl -d`我通常在调试器提示符下输入的命令调用的一部分，即`b postpone Foo::Bar::some_func`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T19:31:58.033

从[`man perldebug`](http://perldoc.perl.org/perldebug.html)，你可以使用[源文件](http://perldoc.perl.org/perldebug.html#source-file)

启动调试器后，将一些常用命令放入文件和源代码中。

# html - 如何制作更安全的表格

> ID：15393434
> 
> 赞同：1
> 
> 时间：2013-03-13T18:22:23.773
> 
> 标签：html, forms, security

我最近启动了一个新网站，并在其中使用了 Salesforce.com 提供给我的表单代码，因此表单结果会进入该系统。这是代码：

```
<form action="https://www.salesforce.com/servlet.WebToLead?encoding=UTF-8" method="POST">
  <div id="email_signup"> 
    <input type=hidden name="oid" value="00000000000000">
    <input type=hidden name="retURL" value="http://www.example.com/thank-you">                                 
    <input type="text" name="email" id="input_newsletter_email" maxlength="80" style="display:none;"/> 
    <label for="first_name">First Name</label>
        <input  id="first_name" maxlength="40" name="first_name" size="20" type="text" /><br>
    <label for="last_name">Last Name</label>
        <input  id="last_name" maxlength="80" name="last_name" size="20" type="text" /><br>
    <label for="company">Company</label>
        <input  id="company" maxlength="40" name="company" size="20" type="text" /><br>
    <label for="email">Email</label>
        <input  id="email" maxlength="80" name="email" size="20" type="email" required /><br>
    <label for="phone">Phone</label>
        <input  id="phone" maxlength="40" name="phone" size="20" type="phone" /><br>
  </div>
</form> 
```

我们收到了一些垃圾邮件注册，例如“公司：nxlhfzxg，潜在客户名称：rnsoniinqe rnsoniinqe”

这些似乎没有任何目的，但它们经常出现。

我在电子邮件中添加了 required 属性，因为我认为这可能会有所帮助，但它没有。他们刚刚开始输入随机电子邮件。

你知道吗：

1.  为什么会发生这种情况
2.  我能做些什么来防止它？Wufoo是一个不错的选择吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T19:43:41.187

发生这种情况是因为编写提交此类表单的脚本很简单。

你能做什么：

> 1) 实施验证码
> 2) 实施一个人类可以轻松回答的问题：即天空的颜色是什么
> 3) 使用简单的电子邮件正则表达式检查器（只需验证它有一个`@`和 a `.`），这会阻止数量惊人的这些请求.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T21:32:45.777

您可能还想使用一些[已知的垃圾邮件列表](http://spam-ip.com/)来筛选来自垃圾邮件发送者的 IP 。当有人向您发送垃圾邮件时，请将他们的 IP 添加到列表中。

# ms-access - 连接到 TFS 以添加（和维护）MS-Access 应用程序的版本控制

> ID：15393440
> 
> 赞同：1
> 
> 时间：2013-03-13T18:22:49.263
> 
> 标签：ms-access, version-control, msscci

我的任务是获取一个现有应用程序（用 Microsoft Access 编写，在 2003 运行时下运行）并将其放入我们的 TFS 2012 版本控制系统。

我以为我可以使用 2012 MSSCCI 提供程序来执行此操作，但是当我尝试添加 TFS 服务器时，虽然它允许我选择 http 或 https、服务器名称和服务器端口，但它不允许我进入剩余的路径。

因此，我无法让它在 上找到我的 TFS 服务器`http://server:8080/tfs`，因为我可以通过该接口获得的最接近的接口是`http://server:8080`不存在的，返回 HTTP 代码 404：未找到。

如果有可行的替代方案，我不承诺使用 MSSCCI，但我必须使用 TFS（我不能为此设置另一个版本控制系统）。

# c - 混淆 C 代码竞赛 2006。请解释一下 sykes2.c

> ID：15393441
> 
> 赞同：991
> 
> 时间：2013-03-13T18:22:49.453
> 
> 标签：c, obfuscation, deobfuscation

这个 C 程序是如何工作的？

```
main(_){_^448&&main(-~_);putchar(--_%64?32|-~7[__TIME__-_/8%8][">'txiZ^(~z?"-48]>>";;;====~$::199"[_*2&8|_/64]/(_&2?1:8)%8&1:10);} 
```

它按原样编译（在 上测试`gcc 4.6.3`）。它在编译时打印时间。在我的系统上：

```
 !!  !!!!!!              !!  !!!!!!              !!  !!!!!! 
    !!  !!  !!              !!      !!              !!  !!  !! 
    !!  !!  !!              !!      !!              !!  !!  !! 
    !!  !!!!!!    !!        !!      !!    !!        !!  !!!!!! 
    !!      !!              !!      !!              !!  !!  !! 
    !!      !!              !!      !!              !!  !!  !! 
    !!  !!!!!!              !!      !!              !!  !!!!!! 
```

来源：[sykes2 - 一行中的时钟](http://www.ioccc.org/years-spoiler.html#2006)，[sykes2 作者提示](http://www.ioccc.org/2006/sykes2/hint.text)

一些提示：默认情况下没有编译警告。编译时`-Wall`会发出以下警告：

```
sykes2.c:1:1: warning: return type defaults to ‘int’ [-Wreturn-type]
sykes2.c: In function ‘main’:
sykes2.c:1:14: warning: value computed is not used [-Wunused-value]
sykes2.c:1:1: warning: implicit declaration of function ‘putchar’ [-Wimplicit-function-declaration]
sykes2.c:1:1: warning: suggest parentheses around arithmetic in operand of ‘|’ [-Wparentheses]
sykes2.c:1:1: warning: suggest parentheses around arithmetic in operand of ‘|’ [-Wparentheses]
sykes2.c:1:1: warning: control reaches end of non-void function [-Wreturn-type] 
```

* * *

## 回答 #1

> 赞同：1833
> 
> 时间：2013-03-13T19:46:48.970

让我们去混淆它。

缩进：

```
main(_) {
    _^448 && main(-~_);
    putchar(--_%64
        ? 32 | -~7[__TIME__-_/8%8][">'txiZ^(~z?"-48] >> ";;;====~$::199"[_*2&8|_/64]/(_&2?1:8)%8&1
        : 10);
} 
```

引入变量来解开这个混乱：

```
main(int i) {
    if(i^448)
        main(-~i);
    if(--i % 64) {
        char a = -~7[__TIME__-i/8%8][">'txiZ^(~z?"-48];
        char b = a >> ";;;====~$::199"[i*2&8|i/64]/(i&2?1:8)%8;
        putchar(32 | (b & 1));
    } else {
        putchar(10); // newline
    }
} 
```

请注意，`-~i == i+1`由于二进制补码。因此，我们有

```
main(int i) {
    if(i != 448)
        main(i+1);
    i--;
    if(i % 64 == 0) {
        putchar('\n');
    } else {
        char a = -~7[__TIME__-i/8%8][">'txiZ^(~z?"-48];
        char b = a >> ";;;====~$::199"[i*2&8|i/64]/(i&2?1:8)%8;
        putchar(32 | (b & 1));
    }
} 
```

现在，请注意[`a[b]`与 相同`b[a]`](https://stackoverflow.com/a/1995156/1204143)，并再次应用`-~ == 1+`更改：

```
main(int i) {
    if(i != 448)
        main(i+1);
    i--;
    if(i % 64 == 0) {
        putchar('\n');
    } else {
        char a = (">'txiZ^(~z?"-48)[(__TIME__-i/8%8)[7]] + 1;
        char b = a >> ";;;====~$::199"[(i*2&8)|i/64]/(i&2?1:8)%8;
        putchar(32 | (b & 1));
    }
} 
```

将递归转换为循环并进一步简化：

```
// please don't pass any command-line arguments
main() {
    int i;
    for(i=447; i>=0; i--) {
        if(i % 64 == 0) {
            putchar('\n');
        } else {
            char t = __TIME__[7 - i/8%8];
            char a = ">'txiZ^(~z?"[t - 48] + 1;
            int shift = ";;;====~$::199"[(i*2&8) | (i/64)];
            if((i & 2) == 0)
                shift /= 8;
            shift = shift % 8;
            char b = a >> shift;
            putchar(32 | (b & 1));
        }
    }
} 
```

每次迭代输出一个字符。每第 64 个字符，它输出一个换行符。否则，它使用一对数据表来确定要输出什么，并输入字符 32（空格）或字符 33（a `!`）。第一个表 ( `">'txiZ^(~z?"`) 是一组 10 个位图，描述每个字符的外观，第二个表 ( `";;;====~$::199"`) 从位图中选择要显示的适当位。

### 第二张表

让我们从检查第二个表开始`int shift = ";;;====~$::199"[(i*2&8) | (i/64)];`。`i/64`是行号（6 到 0），`i*2&8`如果`i`是 4、5、6 或 7 mod 8，则为 8。

`if((i & 2) == 0) shift /= 8; shift = shift % 8`选择表值的高八进制数字（对于`i%8`= 0、1、4、5）或低八进制数字（对于 = 2、3、6、7） `i%8`。班次表最终看起来像这样：

```
row col val
6   6-7 0
6   4-5 0
6   2-3 5
6   0-1 7
5   6-7 1
5   4-5 7
5   2-3 5
5   0-1 7
4   6-7 1
4   4-5 7
4   2-3 5
4   0-1 7
3   6-7 1
3   4-5 6
3   2-3 5
3   0-1 7
2   6-7 2
2   4-5 7
2   2-3 3
2   0-1 7
1   6-7 2
1   4-5 7
1   2-3 3
1   0-1 7
0   6-7 4
0   4-5 4
0   2-3 3
0   0-1 7 
```

或以表格形式

```
00005577
11775577
11775577
11665577
22773377
22773377
44443377 
```

请注意，作者对前两个表条目使用了空终止符（偷偷摸摸！）。

这是在七段显示之后设计的，`7`s为空白。因此，第一个表中的条目必须定义被点亮的段。

### 第一张表

[`__TIME__`](http://gcc.gnu.org/onlinedocs/cpp/Standard-Predefined-Macros.html)是预处理器定义的特殊宏。它扩展为包含预处理器运行时间的字符串常量，格式为`"HH:MM:SS"`. 请注意，它正好包含 8 个字符。请注意，0-9 的 ASCII 值是 48 到 57，`:`ASCII 值是 58。输出为每行 64 个字符，因此`__TIME__`.

`7 - i/8%8`因此`__TIME__`是当前正在输出的索引（`7-`因为我们正在`i`向下迭代，所以需要它）。所以，`t`是输出的特性`__TIME__`。

`a`最终等于以下二进制，具体取决于输入`t`：

```
0 00111111
1 00101000
2 01110101
3 01111001
4 01101010
5 01011011
6 01011111
7 00101001
8 01111111
9 01111011
: 01000000 
```

每个数字都是描述在我们的七段显示器中点亮的段的*位图。*由于字符都是 7 位 ASCII，所以总是清除高位。因此，`7`在段表中总是打印为空白。第二个表看起来像这样，其中`7`s 为空白：

```
000055  
11  55  
11  55  
116655  
22  33  
22  33  
444433 
```

因此，例如，`4`is `01101010`（设置了第 1、3、5 和 6 位），打印为

```
----!!--
!!--!!--
!!--!!--
!!!!!!--
----!!--
----!!--
----!!-- 
```

* * *

为了表明我们真的理解代码，让我们用这张表稍微调整一下输出：

```
 00  
11  55
11  55
  66  
22  33
22  33
  44 
```

这被编码为`"?;;?==? '::799\x07"`. 出于艺术目的，我们将在几个字符中添加 64（因为只使用了低 6 位，这不会影响输出）；这给出了`"?{{?}}?gg::799G"`（请注意，第 8 个字符未使用，因此我们实际上可以随意制作它）。将我们的新表放入原始代码中：

```
main(_){_^448&&main(-~_);putchar(--_%64?32|-~7[__TIME__-_/8%8][">'txiZ^(~z?"-48]>>"?{{?}}?gg::799G"[_*2&8|_/64]/(_&2?1:8)%8&1:10);} 
```

我们得到

```
 !!              !!                              !!   
    !!  !!              !!  !!  !!  !!              !!  !!  !! 
    !!  !!              !!  !!  !!  !!              !!  !!  !! 
          !!      !!              !!      !!                   
    !!  !!  !!          !!  !!      !!              !!  !!  !! 
    !!  !!  !!          !!  !!      !!              !!  !!  !! 
          !!              !!                              !! 
```

正如我们所料。它不像原版那样坚固，这就解释了为什么作者选择使用他做的桌子。

* * *

## 回答 #2

> 赞同：104
> 
> 时间：2013-03-13T21:11:25.860

让我们对其进行格式化以便于阅读：

```
main(_){
  _^448&&main(-~_);
  putchar((--_%64) ? (32|-(~7[__TIME__-_/8%8])[">'txiZ^(~z?"-48]>>(";;;====~$::199")[_*2&8|_/64]/(_&2?1:8)%8&1):10);
} 
```

因此，在没有参数的情况下运行它，_（通常为 argc）是`1`. `main()`将递归调用自身，传递`-(~_)`（负位 NOT of `_`）的结果，所以实际上它会进行 448 次递归（仅条件 where `_^448 == 0`）。

考虑到这一点，它将打印 7 个 64 字符宽的行（外部三元条件和`448/64 == 7`）。所以让我们把它改写得更干净一点：

```
main(int argc) {
  if (argc^448) main(-(~argc));
  if (argc % 64) {
    putchar((32|-(~7[__TIME__-argc/8%8])[">'txiZ^(~z?"-48]>>(";;;====~$::199")[argc*2&8|argc/64]/(argc&2?1:8)%8&1));
  } else putchar('\n');
} 
```

现在，`32`ASCII 空间是十进制的。它要么打印一个空格，要么打印一个“！” （33 是 '!'，因此最后是 ' `&1`'）。让我们关注中间的blob：

```
-(~(7[__TIME__-argc/8%8][">'txiZ^(~z?"-48]) >>
     (";;;====~$::199"[argc*2&8|argc/64]) / (argc&2?1:8) % 8 
```

正如另一位海报所说，`__TIME__`是程序的编译时间，并且是一个字符串，所以有一些字符串算术正在进行，以及利用数组下标是双向的：a[b] 与 b[a] 相同对于字符数组。

```
7[__TIME__ - (argc/8)%8] 
```

这将选择 中的前 8 个字符之一`__TIME__`。然后将其编入索引`[">'txiZ^(~z?"-48]`（0-9 个字符是十进制的 48-57）。此字符串中的字符必须已为其 ASCII 值选择。相同的字符 ASCII 代码操作通过表达式继续，导致打印 ' ' 或 '!' 取决于角色字形中的位置。

* * *

## 回答 #3

> 赞同：49
> 
> 时间：2013-03-14T23:54:55.973

添加到其他解决方案，`-~x`等于`x+1`因为`~x`等于`(0xffffffff-x)`。这等于`(-1-x)`2s 补码，`-~x`所以`-(-1-x) = x+1`.

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-04-21T14:48:57.980

我尽可能地对模运算进行了去混淆，并删除了递归

```
int pixelX, line, digit ;
for(line=6; line >= 0; line--){
  for (digit =0; digit<8; digit++){
    for(pixelX=7;pixelX > 0; pixelX--){ 
        putchar(' '| 1 + ">'txiZ^(~z?"["12:34:56"[digit]-'0'] >> 
          (";;;====~$::199"[pixel*2 & 8  | line] / (pixelX&2 ? 1 : 8) ) % 8 & 1);               
    }
  }
  putchar('\n');
} 
```

进一步扩展它：

```
int pixelX, line, digit, shift;
char shiftChar;
for(line=6; line >= 0; line--){
    for (digit =0; digit<8; digit++){
        for(pixelX=7;pixelX >= 0; pixelX--){ 
            shiftChar = ";;;====~$::199"[pixelX*2 & 8 | line];
            if (pixelX & 2)
                shift = shiftChar & 7;
            else
                shift = shiftChar >> 3;     
            putchar(' '| (">'txiZ^(~z?"["12:34:56"[digit]-'0'] + 1) >> shift & 1 );
        }

    }
    putchar('\n');
} 
```

# vba - 带有#N/A 数据的 Excel 协方差矩阵

> ID：15393443
> 
> 赞同：1
> 
> 时间：2013-03-13T18:23:07.140
> 
> 标签：vba, excel, matrix, covariance

我正在尝试计算股票时间序列数据的协方差矩阵（此处显示了一个样本）。我正在尝试编写一个代码，该代码允许我计算灵活日期的协方差并将其放在矩阵表中。但是，我一直被#N/A 值所困扰。有什么方法可以让包含 #N/A 值的行在计算中被忽略，从而让我获得协方差值？我需要先对数据进行排序吗？关于使代码灵活适应不同日期范围的提示也将不胜感激。非常感谢![数据](../Images/f02d5d43e3a0aa177c1182a0f2aa0c2b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T18:51:09.800

ISNA 函数可用于检查#N/A（值不可用）错误。例如 =`IF(ISNA(B1),"",B1)`它会检查单元格 B1 中的#N/A，如果它为真，它将使其变为空白或您想要指定的任何内容，否则它将打印 B1 值。

![在此处输入图像描述](../Images/45bc7287ae86e3dcaccfae079f4899ae.png)

# wordpress - 自定义帖子类型、页面和帖子之间的 URL 冲突

> ID：15393445
> 
> 赞同：0
> 
> 时间：2013-03-13T18:23:09.143
> 
> 标签：wordpress

我创建了一个自定义帖子类型“abcd”，当我创建相应的帖子“测试”时，网址说

```
 mysite.com/abcd/test/ 
```

现在我创建了一个页面，它将显示所有类型为“abcd”的自定义帖子。我需要这个页面的 url 看起来像

```
 mysite.com/abcd 
```

怎么做？

还可以说我创建了一个类似 url mysite.com/abcd 的帖子，现在当我尝试打开这个 url 时，技术上应该显示什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T19:35:55.573

这很快将成为重写规则的噩梦。我建议在这里重新考虑你的方法。我现在正在做类似的事情，我所做的是：

*   创建了一个名为 Games 的自定义帖子类型（将单数设置为游戏）
*   创建了一个名为 Schedule 的页面，并制作了一个模板，该模板本质上是 Games 帖子类型的存档
*   将日程 URL 设置为 /schedule/，将游戏日程设置为 /game/

所以现在如果用户想要查看日程，他们可以去 /schedule/ 并查看游戏列表。如果他们点击游戏，URL 将类似于 /game/month-day-opponentCity-opponentTeam/

# .net - 如何在 System.Windows.Forms.MenuItem 上放置图像？

> ID：15393448
> 
> 赞同：0
> 
> 时间：2013-03-13T18:23:16.167
> 
> 标签：.net, contextmenu, menuitem

我正在使用**LEGACY** [ContextMenu](http://msdn.microsoft.com/en-us/library/system.windows.forms.contextmenu.aspx)，因为我喜欢它在 Windows 7 中的外观。

有谁知道我如何在[MenuItem](http://msdn.microsoft.com/en-ca/library/system.windows.forms.menuitem%28v=vs.110%29.aspx)上放置图像（没有所有者绘图） ？或者这是一个限制？

编辑：这不是 ContextMenuStrip - 显然这很容易做到。请重新阅读我的问题并查看提供的实际控件链接。

# mysql - MySQL - 在 WHERE CLAUSE 中选择未知列

> ID：15393449
> 
> 赞同：-1
> 
> 时间：2013-03-13T18:23:30.317
> 
> 标签：mysql

我正在使用以下查询：

```
$sql = $db->Query("SELECT a.id, a.t_name, a.cpc FROM twitter a LEFT JOIN users b ON b.id = a.user LEFT JOIN followed c ON c.user_id = '".$data['id']."' AND c.site_id = a.id WHERE a.active = '0' AND (b.coins >= a.cpc AND a.cpc >= '2') AND (c.site_id IS NULL AND a.user !='".$data['id']."')".$dbt_value." ORDER BY a.cpc DESC".($site['mysql_random'] == 1 ? ', RAND()' : '')." LIMIT 14"); 
```

但我想补充一点：

```
AND (a.d_max > '0' OR a.d_max = u) AND (a.max > '0' OR a.max = u) 
```

所以我将其添加到：

```
$sql = $db->Query("SELECT a.id, a.t_name, a.cpc FROM twitter a LEFT JOIN users b ON b.id = a.user LEFT JOIN followed c ON c.user_id = '".$data['id']."' AND c.site_id = a.id WHERE a.active = '0' AND (a.d_max > '0' OR a.d_max = u) AND (a.max > '0' OR a.max = u) AND (b.coins >= a.cpc AND a.cpc >= '2') AND (c.site_id IS NULL AND a.user !='".$data['id']."')".$dbt_value." ORDER BY a.cpc DESC".($site['mysql_random'] == 1 ? ', RAND()' : '')." LIMIT 14"); 
```

但是我收到以下错误：

SQL 错误：“where 子句”中的未知列“u”：

我知道这应该很简单，但我只是想念它，你们能找出问题所在吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T18:38:16.527

应该是这样的

```
AND (a.d_max > '0' OR a.d_max = 'u') AND (a.max > '0' OR a.max = 'u') 
```

# jquery - Scroll overflow bug in Chrome

> ID：15393455
> 
> 赞同：3
> 
> 时间：2013-03-13T18:23:58.537
> 
> 标签：jquery, datatables

Took me a while to catch it,

```
Chrome (Windows 7): 25.0.1364.152 m
Datatables: 1.9.4
jQuery: 1.8.3
jQuery-UI: 1.9.2 
```

Set Chrome's Zoom to 90%:

[http://jsfiddle.net/MfsWX/2/embedded/result/](http://jsfiddle.net/MfsWX/2/embedded/result/)

[http://jsfiddle.net/MfsWX/2/](http://jsfiddle.net/MfsWX/2/)

Entire row in now overflowed out of the screen.

This bug can appear and disappear depending on the data inside of `<td>`s, but in this particular example - it shows clearly.

Why don't `"sScrollX": "100%"` and `"sScrollY": "100%"` work properly?

How to fix it?

FF and IE9 don't have this issue.

Please help. Thanks.

EDIT: Submitted to developer [http://www.datatables.net/forums/discussion/14536/scroll-overflow-bug-in-chrome#Item_1](http://www.datatables.net/forums/discussion/14536/scroll-overflow-bug-in-chrome#Item_1), but everyone is asleep there. =)

**EDIT 2: For those who suffer =) and need temporary solution:**

```
#reports-table_wrapper {
    overflow-x: auto;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T12:38:37.313

这似乎是唯一可用的解决方案：

```
#reports-table_wrapper {
    overflow-x: auto;
} 
```

# android - switch to a new activity, instead of switching fragments, when jfeinstein10's slidingmenu list item is clicked

> ID：15393456
> 
> 赞同：8
> 
> 时间：2013-03-13T18:23:58.987
> 
> 标签：android, slidingmenu

I have seen a few questions raised on this topic (for e.g.: [https://github.com/jfeinstein10/SlidingMenu/issues/5](https://github.com/jfeinstein10/SlidingMenu/issues/5)) but I am still unclear. I hope somebody can clarify this.

Context:

See [https://github.com/jfeinstein10/SlidingMenu](https://github.com/jfeinstein10/SlidingMenu)

I have an android app that organizes screens by activities and fragments (i.e.) each screen is an activity containing one or more fragments. The new requirement is to add a sliding menu (similar to what this library provides).

Issue:

It appears from the examples and discussion that the right model would be to have just 1 MAIN ACTIVITY that will then switch in/out fragments belonging to the different screens. In fact the author mentions in the above thread: "If you were to launch Activities based upon the list selection, then you would not have the behavior where you swap the views that you're talking about. " and also "You can't put an Activity into the above view. That doesn't really make sense when you think about what an Activity is. ".

Why doesn't it make sense? Obviously, I am missing the point here.

Question:

Given that my project already contains multiple activities (one corresponding to each screen), is my only option then to re-organize the project to have JUST 1 MAIN ACTIVITY, in order to use this library? Or alternatively, is there any way to launch a new activity when a list item in the sliding menu is clicked, and still observe the sliding menu behavior, [**EDIT**- added the last part to be more clear] or in other words, on how exactly to use this library within my existing app design.

Thanks in advance

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T19:16:49.350

首先，您不能拥有另一个内部，并且活动与[文档](http://developer.android.com/reference/android/app/Activity.html)`Activity`中所述的视图完全不同：

> 活动是用户可以做的一个单一的、有重点的事情。

现在，要回答您的问题，这完全取决于您希望应用程序的行为方式。您可以使用滑动菜单实现您的活动并`onClosedListener`从那里切换到所选活动。这将为您提供在切换活动之前关闭菜单的动画。它还会给你一种奇怪的效果，因为每次你从菜单中选择一些东西时，你都会看到一个新活动的动画出现在前面。

我认为最好的方法是在所有滑动菜单选项之间有一个“共同目的”。例如，在我的一个项目中，我必须允许用户在不同类型的数据列表之间进行选择。当用户从菜单中选择任何内容时，我会在右上角加载一个新的列表片段，他可以在其中选择他想要查看或编辑的项目。那是应用程序入口点，也是我的应用程序中有一个滑动菜单的唯一地方。对于实现此 UI 设计模式的每个应用程序来说，它几乎都是一样的。查看 google+、currents 和 youtube，其中的侧边菜单可让您选择要显示的提要或内容。一旦用户做出选择，只需为所选项目（g+ 帖子、视频、新闻文章、推文或其他任何内容）打开一个新活动。

您的应用程序不必具有不同数据的列表或类似的东西来使用滑动菜单，但请记住，使用滑动菜单的 Activity 应该就其功能和目的有一个明确、集中的目标。因为许多其他应用程序都有滑动菜单，所以使用滑动菜单是一个糟糕的选择，您应该将其用于特定目标。还要记住，在任何地方都应用滑动菜单会干扰平台的[导航模式](http://developer.android.com/design/patterns/navigation.html)并导致整体糟糕的用户体验，因为它不会像其他应用程序那样运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T04:32:28.210

在上面的视图中放置一个 Activity 是没有意义的，因为 Activity 是每个屏幕视图的主控制器。Activity 还显示视图并跟踪 Fragment（它们又是迷你控制器，有或没有自己的视图）。因此，在上面的视图中放置一个 Activity 将意味着您将一个 Activity 放置在一个 Activity 中......这是不可能的。

根据我从您的文字中可以得出的信息，我认为再次阅读有关活动和片段的 Android 开发人员指南（[http://developer.android.com/guide/components/activities.html](http://developer.android.com/guide/components/activities.html)）以获得更好的理解是明智的Android 的概念是如何运作的。

现在回答你的问题：

我不清楚您要实现什么，但是如果您希望您的应用程序的菜单表现得像 Google+ 应用程序，那么一种方法是实现一个扩展 Activity 类的基类（或任何项目中使用的基本活动）并让基本设置SlidingMenu。然后，您可以在每个应该有菜单的活动中简单地扩展您的基本活动。

你也可以按照你描述的方式来做，但是你最终会得到一个上帝对象的经典例子（[http://en.wikipedia.org/wiki/God_object](http://en.wikipedia.org/wiki/God_object)）。这是练习 Fragment 杂耍技巧和在 Fragment 之间切换而不是开始新活动的一种巧妙方法，确实有它的用例，但我仍然不建议将它用于具有更多视图的项目。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T20:34:36.530

这是最接近我遇到的问题的答案 - [http://www.verious.com/article/polishing-the-sliding-app-menu/](http://www.verious.com/article/polishing-the-sliding-app-menu/)。向下滚动到页面底部以查看标题为“在活动之间使用飞入式应用程序菜单”的最后一部分。如果您在现有应用程序中有大量活动并希望避免大量重构，这是一种选择。我还没有尝试过，但值得留意。

# php - Registration confirmation php

> ID：15393461
> 
> 赞同：0
> 
> 时间：2013-03-13T18:24:16.610
> 
> 标签：php, html, email, web, registration

When a person registers to my website, I am trying to add the registration to the database and then email them a confirmation. The database add works, but my program doesn't email them. Any idea where I'm going wrong?

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">  
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />  
</head>  
<body>  
<div id="main">

<?php
{
  include "base.php"; //connect to database
  if(isset($_POST['register'])){
    $email = mysqli_real_escape_string($_SESSION['base'], $_POST['email']);
    $password = md5(mysqli_real_escape_string($_SESSION['base'], $_POST['password']));
    $firstname = mysqli_real_escape_string($_SESSION['base'], $_POST['firstName']);
    $lastname = mysqli_real_escape_string($_SESSION['base'], $_POST['lastName']);
    $addressline1 = mysqli_real_escape_string($_SESSION['base'], $_POST['addressLine1']);
    $addressline2 = mysqli_real_escape_string($_SESSION['base'], $_POST['addressLine2']);
    $city = mysqli_real_escape_string($_SESSION['base'], $_POST['city']);
    $county = mysqli_real_escape_string($_SESSION['base'], $_POST['county']);
    $postcode = mysqli_real_escape_string($_SESSION['base'], $_POST['postCode']);
    $phoneno = mysqli_real_escape_string($_SESSION['base'], $_POST['phoneNo']);

    $checkemail = mysqli_query($_SESSION['base'], "SELECT * FROM Users WHERE Email =   '".$email."'");
  }

  if(mysqli_num_rows($checkemail) == 1) {
?>
         <h1>Register</h1>

                <p>Please enter your details below to register.</p>

                <form action='register.php' method='post' name='registerform' id='registerform'>
                    <label for='email'>Email:</label><input type='text' name='email' id='email' /><br />
                    <label for='password'>Password:</label><input type='password' name='password' id='password' /><br />
                    <label for='firstname'>First Name:</label><input type='text' name='firstName' id='firstName' /><br />
                    <label for='lastname'>Last Name:</label><input type='text' name='lastName' id='lastName' /><br />
                    <label for='addressline1'>Address Line 1:</label><input type='text' name='addressLine1' id='addressLinel' /><br />
                    <label for='addressline2'>Address Line 2:</label><input type='text' name='addressLine2' id='addressLine2' /><br />
                    <label for='city'>City:</label><input type='text' name='city' id='city' /><br />
                    <label for='county'>County:</label><input type='text' name='county' id='county' /><br />
                    <label for='postcode'>Postcode:</label><input type='text' name='postCode' id='postCode' /><br />
                    <label for='phoneno'>Phone no:</label><input type='text' name='phoneNo' id='phoneNo' /><br />
                    <input type='submit' name='register' id='register' value='Register' />
                </form>
                <?php
    echo "<h1>Error</h1>";
    echo "<p>Sorry, that Email is taken. Please go back and try again.</p>";
}
else
{
    $registerquery = mysqli_query($_SESSION['base'], "INSERT INTO Users (Email, Password,   FirstName, LastName, AddressLine1, AddressLine2, City, County, PostCode, PhoneNo) 
    VALUES('".$email."', '".$password."', '".$firstname."', '".$lastname."',  '".$addressline1."', '".$addressline2."', '".$city."', '".$county."', '".$postcode."', '".$phoneno."')");
    if($registerquery)
{
$to = "email";
$subject = "Email Verification mail";
$headers = "From: cameron@abandoned \r\n";
$headers .= "Reply-To: cameron@abandoned.com \r\n";
$headers .= "MIME-Version: 1.0\r\n";
$headers .= "Content-Type: text/html; charset=ISO-8859-1\r\n";

$message = '<html><body>';
$message.='<div style="width:550px; background-color:#CC6600; padding:15px; font-    weight:bold;">';
$message.='Email Verification mail';
$message.='</div>';
$message.='<div style="font-family: Arial;">Confiramtion mail have been sent to your email     id<br/>';
$message.='hello cameron ';
$message.='</div>';
$message.='</body></html>';

mail($email,$subject,$message,$headers);
}

        echo "<h1>Success</h1>";
        echo "<p>Your account was successfully created. Please <a    href=\"index.php\">click here to login</a>.</p>";

    }
    else
    {   
        echo "<h1>Error</h1>";
        echo "<p>Sorry, your registration failed. Please enter your details again.   </p>";
    }       
}
}
else{
?>
<h1>Register</h1>

 <p>Please enter your details below to register.</p>

    <form action='register.php' method='post' name='registerform' id='registerform'>
        <label for='email'>Email:</label><input type='text' name='email' id='email' /><br />
        <label for='password'>Password:</label><input type='password' name='password' id='password' /><br />
        <label for='firstname'>First Name:</label><input type='text' name='firstName' id='firstName' /><br />
        <label for='lastname'>Last Name:</label><input type='text' name='lastName' id='lastName' /><br />
        <label for='addressline1'>Address Line 1:</label><input type='text' name='addressLine1' id='addressLinel' /><br />
        <label for='addressline2'>Address Line 2:</label><input type='text' name='addressLine2' id='addressLine2' /><br />
        <label for='city'>City:</label><input type='text' name='city' id='city' /><br />
        <label for='county'>County:</label><input type='text' name='county' id='county' /><br />
        <label for='postcode'>Postcode:</label><input type='text' name='postCode' id='postCode' /><br />
        <label for='phoneno'>Phone no:</label><input type='text' name='phoneNo' id='phoneNo' /><br />
        <input type='submit' name='register' id='register' value='Register' />
    </form>
<?php
?>
<html>
<?php
}
?>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T18:32:15.333

您是否尝试使用本地主机等从您自己的网络服务器发送电子邮件？因为如果您想发送电子邮件，您还需要有一个邮件服务器。对我来说，我不想要本地邮件服务器，因此我创建了该功能并在站点的 prodserver 上对其进行测试。

# gem - What can I do about a Bundler::GemfileNotFound error?

> ID：15393462
> 
> 赞同：23
> 
> 时间：2013-03-13T18:24:16.880
> 
> 标签：gem, rvm, bundler, gemfile

I just installed bundler-1.3.3 successfully. However, when I try to run bundle install I get

```
Bundler::GemfileNotFound 
```

What is wrong here?

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2013-04-02T17:52:39.133

cd 进入有 Gemfile 的目录

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-16T19:47:12.437

以我的经验，当您的代码没有在您认为的目录中执行时（因此之前的答案），或者包含 Gemfile 的目录已被移动或删除，就会发生这种情况。

当我在运行使用 Capistrano 部署的应用程序的服务器上运行 unicorn 时，我遇到了这种情况。清理一些旧的“发布”文件夹后，当我尝试限制部署新版本时出现此错误。

因为 unicorn 是使用 bundle exec 启动的，所以它仍然使用启动目录中的 Gemfile；发送 USR2 信号会告诉它重新加载应用程序，但它仍然会在加载新部署的应用程序之前使用旧的 Gemfile。当然，当我删除旧版本时，我已经删除了那个 Gemfile。

解决方案是在新目录中使用新的 bundle exec 重新启动 unicorn，以加载新的 Gemfile，然后加载新的应用程序。

所以，上面的答案是正确的。你只需要弄清楚为什么你认为你正在使用的 Gemfile 没有被使用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-01T18:42:01.920

对于那些在尝试安装 Redmine 时遇到此问题的人，请确保您位于顶级 Redmine 文件夹中。`gem install bundler`从 root 运行时，运行将起作用。但是“捆绑安装”必须从您的 Redmine 文件夹中运行。一旦我`bundle install`从 Redmine 文件夹运行，“Bundler:GemFileNotFound”错误就消失了。

请记住，这仅适用于那些在尝试安装 Redmine 时遇到此错误的人。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-10-25T11:44:28.760

运行`rubygems-bundler-uninstaller`或如果找不到命令，请使用 this 运行`gem uninstall rubygems-bundler`。

[从这里](https://stackoverflow.com/questions/10610254/cant-install-compass-via-rvm)得到解决方案。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-11-12T20:50:41.763

我重新安装了 ruby​​gems-bundler（得到 1.4.2），现在即使使用 rvm（使用 Ruby 1.9.3）罗盘也可以工作

```
gem install rubygems-bundler 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-12-11T01:12:56.883

这里有一个安装Redmine的工作脚本。你可以复制他们的做法。有用。

[https://manageacloud.com/cookbook/redmine](https://manageacloud.com/cookbook/redmine)

# ruby-on-rails - Are there any Bitcoin Payment solutions for Ruby?

> ID：15393464
> 
> 赞同：11
> 
> 时间：2013-03-13T18:24:21.717
> 
> 标签：ruby-on-rails, ruby, bitcoin

Working in Ruby (and perhaps Rails). Are there any ways of accepting and managing payments in Bitcoin for Ruby or Rails?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T18:32:55.237

你看过Github吗：[https ://github.com/lian/bitcoin-ruby](https://github.com/lian/bitcoin-ruby)

还有一些其他的宝石与用 Ruby 编写的比特币相关。

查看查询：[https ://github.com/search?q=bitcoin+ruby&type=Repositories&ref=searchresults](https://github.com/search?q=bitcoin+ruby&type=Repositories&ref=searchresults)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-13T18:44:35.413

这里有一个 Ruby 示例代码[https://en.bitcoin.it/wiki/API_reference_%28JSON-RPC%29#Ruby](https://en.bitcoin.it/wiki/API_reference_%28JSON-RPC%29#Ruby)
也可以在 Github 中查看这个 gem [https://github.com/davout/bitcoin-central](https://github.com/davout/bitcoin-central)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-08-29T01:36:58.993

[比特币_应付](https://github.com/Sailias/bitcoin_payable)

我创建的可以包含在 rails 应用程序中的 gem。

它使用来自 BIP32 确定性种子的唯一地址创建付款。这些付款使用不同的货币从货币 -> BTC 中获取汇率。

一个 rake 任务使用 BTC 24 小时加权平均值每 30 分钟更新一次付款，而另一个使用[helloblock.io](https://helloblock.io/)检查付款。

它不是一个购物车解决方案，而是一个比特币支付生成器/处理器 gem，不需要索引区块链或在您的服务器上存储私钥。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-07-07T10:18:54.423

我从 Dave Thomas 很棒的教程“Rails 中的敏捷 Web 开发”开始在 RoR 中开发[http://microbitcoin.fr 。](http://microbitcoin.fr)它显示带有电子邮件通知、二维码 pdf 发票下载等的比特币购物车/结账（允许其他付款方式）。为每笔交易生成一个新的比特币地址。该应用程序具有创建和更新产品目录的完整管理功能。我集成了一个确定性比特币钱包，这样店主就可以使用普通的电子钱包来接收付款，而网络服务器不持有任何私钥。应用程序只知道钱包的主公钥：这是最安全的选择。欢迎提供反馈，我很乐意分享代码。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-10-31T14:53:32.037

我开发了一个 RoR 网站，它使用比特币支付共享托管费用。

来源在这里：[https ://github.com/georgeu2000/coinhost](https://github.com/georgeu2000/coinhost)

# javascript - Kill Ajax Session Outside of Originating Function

> ID：15393465
> 
> 赞同：0
> 
> 时间：2013-03-13T18:24:21.890
> 
> 标签：javascript, ajax, jquery, setinterval

I have an AJAX function I'd like to kill, but it is outside of the function. Take a look:

```
function waitForMsg(){

       var heartbeat = $.ajax({
            type: "GET",
            url: "includes/push_events.php",
            tryCount : 0,
            retryLimit : 3,
            async: true,
            cache: false,
            // timeout: 500,

            success: function(data){ 
                console.log(data);
                if(data){
                    if(data.current_date_time){
                        updateTime(data.current_date_time);
                    }
                    if(data.color){
                        console.log("Receiving data");
                        displayAlert(data.color, data.notification_message, data.sound, data.title);
                    }
                    if(data.user_disabled){
                        console.log("Receiving data");
                        fastLogoff();
                        checkDisabled();
                    }       

                }
                setTimeout(
                    waitForMsg,
                    5000 
                );
            },

            error: function(data){
                if (data.status == 500) {
                    console.log("Connection Lost to Server (500)");
                        $.ajax(this);
                } else {
                    console.log("Unknown Error. (Reload)");
                        $.ajax(this);
                }

            },

            dataType: "json"

        });
    };

    // Detect browser open.

    $(document).ready(function(){

        // window.onunload = function(){alert('closing')};

        // mainmode();

        $('#alertbox').click(function(){
                $('#alertbox').slideUp("slow");
        });

        $(document).ready(function(){

    $('#alertbox').click(function(){
            $('#alertbox').slideUp("slow");
    });

    // Check focal point
    var window_focus = true;

           $(window).focus(function() {
                window_focus = true;
                console.log('Focus');
            });

            $(window).blur(function() {
                window_focus = false;
                console.log('Blur');
            });

    setInterval(function(){
        if(window_focus == true){
            console.log('in focus');
            waitForMsg();
        }else{
            console.log('out of focus');
            heartbeat.abort();
        }

    }, 5000);
});

    }); 
```

If you notice, the ajax is outside of the document.ready. I am trying to kill the ajax calls if the user goes to a different window, then restart the calls once the return to the window. The start works, but if the user goes away from the window, it gives me the "heartbeat is not defined". Obviously this is because its outside of that function. Any work arounds?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T18:49:24.447

我会重构一些代码以避免使用`setInterval`和清理代码。

您可以抽象对象中的逻辑，比如说`Request`. 您可以添加两个方法来`resume`处理`stop`底层 AJAX 请求的状态。

```
var Request = function(options){
    var request = this, xhr = null, aborted = false;

    /* Resumes the operation.
     * Starts a new request if there's none running.
     */
    request.resume = function() {
        aborted = false;
        request.retry();
    };

    /* Retry loop.
     */
    request.retry = function(){
        if(!xhr) {
            xhr = $.ajax(options).done(function(){
                request.destroy();
                !aborted && setTimeout(function(){
                    request.retry();
                }, options.timeout);
            });
        }
    };

    /* Aborts the current operation.
     */
    request.abort = function(){
        aborted = true;
        if(xhr) xhr.abort();
        request.destroy();
    };

    /* Destroy.
     */
    request.destroy = function(){
        xhr = null;
    };

    return request;
}; 
```

现在，您可以删除`setInterval`.

```
$(function () {
    var request = new Request({
        type: "GET",
        url: "includes/push_events.php",
        timeout: 5000,
        success: function(data){ 
            /* Success handler */
        },
        error: function(data){
            /* Error handler */
        },
        dataType: "json"
    });

    $(window).focus(function () {
        request.resume();
    }).blur(function () {
        request.abort();
    });

    request.resume();
}); 
```

`Request`构造函数接收`$.ajax`应该包含一个附加参数的选项，该参数`timeout`指定请求之间的延迟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T18:33:07.577

您需要在 window.blur 之后停止进一步的请求。在 window.focus 之后重新启动请求。

修改后的代码

```
var setTimeoutConst;
function waitForMsg(){
        if(!window_focus){
             return; //this will stop further ajax request
        }
       var heartbeat = $.ajax({
            type: "GET",
            url: "includes/push_events.php",
            tryCount : 0,
            retryLimit : 3,
            async: true,
            cache: false,
            // timeout: 500,

            success: function(data){ 
                console.log(data);
                if(data){
                    if(data.current_date_time){
                        updateTime(data.current_date_time);
                    }
                    if(data.color){
                        console.log("Receiving data");
                        displayAlert(data.color, data.notification_message, data.sound, data.title);
                    }
                    if(data.user_disabled){
                        console.log("Receiving data");
                        fastLogoff();
                        checkDisabled();
                    }       

                }
                setTimeoutConst= setTimeout(waitForMsg,5000);
            },
            error: function(data){
                if (data.status == 500) {
                    console.log("Connection Lost to Server (500)");
                       // $.ajax(this);
                } else {
                    console.log("Unknown Error. (Reload)");
                        //$.ajax(this);
                }
                setTimeoutConst= setTimeout(waitForMsg,5000); // continue sending request event if last request fail
            },
            dataType: "json"

        });
    };

var window_focus = true;
$(document).ready(function(){

    $('#alertbox').click(function(){
        $('#alertbox').slideUp("slow");
    });

    $('#alertbox').click(function(){
            $('#alertbox').slideUp("slow");
    });
    // Check focal point
     $(window).focus(function() {
        if(window_focus ){return}
        window_focus = true;
        waitForMsg(); 
        console.log('Focus');
    });
   $(window).blur(function() {
          if(!window_focus ){return}
        clearTimeout(setTimeoutConst);
        window_focus = false;
        console.log('Blur');
    });

    waitForMsg();            
}); 
```

# django - Nginx + gunicorn + django

> ID：15393467
> 
> 赞同：1
> 
> 时间：2013-03-13T18:24:22.643
> 
> 标签：django, nginx, gunicorn

Using this stack is giving me problems with django compressor and less static files. If I run the django dev server behind nginx there is no problem. If I try gunicorn, I get errors from gunicorn saying it can't find the less files. Why would gunicorn be looking for static files?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T12:15:30.220

您还需要以某种方式映射 gunicorn 中的静态文件。在 uwsgi 中，指令是

```
static-map /static=/var/www/your-project/static 
```

我认为问题在于 Gunicorn 本身无法访问静态文件，因为路由确实只存在于 Nginx 级别。你必须告诉它文件在哪里。

# xml - Why doesn't xlink link?

> ID：15393469
> 
> 赞同：0
> 
> 时间：2013-03-13T18:24:25.790
> 
> 标签：xml, dom, svg, xlink

When a SVG file that has xlinks are loaded and appended from another source the xlinks don't link. I had the problem with loading both a local file and a file from the server. The files load and all the SVG is in the DOM. Everything works great except the xlink does not link. I got this code to work for local files.

```
 xmlDoc = document.implementation.createDocument('http://www.w3.org/2000/svg', 'svg:svg', null);
    xmlDocRoot = xmlDoc.documentElement;

    if (fil[0])
    {
        var blobURLref = window.URL.createObjectURL(fil[0]);

        xmlDoc.onload = function(evt) {
            xmlDocRoot = xmlDoc.documentElement;
            SVGRootImgs.appendChild(xmlDocRoot);
        }
        xmlDoc.src = xmlDoc.load(blobURLref);   

        window.URL.revokeObjectURL(blobURLref);
    } 
```

where fil[0] is the local file that was loaded with files method. With that code the xlinks will link. When I try to load from the server, I tried the following code.

```
 htmlObjImgs = document.getElementById("hom_img");
        SVGDocImgs = htmlObjImgs.getSVGDocument();
        var crt_date = new Date();
        var fd = new FormData();
        fd.append('usrname', usr_nam);
        fd.append('filename', fil_nam);
        var xhr = new XMLHttpRequest();

        xhr.onload = function() {  

            SVGRootImgs = SVGDocImgs.documentElement;
            var rspns_xhr = xhr.responseXML.documentElement;

            ld_tag_nods(ld_nodes = rspns_xhr.getElementsByTagNameNS(svgns, 'svg'), function(){

                var svg_fil = SVGDocImgs.createElementNS(svgns, "svg");

                ld_svg_fil(svg_fil = SVGDocImgs.importNode(ld_nodes[0], true), function(){

                    SVGRootImgs.appendChild(svg_fil);
                });
            });
        }  
        xhr.onerror = function() {  
            dump("Error while getting XML.");  
        }  
        xhr.open('POST', 'ld_fil.php?nocache='+crt_date, true);
        xhr.responseType = "document";
        xhr.overrideMimeType("image/svg+xml");
        xhr.send(fd); 
```

Where ld_tag_nods() and ld_svg_fil() are undefined callbacks.

This code will load everything 100%, and that includes the xlinks, but the xlinks won't link. Any SVG that doesn't use the xlink displays, but any SVG that uses the xlink will not display.

I should note that the same file is used for both the local file and server file. The file has the xlink references in the SVG tag.

I suppose I could find a way around the problem. For example, I could create a URL to a blob which might work. But, I would like to know why the server code xlinks won't link. Is it because the files come from a foreign source?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T05:37:48.560

我认为当节点从一个文档转移到另一个文档时，应该使用 importNode()。如果我跳过 importNode()，该文件会加载所有 xlinks 链接。我也没有收到任何错误或警告。我想我得到了它的工作，但我当然不明白这个过程。这是有效的代码。

```
htmlObjImgs = document.getElementById("hom_img");
SVGDocImgs = htmlObjImgs.getSVGDocument();
SVGRootImgs = SVGDocImgs.documentElement;

var crt_date = new Date();
var fd = new FormData();
fd.append('usrname', usr_nam);
fd.append('filename', fil_nam);
var xhr = new XMLHttpRequest();

xhr.onload = function() {  
  SVGRootImgs.appendChild(xhr.responseXML.documentElement);
}  
xhr.onerror = function() {  
  dump("Error while getting XML.");  
}  
xhr.open('POST', 'ld_fil.php?nocache='+crt_date, true);
xhr.responseType = "document";
xhr.overrideMimeType("image/svg+xml");
xhr.send(fd); 
```

# javascript - ASP.NET MVC 4 AJAX.BeginForm and PartialViews

> ID：15393474
> 
> 赞同：3
> 
> 时间：2013-03-13T18:24:49.330
> 
> 标签：javascript, asp.net, ajax, asp.net-mvc-4, partial-views

I am considering building a SPA using AJAX.BeginForm, however I am facing an issue when a user has JavaScript disabled, instead of redirecting him to _Layout.cshtml + PartialView.cshtml, it redirects him to just the PartialView.cshtml..

Is there a way to include the Layout and the PartialView in it (where it would be if JavaScript was enabled)?

Thanks

Edit:

Awesome.. Thanks.. I managed to get it working but I am not sure it's the best implementation..

```
 [HttpPost]
    public ActionResult Index(Newsletter newsletter)
    {
        if (ModelState.IsValid)
        {
            db.Newsletters.Add(newsletter);
            db.SaveChanges();
            ViewData["message"] = "thanks for signing up to our newsletter!";
            if (Request.IsAjaxRequest())
            {
                return PartialView( "SimpleMessage" );
            }
        }
        return View();
    } 
```

And SimpleMessage.phtml is simply just @ViewData["message"];

whereas my View.phtml I have got a condition and checks whether ViewBag["message"] is set or not. If it's set, then it means it's a postback and doesn't show the form and shows the message instead, or else it shows the form:

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T18:33:32.003

您可以检查是否通过 Ajax 调用了 Action，并返回不同类型的结果

```
public ActionResult MyAction()
{
    if(Request.IsAjaxRequest()) {
        // Html fragment
        return PartialView();
    }
    else {
        // Complete HTML page
        return View();
    }
} 
```

如果是回发，您也可以传递您的模型或简单类型（int、string）：

```
[HttpPost]
public ActionResult MyAction(Model model)
{
    if(Request.IsAjaxRequest()) {
        // Html fragment
        return PartialView(model);
    }
    else {
        // Complete HTML page
        return View(model);
    }
} 
```

**编辑：**在你的*具体情况下*，我会这样做，但这只是我的偏好。

```
[HttpPost]
public ActionResult Index(Newsletter newsletter)
{
    if (ModelState.IsValid)
    {
        db.Newsletters.Add(newsletter);
        db.SaveChanges();
        if (Request.IsAjaxRequest())
            return PartialView("SimpleMessage");
        else
            return View("SimpleMessage")
    }
    if (Request.IsAjaxRequest())
        return PartialView(newsletter);
    else
        return View(newsletter);
} 
```

# jquery - jQuery load() 不适用于未来的菜单锚

> ID：15393478
> 
> 赞同：0
> 
> 时间：2013-03-13T18:25:05.327
> 
> 标签：jquery, jquery-load

我有一个`HTML`带有菜单锚的页面。获取内容的页面来自`j Query` `load()`指定 url 的链接点击。假设第一页有菜单链接为 **Page2，Page3** 点击**Page2**并通过`j Query`load()加载内容；加载的页面内容具有进一步的菜单锚链接**page3, index**。当我点击**page3** `j Query` `load()`时不起作用。表示内容没有从进一步的链接加载。

**为什么未来的链接不起作用**

[http://jsfiddle.net/naresh_kumar/prLN6/5/](http://jsfiddle.net/naresh_kumar/prLN6/5/)

代码 **index.html**

```
 <html>
        <head>
            <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
            <script>
                $(document).ready(function(){
                    $(".showMenu").on("click",function() {
                        $(".ulMenu").fadeIn().css({ 'display':'block'});
                    });

                    $('.ulMenu').mouseleave(function() {
                        $(this).fadeOut('slow').css({ 'display':'none'});
                    });

                    $('ul.ulMenu li a').on("click",function(e) {
                            e.preventDefault();
                            $("#container").load(this.href, function(){

                            }).hide().fadeIn('fast');
                            return false;
                        });
                })
            </script>
            <style>
                .ulMenu{ display:none;}
            </style>
        </head>
        <body>
            <div id='container'>
                <div id='mainPage'>
                    <div id='mainPageMenu'>
                        <ul class='showMenu'><li>Show menu</li></ul>
                        <ul id='mainPageMenuUl' class='ulMenu'>
                            <li class="menu"><a href='page2.html'>Page2</a></li>
                            <li class="menu"><a href='page3.html'>Page3</a></li>
                        </ul>
                    </div>
                    Main page Main page Main page Main page Main page Main
                </div>
            </div>

        </body>
    </html> 
```

**page2.html**

```
<div id='page2'>
    <div id='page2Menu'>
        <ul class='showMenu'><li>Show menu</li></ul>
        <ul id='page2MenuUl' class='ulMenu'>
            <li class="menu"><a href='page3.html'>Page3</a></li>
            <li class="menu"><a href='index.html'>Main Page</a></li>
        </ul>
    </div>
    page 2 page 2 page 2 page 2 page 2 page 2 page 2  
</div> 
```

**page3.html**

```
<div id='page3'>
    <div id='page3Menu'>
        <ul class='showMenu'><li>Show menu</li></ul>
            <ul id='page3MenuUl' class='ulMenu'>
                <li class="menu"><a href='page4.html'>Page4</a></li>
                <li class="menu"><a href='index.html'>main Page Menu</a></li>
            </ul>
    </div>
    page 3 page 3 page 3 page 3 page 3 page 3 page 3 page 3 
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T18:38:03.480

这是你的问题

```
$('ul.ulMenu li a').on("click", function (e) {
    e.preventDefault();
    $("#container").load(this.href, function () {   // you are replacing the html contents with the returned data
    }).hide().fadeIn('fast');
    return false;
}); 
```

由于它们是刚刚加载到 DOM 中的新元素，因此它们没有附加任何事件处理程序，因为它们在绑定时不存在。你需要做的是

委托给绑定时存在且为静态的父级

由于您正在加载到#container div - 您始终可以将其绑定到该元素

```
$("#container").on('click','.showMenu',function(){
     $(".ulMenu").fadeIn().css({ 'display':'block'});
});

$('#container').on('mouseleave','.ulMenu',function(){
     $(this).fadeOut('slow').css({ 'display':'none'});
});

$('#container').on('click','ul.ulMenu li a',function(e){
      e.preventDefault();
      $("#container").load(this.href, function(){

      }).hide().fadeIn('fast');
      return false;
}); 
```

或者在加载后将成功函数中的新事件处理程序绑定到元素

# ruby-on-rails - “访问 named_route_path”抛出 ArgumentError

> ID：15393481
> 
> 赞同：0
> 
> 时间：2013-03-13T18:25:15.150
> 
> 标签：ruby-on-rails, ruby, rspec

我在 Rails 3.1.12 应用程序中设置了这条路线：

```
 get '/compte/activer/:username/:token' => 'create_user#activate', :as => :create_user_activate 
```

这是请求规范：

```
describe "#activate with valid token" do
  it "activates the account" do    
    user = User.create_basic("conradk", "email@email.com", "Conrad K.", "password", "password", "Hello world!")

    visit create_user_activate_path(:username => user.username, :token => user.activation_token)

    page.should have_content(I18n.t('activerecord.success.messages.account_activated'))
  end
end 
```

这是控制器：

```
class CreateUserController < ApplicationController
  def activate username, token

  end
end 
```

当我运行规范时，我收到此错误：

```
Failure/Error: visit create_user_activate_path(:username => user.username, :token => user.activation_token)
     ArgumentError:
       wrong number of arguments (0 for 2) 
```

我做错什么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T18:27:35.367

试试这个

```
class CreateUserController < ApplicationController
  def activate

  end
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T18:35:26.120

您的控制器方法应定义如下：

```
class CreateUserController < ApplicationController
  def activate
    #params will have your username and token
    user_name = params[:username]
    token = params[:token]
  end
end 
```

# jquery - Jquery MsgBox giving error message

> ID：15393486
> 
> 赞同：0
> 
> 时间：2013-03-13T18:25:22.613
> 
> 标签：jquery, asp.net

I am trying to implement MsgBox from this site: [http://jquerymsgbox.ibrahimkalyoncu.com/](http://jquerymsgbox.ibrahimkalyoncu.com/)

to my web app. I followed the explainations:

```
<head>
<script type="text/javascript" src="/Timesheets/Java/MsgBox/Scripts/jquery-1.8.0.min.js"></script>
<link rel="stylesheet" type="text/css" href="/Timesheets/java/msgbox/styles/msgBoxLight.css" />
<script type="text/javascript" src="/Timesheets/Java/MsgBox/Scripts/jquery.msgBox.js"></script>
</head>

<body>
<script>
function sign() {
    $.msgBox("The selection includes process white objects. Overprinting such objects is only useful in combination with transparency effects.");
    /*
    busyBox.Show();
    PageMethods.signe($("#form1").serializeArray(), getParameterByName("pn"), user, signcomp, signfail);
    */
}
</script>

<input type="button" name="okbtn" ID="okbtn" class="mybutton13" value="Test button" onclick="sign()" runat="server" />
</body> 
```

but every time I click the button I get a Error: Object doesn't support property or method 'msgbox' message

Thank you all for the help

EDIT:

Firefox gives me : TypeError: $.msgBox is not a function

IE gives me Error: Object doesn't support property or method 'msgBox'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-05-24T10:12:25.417

我遇到过同样的问题。然后我通过替换为解决了这个`$.msgBox`问题`msg`。现在它工作正常。

```
$('#okbtn').click(function() { 
msg({
     title:"Title goes here",
     content:"Content goes here",
     type:"Type goes here"
   });
}); 
```

我`msg`从`jquery.msgBox.js`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T18:27:41.037

Try attaching the msgBox function to the button with a jQuery click() handler, instead of using the onClick attribute of the button tag.

Also note that the $.msgBox() takes a javascript object as a parameter, not a string.

```
<script>
$(document).ready(function() { 
    $('#okbtn').click(function() { 
        $.msgBox({
            title:"Title goes here",
            content:"Content goes here"
        });
    });
});
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T19:28:05.937

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3c.org/TR/1999/REC-html401-19991224/loose.dtd">
<HTML xmlns="http://www.w3.org/1999/xhtml"><HEAD><TITLE>jquery.msgbox Demos</TITLE>
<META content="text/html; charset=UTF-8" http-equiv=Content-Type>
<LINK rel=stylesheet type=text/css href="jquery.msgbox.css">
<SCRIPT type=text/javascript src="http://code.jquery.com/jquery-latest.min.js"></SCRIPT>
<SCRIPT type=text/javascript src="jquery.dragndrop.min.js"></SCRIPT>
<SCRIPT type=text/javascript src="jquery.msgbox.js"></SCRIPT>

<SCRIPT language=JavaScript type=text/javascript>  
$(function(){   

    $("#test1").click(function(){
        new $.msgbox('Hello world').show();
    });

    $("#test2").click(function(){
        new $.msgbox({
            width:500,
            height:500,
            title: 'Hello',
            content: 'Hello, world!',
            bgOpacity: .8
        }).show();
    });

    $("#test3").click(function(){
        new $.msgbox({
            allowDrag: false // enable drag and drop(default), disable if false
        }).show();
    });

    $("#test4").click(function(){
        new $.msgbox({
            onClose: function(){
                alert(this.titleWrap.html()); // this is refered to the object itself
            }
        }).show();
    });

    $("#test5").click(function(){
        new $.msgbox({
            autoClose: 10 // do not counting down
        }).show();  
    });

    $("#test6").click(function(){
        new $.msgbox({
            autoClose: 0 // do not counting down
        }).show().startAutoClose(10); // start counting down, support chain operations
    });

    $("#test7").click(function(){
        new $.msgbox({
            type: 'alert',
            content: 'Hello'
        }).show();
    });

    $("#test8").click(function(){
        new $.msgbox({
            onClose: function(){ alert(this.getValue()) }, // with onclose plugin
            type: 'confirm',
            content: 'Hello'
        }).show();
    });

    $("#test9").click(function(){
        new $.msgbox({
            onClose: function(){ alert(this.getValue()) },
            type: 'input',
            content: 'Enter your words:'
        }).show();
    });

    $("#test10").click(function(){
        new $.msgbox({
            //onAjaxed: function(){ alert('Loading complete') },
            type: 'ajax',   // or url 
            content: 'http://pwwang.com'
        }).show();
    });

    $("#test11").click(function(){
        new $.msgbox({
            type: 'iframe',
            content: 'http://pwwang.com'
        }).show();
    });

    $("#test12").click(function(){
        new $.msgbox({
            anim: 1  // 0, 2, no animation with other values
        }).show();
    });

    $("#test13").click(function(){
        new $.msgbox({
            showClose: false    // disable in options
        }).show();
    });

    $("#test14").click(function(){
        new $.msgbox({
            closeIcon: 'image:close.gif'  // or 'text:Close', or 'image:close.png' to display an image
        }).show();
    });
    $("#okbtn").click(function(){
        new $.msgbox({
            showClose: false    // disable in options
        }).show();
    });

});   

</SCRIPT>

<META></HEAD>
<BODY>
<input type="button" id="test1" value="1.The simplest way" /><br />
<input type="button" id="test2" value="2.With otions" /><br />
<input type="button" id="test3" value="3.Plugin dragndrop, drag and drop disabled" /><br />
<input type="button" id="test4" value="4.Plugin onclose" /><br />
<input type="button" id="test5" value="5.Plugin autoclose" /><br />
<input type="button" id="test6" value="6.Plugin autoclose, set by public function" /><br />
<input type="button" id="test7" value="7.Plugin contenttype, alert" /><br />
<input type="button" id="test8" value="8.Plugin contenttype, confirm" /><br />
<input type="button" id="test9" value="9.Plugin contenttype, input" /><br />
<input type="button" id="test10" value="10.Plugin contenttype, ajax/url" /><br />
<input type="button" id="test11" value="11.Plugin contenttype, iframe" /><br />
<input type="button" id="test12" value="12.Plugin animate, animate type 1" /><br />
<input type="button" id="test13" value="13.Plugin showclose, showClose=false" /><br />
<input type="button" id="test14" value="14.Plugin closeicon" /><br />
<input type="button" name="okbtn" ID="okbtn" class="mybutton13" value="Test button"  />
</BODY>
</HTML> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T17:16:28.197

我最终制作了自己的弹出框，使用来自 Javascript 的动态内容来询问密码

# c# - Check default mail client using C# code

> ID：15393488
> 
> 赞同：2
> 
> 时间：2013-03-13T18:25:28.053
> 
> 标签：c#

How to find default mail client using C#? i checked some posted here but it didn't help me..

I used this code

```
object mailClient = Microsoft.Win32.Registry.GetValue(@"HKEY_LOCAL_MACHINE\SOFTWARE\Clients\Mail", "", "none"); 
```

In my computer both windows live mail and outlook installed and the defualt client is windows live mail however if i print mailclient it will show defualt mail client as outlook.

but if i use `System.Diagnostics.Process.Start("mailto:")` then it will open in windows live mail which is correct.

i need a method to find defualt client through C# code.....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T18:33:13.673

注册表项是：

**机器：**
`HKEY_CLASSES_ROOT\mailto\shell\open\command`

**用户：**
`HKEY_CURRENT_USER\Software\Classes\mailto\shell\open\command`

这些键的值是被执行的命令行，它们`%1`在`mailto:`. 因此，您可能需要进行一些额外的解析才能获得可执行文件的路径：

**示例：**
`"C:\PROGRA~2\MICROS~4\Office14\OUTLOOK.EXE" -c IPM.Note /m "%1"`将需要成为`"C:\PROGRA~2\MICROS~4\Office14\OUTLOOK.EXE"`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-10T15:18:12.637

要打开已填写“收件人”的邮件，请尝试

```
string target = "joe.doe@doecontry.dc";

string mailtoCommand =
    (string) Registry.GetValue(@"HKEY_CURRENT_USER\Software\Classes\mailto\shell\open\command", @"", @"none");
mailtoCommand = mailtoCommand.Replace("\"", string.Empty).Replace("%1", target);

string arguments =
    mailtoCommand.Substring(mailtoCommand.ToLower().IndexOf(@".exe", StringComparison.Ordinal) + 4);

string fileName = mailtoCommand.Substring(0, mailtoCommand.Length - arguments.Length);

Process.Start(fileName, arguments); 
```

# java - 如何使用 Eclipse Juno 查看复杂变量的所有变化

> ID：15393493
> 
> 赞同：2
> 
> 时间：2013-03-13T18:25:39.303
> 
> 标签：java, eclipse, debugging, object, breakpoints

我有一个复杂的对象，有 30 个左右的字段，它们本身包含有很多字段的对象。

我真正想做的是这个；在断点处，按 ctrl-c 复制整个结构，正如我在变量（或表达式）窗口中看到的那样。然后运行一些代码，然后再次 ctrl-c 整个结构，然后并排比较它们。

但是，Eclipse (Juno) 不允许我复制整个结构。即使我在单步执行代码时展开对象内的所有对象，它也不会突出显示对从一行到下一行的每个字段所做的更改。

我也可以在修改对象时以某种方式创建某种断点触发器，但它是一个外部 jar 文件进行修改，所以我不确定它是如何工作的，我也不认为 Eclipse 会费心向我展示如果可能的话，改变的数据。（如果是，那根本不直观）。

任何帮助将非常感激。

查尔斯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T18:27:28.943

您可以使用 Eclipse 自动生成 toString() 方法，然后以这种方式比较对象。这将允许您在执行的不同时间复制和比较对象。

不过，我不确定如何使用 Eclipse 以另一种方式做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T15:38:43.427

为您要检查的对象编写一个[详细格式化程序。](http://www.robertwloch.net/2012/01/eclipse-tips-tricks-detail-formatter/)您可以将其想象为类似于“外部化的 toString() 方法”。它甚至可以让您访问被检查对象的私有成员。然后，您可以将此输出提供给您首选的差异工具。

# phpmyadmin - 我可以在本地使用 webmatrix 尝试 phpMyAdmin 吗？

> ID：15393495
> 
> 赞同：6
> 
> 时间：2013-03-13T18:25:49.500
> 
> 标签：phpmyadmin, webmatrix-2

我想在本地尝试 phpMyAdmin 从 webmatrix 启动它...它定期显示登录页面，但我登录有问题..每次尝试它都会检索我**#2002 无法登录到 MySQL 服务器**

一旦下载了 phpMyAdmin 的最后一个版本，我就创建了一个官方指南中建议的 config.inc.php 文件。我尝试了很多参数但没有成功。该文件的实际配置是：

```
<?php

    /* Servers configuration */
    $i = 0;

    /* Server: localhost [1] */
    $i++;
    $cfg['Servers'][$i]['verbose'] = 'localhost';
    $cfg['Servers'][$i]['host'] = 'localhost';
    $cfg['Servers'][$i]['port'] = '';
    $cfg['Servers'][$i]['socket'] = '';
    $cfg['Servers'][$i]['connect_type'] = 'HTTP';
    $cfg['Servers'][$i]['extension'] = 'mysql';
    $cfg['Servers'][$i]['auth_type'] = 'cookie';
    $cfg['Servers'][$i]['user'] = 'root';
    $cfg['Servers'][$i]['password'] = 'pass';
    $cfg['Servers'][$i]['AllowNoPassword'] = true;

    /* End of servers configuration */

    $cfg['DefaultLang'] = 'en-utf-8';
    $cfg['ServerDefault'] = 1;
    $cfg['UploadDir'] = '';
    $cfg['SaveDir'] = '';

    ?> 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-10T11:19:25.290

我已经为您的问题找到**了两种**解决方案，请尝试选择一种可行的方法。

**解决方案：1**

您已将 MySQL 的密码设置为*pass*，但您已在此设置下将标志设置为 TRUE。`$cfg['Servers'][$i]['AllowNoPassword'] = true;`

尝试像这样将标志设置为**FALSE**

```
$cfg['Servers'][$i]['AllowNoPassword'] = false; 
```

**解决方案：2**

由于您以**root**用户身份登录 MySQL，因此您需要将上述配置设置更改为

```
$cfg['Servers'][$i]['AllowNoPasswordRoot'] = false; 
```

# deployment - Portlet 应用程序应部署为 war 文件或 ear 文件

> ID：15393496
> 
> 赞同：1
> 
> 时间：2013-03-13T18:25:50.557
> 
> 标签：deployment, portlet, websphere-portal

在 websphere 门户环境中，应该如何部署由许多 portlet 组成的门户应用程序？作为 .war 文件还是 .ear 文件？

我看到在没有安装 RAD 的环境中，它被部署为 .war。但是在安装了 RAD 的开发机器上，它被部署为 EAR 项目。有没有围绕这个的最佳实践？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T18:58:13.340

我假设您正在使用 WebSphere Portal。从[产品文档](http://www-10.lotus.com/ldd/portalwiki.nsf/xpDocViewer.xsp?lookupName=IBM%20WebSphere%20Portal%207%20Product%20Documentation#action=openDocument&res_title=WebSphere_Portal_Support_Statement_wp7&content=pdcontent)：

> Portlet 应用程序通常打包到单个 WAR 文件中。这些 WAR 文件可以通过使用门户管理手段 (...) 直接部署到门户中。您可能希望将 portlet 应用程序与 EJB 一起部署，或者将多个 WAR 文件捆绑到同一个 EAR 文件中，或者使用类似的场景。对于这种类型的需求，WebSphere Portal 提供了带有 XML 配置接口的预部署模式 (...)

然后它显示了使您的 EAR 与 WebSphere Portal 一起工作的几个附加步骤。您可以看到 Portlet 应用程序 WAR 文件是在 WebSphere Portal 中安装 Portlet 的推荐、更简单和更清洁的方法，并且可以让您免于非常烦人的管理任务。此外，单个 WAR 文件可以包含多个 Portlet，因此您也可以了解这方面的内容。

另外一个细节是，当您将 WAR 文件部署到 WebSphere Portal 时，它会在部署之前将该文件包装在 EAR 中，因此您选择一个或另一个没有太大区别。

# emacs - emacs tramp 双跳 ssh 早期解决方案不起作用

> ID：15393499
> 
> 赞同：1
> 
> 时间：2013-03-13T18:25:59.757
> 
> 标签：emacs, ssh, elisp, remote-access, tramp

问题陈述：

通过 creta@recog.vision.uni-bonn.de 连接到 machineB（木星）。我的问题最接近下面的链接 1。但是，链接中的任何信息都无法使其正常工作。更糟糕的是，emacs -debug-init 不会产生任何有用的信息……至少对于像我这样的 Emacs 新手来说是这样。

一种这样的调试信息：

> 调试器进入--Lisp 错误: (void-variable tramp-default-proxies-alist) add-to-list(tramp-default-proxies-alist ("\\'jupiter\\'" nil "/ssh:creta@recog .vision.uni-bonn.de:")) eval-buffer(# nil "/home/creta/.emacs.d/init.el" nil t) ; 在缓冲区位置 159 读取 load-with-code-conversion("/home/creta/.emacs.d/init.el" "/home/creta/.emacs.d/init.el" tt) load("/home /creta/.emacs.d/init" tt) #[0 "\205\262

域（uni-bonn）中的连字符会有所不同吗？我什至尝试过使用 uni-bonn 和其他组合，但这并没有什么不同。

我可以使用 tramp 到 ssh 到 creta@recog.... 由 Cx Cf /ssh:creta@recog.vision.uni-bonn.de: RET PASSWORD...但后来我不知道如何 ssh 进一步进入 jupiter 哪个是我的工作站。

我遵循了这里的建议：

链接 1：[如何使用 Emacs Tramp 双跳 ssh？](https://stackoverflow.com/questions/715855/how-can-i-use-emacs-tramp-to-double-hop-ssh?rq=1)

链接 2：[通过 SSH 和 Sudo 使用 Emacs 打开文件](https://stackoverflow.com/questions/2177687/open-file-via-ssh-and-sudo-with-emacs)

链接3：[Emacs Tramp ssh 双跳](https://stackoverflow.com/questions/5847814/emacs-tramp-ssh-double-hop)

链接 4：[http ://comments.gmane.org/gmane.emacs.tramp/7578](http://comments.gmane.org/gmane.emacs.tramp/7578)

链接 5：[http ://www.gnu.org/software/emacs/manual/html_node/tramp/Multi_002dhops.html](http://www.gnu.org/software/emacs/manual/html_node/tramp/Multi_002dhops.html)

如果这个烦人的事情得到解决，那就太好了。

非常感谢。祝你有美好的一天！

编辑 1：我不介意是否需要 ssh 两次（首先进入域，然后进入工作站），尽管我不知道这是否是个好主意。能够像在 emacs 中一样使用本地文件（以及它的 diredplus 和其他好东西）是一个很好的功能。

编辑 2：如果有帮助，我在 Ubuntu 机器上使用 Emacs 24.2（Natty 11.04 --> 应该很快更新）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T18:42:00.870

您提到的错误消息是由于在您尝试配置之前未加载 TRAMP 引起的。尝试使用这样的东西：

```
(require 'tramp)
(add-to-list 'tramp-default-proxies-alist ...) 
```

或者（在加载时间方面更好，但更容易受到与引用相关的棘手错误的影响）：

```
(eval-after-load "tramp"
   '(add-to-list 'tramp-default-proxies-alist ...)) 
```

# mysql - mysql - 选择一年中出现少于/多于 x 个月的行

> ID：15393506
> 
> 赞同：1
> 
> 时间：2013-03-13T18:26:16.350
> 
> 标签：mysql

我有一张产品销售表。每个销售都有一个项目代码（例如序列号）和日期。

```
item_code | date

a | 2013-01-01
a | 2013-01-18
b | 3013-02-10
c | 2013-03-05
b | 2013-04-09
a | 2013-06-04
a | 2013-07-22 
```

从这个数据中，我可以看到零件代码“a”在 1 月份售出两次，一次在 6 月，一次在 7 月。“b”部分在 2 月和 4 月出售一次。然后 c 部分在 3 月份出售一次。

我想返回所有已售零件的列表，例如，一年中 2 个月或更长时间。所以这将返回部分“a”和“b”。如果我将该阈值提高到一年中 >=3 个月，它只会返回“a”部分。哪个月没关系。但“a”部分出现在 3 个不同的月份，因此得分为 3。“b”部分得分为 2。

我当然可以用 PHP 来处理这个问题，但我可以纯粹在 mysql 中完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T18:30:44.587

```
SELECT item_code
FROM ProductSales
GROUP BY item_code
HAVING COUNT(DISTINCT MONTH(date)) >= @threshold 
```

[http://sqlfiddle.com/#!2/810c9/3](http://sqlfiddle.com/#!2/810c9/3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T18:31:34.793

你可以做这样的事情。

```
SELECT item_code, COUNT(distinct MONTH(date)) as month_count from product_sales
GROUP BY item_code
HAVING month_count > 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T18:42:41.670

```
SELECT
    pc.*,
    count(lpc.item_code) AS TCount
FROM product_sales as pc
INNER JOIN product_sales AS lpc ON lpc.item_code = pc.item_code
GROUP BY pc.item_code
HAVING TCount >= 2 
```

# php - 在文本区域输入字段中显示换行符

> ID：15393508
> 
> 赞同：2
> 
> 时间：2013-03-13T18:26:24.133
> 
> 标签：php, html, mysql, css, forms

我一直在寻找这个问题的答案，但无济于事。

我正在将表单teatarea字段中的文本输入到包含换行符的MySQL数据库中，当返回并使用PHP写入html时，我首先分解数据并将其放入数组中，然后在段落标签中添加每个数组项或在无序列表中列出标签。

问题是当用户在 textarea 字段中输入文本时，没有办法在视觉上区分文本换行和换行符，如果有办法区分两者，用户会更清楚，可能在后面加上空格用于显示行尾的换行符或符号，如段落符号。

有没有人可以解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T19:49:44.683

根据您对不使用可用的 html 编辑器的评论，您可以模仿如下

您可以有一个简单的 javascript 函数来捕获每个键请求（onkeypress() 到 textarea），如果该键是 '\n' 然后放置一个分隔符之类的东西，否则就让它出来

**更新**

传统的 html textarea 只能显示 ascii 字符（太有限了）所以去新的 HTML5 标签`contenteditable`，比如

```
<div contenteditable="true"></div> 
```

在这个 div 上，您可以应用 javascript 来获得所需的结果。

例如，如果用户按下“Enter 键”（比如说），那么您可以将 a 附加`<hr/>`到 div 元素。每当按下 Enter 键时，您会得到一条水平线，将其与文本换行或不可见字符区分开来

# java - 如何将鼠标悬停并按住

> ID：15393509
> 
> 赞同：1
> 
> 时间：2013-03-13T18:26:24.200
> 
> 标签：java, selenium, selenium-webdriver

自从升级到 Firefox 19 后，我的测试中断了，我需要将鼠标悬停在链接上以显示子菜单。在 Firefox 19 之前，以下工作就像一个魅力：

```
 /*
    * Hover over column header
    */
    WebElement columnsRoot = driver.findElement(By.xpath(COLUMNS_ROOT_XPATH));
    WebElement firstColumn = columnsRoot.findElement(By.xpath("./td[1]/div"));
    Actions builder = new Actions(driver);
    builder.moveToElement(firstColumn).build().perform();

    /*
     * Click on dropdown button after it appears
     */
    WebElement dropdown = columnsRoot.findElement(By.xpath("./td[1]/div/a"));
    dropdown.click();
    Thread.sleep(500);

    /*
     * Hover over columns menu
     */
    String columnsMenuXpath = "(//div[@class=\" x-ignore x-menu x-component\"]//a)[3]";
    WebElement columnsMenu = driver.findElement(By.xpath(columnsMenuXpath));
    builder.moveToElement(columnsMenu).build().perform(); 
```

将鼠标悬停在上方的列菜单上后，将出现一个子菜单，其中包含我将迭代显示的列列表。在我升级到 Firefox 19 后，最后一步中的子菜单只是暂时出现然后消失，这会导致一堆 NoSuchElementException 异常，显然是因为子菜单不存在并且我仍在尝试单击某些内容。

将鼠标悬停在菜单上后，我尝试使用另一个动作移动到子菜单中的某个项目，希望这会使子菜单保持打开状态，但没有这样的运气。

有没有其他人遇到过这个问题？如果是这样，是否有解决方法或什么？

我正在使用 selenium 2.31.0，由于与 Firefox 19 的不兼容问题，我从 2.28.0 升级到了今天。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T21:48:57.987

找到了一种解决方法，那就是移到下一个子菜单，而不是使用 moveToElement(webelement) ，这是其他人建议但对我不起作用的方法。对我有用的是使用 moveByOffset(int x, int y) 方法。因此，将鼠标悬停在显示子菜单的链接上后，我做了：

```
Actions movePointerRight = new Actions(driver);
movePointerRight.moveByOffset(100, 0).build().perform(); 
```

这似乎让我暂时摆脱了我的问题，但我仍然有兴趣知道其他人的想法。

# java - Java 中的 JSF 页面验证和生成的组件 ID 问题

> ID：15393510
> 
> 赞同：0
> 
> 时间：2013-03-13T18:26:34.153
> 
> 标签：java, jsp, jsf, myfaces

根据`<h:message for="" />`JSF 对象，我有一个问题。我有一个 JSF 1.1（是的，不幸的是）myFaces 项目。我准备了一个带有标签、inputText 和消息持有者的简单 JSP 文件：

```
<h:form id="sacLinkForm">
    <cblFaces:outputLabel for="dedicatedCashAccountNumber"
        value="#{appBundle.KUSTA_DEDICATED_CASH_ACCOUNT_NUMBER}"/>
    <t:inputText id="dedicatedCashAccountNumber"
        value="#{createController.modelFE.sacLink.dedicatedCashAccountNumber}"/>
    <h:message id="dedicatedCashAccountNumberError"
        for="dedicatedCashAccountNumber" />
</h:form> 
```

我还创建了简单的验证方法：

```
public static boolean validate(SACLink link) {
    boolean isError = false;
    FacesContext context = FacesContext.getCurrentInstance();
    FacesMessage message = new FacesMessage();
    message.setSeverity(FacesMessage.SEVERITY_ERROR);

    if (StringUtils.isEmpty(link.dedicatedCashAccountNumber)) {
        //MessageUtils.addErrorMessage("dedicatedCashAccountNumber", "Dedicated Cash Account Number is mandatory");
        message.setSummary("Field mandatory");
        message.setDetail("Dedicated Cash Account Number is mandatory");
        context.addMessage("sacLinkForm:dedicatedCashAccountNumber", message);
        isError = true;
    }
    return !isError;
} 
```

我的问题是`sacLinkForm:dedicatedCashAccountNumber`因为编译的 JSP 生成了 id (fe `_idJsp12:DynTab2:DynView2:tabK.....er:vKustaMa....Controller:sacLinkForm:dedicatedCashAccountNumber`)，它可能导致该方法与属性`addMessage`不对应。`h:message for=".."`

因此消息无法正确显示，因为 java 找不到正确的`h:message`对象。有什么方法可以`h:message`从 Java 将消息设置为正确的吗？我假设没有办法在 JSF 1.1 页面中强制“恒定”组件 ID。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T18:44:12.237

您根本不应该在 JSF 操作方法中手动执行验证。您应该使用 JSF 内置的验证工具。您应该使用普通的 JSF [`Validator`](http://docs.oracle.com/javaee/5/api/javax/faces/validator/Validator.html)。您从中抛出的任何`ValidatorException`内容都将最终出现在正确的消息组件中。

`validate()`用以下类替换该方法：

```
public class AccountNumberValidator implements Validator {

    @Override
    public void validate(FacesContext context, UIComponent component, Object value) throws ValidatorException {
        if (StringUtils.isEmpty(value)) {
            FacesMessage message = new FacesMessage();
            message.setSeverity(FacesMessage.SEVERITY_ERROR);
            message.setSummary("Field mandatory");
            message.setDetail("Dedicated Cash Account Number is mandatory");
            throw new ValidatorException(message);
        }
    }

} 
```

注册`faces-config.xml`如下：

```
<validator>
     <validator-id>accountNumberValidator</validator-id>
     <validator-class>com.example.AccountNumberValidator</validator-class>
</validator> 
```

在视图中使用如下：

```
<t:inputText id="dedicatedCashAccountNumber"
    value="#{createController.modelFE.sacLink.dedicatedCashAccountNumber}"
    validator="accountNumberValidator" /> 
```

而已。请注意，如果验证（或转换）失败，则不会调用 JSF 操作方法。也不需要无意义的`isError`混乱。

# c++ - C++ 中的程序不会在 if(scanf()==EOF)break 上停止；

> ID：15393520
> 
> 赞同：0
> 
> 时间：2013-03-13T18:27:18.740
> 
> 标签：c++, windows

我的 C++ 程序不会停止`if(scanf()==EOF)break;`，下面是我的程序的草图，例如输入：

```
X XjhgXjhX 
```

给出输出：

```
jhgjh 
```

也就是说 - 它打印除 之外的所有字符`X`，但它不会在`Ctrl+Z`.

```
using namespace std;

int main()
{
    char str[100]={0},znak,forbd;
    int i=0,j=0;
    while(true)
    {
        i=0;
        j=0;

        if(scanf("%c",&forbd)==EOF)
            break;

        if(scanf("%c",&znak)==EOF)
            break;

        while(znak!='\n')
        {
            if(forbd!=znak && znak!=' ')
            {
                str[i]=znak;
                i++;
                //cout<<i<<"\n";
            }

            if(scanf("%c",&znak)==EOF)
                break;
        }

        while(j<i)
        {
            printf("%c",str[j]);
            j++;
        }
        printf("%c",'\n');
    }
    return 0;   
} 
```

我不想用`cin`，因为阅读有问题`\n`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T19:05:43.290

好的，我将使用`iostream`而不是`cstdio`使用代码`if(cin.peek()=='\n')break;`检测行尾，这解决了问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-28T03:00:50.407

[scanf 从标准输入参考](http://www.cplusplus.com/reference/cstdio/stdin/?kw=stdin)女巫读取：

> 众所周知，stdin 不是指交互式设备，流是完全缓冲的。否则，默认情况下流是行缓冲还是不缓冲取决于库（参见 setvbuf）。

通常，stdin 是行缓冲的，您需要键入 '\n' 才能读取。

从相关[问题](https://stackoverflow.com/a/421871/1778115)中，您可以找到此类字符阅读用例的解决方案。

# android - 用正则表达式测试 EditText 的内容

> ID：15393522
> 
> 赞同：0
> 
> 时间：2013-03-13T18:27:22.457
> 
> 标签：android

请我希望 EditText 由两个字母和五个数字组成。我想使用正则表达式。但我不明白如何使用它。先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T18:40:06.250

```
boolean validate(String str){
    int letters = 0;
    int numbers = 0;
    int others = 0;
    for(int i=0; i<str.length(); i++){
        char ch = str.getAt(i);
        if(Character.isLetter(ch)){
            letters++;
        }
        else if (Character.isDigit(ch)){
            numbers++;
        }
        else{
            others++;
        }
    }
    return others == 0 && numbers==5 && letters == 2;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T18:46:35.370

```
EditText edit = (EditText) this.findViewById(R.id.edit_text);

  edit.addTextChangedListener(new TextWatcher() {            
    @Override
    public void onTextChanged(CharSequence s, int start, 
                              int before, int count) {
    char[] c_arr = s.toCharArray();
    int letterCount=0;
    int digitCount=0;

        for(Character c : c_arr){

            try{
                Integer.parseInt(c.toString())
                digitCount++;
                if(digitCount > 2){
                    // alert here
                    s = s.substring(0, s.length() - 1);
                    EditText edit = (EditText) this.findViewById(R.id.edit_text);
                    edit.setText(s);
                    break;
                }
            }catch (NumberFormatException e) {
                letterCount++;
                if(letterCount > 5){
                    // alert here
                    s = s.substring(0, s.length() - 1);
                    EditText edit = (EditText) this.findViewById(R.id.edit_text);
                    edit.setText(s);
                    break;
                }
            }
        }    
    }
    @Override
    public void beforeTextChanged(CharSequence s, int start,
                                  int count, int after) {}

    @Override
    public void afterTextChanged(Editable s) {

    }
  }); 
```

# c# - 如何连接我的 UserControl 属性，使其在回发时保持状态？

> ID：15393525
> 
> 赞同：0
> 
> 时间：2013-03-13T18:27:31.483
> 
> 标签：c#, asp.net, webforms, web-controls

在 ASP.NET Webforms 应用程序中，我有一个包含 UserControl 的提交表单，其属性如下：

```
 public string Name
    {
        get
        {
            String s = (String)ViewState["Name"];
            return ((s == null) ? String.Empty : s);
        }

        set
        {
            ViewState["Name"] = value;
        }
    } 
```

这是改编自 MSDN 演练。这被假定为“绑定”（不是数据绑定，因为我认为这是不可能的）到 ascx 中定义的文本框的内容，如下所示：

```
 <asp:TextBox runat="server" ID="name" /> 
```

问题是，允许将其作为公共财产访问并在回发时保留状态的最佳实践是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T12:03:38.213

最简单的选择是将`UserControl`委托上的公共属性设置为子控件的属性：

```
public string Name
{
   get { return name.Text; }
   set { name.Text = value; }
} 
```

然后`TextBox`将负责在回发时维护状态。

# angularjs - 将服务作为依赖传递给服务

> ID：15393530
> 
> 赞同：0
> 
> 时间：2013-03-13T18:27:39.630
> 
> 标签：angularjs

下面我有一个名为 Position 的工厂，它返回整个应用程序需要使用的关于用户当前位置和其他模型的数据。在那之下是一个名为 Romanize 的服务，它联系一个提供一种翻译的外部 URL，但 Romanize 需要访问 Position 提供的应用程序数据。我尝试使用通常的 DI，但它失败了。如何将 Position 作为依赖项注入 Romanize？

```
app.factory('Position', function(){
    return{
      questionNumber: 0,
      tutorialNumber: 0,
      sectionNumber: 0,
      sections: sections
    }
});

app.factory('Romanize', ['$http', 'Position', function($http){
    alert(Position);
    return{
      Position: Position,
      get: function(){
          $http.get(Position.sections[Position.sectionNumber].romanizeService).success(function(data) {
                return data;
            });
        }
    };
}]); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T18:29:40.697

您错过了`Position`在 Romanize 工厂函数中添加为参数。

```
app.factory('Romanize', ['$http', 'Position', function($http, Position){ 
```

string`'Position'`告诉 Angular 注入位置服务作为第二个参数（`$http`服务是第一个）。

# android - How do I put images in a EditText field?

> ID：15393533
> 
> 赞同：5
> 
> 时间：2013-03-13T18:27:46.290
> 
> 标签：android, android-layout, android-edittext

I'd like to put an image in an EditText field, as shown. How should one go about this? Layered-list with the image on one layer and a lot of padding on the left side of the EditText on the other layer?

![enter image description here](../Images/2a7d0c93cd1bff88faa4ad5b9ca5b97c.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-13T18:30:43.707

在editText中设置图像。

```
<EditText
   ......  
    android:drawableLeft="@drawable/image" /> 
```

您可以设置它左，右，上，下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T18:30:39.260

只需使用

```
setCompoundDrawables(Drawable left, Drawable top, Drawable right, Drawable bottom) 
```

或者

```
setCompoundDrawablesWithIntrinsicBounds(Drawable left, Drawable top, Drawable right, Drawable bottom) 
```

方法。

干杯

# java - Hibernate provides next generated id 32768 and so on 65536, 98304

> ID：15393534
> 
> 赞同：1
> 
> 时间：2013-03-13T18:27:48.153
> 
> 标签：java, hibernate, jpa, persistence, auto-increment

**EMPLOYEE.java**

```
@Entity
@Table(name="EMPLOYEE")
public class Employee implements Serializable {

@Id
@GeneratedValue( strategy = GenerationType.TABLE) 
```

**EMPLOYEE (TABLE)**

```
1   3/13/2013   911 Jack    Bauer

32768   3/13/2013   911 Jack    Bauer

65536   3/13/2013   911 Jack    Bauer

98304   3/13/2013   911 Jack    Bauer 
```

**HIBERNATE_SEQUENCES(TABLE) HOLDING CORRECT NUMBER**

```
EMPLOYEE    4 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T18:41:30.217

```
@TableGenerator(name="tabgen",table="employee-id",pkColumnName="name",valueColumnName="value",allocationSize=1)
@GeneratedValue(strategy=GenerationType.TABLE, generator="tabgen") 
```

但是，如果您需要按顺序排列 id，最好使用增量或序列而不是表生成。您使用默认表策略看到的随机 id 是因为需要支持同时尝试插入的多个线程。

# ios - iOS：Objective-C MD5 NSString

> ID：15393535
> 
> 赞同：8
> 
> 时间：2013-03-13T18:27:51.237
> 
> 标签：ios, objective-c, md5

我在这里找到了这个 md5 函数：http: [//www.makebetterthings.com/iphone/how-to-get-md5-and-sha1-in-objective-c-ios-sdk/](http://www.makebetterthings.com/iphone/how-to-get-md5-and-sha1-in-objective-c-ios-sdk/)

```
- (NSString *) md5:(NSString *) input
{
 const char *cStr = [input UTF8String];
 unsigned char digest[16];
 CC_MD5( cStr, strlen(cStr), digest ); // This is the md5 call

 NSMutableString *output = [NSMutableString stringWithCapacity:CC_MD5_DIGEST_LENGTH * 2];

 for(int i = 0; i < CC_MD5_DIGEST_LENGTH; i++)
 [output appendFormat:@"%02x", digest[i]];

 return  output;

} 
```

我的头文件中有这样的签名：

```
- (NSString *) md5:(NSString *) input; 
```

xCode 中没有显示错误，除非我尝试使用该功能。

```
NSString *credentials = [md5 @"test"]; 
```

我收到消息：使用未声明的标识符“md5”

我如何使用这个功能？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-13T18:28:59.647

你需要使用：

```
NSString *credentials = [self md5:@"test"]; //[md5 @"test"]; 
```

如果您从具有方法的类中调用此方法`md5:`

# javascript - Long poll client side framework

> ID：15393538
> 
> 赞同：2
> 
> 时间：2013-03-13T18:28:09.500
> 
> 标签：javascript, ajax, long-polling

I've been looking for a solution all morning (for my boss) and can't really find much. The server has already implemented long polling and I can make requests and get responses from it just fine with an ajax request.

However, I'm looking for a javascript framework that I guess wraps the functionality of long polling. I'm not really a web guy, so I might be over thinking what I'm looking for.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T18:31:49.150

尝试[socket.io](http://socket.io/)并启用 ajax 长轮询传输。

# c++ - Precision of the inspected floating-point values

> ID：15393539
> 
> 赞同：0
> 
> 时间：2013-03-13T18:28:12.910
> 
> 标签：c++, visual-studio-2010, visual-studio, gdb, eclipse-cdt

I have this question because of the [previous one](https://stackoverflow.com/questions/15386668/fpu-command-fldl-converts-double-to-long-double-in-st0/15387186). There I had a value 25.3999996185302734375 which was shown as 25.399999618530273 (without last 4 digits) in both Visual Studio 2010, Eclipse CDT, and gdb (just "print 25.3999996185302734375" in gdb and it will show 25.399999618530273).

Now, in gdb (and thus Eclipse CDT) I can issue

```
 printf "%.20f\n", var 
```

to view the value with more digits.

How do I do the same in Visual Studio - i.e., how do I change the precision of the inspected floating-point values?

I'm also curious if there's a way to change the default precision in both Visual Studio and Eclipse/gdb, because manually printing values is not that convenient.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T13:07:09.600

至于获得更多数字，你就不走运了。你不会从 Visual Studio 中得到超过 17 位数字（以及许多其他的编程环境）。使用 gcc 或任何基于它的东西，您可以获得任意数量的数字。

您可以查看我的文章[Print Precision of Dyadic Fractions Varies by Language](http://www.exploringbinary.com/print-precision-of-dyadic-fractions-varies-by-language/)了解详细信息。

# c# - Mapping Two Classes Properties and Values Linq

> ID：15393542
> 
> 赞同：0
> 
> 时间：2013-03-13T18:28:18.283
> 
> 标签：c#, .net, linq

I am using linq to map two similar objects, but I am having an issue that it does not map subclasses it does not even see them in the GetProperties(). The sub classes are marked as public so I am a little confused why this code is not working... Any ideas or suggestions on using the other method/s. Thanks for your help in advance.

```
foreach (PropertyInfo pInfo in _WorkRequest.GetType().GetProperties()) 
{
 _WorkRequestV1.GetType().GetProperty(pInfo.Name).SetValue(_WorkRequestV1, pInfo.GetValue(_WorkRequest, null), null);
} 
```

**UPDATE**

After looking into this I have noticed that when declaring a subclass within a class ex:

```
public Person myPerson; 
```

GetProperties() does **not** see Person class but if I add

```
public Person myPerson {get;set;} 
```

GetProperties() **does** see myPerson

Lastly if I add

```
public Person myPerson = new Person() 
```

GetProperties() does **not** see the person.

How come it required {get;set}?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T18:46:53.717

我无法从您的代码中看出为什么这不起作用，但是有一种更好的方法可以将一个对象的属性复制到另一个对象，那就是使用[AutoMapper](http://automapper.org/)。

你可以做：

```
Mapper.CreateMap<WorkRequest, WorkRequestV1>();
Mapper.Map(_WorkRequest, _WorkRequestV1); 
```

# javascript - 如何使用 javascript 更改输入的样式？

> ID：15393547
> 
> 赞同：0
> 
> 时间：2013-03-13T18:28:35.990
> 
> 标签：javascript, html, css

我想给一个

`-webkit-box-shadow:inset 0 0 5px black;`

属性到文本框，因为人们关注它。

例如，这里背景颜色正在更改，但我想要 box-shadow 代替。

```
<script>
function myFunction(x)
{
x.style.background="yellow";
}
</script> 
```

和 HTML

```
<input type="text" onfocus="myFunction(this)"> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T18:35:25.403

为什么不在 CSS 中使用 :focus 呢？

[http://jsfiddle.net/VjLKV/](http://jsfiddle.net/VjLKV/)

```
input {
    border: 1px solid black;
}

input:focus {
    outline: none;
    border: 1px solid black;
    -webkit-box-shadow:inset 0 0 5px black;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T18:36:37.210

定义css类，你可以根据需要轻松切换。

```
<script>
function myFunction(x)
{
x.style.className="yourcssclass";
}
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T18:37:09.867

不要为此使用 JS，而是使用 CSS 伪类`:focus`：

```
input[type="text"]:focus
{
    -webkit-box-shadow:inset 0 0 5px black;
    box-shadow:inset 0 0 5px black;
} 
```

这样，当用户进入文本框或单击它时，文本框将获得阴影，或者其他任何方式 - 当它们离开时样式将正确消失，依此类推。

记住也要使用 box-shadow 样式的无前缀版本。

# iphone - message sent to deallocated instance

> ID：15393548
> 
> 赞同：3
> 
> 时间：2013-03-13T18:28:36.817
> 
> 标签：iphone, ios, memory-management, nszombie

After more than one day reading questions and trying to apply answers, I must ask more help.

My ios6 app has a table view on the main screen. After selecting a cell, we access a view controller with a UINavigationBar which has a custom "Back" button calling this method :

```
- (IBAction)goback:(id)sender {
    [SVProgressHUD dismiss];
    if(self.presentingViewController) {
        NSLog(@"  Dismissing View Controller: %@.", self.presentingViewController);
        [self dismissViewControllerAnimated:NO completion:nil];
    }
} 
```

Usually, this method works well. It only crashes if we press the Back button very quickly, just after the loading of the content (using json and AFNetworking). 5 seconds later, the back button is working fine, but if we click it right after the loading, we get this error :

```
[28103:c07]   Dismissing View Controller:     <UITabBarController: 0x7578170>.
[28103:c07] *** -[CustomViewController respondsToSelector:]: message sent to deallocated instance 0x1257cf70 
```

Obviously, it's a memory problem. That's why I tried to track "Zombies". Profiling my app, I get this report. It shows that there is too much release, but I can't tell which one is the culprit.

Does anyone know how to interpret this report ?

Is this line normal ?

```
84  0x10291ff0  Release 3   MyApp   __destroy_helper_block_ 
```

Please tell me if any further information is needed. I thank you for your help.

```
#   Address Event Type  RefCt   Responsible Library Responsible Caller
0   0x10291ff0  Malloc  1   UIKit   -[UIClassSwapper initWithCoder:]
1   0x10291ff0  Retain  2   UIKit   UINibDecoderDecodeObjectForValue
2   0x10291ff0  Retain  3   UIKit   -[UIRuntimeConnection initWithCoder:]
3   0x10291ff0  Retain  4   UIKit   -[UIRuntimeConnection initWithCoder:]
4   0x10291ff0  Retain  5   UIKit   UINibDecoderDecodeObjectForValue
5   0x10291ff0  Retain  6   UIKit   UINibDecoderDecodeObjectForValue
6   0x10291ff0  Retain  7   UIKit   -[UIStoryboardScene setSceneViewController:]
7   0x10291ff0  Retain  8   UIKit   -[UINib instantiateWithOwner:options:]
8   0x10291ff0  Release 7   UIKit   -[UINibDecoder finishDecoding]
9   0x10291ff0  Release 6   UIKit   -[UIRuntimeConnection dealloc]
10  0x10291ff0  Release 5   UIKit   -[UIRuntimeConnection dealloc]
11  0x10291ff0  Release 4   UIKit   -[UINibDecoder finishDecoding]
12  0x10291ff0  Release 3   UIKit   -[UINibDecoder finishDecoding]
13  0x10291ff0  Release 2   UIKit   -[UINibDecoder finishDecoding]
14  0x10291ff0  Retain  3   UIKit   -[UIStoryboardSegue initWithIdentifier:source:destination:]
15  0x10291ff0  Retain  4   UIKit   -[UIViewController setChildModalViewController:]
16  0x10291ff0  Retain  5   UIKit   -[UIApplication _addViewControllerForLockingStatusBarTintColor:]
17  0x10291ff0  Retain  6   UIKit   -[UINib instantiateWithOwner:options:]
18  0x10291ff0  Retain  7   UIKit   +[UIProxyObject addMappingFromIdentifier:toObject:forCoder:]
19  0x10291ff0  Retain  8   UIKit   -[UINib instantiateWithOwner:options:]
20  0x10291ff0  Retain  9   UIKit   +[UIProxyObject addMappingFromIdentifier:toObject:forCoder:]
21  0x10291ff0  Retain  10  UIKit   -[UIProxyObject initWithCoder:]
22  0x10291ff0  Retain  11  UIKit   -[UIRuntimeConnection initWithCoder:]
23  0x10291ff0  Retain  12  UIKit   -[UIRuntimeConnection initWithCoder:]
24  0x10291ff0  Retain  13  UIKit   -[UIRuntimeConnection initWithCoder:]
25  0x10291ff0  Retain  14  UIKit   -[UIRuntimeConnection initWithCoder:]
26  0x10291ff0  Retain  15  UIKit   -[UIRuntimeConnection initWithCoder:]
27  0x10291ff0  Retain  16  UIKit   -[UIRuntimeConnection initWithCoder:]
28  0x10291ff0  Retain  17  UIKit   -[UIRuntimeConnection initWithCoder:]
29  0x10291ff0  Retain  18  UIKit   -[UIRuntimeConnection initWithCoder:]
30  0x10291ff0  Retain  19  UIKit   -[UIRuntimeConnection initWithCoder:]
31  0x10291ff0  Retain  20  UIKit   -[UIRuntimeConnection initWithCoder:]
32  0x10291ff0  Retain  21  UIKit   -[UIRuntimeConnection initWithCoder:]
33  0x10291ff0  Retain  22  UIKit   -[UIRuntimeConnection initWithCoder:]
34  0x10291ff0  Retain  23  UIKit   -[UIRuntimeConnection initWithCoder:]
35  0x10291ff0  Retain  24  UIKit   -[UIRuntimeConnection initWithCoder:]
36  0x10291ff0  Retain  25  UIKit   -[UIRuntimeConnection initWithCoder:]
37  0x10291ff0  Retain  26  UIKit   -[UIRuntimeConnection initWithCoder:]
38  0x10291ff0  Retain  27  UIKit   -[UIProxyObject initWithCoder:]
39  0x10291ff0  Retain  28  UIKit   -[UIRuntimeConnection initWithCoder:]
40  0x10291ff0  Retain  29  UIKit   -[UIRuntimeConnection initWithCoder:]
41  0x10291ff0  Retain  30  UIKit   UINibDecoderDecodeObjectForValue
42  0x10291ff0  Retain  31  UIKit   UINibDecoderDecodeObjectForValue
43  0x10291ff0  Retain  32  UIKit   UINibDecoderDecodeObjectForValue
44  0x10291ff0  Retain  33  UIKit   UINibDecoderDecodeObjectForValue
45  0x10291ff0  Release 32  UIKit   -[UINib instantiateWithOwner:options:]
46  0x10291ff0  Release 31  UIKit   +[UIProxyObject removeMappingsForCoder:]
47  0x10291ff0  Release 30  UIKit   +[UIProxyObject removeMappingsForCoder:]
48  0x10291ff0  Release 29  UIKit   -[UINibDecoder finishDecoding]
49  0x10291ff0  Release 28  UIKit   -[UINibDecoder finishDecoding]
50  0x10291ff0  Release 27  UIKit   -[UINibDecoder finishDecoding]
51  0x10291ff0  Release 26  UIKit   -[UINibDecoder finishDecoding]
52  0x10291ff0  Release 25  UIKit   -[UINibDecoder finishDecoding]
53  0x10291ff0  Release 24  UIKit   -[UINibDecoder finishDecoding]
54  0x10291ff0  Release 23  UIKit   -[UIRuntimeConnection dealloc]
55  0x10291ff0  Release 22  UIKit   -[UIRuntimeConnection dealloc]
56  0x10291ff0  Release 21  UIKit   -[UIRuntimeConnection dealloc]
57  0x10291ff0  Release 20  UIKit   -[UIRuntimeConnection dealloc]
58  0x10291ff0  Release 19  UIKit   -[UIRuntimeConnection dealloc]
59  0x10291ff0  Release 18  UIKit   -[UIRuntimeConnection dealloc]
60  0x10291ff0  Release 17  UIKit   -[UIRuntimeConnection dealloc]
61  0x10291ff0  Release 16  UIKit   -[UIRuntimeConnection dealloc]
62  0x10291ff0  Release 15  UIKit   -[UIRuntimeConnection dealloc]
63  0x10291ff0  Release 14  UIKit   -[UIRuntimeConnection dealloc]
64  0x10291ff0  Release 13  UIKit   -[UIRuntimeConnection dealloc]
65  0x10291ff0  Release 12  UIKit   -[UIRuntimeConnection dealloc]
66  0x10291ff0  Release 11  UIKit   -[UIRuntimeConnection dealloc]
67  0x10291ff0  Release 10  UIKit   -[UIRuntimeConnection dealloc]
68  0x10291ff0  Release 9   UIKit   -[UIRuntimeConnection dealloc]
69  0x10291ff0  Release 8   UIKit   -[UIRuntimeConnection dealloc]
70  0x10291ff0  Release 7   UIKit   -[UIRuntimeConnection dealloc]
71  0x10291ff0  Release 6   UIKit   -[UIRuntimeConnection dealloc]
72  0x10291ff0  Release 5   Foundation  -[NSAutoreleasePool drain]
73  0x10291ff0  Retain  6   MyApp   -[SSPullToRefreshView initWithScrollView:delegate:]
74  0x10291ff0  Release 5   MyApp   -[SSPullToRefreshView initWithScrollView:delegate:]
75  0x10291ff0  Retain  6   UIKit   -[UIWindow _setRotatableClient:toOrientation:updateStatusBar:duration:force:isRotating:]
76  0x10291ff0  Retain  7   libsystem_sim_blocks.dylib  _Block_object_assign
77  0x10291ff0  Retain  8   libsystem_sim_blocks.dylib  _Block_object_assign
78  0x10291ff0  Release 7   Foundation  __NSFireDelayedPerform
79  0x10291ff0  Release 6   UIKit   -[UIStoryboardSegue dealloc]
80  0x10291ff0  Release 5   Foundation  __NSFireDelayedPerform
81  0x10291ff0  Release 4   UIKit   -[UIStoryboardScene dealloc]
82  0x10291ff0  Retain  5   UIKit   __91-[UIWindowController transition:fromViewController:toViewController:target:didEndSelector:]_block_invoke_0238
83  0x10291ff0  Release 4   UIKit   __destroy_helper_block_250
84  0x10291ff0  Release 3   MyApp   __destroy_helper_block_
85  0x10291ff0  Release 2   UIKit   -[UIWindowController transitionViewDidComplete:fromView:toView:removeFromView:]
86  0x10291ff0  Retain  3   UIKit   -[UIViewController _dismissViewControllerWithTransition:from:completion:]
87  0x10291ff0  Retain  4   UIKit   __91-[UIWindowController transition:fromViewController:toViewController:target:didEndSelector:]_block_invoke_0238
88  0x10291ff0  Retain  5   UIKit   -[UIViewController _didFinishDismissTransition]
89  0x10291ff0  Retain  6   UIKit   -[UIApplication _removeViewControllerForLockingStatusBarTintColor:]
90  0x10291ff0  Release 5   UIKit   -[UIApplication _removeViewControllerForLockingStatusBarTintColor:]
91  0x10291ff0  Release 4   UIKit   -[UIApplication _removeViewControllerForLockingStatusBarTintColor:]
92  0x10291ff0  Release 3   UIKit   -[UIViewController setChildModalViewController:]
93  0x10291ff0  Release 2   UIKit   -[UIViewController _didFinishDismissTransition]
94  0x10291ff0  Release 1   UIKit   -[UIWindowController transitionViewDidComplete:fromView:toView:removeFromView:]
95  0x10291ff0  Release 0   UIKit   -[UIViewController _dismissViewControllerWithTransition:from:completion:]
96  0x10291ff0  Zombie  -1  UIKit   -[UIScrollView(UIScrollViewInternal) _delegateScrollViewAnimationEnded] 
```

-- edit --

Here is how I use AFNetworking to retrieve data on each page of my app :

```
[[APIClient sharedClient] getPath:request
                            parameters:params
                               success:^(AFHTTPRequestOperation *operation, id responseObject) {
                                   [SVProgressHUD dismiss];
                                   [self.pullToRefreshView finishLoading];

                                   ... read data ...                                       

                               } failure:^(AFHTTPRequestOperation *operation, NSError *error) {
                                   [SVProgressHUD showErrorWithStatus:error.localizedDescription];
                               }]; 
```

There is no will/didUnload methods, only this one:

```
- (void)viewWillDisappear:(BOOL)animated{
    [SVProgressHUD dismiss];
    [_pubnub unsubscribeFromChannel: self.pro.channel];
} 
```

# php - Hide elements with php or css?

> ID：15393550
> 
> 赞同：1
> 
> 时间：2013-03-13T18:28:40.930
> 
> 标签：php, css, semantics

Is there a "standard" or semantically preferred method of hiding elements? Two easy options are using php:

```
<?
if ( $_URL == "/page/" ){
?>
<div id="page">
  <div class="hide-or-show">
    stuff
  </div>
</div>
<?
}
<? 
```

or using css:

```
<css>
.hide .hide-or-show {
  display:none;
}
</css>

<div id="page" class="<? if ( $_URL == "/page/" ) print "hide"; ?>">
  <div class="hide-or-show">
    stuff
  </div>
</div> 
```

Both methods remove the element from the viewer. The php method would send less code. The css method seems cleaner (assuming you're removing more than just one element).

Is one method more "correct" than the other? Or is it just a programmer preference?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T18:43:05.687

第一种方法更好。您不会向客户端发送不必要的代码，从而使您的代码性能更好。仅当您需要在某个时刻显示元素时才使用 css 隐藏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T18:42:10.147

这里使用 css 是隐藏数据的最佳方式，因为它将在客户端机器上执行，每次使用 php 时总是更可取，我们必须向服务器发出请求，这也是更好的方式，但始终客户端执行是最好和有效的方式.

所以只需使用 css 而不是编写 php 脚本

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T18:44:05.360

**如果您稍后需要数据/元素，例如您计划使用 JavaScript 来显示它：**

CSS 是一种可接受的解决方案，您可以使用 Javascript 轻松更改类。

**如果以后不需要：**

通过 PHP “隐藏”很好，因为从技术上讲，它永远不会在 HTML 中呈现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T18:34:02.267

这取决于您的需求。一般来说，我会说如果页面上永远不需要它（即，它不是基于任何参数或用户操作动态显示/隐藏），那么根本不要发送它。对我来说，动态生成其他代码的代码（这是 PHP 对 HTML 所做的）最干净的输出没有包含任何不必要的内容。

# ios6 - can iOS 6 lock different Orientations for different view controllers in UITabBarController?

> ID：15393551
> 
> 赞同：2
> 
> 时间：2013-03-13T18:28:41.557
> 
> 标签：ios6, uitabbar, uiinterfaceorientation

i meet a different issue in my app for iOS 6\. i have a UITabBarController for the window's rootviewcontroller,and then i have 4 uiviewcontrollers in this tabbBarController, now i want twoof them is just display "UIInterfaceOrientationMaskPortrait",and the two others display in "UIInterfaceOrientationMaskLandscape", The problem is that when I tap from the one which display in "UIInterfaceOrientationMaskPortrait" to the other viewController which is UIInterfaceOrientationMaskLandscape , however the new selected viewcontroller is still "UIInterfaceOrientationMaskPortrait" ,but when i rotate the device, the new selected view controller is rotate to "UIInterfaceOrientationMaskLandscape" .....

so is there any way that can make the tabbarviewcontroller can autorotate when I tap the different viewControllers?

below is my code: 1\. I had alerady use the subclass of the UITabBarController in TR_UITabViewController.m

```
-(NSUInteger)supportedInterfaceOrientations
{
    return [self.selectedViewController supportedInterfaceOrientations];
}

-(BOOL)shouldAutorotate
{
    return  [self.selectedViewController shouldAutorotate];
} 
```

1.  also in appdelegate.m I implement the method

    *   (NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window{ NSUInteger orientations = UIInterfaceOrientationMaskAllButUpsideDown;

        if(self.window.rootViewController){ UITabBarController *presentedViewController = (UITabBarController *)self.window.rootViewController; UIViewController * currentVC=presentedViewController.selectedViewController;

        ```
        NSLog(@"currentVC info:%@",[currentVC description]);
        if ([currentVC isKindOfClass:[UIViewController class]]) {
            orientations = [currentVC supportedInterfaceOrientations];
           // self.tabBarController.=[currentVC supportedInterfaceOrientations];

        } else if([currentVC isKindOfClass:[UINavigationController class]]) {

            UINavigationController * nvc=(UINavigationController*)currentVC;
            UIViewController * vc=nvc.topViewController;

         orientations = [vc supportedInterfaceOrientations];
        } 
        ```

        }

        return orientations; }

3.at last I have write the below two method in each view controller - (BOOL) shouldAutorotate ; & - (NSUInteger) supportedInterfaceOrientations

In ,worlds, can someone know that how to force change the Orientation when tap the different view controllers in tabbarviewcontroller?

# c# - Dealing with a blocked message loop

> ID：15393556
> 
> 赞同：1
> 
> 时间：2013-03-13T18:28:52.277
> 
> 标签：c#, .net, winforms, winapi

I have a bit of an issue with an interaction between two applications.

You can replicate the issue with code like this:

```
using (Form1 frm = new Form1())
{
    frm.ShowDialog();
}

Thread.Sleep(120000); 
```

Using this code, a separate application, which we do not control, freezes when our application is running the `Thread.Sleep` portion of the code. We actually have a good idea of what's happening, having been on the receiving end of this bug before: the other app has a callback from the native `EnumWindows` method which doesn't check to see if windows are visible using the IsWindowVisible native method. Then when it calls `GetWindowText` or possible some other function, it hangs.

The reason for this hang is that it is trying to talk to our (now closed) window, which still has a handle registered, but doesn't respond to messages sent to its queue, and so the caller just sits there indefinitely (until the window fully dies after our Thread.Sleep).

Here is some sample code for the "untouchable" application that we have to deal with:

```
public bool RunTest()
{
    return NativeMethods.EnumWindows(new NativeMethods.EnumWindowsProc(EnumWindowsCallback), IntPtr.Zero);
}

private bool EnumWindowsCallback(IntPtr windowHandle, IntPtr parameter)
{
    NativeMethods.SendMessage(windowHandle, 0x000E, IntPtr.Zero, IntPtr.Zero);
    return true;
} 
```

If you run the first code, close the window that it opens, then run the second code block in a separate process, the second (EnumWindows) process will hang.

My problem is that I have to deal with this, and can't just fix the code in the hanging application. I can kick the window off into a separate thread, but that seems clumsy and somewhat fragile. Does anyone know of a way to clean this problem up using native calls, or any other more direct method?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T19:45:31.273

`Sleep`您可以使用等待计时器（使用`CreateWaitableTimer`函数创建）并继续运行消息循环（使用`MsgWaitForMultipleObjects`函数）直到计时器到期，而不是调用。

# wpf - 在 DataGrid 中绘制的快速轻量级方法

> ID：15393557
> 
> 赞同：2
> 
> 时间：2013-03-13T18:28:55.523
> 
> 标签：wpf, performance, datagrid, draw, timeline

我需要“数据网格”中的某种时间线，并且角色有很多行。

![https://www.dropbox.com/s/idz0zuk8u3jla11/img.PNG?m](../Images/463835dd7c416c0cf151e297e5b87164.png)

我的数据网格的左侧效果很好，因为只有文本。

右侧有点迟钝。

实际上，我的 DataGridTemplateColumn 位于时间线部分的第一个索引处。

我的 DataGridTemplateColumn 使用我的 UserControl 作为 DataTemplate，我在其中为整条线绘制了线条/矩形。这是有效的，因为我将对象的左边距设置为示例 500，因此它出现在右侧的其他列上......

用户控件是一个简单的网格，我在其中动态放置了我的矩形。

其他列也是 DataGridTemplateColumn 但它们是空的。

现在，我的想法是只制作一个列，我可以在其中放置一个大型用户控件并为该行绘制时间线。

这样做的最佳做法是什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T20:04:45.897

我看到你想制作一个时间线，这很好。我认为也许 Grid 不是最好的面板。我认为对于这种情况，您应该实现自己的自定义面板。制作自定义面板很棒，因为您可以设置项目的显示方式，还可以添加动画或拖动行为。你可以看到这个页面：

*   [如何：创建自定义面板元素](https://msdn.microsoft.com/en-us/library/vstudio/ms753321%28v=vs.100%29.aspx)
*   [面板概述](https://msdn.microsoft.com/en-us/library/vstudio/ms754152%28v=vs.100%29.aspx)
*   [拖动动画面板](http://draganimatedpanel.codeplex.com/)（这是我开发的面板，你可以看到通过面板可以为项目添加奇妙的行为，你只需要一个好主意）
*   [动画 WPF 面板](http://www.codeproject.com/Articles/153554/Animated-WPF-Panels)
*   [前 10 名面板](http://robrelyea.wordpress.com/2007/04/28/top-10-custom-panels/)
*   [WPF 教程：布局-面板-容器和布局转换](http://www.codeproject.com/Articles/140613/WPF-Tutorial-Layout-Panels-Containers-Layout-Trans)

另外我附上了一些我找到的面板链接，看看，也许你能找到有用的东西。

**编辑**

* * *

我忘记的另一件事是，您可以在任何 ItemsControl 中设置属性 ItemsPanel，这样您就可以将面板与任何项目源一起使用，例如可以在 ListBox 中使用它。

# xml - Replacing xml Text

> ID：15393560
> 
> 赞同：1
> 
> 时间：2013-03-13T18:29:04.677
> 
> 标签：xml, vbscript

I have a xml file which contains the following tags:

```
<gmd:title>
    <gco:CharacterString>READER FOREVER LEADER</gco:CharacterString>
</gmd:title> 
```

I have tried to replace the title:

```
<gmd:title>
    <gco:CharacterString>CHANGE TITLE</gco:CharacterString>
</gmd:title> 
```

But I have only this code:

```
Set objXMLDoc = CreateObject("Microsoft.XMLDOM")
objXMLDoc.async = False
objXMLDoc.load("albums.xml")
Set Elem = objXMLDoc.documentElement.selectSingleNode("gco:CharacterString") 
 MsgBox(Elem.text) 
```

How can I do that using vbScript?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T21:38:06.463

在[第一次点击明显的谷歌搜索的帮助下，我从](https://stackoverflow.com/a/8851515/603855)[这里](https://stackoverflow.com/a/11728542/603855)修改了我的答案以获得：

```
 Dim oFS    : Set oFS  = CreateObject("Scripting.FileSystemObject")
  Dim sFSpec : sFSpec   = goFS.GetAbsolutePathName("..\testdata\xml\so15393560.xml")
  Dim sNS    : sNS      = "xmlns:gmd='urn:x:y:z:1'  xmlns:gco='urn:x:y:z:1'"
  Dim oXML   : Set oXML = CreateObject("Msxml2.DOMDocument")
  oXML.setProperty "SelectionLanguage", "XPath"
  oXML.setProperty "SelectionNamespaces", sNS
  oXML.async = False
  oXML.load sFSpec
  If 0 = oXML.parseError Then
     WScript.Echo oXML.xml
     WScript.Echo "-----------------"
     Dim sXPath : sXPath    = "/gmd:title/gco:CharacterString"
     Dim ndFnd  : Set ndFnd = oXML.selectSingleNode(sXPath)
     If ndFnd Is Nothing Then
        WScript.Echo sXPath, "not found"
     Else
        WScript.Echo ndFnd.text
        WScript.Echo "-----------------"
        ndFnd.text = "Abracadabra"
        WScript.Echo oXML.xml
     End If
  Else
     WScript.Echo oXML.parseError.reason
  End If 
```

输出：

```
<gmd:title xmlns:gmd="urn:x:y:z:1" xmlns:gco="urn:x:y:z:1">
        <gco:CharacterString>READER FOREVER LEADER</gco:CharacterString>
</gmd:title>

-----------------
READER FOREVER LEADER
-----------------
<gmd:title xmlns:gmd="urn:x:y:z:1" xmlns:gco="urn:x:y:z:1">
        <gco:CharacterString>Abracadabra</gco:CharacterString>
</gmd:title> 
```

# php - 我需要 PayPal 的实时 REST API 凭据吗？

> ID：15393562
> 
> 赞同：0
> 
> 时间：2013-03-13T18:29:08.070
> 
> 标签：php, api, rest, paypal

经过无数次搜索和谷歌搜索，我一直无法弄清楚最简单的问题。

对 PayPal 进行 API 调用时，我是否需要使用“实时”凭据而不是“测试”凭据？

我要做的只是请求当前的 PayPal 余额并将其显示回内部 PHP 应用程序，但不确定我是否需要使用实时凭据。

任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T10:30:05.200

如果您正在测试，则不应使用真实账户。在此处登录[https://developer.paypal.com](https://developer.paypal.com)，然后您可以通过单击应用程序选项卡和沙箱帐户来设置要在沙箱中使用的帐户。您应该设置两个帐户 - 企业和个人。使用个人帐户向企业帐户发送付款。

您还需要设置正确的端点（即您将调用的 url）。对于沙盒，这类似于[https://api.sandbox.paypal.com/v1/oauth2/token](https://api.sandbox.paypal.com/v1/oauth2/token)

您还需要使用您的应用程序凭据（不同于贝宝凭据）对自己进行身份验证，这些可以在您的开发者帐户资料中找到。一旦您对请求进行了身份验证，您就会收到一个 API 令牌。然后必须在所有后续请求中使用此令牌。

也不是贝宝刚刚发布了一个新的[REST api](https://developer.paypal.com/webapps/developer/docs/api/)。使请求变得更加容易。

从这里开始[https://developer.paypal.com/webapps/developer/docs/integration/direct/make-your-first-call/](https://developer.paypal.com/webapps/developer/docs/integration/direct/make-your-first-call/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T19:07:26.237

您可以使用您的沙盒帐户进行测试。
要在沙盒中使用 REST API 进行测试，您需要使用在您的开发人员帐户中为您创建的促进者帐户。
这应该是您的开发者帐户中测试电子邮件帐户下列出的第一个电子邮件地址。

然后，您需要为此帐户使用您的 REST API 凭据（包括您的客户端 ID 和密码以及生成访问令牌 - 有关使用我们的 REST API 进行身份验证的更多信息，请参阅[我们的 API 文档的以下部分](https://developer.paypal.com/webapps/developer/docs/api/#authentication--headers)。

但是，您确定要使用 REST API 吗？
我们对他们非常满意，但您目前无法恢复与他们的当前余额。为此，您需要使用我们的[GetBalance API 调用](https://www.x.com/developers/paypal/documentation-tools/api/getbalance-api-operation-nvp)。[如果您想检索真实账户的余额，则需要针对我们的实时端点（通常为https://api-3t.paypal.com/nvp](https://api-3t.paypal.com/nvp)
） 使用 GetBalance 的实时凭证，反之亦然.

例如，获取帐户余额的典型示例如下所示：

```
METHOD=GetBalance&USER=your_API_username&PWD=your_API_password&SIGNATURE=your_API_signature&VERSION=96.0 
```

**获取**或**发布**这个（使用我们的非 REST API 并不重要）到[https://api-3t.paypal.com/nvp](https://api-3t.paypal.com/nvp)或[https://api-3t.sandbox.paypal.com/](https://api-3t.sandbox.paypal.com/)分别是live或sandbox，它会返回账户的当前余额给你。

另请参阅我们[的沙盒交易指南](https://www.x.com/developers/paypal/documentation-tools/ug_sandbox)。

# bash - 使用 shellscript 比较 2 个 csv 文件并在新的 csv 文件中输出差异

> ID：15393568
> 
> 赞同：0
> 
> 时间：2013-03-13T18:29:17.927
> 
> 标签：bash, unix, ksh

（比如说）我有 2 个 csv 文件 - file1.csv & file2.csv，如下所述：

```
**file1.csv**       
ID,version,cost                        
1000,1,30     
2000,2,40     
3000,3,50     
4000,4,60  

**file2.csv**      
ID,version,cost     
1000,1,30       
2000,2,45     
3000,4,55   
6000,5,70 
```

预期的 o/p 是一个新的 csv 文件，比如说 - file3.csv 应该包含两个文件中都存在的 ID 的详细信息，但与它相关的一些数据是不同的（这里是版本和成本） - 如下所示。

```
ID,field,old,new  
2000,cost,40,45     
3000,version,3,4    
3000,cost,50,55 
```

**我需要一个`unix` `bash/ksh`脚本来执行此操作**。我尝试了`sed/grep`但无法获得正确的 o/p。请帮帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T20:08:49.157

不是最优雅的解决方案，但它应该可以工作：

```
#!/usr/bin/ksh

csv1=file1.csv
csv2=file2.csv

echo "ID,field,old,new"
while read line; do
  grep "$line" "$csv2" >/dev/null && continue
  id=`echo "$line" | cut -d, -f1`
  grep "^$id," "$csv2" >/dev/null || continue
  version1=`echo "$line" | cut -d, -f2`
  cost1=`echo "$line" | cut -d, -f3`
  version2=`grep "^$id," "$csv2" | cut -d, -f2`
  cost2=`grep "^$id," "$csv2" | cut -d, -f3`
  if [ "$version1" != "$version2" ]; then
    echo "$id,version,$version1,$version2"
  fi
  if [ "$cost1" != "$cost2" ]; then
    echo "$id,cost,$cost1,$cost2"
  fi
done < "$csv1" 
```

# java - 巴比伦法或苍鹭法的平方根？

> ID：15393573
> 
> 赞同：1
> 
> 时间：2013-03-13T18:29:23.037
> 
> 标签：java, algorithm, math, square-root

我在java中实现了Babylonian/Heron的方法来获得一个数字的平方根，基于[维基百科信息](http://en.wikipedia.org/wiki/Heron%27s_method#Babylonian_method)

目前我有：

```
public static void main(String[] args) {
    System.out.println(Sqrt.sqrt1(8));
    //System.out.println(Sqrt.sqrt2(8));   //Infinite loop
    System.out.println(Sqrt.sqrt3(8));
    System.out.println(Sqrt.sqrt4(8));
}

static float sqrt1(float x) {
    float b = 0, h = x;

    while (b != h) {
        b = (h + b) / 2;
        h = x / b;
    }
    return b;
}

static double sqrt2(double x) {
    double b = x, h = 0;

    while (b != h) {
        b = (h + b) / 2;
        h = x / b;
    }
    return b;
}

static double sqrt3(double x) {
    double b = x, h = 0;

    while (Math.abs(b - h) > 0.000000000001) {
        b = (h + b) / 2;
        h = x / b;
    }
    return b;
}

static double sqrt4(double x) {
    double r = x, t = 0;

    while (t != r) {
        t = r;
        r = (x / r + r) / 2;
    }
    return r;
} 
```

输出将是：

> 2.828427
> 
> 2.82842712474619
> 
> 2.82842712474619

sqrt2 方法将永远循环，但这只会发生在双精度数上，因为 sqrt1 方法适用于浮点数。我不知道这是为什么。因此，如果我想使用双打，sqrt3 方法看起来像是要走的路。

我对我实施哪些方法有点困惑，¿巴比伦方法与苍鹭方法相同吗？

据我了解，巴比伦方法基于这样一个事实，即正方形的边是正方形（x）面积的平方根。所以你可以从一个尺寸为 bh 的矩形开始，得到两边的平均值 (b=b+h/2)，然后将此结果视为较小矩形的边，当然得到另一边 (h=x /b)。矩形将开始接近所需的正方形。这是我在 sqrt1、sqrt2 和 sqrt3 方法中所做的：

```
while (b != h) {
    b = (h + b) / 2;
    h = x / b;
} 
```

另一方面，维基百科链接说巴比伦/苍鹭方法是相同的，并将其描述为：

> “基本思想是，如果 x 高估了非负实数 S 的平方根，那么 S/x 将被低估，因此可以合理地预期这两个数字的平均值可以提供更好的近似值”

你可以在 sqrt4 方法中看到这个实现：

```
 while (t != r) {  
        t = r;  
        r = (x/r + r) / 2;  
    } 
```

据我所知，这两种方法不一样，但相似。如果我错了，请纠正我。

有趣的是我做不到：`while (b != h) {`当 b 和 h 是 sqrt2 方法中所示的双精度数时，因为它将永远循环。相反，我使用`while (Math.abs(b - h) > 0.000000000001) {`

但是，我可以做到：`while (t != r) {`使用 b 和 h 加倍，如 sqrt4 所示。

我会很感激有人解释这种行为。

**- - - - - -编辑： - - - - - - - - - - - - - - - - - - - ----------------------**

正如所建议的，两种算法都是相同的，但实现方式不同。但是，以下建议的代码永远循环，就像 x=8 的 sqrt2 一样：

```
static double sqrt5(double x) {
    double b = x;

    while (b != x/b) {
        b = (x / b + b) / 2;
    }
    return b;
} 
```

那么.. sqrt4 与其他实现有什么区别？为什么它不像其他人那样永远循环？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T18:57:07.260

**更新：** `sqrt4`最终退出循环的机会比`sqrt5`因为它的停止条件将来自一次迭代的近似值与来自它之前的迭代的近似值进行比较而具有更好的机会。

计算倾向于减少误差，因此最终计算的值非常接近与仅在最后一位不同`b`的确切平方根。此时，使用可用的有限精度计算的值将等于，并且迭代停止。`x/b``b``(x / b + b) / 2``b`

例如，如果我们正在计算 sqrt(2) 并达到近似值 b = 1.414213562373095，我们有：

```
>>> b
1.414213562373095
>>> 2/b                     # Close but not quite equal to b, 
1.4142135623730951          # iteration in sqrt5 continues
>>> (2/b + b)/2        
1.414213562373095           # Exactly equal to b, sqrt4 stops 
```

如您所见，一旦 b 达到 1.414213562373095，其值将不会因循环中的计算而改变。因为 b 和 2/b 仍然在最后一位不同，所以`sqrt5`永远不会退出。

* * *

Babylonian 和 Heron 的方法是相同的算法，它与求解 x²=a 的 Newton-Rhapson 方法是一致的。您拥有的各种实现之间的区别在于停止条件。例如：

```
while (b != h) {
    b = (h + b) / 2;
    h = x / b;
} 
```

是相同的：

```
while (b != x/b) {
    b = (x / b + b) / 2;
} 
```

当然，`b != x/b`这不是一个很好的停止条件，因为`b`它可能永远不会成为 x 的数学精确平方根：如果 b 不是精确平方根，则 x/b 不等于 b。例如在 Python 中：

```
>>> sqrt(2)
1.4142135623730951
>>> 2/sqrt(2)
1.4142135623730950 
```

例如，您几乎应该总是使用相对差异的界限作为停止条件

```
eps = 1e-6;
while (abs(b-h)/b > eps) { ... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T18:47:58.253

由于舍入错误，您永远不应该依赖双精度或浮点数的相等性。您需要另一种方法来确定您的近似值何时足够好。

一个好的开始是在每个循环中打印出近似值，以便您了解它是如何进行的。可能是两个连续近似值之间的差异越来越小，然后突然变得混乱。然后您知道您确实走得太远了，并返回上一个近似值，其中与先前的差异小于先前的差异。

一定要测试会产生一个永远不能用双精度表示的值的用例，比如 sqrt(2)。一定要测试应该产生可表示数字的案例。最后，确保你的函数在取平方根时会产生一个整数值。

对于浮点数和双精度数的差异：由于浮点数的精度较低，您会达到差异太小并且由于舍入误差导致 0 的点。但这只是运气，并且可能因输入不同而有所不同。但是，尾数中的位数越少，它的可能性就越大。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-13T20:52:13.893

正如其他人所写的，巴比伦的方法和赫伦的方法是一回事。巴比伦人发明了它，但赫伦是第一个写下来的，几百年后，所以他得到了赞誉。有时生活并不公平。

我也同意关于精度和舍入误差的评论。但我有一个不同的解决方案要提出。通过不断地乘以或除以 4 直到它在范围内，将求平方根的数字*x*标准化到 1 <= *x < 4 的范围内。*然后“展开循环”执行计算；由于*x*在已知范围内，因此可以预先计算循环次数，而无需进行计算以确定何时终止循环。最后，将最初除以或乘以 4 的次数乘以或除以 2。这是代码：

```
function sqrt(n)
    if n < 1
        return sqrt(n * 4) / 2
    if 4 <= n
        return sqrt(n / 4) * 2
    x := (n + 1) / 2
    x := (x + n / x) / 2
    x := (x + n / x) / 2
    x := (x + n / x) / 2
    x := (x + n / x) / 2
    x := (x + n / x) / 2
    return x 
```

我将把上面的伪代码翻译成 Java 留给你。对于双打来说，循环的五次展开就足够了。由于每次循环都会使精度位数翻倍，因此循环的四次展开对于浮点数来说就足够了。

[我在我的博客上](http://programmingpraxis.com/2012/06/01/square-roots/)讨论 Heron 的方法。

# html - 谷歌字体突然停止工作。这是什么原因造成的？

> ID：15393583
> 
> 赞同：2
> 
> 时间：2013-03-13T18:30:07.090
> 
> 标签：html, css, fonts, font-face, google-webfonts

我在我的网站[http://ryanscowles.com上使用](http://ryanscowles.com)[Google Web Fonts](http://www.google.com/webfonts)。他们工作得很好，直到几天前。我没有更改 CSS 中的字体，但它们不再起作用。我最初是这样称呼他们的：

```
@import url("http://fonts.googleapis.com/css?family=Enriqueta:700|Actor"); 
```

但出于测试目的，我现在尝试单独导入它们。

```
@import url(http://fonts.googleapis.com/css?family=Enriqueta:400,700);
@import url(http://fonts.googleapis.com/css?family=Actor); 
```

似乎都没有加载，并且在 Chrome 的网络检查器中，应用字体的样式似乎被划掉了。例如，`h1`左上角的应该是 Enriqueta 字体。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T18:55:46.147

我怀疑问题在于您在`@import`规则之前有评论。该`@import`规则必须位于样式表中的所有其他内容之前，我相信这包括注释。

但是我建议不要使用`@import`Google Web Fonts，请尝试使用该`link`方法，例如：

```
<link href='//fonts.googleapis.com/css?family=Enriqueta:400,700' rel='stylesheet' type='text/css'> 
```

这是一种将样式表添加到页面的更快、更可靠的方法，有关更多信息，请参阅这篇文章：[不要使用 @import](http://www.stevesouders.com/blog/2009/04/09/dont-use-import/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-02T19:13:24.147

使用`//fonts.googleapis.com...`而不是`http://fonts.googleapis.com...`- 对我有帮助。

# database - 弱实体可以有多个识别强实体吗？

> ID：15393587
> 
> 赞同：4
> 
> 时间：2013-03-13T18:30:28.060
> 
> 标签：database, entity

数据库中的弱实体可以有多个识别强实体吗？

弱实体的主键将是识别键的主键的总和（在弱实体中作为外键存在）。

这样的设计意味着什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T18:36:39.520

组合两个唯一键值来创建一个是有效的方法，只要组合的两个唯一键具有一对一的关系，这意味着两个唯一键的组合永远不会产生相同的值。

# jquery - jQuery使用来自json的数据将新元素附加到dom

> ID：15393595
> 
> 赞同：0
> 
> 时间：2013-03-13T18:30:55.263
> 
> 标签：jquery, json, dom, appendto

嗨，我正在编写一个脚本来从一些 json 读取数据

我想做几件事：

循环遍历数据并添加新`<divs>`的包含来自 json 的数据

我想每行有 3 个项目

这是我第一次尝试使用这种将 div 添加到要生成行的 dom 的方法（我附加的 json 示例数据只有 1 个条目）我的预期 html 结构如下：（relatedDetails 和相关的标题 div页面上已经存在。

```
<div class="relatedDetails">
    <div class="relatedHeader">Unit Bases near by:</div>
    <div class="detailRow">
        <div class="relatedItem">
            <img class="relatedImage" src=""/>
            <div class="relatedTitle">Title</div>
        </div>
        <div class="relatedItem">
            <img class="relatedImage" src=""/>
            <div class="relatedTitle">Title</div>
        </div>
        <div class="relatedItem">
            <img class="relatedImage" src=""/>
            <div class="relatedTitle">Title</div>
        </div>
    </div>
    <div class="detailRow">
        <div class="relatedItem">
            <img class="relatedImage" src=""/>
            <div class="relatedTitle">Title</div>
        </div>
        <div class="relatedItem">
            <img class="relatedImage" src=""/>
            <div class="relatedTitle">Title</div>
        </div>
        <div class="relatedItem">
            <img class="relatedImage" src=""/>
            <div class="relatedTitle">Title</div>
        </div>
    </div>
</div> 
```

我的 json 看起来像这样：

```
[{"id":"5","slug":"boston-manor-park-car-park","name":"Boston Manor Park car park","image":"","pinType":"ub","addr":"Boston Manor Road, London ","lat":"51.48967509541307","lng":"-0.3164195004638941","contact":"Reel Film Locations: ","restrictions":"Shared use with park users. External features unavaliable at present"}] 
```

我已经编写了一些 jquery 来解析这些数据并创建上述结构，但它没有将 div 添加到 dom。

不确定它是否与我如何使用变量来访问类有关，所以我知道`<divs>`我也想附加哪一行/相关项目，或者其他什么。

我的jQuery如下：

```
function createRelated(myRelated){
        alert('create related')
        console.log(myRelated);
        var relCount = 0;
        var rowCount = 0;
        var itemCount = 0;
        $.each(myRelated, function() {
            if(relCount == 3){
                relCount = 0;
            };
            // create a new row
            if(relCount = 0){
                var rowClass = 'relRow'+rowCount;
                $("<div/>",{
                    "class": "detailRow "+rowClass
                }).appendTo( ".relatedDetails" );
                rowCount++;
            }
            // create a new related item div
            var itemClass = 'item'+itemCount;
            $("<div/>",{
                "class": "relatedItem "+itemClass,
            }).appendTo(rowClass);

            //add the data to the related item
            $(itemClass).data('location',this);
            //add item to to our row
            $(rowClass).append(itemClass);
            // now loop through the keys and values and add the data
            $.each(this, function(k, v) {
                //add divs to the related item div          
                });
            itemCount++;
            relCount++;
        });
    }; 
```

测试页面：http: [//2012.reelfilmlocations.co.uk/Modules/builder_areaLocs.php](http://2012.reelfilmlocations.co.uk/Modules/builder_areaLocs.php)

***** 更新***** 我在这里创建了一个 js 小提琴：http: [//jsfiddle.net/DizzyHigh/35Jrc/2/](http://jsfiddle.net/DizzyHigh/35Jrc/2/)**

 **divs sinpmy 没有被创建，我不知道为什么:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T18:38:35.233

在您的示例代码中，您永远不会将新行 append() 到文档中。完成所有元素的生成后，您需要获取对要将其插入文档的点的引用，并将新元素附加到其中：

```
$(rowClass).appendTo("#WhereIWantMyData"); 
```

您希望将数据插入其中的 id="WhereIWantMyData" 的 HTML 中有一些元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T16:44:11.833

事实证明我非常愚蠢......

```
if(relCount = 0){
    //do stuff
} 
```

应该

```
if(relCount == 0){
    //do stuff
} 
```**

# c++ - “virtual void IBase::Foo”和“virtual void Foo”之间有什么区别？

> ID：15393597
> 
> 赞同：5
> 
> 时间：2013-03-13T18:31:04.767
> 
> 标签：c++, visual-c++

我使用了 VisualAssistX`Implement Virtual Methods`选项，它生成了：

```
class Base: public IBase
{
public:
    Base(void);
    ~Base(void);
    virtual void IBase::Foo(); 
```

我注意到我可以省略`IBase`并且程序仍然可以这样编译：

```
 virtual void Foo(); 
```

如果这是相同的代码？为什么 VisualAssistX 插入`IBase::`？它只是一种提高可读性的“代码风格”吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T18:41:39.603

如果您要从多个具有冲突虚函数的基类派生，这将有助于解决歧义。我怀疑这就是 VisualAssistX 选择插入`IBase::`.

是否`IBase::`有助于提高可读性是有争议的。我个人觉得它分散注意力。

此外，语法甚至不是标准的 C++。有关如何使用标准的可移植 C++ 解决多重继承问题的讨论和建议，请参阅[具有相同名称的纯虚函数的不同实现。](https://stackoverflow.com/questions/7925792/distinct-implementations-for-pure-virtual-functions-with-same-name)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T18:38:22.333

绝对不会提高可读性，反之亦然。范围前缀用于从外部使用或在可能存在解析歧义时使用，在范围内使用前缀本身只会混淆代码，实际上与 OOP 原则相矛盾。当您的实体在范围内不需要再次指出它时，它是完全多余的。关于 VA，我只能推测它的实现更简单。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T18:43:36.777

不同之处在于第一个不是有效的 C++。

也许您的编译器接受它（因为该编译器对该语言有许多奇怪的“扩展”）；但是如果您需要您的代码可移植到更多标准编译器，那么您将需要使用第二种形式。

> 为什么 VisualAssistX 插入`IBase::`？

我猜这是一种错误的尝试，表明该函数会覆盖在`IBase`;中声明的函数。但我不知道为什么有人认为这可能是个好主意。

> 它只是一种提高可读性的“代码风格”吗？

相反; 这个虚假声明使函数看起来像 的成员`IBase`，而实际上它是 的成员`Base`。这种混乱会降低可读性。

# linux - 从 bash 脚本中的文本文件添加新用户

> ID：15393599
> 
> 赞同：-1
> 
> 时间：2013-03-13T18:31:08.283
> 
> 标签：linux, bash

我是脚本新手，我不确定我的问题是什么。我还没有添加 groupadd 或 useradd 命令来实际添加用户，但是一旦我让这部分工作我会。到目前为止，我有：

```
!#/bin/bash

if [$# -ne 0 ]
then
    echo "usage: $0 < file'
    exit 1
fi

first=cut -f 1 -d ',' user_list
last=cut -f 2 -d ',' user_list
lastl=cut -f 2 -d ',' user_list | head -c 1

usern=$first $lastl | tr 'A-Z' 'a-z'
tname=$first $last
while read line; do
    echo "adding $tname : $usern\n"
done < user_text 
```

输出应该看起来像`adding Jet Black: jetb`，但它到处都是。关于我做错了什么的任何帮助或提示都会有很大帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T18:48:21.843

您可以通过阅读`IFS`变量在分词中的作用来使其更简单，然后编写如下内容：

```
while IFS=, read first last
do
  usern=$(echo "${first}${last:0:1}" | tr [:upper:] [:lower:])
  tname="${first} ${last}"
  echo "adding ${tname} : ${usern}"
done 
```

其他一些需要研究的东西 - 子字符串扩展 ( `${last:0:1}`)、字符类`tr`(`[:upper:]`等)、捕获命令的输出 ( `$(...)`)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T21:18:53.240

这是您的脚本的语法正确版本：

```
#!/bin/bash

if [ $# -ne 0 ]
then
        echo "usage: $0 < file"
        exit 1
fi

while read user_list
do
        first=`echo $user_list | cut -f 1 -d ','`
        last=`echo $user_list | cut -f 2 -d ','`
        lastl=`echo $last | head -c 1`

        usern=`echo $first $lastl | tr 'A-Z' 'a-z'`
        tname=`echo $first $last`
        echo "adding $tname : $usern\n"
done < user_text 
```

我认为您想删除 和 之间的空格`$first`，`$lastl`如下`$usern`所示：

```
usern=`echo ${first}${lastl} | tr 'A-Z' 'a-z'` 
```

然后还有很多改进要做，可能就像[twalberg 说](https://stackoverflow.com/a/15393896/641451)的那样，但我认为你最好的第一步是了解你的语法错误。

# php - 如何判断 MySQL 中的日期时间字段是否在 PHP 中是过去的？

> ID：15393602
> 
> 赞同：1
> 
> 时间：2013-03-13T18:31:29.790
> 
> 标签：php, mysql

我正在为一所学校建立一个网站，教师可以在其中添加作业。所有这些分配都存储在一个 MySQL 表中，其中一个 datetime 类型的字段存储到期日期。我正在寻找一种使用 PHP 的方法来检查截止日期是否过去，以便我可以为教师和学生提供视觉反馈。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T18:43:23.707

我会使用 PHP 的日期比较工具。这是一个例子：

```
$date1 = new DateTime("now");
$date2 = $yourDateFromTheDatabase;
if ($date2 < $date1) {
    //it still has time
} else {
    //time has passed
} 
```

这有帮助吗？您可以在此处找到更多示例：http: [//php.net/manual/en/datetime.diff.php](http://php.net/manual/en/datetime.diff.php)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T18:43:12.300

您实际上可以在查询中使用 MYSQL 处理这个问题，我会发现这更容易，因为您不必在 php 中处理日期。例如：

```
SELECT DueDate, (DueDate < CURDATE()) FROM table; 
```

(DueDate < CURDATE()) 返回 0/1

除此以外：

[比较给定日期和今天](https://stackoverflow.com/questions/2113940/php-compare-date)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-13T18:43:05.050

根据您将日期存储到**datetime**字段的方式（希望您使用的是 TIMESTAMP），您可以使用 PHP **strtotime**函数，该函数将 MySQL 时间戳解析为可用于比较 PHP 值的 Unix 时间戳。这是一个例子：

```
$res = mysql_query("SELECT datetime FROM assignments;");

while ( $row = mysql_fetch_array($res) ) {
    $date = date("g:i a F j, Y ", strtotime($row["date"]));
} 
```

并与`$date`变量进行比较。这是对一个想法的超级广泛和粗略的看法，但希望它有所帮助。

[您可以在此处](http://www.randomsnippets.com/2008/10/05/how-to-convert-mysql-timestamp-to-php-date-type/)阅读有关此概念的更多信息。

祝你好运！

# jquery - JQuery IF 输入值与任何字母大小写中的特定单词匹配

> ID：15393608
> 
> 赞同：0
> 
> 时间：2013-03-13T18:31:52.353
> 
> 标签：jquery

我正在处理一些表单，人们使用 JQuery 验证将数据添加到 mysql 数据库中，并想到了一个有趣的问题。我想知道如果以小写或大写或 2 的任意组合编写，您将如何拒绝特定单词。例如，如果我想在有人输入单词“wordnumber1”、“WordNumber1”、“WoRdNuMbEr1”、“ WORDnumber1"等。这是我正在使用的代码类型的示例格式：

```
if (word == "wordnumber1")
{
  $('.wordStatus').html("Invalid Word").removeClass("success").addClass("error");
  wordok = false;
} 
```

我尝试使用 indexOf() 但如果您输入任何匹配的字符，则会显示错误

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T18:35:58.007

您可以将插入的值设为大写并与大写的受限单词进行比较

```
if (word.toUpperCase() == 'WORDNUMBER1'){
     //YOUR CODE HERE
} 
```

如果你想检查各种单词，你可以有类似的东西

```
words = ['WORDNUMBER1','WORDNUMBER2','WORDNUMBER3']

if ($.inArray(word.toUpperCase(),words) != -1) {
     //YOUR CODE HERE
} 
```

# ruby-on-rails-3 - 使用 rails 实现新的 typeahead

> ID：15393615
> 
> 赞同：1
> 
> 时间：2013-03-13T18:32:17.863
> 
> 标签：ruby-on-rails-3, typeahead.js

这个问题与 Twitter 最近发布的新独立 typeahead 相关，而不是 Bootstrap 版本。

[Twitter Typeahead.js](http://engineering.twitter.com/2013/02/twitter-typeaheadjs-you-autocomplete-me.html)

我正在尝试将其集成到 Rails 应用程序中，以从数据库中查找一些帖子的名称，但在尝试使其正常工作时遇到了麻烦。当我搜索时没有任何反应，但我可以导航到 /posts.json 并获取数据。

我有一个包含硬编码数据的工作版本，您可以在此处看到实际操作，输入“a”以获取结果：

[jsFiddle 本地版本](http://jsfiddle.net/v7dJ4/1/embedded/result/)

**JS**

```
$(document).ready(function() {
  $('input.typeahead').typeahead({
  name: 'posts',
  prefetch: '/posts.json',
  limit: 10
 });
}); 
```

**输入**

```
<input class="typeahead" type="text" dir="ltr" placeholder="Search here...."> 
```

这是我的控制器：

```
def names
  names = []
  all = Post.where("name LIKE ?", "%#{params[:term]}%")
  all.each { |subc| names << subc.name }

render json: names 
```

结尾

参数设置：

```
Started GET "/sub_categories/names?q=a" for 127.0.0.1 at 2013-03-15 09:45:40 -0400
Processing by SubCategoriesController#names as JSON
  Parameters: {"q"=>"a"}
  SubCategory Load (0.5ms)  SELECT "sub_categories".* FROM "sub_categories" WHERE (name LIKE '%%') LIMIT 10
Completed 200 OK in 3ms (Views: 0.3ms | ActiveRecord: 0.5ms) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T18:51:54.883

我无法让预取工作，但我通过在 json 源的末尾添加“？q=%QUERY”来远程工作：

`remote: '../sub_categories/names?q=%QUERY'`

然后在查询中我发现您必须省略第一个 '%' 以便它与您键入的内容相匹配。

控制器：

`Post.where("name LIKE ? OR name LIKE ?", "#{params[:q]}%")`

# workflow-foundation-4 - 将 ExpressionTextBox 的 ExpressionType 设置为泛型类型

> ID：15393616
> 
> 赞同：0
> 
> 时间：2013-03-13T18:32:20.087
> 
> 标签：workflow-foundation-4, workflow-activity

我在设计器中使用**ExpressionTextBox**控件进行我拥有的活动时遇到了一个小问题。如何将XAML 中的**ExpressionType属性设置为定义****IEnumerable`1**泛型的**Type**对象？我可以完全不设置它，但理想情况下，我希望在设计时获得对控件的验证支持。

 **我尝试了以下方法，但不起作用：

```
<View:ExpressionTextBox 
   VerticalContentAlignment="Center" 
   Expression="{Binding Path=ModelItem.SelectedDestinations, Converter={StaticResource ResourceKey=ArgumentToExpressionConverter}, ConverterParameter=Out}" 
   ExpressionType="{x:Type TypeName=Generic:IEnumerable[Communication:CommunicationDeliveryDestination]}" 
   OwnerActivity="{Binding Path=ModelItem}" /> 
```

关于如何在 XAML中正确设置**ExpressionType属性的任何想法？**下面是我活动的设计器的完整 XAML。

```
<sap:ActivityDesigner x:Class="UrbanScience.ELS.Orchestration.Activities.Design.SelectDestinationsByLeadDestinationTypeDesigner"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:sap="clr-namespace:System.Activities.Presentation;assembly=System.Activities.Presentation"
    xmlns:View="clr-namespace:System.Activities.Presentation.View;assembly=System.Activities.Presentation"
    xmlns:sapc="clr-namespace:System.Activities.Presentation.Converters;assembly=System.Activities.Presentation"
    xmlns:Generic="clr-namespace:System.Collections.Generic;assembly=mscorlib"
                      xmlns:System="clr-namespace:System;assembly=mscorlib">

    <sap:ActivityDesigner.Resources>
        <ResourceDictionary>
            <sapc:ArgumentToExpressionConverter x:Key="ArgumentToExpressionConverter" />
        </ResourceDictionary>
    </sap:ActivityDesigner.Resources>

    <Grid Height="50">
        <Grid.RowDefinitions>
            <RowDefinition />
            <RowDefinition />
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition MinWidth="200" />
            <ColumnDefinition MinWidth="200" />
        </Grid.ColumnDefinitions>

        <TextBlock Text="Lead Destination Type:" VerticalAlignment="Center" Grid.Row="0" Grid.Column="0" />
        <ComboBox Name="LeadDestinationTypeItems" VerticalAlignment="Center" SelectedIndex="0" Grid.Row="0" Grid.Column="1" SelectionChanged="OnLeadDestinationTypeChanged" />

        <TextBlock Text="Assign selected destinations to:" VerticalAlignment="Center" Grid.Row="1" Grid.Column="0" />
        <View:ExpressionTextBox VerticalContentAlignment="Center" 
                                Expression="{Binding Path=ModelItem.SelectedDestinations, Converter={StaticResource ResourceKey=ArgumentToExpressionConverter}, ConverterParameter=Out}"
                                ExpressionType="{x:Type TypeName=Generic:IEnumerable[Communication:CommunicationDeliveryDestination]}"
                                OwnerActivity="{Binding Path=ModelItem}" Grid.Row="1" Grid.Column="1">
        </View:ExpressionTextBox>
    </Grid>
</sap:ActivityDesigner> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T21:23:51.440

用于`ModelItem`获取属性类型并绑定到它，如下所示：

```
ExpressionType={Binding ModelItem.Properties[SelectedDestinations].PropertyType.GenericTypeArguments[0]} 
```**

# javascript - TypeError：无法读取未定义的属性“属性”

> ID：15393621
> 
> 赞同：0
> 
> 时间：2013-03-13T18:32:38.000
> 
> 标签：javascript, node.js, geddy

我有一个 Node.js/Geddy 应用程序，它直到几分钟前还在工作。现在，当我尝试运行它时，出现以下错误：

[![](../Images/06f94a23aa051301b4b8dd5c52ac8197.png)](https://i.stack.imgur.com/pGSf1.png)

我有很多模型，但是对于其中一个模型，我收到了这个错误。

显示错误是因为在控制台中显示路径的文件中未定义以下内容：

```
reg[ownedModelName] 
```

在哪里

```
reg = model.descriptionRegistry 
```

和**ownedModelName**由

```
if (assnKey == 'belongsTo') {
        ownerModelName = modelName;
        ownedModelName = self.name;
        idKey = modelName;
      }
      else {
        ownerModelName = self.name;
        ownedModelName = modelName;
        idKey = self.name;
      } 
```

实际上，我知道**ownModelName**的值，但我不知道为什么**reg[ownedModelName]**是未定义的。

触发错误的模型如下所示：

```
var RenderingForm = function () {

 this.defineProperties({
    name: {type: 'string'},
    description: {type: 'string'},
    mode: {type: 'string'},
    helpText: {type: 'string'},
    noEvaluation: {type: 'boolean'},
    compatibleProblemTypes: {type: 'string'}
  });

  this.validatesPresent('name');
  this.validatesPresent('description');

};

RenderingForm = geddy.model.register('RenderingForm', RenderingForm); 
```

为什么这是未定义的，我该如何解决我的问题？

**更新：**

我尝试在另一个分区上创建相同的应用程序，但它不起作用，现在当我再次尝试运行旧应用程序时，我得到了同样的错误，但对于另一个模型而不是以前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T19:29:54.833

最后！！！多亏了[这个](https://groups.google.com/forum/?fromgroups=#!topic/geddyjs/uoDPUTSMK8M)，我发现它是 hasOne() 或 Many() 的参数错误。

# python - 如何制作自己的命令

> ID：15393622
> 
> 赞同：1
> 
> 时间：2013-03-13T18:32:40.910
> 
> 标签：python, linux

我是 linux 新手。

我制作了一个需要两个输入的python脚本

输入1>目录路径ex:-`~/home/user/apps`

输入 2>`file path`

文件在每一行中都包含模式

并且脚本的输出是与模式匹配并且在目录或输入目录路径的子目录中的所有文件。

现在使用这个 python 脚本我想在 Linux 中创建一个命令，比如：

`core_dump@core_dump-VPCCB15FG:~/python$search directory_path file_path`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T18:59:29.220

在您的`bashrc`文件中，您可以将脚本编码的目录添加到您的路径中，然后从任何地方调用它：

```
export PATH=/home/user/path/to/script:$PATH 
```

或者你可以在你的 bashrc 中创建一个别名

```
alias my_find_script='python /home/user/path/to/script' 
```

然后在你的 shell 中调用你的脚本：

```
$ my_find_script directory_path file_path 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T18:42:52.560

将程序添加到您的 /bin 目录 - 这是 linux 将搜索命令的地方

# android - 如何将 Cloud Endpoints 生成的 sources.jar 库移动到 Android 项目中

> ID：15393625
> 
> 赞同：4
> 
> 时间：2013-03-13T18:32:49.613
> 
> 标签：android, google-cloud-endpoints

Google Plugin for Eclipse 包含一个自动生成云端点客户端库的工具。但是似乎没有一种简单的方法可以将生成的 source.jar 文件移动到您的 Android 源代码中。

文档[https://developers.google.com/appengine/docs/java/endpoints/consume_android](https://developers.google.com/appengine/docs/java/endpoints/consume_android)说

> Endpoints 生成会生成一个源 jar 文件。将此 jar 文件的内容添加到您的 Android 项目中。

似乎不可能将 source.jar 文件放入 Android /lib 或 /libs，因为源是 .java 而不是 .class 形式。因此，我只需手动复制 GPE 生成的源代码（他们将其放在 AppEngine 项目的 endpoints-lib 文件夹中）。这可能非常麻烦，尤其是当您有多个端点并且经常对其进行编辑时。

另请参阅[将 android 应用程序连接到 Google Cloud Endpoints 时出错：找不到类](https://stackoverflow.com/questions/15088110/error-connecting-android-app-to-google-cloud-endpoints-could-not-find-class)

有谁知道直接在Android项目中实际使用sources.jar文件的方法？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T15:38:23.137

这个问题在 Eclipse 中通过在目录中添加链接资源来解决

your-appengine-project/endpoint-libs/libYourEndpoint-v1/yourendpoint/yourendpoint-generated-source/

您可以在 Eclipse 中通过在 Properties->Java Build Path->Source Link 中添加源链接来执行此操作

在此之后，您的 Android 或客户端项目将看到使用“Google->Generate Client Endpoint Library”生成的任何更改

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-15T22:06:22.220

这个想法是生成客户端库的向导也会将其复制到您的客户端项目中。

但这取决于例如您最初是如何创建项目的，即使它确实有效，如果您有多个客户项目，或者更改您的客户项目怎么办......所以这里有一些想法：

*   我找到了一个文件，该文件指定将客户端库复制到哪个项目（在 .settings 文件夹中）：com.google.gdt.eclipse.appengine.swarm.prefs：

    connectedProject=[target-android-project-name]
    eclipse.preferences.version=1

手动更改此文件对我有用，但如果它不存在，我没有尝试手动创建它。

*   您询问的另一个解决方案是手动复制文件。就我而言，我能够将生成的文件从 [gae-project]\endpoint-libs 复制到 [android-project]\endpoint-libs。如果我没记错的话，您必须找到源 jar 文件（它在您复制的文件中并且很容易找到）并将它们解压缩到“[endpoint-name]-v1-generated-source”文件夹中。您在找到 jar 的同一文件夹中创建此文件夹。

显然这不是一个很好的解决方案，所以..

*   有一个可以用来代替 GPE 向导的 endpoints.cmd/bat - 我建议您查看它是否有用于复制和提取生成的库的命令。我相信您会在 GAE/J SDK 的“bin”文件夹中找到它。

# c# - 使用 WCF 传输子类

> ID：15393628
> 
> 赞同：0
> 
> 时间：2013-03-13T18:32:56.543
> 
> 标签：c#, wcf, class, inheritance

我在使用 WCF 传输子类时遇到了一点问题。我想创建一个通用的“反馈”类，并从反馈中继承：成功类和失败类（失败有错误代码和描述）。这应该使客户端能够执行以下操作：

```
If (myWCFclient.authenticate(user, password) is Succes)
{
..
} 
```

在我的 WCF 数据合同中，我是这样定义的：

```
[DataContract]
public class Feedback : IFeedback
{ 
}

[DataContract]
public class Succes : Feedback
{
}

[DataContract]
public class Failure : Feedback
{
    [DataMember]
    public int errorCode { get; set; }
    [DataMember]
    public String description { get; set; }
} 
```

这很好用，我的操作合同如下所示：

```
[OperationContract]
Feedback Authenticate(String email, String password); 
```

但是在我接收这些课程的“客户”应用程序中，我只发现“反馈”作为一个课程，“成功”和“失败”无处可寻。

![在此处输入图像描述](../Images/6257395566de090d0b77270bae9705cc.png)

有谁知道我做错了什么？我是否应该在我的 DataContracts 中定义那些不同的“成功”和“失败”类，因为它们是“反馈”的子类？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T19:20:11.183

There are several ways to resolve this. I think that the following way is the best for you:

```
[DataContract]    
[KnownType(typeof(Success))]
[KnownType(typeof(Failure))]
public class Feedback : IFeedback
{ 
} 
```

see also [MSDN reference](http://msdn.microsoft.com/en-us/library/ms730167.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T19:09:16.140

代理生成器将客户端的类结构展平。解决这个问题的一些方法：

**共享库**

在客户端和服务器之间创建一个共享库，这样您就不必生成代理。这可能不是服务的“纯粹”方法，但至少您不必每次都生成代理。

**部分课程**

客户端代理被创建为部分类。您可以创建接口并在附加的分部类文件中实现它们。

例子：

```
public partial class MyProxy : IFeedback
{
   //you won't have to add code here if the members of IFeedback line up with your data member names.    
} 
```

# java - 在 Windows 中为 JAVA_HOME 更新系统变量

> ID：15393634
> 
> 赞同：1
> 
> 时间：2013-03-13T18:33:24.893
> 
> 标签：java, windows

我已经在我的 Windows 7 机器上安装了 Java。接下来，我`JAVA_HOME`在环境变量中添加了用户变量，并放入`JAVA_HOME`变量`path`中，如下所示：

```
%JAVA_HOME%\bin 
```

当我从命令行运行`echo %JAVA_HOME%`时，我得到`C:\Program Files\Java\jdk1.7.0_17`. 而且，当我跑步时`echo %path`，我得到：

```
C:\Program Files (x86)\DNASTAR\SeqMan NGen 3;C:\Program Files (x86)\HP SimplePas
s 2011\x64;C:\Program Files (x86)\HP SimplePass 2011\;;C:\Program Files\Broadcom
\Broadcom 802.11\Driver;;C:\Program Files\Common Files\Microsoft Shared\Windows
Live;C:\Program Files (x86)\Common Files\Microsoft Shared\Windows Live;C:\Window
s\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerS
hell\v1.0\;C:\Program Files (x86)\Windows Live\Shared;C:\Program Files (x86)\ATI
 Technologies\ATI.ACE\Core-Static;C:\Program Files\WIDCOMM\Bluetooth Software\;C
:\Program Files\WIDCOMM\Bluetooth Software\syswow64;C:\Program Files\Broadcom\WH
L\;C:\Program Files\Broadcom\WHL\syswow64;C:\Program Files\Broadcom\WHL\SysWow64
\;C:\Program Files\Broadcom\WHL\SysWow64\syswow64;C:\Program Files (x86)\Intel\S
ervices\IPT\;%JAVA_HOME%\bin 
```

但是，当我尝试`javac`从该`bin`文件夹运行时，出现以下错误：

```
'javac' is not recognized as an internal or external command,
operable program or batch file. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T18:38:10.180

您应该设置用户变量的*PATH*

![在此处输入图像描述](../Images/019b43e153040627191368af16e5a979.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T19:06:17.603

您是否从创建 PATH 条目*后*打开的命令提示符运行 javac ？*我问的原因是因为命令提示符是使用第一次*打开时存在的环境变量初始化的。之后，该命令提示符将无法识别对 env 变量所做的任何更改。因此，如果您确实进行了更改，请确保关闭当前命令提示符并打开一个新命令提示符，以便它会看到更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T19:56:02.873

因为你可以运行java，但不能运行javac，我猜你已经安装了一个JRE，它不包含javac。您需要安装 JDK。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T19:12:11.647

将您移动`%JAVA_HOME%\bin`到变量的开头`PATH`而不是末尾。然后打开一个新的 DOS 提示符并重试`java -version`。

# c# - 从另一个表达式构建索引表达式

> ID：15393644
> 
> 赞同：1
> 
> 时间：2013-03-13T18:33:47.453
> 
> 标签：c#, asp.net-mvc, lambda, expression-trees

设想

```
public class Element {
   public int Id {get;set;}
}

public class ViewModel {
   public IList<Element> Elements{get;set;}
} 
```

我有一个带有 type 参数的方法`Expression<Func<Element, int>>`，看起来像`m => m.Id`

我想变身

`m => m.Id`（其中 m 是一个元素）

至

`x => x.Elements[0].Id`其中 x 是 ViewModel，0 是“索引”参数

我现在拥有的（当然是通用的，为了清楚起见，我删除了通用部分）

```
public static class Helpers {
    public static Expression<Func<ViewModel, int>> BuildExpressionArrayFromExpression(
                this Expression<Func<Element, int>> expression,
                ViewModel model,
                int index = 0, 
                string bindingPropertyName = "Elements"//the name of the "List" property in ViewModel class
                ) 
    {
       var parameter = Expression.Parameter(typeof(ViewModel), "x");
       var viewModelProperty = model.GetType().GetProperty(bindingPropertyName);
       Expression member = parameter;//x => x
       member = Expression.Property(member, viewModelProperty);//x => x.Elements

       var test1 =  Expression.Property(member, "Item", new Expression[]{Expression.Constant(index)});
       //x => x.Elements.Item[0], and I don't want Item

       var test2 = Expression.Call(member, viewModelProperty.PropertyType.GetMethod("get_Item"), new Expression[] {Expression.Constant(index)});
       //x 0> x.Elements.get_Item(0), and I don't want get_Item(0)

       //code to add Id property to expression, not problematic
       return Expression.Lambda<Func<ViewModel, int>(member, parameter);
    }
} 
```

**编辑**

我需要`x => x.Elements[0]`而不是`x => x.Elements.Item[0]`，因为结果表达式必须用`InputExtensions.TextBoxFor(<myIndexedExpression>)`

想象一下这样的班级

```
public class Test {
  public int Id {get;set;}
  public IList<Element> Elements {get;set;}
} 
```

和一个后期动作

```
[HttpPost]
public ActionResult Edit(Test model) {
 bla bla bla.
} 
```

如果我的输入的名称属性没有很好地生成，那么我就会遇到绑定问题（model.Elements 在我的 Post Action 中是空的）。

*我输入的名称属性*应该是

```
Elements[0]PropertyName 
```

我得到（取决于我的尝试）

`PropertyName`

或（也许不准确，我尝试重现这种情况）

```
Elements.Item[0].PropertyName 
```

**编辑2**

还尝试了一个不同的解决方案，使用 ViewData.TemplateInfo.HtmlFieldPrefix，但我得到了

```
Elements.[0].PropertyName 
```

（和 Elements_ *0* _PropertyName 作为 Id）。

第一个点在名称中是不需要的，第一个“双下划线”应该是 id 中的简单点。

我实际上使用这个解决方案，使用正则表达式（argh）来删除不需要的。和 _ ，但我想避免这种情况。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T17:34:26.330

这*只是*表达式树的字符串表示的问题，您无法更改它。您正在构建的表达式树很好。如果您使用 lambda 表达式构建表达式树，您可以看到相同的效果：

```
using System;
using System.Collections.Generic;
using System.Linq.Expressions;

class Test
{
    public static void Main()
    {
        Expression<Func<List<string>, string>> expression = list => list[0];
        Console.WriteLine(expression);
    }
} 
```

输出：

```
list => list.get_Item(0) 
```

如果调用`ToString()`表达式树的结果*确实*是您面临的问题，我会感到非常惊讶。与其告诉我们您认为需要的结果和模糊的“我需要它是出于 MVC 绑定原因”的理由，不如说明实际出了什么问题。我强烈怀疑问题不在你认为的地方。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-29T13:37:37.777

```
Expression<Func<Element, int>> expr1 =
    m => m.Id;
Expression<Func<ViewModel, Element>> expr2 =
    x => x.Elements[0];

Expression<Func<ViewModel, int>> result =
    expr1.ComposeWith(expr2); 
```

**结果：**

```
expr1 = m => m.Id
expr2 = x => x.Elements.get_Item(0)
result = x => x.Elements.get_Item(0).Id 
```

它将 ( ) 的参数替换为( `expr1`)`m`的主体，并将输入参数替换为`expr2`( ) 中的参数。`x.Elements[0]``expr2``x`

**扩展方法`ComposeWith`：**

```
public static class FunctionalExtensions
{
    public static Expression<Func<TInput,TResult>> ComposeWith<TInput,TParam,TResult>(
        this Expression<Func<TParam,TResult>> left, Expression<Func<TInput,TParam>> right)
    {
        var param = left.Parameters.Single();

        var visitor = new ParameterReplacementVisitor(p => {
            if (p == param)
            {
                return right.Body;
            }
            return null;
        });

        return Expression.Lambda<Func<TInput,TResult>>(
            visitor.Visit(left.Body),
            right.Parameters.Single());
    }

    private class ParameterReplacementVisitor : ExpressionVisitor
    {
        private Func<ParameterExpression, Expression> _replacer;

        public ParameterReplacementVisitor(Func<ParameterExpression, Expression> replacer)
        {
            _replacer = replacer;
        }

        protected override Expression VisitParameter(ParameterExpression node)
        {
            var replaced = _replacer(node);
            return replaced ?? node;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T18:58:16.800

您应该能够使用[MakeIndex](http://msdn.microsoft.com/en-us/library/dd324030.aspx)来制作索引器表达式：

```
MemberExpression memberExpr = Expression.Property(member, viewModelProperty);//x => x.Elements
var indexProperty = typeof(IList<Element>).GetProperty("Item");
var indexExpr = Expression.MakeIndex(memberExpr, indexProperty, new Expression[]{Expression.Constant(index)});

return Expression.Lambda<Func<ViewModel, int>(indexExpr, parameter); 
```

# sql - 交叉乘法查询

> ID：15393645
> 
> 赞同：0
> 
> 时间：2013-03-13T18:33:48.263
> 
> 标签：sql

我喜欢获取尚未包含在 Customer_Machine 表中的序列号。但相反，这些行是交叉相乘的。这是我的代码。

```
SELECT serial_number.serial_no 
FROM   product 
       INNER JOIN serial_number 
               ON product.productid = serial_number.productid 
       INNER JOIN customer_machine 
               ON NOT( customer_machine.serial_no = serial_number.serial_no ) 
```

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T18:38:16.667

这应该这样做：

```
SELECT serial_number.serial_no 
FROM   product P
INNER JOIN serial_number S
       ON P.productid = S.productid 
WHERE NOT EXISTS (SELECT 1 FROM customer_machine 
                  WHERE serial_no = S.serial_no) 
```

您现在正在做的，是加入与from 不匹配的`customer_machine`for each from ；所以你正在增加你的结果。`serial_no``serial_number``customer_machine`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T18:46:05.590

如果你加入`Product`和`serial_number`表格，结果将是`serial numbers which are in products but not in customer_machine`. 由于上述答案处理了这种情况，因此此查询将使用 a和忽略表进行选择`serial numbers which are not in customer_machine`（如您所述） 。`left join``Product`

[**Sql-Server 小提琴演示**](http://sqlfiddle.com/#!3/4a809/1)

```
select s.serial_no
from serial_number s 
    left join customer_machine c on s.serial_no = c.serial_no
where c.serial_no is null 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T18:40:19.920

```
SELECT serial_number.serial_no 
FROM   product
       INNER JOIN serial_number 
               ON product.productid = serial_number.productid 
       LEFT JOIN customer_machine 
               ON ( customer_machine.serial_no = serial_number.serial_no)
 WHERE customer_machine.serial_no IS NULL 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T18:41:07.437

您可能只想排除已经存在的特定序列号，而不是将它们加入其中。您可以在 where 子句中执行此操作：

```
SELECT serial_number.serial_no 
FROM   product 
INNER JOIN serial_number 
           ON product.productid = serial_number.productid 
WHERE serial_number.serial_no NOT IN ( SELECT customer_machine.serial_no
                                       FROM customer_machine ) 
```

# amazon-web-services - Elastic Beanstalk 无法更新本地 Git 配置 - Windows

> ID：15393646
> 
> 赞同：2
> 
> 时间：2013-03-13T18:33:50.273
> 
> 标签：amazon-web-services, amazon-elastic-beanstalk

```
> eb init
(Answered all questions)

Failed to update local Git configuration. Follow the instructions at "http://doc
s.amazonwebservices.com/elasticbeanstalk/latest/dg/command-reference-get-started
.html" to set up your Git repository, and then try again.
local variable 'fullpath' referenced before assignment 
```

*   我的平台是Windows。
*   我已遵循[http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/create_deploy_Python_flask.html中的所有说明](http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/create_deploy_Python_flask.html)
*   Git (git-scm) 从命令行工作。
*   GIT_SSH 路径已设置为`C:\Program Files (x86)\PuTTY\plink.exe`

我查看了另外两个类似但没有帮助的问题，

*   [Elastic Beanstalk 未能更新本地 Git 配置](https://stackoverflow.com/questions/14246615/elastic-beanstalk-failed-to-update-local-git-configuration)
*   [我正在尝试将 ruby​​ on rails git 部署设置到 AWS Elastic Beanstalk；“eb init”失败](https://stackoverflow.com/questions/14289271/im-trying-to-set-up-ruby-on-rails-git-deployment-to-aws-elastic-beanstalk-eb)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-10T17:51:25.927

您必须将 PATH 设置为**eb**的位置。像下面这样：

```
C:\> set PATH=%PATH%;<path_to_unzipped_EB_CLI_package>\eb\windows\ 
```

对我来说，我把[AWS Sample Code & Libraries](http://aws.amazon.com/code/6752709412171743)文件夹放在我的 C 盘上，所以上面的链接必须是

```
C:\AWS-ElasticBeanstalk-CLI-2.5.1\eb\windows\ 
```

确保您拥有所有**AWS-ElasticBeanstalk-CLI-2.5.1**文件夹内容；**eb**和**api**文件夹

# intellij-idea - Intellij 插件开发 - 调试时获取对象

> ID：15393652
> 
> 赞同：0
> 
> 时间：2013-03-13T18:34:08.350
> 
> 标签：intellij-idea, intellij-plugin

如何在插件操作中获取插入符号下的对象？该插件应该只在调试器上下文中工作。我获得了 PSI 文件并获得了有关该类及其组成部分的所有信息，但我不知道如何获得实际对象的引用。我假设，它是调试器上下文的一部分。

注意：我认为这样的东西必须是 Intellij Evaluate 功能的一部分（在调试上下文中 Alt + 单击对象）。我下载了源代码，在debugger.actions下找到了EvaulateActionHandler，但还是卡住了。

# java - jdom2 并从 URI 读取 xml 字符串而不是文件

> ID：15393654
> 
> 赞同：0
> 
> 时间：2013-03-13T18:34:42.223
> 
> 标签：java, xml, jdom-2

如何将原始 XML 字符串读入 jdom2 进行操作？我在网上找到的一切都是从 url 加载文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T18:58:11.573

它们还公开了从 java.io.Reader 加载 XML 的方法，在这种情况下，您可以从 String 创建 StringReader，如下所示：

```
StringReader xmlReader = new StringReader(myXmlString); 
```

# mysql - 如何在 MySQL 中找到每天的最高分？

> ID：15393655
> 
> 赞同：2
> 
> 时间：2013-03-13T18:34:44.270
> 
> 标签：mysql, sql, greatest-n-per-group

我们有一个游戏，玩家在地图上奔跑，并为此得分。我们需要找出哪些尝试在每张地图上得分最高，并将其`isHighScore`标志设置为 true。每张地图只有一次尝试可以获得高分 - 如果两次尝试得分相同，则只有按时间顺序最先出现的尝试才应`isHighScore`设置其标志。

我们目前拥有的 SQL 如下所示：

```
UPDATE attempts AS A1
SET isHighScore = 1
WHERE A1.ID =
(
    SELECT A2.ID
    FROM (SELECT ID, score, mapID, `date` FROM attempts) AS A2
    WHERE A2.mapID = A1.mapID
    ORDER BY A2.score DESC, A2.date ASC
    LIMIT 1
) 
```

*（`(SELECT ... FROM attempts)`子查询是由于[这个问题](https://stackoverflow.com/a/14302701/238419)）*

在大约 75k 条目的表上运行上述操作所需的时间比超时时间要长*（是的，在 上有一个索引`mapID, score, date`）*。我认为这是因为最里面的查询将整个`attempts`表复制到一个临时表，但是将`WHERE mapID = A1.mapID`条件移动到该查询中会产生语法错误，所以我不知道该怎么做。此外，内部查询为每一行运行一次 - 也许有办法解决这个问题？

**有谁知道在 MySQL 中编写此查询的更好方法？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T18:58:06.287

您可以尝试使用更新连接。

```
UPDATE attempts
RIGHT JOIN
(
    SELECT id FROM attempts a1
    WHERE NOT EXISTS
    (
        SELECT 0 FROM attempts a2
        WHERE a2.mapID = a1.mapID AND 
            (a2.score > a1.score OR (a2.score = a1.score AND a2.date < a1.date))
    )
) tmp ON tmp.id = attempts.id
SET attempts.isHighestScore = 1; 
```

如果您在 mapID 列和 score 列上放置索引，这应该相当快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T19:59:39.480

这可行，但我不确定性能，试一试。这是[小提琴](http://www.sqlfiddle.com/#!2/4dbfb/1/0)。

```
UPDATE attempts SET isHighScore = 1 WHERE ID IN
(
  SELECT ID FROM
  (
    SELECT a5.* FROM attempts a5
    INNER JOIN
    (
      SELECT mapID, max(score) as max_score, min(date) as min_date FROM
      (
         SELECT a1.id, a1.mapID, a1.score, a1.date 
         FROM attempts a1 
         INNER JOIN
        (
          SELECT mapID, max(score) as max_score 
          FROM attempts
          GROUP BY mapID
         ) a2
         ON
            a1.mapID = a2.mapID and a1.score = a2.max_score
      ) a3
      GROUP BY mapID
    ) a4
    ON a5.mapID = a4.mapID and a5.score = a4.max_score and a5.date = a4.min_date
   )a6
); 
```

**说明**：

1-inner most group by 给出每个 mapID 的 max_score 和 mapID

2- 这与原始表连接以查找这些尝试的 id 和日期，但当 max_score 存在平局时，每个 mapID 可能包含多于一行

3-再次按mapID分组以获取最小（日期）

4-再次加入原始表以获取更新的ID

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T18:52:12.663

您可以尝试使用相关子查询仅匹配同一地图的行，其中没有其他行具有更高的分数，或者如果有一个具有相同分数的行，则没有其他行具有较旧的日期：

```
UPDATE attempts
   SET isHighScore = 1
 WHERE ID IN (
           SELECT ID FROM (
               SELECT ID
                 FROM attempts a1
                WHERE NOT EXISTS (
                          SELECT 0
                            FROM attempts a2
                           WHERE a2.mapID = a1.mapID
                             AND (a2.score > a1.score OR
                                 (a2.score = a1.score AND a2.date < a1.date))
                      )
           ) a0
       ) 
```

一个[SQLFiddle](http://www.sqlfiddle.com/#!2/c309d/2)。

不要忘记将旧的高分设置为 0。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-13T19:47:40.120

对于这样的事情，我总是推荐一个临时表。在这种情况下，临时表可能有列 - (id, high_score, map) -

```
create temporary table temp1
select min(id) as id, highest_score, map 
from attempts 
where <<attempts of today>>
group by map; 
```

现在直接加入临时表的尝试并标记它们。

```
update temp1 as t inner join attempts as a on a.id = t.id
set a.isHighestScore = 1;

Drop temporary table temp1; 
```

*（如果启用了复制，请使用永久表或事务以更安全）*

# eclipse - 'gradle eclipse' 之后 Spring 项目中的空验证消息

> ID：15393656
> 
> 赞同：1
> 
> 时间：2013-03-13T18:34:46.620
> 
> 标签：eclipse, spring, war, gradle

在我从使用 Maven 构建 Spring 项目迁移到使用 gradle 构建它之后，我遇到了奇怪的空验证错误。

我注意到路径`src/main/webapp/WEB-INF/classes`在`Web App Libraries`构建路径组下，尽管使用 Maven-import 配置它只是在 src 目录中。

使用`gradle cleanEclipse`、刷新和清除项目，也没有删除所有`.metadata`, `.settings`, `bin`, `.classpath`,`.project`目录没有帮助。

除了那个 WAR 文件构建得很好。

配置：

```
//----------------------------------------------------------------------------
//                        SERVER'S TASKS' CONFIGURATION
//----------------------------------------------------------------------------

configure(serverProjects) {
    apply plugin : 'war'
    apply plugin : 'eclipse-wtp'

    sourceCompatibility = 1.7
    targetCompatibility = 1.7
}

project(':Server') {
    war {
        destinationDir serverDir
    }
}

...

//----------------------------------------------------------------------------
//                      SERVER'S PROJECTS' CONFIGURATION
//----------------------------------------------------------------------------

project(':Server') {
    eclipse {    
        project {
            natures "com.springsource.sts.gradle.core.nature"
        }

        classpath {
            containers "com.springsource.sts.gradle.classpathcontainer"
        }
    }
}

...

//----------------------------------------------------------------------------
//                    SERVER'S DEPENDENCIES' CONFIGURATION
//----------------------------------------------------------------------------

configure(serverProjects) {
    repositories {
        mavenCentral()
        maven { url 'https://repository.jboss.org/nexus/content/groups/public' }
    }
}

project(':Server') {
    dependencies {
        ...
    }
} 
```

我该怎么做才能确保将项目导入 Eclipse 而不会出现此问题？

编辑：

我唯一可见的信息是这个：[![空验证错误](../Images/9aff74876ca961944783c774fc635dc9.png)](https://i.stack.imgur.com/ALpIo.png)

据我所知，maven 构建的项目没有任何错误，只有少量警告。现在我看到`<form:errors path="field"/>`关于“列表是通用的”的简单呼喊。

编辑2：

我设法通过将项目配置更改为：

```
//----------------------------------------------------------------------------
//                      SERVER'S PROJECTS' CONFIGURATION
//----------------------------------------------------------------------------

project(':Server') {
    eclipse {    
        project {
            natures      "org.springframework.ide.eclipse.core.springnature"
            buildCommand "org.springframework.ide.eclipse.core.springbuilder"
        }
    }
} 
```

但主要问题 - 没有关于它所关注的信息的验证错误 - 仍然存在。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-26T18:31:28.270

我有同样的问题（我认为）。我通过右键单击项目并选择“验证”来解决它。这重新执行了验证并清除了错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T14:25:59.573

在警告清理期间，我决定删除文件`src/test/resources/log4j.xml`，因为它与`src/main/resources/log4j.xml`. 在那一刻，空验证错误消失了。

如果其他人遇到类似的错误，他应该尝试摆脱所有警告，因为显然他们能够使项目无法通过 Eclipse 验证。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-03T08:45:14.277

就我而言，编码会导致这个问题。我的源代码由 UTF-8 编码，但 eclipse 设置为 MS949。如果将 eclipse 或工作空间编码设置更改为 UTF-8，则可能会删除空验证错误。

有时，尽管设置了正确的编码，但问题并没有消除。这时，我将编码更改为任何其他类型，然后将其回滚为 UTF-8。然后，它可能会被删除。

# android - 什么可以阻止 webview 的内容被缓存？

> ID：15393660
> 
> 赞同：0
> 
> 时间：2013-03-13T18:34:59.630
> 
> 标签：android, caching, webview

我看到我的 webview 每次加载时都会加载所有资源/资产（js、css），我想知道什么可以阻止这些内容被缓存从而无法重用？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T21:15:42.943

这可能是服务器缓存策略的问题，与 WebView 无关。

顺便说一句，您确定它们已重新加载，还是只是轮询更改而实际上并未重新获取？

尝试在您的 PC 上使用 Chrome 进行调试。

# javascript - jQuery插件创作

> ID：15393661
> 
> 赞同：2
> 
> 时间：2013-03-13T18:35:02.000
> 
> 标签：javascript, jquery, jquery-plugins

知道为什么这个基本示例不起作用吗？

[http://jsfiddle.net/Kq6pz/](http://jsfiddle.net/Kq6pz/)

```
(function( $ ){

  $.fn.testPlugin = function( options ) {  
        alert('hi');
  };
})( jQuery );

$.testPlugin(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T18:37:36.057

因为您将插件添加到`fn`命名空间而不是`$`命名空间。所以`$().testPlugin()`会起作用，但`$.testPlugin()`不会。

如果你想污染`$`命名空间，你可以这样做：

```
(function( $ ){

  $.testPlugin = function( options ) {  
        alert('hi');
  };
})( jQuery );

$.testPlugin(); 
```

我遵循的经验法则是：`$.`在它与 DOM 无关时使用（如 ajax），并`$.fn.`在它对使用选择器抓取的元素（如 DOM/XML 元素）进行操作时使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T18:36:49.220

你需要一个选择器：

```
$(document).testPlugin();
$(window).testPlugin(); 
```

演示：http: [//jsfiddle.net/dirtyd77/Kq6pz/1/](http://jsfiddle.net/dirtyd77/Kq6pz/1/)

# javascript - ExecuteScript 不执行 html 中描述的函数，这些函数在页面加载后运行

> ID：15393662
> 
> 赞同：1
> 
> 时间：2013-03-13T18:35:03.783
> 
> 标签：javascript, testing, selenium, webdriver

有 Silenium 服务器、NUnit、WebDriver。

我有带有以下代码的 C# dll：

```
private IWebDriver driver;

// ...

driver = new InternetExplorerDriver();

// ...

[Test]
public void test()
{
    string testURL = "file:/C:/Tests/test.html";
    driver.Navigate().GoToUrl(testURL);
    IJavaScriptExecutor js = driver as IJavaScriptExecutor;
    object resFunc = js.ExecuteScript("open_form");
    object res = js.ExecuteAsyncScript("alert('hello')");
} 
```

文件`test.html`看起来像：

```
<html>
<head>
    <title></title>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
    <script type="text/javascript" src="./test.js"></script>
</head>
<body unselectable="on">
</body>
</html> 
```

和`test.js`

```
function open_form () {
    document.body.style.backgroundColor = "green";
} 
```

我用控制台 NUnit 运行测试，当出现“hello”时，背景颜色没有改变。如何运行 html 中的函数并执行某些操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T09:24:47.843

您缺少括号。

做了：

```
 object resFunc = js.ExecuteScript("open_form()"); 
```

顺便说一句，您*实际上*不需要使用此函数的返回值。

# php - 结帐期间的 Magento 数据库复选框

> ID：15393668
> 
> 赞同：1
> 
> 时间：2013-03-13T18:35:24.170
> 
> 标签：php, html, magento

我在 Magento 网站[http://mydolcessa.com上工作](http://mydolcessa.com)

我在结帐页面添加了一个复选框，确认他们授权公司从他们的信用卡中扣款并确认退货和退款政策。（如下所示）

在您看到订单的管理区域中，我添加了一行“授权收费：”当前，如果我在已设置的列中手动将值输入到数据库中，它将正确读取并显示在那里。

我需要帮助是将复选框插入是或否到数据库的列中。

**app/design/frontend/base/default/template/payment/form/Ccsave.phtml 上的复选框代码**

```
<li>

    <div class="input-box">
        <input type="checkbox" id="<?php echo $_code ?>_cc_checkbox"" name="payment[cc_checkbox]" title="<?php echo $this->__('By checking this box, I authorize this transaction and acknowledge the refund/exchange policy discussed in the "customer care" section of the website.') ?>" class="input-text validate-cc-checkbox validate-cc-type" value="Yes" />

      <label for="<?php echo $_code ?>_cc_checkbox" class="required"><em>*</em><?php echo $this->__('By checking this box, I authorize this transaction and acknowledge the refund/exchange policy discussed in the "customer care" section of the website.') ?></label>

    </div>
</li> 
```

**app/code/core/Mage/Payment/Block/Info/Cc.php 上的复选框代码**

```
/**
 * Retrieve Checkbox Status
 *
 * @return string
 */
public function getCcCheckbox()
{
    $checkbox = Mage::getSingleton('payment/config')->getCcCheckbox();
    $ccCheckbox = $this->getInfo()->getCcCheckbox();
    if (isset($checkbox[$ccCheckbox])) {
        return $checkbox[$ccCheckbox];
    }
    return (empty($ccCheckbox)) ? Mage::helper('payment')->__('No') : $ccCheckbox;
} 
```

**app/code/core/Mage/Payment/Block/Info/Ccsave.php 上的复选框代码（显示在后端）**

```
class Mage_Payment_Block_Info_Ccsave extends Mage_Payment_Block_Info_Cc
{
/**
 * Show name on card, expiration date and full cc number 
 *
 * Expiration date and full number will show up only in secure mode (only for admin, not in emails or pdfs)
 *
 * @param Varien_Object|array $transport
 */
protected function _prepareSpecificInformation($transport = null)
{
    if (null !== $this->_paymentSpecificInformation) {
        return $this->_paymentSpecificInformation;
    }
    $info = $this->getInfo();
    $transport = new Varien_Object(array(Mage::helper('payment')->__('Name on the Card') => $info->getCcOwner(),));

    $transport = parent::_prepareSpecificInformation($transport);
    if (!$this->getIsSecureMode()) {
        $transport->addData(array(
            Mage::helper('payment')->__('Expiration Date') => $this->_formatCardDate(
                $info->getCcExpYear(), $this->getCcExpMonth()
            ),
            Mage::helper('payment')->__('Credit Card Number') => $info->getCcNumber(),
            Mage::helper('payment')->__('Authorized to Charge') => $info->getCcCheckbox(),
        ));
    }
    return $transport;
}
} 
```

我应该把这样的代码放在哪里？

```
<?php $cc_checkbox = $_GET["cc_checkbox"];

require_once 'app/Mage.php';

$resource = Mage::getSingleton('core/resource');

$readConnection = $resource->getConnection('core_read');

$writeConnection = $resource->getConnection('core_write');

    $tableName = $resource->getTableName('sales_flat_order_payment');

    if ($cc_checkbox == true) { 
        $checked="Yes";
        $query = "UPDATE INTO {$tableName} (cc_checkbox)
        VALUES ('Yes')";
    }
    else { 
        $checked="No"; 
        $query = "INSERT INTO {$tableName} (cc_checkbox)
        VALUES ('No')";
    }

    $writeConnection->query($query);

    ?> 
```

PS：我知道编辑基本文件，我这样做然后复制到我的文件夹中。

![已保存信用卡表格上的复选框](../Images/b350ed58bd562b49e9463683b8c01bac.png)

![授权在订单部分收费](../Images/5846abc330c59b33359f34f92be3b4d9.png)

# java - 为什么JDBC代码中有双问号

> ID：15393671
> 
> 赞同：7
> 
> 时间：2013-03-13T18:35:28.853
> 
> 标签：java, sql, jdbc

我正在使用 PHP 将 JDBC sql 语句转换为 ODBC/DB2。我遇到了以下让我感到困惑的条款。

```
WHERE phid = ??id 
```

我的第一个直觉是它是用于准备好的陈述，但现在我不太确定。这是 JSP/JDBC 的事情吗？谷歌/堆栈没有出现任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T14:08:00.440

哇！Mabye 它只是一个普通的绑定变量，但连续有 2 个！[java.sql.Conneciton](http://docs.oracle.com/javase/6/docs/api/java/sql/Connection.html) （快速阅读）的文档中没有任何内容说它们必须用空格分隔。请发布更多代码，以便我们查看是否有任何`setString`添加绑定变量的调用。

例如，像这样：

```
pstmt = conn.prepareStatement("select blah from blah WHERE phid = ??id and blah blah");
pstmt.setString(1, "customer_");
pstmt.setString(2, "order_"); 
```

我从来没有见过这样的事情，但也许这就是他们正在做的事情？

**编辑：**我试过了！它给了我一个错误！我想知道你是否发现了一些死代码？这是我尝试过的：

```
 sql.append("SELECT A.ID, A.GROUP_NUMBER, A.GROUP_NAME ");
    sql.append("FROM " + tab1 + " A ");
    sql.append("INNER JOIN " + tab2 + " B ");
    sql.append("ON (A.ID = B.GROUP_ID) ");
    sql.append("WHERE B.THREAD_ID = ? ");
    sql.append("AND B.THREAD_ID = ??ID ");
    sql.append("ORDER BY A.ID ");

// ...

        conn = getConn();
        pstmt = conn.prepareStatement(sql.toString());
        pstmt.setInt(1, threadId);
        pstmt.setString(2, "B.");
        pstmt.setString(3, "THREAD_"); 
```

我收到了这个错误：

`ILLEGAL SYMBOL "?". SOME SYMBOLS THAT MIGHT BE LEGAL ARE: MICROSECONDS MICROSECOND SECONDS SECOND MINUTES MINUTE HOURS. SQLCODE=-104, SQLSTATE=42601, DRIVER=3.57.82`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T13:43:07.747

正如其他人评论的那样（抱歉，还没有足够的代表发表评论），这可能是命名参数处理的某种方式。我在 JDBC 和我知道的任何 ORM 框架中都找不到对它的任何引用，因此它可能是为该特定应用程序创建的自定义 JDBC/ORM 框架。查看更多示例代码肯定会有所帮助。

# python - Python argparse：它是否必须返回一个列表？

> ID：15393672
> 
> 赞同：3
> 
> 时间：2013-03-13T18:35:38.973
> 
> 标签：python, argparse

我正在尝试从 argparse 获取一串数字。是否提供参数 -n 是可选的。

```
import argparse
parser = argparse.ArgumentParser()
parser.add_argument('-n', nargs=1) # -n is optional but must come with one and only one argument
args = parser.parse_args()
test = args.n
if test != 'None':
    print("hi " + test) 
```

当我不提供“-n 参数”时，程序会失败，但在我提供时可以正常工作。

```
Traceback (most recent call last):
  File "parse_args_test.py", line 7, in <module>
    print("hi " + test) 
TypeError: Can't convert 'NoneType' object to str implicitly 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T19:07:52.347

不要尝试连接`None`and `"hi "`：

```
print("hi", test) 
```

或者

```
print("hi " + (test or '')) 
```

或测试是否`test`明确设置为无：

```
if test is not None:
    print("hi", test) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T19:09:31.100

与无比较时使用“是”。应该是这样的：

```
if test is not None:
    print("hi %s" % test) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-15T09:35:05.853

关于标题的问题，什么时候`nargs`使用，返回值`args.n`是一个列表（即使`nargs=1`使用了）。因此，当只需要 1 个参数时，您可能决定根本不使用`nargs`以避免返回列表。

```
import argparse
parser = argparse.ArgumentParser()
parser.add_argument('-n')
args = parser.parse_args()
test = args.n
if test:
    print("hi " + test) 
```

# java - 将xml传入文件转换为文本

> ID：15393675
> 
> 赞同：0
> 
> 时间：2013-03-13T18:35:51.957
> 
> 标签：java, xml, xml-parsing, websphere, messagebroker

我通过 Websphere Message Broker 收到一个 XML 文件，但是当我使用 Java 处理它时，它在输出中给了我一个非格式化文件。

> XML 输入文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<article href="http://www.ensa-agadir.ac.ma/arti234">
    <titre>application de web sémantique</titre>
    <nombrePages>12</nombrePages>
    <auteur rond="principale">
        <nom>Hassani</nom>
        <prenom>Jamal</prenom>
        <etablissement>Ensa-Agadir</etablissement>
    </auteur>
</article> 
```

> Java 计算（用于处理消息）：

```
MbMessage outMessage = new MbMessage();
MbMessageAssembly outAssembly = new MbMessageAssembly(assembly, outMessage);
MbElement omroot = outMessage.getRootElement();
MbElement xmlnsc = omroot.createElementAsLastChild ("XMLNSC");
MbElement valueEl = xmlnsc.createElementAsFirstChild(MbElement.TYPE_VALUE, "VALUE", 
                new String ((byte[])message.getRootElement ().getFirstElementByPath("/BLOB/BLOB").getValue()));
out.propagate(outAssembly); 
```

> XML 输出文件： ![在此处输入图像描述](../Images/a16f948c6991db6006757f50388a833f.png)

就像它无法识别任何 utf-8 字符一样：**引号**或**<**和**>**等...所以我认为将传入的文件转换为文本将解决问题。但我不知道该怎么做，或者它是否是最好的解决方案。

你对此有什么想法吗？谢谢 ：）

**编辑：**消息不应该只是被转义，它应该被转换并很好地编码到输出中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T11:30:51.213

好吧，我找到了解决方案。我必须在**HTTP 输入节点**中选择**XMLNSC 解析器**，而不是默认的 BLOB 解析器，并且我必须更改我的**Java Compute**代码：

 ****```
MbMessage outMessage = new MbMessage();
MbMessageAssembly outAssembly = new MbMessageAssembly(assembly, outMessage);
MbElement omroot = outMessage.getRootElement();
MbElement xmlnsc = omroot.createElementAsLastChild ("XMLNSC");
MbElement valueEl = xmlnsc.createElementAsFirstChild(MbElement.TYPE_VALUE, "VALUE", 
            new String ((byte[])message.getRootElement ().getFirstElementByPath("XMLNSC/article/titre").getValue()));

// And use getFirstElementByPath field by field not trying to display all of it like text

out.propagate(outAssembly); 
```

谢谢你们 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T13:06:29.917

这里的问题是您正在创建单个 xml 元素，其值是将整个输入消息作为 blob。

最好的办法是修改输入节点属性以使用 xmlnsc 解析器。

或者，您需要更新您的 java 以使用 CreateElementAsLastChildFromBitstream() 解析 blob

这里有一个例子：

[http://publib.boulder.ibm.com/infocenter/wmbhelp/v8r0m0/topic/com.ibm.etools.mft.doc/ac30350_.htm](http://publib.boulder.ibm.com/infocenter/wmbhelp/v8r0m0/topic/com.ibm.etools.mft.doc/ac30350_.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T13:27:02.693

实际上，您甚至可以进一步简化它，有一个方法 Mbelement.getValueAsString() 可以节省您必须使用强制转换为字节数组和 String 构造函数。

所以例如你的

`MbElement valueEl = xmlnsc.createElementAsFirstChild(MbElement.TYPE_VALUE, "VALUE", new String( (byte[]) message.getRootElement().getFirstElementByPath("XMLNSC/article/titre").getValue()));`

变成：

`MbElement valueEl = xmlnsc.createElementAsFirstChild(MbElement.TYPE_VALUE, "VALUE", message.getRootElement().getFirstElementByPath("XMLNSC/article/titre").getValueAsString());`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-13T18:45:13.363

我在 java 中不太好，但我观察到该符号是用 html 实体值转换的，请参阅此链接[http://www.w3schools.com/tags/ref_entities.asp](http://www.w3schools.com/tags/ref_entities.asp)您可以获得所有实体。

不要投反对票，我只是根据我的知识帮助他我观察到的东西。****

# azure - AzureWebsites 上的 SignalR CryptographicException

> ID：15393684
> 
> 赞同：3
> 
> 时间：2013-03-13T18:36:29.430
> 
> 标签：azure, asp.net-web-api, signalr, azure-web-app-service, signalr-hub

我在 Azure 网站中部署 SignalR 时遇到了这个异常。它在调试环境中运行良好。这是 SignalR 1.0.1，我使用 .NET MVC 和 WebApi

```
The data protection operation was unsuccessful. This may have been caused by not having the user profile loaded for the current thread's user context, which may be the case when the thread is impersonating.

Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.Security.Cryptography.CryptographicException: The data protection operation was unsuccessful. This may have been caused by not having the user profile loaded for the current thread's user context, which may be the case when the thread is impersonating.

Source Error: 

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.

Stack Trace: 
[CryptographicException: The data protection operation was unsuccessful. This may have     been caused by not having the user profile loaded for the current thread's user context, which may be the case when the thread is impersonating.]
Microsoft.Owin.Host.SystemWeb.<>c__DisplayClass1.<GetRethrowWithNoStackLossDelegate>b__0(Exception ex) +27
Microsoft.Owin.Host.SystemWeb.Utils.RethrowWithOriginalStack(Exception ex) +15
Microsoft.Owin.Host.SystemWeb.CallContextAsyncResult.End(IAsyncResult result) +47
Microsoft.Owin.Host.SystemWeb.OwinHttpHandler.EndProcessRequest(IAsyncResult result) +7
System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +9629708
System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +155 
```

你有什么主意吗 ？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-13T00:23:53.380

对于访问此页面的其他人，我遇到了同样的问题，但解决方案要简单得多。正如上面评论中提到的，接受的答案很糟糕。还提到的是 SignalR 默认使用`MachineKeyDataProtector`for `IProtectedData`。`MapHubs`并且`MapConnection`都调用一个向依赖解析器`InitializeProtectedData`注册的函数。`MachineKeyDataProtector`

我的问题是我正在映射我的 SignalR 路由，然后配置依赖解析器

```
RouteTable.Routes.MapConnection<SomeEndpoint>("SomeEndpoint", "SomeEndpointUrl");
GlobalHost.DependencyResolver = 
                     new StructureMapDependencyResolver(ObjectFactory.Container); 
```

所以基本上，当我注册我的自定义解析器时，由 MapConnection -> InitializeProtectedData 完成的 IProtectedData 解析器注册被吹走了。简单的修复，在映射连接之前设置解析器。

```
GlobalHost.DependencyResolver = 
                     new StructureMapDependencyResolver(ObjectFactory.Container);
RouteTable.Routes.MapConnection<SomeEndpoint>("SomeEndpoint", "SomeEndpointUrl"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T13:44:26.243

这是允许我使用以下代码解决相同问题的单个帖子。dfowlers 提到注册 IProtectedData 的实例导致我在[此处](https://github.com/SignalR/SignalR/blob/master/src/Microsoft.AspNet.SignalR.Core/Infrastructure/IProtectedData.cs)搜索并找到定义。

请注意，使用 Visual Studio 开发服务器时未遇到此问题，但在上线时未遇到此问题。我很高兴我找到了这篇文章，因为我不知道我应该如何知道要实现 IProtectedData。也许文档中有更深层次的东西。

我不确定这是否是 100% 正确的解决方案，但这对我有用。我创建了一个实现 IProtectedData 的类，然后用 Ninject 注册了它。

班级：

```
using Microsoft.AspNet.SignalR.Infrastructure;

namespace Fwr.DataTeamUploader.Logic
{
    public class ProtectedData : IProtectedData
    {

        // Obviously this isn't doing much to protect the data,
        // assume custom encryption required here

        // To reiterate, no encryption is VERY^4 BAD, see comments.

        public string Protect(string data, string purpose)
        {
            return data;
        }

        public string Unprotect(string protectedValue, string purpose)
        {
            return protectedValue;
        }
    }
} 
```

Ninject注册：

```
/// <summary>
/// Load your modules or register your services here
/// </summary>
/// <param name="kernel">The kernel.</param>
private static void RegisterServices(IKernel kernel)
{
    ...

    kernel.Bind<IProtectedData>().To<ProtectedData>();

    ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-03T19:08:48.127

现在在这种情况下，您现在可以使用 package.json 中的扩展`MapsHubs()`方法`Microsoft.AspNet.SignalR.SystemWeb`。

`MachineKeyProtectedData`将使用而不是默认实现。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-13T19:06:55.653

我不相信 Azure 网站能够与证书/加密 API 进行通信。尝试调用 Azure 管理 API 时会出现类似问题。运行站点的用户上下文似乎没有足够的权限来执行此操作。

# php - (PHP) 通过一个函数运行的预定义字符串

> ID：15393687
> 
> 赞同：-1
> 
> 时间：2013-03-13T18:36:38.697
> 
> 标签：php, rss, simplepie

我目前正在设计一个包含 20 个框的页面，其中每个框代表一个 RSS 提要，使用 simplepie 作为我的解析器。

目前，脚本从每个提要中调用第一张图像，丢弃其余图像并将该图像设置为框的背景图像。

有了 20 个提要，我想尽可能保持代码小而高效。虽然我了解 $feed01 的单独设置，但 $feed02 是一个必要的混乱邪恶，这是 simplepie 工作所必需的。

我无法理解的是为什么 imageurl() 返回一个空值。

谁能教育我为什么会这样？

非常感谢

```
<?php
require_once('isnotabear/php/autoloader.php');

$feed01 = new SimplePie();
$feed01 -> set_feed_url ('http://link/to/rss01');
$success = $feed01 -> init();
$feed01 -> handle_content_type();
$max = $feed01 -> get_item_quantity(); // Where do we end?

$feed02 = new SimplePie();
$feed02 -> set_feed_url ('http://link/to/rss02');
$success = $feed02 -> init();
$feed02 -> handle_content_type();
$max = $feed02 -> get_item_quantity(); // Where do we end?

$start = (isset($_GET['start']) && !empty($_GET['start'])) ? $_GET['start'] : 0; // Where do we start?
$length = (isset($_GET['length']) && !empty($_GET['length'])) ? $_GET['length'] : 1; // How many per page?

function imageurl()
{
    if ($success): foreach($feedin->get_items($start, $length) as $item): $feedin =     $item-> get_feed();
    {
        $replace = preg_match( '@src="([^"]+)"@' , $item->get_content(), $match );
        $match = preg_replace ('"src="', '', $match);
        $match = str_replace('"', "'", $match);
        echo $match[0];
    }
    endforeach;
    endif;
};

?>
<!DOCTYPE HTML>
... YADA YADA YADA ...

<a href="#" style="background-image:url(<?php $feedin = $feed01; imageurl(); ?>)"><div> <span>FEED NAME</span></div></a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T18:38:45.333

`$success`内部没有定义`imageurl()`，所以它总是 null/false

你可能想要：

```
function imageurl() {
   global $success;
   if ($success) { .... }
} 
```

但是不要像那样使用全局变量。将 $success 作为参数传入。会干净很多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T19:15:03.577

This is part-way between a comment and an answer, but I wanted the space to show the code. Your function uses a really awkward mix of PHP syntax and some entirely misleading punctuation:

*   the `if(): ... endif;` and `foreach(): ... endforeach;` syntax is extremely old-fashioned, and generally used only when using PHP as a template language (i.e. in the middle of HTML) rather than in a standalone function like this
*   the `{`, `}`, and indenting relate to neither the `if` nor the `foreach`; PHP will ignore them, but they'll confuse anyone reading your code
*   the `;` at the end is also ignored - a function ends at its `}`

So your code should actually look like this (note I've also added `$success` and `$feedin` as parameters which you should pass in to the function):

```
function imageurl($success, $feedin)
{
    if ($success)
    {
        foreach($feedin->get_items($start, $length) as $item)
        {
            $feedin = $item->get_feed();
            $replace = preg_match( '@src="([^"]+)"@' , $item->get_content(), $match );
            $match = preg_replace ('"src="', '', $match);
            $match = str_replace('"', "'", $match);
            echo $match[0];
        }
    }
} 
```

Oh, and you probably want to `return $match[0]` rather than `echo` it. Otherwise, it's still going to return `null` whatever you pass in.

# java - 以编程方式解锁屏幕并显示活动

> ID：15393689
> 
> 赞同：2
> 
> 时间：2013-03-13T18:36:43.447
> 
> 标签：java, android

我有一项活动，它在屏幕锁定时处于前台。这个活动有一个按钮，当它被按下时，它应该把 CALL LOG 活动带到前台，但是我只有解锁屏幕活动（见下图）。但是，如果我解锁该屏幕，我的第一个活动显示是 CALL LOG，但它应该在没有第一个解锁屏幕的情况下可见。（见下图）

我检查[了屏幕锁定时如何显示活动？](https://stackoverflow.com/questions/3793221/how-my-app-can-unlock-screen-programatically?lq=1)，但它不能正常工作！

基本上这是我的代码：

```
@Override
public void onClick(View v) {

    switch(v.getId()) {

    case R.id.missed_call_IV:
        //finish();
        Intent showContacts = new Intent(Intent.ACTION_VIEW, Calls.CONTENT_URI);
        startActivity(showContacts);
        Window w;
        w = getWindow();
        w.addFlags(WindowManager.LayoutParams.FLAG_SHOW_WHEN_LOCKED);
        w.addFlags(WindowManager.LayoutParams.FLAG_DISMISS_KEYGUARD);
        w.addFlags(WindowManager.LayoutParams.FLAG_TURN_SCREEN_ON);
        break;
    }
} 
```

![图像1](../Images/79e2ec9c6293529f58eaedc204a60e8c.png) ![图2](../Images/e4d97e55781aa1cc04a8a995f459d46c.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T01:20:09.333

使用程序中的 KeyGuardLock

```
KeyguardManager km = (KeyguardManager) getSystemService(Context.KEYGUARD_SERVICE);
KeyguardLock keyguard = km.newKeyguardLock("MyApp"); 
```

解锁屏幕

```
keyguard.disableKeyguard(); 
```

完成任务后不要忘记再次锁定

```
keyguard.reenableKeyguard(); 
```

在清单中使用以下权限

```
<uses-permission android:name="android.permission.DISABLE_KEYGUARD" >
</uses-permission> 
```

# json - Google Places API 缺少 ID 和参考作为响应

> ID：15393691
> 
> 赞同：1
> 
> 时间：2013-03-13T18:37:01.457
> 
> 标签：json, geolocation, google-places-api

我正在使用带有以下搜索字符串的 Google Places API

```
https://maps.googleapis.com/maps/api/place/queryautocomplete/json?key=AIzaSyDryrzCJoKA-XeN-f3Q2KDPdJHd27Nl7CoM&sensor=true&input=bri 
```

返回的结果如下所示：

```
{
   "predictions" : [
      {
         "description" : "Bristol, United Kingdom",
         "matched_substrings" : [
            {
               "length" : 3,
               "offset" : 0
            }
         ],
         "terms" : [
            {
               "offset" : 0,
               "value" : "Bristol"
            },
            {
               "offset" : 9,
               "value" : "United Kingdom"
            }
         ]
      }
   ... etc etc
   ],
   "status" : "OK"
} 
```

我在任何返回的预测结果中都看不到**“id”或“reference”**属性，这是从 Google Places Details API 请求完整详细信息所需的。

他们的文件说我应该看到这两个项目。 [https://developers.google.com/places/documentation/autocomplete](https://developers.google.com/places/documentation/autocomplete)

有人知道我在做什么错吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T21:34:53.377

你使用了错误的方法。您必须使用自动完成： [https ://developers.google.com/places/documentation/autocomplete](https://developers.google.com/places/documentation/autocomplete)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T19:05:18.070

您正在使用“queryautocomplete”服务。查询自动完成不返回地点 ID 字段。尝试使用此网址的自动完成服务：

> [https://maps.googleapis.com/maps/api/place/autocomplete/json?key=AIzaSyDryrzCJoKA-XeN-f3Q2KDPdJHd27Nl7CoM&sensor=true&input=bri](https://maps.googleapis.com/maps/api/place/autocomplete/json?key=AIzaSyDryrzCJoKA-XeN-f3Q2KDPdJHd27Nl7CoM&sensor=true&input=bri)

# sql - ssis 脚本任务中的引用类库

> ID：15393692
> 
> 赞同：0
> 
> 时间：2013-03-13T18:37:05.247
> 
> 标签：sql, sql-server, linq, linq-to-sql, ssis

我有一个包含类库项目和 sql server 集成服务项目的解决方案......现在我想从 ssis 包中的脚本任务调用类库的代码......

事实上，我需要将 linq to sql 类添加到 ssis 包中的脚本任务中，这似乎不可用......相反，我想将 linq to sql 类添加到我的类库中，并从脚本任务中调用它的函数......

类库函数：

```
public static void dosomelinqstuff(){
    // using linq to sql
} 
```

在脚本任务中我希望能够调用：

```
someclass.dosomelinqstuff(); 
```

有什么建议可以解决我的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T02:29:37.207

是否可以使用“Web Service Task”？如果您可以为您的方法提供 Web 服务接口，则可以通过提供的 WebService 任务调用它。

# html - Div 扩展一次到达所有边缘

> ID：15393696
> 
> 赞同：1
> 
> 时间：2013-03-13T18:37:14.410
> 
> 标签：html, css

我试图以某种方式（使用 CSS 或 JS）将非居中元素扩展到整个页面，同时到达所有边缘。

div 将是空的（只是带有背景或类似的东西，实际上不是必须是 div，可以是任何其他看起来像框的元素）并且可以使用 CSS3 或 HTML5。我没有使用 jQuery，但如果有人找到使用它来解决这个问题的方法，没问题。

目前我最好的尝试是这个：http: [//jsfiddle.net/ApKEu/](http://jsfiddle.net/ApKEu/)

CSS：

```
.box {
    width: 200px;
    height: 200px;
    margin: 5px;
    background-color: #ccc;
    position: absolute;
    top: 100px;
    left: 20px;
}

.box:hover {
    -webkit-transition: all 3000ms;
    -webkit-transform: scale(2);
    height: 90%;
    width: 90%;
} 
```

然后只需在 HTML 中创建 div：

```
<div class="box"></div> 
```

但是盒子不会同时到达所有边缘:(

对不起我的英语，谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T18:49:17.590

使用 jQuery：http: [//jsfiddle.net/jTFwB/](http://jsfiddle.net/jTFwB/)

```
$(".box").bind("mouseover", function() {
    var n = $(this).clone();
    var of = $(this).position();
    n.css({
        position:'absolute', 
        top: of.top, 
        left: of.left, 
        margin: 0
    }).appendTo("body")
    .animate({
        top: 0,
        left: 0,
        width: '100%',
        height: '100%',
        position: 'relative'
    });

    n.bind("mouseout", function() {
        $(this).stop(true).remove();
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T18:56:28.167

我不清楚您想要什么，但是我可以提出几点建议。

1.  您需要指定 , 的宽度和高度`<html>`，`<body>`以将框扩展到屏幕边缘。

    正文, html { 宽度:100%; 高度：100%；}

2.  要扩展到屏幕边缘，您不能缩放两倍。它会比屏幕边缘大。

    .box:hover { -webkit-transition: 全部 3000ms; 左：10%；前10名％; 高度：80%；宽度：80%；}

看看我在你的例子中欺骗了[什么](http://jsfiddle.net/Uhj5x/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T18:58:34.143

如果尝试这个悬停框怎么办：

```
.box:hover {
    height: 100%;
    width: 100%;
    position:fixed;
    top:0;
    left:0
} 
```

# python - 实例方法中的python静态变量

> ID：15393697
> 
> 赞同：0
> 
> 时间：2013-03-13T18:37:16.760
> 
> 标签：python, class, variables, static

这是我的代码不起作用

```
class MyClass:
    special_items = {}
    def preload_items(self):
        special_items['id'] = "properties" 
```

NameError：未定义全局名称“special_items”

作品

```
class MyClass:
    special_items = {}
    def preload_items(self):
        MyClass.special_items['id'] = "properties" 
```

它不是`special_items` 我可以在这个类的任何地方访问的静态成员吗​​？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T18:38:47.463

python中没有静态成员之类的东西。你定义的是一个类成员。该成员存储在类对象上，正如您已经展示的那样，它以`MyClass.special_items`.

看来您要做的是初始化`special_items.` 为此，`classmethod`更合适（没有用 for `self`）：

```
@classmethod
def preload_items(cls):
        cls.special_items['id'] = "properties" 
```

请注意，您也可以将其访问为`self.special_items`，但它仍存储在类对象中，即类的所有对象都访问相同的值。

# java - PrintWriter 在下一行打印

> ID：15393699
> 
> 赞同：5
> 
> 时间：2013-03-13T18:37:27.397
> 
> 标签：java, sql, io, printwriter

我有以下代码将字符串（来自 ResultSet）打印到文本文件：

```
PrintWriter writer = new PrintWriter(new FileOutputStream(file, false));
while(RS.next()) {
    writer.write(RS.getString(1)+"\n");
} 
```

我在 write 语句中放了一个“\n”，希望它将每一行打印在不同的行上，但它失败了。txt 文件当前打印如下，其中 row# 是 ResultSet 中的不同行：

行1行2行3行4行5

我希望它像这样打印出来：

第 1 行

第 2 行

第 3 行

第 4 行

第 5 行

...

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-13T18:39:00.230

您应该使用[`println`](http://docs.oracle.com/javase/7/docs/api/java/io/PrintWriter.html#println%28java.lang.String%29)在每行之后打印一个换行符：

```
writer.println(RS.getString(1)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T18:39:22.373

您可以改用[**PrintWriter#println()**](http://docs.oracle.com/javase/7/docs/api/java/io/PrintWriter.html#println%28java.lang.Object%29)方法。

来自 API：

> 通过写入行分隔符字符串来终止当前行。行分隔符字符串由系统属性 line.separator 定义，不一定是单个换行符 ('\n')。

这也应该有效。

```
writer.write(RS.getString(1)+ System.getProperty("line.separator")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-16T06:04:29.240

在声明中使用。例如：

```
writer.print("1"+"<br/>");
writer.print("2"+"<br/>"); 
```

# css - CSS3 倾斜的 div 与背景图像，整个事物背后的图像

> ID：15393700
> 
> 赞同：2
> 
> 时间：2013-03-13T18:37:29.537
> 
> 标签：css

很难用语言表达我想要完成的事情，因此请查看这张图片以获取示例：

[![示例背景图像](../Images/86619202b7bf2fada0314cbc397e275b.png)](https://i.stack.imgur.com/WsCB6.png)

如您所见，我希望创建一个带有图案背景的倾斜 div（简单），但另一部分，即倾斜半覆盖的部分，也必须有背景图像。我想了很多不同的想法，并尝试使用 background-clip、background-origin、div 和 CSS 三角形之前和之后的作品。有没有办法在纯 CSS 中做到这一点？我喜欢不必将图像组合成一个或在这里做任何照片购物。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T20:20:42.330

您需要使用倾斜变换。一个 div 用于顶部，另一个 div 用于底部，将它们倾斜，然后`:before`为您实际应用背景的每个 div 取消倾斜。

# [*演示*](http://codepen.io/thebabydino/pen/lAedC)

**HTML**：

```
<div class='wrap'>
  <div class='s'></div>
  <div class='s'></div>
</div> 
```

相关**CSS**：

```
.wrap { width: 4em; height: 28em; }
.s {
  overflow: hidden;
  height: 50%;
  transform: skewY(-30deg);
}
.s:before {
  display: block;
  height: 100%;
  transform: skewY(30deg);
  content: '';
}
.s:first-child:before {
  margin: 2em /* width*sin(abs(skew_angle)) = 4em*sin(30deg) */ 0 0;
  background: url(image.jpg) 50% 50%;
}
.s:last-child:before {
  margin: -2em /* -width*sin(abs(skew_angle)) */ 0 0;
  /* pattern background */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T18:47:02.533

为您的图层设置 z-index 属性并将它们放置在您需要的任何位置。请务必使用 z-index 属性设置 div 上的位置，否则您可能会遇到错误

# php - PHP：在非对象上调用成员函数 GetUserCollection()

> ID：15393706
> 
> 赞同：-3
> 
> 时间：2013-03-13T18:37:40.753
> 
> 标签：php

很抱歉发布这个问题 - 我知道他们已经被问过并回答了好几次（即[https://stackoverflow.com/questions/1787561/call-to-a-member-function-on-a-non-object](https://stackoverflow.com/questions/1787561/call-to-a-member-function-on-a-non-object)等） ，但建议的解决方案似乎都不适合我。这就是我所拥有的：

```
class Common {

    private $model;

    public function _construct() {
        $this->model = Model::GetInstance();
        //$this->model->GetUserCollection();
    }

    public function validateusername($username) {
        $userlist = $this->model->GetUserCollection();
        $result = true;

        if ($username == false) {
            $this->error = "Please enter username.";
            $result = false;
        }
    }

}

// This is my DB model

class Model {

    private static $instance = null;
    private $conn = false;

    private function __construct() {
        if (!$this->connect()) {
            print "Unable to connect to database!";
            exit;
        }
    }

    public function connect() {
        if ($this->conn == false) {
            $this->conn = mysql_connect(DBHOST, DBUSER, DBPASS);

            if ($this->conn) {
                if (!mysql_select_db(DBNAME, $this->conn)) {
                    print "DB Connection Error!";
                    exit;
                }
            }
        }
        return $this->conn;
    }

    public function GetUserCollection() {
        return UserCollection::GetInstance();
        // return new UserCollection();
    }

    public static function GetInstance() {
        if (!self::$instance) {
            self::$instance = new Model();
        }
        return self::$instance;
    }
} 
```

为什么正是这一行：**$userlist = $this->model->GetUserCollection();** 即使我在模型中返回它的新实例，这也会给我一个错误提前谢谢，JJ。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T18:44:06.190

在构造函数名称中使用两个下划线：__construct。

# c# - 在 WinForm 项目选项卡中运行 exe

> ID：15393707
> 
> 赞同：3
> 
> 时间：2013-03-13T18:37:41.080
> 
> 标签：c#, winforms, process, tabs, exe

我有兴趣使用我正在编写的 winform 应用程序帮助执行以下操作，以便在 Visual Studios 2010 IDE 中的 c# 中的选项卡中打开 .exe。

我目前可以使用以下代码通过在所需选项卡中单击按钮来打开程序：

```
 string str = @"-INSERT FILEPATH HERE-";//took file path out as i have a few exes i'm wanting to add. 
        Process process = new Process();
        process.StartInfo.FileName = str;
        process.Start(); 
```

现在我怎样才能让它在我的winform中以选项卡或选项卡的形式打开？我愿意接受任何一种情况的建议。

解决了：

```
using System.Runtime.InteropServices;
    using System.Threading;
    [DllImport("user32.dll", SetLastError = true)]
    private static extern bool MoveWindow(IntPtr hwnd, int x, int y, int cx, int cy, bool repaint);
    [DllImport("user32.dll", SetLastError = true)]
    static extern IntPtr SetParent(IntPtr hWndChild, IntPtr hWndNewParent);

   public GUI()
    {
        // Initialize form fieds
        InitializeComponent();
        openProgram()
    }
    private void openProgram()
    {

        process.StartInfo.FileName = "-filepathhere-";

        process.Start();

        IntPtr ptr = IntPtr.Zero;
        while ((ptr = process.MainWindowHandle) == IntPtr.Zero) ;
        SetParent(process.MainWindowHandle, trackerPanel.Handle);
        MoveWindow(process.MainWindowHandle, 0, 0, this.Width - 90, this.Height, true);

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T21:19:03.737

您可以使用 SetParent api 设置可执行文件窗口的父级。将面板添加到您的 TabControl 并使用下面的代码将可执行窗口的父级分配给面板的父级。

```
[DllImport("user32.dll", SetLastError = true)]
static extern IntPtr SetParent(IntPtr hWndChild, IntPtr hWndNewParent);

private void button2_Click(object sender, EventArgs e)
{
    var process = new Process();
    process.StartInfo.FileName = "notepad.exe";
    process.Start();
    SetParent(process.MainWindowHandle, panel1.Handle);
} 
```

要从面板中删除窗口，请使用相同的代码，但将父句柄设置为 IntPtr.Zero

```
SetParent(process.MainWindowHandle, IntPtr.Zero); 
```

# api - 如何知道桌面客户端上是否有激活的 Skype 通话

> ID：15393708
> 
> 赞同：5
> 
> 时间：2013-03-13T18:37:43.913
> 
> 标签：api, skype

我一直在浏览 Skype 开发 API，并想知道是否有一种方法可以让我知道 Skype 是否正在通过某些 API 运行活动呼叫。

Skype.Client.IsRunning 告诉 Skype 应用程序本身是否正在运行，还有其他几个 API 可以了解不同的事情，例如通话历史记录等，但我找不到知道当前是否有 Skype 通话活动的方法。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T20:14:54.797

因为您没有指定您尝试使用哪种语言来完成，所以我在 C# 中发布了一个示例：

```
using System;
using System.Windows.Forms;
using SKYPE4COMLib;

namespace SkypeTest
{
    public partial class Form1 : Form
    {
        private ISkype _skype;

        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            _skype = new SkypeClass();

            var events = (_ISkypeEvents_Event) _skype;
            events.CallStatus += (call, status) =>
            {
                System.Diagnostics.Debug.WriteLine(call.PartnerHandle);

                Action<object, object> a = (partner, sta) =>
                {
                    textBox1.Text = partner.ToString() + " " + sta.ToString();
                };
                textBox1.Invoke(a, call.PartnerDisplayName, status.ToString());
            };
            _skype.Attach();
        }
    }
} 
```

请注意，此代码不包括任何清理/错误处理。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T16:58:58.250

另一种选择是使用Skype命令：[http ://dev.skype.com/desktop-api-reference#OBJECT_CALL](http://dev.skype.com/desktop-api-reference#OBJECT_CALL)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T19:58:51.107

这是一个如何检查使用[Skype4Py的](https://github.com/awahlig/skype4py)[Sevabot中的活动呼叫的示例](https://github.com/opensourcehacker/sevabot)

*   [https://github.com/opensourcehacker/sevabot/blob/master/modules/call.py#L111](https://github.com/opensourcehacker/sevabot/blob/master/modules/call.py#L111)

基本上，您侦听呼叫事件并捕获开始和结束呼叫事件，并在呼叫处于活动状态时进行自己的簿记。

# c# - 如何解压 Color.PackedValue

> ID：15393709
> 
> 赞同：5
> 
> 时间：2013-03-13T18:37:50.237
> 
> 标签：c#, xna

我正在尝试将颜色保存到数据库。我知道我可以将颜色分成 4 部分 RGBA，但使用 3 列保存颜色似乎很愚蠢。所以我想简单地使用限制器将它保存到一个字符串中，或​​者甚至只使用每种颜色的 3 个字符。但这又似乎很愚蠢。Color 结构有一个 packedValue 属性，它似乎对值做一些事情来创建一个 uint。但我不知道如何打开它。有人有想法么

```
Color c = new Color.Black;
uint i = c.PackedValue;
Color newColor=Color.FromUINT(i); // This doesn't work of course 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T20:37:25.687

`PackedValue`是一个读/写属性。您无需进行任何位移即可使用它。

```
var c = new Color() { PackedValue = packedColor };
Console.WriteLine(c.A);
Console.WriteLine(c.R);
Console.WriteLine(c.G);
Console.WriteLine(c.B); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T18:42:21.013

从[第一个谷歌结果](http://webcache.googleusercontent.com/search?q=cache:3i7u-EljaYsJ%3adream-forever.net/Blog/2009/08/26/unpacking-a-color-from-the-color-packed-property/+&cd=1&hl=en&ct=clnk&gl=us)：

```
//First lets pack the color
Color color = new Color(155, 72, 98, 255);
uint packedColor = color.PackedValue;
//Now unpack it to get the original value.
Color unpackedColor = new Color();
unpackedColor.B = (byte)(packedColor);
unpackedColor.G = (byte)(packedColor >> 8);
unpackedColor.R = (byte)(packedColor >> 16);
unpackedColor.A = (byte)(packedColor >> 24); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-07T07:22:12.797

进行位移时需要交换 B 和 R 通道。IIRC DirectX 使用 BGRA 颜色，而 XNA 使用 RGBA。所以如果我们修改上面的示例代码来阅读

```
//First lets pack the color
Color color = new Color(155, 72, 98, 255);
uint packedColor = color.PackedValue;
//Now unpack it to get the original value.
Color unpackedColor = new Color();
unpackedColor.R = (byte)(packedColor);
unpackedColor.G = (byte)(packedColor >> 8);
unpackedColor.B = (byte)(packedColor >> 16);
unpackedColor.A = (byte)(packedColor >> 24); 
```

你会从中得到正确的颜色值

# sql - 检查 SQL 语句的格式是否正确

> ID：15393722
> 
> 赞同：0
> 
> 时间：2013-03-13T18:38:40.537
> 
> 标签：sql, oracle, plsql

**问题：**我在一个 .SQL 文件中有几百个 sql 插入语句，这些语句将针对 oracle DB 运行。我想检查插入语句的格式是否正确，就像我想检测我是否错过了任何逗号等。只是我想确保该语句将运行而没有任何错误。所以我正在考虑编写一个小型Java应用程序来在运行之前检查脚本是否可能？

**示例查询：**

```
INSERT INTO suppliers
(supplier_id, supplier_name)
VALUES
(24553, 'IBM'); 
```

**我什至想在数据库中运行之前检查一下。让我们假设我无权访问任何数据库。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T18:42:41.300

您可以尝试在每个 SQL 语句前加上“explain plan for”。如果 SQL 无效，则说明将失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T18:45:28.580

对的，这是可能的。

伪代码可以是

```
loop through lines
{
 Take the string between first '(' and ')' position;
 split the string into first array with separator ',' using split function.

 Take the string between second '(' and ')' position;
 split the string into  second array with separator ',' using split function.

 compare the no of size for first and second array.
 if they are not equal 
 print the statement for correction;
} 
```

希望这对你有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T18:48:28.723

我以前从未在 Oracle 上工作过，所以我不确定是否可以启用某种 DUMMY/Test 模式。

如果您只想检查诸如拼写错误之类的事情，那么我会将所有表名替换为对偶并运行插入。这不会通过...验证数据类型的列计数

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T19:30:39.237

如果您了解 Java，则可以使用此正则表达式模式，但是它不会选择 ( 或 )，我一生都无法弄清楚如何匹配括号。这仅适用于您的示例，并且您的整个插入需要在同一行中，每行只有一个插入。

`Pattern.compile("^\\s*INSERT\\s+INTO\\s+[a-zA-Z]\\w*\\s*.\\s*[a-zA-Z]\\w*\\s*,\\s*[a-zA-Z]\\w*\\s*.\\s*VALUES\\s*.\\s*\\d+\\s*,\\s*'\\w*\\'\\s*.\\s*;\\s*$");`

# python - Python dict 作为本地，而不是参考

> ID：15393730
> 
> 赞同：3
> 
> 时间：2013-03-13T18:39:12.660
> 
> 标签：python, class, dictionary

我正在尝试让我的小脚本正常工作，但我不知道问题出在哪里。

`dict` `var`即使我不返回它，其中一种方法也会修改我的测试。我的意思是，我想在本地使用它而不是返回值。这不是我的实际代码，但您可以确定它具有代表性。

```
>>> class check:
...   def pathgen(self,test):
...     test['a']=0
...     print test
...   def assign(self):
...     test={'a':1}
...     self.pathgen(test)
...     print test #WILL PRINT 0
... 
>>> a=check()
>>> a.assign()
{'a': 0}
{'a': 0} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T18:46:17.697

如果您希望对对象的更改对于更改它的函数是本地的，则需要复制该对象。您可以在调用时复制字典：

```
self.pathgen(dict(test)) 
```

或在被调用者内复制。

```
def pathgen(self, test):
    test = dict(test)
    ... 
```

# jsf-2 - @ConversationScoped 需要@LocalBean 吗？

> ID：15393740
> 
> 赞同：0
> 
> 时间：2013-03-13T18:39:59.033
> 
> 标签：jsf-2, websphere, cdi

我的项目正在使用 JSF2.0 和 WAS8.0。我使用@ConversationScoped CDI bean 作为我页面的支持 bean。我对这个 bean 的原始注释是：

```
 @Named("myBean")
    @ConversationScoped
    @Stateful 
```

然后在加载页面时，出现 Property not found 错误。似乎 EL 完全不起作用。然后我添加了@LocalBean（我的backing bean MyBean确实实现了接口，但是接口上没有@Local注解）：

```
 @Named("myBean")
    @LocalBean
    @ConversationScoped
    @Stateful 
```

然后一切正常。它是 WebSphere 中特定的东西吗？或者 CDI 的一个常见要求（我想我已经看到了一些既没有 @LocalBean 也没有实现 @Local 注释接口的示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T13:37:22.670

对我来说似乎有必要，也许您看到的其他 bean 不是 EJB bean：

> 会话 bean 的不受限制的 bean 类型集包含 bean 的所有本地接口及其超接口。如果会话 bean 具有 bean 类本地视图，则不受限制的 bean 类型集包含 bean 类和所有超类。此外，java.lang.Object 是每个会话 bean 的 bean 类型。
> 
> 远程接口不包括在 bean 类型集中。

# c# - 使用 XML 序列化和 BindingList 的数据绑定问题

> ID：15393741
> 
> 赞同：0
> 
> 时间：2013-03-13T18:40:04.110
> 
> 标签：c#, wpf, xml-serialization

嗨，我是 WPF C# 的新手，我正在将 winform 应用程序转换为 WPF，我在数据绑定方面遇到了困难（我对绑定没有好主意）。我收到错误消息：

> 绑定表达式路径错误：在 'object' ' ' String' 上找不到 Classes 属性 HashCode = "" 目标元素是 'TextBlock'(Name =' '); 目标属性是文本（类型“字符串”）

请帮忙。谢谢

我正在使用 XML 文件并存储一个包含类（字符串值列表，如旋转、拖动）、坐标点列表和输出值的序列。这是我的数据库类。

```
public class Database
    {
     public BindingList<string> Classes { get;  set; }
        public BindingList<Sequence> Samples { get;  set; }

        public Database()
        {
            Classes = new BindingList<string>();
            Samples = new BindingList<Sequence>();
        }

        public void Save(Stream stream)
        {
            var serializer = new XmlSerializer(typeof(BindingList<Sequence>));
            serializer.Serialize(stream, Samples);
        }

        public void Load(Stream stream)
        {
            var serializer = new XmlSerializer(typeof(BindingList<Sequence>));
            var samples = (BindingList<Sequence>)serializer.Deserialize(stream);

            Classes.Clear();
            foreach (string label in samples.First().Classes)
            {
                Classes.Add(label);
                Console.WriteLine(" lets check out the classes ....." + label);
            }

            Samples.Clear();
            foreach (Sequence sample in samples)
            {
                sample.Classes = Classes;
                Samples.Add(sample);
                Console.WriteLine(" lets check out the samples ....." + sample);
            }
        }
}
} 
```

序列是这样的----------------

```
Sequence sample = new Sequence()
            {
                Classes = Classes,
                SourcePath = sequence,
                Output = classIndex
            }; 
```

现在我有一个组合框，它从 BindingList 类和数据网格中获取值，从序列中获取值。XML 文件是

```
<Window x:Class="WpfLearnGUI.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="417" Width="608">

    <DockPanel Width="Auto" Height="Auto" LastChildFill="True">

        <DataGrid 
            DataContext="{Binding}" ItemsSource="{Binding }"
            AutoGenerateColumns="false" Height="73" 
            Name="gridSamples"  Width="Auto"  HorizontalAlignment="Right"  DockPanel.Dock="Right"  VerticalAlignment="Top" IsEnabled="True">

        <DataGrid.Columns>
            <DataGridTextColumn 
                  Header="Gesture" />
            <DataGridTextColumn 
                    Header="Class" 
                   />
        </DataGrid.Columns>
      </DataGrid>

        <Grid Height="Auto" Name="grid1" Background="Coral" DockPanel.Dock="Bottom" Width="Auto" >
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="240*"/>
                <ColumnDefinition Width="264*" />

            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="*" />
                <RowDefinition Height="*"/>
                 <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <ComboBox Grid.Row="1" Height="23" HorizontalAlignment="Left" Margin="105,0,0,0" Name="cbClasses" VerticalAlignment="Top" Width="120"  DisplayMemberPath="Classes" SelectedValuePath="Classes" IsEditable="True" DataContext="{Binding}" ItemsSource="{Binding}" />

            <Button Content="DataBase" Grid.Column="2" Grid.Row="2" Height="23" HorizontalAlignment="Left" Margin="53,1,0,0" 
                    Name="button5" VerticalAlignment="Top" Width="75" >
                <Button.ContextMenu>
                    <ContextMenu>
                        <Menu>
                            <MenuItem Header="_Open" IsCheckable="True" Click="Open_click"></MenuItem>
                        </Menu>
                    </ContextMenu>  
                </Button.ContextMenu>
                </Button>
        </Grid> 
    </DockPanel>
</Window> 
```

我像这样在 mainWindow 中绑定这两个值。

```
database = new Database();
cbClasses.ItemsSource = database.Classes;
gridSamples.DataContext = database.Samples; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T10:49:10.407

我认为您可能需要退后一步，阅读一些关于 WPF 绑定的教程，特别是以下概念： * 实现 INotifyPropertyChanged * MVVM 模式

我建议你看看这个[链接](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)，它提供了一个非常好的概述（带有可下载的源代码）。您还可以查看我对另一个问题的[回答](https://stackoverflow.com/questions/15400583/how-to-set-different-horizontalalignment-to-listboxitems/15404164#15404164)，该问题演示了一些非常基本的数据绑定技术。

# c++ - 如何使用 C++11 type_traits 创建自定义元编程测试结构？

> ID：15393746
> 
> 赞同：2
> 
> 时间：2013-03-13T18:40:31.100
> 
> 标签：c++, testing, c++11, metaprogramming, typetraits

如何在 C++11 中编写自定义元编程测试？我想写这样的东西：

```
#include <type_traits>
#include <iostream>

struct A {};

template <typename T>
struct foo {
    typedef typename std::conditional<std::is_pointer<T>::value,
                                      typename std::remove_pointer<T>::type,
                                      T>::type type;
};

template <typename A, typename B>
struct test1{typedef typename std::is_same<A, B>::value result;};

template <typename A, typename B>
struct test2{typedef typename std::is_same<A, typename foo<B>::type>::value result;};

template <typename A, typename B>
void testAll() {
    std::cout << std::boolalpha;
    std::cout << "test1: " << typename test1<A,B>::result << std::endl; // ERROR: expected ‘(’ before ‘&lt;<’ token
    std::cout << "test2: " << typename test2<A,B>::result << std::endl; // ERROR: expected ‘(’ before ‘&lt;<’ token
    // ...
}

int main()
{  
    typedef A type1;
    testAll<A, type1>();
    typedef const A* type2;
    testAll<A, type2>();
    // ...
} 
```

[我从这里](http://en.cppreference.com/w/cpp/types/is_same)看到了一个可能的 is_same 实现。我需要这样的东西吗？

可以这样写：

```
std::cout << "test1: " << std::is_same<A, B>::value << std::endl; 
```

我想写这个：

```
 std::cout << "test1: " << test1<A, B>::result << std::endl; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T19:14:36.793

您正在使用`typename`before `test1<A,B>::result`，但这是不合适的，因为您想`result`成为一个*值*，而不是一个类型。出于同样的原因，您不应该将其定义为内部的类型别名`test1<>`：您只是希望它具有相同的返回*值*`std::is_same<>::value`（即`static const bool`成员变量，而不是类型名称）。

你可以这样写：

```
template <typename A, typename B>
struct test1
{ 
    static const bool result = std::is_same<A, B>::value;
}; 
```

这样以下行将编译：

```
std::cout << "test1: " << test1<A,B>::result << std::endl; 
```

但是，您的`test1<>`trait 只不过是`std::is_same<>`（用`result`而不是`value`）的别名，并且 C++11 支持别名模板：

```
template <typename A, typename B>
using test1 = std::is_same<A, B>; 
```

这将允许您执行以下操作：

```
std::cout << "test1: " << test1<A,B>::value << std::endl; 
```

该`test2<>`特征遇到类似的问题，因为它定义`result`为类型别名，但`std::is_same<A, typename foo<B>::type>::value`它是一个值，而不是一个类型。

*因此，您可以*再次将其重写如下：

```
template <typename A, typename B>
struct test2
{
    static const bool result = std::is_same<A, typename foo<B>::type>::value;
}; 
```

这样以下行将编译：

```
std::cout << "test2: " << test2<A, B>::result << std::endl; 
```

但同样，您也可以定义一个别名模板：

```
template <typename A, typename B>
using test2 = std::is_same<A, typename foo<B>::type>; 
```

# sqlite - 优化 SQLite 中的全文搜索

> ID：15393747
> 
> 赞同：1
> 
> 时间：2013-03-13T18:40:37.633
> 
> 标签：sqlite, optimization, full-text-search, string-matching

我正在使用全文搜索来查找巨大树结构中的某些项目。大多数时候我只对匹配节点下的项目感兴趣。但是当我使用 select * from MYTABLE where match 'XXX' 时，它会在整个树结构中进行全文搜索。

有没有办法可以指定 MYTABLE 中用于全文搜索的行？（即匹配'XXX'）。任何提示将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T20:04:46.007

在 FTS 表上有效工作的唯一查询是`MATCH`搜索和搜索`rowid`/ `docid`。

因此，要搜索子树，您应该使子树（根）的 ID 成为正在搜索的全文的一部分。请注意，大多数分词器会丢弃间断字符，因此 ID 应该是一个句子，其中单词指定了从根到子树的路径。例如：

```
SELECT *
FROM MyTable
WHERE MyTable MATCH 'ID:"root 3 1 4" Text:whatever' 
```

如果在每个单词中包含树级别，则可能会增加 ID 中单词的选择性：

```
SELECT *
FROM MyTable
WHERE MyTable MATCH 'ID:"1x3 2x1 3x4" Text:whatever' 
```

# r - 从 X12 获取 TS 和 XTS 的频率

> ID：15393749
> 
> 赞同：3
> 
> 时间：2013-03-13T18:40:38.593
> 
> 标签：r, xts

我正在尝试使用该`x12`软件包自动进行一些季节性调整。为此，我需要一个`ts`对象。但是，我不需要一个简单的`ts`对象，而是一个已经设置了开始日期和频率的对象。对于任何给定的系列，我都可以输入，但我将混合提供每月或每周的数据。我可以从 a`quantmod`作为`xta`对象获取数据，但似乎无法弄清楚如何从`xts`. 这是一些贯穿整个过程的示例代码，但我想从 中提取频率信息`xts`，而不是显式设置它：

```
getSymbols("WILACR3URN",src="FRED", from="2000-01-01") # get data as an XTS
lax <- WILACR3URN #shorten name
laxts <- ts(lax$WILACR3URN, start=c(2000,1), frequency=12) #explicitly it works
plot.ts(laxts)
x12out <- x12(laxts,x12path="c:\\x12arima\\x12a.exe",transform="auto", automdl=TRUE)
laxadj  <- as.ts(x12out$d11) # extract seasonally adjusted series 
```

有什么建议么？还是不可能，我应该明确确定/提供频率？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T18:45:49.587

对于这种特定情况，这是未经测试的，但请尝试使用`xts::periodicity`频率：

```
freq <- switch(periodicity(lax)$scale,
  daily=365,
  weekly=52,
  monthly=12,
  quarterly=4,
  yearly=1) 
```

并使用对象的`year`和`mon`元素`POSIXlt`计算起始年月。

```
pltStart <- as.POSIXlt(start(lax))
Start <- c(pltStart$year+1900,pltStart$mon+1)
laxts <- ts(lax$WILACR3URN, start=Start, frequency=freq)
plot.ts(laxts) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-06T14:01:21.623

xts::periodicity 建议对我很有帮助。我还发现以下使用 xts::convertIndex 的方法适用于月度和季度数据。未经测试的每周数据。

```
require("quantmod")
require("dplyr")
getSymbols("WILACR3URN",src="FRED", from="2000-01-01") # get data as an XTS
lax <- WILACR3URN #shorten name
laxts <- lax %>%
  convertIndex("yearmon") %>% # change index of xts object
  as.ts(start = start(.), end = end(.)) # convert to ts
plot.ts(laxts) 
```

# cordova - Phonegap 提交外部浏览器

> ID：15393755
> 
> 赞同：4
> 
> 时间：2013-03-13T18:41:02.103
> 
> 标签：cordova

我在使用 phonegap（2.5.0 版）在 Android 和 iPhone 上的外部网络浏览器上打开表单提交时遇到问题。我想提交这样的表格：

```
<html>
    <body>
        <form method="POST" target="_blank" action="https://externalDomain.com">
            <input type="text" name="username"/>
            <input type="text" name="password/>
            <input type="submit" value="accept"/>
        </form>
    </body>
</html> 
```

所以这个脚本的执行发生在存储在设备上的文件中，比如说“index.html”，我希望提交在浏览器上打开，因为我需要用户在“externalDomian.com”上填写支付处理器表单.

任何帮助将非常感激。

# limit - iptables 限制每次连接的时间

> ID：15393757
> 
> 赞同：3
> 
> 时间：2013-03-13T18:41:05.800
> 
> 标签：limit, iptables

我想通过将每个连接的时间限制为 10 分钟来防止与 SMTP 服务器的连接挂起。这意味着应该在 10 分钟后断开连接。

iptables可以吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-17T21:25:45.510

如果您的 smtp 端口是默认 (25)，请执行以下操作：

```
iptables -A OUTPUT -p tcp --dport 25 -m state --state RELATED,ESTABLISHED -m limit --limit 10/minute -j DROP 
```

# tfs - 调用 QueryBuilds() 后未填充 IBuildDetail.RequestedFor

> ID：15393760
> 
> 赞同：0
> 
> 时间：2013-03-13T18:41:09.220
> 
> 标签：tfs, tfs-sdk, tfs-2012

我调用 IBuildServer.QueryBuilds()，并查看返回`IBuildDetail`的 s：

*   TFS2010：它们填充了用户别名。
*   TFS2012：它们为空。

如何获取 TFS2012 中的用户名？

```
var collection = new TfsTeamProjectCollection(new Uri(_txtCollection.Text));
var buildServer = collection.GetService<IBuildServer>();

var spec = buildServer.CreateBuildDetailSpec(Settings.Default.ProjectName);
spec.QueryOptions = QueryOptions.Definitions;
spec.QueryOrder = BuildQueryOrder.StartTimeDescending;
spec.InformationTypes = null;

return buildServer.QueryBuilds(spec).Builds; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T18:41:09.220

添加批处理请求：

```
spec.QueryOptions = QueryOptions.Definitions
                  | QueryOptions.BatchedRequests;  // Tell TFS2012 to populate RequestedFor / RequestedBy 
```

# php - 如何在 PDO::FETCH_FUNC 中使用对象方法

> ID：15393763
> 
> 赞同：4
> 
> 时间：2013-03-13T18:41:17.527
> 
> 标签：php, pdo, callback

这个问题引用了 PHP 手册中的以下 [http://www.php.net/manual/en/pdostatement.fetchall.php](http://www.php.net/manual/en/pdostatement.fetchall.php) 。

这使我能够在获得查询结果之前传递一个函数来处理查询结果。

我想将对象中的方法作为函数传递。

假设该对象被`$this`我如何编写它引用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T19:01:12.477

如果您在课堂范围之外工作。你可以这样做

```
// SELECT id, title FROM pages

$result = $sth->fetchAll(PDO::FETCH_FUNC, array('Foo', 'bar'));

Class Foo {
public function bar($id, $name) { return $id . " : " . $name;}
} 
```

真正使用 $this 也是如此

```
$result = $sth->fetchAll(PDO::FETCH_FUNC, array($this, 'bar')); 
```

# jquery - Javascript/jQuery 动画到动态高度？

> ID：15393766
> 
> 赞同：4
> 
> 时间：2013-03-13T18:41:19.250
> 
> 标签：jquery, resize, jquery-animate, height

有谁知道为什么这动画很好：

```
function setContainerHeight() {
    $(".pagecontainer").animate({
        height: '700px'
    }, 500);
} 
```

即固定高度，但这根本没有动画？

```
function setContainerHeight() {
    $(".pagecontainer").animate({
        height: 'auto'
    }, 500);
} 
```

它仍然自动调整大小，但没有动画，只是捕捉到它。

我的代码：

JS：

```
<script>

    function setContainerHeight() {
        $(".pagecontainer").animate({
            height: 'auto'
        }, 500);
    }

    $('.link').on('click', function(e){
        $('.pagecontainer>div').fadeOut(0);
        setContainerHeight();
        $(this.getAttribute("href")).fadeIn();
    });

</script> 
```

CSS：

```
.pagecontainer {
min-height:450px;
width:80%;
min-width:800px;
padding:50px 0;
margin: 0 auto;
}
.pagecontainer>div{
display: none; /*wait until page needs to be faded in*/
padding-left:50px;
padding-right:50px;
position:relative;
} 
```

HTML：

```
<div class="pagecontainer">

    <a href="#page1" class="link">page 1</a>
    <a href="#page2" class="link">page 2</a>
    <a href="#page3" class="link">page 3</a>

    <div id="page1">TONS OF TEXT HERE</div>

    <div id="page2">A BIT OF TEXT HERE</div>

    <div id="page3">BUNCH OF IMAGES</div>

</div> 
```

有不同的 div 淡入/淡出，每个都需要不同的高度。页面的宽度也是动态的，但不需要动画，只需使用视口拉伸/收缩。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-13T18:44:55.377

演示[http://jsfiddle.net/zbB3Q/](http://jsfiddle.net/zbB3Q/)

Animate 不知道结束高度。你需要得到它然后动画，但要做到这一点，你必须快速设置高度并返回到动画之前的状态。

```
function setContainerHeight() {
    var heightnow=$(".pagecontainer").height();
    var heightfull=$(".pagecontainer").css({height:'auto'}).height();

    $(".pagecontainer").css({height:heightnow}).animate({
        height: heightfull
    }, 500);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T18:44:22.503

根据经验，我遇到了同样的问题，但你不能动画到`auto`. 但是，您可以事先获取容器高度，然后对其进行动画处理。例如。

```
function setContainerHeight() {
    newHeight = $('.pagecontainer').height();
    $(".pagecontainer").animate({
        height: newHeight
    }, 500);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-19T11:45:21.963

在这里聚会有点晚了，但我在一些代码中遇到了完全相同的问题。我写了一个小的 jQuery 插件来解决这个问题 -如果你仍然需要解决这个问题，它可以[在这里找到。](https://github.com/azaslavsky/jQuery-Animate-Auto-Plugin)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-18T07:23:27.317

我做了一个小插件来处理这个问题——应该相当简单，基于已在[此处](http://darcyclarke.me/development/fix-jquerys-animate-to-allow-auto-values-2/)发布的 Darcy Clarke 的方法，并进行了一些（imo）非常必要的改进。jQuery 即插即用：

[https://github.com/azaslavsky/jQuery-Animate-Auto-Plugin](https://github.com/azaslavsky/jQuery-Animate-Auto-Plugin)

# sendmail - 使用 daemon@localhost 发送邮件

> ID：15393768
> 
> 赞同：0
> 
> 时间：2013-03-13T18:41:25.580
> 
> 标签：sendmail

我有一个托管 7 个网站的服务器。它们都具有从服务器上运行的程序向用户发送电子邮件的能力（例如忘记密码、通知等）。他们将有一个回复地址，例如 DO-NOT-REPLY@somedomain.com。在标头中的回复地址是 DAEMON@localdomain.localhost。这会导致一些接收邮件服务器拒绝邮件，因为发送电子邮件地址不匹配（我相信这是一个 553 错误）。

我用谷歌搜索的大部分内容都说使用泛型表。但是，这似乎要求用户实际上是系统（Linux）上的帐户。例如：

```
bob robert.e.user@someotherdomain.com 
```

就我而言，我有许多名为 DO-NOT-REPLY 但在不同域中的“用户”。我将如何指定它们？我会在哪里指定它们？

我现在很困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T19:46:46.213

**发送（在 Unix PHP 上）**

php中的mail函数可以设置：

*   标头发件人（“发件人：”标头）
    [可选的附加标头参数]
*   接收退回邮件的信封发件人（SMTP 级别的“MAIL FROM:”）[`-f addreess`通过可选的附加参数参数传递给 MTA]

[http://php.net/manual/en/function.mail.php](http://php.net/manual/en/function.mail.php)

限制它可能很棘手（例如，强制每个网站在其自己的域中使用发件人地址）

**接收（反弹）**

您可以`FEATURE(virtusertable)`在 sendmail 配置中使用。

# windows-8 - Win 8 应用程序：在漫游文件夹中保存和检索数据

> ID：15393775
> 
> 赞同：0
> 
> 时间：2013-03-13T18:42:08.390
> 
> 标签：windows-8, windows-runtime, winjs

我正在尝试使用 JavaScript 在应用程序中将少量用户数据存储到 Windows 存储的 roamingFolder 方法/属性中。我正在关注开发中心的示例代码，但没有成功。我的代码片段如下：（或完整项目的 SkyDrive 链接： [https](https://skydrive.live.com/redir?resid=F4CAEFCD620982EB!105&authkey=!AE-ziM-BLJuYj7A) ://skydrive.live.com/redir?resid=F4CAEFCD620982EB!105&authkey=!AE-ziM-BLJuYj7A ）

```
filesReadCounter: function() {
roamingFolder.getFileAsync(filename)
    .then(function (filename) {
        return Windows.Storage.FileIO.readTextAsync(filename);
    }).done(function (data) {
        var dataToRead = JSON.parse(data);
        var dataNumber = dataToRead.count;
        var message = "Your Saved Conversions";
        //for (var i = 0; i < dataNumber; i++) {
        message += dataToRead.result;
        document.getElementById("savedOutput1").innerText = message;
        //}
        //counter = parseInt(text);
        //document.getElementById("savedOutput2").innerText = dataToRead.counter;
    }, function () {
        // getFileAsync or readTextAsync failed.
        //document.getElementById("savedOutput2").innerText = "Counter: <not found>";
    });
},

filesDisplayOutput: function () {
    this.filesReadCounter();
} 
```

我在导航器模板的 item.js 文件的 ready 方法中调用 filesDisplayOutput 函数，以检索最后一个会话的数据。但它总是显示空白。我想最多保存 5 个用户可能需要保存的数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T00:47:34.553

我在按原样运行您的代码时遇到了一些麻烦，但这与问题无关。最重要的是，您实际上并没有阅读该文件。注意这段代码，当 promise 完成时没有`then`or来执行。`done`

> 返回 Windows.Storage.FileIO.readTextAsync(文件名);

我在您的示例解决方案中破解了这个并且它正在工作......这的典型警告不是生产代码:)

```
filesReadCounter: function () {
        roamingFolder.getFileAsync(filename).then(
            function (filename) {
                Windows.Storage.FileIO.readTextAsync(filename).done(
                    function (data) {
                        var dataToRead = JSON.parse(data);
                        var dataNumber = dataToRead.count;
                        var message = "Your Saved Conversions";
                        //for (var i = 0; i < dataNumber; i++) {
                        message += dataToRead.result;
                        document.getElementById("savedOutput1").innerText = message;
                        //}
                        //counter = parseInt(text);
                        //document.getElementById("savedOutput2").innerText = dataToRead.counter;

                    }, function () {

                        // readTextAsync failed.
                        //document.getElementById("savedOutput2").innerText = "Counter: <not found>";
                    });
            },
            function () {
                // getFileAsync failed 
            })
    }, 
```

# python - 为什么 get_default_prefix @classmethod 而不仅仅是常规方法

> ID：15393778
> 
> 赞同：1
> 
> 时间：2013-03-13T18:42:23.547
> 
> 标签：python, django

在 formsets.py 中，您可以找到此代码片段

```
class BaseFormSet(StrAndUnicode):
    """
    A collection of instances of the same Form class.
    """
    def __init__(self, data=None, files=None, auto_id='id_%s', prefix=None,
                 initial=None, error_class=ErrorList):
        ...
        self.prefix = prefix or self.get_default_prefix()   # Note the self.get_default_prefix
        ...
    ...
    @classmethod                                            # Note the @classmethod
    def get_default_prefix(cls):
        return 'form' 
```

为什么 get_default_prefix 以这种方式声明，然后用 self. 调用？这样做有什么收获吗？ `get_default_prefix`在 BaseInlineFormSet (forms/models.py) 中有另一个定义

```
class BaseInlineFormSet(BaseModelFormSet):
    ...
    @classmethod
    def get_default_prefix(cls):
        from django.db.models.fields.related import RelatedObject
        return RelatedObject(cls.fk.rel.to, cls.model, cls.fk).get_accessor_name().replace('+','') 
```

和另一个`BaseGenericInlineFormset`再次使用@classmethod，所以它似乎不是一个错字。我只是不明白为什么会这样做，然后用self调用。

我看到的唯一线索（我不明白）是管理员似乎用`FormSet.get_default_prefix()`

我想知道是否有一些我对 python 不了解的地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T18:52:00.453

从实例调用类方法是完全合法的，正如您在代码中看到的那样。相关的 stackoverflow[帖子](https://stackoverflow.com/questions/692040/is-it-bad-form-to-call-a-classmethod-as-a-method-from-an-instance)说从实例调用没有任何好处，（而且这是不好的做法）；因为如果你只是从实例调用你的方法可能不应该是`classmethod`.

不过，我认为您回答了自己的问题。如果 django 从某个地方调用`FormSet.get_default_prefix()`，那么他们可能不想实例化一个 formset 对象

# android - 用自定义视图覆盖或临时替换屏幕键盘？

> ID：15393780
> 
> 赞同：2
> 
> 时间：2013-03-13T18:42:25.347
> 
> 标签：android, android-layout, android-view

在我的 Android 应用程序中，我想在键盘在屏幕上时从屏幕底部向上滑动自定义视图，或者覆盖键盘或暂时将其设置为动画。理想情况下，视图与键盘的大小相同。用户将简要参考自定义视图，然后点击以将其关闭，从而恢复键盘。

我该怎么做呢？谢谢。

# c# - 小数到整数

> ID：15393782
> 
> 赞同：-1
> 
> 时间：2013-03-13T18:42:36.200
> 
> 标签：c#, integer, decimal, console-application

我在完成一项特定的家庭作业时遇到了麻烦。这似乎几乎是不可能的。问题是这样的……

“将来，您可能会使用其他不支持精确货币计算的小数类型的编程语言。在这些语言中，您应该使用整数执行此类计算。修改应用程序以仅使用整数来计算复利. 将所有货币金额视为整数的便士。然后分别使用除法和余数运算将结果分成美元和美分部分。在显示结果时在美元和美分部分之间插入句点。

当我按照指示使用整数时，我什至在将任何内容分开之前就得到了这些溢出错误。有谁知道如何使这项工作？这是需要修改的原始代码...

```
 decimal amount; //amount on deposit at end of each year
    decimal principal = 1000; //initial amount before interest
    double rate = 0.05; //interest rate

    //display headers
    Console.WriteLine("Year{0,20}", "Amount on deposit");

    //calculate amount on deposit for each of ten years
    for (int year = 1; year <= 10; year++)
    {
        //calculate new amount for specified year
        amount = principal *
            ((decimal)Math.Pow(1.0 + rate, year));

        //display the year and the amount
        Console.WriteLine("{0,4}{1,20:C}", year, amount);
    } 
```

这是我到目前为止的代码......

```
 ulong amount; //amount on deposit at end of each year
        ulong principal = 100000; //initial amount before interest
        ulong rate = 5; //interest rate
        ulong number = 100;

        //display headers
        Console.WriteLine("Year{0,20}", "Amount on deposit");

        //calculate amount on deposit for each of ten years
        for (int year = 1; year <= 10; year++)
        {
            //calculate new amount for specified year
            amount = principal *
                ((ulong)Math.Pow(100 + rate, year));

            amount /= number;

            number *= 10;

            //display the year and the amount
            Console.WriteLine("{0,4}{1,20}", year, amount); 
```

它得到了一些正确的数字，但由于某种原因开始吐出零。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T18:59:31.627

您每次都在通过循环更改`amount`and的值，但我不相信这就是您想要在这里做的事情。`number`如果您在最终`Console.WriteLine`调用中删除这些分配并更改参数（`amount / 100`并且`amount % 100`在这里会有所帮助），您应该能够获得您正在寻找的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T20:03:17.727

((ulong)Math.Pow(100 + rate, year)) 增长太快 105^10 > ulong。

我认为老师提醒他们将 math.pow 保留为小数。

```
amount = (ulong)(Math.Round(principal *
                Math.Pow((number + rate)/100.0, year),0));

            //display the year and the amount
            Console.WriteLine("{0,4}{1,17}.{2,-2}", year, "$" + (ulong)(amount / number), (ulong)(amount % number)); 
```

问题只是说变量，而不是常量 :) 变量仍然是 ulong

# c# - MVC4 捆绑包返回 404

> ID：15393790
> 
> 赞同：19
> 
> 时间：2013-03-13T18:42:56.827
> 
> 标签：c#, asp.net-mvc-4, bundle

当您从 Visual Studio 中运行它时，我有一个可以与捆绑一起使用的项目。但是，在您进行部署之后，捆绑处理程序似乎永远不会选择路由。它最终转而转到静态文件处理程序，该处理程序返回 404 响应。

有任何想法吗？我在 IIS 下的网站的 bin 中看到了优化程序集。

它使用 4.0 应用程序池和集成模式。

我想知道是否有人有任何想法或建议？

谢谢

----- 根据问题更新 -----

VS2012

目标框架=“4.5”

我还在视图中添加了一些代码以显示加载了哪些模块，并且我可以看到其中列出的捆绑模块。

BundleConfig 是使用 Internet Application MVC4 项目模板时提供的默认值。

该站点正在部署到根目录中。奇怪的是，当我设置 EnableOptimizations = true 时（由于通过 Visual Studio F5 在调试模式下运行），它运行完美！我可以导航到内容/css，它会吐出组合的 css。

我将其部署，其他一切正常，但捆绑！

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-25T13:58:15.773

我刚刚遇到（并解决了）这个问题。

确保您的包的虚拟路径不会与现有目录或实际文件名混淆。就我而言，我将其编码为：

```
bundles.Add(new ScriptBundle("~/bundles/main.js").Include( ... 
```

但是当我把它改成

```
bundles.Add(new ScriptBundle("~/bundles/main").Include( ... 
```

这一切都开始起作用了。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-09-03T23:04:48.763

2013 年 11 月 17 日更新答案这是由于默认 MVC 路由仅处理 * 而不是 * 。*，即 IIS 或 IIS Express 的 applicationhost.config 有以下内容：

```
 <add name="ExtensionlessUrl-Integrated-4.0" path="*." verb="GET,HEAD,POST,DEBUG" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0" responseBufferLimit="0" /> 
```

因此，为了解决这个问题，我们可以在 web.config 中添加以下内容：

```
 <system.webServer>
        <handlers>      
          <add name="UrlRoutingHandler" 
               type="System.Web.Routing.UrlRoutingHandler, 
                     System.Web, Version=4.0.0.0, 
                     Culture=neutral, 
                     PublicKeyToken=b03f5f7f11d50a3a" 
               path="/bundles/*" 
               verb="GET"/>      
        </handlers>
      </system.webServer> 
```

更多信息可以参考以下内容： [http ://weblogs.asp.net/owscott/archive/2013/01/16/handing-mvc-paths-with-dots-in-the-path.aspx](http://weblogs.asp.net/owscott/archive/2013/01/16/handing-mvc-paths-with-dots-in-the-path.aspx) [ASP.NET MVC Url Route 支持（点）](https://stackoverflow.com/questions/9273987/asp-net-mvc-url-route-supporting-dot)

老错误答案：基本上，当 IIS 解析 URL 时，虚拟路径中通常不允许使用 DOT。这[是一个链接](http://www.microsoft.com/resources/documentation/isa/2000/enterprise/proddocs/en-us/urlscan/vp_urlscanini.mspx?mfr=true)提到了以下 URLScan AllowDotInPath 参数：默认情况下，此选项设置为 0。如果此选项设置为 0，则 URLScan 拒绝任何包含多个句点 (.) 的请求。这可以防止通过在 URL 的路径信息或查询字符串部分中放置安全文件扩展名来伪装对危险文件扩展名的请求。例如，如果此选项设置为 1，则 URLScan 可能允许对 http:// servername/BadFile.exe/SafeFile.htm 的请求，因为它会将其解释为对 HTML 页面的请求，而实际上它是对PATH_INFO 区域中带有 HTML 页面名称的可执行 (.exe) 文件。当此选项设置为 0 时，URLScan 还可能拒绝对包含句点的目录的请求。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-08-11T00:16:51.227

即使我得到了同样的错误。`<modules runAllManagedModulesForAllRequests="true" />`在web.config 文件中添加`<system.webServer>`解决了这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-16T19:42:44.590

即使使用示例 MVC 应用程序，我也遇到了同样的问题。我看到默认模板将样式表与 css 名称捆绑在一起，我猜 IIS 不喜欢这会导致 404 错误。

将包名称从 css 更改为 APPCSS 将为我解决问题。

# javascript - 使用图像检测两个球的碰撞

> ID：15393792
> 
> 赞同：3
> 
> 时间：2013-03-13T18:43:02.457
> 
> 标签：javascript

我是 JS 编程的初学者，我的任务是做一些像屏幕保护程序这样的事情。我已经有两个球在屏幕上弹跳，但我需要一种算法来让它们互相弹跳。我浏览了这里的文章，但代码还不够……或者至少对我来说。这是代码。

```
<html> 
<head> 
<style type="text/css"> 
    .b {position:absolute; left:0px; top:0px; width:50px; height:50px;}
    .c {position:absolute; left:0px; top:0px; width:50px; height:50px;}
</style> 
<SCRIPT language="javascript"> 

    var x =Math.random();
    var y  =0 ;
    var h  =12;
    var v  =22;
    var g  =1;
    var r  =0;
    var q  =0;
    var gg = 0;

    var u = Math.random() ;
    var i =222;
    var o = 12;
    var p = 22;
    var l  =1;
    var k =0;
    var j = 0;
    var mm = 0;

    var height=window.innerHeight;
    var width=window.innerWidth;
    function moveball() 
    {
        var b1 = document.getElementById('ball');

        v=v+g;r=q;q=y;
        if(y==r&&y>394&&g==5)return;
        x=x+h;y=y+v;
        if(x>width){x=width;h=h*-1;}
        if(y>height){y=height;v=v*-1;}
        if(x<0){x=0;h=h*-1;}
        if(y<0){y=0;v=v*-1;}
        if(v==-26&&gg==5){gg=0;g=5;}
        b1.style.top=y + 'px';
        b1.style.left=x + 'px';

        var b2 = document.getElementById('ball2');

        p=p+l;k=j;j=i;
        if(i==k&&i>394&&l==5)return;
        u=u+o;i=i+p;
        if(u>width){u=width;o=o*-1;}
        if(i>height){i=height;p=p*-1;}
        if(u<0){u=0;o=o*-1;}
        if(i<0){i=0;p=p*-1;}
        if(p==-26&&mm==5){mm=0;l=5;}
        b2.style.top=i + 'px';
        b2.style.left=u + 'px';
        t=setTimeout("moveball()",32);

}

</script> 
</head> 
<body onLoad="moveball();" > 

    <div id="ball" class="b"><img src="ballA.gif" width="50" height="50"></div> 
    <div id="ball2" class="c"><img src="trol.png" width="50" height="50"></div> 

</body> 
```

据我所知，我的问题是我没有处理由 js2Draw 创建的球，但我使用的是球的图像。如果您知道我该怎么做，请帮助我绝望。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T19:05:13.713

现在，您的代码允许球从屏幕的“墙壁”反弹，但不能相互反弹。您需要做的是计算它们何时变得太近 - 也就是说，它们的中心比它们的直径相距更近。

通过使用不方便的命名约定，您让自己（和我......）的生活变得更加困难 - 而不是拥有`x1, x2`球 1、2 的 x 坐标（更好的是，拥有`x[i]`第 i 个球的坐标），您正在使用不同的字母。我不会尝试解决这个问题，但我建议您在使用合理变量时获得更好的代码。

所以现在你有一个物体`(x,y)`以 速度`(h,v)`，第二个物体`(u,i)`以 速度`(o,p)`。我们需要知道这两个对象是否会在下一步移动中“碰撞”。即——这些球在移动步后的距离是否小于 50？如果发生碰撞，我们可以交换球 1 和 2 的速度——这大约是弹性碰撞中发生的情况：

```
var xnew = x + h;
var ynew = y + v;
var unew = u + o;
var inew = i + p;
var newDist = Math.sqrt(Math.pow(xnew-unew,2) + Math.pow(ynew-inew,2));
if (newDist < 50) {
  v1x = o;
  v1y = p;
  o = h; p = v; h = v1x; v = v1y;
} 
```

我在您更新位置之前添加了这些行`b2`，它表明事情“非常”有效。您可能希望稍微重新安排您的代码，以便在更新`b1`or的位置之前进行此计算`b2`，但是从这段代码中应该可以很明显地看出一般要点（这似乎确实产生了您想要的大致内容，即使物理学是'不太对-但这是一个屏幕保护程序，而不是物理实验）。

# mysql - 这两个查询如何结合起来？

> ID：15393793
> 
> 赞同：1
> 
> 时间：2013-03-13T18:43:04.223
> 
> 标签：mysql

抱歉，问题标题不佳，我不确定描述我所问内容的正确术语。

我有两张桌子：

帖子：

```
p_id | p_author | p_text 
```

post_comments:

```
pc_id | pc_p_id | pc_author | pc_text 
```

每个评论的 pc_p_id 对应于帖子的 p_id。

我要选择：

1.  来自特定作者的所有帖子的 p_id 和 p_text
2.  对应帖子的评论数

我可以用这样的查询来完成第一部分（假设“1”是作者）：

```
SELECT p_id, p_text FROM posts WHERE p_author = 1 
```

我可以得到这样一个特定帖子的评论数量（假设“12”是一个帖子ID）：

```
SELECT COUNT(*) FROM post_comments WHERE pc_p_id = 12 
```

我的问题是，如何结合这两个查询，以便获得来自特定作者的所有帖子的 p_id 和 p_text 以及相应帖子的评论数？

我尝试使用如下所示的 LEFT JOIN，但它给了我一个语法错误：

```
SELECT t1.p_id, t1.p_text, t2.COUNT(*)
FROM posts t1 LEFT JOIN post_comments t2
WHERE t1.p_author = 1 AND t2.pc_p_id = t1.p_id 
ORDER BY t1.p_id DESC 
```

这是 SQL 小提琴：

[http://sqlfiddle.com/#!2/e9b975](http://sqlfiddle.com/#!2/e9b975)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T18:47:14.130

```
SELECT p_id, p_text, count(1)
FROM posts p
   JOIN post_comments pc
   ON p.p_id = pc.pc_p_id
WHERE p_author = 1
GROUP BY p_id, p_text 
```

这是进行嵌入式选择的编辑版本：

```
SELECT p_id, p_text,
   (SELECT COUNT(1) FROM post_comments WHERE pc_p_id = p.p_id) AS count
FROM posts p
WHERE p_author = 1 
```

我在你的小提琴中验证了这一点

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T18:49:22.040

当您想要左侧表中的所有行，但右侧表中可能没有对应的行时，使用 LEFT_JOIN。否则，您需要直接（内部）连接。此外，当使用 COUNT() 之类的聚合函数时，如果您选择了任何非聚合列，则必须使用 GROUP_BY 子句。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-13T19:00:40.310

SELECT p.p_id, p.p_text, count( pc.pc_id ) AS Count
FROM posts p, post_comments pc
WHERE pc.pc_p_id = p.p_id
AND p.p_author =1
AND pc.pc_p_id =12

# string - Lisp - 将输入拆分为单独的字符串

> ID：15393797
> 
> 赞同：19
> 
> 时间：2013-03-13T18:43:19.480
> 
> 标签：string, list, input, split, lisp

我试图接受用户输入并将其存储在一个列表中，而不是一个由单个字符串组成的列表，我希望扫描的每个单词都是它自己的字符串。例子：

```
> (input)
This is my input. Hopefully this works 
```

会返回：

```
("this" "is" "my" "input" "hopefully" "this" "works") 
```

请注意，我不希望在最终列表中出现任何空格或标点符号。

任何投入将不胜感激。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-13T18:58:05.837

[`split-sequence`](http://www.cliki.net/SPLIT-SEQUENCE)是现成的解决方案。

你也可以自己动手：

```
(defun my-split (string &key (delimiterp #'delimiterp))
  (loop :for beg = (position-if-not delimiterp string)
    :then (position-if-not delimiterp string :start (1+ end))
    :for end = (and beg (position-if delimiterp string :start beg))
    :when beg :collect (subseq string beg end)
    :while end)) 
```

where`delimiterp`检查您是否要拆分此字符，例如

```
(defun delimiterp (c) (or (char= c #\Space) (char= c #\,))) 
```

或者

```
(defun delimiterp (c) (position c " ,.;/")) 
```

PS。查看您的预期返回值，您似乎想调用[`string-downcase`](http://www.lispworks.com/documentation/HyperSpec/Body/f_stg_up.htm)before `my-split`。

聚苯乙烯。您可以轻松修改`my-split`为接受`:start`, `:end`, `:delimiterp`&c。

购买力平价。很抱歉前两个版本中的错误`my-split`。请考虑一个指标，即不应*推出*自己的此功能版本，而应使用现成的解决方案。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2019-01-14T13:12:01.920

对于 Common-Lisp 中的该任务，我发现它很有用`(uiop:split-string str :separator " ")`，并且该包`uiop`通常有很多实用程序，请查看文档[https://common-lisp.net/project/asdf/uiop.html#index-split_002dstring](https://common-lisp.net/project/asdf/uiop.html#index-split_002dstring) .

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-01-03T01:35:14.283

有`cl-ppcre:split`：

```
* (split "\\s+" "foo   bar baz
frob")
("foo" "bar" "baz" "frob")

* (split "\\s*" "foo bar   baz")
("f" "o" "o" "b" "a" "r" "b" "a" "z")

* (split "(\\s+)" "foo bar   baz")
("foo" "bar" "baz")

* (split "(\\s+)" "foo bar   baz" :with-registers-p t)
("foo" " " "bar" "   " "baz")

* (split "(\\s)(\\s*)" "foo bar   baz" :with-registers-p t)
("foo" " " "" "bar" " " "  " "baz")

* (split "(,)|(;)" "foo,bar;baz" :with-registers-p t)
("foo" "," NIL "bar" NIL ";" "baz")

* (split "(,)|(;)" "foo,bar;baz" :with-registers-p t :omit-unmatched-p t)
("foo" "," "bar" ";" "baz")

* (split ":" "a:b:c:d:e:f:g::")
("a" "b" "c" "d" "e" "f" "g")

* (split ":" "a:b:c:d:e:f:g::" :limit 1)
("a:b:c:d:e:f:g::")

* (split ":" "a:b:c:d:e:f:g::" :limit 2)
("a" "b:c:d:e:f:g::")

* (split ":" "a:b:c:d:e:f:g::" :limit 3)
("a" "b" "c:d:e:f:g::")

* (split ":" "a:b:c:d:e:f:g::" :limit 1000)
("a" "b" "c" "d" "e" "f" "g" "" "") 
```

[http://weitz.de/cl-ppcre/#split](http://weitz.de/cl-ppcre/#split)

对于常见情况，有（新的，“现代且一致的”）[cl-str](https://github.com/vindarel/cl-str)字符串操作库：

```
(str:words "a sentence    with   spaces") ; cut with spaces, returns words
(str:replace-all "," "sentence") ; to easily replace characters, and not treat them as regexps (cl-ppcr treats them as regexps) 
```

你有[cl-slug](https://github.com/EuAndreh/cl-slug)来删除非 ascii 字符和标点符号：

```
 (asciify "Eu André!") ; => "Eu Andre!" 
```

以及`str:remove-punctuation`（使用`cl-change-case:no-case`）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-25T19:51:03.693

```
; in AutoLisp usage (splitStr "get off of my cloud" " ") returns (get off of my cloud)

(defun splitStr (src delim / word letter)

  (setq wordlist (list))
  (setq cnt 1)
  (while (<= cnt (strlen src))

    (setq word "")

    (setq letter (substr src cnt 1))
    (while (and (/= letter delim) (<= cnt (strlen src)) ) ; endless loop if hits NUL
      (setq word (strcat word letter))
      (setq cnt (+ cnt 1))      
      (setq letter (substr src cnt 1))
    ) ; while

    (setq cnt (+ cnt 1))
    (setq wordlist (append wordlist (list word)))

  )

  (princ wordlist)

  (princ)

) ;defun 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-06-08T14:44:22.773

```
(defun splitStr (src pat /)
    (setq wordlist (list))
    (setq len (strlen pat))
    (setq cnt 0)
    (setq letter cnt)
    (while (setq cnt (vl-string-search pat src letter))
        (setq word (substr src (1+ letter) (- cnt letter)))
        (setq letter (+ cnt len))
        (setq wordlist (append wordlist (list word)))
    )
    (setq wordlist (append wordlist (list (substr src (1+ letter)))))
) 
```

# mysql - SQL：对 COUNT 和 GROUP 求和以组合查询

> ID：15393798
> 
> 赞同：0
> 
> 时间：2013-03-13T18:43:20.337
> 
> 标签：mysql, sql, select, count, sum

有没有一种方法是将这两个查询合并为一个查询，这样结果是：

```
ChannelId   | ContentType | ContentTypeCount | SumOfAllContentTypes
  100       | link        | 59               | 179
  100       | photo       | 49               | 179
  100       | status      | 2                | 179
  100       | video       | 4                | 179
  101       | link        | 15               | 179
  101       | status      | 50               | 179 
```

以下是我目前正在使用的查询：

```
SELECT
COUNT(posts.id)
FROM posts
INNER JOIN channels ON channels.id = posts.channel_id
WHERE channels.site_id = 1003
AND channels.channel_type_id = 1 
```

结果 = 179

和..

```
SELECT
posts.channel_id,
posts.contenttype,
COUNT(posts.contenttype) as contenttypecount
FROM posts
INNER JOIN channels ON channels.id = posts.channel_id
WHERE channels.site_id = 1003
AND channels.channel_type_id = 1
GROUP BY posts.channel_id, posts.contenttype 
```

结果 = 100 | 链接 | 59; ETC..

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T18:48:08.353

试试这个：

```
select A.*, B.*
from (
  SELECT
  posts.channel_id,
  posts.contenttype,
  COUNT(posts.contenttype) as contenttypecount
  FROM posts
  INNER JOIN channels ON channels.id = posts.channel_id
  WHERE channels.site_id = 1003
  AND channels.channel_type_id = 1
  GROUP BY posts.channel_id, posts.contenttype
) A
join (
  SELECT
  COUNT(posts.id) as Total
  FROM posts
  INNER JOIN channels ON channels.id = posts.channel_id
  WHERE channels.site_id = 1003
  AND channels.channel_type_id = 1
) B on 1=1 
```

不是特别有效，但简单易行。

# ruby-on-rails - 将话语留言板与现有的 Rails 站点集成

> ID：15393808
> 
> 赞同：18
> 
> 时间：2013-03-13T18:43:52.747
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, discourse

我正在考虑为我在 Rails 中开发的网站集成留言板。新的讨论板看起来很有趣[http://www.discourse.org/](http://www.discourse.org/)但是没有太多关于通过 oauth2 或 sso 或者可能使用 rails 引擎类型系统集成到另一个站点的信息。有没有人用这样的应用程序成功设置了这个？

谢谢

**编辑 t**
是否有未来如何进行这种整合的路线图？它的某些部分看起来很有趣，但想要更多关于如何处理这个用例的信息。

**编辑 2**
由于这个问题得到了相当多的流量，我想添加这篇文章[http://meta.discourse.org/t/integrating-discourse-with-current-user-database/6669](http://meta.discourse.org/t/integrating-discourse-with-current-user-database/6669)，它通过了 SSO 尝试目前正在进行讨论。我还与 thougtbot 的人员就他们的实施进行了联系。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T17:38:25.300

我对同样的问题感兴趣，但这是我在[Github 问题](https://github.com/discourse/discourse/issues/244)上发现的：

> 让它运行的最简单方法是在你的应用程序之外安装 Discourse。如果您想与现有的登录系统集成，我们确实提供了完整的源代码，但我想此时这将是相当多的工作。
> 
> 目前，我们还没有过多关注生产部署，因为我们还处于测试阶段，并希望确保人们拥有一个超级简单的升级系统，以随时掌握安全漏洞。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-03-24T08:57:13.410

没有使用 Discourse 完成任何应用程序，但如果他们的网站没有提供大量信息，您是否浏览了 Git 存储库[https://github.com/discourse/discourse](https://github.com/discourse/discourse)它提供了大量信息和资源链接，例如：

1.  **Discourse 开发者安装指南**（Vagrant）： [https ://github.com/discourse/discourse/blob/master/docs/VAGRANT.md](https://github.com/discourse/discourse/blob/master/docs/VAGRANT.md)

2.  **高级开发人员**： [https ://github.com/discourse/discourse/blob/master/docs/DEVELOPER-ADVANCED.md](https://github.com/discourse/discourse/blob/master/docs/DEVELOPER-ADVANCED.md)

3.  **管理员快速入门**：[https ://github.com/discourse/discourse/wiki/The-Discourse-Admin-Quick-Start-Guide](https://github.com/discourse/discourse/wiki/The-Discourse-Admin-Quick-Start-Guide)

希望能对你有所帮助

干杯

# razor - Bootstrap“下拉菜单”滚动到顶部？

> ID：15393815
> 
> 赞同：1
> 
> 时间：2013-03-13T18:44:12.300
> 
> 标签：razor, twitter-bootstrap, asp.net-mvc-4

我在我的 MVC4 应用程序中使用了 Bootstrap。我正在尝试为“编辑”和“删除”实现操作下拉菜单。单击“操作”菜单时，它正在滚动到页面并添加`#`到 url。

```
<td>

   @if (model.Source == "self")
   { 
       <div class="btn-group">
       <a class="btn dropdown-toggle" data-toggle="dropdown" href="#">
             Action
       <span class="caret"></span>
       </a>
       <ul class="dropdown-menu">
       @{
          @Html.TryPartial("_actions", model)                            
          var routevalues = model.GetIdValue();  
          <li>@Html.ActionLink("Edit", "Edit", routevalues)</li>
          <li class="divider"></li>
          <li>@Html.ActionLink("Delete", "Delete", routevalues)</li>
         }
       </ul>
       </div>
   }

 </td> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T20:12:15.293

我忘记包含 `@Scripts.Render("~/js")`在布局页面中。

# python - 每行打印一个令牌数组

> ID：15393819
> 
> 赞同：-3
> 
> 时间：2013-03-13T18:44:22.950
> 
> 标签：python, token

在对文件进行标记并留下一组标记之后......你将如何在python中每行打印一个标记

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T18:45:54.203

```
for token in tokens:
    print token 
```

# jquery - 如何更改和检索 HTML 文档

> ID：15393820
> 
> 赞同：2
> 
> 时间：2013-03-13T18:44:25.383
> 
> 标签：jquery, html, node.js

我在 NodeJS 中使用 JQuery npm 来尝试处理一些 HTML。但我似乎无法将最终的 html 作为文本通过 http 模块发送到管道中。我可以`$html.find('head')`生成 html 文本，但`$html.find('html')`所有其他解决方案都会生成一个对象。

这是我的代码：

```
// this code, which will run under nodejs using jquery, should update the head in an entire html document

var $ = require('jquery');
var $html = $('<html><head><title>this should be replaced</title></head><body>and the entire document should be available as text</body></html>');
console.log('html', $html);
var $body = $html.find('body');

var res = $html.find('head').replaceWith('<head><title>with this</title></head>');
console.log(res.html()); 
```

[http://jsfiddle.net/Wb7yV/4/](http://jsfiddle.net/Wb7yV/4/)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T20:00:24.337

你和你的jsfiddle非常接近。要更改头部，只需使用以下命令：

```
$('head').html('<title>with this</title>'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T19:18:14.880

当您查看控制台日志时，`$html`您会注意到它包含 2 个索引对象：`title`和`text`. 在查看这些对象时，请注意它们都没有任何子对象，这些函数[`jQuery.find()`](http://api.jquery.com/find/)是为浏览而设计的。

> **描述：**获取当前匹配元素集中每个元素的后代，由选择器、jQuery 对象或元素过滤。

A [`filter`](http://api.jquery.com/filter/)for 'title' 或 'text' 将允许您根据需要选择单个元素。

```
var $html = $('<html><head><title>this should be replaced</title></head><body>and the entire document should be available as text</body></html>');
var $title = $html.filter('title');
var $body = $html.filter('text');

var res = $title.html('replace with this');
console.log(res.filter('title').html());
// returns: "replace with this" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T20:04:55.303

严格按照您发布的内容，您可以看到`$html`一个包含两个整体的 Object 数组。如果你运行`var res = $html[1]; console.log(res.textContent);`，你可以获得正文的文本。但不确定这是否是您所追求的？

# node.js - npm ERR cb() 从未调用

> ID：15393821
> 
> 赞同：401
> 
> 时间：2013-03-13T18:44:28.713
> 
> 标签：node.js, heroku, npm

我有一个托管在 Heroku 上的 Node.js 应用程序。每次我做一个`git push heroku`我得到以下错误：

```
Counting objects: 14, done.
Delta compression using up to 6 threads.
Compressing objects: 100% (12/12), done.
Writing objects: 100% (12/12), 1.20 KiB, done.
Total 12 (delta 8), reused 0 (delta 0)

-----> Node.js app detected
-----> Resolving engine versions
       Using Node.js version: 0.6.20
       Using npm version: 1.2.12
-----> Fetching Node.js binaries
-----> Vendoring node into slug
-----> Installing dependencies with npm
       npm http GET https://registry.npmjs.org/pg/0.6.15
       npm http GET https://registry.npmjs.org/socket.io
       npm http 200 https://registry.npmjs.org/pg/0.6.15
       npm http GET https://registry.npmjs.org/pg/-/pg-0.6.15.tgz
       npm http 200 https://registry.npmjs.org/socket.io
       npm http GET https://registry.npmjs.org/socket.io/-/socket.io-0.9.13.tgz
       npm http 200 https://registry.npmjs.org/pg/-/pg-0.6.15.tgz
       npm http 200 https://registry.npmjs.org/socket.io/-/socket.io-0.9.13.tgz
       npm http GET https://registry.npmjs.org/socket.io-client/0.9.11
       npm http GET https://registry.npmjs.org/policyfile/0.0.4
       npm http GET https://registry.npmjs.org/base64id/0.1.0
       npm http GET https://registry.npmjs.org/redis/0.7.3
       npm http GET https://registry.npmjs.org/generic-pool/1.0.9
       npm http 200 https://registry.npmjs.org/policyfile/0.0.4
       npm http GET https://registry.npmjs.org/policyfile/-/policyfile-0.0.4.tgz

       npm http 200 https://registry.npmjs.org/base64id/0.1.0
       npm http GET https://registry.npmjs.org/base64id/-/base64id-0.1.0.tgz
       npm http 200 https://registry.npmjs.org/generic-pool/1.0.9
       npm http GET https://registry.npmjs.org/generic-pool/-/generic-pool-1.0.9
.tgz
       npm http 200 https://registry.npmjs.org/socket.io-client/0.9.11
       npm http GET https://registry.npmjs.org/socket.io-client/-/socket.io-clie
nt-0.9.11.tgz
       npm http 200 https://registry.npmjs.org/redis/0.7.3
       npm http GET https://registry.npmjs.org/redis/-/redis-0.7.3.tgz
       npm http 200 https://registry.npmjs.org/policyfile/-/policyfile-0.0.4.tgz

       npm http 200 https://registry.npmjs.org/base64id/-/base64id-0.1.0.tgz
       npm http 200 https://registry.npmjs.org/generic-pool/-/generic-pool-1.0.9
.tgz
       npm http 200 https://registry.npmjs.org/socket.io-client/-/socket.io-clie
nt-0.9.11.tgz
       npm http 200 https://registry.npmjs.org/redis/-/redis-0.7.3.tgz

       > pg@0.6.15 install /tmp/build_36us8733h7kkr/node_modules/pg
       > node-waf configure build || (exit 0)

       Checking for program g++ or c++          : /usr/bin/g++
       Checking for program cpp                 : /usr/bin/cpp
       Checking for program ar                  : /usr/bin/ar
       Checking for program ranlib              : /usr/bin/ranlib
       Checking for g++                         : ok
       Checking for node path                   : not found
       Checking for node prefix                 : ok /tmp/node-node-nNUw
       Checking for program pg_config           : /usr/bin/pg_config
       'configure' finished successfully (0.058s)
       Waf: Entering directory `/tmp/build_36us8733h7kkr/node_modules/pg/build'
       [1/2] cxx: src/binding.cc -> build/Release/src/binding_1.o
       [2/2] cxx_link: build/Release/src/binding_1.o -> build/Release/binding.no
de
       Waf: Leaving directory `/tmp/build_36us8733h7kkr/node_modules/pg/build'
       'build' finished successfully (0.492s)
       npm http GET https://registry.npmjs.org/uglify-js/1.2.5
       npm http GET https://registry.npmjs.org/ws
       npm http GET https://registry.npmjs.org/xmlhttprequest/1.4.2
       npm http GET https://registry.npmjs.org/active-x-obfuscator/0.0.1
       npm http 200 https://registry.npmjs.org/active-x-obfuscator/0.0.1
       npm http GET https://registry.npmjs.org/active-x-obfuscator/-/active-x-ob
fuscator-0.0.1.tgz
       npm http 200 https://registry.npmjs.org/uglify-js/1.2.5
       npm http GET https://registry.npmjs.org/uglify-js/-/uglify-js-1.2.5.tgz
       npm http 200 https://registry.npmjs.org/xmlhttprequest/1.4.2
       npm http GET https://registry.npmjs.org/xmlhttprequest/-/xmlhttprequest-1
.4.2.tgz
       npm http 200 https://registry.npmjs.org/ws
       npm http GET https://registry.npmjs.org/ws/-/ws-0.4.25.tgz
       npm http 200 https://registry.npmjs.org/active-x-obfuscator/-/active-x-ob
fuscator-0.0.1.tgz
       npm http 200 https://registry.npmjs.org/uglify-js/-/uglify-js-1.2.5.tgz
       npm http 200 https://registry.npmjs.org/xmlhttprequest/-/xmlhttprequest-1
.4.2.tgz
       npm http 200 https://registry.npmjs.org/ws/-/ws-0.4.25.tgz
       npm http GET https://registry.npmjs.org/zeparser/0.0.5
       npm http GET https://registry.npmjs.org/commander
       npm http GET https://registry.npmjs.org/tinycolor
       npm http GET https://registry.npmjs.org/options
       npm http 200 https://registry.npmjs.org/zeparser/0.0.5
       npm http GET https://registry.npmjs.org/zeparser/-/zeparser-0.0.5.tgz
       npm http 200 https://registry.npmjs.org/options
       npm http GET https://registry.npmjs.org/options/-/options-0.0.3.tgz
       npm http 200 https://registry.npmjs.org/tinycolor
       npm http GET https://registry.npmjs.org/tinycolor/-/tinycolor-0.0.1.tgz
       npm http 200 https://registry.npmjs.org/commander
       npm http GET https://registry.npmjs.org/commander/-/commander-0.6.1.tgz
       npm http 200 https://registry.npmjs.org/zeparser/-/zeparser-0.0.5.tgz
       npm http 200 https://registry.npmjs.org/options/-/options-0.0.3.tgz
       npm http 200 https://registry.npmjs.org/tinycolor/-/tinycolor-0.0.1.tgz
       npm http 200 https://registry.npmjs.org/commander/-/commander-0.6.1.tgz

       > ws@0.4.25 install /tmp/build_36us8733h7kkr/node_modules/socket.io/node_
modules/socket.io-client/node_modules/ws
       > (node-gyp rebuild 2> builderror.log) || (exit 0)

       make: Entering directory `/tmp/build_36us8733h7kkr/node_modules/socket.io
/node_modules/socket.io-client/node_modules/ws/build'
         CXX(target) Release/obj.target/bufferutil/src/bufferutil.o
         SOLINK_MODULE(target) Release/obj.target/bufferutil.node
         SOLINK_MODULE(target) Release/obj.target/bufferutil.node: Finished
         COPY Release/bufferutil.node
         CXX(target) Release/obj.target/validation/src/validation.o
         SOLINK_MODULE(target) Release/obj.target/validation.node
         SOLINK_MODULE(target) Release/obj.target/validation.node: Finished
         COPY Release/validation.node
       make: Leaving directory `/tmp/build_36us8733h7kkr/node_modules/socket.io/
node_modules/socket.io-client/node_modules/ws/build'
       npm ERR! cb() never called!
       npm ERR! not ok code undefined
       npm ERR! cb() never called!
       npm ERR! not ok code 1
 !     Failed to install --production dependencies with npm
 !     Heroku push rejected, failed to compile Node.js app

To git@heroku.com:still-chamber-1286.git
 ! [remote rejected] master -> master (pre-receive hook declined)
error: failed to push some refs to 'git@heroku.com:still-chamber-1286.git' 
```

错误在最后几行：

```
npm ERR! cb() never called!
           npm ERR! not ok code undefined
           npm ERR! cb() never called!
           npm ERR! not ok code 1
     !     Failed to install --production dependencies with npm
     !     Heroku push rejected, failed to compile Node.js app

    To git@heroku.com:still-chamber-1286.git
     ! [remote rejected] master -> master (pre-receive hook declined)
    error: failed to push some refs to 'git@heroku.com:still-chamber-1286.git' 
```

我之前将代码推送到 Heroku 没有任何问题；仅从星期一开始，我才出现此错误。

我在网上看到过类似的帖子，其中提到了略有不同的错误，但以前没有见过`! [remote rejected] master -> master (pre-receive hook declined)`。

* * *

## 回答 #1

> 赞同：425
> 
> 时间：2013-03-18T18:11:43.990

如果你有 npm 5 或更高版本，请先试试这个：

```
$ sudo npm cache verify 
```

否则：

```
$ sudo npm cache clean 
```

我的节点和 npm 版本是：

```
$ node -v
v0.10.0

$ npm -v
1.2.14 
```

[https://docs.npmjs.com/cli/cache](https://docs.npmjs.com/cli/cache)

* * *

## 回答 #2

> 赞同：144
> 
> 时间：2013-09-26T18:28:44.963

对于在 2013 年 9 月 29 日左右访问此页面的任何人，Node.js 0.10.19 中有一个已关闭的错误导致此错误。

[https://github.com/isaacs/npm/issues/2907#issuecomment-15215278](https://github.com/isaacs/npm/issues/2907#issuecomment-15215278) [https://github.com/joyent/node/issues/6263#issuecomment-25113849](https://github.com/joyent/node/issues/6263#issuecomment-25113849)

如果你在 Heroku 上，你应该升级到 0.10.20

```
"engines": {
    "node": "0.10.20"
} 
```

* * *

## 回答 #3

> 赞同：70
> 
> 时间：2017-12-19T20:34:52.527

尝试

```
sudo npm cache clean --force 
```

更多信息参考：[https ://reactgo.com/npm-err-cb-never-call/](https://reactgo.com/npm-err-cb-never-called/)

* * *

## 回答 #4

> 赞同：30
> 
> 时间：2015-05-20T10:50:17.233

**重要的！**下面的解决方案现在被认为是不稳定的，你应该使用 Node Version Management 来代替：[Github 上的 Node Version Manager](https://github.com/nvm-sh/nvm/blob/master/README.md)。David Walsh 对 NVM 也有[很好的介绍](https://davidwalsh.name/nvm)。NVM 运行良好，几年来我一直在使用它来管理遗留的 WordPress 项目。

* * *

**请不要使用这个 - 使用 NVM**

我在尝试为 WordPress 安装 Sage 主题时遇到了这个问题。当我`npm install`在主题目录上运行时，它失败了。

查看 中的依赖`package.json`项，我可以看到我为 Node 运行的引擎已过时。命令行运行`node -v`显示我在v0.10.9，最新版本的Sage需要>=0.12.0

所以这是解决方法。这些步骤来自[David Walsh 的博客](http://davidwalsh.name/upgrade-nodejs)

1.  清除你的 npm 缓存：`sudo npm cache clean -f`
2.  安装最新版本的 Node 助手：`sudo npm install -g n`
3.  告诉助手 (n) 安装最新的稳定版本的 Node：`sudo n stable`

然后，您应该会看到进度显示，之后您将获得最新信息。

当我`npm install`这样做后运行时，一切正常，并且我能够运行`gulp`以构建初始`dist`目录。

* * *

## 回答 #5

> 赞同：24
> 
> 时间：2013-03-30T07:09:42.230

您的 中是否有`"npm"`指定`"engines"`的特定版本`package.json`？听起来 NPM v1.2.15[解决了这个问题](https://github.com/isaacs/npm/issues/2907#issuecomment-15215278)（并且 Heroku 已经可用）。我遇到了同样的问题`"1.1.x"`。

* * *

## 回答 #6

> 赞同：24
> 
> 时间：2018-03-06T14:39:42.800

如果你已经更新了 angular cli、npm、node，你就不需要再做任何事情了。只需运行以下命令即可解决问题。此命令还解决了“意外的行尾”问题。

```
npm install --no-package-lock 
```

* * *

## 回答 #7

> 赞同：21
> 
> 时间：2018-10-07T12:45:33.453

*   跑`npm install -g npm`
*   然后运行`npm install`

* * *

## 回答 #8

> 赞同：16
> 
> 时间：2016-12-31T18:56:26.100

更新 NodeJS [https://nodejs.org/en/](https://nodejs.org/en/)修复了我的问题。

运行`npm install -g npm`&`npm cache clean`

* * *

## 回答 #9

> 赞同：13
> 
> 时间：2019-10-10T08:47:47.227

对我来说，上述解决方案都不起作用（重新安装、清除缓存、文件夹等）。

我的问题通过以下方式解决：

```
npm config set registry https://registry.npmjs.org/ 
```

* * *

## 回答 #10

> 赞同：12
> 
> 时间：2016-04-17T17:57:42.787

我在安装时遇到了同样的问题`ionic@beta`。我尝试了以下项目，但它们没有帮助我。

1.  `npm cache clean`
2.  手动删除缓存`%temp%\npm-*`
3.  命令提示符“以管理员身份运行”

我通过安装 node-v5.10.1-x64.msi 解决了这个问题（以前的版本是 node-v5.9.0-x64.msi）并`npm cache clean`在安装之前运行`ionic@beta`

有效！

* * *

## 回答 #11

> 赞同：12
> 
> 时间：2020-04-12T20:17:15.157

更新：这个问题很常见，这是新的修复`npm cache verify`运行，你会很高兴！

* * *

## 回答 #12

> 赞同：9
> 
> 时间：2013-09-25T14:26:58.263

我在使用 NPM 1.3.11 版时遇到了同样的问题，只需通过多次重新运行完全相同的命令来解决它（在我的例子中是“npm update -g”）。每次后续运行时都会针对不同的包弹出错误，并最终成功更新所有内容。

至少对我来说，这似乎是由网络问题（下载损坏）引起的。我还收到有关无效包的错误，我可以通过删除“tmp.tgz”的所有实例来解决该错误。

编辑：（可能不相关，但如果这对任何人都有帮助：我使用的是 Windows，并在收到初始错误后以管理员身份启动了命令提示符）。

* * *

## 回答 #13

> 赞同：9
> 
> 时间：2021-03-25T11:07:20.373

从 NPM 6 开始，您可以进行全新安装。
那是**唯一**对我有用的解决方案。

只需运行以下命令：

```
npm clean-install 
```

**笔记：**

*   `node_modules`如果上述命令失败，您也可以手动删除该文件夹并重试。
*   如果仍然不起作用，则可能是全局缓存已损坏，请尝试运行`npm cache clean --force`，然后进行全新安装。
*   该`clean-install`命令适用于 npm 6 及更高版本。对于旧版本，请考虑检查下面的其他答案。

* * *

## 回答 #14

> 赞同：9
> 
> 时间：2018-09-28T09:27:10.517

[作品] 试试

```
npm config delete https-proxy 
```

它会与代理冲突。

* * *

## 回答 #15

> 赞同：7
> 
> 时间：2019-07-31T09:03:54.130

我遇到了`cb() never called!`错误，这里没有一个答案直接对我有用。我正在运行 Node `v8.11.2`，我不得不手动删除`package-lock.json`文件才能到达任何地方。这样做之后，我`npm cache verify`按照一些答案的建议运行。然后，运行`npm i`产生以下结果：

```
npm notice created a lockfile as package-lock.json. You should commit this file.
npm WARN securities-stub@1.0.0 No description
npm WARN securities-stub@1.0.0 No repository field.

up to date in 5.118s 
```

* * *

## 回答 #16

> 赞同：7
> 
> 时间：2021-03-01T13:41:06.660

截至 2021 年 3 月，新的 NPM 版本修复了其中许多问题。

所以再次调用`npm i -g npm@latest`解决了这个问题（在这之间没有工作）。

* * *

## 回答 #17

> 赞同：6
> 
> 时间：2017-09-07T03:31:06.030

我刚刚全局安装了最新版本的 NPM，它对我有用。我猜清除 npm 缓存是可选的。

```
npm install -g npm 
```

* * *

## 回答 #18

> 赞同：6
> 
> 时间：2021-05-27T18:14:22.267

如果运行后bug仍然存在`npm cache clean --force`，请尝试`npx create-react-app your_app_name`切换到不同的网络后重新运行。由于网络缓慢且不稳定，此错误也可能导致...

* * *

## 回答 #19

> 赞同：6
> 
> 时间：2020-05-14T04:44:20.703

知道这是一个老问题，你们中的许多人已经提供了答案。只是为了分享我对这个错误的经验以及我是如何修复的。

这一切都是在我将 Node 版本升级到 > 12 之后开始的，我确实浏览了所有答案并尝试按照步骤清除`npm`缓存，删除`node_modules`文件夹。他们没有一个能解决我的问题。

在我的情况下，根本原因是代理限制安装。我删除了代理设置以解决问题。

1.  检查您是否有任何代理配置

    ```
    npm config list 
    ```

2.  删除它们

    ```
    npm config delete proxy
    npm config delete http-proxy
    npm config delete https-proxy 
    ```

3.  现在试试

    ```
    npm install 
    ```

* * *

## 回答 #20

> 赞同：6
> 
> 时间：2018-08-24T23:55:46.743

对我来说，在 npm`6.4.0`和 node上`10.9.0`没有一个答案有效。重新安装节点、npm、清理缓存、删除文件夹...

经过一些调试后，我发现我使用`npm link`了我正在开发的两个模块来相互链接。一旦我删除并重新创建了一些链接，我就可以让它再次正常工作。

* * *

## 回答 #21

> 赞同：5
> 
> 时间：2016-11-24T03:32:00.033

`sudo npm cache clean`不适合我。更新到最新版本的节点有帮助。

我有节点 v.5.91 并更新到 v6.9.1

* * *

## 回答 #22

> 赞同：5
> 
> 时间：2021-01-26T13:41:58.893

我的项目中有同样的错误。我正在研究隔离的 Intranet，因此我的解决方案如下：

*   跑`npm clean cache --force`
*   删除 package-lock.json
*   在我的情况下，我必须设置 NPM 代理`.npmrc`

* * *

## 回答 #23

> 赞同：5
> 
> 时间：2019-02-26T00:12:38.553

我建议： **切换到 Yarn！**- [Yarn](https://yarnpkg.com/en/)是一个包管理器，它使用与npm相同的`package.json`文件和文件夹。`node_modules`

使用 npm 我遇到了同样的问题：在 CentOS 6 安装中，我`ERR cb() never called`反复遇到错误，无法找到使 npm*可靠地*完成某些软件包的安装的方法（`webpack`例如）。- 即使在不稳定的网络连接上，Yarn 也能完美运行。

迁移到 Yarn 很容易。大多数子命令是相同的。他们有一个很好的[迁移指南](https://yarnpkg.com/lang/en/docs/migrating-from-npm/)。最后阅读方便的[CLI 命令比较](https://yarnpkg.com/lang/en/docs/migrating-from-npm/#toc-cli-commands-comparison)。

* * *

## 回答 #24

> 赞同：4
> 
> 时间：2021-03-30T18:04:40.280

`Try switching your network`，不知何故切换网络对我有用。

我尝试了其他答案中提到的许多事情，例如：

1.  npm 缓存清理 --force
2.  删除现有的 node_modules，删除 package-lock.json，然后使用 -npm i 重新安装
3.  npm 缓存验证
4.  npm 全新安装

`None of the above worked for me`，可能对你有用。试试你的运气。

* * *

## 回答 #25

> 赞同：4
> 
> 时间：2017-03-28T13:18:59.210

似乎特定的依赖版本可能会导致此问题。例如，gulp-uglifycss 1.0.7 就有这个问题（参见[https://github.com/rezzza/gulp-uglifycss/issues/15](https://github.com/rezzza/gulp-uglifycss/issues/15)）。

如果您允许在您的`packages.json`via`^`或中进行主要或次要版本更新，请在`~`整个文件中删除这些字符并尝试另一个`npm install`. 如果它在那个时候有效，那么在你有乐趣缩小导致问题的包之后你会没事的。

* * *

## 回答 #26

> 赞同：4
> 
> 时间：2019-03-07T09:40:59.863

对于 Ubuntu 用户，下面给出的方法对我有用。

首先，执行此操作：`sudo npm cache verify`

然后转到 Home->.npm 并通过以下方式删除 _cache 文件夹：`sudo rm -rf _cacache/`

去检查一下，也许你找到了解决方案。

* * *

## 回答 #27

> 赞同：4
> 
> 时间：2018-05-14T13:42:56.060

尝试在我的 Windows 笔记本电脑中安装 firebase-tools 时遇到了同样的问题。这就是我解决它的方法。

1.  我下载了卡巴斯基并安装了它。然后我禁用了卡巴斯基安全连接
2.  我打开 cmd 并运行这个命令`npm cache clean --force`
3.  然后我运行这个命令`npm install npm@latest -g`
4.  然后我运行 firebase cli 命令`npm install -g firebase-tools`

* * *

## 回答 #28

> 赞同：4
> 
> 时间：2019-03-26T19:21:11.840

我今天也遇到了同样的问题，因为由于互联网问题，我在中间强制停止了 npm 包下载。

我尝试了各种各样的事情，比如，

1.  运行 sudo `npm cache clean -f`- 没有按预期工作
2.  清理卸载节点并重新安装它 - 这也不起作用

我终于尝试删除包含导致问题的 npm 缓存的文件夹。我运行了以下命令，

```
sudo rm -rf /Users/{user_system_user}/.npm/ 
```

然后我尝试安装被卡住的包，一切都像一个魅力。

PS：`{user_sytem_user}`根据你系统的当前用户进行更换。

* * *

## 回答 #29

> 赞同：3
> 
> 时间：2021-07-02T20:03:58.847

如果您在 IntelliJ idea 等 IDE 中打开代码，请关闭并重试

* * *

## 回答 #30

> 赞同：3
> 
> 时间：2019-04-11T13:48:25.493

就我而言，我无法安装 VueJS 插件，我必须：

更改文件的所有权：

```
sudo chown -R $(whoami) ~/.npm
sudo chown -R $(whoami) /usr/local/lib
sudo chown -R $(whoami) /usr/local/bin 
```

然后确保使用最新的 npm：

```
npm install -g npm@latest 
```

然后安装我的插件，在你的情况下可能你的命令不是。

* * *

## 回答 #31

> 赞同：3
> 
> 时间：2020-08-16T08:35:07.817

对我有用的是：删除 package-lock.json 文件并运行以下命令：

npm 缓存清理 --force

* * *

## 回答 #32

> 赞同：3
> 
> 时间：2018-04-11T18:03:43.863

`npm install`会导致：

```
npm ERR! cb() never called!

npm ERR! This is an error with npm itself. Please report this error at:
npm ERR!     <https://github.com/npm/npm/issues> 
```

就我而言，当我升级到 Node.js 版本时，这个错误开始发生`8.11.1`。以前使用 Node.js 版本`6.12.x`和 NPM 版本`5.8.0`。

除此之外，我的测试脚本找不到 AVA：

```
sh: ava: command not found
npm ERR! Test failed.  See above for more details. 
```

解决方案是将 NPM 降级为`5.7.1`

* * *

## 回答 #33

> 赞同：3
> 
> 时间：2019-02-20T20:20:00.743

对于最近从 6.x 升级到 6.7.0 的任何人。

删除`/Users/{YOUR USERNAME}/.npm`文件夹解决了我的问题`npm install`。

[我还运行了https://npm.community/t/crash-npm-err-cb-never-called/858/93?u=jasonfoglia](https://npm.community/t/crash-npm-err-cb-never-called/858/93?u=jasonfoglia)建议的其中一些命令

```
sudo npm cache clean -f
sudo npm install -g n 
```

但在我删除文件夹之前，我不确定哪个实际有效。因此，如果您遇到此问题并删除修复问题的 .npm 文件夹，请在评论中注明。

* * *

## 回答 #34

> 赞同：2
> 
> 时间：2013-09-27T08:40:20.997

拿起 mdp 离开的地方，问题出在节点 0.10.19 和 npm 1.3.11

[我找到了管理降级以保持NVM](https://github.com/creationix/nvm)顺利进行的最简单方法，[这里](https://www.digitalocean.com/community/articles/how-to-install-node-js-with-nvm-node-version-manager-on-a-vps)有一个关于如何使用它的不错的教程。我使用 NVM 在几分钟内修改了我的服务器环境并正确运行从 0.10.19 降级到 0.10.18。

* * *

## 回答 #35

> 赞同：2
> 
> 时间：2020-12-16T10:30:02.227

`cb() never called...` 是什么帮助我克服了这个错误——**降级**我的 NPM 版本。我有 6.14.9 版，我通过键入以下内容降级到 6.14.6 版：

```
 npm install -g npm@6.14.6 
```

注意：似乎没有任何帮助。我尝试了许多建议的解决方案，包括“npm cache clean”或卸载 NPM 并重新安装。

* * *

## 回答 #36

> 赞同：2
> 
> 时间：2016-10-24T20:29:55.823

将npm`npm install npm@latest -g`更新到最新版本。这解决了我的问题。我确实是`npm cache clean`第一个

* * *

## 回答 #37

> 赞同：2
> 
> 时间：2018-04-06T06:31:24.063

我在我的 Mac 上遇到了同样的问题，我尝试了所有我能找到的方法：升级到最新的 Node，清理缓存，删除 _node_mudules_ 目录，但都没有效果。最后，我认为是 Node 环境的问题，所以我将我的 Node 降级到旧的 LTS 版本 6.14.1，然后问题就消失了。这就是我所做的：

1.  安装NVM（要获得一个全新的独立节点环境，你最好使用NVM来管理你的多个Node环境， 详见[这里）](https://github.com/creationix/nvm#install-script)

    `curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.33.8/install.sh | bash`

2.  安装 Node.js 6.14.1

    `nvm install 6.14.1`

3.  切换到你上面安装的具体Node环境

    `nvm use 6.14.1`

4.  安装 create-react-app

    `npm install -g create-react-app`

5.  创建你的反应应用

    `create-react-app appname`

* * *

## 回答 #38

> 赞同：2
> 
> 时间：2021-01-22T12:57:36.320

再次删除`package-lock.json`并安装所需的软件包为我解决了这个问题。

* * *

## 回答 #39

> 赞同：2
> 
> 时间：2020-06-17T01:39:48.247

我从互联网上尝试了很多东西。只有以下方法对我有用。如果此问题中的每个答案都不起作用，请按以下顺序尝试以下步骤。笔记 ：

*   需要重新启动
*   使用 cmd 执行代码（VSCode 对我不起作用）

1.  删除本地节点模块文件夹
2.  删除本地`package-lock`文件
3.  卸载 node.js
4.  重启
5.  删除文件夹：“ `C:\Users\ YOUR LOGIN NAME \AppData\Roaming\npm`”和“ `C:\Users\ YOUR LOGIN NAME \AppData\Roaming\npm-cache`”
6.  查找下的其他 npm 文件夹`AppData`并将它们也删除。
7.  重启
8.  重新安装 node.js
9.  重启
10.  `npm cache clean --force`
11.  `npm cache verify`
12.  `npm install --force`

* * *

## 回答 #40

> 赞同：1
> 
> 时间：2019-06-18T13:39:13.337

从我的计算机安装本地软件包时，我偶然发现了这个问题。

我已将本地包移动到另一个文件夹。然后当我想更新时，我开始收到此错误。

为了解决这个问题，我从以下文件夹中删除了所有之前创建的符号链接：

```
C:\Users\<USERNAME>\AppData\Roaming\npm\node_modules 
```

在此之后，我可以像以前一样安装软件包！

* * *

## 回答 #41

> 赞同：1
> 
> 时间：2021-08-13T21:13:55.390

我的问题是我的代理设置对于公司网络不正确。具体来说，我的密码没有在 URL 中设置。

* * *

## 回答 #42

> 赞同：1
> 
> 时间：2017-02-16T09:42:18.187

可能有两种可能=>

1.  尝试更新您的节点 js 和 npm。

2.  权限问题=> a。将您的解决方案移动到您各自的用户帐户中的 c 盘 b。需要以管理员身份运行 bash 或 cmd。

希望这能解决您的问题

* * *

## 回答 #43

> 赞同：1
> 
> 时间：2020-11-14T22:37:04.680

**原来我空间不足！** 删除驱动器上的文件允许正常启动和运行。

* * *

## 回答 #44

> 赞同：1
> 
> 时间：2019-07-18T13:46:23.480

运行以下命令解决了我的问题

```
npm install --no-package-lock 
```

* * *

## 回答 #45

> 赞同：1
> 
> 时间：2019-12-26T06:34:31.397

我遇到了同样的问题，我花了几天的时间来解决这个问题。最后，我想通了，这是我的网络问题。

我正在使用脚本使用公司代理。当我打开 pac 文件并从那里获取代理并添加时，它开始工作，我从来没有遇到过同样的问题。

* * *

## 回答 #46

> 赞同：1
> 
> 时间：2021-08-13T17:32:03.233

还没有看到这个答案，所以希望这对某人有所帮助。

如果您尝试设置工作环境并使用存储库管理器（例如 Artifactory）并且收到此错误，请确保您已连接到您的工作 VPN。即使您断开连接并重新连接。

我们遇到了这个问题，只需（重新）连接到 VPN 即可解决问题。

* * *

## 回答 #47

> 赞同：0
> 
> 时间：2013-09-30T20:37:29.613

```
brew uninstall node
cd /usr/local
git checkout f7bbdcc /usr/local/Library/Formula/node.rb
brew install node 
```

查找其他版本，如下所示：

```
brew versions node 
```

* * *

## 回答 #48

> 赞同：0
> 
> 时间：2015-01-27T12:21:50.610

特定配置或节点版本似乎不会出现此问题。我们在重新部署时遇到过几次，怀疑是 npm 服务器导致了这个问题。

重试几次确实最终解决了问题。

* * *

## 回答 #49

> 赞同：0
> 
> 时间：2020-11-21T11:14:31.103

对我来说，帮助关闭了防病毒软件

* * *

## 回答 #50

> 赞同：0
> 
> 时间：2020-11-09T02:20:29.500

就我而言，我是在运行映像`npm install`的 Docker 容器中运行的`node:10.16.0-alpine`。`package.json`问题是直接在 GitHub 中指向一个包触发的：

```
"dependencies": {
    "gulp-sass-inline-svg": "git+https://github.com/chriswburke/gulp-sass-inline-svg.git"
} 
```

切换到安装了 git 的 Docker 映像后，错误消失了。

* * *

## 回答 #51

> 赞同：0
> 
> 时间：2021-04-27T07:16:43.013

我试过了

1.  npm 缓存验证
2.  npm 缓存清理 --force。
3.  npm i -g npm

但没有运气。

但是卸载以前的节点版本并安装最新的节点版本对我有用。

* * *

## 回答 #52

> 赞同：0
> 
> 时间：2021-02-23T05:58:36.870

我正在使用 WSL2 和 ubuntu。我已经将 .npmrc 添加到 home/user 并运行 sudo ，然后我遇到了这个问题。我意识到我必须在 ~ 文件夹 ($home/user) 中创建我的项目。它不起作用，因为我的项目在 /mnt/c 中

* * *

## 回答 #53

> 赞同：0
> 
> 时间：2018-07-16T10:41:15.967

检查系统路径变量中是否有**多个版本**的`npm`命令。

就我而言，我在 Node 安装目录中有一个版本，在安装目录中有一个旧版本`npm globals`（`prefix`在 npm 配置文件中调用）。所以我检查了位置并从 node_modules 中`npm config get prefix`删除了链接和文件夹。`npm`（删除另一个也可能有效，具体取决于 PATH 变量中的顺序。）

* * *

## 回答 #54

> 赞同：0
> 
> 时间：2019-04-22T02:22:31.377

对于 mac 用户（HighSierra），不要使用 brew 安装节点。它会与 npm 混淆。我必须卸载节点并使用主 nodejs.org 源中的包进行安装：[https ://nodejs.org/en/](https://nodejs.org/en/)

这是一个不使用 brew 的简单指南：[https ://coolestguidesontheplanet.com/installing-node-js-on-macos/](https://coolestguidesontheplanet.com/installing-node-js-on-macos/)

* * *

## 回答 #55

> 赞同：0
> 
> 时间：2021-01-17T10:09:57.690

Windows WSL、Ubuntu、npm install 返回错误。我的解决方案：

```
sudo npm install 
```

不知道为什么我必须使用 sudo。清理缓存等其他解决方案对我不起作用。

* * *

## 回答 #56

> 赞同：0
> 
> 时间：2021-05-19T11:35:49.347

对我来说，在删除 package-lock.json 并运行命令清理缓存后出现问题，我能够运行 npm -i 成功。

* * *

## 回答 #57

> 赞同：0
> 
> 时间：2021-06-26T14:45:04.543

我安装了一个生成`.npmrc`文件的软件`Users/<name>/.npmrc`

删除该`.npmrc`文件为我解决了这个问题。

# ruby-on-rails - 没有用户模型的rails中的会话管理

> ID：15393825
> 
> 赞同：1
> 
> 时间：2013-03-13T18:44:40.583
> 
> 标签：ruby-on-rails, authentication

我有一个 Rails 应用程序，它依赖于验证输入到外部 Web 服务的用户名/密码。Rails 应用程序没有用户模型。当用户输入登录名/密码并发出帖子请求以检查该登录名/密码时。外部应用程序将返回一个 cookie 或令牌，可用于从 rails 应用程序发出的后续请求。

rails 应用程序中没有用户模型，因为所有用户都存储在外部应用程序中。

有没有让我严格进行会话管理的宝石？我计划将该令牌存储在会话中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T18:54:09.540

为什么不创建一个将令牌保存到会话中的会话控制器呢？我认为不需要宝石。

就像是

```
sessions[:token] = token 
```

如果您正在处理像 facebook 这样过期的令牌，您可以看看这个

[http://developers.facebook.com/blog/post/2011/05/13/how-to--handle-expired-access-tokens/](http://developers.facebook.com/blog/post/2011/05/13/how-to--handle-expired-access-tokens/)

希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T19:01:15.667

我可能会看看 Michael Hartl 在他的 Rails 教程中进行用户会话的方式。你想要的是稍微不同的东西，但你也许可以重用他在那里所做的一些事情。[http://ruby.railstutorial.org/chapters/sign-in-sign-out#sec-current_user](http://ruby.railstutorial.org/chapters/sign-in-sign-out#sec-current_user)

（这也是一个很好的教程，无论你的 Rails 经验水平如何。）

# sql - 避免 SQL 查询中的重复行

> ID：15393833
> 
> 赞同：7
> 
> 时间：2013-03-13T18:45:07.507
> 
> 标签：sql, sql-server-2008, tsql

我在 SQL Server 2008 上使用以下 SQL 查询从表`products`中选择行。`categories`

```
SELECT products.idProduct,  sku, description, listPrice, 
   smallImageUrl, isBundleMain, rental, visits 
FROM products, categories_products 
WHERE products.idProduct = categories_products.idProduct 
AND categories_products.idCategory = "& pIdCategory&" 
AND listHidden=0 
AND active=-1 
AND idStore = " &pIdStore& "
ORDER BY description 
```

问题是有些行是重复的。这些重复项通常由`products.idProduct`列确定，因此我想更改查询以使相同的查询`products.idProduct`不会出现两次，例如，其中一行具有`products.idProduct = 3438`，另一行具有相同的产品 ID，并且仅`products.idProduct`显示其中一个

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-13T18:47:45.100

你需要使用不同的。试试下面

```
SELECT distinct 
  products.idProduct, sku, description, listPrice, smallImageUrl, 
  isBundleMain, rental, visits 
FROM products, categories_products 
WHERE products.idProduct=categories_products.idProduct 
  AND categories_products.idCategory="& pIdCategory&" 
  AND listHidden=0 AND active=-1 
  AND idStore=" &pIdStore& "  
ORDER BY description 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T18:49:35.390

> `DISTINCT`如下图使用：

```
SELECT DISTINCT products.idProduct, 
       sku, description, listPrice, 
       smallImageUrl, isBundleMain, rental, visits 
FROM products, categories_products 
WHERE products.idProduct = categories_products.idProduct 
AND categories_products.idCategory = "& pIdCategory&" 
AND listHidden = 0 AND active = -1 
AND idStore =" &pIdStore& "  
ORDER BY description 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-13T18:51:05.067

在字段的选择查询中使用 DISTINCT。

# java - 当android通过意图传递对象时，它是按值还是按引用值完成

> ID：15393837
> 
> 赞同：1
> 
> 时间：2013-03-13T18:45:14.560
> 
> 标签：java, android, oop, object

通常在 java 中，对象是通过它们的引用值传递的。因此，如果我`OBJ`在 address有对象，`addr`则该对象由 address 的值传递`addr`。但是最近我在 Stack Overflow 上读到（[如何将位图对象从一个活动传递到另一个活动](https://stackoverflow.com/questions/2459524/how-can-i-pass-a-bitmap-object-from-one-activity-to-another)），通过意图传递位图是昂贵的。这是部分引用：

> 如果位图作为文件或资源存在，最好传递位图的 URI 或 ResourceID，而不是位图本身。传递整个位图需要大量内存。

那么为什么位图对象没有被它的引用值传递呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T18:57:06.283

因为意图的目标可能不在同一个应用程序中。您不能将引用从一个应用程序传递到另一个应用程序，因为它们不共享内存。您可以通过序列化来解决这个问题，但这在两端都需要大量时间和内存。Intent 的接口是在考虑到这一点的情况下编写的，因此它不允许将对象添加到 Bundle 中，除了某些实现可序列化的简单类型或对象（Bitmap 可能，但通过 Intent 传递它会占用那么大的内存/时间使用）。

# c - 如何使用 msgpack-c 正确解压和提取数据？

> ID：15393838
> 
> 赞同：9
> 
> 时间：2013-03-13T18:45:15.273
> 
> 标签：c, serialization, deserialization, msgpack

我目前正在尝试在用 C 编写的项目中使用 msgpack。我正在使用 msgpack 来序列化结构的内容，然后将其通过网络发送，并反序列化回相应的结构另一边。

我正在尝试做的精简版：

```
#include <stdio.h>
#include <msgpack.h>
#include <stdbool.h>

typedef someStruct{
uint32_t a;
uint32_t b;
float    c;
} someStruct;

int main (void){
    someStruct data;
    /* ... Fill 'data' with some data for test purposes ...*/

    msgpack_sbuffer* buff = msgpack_sbuffer_new();
    msgpack_packer* pck = msgpack_packer_new(buff, msgpack_sbuffer_write);        

    someStruct* structs = malloc(sizeof(someStruct) * 10);

    /* ... Fill 'structs' with members containing test data ... */
    // Serialize
    msgpack_pack_array (pck, 10);

    int i;
    for(i = 0 ; i < 10 ; i++){
    msgpack_pack_array (pck, 3);
    msgpack_pack_uint32 (pck, structs[i].a);
    msgpack_pack_uint32 (pck, structs[i].b);
    msgpack_pack_float (pck, structs[i].c);
    }

    free(structs);
    msgpack_packer_free(pck);

    // Deserialize
    msgpack_unpacked msg;
    msgpack_unpacked_init(&msg);
    bool deserialize_success = msgpack_unpack_next
                               (&msg, buff->data, buff->size, NULL);
    if(!deserialize_success) /* Error */

    msgpack_object obj = msg.data;
    msgpack_object_print(stdout,obj); // This seems to work perfectly, indicating serialize / deserialize works as intended...

    someStruct deserialized_data;
    /* Insert code to extract and cast deserialized data to 'deserialized_data */
    // Clean
    msgpack_sbuffer_free(buff);
    msgpack_packer_free(pck);

return 0;
} 
```

列出的代码或多或少直接来自[这里](http://wiki.msgpack.org/display/MSGPACK/QuickStart+for+C+Language)，这似乎是 msgpack-c 上为数不多的资源之一。

谁能指出我正确的方向，以“重新创建”电线另一侧的原始结构？我发现实际利用反序列化数据的唯一方法是使用 msgpack_object_print() 调用从 messagepack_object 打印。但是，这确实有效，因此我确定数据在那里。

我是否需要以某种方式遍历序列化数据并使用带有偏移量的 msgpack_unpack_next() 来检索每个 someStruct 成员？使用 memcpy 到本地字节缓冲区？

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-14T09:45:33.613

请在下面找到说明如何打包/解包数据的重写版本。

整个想法是以连续的方式打包结构的每个连续字段，并在解包时应用（当然）相同的逻辑。

打包后，您可以随意使用缓冲区（例如通过网络发送、保存在磁盘上等）。

```
#include <stdio.h>
#include <assert.h>
#include <msgpack.h>

typedef struct some_struct {
  uint32_t a;
  uint32_t b;
  float c;
} some_struct;

static char *pack(const some_struct *s, int num, int *size);
static some_struct *unpack(const void *ptr, int size, int *num);

/* Fixtures */
some_struct ary[] = {
  { 1234, 5678, 3.14f },
  { 4321, 8765, 4.13f },
  { 2143, 6587, 1.34f }
};

int main(void) {
  /** PACK */
  int size;
  char *buf = pack(ary, sizeof(ary)/sizeof(ary[0]), &size);
  printf("pack %zd struct(s): %d byte(s)\n", sizeof(ary)/sizeof(ary[0]), size);

  /** UNPACK */
  int num;
  some_struct *s = unpack(buf, size, &num);
  printf("unpack: %d struct(s)\n", num);

  /** CHECK */
  assert(num == (int) sizeof(ary)/sizeof(ary[0]));
  for (int i = 0; i < num; i++) {
    assert(s[i].a == ary[i].a);
    assert(s[i].b == ary[i].b);
    assert(s[i].c == ary[i].c);
  }
  printf("check ok. Exiting...\n");

  free(buf);
  free(s);

  return 0;
}

static char *pack(const some_struct *s, int num, int *size) {
  assert(num > 0);
  char *buf = NULL;
  msgpack_sbuffer sbuf;
  msgpack_sbuffer_init(&sbuf);
  msgpack_packer pck;
  msgpack_packer_init(&pck, &sbuf, msgpack_sbuffer_write);
  /* The array will store `num` contiguous blocks made of a, b, c attributes */
  msgpack_pack_array(&pck, 3 * num);
  for (int i = 0; i < num; ++i) {
    msgpack_pack_uint32(&pck, s[i].a);
    msgpack_pack_uint32(&pck, s[i].b);
    msgpack_pack_float(&pck, s[i].c);
  }
  *size = sbuf.size;
  buf = malloc(sbuf.size);
  memcpy(buf, sbuf.data, sbuf.size);
  msgpack_sbuffer_destroy(&sbuf);
  return buf;
}

static some_struct *unpack(const void *ptr, int size, int *num) {
  some_struct *s = NULL;
  msgpack_unpacked msg;
  msgpack_unpacked_init(&msg);
  if (msgpack_unpack_next(&msg, ptr, size, NULL)) {
    msgpack_object root = msg.data;
    if (root.type == MSGPACK_OBJECT_ARRAY) {
      assert(root.via.array.size % 3 == 0);
      *num = root.via.array.size / 3;
      s = malloc(root.via.array.size*sizeof(*s));
      for (int i = 0, j = 0; i < root.via.array.size; i += 3, j++) {
        s[j].a = root.via.array.ptr[i].via.u64;
        s[j].b = root.via.array.ptr[i + 1].via.u64;
        s[j].c = root.via.array.ptr[i + 2].via.dec;
      }
    }
  }
  msgpack_unpacked_destroy(&msg);
  return s;
} 
```

# jquery - jquery无限滚动返回重复的行

> ID：15393845
> 
> 赞同：0
> 
> 时间：2013-03-13T18:45:45.383
> 
> 标签：jquery, asp.net

我正在使用 Jquery Infinite 向下滚动，一切都很好，但是如果您不断向下滚动，它会返回重复的行。我想我需要一些延迟或者你有什么建议吗？

这是jquery代码...

```
function sendData() {
                //*****************************************
                // THIS RETURNS THE LAST ID OF DIV*********
                // ****************************************
                counter = $("div.div_product_id:last").attr('id'); 
                $.ajax({
                        type: "POST",
                        url: "insaat.aspx/GetData",
                        data: "{'number_of_rows':'" + counter + "','cat':'" + _cat + "'}",
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        async: "true",
                        cache: "false",
                        success: function (msg) {
                            $("#myDiv").append(msg.d);
                        }
                    });
            } 
```

如何防止返回重复行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T18:58:03.617

请输入您正在使用的插件的 URL。

# ios - 动态缩进 UITextView 的第一行

> ID：15393851
> 
> 赞同：2
> 
> 时间：2013-03-13T18:46:06.480
> 
> 标签：ios, uitextview

我在原型 UITableView 单元格中有一个 UITextView。我想动态缩进 UITextView 的第一行，以便为按钮腾出空间，该按钮将根据单元格行具有可变宽度。该按钮的宽度会有所不同，因为它的标题将包含活动提要中的用户名。

想想 Instagram 或任何具有左侧可点击用户名和紧随其后的文本的提要的应用程序。

我已经能够通过计算按钮标题中的字符数来接近，并用一系列 @"" 空格填充我的 UITextView 的文本。这类似于其他 SO 帖子的建议。

这对我来说是不准确的，因为空格的宽度与按钮标题的宽度不完全匹配，因为不同的字符具有不同的宽度。

有谁知道是否可以通过特定的浮点值缩进 UITextView？我已经能够将按钮标题的宽度转换为浮点数，我相信这会解决我的问题。

# titanium - 如何在 Appcelerator Titanium 中更改按钮状态

> ID：15393854
> 
> 赞同：0
> 
> 时间：2013-03-13T18:46:16.987
> 
> 标签：titanium, appcelerator, titanium-mobile

我有一系列按钮。

每个按钮有 2 种不同的状态：第一种状态，第二种状态。每次单击时，按钮会变为交替状态。

在一个场景中，如果我点击 Button1，它将处于第二状态。然后我点击 Button2，Button2 将变为第二状态，而 Button1（或任何其他处于第二状态的按钮）返回到第一状态。

如何在 Appcelerator Titanium 中执行此操作？

我已经创建了这样的按钮

```
function createButtons(data){

    for (var i = 0; i < data.length; i++){
        //Creating each button
        var button  = Titanium.UI.createImageView({
            image:  data[i].path,
            value: 1
        });

        //Adding the buttons to the center view
        centerButtons.add(button);
    }
} 
```

每次单击时，我都会`value`将按钮的值更改为 1 或 2，以识别按钮所处的状态。问题是，当我单击 Button1 时，我可以更改它的值，但我不知道如何检测哪些**其他**按钮已经处于第二状态，以便我可以将其重置为第一状态？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T05:46:53.353

以下示例代码将简单地完成您的工作。这里我使用了按钮而不是 imageView。您可以使用它更改您的代码。

```
var win = Ti.UI.createWindow({
    backgroundColor : 'white'
});
var currentView = Ti.UI.createView({
    backgroundColor : '#EFEFEF'
});
var button = [],top = 0;
for (var i = 0; i < 5; i++){
    top += 80;
    //Creating each button
    button[i]  = Titanium.UI.createButton({
        color : 'red',
        top   : top,
        width : '80%',
        value : 1
    });
    button[i].title  = 'State ' + button[i].value;
    button[i].addEventListener('click',changeState);
    //Adding the buttons to the center view
    currentView.add(button[i]);
}

var buttonState  = Titanium.UI.createButton({
    color  : 'red',
    top    : top + 80,
    title  : 'View button states',
    width : '80%',
});

var lblStates  = Titanium.UI.createLabel({
    color  : 'red',
    layout: 'horizontal',
    top    : top + 160,
    text  : 'Click on show button to view the button states',
    width : '80%',
});

buttonState.addEventListener('click', showButtonStates);
currentView.add(lblStates);
currentView.add(buttonState);
win.add(currentView);
win.open();
//Changing the state of the clicked button
function changeState(e){
    e.source.value= 2;
    e.source.title  = 'State ' + e.source.value; 
    for(var i = 0;i<5;i++){
        if(e.source !== button[i]){
            button[i].value = 1;
            button[i].title  = 'State ' + button[i].value; 
        }
    }    
}
//To display the button state
function showButtonStates(){
    lblStates.text = "";
    for(var i =0;i<5;i++){
        lblStates.text = lblStates.text + '\nbutton' + (i+1) + ' ---> state: ' + button[i].value; 
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T19:00:01.183

*   每当单击某些内容时，将所有按钮重置为原始状态，然后为新按钮设置新状态...
*   ...或跟踪上次更改的按钮（变量？！那些是什么？），并在为新按钮设置新状态之前将其还原。

# iphone - 以编程方式在 UITextField 中设置文本不会从占位符的灰色更改颜色

> ID：15393862
> 
> 赞同：0
> 
> 时间：2013-03-13T18:46:48.900
> 
> 标签：iphone, ios, ipad

在过去的一个小时里，这一直让我很烦。我有一个带有自定义单元格行的 UITableView。没什么特别的，只是一个用于标签的 UITextField 和一个用于编辑的 UITextField。但是，有一行禁用了第二个 UITextField 的编辑和一个附件，因为按下它会弹出一个日期选择器。该单元格中的第二个 UITextField 有一个占位符集，上面写着“选择日期”。当用户从选择器中选择日期时，该文本字段会更新。更新有效，但文本颜色与占位符文本的灰色相同。

代码：

```
 if(selectedDate == nil)
                    cell.cellTextField.placeholder = @"Select date";
                else
                {
                    cell.cellTextField.text = selectedDate;
                } 
```

我不知道如何让 UITextField 的颜色变为黑色。如果您将该行滚动到视图底部下方并将其带回，则它是黑色的。

我尝试将 UIColor 设置为黑色。不好，也没有必要，因为滚动后颜色是正确的。

我也试过 setNeedsDisplay。那也没有用。

我从文档中尝试的所有内容都不起作用，但我无法弄清楚为什么 iOS 将 .text 的颜色设置为与 .placeholder 相同的颜色

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T18:56:39.907

您对滚动屏幕然后重新打开的描述意味着以下可能有效：

尝试：

```
[tableView reloadData]; 
```

在您更新了 tableView 单元格中的文本之后（大概是在选择器通知您选择之后）。

# dart - Dart JS Interop - 如何传递函数的回调对象

> ID：15393866
> 
> 赞同：1
> 
> 时间：2013-03-13T18:47:01.300
> 
> 标签：dart

我将 Pase.com 与 js SDK 一起用于我的 Dart 应用程序的后端。除了 parse sdk 接受回调函数的对象之外，这很好用。在飞镖中我不确定如何做到这一点，我可以让单个回调正常工作。但我在这里完全迷失了。

用于注册用户的 Normal Parse JS

```
var user = new Parse.User();
  user.set("username", "my name");
  user.set("password", "my pass");
  user.set("email", "email@example.com");

  // other fields can be set just like with Parse.Object
  user.set("phone", "415-392-0202");

  user.signUp(null, {
    success: function(user) {
      // Hooray! Let them use the app now.
    },
    error: function(user, error) {
      // Show the error message somewhere and let the user try again.
      alert("Error: " + error.code + " " + error.message);
    }
  }); 
```

我的飞镖代码

```
void registerSuccess(user) {
    print("success");
  }

  void registerFailed(user, error){
    print("fail");
  }

  void register(String email, String password)
  {
    js.scoped(() {

      var parse = js.context.Parse;

      var parseUser = new js.Proxy(parse.User);

      parseUser.set("username", "my name");
      parseUser.set("password", "my pass");
      parseUser.set("email", "email@example.com");

      print(parseUser.getEmail());

      var callbackSuccess = new js.Callback.once(() => registerSuccess());
      var callbackFailed = new js.Callback.once(() => registerFailed());

      parseUser.signUp(null,{"success":callbackSuccess, "error": callbackFailed});

      //parseUser.signUp();
    });
  } 
```

回调函数也需要接受从 js 传回的变量。

任何帮助将不胜感激，我已经为此旋转了 2 天。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T22:42:23.970

代替 ：

```
var callbackSuccess = new js.Callback.once(() => registerSuccess());
var callbackFailed = new js.Callback.once(() => registerFailed());
parseUser.signUp(null,{"success":callbackSuccess, "error": callbackFailed}); 
```

利用 ：

```
var callbackSuccess = new js.Callback.once(registerSuccess);
var callbackFailed = new js.Callback.once(registerFailed);
parseUser.signUp(null, js.map({"success":callbackSuccess, "error": callbackFailed})); 
```

# jquery - HTML 下拉菜单不需要的间距

> ID：15393869
> 
> 赞同：0
> 
> 时间：2013-03-13T18:47:03.093
> 
> 标签：jquery, html, css

我正在使用 CSS3/HTML 和 jQuery 设计我自己的下拉菜单。虽然我遇到了一些问题，但我似乎无法弄清楚我为什么会遇到问题。

[http://johns-webdesign.com/portfolioV2/](http://johns-webdesign.com/portfolioV2/)

如您所见，当您将鼠标悬停在“投资组合”上时，右侧有一个很大的差距，它将所有内容都推倒了。我似乎无法弄清楚为什么会这样。

jQuery代码：

```
<script type="text/javascript">
  $(document).ready(function(){

   $(".nav_link_port").mouseover(function(){$(".nav_link_temp").fadeIn('slow')});
   $(".nav_link_temp").mouseout(function(){$(".nav_link_temp").fadeIn('slow')});
   $(".nav_link_temp").mouseout(function(){$(".nav_link_temp").fadeOut('slow')});      
  });
</script> 
```

HTML 代码：

```
<div id="nav">
        <a href="#" class="nav_link">Home</a> 
        <a href="#" class="nav_link">About</a> 
        <a href="#" class="nav_link_port">Portfolio</a> 
        <a href="#" class="nav_link_temp">Templates</a> 
        <a href="#" class="nav_link">Contact</a>
</div> 
```

CSS：

```
.nav_link {
    display: block;
    float:left;
    font-family: 'Open Sans';
    font-size: 16px;
    text-transform: uppercase;
    background-color: #f7a70e;
    color: #fff;
    margin-right:5px;
    text-decoration:none;
    padding:15px;
    position:relative;
    z-index:100;
        -webkit-transition: background 0.15s linear;
        -moz-transition: background 0.15s linear;
        -ms-transition: background 0.51s linear;
        -o-transition: background 0.15s linear;
        transition: background 0.15s linear;
}
.nav_link_port {
    display: block;
    float:left;
    font-family: 'Open Sans';
    font-size: 16px;
    text-transform: uppercase;
    background-color: #f7a70e;
    color: #fff;
    margin-right:5px;
    text-decoration:none;
    padding:15px;
    position:relative;
    z-index:101;
        -webkit-transition: background 0.15s linear;
        -moz-transition: background 0.15s linear;
        -ms-transition: background 0.51s linear;
        -o-transition: background 0.15s linear;
        transition: background 0.15s linear;

}
.nav_link_temp {
    display:none;
    float:left;
    font-family: 'Open Sans';
    font-size: 16px;
    text-transform: uppercase;
    background-color: #f7a70e;
    color: #fff;
    margin-right:5px;
    text-decoration:none;
    padding:15px;
    position:relative;
    z-index:102;
    top:52px;
    left:-120px;
        -webkit-transition: background 0.15s linear;
        -moz-transition: background 0.15s linear;
        -ms-transition: background 0.51s linear;
        -o-transition: background 0.15s linear;
        transition: background 0.15s linear;    
}
.nav_link:hover {
    background-color: #4f69a3;
}
.nav_link_port:hover,.nav_link_temp:hover  {
    background-color: #4f69a3;
} 
```

我知道我的 css 很乱，我可以修复它，这只是一些快速代码来测试我的导航

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T19:12:59.087

```
.nav_link_temp {
    display:none;
 //   float:left; 
```

删除这一行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T19:15:16.977

除非您提供有关该项目的更多背景信息（您只是为了好玩而自学吗？），否则我会说，为什么要重新发明轮子？

[http://twitter.github.com/bootstrap/components.html#navs](http://twitter.github.com/bootstrap/components.html#navs)

使用 Twitter 的 Bootstrap，弹出所需的组件，您将在比将问题发布到 SO！

[根据评论更新]

[http://jsfiddle.net/jgaAg/](http://jsfiddle.net/jgaAg/)

```
<ul id="navbar">
    <li><a href="#">Home</a></li>
    <li><a href="#">About</a></li>
    <li><a href="#">Portfolio</a>
        <ul>
            <li><a href="#">Templates</a>
            </li>
            <li><a href="#">Second Subitem</a>
            </li>
            <li><a href="#">Numero Tres</a>
            </li>
        </ul>
    </li>
    <li><a href="#">Contact</a>
    </li>
</ul> 
```

我为你把这个小提琴放在一起。相当干净和简单。希望它为您指明正确的方向！:)

# html - 为什么跨度不在此 div 中居中？

> ID：15393870
> 
> 赞同：0
> 
> 时间：2013-03-13T18:47:06.870
> 
> 标签：html, css

我在一个跨度内有 2 个跨度彼此相邻，类 inside_span 向上和 inside_span 向下，它们与 pulse_result_format 跨度的左侧对齐，我尝试了 margin: 0 auto 在脉冲结果格式跨度上，不起作用，并且显示：内联块；

HTML：

```
<div class="pulse_votes_container thumb1">
    <span class="pulse_vote_buttons">
    </span>
    <span class="pulse_result_format">
        <span class='inside_span up'>{up}</span>
        <span class='inside_span down'>{down}</span>
    </span>
</div> 
```

CSS：

```
.inside_span {

    display: inline-block;
    width:40%;
    border-radius: 3px 3px 3px 3px;
    margin: 10% auto 0px 0px;
    float:left;
}

.down {

    background-color:#FF6E25;
}

.up {

    background-color: rgb(70, 136, 71);
}

.pulse_result_format {

    display: inline-block;
    float: left;
    width: 100%;
    text-align: center;

    font-weight: bold;
    color: rgb(255, 255, 255);
    text-shadow: 0px -1px 0px rgba(0, 0, 0, 0.25);
    white-space: nowrap;
    vertical-align: baseline;
}

.pulse_votes_container {

    width:100%;
    height:100%;
    display: inline-block;
    text-align: center;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T18:51:58.517

`float:left`从_`.inside_span`

```
.inside_span {
    display: inline-block;
    width:40%;
    border-radius: 3px 3px 3px 3px;
    margin: 10% auto 0px 0px;
} 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/cM49u/)**

# mvvm - 组合框中没有触发 SelectionChanged 事件（WinRT 与 Windows.UI.Interactivity）

> ID：15393873
> 
> 赞同：0
> 
> 时间：2013-03-13T18:47:09.493
> 
> 标签：mvvm, binding, combobox, command, winrt-xaml

我正在使用最近发布的 Windows.UI.Interactivity 库将一些事件连接到 WinRT 应用程序中的 MVVM 命令。它适用于 ListView，但不会在 ComboBox 中触发任何事件。这是一个 ComboBox 控件定义（为清楚起见，跳过了一些属性）：

```
<ComboBox 
    x:Name="collectionMode" 
        Margin="10" 
        SelectedIndex="0">
    <i:Interaction.Triggers>
        <i:EventTrigger EventName="SelectionChanged">
            <i:InvokeCommandAction Command="{Binding CollectionModeCommand}"/>
        </i:EventTrigger>
    </i:Interaction.Triggers>
    <ComboBoxItem Content="Show collection properties" />
    <ComboBoxItem Content="Show collection data" />
</ComboBox> 
```

CollectionModeCommand 永远不会被触发（我在 ListView 中有类似的接线，它工作正常）。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T17:10:44.593

解决。问题在于外部控件的不正确绑定，这当然会导致 CollectionModeCommand 未绑定到 ComboBox。

# linux - 使用 Cron 重启

> ID：15393875
> 
> 赞同：3
> 
> 时间：2013-03-13T18:47:19.850
> 
> 标签：linux, cron, crontab

我正在使用 Raspberry Pi 进行状态显示，但无论出于何种原因，它在运行一天左右后变得异常缓慢，所以我想每天重新启动它，所以我设置了一个 cron 作业，每天早上 8:50 执行此操作. 但是，它似乎不起作用。使用 cron 进行重启有什么特别之处吗？

这是我给`root`用户的 crontab：

```
# m   h  dom mon dow   command
50    8   *   *   *     shutdown now -r >> /var/log/cron.log
0,30  *   *   *   *     date >> /var/log/cron.log 
```

第二行工作得很好，但我似乎无法让重启命令工作。它甚至不向日志输出任何内容。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-13T19:09:24.273

尝试使用完全指定的路径关闭。日期可能在根 cron 环境中的 PATH 中，可能无法查找 /sbin。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-08T13:32:03.343

您需要编辑 root 用户 crontab

```
sudo crontab -e 
```

然后..

```
50 8 * * * reboot 
```

保存并退出。

# php - 我可以替换 php 标签内的占位符吗？

> ID：15393876
> 
> 赞同：0
> 
> 时间：2013-03-13T18:47:22.703
> 
> 标签：php

这是我的 .php 页面代码，它是创建其他个人资料页面的模板。

```
 <?php
    $dj = Helper::getUserProfileInfo('dj','{thedjid}');
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>{username} Home page</title> 
</head>

<body> 
Hello,<br /> 
<img href="<?php echo $dj->getAvatar(); ?>"/><br/>
this is my new home page. Here is my data:<br /><br />
<?php echo 'Dj name: '. $dj->getName();?>
<br /> 
<?php echo 'Contact for booking: '. $dj->getEmail();?> <br /> 

</body>
</html> 
```

当我创建任何新页面时，我想将这个 - {thedjid}（位于页面顶部）替换为一个 ID 号。是的，由于 SEO，我正在尝试为每个用户创建一个新的 php 页面。这样，如果人们在谷歌上搜索，用户就可以出来。就像推特一样，每个人都有一个页面。

我只是觉得可以在模板的php部分替换一个单词，这样每次访问页面时都可以拉出用户信息。请问这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T19:01:59.113

我认为您对模板的处理方式不好。

您必须将处理与渲染分开。如果您不想使用 smarty 之类的模板引擎[http://www.smarty.net/](http://www.smarty.net/)

您可以将模板放在一个普通文件中，如下所示：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>{username} Home page</title> 
</head>

<body> 
Hello,<br /> 
<img href="{avatar}"/><br/>
this is my new home page. Here is my data:<br /><br />
Dj name: {djname}
<br /> 
Contact for booking: {email} <br /> 

</body>
</html> 
```

然后你的php代码就像

```
<?php
$id = //get the value from database, or post or get
$dj = Helper::getUserProfileInfo('dj',$id);
$template = file_get_contents('path/to/template');
$tags = array('{avatar}','{djname}','{email}');
$vals = array($dj->getAvatar(),$dj->getName(),$dj->getEmail());

echo str_replace($tags,$vals,$template); 
```

# c# - 在重新启动应用程序之前，数据绑定组合框不会更新

> ID：15393877
> 
> 赞同：0
> 
> 时间：2013-03-13T18:47:24.747
> 
> 标签：c#, combobox

```
using (SqlConnection con = new SqlConnection(cons))
{
    con.Open();
    using (SqlCommand com = new SqlCommand("INSERT INTO Dealers (DealerId,DealerName) values (NEXT VALUE FOR Dealers_DealerId_SEQ,@dname)", con))
    {
        com.Parameters.AddWithValue("@dname", this.ComboText.Text.ToString());
        com.ExecuteNonQuery();
    }
    con.Close();
} 
```

此代码更新为组合框提供数据的表。在重新启动应用程序之前，它会很好地更新数据库，但不会更新应用程序下拉列表。任何帮助将不胜感激。

```
this.Dealers.DataSource = this.dealersBindingSource; this.Dealers.DisplayMember = "DealerName"; this.Dealers.DropDownStyle = System.Windows.Forms.ComboBoxStyle.DropDownList; this.Dealers.Name = "Dealers"; this.Dealers.Size = new System.Drawing.Size(121, 21); this.Dealers.ValueMember = "DealerName"; 
```

这是与组合框有任何关系的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T18:56:14.800

上面显示的代码只更新数据库。我不知道您的数据源看起来如何，但无论如何您都必须将其重新分配给您的下拉控件。

如果您的数据源是一个，`List<T>`那么要么将新项目与数据库同时添加到列表中，要么从数据库中重新加载列表。如果您将相同的列表重新分配给`DataSource`您之前必须分配`null`给`DataSource`，否则下拉列表不会注意到更改。

您也可以使用`BindingList`. 对 的更改`BindingList`将自动更新下拉菜单。

如果数据源是数据集，则必须重新查询数据集，即必须从数据库中重新读取数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T18:57:33.507

您需要重新加载组合框。

假设您使用此方法填充组合框

```
public void LoadCb()
{
    SqlConnection cn = new SqlConnection("connectionstring");
    SqlDataAdapter da = new SqlDataAdapter("select DealerId, DealterName from Dealers", cn);
    DataTable dt = new DataTable();
    da.Fill(dt);
    comboBox1.DataSource = dt;
    comboBox1.DisplayMember = "DealerName";
    comboBox1.ValueMember = "DealerId";
} 
```

那么您必须在您的经销商表中插入值后调用 LoadCb 方法

# ruby-on-rails - rails 如何做 f.parent.text_field :name

> ID：15393878
> 
> 赞同：0
> 
> 时间：2013-03-13T18:47:33.950
> 
> 标签：ruby-on-rails, ruby-on-rails-3, nested-forms, fields-for

我需要将 journals 和 journal_entries 中的字段放在表的一行中，并且能够在同一个视图中添加和显示许多数据条目行。（即行表并使用带有accepts_nested_attributes 的link_to_add_fields 来扩展表中的行）。

必须有某种**f.parent.text_field 或 f.object.parent.text_field**吗？

我正在尝试执行以下操作

```
<table>
#in a :pm namespace
<%= form_for [:pm, @lease] do |f| %>
  <%= f.fields_for :journal_entries do |journal_entries| %>
    <%= render "journal_entry_fields" , f: journal_entries %>
  <% end %>
  <%= link_to_add_fields "+ Add transactions", f, :journal_entries %>
<% end %>
</table> 
```

_journal_entry_fields.html.erb

```
<fieldset>
  <tr>
    ## HERE IS WHAT I'M LOOKING FOR <<<<<<<<<<<!!>>>>>>>>>>>>>
    <td><%= f.parent.text_field :dated %></td>
    <td><%= f.parent.text_field :account_name %></td>
    <td><%= f.text_field :credit %></td>
    <td><%= f.text_field :notes %></td>        
  </tr>
</fieldset> 
```

我的模特

```
class Lease < ActiveRecord::Base
  has_many :journals, :order => [:dated, :id] #, :conditions => "journals.lease_id = id"
  has_many :journal_entries, :through => :journals  
  accepts_nested_attributes_for :journal_entries , :allow_destroy => true
  accepts_nested_attributes_for :journals ,  :allow_destroy => true    
end

class Journal < ActiveRecord::Base
  belongs_to :lease, :conditions =>  :lease_id != nil   
  has_many :journal_entries
  accepts_nested_attributes_for :journal_entries , :allow_destroy => true
end

class JournalEntry < ActiveRecord::Base
  belongs_to :journal
end 
```

我正在使用 Rails 3.2.12 和 ruby​​ 1.9.3

我试图看看这是否比面临的问题更好的解决方案：[rails link_to_add_fields not added fields with has_many :through (with nested form inside)](https://stackoverflow.com/questions/15381586/rails-link-to-add-fields-not-adding-fields-with-has-many-through-with-nested-f)

我做了一个不同的线程，因为我认为它非常不同。

谢谢，菲尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T20:03:26.770

根据我对您的用例的理解，您希望以单一形式的 Lease 创建期刊及其条目。因此，您可以为它们使用 fields_for ，如下所示：

```
<table>
  #in a :pm namespace
  <%= form_for [:pm, @lease] do |f| %>
    <%= f.fields_for :journals do |journal| %>
      <%= render "journal_entry_fields" , f: journal %>
    <% end %>
  <%= link_to_add_fields "+ Add transactions", f, :journals %>
 <% end %>
</table> 
```

_journal_entry_fields.html.erb

```
<fieldset>
  <tr>
    <td><%= f.text_field :dated %></td>
    <td><%= f.text_field :account_name %></td>
    <%= f.fields_for :journal_entries do |journal_entry| %>
      <td><%= journal_entry.text_field :credit %></td>
      <td><%= journal_entry.text_field :notes %></td>
    <% end %>   
  </tr>
</fieldset> 
```

尽管每次动态添加新记录时都需要初始化日记帐分录。我现在不能帮你解决这个问题，因为我不在我的电脑上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T18:58:27.447

试试这个：[http ://railscasts.com/episodes/196-nested-model-form-revised](http://railscasts.com/episodes/196-nested-model-form-revised)

RailsCasts 模型关系类似于您的模型关系，但您需要更改 HTML。

RailsCasts 模型：`Survey > Question > Answer`

您的型号：`Lease > Journal > JournalEntry`

# mysql - 根据不同表中的值更改 1 个表中的值

> ID：15393880
> 
> 赞同：0
> 
> 时间：2013-03-13T18:47:41.247
> 
> 标签：mysql

我不完全清楚如何提出这个问题，但我想将一个组中的所有人员也设置为一个新组。

我想做这个...

```
mysql> UPDATE  `cla-constituents`.`person_custom` SET  `c3` =  '6' WHERE `person_per`.`per_cls_id` =7; 
```

但我得到“错误 1054（42S22）：'where 子句'中的未知列'person_per.per_cls_id'”

`cla-constituents`是 DB，`person_custom`是表 1，`c3`是目标单元格

`per_cls_id`我想为所有在表格列中有 7 的人更改该单元格`person_per`。相同的数据库。

我希望这是有道理的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T19:02:48.897

您可以使用 LEFT 或 INNER JOIN

```
UPDATE  `cla-constituents`.`person_custom` 
INNER JOIN person_per ON cla-constituents.id = person_per.id
SET  `c3` =  '6' 
WHERE `person_per`.`per_cls_id` =7; 
```

在这里，我加入了一个虚构的专栏。您可以使用正确的。

# java - 正则表达式匹配字符串中至少 2 个数字、2 个任意顺序的字母

> ID：15393882
> 
> 赞同：9
> 
> 时间：2013-03-13T18:47:49.243
> 
> 标签：java, regex

我正在尝试创建一个正则表达式以进行模式匹配（用于密码），其中字符串必须介于 8 到 30 个字符之间，必须至少有 2 个数字，至少 2 个字母（不区分大小写），至少 1 个特殊字符，并且没有空间。

我已经让空格和特殊字符匹配工作了，但是因为它们不需要是连续的，所以我被抛出了 2 个数字和 2 个字母。

即它应该匹配`a1b2c$` or `ab12$`or `1aab2c$`。

像这样的字母？

```
(?=.*[a-zA-Z].*[a-zA-Z])  // Not sure. 
```

下面的这个字符串有效，但只有当 2 个字母是连续的并且 2 个数字是连续的..如果字母、数字、特殊字符交织在一起，它就会失败。

```
(?=^.{8,30}$)((?=.*\\d)(?=.*[A-Za-z]{2})(?=.*[0-9]{2})(?=.*[!@#$%^&*?]{1})(?!.*[\\s]))^.* 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-13T19:03:39.643

如果您不希望字母必须连续`(?=.*[a-zA-Z].*[a-zA-Z])`是正确的方法。同样适用于数字`(?=.*\\d.*\\d)`或`(?=(.*\\d){2})`。

试试这个正则表达式

```
(?=^.{8,30}$)(?=(.*\\d){2})(?=(.*[A-Za-z]){2})(?=.*[!@#$%^&*?])(?!.*[\\s])^.* 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-13T19:01:00.263

你的猜测会非常准确。使用括号可以使它看起来更优雅。

```
(?=(.*[a-zA-Z]){2}) 
```

听起来你在正确的轨道上。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-13T19:04:28.860

使用循环遍历字符串：

```
/**
 * Checks to see if the specified string has between 8 and 30 characters, has at least 2 digits, at least 2 letters, at least one special character, and no spaces.
 * @param s the String to be checked
 * @return s, if it passes the above test
 * @throws IllegalArgumentException if it does not
 */
public static String check(String s)
{
    IllegalArgumentException invalid = new IllegalArgumentException();
    if(s.length() < 8 || s.length() > 30)
        throw invalid;
    int letters = 0, numbers = 0, specialChars = 0;
    for(char c : s.toCharArray())
    {
        if(c == ' ')
            throw invalid;
        else if(Character.isLetter(c))
            ++letters;
        else if(Character.isDigit(c))
            ++numbers;
        else
            ++specialChars;

    }
    if(letters < 2 || numbers < 2 || specialChars < 1)
        throw invalid;
    return s;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T18:58:17.580

我观察到您提供的示例不是 8 到 30 个字符

如果您想要 8-30 个字符，请尝试此模式一次

```
 (?=[^\s]*[^\sa-zA-Z0-9][^\s]*)(?=[^\s]*[a-zA-Z][^\s]*[A-Za-z][^\s]*)(?=[^\s]*\d[^\s]*\d[^\s]*)[^\s]{8,30} 
```

# ant - ant/Jenkins：move 不支持“quiet”属性

> ID：15393890
> 
> 赞同：0
> 
> 时间：2013-03-13T18:48:09.557
> 
> 标签：ant, jenkins, jenkins-plugins

我的构建脚本执行：

```
<move todir="gen" overwrite="true" quiet="true">
        <fileset dir="gen">
            <include name="**/BuildConfig.java.new"/>
        </fileset>
        <globmapper from="*.java.new" to="*.java"/>
</move> 
```

我得到错误：

```
move doesn't support the "quiet" attribute 
```

我的 iMac 上安装了 ant 1.8.4。我在 Jenkins 中的 ant 插件是 1.2。詹金斯版 1.505。我在启动 Jenkins 时尝试更改 PATH，因此它包括我的命令行 ant。但是 Jenkins 似乎不支持 ant 1.8.3？ant 1.8.3 是添加了“move quiet”的版本。

有什么想法可以解决这个问题吗？它与命令行 ant 或插件 ant 或我的构建脚本有关吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T19:00:25.257

假设您在 iMac 上运行 Jenkins，请转到 [http://yourjenkins/configure] 并添加指向 Ant 1.8.4 目录的 Ant 安装。然后，在您的 Jenkins 作业配置的 Ant 构建步骤中，指定 Ant 的版本，一切就应该开始工作了。

如果您的 Jenkins 服务器在另一台机器上，请重复说明，但在 Jenkins 服务器上安装 Ant 1.8.4，或使用“自动安装”选项按需安装 Ant。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T19:49:17.797

我通过以下方式解决了它：

1.  在 Jenkins 设置中，为 ant 设置工具位置 ![在此处输入图像描述](../Images/6af847fcf02a0aee9d94951d37c83f39.png)
2.  现在在我的构建工作中出现了一个新的选择：Ant Version ![在此处输入图像描述](../Images/96c295cb6364671af3636fc4a98ee124.png)

我Mac上的蚂蚁：

```
ant -v
Apache Ant(TM) version 1.8.4 compiled on May 22 2012 
```

# delphi - 如何在delphi FM2中进行增量搜索？

> ID：15393892
> 
> 赞同：1
> 
> 时间：2013-03-13T18:48:13.387
> 
> 标签：delphi, firemonkey

嗨，我在 delphi 中遇到增量搜索问题。

我看过这个[http://delphi.about.com/od/vclusing/a/lb_incremental.htm](http://delphi.about.com/od/vclusing/a/lb_incremental.htm) 但这在firemonkey中不起作用所以我想出了这个：

```
 for I := 0 to lstbxMapList.Items.Count-1 do
  begin
    if lstbxMapList.Items[i] = edtSearch.Text then
    begin
      lstbxMapList.ItemByIndex(i).Visible := True;
    end;

    if lstbxMapList.Items[I] <> edtSearch.Text then
    begin
      lstbxMapList.ItemByIndex(i).Visible := False;
    end;
  end; 
```

当我使用它时，列表框只是空白。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T19:03:26.883

您隐藏了所有不完全匹配的项目`edtSearch.Text`。试试这个（在 XE3 中测试）：

```
// Add StrUtils to your uses clause for `StartsText`
uses
  StrUtils;

procedure TForm1.edtSearchChange(Sender: TObject);
var
  i: Integer;
  NewIndex: Integer;
begin
  NewIndex := -1;
  for i := 0 to lstBxMapList.Items.Count - 1 do
    if StartsText(Edit1.Text, lstBxMapList.Items[i]) then
    begin
      NewIndex := i;
      Break;
    end;
  // Set to matching index if found, or -1 if not
  lstBxMapList.ItemIndex := NewIndex;
end; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T22:01:59.680

根据 Kens 的回答，如果您想根据您的问题隐藏项目，只需设置 Visible 属性，但请注意，由于 if 语句的表达式返回布尔值并且 Visible 是布尔属性，因此可以大大简化事情。另请注意，我还使用了 ContainsText，它将匹配项目文本中任何位置的字符串：

```
procedure TForm1.edtSearchChange(Sender: TObject);
var
  Item: TListBoxItem;
begin
  for Item in lstbxMapList.ListItems do
    Item.Visible := ContainsText(Item.Text.ToLower, Edit1.Text.ToLower);
end; 
```

# python - unicode 字符串中的内存位置

> ID：15393893
> 
> 赞同：5
> 
> 时间：2013-03-13T18:48:18.010
> 
> 标签：python, unicode, python-2.7

我知道有人解释了为什么当我在 Python 2.7 中创建相等的 unicode 字符串时，它们指向的内存位置与“普通”字符串不同

```
>>> a1 = 'a'
>>> a2 = 'a'
>>> a1 is a2
True 
```

好的，这是我的预期，但是

```
>>> ua1 = u'a'
>>> ua2 = u'a'
>>> ua1 is ua2
False 
```

为什么？如何？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T18:49:21.960

我认为常规字符串是实习的，但 unicode 字符串不是。这个简单的测试似乎支持我的理论（Python 2.6.6）：

```
>>> intern("string")
'string'
>>> intern(u"unicode string")

Traceback (most recent call last):
  File "<pyshell#18>", line 1, in <module>
    intern(u"unicode string")
TypeError: intern() argument 1 must be string, not unicode 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T19:00:58.227

不保证普通字符串会被保留。有时他们是，有时他们不是。这些规则很复杂，特定于版本，并且故意没有记录在案。

你可以依赖这样一个事实，即 Python 会尝试在一个好主意时尝试实习小型、常用的对象。而且，如果您编写任何依赖于任何一个`a1 is a2`或相反的代码，它会在最不方便的时候中断。

如果您想要更多，则必须查看您感兴趣的任何实现的任何版本的源代码。对于 CPython，详细信息主要在`stringobject.c`2.6[和](http://hg.python.org/cpython/file/2.6/Objects/stringobject.c)2.7[以及](http://hg.python.org/cpython/file/2.7/Objects/stringobject.c)3.3[内部](http://hg.python.org/cpython/file/3.3/Objects/unicodeobject.c)。`unicodeobject.c`

后一个文件当然也存在于 2.x 中（它仍然定义`unicode`类型，这与`str`3.x 中的类型不同）。您可以从[2.7](http://hg.python.org/cpython/file/2.7/Objects/unicodeobject.c)的源代码中看到，即使您无法调用它们，也*有*一些对实习字符串的支持。乍一看，2.7 似乎可以处理实习字符串，但永远不会创建它们。`unicode``intern``unicode`

同时，3.3 让事情变得更加有趣，因为一个`str`对象可以指向 UTF-8、UTF-16 或 UTF-32 存储，它们可能会被实习，但使用旧式 Unicode API 的代码可能仍然会以新副本。因此，即使`a1 is a2`，如果您尝试获取它们的字符，它们也可能具有不同的缓冲区。

[python什么时候选择实习字符串](https://stackoverflow.com/questions/10622472/when-does-python-choose-to-intern-a-string)对细节有更多的了解。但同样，来源才是最重要的。

# java - 如何在 java ENUMS 上进行自定义订单？

> ID：15393897
> 
> 赞同：0
> 
> 时间：2013-03-13T18:48:21.937
> 
> 标签：java

我有`Enum`课

```
public enum ServiceTypes {
    Zero("zero", 6, true),
    AVL("Avl", 1, true),
    VPS("vps", 2, true),
    CALCULATOR("calculator", 3, true),
    SIMULATOR("Simulator", 4, true),
    CONTRACT("Contract Output", 5, true),
    ALL("all", 7, true);
    private static final OrderComparator orderComparator = new OrderComparator();
    private static final OrderComparator nameComparator = new OrderComparator();

    @Nonnull
    public static ServiceTypes[] getOrderedServiceTypes() {
       Arrays.sort(values(), orderComparator);
       return values();
    }

    @Nonnull
    public static ServiceTypes[] getNamedServiceTypes() {
        Arrays.sort(values(), nameComparator);
        return values();
    }

    private static final class OrderComparator implements Comparator<ServiceTypes> {
        @Override
        public int compare(final ServiceTypes o1, final ServiceTypes o2) {
            return o1.getOrder().compareTo(o2.getOrder());
        }
    }

    private static final class AlphabeticalOrder implements Comparator<ServiceTypes> {
        @Override
        public int compare(final ServiceTypes o1, final ServiceTypes o2) {
            return o1.toString().compareTo(o2.toString());
        }
    }
} 
```

当 I 时`test` `getOrderedServiceTypes()`，我将`Zero("zero", 6, true)`其视为第一个元素，这是不正确的。

似乎`values()`不是根据比较器排序的。

如何在 Enum 上运行自定义订单？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T18:50:44.117

不，发生的事情是`values()`每次都会创建一个新数组，因此您要对一个数组值进行排序，然后返回一个*完全不同的数组*。

您需要做的就是例如

```
ServiceTypes[] values = values();
Arrays.sort(values, orderComparator);
return values; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T18:51:10.313

> 似乎 values() 不是基于比较器排序的。

的确。根据规范（[第 8.9.2 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.9.2)）：

> ( `values[]`) 返回一个包含此枚举类型常量的数组，按照它们的声明顺序。

`values` *对一次*返回的数组进行排序不会产生任何影响 - 下一次调用时将分发一个新数组。你可以这样做：

```
public static ServiceTypes[] getNamedServiceTypes() {
    ServiceTypes[] array = values();
    Arrays.sort(array, nameComparator);
    return array;
} 
```

或者我会亲自创建一个不可变的列表，按您关心的每种方式排序，并每次返回相同的列表引用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T18:55:26.597

只是另一个观察。您正在初始化`orderComparator`和`nameComparator`作为 的对象`OrderComparator`。如果不是故意的，您需要查看它。

# php - PHP Facebook 图形 API 搜索 cURL - 没有结果

> ID：15393898
> 
> 赞同：0
> 
> 时间：2013-03-13T18:48:24.090
> 
> 标签：php, facebook, facebook-graph-api, curl

我的 facebook 图形 API 有问题。我正在尝试通过关键字过滤的 facebook 上的帖子进行搜索，但我似乎无法获取结果。当我在浏览器中复制我的网址时，它工作正常。

我认为这与我的 cURL 参数有关，我对此很陌生。

```
<?php
$keyword = $_POST['keyword'];
$graph_url = "https://graph.facebook.com/search?&type=post&locale=en_US&q=".$keyword;

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $graph_url);
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
$result = curl_exec($ch);
curl_close($ch);

print $result;
?> 
```

任何人都知道这有什么问题，或者任何知道从 facebook 获取搜索结果的不同解决方案的人。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T19:36:04.047

当您尝试通过 HTTPS 访问站点时，您应该关闭 SSL 验证，或添加证书以进行验证。详细信息：http: [//unitstep.net/blog/2009/05/05/using-curl-in-php-to-access-https-ssltls-protected-sites/](http://unitstep.net/blog/2009/05/05/using-curl-in-php-to-access-https-ssltls-protected-sites/)

快速解决：

```
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, false); 
```

或者您可以将您的网址更改为：

```
http://graph.facebook.com/search?&type=post&locale=en_US&q= 
```

# android - 如何关闭活动并返回到android中的上一个活动

> ID：15393899
> 
> 赞同：161
> 
> 时间：2013-03-13T18:48:25.140
> 
> 标签：android, android-activity

我有一个主要活动，当我单击一个按钮时，开始一个新活动，我使用以下代码来执行此操作：

```
Intent intent = new Intent(this, SettingsActivity.class);
startActivity(intent); 
```

上面的代码是从主要活动中运行的。

现在在主要活动调用的新活动中，我有一个后退按钮。当我点击这个后退按钮时，我希望我的新活动关闭，它必须回到原来的主要活动。

我曾尝试调用`super.finish()`并且只是`finish()` （从新活动），但这会关闭我的整个应用程序（包括我的主要活动）。

我怎样才能关闭当前焦点的活动，然后返回主要活动？

**已编辑**

我手机的后退按钮也关闭了我的整个应用程序这一事实让我认为我错误地启动了第二个活动？

* * *

好的，我一直在寻找，

我创建了一个设置活动，它使用相同的清单代码和相同的代码来启动活动。

对于设置活动，当我按下后退按钮时，它会返回到主活动。

通过上面提到的主要问题中的活动，它只会退出我的整个应用程序。

所以问题似乎不在于完成活动的代码，而在于活动本身。

* * *

## 回答 #1

> 赞同：223
> 
> 时间：2013-03-13T18:50:52.620

我认为您在开始之前正在调用`finish()`方法。`MainActivity``SettingsActivity`

您描述的场景将通过以下两种方式发生：

任何一个

您已在里面设置`android:noHistory = "true"`了按后退键自动导致的原因。`MainActivity``AndroidManifest.xml``MainActivity``finish`

或者

在切换到“SettingsActivity”之前，您已经调用`finish()`了您的`MainActivity`，这会杀死它。当您按下后退按钮时，由于堆栈中没有预设其他活动要弹出，它会返回到主屏幕。

* * *

## 回答 #2

> 赞同：67
> 
> 时间：2013-03-13T19:39:22.943

您只需在您所在的活动中调用 finish() 即可返回上一个活动。请注意，finish() 调用之后的任何代码都将运行 - 您可以在调用 finish() 之后执行 return 来解决此问题。

如果您想将结果返回给活动一，那么在开始活动二时，您需要：

```
startActivityForResults(myIntent, MY_REQUEST_CODE); 
```

在您调用的活动中，您可以从 onCreate() 参数中获取 Intent 或使用

```
getIntent(); 
```

要设置将结果返回到活动一，然后在活动二中执行

```
setResult(Activity.RESULT_OK, MyIntentToReturn); 
```

如果您无意返回，请说

```
setResult(Activity.RESULT_OK); 
```

如果活动的结果不好，您可以使用 Activity.RESULT_CANCELED （默认情况下使用此选项）。然后在活动一中你做

```
onActivityResult(int requestCode, int resultCode, Intent data) {
    // Handle the logic for the requestCode, resultCode and data returned...
} 
```

要完成活动，两个使用与上面描述的相同的方法完成（），您的结果已经设置。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2014-12-02T18:00:23.640

如果你使用片段你应该使用

```
getActivity().onBackPressed(); 
```

如果您使用单一活动，您可以使用

```
finish(); 
```

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2013-03-13T19:21:50.197

When you click your button you can have it call:

```
super.onBackPressed(); 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2016-05-04T21:45:12.617

我相信您的第二项活动可能与您作为子活动的主要活动无关。检查您的`AndroidManifest.xml`文件并查看`<activity>`您的子活动的条目是否包含`android:parentActivityName`属性。它应该看起来像这样：

```
<?xml ...?>
...
<activity
    android:name=".MainActivity"
    ...>
</activity>
<activity
    android:name=".ChildActivity"
    android:parentActivityName=".MainActivity"
    ...>
</activity>
... 
```

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2014-09-15T10:22:27.037

试试这个代码，而不是`finish`：

`onBackPressed();`

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2013-03-13T18:54:12.460

```
Button edit = (Button) view.findViewById(R.id.yourButton);
edit.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View view) {
        Intent intent = new Intent(this, YourMainActivity.class);
        startActivity(intent);
        finish();
    }
}); 
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2013-03-13T19:01:23.803

这将关闭整个应用程序：

```
this.finish(); 
```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2013-03-13T19:19:22.930

你让这太难了。如果我理解您要正确执行的操作，内置的“后退”按钮和 Android 本身将为您完成所有工作：http: [//developer.android.com/guide/components/tasks-and-back-堆栈.html](http://developer.android.com/guide/components/tasks-and-back-stack.html)

此外，实现自定义“后退”按钮违反核心应用质量指南 UX-N1：http: [//developer.android.com/distribute/googleplay/quality/core.html](http://developer.android.com/distribute/googleplay/quality/core.html)

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2013-10-17T13:45:09.767

我不知道这是否有用，但我正在努力解决同样的问题，我找到了一个非常简单的方法，只有一个全局布尔变量和 onResume() 操作。就我而言，如果单击特定按钮，我的 Activity C 应该会触发 Activity B 的 finish()！

活动_A -> 活动_B -> 活动_C

Activity_A（正常打开Activity_B）

Activity_B（在某些按钮上单击打开 Activity_C）：

```
// Global:
boolean its_detail = false;
// -------
SharedPreferences prefs =  getApplicationContext().getSharedPreferences("sharedpreferences", 0);
boolean v = prefs.getBoolean("select_client", false);

its_detail = v;

startActivity(C);

@Override
public void onResume(){
     super.onResume();
     if(its_detail == true){
        finish();
     }
} 
```

因此，每当我单击 Activity C 上的按钮时，它都会执行 Activity B 的“onResume()”功能并返回到 Activity A。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2017-08-23T11:09:20.333

Finish 会关闭整个应用程序，这是我在 Android 开发中讨厌的东西

```
startActivity(intent) 
```

为什么不

> 关闭活动（意图）？

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2017-07-30T14:21:33.247

```
 @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        int id = item.getItemId();

        if ( id == android.R.id.home ) {
            finish();
            return true;
        }

        return super.onOptionsItemSelected(item);
    } 
```

试试这个，它在**工具栏后退按钮**上都可以作为**硬件后退按钮**。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2018-06-06T03:26:21.697

我们遇到了非常相似的情况。

> 活动一（开场）->活动二（预览）->活动三（详细）

不正确的“背压”响应

*   活动 3 上的设备后按也会关闭活动 2。

我已经检查了上面发布的所有答案，但没有一个有效。Activity 2 和 Activity 3 之间的转换的 Java 语法经过审查是正确的。

刚从编码中调用 3rd 方应用程序。通过一个活动。我们决定从配置角度进行调查——最终使我们能够确定问题的根本原因。

**范围**：活动 2（调用者）的配置。

**根本原因**：

```
android:launchMode="singleInstance" 
```

**解决方案**：

```
android:launchMode="singleTask" 
```

显然，在这个“背压”问题上，*singleInstance*考虑在一个实例中调用的活动与调用 Activity，而*singleTask*将允许调用的活动具有自己的身份，足以让预期的背压能够正常工作。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2019-05-20T02:28:37.963

在您的活动的 onCreate 方法上编写以下代码。

```
getSupportActionBar().setDisplayHomeAsUpEnabled(true);
getSupportActionBar().setDisplayShowHomeEnabled(true); 
```

然后覆盖活动的 onOptionsItem 选择方法，如下所示

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()){
        case android.R.id.home:
            finish();
    }
    return super.onOptionsItemSelected(item);
} 
```

你很高兴。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2013-03-13T18:50:07.930

只是不要调用`finish()`你的`MainActivity`then 这消除了覆盖你的需要，`onBackPressed()`除非`SecondActivity`你在该函数中做其他事情。如果你觉得“需要”这个后退按钮，那么你可以简单地调用`finish()`它，只要你没有调用它，它`SecondActivity`就会带你到你的`MainActivity``finish()`

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2020-06-09T07:48:13.477

您必须在 MainActivity 中使用它

```
 Intent intent = new Intent(context , yourActivity);

            intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK |Intent.FLAG_ACTIVITY_MULTIPLE_TASK);
            context.startActivity(intent); 
```

该标志将启动多个任务，这些任务将保留您的 MainActivity，当您调用完成时，它将杀死其他活动并让您回到 MainActivity

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2021-10-12T05:31:19.690

如果上述答案都没有帮助，我认为这可能会对某人有所帮助。

在按下内置的后退按钮或我的自定义后退按钮时，我也遇到了同样的问题，应用程序关闭而不返回到上一个活动。

我正在从第一个活动的工具栏中调用第二个活动。

但在启动活动中，我称之为：

```
case android.R.id.home:
            if (isActionMode) {
                clearSelectingToolbar();
                adapter.notifyDataSetChanged();
            } else {
                onBackPressed(); // This was making the activity to finish 
            }
            break; 
```

这段代码开始活动

```
 case R.id.settings:
            context.startActivity(new Intent(ShowAllDirectoriesActivity.this, SettingsActivity.class)); 
```

删除“case android.R.id.home”部分后，我的活动能够以正常流程执行，即返回上一个活动。

所以检查一下你是否也在使用同样的东西！

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2016-01-24T17:35:39.377

您可能正在调用finish()；在单击按钮事件中，因此主要活动在您单击按钮后立即关闭，当您从下一个活动返回时，应用程序退出，因为主要活动已经关闭并且没有活动活动。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2015-03-17T18:00:09.237

```
{ getApplicationContext.finish();   } 
```

试试这个方法。。

# pcap - C PCAP 库未知类型错误

> ID：15393905
> 
> 赞同：11
> 
> 时间：2013-03-13T18:48:48.640
> 
> 标签：pcap

我在我的 linux 系统上安装了 pcap 库，但是在包含它时出现错误

```
 /usr/include/pcap/bpf.h:88:1: error: unknown type name ‘u_int’
 /usr/include/pcap/bpf.h:108:2: error: unknown type name ‘u_int’
 /usr/include/pcap/bpf.h:1260:2: error: unknown type name ‘u_short’
 /usr/include/pcap/bpf.h:1261:2: error: unknown type name ‘u_char’
 /usr/include/pcap/bpf.h:1262:2: error: unknown type name ‘u_char’
 In file included from ../src/test.c:1:0:
 /usr/include/pcap/pcap.h:125:2: error: unknown type name ‘u_short’
 /usr/include/pcap/pcap.h:126:2: error: unknown type name ‘u_short’
 /usr/include/pcap/pcap.h:171:2: error: unknown type name ‘u_int’
 ...
 make: *** [src/test.o] Error 1 
```

包括我

```
 #include <pcap/pcap.h>
 #include <sys/types.h>
 #include <pcap-bpf.h> 
```

在程序中，我错过了什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-13T19:22:30.113

确保您*没有*定义任何：

*   `__STRICT_ANSI__`
*   `_ISOC99_SOURCE`
*   `_POSIX_SOURCE`
*   `_POSIX_C_SOURCE`
*   `_XOPEN_SOURCE`
*   `_SVID_SOURCE`

构建程序时；它们可能会阻止定义 BSD 数据类型，例如编译器抱怨的那些。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-09-18T20:24:25.563

尝试添加

```
 -D_BSD_SOURCE 
```

az 一个 CFLAG 到你的 Makefile。

# c++ - 如何通过单击 C++ 中的按钮打开 .jar？

> ID：15393906
> 
> 赞同：-1
> 
> 时间：2013-03-13T18:48:51.440
> 
> 标签：c++, windows, jar, c++-cli, minecraft

我想在 Windows 中单击按钮时打开一个 .jar 文件。我有以下代码：

```
private: System::Void btnStartServer_Click(System::Object^  sender, System::EventArgs^  e) {
    STARTUPINFO si;
    PROCESS_INFORMATION pi;
    int spi=sizeof(pi);
    int ssi= sizeof(si);
    ZeroMemory( &si, sizeof(si) );
    si.cb=sizeof(STARTUPINFO); //sizeof(si);
    ZeroMemory( &pi, sizeof(pi) );

    char b = 0;
    b = CreateProcess("C:\\Program Files\\Java\\jre7\\bin\\java.exe ", "-jar craftbukkit.jar", NULL, NULL, 0, CREATE_NO_WINDOW, NULL, NULL, &si, &pi);

    btnStartServer->Text = String::Format(L"{0}", b);
} 
```

但是当我按下按钮时，按钮的文本变为“1”，但我在 Task Menager 中没有看到任何名为“java”的进程。

[如果您知道如何打开、读取输出并向 .jar 文件提供输入/从 .jar 文件中提供输入，如果您回答：如何使用 C++ 打开、读取输出和向 .jar 文件提供](https://stackoverflow.com/questions/15371939/how-to-open-read-output-and-give-input-to-a-jar-file-with-c)输入，我将不胜感激？.

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T19:09:11.803

我终于设法修复它！我只需要在第二个参数中添加一些东西`CreateProcess`：

```
b = CreateProcess("C:\\Program Files\\Java\\jre7\\bin\\java.exe ", "java -Xms1024M -Xmx1024M -jar craftbukkit.jar -o true", NULL, NULL, 0, CREATE_NO_WINDOW, NULL, NULL, &si, &pi); 
```

# c - 如何在arduino中将double的int部分和小数部分转换为两个整数

> ID：15393907
> 
> 赞同：1
> 
> 时间：2013-03-13T18:48:59.027
> 
> 标签：c, int, double, arduino

如何在 Arduino 或 C 中将例如 30.8365146 转换为两个整数：30 和 8365146。

当我尝试通过不允许传输分数的 xbee 系列 1 发送 gps 数据时，我面临这个问题，所以我决定将数据分成两部分。我怎样才能做到这一点？

```
 double num=30.233;
  int a,b;
  a = floor(num); 
  b= (num-a) * pow(10,3); 
```

输出：30 和 232 ！！！输出不是 30 和 233 为什么以及如何修复它

```
 double num=30.2334567;
  int a,b;
  a = floor(num); 
  b= (num-a) * pow(10,7); 
```

输出：30 和 32767 ！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T19:00:49.053

您面临的似乎是一个双精度问题。您写入变量的数字不可表示，因此编译器采用最接近的数字。

你的算法是对的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T19:08:29.880

我将此发布到您对此提出的另一个问题 - 您需要一组小数位数。一个简单的功能将解决它。

```
#define PLACES 3

void extract(double x, int *a, int *b, int *n)
{
    char buf[PLACES+10];

    sprintf(buf, "%.*f", PLACES, x);
    sscanf(buf, "%d.%d", a, b);

    *n = (int) pow(10, PLACES);

    // integer part is a, fractional part b / n
} 
```

例如

```
 extract(30.2334567, &a, &b, &n);
    printf("%d, %d, %d\n", a, b, n);

    -> 30, 233, 1000 
```

`PLACES`如果您想改变精度，可以将其作为整数参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T19:21:39.210

由于这个问题可能涉及舍入误差，正如其他答案所建议的那样，我建议先对浮点值进行乘法运算，然后再进行减法运算。例如，此代码产生了您正在寻找的输出：

```
int main() {
    double num = 30.233;
    int a,b;
    a = floor(num);
    b = num * pow(10,3) - a * pow(10,3);
    printf("%d",b);

    num = 30.2334567;
    a = floor(num);
    b = num * pow(10,7) - a * pow(10,7);
    printf("%d", b);

    return 0;
} 
```

输出：233 和 2334567

# regex - 正则表达式提取器不维护变量值

> ID：15393910
> 
> 赞同：0
> 
> 时间：2013-03-13T18:49:08.583
> 
> 标签：regex, jmeter

正则表达式提取器起初工作正常。我可以让它从上一个 HTTP 请求的响应中提取正确的值 - 一个 groupID。而且，我转身并在提取器之后立即使用 HTTP 请求中的变量。这也很好用。我可以看到响应中的值与下一个请求中放置在帖子中的值相同。

稍后很少有请求，当我需要再次传递 groupID 时，我尝试再次使用该变量。但是，当我查看时，我看到了我放入提取器的默认值，而不是响应中的值。

我的问题有两个：这个提取器是否只需要生成一个临时变量？
如果是这样，有没有办法将此变量插入其他东西以供以后重用？

或者，我只是错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T19:38:54.307

好吧，我发现了我的错误。如果我在阅读有关提取器的信息之前阅读后处理器部分下的信息会有所帮助...

我没有将提取器作为 HTTP 请求的子项。我把它作为下一步。

一旦我把它作为一个孩子嵌套，世界就一切都很好。变量保持原样，并且在每一步之后都不会改变。

经验教训 - RTFM。或者，至少在线文档更彻底一点！

杰米

# r - How to add a title to each plot in R?

> ID：15393911
> 
> 赞同：-1
> 
> 时间：2013-03-13T18:49:11.723
> 
> 标签：r, plot

This code will show several plots on one window. As each plot was produced according to each column named X1 to X13 . SO I want to add `as a main` to each figure the name of the column used to plot the figure see below to distinguish which is which![enter image description here](../Images/5f4fbc84caa5c91bf232e342ccae1230.png).

```
ref= read.table("D:\\AS_asc.txt", sep="",header=TRUE)
sour1 = read.table("D:\\re.txt", sep="",header=TRUE) 
sour2= read.table("D:\\_asc.txt", sep="",header=TRUE)
columns <- paste0("X", 1:13)
par(mfrow=c(4,4))
 lapply(
 columns,
 function(column)
  {
   result1 <- (
    mean(ref[[column]]) - 
     ((sd(ref[[column]]) / sd(sour1[[column]])) * mean(sour1[[column]])) + 
     ((sd(ref[[column]]) / sd(sour1[[column]]) * sour1[[column]]))
     )   # calculate using ref and sour1
     result2 <- ((  
      mean(ref[[column]]) - 
      ((sd(ref[[column]]) / sd(sour2[[column]], na.rm=TRUE)) * mean(sour2[[column]], na.rm=TRUE)) + 
     ((sd(ref[[column]]) / sd(sour2[[column]], na.rm=TRUE) * sour2[[column]])) 
    ))  # calculate using ref and sour2
      plot(
    ref[[column]],
    result1,
    ylab = "[[column]]",
    xlab = "[[column]]",
   col  = 2
    )

   points(ref[[column]], ref[[column]], col = 'green')
  points(ref[[column]], result2, col = 'blue')
   }
   ) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T19:00:53.490

I'm sure you can adapt this into your code, but it's as simple as adding `main = paste(column)` inside your plot command.

An example:

```
columns <- paste0( "X" , 1:9 )
par(mfrow=c(3,3))
lapply( columns , function(column){ plot(1:10 , y = 1:10 , main = paste(column ) ) } ) 
```

![enter image description here](../Images/55a73cbd8d33c73eb7d2d33d1e9400b1.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T18:56:33.730

Wouldn't this just need to add this line inside that function, perhaps after the `points` call:

```
title(main=column) 
```

# html - 我可以根据自己的大小动态调整元素内容的大小吗？

> ID：15393917
> 
> 赞同：1
> 
> 时间：2013-03-13T18:49:27.257
> 
> 标签：html, css, media-queries

我已经非常熟练地使用媒体查询来动态更改 DOM 元素。但是，据我所知，这些只能检测窗口/设备的宽度/高度，而不是单个 DOM 元素。我希望能够制作一个 CSS 来根据元素的大小重新排列和调整元素的内容。例如：

```
╒══════════════════════════════╕
│Browser Window                │
├──────────────────────────────┤
│ ┌──────────────────────────┐ │
│ │.resizingParent           │ │
│ │┌──────┐ Some caption text│ │
│ ││ IMG  │ directly relating│ │
│ ││      │ to the image.    │ │
│ │└──────┘                  │ │
│ └──────────────────────────┘ │
│                              │
└──────────────────────────────┘
╒══════════════════════════════╕
│Browser Window                │
├──────────────────────────────┤
│ ┌───────────────┐            │
│ │.resizingParent│            │
│ │┌─────────────┐│            │
│ ││             ││            │
│ ││  I  M  G    ││            │
│ ││             ││            │
│ ││             ││            │
│ │└─────────────┘│            │
│ │Some caption   │            │
│ │directly       │            │
│ │relating to the│            │
│ │image.         │            │
│ └───────────────┘            │
│                              │
└──────────────────────────────┘ 
```

我希望解决方案像使用媒体查询一样简单，例如下面的（无效）代码：

```
<STYLE>
.resizingParent>IMG {
    display: inline-block;
    width: 25%;
}

.resizingParent(max-width:10em)>IMG {
    display: block;
    width: 100%;
}
</STYLE>

<DIV CLASS=".resizingParent">
    .resizingParent
    <IMG SRC="IMG.png" ALT="IMG"/>
    Some caption text directly relating to the image
</DIV> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T19:57:54.623

不幸的是，媒体查询不是这样工作的。CSS 中有许多自然响应的选项（即，它们不需要在视口改变大小时重新格式化媒体查询），具体取决于您需要完成的工作类型。对于您的特定问题，Flexbox 是最合适的。

[http://codepen.io/cimmanon/pen/Azone](http://codepen.io/cimmanon/pen/Azone)

```
figure {
  display: -webkit-flexbox;
  display: -ms-flexbox;
  display: -webkit-flex;
  -webkit-flex-wrap: wrap;
  -ms-flex-wrap: wrap;
  flex-wrap: wrap;
  border: 1px solid;
}
@supports (flex-wrap: wrap) {
  figure {
    display: flex;
  }
}

figure div {
  -webkit-flex: 1 1;
  -ms-flex: 1 1;
  flex: 1 1;
  margin: 1em;
  text-align: center;
}

figure figcaption {
  margin: 1em;
  -webkit-flex: 10 1 20em;
  -ms-flex: 10 1 20em;
  flex: 10 1 20em;
} 
```

的HTML：

```
<figure>
  <div><!-- this div is mostly here to prevent our image from getting distorted -->
    <img src="http://placehold.it/200x200" />
  </div>

  <figcaption>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus porta elit vel ante hendrerit facilisis. Curabitur aliquam sollicitudin diam, id posuere elit consectetur nec. Vestibulum quam dolor, feugiat in posuere a, posuere imperdiet tellus. Mauris sed ligula vitae urna consequat aliquet. Curabitur pellentesque consectetur ornare. Pellentesque vel euismod odio. Nulla tempus pharetra nulla. In justo dolor, sollicitudin nec commodo sit amet, adipiscing eget lectus. Phasellus velit enim, tempus et lobortis eget, rhoncus nec dolor.</figcaption>
</figure> 
```

因为我们需要我们的 flex 项目来换行，所以浏览器支持目前仅限于 Chrome、Opera 和 IE10。 [http://caniuse.com/#feat=flexbox](http://caniuse.com/#feat=flexbox)

# objective-c - Mac 上的 iOS 样式按钮

> ID：15393918
> 
> 赞同：-1
> 
> 时间：2013-03-13T18:49:28.453
> 
> 标签：objective-c, xcode, osx-mountain-lion

我正在尝试在这里重新创建外观：

![在此处输入图像描述](../Images/f492b49de3b15f503775f1f69f14fe71.png)

（除非通常这些按钮不会被禁用）。如何在 Objective-C 应用程序中重新创建这种 iOS 风格的外观？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T18:53:37.543

[Mondo Switch](http://mcormier.github.com/CocoaMondoKit/)似乎是一个不错的起点

# network-programming - 接收数据包的字节顺序是什么

> ID：15393919
> 
> 赞同：1
> 
> 时间：2013-03-13T18:49:31.467
> 
> 标签：network-programming

我想使用原始套接字编写一个接收程序，它将使用 recvfrom() 接收数据包，所以我想检查数据包的 IP 标头和 tcp 标头

当程序发送数据包时，它会注意网络字节顺序和主机字节顺序问题但是对于我的接收程序，当我使用`recvfrom(sockfd,mesg,1000,0,(struct sockaddr *)&cliaddr,&len);`

数据包中数据的字节顺序是什么？它是网络字节顺序还是主机字节顺序？以及如何处理？

对于这个例子 [http://www.binarytides.com/packet-sniffer-code-in-c-using-linux-sockets-bsd/](http://www.binarytides.com/packet-sniffer-code-in-c-using-linux-sockets-bsd/)

作者在处理接收到的数据包时没有考虑字节序问题，为什么呢？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T18:53:28.967

> 数据包中数据的字节顺序是什么？

约定是网络顺序是大端顺序。但是，您收到的数据就是您发送的数据：没有人会神奇地修改“整数”来改变它们的字节顺序。

> 以及如何处理？

*   在解释整数数据时使用`ntohl`和`ntohs`
*   请注意，位域字节序不是标准的

> 作者在处理接收到的数据包时没有考虑字节序问题，

您发布的链接显示`ntohs`和`ntohl`调用。作者至少在某种程度上**确实处理了字节序。**

# c - 在 ReadFile() 之上创建异步“ReadFileMany()”

> ID：15393921
> 
> 赞同：0
> 
> 时间：2013-03-13T18:49:33.983
> 
> 标签：c, winapi, visual-c++, readfile

我正在尝试创建一个函数 ，`ReadFileMany`它模仿`ReadFile`的接口，它给出了一个要读取的 (offset, length) 对*列表*，并异步读取文件的所有部分。

我在内部`ReadFileMany`通过使用`RegisterWaitForSingleObject`指示线程池线程等待 I/O 完成来执行此操作，以便它可以`ReadFile`再次调用以读取文件的下一部分等。

我遇到的麻烦是我似乎无法模仿`ReadFile`.
具体来说，*文件*句柄本身可以像事件一样使用，*而不*需要事件句柄：

```
OVERLAPPED ov = {0};
DWORD nw;
if (ReadFile(hFile, buf, buf_size, &nw, &ov))
{
    if (WaitForSingleObject(hFile, INFINITE) == WAIT_OBJECT_0)
    {
        ...
    }
} 
```

*但是当然，如​​果用户等待文件句柄，他可能会收到中间*读取完成的通知，而不是最终读取。

所以，在里面`ReadFileMany`，我别无选择，只能将`hEvent`参数传递`ReadFile`给*除了最后一部分之外的所有部分*。

问题是，**有没有办法让用户在所有部分都被读取后等待文件句柄发出信号？**

起初，答案似乎很明显：在阅读*最后*一部分时避免传递事件句柄！
如果读取成功，则可以正常工作，但如果有错误，则不行。如果`ReadFile`在上次读取时突然开始返回错误，我将需要*手动*将文件句柄设置为信号状态，以便让读者从对`WaitForSingleObject(hFile)`.

**但是似乎没有办法在不执行实际 I/O 的情况下将*文件句柄***`ReadFile`设置为信号状态......所以这就是我卡住的地方：有没有办法让我编写这个函数，使其表现得像在外面，还是不可能正确地做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T19:47:48.920

假设您正在尝试读取单个文件的多个部分，我将简单地分配一个结构数组`OVERLAPPED`，为文件的每个请求部分分配一个结构，一次启动所有`ReadFile()`调用，然后用于`WaitForMultipleObjects()`等待所有要完成的 I/O，例如：

```
struct sReadInfo
{
    OVERLAPPED ov;
    LPVOID pBuffer;
    DWORD dwNumBytes;
    DWORD dwNumBytesRead;
    bool bPending;

    sReadInfo()
    {
        memset(&ov, 0, sizeof(OVERLAPPED));
        pBuffer = NULL;
        dwNumBytes = 0;
        dwNumBytesRead = 0;
        bPending = false;

        ov.hEvent = CreateEvent(NULL, TRUE, FALSE, NULL);
        if (!ov.hEvent) throw std::exception();
    }

    ~sReadInfo()
    {
        CloseHandle(hEvent);
    }
}; 
```

.

```
bool error = false;

try
{
    std::vector<sReadInfo> ri(numSections);

    std::vector<HANDLE> h;
    h.reserve(numSections);

    for(int i = 0; i < numSections; ++i)
    {
        ULARGE_INTEGER ul;
        ul.QuadPart = ...; // desired file offset to read from

        sReadInfo *r = &ri[i];

        r->ov.Offset = ul.LowPart;
        r->ov.OffsetHigh = ul.HighPart;

        r->pBuffer = ...; // desired buffer to read into
        r->dwNumBytes = ...; // desired number of bytes to read

        if (!ReadFile(hFile, r->pBuffer, r->dwNumBytes, &r->dwNumBytesRead, &r->ov))
        {
            if (GetLastError() != ERROR_IO_PENDING)
                throw std::exception();

            r->bPending = true;
            h.push_back(r->ov.hEvent);
        }
    }

    if (!h.empty())
    {
        if (WaitForMultipleObjects(h.size(), &h[0], TRUE, INFINITE) != WAIT_OBJECT_0)
            throw std::exception();
    }

    for (int i = 0; i < numSections; ++i)
    {
        sReadInfo *r = &ri[i];

        if (r->bPending)
            GetOverlappedResult(hFile, &r->ov, &r->dwNumBytesRead, FALSE);

        // ...
    }
}
catch (const std::exception &)
{
    CancelIo(hFile);
    return false;
}

return true; 
```

# jquery - 从元素内容设置属性

> ID：15393923
> 
> 赞同：1
> 
> 时间：2013-03-13T18:49:38.277
> 
> 标签：jquery

假设你有这个：

```
<ul>
  <li>[foo] more stuff here</li>
  <li>[bar] stuff here</li>
  <li>[123] stuff here</li>
</ul> 
```

你想要这个：

```
<ul>
  <li id="foo">more stuff here</li>
  <li id="bar">stuff here</li>
  <li id="123">stuff here</li>
</ul> 
```

使用 jQuery，最简单的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T18:55:38.940

```
$("ul li").each(function(){
    $li = $(this);
    var text = $li.text();
    var id = text.substring(text.indexOf("[") + 1, text.indexOf("]"));
    $li.attr("id", id).text(text.replace("[" + id + "]", ""));
}); 
```

* * *

小提琴：http: [//jsfiddle.net/hunter/FDTcj/](http://jsfiddle.net/hunter/FDTcj/)

* * *

摆弄其他括号：http: [//jsfiddle.net/hunter/FDTcj/1/](http://jsfiddle.net/hunter/FDTcj/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T18:57:04.990

单独的 jquery 不会这样做，您需要解析内容。我个人会使用正则表达式：

```
$("li").each() {
    var regex = /\[([^\]]+)\] (.*)/;
    var matches = regex.exec($(this).html());
    $(this).attr("id", matches[1]);
    $(this).html(matches[2]);
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T19:33:58.087

我们可以使用正则表达式来做到这一点。- [FIDDLE](http://jsfiddle.net/FYyEP/)

```
$(document).ready(function(){
    $('ul').children().each(function(){
        $strVal=$(this).text();
        //extracting the required id value.
        var $idVal=((/\[.*\]/g.exec($strVal)).toString()).replace(/(?:\[|\])/g,"");
        $(this).html($strVal.replace(/\[.*\]/g,""));
        alert($idVal);
        $(this).attr('id',$idVal);
    });
}); 
```

# android - google play 上的所有安卓应用列表

> ID：15393926
> 
> 赞同：1
> 
> 时间：2013-03-13T18:49:50.243
> 
> 标签：android

是否有 API/服务可以提供 google play 市场上所有 Android 应用程序的最新快照？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T18:51:24.757

没有提供此类数据的官方 Google Play API。如果您想为 Google Play 编制索引，则必须手动对其进行抓取。

如果您想在您的应用程序中打开列表，那么您可以使用[此处](http://developer.android.com/distribute/googleplay/promote/linking.html)给出的 URL 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-02T09:04:11.323

首先查看[Google Play 服务条款](https://www.google.com/mobile/android/market-tos.html)：

> 3.3 您同意不通过 Google 提供的界面以外的任何方式访问（或试图访问）Google Play，除非您在与 Google 的单独协议中被明确允许这样做。您明确同意不通过任何自动化方式（包括使用脚本、爬虫或类似技术）访问（或试图访问）Google Play，并应确保您遵守网站上任何 robots.txt 文件中的说明谷歌播放网站。

然而，[这](https://code.google.com/archive/p/android-market-api/)是 android 市场的非官方开源 API。

# jquery - JQuery 类选择器与 id 选择器

> ID：15393928
> 
> 赞同：13
> 
> 时间：2013-03-13T18:49:52.233
> 
> 标签：jquery, performance, jquery-selectors, code-maintainability

我有 7 个不同的按钮，它们在点击时都执行相同的 javascript 功能。我应该使用类选择器还是 id 选择器。

```
$("input.printing").on("click", function(event) {
     printPdf(event);
}); 
```

或者

```
 $("#package1Pdf").click(function(event) {
         printPdf(event);
   });
$("#package2Pdf").click(function(event) {
         printPdf(event);
   });
$("#package3Pdf").click(function(event) {
         printPdf(event);
   });
$("#package4Pdf").click(function(event) {
         printPdf(event);
   }); 
```

各自的优点和缺点是什么？哪个更优选。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-13T18:54:00.410

您可以使用没有多个选择器的 ID 过滤器：

`$('[id^="package"]').click(printPdf);`

以上将选择所有以“package”开头的id。这意味着差异主要是语义上的。您应该选择对您的应用程序及其开发方式最有意义的内容。

请参阅[jQuery 属性选择器页面](http://api.jquery.com/category/selectors/attribute-selectors/)以了解 jQuery 选择的灵活性。在此页面上保留一个书签将防止您再次编写类似于第二个示例的代码。

**哪个更好？**

如果您设置了结构，以便您拥有一个在逻辑上正确定义适当元素集的类，那么您应该使用它来选择。

同样，如果您给元素指定了特别命名的 ID，并且没有附加描述性类名称来表示您要选择的内容，则使用 ID 选择。*几乎所有应用程序都不会考虑性能差异，*包括您的应用程序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T19:03:45.190

显然，您使用类的第一个代码更干净、更整洁、更好。

ID 选择器是最快的，这是真的.. 但在这个时代，这并不重要。

所以不要太在意性能（除非它是一个问题），只需使用干净且可维护的那个。

哦，顺便说一句，你甚至不需要那个匿名函数。见下文，

```
$("input.printing").on("click", printPdf); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-13T19:09:16.427

我们都知道 id 选择器更快更好.. 但在你的情况下.. 因为你选择每个 id 8 次.. 与类选择器相比更慢，你可以[在这里看到](http://jsperf.com/id-vs-classzzzz)

在您的情况下，类选择器更好，更快，更具可读性......

**注意：**如果你必须在不久的将来再添加 20 个按钮（100 个太多了）......并且你选择使用 id 选择器...... phewwww ！也就是说，还有 20 个事件处理程序...... ;) ;)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-13T19:04:39.563

正如大多数人所说，您使用的选择器可能会对性能产生影响，但它通常可以忽略不计，更多的是样式和可读性问题。最重要的是，jQuery 将为每个被选择的元素创建一个唯一的处理程序，可以通过 id 单独选择，也可以使用类或属性选择器等多选方法。就个人而言，我喜欢您的第一个示例，因为它将涵盖您视图的未来添加，而无需记住添加另一个处理程序。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-13T19:08:49.360

通常，仅按 Id 选择比按类选择要快，因为 jQuery 在后台使用 getElementById，这在大多数浏览器中更快。请参阅[这篇](http://net.tutsplus.com/tutorials/javascript-ajax/10-ways-to-instantly-increase-your-jquery-performance/)文章以获取更多信息，因为它展示了许多其他提高与 Jquery 相关的性能的方法。但是，请记住选择器性能并不是您唯一需要关心的事情。附加到许多不必要的事件也可能会产生性能问题。为了缓解这个问题，您可以使用委托，请参阅此 jQuery[文档](http://api.jquery.com/delegate/)以获取有关委托的更多信息。

# ruby-on-rails - 在保存或在地图视图上计算坐标时存储坐标？

> ID：15393931
> 
> 赞同：0
> 
> 时间：2013-03-13T18:49:56.217
> 
> 标签：ruby-on-rails, google-maps, google-maps-api-3

在 ruby​​ on rails 中，在谷歌地图中显示用户输入地址的标记的一般方法是什么？

我应该在加载地图时为每个地址调用地理编码服务，还是应该在保存地址然后显示所有坐标时调用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T19:32:56.880

我想答案是在保存时调用地理编码。否则，我将超过 2500 次调用/天谷歌地图地理编码服务的限制

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T20:47:21.180

当用户向您提供地址时，您绝对应该对地址进行地理编码，然后将收到的 latLngs 保存在您的数据库中。这种方式节省了地理编码请求的数量。

# garbage-collection - Java中的总内存是如何计算的

> ID：15393933
> 
> 赞同：2
> 
> 时间：2013-03-13T18:50:05.740
> 
> 标签：garbage-collection, jvm, heap-memory

如果我有 8GB RAM 并且在 64 位 JVM 上使用以下内容

*   最大堆大小 6144MB
*   最大烫发空间 2048MB
*   堆栈大小 2MB

**Q1**：perm gen 空间是从最大堆分配还是单独分配？

**Q2**：如果分开，那么具有上述设置的 jvm 会启动还是会因为堆 + permgen + 堆栈 + 程序数据超过总 RAM 而出现错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T20:19:15.117

首先请记住，您设置的参数`-Xmx`（因为我假设您正在设置堆大小）是 Java 代码可用的堆大小，而不是 JVM 将消耗的内存量。不同之处在于 JVM 保留的管理结构（垃圾收集器结构、JIT 开销等），有时是由本机代码、缓冲区等分配的内存。这个额外内存的大小取决于 JVM 版本、您正在运行的应用程序和其他因素，但我看到 JVM 分配的 RAM 是应用程序可见的堆大小的两倍。对于一般情况，我通常认为 50% 是安全边际，20-30% 是可以接受的。如果您将堆大小设置为接近机器中的 RAM 量，您将遇到交换并且性能会受到影响。

现在对于列举的问题：

Perm gen 至少在 Oracle 的 JDK 6 中是与堆分开的空间。它是分开的，因为它经历了与常规堆完全不同的内存管理规则。顺便说一句，2 GB 的 pergen 空间是巨大的 - 你确定你真的需要它吗？

关于第二个问题，见上文。如果这是 Oracle 的 JDK，您可能会遇到麻烦，因为 perm 和 heap 相加，但是会有额外的内存，通常大约是 6 GB 堆的 20-50%，再加上堆和 perm 空间，这将不仅仅是你的内存。起初尝试此设置可能有效，但一旦堆和永久代空间使用量都接近其配置的限制，您可能会耗尽内存。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T18:59:50.333

heap 和 permgen 是 JVM 的不同内存部分。因此，您将消耗系统上几乎所有的内存。最好留出 20% 的内存以供操作系统/其他任务正常执行。

此外，2 GB 的烫发空间是一个巨大的数字。您是否看过 jar 优化意味着类路径中只存在相关的类？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-13T19:43:12.197

这取决于 JVM 和 JVM 的版本。

*   在 Hotspot **Java 6**中，**PermGen**空间**独立于**最大**堆**大小参数（`-Xmx`并且`-Xms`仅控制 Young/OldGen 大小）。PermGen 空间大小由`-XX:PermSize`和给出`-XX:MaxPermSize`。请参阅[Java SE 6 HotSpot[tm] 虚拟机垃圾收集调优](http://www.oracle.com/technetwork/java/javase/gc-tuning-6-140523.html)

*   **更新：**在 Hotspot **Java 8**中，**不再有 PermGen 空间，**对象驻留在年轻/老一代空间中。

# javascript - if 语句中的布尔值

> ID：15393935
> 
> 赞同：171
> 
> 时间：2013-03-13T18:50:12.387
> 
> 标签：javascript, semantics

今天，考虑到我在学校作业中检查变量是真还是假的方式，我得到了一个关于代码的评论。

我写的代码是这样的：

```
var booleanValue = true;

function someFunction(){
    if(booleanValue === true){
        return "something";
    }
} 
```

他们说这样写会更好/更整洁：

```
var booleanValue = true;

function someFunction(){
    if(booleanValue){
        return "something";
    }
} 
```

我得到的关于“=== true”部分的评论是它不是必需的并且可能会造成混乱。

但是我的想法是最好检查变量是否为布尔值，特别是因为 Javascript 是一种松散类型的语言。

在第二个例子中，一个字符串也会返回“something”；

所以我的问题；将来松开“=== true”部分是否更整洁，或者检查变量的类型是否是一种好习惯。

**编辑：** 在我的“真实”代码中，布尔值表示图像是否已被删除，因此 boolValue 应该具有的唯一值是真或假。

例如，0 和 1 不应该在该变量中。

* * *

## 回答 #1

> 赞同：261
> 
> 时间：2013-03-13T19:00:29.093

首先，事实：

```
if (booleanValue) 
```

将满足`if`任何真值的陈述，`booleanValue`包括`true`、任何非零数、任何非空字符串值、任何对象或数组引用等......

另一方面：

```
if (booleanValue === true) 
```

仅当完全等于时才满足`if`条件。没有其他真值可以满足它。`booleanValue``true`

另一方面，如果你这样做：

```
if (someVar == true) 
```

然后，Javascript 会做的是强制类型`true`匹配的类型，`someVar`然后比较两个变量。在很多情况下，这可能不是人们想要的。正因为如此，在大多数情况下你要避免`==`，因为有一组相当长的规则关于 Javascript 将如何强制将两个东西强制为同一类型，除非你理解所有这些规则并且可以预测 JS 解释器在什么时候可能会做的所有事情给定两种不同的类型（大多数 JS 开发人员不能），您可能希望`==`完全避免。

举个例子来说明它是多么令人困惑：

```
var x;

x = 0;
console.log(x == true);   // false, as expected
console.log(x == false);  // true as expected

x = 1;
console.log(x == true);   // true, as expected
console.log(x == false);  // false as expected

x = 2;
console.log(x == true);   // false, ??
console.log(x == false);  // false 
```

对于 value `2`，您会认为这`2`是一个真实的值，因此它会优于`true`，但这不是类型强制的工作方式。它正在转换右手值以匹配左手值的类型，因此它转换`true`为数字`1`，因此它正在比较`2 == 1`这肯定不是您可能想要的。

所以，买家要小心。`==`除非您明确知道要比较的类型并知道所有可能的类型强制算法如何工作，否则几乎在所有情况下都最好避免使用。

* * *

因此，这实际上取决于预期值`booleanValue`以及您希望代码如何工作。如果您事先知道它只会有一个`true`or`false`值，那么将它明确地与

```
if (booleanValue === true) 
```

只是额外的代码和不必要的

```
if (booleanValue) 
```

更紧凑，可以说更清洁/更好。

另一方面，如果您不知道`booleanValue`可能是什么并且您想测试它是否真的设置为`true`不允许其他自动类型转换，那么

```
if (booleanValue === true) 
```

不仅是一个好主意，而且是必需的。

* * *

例如，如果您查看`.on()`jQuery 中的实现，它有一个可选的返回值。如果回调返回`false`，则 jQuery 将自动停止事件的传播。在这种特定情况下，由于 jQuery 只想`false`在返回时停止传播，因此他们明确检查返回值，`=== false`因为他们不希望`undefined`or `0`or`""`或任何其他会自动类型转换为 false 的东西也满足比较。

例如，这里是 jQuery 事件处理回调代码：

```
ret = ( specialHandle || handleObj.handler ).apply( matched.elem, args );

if ( ret !== undefined ) {
     event.result = ret;
     if ( ret === false ) {
         event.preventDefault();
         event.stopPropagation();
     }
 } 
```

您可以看到 jQuery 明确地寻找`ret === false`.

但是，考虑到代码的需要，jQuery 代码中还有许多其他地方适合进行更简单的检查。例如：

```
// The DOM ready check for Internet Explorer
function doScrollCheck() {
    if ( jQuery.isReady ) {
        return;
    }
    ... 
```

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2013-03-13T18:55:56.323

如果你写：`if(x === true)`，只有 x = true 才会成立

如果你写: `if(x)`，任何**x**都不是：''（空字符串）、false、null、undefined、0、NaN。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-03-13T19:17:04.117

在普通的“如果”中，变量将被强制为布尔值，并在对象上使用 toBoolean：-

```
 Argument Type   Result

    Undefined       false
    Null            false
    Boolean         The result equals the input argument (no conversion).
    Number          The result is false if the argument is +0, −0, or NaN;
                    otherwise the result is true.
    String          The result is false if the argument is the empty 
                    String (its length is zero); otherwise the result is true.
    Object          true. 
```

但是与 === 的比较没有任何类型强制，所以它们必须相等而没有强制。

如果您说该对象甚至可能不是布尔值，那么您可能需要考虑的不仅仅是真/假。

```
if(x===true){
...
} else if(x===false){
....
} else {
....
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-03-13T18:51:41.483

这取决于您的用例。检查类型也可能有意义，但如果它只是一个标志，它就没有。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-03-13T18:53:30.327

一般来说，省略`=== true`.

但是，在 Javascript 中，这些语句是不同的。

`if (booleanValue)`如果`booleanValue`为*真*，将执行- 除了`0`, `false`, `''`, `NaN`, `null`, 和`undefined`.

`if (booleanValue === true)``booleanValue`只有在精确等于时才会执行`true`。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-03-13T18:54:40.083

标识`(===)`运算符的行为与相等`(==)`运算符相同，只是不进行类型转换，并且类型必须相同才能被视为相等。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-03-13T18:54:29.217

由于检查值是`Boolean`首选直接使用它来减少编码，而且它完全一样`==true`

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2013-03-13T18:55:50.537

如果变量只能采用布尔值，那么使用较短的语法是合理的。

如果它可能被分配其他类型，并且您需要与or区分开`true`来，那么您必须使用.`1``"foo"``=== true`

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2013-03-13T18:53:22.300

由于您已经清楚地初始化为布尔值，我认为`===`不需要运算符。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2013-03-13T19:01:15.130

在 Javascript 中，布尔值的概念相当模糊。考虑一下：

```
 var bool = 0 
 if(bool){..} //evaluates to false

 if(//uninitialized var) //evaluates to false 
```

因此，当您使用 if 语句（或任何其他控制语句）时，不必使用“布尔”类型的 var。因此，在我看来，如果你知道它是一个布尔值，那么你声明的“=== true”部分是不必要的，但如果你的值是一个模棱两可的“真实”变量，那么它是绝对必要的。更多关于 javscript 中布尔值的信息可以在[这里](http://javascriptweblog.wordpress.com/2011/02/07/truth-equality-and-javascript/)找到。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2013-03-13T19:11:30.160

我认为你的推理是合理的。但在实践中，我发现省略`===`比较更为常见。我认为有以下三个原因：

1.  它通常不会增加表达式的含义 - 这是在已知值无论如何都是布尔值的情况下。
2.  因为 JavaScript 中存在大量类型不确定性，所以当你得到一个意外的值`undefined`或`null`值时，强制进行类型检查往往会咬你一口。通常你只是希望你的测试在这种情况下失败。（尽管我试图平衡这种观点与“快速失败”的座右铭）。
3.  JavaScript 程序员喜欢在类型上玩得又快又松——尤其是在布尔表达式中——因为我们可以。

考虑这个例子：

```
var someString = getInput();
var normalized = someString && trim(someString);  
// trim() removes leading and trailing whitespace

if (normalized) {
    submitInput(normalized);
} 
```

我认为这种代码并不少见。它处理`getInput()`返回`undefined`、`null`或空字符串的情况。由于两个布尔评估`submitInput()`仅在给定输入是包含非空白字符的字符串时才调用。

在 JavaScript`&&`中，如果它是假的，则返回它的第一个参数；如果第一个参数是真，则返回它的第二个参数；如果未定义等等`normalized`也会如此。这意味着上述布尔表达式的输入实际上都不是布尔值。`undefined``someString`

我知道很多习惯于强类型检查的程序员在看到这样的代码时会畏缩。但请注意，应用强类型可能需要对`null`或`undefined`值进行显式检查，这会使代码混乱。在不需要的 JavaScript 中。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2013-03-13T18:54:40.917

这取决于。如果您担心您的变量最终可能会解析为 TRUE。然后硬检查是必须的。否则由你决定。但是，我怀疑这种语法`whatever == TRUE`会让任何知道他们在做什么的人感到困惑。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2019-09-03T17:56:55.860

修订[https://www.w3schools.com/js/js_comparisons.asp](https://www.w3schools.com/js/js_comparisons.asp)

例子：

```
var p=5;

p==5 ? true
p=="5" ?  true
p==="5" ? false 
```

=== 表示相同类型也相同值 == 只是相同值

[![在此处输入图像描述](../Images/e9cbac02efedd64da4c3cb11693643d2.png)](https://i.stack.imgur.com/dwDVG.png)

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2019-11-05T08:55:16.980

如果需要测试对象，也可以使用布尔对象进行测试 `error={Boolean(errors.email)}`

# ruby - rbenv 不工作

> ID：15393936
> 
> 赞同：8
> 
> 时间：2013-03-13T18:50:14.100
> 
> 标签：ruby, rbenv

我最后将 ruby​​ 2.0 安装到 ~/.rbenv/versions 中，但现在什么都没有了

$ rbenv 版本

```
system
*ruby-1.9.3-p392 (set by /apps/test_app/.ruby-version)
ruby-2.0.0-p0 
```

$红宝石-v

```
ruby 2.0.0.p0 
```

$ 环境 | 路径

```
PATH=/home/cbron/.rbenv/shims:/home/cbron/.rbenv/bin 
```

$cat ~/.bash_profile

```
export PATH="$HOME/.rbenv/bin:$PATH"
eval "$(rbenv init -)" 
```

$rbenv 全球

```
ruby-1.9.3-p392 
```

$rbenv 本地

```
ruby-1.9.3-p392 
```

$rbenv 外壳

```
rbenv: no shell-specific version configured 
```

编辑：现在设置外壳，仍然没有。

$rbenv 外壳

```
ruby-1.9.3-p392 
```

ruby -v 仍然得到

```
ruby 2.0.0p0 
```

我已经找到了我的 bash_profile，甚至重新启动了计算机。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-04-25T10:40:53.903

我在使用 zsh 时遇到了同样的问题，这解决了它：

```
$ echo 'export PATH="$HOME/.rbenv/bin:$PATH"' >> ~/.zshenv
$ echo 'eval "$(rbenv init -)"' >> ~/.zshenv
$ echo 'source $HOME/.zshenv' >> ~/.zshrc
$ exec $SHELL 
```

所以基本上将线条从配置文件移动到环境！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T18:56:04.497

从[rbenv 自述文件](https://github.com/sstephenson/rbenv/#rbenv-shell)中提取：

> ### rbenv 外壳
> 
> `RBENV_VERSION` 通过在 shell 中设置环境变量来设置特定于 shell 的 Ruby 版本。此版本覆盖特定于应用程序的版本和全局版本。
> 
> ```
> $ rbenv shell jruby-1.7.1 
> ```
> 
> 在没有版本号的情况下运行时，`rbenv shell`报告`RBENV_VERSION`. 您还可以取消设置 shell 版本：
> 
> ```
> $ rbenv shell --unset 
> ```
> 
> 请注意，您需要启用 rbenv 的 shell 集成（安装说明的第 3 步）才能使用此命令。如果您不想使用 shell 集成，您可以简单地`RBENV_VERSION` 自己设置变量：
> 
> ```
> $ export RBENV_VERSION=jruby-1.7.1 
> ```

因此，为了使用它，您需要将 ruby​​ 版本指定为`rbenv shell`参数（fe`rbenv shell 2.0.0.p0`或 set `RBENV_VERSION`(fe export `RBENV_VERSION=2.0.0.p0`)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-31T16:31:43.713

**TL;DR：**只要重新安装 rbenv，除非你和我一样固执......

* * *

我弄乱了`.rbenv`文件夹中的权限，所以[垫片](https://github.com/rbenv/rbenv#understanding-shims)没有加载，因为它们没有*执行权限*

```
chmod u+x ~/.rbenv/shims/* 
```

* * *

## 免责声明

我有更深层次的权限问题，**rbenv**甚至没有工作，所以我之前做了`chmod u+x ...`其他

```
chmod u+x ~/.rbenv/libexec/*
chmod u+x ~/.rbenv/**/bin/* 
```

***重新安装rbenv**可能更容易和更安全。但这很有趣！*

# c++ - 查明 C++ 对象是否可调用

> ID：15393938
> 
> 赞同：37
> 
> 时间：2013-03-13T18:50:22.147
> 
> 标签：c++, metaprogramming, traits, typetraits

是否可以编写类型特征，比如`is_callable<T>`告诉对象是否已`operator()`定义？如果事先知道调用运算符的参数很容易，但不是在一般情况下。当且仅当至少定义了一个重载调用运算符时，我希望特征返回 true。

[这个问题](https://stackoverflow.com/questions/5100015/c-metafunction-to-determine-whether-a-type-is-callable)是相关的并且有一个很好的答案，但它不适用于所有类型（仅适用于`int`-convertible 类型）。此外，`std::is_function`有效，但仅适用于正确的 C++ 函数，而不适用于仿函数。我正在寻找更通用的解决方案。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-03-13T21:24:07.387

我认为这个特性可以满足您的需求。它检测`operator()`任何类型的签名，即使它已超载并且是否已模板化：

```
template<typename T>
struct is_callable {
private:
    typedef char(&yes)[1];
    typedef char(&no)[2];

    struct Fallback { void operator()(); };
    struct Derived : T, Fallback { };

    template<typename U, U> struct Check;

    template<typename>
    static yes test(...);

    template<typename C>
    static no test(Check<void (Fallback::*)(), &C::operator()>*);

public:
    static const bool value = sizeof(test<Derived>(0)) == sizeof(yes);
}; 
```

该原理基于[Member Detector 成语](http://en.wikibooks.org/wiki/More_C++_Idioms/Member_Detector)。实际上，如果您将其传递给非类类型，它将无法编译，但这应该不难修复，为了简洁起见，我只是将其省略了。您还可以将其扩展为对函数报告 true。

当然它不会给你任何关于签名的信息`operator()`，但我相信这不是你要求的，对吧？

编辑[克莱姆](https://stackoverflow.com/questions/15393938/find-out-if-a-c-object-is-callable/15396757#comment37917805_15396757)：

让它`false`与非类类型一起工作（返回）很简单。如果你把上面的类重命名为`is_callable_impl`，你可以这样写，例如：

```
template<typename T>
struct is_callable
    : std::conditional<
        std::is_class<T>::value,
        is_callable_impl<T>,
        std::false_type
    >::type
{ }; 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-13T19:19:55.107

这是使用 C++11 的一种可能的解决方案，该解决方案无需知道函子的调用运算符的签名即可工作，但前提是函子不具有多个 的重载`operator ()`：

```
#include <type_traits>

template<typename T, typename = void>
struct is_callable : std::is_function<T> { };

template<typename T>
struct is_callable<T, typename std::enable_if<
    std::is_same<decltype(void(&T::operator())), void>::value
    >::type> : std::true_type { }; 
```

这是你将如何使用它：

```
struct C
{
    void operator () () { }
};

struct NC { };

struct D
{
    void operator () () { }
    void operator () (int) { }
};

int main()
{
    static_assert(is_callable<C>::value, "Error");
    static_assert(is_callable<void()>::value, "Error");

    auto l = [] () { };
    static_assert(is_callable<decltype(l)>::value, "Error");

    // Fires! (no operator())
    static_assert(is_callable<NC>::value, "Error");

    // Fires! (several overloads of operator ())
    static_assert(is_callable<D>::value, "Error");
} 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-09-16T00:36:57.127

这里的答案很有帮助，但我来到这里想要一些东西，它也可以发现某些东西是否是可调用的，无论它碰巧是一个对象还是一个经典函数。 [唉， jrok](/a/15396757/847987)对这方面问题的回答没有奏效，因为`std::conditional`实际上评估了双臂的类型！

所以，这里有一个解决方案：

```
// Note that std::is_function says that pointers to functions
// and references to functions aren't functions, so we'll make our 
// own is_function_t that pulls off any pointer/reference first.

template<typename T>
using remove_ref_t = typename std::remove_reference<T>::type;

template<typename T>
using remove_refptr_t = typename std::remove_pointer<remove_ref_t<T>>::type;

template<typename T>
using is_function_t = typename std::is_function<remove_refptr_t<T>>::type;

// We can't use std::conditional because it (apparently) must determine
// the types of both arms of the condition, so we do it directly.

// Non-objects are callable only if they are functions.

template<bool isObject, typename T>
struct is_callable_impl : public is_function_t<T> {};

// Objects are callable if they have an operator().  We use a method check
// to find out.

template<typename T>
struct is_callable_impl<true, T> {
private:
    struct Fallback { void operator()(); };
    struct Derived : T, Fallback { };

    template<typename U, U> struct Check;

    template<typename>
    static std::true_type test(...);

    template<typename C>
    static std::false_type test(Check<void (Fallback::*)(), &C::operator()>*);

public:
    typedef decltype(test<Derived>(nullptr)) type;
};

// Now we have our final version of is_callable_t.  Again, we have to take
// care with references because std::is_class says "No" if we give it a
// reference to a class.

template<typename T>
using is_callable_t = 
    typename is_callable_impl<std::is_class<remove_ref_t<T>>::value,
                              remove_ref_t<T> >::type; 
```

但最后，对于我的应用程序，我真的很想知道你是否可以说 f() （即，不带参数调用它），所以我改用更简单的方法。

```
template <typename T>
constexpr bool noarg_callable_impl(
    typename std::enable_if<bool(sizeof((std::declval<T>()(),0)))>::type*)
{
    return true;
}

template<typename T>
constexpr bool noarg_callable_impl(...)
{
    return false;
}

template<typename T>
constexpr bool is_noarg_callable()
{
    return noarg_callable_impl<T>(nullptr);
} 
```

事实上，我走得更远。我知道该函数应该返回一个`int`，所以我不仅检查我是否可以调用它，还检查了返回类型，方法是将其更改`enable_if`为：

```
 typename std::enable_if<std::is_convertible<decltype(std::declval<T>()()),
                                                int>::value>::type*) 
```

希望这对某人有帮助！

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2019-04-22T23:14:22.537

C++17 带来了[std::is_invocable](https://en.cppreference.com/w/cpp/types/is_invocable)和朋友们。

[这个答案](https://stackoverflow.com/a/51188325/3466604)还给出了如何用 C++14 模拟它的解决方案。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-03-03T03:12:51.813

当然，已经有其他几个答案，它们很有用，但似乎没有一个能涵盖 AFAICT 的所有用例。借用这些答案和[std::is_function 的这种可能实现](http://en.cppreference.com/w/cpp/types/is_function)，我创建了一个版本，涵盖了我能想到的所有可能的用例。它有点冗长，但功能非常完整（[演示](http://ideone.com/5DTtcc)）。

```
template<typename T, typename U = void>
struct is_callable
{
    static bool const constexpr value = std::conditional_t<
        std::is_class<std::remove_reference_t<T>>::value,
        is_callable<std::remove_reference_t<T>, int>, std::false_type>::value;
};

template<typename T, typename U, typename ...Args>
struct is_callable<T(Args...), U> : std::true_type {};
template<typename T, typename U, typename ...Args>
struct is_callable<T(*)(Args...), U> : std::true_type {};
template<typename T, typename U, typename ...Args>
struct is_callable<T(&)(Args...), U> : std::true_type {};
template<typename T, typename U, typename ...Args>
struct is_callable<T(Args......), U> : std::true_type {};
template<typename T, typename U, typename ...Args>
struct is_callable<T(*)(Args......), U> : std::true_type {};
template<typename T, typename U, typename ...Args>
struct is_callable<T(&)(Args......), U> : std::true_type {};
template<typename T, typename U, typename ...Args>
struct is_callable<T(Args...)const, U> : std::true_type {};
template<typename T, typename U, typename ...Args>
struct is_callable<T(Args...)volatile, U> : std::true_type {};
template<typename T, typename U, typename ...Args>
struct is_callable<T(Args...)const volatile, U> : std::true_type {};
template<typename T, typename U, typename ...Args>
struct is_callable<T(Args......)const, U> : std::true_type {};
template<typename T, typename U, typename ...Args>
struct is_callable<T(Args......)volatile, U> : std::true_type{};
template<typename T, typename U, typename ...Args>
struct is_callable<T(Args......)const volatile, U> : std::true_type {};
template<typename T, typename U, typename ...Args>
struct is_callable<T(Args...)&, U> : std::true_type {};
template<typename T, typename U, typename ...Args>
struct is_callable<T(Args...)const&, U> : std::true_type{};
template<typename T, typename U, typename ...Args>
struct is_callable<T(Args...)volatile&, U> : std::true_type{};
template<typename T, typename U, typename ...Args>
struct is_callable<T(Args...)const volatile&, U> : std::true_type{};
template<typename T, typename U, typename ...Args>
struct is_callable<T(Args......)&, U> : std::true_type {};
template<typename T, typename U, typename ...Args>
struct is_callable<T(Args......)const&, U> : std::true_type{};
template<typename T, typename U, typename ...Args>
struct is_callable<T(Args......)volatile&, U> : std::true_type{};
template<typename T, typename U, typename ...Args>
struct is_callable<T(Args......)const volatile&, U> : std::true_type{};
template<typename T, typename U, typename ...Args>
struct is_callable<T(Args...)&&, U> : std::true_type{};
template<typename T, typename U, typename ...Args>
struct is_callable<T(Args...)const&&, U> : std::true_type{};
template<typename T, typename U, typename ...Args>
struct is_callable<T(Args...)volatile&&, U> : std::true_type{};
template<typename T, typename U, typename ...Args>
struct is_callable<T(Args...)const volatile&&, U> : std::true_type{};
template<typename T, typename U, typename ...Args>
struct is_callable<T(Args......)&&, U> : std::true_type{};
template<typename T, typename U, typename ...Args>
struct is_callable<T(Args......)const&&, U> : std::true_type{};
template<typename T, typename U, typename ...Args>
struct is_callable<T(Args......)volatile&&, U> : std::true_type{};
template<typename T, typename U, typename ...Args>
struct is_callable<T(Args......)const volatile&&, U> : std::true_type{};

template<typename T>
struct is_callable<T, int>
{
private:
    using YesType = char(&)[1];
    using NoType = char(&)[2];

    struct Fallback { void operator()(); };

    struct Derived : T, Fallback {};

    template<typename U, U>
    struct Check;

    template<typename>
    static YesType Test(...);

    template<typename C>
    static NoType Test(Check<void (Fallback::*)(), &C::operator()>*);

public:
    static bool const constexpr value = sizeof(Test<Derived>(0)) == sizeof(YesType);
}; 
```

这适用于非类类型（当然返回 false）、函数类型 (<T()>)、函数指针类型、函数引用类型、仿函数类类型、绑定表达式、lambda 类型等。如果类构造函数是私有的和/或非默认的，即使 operator() 被重载。这会为成员函数指针设计返回 false，因为它们不可调用，但您可以使用 bind 来创建可调用表达式。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-03-13T19:19:56.587

注意：这些假设默认构造函数对您检查的类型有效。不确定如何解决这个问题。

如果可以使用 0 个参数调用，则以下内容似乎有效。is_function 的实现中是否有一些东西可能有助于将其扩展到 1 个或多个参数可调用对象？：

```
template <typename T>
struct is_callable {
    // Types "yes" and "no" are guaranteed to have different sizes,
    // specifically sizeof(yes) == 1 and sizeof(no) == 2.
    typedef char yes[1];
    typedef char no[2];

    template <typename C>
    static yes& test(decltype(C()())*);

    template <typename>
    static no& test(...);

    // If the "sizeof" the result of calling test<T>(0) would be equal to the     sizeof(yes),
    // the first overload worked and T has a nested type named foobar.
    static const bool value = sizeof(test<T>(0)) == sizeof(yes);
}; 
```

如果您知道参数的类型（即使它是模板参数），则以下内容适用于 1 个参数，我想可以很容易地从那里扩展：

```
template <typename T, typename T2>
struct is_callable_1 {
    // Types "yes" and "no" are guaranteed to have different sizes,
    // specifically sizeof(yes) == 1 and sizeof(no) == 2.
    typedef char yes[1];
    typedef char no[2];

    template <typename C>
    static yes& test(decltype(C()(T2()))*);

    template <typename, typename>
    static no& test(...);

    // If the "sizeof" the result of calling test<T>(0) would be equal to the     sizeof(yes),
    // the first overload worked and T has a nested type named foobar.
    static const bool value = sizeof(test<T>(0)) == sizeof(yes);
}; 
```

**[此处](http://pastebin.com/i57SEY7a)**编辑**是处理默认构造函数不可用的情况的修改。**

 *** * *

## 回答 #7

> 赞同：3
> 
> 时间：2019-03-04T10:09:14.623

这是查找 T 是否可调用的巧妙而简短的技巧。它与 Walter E. Brown 在 CPPCON'14 在关于现代模板元编程的演讲中最初提出的思路一致。

```
template <class... >
using void_t = void;

template <class T>
using has_opr_t = decltype(&T::operator());

template <class T, class = void>
struct is_callable : std::false_type { };

template <class T>
struct is_callable<T, void_t<has_opr_t<typename std::decay<T>::type>>> : std::true_type { }; 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-07-31T23:02:52.877

这是另一个实现。

它利用`std::is_function`模板实现免费功能。

对于类，它使用类似于[Member Detector Idiom](https://en.wikibooks.org/wiki/More_C%2B%2B_Idioms/Member_Detector)的东西。如果`T`有一个呼叫运算符，`callable_2`将包含多个`operator()`. `can_call`由于歧义失败，这将导致第一个函数被丢弃（通过 SFINAE） `decltype(&callable_2<T>::operator())`，第二个`can_call`函数将返回`true`。如果`T`没有调用运算符，`can_call`将使用第一个函数（由于重载解析规则）。

```
namespace impl
{
struct callable_1 { void operator()(); };
template<typename T> struct callable_2 : T, callable_1 { };

template<typename T>
static constexpr bool can_call(decltype(&callable_2<T>::operator())*) noexcept { return false; }

template<typename>
static constexpr bool can_call(...) noexcept { return true; }

template<bool is_class, typename T>
struct is_callable : public std::is_function<T> { };

template<typename T> struct is_callable<false, T*> : public is_callable<false, T> { };
template<typename T> struct is_callable<false, T* const> : public is_callable<false, T> { };
template<typename T> struct is_callable<false, T* volatile> : public is_callable<false, T> { };
template<typename T> struct is_callable<false, T* const volatile> : public is_callable<false, T> { };

template<typename T>
struct is_callable<true, T> : public std::integral_constant<bool, can_call<T>(0)> { };
}

template<typename T>
using is_callable = impl::is_callable<std::is_class<std::remove_reference_t<T>>::value,
                                    std::remove_reference_t<T>>; 
```**

# java - 什么是关于数据库和 JNDI 的验证查询？

> ID：15393954
> 
> 赞同：5
> 
> 时间：2013-03-13T18:51:11.357
> 
> 标签：java, jdbc, database-connection, sybase, jndi

我似乎遇到了与[这个原始 SO question](https://stackoverflow.com/questions/2591420/sql-anywhere-11-jz0c0-connection-is-already-closed)的海报相同的问题。

问题是，他用以下评论回答了自己的问题：

> 我解决了我的问题，我向我的 JNDI 数据源添加了一个验证查询。

不幸的是，这对我没有任何意义，也不能帮助我解决我的问题。`validationQuery`所以我问：关于我的数据库（Sybase）和用于保存服务器查找信息的 JNDI 条目，什么是“ ”？

提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-13T19:09:15.327

`Connection`验证查询是由数据源运行的查询，用于在返回之前验证 a是否仍然打开。这是 Tomcat[对验证查询的定义](http://tomcat.apache.org/tomcat-6.0-doc/jndi-resources-howto.html#JDBC_Data_Sources)；向下滚动到“4\. 配置 Tomcat 的资源工厂”部分的中间，寻找“validationQuery”属性。

**编辑**

根据[这个答案](https://stackoverflow.com/a/1449040/1707091)，如果验证查询失败，则不会抛出错误；坏/关闭的连接被丢弃，并创建另一个连接来替换它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T19:09:08.683

它与 JNDI 无关，但与 JDBC 数据源无关。

验证查询用于验证来自数据源连接池的连接，然后再将这些连接移交给客户端。通常这些是影响较小的查询，例如“SELECT 1...”或“SELECT SYSDATE...”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T19:05:58.523

我认为这是一个测试数据库连接是否正常工作的查询。应用服务器级别的某种 ping。

在原始问题中，定期 ping 数据库保持连接打开。

# verilog - 如何从verilog模拟播放音频文件？

> ID：15393958
> 
> 赞同：-4
> 
> 时间：2013-03-13T18:51:24.640
> 
> 标签：verilog, fpga, system-verilog

我的目标是拥有一个带有触发音频文件播放的输入（来自 DE2 板，如时钟或键）的 verilog 模块。如何使用 Quartus 和 DE2 开发板完成此任务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T20:11:03.997

*   只需从闪烁的 LED 开始。
*   其次，您可以尝试运行灯。
*   课程树开始使用您的 FPGA 制造噪音。
*   现在您可以开始将样本从内存发送到扬声器。

不要忘记：先模拟，再合成！

# groovy - Groovy 命名参数会导致参数分配切换——有什么办法吗？

> ID：15393962
> 
> 赞同：5
> 
> 时间：2013-03-13T18:51:40.063
> 
> 标签：groovy, named-parameters

Groovy 会将所有命名参数收集到一个映射中，并将其作为第一个参数传递给一个方法。这看起来很整洁，但是在尝试使它工作之后，它似乎真的无法使用。

所以问题是这样的方法：

```
def method(paramMap, specificVar1 = 7, specificVar2 = 14) 
```

当你用这样的东西调用这个方法时：

```
method(12, extraValue: "hello") 
```

你得到了几乎你所期望的：

```
assert 12 == specificVar1
assert 14 == specificVar2
assert [extraValue:"hello"] == paramMap 
```

不错，有道理。问题是，如果您假设`Map`参数是可选的，那么您最终可能会得到如下值：

```
method(12) 
```

```
assert paramMap == 12
assert specificVar1 == 7 // default values
assert specificVar2 == 14 
```

该标量应该进入 specificVar - 而不是地图。如果我在方法中专门键入地图：

```
def method(Map paramMap, specificVar1 = 7, specificVar2 = 14) 
```

然后`method(12, extraValue: "hello")`像以前一样工作，但`method(12)`抛出一个`ClassCastException`. 这似乎不可用。有什么方法可以让它`Map`“粘”起来，这样如果没有`Map`参数它就只是空的？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-13T20:01:17.317

在参数上设置默认值会创建从左到右组合的重载方法，因此，很难创建`method(12)`并且也能够传递映射条目。

您的方法`def method(paramMap, specificVar1=7, specificVar2=14)`将生成以下方法：

```
Object Maps.method(java.lang.Object)
Object Maps.method(java.lang.Object,java.lang.Object)
Object Maps.method(java.lang.Object,java.lang.Object,java.lang.Object) 
```

以及带有 map 参数的完全类型化方法：

```
def method3(Map paramMap=[:], Integer specificVar1=7, Integer specificVar2=14) {
} 
```

将生成以下方法：

```
Object Maps.method3()
Object Maps.method3(java.util.Map)
Object Maps.method3(java.util.Map,java.lang.Integer)
Object Maps.method3(java.util.Map,java.lang.Integer,java.lang.Integer) 
```

（没有合适的方法`method(12)`）。

此外，传递给该方法的条目将被收集并插入到第一个*映射*参数中。以下方法：

```
def method4(Integer specificVar1=7, Integer specificVar2=14, Map map=[:]) { 
```

生成：

```
Object Maps.method4()
Object Maps.method4(java.lang.Integer)
Object Maps.method4(java.lang.Integer,java.lang.Integer)
Object Maps.method4(java.lang.Integer,java.lang.Integer,java.util.Map) 
```

因此，`method4 12, a:'b'`失败：

```
No signature of method: Maps.method4() is applicable for argument types: 
  (java.util.LinkedHashMap, java.lang.Integer) values: [[a:b], 12] 
```

所以，不，我不认为你可以使用地图做你想做的事:-)。

* * *

**解决方案1：**

如果您需要纯动态解决方案，则可以使用单个 map 参数：

```
def method5(Map map) {
  def specificVar1 = map.specificVar1 ?: 7
  def specificVar2 = map.specificVar2 ?: 14
} 
```

**解决方案 2（更新）：**

您可以创建一个类来表示参数。使用强制映射到对象中的映射是静态可编译的，并且是它的语法糖。

```
@groovy.transform.CompileStatic
class Maps {
  def method6(Foo foo) { "$foo.params, $foo.specificVar1, $foo.specificVar2" }
  def method6(Map map) { method6 map as Foo }

  static main(args) {
    def maps = new Maps()

    assert maps.method6(params: [a: 'b', c: 'd'], specificVar1: 40) ==
        "[a:b, c:d], 40, 14"

    assert maps.method6(new Foo(params: [a: 'b', c: 'd'], specificVar2: 21)) == 
        "[a:b, c:d], 7, 21"
  }
}

class Foo {
  def specificVar1 = 7, specificVar2 = 14, params = [:]
} 
```

**解决方案3：**

一个重载的方法。

```
def method6(Map paramMap, Integer specificVar1=7, Integer specificVar2=14) {
  "$paramMap, $specificVar1, $specificVar2"
}

def method6(Integer specificVar1=7, Integer specificVar2=14) {
  method6 [:], specificVar1, specificVar2
}

assert method6( 12 ) == "[:], 12, 14"
assert method6( ) == "[:], 7, 14"
assert method6( a:'b', 18 ) == "[a:b], 18, 14"
assert method6( 18, a:'b', 27 ) == "[a:b], 18, 27"
assert method6( 90, 100 ) == "[:], 90, 100"
assert method6( a:'b', 140, c:'d' ) == "[a:b, c:d], 140, 14" 
```

地图版本方法不能有默认参数，否则两种方法都会生成无参数`method6`，并且会发生冲突。

# spring - 将spring bean注入非单例类

> ID：15393966
> 
> 赞同：0
> 
> 时间：2013-03-13T18:51:52.430
> 
> 标签：spring, hibernate, design-patterns, dependency-injection, quartz-scheduler

是否可以将 spring bean 注入由调度程序作业控制的轮询过滤器类 (FClass) 中？我不太明白单例如何应用在这里。

我知道弹簧豆是单例的，所以为了将弹簧豆注入 FClass 类。我需要将 FClass 定义为 bean 并将 DI 添加为属性等。

那么我怎么知道 FClass 是否应该是单例？我假设只能创建单例类和 bean 并对它们进行 DI。

我的问题是：

我需要能够将我的外观 bean xfacade 注入 FClass。x_facacde 处理 dao 对象。它有 Y_dao 和一个作为 DI 注入的 Z_hibernate 会话 bean。

当我尝试创建 StatusPollingFilter (FClass) 的 spring bean 并注入外观 bean 时 - 我得到了一个 null 并且在调试模式下从未调用 setter 进行注入。

问题：我认为这可能与 StatusPollingFilter 的线程/调度程序性质有关，并且由于 spring bean 是单例的，因此它可能无法正常工作。

我正在考虑为 StatusPollingFilter (FClass) 创建一个工厂。但是需要知道这是否正确，并且在我做太多工作并意识到即使那样也行不通之前我走在正确的轨道上，因为问题可能出在其他地方。理想情况下，我只想以最简单的方式更新表格。但我必须使用休眠，因为 DAO 存在，但休眠是使用配置的

```
<bean id="sessionFactory" class="org.springframework.orm.hibernate3.LocalSessionFactoryBean">
 with /hibernate/TopoObject.hbm.xml 
```

文件。

因此，无论我如何尝试，我总是在会话或注入的外观 bean 上得到空指针异常。在这里阅读一些 QA 似乎是因为 StatusPollingFilter 是使用调度程序实例化的，而不是 spring 它不能知道 DI bean。上述工厂模式在这里也会有所帮助。

我可能还有一个问题，但是当我遇到它时，我会越过那座桥。但只是简单地提一下，以防有人知道我可能遇到的问题......不确定调度程序将如何/如何为实例调用工厂，因为它全部由第 3 方 api 控制 - 它调用 StatusPollingFilter 但我' m 假设如果我将工厂作为类和参数传入它会找到它的方式......但初始部分是主要问题。请忽略后一个华夫饼。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T15:55:47.387

阅读更多 - 我遇到了ans。因为 StatusPollingFilter 对象在调度程序的控制下（我知道调度程序与它有关），所以它不知道 spring bean，这就是为什么我在尝试注入 bean 时总是得到 null 的原因。

我创建了一个类：

```
 ApplicationContextProvider implements ApplicationContextAware 
```

添加静态访问

```
private static ApplicationContext   appContext; 
```

为它做了一个二传手：

```
public void setApplicationContext(ApplicationContext context)
{
    appContext = context;
} 
```

并添加

```
public static Object getBean(String beanName) throws BeansException
{
    return appContext.getBean(beanName);
} 
```

在代码中用作：

```
EvoTAMDAOFacade evoDao = (EvoTAMDAOFacade) ApplicationContextProvider.getBean("evoDaoFacade"); 
```

我现在可以访问外观 bean 和所有注入外观的 bean。我仍然有休眠会话的问题，但那是由于其他一些问题。

pt 这里是我无法访问 bean，因为它不受 spring 容器的控制，所以我需要以某种方式获取它，可能可以通过工厂方法完成它，但是当有更简单的方法时为什么要乱来。感谢任何可能发布或试图理解我的问题的人的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T20:07:23.883

实际上 ：

> 我假设只能创建单例类

是你错的地方。bean 只是一个让 spring 实例化的类。*默认情况下*，它们被创建为单例，但您可以使用属性指定 bean 的范围`scope`（非常令人惊讶）。您可以指定的值是[此处文档中指定的值](http://static.springsource.org/spring/docs/3.0.0.M3/reference/html/ch04s04.html)

因此，您必须小心的一件事是将 bean 注入到单例`prototype`或`request`单例中。

# ruby-on-rails - 如何个性化每个帖子？(Ruby on Rails)

> ID：15393974
> 
> 赞同：0
> 
> 时间：2013-03-13T18:52:19.310
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, facebox

在每个用户配置文件（localhost:3000/users/username）上，都有一个用户发布的帖子列表。我实现了 facebox，它是一个基于 jQuery 的灯箱，可以在点击时显示图像。这是我为此使用的代码：

```
<a href=<%= post.image_url %> rel="facebox"><%= image_tag post.image_url(:thumb).to_s %></a> 
```

**问题是，如果用户发了 5 篇帖子，同一张图片在点击后会重复 5 次以显示在 Facebook 框中。**

这是我在 @posts 中呈现的 show.html.erb

```
<% provide(:title, @user.name) %>
<div class="row">
  <aside class="span4">
    <section>
      <h1>
        <%= gravatar_for @user %>
        <%= @user.name %>
      </h1>
    </section>
       <br>
  </aside>
 <br>

  <div class="span10">
    <%= render 'follow_form' if signed_in? %>
    <% if @user.posts.empty? %>
<h3>Browse</h3>
<% end %>
    <% if @user.posts.any? %>
      <ol class="posts">
        <%= render @posts %>

      </ol>

      <%= will_paginate @posts %>
    <% end %>
  </div>
</div> 
```

这是 _post.html.erb

```
<script src="/jquery.js" type="text/javascript"></script>
<link href="/src/facebox.css" media="screen" rel="stylesheet" type="text/css"/>
<script src="/src/facebox.js" type="text/javascript"></script> 
<script language="javascript">

 jQuery(document).ready(function($) {
  $('a[rel*=facebox]').facebox() 
}) 

</script>

    <li>
      <span class="content"><%= simple_format(post.content) %></span>
      <% if post.image.present? %>
      <a href=<%= post.image_url %> rel="facebox"><%= image_tag post.image_url(:thumb).to_s %></a>
      <br>
      <% else %>
      <% end %>
      <span class="timestamp">
        Posted <%= time_ago_in_words(post.created_at) %> ago.
      </span>
</li> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T19:54:11.440

我认为 Facebook 会自动对图像进行分组，因为它们都具有相同的“rel”属性。

尝试这样的事情：

```
<%= link_to post.image_url, :rel => "facebox-#{post.id}" do %>
  <%= image_tag post.image_url(:thumb).to_s %>
<% end %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T20:17:12.823

`_post.html.erb`每个帖子都包含并执行一次javascript 。因此，如果用户有 5 个帖子，您将初始化 facebox 5 次。将脚本标签移出部分。相反，将它们放入其中，`show.html.erb`以便它们仅在整个页面中执行一次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T22:41:03.710

如果还是不走运，请尝试删除 rel 属性并根据类名调用 facebox：

```
<%= link_to post.image_url, :class => "facebox" do %>
  <%= image_tag post.image_url(:thumb).to_s %>
<% end %> 
```

和javascript：

```
$('a.facebox').facebox() 
```

# objective-c - 你如何对 CocoaPod 代码进行单元测试？

> ID：15393975
> 
> 赞同：1
> 
> 时间：2013-03-13T18:52:24.007
> 
> 标签：objective-c, unit-testing, cocoapods

我正试图将 Cocoapods 的魔力带到我的公司，但它遇到了一个小障碍。我们需要能够对来自 Cocoapods 的代码进行单元测试。

所以，我的问题是，是否有其他人在他们的公司中遇到过这种情况（或者是否有人偏执到足以关心对这段代码进行单元测试并弄清楚如何进行？）。这对我们来说可能不是一个交易破坏者，但如果我提前解决这个问题，它肯定会帮助管理工作顺利进行。

我们可能可以在客户端应用程序中插入测试，但考虑到我们将使用 pod 来减少手动工作，这需要大量的手动工作。以某种方式做一次就好了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T23:53:29.173

在我的`Podfile`我使用这样的东西：`link_with ['Sail', 'Sail-Tests']`

这会将我的所有 Pod 与我的正常目标和测试目标链接起来。然后从我的测试中，我可以导入和测试我想要的任何东西。不过，这可能与“在客户端应用程序中插入测试”重叠。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T09:36:50.893

如果您想使用类似于 Xcode 创建的设置（其中测试目标取决于被测对象），另一种选择是：

```
pod 'ObjectiveSugar', '~> 0.5'

target :test, :exclusive => true do
  pod 'OCMock', '~> 2.0.1'
end 
```

将目标标记为独占表示它不应继承父项的依赖项。这可以防止此设置出现重复符号错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-23T11:43:21.083

我使用 Cocoapods 来集中一整套 20 多个应用程序的核心功能，这些应用程序是同一个“基础”应用程序的白标版本。为此，我设置了两个 Xcode 项目的结构。

第一个包含核心功能，包括验证预期行为的单元测试（在我的例子中是 Kiwi）。规范以及 xcodeproj 没有出现在 podspec 中，但该项目在 CI (Jenkins) 下进行了测试。

第二个项目包含白标签应用程序（每个应用程序一个项目），它通过 Podfile 依赖于第一个项目设置。在这个轻量级应用程序中还有 Kiwi 规范，仅测试该特定应用程序的任何自定义代码。它不再测试核心类，因为它们已经被覆盖了。该项目也在CI下。

因此，对您的问题的主要回答是，您的库不仅包含依赖项目所需的源文件，还包含运行单元测试的编译 Xcode 项目（应用程序或库）。

# ios - 如何检测 UITextView 中被 UIPanGestureRecognizer 触及的单词？

> ID：15393977
> 
> 赞同：1
> 
> 时间：2013-03-13T18:52:27.280
> 
> 标签：ios, objective-c, uitextview, uigesturerecognizer, uipangesturerecognizer

我实际上是在尝试在 iBooks 中创建类似的突出显示功能，您可以在其中通过单击平移文本并突出显示单词。这是没有编辑任何文本。问题是我无法检测到 uitextview 中的哪些单词正在被平移。

我尝试使用该方法：[Get word from long tap in a word of UITextView](https://stackoverflow.com/questions/11349459/get-word-from-long-tap-in-a-word-of-uitextview)。但是，当使用手势的 locationOfTouch:inView: 作为“pos”参数调用 handlePanGesture 方法中的方法时，这似乎没有检测到一个词，因为这一行......

```
 UITextRange * wr = [_tv.tokenizer rangeEnclosingPosition:tapPos withGranularity:UITextGranularityWord inDirection:UITextLayoutDirectionRight]; 
```

..返回零。

还有其他方法可以做到这一点吗？

# ios - AIR 3.6 + ASC 2.0 在 iOS Release Build 中产生白屏

> ID：15393978
> 
> 赞同：1
> 
> 时间：2013-03-13T18:52:33.247
> 
> 标签：ios, actionscript-3, air

我们目前正在开发一个 AIR for iOS 应用程序。我们上周升级到 AIR 3.6，但在导出发布版本时遇到了问题。基本上，您启动应用程序并看到我们的启动图像，但随后......什么也没有。只是一个白屏。

ADL 工作正常，只是不发布版本。我已经降级到 3.5，并且根本没有更改代码库，我能够毫无问题地使用该应用程序。

升级只是备份以前的 SDK，并将新的 SDK 粘贴到旧的 SDK 中并替换所有文件（按照说明）。我也按照 Adob​​e 的指示在 lib/aot/ 中创建了一个名为“strip”的空目录，但这并没有解决问题。我们在 Windows 和 OS X 上编译后都遇到了这个问题。

这是整个团队使用 FlashBuilder 4.7 构建的 ActionScript Mobile（非 Flex）项目。更改渲染模式（我的第一个怀疑）并不能解决问题。

有人对这个问题有任何见解吗？我在 Adob​​e 论坛中看到了几篇帖子，都提到了类似的问题，但除了添加“strip”文件夹之外没有其他解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T18:44:18.190

[*来自评论*]

您是否尝试过在没有 ASC 2.0 的情况下使用 AIR 3.6 SDK？如果可行，则问题可能是由新编译器引起的。

# jqgrid - jqGrid：选择行内编辑的文本

> ID：15393980
> 
> 赞同：1
> 
> 时间：2013-03-13T18:52:42.027
> 
> 标签：jqgrid, selection, inline-editing

我有一个网格，我正在使用 PHP 和 JSON。我正在使用 ondblClickRow 进行内联编辑。我需要的是：当我双击一个字段时，我希望选择该字段的内容。很抱歉问这个问题，但我没有找到这个......当我在谷歌上搜索它时，我只是找到了选择行和这个问题的例子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T20:21:59.283

我建议你看看[这个答案](https://stackoverflow.com/a/10176888/315935)和[另一个](https://stackoverflow.com/a/8999693/315935)。可能从您使用的网络浏览器的最后一个答案修改代码将获得您的问题的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T19:13:34.093

如果您希望在启用内联编辑模式后**聚焦**单个单元格，请尝试以下操作：

```
ondblClickRow: function (rowId, rowIndex, columnIndex) {
  var grid = $('#mygrid');
  grid.editRow(rowId, true, function() {
    var colModel = grid.getGridParam('colMode');
    var colName = colModel[colIndex].name;
    var input = $('#' + rowId + '_' + colName);
    input.get(0).focus();
  });
}
} 
```

在这里找到代码： [http ://www.trirand.com/blog/?page_id=393/help/setting-focus-on-a-cell-after-entering-edit-mode/](http://www.trirand.com/blog/?page_id=393/help/setting-focus-on-a-cell-after-entering-edit-mode/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-29T20:33:59.130

如果您单击网格中有特定列，则应选择其内容，然后在您的 colmodel 中将此代码添加到每一列：

```
{
    name: 'TEXT_BOX',
    index: 'TEXT_BOX',
    label: 'Notes',
    width: 100,
    align: 'left',
    sortable: false,
    hidden: false, 
    dataEvents: [ { type: 'click', data: { i: 7 }, fn: function(e) { e.target.select(); } }] 
} 
```

`dataEvents`当您单击它时，将选择输入字段中的文本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-22T09:44:56.287

```
// Text will get Selected of cell when inline editing 
    $('#gridTableObj').jqGrid({
        ....
        ..
        afterEditCell : function(rowid, cellname, value, iRow, iCol){
            $('#'+rowid+'_'+cellname).select(); // with this the edited cell value will be selected.            
        }
        ...
        ..

    }); 
```

# django - 保存不完整的 Django 表单

> ID：15393981
> 
> 赞同：2
> 
> 时间：2013-03-13T18:52:53.113
> 
> 标签：django, forms

我有一个相当长的表格，用户不能总是一次完成。我希望用户能够点击按钮并保存表单以供以后完成。我的第一个想法是无论如何都简单地保存表单并以某种方式将其标记为不完整。但是，我似乎无法解决不完整的表格无效且无法强制保存的事实。例如，如果表单末尾附近的必填字段为空白，即使我跳过 form.is_valid() 步骤，表单也无法保存到数据库中。

是否有另一种方法可以暂时保存表单的数据？另外，我知道之前有人问过这个问题，但恐怕这个答案不是很有帮助：[Django Save Incomplete Progress on Form](https://stackoverflow.com/questions/4168432/django-save-incomplete-progress-on-form)

**更新** 谢谢大家到目前为止的回复。下面的一些答案让我意识到我从原来的问题中遗漏了一个细节。我需要能够让用户选择是否在他们返回时完成表单。用户每天数次将信息输入此表格。他们可能会回到未准备好完成表单项 A 的表单，而是需要从头开始填写表单项 B。因此，仅使用最后一个不完整的表单自动填充表单并不能完全解决问题。很抱歉，当我发布原始问题时，我没有想到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T05:25:49.720

如果您使用[django-merlin](https://github.com/supercodepoet/django-merlin)，您可以将那个长表单拆分为许多较小的表单，并且每个先前的表单都将保存在用户的会话中，等待他们回来。如果他们离开并通过向导的基本 url 返回它，他们将在他们离开的地方恢复。

# arrays - 分解字符串然后转换为向量？

> ID：15393983
> 
> 赞同：0
> 
> 时间：2013-03-13T18:52:54.480
> 
> 标签：arrays, string, matlab

如果我有三个字符串，例如`'Y20194'`, `'219Y42'`，`'12345'`我如何将它们分解成一个向量，例如`[Y 2 0 1 9 4]`,`[1 2 3 4 5]`和`[2 1 9 Y 4 2]`? 我正在使用`str2num`，但我认为在转换为数值之前我错过了一个步骤（首先将字符串中的各个数字分开）。此外，字符读取不正确并且使用`str2num`给了我[]。

我有一个带有字符串行的文件，例如上面的那个。我曾经`fgetl`将文件的每一行读入字符串，但我有点卡住了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T19:29:07.563

数字向量中不能同时包含字符和数字。

您可以执行以下操作：

```
s = 'Y20194';
c = cellstr(s')';
v = str2double(c); 
```

单元格数组`c`将所有字符从`s`分隔到单个单元格中。请注意，您必须先转置字符串`s`。

在向量`v`中，第一个值将是 NaN，因为它是一个字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T20:19:12.660

字符将被保留。并且数字将被转换为双精度类型。

如果输入不是来自读取文件，则代码如下。result1 是包含所需数组的单元格：

![在此处输入图像描述](../Images/eb2ebc4e935d78d2469886149e65e9df.png)

如果输入的是一个文件，我们以这个文件为例：demo1.txt，其内容如下： ![在此处输入图像描述](../Images/8ca1982d9deb96e5baf14e4a5a9f0ce8.png)

将每一行转换为您想要的代码如下。该代码将每一行转换为您想要的，然后显示它。

![在此处输入图像描述](../Images/ae3f6e66f0f6802c0df5d5aa8e19878e.png)

如果你想用零替换'Y'或其他字母，那么代码如下

![在此处输入图像描述](../Images/9ffa3c7d5ae0f2580a9de95141bf2a92.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T16:54:54.567

如果您想将其更改`Y`为`0`一个非常简单的解决方案是可用的：

```
str = 'Y20194';
str(str==Y)='0';
str - '0' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T19:11:15.140

也许[STRSPLIT](http://www.mathworks.com/help/matlab/ref/strsplit.html)会有所帮助。

```
ts = strsplit('Y20194');
%       ts <- {'Y', '2', '0', '1', '9', '4'} 
```

现在您可以尝试使用 str2num 将向量中的每个元素单独转换为数字。

```
N = size(ts, 1);
str = cell(1, N);
for i=1:N;
    str{i} = str2num(ts{i, 1});
end 
```

但由于字符串中的某些字符不是数字（例如，'Y'），我不希望它完美地工作。

（已经有一段时间了，我的一些索引可能会切换。）

# actionscript-3 - 全球 Flash Player 数量？覆盖子声音变换的音量？

> ID：15393985
> 
> 赞同：1
> 
> 时间：2013-03-13T18:52:57.100
> 
> 标签：actionscript-3, flash

是否可以将音量级别设置为“高于”对象的 soundTransform 设置，从而导致 Sound 或 Video 对象报告与通过扬声器发出的音量不同的音量？（在 Flash Player 中，即——没有将计算机静音的点。）

例子：

顶级电影：不知何故，音量设置为 .2
子电影：声音对象的音量设置为 .8

用户听到 0.2 的音量，但子电影报告其音量为 0.8。

可能的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T10:14:26.587

听起来您正在寻找的是`SoundMixer.soundTransform`属性：[http](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/SoundMixer.html) ://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/SoundMixer.html 。

这本质上是 Flash 应用程序中所有声音的全局音量。减少这将减少您听到的所有声音的实际音量 - 但它们的`soundtransform.volume`属性将保持不变。

# sql-server-ce - 数据会自动从 SQL Server CE 中删除

> ID：15393994
> 
> 赞同：0
> 
> 时间：2013-03-13T18:53:18.450
> 
> 标签：sql-server-ce

我正在尝试使用 SQL Server CE 3.5 作为后端在 VS2010 c# (Winforms) 中编写应用程序。我使用事务在表中插入数据，在测试时我插入了 18 行，一切正常。

但是第二天我发现一些行丢失了，当我尝试插入新行时，出现了一些与主键相关的错误。当我在 SSMS 中打开数据库并尝试`@@Identity`时，它返回数字 19。

我从 SSMS 向数据库中插入了一个值，当我尝试应用程序时，一切正常。现在标识列包含从 1 到 14 和从 19 到 25 的值（缺少 15 到 18）。

现在请各位专家帮我弄清楚这种自动删除数据背后的原因。

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T09:35:35.233

如果 INSERT 失败，您的身份值可能会出现“漏洞”，没有数据被“自动”删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T18:36:12.733

感谢**全能。**
我得到这个问题是我在表中有 14 个条目，当我构建项目并添加 5 个条目时，id 列达到 19，然后我清理了解决方案。这使得从 14 到 19 的条目丢失，但数据库正在按预期播种。

多谢。

*   项目清单

***解决方案=新 StackOverFlow().Experts.Suggestions.ToUnderstandAndApply();***

# c# - SQL 网络接口，错误：Windows 重新启动后 26 消失

> ID：15393995
> 
> 赞同：0
> 
> 时间：2013-03-13T18:53:18.577
> 
> 标签：c#, sql

我知道这是 SO 上最受欢迎的问题之一：著名的“SQL 错误 26” 不同之处在于我的 C# 应用程序第一次成功建立连接，然后第二次拒绝建立连接。我重新启动计算机，应用程序第一次建立连接，然后需要再次重新启动。

第一次能建立连接让我有信心：我的服务器名正确，我的实例名正确，我使用的用户名和密码组合正确，服务器机器开启，SQL浏览器服务开启服务器正在运行，我可以通过防火墙。

我有一堆方法，它们看起来都与以下内容非常相似：

```
private static string connection_string = @"Server=my_server\MS_SQL;User Id=user1;Password=password1"

public static List<string> GetListOfExistingItems(int item_id)
    {
        List<string> list_items = new List<string>();

        try
        {
            using (SqlConnection sql_conn = new SqlConnection(connection_string))
            {
                sql_conn.Open();

                SqlCommand sql_comm = new SqlCommand("SELECT Name FROM dbo.table1 WHERE ID=" + item_id, 
                                                     sql_conn);

                using (SqlDataReader sql_reader = sql_comm.ExecuteReader())
                {
                    while (sql_reader.Read())
                    {
                        list_items.Add(sql_reader["Name"].ToString());
                    }
                    sql_reader.Close();
                }
            }
        }
        catch (Exception excp)
        {
            throw new Exception(excp.Message);
        }
        return list_items;
    } 
```

一些有趣的事实：

*   重新启动解决了问题（一次）。
*   注销并登录并不能解决问题。
*   如果我不关闭应用程序而是多次运行查询，则不会出现错误。
*   运行应用程序并关闭一次后，我无法从 SQL Server Management Studio 连接到我的数据库。
*   当我重新启动计算机时，我看到“等待后台程序关闭”，但没有列出任何程序。我等待了一段时间（可能 10-20 秒），消息消失，计算机最终重新启动。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T19:24:31.660

某处你没有关闭你的连接。

我的下一个故障排除步骤是对您的代码（全部）进行字符串搜索`sql_conn.Open();`，并找到不在 using 块中的代码，或者没有明确关闭的代码。

# android - 简单 AsyncTask 中的错误

> ID：15393998
> 
> 赞同：0
> 
> 时间：2013-03-13T18:53:24.750
> 
> 标签：android, sqlite

在我的 android 应用程序中，我正在尝试使用 ASYNC Task ...每当我在 doInBackground(...) 中设置 EditText 的任何 TextView 的文本时 .... 我收到一个错误，但是当我在 onCreate 中设置相同时，它有效.. :( 这是代码：

```
public class RemoteFiles extends Activity {

EditText etrmm ;
TextView t;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_remote_files);
    initVars();         
    new ConnectToServer().execute(null);

}
protected void initVars(){
    etrmm =(EditText)findViewById(R.id.etRM);
    etrmm.setText("UnSET");
    t=(TextView)findViewById(R.id.RM);
    t.setText("UnsET");
}
public class ConnectToServer extends AsyncTask<String, Integer, Void> {

    //private ProgressDialog pd = new ProgressDialog(RemoteFiles.this);
    private ProgressDialog pdd ;
    @Override
    protected Void doInBackground(String... params) {
        // TODO Auto-generated method stub

        for(int i=0;i<20;i++){
            publishProgress(5);
            try {
                Thread.sleep(88);
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }

        etrmm.setText("Edittext SET");

        return null;
    }

    @Override
    protected void onPostExecute(Void result) {
        // TODO Auto-generated method stub
        super.onPostExecute(result);
        pdd.dismiss();

    }

    @Override
    protected void onPreExecute() {
        // TODO Auto-generated method stub
        super.onPreExecute();
        // pd.setMessage("Connecting to server... ");
        // pd.show();

        pdd = new ProgressDialog(RemoteFiles.this);
        pdd.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
        pdd.setMax(100);
        pdd.show();

    }

    @Override
    protected void onProgressUpdate(Integer... values) {
        // TODO Auto-generated method stub
        super.onProgressUpdate(values);
        pdd.incrementProgressBy(values[0]);

    }

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_remote_files, menu);
    return true;
}} 
```

这是布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<TextView
    android:id="@+id/RM"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"

    android:padding="@dimen/padding_medium"
    android:text="@string/hello_world"
    tools:context=".RemoteFiles" />

<EditText
    android:id="@+id/etRM"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:ems="10" >

    <requestFocus />
</EditText> 
```

logcat 说 android.view.ViewRoot$CalledFromWrongThreadException

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T18:55:05.327

**doInBackground(String... params) 不在 UI Thread 上运行**，所以你不能在那里为 edittext 设置文本

如果要设置edittext值，请返回doInBackGround中的值并使用onPostExecute中的参数值并将其设置在onPostExecute()中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T18:55:00.787

你不能`UI`在`doInBackground()`. 这应该在任何其他方法中完成。出于您的目的，可能`onPostExecture()`

看看[AsyncDocs](http://developer.android.com/reference/android/os/AsyncTask.html)，`doInBackground()`不在 main ( `UI`) 线程上运行

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T18:59:58.967

AsyncTask 的 onpreExecute 和 onPostExecute 方法在 UI 线程上运行。您可以在此处更改 UI。doInBackground 不在 UI 线程上运行。它用于执行长时间运行的操作。在后台线程中运行。您无法从 doinBackground 中的后台线程更新 ui。

在 asynctask 的 onPostExecute 方法中的 textview 中设置文本。

开发人员站点中的文档在标题“THE 4 STEPS”下提供了有关该主题的详细信息。[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)